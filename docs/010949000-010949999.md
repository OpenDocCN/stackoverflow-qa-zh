# StackOverflow 问答 10949000-10949999

# php - 文件写入不能从终端工作，但可以从浏览器工作

> ID：10949004
> 
> 赞同：2
> 
> 时间：2012-06-08T12:38:56.583
> 
> 标签：php, unix, terminal

我有一个 php 脚本，其中包含一些文本文件写入操作。现在，如果我从浏览器执行脚本，通过使用它的 url 访问它，它工作正常并且文件被完美地写入。但是当我从终端运行相同的脚本时，使用命令，脚本运行但不执行文件操作。我不确定，为什么会这样。我知道这可能是一件愚蠢的事情，或者我错过了一些关键或任何东西，但现在无法弄清楚。

这是我正在使用的命令

```
/path/to/php -f /path/to/file 
```

这是写入文本文件的代码：

```
$myFile = "filename.txt";
$fh = fopen($myFile, 'a+') or die("can't open file");
$str = "file content here";
fwrite($fh, $str);
fclose($fh); 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T12:51:45.533

这可能使用不同的路径。例如，从终端运行时，它将在您运行命令时所在的目录中查找“filename.txt”，而从浏览器运行时，它将在与您的 PHP 文件相同的目录中查找。

要解决此问题，请使用完整路径，而不仅仅是您正在访问的文件的文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:41:42.527

这可能是权限问题。当您从浏览器运行脚本时，将使用网络服务器的凭据执行脚本。

为文件/目录设置正确的权限或以网络服务器的用户身份运行脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T12:47:35.900

检查路径，使用来自 /var/www/example.com/filename.ext 的路径而不是[http://www.example.com/filename.ext](http://www.example.com/filename.ext)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T12:54:30.370

ilanco 是对的，这可能来自权限问题。在 Unix 上，解决这个问题的一种方法是：

1\. 首先，将此文件的所有权授予命令行用户，并将组设置为网络服务器。例如，如果服务器是apache，执行如下命令：

```
chown your_username:www-data filename 
```

`www-data`是 apache web 服务器的默认组。此命令应以 root 身份运行。

2\. 然后，授予组写入此文件的权限：

```
chmod g+w filename 
```

# asp.net-mvc-3 - 在 MVC 3 中将模型和其他参数传递给控制器

> ID：10949007
> 
> 赞同：0
> 
> 时间：2012-06-08T12:39:04.723
> 
> 标签：asp.net-mvc-3

好的，我是 MVC 的新手，我正在解决一个我无法找到答案的问题。

我正在尝试使用 jQuery 将我的 FormModel 对象和 rowId 传递给我的控制器中的 Action 方法。rowId 按预期出现，但 FormModel 要么作为 null 出现，要么将所有属性设置为默认值。

我相信这与 MVC 3 绑定机制有关，但是对于 MVC 来说太新了，我不能 100% 确定。

这是 Action 方法的一个非常简化的版本：

```
 [HttpPost]
    public ActionResult RemoveProductMessage(FormModel form, int rowId)
    {
        try
        {
            if(Request.IsAjaxRequest())
            {

            }
        }
        catch
        {
            return Redirect("~/DefaultExceptionPage.htm");
        }

        return PartialView("_ProductMessage", form);
    } 
```

这是我用来尝试传递值的 JavaScript：

```
$(document).ready(
(function () {
    $("#remove-product-message-row").live(
        "click",
        function (rowId) {
            var url = '/Forms/RemoveProductMessage';
            var x = $('#main-form').serialize();
            var dataToSend = { form: JSON.stringify(x), rowId: 1 };

            $.ajax({
                url: "/Forms/RemoveProductMessage",
                type: 'POST',
                data: $.toDictionary(dataToSend),
                success: function (result) {
                    $("#all-product-messages").html(result);
                }
            }); // End of $.ajax call
        });
})); 
```

我尝试了一些不同的东西，我目前正在尝试在这里找到的 jQuery 插件（[jquery.todictionary](http://erraticdev.blogspot.co.uk/2010/12/sending-complex-json-objects-to-aspnet.htmlBflBaseFormModel.BflFormByLibraryModels%5B0%5D.StatusInLevel=Active)）但没有运气。我不依赖于使用这个插件和任何其他方式来让这个东西工作，我愿意。

我已经尝试了很多关于 $('#main-form').serialize() 的方法，但都无济于事。任何帮助将不胜感激。

谢谢。

**编辑以添加详细信息**

好的，我在 Firebug 和 POST 中查看了另一种仅将 FormModel 作为参数的操作方法，如下所示：

AdministrationFormNumber 5809 BflBaseFormModel.BaseForm... 5809 BflBaseFormModel.BaseForm... 8/1/2010 12:00:00 AM BflBaseFormModel.BflFormB... S_5809DYN_082010 BflBaseFormModel.BflFormB... S_5809DYN_082010 BflBaseFormModel.BflBaseFormModel.BflFormB... ...代理 BflBaseFormModel.BflFormB...AS BflBaseFormModel.BflFormB...GE BflBaseFormModel.BflFormB...LM BflBaseFormModel.BflFormB...OC BflBaseFormModel.BflFormB...活动 BflBaseFormModel.BflOblig...
BflBaseFormModel.BondSubT.. .
BflBaseFormModel.BondType... 6 BflBaseFormModel.StateNam... 马萨诸塞州 BflBaseFormModel.Title 瞬态/巡回供应商 - MA CreatedDate 3/15/2012 2:39:36 PM FormNumber 05809 Product.Attachments false Product.AvailableOnline Product.AvailableOnline Product.BondAmtMax 0.00 Product.BondAmtMin 0.00 Product.BondAmtStd
Product.BondEffectiveDate
Product.BondExpirationDat...
Product.BondObligationDes...
Product.BondTermMonths
Product.BondType
Product.CancelDays
Product.CategoryId 0 Product.ClassCode
Product.ContactEmail
Product.ContactName Product.ContactPhone
Product。 ContactUrl
Product.CounterSignatures
Product.Description Product.EandOFlag false Product.EarliestTermEffec... 1/1/0001 12:00:00 AM Product.EndorsementFileNa...
Product.FormId 0 Product.FormTitle
Product.MinCreditScore 0 Product.ObligationType
Product.Obligee.ObligeeNa。 ..
Product.ProductLineId
Product.ProductVersionAva... 1/1/0001 12:00:00 AM Product.ProductVersionExp... 1/1/0001 12:00:00 AM Product.RateCode
Product.RateType � Product.RenewalFileName Product .RenewalMethod
Product.RiskType
Product.SpecialInstructio...
Product.State
QiFormModel.Attachment N QiFormModel.Description 马萨诸塞州联邦 - 临时/流动供应商债券 QiFormModel.DigitalSignat... False QiFormModel.EffDateWrappe... True QiFormModel.FileName LMS_15809_082010.xdp QiFormModel.FormNumber LMS_15809/8/2010 RowID b6c0c011-6153-4391 -be0d-7bb7c106372c StateOfEntity 添加

但是，当我查看 RemoveProductMessage 的 POST 时，我看到以下内容：

形成AdministrationFormNumber = 5809＆FormNumber = 05809＆行ID = b6c0c011-6153-4391-be0d-7bb7c106372c＆CreatedDate = 3％2F15％2F2012 + 2％3A39％3A36 + PM＆StateOfEntity =＆添加BflBaseFormModel.Title =瞬态％2FItinerant +卖方+ - + MA＆BflBaseFormModel.BaseFormID = 5809＆BflBaseFormModel.BaseFormRevisionDate = 8％2F1％2F2010 + 12％3A00％3A00 + AM＆BflBaseFormModel.BondTypeId = 6＆BflBaseFormModel.BondSubTypeId =＆BflBaseFormModel.StateName =马萨诸塞＆BflBaseFormModel.BflObligeeName =＆BflBaseFormModel.BflFormByLibraryModels％5B0％5D.PostedCompanyModels = AS＆BflBaseFormModel.BflFormByLibraryModels％5B0％5D.PostedCompanyModels = GE＆BflBaseFormModel。 BflFormByLibraryModels%5B0%5D.PostedCompanyModels=LM&BflBaseFormModel.BflFormByLibraryModels%5B0%5D.PostedCompanyModels=OC&BflBaseFormModel.BflFormByLibraryModels%5B0%5D。库名称=剂＆BflBaseFormModel.BflFormByLibraryModels％5B0％5D.FormFileType = DYN＆BflBaseFormModel.BflFormByLibraryModels％5B0％5D.FileName = S_5809DYN_082010＆BflBaseFormModel.BflFormByLibraryModels％5B0％5D.StatusInLevel =活动＆QiFormModel.FormNumber = LMS_15809％2F + 8％2F2010＆QiFormModel.Description +的联合体= +麻州+ - +瞬态％2FItinerant +卖方+债券＆QiFormModel.DigitalSignatureWrapped =假＆QiFormModel.EffDateWrapped =真＆QiFormModel.Attachment = N＆QiFormModel.FileName = LMS_15809_082010.xdp＆BflBaseFormModel.BflFormByLibraryModels％5B0％5D.FileName = S_5809DYN_082010＆Product.FormId = 0＆Product.FormTitle =＆Product.AvailableOnline =＆产品.EarliestTermEffectiveDate=1%2F1%2F0001+12%3A00%3A00+AM&Product.ProductVersionAvailabilityDate=1%2F1%2F0001+12%3A00%3A00+AM&Product。ProductVersionExpirationDate=1%2F1%2F0001+12%3A00%3A00+AM&Product.Attachments=false&Product.Description=&Product.RiskType=&Product.RateType=%EF%BF%BD&Product.EandOFlag=false&Product.BondEffectiveDate=&Product.BondExpirationDate=&Product.BondTermMonths =&Product.CancelDays=&Product.RenewalFileName=&Product.RenewalMethod=&Product.EndorsementFileName=&Product.BondAmtStd=&Product.BondAmtMin=0.00&Product.BondAmtMax=0.00&Product.MinCreditScore=0&Product.SpecialInstructions=&Product.State=&Product.ProductLineId=&Product.BondType =&Product.CategoryId=0&Product.AvailableOnline=&Product.ClassCode=&Product.RateCode=&Product.CounterSignatures=&Product.BondObligationDescription=&Product.ObligationType=&Product.ContactName=&Product.ContactPhone=&Product.ContactEmail=&Product.ContactUrl=&Product.ProductMessages%5B0%5D.MsgCode=%24+++&Product.ProductMessages%5B0%5D.MessageToAddress=1235&Product.ProductMessages%5B0%5D.StateOfEntity=已添加&Product.ProductMessages%5B0%5D .MessageRowID=cae73ecf-4bc9-45f2-bd5d-4040dc7362ef&Product.Obligee.ObligeeName=

似乎在键/值配对中未正确设置值。

模型对象：

```
public class FormModel : BaseModel
{
    private ProductModel productModel;

    public BflBaseFormModel BflBaseFormModel
    {
        get;
        set;
    }

    public QiFormModel QiFormModel
    {
        get;
        set;
    }

    [DisplayName("Form Number")]
    public string FormNumber
    {
        get;
        set;
    }

    public int AdministrationFormNumber
    {
        get;
        set;
    }

    public System.Guid RowID
    {
        get;
        set;
    }

    public System.DateTime CreatedDate
    {
        get;
        set;
    }

    [AutoMapper.IgnoreMap]
    public string Information
    {
        get;
        set;
    }

    [AutoMapper.IgnoreMap]
    public ProductModel Product
    {
        get
        {
            if (productModel == null)
            {
                productModel = new ProductModel();
            }

            return productModel;
        }

        set
        {
            productModel = value;
        }
    }

    public void SetFormModels()
    {
        // Map Companies to BflForms
        foreach (var bflFormByLibraryModels in BflBaseFormModel.BflFormByLibraryModels)
        {
            if (bflFormByLibraryModels.BflFormModels != null)
            {
                bflFormByLibraryModels.BflFormModels.Clear();
            }
            else
            {
                bflFormByLibraryModels.BflFormModels = new List<BflFormModel>();
            }

            foreach (var selectedCompany in bflFormByLibraryModels.PostedCompanyModels)
            {
                var bflFormModel = new BflFormModel();
                bflFormModel.CompanyID = selectedCompany;
                bflFormModel.BaseFormID = bflFormByLibraryModels.BaseFormID;
                bflFormModel.BaseFormRevisionDate = bflFormByLibraryModels.BaseFormRevisionDate;
                bflFormModel.LibraryID = bflFormByLibraryModels.LibraryID;
                bflFormByLibraryModels.BflFormModels.Add(bflFormModel);
            }
        }

        // Verify that QILatest has been set correctly
        if (QiFormModel != null && QiFormModel.AdministrationFormNumber == null)
        {
            QiFormModel = null;
        }
    }
} 
```

视图很大，由各种局部视图组成，所以我不会在这里发布。

**好的，我在这里走了一条不同的路，并通过另一种方式获取数据，所以一切都很好。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:46:30.553

用 stringify 方法传递两个参数，像这样

```
var dataToSend = { form: JSON.stringify(x), rowId: JSON.stringify(1) }; 
```

# java - 将一个行字符串拆分为多行

> ID：10949008
> 
> 赞同：-5
> 
> 时间：2012-06-08T12:39:05.613
> 
> 标签：java, string

我在单行中有一个字符串

```
String s = "<Item><productname>COOLER MASTER Hyper 212 EVO RR-212E-20PK-R2
</productname><Price>$33.99</Price><ItemID>1000</ItemID></Item>"; 
```

在上面的字符串中，在“>”之后应该开始新行并且所需的输出应该像

```
<Item>
 <productname>COOLER MASTER Hyper 212 EVO RR-212E-20PK-R2 </productname>
 <Price>$33.99</Price> 
 <ItemID>1000</ItemID>
</Item> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:40:50.967

试试这个：

```
String newString = s.replaceAll("><", ">\n <"); 
```

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T13:05:59.997

您可能最好在这里使用漂亮的打印机，因为这就是您真正想要做的事情。W3C、Xerces、JDOM 等等……都有输出能力，可以让你读入 xml，然后把它打印出来。

这是一个 JDOM 示例：

```
String input = "...";
Document document = new SAXBuilder().build(new ByteArrayInputStream(input.getBytes()));
ByteArrayOutputStream pretty = new ByteArrayOutputStream();
XMLOutputter outputter = new XMLOutputter(Format.getPrettyFormat());
outputter.output(document, pretty);
System.out.println(pretty.toString()); 
```

这个网站有一些很好的例子来说明如何以其他方式做到这一点：

[http://www.chipkillmar.net/2009/03/25/pretty-print-xml-from-a-dom/](http://www.chipkillmar.net/2009/03/25/pretty-print-xml-from-a-dom/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T13:07:45.483

另一种选择是解析 XML，并使用[Transformer类的](http://docs.oracle.com/javase/6/docs/api/javax/xml/transform/Transformer.html)[OutputKeys.INDENT](http://docs.oracle.com/javase/6/docs/api/javax/xml/transform/OutputKeys.html)选项输出格式化的 XML。

下面的例子

```
Source source = new StreamSource(new StringReader(s));

TransformerFactory transformerFactory = TransformerFactory.newInstance();
transformerFactory.setAttribute("indent-number", 4);

Transformer transformer = transformerFactory.newTransformer();
transformer.setOutputProperty(OutputKeys.INDENT, "yes");

StreamResult result = new StreamResult(new StringWriter());
transformer.transform(source, result);

String xmlOutput = result.getWriter().toString();
System.out.println(xmlOutput);

String xmlOutput = result.getWriter().toString();
System.out.println(xmlOutput); 
```

产生下面的输出

```
<?xml version="1.0" encoding="UTF-8"?>
<Item>
    <productname>COOLER MASTER Hyper 212 EVO RR-212E-20PK-R2</productname>
    <Price>$33.99</Price>
    <ItemID>1000</ItemID>
</Item> 
```

# ipad - 检测 ipad 默认键盘隐藏键被按下的事件

> ID：10949010
> 
> 赞同：0
> 
> 时间：2012-06-08T12:39:15.067
> 
> 标签：ipad, uikeyboard, ios5.1

是否有任何事件或方法可以检测到我按下了 ipad 的默认隐藏键盘按钮？

![在此处输入图像描述](../Images/058a90666e221a2546ba7d9f473943c4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:55:15.030

您可以使用这些通知：

`UIKeyboardWillHideNotification`- 在键盘被解雇之前立即发布。

`UIKeyboardDidHideNotification`- 解雇键盘后立即发布。

资料来源：[管理键盘](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html)

# java - 如何在没有 JScrollpane 的情况下制作 JTable

> ID：10949012
> 
> 赞同：4
> 
> 时间：2012-06-08T12:39:21.823
> 
> 标签：java, swing, jtable, jpanel, jscrollpane

我做了一些相当不错的搜索，但我不能很好地寻找什么。基本上我想要一个 JPanel 中的 JTable，并让 JPanel 根据 JTable 的大小重新调整自己的大小。我知道实现 JTable 的常用方法是使用 JScrollpane，但在这种情况下，它是不必要的，它使我的程序看起来......凌乱。

我找不到我需要的答案的原因是每次有人在 JPanel 中询问 JTable 时，都会有人给出将其放入滚动窗格的答案。我知道使用滚动窗格的优点，但在这种情况下它们没有优势。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T12:48:06.783

1.  是的，可以将[JTable 添加到 JPanel](https://stackoverflow.com/questions/6050708/fitting-a-jtable-inside-a-panel)，注意有几行填充真实屏幕分辨率

2.  您也必须单独添加到`TableHeader`容器中，否则不会添加或不可见，因为不需要单独添加或定义`JTable``JScrollPane``TableHeader`

3.  更好的办法是从禁用和`JScrollPane.setBorders(null)`禁用`VERTICAL`和`HORIZONTAL_SCROLLBAR`删除边界`NEVER`

4.  用于缩小更宽`JScrollPane`以适合`JTables Dimension`可以使用`table.setPreferredScrollableViewportSize(table.getPreferredSize());`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:51:33.967

尝试覆盖`getPreferredSize()`JPanel 的方法并返回 JTable 的值`getPreferredSize()`：

```
final JTable table = new JTable();

JPanel panel = new JPanel() {
    public Dimension getPreferredSize() {
        return table.getPreferredSize();
    }
} 
```

# javascript - firefox javascript return false in href 重定向浏览器并显示 false

> ID：10949016
> 
> 赞同：7
> 
> 时间：2012-06-08T12:39:39.017
> 
> 标签：javascript, firefox

以下是我在 chrome 中运行良好的代码。

```
<body>

<a href="javascript: sam.save();">hehe</a>

<script>

var sam = {
    save : function()
    {
        alert("here")
            return false;       
    }
}
</script> 
```

当在 Firefox 中运行时，页面重定向并且 false 显示在屏幕上，地址栏内容如图所示

![在此处输入图像描述](../Images/b084702b870de1bb3569300ac124242c.png)

火狐版本是 9.0.1

请提出建议和规避...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-06-26T22:51:13.250

由于某种原因 return false 在 href="javascript:" 内的 FF 中不起作用，但 void(0) 可以。

```
<a href="javascript: sam.save();void(0);">hehe</a> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-08T14:54:56.513

您引用的代码不可能产生您观察到的行为。`sam.save()`观察到的行为只有在返回时才会发生`false`，而引用的代码会返回`undefined`。您的实际完整代码是什么样的？

**编辑：**有用的答案在评论中。我把它放在这里是为了更容易找到。

> 哦，我错过了警报后的“return false”。在这种情况下，您看到的行为是正确的：如果 javascript: 执行返回的值不是 undefined ，则该值被视为 HTML 字符串并呈现。至少在大多数浏览器中。——鲍里斯·兹巴尔斯基 6 月 11 日 15:25

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-08T12:40:52.720

```
<a href="#" onclick="sam.save();">hehe</a> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-21T02:07:37.793

更兼容的语法应该是

```
<a href="javascript:void(0)" onclick="sam.save()">hehe</a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-07T07:54:17.147

尝试一下

```
`<a href="javascript: void(sam.save())">hehe</a>` 
```

希望这可以帮助...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-19T11:35:28.307

示例它是如何工作的：

Firefox：第二个和第三个是呈现白色页面

Chromium：第一种情况是渲染白页

```
<body>

<a href="javascript: something.with_early_return();">with_early_return</a>
<a href="javascript: something.with_false();">with_false</a>
<a href="javascript: something.with_string();">with_string</a>

<script>

var something = {
    with_early_return: function() {
        alert("with_early_return");
        return;
    },

    with_false: function () {
        alert('with_false');
        return false;
    },

    with_string: function () {
        alert('with_string');
        return 'It renders this as text';
    }
}
</script> 
```

# sccm - 无法安装 SCCM 应用程序管理扩展

> ID：10949022
> 
> 赞同：1
> 
> 时间：2012-06-08T12:39:54.927
> 
> 标签：sccm

在通过 MSDN 上的 SCCM 2012 SDK 文档工作后，我目前陷入尝试安装应用程序管理扩展的困境：

[http://msdn.microsoft.com/en-us/library/hh949507](http://msdn.microsoft.com/en-us/library/hh949507)

文档说明我应该调用 DeploymentTypeExtender.Extend：

```
using DCM = Microsoft.ConfigurationManagement.AdminConsole.DesiredConfigurationManagement; 

[...]

    ConnectionManagerBase connectionManager = new WqlConnectionManager();
    connectionManager.Connect("SiteServerName");

    DeploymentTypeExtender.Extend(@"C:\RdpTechnology.cmdtx", new  DCM.ConsoleDcmConnection(connectionManager, null), @"\\SiteServerName\root\sms\site_ABC"); 
```

但是，当我拨打电话时，我得到的只是一个例外：

```
Unhandled Exception: Microsoft.ConfigurationManagement.ManagementProvider.WqlQueryEngine.WqlQueryException: The SMS Provider reported an error. ---> System.Management.ManagementException: Generic failure
   at System.Management.ManagementException.ThrowWithExtendedInfo(ManagementStatus errorCode)
   at System.Management.ManagementObject.Put(PutOptions options)
   at System.Management.ManagementObject.Put()
   at Microsoft.ConfigurationManagement.ManagementProvider.WqlQueryEngine.WqlResultObject.Put(ReportProgress progressReport)
   --- End of inner exception stack trace ---
   at Microsoft.ConfigurationManagement.ManagementProvider.WqlQueryEngine.WqlResultObject.Put(ReportProgress progressReport)
   at Microsoft.ConfigurationManagement.ManagementProvider.WqlQueryEngine.WqlResultObject.Put()
   at Microsoft.ConfigurationManagement.AdminConsole.DesiredConfigurationManagement.ConsoleDcmConnection.Microsoft.ConfigurationManagement.DesiredConfigurationManagement.IDcmStoreConnection.StoreNewItem(ConfigurationItem item)
   at Microsoft.ConfigurationManagement.ApplicationManagement.DeploymentTypeExtender.CreateTechnologyBasedConfigurationItem(ZipPackagePart zipPackagePart, IDcmStoreConnection connection)
   at Microsoft.ConfigurationManagement.ApplicationManagement.DeploymentTypeExtender.PostDeploymentTypeExtension(String deploymentTypeExtensionFilePath, IDcmStoreConnection connection, String wmiLocation, Boolean comprehensive, Boolean revision)
   at Microsoft.ConfigurationManagement.ApplicationManagement.DeploymentTypeExtender.Extend(String deploymentTypeExtensionFilePath, IDcmStoreConnection connection, String wmiLocation)
   at RdpTechnology.Build.DeploymentTypeExtenderUtil.Extend(String deploymentTypeExtensionFilePath) in C:\Users\goakley\Documents\SCCM Deployment Type\AppMan\Build\DeploymentTypeExtenderUtil.cs:line 38
   at RdpTechnology.Build.Program.Main(String[] args) in C:\Users\goakley\Documents\SCCM Deployment Type\AppMan\Build\Program.cs:line 22 
```

更多信息显示在 DebugView 中：

```
[1520] SmsAdminUISnapIn Error: 1 : 
[1520] System.Management.ManagementException\r\nGeneric failure \r\n   at System.Management.ManagementException.ThrowWithExtendedInfo(ManagementStatus errorCode) 
[1520]    at System.Management.ManagementObject.Put(PutOptions options) 
[1520]    at System.Management.ManagementObject.Put() 
[1520]    at Microsoft.ConfigurationManagement.ManagementProvider.WqlQueryEngine.WqlResultObject.Put(ReportProgress progressReport)\r\nManagementException details:
[1520] instance of SMS_ExtendedStatus
[1520] {
[1520]  Description = "The digest is not valid";
[1520]  ErrorCode = 1078462235;
[1520]  File = "e:\\nts_sccm_release\\sms\\siteserver\\sdk_provider\\smsprov\\sspconfigurationitem.cpp";
[1520]  Line = 2142;
[1520]  Operation = "PutInstance";
[1520]  ParameterInfo = "";
[1520]  ProviderName = "ExtnProv";
[1520]  StatusCode = 2147749889;
[1520] };
[1520] \r\n 
```

这表明我在尝试安装的应用程序管理扩展中捆绑的 XML 文件之一已损坏 - 但它都是直接从 MSDN 复制和粘贴的。

# css - CSS: "float:bottom" 如果垂直空间可用。“浮动：左”否则

> ID：10949026
> 
> 赞同：5
> 
> 时间：2012-06-08T12:40:05.217
> 
> 标签：css, html, css-float

如果浏览器窗口中有足够的垂直空间，我有两个非常窄（宽度：400 像素）的 div 应该垂直堆叠。如果浏览器高度太小并且右侧有足够的空间，“底部 div”应该浮动到顶部 div 的右侧。

从某种意义上说，我要求与“float:left”相反。float:left 如果浏览器窗口中有足够的水平空间，则水平对齐 div，如果只有它们下方的可用空间，则仅将 div 浮动到其他 div 下方。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T14:33:11.483

根据您需要的浏览器支持级别，一个简单的媒体查询可能会解决您的问题：

```
<!doctype html>
<html>
    <head>
        <style>
            /* SET THE DEFAULT RULES FOR SHORT SCREENS */
            .bottom-floaty {
                height:200px;
                width: 400px;
                margin: 15px; padding: 10px;
                outline: 1px dashed #aaf;
                }
            /* HERE FOLLOWS THE MAGICAL MEDIA QUERY FOR TALL SCREENS */
            @media all and (max-height: 500px) {
                .bottom-floaty { float:left; }
            }
        </style>
    </head>
    <body>
        <div class="bottom-floaty">
            I'm a sometimes floaty div
        </div>
        <div class="bottom-floaty">
            I'm also a sometimes floaty div
        </div>
    </body>
</html> 
```

这是我看到的效果： ![在高高的窗户里](../Images/b35ad221a452a2a6623a167f1d08b9e1.png) ![在一个短暂的窗口](../Images/f7900540623471aabd16b4e507cf71c7.png)

CSS3 媒体查询允许您根据视口高度设置任何您喜欢的 CSS 规则。[w3c 有很多关于媒体查询的信息。](http://www.w3.org/TR/css3-mediaqueries/#height)

关于视口高度的相关片段：

> “高度”媒体特征描述了输出设备的目标显示区域的高度。对于连续媒体，这是视口的高度，包括渲染滚动条的大小（如果有）。对于分页媒体，这是页面框的高度。
> 
> A 指定的不能为负数。

有时我发现 Mozilla 开发者网络更容易访问，但在这种情况下，它们提供[的信息基本相同](https://developer.mozilla.org/En/CSS/Media_queries#height)。

您是否需要支持无法呈现媒体查询的旧浏览器？[编写一个可以产生相同效果的 javascript polyfill](http://remysharp.com/2010/10/08/what-is-a-polyfill/)应该相当简单，尤其是使用像[jQuery](http://jquery.com/)这样的库。

**编辑**

我修改了我的代码示例以更接近您的问题。你评论说：

> Jashwant：总是首选将 div 放在另一个下方。所以只有在右边有空间但底部没有空间的情况下，div2应该到div1的右边。– 乔纳斯

而且我还将宽度设置为 400px，如您的示例所示。

现在，如果屏幕太短而无法垂直*，并且*右侧有足够的空间容纳两者，它只会向左浮动。否则它总是垂直的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T12:55:58.750

如果您不想使用`float:left;`属性，则您的每个 DIV 都会下降到新行。所以使用 float left 属性。当你想要换行时，只需使用`clear:both;`

# php - 如何获取两个字符 [string] 之间的字符串？PHP

> ID：10949029
> 
> 赞同：4
> 
> 时间：2012-06-08T12:40:14.540
> 
> 标签：php, string

```
$string1 = "This is test [example]";
$string2 = "This is test [example][2]";
$string3 = "This [is] test [example][3]"; 
```

我怎样才能得到以下结果？

```
For $string1 -> example
For $string2 -> example*2
For $string3 -> is*example*3 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T12:41:41.560

```
preg_match_all('/\[([^\]]+)\]/', $str, $matches);

php > preg_match_all('/\[([^\]]+)\]/', 'This [is] test [example][3]', $matches);
php > print_r($matches);
Array
(
    [0] => Array
        (
            [0] => [is]
            [1] => [example]
            [2] => [3]
        )

    [1] => Array
        (
            [0] => is
            [1] => example
            [2] => 3
        )

) 
```

这是正则表达式的解释：

```
\[ # literal [
( # group start
    [^\]]+ # one or more non-] characters
) # group end
\] # literal ] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-03T05:33:27.560

对于那些对正则表达式持谨慎态度的人，这里有一个没有疯狂正则表达式语法的解决方案。:-) 它曾经真的让我很恼火，像这样的东西不是 PHP 的字符串函数原生的，所以我构建了一个......

```
// Grabs the text between two identifying substrings in a string. If $Echo, it will output verbose feedback.
function BetweenString($InputString, $StartStr, $EndStr=0, $StartLoc=0, $Echo=0) {
    if (!is_string($InputString)) { if ($Echo) { echo "<p>html_tools.php BetweenString() FAILED. \$InputString is not a string.</p>\n"; } return; }
    if (($StartLoc = strpos($InputString, $StartStr, $StartLoc)) === false) { if ($Echo) { echo "<p>html_tools.php BetweenString() FAILED. Could not find \$StartStr '{$StartStr}' within \$InputString |{$InputString}| starting from \$StartLoc ({$StartLoc}).</p>\n"; } return; }
    $StartLoc += strlen($StartStr);
    if (!$EndStr) { $EndStr = $StartStr; }
    if (!$EndLoc = strpos($InputString, $EndStr, $StartLoc)) { if ($Echo) { echo "<p>html_tools.php BetweenString() FAILED. Could not find \$EndStr '{$EndStr}' within \$InputString |{$InputString}| starting from \$StartLoc ({$StartLoc}).</p>\n"; } return; }
    $BetweenString = substr($InputString, $StartLoc, ($EndLoc-$StartLoc));
    if ($Echo) { echo "<p>html_tools.php BetweenString() Returning |'{$BetweenString}'| as found between \$StartLoc ({$StartLoc}) and \$EndLoc ({$EndLoc}).</p>\n"; }
    return $BetweenString; 
} 
```

当然，这可以压缩很多。为了节省其他人清理它的工作：

```
// Grabs the text between two identifying substrings in a string.
function BetweenStr($InputString, $StartStr, $EndStr=0, $StartLoc=0) {
    if (($StartLoc = strpos($InputString, $StartStr, $StartLoc)) === false) { return; }
    $StartLoc += strlen($StartStr);
    if (!$EndStr) { $EndStr = $StartStr; }
    if (!$EndLoc = strpos($InputString, $EndStr, $StartLoc)) { return; }
    return substr($InputString, $StartLoc, ($EndLoc-$StartLoc));
} 
```

# installation - WiX 自定义操作 - 传递文件列表

> ID：10949033
> 
> 赞同：0
> 
> 时间：2012-06-08T12:40:27.363
> 
> 标签：installation, wix, wix3.6

我正在为替换其他应用程序的某些文件的插件准备安装包。我需要备份这些文件，所以我准备了*CustomAction*来做这件事。

如何将在安装期间复制的所有文件的自定义操作位置作为参数传递？我需要手动制作该列表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:16:05.810

与其创建自定义操作，不如使用[WiX CopyFile](http://wix.sourceforge.net/manual-wix3/wix_xsd_copyfile.htm)元素来备份这些文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T18:11:47.060

您可以通过在安装程序中设置属性将参数传递给自定义操作。然后在您的自定义操作中访问这些属性，如下所示（C# 示例）：

```
[CustomAction]
public static ActionResult DoWork(Session session)
{
    session.Log("Begin DoWork");
    string propertyValue = session["PROPERTYNAME"];
    //...
} 
```

# ruby-on-rails - 如何检测来自 rails 服务器的 send_data 何时更新视图？

> ID：10949047
> 
> 赞同：1
> 
> 时间：2012-06-08T12:41:11.510
> 
> 标签：ruby-on-rails, ruby-on-rails-3, proxy

我正在尝试使用 ruby​​ on rails 构建一个简单的代理服务器。这就是我想做的事情： 1\. 从浏览器请求中接收链接 2\. 从该链接中获取内容 3\. 通过 send_data 将结果返回给用户 4\. send_data 在浏览器中触发一个事件，浏览器使用收到的内容。

直到#3 的部分都很简单，但我似乎找不到方法来做#4：让浏览器检测到来自我的服务器的 send_data 事件。有人知道怎么做吗？或者这甚至可能吗？

# ios - 如何使用 Phonegap 更改自动生成窗口的位置？

> ID：10949049
> 
> 赞同：0
> 
> 时间：2012-06-08T12:41:19.703
> 
> 标签：ios, xcode, cordova

我将 Phonegap (Cordova for iOS) 与 XCode 一起使用，并且我正在使用 Camera API 提供一个窗口，使用户能够在图像库中导航并选择一个图像，然后该图像将显示在情绪板上。

现在我有了这个启动窗口的按钮，但它位于顶部的中心，左侧有“气泡箭头”。我想改变这个窗口的位置，如果可能的话移动这个箭头 - 这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:15:39.577

从 1.8.0 版本开始就可以了。我们看到人们收到了 Apple 的拒绝，因为箭头指向了错误的位置，所以 Becky 解决了这个问题。您可以在上面查看文档[CameraPopoverOptions](http://docs.phonegap.com/en/1.8.0/cordova_camera_camera.md.html#CameraPopoverOptions)。

# asp.net - 谷歌分析计算两次来自另一个网站的 iframe 内容

> ID：10949055
> 
> 赞同：0
> 
> 时间：2012-06-08T12:41:40.407
> 
> 标签：asp.net, iframe, google-analytics

我们有两个网站，在网站一 (1) 上，我们使用 Iframe 显示来自网站二 (2) 的内容。一切正常，但问题是谷歌分析显示两个点击，因为内容来自第二个网站。我如何在我的网站上显示我的内容（1），谷歌分析只计算一次。除了我使用 iframe 在网站 1 上显示内容外，我无权访问 website1 的内容。是否有可能在没有 iframe 的情况下显示内容而无法直接访问其他网站的内容。

# facebook - Facebook 客户端身份验证 - 来自 OAuth 对话框的 http 或 https 重定向

> ID：10949061
> 
> 赞同：0
> 
> 时间：2012-06-08T12:41:56.043
> 
> 标签：facebook, authentication, facebook-javascript-sdk, facebook-oauth

我已经阅读了大量 FB 文档，但仍然无法正常工作。

我有一个在 IFrame 中运行的 FB 应用程序。我正在使用 JS SDK 对用户进行身份验证。因此，如果用户之前没有使用过我的应用程序，我需要提示他们进行授权。

我尝试使用`FB.Login()`，但这有两个大问题：

1.  它打开一个丑陋的弹出窗口
2.  我希望登录屏幕自动出现（即不需要用户再次点击）

因此，我尝试重定向到客户端上的 OAuth 对话框。为此，必须在顶部窗口中打开 OAuth url，这意味着我需要将 redirect_uri 作为 apps.facebook.com/myapp 传递。

问题是这只有在我使用 https 作为协议时才有效。但是，如果用户已经通过 http 使用 facebook，我不想将它们切换到 https。

这是我的代码：

```
window.fbAsyncInit = function () {
    FB.init({
        appId: 1234567890,
        channelUrl: "//mydomain.com/channel.html",
        status: true,
        cookie: true,
        xfbml: true
    });

    FB.Event.subscribe('auth.statusChange', function (response) {
        console.log(response);
        if (response.status === "connected") {
            // User has authorized app
        } else if (response.status === "not_authorized") {
            var url = "//www.facebook.com/dialog/oauth?";
            var queryParams = ["client_id=1234567890",
                  "redirect_uri=//apps.facebook.com/myapp",  // NOT WORKING
                  "response_type=token"];
            var queryString = queryParams.join("&");
            url += queryString;
            window.top.location = url;
        }
    });
}; 
```

有没有办法使用 OAuth 对话框使用客户端流程进行身份验证？或者我会以完全错误的方式解决这个问题？

（PS我不想使用服务器端流程，因为根据Facebook C# SDK的v6，推荐的方法是在客户端授权并将access_token从客户端传递给服务器）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:26:13.997

我建议你不要听“Facebook C# SDK v6”。

您所描述的要执行的操作拼写“服务器端身份验证流程”。
您应该做的是实现服务器端流程，然后当用户登陆您的应用程序时，在服务器身份验证后加载 fb js sdk 并获取客户端令牌，如下所示：

```
FB.getLoginStatus(function(response) {
    if (response.status === "connected") {
        // response.authResponse has everything you need like signed request, access token, etc
        // you can also make FB.api request or use FB.ui which will use the client side token
    }
    else {
        // user is either logged out of facebook or hasn't authenticated your app
        // should not happen if the user went through the server side authentication
    }
}); 
```

此代码不需要用户与页面交互，因为它不会弹出新窗口。
请注意，您的应用程序的客户端部分将使用与您应该在服务器上拥有的令牌不同的令牌，并且这两个令牌将具有不同的到期时间（服务器寿命长，而客户端寿命短）。
在我看来，这种方法更好更安全，因为它不需要您将身份验证数据从客户端发送到服务器或以其他方式发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T14:44:25.793

> `"redirect_uri=//apps.facebook.com/myapp", // NOT WORKING`

——这是你的主要问题吗？如果是这样，您可以轻松地读取在使用 JS 的 iframe 内请求应用程序 URL 时使用的协议，它位于 location.protocol 属性中。是的，您的应用程序使用的协议与用户用来浏览 Facebook 网站的协议相匹配；-)

# php - 如果 $_POST 是空函数

> ID：10949066
> 
> 赞同：6
> 
> 时间：2012-06-08T12:42:19.790
> 
> 标签：php, forms, function

我正在创建一个使用 $_POST php 函数的表单。

这是我的表格的样子。

**表单.php**

```
<h1>Songs Movies Form</h1>
<hr />

<form action="songs-movies.php" method="post">

Song Name:
Enter Song Name: <input type="text" name="SongName" size="25" />

Enter Movie Name: <input type="text" name="MovieName" size="25" />

<input type="submit" value="Submit" name="submit" />

</form>

<br />
<a href="/forms/">Back to Forms</a>
<hr /> 
```

现在我想显示**SongName**和**MovieName**的结果，所以我使用**了 echo $_POST["SongName"];** 并**回显 $_POST["MovieName"];** 完美地产生了结果。

现在我想将这些值**SongName**和**MovieName**放在结果/输出页面中的 text/line/para 之间，如果**SongName**或**MovieName**的值为空，那么结果/输出不应显示我所在的特定文本/行/para已经把这些功能。

**例如**

* * *

**ABC Song**是**XYZ 电影**的流行歌曲。**XYZ电影**的**ABC歌曲**由PQR导演执导。

 *** * *

现在你可以看到上面的 Para 中有两句话。**只有当SongName**和**MovieName**的字段值为空时，我才想将函数用于第一句

*   它应该显示第一句**SongName**和**MovieName**的字段值是否为空，即*ABC Song 是 XYZ 电影的流行歌曲*。**如果SongName**和**MovieName**的字段值为空，那么它可以在它们之间留下空格，我知道可以通过这个函数**echo $_POST["SongName"];** .

但

*   **如果SongName**和**MovieName**的字段值为空，即*XYZ 电影的 ABC 歌曲由 PQR 导演执导，*则不应显示第一句行。

 ** * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-08T12:46:45.433

我认为你正在寻找的是这样的：

```
if(!empty($_POST['foo'])) {
   echo "a sentence".$_POST['foo']." with something in the middle.";
} 
```

这将检查该值是否为空，但空意味着 PHP 中的很多内容，因此您可能需要更具体。例如，您可能想检查简单是否设置：

```
if(isset($_POST['foo'])) {
   echo "a sentence".$_POST['foo']." with something in the middle.";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T12:48:45.480

你真的让我对最后 2-3 句话感到困惑。
你想做的事情可以通过使用 if、elseif 和 else 控制结构来完成。

```
if ($_POST['MovieName'] AND $_POST['SongName']) 
{
    //code
}  
elseif ($_POST['MovieName'])
{
    //code
}  
elseif ($_POST['SongName']) 
{
    //code
}  
else 
{
    //code
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:49:51.567

您可以通过三种方式做到这一点。

1.  ```
    if(isset($_POST['value1']))
    {
        //...
    } 
    ```

2.  ```
    if(!empty($_POST['value1'])) 
    {
        //...
    } 
    ```

3.  和简单的方法

    ```
    if($_POST('value1')=="")
    {
        ....
    } 
    ```

当我对表单提交感到困惑时，我有时会使用第三种方式，但当然第一种和第二种更优雅！***

# asp.net-mvc-3 - Simple Authorization in MVC3 with Forms Authentication

> ID：10949070
> 
> 赞同：4
> 
> 时间：2012-06-08T12:42:29.003
> 
> 标签：asp.net-mvc-3, forms-authentication, authorization

I'm trying to do what should be a simple thing in MVC3.

I've got an application that uses forms authentication to authenticate users with a 3rd party SSO. The SSO, on successful login, posts back to a specific controller action on my application. I then call `FormsAuthentication.SetAuthCookie(user,false);`.

I'm trying to implement some level of authorization. Simply, a user can exist in a number of different roles, e.g. `Admin` and `Developer`. Some controller actions should only be available to certain roles. Details of which roles a user belongs to is obtained by making a call to another external API, which returns a simple JSON response indicating.

In theory, this should be as simple as doing something like this after I set the FormsAuthentication cookie:

```
string[] rolelist = GetRoleListForUserFromAPI(User.Identity.Name);
HttpContext.User = new GenericPrincipal(User.Identity, rolelist); 
```

However, I can't call this directly after calling `SetAuthCookie`, because `HttpContext.User` isn't anything meaningful at this point.

I could try setting this on every request, but ever request to my app would mean a roundtrip API call.

The most promising approach I've seen so far is to create a custom Authorization attribute and override `OnAuthorization` to do something like this:

```
public override void OnAuthorization(AuthorizationContext filterContext)
{
    if (<some way of checking if roles have already been set for this user, or role cache has timed out>)
    {
        string[] rolelist = GetRoleListForUserFromAPI(filterContext.HttpContext.User.Identity.Name);
        filterContext.HttpContext.User = new GenericPrincipal(filterContext.HttpContext.User.Identity,rolelist);
    }
} 
```

I could then use `[MyCustomAuthorization(Roles="Admin")]` in front of controller actions to make the magic happen.

However, I've no idea how to detect whether or not the current `HttpContext.User` object has had its roles set, or whether it was set over a certain time ago and another API trip is needed.

What's the best approach for this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:48:25.053

You should override `PostAuthenticateRequest`

```
protected void Application_OnPostAuthenticateRequest(object sender, EventArgs e) 
{
    if (HttpContext.Current.User.Identity.IsAuthenticated)
    {
        string[] rolelist = GetRoleListForUserFromAPI(User.Identity.Name);
        HttpContext.User = new GenericPrincipal(User.Identity, rolelist);
    }
} 
```

It's invoked after forms authentication is finished with it's processing.

[http://msdn.microsoft.com/en-us/library/ff647070.aspx](http://msdn.microsoft.com/en-us/library/ff647070.aspx)

**Update**

I had the wrong method signature (just checked in one of my own applications).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T12:56:28.730

Another way would be to store the roles in the UserData property of the FormsAuthentcationTicket. This could be done with comma delimited string.

[http://msdn.microsoft.com/en-us/library/system.web.security.formsauthenticationticket.formsauthenticationticket](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthenticationticket.formsauthenticationticket)

Then on AuthenticateRequest method, you could pull the ticket back, grab the roles data and assign it to the current user using a generic principal.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T15:11:55.377

My first thought is that you should investigate implementing a custom role provider. This might be overkill but seems to fit in with the role-based plumbing.

More info from MSDN [here](http://msdn.microsoft.com/en-us/library/8fw7xh74.aspx).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T18:38:34.053

Much to the aghast of some, the session object ISNT a bad idea here. If you use temp data, you already take a hit for the session.

Storing this data in the cookie, well - Forms auth tokens have already been exploited in the POET vulnerability from a year and a half ago, so in that case someone could've simply formed their own cookie with the "admin" string in it using that vulnerability.

You can do this in post authenticate as @jgauffin mentioned. If the session state isn't available there you can use it then in Application_PreRequestHandlerExecute and check it there.

If you want to check if session state is available in either see my code at: [How can I handle forms authentication timeout exceptions in ASP.NET?](https://stackoverflow.com/questions/7586469/how-can-i-handle-forms-authentication-timeout-exceptions-in-asp-net)

Also whenever using forms auth and sessions, you always want to make sure the timeouts are in sync with each other (again the above code)

# c++ - 各种数据类型的变量如何存储在 C++(native) 二进制文件中？

> ID：10949073
> 
> 赞同：0
> 
> 时间：2012-06-08T12:42:37.613
> 
> 标签：c++

一周前，我开始了我的 C++ 冒险之旅。我已经阅读了很多关于 C++ 的内容。我正在尝试以下内容：

```
 char * String1 = "abcdefgh"; 
```

然后，我尝试通过以下方式修改其值：

```
 String1[2] = 'f'; 
```

这导致了一个未处理的异常。但以下结果会导致正确执行：

```
 char String2[9]="abcdefgh";

 String2[7]='s'; 
```

我尝试使用 DUMPBIN 提取有关使用上述代码生成的二进制文件的信息。DUMPBIN 是一个 Visual Studio 工具。我使用 /ALL 选项来提取二进制文件中包含的所有信息。

我可以在 RAWDATA 部分看到两个**“abcdefgh”实例。**我明白为什么。

我的问题如下：

1) 虽然 String1 和 String2 本质上都是指向同一字符序列的两个不同实例的指针，但为什么 String1 操作不合法？

2）我知道编译器会生成一个符号表来映射变量名及其值。是否有任何工具可以在 Windows 操作系统中可视化符号表？

3) 如果我有一个整数数组而不是字符序列，可以在 RAWDATA 中找到它吗？

我还可以在 RAWDATA 中看到以下内容：

```
Unknown Runtime Check Error.........
 Stack memory around _alloca was corrupted.......
  ....A local variable was used before it was initialized.........
 ....Stack memory was corrupted..
  ........A cast to a smaller data type has caused a loss of data.
  If this was intentional, you should mask the source of the cast with the appropriate bitmask. 
```

这些东西如何进入二进制可执行文件？在二进制文件中包含这些消息的目的是什么（显然不可读）？

编辑：我的问题 1) 有一个词实例，用于表示以下内容：

字符序列“abcdefgh”源自一组非大写英文字母，即{a,b,...,y,z}。这个序列被实例化了两次，并存储在两个内存位置，比如 A 和 B。String1 指向 A（假设），String2 指向 B。问题中没有概念上的混淆。

我想理解的是内存位置A和B的属性差异，即为什么其中一个是不可变的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T12:52:27.773

注意：以下所有代码均指函数内的范围。

下面的代码用数据*初始化*一个可写缓冲区`string2`。编译器生成初始化代码以从只读编译器生成的字符串复制到此缓冲区。

```
char string2[] = "abcdefgh"; 
```

下面的代码*将一个指向*只读的、编译器生成的字符串的指针存储在`string1`. 该字符串的内容位于可执行映像的只读部分中。这就是为什么修改它会失败。

```
char * string1 = "abcdefgh"; 
```

`string1`您可以通过指向可写缓冲区来使其工作。这可以通过复制字符串来实现：

```
char * string1 = strdup("abcdefgh");
....
free(string1); // don't forget to free the buffer! 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T12:52:28.223

`char * String1 = "abcdefgh";`
在 C（和 C++）中是 const，允许编译器存储固定的 const 数据，但它喜欢，它可能有一个单独的 DATA 段，它可能有完全 const 程序存储（在哈佛架构中）

`char String2[9]="abcdefgh";` 分配一个 9 元素的字符数组，并恰好用一些字符串对其进行初始化。你可以用数组做你想做的事。任何其他类型的数组都将以相同的方式存储。

某些运行时错误的错误消息存储在程序数据段中（与原始 char* 字符串相同）。其中一些像“这个程序需要 Windows”显然必须在那里而不是在操作系统中，因为 DOS 不会知道程序需要更高版本的 Windows。但我不确定为什么这些特定的运行时错误不是由操作系统创建的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T13:28:50.640

您不能修改字符串文字。字符串文字的类型是 `char const[]`，并且任何修改它的尝试都是未定义的行为。并给出如下声明：

```
char* s1 = "a litteral"; 
```

，编译器确实应该生成警告。此处不推荐使用隐式转换为非常量，并且仅将其引入语言中以避免破坏现有代码（从 C 没有的时代开始`const`）。

在这种情况下：

```
char s2[] = "init"; 
```

，实际上并没有字符串文字。“字符串文字”实际上是一种初始化规范，与字符串文字不同，它不会出现在内存中的任何位置；编译器使用它来确定`s2` 应该如何初始化，并且完全等同于：

```
char s2[] = { 'i', 'n', 'i', 't', '\0' }; 
```

（写起来方便一点。）

- 一个简短的历史旁白：早期的 C 没有`const`. 字符串文字的类型是`char[]`，修改它*是*合法的。这导致了一些非常可怕的代码：

```
char* f() { return "abcd"; }

/* ... */
f()[1] = 'x'; 
```

下次你打电话`f`时，它又回来了`"axcd"`。没有出现在源代码列表中的值的文字不是 *可读*代码的方式，C 标准委员会决定这是一个最好不要保留的特性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T13:06:54.780

```
char string[] = "foo" 
```

这会分配一个 char 数组，并用值 {'f', 'o', 'o', '\0'} 对其进行初始化。您可以为字符获得“自己的”存储空间，并且可以修改数组。

```
char strptr* = "foo" 
```

这会分配一个指针，并将该指针的值设置为包含 {'f', 'o', 'o', '\0'} 的 char 数组的地址。指针是你想要的，但 char 数组不是。实际上，数组的类型不是`char[]`, but `const char[]`, 并且`strptr`确实应该声明为`const char*`这样您就不会错误地尝试修改 const 数组。

在第一种情况下，`"foo"`是一个数组初始值设定项。第二个`"foo"`是字符串文字。

有关每种情况的内存确切位置的更具体细节往往未由标准指定。但是，一般来说，在堆栈上`char string[] = "foo"`分配一个`char`数组，在堆栈上`char strptr* = "foo"`分配一个`char`指针，并（静态地）`const char`在可执行文件的数据部分分配一个数组。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-08T13:10:14.607

1) 正如 c++ 标准 (2003) ( [http://www.iso.org/iso/catalogue_detail.htm?csnumber=38110](http://www.iso.org/iso/catalogue_detail.htm?csnumber=38110) )

> 1 字符串文字是由
> 双引号括起来的字符序列，可以选择以字母 L 开头，如 "..." 或 L"..."。不以 L 开头的字符串文字是普通字符串文字，也称为窄字符串文字。一个普通的字符串字面量具有“n const
> char 数组”类型和静态存储持续时间 ( *basic.stc* )，其中 n 是字符串的大小，定义如下，并使用给定的字符进行初始化。以 L 开头的字符串文字，例如 L"asdf"，是一个宽字符串文字。宽字符串文字的类型为“array of n const wchar_t”并具有静态存储持续时间，其中 n 是字符串的大小，定义如下，
> 
> 2 是否所有字符串文字都是不同的（即存储在不重叠的对象中）是实现定义的。尝试修改字符串文字的效果是未定义的。

如上所述，这不是非法的，是未定义的行为，因此，使用 VS 在 Windows 上会出现异常，使用 g++ 在 linux 中会出现分段错误（但基本上它们看起来很相似）

2）您可以使用反汇编程序并检查 exe 文件的数据部分（查看此 wiki 以获取有关几个 exe 文件结构[x86 反汇编/Windows 可执行文件](http://en.wikibooks.org/wiki/X86_Disassembly/Windows_Executable_Files)的更多信息）

3) 是的，它应该在 exe 文件的 .data 部分

# iframe - Amazon S3 HTTP 标头允许子域？

> ID：10949077
> 
> 赞同：0
> 
> 时间：2012-06-08T12:42:46.567
> 
> 标签：iframe, amazon-s3, http-headers, cross-domain

我将我的时事通讯 .html 文件存储在 S3 中，并创建了一个函数来提取时事通讯并将它们放入 iFrame 中。

我的问题是我无法为 iFrame 设置自动高度，因为我无法阅读内容。

如果文件在同一个域中，我有一个可以工作的插件。我可以设置一些标题以允许从我的子域访问吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:51:21.573

S3 有一个称为[“虚拟主机”](http://docs.amazonwebservices.com/AmazonS3/latest/dev/VirtualHosting.html#VirtualHostingCustomURLs?r=8110)的功能。

> 一般来说，虚拟主机是从单个 Web 服务器为多个网站提供服务的做法。区分站点的一种方法是使用请求的明显主机名，而不仅仅是 URI 的路径名部分。一个普通的 Amazon S3 REST 请求使用 Request-URI 路径的第一个斜杠分隔组件指定一个存储桶。或者，使用 Amazon S3 虚拟主机，您可以使用 HTTP 主机标头在 REST API 调用中寻址存储桶。在实践中，Amazon S3 将 Host 解释为大多数存储桶可在 [http://bucketname.s3.amazonaws.com上自动访问（对于有限类型的请求）](http://bucketname.s3.amazonaws.com). 此外，通过以您注册的域名命名您的存储桶并将该名称设为 Amazon S3 的 DNS 别名，您可以完全自定义您的 Amazon S3 资源的 URL，例如： http: [//my.bucketname.com/](http://my.bucketname.com/)

尝试将您的 S3 存储桶映射到您的域。

有关示例，请参见[此处。](http://shlomoswidler.com/2009/08/amazon-s3-gotcha-using-virtual-host.html)

> **通过虚拟主机 URL 访问 S3 存储桶**
> 
> S3 提供了两种访问内容的方法。一种方法使用 s3.amazonaws.com 主机名 URL，例如：
> 
> [http://s3.amazonaws.com/mybucket.mydomain.com/myObjectKey](http://s3.amazonaws.com/mybucket.mydomain.com/myObjectKey)
> 
> 访问 S3 内容的另一种方法是在 URL 中使用虚拟主机名：
> 
> [http://mybucket.mydomain.com.s3.amazonaws.com/myObjectKey](http://mybucket.mydomain.com.s3.amazonaws.com/myObjectKey)
> 
> 这两个 URL 都映射到 S3 中的同一个对象。
> 
> 您可以通过设置将 mybucket.mydomain.com 映射到 mybucket.mydomain.com.s3.amazonaws.com 的 DNS CNAME 来缩短虚拟主机名 URL。有了这个 DNS CNAME 别名，上面的 URL 也可以写成如下：
> 
> [http://mybucket.mydomain.com/myObjectKey](http://mybucket.mydomain.com/myObjectKey)
> 
> 仅当您为存储桶设置 DNS CNAME 别名时，此较短的虚拟主机名 URL 才有效。

# ruby-on-rails - 学习在 Ruby On Rails 中使用 RJS 的资源

> ID：10949079
> 
> 赞同：1
> 
> 时间：2012-06-08T12:42:55.173
> 
> 标签：ruby-on-rails, rjs

我尝试在 Rails 应用程序中学习 RJS 的用法，但在 Web 上找不到好的资源。有一些简单的例子，但不是我需要的大量教程。如果您知道，请提出任何建议:)

谢谢 ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T12:52:45.480

做一个谷歌搜索，这些链接似乎很有用：

*   [Rails 程序员的 16 个 RJS 资源和教程](http://www.rubyinside.com/16-rjs-resources-and-tutorials-for-rails-programmers-5.html)
*   [在 Rails 中开始使用 RJS](http://viget.com/extend/getting-started-with-rjs-in-rails)
*   [Rails RJS 演示（视频）](http://www.youtube.com/watch?v=vEky75YBniQ)
*   [Rails 3 和 RJS（stackoverflow 答案）](https://stackoverflow.com/questions/2439327/rails-3-and-rjs)

# php - 即使“包含”，也无法调用 PHP 函数

> ID：10949081
> 
> 赞同：0
> 
> 时间：2012-06-08T12:43:00.137
> 
> 标签：php, function, scope

我最近开始使用 PHP ......一切都很好，除了一件事。我正在尝试从另一个 php 文件中调用一个函数……但它不起作用。这可能真的很简单，但我还没有找到任何有用的方法来解决它。

我已经使用了“required_once”，但它仍然不起作用。有谁知道我要去哪里错了？

```
<?php
require_once "/Applications/MAMP/htdocs/me/database_functions.php";
require_once "/Applications/MAMP/htdocs/me/encode_decode.php";

if (isset($_POST['url']) && $_POST['url'] != "http://")
{
//Get the url posted
$long_url = $_POST['url'];

//Create record in long_url table and return it's id
$long_id = create_long_url($long_url); 
```

到目前为止一切正常..但问题是下一个函数调用..它甚至没有进入函数。

```
$short_url = $encode($long_id);

}...............etc... 
```

encode_decode.php 看起来有点像这样......

```
<?php //encode_decode.php

function encode($number)
{
echo "<br />in encode";
//Encode numer to 6 char 
$s = strtr(rtrim(base64_encode(pack('i', $number)), '='), '+/', '-_');

echo $s;

return $s;
} 
```

任何帮助是极大的赞赏...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T12:44:24.560

您在函数调用之前不需要 $

```
$short_url = $encode($long_id); 
```

应该

```
$short_url = encode($long_id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:44:19.077

仅当函数存储在变量中时才需要美元符号（它不是）。

```
$short_url = encode($long_id); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T12:44:35.123

从函数前面删除美元符号。PHP 中的美元符号表示变量

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T13:03:51.840

正如所有其他人所说：

```
$short_url = encode($long_id); 
```

但你也可以清理你的 require_once 语句：

```
define('DS', DIRECTORY_SEPARATOR);
require_once(dirname(__FILE__) . DS . 'database_functions.php');
require_once(dirname(__FILE__) . DS . 'encode_decode.php'); 
```

除了define() 和对DS 的引用，您当然可以只在文件名前加上'/'。这还假设您的文件是相对的（但如果不只是将文件夹添加到文件名的前缀） - 这将确保您在从不同的服务器（即测试、生产）移动站点时不会遇到任何问题。

# android - 如何防止活动成为任务的根活动

> ID：10949082
> 
> 赞同：0
> 
> 时间：2012-06-08T12:43:04.493
> 
> 标签：android, android-activity

是否可以防止活动成为任务的根活动？我们可以在清单文件中标记它吗？

**更新：**

我已将我的活动的启动模式标记为`android:launchMode="singleTask"`避免多个实例。在这种情况下有什么可能的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:55:49.907

实际上，您**不需要**做任何额外的事情来防止活动成为根活动。您只需要在 AndroidManifest.xml 文件中定义您的活动时避免添加以下属性。

```
<intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:49:07.877

只需在 android 清单文件中定义该活动，例如。

```
<activity android:name=".MyActivity" /> 
```

没有给它任何其他属性。

# jquery - jQuery 无限循环遍历每个 div

> ID：10949086
> 
> 赞同：4
> 
> 时间：2012-06-08T12:43:08.987
> 
> 标签：jquery, infinite-loop

我有一些带有 div 的 div，我想循环遍历这些 div，同时从当前的类中删除一个类，然后将一个类添加到下一个类。

然后当我到达最后一个时，我想回到起点重新做一遍。

我已经有办法做到这一点，但它只适用于一组 div，我将有许多组需要独立循环的 div。

这是几个集合的示例（每个集合中会有随机数量的 div）：

```
<div class="set">
    <div class="current">Item1</div>
    <div>Item2</div>
    <div>Item3</div>
</div>

<div class="set">
    <div class="current">Item1</div>
    <div>Item2</div>
    <div>Item3</div>
    <div>Item4</div>
    <div>Item5</div>
</div> 
```

我需要删除该当前类，并将其添加到每个集合中的下一个 div 中，依此类推。

这是我拥有的适用于一组的代码：

```
$(function() {
    var items = $('.set div').length;
        current = 0;

    setInterval(function() {
        $('.set div').eq(current).removeClass('current');

        if (current == items - 1){
            current = 0;
        } else {
            current++;
        }

        $('.set div').eq(current).addClass('current');
    }, 500);
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T12:54:47.117

我的看法：

[http://jsfiddle.net/yyY28/](http://jsfiddle.net/yyY28/)

```
$('.set').each(function(){
    (function($set){
        setInterval(function(){
            var $cur = $set.find('.current').removeClass('current');
            var $next = $cur.next().length?$cur.next():$set.children().eq(0);
            $next.addClass('current');
        },1000);
    })($(this));

});​ 
```

* * *

版本 2：

```
​setInterval(function(){
    $('.set').each(function(){
        var $cur = $(this).find('.current').removeClass('current');
        var $next = $cur.next().length?$cur.next():$(this).children().eq(0);
        $next.addClass('current');
    });
},1000);​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T12:55:08.610

也许我没有让你正确，但你正在寻找吗？

```
function loop() {
    $(".set").each(function() {
        var current = $(this).children(".current").removeClass("current");
        var i = current.next().length ? current.index() : 0;
        current.siblings(":eq(" + i + ")").addClass("current");
    });
}

setInterval(loop, 500);​ 
```

**演示：http:** [//jsfiddle.net/jGcsh/](http://jsfiddle.net/jGcsh/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:53:45.027

试试这个：

```
function changeCurrent(){
    $('.set').each(function(){
        var currentSubDiv = $(this).children('.current');
        currentSubDiv.removeClass('current');
        currentSubDiv.next().addClass('current');
    })
}

setInterval(changeCurrent,timeInMillis); 
```

# outlook - 如何访问具有 MS Exchange 帐户的 Outlook 文件夹

> ID：10949100
> 
> 赞同：1
> 
> 时间：2012-06-08T12:44:12.503
> 
> 标签：outlook, exchange-server-2010

我编写了以下代码来访问 Outlook 文件夹。

```
MSOutlook.Application app = new MSOutlook.Application();
MSOutlook.NameSpace ns = app.GetNamespace("MAPI");
try
{
    foreach (MSOutlook.Folder folder in ns.Folders)
    {
        ...
    }
}
catch (Exception ex)
{
    ...
} 
```

但是这段代码抛出异常，`ns.Folders`这个异常意味着

> RPC 服务器不可用。（来自 HRESULT 的异常：0x800706BA）。

但是，我可以在没有交换帐户的环境中使用相同的代码获取文件夹。

如何获取具有 MS Exchange 帐户的环境中的文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T06:30:22.617

```
Microsoft.Office.Interop.Outlook.Application app = new Microsoft.Office.Interop.Outlook.Application();

        Outlook._NameSpace ns = app.GetNamespace("MAPI");
        Outlook.MAPIFolder taskFolder = ns.GetDefaultFolder(Microsoft.Office.Interop.Outlook.OlDefaultFolders.olFolderTasks);

        foreach (Microsoft.Office.Interop.Outlook.Folder folder in ns.Folders)
            {
                System.Diagnostics.Debug.WriteLine("Folder ----"+folder.Name.ToString());
            } 
```

这对我来说很好..

# textures - 锋利的精灵

> ID：10949104
> 
> 赞同：0
> 
> 时间：2012-06-08T12:44:22.123
> 
> 标签：textures, ccsprite

我是 cocos2D 的新手，我想画成

![](../Images/353e9262c64a4a5b54049851fab45692.png)

我尝试使用 CCSprite 并且也厌倦了使用它来解决它

`[brush setBlendFunc:(ccBlendFunc){GL_ONE, GL_ONE_MINUS_SRC_ALPHA}]; [brush.texture setAliasTexParameters];`

但我只有图像

![](../Images/2278e40061f98b265b9f73d7c000660d.png)

其中边缘是钝的/模糊的。我怎样才能使模糊边缘的图像像第一个一样清晰？有人可以建议我正确的方法吗？

我用来生成上述图像的代码是

```
 brush = [CCSprite spriteWithFile:@"sketch.png"];
  [brush setColor:ccc3(0, 0, 0)];
  brush.scale = 1.5f;
  [brush setBlendFunc:(ccBlendFunc){GL_ONE, GL_ONE_MINUS_SRC_ALPHA}];
  [brush.texture setAliasTexParameters]; 
```

在手势法中，

```
 [brush setPosition:curntPoint];
  [brush setRotation:rand() % 360];
  [brush setOpacity:brushAlpha]; 
```

提前致谢。

# php - PHP，file_get_contents() 为 PDF 文件返回 null

> ID：10949108
> 
> 赞同：2
> 
> 时间：2012-06-08T12:44:34.373
> 
> 标签：php, pdf

我想将 pdf 文件的内容放入变量中。我尝试使用

> file_get_contents("file.pdf")

但它返回NULL。例如，如果我对 .jpg 文件执行相同操作，它就可以工作。知道如何克服这个问题吗？还有其他方法吗？提前致谢！

**编辑：**

**服务代码：**

```
<?php

function sendAttachment($msg){
$responsePayloadString = <<<XML
    <payload:receiveReport xmlns:payload="http://wso2.org/wsfphp/samples/mtom">
        <payload:reports> 
            <payload:report>
                <payload:content xmlmime:contentType="application/pdf" xmlns:xmlmime="http://www.w3.org/2004/06/xmlmime">
                    <xop:Include xmlns:xop="http://www.w3.org/2004/08/xop/include" href="cid:report1"></xop:Include>
                </payload:content>
            </payload:report>
        </payload:reports>
    </payload:receiveReport>
XML;
$report1 = file_get_contents("samplePDF.pdf");

$responseMessage = new WSMessage($responsePayloadString, 
        array("attachments" => array("report1" => $report1),
                "useWSA" => TRUE));  
return $responseMessage;    
}

$operations = array("receiveReport" => "sendAttachment");

$service = new WSService(array("operations" => $operations, 
                                            "requestXOP" => TRUE, 
                                            "useMTOM" => TRUE));

$service->reply();

?> 
```

**客户代码：**

```
<?php
error_reporting(E_ALL); 
ini_set('display_errors', 1);

/******* FirePHP Debug *******/
require_once('../FirePHPCore/FirePHP.class.php');
ob_start();
$firephp = FirePHP::getInstance(true);
/******* FirePHP Debug *******/

$requestPayloadString = <<<XML
<receiveReport></receiveReport> 
```

XML；

```
try {
$client = new WSClient(
    array( "to" => "http://localhost/ReportDL/ReportService.php",
           "useMTOM" => TRUE,
           "responseXOP" => TRUE,
           "useWSA" => TRUE));

$requestMessage = new WSMessage($requestPayloadString);                    
$responseMessage = $client->request($requestMessage);

$cid2stringMap = $responseMessage->attachments;
$cid2contentMap = $responseMessage->cid2contentType;

if($cid2stringMap && $cid2contentMap){
    foreach($cid2stringMap as $i=>$value){
        $f = $cid2stringMap[$i];
        $contentType = $cid2contentMap[$i];

        $firephp->log($f, "pdf");       //DEBUG

    }
}else{
    printf("attachments not received ");
}

} catch (Exception $e) {

if ($e instanceof WSFault) {
    printf("Soap Fault: %s\n", $e->Reason);
} else {
    printf("Message = %s\n",$e->getMessage());
}
}

?> 
```

**编辑2：**

```
string '%PDF-1.5
%âãÏÓ
2 0 obj
<</Length 285/Filter/FlateDecode>>stream
xœ’_KÃ0Åßó)î£‚Ä{“4i|S¨‚ÓÀžµKiçÚ­0¿½i;ëýƒ#ÐÐÃýœž¦dwŽI
&ÒàV,qlÁJfŒ�%hCåÙ’­;YÇªÕrÿÎÿêeã|}O@\Æ0,‹&lt;ÌXÃ¤E¯6OW°‹‡z
ñÑ
Z¸}¼t]®æ$ä’Õð³ToGÞ!5¾í»R ›4Ù<)¤:•&amp;ž@©ù¸v’4Â®ƒžB®gÁ6è49X»P‚c@uÌíPñîÝÃÒ¿Â“ß|V;Hö/Å&÷Ðw?f    I.MHq²Mö>­w~5k$‘8Šq£ç:õÛmVçù?òi©ý'Ó-Í^$eNðÿ\¥sá6ø(¼`ßè¿Á÷
endstream
endobj
6 0 obj
<</Type/Catalog/PageMode/UseNone/Pages 3 0 R>>
endobj
7 0 obj
<</Creator(BIRT Report Engine 2.6.0 using iText version unknown.)/Producer('... (length=1231) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T14:19:53.863

`file_get_contents()`如果文件不可读，则应返回`FALSE`- 否则返回包含文件内容的字符串。

问题必须出在其他地方 - 开始以程序方式调试您的代码，`var_dump()`以找出您的数据丢失的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-16T00:21:56.073

您需要在 PHP 页面顶部添加以下代码。

```
header("Content-type:application/pdf"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-03T22:37:18.237

万一其他人为此而来，我的问题是文件权限对于 www-data 不正确。更改权限后，Web 服务器可以读取它并按预期运行。

我知道这是一个“duh”的事情，但起初对我来说并不明显。

```
if ($file_ext == 'pdf') { $content_type = "application/pdf"; }
    elseif($file_ext == 'ppt') { $content_type = "application/vnd.ms-powerpoint"; }
    elseif($file_ext == 'pptx') { $content_type = "application/vnd.openxmlformats-officedocument.presentationml.presentation"; }
    elseif($file_ext == 'xls') { $content_type = "application/vnd.ms-excel"; }
    elseif($file_ext == 'xlsx') { $content_type = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"; }
    elseif($file_ext == 'doc') { $content_type = "application/vnd.ms-word"; }
    elseif($file_ext == 'docx') { $content_type = "application/vnd.openxmlformats-officedocument.wordprocessingml.document"; }
        else { $content_type = "application/octet-stream"; }

$document_contents = file_get_contents("/Server/location/to/$file");

header("Content-type: $content_type");
echo $document_contents;
die(); 
```

# javascript - 隐藏元素 onFocus 并显示 onBlur

> ID：10949109
> 
> 赞同：1
> 
> 时间：2012-06-08T12:44:35.130
> 
> 标签：javascript, jquery

我有 2 个表单输入，其中 onFocus 我想隐藏页面上的另一个元素。

```
$(document).ready(function () { 
        $('.email').focus(function () {
            $('.note').fadeTo('fast', 0);
        }).blur(function () {
            $('.note').fadeTo('fast', 1);
        });
        $('.password').focus(function () {
            $('.note').fadeTo('fast', 0);
        }).blur(function () {
            $('.note').fadeTo('fast', 1);
        });
    }); 
```

非常基本的东西，但我还需要确保在这两个输入（.email 和 .password）之间切换时隐藏元素不会再次可见。

似乎有时当我在它们之间切换时，隐藏的元素会闪烁回到视图中，或者 .focus 事件没有被触发，因为元素由于某种原因不在焦点上。

无论如何我要说，.note 元素是隐藏的，如果在 .email 和 .password 之间切换保持隐藏状态，直到这两个元素都失去焦点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T16:54:17.907

[我在jsFiddle](http://jsfiddle.net/KsFnX/1/)上尝试了一些东西，并提出了以下解决方案。似乎在`blur()`之前执行`focus()`，这就是为什么它淡入然后立即淡出。

我设置了一个超时，在短时间内延迟模糊事件，因此我们可以在执行模糊之前检查是否有新元素被聚焦。

```
$( document ).ready( function( ) {
    $( '.email, .password' ).focus( function( ) {
        $( '.note' ).fadeTo( 'fast', 0 );
    } ).blur( function( ) {
        setTimeout( function( ) {
            if( $( '.email:focus, .password:focus' ).length == 0 )
            {
              $( '.note' ).fadeTo( 'fast', 1 );
            }
        }, 100 );
    } );
} );​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:49:39.210

您可以使用`:focus`来验证当前是否关注其他字段。

```
$(document).ready(function () { 
        $('.email').focus(function () {
            $('.note').fadeTo('fast', 0);
        }).blur(function () {
            if ($('.password:focus').length == 0)
                $('.note').fadeTo('fast', 1);
        });
        $('.password').focus(function () {
            $('.note').fadeTo('fast', 0);
        }).blur(function () {
            if ($('.email:focus').length == 0)
                $('.note').fadeTo('fast', 1);
        });
    }); 
```

# google-maps-api-3 - 1英里圆圈区域内的所有经纬度

> ID：10949111
> 
> 赞同：3
> 
> 时间：2012-06-08T12:44:37.130
> 
> 标签：google-maps-api-3, google-fusion-tables

我正在尝试通过使用融合表在我的数据库坐标地图上生成图钉，并且我只想在特定位置周围的 1 英里区域内生成图钉。要获得与我的数据库坐标相似的 1 英里区域的坐标，我必须将 < 和 > 的条件放入融合表，但我不知道如何获取 1 英里区域圆内的所有坐标，或者条件的值应该是什么询问。任何人都可以帮我弄清楚，这真的很明显。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:23:19.560

你没有提供任何代码，所以我不确定你想做什么。但是 Fusion Table [ST_INTERSECTS](https://developers.google.com/fusiontables/docs/developers_reference#Select)运算符应该做你想做的事。寻找 <spatial_condition>。

```
 var where = "ST_INTERSECTS('location_col',CIRCLE(LATLNG(31.954109,-115.441528), radius_in_meters) ) )";

  var qryOpts = {
   query: {
   select: location_col,
      from: table_id,
      where: where
    }
 };
 ft_layer.setOptions(qryOpts); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T23:33:12.213

我不知道这在 Fusion Tables API 中是否可行，但如果我这样做，我会首先计算我的数据库中的哪些点在半径范围内，然后只插入那些点。你可以忽略地球的曲率，只使用勾股定理，稍微调整一下你的纬度。

见这里：[http ://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)

# .net - AutoCAD 中的 DirectX 查看器使 AutoCAD 无法正常运行

> ID：10949115
> 
> 赞同：0
> 
> 时间：2012-06-08T12:44:58.407
> 
> 标签：.net, directx, autocad, slimdx, autocad-plugin

我正在为嵌入在 AutoCAD 中的应用程序开发 3D 零件预览器。

3D 是通过 SlimDX（2.0 版本）使用 DirectX 实现的。

我正在使用 .NET Framework 3.5

**以下代码初始化 DirectX 设备**

```
foreach (var item in ObjectTable.Objects)
    item.Dispose();

_presentParameters = new PresentParameters()
    {
        BackBufferFormat = Format.Unknown,
        SwapEffect = SwapEffect.Discard,

        BackBufferWidth = 1500,
        BackBufferHeight = 1500,

        EnableAutoDepthStencil = true,

        AutoDepthStencilFormat = Format.D16,
        PresentationInterval = PresentInterval.Immediate
    };

_device = new Device(new Direct3D(), 0, DeviceType.Hardware, preview3DTarget.Handle, CreateFlags.HardwareVertexProcessing, _presentParameters);

_device.SetRenderState(RenderState.ZEnable, true);
_device.SetRenderState(RenderState.Lighting, false);
_device.SetRenderState(RenderState.CullMode, Cull.None); 
```

**从控件的 OnPaint 方法调用以下代码来渲染预览**

```
_device.Clear(ClearFlags.Target | ClearFlags.ZBuffer, Color.Black, 1.0f, 0);

_device.BeginScene();

float ratio = (float)preview3DTarget.ClientSize.Width / preview3DTarget.ClientSize.Height;

_device.SetTransform(TransformState.Projection, Matrix.OrthoLH(200, 200, 0.0f, 200.0f));

_device.SetTransform(TransformState.World, Matrix.Translation(-center.X, -center.Y, -center.Z));

_device.SetTransform(TransformState.View, Matrix.RotationYawPitchRoll(Math.radians(0),
                                    Math.radians(0), 0.0f) *
                                    Matrix.Translation(0f, 0f, 100));

for (int i = 0; i < this.vertices.Count; i += 4)
{
    _device.DrawPrimitives(PrimitiveType.TriangleStrip, i, 2);
}

for (int i = 0; i < this.points.Count; i += 5)
{
    _device.DrawPrimitives(PrimitiveType.LineStrip, i + this.vertices.Count, 4);
}

_device.EndScene();

_device.Present(); 
```

所有这些代码都可以正常工作，但是在第一次渲染预览后，AutoCAD 会停止正常工作。无法选择 AutoCAD 模型空间内的对象。如果调用了 REGEN，则屏幕是清晰的，并且不会重绘任何内容。如果绘制了一个新对象，它会出现，但与现有对象一样，无法选择。

我猜我的应用程序以某种方式接管了 DirectX 引擎并阻止 AutoCAD 使用它。是否有某种我缺少的释放/处置调用可能允许我的应用程序和 AutoCAD 同时使用 DirectX？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T08:48:13.673

前段时间我也遇到过类似的问题，但我还没有找到解决方案。您是否尝试过在 DirectX 端启用多线程？

您还可以使用 AutoCAD 图形系统在屏幕外渲染模型：through-the-interface.typepad.com/through_the_interface/2007/04/rendering_autoc.html

# iphone - iOS - resizableImageWithCapInsets 无法按预期工作

> ID：10949123
> 
> 赞同：2
> 
> 时间：2012-06-08T12:45:17.177
> 
> 标签：iphone, ios, ipad, uiimage

我想了解 resizableImageWithCapInsets 的工作原理，所以我找到了这张图片

![在此处输入图像描述](../Images/895e6d425a1b3a969799d8a09b6d6acb.png)

图像的大小是 57x51 所以我创建了这样的图像

```
image = [[UIImage imageWithContentsOfFile:[[NSBundle mainBundle] 
pathForResource:@"PopoverViewBlackBackgroundArrowDown" ofType:@"png"]] 
resizableImageWithCapInsets:UIEdgeInsetsMake(25.0, 28.0, 25.0, 28.0)]; 
```

和这样的图像视图

```
UIImageView *backgroundImageView = [[UIImageView alloc] initWithImage:image];
backgroundImageView.frame = CGRectMake(0.0f, 0.0f, 210.0f, 110.0f);
[self.view addSubview:backgroundImageView]; 
```

但这是结果

![在此处输入图像描述](../Images/bfe221b99215afa3cc941d7bfeaabb01.png)

它看起来不像传统的 UIPopoverController。箭头也在调整大小。

你知道为什么吗？

感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:56:58.373

我认为您的问题是边缘插图设置不正确。您应该尝试做的是将左右插图移动到箭头区域之外。

目前，您在图像的中心为可拉伸区域指定了 0 的宽度，因此它在单点处拉伸了中间的箭头。顶部和底部的插图看起来不错，所以你的目标是这样的：

```
resizableImageWithCapInsets:UIEdgeInsetsMake(25.0, 10.0, 25.0, 47.0)]; 
```

即图像左右两边各留出 10 px 的边距。

希望有帮助

# java - JAVA 中的逐字字符串替代方案

> ID：10949131
> 
> 赞同：1
> 
> 时间：2012-06-08T12:45:44.477
> 
> 标签：java, string

知道 Java 没有像 C# 中那样的逐字字符串 (@)，有没有办法在代码中使用它时保持字符串的格式？我有一个 sql 代码，我必须在代码中使用，但为了可读性我必须保持某种格式，我可以在c#中使用@来做到这一点，但我怎样才能在Java中实现呢？

例如：

```
String SQL=@"INSERT INTO VERSION_INFO
        ( TABLE_NAME ,
          VERSION_ID ,
          DATE,
          EXP
        )
VALUES  ( '' , -- TABLE_NAME - varchar(50)
          0 , -- VERSION_ID - int
          0 , -- DATE- int
          ''  -- EXP- varchar(100)
        )"; 
```

我必须按原样使用它，无需太多修改......

为愚蠢而编辑...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T12:48:53.290

如果您使用 Eclipse，则可以使用以下`@formatter`标签：

```
// @formatter:off

String string = "Your beautifully"
    + " formatted string";

// @formatter:on 
```

这些标签之间的任何内容都将不受`Ctrl`++ ( `Shift`)的影响。`F``Source > Format`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T12:49:45.433

除了……对不起，我还能说什么。

```
String SQL = "INSERT INTO VERSION_INFO (\n"
           + "    TABLE_NAME,\n"
           + "    VERSION_ID,\n"
           + "    DATE,\n"
           + "    EXP\n"
           + ")\n"
           + "VALUES (\n"
           + "    '' , -- TABLE_NAME - varchar(50)\n"
           + "    0,   -- VERSION_ID - int\n"
           + "    0,   -- DATE- int\n"
           + "    ''   -- EXP- varchar(100)\n"
           + ")"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T13:10:51.160

不幸的是，Java 没有提供 Verbatins 。

您可以使用`String` `format`方法来实现这一点。

**例子：**

```
String str= "Hello %s, isn't %s cool?";
String formatted = String.format(str,"Ivan", "Scala");
System.out.println(formatted); 
```

同样的方式，您可以先编写查询，然后您可以格式化查询字符串。

**例如**

```
String SQL="INSERT INTO VERSION_INFO
    ( TABLE_NAME ,
      VERSION_ID ,
      DATE,
      EXP
    )
VALUES  ('%s','%s',%s,'%s')";

String.format(SQL,--set as order---); 
```

我认为它可以帮助你。

# c# - CheckBox检查使用jQuery获取DataGrid值

> ID：10949137
> 
> 赞同：1
> 
> 时间：2012-06-08T12:46:00.487
> 
> 标签：c#, jquery, gridview, checkbox, datakey

我在 c# 的 gridview 中有一个复选框模板字段，该字段还有一个隐藏字段，其后面有 id。我想使用 jQuery 在单击复选框时引发事件以获取数据键值，以便我可以通过 jQuery 运行查询并将选中的项目添加到数据库中。我已经看到了在单击整体按钮时获取数据键的示例，但我希望在网格视图中单击的每个复选框上都发生这种情况。我目前在尝试访问 id 时得到“未定义”。

网格视图中的 C#

```
<ItemTemplate>
     <asp:CheckBox ID="CheckBox" CssClass="checkbox" runat="server" />
     <asp:HiddenField ID="idnum" runat="server" Value='<%# Eval("id") %>' />
</ItemTemplate> 
```

jQuery

```
$(document).ready(function () {
           var gridResults = document.getElementById('<%= grdResults.ClientID %>');

           $("form input:checkbox").click(function (e) {
                   var id = $(this).next('#idnum').val();
                   alert(id);
                   return false;                                        
           });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:54:22.233

如果有多个字段，`ID="idnum"`您可能应该将其更改为`class="idnum"`. 添加类后，您可以使用以下方法获取值：

```
var gridResults = $(e.target).next('.idnum').val(); 
```

如果`idnum`只是每个字段不同的示例，您可以使用`var id = $('#idnum').val();`

*编辑*：更改`e.target.next('.idnum').val();`为`$(e.target).next('.idnum').val();`将元素转换为 jQuery 对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-30T12:53:35.287

//这是在 GridView 中的复选框检查事件上获取 datakeyname 值的脚本

```
<script type="text/jscript">
        $(document).ready(function () {
            var gridResults = document.getElementById('<%= grdCateogry.ClientID %>');

            $("form input:checkbox").click(function (e) {
                var id = $(this).next($('#IDVal')).val();
                alert(id);
                return false;
            });
        });
    </script>
```

//这是GridView

```
<asp:GridView ID="grdCateogry" DataKeyNames="CategoryId" runat="server">
    <Columns>
      <asp:TemplateField HeaderText ="Try" ItemStyle-Width="20px">
         <ItemTemplate>
           <asp:CheckBox ID="chkSelect" runat="server" />   
           <asp:HiddenField ID="IDVal" runat="server" Value='<%# Eval("CategoryId") %>' />
          </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView>
```

# xcode - 声音选择器/macOS 上的系统声音列表

> ID：10949138
> 
> 赞同：4
> 
> 时间：2012-06-08T12:46:01.520
> 
> 标签：xcode, macos, cocoa, system-sounds, nssound

好的。我一直在寻找一种巧妙的方法来列出使用 [NSSound soundNamed: ] 播放的系统声音 - 在我看来，API 似乎没有可用声音的列表。

我还用谷歌搜索了这个，发现了一些相当古老且部分已被弃用的资源。如果应用程序应该有*一个声音选择器*- 获取系统提供的声音列表的最佳方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-08T12:46:02.377

这是我的实现。

NSSound (systemSounds.h):

```
#import <AppKit/AppKit.h>

@interface NSSound (systemSounds)

+ (NSArray *) systemSounds;

@end 
```

NSSound (systemSounds.m):

```
#import "NSSound (systemSounds).h"

@implementation NSSound (systemSounds)

static NSArray *systemSounds = nil;

+ (NSArray *) systemSounds
{
    if ( !systemSounds )
    {
        NSMutableArray *returnArr = [[NSMutableArray alloc] init];
        NSEnumerator *librarySources = [NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSAllDomainsMask, YES) objectEnumerator];
        NSString *sourcePath;

        while ( sourcePath = [librarySources nextObject] )
        {
            NSEnumerator *soundSource = [[NSFileManager defaultManager] enumeratorAtPath: [sourcePath stringByAppendingPathComponent: @"Sounds"]];
            NSString *soundFile;
            while ( soundFile = [soundSource nextObject] )
                if ( [NSSound soundNamed: [soundFile stringByDeletingPathExtension]] )
                    [returnArr addObject: [soundFile stringByDeletingPathExtension]];           
        }

        systemSounds = [[NSArray alloc] initWithArray: [returnArr sortedArrayUsingSelector:@selector(compare:)]];
        [returnArr release];
    }
    return systemSounds;
}

@end 
```

任何人都可以免费使用和使用，如果你增强它，请分享:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-12T22:40:15.713

[使用iOSSystemSoundsLibrary](https://github.com/TUNER88/iOSSystemSoundsLibrary)检查所有系统声音

# sql-server-2008 - SQL Server 2008 - 性能慢查询

> ID：10949140
> 
> 赞同：-1
> 
> 时间：2012-06-08T12:46:11.810
> 
> 标签：sql-server-2008, join, query-optimization

我正在运行以下查询：

返回大约 68000 条记录需要 5 分钟。但是如果我从查询中删除 LKP_PrivateSource（即最后的左连接），则需要 1 秒才能返回 68000 条记录。BTY，LKP_PrivateSource 表中没有记录。知道是什么导致了这个问题吗？

```
Select
Case IsNull(LNK.StockID,0)
    When 0 Then AE.StockID
    Else LNK.StockID
End StockID,
IsNull(AE.LinkID,0) LinkID,IsNull(LNK.CapitalID,0) CapitalID,DE.SourceName
,AE.SourceDate 'Date'
,IsNull(AE.Formula,'') Formula
From AE_RevenuData AE
Left Join Linking LNK With(NoLock) ON LNK.LinkID=AE.LinkID
Inner Join DE_DataEntities DE ON DE.EntityID=AE.EntityID
Inner Join DataEntityIDs TE ON TE.EntityID=DE.EntityID
Inner Join STG_LockedEntityData STG ON STG.StockID=IsNull(LNK.StockID,AE.StockID) AND STG.CapitalID=IsNull(LNK.CapitalID,0) 
Left Join LKP_PrivateSource PS ON IsNull(PS.PSourceId,0)=IsNull(AE.PSourceID,0)
Where AE.ProjectID IN (13)
AND AE.LinkID IS NOT NULL 
```

请看下面的计划：

```
 |--Compute Scalar(DEFINE:([Expr1017]=CASE WHEN [Expr1026]=(0) THEN [MYDBNAME].[dbo].[AE_RevenueData].[StockID] as [AE].[StockID] ELSE [MYDBNAME].[dbo].[INV_InvestorFundLinking].[StockID] as [LNK].[StockID] END))
   |--Nested Loops(Left Outer Join, OUTER REFERENCES:([Expr1027]))
        |--Filter(WHERE:([MYDBNAME].[dbo].[STG_LockedEntityData].[StockID] as [STG].[StockID]=isnull([MYDBNAME].[dbo].[INV_InvestorFundLinking].[StockID] as [LNK].[StockID],[MYDBNAME].[dbo].[AE_RevenueData].[StockID] as [AE].[StockID]) AND [MYDBNAME].[dbo].[STG_LockedEntityData].[CapitalID] as [STG].[CapitalID]=[Expr1019]))
        |    |--Compute Scalar(DEFINE:([Expr1019]=isnull([MYDBNAME].[dbo].[INV_InvestorFundLinking].[CapitalID] as [LNK].[CapitalID],(0)), [Expr1026]=isnull([MYDBNAME].[dbo].[INV_InvestorFundLinking].[StockID] as [LNK].[StockID],(0))))
        |         |--Nested Loops(Left Outer Join, OUTER REFERENCES:([AE].[LinkID]))
        |              |--Nested Loops(Inner Join, WHERE:([MYDBNAME].[dbo].[AE_RevenueData].[LinkID] as [AE].[LinkID]=[MYDBNAME].[dbo].[STG_LockedEntityData].[LinkID] as [STG].[LinkID]))
        |              |    |--Sort(ORDER BY:([Expr1027] ASC))
        |              |    |    |--Hash Match(Inner Join, HASH:([TE].[EntityID])=([AE].[EntityID]))
        |              |    |         |--Nested Loops(Inner Join, OUTER REFERENCES:([Uniq1008], [DE].[ListingID]))
        |              |    |         |    |--Nested Loops(Inner Join, OUTER REFERENCES:([TE].[EntityID]))
        |              |    |         |    |    |--Table Scan(OBJECT:([MYDBNAME].[dbo].[DataEntityIDs] AS [TE]))
        |              |    |         |    |    |--Index Seek(OBJECT:([MYDBNAME].[dbo].[DE_DataEntities].[PK_DE_DataSources] AS [DE]), SEEK:([DE].[EntityID]=[MYDBNAME].[dbo].[DataEntityIDs].[EntityID] as [TE].[EntityID]) ORDERED FORWARD)
        |              |    |         |    |--Clustered Index Seek(OBJECT:([MYDBNAME].[dbo].[DE_DataEntities].[IX_DE_DataSources] AS [DE]), SEEK:([DE].[ListingID]=[MYDBNAME].[dbo].[DE_DataEntities].[ListingID] as [DE].[ListingID] AND [Uniq1008]=[Uniq1008]) LOOKUP ORDERED FORWARD)
        |              |    |         |--Compute Scalar(DEFINE:([Expr1018]=[MYDBNAME].[dbo].[AE_RevenueData].[LinkID] as [AE].[LinkID], [Expr1020]=isnull([MYDBNAME].[dbo].[AE_RevenueData].[Formula] as [AE].[Formula],''), [Expr1021]=CONVERT(bit,[MYDBNAME].[dbo].[AE_RevenueData].[IsSumOfFunds] as [AE].[IsSumOfFunds],0), [Expr1022]=isnull([MYDBNAME].[dbo].[AE_RevenueData].[ClientSpecificSource] as [AE].[ClientSpecificSource],N''), [Expr1023]=isnull([MYDBNAME].[dbo].[AE_RevenueData].[GenericSource] as [AE].[GenericSource],N''), [Expr1027]=isnull([MYDBNAME].[dbo].[AE_RevenueData].[PSourceID] as [AE].[PSourceID],(0))))
        |              |    |              |--Clustered Index Seek(OBJECT:([MYDBNAME].[dbo].[AE_RevenueData].[IX_AE_RevenueData] AS [AE]), SEEK:([AE].[ProjectID]=(13)),  WHERE:([MYDBNAME].[dbo].[AE_RevenueData].[LinkID] as [AE].[LinkID] IS NOT NULL) ORDERED FORWARD)
        |              |    |--Table Scan(OBJECT:([MYDBNAME].[dbo].[STG_LockedEntityData] AS [STG]))
        |              |--Index Seek(OBJECT:([MYDBNAME].[dbo].[INV_InvestorFundLinking].[PK_Linking_1] AS [LNK]), SEEK:([LNK].[LinkID]=[MYDBNAME].[dbo].[AE_RevenueData].[LinkID] as [AE].[LinkID]) ORDERED FORWARD)
        |--Clustered Index Seek(OBJECT:([MYDBNAME].[dbo].[LKP_PrivateSource].[PK_LKP_FactsetSource] AS [PS]), SEEK:([PS].[PSourceID]=[Expr1027]) ORDERED FORWARD) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:11:33.047

我认为这是您在左连接比较的两侧使用函数的事实。

如何修复它实际上取决于业务逻辑，但我会考虑在该表上执行两个或多个左连接。

一种具有直接的值到值比较，另一种仅处理空值逻辑。

您需要将它们添加到您的合并中，按它们如何满足要求进行排序。

# javascript - 降低非悬停元素的不透明度

> ID：10949146
> 
> 赞同：1
> 
> 时间：2012-06-08T12:46:37.757
> 
> 标签：javascript, svg, opacity

我有十二个 svg 路径。所有这些都具有 100% 的不透明度。

我想将悬停悬停在一条路径上，将其保持在 100% 并更改其他 11 条路径的不透明度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:54:32.483

在 SVG 中嵌入 CSS：

```
#paths:hover path {
     opacity:50%;
}
#paths path,
#paths:hover path:hover {
     opacity:100%; /* the default value */
} 
```

```
<g id="paths">
    <path ... />
    <path ... />
    ...
</g> 
```

# spring - 下拉列表的弹簧形式组成的项目值

> ID：10949151
> 
> 赞同：1
> 
> 时间：2012-06-08T12:47:01.403
> 
> 标签：spring, jsp, jakarta-ee, spring-mvc, jstl

是否可以显示弹簧下拉列表表单的组合（连续）项目标签？

就像是 ：

```
<form:select path="project"  id="role" >
<form:options items="${projectList}" itemValue="projectID" itemLabel="startDate +'To'+ endDate"/>
</form:select> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T04:56:13.140

As per my understanding its not possible. But you should set the itemLabel property in that way from your controller itself if you need it like that in the jsp.

Or you can also go for `<c:forEach/>` and inside that you can create the options with pure html tag and in case of label you can combine both the properties there like you have tried to do in your question.

Hope this helps you. Cheers.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:02:15.320

在提交操作后返回到同一表单后，下拉列表的绑定不起作用。选定的值不会重新显示在表单上。

# c# - 在 submitchanges 方法触发之前拦截 linq 生成的 TSQL

> ID：10949153
> 
> 赞同：1
> 
> 时间：2012-06-08T12:47:07.113
> 
> 标签：c#, linq, linq-to-sql

在 submitchanges() 方法触发之前是否可以拦截 linq 生成的 TSQL？我需要修改 sql 插入查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T14:02:04.607

您不能这样修改 SQL，但*可以*拦截插入过程。您生成的数据上下文应该具有方法的部分实现`Insert`。例如，如果您的实体被命名，则`MyDbEntity`：

```
partial void InsertMyDbEntity(MyDbEntity instance); 
```

由于这是局部的，因此您可以在围绕生成的数据上下文创建的局部类中对其进行修改。然后，您可以使用此钩子从整块布料中生成 INSERT 语句，或者只调用您编写的自定义存储过程来处理您试图实现的任何细微差别。

这是您能做的最好的事情——您不能在此过程中检测现有的 INSERT SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-21T14:04:03.443

是的，可以拦截`SubmitChanges()`调用，但不能拦截 SQL 本身。

在我的应用程序中，我的 .dbml 文件名为“ `GlobalPricing.dbml`”，并且我创建了一个名为 .dbml 的类`GlobalPricingDataContext.cs`。

```
public partial class GlobalPricingDataContext: System.Data.Linq.DataContext
{
    public override void SubmitChanges(ConflictMode failureMode)
    {
        int inserts = base.GetChangeSet().Inserts.Count;
        int updates = base.GetChangeSet().Updates.Count;
        int deletes = base.GetChangeSet().Deletes.Count;

        Trace.WriteLine(string.Format("{0}  There are {1} inserts, {2} updates and {3} deletes.", DateTime.Now.ToLongTimeString(), inserts, updates, deletes)); 

        base.SubmitChanges(failureMode);
    }
} 
```

同样，此代码不会让您修改正在运行的 SQL，但它至少会让您知道每个`SubmitChanges()`调用尝试执行的插入、更新和删除操作。

# javascript - 修复 Highcharts Stock 中的 x 轴（停止自动缩放）

> ID：10949156
> 
> 赞同：2
> 
> 时间：2012-06-08T12:47:14.227
> 
> 标签：javascript, charts, highcharts

在开始绘制主系列（LTP）的图表中，它绘制整个宽度。

![图表](../Images/31f10c193e87b31b97d13a557bebda10.png)

有没有办法像底部的选择器图表一样绘制它？

编辑：我希望整个 xAxis 可见，然后在不自动缩放 xAxis 的情况下添加点。

看看我的代码

[http://jsfiddle.net/S9SwB/9/](http://jsfiddle.net/S9SwB/9/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T19:26:09.927

在这里建立@wergeld 的解决方案，正如您在他的解决方案中看到的那样，x 轴的末端在 5:30 正确定位，但时间突然飞跃，这是因为轴的序数属性设置为 true默认情况下，这意味着所有点的像素间隔相等，时间差异无关紧要，因此轴在右侧为 1 个点留下了足够的空间，因此添加一个点所需的像素数。将 ordinal 设置为 false 时，它​​将根据时差分配所需的空间。总而言之，这是您的解决方案:) [http://jsfiddle.net/jugal/UP5sw/](http://jsfiddle.net/jugal/UP5sW/)

```
var min = new Date().getTime();
var max = min + 50 * 500;  
//...

xAxis: {
        ordinal: false,
        max:max
    },
    series: [
        {
        name: 'Series 0',
        data: [[min, 0]]
    },
    {
        name: 'End',
        data: [[max, 0]]
    }] 
```

更多关于序数选项@ [http://www.highcharts.com/stock/ref/#xAxis--ordinal](http://www.highcharts.com/stock/ref/#xAxis--ordinal) & [http://jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com /tree/master/samples/stock/xaxis/ordinal-false/](http://jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/stock/xaxis/ordinal-false/)

# php - 使用 PHP、Curl 和 MySQL 数据库进行网站抓取

> ID：10949161
> 
> 赞同：0
> 
> 时间：2012-06-08T12:47:32.200
> 
> 标签：php, mysql, curl

抱歉，在这里将抓取的内容存储到 MYSQL 数据库时遇到了一些麻烦。

所以我想要做的是从这个站点 [http://www.ucc.ie/modules/descriptions/page014.html][1] 保存模块代码和模块标题到 MYSQL 数据库中。我可以从站点获取内容，但我似乎无法将抓取的内容保存到数据库中。我不断收到错误“查询为空”，而查询不是。

花了一些时间做这件事，似乎无法绕过它。解决此问题的任何帮助将不胜感激。

```
<?php

//Here is a simple web scraping example using the PHP DOM that tries to get the largest      text body of a HTML document. I needed it for a spider 
//that had to show a short description for a page. It assumes that document annotation can be the largest <div>, <td> or <p> element in the //page.
//In the example I show a way to prevent a bug in the DOM as it sometimes just doesn't recognize html encoding. It seems to work if you put 
//charset meta tag right after the head tag of the document.

$host="localhost";
$user="root";
$password="";
mysql_connect($host,$user,$password) or die("could not connect to the host");
mysql_select_db("plot_a_coursedb");

$ch= curl_init();
curl_setopt ($ch, CURLOPT_URL, 'http://www.ucc.ie/modules/descriptions/page014.html' );
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch,CURLOPT_VERBOSE,1);
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.13) Gecko/20080311 Firefox/2.0.0.13');
curl_setopt ($ch, CURLOPT_REFERER, 'http://localhost:8080/extractsite/index2.html');     //just a fake referer
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch,CURLOPT_POST,0);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 20);

$html= curl_exec($ch);
$html1= curl_getinfo($ch);

//try to get page encoding as it was sent from server
if ($html1['content_type']){
$arr= explode('charset=',$html1['content_type']);
$csethdr= strtolower(trim($arr[1]));
} else {
$csethdr= false;
}

$cset= false;
$arr= array();

//This has to replace page meta tags for charset with utf-8, but it doesn't actually help(see the bug info).
if (preg_match_all('/(<meta\s*http-equiv="Content-Type"\s*content="[^;]*;
\s*charset=([^"]*?)(?:"|\;)[^>]*>)/' //merge this line
,$html,$arr,PREG_PATTERN_ORDER)){
$cset= strtolower(trim($arr[2][0]));
if ($cset!='utf-8'||$cset!=$csethdr){
    $new= str_replace($arr[2][0],'utf-8',$arr[1][0]);
    $html= str_replace($arr[1][0],$new,$html);
    $cset= $csethdr;
} else {
    $cset= false;
}

if ($cset=='utf-8'){
    $cset= false;
}
}
unset($arr);
if ($cset){
$html= iconv($cset,'utf-8',$html);
}
unset($cset);

//solve dom bug
$html=preg_replace('/<head[^>]*>/','<head><META HTTP-EQUIV="Content-Type"   CONTENT="text/html; charset=utf-8">',$html);

@$dom= new DOMDocument();
@$dom->loadHTML($html);
@$dom->preserveWhiteSpace = false;

function getMaxTextBody($dom){
$content = $dom->getElementsByTagname('div');
$content2= $dom->getElementsByTagname('td');
$content3= $dom->getElementsByTagname('p');
$content4 = $dom->getElementsByTagname('B');

$new = array();
foreach ($content as $value) {
    $new[]= $value;
    unset($value);
}
unset($content);

foreach ($content2 as $value) {
    $new[]= $value;
    unset($value);
}
unset($content2);

foreach ($content3 as $value) {
    $new[]= $value;
    unset($value);
}
unset($content3);

foreach ($content4 as $value) {
    $new[]= $value;
    unset($value);
}
unset($content4);

$maxlen= 0;
$result= '';
foreach ($new as $item)
{
    $str= $item->nodeValue;
    if (strlen($str)>$maxlen){
        $content1= $item->getElementsByTagName('div');
        $content2= $item->getElementsByTagname('td');
        $content3= $item->getElementsByTagname('p');
        $content4 = $dom->getElementsByTagname('b');

        $contentnew= array();
        foreach ($content1 as $value) {
            $contentnew[]= $value;
            unset($value);
        }
        unset($content1);

        foreach ($content2 as $value) {
            $contentnew[]= $value;
            unset($value);
        }
        unset($content2);

        foreach ($content3 as $value) {
            $contentnew[]= $value;
            unset($value);
        }
        unset($content3);

        foreach ($content4 as $value) {
            $contentnew[]= $value;
            unset($value);
        }
        unset($content4);

        // Insert data into database query
        $query = mysql_query("INSERT INTO data (div,td,p,b) VALUES ('$content1','$content2','$content3','$content4')"); 
        mysql_query($query) or die (mysql_error());

        // Close the database connection
        mysql_close();

        if (count($contentnew)==0){
            $result= $str;
        } else {
            foreach ($contentnew as $value) {
                $str1= getMaxTextBody($value);
                $str2= $value->nodeValue;
                    //let's say largest body has more than 50% of the text in its parent
                                if (strlen($str1)*2<strlen($str2)){
                    $str1= $str2;
                }
                if (strlen($str1)*2>strlen($str)&&strlen($str1)>$maxlen){
                    $result= $str1;
                } elseif (strlen($str1)>$maxlen){
                    $result= $str1;
                }
                $maxlen= strlen($result);
            }
        }
        $maxlen= strlen($result);
        unset($contnentnew);
    }
}

unset($new);
return $result;

}
print getMaxTextBody($dom);

?> 
```

下面是我创建的用于存储内容的 MYSQL 表

```
DROP TABLE IF EXISTS `data`;
CREATE TABLE `data` (
`div`  varchar(20) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`td`  varchar(20) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`p`  varchar(20) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`b`  varchar(20) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
PRIMARY KEY (`div`)
)
ENGINE=InnoDB
DEFAULT CHARACTER SET=utf8 COLLATE=utf8_unicode_ci;
} 
```

任何帮助找出我的内容没有保存到数据库的原因将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:54:14.243

在您构造 sql 查询时，您的内容变量确实为空 - 它们在上面未设置。

```
$query = mysql_query("INSERT INTO data (div,td,p,b) VALUES \
('$content1','$content2','$content3','$content4')"); 
```

我认为您可能希望将每个 $content 中的 $value 的 nodeValue 内容作为 $value 字符串放置在该 mysql 查询中（您可以使用 $value->nodeValue 访问节点的文本内容）。

例如，如果您想要一个节点的文本内容，例如示例中的这个 P 节点，当您 print_r 节点时，它看起来像这样：

```
DOMElement Object
(
[tagName] => p
[schemaTypeInfo] =>
[nodeName] => p
[nodeValue] => Students should note that all of the modules below may not 
be available to them.
[nodeType] => 1
[parentNode] => (object value omitted)
[childNodes] => (object value omitted)
[firstChild] => (object value omitted)
[lastChild] => (object value omitted)
[previousSibling] => (object value omitted)
[nextSibling] => (object value omitted)
[attributes] => (object value omitted)
[ownerDocument] => (object value omitted)
[namespaceURI] =>
[prefix] =>
[localName] => p
[baseURI] =>
[textContent] => Students should note that all of the modules below may \\
not be available to them.
) 
```

您可以看到该节点中有两个您可能感兴趣的值 - [textContent 和 nodeValue](http://www.w3schools.com/dom/prop_element_textcontent.asp)。

您可以通过执行以下操作从您的代码中访问这些：

```
 foreach ($content3 as $value) { // content3 contains the p nodes, I think?
           // let's see what the node looks like
          print_r($value); 
          // let's get hold of the text value from the node
          $mytempvariable=$value->nodeValue;
          print "CONTENT OF P NODE: \n\n$mytempvariable\n\n\n";
  } 
```

这将从所有 P 节点打印出文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:54:42.307

我认为使用 memcache 会更快。也只获取必要的 div 并将其存储在内存缓存中，并在需要时获取唯一的页面名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:55:19.390

您没有在查询中转义变量 $contentX。我怀疑您启动的查询比您想象的要复杂。

检查[http://php.net/manual/en/function.mysql-escape-string.php](http://php.net/manual/en/function.mysql-escape-string.php)了解更多信息。

更广泛地说，您应该为查询使用 PDO 扩展和准备好的语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T13:12:51.460

它没有插入`$content1`到的原因`$content4`是因为你在你的 foreach 循环之后取消了它们。所以不会插入任何值。

# jquery - 谷歌地图在 iframe nyromodal 层内的 IE8 中无法正确呈现

> ID：10949167
> 
> 赞同：0
> 
> 时间：2012-06-08T12:47:49.037
> 
> 标签：jquery, iframe, google-maps-api-3, internet-explorer-8, nyromodal

我尝试在 nyromodal iframe 层中呈现谷歌地图。

它在 Chrome 和 Firefox 中运行良好，但在 IE8 中存在一个奇怪的问题：在第一次加载时，它运行良好。然而，在我关闭图层并在同一页面上重新打开它之后，地图将呈现错误：仅主要显示灰色瓷砖，并且其所有内容将随机飞溅，例如：

![乱码地图结果](../Images/115f11ead7ed03dabb41e55fc7158058.png)

如果我清除缓存并重新加载，地图将再次工作，但只有一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:47:49.413

问题很可能在于 nyromodal 需要时间才能完全打开，而 google API 已经尝试渲染地图。因此它在清除缓存时起作用，因为在加载所有资源之前存在超时，从而允许完全打开 nyromodal 选项。

因此，为了强制超时以完全加载 nyromodal，请通过 iframe 在 iframe 中初始化地图

```
$(document).ready(function () {

 /* set up your map */

 setTimeout(
   function() {
     initalizeYourMap();
 },
 1000); 
```

});

# linux - 如何在没有 root 权限的情况下创建多分区 SD 磁盘映像？

> ID：10949169
> 
> 赞同：17
> 
> 时间：2012-06-08T12:47:49.923
> 
> 标签：linux, image, embedded

是否可以在没有 root 权限的情况下在 linux 中创建完整的 SD 映像（即没有环回挂载）？我正在寻找一种自动化嵌入式系统映像创建的方法。映像应包括特定的分区结构和格式化为 FAT 和 ext2 的分区，其中填充了来自构建系统的文件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2018-10-17T08:49:52.663

**最小可运行`sfdisk`+`mke2fs`示例`sudo`**

在这个例子中，我们将创建一个不带`sudo`or`setsuid`的映像文件，该文件包含两个 ext2 分区，每个分区都填充了来自主机目录的文件。

然后，我们将`sudo losetup`只使用挂载分区来测试 Linux 内核是否可以实际读取它们，如以下所述：[如何在 Linux 上从包含多个分区的映像文件中挂载一个分区？](https://stackoverflow.com/questions/1419489/how-to-mount-one-partition-from-an-image-file-that-contains-multiple-partitions/39675265#39675265)

有关更多详细信息，请参阅：

*   `sfdisk`：处理分区表：[https ://superuser.com/questions/332252/how-to-create-and-format-a-partition-using-a-bash-script/1132834#1132834](https://superuser.com/questions/332252/how-to-create-and-format-a-partition-using-a-bash-script/1132834#1132834)
*   `mke2fs`：处理分区的 EXT 格式：[https ://superuser.com/questions/605196/how-to-create-ext2-image-without-superuser-rights/1366762#1366762](https://superuser.com/questions/605196/how-to-create-ext2-image-without-superuser-rights/1366762#1366762)

这个例子：

```
#!/usr/bin/env bash

# Input params.
root_dir_1=root1
root_dir_2=root2
partition_file_1=part1.ext2
partition_file_2=part2.ext2
partition_size_1_megs=32
partition_size_2_megs=32
img_file=img.img
block_size=512

# Calculated params.
mega="$(echo '2^20' | bc)"
partition_size_1=$(($partition_size_1_megs * $mega))
partition_size_2=$(($partition_size_2_megs * $mega))

# Create a test directory to convert to ext2.
mkdir -p "$root_dir_1"
echo content-1 > "${root_dir_1}/file-1"
mkdir -p "$root_dir_2"
echo content-2 > "${root_dir_2}/file-2"

# Create the 2 raw ext2 images.
rm -f "$partition_file_1"
mke2fs \
  -d "$root_dir_1" \
  -r 1 \
  -N 0 \
  -m 5 \
  -L '' \
  -O ^64bit \
  "$partition_file_1" \
  "${partition_size_1_megs}M" \
;
rm -f "$partition_file_2"
mke2fs \
  -d "$root_dir_2" \
  -r 1 \
  -N 0 \
  -m 5 \
  -L '' \
  -O ^64bit \
  "$partition_file_2" \
  "${partition_size_2_megs}M" \
;

# Default offset according to
part_table_offset=$((2**20))
cur_offset=0
bs=1024
dd if=/dev/zero of="$img_file" bs="$bs" count=$((($part_table_offset + $partition_size_1 + $partition_size_2)/$bs)) skip="$(($cur_offset/$bs))"
printf "
type=83, size=$(($partition_size_1/$block_size))
type=83, size=$(($partition_size_2/$block_size))
" | sfdisk "$img_file"
cur_offset=$(($cur_offset + $part_table_offset))
# TODO: can we prevent this and use mke2fs directly on the image at an offset?
# Tried -E offset= but could not get it to work.
dd if="$partition_file_1" of="$img_file" bs="$bs" seek="$(($cur_offset/$bs))"
cur_offset=$(($cur_offset + $partition_size_1))
rm "$partition_file_1"
dd if="$partition_file_2" of="$img_file" bs="$bs" seek="$(($cur_offset/$bs))"
cur_offset=$(($cur_offset + $partition_size_2))
rm "$partition_file_2"

# Test the ext2 by mounting it with sudo.
# sudo is only used for testing, the image is completely ready at this point.

# losetup automation functions from:
# https://stackoverflow.com/questions/1419489/how-to-mount-one-partition-from-an-image-file-that-contains-multiple-partitions/39675265#39675265
loop-mount-partitions() (
  set -e
  img="$1"
  dev="$(sudo losetup --show -f -P "$img")"
  echo "$dev" | sed -E 's/.*[^[:digit:]]([[:digit:]]+$)/\1/g'
  for part in "${dev}p"*; do
    if [ "$part" = "${dev}p*" ]; then
      # Single partition image.
      part="${dev}"
    fi
    dst="/mnt/$(basename "$part")"
    echo "$dst" 1>&2
    sudo mkdir -p "$dst"
    sudo mount "$part" "$dst"
  done
)
loop-unmount-partitions() (
  set -e
  for loop_id in "$@"; do
    dev="/dev/loop${loop_id}"
    for part in "${dev}p"*; do
      if [ "$part" = "${dev}p*" ]; then
        part="${dev}"
      fi
      dst="/mnt/$(basename "$part")"
      sudo umount "$dst"
    done
    sudo losetup -d "$dev"
  done
)

loop_id="$(loop-mount-partitions "$img_file")"
sudo cmp /mnt/loop0p1/file-1 "${root_dir_1}/file-1"
sudo cmp /mnt/loop0p2/file-2 "${root_dir_2}/file-2"
loop-unmount-partitions "$loop_id" 
```

在 Ubuntu 18.04 上测试。[GitHub 上游](https://github.com/cirosantilli/linux-cheat/blob/77dd7baa68dac3534a50f8a084f732f378113c59/mke2fs-multi.sh).

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-16T12:10:03.413

you might want to look at [genextfs](http://genext2fs.sourceforge.net/), that creates an ext2 filesystem in a regular file without any sort of mounting.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-07-13T18:00:28.123

我遇到了这个问题，找不到可行的解决方案，所以我写了这个我们在[这里](https://github.com/braincorp/partfs)开源的实用程序。

从自述文件：

```
$ dd if=/dev/zero of=disk.image bs=1M count=4
4+0 records in
4+0 records out
4194304 bytes (4.2 MB, 4.0 MiB) copied, 0.00470867 s, 891 MB/s
$ parted --script disk.image \
    mktable msdos mkpart primary 2048s 100% set 1 boot on
$ mkdir mntdir
$ partfs -o dev=disk.image mntdir
$ mkfs.ext4 mntdir/p1
mke2fs 1.42.13 (17-May-2015)
Creating filesystem with 3072 1k blocks and 768 inodes

Allocating group tables: done
Writing inode tables: done
Creating journal (1024 blocks): done
Writing superblocks and filesystem accounting information: done

$ fusermount -u mntdir 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-28T18:47:58.590

我正在尝试做同样的事情。我的第一次尝试使用了环回块设备，但我发现了需要环回的两个步骤的变通方法。

## 带环回的步骤

这就是我正在做的事情（ $1 是图像文件名，$2 是文件大小）：

1.  创建归零磁盘映像文件`dd if=/dev/zero of=$1 bs=512 count=$(($2/512))`
2.  创建分区表`parted -s $1 mklabel msdos`
3.  创建分区`parted -s $1 "mkpart primary 0% 100%"`
4.  将分区附加到循环`sudo losetup --find $1 --offset $OFFSET_TO_PARTITION_BYTES`
5.  使用 mkfs.ext4 制作文件系统`mkfs.ext4 -I 128 -L BOOT -b 2048 -O ^has_journal /dev/loop0 $SIZE_IN_2048_BLOCKS`
6.  挂载 /dev/loop0

使用环回是因为

*   在第 4 步和第 5 步中，mkfs 没有偏移选项，因此使用 losttup 来解决该问题
*   在第 6 步中，mount 允许使用操作系统的 ext4 驱动程序

## 环回解决方法

第 4 步和第 5 步的糟糕解决方法：

*   xmount --in dd --out vdi disk.img mnt/
*   vdfuse -f mnt/disk.vdi -r ./mnt2
*   ./mnt2 现在将有两个文件：EntireDisk 和 Partition1
*   将 mkfs.ext4 指向 ./mnt2/Partition1

步骤 6 的变通解决方案：

*   按照步骤 5 的所有步骤解决
*   使用 fuseext2 挂载 ./mnt2/Partition1

## 警告

警告：他们的文档中没有宣传 ext4 支持，并且尝试安装时会出现警告：

```
This is experimental code, opening rw a real file system could be
dangerous for your data. Please add "-o ro" if you want to open the file
system image in read-only mode, or "-o rw+" if you accept the risk to test
this module 
```

### 更新

vdfuse 应该能够在没有 xmount 的帮助下挂载原始映像，但是有一个错误忽略了 RAW 选项。

我在这里用补丁追踪并修复了这个错误：

[https://bugs.launchpad.net/ubuntu/+source/virtualbox-ose/+bug/1019075](https://bugs.launchpad.net/ubuntu/+source/virtualbox-ose/+bug/1019075)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-03-22T13:21:31.273

是的，guestfish 可以做到这一点：

```
$ cat << END > extlinux.conf
> default linux
> timeout 0
>
> label linux
> kernel /vmlinuz
> append initrd=/initrd.img root=/dev/vda1 rw console=ttyS0
END
$ guestfish -N debian-unstable.img=disk:2G -- \
    part-disk /dev/sda mbr : \
    part-set-bootable /dev/sda 1 true : \
    mkfs ext2 /dev/sda1 : mount /dev/sda1 / : \
    tar-in debian-unstable.tar / : \
    extlinux / : \
    copy-in extlinux.conf / 
```

结果将是`debian-unstable.img`一个 ext2 分区，其中包含 tarball 中的所有文件，`debian-unstable.tar`并且整个东西都可以使用 extlinux 启动。您可以使用 qemu 验证磁盘映像。

# maven - maven-site-plugin 不使用 javadocs 生成 apidocs 文件夹

> ID：10949171
> 
> 赞同：2
> 
> 时间：2012-06-08T12:47:58.550
> 
> 标签：maven, javadoc

我继承了一个项目，该项目应该构建 javadoc 文件并将它们放在站点目录中。这没有被完成。我查看了所有可以找到的示例，但无法弄清楚配置在哪里损坏。

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-site-plugin</artifactId>
            <version>3.0</version>
            <executions>
                <execution>
                    <phase>prepare-package</phase>
                    <goals>
                        <goal>site</goal>
                    </goals>
                    <configuration>
                        <reportPlugins>
                            <plugin>
                                <groupId>org.apache.maven.plugins</groupId>
                                <artifactId>maven-javadoc-plugin</artifactId>
                                <version>2.8</version>
                            </plugin>
                        </reportPlugins>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

非常感谢任何和所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:27:53.527

您已将 maven 站点插件的`site`目标绑定到`prepare-package`阶段。您已`javadoc`在此插件配置中配置生成。

因此，如果您运行 Maven 的默认生命周期目标，`mvn package`或者`mvn install`您应该使用 javadocs 获取站点报告。

如果您运行`mvn site`，它将跳过`prepare-package`您的插件配置绑定到的阶段，因此不会生成 javadoc。

# java - 设置光标在 JTextField 上的水平位置

> ID：10949180
> 
> 赞同：3
> 
> 时间：2012-06-08T12:48:32.853
> 
> 标签：java, swing, jtextfield

我有一个 Swing 应用程序，用户必须在其中输入一些信息。我需要光标默认情况下位于 JtextField 的第 10 位：我尝试了这两种方法，但没有一个对我有用：

```
JTextField text = new JTextField("          ", 50);
text.setHorizontalAlignment(10) 
```

我试过的另一个是

```
JTextField text = new JTextField("          ", 50);
text.setCaretPosition(10) 
```

真的有办法做我正在尝试的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T12:53:45.770

试试这个：

```
text.getCaret().setDot(10); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T12:53:44.863

问题不是来自包含空 String 的 JTextField 吗？

如果你想让光标在一个设定的位置，这个位置应该是可达的，即有一个包含 10 个空格的字符串。

PS：我认为`setCaretPosition`这里是正确的方法。

# java - Java ANT：build.xml 的问题

> ID：10949181
> 
> 赞同：0
> 
> 时间：2012-06-08T12:48:36.457
> 
> 标签：java, ant, dependencies, classnotfoundexception

我想知道是否有人可以帮助我解决一个严重的问题...我需要使用大量依赖项从项目创建一个 jar...问题是：我自己编写的 build.xml 文件无法正常工作。更具体地说，它运行没有任何问题，只是一个警告：

```
Buildfile: C:\Users\Alexis Fasquel\workspace\FirstEditServer\build.xml
clean:
   [delete] Deleting directory C:\Users\Alexis Fasquel\workspace\FirstEditServer\bin
   [delete] Deleting directory C:\Users\Alexis Fasquel\workspace\FirstEditServer\dist
makedir:
    [mkdir] Created dir: C:\Users\Alexis Fasquel\workspace\FirstEditServer\bin
    [mkdir] Created dir: C:\Users\Alexis Fasquel\workspace\FirstEditServer\dist
compile:
    [javac] C:\Users\Alexis Fasquel\workspace\FirstEditServer\build.xml:101: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds
    [javac] Compiling 14 source files to C:\Users\Alexis Fasquel\workspace\FirstEditServer\bin
jar:
      [jar] Building jar: C:\Users\Alexis Fasquel\workspace\FirstEditServer\dist\firstEditServer.jar
main:
BUILD SUCCESSFUL
Total time: 1 second 
```

但不幸的是，我仍然得到一些 classNotFoundDefError

* * *

*我没有打印完整的跟踪，因为它是我试图实例化的第一个类，但没有找到......所以我猜没有任何工作......但它是：*

```
Exception in thread "main" java.lang.NoClassDefFoundError: gate/util/GateExcept
on
        at java.lang.Class.getDeclaredMethods0(Native Method)
        at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
        at java.lang.Class.getMethod0(Unknown Source)
        at java.lang.Class.getMethod(Unknown Source)
        at sun.launcher.LauncherHelper.getMainMethod(Unknown Source)
        at sun.launcher.LauncherHelper.checkAndLoadMain(Unknown Source)
Caused by: java.lang.ClassNotFoundException: gate.util.GateException
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        ... 6 more 
```

**有我的 build.xml 文件...有人可以看看它，也许会发现我的错误是什么？**

```
<?xml version="1.0"?>
<project name="Ant-Test" default="main" basedir=".">
    <!-- Sets variables which can later be used. -->
    <!-- The value of a property is accessed via ${} -->
    <property name="src.dir" location="src" />
    <property name="bin.dir" location="bin" />
    <property name="gate.dir" location="gate" />
    <property name="virtuoso.dir" location="virtuoso" />
    <property name="recommendation.dir" location="recommendation" />
    <property name="dist.dir" location="dist" />

    <path id="bin.classpath">
        <fileset dir="${virtuoso.dir}">
            <include name="openrdf-sesame-2.6.5-onejar.jar" />
            <include name="slf4j-api-1.5.0.jar" />
            <include name="slf4j-jdk14-1.5.0.jar" />
            <include name="virt_sesame2.jar" />
            <include name="virtjdbc3.jar" />
        </fileset>

        <fileset dir="${gate.dir}">
            <include name="plugins\Gazetteer_LKB\Gazetteer_LKB.jar" />
            <include name="lib\gate.jar" />
            <include name="lib\log4j.jar" />
            <include name="lib\commons-io.jar" />
            <include name="plugins\Tagger_Framework\TaggerFramework.jar" />
            <include name="lib\ant-contrib.jar" />
            <include name="lib\ant-launcher.jar" />
            <include name="lib\ant.jar" />
            <include name="lib\aopalliance.jar" />
            <include name="lib\apache-mime4j-core.jar" />
            <include name="lib\apache-mime4j-dom.jar" />
            <include name="lib\bcmail-jdk15.jar" />
            <include name="lib\bcprov-jdk15.jar" />
            <include name="lib\commons-codec.jar" />
            <include name="lib\commons-compress.jar" />
            <include name="lib\commons-lang.jar" />
            <include name="lib\commons-logging.jar" />
            <include name="lib\dom4j.jar" />
            <include name="lib\fontbox.jar" />
            <include name="lib\gate-asm.jar" />
            <include name="lib\gate-compiler-jdt.jar" />
            <include name="lib\lucene-core.jar" />
            <include name="lib\metadata-extractor.jar" />
            <include name="lib\nekohtml.jar" />
            <include name="lib\pdfbox.jar" />
            <include name="lib\poi-ooxml-schemas.jar" />
            <include name="lib\poi-ooxml.jar" />
            <include name="lib\poi-scratchpad.jar" />
            <include name="lib\poi.jar" />
            <include name="lib\spring-aop.jar" />
            <include name="lib\spring-beans.jar" />
            <include name="lib\spring-core.jar" />
            <include name="lib\tika-core.jar" />
            <include name="lib\tika-parsers.jar" />
            <include name="lib\wstx-lgpl.jar" />
            <include name="lib\xercesImpl.jar" />
            <include name="lib\xmlbeans.jar" />
            <include name="lib\xmlunit.jar" />
            <include name="lib\xpp3.jar" />
            <include name="lib\xstream.jar" />
            <include name="lib\ivy.jar" />
            <include name="lib\java-getopt.jar" />
            <include name="lib\java2html.jar" />
            <include name="lib\javacc.jar" />
            <include name="lib\jaxen.jar" />
            <include name="lib\jdom.jar" />
            <include name="lib\jempbox.jar" />
            <include name="lib\junit.jar" />
            <include name="plugins\Gazetteer_LKB\lib\commons-cli-1.1.jar" />
            <include name="plugins\Gazetteer_LKB\lib\commons-collections-3.2.1.jar" />
            <include name="plugins\Gazetteer_LKB\lib\commons-httpclient-3.1.jar" />
            <include name="plugins\Gazetteer_LKB\lib\kim-api-3.0-RC5.jar" />
            <include name="plugins\Gazetteer_LKB\lib\kim-util-3.0-RC5.jar" />
            <include name="plugins\Gazetteer_LKB\lib\owlim-lite-4.3.jar" />
            <include name="plugins\Gazetteer_LKB\lib\trove4j-2.0.2.jar" />
            <include name="plugins\Gazetteer_LKB\lib\openrdf-sesame-2.6.3-onejar.jar" />
            <include name="plugins\Gazetteer_LKB\lib\slf4j-api-1.5.11.jar" />
            <include name="plugins\Gazetteer_LKB\lib\slf4j-log4j12-1.5.11.jar" />
        </fileset>

        <fileset dir="${recommendation.dir}">
            <include name="simmetrics_jar_v1_6_2_d07_02_07.jar" />
        </fileset>
    </path>

    <!-- Deletes the existing bin, docs and dist directory-->
    <target name="clean">
        <delete dir="${bin.dir}" />
        <delete dir="${dist.dir}" />
    </target>

    <!-- Creates the  bin and dist directory-->
    <target name="makedir">
        <mkdir dir="${bin.dir}" />
        <mkdir dir="${dist.dir}" />
    </target>

    <!-- Compiles the java code (including the usage of library for JUnit -->
    <target name="compile" depends="clean, makedir">
        <javac srcdir="${src.dir}" destdir="${bin.dir}" classpathref="bin.classpath">
        </javac>

    </target>

    <!--Creates the deployable jar file  -->
    <target name="jar" depends="compile">
        <jar destfile="${dist.dir}\firstEditServer.jar" basedir="${bin.dir}">
            <manifest>
                <attribute name="Main-Class" value="com.firstedit.main.Main" />
            </manifest>
        </jar>
    </target>

    <target name="main" depends="compile, jar">
        <description>Main target</description>
    </target>

</project> 
```

如您所见，GateException 确实在gate.jar 中...

![在此处输入图像描述](../Images/79efe92385386bc5960fd37559baaae6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:35:58.953

假设它没有找到的类在 jar 文件 lib\gate.jar 中，我会说正在发生的事情是您正在从项目的源代码构建 jar (firstEditServer.jar) 文件并且就这些。为了执行该 jar，您还需要确保 lib... 目录中的所有 jar 文件也在类路径中。

现在，如果您想要构建*一个包含库 jar 中所有类*的单个 jar 文件，那么您必须稍微不同地构建您的 jar 文件。您不能构建包含其他 jar 的可执行 jar（具有 Main-Class 属性的）。标准类加载器不会在一个 jar 中查找其他 jar 文件。因此，您需要将库 jars 类扩展*为*您的最终 jar。

Ant 使用类似下面的东西为此提供支持。zipgroupfileset是一项任务，它将**获取**jar 文件列表、展开它们并将类本身包含到目标 jar 中。我过滤掉 manifest.mf 和属性文件，这样它们就不会与我自己的文件冲突（例如库 jar 中的 log4j.properties 文件）。

这将创建一个包含所有 lib jar 的所有内容的 jar。清单文件将发生冲突，最后看到的清单文件获胜。

```
<jar destfile='${build.dir}/lib-jars.jar'>
   <zipgroupfileset dir='${lib.dir}'>
     <include name='**/*.jar'/>
   </zipgroupfileset>
</jar> 
```

此处使用的带有单个 jar的**zipfileset可以从所需的一个 jar 中过滤掉任何内容。**这会删除 MANIFEST.MF 文件，但也可能会删除带有附加**排除**标记的其他文件。

```
<jar destfile='${jar.file}' basedir='${classes.dir}'>
  <zipfileset src='${build.dir}/lib-jars.jar'>
    <exclude name="META-INF/MANIFEST.MF"/>
  </zipfileset>
  <manifest>
    <attribute name="Built-By" value="${user.name}"/>
    <attribute name="Main-Class" value="${main.class}"/>
    <section name="common">
      <attribute name="Specification-Title" value="${project.title}"/>
      <attribute name="Specification-Version" value="${release.version}"/>
      <attribute name="Specification-Vendor" value="${vendor}"/>
      <attribute name="Implementation-Title" value="${project.title}"/>
      <attribute name="Implementation-Version" value="${release.version} ${TODAY}"/> 
      <attribute name="Implementation-Vendor" value="${vendor}"/>
    </section>
  </manifest>      
</jar> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T01:56:11.883

如果我错了，请纠正我，但你没有使用 ANT 运行这个 jar 是吗？ANT 仅用于构建 jar 文件对吗？

有两种方法可以启动你的 java 程序

1.  java -jar myapp.jar
2.  java -cp myapp.jar MyAppClass

第一个要求您设置“Main-Class”和“Class-Path”清单条目。第二个要求您明确列出每个依赖项。

我怀疑您正在尝试前者，但忘记包含类路径.....以下问题也有同样的问题。它概述了使用 ANT [manifestclasspath](http://ant.apache.org/manual/Tasks/manifestclasspath.html)任务来简化清单中的类路径设置的解决方案：

[在使用 Ant 编译的文件中找不到主类](https://stackoverflow.com/questions/3143567/cannot-find-main-class-in-file-compiled-with-ant/3144290#3144290)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T15:29:42.613

这不是一个答案，但评论太长了，所以......

您可以执行以下步骤：

1.  添加简单的主要方法`gate.util.GateExcept`

```
public static void main( final String[] args ) {
    System.out.println( GateExcept.class.getName() );
} 
```

1.  再次构建 jar（让它调用 myjar.jar）

2.  运行这个命令

    `java -cp myjar.jar gate.util.GateExcept`

3.  如果效果很好，请尝试（可执行 jar）

    `java -jar myjar.jar`

在我看来，在屏幕截图上你有`gate.util.GateException`，但在异常堆栈中只有`gate.util.GateExcep`（但可能这只是 SO 问题）。

让我知道这是否有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T15:13:25.797

确保您的 lib 文件夹在您的类路径中。我有类似的事情我自己做的就像你一样。构建没问题，因为 ant 找到了罐子。如果您正在构建一个 jar，请确保您的清单将这些 jar 添加到清单文件中的类路径中。有一个清单选项，您可以让 ant 将清单文件添加到您的 jar 中。如果没有别的，在命令行上运行您的程序并使用 -classpath 选项指向您的 lib 文件夹。我认为你的问题是围绕你的类路径，我已经打了很多次这场战斗。

# jquery - jquery .each 仅适用于第一个元素

> ID：10949187
> 
> 赞同：6
> 
> 时间：2012-06-08T12:49:03.010
> 
> 标签：jquery, html, loops, indexing, each

我无法理解 jquery .each。我有以下代码：

```
$('#testDiv').each(function(index, domEle){    
    $(this).text(index);
}); 
```

和以下 HTML

```
<div id="p18">
    <div class="inner">
        <span>...</span>
        <p class="right">...</p>
        <div id="testDiv"></div>
    </div>
</div>
<div id="p19">
    <div class="inner">
        <span>...</span>
        <p class="right">...</p>
        <div id="testDiv"></div>
    </div>
</div>
<div id="p20">
    <div class="inner">
        <span>...</span>
        <p class="right">...</p>
        <div id="testDiv"></div>
    </div>
</div> 
```

当脚本运行时，它仅适用于第一个 testDiv，因为它正确地将文本设置为 0，但其他 testDiv。

我的总体目标是编写一个脚本，根据另一个 div 的高度设置 div 的高度。高度不同，所以我认为循环结构是要走的路（除非我弄错了？）

我在使用 jq 代码时做错了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-08T12:50:51.743

你不能`#id`对不同的元素使用相同的。尝试重命名其余的，你会得到你想要的结果

或者这样做（无需添加任何类即可工作 - 更简洁的代码）

```
$('.inner div').each(function(index, domEle){    
    $(this).text(index);
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-08T12:51:13.120

`id`选择器最多返回一个元素。

**您永远不应该有多个具有相同 id 的元素。**这是一个无效的 HTML

这将起作用，但您应该修复 HTML：

```
$('div[id="testDiv"]')... 
```

你真正应该做的是：

```
<div id="p18">
    <div class="inner">
        <span>...</span>
        <p class="right">...</p>
        <div class="testDiv"></div>
    </div>
</div>
<div id="p19">
    <div class="inner">
        <span>...</span>
        <p class="right">...</p>
        <div class="testDiv"></div>
    </div>
</div> 
```

然后按班级选择：

```
$('.testDiv')... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-08T12:50:39.153

这不是`each`方法的问题。您为几个元素指定了相同`id`的值，这是不受支持的。

改用一个类，你可以找到所有的元素。

演示：http: [//jsfiddle.net/Guffa/xaL4n/](http://jsfiddle.net/Guffa/xaL4n/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T12:52:23.933

您的 html 无效。ID 必须是唯一的。你应该`id="testDiv"`改为`class="testDiv"`

**HTML**：

```
<div id="p20">
    <div class="inner">
        <span>...</span>
        <p class="right">...</p>
        <div class="testDiv"></div>
    </div>
</div> 
```

**Javascript**：

```
$('.testDiv').each(function(index, domEle){    
    $(this).text(index);
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-08T12:52:24.340

您不能在 html 页面中指定相同的 div id。

```
<div id="testDiv"></div> 
```

相反，尝试

```
<div class="testDiv"></div> 
```

你的功能应该看起来像

```
$('.testDiv').each(function(index, domEle){    
$(this).text(index); 
```

});

# input - 我需要与此类似的日历

> ID：10949193
> 
> 赞同：0
> 
> 时间：2012-06-08T12:49:30.090
> 
> 标签：input, calendar

我需要一个与这个功能相同的日历：

[日历](http://www.luk3.yoyo.pl/cal/)

我想在输入框中输入日期，并通过单击单个值（月、日、年）更改日期，我可以从下拉列表中选择日期。

有谁知道类似的东西？

由于某种原因，我无法使用此日历

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:49:11.820

新版本可在 [http://www.hotscripts.com/listing/convenient-javascript-calendar-date-picker/](http://www.hotscripts.com/listing/convenient-javascript-calendar-date-picker/)

# ajax - 发送 XML 文件作为对 ajax 的响应

> ID：10949202
> 
> 赞同：0
> 
> 时间：2012-06-08T12:49:49.467
> 
> 标签：ajax, jakarta-ee, servlets

我已经从数据库创建了一个 xml 文件。我需要将此 xml 文件作为响应从我的 servlet 发送到 ajax。我检查了网络上的各种论坛和博客，发现响应 xml 是在调用 servlet 时创建的。在这种情况下，我的服务器中已经有一个 xml 文件，我只需要将它作为对 ajax 的响应发送。

帮助 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:56:36.093

在您的 doGet() 或 doPost() 方法中，确保在将任何内容写入响应**之前设置内容类型。**像这样...

```
PrintWriter pr = response.getWriter();
response.setContentType("application/xml");
//parse your data to XML
String xml = parseXml(root);
pr.write(xml); 
```

*注意：内容类型`"text/xml"`也应该是有效的。像 JQuery 和 Prototype 这样的框架都支持。*

# ruby-on-rails-3 - Rails：使用 has_many 关系验证 simple_form（例如 Person、Phone）

> ID：10949205
> 
> 赞同：1
> 
> 时间：2012-06-08T12:50:01.423
> 
> 标签：ruby-on-rails-3, validation, nested-forms, nested-attributes, simple-form

我正在努力使用`simple_form`. 您将能够从下面的模型中看到一个`Person`可以有很多个`Phone`，所需的行为是显示任何现有数字的编辑字段加上一个额外的应为新数字，如果这个新数字不是由用户然后它只是忽略而不是保存在数据库中。我也想用`Email`.

当登陆 /people/:id/edit 页面时，这个空白字段被过早地验证并在提交之前在表单上产生可见的错误。访问 /people/:id/new 页面时不会这样做；我假设这是因为`new_record?`在新页面上为用户模型返回 true？在阅读类似的帖子时，我在模型上添加`on: :save`了一个参数，尽管这只是允许空白记录进入数据库，也许是因为当用户模型保存记录时这不相关？`validates``Phone`

```
class Person < ActiveRecord::Base
  belongs_to :company
  has_many :phones, :as => :phoneable
  has_many :emails, :as => :emailable
  has_many :addresses, :as => :addressable
  attr_accessible :first_name, :job_title, :last_name, :prefix, :phones_attributes, :emails_attributes, :addresses_attributes, :company_id
  accepts_nested_attributes_for :phones, allow_destroy: true, reject_if: proc { |attributes| attributes['number'].blank? }
  accepts_nested_attributes_for :emails, allow_destroy: true, reject_if: proc { |attributes| attributes['email'].blank? }
  accepts_nested_attributes_for :addresses, allow_destroy: true, reject_if: :all_blank
  validates :first_name, :last_name, presence: true

  def to_s
    "#{first_name} #{last_name}"
  end
end

class Phone < ActiveRecord::Base
  belongs_to :phoneable, polymorphic: true
  attr_accessible :number, :phone_type
  validates :number, :phone_type, presence: true, on: :save  # as suggested in a similar post, just allows blank records into database.
  def to_s
    "#{phone_type}: #{number}"
  end
end 
```

使用 new 和 edit 控制器，我正在为这些模型中的每一个创建一个新实例，以便它们显示在表单上。作为 cancan 的一部分`@person`加载到控制器中。`load_and_authorize_resource`

```
def new
  @person.phones << Phone.new
  @person.emails << Email.new
end 
```

这是表单的部分视图：

```
<%= simple_form_for @person, :html => { :class => 'form-horizontal' } do |f| %>
  <fieldset id="<%= controller.action_name.capitalize %>_person">
    <legend><%= controller.action_name.capitalize %> Person</legend>

    <%= f.input :prefix %>
    <%= f.input :first_name %>
    <%= f.input :last_name %>
    <%= f.input :job_title %>
    <%= f.association :company, :prompt => "Select associated company..."  %>

    <%= f.simple_fields_for :phones do |phone| %>
      <%= phone.input :phone_type, :collection => %w(Work Home Mobile Fax Other), :default => "Work" %>
      <%= phone.input :number %>
    <% end %>

    <%= f.simple_fields_for :emails do |email| %>
      <%= email.input :email_type, :collection => %w(Work Home Other), :default => "Work" %>
      <%= email.input :email %>
    <% end %>

    <div class="form-actions">
      <%= f.submit nil, :class => 'btn btn-primary' %>
      <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                  people_path, :class => 'btn' %>
    </div>    
  </fieldset>
<% end %> 
```

非常感谢您提前提供的任何帮助:-)

# sql - 计入 LEFT JOIN 和 WHERE

> ID：10949208
> 
> 赞同：9
> 
> 时间：2012-06-08T12:50:15.670
> 
> 标签：sql, select, group-by, left-join

我有一个左连接的小问题，我想要一个设计列表，并且在每个设计上我想显示每个设计有多少评论。

我正在使用 LEFT JOIN

```
SELECT ds.*, count(com.comment) AS countcom FROM tdic_designs ds 
LEFT JOIN tdic_comments com ON (com.design_id = ds.id) 
WHERE ds.approved = 1 AND ds.hidden = 0 AND com.approved = 1 
GROUP BY ds.id 
ORDER BY ds.date_added ASC 
```

但这不起作用，因为它只显示一个有 1 条评论的设计，但我在表格中有两个设计，第二个设计没有评论。

如果我将 SQL 更改为

```
SELECT ds.*, count(com.comment) AS countcom FROM tdic_designs ds 
LEFT JOIN tdic_comments com ON (com.design_id = ds.id) 
GROUP BY ds.id, com.approved, ds.approved 
ORDER BY ds.date_added ASC 
```

那就是删除 WHERE 子句。但这很糟糕，因为它会选择尚未批准的设计和评论。

我错过了什么/做错了什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-08T12:56:57.860

将评论的所有过滤器移至`ON`子句：

```
SELECT  ds.*, COUNT(com.design_id) AS countcom
FROM    tdic_designs ds
LEFT JOIN
        tdic_comments com
ON      com.design_id = ds.id
        AND com.approved = 1 
WHERE   ds.approved = 1
        AND ds.hidden = 0
GROUP BY
        ds.id
ORDER BY
        ds.date_added ASC 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T12:57:29.637

当您使用该`WHERE`子句时，这些限制将应用于`left join`s 提供的行。因此，如果某些行不符合限制条件，则会删除它们。

您需要做的是将这些限制放在`ON`子句中，它应该可以工作，所以如果它不起作用，它会显示`NULL`而不是删除该行。

像这样的东西：

```
SELECT ds.id, count(com.comment) AS countcom
FROM tdic_designs ds
LEFT JOIN tdic_comments com ON (com.design_id = ds.id) AND ds.approved = 1 AND ds.hidden = 0 AND com.approved = 1
GROUP BY ds.id
ORDER BY ds.date_added ASC 
```

* * *

另一个问题是`ds.*`在`SELECT`只有`ds.id`.`group BY`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T13:04:00.320

问题是，当您包含`com.approved = 1`在 WHERE 子句中时，它会过滤掉所有存在`com.approved`的`NULL`行——这意味着在外部表中找不到匹配项的所有行。

正如其他人所建议的那样，您可以通过将该条件移至`ON`子句来解决此问题，但我不太喜欢这样，因为它不是连接条件。

我会将外部表上的过滤器移动到内联视图中

```
SELECT ds.*, count(com.comment) AS countcom FROM tdic_designs ds 
LEFT JOIN (SELECT * FROM tdic_comments com WHERE com.approved = 1) com
ON (com.design_id = ds.id) 
WHERE ds.approved = 1 AND ds.hidden = 0 
GROUP BY ds.id 
ORDER BY ds.date_added ASC 
```

# wordpress - Wordpress ajax 联系表单不返回数据

> ID：10949211
> 
> 赞同：0
> 
> 时间：2012-06-08T12:50:32.357
> 
> 标签：wordpress, jquery

我正在制作一个 WordPress 主题，每个帖子都有一个联系表格。联系表格将收集有关访问者的信息并向站点管理员发送邮件。它还将向访问者发送一封电子邮件，其中包含可下载 PDF 的链接（此代码尚未完成）。

我遇到的问题是处理 ajax 表单的 php 函数没有响应。它只返回 -1（无属性）。但我得到一个状态码 200 OK。

我在 MAMP Pro OSX 和 DynDNS 上运行开发服务器。

**这是我在functions.php中的PHP**

```
function ajax_contact() {

  if(!empty($_POST)) {
  $name = $_POST['name'];
  $company = $_POST['company'];
  $mail = $_POST['mail'];
  $admin_mail = get_bloginfo('admin_email');
  $error = "";
  if(!$name) {
      $error .= "Please tell us your name<br/>";
  }
  if(!$company) {
      $error .= "Please tell us your company<br/>";
  }
  if(!$mail) {
      $error .= "Please tell us your E-Mail address<br/>";
  }

  if(empty($error)) {
      $subject = "New download notification";
      $message = "You've received a new download notification. \n\n
          Name: ".$name."\n
          Company: ".$company."\n
          Mail: ".$mail."\n";

      // Send a mail to the admin with the contact info.    
      $send_mail = wp_mail($admin_mail, $subject, $message);

      // Send mail to visitor with the download link.

      if($send_mail) {
      echo "sent";
      die();
      }

  } else {
      echo "error: " . $error;
      die();
    }
  }
}

add_action('wp_ajax_nopriv_ajax_contact', 'ajax_contact');
add_action('wp_ajax_ajax_contact','ajax_contact'); 
```

**这是javascript代码**

```
 function sendForm(formId, postId, str)
{

    console.log("formId: " + formId);
    console.log("formId: " + postId);
    console.log("str: " + str);

    $.ajax({
        type: "POST",
        url: "../wp-admin/admin-ajax.php",
        action: "ajax_contact",
        data: str,
        success: function(data) {

            $("#" + formId).ajaxComplete(function(event, request, settings){

            if(data == 'sent') {
                $("#" + formId).find(".success").fadeIn("slow");
                }
                else {
                result = data;
                $("#" + formId).siblings(".success").html(result);
                }
            });

        }
    });

} 
```

***这是实际的表格（我在同一页面上有多个表格）***

```
<form name="form-<?php the_ID(); ?>" id="form-<?php the_ID(); ?>"/>
    Name <br/> 
    <input type="text" name="name" value=""/><br />
    Company / Organisation <br/> 
    <input type="text" name="company" value=""/><br />
    Email <br/> 
    <input type="text" name="mail" value=""/><br />

    <input type="hidden" name="postId" value="<?php the_ID(); ?>">

    <input type="submit" value="submit" class="requestbutton" id="requestButton-<?php the_ID(); ?>" rel="<?php the_ID(); ?>"/>
  </form> 
```

**编辑：更改了 ajax 操作名称，问题仍然存在**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:31:27.457

你的 AJAX不`action:`应该是`contact_form``ajax_contact`

# java - 远程运行 Java 项目

> ID：10949224
> 
> 赞同：1
> 
> 时间：2012-06-08T12:51:32.123
> 
> 标签：java, eclipse, build-automation

我有这个新项目在工作。我们正在为该项目使用 Eclipse。有两种运行配置，服务器和客户端。我必须独立启动服务器和客户端，并使用客户端连接到服务器。现在，碰巧这必须在 Windows 和 Linux 上完成。（四种可能的组合：WS-LC、WC-LS、WS-WC、LS-LC，其中 W-windows、L-linux、C-client 和 S-server）

我的机器上有 Linux（运行 Eclipse）并在 VM 上运行 Windows。有没有办法让 Eclipse 在 VM 中启动应用程序？

我知道我必须在本地将应用程序构建到共享文件夹并向 Windows 发送启动命令（使用 openssh？，不确定）。在这种情况下使用的最佳实践是什么。

**编辑：**我需要在开发过程中使用它来测试我对代码的更改。同一个应用程序同时提供客户端和服务器。（是的，可怕，我知道：X）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:25:50.487

Eclipse 具有远程服务器的集成点，请查看“tomcat 配置”以了解它如何与一台远程服务器集成的示例。

您的应用程序是否可以使用现有的服务器集成解决方案在很大程度上取决于不存在的细节。如果您想从远程机器上实际启动一个独立的 Java 进程，您通常需要一个程序来捕获请求并启动该进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T14:22:37.633

您可以使用 MBean 接口标准将服务器函数发布为 JMX Bean。然后使用 JMX 控制台远程连接到服务器 JVM 并启动应用程序。

# linux - php网站+linux的独立文件服务器

> ID：10949229
> 
> 赞同：0
> 
> 时间：2012-06-08T12:51:37.807
> 
> 标签：linux, php-5.3

我的网站有一台 linux 服务器，其中包含 php 代码、数据库和文件。

最终用户正在为他们的个人任务上传和下载文件。我的网站运行良好，但随着网站的发展，这些文件量将增加，因此我的网络服务器将超载。

所以我想对文件使用单独的服务器，这样可以减少 1 个网络服务器的负担，文件将被下载并上传到另一台服务器上。

谁能建议我实现这一目标的最佳方法。我知道文件可以在通过网站上传后通过 php 的 FTP 功能传输到另一台服务器，但似乎不是正确的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:06:41.367

选项 1（简单）：您将上传表单发布到第二个服务器，而不是使用运行应用程序其余部分的服务器处理上传

选项2：（在大多数情况下是错误的方法）让服务器1上的接收脚本将其存储在数据库中，服务器2在检查下载时将其从数据库中提取并在本地缓存。

选项 4：（我最喜欢）在服务器 1 上放置一个反向代理（例如清漆），让应用程序在服务器 2 上运行，并让代理缓存静态文件，因此反向代理将处理下载（和其他静态文件）如图像、javascript 等）（如果可用）。这也允许您使用一些其他技巧来提高性能（例如缓存可以缓存的站点）。[https://www.varnish-cache.org/](https://www.varnish-cache.org/)

# c# - binaryFormatter.Deserialize(stream) ：调试和修复错误

> ID：10949234
> 
> 赞同：1
> 
> 时间：2012-06-08T12:51:46.777
> 
> 标签：c#, .net, serialization, deserialization, binary-serialization

我正在使用 BinaryFormatter 序列化和反序列化自定义文件类型。我有一个独立的应用程序和一个 Web 应用程序，它们可以读取和写入相同的文件。独立应用程序运行良好，但是当我使用 Web 应用程序读取文件时，会引发异常。问题是我看不到到底发生了什么，我该如何调试或修复这个错误？

```
 BinaryFormatter b = new BinaryFormatter();
    b.AssemblyFormat = System.Runtime.Serialization.Formatters.FormatterAssemblyStyle.Simple;
    b.Binder = new WebBinder();

    object o = b.Deserialize(s); //Throws exception : 
```

**“System.String”类型的对象无法转换为“System.Decimal”类型。**

```
 public class WebBinder : SerializationBinder
    {
        public override Type BindToType(string assemblyName, string typeName)
        {
            Type tyType = null;
            string sShortAssemblyName = assemblyName.Split(',')[0];
            Assembly[] ayAssemblies = AppDomain.CurrentDomain.GetAssemblies();
            foreach (Assembly ayAssembly in ayAssemblies)
            {
                if (sShortAssemblyName == ayAssembly.FullName.Split(',')[0])
                {
                    tyType = ayAssembly.GetType(typeName);
                    break;
                }
            }
            return tyType;
        }
    } 
```

相同的文件在独立应用程序中反序列化很好？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:01:58.883

我会将 Visual Studio 设置为中断所有异常。在调试/异常中更改为：

![在此处输入图像描述](../Images/6df2f9a45f25c971d3628b36789bbc93.png)

这将向您显示发生问题的确切代码行。

# java - MVP4G 演示者未设置

> ID：10949236
> 
> 赞同：1
> 
> 时间：2012-06-08T12:51:53.490
> 
> 标签：java, gwt, mvp4g

我有一个问题，我用 mvp4g 框架开发了一个应用程序。我有一个带有标签的视图，其中一个标签是带有标签的第二个视图。当我尝试从第二个视图调用演示者时，我得到 NPE（演示者为空）。这是第一个视图的代码：

```
public interface ICategoriesView extends IsWidget {

    public interface ICategoriesPresenter {
    }
}

@Presenter(view = CategoriesView.class)
public final class CategoriesPresenter extends BasePresenter<ICategoriesView, UserEventBus> implements ICategoriesPresenter {
}

public final class CategoriesView extends ReverseCompositeView<ICategoriesPresenter> implements ICategoriesView {

    interface CategoriesViewUiBinder extends UiBinder<Widget, CategoriesView> {
    }

    private static final CategoriesViewUiBinder UI_BINDER = GWT.create(CategoriesViewUiBinder.class);

    public CategoriesView() {
        initWidget(UI_BINDER.createAndBindUi(this));
    }
}

<ui:UiBinder xmlns:ui='urn:ui:com.google.gwt.uibinder'
             xmlns:container="urn:import:com.sencha.gxt.widget.core.client.container"
             xmlns:gxtClient="urn:import:com.sencha.gxt.widget.core.client"
             xmlns:category="urn:import:app.client.ui.settings.categories">

    <ui:with type="app.client.Messages"             field="messages"/>
    <ui:with type="app.client.resource.image.Image" field="imageUser"/>

    <!-- Tab configuration. -->
    <ui:with type="com.sencha.gxt.widget.core.client.TabItemConfig" field="subjectTypes">
        <ui:attributes text="{messages.categories_tab_subjectTypes}" />
    </ui:with>
    <ui:with type="com.sencha.gxt.widget.core.client.TabItemConfig" field="subjectRegions">
        <ui:attributes text="{messages.categories_tab_subjectRegions}" />
    </ui:with>
    <ui:with type="com.sencha.gxt.widget.core.client.TabItemConfig" field="tripTypes">
        <ui:attributes text="{messages.categories_tab_tripTypes}" />
    </ui:with>
    <ui:with type="com.sencha.gxt.widget.core.client.TabItemConfig" field="expenseTypes">
        <ui:attributes text="{messages.categories_tab_expenseTypes}" />
    </ui:with>
    <ui:with type="com.sencha.gxt.widget.core.client.TabItemConfig" field="expensePaymentTypes">
        <ui:attributes text="{messages.categories_tab_expensePaymentTypes}" />
    </ui:with>

    <container:SimpleContainer>
        <gxtClient:TabPanel addStyleNames="margin-10">
            <gxtClient:child config="{subjectTypes}">
                <category:CategoryView category="ONE" />
            </gxtClient:child>

            <gxtClient:child config="{subjectRegions}">
                <category:CategoryView category="TWO" />
            </gxtClient:child>

            <gxtClient:child config="{tripTypes}">
                <category:CategoryView category="THREE" />
            </gxtClient:child>

            <gxtClient:child config="{expenseTypes}">
                <category:CategoryView category="FOUR" />
            </gxtClient:child>

            <gxtClient:child config="{expensePaymentTypes}">
                <category:CategoryView category="FIVE" />
            </gxtClient:child>
        </gxtClient:TabPanel>
    </container:SimpleContainer>

</ui:UiBinder> 
```

这是第二个视图的代码：

```
public interface ICategoryView extends IsWidget, Editor<CategoryDTO> {

    public interface ICategoryPresenter {

        public void getCategory(CategoryList category);
    }

    public void setCategory(String category);

    public void setGridContent(List<CategoryDTO> categoryDTOList);

    void showFailedMessage();
}

@Presenter(view = CategoryView.class)
public final class CategoryPresenter extends BasePresenter<ICategoryView, UserEventBus> implements ICategoryPresenter {

    @Inject
    private CategoryServiceAsync categoryServiceAsync;

    public void getCategory(CategoryList category) {
       ...
    }
}

public final class CategoryView extends ReverseCompositeView<ICategoryPresenter> implements ICategoryView {

    interface CategoryViewUiBinder extends UiBinder<Widget, CategoryView> {
    }

    interface CategoryDriver extends SimpleBeanEditorDriver<CategoryDTO, CategoryView> {
    }

    private static final CategoryViewUiBinder UI_BINDER = GWT.create(CategoryViewUiBinder.class);

    public CategoryView() {
        initWidget(UI_BINDER.createAndBindUi(this));
    }

    public void setCategory(String category) {
        List<CategoryDTO> categoryDTOList = Collections.emptyList();
        presenter.getCategory(CategoryList.valueOf(category));  // PRESENTER IS NULL!!!
    }

    public void setGridContent(List<CategoryDTO> categoryDTOList) {
    }

    @Override
    public void showFailedMessage() {
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-15T13:51:33.977

您的演示者中没有任何 onGoTo 方法吗？你能展示你的活动巴士吗？并尝试编译您的代码并在此处复制您的堆栈跟踪。

# java - Proguard 不会查看嵌入式 jar 以进行参考查找

> ID：10949238
> 
> 赞同：2
> 
> 时间：2012-06-08T12:52:04.087
> 
> 标签：java, osgi, proguard

我正在尝试用 proguard 混淆一个捆绑包。由于项目特定的原因，我的包中包含库 jar，例如：

```
bundle.jar
   |
   |-META-INF
   |
   |-library.jar
   |
   \-org (and the rest of my source tree) 
```

META-INF 中的 Manifest.mf 文件包括以下行：

```
Bundle-ClassPath: .,library.jar 
```

这都是自动生成的，而且很好。

现在，当 proguard 试图混淆 library.jar 中的方法时，问题就出现了（假设我有充分的理由这样做）。在这些情况下，它不会找到 library.jar，因为它不是依赖库的一部分，并且 proguard 似乎忽略了清单文件中的 Bundle-Classpath 条目。

所以，问题是：这能做到吗？还是 proguard 完全与 osgi 无关，根本无法处理这些标签？有没有办法可以为 proguard 提供一个 in-jar 依赖项？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:54:41.697

为什么不在使用 Proguard 混淆*之后而不是之前将捆绑包与它的嵌入式 JAR 组合起来呢？*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T21:40:34.460

是的，ProGuard 完全与 OSGi 无关。它故意独立于任何平台。

此外，ProGuard 处理类文件，可选地在 jars 内，可选地在 wars 内，可选地在 ear 内，可选地在 zips 内，但不处理 jars 内的 jars 内的类文件。

参照。ProGuard 手册 > 使用 > 类路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-10T06:31:38.623

如果您使用 bnd（maven、bndtools 等），您可以*展开*一个 jar 文件。使用以下说明：

```
 Include-Resource: @library.jar 
```

在这种情况下，您将获得一个也可以在类路径上使用的普通 JAR。这对混淆器应该没有问题。如果要从此库中导出包，请使用 -exportcontents 而不是 Export-Package，它们具有相同的语法。

# iphone - 导航堆栈中缺少视图控制器

> ID：10949240
> 
> 赞同：0
> 
> 时间：2012-06-08T12:52:07.807
> 
> 标签：iphone, ios, uiviewcontroller, uinavigationcontroller

我有一个奇怪的问题，当执行一种方法时，导航堆栈中的视图控制器丢失了。在下面的代码中，我将视图控制器计数记录在导航堆栈中。我还在导航堆栈中记录视图控制器。

```
NSMutableArray *navigationarray = [[NSMutableArray alloc]initWithArray:self.navigationController.viewControllers];
NSLog(@"Navigation array %@", navigationarray);
NSLog(@"Navigation array count %d", [navigationarray count]);

[self.doneButton.target performSelector:self.doneButton.action withObject:self.doneButton.target];

NSMutableArray *navigationarrayOne = [[NSMutableArray alloc]initWithArray:self.navigationController.viewControllers];
NSLog(@"Navigation array %@", navigationarrayOne);
NSLog(@"Navigation array count %d", [navigationarrayOne count]); 
```

在调用该方法之前，导航堆栈有 3 个视图控制器。但是方法执行后，导航栈中就没有viewcontroller了。我在 3 个视图控制器的 dealloc 方法中放了一个断点，发现视图控制器没有被释放。这可能是什么原因？

当前类的子类`ABNewPersonViewController`..并`self.doneButton.action`执行

```
- (void)newPersonViewController:(ABNewPersonViewController *)newPersonViewController
   didCompleteWithNewPerson:(ABRecordRef)person; 
```

子类的类中的方法`ABPersonViewController`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T16:03:45.297

navigationController 由该堆栈中的所有视图共享。它们中的任何一个都可以设置navigationController.viewControllers 的值。查看您的新视图控制器是否正在对导航堆栈进行更改。

# php - 在jquery图像轮播中为每个图像添加跟踪像素

> ID：10949243
> 
> 赞同：1
> 
> 时间：2012-06-08T12:52:19.873
> 
> 标签：php, javascript, html, css, tracking

我有一个用 jquery 编写的图像轮播。现在我需要能够跟踪显示了哪些单个图像以及单击了哪些图像。我得到了我的点击计数 URL 和我的查看计数标签，但我不确定如何执行此操作。

1.  如何/在哪里为单个图像添加视图计数标签？在css中作为背景图片？在图像之后的 php/html 代码中？

2.  考虑到页面加载时所有图像都重新加载并且溢出被隐藏，我怎么知道哪些图像已显示给用户？我在想像旋转木马移动触发的回调，所以它会重新加载当前可见的图像？

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T13:05:14.513

为什么需要在 html 中添加更多内容？您的服务器已经可以处理这个：

在最简单的情况下，只需将图像作为服务器`/getandtrack.php?image=/images/etc.png`而不是`/images/etc.png`. 然后`getandtrack.php`进行跟踪，然后重定向到请求的图像。

```
<?php
$image = @$_GET['image'];
if($image) {
    doTracking($image);
    header('Location: ' . $image)
} 
```

# javascript - “Liferay.Language.get” javascript 调用返回键而不是值

> ID：10949263
> 
> 赞同：2
> 
> 时间：2012-06-08T12:53:23.400
> 
> 标签：javascript, liferay-6

在我们的 portlet 中，我们尝试使用`Liferay.Language.get("key")`.

但`Liferay.Language.get("key")`返回键而不是关联的值。

有没有人遇到过类似的问题？

我们正在使用 Liferay 6.1 EE。并且已经看过[LPS-16513](http://issues.liferay.com/browse/LPS-16513)

最奇怪的部分是它可以在我们的本地机器上运行，但在服务器上却失败了。

除了使用 ext 之外的任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-01T21:10:04.223

我也无法让它检索在 portlet 本身的资源包中指定的有效键的值。不过，它将检索默认 Liferay 语言包中键的值。一个技巧是在你的 portlet 中添加一个**liferay-hook.xml**并添加如下内容：

```
<language-properties>Language.properties</language-properties> 
```

当我这样做时，它现在将检索我的自定义/附加键。副作用是您的密钥也将在 Liferay 中全局可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:23:14.213

My best guess based on the information you give is that you're asking for a key that does not have a translation associated with it - for these returning the key is the default behaviour.

But then, this question is quite old, you might have already solved it. (If so, please let us know how - if you can remember the cause)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-04T23:21:13.487

这不适用于 portlet 级别的 language.pro。

我对 6.2 EE 也有同样的问题，作为替代方案，我选择了以下解决方案。

```
 <script>
  var test = "<liferay-ui:message key='test'/>";
  console.log("This is working :: "+test)
  </script> 
```

谢谢，萨加尔维亚斯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-24T09:42:18.010

您还可以使用以下代码段获得所需的值：

```
var value='<%=LanguageUtil.get(pageContext, "key") %>'; 
```

# android - 与语言相关的 MP3 文件增加了我的 Android 应用程序的大小

> ID：10949270
> 
> 赞同：1
> 
> 时间：2012-06-08T12:53:50.853
> 
> 标签：android, optimization, size, mp3

我今天发布了一个包含一些与语言相关的 MP3 文件的 Android 应用程序。我担心的是，语言越多，应用程序的规模就越大。

你的建议是什么：

*   每种语言发布一个应用程序（不是很容易处理，每次我向软件添加新功能时都必须发布 n 个应用程序）
*   提供一种在首次启动时下载 MP3 文件的机制（需要互联网连接，而用户可能认为他不需要。这可能会带来挫败感。）
*   优化 MP3 文件（如果我必须支持 10 种语言，则无法扩展）
*   [ ] 填补空白 ！

赫维。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:06:55.363

我是用户选择的忠实粉丝。因此，我可能会将 MP3 文件设为可选，但在第一次运行时向用户解释您有一些与语言相关的功能，并允许他们在需要时下载它们。

造成这种情况的原因有很多：

1.  它使文件大小保持在较低水平。

2.  一个发行版很容易支持它。

3.  它允许您扩展/更正独立于软件的语言文件。

4.  它是预先的，并为用户提供了语言选择（甚至可能是多种语言）。

5.  它允许用户更改听觉语言，而无需卸载/重新安装或重复安装。

6.  有很多用户（比如我自己）从不与他们的手机通话，也不想听到它对他们说话。:)（是的，我疯了）

只是一个建议！

模糊逻辑

# java - 从 CyclicBarrier 中排除特定线程

> ID：10949272
> 
> 赞同：0
> 
> 时间：2012-06-08T12:54:16.783
> 
> 标签：java, multithreading, cyclicbarrier

对于我的作业，我必须做一个游戏，让几个国王在棋盘上移动。每个国王必须在自己的线程中从他独特的开始位置移动到独特的结束位置。在采取行动之前，国王必须睡最多 10 毫秒（有点随机），然后等待其他人采取行动。

我已经解决了国王等待对方采取行动`CyclicBarrier`的问题，但是当其中一个国王到达他的结束位置从而停止他自己的线程时，问题就出现了。然后`CyclicBarrier`等待线程调用 await() 方法，但这永远不会发生，因为线程不再运行。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T14:04:04.163

是的。使用 Java 7 附带的[Phaser](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Phaser.html)。它是一种先进的 CycliclBarrier。

要直接模仿 CyclicBarrier，您可以以这种方式使用 Phaser。

```
Phaser phaser = new Phaser(n);

public void doWorkAndAwait(){
   //work
   phaser.arriveAndAwaitAdvance(); //await for all threads to arrive
} 
```

如果您想通知 Phaser 您已经到达但不等待提前，您只需`arrive()`

```
public void doWorkAndContinue(){
   //work
   phaser.arrive();
   //stop own thread
} 
```

此时，Phaser 已被通知线程已到达，但该线程`stop own thread`无需等待其他线程到达即可。

# java - 如何从 Java 列表中获取值 ?

> ID：10949280
> 
> 赞同：0
> 
> 时间：2012-06-08T12:54:58.783
> 
> 标签：java, api, remedy

我正在尝试为 BMC 操作请求系统服务器编写一个迷你插件。

```
filterAPICall
public abstract List<com.bmc.arsys.api.Value> filterAPICall(ARPluginContext context,
                                                        List<com.bmc.arsys.api.Value> pInValues)
                                                 throws com.bmc.arsys.api.ARExceptionDescription copied from interface: ARFilterAPIPluggable 
```

给定一组输入值，对其进行处理并返回输出值列表。还提供了插件上下文和实例数据。

```
Specified by:
filterAPICall in interface ARFilterAPIPluggable

Parameters:
context - Current context for this plugin call, like username etc.
pInValues - input values 

Returns:
output values 

Throws: 
com.bmc.arsys.api.ARException 
```

com.bmc.arsys.api.Value 的描述在这里： [http ://www.javasystemsolutions.com/documentation/thirdparty/arapiv75/com/bmc/arsys/api/Value.html](http://www.javasystemsolutions.com/documentation/thirdparty/arapiv75/com/bmc/arsys/api/Value.html)

现在，这是我的电话：

```
 public List<Value> filterAPICall(ARPluginContext context, List<Value> pInValues) throws ARException{
        context.logMessage(pluginInfo, ARPluginContext.PLUGIN_LOG_LEVEL_INFO, "filterapiCall()");

        if (pInValues.size() == 0)
            return null;

        ArrayList<Value> outValues = new ArrayList<Value>();

        outValues.add(0, new Value(String.valueOf(InetAddresses.isInetAddress(String.valueOf(pInValues)))));

        return outValues;
    } 
```

由于某些原因

```
 outValues.add(0, new Value(String.valueOf(InetAddresses.isInetAddress(String.valueOf(pInValues))))); 
```

不管用。

我也试过：

```
 outValues.add(0, new Value(String.valueOf(InetAddresses.isInetAddress(String.valueOf(pInValues.getValue()))))); 
```

但编译器说：

```
javac IPChecker.java
IPChecker.java:30: cannot find symbol
symbol  : method getValue()
location: interface java.util.List<com.bmc.arsys.api.Value>
        outValues.add(0, new Value(String.valueOf(InetAddresses.isInetAddress(String.valueOf(pInValues.getValue())))));
                                                                                                      ^
1 error 
```

有任何想法吗？

谢谢托马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:58:02.883

你应该迭代。

```
if (pInValues.size() == 0)
    return null;

ArrayList<Value> outValues = new ArrayList<Value>();

for(Value value : pInValues) {
    outValues.add(0, new Value(String.valueOf(InetAddresses.isInetAddress(String.valueOf(value)))));
}

return outValues; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:58:27.843

`pInValues`是一个[`java.util.List`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)。`List`s没有`getValue()`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:59:51.117

您需要访问 中的元素`List`才能调用`getValue()`它。尝试：

```
outValues.add(0, new Value(String.valueOf(InetAddresses.isInetAddress(
    String.valueOf(pInValues.get(0).getValue()))))); 
```

This will translate the first element and add it to the output list. To get all elements, you need to iterate through the elements in `pInValues` and translate them one-by-one, adding each result to the output list

# jquery - 访问 id 中带有 '::' 的元素

> ID：10949281
> 
> 赞同：1
> 
> 时间：2012-06-08T12:55:00.170
> 
> 标签：jquery

在以下小提琴中：http: [//jsfiddle.net/Q9sHz/5/](http://jsfiddle.net/Q9sHz/5/)

我有一个`<li>`id 为“test1::newtest”

当我按下按钮 - 启用“Li Point1”时，`<li>`元素 Li Point1 仍然不可拖动，但如果我从 id 中删除 :: 就像小提琴一样：http: [//jsfiddle.net/Q9sHz/6/](http://jsfiddle.net/Q9sHz/6/) 当我点击按钮。

不允许在 ID 中包含“：”吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T12:59:49.560

jQuery 使用冒号来构建选择器。例如`$('.class:checked')`或`$('.class:hidden')`

你需要像这样逃避冒号

```
test1\\:\\:newtest 
```

**来自 jQuery 常见问题**

> 因为 jQuery 使用 CSS 语法来选择元素，所以一些字符被解释为 CSS 表示法。例如，除了字母、数字、连字符和下划线之外，ID 属性在首字母（az 或 AZ）之后还可以使用句点和冒号（请参阅 W3C 基本 HTML 数据类型）。冒号 (":") 和句点 (".") 在 jQuery 选择器的上下文中是有问题的，因为它们分别表示伪类和类。
> 
> 为了告诉 jQuery 将这些字符按字面意思而不是 CSS 表示法来处理，必须通过在它们前面放置两个反斜杠来“转义”它们。

```
// Does not work
$("#some:id")

 // Works!
$("#some\\:id") 
```

[如何通过具有在 CSS 表示法中使用的字符的 ID 选择元素？](http://docs.jquery.com/Frequently_Asked_Questions#How_do_I_select_an_element_by_an_ID_that_has_characters_used_in_CSS_notation.3F)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:58:46.783

引用[jQuery-FAQ](http://docs.jquery.com/Frequently_Asked_Questions#How_do_I_select_an_element_by_an_ID_that_has_characters_used_in_CSS_notation.3F)：

> 冒号 (":") 和句点 (".") 在 jQuery 选择器的上下文中是有问题的，因为它们分别表示伪类和类。
> 
> 为了告诉 jQuery 将这些字符按字面意思而不是 CSS 表示法来处理，必须通过在它们前面放置两个反斜杠来“转义”它们。

如您所见，您必须使用`\\`. 请参阅[此工作示例](http://jsfiddle.net/Q9sHz/11/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T12:58:52.053

**工作演示** [http://jsfiddle.net/Q9sHz/12/](http://jsfiddle.net/Q9sHz/12/)

您需要转义这些特殊字符`\\:\\:`才能为您解决问题。

**代码**

```
// when button clicked ...
$('#enable').click(function() {
    // also enable li tag with id test1
    $('#test1\\:\\:newtest').draggable('enable');
});

​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T13:00:43.503

```
// set draggable functionality to all li tags
$('.myLi').draggable();
// disable all li tags which have the class disable
$('.disable').draggable('disable');

// when button clicked ...
$('#enable').click(function() {
    // also enable li tag with id test1
    $('#test1newtest').draggable('enable');
}); 
```

# android - 快速学习android的最佳方法是什么

> ID：10949284
> 
> 赞同：2
> 
> 时间：2012-06-08T12:55:11.867
> 
> 标签：android

实际上我在一家公司进行了 6 个月的实习计划，我被告知在没有公司提供帮助的情况下在 android 中申请，我以前从未做过 android，所以你能建议我更快的学习 android 的方法吗？如果有请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T13:00:07.747

尝试了解基础知识。

访问这些对初学者有帮助的链接

*   [安卓开发者](http://developer.android.com/resources/tutorials/hello-world.html)

*   [安卓培训](http://android-developers.blogspot.com/2011/12/introducing-android-training.html)

*   [沃杰拉](http://www.vogella.com/tutorials.html)

*   很明显，你有[GOOGLE](http://www.google.com)和[StackOverflow](https://stackoverflow.com/questions)

希望能帮助到你 ！！！

## 编辑

在[Vogella上进行 Android 开发](http://www.vogella.com/articles/Android/article.html)

特定主题的链接也可用。

*   [列表显示](http://www.vogella.com/articles/AndroidListView/article.html#overview_listview)

*   [SQLite 数据库](http://www.vogella.com/articles/AndroidSQLite/article.html)等...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:59:00.110

您可以先[将此页面](http://developer.android.com/guide/topics/fundamentals.html)设置为起始页面。

其次，尝试完成一些[这样](http://mobile.tutsplus.com/tutorials/android/introduction-to-android-development/)的教程，并在完成基本教程后开始构建自己的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T13:13:47.950

嘿 TRonz 我也像你一样被困住了。首先你已经通过并练习了这个[演示](http://androidcodemonkey.blogspot.in/2010/01/hello-world-your-first-android.html)

Eclipse ide 是与 android 一起工作的最佳 ide，它将支持所有类型的插件，只需安装即可。您使用的是哪个 ide？如果其他 ide 只是转向 eclipse[eclipse-jee-indigo]。它将使您灵活编码等，

如果您真的需要一些关于 android 的软拷贝指南，只需访问 amazon.com 并下载适当的需求（免费）。

咕噜咕噜！..

# javascript - KO Compute 递归调用

> ID：10949285
> 
> 赞同：2
> 
> 时间：2012-06-08T12:55:13.223
> 
> 标签：javascript, knockout.js

我有两个下拉框。我在第一个下拉列表的 ko 计算上填充了第二个下拉框。我有两个列表，一个填充了在下拉列表中选择的项目的所有可用值。在右侧列表中，用户可以从左侧选择由 ko 计算函数填充的值，当第一个或第二个下拉列表中的值发生更改时，我需要清除 seletedItems 数组（从右侧列表），现在是带有新值的左侧列表 我尝试在右侧列表中选择值，但是每次选择数组 seletedItems 时都会调用 ko 计算（我在 ko 计算中使用 removeAll 清除了它），不知道为什么会这样正在发生。感谢任何帮助。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:48:08.490

> 前言：我同意[Niko](https://stackoverflow.com/questions/10949285/ko-compute-called-recursively/12270364#comment14290085_10949285)和[Paolo del Mundo](https://stackoverflow.com/questions/10949285/ko-compute-called-recursively/12270364#comment14290153_10949285)的观点。如果您包含代码片段，我们会更好地帮助您。

* * *

话虽如此，您表示您的`computed`函数意外地递归调用自己。

*   如果是这种情况，那么我建议您简化 Knockout VM 代码。
*   重构，并支持手动订阅。

* * *

*   尽管它们的表现力和力量，`computed`功能可能是棘手的。
*   如果您创建太多它们，则可能很难预测它们何时会被调用。
*   对于足够大的数据集，IE 8 和更早版本将标记过于复杂的 Knockout 代码并带有[运行缓慢的脚本警告](https://stackoverflow.com/questions/10316957/knockout-causing-slow-running-script-warning-in-ie)。

# php - 如何使用我从 tmhOAuth 获得的用户令牌/秘密？

> ID：10949288
> 
> 赞同：2
> 
> 时间：2012-06-08T12:55:26.240
> 
> 标签：php, twitter, oauth

我正在为我的网站使用出色的 tmhOAuth php 库。但是，我无法弄清楚如何访问从我的 auth.php 收到的用户令牌/秘密？（比如说，当试图获取当前用户的朋友列表时。）

它在[示例](https://github.com/themattharris/tmhOAuth/blob/d0b0bc6c27c26dcfe37c2da087820744a5cce480/examples/friends.php)中说明：

```
* Although this example uses your user token/secret, you can use
* the user token/secret of any user who has authorised your application. 
```

我已经成功使用了[auth.php 示例](https://github.com/themattharris/tmhOAuth/blob/d0b0bc6c27c26dcfe37c2da087820744a5cce480/examples/auth.php)，但是如何使用我收到的 USER 令牌/秘密？与示例中一样，它只是这样陈述：

```
$tmhOAuth = new tmhOAuth(array(
  'consumer_key' => 'YOUR_CONSUMER_KEY',
  'consumer_secret' => 'YOUR_CONSUMER_SECRET',
  'user_token' => 'A_USER_TOKEN',
  'user_secret' => 'A_USER_SECRET',
)); 
```

显然，硬编码它对我不起作用，所以，简单地说，我想知道当前登录用户的令牌/秘密在哪里？

这是一个存储凭证的示例，我认为：

```
// already got some credentials stored?
} elseif ( isset($_SESSION['access_token']) ) {
  $tmhOAuth->config['user_token'] = $_SESSION['access_token']['oauth_token'];
  $tmhOAuth->config['user_secret'] = $_SESSION['access_token']['oauth_token_secret'];

  $code = $tmhOAuth->request('GET', $tmhOAuth->url('1/account/verify_credentials'));
  if ($code == 200) {
    $resp = json_decode($tmhOAuth->response['response']);
    echo $resp->screen_name;
  } else {
    outputError($tmhOAuth);
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:18:17.607

用户应该通过 oauth 向您授权，这最终会为每个用户生成一个访问令牌（您需要将其存储在某个地方），您从存储中获取该令牌，在请求中提供它，这样您就被授予访问权限。因此，您的用户需要授予您访问权限，并且您需要存储访问令牌+秘密以供将来使用。

简而言之，不是很具体，也不是 100% 在技术上准确（我认为），但希望清楚地遵循以下条款：

使用 oauth，您可以请求应用程序范围的令牌和机密、消费者令牌和机密。

使用这些消费者令牌，您可以向提供者请求请求令牌、秘密（通常也包括随机数令牌），现在可以将您的应用识别为“我允许的应用 x，提供者”。

使用此请求令牌，您可以向应用程序请求特定用户的访问令牌（您知道它在您身边，他们知道或发现在他们身边），用户自己通常必须授权您的应用程序的访问权限以及何时一切顺利（意思是用户说好的）你会收到一个最终的访问令牌和密码，从那时起你可以代表用户连接到远程站点。此时，您需要以某种方式物理存储令牌（数据库、文本文件……）以供以后使用。

这是他们的服务器和您的服务器之间的来回切换，只要您拥有存储的用户的有效访问令牌+秘密，就不需要再次重复第一步。

一旦你有了这些，你可以毫无疑问地将它们与你的应用程序的消费者令牌/秘密一起放入'user_token'和'user_secret'（我从未使用过这个库）以进行身份​​验证。

如果您已经知道所有这些并且这不是一个现成的答案，我很抱歉。我的印象是您还没有其他用户的访问令牌。

# ios - IOS，如何将用户直接相互连接？

> ID：10949289
> 
> 赞同：1
> 
> 时间：2012-06-08T12:55:29.013
> 
> 标签：ios, ipad, video-streaming

我正在开发一个 iPad 应用程序，我希望用户能够进行视频聊天。我不希望视频流通过服务器，我希望用户能够将视频流直接发送到彼此的 iPad。我希望我的服务器做的唯一一件事就是跟踪在线用户和他们的 IP。

在开发移动应用程序方面，我是一个“新手”。我想知道这是否可能，如果可以，应该如何做。

# qt - 放置到 QGridLayout 中的小部件

> ID：10949290
> 
> 赞同：0
> 
> 时间：2012-06-08T12:55:30.230
> 
> 标签：qt, size, width, qgridlayout

我使用 QGridLayout 并将布局定义为 ui 文件。

我需要实现这样的布局：

|第 0 列 |第 1 列 |第 2 列 |第 3 列 |

|宽度足以容纳文本|空白空间|宽度为 66-70 的行编辑|宽度足以容纳文本|

我的问题是第 1 列和第 2 列。

我应该使用哪种尺寸策略来为第 1 列提供所有可用空间？

我正在尝试将最小宽度 = 66 和最大宽度 = 70 设置为第 2 列。并将“扩展”宽度策略设置为第 1 列。

但由于某种原因，在这种情况下，第 1 列扩展得更多，第 2 列少于 66。

如果我将第 1 列的大小策略设置为“最大”，则所有空间都将分配给第 2 列。并且该列的宽度大于行编辑小部件，因此它不再右对齐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:17:37.973

你做的一切都是正确的，除了单位。

我假设您的行编辑的宽度以字符为单位，但您似乎正在使用该数字来设置以像素为单位的宽度。

我会按以下方式设置它：

```
qreal em = QFontMetricsF(ui.lineEdit->font()).width('m');
ui.lineEdit->setMinimumWidth(round(em*66));
ui.lineEdit->setMaximumWidth(round(em*70)); 
```

# java - 通话/连接到 Android 上的安全元件小程序 micro sd？

> ID：10949292
> 
> 赞同：1
> 
> 时间：2012-06-08T12:55:42.577
> 
> 标签：java, android, sd-card, android-sdcard

如何与 Android 上的 (G&D) 微型 SD 卡安全元件交谈/交流？

这没有在手机上闪烁或有自定义 ROM - 希望它在 Galaxy S2 和 S3 上工作。

我们可以在 BlackBerry 中执行此操作并使用 Rim 'SmartCardReader' 对象，一旦建立连接，然后发送 APDU 字节，但我在 Android 中找不到类似的东西来建立连接。是否有允许访问它的代码或库？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:58:09.310

看看下面的项目：

[http://code.google.com/p/seek-for-android/](http://code.google.com/p/seek-for-android/)

我一直在寻找类似的东西，这是我找到的最接近的

# objective-c - 为什么我用 iPhone 3 看不到我的整个图像？

> ID：10949295
> 
> 赞同：0
> 
> 时间：2012-06-08T12:55:55.100
> 
> 标签：objective-c, cocos2d-iphone, sprite

所以我非常接近完成我的小项目，并且我正在努力确保我的应用程序与 iPhone 3 和 4 兼容......但这真的让我很难过。我正在使用hm50前段时间发布的开源CCPickerview代码（http://www.cocos2d-iphone.org/forum/topic/10160）。它适用于 iPhone 4，但不适用于 iPhone 3 模拟器。我认为问题出在实施中的某个地方。当我错误地将 -hd 标签留在图像上时，我可以看到发生了什么。看起来图像在非视网膜模式下被切成两半，我不能说我是一个足以确定原因的专家。

```
-(void)makePages {
    CCSprite *overlay = [CCSprite spriteWithFile:@"overlay-hd.png"];
    CGSize s = CGSizeMake(overlay.contentSize.width, overlay.contentSize.height);
    self.contentSize = s;

    CCLayerColor *backLayer = [CCLayerColor layerWithColor:(ccColor4B){248,250,251,255} width:self.contentSize.width height:self.contentSize.height];
    backLayer.position = ccp(-self.contentSize.width/2, -self.contentSize.height/2);
    [self addChild:backLayer];

    self.baseLayer = [CCLayerColor layerWithColor:(ccColor4B){150,150,150,0} width:s.width height:imgSize.height * numPages];

    for (int i=0; i < [arrayPages count]; i++) {
        CCNode* n = [arrayPages objectAtIndex:i];
        n.position = ccp(s.width/2, s.height/2 + i * (imgSize.height + padding)); 
        [baseLayer addChild:n];
    }

    baseLayer.position = ccp(-s.width/2, -s.height/2 - s.height * currentPage);
    [self addChild:baseLayer];

    overlay.position = ccp(0, 0);
    //overlay.opacity = 0;
    [self addChild:overlay];

    rect = CGRectMake(self.position.x - s.width/2, self.position.y - s.height/2, s.width, s.height);

    [self moveToPagePosition];
}

- (void) visit 
{
    if (!self.visible)
        return;

    glPushMatrix();

    glEnable(GL_SCISSOR_TEST);

    CGSize size = [[CCDirector sharedDirector] winSize];
    CGRect scissorRect = rect;

    ccDeviceOrientation orientation = [[CCDirector sharedDirector] deviceOrientation];
    switch (orientation) 
    {
        case kCCDeviceOrientationPortrait:
            break;
        case kCCDeviceOrientationPortraitUpsideDown:
            scissorRect.origin.x = size.width-scissorRect.size.width-scissorRect.origin.x;
            scissorRect.origin.y = size.height-scissorRect.size.height-scissorRect.origin.y;
            break;
        case kCCDeviceOrientationLandscapeLeft:
        {
            float tmp = scissorRect.origin.x;
            scissorRect.origin.x = scissorRect.origin.y;
            scissorRect.origin.y = size.width-scissorRect.size.width-tmp;
            tmp = scissorRect.size.width;
            scissorRect.size.width = scissorRect.size.height;
            scissorRect.size.height = tmp;
        }
            break;
        case kCCDeviceOrientationLandscapeRight:
        {
            float tmp = scissorRect.origin.y;
            scissorRect.origin.y = scissorRect.origin.x;
            scissorRect.origin.x = size.height-scissorRect.size.height-tmp;
            tmp = scissorRect.size.width;
            scissorRect.size.width = scissorRect.size.height;
            scissorRect.size.height = tmp;
        }
            break;
    }

    glScissor(scissorRect.origin.x*2, scissorRect.origin.y*2,
              scissorRect.size.width*2, scissorRect.size.height*2);

    [super visit];

    glDisable(GL_SCISSOR_TEST);
    glPopMatrix();
} 
```

[截屏](http://i1151.photobucket.com/albums/o624/mae1778/screenshot.jpg)

如果我将滚动条移到右边，它会显示更多，但我真的不希望它在那里。你们中的任何一位出色的objective-c大师都可以帮我解决这个问题吗？

编辑：

经过进一步调查，问题毫无疑问是：

```
rect = CGRectMake(self.position.x - s.width/2, self.position.y - s.height/2, s.width, s.height); 
```

如果我成功了

```
rect = CGRectMake(self.position.x - s.width*2.05, self.position.y - s.height/1.48, self.contentSize.width*1.3, self.contentSize.height*.48); 
```

它工作得很好......但我认为这个解决方案不是很优雅，它应该基于覆盖图片的大小。我不确定我在这里做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:12:17.060

我猜旧设备上正在使用双分辨率图像，这将是它们应该大小的两倍。

您需要检查`-scale`窗口屏幕的属性（或使用`[UIScreen mainScreen]`），并据此选择正确的（视网膜与否）图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T21:56:26.950

我也写了一个 CCPickerView，你可以在 github 上找到它。[https://github.com/fidgetware/CCPickerView](https://github.com/fidgetware/CCPickerView)。它适用于低分辨率和高分辨率图像。

# c - 这两个 C 声明有什么区别？

> ID：10949297
> 
> 赞同：2
> 
> 时间：2012-06-08T12:56:00.050
> 
> 标签：c

我今天在接受采访时，被问到以下两种声明之间的区别：

```
int *A[10]; 
```

和

```
int (*A)[10]; 
```

我不知道。如果您认为我遗漏了一些重要的指针“指针”，请也告诉我。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T12:57:10.027

第一个声明了一个由 10 个指针组成的数组`int`，第二个是一个指向 10 个`int`s 的数组的指针。

`[]`绑定比 更紧密`*`，所以第一个可以等效地写成

```
int *(A[10]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T12:59:48.983

给定

```
int *A[10];  // an array of 10 int pointers 
```

一元的相对优先级并使之`*` 等价`[]`于

```
int *(A[10]);  // same 
```

第二个声明将隐式排序更改为

```
int (*A)[10]; // a pointer to an array of ten ints 
```

[C 和 C++ 运算符优先级和关联性](http://web.ics.purdue.edu/~cs240/misc/operators.html)

# php - 分类页面按人气排序（PHP + Opencart）

> ID：10949300
> 
> 赞同：-1
> 
> 时间：2012-06-08T12:56:10.417
> 
> 标签：php, mysql, e-commerce, opencart

我有一个打开的购物车站点，该站点在一个页面上显示所有产品（如果用户选择查看此页面）。我试图将其按受欢迎程度进行排序，仅限于 1 个特定产品类别（类别 id：23），而不是当前最新添加的类别。

我知道 Opencart 已经嵌入了流行度功能，因为您可以在管理部分中查看基于“查看次数最多”和“购买次数最多”的报告。

请参阅下面的类别页面：

```
<?php echo $header; ?>

<div id="content">
  <div class="top">
    <div class="left"></div>
    <div class="right"></div>
    <div class="center">
    <?php if (trim($heading_title)=="Kippahs"){$heading_title="Kippah Gallery";} ?>
    <?php if (trim($heading_title)=="Wedding Glass Art"){$heading_title="Wedding Glass Gallery";} ?>
    <?php if (trim($heading_title)=="Judaic Art"){$heading_title="Judaica Art Gallery";} ?>
    <?php if (trim($heading_title)=="Artist"){$heading_title="Meet Our Artists";} ?>
    <?php if (trim($heading_title)=="Ketubahs"){$heading_title="Scroll Down to View All Our Ketubahs on One Page";} ?>

<?php if($_SERVER['QUERY_STRING']=='_route_=all-our-ketubot/' || substr($_SERVER['QUERY_STRING'],0,23)=='_route_=all-our-ketubot' || substr($_SERVER['QUERY_STRING'],0,15)=='_route_=ketubah' || substr($_SERVER['QUERY_STRING'],0,24)=='_route_=meet-our-artists' || substr($_SERVER['QUERY_STRING'],0,24)=='_route_=our-most-amazing' || substr($_SERVER['QUERY_STRING'],0,24)=='_route_=the-interfaith-k'){ ?>
    <script type="text/javascript"> 
        <!--
        function MM_jumpMenu(targ,selObj,restore){ //v3.0
        eval(targ+".location='"+selObj.options[selObj.selectedIndex].value+"'");
        if (restore) selObj.selectedIndex=0;
        }
        //-->
    </script>

<?php include("selector.php"); ?>

<?php } ?>

<div style="width:800px;">
      <h1><?php echo $heading_title; ?></h1>
    </div>
    </div>
  </div>
  <div class="middle">

    <table style="margin-top:-35px;margin-bottom:0px;padding:10px;">
      <tr>
      <?php
  if($_SERVER['QUERY_STRING']!='_route_=ketubahs'){
  ?>
        <?php if ($thumb) { ?>
        <td><img class="catimg" src="<?php echo $thumb; ?>" alt="<?php echo $heading_title; ?>" width="150" height="150" /></td>      
        <?php } 
                                                   }
        ?>
        <?php if ($description) { ?>
        <td valign="top" class="headcat"><?php echo $description; ?></td>
        <?php } ?>
      </tr>
    </table>

    <div class="clear">&nbsp;</div><!--[if lt IE 7]><br /><![endif]-->
    <?php if (!$categories && !$products) { ?>
    <div class="content"><?php echo $text_error; ?></div>
    <?php } ?>
    <?php
  if($_SERVER['QUERY_STRING']!='_route_=ketubahs'){
  ?>
    <!--<?php /* if ($categories) { */ ?> -->
    <?php if ($categories && $heading_title!="Scroll Down to View All Our Ketubahs on One Page") { ?>
    <table class="listC" cellspacing="7">
      <?php for ($i = 0; $i < sizeof($categories); $i = $i + 4) {
       $numpages=sizeof($products);
      ?>
      <tr>
        <?php for ($j = $i; $j < ($i + 4); $j++) { ?>
        <td width="25%"><?php if (isset($categories[$j])) { ?>
          <a href="<?php echo $categories[$j]['href']; ?>"><img src="<?php echo $categories[$j]['thumb']; ?>" title="<?php echo $categories[$j]['name']; ?>" alt="<?php echo $categories[$j]['name']; ?>" style="margin-bottom: 3px;" /></a><br />
          <a href="<?php echo $categories[$j]['href']; ?>"><?php echo $categories[$j]['name']; ?></a>
          <?php } ?></td>
        <?php } ?>
      </tr>
      <?php } ?>
    </table>
    <?php } 
                                                   }
    ?>
    <?php if ($products) { ?>
 <!-- <div class="sort"> -->
      <div class="sort" <?php if ($heading_title=="Scroll Down to View All Our Ketubahs on One Page") { echo "style='margin-top:-40px;'"; } ?> >
      <div class="div1">
        <select name="sort" onchange="location = this.value">
          <?php foreach ($sorts as $sorts) { ?>
          <?php if (($sort . '-' . $order) == $sorts['value']) { ?>
          <option value="<?php echo $sorts['href']; ?>" selected="selected"><?php echo $sorts['text']; ?></option>
          <?php } else { ?>
          <option value="<?php echo $sorts['href']; ?>"><?php echo $sorts['text']; ?></option>
          <?php } ?>
          <?php } ?>
        </select>
      </div>
      <div class="div2"><?php echo $text_sort; ?></div>
    </div>
    <table class="listC" cellspacing="7">
      <?php for ($i = 0; $i < sizeof($products); $i = $i + 4) {
       $numpages=sizeof($products);
      ?>
      <tr>
        <?php for ($j = $i; $j < ($i + 4); $j++) { ?>
        <td width="25%">
<?php if (isset($products[$j])) { ?>
              <a href="<?php echo $products[$j]['href']; ?>"><img src="<?php echo $products[$j]['thumb']; ?>" title="<?php echo $products[$j]['name']; ?>" alt="<?php echo $products[$j]['name']; ?>" width="210px" height="210px" /></a><br /><Br />
          <div style="margin-top:-15px;"><a href="<?php echo $products[$j]['href']; ?>"><?php echo $products[$j]['name']; ?></a><br />
<?php       if($products[$j]['artist'] != 'Rosenthal, Gary' and $products[$j]['artist'] != 'Jessy Judaica' and !empty($products[$j]['artist'])){
            $artist_fname=substr($products[$j]['artist'],strpos($products[$j]['artist'],",")+1);
            $artist_lname=substr($products[$j]['artist'],0,strpos($products[$j]['artist'],","));
        $artist_fullname=trim($artist_fname)." ".trim($artist_lname);
        if (trim($products[$j]['artist'])=="Zeev") {
        $artist_fullname="Ze&#39;ev"; }
        if (trim($products[$j]['artist'])=="This is not a Ketubah") {
        $artist_fullname="This is not a Ketubah"; }
        $artistname=str_replace(' ','-',$artist_fullname);
        if (trim($artistname)=="Ze&#39;ev") {
        $artistname="Ze-ev"; }
        if (trim($artistname)=="This is not a Ketubah") {
        $artistname="This is not a Ketubah"; }
        $artist_path='meet-our-artists/'.strtolower($artistname);
 ?>
          <a href="<?php echo $artist_path; ?>"><span style="color:#FFF;font-weight:200;"><?php echo $artist_fullname; ?></span></a><br />
<?php } else { ?>
          <span style="color: #999; font-size: 11px;"><?php echo $products[$j]['model']; ?></span><br />
<?php } ?>
          <?php if ($display_price) { ?>
          <?php if (!$products[$j]['special']) { ?>
          <span style="color: #00d8ff; font-weight: bold;cursor:default;"><?php echo $products[$j]['price']; ?></span>
          <?php } else { ?>
          <span style="color: #00d8ff; font-weight: bold; text-decoration: line-through;"><?php echo $products[$j]['price']; ?></span> <span style="color: #FAA; font-weight: bold;"><?php echo $products[$j]['special']; ?></span>
          <?php } ?>
</div>
          <?php } ?>
          <br />
          <?php if ($products[$j]['rating']) { ?>
          <img src="catalog/view/theme/default/image/stars_<?php echo $products[$j]['rating'] . '.png'; ?>" alt="<?php echo $products[$j]['stars']; ?>" />
          <?php } ?>
                    <a class="cart_add" href="<?php echo $products[$j]['add']; ?>" title="<?php echo $button_add_to_cart; ?>" ><span><?php echo $button_add_to_cart; ?></span></a>

          <?php } ?>

          <!--<a href="<?php echo $add_to_wishlist; ?>" class="wish_add" rel="nofollow"><span><?php echo $button_to_wishlist; ?>+ Favorites</span></a>-->

          </td>
        <?php } ?>
      </tr>
      <?php } ?>

    </table>
    <div class="pagination" style="width:950px;text-align:right"><?php
    if (($numpages-$ii)>1) {
     echo "Displaying all ".($numpages-$ii)." items in this category.";
     } else {
     echo "Displaying 1 item in this category.";
     } ?></div>
         <?php } ?>

  </div>
  <div class="bottom">
    <div class="left"></div>
    <div class="right"></div>
    <div class="center"></div>
  </div>
</div>
<?php echo $footer; ?> 
```

任何帮助都会很棒！

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T14:41:05.977

好的，我将尝试设置查询，然后您需要调用的方法以及周围的一切都在您身上。

这应该是获取`LIMIT 10`类别 23 中的所有（或使用时的前 10 个）产品，按视图降序排列

```
SELECT p.*, pd.*
FROM `product` p
LEFT JOIN `product_description` pd 
    ON p.`product_id` = pd.`product_id` 
        AND pd.`language_id` = {<YOUR_LANGUAGE_ID>}
LEFT JOIN `product_to_category` ptc 
    ON p.`product_id` = ptc.`product_id` 
        AND ptc.`category_id` = 23
ORDER BY p.`views` DESC
LIMIT 10 
```

**注意：**不确定`p.views`列名 - 在查询数据库之前检查。

如果您想按购买数量获得所有产品：

```
SELECT p.*, pd.*, 
    (SELECT COUNT(op.product_id) 
        FROM `order_products` op 
        WHERE op.product_id = p.product_id
    ) AS product_count
FROM `product` p
LEFT JOIN `product_description` pd 
    ON p.`product_id` = pd.`product_id` 
        AND pd.`language_id` = {<YOUR_LANGUAGE_ID>}
LEFT JOIN `product_to_category` ptc 
    ON p.`product_id` = ptc.`product_id` 
        AND ptc.`category_id` = 23
ORDER BY product_count DESC
LIMIT 10 
```

**注意：**我再次不确定`order_products`表名......

尝试在 phpMyAdmin 中启动查询，让我知道它们是否正在工作或发布错误消息，如果有任何...

# android - Endless Adapter 在从 Web 服务中获取数据

> ID：10949301
> 
> 赞同：0
> 
> 时间：2012-06-08T12:56:15.873
> 
> 标签：android, android-layout

**这是我的主要课程**

```
public class EndlessAdapterDemo extends Activity  {

    private ListView mListView;
    private ProgressDialog dialog;
    private OutletsXmlHandler mOutletXmlHandler;
    private FetchAndParseData getDownloadedData;
    private OutletListAdapter mOutletListAdapter;
    public InputStream inputStream;
    private ArrayList<Outlets> outletList;

  @Override
  public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.list_tab);

    mListView = (ListView) findViewById(R.id.listView1);
    mOutletXmlHandler = new OutletsXmlHandler();
    dialog = new ProgressDialog(this);
    dialog.setMessage("Loading");
    dialog.setCancelable(false);

    new MyTask().execute();  
  }
}

    **And in MyTask class i am doing following**

        public class MyTask extends AsyncTask<Void, Void, Void> {

            @Override
            protected void onPreExecute() {

                super.onPreExecute();
                dialog.show();
            }

        @Override
        protected Void doInBackground(Void... params) {

            try {                           
                getDownloadedData = (FetchAndParseData) new FetchAndParseData().execute("http://184.106.222.195/zootapi/index.php/api/outlets/searchoutlets/token/something/cityid/83/parameters/&cu=American&s=Air$Conditioned");

                inputStream = getDownloadedData.get();
                XmlUtilities.parseAndLoadData(inputStream , mOutletXmlHandler);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (ExecutionException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            return null;
        }

        @Override
        protected void onPostExecute(Void result) {         
            super.onPostExecute(result);

            outletList = Project.getOutletList();//Project.getOutletList();             
            mListView.setAdapter(new DemoAdapter(outletList));

            if(dialog.isShowing()){
                dialog.dismiss();
            }

        }
    }

**Now in this Demo Adpapter i am extending it with EndlessAdpater**

 class DemoAdapter extends EndlessAdapter {
    private RotateAnimation rotate=null;

    DemoAdapter(ArrayList<Outlets> outletList) {
      super(new OutletListAdapter(EndlessAdapterDemo.this, outletList));

      rotate=new RotateAnimation(0f, 360f, Animation.RELATIVE_TO_SELF,
                                  0.5f, Animation.RELATIVE_TO_SELF,
                                  0.5f);
      rotate.setDuration(600);
      rotate.setRepeatMode(Animation.RESTART);
      rotate.setRepeatCount(Animation.INFINITE);
    }

    @Override
    protected View getPendingView(ViewGroup parent) {
      View row=getLayoutInflater().inflate(R.layout.row, null);

      View child=row.findViewById(android.R.id.text1);

      child.setVisibility(View.GONE);

      child=row.findViewById(R.id.throbber);
      child.setVisibility(View.VISIBLE);
      child.startAnimation(rotate);

      return(row);
    }

    @Override
    protected boolean cacheInBackground() {
        try {                           
            getDownloadedData = (FetchAndParseData) new FetchAndParseData().execute("http://184.106.222.195/zootapi/index.php/api/outlets/fetchoutlets/token/something/cityid/76/verticalid/1");

            inputStream = getDownloadedData.get();
            XmlUtilities.parseAndLoadData(inputStream , mOutletXmlHandler);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ExecutionException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

      return true;
    }

    @Override
    protected void appendCachedData() {

        outletList = Project.getOutletList();//Project.getOutletList();             
        mListView.setAdapter(new DemoAdapter(outletList));
   }
  } 
```

**现在在此源代码中，当列表到达末尾时，数据已成功从 Web 服务加载到列表视图中，但以前的数据已丢失..

谁能帮帮我……我在这方面遇到了很大的麻烦**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:04:15.423

您每次都在创建一个新的 DemoAdapter。

更改您的 appendCachedData 以获取包装的适配器，然后向其中添加额外的元素：

```
@Override
protected void appendCachedData() {
    OutletListAdapter adptr = (OutletListAdapter) getWrappedAdapter();
    if (outletList!=null) {
        for (<T> addThis : outletList) {
            adptr.add(addThis);
        }
    }
} 
```

# ios - 在 iOS 中使用 Cordova 打开本地 pdf

> ID：10949308
> 
> 赞同：1
> 
> 时间：2012-06-08T12:56:36.247
> 
> 标签：ios, cordova, childbrowser

我试图打开存储在我的 XCode 项目的 Resources/Documents 文件夹中的本地 PDF。我放在 .js 文件中的代码是：

```
Cordova.exec("ChildBrowserCommand.showWebPage", "file://"+pdf ); 
```

其中 pdf 是文件的名称，每个文件都会更改。但是 ChildBrowser 没有打开它。我怎样才能解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T08:19:26.073

我可以自己解决。路径需要有三个斜杠所以我写了`Cordova.exec("ChildBrowserCommand.showWebPage", "file:///www/Documents/"+pdf );` 我认为如果文档目录位于 www 文件夹下它可以工作。

# performance - 网络固有的瓶颈是什么？

> ID：10949313
> 
> 赞同：2
> 
> 时间：2012-06-08T12:57:02.513
> 
> 标签：performance, networking

如果计算机必须获取一些信息，网络请求通常是最慢的可能来源之一。我的理解是，总的来说：

*   网络访问比磁盘慢得多
*   磁盘访问比 RAM 慢得多
*   RAM 访问比 CPU 寄存器慢得多

我的问题是：**平均而言，是什么让网络访问比磁盘慢得多**？

显然，这并不总是正确的：您**可能**拥有与同一房间内的服务器的超快网络连接和缓慢的硬盘驱动器。但就这个问题而言，请想象**一个普通用户在网上冲浪**：从磁盘读取数据将比从 Google 获取相同数据更快。

我能想到的一些与 HTTP 请求有关的部分是：

*   IP的DNS查找
*   建立 TCP 连接的三次握手
*   打包：将 HTTP 请求分解为 TCP 数据包，然后将它们放入 IP 数据包中，并使用所有必要的计数器和校验和等
*   传输：电信号穿过导线所需的时间
*   路由：发生在路由器内部的决策、缓冲等
*   处理：服务器对响应的制定
*   响应的所有传输和路由，包括重新发送丢失的数据包
*   排序和组装 TCP 数据包的内容并将 HTTP 响应返回给客户端

如果我错过了任何主要步骤，请告诉我。

在这些步骤中，忽略服务器处理（这实际上不是网络问题），是否有任何部分特别慢？它们中的任何一个都解释了网络请求中的大部分固有延迟吗？

## 更新：一些数字

> 平均 DNS 查找需要 60~120 毫秒，然后是完整的往返 (RTT) 来执行 TCP 握手 - 加起来，这会在我们发送请求之前产生 100 到 200 毫秒的延迟！

*   资料来源：[Chrome 网络：DNS 预取和 TCP 预连接](http://www.igvita.com/2012/06/04/chrome-networking-dns-prefetch-and-tcp-preconnect)，作者 Ilya Grigorik，Google 开发人员倡导者

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:02:40.590

物理传输延迟（即每个请求的开销至少为 2 **距离*/*光速*）往往胜过任何其他性能因素。您可以通过将本地系统的请求时间与远程系统的请求时间进行比较来检查。例如，在极快的互联网连接上，我得到以下结果：

```
$ /usr/bin/time --quiet -f %e wget -q -O/dev/null www.google.com/404
0.05
$ /usr/bin/time --quiet -f %e wget -q -O/dev/null localhost/404
0.01
# A machine in the same LAN
$ /usr/bin/time --quiet -f %e wget -q -O/dev/null 192.168.1.42/404
0.01 
```

假设 google 的网络服务器（在带宽、内存、缓冲、硬盘等方面）不比我正在运行的 apache 慢，这意味着即使使用这种极快和低延迟的连接，并连接到*google*，通过网络的时间使任何其他问题（例如本地处理）相形见绌。

现在您可以假设这是因为路由开销和[缓冲区](http://en.wikipedia.org/wiki/Buffer_bloat)左右（让我们暂时排除丢失的数据包，因为它们高度依赖于介质）。您可以通过比较通过 Internet 发送数据包所需的时间与使用直流网络电缆所需的时间来确定这些因素的影响。

例如，对于从杜塞尔多夫到洛杉矶的数据包，[Wolfram Alpha](http://www.wolframalpha.com/input/?i=los+angeles+to+d%C3%BCsseldorf)计算的物理距离为 31 毫秒（当前光纤电缆为 43）。假设电缆在两个城市之间以完美的线路运行（他们当然不会），这构成了我测量的 85 毫秒实际延迟的一半。

因此，尽可能减少对等点之间的距离以及往返次数至关重要。如果消息与可用带宽相比较小，则 TCP 和 SSL/TLS 握手将因此成为网络缓慢的主要原因。显然，对于较大的文件（或者如果存在瓶颈，这可能[比您预期的更频繁地](http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=282603)发生）带宽也成为一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:01:23.720

我认为数据包传输和数据包丢失/重新发送在延迟中占最大份额

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T13:01:58.587

显然距离是一个很大的因素。

从 HDD 数据只能传输很短的距离，可能是 12 英寸。通过网络，数据将传输很远的距离。

请记住，网络传输还需要从 HDD 读取，因此它总是比直接从硬盘驱动器读取要慢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T13:07:39.100

There's also the fact that if you're requesting data from a server somewhere, that server needs to go through its RAM and its physical storage to grab what you need.

# iphone - 为 http 直播流转码片段文件而不会卡顿

> ID：10949319
> 
> 赞同：2
> 
> 时间：2012-06-08T12:57:31.007
> 
> 标签：iphone, ios, ffmpeg, http-live-streaming, transcode

我为我的 HTTP 直播流服务将多播视频流分割成小的 ts 文件，效果很好。然后我发现源的比特率太高（1.5mbps），所以我设置了一个后台作业，使用 FFmpeg 将 ts 文件转码为更小的比特率（500kbps）。问题是 500k .m3u8 播放卡顿（在每个新文件加载时）并且不如 1.5mbps 的流畅。

我的转码命令行如下：

```
ffmpeg -i /home/rca/tst.ts -f mpegts -acodec libmp3lame -ar 48000 -ab 64k -vcodec libx264 -b 500k /home/rca/tst.ts 
```

对此有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T15:03:33.870

降低分辨率和/或丢帧。这是您用于低带宽连接的交易空间。

幸运的是，一位同事 ( [@enobrev](https://stackoverflow.com/users/14651/enobrev) ) 在审查各种降低带宽的方法方面做了一些出色的工作：

从原始未编码格式开始是最好的，否则在 ffmpeg 中设置比特率不会有太大作用（但会降低分辨率和帧速率）。

`ffmpeg -i audio.wav -i "concat:0.avi|1.avi|2.avi" -vcodec libx264 -preset fast -crf 23 -threads 0 -b:v 64000 -r 10 -vf "scale=240:-1" -ab 24k -ar 22050 -map 0 -vbsf h264_mp4toannexb -f segment -segment_time 10 -segment_format mpegts -segment_list autoStream.m3u8 -segment_list_type m3u8 out_lowres_64kbps%d.ts`

`ffmpeg -i audio.wav -i "concat:0.avi|1.avi|2.avi" -vcodec libx264 -preset fast -crf 23 -threads 0 -b:v 300000 -r 24 -vf "scale=480:-1" -ab 96k -ar 22050 -map 0 -vbsf h264_mp4toannexb -f segment -segment_time 10 -segment_format mpegts -segment_list autoStream.m3u8 -segment_list_type m3u8 out_midres_300kbps%d.ts`

`ffmpeg -i audio.wav -i "concat:0.avi|1.avi|2.avi" -vcodec libx264 -preset fast -crf 23 -threads 0 -b:v 1200000 -r 24 -vf "scale=640:-1" -ab 192k -ar 44100 -map 0 -vbsf h264_mp4toannexb -f segment -segment_time 10 -segment_format mpegts -segment_list autoStream.m3u8 -segment_list_type m3u8 out_hires_1.2mbps%d.ts`

您可以调整更多参数，但在上面我设置比特率-b：v，帧率-r，视频分辨率-vf和音频比特率-ab（我认为）和音频采样率-阿尔

# java - 将日历添加到 JSF 页面

> ID：10949321
> 
> 赞同：1
> 
> 时间：2012-06-08T12:57:50.423
> 
> 标签：java, html, jsf

谁能帮助我如何在 JSF 页面中添加弹出日历。我需要添加一个日历，用户将在其中选择日期，并且所选日期应显示在文本框中。谁能帮我实现富面日历？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:10:19.543

您可以通过以下方式使用丰富的面孔日历：-

```
<rich:calendar id="dtDOB" value="#{Bean.variableName}" styleClass="textBox"
     datePattern="dd-MMM-yyyy" required="true" 
    label="#{Something}" validator="Validator.Something" /> 
```

variableName 将在您的支持 bean 中具有 setter 和 getter。数据类型将是 Date。因此，当您实际选择日期并提交页面时，您的 getter 将包含所选日期。用于 `getVariableName()`检索选定的值。

你的 bean 应该是这样的：-

```
@ManagedBean(name="Demo")  //Annotation.You can also define this entry in faces-config.xml
@RequestScoped    //Scope of the bean

public class TestDemo
{
private Date dtDateOfBirth;

public Date getDtDateOfBirth() {
        return dtDateOfBirth;
    }

    public void setDtDateOfBirth(Date dtDateOfBirth) {
        this.dtDateOfBirth = dtDateOfBirth;
    }
} 
```

您修改后的 rich:calendar 应如下所示：-

```
<rich:calendar id="dtDOB" value="#{Demo.dtDateOfBirth}" styleClass="textBox"
     datePattern="dd-MMM-yyyy" required="true" 
    label="#{Something}" validator="Validator.Something" /> 
```

如果您不想使用验证，请从 rich:calendar 标记中删除验证器和必需属性

# plugins - CakePHP 2.1 在主控制器中调用插件模型

> ID：10949322
> 
> 赞同：2
> 
> 时间：2012-06-08T12:57:50.797
> 
> 标签：plugins, cakephp-2.1

我正在使用插件，所以我在插件模型中定义了一些功能。那么如何在主控制器中而不是在插件控制器中调用它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T14:09:33.407

您可以使用：

```
public $uses = array('ModelName1', "SomeothermodelName", 'DebugKit.ToolbarAccess'); 
```

这将加载：

1.  来自 app/Model 的“ModelName1”和“SomeothermodelName”——因此是应用程序本身。
2.  Plugin/DebugKit/Model 中的“ToolbarAccess.php”通过“ **DebugKit.ToolbarAccess** ”

加粗部分（**DebugKit.ToolbarAccess**）就是所谓的[插件语法](http://book.cakephp.org/2.0/en/appendices/glossary.html#term-plugin-syntax)。

现在在您的控制器中，您应该能够像这样访问 ToolbarAccess 模型（示例）：

```
$this->ToolbarAccess->find('list'); 
```

您也可以`$this->loadModel(DebugKit.ToolbarAccess);`从控制器尝试。

# java - Java 小程序 - 删除/忽略所有 cookie (JSoup)

> ID：10949323
> 
> 赞同：1
> 
> 时间：2012-06-08T12:57:51.833
> 
> 标签：java, applet, jsoup

我编写了一个 Java 小程序，它从单个主机的多个页面中获取 HTML 内容并从中提取数据。我使用 Jsoup，它运行良好，但它会自动为浏览器中设置的主机使用 cookie，并在后续请求中发送新设置的 cookie。（我相信这是由 Java 本地完成的）

我希望它在运行小程序时忽略服务器设置的所有 cookie，并忽略浏览器可能已经拥有的任何 cookie。

我的代码非常简单。

```
String url = "http://example.com/my/web-page.html";
Document document = Jsoup.connect(url).userAgent("<hard-coded static value>").get();
// Extract data from document with org.Jsoup.nodes.Document.select(), etc. 
```

这会重复使用多个 URL，所有 URL 都具有相同的主机 (example.com)。

总之，我基本上希望它：

1.  忽略可能在浏览器中设置的 example.com 的任何 cookie。
2.  如果小程序发出请求时服务器设置了任何新的 cookie，则在后续请求中忽略它。如果可能，还要阻止 cookie 存储在浏览器中。

我已经搜索了很多，但无法找到解决方案。我真的很感激任何帮助。我不介意使用 Apache HTTPClient 或任何其他第三方库，但我不想这样做，这样我可以保持小程序的文件大小很小。

提前致谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:35:32.563

而不是使用`Connection`（`Jsoup.connect("url");`方法的结果返回），使用`Response`

```
Map<String, String> cookies = new HashMah<String, String>();

Response res = Jsoup
    .connect("url")
    .cookies(cookies)
    .userAgent("userAgent")
    .method(Method.GET) //Or whatever method needed be
    .execute(); 
```

我知道这是一条巨大的线路，但这会很好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-08T13:33:02.887

您应该`org.jsoup.Connection.Request`为此进行操作：

```
 String url = "http://example.com/my/web-page.html";
    Connection con = Jsoup.connect(url).userAgent("<hard-coded static value>");
    ...
    con.get();
    ...
    Request request = con.request();
    Map<String, String> cookies = request.cookies();
    for(String cookieName : cookies.keySet()) {
        //filter cookies you want to stay in map
        request.removeCookie(cookieName);
    } 
```

您还应该禁用`followRedirects`并手动进行重定向（删除 cookie）。您必须实现自己的“Cookie/域移除器”。

`JSoup`在内部使用`java.net.HttpURLConnection`，并且您无法以某种方式拦截实际调用`execute`方法的核心功能，`org.jsoup.helper.HttpConnection.Response.execute(...)`因为它是静态的并且具有包保护访问。您也`req`不能`res`在`HttpConnection`. 此外，您无法实现自己的（或由于构造函数而`org.jsoup.Connection`扩展其实现）添加强制 JSoup 来使用它。`HttpConnection``private`

考虑到以上所有我的建议 - 使用 HttpClient / HtmlUnit - 因为你最终会在受限环境中“重新发明轮子”。

# php - 如何在 Symfony2 中创建基于 API 的 Web 服务

> ID：10949326
> 
> 赞同：12
> 
> 时间：2012-06-08T12:57:55.453
> 
> 标签：php, model-view-controller, api, symfony

我正在尝试使用 Symfony2 创建一个基于 API 的服务，这是我们公司倾向于使用的主要框架。我被告知要研究创建 Web 服务的最佳方式，即：REST、SOAP 等。我不是一个很有经验的程序员。我只是想研究主题。

我们基本上需要的是一个系统，该系统将提供 API 以在任何平台或设备上制作其他应用程序。例如：我可以使用 Twitter API 来发布/获取推文。同样，我们正在尝试创建一个 E-comm 产品，以帮助其他用户在平台之上构建站点和应用程序，而不管编程语言、设备或操作系统如何。

我们正在尝试将我们的产品从纯“MVC 应用程序”转换为基于 API 的服务。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-04T05:34:29.113

查看这篇文章[REST APIs with Symfony2: The Right Way](http://williamdurand.fr/2012/08/02/rest-apis-with-symfony2-the-right-way/) by William Durand 关于设计 REST API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-23T00:15:37.967

我认为您可以查看的最佳回购是：

[https://github.com/lsmith77/symfony-rest-edition](https://github.com/lsmith77/symfony-rest-edition)

这是一个教程

[http://welcometothebundle.com/symfony2-rest-api-the-best-2013-way/](http://welcometothebundle.com/symfony2-rest-api-the-best-2013-way/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-27T08:33:22.007

我相信上面给出的答案并不是对 FOSRestBundle 世界的介绍，所以我推荐这个关于如何正确设置 FOSRestBundle 的[详细入门教程](http://intelligentbee.com/blog/2015/11/03/getting-started-with-building-apis-in-symfony2/)，其中包含易于理解的控制器示例、表单处理等。

# scala - 第二单子定律:单位

> ID：10949328
> 
> 赞同：4
> 
> 时间：2012-06-08T12:57:57.240
> 
> 标签：scala, functional-programming, monads

我正在阅读James Iry在 scala 中关于 Monads[的博客文章。](http://james-iry.blogspot.com/2007/10/monads-are-elephants-part-3.html)我在第三部分，我对他关于单元的单子第二定律的描述感到困惑。特别是这种说法：

```
 unit(x) flatMap f = f(x) 
```

当我应用我的心理示例时，这些示例是 jame 以前的一元类型示例，这似乎永远不会奏效

```
 val x = 1
 val f = (_:Int) * 2
 f(x) == 2 //true
 List(x) flatMap f == 2 //fail
 Some(x) flatMap f == 2 //fail 
```

事实上，由于类型问题，它们甚至没有编译。

为了澄清，我理解为什么这些都失败了。我了解如何修复它们以便它们编译。

我的困惑是，这些似乎与文章中提出的理论相冲突。我缺少一个步骤吗？这些类型不是真正的单子吗？题为“单子第二定律：单位”的部分不正确吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T13:02:40.217

Scala`flatMap`需要一个返回集合的函数，而不是返回单个元素的函数，比如你的 function `f`。

要么使用`map`：

```
List(x) map f 
```

或者让你的函数返回一个集合：

```
val f = (x: Int) => List(x * 2)

List(x) flatMap f 
```

请注意，它还将返回一个集合，而不是单个整数（您将得到`List(2)`，而不仅仅是`2`）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-08T13:11:09.947

由于类型问题而无法编译的事实应该告诉你一些事情：`f`不是单子法则适用的那种函数！

`flatMap`，当被视为单子操作而不是集合操作时，它采用“单子值”和从普通值到单子值的函数。你的`f`函数是一个从普通值到普通值的函数。

传递`f`给`flatMap`不会违反一元法则，它根本没有任何意义。这是一个无效的表达。同样`1 + "fork" - 1`不违反算术定律`1 + x - 1 = x`；根据这条定律，我们可能会得出结论，`1 + "fork" - 1`应该等于“fork”，而实际上它是编译器错误。不过，那将是一个愚蠢的结论；法律只谈论类型正确的事情。

# jquery - 如何处理这个 json 响应

> ID：10949337
> 
> 赞同：1
> 
> 时间：2012-06-08T12:58:51.670
> 
> 标签：jquery, ajax, json

我无法弄清楚如何处理 json 响应。我只需要将所有的 html 部分放入一个 div 中。所以我可以在控制台中看到请求成功并返回如下内容：

```
{"goto_section":"review","update_section":{"name":"review","html":" <div> A bunch of html</div>"}} 
```

我如何接受这个响应并将其放入我的 div 中？

```
$('my-div').html(response); 
```

感谢您的帮助，如果您知道任何可以让我了解更多信息的好资源，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:00:25.207

```
$('my-div').html(response.update_section.html); 
```

还要确保如果您正在使用`$.post`or `$.get`，请将回调后的参数设置为`json`，或者如果您正在使用`$.ajax`，请设置`dataType:json`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T13:02:16.937

使用此代码：

```
var html = response.update_section.html;
// or using brackets: response["update_section"]["html"];

$('my-div').html(html); 
```

JSON 是一个 JavaScript 对象。这是阅读有关使用 JavaScript 对象的好参考：

*   [https://developer.mozilla.org/en/JavaScript/Guide/Working_with_Objects](https://developer.mozilla.org/en/JavaScript/Guide/Working_with_Objects)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T13:01:02.070

首先，在 jQuery 请求和成功回调中使用“JSON”作为数据类型：

```
$(...).html(data.update_section.html); 
```

# php - 更新 MySQL 数据库中的 Backbone.js 模型

> ID：10949341
> 
> 赞同：1
> 
> 时间：2012-06-08T12:59:02.273
> 
> 标签：php, javascript, mysql, backbone.js

我有以下模型：

```
var Car = Backbone.Model.extend({
    url: "/save.php",
    defaults: {
        color: "red"
    }
}); 
```

文档准备好后，我创建模型的一个新实例并保存它：

```
new volvo = new Car({color:"green"});
volvo.save(); 
```

然后在服务器中，我为新车分配一个 id 并将其返回给客户端（使用 PHP）：

```
$request_method = strtolower($_SERVER['REQUEST_METHOD']);

switch ($request_method) {
    case 'post':
        $data = json_decode(file_get_contents('php://input'));
        $color = $data->{'color'};
        $car = array('id'=>1, 'color'=>$color);
        echo json_encode($car); //I use this to send the response to the client
                               //but I am not sure if this is the right way
    break;

    case 'put':
        //code to handle this case
    break;
} 
```

问题是，当我想更新汽车模型沃尔沃的新实例时，主干假定沃尔沃始终是新模型，因此发出 POST 请求，但我希望它更新现有模型沃尔沃，例如这个：

```
new volvo = new Car({color:"green"});
volvo.save();

console.log( volvo.attributes ); //in here an id appears
console.log( volvo.get('id') ); //this returns 'undefined' 

volvo.save({color:"red"}); //this saves in the database a new model, not desired 
```

关于为什么会这样的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:23:49.630

检查这个例子：

```
var volvo = new Car({color:"green"});

// Create a new car model.
console.log(volvo.isNew());  // Output: true
volvo.save();

console.log(volvo.isNew());  // Output: false
console.log(volvo.id);   // Output: 1
// Update the color of the already created model to red.
volvo.save({color:"red"}); 
```

现在，如果您想在代码的另一部分中获取已经创建的模型，您将必须知道 id。

```
var volvo = new Car({id: 1});

// Update the model.
console.log(volvo.isNew());  // Output: false
volvo.save({color: "blue"}); 
```

备注：服务器应返回使用 id 创建的模型的**JSON**。

希望这有帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T13:10:08.723

检查您是否确实在发布响应中发送了 id 属性。没有 id 的模型被视为新模型，因此在保存时创建而不是更新。

# sql - sql查询根据shiftno计算金额？

> ID：10949344
> 
> 赞同：1
> 
> 时间：2012-06-08T12:59:09.743
> 
> 标签：sql, sql-server

我的表如下所示：

```
shiftno     sno     Amount
  100         7       20
              8       50
  101         9       10
             10       30
             11       20 
```

我试过这个查询

```
select SUM(Amount) 
from example 
where shiftNo = (select (max(shiftNo)) from example 
```

它显示结果 = 10，但实际结果是 10 + 30 + 20 = 60。属于 shiftno=101

**我怎样才能得到60的总结果？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T13:02:31.040

如果你想要最高的`shiftNo`使用`limit 1`。
如果你想要所有`shiftNo`和他们`amount`然后离开这`limit`条线：

```
 select shiftNo, SUM(Amount) as MaxAmount
 from exmple 
 group by shiftNo
 order by shiftNo desc
 limit 1 
```

# eclipse-plugin - gef 矩形图单击

> ID：10949346
> 
> 赞同：1
> 
> 时间：2012-06-08T12:59:22.380
> 
> 标签：eclipse-plugin, eclipse-gef, draw2d

我在 Draw2d 和 GEF 中做一个小项目。我需要通过 performRequest() 方法获得单击。目前我正在通过performRequest（）双击。我在那里检查 request.getType()== open 然后是双击。但是对于单击如何检查？没有鼠标监听器可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T18:54:39.513

单击即可`RequestConstants.REQ_SELECTION`。双击是`RequestConstants.REQ_OPEN`。

# ruby-on-rails - Vagrant，lucid32，postgres：致命：用户“postgres”的身份验证失败

> ID：10949347
> 
> 赞同：0
> 
> 时间：2012-06-08T12:59:24.453
> 
> 标签：ruby-on-rails, postgresql, vagrant

当我尝试：

```
rake db:migrate 
```

我得到：

```
rake aborted!
FATAL:  Ident authentication failed for user "postgres" 
```

当我没有问题时

```
vagrant@lucid32:/sudo su - postgres
postgres@lucid32:/ psql
postgres# (can list databases) 
```

这是我的 pg_hba.conf 文件：

```
# TYPE  DATABASE    USER        CIDR-ADDRESS          METHOD

# "local" is for Unix domain socket connections only
local   all         all                               trust
# IPv4 local connections:
host    all         all         127.0.0.1/32          trust
# IPv6 local connections:
host    all         all         ::1/128               trust
# Vagrant uses 33.33.33.10 like addresses
host    all         all         33.33.33.0/24         trust 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:00:43.123

假设您尝试重新启动 PostgreSQL，但您仍然收到不是整个 pg_hba.conf 的错误。

一些发行版在表格上方有一个额外的行，将 postgres 设置为 ident。搜索 postgres 字符串并更正显示的行。

# java - 为什么不重新评估条件？

> ID：10949348
> 
> 赞同：1
> 
> 时间：2012-06-08T12:59:34.610
> 
> 标签：java, multithreading, sockets, loops, while-loop

我有两个 while 条件，一个在另一个里面，用布尔值来控制它们。基本上，一个用于终止共享，另一个用于侦听连接。用户可以选择禁用共享，在这种情况下，服务器会停止侦听，但不会终止。如果用户选择终止，则两个布尔值都设置为 false 并且循环结束。

这是我的代码：

```
 public void run() {
            while (!terminate) {  
                while (listening) {
                    try {
                        // accept connection -> create a new thread for each client
                        ClientServerShareInstance clientServerShareInstance = new ClientServerShareInstance(serverSocket.accept(), ui);
                        Thread clientServerThread = new Thread(clientServerShareInstance);
                        clientSockets.add(clientServerShareInstance);
                        connectedClients++;
                        clientServerThread.start();
                    } catch (IOException ex) {
                    }
                }
            }
        }

        public void closeAllClientConnections() {
            for (Iterator it = clientSockets.iterator(); it.hasNext();) {
                ClientServerShareInstance clientServerShareInstance = (ClientServerShareInstance) it.next();
                clientServerShareInstance.closeAllConnections();
                it.remove();
            }
            try {
                this.serverSocket.close();
            } catch (IOException ex) {}
            this.setActive(false);
            this.connectedClients = 0;
        }

        public void openConnection() {
            try {
                serverSocket = new ServerSocket(portNumber, 0, Inet4Address.getLocalHost());
                setActive(true);
            } catch (IOException ex) {}
        }
    } 
```

该`closeAllClientConnections()`方法禁用共享（不终止它），并`openConnection()`重新启用该共享。

问题是，如果我禁用共享，它应该只是`terminate`无限期循环 while cicle，测试`listening`. 当我设置`listening`为 时`true`，它应该重新进入第二个 while 循环并再次开始侦听，因为我确实打开了服务器套接字（虽然它与此无关，但我只是说它必须再次初始化，因为我关闭它时我禁用共享）。但是，禁用后，它永远不会租用`listening`循环，即使`openConnection()`被调用也是如此。

有人知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T13:05:24.163

没有足够的代码显示任何错误。但这里有一些可能会有所帮助的评论。

*   `shutdown`和布尔值都`listening`需要是`volatile`。线程之间共享的任何字段都需要以某种方式同步，否则其他线程将看不到对其值的更改。

*   `serverSocket`也需要，`volatile`因为它似乎是由调用者创建但在循环中`openConnection()`消耗的。`while`您可能会考虑将 active 设置为 true in`openConnection()`并`serverSocket`完全由接受线程管理。

*   `clientSockets`看起来是一个集合。这将需要一个同步连接，因为它看起来被多个线程访问。同样，更好的模式是`closeAllClientConnections()` 调用*只*设置一个布尔值，线程本身将执行关闭。这消除了使用集合等的任何竞争条件。

*   看起来如果你是`! terminating`你的接受线程将会旋转。至少你应该放一些`Thread.sleep(100)`或一些东西来减慢它。等待/通知会更好。

重要的是要意识到这*不仅仅是*线程程序中“同时”发生的事情。它也与内存缓存有关。接受线程可能在`clientSockets` `ArrayList1`一分钟前添加了一些东西，如果列表没有以某种方式同步，另一个线程可能看不到这些更改。更糟糕的是，某些部分`ArrayList`可能已在内存中更新，而其他部分可能会导致异常。要获得同步的集合，您应该创建您的`ArrayList`喜欢：

```
List<...> clientSockets = Collections.synchronizedList(new ArrayList<...>()); 
```

听起来您应该阅读一些有关为什么需要同步的文档：

> [http://docs.oracle.com/javase/tutorial/essential/concurrency/sync.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/sync.html)

# ruby - Ruby 获取带有动态内容的 HTML 源代码

> ID：10949357
> 
> 赞同：0
> 
> 时间：2012-06-08T12:59:50.663
> 
> 标签：ruby

我正在尝试加载页面的动态内容以及静态 HTML。例如，在[http://www.balsamiq.com/](http://www.balsamiq.com/) ，如果我只加载 HTML，它将丢失页面底部的大推荐框。我知道我可以使用加载 html

```
html = open(url).read 
```

但同样，这将丢失页面加载时显示的动态内容。如何获得与人类查看网站时所获得的内容相匹配的完整 HTML？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:15:50.577

我通过使用[Mechanize](https://github.com/tenderlove/mechanize) ruby​​ gem 并设置 user_agent 解决了我的问题。虽然不一定是我的问题的答案，但我将 user_agent 设置为搜索机器人，并且带有 javascript 的页面以不太动态的形式显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:13:59.430

瓦蒂尔在这里也可能对您有所帮助。

# xml - Excel 中的 XML 数据导入

> ID：10949359
> 
> 赞同：1
> 
> 时间：2012-06-08T12:59:51.950
> 
> 标签：xml, excel, xml-parsing, xsd

我有一个巨大的 XML，我想在 excel 中导入。这是我要导入的一段 XML。

```
<ROOT>
  <ELEMENTS>
    <ELEMENT1>
      <A>1</A>
      <B>2</B>
      <C>3</C>
    </ELEMENT1>
    <ELEMENT2>
      <A>3</A>
      <B>2</B>
      <C>1S</C>
    </ELEMENT2>
  </ELEMENTS>
</ROOT> 
```

当我将此 XML 导入 Excel 时，我看到标题为`A`,`B`和`C`，但我没有得到`ELEMENT1`和`ELEMENT2`作为标题。
我在这里做错了什么？我的 XML 结构很好，我得到了一个很好解析的 XML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:14:17.033

列是 A,B,C 行是元素的每个成员

实际上，Excel 需要二维数组行和列。

不知道你想实现什么，但尝试

```
<ROOT>
  <ELEMENTS> 
    <ELEMENT> 
      <TYPE>1</TYPE>
      <A>1</A> 
      <B>2</B> 
      <C>3</C> 
    </ELEMENT> 
    <ELEMENT> 
      <TYPE>2</TYPE>
      <A>3</A> 
      <B>2</B>
      <C>1S</C> 
    </ELEMENT> 
  </ELEMENTS> 
</ROOT> 
```

应该有指导意义

# excel - 如何在设定的时间后自动保存并退出工作表？(Excel VBA)

> ID：10949361
> 
> 赞同：2
> 
> 时间：2012-06-08T13:00:01.900
> 
> 标签：excel, vba

如果超过 5 分钟没有活动，有没有办法让打开的工作表自行关闭？

例如：我在工作表上工作了一段时间，然后在该工作表打开的情况下离开 20 分钟。网络上的某个人需要访问工作表，但不能因为我在上面。

我想要它，以便在我离开办公桌超过 5 分钟后，工作表将自行保存并关闭所述工作表。

这可能吗？如果有怎么办？我可以找到显示如何保存和关闭工作表的脚本，但我还没有找到使用计时器的脚本......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T14:56:53.290

这是来自链接的信息，所以这个问题可以作为参考：

将此代码作为模块插入：

```
' DateTime  : 09/05/2007 08:43
' Author    : Roy Cox (royUK)
' Website   :  Clck here for more examples and Excel Consulting
' Purpose   : Place in a standard module
' Disclaimer; This code is offered as is with no guarantees. You may use it in your
'             projects but please leave this header intact.

'---------------------------------------------------------------------------------------
Option Explicit
Public EndTime
Sub RunTime()
    Application.OnTime _
            EarliestTime:=EndTime, _
            Procedure:="CloseWB", _
            Schedule:=True
End Sub
Sub CloseWB()
    Application.DisplayAlerts = False
    With ThisWorkbook
        .Save
        .Saved = True
        .Close
    End With
End Sub 
```

将其插入“ThisWorkbook”

```
Private Sub Workbook_Open()
    '--> Set Time Below
    EndTime = Now + TimeValue("00:00:00")
    RunTime
End Sub

Private Sub Worksheet_Change(ByVal Target As Range)
    If EndTime Then
        Application.OnTime _
        EarliestTime:=EndTime, _
        Procedure:="CloseWB", _
        Schedule:=False
        EndTime = Empty
    End If
    '--> Set Time Below
    EndTime = Now + TimeValue("00:00:00")
    RunTime
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T19:38:30.427

好的，在下面的原始答案中，经过更多研究，我想出了自己的答案。

打开开发人员部分后，您会找到工作表，将下面的代码放入 ThisWorkbook。这将允许您的代码在整个工作表中运行。我现在设置了一个 10:00 分钟的初始计时器，如果事后有活动，则设置一个 05:00 分钟的计时器。您可以将其更改为您想要的任何内容。

```
Option Explicit
Private Sub Workbook_Open()
    EndTime = Now + TimeValue("00:10:00")
    RunTime
End Sub

Private Sub Workbook_SheetChange(ByVal Sh As Object, ByVal Target As Range)
    If EndTime Then
        Application.OnTime _
                EarliestTime:=EndTime, _
                Procedure:="CloseWB", _
                Schedule:=False
        EndTime = Empty
    End If
    EndTime = Now + TimeValue("00:05:00")
    RunTime
End Sub 
```

这下面的部分需要进入一个新创建的模块，随意命名，我的叫SaveWB

```
Option Explicit

Public EndTime
Sub RunTime()
    Application.OnTime _
            EarliestTime:=EndTime, _
            Procedure:="CloseWB", _
            Schedule:=True
End Sub

Sub CloseWB()
    Application.DisplayAlerts = False
    With ThisWorkbook
        ThisWorkbook.Close savechanges:=True
    End With
End Sub 
```

我将代码更改为：

```
With ThisWorkbook
    .Save
    .Saved = True
    .Close
End With 
```

到它上面的东西。

```
 With ThisWorkbook
        ThisWorkbook.Close savechanges:=True
    End With 
```

我创建的部分作品，最初发布的部分作品在关闭但不保存。随心所欲地使用它，按照你认为合适的方式改变它，但我很高兴我让它工作了。

# windows-phone-7 - WP7 RootFrame_NavigationFailed

> ID：10949363
> 
> 赞同：1
> 
> 时间：2012-06-08T13:00:02.677
> 
> 标签：windows-phone-7, navigation

我在 WP7 中创建了一个新项目，并将名为 MainPage.xaml 的默认页面移动到一个子文件夹并将其重命名为 Main.xaml。

然后我去了 WMAppManifest.xaml 并将 Default Task 属性更改为：

```
<DefaultTask  Name ="_default" NavigationPage="MyProj\Central\UI\Main.xaml"/> 
```

其中 MyProj 是项目的名称，Central 和 UI 是文件夹。但是，这会引发异常并指出应用程序在启动应用程序时无法导航。

我该如何解决？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:24:19.547

您不需要`MyProj\`路径开头的位 - 假设 Central 是直接位于项目根目录下的目录。

# javascript - Javascript“卡住”键（未注册的 keyup 事件）

> ID：10949369
> 
> 赞同：4
> 
> 时间：2012-06-08T13:00:26.123
> 
> 标签：javascript, keyboard, coffeescript

使用 HTML5 画布和 javascript 开发一个小游戏。它工作得很好，除了键盘键偶尔会“卡住”，即。它会注册一个 keydown 事件，但有时它不会注册 keyup 事件。这通常发生在一次按下多个键时，因此部分是硬件或操作系统故障，但我希望有人对如何解决这个问题有想法。我的代码的相关部分（用咖啡脚本编写）：

```
press = (direction) ->
    switch direction
        when 'W'
            game.keys.W = true
        when 'S'
            game.keys.S = true
        when 'A'
            game.keys.A = true
        when 'D'
            game.keys.D = true

release = (direction) ->
    switch direction
        when 'W'
            game.keys.W = false
        when 'S'
            game.keys.S = false
        when 'A'
            game.keys.A = false
        when 'D'
            game.keys.D = false

doKeyDown = (evt) ->
    switch evt.keyCode
        when 87 then press 'W'
        when 83 then press 'S'
        when 65 then press 'A'
        when 68 then press 'D'

doKeyUp = (evt) ->
    switch evt.keyCode
        when 87 then release 'W'
        when 83 then release 'S'
        when 65 then release 'A'
        when 68 then release 'D'

window.addEventListener('keydown', doKeyDown, false)

window.addEventListener('keyup', doKeyUp, false) 
```

基本的东西。如果 javascript 不完全是事件驱动的，那将不是问题，但你能做什么。我目前关于如何规避该问题的想法是添加一个按键队列，可容纳 2 个或 3 个键，当超出限制时，删除第一个键并切换为“假” . *尽管如此，在应该*可以避免的情况下添加这样的人为限制似乎很奇怪！

那么，问题是，是否有一种直接的方法可以确保准确保存关键状态，而无需求助于变通方法？最好是独立于游戏帧率工作的东西（无论它是以 1000 fps 还是 3 fps 运行，都应该同样好用）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T15:58:27.163

由于`keydown`事件快速触发，您可以存储一个时间戳，记录您最后一次听到按键被按下的时间：

```
when 'A'
    game.keys.A = [true, +newDate()] 
```

`keydown`然后，运行一个间隔函数来检查仍然注册为按下但在一段时间内（例如，1 秒）没有发送事件的键，并将它们设置为释放。

我上面的例子可能需要你重构很多代码（因为`game.keys.A`现在是一个数组而不是一个布尔值）。相反，您可以将时间戳保存在它们自己的对象中：

```
last_keydown_times = {};
...

when 'A'
    game.keys.A = true
    last_keydown_times['A'] = +new Date(); 
```

让间隔函数检查`last_keydown_times`（可能在`for...in`循环中）的成员并检查过期值：

```
setInterval(function() {
    var now = +new Date();
    for(key in last_keydown_times) {
        if(now - last_keydown_times[key] >= 1000) {
            // run the release code for this key
        }
    }
}, 1000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-28T21:44:37.703

如果在 OSX 上发生这种情况，请注意在按住键时您根本不会*收到*任何 keyup 事件。`cmd`

AFAICT*没有解决这个问题*。跟踪当前按下的键的唯一方法是通过 keyup/keydown 事件，而在 Mac 上，cmd 键会窃取您的这些信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T14:57:30.343

值得指出的是，`keydown`事件多于`keyup`事件实际上是预期的行为：当您按住一个键时，操作系统将报告为`keydown`多个在 Mac OS 10.7 下，具有默认的按键行为）。`keyup`只有当钥匙被物理释放时，你才会得到一个。

当然，您的代码不应受到此问题的影响。因此，如果您确实处于释放密钥后很好的`game.keys.A`情况，您应该将其报告为您遇到问题的浏览器中的错误。我不相信解决方法是可能的。`true``A`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T15:00:14.280

这是除了更昂贵的键盘之外的所有键盘的常见问题。

举个例子，试着玩一个游戏，你可以用箭头键移动，用空格键开火。您会发现按两个箭头可能会导致您无法射击。

不幸的是，您无法解决此问题，因为很多键盘都不同。您应该做的是允许用户在遇到问题时自定义他们的控件，以便他们可以更改为一组没有此问题的控件。

# google-chrome-extension - 从 Chrome 扩展内容脚本将 iframe 调整为动态内容

> ID：10949370
> 
> 赞同：2
> 
> 时间：2012-06-08T13:00:33.337
> 
> 标签：google-chrome-extension

在我的扩展中，我有一个内容脚本，它创建一个`<div>`包含`<iframe>`当前网页内部的内容（例如 www.google.com）。我将一个页面加载到 iframe 中，但内容必须是动态的，所以我首先使用`sendRequest`. 然后 iframe 页面查询背景页面（再次使用`sendRequest`），获取 HTML 并将其添加到页面的正文中。

问题是添加动态内容时 iframe 的大小不正确，因此它有滚动条。我想做这样的事情：

```
iframe.addEventListener("DOMContentLoaded", function(event) {
    div.style.height = iframe.style.height = iframe.contentDocument.body.scrollHeight;
    div.style.width = iframe.style.width = iframe.contentDocument.body.scrollWidth;
}, false); 
```

不幸的是，我有两个问题。首先，该`DOMContentLoaded`事件永远不会被触发（为什么？）。其次，我大概无法访问，`iframe.contentDocument`因为 iframe 是从不同的域加载的。

我可以使用 iframe`sendRequest`将其大小发布到托管页面可以使用的位置。但是，我也使用相同的代码将 iframe 插入到弹出窗口中，因此没有简单的方法来发送请求（因为它将`chrome.tabs.sendRequest`用于内容脚本，但`chrome.extension.sendRequest`用于弹出窗口）。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T15:44:43.477

又摸索了一下，找到了解决办法。iframe 一旦加载了动态内容，就会调用：

```
var size = { height: document.body.scrollHeight, width: document.body.scrollWidth };
top.postMessage(JSON.stringify(size), "*"); 
```

父窗口包含：

```
window.addEventListener("message", function(event) {
    var size = JSON.parse(event.data);
    iframe.style.height = div.style.height = size.height + "px";
    iframe.style.width = div.style.width = size.width + "px";
}); 
```

# android - html文件由常量R

> ID：10949372
> 
> 赞同：0
> 
> 时间：2012-06-08T13:00:34.563
> 
> 标签：android

我有一个 html 文件。我想用`R`我尝试以下代码的常量来引用它：

```
getResources().openRawResource(R.raw.3); 
```

我在`raw`目录中创建了一个文件夹，`res`并包含了`file3.html`

编辑

...但不工作!!单词“R.raw.3”带下划线

编辑

我有另一个问题。我有一个包含要访问的文件名的数组。我怎样才能访问这样的声明？getResources().openRawResource(R.raw.xxx);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:01:19.357

如果您在 res 文件夹下的 raw 文件夹中有一个名为**file3.html的文件，则您的 R.java 文件将包含一个原始类，例如：**

```
 public static final class raw {
        public static final int file3=0x7f040000;
    } 
```

因此，您应该使用`R.raw.file3`而不是`R.raw.3`因为**3**不是有效的资源名称，如果您将文件重命名为 3.html，您将在 R.java 文件中 发现**无效的 VariableDeclaratorId错误**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:08:44.487

您应该将 html 文件放在 assets 文件夹中。在它们中，您可以使用 AssetManager 引用它。

# matlab - matlab 是如何快速运行这段代码的？

> ID：10949376
> 
> 赞同：3
> 
> 时间：2012-06-08T13:00:39.247
> 
> 标签：matlab, matrix

我在matlab中有这段代码

```
b = 0.25*ones(4)
a = [0 1 1 1 ; 1/3 0 0 0 ; 1/3 0 0 0; 1/3 0 0 0] 

m = .85*a + .15*b

v = [1/4 1/4 1/4 1/4]

m^1e308*v' 
```

1.  matlab怎么跑得`m^1e308*v'`这么快？它应该乘以矩阵`1e300`时间，但它可能会做一些其他的计算，它是什么？
2.  为什么`m^1e309*v'`给出：

    答案=

    ```
     NaN
       NaN
       NaN
       NaN 
    ```

3.  `m^inf`不使用符号变量如何查看内容？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T13:07:45.513

> matlab怎么跑得`m^1e308*v'`这么快？

我不能告诉你 Matlab 的内部在做什么，但请注意，一般来说，`A^n`可以及时完成`O(log n)`，而不是`O(n)`时间。

例如，`A^16 = (((A^2)^2)^2)^2`。

您还可以使用特征分解将其转换为标量幂，即如果`A = U*V*U'`，则幂为`U * V^N * U'`，其中`V`是对角矩阵。

> 为什么`m^1e309*v'`给`NaN`？

双精度不能表示`1e309`.

> `m^inf`不使用符号变量如何查看内容？

使用上述特征分解。如果任何一个特征值小于 1，它们将变为 0，如果它们中的任何一个大于 1，它们将变为无穷大。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T13:20:15.897

MATLAB is so fast because it uses a [Basic Linear Algebra Subprograms (BLAS) Library](http://en.wikipedia.org/wiki/Basic_Linear_Algebra_Subprograms). The level of optimization goes right down to the CPU level, with AMD and Intel writing optimized libraries for their architectures.

BLAS is used to build the foundation of the MATLAB (MATrix LABoratory), as BLAS was used to build [Linear Algebra Package (LAPACK)](http://en.wikipedia.org/wiki/LAPACK). LAPACK provides all the low-level matrix commands in MATLAB (such as the transpose `'` and matrix multiplication in `m = .85*a + .15*b`). It's written in FORTRAN and is open source, so what most people don't know is that MATLAB is arguably selling you convenience and a GUI.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T13:38:24.657

正如其他人所解释的，[对角化](http://en.wikipedia.org/wiki/Diagonalizable_matrix#An_application)可用于有效计算矩阵的幂。自己试试：

```
[V,D] = eig(M);             %# M = V*D*inv(V)
V*(D.^realmax)/V            %# M^n = V*D^n*inv(V) 
```

并比较：

```
M^realmax                   %# same as: mpower(M,realmax) 
```

* * *

### 编辑：

这是MathWorks 自己的话中的[答案：](http://www.mathworks.com/help/matlab/ref/arithmeticoperators.html#f75-20868)

> `^`
> 
> 矩阵电源。`X^p`是`X`幂`p`，如果`p`是标量。如果`p`是整数，则通过重复平方计算幂。如果整数为负数，`X`则先取反。对于 的其他值`p`，计算涉及特征值和特征向量，例如如果`[V,D] = eig(X)`，则`X^p = V*D.^p/V`。
> 
> If`x`是一个标量并且`P`是一个矩阵，使用特征值和特征向量将`x^P`其`x`提升到矩阵幂`P`。`X^P`，其中`X`和`P`都是矩阵，是一个错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T13:05:55.983

解决方案是否收敛？在一个指数 n 之后，它可能只是可以看到 m^n * m = m^n 等 m^1e30000=m^n

它甚至可以使用启发式算法，因为已知这些概率矩阵（每列中的总和 = 1 ；每个值在 0 和 1 之间）收敛于无穷大。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T13:12:27.093

我不知道matlab的内部结构，但对角化可能是解决方案（它也可能在内部并行化计算？）

查看本章：[对角化的应用](http://www.maths.lse.ac.uk/Personal/martin/fme4a.pdf)了解详情

# knockout.js - 如何在淘汰赛中将文本标签绑定到下拉列表的选定选项值？

> ID：10949384
> 
> 赞同：3
> 
> 时间：2012-06-08T13:01:14.800
> 
> 标签：knockout.js

有没有一种简单的方法来告诉敲除将下拉列表的选定值（不是 id、标签）绑定到另一个字段？我有一个中等复杂的用户界面，我想要一种简洁的方法，不仅可以在选项更改时将 id 和选项标签挂钩到字段。

就像是：

```
 <select data-bind="options: dropDownLists.Region,optionsText:'RegionName',optionsValue:'RegionId',value:regionFilterId,label:regionFilterName" > 
```

标签绑定与值绑定执行相同的操作，但使用选项的标签。我怀疑我需要一个自定义绑定，但我想避免重新发明轮子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T13:26:40.553

不确定我是否正确理解了您的要求，但如果您不关心 HTML，为什么不这样做：

```
<select data-bind="options: dropDownLists.Region,optionsText:'RegionName',value:regionFilter"></select> 
```

未使用“optionsValue”绑定，因此“value”绑定仅使用 ID 更新 observable no，但使用完整对象。这使得编写两个计算的 observable 变得容易，它们返回所选区域的 ID 和名称：

```
self.regionFilter = ko.observable();

self.regionFilterId = ko.computed(function() {
    var region = self.regionFilter();
    if (region) return region.RegionId;
});

self.regionFilterName = ko.computed(function() {
    var region = self.regionFilter();
    if (region) return region.RegionName;
}); 
```

[http://jsfiddle.net/VA7aF/](http://jsfiddle.net/VA7aF/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-12T12:10:30.690

或者，您可以使用订阅：

```
self.regionFilter = ko.observable();
self.regionFilterId  = ko.observable();
self.regionFilterName = ko.observable();

self.regionFilter.subscribe(function(region) {
    self.regionFilterId(region.RegionId());
    self.regionFilterId(region.RegionName());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-21T19:53:22.587

上面建议的方法会让我为模型中的每个 ID/Name 对创建一个计算值。

我写了一个自定义绑定，支持这一点。所以现在，我可以传入我的对象并获取“名称”字段。

希望这可以帮助：

HTML 绑定：

```
<span>Agency: </span><span data-bind="keyvalue:Agency,data:'Name'"></span> 
```

HTML 选择：

```
<select id="selectAgency" data-bind="options: $root.agencies,optionsText: 'Name',optionsValue: function(item){return item;}, optionsCaption: 'Agency', value: Agency"></select> 
```

JavaScript

```
ko.bindingHandlers.keyvalue = {
    update: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var value = valueAccessor();
        var allBindings = allBindingsAccessor();
        var field = allBindings.data;
        if (value() !== undefined) {
            $(element).text(value()[field]);
        }
    }
}; 
```

# python - 如何在 Jinja 2 中使用 3rd 方应用程序模板标签？

> ID：10949388
> 
> 赞同：10
> 
> 时间：2012-06-08T13:01:24.757
> 
> 标签：python, django, templates, django-templates, jinja2

我正在为我的 Django 网站尝试 Jinja2。

现在，由于 Jinja2 不是官方的 Django 模板引擎，它拒绝识别/加载我在 Jjinja2 之前使用的模板标签。

现在，即使模板标签的创建必须发生变化，那么如何才能在 3rd 方应用程序中反映出来呢？

在这种情况下，似乎不可能使用 Jinja2，因为系统必须按照 Jinja2 工作。

（我也`coffin`用作 Jinja-Django 的适配器）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:50:00.630

你可以用棺材做到这一点。Coffin 提供了一种方法来注册 django 风格的标签以在 jinja2 模板中使用：

```
from coffin import template
from ThrdPartyDjangoLib import djangoTagIWantToUse
register = template.Library()

register.tag('djangoTagIWantToUse', djangoTagIWantToUse) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T22:54:55.983

根据[棺材文档](https://github.com/coffin/coffin#readme)，您必须将任何自定义 django 模板标签重写为自定义 Jinja2 扩展。

您还可以使用 jinja2 宏功能来模拟 Django 的模板标签。最显着的区别是，对于 Jinja2 宏，必须通过模板上下文提供所有上下文数据，而在 Django 标签中，您可以使用其他方式访问数据（例如从数据库加载或调用其他 Python 库）。

我使用 Jinja2 模板已经有一段时间了，从来不需要创建自定义模板标签。

可以在站点的一个应用程序中使用 django 模板，而在另一个应用程序中使用 jinja2，这不是问题，但不容易从 django 模板导入或扩展 jinja2 模板，反之亦然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T06:37:00.910

Django 的结构不允许交换模板引擎，因为它是系统的核心部分。即使您可以使用`coffin`，它也不是受支持的配置，也不能指望第三方模块支持它。这与要求第三方模块支持是一样的，`sqlalchemy`因为您找到了一种让 django 使用它的方法。

如果您想使用 jinja2，请使用设计有可插入模板引擎的框架 - 或不带模板引擎的框架。

[集成页面](http://jinja.pocoo.org/docs/integration/)列出了 Jinja2 附带的开箱即用的集成。在该页面上，您可以看到它`Pyramid`是受支持的——这是因为金字塔*的设计*允许可插拔组件。

[`Flask`](http://flask.pocoo.org/)（由后面的同一个人制作`Jinja2`）对 Jinja2 有原生支持。

# c# - 如何将 ListViewItem 转换为 ListView.SelectedListViewItemCollection？

> ID：10949390
> 
> 赞同：0
> 
> 时间：2012-06-08T13:01:29.027
> 
> 标签：c#, winforms, listview, listviewitem

我想从 ListViewItem 创建一个 ListView.SelectedListViewItemCollection 对象。这就是我的方法：

```
public ListView.SelectedListViewItemCollection getSelectedListViewItemCollection(ListViewItem myListViewItem)
{
    ListView myListView = new ListView();
    ListViewItem listViewItem = (ListViewItem)myListViewItem.Clone();
    listViewItem.Selected = true;
    myListView.Items.Add(listViewItem);
    return new ListView.SelectedListViewItemCollection(myListView);
} 
```

但是，会返回一个空列表。（该列表应该包含给定的 listViewItem）我的方法有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:14:13.347

SelectedListViewItemCollection 只是 ListView 的包装器，其中 ListViewItems 的 Selected 属性为 true。但是，ListView 必须可见才能正常工作。

如果您想要拥有一组未在屏幕上选择的 ListView 项目，那么您不应该使用 SelectedListViewItemCollection。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:31:26.690

我不确定你为什么要从一个 ListView 控件中的单个项目 a 中获取一个列表（或集合），这就是 a`ListView.SelectedListViewItemCollection`是`ListViewItem`什么？似乎您想要相反的情况，即从`ListView.SelectedListViewItemCollection`. 那是对的吗？如果是这样，您可以在哪里实现这一目标。

鉴于您有一个`User`对象列表，您的列表视图可以这样填充：

```
listview.BeginUpdate();
foreach (User u in userList)
{
    ListViewItem item = new ListViewItem() { Text = u.Name, Tag = u};
    listview.Items.Add(item);
}
listview.EndUpdate(); 
```

其中`userList`是一个类型化的`User`对象列表，即`List<User>`. 然后您可以在 ListView 中获取所选项目：

```
ListViewItem[] collection = GetSelectedItems(listview);

List<string> names = new List<string>();
Parallel.ForEach(collection, item =>
{
    User u = item.Tag as User;
    names.Add(u.Name);
});

private static ListViewItem[] GetSelectedItems(ListView listView)
{
    ListViewItem[] selectedItems = new ListViewItem[0];

    MethodInvoker miGetSelectedItems = delegate
    {
        selectedItems = new ListViewItem[listview.SelectedItems.Count];
        listview.SelectedItems.CopyTo(selectedItems, 0);
    };

    if (listview.InvokeRequired)
    {
        listview.Invoke(miGetSelectedItems);
    }
    else
    {
        miGetSelectedItems();
    }

    return selectedItems;
} 
```

我希望这将有所帮助。祝你好运！

# android - 添加联系人时如何显示吐司？

> ID：10949394
> 
> 赞同：1
> 
> 时间：2012-06-08T13:01:51.823
> 
> 标签：android, android-contacts, toast

我想每个人都知道在 android 设备中添加联系人。在成功添加联系人后将联系人添加到设备中时，我们会收到一条吐司消息**“联系人已保存”**。但我想要的是获取我自己的 toast 消息，例如**“（联系人姓名）联系人已保存”** （如 codefinder 联系人已保存），而不是获取默认的 toast 消息。我怎么能得到那个....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T13:03:55.313

您无法覆盖在联系人应用程序中获得的“默认”吐司。那是特定于应用程序的。但是，您可以注册一个广播接收器来收听联系人事件。

接收器可以像这样注册：

```
 <receiver android:name="MyReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.PROVIDER_CHANGED" />

            <data android:scheme="content" />
            <data android:host="com.android.contact" />
        </intent-filter>
    </receiver> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:04:45.810

像这样使用[Toast](http://developer.android.com/reference/android/widget/Toast.html)类

```
Toast.makeText(getContext(), "YOUR CUSTOM TEXT", Toast.LENGTH_LONG).show(); 
```

创建自己的吐司。

# c - C Strings.C 中的字符串返回什么

> ID：10949395
> 
> 赞同：0
> 
> 时间：2012-06-08T13:01:53.333
> 
> 标签：c

> **可能重复：**
> [C 中的 char s[] 和 char *s 有什么区别？](https://stackoverflow.com/questions/1704407/what-is-the-difference-between-char-s-and-char-s-in-c)

```
char *p="Help"
printf("%ud",p); 
```

我得到“Help”的基地址作为输出。这是否意味着字符串（“Help”）总是返回它的基地址。如果是这样，C++ 的情况是否相同。

你也能解释一下下面到底发生了什么。

```
char name[]="Hello"; 
```

我知道这很愚蠢，但我的大脑并不平静。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:11:51.453

在您在帖子中给出的第一个示例中，您正在使用一个指针，该指针指向存储字符的内存地址。这就是为什么当你打印 p 时你会得到一个地址。

在您的第二个示例中，您正在创建一个字符数组，每个字符都在“Hello”中存储一个字母。数组使用一些类似的内存访问原则，因为每个字符都存储在顺序内存位置中，因此 name[] 是一个内存位置，然后您访问的任何索引都是内存中第一个指针 name[] 所在的第一个元素所在的偏移量。

说，为简单起见，name[0] = 0x00，name[1] = 0x01，name[2] = 0x02 等等。现在，这些内存位置中的每一个都包含一个代表字符串“Hello”的一部分的值。访问时，通过您访问的索引知道 name[x] 在哪里，并且您可以根据访问元素的方式获得该内存位置或字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:03:40.043

如果要打印字符串，请执行以下操作：

```
char *p="Help"
printf("%s",p); 
```

线

```
char name[]="Hello"; 
```

声明`name`为一个数组`char`并将其初始化为包含文字（五个以, 或`"Hello"`结尾的 ASCII 字符）。`0``NULL`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T13:04:34.330

C 中的字符串是内存中的字符数组（以空字符结尾）。您示例中的变量`p`是指向该内存地址的指针，这是您打印出来的。

第二个示例是相同的，除了您在堆栈上声明数组（与编译器的选择相反）。

主要区别在于，使用数组 ( `[]`) 表示法，您可以轻松计算数组（以及字符串）的大小，但使用指针表示法，您需要遍历数组以找到结尾来计算大小。

它在 C++ 中是相似的，但最好使用`std::string`允许动态内存管理的类型（例如在连接字符串时）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T13:24:45.100

当你使用它时`%u`，`printf`它总是打印任何变量的值。而且您正在使用字符串作为变量。在字符串中，第一个字符的地址和字符串的基地址相同。因此，它将始终显示字符串的基地址。例如，

```
char *p="Help";
printf("%u",p); 
```

将始终显示基地址。

关于你的第二个问题，你必须知道隐式和显式初始化的概念。当您手动给出字符数组的大小时，它被称为显式初始化。例如`char str[10]="abcdef"`；

而在其他情况下，如`char str[]="abcd";`，它隐式地将字符串的长度作为字符数组的大小（在本例中为 4，从 0 到 3 开始，以空字符 '\0' 结束）。我希望你明白这一点。

# visual-c++ - RichEdit 控件中的字符间距

> ID：10949400
> 
> 赞同：0
> 
> 时间：2012-06-08T13:02:20.827
> 
> 标签：visual-c++, mfc, controls, richedit

如何更改 RichEdit 控件中的字符间距？

我曾尝试使用该`CHARFORMAT`结构，但正如 MSDN 所说，`sSpacing`它在 RichEdit 控件中是无用的。此外，`SetTextExtra`该控件的hdc中的功能也无用。

而且我也试过用那个控件的ole接口，接口的SetSpace函数`ITextFont`，无效。

有人可以帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:07:06.957

如果您的意思是单个字符之间的字符间距，我不确定您是否可以做任何事情。如果您在谈论行间距，请使用 PARAFORMAT 结构和 EM_SETPARAFORMAT 消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-28T23:03:45.463

绝对适用于 Windows 10 中的 RichEdit v8.5。

确保您使用的是 Windows 类`"RICHEDIT50W"`（来自`MsftEdit.dll`）而不是`"RichEdit20W"`类（来自`Riched32.dll`）：

```
//Get the ITextDocument interface of the RichEdit control
IUnknown re;
if (SendMessage(RichEdit1.Handle, EM_GetOleInterface, 0, ref (LPARAM)re) == 0)
   throw new Exception("Could not get ITextDocument from RichEdit");
ITextDocument doc = re as ITextDocument;

//Increase spacing (positive is expanded)
Single spacing = doc.Selection.Font.Spacing;
spacing += 1;
doc.Selection.Font.Spacing = spacing;

//Decrease spacing (negative is compressed)
spacing = doc.Selection.Font.Spacing;
spacing -= 1;
doc.Selection.Font.Spacing = spacing;

//Reset to normal spacing
doc.Selection.Font.Spacing = 0; 
```

[![在此处输入图像描述](../Images/fc1de5bcc783f3975d11bae2366ec885.png)](https://i.stack.imgur.com/Mc29X.png)

# dojo - Dojo 工具提示仅在第一次鼠标悬停事件后显示

> ID：10949403
> 
> 赞同：0
> 
> 时间：2012-06-08T13:02:40.197
> 
> 标签：dojo, tooltip, onmouseover

我正在使用 dojo 的事件委托将 Tooltip 小部件连接到动态生成的 dom 节点。

Dojo 站点以这种方式解释事件委托：

> “事件委托背后的想法是，不是将侦听器附加到每个感兴趣的单个节点上的事件，而是将单个侦听器附加到更高级别的节点，这将检查它捕获的事件目标以查看它们是否冒泡来自实际感兴趣的节点；如果是，则将执行处理程序的逻辑。”

以下是我的代码实现。它工作得很好......除了，工具提示只在第一个鼠标悬停事件**之后显示。**当我第一次将鼠标悬停在节点上时，事件会完美触发，但工具提示不会呈现。它只会显示随之而来的鼠标悬停事件。在第一个鼠标悬停事件中，我可以观察 Firebug 控制台并看到 xhr.get 进入数据库并获取正确的数据。如果我注释掉工具提示并输入一个简单的警报（），它会第一次起作用。

关于如何让工具提示显示在第一个鼠标悬停事件上的任何建议？提前致谢！

```
<div class="col_section" id="my_groups">
    <div class="col_section_label">My Groups</div>
    <ul>
    <?php
        foreach($myGroups as $grp) {
            echo '<li><a class="myGroupLink" id="grp'.$grp['grp_id'].'">'.$grp['name'].'</a></li>';
        }
    ?>
    </ul>
</div>

<script>
    require(["dojo/on",
         "dojo/dom",
         "dijit/Tooltip",
         "dojo/_base/xhr",
         "ready!"], function(on, dom, Tooltip, xhr) {

    // Get Group ToolTip
    var myObject = {
        id: "myObject",
        onMouseover: function(evt){
            var grp_id = this.id;
            var content = '';
            xhr.get({
                url: "getGrpInfo.php",
                handleAs: "json",
                content: {
                    grp_id: grp_id,
                    content: "tooltip"
                },
                load: function(info) {
                    if(info == 0) {
                        content  = '<div class="grpToolTip">';
                        content += '    Information about this group is confidential';
                        content += '</div>';
                    } else {
                        content  = '<div class="grpToolTip">';
                        content += '    <img src="../ajax/getimg.php?id='+info.logo_id+'" />';
                        content += '    <div style="text-align:center">'+info.name+'</div>';
                        content += '</div>';
                    }

                    new Tooltip({
                        connectId: [grp_id],
                        label: content
                    });
                },
                error: function() {}
            });
        }
    };
    var div = dom.byId("my_groups");
    on(div,".myGroupLink:mouseover",myObject.onMouseover);
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T14:25:34.980

您`Tooltip`不会在第一次显示，因为它在事件触发`onmouseover`时不存在。`onmouseover`

`dijit/Tooltip`实例自己管理他们的鼠标事件，因此您不必管理`onmouseover`/`onmouseout`并且您可能这样做是因为您不想预加载数据，或者您想在每次工具提示即将显示时加载数据。

除了`dijit/Tooltip`实例之外，您还可以使用`Tooltip.show(innerHTML, aroundNode, position)`和`Tooltip.hide(aroundNode)`显示工具提示，但在这种情况下，您必须自己管理鼠标事件，这是您所需要的，因为从 UX 角度来看，您不想显示单个工具提示，您希望：

1.  显示一个工具提示，指示正在加载信息。
2.  然后：

    *   如果用户仍将鼠标悬停在节点上，则显示 XHR 加载信息
    *   取消 XHR 并隐藏工具提示`mouseout`

这是工作示例：http: [//jsfiddle.net/phusick/3hmds/](http://jsfiddle.net/phusick/3hmds/)

```
require([
    "dojo/dom",
    "dojo/on",
    "dojo/_base/xhr",
    "dijit/Tooltip",
    "dojo/domReady!"
], function(
    dom,
    on,
    xhr,
    Tooltip
) {

    on(dom.byId("groups"), ".group-link:mouseover", function(e) {
        var target = e.target;
        Tooltip.show("Loading...", target);

        var def = xhr.post({
            url: "/echo/html/",
            content: { html: target.textContent},
            failOk: true,

            load: function(data) {
                Tooltip._masterTT.xhr = null;
                Tooltip._masterTT.containerNode.innerHTML = data;
                Tooltip._masterTT.domNode.width = "auto";
             },
            error: function(e) {
                if (e.dojoType != "cancel") {
                    console.error(e);
                }
            }
        });

        Tooltip._masterTT.xhr = def;            
    });

    on(dom.byId("groups"), ".group-link:mouseout", function(e) {
        var target = e.target;        
        Tooltip.hide(target);
        if (Tooltip._masterTT.xhr) {
            Tooltip._masterTT.xhr.cancel();
        }
    });    
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T15:48:26.327

像往常一样，我过度思考这个问题，专注于事件注册，而不是在页面加载时简单地创建工具提示。所以，这真的很简单：

1.  查询节点
2.  遍历它们并创建指向每个节点的工具提示。

    ```
    var myGroupsList = query("a.myGroupLink");    // query nodes based on class
    array.forEach(myGroupsList,function(entry,i){ // iterate through

        var grp_id = entry.id;
        var content = '';
        xhr.get({                                 // get data via xhr.get
            url: "getGrpInfo.php",
            handleAs: "json",
            content: {
                grp_id: grp_id,
                content: "tooltip"
            },
            load: function(info) {
                if(info == 0) {
                    content  = '<div class="grpToolTip">';
                    content += '    Information about this group is confidential';
                    content += '</div>';
                } else {
                    content  = '<div class="grpToolTip">';
                    content += '    <img src="../ajax/getimg.php?id='+info.logo_id+'" />';
                    content += '    <div style="text-align:center">'+info.name+'</div>';
                    content += '</div>';
                }

                new Tooltip({                     // create tooltip
                    connectId: [entry.id],
                    label: content
                });
            },
            error: function() {}
        });
    }); 
    ```

# jquery - jQuery 对话框在 Android 上无法正常工作

> ID：10949410
> 
> 赞同：0
> 
> 时间：2012-06-08T13:03:22.287
> 
> 标签：jquery, android, jquery-mobile

我在特定版本的 Android 上遇到了 jQuery 对话框的问题。我使用 phonegap 构建了我的应用程序，我注意到它适用于所有浏览器和 Android 4.0.3。

但是，当我尝试在 2.2.3 中加载它时，滚动似乎不起作用。有人可以看看我下面的代码，看看为什么不，我做了很多研究并尝试了各种东西，比如 ScrollX：true，溢出：滚动等。我点击一个按钮调用这个函数：

```
var $upgrade = $('<div></div>')
.html('<p>LOTS OF TEXT GOES HERE</p>')
.dialog({
    autoOpen: false,
    height:270,
    width: 400,
    title: 'Upgrade'
}); 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:10:48.197

我发现最简单有效的解决方案是简单地将 jquery 字体大小减小到 11px，这很好地适合设置的框大小并且仍然可读。

```
<div style="font-size:11px;"></div> 
```

# asp.net-mvc - MVC4 WebAPI 不压缩 GET 响应

> ID：10949411
> 
> 赞同：10
> 
> 时间：2012-06-08T13:03:25.160
> 
> 标签：asp.net-mvc, gzip, asp.net-mvc-4, asp.net-web-api, http-compression

我正在开发一个使用 MVC4 WebAPI (RC) 的项目。响应未经过 gzip 压缩（IIS 中的动态压缩已启用）。

来自普通 MVC 控制器的响应被压缩。我是否需要特定设置才能为 WebAPI 响应启用 gzip 压缩？

我可以添加一个自定义压缩处理程序，但如果可能的话，我只想使用内置的 IIS 压缩。

顺便说一句，我知道这几乎是[Compress HTTP GET Response](https://stackoverflow.com/q/10443588/317440)的副本，但是那里接受的答案并没有真正回答我的问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T15:07:43.523

是否为 mimetype 启用了动态压缩`application/json; charset=utf-8`？默认情况下，即使启用了动态压缩，它也不会启用。

要查看它是否已启用，您可以查看该部分`applicationhost.config`下的文件`%windir%\System32\inetsrv\config`。

您不应该编辑该文件，而是使用`appcmd.exe`如下方式更改它：[https ://stackoverflow.com/a/7375645/243936](https://stackoverflow.com/a/7375645/243936)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-08T12:59:25.280

其实你可以安装一个nuget包来实现，这需要很少的配置，在客户端你只需要添加accept-encoding:gzip。

如今，当 ASP.Net 能够在任何 Web 服务器中运行时，使用这种方法会更好。

在此视频中，我对使用 gzip 压缩的 WebApi 进行了完整/完整的解释。是西班牙语，但你知道“代码是一种通用语言”

[忍者技巧#16 | Incluyendo soporte para GZip en WebAPI | C＃](https://www.youtube.com/watch?v=BI-ZMLCoaLc) [![忍者技巧#16 |  Incluyendo soporte para GZip en WebAPI](../Images/155882a272f351148050e352c666555b.png)](https://www.youtube.com/watch?v=BI-ZMLCoaLc)

# c++ - 使用易于选择的文本和时间对 C++ 进行编码的环境/IDE？

> ID：10949412
> 
> 赞同：1
> 
> 时间：2012-06-08T13:03:25.220
> 
> 标签：c++, ide, timer

我一直在使用 VS 和 DevC++ 创建 C++ 控制台程序，但我不喜欢输出在控制台窗口中。我希望能够轻松复制/粘贴文本，而无需右键单击窗口、转到属性、启用快速编辑模式等。

最后，我希望能够（准确地）计算我的程序运行多长时间。我正在使用 Windows。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:14:06.490

至于您问题的第一部分，启用 QuickEdit 是一次性的，所以我真的认为选择控制台文本并不繁琐。调用应用程序时，您始终可以将输出发送到文件。

[tee.exe](http://code.google.com/p/unix-cmd-win32/downloads/detail?name=tee.exe&can=2&q= "tee.exe")

根据一个人对“准确”的定义，使用`clock()`可能就足够了：

```
#include <time.h>
clock_t start, finish;
start = clock();
//  do stuff
finish = clock();
double duration = (finish-start) / (double)CLOCKS_PER_SEC; 
```

这在 Windows 上提供毫秒精度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:10:06.277

您可以使用 Eclipse。Eclipse for Java 是最先进的 ide，就我目前所听到的而言，Eclipse for C/C++ 也是如此。用于 C++ 的 Netbeans 和 Code::Blocks 也是一个可行的选择。

至于控制台，不知道你能不能做到。您正在运行控制台应用程序并且不希望它出现在控制台上？那是什么法术？好的，您可能只需下载一个用于 Windows 或其他东西的交互式 shell 并设法实现您想要的。

至于计时器，诸如 Visual Studio（付费版，不能谈论快速版）和 Eclipse 或 Netbeans 等 IDE 具有分析器，默认情况下，或者您必须安装的附加组件，可以使用评估您的程序并在其上运行多个指标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T13:51:46.060

试试控制台 - [http://sourceforge.net/projects/console/](http://sourceforge.net/projects/console/)

# python - PyQt 重启 shell

> ID：10949426
> 
> 赞同：1
> 
> 时间：2012-06-08T13:04:22.943
> 
> 标签：python, pyqt4, python-idle

如果我试图在 IDLE shell 中创建一个窗口或提示一个文件对话框，则不会打开任何内容并且 shell 会重新启动。这是某种错误吗？我找不到任何关于它的信息。我是 PyQt（和一般的 Python）的新手，但能够让教程正常工作。最后一天左右，如果我打开 IDLE 并导入 PyQt4、QtGui 等，然后运行像 QFileDialog.getOpenFileName 这样简单的东西，shell 就会重新启动。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T16:18:59.590

`QApplication`在使用 PyQt 中的其他任何东西之前，您需要有一个。尝试重新阅读您遵循的一些教程，或者多做一些。[以这个](http://zetcode.com/tutorials/pyqt4/firstprograms/)为例。

在上述教程的第一个代码示例中，请特别注意这些行（为方便起见，我已包含教程中的注释）：

```
app = QtGui.QApplication(sys.argv) 
```

> 每个 PyQt4 应用程序都必须创建一个应用程序对象。应用程序对象位于 QtGui 模块中。sys.argv 参数是来自命令行的参数列表。Python 脚本可以从 shell 运行。这是一种方式，我们可以控制脚本的启动。

和

```
sys.exit(app.exec_()) 
```

> 最后，我们进入应用程序的主循环。事件处理从这一点开始。主循环从窗口系统接收事件并将它们分派给应用程序小部件。如果我们调用 exit() 方法或主小部件被销毁，则主循环结束。sys.exit() 方法确保干净的退出。将通知环境，应用程序如何结束。
> 
> exec_() 方法有一个下划线。这是因为 exec 是 Python 关键字。因此， exec_() 被使用。

看来你可能已经忘记了这些。或者您可能还没有意识到这意味着您通常不能在交互式 shell 中将 PyQt 与正在运行的事件循环一起使用。但是，有一个技巧，请参见[此处](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/python_shell.html)。

# c# - C#：如何查找当前应用程序是否调用了进程？

> ID：10949427
> 
> 赞同：3
> 
> 时间：2012-06-08T13:04:30.527
> 
> 标签：c#, excel, process, interop, child-process

有什么方法可以确定当前应用程序是否调用了进程？我正在打开 Excel 互操作进程、处理文件等，之后我只想关闭我调用的这个 Excel 进程。

像这样的东西：

```
Process[] pProcess = System.Diagnostics.Process.GetProcessesByName("Excel");
                foreach (var process in pProcess)
                {
                    if (process.Parent == "MyApp.exe") process.Kill();
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:36:46.237

用法：

```
Console.WriteLine("ParentPid: " + Process.GetProcessById(6972).Parent().Id); 
```

代码：

```
public static class ProcessExtensions {
private static string FindIndexedProcessName(int pid) {
    var processName = Process.GetProcessById(pid).ProcessName;
    var processesByName = Process.GetProcessesByName(processName);
    string processIndexdName = null;

    for (var index = 0; index < processesByName.Length; index++) {
        processIndexdName = index == 0 ? processName : processName + "#" + index;
        var processId = new PerformanceCounter("Process", "ID Process", processIndexdName);
        if ((int) processId.NextValue() == pid) {
            return processIndexdName;
        }
    }

    return processIndexdName;
}

private static Process FindPidFromIndexedProcessName(string indexedProcessName) {
    var parentId = new PerformanceCounter("Process", "Creating Process ID", indexedProcessName);
    return Process.GetProcessById((int) parentId.NextValue());
}

public static Process Parent(this Process process) {
    return FindPidFromIndexedProcessName(FindIndexedProcessName(process.Id));
}
} 
```

来源：[https ://stackoverflow.com/a/2336322/706867](https://stackoverflow.com/a/2336322/706867)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-08T13:27:09.703

如果你做了你想做的事，你可以持有对 Excel-Interop-Process 的引用并杀死它......

看这个例子：

```
static void Main(string[] args)
    {
        var excelApp = new Microsoft.Office.Interop.Excel.Application();
        var workbook = excelApp.Workbooks.Open(Filename: @"someexcelworkbook.xls");
        workbook.Activate();
        excelApp.Visible = true;
        excelApp.Quit();
    } 
```

希望这有帮助.. ;-)

# javascript - 如何更新谷歌标记的位置

> ID：10949436
> 
> 赞同：1
> 
> 时间：2012-06-08T13:05:02.397
> 
> 标签：javascript, google-maps, google-maps-api-3

大家好，我需要每 5 秒更新一次谷歌标记位置

我有这个 javascript 代码用于在页面加载时绘制谷歌标记。

我希望能够每 5 秒更改一次标记的位置。

这是我的代码：

```
function initialize() {
  var myOptions = {
    zoom: 4,
    center: new google.maps.LatLng(-25.363882, 131.044922),
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };

  var map = new google.maps.Map(document.getElementById('map_canvas'),
      myOptions);

  var image = new google.maps.MarkerImage("images/truck3.png",
        new google.maps.Size(32.0, 37.0),
        new google.maps.Point(0, 0),
        new google.maps.Point(16.0, 18.0)
    );
  var shadow = new google.maps.MarkerImage("images/shadow-truck3.png",
        new google.maps.Size(51.0, 37.0),
        new google.maps.Point(0, 0),
        new google.maps.Point(16.0, 18.0)
    );

  var marker = new google.maps.Marker({
    position: map.getCenter(),
    map: map,
    icon: image,
    shadow: shadow,
    title: 'Click to zoom'
  }); 
```

google.maps.event.addDomListener(window, 'load', 初始化);

还有一件事我如何在显示多个标记时放置多个点。我知道这对您来说可能微不足道，但我对此完全陌生。

编辑：

我很抱歉，但这个谷歌让我完全糊涂了。所以我想做的是下一步。当页面加载时，我想检索最后一个位置的数组，每个位置都有自己的 id，所以 php 数组就像数组 [Lat][Lng][id]，之后我想在每个位置上放置和标记并将其放在屏幕中央。当用户点击一个标记时，它会自动缩放并开始每秒将标记位置放在中心。我需要那个特定标记的 id。

这是一个类似的问题，如果一些 java 大师可以结合我来获得我需要的东西，那就太好了

[类似问题的链接](https://stackoverflow.com/questions/3059044/google-maps-js-api-v3-simple-multiple-marker-example)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:19:17.030

好吧，您可以获得对查询的大量支持[GOOGLE MAPS API V3 文档](https://developers.google.com/maps/documentation/javascript/3.8/reference)

有这样的功能 `setCenter(latlng)`会改变运行时`setPosition(latlng:LatLng)`的中心，还有改变标记中心的功能，通过这种方式，您可以更改标记运行时的位置。为了存储最后的位置，您可以使用数据库并根据您的要求对其进行更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:36:45.050

此 google.maps.Marker 方法允许您更改现有标记的位置：

[访问这里](https://developers.google.com/maps/documentation/javascript/reference#Marker)setPosition(latlng:LatLng)

创建一个标记数组，循环通过它更新它们的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-11T07:46:25.870

将此 javascript 函数添加到您的代码中，

```
 $(function () {
        setTimeout(function () { $('#map_canvas').load(initialize); }, 50000);
    }) 
```

# c++ - 将特定的 gcc 警告变成错误

> ID：10949438
> 
> 赞同：4
> 
> 时间：2012-06-08T13:05:08.173
> 
> 标签：c++, gcc, compiler-errors, warnings, compiler-flags

所以我知道我可以使用 -Werror=... 将警告变成错误，但我想将以下警告变成错误：

“类 xxx 具有虚函数但非虚析构函数”

我知道你可以得到这个错误的唯一方法是打开过于讨厌的 -Weffc++ 标志。有没有办法（或者这个警告的 -Weffc++ 中的子标志是什么）只打印这个警告然后把它变成一个错误？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T15:37:14.323

`-Wnon-virtual-dtor`是由 开启的特定警告的名称`-Weffc++`。要将任何警告变为错误，请使用`-Werror=...`. 因此，如果警告是`-Wspam`，则将其变为错误`-Werror=spam`。因此，在这种情况下，您将使用`-Werror=non-virtual-dtor`.

但是，如果您使用的是 GCC 4.8 及更高版本，我不认为此警告特别有用。然后您可以访问上级`-Wdelete-non-virtual-dtor`：

> 警告何时`delete`用于销毁具有虚函数和非虚析构函数的类的实例。如果基类没有虚拟析构函数，则通过指向基类的指针删除派生类的实例是不安全的。此警告由 启用`-Wall`。

请注意，`g++ -Wspam -Werror=spam`这与`g++ -Werror=spam`. 将警告变为错误会自动打开该警告。

在相关的说明中，你不是唯一一个认为这[`-Weffc++`有点过分热心的](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=16166)人。

# iphone - iPhone：viewWill仅在从其他视图返回时出现

> ID：10949440
> 
> 赞同：5
> 
> 时间：2012-06-08T13:05:13.040
> 
> 标签：iphone, ios

`viewWillAppear`在进入视图和从其他视图返回视图时都会调用。

我只想在从其他视图返回时选择（突出显示）和淡出一个单元格。

有没有委托方法来做到这一点？

我正在使用 UINavigationViewController。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T13:20:01.293

如果您使用的是 iOS 5，则可以使用这些新属性：

> 这四种方法可以在视图控制器的外观回调中使用，以确定它是否作为子视图控制器被呈现、解除或添加或删除。例如，视图控制器可以通过检查表达式 ([self isDismissing] || [self isMovingFromParentViewController]) 在其 viewWillDisappear: 方法中询问自己来检查它是否因为被解除或弹出而消失。
> 
> ```
> - (BOOL)isBeingPresented __OSX_AVAILABLE_STARTING(__MAC_NA,__IPHONE_5_0);
> - (BOOL)isBeingDismissed __OSX_AVAILABLE_STARTING(__MAC_NA,__IPHONE_5_0);
> 
> - (BOOL)isMovingToParentViewController __OSX_AVAILABLE_STARTING(__MAC_NA,__IPHONE_5_0);
> - (BOOL)isMovingFromParentViewController __OSX_AVAILABLE_STARTING(__MAC_NA,__IPHONE_5_0); 
> ```

在您的代码中：

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    if (!(self.isMovingToParentViewController || self.isBeingPresented))
    {
        // animate
    }
} 
```

**编辑：**

如果您使用的是`UITableViewController`，将属性设置`-clearsSelectionOnViewWillAppear`为`YES`将为您执行此操作。如果您使用`UIViewController`带有`UITableView`子视图的常规，则只需手动执行此操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T13:14:59.177

viewWillAppear 在视图出现时被调用

*   在 viewDidLoad 之后
*   在您关闭或拉取视图控制器之后

您可以将 viewWillAppear 更改为以下

```
- (void) viewWillAppear:(BOOL)animated
{
    static BOOL firstTime = YES;
    if (!firstTime) 
    {
        //Do your alpha animation
    }
    firstTime = NO;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-08T13:19:45.580

如果您的目标是 iOS 5，您可以使用`[self isBeingPresented]`和`[self isBeingDismissed]`来确定视图控制器是从导航控制器中添加还是删除。

我还怀疑您可以改进在表格视图中选择/取消选择单元格时的逻辑，这样视图控制器是来还是去都无关紧要。

通常的做法是：当有人在视图控制器 A 的表视图中选择一行时，它会被选中/突出显示，然后您推送一个新的视图控制器 B。当视图控制器 B 被关闭时，您可以动画取消选择视图控制器 A 中的表视图行`viewDidAppear`（因此用户可以看到它淡出）。您不必担心视图控制器 A 是刚刚出现还是重新出现，因为在适当的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T13:12:01.210

在您的 UINav 控制器中，您可以创建一个“lastView”属性并让您的每个视图控制器（由您的 UINav 控制器控制）将此属性设置为“viewWillAppear”...在您的目标视图中...您想要的那个做高亮和淡化你可以检查 UINav 控制器的这个属性，看看它是否为 NIL。

这只是一种方法。如果您弹出模态框等，这将不起作用。

# iphone - 使用 Interface Builder 添加子视图

> ID：10949443
> 
> 赞同：1
> 
> 时间：2012-06-08T13:05:21.510
> 
> 标签：iphone, xcode, xcode4, interface-builder

我下面的问题是关于使用 Interface Builder 执行此操作，而不是在代码中。

我有一个有两个视图的 XIB。其中之一是默认视图（表格视图），我将第二个（活动指示器视图）添加为代码中的子视图。我的问题是：

1.  是否可以使用 IB 设置第二个子视图的位置，而不是在代码中？（即我可以删除代码行吗`activityIndicator.frame = CGRectMake(160, 240, 30, 30);`：）
2.  是否可以使用 Interface Builder 将第二个子视图添加为子视图？（即我可以删除代码`[self.view addSubview:self.activityIndicator]`）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T13:13:52.543

是的，对于这两个问题。

xib 编辑器有一个“大小检查器”，看起来像 Xcode 窗口右上角附近的标尺图标。这允许您在其父视图中指定视图的大小和位置。还有一些控件可以确定子视图在其父级更改大小时会发生什么……例如，在旋转时。

您可以通过将视图拖到编辑器屏幕布局部分的父视图中或通过在“对象”下的层次结构窗口中排列视图来将视图变为子视图。

# symfony1 - 为什么元描述即使填充在 view.yml 中也会为空？

> ID：10949450
> 
> 赞同：0
> 
> 时间：2012-06-08T13:05:51.270
> 
> 标签：symfony1, seo, meta-tags

我有一个页面，其元内容来自 view.yml 文件。

```
<meta name="robots" content="index, follow" />
<meta name="description" content="" />
<meta name="keywords" content="summer jobs" />
<meta name="language" content="en" /> 
```

在 view.yml 文件中如下：

```
summerjobsSuccess:
  has_layout:     on
  layout:         layoutreg
  stylesheets:    [common]
  metas:
    title:        Summer Jobs for Students
    robots:       index, follow
    description:  Find the best summer jobs here including: working abroad, summer camp jobs, summer festival jobs, and student summer jobs in retail or telesales
    keywords:     summer jobs
    language:     en 
```

我寻找间距，它看起来很完美。可能是什么错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:04:05.160

出现问题是因为您的描述中有一个冒号 ( `:`) - 您需要将字符串括在引号中：

```
description:  'Find the best summer jobs here including: working abroad, summer camp jobs, summer festival jobs, and student summer jobs in retail or telesales' 
```

# c# - 通过单个 WCF 端点访问多个服务/方法

> ID：10949454
> 
> 赞同：1
> 
> 时间：2012-06-08T13:06:32.070
> 
> 标签：c#, ajax, wcf, web-services, interface

感谢您花时间阅读本文。我对使用 WCF 有点陌生，遇到了我不确定如何处理的问题。

我有一个可通过单个 WCF 端点访问的 AJAX Web 服务。我有一个大型系统，其方法都按功能细分。我想知道的是，有没有人知道我可以访问所有方法的方法，即使它们位于不同的类中？

我试图避免的是拥有一个包含大量 Web 方法的类，或者必须编写一个接口层来处理将方法委托给适当的类。任何建议将不胜感激。

谢谢！（C＃）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:55:34.750

你可以试试 WCF 路由服务。路由服务可以充当两个或多个服务之间的单个中介。

[http://msdn.microsoft.com/en-us/magazine/cc500646.aspx](http://msdn.microsoft.com/en-us/magazine/cc500646.aspx)

[http://msdn.microsoft.com/en-us/library/ee517423.aspx](http://msdn.microsoft.com/en-us/library/ee517423.aspx)

[http://prideparrot.com/blog/archive/2011/8/routing_service_and_content_based_routing](http://prideparrot.com/blog/archive/2011/8/routing_service_and_content_based_routing)

# c++ - 制作一个 VB-dll 并将其加载到 C++ 应用程序中

> ID：10949455
> 
> 赞同：2
> 
> 时间：2012-06-08T13:06:40.113
> 
> 标签：c++, vb.net, dll, entry-point, getprocaddress

我有一个问题困扰了整整一个星期，但我无法自己解决。我一直在谷歌搜索，并在各种论坛中搜索......我发现了很多“这可能有效”，尝试过，但没有，没有成功。如果有人有任何线索，请，请，帮助我！

我从外部来源获得了许多用 VB 编写的类和函数，我需要能够从 C++ 应用程序中使用这些类和函数。我的第一个想法是：没问题，我将 VB 代码转换为 dll，然后从我的 C++ 程序中加载它。这虽然比我想象的要难。我的 C++ 程序不是用 Visual Studio 编写的，但为了简单起见，我开始尝试从 Visual Studio C++ 应用程序加载我的 VB dll（用 Visual Studio 2010 编写）。到目前为止，这是我的代码：

**VB代码：DllModule：类库项目**

*DLL模块.vb*

```
Namespace DllModule
  Public Module DllModule

    Public Const DLL_PROCESS_DETACH = 0
    Public Const DLL_PROCESS_ATTACH = 1
    Public Const DLL_THREAD_ATTACH = 2
    Public Const DLL_THREAD_DETACH = 3

    Public Function DllMain(ByVal hInst As Long, ByVal fdwReason As Long,
      ByVal lpvReserved As Long) As Boolean
        Select Case fdwReason
            Case DLL_PROCESS_DETACH
                ' No per-process cleanup needed
            Case DLL_PROCESS_ATTACH
                DllMain = True
            Case DLL_THREAD_ATTACH
                ' No per-thread initialization needed
            Case DLL_THREAD_DETACH
                ' No per-thread cleanup needed
        End Select

        Return True
    End Function

    'Simple function
    Public Function Add(ByVal first As Integer, ByVal sec As Integer) As Integer
        Dim abc As Integer
        abc = first + sec
        Return abc
    End Function
  End Module
End Namespace 
```

*DllModule.def*

```
NAME DllModule
LIBRARY DllModule
DESCRIPTION "My dll"
EXPORTS DllMain @1
        Add @2 
```

**C++ 代码：TryVbDllLoad：控制台应用程序**

*TryVbDllLoad.cpp*

```
#define WIN32_LEAN_AND_MEAN
#include <Windows.h>
#include <strsafe.h>

extern "C" {
 __declspec(dllimport) int __stdcall Add(int, int);
}

typedef int (__stdcall *ptf_test_func_1_type)(int, int);

int __cdecl _tmain(int argc, _TCHAR* argv[])
{
    HINSTANCE hdll = NULL;

    hdll = LoadLibrary("DllModule.dll");        // load the dll
    if(hdll) {
        ptf_test_func_1_type p_func1=(ptf_test_func_1_type)GetProcAddress(hdll,"Add");

        if(p_func1) {
           int ret_val = (*p_func1)(1, 2);
        } else {
        DWORD dw = GetLastError();
        }

        FreeLibrary(hdll);              // free the dll
    } else {
        DWORD dw = GetLastError();
    }

    return 0;
} 
```

我可以加载 dll，但 GetProcAddess 返回 NULL，错误代码为 127（找不到指定的过程）。

我试图从 VB 应用程序加载 dll。这有效（即使没有 .def 文件）。但我猜没有创建 C++ 应用程序可以使用的正确入口点（当我在 Dependency Walker 中打开 dll 时，我看不到入口点或函数）。我尝试在有和没有“注册 COM 互操作”的情况下编译 VB 代码。

1）我做错了什么？

2）如果没有任何好的方法可以正确解决这个问题，我能做什么而不是创建一个dll？有没有其他方法可以在我的 C++ 应用程序中使用 VB 类和函数？

亲切的问候

萨拉

* * *

* * *

谢谢你的回答马！

我的 dll 中一定有某种错误，因为当我尝试注册时使用 regsvr32 我得到：“模块 C:/tmp/DllModule.dll 已加载，但未找到 DllRegisterServer 的起始地址。检查C:/tmp/DllModule.dll 是有效的 DLL 或 OCX 文件，然后重试。”

另外，当我使用

`#import "C\tmp\DllModule.dll"`

我明白了

`fatal error C1083: Cannot open type library file: 'c:\tmp\dllmodule.dll'`

* * *

我查看了教程的链接，但有一个小问题：在所有项目类型中没有“ActiveX DLL”之类的东西可供选择。是的，我确实有 Visual Studio 2010 Professional（试用版，但仍然如此）。

——萨拉

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T09:39:01.357

感谢所有的投入。我遇到了另一种解决问题的方法，使用多文件程序集而不是我的第一个 dll 方法。

我遵循了这个 HowTo 部分：http: [//msdn.microsoft.com/en-us/library/226t7yxe.aspx#Y749](http://msdn.microsoft.com/en-us/library/226t7yxe.aspx#Y749)

**VB代码：DllModule：类库项目**

*DLL模块.vb*

```
Imports System.Runtime.InteropServices

Namespace DllModuleNS
    Public Class Class1

        Public Function ClassAdd(ByRef first As Integer, ByRef sec As Integer) As Integer
            Dim abc As Integer
            abc = first + sec
            Return abc
        End Function

    End Class
End Namespace 
```

我使用 Visual Studio（生成 DllModule.dll 文件）和 cmd-line 编译的这个文件：

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319\Vbc.exe /t:module DllModule.vb 
```

（生成 DllModule.netmodule 文件）。

**C++ 代码：TryVbDllLoad：控制台应用程序**

*TryVbDllLoad.cpp*

```
#using <mscorlib.dll>

#using ".\..\ClassLibrary1\DllModule.netmodule"
using namespace DllModule::DllModuleNS;

int _tmain(int argc, _TCHAR* argv[])
{
    Class1^ me = gcnew Class1();
    int a = 1, b = 2;
    int xx = me->ClassAdd(a, b);
    return 0;
} 
```

在 TryVBDllLoad-project 属性中，我更改了：

*   Common Properties -> Framework and References : 添加 DllModule-project 作为参考
*   配置属性 -> C/C++ -> 常规：/clr 标志集
*   配置属性 -> 链接器 -> 输入：将模块添加到程序集设置为 DllModule.netmodule 的路径 (/ASSEMBLYMODULE:"DllModule.netmodule")

这导致我可以在 VC++ 代码中使用 VB 类 Class1！

## 问题解决了！

* * *

我现在更进一步，将 TryVBDllLoad-project 更改为 dll：

*   配置属性 -> 常规：配置类型动态库 (.dll)
*   配置属性 -> 链接器 -> 系统：子系统窗口 (/SUBSYSTEM:WINDOWS)

*TryVbDllLoadClass.h*

```
#ifndef TryVbDllLoadClass_H
#define TryVbDllLoadClass_H

class TryVbDllLoadClass
{
public:
    TryVbDllLoadClass();
    int Add(int a, int b);
};

#endif  // TryVbDllLoadClass_H 
```

*TryVbDllLoadClass.cpp*

```
#include "TryVbDllLoadClass.h"
#using <mscorlib.dll>

#using ".\..\ClassLibrary1\DllModule.netmodule"
using namespace DllModule::DllModuleNS;

TryVbDllLoadClass::TryVbDllLoadClass() {}

int TryVbDllLoadClass::Add(int a, int b)
{
Class1^ me = gcnew Class1();
int xx = me->ClassAdd(a, b);
return xx;
} 
```

*DLLExport.h*

```
#ifndef DLLEXPORT_H
#define DLLEXPORT_H

#define WIN32_LEAN_AND_MEAN
#include <Windows.h>

#ifdef __dll__
#define IMPEXP __declspec(dllexport)
#else
#define IMPEXP __declspec(dllimport)
#endif  // __dll__

extern "C" {
    IMPEXP int __stdcall AddFunction(int);
}

#endif  // DLLEXPORT_H 
```

*DLLMain.h*

```
#define __dll__
#include "dllExport.h"
#include " TryVbDllLoadClass.h"

int WINAPI DllEntryPoint(HINSTANCE hinst, unsigned long reason, void*)
{
    return 1;
}

TryVbDllLoadClass * my;

IMPEXP int __stdcall AddFunction(int first, int second)
{
    my = new TryVbDllLoadClass();
    int res = my->Add(first, second);
    delete my;
    return res;
} 
```

然后我可以将这个 dll 添加到非可视化工作室项目中，就像普通的 dll 一样：

**C++-code : LoadDll : Non-Visual-Studio-project （在这种情况下为 CodeBlocks）**

*主文件*

```
#include <iostream>
#include <stdio.h>
#include <stdlib.h>
#define WIN32_LEAN_AND_MEAN
#include <windows.h>

#include "dllExport.h"

typedef int( * LPFNDLL_CREATE)(int, int);
HINSTANCE hDLL;
LPFNDLL_CREATE func;

using namespace std;

int main()
{
    cout << "Hello world!" << endl;
    int key = 35;

    hDLL = LoadLibrary("TryVbDllLoadClass.dll");

    if(hDLL)
    {
        cout << "Loaded: " << hDLL << endl;

        func = (LPFNDLL_CREATE) (GetProcAddress(hDLL, "_AddFunction@4"));
        if(func != NULL)
        {
            cout << "Connected: " << func << endl;
            cout << "Function returns: " << func(key, key) << endl;
        }
        else cout << " ::: fail: " << GetLastError() << endl;

        FreeLibrary(hDLL);
        cout << "Freed" << endl;
    }
    else cout << " ::: fail: " << GetLastError() << endl;

    printf("-> Goodbye world!\n");
    return 0;
} 
```

## 通过这种方式，我可以使用在 Visuabl Studio 之外创建的现有 C++ 项目中提供给我的 VB 类。最后...：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T13:26:16.897

使用 VB，您不会得到“正常”的 DLL（至少以前是这种情况）。而且您没有获得功能的入口点。

但据我了解，您拥有 VB 源代码，您可以使用它做任何必要的事情。这是一个可能的解决方案：

[http://www.codeproject.com/Articles/21/Beginner-s-Tutorial-Calling-Visual-Basic-ActiveX-D](http://www.codeproject.com/Articles/21/Beginner-s-Tutorial-Calling-Visual-Basic-ActiveX-D)

但首先尝试这种不太复杂的方法，因为我认为 VB dll 始终是 COM dll，所以你可以：

使用 Windows 命令注册 dll

```
regsvr32  F:\proj\VBDllModule.dll 
```

现在你的 C++ 代码：

```
#import "F:\proj\VBDllModule.dll"

using namespace DllModule;

void CDialogTestDlg::OnButton1()
{
 HRESULT hresult;
 CLSID clsid;
 _CTest *t; // a pointer to the CTest object
 _bstr_t bstrA = L"hello";
 _bstr_t bstrB = L" world";
 _bstr_t bstrR;
 ::CoInitialize(NULL);
  hresult=CLSIDFromProgID(OLESTR("VBTestLib.CTest"), &clsid);
  hresult= CoCreateInstance(clsid,NULL,CLSCTX_INPROC_SERVER,
                               __uuidof(_CTest),(LPVOID*) &t);
  if(hresult == S_OK)
  {
     bstrR  = t->vbConcat(bstrA , bstrB);
     AfxMessageBox((char*)bstrR);
   }
} 
```

# asp.net-mvc-3 - 在asp.net mvc3中会话超时时在登录页面上显示消息

> ID：10949460
> 
> 赞同：1
> 
> 时间：2012-06-08T13:07:11.957
> 
> 标签：asp.net-mvc-3, session, c#-4.0, authorization

我想在我的登录页面上显示会话超时消息。

我已经覆盖了 asp.net mvc Authorize 属性来导航用户到会话超时的登录页面，但我的问题是我无法在该覆盖方法中设置 ViewData 或 ViewBag 或 Session [“Message”] 之类的东西。

我会请求大家帮助我...

如何在该 Override 方法中设置 ViewData。

下面是我的 CustomAuthorizeAttribute 类

```
public class CustomAuthorizeAttribute : AuthorizeAttribute
    {

        public override void OnAuthorization(AuthorizationContext filterContext)
        {
            if (filterContext == null)
            {
                throw new ArgumentNullException("filterContext");
            }

            if (!filterContext.HttpContext.User.Identity.IsAuthenticated || SessionCache.User_ID == 0)
            {
                // User not logged in, redirect to login page 
                filterContext.Result = new HttpUnauthorizedResult();
                return;
            }

        }

    } 
```

请建议。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T16:07:09.760

您想研究在 Global.asax 中使用 Session_End 事件。

重要的是要意识到 Session_End 只会在 InProc 会话上被调用。

# java - Javafx 2 单击并双击

> ID：10949461
> 
> 赞同：60
> 
> 时间：2012-06-08T13:07:15.940
> 
> 标签：java, click, javafx, javafx-2, double-click

我想知道是否可以检测到 JavaFX 2 中的双击？如何 ？

我想在单击和双击之间制作不同的事件。

谢谢

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-06-08T14:30:33.903

是的，您可以检测单次、双次甚至多次点击：

```
myNode.setOnMouseClicked(new EventHandler<MouseEvent>() {
    @Override
    public void handle(MouseEvent mouseEvent) {
        if(mouseEvent.getButton().equals(MouseButton.PRIMARY)){
            if(mouseEvent.getClickCount() == 2){
                System.out.println("Double clicked");
            }
        }
    }
}); 
```

`MouseButton.PRIMARY`用于确定是否触发了鼠标左键（通常）事件。阅读 api`getClickCount()`得出的结论是，除了单次或双次之外，可能还有多次点击计数。但是我发现很难区分单击事件和双击事件。因为双击的第一次点击计数也会上升一个事件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-03-27T09:26:31.997

这是另一段代码，如果您必须区分单击和双击，并且在任何一种情况下都必须采取特定操作，则可以使用该代码。

```
import java.util.concurrent.ScheduledFuture;
import java.util.concurrent.ScheduledThreadPoolExecutor;
import java.util.concurrent.TimeUnit;

import javafx.application.Application;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.input.MouseButton;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.StackPane;
import javafx.stage.Stage;

public class DoubleClickDetectionTest extends Application {

    boolean dragFlag = false;

    int clickCounter = 0;

    ScheduledThreadPoolExecutor executor;

    ScheduledFuture<?> scheduledFuture;

    public DoubleClickDetectionTest() {
        executor = new ScheduledThreadPoolExecutor(1);
        executor.setRemoveOnCancelPolicy(true);
    }

    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage primaryStage) throws Exception {
        StackPane root = new StackPane();

        primaryStage.setScene(new Scene(root, 400, 400));
        primaryStage.show();

        root.setOnMouseDragged(new EventHandler<MouseEvent>() {
            @Override
            public void handle(MouseEvent e) {
                if (e.getButton().equals(MouseButton.PRIMARY)) {
                    dragFlag = true;
                }
            }
        });

        root.setOnMouseClicked(new EventHandler<MouseEvent>() {
            @Override
            public void handle(MouseEvent e) {
                if (e.getButton().equals(MouseButton.PRIMARY)) {
                    if (!dragFlag) {
                        System.out.println(++clickCounter + " " + e.getClickCount());
                        if (e.getClickCount() == 1) {
                            scheduledFuture = executor.schedule(() -> singleClickAction(), 500, TimeUnit.MILLISECONDS);
                        } else if (e.getClickCount() > 1) {
                            if (scheduledFuture != null && !scheduledFuture.isCancelled() && !scheduledFuture.isDone()) {
                                scheduledFuture.cancel(false);
                                doubleClickAction();
                            }
                        }
                    }
                    dragFlag = false;
                }
            }
        });
    }

    @Override
    public void stop() {
        executor.shutdown();
    }

    private void singleClickAction() {
        System.out.println("Single-click action executed.");
    }

    private void doubleClickAction() {
        System.out.println("Double-click action executed.");
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-03-08T21:14:50.837

遵循 Java SE 8 lambda 表达式将如下所示：

```
node.setOnMouseClicked(event -> {
    if(event.getButton().equals(MouseButton.PRIMARY) && event.getClickCount() == 2) {
        handleSomeAction();
    }
}); 
```

一旦你习惯了 lambda 表达式 - 它们最终会比原始类实例化和覆盖 (x) 方法更容易理解。-在我看来-

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-18T03:18:40.693

P. Pandey 的回应是实际上区分单击和双击的最简单方法，但它对我不起作用。一方面，函数“currentTimeMillis”已经返回毫秒，所以似乎没有必要将它除以 1000。下面的版本以更一致的方式为我工作。

```
 @Override
 public void handle(MouseEvent t) {

        long diff = 0;

        currentTime=System.currentTimeMillis();

        if(lastTime!=0 && currentTime!=0){
            diff=currentTime-lastTime;

            if( diff<=215)
                isdblClicked=true;
            else
                isdblClicked=false;
        }

        lastTime=currentTime;

        System.out.println("IsDblClicked()"+isdblClicked); 

       //use the isdblClicked flag...   
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-12T12:03:38.887

这是我实现双击的方式

```
if (e.getEventType().equals(MouseEvent.MOUSE_CLICKED) && !drag_Flag) {
                long diff = 0;
            if(time1==0)
             time1=System.currentTimeMillis();
            else
            time2=System.currentTimeMillis();
            if(time1!=0 && time2!=0)
            diff=time2-time1;
            if((diff/1000)<=215 && diff>0)
            {
                isdblClicked=true;
            }
            else
            {
                isdblClicked=false;
            }

            System.out.println("IsDblClicked()"+isdblClicked); 
```

}

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-03-21T09:38:45.967

由于默认无法区分单击和双击，所以我们采用如下方式：

单击时，我们将单击操作包装在可中止的可运行文件中。`SINGLE_CLICK_DELAY`这个runnable在被执行之前会等待一定的时间（即， ）。

同时，如果发生第二次点击，即双击，则单击操作中止，仅执行双击操作。

这样，要么执行单击操作，*要么*执行双击操作，但从不执行两者。

* * *

以下是完整代码。要使用它，只需要将`TODO`三行替换为所需的处理程序。

```
private static final int SINGLE_CLICK_DELAY = 250;
private ClickRunner latestClickRunner = null;

private class ClickRunner implements Runnable {

    private final Runnable onSingleClick;
    private boolean aborted = false;

    public ClickRunner(Runnable onSingleClick) {
        this.onSingleClick = onSingleClick;
    }

    public void abort() {
        this.aborted = true;
    }

    @Override
    public void run() {
        try {
            Thread.sleep(SINGLE_CLICK_DELAY);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        if (!aborted) {
            System.out.println("Execute Single Click");
            Platform.runLater(() -> onSingleClick.run());
        }
    }
}

private void init() {
    container.setOnMouseClicked(me -> {
        switch (me.getButton()) {
            case PRIMARY:
                if (me.getClickCount() == 1) {
                    System.out.println("Single Click");
                    latestClickRunner = new ClickRunner(() -> {
                      // TODO: Single-left-click operation
                    });
                    CompletableFuture.runAsync(latestClickRunner);
                }
                if (me.getClickCount() == 2) {
                    System.out.println("Double Click");
                    if (latestClickRunner != null) {
                        System.out.println("-> Abort Single Click");
                        latestClickRunner.abort();
                    }
                    // TODO: Double-left-click operation
                }
                break;
            case SECONDARY:
                // TODO: Right-click operation
                break;
            default:
                break;
        }
    });
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-10-30T00:34:28.860

不确定是否有人仍然遵循此 OP 或参考它，但以下是我区分单击和双击的版本。尽管大多数答案都是可以接受的，但如果可以以适当的可重复方式完成，那将非常有用。

我遇到的挑战之一是需要在多个位置的多个节点上进行单击差异化。我无法在每个节点上执行相同的重复繁琐逻辑。它应该以通用方式完成。

所以我选择实现一个自定义 EventDispatcher 并在节点级别使用这个调度程序，或者我可以将它直接应用到 Scene 以使其适用于所有子节点。

为此，我创建了一个新的 MouseEvent，即“MOUSE_DOUBLE_CLICKED”，所以我仍然坚持标准的 JavaFX 实践。现在我可以像其他鼠标事件类型一样包含双击事件过滤器/处理程序。

```
node.addEventFilter(CustomMouseEvent.MOUSE_DOUBLE_CLICKED, e->{..<code to handle double_click>..});
node.addEventHandler(CustomMouseEvent.MOUSE_DOUBLE_CLICKED, e->{..<code to handle double_click>..}); 
```

下面是这个自定义事件调度器的实现和完整的工作演示。

```
import javafx.animation.KeyFrame;
import javafx.animation.Timeline;
import javafx.application.Application;
import javafx.event.*;
import javafx.geometry.Pos;
import javafx.scene.Node;
import javafx.scene.Scene;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.HBox;
import javafx.scene.layout.StackPane;
import javafx.scene.shape.Rectangle;
import javafx.stage.Stage;
import javafx.util.Duration;

public class DoubleClickEventDispatcherDemo extends Application {

    @Override
    public void start(Stage stage) throws Exception {
        Rectangle box1 = new Rectangle(150, 150);
        box1.setStyle("-fx-fill:red;-fx-stroke-width:2px;-fx-stroke:black;");
        addEventHandlers(box1, "Red Box");

        Rectangle box2 = new Rectangle(150, 150);
        box2.setStyle("-fx-fill:yellow;-fx-stroke-width:2px;-fx-stroke:black;");
        addEventHandlers(box2, "Yellow Box");

        HBox pane = new HBox(box1, box2);
        pane.setSpacing(10);
        pane.setAlignment(Pos.CENTER);
        addEventHandlers(pane, "HBox");

        Scene scene = new Scene(new StackPane(pane), 450, 300);
        stage.setScene(scene);
        stage.show();

        // SETTING CUSTOM EVENT DISPATCHER TO SCENE
        scene.setEventDispatcher(new DoubleClickEventDispatcher(scene.getEventDispatcher()));
    }

    private void addEventHandlers(Node node, String nodeId) {
        node.addEventFilter(MouseEvent.MOUSE_CLICKED, e -> System.out.println("" + nodeId + " mouse clicked filter"));
        node.addEventHandler(MouseEvent.MOUSE_CLICKED, e -> System.out.println("" + nodeId + " mouse clicked handler"));

        node.addEventFilter(CustomMouseEvent.MOUSE_DOUBLE_CLICKED, e -> System.out.println("" + nodeId + " mouse double clicked filter"));
        node.addEventHandler(CustomMouseEvent.MOUSE_DOUBLE_CLICKED, e -> System.out.println(nodeId + " mouse double clicked handler"));
    }

    /**
     * Custom MouseEvent
     */
    interface CustomMouseEvent {
        EventType<MouseEvent> MOUSE_DOUBLE_CLICKED = new EventType<>(MouseEvent.ANY, "MOUSE_DBL_CLICKED");
    }

    /**
     * Custom EventDispatcher to differentiate from single click with double click.
     */
    class DoubleClickEventDispatcher implements EventDispatcher {

        /**
         * Default delay to fire a double click event in milliseconds.
         */
        private static final long DEFAULT_DOUBLE_CLICK_DELAY = 215;

        /**
         * Default event dispatcher of a node.
         */
        private final EventDispatcher defaultEventDispatcher;

        /**
         * Timeline for dispatching mouse clicked event.
         */
        private Timeline clickedTimeline;

        /**
         * Constructor.
         *
         * @param initial Default event dispatcher of a node
         */
        public DoubleClickEventDispatcher(final EventDispatcher initial) {
            defaultEventDispatcher = initial;
        }

        @Override
        public Event dispatchEvent(final Event event, final EventDispatchChain tail) {
            final EventType<? extends Event> type = event.getEventType();
            if (type == MouseEvent.MOUSE_CLICKED) {
                final MouseEvent mouseEvent = (MouseEvent) event;
                final EventTarget eventTarget = event.getTarget();
                if (mouseEvent.getClickCount() > 1) {
                    if (clickedTimeline != null) {
                        clickedTimeline.stop();
                        clickedTimeline = null;
                        final MouseEvent dblClickedEvent = copy(mouseEvent, CustomMouseEvent.MOUSE_DOUBLE_CLICKED);
                        Event.fireEvent(eventTarget, dblClickedEvent);
                    }
                    return mouseEvent;
                }
                if (clickedTimeline == null) {
                    final MouseEvent clickedEvent = copy(mouseEvent, mouseEvent.getEventType());
                    clickedTimeline = new Timeline(new KeyFrame(Duration.millis(DEFAULT_DOUBLE_CLICK_DELAY), e -> {
                        Event.fireEvent(eventTarget, clickedEvent);
                        clickedTimeline = null;
                    }));
                    clickedTimeline.play();
                    return mouseEvent;
                }
            }
            return defaultEventDispatcher.dispatchEvent(event, tail);
        }

        /**
         * Creates a copy of the provided mouse event type with the mouse event.
         *
         * @param e         MouseEvent
         * @param eventType Event type that need to be created
         * @return New mouse event instance
         */
        private MouseEvent copy(final MouseEvent e, final EventType<? extends MouseEvent> eventType) {
            return new MouseEvent(eventType, e.getSceneX(), e.getSceneY(), e.getScreenX(), e.getScreenY(),
                    e.getButton(), e.getClickCount(), e.isShiftDown(), e.isControlDown(), e.isAltDown(),
                    e.isMetaDown(), e.isPrimaryButtonDown(), e.isMiddleButtonDown(),
                    e.isSecondaryButtonDown(), e.isSynthesized(), e.isPopupTrigger(),
                    e.isStillSincePress(), e.getPickResult());
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-20T11:02:45.767

使用 PauseTransition 的解决方案：

```
PauseTransition singlePressPause = new PauseTransition(Duration.millis(500));
singlePressPause.setOnFinished(e -> {
    // single press
});

node.setOnMousePressed(e -> {

    if (e.isPrimaryButtonDown() && e.getClickCount() == 1) {
        singlePressPause.play();
    }

    if (e.isPrimaryButtonDown() && e.getClickCount() == 2) {
        singlePressPause.stop();
        // double press
    }
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-01-05T15:16:17.770

我正在使用的单击与双击的替代方法是单击与按住（大约四分之一到半秒左右），然后释放按钮。该技术可以使用线程可中止计时器，如上面的一些代码片段中的那样，以区分两者。假设实际的事件处理发生在按钮释放时，这种替代方法的优点是单击可以正常工作（即，没有任何延迟），并且对于按住，您可以在按钮被释放时给用户一些视觉反馈持有足够长的时间以被释放（因此对于执行了哪个操作永远不会有任何歧义）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-09-04T09:46:30.340

如果您正在测试按下了多少个鼠标按钮（==2），请不要在子方法中对其进行编码！接下来是工作：

```
listView.setOnMouseClicked(new EventHandler<MouseEvent>() {
            @Override
            public void handle(MouseEvent mouseEvent) {
                if( mouseEvent.getButton().equals(MouseButton.SECONDARY)) {
                    System.out.println("isSecondaryButtonDown");
                    mouseEvent.consume();
                    // ....
                }
                else
               if(mouseEvent.getButton().equals(MouseButton.PRIMARY)){
                    if(mouseEvent.getClickCount() == 2){
                        System.out.println("Double clicked");
                       // mousePressedInListViewDC(mouseEvent);
                    }
                    else
                    if(mouseEvent.getClickCount() == 1){
                        System.out.println("1 clicked");
                        mousePressedInListView1C(mouseEvent);
                    }
               }
            }
        }) 
```

;

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-12-27T08:50:02.177

我遇到了同样的问题，我注意到单击和双击与 basic 区别：

```
 Button btn = new Button("Double click me too");
    btn.setOnMousePressed(mouseEvent -> {
        // CLICK catches
        if (mouseEvent.getClickCount() == 1) {
            System.out.println("Button clicked");
        } else if (mouseEvent.getClickCount() == 2)
            System.out.println("Button double clicked");
    }); 
```

但是作为双击的一部分，“单击”会被捕获。所以你会在控制台上看到： [![在此处输入图像描述](../Images/105633928ce8ca051812c411fb193080.png)](https://i.stack.imgur.com/h4NHW.png)

主要使用@markus-weninger 的答案，我建立了一个扩展类`Button`以公开2个新`EventHandler`s：

*   `setOnMouseSingleClicked(EventHandler<MouseEvent> eventHandler)`
*   `setOnMouseDoubleClicked(EventHandler<MouseEvent> eventHandler)`

因此，使用下面的完整示例代码，当双击最后一个按钮时，我们得到： [![在此处输入图像描述](../Images/a9ea000e3a393eb61c07cf74ed22e9fb.png)](https://i.stack.imgur.com/9q8cf.png)

**请记住：**

1.  明显的缺点是，即使是单击捕获`setOnMouseSingleClicked`也会延迟`singleClickDelayMillis`（如 Kleopatra 所述，应根据操作系统设置的暴露变量）。
2.  另一个值得注意的事实是，我扩展了`Button`，而不是`Node`它应该在的地方：实现 onMouseClicked(...) 的类。 [![在此处输入图像描述](../Images/2d17600e1f03802f24920174093b51a3.png)](https://i.stack.imgur.com/7QxVJ.png)
3.  作为最后的评论，我决定添加一个新的 EventHandler 而不是使用现有的`setOnMousePressed`，`setOnMouseReleased`或者`setOnMouseClicked`这样开发人员仍然可以完全实现这些便利`EventHandler`。例如，为了立即响应单击按钮而无需等待`singleClickDelayMillis`. 但这意味着，如果您同时实现两者，`setOnMouseClicked`即使双击也会被触发......当心。

代码来了：

```
import java.util.concurrent.CompletableFuture;

import javafx.application.Application;
import javafx.application.Platform;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.VBox;
import javafx.stage.Stage;
import javafx.beans.property.ObjectProperty;
import javafx.event.EventHandler;
import javafx.beans.property.SimpleObjectProperty;

public class DblClickCatchedWithoutSingleClick extends Application {

public class ButtonWithDblClick extends Button {

    private long        singleClickDelayMillis  = 250;
    private ClickRunner latestClickRunner       = null;

    private ObjectProperty<EventHandler<MouseEvent>>    onMouseSingleClickedProperty    = new SimpleObjectProperty<>();
    private ObjectProperty<EventHandler<MouseEvent>>    onMouseDoubleClickedProperty    = new SimpleObjectProperty<>();

    // CONSTRUCTORS
    public ButtonWithDblClick() {
        super();
        addClickedEventHandler();
    }

    public ButtonWithDblClick(String text) {
        super(text);
        addClickedEventHandler();
    }

    public ButtonWithDblClick(String text, Node graphic) {
        super(text, graphic);
        addClickedEventHandler();
    }

    private class ClickRunner implements Runnable {

        private final Runnable  onClick;
        private boolean         aborted = false;

        public ClickRunner(Runnable onClick) {
            this.onClick = onClick;
        }

        public void abort() {
            this.aborted = true;
        }

        @Override
        public void run() {
            try {
                Thread.sleep(singleClickDelayMillis);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            if (!aborted) {
                Platform.runLater(onClick::run);
            }
        }
    }

    private void addClickedEventHandler() {
        //Handling the mouse clicked event (not using 'onMouseClicked' so it can still be used by developer).
        EventHandler<MouseEvent> eventHandler = me -> {
            switch (me.getButton()) {
                case PRIMARY:
                    if (me.getClickCount() == 1) {
                        latestClickRunner = new ClickRunner(() -> {
                            System.out.println("ButtonWithDblClick : SINGLE Click fired");
                            onMouseSingleClickedProperty.get().handle(me);
                        });
                        CompletableFuture.runAsync(latestClickRunner);
                    }
                    if (me.getClickCount() == 2) {
                        if (latestClickRunner != null) {
                            latestClickRunner.abort();
                        }
                        System.out.println("ButtonWithDblClick : DOUBLE Click fired");
                        onMouseDoubleClickedProperty.get().handle(me);
                    }
                    break;
                case SECONDARY:
                    // Right-click operation. Not implemented since usually no double RIGHT click needs to be caught.
                    break;
                default:
                    break;
            }
        };
        //Adding the event handler
        addEventHandler(MouseEvent.MOUSE_CLICKED, eventHandler);
    }

    public void setOnMouseSingleClicked(EventHandler<MouseEvent> eventHandler) {
        this.onMouseSingleClickedProperty.set(eventHandler);
    }

    public void setOnMouseDoubleClicked(EventHandler<MouseEvent> eventHandler) {
        this.onMouseDoubleClickedProperty.set(eventHandler);
    }
    public long getSingleClickDelayMillis() {
        return singleClickDelayMillis;
    }

    public void setSingleClickDelayMillis(long singleClickDelayMillis) {
        this.singleClickDelayMillis = singleClickDelayMillis;
    }

}

public void start(Stage stage) {
    VBox root = new VBox();

    Label lbl = new Label("Double click me");
    lbl.setOnMouseClicked(mouseEvent -> {
        // CLICK catches
        if (mouseEvent.getClickCount() == 2) {
            System.out.println("Label double clicked");
        } else if (mouseEvent.getClickCount() == 1)
            System.out.println("Label clicked");
    });

    Button btn = new Button("Double click me too");
    btn.setOnMousePressed(mouseEvent -> {
        // CLICK catches
        if (mouseEvent.getClickCount() == 1) {
            System.out.println("Button clicked");
        } else if (mouseEvent.getClickCount() == 2)
            System.out.println("Button double clicked");
    });

    ButtonWithDblClick btn2 = new ButtonWithDblClick("Double click me three ;-)");
    btn2.setOnMouseSingleClicked(me -> {
        System.out.println("BUTTON_2 : Fire SINGLE Click");
    });
    btn2.setOnMouseDoubleClicked(me -> {
        System.out.println("BUTTON_2 : Fire DOUBLE Click");
    });

    root.getChildren().add(lbl);
    root.getChildren().add(btn);
    root.getChildren().add(btn2);

    Scene scene = new Scene(root);
    stage.setScene(scene);
    stage.show();
}

public static void main(String[] args) {
    launch();
} 
```

}

# mysql - 内部联接使用like 子句而不是两行仅返回 1 行

> ID：10949465
> 
> 赞同：1
> 
> 时间：2012-06-08T13:07:40.727
> 
> 标签：mysql

我有下面的 sql，如果我取出表的内部连接并对值进行硬编码，我会得到 2 条记录。但是当我使用内部连接语句时，我只得到 1 条记录。我知道对于 MYSQL，like 子句不区分大小写。这是下面的sql。我不知道为什么它只返回行。

```
SELECT 
      a.project_code as projectCode, 
      a.project_name as projectName, 
      a.project_creation_date as projectCreationDate, 
      a.project_end_date as projectEndDate, 
      a.project_status as projectStatus      
from projects a 
inner join tmp_rec_naren8 b 
    on a.project_name like concat("%",b.expertise_desc,"%") 
    OR a.project_description like concat("%",b.expertise_desc,"%") ; 
```

如果我将以上内容更改为：

```
select *
from projects
where project_name like '%java%'
OR project_description like '%java%'; 
```

我得到 2 行而不是 1 行。

表`tmp_rec_naren8`只有一列`expertise_desc`并包含以下数据：

```
expertise_desc
--------------
XML
Python
DWH
Java 
```

表`projects`有很多列：.. 但下面这些是相关的

```
 project_code sr_user_name project_name project_descriiption ..
    -----------------------------------------------------------
    1             naren5      POS          C++, XML,Java
    2             naren7      INV          Networking
    3             naren9      CCV          Java, Unix 
```

第一个查询返回 1 行：

```
 project_code sr_user_name project_name project_descriiption ..
    ---------------------------------------------------------------
     1            naren5       POS         C++,XML,Java 
```

第二个查询返回 2 行

```
 project_code sr_user_name project_name project_descriiption ..
    -----------------------------------------------------------
    1             naren5      POS          C++, XML,Java
    3             naren9      CCV          Java, Unix 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:19:16.077

Can you try the following:

```
SELECT 
      a.project_code as projectCode, 
      a.project_name as projectName, 
      a.project_creation_date as projectCreationDate, 
      a.project_end_date as projectEndDate, 
      a.project_status as projectStatus      
from projects a, tmp_rec_naren8 b
where a.project_name like concat("%",b.expertise_desc,"%") 
    OR a.project_description like concat("%",b.expertise_desc,"%") ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:18:59.130

一种解释是 in 的值是否`expertise_desc`包含尾随空格，即`'Java '`(not `'Java'`)。那么 concat 值将是`'%java %'`，而不是`'%java%'`，有所作为。

如果您的一个项目名称以 .*结尾*，`java`而另一个`java` *在*名称中，则只有一个会使用联接匹配，但两个会与非联接匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T13:26:42.647

试试看：

```
SELECT        
a.project_code as projectCode,        
a.project_name as projectName,        
a.project_creation_date as projectCreationDate,        
a.project_end_date as projectEndDate,        
a.project_status as projectStatus       
from projects,tmp_rec_naren8
where LOCATE(TRIM(tmp_rec_naren8.expertise_desc),projects.project_name) > 0
or
LOCATE(TRIM(tmp_rec_naren8.expertise_desc),projects.project_description) > 0 
```

# bash - 使用 bash 列出 *.h 和 *.cpp

> ID：10949473
> 
> 赞同：1
> 
> 时间：2012-06-08T13:08:07.607
> 
> 标签：bash, glob, ls

我`bash`在 Fedora 16 上使用 4.2.28 版本。我`extglob`设置了选项。我正在尝试列出所有匹配`*.h`或`*.cpp`使用的文件，`ls *(h|cpp)`但该命令返回以下内容：

```
[agnel@damien cadcore]$ ls *(h|cpp)
ls: cannot access *(h|cpp): No such file or directory 
```

我已经验证我的当前目录中确实有几个`.h`文件`.cpp`。我做错了什么还是这可能是`bash`or中的错误`ls`？

**更新：**感谢您的回答。使用`*.h *.cpp`做我需要的。但是，我仍然想知道为什么`extglob`没有像我预期的那样工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T13:33:56.477

扩展的 glob`*(pattern-list)`匹配以下模式列表的 0 次或多次出现。它不匹配任意字符串后跟选项列表中的内容。你要：

```
$ ls *.@(h|cpp) 
```

这匹配一些东西，后跟一个句点，后跟“h”或“cpp”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T13:12:32.967

你应该能够做到`ls *h *cpp`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-08T13:11:50.073

在这种情况下，我认为您不需要复杂的通配符：只需尝试`echo *.h *.cpp`.

# python - 约束数组的值

> ID：10949474
> 
> 赞同：1
> 
> 时间：2012-06-08T13:08:07.750
> 
> 标签：python, numpy

我正在尝试约束 numpy 数组的值，以便没有值介于 -0.5 和 0.5 之间。因此，如果我有一个形状为 (6,2) 的数组，其值如下：

```
array([[  0.49873803,  -1.66316398],
       [ -0.36091764,   2.0635736 ],
       [ -1.09922111,  -2.49380792],
       [  0.92724579,  -5.19540319],
       [  1.49726584,  -0.22718924],
       [ 60\.        ,  60\.        ]]) 
```

如何让 numpy 将值从 -0.5 -> 0.0 更改为 -0.5，从 0.5 -> 0.0 更改为 0.5，以便示例数组为：

```
array([[  0.5,  -1.66316398],
       [ -0.5,   2.0635736 ],
       [ -1.09922111,  -2.49380792],
       [  0.92724579,  -5.19540319],
       [  1.49726584,  -0.5],
       [ 60\.        ,  60\.        ]]) 
```

我尝试使用 np.clip 但没有用，或者我无法弄清楚，所以我来了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T13:14:24.803

对于您`a`刚刚运行：

```
a[( 0\.  <= a) & (a < 0.5)] =  0.5
a[(-0.5 <  a) & (a < 0\. )] = -0.5 
```

或者简单地说：

```
np.putmask(a, np.abs(a) < .5, np.sign(a) * .5) 
```

第一个可以`0.`根据您的需要进行调整以处理。第二个留给`0.`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-08T13:19:00.890

您是否尝试过仅遍历数组？

```
i = 0
j = 0

while ( i < len(A)):
    while (j < len(i)):
        if  -0.5 <= A[i][j] <= 0:
            A[i][j] = -0.5
        if  0 <= A[i][j] <= 0.5:
            A[i][j] = 0.5
        j = j + 1

    i =  i +1 
```

或者类似的东西......如果语法不正确，请原谅我......

# php - 获取要使用的搜索输入是 PHP 脚本，不起作用？

> ID：10949475
> 
> 赞同：0
> 
> 时间：2012-06-08T13:08:16.563
> 
> 标签：php, html, pdo

我正试图在最后期限即将到来之前解决这个问题，因此感谢您提供任何帮助。

```
<form id="searchdivebay" action="searchdivebay.php" method="get" target="results">
    <div class="searchbox"><input type="text" name="searchbox" id="searchboxinput"/></div>
    <div class="searchbtn"><input type ="submit" name="searchbutton" value="Search DiveBay"/></div>
</form> 
```

是我的 html 表单。

我需要获取搜索框输入字段的值以用作 php 脚本中的 sql 查询。我的脚本就像我用 's' 替换了 $_GET['searchbox'] 来测试它一样工作。出于某种原因，在提交表单时不会启动 php 脚本，我不知道该怎么做。任何人都可以看到脚本或 html 有什么问题吗？非常感激。

```
<?xml version = "1.0" encoding = "utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>searchdbresults</title>
<link rel="stylesheet" type = "text/css" href = "styledb.css" />
</head>

<body>  
<?php
$user = 'root';
$pass = null;
$pdo = new PDO('mysql:host=localhost; dbname=divebay;', $user, $pass);

$search = $_GET['searchbox'];
if(!isset($search)){
?>
<p style="color:white; font-size:18pt; font-family: Impact;"> You didn't search for anything!<p>
<?php
}
try{
    $stmt = $pdo->prepare('SELECT * FROM auction WHERE name LIKE ?');
    $stmt->bindValue(1, '%'. trim($search) .'%');
    $stmt->execute();

    $numrows = 0;
?>
    <table id="showresult">
<?php
    while($row = $stmt->fetch(PDO::FETCH_ASSOC)){
        $numrows++;
        $ID = $row['ID'];
        $img = $row['img'];
        $name = $row['name'];
        $owner = $row['owner'];
        $cprice = $row['cprice'];
        $iprice = $row['iprice'];
        $incprice = $row['incprice'];
        $etime = $row['etime'];
?>      
    <tr class = "resultindex">
        <td class = "imgholder"><?php echo $img; ?></td>
        <td class = "infoholder">
            <div style ="height:4px;"></div>
            <div class = "infodiv"><?php echo $name; ?></div>
            <div class = "locdiv"></div>
            <div class = "userdiv"><span class="fromuser">From user: </span></br><?php echo $owner; ?></div>
        </td>
        <td style = "width:2px; background-color:#330066;"></td>
        <td class ="priceholder">
            <div class = "currentp"><span class="currentbid">Current Bid: </span><br/><?php echo $cprice; ?></div>
            <div class = "instantp"><span class="instantbid">Instant Sale: </span><br/><?php echo $iprice; ?></div>
            <div style = "height:5px;"></div>
            <div class = "incp"><span class="nextbid">Next Bid:</span><br/>+<?php echo $incprice; ?></div>
        </td>
        <td style = "width:2px; background-color:#330066;"></td>
        <td class = "timer"><span class="timeleft">Time Left: </span><br/><?php echo $etime; ?></td>
    </tr>

<?php   
    }
?>

    <tr>
        <td colspan="4">Displaying <?php echo $numrows; ?> results</td>

    </tr>
    </table>
    </body>
    </html>
<?php
    }catch(PDOException $e){
        echo $e->getMessage();
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:20:22.107

也许是一个长镜头，但 'type ="submit"' 里面有一个空格。如果空白存在，您的浏览器可能无法将您的提交按钮识别为提交按钮，因此无法提交您的表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T14:59:37.773

如果您在 Firefox 或 Chrome 上测试您的表单，我建议使用 firebug 或开发人员工具来查看传递给服务器的数据。在 chrome 中，我会查看网络选项卡，不太确定 firebug。另外我认为这可能与表单上的目标属性有关。结果是合法的框架名称吗？

# php - 在 Doctrine2 中扩展我的 ORDER BY

> ID：10949478
> 
> 赞同：1
> 
> 时间：2012-06-08T13:08:34.817
> 
> 标签：php, doctrine-orm, sql-order-by, version, dql

我有一个包含版本号的表格，我想自然地读出它们。
原始 SQL 没有问题：

```
SELECT * FROM versions ORDER BY REPLACE(version, '.', '')+0 DESC 
```

但是，如果我像这样在 Doctrine2 中编写查询：

```
$qry = $this->createQueryBuilder('v')
  ->select('v')
  ->orderBy("REPLACE(v.version, '.', '')+0", 'DESC'); 
```

我只得到

> 致命错误：未捕获的异常 'Doctrine\ORM\Query\QueryException' 带有消息 '[Syntax Error] line 0, col 100: Error: Expected end of string, got '('' in ......

有人知道如何为 Doctrine2 编写此查询吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-08T15:32:44.297

After long time struggeling, I realized that I needed to write out the query using `NativeQuery`:

```
$rsm = new \Doctrine\ORM\Query\ResultSetMapping();
// do some result mapping here ....

$query = $this->_em->createNativeQuery("SELECT v.* FROM versions v ORDER BY REPLACE(v.version, '.', '')+0 DESC", $rsm);

$versions = $query->getResult(); 
```

# r - 为什么不能在函数中使用“=” R 运算符？

> ID：10949483
> 
> 赞同：7
> 
> 时间：2012-06-08T13:09:01.677
> 
> 标签：r, assignment-operator

[手册](http://stat.ethz.ch/R-manual/R-patched/library/base/html/assignOps.html)指出：

> 运算符“<-”可以在任何地方使用，而运算符“=”只允许在顶层使用（例如，在命令提示符下键入的完整表达式中）或作为表达式括号列表中的子表达式之一.

[这里的问题](https://stackoverflow.com/questions/1741820/assignment-operators-in-r-and)提到了在函数调用中使用时的区别。但在函数定义中，它似乎工作正常：

```
a = function () 
{
    b = 2
    x <- 3
    y <<- 4
}

a()
# (b and x are undefined here) 
```

那么为什么手册提到这一点`the operator ‘=’ is only allowed at the top level`？

[语言定义](http://cran.r-project.org/doc/manuals/R-lang.pdf)中没有任何内容（没有`=`列出任何运算符，真可惜！）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-08T14:38:25.417

你引用的文字说`at the top level OR in a braced list of subexpressions`。您在子表达式的花括号列表中使用它。这是允许的。

您必须竭尽全力才能找到既不是顶级也不是大括号内的表达式。这是一个。有时您想将赋值包装在 try 块中：`try( x <- f() )`很好，但`try( x = f(x) )`不是——您需要更改赋值运算符或添加大括号。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-08T13:34:36.543

不在顶层的表达式包括在控制结构中的用法，例如`if`. 例如，以下编程错误是非法的。

```
> if(x = 0) 1 else x
Error: syntax error 
```

如此处所述：[https ://stackoverflow.com/a/4831793/210673](https://stackoverflow.com/a/4831793/210673)

另请参阅[http://developer.r-project.org/equalAssign.html](http://developer.r-project.org/equalAssign.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-08T19:25:30.170

除了一些例子（例如其他例子`system.time`显示的地方`<-`和`=`结果不同）之外，主要区别是更具哲学性。Perl 的创建者 Larry Wall 说过“相似的东西应该看起来相似，不同的东西应该看起来不同”这样的话，我发现在不同的语言中看看哪些东西被认为是“相似的”以及哪些被认为是很有趣的不同的”。现在对于 R 分配，让我们比较 2 个命令：

```
myfun( a <- 1:10 )

myfun( a = 1:10 ) 
```

有些人会争辩说，在这两种情况下，我们都分配`1:10`给`a`所以我们正在做的事情是相似的。

另一个论点是，在第一次调用中，我们分配给与被调用`a`的环境相同的变量，`myfun`而在第二次调用中，我们分配给在调用`a`函数时创建的环境中的变量，并且是函数的局部变量，这两个`a`变量是不同的。

所以使用哪个取决于你认为分配是“相似的”还是“不同的”。

就个人而言，我更喜欢`<-`，但我认为不值得打一场圣战。

# ruby - Ruby“邮件”gem 文档

> ID：10949484
> 
> 赞同：13
> 
> 时间：2012-06-08T13:09:06.780
> 
> 标签：ruby, gem, mail-gem

我找不到 Mail gem 的完整文档[https://github.com/mikel/mail](https://github.com/mikel/mail)

对于文档，所有链接都指向 github 主页，但自述文件远未完成。有没有其他方法可以搜索源代码中的所有内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T12:47:51.197

根据上面评论中的@d11wtq，您可以在 ruby [​​-doc.org](http://www.ruby-doc.org/gems/docs/m/mail-2.5.4/)和[ruby​​doc.info上找到 rdoc 文档](http://rubydoc.info/gems/mail/frames)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-10T19:54:07.610

如果您使用文档安装了 gem，则可以通过运行以下命令来运行本地 gem 文档服务器：

```
gem server 
```

它会告诉你它在哪里可以访问。连接您的网络浏览器并查找邮件 gem。那里有更多的文档。

# javascript - Fullcalendar jquery插件中的年视图

> ID：10949486
> 
> 赞同：36
> 
> 时间：2012-06-08T13:09:13.090
> 
> 标签：javascript, jquery, jquery-plugins, fullcalendar

我在 fullcalendar 中启动了 YearView（源自基本的“MonthView”，需要显示更长的事件，例如学校假期），如果有人已经熟悉事件在视图上的显示方式，我可以使用手。

1.  使用“BasicEventRenderer”，如何填充“DayEventRenderer”的“segmentContainer”？
2.  我什么时候初始化默认的开始和结束日期来分隔活动年份？（可以更改起始月份，如果能够在当前月份和当天保持高亮，那就太好了）。

[在https://github.com/Paulmicha/fullcalendar](https://github.com/Paulmicha/fullcalendar)查看我的 github 分叉

-> 示例文件是[https://github.com/Paulmicha/fullcalendar/blob/master/tests/year-view-test-01.html](https://github.com/Paulmicha/fullcalendar/blob/master/tests/year-view-test-01.html)

* * *

![在此处输入图像描述](../Images/5d146cc801c395cb614c6f6d908b3f84.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-18T13:53:45.167

FullCalendar 文档：[http ://arshaw.com/fullcalendar/docs/](http://arshaw.com/fullcalendar/docs/)

将事件加载为 JSON：[http ://arshaw.com/fullcalendar/docs/event_data/events_json_feed/](http://arshaw.com/fullcalendar/docs/event_data/events_json_feed/)

渲染事件：[http ://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/](http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/)

渲染事件示例：

```
fc.fullCalendar('renderEvent', {
    'id': 1,
    'title': 'Test Event 1',
    'start': '2009-11-05T13:15:30Z',
    'end': '2009-11-05T13:30:00Z'
}); 
```

限制可用月份的显示：[Fullcalendar 限制可用月份的显示？](https://stackoverflow.com/questions/2927744/fullcalendar-limit-the-display-of-available-months)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-01-30T12:47:22.223

或者，如果您需要这样的年视图： [![在此处输入图像描述](../Images/e6e66d1f4fd8631f7cef214aa2438b7f.png)](https://i.stack.imgur.com/Y1EQg.png)

**您可以通过 npm** [https://www.npmjs.com/package/fullcalendar-year-view安装它](https://www.npmjs.com/package/fullcalendar-year-view)

脚步：

```
cd yourFileLocation
npm init (press enter)
npm i fullcalendar-year-view 
```

要获取 lib 文件，请转到`yourFileLocation/node_modules/fullcalendar-year-view/dist/`

或者，您可以为您的页面使用**[browserify](http://browserify.org/)**

将 css 和 js lib 文件包含到您的页面中

最后使用“年”视图

```
$('#calendar').fullCalendar({
  header: {
    left: 'prev,next today',
    center: 'title',
    right: 'year,month,basicWeek,basicDay'
  }
  .... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-04T05:43:55.003

我认为您的用户界面的替代方案是[bootstrap-year-calendar](http://www.bootstrap-year-calendar.com/#Examples/)。它允许您查看整年并每天放置一个/多个值，但这些值仅在悬停或单击时可见。

为了我的需要，它成功了。

# php - php会话变量奇怪的行为

> ID：10949487
> 
> 赞同：0
> 
> 时间：2012-06-08T13:09:20.537
> 
> 标签：php, session, variables

我在 PHP 中设置会话变量如下：

```
 $_SESSION['pass'] = $pass; 
```

密码在哪里`$pass`，即。`"test4;"`左侧的会话变量工作正常，但令我惊讶和担心的是`$pass`，右侧似乎也是一个会话变量，也就是说，一旦设置，我可以`$pass`从任何页面回显它似乎一直持续到我销毁会话。

是什么赋予了？我怎样才能防止这种情况？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T13:12:48.887

[注册全局变量](http://php.net/manual/en/security.globals.php)可能已打开 - 这是一个巨大的安全风险！检查是否是这种情况，并确保它已关闭。此外，它是一种已弃用的方法。

如果启用了 register_globals，您可以通过在 php.ini 中更改此设置*或*将其放在 .htaccess 文件中来[关闭它：](http://www.php.net/manual/en/ini.core.php#ini.register-globals)

 *```
php_flag register_globals off 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-08T13:13:32.360

您将会话和 $pass 分配为彼此相等。尝试使用

```
if(!isset($_SESSION['pass'])) 
```

使用您想要验证的任何信息*

# c++ - 将二进制数转换为十进制数的快速方法

> ID：10949491
> 
> 赞同：12
> 
> 时间：2012-06-08T13:09:26.137
> 
> 标签：c++, binary

我必须尽快将二进制数转换为`unsigned int bin_number = 10101010`十进制表示（即`170`）？什么是最好的算法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-08T13:10:58.493

使用模板可以在*编译时*解决这个问题。

```
template<unsigned long num>
struct binary
{
    static unsigned const value =
        binary<num/10>::value << 1 | num % 10;
};

// Specialization for zero
template<>
struct binary<0>
{ static unsigned const value = 0; }; 
```

二进制模板再次用较小的 实例化`num`，直到`num`达到零，并将特化用作终止条件。

例子：`std::cout << binary<10101010>::value;`

对于*运行时*问题：

```
unsigned binary_to_decimal(unsigned num)
{
    unsigned res = 0;

    for(int i = 0; num > 0; ++i)
    {
        if((num % 10) == 1)
            res += (1 << i);

        num /= 10;
    }

    return res;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-08T13:49:33.853

好吧，如果这个“数字”实际上是从某个源（从文件或用户读取）获得的字符串，您将其转换为数字（认为它更适合实际数字），这很可能，您可以使用 a`std::bitset`进行转换：

```
#include <bitset>

unsigned int number = std::bitset<32>("10101010").to_ulong(); 
```

（当然`32`这里是实现定义的，可能更合适地写为`std::numeric_limits<unsigned int>::digits`。）

但是，如果它确实是（非常）第一位的数字（整数变量），您可以这样做：

```
#include <string>

unsigned int number = std::bitset<32>(std::to_string(bin_number)).to_ulong(); 
```

（使用 C++11 的`to_string`）但这可能不再是最有效的方法，因为其他人已经提出了基于数字的更有效的算法。但如前所述，我怀疑你是否真的把这个数字作为一个实际的整数变量放在首位，而是从某个文本文件或用户那里读取它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-08T13:19:37.920

实际上，如果您编写`unsigned int bin_number = 10101010`，编译器会将其解释为十进制数。

如果要在源代码中编写二进制文字，则应使用[`BOOST_BINARY`](https://www.boost.org/doc/libs/1_70_0/libs/utility/utility.htm#BOOST_BINARY). 然后，您只需要使用 打印它`cout`，十进制是默认值...

```
unsigned int i = BOOST_BINARY(10101010);
std::cout << i; // This prints 170 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-13T21:40:39.173

由于 C++11（即使 C++11 在这方面比 C++14 更受限制），函数`constexpr`可以避免`template`具有编译时值的必要性。

这里是兼容 C++14 的版本：

```
constexpr unsigned binary_to_decimal(unsigned num)
{
    unsigned res = 0;

    while (num)
    {
        res = 10 * res + num % 10;
        num /= 10;
    }
    return res;
} 
```

对于文字，您甚至可以使用 C++14 以来的二进制文字：

```
0b1010'1010 // or 0b10101010 without separator 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T13:57:39.213

如果您知道您正在处理的二进制数字的数量*并且*它始终是固定的*并且*二进制数字在运行时以字符串形式出现（就像从文件或标准输入中读取一样）（即编译时转换不可能）那么你可以采用这种方法：

```
int to_binary( const char* c )
{
    return ( ( c[0] & 1 ) ? 0x80 : 0x00 ) |
           ( ( c[1] & 1 ) ? 0x40 : 0x00 ) |
           ( ( c[2] & 1 ) ? 0x20 : 0x00 ) |
           ( ( c[3] & 1 ) ? 0x10 : 0x00 ) |
           ( ( c[4] & 1 ) ? 0x08 : 0x00 ) |
           ( ( c[5] & 1 ) ? 0x04 : 0x00 ) |
           ( ( c[6] & 1 ) ? 0x02 : 0x00 ) |
           ( ( c[7] & 1 ) ? 0x01 : 0x00 );
} 
```

这假定一个固定的八位二进制数。像这样调用：

```
std::cout << to_binary("10101010") << std::endl; 
```

如果您有一个 16 位数字，您仍然可以使用它：

```
const char* bin_number = "1010101010101010";

// Deal with 16 bits
std::cout << ( to_binary( bin_number ) << 8 | to_binary( bin_number + 8 ) ) << std::endl; 
```

请注意，这里显然没有边界检查，我依赖于“1”的 LSB 始终为 1 而“0”始终为 0（因此不验证它实际上是二进制输入。）

自然，它非常具体且不是很灵活，但它确实可以完成工作，我不确定你会变得更快。

# msbuild - 运行自定义 MSBuild 任务作为 git 部署到 Azure 网站的一部分

> ID：10949492
> 
> 赞同：1
> 
> 时间：2012-06-08T13:09:27.990
> 
> 标签：msbuild, azure, azure-web-app-service

## 问题

作为我的 csproj 的一部分，我有一个自定义 MSBuild 任务，它执行 YUICompressor 并生成一个已编译的 css 和 js 文件。

```
<PropertyGroup>
    <CssOutputFile>$(OutDir)..\Styles\compiled.css</CssOutputFile>
    <JavaScriptOutputFile>$(OutDir)..\Scripts\compiled.js</JavaScriptOutputFile>
    <BuildDependsOn Condition="'$(Configuration)' != 'Debug'">
      $(BuildDependsOn);
      CompressorTarget;
    </BuildDependsOn>
</PropertyGroup> 
```

这作为 git 部署的一部分运行良好，并且正在生成文件，但是 Azure 网站部署引擎随后会将所有输出文件复制到另一个文件夹。在那个过程中，它似乎需要你拥有`csproj`的任何东西，而不是文件夹中的任何东西。生成的compiled.css和compiled.js不会被复制（因为它们不在我的csproj中）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T19:09:23.627

Azure 为部署项目所做的操作应该与执行以下操作完全相同：

*   右键单击项目并选择发布
*   将发布方法更改为“文件系统”
*   输入路径并单击发布

因此，通常，您需要确保构建过程正常运行，以便在进行本地发布时获得正确的文件。如果是这样，那么当 git 推送到 Azure 时，您很可能会得到相同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T13:54:27.873

根据您放置已编译脚本的位置，您可以在项目文件中使用星号包含：

```
<ItemGroup>
  <Content Include="assets\**\*" />
</ItemGroup> 
```

如果 Azure 使用您的项目文件来确定要部署的内容（一开始似乎有些奇怪），那么应该可以。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T13:10:11.110

我现在使用的解决方法是向 csproj 添加一个空的已编译的.css 和 .js 文件，我想写这个问题以防有人遇到同样的事情。

如果有计划为这种情况做一些不同的事情，如果来自 MS 的人可以发表评论，那就太好了。

# c# - 使用构建操作访问文件：内容

> ID：10949504
> 
> 赞同：6
> 
> 时间：2012-06-08T13:10:21.250
> 
> 标签：c#, visual-studio-express

我之前访问内容文件的方式是将它们设置为“始终复制/如果更新”，然后直接加载文件。

但是，浏览网页时，似乎还有另一种加载方式——它会自动包含在 .exe/.dll 中。但是，我一直无法找出访问所述包含内容的方法是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T13:12:05.173

它是`Embedded Resource`。这将导致它被流式传输到您的程序集中。

这是微软的遍历：http: [//support.microsoft.com/kb/319292](http://support.microsoft.com/kb/319292)

# .net - 在gridview中获取单元格值

> ID：10949505
> 
> 赞同：0
> 
> 时间：2012-06-08T13:10:22.537
> 
> 标签：.net, gridview

我想从gridview内的文字中获取文本，

但是当我运行程序时，异常通过

无法将 System.Web.UI.LiteralControl 类型的对象转换为 System.Web.UI.DataBoundLiteralControl 类型。

**.aspx 代码：**

```
<asp:GridView ID="gridview3" runat="server" OnRowDataBound="RowDataBound" DataKeyNames="qno" AutoGenerateColumns="false"  ShowFooter="true" OnRowCancelingEdit="cancel"   OnRowCommand="create" OnRowDeleting="delete" OnRowEditing="edit" OnRowUpdating="update">

            <Columns>
            <asp:TemplateField HeaderText="Selection">
            <ItemTemplate>
                <asp:CheckBox ID="check1" runat="server"/>
            </ItemTemplate>

            </asp:TemplateField>
             <asp:TemplateField HeaderText="ID" Visible="true">
        <ItemTemplate>
            <asp:Label ID="id7" runat="server" Text='<%#Eval("assessid") %>' ></asp:Label>

        </ItemTemplate>
        </asp:TemplateField>

    <asp:TemplateField HeaderText="Qno" Visible="true">
        <ItemTemplate>
         <asp:DropDownList  AppendDataBoundItems="true"  AutoPostBack="true"     ID="DropDownList1"  runat="server">
         <asp:ListItem ></asp:ListItem>

        </asp:DropDownList>

        </ItemTemplate>

    </asp:TemplateField>

      <asp:TemplateField HeaderText="description" Visible="true">
        <ItemTemplate>

         <asp:Literal ID="id6" runat="server" Text='<%#Eval("description") %>' >
         </asp:Literal>
        </ItemTemplate>
         <EditItemTemplate>
             <asp:TextBox ID="TextBox1" Text='<%#Eval("description") %>' runat="server" ></asp:TextBox>

        </EditItemTemplate>
        <FooterTemplate>

        <asp:TextBox ID="TextBox3"  runat="server" ></asp:TextBox>

        </FooterTemplate>

    </asp:TemplateField>

     <asp:TemplateField HeaderText="strongagree" Visible="true">
        <EditItemTemplate>
        =

      <asp:TemplateField HeaderText="Action" Visible="true">

        <ItemTemplate>
            <asp:LinkButton ID="LinkButton5" Text="Edit" CommandName="edit" runat="server"></asp:LinkButton>
    </ItemTemplate>
    <EditItemTemplate>

       <asp:LinkButton ID="LinkButton1" Text="update" CommandName="update" runat="server"></asp:LinkButton>

       <asp:LinkButton ID="LinkButton3" Text="cancel" CommandName="cancel" runat="server"></asp:LinkButton>
    </EditItemTemplate>
    <FooterTemplate>

    <asp:LinkButton ID="LinkButton7" Text="DeleteAll"  CommandName="delete" runat="server"></asp:LinkButton>

    </FooterTemplate>
</asp:TemplateField>

    <asp:TemplateField HeaderText="" Visible="true">

        <ItemTemplate>

          <asp:LinkButton ID="LinkButton23" Text="delete" CommandName="delete" runat="server"></asp:LinkButton>

    </ItemTemplate>

    <FooterTemplate>
    <asp:Button ID="bdh" Text="insert " CommandName="insert" runat="server" />

    </FooterTemplate>

</asp:TemplateField>

</Columns>

            <FooterStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
            <HeaderStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
            <PagerStyle BackColor="#FFCC66" ForeColor="#333333" HorizontalAlign="Center" />
            <RowStyle BackColor="#FFFBD6" ForeColor="#333333" />
            <SelectedRowStyle BackColor="#FFCC66" Font-Bold="True" ForeColor="Navy" />
            <SortedAscendingCellStyle BackColor="#FDF5AC" />
            <SortedAscendingHeaderStyle BackColor="#4D0000" />
            <SortedDescendingCellStyle BackColor="#FCF6C0" />
            <SortedDescendingHeaderStyle BackColor="#820000" />

        </asp:GridView> 
```

**后面的代码**

```
protected void RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
       string percentage = ((LiteralControl)e.Row.Cells[2].Controls[0]).Text;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:17:00.183

你试过改变

```
 string percentage = ((LiteralControl)e.Row.Cells[4].Controls[0]).Text; 
```

至

```
 string percentage = ((DataBoundLiteralControl)e.Row.Cells[4].Controls[0]).Text; 
```

# c++ - C++ 解析器或静态代码分析

> ID：10949506
> 
> 赞同：1
> 
> 时间：2012-06-08T13:10:23.537
> 
> 标签：c++, parsing, static-analysis

我正在寻找一个免费的软件、工具、库或任何分析 C++ 代码的东西。

据我所知，诸如“Cppcheck”之类的“静态代码分析”工具对我没有帮助，因为我无法定义自己的规则或输出。我猜，一个能给我一个 C++ 文件的 AST（抽象语法树）的库是最好的。

我的目标是编写一个命令行工具来生成包含以下内容的输出：

```
Test.cpp:
The file contains 42 global Integers.
The Class Test has the following attributes:
  String name,
  Int size.
The Class Test contains the following global functions:
  void Test(),
  int getTestSize(),
  String renameTest(String newName). 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T13:20:47.893

You can use clang and the existing analyzer or implement your own analyzer on top of the provided APIs.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:53:21.117

正如大卫建议 Clang 是一个不错的选择，您只需实现自己的 ASTConsumer ，您可以以已经存在的 clang ASTConsumers 为例，例如 ASTPrinter 或 ASTDumpXML

# php - 如何仅缓存后退按钮

> ID：10949512
> 
> 赞同：7
> 
> 时间：2012-06-08T13:10:41.180
> 
> 标签：php, caching

有人可以向我解释如何为我的页面设置缓存，如果用户点击后退按钮并且处于脱机状态或其他什么东西，那么他仍然会像 SO 和大多数网站一样看到上一页。

但是，当发送一个新的 HTTP 请求时，我怎么能强制它获取一个新的请求，因为内容每分钟都会发生变化（即论坛）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T18:05:49.273

我终于发现，由于某种原因，在我的所有页面上放置一个缓存，会让它们永远有一个后退按钮，但是当页面刷新时，它仍然会从服务器获取一个新的。

奇怪，但它的工作原理！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:23:22.097

真正做到这一点的唯一方法是通知客户端浏览器它可以缓存网页，如果缓存时间尚未到期，这将（有时）阻止浏览器发送另一个 HTTP 请求（请参阅此处了解更多信息：[http:// en.wikipedia.org/wiki/Web_cache#Cache_control](http://en.wikipedia.org/wiki/Web_cache#Cache_control)）。

但是，如果页面的内容是动态的并且不断刷新（如果它是一个论坛，你似乎暗示了这一点）。那么您可能根本不想让浏览器缓存。

# netbeans-7 - 在哪里可以找到 netbeans 7 的白色主题？

> ID：10949519
> 
> 赞同：1
> 
> 时间：2012-06-08T13:10:56.927
> 
> 标签：netbeans-7

很难为 NetBeans 7 找到一个好的主题，而且我找到的每个主题都是黑色的。我在哪里可以找到一个非常好的白色主题，用于将 PHP/HTML/Javascript/CSS 制作成 NetBeans？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T10:29:46.170

建立你自己的@http [://www.wordfraud.net/themebuilder/](http://www.wordfraud.net/themebuilder/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T13:28:27.077

我为您找到了 Netbeans 7 的最佳主题：

[http://net.tutsplus.com/freebies/themes/netbeans-twilight-theme/](http://net.tutsplus.com/freebies/themes/netbeans-twilight-theme/)

编辑：如果您没有找到一个不错的主题，只需按照此处所述编辑颜色语言：[Netbeans 主题：调整 HTML 参数值的颜色](https://stackoverflow.com/questions/10249368/netbeans-theme-adjusting-colour-of-html-parameter-values)

# jquery - 在立即执行的函数中加载 jQuery 的 JS 加载顺序

> ID：10949521
> 
> 赞同：0
> 
> 时间：2012-06-08T13:11:00.883
> 
> 标签：jquery

你能做这个吗？

```
var myFunction = function(){
    $(function(){
        // jQuery code here
        $("#myField").hide();
    })    
}(); 
```

我有一些像这样的代码几乎在任何地方都能正常工作，但后来我发现它在 FF 9.0.1 中只有大约 80% 的时间工作。解决方法是这样做：

```
var myFunction = function(){
    $(function(){
        // jQuery code here
        $("#myField").hide();
    })    
};
myFunction(); 
```

现在我有点困惑为什么这是必要的

编辑：我可以看到这有点令人困惑。也许我应该做的是：

```
var myFunction = function(){ 
    // jQuery code here
    $("#myField").hide();       
};

$(function(){
    myFunction();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:20:35.830

问题是您没有正确定义函数然后放置 jQuery 代码，当`JavaScript`解析器读取您的代码时，它将忽略 var 定义并执行`jQuery`您在文档就绪时定义的定义。如果你不知道：

```
 $(function(){})
 // is equivalent to 
 $(document).ready(function(){}). 
```

对您来说最好的选择是创建一个函数，如：

```
 function myFunction(){  

    $("#myField").hide();

 }

 $(function(){

    //after whenever you want it do 
    myFunction();

 }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:13:13.160

像这样：

```
var myFunction;
(myFunction = function(){
  $(function(){
    // jQuery code here
    $("#myField").hide();
  })    
}) (); 
```

# php - Symfony2：无法加载资源“。”

> ID：10949525
> 
> 赞同：1
> 
> 时间：2012-06-08T13:11:27.517
> 
> 标签：php, symfony, twig, assetic

我在 Symfony2 中遇到资产管理问题。我不断收到以下错误：

```
Cannot load resource ".". 
```

我一直在尝试在开发环境的配置和路由文件中修复它，但我真正做的唯一一件事就是将文件中的`use_controller`to更改为。`false``config_dev.yml`

我一直在我的模板中召唤我的资源

```
{% stylesheets '@MyBundle/Resources/public/css/style.css'
                            filter='cssrewrite' %}
        <link rel="stylesheet" href="{{ asset_url }}" type="text/css" />
{% endstylesheets %} 
```

我不断收到异常：

```
Cannot load resource ".". 
```

关于可能出错的任何提示？（我已经多次清除缓存）

提前致谢

编辑 ：

我试过删除：

```
_assetic:
    resource: .
    type:     assetic 
```

从我的 routing_dev.yml 文件中，错误消失了（当然，我页面中的资源）

重新编辑：

完全重新安装后，它似乎又可以工作了。可能是我无意中改变了一些财产……案件结案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-05-20T18:52:08.223

就我而言，它与 相关`LiipImagineBundle`，我的`Proyect/FrontendBundle/Resources/config/routing.yml`文件中有以下几行：

```
_imagine:
    resource: .
    type:     imagine 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-26T08:36:42.763

就我而言，我有一个`routing.yml`从`AppKernel.php`. 删除路由条目后，错误消失了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-08T13:27:37.630

尝试运行以下命令：

```
php app/console assets:install web
php app/console assetic:dump 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-08T13:49:25.493

我记得前段时间遇到过类似的问题，尝试在 /app/config/config_dev.yml 中添加这一行：

```
assetic: 
    use_controller: true 
```

然后清理你的缓存：

```
php app/console cache:clear 
```

然后：

```
php app/console assets:install web 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-13T10:21:56.030

我遇到过同样的问题。在我的 routing.yml 中如下：

```
api:
    resource: "."
    type:     "api"
    prefix: "/api" 
```

删除这些行后，问题得到解决。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-05-28T03:56:58.293

检查您的资产配置，如果您要使用

```
assetic:  
    use_controller: false 
```

然后检查您的路由文件，注释掉这些行

```
_assetic:
    resource: .
    type:     assetic 
```

当不使用资产的自动编译时，不需要该路由条目。

# c# - 如果我使用 EF 4 通过 ID 插入/更新/获取，性能会更差吗？

> ID：10949530
> 
> 赞同：0
> 
> 时间：2012-06-08T13:11:45.883
> 
> 标签：c#, .net, entity-framework-4.1

我想使用 Entity Framework 4，但不使用复杂的 linq 查询，只使用一些非常简单的查询，例如通过 id 获取`xField = value`或插入和更新。

你们认为这种情况下的表现会接近 的表现`SqlCommand`吗？因为真的没有开销。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:22:44.483

确实有开销。:)

不管查询的复杂程度如何，Entity Framework 都必须将查询转换为 SQL（嗯，更简单的查询转换得更快），并将查询结果具体化（将 SQL 命令的结果转换为实体对象），并跟踪您对对象所做的更改。

EF 团队表示，他们正在努力提高性能……最新版本确实运行得更快，但开销仍然存在。

另一方面，这种开销对您的具体任务来说是否重要？

另外，请看这篇文章：[Entity Framework 5.0 Performance Improvements](http://blogs.msdn.com/b/adonet/archive/2012/02/14/sneak-preview-entity-framework-5-0-performance-improvements.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:18:46.067

如果查询是简单的选择并通过 ID 获取，则 EF 将比 SQLCommand 稍差，但最小。额外的开销将不明显。

# php - 如何发布到 Facebook 时间线？

> ID：10949531
> 
> 赞同：1
> 
> 时间：2012-06-08T13:11:47.573
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我有一个使用 Facebook PHP SDK 的应用程序。在用户的 Facebook 墙上发帖曾经是一件简单的事情。我会进行身份验证，然后是：

```
 $ret_obj = $Facebook->api('/me/feed', 'POST',
                            array(
                              'link' => 'www.example.com',
                              'message' => 'Posting with the PHP SDK!'
                         )); 
```

并且在他们的墙上会出现链接。但是，自从引入了 Timeline 以来，这似乎不起作用。我没有收到错误，我只是没有得到任何回报。我找不到任何关于这应该如何工作的有用文档。

## 更多信息

我没有收到任何错误，我只是在 $ret_obj 中返回“NULL”。

如果我做类似的事情

```
$ret_obj = $Facebook->api('/me', 'GET'); 
```

然后它工作正常 - 我得到用户的信息。所以它连接正常，只是没有发布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T15:25:05.333

仔细检查您是否已获得`publish_stream`许可。

您可以参考[PHP SDK 和 JavaScript SDK Feed Dialog](https://stackoverflow.com/questions/10649256/suggest-page-to-friends-using-php-sdk/10869074#10869074)获取更多示例。

官方文档：http: [//developers.facebook.com/docs/reference/dialogs/feed/](http://developers.facebook.com/docs/reference/dialogs/feed/)

# asp.net-mvc-3 - 使用正则表达式 MVC3 进行数据验证

> ID：10949537
> 
> 赞同：0
> 
> 时间：2012-06-08T13:12:04.673
> 
> 标签：asp.net-mvc-3

我正在使用正则表达式过滤器来验证 MVC3 中表单上的日期输入

```
 [RegularExpression(@"[0-3][0-9]\.[01][0-9]\.[0-2][0-9]{3}( [0-2][0-9]:[0-5][0-9](:[0-5][0-9])?)?",ErrorMessage="Incorrect Format")] 
    public DateTime CreationDate { get; set; } 
```

非常非常奇怪`01.01.2012 00:00`的情况： value 不满足 regex ，但是当输入 value 时`01.01.2012 10:00`modelstate 是有效的。我已经使用这个[http://regexpal.com/](http://regexpal.com/)检查了我的正则表达式，并且值很好。

有没有人有任何建议为什么它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T15:42:09.450

哦....我自己发现了问题。我不知道如何，但是在提交表单后，值`01.01.2012 00:00`被转换为`01.01.2012 0:00`，所以它不满足正则表达式。好吧，正则表达式似乎是这样的：

```
[RegularExpression(@"[0-3][0-9]\.[01][0-9]\.[0-2][0-9]{3}( ([0-2])?[0-9]:[0-5][0-9](:[0-5][0-9])?)?",ErrorMessage="Incorrect Format")] 
```

也许它会对某人有所帮助。

# c# - 需要对象引用 + resx 文件？

> ID：10949539
> 
> 赞同：0
> 
> 时间：2012-06-08T13:12:15.490
> 
> 标签：c#, asp.net-mvc, internationalization

我在国际化我的代码时遇到了问题。除了这部分代码外，它在我的网站上几乎所有地方都很好用。

```
[DataType(DataType.Password)]
    [Display(ResourceType = typeof(strings), Name = "BevestigWachtwoord")]
    private CultureInfo resourceCulture;
    [Compare("Password", ErrorMessage = ResourceManager.GetString("PassMismatch",resourceCulture))]
    public string ConfirmPassword { get; set; } 
```

错误（需要对象引用......）在 ResourceManager.GetString("PassMismatch",resourceCulture))] 如果我尝试 ErrorMessage=strings.PassMismatch （其中字符串是我的资源），我会得到同样的错误文件）当我只填写一个字符串时，它确实有效。我有同样的显示问题，但我通过这样做解决了这个问题

```
[Display(ResourceType = typeof(strings), Name = "Email")] 
```

我可以在这里尝试类似的东西吗？

编辑：我的错误

错误 13 非静态字段、方法或属性“MvcApplication2.Models.RegisterModel.resourceCulture”C:\Users\stuart\documents\visual studio 2010\Projects\MvcApplication2\MvcApplication2\Models\AccountModels 需要对象引用。 cs 74 86 MvcApplication2 错误 14 非静态字段、方法或属性需要对象引用 'System.Resources.ResourceManager.GetString(string, System.Globalization.CultureInfo)' C:\Users\stuart\documents\visual studio 2010\Projects\MvcApplication2\MvcApplication2\Models\AccountModels.cs 74 45 MvcApplication2 错误 11 分配给“MvcApplication2.Models.RegisterModel.error”的表达式必须是常量 C:\Users\stuart\documents\visual studio 2010\Projects \MvcApplication2\MvcApplication2\Models\AccountModels。cs 67 30 MvcApplication2 错误 12 属性或索引器“MvcApplication2.strings.PassMismatch”无法在此上下文中使用，因为它缺少获取访问器 C:\Users\stuart\documents\visual studio 2010\Projects\MvcApplication2\MvcApplication2\Models\ AccountModels.cs 67 30 MvcApplication2

对于其他评论，我正在尝试类似 ErrorMessage = resourceCulture ResourceManager.GetString("PassMismatch",Thread.CurrentThread.CurrentUICulture))]

但只是没有工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:26:27.587

即使您尝试为 ResourceManager 传递静态引用并获取 CurrentCulture：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.ComponentModel.DataAnnotations;
using System.Resources;
using System.Globalization;

namespace QMVC.ViewModel.Home
{
  public class TResViewModel
  {
    private static ResourceManager r = QMVC.Properties.Resources.ResourceManager;

    [Required(ErrorMessage = r.GetString("Test", CultureInfo.CurrentUICulture))]
    public string Test { get; set; }
  }
} 
```

您将在编译时遇到错误： *“属性参数必须是属性参数类型的常量表达式、类型表达式或数组创建表达式”*

换句话说：您不能动态地为属性的参数设置值，因为必须在编译时解析属性参数（这是有道理的）。

最好（简单）的方法可能是使用其他参数作为验证属性，ErrorMessageResourceType 和 ErrorMessageResourceName：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.ComponentModel.DataAnnotations;
using System.Resources;
using System.Globalization;

namespace QMVC.ViewModel.Home
{
  public class TResViewModel
  {  
    [Required(ErrorMessageResourceType = typeof(QMVC.Properties.Resources), ErrorMessageResourceName = "Test")]
    public string Test2 { get; set; }

      }
    } 
```

在验证过程中，将使用您的资源类型、给定键和 CurrentCulture 创建 ErrorMessage。

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T14:42:33.203

替换这一行：

```
[Compare("Password", ErrorMessage = ResourceManager.GetString("PassMismatch",resourceCulture))] 
```

有了这条线：

```
[Compare("Password", ErrorMessageResourceType = typeof(strings), ErrorMessageResourceName = "PassMismatch")] 
```

并确保您已将 PassMismatch 字符串添加到映射到您的`strings`资源类型的资源文件中。

# http - ec2 在多个国家/地区无法通过 http 使用域访问，但可以使用公共域访问

> ID：10949543
> 
> 赞同：0
> 
> 时间：2012-06-08T13:12:27.140
> 
> 标签：http, amazon-ec2

我的 ec2 实例可以使用来自世界任何地方的公共 dns 进行访问，另一方面，在不同的县使用域名无法访问它。

知道在哪里看吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:19:38.807

我假设您的意思是不同的“国家”？因此，您的意思是您的公共 DNS 在某些国家/地区有效，而在其他国家/地区无效？我的猜测是您的 DNS 名称甚至可能是公共 IP 在这些国家/地区被阻止。

# c++ - C++ 枚举模板部分特化

> ID：10949545
> 
> 赞同：1
> 
> 时间：2012-06-08T13:12:34.460
> 
> 标签：c++, templates, template-specialization, template-meta-programming, partial-specialization

我有一个非常适合我需要实现的算法的矩阵类。我知道 Eigen，但它不符合我的要求，所以我必须自己做。我一直在使用 Column Major 排序，现在我也有强大的用例来使用 Row Major，所以我想用一个定义排序的额外模板参数来专门化我的模板矩阵类，但我不想打破现有的代码。

这样做的具体效果是使用模板部分特化来生成不同的两个或三个关键类方法，例如`operator(int i, int j)`定义不同的排序，类似的概念可以使用预处理器完成`#define`，但这不是很优雅，只能编译所有在一种或另一种模式下。这是我要完成的工作的草图：

```
enum tmatrix_order {
    COLUMN_MAJOR, ROW_MAJOR
};

/**
* Concrete definition of matrix in major column ordering that delegates most
* operations to LAPACK and BLAS functions. This implementation provides support
* for QR decomposition and fast updates. The following sequence of QR updates
* are supported:
*
* 1) [addcol -> addcol] integrates nicely with the LAPACK compact form.
* 2) [addcol -> delcol] delcols holds additional Q, and most to date R
* 3) [delcol -> delcol] delcols holds additional Q, and most to date R
* 4) [delcol -> addcol] delcols Q must also be applied to the new column
* 5) [addcol -> addrow] addrows holds additional Q, R is updated in original QR
* 6) [delcol -> addrow] addrows holds additional Q, R is updated in original QR
*/
template<typename T, tmatrix_order O = COLUMN_MAJOR>
class tmatrix {
private:
    // basic matrix structure
    T* __restrict m_data;
    int           m_rows, m_cols;     
// ...
};

template <typename T>
inline T& tmatrix<T, COLUMN_MAJOR>::operator()(int i, int j) {
  return m_data[j*m_rows + i];
}

template <typename T>
inline const T& tmatrix<T, COLUMN_MAJOR>::operator()(int i, int j) const {
  return m_data[j*m_rows + i];
}

template <typename T>
inline T& tmatrix<T, ROW_MAJOR>::operator()(int i, int j) {
  return m_data[i*m_cols + j];
}

template <typename T>
inline const T& tmatrix<T, ROW_MAJOR>::operator()(int i, int j) const {
  return m_data[i*m_cols + j];
} 
```

但编译器会抱怨部分专业化：

```
/Users/bravegag/code/fastcode_project/code/src/matrix.h:227:59: error: invalid use of incomplete type 'class tmatrix<T, (tmatrix_order)0u>'
/Users/bravegag/code/fastcode_project/code/src/matrix.h:45:7: error: declaration of 'class tmatrix<T, (tmatrix_order)0u>' 
```

但是，如果我完全专门化这些功能，如下所示，它将起作用，但这非常不灵活：

```
inline double& tmatrix<double, COLUMN_MAJOR>::elem(int i, int j) {
  return m_data[j*m_rows + i];
} 
```

这是语言部分模板专业化支持问题还是我使用了错误的语法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T13:51:56.590

一个可能的解决方案：

```
enum tmatrix_order {
  COLUMN_MAJOR, ROW_MAJOR
};

template<typename T>
class tmatrix_base {
  protected:
    // basic matrix structure
    T* __restrict m_data;
    int           m_rows, m_cols;
};     

template<typename T, tmatrix_order O = COLUMN_MAJOR>
class tmatrix : public tmatrix_base<T>{
  public:
    tmatrix() {this->m_data = new T[5];}
    T& operator()(int i, int j) {
      return this->m_data[j*this->m_rows + i];
    }
    const T& operator()(int i, int j) const {
      return this->m_data[j*this->m_rows + i];
    }
};

template<typename T>
class tmatrix<T, ROW_MAJOR> : public tmatrix_base<T>{
  public:
    tmatrix() {this->m_data = new T[5];}
    T& operator()(int i, int j) {
      return this->m_data[i*this->m_cols + j];
    }
    const T& operator()(int i, int j) const {
      return this->m_data[i*this->m_cols + j];
    }
};

int main()
{
  tmatrix<double, COLUMN_MAJOR> m1;
  m1(0, 0);
  tmatrix<double, ROW_MAJOR> m2;
  m2(0, 0);
} 
```

这个想法是您提供完整的类定义，而不是仅提供专用类中的函数。我认为基本问题是编译器不知道该类的定义是什么。

*注意*：您需要`this->`能够访问模板化的基本成员，否则查找将失败。

*注意*：构造函数就在那里，所以我可以测试主函数而不会炸毁。您将需要自己的（我相信您已经拥有了）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T14:06:52.157

我会保持简单，并这样写：

```
template <typename T, tmatrix_order O>
inline T& tmatrix<T, O>::operator()(int i, int j) {
  if (O == COLUMN_MAJOR) {
    return m_data[j*m_rows + i];
  } else {
    return m_data[i*m_cols + j];
  }
} 
```

虽然语言规范不能保证，但我敢打赌，您的编译器会优化与编译时常量的比较。

# google-maps - 谷歌地图图层效果

> ID：10949546
> 
> 赞同：0
> 
> 时间：2012-06-08T13:12:38.717
> 
> 标签：google-maps, google-maps-styled

我创建了一个 div 并嵌入了谷歌地图代码。

像这样：

![在此处输入图像描述](../Images/eddcef2435d41f6b40447f7a08bb2476.png)

但是，我想在我的谷歌地图上生效。

![在此处输入图像描述](../Images/3a9744edd6a80813ee72fb737859c781.png)

但我不知道 Google Map Api。

有简单的方法或其他解决方案吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T16:57:09.747

您可以自定义地图的样式。在这种情况下，您可能只想将饱和度设置为 -100。

对于静态地图，网址可能是：[http ://maps.googleapis.com/maps/api/staticmap?center=0,0&zoom=2&format=png&sensor=false&size=640x480&maptype=roadmap&style=saturation:-100](http://maps.googleapis.com/maps/api/staticmap?center=0,0&zoom=2&format=png&sensor=false&size=640x480&maptype=roadmap&style=saturation:-100)

对于动态地图，只需创建一个样式并将其传递到您的地图选项中：

```
var styles = [
  {
    stylers: [
      { saturation: -100 }
    ]
  }
]

var mapOptions = {
  zoom: 12,
  center: new google.maps.LatLng(47.5,-122.5),
  styles : styles
}

var map = map = new google.maps.Map(document.getElementById("map_canvas"),
      mapOptions); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:15:40.467

我会检查[Google Maps API](https://developers.google.com/maps/documentation/javascript/styling#style_syntax)。里面都提到了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T17:23:19.947

这是一个链接，您可以在其中设置地图样式：http: [//gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html](http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html)

我刚刚做了这个，它应该看起来非常相似。

```
 var styles = [
  {
    "featureType": "road.arterial",
    "stylers": [
      { "color": "#a0a0a0" },
      { "visibility": "on" }
    ]
  },{
    "featureType": "road.highway",
    "stylers": [
      { "color": "#c9c8c8" }
    ]
  },{
    "featureType": "landscape",
    "elementType": "geometry.fill",
    "stylers": [
      { "color": "#e3e3e3" }
    ]
  },{
    "featureType": "road",
    "elementType": "labels.text.fill",
    "stylers": [
      { "color": "#434443" },
      { "visibility": "on" }
    ]
  },{
    "featureType": "road",
    "elementType": "labels.icon",
    "stylers": [
      { "visibility": "off" }
    ]
  },{
    "featureType": "water",
    "elementType": "geometry.fill",
    "stylers": [
      { "color": "#f7f9fb" }
    ]
  },{
    "featureType": "road",
    "elementType": "labels.text.stroke",
    "stylers": [
      { "color": "#ffffff" }
    ]
  },{
    "featureType": "poi",
    "elementType": "geometry.fill",
    "stylers": [
      { "color": "#d6d5d5" },
      { "visibility": "on" }
    ]
  },{
    "featureType": "poi",
    "elementType": "labels.text.fill",
    "stylers": [
      { "color": "#434443" }
    ]
  },{
  }
];

map.setOptions({styles: styles}); 
```

# asp.net-mvc-3 - jQuery Mobile 如何模拟 data-rel="dialog"

> ID：10949549
> 
> 赞同：0
> 
> 时间：2012-06-08T13:12:47.500
> 
> 标签：asp.net-mvc-3, jquery, jquery-mobile, razor, dialog

有没有办法模拟*data-rel="dialog"*属性以将页面显示为对话框页面？*我不能使用这个，因为我使用 LogIn/LogOut 模型的按钮，如果我不插入data-ajax="false"*属性，这个就不起作用。但是使用它我不能使用基于 ajax 的 data-rel 属性。

所以我需要一个技巧来创建一个对话框页面，而不使用锚链接上的对话框属性。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:22:44.680

希望在 jQM ( 1.2 ) 的下一次迭代中，您可以使用 Popup，您目前可以在预发布版本中对其进行测试：

*   [http://jquerymobile.com/test/docs/pages/popup/index.html](http://jquerymobile.com/test/docs/pages/popup/index.html)

![在此处输入图像描述](../Images/b961800258aeb132b785ea9a7bb63219.png)

或表单登录

![在此处输入图像描述](../Images/05891a27e0571b9fe27574cc8f985fec.png)

# perl - Perl - 重载包/类属性？

> ID：10949553
> 
> 赞同：-6
> 
> 时间：2012-06-08T13:12:54.667
> 
> 标签：perl, oop, overloading, getter-setter

我试图从 PHP 中移植一些基本上归结为[属性重载](http://php.net/manual/en/language.oop5.overloading.php)的代码。也就是说，如果您尝试获取或设置一个实际上未定义为类的一部分的类属性，它将将该信息发送到一个函数，该函数几乎可以用它做任何我想做的事情。（在这种情况下，我想在放弃之前搜索类中的关联数组。）

然而，Perl 与 PHP 有很大的不同，因为类已经是散列了。有什么方法可以将某种等价物应用`__get()`到`__set()`Perl“类”，该类将*完全*封装在该包中，对任何试图实际获取或设置属性的东西都是透明的？

**编辑：**解释这一点的最好方法可能是向您展示代码，显示输出，然后显示我*希望*它输出的内容。

```
package AccessTest;

my $test = new Sammich;   #"improper" style, don't care, not part of the question.

say 'bacon is: ' . $test->{'bacon'};
say 'cheese is: ' . $test->{'cheese'};

for (keys $test->{'moreProperties'}) {
 say "$_ => " . $test->{'moreProperties'}{$_};
}

say 'invalid is: ' . $test->{'invalid'};

say 'Setting invalid.';
$test->{'invalid'} = 'true';
say 'invalid is now: ' . $test->{'invalid'};

for (keys $test->{'moreProperties'}) {
 say "$_ => " . $test->{'moreProperties'}{$_};
}

package Sammich;

sub new
{
 my $className = shift;
 my $this = {
  'bacon' => 'yes',
  'moreProperties' => {
  'cheese' => 'maybe',
  'ham' => 'no'
  }
};

return bless($this, $className);
} 
```

这当前输出：

```
bacon is: yes
Use of uninitialized value in concatenation (.) or string at ./AccessTest.pl line 11.
cheese is: 
cheese => maybe
ham => no
Use of uninitialized value in concatenation (.) or string at ./AccessTest.pl line 17.
invalid is: 
Setting invalid.
invalid is now: true
cheese => maybe
ham => no 
```

现在，我只需要对**Sammich 进行修改，而无需对初始 AccessTest 包进行任何更改**，这将导致：

```
bacon is: yes
cheese is: maybe
cheese => maybe
ham => no
invalid is: 0
Setting invalid.
invalid is now: true
cheese => maybe
ham => no
invalid => true 
```

正如你所看到的，想要的效果是'cheese'属性，因为它不是直接测试对象的一部分，而是从'moreProperties'哈希中获取。'invalid' 会尝试同样的事情，但由于它既不是直接属性也不是在 'moreProperties' 中，它会以任何编程方式运行 - 在这种情况下，我希望它简单地返回值 0，没有任何错误或警告。在尝试*设置*“无效”属性时，它不会直接添加到对象中，因为它还不存在，而是会添加到“更多属性”哈希中。

我希望这比 PHP 中需要的六行多，但由于它是 OOP 的一个非常重要的概念，我完全希望 Perl 能够以某种方式处理它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-10T04:38:42.627

正如我在评论中所说，这个问题很难解决的原因是您没有遵循面向对象编程的黄金法则之一，即封装。你怎么能期望拦截一个不是方法的调用呢？如果您公开的 API 由 getter/setter 组成，那么您可以使用 AUTOLOAD 方法拦截未知方法调用。如果你不这样做，你可以使用@pilcrow 使用绑定哈希的崇高建议（编辑：或@tchrist 英勇使用`overload`pragma）；与您的 API 相比，这仍然是对 Perl 灵活性的一种致敬。

为了更正确地执行此操作（是的，我看到您“要求”不要修改 API，如果您选择忽略这一点，则将此帖子称为给未来读者的消息）。

```
#!/usr/bin/env perl

use v5.10; # say
use strict;
use warnings;

use MooseX::Declare;
use Method::Signatures::Modifiers;

class Sammich {
  has 'bacon' => ( isa => 'Str', is => 'rw', default => 'yes' );
  has 'more' => ( 
    isa => 'HashRef', 
    is => 'rw', 
    default => sub{ {
      cheese => 'maybe',
      ham => 'no',
    } },
  );

  our $AUTOLOAD;
  method AUTOLOAD ($val?) {
    # get unknown method name
    my $attr = (split( /::/, $AUTOLOAD))[-1];

    my $more = $self->more;

    # see if that method name exists in "more"
    if (exists $more->{$attr}) {
      # if so, are there new values? then set
      if (defined $val) {
        $more->{$attr} = $val;
      } 
      # ... and return
      return $more->{$attr};
    }

    # attr does not exist, so set it or initialize it to 0
    $more->{$attr} = defined $val ? $val : 0;
    return $more->{$attr};
  }
}

# I don't care that you don't care
my $test = Sammich->new();

say 'bacon is: ' . $test->bacon;
say 'cheese is: ' . $test->cheese;

for (keys %{ $test->more }) {
 say "$_ => " . $test->more->{$_};
}

say 'invalid is: ' . $test->invalid;

say 'Setting invalid.';
$test->invalid( 'true' );
say 'invalid is now: ' . $test->invalid;

for (keys %{ $test->more }) {
 say "$_ => " . $test->more->{$_};
} 
```

有人可能会说我在这里的措辞很苛刻，也许确实如此。我试图帮助那些将得到帮助的人，因此看到一条粗体消息，例如

> **我只需要对 Sammich 进行修改，而不需要对初始 AccessTest 包进行任何更改**

然后要求 Perl 屈服于你的心血来潮

> 我希望这比 PHP 中需要的六行多，但由于它是 OOP 的一个非常重要的概念，我完全希望 Perl 能够以某种方式处理它。

很烦人。我希望未来的读者会将此视为一个案例，说明为什么封装从长远来看会有所帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-08T13:27:40.047

**更新到更新**

（我收到匿名的反对票，大概是因为教唆你的错误方法。:)）

为了清楚起见，您提出的问题是[“XY 问题”](https://meta.stackexchange.com/q/66377)，特别是错误地将 OO 技术从 PHP 转换为 Perl 的产物。例如，正如在这个问题中提到的*passim*，perl 中的对象属性通常不应该*被*实现为直接访问的 hash(ref) 元素。那是错误的“X”。

从一种语言跳到另一种语言带来的不仅仅是句法上的差异。

**更新**

您可以通过以下方式完成您想要的事情：

```
package UnfortunateHack; {

use Tie::Hash;
our @ISA = qw(Tie::StdHash);

sub FETCH {
  my ($self, $key) = @_;
  return exists $self->{$key}
         ? $self->{$key}
         : $self->{moreProperties}->{$key};
}

}

...

package Sammich;

sub new {
  my $class = shift;

  tie my %this, 'UnfortunateHack';
  %this = ( bacon => 'yes',
            moreProperties => { ... } );

  bless \%this, $class;
} 
```

**原始答案**

如果我理解你的意图——拦截不一定定义的`$obj->property`调用——那么 perl 在 OO 上下文中的[AUTOLOAD](http://perldoc.perl.org/perlobj.html#AUTOLOAD)将做你想做的事。`TheClass::property`

从链接的文档（perlobj）：

> 如果你调用一个类中不存在的方法，Perl 会抛出一个错误。但是，如果该类或其任何父类定义了 AUTOLOAD 方法，则改为调用该 AUTOLOAD 方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-10T15:50:28.420

你**完全**违反了封装。为了向您证明这一点，请注释掉[`bless`](http://p3rl.org/bless)from`&Sammich::new`以便它返回一个普通的哈希引用。

```
package Sammich;

sub new {
  my $className = shift;
  my $this = {
    'bacon' => 'yes',
    'moreProperties' => {
      'cheese' => 'maybe',
      'ham' => 'no'
    }
  };

  # don't even bother blessing it
  # return bless($this, $className);
} 
```

获得所需内容的唯一方法是使用[`magic`](http://perldoc.perl.org/functions/tie.html).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T13:21:50.640

在 Perl 中，类不仅仅是散列，它们是建立在包上的，你可以在那里定义你想要的任何方法，并且它仍然封装在那个包/类中。

[您可以在 Perl 教程中的面向对象编程中](http://p3rl.org/perlootut)查看代码示例。

# java - 提交响应后无法创建会话

> ID：10949556
> 
> 赞同：8
> 
> 时间：2012-06-08T13:13:28.680
> 
> 标签：java, session, jsf, jakarta-ee, managed-bean

我的应用程序启动页面加载时出现以下错误：

```
 SEVERE: Error Rendering View[/HomeTemplate/equityVolume.xhtml]
javax.el.ELException: /HomeTemplate/equityVolume.xhtml @70,78 value="#{equityBean.scripList}": java.lang.IllegalStateException: PWC3999: Cannot create a session after the response has been committed...

    Caused by: java.lang.IllegalStateException: PWC3999: Cannot create a session after the response has been committed... 
```

当我将css应用到我的主页时出现此错误，当我删除css模板时错误消失（但我想应用css模板）以下是导致错误的bean代码片段（通过调试找到）

```
public List<MasterScrip> getScripList() {
   HttpServletRequest req=(HttpServletRequest)FacesContext.getCurrentInstance().getExternalContext().getRequest(); //error line
   HttpSession session=req.getSession();
   type=(String)session.getAttribute("type");... 
```

xhtml代码：

```
<h:body>
    <ui:composition template="commonClientLayout.xhtml">

    <ui:define name="contentFile">
            <div id="content">
    <h:form id="frm">... 
```

当我删除 ui:composition 并定义标签时（即，如果我不应用 css），那么我不会收到此错误。什么可能导致此错误，我该如何解决？

**编辑：**

```
 @PostConstruct
void initialiseSession() {
    if(type!=null)
      {
       if(type.equalsIgnoreCase("losers"))
       {
        scripList=new ArrayList<MasterScrip> ();
        scripList=getScripByPriceLosers(exchange);
       // return scripList;
       }
       else if(type.equalsIgnoreCase("gainers"))
       {
        scripList=new ArrayList<MasterScrip> ();
     scripList=getScripByPriceGainers(exchange);
       // return scripList;
       }
       else
       {
           scripList=new ArrayList<MasterScrip> ();
     scripList=getScripByVolumeType(exchange);
     //  return scripList;
       }
      }
      else
      {
          scripList=new ArrayList<MasterScrip> ();
     scripList=getScripByVolumeType(exchange);
      }

}

    public List<MasterScrip> getScripList() {
       return scripList;

    } 
```

**再次编辑：**

```
 SEVERE: Error Rendering View[/equityVolume.xhtml]
java.lang.IllegalStateException
    at org.apache.catalina.connector.ResponseFacade.setBufferSize(ResponseFacade.java:275)... 
```

***编辑：web.xml***

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Production</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.FACELETS_BUFFER_SIZE</param-name>
        <param-value>65535</param-value>
    </context-param>

    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>

    </session-config>
    <welcome-file-list>
        <welcome-file>equityVolume.xhtml</welcome-file>
    </welcome-file-list>
    <security-constraint>
        <display-name>Constraint1</display-name>
        <web-resource-collection>
            <web-resource-name>AdminTemplate</web-resource-name>
            <description/>
            <url-pattern>/AdminTemplate/*</url-pattern>
        </web-resource-collection>
        <auth-constraint>
            <description/>
            <role-name>admin</role-name>
        </auth-constraint>
    </security-constraint>
    <security-constraint>
        <display-name>Constraint2</display-name>
        <web-resource-collection>
            <web-resource-name>ClientTemplate</web-resource-name>
            <description/>
            <url-pattern>/ClientTemplate/*</url-pattern>
        </web-resource-collection>
        <auth-constraint>
            <description/>
            <role-name>client</role-name>
        </auth-constraint>
    </security-constraint>
    <login-config>
        <auth-method>FORM</auth-method>
        <realm-name>DataRealm</realm-name>
        <form-login-config>
            <form-login-page>/equityVolume.xhtml</form-login-page>
            <form-error-page>/errorpage.xhtml</form-error-page>
        </form-login-config>
    </login-config>
    <security-role>
        <description/>
        <role-name>admin</role-name>
    </security-role>
    <security-role>
        <description/>
        <role-name>client</role-name>
    </security-role>
</web-app> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T15:09:39.773

你不应该在吸气剂中做生意。改为在 bean (post) 构造函数中执行此操作。

`HttpSession`您的具体问题是因为您在尚未为其创建服务器的全新浏览器会话上请求一个相对较大的页面，并且`#{equityBean.scripList}`在页面中相对较晚地引用了 EL 表达式。

响应缓冲区默认为 2KB，当由于响应较大而溢出时，将被提交。这意味着将发送所有响应标头，并且将发送前约 2KB 的 HTML 输出。然后，在那之后，EL 表达式`#{equityBean.scripList}`将在您尝试获取会话的地方得到解析。如果此时服务器`HttpSession`尚未创建，则服务器*需要*在响应标头中设置一个 cookie，以便为后续请求维护它。但是，如果响应已经提交，那当然是不可能的。因此有这个例外。

如前所述，只需在 bean 的（后）构造函数中完成这项工作。或者只是将其作为托管属性注入。

```
@ManagedProperty("#{type}")
private String type; 
```

如果异常仍然发生，您可能正在使用旧版本的 Mojarra，该版本存在问题[2215](http://java.net/jira/browse/JAVASERVERFACES-2215)和[2277](http://java.net/jira/browse/JAVASERVERFACES-2277)中所述的错误，这是由于“不必要的”会话创建的过度延迟*造成的。*自 Mojarra 2.1.8 以来，此问题已得到修复。因此，升级到它或更新版本（目前是 2.1.9）应该可以。

* * *

**与具体问题**无关**`getScripList()`，顺便说一下逻辑很臭。但这是一个不同的问题/问题的主题。您是否知道您可以在 EL 中访问名称为“type”的会话属性`#{type}`？您是否知道`javax.servlet.*`在 JSF 支持 bean 类中具有原始导入通常表明您可能以错误的方式做事，并且可能有更多“JSF-ish”方式来实现具体的功能需求？**

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T13:22:22.120

我不知道这个 web 框架（它是 JSF 吗？），但是这就是发生的事情。您的 XHTML 开始呈现输出，并且一些字符已经发送到浏览器。这意味着整个标头也已发送。

您正在调用的模板中间的某处`#{equityBean.scripList}`（顺便说一句错字），它依次调用：

```
HttpSession session=req.getSession(); 
```

如果不存在，此方法将创建 HTTP 会话。会话 ID 必须与响应（使用 cookie 或 URL 重写）一起发送回客户端，以便在后续请求中识别会话。然而，由于已经发送了响应标头，servlet 容器无法将会话 id 发回 - 并引发异常以避免更大的问题。

你怎么能解决这个问题？当绝对没有与请求关联的会话时，您似乎是第一次呈现页面。您可以避免创建会话：

```
HttpSession session=req.getSession(false);  //false here!
if(session != null) {
  type=(String)session.getAttribute("type");
}
//handle the case when session or type attribute weren't there 
```

另一种方法是在将控件传递给视图之前主动创建会话。但是，您仍然需要`type`检查`null`.**

# php - 在 Drupal 6 的 hook_menu_local_tasks 中引用节点/nid

> ID：10949559
> 
> 赞同：0
> 
> 时间：2012-06-08T13:13:48.077
> 
> 标签：php, drupal

我正在研究保险系统的主题，其中每个产品（例如 MyInsuranceCompany）都保存为一个节点，该产品的所有可用任务都作为 menu_local_tasks。我希望能够添加一个菜单项来显示节点标题。例如，该列表将显示“MyInsuranceCompany，查看，编辑，文档等”。

这听起来很简单，但我不知道该怎么做。我试过使用 arg() 但这似乎返回了一些与 json 完全无关的东西；我尝试在 preprocess_node 中设置一个全局变量，但我认为引导过程不是正确的方法。不确定这是否是我缺少的明显解决方案，但希望你们中的一位可爱的女士和男士可以提供帮助！（如果那不是黄油，我不知道是什么！）

希望我已经很好地解释了自己-谢谢！马特

# objective-c - 在 ObjC 中声明子类失败

> ID：10949562
> 
> 赞同：1
> 
> 时间：2012-06-08T13:13:53.067
> 
> 标签：objective-c

这是我正在尝试做的事情：

我想将一些方法放入单独的 .h 和 .m 文件中，以便更好地了解我的代码。

所以基本上我有`myViewController`我想用这个方法`myReactionOnAnimationDidEnd:` **作为一个类别**来扩展的。

所以我在`"myCustomClasses.h"`下面声明用我想要的方法扩展它：

```
#import "myViewController.h"
@interface myViewController (myReactionOnAnimationDidEnd)
- (void)myReactionOnAnimationDidEnd:(NSNotification *)aNotification;
@end 
```

中的实现`"myCustomClasses.m"`是：

```
#import "myCustomClasses.h"
#import "myViewController.h"

@implementation myViewController (myReactionOnAnimationDidEnd)    
- (void)myReactionOnAnimationDidEnd:(NSNotification *)aNotification {

    self.myLabel1.text = @"Test"; 
}
@end 
```

编译器抛出构建失败错误“找不到'myViewController'的接口声明”

**所以这是我的问题：**

1.  第一个奇怪的事情是，如果我对 UIViewController 而不是 myViewController 执行完全相同的操作，那么一切正常。但是既然 myViewController 是 UIViewController 的子类，为什么它不能也适用于 myViewController（@interface iSnahViewController : UIViewController）？

2.  另一个奇怪的事情是，如果我完全跳过@declaration，“myCustomClasses.m”中的@implementation 工作得很好。现在怎么可能？？

谢谢你们！非常感谢任何帮助！汉斯

* * *

现在，有趣的是，即使我使用 New File -> ObjC - Category Template 创建类别，也会出现同样的构建错误。它基本上创建以下两个文件：

在头文件中：

```
#import "myViewController.h"

@interface myViewController (myCategories)  //<-- "Cannot find interface declaration for 'myViewController'"

@end 
```

并使用 .m 文件

```
#import "myViewController+myCategories.h"

@implementation myViewController (myCategories)

@end 
```

这已经足以从上面提出错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:31:08.407

`myCustomClasses.m`应该可能 include`myCustomClasses.h`和 not `myViewController.h`，所以编译器会看到类别声明。由于`myCustomClasses.h`已经包含`myViewController.h`，编译器应该有所有必要的声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T12:48:57.510

我终于让它工作了！

随着构建错误的发生，我将 Category-.h 文件导入到primery Class的 .h 文件中：

```
#import "myViewController+myCategories.h" //<-- in the  "myViewController.h" 
```

这导致了从上面的构建错误。这似乎是错误的！所以不要那样做。

我仍然不完全理解“myViewController”类是如何在没有导入其 .h 文件的情况下了解其类别的，但由于这似乎是一种工作方式，因此我想与您分享。

谢谢大家帮忙！！

# silverlight - 如何将网格的背景更改为 WP7 silverlight 中的图像？

> ID：10949571
> 
> 赞同：2
> 
> 时间：2012-06-08T13:14:11.087
> 
> 标签：silverlight, windows-phone-7, grid

我正在尝试为 WP7 silverlight 中的网格控件设置背景，我需要以编程方式进行，而不是在设计中。

我试过类似的东西：

```
ContentPanel.Background = new BitmapImage(new Uri("Images\Backgrounds\with box\13.jpg", UriKind.Relative)); 
```

但是，当然，我得到了一个错误，因为在右手我们应该有 type `SolidColorBrush`。

有没有办法做到这一点？

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:23:24.273

我首先建议您使用画布而不是网格。您可以通过删除 Grid 并通过 Toolbox -> Drag and Drop 插入 Canvas 来做到这一点。

然后，您可以像这样简单地使用代码：

```
ImageBrush imageBrush = new ImageBrush();
imageBrush.ImageSource = new BitmapImage(new Uri("url", UriKind.Relative));
CanvasName.Background = imageBrush; 
```

这会将背景更改为您想要的任何内容。

希望有帮助。

# android - Android 应用选项 onkeydown

> ID：10949573
> 
> 赞同：0
> 
> 时间：2012-06-08T13:14:15.343
> 
> 标签：android, keyevent

看到右下角的那个按钮，周围有红色圆圈。对不起尺寸！我想知道该键是否有 KeyEvent 以及如何调用该键。

非常感谢！

![图片](../Images/84f2e2b46fb365cee2df2ce318396871.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:18:57.067

那是软菜单按钮。您可以拦截您的活动的 onKeyPressed。KeyEvent 是 KEYCODE_MENU。

就是说……有些人将银河系的软按钮栏中的这三个点称为“耻辱菜单按钮”。不鼓励使用菜单本身，隐藏在其后面的元素应通过普通 ui 提供。

# java - GAE 上生产应用的 Play 框架

> ID：10949577
> 
> 赞同：1
> 
> 时间：2012-06-08T13:14:18.543
> 
> 标签：java, google-app-engine, playframework

我们正在 java 上创建 Google App Engine 应用程序。我们正在研究 Play！框架 1.2.x (http://www.playframework.org/)，我们正在使用它进行一些测试。我们主要关心的是 Play 的成熟度！框架和 GAE 模块的未来支持（正如我所见，Play! 版本 2 仍然不支持它）。

有没有人在 GAE 上玩过制作项目的经验？如果是这样，将播放！如果你今天开始这个项目，你会选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:54:23.740

我已经将 GAE 用于一个简单的网页，但是由于 GAE 的限制，有很多东西丢失了。因此，当遇到问题时，有时很难知道是 Play（不太可能）还是 GAE（最可能）。老实说，我认为没有足够好的支持。

也就是说，我仍然会使用 Play 进行任何 Web 开发，但会选择 Heroku、CloudBees、OpenShift 或众多支持平台之一。有许多平台也支持 Play 2.0。

至于未来的支持，目前还没有关于 GAE 对 Play2.0 的支持，但是如果创建一个 GAE 模块我会非常惊讶，因为由于 GAE 的限制，无法实现 Play 2.0 相对于 Play 1.x 的好处，所以我不明白这一点。

# actionscript-3 - Actionscript 3.0：仅调用一次事件并自动删除它们

> ID：10949578
> 
> 赞同：0
> 
> 时间：2012-06-08T13:14:19.720
> 
> 标签：actionscript-3, events

```
var Local:LocalConnection=new LocalConnection();
Local.addEventListener(StatusEvent.STATUS,function(event:StatusEvent):void{
 // This stuff should only be running once
}); 
```

可以应用许多侦听器，因此仅应删除此侦听器。所以基本上在这个事件被分派之后，对于同一个 LocalConnection 实例可以有另一个监听器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:36:31.797

根据我的经验，在 Flash 中避免使用匿名函数几乎总是更好：

```
var local:LocalConnection = new LocalConnection();
local.addEventListener(StatusEvent.STATUS, statusHandler);

function statusHandler(event:StatusEvent):void{
    local.removeEventListener(StatusEvent.STATUS, statusHandler);
} 
```

此外，约定是使用小写字母作为变量的开头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T13:25:28.267

您**可以****在该匿名事件处理**程序中删除匿名事件处理程序，因为您始终拥有对当前函数的引用。

```
var Local:LocalConnection=new LocalConnection();
Local.addEventListener(StatusEvent.STATUS,function(event:StatusEvent):void{
    // This stuff should only be running once
    Local.removeEventListener(StatusEvent.STATUS, arguments.callee);
}); 
```

没有其他本地方法可以使事件侦听器仅触发一次，必须删除侦听器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T13:25:46.400

是的你可以：

```
Local.addEventListener(StatusEvent.STATUS,function(event:StatusEvent):void{
  IEventDispatcher(event.currentTarget).removeEventListener(event.type, arguments.callee);
}); 
```

# javascript - 在 setTimeout() 函数中模拟 clearTimeout() 动作

> ID：10949579
> 
> 赞同：0
> 
> 时间：2012-06-08T13:14:23.430
> 
> 标签：javascript, html, function, dhtml, timing

通常 setTimeout() 方法的执行被 setTimeout() 方法之外的 clearTimeout() 方法中止，但在我的情况下，如果某个特定的情况，我需要在循环本身中中止 setTimeout() 循环的执行事件在指定的“等待期”内发生。

在下面显示的代码中，用户有 500 毫秒的时间来激活代码 A。如果他未能在时间范围内激活代码 A，代码 B 将作为后备执行。在 Code AI 中标记了两个地方：1）停止超时的地方和 2）我希望退出功能的地方。

我的[jsFiddle 在这里](http://jsfiddle.net/Wagtail/b6Juh/16/)。

我的 JavaScript 和 HTML 代码的副本如下所示：

***HTML***

```
<table id="headMenu">
    <tr>
        <td id="head1">Item 1</td>
        <td id="head2">Item 2</td>
        <td id="head3">Item 3</td>
    </tr>
</table>
<table id="subMenu">
    <tr>
        <td>Dynamic Content!</td>
    </tr>
</table​​​​​​​​​​​​​​​​​​​​​​​​​​​​&gt;​​​ 
```

***JavaScript***

```
a = 500;
document.getElementById("head1").onmouseover = function(displayMenu) {
    document.getElementById("subMenu").innerHTML = "<tr><td>Item A</td><td>Item B</td><td>Item C</td></tr>";
    document.getElementById("head1").onmouseout = function(getScroll) {
        setTimeout(function() {
            document.getElementById("subMenu").onmouseover = function(breakTimeout) { // **Code A**
                a = 10000;
                // **Stop timeout.**  Now never execute Code B.
                document.getElementById("subMenu").onmouseout = function(endFunction) {
                    document.getElementById("subMenu").innerHTML = '<tr><td>Content is Dynamic!</td></tr>';
                    // **Exit function here immediately**
                }
            }
            if(a==500){
            //**Code B**:  Only execute if **Code A** never executed within time frame
                document.getElementById("subMenu").innerHTML = '<tr><td>Dynamic Content!</td></tr>';
            }
        }, a)
    }
}​ 
```

我希望我的设计概念也很明显。如果我的代码和描述不够清楚，我很乐意澄清进一步的问题。

非常感谢任何可以得到答案的人+1！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:38:50.237

你原来的前提是有缺陷的。传递给的函数体`setTimeout()`直到时间过去后才会执行，因此您想要停止超时的代码不会执行，直到为时已晚。我已经修改了您的代码以使用`clearTimeout()`应该做我认为您想要的标准。

```
var a = 500, head1 = document.getElementById('head1'), subMenu = document.getElementById('subMenu'), timeout;

head1.onmouseover = function(displayMenu) {
    subMenu.innerHTML = '<tr><td>Item A</td><td>Item B</td><td>Item C</td></tr>';
    head1.onmouseout = function(getScroll) {
        subMenu.onmouseover = function(breakTimeout) {
            clearTimeout(timeout);
            subMenu.onmouseout = function(endFunction) {
                subMenu.innerHTML = '<tr><td>Content is Dynamic!</td></tr>';
            };
        };
        timeout = setTimeout(function() {
            document.getElementById("subMenu").innerHTML = '<tr><td>Dynamic Content!</td></tr>';
        }, a);
    };
}; 
```

[**工作演示**](http://jsfiddle.net/wVDzC/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:24:44.367

您可以使用全局变量来存储 setTimeout() 的返回值

```
window.myTimeout = setTimeout(function() {
    // ...
}, a); 
```

然后，您可以从任何上下文中清除超时（只要 window.myTimeout 未修改），如下所示：

```
clearTimeout(window.myTimeout); 
```

注意：“窗口”部分是可选的。这只是我个人用来简化识别全局变量的约定，尤其是在代码复杂/庞大的情况下。

# spring - 为什么 Spring 3.1 在 POST 标头 Content-Type=application/json 时不自动使用 Jackson？

> ID：10949581
> 
> 赞同：0
> 
> 时间：2012-06-08T13:14:28.170
> 
> 标签：spring, jackson

设置请求头“Accept=application/json”时无需配置或注解

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T19:08:02.847

这几乎是自动的。参考

[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-config-enable](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-config-enable)

当 Jackson 在类路径（即 pom.xml）中并且您在上下文配置中使用 mvc:annotation-driven 时，它会自动选择并注册。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:21:18.890

它确实会自动工作-在我的控制器中我使用了不正确的注释-我使用了@RequestParam-它必须是@RequestBody

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-06T11:56:41.243

在我的情况下，我使用 Jackson 的另一个源来修复它，因为 @RequestBody 没有转换为我期望的类型。

我现在使用的是 fastxml，而不是 Codehause Jackson：

```
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-databind</artifactId>
    <version>2.3.3</version>
</dependency> 
```

# c++ - C++ 多态性 - 访问继承变量

> ID：10949583
> 
> 赞同：-1
> 
> 时间：2012-06-08T13:14:33.307
> 
> 标签：c++, polymorphism

playersystem和rocketsystem继承自system，playersystem包含指向rocketsystem的指针。当我尝试访问 Rocketsystem 应该继承的系统中的任何内容时，我遇到了错误。运行时错误是“无法评估表达式”我在 Visual Studio 中设置了一个断点，将鼠标悬停在位置向量上，它说。

编辑：对于后代，这就是我正在做的事情，事实证明它正在工作，我只是出于某种原因将火箭系统指针设置为 null

```
class Vector2D
{
    public:
    float x;
    float y;
    Vector2D(float x_, float y_) :x(x_),y(y_){}
};

class System
{
protected:

    vector<Vector2D> position;

public:

    void addEntity(Vector2D newPos)
    {
        position.push_back(newPos);
    }
};

class projectile :public System
{
public:
    void createRocket(Vector2D pos)
    {
        addEntity(pos);
    }    
};

class player : public System
{
public:
    projectile* rocketSystem;
    void init(projectile* rocketsys){rocketSystem = rocketsys;}
    void fireRocket(Vector2D pos)
    { 
        rocketSystem->createRocket(pos);
    }
};

int main (int argc, char * const argv[]) 
{
    player* PlayerSystem = new player;
    projectile* RocketSystem = new  projectile;

    PlayerSystem->init(RocketSystem);
    PlayerSystem->fireRocket(Vector2D(0,0));
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:32:13.597

我将使用我的精神力量并猜测 System 类没有`createRocket()`成员。由于 playersystem 有 a`System *rocketSystem`而不是 a `rocketsystem *rocketSystem`，因此可以在`rocketSystem`成员上调用的唯一函数是在 System 类中声明的函数。`rocketsystem*`如果您希望能够调用该函数，则必须是 a ，并且必须在`playersystem::fireRocket`定义该函数之前声明 Rocketsystem 类。

# c# - 显示项目符号的自动完成列表

> ID：10949584
> 
> 赞同：1
> 
> 时间：2012-06-08T13:14:37.193
> 
> 标签：c#, asp.net, autocomplete, textbox, ajaxcontroltoolkit

我有`TextBox`一个 Ajax Control Toolkit AutoCompleteExtender，我在格式方面遇到了一些问题。

如果我省略`CompletionListCssClass`, `CompletionListItemCssClass`,`CompletionListHighlightedItemCssClass`值，则显示正常。但我只需要将自动完成文本向左对齐，并且`TextBox`.

如果我在 site.css 中设置这些值：

```
.autocomplete_listItem
{
    background-color: #222;
    color: #cfdbe6;
}

.autocomplete_highlightedListItem
{
    background-color: #999;
    color: #111;
}

.autocomplete_completionListElement
{

} 
```

然后我的子弹就行了。

如何使项目符号不显示，将列表对齐在 下方`TextBox`，列表项左对齐，以及与 匹配的大小`TextBox`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T13:19:12.293

All you need to do to remove the bullets is add `list-style-type:none` to each of your classes:

```
.autocomplete_listItem
{
    background-color: #222;
    color: #cfdbe6;
    list-style-type:none;
}

.autocomplete_highlightedListItem
{
    background-color: #999;
    color: #111;
    list-style-type:none;
}

.autocomplete_completionListElement
{
    list-style-type:none;
} 
```

This is because the autocomplete results are returned as a bulleted list by the AJAX extender - so if you customize the style, you need to make sure and hide those bullets.

In order to tell you how to align it properly with other elements, I would need to see your markup (which is not included in your question).

# java - 在 Google App Engine 上更新 JUST HTML 文件

> ID：10949587
> 
> 赞同：1
> 
> 时间：2012-06-08T13:14:59.653
> 
> 标签：java, html, google-app-engine, ftp

我有一个 Google App Engine 应用程序，作为该应用程序的一部分，我有我的标准 HTML 页面、主页、ContactUs、Testimonials、Pricing ETC ETC，当用户单击“登录”或转到特定 URL 例如 ( `www.diarybooker.com/demo`) 时，它会加载实际应用。

虽然所有这些标准 HTML 文件都是相当静态的文件，其中包含分析和 SEO 等，但是为了更新这些目前我需要每次发布我的应用程序的新版本。

任何人都可以就我如何更新 HTML 而不必发布我的应用程序的新版本提供任何建议（特别是如果我正处于开发周期的中间并且不想分支只是为了更新联系号码或修复 SEO 问题等）

完全有可能我实际上错误地使用了系统，并且我应该更好/不同地重新布线，但是我找不到任何关于如何设置的信息，我什至不知道要搜索什么，所以如果有人至少可以向我指出有关这方面的一些信息的方向，我将非常感激！

举一个替代的例子，我有一个朋友正在跑步`www.wineathome.org.uk`，如果你点击“参加品尝”，它就会进入`http://wineathomeuk.appspot.com`. 显然这不是很干净，也不是让它工作的方法，我可以将应用程序嵌入到 iframe 中，但这真的是要走的路吗？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:46:05.360

您的应用程序代码在源代码控制中，对吗？我建议您创建一个部署目录并将您希望在 AppEngine 上运行的应用程序版本克隆到其中。然后，将要更新的 HTML 文件的版本复制到部署目录中。部署离开。

这是唯一适合你的策略。GAE 部署工具仅将您的应用程序作为一个整体来处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T16:53:29.433

看起来你有几个问题正在发生。

在@AdamCrossland 声明的第一个问题上，您可以使用源代码控制。我使用 git 并为我的应用程序创建不同版本的分支。如果您这样做，您可以将更新后的 HTML 合并回旧分支，然后从该分支更新您的应用程序。这样，您只需更改 HTML 文件并使应用程序处于当前状态。App Engine 部署是智能的，只会上传修改后的文件。从 Eclipse 执行此操作比从 CLI IMO 执行此操作要困难一些，但是 YMMV。

除非提供一些代码，否则朋友点击参加品尝会将 URL 路由到 apppot 的另一个问题有点难以处理。我认为这是因为代码正在重定向到硬编码的 URL。我有几个应用程序映射到一个域，并且它们都没有路由到appspot，除非我强制它以使用仅适用于appspot.com的HTTPS之类的功能。我个人尽量避免使用 iframe，它为漏洞利用开辟了道路。

# mysql - 如何以人类可读的方式优化显示持续时间？

> ID：10949589
> 
> 赞同：0
> 
> 时间：2012-06-08T13:15:04.857
> 
> 标签：mysql, perl

我想为我的项目实现一个功能。它与 Stack Overflow 上的一个功能非常相似，用户可以在其中发布请求并获得响应。在 Stack Overflow 上，我们看到标记为 4 秒前、22 秒前、1 分钟前、5 分钟前等的帖子。我想实现相同的功能。

我将请求发布的时间存储在 MySQL 的时间戳变量中，然后减去`NOW() - stored_time`以获取秒数。然后写一些逻辑，比如

*   如果小于 60 秒，则显示 60 秒前
*   如果差异在 60 到 3600 之间，则以分钟为单位显示

等等。这个长逻辑是用 Perl 编写的。我想避免这种情况。有什么好方法可以实现同样的目标吗？我愿意更改 MySQL 表和数据类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:17:17.173

将经过的秒数发送到客户端并将其转换为 JavaScript 中的人类可读文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T13:44:00.847

[将日期戳作为DateTime](http://p3rl.org/DateTime)对象检索。您没有显示数据库的任何详细信息，因此我必须在回答中跳过该步骤。

```
use DateTime qw();
use DateTime::Format::Human::Duration qw();

for my $seconds (555, 5555, 555555, 5555555) {
    my $now = DateTime->now;
    my $before = $now->clone->subtract(seconds => $seconds);
    my $formatted = DateTime::Format::Human::Duration
        ->new->format_duration($before - $now);
    $formatted =~ s/(?:,| and).*//;
    print "about $formatted ago\n";
}

# about 9 minutes ago
# about 1 hour ago
# about 6 days ago
# about 2 months ago 
```

# asp.net - 设置从旧的经典 ASP 页面到新的 ASP.NET webforms 页面的 301 重定向

> ID：10949592
> 
> 赞同：15
> 
> 时间：2012-06-08T13:15:15.063
> 
> 标签：asp.net, redirect, asp-classic, http-status-code-301

我已经完成了使用 ASP.NET Webforms 的网站开发并完成它，我正在设置一些 301 重定向以确保正确重定向旧网站的链接。

但是，旧网站是用经典的 ASP 编写的。设置从旧 .asp 页面重定向到新 .aspx 页面的最佳方法是什么？（注意：我无法控制托管网站的服务器，因此我无法在 IIS 中执行任何操作）

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-08T13:30:02.963

只需在任何输出之前将其放在页面顶部：

```
<%@ Language=VBScript %>
<%
Response.Status="301 Moved Permanently"
Response.AddHeader "Location","http://www.example.com/new-url"
%> 
```

不要`response.redirects`在此代码下方放置任何内容。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-08T13:29:37.223

简单地在你的 asp 页面的开头添加 move 命令：

```
<%
   Response.Status="301 Moved Permanently"
   Response.AddHeader "Location","http://www.example.com/newpage.aspx"
   Response.End
%> 
```

这就是想法，现在如果您有一对一的重命名，并且只有 aspx 更改，您可以制作一个简单的 asp 脚本来读取货币页面并制作最终的重定向字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-06T06:25:32.233

如果有人想要，作为一个潜艇

```
sub RedirectPermanently(url)
    Response.Status="301 Moved Permanently"
    Response.AddHeader "Location",url
    Response.End
end sub 
```

# jsf - Primefaces SelectOneButton : Change individual button styles

> ID：10949593
> 
> 赞同：5
> 
> 时间：2012-06-08T13:15:17.490
> 
> 标签：jsf, jsf-2, primefaces

I am using primefaces selectOneButton. I want to make some buttons in that selectOneButton differently styled from others depending upon some backing bean value. Forexample text of 3 buttons in selectOneButton needs to be bold and that of remaining needs to be normal.

Is it possible?

Primefaces 3.2

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T20:37:39.597

This is how i made it:

Add a styleClass to the selectOneButton:

```
<p:selectOneButton styleClass="yourStyleClass" value="#{yourBean.yourValue}" > ... 
```

And then in the stylesheet you can get ahold of the rendered buttons like following (I added an icon to each of the buttons - do whatever you like):

```
.yourStyleClass div:first-child span {
    background-image: url('logo.png') !important;
    background-position: left center;
    background-repeat: no-repeat;
    margin-left: 6px;
    padding-left: 23px;
}

.yourStyleClass div:nth-child(2) span {
    background-image: url('picture.png') !important;
    background-position: left center;
    background-repeat: no-repeat;
    margin-left: 6px;
    padding-left: 23px;
}

.yourStyleClass div:nth-child(3) span {
    background-image: url('video.png') !important;
    background-position: left center;
    background-repeat: no-repeat;
    margin-left: 6px;
    padding-left: 23px;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T13:19:10.313

There is no "standard" way to do this. The common workaround is to have multiple elements - `SelectItem` in your case - that are styled differently - and use an expression with the `rendered` attribute to determine which ones are visible. This works for any component library, not only primefaces.

EDIT : have tried it right now - looks like I cannot influence the styling of the selectitems at all - at least not declaratively in the page. One could try tweaking the theme or overriding the primefaces selectors with custom styling using `!important` rule. But you would still not get distinct styling for the selectitems.

So please excuse my former confidence and regard this answer as a "No, you can't".

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T03:32:00.530

Ok, I haven't tested this but I'm pretty sure you can do it with the Primefaces Request Context. See this link: [RequestContext](http://www.primefaces.org/showcase/ui/requestContext.jsf)

This will let you execute client side JavaScript from your backing bean.

So, determine which buttons need to change in your backing bean and then call a JS function that uses jquery's addClass function to add a CSS class to the buttons that need to be styled.

It seems simple enough in my head but I don't have time to test it right now.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-17T02:37:38.467

You can try it with Jquery!!

```
<p:selectOneButton value="#{selectOneView.productViewOption}" styleClass="product-view">
    <f:selectItem itemLabel="" itemValue="Xbox One" />
    <f:selectItem itemLabel="" itemValue="PS4" />
    <f:selectItem itemLabel="" itemValue="Wii U" />
</p:selectOneButton>
<script type="text/javascript">
    $('.product-view div:nth-child(1) span').addClass('fa fa-list fa-2x');
    $('.product-view div:nth-child(2) span').addClass('fa fa-star fa-2x');
    $('.product-view div:nth-child(3) span').addClass('fa fa-th fa-2x');
</script> 
```

# sql - Partition BY.... ORDER BY 不止一列？

> ID：10949595
> 
> 赞同：0
> 
> 时间：2012-06-08T13:15:20.720
> 
> 标签：sql, sql-server, sql-server-2008

使用 PARTITION BY 时，在 ORDER BY 子句中是否可以基于多个列进行排序，就像普通的 ORDER BY 语句一样？

```
SELECT * , ROW_NUMBER() OVER (PARTITION BY Col0 ORDER BY Col1, Col2) 
```

当我 ORDER BY 多于一列时，我似乎遇到了错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:19:34.507

当然可以，您的查询没有问题，我敢打赌，如果您说*似乎出现错误*，是因为您实际上正在运行查询而没有实际错误，但获得的值与您预期的不同。这些不是错误。如果您希望我们帮助您获得所需的值，那么您需要更改您的问题以反映这一点。

# c# - 结合 WCF、NHibernate 和 Ninject

> ID：10949596
> 
> 赞同：2
> 
> 时间：2012-06-08T13:15:21.897
> 
> 标签：c#, .net, wcf, nhibernate, ninject

我正在编写 WCF 服务（托管在 IIS 中）。我从 Nuget 下载了 Ninject（3.0.0.0，带有 WCF 扩展）和 NHibernate。我已经在 MVC 上下文中一起使用了这些，但还没有在 WCF 中使用。我希望每次调用该服务都有一个新会话。但我真的找不到关于如何完成它的好教程。

现在，我只是把它放在“NinjectWebCommon.cs”文件中（就像我在 MVC 项目中所做的那样）

```
private static void RegisterServices(IKernel kernel)
{
    var helper = new NHibernateHelper(WebConfigurationManager.ConnectionStrings["xx"].ConnectionString, Assembly.GetAssembly(typeof(Template)));
    kernel.Bind<ISessionFactory>().ToConstant(helper.SessionFactory).InSingletonScope();
    kernel.Bind<IDbSessionFactory>().To<DbSessionFactory>().InSingletonScope();
    kernel.Bind<IDbSession>().To<DbSession>().InRequestScope();

    //Repository
    //Bind the repository stuff here
} 
```

但这并没有像我期望的那样真正起作用。有人可以告诉我我在这里做错了什么吗？

**编辑**

更多细节。我可以看到，当我的服务启动时，它会启动一个 NHibernate 会话对象。但它实际上在处置上失败了。当它试图关闭我的会话时，我得到一个 NullReferenceException。我正在使用 Nuget 的所有最新版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:50:54.610

您必须`Global`从`NinjectWcfApplication`.

```
public class Global : NinjectWcfApplication
{
    #region Overrides of NinjectWcfApplication

    /// <summary>
    /// Creates the kernel that will manage your application.
    /// </summary>
    /// <returns>The created kernel.</returns>
    protected override IKernel CreateKernel()
    {
        IKernel kernel = new StandardKernel( new ServiceModule() );
        return kernel;
    }

    #endregion
} 
```

[https://github.com/ninject/ninject.extensions.wcf/tree/Maintenance_2.2/src/Examples](https://github.com/ninject/ninject.extensions.wcf/tree/Maintenance_2.2/src/Examples)

# php - 将查询插入多对多关系数据库

> ID：10949598
> 
> 赞同：1
> 
> 时间：2012-06-08T13:15:24.037
> 
> 标签：php, mysql, html, many-to-many

以前我问过如何在多对多关系数据库上运行 fetch 查询，因为我正在学习 SQL + PHP，我遇到了以下相当复杂的情况：

我有一个包含以下表格的数据库：

```
Songs       Link        Tags
=======     =====       =========
Sid          Sid        Tid
Songname     Tid        Tagname 
```

如何创建（在 PHP 中使用 HTML 表单）一组检查以下内容的查询：

输入带有一些标签的新歌曲。您将歌曲添加到歌曲表（相当简单）并且 Sid 自动递增。
标签也需要存储，但不能加倍。您如何创建一种方法来检查输入的标签是否不在标签表中？如果不添加它们并且如果它们已经存在则跳过它们。
最重要的是，链接表还必须（自动且正确地）填充信息。新的 Sid 必须与标签表中的新添加/旧标签链接。

我什至不知道这一系列复杂的查询是否可行，但是手动执行此操作会迅速失控，因此我认为自动化的方式是要走的路。

到目前为止，我已经得到了以下代码部分来测试（代码显然在这一点上没有做太多，因为它只是为了说明我在做什么）：

```
<?php

if(isset($_POST['song']) && isset($_POST['tags'])){
$song = $_POST['song'];
$temptag = $_POST['tags'];

$tags = explode(",", $temptag);

$connection = mysql_connect("servername","db","password");
if (!$connection)
  {
  die('Could not connect: ' . mysql_error());
  }

  $query = "INSERT INTO Songs VALUES ('','$song')"; #add song
  mysql_query($query);

  # now for the tags...
  mysql_close($connection);
  echo "Song added";
}
else{
?>

<form action="add.php" method="post">
<input type="text" name="song" /> <br/>
<input type="text" name="tags" value="tag1,tag2,tag3" /> <br/>
<input type="submit" value="add song" />
</form>
<?php
}
?> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:24:33.277

插入歌曲后添加

```
$song_id = mysql_insert_id();
$tags = explode("," , $_POST['tags']);
foreach($tags as $tag) {
    // check if the tag already exists
    $res = mysql_query("SELECT * FROM `Tags` WHERE `Tagname` = '".$tag."' LIMIT 1");
    if(mysql_num_rows($res) == 0) {
        // if it doesn't exist, we add it
        mysql_query("INSERT INTO `Tags` VALUES ('' '".$tag."')");
        // get the last id inserted
        $tag_id = mysql_insert_id();
    } else {
         // if found, get it's id
         $tag = mysql_fetch_assoc($res);
         $tag_id = $tag[0]['id'];
    }
    // linkage
    mysql_query("INSERT INTO `Link` VALUES ('".$song_id."', '".$tag_id."')");
} 
```

# django - Django在保存图像之前获取ImageField路径

> ID：10949601
> 
> 赞同：1
> 
> 时间：2012-06-08T13:15:36.830
> 
> 标签：django, django-models

我正在尝试使用 chunks 方法保存图像来处理用户尝试上传大图像的情况：

```
destination = open(incident.Image.path, 'wb+')
for chunk in request.FILES['image'].chunks():
    destination.write(chunk)
destination.close() 
```

我的问题是如果不先在 Image 字段中保存一些内容，我就无法获取文件路径，如下所示：

```
fileName = str(int(time.time() * 1000))
imageName = fileName + '.jpg'
incident.Image.save(imageName, request.FILES['image']) 
```

我的问题是如何在不先保存图像的情况下获得与 event.Image.path 等效的内容？我不想对路径进行硬编码，而我被卡住的原因是因为如果不获取 ImageField 声明的 upload_to 部分，我就无法获得完整的文件路径

**编辑：**

好的，我已经走得更远了，但我又被卡住了：

```
imgBuffer = StringIO.StringIO()
for chunk in request.FILES['image'].chunks():
    imgBuffer.write(chunk)

# rotate it
rotate = request.POST['rotation']
im = Image.open(imgBuffer)
im = im.rotate(float(rotate))

incident.Image.save(imageName, ContentFile(imgBuffer)) 
```

我收到 IOError 无法识别在 im = Image.open(imgBuffer) 处抛出的图像文件，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T16:33:14.763

图像（作为文件）保存在模型字段的**pre_save**方法中。这是此类自定义模型字段的工作示例（从我的项目中获得） - *FixedImageField*。

您可能会看到我如何在函数**pre_save**中检索图像路径。

就我而言，我有一个复杂的方案（我必须继承图像字段），但您可以根据您的情况对其进行简化。

您可以实现自己的 _save_fixed_resolution_image(chunks,path) - 在我的情况下，它将图像转换为最大 400x400 大小的图像：

```
from PIL import Image
import StringIO
from yourproject.settings import MEDIA_ROOT
import os
from django.db import models

class ChunksImageField( models.ImageField ):    
    def pre_save( self, model_instance, add ):
        file = super( models.FileField, self ).pre_save(model_instance, add)
        if file and not file._committed:
            if callable( self.upload_to ):
                path = self.upload_to( model_instance, "" )
            else:
                path = self.upload_to
            file.name = path
            full_path = os.path.join( MEDIA_ROOT, path )
            chunks = _get_chunks( file.chunks() )
            self._save_image_func( model_instance, chunks, full_path )

        return file

class FixedImageField( ChunksImageField ):
    def __init__( self, *args, **kwargs ):
        super( FixedImageField, self ).__init__( *args, **kwargs )

    def _save_image_func( self, model_instance, chunks, path ):
        _save_fixed_resolution_image( chunks, path )

def _save_fixed_resolution_image( chunks, out_file_path ):
    image = _get_image( chunks )

    if image.size[ 0 ] > _image_max_size or image.size[ 1 ] > _image_max_size:
        image.thumbnail( ( _image_max_size, _image_max_size, ) )

    save_image( image, out_file_path )

def save_image( image, out_file_path ):
    image.save( out_file_path, "JPEG", quality = 100 )

def _get_chunks( chunks ):
    chunks_ = ""
    for chunk in chunks:
        chunks_ += chunk
    return chunks_ 
```

如何在您的模型中使用它：

```
class YourModel( models.Model ):
    image = FixedImageField( upload_to = image_path ) # substitute your image path here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T14:39:44.087

看看 stringIO 也看看[这个网站](http://davedash.com/2009/02/21/resizing-image-on-upload-in-django/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-23T16:51:10.053

我解决了主要问题如下：

```
myimage = MyImageModel()
upload_to = myimage.myimagefield.field.upload_to
filepath = os.path.join(settings.MEDIA_ROOT, upload_to) 
```

没有上传两次的次要问题我做了如下：

```
filename = os.path.basename(url)
myimage.myimagefield = os.path.join(upload_to, filename)
myimage.save() 
```

# iphone - 下载后打开文件而不是使用 webview

> ID：10949608
> 
> 赞同：1
> 
> 时间：2012-06-08T13:15:46.977
> 
> 标签：iphone, preview, qlpreviewcontroller

是否可以在不使用 UIwebview 的情况下以低于 4.0 的 iPhone 版本打开 word、excel、PDF、图像文件？我已经尝试在 web-view 中加载，在这里我想知道是否有任何替代解决方案可以预览而不是 web-view。我正在从服务器下载文件。要预览它，我会得到一个支持所有 iPhone 版本的适当解决方案。从 iPhone 4.0 开始，我猜想 qlframework 可以使用低于那个版本的版本。有人可以给我线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:51:49.277

查看 UIDocumentInteractionController 和 Quick Look Framework，看看它是否可以用于您的目的。

# c# - XNA 没有添加到我的 Visual C# Express

> ID：10949612
> 
> 赞同：2
> 
> 时间：2012-06-08T13:16:05.110
> 
> 标签：c#, c#-4.0, xna, visual-studio-express, visual-c#-express-2010

我安装了 VC# express，然后从[这里](http://www.microsoft.com/en-us/download/details.aspx?id=23714)下载了 XNA Game Studio 4并安装了它。但是我在我的 VC# 中找不到任何 XNA 模板。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:29:22.757

如果我没记错的话，安装 XNA 将在开始菜单中的 Visual C# Express 组或 XNA Game Studio 组下创建一个名为“XNA Game Studio”的新快捷方式。用那个。

如果不是这种情况，则项目模板应显示在 VC# 中的 New -> Project -> Visual C# -> XNA Game Studio 4.0 下。

如果那也不存在，那么您的安装一定会以某种方式搞砸。卸载 XNA，卸载 VC#Express，重新安装 VC#Express，重新安装 XNA。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T22:02:18.783

您需要使用 Visual Studio 插件库安装模板。 [这](http://blogs.msdn.com/b/astebner/archive/2010/10/05/10072040.aspx)是一个带有屏幕截图并解释详细信息的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T13:29:47.847

它应该会出现。我的显示在 Visual C# -> XNA Game Studio 4.0 下的新项目列表中。

我在这台机器上使用 VS Pro，但我在另一台装有 VS Express 的机器上安装了 XNA。

我的建议是卸载 XNA 和 VS，然后从头开始重新安装。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-08T13:24:33.297

XNA 不使用它自己的 IDE 吗？而且我不确定 VC# Express 是否支持 XNA。

# java - 内存是否分配给 switch 块中的所有字符串？

> ID：10949618
> 
> 赞同：2
> 
> 时间：2012-06-08T13:16:43.643
> 
> 标签：java, memory-management, java-native-interface, switch-statement

```
case k_A:
  jstring a  = "....";
  break;
case k_B:
  jstring b = "....";
  break;
case k_C:
  jstring c = ".....";
  break;
case k_D:
  jstring d = ".....";
  break;
default:
  jstring dflt = "....."; 
```

在我的案例中实际上有 200 个案例*陈述*。虽然一次只有一个 case 语句起作用，但内存是否分配给了 switch 块中的所有 201 语句？如果是，是否推荐这种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T21:07:19.787

字符串文字都是静态存在的。你认为它们是从哪里神奇地出现的？在这种情况下，它是 C，因此它们都存在于您的数据段中。

如果您的案例值是相邻的，您可能应该使用查找数组而不是 switch 语句

但是，您的代码还有其他问题。C 文字不是 jstrings。您需要调用 NewStringUTF()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:22:22.200

每次 JVM 启动都会为所有字符串文字分配**一次内存。**

原因是由于[String interning](http://en.wikipedia.org/wiki/String_interning)：字符串文字作为特殊常量被有效地编译到字节码中，并且在类加载时为所有它们分配内存，并且永远不会再分配内存。

尽管代码似乎会在每次调用该方法时分配内存，但实际上并非如此 - JVM 会回收这些 String 对象，这样做是安全的，因为 String 是[不可变](http://en.wikipedia.org/wiki/Immutable_object)的。

这就是这段代码有效的原因：

```
String a = "foo";
String b = "foo";
boolean same = (a == b); // true - they are the SAME object! 
```

不要担心内存使用 - 保持代码不变。

# php - 用php递归scandir

> ID：10949628
> 
> 赞同：0
> 
> 时间：2012-06-08T13:17:25.487
> 
> 标签：php, arrays, multidimensional-array, scandir

我有一个具体的问题。我是 php 的新手，所以对我来说还是有点难:)

所以，我有一个函数应该递归地扫描目录并从结果中打印一个特定的数组。我几乎明白它为什么会发生，但我不知道如何像我需要的那样改变它。请帮忙！

目前我得到一个数组：

```
Array
(
    [0] => Array
        (
            [album1] => Array
                (
                    [0] => .
                    [1] => ..
                )
        )
    [1] => Array
        (
            [album2] => Array
                (
                    [0] => .
                    [1] => ..
                )
        )
    [2] => Array
        (
            [album3] => Array
                (
                    [0] => .
                    [1] => ..
                )
        )
) 
```

但我需要得到：

```
Array
    (
     [album1] => Array (
                        [0] => .
                        [1] => ..
                    )
     [album2] => Array
                    (
                        [0] => .
                        [1] => ..
                    )
     [album3] => Array
                    (
                        [0] => .
                        [1] => ..
                    )
    ) 
```

函数本身是：

```
 <?php

    function RAgetFiles($main_dir, $result = array()) {

        $dirs = scandir($main_dir); 
            foreach($dirs as $dir)  {
                if (is_dir("$main_dir/$dir")){

                    if ($dir === '.' || $dir === '..') { 
                        continue; }
                    $files=scandir($main_dir."/".$dir);
                    $result[] = array($dir => $files);
                }
        }
        return $result;
    }

    $rafiles = RAgetFiles('thumbs');
    echo '<pre>';
    print_r($rafiles);
    echo '<pre>';
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:39:47.820

```
<?php
    function RAgetFiles($main_dir, $result = array()) {
        $dirs = scandir($main_dir); 
            foreach($dirs as $dir)  {
                if (is_dir("$main_dir/$dir")){
                    if ($dir === '.' || $dir === '..') { 
                        continue; }
                    $files=scandir($main_dir."/".$dir);
                    $result[$dir] = $files;
                }
        }
        return $result;
    }
$rafiles = RAgetFiles('/usr');
    echo '<pre>';
    print_r($rafiles);
    echo '</pre>';
?> 
```

完美运行。

# php - 是否可以在 PDO 中的多个准备好的语句中使用相同的变量和检查？

> ID：10949629
> 
> 赞同：2
> 
> 时间：2012-06-08T13:17:28.003
> 
> 标签：php, mysql, pdo, prepared-statement

我仍在尝试将 mysql_* 东西转换为 PDO 和准备好的语句。在整个网络上做到这一点真的很辛苦，但我并没有放弃，我遇到了一些问题。

我的问题是关于`mysql_query()`一个函数中的多个命令。所以当我在代码中有这样的东西时：

```
if (something)
{
   mysql_query("UPDATE account SET pass=$pass WHERE id=$id");
   mysql_query("UPDATE account_2 SET lock=$lock WHERE id=$id");
   mysql_query("UPDATE account_3 SET surname=$surname WHERE id=$id");                      
} 
```

并希望将其传送给 PDO 一个准备好的语句。我已经知道我必须做这样的事情：

```
if (something)
{
    $stmt = $db->prepare("UPDATE account SET pass=:pass WHERE id=:id");
    $stmt->bindValue(':pass', $pass, PDO::PARAM_STR);
    $stmt->bindValue(':id', $id, PDO::PARAM_INT);
    $stmt->execute();                      
} 
```

我实际上有两个问题：是否可以将密码绑定为字符串 (PDO::PARAM_STR)？当我添加其他语句时，因为它有更多查询，我应该将它们命名为不同的名称，如 $stmt2 还是在执行时我只能像这样一直 $stmt ？

```
if (something)
{
    $stmt = $db->prepare("UPDATE account SET pass=:pass WHERE id=:id");
    $stmt->bindValue(':pass', $pass, PDO::PARAM_STR);
    $stmt->bindValue(':id', $id, PDO::PARAM_INT);
    $stmt->execute();

    $stmt = $db->prepare("UPDATE account_2 SET lock=:lock WHERE id=:id");
    $stmt->bindValue(':lock', $lock, PDO::PARAM_INT);
    $stmt->bindValue(':id', $id, PDO::PARAM_INT);
    $stmt->execute();                      
} 
```

还是我应该这样做？

```
if (something)
{
    $stmt = $db->prepare("UPDATE account SET pass=:pass WHERE id=:id");
    $stmt->bindValue(':pass', $pass, PDO::PARAM_STR);
    $stmt->bindValue(':id', $id, PDO::PARAM_INT);
    $stmt->execute();

    $stmt2 = $db->prepare("UPDATE account_2 SET lock=:lock WHERE id=:id");
    $stmt2->bindValue(':lock', $lock, PDO::PARAM_INT);
    $stmt2->bindValue(':id', $id, PDO::PARAM_INT);
    $stmt2->execute();                      
} 
```

最后还有一个。当我有这样的代码功能/检查时：

```
if (mysql_query("INSERT INTO account (id, pass, email, request_time, status) VALUES ('".$id."', '".$pass."', '".$mail."', '".time()."', '".$status."')"))
{
    blabla
} 
```

如果插入命令首先需要在 PDO 中存在，如何在 stmt 和 PDO 中使用吸盘检查？

最后一个问题......当我已经在 PDO 的准备好的语句中绑定值时，我以后在代码中是否还需要使用 is_numeric() 函数？

所以总结：

1) 可以将密码绑定为字符串 (PDO::PARAM_STR) 吗？

2) 当我添加语句时，因为它有更多查询，我应该将它们命名为不同的名称，如 $stmt、$stmt2、$stmt3 还是每个语句都相同？

3）当我已经在 PDO 中的准备好的语句中绑定值时，我以后在代码中是否仍然需要使用 is_numeric() 函数（可能是为了对变量作弊）？

谢谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:22:21.240

1.  是的

2.  您可以为它们命名，`$stmt`因为您不需要其他名称（一旦执行就完成了，因此您可以根据需要覆盖）。但我不明白的是，你为什么不把它全部放在 1 个语句中而不是 3 个不同的语句中？

3.  真的不明白你的意思吗？如果您需要知道它是否是数字，您将需要 is_numeric() 是的。

您可以检查它是否成功执行，`$stmt->execute();`因为如果成功则返回 true。

所以你会做

```
$passed = $stmt->execute();

if($passed)
{
    //fetch
} 
```

这是一个简单的例子：

```
$stmt = $db->prepare("UPDATE `account`
                         SET account.pass = ?
                       WHERE account.id = ?
                       LIMIT 1");

$stmt->bindParam(1, $pass, PDO::PARAM_STR);
$stmt->bindParam(2, $id, PDO::PARAM_INT);
$stmt->setFetchMode(PDO::FETCH_ASSOC);

if($stmt->execute())
{
    $stmt->fetch(); //fetch your data
}
else
{
    //error
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T13:27:09.323

为什么不像这样在 1 个查询中执行此操作：

```
<?php
if (something){
    $stmt = $db->prepare("UPDATE account SET pass=:pass, lock=:lock, surname=:surname WHERE id=:id");

    $stmt->bindValue(':pass', $pass, PDO::PARAM_STR);
    $stmt->bindValue(':lock', $lock, PDO::PARAM_INT);
    $stmt->bindValue(':surname', $surname, PDO::PARAM_STR);
    $stmt->bindValue(':id', $id, PDO::PARAM_INT);
    $stmt->execute();

}
?> 
```

您也可以创建一个处理所有更新的函数，然后您只需要传递一个值数组，并且该函数可在整个脚本中重用，为什么当您可以调用单个函数时为每个更新查询重复代码。

```
<?php
/**
 * Update multiple rows
 *
 * @param string $table
 * @param array $values
 * @param sring $pk
 * @param int $id
 */
function Update($table, $values){
    //connect ect here

    $fieldnames = array_keys($values[0]);
    $fields = '';
    foreach($fieldnames as $keys){
        //continue as id, id is used in the WHERE clause
        if($keys=='id'){continue;}

        $fields .= $keys.'=:'.$keys.', ';
    }
    $fields = trim($fields,', ');

    /*** put the query together ***/
    $sql = "UPDATE {$table} SET {$fields} WHERE id=:id";

    /*** prepare and execute $db being your PDO connection object ***/
    $statement = $db->prepare($sql);

    foreach($values as $vals){
        $statement->execute($vals);
    }
}

$updates = array(array('id'=>1,'pass'=>'password1','lock'=>1,'surname'=>'Foo'),
                 array('id'=>2,'pass'=>'password2','lock'=>2,'surname'=>'Bar'),
                 array('id'=>3,'pass'=>'password3','lock'=>3,'surname'=>'Cherone'));

Update('account', $updates);
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T13:34:19.060

```
if(something){
    $stmt = $db->prepare("UPDATE account SET pass=:pass WHERE id=:id");
    try{
        $flag = $stmt->execute(array(":pass"=>$pass,":id"=>$id));
    }catch(PDOException $e){
        do something;
    }

    if(!(bool)$flag){
        $errorInfo = $stmt->errorInfo();
        do something;
    }

    $stmt2 = $db->prepare("UPDATE account_2 SET lock=:lock WHERE id=:id");
    try{
        $flag2 = $stmt->execute(array(":lock"=>$lock,":id"=>$id));
    }catch(PDOException $e){
        do something;
    }

    if(!(bool)$flag2){
        $errorInfo = $stmt2->errorInfo();
        do something;
    }
}

$query0 = "INSERT INTO account (id, pass, email, request_time, status) VALUES (:id,:pass,:mail,:time,:status)";
$pQuery0 = $db->prepare($query)

try{
    $flag0 = $stmt->execute(array(":pass"=>$pass,":id"=>$id,":mail"=>$mail,":time"=>$time,":status"=>$status));
}catch(PDOException $e){
    do something;
}   

if((bool)$flag2){
    do something
} 
```

# asp.net-mvc-3 - 验证无法正常工作 mvc 3

> ID：10949631
> 
> 赞同：4
> 
> 时间：2012-06-08T13:17:38.230
> 
> 标签：asp.net-mvc-3, jquery-validate, validation

我正在做一个项目，我的验证有一些问题这是我的模型：

```
[ColumnMap("Guest_ID")]
public int Guest_ID { get; set; }

[ColumnMap("FirstName")]
[Required]
[Display(Name="FirstName")]
public  string FirstName { get; set; }

[ColumnMap("LastName")]
public string LastName { get; set; }

[ColumnMap("Phone")]
[Required]  
[MaxLength(10)]
public Nullable<int> Phone { get; set; }

[ColumnMap("AdrOras")]
[Required]
public string AdrOras { get; set; } 
```

所以我要求 on`FirstName`并且`Phone`还`MaxLength`=10 on `Phone`。

这是我`CreateReservation`在控制器中的方法：

```
public ActionResult CreateReservation(int? RoomID, string FirstName, string LastName,int? Phone,string Oras,string Judet,string Tara,string Strada,int? GuestTypeId,DateTime? Birthday,DateTime? Data_Check_in, DateTime? Data_Check_out) 
{
    DBContext.Current.Open();
    Reservation rezervare = new Reservation();
    string  username= User.Identity.Name;
    Users user=Users.UserbyUsername(username);
    if(!string.IsNullOrEmpty(RoomID.ToString())&&!string.IsNullOrEmpty(FirstName)&&!string.IsNullOrEmpty(LastName)&&Phone.HasValue&&!string.IsNullOrEmpty(Judet)&&!string.IsNullOrEmpty(Tara)&&!string.IsNullOrEmpty(Strada)&&!string.IsNullOrEmpty(GuestTypeId.ToString())&&Birthday.HasValue&&Data_Check_in.HasValue&& Data_Check_out.HasValue)
    {
        rezervare.CreazaRezervare(RoomID, FirstName, LastName, Phone, Oras, Judet, Tara, Strada, GuestTypeId, Birthday,user.UserID,Data_Check_in, Data_Check_out);
        return RedirectToAction("MyReservation","Reservation");
    }

    var model = GuestTyp.SelectAll();
    ReservationView rez = new ReservationView()

    {
        rezervare =rezervare,
        client = model.ToList()
    };

    DBContext.Current.Close();
    return View(rez);
} 
```

这是我的观点：

```
@model LicentaTest.Models.ReservationView
@using JQueryUIHelpers

@{
    ViewBag.Title = "Checkout";
}

<head>
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="../../Scripts/jquery-ui-1.8.19.min.js" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery-ui.unobtrusive.min.js")" type="text/javascript"></script>   
    <script src="../../Scripts/jquery-ui.unobtrusive-0.5.0.min.js" type="text/javascript"></script>
</head>

<script type="text/javascript">
    $(function () {
        $('input[type=text], textarea, input[type=password]').width(200);
        $('#valSum').hide();
        $('form').bind('invalid-form.validate', function (error, element) {
            $('#valSum').show("slow");
            return false;
        });
    });
</script>

@if (!ViewData.ModelState.IsValid) {
    <script type="text/javascript">
        $(function () {
            $('#valSum').show("slow");
        });
    </script>
}

@using (Html.BeginForm("CreateReservation", "Reservation", FormMethod.Post))
{
    @Html.ValidationSummary(true)
    <form class="form">
    <div class = "styler">
    <div id = "valSum" class="ui-state-error ui-corner-all" style="padding: 0 .7em;width:500px">    
</div>
    <h6>Completare Date Rezervare</h6>
    <fieldset class="ui-widget">
        <legend class="ui-state-legend-default ui-corner-top ui-corner-bottom">Date personale</legend>
            @Html.Hidden("RoomID")  
            <div class="editor-label">
                @Html.Label("FirstName")
                @Html.TextBox("FirstName") 
                @Html.ValidationMessage("FirstName","Numele trebuie introdus")
            </div>
            <div class="editor-label">
                @Html.Label("LastName    ")
                @Html.TextBox("LastName") 
            </div>
            <div class="editor-label">
                @Html.Label("Phone")
                @Html.TextBox("Phone")  
                @Html.ValidationMessage("Phone","Numarul trebuie sa fie din maxim 10 cifre")
            </div>
            <div class="editor-label">
                @Html.Label("Data Nasterii")
                @(Html.JQueryUI().Datepicker("Birthday").MaxDate(DateTime.Now))
            </div>
            <div class="editor-label">
                @Html.Label("Tip CLient")
                @Html.DropDownList("GuestTypeID", new SelectList(Model.client.AsEnumerable(), "GuestTypeID", "GuestType"))
            </div>
        </fieldset>
    <fieldset class="ui-widget">
    <legend class="ui-state-legend-default ui-corner-top ui-corner-bottom">Adresa</legend>
        <div class="editor-label">
            @Html.Label("Tara")
            @Html.TextBox("Tara")
        </div>
        <div class="editor-label">
            @Html.Label("Oras")
            @Html.TextBox("Oras")
            @Html.ValidationMessage("Oras","Field is required")
        </div>
        <div class="editor-label">
            @Html.Label("Judet")
            @Html.TextBox("Judet")
        </div>
        <div class="editor-label">
            @Html.Label("Strada")
            @Html.TextBox("Strada")
        </div>
    </fieldset>
    <fieldset class="ui-widget">
        <legend class="ui-state-legend-default ui-corner-top ui-corner-bottom">Perioada rezervare</legend>
        <div class="editor-label">
            @Html.Label("Data Intrare")
            @Html.JQueryUI().Datepicker("Data_Check_in")
        </div>
        <div class="editor-label">
            @Html.Label("Data Iesire")
            @Html.JQueryUI().Datepicker("Data_Check_out")
        </div>
    </fieldset>

    <p>
        <input type="submit" value="Create" />
    </p>

    <div>
        @Html.ActionLink("Back to List", "Index", "Guest")
    </div>
    </div>
    </form>
} 
```

当我按下创建按钮时，maxlenght 验证正在工作，但所需的字段验证不起作用 ![在此处输入图像描述](../Images/083a819b588e1e684c633495e28f35ee.png)

为什么会发生这种情况我做错了什么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T14:39:53.657

您有 2 个相互嵌套的表单。您不能有嵌套表单。

你有：

```
@using (Html.BeginForm("CreateReservation", "Reservation", FormMethod.Get)){
    <form>...</form>
} 
```

删除`<form></form>`标签

`head`另外...我在您的部分中没有看到 jQuery 的脚本标签

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="../../Scripts/jquery-ui-1.8.19.min.js" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui.unobtrusive.min.js")" type="text/javascript"></script>   
<script src="../../Scripts/jquery-ui.unobtrusive-0.5.0.min.js" type="text/javascript"></script> 
```

试试这个...

从 CDN 获取 jQuery 和 jQuery UI

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js" type="text/javascript"></script> 
```

那么这三个需要按这个顺序排列。并始终`@Url.Content(...)`用于您的脚本

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T17:31:01.700

您可能希望`ViewModel`为该创建屏幕创建一个（除非我错了，您使用的字段比模型中的字段多，否则您也可以在每个字段`Model`上接收实例`Controller`），所以您通过方法上的单个对象（实例）`CreateReservation`。这将使您的事情变得更容易，并且您将使用正确接收所有值`@Html.TextBoxFor`

此外，为了检查您收到的内容，`Controller`您可以添加`FormCollection`类型参数。有了这个，您将能够看到正在发送到的每个字段`Controller`

编辑：

根据上面的文字检查一切正常并添加（如果还没有）字段的DataAnnotations，您将能够使用javascript验证；你可以查看[这篇](http://bradwilson.typepad.com/blog/2010/10/mvc3-unobtrusive-validation.html)文章或[这篇](http://www.ipreferjim.com/2011/08/dataannotations-mvc3-unobtrusive-validations/)更深入的文章

# javascript - 同步两个可拖动元素的位置

> ID：10949632
> 
> 赞同：2
> 
> 时间：2012-06-08T13:17:52.087
> 
> 标签：javascript, jquery, jquery-ui

我正在使用可拖动的时间线开发交互式应用程序。

这条时间线有两种视觉状态（打开和关闭），用户可以左右拖动。

当用户切换视觉状态时，应用程序需要显示相同的时间线部分。

HTML部分：

```
<div class="timeline">
  <div class="on">
    <div class="group">
      <div class="image">
        <div class="fr">
        </div>
        <div class="en">
        </div>
      </div>
      <div class="arrow left">
      </div>
      <div class="arrow right">
      </div>          
    </div>
  </div>
  <div class="off">
    <div class="group">
      <div class="image">
      </div>
      <div class="arrow left">
      </div>
      <div class="arrow right">
      </div>
    </div>
  </div>
</div> 
```

我只想拖动图像子元素而不是整个时间线元素。

jQuery部分：

```
function _timelineOnClicked()
{
  return function()
  {
    $( '.timeline .on' ).fadeOut();
    $( '.timeline .off' ).fadeIn();

    // TODO : Synchronise positions...
  }
}

function _timelineOffClicked()
{
  return function()
  {
    $( '.timeline .off' ).fadeOut();
    $( '.timeline .on' ).fadeIn();

    // TODO : Synchronise positions...
  }
}    

function _timelineInitialize()
{    
  $( '.timeline .off .image' ).draggable( {
      axis : 'x',
      containment: [ 1280 - 1613, 0, 0, 0 ]
    } );

  $( '.timeline .on .image' ).draggable( {
      axis : 'x',
      containment: [ 1280 - 1613, 0, 0, 0 ]
  } );

  $( '.timeline .on .arrow' ).each( function() {
    $( this ).click( _timelineOnClicked() );
  } );

  $( '.timeline .off .arrow' ).each( function() {
    $( this ).click( _timelineOffClicked() );
  } );
} 
```

解决方案 ：

```
var _timelineLeft = null;

function _timelineOnClicked()
{
  return function()
  {
    $( '.timeline .on' ).fadeOut();
    $( '.timeline .off' ).fadeIn();

    $( '.timeline .image' ).css( 'left', _timelineLeft );
  }
}

function _timelineOffClicked()
{
  return function()
  {
    $( '.timeline .off' ).fadeOut();
    $( '.timeline .on' ).fadeIn();

    $( '.timeline .image' ).css( 'left', _timelineLeft );
  }
}    

function _timelineSynchronize()
{
  return function( event, ui )
  {
    _timelineLeft = ui.position.left;
  }
}

function _timelineInitialize()
{    
  $( '.timeline .off .image' ).draggable( {
      axis : 'x',
      containment: [ 1280 - 1613, 0, 0, 0 ]
      drag : _timelineSynchronize()
    } );

  $( '.timeline .on .image' ).draggable( {
      axis : 'x',
      containment: [ 1280 - 1613, 0, 0, 0 ],
      drag : _timelineSynchronize()
  } );

  _timelineLeft = $( '.timeline .image' ).css( 'left' );

  $( '.timeline .on .arrow' ).each( function() {
    $( this ).click( _timelineOnClicked() );
  } );

  $( '.timeline .off .arrow' ).each( function() {
    $( this ).click( _timelineOffClicked() );
  } );
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T15:01:00.510

好吧，您正在寻找类似的东西：

```
function _timelineSynchronize (ev, ui)  {
    $('.timeline .image').css('left', ui.offset.left);
} 
```

这会将所有`.timeline .image`元素设置为当前拖动元素的位置。它使用[文档中提到](http://jqueryui.com/demos/draggable/#event-drag)`ui`的 jQueryUI 准备的对象。确保缓存该选择器的结果（实际上不要在 中运行它）。`_timelineSynchronize`

* * *

您还需要修复

```
 $( '.timeline .off .image' ).draggable( {
      axis : 'x',
      containment: [ 1280 - 1613, 0, 0, 0 ],
      drag: _timelineSynchronize( '.timeline .image .on' )
    } );

  $( '.timeline .on .image' ).draggable( {
      axis : 'x',
      containment: [ 1280 - 1613, 0, 0, 0 ],
      drag: _timelineSynchronize( '.timeline .image .off' )
  } ); 
```

读书：

```
 $( '.timeline .off .image' ).draggable( {
      axis : 'x',
      containment: [ 1280 - 1613, 0, 0, 0 ],
      drag: _timelineSynchronize // don't invoke the callback
    } );

  $( '.timeline .on .image' ).draggable( {
      axis : 'x',
      containment: [ 1280 - 1613, 0, 0, 0 ],
      drag: _timelineSynchronize // don't invoke the callback
  } ); 
```

您正在调用该函数，而不是传递对它的引用（作为回调），因此当您拖动元素时它不会产生任何影响。

# performance - Z3 实数算术与统计

> ID：10949633
> 
> 赞同：1
> 
> 时间：2012-06-08T13:18:05.530
> 
> 标签：performance, encoding, statistics, z3, real-datatype

给定一个使用 Z3 的实数编码的问题，`Z3 /smt2 /st`产生的哪些统计数据可能有助于判断实数引擎是否“有问题/做了很多工作”？

在我的情况下，我有两个基本等效的问题编码，都使用实数。然而，编码的“小”差异在运行时产生了很大的差异，即编码 A 需要 2:30 分钟，编码 B 需要 13 分钟。Z3 统计显示`conflicts`和大部分是等价的，但其他不是，`quant-instantiations`例如和。`grobner``pivots``nonlinear-horner`

这两种不同的统计数据可作为[要点](https://gist.github.com/2895551 "Z3统计")提供。

**编辑**（以解决 Leo 的评论）：

两个版本生成的 SMT2 编码约为 30k 行，使用实数的断言遍布整个代码。主要区别在于编码 B 使用了从范围`0.0`到`1.0`由不等式限制的大量未指定的实类型常量，例如`0.0 < r1 < 1.0`or `0.0 < r3 < 0.75 - r1 - r2`，而在编码 A 中，许多这些未指定的常量已被同一范围内的固定实数值替换，例如,`0.1`或`0.75 - 0.01`. 两种编码都使用非线性实数算术，例如`r1 * (1.0 - r2)`.

两种编码中的一些随机示例可用作[要点](https://gist.github.com/2909024 "编码示例")。如上所述，所有出现的变量都是未指定的实数。

PS：是否为固定实数值引入别名，例如，

```
(define-sort $Perms () Real)
(declare-const $Perms.$Full $Perms)
(declare-const $Perms.$None $Perms)
(assert (= $Perms.Zero 0.0))
(assert (= $Perms.Write 1.0)) 
```

造成重大的绩效处罚？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T15:09:10.780

新的非线性算术求解器仅用于仅包含算术的问题。由于您的问题使用量词，因此不会使用新的非线性求解器。因此，Z3 将使用基于以下组合的旧方法：Simplex (pivots stat)、Groebner Basis (groebner stat) 和 Interval Propagation (horner stat)。这不是一个完整的方法。此外，根据您在 gist 中发布的片段，Groebner 基础不会很有效。这种方法通常对包含大量等式的问题有效。所以，它可能只是开销。您可以使用 option 禁用它`NL_ARITH_GB=false`。当然，这只是根据您发布的问题片段的猜测。

`A`编码和之间的差异`B`很大。编码`A`本质上是一个线性问题，因为有几个常数被固定为实数值。Z3 对于线性算术问题总是完整的。因此，这应该可以解释性能上的差异。

关于您关于别名的问题，引入别名的首选方法是：

```
(define-const $Perms.$Zero $Perms 0.0)
(define-const $Perms.$Write $Perms 1.0) 
```

Z3 还包含一个使用线性方程消除变量的预处理器。默认情况下，在包含量词的问题中禁用此预处理器。这种设计决策是由在量词中广泛使用触发器/模式的程序验证工具推动的。变量消除过程可能会修改精心设计的触发器/模式，并影响总运行时间。您可以使用 Z3 中的新战术/策略框架来强制它应用此预处理器。您可以替换命令

```
(check-sat) 
```

和

```
(check-sat-using (then simplify solve-eqs smt)) 
```

该策略告诉 Z3 执行简化器，然后求解方程（并消除变量），然后执行默认求解器引擎`smt`。您可以在以下[教程](http://rise4fun.com/Z3/tutorial/strategies)中找到更多关于战术和策略的信息。

# actionscript-3 - 使用 ItemRenderer 和 RadioButton 的 Flex 4.6 弹出菜单

> ID：10949639
> 
> 赞同：1
> 
> 时间：2012-06-08T13:18:26.610
> 
> 标签：actionscript-3, apache-flex, radio-button, itemrenderer, flex4.6

```
<?xml version="1.0" encoding="utf-8"?>
<s:VGroup xmlns:fx="http://ns.adobe.com/mxml/2009"
      xmlns:s="library://ns.adobe.com/flex/spark"
      width="300" height="300" horizontalAlign="center" verticalAlign="middle"     xmlns:cc="cc.*">
<fx:Declarations>
</fx:Declarations>
<fx:Script>
    <![CDATA[
        import cc.SimpleRadioButtonRenderer;
        import mx.collections.ArrayCollection;
        [Bindable]public var mydataProvider : ArrayCollection = new ArrayCollection([ 
            {label:'United States of America',data:0},
            {label:'Alabama',data:1},
            {label:'Alaska',data:2},
            {label:'Arizona',data:3},
            {label:'Arkansas',data:4},
            {label:'California',data:5},
            {label:'Colorado',data:6},
            {label:'Connecticut',data:7},
            {label:'Delaware',data:8},
            {label:'Florida',data:9},
            {label:'Georgia',data:10},
            {label:'Hawaii',data:11},
            {label:'Idaho',data:12},
            {label:'Illinois',data:13},
            {label:'Indiana',data:14},
            {label:'Iowa',data:15},
            {label:'Kansas',data:16},
            {label:'Kentucky',data:17},
            {label:'Louisiana',data:18},
            {label:'Maine',data:19},
            {label:'Maryland',data:20},
            {label:'Massachusetts',data:21},
            {label:'Michigan',data:22},
            {label:'Minnesota',data:23},
            {label:'Mississippi',data:24},
            {label:'Missouri',data:25},
            {label:'Montana',data:26},
            {label:'Nebraska',data:27},
            {label:'Nevada',data:28},
            {label:'New Hampshire',data:29},
            {label:'New Jersey',data:30},
            {label:'New Mexico',data:31},
            {label:'New York',data:32},
            {label:'North Carolina',data:33},
            {label:'North Dakota',data:3},
            {label:'Ohio',data:35},
            {label:'Oklahoma',data:36},
            {label:'Oregon',data:37},
            {label:'Pennsylvania',data:38},
            {label:'Rhode Island',data:39},
            {label:'South Carolina',data:40},
            {label:'South Dakota',data:41},
            {label:'Tennessee',data:42},
            {label:'Texas',data:43},
            {label:'Utah',data:44},
            {label:'Vermont',data:45},
            {label:'Virginia',data:46},
            {label:'Washington',data:47},
            {label:'West Virginia',data:48},
            {label:'Wisconsin',data:49},
            {label:'Wyoming',data:50},
        ]);

    ]]>
</fx:Script>
<s:List id="menulist" width="100%" height="100%" dataProvider="{this.mydataProvider}" >
    <s:itemRenderer>
        <fx:Component>
                <s:RadioButton value="{data.label}"/>
        </fx:Component>
    </s:itemRenderer>
</s:List>
</s:VGroup> 
```

我对这个新的 Spark 组件有很多问题。我要做的就是制作一个 MXML 自定义控件，该控件将弹出（从移动应用程序的视图中），因为没有弹出菜单列表或下拉组合（那里的那些非常丑陋）某些控制被轻敲。弹出窗口包含一个填充有单选按钮的列表。

我尝试使用 {data} 作为标签属性，但我不断收到错误“1120：访问未定义的属性数据”。

任何人都可以帮我解决这个问题吗？

# javascript - 来自 .js.erb 的 JavaScript 被执行，但也显示为文本

> ID：10949640
> 
> 赞同：0
> 
> 时间：2012-06-08T13:18:30.780
> 
> 标签：javascript, ruby-on-rails, ajax, ruby-on-rails-3, popupwindow

我在这样的弹出窗口中有一个表单：

```
<%= form_tag "/controller/action", :method => :get, :remote => true do %>
...
<% end %> 
```

在我的控制器中：

```
respond_to do |format|
  format.js
end 
```

提交后，我试图更改父窗口的元素`action.js.erb`：

```
window.opener.$('#some-div').html('<div class="flash notice">...</div>'); 
```

或者没有 jQuery：

```
window.opener.document.getElementById('some-div').innerHTML = '<div class="flash notice">...</div>'; 
```

在这两种情况下，我都会在我的 div 中得到我想要的 flash 消息以及 action.js.erb 的全部内容作为文本。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:58:45.153

我猜 Rails 正在转义你的文本。

# jquery - 检测点击页面以删除下拉菜单

> ID：10949643
> 
> 赞同：2
> 
> 时间：2012-06-08T13:18:37.403
> 
> 标签：jquery, drop-down-menu

我有一个带有下拉菜单的导航，在计算机浏览器上，它出现在悬停（CSS3/jQuery 的效果）上，当悬停时，它消失了。虽然，它还检测用户是否在 iPad/iPhone 上，如果是，则仅在用户单击菜单项时显示下拉菜单。所以假设我有一个“服务”导航菜单，在计算机上，服务子菜单将出现在悬停时，在移动设备上点击。

尽管在移动设备上，除非用户单击页面上的另一个菜单项/链接，否则菜单不会关闭。我想要的是当用户点击页面上的其他地方时菜单消失，或者更好的是，当他向下滚动页面时。（如果有更好的方法，请告诉我）

所以是的，这是我的实际代码（用于移动设备）

```
$("#generale > li").click(function(){
    $('ul:first',this).css("display", "block");

    // Hover that needs to be changed 
    $("#generale > li").hover(function(){}, 
    function(){
        $('ul:first',this).fadeOut(200);
    }); 

}); 
```

基本上它仍然会检查悬停，但这就是我需要更好的解决方案的地方，因为移动设备上没有悬停。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:38:40.197

如果您使用 jq 1.7+，请在此处尝试此演示[http://jsfiddle.net/SCN5T/3/](http://jsfiddle.net/SCN5T/3/)

```
$(function(){
    $(document).mousedown(function(){
         $('.dropdown .active').removeClass('active').children('ul').hide();
    })
    $('.dropdown').on('mousedown','.subMenu', function(e){
        e.stopPropagation();
        var elem = $(this);
        if(elem.is('.active')) {
            elem.children('ul').slideUp(150);
            elem.removeClass('active');
        } else {
             $('.dropdown .active').removeClass('active').children('ul').hide();
            elem.addClass('active').children('ul').slideDown(150);
        }
    });
    $('.subMenu').on('mousedown','ul', function(e){
        e.stopPropagation();
        alert('menu item clicked');
    });       
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:22:39.423

您可以使用 jquery 的`on()`函数来执行此操作。

例如

```
$('body').on('click', ':not(#generale > li)', function(){
    // close it here
}); 
```

# php - PHP 相当于 Excel 的 MROUND 函数，四舍五入到最接近的倍数

> ID：10949653
> 
> 赞同：7
> 
> 时间：2012-06-08T13:19:04.530
> 
> 标签：php, excel, rounding

Excel 具有[MROUND](https://support.office.com/en-us/article/mround-function-c299c3b0-15a5-426d-aa4b-d2d5b3baf427)函数，可将数字向上/向下舍入到给定的倍数。

```
=MROUND(600, 400) //--> 800
=MROUND(14,4)     //--> 16
=MROUND(0.5,2)    //--> 0 
```

PHP的等效函数是什么？

如果没有，你会怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2018-02-06T12:33:55.937

您可以通过除以分母、四舍五入，然后再次乘以分母来达到相同的效果。例如：

```
function roundTo($number, $to)
{
    return round($number/$to, 0)* $to;
}

echo roundTo(87.23, 20); //80

echo roundTo(600, 400) // 800
echo roundTo(14,4)     // 16
echo roundTo(0.5,2)    // 0 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-08T13:25:23.303

MROUND() 的 PHPExcel 实现

```
function MROUND($number,$multiple) {
    if ((is_numeric($number)) && (is_numeric($multiple))) {
        if ($multiple == 0) {
            return 0;
        }
        if ((SIGNTest($number)) == (SIGNTest($multiple))) {
            $multiplier = 1 / $multiple;
            return round($number * $multiplier) / $multiplier;
        }
        return 'NAN';
    }
    return 'NAN';
}   //  function MROUND()

function SIGNTest($number) {
    if (is_bool($number))
        return (int) $number;
    if (is_numeric($number)) {
        if ($number == 0.0) {
            return 0;
        }
        return $number / abs($number);
    }
    return 'NAN';
}   //  function SIGN() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T13:28:48.543

基本逻辑是这样的：

```
$number= 600;
$unit= 400;
$remainder= $number % unit;
$mround = ($remainder < $unit/2) ? $number - $remainder : $number + ($unit-$remainder); 
```

您需要验证输入以确保它们是数字并避免除以零。

# asp.net-mvc-3 - 在实体框架的 where 子句中使用“in”运算符

> ID：10949654
> 
> 赞同：0
> 
> 时间：2012-06-08T13:19:05.073
> 
> 标签：asp.net-mvc-3, linq, entity-framework, razor

我希望所有产品都在当前类别下可用，包括所有子类别。我的代码是这样的：

```
int[] toCheck =new int[2];

toCheck[0] = 1;
toCheck[1] = 2;
toCheck[2] = 3;

var products = db.Products.Include(x => x.categoryByProductID).Where(x => x.CategoryID in ?); 
```

这里`categoryByProductID`=所有子类别， `?`=我如何使用`toCheck[]`数组

或任何其他检查`CategoryID`预定义值的解决方案！

任何可观的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:23:16.167

您想稍微向上看一下 - 类别列表是否包含该产品的类别？

```
var products = db.Products.Include(x => x.categoryByProductID).Where(x => toCheck.Contains(x.CategoryID)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T13:26:37.397

```
var products = db.Products.Include(x => x.categoryByProductID).Where(x => toCheck.Any(y => y == x.CategoryID)); 
```

# dojox.grid.datagrid - dojo DataGrid with JsonRestSore and Zend Framework

> ID：10949655
> 
> 赞同：0
> 
> 时间：2012-06-08T13:19:08.820
> 
> 标签：dojox.grid.datagrid

I am trying to show some json data retrieved from a REST server (implemented in Zend Framework) in a datagrid. Problem is that the data grid just shows "Loading..." and nothing more happens. In Firebug Lite, I can see the GET request performed and the response is ok. Still the data is not rendered in the data grid, very confusing.

Basically, I have copy'n'pasted [this code](http://dojotoolkit.org/documentation/tutorials/1.6/store_driven_grid/demo/demo.html) from "Connecting a Store to a DataGrid" and just replaced the target url and structure to suite my REST api.

I am using Dojo 1.7.2 and Zend Framework 1.11.11

this is my index.phtml file.

```
<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Demo: Connecting DataGrid to a Store</title>

        <link rel="stylesheet" href="/js/dojo/dojox/grid/resources/claroGrid.css" media="screen">
        <!-- load dojo and provide config via data attribute -->
        <script type="text/javascript" src="/js/dojo/dojo/dojo.js"
                data-dojo-config="isDebug: true,parseOnLoad: true">
        </script>
        <script>
            dojo.require("dojo.store.JsonRest");
            dojo.require("dojo.store.Memory");
            dojo.require("dojo.store.Cache");
            dojo.require("dojox.grid.DataGrid");
            dojo.require("dojo.data.ObjectStore");
            dojo.ready(function(){
                myStore = dojo.store.Cache(dojo.store.JsonRest({target:"api/testresults/"}), dojo.store.Memory());
                grid = new dojox.grid.DataGrid({
                    store: dataStore = dojo.data.ObjectStore({objectStore: myStore}),
                    structure: [
                        {name:"Test case", field:"testCase", width: '25%'},
                        {name:"Verdict", field:"verdict", width: '25%'},
                        {name:"Device under test", field:"deviceUnderTest", width: '25%'},
                        {name:"Test environment", field:"environment", width: '25%'}
                    ]
                }, "target-node-id"); // make sure you have a target HTML element with this id
                grid.startup();
                });
        </script>
    </head>
    <body>
        <h1>Demo: Connecting DataGrid to a Store</h1>
        <div id="target-node-id"></div>
        </body>
</html> 
```

The GET request done by the JsonRestStore as it appears in Firebug Lite:

```
ResponseHeaders
Date    Fri, 08 Jun 2012 12:59:41 GMT
X-Powered-By    PHP/5.3.8
Content-Range   items 0-24/2
Connection  Keep-Alive
Content-Length  229
Server  Apache/2.2.21 (Win32) mod_ssl/2.2.21 OpenSSL/1.0.0e PHP/5.3.8 mod_perl/2.0.4 Perl/v5.10.1
Content-Type    application/json
Keep-Alive  timeout=5, max=73

RequestHeaders
Accept  application/javascript, application/json
Range   items=0-24
Content-Type    application/x-www-form-urlencoded
X-Requested-With    XMLHttpRequest 
```

This is the JSON data as a result of the GET request

```
[ { "deviceUnderTest" : "R1B583",
        "environment" : "Example1",
        "id" : "1",
        "testCase" : "COH901359_12_001_001",
        "verdict" : "FAIL"
      },
      { "deviceUnderTest" : "R1B583",
        "environment" : "Example2",
        "id" : "2",
        "testCase" : "COH901359_12_001_002",
        "verdict" : "PASS"
      }
    ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T09:11:32.427

似乎实际上是 Firbug Lite (Google Chrome) 阻止了数据网格显示数据......一旦我禁用它，数据就会按预期呈现。

# blackberry - Color a certain portion of horizontal manager

> ID：10949665
> 
> 赞同：0
> 
> 时间：2012-06-08T13:19:32.903
> 
> 标签：blackberry

I have a Horizontal manager having 3 label fields shown has "1:00 Event1" in the screen ,i want to set background color for hfm only covering 1:00 ,how can i do this ?

```
HorizontalFieldManager horizontalFieldManager_left15 = new HorizontalFieldManager(
                Manager.HORIZONTAL_SCROLL);

        horizontalFieldManager_left15.add(time15Label);
        horizontalFieldManager_left15.add(min15Label);

         horizontalFieldManager_left15.add(evetnLabel); 
```

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:37:26.323

参考这个 -

```
HorizontalFieldManager horizontalFieldManager_left15 = new HorizontalFieldManager(
            Manager.HORIZONTAL_SCROLL);

LabelField lb = new LabelField(time15Label)  { 
```

//设置文本的背景颜色

```
protected void paint(Graphics graphics) {
         graphics.setColor(Color.LAVENDAR);
            super.paint(graphics);
        }
    }; 
```

//设置TextArea的backgroundColor

```
 protected void paintBackground(Graphics graphics) {
         graphics.setBackgroundColor(Color.GOLDENROD);
         graphics.clear();
        }
    };

   horizontalFieldManager_left15.add(time15Label); 
```

# jquery - jQuery gets wrong html() for span after a p tag

> ID：10949670
> 
> 赞同：4
> 
> 时间：2012-06-08T13:19:43.057
> 
> 标签：jquery

```
<html>
<head>
<script 
    src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" 
    type="text/javascript"/></script>
<script>
$(function() {
    alert($('#s1').html());
});
</script>
</head>
<body>
<p/>
<span id="s1"><h3>Eggs</h3>One dozen please</span>
</body>
</html> 
```

This page puts up a blank alert with the <p> tag, but with <br> it shows '<h3>Eggs</h3>One dozen please', as I'd expected.

This appears to be the case with Firefox 12.0 and Chrome 19.0\. IE8 gets it right. Any ideas what might be happening?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T13:23:33.523

`/`没有任何意义，至少在 HTML5 中没有。所以你实际上有：

```
<p>
  <span id="s1"><h3>Eggs</h3>One dozen please</span> 
```

由于 a`<p>`不能包含 a `<h3>`，因此浏览器会尝试通过将其解释为：

```
<p>
  <span id="s1"></span>
</p>
<h3>Eggs</h3>One dozen please 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T13:29:48.733

@pimvdb 关于关闭`<p>`

但是，要注意的另一件事是，您有 a `<h3>`which 是 a 内的块元素`<span>`，它是不正确的内联元素。内联元素不应包含块。块可以包含块和/或内联。

对于你的例如。如果您将其更改`<span>`为 a`<div>`它可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T13:24:08.713

尝试这个：

`<p></p>`

```
$(function() {
   alert($('#s1').html());
}); 
```

并将工作。您需要关闭标签`<p></p>`

[**演示**](http://jsfiddle.net/zwcPP/1/)

# jquery - How to count total number of rows in jqgrid treegrid mode

> ID：10949673
> 
> 赞同：0
> 
> 时间：2012-06-08T13:19:51.403
> 
> 标签：jquery, jqgrid

I'm using `jqGrid in treegrid mode`, my problem is that i want to the total number of rows in the grid for some manipulations? I've tried `records` and `reccount` but they seems to count only the rows return by the server against the request. My grid loads data on demand and when i delete all the children of a row both of above options return 0?

Any hints or ideas regarding this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:49:03.207

您写道，如果用户单击树节点的展开按钮，您的 TreeGrid 会“按需”加载数据。在这种情况下，您必须将自定义请求发送到“知道”TreeGrid 的所有节点的服务器。jqGrid 没有这方面的信息。

如果需要，您可以在部分 JSON 或 XML 响应的服务器响应中发送 Tree Grid**中的项目总数**（而不是仅在最后一个响应中） 。`records`我没有对此进行测试，但在我看来，在这种情况下`records`TreeGrid 的参数不会被覆盖并且您可以使用它。

# asp.net-mvc - 为什么这个使用温莎城堡的代码不起作用？

> ID：10949679
> 
> 赞同：1
> 
> 时间：2012-06-08T13:20:07.707
> 
> 标签：asp.net-mvc, model-view-controller, castle-windsor, ioc-container

我有一个 MVC 应用程序，它在任何地方都使用 Windsor，并且在 Windsor Castle 的任何地方都可以正常工作，但现在我正在向其中添加新代码，但它无法正常工作。我使用以下代码配置了 Castle：

```
 public void Install(IWindsorContainer container, IConfigurationStore store)
    {
        container.Register(Component.For<IFileUploadService>().ImplementedBy<FileUploadService>().DependsOn(Parameter.ForKey("x").Eq(
            "test")).LifeStyle.PerWebRequest);
    } 
```

FileUploadService 定义如下：

```
 public class FileUploadService : IFileUploadService
{

            public FileUploadService(string x)
    {
      // use x        
    }
 } 
```

我确定安装程序行正在调用（调试显​​示该行在应用程序启动时运行。

我有一个控制器，定义如下：

```
 public FileUploadController(IConfiguration Configuration, IFileUploadService fileUploadService)
    {
        this.Configuration = Configuration;
        this.fileUploadService = fileUploadService;
    } 
```

当我运行此应用程序时，我收到此错误：

```
 Can't create component 'FileUploadService' as it has dependencies to be satisfied. 
   FileUploadService is waiting for the following dependencies: 

    Keys (components with specific keys)
    - x which was not registered. 
```

问题是什么？我有他们正在工作的类似代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:49:32.380

我发现了问题：上面的代码适用于 Windsor 3.x，但我的应用程序使用的是 2.5。在 2.5 版中执行此操作的正确方法如下：

```
 container.Register(Component.For<IFileUploadService>().ImplementedBy<FileUploadService>().Parameters(Parameter.ForKey("x").Eq(
        "test")).LifeStyle.PerWebRequest); 
```

# sql - 如何在 SQL Server 中合并多行数据

> ID：10949683
> 
> 赞同：2
> 
> 时间：2012-06-08T13:20:21.507
> 
> 标签：sql, sql-server-2008, sql-view

这是我的情况：

TABLE PEOPLE（代码、姓名和其他与具有相同代码的记录相同的字段）

```
1;John Wayne
2;Jack Smith
2;Jill Smith
3;Bill Peyton
3;Gill Peyton
3;Billy Peyton 
```

我想要的结果：

VIEW PEOPLE（代码、姓名和其他与具有相同代码的记录相同的字段）

```
1;John Wayne
2;Jack Smith Jill Smith
3;Bill Peyton Jill Peyton Billy Peyton 
```

有人可以帮我创建一个可以给我这个结果的视图吗？重点是合并具有相同“代码”的行并在“名称”列中合并名称。对于具有相同“代码”的行，所有其他字段都是 100% 相同的。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T13:26:47.460

试试这个

```
SELECT Code,

       ( SELECT Name + ' '

           FROM Table1 t2

          WHERE t2.Code = t1.Code

          ORDER BY Name

            FOR XML PATH('') ) AS Name

      FROM Table1 t1

      GROUP BY Code ; 
```

# php - .htaccess 重定向文件类型

> ID：10949685
> 
> 赞同：5
> 
> 时间：2012-06-08T13:20:37.857
> 
> 标签：php, .htaccess, redirect, file-type

我有一些`.swf`网站的旧文件/链接，它们目前指向一个`404 Not Found`页面。我想知道是否有一种简单的方法，使用`.htaccess`（或您可能推荐的任何其他方法）将这些文件/链接重定向到我的网站主页`http:www.mysite.com/home`。

示例链接：

`http://www.mysite.com/folder/file.swf`

`http://www.mysite.com/file.swf`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T13:25:08.343

这应该有效：

```
RewriteEngine On

RewriteRule ^.*\.swf$ /home [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:25:14.553

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^mysite\.com/(.*).swf$ [NC]
RewriteRule ^(.*)$ http://www.mysite.com [R=301,L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T13:25:51.487

如果您想将所有 swf 文件永久重定向到 www.mysite.com/home，您可以使用 .htaccess 文件来完成。

首先，您必须在 apache 中启用 mod_rewrite。

然后将以下内容添加到您的 .htaccess 文件中：

```
Options +FollowSymlinks
RewriteEngine on
Rewriterule ^mysite\.com/(.*).swf$ http://www\.mysite\.com/home [R=301,NC,L] 
```

# javascript - 带有压缩的 JavaScript 缓存对象

> ID：10949689
> 
> 赞同：0
> 
> 时间：2012-06-08T13:20:58.257
> 
> 标签：javascript, caching

我需要存储一些带有数据的对象缓存。放入缓存时如何压缩它们，从缓存中读取时如何解压缩？

为了我的目的，我需要在客户端逻辑中缓存一些商店页面。我想我可以有很多数据，所以当记录数超过 500 时，我会清除旧值。我的缓存只是一个 JavaScript 对象，所以我需要将所有数据（对象数组）存储在内存中。

正如 Oleg Volkov 所说（привет！），我描述了我的任务：

1) 有一些 ExtJS 4.1 存储和组合多选和分页

2）我写了一些功能（客户端和服务器端），可以a）在放置我要设置的值时获取页面）b）可以设置值，以将它们存储在foundedValues对象中以保存它们的值（到在 setRawValue 中设置）并且可以在我跨页面移动时突出显示它们。

3）我的pageSize是25。所以，如果我想做setValues（[1,34,10]），store将从firstPage获取值，然后加载第二个，获取值（34），然后到first获取10 ！但我想存储从 1 到 25 的所有值都属于第一页，并从缓存中获取它，而不是在 Ajax 请求中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T14:11:54.030

你不应该这样做，除了它会花费大量的空间（代码）和时间（CPU）。空间非常宝贵的系统（移动设备？）也只有有限的 CPU 能力（而且压缩东西需要消耗能量！），所以如果你需要它，无论如何都不应该这样做。

客户端代码（今天）应该在服务器上保留大量数据（如果很多），并且只根据需要请求小块。浏览器的 JS 引擎可能会或可能不会自己进行压缩，这真的不是你作为 JS 程序员的事。与内存管理相同，这是故意远离 JS 程序员的手的。

所以答案是：重新设计您的应用程序以遵循当前的 JS 客户端/服务器编程和交互编程范式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T14:10:54.193

您在客户端压缩和解压缩数据的努力不值得在内存中减小数据大小。

如果你需要做压缩检查这些链接。

1.  -
2.  [Gzip 的 JavaScript 实现](https://stackoverflow.com/questions/294297/javascript-implementation-of-gzip)
3.  [我可以在 JavaScript 中压缩数据吗？](https://stackoverflow.com/questions/6127818/can-i-compress-data-in-javascript)
4.  [http://forums.devshed.com/javascript-development-115/compress-strings-arrays-263804.html](http://forums.devshed.com/javascript-development-115/compress-strings-arrays-263804.html)

# sockets - Socket programming - broadcast with net mask class B

> ID：10949690
> 
> 赞同：0
> 
> 时间：2012-06-08T13:21:03.127
> 
> 标签：sockets, broadcast, netmask

I have a problem with broadcasting data when I'm using class B of netmask. For example I have 3 PC's with these configs:

PC1: IP Address: 192.168.1.10 Netmask: 255.255.0.0

PC2: IP Address: 192.168.1.11 Netmask: 255.255.0.0

PC3: IP Address: 192.168.2.5 Netmask: 255.255.0.0

I want to send a broadcast packet from PC1 to PC's in range 1 only (PC2 in this example). But as I found I should use 192.168.255.255 as broadcast address that sends the packet to PC2 and PC3 together. I can't use something like 192.168.1.255 to send the packet to PC2 only. Is there any way to send packet to range 1 only?

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:37:24.083

网络方面，所有机器都在同一个子网（范围）中。因此，广播将始终针对该子网上的所有节点。根据你在做什么，我建议：

*   使用多播
*   教您的接收节点忽略不适合它们的数据包

# algorithm - 如何提取具有一定数量公共子节点的节点组

> ID：10949693
> 
> 赞同：2
> 
> 时间：2012-06-08T13:21:19.823
> 
> 标签：algorithm, tags, graph-theory, bookmarks, data-analysis

我正在解决一个测验，需要一些建议。

测验摘要如下：

> **分析书签服务（如delicious、digg...）的数据并提取具有两个以上公共标签的url 组**。
> 
> 1.  每个书签数据包含 1) 用户 ID、2) url 和 3) 一个标签数组。
> 2.  与所有 url 相比，所有标签的大小都相对较小。也就是说，人们用有限的集合为网站添加书签
> 3.  分配给 URL 的所有标签都不同
> 4.  如果不同的用户为同一个 URL 添加了书签，你不应该将他们分成组。（但是，这是一个可选条件。你可以忽略 user_id 并假设所有 URL 都不同。）

**例子：**

```
siteA - [tag1, tag2, tag3]
siteB - [tag1, tag2, tag4]
siteC - [tag1, tag3, tag5]
siteD - [tag1, tag2, tag6] 
```

以下两组 URL 将是结果

```
(siteA, siteB, siteD), (siteA, siteC) 
```

因为 (siteA, siteB, siteD) 共享两个公共标签 (tag1, tag2) 并且 (siteA, siteC) 也共享两个公共标签 (tag1, tag3) 。

-- 条件 3,4 并添加了一个示例。谢谢@btilly。

**我的问题是**

1.  如何解决（或可以应用哪种算法）并且实际上快速？
2.  有没有可以用与这个问题类似的算法来解决的代表性问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T21:17:13.933

我将创建一个新的数据结构，即按标签，即具有该标签的 URL 的哈希值。

然后对于每一对标签，您可以获取 URL 较少的标签，遍历它们，并查找它是否在另一个标签中，生成共享该对标签的组。

如果您的`n`标签具有每个标签的平均`m`url，则需要`O(n * m)`生成新的数据结构并`O(n * n * m)`生成组。

# mysql - MySQL：如果字符串的结尾看起来像 'BV' 更新

> ID：10949697
> 
> 赞同：0
> 
> 时间：2012-06-08T13:21:31.763
> 
> 标签：mysql, if-statement, substring

```
UPDATE company
IF SUBSTRING(company_name, LENGTH(company_name)-3, LENGTH(company_name)) = ' BV'
THEN SET company_name = SUBSTRING(company_name,1,LENGTH(company_name)-3);
END IF; 
```

我收到语法错误，不知道在哪里看，任何帮助都会得到帮助！我想要做的是，如果字符串的结尾看起来像 'BV' UPDATE 列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T13:24:13.790

使用`where`子句代替`IF`：

```
UPDATE company 
SET company_name = SUBSTRING(company_name,1,LENGTH(company_name)-3)
where SUBSTRING(company_name, LENGTH(company_name)-3, LENGTH(company_name)) = ' BV' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:31:42.020

您的 IF 语句中有错误：

```
IF SUBSTRING(company_name, LENGTH(company_name)-3, LENGTH(company_name)) = ' BV' 
```

应该

```
IF SUBSTRING(company_name, LENGTH(company_name)-3, 3) = ' BV' 
```

一个更简单的方法是使用 where 子句和类似的比较。

```
UPDATE company
SET company_name = SUBSTRING(company_name, 1, LENGTH(company_name)-3)
WHERE company_name like '% BV'; 
```

# iphone - 关于 UIView

> ID：10949698
> 
> 赞同：-2
> 
> 时间：2012-06-08T13:21:38.657
> 
> 标签：iphone

是否需要设置 uiview 对象的属性

如果不是为什么？

```
IBOutlet UIView *feedback_View;

@property(nonatomic,retain)UIView *feedback_View; 
```

请提前给我答案，我是 iphone thnx 中的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:29:45.260

我不确定我是否理解你的问题，但这里有。不需要设置任何对象的属性。当您设置属性（和合成）时，您基本上是告诉编译器自动为实例变量创建 setter 和 getter。因此，您`[object.feedback_View someInstanceMethod]`无需在类中编写 get 方法即可执行类似操作。

如果你想在你的类中使用 UIView 从你的笔尖引用视图，我看到的唯一方法是使用`IBOutlet`. 如果您是 IOS 开发新手，请记得阅读[此处](http://developer.apple.com/library/ios/navigation/)的文档。快乐编码！干杯！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:25:59.917

如果你想使用它，它必须被设置。但是，有不同的设置方法，无论是代码还是在 UI 编辑器中以图形方式。

# c# - 通过绑定添加最初缺少的收藏品

> ID：10949700
> 
> 赞同：1
> 
> 时间：2012-06-08T13:21:47.900
> 
> 标签：c#, wpf, binding, observablecollection, default-value

鉴于：

```
class StringRecord : INotifyPropertyChanged
{
    public string Key   { get; set; } // real INPC implementation is omitted
    public string Value { get; set; } // real INPC implementation is omitted
    ...
}

class Container
{
    public ObservableKeyedCollection<string, StringRecord> Params { get; set; }
    ...
{ 
```

这`ObservableKeyedCollection`是[在这里找到的](http://geekswithblogs.net/NewThingsILearned/archive/2010/01/12/make-keyedcollectionlttkey-titemgt-to-work-properly-with-wpf-data-binding.aspx)。

TextBox 绑定到集合项之一（继承 DataContext）：

```
<TextBox Text="{Binding Params[APN_HOST].Value}"/> 
```

当我手动将“APN_HOST”项添加到集合中时，绑定按预期工作。

现在，我被困在哪里：我希望能够以这种方式编辑一个空集合，即，

> 如果集合中没有具有指定键的项目，并且用户在文本框中键入了一些文本，则会导致将新项目添加到具有相应键的集合中。

我试图在集合中实现某种“如果未找到则默认”语义，但它导致所有文本框都绑定到相同的默认实例`StringRecord`，共享单个值:)

感觉就像我在这里忽略了一些非常明显的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T03:51:10.300

嗯，那是一个非常艰难的！

我所做的是：

`ObservableKeyedCollection`1 ) 扩展

```
public class ObservableKeyedCollection<TKey, TItem> : KeyedCollection<TKey, TItem>, INotifyCollectionChanged
{
    ...
    Func<TKey,TItem> m_newItemDelegate;

    public ObservableKeyedCollection(Func<TItem, TKey> getKeyForItemDelegate, Func<TKey, TItem> newItemDelegate = null)
        : base()
    {
        ...
        m_newItemDelegate = newItemDelegate;
    }

    public new TItem this[TKey key]
    {
        get
        {
            if (m_newItemDelegate != null && !Contains(key))
            {
                TItem i = m_newItemDelegate(key);
                var i_as_inpc = i as INotifyPropertyChanged;
                if (i_as_inpc != null)
                    i_as_inpc.PropertyChanged += new PropertyChangedEventHandler(AddItemOnChangeHandler);
                else
                    Add(i);
                return i;
            }
            return base[key];
        }
        set
        {
            if (Contains(key)) Remove(key);
            Add(value);
        }
    }

    private void AddItemOnChangeHandler(object sender, PropertyChangedEventArgs e)
    {
        (sender as INotifyPropertyChanged).PropertyChanged -= AddItemOnChangeHandler;
        Add((TItem)sender);
    } 
```

*   尽管索引器被声明为`new`，绑定引擎正确地解析它。
*   如果提供了 new-item-delegate，我们利用它来获取缺失键的一些默认项目实例。此新项目不会立即添加到集合中，因为它可能违反仅在用户实际编辑值后才添加值的要求。反而，
*   如果项目实现了`INotifyPropertyChanged`，我们挂钩它的`PropertyChanged`事件，将项目从处理程序添加到集合中并立即取消订阅`PropertyChanged`。

仅此一项就足够了，但是……出于某种奇怪的原因，嵌套属性通知不会触发！

2）重写绑定如下：

```
<TextBox DataContext="{Binding Params[APN_HOST]}" Text="{Binding Value}" /> 
```

现在它触发了，触发了上述机制！

**编辑。**[在这里](https://stackoverflow.com/questions/10966329/inotifypropertychanged-doesnt-fire-when-declared-in-certain-syntax/)进行了一些讨论之后，我现在看到第二次修改是解决方案中不可避免的一部分，因为默认行为。根本没有其他可能性可以确定哪个实例已更改。

# asp.net-mvc - 使用 MVC3 在 .NET 中实现“阅读更多”

> ID：10949701
> 
> 赞同：0
> 
> 时间：2012-06-08T13:21:48.773
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我正在使用 MVC3 在 .NET 中编写一个简单的“博客”应用程序，作为学习练习。

为了实现 - 基本的 - “阅读更多”功能，我向 tiny_mce 添加了一个自定义按钮，当按下该按钮时，它会插入

```
<!--#readmore#--> 
```

进入帖子内容。

这个想法是获取到该点的内容以显示在主页上，然后如果有更多要阅读的内容，则添加一个链接，就像每个博客引擎所做的那样。

这样做非常简单，我的问题是我应该*在哪里*做？现在，我在 Post 模型中具有以下功能：

```
public String content_read_more()
    {
        if (this.content.Contains("<!--#readmore#-->"))
        {
            int position = this.content.IndexOf("<!--#readmore#-->");
             this.has_read_more = true; 
            return this.content.Substring(0, position);
        }
        else
        {
            this.has_read_more = false;
            return this.content;                 
        }
    } 
```

我避免在模型中创建指向完整帖子的链接，因为这似乎不是模型应该做的事情。

但是，这样做，我必须检查帖子是否在视图中有更多内容：

```
<div class="content">
    @Html.Raw(item.content_read_more())
    @if (item.hasReadMoreLink())
    {
        @Html.ActionLink("Leer más", "Details", new { id = item.id })
    }
</div> 
```

它将逻辑引入视图。

我应该在控制器中执行此操作吗？有一个更好的方法吗？我这样想是不是太难了？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T13:23:50.160

这是完全正常的。在视图中
添加 simple 没有任何问题。`if`

您应该避免在视图中添加*业务逻辑；*相反，您应该将它放在控件中并将结果发送到视图（就像您现在所做的那样）。

# visual-studio-2010 - 我可以将 MSBuild 4.0 用于 MSBuild 2.0 XML 文件以及 VS2010 (.NET 4.0) 和 VS2005 (.NET 2.0) 项目的混合吗？

> ID：10949704
> 
> 赞同：0
> 
> 时间：2012-06-08T13:21:59.230
> 
> 标签：visual-studio-2010, msbuild, visual-studio-2005, clr, migrating

我有一个使用 .NET Framework 2.0 为 MSBuild 2.0 编写的构建脚本。

现在我正在迁移我的一些项目以使用 .NET Framework 4.0。所以我混合了 .NET 2.0 (Visual Studio 2005) 和 .NET 4.0 (Visual Studio 2010) 项目。

我可以使用 MSBuild 4.0 编译我的所有项目还是必须使用 MSBuild 4.0 和 MSBuild 2.0？在 MSBuild 4.0 中使用 MSBuild 2.0 XML 文件时是否有任何问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T16:50:25.203

是的，您可以使用 MSBuild 4.0 运行 MSBuild 2.0 脚本（或 Visual Studio 2005 项目）。

要测试它：

1.  打开 Visual Studio 2010 命令提示符
2.  切换到包含您的解决方案或项目文件的目录
3.  运行 MSBuild（如果不带任何参数运行，它将在当前目录中构建任何解决方案和/或项目文件）

# objective-c - 这两个main.m有什么区别？

> ID：10949705
> 
> 赞同：0
> 
> 时间：2012-06-08T13:22:09.760
> 
> 标签：objective-c, ios

我有点困惑，因为我有一个在其示例代码中使用第一个 main.m 的类，而我的项目使用后者。我在使用 applicationDidFinishLaunching 将类实例化时遇到了很多麻烦，我认为这些不同的 main.m 文件可能是罪魁祸首。我的项目和示例项目之间的 .xib 文件与 Main Nib 名称的 .plist 设置相同。代表都正确连接

```
#import <UIKit/UIKit.h>
#import "MidiTestingAppDelegate.h"

int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([MidiTestingAppDelegate class]));
    }
} 
```

和

```
#import <UIKit/UIKit.h>

int main(int argc, char *argv[])
{
#if __has_feature(objc_arc)
    @autoreleasepool
    {
        int retVal = UIApplicationMain(argc, argv, nil, nil);
        return retVal;
    }
#else
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    int retVal = UIApplicationMain(argc, argv, nil, nil);
    [pool release];
    return retVal;
#endif
} 
```

我假设前者直接进入 App Delegate 而后者直接加载 UIApplication？那是对的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T14:11:15.677

这里有很多不好的信息。

首先，假设你有一个最新版本的 Xcode，第一个版本就是你所需要的。

该`@autoreleasepool`语法适用*于*非 ARC 项目。编译器将其全部计算出来，并在任何一种情况下都会生成适当的代码。

第二段代码使用特征检测宏 ( ) 在新语法和创建池的旧方法`__has_feature`之间做出决定，具体取决于是否启用了 ARC。如果您正在运行没有可用新语法的旧版本的 Xcode，您只需要使用第二段代码。`@autoreleasepool``NSAutoreleasePool`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T14:11:10.513

第二个例子是不良形式。这是因为`@autoreleasepool`可以在非 ARC 项目中使用，并且实际上比创建自己的池更快（[链接）。](https://stackoverflow.com/questions/7950583/autoreleasepool-without-arc)

# c - 确定目录中最旧的文件

> ID：10949711
> 
> 赞同：3
> 
> 时间：2012-06-08T13:22:30.507
> 
> 标签：c, directory

我目前正在做一个项目，我需要从目录中的基本名称中找到最旧的文件。

例如，文件的基本名称可能是 mylog，但它需要查看所有文件，例如 mylog_060620121421.txt。从 mylog_ 的所有文件中，我需要找出最旧的文件，即首先创建的文件，但我找不到如何执行此操作。

我已经看到 scandir 命令列出文件名，但我看不到它如何用于查找文件的最早日期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T13:46:59.087

在linux上只需输入目录：

```
ls -trl 
```

这给出了一个列表，从最旧的文件开始。如果你想要直接的名字，你可以得到它：

```
ls -tr | head - 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T14:25:04.790

使用 stat()
运行命令“man -S 2 stat”以了解更多信息。

```
#include <sys/stat.h>
结构统计结构统计；
stat（文件名，&structstat）
printf("最后修改时间：%s", ctime(&structstat.st_mtime));

```

其中文件名是字符串/字符 * 表示文件 structstat 是 stat 的结构，可以在 sys/stat.h 中找到

最旧的文件将是具有最旧修改时间的文件， structstat.st_mtime 除非您同时拥有两者，否则您可以使用 structstat.st_ctime （状态更改）作为类型断路器...

# heroku - 有没有.herokuignore之类的东西？

> ID：10949720
> 
> 赞同：0
> 
> 时间：2012-06-08T13:23:09.860
> 
> 标签：heroku, github

我有一个托管在 Github 上的开源项目。我想在 github 存储库中包含示例/示例，但还包含一个类似于`.herokuignore`确保这些示例不会部署到 Heroku 的文件。可能的？

Heroku[开发中心页面](https://devcenter.heroku.com/articles/gitignore)表明它使用该`.gitignore`文件，这很好，但我仍然需要将这些文件放在 git 中。

此外，已经在 SO 上看到了这个，但它并不完全相同：[Github 和 heroku 上的应用程序：忽略一个文件而不是另一个文件](https://stackoverflow.com/questions/5280099/app-on-github-and-heroku-ignore-file-on-one-but-not-the-other)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T14:50:54.563

有一个`.slugignore`可以用来减少你的 slug 大小，对排除测试等很有用。它们仍在您的 git 存储库中，但会减小 slug 的整体大小以加快 slug 的生成速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T14:51:17.677

是的 - 有一个`.slugignore`，它包含一个`.gitignore`类似的语法，描述您不想编译到 Heroku slug 中的文件

# visual-studio-2010 - Team Foundation Server 问题

> ID：10949721
> 
> 赞同：2
> 
> 时间：2012-06-08T13:23:14.843
> 
> 标签：visual-studio-2010, tfs

我在使用 TFS 2012 Express 时遇到了麻烦，可以使用一些帮助。

我目前使用 VS2010 进行开发，并正在尝试评估 TFS 2012 Express。我安装了 TFS 2012 没有任何问题，并设法让 VS 2010 连接到它。但是当我来创建一个新项目时，我得到了一些权限错误，我不允许创建一个项目。

这似乎是[此处概述的公认问题](http://social.msdn.microsoft.com/Forums/is/tfsadmin/thread/da192608-964b-4652-b3a2-da55b8ddf2aa)

该线程建议要创建一个项目，我需要使用另一个程序来创建该项目。有没有人有任何将 vs2010 与 TFS 2012 一起使用的经验，如果是这样，你到底是如何设法创建一个项目的 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T13:26:26.457

正如您在提供的链接中看到的已接受答案：

> 遗憾的是，您无法使用 Visual Studio 2010 在 TFS 11 Beta 上创建 TFS Team 项目，因此您需要安装和使用 Visual Studio 11 Beta。

当我开始将 VS2008 与 TFS2010 一起使用时，我遇到了类似的问题。我通过在 VS2008 上安装一个允许它连接到 TFS2010 的补丁来修复它。可能很快就会出现一个补丁，用于 VS2010 连接到 TFS2012..

**可能的解决方案**

*   在微软创建补丁之前，您可以安装 Team Explorer 2012 或 VS2012 Beta（包括 Team Explorer 2012），创建项目并尝试从 VS2010 连接到现有项目。
*   你可以试试 TFS sidekicks 看看他们是否有版本可以连接到 TFS2012 并创建一个项目。检查[http://blogs.microsoft.co.il/blogs/tfsidekicks/archive/2010/01/03/team-foundation-sidekicks-for-2010-available.aspx](http://blogs.microsoft.co.il/blogs/tfsidekicks/archive/2010/01/03/team-foundation-sidekicks-for-2010-available.aspx)和[http://www.attrice.info/downloads /index.htm](http://www.attrice.info/downloads/index.htm)

# asp.net-mvc - 在基于另一个单元格的表中设置下拉列表选定值（MVC）

> ID：10949723
> 
> 赞同：1
> 
> 时间：2012-06-08T13:23:17.170
> 
> 标签：asp.net-mvc, razor, drop-down-menu

我想在 MVC 中创建一个“可编辑”表，其中每一行都有自己的下拉列表来更新行值。如何在页面加载时为之前已更新的行设置下拉列表选择值。

我当前的 Razor 代码是这样的：

```
<tbody>
   @foreach (var conversion in Model.PaginatedConversions)
   {
        <tr>
             <td>@conversion.tSystem.systemName</td>
             <td>@conversion.conversionStandardValue</td>
             <td>@Html.DropDownList("ConversionStandardIdFor" + conversion.conversionID.ToString(), Model.AvailableValuesForConversion, "")</td>
             <td>@conversion.conversionDescription</td>
             <td>@conversion.conversionDateInput</td>
             <td>@conversion.ConversionDateConverted</td>
             <td>@conversion.ConversionUser</td>
        </tr>
   } 
```

但我无法设置每个下拉列表的选定值。我怎样才能做到这一点？谢谢您的帮助！

**Edit1**：此代码循环一个模型属性 ( `Model.PaginatedConversions`)，它的类型是`List<Conversion>`。转换类如下：

```
public class Conversion {
    int ConversionId { get;set; }
    string ConversionValue { get; set; }
    int ConversionConvertedValue { get; set; }
} 
```

该表的目标是为用户创建可编辑的行，以将 映射`ConversionValue`到可以在 中选择的另一个值`Model.AvailableConversionValues`。此转换后的值将存储在`ConversionConvertedValue`.

该属性`Model.AvailableConversionValues`的类型`List<SelectListItem>`包含用户可以选择以映射 ConversionValue 的可用值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T07:53:12.587

将 ConversionValue 作为名称传递不起作用。我在 ViewModel 中创建了另一个方法，并使用它来获取 SelectListItem，传递要在 ListItem 中选择的选定值。

```
<td>@Html.DropDownList("ConversionFor" + conversion.conversionID.ToString(), Model.GetAvailableConversionValues(conversion.conversionStandardID))</td> 
```

在 ViewModel 我有这个方法：

```
public List<SelectListItem> GetAvailableConversionValues(int? selectedValue)
    {
        if (selectedValue != null)
        {
            SelectListItem selectItem = AvailableValuesForConversion.Where(t => int.Parse(t.Value) == selectedValue).SingleOrDefault();

            if (selectItem != null)
            {
                selectItem.Selected = true;
            }
        }
        return AvailableValuesForConversion;
    } 
```

谢谢您的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:37:43.860

您可以`DropDownListFor`通过传递必须选择的选项值作为第一个参数并将集合作为第二个参数来使用 html 帮助器。

```
@Html.DropDownListFor(m => m.LastSelected, Model.AvailableValuesForConversion, "") 
```

[DropDownList设置asp.net MVC中的选中项](https://stackoverflow.com/questions/2410543/dropdownlist-setting-selected-item-in-asp-net-mvc)

[razor Html.DropdownList 提供“请选择”作为选项标签和“美国”作为 selectedValue](https://stackoverflow.com/questions/9036457/razor-html-dropdownlist-provide-please-select-as-optionlabel-and-us-as-selec)

**更新：**

可能有一个很好的解决方案，但这就是我想出的。

问题是该`DropDownList`方法根据传入`name`的`Model`等搜索选定的值`ViewData`。所以想法是在下拉列表中添加一个属性，`ViewData`并将值设置为您需要在下拉列表中设置的值，然后您就完成了！

我认为您必须将 设置`ConversionValue`为下拉菜单，否则相应地更新代码。

```
 @foreach (var conversion in Model.PaginatedConversions)
   {
        var ddId = "ConversionStandardIdFor" + conversion.conversionID.ToString();

        ViewData[ddId] = conversion.ConversionValue;

        <tr>
             <td>@conversion.tSystem.systemName</td>
             <td>@conversion.conversionStandardValue</td>
             <td>@Html.DropDownList(ddId, Model.AvailableValuesForConversion, "")</td>
             <td>@conversion.conversionDescription</td>
             <td>@conversion.conversionDateInput</td>
             <td>@conversion.ConversionDateConverted</td>
             <td>@conversion.ConversionUser</td>
        </tr>
   } 
```

# sql - SQL 输出子句是否可以返回未插入的列？

> ID：10949730
> 
> 赞同：147
> 
> 时间：2012-06-08T13:23:46.070
> 
> 标签：sql, sql-server

我对我的数据库进行了一些修改，我需要将旧数据迁移到新表中。为此，我需要填写一个表格 (ReportOptions)，从原始表格 (Practice) 中获取数据，并填写第二个中间表格 (PracticeReportOption)。

```
ReportOption (ReportOptionId int PK, field1, field2...)
Practice (PracticeId int PK, field1, field2...)
PracticeReportOption (PracticeReportOptionId int PK, PracticeId int FK, ReportOptionId int FK, field1, field2...) 
```

我进行了查询以获取从 Practice 移动到 ReportOptions 所需的所有数据，但我无法填充中间表

```
--Auxiliary tables
DECLARE @ReportOption TABLE (PracticeId int /*This field is not on the actual ReportOption table*/, field1, field2...)
DECLARE @PracticeReportOption TABLE (PracticeId int, ReportOptionId int, field1, field2)

--First I get all the data I need to move
INSERT INTO @ReportOption
SELECT P.practiceId, field1, field2...
  FROM Practice P

--I insert it into the new table, but somehow I need to have the repation PracticeId / ReportOptionId
INSERT INTO ReportOption (field1, field2...)
OUTPUT @ReportOption.PracticeId, --> this is the field I don't know how to get
       inserted.ReportOptionId
  INTO @PracticeReportOption (PracticeId, ReportOptionId)
SELECT field1, field2
  FROM @ReportOption

--This would insert the relationship, If I knew how to get it!
INSERT INTO @PracticeReportOption (PracticeId, ReportOptionId)
SELECT PracticeId, ReportOptionId
  FROM @ReportOption 
```

如果我可以在 OUTPUT 子句中引用不在目标表上的字段，那就太好了（我想我不能，但我不确定）。关于如何满足我的需求的任何想法？

* * *

## 回答 #1

> 赞同：221
> 
> 时间：2012-06-08T14:07:03.087

您可以通过使用`MERGE`而不是插入来做到这一点：

所以替换这个

```
INSERT INTO ReportOption (field1, field2...)
OUTPUT @ReportOption.PracticeId, --> this is the field I don't know how to get
       inserted.ReportOptionId
  INTO @PracticeReportOption (PracticeId, ReportOptionId)
SELECT field1, field2
  FROM @ReportOption 
```

和

```
MERGE INTO ReportOption USING @ReportOption AS temp ON 1 = 0
WHEN NOT MATCHED THEN
    INSERT (field1, field2)
    VALUES (temp.Field1, temp.Field2)
    OUTPUT temp.PracticeId, inserted.ReportOptionId, inserted.Field1, inserted.Field2
    INTO @PracticeReportOption (PracticeId, ReportOptionId, Field1, Field2); 
```

关键是在合并搜索条件中使用永远不会为真 (1 = 0) 的谓词，因此您将始终执行插入，但可以访问源表和目标表中的字段。

* * *

这是我用来测试它的整个代码：

```
CREATE TABLE ReportOption (ReportOptionID INT IDENTITY(1, 1), Field1 INT, Field2 INT)
CREATE TABLE Practice (PracticeID INT IDENTITY(1, 1), Field1 INT, Field2 INT)
CREATE TABLE PracticeReportOption (PracticeReportOptionID INT IDENTITY(1, 1), PracticeID INT, ReportOptionID INT, Field1 INT, Field2 INT)

INSERT INTO Practice VALUES (1, 1), (2, 2), (3, 3), (4, 4)

MERGE INTO ReportOption r USING Practice p ON 1 = 0
WHEN NOT MATCHED THEN
    INSERT (field1, field2)
    VALUES (p.Field1, p.Field2)
    OUTPUT p.PracticeId, inserted.ReportOptionId, inserted.Field1, inserted.Field2
    INTO PracticeReportOption (PracticeId, ReportOptionId, Field1, Field2);

SELECT  *
FROM    PracticeReportOption

DROP TABLE ReportOption
DROP TABLE Practice
DROP TABLE PracticeReportOption 
```

* * *

更多阅读，我所知道的关于这个主题的所有信息的来源是[这里](http://dataeducation.com/dr-output-or-how-i-learned-to-stop-worrying-and-love-the-merge/)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-04-24T09:59:50.453

也许使用**MS SQL Server 2005 或更低**版本的人会发现这个答案很有用。

* * *

MERGE 仅适用于 SQL Server 2008 或更高版本。为了休息，我找到了另一种解决方法，它可以让您创建某种映射表。

下面是 SQL 2005 的分辨率：

```
DECLARE @ReportOption TABLE (ReportOptionID INT IDENTITY(1, 1), Field1 INT, Field2 INT)
DECLARE @Practice TABLE(PracticeID INT IDENTITY(1, 1), Field1 INT, Field2 INT)
DECLARE @PracticeReportOption TABLE(PracticeReportOptionID INT IDENTITY(1, 1), PracticeID INT, ReportOptionID INT, Field1 INT, Field2 INT)

INSERT INTO @Practice (Field1, Field2) VALUES (1, 1)
INSERT INTO @Practice (Field1, Field2) VALUES (2, 2)
INSERT INTO @Practice (Field1, Field2) VALUES (3, 3)
INSERT INTO @Practice (Field1, Field2) VALUES (4, 4)

INSERT INTO @ReportOption (field1, field2)
    OUTPUT INSERTED.ReportOptionID, INSERTED.Field1, INSERTED.Field2 INTO @PracticeReportOption (ReportOptionID, Field1, Field2)
    SELECT Field1, Field2 FROM @Practice ORDER BY PracticeID ASC;

WITH CTE AS ( SELECT PracticeID, ROW_NUMBER() OVER ( ORDER BY PracticeID ASC ) AS ROW FROM @Practice )
UPDATE M SET M.PracticeID = S.PracticeID 
    FROM @PracticeReportOption AS M
    JOIN CTE AS S ON S.ROW = M.PracticeReportOptionID

    SELECT * FROM @PracticeReportOption 
```

主要技巧是我们用源表和目标表中的有序数据填充映射表两次。在此处了解更多详细信息：[在 SQL Server 2005 中使用 OUTPUT 合并插入的数据](http://www.christian-etter.de/?p=593)

# app-store - 改变现有 ios 应用的市场

> ID：10949731
> 
> 赞同：0
> 
> 时间：2012-06-08T13:23:47.180
> 
> 标签：app-store

是否可以在进行版本升级时更改现有 IOS 应用程序的目标市场。现在它针对一个特定的国家。通过这次升级，我想让它遍布全球。是否可以 ？

我检查了 iTunes Connect 编辑选项。但找不到任何这样的可能性。

谢谢你的帮助！米娅

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:41:49.710

我想到了。这很简单。不知道为什么我错过了它。在您的应用程序的 iTunes 连接详细信息中，有权利和定价按钮。在那里您可以选择应用商店。就这样。

谢谢米娅

# android - 在 Android 中动态加载带有本地化的 xml 文件

> ID：10949735
> 
> 赞同：0
> 
> 时间：2012-06-08T13:23:53.103
> 
> 标签：android, localization

是否可以将带有本地化的 xml 文件加载到 APK 中？例如，设备将其本地发送到服务器并获取包含所有必要字符串的文件，将其保存到 SD 中并使用它？据我了解，apk 将始终查看 res 文件夹，打包后我们无法访问它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:34:08.407

您没有理由不能实现自己的使用下载的 XML 文件的本地化机制。但是，资源机制无法在运行时扩展，因此所有内容都必须在初始 APK 中。

# c# - MVC 1 渲染动作

> ID：10949738
> 
> 赞同：0
> 
> 时间：2012-06-08T13:24:00.997
> 
> 标签：c#, model-view-controller, html-helper

我在 MVC 1 项目中工作，我在几个地方使用了 Html.RenderAction，为此我引用了 Microsoft.Web.Mvc 库。它在本地工作正常，但是当我将它上传到服务器时它失败了（尽管库在正确的位置并且据我所知它被正确引用）。

它给了我这个编译错误

编译器错误消息：CS1061：“System.Web.Mvc.HtmlHelper”不包含“RenderAction”的定义，并且找不到接受“System.Web.Mvc.HtmlHelper”类型的第一个参数的扩展方法“RenderAction”（您是否缺少 using 指令或程序集引用？）

我知道它与我引用的库一起提供，而不是 System.Web.Mvc （尽管它也被引用），但实际上当我将鼠标悬停在 Html.RenderAction 上时，它似乎在使用 System.Web.Mvc.HtmlHelpers虽然我不能明确地写出这条路线

任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:34:38.713

问题是在 mvc 1 中默认没有 RenderAction，你必须为它获取外部组件，下面的引用支持我

> RenderAction() 在 MVC Futures 程序集中定义。您可以从 [http://aspnet.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=24471](http://aspnet.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=24471)下载它。请务必在项目的 ~\Web.config 中导入 Microsoft.Web.Mvc 命名空间。

取自：[本站](http://forums.asp.net/t/1445247.aspx/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T19:51:01.777

好的，这就是我最终所做的。

首先，感谢 RhysW 的回复，我现在意识到我应该明确说明，虽然我提到过，但我使用了 Html.RenderAction，所以它实际上是使用 System.Web.Mvc 而我不知道直到问题出现。我不知道为什么它在我当地有效，但确实有效。

为了使它在远程机器上工作，我将代码更改为 Microsoft.Web.Mvc.ViewExtensions.RenderAction，因为 Microsoft.Web.Mvc 是多余的，不需要。

谢谢

# ajax - 如何使用 org.apache.activemq.web.AjaxServlet 指定 ActiveMQ 主题用户名/密码

> ID：10949739
> 
> 赞同：1
> 
> 时间：2012-06-08T13:24:04.167
> 
> 标签：ajax, jms, activemq

全部，

我正在使用 ActiveMQ 5.5 AjaxServlet 通过 JavaScript 启用 ActiveMQ 队列/主题侦听。

当主题不受用户名和密码保护时，这种方法可以正常工作；然而，一旦它是，我正在努力找出正确的配置来验证主题订阅。

大多数 ActiveMQ 文档都基于 Spring，但是在这种情况下我只是使用 AjaxServlet。因此，我只剩下 web.xml 作为指定身份验证参数的方法。也许我只是使用了不正确的参数名称？没有一个 ActiveMQ Web 演示连接到安全主题。

接受建议！

这是我与“ActiveMQ-JS”WAR 一起部署的当前 web.xml 文件。我也尝试过在其内部指定`?userName=xyz&password=xyz`，`brokerURL`但这似乎会导致问题。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
<display-name>activemq-js</display-name>
 <context-param>
    <param-name>org.apache.activemq.brokerURL</param-name>
    <param-value>failover://tcp://127.0.0.1:61616</param-value>
</context-param>
<context-param>
    <param-name>org.apache.activemq.userName</param-name>
    <param-value>username_to_topic</param-value>
</context-param>
<context-param>
    <param-name>org.apache.activemq.password</param-name>
    <param-value>password_to_topic</param-value>
</context-param>
<context-param>
    <param-name>org.apache.activemq.embeddedBroker</param-name>
    <param-value>false</param-value>
</context-param>
<servlet>
<servlet-name>AjaxServlet</servlet-name>
<servlet-class>org.apache.activemq.web.AjaxServlet</servlet-class>
<load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
<servlet-name>AjaxServlet</servlet-name>
<url-pattern>/amq/*</url-pattern>
</servlet-mapping>
<filter>
  <filter-name>session</filter-name>
  <filter-class>org.eclipse.jetty.continuation.ContinuationFilter</filter-class>
</filter>
<filter-mapping>
<filter-name>session</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping>
</web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:46:57.230

创建一个自定义 ajax servlet，它将扩展 AjaxServlet 并更改用户名和密码。

```
 public class MyAjaxServlet extends AjaxServlet{

       protected AjaxWebClient getAjaxWebClient( HttpServletRequest request ) {
           AjaxWebClient client = super.getAjaxWebClient(request);
           client.setUsername("test");
           client.setPassword("test");
           return client;
       }

} 
```

使用您的自定义 ajax servlet 更新 web.xml。

```
<servlet>
     <servlet-name>MyAjaxServlet</servlet-name>
     <servlet-class>com.example.esb.web.MyAjaxServlet</servlet-class>
     <init-param>
        <param-name>maximumReadTimeout</param-name>
        <param-value>120000</param-value>
     </init-param>
    <load-on-startup>1</load-on-startup>
     <async-supported>true</async-supported>
 </servlet>
 <servlet-mapping>
   <servlet-name>MyAjaxServlet</servlet-name>
   <url-pattern>/amq/*</url-pattern>
 </servlet-mapping> 
```

# c# - 如何在 Delphi 中创建 SQL Server CE 数据库？

> ID：10949745
> 
> 赞同：2
> 
> 时间：2012-06-08T13:24:18.737
> 
> 标签：c#, delphi, sql-server-ce

我用 C# 编写了一个应用程序，它将其数据存储在 SQL Server CE 数据库 (v3.5) 中。我想使用 Delphi 应用程序中的这些数据。我找到了有关[如何从 Delphi 代码访问 SDF 文件的](https://stackoverflow.com/questions/10658799/connecting-to-a-sql-compact-file-sdf-using-an-ado-connection-in-delphi)信息，因此这部分内容简洁明了。

不幸的是，在某些情况下，Delphi 应用程序应该能够首先创建 SDF 文件。我想我需要用 C#（DataContext 子类）编写一个 ORM DLL 并从两个应用程序（从 Delphi 到 COM Interop）中使用它，但我不确定这是一个好主意。任何建议将不胜感激。

（我有 Delphi 6 和 XE2。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T15:25:49.330

您可以使用[目录对象（ADOX）](http://msdn.microsoft.com/en-us/library/windows/desktop/ms678060%28v=vs.85%29.aspx)[`Create`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms676498%28v=vs.85%29.aspx)的方法

试试这个示例应用

```
{$APPTYPE CONSOLE}

{$R *.res}

uses
  ActiveX,
  ComObj,
  SysUtils;

procedure CreateSQLCeDatabase(const DataBase : string);
Var
  Catalog : OleVariant;
begin
  Catalog := CreateOleObject('ADOX.Catalog');
  Catalog.Create(Format('Provider=Microsoft.SQLSERVER.CE.OLEDB.3.5;Data Source=%s',[DataBase]));
end;

begin
 try
    CoInitialize(nil);
    try
      CreateSQLCeDatabase('C:\Data\Bar.sdf');
    finally
      CoUninitialize;
    end;
 except
    on E:EOleException do
        Writeln(Format('EOleException %s %x', [E.Message,E.ErrorCode]));
    on E:Exception do
        Writeln(E.Classname, ':', E.Message);
 end;
 Writeln('Press Enter to exit');
 Readln;
end. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T14:36:51.127

如果您从菜单中选择项目 > 导入类型库，您将在（长！）列表中找到一个名为“Microsoft ADO Ext. 2.8 for DLL and Security (Version 2.8)”的条目（可能是较旧或较新的版本，但它应该也能正常工作。）

创建单元，并使用 CoCatalog.Create 创建 Catalog 对象，并使用[其 Create 方法](http://msdn.microsoft.com/en-us/library/windows/desktop/ms676498%28v=vs.85%29.aspx)创建由连接字符串指定的数据库。尝试使用您一直用来连接到 SDF 文件的连接字符串。

# php - 联系表 - 检查用户是否填写了所有字段

> ID：10949746
> 
> 赞同：1
> 
> 时间：2012-06-08T13:24:18.833
> 
> 标签：php, forms, field, contact

我的网站上有此联系表，但我无法检查表单字段是否已完成。

```
<form id="cform" name="cform" method="post" action="<?php bloginfo('template_directory'); ?>/cform.php">
  <div id="nande">
    <p><input type="text" id="name" name ="name"; onfocus="if(this.value=='Your Name is')this.value='';" onblur="if(this.value=='')this.value='Your Name is';" alt="Your Name" value="Your Name is"/></p>
    <p> <input type="text" id="e-mail" name="mail" onfocus="if(this.value=='Your Email is')this.value='';" onblur="if(this.value=='')this.value='Your Email is';" alt="Your Email" value="Your Email is"/></p>
  </div>
  <div class="clear"></div>
  <p><textarea name="message" rows="4" id="comments" tabindex="4" title="comments" onfocus="if(this.value=='Your Message is')this.value='';" onblur="if(this.value=='')this.value='Your Message is';"">Your Message is</textarea></p>
  <div class="clear"></div>
  <p><input name="submit" type="submit" value="SEND" id="submit"/></p>
</form> 
```

下面是表单的 PHP

```
<?php
if(isset($_POST['submit'])) {
   $to = 'email@address.com' ;     //put your email address on which you want to receive the information
   $subject = 'designdone project email';   //set the subject of email.
   $headers  = 'MIME-Version: 1.0' . "\r\n";
   $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
   $message = "<table><tr><td>Your Name</td><td>".$_POST['name']."</td></tr>
               <tr><td>E-Mail</td><td>".$_POST['email']."</td></tr>
               <tr><td>Message</td><td>".$_POST['message']."</td>
               </tr></table>" ;
mail($to, $subject, $message, $headers);
header( 'Location: http://designdone.com' ) ;
}
?> 
```

如何检查用户是否填写了表单并且没有发送空表单？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T13:25:49.047

尝试在字段上使用[`isset()`](http://php.net/manual/en/function.isset.php)或。[`empty()`](http://php.net/manual/en/function.empty.php)`$_POST`

例如：

```
foreach ( $_POST as $attr => $val ) {
  if ( !isset( $_POST[ $attr ] ) || empty( $_POST[ $attr ] ) ) {
    die( 'Please fill out all fields.' );
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T13:28:35.947

我建议使用验证库。有很多可用的，而且大多数都非常灵活。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T13:30:03.977

在 javascript 中，您可以使用 .isEmpty 来确定该字段是否为空。

# php - 使用 PHP 在 mongo db 中进行数组总和

> ID：10949750
> 
> 赞同：0
> 
> 时间：2012-06-08T13:24:37.530
> 
> 标签：php, mongodb

PHP中mongo db中的数组总和

```
[_id] => MongoId Object (
    [$id] => 4fcf2f2313cfcd344500000d
)
[id] => 14
[name] => Aryan Roban
[score] => Array (
    [03-06-2012] => 2
    [04-06-2012] => 3
    [05-06-2012] => 5
    [06-06-2012] => 4
) 
```

我需要排列分数数组的总和（总计），这样

```
[_id] => MongoId Object (
    [$id] => 4fcf2f2313cfcd2454500000d
)
[id] => 14
[type] => Football
[score] => Array (
    [03-06-2012] => 2
    [04-06-2012] => 3
    [05-06-2012] => 5
    [06-06-2012] => 4
)
[total] => 14 
```

这要对类型为 Football 的每条记录执行。

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:51:00.560

尝试这个：

```
<?php
function addElements( &$v, $k ) {
    $v[ 'total' ] = array_sum( $v[ 'score' ] );
}

$arr = array(
    0 => array('id' => 14,'name' => 'Aryan Roban','score' => array ('03-06-2012' => 2,'04-06-2012' => 3,'05-06-2012' => 5,'06-06-2012' => 4)),
    1 => array('id' => 5,'name' => 'Test','score' => array ('03-06-2012' => 2,'04-06-2012' => 1,'05-06-2012' => 15,'06-06-2012' => 8))
);

array_walk( $arr, 'addElements' );
print_r($arr);
?> 
```

希望这可以帮助。

# amazon-ec2 - 用于设置 Amazon EC2 负载均衡器的私钥/公钥（SSL 证书）

> ID：10949759
> 
> 赞同：2
> 
> 时间：2012-06-08T13:25:03.070
> 
> 标签：amazon-ec2, ssl-certificate

我正在尝试创建一个弹性负载均衡器，但我无法获取信息（私钥和公钥证书）以通过 AWS 控制台进行验证。我不断收到私钥/公钥不匹配。

Digicert 以 .p7b 文件格式提供证书。除了 p7b 证书，我还有一个带有私钥（-----BEGIN RSA PRIVATE KEY-----）的 file.pem 和一个密钥库文件。每次我启动一个亚马逊 ec2 实例时，我都会使用这两种方法。是否可以从这些文件中提取公钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:27:50.700

它必须是您用于生成实际证书的密钥库文件。不是您用来登录服务器的那个。

看到[这个](https://forums.aws.amazon.com/thread.jspa?threadID=53100)

# coldfusion - onSessionEnd 的根路径与我正在运行的应用程序不同

> ID：10949762
> 
> 赞同：2
> 
> 时间：2012-06-08T13:25:11.060
> 
> 标签：coldfusion, coldfusion-8

我的 applicationScope 中有一个服务，它返回一个自定义对象。

```
<cffunction name="getObject" access="public"returntype="com.my.Object"> 
```

这在我的应用程序中运行良好，但是当我从 onSessionEnd 调用此函数时，例如： arguments.ApplicationScope.service.getObject()

我收到一个错误，它找不到组件或接口。

当我从网站调用它时使用 expandPath("/") 我得到路径 c:/websites/project/htdocs

当我从 onSessionEnd 调用它时，我会得到 c:/coldfusion8/wwwroot 这使得它无法找到位于 c:/websites/project/htdocs/com/my/Object.cfc 的组件并抛出错误任何人都知道这个问题的解决方案，也许是我的配置？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T20:14:22.087

我怀疑您的 com.my.Object 路径的至少一部分是通过 Application.cfc 中设置的 ColdFusion 映射解决的？如果是这样，在调用 onSessionEnd() 时这些似乎不存在。所以要解决这个问题，您需要在 CFAdmin 中创建映射。

[我已经确认](http://adamcameroncoldfusion.blogspot.co.uk/2012/11/applicationcfc-set-mappings-dont-work.html)这在 CF9 中已部分解决，尽管在 Application.cfc 中设置的映射在 onApplicationEnd() 中仍然不可用。

# wcf - 需要客户证书 - 但仅适用于特定路线

> ID：10949765
> 
> 赞同：0
> 
> 时间：2012-06-08T13:25:20.380
> 
> 标签：wcf, iis-7, asp.net-mvc-routing, client-certificates

通过以下组合，我的 WCF REST 服务运行良好：

*   标准端点配置[将客户端证书添加到标准端点？](https://stackoverflow.com/questions/10090497/adding-client-certificates-to-a-standardendpoint)
*   “需要客户端证书”的 IIS7 SSL 配置
*   WCF 传输安全，需要指定证书。

我的路由是在 global.asax 中配置的，我使用自定义 WebServiceHostFactory() 和我自己的客户端证书验证。

```
RouteTable.Routes.Add(new ServiceRoute("RouteNeedsCertificate", 
    new CustomHostFactory(), typeof(MyRESTService))); 
```

现在我想限制客户端证书的应用，使其仅适用于我的一条路由 - 我有 4 个 REST 端点，但只有 1 个足够敏感，需要客户端证书。

如何设置我的配置（IIS、WCF、CustomWebServiceHostFactory），以便我可以在同一个网站中拥有多个 webHttp 端点，其中 1 个需要客户端证书，其他只需要 HTTPS？

# nservicebus - NServiceBus 从 v3.0 订阅者订阅到 v2.6 发布者

> ID：10949768
> 
> 赞同：0
> 
> 时间：2012-06-08T13:25:24.077
> 
> 标签：nservicebus, publish-subscribe

我们有一个 v2.6 发布者和 2 个消费者，一个是 2.6，另一个是 3.0。3.0 subscribes 无法订阅消息。发布者在收到来自 v3 订阅者的订阅请求时引发异常：

`Could not extract message data. System.Xml.XmlException: Root element is missing.`

我们认为引发异常是因为 v3 发送的订阅请求消息没有正文。（V2.6 订阅者发送包含正文的消息，因此假设）。有什么方法可以让 v3 订阅 v2.6 发布者？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:27:14.423

这是 NServiceBus V3.0.0 中已确认的错误，您可以升级到最新的[NServiceBus 3.2.2](http://particular.net/downloads)吗？

我已经确认 V2.6 发布者与 V3.2.2 订阅者一起工作。

# extjs - ExtJS 4.0.7：嵌套网格/RowExpander

> ID：10949773
> 
> 赞同：0
> 
> 时间：2012-06-08T13:25:44.183
> 
> 标签：extjs, listeners

关于 Ext JS 4.0.7 中的嵌套网格，我有几个问题：

1.  我有一个嵌套网格，它由一个 RowExpander 组成，它被一个基于“parent_id”的新加载网格替换，该网格通过“prototype.js”发送到 PHP，然后 PHP 从数据库返回一个答案。它工作正常，但嵌套网格不会`expandbody`像上面那样触发。我必须使用什么选择器来访问当前 gridview 中的所有“gridview”？（我试过了`#mainGrid gridview`，但没有成功）

2.  有没有办法设置 RowExpanding 列的宽度？因为它现在占用了很多空间。

3.  有没有办法设置扩展行的高度？

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:11:47.503

1.  要使用的选择器只是控制器中的“gridview”。

2.  行扩展列的宽度与网格面板的布局设置有关。把它放在“hbox”上，它自己解决了。

3.  高度由嵌套网格的高度设置。

# c++ - QGraphicsView 子类和事件

> ID：10949779
> 
> 赞同：1
> 
> 时间：2012-06-08T13:25:55.323
> 
> 标签：c++, qt, qt4, qgraphicsview

在我的项目中，我有一个`QGraphicsView`和一个`QGraphicsScene`. 我需要在我的视图中添加一些额外的事件，所以我已经将`QGraphicsView`.

问题是，当我设置 a 时，`mousePressEvent`我会覆盖拖动模式`ScrollHandDrag`。

我的问题如下：有没有办法在默认`QGraphicsView`答案`mousePressEvent`和自定义答案之间切换（例如，使用`m_click`来区分不同的情况）？

这是我的代码：

*MyQGraphicsView.h*

```
class MyQGraphicsView : public QGraphicsView
{
    Q_OBJECT
    public:
    MyQGraphicsView(QGraphicsScene *scene, QWidget *parent = 0);

    public slots:
    // void mousePressEvent(QMouseEvent * e);

    private:
    QGraphicsScene *m_scene;
    int m_click;
}; 
```

*MyQGraphicsView.cpp*

```
MyQGraphicsView::MyQGraphicsView(QGraphicsScene *scene, QWidget *parent) :
    QGraphicsView(parent),
    m_scene(scene),
    m_click(0)
{
    setScene(m_scene);
}

/*void MyQGraphicsView::mousePressEvent(QMouseEvent * e)
{
    double rad = 1;
    QPointF pt = mapToScene(e->pos());
    if (m_click)
    {
        m_scene->addEllipse(pt.x()-rad, pt.y()-rad, rad*2.0, rad*2.0, QPen(), QBrush(Qt::SolidPattern));
        m_click = 0;
    }
    else
    {
        m_click = 1;
    }
}*/ 
```

基本上我想要代码做的是：什么时候`m_click=1`，画一个点，但是什么时候`m_click=0`使用`ScrollHandDrag`.

我可以让两者分开工作，但不能同时工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T13:40:17.697

```
if ( !m_click ) {
    QGraphicsView::mousePressEvent(e);
} 
```

只需调用父类的实现即可使用“正常”行为。

# asp.net-mvc - 将 YAF 1.9.5.5 与 Azure 集成

> ID：10949783
> 
> 赞同：0
> 
> 时间：2012-06-08T13:26:15.720
> 
> 标签：asp.net-mvc, azure, azure-web-roles, yetanotherforum, yaf

我在将 YAF 1.9.5.5 集成到天蓝色的“网络角色”时遇到问题。

我成功地将论坛添加到我的页面并按照建议配置了配置。

```
 <%@ Page MasterPageFile="~/Views/Shared/Site.Master" AutoEventWireup="true" ValidateRequest="false" Inherits="System.Web.Mvc.ViewPage<dynamic>"%>

<%@ Register TagPrefix="YAF" Assembly="YAF" Namespace="YAF" %>

<asp:Content ID="SupportTitle" ContentPlaceHolderID="TitleContent" runat="server">
Support
</asp:Content>
<asp:Content ID="SupportContent" ContentPlaceHolderID="MainContent" runat="server">

<form id="form1" runat="server" enctype="multipart/form-data">
<YAF:Forum runat="server" ID="forum" BoardID="1" />
</form>
</asp:Content> 
```

当我运行“网络角色”时，论坛成功显示，但所有操作均无效。例如，当我单击“可折叠、新主题、发布响应”按钮时，我没有结果，只是刷新页面

谁能帮我这个？？

最好的问候，斯捷潘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:10:36.043

开箱即用的 yaf.net 不支持 SQL Azure。

请按照我的博客中有关如何[在 Windows Azure 上安装 yaf.net 的详细指南进行操作。](http://sergiikram.wordpress.com/2012/10/15/install-yaf-net-on-windows-azure-sql-azure-the-complete-guide/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T15:34:23.170

听起来脚本文件没有正确下载或类似的东西。您是否查看过下载的 html 以查看它是否正确？也许将您的站点与另一个 YAF 站点进行比较，看看缺少什么。

# java - 如何删除xml中的特定节点？

> ID：10949785
> 
> 赞同：0
> 
> 时间：2012-06-08T13:26:22.177
> 
> 标签：java, xml, xmlnode, xmlnodelist

*我有一个问题要删除 xml 中的节点，我有节点列表我存储了一些详细信息，现在我按一个节点值（某个值）搜索，我想删除相应的子节点，这里是 xml*

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<Serverinformation>
<server>
<serverip>172.1.2.111</serverip>
<port>4000</port>
<dbip>162.2.1.111</dbip>
<dbname>sample</dbname>
<nor>1000</nor>
</server>
<server>
<serverip>182.1.2.111</serverip>
<port>6000</port>
<dbip>152.2.1.111</dbip>
<dbname>sample2</dbname>
<nor>1000</nor>
</server>
</Serverinformation> 
```

//

```
 Element e = doc.getDocumentElement();
 NodeList nodeList = doc.getElementsByTagName("server");
 for (int i = 0; i < nodeList.getLength(); i++) {
   Node node = nodeList.item(i);
   if (node.getNodeType() == Node.ELEMENT_NODE) {
         Element element = (Element) node;
         NodeList nodelist = element.getElementsByTagName("serverip");
                Element element1 = (Element) nodelist.item(0);
                NodeList fstNm = element1.getChildNodes();
                String str=(fstNm.item(0).getNodeValue());
                String t="172.1.2.111";
                    if(str.equals(t))
                        { 
             element1.getParentNode().removeChild(element1);//here is the problem

          count=1;
          break
                        }               
              continue;
                }
          } 
        if(count==1)
        System.out.println("item found");
        else
        System.out.println("item not found");
    }
} 
```

*所以现在我想删除那个值为“172.1.2.111”的节点；这段代码有什么问题*

# linux - 如何在 java-ee Web 应用程序中运行 bash 脚本？

> ID：10949790
> 
> 赞同：2
> 
> 时间：2012-06-08T13:26:33.117
> 
> 标签：linux, bash, jakarta-ee, tomcat

我有一个用 jsp/servlets & tomcat 7 编写的 Web 应用程序。它将在 linux 系统上运行。

我想用 root 权限（`gksudo ./myScript.sh`）运行一个 bash 脚本。我的脚本在 /web 目录下。（`/web/myScript.sh`）。我怎样才能做到这一点？？

我看过一些例子，我设法运行 bash shell 命令（如`ls`），但没有设法执行脚本！我如何设置为工作目录`/web/`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T17:32:42.513

查看以下方法以了解如何获取脚本的路径：

*   [ServletContext.getRealPath()](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getRealPath%28java.lang.String%29)

要执行脚本，您可以像这样使用[Runtime 类](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html)：

```
String[] commandArray = {
    "/bin/bash",
    "-c",
    "my_script.sh"
}

Runtime.getRuntime().exec(commandArray); 
```

我从未尝试过使用 sudo（或 gksudo）运行脚本，因此您必须尝试使用​​它。

希望您可以将它添加到脚本名称之前的数组中。

# android - 为什么这段代码不起作用（Android - Scrollview）

> ID：10949798
> 
> 赞同：0
> 
> 时间：2012-06-08T13:27:00.690
> 
> 标签：android

当我运行这个应用程序时它崩溃了。我什至尝试使用 LinearLayout 但它也不起作用。我做错了什么伙计们？

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/scrollView1"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<CheckBox
    android:id="@+id/CheckBox13"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="CheckBox" />

<CheckBox
    android:id="@+id/CheckBox12"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="CheckBox" />

<CheckBox
    android:id="@+id/CheckBox11"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="CheckBox" />

<CheckBox
    android:id="@+id/CheckBox10"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="CheckBox" />

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:30:35.040

您在 ScrollView 视图中可能只有一个直接子级

滚动视图只能承载一个直接子级。

从：

[http://developer.android.com/reference/android/widget/ScrollView.html](http://developer.android.com/reference/android/widget/ScrollView.html)

`A ScrollView is a FrameLayout, meaning you should place one child in it containing the entire contents to scroll; this child may itself be a layout manager with a complex hierarchy of objects. A child that is often used is a LinearLayout in a vertical orientation, presenting a vertical array of top-level items that the user can scroll through`.

所以你的代码应该是这样的

```
 <?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/scrollView1"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<LinerLayout 
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<CheckBox
    android:id="@+id/CheckBox13"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="CheckBox" />

<CheckBox
    android:id="@+id/CheckBox12"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="CheckBox" />

<CheckBox
    android:id="@+id/CheckBox11"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="CheckBox" />

<CheckBox
    android:id="@+id/CheckBox10"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="CheckBox" />

 </LinerLayout>

</ScrollView> 
```

这是原木猫…………

![在此处输入图像描述](../Images/64f0662b9f0612433b641921d122164d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:31:15.430

ScrollView 仅将一个 View 作为子项。您不能直接在其中放置 3 个复选框。

反而：

```
<ScrollView ... >
     <LinearLayout ...>
          <CheckBox
              android:id="@+id/CheckBox13"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:text="CheckBox" />

          <CheckBox
              android:id="@+id/CheckBox12"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:text="CheckBox" />

          <CheckBox
              android:id="@+id/CheckBox11"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:text="CheckBox" />

          <CheckBox
              android:id="@+id/CheckBox10"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:text="CheckBox" />
     </LinearLayout>
 </ScrollView> 
```

# java - 在对象之间共享信息

> ID：10949801
> 
> 赞同：0
> 
> 时间：2012-06-08T13:27:24.977
> 
> 标签：java

Tasks之间共享TaskKey，哪个更好？还有其他更好的方法吗？

way1 通过一个关键对象共享。这样，客户端代码（任务队列）更容易编写配置任务表。但是每个任务都必须浪费内存来存储 TaskKey 对象。

```
class TaskKey {
    int key1;
    int key2;
    // key3...
    TaskKey(int key1, int key2) {
        this.key1 = key1;
        this.key2 = key2;
    }
}

abstract class Task implements Cloneable {
    TaskKey key;
    int taskData;
    Task(TaskKey key) {
        this.key = key;
    }
    int getKey1() {
        return key.key1;
    }
    int getKey2() {
        return key.key2;
    }
    Task newInstance(int taskData) {
        Task task = (Task) clone();
        task.taskData = taskData;
        return task;
    }
    abstract void doSomething();
}

class TaskQueue {
    Task[][] taskTable;
    void addTask(Task task) {
        taskTable[task.getKey1()][task.getKey2()] = task;
    }
    void config() {
        addTask(new Task(new TaskKey(1, 1)) {
            void doSomething() {}
        });
        addTask(new Task(new TaskKey(1, 2)) {
            void doSomething() {}
        });
        addTask(new Task(new TaskKey(2, 1)) {
            void doSomething() {}
        });
    }

    Queue<Task> queue;
    void put(int key1, int key2, int taskData) {
        Task task = taskTable[key1][key2];
        queue.add(task.newInstance(taskData));
    }
} 
```

way2 由任务类共享。这样，客户端代码（任务队列）写配置任务表很麻烦（重写任务的getKey()方法）。但是每个任务都不需要浪费内存来存储TaskKey对象，因为关键信息是由具体的Task类共享的。

```
abstract class Task implements Cloneable {
    int taskData;
    abstract int getKey1();
    abstract int getKey2();
    abstract void doSomething();
    Task newInstance(int taskData) {
        Task task = (Task) clone();
        task.taskData = taskData;
        return task;
    }
}

class TaskQueue {
    Task[][] taskTable;
    void addTask(Task task) {
        taskTable[task.getKey1()][task.getKey2()] = task;
    }
    void config() {
        addTask(new Task() {
            int getKey1() { return 1; }
            int getKey2() { return 1; }
            void doSomething() {}
        });
        addTask(new Task() {
            int getKey1() { return 1; }
            int getKey2() { return 2; }
            void doSomething() {}
        });
        addTask(new Task() {
            int getKey1() { return 2; }
            int getKey2() { return 1; }
            void doSomething() {}
        });
    }

    Queue<Task> queue;
    void put(int key1, int key2, int taskData) {
        Task task = taskTable[key1][key2];
        queue.add(task.newInstance(taskData));
    }
} 
```

另一种方式1和方式2

```
interface TaskExecutor {
    void exec(Task task);
}

class TaskKey {
    int key1;
    int key2;
    int key3;
    TaskExecutor executor;
}

class Task /*another way1*/ {
    TaskKey key;
    int taskData;// in fact it is not only a int

    int getKey1() { // because i need to retrieve key1 from a task
        return key.key1;
    }
    // also get methods for key2 key3

    void exec(){
        key.executor.exec(this);
    }
}

class Task /*another way2*/ {
    public final int key1;
    public final int key2;
    public final int key3;
    private final TaskExecutor executor;
    int taskData;

    void exec(){
        executor.exec(this);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:46:14.247

你可能不想用第二种方式。对于像存储两个`int`s 这样简单的事情，反射似乎有点矫枉过正。您从中获得的内存性能非常小，jvm 将不得不更加努力地找出您的方法重载。它最终会占用更多的代码空间（您认为 java 编译器在哪里存储所有这些额外信息？）以及减慢执行速度。

第一种方法是一种方法，但如果它像存储两个`int`s 一样简单，您可能会考虑在`Task`类中只使用两个键而不是单独的键。

```
abstract class Task implements Cloneable {
    int taskData;
    int key1;
    int key2;
    Task(int key1_, int key2_) {
        this.key1 = key1_;
        this.key2 = key2_;
    }
    int getKey1() {
        return key1;
    }
    int getKey2() {
        return key2;
    }
    Task newInstance(int taskData) {
        Task task = (Task) clone();
    task.taskData = taskData;
        return task;
    }
    abstract void doSomething();
} 
```

但是，考虑到您已经存储了所有这些数据，您似乎不需要这样做`Task[][]`，除非您需要从特定对象获取值`key1`，否则您可以直接执行`key2``Task`

```
void addTask(Task task, int i, int j) {
    taskTable[i][j] = task;
}
void config() {
    addTask(new Task(), 1, 1);
} 
```

但是，如果您确实需要从特定对象中获取值`key1`，则可以使用 a而不是 a来存储数据。这样你就可以`key2``Task``HashMap<TaskKey,Task>``Task[][]`

```
HashMap<TaskKey,Task> taskTable;
void addTask(Task task, int i, int j) {
    taskTable.put(new TaskKey(i,j), task);
}
Task getTask(int i, int j){
    return taskTable.get(new TaskKey(i,j));
}
void config() {
    addTask(new Task(), 1, 1);
} 
```

尽管您可能需要使用您最喜欢的 IDE 为它们生成一个`hashCode()`and方法。`equals()`这最终会非常节省内存，并且具有与数组相同的恒定时间访问。

# linux - 如何找出套接字指向的内容？

> ID：10949803
> 
> 赞同：1
> 
> 时间：2012-06-08T13:27:30.280
> 
> 标签：linux, sockets, process

我为系统中的一个进程（RHEL）打开了很多套接字：

```
$ls -1l /proc/22794/fd | less
lrwx------ 1 myapp apps 64 Jun  8 14:53 201 -> socket:[1662944133]
lrwx------ 1 myapp apps 64 Jun  8 14:53 202 -> socket:[1662944193]
lrwx------ 1 myapp apps 64 Jun  8 14:53 203 -> socket:[1684299114]
lrwx------ 1 myapp apps 64 Jun  8 14:53 204 -> socket:[1662944920]
lrwx------ 1 myapp apps 64 Jun  8 14:53 205 -> socket:[1662987275]
lrwx------ 1 myapp apps 64 Jun  8 14:53 206 -> socket:[1663104470]
lrwx------ 1 myapp apps 64 Jun  8 14:53 207 -> socket:[1663067786]
lrwx------ 1 myapp apps 64 Jun  8 14:53 208 -> socket:[1663045536]
lrwx------ 1 myapp apps 64 Jun  8 14:53 209 -> socket:[1663233730] 
```

...

我确切地知道它的过程是什么。我需要知道由这些已知进程创建的套接字指向的位置。

你能告诉我，我怎样才能知道每个套接字指向什么？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:32:06.553

这个：

```
netstat -napev 
```

可能会有所启发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T13:33:01.650

`netstat -nap`将列出每个正在运行的进程的所有打开的套接字，以 root 权限运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-05T10:01:35.413

我在这里找到了答案：[如何找出本地套接字另一端的程序？](https://stackoverflow.com/questions/820782/how-do-i-find-out-what-programs-on-the-other-end-of-a-local-socket/4834881#4834881)

答案是

```
ss -p | grep <socket-number> 
```

# c# - 对实现“不同”的 DataTable 的 Linq 查询感到困惑

> ID：10949807
> 
> 赞同：1
> 
> 时间：2012-06-08T13:27:39.247
> 
> 标签：c#, .net-4.0

我正在尝试使用 LINQ 从 DataTable 返回一组不同的值。

这是我没有“不同”部分的代码，因为我正在努力制定正确的 linq 语句：

```
 DataTable gridData = RgClientData.DataSource as DataTable;
   var results = from myRow in gridData .AsEnumerable()
             select (myRow.Field<string>("AssignedUser")); 
```

仅在选择末尾添加“Distinct()”是行不通的。我正在与语法搏斗，因为我不完全理解“不同”部分与 Linq 查询的关系。

有人可以指出我正确的方向...谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T13:29:41.937

您的查询需要用括号括起来才能添加`Distinct`到它的末尾：

```
var results = (from myRow in gridData .AsEnumerable()
              select myRow.Field<string>("AssignedUser")).Distinct(); 
```

或者你可以切换到流利的语法：

```
var results = gridData.AsEnumerable()
                      .Select(myRow => myRow.Field<string>("AssignedUser"))
                      .Distinct(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:31:10.720

试试这个：

```
 var results = (from myRow in gridData .AsEnumerable()
             select (myRow.Field<string>("AssignedUser")).Distinct(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-18T05:29:35.107

```
string[] distinctcolumn = (from b in datatable1.AsEnumerable()
                           select b.Field<string>"colimnname")).Distinct().ToArray(); 
```

columnname 是您想要其不同值的列的名称

你得到字符串数组 distinctcolumn 你可以根据需要使用它。

# jaxb - JAXB 在解组套接字流时挂起

> ID：10949813
> 
> 赞同：1
> 
> 时间：2012-06-08T13:27:59.560
> 
> 标签：jaxb, unmarshalling

与编组和解组读者和作家有问题。所以就在这里。这就是我将某些内容编组到 PrintWriter 的方式。

```
try {

    JAXBContext jaxbContext = JAXBContext.newInstance(XMLProtocol.class);
    Marshaller jaxbMarshaller = jaxbContext.createMarshaller();
    //jaxbMarshaller.setProperty(, value)
    //jaxbMarshaller.setProperty(Marshaller.JAXB_FRAGMENT, true);
    jaxbMarshaller.marshal(protocol, out);

} catch (JAXBException e) {
    LOG.error("Error while processing protocol"+e);             
} 
```

这就是我得到它的方式：

```
private BufferedReader in;
private PrintWriter out;
private String buffer;
private StringBuffer stringBuffer;

public ServerThread(Socket s) throws IOException {
    socket = s;
    in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
    out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())), true);
    start();
}

public void run() {
    try {
        while (true) {
            // LOG.trace("Waiting for input stream ready");

            /*
             * if (in.readLine().endsWith(">")) {
             *     LOG.trace("here we go"+buffer);
             *     JAXBContext jaxbContext = JAXBContext.newInstance(XMLProtocol.class);
             *     Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
             *     XMLProtocol protocol = (XMLProtocol) jaxbUnmarshaller.unmarshal(in);
             *     LOG.trace("Nop it no the end " + protocol.getContent());
             * }
             */

            if (in.ready()) {

                LOG.trace("BufferedReader - ready");
                buffer += in.readLine();
                if (buffer.endsWith("</XMLProtocol>")) {
                    LOG.trace("Wish you were here1"+in);

                    JAXBContext jaxbContext = JAXBContext.newInstance(XMLProtocol.class);

                    Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();

                    XMLProtocol protocol = (XMLProtocol) jaxbUnmarshaller.unmarshal(in);

                    LOG.trace("Getting message from user " + protocol.getContent());
                } else {

                    LOG.trace("Nop it no the end " + buffer);
                }
            }
        }

    } catch (IOException e) {
        e.printStackTrace();

    } catch (JAXBException e) {
        e.printStackTrace();

    } finally {
        try {
            socket.close();
            LOG.trace("Socket closed");
        } catch (IOException e) {
            LOG.error("Socket no closed" + e);
        }
    }
} 
```

然后这个 Unmarshall 操作挂起。它甚至没有向我显示异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:00:05.270

是的，我找到了这个问题的解决方案！JAXB 不是 SOCKET 流的最佳决定，因为它等待流结束。解决方案是使用清晰的 SAX 解析器，您可以在其中编写自己的 ParserHandler (DefaultHandler.class)，当您到达最后一个标签时，您应该抛出自己的异常，指示停止解析。

# c# - Error DBF file reader in C#

> ID：10949818
> 
> 赞同：3
> 
> 时间：2012-06-08T13:28:36.570
> 
> 标签：c#, dbf

ERROR: Syntax error in query. Incomplete query clause. Please help me.

```
 string db_file = null;
        OpenFileDialog op = new OpenFileDialog();
        op.InitialDirectory = Application.StartupPath + "\\out";
        op.Filter = "DBF file|*.dbf"; 
        if (op.ShowDialog() == DialogResult.OK)
        {
            db_file = op.FileName;
            FileInfo fi = new FileInfo(op.FileName);

                   String ConnectionString;
                   ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + fi.DirectoryName + ";Extended Properties=dBase 5.0;Mode=Read|Write|Share Deny None;Persist Security Info=True";
          System.Data.OleDb.OleDbConnection dBaseConnection;
          dBaseConnection = new System.Data.OleDb.OleDbConnection(ConnectionString);
          dBaseConnection.Open();
          System.Data.OleDb.OleDbCommand dBaseCommand;

              dBaseCommand = new System.Data.OleDb.OleDbCommand("Select * From '" + Path.GetFileNameWithoutExtension(fi.Name) + "'", dBaseConnection);
          System.Data.OleDb.OleDbDataReader dBaseDataReader;
          dBaseDataReader = dBaseCommand.ExecuteReader();
          while (dBaseDataReader.Read()) 
          {
              MessageBox.Show("x");
          }
          dBaseDataReader.Close(); 
```

ERROR: Syntax error in query. Incomplete query clause.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:31:59.177

Try this:

```
("Select * From " + Path.GetFileNameWithoutExtension(fi.Name) , dBaseConnection) 
```

without the quotes 'Path..'.

Hope it helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T14:03:49.697

I would suggest using the [VfpOleDb provider](http://www.microsoft.com/en-us/download/details.aspx?id=14839). Here is the connection string using that provider:

```
ConnectionString = "Provider=VfpOleDb;Data Source=" + fi.DirectoryName; 
```

# linux - 如何通过将 linux pc 连接到电线的打印机端来获取发送到打印机的数据？

> ID：10949819
> 
> 赞同：7
> 
> 时间：2012-06-08T13:28:39.597
> 
> 标签：linux, printing, dos, lpt

我有一台运行 DOS 并使用 ISA 卡从老式测试设备接收数据的非常旧的 PC。我想要做的是将打印机（LPT）线连接到旧 PC 并将另一台带有 linux 的 PC 连接到线的另一侧。linux pc 应该像打印机设备一样工作，因此它可以接收应该打印的数据。跟进我想解释这些数据，...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T10:21:22.700

您基本上甚至不需要在另一台机器上安装 linux。

有一个叫做`INTERLNK`and的东西`INTERSVR`与 MSDOS 捆绑在一起。

您可以使用它来使用并行端口从 DOS 进行文件共享。

这是在 DOS 模式下连接两台 PC 的指南。

> [http://www.pcxt-micro.com/dos-interlink.html](http://www.pcxt-micro.com/dos-interlink.html)

考虑到您的 PC 很旧，这可能不适合您，因为 INTERNK 和 INTERSVR 仅适用于 MSDOS 6.22 和更高版本。

我建议使用可引导软盘来获取正确的 MSDOS 版本并使用此技术——上面相当简单的指南链接。

PS：确保您有正确的电线 - 您可以阅读此处评论中的“完整”讨论，以了解什么电线可以用于什么。

> [http://www.computing.net/answers/dos/dcc-connection-in-dos/16366.html](http://www.computing.net/answers/dos/dcc-connection-in-dos/16366.html)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T13:53:38.750

标准 PC 硬件无法模拟并行打印机。您可以购买旨在将串行打印机连接到并行打印机端口并使用它们连接计算机的适配器。

如果 DOS 程序使用 DOS API 打印，您可以使用 MODE 命令将打印输出重定向到串行端口，或者可能通过网络发送数据，或者编写程序以使用合适的协议通过并行端口直接发送数据连接到另一台 PC。

有关在 Linux 中编程并行端口的说明，请参见[http://people.redhat.com/twaugh/parport/html/parportguide.html](http://people.redhat.com/twaugh/parport/html/parportguide.html)。串口编程见[http://www.easysw.com/~mike/serial/ 。](http://www.easysw.com/~mike/serial/)

数据格式可能是纯文本、[ESC/P](http://en.wikipedia.org/wiki/ESC/P)格式文本或 ESC/P 图形。

# ruby-on-rails - 在运行时更新黄瓜测试的结果/状态

> ID：10949823
> 
> 赞同：1
> 
> 时间：2012-06-08T13:29:08.003
> 
> 标签：ruby-on-rails, cucumber

伙计们，我想实现以下目标：当我运行黄瓜场景时，可能会发生特定的边缘情况，当发生这种边缘情况时，步骤失败并且所有后续步骤都跳过并且场景失败，我想要做的是当我遇到边缘情况我想将场景的状态设置为跳过/通过并且不希望场景失败。非常感谢有关如何实现这一目标的任何想法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T20:43:21.090

这是一个坏主意。听起来您的测试是不确定的。

请参阅[消除测试中的不确定性](http://martinfowler.com/articles/nonDeterminism.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T08:26:51.810

您的 Gherkin 场景应该完全相互独立。他们不应该依赖一些没有直接在场景或场景步骤或背景中说明的边缘`Given`案例`When`。

您应该创建 2 个可能看起来像这样的场景：

```
Given edge case doesn't happen
...
Then A happens 
```

```
Given edge case happens
...
Then B happens 
```

# ruby-on-rails - 我在 ActiveRecord 中的保存方法出现 Rails 错误

> ID：10949824
> 
> 赞同：2
> 
> 时间：2012-06-08T13:29:13.850
> 
> 标签：ruby-on-rails, activerecord, sqlite3-ruby

![在此处输入图像描述](../Images/f3e093a07217c11c1299489439d1af5f.png)

我在调用保存方法时发现了这个错误

我的 Rails Envi：Rails 3.2.5、sqlite 3.7.12（在 GemFile 1.3.6 中）、最新的 ActiveRecord

提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:53:40.967

ActiveRecord and newer versions of SQLite both support nested transactions, but the AR/SQLite adapter does not.

Further reading:

[https://rails.lighthouseapp.com/projects/8994-ruby-on-rails/tickets/6307](https://rails.lighthouseapp.com/projects/8994-ruby-on-rails/tickets/6307) http://stackoverflow.com/questions/4153719/rails-3-nested-transactions-exception-in-a-child-block

A surprising omission from the docs, given that SQLite is the default DB!

# mysql - mysql比较列和子查询

> ID：10949825
> 
> 赞同：1
> 
> 时间：2012-06-08T13:29:19.690
> 
> 标签：mysql, comparison, subquery

**sql查询：**

```
select
usr.username,
(
  select usr2.username
  from users as usr2
) as another_user
from users as usr
having usr.username != another_user 
```

我如何`usr.username`与子查询进行比较，例如命名为`another_user`？

我想得到`usr.username`不等于的所有结果`another_user`

我尝试了该`WHERE`子句或`HAVING`但仍然出现错误

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:32:20.673

尝试

```
select
usr.username,
(
  select username from users where ...
) as another_user
from users as usr
where usr.username <> another_user.username 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:32:42.477

也许是这样的：

```
SELECT
    *
FROM
(
    select
    usr.username,
    (
      ....
    ) as another_user
    from users as usr
) AS T
WHERE
    NOT T.username = T.another_user 
```

# django - 同步本地文件夹和服务器的最有效方法（django dev）

> ID：10949829
> 
> 赞同：1
> 
> 时间：2012-06-08T13:29:37.093
> 
> 标签：django, sublimetext2, remote-server

我目前正在使用 winSCP 来回传输文件，并在编辑我的应用程序/项目 .py 文件时使用 PuTTY 运行服务器**./restart 。**我想知道是否有更快、更有效的从服务器上传/下载而不是拖放和服务器重启的方法。

是否有任何特定于 django 的脚本可以自动执行其中的一些操作？也许通过编辑？我目前正在使用 Sublime。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:51:21.760

如果您还没有，您应该考虑将您的项目置于版本控制之下，例如使用 Git。除了许多其他好处（分支、恢复等）之外，它还可以帮助您在开发机器和服务器之间同步文件。

[Git主页](http://git-scm.com/)

就 django（或与此相关的任何 python 项目）而言，您应该查看 Fabric，它可以让您自动化部署代码所涉及的许多任务，例如重新启动服务器等。

[面料主页](http://docs.fabfile.org/en/1.4.2/index.html)

# ios - 创建 NSEntityDescription 几秒后抛出异常

> ID：10949839
> 
> 赞同：0
> 
> 时间：2012-06-08T13:29:58.707
> 
> 标签：ios, core-data, nsentitydescription

*   我的数据模型中有一个车辆实体。
*   它具有名称、品牌、型号等属性。
*   我对 NewVehicleViewController 有一个模态 segue，它允许用户输入实体信息。
*   在这个 segue 期间，我已将 managedObjectContext 传递给 NewVehicleViewController
*   单击“完成”，通过在 NewVehicleViewController 的 IBAction 方法中调用 create+vehicle.m 方法来创建一个新的 NSEntityDescription。

    Vehicle *car = [Vehicle vehicleWithName:name inManagedObjectContext:self.context];

此方法执行以下操作：

```
+ (Vehicle *) vehicleWithName:(NSString *)name inManagedObjectContext:(NSManagedObjectContext *) context
{
    Vehicle *vehicle = nil;

    //check for duplicates
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Vehicle"];
    request.predicate = [NSPredicate predicateWithFormat:@"name = %@", name];
    NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES];
    request.sortDescriptors = [NSArray arrayWithObject:sortDescriptor];

    NSError *error;
    NSArray *matches = [context executeFetchRequest:request error:&error];
    NSLog(@"Matches: %d", matches.count);

    if(!matches || [matches count] >1){
        //nil or more than 1
    } else if ([matches count] == 0){
        //not found
        vehicle = [NSEntityDescription insertNewObjectForEntityForName:@"Vehicle" inManagedObjectContext:context];
        vehicle.name = name;
    }else{
        vehicle = [matches lastObject];
        NSLog(@"vehicle already exists with name: %@", name);
    }

    NSLog(@"Created vehicle with name: %@", vehicle.name);

    return vehicle;
} 
```

当窗口关闭时，我返回到我的 Table View 控制器，我可以在其中看到新元素。（此表链接到 fetch 语句）。一切都很好。

然后大约 4-6 秒后，我抛出了一个异常。底部的调试日志什么也没显示，它把我带到了一个线程 8 视图，第一行有一个中断。

```
libobjc.A.dylib`objc_exception_throw:
0x1780caa:  pushl  %ebp
0x1780cab:  movl   %esp, %ebp
0x1780cad:  pushl  %ebx
0x1780cae:  pushl  %edi
0x1780caf:  pushl  %esi
0x1780cb0:  subl   $2028, %esp
0x1780cb6:  calll  0x01780cbb               ; objc_exception_throw + 17 
```

所以我的第一个问题是，知道问题是什么吗？这是由于 NS Core Data 的自动保存在一段时间后发生的吗？

我的第二个问题是，我怎样才能进一步调试它以找出问题所在？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T15:36:28.613

结果，我将模型中的实体从 Car 重命名为 Vehicle。我通过代码传播了更改，但模拟器仍然保存了应用程序。应用程序内的数据库中仍然存储着原始的 Cars，但现在它们被称为 Vehicles。

这导致保存后发生异常。

我最终从模拟器中删除了该应用程序，然后再次运行它，它工作了。

谢谢！

# xslt - 需要计算换行数

> ID：10949845
> 
> 赞同：2
> 
> 时间：2012-06-08T13:30:34.163
> 
> 标签：xslt, break

我正在使用此代码每 150 个字符中断一次 XML 字符串。

```
<xsl:variable name="val_cr_ln" select=" '&#xA;' " /> 
```

每次发生此变量时，我都需要进行计数。

有人能告诉我我会怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:58:51.607

要查找特定字符串在 XML 文档中出现的次数：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet
    version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:exslstr="http://exslt.org/strings"
>

    <xsl:template match="/">
        <xsl:variable name='xml_as_str'>
            <xsl:apply-templates select='*' />
        </xsl:variable>
        <p>There are <xsl:value-of select='count(exslstr:split($xml_as_str, "string")) - 1' /> occurrences of "string" in there source XML.</p>
    </xsl:template>

</xsl:stylesheet> 
```

可以在这里运行：[http ://www.xmlplayground.com/7QAvNp](http://www.xmlplayground.com/7QAvNp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T02:19:12.577

**这是一个 XPath 单行**：

```
string-length(/) - string-length(translate(string(/), $vNL, '')) 
```

**这计算为 XML 文档中所有文本节点的串联中 NL 字符的总数**。

**说明**：

`translate(string(/), $vNL, '')`从文档节点的字符串值（XML 文档中所有文本节点的串联）生成另一个字符串，其中任何 NL 字符都已替换为空字符串（已删除）。

**然后，从总字符串长度中减去它，就可以准确地得到（删除的）NL 字符的数量**。

**这是一个完整的代码示例**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:variable name="vNL" select="'&#x0A;'"/>

 <xsl:template match="/">
  <xsl:value-of select=
  "string-length(/)
  - string-length(translate(string(/), $vNL, ''))
  "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<text>
Dec. 13 — As always for a presidential inaugural, security and surveillance were
extremely tight in Washington, DC, last January. But as George W. Bush prepared to
take the oath of office, security planners installed an extra layer of protection: a
prototype software system to detect a biological attack. The U.S. Department of
Defense, together with regional health and emergency-planning agencies, distributed
a special patient-query sheet to military clinics, civilian hospitals and even aid
stations along the parade route and at the inaugural balls. Software quickly
analyzed complaints of seven key symptoms — from rashes to sore throats — for
patterns that might indicate the early stages of a bio-attack. There was a brief
scare: the system noticed a surge in flulike symptoms at military clinics.
Thankfully, tests confirmed it was just that — the flu.
</text> 
```

**产生了想要的正确结果**：

```
12 
```

# solr - 过滤器查询的 solr 评分

> ID：10949848
> 
> 赞同：1
> 
> 时间：2012-06-08T13:31:00.290
> 
> 标签：solr

我的架构中有一些字段如下：

hotel_name：一些酒店名称

城市：某个城市

县代码：DE

街道：某条街道。

我查找一些酒店的查询看起来像这样。

```
select/fq=city:"Berlin"&fq=country_code"DE"&fq=hotel_name:"achat berlin hotel"=city:"Berlin"&fq=country_code"DE"&fq=hotel_name:"achat berlin hotel" 
```

返回值，包含许多在hotel_name 字段中找到的带有一些或多个令牌的酒店。如果我想简短，这些文档每个在hotel_name 文件中匹配的令牌数，我该怎么做。我想在顶部的 hotel_name 字段中保留最大数量的匹配令牌。

EG 如果酒店名称包含所有三个标记：achat、柏林和酒店，它应该出现在顶部。和较低的匹配应该出现在下面。

是否可以根据每个字段匹配的令牌数量对文档进行评分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:46:00.630

好吧，首先，您的查询格式不正确。查询需要以a开头`?`，提供`q`参数，`:`在字段名和值之间提供a `country_code`，不需要重复`fq`参数。它应该是：

```
?q=*:*&fq=city:"Berlin"&fq=country_code:"DE"&fq=hotel_name:"achat berlin hotel" 
```

,和这些参数将根据您进行标记和分析，`hotel_name`并且可能完全匹配或不匹配，具体取决于您在 中指定的查询斜率。`country_code``city``fq``schema.xml``solrconfig.xml`

> 是否可以根据每个字段匹配的令牌数量对文档进行评分。

solr 中的得分不是这个字面意思，所以不，不完全是。

> EG 如果酒店名称包含所有三个标记：achat、柏林和酒店，它应该出现在顶部。和较低的匹配应该出现在下面。

您已将查询作为短语提供（用`"`s 引用），因此 solr 默认会找到该确切短语，并为其提供相关分数。如果在您的 中配置了[查询 slop](http://wiki.apache.org/solr/DisMaxQParserPlugin#qs_.28Query_Phrase_Slop.29)（参数） ，那么还将添加来自草率查询的分数。您可能真正想要的是：`qs``solrconfig.xml`

```
hotel_name:achat berlin hotel 
```

这是一个非短语查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:39:15.327

schema.xml 中“hotel_name”字段的类型是什么？

另外，你已经试过了吗？默认情况下，Solr 会考虑协调因素：

“如果查询中有多个词条，匹配的词条越多，得分越高”。所以，我猜你的情况已经发生了。

# c++ - Windows 上的 Google 测试框架检查您是否以交互方式运行

> ID：10949854
> 
> 赞同：3
> 
> 时间：2012-06-08T13:31:32.293
> 
> 标签：c++, googletest

我在 Windows 上以交互方式在 Visual Studio 中使用谷歌测试框架，或者在构建服务器上以非交互方式使用。当以交互方式运行时，我设置了环境变量`GTEST_CATCH_EXCEPTIONS=0`，因此我进入调试器，以防构建服务器上出现异常，此设置为 1。

现在我想知道我如何才能确定这是在测试中设置还是未设置的天气。这当然可以使用 Windows API 来完成，但我认为谷歌测试框架配置也可以通过某种方式直接访问，只是到目前为止还想不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T14:25:24.227

您可以使用 bool 变量`testing::GTEST_FLAG(catch_exceptions)`来确定这一点。

# mongodb - MongoDB 转义 db-name 中的特殊字符

> ID：10949855
> 
> 赞同：2
> 
> 时间：2012-06-08T13:31:33.690
> 
> 标签：mongodb

有谁知道我如何使用 mongodb 控制台中的“abc-123”之类的数据库名称在**一个命令**中执行以下操作：

```
 use abc-123;
 db.Configuration.find() 
```

我尝试了类似的东西

```
 ['abc-123'].Configuration.find() 
```

但没有任何效果。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T15:32:24.403

您可以使用 db.getSibling() 来执行此操作 -

```
> db.getSiblingDB("abc-123").Configuration.find()

{ "_id" : ObjectId("4fd20ac548b3c185dd9f8e5c"), "name" : "mongo" }
{ "_id" : ObjectId("4fd20ac748b3c185dd9f8e5d"), "x" : 3 }
{ "_id" : ObjectId("4fd20b9648b3c185dd9f8e5e"), "x" : 4, "j" : 1 }
{ "_id" : ObjectId("4fd20b9648b3c185dd9f8e5f"), "x" : 4, "j" : 2 }
{ "_id" : ObjectId("4fd20b9648b3c185dd9f8e60"), "x" : 4, "j" : 3 }
{ "_id" : ObjectId("4fd20b9648b3c185dd9f8e61"), "x" : 4, "j" : 4 }
{ "_id" : ObjectId("4fd20b9648b3c185dd9f8e62"), "x" : 4, "j" : 5 }
{ "_id" : ObjectId("4fd20b9648b3c185dd9f8e63"), "x" : 4, "j" : 6 }
{ "_id" : ObjectId("4fd20b9648b3c185dd9f8e64"), "x" : 4, "j" : 7 }
{ "_id" : ObjectId("4fd20b9648b3c185dd9f8e65"), "x" : 4, "j" : 8 }
{ "_id" : ObjectId("4fd20b9648b3c185dd9f8e66"), "x" : 4, "j" : 9 }
{ "_id" : ObjectId("4fd20b9648b3c185dd9f8e67"), "x" : 4, "j" : 10 }
......
...... 
```

这是 MongoDB 命令参考列表的链接，其中更多地讨论了 getSibling - [http://docs.mongodb.org/manual/reference/commands/](http://docs.mongodb.org/manual/reference/commands/)。

此外，建议保留数据库名称字母数字。

# c++ - `std::mutex` 和 `std::lock` 是否保证处理器间代码中的内存同步？

> ID：10949863
> 
> 赞同：6
> 
> 时间：2012-06-08T13:31:55.630
> 
> 标签：c++, multithreading, c++11, openmp

我目前正在使用 openMP 编写在多核节点上运行的代码。openMP 有一个特定的内存模型，它保证在获得锁时，运行在不同内核上的线程之间的内存是同步的。

我考虑使用 C++11 构造（`std::thread`with `std::mutex`and `std::lock`）而不是 openMP（因为它们具有更大的灵活性）并且想知道处理器之间的内存同步是否/如何保证？如果没有，我该如何执行？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-08T13:52:28.613

`std::mutex`该标准在 §30.4.1.2[thread.mutex.requirements.mutex]/6-25 中对 的同步做出以下保证

> 表达式 m.lock() 应格式正确并具有以下语义
> 
> *同步*：同一对象上的先前解锁（）操作应与此操作同步。

而且，同样，

> 表达式 m.unlock() 应格式正确并具有以下语义
> 
> *同步*：此操作与获得同一对象所有权的后续锁定操作同步。

*（其中“同步”是 $1.10 中解释的一个特定术语，尽管通过阅读C++ Concurrency In Action*更容易理解）

# wordpress - 将样式表切换器添加到 Wordpress 的选项框架主题时出现问题

> ID：10949864
> 
> 赞同：1
> 
> 时间：2012-06-08T13:31:57.843
> 
> 标签：wordpress, frameworks, stylesheet, switch-statement, options

我在使用 Devin Price 的 Options Framework Theme 将 css 样式切换器添加到我的主题选项时遇到问题。一切似乎都很好，但是当我输出选项时，我得到 1.css 2.css 3.css 而不是实际的文件名。

这就是我所做的：

我将“样式”目录中的所有样式表拉到一个数组中：

```
$alt_stylesheet_path = get_template_directory() . '/styles/';
$alt_stylesheets = array();
if ( is_dir($alt_stylesheet_path) ) {
    if ($alt_stylesheet_dir = opendir($alt_stylesheet_path) ) {
        while ( ($alt_stylesheet_file = readdir($alt_stylesheet_dir)) !== false ) {
            if(stristr($alt_stylesheet_file, ".css") !== false) {
                $alt_stylesheets[] = $alt_stylesheet_file;
            }
        }
    }
} 
```

然后我创建选项面板

```
$options[] = array(
    'name' => __('StyleSheet', 'mytheme'),
    'desc' => __('Select a color scheme', 'mytheme'),
    'id' => 'alt_stylesheet',
    'type' => 'select',
    'options' => $alt_stylesheets,
    "std" => "default.css"); 
```

我在 header.php 中这样称呼它

```
<link rel="stylesheet" href="<?php echo bloginfo('template_directory')?>/styles/<?php echo of_get_option('alt_stylesheet'); ?>.css" type="text/css" media="screen" /> 
```

如何输出 css 文件名（例如：green.css blue.css）而不是选项 id (1.css, 2.css)？

任何帮助将不胜感激，因为我已经失去了一天的尝试。谢谢

# c# - 如何对具有属性的元素使用 RestSharp 的默认 XmlDeserializer

> ID：10949865
> 
> 赞同：3
> 
> 时间：2012-06-08T13:31:59.213
> 
> 标签：c#, rest, xml-deserialization, restsharp, xml-attribute

我正在尝试使用 RestSharp 来使用第三方 REST Web 服务，但在让默认 XML 反序列化与我返回的 XML 一起工作时遇到了一些麻烦。

XML 格式为 -

```
<root>
   <someURL href="192.168.1.1" />
   <anotherURL href="192.168.1.2" />
   <thirdURL href="192.168.1.3" />
</root> 
```

我的 request.RootElement 设置为“root”，我最初尝试为 RestSharp 创建以下对象以反序列化为 -

```
public class URLInfo
{
    public string someURL { get; set; }
    public string anotherURL { get; set; }
    public string thirdURL { get; set; }
} 
```

我意识到这不起作用，因为属性所以我认为基于这里的例子（[https://github.com/restsharp/RestSharp/wiki/Deserialization](https://github.com/restsharp/RestSharp/wiki/Deserialization)） - 即使这谈到了一个元素列表，我尝试创建以下 -

```
public class URLInfo
{
    public HrefAttribute someURL { get; set; }
    public HrefAttribute anotherURL { get; set; }
    public HrefAttribute thirdURL { get; set; }
}

public class HrefAttribute
{
    public string href { get; set; }
} 
```

但我的响应对象数据仍然为空。谁能指出我在这里做错了什么，或者在涉及属性时甚至不能使用默认的 XmlDeserializer？- 这似乎很奇怪，因为他们自己的示例谈论属性，尽管在列表中。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:01:35.590

好的，看来它正在设置破坏它的根！

当我删除对

```
request.RootElement = "root"; 
```

它继续反序列化文档没问题。嗯......仍然有兴趣知道为什么这会修复它，因为它似乎是正确的根？

# java - 跳过一行 GridBagLayout

> ID：10949869
> 
> 赞同：3
> 
> 时间：2012-06-08T13:32:09.477
> 
> 标签：java, swing, gridbaglayout

我在 JFrame 上使用 GridBagLayout，我希望能够跳过一两行但让这些行显示为空白，然后在这些行之后有一个按钮。我在文档中找不到任何方法来做我描述的事情，有人知道我可以做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T13:43:00.647

比添加空组件更清楚......有一个`GridBagConstraint`命名的插入，允许您在任何方向选择您正在添加的组件和它周围的其他组件之间的空白。不过感谢您的回答！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T13:34:31.303

您是否尝试在要保留空白的行中添加空组件？像空的 JPanel 一样？或者可能是不可见的组件。

# javascript - NodeJS + MongoDB：在现有对象中创建子对象？

> ID：10949870
> 
> 赞同：0
> 
> 时间：2012-06-08T13:32:10.767
> 
> 标签：javascript, node.js, mongodb

我正在 NodeJS 上编写一个小公司的档案管理系统。我使用 MongoDB 进行数据存储。我有收藏“公司”，其中每个对象都是一家公司。当然，公司有几个参数，例如“姓名”、“电子邮件”、“电话”。这些都是单字符串字段。这是我当前的“公司”对象架构。

```
{
    "company_name": "ACME Ltd.",
    "company_email": "acmeltd@example.com",
    "company_tel": "+49374727384",
    "_id": {
        "$oid": "4fd115b6e94a7e2408000001"
    }
} 
```

这是我保存当前“公司”配置文件的代码：

```
app.post('/addcompany',function(req,res){
    db.collection("companies",function(err,collection){
        collection.insert( {
            "company_name":req.body.company_name,
            "company_email":req.body.company_email,
            "company_tel":req.body.company_tel
        });
    });
    res.redirect('/companies');
}); 
```

但是，每家公司都有几个（每家公司不同）供应商，我想将它们存储在“公司”对象中。所以，我想我应该在我的“公司”对象中创建内部对象“供应商”，对象“供应商”必须有内部对象“供应商1”、“供应商2”等。每个“供应商1”对象应该有6个参数例如“supplier_name”、“supplier_tel”等。所以，我的问题是，在我的“公司”对象中存储耗材列表的最佳方式是什么？我应该如何使用 NodeJS？

**更新：我已经像这样修改了我的代码，现在它可以工作了！**

```
app.post('/addcompany',function(req,res){
    db.collection("companies",function(err,collection){
        collection.insert( {
            "company_name":req.body.company_name,
            "company_email":req.body.company_email,
            "company_tel":req.body.company_tel,
            "company_suppliers" : [
                { "supplier_name" : "jane_test", "supplier_tel" : "123456_test", "comment" : "Good supplier_test" },
                { "supplier_name" : "jessy_test", "supplier_tel" : "654321_test", "comment" : "Bad supplier_test" }
              ]
        });
    });
    res.redirect('/companies');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:39:14.280

如果您打算将它们存储在公司对象中，我建议使用用于该目的的数据结构：数组。

关于 MongoDB 架构设计的讨论在您在这里做出的决定中很普遍：[http](http://www.mongodb.org/display/DOCS/Schema+Design) ://www.mongodb.org/display/DOCS/Schema+Design特别是查看“嵌入和链接”部分。

# mercurial - Mercurial：如何从中断的“qpop -a”中恢复？

> ID：10949876
> 
> 赞同：12
> 
> 时间：2012-06-08T13:32:49.143
> 
> 标签：mercurial, mercurial-queue

我已将几个修订导入队列并尝试将它们全部弹出。不幸的是，根据其他一些访问同一存储库的 Mercurial 客户端，`hg qpop -a`没有成功完成：

```
> hg qpop -a
popping 115.diff
popping 114.diff
popping 113.diff
popping 112.diff
popping 111.diff
abort: The process cannot access the file because it is being used by
another process
C:\Program Files (x86)\Mercurial\library.zip\mercurial\dispatch.py:217:
DeprecationWarning: use lock.release instead of del lock 
```

现在我不能再把补丁推回去了。Mercurial 总是抱怨“未知节点”：

```
> hg qpush -a
mq status file refers to unknown node b6fb614866f1
abort: working directory revision is not qtip 
```

这是什么意思？如何解决这个问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-08T13:49:58.667

听起来您的 dirstate 已被失败的操作损坏。`hg`很久以前，邮件列表中报告了一个类似的问题（[链接](http://www.selenic.com/pipermail/mercurial/2008-October/022069.html)）。您应该查看Andreas Wuest的这篇关于恢复过程的[博客文章。](http://andreaswuest.blogspot.com/2009/11/what-to-do-when-your-mercurial-working.html)

它基本上归结为：

```
$ > .hg/patches/status          # force mq to think no patches are applied
$ hg debugrebuildstate -r tip   # rebuild your working copy 
```

这不会破坏您的补丁队列，也不会丢失任何不属于补丁的工作副本更改。但是，您需要仔细检查（并可能修复）文件版本以恢复干净的工作副本。

# html - HAML 丢失了我的标签

> ID：10949877
> 
> 赞同：1
> 
> 时间：2012-06-08T13:32:51.947
> 
> 标签：html, ruby, haml, handlebars.js

我有以下 HAML

```
.x-row-tpl
  %tds {{#parent}}{{name}}{{/parent}}
  %td {{#parent}}{{name}}{{/parent}}
  %p {{#parent}}{{name}}{{/parent}} 
```

它被渲染成 HTML（我的意思是我在浏览器中得到的）：

```
<div class="x-row-tpl">
  <tds>{{#parent}}{{name}}{{/parent}}</tds>
  {{#parent}}{{name}}{{/parent}}
  <p>{{#parent}}{{name}}{{/parent}}</p>
</div> 
```

为什么 HAML`<td>`在渲染时跳过标签？

我什至试图将它包装成`:erb`，但它没有帮助。尝试了不同的标签名称，甚至是无效的标签（如`<tds>`），一切正常，除了`<td>`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:50:37.400

您的 HTML 无效，原因如下：

1.  您的标签名为`<tds>`，这是无效的。应该是`<td>`。

2.  标签唯一有效的`<td>`父元素是`<tr>`.

当有效标签元素位于无效位置时，浏览器可以自由移除或移动标签。当使用无效的标签名称时，浏览器可以自由地做它想做的任何事情——AFAIK 在大多数现代浏览器中它被简单地视为`<div>`.

Always be sure your final HTML passes the [W3C's HTML Validator](http://validator.w3.org/). If it doesn't, you'll liable to get unexpected behavior.

# perl - 验证子进程的 Perl 参数

> ID：10949878
> 
> 赞同：4
> 
> 时间：2012-06-08T13:32:56.163
> 
> 标签：perl, subprocess

所以我是一个初学者 Perl 程序员。我已经使用它大约一个月了，但是仅在上周左右，我才将它用于除了系统管理员类型的任务之外的任何事情。在这样做时，我遇到了以下问题，

Perl 子进程非常灵活，它们不会对您传入的参数施加很多/任何限制。如何强制执行参数的数量和/或检查它们是否是引用、标量等？

为了澄清，这是我目前为 Perl 子进程所做的：

```
sub mySub{
    ($a, $b) = @_;
    continue and use these methods
 } 
```

但这不能保证什么`$a`和`$b`持有。无论如何要确保它们包含值，例如引用 for`$a`和标量 for `$b`？

提前致谢。

编辑：当我说标量时，`$b`我的意思是包含一个整数，而不是对其他数据结构的引用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T13:39:36.900

您可以使用[Params::Validate](http://search.cpan.org/~drolsky/Params-Validate-1.06/lib/Params/Validate.pm)模块，它提供了检查参数列表的广泛可能性。

在你的情况下，像

```
validate_pos(@_, { type => HASHREF | ARRAYREF }, { type => SCALAR }) 
```

会这样做（请注意，它没有“ref”的单一类型）。当参数不匹配时它会死掉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T15:16:39.087

您应该能够使用子例程原型指定它：

有关完整说明，请参阅[http://perldoc.perl.org/perlsub.html#Prototypes](http://perldoc.perl.org/perlsub.html#Prototypes)。

*sub 采用单个标量*

```
sub foo($) {
    my $scalar = shift;
} 
```

*sub 取两个标量*

```
sub bar($$) {
    my ($scalar1, $scalar2) = @_;
} 
```

*子取一个数组*

```
sub baz (+*) {
    my $arrayref = shift;
} 
```

*子取哈希*

```
sub quux (+%) {
    my $hashref = shift;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T13:38:08.747

要检查 $a 是否是 ref，您可以使用

```
if(ref($a)) 
```

要检查它是什么类型的参考，你可以使用

if (ref($a) eq "HASH") { #or ARRAY

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T13:45:04.250

您可以对参数执行测试以查看它们包含的内容。但是，检查标量是否为标量是没有意义的。

```
sub mySub{
    my ($a, $b) = @_;
    if (ref $a eq 'ARRAY') { ... } # check for array ref
    continue and use these methods
 } 
```

诸如此类的变量`$b`已经是标量，并且只能包含标量值。例如，引用是一个标量值。因此，您需要更具体地了解您希望变量包含的内容。

计算参数就像计算任何数组一样简单：

```
sub foo {
    my $n_args = @_;  # array is scalar context returns its size
    if (@_ < 4) {     # same thing
    ...
} 
```

为了验证例如字母数字字符串，您可以执行

```
if ($arg =~ /^[\w\s]+$/) {  # contains only whitespace and alphanumerics 
```

# xml - 在 Excel 中正确映射 xml 架构

> ID：10949882
> 
> 赞同：1
> 
> 时间：2012-06-08T13:33:12.060
> 
> 标签：xml, excel

长期读者，第一次海报。是时候挖掘这个网站的所有知识了！

我正在尝试设置一个 xml 架构并在 excel 中填充数据。我为一些 complexTypes 做了一些定义，因为它们会经常被重用。如果我引用类型，例如 3 次，在 excel 中它只映射一次类型。

我对模式很陌生，但我的老板希望我使用它们。任何其他批评将不胜感激。

XML 架构：

```
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">

<!-- Type Definitions (DoorStyle, Colour, Accessory and TamarackModel) -->

<xsd:complexType name="DoorStyle">
  <xsd:sequence>
    <xsd:element name="style" type="xsd:string"/>
      <xsd:element name="wood" type="xsd:string"/>
    <xsd:element name="colour" type="xsd:string"/>
    <xsd:element name="imgsrc" type="xsd:string"/>
  </xsd:sequence>
</xsd:complexType>

<xsd:complexType name="Colour">
  <xsd:sequence>
    <xsd:element name="colour" type="xsd:string"/>
    <xsd:element name="wood" type="xsd:string"/>
    <xsd:element name="imgsrc" type="xsd:string"/>
  </xsd:sequence>
</xsd:complexType>

<xsd:complexType name="Accessory">
  <xsd:sequence>
    <xsd:element name="pdf" type="xsd:string"/>
  </xsd:sequence>
</xsd:complexType>

<xsd:complexType name="TamarackModel">
  <xsd:sequence>
    <xsd:element name="drawing" type="xsd:string"/>
    <xsd:element name="reverseDrawing" type="xsd:string"/>
    <xsd:element name="priceSheet" type="xsd:string"/>
  </xsd:sequence>
</xsd:complexType>

<!-- Group Definitions (DoorStyles, Colours, Accessories and TamarackModels) -->

<xsd:element name="DoorStyles">
  <xsd:complexType>
<!-- <xsd:attribute name="url" type="xsd:string" fixed="http://www.muskokacabco.com/muskoka-kitchens-gallery-door-styles.html"/> -->
    <xsd:sequence>
      <xsd:element name="DoorStyle" type="DoorStyle"/>
      <xsd:element name="DoorStyle" type="DoorStyle"/>
      <xsd:element name="DoorStyle" type="DoorStyle"/>
    </xsd:sequence>
  </xsd:complexType>
</xsd:element>

<xsd:element name="Colours">
  <xsd:complexType>
<!-- xsd:attribute name="url" type="xsd:string" fixed="http://www.muskokacabco.com/muskoka-kitchens-gallery-stain-colours.html"/> -->
    <xsd:sequence>
      <xsd:element name="Colour" type="Colour"/>
      <xsd:element name="Colour" type="Colour"/>
      <xsd:element name="Colour" type="Colour"/>
    </xsd:sequence>
  </xsd:complexType>
</xsd:element>

<xsd:element name="Accessories">
  <xsd:complexType>
<!-- <xsd:attribute name="url" type="xsd:string" fixed="http://www.muskokacabco.com/muskoka-kitchens-accessories.html"/> -->
    <xsd:sequence>
      <xsd:element name="Accessory" type="Accessory"/>
      <xsd:element name="Accessory" type="Accessory"/>
      <xsd:element name="Accessory" type="Accessory"/>
    </xsd:sequence>
  </xsd:complexType>
</xsd:element>

<xsd:element name="TamarackModels">
  <xsd:complexType>
<!-- <xsd:attribute name="url" type="xsd:string" fixed="http://www.muskokacabco.com/muskoka-kitchens-tamarack-models.html"/> -->
    <xsd:sequence>
      <xsd:element name="TamarackModel" type="TamarackModel"/>
      <xsd:element name="TamarackModel" type="TamarackModel"/>
      <xsd:element name="TamarackModel" type="TamarackModel"/>
    </xsd:sequence>
  </xsd:complexType>
</xsd:element>

<!-- Overall Structure -->

<xsd:element name="MuskokaSite">
<!-- <xsd:attribute name="url" type="xsd:string" fixed="http://www.muskokacabco.com"/> -->
  <xsd:complexType>
    <xsd:sequence>
      <xsd:element ref="DoorStyles"/>
      <xsd:element ref="Colours"/>
      <xsd:element ref="Accessories"/>
      <xsd:element ref="TamarackModels"/>
     </xsd:sequence>
  </xsd:complexType>
</xsd:element>

</xsd:schema> 
```

所以我引用每种类型大约 3 次，但在 excel 中，如果我选择作为 root，它只允许我映射每种类型一次。我很想包括一个截图，但显然新用户不能这样做......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T01:52:52.437

所以显然元素上的“maxOccurs”属性默认为一个。我将它设置为“无界”，它现在可以工作了。

```
 <xsd:group name="DoorStyles">
      <xsd:sequence>
        <xsd:element ref="DoorStyle" maxOccurs="unbounded"/>
      </xsd:sequence>
    </xsd:group> 
```

# android - phonegap 1.7 notificationCallback（此函数 this.sendJavascript(js)）不起作用

> ID：10949884
> 
> 赞同：2
> 
> 时间：2012-06-08T13:33:22.347
> 
> 标签：android, cordova

**对于 Android**，我使用的是 phonegap 1.7(cordova-1.7.0.js)。我正在使用城市飞艇发送推送通知。

当我收到消息时，“notificationCallback”功能没有工作。这是我的代码。

```
 PushNotificationPlugin.java

     package org.minimoesfuerzo.plugins;

     import org.json.JSONArray;
     import org.json.JSONException;
     import org.json.JSONObject;

     import android.util.Log;

     import com.phonegap.api.Plugin;
     import com.phonegap.api.PluginResult;
     import org.apache.cordova.api.PluginResult.Status;

     public class PushNotificationPlugin extends Plugin {
        final static String TAG = PushNotificationPlugin.class.getSimpleName();

    static PushNotificationPlugin instance = null;

    public static final String ACTION = "registerCallback";

    public PushNotificationPlugin() {
        instance = this;
    }

    public static PushNotificationPlugin getInstance() {
        return instance;
    }

    public void sendResultBack(String msg, String payload) {
        JSONObject data = new JSONObject();
        try {
            data.put("msg", msg);
            data.put("payload", payload);
        } catch (JSONException e) {
            Log.e(TAG, e.getMessage());
        }
        String js = String.format("window.plugins.pushNotification.notificationCallback('%s');", data.toString());
        this.sendJavascript(js);
    }

    @Override
    public PluginResult execute(String action, JSONArray data,
            String callbackId) {

        PluginResult result = null;
        if (ACTION.equals(action)) {
            result = new PluginResult(Status.NO_RESULT);
            result.setKeepCallback(false);
        } else {
            Log.d(TAG, "Invalid action: " + action + " passed");
            result = new PluginResult(Status.INVALID_ACTION);
        }
        return result;
    }
} 
```

接收器类

```
 package org.minimoesfuerzo.ua;

     import org.minimoesfuerzo.plugins.PushNotificationPlugin;

     import android.content.BroadcastReceiver;
     import android.content.Context;
     import android.content.Intent;
     import android.util.Log;

     import com.appstockholm.zoud.MainActivity;
     import com.urbanairship.UAirship;
     import com.urbanairship.push.PushManager;

     public class IntentReceiver extends BroadcastReceiver {

    //private static final String TAG = IntentReceiver.class.getSimpleName();
    private static final String TAG = "humayoo";

    @Override
    public void onReceive(Context context, Intent intent) {
        Log.i(TAG, "Received intent: " + intent.toString());
        String action = intent.getAction();

        if (action.equals(PushManager.ACTION_PUSH_RECEIVED)) {
            int id = intent.getIntExtra(PushManager.EXTRA_NOTIFICATION_ID, 0);

            Log.i(TAG, "Received push notification. Alert: " + intent.getStringExtra(PushManager.EXTRA_ALERT)
                + ". Payload: " + intent.getStringExtra(PushManager.EXTRA_STRING_EXTRA) + ". NotificationID="+id);

            String alert = intent.getStringExtra(PushManager.EXTRA_ALERT);
            String extra = intent.getStringExtra(PushManager.EXTRA_STRING_EXTRA);

            PushNotificationPlugin plugin = PushNotificationPlugin.getInstance();
            plugin.sendResultBack(alert, extra);

        } else if (action.equals(PushManager.ACTION_NOTIFICATION_OPENED)) {
            Log.i(TAG, "User clicked notification. Message: " + intent.getStringExtra(PushManager.EXTRA_ALERT)
                    + ". Payload: " + intent.getStringExtra(PushManager.EXTRA_STRING_EXTRA));

            Intent launch = new Intent(Intent.ACTION_MAIN);
            launch.setClass(UAirship.shared().getApplicationContext(), MainActivity.class);
            launch.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

            UAirship.shared().getApplicationContext().startActivity(launch);
            String alert = intent.getStringExtra(PushManager.EXTRA_ALERT);
            String extra = intent.getStringExtra(PushManager.EXTRA_STRING_EXTRA);

            PushNotificationPlugin plugin = PushNotificationPlugin.getInstance();
            plugin.sendResultBack(alert, extra);

        } else if (action.equals(PushManager.ACTION_REGISTRATION_FINISHED)) {
            Log.i(TAG, "Registration complete. APID:" + intent.getStringExtra(PushManager.EXTRA_APID)
                    + ". Valid: " + intent.getBooleanExtra(PushManager.EXTRA_REGISTRATION_VALID, false));
        }
    }
} 
```

Pushnotification.js 文件

```
var PushNotification = {
    registerCallback: function(successCallback, failureCallback) {
        return PhoneGap.exec(
               successCallback,           // called when signature capture is successful
               failureCallback,           // called when signature capture encounters an error
               'PushNotificationPlugin',  // Tell PhoneGap that we want to run "PushNotificationPlugin"
               'registerCallback',        // Tell the plugin the action we want to perform
               []);                       // List of arguments to the plugin
    },
    notificationCallback: function(json) {
        var data = window.JSON.parse(json);
        alert("Success: " +  data.msg);

    }
};

PhoneGap.addConstructor(function() {
    PhoneGap.addPlugin("pushNotification", PushNotification);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:43:48.377

查看我的 1.5+ 或更高版本的插件迁移指南：

[http://simonmacdonald.blogspot.com/2012/04/migrating-your-phonegap-plugins-to.html](http://simonmacdonald.blogspot.com/2012/04/migrating-your-phonegap-plugins-to.html)

另外，您还记得将您的插件行放在 plugins.xml 中吗？

# git - git diff - 在特定情况下可以改变它的行为吗？

> ID：10949886
> 
> 赞同：1
> 
> 时间：2012-06-08T13:33:34.527
> 
> 标签：git, diff

假设我有[这个文件](https://gist.github.com/2895594/6b65e870e9a9dec53a9d1b1037b2c5dcc72a6205)（它很短），并且在开发过程中我将它编辑到[这个文件](https://gist.github.com/2895594/59b76efc9f281966c35b984dc21a93d7c9efff63)中。那么a 的输出`git diff`如下：

```
...
@@ -7,6 +7,12 @@ int main() {
     // 这里有一些代码，实现第 1 节

     /************************************************* ******************************
+ ** 新章节标题 2，带有简短描述
+ ************************************************* *************************/
+
+ // 这里的一些代码介于旧的第 1 和第 2 部分之间
+
+ /****************************************************** ******************************
      ** 部分标题 2，以及另一个简短描述
      ****************************************************** ************************/

```

这对我来说似乎是不可取的，因为它将“此部分已添加”的逻辑更改分解为“此部分已插入此其他部分标题的中间”。我期待这样的事情：

```
...
@@ -7,6 +7,12 @@ int main() {
     // 这里有一些代码，实现第 1 节

+ /****************************************************** ******************************
+ ** 新章节标题 2，带有简短描述
+ ************************************************* *************************/
+
+ // 这里的一些代码介于旧的第 1 和第 2 部分之间
+
     /************************************************* ******************************
      ** 部分标题 2，以及另一个简短描述
      ****************************************************** ************************/

```

是否有选项`diff`可以纠正这个问题（即，如果我正在制作一个补丁，则不必手动进行纠正）？我尝试了一些在 的手册页中列出的其他算法`git diff`，但它们都产生了相同的结果。

我知道 Git 在提交时存储了源树的整个快照（并且`diff`s 是动态生成的），所以最终它不会影响实际内容，但是这样的事情可能会在合并期间导致问题，例如？我认为在某种程度上，我所做的合乎逻辑的改变并没有完全反映在`diff`它产生的结果中，这让我很困扰。

# javascript - dispatchEvent javascript中的所有元素

> ID：10949889
> 
> 赞同：2
> 
> 时间：2012-06-08T13:33:55.587
> 
> 标签：javascript, events

有没有办法调度所有元素？

例如，我们可以这样做`window.dispatchEvent(evt)`，但我想允许所有元素使用该事件。（对于onclick，我们几乎可以使用所有元素）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:37:39.820

```
var evt = document.createEvent("MouseEvents");

evt.initMouseEvent("click", true, true, window,
        0, 0, 0, 0, 0, false, false, false, false, 0, null);

[].forEach.call( document.getElementsByTagName("*"), function(elem){
    elem.dispatchEvent(evt);
}); 
```

# android - android 如何从任务管理器停用应用程序

> ID：10949892
> 
> 赞同：0
> 
> 时间：2012-06-08T13:34:04.253
> 
> 标签：android, taskmanager

我的应用程序有一个警报管理器，所以我想它在任务管理器上仍然处于活动状态。有没有办法在闹钟休眠时从 TaskManager 停用应用程序？

提前感谢您的回答。

塔齐亚诺

# vb.net - VBA 错误 1004 - 范围类的选择方法失败

> ID：10949893
> 
> 赞同：21
> 
> 时间：2012-06-08T13:34:07.377
> 
> 标签：vb.net, excel, excel-2010, powerpoint, vba

第一次发帖，所以如果有任何格式或我未能遵守的准则，请告诉我，以便我修复它。

所以我基本上是在向用户询问excel文件的文件目录，然后我设置了一些变量（最初在公共设置为项目变量，因为这些在其他地方被使用和更改）。我还添加了将这些变量设置为空的行（以防万一，我认为这无关紧要）。然后，我将这些变量设置为我想要访问的 Excel 文件、工作簿和工作表。

```
Dim filepath as String
filePath = CStr(fileDialog)              'ask file dir, set to string
Dim sourceXL As Variant                  'these three were orig project variables
Dim sourceBook As Variant
Dim sourceSheet As Variant
Dim sourceSheetSum As Variant

Set sourceXL = Nothing                    'set to nothing in case...?
Set sourceBook = Nothing
Set sourceSheet = Nothing
Set sourceSheetSum = Nothing

Set sourceXL = Excel.Application          'set to the paths needed
Set sourceBook = sourceXL.Workbooks.Open(filePath)
Set sourceSheet = sourceBook.Sheets("Measurements")
Set sourceSheetSum = sourceBook.Sheets("Analysis Summary")

Dim measName As Variant                    'create variable to access later
Dim partName As Variant

sourceSheetSum.Range("C3").Select           'THIS IS THE PROBLEM LINE

measName = sourceSheetSum.Range(Selection, Selection.End(xlDown)).Value
sourceSheetSum.Range("D3").Select
partName = sourceSheetSum.Range(Selection, Selection.End(xlDown)).Value 
```

所以我创建了两个不同的工作表变量'sourceSheets'和'sourceSheetsSum'，如果我使用'sourceSheets'，代码可以工作，但如果我使用'sourceSheetsSum'，则会出现错误1004。我还尝试了完全删除变量“sourceSheet”的代码，以防由于某种原因覆盖了“sourceSheetSum”。

我相当有信心excel工作簿和工作表存在并且被正确调用，因为我运行了一些代码来循环遍历工作簿中的所有工作表并输出名称，如下所示。

```
For j = 1 To sourceBook.Sheets.Count
Debug.Print (Sheets(j).name)
Next j 
```

随着调试输出

> 测量
> 分析汇总
> 分析设置

那么，有没有人知道这个错误可能意味着什么，或者我如何才能找到更多关于错误实际是什么的信息？

编辑：所以我决定在工作表名称列表中添加一些内容，不确定它是否会有所帮助。

```
For j = 1 To sourceBook.Sheets.Count
    listSheet(j) = Sheets(j).name
Next j    
Debug.Print (listSheet(2))    
Set sourceSheetSum = sourceBook.Sheets(listSheet(2)) 
```

调试打印分析摘要，所以我知道工作表中存在工作表，名称中的“错字”不应该有任何问题。
虽然代码在同一行仍然有相同的错误。

deusxmach1na: 我想你想让我改变

```
Dim sourceXL As Variant                  
Dim sourceBook As Variant
Dim sourceSheet As Variant
Dim sourceSheetSum As Variant

Set sourceSheet = sourceBook.Sheets("Measurements") 
```

到

```
Dim sourceXL As Excel.Application
Dim sourceBook As Excel.Workbook
Dim sourceSheet As Worksheet
Dim sourceSheetSum As Worksheet

Set sourceSheet = sourceBook.Worksheets("Measurements") 
```

但这并没有改变错误，我记得我有类似的错误，然后改变了它，因为我读到那个变体就像一个包罗万象的东西，实际上并没有那么确定变体是什么。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-08T16:12:53.293

您必须先选择工作表，然后才能选择范围。

我已经简化了示例以隔离问题。试试这个：

```
Option Explicit

Sub RangeError()

    Dim sourceBook As Workbook
    Dim sourceSheet As Worksheet
    Dim sourceSheetSum As Worksheet

    Set sourceBook = ActiveWorkbook
    Set sourceSheet = sourceBook.Sheets("Sheet1")
    Set sourceSheetSum = sourceBook.Sheets("Sheet2")

    sourceSheetSum.Select

    sourceSheetSum.Range("C3").Select           'THIS IS THE PROBLEM LINE

End Sub 
```

将 Sheet1 和 Sheet2 替换为您的工作表名称。

**重要提示：**使用变体是危险的，并且可能导致难以杀死的错误。仅当您有非常具体的原因时才使用它们。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-08T16:13:06.283

如果没有先选择它所在的工作表，则无法选择范围。尝试先选择工作表，看看是否仍然遇到问题：

```
sourceSheetSum.Select
sourceSheetSum.Range("C3").Select 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-08T17:23:49.673

assylias 和餐饮主管已经向您说明了错误发生的原因。

`Select`现在关于你在做什么，据我了解，你根本不需要使用

我猜您是从 VBA PowerPoint 执行此操作的？如果是，那么您的代码将被重写为

```
Dim sourceXL As Object, sourceBook As Object
Dim sourceSheet As Object, sourceSheetSum As Object
Dim lRow As Long
Dim measName As Variant, partName As Variant
Dim filepath As String

filepath = CStr(FileDialog)

'~~> Establish an EXCEL application object
On Error Resume Next
Set sourceXL = GetObject(, "Excel.Application")

'~~> If not found then create new instance
If Err.Number <> 0 Then
    Set sourceXL = CreateObject("Excel.Application")
End If
Err.Clear
On Error GoTo 0

Set sourceBook = sourceXL.Workbooks.Open(filepath)
Set sourceSheet = sourceBook.Sheets("Measurements")
Set sourceSheetSum = sourceBook.Sheets("Analysis Summary")

lRow = sourceSheetSum.Range("C" & sourceSheetSum.Rows.Count).End(xlUp).Row
measName = sourceSheetSum.Range("C3:C" & lRow)

lRow = sourceSheetSum.Range("D" & sourceSheetSum.Rows.Count).End(xlUp).Row
partName = sourceSheetSum.Range("D3:D" & lRow) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-11-20T15:58:34.733

在副本对我有用之前删除范围选择。感谢您的帖子。

# c# - 如何将 IList 转换回 List 在 BindingSource 中？

> ID：10949896
> 
> 赞同：2
> 
> 时间：2012-06-08T13:34:12.003
> 
> 标签：c#

```
 BindingSource source = new BindingSource();
    source.Add(new List<string>() { "1", "2", "3" });

     //List<string> theList = source.List;//compile fail.  Can't convert from IList to List<T> implicity
     List<string> theList = source.List as List<string>;//fail, null 
```

我在网上看到人们创建了一种执行显式转换的方法。对于这项任务，这似乎完全是矫枉过正。有没有更好的方法来取回我的清单？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T13:39:08.447

您正在添加 a`List<T>`作为列表中的第一项。

要检索它，你会写

```
(List<string>) source.List[0]; 
```

* * *

如果您`List<T>`通过设置`DataSource`属性实际绑定到 a，您的代码将起作用。

# string - Coq 中的函数

> ID：10949902
> 
> 赞同：0
> 
> 时间：2012-06-08T13:34:37.050
> 
> 标签：string, function, coq, definitions

我必须证明一些正式的东西。有两个函数，获取一些字符串和字符串数组，比较是否匹配，并返回 bool。我想在引理中测试它们，并验证它。在编程中，函数如下所示。

```
 // Countryname is a country in the set (World) of all countries of the World.
 // Europe, is a subset of the set of all countries of the Wrold.

 function1 ( String Countryname, String[] Europe)   // function1() returns bool.
  {
    boolean result = false;

    if Countryname = = ' '
      result true;
    else 
       {
        for ( int i = 0; i < sizeof(Europe) ; i++) {
            if ( Countryname = = Europe[i] )
                          result true; 
                          break;
        }
       }

    return result1;
  }

 // function2() compares similarly getting a 'Name' of type string, and an array of 'Students' names. If name is empty, or it matchs a name 
    in the list of students, it should return true.

 function2 ()           // function2() returns bool.
{
...

} 
```

我想在 Coq 中声明一个引理，如果两个函数都返回 true 并证明它，它应该为 true。喜欢

```
Lemma Test : function1 /\ function2. 
```

问题：

1）如何定义这些功能？这些不是归纳函数或递归函数（我认为）。他们应该像以下或任何其他选项吗？

```
Definition function1 ( c e : World ) : bool :=
 match c with 
 | empty => true                    // I dont know how to represent empty.
 | e => true
 end. 
```

2）如何处理子集？比如我该如何处理世界和欧洲的一组国家？请记住，我的要求是该函数获取一个名称和一个字符串数组。

3）Countryname、World、Name、Student这四个元素的类型应该是什么？

我很想获得帮助我在 Coq 中解决此类问题的材料的参考。

谢谢，

维拉亚特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:42:56.710

Coq在其标准库中有[字符串](http://coq.inria.fr/stdlib/Coq.Strings.String.html)和[集合。](http://coq.inria.fr/stdlib/Coq.FSets.FSetInterface.html)

你`function1`真的只是一个包装器，当是空字符串`mem`时返回 true 。`c`你`function2`似乎完全一样，我不确定你为什么首先写了第二个函数......这可能是一个可能的 Coq 等价物：

```
Definition my_compare (s: string) (set: StringSet.t) :=
  (string_dec s "") || (StringSet.mem s set). 
```

您可以使用以下类型：

```
Module StringOT <: OrderedType.
  Definition t := string.
  Definition eq := @eq t.
  Definition lt : t -> t -> Prop := (* TODO *).
  Definition eq_refl := @refl_equal t.
  Definition eq_sym := @sym_eq t.
  Definition eq_trans := @trans_eq t.
  Theorem lt_trans : forall x y z : t, lt x y -> lt y z -> lt x z.
  Proof. (* TODO *) Admitted.
  Theorem lt_not_eq : forall x y : t, lt x y -> ~ eq x y.
  Proof. (* TODO *) Admitted.
  Definition compare : forall x y : t, Compare lt eq x y := (* TODO *).
  Definition eq_dec := string_dec.
End StringOT.

Module StringSet := FSetAVL.Make(StringOT) 
```

我找不到 stdlib 中定义的字符串的顺序。也许有一些。否则......好吧，就这样做（也许贡献它）。

显然，可能有更好的方法来做到这一点。我不确定是否有更快/更脏的方法。也许有一个缓慢的集合实现，你只需要某个地方的可判定相等性。

祝你好运。

# java - 将 Apache HttpClient 与 Twitter 流 API 响应问题一起使用

> ID：10949903
> 
> 赞同：1
> 
> 时间：2012-06-08T13:34:37.407
> 
> 标签：java, twitter, streaming, apache-httpclient-4.x, apache-httpcomponents

所以我决定试一试 Twitter Streaming api，所以我去了 twitter 开发页面并创建了一个测试应用程序，生成了我的 oAuth 令牌，然后我在终端中使用 curl 命令尝试了它，我得到了流很好，但是后来我决定尝试编写一小段java代码片段来做同样的事情，然后我遇到了问题。

下面是我的代码，我已经删除了我的令牌和授权码，用 * 而不是真实的。

```
public final static void main(String[] args) throws Exception {

    HttpClient httpclient = new DefaultHttpClient();

    try {
        HttpPost post = new HttpPost(
                "https://stream.twitter.com/1/statuses/sample.json");
        final String header = "OAuth oauth_consumer_key=\"********\", oauth_nonce=\"*******", oauth_signature=\"**************", oauth_signature_method=\"HMAC-SHA1\", oauth_timestamp=\"1339160825\", oauth_token=\"*********", oauth_version=\"1.0\"";
        final String headerTitle = "Authorization";
        post.addHeader(headerTitle, header);
        ResponseHandler<String> responseHandler = new BasicResponseHandler();
        String responseBody = httpclient.execute(post, responseHandler);
        System.out.println("----------------------------------------");
        System.out.println(responseBody);
        System.out.println("----------------------------------------");
    } catch (HttpResponseException e) {
        System.out.println("Reponse status code: " + e.getStatusCode()
                + "\n");
        e.printStackTrace();
        httpclient.getConnectionManager().shutdown();
    }
} 
```

我还删除了导入行。

我不断收到 401 响应，可能是我对标题做错了。

先感谢您。

# jasper-reports - 动态 jasper osgi 包

> ID：10949904
> 
> 赞同：2
> 
> 时间：2012-06-08T13:34:38.507
> 
> 标签：jasper-reports, osgi, dynamic-jasper, eclipse-virgo

我正在尝试在 osgi 环境（ Virgo ）中使用*DynamicJasper*，我没有找到一个 osgied *DynamicJasper*包，当我尝试使用包含*JasperReports*和*DynamicJasper**的 maven-bundle-plugin*自己创建一个时，我不断收到此错误：

 **```
d:\virgo\DynamicReport_1339161554051_414506.java:4: package net.sf.jasperreports.engine does not exist
import net.sf.jasperreports.engine.*;

d:\virgo\DynamicReport_1339161554051_414506.java:5: package net.sf.jasperreports.engine.fill does not exist
import net.sf.jasperreports.engine.fill.*;

d:\virgo\DynamicReport_1339161554051_414506.java:18: cannot find symbol
symbol: class JREvaluator
public class DynamicReport_1339161554051_414506 extends JREvaluator 
```

在某处的开放存储库中是否有现有的*DynamicJasper捆绑包？*有没有人成功地创建了这样一个捆绑包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:13:44.907

通过添加解决：

导入包：com.springsource.org.apache.commons.digester;version="[1.8.0,2.0.0)"**

# ios - Kal 和其他 1 个项目的工作区将无法构建（i386 的未定义符号）

> ID：10949918
> 
> 赞同：0
> 
> 时间：2012-06-08T13:36:21.410
> 
> 标签：ios, xcode4, workspace

我有一个使用 XCode4 和 Storyboards 的 iPad 应用程序，它有一个 Tab Bar 控制器和两个 UIViews（其中一个是 KalCalendarController），都在一个工作区中。我已将 Kal 添加到其中，所以现在我在工作区中有两个项目。当我添加 Kal 文档中的 2 行示例代码时，我收到此错误：

```
 Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_KalViewController", referenced from:
      objc-class-ref in KalCalendarController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

这是两行代码：

```
KalViewController *calendar = [[KalViewController alloc] init];
[self.navigationController pushViewController: calendar animated:YES]; 
```

我已经查看了几乎所有关于“未找到符号...”的 SO 问题，但没有一个适用于这种特殊情况。我能够让 Kal 示例工作，但不能在工作区中工作。我检查了链接器设置，它们似乎是正确的。我还应该在哪里检查来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T15:09:26.707

假设您已正确链接并包含框架/库，一个问题可能是 Kal 项目的目标设置未在“构建设置”选项卡下的体系结构设置中包含正确的平台。

根据您上面的第一条评论，您也可能根本没有链接/包含 Kal。仅将其拖入工作区是不够的。您需要从主应用程序链接到它（您可以在应用程序目标设置的摘要选项卡下执行此操作）。

这依赖于 Xcode 对依赖项的“自动”检测，这并不总是像宣传的那样工作。在这种情况下，您可能需要在主应用程序的方案中关闭自动依赖项，并在方案的构建设置下手动设置依赖项，以便首先构建 Kal，然后是您的应用程序。

# html - IE8的开发工具浏览器和文档模式和使用IE7一样吗

> ID：10949920
> 
> 赞同：0
> 
> 时间：2012-06-08T13:36:38.117
> 
> 标签：html, internet-explorer, internet-explorer-8, internet-explorer-7

在 Internet Explorer 8 中，当我打开开发工具窗口 (F12) 时，它为您提供了更改浏览器模式和文档模式的选项。我需要测试一些脚本，看看它们在我的客户端运行的 IE 7 中是否可以正常运行，但我的机器上只有 IE 8。

如果我将浏览器模式设置为 IE 7 以及文档模式的 IE 7 标准，这是否与我在 IE 7 浏览器中打开页面**完全相同？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:49:15.123

除非您真正使用 IE7，否则一切都不会**完全相同。**然而，这些差异非常微不足道，而且通常非常低级或非常具体，以至于 99% 的用户（甚至开发人员）永远不会注意到或面对它们。

但是，您可能还想安装[此工具](http://www.my-debugbar.com/wiki/IETester/HomePage)。将所有这些 IE-s 放在一个地方进行测试很方便。

# javascript - 我不想支持在 asp.net mvc web/intranet 应用程序中关闭的 javascript

> ID：10949923
> 
> 赞同：1
> 
> 时间：2012-06-08T13:36:47.347
> 
> 标签：javascript, asp.net-mvc, intranet

我正在做一个仅使用 ajax 请求的 Web 应用程序。

如果有用户在关闭 javascript 的情况下尝试我的应用程序，应该会有一个很好的错误消息。

当请求进入服务器时，应该自动进行 IsAjaxRequest() 检查，如果没有向用户显示一般的 error.cshtml 页面。

如何以通用方式为每个操作执行此操作，并且我不必在控制器的每个操作中手动调用此检查？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T13:42:00.067

```
<head>
    ...
    <noscript>
        <meta http-equiv="refresh" content="0;URL='http://example.com/enablejs.php'">
    </noscript>
    ...
</head> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T13:40:01.397

```
<noscript>
This web app does not work with JavaScript turned off.
</noscript> 
```

为什么还要让他们与应用程序交互？只需以这种方式向他们显示一条消息。

# extjs3 - Extjs 文件中的错误

> ID：10949924
> 
> 赞同：0
> 
> 时间：2012-06-08T13:36:49.340
> 
> 标签：extjs3

以下是我抛出错误的代码，例如“消息：'Ext.ux.form.DateTime' 为空或不是对象”。

```
this.DateTime=new Ext.ux.form.DateTime(
{ 
  format: 'm/d/Y h:i:s A',listeners:{
  select:function(){                            
 }} }); 
```

我对 extjs 真的不太了解。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T14:41:00.983

您使用的`Ext.ux.form.DateTime`是用户扩展组件，不包含在标准`ext-all.js`或`ext-all-debug.js`. 如果要使用该组件，则需要将定义的 js 添加到项目中。你会在examples/ux .. 或类似的东西下的ext-js 包中找到它

# php - Dailymotion API 请求返回空白结果

> ID：10949927
> 
> 赞同：0
> 
> 时间：2012-06-08T13:37:03.623
> 
> 标签：php, json, api, curl

我正在使用以下代码来检索视频 ID、标题、缩略图、持续时间和标签。

```
$dailymotion = "https://api.dailymotion.com/video/xreczc?fields=title,duration,thumbnail_url,id,tags";
$curl = curl_init($dailymotion);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
$return = curl_exec($curl);
curl_close($curl);
$results = json_decode($return, true);
print_r($results); 
```

但是它返回空/空白页。我在我的本地主机上使用它有什么问题？我可以直接在浏览器中调用[https://api.dailymotion.com/video/xreczc?fields=title,duration,thumbnail_url,id,tags并且它可以工作。](https://api.dailymotion.com/video/xreczc?fields=title,duration,thumbnail_url,id,tags)

有什么帮助或想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:48:35.123

请试试这个。

```
$dailymotion = file_get_contents("https://api.dailymotion.com/video/xreczc?fields=title,duration,thumbnail_url,id,tags");

$results = json_decode($dailymotion, true);

print_r($results); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:56:00.323

您正在尝试通过已知问题的 curl 获取 https 链接。请参阅以下链接以查看它们是否对您的问题有所帮助。

[无法使用 cURL 连接到 HTTPS 站点。而是返回 0 长度的内容。我能做些什么？](https://stackoverflow.com/questions/316099/cant-connect-to-https-site-using-curl-returns-0-length-content-instead-what-c)

[http://unitstep.net/blog/2009/05/05/using-curl-in-php-to-access-https-ssltls-protected-sites/](http://unitstep.net/blog/2009/05/05/using-curl-in-php-to-access-https-ssltls-protected-sites/)

问候，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T17:10:56.570

这段代码似乎可以修复它。

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "https://api.dailymotion.com/video/".$id."?fields=id,title,thumbnail_url,tags,duration,embed_url");
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_TIMEOUT, 20);
$results = curl_exec($ch);
curl_close($ch);
$results = json_decode($results);
if (!$results || $results->error->code) {
    return false;
} else {
    return $results;
} 
```

# .net - 如何更改当前行的 BackgroundColor？

> ID：10949933
> 
> 赞同：0
> 
> 时间：2012-06-08T13:37:17.293
> 
> 标签：.net, wpf, datagrid, devexpress, background-color

我正在评估 DeveloperExpress WPF 控件。如何更改`BackgroundColor`DevExpress 的当前行`GridControl`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T19:00:39.480

我同意 Marc 的观点，一般来说，找到第 3 方控件解决方案的最佳位置是他们的文档和论坛；这是来自 devexpress 论坛帖子的代码片段 -

```
<Window x:Class="DXGrid_ChangeRowAppearance.Window1" 
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
        xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid" 
        Title="Window1" Height="300" Width="505">
    <Window.Resources>
        <Style x:Key="SelectedRowStyle" TargetType="{x:Type dxg:GridRowContent}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding Path=IsSelected}" Value="True">
                    <Setter Property="Background" Value="Gray" />
                    <Setter Property="Foreground" Value="White" />
                </DataTrigger>
                <Trigger Property="dxg:GridViewBase.IsFocusedRow" Value="True">
                    <Setter Property="Background" Value="Red" />
                    <Setter Property="Foreground" Value="White" />
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>
    <Grid>
        <dxg:GridControl x:Name="grid" AutoPopulateColumns="True">
            <dxg:GridControl.View>
                <dxg:TableView AutoWidth="True" MultiSelectMode="Row" 
                     ShowGroupPanel="False" 
                     AllowGrouping="False" 
                     RowStyle="{StaticResource SelectedRowStyle}">
                </dxg:TableView>
            </dxg:GridControl.View>
        </dxg:GridControl>
    </Grid>
</Window> 
```

[http://www.devexpress.com/Support/Center/p/E2066.aspx](http://www.devexpress.com/Support/Center/p/E2066.aspx)

我认为这里的关键是`Property="dxg:GridViewBase.IsFocusedRow"`在触发器中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T17:48:56.067

也许之前的[这篇](https://stackoverflow.com/questions/5716606/how-to-change-the-color-of-selected-row-in-devexpressgrid)文章会对你有所帮助。

此外，我强烈建议在[这里](http://documentation.devexpress.com/#WindowsForms/clsDevExpressXtraGridGridControltopic)查看 devexpress 在线文档。

您也可以在 DevExpress 网站上搜索官方论坛。有很多人面临同样的问题。

希望能有所帮助。

# asp.net - 如何从 Javascript 调用控制器方法

> ID：10949937
> 
> 赞同：6
> 
> 时间：2012-06-08T13:37:27.830
> 
> 标签：asp.net, .net, asp.net-mvc-3

我在表格中显示一堆电影，我最终通过隐藏 div 的 Javascript 删除每部电影。

我现在也想从数据库中删除电影，那么从 Javascript 调用控制器方法的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T13:51:45.327

有一个**HTTPPost**操作方法可以在你的`movie`控制器中删除

```
[HttpPost]
public ActionResult Delete(int id)
{
  try
  {
    repo.DeleteMovie(id);
    return "deleted"
  }
  catch(Exception ex)
  {
    //Log errror
  }
  return "failed";
} 
```

在你看来，

```
<a href="#" data-movieId="34" class="movie">Delete Avengers</a>
<a href="#" data-movieId="35" class="movie">Delete Iron Man</a>
<script type="text/javascript">
$(function(){

   $(".movie").click(function(e){
     e.preventDefault();
     $.post("@Url.Action("Delete","Movie")", { id : $(this).data("movieId")} ,function(data){
        alert(data);
     });
   });
});

</script> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T13:45:06.383

根据您的代码，它可能很简单：

```
$.post("/controller/method" + id); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T13:56:36.360

**试试这个：（使用 jQuery Ajax）**

```
$("#DeleteButtonID").on("click", function() {
    $.ajax(
    {
        type: "POST",
        page: 1,
        rp: 6,
        url: '@Url.Action("PopulateDataListWithHeader", "DataList")' + "?id=" + YOURID,
        dataType: "json",
        success: function(result) {

        },
        error: function(x, e) {

        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-11T10:13:18.033

尝试这个，

```
function (){
   var url = '@Url.Action("SearchReoccurence", "SearchReoccurence", new { errormessage = "__msg__" })';
} 
```

# .htaccess - .htaccess 重定向到 Verio windows 服务器上的子目录

> ID：10949939
> 
> 赞同：0
> 
> 时间：2012-06-08T13:37:36.310
> 
> 标签：.htaccess, iis, windows-server-2003, isapi-rewrite

我一直在尝试使用 Verio windows server 2003 gold 在我的工作服务器上运行一个网站，但它们在帮助我方面毫无用处。

我要做的就是设置一个 Wordpress 安装，他们显然需要在一个子目录中。这完成了，我在 domain.com/wp 中准备好了。在这一点上，他们建议我使用 .htaccess 文件重定向到该 url，因为他们只是给我发送了一个“关于 .htaccess”的链接，这没有任何帮助。

做了一些搜索，发现了几个像这样的选项： [http](http://www.site5.com/blog/apache/htaccess/redirect-to-blog/20090427/) ://www.site5.com/blog/apache/htaccess/redirect-to-blog/20090427/ 我使用的任何东西似乎都不起作用，即使是直接重定向. 只是给我一个“目录列表被拒绝 - 此虚拟目录不允许列出内容。”

我想提一下，我确实通过控制面板中的 ISAPI_Rewrite 3 为 IIS 启用了 URL 重写。

正如我提到的 Verio 支持是无用的，我似乎找不到任何似乎有助于我的情况的搜索。

所以几乎我需要的是 domain.com/wp 重写为 domain.com 所以所有以它为中心的链接都做同样的事情（即 domain.com/about domain.com/contact）

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-09T18:08:15.640

如果我理解你是正确的，你需要你的 Wordpress 应用程序可以从你的网站的根目录而不是 /wp/ 文件夹中使用？然后请尝试以下.htaccess：

```
RewriteEngine on
RewriteRule ^(?!wp/)(.*) /wp/$1 [NC] 
```

顺便说一句，我认为您可以尝试简单地将 /wp/ 文件夹内容复制到根文件夹。

# java - 通过 javax.inject.Provider 进行 Spring 注入太慢了

> ID：10949942
> 
> 赞同：1
> 
> 时间：2012-06-08T13:37:39.853
> 
> 标签：java, spring, spring-mvc, dependency-injection

我们在大型 Web 应用程序中使用 Spring 依赖注入。有些服务必须处理请求或会话数据，我们使用这样的`javax.inject.Provider`接口实现它（我们使用构造函数注入，但在本例中，我将提供程序直接注入到字段中，因此示例更短）：

```
@Service
public class SomeService()
{
    @Autowired
    public Provider<Data> dataProvider;

    public void doSomething()
    {
        Data data = this.dataProvider().get()

        ...Do something with the request...
    }
} 
```

在这个例子`Data`中是一些会话范围的数据。服务本身是一个单例。

现在的问题是`dataProvider.get()`通话**太慢**了。它需要几秒钟才能完成。我调试了调用，发现时间在方法的某个地方被烧掉了`DefaultListableBeanFactory.getBeanNamesForType`。在此方法中，获取所有 bean 定义名称的列表（其中包含 1000 多个名称（我们有很多控制器、DAO 和服务......）并迭代以找到要注入的 bean。

如果它那么慢，这几乎没有用。我很震惊我们已经有这么多的 Spring bean，但是没有办法提高`javax.inject.provider`东西的查找速度或解决这种注入的好方法吗？也许有一些方法可以定义我们自己的提供者实现，Spring 可以注入这样它不会在每次`Provider.get()`调用该方法时都搜索匹配的 bean？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:44:22.670

的性能`DefaultListableBeanFactory.getBeanNamesForType`作为一个问题提出并已在 Spring 3.2 中修复。

问题在[这里](https://jira.springsource.org/browse/SPR-6870)

您可以尝试 3.2 M1 看看它是否可以改善这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-12T23:27:28.347

7 年后，Provider<> 注入仍然很慢。有关可能的解决方法，请参阅[Provider<String> 的 Spring 注入速度很慢](https://stackoverflow.com/questions/57915585/spring-injection-of-providerstring-is-slow/57915586#57915586)。

# macos - 在 mamp 上使用 imagemagick 时出错

> ID：10949943
> 
> 赞同：0
> 
> 时间：2012-06-08T13:37:40.680
> 
> 标签：macos, imagemagick, mamp

我正在尝试将pdf转换为jpeg。所以我创建了一个 bash 文件：

```
#!/bin/sh
/usr/local/bin/convert "ODR20120641.pdf" "document.jpg" 2>&1 
```

但我收到了这个错误信息：

```
convert: missing an image filename `document.jpg' @ error/convert.c/ConvertImageCommand/3015. 
```

我在狮子上，我使用自制软件安装了 imagemagick。当我在终端中运行此命令时，一切正常。但是当我使用php时，它失败了：

```
$return = exec('./generate');
var_dump($return); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T14:23:29.617

由于您可以访问 php，如果您直接使用 exec 运行代码会发生什么？该错误可能与 document.jpg 无关，而是与查找或修改 pdf 文件有关。

```
$array=array(); 
echo "<pre>"; 
exec("/usr/local/bin/convert ODR20120641.pdf document.jpg 2>&1", $array);  
echo "<br>".print_r($array)."<br>";  
echo "</pre>"; 
```

# actionscript-3 - 如何将纹理应用于透明 png？动作脚本3

> ID：10949949
> 
> 赞同：0
> 
> 时间：2012-06-08T13:37:52.800
> 
> 标签：actionscript-3, flash, apache-flex, flash-builder

我想将纹理应用于透明 png（位图），但我不想包含透明区域。纹理将仅覆盖不透明的一面。我的png也是3D的。图片如下所示。颜色变换可以很好地改变不透明的一面，但我不知道如何改变纹理。
就是这样的代码；

```
var ss:Sprite=new Sprite();
ss.graphics.beginBitmapFill(exampleModel);
ss.graphics.drawRect(0, 0, 200, 200);
ss.graphics.endFill();

container.addChild(ss); 
```

我怎样才能做到这一点？谢谢。

![在此处输入图像描述](../Images/67a17206da6e86885acf92a67166840c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T12:01:10.863

我个人认为这个工作/问题会更好地处理 BitmapData 类。例如，编写一个算法循环遍历所有图像像素，使用 getPixel() 查看像素是否透明，然后使用 setPixel() 填充图像像素（如果适用）。使用 bitmapdata 类也将允许一些灵活性，例如选择在“填充”目标图像时使用图像的哪个部分。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:24:23.567

这行得通。

```
private function createHitArea(bitmapData:BitmapData, grainSize:uint=1):Sprite{
    var _hitarea:Sprite = new Sprite();
    _hitarea.graphics.beginFill(0x000000, 1.0);         
    for(var x:uint=0;x<bitmapData.width;x+=grainSize) {
        for(var y:uint=grainSize;y<bitmapData.height;y+=grainSize) {                    
            if(x<=bitmapData.width && y<=bitmapData.height && bitmapData.getPixel(x,y)!=0) {
                _hitarea.graphics.drawRect(x,y,grainSize,grainSize);                        
            }                   
        }
    }           
    _hitarea.graphics.endFill();                        
    return _hitarea;
} 
```

来源：[http ://www.webverwirklichung.com/en/blog/programming/flex/creating-hitarea-png-image-transparent-alpha-regions-flex](http://www.webverwirklichung.com/en/blog/programming/flex/creating-hitarea-png-image-transparent-alpha-regions-flex)

# resharper - 如何从模板中删除用户类别？

> ID：10949950
> 
> 赞同：24
> 
> 时间：2012-06-08T13:37:53.117
> 
> 标签：resharper, resharper-6.0, resharper-7.0

如何从 Resharper 实时模板中删除用户类别？当只选择一个类别（而不是模板本身）时，删除按钮被禁用：

![Resharper 实时模板](../Images/c2743278ea6cf10cd3ddb4969dc1767f.png)

这些项目都没有提供上下文菜单，并且编辑模板不提供任何编辑其类别的方法。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-11T10:31:24.573

来自[JetBrains 问题跟踪器](http://youtrack.jetbrains.com/issue/RSRP-287973)：

> 有一种方法。
> 
> 您只需选择该类别，然后将模板拖到“全部”类别。

（我觉得我还必须引用用户评论：

> 您的解决方案有效，但根本不直观。

相当。）

# linq-to-xml - LINQ to XML 中的内部选择

> ID：10949953
> 
> 赞同：1
> 
> 时间：2012-06-08T13:38:06.793
> 
> 标签：linq-to-xml

我有以下 XML：

```
<projects>
    <project>
        <name>Super 1</name>
        <types>
            <type>Art</type>
            <type>Retro</type>
        </types>
    </project>
    <project>
        <name>Super 2</name>
        <types>
            <type>Retro</type>
        </types>
    </project>
</projects> 
```

我需要实现`SelectProjectsOfType(string type)`方法。它应该返回所有具有给定类型`<project>`的`XElement`s，这些类型被列为它们的内部集合`<type>`之一。`<types>`所以我需要先分析每个元素中的类型，如果存在搜索中的类型，则选择整个项目节点。如何在使用[LINQ](http://en.wikipedia.org/wiki/Language_Integrated_Query)时优雅地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:45:25.730

```
XElement projects = ...;
string searchTerm = "some-type-of-project";

var result = projects.Descendents("project").Where(
  p => p.Descendents("type").Any(t => t.Value == searchTerm)
); 
```

# php - 小屋预订的可用日期

> ID：10949955
> 
> 赞同：0
> 
> 时间：2012-06-08T13:38:11.877
> 
> 标签：php, mysql

我正在使用我的第三个解决方案，它们都产生了与租赁系统中的所有小屋相同的结果。

应该只展示可用且未被预订或封锁的小屋。

我对这些查询做错了吗？

[可预订日期和预订](https://stackoverflow.com/questions/6403681/how-to-get-available-dates-with-reservations)日期 [范围](https://stackoverflow.com/questions/3394723/need-updation-for-mysql-query-for-choosing-date-range-for-reservation-of-a-hotel)

**从日期范围查询一以进行预订**

```
SELECT *
FROM `rentals`
WHERE `rental_id` NOT IN (
  SELECT `rental_id`
  FROM `reservation_dates`
  WHERE `end_date` >= $start AND `start_date` <= $end
) 
```

**从有保留的可用日期查询两个**

```
SELECT *
FROM `rentals`
LEFT JOIN `reservation_dates` ON `reservation_dates.rental_id` = `rentals.rental_id`
WHERE (((`reservation_dates.end_date` NOT between $start AND $end) AND
  (`reservation_dates.start_date` NOT between $start AND $end)) OR
  (`reservation_dates.reservation_id` IS NULL)
) 
```

这是我的三张桌子。Rentals 包含所有小屋和详细信息，reservation_dates 用于预订和预订日期，blocked_date 是一个额外的表格，用于阻止无法预订的日期。我已经开始连接前两张桌子，当它应该只是抓住可用的时候，我得到了所有的小屋。看起来预订被忽略了。

```
Table 'rentals'
rental_id int

Table 'reservation_dates'
reservation_id int
rental_id int
start_date date
end_date date

Table 'blocked_dates'
blocked_id int
rental_id int
date_from date
date_to date 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:43:41.583

我刚刚发现问题出在哪里。基于其他解决方案，我遵循了他们的查询。当我将查询更改为以下布局时，它起作用了。

```
SELECT *
FROM `rentals`
WHERE `rental_id` NOT IN (
  SELECT `rental_id`
  FROM `reservation_dates`
  WHERE `end_date` >= '".addslashes($date)."' AND `start_date` <= '".addslashes($end)."'
) 
```

$date 和 $end 被忽略。

# mysql - 如何在 MySQL 中将 utf8_general_ci 更改或转换为二进制？

> ID：10949959
> 
> 赞同：1
> 
> 时间：2012-06-08T13:38:23.270
> 
> 标签：mysql, character-encoding, mediawiki, collation

当我测试 MediaWiki 的新版本（1.20wmf4）时，我看到（参见：[屏幕截图](http://i.imgur.com/jdy7i.png)）以下关于数据库字符集的消息：

> 在**二进制模式下**，MediaWiki 将 UTF-8 文本以二进制字段的形式存储到数据库中。**这比 MySQL 的 UTF-8 模式更有效**，并且允许您使用全范围的 Unicode 字符。
> 
> 在**UTF-8 模式下**，MySQL 会知道你的数据在什么字符集中，并且可以适当地呈现和转换它，但它不会让你在基本多语言平面之上存储字符。

我在 MediaWiki 引擎上有我自己的 Wiki，但我的表格带有`utf8_general_ci`排序规则。我的问题是：**如何在现有数据库`utf8_general_ci`中轻松更改排序规则？`binary`**

我的 MediaWiki 版本：1.19.0
我的 MySQL 信息：

*   服务器：通过 UNIX 套接字的 localhost
*   服务器版本：5.1.52
*   协议版本：10
*   MySQL 字符集：UTF-8 Unicode (utf8)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T14:06:40.183

不久前我不得不做类似的事情并按照这里的说明进行操作：[http](http://www.mediawiki.org/wiki/Manual:Backing_up_a_wiki#Latin-1_to_UTF-8_conversion) ://www.mediawiki.org/wiki/Manual:Backing_up_a_wiki#Latin-1_to_UTF-8_conversion 。您基本上必须导出数据库，在导出的 SQL 中替换`utf8_general_ci`为`binary`，然后再次导入数据库。这些说明中的 sed 行不太正确，但您也可以手动编辑转储的 SQL 文件并修复`utf8_general_ci`.

# java - 群发短信未发送给所有人

> ID：10949965
> 
> 赞同：0
> 
> 时间：2012-06-08T13:38:54.267
> 
> 标签：java, android

我有一个程序可以根据我按下的按钮发送预定义的消息。它在我的旧手机 (OG Evo) 上运行良好，但只会发送给我的新手机 (Evo LTE) 上的前 14 个人。

我拉了一个 LogCat 并一遍又一遍地看到这段代码：

```
06-06 11:25:34.850: W/MessageQueue(28308): null sending message to a Handler on a dead thread
06-06 11:25:34.850: W/MessageQueue(28308): java.lang.RuntimeException: null sending message to a Handler on a dead thread
06-06 11:25:34.850: W/MessageQueue(28308):  at android.os.MessageQueue.enqueueMessage(MessageQueue.java:200)
06-06 11:25:34.850: W/MessageQueue(28308):  at android.os.Looper.quit(Looper.java:245)
06-06 11:25:34.850: W/MessageQueue(28308):  at android.os.HandlerThread.quit(HandlerThread.java:96)
06-06 11:25:34.850: W/MessageQueue(28308):  at com.htc.usage.service.UsageStatsService.onDestroy(UsageStatsService.java:197)
06-06 11:25:34.850: W/MessageQueue(28308):  at android.app.ActivityThread.handleStopService(ActivityThread.java:2762)
06-06 11:25:34.850: W/MessageQueue(28308):  at android.app.ActivityThread.access$2000(ActivityThread.java:139)
06-06 11:25:34.850: W/MessageQueue(28308):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1338)
06-06 11:25:34.850: W/MessageQueue(28308):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-06 11:25:34.850: W/MessageQueue(28308):  at android.os.Looper.loop(Looper.java:154)
06-06 11:25:34.850: W/MessageQueue(28308):  at android.app.ActivityThread.main(ActivityThread.java:4977)
06-06 11:25:34.850: W/MessageQueue(28308):  at java.lang.reflect.Method.invokeNative(Native Method)
06-06 11:25:34.850: W/MessageQueue(28308):  at java.lang.reflect.Method.invoke(Method.java:511)
06-06 11:25:34.850: W/MessageQueue(28308):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-06 11:25:34.850: W/MessageQueue(28308):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-06 11:25:34.850: W/MessageQueue(28308):  at dalvik.system.NativeStart.main(Native Method)
06-06 11:25:35.320: D/PhoneStatusBarPolicy(611): @@ iconIndex=1
06-06 11:25:35.320: D/PhoneStatusBarPolicy(611): isCdma():true hasService:true mSimState=UNKNOWN gprsState=0 mDataState=2 dataActivity=4 mPhone.htcModemLinkOn:false hspa==true
06-06 11:25:35.330: D/PhoneStatusBarPolicy(611): hasService()=true ,mDataState=2 ,mPhone.htcModemLinkOn()=false ,mDataActivity=4
06-06 11:25:35.340: D/PhoneStatusBarPolicy(611): slotType[0]=SIM
06-06 11:25:35.451: V/UsageStatsService(28308): CMD_ID_UPDATE_MESSAGE_USAGE
06-06 11:25:35.471: V/UsageStatsService(28308): MSG_ON_MESSAGE_UPDATE
06-06 11:25:35.501: V/UsageStatsService(28308): MSG_STOP_SERVICE
06-06 11:25:35.501: V/UsageStatsService(28308): onDestroy 
```

完整的 LogCat： http: [//pastebin.com/hZXwR5FL](http://pastebin.com/hZXwR5FL)

我不明白在 15 个人之后线程是如何关闭的，因为我没有关闭它。

我的编码： http: [//pastebin.com/xe4U4GYZ](http://pastebin.com/xe4U4GYZ)

谁能发现这个线程是如何关闭的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:06:05.380

可能是一堆东西，比如 HTC 对在给定时间内发送的消息数量设置的硬限制。

你可以尝试几件事：

1.  将每个 clickListener 中的循环放入方法中
2.  通过 AsyncTask 将循环放在新线程中，这样就不会挂起 UI
3.  只创建一个 SmsManager 并重复使用它，而不是为您发送的每条消息重新创建它
4.  尝试按照这个想法一次向多个用户发送消息：[如何向多个号码发送短信？](https://stackoverflow.com/questions/7772588/how-to-send-text-message-to-more-than-1-number)

祝你好运

# wordpress - Wordpress 中的 iframe

> ID：10949966
> 
> 赞同：2
> 
> 时间：2012-06-08T13:38:55.077
> 
> 标签：wordpress, iframe

我正在尝试生成一些可嵌入的 iframe 代码，以便用户可以将代码包含在博客中以显示我计划提供的内容。现在我试图提供的内容只是一个网站。我正在尝试在 Wordpress 博客上使用以下代码：

```
<iframe width="420" height="315" src="http://www.cnn.com" frameborder="0"></iframe> 
```

但是，当查看页面时，Wordpress 只是根据以下 html 输出“http://www.cnn.com”的链接。

```
<a href="http://www.cnn.com">http://www.cnn.com</a> 
```

也就是说，如果我使用 Youtube 生成的 iframe 代码，iframe 可以正常加载。例如：

```
<iframe width="420" height="315" src="http://www.youtube.com/embed/_OBlgSz8sSM" frameborder="0" allowfullscreen></iframe> 
```

结果是：

```
<iframe class='youtube-player' type='text/html' width='420' height='315' src='http://www.youtube.com/embed/_OBlgSz8sSM?version=3&#038;rel=1&#038;fs=1&#038;showsearch=0&#038;showinfo=1&#038;iv_load_policy=1&#038;wmode=transparent' frameborder='0'></iframe> 
```

知道 Youtube 正在做什么来启用此功能，或者更一般地说，如何让我的简单 iframe 工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T21:05:49.213

创建一个简码是我解决这个问题的方法。它绕过 WYSIWYG 编辑器并将 html 放入页面中。

我会这样处理它。

将此添加到您的 functions.php 文件中：

```
function add_iframe($atts) {
    extract(shortcode_atts(array(
    'src' => '/'
    ), $atts));
  $theframe = '<iframe src="'.$src.'" width="420" height="315" frameborder="0"></iframe>';
  return $theframe;
}
add_shortcode('iframe', 'add_iframe'); 
```

用途：

将 [iframe src=http://thesiteyouwanttoshow.com] 添加到您希望 iframe 显示的内容中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T13:57:14.693

我不知道为什么你得到一个锚而不是 iframe，但我知道谷歌不希望他们的主页在 iframe 中。如果您有一个带有 src *http://www.google.com*的 iframe ，您会看到一个空的 iframe。另请参阅[此示例](http://jsfiddle.net/DtKzK/1/show/)。

=== 更新 ===

Wordpress 禁止 iframe，几乎没有例外。可能您可以使用简码来处理它。尝试将以下未经测试的代码添加到主题中的 functions.php 中。

```
// [iframe src="www.cnn.com"]
function iframe_func($atts) {
    extract(shortcode_atts(array(
        'src' => 'default'
    ), $atts));
    return '<iframe src="{$src}"></iframe>';
}
add_shortcode('iframe', 'iframe_func'); 
```

现在您可以`[iframe src="www.cnn.com"]`在 wordpress 管理员中添加文章编辑器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-16T12:58:27.247

如果您在 iframe 中加载自己的网页，请记住大多数托管解决方案将 xFrame 选项设置为 SAMEORIGIN，因此无论您在 Wordpress 中进行什么更改，页面仍然不会呈现，因为它被目标网站阻止。

我花了几个小时来解决这个问题，所以希望如果你遇到这个问题，你也会找到目标网站。如果您在 Rails 上托管解决方案，我找到的答案在[这里，并且可以在](https://stackoverflow.com/questions/17542511/cannot-display-my-rails-4-app-in-iframe-even-if-x-frame-options-is-allowall)[此处](https://www.snappybudget.com)找到肯定会在 Wordpress 中加载的网站，因此请随意使用该端点作为测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T13:58:32.920

Google 使用`X-Frame-Options`标头（设置为`SAMEORIGIN`）来防止您将其放置在 iframe 中。解决这个问题需要用户使用不支持`X-Frame-Options`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T14:52:47.680

我将创建一个 WordPress [short_code](http://codex.wordpress.org/Shortcode_API)，将您的 iFrame 插入输出。我认为通过直接在邮箱中添加 iFrame 代码 wordpress 正在改变它。

[http://codex.wordpress.org/Shortcode_API](http://codex.wordpress.org/Shortcode_API)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-08T14:07:14.093

不幸的是，谷歌和雅虎等主要搜索引擎网站（不包括 bing）不允许 iframe 嵌入，因为它们提供了大量的 API 和集成选项。所以你真的没有真正的方法可以做到这一点。如果您不打算将 google 作为您的 iframe 源嵌入，那么您应该清楚地了解您拥有的当前代码。尝试一下，只需将源更改为其他内容 - 谷歌不会出现在它的位置。不幸的是，如果你想要一个搜索引擎，我会惊恐地说，必应是唯一有效的。

希望这可以帮助！

因此，回顾一下 - Google 不会嵌入 iframe，但您生成的其他内容应基于您的编码：例如：

```
<iframe width="420" height="315" src="http://www.uncrate.com" frameborder="0"></iframe> 
```

[http://jsfiddle.net/pKby8/](http://jsfiddle.net/pKby8/)

您获得的 Anchor 是 xFrame 选项的结果。当它连接到谷歌服务器时，服务器会返回一个可爱的响应，暗示你应该链接到它们而不是 iframe。

# pdf - 从 pdf 中提取文本时，如果字体具有 ToUnicode 映射，我应该关心编码吗？

> ID：10949967
> 
> 赞同：0
> 
> 时间：2012-06-08T13:39:04.247
> 
> 标签：pdf

我正在尝试从 pdf 中提取文本。Pdf 参考是一个真正的地狱，留下了很多没有答案的实际问题。我的问题是：如果字体字典包含 /ToUnicode CMap 和 /Encoding，CMap 是否总是涵盖与该字体一起使用的所有字符，这意味着我不需要使用 /Encoding 或其他任何东西来获取用这个打印的文本字体？pdf参考的第5.9章似乎回答是，但我的一些测试似乎回答不是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T16:05:29.703

第 5.9 章是正确的，ToUnicode Cmap 应该足以用于文本提取。问题是许多 PDF 文件没有正确遵循 PDF 规范，您必须实施自己的启发式方法来提取文本。
您从 PDF 规范开始，然后根据您遇到的不合格 PDF 文件使用各种增强功能更新您的文本提取方法。

# continuous-integration - TeamCity Agent 已“丢失”其环境路径

> ID：10949969
> 
> 赞同：2
> 
> 时间：2012-06-08T13:39:07.260
> 
> 标签：continuous-integration, teamcity, nant

一段时间以来，我一直很高兴地使用 TeamCity Build 服务器，但突然之间出现了问题......

似乎构建代理的`path`. 因此，例如，如果我的构建脚本（我使用 NANT）调用 xcopy 来复制文件，这会突然开始失败，因为找不到 xcopy - 所以除非我将其更改为`c:\windows\system32\xcopy`.

我可以手动浏览到构建代理文件夹并从那里运行 nant 脚本，一切正常（因为路径设置正确）。

我还没有升级 TeamCity，所以我很困惑为什么这会失败。我不会覆盖 TeamCity 中构建的环境参数中的任何内容。我也没有更改构建设置中的任何内容。我对这台包含构建代理的 PC 所做的*唯一一件事就是安装 Visual Studio 2012 的 RC。*

有任何想法吗？

*编辑*

进一步调查 - 我在 TeamCity 中找到了代理设置 - 在那里，名为“path”的环境变量刚刚设置为 `C:\Program Files (x86)\Nmap`（最近安装）。这很奇怪，很可能是问题的原因。我只需要弄清楚如何让 TeamCity 恢复到“真实”路径。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T14:08:31.740

想通了-这可能对其他人有用...

当我最近安装 Nmap 时，它为我的帐户添加了一个新的“用户变量”，它称为“路径”并设置为`C:\Program Files (x86)\Nmap`. 这覆盖了名为路径的“系统变量”，并造成了所有破坏。删除了用户变量，一切正常。

![在此处输入图像描述](../Images/cd6b56c77322adac5f70853731a12b31.png)

# mysql - mysql中每个用户的最大数据库数

> ID：10949973
> 
> 赞同：1
> 
> 时间：2012-06-08T13:39:22.147
> 
> 标签：mysql

我想知道是否有办法限制用户可以在 mysql 中创建的数据库数量？我想授予用户创建数据库的权利，但他不应该能够创建无限数量的数据库。

谢谢，杰罗德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:49:25.280

如果您的用户只授予了他们自己的数据库的权限，您可以`information_schema.SCHEMA_PRIVILEGES`在允许创建之前检查他们已经拥有多少个数据库。但是，要使其正常工作，您必须`CREATE DATABASE`直接禁止用户，而是通过另一个特权数据库用户在应用程序代码中创建数据库，然后授予用户访问他们新创建的数据库的权限。

```
SELECT 
  GRANTEE, 
  COUNT(DISTINCT TABLE_SCHEMA) AS NUM_DBS
FROM information_schema.SCHEMA_PRIVILEGES
GROUP BY GRANTEE 
```

如果`NUM_DBS`大于您的限制，请不要为他们创建新数据库。

请注意，如果您向用户授予他们“拥有”的数据库以外的数据库的权限，您将需要在查询中通过排除那些通过类似的方式来考虑这一点

```
WHERE TABLE_SCHEMA NOT IN ('other','dbs','you','grant','access','on') 
```

# .htaccess - 多个 301 重定向 htaccess

> ID：10949974
> 
> 赞同：0
> 
> 时间：2012-06-08T13:39:35.157
> 
> 标签：.htaccess, mod-rewrite

我最近更改了一些页面的文件名。例如

work1.html 到 acn-website.html

work2.html 到 inkdrawn-website.html

等等

我目前在我的 htaccess 文件中有以下内容；

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{HTTP_HOST} ^fullfatdesigns\.co.uk$
RewriteRule (.*) http://www.fullfatdesigns.co.uk/$1 [R=301,L] 

ErrorDocument 404 /error/404.php  
ErrorDocument 403 /error/403.php 
```

如何在现有文件中插入多个 301 重定向？

谢谢你韦恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T22:23:54.963

你可以添加

```
RewriteRule oldPage\.html http://www.fullfatdesigns.co.uk/newPage.html [R=301,L] 
```

在`RewriteEngine on`每次重定向之后。

# c - 为什么我们不能从 C 中的函数返回多个值？请问原因？

> ID：10949976
> 
> 赞同：0
> 
> 时间：2012-06-08T13:39:41.237
> 
> 标签：c

如果可能，那么如何返回多个值。不能因为返回是通过控制器或 CPU 中的累加器完成的。

这是正确的原因吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T13:43:23.627

因为这就是语言的定义方式。没有根本原因；其他语言可以返回多个值（例如 Matlab）。

作为“解决方法”，您可以返回一个包含多个字段的结构。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T13:45:23.360

您可以通过将它们放入结构中来完全“返回”超过一项，或者将指针传递给函数，以便函数可以写入一些在函数返回后仍然存在的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T16:28:56.623

您一次不能返回多个值。因为返回函数的语法是这样定义的，它应该只接受一个值。检查下面的例子。

```
a=returnfunction(); 
```

在上述情况下，如果函数 returnfunction() 返回多个值，则编译器会混淆将哪个返回值初始化给变量 a。如果函数 returnfunction() 返回两个值 1 和 2，那么编译器会混淆将值 1 或 2 分配给变量 a。所以为了防止这些类型的问题，函数被定义为不返回多个值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T22:23:38.570

与它的表达方式相反，实际上没有任何值被“返回”。实际上，返回值/地址作为堆栈上的参数传递给函数调用。然后 return 语句实际上修改了该参数，从而将结果传递给调用者。

在某种意义上，它几乎就像`void func(arg1, arg2, *ret)`

不同的语言处理这个不同。C 期望堆栈上只有一个“返回”参数。事实上，结构将允许您“返回”多个值，因此将指向结构的指针作为普通参数传递也是如此。

# xml - XSLT 环绕元素

> ID：10949979
> 
> 赞同：0
> 
> 时间：2012-06-08T13:39:51.160
> 
> 标签：xml, xslt

好吧，我觉得这是一个非常愚蠢的问题，但我已经尝试了一段时间来得到它，所以我的 XSLT 文件会吐出封装在某个任意元素中的输出，我们称之为“根”。我将如何实现这一目标？

如果有帮助的话，这是我当前的 XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions">
<xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
<xsl:template match="DCField">
    <xsl:choose>
        <xsl:when test="@FieldValueType='None'">
            <xsl:element name="{Name}">
                <xsl:value-of select="Value" />
            </xsl:element>
        </xsl:when>
        <xsl:otherwise>
            <xsl:element name="{@FieldValueType}">
                <xsl:value-of select="Value" />
            </xsl:element>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template>
<xsl:template match="text()"/>
</xsl:stylesheet> 
```

我想要它，所以我的输出看起来像：

```
<root>
    <element1>
    <element2>
    ...
</root> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:44:10.197

只需将根匹配模板的内容包装在`<root>`标签中即可。

[http://www.xmlplayground.com/RYv2XW](http://www.xmlplayground.com/RYv2XW)（见输出源）

# jquery - 这在通过 AJAX 调用的内容中不起作用

> ID：10949981
> 
> 赞同：1
> 
> 时间：2012-06-08T13:40:00.617
> 
> 标签：jquery, ajax, colorbox, sharethis

我有一个页面，它使用 AJAX 请求和 JQuery 动态提取内容。加载内容后，我使用 colorbox 的完整功能来加载所需的任何脚本。我要加载的其中一件事是 ShareThis 按钮，我的标记是这样的：

HTML

```
<span class="st_sharethis_custom"></span> 
```

在 colorbox 的 onComplete 函数里面我有这个。

```
 $.getScript("http://w.sharethis.com/button/buttons.js", function() {});
  var switchTo5x=false;
  stLight.options({publisher: "ur-a4a2b4d1-36da-c1a3-4eee-8eedd1e95feb"}); 
```

当我运行灯箱并将鼠标悬停在 ShareThis 按钮上时，出现以下错误。

stButtons.messageQueueInstance 为空

对此的任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T06:24:58.700

您可能已经调用了 button.js 两次。一个在主页中，另一个在 ajax 页面中。你可以试着打电话`stButtons.locateElements()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T08:56:07.163

`getScript`异步加载脚本。`stLight.option()`因此，在脚本加载之前调用您的代码。尝试将您的代码更改为：

```
$.getScript("http://w.sharethis.com/button/buttons.js", function() {
    var switchTo5x = false;
    stLight.options({publisher: "ur-a4a2b4d1-36da-c1a3-4eee-8eedd1e95feb"});
}); 
```

这告诉 jQuery`initialisation(stLight.options())`在完成`getScript()`调用后运行你。

# c - 被称为对象不是函数 c

> ID：10949982
> 
> 赞同：0
> 
> 时间：2012-06-08T13:40:01.257
> 
> 标签：c, pointers, copy-constructor

早上好，所以-这些已经煮了我的面条了（而且，我很难用谷歌搜索我注意到的 c 编程语言......）

```
void prepareFrames(PDouble prep){
  int gap = prep->gap;
  printf("Gap is %d\n", gap);
  prep->intFrames = (PFrame*)malloc(gap*sizeof(PFrame));
  PFrame copyFrame = prep->first;
  int i;
  for(i=0; i < gap; i++){
    prep->intFrames[i] = (PFrame)malloc(sizeof(Frame));
    copyFrame(prep->intFrames[i], prep->first, i);          //LINE 189
  }
}

void copyFrame(PFrame new, PFrame copy, int num){
  new->sequence = copy->sequence;
  new->evaluatedFrame = copy->evaluatedFrame + num;
  new->numBoxes = copy->numBoxes;
  new->boxes = (PBox*)malloc(copy->numBoxes*sizeof(PBox));
  int i;
  for(i=0; i < copy->numBoxes; i++){
    PBox old = copy->boxes[i];
    new->boxes[i] = (PBox)malloc(sizeof(Box));
    copyBox(new->boxes[i], old);
  }
} 
```

我收到了这个错误：

```
error: called object ‘copyFrame’ is not a function 
```

原型与定义相匹配。是什么赋予了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T13:41:29.007

您已`copyFrame`在该本地范围内重新定义：

```
PFrame copyFrame = prep->first; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T13:44:27.163

您已经定义了一个名为 copyFrame 的局部变量：`PFrame copyFrame = prep->first;`除非 PFrame 由

```
typedef void (*PFrame)(PFrame new, PFrame copy, int num); 
```

我看不出它应该如何编译。否则，您甚至不使用该`copyFrame`变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T13:42:45.047

您有一个名为 copyFrame 的变量，它与您的函数名称冲突。

重命名`PFrame copyFrame`为其他名称，它应该可以工作。

# c - linux内核Makefile中obj-y + = something /的含义是什么？

> ID：10949986
> 
> 赞同：25
> 
> 时间：2012-06-08T13:40:07.820
> 
> 标签：c, linux, makefile, linux-kernel

我明白了的意思

```
obj-$(CONFIG_USB)       += usb.o 
```

如果 CONFIG_USB 为 y，则将编译 usb.o。那么现在如何理解这个

```
obj-y               += something/ 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-08T13:46:14.247

内核 Makefile 是`kbuild`系统的一部分，记录在网络上的各个地方，例如[http://lwn.net/Articles/21835/](http://lwn.net/Articles/21835/)。相关摘录在这里：

> ```
> --- 3.1 Goal definitions 
> ```
> 
> 目标定义是 kbuild Makefile 的主要部分（核心）。这些行定义了要构建的文件、任何特殊的编译选项以及要递归输入的任何子目录。
> 
> 最简单的 kbuild makefile 包含一行：
> 
> 示例：obj-y += foo.o
> 
> 这告诉 kbuild 该目录中有一个名为 foo.o 的对象。foo.o 将从 foo.c 或 foo.S 构建。
> 
> 如果将 foo.o 构建为模块，则使用变量 obj-m。因此，经常使用以下模式：
> 
> 示例：obj-$(CONFIG_FOO) += foo.o
> 
> $(CONFIG_FOO) 计算结果为 y（对于内置）或 m（对于模块）。如果 CONFIG_FOO 既不是 y 也不是 m，那么文件将不会被编译或链接。

所以`m`意味着模块，`y`意味着内置（在内核配置过程中代表是），并且 $(CONFIG_FOO) 从正常的配置过程中提取正确的答案。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-29T22:08:19.450

obj-y += 某物/

这意味着 kbuild 应该进入目录“something”。一旦它移动到这个目录，它就会查看“某物”中的 Makefile 来决定应该构建哪些对象。

这类似于说-转到目录“某物”并执行“make”

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-07-23T10:31:29.840

您的问题似乎是为什么将整个目录添加为目标，KConfig 文档的相关部分是：

```
--- 3.6 Descending down in directories

    A Makefile is only responsible for building objects in its own
    directory. Files in subdirectories should be taken care of by
    Makefiles in these subdirs. The build system will automatically
    invoke make recursively in subdirectories, provided you let it know of
    them.

    To do so obj-y and obj-m are used.
    ext2 lives in a separate directory, and the Makefile present in fs/
    tells kbuild to descend down using the following assignment.

    Example:
        #fs/Makefile
        obj-$(CONfIG_EXT2_FS) += ext2/

    If CONFIG_EXT2_FS is set to either 'y' (built-in) or 'm' (modular)
    the corresponding obj- variable will be set, and kbuild will descend
    down in the ext2 directory.
    Kbuild only uses this information to decide that it needs to visit
    the directory, it is the Makefile in the subdirectory that
    specifies what is modules and what is built-in.

    It is good practice to use a CONFIG_ variable when assigning directory
    names. This allows kbuild to totally skip the directory if the
    corresponding CONFIG_ option is neither 'y' nor 'm'. 
```

# sql-server-2008 - SQL Server 2008 - 连接导致性能下降

> ID：10949987
> 
> 赞同：3
> 
> 时间：2012-06-08T13:40:09.630
> 
> 标签：sql-server-2008, join, query-optimization

我之前问过下面的查询，但由于没有提供我不知道的查询计划，它被否决了。这次我提供了查询计划，希望对如何改进以下查询提出一些建议/意见：

以下查询需要 5 分钟才能返回大约 68000 条记录。但是如果我从查询中删除 LKP_PrivateSource（即最后的左连接），则需要 1 秒才能返回 68000 条记录。BTY，LKP_PrivateSource 表中没有记录。知道是什么导致了这个问题吗？

```
Select 
    Case IsNull(LNK.StockID,0)
        When 0 Then AE.StockID
        Else LNK.StockID
    End StockID,
    IsNull(AE.LinkID,0) LinkID,
    IsNull(LNK.CapitalID,0) CapitalID,
    DE.SourceName,
    AE.SourceDate 'Date',
    IsNull(AE.Formula,'') Formula
From 
    AE_RevenuData AE
Left Join 
    Linking LNK With(NoLock) ON LNK.LinkID = AE.LinkID
Inner Join 
    DE_DataEntities DE ON DE.EntityID = AE.EntityID
Inner Join 
    DataEntityIDs TE ON TE.EntityID = DE.EntityID
Inner Join 
    STG_LockedEntityData STG ON STG.StockID = IsNull(LNK.StockID, AE.StockID) AND STG.CapitalID = IsNull(LNK.CapitalID, 0) 
Left Join 
    LKP_PrivateSource PS ON PS.PSourceId = AE.PSourceID
Where 
    AE.ProjectID IN (13)
    AND AE.LinkID IS NOT NULL 
```

请看下面的计划：

```
 |--Compute Scalar(DEFINE:([Expr1017]=CASE WHEN [Expr1026]=(0) THEN [MYDBNAME].[dbo].[AE_RevenueData].[StockID] as [AE].[StockID] ELSE [MYDBNAME].[dbo].[INV_InvestorFundLinking].[StockID] as [LNK].[StockID] END))
   |--Nested Loops(Left Outer Join, OUTER REFERENCES:([Expr1027]))
        |--Filter(WHERE:([MYDBNAME].[dbo].[STG_LockedEntityData].[StockID] as [STG].[StockID]=isnull([MYDBNAME].[dbo].[INV_InvestorFundLinking].[StockID] as [LNK].[StockID],[MYDBNAME].[dbo].[AE_RevenueData].[StockID] as [AE].[StockID]) AND [MYDBNAME].[dbo].[STG_LockedEntityData].[CapitalID] as [STG].[CapitalID]=[Expr1019]))
        |    |--Compute Scalar(DEFINE:([Expr1019]=isnull([MYDBNAME].[dbo].[INV_InvestorFundLinking].[CapitalID] as [LNK].[CapitalID],(0)), [Expr1026]=isnull([MYDBNAME].[dbo].[INV_InvestorFundLinking].[StockID] as [LNK].[StockID],(0))))
        |         |--Nested Loops(Left Outer Join, OUTER REFERENCES:([AE].[LinkID]))
        |              |--Nested Loops(Inner Join, WHERE:([MYDBNAME].[dbo].[AE_RevenueData].[LinkID] as [AE].[LinkID]=[MYDBNAME].[dbo].[STG_LockedEntityData].[LinkID] as [STG].[LinkID]))
        |              |    |--Sort(ORDER BY:([Expr1027] ASC))
        |              |    |    |--Hash Match(Inner Join, HASH:([TE].[EntityID])=([AE].[EntityID]))
        |              |    |         |--Nested Loops(Inner Join, OUTER REFERENCES:([Uniq1008], [DE].[ListingID]))
        |              |    |         |    |--Nested Loops(Inner Join, OUTER REFERENCES:([TE].[EntityID]))
        |              |    |         |    |    |--Table Scan(OBJECT:([MYDBNAME].[dbo].[DataEntityIDs] AS [TE]))
        |              |    |         |    |    |--Index Seek(OBJECT:([MYDBNAME].[dbo].[DE_DataEntities].[PK_DE_DataSources] AS [DE]), SEEK:([DE].[EntityID]=[MYDBNAME].[dbo].[DataEntityIDs].[EntityID] as [TE].[EntityID]) ORDERED FORWARD)
        |              |    |         |    |--Clustered Index Seek(OBJECT:([MYDBNAME].[dbo].[DE_DataEntities].[IX_DE_DataSources] AS [DE]), SEEK:([DE].[ListingID]=[MYDBNAME].[dbo].[DE_DataEntities].[ListingID] as [DE].[ListingID] AND [Uniq1008]=[Uniq1008]) LOOKUP ORDERED FORWARD)
        |              |    |         |--Compute Scalar(DEFINE:([Expr1018]=[MYDBNAME].[dbo].[AE_RevenueData].[LinkID] as [AE].[LinkID], [Expr1020]=isnull([MYDBNAME].[dbo].[AE_RevenueData].[Formula] as [AE].[Formula],''), [Expr1021]=CONVERT(bit,[MYDBNAME].[dbo].[AE_RevenueData].[IsSumOfFunds] as [AE].[IsSumOfFunds],0), [Expr1022]=isnull([MYDBNAME].[dbo].[AE_RevenueData].[ClientSpecificSource] as [AE].[ClientSpecificSource],N''), [Expr1023]=isnull([MYDBNAME].[dbo].[AE_RevenueData].[GenericSource] as [AE].[GenericSource],N''), [Expr1027]=isnull([MYDBNAME].[dbo].[AE_RevenueData].[PSourceID] as [AE].[PSourceID],(0))))
        |              |    |              |--Clustered Index Seek(OBJECT:([MYDBNAME].[dbo].[AE_RevenueData].[IX_AE_RevenueData] AS [AE]), SEEK:([AE].[ProjectID]=(13)),  WHERE:([MYDBNAME].[dbo].[AE_RevenueData].[LinkID] as [AE].[LinkID] IS NOT NULL) ORDERED FORWARD)
        |              |    |--Table Scan(OBJECT:([MYDBNAME].[dbo].[STG_LockedEntityData] AS [STG]))
        |              |--Index Seek(OBJECT:([MYDBNAME].[dbo].[INV_InvestorFundLinking].[PK_Linking_1] AS [LNK]), SEEK:([LNK].[LinkID]=[MYDBNAME].[dbo].[AE_RevenueData].[LinkID] as [AE].[LinkID]) ORDERED FORWARD)
        |--Clustered Index Seek(OBJECT:([MYDBNAME].[dbo].[LKP_PrivateSource].[PK_LKP_FactsetSource] AS [PS]), SEEK:([PS].[PSourceID]=[Expr1027]) ORDERED FORWARD) 
```

请参阅下面不加入 LKP_PrivateSource 的计划

```
 |--Compute Scalar(DEFINE:([Expr1015]=CASE WHEN [Expr1024]=(0) THEN [MYDBNAME].[dbo].[AE_RevenueData].[StockID] as [AE].[StockID] ELSE [MYDBNAME].[dbo].[Linking].[StockID] as [LNK].[StockID] END))
   |--Nested Loops(Left Outer Join, OUTER REFERENCES:([Expr1027]))
       |--Filter(WHERE:([MYDBNAME].[dbo].[STG_LockedEntityData].[StockID] as [STG].[StockID]=isnull([MYDBNAME].[dbo].[Linking].[StockID] as [LNK].[StockID],[MYDBNAME].[dbo].[AE_RevenueData].[StockID] as [AE].[StockID]) AND [MYDBNAME].[dbo].[STG_LockedEntityData].[CapitalID] as [STG].[CapitalID]=[Expr1017]))
            |--Compute Scalar(DEFINE:([Expr1017]=isnull([MYDBNAME].[dbo].[Linking].[CapitalID] as [LNK].[CapitalID],(0)), [Expr1024]=isnull([MYDBNAME].[dbo].[Linking].[StockID] as [LNK].[StockID],(0))))
                 |--Nested Loops(Left Outer Join, OUTER REFERENCES:([AE].[LinkID]))
                      |--Hash Match(Inner Join, HASH:([AE].[LinkID])=([STG].[LinkID]))
                      |    |--Hash Match(Inner Join, HASH:([TE].[EntityID])=([AE].[EntityID]))
                      |    |    |--Nested Loops(Inner Join, OUTER REFERENCES:([Uniq1008], [DE].[ListingID]))
                      |    |    |    |--Nested Loops(Inner Join, OUTER REFERENCES:([TE].[EntityID]))
                      |    |    |    |    |--Table Scan(OBJECT:([MYDBNAME].[dbo].[DataEntityIDs] AS [TE]))
                      |    |    |    |    |--Index Seek(OBJECT:([MYDBNAME].[dbo].[DE_DataEntities].[PK_DE_DataSources] AS [DE]), SEEK:([DE].[EntityID]=[MYDBNAME].[dbo].[DataEntityIDs].[EntityID] as [TE].[EntityID]) ORDERED FORWARD)
                      |    |    |    |--Clustered Index Seek(OBJECT:([MYDBNAME].[dbo].[DE_DataEntities].[IX_DE_DataSources] AS [DE]), SEEK:([DE].[ListingID]=[MYDBNAME].[dbo].[DE_DataEntities].[ListingID] as [DE].[ListingID] AND [Uniq1008]=[Uniq1008]) LOOKUP ORDERED FORWARD)
                      |    |    |--Compute Scalar(DEFINE:([Expr1016]=[MYDBNAME].[dbo].[AE_RevenueData].[LinkID] as [AE].[LinkID], [Expr1018]=isnull([MYDBNAME].[dbo].[AE_RevenueData].[Formula] as [AE].[Formula],''), [Expr1019]=CONVERT(bit,[MYDBNAME].[dbo].[AE_RevenueData].[IsSumOfFunds] as [AE].[IsSumOfFunds],0), [Expr1020]=isnull([MYDBNAME].[dbo].[AE_RevenueData].[ClientSpecificSource] as [AE].[ClientSpecificSource],N''), [Expr1021]=isnull([MYDBNAME].[dbo].[AE_RevenueData].[GenericSource] as [AE].[GenericSource],N'')))
                      |    |         |--Clustered Index Seek(OBJECT:([MYDBNAME].[dbo].[AE_RevenueData].[IX_AE_RevenueData] AS [AE]), SEEK:([AE].[ProjectID]=(13)),  WHERE:([MYDBNAME].[dbo].[AE_RevenueData].[LinkID] as [AE].[LinkID] IS NOT NULL) ORDERED FORWARD)
                      |    |--Table Scan(OBJECT:([MYDBNAME].[dbo].[STG_LockedEntityData] AS [STG]))
                      |--Index Seek(OBJECT:([MYDBNAME].[dbo].[Linking].[PK_Linking_1] AS [LNK]), SEEK:([LNK].[LinkID]=[MYDBNAME].[dbo].[AE_RevenueData].[LinkID] as [AE].[LinkID]) ORDERED FORWARD) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T14:01:23.617

出于某种原因，添加 a `LEFT JOIN`to`LKP_PrivateSource`会使优化器使用`NESTED LOOPS`而不是 a `HASH JOIN`to join `STG_LockedEntityData`（更早）。

很难说为什么会这样，但要改进嵌套循环，请在`STG_LockedEntityData (stock_id, capital_id)`

# ios - 以编程方式重命名 plist 值？

> ID：10949993
> 
> 赞同：0
> 
> 时间：2012-06-08T13:40:27.310
> 
> 标签：ios, uitableview, plist

我有一个 plist 并将其加载到表格视图中，我想要做的是当我单击表格单元格时，它会弹出一个键盘并允许我编辑表格中的文本单元格（因此编辑 plist 值）

任何人都可以为我指出如何完成此任务的正确方向吗？

如果我在单元格中绘制了一个文本字段，那么我可以编辑文本，但是有人知道如何将新输入的值发送到 plist 以更新刚刚编辑的值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T14:34:52.950

你有：

1.  一个 plist 文件
2.  `NSMutableArray`加载此 plist的容器（例如）
3.  一个表格视图，它从这个容器中获取值。

通过表格视图修改 plist：

1.  更改容器中的值
2.  将容器写回 plist 文件。

# actionscript-3 - 从 as3 中的输入文本中删除逗号

> ID：10949996
> 
> 赞同：2
> 
> 时间：2012-06-08T13:40:49.163
> 
> 标签：actionscript-3, user-input

谁能告诉我如何实施，也许是拆分？在运行某些 if 语句之前从用户输入的文本数字中删除逗号。我知道我可以限制逗号，但我希望人们在估算值时能够使用逗号。谢谢！

```
value_enter.addEventListener(MouseEvent.CLICK, release1);
function release1(evt:MouseEvent):void 
{
if ( Number(inputfield.text) >0 &&  Number(inputfield.text) <2600)
{
gotoAndStop(2);
}
else if ( Number(inputfield.text) >2599 &&  Number(inputfield.text) <4200)
{
gotoAndStop(3);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T13:47:17.497

只需使用以下`replace()`功能：

```
inputfield.text = inputfield.text.replace(",", ""); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T13:47:39.360

尝试这个：

```
value_enter.addEventListener(MouseEvent.CLICK, release1);
function release1(evt:MouseEvent):void 
{
    var strNum:String = String(inputfield.text).replace(/,/g, "");
    var num:Number = Number(strNum);

    if ( num > 0 &&  num <2600)
    {
        gotoAndStop(2);
    }
    else if ( num >2599 &&  num <4200)
    {
        gotoAndStop(3);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T13:59:25.670

如果您想删除所有实例，您可以按照您的想法进行拆分：

如果你的`inputfield.text = "123,456,789";`

然后：

```
var inputNoCommas:String = inputfield.text.split(",").join(""); 
```

应该返回“123456789”；

我记得[String.replace()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/String.html#replace%28%29)只替换第一个实例，如果这就是你想要的，那么你可以走那条路。

# android - 如何在 listfragments 中使用基本适配器显示自定义列表视图？

> ID：10949998
> 
> 赞同：0
> 
> 时间：2012-06-08T13:41:21.990
> 
> 标签：android, listview, android-listfragment

我想在 listfragment 中使用基本适配器进行自定义列表视图

我试试这段代码：

```
public class MyListFragment1 extends ListFragment {

ImageView back;
String url = Main.url;
String Qrimage;
Bitmap bmp;
ListView list;

AppetiserFragment adapter;

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View tmp_view = inflater.inflate(R.layout.applistviewfragment, container, false);
    ListView list = (ListView) tmp_view.findViewById(R.id.list);
    InputStream is = null;
    String result = "";
    JSONObject jArray = null;
    try {
        HttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url + "test.php3");
        HttpResponse response = httpClient.execute(httpPost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
    } catch (Exception e) {
        // TODO: handle exception
        Log.e("Log", "Error in Connection" + e.toString());

        // Intent intent = new Intent(ViewQRCode.this, PimCarder.class);

        // startActivity(intent);

    }
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result = sb.toString();
        jArray = new JSONObject(result);
        JSONArray json = jArray.getJSONArray("appetiser");

        adapter = new AppetiserFragment(getActivity(), json);
        list.setAdapter(adapter);

    } catch (Exception e) {
        // TODO: handle exception
        Log.e("log", "Error in Passing data" + e.toString());
    }
    return tmp_view;

}

   } 
```

AppetiserFragment.java

```
public class AppetiserFragment extends BaseAdapter {
public static ArrayList<String> arr = new ArrayList<String>();
public static ArrayList<String> itemprice = new ArrayList<String>();
public static ArrayList<Bitmap> image = new ArrayList<Bitmap>();
String url = Main.url;
public Context Context;
String qrimage;
Bitmap bmp, resizedbitmap;
Bitmap[] bmps;
Activity activity = null;
private LayoutInflater inflater;

private ImageView[] mImages;
String[] itemimage;
TextView[] tv;
String itemname, price, desc, itemno;
String[] itemnames, checkeditems, itemnos;
String[] prices;
String[] descs;
HashMap<String, String> map = new HashMap<String, String>();

public AppetiserFragment(Context context, JSONArray imageArrayJson) {
    Context = context;
    // inflater =

    System.out.println(imageArrayJson);
    // (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    // imageLoader=new ImageLoader(activity);
    inflater = LayoutInflater.from(context);
    this.mImages = new ImageView[imageArrayJson.length()];
    this.bmps = new Bitmap[imageArrayJson.length()];
    this.itemnames = new String[imageArrayJson.length()];
    this.prices = new String[imageArrayJson.length()];
    this.descs = new String[imageArrayJson.length()];
    this.itemnos = new String[imageArrayJson.length()];
    try {

        for (int i = 0; i < imageArrayJson.length(); i++) {
            JSONObject image = imageArrayJson.getJSONObject(i);

            qrimage = image.getString("itemimage");
            itemname = image.getString("itemname");
            itemno = new Integer(i + 1).toString();
            price = image.getString("price");
            desc = image.getString("itemdesc");
            **System.out.println(price);**
            itemnames[i] = itemname;
            prices[i] = price;
            descs[i] = desc;
            itemnos[i] = itemno;

            byte[] qrimageBytes = Base64.decode(qrimage.getBytes());

            bmp = BitmapFactory.decodeByteArray(qrimageBytes, 0,
                    qrimageBytes.length);
            int width = 100;
            int height = 100;
            resizedbitmap = Bitmap.createScaledBitmap(bmp, width, height,
                    true);
            bmps[i] = bmp;

            mImages[i] = new ImageView(context);
            mImages[i].setImageBitmap(resizedbitmap);

            mImages[i].setScaleType(ImageView.ScaleType.FIT_START);

            // tv[i].setText(itemname);
        }
        System.out.println(map);

    } catch (Exception e) {
        // TODO: handle exception
    }
}

public AppetiserFragment() {
    // TODO Auto-generated constructor stub
}

public int getCount() {
    return mImages.length;
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(final int position, View convertView, ViewGroup parent) {

    View view = convertView;
    final ViewHolder viewHolder;
    if (view == null) {
        view = inflater.inflate(R.layout.appetiserlistview, null);

        viewHolder = new ViewHolder();
        viewHolder.image = (ImageView) view
                .findViewById(R.id.appetiserimage);
        viewHolder.text = (TextView) view.findViewById(R.id.appetisertext);
        viewHolder.desc = (TextView) view.findViewById(R.id.appetiserdesc);
        viewHolder.price = (TextView) view
                .findViewById(R.id.appetiserprice);
        viewHolder.appitemnum = (TextView) view
                .findViewById(R.id.appitemno);

        view.setTag(viewHolder);
    } else {
        viewHolder = (ViewHolder) view.getTag();
    }
    viewHolder.image.setImageBitmap(bmps[position]);
    viewHolder.appitemnum.setText(itemnos[position]);
    viewHolder.price.setText(prices[position]);
    viewHolder.desc.setText(descs[position]);
    ViewHolder holder = (ViewHolder) view.getTag();
    holder.text.setText(itemnames[position]);

    return view;
}

static class ViewHolder {

    protected TextView text, price, desc, appitemnum;
    protected ImageView image;
    public static CheckBox checkbox = null;
}

 } 
```

我可以打印价格值。如果我作为自定义列表视图单独执行，我可以图像、文本、描述、价格。但是在 MyFragmentlist1 中扩展了 listfragment 意味着我无法在自定义列表视图中查看。我以为这堂课中的 MyListFragment1 只有我有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T07:05:46.343

首先创建一个单独的布局layout_txtview。我只是使用文本视图。您可以根据要在单行中显示的项目创建布局。

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/textView1"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:padding="10dp"
android:textColor="#000000"
android:textAppearance="?android:attr/textAppearanceSmall" /> 
```

现在使用此布局在自定义适配器的 getView() 方法中膨胀。现在在 MyListFragment1 类的 onCreate() 方法中，只需将适配器设置为您的自定义适配器

```
setAdapter(new MyListFragment1 (<apss your constructor argument>)); 
```

并完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:57:30.477

尝试以这种方式`setAdapter`在`onActivityCreated`回调中移动

```
 @Override   
 public void onActivityCreated(Bundle savedInstanceState) {
                ListView list = getListView();
                list.setAdapter(adapter);
                adapter.notifyDataSetChanged();
        } 
```