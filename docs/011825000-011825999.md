# StackOverflow 问答 11825000-11825999

# php - 从多维数组 wrt 键中提取数组

> ID：11825002
> 
> 赞同：1
> 
> 时间：2012-08-06T08:43:46.603
> 
> 标签：php, arrays, loops, multidimensional-array

我有一个数组

```
$users    = array();

$users[0]['id']=1;
$users[0]['name']="user1";

$users[1]['id']=2;
$users[1]['name']="user2";

$users[2]['id']=3;
$users[2]['name']="user3"; 
```

我需要将 id 提取到另一个数组 $ids; 这样

```
$ids[0]=1;
$ids[1]=2;
$ids[2]=3; 
```

我知道一种方法来做到这一点...

```
$ids    = array();
foreach($users as $user){
   $ids[]  = $user['id'];
} 
```

但

1.这是最好的方法吗？2.是否可以不循环。3.这是最快的方法吗....？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T08:45:19.037

上面的所有评论都很好地解决了这个问题，但由于没有人实际发布任何实际答案，这里有一些额外的信息（为了证明我的回答是合理的）：

*   这是最好的方法吗？

可能，但它肯定是更清洁和最易读的方式

*   没有循环可以做到吗？

是的，但正如人们所说，这只是一个技巧，因为循环将在后台使用。

*   这是最快的方法吗？

现在这需要进行一些调查。我使用 100000 个条目重新创建了一个与您类似的数组：

```
for ($i=0;$i<100000;$i++) {
    $users[] = array('id' => rand(),
            'name' => 'default');
} 
```

并使用不同的案例进行了一些测试：

1.Plain old for 循环（你自己用过的那个）：

```
$ids=array();
$t = microtime(true);
foreach ($users as $key => $value) {
    $ids[] = $value['id'];
} 
echo microtime(true)-$t; 
```

这平均需要 0.085 英寸

2.使用array_walk()：

```
$t = microtime(true);
array_walk($users, create_function('$v,$k,&$ids', '$ids[0][] = $v["id"];'), array(&$ids));
echo microtime(true)-$t; 
```

这平均需要 0.22'' （使用 $GLOBALS['ids'] 而不是这个“参考”黑客时相同）

3.使用splFixedArray：这个迭代器应该比普通数组更快。实际上，上面的代码平均需要 0.075''：

```
$users = new SplFixedArray(100000);
for ($i=0;$i<100000;$i++) {
    $users[$i] = array('id' => rand(),
            'name' => 'default');
}
$ids=array();
$t = microtime(true);
foreach ($users as $key => $value) {
    $ids[$key] = $value['id'];
}
echo microtime(true)-$t; 
```

下面的代码（我们对两个数组都使用 splFixedArray）执行得更快，大约为 0.062''：

```
$users = new SplFixedArray(100000);
for ($i=0;$i<100000;$i++) {
    $users[$i] = array('id' => rand(),
            'name' => 'default');
}
$ids=new SplFixedArray(100000);
$t = microtime(true);
foreach ($users as $key => $value) {
    $ids[$key] = $value['id'];
}
echo microtime(true)-$t; 
```

所以，最重要的是，**不，这不是最快的方法，但如果你考虑到你在最初的问题中提出的所有 3 个参数，它是最好的**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:08:09.137

*   我认为最好的方式是你作为程序员的方式（但如果你在团队中，那么最好的方式就是团队方式）。
*   我想我将永远依赖内置的 PHP 函数（某些函数除外）来解决性能问题（因为我认为 PHP 同行会根据需要努力改进它）。
*   我认为可以在没有循环的情况下做到这一点。

```
$users = 数组（）；
$users[0]['id'] = 100;
$users[1]['id'] = 101;
$users[2]['id'] = 102;

$ids = 数组（）；
array_walk_recursive($users, function($val, $key) use(&$ids){
    if ($key == 'id') $ids[] = $val;
});

print_r($ids);

大批
(
    [0] => 100
    [1] => 101
    [2] => 102
)

```

# exchange-server - 捕获所有规则 - 如何捕获已发送到不存在的电子邮件地址的所有电子邮件

> ID：11825003
> 
> 赞同：3
> 
> 时间：2012-08-06T08:43:50.863
> 
> 标签：exchange-server, office365

我的任务是创建一个新规则，该规则必须捕获所有将发送到域的电子邮件消息，但有例外 - 此规则与现有用户无关。

例如：

我有三个用户：

user1@domain.com

user2@domain.com

catchall@domain.com

当有人向 user3@domain.com、user4@domain.com 发送任何电子邮件时，所有发送到此地址的电子邮件都将被重定向到 catchall@domain.com。

简而言之 - 当有人使用此域中不存在的地址发送电子邮件时，此消息将发送到地址 catchall@domain.com

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T01:49:44.120

我相信[布赖恩的回答](https://stackoverflow.com/a/11872082/7724)是行不通的。那是因为

(1) 您说您希望您的规则适用于尚不存在的用户 (2) 传输规则仅在确定收件人后才会触发

因此，如果一封电子邮件是为一个不存在的收件人发送的，那么传输代理甚至不会启动它的规则。

（好吧，我无法让这个解决方案发挥作用）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-11T12:37:26.070

根据[Brian 的回答](https://stackoverflow.com/questions/11825003/catch-all-rule-how-to-catch-all-emails-that-has-been-sent-to-not-existing-emai/11872082#11872082)，您需要创建一个传输规则，将所有邮件重定向到您域中的未知用户到 catch-all 邮箱。

但是，您还需要将域配置为内部中继域，而不是权威域；否则，Exchange 将在开始处理传输规则之前拒绝发送给不存在的用户的邮件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T19:49:03.480

如果您有类似 All Users 组的内容，其中包含域中的所有有效用户/组/等，则可以使用传输规则执行此操作。本质上，您将创建一个传输规则，上面写着“如果邮件来自，则将邮件重定向到，除非是”。您还需要禁用收件人过滤反垃圾邮件规则。

不过，一般来说，这是一个坏主意。您正在创建一个将被垃圾邮件淹没的邮箱，将占用大量磁盘空间，并且需要不断清理。确保邮箱有配额。如果您遇到大量垃圾邮件，您不希望此邮箱用完服务器上的所有磁盘空间并终止您的最终用户社区的服务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-26T22:21:56.377

github 上有一个 CatchAll Agent for Exchange（2007、2010、2013）： [https ://github.com/Pro/exchange-catchall](https://github.com/Pro/exchange-catchall)

这个重写了 RCPT TO，因此无论收件人是否存在，邮件都会被发送。

在这里，您可以定义子域或主域，并将所有不存在的邮件地址重定向到特定用户。

# java - EnumSet 的真正含义是什么？

> ID：11825009
> 
> 赞同：72
> 
> 时间：2012-08-06T08:44:11.470
> 
> 标签：java, object, enums, enumset

我有以下示例：

```
import java.util.EnumSet;
import java.util.Iterator;

public class SizeSet {

    public static void main(String[] args) {
        EnumSet largeSize = EnumSet.of(Size.XL,Size.XXL,Size.XXXL);
        for(Iterator it = largeSize.iterator();it.hasNext();){
            Size size = (Size)it.next();
            System.out.println(size);
        }
    }
}

enum Size {
  S, M, L, XL, XXL, XXXL;

} 
```

在这段代码中，我可以理解 Enum 创建了一个 Enum 类型的 Sizes。

我的问题是：是`largeSize`EnumSet 类型的对象吗？它的真正含义是什么？我真的很想更好地理解它。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-06T08:59:11.680

对于任何变量，它的类型都可以在它的声明中找到：

```
EnumSet largeSize 
```

所以是的，`largeSize`（应该命名`largeSizes`，因为它是一个集合）是 type `EnumSet`。它也应该被泛化，因此被声明为

```
EnumSet<Size> largeSizes 
```

它的意思是，它`largeSizes`是 type `EnumSet`。An`EnumSet`是一个`Set`包含特定枚举类型的枚举实例的 a，它以比其他`Set`实现（如`HashSet`、`TreeSet`等）更有效的方式。要知道 an`EnumSet`是什么，请阅读它的[API](http://docs.oracle.com/javase/8/docs/api/java/util/EnumSet.html)。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2016-01-03T12:57:16.560

简单`Enum`的是一个值列表，您一次只能从中选择*一个*。使用您的示例，对于任何给定的布料，尺寸只能是 S、M、L 等之一。您可以使用简单的常量来代替，`Enum`但这具有可读性、易于维护和严格类型检查的优点。

`EnumSet`当您需要一个变量同时假设多个值时，将使用An `Enum`。例如，您在屏幕上写入的字体可以同时是*粗体*和*斜体*。An`EnumSet`将允许您添加各种值并测试其中一个值是否在任何给定时间实际设置。如果您是从其他编程语言接触 Java 的，这就是通常称为**标志**的功能。

比较两者：

```
enum Size { S, M, L, XL, XXL, XXXL }
Size currentSize;
...
currentSize = Size.S;
...
if (currentSize == Size.S) ... 
```

定义、分配然后检查单个`Enum`值。

```
enum FontStyle { Bold, Italic, Underline, Strikethrough }
EnumSet<FontStyle> currentStyle;
...
currentStyle = EnumSet.of(FontStyle.Bold, FontStyle.Italic);
...
if (currentStyle.contains(FontStyle.Italic)) ... 
```

定义，同时分配两个`Enum`值，然后检查其中一个是否实际设置。

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2012-08-06T09:22:13.200

简化您的代码

```
EnumSet<Size> largeSize = EnumSet.of(Size.XXXL, Size.XXL, Size.XL, Size.L);
for(Size size: largeSize)
    System.out.print(size+" "); 
```

您可以看到 largeSize 是一个常规 Set，除了它旨在存储 Enum 之外。那有什么不同？首先，JVM 知道集合的所有可能值，这意味着它可以使用位图代替存储所有对象，其中 1 表示项目存在，0 表示不存在。这也意味着集合的顺序是序数值的顺序，即它们被定义的顺序。这就是为什么这个打印

```
L XL XXL XXXL 
```

如果您想了解更多详细信息，我建议您阅读本课程的源代码。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2016-08-16T14:04:31.870

来自 Joshua Bloch 的书本身和他自己的话：

> java.util 包提供 EnumSet 类来有效地表示从单个枚举类型中提取的值集。此类实现 Set 接口，提供与任何其他 Set 实现所获得的所有丰富性、类型安全性和互操作性。但在内部，每个 EnumSet 都表示为一个位向量。如果底层枚举类型有 64 个或更少的元素——而且大多数都有——整个 EnumSet 用一个 long 表示，所以它的性能与位字段的性能相当。批量操作（例如 removeAll 和 retainAll）是使用按位算术实现的，就像您手动对位字段执行的操作一样。但是您可以避免手动操作比特的丑陋和容易出错。EnumSet 为您完成了艰苦的工作。

所以我们可以做这样的事情。

```
public class SizeSet {

  public enum Size {S, M, L, XL, XXL, XXXL}

  public void applySize(Set<Size> sizes){}

} 
```

调用它的客户端代码可能会执行类似的操作

```
SizeSet largeSizeSet = new SizeSet();
largeSizeSet.applySize(EnumSet.of(Size.L, Size.XXL, Size.XXL)); 
```

请注意，applySize 方法采用的是`Set<Size>`而不是`EnumSet<Size>`. 虽然很明显并且很可能客户端会将 EnumSet 传递给方法，但接受接口而不是具体实现是一种很好的做法。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-01-09T08:43:47.153

EnumSet 专门用于存储枚举类型元素并快速迭代它。例如。

```
for (Day d : EnumSet.range(Day.MONDAY, Day.FRIDAY))
        System.out.println(d); 
```

上面的代码片段将显示从星期一到星期五的星期几。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-02-04T18:58:02.047

根据[Oracle 文档](http://docs.oracle.com/javase/8/docs/api/java/util/EnumSet.html)

> 枚举集在内部表示为位向量。这种表示非常紧凑和高效。

可读性强、类型安全、内存占用少……您还想要什么？

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-08-06T09:15:24.133

给定以下示例：

```
....
public static final String S = "s";
public static final String M = "m";
public static final String L = "l";
....

Set<String> sizeSet = new HashSet<String>();
sizeSet.add(S);
sizeSet.add(M); 
```

那么，上面例子中的 sizeSet 是什么？

EnumSet 与上面的示例没有什么不同，只是 EnumSet 是一个特殊的 Set 实现，可以与枚举类型一起使用并对其进行优化，仅此而已。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-08-10T13:12:02.233

```
EnumSet largeSize 
```

EnumSet largeSize 是一组枚举值，其中包含 XL、XXL 和 XXXL。

```
Size 
```

Size 是 Enum 类型的一个类，具有常量值 S、M、L、XL、XXL、XXXL。

```
largeSize.iterator() 
```

EnumSet 的迭代器采用自然顺序，即最初声明枚举值的顺序。

*   EnumSet 类是 Java 集合框架的成员，并且不同步。
*   它是一个高性能的集合实现，它们比 HashSet 快得多。
*   每个 EnumSet 实例的所有元素都必须是单个枚举类型的元素。

要了解更多信息，请阅读 api 文档：[http ://docs.oracle.com/javase/8/docs/api/java/util/EnumSet.html](http://docs.oracle.com/javase/8/docs/api/java/util/EnumSet.html/ "ORACLE API 文档")

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-15T10:16:02.313

An`EnumSet`是一个专门的**Set 集合**，用于处理枚举类。它实现了`Set`接口并扩展自`AbstractSet`：

[![在此处输入图像描述](../Images/da670984f652d33a488ae2b419f7341f.png)](https://i.stack.imgur.com/wtYZt.jpg)

当您计划使用 EnumSet 时，您必须考虑以下几点：

1.  它只能包含枚举值，并且所有值必须属于同一个枚举
2.  它不允许添加空值，抛出 NullPointerException 试图这样做
3.  它不是线程安全的，所以如果需要我们需要在外部同步它
4.  元素按照在枚举中声明的顺序存储
5.  它使用适用于副本的故障安全迭代器，因此如果在迭代集合时修改了集合，它不会抛出 ConcurrentModificationException

现在，这`EnumSet largeSize`部分是一个**变量声明**，所以是的，它是 EnumSet 类型。请注意，您可以在集合中添加元素的类型以获得更好的类型安全性：`EnumSet<Size>`

查看本文以[了解有关 EnumSet](https://javatutorial.net/java-enumset-example)的更多信息。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2013-07-02T12:50:58.533

它可以快速将任何 Enum 元素变成一个集合，EnumSet 是另一种类型的 Set。

```
public enum Style { BOLD, ITALIC, UNDERLINE, STRIKETHROUGH }

EnumSet.of(Style.BOLD, Style.ITALIC); 
```

# windows - 我如何确保用户我的程序不会从硬盘读取数据？

> ID：11825013
> 
> 赞同：0
> 
> 时间：2012-08-06T08:44:18.460
> 
> 标签：windows, security

我为 Windows 制作程序，可与互联网和本地数据库一起使用。我如何确保安装程序的用户我的程序不会通过互联网向我发送他的数据和文档。我认为这样做是我对编程的限制，但以 windowsXP 为例，没有这个功能......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:49:37.587

这里通常的方法是发布源代码并对二进制文件进行签名。这样，真正可疑的用户可以自己编译程序（在确保他们的编译器没有被篡改之后），而更多信任的人可以使用你签名的版本。

请注意，这并不意味着您必须将资源提供给所有人。只需提供一种与您联系的方式，以防他们需要来源。

或者，您可以将资源发送给专家并让他们证明您的程序没有做任何邪恶的事情。然后他们也可以对二进制文件进行签名。

# asp.net - 在 SQL Server 2008 中将值插入到表变量中

> ID：11825015
> 
> 赞同：0
> 
> 时间：2012-08-06T08:44:32.877
> 
> 标签：asp.net, sql-server-2008

我正在声明一个表变量，如下所示。

```
declare @TableVar table ( interval  Time not null) 
```

我需要将值作为时间从“上午 8:00”到“晚上 8:00”插入此表变量，间隔时间为 30 分钟。

我需要具有如下数据的表变量

```
8:00 am
8:30 am
9:00 am
.
.
.
12:00 pm
12.30 pm
.
.
7:00 pm
7:30 pm
8:00 pm 
```

这个 30 分钟的时间间隔来自 `DMCDur(int)`表中的一个字段。

```
DECLARE @intFlag INT
SET @intFlag = (select D.DMCDur from doctor_master D where D.doc_id=3) 
```

基本上，我需要查询一个表来获取`DMCDur`可以是：30、20、15等的列。分别代表：30分钟、20分钟、15分钟。

我需要将开始时间设置为`8:00 am`并需要添加`DMCDur`此开始时间并生成一组时间间隔为 as`DMCDur`并将这些值插入我上面提到的表变量中。

我的最终目标是将这组时间与另一个表数据连接起来并填充一个网格。于是想到了这条路。

请就此提出您的想法。我们将不胜感激提供相同的示例存储过程。注意：加入另一个表中的变量是一个 DATETIME 变量（`eg 2012-08-06 08:00:00.000`）。所以表变量也应该是 DATETIME 作为数据类型，这样我就可以用这个时间加入两个表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:10:57.850

您应该使用行生成器。我使用 [Itzik Ben Gan 的行生成器](http://www.projectdmx.com/tsql/tblnumbers.aspx)：

```
create table #TableVar  ( interval  Time not null) 

declare @elapsed int
declare @from_time time, 
        @to_time time
select @elapsed = 30, 
       @from_time = '08:00:00', 
       @to_time = '20:00:00'

;WITH 
Nbrs_3( n ) AS ( SELECT 1 UNION SELECT 0 ),
Nbrs_2( n ) AS ( SELECT 1 FROM Nbrs_3 n1 CROSS JOIN Nbrs_3 n2 ),
Nbrs_1( n ) AS ( SELECT 1 FROM Nbrs_2 n1 CROSS JOIN Nbrs_2 n2 ),
Nbrs_0( n ) AS ( SELECT 1 FROM Nbrs_1 n1 CROSS JOIN Nbrs_1 n2 ),
Nbrs ( n ) AS ( SELECT 1 FROM Nbrs_0 n1 CROSS JOIN Nbrs_0 n2 ),
D ( n ) as (SELECT ROW_NUMBER()  OVER (ORDER BY n) FROM Nbrs  ),
all_times as (
  SELECT 
     dateadd( minute, ( n - 1) * @elapsed, @from_time) as [a_time]
  FROM 
     D
  where
     n <= ( 12 * 60.0 / @elapsed ) + 1
)
insert 
into #TableVar 
select * from all_times 
```

结果：

```
;select * from #TableVar

interval 
-------- 
08:00:00 
08:30:00 
09:00:00 
09:30:00 
...
19:00:00 
19:30:00 
20:00:00 
```

*** 已编辑 ***由于 OP 更改要求：

您可以将日期时间转换为时间以获取时间部分：

```
create table #dates  ( some_date  dateTime not null) 

insert into #dates values 
( '2012-01-01 07:30:00' ),
( '2012-01-01 08:00:00' ),
( '2012-01-01 08:30:00' ),
( '2012-01-01 09:00:00' );

select           d.*, t.*
from             #dates d 
left outer join  #TableVar t 
             on  cast( d.some_date as time ) = t.interval; 
```

结果：

```
some_date             interval 
-------------         -------- 
2012-01-01 07:30:000  _NULL_        
2012-01-01 08:00:000  8:00:00 
2012-01-01 08:30:000  8:30:00 
2012-01-01 09:00:000  9:00:00 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:00:30.833

尝试这个：

```
DECLARE @intFlag INT
SET @intFlag =30

declare @start_time time='08:00:00'
declare @end_time time='20:00:00'
declare @t table (date_time datetime)

insert into @t
select DATEADD(mi,number*@intFlag,@start_time) as [time]
from master..spt_values where type='p'
and number<=12*(60/@intFlag)

select * from @t 
```

**Edit1**：根据您的最后说明：

```
 select * from @t join <other table>
 on convert(time,date_time)=convert(time,<othertableColumn >) 
```

# .net - 构造 linq 表达式的性能是否存在差异？

> ID：11825016
> 
> 赞同：4
> 
> 时间：2012-08-06T08:44:34.620
> 
> 标签：.net, performance, linq

根据`where`子句在 linq 表达式中的位置，性能是否存在差异？

看看下面的代码：

```
dbContext.AnEntity.Include("AnotherEntity").Where(e => e.ID == id).ToList();

dbContext.AnEntity.Where(e => e.ID == id).Include("AnotherEntity").ToList(); 
```

这两个表达式的执行计划是相同还是不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T08:53:45.617

理论上，没有。实际上，您将需要逐个测试，并在逐个提供者的基础上进行测试。对于一个相关（但略有不同）的示例，在 L2S 中很长一段时间，`.Where(predicate).FirstOrDefault()`并且`.FirstOrDefault(predicate)`（具有相同的语义）没有*相同*的行为（特别是与身份映射快捷方式有关）。

我*希望*它会是相同的，特别是因为`.Include`（扩展结果集）与（谓词）相比，它属于一个单独的类别，`.Where`但是：验证的唯一方法是测试它并比较生成的 SQL 和性能。

# php - 将两个项目中的两个 .htaccess 文件合并为一个

> ID：11825018
> 
> 赞同：1
> 
> 时间：2012-08-06T08:44:36.107
> 
> 标签：php, apache, .htaccess, mod-rewrite, url-rewriting

我有一个项目，我必须将其包含在项目中。所以..项目A是一个建立在自定义框架之上的网站，它使用这个.htaccess重写规则：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ index.php?url=$1 [PT,L] 
```

第二个项目 B 建立在另一个自定义框架之上，我应该让它看起来像第一个的子文件夹。所以我将项目B放在一个文件夹“子文件夹”中。项目 B 有自己的 .htaccess，如下所示：

> RewriteCond %{REQUEST_FILENAME} !-f
> 
> RewriteCond %{REQUEST_FILENAME} !-d
> 
> RewriteRule ^(.*)$ index.php?request=%{REQUEST_URI}&%{QUERY_STRING} [NE,L]

我想将它们合并到一个 .htacess 文件中，然后告诉 Apache：

如果我们有一个参数 /subfolder 将所有内容重定向到 subfolder/index.php

否则将所有内容重定向到 index.php

有什么想法我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T09:13:21.527

你应该做的是：

对于第一个项目，此 htaccess 文件位于文档根目录中

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?url=$1 [L] 
```

然后在第二个项目中，这个htaccess文件在`subfolder`目录中：

```
RewriteEngine On
RewriteBase /subfolder/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?request=%{REQUEST_URI} [NE,L,QSA] 
```

如果由于某种原因这对您不起作用，我猜一个组合的 htaccess 文件，一个位于文档根目录中的文件，看起来像这样：

```
RewriteEngine On

# for 2nd project
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?subfolder/(.*)$ /subfolder/index.php?request=$1 [NE,L,QSA]

# for 1st project
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?url=$1 [L] 
```

可能需要更多的调整。

# php - 在cakephp中获取当前年份的mysql记录

> ID：11825019
> 
> 赞同：1
> 
> 时间：2012-08-06T08:44:48.053
> 
> 标签：php, mysql, cakephp

我需要在 cakephp 中以一年的间隔获取记录。我尝试使用以下按`time`条件查询不起作用。

`$accept = $this->AssignListing->find('all',array('conditions' => array('AssignListing.writer_id' => $writer,'AssignListing.status' => 1, 'AssignListing.date_added > NOW( ) - INTERVAL 1 YEAR')));`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T08:45:52.620

在这种情况下不是更容易：

```
$str_time = date('Y-m-d H:i:s', strtotime('-1 Year'));

$accept = $this->AssignListing->find('all',array('conditions' => array(
'AssignListing.writer_id' => $writer,
'AssignListing.status' => 1, 
'AssignListing.date_added >' => $str_time))); 
```

并比较该值？如果可能，请在 php 中进行一次计算并解析它而不是在 MySQL 中。

[**strtotime()**](http://php.net/manual/en/function.strtotime.php)
[**日期()**](http://php.net/manual/en/function.date.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T08:59:09.463

我认为这会解决问题，

```
$accept = $this->AssignListing->find('all',array('conditions' => array(
'AssignListing.writer_id' => $writer,
'AssignListing.status' => 1, 
array('AssignListing.date_added BETWEEN ? AND ?' => array(date('Y-m-d', strtotime("-1 Year")), date('Y-m-d')))))); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T09:01:44.967

这对你有用。

```
$accept = $this->AssignListing->find('all',array('conditions' => array('AssignListing.writer_id' => $writer,'AssignListing.status' => 1, 'AssignListing.date_added >=' => 'DATE_ADD(NOW( ), INTERVAL -1 YEAR'))); 
```

# c++ - 为什么只能在一种情况下推导出模板参数？

> ID：11825021
> 
> 赞同：2
> 
> 时间：2012-08-06T08:44:52.070
> 
> 标签：c++, stl

为什么以下代码使用**非常量迭代器为该行编译但对于****const 迭代器**（使用 Visual Studio 2008）失败？

```
#include <vector>

using std::vector;

int main(int argc, char* argv[])
{
    vector<int> test;

    test.push_back(1);
    test.push_back(2);

    vector<int>::const_iterator cit = test.end();
    std::distance(test.begin(), cit); // error: template parameter is ambiguous

    vector<int>::iterator it = test.end();
    std::distance(test.begin(), it);

    return 0;
} 
```

* * *

注意：在 Visual Studio 2008 中，没有向量成员函数`cbegin()`来避免歧义，而是一个重载`begin()`方法：

```
iterator begin()
    {   // return iterator for beginning of mutable sequence
    return (iterator(_Myfirst, this));
    }

const_iterator begin() const
    {   // return iterator for beginning of nonmutable sequence
    return (const_iterator(_Myfirst, this));
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T08:47:30.220

该模板`distance`采用一个参数，`distance<T>(T first, T last)`. 由于`test.begin()`has type`iterator`和`cit`has type `const_iterator`，不能推导出模板参数。

你既可以用`test.cbegin()`得到保证`const_iterator`，也可以用其他方式说`static_cast<std::vector<int> const &>(test).begin()`。

（这就像您曾经说过`max<T>(T x, T y)`并试图说一样`max(1, 2U)`——它不会编译，因为它是模棱两可的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T09:32:20.200

> 注意：在 Visual Studio 2008 中，没有向量成员函数`cbegin()`来避免歧义，而是一个重载`begin()`方法：

我认为编译器*总是*为非常量对象选择非常量重载，而只为常量对象选择 const 方法。

打电话

```
std::distance(test.begin(), cit); 
```

*不*看重载集 for`begin`和 的类型`cit`，并确定它是否可以匹配。它首先解决了重载（到非常量版本），因此失败了。

表达您的意图的最简洁的方式也适用于编译器可能是：

```
vector<int> const &cref = test;
vector<int>::const_iterator cit = cref.end();
std::distance(cref.begin(), cit); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T08:53:40.743

函数模板`std::distance`只接受一个模板参数，两个函数参数必须相同。的返回类型`test.begin()`是简单的`iterator`，不是 `const_iterator`，所以函数参数的类型是不同的。编译器推导`std::vector<int>::iterator`第一个和 `std::vector<int>::const_iterator`第二个，因此推导失败。模板参数推导不*考虑*可能的转换，除了最简单的转换。

有很多方法可以解决这个问题，但它们都有明显的缺点。（这可能是委员会添加`cbegin`and `cend`函数的原因。）目前，您最好的选择可能是放弃`const`, 并同时使用`iterator`两者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T09:00:31.960

`distance`必须具有相同时间的模板参数。在这种情况下，它是`_Vector_const_iterator`。有两种重载`begin`：const 和非常量。const-version 产生`_Vector_const_iterator`，但另一个产生`_Vector_iterator`。`_Vector_iterator`继承自`_Vector_const_iterator`。

因此， const 和非常量重载`begin`都能够产生`_Vector_const_iterator`，并且它们都可以被选为非常量对象，即编译器会感到困惑。

这就是我编译它的方式：

```
 std::distance(((const vector<int>&)test).begin(), cit); 
```

# batch-file - 我的自动 USB 窃取程序有什么问题？

> ID：11825027
> 
> 赞同：-1
> 
> 时间：2012-08-06T08:45:22.580
> 
> 标签：batch-file, xcopy

我让它在我的电脑上循环潜水，当驱动器中有一个 USB 时，它会将它复制到一个文件夹中？但是当我运行它时，它不起作用有什么问题？

```
@echo off
cls
:loop
xcopy /S E:\ D:\Users\nic\Desktop\Stuff\Usb >nul 
cls
xcopy /S F:\ D:\Users\nic\Desktop\Stuff\Usb >nul
cls
xcopy /S H:\ D:\Users\nic\Desktop\Stuff\Usb >nul
cls
xcopy /S I:\ D:\Users\nic\Usb 
timeout 10
goto loop 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T08:48:09.197

您是否尝试过删除`>nul`以查看是否隐藏了信息性消息，例如等待插入驱动器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:22:05.977

试试这个

```
@echo off
:loop
xcopy /E E:\ D:\Users\nic\Desktop\Stuff\Usb >nul 
xcopy /E F:\ D:\Users\nic\Desktop\Stuff\Usb >nul
xcopy /E H:\ D:\Users\nic\Desktop\Stuff\Usb >nul
xcopy /E I:\ D:\Users\nic\Usb 
timeout /t 10
goto :loop 
```

# eclipse - 在工作区外使用 eclipse 项目（多用户）

> ID：11825032
> 
> 赞同：2
> 
> 时间：2012-08-06T08:45:42.937
> 
> 标签：eclipse, workspace, multi-user

以下场景：

我们想为我们的 Eclipse 项目使用**一个**根文件夹。自从我看到，那个**Eclipse 不支持多用户工作空间**（许多用户同时在同一个工作空间上），我正在寻找另一种解决方案。

我随机创建了一个**没有默认位置**的“新项目” ，而不是我们在工作区之外的位置（每个客户都有自己的工作区）。

Eclipse 将在*{workspace}/.metadata/.plugings/org.eclipse.core.resources/.projects/下生成*

一个文件夹，其中仅包含有关项目位置和其他一些数据（.safeable、.tree）的信息。因此，可以重命名一个项目，它会在其他客户端自动刷新。在大多数情况下，它看起来并不那么糟糕。

我的问题：我对此有一种不好的感觉。要通过源代码创建那些“链接项目”，我需要使用“内部包”。而且我不确定这是否是正确的行为。

那么你们将如何处理一些用户需要在 Eclipse 应用程序中共享二进制数据的场景。SVN 和 .git 对二进制文件不太满意。

我很感激任何建议。谢谢。

**更新**

**我是如何解决问题的：**

每个用户都有自己的工作空间。除此之外，还有“中央工作区”。它只是一个普通的工作区，但用户工作区中的每个 IProject 都从这里链接。

这是链接位于自己工作区之外的 IProject 的源代码：

```
IProjectDescription description = null;
description = ResourcesPlugin.getWorkspace().loadProjectDescription(new Path(path +"/.project"));
IProject project = ResourcesPlugin.getWorkspace().getRoot().getProject(description.getName());
project.create(description, IProject.FORCE, null);
if (!project.isOpen()) {
    project.open(null);
} 
```

**您应该在WorkspaceJob**中运行此代码。

 **之后，您可以使用实际上不在您的工作区中的 IProject 使用无限的用户。在这种情况下，您不使用任何内部包。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T10:12:10.400

使用 Eclipse 可以共享项目，但您需要记住一些重要的点：

Eclipse 不希望其他人修改项目中的文件。将编译器分配给项目时尤其如此。如果你有一个 Java 项目，那么就有一个 Java 编译器，如果其他人更改了输出文件夹中的文件，这个编译器会变得非常混乱。**从不共享具有编译器/构建器的项目。**

另一种解决方案是将二进制数据放在文件系统上的共享位置，然后使用链接将它们导入到您的项目中。请参阅[创建链接资源](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.user/tasks/tasks-45.htm)的联机帮助。这不会复制文件，它只是使资源出现在视图中。

因此，如果您需要查看文件，这种方法效果很好，但是当项目中的代码需要访问它们时（例如，单元测试）它没有帮助，因为这些链接是纯虚拟的：它们只存在于 Eclipse UI 中。

最后，SVN 和 git 都可以很好地处理二进制数据。当您结帐/更新/提交时，它们可能需要大量内存，但如果数据没有改变，您应该完全没问题（除非数据大于 1GB）。**

# php - PHP中的登录脚本

> ID：11825033
> 
> 赞同：3
> 
> 时间：2012-08-06T08:45:46.460
> 
> 标签：php, mysql

嗨，我很新，`PHP`我已经研究过`php`一`mysql`点点。

我已经创建了一个`mysql database`和一个`table`但我不知道创建一个`php`登录`script`..

谁能帮帮我

我试图用下面的代码连接数据库，但它不工作我在我的本地电脑上运行我的脚本

```
<?php

    $dbHost = "mysql";
    $dbUser = "root";
    $dbPass = "1234567";
    $dbDatabase = "db_name";
    $db = mysql_connect($dbHost,$dbUser,$dbPass)or die("Error connecting to database."); 
 ?> 
```

我 **连接到数据库时出错**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T08:48:09.237

尝试将您的主机名更改为`localhost`

此外，您应该真正考虑使用[PHP 数据对象](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)（通常称为 PDO）以获得更安全的登录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T08:47:49.690

你这个***错误连接***到数据库错误，因为你已经提到`mysql`如果`database` `host`你在本地php中运行你的主机是`localhost`

**php登录脚本如下**

将以下代码保存在`Php`文件中并将其命名为**login_page.php**

```
<form action="verify.php" method="post">
    User Name:<br>
    <input type="text" name="username"><br><br>
    Password:<br>
    <input type="password" name="password"><br><br>
    <input type="submit" name="submit" value="Login">
</form> 
```

将以下代码保存在`Php`文件中并将其命名为**verify.php**

```
<?php
if(isset($_POST['submit'])){
    $dbHost = "localhost";        //Location Of Database usually its localhost
    $dbUser = "xxxx";            //Database User Name
    $dbPass = "xxxxxx";            //Database Password
    $dbDatabase = "db_name";    //Database Name

    $db = mysql_connect($dbHost,$dbUser,$dbPass)or die("Error connecting to database.");
    //Connect to the databasse
    mysql_select_db($dbDatabase, $db)or die("Couldn't select the database.");
    //Selects the database

    /*
    The Above code can be in a different file, then you can place include'filename.php'; instead.
    */

    //Lets search the databse for the user name and password
    //Choose some sort of password encryption, I choose sha256
    //Password function (Not In all versions of MySQL).
    $usr = mysql_real_escape_string($_POST['username']);
    $pas = hash('sha256', mysql_real_escape_string($_POST['password']));
    $sql = mysql_query("SELECT * FROM users_table 
        WHERE username='$usr' AND
        password='$pas'
        LIMIT 1");
    if(mysql_num_rows($sql) == 1){
        $row = mysql_fetch_array($sql);
        session_start();
        $_SESSION['username'] = $row['username'];
        $_SESSION['fname'] = $row['first_name'];
        $_SESSION['lname'] = $row['last_name'];
        $_SESSION['logged'] = TRUE;
        header("Location: users_page.php"); // Modify to go to the page you would like
        exit;
    }else{
        header("Location: login_page.php");
        exit;
    }
}else{    //If the form button wasn't submitted go to the index page, or login page
    header("Location: index.php");    
    exit;
}
?> 
```

要检查用户的天气，请`logedin`使用以下代码

```
<?php
session_start();
if(!$_SESSION['logged']){
    header("Location: login_page.php");
    exit;
}
echo 'Welcome, '.$_SESSION['username'];
?> 
```

# java - Prefuse 中的 SpecifiedLayout 不起作用

> ID：11825034
> 
> 赞同：0
> 
> 时间：2012-08-06T08:45:48.317
> 
> 标签：java, prefuse

我在 Prefuse 中使用 SpecifiedLayout 时遇到问题。我想在已经预定义的位置设置一些节点。我尝试过使用 AxisLayout。节点设置在正确的位置，但是我不能真正使用 DragControl 或 ZoomControl 的选项。所以我尝试使用SpecifiedLayout。这里的问题是所有节点都设置在相同的位置，而不是我在开始时指定的位置。希望有人可以帮助我解决这个问题。

这是代码：

```
private static Visualization vis;
graph = new Graph();

graph.addColumn("positionx", Integer.class);
graph.addColumn("positiony", Integer.class); 
```

然后我将预定义的位置添加到“positionx”和“positiony”。然后：

```
ActionList layout = new ActionList(ActionList.INFINITY);

SpecifiedLayout l = new SpecifiedLayout("graph.nodes","positionx","positiony");
layout.add(l);
layout.add(new RepaintAction());
vis.putAction("layout", layout); 
```

正如我所说，如果我使用 AxisLayout 而不是 SpecifiedLayout：

```
layout.add(new AxisLayout("graph.nodes","positionx",Constants.X_AXIS));
layout.add(new AxisLayout("graph.nodes","positiony",Constants.Y_AXIS)); 
```

节点设置在正确的位置，但无法拖动和缩放。

我真的很感激任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T21:21:06.897

运行后我必须让它工作（定位节点）：

```
vis.run("layout"); 
```

在我向图中插入一个新节点之后。

要更新字段，您必须在项目发布后设置字段。

```
this.addControlListener(new DragControl() {
    @Override
    public void itemReleased(VisualItem item, MouseEvent e) {
        super.itemReleased(item, e);

        item.set("positionX", item.getX());
        item.set("positionY", item.getY());
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T07:49:49.683

当您说 AxisLayout 无法进行拖动和缩放时，您是什么意思？只要您添加一个 DragControl 和一个 ZoomControl 拖动和缩放应该可以工作。

例如：

```
display.addControlListener(new DragControl());
display.addControlListener(new ZoomControl()); 
```

那对你有用吗？

# c# - 如何在中继器中获取文字内容值

> ID：11825036
> 
> 赞同：2
> 
> 时间：2012-08-06T08:45:59.957
> 
> 标签：c#, asp.net, .net, repeater

我有一个中继器，如下所示。如何在后面的代码中获取报告 ID（从 hiddenContent2 中的表达式）？

表达式是

```
<%# Eval("ReportID") %> 
```

注意：我更喜欢**不**使用“FindControl”的方法。

ASP.NET

```
<asp:Repeater ID="rptReports" runat="server">
    <HeaderTemplate>
        <div></div>
    </HeaderTemplate>
    <ItemTemplate>
        <div id="repeaterIdentifier" class="repeaterIdentifier">
            <div id="reportTitle" class="reportTitle">
                <%# Eval("Title") +":" %>
            </div>
            <div id ="reportFrequency" class="reportFrequency">
                <%# " Frequency - "+ Eval("Frequeny") %>
            </div>
        </div>

        <div class="reportContent">
            <div class="repeaterLine">
                <asp:TextBox ID="txtEmailRecipients" runat="server" class="textEdit" Text='<%# Eval("Recipients")%>' TextMode="MultiLine"></asp:TextBox>
            </div>
        </div>

        <div id="hiddenContent2"> 
             <%# Eval("ReportID") %>
        </div>
    </ItemTemplate>
</asp:Repeater> 
```

代码背后

```
protected void Save_Click(object sender, EventArgs e)
{
    foreach (RepeaterItem item in rptReports.Items)
    {
        foreach(Control c in item.Controls)
        {
            string test1 = c.ID;
            Type t = c.GetType();
        }
        string emails = ((TextBox)item.Controls[1]).Text;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T08:48:48.757

试试这个，

```
foreach (RepeaterItem item in rptReports.Items)
{
    Label lblReportID= (Label)item.FindControl("lblReportID");
    string ReportID = lblReportID.Text;
} 
```

如果您使用的是“div”，请尝试以下操作：

```
 <div id="hiddenContent2" runat="server"> 
        <%# Eval("ReportID") %>
 </div>

 foreach (RepeaterItem item in rptReports.Items)
 {
     System.Web.UI.HtmlControls.HtmlGenericControl hiddenContent2 = (System.Web.UI.HtmlControls.HtmlGenericControl)item.FindControl("hiddenContent2");
     string ReportID = hiddenContent2.InnerHtml;
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T09:24:04.277

您可以使用中继器的 ItemIndex 属性。这是示例：

```
<asp:Repeater runat="server" ID="repTest">
    <ItemTemplate>
        <div id="hDiv">
            <%# Eval("SomeID") %>
        </div>
    </ItemTemplate>
</asp:Repeater> 
```

代码背后：

```
protected void Page_Load(object sender, EventArgs e)
{
    var objects =
        new object[] {
            new {SomeID = 1},
            new {SomeID = 2},
            new {SomeID = 3},
            new {SomeID = 4}
        };

    repTest.DataSource = objects;
    repTest.DataBind();
}

protected void btnClick(object sender, EventArgs e)
{
    var data = (object[])repTest.DataSource;
    foreach (RepeaterItem item in repTest.Items)
    {
        var obj = data[item.ItemIndex];
        var id = obj.GetType().GetProperty("SomeID").GetValue(obj, null);
    }
} 
```

所以，你需要做两件事。

*   将 DataSource 转换为您的类型。（我使用 object[] 只是为了示例）。*   将 data[item.ItemIndex] 转换为您的类型。我只是使用反射，因为我有 anonimus 类型，所以如果你有一个类型，你可以转换它。

# php - Yii - 控制器 - 更改 db 上的标志/布尔值的功能

> ID：11825038
> 
> 赞同：0
> 
> 时间：2012-08-06T08:46:03.347
> 
> 标签：php, object, frameworks, model, yii

我正在和 Yii 一起做一个项目。我目前正在后端工作。我正在控制器中实现一个函数，该函数应该加载模型，更改数据库中的值（从 0 变为 1 的 tinyint），然后重定向到另一个 url。我想以与使用 CRUD 生成器生成的“删除”函数相同的方式使用此函数。因此，在“删除”功能上启发了自己，我正在尝试将这个用于“接受”功能：

```
 public function actionAccept($id) {
    if(Yii::app()->request->isPostRequest)
    {
        $model = $this->loadModel($id);
        $model->testimonial_accepted = '1';
        $model->save();

        // if AJAX request we should not redirect the browser
        if(!isset($_GET['ajax']))
            $this->redirect(isset($_POST['returnUrl']) ? $_POST['returnUrl'] : array('admin'));
    }
    else
        throw new CHttpException(400,'Invalid request. Please do not repeat this request again.');
    } 
```

我在视图中调用“接受”函数，如下所示：

```
 array('label'=>'Accept Client', 'url'=>'#', 'linkOptions'=>array('submit'=>array('accept','id'=>$model->id),'confirm'=>'Are you sure you want to accept this item?')), 
```

运行时，没有错误。它加载了正确的模型，但不会更改数据库中的值（testimonial_accepted）。你知道为什么吗？我究竟做错了什么？

提前致谢，

苏皮里奥斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:42:02.693

在您的链接中，路径应采用以下形式，`<controller>/<action>`因此假设您的控制器名称是，`foo`那么您应该说：

```
array('submit'=>array('foo/accept','id'=>$model->id) 
```

我同意@Boris，你应该使用更新，而且数据操作代码最好在模型中遵循 MVC 最佳实践，所以它看起来像这样：

**控制器：**

```
 $model = $this->loadModel($id);
        $model->acceptTestimonial(); // a model function
        $this->redirect(array('action_you_choose')); 
```

**模型：**

```
public function acceptTestimonial()
{
    $this->testimonial_accepted = '1';
    $this->update(array('testimonial_accepted'));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:11:08.623

首先，检查这是否有效：

```
$model->save( false ); 
```

如果它有效，这意味着模型的数据没有被保存，因为验证失败（例如检查模型的规则并最终定义新的场景）。

在这种情况下，我认为使用*update*而不是*save*方法更合适：

```
$model->setAttribute( 'testimonial_accepted', 1 );
$model->update( array( 'testimonial_accepted' ) ); 
```

# c++ - 了解“受保护虚拟”和“公共虚拟”之间的比较

> ID：11825039
> 
> 赞同：2
> 
> 时间：2012-08-06T08:46:06.120
> 
> 标签：c++

问题来自 C++ 常见问题解答。

[http://www.parashift.com/c++-faq-lite/protected-virtuals.html](http://www.parashift.com/c++-faq-lite/protected-virtuals.html)

使用公共重载虚拟的代码：

```
class Base {
public:
  virtual void f(int x);    ← may or may not be pure virtual
  virtual void f(double x); ← may or may not be pure virtual
}; 
```

通过 Public Overloaded Non-Virtuals Call Protected Non-Overloaded Virtuals 成语改进这一点：

```
class Base {
public:
  void f(int x)    { f_int(x); }  ← non-virtual
  void f(double x) { f_dbl(x); }  ← non-virtual
protected:
  virtual void f_int(int);
  virtual void f_dbl(double);
}; 
```

作者说：

> Public Overloaded Non-Virtuals Call Protected Non-Overloaded Virtuals 习语的想法是将公共重载方法更改为非虚拟，并使那些调用受保护的非重载虚拟。

但我不明白作者对这个成语如何提高风险所说的话：

> 该成语将正确管理隐藏规则的复杂性打包到基类（单数）中。这意味着派生类（复数）或多或少会自动处理隐藏规则，因此生成这些派生类的各种开发人员几乎可以完全专注于派生类本身的细节——他们不需要关心 (微妙且经常被误解）隐藏规则。这大大降低了派生类的编写者搞砸隐藏规则的机会。

为什么这解决了隐藏问题？据我了解，名称隐藏与成员函数是否“虚拟”无关。如果“base”的派生类重写了函数 f()，它仍然会隐藏 f(int) 和 f(double)，对吗？

从这个习语中我只能看到作者将'base'虚拟f（）更改为非虚拟，并将辅助函数f_int（），f_dbl（）放在'protected virtual'中，就像成语的名字所说的那样。它还没有什么好处，但相反消除了从基类指针/引用动态绑定的可能性。这个成语的真正好处是什么？

## 更新

克雷克，你是在说这个吗？我不完全理解你回答的第二段。你能举个例子吗？

```
class base {
public: 
    virtual void f(int x);
    virtual void f(double x);
}

class derived : public base {
public:
    virtual int f(int x); // oops, will hide base::f(int x) AND base::f(double x)
}

base *bp = new base();
base *dp = new derived();
bp->f(int i);    // ok
dp->f(int i);    // surprise!
dp->f(double d); // compile error!

class Base {
public:
    void f(int x)    { f_int(x); }  
    void f(double x) { f_dbl(x); } 
protected:
    virtual void f_int(int);
    virtual void f_dbl(double);
};

class derived : public base {
public:
    // nothing to override here 'cause f() is non virtual
protected:
    // because f_int() and f_dbl are unique names, override or hide f_int() will not affect f_dbl()?
    virtual int f_int(int);  // oops, will hide base::f(int x), but developer may want this on purpose
                             // no effect on f_dbl(), which is good
}

base bobj;
derived dobj;
bobj.f(int i);    // ok
dobj.f(double d); // ok 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T08:53:47.487

如果派生类声明了`void f(int)`，那么它*会覆盖*虚函数，并且说明`virtual`符是隐含的。如果派生类声明`int f(int)`，它会*隐藏*基函数。我猜你对此很熟悉。

当您希望其他人基于您的基类开发代码时，问题就来了。使用幼稚的方法，每个派生类都必须小心添加正确的覆盖，以免意外隐藏函数并获得正常工作但错误的程序（即用户说`f()`但得到错误的东西）。使用“public non-virtual”习惯用法，用户总是可以`f()`放心调用，并且库开发人员可以通过覆盖唯一命名的受保护函数来仅覆盖她感兴趣的部分，而无需触及可能影响*其他*用户的名称.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T08:53:02.263

我所能看到的是，它会减少您链接到`SomeDerived::f()`而不是使用 virtual的可能性`Base::f()`，尽管我不记得到目前为止我已经发现编译器对此有罪。正在寻找其他人提出更好的答案...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T09:20:15.227

至少从历史上看，使用非公共虚函数的主要动机是支持合约编程。`Base`定义合同 中的（非虚拟）公共功能，具有`assert`（或类似的）前置条件和后置条件以及不变量。他们转发到私有或受保护的虚拟功能以进行实际工作。因此，例如，`clone`可以定义经典函数：

```
class Base
{
    virtual Base* doClone() const = 0;
public:
    Base* clone() const
    {
        Base* results = doClone();
        assert( typeid(*this) == typeid( *results ) );
        return results;
    }
}; 
```

在 的情况下`clone`，这种保护可能是矫枉过正的；我还没有看到由于派生类错误实现它（或未能实现它，如果有多个派生级别）导致的任何问题。然而，对于大多数其他功能，它是开发健壮软件的一种强大而有效的方法。

如果您在接口中有重载函数，*并且*它们有不同的实现，我看不出有任何不重载虚函数的真正理由。

# workflow - 我能得到一些关于 Joget 开源 BPM 的反馈吗

> ID：11825040
> 
> 赞同：1
> 
> 时间：2012-08-06T08:46:07.787
> 
> 标签：workflow, open-source, business-process-management, joget, jogetworkflow

有没有人尝试使用 Joget BPM，我喜欢它在社区版中提供的功能，但是如果有人尝试过，我需要得到一些反馈？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T16:03:47.273

这么晚才回复很抱歉。 `Joget`是 BPM/工作流领域的真正竞争对手。

我们将企业版用于一些非常复杂的工作流程，并且它完美地执行。他们的支持人员很棒（是的，他们在马来西亚，所以回答需要 10-12 小时），我们与该小组的每一次互动都是积极的。他们甚至根据我们的一个初始设计为我们开发了一个概念验证——这使我们能够立即获得牵引力，我们将其用作添加功能的指南。

该界面设计得非常好，支持我们测试过的所有浏览器（包括移动设备）。此外，作为企业客户，我们已经能够指导产品开发，甚至根据我们的输入添加了功能。

我可以告诉你，3.1 版（目前处于测试阶段，但我们正在生产中使用它）甚至更好！

对于一个类似的平台，我们确实在这里做了功课，我们公司在最接近的竞争对手的产品上的花费大约是 8 倍。祝您搜索顺利，希望输入对您有所帮助！

# android - Linux 环境变量的安全性 (android)

> ID：11825041
> 
> 赞同：0
> 
> 时间：2012-08-06T08:46:12.113
> 
> 标签：android, linux, path

考虑 LD_LIBRARY_PATH 的例子（它决定了加载库时在哪里查看），每个进程是否都获得了这个的私有副本？如果某个流程（应用程序）要对其进行修改，它是否无处不在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:14:34.687

环境变量是在每个进程的基础上设置的。所以，是的，每个进程都有一个私有副本，另一个修改 LD_LIBRARY_PATH 的进程不会影响你自己的。

但是，您的 shell 进程可能会保留一个环境变量列表，通过在启动时将变量数组和设置移交给这些进程来为其所有派生的子进程设置。

# loops - Powershell按顺序循环子文件夹

> ID：11825043
> 
> 赞同：1
> 
> 时间：2012-08-06T08:46:14.980
> 
> 标签：loops, powershell

我想使用 power shell 循环所有子文件夹并运行其中的所有文件。但是，如果我的根目录包含 3 个子文件夹，我想按照以下顺序循环并列出它：子文件夹 C 、子文件夹 B 和子文件夹 A 以便文件执行将按照顺序运行（ C-->B-- >一）。

以下是我的编码，请就此提出建议。太感谢了。

```
Get-ChildItem -path "C:\Root\subfolders\" -recurse -Filter *.sql |
foreach-object -process { $.FullName }| ForEach-Object { sqlcmd -i $ } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:03:13.620

[在使用Sort-Object](http://technet.microsoft.com/en-us/library/ee176968.aspx) cmdlet执行文件之前，您可以按*其父文件夹*的名称对要运行的文件列表进行**排序：**`.sql`

 *```
Get-ChildItem "C:\Root" -Recurse -Filter *.sql | `
Sort-Object -Property DirectoryName -Descending | `
Foreach-Object -Process { sqlcmd -i $.FullName } 
```*

# sql-server - TSQL XML 字符转义

> ID：11825050
> 
> 赞同：0
> 
> 时间：2012-08-06T08:46:37.100
> 
> 标签：sql-server, tsql, sqlxml

我尝试将其转换为 XML：

```
声明@xml XML；
SELECT @xml = (SELECT 'xxx' + nchar(0x10) FOR XML PATH('') );

```

我收到错误：XML 解析：第 1 行，字符 9，非法 xml 字符

但这很好用：

```
选择 'xxx' + nchar(0x10) FOR XML PATH('') 

```

有解决方法吗？

在 MS Connect 上没有任何用处： [https ://connect.microsoft.com/SQLServer/feedback/details/547817/xml-type-does-not-accept-all-character-escape-sequences](https://connect.microsoft.com/SQLServer/feedback/details/547817/xml-type-does-not-accept-all-character-escape-sequences)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T08:56:00.557

我认为您不能使用任何不包含当前 sql server 排序规则的字符来分配给 xml 变量。

# java - android中语音算法或代码的重复词检测

> ID：11825051
> 
> 赞同：2
> 
> 时间：2012-08-06T08:46:41.280
> 
> 标签：java, android, speech-recognition

是否有参考代码或算法可以对语音进行重复词检测？因此，在这种算法中，可以找出某人在某个时间最常说的话。非常感谢。

# ios - 在 iPhone 应用程序中集成 admob 时出错

> ID：11825052
> 
> 赞同：1
> 
> 时间：2012-08-06T08:46:41.767
> 
> 标签：ios, admob

“_GADAdSizeFromCGSize”，引用自：-[AdWhirlAdapterGoogleAdMobAds getAd] in AdWhirlAdapterGoogleAdMobAds.o 未找到架构 armv7 的符号

链接器命令失败，退出代码为 1（使用 -v 查看调用）

请帮助我..无法找到它为什么显示？我已经添加了所有需要的框架，但它仍然显示此错误。

我正在关注本教程 [http://www.raywenderlich.com/2011/11/24/how-to-integrate-adwhirl-into-a-cocos2d-game/](http://www.raywenderlich.com/2011/11/24/how-to-integrate-adwhirl-into-a-cocos2d-game/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T14:56:12.633

确保将 libGoogleAdMobAds.a 添加到链接框架中，并将 -all_load 添加到构建设置中的 Other Linker Flags 部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:21:36.270

`Google AdMob SDK`在使用旧 SDK 向现有项目添加新项目时遇到此问题。

出于某种原因，新的 SDK`Library Search Paths`与旧的 SDK 一起被添加到了“”中。因此，从`Build Settings`中删除不必要的 AdMod SDK `Library Search Paths`，您就可以开始使用了。

还要添加`-all_load`到“其他链接器标志”以避免再次`[GADBannerView private]: unrecognized selector`崩溃。

# python-3.x - Pygame TypeError：'int'对象不可调用

> ID：11825053
> 
> 赞同：4
> 
> 时间：2012-08-06T08:46:43.277
> 
> 标签：python-3.x, pygame, typeerror

这几行 python 3.2 代码使用最新的 pygame 模块来移动图像。它与这个例子有关：http: [//www.pygame.org/docs/tut/MoveIt.html](http://www.pygame.org/docs/tut/MoveIt.html)

这是我的代码：

```
import pygame
import sys 

pygame.init()
screen = pygame.display.set_mode((600,400))
bg = pygame.image.load('bg.jpg')
player = pygame.image.load('player.jpg')
pos = player.get_rect()

while True:
    for i in pygame.event.get():
       if i.type() == pygame.QUIT:
            sys.exit()
    screen.blit(bg,(0,0))
    screen.blit(player,(i,i))
    pygame.display.update() 
```

这是我在运行它时遇到的错误：

> Traceback（最近一次调用最后一次）：
> 文件“C：/Users/Grounds Keeper Willy/Desktop/Python Code/test.py”，第 12 行，在
> if i.type() == pygame.QUIT:
> TypeError: 'int'对象不可调用

我发现了类似的问题，但答案表明问题也在于使用函数名作为变量，这不是我正在做的。我似乎无法弄清楚这里出了什么问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T08:55:51.883

它应该是：

```
if i.type == pygame.QUIT: 
```

代替：

```
if i.type() == pygame.QUIT: 
```

由于该类的`type`成员`Event`不是函数，因此您不需要/可以使用`()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-25T00:02:27.753

我试过这个，使用这个：

```
run = True
    while run:
        clock.tick(fps)
        for event in pyg.event.get():
            if event.type == pyg.QUIT():
                run = False 
```

（将 pygame 导入为 pyg）

但我仍然收到这条消息：

> 文件“/home/ghensley/python/pygametutorial/main.py”，第 11 行，在 main if event.type == pyg.QUIT(): TypeError: 'int' object is not callable

# c# - 获取远程计算机中的 Outlook PST 列表，C#

> ID：11825056
> 
> 赞同：1
> 
> 时间：2012-08-06T08:46:57.193
> 
> 标签：c#, outlook, registry, wmi

我需要获取`(PST's)`当前在远程计算机上登录的用户的 Outlook 个人文件夹文件列表。

我尝试使用`Win32_DataFile`（使用 Microsoft 的 WMI Creator），但没有成功。在互联网上搜索总是给我关闭的结果，但不是我想要的。我尝试访问 Microsoft 网站并查看有关 Inter-op Assembly 的文档：http: [//msdn.microsoft.com/en-us/library/office/bb652780](http://msdn.microsoft.com/en-us/library/office/bb652780)。

我正在使用`WMI`或注册表连接到远程机器（这两种方法都是可能的）。

你能帮我么 ？

谢谢 ！！

# error-handling - 自定义 Liferay 错误消息

> ID：11825061
> 
> 赞同：1
> 
> 时间：2012-08-06T08:47:14.093
> 
> 标签：error-handling, liferay, portlet

我正在为 Liferay 6.1 开发一个 portlet。在某些时候，我正在评估来自表单的输入。如果输入无效，我将显示一条错误消息`<liferay-ui:error>`。理想情况下，我想在该消息中包含无效值。

示例：有一个文本输入应该只接受数字。用户输入字母“A”并提交表单。Portlet 显示“抱歉，'A' 不是数字”。（我知道我可以简单地在客户端上检查它。但在我的情况下，它是更复杂的数据。）

有没有办法为此使用 value 参数`add(PortletRequest portletRequest, String key, Object value)`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:57:42.747

我还没有找到如此明确的解决方案，并使用了我自己的错误输出：

```
<%
    String myError = (String)request.getAttribute("my-custom-error");
%>
<c:if test="<%= (myError != null) %>">
        <div class="portlet-msg-error">
            <%= myError %>
        </div>
</c:if> 
```

css 类“portlet-msg-error”来自 liferay，用于默认错误渲染。

在后端将“my-custom-error”值放入请求中：

```
actionRequest.setAttribute("my-custom-error", "Sorry, " + value + " is not a number."); 
```

但我更喜欢使用 liferay-error-tag 的解决方案。

# objective-c - NSUserNotificationCenter：是否启用？

> ID：11825063
> 
> 赞同：0
> 
> 时间：2012-08-06T08:47:18.993
> 
> 标签：objective-c, notifications

在 MacOS 10.8 上，如何确定通知中心是否启用？我需要知道这一点才能选择如何通知用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T13:11:44.253

您可以读取存储在 ~/Lbrary/Application Support/NotificationCenter/ 中的通知中心的 sqlite 数据库，该数据库存储用户是否为应用启用通知中心的信息。[此处](https://github.com/timschroedernet/ncMeta)提供示例代码。

# c++ - C ++之类的与C之类的演员表？

> ID：11825068
> 
> 赞同：-2
> 
> 时间：2012-08-06T08:47:32.170
> 
> 标签：c++, c, casting

> **可能重复：**
> [常规演员表与 static_cast 与 dynamic_cast](https://stackoverflow.com/questions/28002/regular-cast-vs-static-cast-vs-dynamic-cast)

自从我开始编程以来，我一直在使用类似 C 的演员表：

```
class* initializedClassInstance;
void* test = (void*) initializedClassInstance; 
```

我在某处被告知我应该习惯 C++ 强制转换（static_cast、dynamic_cast...）。

是否有理由更喜欢其中一个（C++ 而不是 C 风格）？静态演员表和动态演员表是有区别的，对吧？但它是什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T08:51:17.587

C 风格的强制转换是不安全的。

C++ 风格的强制转换以另一种方式表现。`static_cast`如果它不能进行强制转换，会给你一个编译错误。 `dynamic_cast`如果你正在转换指针，on fail 将转换为 NULL，否则抛出异常。

因此，这使您可以编写更安全的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T08:48:52.127

就在这里。它给你支票。`static_cast`例如，为您提供编译时检查并`dynamic_cast`为您提供运行时检查。

[你可以在这里](http://msdn.microsoft.com/en-us/library/5f6c9f8h%28v=vs.80%29)阅读更多`casts`

# wordpress - Wordpress mod_rewrite 和自定义规则

> ID：11825069
> 
> 赞同：0
> 
> 时间：2012-08-06T08:47:46.663
> 
> 标签：wordpress, apache, .htaccess, mod-rewrite

我得到了在帖子名称结构上配置的默认 Wordpress .htaccess (http://exampleblog.com/dev/the-post-slug)

这是.htaccess

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /dev/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /dev/index.php [L]
</IfModule>   
# END WordPress 
```

我需要的是在像[http://exampleblog.com/dev/the-post-slug](http://exampleblog.com/dev/the-post-slug)这样的 URL 中我可以添加我自己的 sulfixes，比如[http://exampleblog.com/dev/the-post-slug/mydemo](http://exampleblog.com/dev/the-post-slug/mydemo)，我想指出现在是[http://exampleblog.com/dev/wp-content/themes/the-theme/my-custom-folder](http://exampleblog.com/dev/wp-content/themes/the-theme/my-custom-folder)

所以我需要访问这个 URL [http://exampleblog.com/dev/the-post-slug/mydemo](http://exampleblog.com/dev/the-post-slug/mydemo)来显示这个真实补丁的内容 [http://exampleblog.com/dev/wp-content/themes/the-主题/我的自定义文件夹](http://exampleblog.com/dev/wp-content/themes/the-theme/my-custom-folder)，我只是找不到方法

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:02:44.490

对于您问题的第一部分，您可以将“the-post-slug”设置为“mydemo”的父页面，并且网址会自动按照您的意愿完成。

对于第二部分，您可以编写一个短代码，让您从不同的页面加载内容（例如使用 file_get_contents、一个 iframe，或者如果您不关心 URL 是否保持不变，甚至只是一个实际的重定向，只是它存在以将用户带到他们需要的地方）。在重定向代码的情况下，您最好使用钩子，因为可以在标头已经发送到浏览器之后运行短代码。

这样您就不必担心您的额外 .htaccess 规则会被 WordPress 覆盖，并且将来所有这些都可以通过 CMS 进行管理，而不必编辑任何文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T08:54:27.163

您是否尝试过在永久链接设置中执行此操作？`Settings → Permalinks`. 看起来你可能正在寻找类似的东西：`/%category%/%postname%/`.

有关这方面的更多信息，以及直接使用带有 Wordpress URL 的 .htaccess 可以在此处找到：[http ://codex.wordpress.org/Using_Permalinks](http://codex.wordpress.org/Using_Permalinks)

# shell - 如何迭代地连接子目录中的文件

> ID：11825070
> 
> 赞同：0
> 
> 时间：2012-08-06T08:47:47.410
> 
> 标签：shell, foreach

我有一堆目录，在每个目录中我都有一堆子目录，在每个子目录中我有 1 个文件命名`x1`并且*可能*也有`y1` `z1`。

我想为每个目录创建一个 shell 脚本，它遍历子目录并将所有`x1`s 连接到一个文件以及所有`y1`s 和所有`z1`s。

我努力了

```
cat ./*/*.x1 >test 
```

我不知道它如何与每个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:16:13.327

如果您正在使用`zsh`此`for`循环工作：

```
for dir in *(/); do
  cat "$dir"/*.x1 > "$dir"/combined.x1
  [[ -n "$dir"/*.y1 ]] && cat "$dir"/*.y1 > "$dir"/combined.y1
  [[ -n "$dir"/*.z1 ]] && cat "$di"r/*.z1 > "$dir"/combined.z1
done 
```

### 更新

因为`bash`看起来你只需要更新`dir`模式：

```
for dir in */; do
  cat "$dir"/*.x1 > "$dir"/combined.x1
  [[ -n "$dir"/*.y1 ]] && cat "$dir"/*.y1 > "$dir"/combined.y1
  [[ -n "$dir"/*.z1 ]] && cat "$di"r/*.z1 > "$dir"/combined.z1
done 
```

# objective-c - UITableViewController 中 UITableView 顶部的 UIView 没有滚动

> ID：11825073
> 
> 赞同：1
> 
> 时间：2012-08-06T08:47:50.280
> 
> 标签：objective-c, xcode, uitableview, storyboard

我在uiTableViewController上面添加了uiView，

在我的表格里面，我有一些带有滚动条的数据，但我不想在表格上方滚动这个 uiview

有谁知道我该怎么办？

提前致谢！

![在此处输入图像描述](../Images/f75490a98c37d207cf2f43d56ad90326.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T08:58:45.127

不要使用`UITableViewController`. 在顶部使用 a`UIViewController`和 a`UITableView`和您的附加。`UIView`TableView 控制器期望它的视图是唯一的。将 View Controller 与 TableView 一起使用可以为您提供更大的灵活性（`UISearchBar`始终可见的 A 也是其中之一）

# iphone - UITextView 委托方法

> ID：11825078
> 
> 赞同：10
> 
> 时间：2012-08-06T08:48:10.313
> 
> 标签：iphone, ios, xcode, uitextview

我试图让委托方法与 UITextView 一起使用，但由于某种原因它不起作用。

我在 viewController.h 中声明它是 UITextViewDelegate

当我点击 textView 时，我试图让以下代码工作以擦除默认代码“TEXT”。

```
- (void)textViewDidBeginEditing:(UITextView *)textView {

    if (myTextView.text == @"TEXT") {
        [myTextView setText:@""];
    }

    NSLog(@"did begin editing");
} 
```

当我点击 textView 并出现键盘时，我希望文本被清除并看到 NSLog 打印。什么都没有发生

* * *

顺便使用文本视图，因为我需要根据其内容大小缩放视图，并且似乎 textView 具有 contentSize 属性，而白色标签和 textField 则没有。

更新：

我应该使用：

```
if ([myTextView.text isEqualToString:@"TEXT"]) {
    [myTextView setText:@""]; } 
```

[如果您想看一下，这里是项目。](http://owolf.net/uploads/StackOverflow/UITextViewTest.zip)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T08:52:52.943

**您的Test2ViewController.m**文件中缺少此方法：

```
- (void)viewDidLoad {
    [myTextView setDelegate:self];
} 
```

或者，如果您更喜欢这种方式，您也可以在*Interface Builder*中连接委托。

**更新＃1：**

将此方法添加到您的类中以控制`return`密钥。

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {
    if ([text isEqualToString:@"\n"]) {
        NSLog(@"Return pressed, do whatever you like here");
        return NO; // or true, whetever you's like
    }

    return YES;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T08:50:18.957

将 Interface Builder 中的 TextView 的委托连接到父类。我喜欢在 IB 中使用连接而不是对其进行编码。对我来说，代码越少越好:)。另外 - 不要那样比较字符串。使用 isEqualToString 进行字符串比较：

```
if ([myTextView.text isEqualToString:@"TEXT"]) {
        [myTextView setText:@""];
} 
```

![连接图片](../Images/ced6694b309ed809fd0f75b94b4424e5.png)

[这](https://dl.dropbox.com/u/3660978/Test2_Fixed.zip)是固定项目：

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-14T22:54:55.030

我认为原则上我有一个很好的解决方案：

将 UITextView 的委托设置为 self，然后制作您自己的委托 - 重新使用相同的名称。这使您可以拦截委托，而不会与外部看起来有任何不同

```
@interface TTGTextView : UITextView<UITextViewDelegate>// UIPlaceHolderTextView
@property(nonatomic, assign) id<UITextViewDelegate> delegate;
@synthesize delegate = realDelegate; 
```

然后继续拦截方法。请注意，您需要覆盖所有这些，否则它们不会对“真正的”委托做出反应

```
-(void)textViewDidBeginEditing:(UITextView *)textView
{
  if ([realDelegate respondsToSelector:@selector(textViewDidBeginEditing:)])
    [realDelegate textViewDidBeginEditing:textView];
  /*YOUR CODE HERE*/
}
-(void)textViewDidChange:(UITextView *)textView
{
  if ([realDelegate respondsToSelector:@selector(textViewDidChange:)])
    [realDelegate textViewDidChange:textView];
  /*YOUR CODE HERE*/
}
-(void)textViewDidChangeSelection:(UITextView *)textView
{
  if ([realDelegate respondsToSelector:@selector(textViewDidChangeSelection:)])
    [realDelegate textViewDidChangeSelection:textView];
  /*YOUR CODE HERE*/
}
-(void)textViewDidEndEditing:(UITextView *)textView
{
  if ([realDelegate respondsToSelector:@selector(textViewDidEndEditing:)])
    [realDelegate textViewDidEndEditing:textView];
  /*YOUR CODE HERE*/
}

- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
  if ([realDelegate respondsToSelector:@selector(textView:shouldChangeTextInRange:replacementText:)])
    return [realDelegate textView:self shouldChangeTextInRange:range replacementText:text];
  return YES;
}
-(BOOL)textView:(UITextView *)textView shouldInteractWithURL:(NSURL *)URL inRange:(NSRange)characterRange
{
  if ([realDelegate respondsToSelector:@selector(textView:shouldInteractWithTextAttachment:inRange:)])
    return [realDelegate textView:self shouldInteractWithURL:URL inRange:characterRange];
  return YES;
}
- (BOOL)textView:(UITextView *)textView shouldInteractWithTextAttachment:(NSTextAttachment *)textAttachment inRange:(NSRange)range
{
  if ([realDelegate respondsToSelector:@selector(textView:shouldInteractWithTextAttachment:inRange:)])
    return [realDelegate textView:textView shouldInteractWithTextAttachment:textAttachment inRange:range];
  return YES;
} 
```

一些方法正确触发，其他方法根本不为我触发，而是立即为“真正的”委托出现。但这是一个起点。我想一种更可靠和更通用的方法是制作某种多路复用器 - 使其成为 UITableViewDelegate ，其中包含要触发的委托数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T08:57:05.333

你的 UITextview 需要被告知它的委托方法在哪里......

如果您通过界面生成器添加它，那么只需连接代表

或者如果通过代码

```
[yourTextViewOutlet setDelegate:self]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-28T08:14:41.840

取决于你的观点。如果您使用 TextField，您应该在 .header 文件中使用 UITextFieldDelegate 作为委托，如下所示。

```
@interface ExamPageViewController : UIViewController <UITextFieldDelegate> 
```

而且我们可以使用 UITextFieldDelegate 方法。你可以看到；

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    [self.questionAnswerTextField resignFirstResponder];
    return YES;
}

-(void)textFieldDidBeginEditing:(UITextField *)textField {

    if ([textField.text isEqualToString:@"Sorunun cevabını buraya yazınız!"]) {
        textField.text = @"";
    }
}

- (void)textFieldDidEndEditing:(UITextField *)textField {
    if ([textField.text isEqualToString:@""]) {
        textField.text = @"Sorunun cevabını buraya yazınız!";
    }
} 
```

否则，您应该使用 UITextViewDelegate 作为委托，如下面的代码片段。

```
@interface ExamPageViewController : UIViewController <UITextViewDelegate> 
```

而且我们可以在 .m 文件中使用这些委托方法

```
- (BOOL)textViewShouldReturn:(UITextView *)textField {
    [self.questionAnswerTextField resignFirstResponder];
    return YES;
}

-(void)textViewDidBeginEditing:(UITextView *)textField {

    if ([textField.text isEqualToString:@"Sorunun cevabını buraya yazınız!"]) {
        textField.text = @"";
    }
}

- (void)textViewDidEndEditing:(UITextView *)textField {
    if ([textField.text isEqualToString:@""]) {
        textField.text = @"Sorunun cevabını buraya yazınız!";
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-07T10:43:22.313

***斯威夫特 4,5***

将此扩展名写在控制器的底部。它可用于在 textView 中显示和隐藏占位符。

```
extension ViewController: UITextViewDelegate {
    func textViewDidBeginEditing(_ textView: UITextView) {
        if textView == yourTxtView {
            txtNote.text = ""
            txtNote.textColor = .black
        }
    }

    func textViewDidEndEditing(_ textView: UITextView) {
        if textView == yourTxtView {
            txtNote.text = "Note:"
            txtNote.textColor = .gray
        }
    }
} 
```

# c++ - 为什么长长联合成员的对齐大于包含联合/结构？这个对吗？

> ID：11825081
> 
> 赞同：8
> 
> 时间：2012-08-06T08:48:27.583
> 
> 标签：c++, g++, memory-alignment, unions, unsigned-long-long-int

从[这个问题](https://stackoverflow.com/questions/4496423/memory-alignment-issues-with-union)可以开始相信工会的联盟不小于其个人成员的最大联盟。但我对`long long`gcc/g++ 中的类型有疑问。完整的例子可以在[这里](http://ideone.com/C7Qen)找到，但这里是我的问题的相关部分：

```
union ull {
  long long m;
};

struct sll {
  long long m;
};

int main() {
#define pr(v) cout << #v ": " << (v) << endl
   pr(sizeof(long long));
   pr(__alignof__(long long));
   pr(sizeof(ull));
   pr(__alignof__(ull));
   pr(sizeof(sll));
   pr(__alignof__(sll));
}; 
```

这将产生以下输出：

```
sizeof(long long): 8
__alignof__(long long): 8
sizeof(ull): 8
__alignof__(ull): 4
sizeof(sll): 8
__alignof__(sll): 4 
```

为什么工会成员的对齐比包含工会的大？

**[更新]**

根据基思的回答**alignof**在这里是错误的。但是我测试了以下内容，似乎**alignof** 告诉了我们真相。看：

```
union ull {
  long long m;
};
long long a;
char b;
long long c;
char d;
ull e;
int main() {
#define pr(v) cout << #v ": " << (v) << endl
   pr(size_t((void*)&b));
   pr(size_t((void*)&c));
   pr(size_t((void*)&d));
   pr(size_t((void*)&e));
   pr(size_t((void*)&c) - size_t((void*)&b));
   pr(size_t((void*)&e) - size_t((void*)&d));
}; 
```

输出：

```
size_t((void*)&b): 134523840
size_t((void*)&c): 134523848
size_t((void*)&d): 134523856
size_t((void*)&e): 134523860
size_t((void*)&c) - size_t((void*)&b): 8
size_t((void*)&e) - size_t((void*)&d): 4 
```

因此，全局数据中的对齐`long long`为 8，包含联合的对齐`long long`为 4。对于本地范围，我无法对此进行测试，因为编译器似乎可以自由地重新排列本地数据 - 所以这个技巧不起作用。你能对此发表评论吗？

**[/更新]**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T09:10:03.040

`__alignof__`（这是 gcc 扩展）不一定报告类型*所需*的对齐方式。

例如，x86 处理器对于任何类型实际上并不需要超过 1 字节的对齐。如果对象是字对齐的，则访问 4 字节或 8 字节对象的效率可能会更高，但字节对齐就足够了。

引用[gcc 文档](http://gcc.gnu.org/onlinedocs/gcc-4.7.1/gcc/Alignment.html#Alignment)：

> 有些机器实际上从不需要对齐；即使在奇数地址，它们也允许引用任何数据类型。对于这些机器， `__alignof__`报告 GCC 将给出的数据类型的最小对齐，通常由目标 ABI 规定。

但这仍然不能真正回答问题。即使有这个松散​​的定义，我也想不出任何好的理由`__alignof__`来表明`long long`比包含 a 的结构或联合更严格的对齐方式`long long`。

确定类型对齐的一种更便携的方法是：

```
#define ALIGNOF(type) ((int)(offsetof(struct {char c; type t;}, t))) 
```

这会产生由 a和 a`t`组成的结构中类型成员的偏移量。使用这个宏，这个程序：`char``t`

```
#include <iostream>
#include <cstddef>

union ull {
  long long m;
};

struct sll {
  long long m;
};

#define ALIGNOF(type) ((int)(offsetof(struct {char c; type t;}, t)))

int main() {
#define pr(v) std::cout << #v ": " << (v) << std::endl
   pr(sizeof(long long));
   pr(__alignof__(long long));
   pr(ALIGNOF(long long));
   pr(sizeof(ull));
   pr(__alignof__(ull));
   pr(ALIGNOF(ull));
   pr(sizeof(sll));
   pr(__alignof__(sll));
   pr(ALIGNOF(sll));
}; 
```

在我的系统（gcc-4.7，Ubuntu 12.04，x86）上产生这个输出：

```
sizeof(long long): 8
__alignof__(long long): 8
ALIGNOF(long long): 4
sizeof(ull): 8
__alignof__(ull): 4
ALIGNOF(ull): 4
sizeof(sll): 8
__alignof__(sll): 4
ALIGNOF(sll): 4 
```

我的`ALIGNOF()`宏指示的结果是一致的：`long long`具有 4 字节对齐，并且包含 a 的结构或联合`long long`具有 4 字节对齐。

我怀疑这是 gcc 的`__alignof__`. 但是定义的模糊性使得很难确定它真的是一个错误。[好像没有报道](http://gcc.gnu.org/bugzilla/buglist.cgi?quicksearch=alignof)。

**更新 ：**

我可能会抢先一步，但我刚刚提交了一份[错误报告](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=54188)。

这个[早期的错误报告](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=10360)，关闭为“INVALID”，与此类似，但它不涉及结构本身的对齐方式。

**更新 2：**

我的错误报告已作为先前报告的副本关闭。我会要求澄清。

# python - 故意将变量引入调用者范围的函数

> ID：11825086
> 
> 赞同：3
> 
> 时间：2012-08-06T08:48:45.623
> 
> 标签：python, variables, scope, metaprogramming

我有一个功能`P()`。调用`load_variables()`应该给`P`变量`x`。 `load_variables`应该能够接受默认值作为关键字参数。

如何才能做到这一点？

我尝试了以下方法：

```
import inspect
def P():
    x = 1
    load_variables(x = 2)
    return x

def load_variables(**kargs):
    stack = inspect.stack()
    try:
        locals_ = stack[1][0].f_locals
    finally:
        del stack
    for __k, __v in kargs.iteritems():
        locals_[__k] = __v

print P() # => should print 2 
```

这`x = 1`条线实际上不应该在那里，因为我`load_variables()`只想放出`x`into`P`的范围。

还有另一种可能更好的方法来做到这一点吗？我想要的是：

1.  变量有一个默认值，例如`x = 2`在上面的调用中`load_variables()`。
2.  我可以覆盖这些`load_variables`，例如，`load_varibales()`可以访问变量字典，如果`x`已经在这里，我们覆盖它，并溢出它`x`而不是作为默认参数给出的那个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:01:56.410

既然我们在这里谈论 Python，可能有办法做到这一点，但我想知道：你应该尝试吗？

通常，最好定义一个共享存储/值对象，然后传递它：

```
data = {}

def P(data):
     load_variables(data, x=2)
     return data['x']

def load_variables(data, **kargs):
     data.update(kargs) 
```

这样，您就不会产生不可预见的副作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T09:12:17.847

更新：正如 DSM 指出的，`locals()`不支持更新。所以，答案是不正确的，至少对于 CPython 是这样。

~~你可以`load_variables()`返回一个字典并使用它`locals()`来更新局部变量：~~

```
def P():
    x=1
    locals().update(load_variables(x=2))
    return x

def load_variables(**kargs):
    res={}
    for __k, __v in kargs.iteritems():
        res[__k] = __v
    return res 
```

~~请注意，这`x=1`是必需的，否则`x`将被字节码编译器假定为全局变量，您将获得`NameError`异常`return x`~~

~~如果你真的想摆脱`x=1`你可以我们`retrun locals()['x']`代替。~~

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T09:18:29.827

Python 编译器和字节码解释器在可能的情况下处理对局部变量的引用，作为定义大小数组的槽。这意味着如果局部变量没有在作用域中初始化（分配给），那么语言将不知道该变量的插槽存在于该作用域中，而是会在封闭作用域或全局作用域中查找该变量。查看函数的反汇编`P`：

```
def P():
    load_variables(x=2)
    return x

dis.dis(P)
  2           0 LOAD_GLOBAL              0 (load_variables)
              3 LOAD_CONST               1 ('x')
              6 LOAD_CONST               2 (2)
              9 CALL_FUNCTION          256
             12 POP_TOP             

  3          13 LOAD_GLOBAL              1 (x)
             16 RETURN_VALUE 
```

您可以看到，如果没有`x`在本地范围内分配 to ，`P`则会在全局范围内查找它。

正确的方法是`load_variables`使用解包显式声明您希望函数返回哪些变量：

```
x, y, z = load_variables(...) 
```

# mvvm - PRISM 登录屏幕

> ID：11825088
> 
> 赞同：4
> 
> 时间：2012-08-06T08:48:47.463
> 
> 标签：mvvm, views, prism, regions

我搜索并找到了很多关于 prism 登录屏幕的问题和答案。然而，他们似乎关心在 prism 甚至加载模块之前显示登录屏幕。我对此没有任何欲望。

我有我的外壳，在外壳中它有一个网格，其中包含各种充当区域的容器。这就是我希望用户登录时程序的外观。

在我进入这个屏幕之前，我想要一个连接模块占据整个应用程序窗口，通过连接按钮提示输入用户名、IP 地址和端口。我发现的问题是它似乎没有合适的位置导航到这个视图，这将允许我占据整个窗口。我能想到的唯一方法是在网格中设置一个跨越所有行和列的内容控制区域，这似乎以某种方式覆盖其余区域。

然而，这似乎很草率，而且肯定有比这更好的方法。我是否应该让我的 shell 只是一个内容控件，其中主应用程序控制器首先加载登录模块视图，然后当它连接时，它会触发一个它已连接的事件，这允许常规的“shell”视图在之后加载到它的位置登录视图被卸载和处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:11:03.090

创建一个用于登录的事件（假设您已阅读 EventAggregation）。然后为登录对话框创建一个包含视图/视图模型的登录模块，为模块本身创建一个类，并在初始化方法中，订阅 ShowLogin 事件并创建登录视图。然后在引导程序（或外壳程序）中，获取 ShowLogin 事件并发布到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:53:26.683

按照 StockTrader 示例应用程序，您可以将应用程序配置为自动导出某些视图。我用我们的一个应用程序来做到这一点。我导出了由`AutoPopulateExportedViewsBehavior`（在 StockTrader 应用程序中找到）填充的“登录视图”。基本上，我的 Shell 有 1 个区域……我用我的登录视图填充该区域。同时，`MainPage`在同一地区注册。我显示登录视图，然后，当登录成功时，我请求导航以 `MainPage`使用区域管理器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T13:53:54.680

在您的 Shell 中创建一个区域，该区域包含需要在整个窗口中展开的视图。这是想法：

**壳**

```
 <Grid>
    <Grid >
        <Grid.RowDefinitions>
            ....
        </Grid.RowDefinitions>

        <!--ROW 1 -->               
        <!--ROW 2-->
    </Grid>
<!--****THIS IS THE REGION****-->
    <ContentControl x:Name="ShellExpandAllRegions" prism:RegionManager.RegionName="{x:Static staticRegions:RegionConstants.ShellExpandAllRegions}" Panel.ZIndex="100"/>
</Grid> 
```

**注册您的模块初始化程序 (IModule)**

```
RegionManager.RegisterViewWithRegion(RegionConstants.ShellExpandAllRegions,typeof(LoginView)); 
```

**你的视图模型**

```
RegionManager.RequestNavigate(RegionConstants.ShellExpandAllRegions, new Uri(typeof(LoginView).Name, UriKind.Relative)); // The handler for a login event 
```

当您的视图在此区域中加载时，它应该占据整个窗口。

# c# - 如何以独立于区域设置的方式定位本地组？

> ID：11825089
> 
> 赞同：4
> 
> 时间：2012-08-06T08:48:46.777
> 
> 标签：c#, .net, windows, localization, internationalization

在我的 C# 代码中，我想将用户添加到“管理员”组。我听说在德语版本的 Windows 上，该组将被称为“Administratoren”，也许在其他本地版本上它会有其他名称。

我的代码在进行搜索时传递了一个硬编码字符串：

```
var context = new PrincipalContext( ContextType.Machine );
var group = GroupPrincipal.FindByIdentity( context, "Administrators" ); 
```

因此，如果该组实际上有其他名称，它将中断。我发现[这篇 MSDN 文章带有众所周知的 SID](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379649%28v=vs.85%29.aspx)坚果，我不知道如何实际使用它们来解决我的问题。

如何定位独立于 Windows 操作系统语言的本地组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T09:11:52.377

我不知道这是否有帮助。

```
using System.Security;
using System.Security.Principal;

......
SecurityIdentifier sid = new SecurityIdentifier("S-1-5-32-544");
string name = sid.Translate(typeof(NTAccount)).Value;
Console.WriteLine(name); 
```

结果是

```
"BUILTIN\Administrators" 
```

我已从[该页面](http://support.microsoft.com/kb/243330)获取 SID ，您可以在其中找到其他值进行实验。

# java - 我如何决定使用哪个库来创建 UI？

> ID：11825090
> 
> 赞同：1
> 
> 时间：2012-08-06T08:48:46.740
> 
> 标签：java, user-interface

我目前的任务是为应用程序制作 UI（让我们保持这个抽象，我经常遇到这个问题）。在使用 GUI - 库时，我需要注意哪些因素？

我目前不知道：

1.  如果我想去android，所以我不知道我是否想使用XML。
2.  我想选择什么设计
3.  假设我对 UI 设计知之甚少，所以图书馆应该帮助我
4.  鼠标手势呢？也许我也想使用那些......
5.  ...

那么我如何决定哪个库最适合我呢？选择这样的图书馆时，最好的思考过程是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:57:25.633

试试这个列表：

1.  您想要支持的所有平台都支持 UI 框架吗？
2.  有好的教程吗？
3.  尝试实现更复杂的东西（例如显示包含一百万个元素的列表或包含一百万行和 1000 列的表格，加载文本文件并突出显示所有出现的单词）。感觉怎么样？简单/难吗？

按顺序检查要点。评估几个可能的候选人并选择最合适的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:56:16.453

首先也是最重要的是，您的客户端应用程序将在哪里运行？- 浏览器 - Android 设备 - PC/Mac

# 浏览器

有很多开源 Java 框架可供选择，而且选择的任务可能令人生畏。对我来说，这个领域有一个明显的赢家，它是 GWT [https://developers.google.com/web-toolkit/](https://developers.google.com/web-toolkit/) 有几个基于 GWT 的库，它们提供更高级别的用户控件和其他工具。我可以提出 GWT 和基于 GWT 的库的许多优点，但主要的是 - 它是一个全 Java 解决方案，而且它是纯 Java（没有 java 脚本、没有 jsp、没有 html）

# 安卓

在这里不能给出太多建议，但是从谷歌提供的标准库开始应该是一个不错的选择

# 电脑/苹果机

在客户端 PC 上运行的 java 应用程序可能是最不受欢迎的选择。如果你设法让你的用户在他们的机器上运行一个应用程序，那么它最好是值得的。意思是找到具有最好看和最丰富的组件集的那个。考虑到这一点，标准的 Java Swing 库是相当不够的。这个类别中的重头戏似乎是Java Fx，因为我没有使用过，所以我无法评论它。

# mysql - MySQL中两列的乘法

> ID：11825091
> 
> 赞同：1
> 
> 时间：2012-08-06T08:48:47.223
> 
> 标签：mysql, sql

我想得到 column`fee`和 column之间相乘的结果`duration`，但是当我这样做时，`Select duration * fee`我得到了`0`！

此外，每列 * 费用给我 0...

这是创建表脚本。

```
delimiter $$

CREATE TABLE `simvoip` 
(   
`prefix` varchar(45) DEFAULT NULL,  
`destination` varchar(45) DEFAULT NULL,   
`fee` varchar(45) DEFAULT  NULL,   
`calldate` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',  
`dst` varchar(80) CHARACTER SET latin1 NOT NULL DEFAULT '',  
`dstchannel` varchar(80) CHARACTER SET latin1 NOT NULL DEFAULT '',  
`duration` varchar(45) DEFAULT '0' 
) ENGINE=InnoDB DEFAULT
CHARSET=utf8$$* 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T08:53:07.347

为了实现您想要的，您需要将字符串列转换为数字。

尝试这个：

```
SELECT CAST(`duration` AS DECIMAL(10,4)) * CAST(`fee` AS DECIMAL(10,4))
FROM   `simvoip` 
```

顺便说一句，您正在为服务器添加额外的工作，以便在将值相乘之前先转换它们。为什么不存储 as`DECIMAL`或`Double`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T08:51:58.190

您不能将文本值相乘。您需要将它们转换为数字，使用`CAST(fee as integer)`或其他方式。或者，为什么不**将数字存储为数字**？

# php - 对使用非英文字体的记录进行排序的可能方法？

> ID：11825097
> 
> 赞同：0
> 
> 时间：2012-08-06T08:49:18.993
> 
> 标签：php, sorting

我在我的应用程序中使用 Devnagari 字体。键盘上的每个英文键都代表 Devnagari 中的某个字符。例如，我的英文名字是 Sabin，但当我使用 devnagari 字体时，它会是“;lag”，不带引号。并以这种方式将记录保存在数据库中。现在我在排序记录时遇到问题。

在 devnagari 中，首先出现的是 Devnagari 元音，然后是 devnagari 字母。像 c,cf,O,O{,p,pm,...... [每个用逗号分隔] 然后从第一个开始的 devnagari 字母等价，s,v,u,#,... 等等 [每一个用逗号隔开]。

我遇到的问题是在 devnagari 中按字母顺序对名称进行排序。任何想法都将受到高度赞赏。谢谢！

编辑：返回的数组如下，我需要使用 usort 函数。

```
Array
(
    [0] => stdClass Object
    (
        [user_id] => NLK32437
        [first_name] => ;lag
        [last_name] => %]qL
        [email_address] => test1@msn.com
        [mobile_number] => 9834874582
        [description] => g]kfn
        [date_joined] => 08-AUG-12
        [status] => 1
        [username] => user1
        [userpassword] => 691f9298642af07c2d6ea8fef56074201e077b34
    )

[1] => stdClass Object
    (
        [user_id] => NLK32435
        [first_name] => clgn
        [last_name] => zdf{
        [email_address] => test2@msn.com
        [mobile_number] => 984134354
        [description] => g]kfn
        [date_joined] => 08-AUG-12
        [status] => 1
        [username] => user2
        [userpassword] => 0e025eade868b4b481f41ff7449bc1967261e170
    )

) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T09:03:16.860

您正在滥用文本编码。您将文本保存为用于其他事物的代码点，并且仅使用将原始英文字母呈现为其他事物的字体。这是完全错误的做法。

有几种编码可以让您将梵文保存为实际的梵文字符。它[在 Unicode 中受支持](http://en.wikipedia.org/wiki/Devnagari#Devan.C4.81gar.C4.AB_in_Unicode)。将文本保存为它们本来应该成为的实际梵文字符，不要超载现有的英文代码点并依赖于损坏的字体。然后，您将通过支持 Unicode 的任何东西获得排序功能和许多其他功能。

* * *

尽管如此，还是一个简单的`usort`例子：

```
usort($array, function ($a, $b) {
    static $order = array('M', 'A', ';', 'L', ...);
    return array_search($a, $order) - array_search($b, $order);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T03:44:35.293

好吧，经过尝试，我刚刚开始工作。感谢@deceze 和@dualed。这是我所做的

```
usort($array, function ($a, $b) {
    static $order = array('c', ';', 'g', 'L');
    return array_search($a->first_name, $order) - array_search($b->first_name, $order);
}); 
```

# java - 使用 ImageIO 静态方法使用缓存

> ID：11825102
> 
> 赞同：0
> 
> 时间：2012-08-06T08:49:49.393
> 
> 标签：java, file, caching, download, javax.imageio

我需要从给定的 url 下载文件，但问题是我可以获得没有扩展名的文件。为了弄清楚扩展是什么，我编写了以下服务：

```
 public String getExtension(String imageURL){
        InputStream stream = new URL(imageURL).openStream();
        ImageInputStream iis = ImageIO.createImageInputStream(stream);
        Iterator<ImageReader> iter = ImageIO.getImageReaders(iis);
        ImageReader reader = imageReaders.next();
        String retVal      = reader.getFormatName();
        closeInputStreamAndDisposeReader(reader);
        return retVal;
    } 
```

稍后我需要下载该图像，所以我写道：

```
 BufferedImage image = ImageIO.read(imageURL);
    ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
    ImageIO.write( image, extension, byteArrayOutputStream );
    byteArrayOutputStream.flush();
    byte[] imageInBytes = byteArrayOutputStream.toByteArray();
    byteArrayOutputStream.close(); 
```

问题是我下载了两次文件 - 我想使用缓存来防止这种情况。现在我读到了，`ImageIO.setUseCache(false);`但它似乎不起作用（也许我在这里做错了什么）。

**编辑**：我注意到我使用创建输入流`new URL(imageURL).openStream()`- 这是我正在做的第一次下载，我认为我应该使用 ImageIO 方法之一来获取它，然后`ImageIO.setUseCache(false);`就可以了。

我对吗？

我该怎么做-我尝试使用`ImageIO.createImageInputStream(imageURL);`但出现异常：

```
java.lang.IllegalArgumentException: input == null!
at javax.imageio.ImageIO.createImageInputStream(Unknown Source) 
```

那么，我该怎么做呢？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:26:46.900

我过去所做的是使用`Map`支持的缓存，它基本上将 URL 作为键，将`File`引用作为值。

基本上我要做的是`Image`通过 URL 从缓存中请求一个。如果图像已经下载（并且它满足一些其他要求），则返回文件系统上存在的图像，否则，它会下载它并放入缓存中。

您可以扩展这个想法，但提供诸如`isCached(URL)`和`getFile(URL)`或什`getInputStream(URL)`至或`getReader(URL)`或您需要的东西

# orchardcms - Orchard：编写使用图像和 ImagePicker 的小部件

> ID：11825110
> 
> 赞同：2
> 
> 时间：2012-08-06T08:50:20.017
> 
> 标签：orchardcms

是否有任何用于编写小部件的示例，该小部件使用仪表板中的 imagePicker？我通读了样本，但没有发现使用图片的提示。

在仪表板上，我想要一个名为 BackgroundImage 的字段，可以使用 ImagePicker 选择该字段，并且必须显示为 IMAGE 而不是路径/文件。我也想要 ImagePicker，因为它可以从 Media 中选择现有的。

基线：需要显示一个由背景图像、标题和文本组成的“预告片”。这些 Teasers 应该可以在 Dashboard 中创建。创建新图片时，我需要选择现有图片（或上传新图片），创建标题和文本。

作为蓝图，我使用了我发现的“Writing a widget”、“Maps”和“Twitter”示例。但是没有人使用图像。

请给我一个提示...:-)

莱因哈德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:36:56.657

查看我对这个问题的回答[Orchard CMS 模块开发工作流程](https://stackoverflow.com/questions/11819970/orchard-cms-module-development-workflow)

它包含一个如何在迁移中将媒体选择器添加到项目自定义类型的示例，我添加了一些扩展方法以使迁移稍微不那么冗长。

希望能帮助到你

# ruby-on-rails - 比较语句失败

> ID：11825111
> 
> 赞同：0
> 
> 时间：2012-08-06T08:50:22.637
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个应用程序，允许用户将课程添加到他们的个人资料中。这是通过我的“阵容”模型完成的。为了让您了解我的数据库和架构：

```
#relationships
Class User
  has_many :lineups
end 

Class Course
  has_many :lineups
end

Class Lineup
  belongs_to :user
  belongs_to :course
end 

#some schema
create_table "lineups", :force => true do |t|
    t.integer  "course_id"
    t.integer  "user_id"
end 
```

现在，我有一个页面，其中列出了带有“添加课程”按钮的课程。单击时，表单将提交给我的“阵容”控制器以执行“创建”操作。这个过程很好用，但是，我检查用户是否已经添加课程的代码失败了。课程将再次添加。这是我的控制器代码：

```
class LineupsController < ApplicationController
    def create 
        course_id = params[:course_id]
        user_id = current_user.id
        course_object = Course.find(course_id) 

            #THIS BLOCK DOES NOT WORK
        for lineup in current_user.lineups do
            if lineup.course.id == course_id
                return redirect_to course_query_url, :alert => "You have already added this course: #{course_object.cl} #{course_object.cn}" 
            end
        end
            #THE BLOCK ^^^ DOES NOT WORK

        new_lineup = Lineup.new( course_id: course_id, user_id: user_id)

        respond_to do |format|
            if new_lineup.save 
                format.html { redirect_to course_query_url, :notice => "Course added: #{course_object.cl} #{course_object.cn}" }
            else
                format.html { redirect_to course_query_url, :alert => "There was an error in adding the course: #{course_object.cl} #{course_object.cn}" }
            end
        end
    end

end 
```

我知道这条线有效，b / c我让它在一个视图中工作：

对于 current_user.lineups 中的阵容做

而且我知道，当上述行被迭代时，“阵容”实例被创建并且关系工作找到（即“lineup.course.id”）b/c，它也在视图中使用。以下是此循环工作的视图中的代码：

```
 <% if current_user.lineups %>
        <% for lineup in current_user.lineups do %>
          <li><%= link_to "#{lineup.course.id} #{lineup.course.cn}", index_path %></li>
        <% end %>
      <% end %> 
```

我真的束手无策，无法弄清楚为什么这个条件不起作用。任何和所有输入将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T08:57:49.560

您正在此行中比较数字 (course.id) 和字符串 (params[:id])

```
if lineup.course.id == course_id 
```

这在 Ruby 中不起作用:)

尝试更改为

```
if lineup.course.id.to_s == course_id 
```

或者

```
if lineup.course.id == course_id.to_i 
```

# python - Python - 在跨模块共享变量时，dict 类型是否不同（参见示例）？

> ID：11825119
> 
> 赞同：3
> 
> 时间：2012-08-06T08:51:07.207
> 
> 标签：python

我有两个文件-

foo1.py -

```
a = 0;
b = {};
def f():
    global a;
    print "foo1: start a -",a;
    a = 10;
    print "foo1 changed a to :",a;
    global b;
    print "foo1: start b - ",b;
    b['me'] = 'fool';
    print "foo1 changed b to :",b; 
```

foo2.py -

```
from foo1 import *
print "foo2 a before f:", a
print "foo2 b before f:", b
f();
print "foo2 a after f:",a
print "foo2 b after f:",b 
```

当我运行 python foo2.py 时，我看到了这个 -

```
foo2 a before f: 0
foo2 b before f: {} <br/>
foo1: start a - 0
foo1 changed a to : 10
foo1: start b -  {}
foo1 changed b to : {'me': 'fool'}
foo2 a after f: 0 // **Doesn't change**
foo2 b after f: {'me': 'fool'} // **Changes** 
```

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T09:02:08.820

你认为`a = 10`并且`b['me'] = 'fool'`正在做同样的事情，但事实并非如此。前者将名称绑定`a`到一个新值；后者改变 中的值`b`。分配给一个裸名永远不会修改对象；它只会重新绑定名称。

`f`它何时`a = 10`将名称重新绑定`a`到新对象，但这对 没有影响`foo2.py`，因为`foo2py`已经导入了旧对象。什么`f`时候`b["me"] = "fool"`，它会改变已经存在的同一个字典对象。由于`foo2.py`已导入同一个对象，因此它会看到更改。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-06T08:54:09.373

`a`是不可变的，所以虽然导入的引用`foo2`不会改变，但名称`foo1`会重新绑定到一个新值。

`b`是可变的，因此永远不会反弹；由于两个名称具有相同的引用，因此它们正在查看同一个对象。任何可变对象（列表、集合等）都会发生同样的情况。

# c# - Linq 查询 - 实体框架（连接两个表）

> ID：11825121
> 
> 赞同：-1
> 
> 时间：2012-08-06T08:51:10.547
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, linq, entity-framework

我遇到了 LINQ 查询的问题。在表中`towar`我想得到`Kategorie.Nazwa`

sql中的示例：`SELECT Kategorie.Nazwa FROM Towar INNER JOIN Kategorie ON Towar.Id_kat = Kategorie.Id_kat`

![在此处输入图像描述](../Images/d6038faed7a8c133863938ca380e7678.png)

这是我的问题`.Where(p => category == null || p.Id_kat == category)`，我需要类别名称，但我有编号。我需要这个`p.Id_kat = SELECT Kategorie.Nazwa FROM Towar INNER JOIN Kategorie ON Towar.Id_kat = Kategorie.Id_kat`我使用EntityFramework DbContext。

```
SomeView viewModel = new SomeView
                {
                    Towar = repository.Towar
                    .Where(p => category == null || p.Id_kat == category)
                    .OrderBy(p => p.Id_tow)
                    .Skip((page - 1) * PageSize)
                    .Take(PageSize),

                    Kategorie = re.Kategorie
                    .OrderBy(p => p.Id_kat),

                    PagingInfo = new PagingInfo
                                        {
                                       CurrentPage = page,
                                       ItemsPerPage = PageSize,
                                       TotalItems = repository.Towar.Count()

                                        },
                    CurrentCategory = category

                                   };
                return View(viewModel);
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:53:41.273

如果您在 Towar 和 Categories 之间设置了外键，则不必进行连接。您可以使用 POCO 类引用到类别类和实体框架的强大功能。这是我对测试的意思的一个例子：

请注意 Towar 类如何具有对 Category 类的属性。

```
[ Subject( "Inner join example using entity framework") ]
public class When_getting_towar_by_kategory_and_there_are_2_kategories
{
    Establish context = () =>
                        {
                            myContext = new MyContext();
                            Database.SetInitializer(new CreateDatabaseIfNotExists<MyContext>());
                            var first = new Kategory { Nazwa = "First" };
                            myContext.Kategories.Add(first);
                            var second = new Kategory { Nazwa = "Second" };
                            myContext.Kategories.Add(second);
                            myContext.Towars.Add(new Towar { Cena = "found", Kategory = first });
                            myContext.Towars.Add(new Towar { Cena = "notFound", Kategory = second });
                            myContext.SaveChanges();
                            SUT = new Controller(myContext);
                        };

    private Because of = () => { result = SUT.GetTowarByKategory("First"); };

    private It should_return_list_filtered_by_kategory = () => { result.Select(x => x.Cena).SequenceEqual(new[] { "found" }).Should().BeTrue(); };
    private static Controller SUT;
    private static IEnumerable<Towar> result;
    private static MyContext myContext;
}

public class Controller
{
    private readonly MyContext context;

    public Controller(MyContext context)
    {
        this.context = context;
    }
    public IEnumerable<Towar> GetTowarByKategory(string category)
    {
        var res = from t in context.Towars
                    where t.Kategory.Nazwa == category
                    select t;

        return res;
    }
}

public class Kategory
{
    [Key] 
    public int Id_kat { get; set; }
    public string Nazwa { get; set; }
}

public class Towar
{
    [Key]
    public int Id_tow { get; set; }
    public Kategory Kategory { get; set; }
    public string Cena { get; set; }
}

public class MyContext : DbContext
{
    public DbSet<Kategory> Kategories { get; set; }
    public DbSet<Towar> Towars { get; set; }
} 
```

# scala - HLists 只不过是一种复杂的元组编写方式吗？

> ID：11825129
> 
> 赞同：149
> 
> 时间：2012-08-06T08:51:52.217
> 
> 标签：scala, types, tuples, hlist, shapeless

我真的很想找出差异在哪里，更一般地说，是找出不能使用 HLists 的规范用例（或者更确切地说，不会比常规列表产生任何好处）。

（我知道`TupleN`Scala 中有 22 个（我相信），而一个只需要一个 HList，但这不是我感兴趣的那种概念差异。）

我在下面的文字中标记了几个问题。实际上可能没有必要回答它们，它们更多是为了指出我不清楚的事情，并引导讨论朝着某些方向发展。

### 动机

我最近在 SO 上看到了几个答案，人们建议使用 HLists（例如，由[Shapeless提供），包括](https://github.com/milessabin/shapeless)[对此问题](https://stackoverflow.com/questions/11815908/valid-type-casting-of-both-covariant-and-contravariant-class-at-runtime-in-scala)的已删除答案。它引发了[这种讨论](https://chat.stackoverflow.com/rooms/14938/discussion-between-mhs-and-edmondo1984)，进而引发了这个问题。

### 介绍

在我看来，只有当您静态地知道元素的数量及其精确类型时，hlist 才有用。这个数字实际上并不重要，但您似乎不太可能需要生成一个包含不同但静态精确已知类型的元素的列表，但您并不静态知道它们的数字。**问题 1：**你甚至可以写一个这样的例子吗，例如，在一个循环中？我的直觉是，拥有一个静态精确的 hlist 和一个静态未知数量的任意元素（相对于给定的类层次结构是任意的）是不兼容的。

### HLists 与元组

如果这是真的，即您静态地知道数字和类型 -**问题 2：**为什么不只使用 n 元组？当然，您可以对HList 进行类型安全地映射和折叠（您也可以，但**不是**类型安全地，借助`productIterator`直接执行操作。

另一方面，如果`f`您在 hlist 上映射的函数是如此通用以至于它接受所有元素 -**问题 3：**为什么不使用它 via `productIterator.map`？好的，一个有趣的区别可能来自方法重载：如果我们有几个重载`f`的 's，具有由 hlist 提供的更强类型信息（与 productIterator 相比）可以允许编译器选择更具体的`f`. 但是，我不确定这是否真的适用于 Scala，因为方法和函数并不相同。

### HLists 和用户输入

基于相同的假设，即您需要静态知道元素的数量和类型 -**问题 4：**可以在元素依赖于任何类型的用户交互的情况下使用 hlists 吗？例如，想象用循环内的元素填充 hlist；从某处（UI、配置文件、actor 交互、网络）读取元素，直到满足特定条件。hlist 的类型是什么？与接口规范 getElements: HList[...] 类似，它应该与静态未知长度的列表一起使用，并且允许系统中的组件 A 从组件 B 获取这样的任意元素列表。

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2012-08-06T10:05:51.103

解决问题一到三： 的主要应用之一`HLists`是抽象超过数量。Arity 通常在抽象的任何给定使用站点是静态已知的，但因站点而异。从 shapeless 的[例子](https://github.com/milessabin/shapeless/blob/master/examples/src/main/scala/shapeless/examples/flatten.scala#L70)来看，

```
def flatten[T <: Product, L <: HList](t : T)
  (implicit hl : HListerAux[T, L], flatten : Flatten[L]) : flatten.Out =
    flatten(hl(t))

val t1 = (1, ((2, 3), 4))
val f1 = flatten(t1)     // Inferred type is Int :: Int :: Int :: Int :: HNil
val l1 = f1.toList       // Inferred type is List[Int]

val t2 = (23, ((true, 2.0, "foo"), "bar"), (13, false))
val f2 = flatten(t2)
val t2b = f2.tupled
// Inferred type of t2b is (Int, Boolean, Double, String, String, Int, Boolean) 
```

如果不使用`HLists`（或等效的东西）对元组参数的数量进行抽象，`flatten`就不可能有一个可以接受这两种非常不同形状的参数并以类型安全的方式转换它们的单一实现。

在涉及固定数量的任何地方都可能对抽象数量的能力感兴趣：以及元组，如上所述，包括方法/函数参数列表和案例类。有关我们如何抽象任意案例类的数量以几乎自动获得类型类实例的示例，请参见[此处，](https://github.com/milessabin/shapeless/blob/master/examples/src/main/scala/shapeless/examples/monoids.scala)

```
// A pair of arbitrary case classes
case class Foo(i : Int, s : String)
case class Bar(b : Boolean, s : String, d : Double)

// Publish their `HListIso`'s
implicit def fooIso = Iso.hlist(Foo.apply _, Foo.unapply _)
implicit def barIso = Iso.hlist(Bar.apply _, Bar.unapply _)

// And now they're monoids ...

implicitly[Monoid[Foo]]
val f = Foo(13, "foo") |+| Foo(23, "bar")
assert(f == Foo(36, "foobar"))

implicitly[Monoid[Bar]]
val b = Bar(true, "foo", 1.0) |+| Bar(false, "bar", 3.0)
assert(b == Bar(true, "foobar", 4.0)) 
```

这里没有运行时*迭代*，但有*重复*，使用`HLists`（或等效结构）可以消除。当然，如果您对重复样板的容忍度很高，您可以通过为您关心的每个形状编写多个实现来获得相同的结果。

在问题三中，您问“...如果您在 hlist 上映射的函数 f 是如此通用以至于它接受所有元素...为什么不通过 productIterator.map 使用它？”。如果您在 HList 上映射的函数确实是这种形式，`Any => T`那么映射`productIterator`将为您提供完美的服务。但是表单的函数`Any => T`通常不是那么有趣（至少，除非它们在内部进行类型转换，否则它们不会那么有趣）。shapeless 提供了一种形式的多态函数值，它允许编译器以您怀疑的方式选择特定于类型的情况。例如，

```
// size is a function from values of arbitrary type to a 'size' which is
// defined via type specific cases
object size extends Poly1 {
  implicit def default[T] = at[T](t => 1)
  implicit def caseString = at[String](_.length)
  implicit def caseList[T] = at[List[T]](_.length)
}

scala> val l = 23 :: "foo" :: List('a', 'b') :: true :: HNil
l: Int :: String :: List[Char] :: Boolean :: HNil =
  23 :: foo :: List(a, b) :: true :: HNil

scala> (l map size).toList
res1: List[Int] = List(1, 3, 2, 1) 
```

关于你的问题四，关于用户输入，有两种情况需要考虑。第一种情况是我们可以动态建立一个上下文，以保证获得已知的静态条件。在这些场景中，完全可以应用无形技术，但显然附带条件是，如果在运行时*没有*获得静态条件，那么我们必须遵循替代路径。不出所料，这意味着对动态条件敏感的方法必须产生可选的结果。`HList`这是一个使用s的示例，

```
trait Fruit
case class Apple() extends Fruit
case class Pear() extends Fruit

type FFFF = Fruit :: Fruit :: Fruit :: Fruit :: HNil
type APAP = Apple :: Pear :: Apple :: Pear :: HNil

val a : Apple = Apple()
val p : Pear = Pear()

val l = List(a, p, a, p) // Inferred type is List[Fruit] 
```

的类型`l`不捕获列表的长度，或其元素的精确类型。然而，如果我们期望它有一个特定的形式（即，如果它应该符合一些已知的、固定的模式），那么我们可以尝试建立这个事实并采取相应的行动，

```
scala> import Traversables._
import Traversables._

scala> val apap = l.toHList[Apple :: Pear :: Apple :: Pear :: HNil]
res0: Option[Apple :: Pear :: Apple :: Pear :: HNil] =
  Some(Apple() :: Pear() :: Apple() :: Pear() :: HNil)

scala> apap.map(_.tail.head)
res1: Option[Pear] = Some(Pear()) 
```

在其他情况下，我们可能不关心给定列表的实际长度，除了它与其他列表的长度相同。同样，这是无形支持的东西，无论是完全静态的，还是在上面的混合静态/动态环境中。有关扩展示例，请参见[此处。](https://github.com/milessabin/shapeless/blob/master/examples/src/main/scala/shapeless/examples/sized.scala)

正如您所观察到的，所有这些机制确实需要静态类型信息，至少有条件地可用，这似乎将这些技术排除在完全由外部提供的无类型数据驱动的完全动态环境中。但是随着在 2.10 中支持运行时编译作为 Scala 反射的一个组件，即使这不再是一个不可逾越的障碍……我们可以使用运行时编译来提供一种[轻量级的暂存](https://github.com/milessabin/shapeless/blob/master/examples/src/main/scala/shapeless/examples/staging.scala)形式，并在运行时执行我们的静态类型响应动态数据：摘自以下前文...点击链接查看完整示例，

```
val t1 : (Any, Any) = (23, "foo") // Specific element types erased
val t2 : (Any, Any) = (true, 2.0) // Specific element types erased

// Type class instances selected on static type at runtime!
val c1 = stagedConsumeTuple(t1) // Uses intString instance
assert(c1 == "23foo")

val c2 = stagedConsumeTuple(t2) // Uses booleanDouble instance
assert(c2 == "+2.0") 
```

[鉴于@PLT_Borat](https://twitter.com/PLT_Borat)[对依赖类型编程语言](https://twitter.com/PLT_Borat/status/163966991877685249)的睿智评论，我确信他对此有话要说；-)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-06T22:32:05.230

为了清楚起见，HList 本质上只不过是一堆`Tuple2`顶部略有不同的糖。

```
def hcons[A,B](head : A, tail : B) = (a,b)
def hnil = Unit

hcons("foo", hcons(3, hnil)) : (String, (Int, Unit)) 
```

所以你的问题本质上是关于使用嵌套元组与平面元组之间的区别，但两者是同构的，所以最后除了可以使用库函数和可以使用哪种表示法的便利性之外，真的没有区别。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-08-06T09:48:10.380

元组有很多事情不能做（很好）：

*   编写一个通用的前置/附加功能
*   写一个反向函数
*   写一个concat函数
*   ...

当然，您可以使用元组完成所有这些操作，但在一般情况下并非如此。因此，使用 HLists 会使您的代码更加干燥。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-05-29T16:59:08.577

我可以用超级简单的语言来解释这一点：

元组与列表命名并不重要。HLists 可以命名为 HTuples。不同之处在于，在 Scala+Haskell 中，您可以使用元组执行此操作（使用 Scala 语法）：

```
def append2[A,B,C](in: (A,B), v: C) : (A,B,C) = (in._1, in._2, v) 
```

要获取恰好包含任何类型的两个元素的输入元组，附加第三个元素，并返回恰好包含三个元素的完全类型化的元组。但是，虽然这对类型来说是完全通用的，但它必须明确指定输入/输出长度。

Haskell 风格的 HList 让你做的就是让这个泛型超过长度，所以你可以附加到任何长度的元组/列表并返回一个完全静态类型的元组/列表。这个好处也适用于同构类型的集合，您可以将一个 int 附加到恰好 n 个 int 的列表中，并返回一个静态类型化为具有 (n+1) 个 int 的列表，而无需显式指定 n。

# java - 嵌入式 Jetty 抛出 EofException 和 SocketException

> ID：11825133
> 
> 赞同：3
> 
> 时间：2012-08-06T08:52:08.747
> 
> 标签：java, exception, jetty, jersey, embedded-jetty

我有一个嵌入式 Jetty 服务器（具有基本身份验证和 SSL）。当它开始运行时，一切正常。响应时间以毫秒为单位。然而，一段时间后响应时间增加到 10 秒甚至更多。我不确定，但在我对我的 Jetty 服务器实施 SSL 支持后，它可能开始变慢并引发异常。这是我的堆栈跟踪：

```
11:02:19,179 DEBUG HttpParser:1035 - 
java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(SocketInputStream.java:168)
    at com.sun.net.ssl.internal.ssl.InputRecord.readFully(InputRecord.java:293)
    at com.sun.net.ssl.internal.ssl.InputRecord.read(InputRecord.java:331)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:789)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:746)
    at com.sun.net.ssl.internal.ssl.AppInputStream.read(AppInputStream.java:75)
    at org.eclipse.jetty.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:370)
    at org.eclipse.jetty.io.bio.StreamEndPoint.fill(StreamEndPoint.java:136)
    at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.fill(SocketConnector.java:222)
    at org.eclipse.jetty.server.ssl.SslSocketConnector$SslConnectorEndPoint.fill(SslSocketConnector.java:613)
    at org.eclipse.jetty.http.HttpParser.fill(HttpParser.java:1030)
    at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:275)
    at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:230)
    at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:66)
    at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:254)
    at org.eclipse.jetty.server.ssl.SslSocketConnector$SslConnectorEndPoint.run(SslSocketConnector.java:665)
    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:603)
    at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:538)
    at java.lang.Thread.run(Thread.java:619)
11:02:19,180 DEBUG HttpParser:280 - HttpParser{s=-14,l=0,c=-3}
org.eclipse.jetty.io.EofException
    at org.eclipse.jetty.http.HttpParser.fill(HttpParser.java:1036)
    at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:275)
    at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:230)
    at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:66)
    at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:254)
    at org.eclipse.jetty.server.ssl.SslSocketConnector$SslConnectorEndPoint.run(SslSocketConnector.java:665)
    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:603)
    at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:538)
    at java.lang.Thread.run(Thread.java:619)
Caused by: java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(SocketInputStream.java:168)
    at com.sun.net.ssl.internal.ssl.InputRecord.readFully(InputRecord.java:293)
    at com.sun.net.ssl.internal.ssl.InputRecord.read(InputRecord.java:331)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:789)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:746)
    at com.sun.net.ssl.internal.ssl.AppInputStream.read(AppInputStream.java:75)
    at org.eclipse.jetty.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:370)
    at org.eclipse.jetty.io.bio.StreamEndPoint.fill(StreamEndPoint.java:136)
    at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.fill(SocketConnector.java:222)
    at org.eclipse.jetty.server.ssl.SslSocketConnector$SslConnectorEndPoint.fill(SslSocketConnector.java:613)
    at org.eclipse.jetty.http.HttpParser.fill(HttpParser.java:1030)
    ... 8 more
11:02:19,180 DEBUG SocketConnector:259 - EOF
org.eclipse.jetty.io.EofException
    at org.eclipse.jetty.http.HttpParser.fill(HttpParser.java:1036)
    at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:275)
    at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:230)
    at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:66)
    at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:254)
    at org.eclipse.jetty.server.ssl.SslSocketConnector$SslConnectorEndPoint.run(SslSocketConnector.java:665)
    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:603)
    at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:538)
    at java.lang.Thread.run(Thread.java:619)
Caused by: java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(SocketInputStream.java:168)
    at com.sun.net.ssl.internal.ssl.InputRecord.readFully(InputRecord.java:293)
    at com.sun.net.ssl.internal.ssl.InputRecord.read(InputRecord.java:331)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:789)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:746)
    at com.sun.net.ssl.internal.ssl.AppInputStream.read(AppInputStream.java:75)
    at org.eclipse.jetty.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:370)
    at org.eclipse.jetty.io.bio.StreamEndPoint.fill(StreamEndPoint.java:136)
    at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.fill(SocketConnector.java:222)
    at org.eclipse.jetty.server.ssl.SslSocketConnector$SslConnectorEndPoint.fill(SslSocketConnector.java:613)
    at org.eclipse.jetty.http.HttpParser.fill(HttpParser.java:1030)
    ... 8 more 
```

**PS：**我使用 Jetty 版本：*8.1.4.v20120524*

# php - 创建临时数据库 php

> ID：11825135
> 
> 赞同：1
> 
> 时间：2012-08-06T08:52:44.087
> 
> 标签：php, zend-framework

这可能听起来很愚蠢，但是否可以使用 Zend Framework 和 Mysql 创建临时表/数据库？如果可能的话，我可以有一个示例代码吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:00:42.257

这与创建普通表格一样，只需在“CREATE”后添加“TEMPORARY”即可。连接关闭后，此类表将被删除。

```
$db->execute('CREATE TEMPORARY TABLE tmp'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T09:02:15.330

在 Mysql 中，您可以使用引擎创建临时表`BLACKHOLE`

它动态创建表，这意味着它最多只能用于一个 HTTP 请求，并且在完成后将被删除。

`CREATE TABLE table_name engine = BLACKHOLE;`

我不知道如何在 Zend 中做，但可能这样的事情会有所帮助：

`$db->execute("CREATE TABLE table_name engine = 'BLACKHOLE'");`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T08:57:09.297

```
/* @var $db Zend_Db */
$db->execute('CREATE TABLE tmp LIKE table_something'); 
```

# vb6 - 如何恢复 Coolbar Band Order？

> ID：11825144
> 
> 赞同：0
> 
> 时间：2012-08-06T08:53:27.520
> 
> 标签：vb6, toolbar

我在 VB6 中有一个 Coolbar，它有 6 个波段，每个波段都有一个 Toolbar 类型的子项。用户可以移动这些波段并设置它们的可见性。重新启动软件时我需要恢复设置，但我在恢复顺序/位置时遇到了一些问题（我可以毫无问题地恢复可见性和宽度）。

我在恢复时遇到问题的设置是 Coolbar.Bands(Index).Position 和 Coolbar.Bands(Index).NewRow，因为这两个属性都是只读的。

我知道我可以保存 Position 和 NewRow 属性，然后在运行时而不是设计时创建每个 Bands，然后使用保存的属性来确定创建 Bands 的顺序。

我宁愿不必在运行时创建乐队，但我怀疑这可能是恢复这些设置的唯一方法。有谁知道无需在运行时创建乐队的方式来恢复工具栏的顺序/位置？

我可以很容易地保存/加载设置，所以我们可以跳过这一步。

任何帮助将不胜感激，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:40:46.167

你不能直接这样做。但是，下面的代码应该给您带来与能够移动乐队相同的效果：

```
Private Sub MoveBand(ByVal the_nFromIndex As Long, ByVal the_nToIndex As Long, ByVal the_bNewRow As Boolean)

    Dim oOldBand            As Band
    Dim oNewBand            As Band
    Dim sKey                As String

    With CoolBar.Bands
        Set oOldBand = .Item(the_nFromIndex)
        sKey = oOldBand.Key
        oOldBand.Key = vbNullString
        Set oNewBand = .Add(the_nToIndex + 1, sKey, oOldBand.Caption, oOldBand.Image, the_bNewRow, oOldBand.Child, oOldBand.Visible)
        Set oOldBand = Nothing
        .Remove the_nFromIndex
    End With

End Sub 
```

# iphone - 在图像IOS中设置透明度

> ID：11825152
> 
> 赞同：11
> 
> 时间：2012-08-06T08:53:59.470
> 
> 标签：iphone, objective-c, ios, xcode

我有一个表格视图，我已将图像添加为标题的子视图，但该图像以 bagckground 白色显示，如何设置图像的透明度。

TIA

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-06T08:55:55.020

为此，您必须设置 UIImageView 的 alpha

```
Your_ImageView.alpha = 0.6; 
```

您也可以在您的 xib 文件中执行此操作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T09:24:47.583

假设您的视图名称是 myTransparentSubView：

```
[myTransparentSubView setBackgroundColor:[UIColor clearColor]]; 
```

如果您使用的是 Interface Builder，则在 IB 中相应地设置背景颜色属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T08:59:48.297

最简单的解决方案是创建具有透明背景的图像，但是，您可以使用[图像蒙版](https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_images/dq_images.html)来获得所需的效果。

这里已经有一个例子[。](https://stackoverflow.com/questions/8311049/ios-color-to-transparent-in-uiimage)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-02T05:25:47.820

在 MAC 中使用图像预览

从一个 png 文件开始。

你必须去查看>显示编辑工具栏。

然后加宽窗口，以便您可以看到所有图标。

然后单击看起来像魔杖的图标。

然后单击并拖动要擦除的颜色。

# mysql - 我的 sql 表中的日期列

> ID：11825155
> 
> 赞同：0
> 
> 时间：2012-08-06T08:54:21.277
> 
> 标签：mysql, sql

我在mysql中做了一个表，例如`date_birth date`；

然后尝试在其中插入这样的日期，`date('Y-m-d H:i:s')`但插入的日期是这样的格式`2012-08-02`，所以你知道出了什么问题吗？或者也许对于长格式的日期不应该在 mysql 中使用日期？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T08:56:54.320

MySQL 是正确的：

> DATE(expr) 提取日期或日期时间表达式 expr 的日期部分。

[https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T08:56:17.687

`date_birth DATETIME`使用而不是更改您的 mysql 表`date_birth DATE`

您可以使用以下查询执行此操作：

`ALTER TABLE table_name MODIFY COLUMN date_birth DATETIME`

然后如果你像这样插入日期`date('Y-m-d H:i:s')`，它将需要完整的日期时间而不仅仅是日期

# html - 移动 webkit 滚动条

> ID：11825156
> 
> 赞同：4
> 
> 时间：2012-08-06T08:54:26.270
> 
> 标签：html, css, mobile, webkit

我目前正在尝试在表格周围的 div 上设置溢出样式，我正在使用 webkit 特定样式来执行此操作

```
.overflow::-webkit-scrollbar {
        width:30px;
        }
    .overflow::-webkit-scrollbar-track {
        -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
        -webkit-border-radius: 15px;
        border-radius: 15px;
    }
    .overflow::-webkit-scrollbar-thumb {
        -webkit-border-radius: 15px;
        border-radius: 15px;
        -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5);
        background:#f00;
    } 
```

这些在桌面浏览器上运行良好，但在移动浏览器上不起作用。

移动浏览器根本不支持这样做的问题吗？还是会在不久的将来引入支持？

我已经看到了一些基于 Javascript 的解决方案，但是这些都增加了太多的臃肿，无法在基于 webkit 的浏览器中简单地设置滚动条的样式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:02:12.243

您无法在移动设备上设置本机滚动条的样式，我怀疑您是否能够做到，抱歉。

我不能说为什么有任何权威，但是所有手机和操作系统都使用不同的浏览器，并且每个浏览器都有自己的滚动条实现。很多人也采用了 iOS 的渐变滚动条方法，这意味着无论如何都没有太多的样式。

这确实限制了您真正使用自定义解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:05:28.110

我认为您应该使用自定义滚动条。对于自定义滚动条，您使用 jquery 滚动条“jscrollPane”。您必须下载这些文件：ScrollPanel.js、jquery.mousewheel.js、jquery.jscrollpane.min.js、jquery.jscrollpane.js、jquery.jscrollpane.css

有关更多详细信息，请点击此链接： [http ://www.kelvinluck.com/assets/jquery/jScrollPane/jScrollPane.html](http://www.kelvinluck.com/assets/jquery/jScrollPane/jScrollPane.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-06T09:01:44.333

移动版 safari 不支持 div 滚动，可以使用 iscoll 框架

# sql - SQL 中特定值的总和

> ID：11825158
> 
> 赞同：0
> 
> 时间：2012-08-06T08:54:30.760
> 
> 标签：sql, sql-server-2008-r2, sum, rows, multiple-columns

我正在尝试使用 SQL 查找表中特定值的总和。一个示例表是：

```
+-------+-------+-------+-------+-------+-------+-------+
|  ID   |  Co1  |  Va1  |  Co2  |  Va2  |  Co3  |  Va3  |
+-------+-------+-------+-------+-------+-------+-------+
|  01   |  AA1  |   23.0|  AA2  |   11.2|  AA3  | 328.34|
|  02   |  AA2  |   27.0|  AA3  | 234.56|  AA4  |   23.8|
|  03   |  AA1  | 409.01|  AA4  | 234.98| NULL  | NULL  |
+-------+-------+-------+-------+-------+-------+-------+ 
```

我有 35 个这样的“代码”列和值。

我需要的是选择一个只有一个代码的表格。假设我需要代码 AA3，这将是（此处不需要代码列，而只是显示我从哪里获得值）：

```
+-------+-------+--------+
|  ID   | Code  |  Value |
+-------+-------+--------+
|  01   |  AA3  |  328.34|
|  02   |  AA3  |  234.56|
|  03   |  AA3  |       0|
+-------+-------+--------+ 
```

稍后我将需要另一个（单独的）查询，其中包含多个代码的总和，例如代码 AA1 和 AA2 的总和。

```
+-------+---------+
|  ID   |   Value |
+-------+---------+
|  01   |     34.2|
|  02   |     27.0|
|  03   |   409.01|
+-------+---------+ 
```

我正在考虑拥有一个“WHERE”并在每 35 列上运行一次，但这真的很乏味，而且这似乎不太有效。我想知道是否有办法通过 SQL 来做到这一点（我可以用 Excel 和 if 语句来做到这一点，而且效果很好）。

也许如果有一种方法可以“搜索”一行，返回列名，然后使用该列名来检索数字？

如果您需要更多信息，请告诉我 =)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:03:06.750

您应该做的是以**规范化的形式存储您的数据**。

然而...

```
select SUM(v)
from
(

select * -- ID, r, v 
from 
(select * from yourtable) u
unpivot
( r for co in (co1, co2, co3)) as u1
unpivot
(  v for va in (va1, va2, va3)) as u2
where RIGHT(co,1) = RIGHT(va,1)
) v
WHERE R = 'AA1' -- etc 
```

将返回您寻求的结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:25:54.363

您的表结构不太理想。我将向您展示一个类似于基于 Excel 的`IF`方法的简单示例，然后是一个更简单的带有标准化数据结构的查询。

```
SELECT
  id,
    CASE WHEN co1 = 'AA1' THEN co1 ELSE 0 END
  + CASE WHEN co2 = 'AA1' THEN co2 ELSE 0 END
  + CASE WHEN co3 = 'AA1' THEN co3 ELSE 0 END
  + CASE WHEN co4 = 'AA1' THEN co4 ELSE 0 END
  + etc, etc
FROM
  yourTable 
```

每个 30 个代码`id`，您需要 30 个`CASE`语句。

另一种方法是每个 有几行数据`id`，而不是每个 有几列`id`。

```
+-------+-------+-------+-------+
|  ID   |  Obs  |  Cod  |  Val  |
+-------+-------+-------+-------+
|  01   |   1   |  AA1  |  23.0 |
|  01   |   2   |  AA2  |  11.2 |
|  01   |   3   |  AA3  | 328.34|
|  02   |   1   |  AA2  |   27.0|
|  02   |   2   |  AA3  | 234.56|
|  02   |   3   |  AA4  |   23.8|
|  03   |   1   |  AA1  | 409.01|
|  03   |   2   |  AA4  | 234.98|
+-------+-------+-------+-------+ 
```

查询很简单，您可以在不更改表结构的情况下添加任意数量的观察结果，以及许多其他优点......

```
 Query if one id can have several           Query if one id can only have one
 observations for the same code:            observation for any one code:
----------------------------------         -----------------------------------
 SELECT                                     SELECT
   id,                                        *
   cod,                                     FROM
   SUM(val)   AS val                          yourTable 
 FROM                                       WHERE
   yourTable                                  cod = 'AA1'
 WHERE
   cod = 'AA1'
 GROUP BY
   id,
   cod 
```

# wpf - 如何以编程方式禁用 Windows 8 Charms 栏？

> ID：11825164
> 
> 赞同：4
> 
> 时间：2012-08-06T08:55:06.690
> 
> 标签：wpf, winapi, windows-8

我需要创建一个可以在 Windows 8 上全屏运行并且用户不能轻易退出的应用程序。

由于该应用程序将在只有触觉输入的计算机或平板电脑上运行，因此我将创建一个无铬和最顶层的 WPF 应用程序，该应用程序只有在连接键盘时才能关闭。

问题是左侧的应用程序切换栏和右侧的超级按钮栏仍然可以在没有键盘的情况下打开，并且允许用户退出应用程序。这可以从代码中禁用吗？我似乎找不到方法。

简单的解决方案是在另一个操作系统上运行，但机器将运行 Windows 8，对此我无能为力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:23:51.000

我挖出了一个 .TXT，其中包含我前段时间在网上某处找到的一些注释，它可能会有所帮助（最坏的情况，它不适用于 Windows 8 并且不起作用。不幸的是我无法引用它的来源，我真的不记得它来自哪里）：

自 XP 以来已经存在“信息亭模式”。通常它的目的是锁定 IE 以显示一些交互式网页而不让用户关闭它：它被称为强制用户配置文件。

要设置它：

1.  以您想要的方式设置帐户。设置组策略，设置启动程序 用户*必须*是标准用户，而不是管理员。但是话又说回来，如果未经授权的人即使计算机“冻结”也可以获得管理员权限，我认为您会遇到更严重的问题。
2.  以管理员身份登录，然后计算机属性>高级>用户配置文件设置>（选择该配置文件）>（将其复制到任何地方）>将“允许使用”设置为所有人
3.  转到该文件夹​​属性>安全>（更改它，以便每个人都可以读取和修改，但不能写入，确保您适用于里面的所有内容）
4.  将 NTUSER.DAT 重命名为 NTUSER.MAN
5.  打开计算机管理>本地用户和组>用户>（创建新用户）>（打开新创建的用户）>配置文件>（在配置文件路径上，将其设置为该文件夹）
6.  禁用您刚刚复制的用户（因为您不希望人们登录到那里）

完成并登录新帐户后，您会发现它的性能几乎与您一直在寻找的信息亭模式一样。要撤消更改，请注销并重新登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T20:17:50.367

我遇到了完全相同的问题，并且形成了我所知道的，除非您使用自制的 rootkit 来禁用 Charms Bar，否则无法做到这一点。这就是我在考虑了所有其他选项后一直采用的方式。

为了节省您一些时间，这里是行不通的。

*   经典壳牌。
*   开始菜单套件。
*   EdgeUI 的注册表编辑。
*   通过右键单击开始菜单禁用 - 尽管您应该这样做以禁用其他功能。

**这里有一些可能有效的选项，虽然不是很漂亮。查看以下内容：**

*   侧载应用程序
*   重新创建 Windows 应用商店应用
*   Rootkit

否则，你无能为力。我很想听听你是如何解决这个问题的。

查看我提出的类似问题：[Windows 8 中的 Kiosks Running Regular Software (Non-Windows Store App)](https://stackoverflow.com/questions/22750670/kiosks-in-windows-8-running-regular-software-non-windows-store-app)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-27T08:33:58.080

`explorer.exe`当您的应用程序启动并且魅力栏不起作用时终止。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-25T10:16:33.423

这一年是 2018 年，Window 10 几乎完全推出了 Windows 8。Win8 的“热角”在 Win10 中再次变冷——它们显然取得了巨大的成功。但是，如果您仍然需要在 Win8.x/Win2012 中禁用它们并最终在这里寻找解决方案（就像我所做的那样），这就是我解决它的方法。我意识到如果全屏应用程序处于活动状态并覆盖任务栏，Windows 会自动禁用它们。由于我的应用程序是基于对话框的而不是全屏的，因此我创建了一个透明窗口（光学透明且输入透明）并将其设置为我的对话框的父窗口。现在这个不可见的窗口覆盖了整个屏幕-> 热角被禁用。

像这样的东西（简化）：

```
int nVirtualScreenLeft   = GetSystemMetrics (SM_XVIRTUALSCREEN);
int nVirtualScreenTop    = GetSystemMetrics (SM_YVIRTUALSCREEN);
int nVirtualScreenWidth  = GetSystemMetrics (SM_CXVIRTUALSCREEN);
int nVirtualScreenHeight = GetSystemMetrics (SM_CYVIRTUALSCREEN);

HWND hwndFullScreenInvisible = CreateWindowEx(
    WS_EX_LAYERED | WS_EX_TRANSPARENT | WS_EX_TOOLWINDOW,
    _T("Static"), strWindowCaption,
    WS_VISIBLE | WS_POPUP,
    nVirtualScreenLeft, nVirtualScreenTop, nVirtualScreenWidth, nVirtualScreenHeight,
    HWND_DESKTOP, NULL, NULL, NULL);

if (hwndFullScreenInvisible != NULL)
{
    BOOL bRet = SetLayeredWindowAttributes (hwndFullScreenInvisible, /*COLORREF = */ 0, /* byAlpha = */ 0, LWA_ALPHA);
}

CMyDlg dlg (CWnd::FromHandle(hwndFullScreenInvisible));
dlg.DoModal (); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-25T17:29:27.587

简单的解决方案，不完美但有效，每次激活魅力栏时，您的应用程序都会停用，因此立即重新激活它，魅力栏就会消失。将此添加到您的 App.xaml.cs

```
DispatcherTimer timer = new System.Windows.Threading.DispatcherTimer();
    public App()
    {
        this.Deactivated += App_Deactivated;
        this.Activated += App_Activated;
        timer.Tick += delegate
        {
            Application.Current.MainWindow.Activate();
        };
        timer.Interval = new TimeSpan(0, 0, 0, 0, 10);
    }

    void App_Activated(object sender, EventArgs e)
    {
        timer.Stop();
    }

    void App_Deactivated(object sender, EventArgs e)
    {
        timer.Start();
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-11T01:28:47.020

我知道回答这个问题可能有点晚了，但希望这对其他人有帮助，在您的 Regedit 中有一个 regkey 允许您选择“Shell”窗口启动的内容，默认情况下它设置为 explorer.exe 如果您改变它它会启动到你想要的任何程序，而无需通过愚蠢的 Windows 8 开始菜单。

Regkey 在

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon\shell 
```

希望对大家有所帮助。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-01-25T04:00:31.630

HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\ImmersiveShell\EdgeUI\DisableTLcorner DWORD=1

HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\ImmersiveShell\EdgeUI\DisableCharmsHint DWORD=1

# java - ThreadPoolExecutor 和 RejectedExecutionExceptionHandler

> ID：11825165
> 
> 赞同：2
> 
> 时间：2012-08-06T08:55:08.050
> 
> 标签：java, multithreading, concurrency, threadpool, java.util.concurrent

我想为 a 使用有界队列，`ThreadPoolExecutor`但我想使用我的自定义`RejectedExecutionExceptionHandler`。我需要这样做，以便我可以将被拒绝的任务放入单独的队列中，并在一段时间后尝试重新提交它们。
定制`RejectedExecutionExceptionHandler`是我的问题的解决方案吗？如果是，我该如何实施？
否则，处理我的问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:05:59.667

在您的情况下，您可能希望选择仅在有界队列被填满时才会播放的*饱和策略。*可以通过调用`setRejectedExecutionHandler()`方法来修改线程池执行器的饱和策略。饱和策略有四种类型：

1.  中止（这实际上会引发异常并让调用者处理它）
2.  Discard（这实际上是丢弃了新提交的任务）
3.  丢弃 - 最旧的（这会丢弃接下来要运行的任务并尝试重新提交新任务）
4.  调用者运行策略实现某种形式的限制，既不丢弃任务也不抛出异常，而是尝试通过将一些工作推回调用者来减慢新任务的流动。因此，调用者线程忙于运行新任务，因此在此期间无法接受任何更多任务。

对于您的情况，我认为`CallerRunsPolicy()`最有意义。做这个 ：

```
executor.setRejectedExecutionHandler(new ThreadPoolExecutor.CallerRunsPolicy()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T08:59:21.930

我会使用无界队列，因为这会将无法运行的任务排队以供以后使用。在你的情况下，我会起诉 Executors.newFixedThreadPool。您可能对它的作用感兴趣

```
public static ExecutorService newFixedThreadPool(int nThreads) {
    return new ThreadPoolExecutor(nThreads, nThreads,
                                  0L, TimeUnit.MILLISECONDS,
                                  new LinkedBlockingQueue<Runnable>());
} 
```

注意：它使用无界队列。

恕我直言，处理该问题的最简单/最好的方法是在当前线程中运行任务。

这可确保使用没有备用后台线程的当前线程及时执行所有任务。

```
new RejectedExecutionHandler() {
    @Override
    public void rejectedExecution(Runnable r, ThreadPoolExecutor executor) {
        r.run();
    }
} 
```

# javascript - 更改所有活动链接的颜色 javascript CSS

> ID：11825168
> 
> 赞同：0
> 
> 时间：2012-08-06T08:55:23.367
> 
> 标签：javascript, css

我在页面上有几个按钮，按下时颜色会从蓝色变为红色。我想要一个重置按钮来将按钮的颜色重置为蓝色，而无需重新加载整个页面。这可能吗？

```
<button id="btn" onClick="style.backgroundColor='red'; style.border='3px solid red'; style.color='#FFF';">Copy</button> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:28:13.803

这将有助于[http://jsfiddle.net/3hqnU/](http://jsfiddle.net/3hqnU/)简单使用 jquery

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:01:46.190

你可以设置

```
onmouseup="this.style.backgroundColor='blue'" 
```

但就像安迪说的，你应该使用 CSS 类，在它们之间切换，对于这种样式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T09:49:41.893

这可以通过 HTML+CSS+JS 来完成

在这里小提琴：http: [//jsfiddle.net/SReject/yK653/](http://jsfiddle.net/SReject/yK653/)

# c - 冲突类型与不兼容的隐式声明

> ID：11825172
> 
> 赞同：1
> 
> 时间：2012-08-06T08:55:36.067
> 
> 标签：c, gcc, function-declaration

相关C程序如下：</p>

```
 #include <stdio.h>

    void testifbarisvisible();

    int main()
    {
            void bar(int);
        bar(1);
        testifbarisvisible();
    }

    void testifbarisvisible()
    {
        bar(2);
    }

    void bar(int x)
    {
        printf("functionbar\n");
    } 
```

gcc 的输出是：

```
% gcc -std=c99 -c /tmp/notfilescope.c
/tmp/notfilescope.c: In function ‘testifbarisvisible’:
/tmp/notfilescope.c:14:2: warning: implicit declaration of function ‘bar’
/tmp/notfilescope.c:7:7: note: previous declaration of ‘bar’ was here
/tmp/notfilescope.c:14:2: error: incompatible implicit declaration of function ‘bar’
/tmp/notfilescope.c:7:7: note: previous implicit declaration of ‘bar’ was here 
```

在我删除第 7 行中的语句后，输出为：

```
% gcc -std=c99 -c /tmp/notfilescope.c
/tmp/notfilescope.c: In function ‘main’:
/tmp/notfilescope.c:8:2: warning: implicit declaration of function ‘bar’
/tmp/notfilescope.c: At top level:
/tmp/notfilescope.c:17:6: warning: conflicting types for ‘bar’
/tmp/notfilescope.c:8:2: note: previous implicit declaration of ‘bar’ was here 
```

gcc的版本是：

```
% gcc --version
gcc (GCC) 4.6.3 20120306 (Red Hat 4.6.3-2)
Copyright (C) 2011 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE 
```

我对 gcc 的两个输出之间的区别感到困惑。

这来自 gcc 的文档，“块内外部变量和函数的声明仅适用于包含声明的块。换句话说，它们与同一位置的任何其他声明具有相同的范围。”

所以我认为第 7 行的函数声明与第 14 行的函数调用没有关系。但结果表明观点是错误的。它们都是函数'bar'的隐式声明，但其中一个导致错误（函数'bar'的隐式声明不兼容），另一个导致警告（'bar'的类型冲突），为什么？

这个问题让我困惑了很久。有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:17:58.270

我会说你得到的结果是合理的。

只要你写

```
void bar(int); 
```

你声明在这个编译单元的*某个地方有一个带有该签名的函数，这**不是*一个隐式声明，它是显式的，如果有的话。但是，正如文档所指出的，这个声明并没有逃脱它所在的范围，所以当你到达

```
void testifbarisvisible()
{
    bar(2);
} 
```

没有这样的声明在范围内，编译器会抱怨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:39:23.223

你的代码的问题是，当你**在另一个函数中声明一个函数原型时，这意味着你只想从这个函数调用它**（这个函数在外面是不可见的）。

在我们的例子中， bar 函数只在 inside 可见`main`，而不是在 function`testifbarisvisible`中可见，为了使其对所有程序可见，必须在外部（如声明全局变量的方式）或在头文件中进行声明。

```
#include <stdio.h>

void testifbarisvisible();

int main()
{
    void bar(int);  // bar can be use inside main, not outside
    bar(1);
    testifbarisvisible();
}

void testifbarisvisible()
{
    // void bar(int); // If you want to use it inside testifbarisvisible
    bar(2);
}

void bar(int x)
{
    printf("functionbar\n");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T10:02:03.270

在 main 中，bar 只有函数作用域；它只在 main 中知道。但是，C 有另一个称为*链接*的过程。根据 C 1999 6.2.2 1，“在不同范围或同一范围内多次声明的标识符可以通过称为链接的进程引用同一对象或函数。”</p>

在 main 中，声明`void bar(int);`声明了带有外部链接的 bar，根据 C 1999 6.2.2 5：“如果函数标识符的声明没有存储类说明符，则它的链接被确定为就好像它是用存储类声明的一样。类说明符 extern。”</p>

然后，在 testifbarisvisible 中， bar 不在范围内。该语句`bar(2);`隐式声明 bar 是外部的，并且因为 bar 不在范围内，所以它是 bar 的隐式声明，没有原型。这个隐式声明的类型与前一个不同`void bar(int);`，但由于链接，它必须引用相同的函数。（根据 6.2.2 2，“在……整个程序中，具有外部链接的特定标识符的每个声明都表示相同的对象或函数。”）这是一个冲突，因此编译器会产生错误。

When you remove `void bar(int);`, there is no explicit declaration of bar in main. Instead, bar is implicitly declaration by the following line, `bar(1);`. This implicit has the same type as the implicit declaration in testifbarisvisible. Because the declarations are identical, there is no error. The compiler still gives you a warning because implicit declarations are dangerous (because the eventual explicit declaration might be in a different file and might be different, which can cause undiagnosed errors at execution).

# iphone - 如何在iphone应用程序中移动以从左向右滑动

> ID：11825173
> 
> 赞同：0
> 
> 时间：2012-08-06T08:55:41.683
> 
> 标签：iphone, xcode, uiview

我在我的视图控制器中创建了一个视图，我希望当我加载该子视图或显示它可能从原始视图控制器的左到右加载时

```
 subView = [[UIView alloc] initWithFrame:CGRectMake(20, 125, 560,530)];

[subView setBackgroundColor:[UIColor colorWithRed:216./255 green:238./255 blue:209./255 alpha:1.0]];

UIButton *backButton = [UIButton buttonWithType:UIButtonTypeCustom];
backButton.frame = CGRectMake(40,20, 169,42);
UIImage*btnImage = [UIImage imageNamed:@"back.PNG"];

[backButton setImage:btnImage forState:UIControlStateNormal];

[backButton addTarget:self action:@selector(backButtonClicked:) forControlEvents:UIControlEventTouchUpInside];

[subView addSubview:backButton];

[self.view addSubview:subView]; 
```

我想在按钮单击时打开此视图我希望当单击按钮时此视图应该出现在屏幕上，从左向右滑动，因为通常会打开新的视图控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:10:45.497

```
subView = [[UIView alloc] initWithFrame:CGRectMake(320, 125, 560,530)];

[subView setBackgroundColor:[UIColor colorWithRed:216./255 green:238./255 blue:209./255 alpha:1.0]];

UIButton *backButton = [UIButton buttonWithType:UIButtonTypeCustom];
backButton.frame = CGRectMake(40,20, 169,42);
UIImage*btnImage = [UIImage imageNamed:@"back.PNG"];

[backButton setImage:btnImage forState:UIControlStateNormal];

[backButton addTarget:self action:@selector(backButtonClicked:)     forControlEvents:UIControlEventTouchUpInside];

[subView addSubview:backButton];

[self.view addSubview:subView]; 
```

在按钮上单击在函数中编写下面给出的代码

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.5];
[UIView setAnimationCurve:UIViewAnimationCurveEaseOut];
subView.frame = CGRectMake(20, 125, 560,530);
[UIView commitAnimations]; 
```

用这个。希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:15:34.663

使用 UIView 动画块

```
- (IBAction)backButtonClicked:(id)sender {
    [UIView animateWithDuration:1.0f animations:^{
        CGRect frame = CGRectMake(subview.frame.size.width, subview.frame.origin.y, subview.frame.size.width, subview.frame.size.height);
        subview.frame = frame;
    } completion:^(BOOL finished) {
        CGRect frame = CGRectMake(320.0, subview.frame.origin.y, subview.frame.size.width, subview.frame.size.height);
        subview.frame = CGRectMake(20, 125, 560,530);       
    }];
} 
```

# c# - 当我想按类别分隔一些查询字符串时，使用嵌套类是个好主意吗？

> ID：11825174
> 
> 赞同：0
> 
> 时间：2012-08-06T08:55:42.853
> 
> 标签：c#

为了更清楚，我举一个例子

我有一个负责 sql 查询的类。当然，我有更多的域/字段和更多的查询。

我想按字段将它们分开，以便其他程序员轻松使用。

所以上课

```
public static class QueryClass
{
   public static class Field1 
   {
      public static string AQuery { get { return "a"; } }
      public static string BQuery { get { return "b"; } }
   }

   public static class Field2
   {
      public static string AQuery { get { return "a1"; } }
      public static string BQuery { get{ return "b1"; } }
   }
} 
```

示例，如何使用：

```
string aSimpleQueryField1 = QueryClass.Field1.AQuery;
string aSimpleQueryField2 = QueryClass.Field2.AQuery; 
```

使用嵌套类是个好主意吗？还是另一种最好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:01:29.310

对我来说似乎很好，但如果我理解正确，我会将字符串设为[只读](http://msdn.microsoft.com/en-us/library/acdd6hb7.aspx)字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:02:05.817

看不出这有什么问题，实际上认为这是一个好主意，尤其是从编码的角度来看。如果您对不同的数据有不同的查询，那么它会足够直观：

`QueryBase..QueryUserInfo.Something()`或者`QueryBase.QueryStats.Something()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T09:04:08.607

我认为它很好，但我应该添加构造函数

# xml - 如何在 XML 标记内添加 HTML 数据 - Oracle XML DB 选项？

> ID：11825187
> 
> 赞同：0
> 
> 时间：2012-08-06T08:56:21.370
> 
> 标签：xml, oracle

我正在尝试使用 Oracle XML DB 选项从 XML 格式的数据库中获取数据。DB 中的一列包含 HTML 格式的数据。但 HTML 数据加载如下

```
<sampleData> &lt;HTML&gt;
      &lt;Title&gt;A sample page header&lt;/Title&gt;
        &gt;body background="white"&lt;
        ...</sampleData> 
```

有没有什么办法解决这一问题 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:00:02.163

该数据最初是这样存储的。它是在 XML 文本元素中编码 XML[实体](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)的标准方法（否则 - 您将如何可靠地解析`<`和`>`在 XML 文本元素中？）

您需要提取该文本元素，它会显示为以下形式：

```
<HTML><TITLE>... 
```

等等。如果你需要用它做更多的事情，我会使用 HTML 解析器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T10:22:24.183

您可以使用该[`DBMS_XMLGEN.convert`](http://docs.oracle.com/cd/B10501_01/appdev.920/a96616/arxml30.htm#1009220)函数将编码的 HTML 转换为常规 HTML

[这](http://www.sqlfiddle.com/#!4/d5e55/7)是小提琴中的一个例子

# delphi - 在字符串网格中显示当前选定的行

> ID：11825198
> 
> 赞同：1
> 
> 时间：2012-08-06T08:57:13.040
> 
> 标签：delphi

> **可能重复：**
> [TStringGrid - 有没有一种简单的方法来获取“当前/选定”行？](https://stackoverflow.com/questions/2107683/tstringgrid-is-there-a-simple-way-to-get-the-current-selected-row)

如何将当前选定的行显示为字符串或整数？如果可能的话，我想稍后再参考。这当然是在字符串网格中。

# javascript - jquery 验证焦点以显示工具提示

> ID：11825199
> 
> 赞同：1
> 
> 时间：2012-08-06T08:57:32.650
> 
> 标签：javascript, jquery, validation, jquery-validate

我正在使用验证插件，但我不确定如何在表单字段首次获得焦点时显示错误消息。

我想这样做是因为错误消息兼作工具提示。

一旦该字段运行验证，一旦它完全按照我希望的方式工作（在按键等上），但直到元素首先失去焦点。

这是我的代码...

```
<form>

<div>
    <input type="text" name="username" /><div class="tooltipContainer"></div>
</div>

</form>​ 
```

和

```
var validator = $("form").validate({ 

        rules: { 

            username: { 
                required: true, 
                minlength: 5, 
            }
        }, 
        messages: { 
            username: { 
                required:  "Required...", 
                minlength: jQuery.format("At least {0} characters please..."), 
            }
        }, 

        errorPlacement: function(error, element) { 
            error.appendTo( element.next()); 
        }, 

        success: function(label) { 
            label.html(" ").addClass("checked"); 
        } 
    }); ​ 
```

[http://jsfiddle.net/J4dkr/](http://jsfiddle.net/J4dkr/)

# linux - 无效谓词 zcat

> ID：11825204
> 
> 赞同：0
> 
> 时间：2012-08-06T08:57:59.623
> 
> 标签：linux, bash, zcat

我正在尝试检索文件（.gz）并在找到它后自动读取它，我想将其包含在“查找”命令的 [action] 部分中，不幸的是由于某种原因无法正常工作。我正在做的是：

```
find . -name *20120805.gz -zcat 
```

我得到的是：查找：无效谓词`-zcat'

那个动作有什么问题？有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:54:31.100

那真的是无效的谓词。`-exec`在这种情况下您必须使用：

```
$ find . -name *20120805.gz -exec zcat {} \; 
```

对于找到的每个文件，以文件名作为参数`find`运行。`zcat`

# grouping - 将新行添加到在 gwt 中分组的列表网格

> ID：11825208
> 
> 赞同：1
> 
> 时间：2012-08-06T08:58:28.607
> 
> 标签：grouping, smartgwt, listgrid

我的智能 gwt listgrid 按其列之一分组。如果我想向网格中的 a 组添加新行，请单击该组和添加按钮。添加一行作为网格的最后一行以进行编辑，而与分组无关。保存该行后，它会显示在正确的组中。有没有办法将新行添加到同一组中进行编辑而不是最后一行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T23:33:45.580

如果您想使用挂起的编辑，您必须使用 TreeGrid 而不是 ListGrid。使用底层树，您可以通过调用将新记录添加到专用 TreeNode：

```
tree.add(node, parent); 
```

要获得与分组 ListGrid 相似的外观和感觉，您需要稍微自定义 TreeGrid：

```
setShowOpenIcons(false);
setShowDropIcons(false);
setFolderIcon(null);
setNodeIcon(null); 
```

通过覆盖方法：

```
@Override
protected String getCellStyle(ListGridRecord record, int rowNum, int colNum) {
    if (data.isFolder((TreeNode) record)) {
        return "myOwnHeader";
    }
    return super.getCellStyle(record, rowNum, colNum);
} 
```

您可以为所有标题定义自定义样式，如下所示：

```
.myOwnHeader{
    border-bottom: 1px solid #8299B8;
    color: #3764A3;
    font-family: Tahoma,Verdana,sans-serif;
    font-weight: bold;
} 
```

# c# - SQL Server Compact Edition 4 - AccessViolationException

> ID：11825209
> 
> 赞同：5
> 
> 时间：2012-08-06T08:58:34.897
> 
> 标签：c#, multithreading, entity-framework, sql-server-ce, sql-server-ce-4

我首先使用实体​​框架代码和 SQL Server Compact 4.0 构建一个 .NET 4 WPF 应用程序。我正在尝试调用`DbContext.SaveChanges()`后台线程以避免阻塞 UI，但我偶尔会遇到以下异常：

```
System.AccessViolationException occurred
  Message=Attempted to read or write protected memory. This is often an indication that other memory is corrupt.
  Source=System.Data.SqlServerCe
  StackTrace:
       at System.Data.SqlServerCe.NativeMethodsHelper.OpenStore(IntPtr pOpenInfo, IntPtr pfnOnFlushFailure, IntPtr& pStoreService, IntPtr& pStoreServer, IntPtr& pQpServices, IntPtr& pSeStore, IntPtr& pTx, IntPtr& pQpDatabase, IntPtr& pQpSession, IntPtr& pStoreEvents, IntPtr& pError)
       at System.Data.SqlServerCe.NativeMethods.OpenStore(IntPtr pOpenInfo, IntPtr pfnOnFlushFailure, IntPtr& pStoreService, IntPtr& pStoreServer, IntPtr& pQpServices, IntPtr& pSeStore, IntPtr& pTx, IntPtr& pQpDatabase, IntPtr& pQpSession, IntPtr& pStoreEvents, IntPtr& pError)
       at System.Data.SqlServerCe.SqlCeConnection.Open(Boolean silent)
       at System.Data.SqlServerCe.SqlCeConnection.Open()
       at System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf(Boolean openCondition, DbConnection storeConnectionToOpen, DbConnection originalConnection, String exceptionCode, String attemptedOperation, Boolean& closeStoreConnectionOnFailure)
       at System.Data.EntityClient.EntityConnection.Open()
       at System.Data.Objects.ObjectContext.EnsureConnection()
       at System.Data.Objects.ObjectContext.SaveChanges(SaveOptions options)
       at System.Data.Entity.Internal.InternalContext.SaveChanges()
       at System.Data.Entity.Internal.LazyInternalContext.SaveChanges()
       at System.Data.Entity.DbContext.SaveChanges()
       at SourceLog.Model.LogSubscriptionManager.<SaveChanges>b__2() in C:\github.com\tomhunter-gh\SourceLog\SourceLog.Model\LogSubscriptionManager.cs:line 51
  InnerException: (null) 
```

这是调用的代码`SaveChanges()`：

```
internal static readonly object DbSaveLockObject = new object();
public static void SaveChanges()
{
    Task.Factory.StartNew(() =>
    {
        lock (DbSaveLockObject)
        {
            Debug.WriteLine(DateTime.Now + ": SaveChanges in lock");
            Db.SaveChanges();
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T21:53:44.117

这里的问题不是序列化对 DbContext 对象的访问，而是避免从不同线程访问同一个对象。所以解决方案是确保每次需要与数据库交互时都创建一个新的 DbContext 对象。

```
using (var db = new SourceLogContext())
{
    db.LogSubscriptions.First(s => s.LogSubscriptionId == LogSubscriptionId)
        .Log.Add((LogEntry)e.LogEntry);
    db.SaveChanges();
} 
```

我不太确定的是您如何处理更新 UI。如果上面的代码在后台线程中运行，并且 UI 之前已绑定到 LogSubscription.Log 集合，则 UI 线程正在引用集合的不同实例，您还必须将新条目添加到此集合中。

```
_uiThread.Post(entry => Log.Add((LogEntry)entry), e.LogEntry); 
```

更复杂的情况是延迟加载，在用户通过 UI 访问实体之前，可能不会从数据库加载实体。要处理此问题，您似乎必须在 UI 线程的生命周期内至少维护一个对 DbContext 的引用。

```
private static readonly SourceLogContext DbUILazyLoadContext = new SourceLogContext(); 
```

我欢迎对这些观点发表评论..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:10:46.643

仅当可验证的托管代码与非托管代码或不安全的托管代码交互时，才会发生 AccessViolationException。

您应该通过我的 MS 博客了解如何解决访问破坏[错误：http://blogs.msdn.com/b/sqlservercompact/archive/2009/05/06/troubleshooting-access-violation-exception-while-using- sql-server-compact-database-with-ado-net-provider.aspx](http://blogs.msdn.com/b/sqlservercompact/archive/2009/05/06/troubleshooting-access-violation-exception-while-using-sql-server-compact-database-with-ado-net-provider.aspx)

# ios4 - UITableView 复制-删除-编辑单元格

> ID：11825210
> 
> 赞同：1
> 
> 时间：2012-08-06T08:58:37.360
> 
> 标签：ios4, uitableview

我正在尝试在 UITableView 上实现一些功能，以便让用户能够复制-删除-编辑单元格。我已经阅读了很多关于 UITableViewDelegate 协议的内容并浏览了网络；以及对以下方法进行了大量实验。

```
- (BOOL)tableView:(UITableView*)tableView shouldShowMenuForRowAtIndexPath:(NSIndexPath*)indexPath;
- (BOOL)tableView:(UITableView*)tableView canPerformAction:(SEL)action forRowAtIndexPath:(NSIndexPath*)indexPath withSender:(id)sender;
- (void)tableView:(UITableView*)tableView performAction:(SEL)action forRowAtIndexPath:(NSIndexPath*)indexPath withSender:(id)sender; 
```

在这一点上，我仍然没有得到我想要的。更准确地说，“复制”部分正在工作，但其余部分在所有情况下都没有或不正确。

我为“副本”找到了相当精确的信息。但是对于“删除”来说，这要困难得多，而对于“编辑”来说，则更加困难。我不认为删除编辑是如此罕见的功能，但无论我在这里的原因是什么，都在努力解决我的问题。

有没有人尝试过实现我现在正在做的事情？感谢您提供任何相关信息。

# shared-memory - QSharedMemory 无法生成密钥

> ID：11825212
> 
> 赞同：1
> 
> 时间：2012-08-06T08:58:45.660
> 
> 标签：shared-memory

我是 Qt 的新手，我想使用 QSharedMemory 作为在运行时将一些应用程序连接在一起的工具。我已经检查了 QSharedMemory 示例并提取了我需要使用它的所有内容。

这里的问题是 QSharedMemory 实例无法分配内存。当我调用`create()`它时返回 false，当我打印存储在 中的错误消息时`errorString()`，它显示以下错误：

`QSharedMemory::create: unable to make key`

我的一段代码与此类似：

```
QSharedMemory sharedmemory;
if(sharedmemory.isAttached())
    sharedmemory.detach();

QString st = "this is the shared data";
QBuffer buffer;
buffer.open(QBuffer::ReadWrite);
QDataStream out(&buffer);
out << st;
int size = buffer.size();

if(!sharedmemory.create(size))
{
    std::cout<<sharedmemory.errorString().toStdString()<<std::endl;
    return 1;
} 
```

无论我对该方法给出什么`size`，`create()`它都不会分配内存。

任何想法都适用。谢谢马赫迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:13:17.890

从源代码`qsharedmemory_unix.cpp`：

```
// build file if needed
int built = createUnixKeyFile(nativeKey);
if (built == -1) {
    errorString = QSharedMemory::tr("%1: unable to make key").arg(QLatin1String("QSharedMemory::create"));
    error = QSharedMemory::KeyError;
    return false;
} 
```

来自 Qt 文档`QSharedMemory`：

> `QSharedMemory::QSharedMemory ( const QString & key, QObject * parent = 0 )`
> 
> 使用给定的父对象构造一个共享内存对象，并将其键设置为键。因为设置了它的键，所以可以调用它的`create()`和函数。`attach()`
> 
> 另请参阅`setKey()`、`create()`和`attach()`。
> 
> * * *
> 
> `QSharedMemory::QSharedMemory ( QObject * parent = 0 )`
> 
> 这个函数重载`QSharedMemory()`。
> 
> 用给定的父对象构造一个共享内存对象。共享内存对象的键不是由构造函数设置的，因此共享内存对象没有附加底层共享内存段。*密钥必须在`setKey()`之前设置`create()`或`attach()`可以使用。*
> 
> 另请参阅`setKey()`。

（强调我的）

您基本上使用的是构造函数的第二种形式，而不是设置共享内存键。您应该给出`QSharedMemory`一个密钥名称 - 请咨询[shm_open](http://pubs.opengroup.org/onlinepubs/009604499/functions/shm_open.html)以获取有关此密钥的信息。请注意，在 Linux POSIX 中，共享内存是作为文件系统实现的，`/dev/shm`并且对键名有​​一定的限制——除了名称的开头之外，它不能`/`在任何地方包含正斜杠 ()，因为这样需要在其中创建目录`/dev/shm`并且两者`shm_open()`并且`QSharedMemory::createUnixKeyFile()`不太愿意这样做。

# zedgraph - 在 Zedgraphs 中包装图例文本

> ID：11825213
> 
> 赞同：1
> 
> 时间：2012-08-06T08:58:53.523
> 
> 标签：zedgraph

有什么方法可以在 Zedgraphs 中包装图例文本。

在我的应用程序中，图例文本较长，这使图形看起来很小。所以我需要一种包装图例文本的方法，以保持图形大小的一致性。

谢谢库马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:43:03.247

据我所知，没有自动化的方法可以做到这一点，所以你可能必须自己插入换行符`\n`。像这样，例如：

```
zgc.GraphPane.AddCurve("curve with a\nterribly long\nname that\ncould potentially\nstretch far\nacross the pane", 
    new[] { -0.3, 0.5, 0.9 }, new[] { 0.8, 0.3, 0.1 }, Color.Blue); 
```

这将导致文本显示换行，但不幸的是，图例线和符号的宽度也由曲线名称的长度决定，并不必要地延长。为避免此问题，您还需要禁用图例中线条和符号的显示：

```
zgc.GraphPane.Legend.IsShowLegendSymbols = false; 
```

最终结果将如下所示：

![图例中的长曲线名称](../Images/ab6118bc2fdf939fef5e1918d799b36e.png)

# database - 具有内置数据保留功能的数据库（可能是 noSQL）

> ID：11825214
> 
> 赞同：5
> 
> 时间：2012-08-06T08:58:55.007
> 
> 标签：database, nosql, storage, archive

哪些开源数据库具有自动“老化”数据的功能，以便您可以指定一条数据必须存储多长时间？

即在一条数据上设置一个日期或时间，之后，数据库可以自由地删除它的每一个痕迹。

更新：我更多的是寻找几天到几年的老化时间，而不是几分钟或几秒钟。所以缓存机制并不是我想要的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T11:47:34.647

MongoDB 在新版本 2.2 中有一些东西，可能会引起人们的兴趣 - [TTL Collections](http://docs.mongodb.org/manual/tutorial/expire-data/)。

集合通过跟踪插入时间的特殊索引与后台 mongod 进程一起过期，该进程定期从集合中删除过期文档。您可以使用此功能使副本集和分片集群中的数据过期。

从 mongo shell 创建 TTL 集合非常容易 -

`db.mycollection.ensureIndex( { "status": 1 }, { expireAfterSeconds: 3600 } )`

*   [在此处](http://www.mongodb.org/downloads)下载 2.2rc0 （候选发布版，尚未完全准备好生产...在生产构建之前还会有一个候选发布版）

*   [此处](https://jira.mongodb.org/browse/SERVER/fixforversion/11218)更改日志

*   2.2 发行说明可以在[这里](http://docs.mongodb.org/manual/release-notes/2.2/)找到。

我不能代表其他解决方案。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-06T11:40:10.637

我认为大多数 noSql 数据库都支持此功能，但例如，cassandra 具有该功能：

[http://www.datastax.com/docs/1.0/ddl/column_family](http://www.datastax.com/docs/1.0/ddl/column_family)。

Cassandra 可以从这里下载：

[http://cassandra.apache.org/](http://cassandra.apache.org/)

但是，如果您**仅在到期时间**使用这样的数据库，请考虑使用缓存，因为它完全符合您正在尝试做的事情，特别是如果您的对象生存时间很短。毕竟，缓存的目的是“作为要临时存储的对象的容器”。大多数传统的缓存是键值缓存/数据存储，很像大多数 NoSql 数据库。

虽然像 cassandra 这样的 nosql 数据库在检索数据方面通常非常快，但如果与传统缓存相比，不断添加和删除数据，并增加额外的文件系统和/或网络开销，您会发现它们中的大多数表现不佳。如果你发现你需要的实际上是一个缓存，我可以推荐一些。

[http://ehcache.org/](http://ehcache.org/)

> 是一个非分布式缓存，有一个非常简单的 api

[http://www.jboss.org/infinispan/](http://www.jboss.org/infinispan/)

> 是分布式内存缓存/K,V 存储

但是，使用缓存，您可以存储的数量受到限制，因为默认情况下它们是在内存中的。他们中的大多数人也可以选择将数据存储在文件系统上，但如果涉及到这一点，我会使用 noSQL 数据库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T21:11:52.177

Couchbase 使用 memcached 二进制协议提供 TTL 删除来设置生存时间。因此，您可以存储一个数据项，并带有一个时间戳，它应该在之后被删除（可以在未来任意远）。届时，Couchbase 将删除数据项。

这是一个如何从 Ruby 设置 TTL 的示例。如果您愿意，还有其他语言的示例：http: [//www.couchbase.com/docs/couchbase-sdk-ruby-1.0/couchbase-sdk-ruby-getting-started-hello.html](http://www.couchbase.com/docs/couchbase-sdk-ruby-1.0/couchbase-sdk-ruby-getting-started-hello.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-06T11:41:18.047

这取决于您需要存储什么类型的数据。简单的键值存储是否足够，或者您需要文档数据库。

这是缓存的常见用法。您可以尝试 EHCache、Hazelcast、Memcached 等。但这些主要是键值存储。有几种删除数据的策略——最旧的、最少使用的等。这些都是内存中的存储。如果您需要具有此功能的持久 K/V 存储，请尝试 Redis。

如果您正在收集基于时间的数据，例如使用统计数据，您可能会使用 RRD 类型的数据库，该数据库聚合旧数据而不是删除它（生成日、周、月总和）

如果您需要更像一个文档数据库，那么 MongoDB 似乎支持简单的文档过期（http://docs.mongodb.org/manual/tutorial/expire-data/）。CouchDB 似乎不支持这一点，但是，您可以运行计时器任务来删除旧数据。

# c# - 颜色 Excel 标题

> ID：11825217
> 
> 赞同：-2
> 
> 时间：2012-08-06T08:59:10.310
> 
> 标签：c#, excel, excel-interop

我正在写一个工作正常的 Excel 电子表格，但我需要将标题着色为深蓝色并将字体颜色设为白色，但我在弄清楚如何实现这一点时遇到了一些问题.....这是到目前为止我的代码：

```
foreach (DataColumn c in DT.Columns)
{
    iColumnCount++;
    if(iRowCount == 0)
        Worksheet.Cells[1, iColumnCount] = c.ColumnName;
    else
        Worksheet.Cells[iRowCount, iColumnCount] = c.ColumnName;

    Worksheet.Columns.AutoFit(); //Correct the width of the columns
    //THIS IS WHERE I WANT TO COLOR THE HEADERS
}

foreach (DataRow r in DT.Rows)
{
    iRowCount++;
    iColumnCount = 0;
    foreach (DataColumn c in DT.Columns)
    {
        iColumnCount++;
        if(iRowCount == 1)
            Worksheet.Cells[iRowCount + 1, iColumnCount] = r[c.ColumnName].ToString();
        else
            Worksheet.Cells[iRowCount, iColumnCount] = r[c.ColumnName].ToString();

        Worksheet.Columns.AutoFit(); //Correct the width of the columns
    }
} 
```

任何人都可以帮助我实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:13:49.343

试试这个，它的工作

```
Worksheet.Range["A1","G1"].Interior.Color = Excel.XlRgbColor.rgbDarkBlue;
Worksheet.Range["A1","G1"].Font.Color = Excel.XlRgbColor.rgbWhite;
// where "A1" to "G1" is your header range 
```

# jquery - Jquery Post 绕过验证

> ID：11825219
> 
> 赞同：0
> 
> 时间：2012-08-06T08:59:16.410
> 
> 标签：jquery, validation, post

有没有办法绕过验证？

我的目的是允许任何新号码，而无需在该网站上注册新号码并等待短信验证码。这就是为什么我想绕过号码的检查/验证，以便我可以在他们的基于 Web 的注册中注册一个新号码以进行文本/电话促销。

以下是部分代码：

```
`addPromo:function(){
    var a=$(" #keyword").val();
    var d=$("#"+Aftersale.Ui.Plan.namespace+"_serviceNumber").val();
    var b=$("#"+Aftersale.Ui.Plan.namespace+"_email").val();
    var c=$("#"+Aftersale.Ui.Plan.namespace+"_hashKey").val();
    var f="email="+b+"&serviceNumber="+d+"&keyword="+a+"&transId="+c+"&serviceMethod=ServiceCall&callback=?";
    var g=$("#promoType")[0].selectedIndex;
    var e=$("#keyword").val();

    if(Aftersale.Validation.Plan.validatePromos(g,e))
    {
    ServicesProxy.Ajax.addPromo($.trim(f))
    }
}` 
```

我想绕过对 transid 的检查。它采用哈希格式，但该代码来自的站点上没有 transid 或 hashkey，因此我可以动态更改 serviceNumber 和电子邮件。

但是今天如果我更改电子邮件和号码，错误会显示“INVALID INPUT”，我注意到他们添加了 hashkey 或 transid。

我可以绕过验证吗？

这是 ServicesProxy.Ajax.addPromo($.trim(f)) 的代码：

```
 addPromo:function(a)
{
$.ajax(
{
url:Ajax.url+"ServiceCallServlet",dataType:Ajax.dataType,type:Ajax.type,data:a,success:function(d){var b=d.FLAG;var c=d.MESSAGE;if(b){Aftersale.Ui.hideMessages();Aftersale.Ui.showSuccessMessage(c)}else{Aftersale.Ui.hideMessages();Aftersale.Ui.showErrorMessage(c)}},error:function(b,c){Aftersale.Ui.showErrorMessage(b)}
})
} 
```

# java - JVM over CLR，反之亦然

> ID：11825220
> 
> 赞同：6
> 
> 时间：2012-08-06T08:59:16.283
> 
> 标签：java, .net, jvm, clr

我使用 Java 和 .NET 已经很多年了，我看到了很多 JVM 和 CLR 的实现；许多操作系统，许多供应商等，但我在这里问是否有人知道在 JVM 上实现 CLR 或在 CLR 上实现 JVM。

如果可以完成这样的桥梁，它应该使事情真正更具运行时可移植性！

我知道 CLR 和 JVM 之间几乎没有区别，也有很多相似之处，但是两个运行时之间也有交叉编译器，比如 XMLVM，也许可以在运行时提供这个功能......

这可能吗？如果不是，主要的技术障碍是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:23:52.347

[IKVM.NET](http://www.ikvm.net/)允许在顶级 CLR（Mono 或 MS）上运行 Java 字节码并将 Java 源代码编译到 CLI，当然库支持可能是一个问题。

# android - 从 web .vcs 下载将日历事件添加到 Android

> ID：11825221
> 
> 赞同：12
> 
> 时间：2012-08-06T08:59:20.090
> 
> 标签：android, calendar, icalendar

我目前的问题如下；我正在创建一个网站，其中包含两个供下载的文件（**.vcs**和 .ics），一旦单击相应的链接，就会将事件添加到设备日历中。对于 iPhone 中的 .ics，我没有问题。我的问题是，在 Android 中下载**.vcs**文件时，它只会打开一个显示**.vcs**文件内容的空白页面，但不会下载它，也不会将该文件识别为日历事件。

我认为根据我之前在 SO 中读到的内容（我正在寻找那个线程，但现在找不到它来参考）这与**mime 类型**有关，但在试图弄清楚如何做到这一点之后，我无法做到工作。

在那个线程中，他们还指向一个**vcs**文件适用于 Android 的站点，因此可以这样做（我读了很多帖子说这是不可能的，除非你从 google play 下载日历应用程序）；[http://plone.org/events/community/plone-conference-2011](http://plone.org/events/community/plone-conference-2011)

我检查了该页面的源代码，我想知道他们是否在服务器端做某事如果您能帮我指出要遵循的方向或可行的解决方案或您可能对此提出的任何建议，我将不胜感激。

PD - 这是我在 SO 中的第一个问题！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-06T12:49:47.910

终于让它工作了，用这个 index.php 添加到一个位置的链接

```
<?php
header("Content-Type: text/x-vCalendar");
header("Content-Disposition: attachment; filename=london2012.vcs");
?>
BEGIN:VCALENDAR
PRODID:-//AT Content Types//AT Event//EN
VERSION:2.0
METHOD:PUBLISH
BEGIN:VEVENT
DTSTAMP:20120801T133822Z
CREATED:20120801T042948Z
LAST-MODIFIED:20120801T043003Z
SUMMARY:Olympic Games
DTSTART:20120727T000000Z
DTEND:20120812T000000Z
LOCATION:London
URL:http://www.london2012.com/
CLASS:PUBLIC
END:VEVENT
END:VCALENDAR 
```

然后从 Android 下载文件，您可以将其导入日历。希望对其他人有用...

# dynamics-ax-2009 - 新的退货单名称？

> ID：11825224
> 
> 赞同：0
> 
> 时间：2012-08-06T08:59:25.237
> 
> 标签：dynamics-ax-2009, ax

我很难在 AX 中找到新退货单的名称？当我进入设置时，我看到表单名称是：`SalesCreateOrder`但这也是我创建新销售订单时使用的表单名称，但是这些表单不同，那么它们如何使用相同的表单？原因是我想将我的设置`DlvMode`为强制销售订单而不是退货订单。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T20:39:36.583

Dynamics AX 中的许多表单用于多种用途，因为多个功能的设计相似。`SalesCreateOrder`是这些形式之一。

`Args`表单通常会根据通过定义表单调用位置的类传入的参数来更改其设计和功能。这些参数通常在用户访问表单的菜单项上设置。

caller 参数通常用于表单使用的一个或多个类中。一个这样的类`SalesCreateOrder`是一个名为 的类`SalesCreateOrderForm`。如果你看一下`construct`这个类的方法，你会发现它根据`salesType`参数的不同构造。如果销售类型是退货单，则其构造方式与销售订单不同。

如果我是你，我会检查在 of 中声明的类`classDeclaration`，`SalesCreateOrder`并开始在那里寻找放置代码的好地方。

# ruby-on-rails - Ruby on Rails：搜索时的优先字段

> ID：11825226
> 
> 赞同：0
> 
> 时间：2012-08-06T08:59:26.287
> 
> 标签：ruby-on-rails, ruby, search, drop-down-menu

我正在尝试创建一个搜索页面，用户可以在其中搜索许多不同领域的项目记录。我希望他们能够在`client`、`industry`、`start_date`、`end_date`和上进行搜索`keywords`。

目前，该页面显示“客户”和“行业”的下拉菜单，以及“关键字”的文本框，因此用户可以从数据库中选择并搜索关键字。

我在搜索开始日期时遇到问题，因为我试图让用户选择在某个时间范围内搜索“开始日期”，即 3 天前、1 周前......在下拉菜单中，或者通过使用 jquery datepicker 输入“开始日期”和“结束日期”来搜索特定日期。

我希望它以特定日期为优先，以防用户同时选择时间尺度和特定日期。

这是我的搜索视图：

```
 <h1>Search</h1>

<% if @project_search.total_entries > 0 %>
<%= form_tag search_path, method: :get do %>

Client :
<%= select(@projects, :client, Project.all.map {|p| [p.client]}.uniq, :prompt => "-Any-", :selected => params[:client]) %></br>

Industry :
<%= select(@projects, :industry, Project.all.map {|p| [p.industry]}.uniq, :prompt => "-Any-", :selected => params[:industry]) %></br>    

Select start date:
<%= select_tag "start_date_dd", options_for_select({
    "Select a period" => "",
      "3 days ago"   => DateTime.now.to_date - 3.days,   # =    259_200 sec.
      "1 week ago"   => DateTime.now.to_date - 1.week,   # =    604_800 sec.
      "1 month ago"  => DateTime.now.to_date - 1.month,  # =  2_592_000 sec.
      "6 months ago" => DateTime.now.to_date - 6.months, # = 15_552_000 sec.
      "1 year ago"   => DateTime.now.to_date - 1.year,   # = 31_557_600 sec.
    }, :selected=>params[:start_date_dd] )%>    

or select project dates between

<%=  text_field_tag ("start_date") %>

and

<%= text_field_tag("end_date") %></br>    

Keywords :

<%= text_field_tag :keywords, params[:keywords] %></br>

<%= submit_tag "Search", name: nil %>

<% end %> 
```

这是我的项目模型，在搜索中没有特定日期选项的情况下工作：

```
class Project < ActiveRecord::Base
  attr_accessible :client, :end_date, :industry, :keywords, :start_date, 

def self.search(search_client, search_industry, search_start_date_dd,  search_keywords) 
  return scoped unless search_client.present? || search_industry.present? || search_start_date_dd.present?  || search_keywords.present?

  where(['client LIKE ? AND industry LIKE ? AND DATE(start_date) BETWEEN ? AND ?  AND keywords LIKE ?', 
      "%#{search_client}%", "%#{search_industry}%" ,  
      search_start_date_dd, DateTime.now.to_date, "%#{search_keywords}%"
    ])

end

def self.paginated_for_index(projects_per_page, current_page)
    paginate(:per_page => projects_per_page, :page => current_page)
  end

end 
```

这是我在项目控制器中的搜索操作，它只考虑了时间尺度搜索。

```
def search

@search = params[:client], params[:industry], params[:start_date_dd],  params[:keywords]

@project_search = Project.search(*@search).order(sort_column + ' ' + sort_direction).paginated_for_index(per_page, page)

@search_performed = !@search.reject! { |c| c.blank? }.empty? 

   @project = Project.new(params[:project])

respond_to do |format|
      format.html # search.html.erb
      format.json { render :json => @project }
    end

end 
```

我曾尝试包括特定日期搜索，但没有运气。希望有人能指出他们正确的方向。我是一个 Rails 菜鸟，所以请放轻松。提前致谢。

编辑：这是我让它工作的尝试。

```
def self.search(search_client, search_industry, search_start_date_dd, search_start_date, search_end_date, search_keywords) 
  return scoped unless search_client.present? || search_industry.present? || search_start_date_dd.present? || search_start_date.present? || search_end_date.present? || search_keywords.present?

where(['client LIKE ? AND industry LIKE ? AND DATE(start_date) BETWEEN ? AND ? OR DATE(start_date) BETWEEN ? AND ? AND DATE(end_date) BETWEEN ? AND ? AND keywords LIKE ?', 
      "%#{search_client}%", "%#{search_industry}%" , search_start_date_dd, DateTime.now.to_date, search_start_date, search_end_date, search_start_date, search_end_date,"%#{search_keywords}%"
    ])

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T15:19:17.640

我将修改 start_date_dd 下拉列表以具有自定义字段，然后添加 jQuery 以显示/隐藏 start_date/end_date 字段。然后在您的控制器中，您可以查看 start_date_dd 是否是自定义字段，那么您应该使用 start_date/end_date 字段。

其他的建议：

我不会将他们搜索的内容直接传递给数据库。我会首先运行如下内容：

```
user_supplied_start_date = Time.zone.parse(search_start_date) 
```

这样，如果他们给你一个无效的日期（解析的 user_supplied_start_date == nil），你可以给他们一个警告，告诉他们你无法解析 search_start_date，而是向他们显示最后*_*天。

我还看到了以下代码：

```
def self.search
  scoped = scoped.where(['client like %?%', params[:client]) if params[:client].present?
  scoped = scoped.where(['client like %?%', params[:industry]) if params[:industry].present?
  ...
  scoped
end 
```

这样，您就可以根据他们发送给您的内容进行搜索。

您只列出当前分配给项目的客户。用户不应该能够搜索所有客户并看到**_client**没有任何项目吗？

作为一般规则，我更喜欢帮助方法而不是在视图中包含代码......

```
Project.all.map {|p| [p.client]}.uniq 
```

对比

```
# app/helpers/search_helper.rb
def clients_for_select
  Client.select("id, name").map{|c| [c.id, c.name]}
end 
```

# iphone - UIPopoverController & 导航到 UIViewController？

> ID：11825230
> 
> 赞同：0
> 
> 时间：2012-08-06T08:59:45.097
> 
> 标签：iphone, xcode, uiviewcontroller, uipopovercontroller, uipopover

我正在为 iPad 开发应用程序。我能够在 VIEW1 中显示带有 tableView 的 UIPopoverController 和一些列表。

当用户从表中选择一行时，我想从 VIEW1 导航到 VIEW2。

换句话说，

1.  VIEW1 包含一个按钮 1。

2.  当用户按下按钮 1 时，弹出框显示在 VIEW1 上。

3.  在弹出窗口中，有一个包含一些行的表。（视图1）

4.  当用户选择一行时，它应该调用 VIEW2，即从 VIEW1 导航到 VIEW2。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:24:26.663

在 tableview 委托方法 didSelectRowAtIndexPath 中，您可以按如下方式调用方法：

1.在初始化popover控制器时定义target和selector如下：[theController setTarget:self andSelector:@selector(yourMethod:)];

2.在包含tableview的视图控制器中，您可以定义setTarget方法如下：

```
-(void)setTarget:(id)inTarget andSelector:(SEL)inSelector {
    mTarget = inTarget;
    m_Selector = inSelector;
} 
```

其中 mTarget 是 id 类型，mSelector 是选择器。

3.然后didSelectRowAtIndexPath你可以调用yourMethod如下：

```
if ([m_Target respondsToSelector:m_Selector]) {
        [m_Target performSelector:m_Selector withObject:nil];
    } 
```

如果表视图在同一个视图中，那么您可以在 didSelectRowAtIndexPath 中调用 yourMethod。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:19:52.757

在表视图控制器文件中，您将要使用该`didSelectRowAtIndexPath`方法来呈现 view2，例如：

```
[self presentViewController:view2controller animated:YES completion:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T12:26:49.230

```
 - (UITableViewCell *)tableView:(UITableView *)tableView 
         cellForRowAtIndexPath:(NSIndexPath *)indexPath {
VIEW2 *view2=[[VIEW2 alloc]initWithName:@"VIEW2" bundle:[NSBundle mainBundle]];
[self.navigationController pushViewController:view2 animated:YES];
[view2 release];
}
just try it.This will help you. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T10:20:29.020

我找到了答案。只需将 UITableViewController 添加到 UIPopOverController 即可从 VIEW1 导航到 VIEW2。

感谢您的努力。下面是代码。

```
 tableViewController = [[UITableViewController alloc]initWithStyle:UITableViewStylePlain];
        tableViewController.tableView = tblView;
        tableViewController.tableView.delegate = self;
        tableViewController.tableView.dataSource = self;
        UIPopoverController *popover = [[UIPopoverController alloc] initWithContentViewController:tableViewController];
        self.popoverController = popover;
        popoverController.delegate = self;

        [popoverController setPopoverContentSize:CGSizeMake(442.0f, 527.0f)];
        [popoverController presentPopoverFromRect:CGRectMake(bkBtn.frame.origin.x+bkBtn.frame.size.width/2, bkBtn.frame.origin.y, 442.0f, 527.0f) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionDown animated:YES];

        [tableViewController.tableView reloadData]; 
```

# grails - 我已将 pdf 文件存储为 blob，当我尝试在浏览器中将其呈现为 pdf 时

> ID：11825232
> 
> 赞同：0
> 
> 时间：2012-08-06T08:59:48.073
> 
> 标签：grails

我有一个域类

```
class UploadSyllabus {
    String semester
    Course course
    Department department
    byte[] uploadSyllabus
} 
```

其中 Course、Department 是其他域类

在我的`Show.gsp`页面

```
<a style="margin-left: 108px;"href="javascript:getPdfFromDB()" id="downloadPdf">Download_Syllabus.pdf</a>

function getPdfFromDB(){
    var formdata = $("#downloadSyllabusForm").serialize();
    $.get("${grailsApplication.config.grails.serverURL}/uploadSyllabus/getPdfFromDBC", formdata, function(response) {
        for (var i = 0; i < response.length; i++) {
            document.getElementById("subjectResult").innerHTML=response
            document.getElementById("courseResult").innerHTML=$("#course option:selected").text();
            document.getElementById("semesterResult").innerHTML=$("#semester option:selected").text();
        }
    });
} 
```

我的控制器的操作：

```
def getPdfFromDBC = {
    def sem = params.semester
    def course = params.course
    def department = params.department
    List s= UploadSyllabus.executeQuery("select id from UploadSyllabus where department_id = "+params.department +"AND course_id = "+params.course + "AND semester = "+sem)
    def product = UploadSyllabus.get(s[0])
    println "product is ---"+product
    response.contentType = 'application/pdf'
    response.setHeader('Content-disposition', 'Attachment; filename=uploadSyllabus.pdf')
    response.getOutputStream().write(product.uploadSyllabus)
    response.getOutputStream().flush()
    // render s.name as SHALLOW
} 
```

我需要做的是，我的视图页面中有三个下拉列表，当我选择其中的 3 个并单击下载链接时，需要下载已上传到数据库中的特定 pdf。

当我运行我的代码时，我没有收到任何错误，而是收到“页面变得无响应。请终止或等待浏览器。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:31:31.400

您不能在 document.getElementById("subjectResult").innerHTML=response 中插入 pdf

如果您想在 html 中呈现 pdf，请使用 pdf.js

[https://github.com/mozilla/pdf.js](https://github.com/mozilla/pdf.js)

# facebook - Facebook 共享者 X-Frame-Options

> ID：11825233
> 
> 赞同：0
> 
> 时间：2012-08-06T08:59:57.313
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-php-sdk, facebook-sharer

我在这里有我的链接：

```
<a name="fb_share" type="icon_link" share_url="" href="">
    <button class="btn btn-large btn-primary tasto" disabled="disabled">Condividi contenuto</button>
</a> 
```

我的JS在这里：

```
FB.api('/217822418323942',
function(response){
        $('.step_4').children('a').attr('href', 'http://www.facebook.com/sharer.php?u='+response.link+'&t=CONDIVIDI!');
}); 
```

但是 Chrome 给了我这个错误：

```
Refused to display document because display forbidden by X-Frame-Options. 
```

它没有分享...解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:15:46.187

已解决，facebook 不再使用共享器，正确的代码是：

```
FB.ui({
    method: 'feed',
    name: response.from.name,
     link: response.link,
     picture: 'http://images.sodahead.com/polls/002641083/3649326924_lol_guy_answer_1_xlarge.jpeg',
     caption: 'LOL.',
     description: 'meme'
},
function(response) {
    if (response && response.post_id) {
        console.log('Post was published.');
        } else {
            console.log('Post was not published.');
        }
}); 
```

# python - 如何使用 SSH 从基于 Django 的基于 Web 的应用程序执行远程主机上的命令？

> ID：11825242
> 
> 赞同：1
> 
> 时间：2012-08-06T09:00:46.393
> 
> 标签：python, bash, rpc, remote-access, routed-commands

我必须在远程主机上执行一些命令，这个主机将是一个“路由器”。我从来没有做过 RPC 调用的工作。另一个大问题是我必须从基于`Django`Web 的应用程序执行这些命令。步骤如下：

*   用户打开一个页面并选择一个命令来执行
*   用户从给定列表中选择远程主机
*   用户点击执行按钮
*   同时 Django 将检查安全问题。这意味着它将授权远程主机使用`SSH`
*   并在主机上执行所需的命令并发回一条消息`"Done!"`

我应该如何开始解决这个问题？

我应该如何创建从用户配置文件页面到远程主机的 SSH 连接？

出于安全原因，我想使用用户私钥创建连接。我也找到了一些相关的问题，但没有找到正确的方向:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:06:42.990

你应该从[paramiko](http://www.lag.net/paramiko/)库开始，它没有那么难的 api。还有[一些](https://github.com/paramiko/paramiko/blob/master/demos/demo_simple.py)与库捆绑在一起的示例。

您可以创建[ssh 客户端](http://www.lag.net/paramiko/docs/paramiko.SSHClient-class.html)，在构造函数中传递主机名、端口、用户名和用户密钥文件，[创建 shell](http://www.lag.net/paramiko/docs/paramiko.SSHClient-class.html#invoke_shell)，[运行](http://www.lag.net/paramiko/docs/paramiko.Channel-class.html#exec_command)命令并[读取](http://www.lag.net/paramiko/docs/paramiko.Channel-class.html#recv)命令输出，仅标准输出。您可以单独[阅读 stderr ，也可以](http://www.lag.net/paramiko/docs/paramiko.Channel-class.html#recv_stderr)[将](http://www.lag.net/paramiko/docs/paramiko.Channel-class.html#set_combine_stderr)其与 stdout 结合使用。

# android - 如何用图像替换 ImageView 的人脸（人脸检测）？

> ID：11825246
> 
> 赞同：2
> 
> 时间：2012-08-06T09:01:14.333
> 
> 标签：android, face-detection

我正在使用 Android 中的人脸检测。

我可以使用[`FaceDetector.Face`](http://developer.android.com/reference/android/media/FaceDetector.Face.html). 我想用另一个人脸替换检测到的人脸，并且可以移动新人脸。如何获取人脸坐标或人脸位置？如果我得到了脸部的位置，我可以很容易地在上面替换新的脸部。

请为此提供一些解决方案。

谢谢。

# sql - 如何根据重复对表列进行排名？

> ID：11825251
> 
> 赞同：2
> 
> 时间：2012-08-06T09:01:34.460
> 
> 标签：sql, sql-server, sql-server-2008, tsql, rank

我有一张这样的表，我想根据 cksid 和 guid 的组合对其进行排名。

```
cksid       guid
----------- -----------
1           301
1           301
1           301
2           303
2           303
3           303
4           303
4           303
4           303 
```

输出应该像

```
cksid       guid           rank
----------- ----------- ----------
1           301             1
1           301             2
1           301             3
2           303             1
2           303             2
3           303             1
4           303             1
4           303             2
4           303             3 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T09:04:30.177

试试这个：

您只需要使用 row_number 函数

```
 select cksid ,guid ,
    row_number() over (partition by cksid ,guid order by (select 0)) as rank
    from <Table> 
```

row_number() 需要 order by 子句。在这里，您没有第三列可供订购。所以我只是输入 (Select 0) ，它将以任何顺序对输出进行排序，这对我们来说并不重要。我们也可以通过 cksid ,guid 下订单，但我认为这有点过头了，因为我们可以通过提供 (select 0) 来获得相同的结果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T09:05:38.043

```
SELECT cksid, guid,
       row_number() OVER (PARTITION BY cksid,guid ORDER BY cksid,guid)
FROM   youtable; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T09:09:03.823

```
create table test11(cksid int,guid int)
INSERT INTO test11
VALUES(1,301),
(1,301),
(1,301),
(2,303),
(2,303),
(3,303),
(4,303),
(4,303),
(4,303)

select *,ROW_NUMBER() over (partition by cksid,guid order by guid) as ranks from test11 
```

# mongodb - MongoDB - MongoEngine - 保存嵌入文档不起作用 - 没有属性保存

> ID：11825266
> 
> 赞同：3
> 
> 时间：2012-08-06T09:02:25.190
> 
> 标签：mongodb, pymongo, mongoengine, database

我有一个嵌入式文档类`Post`和一个父类`Thread`。

```
class Thread(Document):
    ...
    posts = ListField(EmbeddedDocumentField("Post"))

class Post(EmbeddedDocument): 
    attribute = StringField()
    ... 
```

我想创建一个新帖子并将其添加到我`ListField`的`Thread`课堂上。

我的代码如下所示：

```
post = Post()
post.attribute = "noodle"
post.save()
thread.posts.append(post)
thread.save() 
```

但我收到以下错误消息：

> “‘发布’对象没有属性‘保存’”

如果我跳过`post.save()`一个空`Post`对象附加到我的`Thread`.

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T09:23:23.420

嵌入文档不作为单独的、独立于其文档实例的实例存在，即要保存嵌入文档，您必须将文档本身保存在嵌入的位置；另一种看待它的方式是，您不能在没有实际文档的情况下存储嵌入式文档。

这也是原因，虽然您可以过滤包含特定嵌入文档的文档，但您不会收到匹配的嵌入文档本身——您将收到它所属的整个文档。

```
thread = Thread.objects.first()  # Get the thread
post = Post()
post.attribute = "noodle"
thread.posts.append(post)  # Append the post
thread.save()  # The post is now stored as a part of the thread 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-06T10:14:23.173

您的代码看起来不错 - 您确定没有其他线程对象吗？这是一个证明您的代码的测试用例（没有 post.save() 步骤）。你安装的是什么版本？

```
import unittest
from mongoengine import *

class Test(unittest.TestCase):

    def setUp(self):
        conn = connect(db='mongoenginetest')

    def test_something(self):

        class Thread(Document):
            posts = ListField(EmbeddedDocumentField("Post"))

        class Post(EmbeddedDocument):
            attribute = StringField()

        Thread.drop_collection()

        thread = Thread()
        post = Post()
        post.attribute = "Hello"

        thread.posts.append(post)
        thread.save()

        thread = Thread.objects.first()
        self.assertEqual(1, len(thread.posts))
        self.assertEqual("Hello", thread.posts[0].attribute) 
```

# linux - Linux中的grep空白字段

> ID：11825268
> 
> 赞同：-1
> 
> 时间：2012-08-06T09:02:32.477
> 
> 标签：linux, unix

我有一个包含 1000 行的文件，每行包含 170 个字段。我想grep一个特定的领域；例如，字段编号 30 是否为空白......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:09:09.990

如果字段分隔符是“ `:`”

```
awk -F":" '{if($30=="")print $0}' file_name 
```

上述命令将打印字段 30 为空白的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T07:43:37.893

您没有提到特定的字段分隔符，所以我将继续使用基于 CSV 的示例。对于`grep`字段 30 为空白，使用[`GNU grep`](http://linux.die.net/man/1/grep)：

```
$ grep -n '^\([^,]*,\)\{29\},' test.csv 
2:2,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,55,,33 
```

本质上，我们需要 29 个字段，每个字段都带有一个尾随逗号 ( `,`) 分隔符，然后是另一个分隔符，后面直接没有中间文本。

该`-n`选项的存在可确保任何匹配项都以行号为前缀，以便您能够知道*每个*匹配项在输入文件中的位置。

我相信这适用于任何与 POSIX 兼容的 grep，但我不确定。

# blackberry - 按钮点击事件

> ID：11825269
> 
> 赞同：0
> 
> 时间：2012-08-06T09:02:38.377
> 
> 标签：blackberry

```
class checkPlay extends MainScreen {
    FieldChangeListener listener;

    public checkPlay() {
            setTitle("Testing");
        listener = new FieldChangeListener() {
                public void fieldChanged(Field field, int context) {
                        ButtonField playButton= (ButtonField) field;
                signUp sinup=new signUp();
                sinup.newMethod();            
            }
        };

        ButtonField playButton = new ButtonField("Test Button");
        playButton.setChangeListener(listener);
        add(playButton);
    }
        // TODO Auto-generated constructor stub
}

class signUp extends MainScreen {
    public signUp(){
        // setTitle("Sign Up For New Account");
        BasicEditField firstName = new BasicEditField("First Name*: ", "");
        BasicEditField lastName = new BasicEditField("Last Name*: ", "");
        EmailAddressEditField Email = new EmailAddressEditField("Email*: ", "");

        ButtonField joinButton = new ButtonField("JOIN NOW",ButtonField.FIELD_LEFT);

        add(firstName);
        add(lastName);
        add(Email);
        add(joinButton);
    }

    void newMethod() {
        setTitle("Dhoni");
    }
} 
```

我想`newMethod`通过单击 ButtonField 来调用方法。`checkPlay`我在课堂上放了一个 ButtonField 。单击该 ButtonField 应调用`newMethod`. 但是这段代码不起作用。

需要帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T09:15:53.433

尝试这样的事情：

```
ButtonField playButton = new ButtonField("Test Button"){
     protected boolean navigationClick(int status, int time){
          signUp sinup=new signUp();
          sinup.newMethod();
          return true;
     }
}; 
```

# git - git 已经是最新的，但在多台计算机上的内容不同

> ID：11825271
> 
> 赞同：0
> 
> 时间：2012-08-06T09:02:50.410
> 
> 标签：git, push, pull

我有两台克隆了 git 存储库的计算机。

当我在任一计算机上键入 git push 或 git pull 时，它会显示“已经是最新的”
但是计算机 B 中缺少一些文件，这些文件存在于计算机 A 中。

这里发生了什么？

```
on computer A, last 'git pull' showed    2478117..c6f8168  master     -> origin/master  
on computer B, last 'git push' showed  2478117..c6f8168  master -> master 
```

# java - Java Swing - 在 EDT 上运行

> ID：11825281
> 
> 赞同：14
> 
> 时间：2012-08-06T09:03:49.577
> 
> 标签：java, swing, event-dispatch-thread

我有几个关于 Swing 和使用 EDT 进行 GUI 更新的问题。我刚开始阅读这些东西，所以我是这个领域的初学者：

1.  在 EDT 上运行需要哪些操作？如果他们不这样做，是否只是引发了一个异常？
2.  是否有任何特定时间我们实际上自动在 EDT 上？
3.  如果我们安排一个任务，`SwingUtilities.invokeLater`我们将它排入当前的 GUI 更新任务队列（EDT），对吗？
4.  对上面队列的访问我猜是同步的，或者使用了一些并发集合，但是如果我从两个后台线程调度两个GUI更新任务，就不可能说哪个会先添加？例如，如果线程 1 FIRST 提交了将 JLable 的文本设置为“是”的任务，然后不久之后，第二个线程出现并提交了将该值设置为“否”的任务，我们是否保证结果将是“是”，还是仅仅是操作系统如何安排这些事情的问题？
5.  SwingWorker 究竟如何确保该`done()`方法在 EDT 上运行？它设置以下代码：

    ```
     future = new FutureTask<T>(callable) {
                   @Override
                   protected void done() {
                       doneEDT();
                       setState(StateValue.DONE);
                   }
               }; 
    ```

所以我想知道 FutureTask 是否以某种方式确保`invokeLater`被调用？

感谢您的所有回答。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-06T09:14:21.043

1.  一个好的规则是所有操作（访问/更新/...）都应该在 EDT 上进行。javadoc 中提到了一些例外（某些类的某些方法），但它们很难记住，因此更容易坚持“在 EDT 上做所有事情”的方法。不会引发异常（幸运的是，JavaFX 修复了这个缺点）。您可以使用自定义`RepaintManager`来检测大多数这些违规行为：请参阅[这篇文章](https://web.archive.org/web/20090318083739/http://weblogs.java.net:80/blog/alexfromsun/archive/2006/02/debugging_swing.html)。

2.  用户触发的一切都在 EDT 上处理。例如，如果用户单击一个按钮，则在 EDT 上将调用`actionPerformed`相应的`Action`或。`ActionListener`

3.  正确的

4.  您首先安排的事情将首先执行。该`invokeLater`调用只是`Runnable`在队列末尾添加 。`invokeLater`稍后使用第二次将`Runnable`在先前安排的之后添加这个新的`Runnable`。

5.  看看代码`doneEDT`

    ```
     private void doneEDT() {
         Runnable doDone = 
             new Runnable() {
                 public void run() {
                     done();
                 }
             };
         if (SwingUtilities.isEventDispatchThread()) {
             doDone.run();
         } else {
             doSubmit.add(doDone);
         }
     } 
    ```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-06T09:12:36.833

1.  基本上，每次使用 Swing 组件或 Swing 组件的模型时，都必须在 EDT 中完成。如果您不这样做，则不会引发任何异常。它可以工作，但也不能工作，行为不稳定，数据损坏等。
2.  在 EDT 中调用每个 Swing 事件侦听器。基本上，除了 main 方法，Swing 应用程序的每一行代码都默认在 EDT 中执行，除非您明确启动线程、使用 SwingWorker 或类似的东西。
3.  是的。
4.  提交给 SwingUtilities.invokeLater() 的任务按照它们提交的顺序执行。
5.  在内部，它使用 SwingUtilities.invokeLater() 或类似方法。FutureTask 与 Swing 没有任何关系。SwingWorker 确保其 done 方法在 EDT 中执行。该`doneEDT()`方法有以下注释：*Invokes done on the EDT*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-21T02:47:43.380

SwingWorker 确保 done() 方法通过以下代码在 EDT 上运行：

```
 Runnable doDone =
        new Runnable() {
            public void run() {
                done();
            }
        };
    if (SwingUtilities.isEventDispatchThread()) {
        doDone.run();
    } else {
        doSubmit.add(doDone);
    } 
```

实际上，它将 doDone 变量添加到 AccumulativeRunnable doSubmit 中，

查看 AccumulativeRunnable.java 的源代码，您会发现有以下代码

受保护的无效提交（）{

SwingUtilities.invokeLater(this);

}

这就是为什么 swingworker 确保方法 done() 在 EDT 上运行

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-06T09:07:39.463

**1.**在Java GUI应用程序中，`main()`方法寿命不长，**在调度GUI构建后** `Event Dispatcher Thread`，`main()` **方法退出......现在它的EDT负责处理GUI。**

**2.**所以我们不需要在 EDT 上启动我们的应用程序，**它会自动完成。**

**3**始终保持 UI 在 UI 线程上工作，Non-UI 在 Non-UI 线程上工作。

因此，请始终保留您的 EDT 线程，这是仅用于 GUI 工作的 GUI 线程。

例如：

```
public static void main(String[] args){
    EventQueue.invokeLater(new Runnable(){
          public void run(){    
            myframe.setVisible(true);
         }
     }
} 
```

**4.**创建一个单独的非 UI 线程来处理那个耗时的方法。

**5.**你可以简单地使用Java中专门引入的`Thread`或使用来同步UI和Non-UI线程。`SwingWorker`

**6.** SwingWorker 不保证 done() 方法在 EDT 上运行，而是将其输出同步到 EDT 线程，即 GUI 线程。

# mysql - 在同一字段上使用大小写更新值

> ID：11825285
> 
> 赞同：0
> 
> 时间：2012-08-06T09:04:13.913
> 
> 标签：mysql

我正在使用 MySQL 中的一个案例尝试此更新语句，但它不会更改任何值。

该查询没有给出任何错误，但有 0 个受影响的行。

```
UPDATE `tablename`
SET `type` = (
    CASE
        WHEN `type` = 1 THEN 1
        WHEN `type` = 2 THEN 2
        WHEN `type` = 3 THEN 19
        WHEN `type` = 4 THEN null
        WHEN `type` = 5 THEN null
        WHEN `type` = 6 THEN 81
        WHEN `type` = 7 THEN null
        WHEN `type` = 8 THEN 22
        WHEN `type` = 9 THEN 21
        WHEN `type` = 10 THEN 78
        WHEN `type` = 11 THEN 80
        WHEN `type` = 12 THEN 79
    END)
WHERE user_id IS NOT NULL; 
```

任何人都知道我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:06:53.347

尝试`type`在`Case`.

```
UPDATE `tablename`
SET `type` = 
    CASE `type`
        WHEN  1 THEN 1
        WHEN  2 THEN 2
        WHEN  3 THEN 19
        WHEN  4 THEN null
        WHEN  5 THEN null
        WHEN  6 THEN 81
        WHEN  7 THEN null
        WHEN  8 THEN 22
        WHEN  9 THEN 21
        WHEN  10 THEN 78
        WHEN  11 THEN 80
        WHEN  12 THEN 79
    END
WHERE user_id IS NOT NULL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:17:57.787

```
UPDATE test 
SET `password` = (
CASE
    WHEN `password` = 1 THEN 'one'
    WHEN `password` = 2 THEN 'two'
    WHEN `password` = 3 THEN 'three'
    WHEN `password` = 4 THEN null
    WHEN `password` = 5 THEN null
    WHEN `password` = 6 THEN 81
    WHEN `password` = 7 THEN null
END)
where userindex=1 
```

对我来说工作得很好。我对其进行了修改以适应我的测试数据。请重新调整值并重试。

还要检查您是否有任何用户的 user_id 不为空

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T09:22:22.297

查询看起来不错。建议使用 select 来尝试是否会返回任何记录。

```
SELECT *, CASE
        WHEN `type` = 1 THEN 1
        WHEN `type` = 2 THEN 2
        WHEN `type` = 3 THEN 19
        WHEN `type` = 4 THEN null
        WHEN `type` = 5 THEN null
        WHEN `type` = 6 THEN 81
        WHEN `type` = 7 THEN null
        WHEN `type` = 8 THEN 22
        WHEN `type` = 9 THEN 21
        WHEN `type` = 10 THEN 78
        WHEN `type` = 11 THEN 80
        WHEN `type` = 12 THEN 79
    END as test 
FROM `tablename` WHERE user_id IS NOT NULL 
```

# android - 如何拦截 webView 中的链接请求？

> ID：11825286
> 
> 赞同：3
> 
> 时间：2012-08-06T09:04:23.553
> 
> 标签：android, facebook, webview

我有一个包含 Facebook 按钮的 WebView，它会打开一个指向该站点的链接，其中包含一个已经完成的帖子。我想知道如何拦截请求并在 facebook 应用程序中而不是在浏览器中打开它。但是，如果 Facebook 应用程序在智能手机上。

感谢您的回复，并为我的英语媒体感到抱歉。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-06T09:09:19.733

这可以通过设置 webviewclient 来实现，例如。

```
mWebView.setWebViewClient(new WebViewClient() {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        if (url.startsWith("http://blablablacatchurl")) {

            //we have intercepted the desired url call
            return true;
        }

        return super.shouldOverrideUrlLoading(view, url);
    }
}); 
```

如果您想查看是否有办法深度链接到 facebook 应用程序，只需将 url 打包到一个意图中，然后将其关闭，看看有什么响应。如果 facebook 没有捕捉到它，我认为您无法以任何其他方式执行请求的第二部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-18T15:22:17.497

```
webView.setWebViewClient(new MyWebClient());

    private class MyWebClient extends WebViewClient {

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {

            //return super.shouldOverrideUrlLoading(view, url);
            Uri uri;

            try {
                uri = Uri.parse(url);
            } catch (NullPointerException e) {
                // let Android deal with this
                return true;
            }

            String host = uri.getHost(); //Host is null when user clicked on email, phone number, ...

            if (host != null && host.equals("stackoverflow.com")) {
                // This is my web site, so do not override; let my WebView load the page
                return false;
            }
            else {
                // Otherwise, the link is not for a page on my site, so launch another Activity that handles URLs or anything else (email, phone number, ...)
                Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
                startActivity(intent);
                return true;
            }
        }
     } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-21T11:58:37.950

如果不触发 shouldOverrideUrlLoading 方法，您可以覆盖`onPageStarted`或`shouldInterceptRequest`方法。它们都将 WebView 作为方法参数，因此您可以重定向 webview。但如果你想达到 webview 它必须是最终的，它应该在不同的线程上运行

```
@Override
public WebResourceResponse shouldInterceptRequest(final WebView view, WebResourceRequest request) {
    Log.i(TAG, "shouldInterceptRequest loading " + request.getMethod() + " " + request.getUrl().toString());
    String url = request.getUrl().toString();
    request.getRequestHeaders();
    if (url.contains("something important")){
        view.post(new Runnable() {
            @Override
            public void run() {
                if (view.canGoBack())
                    view.goBack();
                else
                    Log.e(TAG, "can NOT go back");
            }
        });
    }

    return super.shouldInterceptRequest(view, request);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T09:11:24.087

您应该使用 WebViewClient 类并覆盖 url 加载。

# android - Android Hierarchy 查看器未显示渲染时间

> ID：11825287
> 
> 赞同：9
> 
> 时间：2012-08-06T09:04:26.703
> 
> 标签：android, performance, android-layout

我的应用程序出现了一些性能问题，我发现[这篇文章](http://developer.android.com/training/improving-layouts/optimizing-layout.html)可以帮助我。

问题是，当我执行 Hierarchy 查看器时，我总是有`n/a as Measure`视图的每个组件的布局和绘制时间。

我在我的虚拟设备中使用 Android 3.2。

谢谢。

**编辑**

我添加了 Hierarchy Viewer 输出的捕获： ![层次结构查看器示例](../Images/e20b6aff7b856e2f3089b2a324ec18e1.png)

当我将 Hierarchy 查看器与初始活动（一个非常简单的活动）一起使用时，它可以完美运行。但是当我使用这个活动时，我看不到绘制每个组件的时间。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-07-29T09:21:47.030

To see the three measures select your root view and click this button ![show measures button](../Images/b0096c25afe13349437da16aec5fb8dd.png). Its description is *"Obtain layout times for tree rooted at selected node"*. The button has to be placed on the top of the Hierarchy viewer.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T09:04:43.873

Android 层次结构查看器适用于 Android 2.3 及更高版本。您的设备操作系统版本无关紧要。您的目标 api 版本应为 2.3 或更高版本。在这种情况下，您可以在项目属性中更改最低版本。

如果你想优化你的布局，你需要做几件事。[本文](http://mobile.tutsplus.com/tutorials/android/android-tools-leveraging-the-hierarchy-viewer-for-ui-profiling/)解释了如何优化以及您应该更多关注的领域。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-28T18:46:15.850

点击图中箭头所在的位置

也就是根节点，然后是右上角的“profile node”按钮。

然后单击单个节点，它显示时间而不是 n/a

![在此处输入图像描述](../Images/85c5ff49c46c17adf4e2353d42be0ea3.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T14:27:37.087

这可能是来自 Android 3.0的[硬件加速的子影响。](http://developer.android.com/guide/topics/graphics/hardware-accel.html)但是如果没有更多细节（可能是代码示例），就很难说。

# javascript - AngularJS $http服务中的encodeURIComponent

> ID：11825290
> 
> 赞同：3
> 
> 时间：2012-08-06T09:04:38.537
> 
> 标签：javascript, ajax, angularjs

*我是 AngularJS 的新手，正在努力学习。*

我正在使用以下代码行（请注意，未经测试）将`item`信息发送到服务器方法，然后该方法将发送包含所述的 HTML 电子邮件`item`。

```
$http.post('/EmailItem', item); 
```

我的问题是，`item`的属性值`encodeURIComponent`在发送之前会经过吗？

**额外的问题：**有没有更好的方法来做这个帖子？`$resource`从表面上看，这似乎超出了我的需要……？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T14:34:35.180

您不需要对属性进行编码，`$http`确实如此：[https ://github.com/angular/angular.js/blob/master/src/ng/http.js#L758](https://github.com/angular/angular.js/blob/master/src/ng/http.js#L758)

至于这样做的方式..这看起来不错。您可以切换到`$resource`是否有一个对象需要服务器上的几个 REST 事物，但`$http`在简单情况下工作正常。

# annotations - 使用 @RequestFilters 时在球衣请求过滤器中获取注释值

> ID：11825291
> 
> 赞同：0
> 
> 时间：2012-08-06T09:04:40.487
> 
> 标签：annotations, jersey

@RequestFilters 注释似乎删除了在球衣配置中使用 RequestFilterFactory 添加的任何过滤器。是否有可能以任何其他方式获取注释？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T20:54:01.850

找到了解决这个问题的方法。我用@AnnotationAwareResourceFilters 替换了@ResourceFilters，然后建立了一个工厂来创建不同的过滤器。我还在过滤器列表的开头添加了一个新的内部过滤器。此过滤器包含对 AbstractMethod 的引用，允许并将其放入请求属性中，允许任何过滤器稍后检索注释。

# jquery - 缩放的 chrome 浏览器中的 div 宽度

> ID：11825297
> 
> 赞同：2
> 
> 时间：2012-08-06T09:04:55.183
> 
> 标签：jquery, google-chrome

[在 chrome 浏览器http://jsfiddle.net/A8fhT/3/](http://jsfiddle.net/A8fhT/3/)中打开此链接并查看元素宽度 (270)，然后缩小 (ctrl + "-")，现在查看宽度 (269)。在 Firefox 上一切正常，chrome 的任何解决方案，还是这是错误？

编辑：AK 示例[http://jsfiddle.net/akhurshid/5E9kj/](http://jsfiddle.net/akhurshid/5E9kj/) 图片：[http ://s7.postimage.org/qgezkqcor/image.png](http://s7.postimage.org/qgezkqcor/image.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:14:15.760

[我是geni.com](http://www.geni.com)的主要前端开发人员，主要从事[HTML5 树](https://www.geni.com/family-tree/html5#100594125)的开发。

我与 进行了广泛的合作`zoom`，但无法在所有浏览器中获得一致的行为。但是，我发现 CSS 变换`scale`比缩放更可靠。

如果您真的需要缩放，请尝试应用`scale`到`$(body)`（或任何其他元素）。我能够在 Chrome 和 FF 中获得一致的宽度。

**[JSFiddle 演示](http://jsfiddle.net/5E9kj/7/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T12:56:39.920

问题仅在于绝对定位的元素，所以我修改了 jQuery 函数（// 行）。

```
 function getWidthOrHeight(elem, name, extra) {

        //deletes position//
        var $elem = $(elem); //
        var position = $elem.css('position'); //
        $elem.css('position', ''); //

        // Start with offset property
        var val = name === "width" ? elem.offsetWidth : elem.offsetHeight,
        i = name === "width" ? 1 : 0,
        len = 4;

        if (val > 0) {
            if (extra !== "border") {
                for (; i < len; i += 2) {
                    if (!extra) {
                        val -= parseFloat(jQuery.css(elem, "padding" + cssExpand[i])) || 0;
                    }
                    if (extra === "margin") {
                        val += parseFloat(jQuery.css(elem, extra + cssExpand[i])) || 0;
                    } else {
                        val -= parseFloat(jQuery.css(elem, "border" + cssExpand[i] + "Width")) || 0;
                    }
                }
            }

            //sets position//
            $elem.css('position', position); //

            return val + "px";
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-29T11:16:32.740

我有同样的问题，我找到了解决方案。

我创建了一个隐藏的画布对象，并在其中包含宽度问题的 div。加载页面后，我从画布中提取 div（展开），在任何缩放级别下一切看起来都很棒！

希望能帮助到你！

# java - 自动生成的 JSF 组件 ID 中的重复 ID

> ID：11825298
> 
> 赞同：1
> 
> 时间：2012-08-06T09:05:00.187
> 
> 标签：java, jsf, richfaces, facelets, myfaces

我在我的 JSF 页面中随机出现重复的 ID 错误，并且在所有情况下，重复的 ID 都是自动生成的（如 j_id15）。

我在页面中的指定 ID 中没有任何重复项。而且问题并不一致，我的意思是，页面视图可能会引发重复 ID 错误，并且下次我发送同一页面的请求时，它运行得很好，没有任何错误。这并不特定于单个页面，我的项目中有多个页面都有相同的问题。

从 myfaces 2.0.5 升级到 myfaces 2.0.14（最新 2.0.x 版本）后问题开始出现

这是 myfaces 实现中的错误吗？还是我做错了什么？

堆栈跟踪如下所示：

```
Caused by: java.lang.IllegalStateException: Client-id : j_id15 is duplicated in the faces tree. Component : posSelectionFrm:posSelSubview_first:posHasAccessTable:j_id15, path: ...[Class: javax.faces.component.UINamingContainer,Id: posSelSubview_first][Class: javax.faces.component.html.HtmlDataTable,Id: posHasAccessTable][Class: javax.faces.component.UIColumn,Id: titleColumn2][Class: com.sun.facelets.compiler.UIInstructions,Id: j_id15]}
at org.apache.myfaces.application.StateManagerImpl.checkForDuplicateIds(StateManagerImpl.java:280)
at org.apache.myfaces.application.StateManagerImpl.checkForDuplicateIds(StateManagerImpl.java:302)
at org.apache.myfaces.application.StateManagerImpl.checkForDuplicateIds(StateManagerImpl.java:302)
at org.apache.myfaces.application.StateManagerImpl.checkForDuplicateIds(StateManagerImpl.java:302)
at org.apache.myfaces.application.StateManagerImpl.checkForDuplicateIds(StateManagerImpl.java:302)
at org.apache.myfaces.application.StateManagerImpl.checkForDuplicateIds(StateManagerImpl.java:302)
at org.apache.myfaces.application.StateManagerImpl.checkForDuplicateIds(StateManagerImpl.java:302)
at org.apache.myfaces.application.StateManagerImpl.checkForDuplicateIds(StateManagerImpl.java:302)
at org.apache.myfaces.application.StateManagerImpl.checkForDuplicateIds(StateManagerImpl.java:302)
at org.apache.myfaces.application.StateManagerImpl.checkForDuplicateIds(StateManagerImpl.java:302)
at org.apache.myfaces.application.StateManagerImpl.saveView(StateManagerImpl.java:220)
at javax.faces.application.StateManager.saveSerializedView(StateManager.java:113)
at javax.faces.application.StateManagerWrapper.saveSerializedView(StateManagerWrapper.java:41)
at com.sun.facelets.FaceletViewHandler.renderView(FaceletViewHandler.java:617)
at org.ajax4jsf.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:100)
at org.ajax4jsf.application.AjaxViewHandler.renderView(AjaxViewHandler.java:176)
at org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:116)
at org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:239)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:191)
... 71 more 
```

而且，我意识到默认情况下 myfaces 不应该检查自动生成的 ID 的重复项。但为了确保，我在 web.xml 中定义了以下设置：

```
<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Production</param-value>
</context-param>

<context-param>
    <param-name>org.apache.myfaces.CHECK_ID_PRODUCTION_MODE</param-name>
    <param-value>false</param-value>
</context-param> 
```

但问题仍然存在。

该项目使用 Apache MyFaces 2.0.14、Facelets 1.1.15、RichFaces 3.3.3.Final 在 Tomcat 6.0 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:36:35.093

web.xml 文件中定义的不同过滤器冲突的一些问题。因此检查 RichFaces 过滤器必须是 web.xml 配置文件中其他过滤器中的第一个。

# asp-classic - ASP/SQL Server - 从/到日期基于一年中的月份

> ID：11825302
> 
> 赞同：0
> 
> 时间：2012-08-06T09:05:18.343
> 
> 标签：asp-classic, vbscript

我有一个链接到 SQL 服务器的 ASP 页面。基本上我需要一些查询来提取特定日期之间的所有记录。我需要过去 6 个月的每月明细表。

所以，这个月是 8 月（现在是 6 日），所以第一个查询需要有一行写着

```
AND DATE BETWEEN '2012-08-01' and '2012-08-31' 
```

我还需要 5 个查询

```
AND DATE BETWEEN '2012-07-01' and '2012-07-31' 
```

...

```
AND DATE BETWEEN '2012-06-01' and '2012-06-30' 
```

等等等等回到三月。

有没有办法做到这一点？我尝试执行以下 VB 脚本，但没有给出正确的结果；

```
ThisMonth = Date
Month1 = DateAdd("m", -1, Date)
Month1From = DateAdd("d", 1, Month1 - Day(Date))
Month1To = DateAdd("m", 1, Month1 - Day(Date))

Month2 = DateAdd("m", -2, Date)
Month2From = DateAdd("d", 1, Month2 - Day(Date))
Month2To = DateAdd("m", 1, Month2 - Day(Date))

Month3 = DateAdd("m", -3, Date)
Month3From = DateAdd("d", 1, Month3 - Day(Date))
Month3To = DateAdd("m", 1, Month3 - Day(Date))

Month4 = DateAdd("m", -4, Date)
Month4From = DateAdd("d", 1, Month4 - Day(Date))
Month4To = DateAdd("m", 1, Month4 - Day(Date))

Month5 = DateAdd("m", -5, Date)
Month5From = DateAdd("d", 1, Month5 - Day(Date))
Month5To = DateAdd("m", 1, Month5 - Day(Date)) 
```

我打算根据变量构造 SQL，但我做不到，因为变量 Month5To 显示为 Match 的 29 日，但 3 月有 31 天。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:27:01.030

为什么不更改您的查询以过滤

```
 WHERE MONTH(date)= @m AND YEAR(date) = @y 
```

您还可以使用`GROUP BY`查询在一个结果集中获取所有结果

另请注意，如果日期值附有任何时间，您的原始查询将失败。

即：2012-07-31 09:15 不在“2012-07-01”和“2012-07-31”之间

# iphone - 如何从文件.mid 的元歌词字节中获取字符串文本？

> ID：11825303
> 
> 赞同：0
> 
> 时间：2012-08-06T09:05:20.350
> 
> 标签：iphone, objective-c, ios, xcode, midi

当我播放文件**.mid**时，我得到元歌词的字节，但我不知道如何从这个字节中获取元歌词。任何人都可以帮助我做到这一点吗？感谢所有评论。

```
void MyMIDIReadProc(const MIDIPacketList *pktlist, void *refCon, void *connRefCon) {

MIDIPacket *packet = (MIDIPacket *)pktlist->packet;

for (int i=0; i < pktlist->numPackets; i++) {
    Byte midiStatus = packet->data[4];
    Byte midiCommand = midiStatus >> 4;
    if (midiCommand == 0x05){
        NSLog(@"meta event 0x%x",midiCommand1);
        //how to get meta text here?
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:18:07.540

我认为您在这里解析 MIDI 有点不正确。查看此链接，该链接对规范有很好的概述：

[http://www.sonicspot.com/guide/midifiles.html](http://www.sonicspot.com/guide/midifiles.html)

无论如何，MIDI 歌词事件在技术上是 MIDI 元事件（因为您的问题标题表明您已经知道）。所以状态码应该是，*后面*`0xFF`的字节是。之后的字节告诉你字符串有多长（以字节为单位）。*`0x05`*

# php - PHP如何解析对象sdtClass

> ID：11825305
> 
> 赞同：1
> 
> 时间：2012-08-06T09:05:27.577
> 
> 标签：php, parsing, object, stdclass

当我运行 SOAP 客户端时，我得到以下响应。

如何在 php 中解析这个结构？我只想 `NUGGETNAME`取值。

以及如何计算结果长度？

```
 object(stdClass)#2 (1) {
          ["GetHotelNuggetResult"]=>
          object(stdClass)#3 (1) {
            ["HotelNugget"]=>
            array(9) {
              [0]=>
              object(stdClass)#4 (7) {
                ["NUGGETNAME"]=>
                string(19) "Yaz Tatili Otelleri"
                ["NUGGETORDER"]=>
                string(2) "10"
                ["PARENTUNIQUECODE"]=>
                string(10) "AS_SOL_UST"
                ["REWRITENUGGETNAME"]=>
                string(19) "yaz-tatili-otelleri"
                ["TITLE"]=>
                string(19) "Yaz Tatili Otelleri"
                ["UNIQUECODE"]=>
                string(5) "YTOTL"
                ["WEBNUGGETID"]=>
                int(306)
              }
              .......//other results

              }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:14:00.333

```
$O = response(....);
var_dump($O->GetHotelNuggetResult->HotelNugget[0]->NUGGETNAME); 
```

# android - Android 移植界面

> ID：11825306
> 
> 赞同：0
> 
> 时间：2012-08-06T09:05:30.570
> 
> 标签：android

我为我的 Android 项目创建了一个 UI。但是我想知道是否可以从中创建一个库，以便您可以在我的 Activity 的 onCreate 方法中“加载”UI。

我阅读了有关将我创建的类放入 .jar 文件的信息，但是我的 UI 以它们的外观构建的 main.xml 呢？如果我真的可以加载 UI，那么如果有人喜欢他的应用程序的不同设计，那么应该可以为同一个 Activity 为 UI 添加调整。我希望你能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:34:13.957

您可以创建一个库项目。

通常，要获得一个简单的 JAR 并不容易，尽管这是一个备受抱怨的限制！

因此，只需将您的“库”项目导入您想要引用的任何其他项目中。

我亲自创建了 Activity 类的一些扩展，其中 setContentView 已在 onCreate 中调用。

在您的应用程序项目中，只需从库项目中扩展您的自定义活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:24:50.533

您可以创建一个库项目。

看看这个项目和他的实现：

[无处不在的全息](https://github.com/ChristopheVersieux/HoloEverywhere)

# mime-types - 将特定文件映射到 Cherokee 中的特定 MIME 类型

> ID：11825310
> 
> 赞同：0
> 
> 时间：2012-08-06T09:05:48.373
> 
> 标签：mime-types, cherokee

我想让我的 Cherokee 为我的 xml 文件提供特定的 mime 类型。现在它只为所有 xml 文件提供 mimetype application/xml。

在 apache 中，可以在 /etc/apache2/apache2.conf 中编写以下内容。

```
<directory dir>
    AddType application/a a.xml
    AddType application/b b.xml
    AddType application/c c.xml
    AddType application/d d.xml
</directory> 
```

因此，例如 dir/a.xml 始终使用内容类型 application/a 提供服务。我可以在切诺基做类似的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:24:57.193

1.  Go to **vServers**.
2.  Click on the site you want to change.
3.  Click the **Behavior** tab.
4.  Click **Rule Management**.
5.  Click the + (plus) button to add a new rule.
6.  Choose **Manual** and select **Full Path** rule type.
7.  Type the **HTTP path** which should be */dir/a.xml* and click **add**.
8.  Go to the **Handler** tab and select **Static Content**.
9.  Go to the **Transform** tab.
10.  Under **Header Operations** put ***Content-Type*** for the header and ***application/a*** for the value.

That should do the trick. From there you can save then click on your new rule in the list and click the clone button (beside the add button) and edit it for the other files.

It's a bit tedious but it works. I'm sure it wouldn't be so complicated if you were manually editing the config file but they don't recommend that.

Hope that helps.

# javascript - 在 Wicket ModalWindow 中使用 Panel 时，HTML 中的 Javascript 不起作用

> ID：11825314
> 
> 赞同：1
> 
> 时间：2012-08-06T09:06:25.277
> 
> 标签：javascript, wicket, wicket-1.5

我在 ModalWindow 中显示了几个面板。在这些面板的 html 文件中，我在正文中有脚本标签，例如 SyntaxHighlighter 或 JW Player。如果我将面板嵌入到它自己的页面中，这些标签就会起作用。但是，当面板嵌入到 ModalWindow 时，它们不起作用。

显示应该由 SyntaxHighlighter 处理的文本的面板（html 文件）示例（在 body-tag 中）：

```
<wicket:panel>
  <pre wicket:id="content"></pre>
  <script type="text/javascript">
    SyntaxHighlighter.all();
  </script>
 </wicket:panel> 
```

我已经尝试了很多不同的东西，例如

```
super.show(target);
target.appendJavaScript("SyntaxHighlighter.all();") 
```

在 ModalWindow 的重写“show()”方法中。我也玩过“renderOnDomReadyJavascript”、“renderOnLoadJavascript”等，但我想它无论如何都必须嵌入到 body-tag 中......我就是无法让它工作。

如果我将面板嵌入页面并将该页面放入 ModalWindow 而不是面板，它会起作用，但我想避免这种情况，因为它没有必要并且会导致滚动问题。感谢您的任何提示！

编辑：显示问题的快速入门示例：[下载](http://d.pr/f/U9lo)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:46:28.493

我认为问题在于，当您使用面板时，您没有正确声明使用的 JavaScript 函数。换句话说，当您直接使用嵌入到 ModalWindow 时，您的示例中没有定义对象 SyntaxHighlighter。检查面板的页面，看看它是否定义了游览面板使用的一些 JavaScript 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:08:52.007

这个问题的解决方案[在这个其他答案中](https://stackoverflow.com/questions/6471526/use-syntax-highlighter-on-ajax-loaded-content)进行了说明。必须使用方法 highlight() 代替 all()。

# yii - 填充模型属性后删除字段

> ID：11825315
> 
> 赞同：0
> 
> 时间：2012-08-06T09:06:30.990
> 
> 标签：yii

我搞砸了这个问题：

在我的控制器操作中，我已经用一个值填充了一个特殊的模型属性（例如 project_id 属性，如下所示）：

```
public function actionCreate()
{
    $model=new Issue;

    $model->project_id = $this->_project->id;
    if(isset($_POST['Issue']))
    ...... 
```

那么为什么在 _form.php 中为上述创建操作我们必须使用 hiddenField 属性：

```
<?php echo $form->hiddenField($model,'project_id'); ?> 
```

为什么不完全删除它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:32:29.767

如果您手动将`actionCreate`属性分配给模型，以及从收集的属性`$_POST`，则无需在表单中为该属性呈现隐藏字段。

无论如何，很多时候最好在模型本身中执行这种逻辑，例如在[`beforeSave()`方法](http://www.yiiframework.com/doc/api/1.1/CActiveRecord/#beforeSave-detail)中，因为大多数时候这是模型逻辑而不是控制器逻辑。如果模型在其他控制器中使用，那么您应该再次重复属性分配，但如果它在模型中，那么您可以保持代码 DRY。

# android - 如何在另一个国家探索基于网络的 Google Play？

> ID：11825318
> 
> 赞同：95
> 
> 时间：2012-08-06T09:06:44.967
> 
> 标签：android, country

如果我去 play.google.com，它会自动识别我的国家并允许我浏览该国家的应用程序。我可以通过页脚中的下拉菜单更改语言，或者我可以在查询字符串中添加 &hl=code...但这只会更改语言...而不是商店内容（应用列表和排名保持不变）

我想肯定还有其他一些查询字符串参数或标头参数，因为我确信 Google 开发人员不会使用位于 50 多个国家/地区的特定国家/地区的代理或 PC 来查看商店在那里的显示方式。

任何线索如何做到这一点？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2015-02-05T09:29:23.147

寻找解决这个确切问题的方法把我带到了这里，但不幸的是没有人给出正确的答案。这里是：添加参数 gl=(countrycode)。

例如，要查看您所在国家/地区的顶级免费商业应用程序列表，请使用以下命令：

[https://play.google.com/store/apps/category/BUSINESS/collection/top sell_free](https://play.google.com/store/apps/category/BUSINESS/collection/topselling_free)

添加 gl=ru 为您提供俄罗斯的列表：

[https://play.google.com/store/apps/category/BUSINESS/collection/top sell_free?gl=ru](https://play.google.com/store/apps/category/BUSINESS/collection/topselling_free?gl=ru)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2016-07-04T07:11:00.210

以下是适合我这样的懒人的可点击链接列表：

*   [https://play.google.com/?gl=al](https://play.google.com/?gl=al)阿尔巴尼亚
*   [https://play.google.com/?gl=dz](https://play.google.com/?gl=dz)阿尔及利亚
*   [https://play.google.com/?gl=ao](https://play.google.com/?gl=ao)安哥拉
*   [https://play.google.com/?gl=ag](https://play.google.com/?gl=ag)安提瓜和巴布达
*   [https://play.google.com/?gl=ar](https://play.google.com/?gl=ar)阿根廷
*   [https://play.google.com/?gl=am](https://play.google.com/?gl=am)亚美尼亚
*   [https://play.google.com/?gl=aw](https://play.google.com/?gl=aw)阿鲁巴岛
*   [https://play.google.com/?gl=au](https://play.google.com/?gl=au)澳大利亚
*   [https://play.google.com/?gl=at](https://play.google.com/?gl=at)奥地利
*   [https://play.google.com/?gl=az](https://play.google.com/?gl=az)阿塞拜疆
*   [https://play.google.com/?gl=bs](https://play.google.com/?gl=bs)巴哈马
*   [https://play.google.com/?gl=bh](https://play.google.com/?gl=bh)巴林
*   [https://play.google.com/?gl=bd](https://play.google.com/?gl=bd)孟加拉国
*   [https://play.google.com/?gl=by](https://play.google.com/?gl=by)白俄罗斯
*   [https://play.google.com/?gl=be](https://play.google.com/?gl=be)比利时
*   [https://play.google.com/?gl=bz](https://play.google.com/?gl=bz)伯利兹
*   [https://play.google.com/?gl=bj](https://play.google.com/?gl=bj)贝宁
*   [https://play.google.com/?gl=bo](https://play.google.com/?gl=bo)玻利维亚
*   [https://play.google.com/?gl=ba](https://play.google.com/?gl=ba)波斯尼亚和黑塞哥维那
*   [https://play.google.com/?gl=bw](https://play.google.com/?gl=bw)博茨瓦纳
*   [https://play.google.com/?gl=br](https://play.google.com/?gl=br)巴西
*   [https://play.google.com/?gl=bg](https://play.google.com/?gl=bg)保加利亚
*   [https://play.google.com/?gl=bf](https://play.google.com/?gl=bf)布基纳
*   [https://play.google.com/?gl=kh](https://play.google.com/?gl=kh)柬埔寨
*   [https://play.google.com/?gl=cm](https://play.google.com/?gl=cm)喀麦隆
*   [https://play.google.com/?gl=ca](https://play.google.com/?gl=ca)加拿大
*   [https://play.google.com/?gl=cv](https://play.google.com/?gl=cv)佛得角
*   [https://play.google.com/?gl=cl](https://play.google.com/?gl=cl)智利
*   [https://play.google.com/?gl=co](https://play.google.com/?gl=co)哥伦比亚
*   [https://play.google.com/?gl=cr](https://play.google.com/?gl=cr)哥斯达黎加
*   [https://play.google.com/?gl=ci](https://play.google.com/?gl=ci)科特迪瓦
*   [https://play.google.com/?gl=hr](https://play.google.com/?gl=hr)克罗地亚
*   [https://play.google.com/?gl=cy](https://play.google.com/?gl=cy)塞浦路斯
*   [https://play.google.com/?gl=cz](https://play.google.com/?gl=cz)捷克共和国
*   [https://play.google.com/?gl=dk](https://play.google.com/?gl=dk)丹麦
*   [https://play.google.com/?gl=do](https://play.google.com/?gl=do)多米尼加共和国
*   [https://play.google.com/?gl=ec](https://play.google.com/?gl=ec)厄瓜多尔
*   [https://play.google.com/?gl=eg](https://play.google.com/?gl=eg)埃及
*   [https://play.google.com/?gl=sv](https://play.google.com/?gl=sv)萨尔瓦多
*   [https://play.google.com/?gl=ee](https://play.google.com/?gl=ee)爱沙尼亚
*   [https://play.google.com/?gl=fj](https://play.google.com/?gl=fj)斐济
*   [https://play.google.com/?gl=fi](https://play.google.com/?gl=fi)芬兰
*   [https://play.google.com/?gl=fr](https://play.google.com/?gl=fr)法国
*   [https://play.google.com/?gl=ga](https://play.google.com/?gl=ga)加蓬
*   [https://play.google.com/?gl=de](https://play.google.com/?gl=de)德国
*   [https://play.google.com/?gl=gh](https://play.google.com/?gl=gh)加纳
*   [https://play.google.com/?gl=gr](https://play.google.com/?gl=gr)希腊
*   [https://play.google.com/?gl=gt](https://play.google.com/?gl=gt)危地马拉
*   [https://play.google.com/?gl=gw](https://play.google.com/?gl=gw)几内亚比绍
*   [https://play.google.com/?gl=ht](https://play.google.com/?gl=ht)海地
*   [https://play.google.com/?gl=hn](https://play.google.com/?gl=hn)洪都拉斯
*   [https://play.google.com/?gl=hk](https://play.google.com/?gl=hk)香港
*   [https://play.google.com/?gl=hu](https://play.google.com/?gl=hu)匈牙利
*   [https://play.google.com/?gl=is](https://play.google.com/?gl=is)冰岛
*   [https://play.google.com/?gl=in](https://play.google.com/?gl=in)印度
*   [https://play.google.com/?gl=id](https://play.google.com/?gl=id)印度尼西亚
*   [https://play.google.com/?gl=ie](https://play.google.com/?gl=ie)爱尔兰
*   [https://play.google.com/?gl=il](https://play.google.com/?gl=il)以色列
*   [https://play.google.com/?gl=it](https://play.google.com/?gl=it)意大利
*   [https://play.google.com/?gl=jm](https://play.google.com/?gl=jm)牙买加
*   [https://play.google.com/?gl=jp](https://play.google.com/?gl=jp)日本
*   [https://play.google.com/?gl=jo](https://play.google.com/?gl=jo)乔丹
*   [https://play.google.com/?gl=kz](https://play.google.com/?gl=kz)哈萨克斯坦
*   [https://play.google.com/?gl=ke](https://play.google.com/?gl=ke)肯尼亚
*   [https://play.google.com/?gl=kw](https://play.google.com/?gl=kw)科威特
*   [https://play.google.com/?gl=kg](https://play.google.com/?gl=kg)吉尔吉斯斯坦
*   [https://play.google.com/?gl=la](https://play.google.com/?gl=la)老挝
*   [https://play.google.com/?gl=lv](https://play.google.com/?gl=lv)拉脱维亚
*   [https://play.google.com/?gl=lb](https://play.google.com/?gl=lb)黎巴嫩
*   [https://play.google.com/?gl=li](https://play.google.com/?gl=li)列支敦士登
*   [https://play.google.com/?gl=lt](https://play.google.com/?gl=lt)立陶宛
*   [https://play.google.com/?gl=lu](https://play.google.com/?gl=lu)卢森堡
*   [https://play.google.com/?gl=mk](https://play.google.com/?gl=mk)马其顿
*   [https://play.google.com/?gl=my](https://play.google.com/?gl=my)马来西亚
*   [https://play.google.com/?gl=ml](https://play.google.com/?gl=ml)马里
*   [https://play.google.com/?gl=mt](https://play.google.com/?gl=mt)马耳他
*   [https://play.google.com/?gl=mu](https://play.google.com/?gl=mu)毛里求斯
*   [https://play.google.com/?gl=mx](https://play.google.com/?gl=mx)墨西哥
*   [https://play.google.com/?gl=md](https://play.google.com/?gl=md)摩尔多瓦
*   [https://play.google.com/?gl=ma](https://play.google.com/?gl=ma)摩洛哥
*   [https://play.google.com/?gl=mz](https://play.google.com/?gl=mz)莫桑比克
*   [https://play.google.com/?gl=na](https://play.google.com/?gl=na)纳米比亚
*   [https://play.google.com/?gl=np](https://play.google.com/?gl=np)尼泊尔
*   [https://play.google.com/?gl=nl](https://play.google.com/?gl=nl)荷兰
*   [https://play.google.com/?gl=an](https://play.google.com/?gl=an)荷属安的列斯群岛
*   [https://play.google.com/?gl=nz](https://play.google.com/?gl=nz)新西兰
*   [https://play.google.com/?gl=ni](https://play.google.com/?gl=ni)尼加拉瓜
*   [https://play.google.com/?gl=ne](https://play.google.com/?gl=ne)尼日尔
*   [https://play.google.com/?gl=ng](https://play.google.com/?gl=ng)尼日利亚
*   [https://play.google.com/?gl=no](https://play.google.com/?gl=no)挪威
*   [https://play.google.com/?gl=om](https://play.google.com/?gl=om)阿曼
*   [https://play.google.com/?gl=pk](https://play.google.com/?gl=pk)巴基斯坦
*   [https://play.google.com/?gl=pa](https://play.google.com/?gl=pa)巴拿马
*   [https://play.google.com/?gl=pg](https://play.google.com/?gl=pg)巴布亚新几内亚
*   [https://play.google.com/?gl=py](https://play.google.com/?gl=py)巴拉圭
*   [https://play.google.com/?gl=pe](https://play.google.com/?gl=pe)秘鲁
*   [https://play.google.com/?gl=ph](https://play.google.com/?gl=ph)菲律宾
*   [https://play.google.com/?gl=pl](https://play.google.com/?gl=pl)波兰
*   [https://play.google.com/?gl=pt](https://play.google.com/?gl=pt)葡萄牙
*   [https://play.google.com/?gl=qa](https://play.google.com/?gl=qa)卡塔尔
*   [https://play.google.com/?gl=ro](https://play.google.com/?gl=ro)罗马尼亚
*   [https://play.google.com/?gl=ru](https://play.google.com/?gl=ru)俄罗斯
*   [https://play.google.com/?gl=rw](https://play.google.com/?gl=rw)卢旺达
*   [https://play.google.com/?gl=sa](https://play.google.com/?gl=sa)沙特阿拉伯
*   [https://play.google.com/?gl=sn](https://play.google.com/?gl=sn)塞内加尔
*   [https://play.google.com/?gl=rs](https://play.google.com/?gl=rs)塞尔维亚
*   [https://play.google.com/?gl=sg](https://play.google.com/?gl=sg)新加坡
*   [https://play.google.com/?gl=sk](https://play.google.com/?gl=sk)斯洛伐克
*   [https://play.google.com/?gl=si](https://play.google.com/?gl=si)斯洛文尼亚
*   [https://play.google.com/?gl=za](https://play.google.com/?gl=za)南非
*   [https://play.google.com/?gl=kr](https://play.google.com/?gl=kr)韩国
*   [https://play.google.com/?gl=es](https://play.google.com/?gl=es)西班牙
*   [https://play.google.com/?gl=lk](https://play.google.com/?gl=lk)斯里兰卡
*   [https://play.google.com/?gl=se](https://play.google.com/?gl=se)瑞典
*   [https://play.google.com/?gl=ch](https://play.google.com/?gl=ch)瑞士
*   [https://play.google.com/?gl=tw](https://play.google.com/?gl=tw)台湾
*   [https://play.google.com/?gl=tj](https://play.google.com/?gl=tj)塔吉克斯坦
*   [https://play.google.com/?gl=tz](https://play.google.com/?gl=tz)坦桑尼亚
*   [https://play.google.com/?gl=th](https://play.google.com/?gl=th)泰国
*   [https://play.google.com/?gl=tg](https://play.google.com/?gl=tg)多哥
*   [https://play.google.com/?gl=tt](https://play.google.com/?gl=tt)特立尼达和多巴哥
*   [https://play.google.com/?gl=tn](https://play.google.com/?gl=tn)突尼斯
*   [https://play.google.com/?gl=tr](https://play.google.com/?gl=tr)土耳其
*   [https://play.google.com/?gl=tm](https://play.google.com/?gl=tm)土库曼斯坦
*   [https://play.google.com/?gl=ug](https://play.google.com/?gl=ug)乌干达
*   [https://play.google.com/?gl=ua](https://play.google.com/?gl=ua)乌克兰
*   [https://play.google.com/?gl=ae](https://play.google.com/?gl=ae)阿拉伯联合酋长国
*   [https://play.google.com/?gl=gb](https://play.google.com/?gl=gb)英国
*   [https://play.google.com/?gl=us](https://play.google.com/?gl=us)美国（包括波多黎各、美属萨摩亚、关岛、马绍尔群岛、北马里亚纳群岛、帕劳和美属维尔京群岛）
*   [https://play.google.com/?gl=uy](https://play.google.com/?gl=uy)乌拉圭
*   [https://play.google.com/?gl=uz](https://play.google.com/?gl=uz)乌兹别克斯坦
*   [https://play.google.com/?gl=ve](https://play.google.com/?gl=ve)委内瑞拉
*   [https://play.google.com/?gl=vn](https://play.google.com/?gl=vn)越南
*   [https://play.google.com/?gl=ye](https://play.google.com/?gl=ye)也门
*   [https://play.google.com/?gl=zm](https://play.google.com/?gl=zm)赞比亚
*   [https://play.google.com/?gl=zw](https://play.google.com/?gl=zw)津巴布韦

如果您发现任何不正确的内容，当然可以随时进行编辑。

您还可以使用`hl`参数更改语言，如下所示：

*   [https://play.google.com/?hl=ar](https://play.google.com/?hl=ar)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-02T03:18:13.473

您需要操纵*Google Play*网址。例如，对于法语使用

```
https://play.google.com/store?gl=fr&tab=w8 
```

西班牙语使用

```
https://play.google.com/store?gl=sp&tab=w8 
```

您应该能够使用[Locale](http://developer.android.com/reference/java/util/Locale.html)文档中讨论的代码更换国家/地区代码（fr/sp/etc） 。

如果您只想更改语言，但要查看您当前国家/地区的特色应用或排名，请使用`hl`而不是`gl`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-27T14:48:40.393

您实际上已经回答了自己的问题：要强制 Google 显示特定于某个国家/地区的页面，您必须使用可以通过 IP 范围或 Google 识别为来自该国家/地区的提供商发送请求的主机。代理恰好提供了该功能。

是的，您是对的，负责测试 Google 服务的开发人员或其他人可能不会使用代理，尽管对于一家在其运营的每个国家/地区提供一些测试主机的大公司来说似乎并没有那么大的麻烦。

如果我必须实施一项基于客户位置提供内容的跨国服务，我不会试图通过将其隐藏在未记录的参数后面来掩盖测试功能（如在[安全性中）。](http://de.wikipedia.org/wiki/Security_through_obscurity)这种功能的更清晰和更明显的实现将是基于帐户的功能。

*   您是普通用户：我会根据您的位置发送内容。
*   您已登录并进入“Google 测试人员”组：您会看到一个设置来“欺骗”您的位置。

实际上，我开发的所有系统都具有扩展的调试和测试功能，即使在实时主机上也是如此，但这些功能根本不会被用户启用或访问。毕竟，这就是用户组的用途。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-11-03T05:15:07.890

为此，您可以使用一个名为 TorBrowser 的程序[从 Cnet 下载链接。](http://download.cnet.com/Tor-Browser-Bundle/3001-2356_4-75660251.html?spi=e9808d57021895c18d5f185254a2b1d3&dlm=0)您可以稍微更改设置并选择路由服务器以仅通过某些国家/地区。官方网站对此有更多文档。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-01-12T22:12:14.660

我会同时改变地区`gl`和语言`hl`：

```
https://play.google.com/?hl=vi&gl=vn 
```

使用此示例，您将访问越南商店 - 既作为地区又作为语言。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-07-20T11:36:57.153

如何查看不同类别中的热门应用程序您无需使用 vpn 或任何其他方法，只需按照以下步骤操作即可。

非常第一：如果已登录，请注销您的 gmail 帐户，然后开始

1.  让我们先在屏幕截图中看到这里，通常像屏幕截图一样播放商店： [![在此处输入图像描述](../Images/99623b3235bdc87cdf36b0774e466ef0.png)](https://i.stack.imgur.com/4CKwO.jpg)

2.你可以在这里选择任何你想看到不同国家流行应用的类别，我选择娱乐。 [![在此处输入图像描述](../Images/5923bdcacf295f98901798f9a841d450.png)](https://i.stack.imgur.com/mGxyV.png)

3.在这里您正在寻找顶级免费娱乐选项点击查看更多
[![在此处输入图像描述](../Images/cb17b0cad508010f63eb04d9bccf79a4.png)](https://i.stack.imgur.com/UzyLl.png)

4.您正在寻找顶级免费娱乐，但直到不在其他国家/地区，现在我们在 url 中使用一些语法来找出这个类别在不同国家/地区的热门趋势在 URL 中注意 [![在此处输入图像描述](../Images/0bacec471fe7b25fa77368026e11abd5.png)](https://i.stack.imgur.com/WcDDz.png)

5：你要找的网址在这里

[https://play.google.com/store/apps/category/ENTERTAINMENT/collection/top sell_free](https://play.google.com/store/apps/category/ENTERTAINMENT/collection/topselling_free)

您必须在 plus 中添加一些内容才能看到像 ?gl=us 在这里我们指的是美国和澳大利亚到大洋洲和英国到英国等

[https://play.google.com/store/apps/category/ENTERTAINMENT/collection/top sell_free?gl=us](https://play.google.com/store/apps/category/ENTERTAINMENT/collection/topselling_free?gl=us)

[![在此处输入图像描述](../Images/6f4aa87db7b5587357e4a886bb978457.png)](https://i.stack.imgur.com/5oGJ8.png)

6.in screen shot 6 am 查看我们娱乐类别中的所有应用程序

我希望你明白

[![在此处输入图像描述](../Images/93d2c6621c6f49b108f027781eea023a.png)](https://i.stack.imgur.com/rituz.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-01-17T20:55:42.767

我测试了添加`&hl=[language_code]`到 url 的末尾，然后看到了用该语言编写的内容和评论。请试试这个。

在以前的答案中，参数名称被用作`gl`而不是`hl`（可能是错字）。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2016-09-28T01:09:46.710

我发现使用 Tor 浏览器的最佳解决方案。您应该设置国家代码：

[http://www.wikihow.com/Set-a-Specific-Country-in-a-Tor-Browser](http://www.wikihow.com/Set-a-Specific-Country-in-a-Tor-Browser)

对于国家代码：

[http://www.b3rn3d.com/blog/2014/03/05/tor-country-codes/](http://www.b3rn3d.com/blog/2014/03/05/tor-country-codes/)

# python - 用于在 Windows 中自动执行桌面活动的 Python 代码

> ID：11825322
> 
> 赞同：26
> 
> 时间：2012-08-06T09:06:53.930
> 
> 标签：python, windows, user-interface, ui-automation

我想使用 Python 在 Windows 环境中自动执行桌面活动。怎么做？一些例子也会有所帮助。

桌面活动是指控制鼠标和键盘、访问活动窗口属性、双击桌面上的图标、最小化和最大化窗口、通过键盘向输入弹出窗口输入数据等操作。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-06T11:13:02.157

看看[斯库力](http://sikuli.org/)。

> Sikuli 是一种使用图像（屏幕截图）自动化和测试图形用户界面 (GUI) 的视觉技术。

SIKULI 使用了一种非常巧妙的组合截屏，并将它们嵌入到您的 python（实际上是[jython](http://www.jython.org/)）脚本中。

* * *

截图：

![在此处输入图像描述](../Images/19291bf5943a0b3326ae85d66a4091e8.png)

并在您的代码中使用它们：

![在此处输入图像描述](../Images/79934f0abc42e75798fc5fb4eceaebdf.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-06T10:36:13.357

在 Windows 中有多种自动化用户界面的方法，可以通过 Python 访问（使用`ctypes`或某些 Python 窗口绑定）：

1.  原始 Windows API——`Get/SetCursorPos`用于鼠标、HWND API`GetFocus`和`GetForegroundWindow`

2.  `AutoIt`-- 一种自动化脚本语言：[在 Python 中调用 AutoIt 函数](https://stackoverflow.com/questions/3301561/calling-autoit-functions-in-python)

3.  Microsoft Active Accessibility ( `MSAA`) / WinEvent -- 一种用于通过 Win95 中的辅助功能 API 询问 UI 的 API。

4.  UI/Automation ( `UIA`) -- Vista 中引入的替代品`MSAA`（适用于 XP SP3 IIRC）。

自动化用户界面以对其进行测试是一项艰巨的任务。有很多陷阱会让你绊倒。

我建议以自动化方式测试您的自动化框架，以便您可以验证它在您正在测试的平台上是否有效（以识别自动化中的`API`故障与应用程序中的故障）。

另一个考虑是如何处理本地化。另请注意，Minimize/Maximize/... 的名称也是本地化的，并且可以使用与应用程序不同的语言（系统与用户区域设置）！

在伪代码中，`MSAA`最小化应用程序的程序如下所示：

```
window = AccessibleObjectFromWindow(FindWindow("My Window"))
titlebar = [x for x in window.AccessibleChildren if x.accRole == TitleBar]
minimize = [x for x in titlebar[0].AccessibleChildren if x.Name == "Minimize"]
if len(minimize) != 0: # may already be minimized
    mimimize[0].accDoDefaultAction() 
```

`MSAA`可访问的项目`(object: IAccessible, childId: int)`成对存储。这里需要注意正确调用（例如`get_accChildCount`只使用`IAccessible`，所以当`childId`不是 0 时，您必须返回 0 而不是调用`get_accChildCount`）！

`IAccessible`调用可以返回不同的错误代码来指示`"this object does not support this property"`——例如`DISP_E_MEMBERNOTFOUND`或`E_NOTIMPL`。

注意窗口的状态。如果窗口最大化然后最小化，restore 会将窗口恢复到最大化状态，因此您需要再次恢复它以使其恢复到正常/窗口状态。

和API 不支持鼠标右键点击，所以需要使用 a`MSAA`来触发。`UIA``Win32 API`

该`MSAA`模型不支持树视图层次结构信息——它将其显示为平面列表。另一方面，`UIA`只会枚举可见的元素，因此您将无法访问`UIA`树中折叠的元素。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-07-20T07:10:59.710

你可以试试[Automa](http://www.getautoma.com/)。

它是一个用 Python 编写的 Windows GUI 自动化工具，使用起来非常简单。例如，您可以执行以下操作：

```
# to double click on an icon on the desktop
doubleclick("Recycle Bin")

# to maximize
click("Maximize")

# to input some text and press ENTER
write("Some text", into="Label of the text field")
press(ENTER) 
```

可以在[此处](http://www.getautoma.com/docs)找到可用命令的完整列表。

*免责声明*：我是 Automa 的开发人员之一。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-01-07T14:24:15.210

您可以使用[PyAutoGUI](https://pyautogui.readthedocs.io/)，它提供了一种跨平台的 Python 方式来执行 GUI 自动化。

### [鼠标控制](http://pyautogui.readthedocs.io/en/latest/mouse.html)

这是将鼠标移动到屏幕中间的简单代码：

```
import pyautogui
screenWidth, screenHeight = pyautogui.size()
pyautogui.moveTo(screenWidth / 2, screenHeight / 2) 
```

相关问题：[使用 Python 控制鼠标](https://stackoverflow.com/q/1181464/55075)。

### [键盘控制](http://pyautogui.readthedocs.io/en/latest/keyboard.html)

例子：

```
pyautogui.typewrite('Hello world!')                 # prints out "Hello world!" instantly
pyautogui.typewrite('Hello world!', interval=0.25)  # prints out "Hello world!" with a quarter second delay after each character 
```

### [消息框功能](https://pyautogui.readthedocs.io/en/latest/msgbox.html)

它提供了 JavaScript 样式的消息框。

和别的。

* * *

有关其他建议，请查看：[用于模拟应用程序中的用户交互的 Python GUI 自动化库](https://softwarerecs.stackexchange.com/q/42664/3474)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-08-24T14:23:44.350

看看[BotCity Framework](https://github.com/botcity-dev/botcity-framework-core-python)，一个开源 RPA 框架。 

它只是 python（没有中间代码，没有 jython 等）。

下面的示例执行 SAP 并登录：

```
from botcity.core import DesktopBot
from botcity.maestro import AlertType, AutomationTaskFinishStatus, Column

class Bot(DesktopBot):
    def action(self, execution):
        self.execute("saplogon.exe")

        # #{image:"login"}

        if not self.find( "user", matching=0.97, waiting_time=10000):
            self.not_found("user")
        self.click_relative(172, 5)

        self.paste(user)
        self.tab()
        self.paste(pass)
        self.enter()

if __name__ == '__main__':
    Bot.main() 
```

作为 Sikuli，您有一个工具来裁剪元素并获得有关界面和 UI 元素的视觉线索。但在这种情况下，它是一个用于编辑 .py 文件（不是中间代码）的工具，因此您可以在自动化中使用任何 python 库。

![](../Images/cfd4f3de5d3fa419cf2fe14b3e8b9a7a.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-12T14:08:23.447

你可以试试[ClointFusion](https://pypi.org/project/ClointFusion)

它又是一个基于 Python 的 RPA 平台，在内部使用[PyAutoGUI](https://pypi.org/project/PyAutoGUI/)以及其他包。

它有一个友好的基于浏览器的拖放 BOT 生成器：[DOST](http://dost.clointfusion.com)

您可以找到 100 多个易于使用的功能：

1.  6 个 gui 函数，可从用户那里获取任何输入
2.  4个鼠标操作功能
3.  窗口操作的 6 个功能（仅适用于 Windows 操作系统）
4.  窗口对象的 5 个函数（仅适用于 Windows 操作系统）
5.  8个文件夹操作功能
6.  Excel 运算的 28 个函数
7.  3个键盘操作功能
8.  屏幕抓取操作的 5 个功能
9.  浏览器操作的 11 种功能
10.  警报消息的 4 个功能
11.  字符串操作的 3 个函数
12.  大量与表情符号、拍照、闪光（弹出）消息等相关的杂项功能

*免责声明：我是 ClointFusion 的开发者之一*

# android - 视频文件未在浏览器上运行

> ID：11825324
> 
> 赞同：0
> 
> 时间：2012-08-06T09:06:57.293
> 
> 标签：android, html5-video, android-video-player

在 android 中，我创建了 .mp4 视频文件并将其存储在 sdcard 中。我已从 sdcard 将其复制到计算机中，并尝试使用视频标签在浏览器上运行它。

我的html代码是：-

```
<!DOCTYPE html>
<html>
<body>

<video width="320" height="240" controls="controls">
  <source src="12.mp4" type="video/mp4" />
  <source src="12.ogg" type="video/ogg" />
  Your browser does not support the video tag.
</video>

</body>
</html> 
```

我的android代码是：-

```
private MediaRecorder prMediaRecorder;
prMediaRecorder.setCamera(prCamera);
prMediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
prMediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
prMediaRecorder.setAudioEncoder(AudioEncoder.AMR_NB);
prMediaRecorder.setVideoEncoder(VideoEncoder.H264); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:32:08.967

```
<!DOCTYPE html>
<html>
<body>

<video width="320" height="240" controls="controls">
  <source src="12.mp4" type="video/mp4" />
  <source src="12.ogg" type="video/ogg" />
  Your browser does not support the video tag.
</video>

</body>
</html> 
```

尝试放置视频的直接路径？

```
 private MediaRecorder prMediaRecorder;
prMediaRecorder.setCamera(prCamera);
prMediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
prMediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
prMediaRecorder.setAudioEncoder(AudioEncoder.AMR_NB);
prMediaRecorder.setVideoEncoder(VideoEncoder.H264); 
```

这不是相机的代码吗？我不太确定这个 android 代码，但它似乎是一个 android 相机代码

# java - 如何模拟一个方面

> ID：11825325
> 
> 赞同：5
> 
> 时间：2012-08-06T09:07:00.863
> 
> 标签：java, testing, mocking, aspectj

我目前正在使用 aspectj 开发一些监控工具。因为这个工具应该是技术独立的（尽可能），所以我没有使用 Spring 进行注入。但我希望我的方面进行单元测试。

方面示例：

```
@Aspect
public class ClassLoadAspect {
    private Repository repository;

    public ClassLoadAspect() {
        repository = OwlApiRepository.getInstance();
    }  

    @After("anyStaticInitialization()")
    public void processStaticInitilization(JoinPoint jp) {
        Class type = jp.getSourceLocation().getWithinType();
        if (type.isInterface()) {
            repository.storeInterfaceInitialization(type);
        } else if (type.isEnum()) {
            repository.storeEnumInitialization(type);
        } else {
            repository.storeClassInitialization(type);
        }

    }

    @Pointcut("staticinitialization(*) && !within(cz.cvut.kbss.odra..*)")
    public void anyStaticInitialization() {
    }

    public Repository getRepository() {
        return repository;
    }

    public void setRepository(Repository repository) {
        this.repository = repository;
    }  
} 
```

但是，我真的不知道如何构建单元测试（应该模拟存储库字段（使用 mockito）），但是我没有控制方面的创建，因此我无法手动设置依赖项。我应该调用什么来获取实例？或者还有其他一些场景如何对aspectj方面进行单元测试。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:18:19.663

你说你找到了引入模拟对象hacky的方法。你到底不喜欢什么，你觉得它是怎样的？我只能猜测：

`OwlApiRepository.getInstance()`您不喜欢在元方面全局替换调用的事实吗？然后你可以专门限制模拟对象注入到方面的构造函数（我使用原生 AspectJ 语法，因为我对 POJO 注释风格感到不舒服）：

```
public privileged aspect ClassLoadTestAspect {
    static boolean active = true;

    declare precedence : ClassLoadTestAspect, ClassLoadAspect;
    pointcut classLoadAspect() :
        if(active) && 
        withincode(ClassLoadAspect.new()) && 
        call(* OwlApiRepository.getInstance());

    Object around() : classLoadAspect() {
        return new MockRepository();
    }
} 
```

您还可以看到，元（方面测试）方面的这个变体也有一个开关，可以随意打开和关闭它。也许这也是你不喜欢的东西。正如我所说，我在猜测。在您的反馈之后，我可能能够更具体地回答。

**编辑：**至于您的担忧，我想我已经尽可能地解决了它们：

*   您不需要模拟支架。

*   该方面可以（去）激活。使其激活依赖于其他条件很容易，因此它仅在您的测试环境中有效。如果这还不够，请在生产方面使用编译时编织，在测试方面使用加载时编织。这样，它的字节码甚至不会出现在您的生产环境中。

*   我的版本不会在全球范围内取代任何东西，但就像一位优秀的外科医生只在一个地方以微创方式进行切割。

*   由于以下几个原因，我无法真正理解您对字节码操作的担忧：您使用 AspectJ，即固有的字节码操作（编织）。您使用在运行时创建类的 Mockito。我也不明白你在哪里看到 AspectJ 的不足。您还没有解释您希望“语言的标准方式”如何表现或它应该为测试提供什么接口。即使您有，我也无法为您更改您自己选择的语言（AJ）和工具（Mockito）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T09:12:36.303

你可以拆分你的测试。首先测试方面的逻辑。这是一个pojo。你可以随心所欲地测试它。第二部分是测试切入点。在这种情况下，创建另一个具有相同切入点的简单方面（例如，将它们提取为常量）。也许有一些专用的测试工具，但我不知道，这是我想到的最简单的方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T14:23:25.897

我当前的解决方案是引入这个 AspectJ hack 以覆盖单例工厂方法

```
@Aspect
public class MockingAspect {

    @Around("call(synchronized static OwlApiRepository *(..))")
    public OwlApiRepository processGetInstance(ProceedingJoinPoint jp) {      
        System.out.println("getting mock");
        return MockHolder.getMock();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T11:08:29.083

你只是想要单元测试，对吗？这是一个小型单元测试，用于测试带有方面的自定义注释，目的是在自定义应用程序异常中包装一个 throwable。（Testng + Mockito）

```
public class ResourceApplicationExceptionAspectTest {
@Mock
private ProceedingJoinPoint pjp;
@Mock
private ResourceApplicationException resourceApplicationException; //annotation definition

@BeforeMethod
public void setUp() throws Exception {
    MockitoAnnotations.initMocks(this);

}

@Test(groups ="unit", expectedExceptions = ResourceApplicationException.class)
public void testWrapExceptionAdvice() throws Throwable {

    ResourceApplicationExceptionAspect aspect = new ResourceApplicationExceptionAspect();

    when(pjp.proceed()).thenThrow(new NullPointerException());
    aspect.wrapExceptionAdvice(pjp, resourceApplicationException);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T15:41:04.773

沿着这些思路怎么样，基本上继续保持你的方面，内部方面将行为委托给另一个接口，并为你的测试模拟该接口，而不是模拟方面本身。这是一个伪代码：

```
public interface ClassLoadHelper{
    void processStaticInitialization(Class<?> clazz);
}

public class ClassLoadHelperImpl implements ClassLoadHelper{
    private Repository repository;

    public ClassLoadHelperImpl() {
        repository = OwlApiRepository.getInstance();
    }  

    void processStaticInitialization(Class<?> clazz){
        if (type.isInterface()) {
            this.repository.storeInterfaceInitialization(type);
        } else if (type.isEnum()) {
            this.repository.storeEnumInitialization(type);
        } else {
            this.repository.storeClassInitialization(type);
        }        
    }
}

@Aspect
public class ClassLoadAspect {
    private ClassLoadHelper classLoadHelper;

    @After("anyStaticInitialization()")
    public void processStaticInitilization(JoinPoint jp) {
        Class<?> type = jp.getSourceLocation().getWithinType();
        this.classLoadHelper.processStaticInitialization(type);

    }

    @Pointcut("staticinitialization(*) && !within(cz.cvut.kbss.odra..*)")
    public void anyStaticInitialization() {
    }

    public ClassLoadHelper getClassLoadHelper() {
        return classLoadHelper;
    }

    public void setClassLoadHelper(ClassLoadHelper classLoadHelper) {
        this.classLoadHelper = classLoadHelper;
    }  
} 
```

现在在您的测试中，您可以这样做：

```
ClassLoadAspect.aspectOf().setClassLoadHelper(mockClassLoadHelper); 
```

# android - 是否有任何适用于 Android 的开源或免费主题库？

> ID：11825326
> 
> 赞同：7
> 
> 时间：2012-08-06T09:07:03.363
> 
> 标签：android, themes

我正在寻找免费或更好的开源 Android 主题库来为我的应用程序设置样式。挖了网，没找到。

有没有什么？你会推荐什么？

# gwt - 动作和事件之间的 GWT 平台不同

> ID：11825328
> 
> 赞同：2
> 
> 时间：2012-08-06T09:07:19.067
> 
> 标签：gwt, gwt-platform

在 GWT-platform 中，Action 和 Event 有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:37:41.863

我认为事件的概念比行动更广泛。每个动作都可以与某个事件相关联，但一个动作不一定是针对已定义事件的发生。**动作**是用户的任何动作。事件是用户操作（UI 事件）或执行某些条件（其他事件）的结果**。**例如，用户执行了*操作* `press button`。这个动作可以与一个*事件* `button was pressed`相关联。例如，*事件* `expiration of user session`不需要任何操作。

但是这些术语对于 GWT 的含义非常相似，我想有时许多开发人员会互换使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:55:19.260

动作是代表客户端-服务器命令的对象。使用 GWTP 的调度程序 (DispatchAsync) 从客户端将操作发送到服务器。操作将在服务器端处理，使用操作处理程序。动作可以有异步回调，用于客户端处理成功或失败的动作处理。

事件是客户端使用的对象。它们被触发（最好是从 Presenter 或 PresenterWidget）并通过 EventBus 广播到其他 Presenter/PresenterWidget。其他 Presenter/PresenterWidgets 可以订阅特定的事件类型，并在该类型的事件通过 EventBus 触发时采取行动。它是[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)的一种实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T12:14:55.543

在 GWT 平台中，Actions 指的是服务器端调用（在客户端和服务器之间获取/更改数据）。事件仅在客户端。它们可用于手动显示演示者，或在某处更新某些文本。

这至少是我使用它们的方式。

# sas - 使用聚合数据的 SAS 直方图

> ID：11825330
> 
> 赞同：0
> 
> 时间：2012-08-06T09:07:29.033
> 
> 标签：sas

我通常使用 proc gchart 因为创建漂亮的图表相当容易，但据我所知，使用 gcart 或单变量我必须每次观察一行。

如何使用聚合数据创建直方图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:33:01.097

使用 gchart ... vbar /freq=NumberOfObservationsInClass 。

# php - PHP/MySQL：存储项目 ID

> ID：11825331
> 
> 赞同：1
> 
> 时间：2012-08-06T09:07:31.387
> 
> 标签：php, mysql, url

当我将一些项目存储在一个表中，然后希望有一个连接到每个项目的 URL 时，我只有类似 mywebsite.com/item/132 这将显示有关项目表中第 132 个项目的信息。拥有这样的环境是不是很糟糕？我应该让它有像 youtube 这样的东西，每个项目都有一组随机的字符吗？这样做的最好方法是什么？

只需将项目按通常的数字存储在表格中，然后 URL 看起来更像这样？mywebsite.com/item/a19kgjy

然后一个 PHP 脚本“解密”a19kgjy 并获取一个用于从数据库中获取正确项目的数字？

这会让一切变得更慢吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:12:50.207

这很糟糕，因为您正在为服务器添加额外的工作来进行排序。为什么不创建一个这样的表？

```
CREATE TABLE myTable
(
    ID int AUTO_INCREMENT,
    httpLink varchar(max)
) 
```

在这种情况下，您只会对`ID`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T09:20:52.397

我认为这与安全/数据保护问题更相关。这实际上取决于您是否希望其他人可以轻松访问它。有时数字非常敏感，最好使用散列键，例如，让我们说 transaction_id 或 user_id，您向其他人公开您的业务一天有多少交易或您的系统有多少用户，这可能间接导致到一些脆弱性。但是如果你想实现哈希方法，我建议你在数据插入期间生成随机哈希，而不是在查询期间使用解密方法。这将为您节省一些处理能力。但请记住为表的哈希字段编制索引。无论如何，无论是数字还是散列，都不是真正的搜索引擎友好 url。

# c# - ASP.NET 多应用解决方案

> ID：11825335
> 
> 赞同：0
> 
> 时间：2012-08-06T09:08:00.607
> 
> 标签：c#, asp.net, structure

我需要一些关于如何构建文件以便于发布和管理代码的建议。

解决方案中有 1 个网站（前端网站）和 1 个 Web 应用程序（内容管理系统），我想要做的是当我发布解决方案时，Web 应用程序（CMS）文件和内容应该进入一个子文件夹网站文件夹（例如 www.domain.com/cms）。有没有办法做到这一点？

我正在使用 VWD2010Express。

编辑：我为 CMS 系统使用 N 层结构 Web 应用程序，而前端只是一个普通的网站项目

# tridion - 当我访问我的自定义 dll 时，事件处理程序中出现错误

> ID：11825338
> 
> 赞同：1
> 
> 时间：2012-08-06T09:08:32.177
> 
> 标签：tridion, tridion-2011

我为 Page 的 checkoutevent 创建了一个事件处理程序，并将 dll 放置在正确的位置并重新启动了 com+ 和 IIS。

在我的解决方案中，我添加了一个我自己的自定义 dll 并调用其中的一种方法。我收到错误“无法加载文件或程序集 'myassembly.dll'”，我尝试将自定义 dll 添加到保存事件处理程序 dll 的位置，并尝试将其放入 \bin 文件夹并重新启动 com+、iis。仍然收到相同的错误。

当我在事件处理程序中添加我的自定义 dll 时，我需要做更多的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T09:20:32.547

您用于事件系统的 DLL 通过 Tridion.ContentManager.config 文件加载并由其位置引用。但是，不会检查此位置是否有可能的参考。

我相信遵循 .NET 标准，通常的方法是将引用的程序集放在 GAC 中，以便事件系统代码可以通过这种方式找到它们。

您的另一个选择是确保您的引用在您的事件系统程序集中编译。如果您有引用的源代码，您可以将它们包含在项目中，否则您可以使用[ILMerge](http://www.microsoft.com/en-us/download/details.aspx?id=17630)等后期构建工具将您的程序集组合到一个 DLL 中。

*我认为我们过去经常做的最后一个是将您的参考资料放在 ..\Tridion\bin 文件夹中，但我不确定这在 2011 年是否仍然有效......*

# javascript - 与 node.js 的 SSL 连接

> ID：11825340
> 
> 赞同：4
> 
> 时间：2012-08-06T09:08:39.827
> 
> 标签：javascript, sockets, node.js, ssl, socket.io

我已经厌倦了试图自己解决这个问题。我正在尝试让股票市场 api 正常工作，为此，我需要一个 ssl 连接。唉，我得到的只是错误或奇怪的东西。

当我像这样使用普通节点的“net”模块连接到套接字时：

```
var net = require('net');
var data = '';
var login = '{"cmd":"login", "args":{"session_key":"' + session_key + '", "service":"NEXTAPI"}} \n';
var socket = new net.Socket();
socket.connect(443, 'pub.api.test.nordnet.se', function () {
    console.log('Connected');
});
socket.on('data', function (stuff) {
    console.log(stuff.toString);
    data += stuff;
});
socket.on('end', function () {
    console.log(data);
});
socket.on('error', function (e) {
    throw e;
});
socket.on('close', function () {
    console.log('Connection closed.');
    console.log(data.toString);
});
socket.write(login , function () {
    console.log("Callback");
}); 
```

首先一切正常，我收到“已连接”消息，我很高兴，但是当我尝试进行实际登录时，我进入控制台的只是“[Function]”，然后是“Connection closed”。是的，似乎来自服务器的数据只是“[Function]”。这有点奇怪。编辑：现在我知道我为什么得到它了，谢谢 Amberlamps。虽然问题依然存在。

好的，所以我用其他一些方法尝试了同样的事情。这是我使用 socket.io-client 的代码。

```
var client = io_client.connect('https://pub.test.api.nordnet.se:443', {secure: true});
client.on('data', function (stuff) {
    console.log (stuff);
});
client.on('error', function (e) {
    throw e;
});
client.on('end', function () {
    console.log('Connection ended');
}); 
```

我得到的只是“错误：getaddrinfo ENOENT”。无论我尝试做什么，这似乎都是相同的错误，将主机名更改为吃喝玩乐或将 https 更改为 http 或完全删除它，或者上帝知道我尝试了什么。

好的......这是我的最后一次尝试，我虽然可能，只是可能，他们确实需要认证，而我没有使用它。所以这是我使用节点的 tls 模块的另一段代码：

```
var tls = require ('tls');
var fs = require ('fs');

var options = {
host: 'pub.api.test.nordnet.se',
port: '443',
key: fs.readFileSync('NEXTAPI_TEST_public.pem'),
cert: fs.readFileSync('NEXTAPI_TEST_public.der')
};

var Stream = tls.connect(options, function () {
    console.log('client connected', Stream.authorized ? 'authorized' : 'unauthorized');
    process.stdin.pipe(Stream);
    process.stdin.resume();
});
Stream.on('data', function (stuff) {
    console.log(stuff);
});
Stream.on('end', function () {
    console.log('END');
});
Stream.on('error', function (err) {
    throw err;
}); 
```

但它甚至没有进入认证部分，它给我的只是“错误：连接 EADDRNOTAVAIL”。我再次尝试将名称、端口、https 更改为 hppt 等，但我得到的只是同样的错误。哦，你可能会认为我的主机名有一个错误，但不，我使用不同的技术从同一个 api 获取该主机名和端口，但我也需要这个工作才能取得进展。

现在请有人给我一些关于这个问题的见解。如果您发现我可以改进这三段代码中的任何一段，我会尝试这样做。

编辑（1）：如果我尝试只使用普通的 https 而不是套接字，会发生这种情况。

```
var https = require ('https'); 
var options = {
host: 'pub.api.test.nordnet.se',
path: '/',
port: '443', 
auth: session_key + ':' + session_key, // Tried with and without this.
headers: {"Accept": "application/json", "Connection": "Keep-Alive"}
};

var request = https.get(options, function (res) {
    res.on('data', function (stuff) {
        console.log(stuff)
    });
    res.on('end', function () {
        console.log("END");
    });
})
.on('error', function (e) {
    throw e;
}); 
```

我得到的只是“错误：套接字挂断”。或者，如果我指定[https://pub.api](https://pub.api) ...我得到“错误：getaddrinfo ENOENT”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T20:47:26.987

由于这是一个 REST api，因此使用 https 模块的尝试是正确的。但是，根据文档，您应该尝试连接到“https://api.test.nordnet.se/next/1”。'1' 是 API 版本。这应该解释ENOENT /连接重置。

查询这将返回您的 api 状态。下一步是登录。

我在这里找到了一个非常好的 Python 示例：[https ://api.test.nordnet.se/boards/2/topics/297?r=340#message-340](https://api.test.nordnet.se/boards/2/topics/297?r=340#message-340)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:41:58.523

有一个新的节点示例： [https ://api.test.nordnet.se/projects/api/wiki/Code_examples#Login-and-feed-example-in-Nodejs](https://api.test.nordnet.se/projects/api/wiki/Code_examples#Login-and-feed-example-in-Nodejs)

您基本上需要使用 rest 登录，然后使用会话密钥登录到提要。

# javascript - 附加行并在其中调用时差函数时生成动态ID？

> ID：11825342
> 
> 赞同：0
> 
> 时间：2012-08-06T09:08:50.873
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

我正在使用 trent 的 timepicker 插件以表格格式生成 timepicker。同一行中的开始时间和结束时间基于计算的时间差。为了生成多个时间选择器，我使用类而不是 id。麻烦的是我想生成动态 id 并在其中附加一个带有 calculate() 的行。

以下是我当前的代码：

```
$(document).ready(function() {

    //table grid structure follows here
    $("#AddRow").click(function() {
        var row = '<tr><td>' +'<input type=text /></td>' + '<td><input type=text class="timepicker" value=""/></td>' + '<td><input type=text class="timepicker" value=""/></td>' + '<td><input type=text id= "difference" /></td>' + '<td><button>delete</button>' + '</td></tr>';
        $("#table").append(row);

    });
    $('body').on('focus', ".timepicker", function() {
        $(this).timepicker({});
    });

    $("#table").on("click", "button", function() {
        $(this).closest("tr").remove();
    });
    //table structure ends here
}); 
```

有什么方法可以实现吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:44:17.290

IE 浏览器不支持“sessionStorage”...
试试这个...

```
$(document).ready(function(){
var i=0;
$('input.timepicker').each(function(){
    i++;
    $(this).attr("id","timepicker_"+i);
}); 
```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:19:45.067

生成动态 ID 的一个想法是在会话存储中存储一个数值，您将连接到一个常量前缀的值。数值在使用后会递增。就像是：

```
var id = sessionStorage.getItem("id");
if (!id) {
    id = 0;
}
var idValue = "myId" + id.toString();
sessionStorage.setItem("id", id++); 
```

# sqlite - SQLite：限制左连接

> ID：11825345
> 
> 赞同：0
> 
> 时间：2012-08-06T09:09:01.520
> 
> 标签：sqlite, join, subquery, left-join

我在 SQLite 文件中有 2 个表，其组织方式如下：

*   *包含节点名称的*tNode**
**   *tItem*包含名称、优先级和对其父节点的引用。一个节点可以有多个项目。*

 *要列出节点及其项目，我只需要进行一个简单的 JOIN 查询：

```
SELECT tNode.node, ..., tItem.itemName, tItem.itemPriority, ...
FROM tNode
LEFT JOIN tItem ON tItem.node=tNode.node
ORDER BY tNode.node 
```

但现在我想要包含该项目的节点列表，无论其优先级如何（列表中**没有任何重复节点**）。我想我可以使用以下查询：

```
SELECT tNode.node, ..., tItem2.itemName, tItem2.itemPriority, ...
FROM tNode
LEFT JOIN
  (SELECT itemName,itemPriority FROM tItem WHERE tItem.node=tNode.node LIMIT 1)
AS tItem2 ON tItem2.node=tNode.node
ORDER BY tNode.node 
```

但这不起作用（“没有这样的列：tNode.node”）。看来我不能在子查询中使用 tNode.node 列。

如何在不必为每列创建一个子查询的情况下实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:44:12.303

尝试删除子查询中的 where 子句，也 LIMIT 并使用 min 添加 group by

```
SELECT tNode.node, ..., tItem2.itemName, tItem2.itemPriority
FROM tNode
LEFT JOIN
  (SELECT itemName,min(itemPriority) as min_priority FROM tItem GROUP BY tItem.node)
AS tItem2 ON tItem2.node=tNode.node
ORDER BY tNode.node 
```*

# c# - petapoco 可以处理连接和查询生成的列吗？

> ID：11825350
> 
> 赞同：2
> 
> 时间：2012-08-06T09:09:21.463
> 
> 标签：c#, petapoco

我有一个名为 Event 的对象，而 event 有一些其他的链接表。

```
[PetaPoco.ResultColumn]
public Models.User Presenter { get; set; } 
```

Petapoco 通过在我使用时获取我的对象来完成一项出色的工作：

```
evt = db.Fetch<Models.Event, Models.User>(";EXEC GetEventDetails @id", new { id = id }); 
```

这给我带来了带有演示者数据的事件。

但问题是我的查询“可用座位”中还生成了一列此列链接到对象，如下所示：

```
[PetaPoco.ResultColumn]
public string AvailableSeats { get; set; } 
```

问题是：当我使用 db.Fetch 时，可用席位为空。我现在的解决方案是：

```
evt = db.Fetch<Models.Event>(";EXEC GetEventDetails @id", new { id = id })[0];
evt.Presenter = db.FirstOrDefault<Models.User>("WHERE id=" + evt.PresenterId); 
```

但我真的不喜欢这个。它应该全部在一行代码中。

这是一个 petapoco 错误，还是我在那里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:12:50.067

我的猜测（不看幕后）是 PetaPoco 仅在您进行多连接时填充相应的表字段，因为它需要猜测每个表的女巫字段匹配。

我对这些类型的连接的建议是让 ViewModel 对象仅具有所需的属性。这更清晰、更快速，只需要几分钟。

# iphone - iPhone 在 AppStore 上提交应用程序具有加密

> ID：11825351
> 
> 赞同：2
> 
> 时间：2012-08-06T09:09:21.897
> 
> 标签：iphone, ios, encryption, app-store

我正在使用 iOS 的 AES256 CommonCrypto 框架在我的应用程序中加密数据，应用程序是客户端服务器通信，所有数据都是加密和解密两端，我的问题是我是否必须回答“是”或“否”对于应用程序包含 AppStore 上的加密，我必须根据 Apple 出口为此通过所有 CCATS 流程？这是 Apple 自己的许可框架，域名在 http。

另外，当我使用 https 自签名证书时，在这种情况下，对 AppStore 回答“是”或“否”并且必须通过整个过程？如果我使用自己的受信任证书。在那种情况下呢？

通过 CCAT 出口法需要很长时间，如果没有这个，我们可以提交申请吗？

我在任何地方都没有得到任何满意的答案。

谢谢

# iphone - 实施 AdWhirl + iAD

> ID：11825352
> 
> 赞同：0
> 
> 时间：2012-08-06T09:09:23.173
> 
> 标签：iphone, ios, iad, adwhirl

大家好，这可以在 IOS 应用程序中使用 Ad Whirl 和 iAd 吗？我找不到任何关于这个的教程？如果有人知道这一点，请回复一个建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:18:38.990

看看这个[http://www.raywenderlich.com/2011/11/24/how-to-integrate-adwhirl-into-a-cocos2d-game/](http://www.raywenderlich.com/2011/11/24/how-to-integrate-adwhirl-into-a-cocos2d-game/)

希望链接对您有所帮助。

请注意，如果您正在使用非 Cocos2d 查看评论，则有非 cocos2d 用户的评论

欢呼。

# hadoop - 在 hadoop 中为 mkdir 命令生成日志

> ID：11825353
> 
> 赞同：0
> 
> 时间：2012-08-06T09:09:31.193
> 
> 标签：hadoop, bigdata

有没有办法为**hadoop fs -mkdir**命令生成成功/失败日志。可能适用于所有 hadoop shell 命令集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T06:34:46.910

所有 hadoop shell 命令在成功时都将返回 0。你应该检查一下 - 这是最可靠的方法。

```
hadoop dfs -mkdir /foo
if [ $? eq 0]
#success, do something
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:56:47.220

```
hadoop fs -mkdir /foo
if [ $? -eq 0 ]; then
#action
fi 
```

进行了轻微的语法更改。谢谢，它有帮助。但是我可以通过设置一些属性来为此目的获得一些日志吗？这意味着，对于通过 shell 或 java api 在 hdfs 上创建的每个目录，我们可以记录一些日志吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T16:21:38.957

fs shell 命令没有任何这样的命令。如果您使用的是 java api，则 FileSystem.mkdirs 方法还会返回结果代码以及失败时的异常。

您只想打印失败或成功的日志吗？在这种情况下，最好的方法是在检查返回码后从脚本中打印出您想要的任何内容。

# php - PHP 中新的 Bing API 不支持身份验证

> ID：11825356
> 
> 赞同：0
> 
> 时间：2012-08-06T09:09:45.203
> 
> 标签：php, azure, bing-api

我一直在将工作中的应用程序从旧的 Bing API 移植到新的应用程序。看过几篇关于新版本如何在 PHP 中工作的帖子后，我遇到了身份验证问题。

这是 URL 返回的错误：

```
Warning: file_get_contents(https://api.datamarket.azure.com/Bing/Search/Image?$format=json&Query=%27%27) [function.file-get-contents]: failed to open stream: HTTP request failed! HTTP/1.1 401 The authorization type you provided is not supported. Only Basic and OAuth are supported in /home/krem81/public_html/classes/class.BingSearch.php on line 178 
```

反过来，这是我用来与 API 交互的函数：

```
$accountKey = $this->Appid;

$ServiceRootURL =  "https://api.datamarket.azure.com/Bing/Search/";

$WebSearchURL = $ServiceRootURL . 'Image?$format=json&Query=';

$context = stream_context_create(array(
    'http' => array(
        'request_fulluri' => true,
        'header'  => "Authorization: Basic " . base64_encode($accountKey . ":" . $accountKey)
    )
));

$request = $WebSearchURL . urlencode( '\'' . $_POST["searchText"] . '\'');

echo($request);

$this->response = file_get_contents($request, 0, $context);

$this->results = json_decode($this->response); 
```

自从尝试了这个我现在也尝试过

```
 $accountKey = $this->Appid;

    $ServiceRootURL =  "https://api.datamarket.azure.com/Bing/Search/";

    $WebSearchURL = $ServiceRootURL . 'Image?$format=json&Query=';

    $request = $WebSearchURL . urlencode( '\'' . $this->keyword . '\'');

    echo($request);

    $process = curl_init($request);
    curl_setopt($process, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
    curl_setopt($process, CURLOPT_USERPWD,  $accountKey . ":" . $accountKey);
    curl_setopt($process, CURLOPT_TIMEOUT, 30);
    curl_setopt($process, CURLOPT_RETURNTRANSFER, TRUE);

    $this->response = curl_exec($process);

    var_dump($this->response);

    $this->results = json_decode($this->response);

    var_dump($this->results); 
```

有没有人知道什么可能会触发身份验证失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:03:00.437

这是搜索 API 的工作示例，只需将您的访问密钥替换为“XXXX”。即使我浪费了好几个小时来使用 cURL 让它工作，但它在本地失败了“CURLOPT_SSL_VERIFYPEER”的原因:(

```
$url = 'https://api.datamarket.azure.com/Bing/Search/Web?Query=%27xbox%27';
$process = curl_init($url);
curl_setopt($process, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
curl_setopt($process, CURLOPT_USERPWD, "username:XXXX");
curl_setopt($process, CURLOPT_TIMEOUT, 30);
curl_setopt($process, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($process, CURLOPT_SSL_VERIFYPEER, false);
$response = curl_exec($process);

# Deliver
return $response;

# Have a great day!
curl_close($process); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:41:12.770

另一个团队成员更改了一个变量的名称，我想我真的应该立即检查。`$this->Appid`应该是`$this->APPID`。

正如我在评论中对 ManseUK 所说，尽管微软可以为缺少的应用程序 ID 提供更好的错误消息，但类似于“无效应用程序 ID”的内容有助于缩小问题范围

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-24T09:21:09.020

减少流量和提高速度的建议：在身份验证中
添加`Accept-Encoding: gzip`和删除名称。`base64_encode(':' . $this->APPID)`是你所需要的全部。

# c# - 获取会议组织者邮件地址 EWS API

> ID：11825359
> 
> 赞同：6
> 
> 时间：2012-08-06T09:09:50.490
> 
> 标签：c#, exchangewebservices

我想通过 EWS API 获取会议组织者的邮件地址。目前我只是得到我的约会项目的一些属性。听说你可以设置你想获取的属性。我的代码如下所示：

```
CalendarView cview = new CalendarView(start, end);
                    cview.PropertySet = new PropertySet(BasePropertySet.FirstClassProperties);
                    FindItemsResults<Appointment> appResults = calenFolder.FindAppointments(cview); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-09T16:13:09.550

我遇到了同样的问题并设法使用以下方法填充 Organizer.Address 属性：

```
ExchangeService service = calenFolder.Service;
service.LoadPropertiesForItems(appResults, PropertySet.FirstClassProperties); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-24T12:38:15.080

我知道这个问题很老，但是自从我找到它之后，其他人也可能会找到它。然后，解决方案比这个问题早五年。

解决方案实际上很简单，在微软论坛上发布此问题时会很快找到：

[http://social.msdn.microsoft.com/Forums/en-US/0403c00e-008d-4eb2-a061-45e60664573e/how-can-i-get-smtp-address-to-an-organizer-with-ews？论坛=exchangesvr开发](http://social.msdn.microsoft.com/Forums/en-US/0403c00e-008d-4eb2-a061-45e60664573e/how-can-i-get-smtp-address-to-an-organizer-with-ews?forum=exchangesvrdevelopment)

简短的摘要：

使用 ExchangeService.FindAppointments 检索时，组织者字段不包含 SMTP 地址，但如果使用 ExchangeService.BindToItems 或 Appointment.Bind 检索，则包含 SMTP 地址。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-06T11:17:38.237

约会项目中有一个属性，即 Organizer.Address

因此，如果您有名为*约会*的约会变量，则以下代码将检索组织者地址

```
Var address = appointment.Organizer.Address; 
```

尝试使用此代码

```
var appointments = _service.FindAppointments(WellKnownFolderName.Calendar, new CalendarView(start,end));
foreach (var appointment in appointments)
{System.Diagnose.Writeline(appointment.Organizer.Address)} 
```

# java - 序号和间隔？

> ID：11825360
> 
> 赞同：-2
> 
> 时间：2012-08-06T09:09:56.200
> 
> 标签：java, quickfix

谁能告诉我序列号的工作以及如何在 quickfix/j 中恢复序列间隙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:13:34.733

AFAIK它没有。它假设

*   您正在使用可靠的传输，例如 TCP
*   您的路由器将确保序列按顺序交付而不会丢失。

如果您在序列号中看到一个空白，则一定是出现了相当大的问题，您需要将其标记给用户/支持人员。这不是它可以自动恢复的东西。

# php - md5加密解密

> ID：11825362
> 
> 赞同：1
> 
> 时间：2012-08-06T09:10:08.807
> 
> 标签：php, codeigniter

我的数据库表中有一个名为 download_key 的字段。它通常保存在表中，没有进行加密。我将此键作为隐藏值发送到表单中。如果有人右键单击页面并查看页面的来源，则密钥是可见的。是否可以仅在视图中对其进行加密？我还将密钥的隐藏值与存储在数据库中的值进行比较。

一些代码

控制器

```
$query = $this->db->get_where('mc_boxes', array('idmc_boxes' => $id));
$row = $query->row();
$data['download_key'] = strtolower($row->downloadkey); 
```

在我的视野里

```
<form name="form" method="post" onsubmit="return validateForm('<?php echo $download_key ?>')"> 
    <input type="hidden" name="key" value="<?php echo $download_key ?>" />
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:14:42.127

为什么不使用会话？

```
$_SESSION['DL_KEY'] = strtolower($row->downloadkey); 
```

并且没有必要在表格中呼应它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T09:37:00.630

有可用的加密/解密功能 - 请查看[http://codeigniter.com/user_guide/libraries/encryption.html](http://codeigniter.com/user_guide/libraries/encryption.html)

```
$msg = 'My secret message';
$key = 'super-secret-key';

$encrypted_string = $this->encrypt->encode($msg, $key);

$encrypted_string = 'APANtByIGI1BpVXZTJgcsAG8GZl8pdwwa84';

$plaintext_string = $this->encrypt->decode($encrypted_string); 
```

看看这对你的情况是否有帮助。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T09:15:59.343

尝试使用带密钥的可逆加密（仅在您的配置中，对其他人隐藏）。

```
$key = 'YOUR_UNIQUE_KEY_HERE';
$phrase = 'PHRASE_TO_DECODE_OR_ENCODE';
if ($method == 'encode')
    return base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $key, $phrase, MCRYPT_MODE_ECB, mcrypt_create_iv(32, MCRYPT_RAND)));
else if ($method == 'decode')
    return trim(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $key, base64_decode($phrase), MCRYPT_MODE_ECB, mcrypt_create_iv(32, MCRYPT_RAND))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T09:15:42.403

查看函数[md5](http://php.net/manual/en/function.md5.php)。它是一个原生的 php 函数。与codeigniter无关。

`string md5 ( string $str [, bool $raw_output = false ] )`是函数签名。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T09:19:16.290

以如下形式打印您的密钥：

```
 echo $this->encrypt->encode($download_key); 
```

然后，在它被插入数据库之前，执行以下操作：

```
 $download_key = $this->encypt->decode($download_key); 
```

# ios - MKAnnotations 的标注随机不出现

> ID：11825363
> 
> 赞同：0
> 
> 时间：2012-08-06T09:10:10.257
> 
> 标签：ios, mkmapview, mkannotation

我对 MKMapView 及其注释有一点问题，我找不到这里发生的事情。

问题是有时，当我点击注释时，它的标注不会出现。
如果我再次点击它，它仍然不会出现。
如果我点击另一个注释，然后再次点击第一个注释，则会出现标注。

我在 didSelectAnnotationView 中检查了 NSLog 的 title 和 canShowCallout，一切正常（第一个不为空，第二个设置为 true）。

还有什么可以使标注不出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:15:16.553

找到[了这个](https://stackoverflow.com/questions/10047596/showing-callout-after-moving-mapview)，这似乎有效。我真的不喜欢这种解决方法，但由于没有其他解决方案，我想我必须使用我拥有的......

# c# - 从字符串转换日期和/或时间时出错

> ID：11825371
> 
> 赞同：0
> 
> 时间：2012-08-06T09:10:57.683
> 
> 标签：c#, sql-server-2008, type-conversion

当我尝试运行此代码时，我收到此错误：

```
conversion failed when converting date and/or time from character string 
```

我在这一行得到错误：

```
g_muallak_tarihi = DateTime.Parse(row_muallakt["Muallak_tarihi"].ToString()); 
```

要存储既是日期又是时间或仅是日期的值，我使用 DateTime 数据类型。我不知道该怎么办。你有什么想法？

这是我的代码：

```
public void cs_hmuallak()
{
    string cs_hmuallak = null;
    SqlConnection cnn;

    cs_hmuallak = @"Data Source= .\SQLEXPRESS; Initial Catalog=mydb;Integrated Security= True";

    cnn = new SqlConnection(cs_hmuallak);

    try
    {
        cnn.Open();

        {
                SqlDataAdapter da_muallakt = new SqlDataAdapter("SELECT M.Muallak_tutari FROM Muallak M INNER JOIN Hasar H ON M.Hasar_no= H.Hasar_no INNER JOIN Police P ON p.Police_no=h.Police_no where p.Acenta_kodu='"+cbx_acenta.Text+"' and p.Brans_kodu='"+cbx_brans.Text+"' and  M.muallak_tarihi<=(Select M.muallak_tarihi from muallak M where M.muallak_tarihi=(select max(muallak_tarihi) from muallak where muallak_tarihi<=@parameter)) and M.Muallak_tarihi=(SELECT max(M.Muallak_tarihi) FROM Muallak M INNER JOIN Hasar H ON M.Hasar_no= H.Hasar_no INNER JOIN Police P ON p.Police_no=h.Police_no where p.Acenta_kodu='"+cbx_acenta.Text+"' and p.Brans_kodu='"+cbx_brans.Text+"' and  M.muallak_tarihi<=(Select M.muallak_tarihi from muallak M where M.muallak_tarihi=(select max(muallak_tarihi) from muallak where muallak_tarihi<=@parameter)) ) ", cnn);

                da_muallakt.SelectCommand.Parameters.AddWithValue("@parameter",g_listetarihi.ToString("yyyy-mm-dd"));
                DataTable table_muallakt = new DataTable();
                da_muallakt.Fill(table_muallakt);
                foreach (DataRow row_muallakt in table_muallakt.Rows)
                {
                    if (row_muallakt["Muallak_tutari"] != DBNull.Value)
                    {
                        if (row_muallakt["Muallak_tarihi"] != DBNull.Value)
                        {
                            g_muallak_tarihi = DateTime.Parse(row_muallakt["Muallak_tarihi"].ToString());
                            g_muallak_tutari = int.Parse(row_muallakt["Muallak_tutari"].ToString());
                        }
                    }
                }                   
        }
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.ToString());
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:18:24.373

假设它`Muallak_tarihi`被定义为一`DATETIME`列（这*应该*是它所持有的），所有这些与字符串转换的工作都不需要。

您可以简单地`GetDateTime`直接使用数据读取器来获取它，或者简单地转换值：

```
g_muallak_tarihi = row_muallakt["Muallak_tarihi"] as DateTime; 
```

此外，您使用的参数 ( `@parameter`)*也*应该是`DATETIME`- 并且直接传入，而不是使用`ToString`：

```
da_muallakt.SelectCommand.Parameters.AddWithValue("@parameter",g_listetarihi); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-06T09:14:49.193

使用字符串.格式

```
da_muallakt.SelectCommand.Parameters.AddWithValue("@parameter", string.Format("{0:yyyy-MM-dd}",g_listetarihi.ToString()); 
```

MSDN 日期时间格式：http: [//msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

# jquery - 复杂 DOM 遍历的最简单方法？

> ID：11825374
> 
> 赞同：1
> 
> 时间：2012-08-06T09:11:16.367
> 
> 标签：jquery

下面是我的代码，它显示了一个非常简单的场景，其中包含多个触发器和目标。点击 div.trigger 1 会改变 div.target 1 的颜色，点击 div.trigger 2 会改变 div.target 2 的颜色。

我的实际 html 要复杂得多，所以我需要使用很多方法来遍历 DOM，而不是只使用一个 next()。在这种情况下，何时有其他解决问题的方法？

如果代码更健壮，这样如果触发器和目标元素的相对 html 结构发生变化，它仍然可以工作。例如，如果有类似 eq 函数使第一个 div.trigger 以第一个 div.target 为目标，而第二个 div.trigger 以第二个 div.target 为目标，而不管页面其余部分的 html。

```
 <div class="trigger">trigger 1</div>
 <div class="target">target 1</div>
 <div class="trigger">trigger 2</div>
 <div class="target">target 2</div>

 ​$(document).ready(function(){
     $('.trigger').click(function(){
         $(this).next().css('background-color','red');        
     }); 
 });​ 
```

[http://jsfiddle.net/5tcNq/2/](http://jsfiddle.net/5tcNq/2/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:17:42.407

> ...例如，如果有类似 eq 函数使第一个 div.trigger 以第一个 div.target 为目标，而第二个 div.trigger 以第二个 div.target 为目标...

试试这个代码：http: [//jsfiddle.net/JGyc9/](http://jsfiddle.net/JGyc9/)

相关js：

```
$(function() {

   var tr = $('.trigger'),
       tg = $('.target');

   tr.on('click', function() {
      var i = tr.index(this);
      /* tg.eq(i) is the target */

      console.log("your trigger ", $(this).text());
      console.log("your target ", tg.eq(i).text());
   });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T09:17:53.727

您可以使用[数据](http://api.jquery.com/data/)来存储对目标元素的引用。

```
<div id="trigger1" class="trigger" data-target="#target1">trigger 1</div>
<div id="target1" class="target">target 1</div>

​$(document).ready(function(){
     $('.trigger').click(function(){
         var $target = $($(this).data('target'));
         $target.css('background-color', 'red');
     });
});​ 
```

# php - 如何在非 IE 浏览器上阅读 word 文档

> ID：11825376
> 
> 赞同：-1
> 
> 时间：2012-08-06T09:11:33.883
> 
> 标签：php, javascript, ms-word

我想在非 IE 浏览器上呈现 word 文档（.doc、.docx）这可能吗？如果是，该怎么做？

请分享你的经验。非常感谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:22:48.207

使用 Google 文档查看器[https://docs.google.com/viewer/](https://docs.google.com/viewer/)

例子

[https://docs.google.com/viewer?url=https://dl.dropbox.com/u/16123/upload/loremipsum.docx](https://docs.google.com/viewer?url=https://dl.dropbox.com/u/16123/upload/loremipsum.docx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T09:15:00.513

仅在客户端：没有。在服务器端使用 PHP：是的（它将输出为 HTML）而且我敢打赌，IE 也只支持插件，系统上安装了 Office。

# javascript - 未捕获的 ReferenceError：分配中的左侧无效

> ID：11825378
> 
> 赞同：0
> 
> 时间：2012-08-06T09:11:37.830
> 
> 标签：javascript

我从我的 JavaScript 代码中收到此错误：

```
Uncaught ReferenceError: Invalid left-hand side in assignment 
```

这是我的代码：

```
<script type="text/javascript">
function repartition()
{
    var principal_p             = <?php echo $data23['principal_p'] ;?>; 
    var principal_c             = <?php echo $data23['principal_c'] ;?>; 
    var interets_p              = <?php echo $data23['interets_p'] ;?>; 
    var interets_c              = <?php echo $data23['interets_c'] ;?>; 
    var clause_penale_p         = <?php echo $data23['clause_penale_p'] ;?>; 
    var clause_penale_c         = <?php echo $data23['clause_penale_c'] ;?>;
    var domages_interets_p      = <?php echo $data23['domages_interets_p'] ;?>;
    var domages_interets_c      = <?php echo $data23['domages_interets_c'] ;?>;
    var art700_cpc_p            = <?php echo $data23['art700_cpc_p'] ;?>;
    var art700_cpc_c            = <?php echo $data23['art700_cpc_c'] ;?>;
    var art475_1_cpp_p          = <?php echo $data23['art475_1_cpp_p'] ;?>;
    var art475_1_cpp_c          = <?php echo $data23['art475_1_cpp_c'] ;?>;
    var art_441_6_cc_p          = <?php echo $data23['art_441_6_cc_p'] ;?>;
    var art_441_6_cc_c          = <?php echo $data23['art_441_6_cc_c'] ;?>;
    var frais_ar_p              = <?php echo $data23['frais_ar_p'] ;?>; 
    var frais_ar_c              = <?php echo $data23['frais_ar_c'] ;?>;
    var agios_p                 = <?php echo $data23['agios_p'] ;?>; 
    var agios_c                 = <?php echo $data23['agios_c'] ;?>;
    var depens_p                = <?php echo $data23['depens_p'] ;?>; 
    var depens_c                = <?php echo $data23['depens_c'] ;?>;   
    var frais_execution_p       = <?php echo $data23['frais_execution_p'] ;?>; 
    var frais_execution_c       = <?php echo $data23['frais_execution_c'] ;?>;  
    var contrib_aid_juridiq_p   = <?php echo $data23['contrib_aid_juridiq_p'] ;?>;
    var contrib_aid_juridiq_c   = <?php echo $data23['contrib_aid_juridiq_c'] ;?>;  
    var frais_greffe_p          = <?php echo $data23['frais_greffe_p'] ;?>;
    var frais_greffe_c          = <?php echo $data23['frais_greffe_c'] ;?>;
    principal = document.getElementsByName("principal_s");
    document.getElementsById(nprincipal)= (principal*principal_p)/100;
}
</script> 
```

导致错误的行是其中的行`document.getElementsById`。为什么会导致错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T09:13:48.507

您正在尝试分配函数调用的结果，该结果永远不是可以分配的引用，而是一个值，因此您无法分配给它。这就是您收到该错误的原因。

* * *

至于一般修复您的代码，这超出了范围。我可以帮你做一些猜测：

您可以将`.innerHTML`元素的 设置为如下值：

```
 document.getElementById("nprincipal").innerHTML = (principal[0].value*principal_p)/100; 
```

我还修复了：

*   `getElementsById`应该`getElementById`
*   `principal`是我假设是单个输入元素的实时节点列表，所以我`.value`通过`[0].value`
*   在代码中未定义的`getElementById`as中使用字符串`nprincipal`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T09:14:41.573

你想在你的代码中做什么？目前，您正在将计算结果分配给 DOM 元素，如果您想在页面上显示结果，那么您可能需要这样做：

```
document.getElementById(nprincipal).innerHTML = (principal*principal_p)/100; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T09:23:55.617

用这个：

```
document.getElementsById("nprincipal").value = (principal*principal_p)/100;
```

或者

```
document.getElementsById("nprincipal").innerHTML = (principal*principal_p)/100;
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T09:15:56.577

```
document.getElementsById(nprincipal)= (principal*principal_p)/100; 
```

是错误...如果它是某个表单元素，它应该是

```
document.getElementById(nprincipal).value= (principal*principal_p)/100; 
```

编辑

还

```
principal = document.getElementByName("principal_s"); 
```

应该

```
principal = document.getElementByName("principal_s").value; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T09:21:35.167

为了扩展我对 op 的评论。

查看 json 和 javascript 对象。这将为您节省很多将数据从 php 解析为 javascript 的麻烦：

```
var data23 = <?php echo json_encode($data23) ;?> 
```

这将使对象看起来像这样：

```
{
    principal_p: <?php echo $data23['principal_p'] ;?>,
    principal_c: <?php echo $data23['principal_c'] ;?>,
    interets_p: <?php echo $data23['interets_p'] ;?>, 
    interets_c: <?php echo $data23['interets_c'] ;?>,

    ....
} 
```

您现在可以参考 以`data23.principal_p`获取从中解析的数据`<?php echo $data23['principal_p'] ;?>`。

这不是答案，因为当您尝试将计算分配给您的 DOM 节点时，我可以看到您遗漏了一些东西。

[PHP.net json_encode](http://php.net/manual/en/function.json-encode.php)

# python - 继承 int 的类中的按位运算

> ID：11825380
> 
> 赞同：3
> 
> 时间：2012-08-06T09:11:51.967
> 
> 标签：python, int, bitwise-operators

我继承自 int，因为我想为按位运算实现一个简单的接口。由于 int 的不可变性，我必须使用整数成员函数，如`int.__and__`, ... 。

```
class Bitset(int)
    ...
    def __setitem__(self, index, value):
        if value:
            self.__ior__(1 << int(index))
        else:
            self.__iand__(~(1 << int(index))) 
```

在我的一个成员函数中，我想使用`|=`and`&=`函数，但是整数没有`__ior__`and`__iand__`成员函数。所以我的问题是我该如何解决这个问题？

### 编辑：

我不想简化二进制操作，我想操作整数的位。例如

```
a = Bitset(0)
a[0]
>>>0
a[0] = 1
a[0]
>>>1 
```

但是我不想重新实现每个整数运算，它应该仍然可以工作。如果我包装一个内部整数，我必须这样做。例如

```
a = Bitset(0)
a += 1 
```

应该仍然有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:55:03.507

已经有用于按位运算的简单接口（参见[http://docs.python.org/reference/expressions.html#summary](http://docs.python.org/reference/expressions.html#summary)），例如：

```
4 >> 1
# 2 
```

你没有 __ior__ 和 __iand__ 但你有 __and__ 和 __or__。但我怀疑你想要的实际上是实现按位运算的 __ror__ 和 __rand__ 。整数确实有那些最后的魔法方法。关于魔术方法，请参阅：[http ://www.rafekettler.com/magicmethods.html#numeric](http://www.rafekettler.com/magicmethods.html#numeric)

另见：[http ://wiki.python.org/moin/BitwiseOperators](http://wiki.python.org/moin/BitwiseOperators)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T23:13:25.293

`int`s 既不可下标也不可变，因此您无法编写工作`__setindex__()`方法。似乎描述基本上是一个可变的位向量类，例如[这个](http://svn.python.org/projects/python/tags/r12beta3/Demo/classes/bitvec.py)似乎是由 Guido 编写的。您可以使用提供的`__int__()`和`__long__()`方法将其转换为整数值（尽管我认为您不再需要后者）。

# facebook - 在 Ruby on Rails 中使用相同的应用程序获取 Facebook 朋友

> ID：11825382
> 
> 赞同：1
> 
> 时间：2012-08-06T09:11:51.503
> 
> 标签：facebook, ruby-on-rails-3, facebook-graph-api

我已经在我的 ruby​​ on rails 网站上通过 Facebook 对用户进行了身份验证。我有访问令牌。该网站/应用程序已在 Facebook 上注册。我的下一步是向通过 Facebook 登录应用程序的用户的朋友展示使用相同应用程序的用户。基本上：如果我是应用程序上的用户 A，并且我通过 Facebook 登录该应用程序，我应该能够看到我所有使用该应用程序的朋友。

我想我可以使用：[https](https://graph.facebook.com/me/friends?access_token=....../api/) ://graph.facebook.com/me/friends?access_token=....../api/ 但是以这种形式返回朋友，我不明白如何使用这些数据来比较我的网站数据库中的 ID，然后显示使用这个应用程序的人。 ![在此处输入图像描述](../Images/a61117f45499737b1ae42fec8f580ebe.png)

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:06:56.047

您应该将 Facebook ID 与您的站点使用的内部 ID 一起记录，然后使用集合的重叠。

您向 db 添加一列以存储 facebook id，例如 fb_id，然后执行

```
ids = res['data'].map { |obj| obj['id'] }
User.where(:fb_id => ids) 
```

据我记得，ActiveRecord 将使用“IN (..)”作为数组传递的列。

# cocos2d-iphone - 使身体从一根绳子摆动到另一根绳子

> ID：11825383
> 
> 赞同：1
> 
> 时间：2012-08-06T09:12:13.547
> 
> 标签：cocos2d-iphone, box2d, physics, game-physics, box2d-iphone

我正在制作一款类似泰山的游戏，并且一直在集思广益，让身体从一根绳子摆动到另一根绳子。使用 Box2d 和 Cocos2d，我制作了一条由旋转接头段组成的绳索，身体使用焊接接头连接到最低段。我正在考虑设置一些条件，以了解距离绳索固定点最远的部分是否移动了由鼠标关节触发的某个角度（例如，距其初始点 60 度）并在施加力移动时破坏原始焊接关节身体连接到另一根绳子（创建一个新的焊接接头）。我不知道我是否解释得很好。但这在理论上对我来说似乎是有道理的。这是解决这个问题的好方法吗。

# android - 如何设置每天早上 9 点通知？

> ID：11825386
> 
> 赞同：0
> 
> 时间：2012-08-06T09:12:31.753
> 
> 标签：android

```
String ns = Context.NOTIFICATION_SERVICE;
        NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);

        int icon = R.drawable.ic_launcher;
        CharSequence tickerText = "Test";
        long when = System.currentTimeMillis();

        Notification notification = new Notification(icon, tickerText, when);

        Context context = getApplicationContext();
        CharSequence contentTitle = "Test";
        CharSequence contentText = "testing texts";
        Intent notificationIntent = new Intent(this, HolotestActivity.class);
        PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);

        notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);

        final int HELLO_ID = 1;

        mNotificationManager.notify(HELLO_ID, notification); 
```

我用于通知。如何设置每天早上 9 点通知？我是初学者。:D

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-06T09:16:46.753

为此，您需要创建并运行将一直运行的服务类，然后在与您的时间匹配的时间添加通知栏后，在服务类内部以一定的间隔获取当前时间。服务参考以下链接：

[服务](http://developer.android.com/guide/components/services.html)

# android - 使用 AsyncTask 向服务器发送数据时出错

> ID：11825387
> 
> 赞同：0
> 
> 时间：2012-08-06T09:12:34.897
> 
> 标签：android, exception, exception-handling, android-asynctask, illegalstateexception

我正在尝试从 CSV 文件中读取数据，然后将这些数据发送到服务器进行处理，但是，当我单击按钮从文件中读取数据然后尝试发送到服务器时，存在错误并且我的应用程序意外关闭.

以下是错误日志中的消息：

```
08-06 17:04:32.168: E/AndroidRuntime(10468): FATAL EXCEPTION: main
08-06 17:04:32.168: E/AndroidRuntime(10468): java.lang.IllegalStateException: Cannot execute task: the task is already running.
08-06 17:04:32.168: E/AndroidRuntime(10468):    at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:575)
08-06 17:04:32.168: E/AndroidRuntime(10468):    at android.os.AsyncTask.execute(AsyncTask.java:534)
08-06 17:04:32.168: E/AndroidRuntime(10468):    at Android.Chico.Chico$3.onClick(Chico.java:307)
08-06 17:04:32.168: E/AndroidRuntime(10468):    at android.view.View.performClick(View.java:4084)
08-06 17:04:32.168: E/AndroidRuntime(10468):    at android.view.View$PerformClick.run(View.java:16966)
08-06 17:04:32.168: E/AndroidRuntime(10468):    at android.os.Handler.handleCallback(Handler.java:615)
08-06 17:04:32.168: E/AndroidRuntime(10468):    at android.os.Handler.dispatchMessage(Handler.java:92)
08-06 17:04:32.168: E/AndroidRuntime(10468):    at android.os.Looper.loop(Looper.java:137)
08-06 17:04:32.168: E/AndroidRuntime(10468):    at android.app.ActivityThread.main(ActivityThread.java:4745)
08-06 17:04:32.168: E/AndroidRuntime(10468):    at java.lang.reflect.Method.invokeNative(Native Method)
08-06 17:04:32.168: E/AndroidRuntime(10468):    at java.lang.reflect.Method.invoke(Method.java:511)
08-06 17:04:32.168: E/AndroidRuntime(10468):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-06 17:04:32.168: E/AndroidRuntime(10468):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-06 17:04:32.168: E/AndroidRuntime(10468):    at dalvik.system.NativeStart.main(Native Method) 
```

我之前也看到过同样的错误，我知道这个异常可能会出现，因为AsyncTask可以执行一次，所以我每次都创建一个新的AsyncTask 但是出现错误，请问可能是什么原因？

这是我的代码：

```
public class Chico extends Activity {
    GrabURL grab;
    Button btnfinish;
    Button btninsert;
    List<String[]> CSVData = new ArrayList<String[]>();
    Boolean Insert = false;
    Boolean Continue = false;
    int numrecord=0;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        //create the activity
        super.onCreate(savedInstanceState);

        //set up the layout
        setContentView(R.layout.activity_chico);

        btninsert = (Button) findViewById(R.id.Insert);
        if(new File(Environment.getExternalStorageDirectory()+"/Chico/record.csv").exists()){
            btninsert.setVisibility(View.VISIBLE);
        }else{
            btninsert.setVisibility(View.GONE);
        }

        btnfinish = (Button) findViewById(R.id.Finish);
        btnfinish.setVisibility(View.GONE);
        grab = new GrabURL();

        btninsert.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                if(!Continue){
                    Insert = true;
                    Continue = true;
                    btninsert.setVisibility(View.GONE);
                    try {
                        BufferedReader reader = new BufferedReader(new FileReader(Environment.getExternalStorageDirectory()+"/Chico/record.csv"));
                        try {
                            String line;
                            while ((line = reader.readLine()) != null){
                                String[] RowData = line.split(",");
                                CSVData.add(RowData);
                            }
                        } catch (IOException ex) {

                        }
                    } catch (FileNotFoundException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }else{
                    grab = new GrabURL();
                }
                if(numrecord==CSVData.size())
                    btnfinish.setVisibility(View.VISIBLE);
                while(numrecord<CSVData.size()){
                    grab.onPreExecute("TechID", Build.SERIAL);
                    grab.onPreExecute("ClientID", CSVData.get(numrecord)[0]);
                    grab.onPreExecute("SiteID", CSVData.get(numrecord)[1]);
                    grab.onPreExecute("Type", CSVData.get(numrecord)[2]);
                    grab.onPreExecute("LogTime", CSVData.get(numrecord)[3]);
                    if(CSVData.get(numrecord)[2]=="Checkin"){
                        grab.onPreExecute("Remark", "");
                    }else{
                        grab.onPreExecute("Remark", CSVData.get(numrecord)[4]);
                    }
                    grab.execute(new String[]{"http://192.168.1.150/check.php"});
                }
            }
        });

        btnfinish.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                finish();
            }
        });
    }

    private class GrabURL extends AsyncTask<String, Void, Void>{
        //ArrayList object for storing the string pairs
        ArrayList<NameValuePair> nameValuePairs;

        public GrabURL() { 
            //constructor of the class
            nameValuePairs = new ArrayList<NameValuePair>(); 
          } 

        protected void onPreExecute(String key, String value) {
            //store the pair of values into the ArrayList 
            nameValuePairs.add(new BasicNameValuePair(key,value));
            }

        @Override
        protected Void doInBackground(String... urls) {
            // TODO Auto-generated method stub
            //Operation being executed in another thread
            try{
                //set up the type of HTTPClient
                HttpClient client = new DefaultHttpClient();
                //set up the location of the server
                HttpPost post = new HttpPost(urls[0]);
                //translate form of pairs to UrlEncodedFormEntity 
                UrlEncodedFormEntity ent = new UrlEncodedFormEntity(nameValuePairs,HTTP.UTF_8);
                //set up the entity being sent by post method
                post.setEntity(ent);
                //execute the url and post the values
                //client.execute(post);
                HttpResponse responsePOST = client.execute(post); 
                HttpEntity resEntity = responsePOST.getEntity();
                line = EntityUtils.toString(resEntity);
             } catch (Exception e) {
                 //catch the exception
                line = "Can't connect to server";
             }
            return null;
        }

        protected void onPostExecute(Void unused) {
            if(Insert){
                if(line.equals("Check in record has been inserted!") ||
                        line.equals("Check out record has been inserted!")){
                        btninsert.setVisibility(View.VISIBLE);
                        numrecord++;
                } else if(line.equals("Can't connect to server")) {
                        btnfinish.setVisibility(View.VISIBLE);
                } 
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:38:09.720

如果您仔细查看错误日志，您将看到错误发生在 Chico.java 类的第 307 行。所以双击这一行或滚动到代码中的这一行，看看哪里出错了。

但我认为这是因为您手动多次调用 onPreExecute() 方法。如果您在此站点上阅读了使用 AsyncTask for Android 的操作指南：[How to Use AsyncTask for Android](http://www.brighthub.com/mobile/google-android/articles/82805.aspx)和[Android 开发人员站点](http://developer.android.com/reference/android/os/AsyncTask.html)，您可以阅读到您可能不会手动调用 onPreExecute()、doInBackground() 和 onPostExecute()，因为它们被调用当您调用 execute() 方法时，Android 会自动执行此操作。

因此，我认为最好的方法是将您的 nameValuePairs 添加到 ArrayList 中，并将其作为参数添加到 AsyncTask 的构造函数中。然后，以这种方式执行（）您的 GrabURL Asynctask：

```
grab.execute("http://192.168.1.150/check.php"); 
```

因为不需要将数组格式的参数添加到 execute() 方法。您不必更改 doInBackground() 方法中的任何代码。

祝你好运！

有一个很好的发展。

氪

# sql - Oracle：如何进行大外部联接

> ID：11825391
> 
> 赞同：0
> 
> 时间：2012-08-06T09:12:39.540
> 
> 标签：sql, oracle

即使违反了 ELF 表的 JOIN 条件，我也希望显示 ROPT 表中的所有记录。

```
 SELECT   1      
   FROM   conf_raggr_opztar ropt,
           tar_opzioni_tariffarie opt,
           conf_raggruppamenti_forn rgf,
           conf_forniture_rel_ragg forg,
           conf_forniture forn,
           conf_elementi_fatturabili elf,
           tar_voci_fatturabili vof,
           base_fasce_orarie fas
   WHERE       ropt.opt_opzione_tariffaria_id = opt.opt_opzione_tariffaria_id
           AND rgf.rgf_raggruppamento_forn_id = ropt.rgf_raggruppamento_forn_id
           AND forg.rgf_raggruppamento_forn_id = rgf.rgf_raggruppamento_forn_id
           AND forg.forn_fornitura_id = forn.forn_fornitura_id
           AND forn.forn_fornitura_id = 'QJlXmOFZPF3eAlAG'
           AND elf.ROPT_RAGGR_OPZTAR_ID(+) = ropt.ropt_raggr_opztar_id
           AND elf.COID_CONTRATTUARIO_ID(+) = ropt.COID_CONTRATTUARIO_ID
           AND elf.ROPT_DATA_INI(+) = ropt.ROPT_DATA_INI
           AND elf.edw_partition = forn.EDW_PARTITION
           AND elf.elf_flag_ann(+) = 'N'
           And  elf.ELF_DATA_VER_FIN = to_date('31/12/9999','DD/MM/YYYY')
           AND elf.VOF_VOCE_FATTURABILE_ID = vof.VOF_VOCE_FATTURABILE_ID
           AND fas.FAS_FASCIA_ORARIA_ID = elf.FAS_FASCIA_ORARIA_ID
ORDER BY ELF_VERSIONE desc; 
```

***** ANSI JOIN VERSION (它就像第一个)

```
 SELECT   1
FROM CONF_RAGGR_OPZTAR ropt
   INNER JOIN TAR_OPZIONI_TARIFFARIE OPT
     ON (ropt.OPT_OPZIONE_TARIFFARIA_ID = opt.OPT_OPZIONE_TARIFFARIA_ID)
   INNER JOIN CONF_RAGGRUPPAMENTI_FORN rgf
     ON (rgf.RGF_RAGGRUPPAMENTO_FORN_ID = ropt.RGF_RAGGRUPPAMENTO_FORN_ID)
   INNER JOIN CONF_FORNITURE_REL_RAGG forg
     ON (forg.RGF_RAGGRUPPAMENTO_FORN_ID = rgf.RGF_RAGGRUPPAMENTO_FORN_ID)
   INNER JOIN CONF_FORNITURE forn
     ON (forg.FORN_FORNITURA_ID = forn.FORN_FORNITURA_ID)
   LEFT OUTER JOIN CONF_ELEMENTI_FATTURABILI elf
     ON (elf.ROPT_RAGGR_OPZTAR_ID = ropt.ROPT_RAGGR_OPZTAR_ID AND
         elf.COID_CONTRATTUARIO_ID = ropt.COID_CONTRATTUARIO_ID AND
         elf.ROPT_DATA_INI = ropt.ROPT_DATA_INI AND
         elf.EDW_PARTITION = forn.EDW_PARTITION)
--   LEFT OUTER JOIN TAR_VOCI_FATTURABILI vof
--     ON (elf.VOF_VOCE_FATTURABILE_ID = vof.VOF_VOCE_FATTURABILE_ID)
--   LEFT OUTER JOIN BASE_FASCE_ORARIE fas
--     ON (fas.FAS_FASCIA_ORARIA_ID = elf.FAS_FASCIA_ORARIA_ID)
   WHERE forn.FORN_FORNITURA_ID = 'QJlXmOFZPF3eAlAG' AND
         elf.ELF_FLAG_ANN = 'N' AND
         elf.ELF_DATA_VER_FIN = TO_DATE('31/12/9999','DD/MM/YYYY')
ORDER BY ELF_VERSIONE DESC; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:35:30.553

您需要了解您的查询

通过在 elf 的直接连接中放置 (+)，您已经成功提到“我不在乎 elf 是否有数据，我想显示 ropt 行”

```
 AND elf.ROPT_RAGGR_OPZTAR_ID(+) = ropt.ropt_raggr_opztar_id
  AND elf.COID_CONTRATTUARIO_ID(+) = ropt.COID_CONTRATTUARIO_ID
  AND elf.ROPT_DATA_INI(+) = ropt.ROPT_DATA_INI 
```

但是你没有意识到你也有一个间接连接

选择加入 rgf

```
AND rgf.rgf_raggruppamento_forn_id = ropt.rgf_raggruppamento_forn_id 
```

rgf 加入 forg，forn 加入 forn，最后 forn 加入 elf

```
AND forg.rgf_raggruppamento_forn_id = rgf.rgf_raggruppamento_forn_id
AND forg.forn_fornitura_id = forn.forn_fornitura_id
AND elf.edw_partition = forn.EDW_PARTITION 
```

所以join的循环间接地加入了elf to ropt。一种方法是为 elf 与 forn 进行外部连接，但最后了解您的要求然后连接表是有意义的。

- 编辑 -

正如所指出的，我们不能有 2 个外连接，一个（丑陋的）解决方法可能是这样的

```
SELECT   1      
   FROM   
           tar_opzioni_tariffarie opt,
           conf_raggruppamenti_forn rgf,
           conf_forniture_rel_ragg forg,
           conf_forniture forn,
           (
           select * from //or columns needed 
       conf_raggr_opztar ropt,
           conf_elementi_fatturabili elf where 
       elf.ROPT_RAGGR_OPZTAR_ID(+) = ropt.ropt_raggr_opztar_id
           AND elf.COID_CONTRATTUARIO_ID(+) = ropt.COID_CONTRATTUARIO_ID
           AND elf.ROPT_DATA_INI(+) = ropt.ROPT_DATA_INI
           ) elf_ropt,
           tar_voci_fatturabili vof,
           base_fasce_orarie fas
   WHERE       elf_ropt.opt_opzione_tariffaria_id = opt.opt_opzione_tariffaria_id
           AND rgf.rgf_raggruppamento_forn_id = elf_ropt.rgf_raggruppamento_forn_id
           AND forg.rgf_raggruppamento_forn_id = rgf.rgf_raggruppamento_forn_id
           AND forg.forn_fornitura_id = forn.forn_fornitura_id
           AND forn.forn_fornitura_id = 'QJlXmOFZPF3eAlAG'
           AND elf_ropt.edw_partition(+) = forn.EDW_PARTITION
           AND elf_ropt.elf_flag_ann(+) = 'N' //is this needed actually?
           And  elf_ropt.ELF_DATA_VER_FIN = to_date('31/12/9999','DD/MM/YYYY')
           AND elf_ropt.VOF_VOCE_FATTURABILE_ID = vof.VOF_VOCE_FATTURABILE_ID
           AND fas.FAS_FASCIA_ORARIA_ID = elf_ropt.FAS_FASCIA_ORARIA_ID
ORDER BY ELF_VERSIONE desc; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T11:31:35.557

我建议你学习和使用 ANSI 风格的连接运算符，如 INNER JOIN、LEFT OUTER JOIN 等。它们比将所有内容都放在 WHERE 子句中更清晰易懂。就你的陈述而言，我相信它可以改写如下：

```
SELECT 1
   FROM CONF_RAGGR_OPZTAR ropt
   INNER JOIN TAR_OPZIONI_TARIFFARIE OPT
     ON (ropt.OPT_OPZIONE_TARIFFARIA_ID = opt.OPT_OPZIONE_TARIFFARIA_ID)
   INNER JOIN CONF_RAGGRUPPAMENTI_FORN rgf
     ON (rgf.RGF_RAGGRUPPAMENTO_FORN_ID = ropt.RGF_RAGGRUPPAMENTO_FORN_ID)
   INNER JOIN CONF_FORNITURE_REL_RAGG forg
     ON (forg.RGF_RAGGRUPPAMENTO_FORN_ID = rgf.RGF_RAGGRUPPAMENTO_FORN_ID)
   INNER JOIN CONF_FORNITURE forn
     ON (forg.FORN_FORNITURA_ID = forn.FORN_FORNITURA_ID)
   LEFT OUTER JOIN CONF_ELEMENTI_FATTURABILI elf
     ON (elf.ROPT_RAGGR_OPZTAR_ID = ropt.ROPT_RAGGR_OPZTAR_ID AND
         elf.COID_CONTRATTUARIO_ID = ropt.COID_CONTRATTUARIO_ID AND
         elf.ROPT_DATA_INI = ropt.ROPT_DATA_INI AND
         elf.EDW_PARTITION = forn.EDW_PARTITION AND
         elf.ELF_FLAG_ANN = 'N' AND
         elf.ELF_DATA_VER_FIN = TO_DATE('31/12/9999','DD/MM/YYYY'))
   LEFT OUTER TAR_VOCI_FATTURABILI vof
     ON (elf.VOF_VOCE_FATTURABILE_ID = vof.VOF_VOCE_FATTURABILE_ID)
   LEFT OUTER BASE_FASCE_ORARIE fas
     ON (fas.FAS_FASCIA_ORARIA_ID = elf.FAS_FASCIA_ORARIA_ID)
   WHERE forn.FORN_FORNITURA_ID = 'QJlXmOFZPF3eAlAG'
   ORDER BY ELF_VERSIONE DESC; 
```

请注意，上面 WHERE 子句中的三个比较**可以**放入连接中 - 我将它们放在 WHERE 子句中以证明您可以这样做。我怀疑优化器会根据需要使用这些比较。

分享和享受。

- - 编辑

另请注意，将表“elf”的两个条件放在 WHERE 子句中会强制将“elf”视为已内连接。自我提醒：以后尽量少说教…… :-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T17:05:30.233

可能使用 ANSI JOIN 的[USING 构造](http://en.wikipedia.org/wiki/Join_%28SQL%29#Equi-join)和子查询将使您的查询更易于编写。

查看此示例，它应该可以让您的查询正常工作。

```
SELECT   1
FROM CONF_RAGGR_OPZTAR ropt
    JOIN TAR_OPZIONI_TARIFFARIE OPT using (OPT_OPZIONE_TARIFFARIA_ID)
    JOIN CONF_RAGGRUPPAMENTI_FORN rgf using (RGF_RAGGRUPPAMENTO_FORN_ID)
    JOIN CONF_FORNITURE_REL_RAGG forg using (RGF_RAGGRUPPAMENTO_FORN_ID)
    JOIN CONF_FORNITURE forn using (FORN_FORNITURA_ID)
    LEFT JOIN (
            select *
            from CONF_ELEMENTI_FATTURABILI 
            where ELF_FLAG_ANN = 'N' 
                AND ELF_DATA_VER_FIN = TO_DATE('31/12/9999','DD/MM/YYYY')
        ) elf using (ROPT_RAGGR_OPZTAR_ID,COID_CONTRATTUARIO_ID,ROPT_DATA_INI,EDW_PARTITION)
--   LEFT OUTER JOIN TAR_VOCI_FATTURABILI vof
--     ON (elf.VOF_VOCE_FATTURABILE_ID = vof.VOF_VOCE_FATTURABILE_ID)
--   LEFT OUTER JOIN BASE_FASCE_ORARIE fas
--     ON (fas.FAS_FASCIA_ORARIA_ID = elf.FAS_FASCIA_ORARIA_ID)
WHERE FORN_FORNITURA_ID = 'QJlXmOFZPF3eAlAG'
ORDER BY  elf.ELF_VERSIONE DESC; 
```

无论如何，如果您没有从 CONF_ELEMENTI_FATTURABILI 中选择任何列，为什么要在该表上进行外部联接？

是不是没意思？！！！您将获得相同的结果，但使用以下查询的重复项除外：

```
SELECT   1
FROM CONF_RAGGR_OPZTAR ropt
    JOIN TAR_OPZIONI_TARIFFARIE OPT using (OPT_OPZIONE_TARIFFARIA_ID)
    JOIN CONF_RAGGRUPPAMENTI_FORN rgf using (RGF_RAGGRUPPAMENTO_FORN_ID)
    JOIN CONF_FORNITURE_REL_RAGG forg using (RGF_RAGGRUPPAMENTO_FORN_ID)
    JOIN CONF_FORNITURE forn using (FORN_FORNITURA_ID)
--   LEFT OUTER JOIN TAR_VOCI_FATTURABILI vof
--     ON (elf.VOF_VOCE_FATTURABILE_ID = vof.VOF_VOCE_FATTURABILE_ID)
--   LEFT OUTER JOIN BASE_FASCE_ORARIE fas
--     ON (fas.FAS_FASCIA_ORARIA_ID = elf.FAS_FASCIA_ORARIA_ID)
WHERE FORN_FORNITURA_ID = 'QJlXmOFZPF3eAlAG'
ORDER BY  null DESC; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T09:14:19.923

如果我正确理解了您的问题，您想使用`LEFT JOIN`.

# c++ - 如何在 Qt GUI 应用程序中嵌入输出控制台窗口？

> ID：11825395
> 
> 赞同：1
> 
> 时间：2012-08-06T09:13:12.487
> 
> 标签：c++, c, qt, exec

我正在 Qt 中制作 GUI 程序，并以按钮的形式使用现成的命令行操作，例如，如果我们想使用 7z 独立 7z.exe 提取 zip，我们键入

`7z.exe -x -tzip a.zip`

我正在做这个的 GUI，那么我的问题是如何将黑色命令提示符样式的控制台嵌入到 Qt GUI 应用程序本身中以显示发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:26:20.550

使用**QProcess**：http: [//qt-project.org/doc/qt-4.8/qprocess.html#details](http://qt-project.org/doc/qt-4.8/qprocess.html#details)

（这是一个 180° 的编辑。你可以在历史上找到我的另一个答案……）

# android - 通过保存在sd卡中的android多个声音一起播放

> ID：11825396
> 
> 赞同：1
> 
> 时间：2012-08-06T09:13:13.837
> 
> 标签：android, audio, mixing

我正在开发一个应用程序，其中有一些工具。每个乐器都有一个独特的声音文件。现在我想做的是，如果我选择四种乐器，那么所有选定乐器的声音应该一起播放，混合的声音应该保存在 sd 卡中以备将来使用。我的声音文件可能是 WAV 或 MP3。找不到路。帮助我提前谢谢。

# android - 为什么在有足够的可用内存时会遇到“内存不足”？

> ID：11825399
> 
> 赞同：1
> 
> 时间：2012-08-06T09:13:29.990
> 
> 标签：android

最近，我正在开发一个用于图像浏览的应用程序。一种活动是在缩略图视图中浏览图像（活动 A）（一个列表视图和嵌套的一些网格视图），显示图像后，用户可以点击一张照片进入完整视图（活动 B），然后进入编辑视图（活动 C）。

Activity A里面有很多照片，所以内存占用增加了（我没有做缓存大小限制，40313k/42503k），然后我进入Activity B，释放Activity A上的所有缓存，可以看到内存在下降（26335K/ 42503K）。但是，当我进入活动 C 时，会发生内存不足的情况。我检查了内存大小，空闲内存仍然足够分配（52436K/65159K分配7680016字节）

顺便说一句，我看到了 Grow heap (frag case)，这是什么？会不会是这个原因？

任何人都可以帮忙吗？

下面是我的内存日志

```
08-06 16:59:15.861: D/dalvikvm(29566): GC_FOR_ALLOC freed 1350K, 9% free 19414K/21319K, paused 32ms
08-06 16:59:16.064: D/dalvikvm(29566): GC_FOR_ALLOC freed 1350K, 9% free 19414K/21319K, paused 31ms
08-06 16:59:16.275: D/dalvikvm(29566): GC_FOR_ALLOC freed 1350K, 9% free 19414K/21319K, paused 34ms
08-06 16:59:16.463: D/dalvikvm(29566): GC_FOR_ALLOC freed 1350K, 9% free 19415K/21319K, paused 24ms
08-06 16:59:16.861: D/dalvikvm(29566): GC_FOR_ALLOC freed 1073K, 8% free 19699K/21319K, paused 18ms
08-06 16:59:17.338: D/dalvikvm(2923): GC_EXPLICIT freed 75K, 5% free 15254K/16007K, paused 5ms+2ms
08-06 16:59:17.400: D/dalvikvm(29566): GC_FOR_ALLOC freed 954K, 5% free 20446K/21511K, paused 19ms
08-06 16:59:17.752: D/dalvikvm(29566): GC_FOR_ALLOC freed 482K, 5% free 21515K/22599K, paused 20ms
08-06 16:59:22.377: D/dalvikvm(29566): GC_FOR_ALLOC freed 578K, 5% free 22566K/23623K, paused 40ms
08-06 16:59:22.416: D/dalvikvm(29566): GC_FOR_ALLOC freed 82K, 5% free 23245K/24391K, paused 15ms
08-06 16:59:22.424: I/dalvikvm-heap(29566): Grow heap (frag case) to 24.459MB for 1756816-byte allocation
08-06 16:59:22.439: D/dalvikvm(29566): GC_FOR_ALLOC freed 0K, 5% free 24961K/26119K, paused 15ms
08-06 16:59:22.603: D/dalvikvm(29566): GC_FOR_ALLOC freed 91K, 5% free 26006K/27143K, paused 16ms
08-06 16:59:22.744: D/dalvikvm(29566): GC_FOR_ALLOC freed 383K, 5% free 26994K/28167K, paused 15ms
08-06 16:59:22.838: D/dalvikvm(29566): GC_FOR_ALLOC freed 333K, 5% free 27931K/29191K, paused 15ms
08-06 16:59:22.932: D/dalvikvm(29566): GC_FOR_ALLOC freed 352K, 4% free 28902K/30087K, paused 16ms
08-06 16:59:23.033: D/dalvikvm(29566): GC_FOR_ALLOC freed 369K, 4% free 29863K/30983K, paused 16ms
08-06 16:59:23.127: D/dalvikvm(29566): GC_FOR_ALLOC freed 358K, 4% free 30808K/32007K, paused 16ms
08-06 16:59:23.221: D/dalvikvm(29566): GC_FOR_ALLOC freed 316K, 4% free 31764K/32903K, paused 16ms
08-06 16:59:23.322: D/dalvikvm(29566): GC_FOR_ALLOC freed 359K, 4% free 32847K/33927K, paused 16ms
08-06 16:59:23.416: D/dalvikvm(29566): GC_FOR_ALLOC freed 367K, 4% free 33798K/34951K, paused 17ms
08-06 16:59:23.510: D/dalvikvm(29566): GC_FOR_ALLOC freed 380K, 4% free 34875K/35975K, paused 17ms
08-06 16:59:23.619: D/dalvikvm(29566): GC_FOR_ALLOC freed 394K, 3% free 35951K/36999K, paused 17ms
08-06 16:59:29.392: D/dalvikvm(29566): GC_FOR_ALLOC freed 530K, 4% free 36919K/38087K, paused 19ms
08-06 16:59:29.486: D/dalvikvm(29566): GC_FOR_ALLOC freed 1127K, 6% free 36575K/38599K, paused 17ms
08-06 16:59:29.494: I/dalvikvm-heap(29566): Grow heap (frag case) to 37.010MB for 1267216-byte allocation
08-06 16:59:29.510: D/dalvikvm(29566): GC_FOR_ALLOC freed 127K, 6% free 37686K/39879K, paused 17ms
08-06 16:59:29.635: D/dalvikvm(29566): GC_FOR_ALLOC freed 638K, 4% free 38582K/39879K, paused 18ms
08-06 16:59:29.713: D/dalvikvm(29566): GC_FOR_ALLOC freed 1110K, 6% free 38246K/40263K, paused 17ms
08-06 16:59:29.721: I/dalvikvm-heap(29566): Grow heap (frag case) to 39.577MB for 2246416-byte allocation
08-06 16:59:29.752: D/dalvikvm(29566): GC_CONCURRENT freed 127K, 6% free 40313K/42503K, paused 2ms+3ms
08-06 16:59:39.963: D/dalvikvm(29566): GC_EXPLICIT freed 14180K, 39% free 26335K/42503K, paused 3ms+6ms
08-06 16:59:40.010: D/dalvikvm(29566): GC_FOR_ALLOC freed 3581K, 47% free 22844K/42503K, paused 21ms
08-06 16:59:40.017: I/dalvikvm-heap(29566): Grow heap (frag case) to 29.722MB for 7680016-byte allocation
08-06 16:59:40.064: D/dalvikvm(29566): GC_CONCURRENT freed 1K, 29% free 30342K/42503K, paused 2ms+8ms
08-06 16:59:51.111: D/dalvikvm(29566): GC_FOR_ALLOC freed 1803K, 33% free 28613K/42503K, paused 32ms
08-06 16:59:51.127: I/dalvikvm-heap(29566): Grow heap (frag case) to 35.355MB for 7680016-byte allocation
08-06 16:59:51.182: D/dalvikvm(29566): GC_CONCURRENT freed 4K, 28% free 36108K/50055K, paused 2ms+3ms
08-06 16:59:51.392: D/dalvikvm(29566): GC_FOR_ALLOC freed 32K, 28% free 36077K/50055K, paused 16ms
08-06 16:59:51.408: I/dalvikvm-heap(29566): Grow heap (frag case) to 42.644MB for 7680016-byte allocation
08-06 16:59:51.455: D/dalvikvm(29566): GC_CONCURRENT freed <1K, 25% free 43577K/57607K, paused 2ms+8ms
08-06 16:59:51.549: D/dalvikvm(29566): GC_FOR_ALLOC freed 7507K, 38% free 36091K/57607K, paused 23ms
08-06 16:59:51.557: I/dalvikvm-heap(29566): Grow heap (frag case) to 38.629MB for 3456016-byte allocation
08-06 16:59:51.619: D/dalvikvm(29566): GC_CONCURRENT freed 1K, 32% free 39464K/57607K, paused 2ms+3ms
08-06 16:59:51.682: D/dalvikvm(29566): GC_FOR_ALLOC freed 0K, 32% free 39465K/57607K, paused 17ms
08-06 16:59:51.697: I/dalvikvm-heap(29566): Grow heap (frag case) to 44.488MB for 6144016-byte allocation
08-06 16:59:51.728: D/dalvikvm(29566): GC_CONCURRENT freed 0K, 22% free 45465K/57607K, paused 1ms+3ms
08-06 16:59:51.900: D/dalvikvm(29566): GC_CONCURRENT freed 3717K, 25% free 43685K/57607K, paused 2ms+5ms
08-06 16:59:51.947: D/dalvikvm(29566): GC_FOR_ALLOC freed 710K, 24% free 43965K/57607K, paused 21ms
08-06 16:59:51.971: I/dalvikvm-heap(29566): Grow heap (frag case) to 50.348MB for 7680016-byte allocation
08-06 16:59:51.978: D/dalvikvm(968): GC_CONCURRENT freed 409K, 4% free 14423K/14983K, paused 1ms+1ms
08-06 16:59:52.025: D/dalvikvm(29566): GC_CONCURRENT freed <1K, 22% free 51465K/65159K, paused 1ms+9ms
08-06 16:59:52.127: D/dalvikvm(194): GC_EXPLICIT freed 983K, 19% free 20609K/25415K, paused 2ms+5ms
08-06 17:00:00.541: D/dalvikvm(29566): GC_FOR_ALLOC freed 531K, 20% free 52444K/65159K, paused 43ms
08-06 17:00:00.541: I/dalvikvm-heap(29566): Forcing collection of SoftReferences for 7680016-byte allocation
08-06 17:00:00.572: D/dalvikvm(29566): GC_BEFORE_OOM freed 7K, 20% free 52436K/65159K, paused 27ms
08-06 17:00:00.572: E/dalvikvm-heap(29566): Out of memory on a 7680016-byte allocation.    08-06 17:00:00.572: I/dalvikvm(29566): "Thread-1522" prio=5 tid=16 RUNNABLE
08-06 17:00:00.572: I/dalvikvm(29566):   | group="main" sCount=0 dsCount=0 obj=0x41c68058 self=0x3dc118
08-06 17:00:00.572: I/dalvikvm(29566):   | sysTid=29653 nice=0 sched=0/0 cgrp=default handle=4048232
08-06 17:00:00.572: I/dalvikvm(29566):   | schedstat=( 0 0 0 ) utm=4 stm=0 core=0
08-06 17:00:00.572: I/dalvikvm(29566):   at android.graphics.Bitmap.nativeCopy(Native Method)
08-06 17:00:00.572: I/dalvikvm(29566):   at android.graphics.Bitmap.copy(Bitmap.java:403)
08-06 17:00:00.572: I/dalvikvm(29566):   at com.mtn.atc.photoedit.PhotoEditor.applyEffect2Bitmap(PhotoEditor.java:627)
08-06 17:00:00.572: I/dalvikvm(29566):   at com.mtn.atc.photoedit.PhotoEditor.access$21(PhotoEditor.java:624)
08-06 17:00:00.572: I/dalvikvm(29566):   at com.mtn.atc.photoedit.PhotoEditor$2.run(PhotoEditor.java:613)
08-06 17:00:00.572: W/dalvikvm(29566): threadid=16: thread exiting with uncaught exception (group=0x40a521f8) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:27:32.493

如果没有代码，我只能想象总体而言，您通常只是使用了太多的内存。

1）您是否在活动 A 中使用适配器视图（如列表视图），因此仅加载可见缩略图。2) 如果您正在加载完整图像并将它们缩小为缩略图，则在 Activity A 中加载完整大小的图像时使用比例因子是值得的。

[http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html)

具体[http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inSampleSize](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inSampleSize)

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inSampleSize = 4;

Bitmap thumb = BitmapFactory.decodeFile(path, options); 
```

这将显着减少 Activity A 的内存使用量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T15:47:29.977

当似乎有足够的空闲堆时分配失败可能是由内存碎片引起的，如[here](https://stackoverflow.com/questions/6892676/android-bitmap-limit-preventing-java-lang-outofmemory)。`android:largeHeap="true"`如果您的目标是 Android 3.0 或更高版本，添加到`AndroidManifest.xml`文件以尝试增加堆大小限制可能会有所帮助，但这不是一个非常可靠的解决方案，并且无论如何也不会消除碎片。

相反，我建议创建一个静态位图池，供新图像重用。

# java - 如何按子句顺序指定运算符？

> ID：11825402
> 
> 赞同：1
> 
> 时间：2012-08-06T09:13:35.240
> 
> 标签：java, mysql, hibernate, jpa, jpa-2.0

我有以下查询（使用 jpa 2.0）：

```
String query = "
SELECT p.id, p.name 
FROM package p
ORDER BY (p.id = :idPackage) DESC, (p.mPrice+p.vPrice) DESC 
LIMIT 10 ";

query.setParameter("idPackage", idPackage);
query.getResultList(); 
```

其中包具有以下属性：

```
Package
 - id
 - name
 - mPrice
 - vPrice
 - duration 
```

在 JPA 查询中，当我尝试执行它时，它会抱怨 ORDER BY 子句中的“=”运算符。有什么办法可以绕过吗？？

这是我得到的例外：

`org.springframework.dao.InvalidDataAccessApiUsageException: org.hibernate.hql.internal.ast.QuerySyntaxException: unexpected AST node:`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:25:04.230

您不能在`order by`JPA 查询中使用 '=' in 子句。如果你真的需要，你可以`createNativeQuery`改用`createQuery`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:15:08.790

您需要使用`=`which 是比较运算符：

```
SELECT p.id, p.name 
FROM package p
ORDER BY (p.id = idPackage) DESC, (p.mPrice+p.vPrice) DESC 
LIMIT 10; 
```

编辑：尝试：

```
String query = "
SELECT p.id, p.name 
FROM package p
ORDER BY (p.id = idPackage) DESC, (p.mPrice+p.vPrice) DESC 
LIMIT 10 "; 
```

# java - PrefsLoadTask 中的错误（Tutorial #13 ver.38）

> ID：11825404
> 
> 赞同：0
> 
> 时间：2012-08-06T09:13:45.587
> 
> 标签：java, android, commonsware

我在 ModelFragment.java 中收到以下 3 个错误：

```
The method doInBackGround(Context...) of type ModelFragment.PrefsLoadTask must override      or implement a supertype method

The type ModelFragment.PrefsLoadTask must implement the inherited abstract method AsyncTask<Context,Void,Void>.doInBackground(Context...)   

Void methods cannot return a value 
```

这是我的源代码：

```
private class PrefsLoadTask extends AsyncTask<Context, Void, Void> {
    SharedPreferences localPrefs=null;

    @Override
    protected void doInBackGround(Context... ctxt) {
        localPrefs=PreferenceManager.getDefaultSharedPreferences(ctxt[0]);
        localPrefs.getAll();

        return(null);
    }

    @Override
    public void onPostExecute(Void Arg0) {
        ModelFragment.this.prefs=localPrefs;
        ModelFragment.this.prefsTask=null;
        deliverModel();
    }
} 
```

据我所知，代码就像书中的一样。我也浏览了我在本章中输入的所有代码。你能看出她有什么错误吗？在本章的第 5 步之后，应用程序运行正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:38:30.477

> 据我所见，代码就像书中的一样

不它不是。是`doInBackground()`，不是`doInBackGround()`（注意 的情况`g`）。此外，返回类型必须是`Void`，而不是`void`（注意 的大小写`V`）。

# c++ - 如何在C中将零存储为数组数据

> ID：11825409
> 
> 赞同：0
> 
> 时间：2012-08-06T09:14:00.687
> 
> 标签：c++

我有一个数组，我想在其中存储像 1203 这样的值

```
 char* arr= new char[10];
    arr[0] = 1;
    arr[1] = 2;
    arr[2] = 0;
    arr[3] = 3; 
```

但是在存储 0 之后，我无法看到任何进一步的数据 bcs，它会将其视为数据的结尾。有什么办法可以管理这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:15:20.967

您将整数存储在字符数组中。尝试这样的事情：

```
char* arr= new char[10];
arr[0] = '1';
arr[1] = '2';
arr[2] = '0';
arr[3] = '3'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T09:18:51.030

你的语法是 C++。但是，不管这一点，你可以`snprintf`用来存储你的数据：

```
snprintf(arr, 10, "%d", 1203); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T09:40:06.237

你说你“无法看到任何进一步的数据”，但你没有描述你正在做什么来查看数据。您是否使用 printf 和 %s 格式打印它？您是否在调试器中显示它？

当您对 char 数据使用字符串操作时，零通常表示字符串的结尾。将 %s 与 printf 一起使用或使用 strcpy 或 strlen 时，这是正确的。但是，可以对 char 数组进行数值处理。之后`arr[3] = 3;`，3存储在arr[3]中，看一眼就知道了。

您可以使用带有 printf 的 %d 格式将 char 数据打印为十进制数字。%d 打印一个数字，因此您需要传递一个数字来打印，例如 arr[0]、arr[3] 或循环中的 arr[i]。这与 %s 不同，后者将指针（例如数组，它变成指向第一个元素的指针）传递给 printf，它会打印多个字符。

如果您正在使用调试器查看 char 数组，您可能会单独查看 arr[3] 以查看它包含 3。您的调试器可能有办法将 char 数组显示为十进制数字序列，而不是作为一个字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T10:52:47.573

`0`表示`char*`.

因为`char*`是 C 中的字符串，它的存在是为了用作 char 数组而不是`integer`数组。与字符串相关的所有函数都旨在与字符​​串一起使用。

您可以使用`int*`来存储`integer`s。

您可以像这样手动执行二进制操作：

```
int value = 1245; 

char* temp = new char[4]; 

temp[0] = (char)(value >> 24);
temp[1] = (char)(value >> 16);
temp[2] = (char)(value >> 8); 
temp[3] = (char)value;

return temp; 
```

您可以使用`uint8_t`or`int`代替`char`.

`(char*)((int)value)`不好，因为您将转换`int`为`char*`，但`char*`是变量`temp`而不是要存储的数字`temp`。

如果指针对您来说是一个新事物，那么做一些指针练习会很有帮助：操作数组、列表、...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T09:17:08.070

我认为你应该把它写成：

```
char* arr= new char[10];
arr[0] = '1';
arr[1] = '2';
arr[2] = '0';
arr[3] = '3'; 
```

这样您就不需要使用表示终止的零值，如 Aamir 所说

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-06T09:22:32.310

大多数调试器工具会注意到它正在显示一个字符数组。from of data 在 C 中通常用作以空字符结尾的字符串的存储。

一个以空结尾的字符串，如果命名不够充分，是一堆字符（可打印或不可打印），以零结尾。该标记告诉 printf 什么时候停止打印。

它还告诉调试器使用的函数停止打印。为避免这种情况，您应该告诉调试器“这不是字符串，傻瓜！” 或者干脆重新声明为short。

你很想成为一个初学者，所以接受这个建议：忘记整数，使用短或长。int 大小取决于机器，稍后它会让你陷入“我认为它是 Xbits”的麻烦。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-06T09:34:51.097

您可以在 Unix 平台上使用 write：

```
man 2 write; 
```

此功能允许您指定要打印的元素的长度。

但可以肯定的是，`snprintf`它是一种便携式解决方案（因为`size_t`尺寸允许您这样做）。

这样做要小心，以免出现段错误。

注意：您可以将 char 设置为 or 之类的值`0`，`255`或者如果它是 a 则使用负值`signed char`...您可以将其设置为`0`、 或`48`，没有区别。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-06T10:06:00.793

**字符* arr=新字符[10]；**

正如您已经定义了字符数组，当您将 0 分配给任何数组成员并传递整个数组或打印数组时，将其作为数据结束的原因是因为 0 实际上是 NULL 并且每个字符串都以 NULL 终止。因此，如果您真的想分配字符 0 的值，那么您可以分配 0 或 '0' 的 ascii 值。

希望能帮助到你

# android - 显示系统面板时回调 Android 应用程序

> ID：11825417
> 
> 赞同：1
> 
> 时间：2012-08-06T09:14:21.357
> 
> 标签：android, callback, system, panel

我在 HTC One X stock 4.0.3 ROM 上运行我的测试应用程序。

当我长按“电源”时，我有一个系统面板“电话选项”，我可以在其中选择“关机”、“飞行模式”或“重启”。实际上，这就是我们在任何 Android 手机上所拥有的。

这里的问题是我的活动没有收到“onPause”回调。而且我无法停止线程和其他预先停止的工作人员。

当任何系统面板（停用）激活时是否可以进行回调？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:48:39.410

将在弹出任何系统对话框之前抛出广播 ACTION_CLOSE_SYSTEM_DIALOGS。所以你可以使用这个意图注册一个接收者

```
registerReceiver(reciever, new IntentFilter(Intent.ACTION_CLOSE_SYSTEM_DIALOGS)); 
```

此 Intent 有一个标志 FLAG_RECEIVER_REGISTERED_ONLY，因此如果您使用 Manifest 文件注册，您将无法接收此广播。所以你将不得不使用 registerReciever。这也可能在其他情况下抛出。这只能在激活系统对话框时使用，不确定是否停用

# .htaccess - htaccess 重写 - 完全不同的路径

> ID：11825418
> 
> 赞同：1
> 
> 时间：2012-08-06T09:14:22.580
> 
> 标签：.htaccess

我有以下 htaccess 重写问题：

我有一个像 www.example.org 这样的域，文件在 /var/www/www.example.org/

现在我需要将 www.example.org/b/w/ 中的每个站点重写为 /var/www/www.anothersite.org/b/w/ 我不知道该怎么做，这可能吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:20:01.277

您可以在文档根目录之外重写，但可以重定向（它会更改浏览器地址栏中的 URL）：

```
RewriteEngine On
RewriteRule ^/?b/w/(.*)$ http://www.anothersite.org/b/w/$1 [R=301,L] 
```

或者

```
Redirect 301 /b/w/ http://www.anothersite.org/b/w/ 
```

如果您需要地址栏保持不变，则可以使用 mod_proxy（如果已启用）：

```
RewriteEngine On
RewriteRule ^/?b/w/(.*)$ http://www.anothersite.org/b/w/$1 [P,L] 
```

或者，如果您有权访问服务器或虚拟主机配置，只需创建一个别名：

```
Alias /b/w/ /var/www/www.anothersite.org/b/w/ 
```

或者最坏的情况，只是符号链接`/var/www/www.example.org/b/w/`到`/var/www/www.anothersite.org/b/w/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:21:04.877

```
RewriteEngine On
RewriteRule ^b/([w]+) http://www.anothersite.org/b/w/$1 [L,NC] 
```

应该这样做:)

# asp.net - 即使没有过期，浏览器也不会发送 cookie

> ID：11825424
> 
> 赞同：0
> 
> 时间：2012-08-06T09:15:06.697
> 
> 标签：asp.net, cookies

这是我在表单身份验证时面临的一个奇怪问题。我正在使用谷歌浏览器。用户通过身份验证后，将在客户端计算机上保存一个 cookie。目前到期日是今天前 1 天。但是当我尝试加载页面时，实际上并没有 cookie 发送到服务器。

这不会立即发生，而是在一段时间后发生。我不确定这里可以提供哪些更多信息？请让我知道是否需要其他东西来调试问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:18:38.783

也许尝试在其中包含点的 cookie 域：`.yourdomain.com`如果您使用 www 访问，如果您指定不带点，则不会发送 cookie。

# javascript - jQuery fullcalendar 未在 IE9 中显示事件

> ID：11825425
> 
> 赞同：1
> 
> 时间：2012-08-06T09:15:07.380
> 
> 标签：javascript, jquery, fullcalendar

我试图让 jQuery fullcalendar 在 IE9 中工作。到目前为止，它在 Firefox 和 Chrome 中运行良好。我 100% 确定我在任何对象的末尾都没有逗号。

IE 的开发者控制台没有显示任何错误，完成了请求并显示了与 FF/Chrome 完全相同的 JSON 响应（多行格式以提高可读性）：

```
[
    {
        "beschreibung":"",
        "end":"2012-07-05 19:00:00",
        "username":"dm",
        "ort":"hier",
        "allDay":"",
        "id":"763-1340202369",
        "title":"termin für den nächsten monat",
        "start":"2012-07-05 17:00:00"
    },{
        "beschreibung":"dfgsfdg",
        "end":"2012-07-31 12:00:00",
        "username":"dm",
        "ort":"",
        "allDay":"",
        "id":"UBePvX8AAQEAACyIg",
        "title":"termin für heute",
        "start":"2012-07-31 10:00:00"
    }
] 
```

这是我的代码：

```
$o = {
    calOptions: { unselectCancel:'.calEdit', theme: true, buttonText: { today:'Heute', month:'Monat', week:'Woche', day:'Tag' }, monthNames: ['Januar','Februar','März','April','Mai','Juni','Juli','August','September','Oktober','November','Dezember'], dayNames: ['Sonntag','Montag','Dienstag','Mittwoch','Donnerstag','Freitag','Samstag'], dayNamesShort: ['So','Mo','Di','Mi','Do','Fr','Sa'], timeFormat: 'H(:mm)', axisFormat: 'H(:mm):00', header: { left:'prev,next today', center:'title', right:'month,agendaWeek,agendaDay' }, editable: true, allDayText: 'Ganztägig', firstDay: 1, firstHour: 8, allDaySlot: false, allDayDefault:false }
}    

$('#db .fullCalendar').fullCalendar(
    $.extend(
        $o.calOptions, {
            events: {
                url: 'c.pl',
                type: 'POST',
                data: {
                    j: 'json',
                    x: 'c'
                },
                error: function(){

                }
            }
        }
    )
); 
```

现在这是我根本没有得到的东西。当我将事件对象设置为 JSON 响应时，IE9 可以显示它们：

```
$('#db .fullCalendar').fullCalendar(
    $.extend(
        $o.calOptions, {
            events: [{"beschreibung":"","end":"2012-07-05 19:00:00","username":"dm","ort":"hier","allDay":"","id":"763-1340202369","title":"termin für den nächsten monat","start":"2012-07-05 17:00:00"},{"beschreibung":"dfgsfdg","end":"2012-07-31 12:00:00","username":"dm","ort":"","allDay":"","id":"UBePvX8AAQEAACyIg","title":"termin für heute","start":"2012-07-31 10:00:00"}]
        }
    )
); 
```

有什么想法可能是错的吗？我不知道在哪里继续搜索......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-03T02:06:32.170

我一直在使用带有 IE9 的 Fullcalendar v1.5.4 并且事件不会出现在日历上（ajax 源）。但是由于一些我不太明白的奇怪原因，打开开发工具栏（F12）然后刷新页面会使事件出现。

这可以用作临时修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:27:03.167

确保将响应内容类型设置为

```
application/json 
```

**编辑**

我认为选项对象结构不正确
替换这个

```
 $o = {
     calOptions: {
         unselectCancel: '.calEdit',
         theme: true,
         buttonText: {
             today: 'Heute',
             month: 'Monat',
             week: 'Woche',
             day: 'Tag'
         },
         monthNames: ['Januar', 'Februar', 'März', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'],
         dayNames: ['Sonntag', 'Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag'],
         dayNamesShort: ['So', 'Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa'],
         timeFormat: 'H(:mm)',
         axisFormat: 'H(:mm):00',
         header: {
             left: 'prev,next today',
             center: 'title',
             right: 'month,agendaWeek,agendaDay'
         },
         editable: true,
         allDayText: 'Ganztägig',
         firstDay: 1,
         firstHour: 8,
         allDaySlot: false,
         allDayDefault: false
     }
 } 
```

有了这个

```
$o = {
    unselectCancel: '.calEdit',
    theme: true,
    buttonText: {
        today: 'Heute',
        month: 'Monat',
        week: 'Woche',
        day: 'Tag'
    },
    monthNames: ['Januar', 'Februar', 'März', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'],
    dayNames: ['Sonntag', 'Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag'],
    dayNamesShort: ['So', 'Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa'],
    timeFormat: 'H(:mm)',
    axisFormat: 'H(:mm):00',
    header: {
        left: 'prev,next today',
        center: 'title',
        right: 'month,agendaWeek,agendaDay'
    },
    editable: true,
    allDayText: 'Ganztägig',
    firstDay: 1,
    firstHour: 8,
    allDaySlot: false,
    allDayDefault: false
} 
```

# mysql - 通过一个 select 语句使用两个 group by

> ID：11825427
> 
> 赞同：5
> 
> 时间：2012-08-06T09:15:11.177
> 
> 标签：mysql, select, group-by

我有两张桌子

1.  日期与列 id、年、月
2.  具有列 id、金额、类型、收入、工具的交易

类型只能是借记卡或贷记卡，工具可以是信用卡等任何方法。

我需要的是查询选择年份、月份、类型、工具以及按类型和工具分组的“金额”总和以及按年份和月份分组的收入总和。

我可以使用两个不同的查询来获取值

例子：

得到按年和月分组的收入总和：

```
 select sum(T.income) as total
    from transaction as T, date as D
   where D.id = T.id
group by D.month, D.year) 
```

并获得其他值：

```
 select D.year, D.month,
         T.type, T.instrument, sum(T.amount) as sumAmount,T.income
    from date as D, transaction as T 
   where D.id=T.id,
group by T.instrument, T.type 
```

但我需要通过一个查询来完成它。还有其他方法可以检索此数据集吗？是否可以在同一个 select 语句中以两种方式使用 group by？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-06T09:30:37.923

这是你要找的那个吗？

```
SELECT tableA.ID, tableA.`Year`, tableA.`Month`,  
       tableA.`Type`, tableA.instrument, 
       tableA.totalAmount, tableB.totalInstrument
FROM
(
    SELECT  a.ID, a.`Year`, a.`Month`, 
            b.`Type`, b.instrument, 
            SUM(b.`amount`) totalAmount
    FROM    `date` a
                INNER JOIN `transactions` b
                    ON a.ID = b.id
    GROUP BY b.`Type
) tableA
INNER JOIN
(
    SELECT  a.ID, a.`Year`, a.`Month`, 
            b.`Type`, b.instrument, 
            SUM(b.`instrument`) totalInstrument
    FROM    `date` a
                INNER JOIN `transactions` b
                    ON a.ID = b.id
    GROUP BY a.`Year`, a.`Month`
) tableB ON tableA.ID = tableB.ID AND
            tableA.`Year` = tableB.`Year` AND
            tableA.`Month` = tableB.`Month` 
```

第一*个子查询是通过获取金额的总和，*第二*个子查询是获取仪器的总和*。他们的结果将被连接起来，以便连续获得 totalAmount 和 totalInstrument。

# android - Phonegap 构建：无 Android xhdpi 图标，使用默认值

> ID：11825431
> 
> 赞同：0
> 
> 时间：2012-08-06T09:15:20.823
> 
> 标签：android, cordova, icons

我已经尝试了一段时间，但仍然是 xhdpi Android 设备的默认图标。如果我查看 apk，问题是在 res/drawable 和 res/drawable-xhdpi 中仍然使用 Phonegap 默认图标。

我的 config.xml：

```
<icon src="icon.png" width="96" height="96" />
<icon src="icons/ios/icon.png" width="57" height="57" />
<icon src="icons/ios/icon-72.png" gap:platform="ios" width="72" height="72" />
<icon src="icons/ios/icon_at_2x.png" width="114" height="114" />
<icon src="icons/android/ldpi.png" gap:platform="android" gap:density="ldpi" width="36" height="36"/>
<icon src="icons/android/mdpi.png" gap:platform="android" gap:density="mdpi" width="48" height="48"/>
<icon src="icons/android/hdpi.png" gap:platform="android" gap:density="hdpi" width="72" height="72"/>
<icon src="icons/android/xdpi.png" gap:platform="android" gap:density="xhdpi" width="96" height="96"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-14T09:42:30.090

好吧实际上phonegap仍然有加载xhdpi图标的问题。（状态 10/04/14）

解决方法是：

```
<!-- ldpi --> 
<icon src="resources/images/icons/android/icon-36.png"  gap:platform="android" width="36" height="36" />
<icon src="resources/images/icons/android/icon-48.png"  gap:platform="android" gap:density="ldpi" /> 
<!-- mdpi --> 
<icon src="resources/images/icons/android/icon-48.png"  gap:platform="android" width="48" height="48" /> 
<icon src="resources/images/icons/android/icon-72.png"  gap:platform="android" gap:density="mdpi" /> 
<!-- hdpi --> 
<icon src="resources/images/icons/android/icon-72.png"  gap:platform="android" width="72" height="72" /> 
<icon src="resources/images/icons/android/icon-96.png"  gap:platform="android" gap:density="hdpi" /> 
<!-- xhdpi --> 
<icon src="resources/images/icons/android/icon-96.png"  gap:platform="android" width="96" height="96" /> 
<icon src="resources/images/icons/android/icon-114.png" gap:platform="android" gap:density="xhdpi" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-28T05:12:20.703

首先，您必须尝试错误的文件路径（尝试`cordova prepare android --verbose`查找错误）。然后按如下方式设置您的文件：

图标：

```
<icon gap:platform="android" gap:density="ldpi" width="36" height="36" src="www/assets/images/icon/android/ic_launcher_ldpi.png" />
<icon gap:platform="android" gap:density="mdpi" width="48" height="48" src="www/assets/images/icon/android/ic_launcher_mdpi.png" />
<icon gap:platform="android" gap:density="hdpi" width="72" height="72" src="www/assets/images/icon/android/ic_launcher_hdpi.png" />
<icon gap:platform="android" gap:density="xhdpi" width="96" height="96" src="www/assets/images/icon/android/ic_launcher_xhdpi.png" />
<icon gap:platform="android" gap:density="xxhdpi" width="114" height="114" src="www/assets/images/icon/android/ic_launcher_xxhdpi.png" /> 
```

溅：

```
<splash gap:platform="android" gap:density="ldpi" src="www/assets/images/splash/android/screen-ldpi-portrait.png" />
<splash gap:platform="android" gap:density="mdpi" src="www/assets/images/splash/android/screen-mdpi-portrait.png" />
<splash gap:platform="android" gap:density="hdpi" src="www/assets/images/splash/android/screen-hdpi-portrait.png" />
<splash gap:platform="android" gap:density="xhdpi" src="www/assets/images/splash/android/screen-xhdpi-portrait.png" />
<splash gap:platform="android" gap:density="xxhdpi" src="www/assets/images/splash/android/screen-xxhdpi-portrait.png" /> 
```

**注意：**它适用于 phonegap@5.1.1 / cordova@5.3.1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T12:56:15.593

显然已于 8 月 17 日修复：[https ://github.com/phonegap/build/issues/9](https://github.com/phonegap/build/issues/9)

一半对我有用，显示了一个更好的图标，但似乎正在使用 hdpi 图标？

# sharepoint - 在使用 PowerShell 激活功能时阅读有关 FeatureActivated 事件的 web.config

> ID：11825435
> 
> 赞同：4
> 
> 时间：2012-08-06T09:15:35.713
> 
> 标签：sharepoint, powershell, web-config

在 FeatureActivated 事件（WebApplication scoped）上，我想读取 web.config 以从那里获取连接字符串。我使用以下代码打开 web.config：

```
Configuration rootWebConfig = WebConfigurationManager.OpenWebConfiguration("/", webApplication.Name); 
```

当我通过 Web 界面激活该功能时，一切正常，但是当我尝试通过 PowerShell(Enable-SPFeature) 执行相同操作时，代码失败。据我所见，代码从路径 C:\inetpub\wwwroot\web.config（不存在）而不是 C:\inetpub\wwwroot\wss\VirtualDirectories\\web.config 打开了错误的 web.config。

有人可以给我解决这个问题的任何方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:45:43.800

我找到了满足我要求的解决方法。与您分享，以防有帮助：

```
 using (SPWeb web = properties.Feature.Parent as SPWeb)
        {
            SPWebApplication webApp = web.Site.WebApplication;
            Configuration config = WebConfigurationManager.OpenWebConfiguration("/", webApp.Name);
            // App settings are retrieved this way
            config.AppSettings.Settings["someAppSettingKey"].Value;

            // Connection string settings are retrieved this way
            config.ConnectionStrings.ConnectionStrings["someDBConnectionString"].ConnectionString
            web.Site.Dispose();
        } 
```

# sql - Rails - 如何从产品类别中获取所有制造商？

> ID：11825438
> 
> 赞同：1
> 
> 时间：2012-08-06T09:15:44.810
> 
> 标签：sql, ruby-on-rails, ruby, activerecord, join

我有`Category`模型，在哪里放置产品。每个产品都属于制造商（也有没有设置制造商的产品——这些我想标记为“未知”）。

这是我的模型：

```
class Product < ActiveRecord::Base
  belongs_to :manufacturer
  belongs_to :category
end

class Manufacturer < ActiveRecord::Base
  has_many :products
end

class Category < ActiveRecord::Base
  has_ancestry
  has_many :products
end 
```

这是一个简单的查询，我如何从各个类别中获取产品：

```
@products = @category.products.paginate(:page => params[:page], :per_page => 15) 
```

我想打印所有具有相应类别产品的制造商...我在这部分苦苦挣扎了半天，仍然找不到查询...

你能帮我吗，拜托，这部分？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:38:33.397

将此添加到您的类别模型中：

```
has_many :manufacturers, :through => :products 
```

然后你可以打电话

```
@category.manufacturers 
```

有关该选项的更多信息，请查看[has_many的文档。](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many)`through`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T09:27:12.743

你可以试试这个：

```
Manufacturer.where(id: @category.products.map(&:manufacturer_id).uniq) 
```

或者我们可以依靠数据库来获取唯一值，这在大表上应该更快：

```
Manufacturer.where(id: Product.select("DISTINCT manufacturer_id").
  where(category: @category).map(&:manufacturer_id)) 
```

`pluck`我们可以通过使用rails >= 3.2.1 中的方法来简化这一点：

```
Manufacturer.where(id: Product.uniq.where(category_id: @category.id).
  pluck(:manufacturer_id)) 
```

* * *

我还想补充一点`has_many :manufacturers, :through => :products`，由于加入（根据我的经验），大数据上的解决方案可能会慢一些。

# java - 是否可以在多模块项目中将 ear 模块定义为父模块？

> ID：11825443
> 
> 赞同：1
> 
> 时间：2012-08-06T09:16:01.860
> 
> 标签：java, maven, ear, pom.xml, multi-module

是否可以在多模块项目中将 ear 模块定义为父模块？

我有以下项目结构。

*   Module EAR-1 是 ModuleA 和 ModuleB 的聚合
*   Module EAR-2 是 ModuleA 和 ModuleC 的聚合

他们都应该产生耳朵来部署。

我不想为父模块创建一个虚拟模块。我想将全局依赖项和配置打包到现有项目中。

哪个模块/pom 是放置所有这些一般信息的正确模块。这个 pom 将成为我的父母 pom。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:31:59.660

看来您有两个不同的问题。

1.  模块 A、B 和 C 在 2 个项目中部分重复使用。
2.  您想通过一个管理 2 个耳朵项目（EAR 1 和 2）。

我想 A 是一个罐子（提供服务或公共类），而 B 和 C 是战争，不是吗？

如果项目真的联系在一起，我的意思是你一起构建它们，同时交付它们，当你推广一个版本时，你在所有项目上都这样做，我会推荐以下结构。我从来没有测试过，所以我不知道是否有缺点。

```
/parent
+--pom.xml
|
+--/moduleA
|  +--pom.xml
+--/moduleB
|  +--pom.xml
+--/moduleC
|  +--pom.xml
+--/app-ear1
|  +--pom.xml
+--/app-ear2
|  +--pom.xml
\ 
```

考虑到在您收集和共享信息或在其中进行管理之前，没有虚拟的父项目。

显然，父级将收集模块和依赖项管理（以简化依赖项版本的管理）和插件管理。它还将包含团队、CI 管理等。实际上，它将包含所有常见信息。

然后，当您要构建整体时，请在父级上使用 mvn 包。当您释放它时，只需在父级上执行 mvn release:perform 即可。

如果您想单独使用/分配它们（一侧的耳 1，另一侧的耳 2），您可能没有相同的结构。

```
/corporate
+--pom.xml

/moduleA
+--pom.xml

/parent-1
+--pom.xml
|
+--/moduleB
|  +--pom.xml
|
+--/app-ear1
|  +--pom.xml
\

/parent-2
+--pom.xml
|
+--/moduleC
|  +--pom.xml
|
+--/app-ear2
|  +--pom.xml
\ 
```

Corporate 将由 parent1 和 parent2 扩展，并且在 case 1 中，它具有与 parent 相同的角色，涉及 dependencyManagement、pluginManagement 和 CI 等信息。考虑到你也可以在第一种情况下这样做。

看看这里：[Maven2：企业项目的最佳实践（EAR 文件）](https://stackoverflow.com/questions/1134894/maven2-best-practice-for-enterprise-project-ear-file)。您可能会找到更多信息。

在这两种情况下，如果将 WTP 与 eclispse 一起使用，请小心：[Multi Module Maven2 Project with WTP](https://stackoverflow.com/questions/922138/multi-module-maven2-project-with-wtp)。

# encoding - Clojure base64 编码

> ID：11825444
> 
> 赞同：21
> 
> 时间：2012-08-06T09:16:05.940
> 
> 标签：encoding, clojure

我想要像“字符串”-> base64 这样简单的东西。使用较旧的 base64.encode-str 很容易（听起来“更 clojure”，但较新的`clojure.data.codec.base64`需要输入和输出流，并且似乎是 Java 做事方式的丑陋包装。

那么，有一个字符串，得到一个 base64 编码的数组的方法是什么？谢谢

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2016-08-28T07:09:27.447

四年后，但如果您使用的是**JDK 1.8**或更高版本，我认为这值得一提。它只是使用`java.util.Base64`

### 编码字符串-> Base64：

```
(:import java.util.Base64)

(defn encode [to-encode]
  (.encode (Base64/getEncoder) (.getBytes to-encode))) 
```

### 编码字符串 - > Base64（字符串）：

```
(:import java.util.Base64)

(defn encode [to-encode]
  (.encodeToString (Base64/getEncoder) (.getBytes to-encode))) 
```

### 解码 Base64（字节 [] 或字符串）-> 字符串：

```
(:import java.util.Base64)

(defn decode [to-decode]
  (String. (.decode (Base64/getDecoder) to-decode))) 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-05-27T22:35:52.057

另一个答案还需要一个步骤：将字节数组结果`encode`转换为字符串。这就是我所做的：

```
(:require [clojure.data.codec.base64 :as b64])

(defn string-to-base64-string [original]
  (String. (b64/encode (.getBytes original)) "UTF-8")) 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-08-06T09:19:56.680

您可以使用[编码](https://github.com/clojure/data.codec/blob/master/src/main/clojure/clojure/data/codec/base64.clj#L230)函数并传递字节数组：

```
(encode (.getBytes "Hello world!")) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-31T07:50:07.753

[ztellman/byte-transforms](https://github.com/ztellman/byte-transforms)也支持 base64 编码/解码。

```
(encode "hello" :base64 {:url-safe? true}) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-03-20T13:25:37.750

对于那些尝试（就像我一样）将图像转换为数据 URI（用于在 HTML 中嵌入图像）的人：

```
(defn data-uri
  [imagepath]
  (str
   "data:image/"
   (second
    (re-find #"\.(.*$)" imagepath))
   ";base64,"
   (.encodeToString
    (java.util.Base64/getEncoder)
    (org.apache.commons.io.FileUtils/readFileToByteArray
     (clojure.java.io/file filepath))))) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-22T16:11:45.563

Clojure 的可能副本，[相当于 python 的 base64 编码和解码](https://stackoverflow.com/questions/39642549/clojure-equivalent-of-pythons-base64-encode-and-decode/39643881#39643881)

[Tupelo 库](https://stackoverflow.com/questions/39642549/clojure-equivalent-of-pythons-base64-encode-and-decode/39643881#39643881)具有围绕基本 Java Base64 和 Base64Url 功能的 Clojure 包装器。查看单元测试显示了实际代码：

```
(ns tst.tupelo.base64
  (:require [tupelo.base64 :as b64] ))

code-str    (b64/encode-str  orig)
result      (b64/decode-str  code-str) ]
(is (= orig result)) 
```

其中输入和输出值是纯字符串（字节数组也有一个变体）。

API 文档[在这里。](http://cloojure.github.io/doc/tupelo/tupelo.base64.html)

# binding - Primefaces - 装订和时间表

> ID：11825445
> 
> 赞同：0
> 
> 时间：2012-08-06T09:16:06.627
> 
> 标签：binding, jsf-2, primefaces, schedule

我想`rightHeaderTemplate`更改`ManagedBean`. 所以我想绑定我的日程安排，但我不知道要在`ManagedBean`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:36:59.073

如果您需要 的 java 对象`schedule`，请使用此[课程表](http://www.primefaces.org/docs/api/3.2/org/primefaces/component/schedule/Schedule.html)

使用[setRightHeaderTemplate](http://www.primefaces.org/docs/api/3.2/org/primefaces/component/schedule/Schedule.html#setRightHeaderTemplate%28java.lang.String%29)

* * *

但，

INMO ，无需绑定到对象

`<p:schedule`像这样使用组件的这个属性

```
<p:schedule rightHeaderTemplate="#{myBean.myHeaderTemplate}"></p:schedule> 
```

**我认为您误解了计划组件标题的含义**

> Schedule 的 Header 控件可以根据模板进行自定义，模板选项的有效值是；
> 
> • 标题：当前月/周/日信息的文本
> 
> • prev：按钮将日历向后移动一个月/周/天。
> 
> • 下一个：按钮将日历向前移动一个月/一周/一天。
> 
> • prevYear：将日历向后移动一年的按钮
> 
> • nextYear：将日历向前移动一年的按钮
> 
> • 今天：将日历移动到当前月/周/日的按钮。
> 
> • viewName：用于根据视图类型更改视图类型的按钮。
> 
> 这些控件可以放置在标题上的三个位置，这些位置定义为
> 
> leftHeaderTemplate、rightHeaderTemplate 和 centerTemplate 属性。

# android - android 4.1 NoClassDefFoundError org.bouncycastle.asn1

> ID：11825446
> 
> 赞同：0
> 
> 时间：2012-08-06T09:16:10.037
> 
> 标签：android, noclassdeffounderror

> **可能重复：**
> [在 android java 代码中使用 common.lang.StringUtils 时出现 NoClassDefFoundError？](https://stackoverflow.com/questions/11823975/getting-noclassdeffounderror-when-using-common-lang-stringutils-in-android-java)

我是安卓新手。

我的应用程序在装有 Android 4.1 的设备上崩溃。

```
 java.lang.NoClassDefFoundError: org.bouncycastle.asn1.x509.X509Name
at android.net.http.DomainNameChecker.matchDns(DomainNameChecker.java:187)
at android.net.http.DomainNameChecker.match(DomainNameChecker.java:62)
at com.android.email.mail.store.TrustManagerFactory$SecureX509TrustManager.checkServerTrusted(TrustManagerFactory.java:82)
at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.verifyCertificateChain(OpenSSLSocketImpl.java:597)
at org.apache.harmony.xnet.provider.jsse.NativeCrypto.SSL_do_handshake(Native Method)
at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:395)
at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl$SSLInputStream.<init>(OpenSSLSocketImpl.java:647)
at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.getInputStream(OpenSSLSocketImpl.java:618)
at com.android.email.mail.store.ImapStore$ImapConnection.open(ImapStore.java:1330) 
```

在 Andorid 低于 4.1 的设备上一切正常。谁能告诉我。问题在哪里？

包含的库列表

```
Yes. in bottom list of included libraries:
google-http-client-1.6.0-beta.jar
google-http-client-extensions-1.6.0-beta.jar
google-http-client-extensions-android2-1.6.0-beta.jar 
```

雅虎我确实找到了正确的解决方案：

**在 android 4.1 中没有 bouncycastle 库。我将它添加到项目中，错误消失了**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:27:38.097

你应该试试这个：

1.  删除所有对 JAR 的引用`project -> Java Build path --> Libraries.`

2.  在项目的根目录创建一个`libs folder`将 JAR 复制到 libs 文件夹中

3.  如果仍然没有运行确定。右键单击您的项目 > Android 工具 > 修复项目属性

清理您的项目一次并运行。

# c# - 如何在asp net mvc中从c#代码发布文件？

> ID：11825453
> 
> 赞同：-1
> 
> 时间：2012-08-06T09:16:32.777
> 
> 标签：c#, asp.net-mvc, post, httppostedfilebase

我有一个控制器方法，它`HttpPostedFileBase picture`作为参数。当然，它用于从表单加载图像。但现在我想使用该方法从另一种方法加载文件。我可以使用图像路径在代码中制作 HttpPostedFileBase 文件吗？或者可能是另一种解决方案是首选？

好的，代码：

```
public ActionResult UploadPicture(HttpPostedFileBase picture)
{
    if (picture.ContentLength > Convert.ToInt32(ConfigurationManager.AppSettings["MaxMBFileSize"]) * 1024 * 1024 || picture.ContentLength == 0)
    {
        return ClientError(ErrorCodes.ClientErrorCodes.FileSizeError, "File size is incorrect");
    }
    else
    {
        string contentType = picture.ContentType;

        if (!PictureHelper.ContentTypeIsValid(contentType))
        {
            return ClientError(ErrorCodes.ClientErrorCodes.MimeTypeError, "Incorrect file type");
        }
        else
        {
            string pictureName = Guid.NewGuid().ToString();
            pictureName += picture.FileName.Substring(picture.FileName.LastIndexOf('.'));

            string serverPath = AppDomain.CurrentDomain.BaseDirectory;
            picture.SaveAs(serverPath + ConfigurationManager.AppSettings["LocalImagesPath"] + pictureName);

            return Success(new { pictureName = pictureName });
        }
    }
} 
```

真的，身体绝对不重要。当然我有类似的东西：

```
<form method="post" action="Photo\UploadPicture">
    <input type="file">
    <input type="submit" value="submit">
</form> 
```

我想要类似的东西：

```
public ActionResult NewMethod()
{
    string path = ""; // real path to file here
    var file = OhMyGodMagicTransfer(path);
    // sending request
    request.attach(file);
    request.send;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:31:22.460

如果文件已保存到磁盘，则只需返回 FilePathResult ：

```
 public ActionResult FileDownload()
        {
            var fileLocation = "C:\file.jpg"; 
            var fileType = "image/jpeg" //this is the Mime content type;
            return File(fileLocation , fileType ); 
        } 
```

查看 File 的重载，因为您可以返回文件流或字节数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-02T11:41:22.403

```
 public ActionResult Index()
        {
            XmlDocument doc = new XmlDocument();
            doc.Load(@"C:\proba\MvcApplication3\MvcApplication3\XMLFile1.xml");
            List<Class1> pitanja = new List<Class1>();
            Random rand = new Random();
            int broj1 = rand.Next(1, 3);
            int broj2 = rand.Next(3, 5);
            int broj3 = 5;

            TempData["odg1"] = broj1;
            TempData["odg2"] = broj2;
            TempData["odg3"] = broj3;

            string odg1 = Request.Form["odgg1"];
            string odg2 = Request.Form["odgg2"];
            string odg3 = Request.Form["odgg3"];

            TempData["korisodg1"] = odg1;
            TempData["korisodg2"] = odg2;
            TempData["korisodg3"] = odg3;

            foreach (XmlNode cvor in doc.SelectNodes("/kviz/Pitanje"))
            {

                if (broj1.ToString() == cvor["Rbr"].InnerText)
                {
                    pitanja.Add(
                        new Class1
                        {
                            pitanje = cvor["Pitanje"].InnerText,
                            odg1 = cvor["Odgovor1"].InnerText,
                            odg2 = cvor["Odgovor2"].InnerText,
                            odg3 = cvor["Odgovor3"].InnerText,
                            odg4 = cvor["Odgovor4"].InnerText,
                            resenje = cvor["Resenje"].InnerText
                        }
                        );
                }
                else if (broj2.ToString() == cvor["Rbr"].InnerText)
                {
                    pitanja.Add(
                        new Class1
                        {
                            pitanje = cvor["Pitanje"].InnerText,
                            odg1 = cvor["Odgovor1"].InnerText,
                            odg2 = cvor["Odgovor2"].InnerText,
                            odg3 = cvor["Odgovor3"].InnerText,
                            odg4 = cvor["Odgovor4"].InnerText,
                            resenje = cvor["Resenje"].InnerText
                        }
                        );
                }
                else if (broj3.ToString() == cvor["Rbr"].InnerText)
                {
                    pitanja.Add(
                        new Class1
                        {
                            pitanje = cvor["Pitanje"].InnerText,
                            odg1 = cvor["Odgovor1"].InnerText,
                            odg2 = cvor["Odgovor2"].InnerText,
                            odg3 = cvor["Odgovor3"].InnerText,
                            odg4 = cvor["Odgovor4"].InnerText,
                            resenje = cvor["Resenje"].InnerText
                        }
                        );
                }

            }
            return View(pitanja);

        }

        public ActionResult operater()
        {
            XmlDocument doc = new XmlDocument();
            doc.Load(@"C:\proba\MvcApplication3\MvcApplication3\XMLFile1.xml");
            List<Class1> pitanja = new List<Class1>();

            foreach (XmlNode cvor in doc.SelectNodes("/kviz/Pitanje"))
            {
                if (TempData["odg1"].ToString() == cvor["Rbr"].InnerText)
                    pitanja.Add(new Class1
                    {
                        resenje = cvor["Resenje"].InnerText,
                        pitanje = cvor["Pitanje"].InnerText,
                        odgKorisnika = TempData["korisodg1"].ToString()
                    });

                else if (TempData["odg2"].ToString() == cvor["Rbr"].InnerText)
                    pitanja.Add(new Class1
                    {
                        resenje = cvor["Resenje"].InnerText,
                        pitanje = cvor["Pitanje"].InnerText,
                        odgKorisnika = TempData["korisodg2"].ToString()
                    });
                else if (TempData["odg3"].ToString() == cvor["Rbr"].InnerText)
                    pitanja.Add(new Class1
                    {
                        resenje = cvor["Resenje"].InnerText,
                        pitanje = cvor["Pitanje"].InnerText,
                        odgKorisnika = TempData["korisodg3"].ToString()
                    });
            }

            return View(pitanja);
        }

    }
}
@*@{
    ViewBag.Title = "Index";
    }
@Html.ActionLink("Operater", "operater", "home")
@Html.ActionLink("Nova pitanja","index","home")
@using(Html.BeginForm("Index","home")){

<h2>Index</h2>

    foreach (MvcApplication3.Models.Class1 pitanje in Model)
{

    @pitanje.pitanje;
    <br />
    @pitanje.odg1;<br />
    @pitanje.odg2;<br />
    @pitanje.odg3;<br />
    @pitanje.odg4;<br />
    <hr />
}
<input type="text" name="odgg1"  /><br />
<input type="text" name="odgg2" /><br />
<input type="text" name="odgg3" /><br />
<input type="submit" value ="Potvrdi" />
}*@
@*@{
    ViewBag.Title = "operater";
}
@Html.ActionLink("Nova pitanja","index","home")

<h2>operater</h2>

@foreach (MvcApplication3.Models.Class1 pitanj in Model)
{
    @pitanj.pitanje;<br /> 
    @pitanj.resenje;<br /><br /><br />
    @pitanj.odgKorisnika;
    <hr />
}*@
```

# .net - .NET 中是否有类似 perl 的 Regexp::Grammars 或标记的子模式？

> ID：11825458
> 
> 赞同：4
> 
> 时间：2012-08-06T09:16:52.837
> 
> 标签：.net, regex, perl, regexp-grammars

我真的很喜欢 perl 的[Regexp::Grammars](http://search.cpan.org/~dconway/Regexp-Grammars-1.016/lib/Regexp/Grammars.pm)模块。.NET 有类似的东西吗？

我真的很想在 C# 中以正则表达式样式的方式使用递归下降解析器（例如，通过大型文档搜索匹配的模式），并且能够递归地表达该模式。

**更新**在阅读了 brian d foy 的这个[小宝石](http://web.archive.org/web/20120814085314/http://www.effectiveperlprogramming.com/blog/1479)后，我发现 perl 5.10 支持使用 (?&NAME) 标记的子模式。[PCRE](http://www.pcre.org/)现在有一个[Nuget 包](https://nuget.org/packages/pcre/)，并且 PCRE 支持命名/标记的子模式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T10:36:21.807

Perl5 Regexp::Grammars 仿照[Perl6 语法](http://enwp.org/Perl_6_rules#Grammars)。

[Niecza](http://enwp.org/Niecza)是一个 Perl6 实现，它[实现了语法](http://perl6.org/compilers/features#Grammars)并以[CLI](http://enwp.org/Common_Language_Infrastructure)为目标，.NET 也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T09:32:36.190

我认为没有类似的模块，但您*可以*在 .NET 中创建递归正则表达式。[有关示例，请参见此处](https://stackoverflow.com/questions/6002605/regex-embedded-matching/6002694#6002694)。

# python - 河内塔非递归：我的代码正确吗？

> ID：11825463
> 
> 赞同：3
> 
> 时间：2012-08-06T09:17:18.773
> 
> 标签：python, python-3.x

我使用非递归方法为河内塔问题编写了以下代码。我猜这是不正确的，因为移动的数量不是 2**n - 1，例如，要移动 3 个磁盘，它必须生成 7 个移动。提前致谢。

```
######################
#   Towers of Hanoi  #
######################

numbers = []

def TowersofHanoi():
# Proram to simulate Towers of hanoi
# Objective is to move the disks from A to C 
# with B as a temporary varialbel

    print "Program to simulate Towers of Hanoi"
    print "Users will input numbers of disks, which is 'A'"
    print "The disks have to be moved from A to C"
    print "With B as temporary placeholder"

    print "Enter the number of disks to be moved:",

    Num = int (raw_input("> "))
    Src = Num
    Aux = 0
    Dst = 0
    print "you have entered %d disks to be moved"
    print "Source is -->", Src
    print "Auxillary is -->", Aux
    print "Destination is -->", Dst

    print "Disk positions after the placement:"

    #B = A-1
    #print B
    while Num >= 1: 
        print Num
        Aux = Num-1
        Src = Src-Aux   
        Dst = Src   

        print "Source is -->", Src
        print "Auxillary is -->", Aux
        print "Destination is -->", Dst
        Src = Aux
        Num = Num-1

        numbers.append(Dst)
    print numbers

    print "The task of accomplishing the movements of disk is over"
    print "This completes TOWERS OF HANOI!"
    print "Final disk positions are:"
    print "Source is -->", Src
    print "Auxillary is -->", Aux
    print "Destination is -->", len(numbers)

TowersofHanoi() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:07:11.833

我认为您的算法存在根本缺陷（没有冒犯）：

```
Aux = Num-1
Src = Src-Aux   
Dst = Src 
```

我读这个的方式，你从'左'堆栈中取出num-1个'环'并将它们放在'中间'堆栈上，然后将剩余的环从'左'堆栈移动到'右'堆栈（目的地堆）。我以为河内的塔的工作方式是一次移动一环？

因此，在您的情况下，当 Num = 3 时，1 次移动后 Aux = 2，这应该是不可能的。

也许看看这里：[http](http://en.wikipedia.org/wiki/Tower_of_Hanoi#Iterative_solution) ://en.wikipedia.org/wiki/Tower_of_Hanoi#Iterative_solution 它以许多不同的形式描述了河内塔问题。

# mysql - 跨连接表求和

> ID：11825474
> 
> 赞同：3
> 
> 时间：2012-08-06T09:18:11.120
> 
> 标签：mysql, sql, join, sum, unique

考虑以下场景：用户拥有一个或多个（银行）帐户。账户余额的历史变化在表格中进行跟踪。我想及时显示用户所有账户的资金历史记录。这些是表定义：

```
CREATE TABLE `users` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(20) DEFAULT NULL,
  PRIMARY KEY (`id`)
);

CREATE TABLE `accounts` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `user_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
);

CREATE TABLE `balances` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `account_id` int(11) DEFAULT NULL,
  `amount` int(11) DEFAULT NULL,
  `created_at` date DEFAULT NULL,
  PRIMARY KEY (`id`)
); 
```

这是一些示例数据：

```
INSERT INTO `users` (`id`, `name`)
VALUES
  (1,'Bob');

INSERT INTO `accounts` (`id`, `user_id`)
VALUES
  (1,1),
  (2,1);

INSERT INTO `balances` (`id`, `account_id`, `amount`, `created_at`)
VALUES
  (1,1,100, '2012-01-01'),
  (2,1,150, '2012-01-02'),
  (3,2,1000,'2012-01-04'),
  (4,2,1100,'2012-01-08'),
  (5,1,175, '2012-01-10'); 
```

用户每天只能跨账户进行一次存款/取款，因此这些`created_at`值可以被认为是唯一的。

给定样本数据，我想写的查询结果应该是这样的：

```
|'2012-01-01'|100 |
|'2012-01-02'|150 |
|'2012-01-04'|1150|
|'2012-01-08'|1250|
|'2012-01-10'|1275| 
```

计划如下：

1.  从余额表中获取所有唯一日期。
2.  对于每个日期，选择每个帐户中的最新余额，以便余额的日期不超过步骤 1 中的日期。
3.  将步骤 2 中找到的金额相加，忽略 NULL 值。NULL 值意味着该帐户的第一个记录余额用于以后的日期。

我无法为步骤 2 制定条件。

[MySQL 小提琴](http://sqlfiddle.com/#!2/8273d/1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:06:23.570

我试过这个（用我纯英语的理解:)；

```
SELECT b.created_at, Sum(amount) amount, u.id, u.name 
FROM balances b 
LEFT JOIN accounts a ON a.id=b.account_id 
LEFT JOIN users u ON u.id=a.user_id 
GROUP BY b.created_at 
ORDER BY b.created_at 
```

并得到了这个结果；

```
created_at  amount    id    name
2012-01-01  100       1     Bob
2012-01-02  150       1     Bob
2012-01-04  1000      1     Bob
2012-01-08  1100      1     Bob
2012-01-10  175       1     Bob 
```

我认为您所写的所有日期字段都是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:31:56.270

```
select user_id,created_at,sum(accAmount) from
(
select a.id account_id,a.user_id user_id, dt.created_at created_at,
( select amount from balances b3 where (b3.account_id=a.id)
and b3.created_at=
(select max(created_at) as lastAccDate from balances b
where b.created_at<=dt.created_at and b.account_id=a.id)
) AccAmount
from accounts a,
(select distinct created_at from balances) dt
) AccountAmounts
group by user_id,created_at
order by 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T08:29:21.793

我不是 MySQL 的大用户，但我创建了一个适用于 MS SQL Server 的查询。它不是特别高效（3 个子查询和一个 Distinct，嘘！），所以您可能想考虑是否有比简单地在单个查询中派生它更好的方法。

```
SELECT
  b.created_at,
  SUM(b.amount),

  (
    SELECT SUM(acc_amt)
    FROM
      (
        SELECT DISTINCT b2.account_id,
        (
           SELECT TOP 1 b3.amount
           FROM balances AS b3
           WHERE b3.account_id = b2.account_id
           AND b3.created_at <= b.created_at
           ORDER BY b3.created_at DESC
        ) AS acc_amt
        FROM balances AS b2
        WHERE b2.created_at <= b.created_at
      ) temp_bal
  )

FROM
  balances AS b
GROUP BY
  b.created_at 
```

To convert to MySQL you'll need to remove the **TOP 1** and add a **LIMIT 1** after 'DESC' in the b3 sub query, and tinker until MySQL is happy with the syntax. I will have a go and see if I can convert it.

# c# - 在 RemotingConfiguration.Configure(configFile) 中获取 System.Reflection.TargetInvocationException；

> ID：11825476
> 
> 赞同：1
> 
> 时间：2012-08-06T09:18:25.160
> 
> 标签：c#, remote-access, .net-remoting

在我的代码中，我使用`RemotingConfiguration.Configure(configFile)`

事情在正常的网络上运行良好。而通过 Microsoft DirectAcess 连接相同的 API 抛出和异常。

```
[Remoting configuration failed with the exception 'System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.ArgumentNullException: Value cannot be null.
Parameter name: ip
   at System.Runtime.Remoting.Channels.CoreChannel.GetMachineIp()
   at System.Runtime.Remoting.Channels.Http.HttpServerChannel.SetupMachineName()
   at System.Runtime.Remoting.Channels.Http.HttpServerChannel..ctor(IDictionary properties, IServerChannelSinkProvider sinkProvider)
   at System.Runtime.Remoting.Channels.Http.HttpChannel..ctor(IDictionary properties, IClientChannelSinkProvider clientSinkProvider, IServerChannelSinkProvider serverSinkProvider) 
```

可能出了什么问题？

谢谢你。

# c# - C#：如何从自身内部写入类？

> ID：11825479
> 
> 赞同：0
> 
> 时间：2012-08-06T09:18:34.027
> 
> 标签：c#, xml-serialization, this

我正在尝试通过使用 .NET XmlSerializer 类创建一个可以序列化和反序列化自身到 XML 文件的类。我可以使用保存功能（“SaveSettings”），但加载功能并不那么简单。

目前我必须将类变量的引用传递给函数以使加载函数工作（“LoadSettings2”）理想的情况是只使用“this”关键字（“LoadSettings”）无论如何创建一个只需要传递文件路径的 LoadSettings 函数？

程序.cs：

```
class Program
{
    static void Main(string[] args)
    {
        ApplicationSettings appSet = new ApplicationSettings();
        appSet.SourceDirectory = "here";
        appSet.DestinationDirectory = "there";

        appSet.SaveSettings(@"C:\Users\Connor\Desktop\Folder A\a.xml");
        //appSet.LoadSettings(@"C:\Users\Connor\Desktop\Folder A\a.xml"); //Doesn't work
        appSet.LoadSettings2(ref appSet, @"C:\Users\Connor\Desktop\Folder A\a.xml");
    }
} 
```

应用程序设置.cs：

```
public class ApplicationSettings
{
    //Serialized
    public string SourceDirectory;
    public string DestinationDirectory;

    //Not Serialized
    public void SaveSettings(string filePath)
    {
        XmlSerializer XSerializer = new XmlSerializer(typeof(ApplicationSettings));
        StreamWriter strWrite = new StreamWriter(filePath);

        XSerializer.Serialize(strWrite, this);
        strWrite.Close();
    }

    public void LoadSettings(string filePath)
    {
        XmlSerializer XSerializer = new XmlSerializer(typeof(ApplicationSettings));
        StreamReader strRead = new StreamReader(filePath);

        //Ideal but will not work
        //this = (ApplicationSettings)XSerializer.Deserialize(strRead);
        strRead.Close();
    }

    public void LoadSettings2(ref ApplicationSettings appSettings, string filePath)
    {
        XmlSerializer XSerializer = new XmlSerializer(typeof(ApplicationSettings));
        StreamReader strRead = new StreamReader(filePath);

        appSettings = (ApplicationSettings)XSerializer.Deserialize(strRead);
        strRead.Close();
    }
} 
```

-

- 回答 - -

通过“David M”建议的逐个成员复制来实现它但是通过使用 System.Reflection 来实现，这意味着没有使用变量名。我相信只有公共变量被复制，类需要更多的测试。执行 10k 次迭代大约需要 1.8 秒。

```
public void LoadSettings(string filePath)
{
    XmlSerializer XSerializer = new XmlSerializer(typeof(ApplicationSettings));
    StreamReader strRead = new StreamReader(filePath);
    ApplicationSettings settingsRead = (ApplicationSettings)XSerializer.Deserialize(strRead);

    foreach (var field in typeof(ApplicationSettings).GetFields())
    {
        field.SetValue(this, field.GetValue(settingsRead));
    }

    strRead.Close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:20:50.983

改为使用静态工厂方法：

```
public static ApplicationSettings LoadSettings(string filePath)
{
    XmlSerializer XSerializer = new XmlSerializer(typeof(ApplicationSettings));
    using (StreamReader strRead = new StreamReader(filePath))
    {
        var result = (ApplicationSettings)XSerializer.Deserialize(strRead);
    }
    return result;
} 
```

否则，您将不得不反序列化到另一个实例，并逐个成员将值复制到当前实例。请注意，您最好使用一个`using`块`StreamReader`-`Dispose`调用将确保文件句柄被释放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:21:44.670

为什么不创建`LoadSettings()`一个`static`方法并像这样调用它：

```
ApplicationSettings applicationSettings = ApplicationSettings.LoadSettings(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T00:20:56.270

通过“David M”建议的逐个成员复制来实现它但是通过使用 System.Reflection 来实现，这意味着没有使用变量名。我相信只有公共变量被复制，类需要更多的测试。执行 10k 次迭代大约需要 1.8 秒。

```
public void LoadSettings(string filePath)
{
    XmlSerializer XSerializer = new XmlSerializer(typeof(ApplicationSettings));
    StreamReader strRead = new StreamReader(filePath);
    ApplicationSettings settingsRead = (ApplicationSettings)XSerializer.Deserialize(strRead);

    foreach (var field in typeof(ApplicationSettings).GetFields())
    {
        field.SetValue(this, field.GetValue(settingsRead));
    }

    strRead.Close();
} 
```

# java - 玩！框架路线。长数据类型

> ID：11825480
> 
> 赞同：2
> 
> 时间：2012-08-06T09:18:38.077
> 
> 标签：java, playframework, playframework-2.0, web-development-server

似乎我在*路由*中定义 Long 变量时遇到问题。这是*路由*文件中的行：

```
GET   /topic/:id                    controllers.Topics.show(id: Long) 
```

这是处理这条路线的方法：

```
public static Result show(long id) {
   // handle request here...
} 
```

我得到的是错误 324：

> 错误 324 (net::ERR_EMPTY_RESPONSE)：服务器关闭连接而不发送任何数据。

我认为问题出在*Long*数据类型上，因为使用*Int*它就像一个魅力。
使它起作用的调整是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T09:20:15.867

您必须在操作中使用`Long`对象而不是`long`主要类型：

```
public static Result show(Long id) {
   // handle request here...
} 
```

# ruby-on-rails - else 语句被忽略

> ID：11825492
> 
> 赞同：2
> 
> 时间：2012-08-06T09:19:18.373
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我看来，我正在测试是否存在某些记录。如果他们这样做，我会遍历它们并显示每一个。但是，如果这些记录不存在，我希望显示一条消息。这是我认为的代码：

```
 <% if current_user.lineups %>
        <% for lineup in current_user.lineups do %>
          <li><%= link_to "#{lineup.course.cl} #{lineup.course.cn}", index_path %></li>
        <% end %>
      <% else %>
        <li><%= link_to "You have no courses", index_path %></li>
      <% end %> 
```

现在，当记录存在时，迭代工作得很好。每当我创建正确的记录时，这段代码都会运行得非常好，并为每个被迭代的记录创建一个链接。但是，如果不存在任何记录，则不会显示任何内容。'else' 语句被完全忽略。我尝试修改“if”语句，但无济于事。我试过：

```
<% unless current_user.lineups.nil? %> 
```

也：

```
<% if !( current_user.lineups.nil? ) %> 
```

我在这里束手无策。任何和所有输入将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T09:23:47.417

空数组不为nil，尝试使用`any?`or`empty?`

```
<% if current_user.lineups.any? %>
  ...
<% else %>
  <li><%= link_to "You have no courses", index_path %></li>
<% end %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T09:24:58.270

在你的 if 语句中试试这个

```
<% if current_user.lineups.blank? %>
   <li><%= link_to "You have no courses", index_path %></li>
<% else %>
   <% for lineup in current_user.lineups do %>
      <li><%= link_to "#{lineup.course.cl} #{lineup.course.cn}", index_path %></li>
   <% end %> 
<% end %> 
```

它将检查 lineups 数组是否为空或 nil 两种情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T09:32:41.527

你可以试试

```
if current_user.lineups.present? # true if any records exist i.e not nil and empty
  # do if records exist
else
  # do if no records exist
end 
```

展示？只是不是（！）的空白吗？

您可以使用`blank?` 或`present?`根据您需要的代码放置。如果您使用`blank?`go 和 @abhas 答案

# machine-learning - 关于 adaboost 算法

> ID：11825493
> 
> 赞同：4
> 
> 时间：2012-08-06T09:19:23.603
> 
> 标签：machine-learning, classification, traffic, prediction, adaboost

我正在做一个交通流量预测，我可以预测一个地方的交通繁忙或轻微。我将每个流量分类为 1-5，1 是最轻的流量，5 是最重的流量。

我遇到了这个网站[http://www.waset.org/journals/waset/v25/v25-36.pdf](http://www.waset.org/journals/waset/v25/v25-36.pdf)，AdaBoost 算法，我真的很难学习这个算法。特别`S`是在集合 (( `xi`, `yi`), `i=(1,2,…,m)`) 的部分。哪里`Y={-1,+1}`。什么是`x`和`y`常数`L`？的价值是`L`多少？

有人可以解释一下这个算法吗？:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T11:55:21.950

`S={(x1,y1),...,(xm,ym)}`：每一`(x,y)`对都是用于训练（或测试）分类器的样本：

*   `x`= 描述此特定样本的特征，例如列出`amount of cars on the road`、`day of the week`等的值
*   `y`=特定的标签`x`，在您的情况下可以是`1, 2, 3, 4 or 5`

`Table 1`在论文中展示了他们使用的特征，`x`即：`DAY`、`TIME`、`INT`、`DET`、`LINK`、`POS`、`GRE`、`DIS`和。表格的最后一列显示了标签 ( )，他们将其设置为or (ie, or )。表中的每一行都是 1 个样本。`VOL``OCC``y``1``-1``yes``no`

`L`是 AdaBoost 训练弱学习器的轮数（在论文`Random Forests`中用作弱分类器）。如果设置`L`为，`1`那么 AdaBoost 将运行 1 轮，并且只会训练 1 个弱分类器，这将产生不好的结果。使用不同的值进行多次实验`L`以找到最佳值（即，当 AdaBoost 收敛或开始过度拟合时）。

# java - 通过soap webservice将时间戳转换为java中的日期

> ID：11825494
> 
> 赞同：0
> 
> 时间：2012-08-06T09:19:30.450
> 
> 标签：java, date, soap, timestamp, converter

java.i 中如何将时间戳转换为日期，我已从以下代码中获取计数值。

这是我的代码：

```
public class TodayQ {
  public int data() {
    int count=0;

//count++;

try {
      Class.forName("com.mysql.jdbc.Driver");
      Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/pro",
                                                   "root", "");

      PreparedStatement statement =
        con.prepareStatement("select * from orders where status='Q' AND date=CURDATE()");
      ResultSet result = statement.executeQuery();
      while (result.next()) {
        // Do something with the row returned.
        count++; //if the first col is a count.
      }
    } catch (Exception exc) {
      System.out.println(exc.getMessage());
    }

    return count;
  }
} 
```

这是另一个类：

```
public class Demo {
  public static void main(String[] args) {
    TodayQ obj = new TodayQ();
    System.out.println(obj.data());
  }
} 
```

在我的数据库中有日期字段。这里我保存的日期是 yyyy-mm-dd 格式意味着上面的代码已成功运行并在我的控制台上显示计数值。但是在我运行应用程序后我将更改日期是时间戳格式意味着它不是显示计数值。为什么会出现这个错误。请解释一下。这里db名称是pro.table名称是orders.字段名称是date(1343469690,1343470540,1343470556),status(Q,C,P)。这里显示检查匹配查询并获取计数值。如何是去做。

# sql-server - 如何在 SQL Server 2008 上执行 SQL Server 2005 生成的数据库查询？

> ID：11825499
> 
> 赞同：0
> 
> 时间：2012-08-06T09:19:53.917
> 
> 标签：sql-server, sql-server-2005, stored-procedures

我需要在 SQL Server 2008 中执行 SQL Server 2005 生成的数据库查询（主要是存储过程）。在执行此过程时我需要记住什么...？

当我执行上述过程时，脚本不会执行...

请帮我解决这个问题

尼莱什·佩塔尼

很抱歉在评论中包含代码...

这是我用来在没有任何 SET 命令的情况下执行的示例过程，但它仍然无法正常工作......

```
CREATE  PROCEDURE [dvx_web_MICROSITES_LoadMicrosites]
AS
BEGIN
    SELECT
        microsite_id AS ID,
        url as URL,
        [name] as [Name],
        catery_id as CateryID,
        catery_code as CateryCode,
        banner_key as Banner,   
        main_banner_key as MainBanner,
        special_zone_id as SpecialZone,
        homepage_url as MainLink,
        active as Active,
        custom_01 as Custom01,
        custom_02 as Custom02,
        custom_03 as Custom03,
        custom_04 as Custom04,
        custom_05 as Custom05
    FROM
        Microsites
    WHERE
        Active = 1
    ORDER BY [Name] ASC
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:36:22.993

你有哪个错误？您的代码是正确的，您可以创建存储过程。如果您在创建存储过程时遇到错误，请将错误消息添加到您的问题中。

如果您在调用您的 SP 时遇到问题，请添加调用代码和结果。

在这里，我创建了简单的示例：

```
create table test_table (
   a int
)
go

insert into test_table values(10);
go

create procedure test_proc
as
begin
  select * from test_table order by a asc
end  
go

exec dbo.test_proc

drop procedure test_proc
drop table test_table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:43:14.447

在您的示例过程中，为什么在 create proc 语句之前将 ANSI NULL 和 QUOTED IDENTIFIERS SET TO ON？这将产生语法错误，并且不会在以后每次执行 proc 时应用。所以在存储过程中使用这些设置。我想这可能是你所有程序的问题。

# java - Java 读取 XML - 在“<”特殊字符处停止

> ID：11825502
> 
> 赞同：2
> 
> 时间：2012-08-06T09:20:14.303
> 
> 标签：java, xml, rss, special-characters

我正在制作一个练习应用程序，目的是从 RSS 提要中读取数据。

到目前为止一切顺利，除了我的应用程序遇到了特殊字符的问题。它读取节点内的第一个特殊字符，然后移动到下一个节点。

任何帮助将不胜感激，并对随后的大代码块感到抱歉。

RSS 提要 - www.usu.co.nz/usu-news/rss.xml

```
<title>Unitec hosts American film students</title>
<link>http://www.usu.co.nz/node/4640</link>
<description>&lt;p&gt;If you’ve been hearing American accents around the Mt Albert campus over the past week.</description> 
```

显示代码

```
String xml = XMLFunctions.getXML();
Document doc = XMLFunctions.XMLfromString(xml);

NodeList nodes = doc.getElementsByTagName("item");

for (int i = 0; i < nodes.getLength(); i++) 
{                           
    Element e = (Element)nodes.item(i);
    Log.v("XMLTest", XMLFunctions.getValue(e, "title"));
    Log.v("XMLTest", XMLFunctions.getValue(e, "link"));
    Log.v("XMLTest", XMLFunctions.getValue(e, "description"));  
    Log.v("XMLTest", XMLFunctions.getValue(e, "pubDate"));
    Log.v("XMLTest", XMLFunctions.getValue(e, "dc:creator"));
} 
```

读者代码

```
public class XMLFunctions 
{

public final static Document XMLfromString(String xml)
{

    Document doc = null;

    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
        is.setCharacterStream(new StringReader(xml));
        doc = db.parse(is); 

    } catch (ParserConfigurationException e) {
        System.out.println("XML parse error: " + e.getMessage());
        return null;
    } catch (SAXException e) {
        System.out.println("Wrong XML file structure: " + e.getMessage());
        return null;
    } catch (IOException e) {
        System.out.println("I/O exeption: " + e.getMessage());
        return null;
    }

    return doc;

}

/** Returns element value
  * @param elem element (it is XML tag)
  * @return Element value otherwise empty String
  */
 public final static String getElementValue( Node elem ) {
     Node kid;
     if(elem != null)
     {
         if (elem.hasChildNodes())
         {
             for(kid = elem.getFirstChild(); kid != null; kid = kid.getNextSibling())
             {
                 if( kid.getNodeType() == Node.TEXT_NODE  )
                 {
                     return kid.getNodeValue();
                 }
             }
         }
     }
     return "";
 }

 public static String getXML(){  
        String line = null;

        try {

            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost("http://www.usu.co.nz/usu-news/rss.xml");

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            line = EntityUtils.toString(httpEntity);

        } catch (UnsupportedEncodingException e) {
            line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
        } catch (MalformedURLException e) {
            line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
        } catch (IOException e) {
            line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
        }

        return line;

}

public static int numResults(Document doc){     
    Node results = doc.getDocumentElement();
    int res = -1;

    try{
        res = Integer.valueOf(results.getAttributes().getNamedItem("count").getNodeValue());
    }catch(Exception e ){
        res = -1;
    }

    return res;
}

public static String getValue(Element item, String str) {       
    NodeList n = item.getElementsByTagName(str);        
    return XMLFunctions.getElementValue(n.item(0));
}
} 
```

输出

```
Unitec hosts American film students
http://www.usu.co.nz/node/4640
<
Wed, 01 Aug 2012 05:43:22 +0000
Phillipa 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T09:55:03.397

您的代码仅从元素中提取*第一*个子文本节点。DOM 规范允许多个相邻的文本节点，所以我怀疑这里发生的事情是您的解析器将 , 和剩余的文本表示`<`为`p`（`>`至少）四个单独的文本节点。您要么需要将节点连接成一个字符串，要么调用`normalize()`包含元素节点（这会修改 DOM 树以将相邻的文本节点合并为一个）。

有各种库可以帮助您。例如，如果您的应用程序使用 Spring 框架，那么`org.springframework.util.xml.DomUtils`有一个`getTextValue`静态方法可以从元素中提取完整的文本值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T09:52:47.227

你的功能

```
public final static String getElementValue( Node elem ) {
    Node kid;
    if(elem != null)
    {
        if (elem.hasChildNodes())
        {
            for(kid = elem.getFirstChild(); kid != null; kid = kid.getNextSibling())
            {
                if( kid.getNodeType() == Node.TEXT_NODE  )
                {
                    return kid.getNodeValue();
                }
            }
        }
    }
    return "";
} 
```

返回给定元素下的第一个文本节点。单个标签中的一大块文本可以拆分为多个文本节点，这往往发生在存在特殊字符的情况下。

您可能应该将所有文本节点附加到返回值的字符串中。

大约像这样的东西可能会起作用：

```
public final static String getElementValue( Node elem ) {
    if ((elem == null) || (!(elem.hasChildNodes())))
        return "";

    Node kid;
    StringBuilder builder = new StringBuilder();
    for(kid = elem.getFirstChild(); kid != null; kid = kid.getNextSibling())
    {
        if( kid.getNodeType() == Node.TEXT_NODE  )
        {
            builder.append(kid.getNodeValue());
        }
    }
    return builder.toString();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T10:37:07.173

有点离题，但您可能想查看现有的 RSS 框架之一，例如[ROME](https://rometools.jira.com/wiki/display/ROME/Home#)。比重新发明轮子要好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T09:26:58.880

`<?xml version="1.0" encoding="UTF-8"?>`似乎不见了。也没有根元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T09:44:57.800

您确定 XML 字符串没有被 DefaultHttpClient 转换吗？我尝试了您的代码并更改了 XMLFunctions.getXML() 方法以直接提供 XML 字符串，而不是通过 DefaultHttpClient 获取它，输出就像

```
Unitec hosts American film students
http://www.usu.co.nz/node/4640
<p>If you’ve been hearing American accents around the Mt Albert campus over the past week. 
```

正如预期的那样。

# java - 一个平台上的 Java 中的 OutOfMemoryError，但不是另一个平台

> ID：11825506
> 
> 赞同：1
> 
> 时间：2012-08-06T09:20:30.163
> 
> 标签：java, memory, out-of-memory, cross-platform, jvm-arguments

我遇到了一个关于 outOfMemory 错误的奇怪问题。我写了一个应用程序，它在某些部分内存使用量很大。在我的笔记本电脑（linux，64bit，eclipse indigo，vmargs：xms：40，xmx：512，4gb物理内存）上，应用程序运行没有任何问题..在另一台电脑上（WinXP SP3，32bit，eclipse juno，vmargs：xms：40 , xmx:1024(!), 2gb 物理内存）应用程序终止并在标题中声明错误。两台机器都使用 oracle 的 java 7 jdk。这怎么可能，应用程序在另一台比我的笔记本电脑拥有更多堆空间的电脑上失败。我在我的笔记本电脑上开发了应用程序......但我认为这不应该是这个错误的原因，对吧？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T09:29:35.590

Hotspot Java 的 32 位和 64 位版本对于如何确定堆的默认最大大小有不同的策略。在 32 位 JVM 上，使用固定的默认堆大小。在 64 位 JVM 上，堆大小取决于系统上的物理内存量。

解决方案是使用`java`命令`-Xmx`选项显式设置最大堆大小。

* * *

在您的情况下，您已经在使用 -Xmx 参数，并且（显然）您在 32 位平台上使用了更大的值......并且 32 位版本首先死亡！我可以想到许多可能的解释（可能性越来越小）：

*   您的 32 位机器没有足够的交换空间，并且在尝试增加堆时无法满足 JVM 对更多内存的请求。

*   您的应用程序正在计算有多少可用内存并相应地调整其行为......但在大内存情况下会出错。

*   在这两种情况下，应用程序的输入存在一些差异，这就是导致问题的原因。

*   该应用程序正在使用内存映射文件（或其他类似的文件），这些文件占用了很大一部分地址空间......减少了堆可用的地址空间。在 64 位机器上，您有许多 GB 的地址空间，但在 32 位 Windows XP 机器上，您的应用程序的地址空间将被操作系统和指令集/硬件架构限制在 ~2Gb。

（您对问题的更改描述无济于事......）

* * *

如果您从 Eclipse 启动应用程序，您可能会将 Eclipse JVM 使用的 -Xmx 设置与运行应用程序的 JVM 使用的 -Xmx 设置混淆。如果您没有在应用程序的启动器配置中明确设置 -Xmx 选项......它将使用默认堆大小！

* * *

回应您的评论：

> 但我必须实现一个应用程序，它将作为一个 jar 包含在另一个项目中，这是一个 Eclipse 插件。

对于 Eclipse 插件，JVM 大小由父 Eclipse 确定。你的插件在这件事上没有发言权。如果您的插件需要大量堆空间，则需要让用户手动调整 Eclipse 堆参数。

如果您从另一个 Eclipse 实例启动该 Eclipse 实例......我不确定应用程序启动器参数是否会产生任何影响。但这仅对开发插件的您（和其他人）很重要。

（对于可执行 JAR 文件，无法在 JAR 清单中指定堆大小。但还有其他选项 - 请参阅[Can I set Java max heap size for running from a jar file?。](https://stackoverflow.com/questions/1018217/can-i-set-java-max-heap-size-for-running-from-a-jar-file)）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-06T09:32:40.620

并非所有 OutOfMemoryErrors 都是相同的。您可以从中获取 OutOfMemoryError

*   堆空间不足
*   GC太多。
*   缺乏烫发
*   堆栈空间不足（创建新线程）
*   交换空间不足
*   其他我已经忘记了。

您需要查看实际错误，我怀疑您的虚拟内存不足，因为您在 Windows XP 上总共只有大约 1.5 GB。

您可能会发现**减小最大堆大小**可以解决此问题，因为它会增加可用虚拟内存。

* * *

您需要检查您是否真的设置了您认为的最大值。在 64 位服务器 JVM 上，默认值可能很好（在这种情况下，您永远不需要设置它们）在 32 位客户端 JVM 上，默认值是公平的。

# c# - 寻找 ASP.NET MVC 和 MonoRail 之间的现代比较

> ID：11825510
> 
> 赞同：6
> 
> 时间：2012-08-06T09:20:40.203
> 
> 标签：c#, .net, asp.net-mvc-3, web-frameworks, castle-monorail

我来自 Ruby on Rails，我需要创建一个 C# Web 应用程序。目前我正在研究 ASP.NET MVC 和 MonoRail。我发现的大多数比较都是从 2008 年到 2009 年，当时 ASP.NET MVC 还很新，而 MVC 的大部分反对意见是它过于原始，不如 MonoRail 精致。

好吧，从那时起已经过去了几年，微软在 ASP.NET MVC 上做了很多工作。这两个框架的现代版本如何相互比较？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:03:38.753

大约四年前我评估了 MonoRail，与今天的 mvc3 相比，这些是主要区别（恕我直言）

*   Razor 模板引擎作为 MVC 默认值。使用起来很愉快，而 Monorail 默认使用 NVelocity。我查看了 Castleproject 的网站，并计划升级 Monorail...
*   MVC3 的更多文档，根据今天——也许是我的错——我在 Monorail 的网站上找不到任何在线文档。
*   Areas, Partials, Razor 在 VS2010 中高度集成。如果你不喜欢它，你可以插入并使用不同的模板引擎。
*   MVC3 具有更好的 Ajax/Jquery 集成，不显眼的表单验证

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T21:11:32.223

在过去的几年里，我一直在使用这两个框架。最初，当 mvc 出现时，我们坚持使用单轨，因为我们觉得它很原始。恕我直言，MVC3 现在比 Monorail 2 更成熟，具有更好的支持、更多文档和定期发布的更新版本。

*   Razor 比 nvelocity 更强大，并且具有 nvelocity 所缺乏的强大的 Visual Studio 支持。
*   单轨视图未编译与已编译的 MVC3 视图相比。有时在开发时，只需更改视图并立即更改即可。另一方面，编译视图更快。
*   Monorail 已经有一段时间没有新版本了，而且似乎停滞不前。Monorail3 正在开发中。
*   MVC3 现在也支持帮助程序，既可以作为扩展方法，也可以直接在 Razor 视图中声明它们。Monorail 仅支持助手作为助手类的静态方法。
*   MVC3 有更好的路由支持。
*   MVC3 现在也支持过滤器的 IoC。
*   MVC3 支持将过滤器应用于方法级别，但单轨仅支持控制器级别的过滤器。
*   MVC3 不支持开箱即用的 Ioc，但您可以为此使用 IDependencyResolver。您可以为此找到许多解决方案。
*   MVC3 对 CSRF 攻击有很好的支持。在 Monorail 中，您需要结合使用助手和过滤器自行开发。
*   MVC3 支持预编译视图，因此您可以在发布站点之前最大限度地减少错误。但是你不能用 Monorail 中的 nvelocity 视图来做到这一点，因为它们是被解释的
*   MVC3 html 自动编码任何字符串。在 Monorail 中，您总是需要为此调用助手。

当 Monorail 3 出来时，看看他们支持什么会很有趣。查看[https://docs.google.com/document/d/1AkeeJPh8kZQKtnHN3RDR3v-UfG7zt9wCL0jMiualUqI/edit?hl=en&authkey=CN7U99YN&pli=1](https://docs.google.com/document/d/1AkeeJPh8kZQKtnHN3RDR3v-UfG7zt9wCL0jMiualUqI/edit?hl=en&authkey=CN7U99YN&pli=1)，这是 Hammet 对 Monorail 3 的价值主张。

# java - JFormattedTextField 中的值未清除

> ID：11825514
> 
> 赞同：5
> 
> 时间：2012-08-06T09:21:00.983
> 
> 标签：java, swing, jformattedtextfield

我发现很难清除`JFormattedTextField`s 的值。怎么做？

我试过

```
txtJFormattedTextField.setText(""); 
```

但是当再次失去焦点时，我清除的值会出现。我阅读了有关此问题的 API。

我为日期字段创建 JTFormattedTextFields 的工厂如下 -

```
public static JFormattedTextField createDateField() {
        MaskFormatter maskFormatter = null;
        try {
            maskFormatter = new MaskFormatter("##/##/####");
        } catch (ParseException e) {
            e.printStackTrace();
        }
        JFormattedTextField formattedTextField = new JFormattedTextField(
                maskFormatter);
        SwingHelper.installDateValidation((AbstractDocument) formattedTextField
                .getDocument());
        formattedTextField.setColumns(10);
        return formattedTextField;
    } 
```

试过了

```
try {
    ((JFormattedTextField) txtSigninDate).commitEdit();
} catch (ParseException e) {
    e.printStackTrace();
} 
```

结果是异常 - 下面是异常跟踪。

```
java.text.ParseException: stringToValue passed invalid value
    at javax.swing.text.MaskFormatter.stringToValue(MaskFormatter.java:456)
    at javax.swing.text.MaskFormatter.stringToValue(MaskFormatter.java:371)
    at javax.swing.JFormattedTextField.commitEdit(JFormattedTextField.java:530)
    at app.view.action.Authentication_Action.clearSigninFields(Authentication_Action.java:207)
    at app.view.action.authentication.AuthenticationCommand.decorateSignout(AuthenticationCommand.java:285)
    at app.view.action.authentication.AuthenticationCommand.executeSignin(AuthenticationCommand.java:122)
    at app.view.action.Authentication_Action$2.actionPerformed(Authentication_Action.java:292)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T09:45:38.260

1.取决于使用`Formatter`

```
JFormattedTextField.setValue(0.00); 
```

2.或`MaskFormatter`

```
JFormattedTextField.setValue(null); 
```

3\. 可以为with设置`null`值，但我建议为具体使用适当的值，例如 for设置`JFormattedTextField``Formatter``Formatter``NumberFormatter``setValue(0.00)`

4.为了获得更好的帮助，请尽快发布[SSCCE](http://mindprod.com/jgloss/sscce.html)，否则您的问题可能无法回答，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:05:22.967

您看到的行为的原因是 a恢复为 on和 on`JFormattedTextField`的最后一个有效值。通常，您的代码应该使用 的 getter 和 setter 与这样的字段进行交互，而不是像常规的.`focusLost``commit``value``text``JTextComponent`

所以解决方案是设置一个由格式化程序格式化为空字符串的值。

有关更多信息，请参阅[教程](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-30T22:16:45.173

JFormattedTextField 将返回使用格式化程序工厂时输入的旧值的原因是，当焦点从字段中丢失时，它会验证输入或缺少输入。

答案很简单，可以在 java docs 网站上找到在您的情况下，这就是它的工作原理

```
txtJFormattedTextField.setFocusLostBehavior(JFormattedTextField.PERSIST); 
```

在创建文本字段后添加此行，当焦点丢失时，它将不再尝试验证输入，换句话说，即使它是“无效”的，也会保持字段的当前值

[https://docs.oracle.com/javase/7/docs/api/javax/swing/JFormattedTextField.html](https://docs.oracle.com/javase/7/docs/api/javax/swing/JFormattedTextField.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-06T09:23:54.463

尝试添加

```
formattedTextField.commitEdit(); 
```

设置文字后；

# python - 对于不同的 Linux 发行版（Debian、Redhat、Slackware，...），python 标准库和 dist 包的路径是否不同？

> ID：11825516
> 
> 赞同：10
> 
> 时间：2012-08-06T09:21:09.267
> 
> 标签：python, linux, path, linux-distro

我的问题假设您在那些不同的 linux 发行版上使用相同的 python 版本。我还从我的问题中排除了虚拟环境。

我使用基于 Debian 的发行版 Ubuntu。python 标准库（用 python 编写的模块/包）的路径是`/usr/lib/python2.7`. “外部”python 包的路径是`/usr/local/lib/python2.7/dist-packages`.

非常感谢获得这些路径的系统独立方式。

## 编辑1

我发现：

```
>>> from distutils.sysconfig import get_python_lib
>>> print get_python_lib()
/usr/local/lib/python2.7/dist-packages 
```

和

```
>>> print get_python_lib(standard_lib=True)
/usr/lib/python2.7 
```

## 编辑2

我认为第一次编辑中的方法已被弃用，因为我只能找到它，直到 python2.5 文档。新方法（在 2.7 文档中）：

```
>>> import sysconfig
>>> sysconfig.get_path_names()
('stdlib', 'platstdlib', 'purelib', 'platlib', 'include', 'scripts', 'data')
>>> print sysconfig.get_path('platlib')
/usr/local/lib/python2.7/dist-packages 
```

我还没有找到如何`/usr/lib/python2.7`使用 sysconfig 查找。现在，我将使用已弃用的方法，并假设这会产生预期的结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T09:24:20.767

是的，它不同，例如在 CentOS 5.6 中，python 外部模块被放置在`/usr/lib/python2.6/site-packages`. 实际上`dist-packages`是[debian 特定的目录](https://stackoverflow.com/questions/9387928/whats-the-difference-between-dist-packages-and-site-packages)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T09:30:06.893

你可以从这里 [http://www.aosabook.org/en/packaging.html](http://www.aosabook.org/en/packaging.html)阅读更多关于这个主题的内容，如果我们想将一个包部署到软件存储库，它会讨论关于打包和库位置的分配。

我已经在我的博客中谈到了这一点，请看看并给我一些反馈

[http://insidepython.wordpress.com/2012/08/03/quickintro/](http://insidepython.wordpress.com/2012/08/03/quickintro/)

干杯

# jubula - Jubula 是否支持 GEF/GMF 元素？

> ID：11825517
> 
> 赞同：0
> 
> 时间：2012-08-06T09:21:13.227
> 
> 标签：jubula

我正在尝试使用“Jubula 版本：1.2.0”为 gmf 应用程序创建功能测试用例

关于 AUT：该应用程序（基于 Eclipse）在“调色板”中有图形元素。从这个调色板中，我想选择元素并将它们放在“编辑器”上以创建图表。

我面临的问题：

1.  Jubula 中没有扩展调色板的选项。
2.  根据我的搜索，我无法找到有关 Jubula 如何与 gmf 元素一起使用的任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:23:48.460

Eclipse 帮助文档说“强烈建议应用程序开发人员通过为其应用程序实现可访问性插件来增强这种支持。”

因此，如果您使用 GEF 制作了一些自定义元素，您最好制作一些插件供 Jubula 与您的应用程序一起使用。

参考这个： [http ://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jubula.client.ua.help%2Fhtml%2Fmanual%2Fnode332.html](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jubula.client.ua.help%2Fhtml%2Fmanual%2Fnode332.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:09:43.303

关于如何使用 Jubula 测试 GEF 编辑器的一般信息可以在官方 Eclipse 在线帮助系统中找到：

[http://help.eclipse.org/juno/topic/org.eclipse.jubula.client.ua.help/html/manual/node329.html?cp=24_3_2](http://help.eclipse.org/juno/topic/org.eclipse.jubula.client.ua.help/html/manual/node329.html?cp=24_3_2)

Eclipse Jubula 论坛也可能是检查/询问任何特定于 Jubula 的问题的好地方：

[http://www.eclipse.org/forums/index.php?t=thread&frm_id=208](http://www.eclipse.org/forums/index.php?t=thread&frm_id=208)

# google-maps - 为什么我在 Google 地图中收到“TypeError：a.lng 不是函数”？

> ID：11825519
> 
> 赞同：-2
> 
> 时间：2012-08-06T09:21:27.747
> 
> 标签：google-maps, google-maps-api-3

另外我不知道在哪里看。Google Maps API 版本为 2。

编辑：该文件是[http://maps.gstatic.com/intl/tr_ALL/mapfiles/400d/maps2.api/main.js](http://maps.gstatic.com/intl/tr_ALL/mapfiles/400d/maps2.api/main.js)第 610 行编辑：我认为是版本 3，但它是 2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:34:32.987

问题是由

```
map.addControl((new GSmallMapControl()));
map.addControl((new GMapTypeControl()));
map.setCenter((new GLatLng(38.92220023349402, 35.5), 6)); 
```

正确的代码应该是：

```
map.addControl(new GSmallMapControl());
map.addControl(new GMapTypeControl());
map.setCenter(new GLatLng(38.92220023349402, 35.5), 6); 
```

# php - 重新执行/重新加载 div 代码

> ID：11825522
> 
> 赞同：0
> 
> 时间：2012-08-06T09:21:38.410
> 
> 标签：php, javascript, html, refresh, reload

我有一个带有网格的 php 页面，它从 sql 数据库加载一些信息，连接到该数据库并执行查询的代码都在一个 div 中，php 代码 + html 代码。当用户选择一个网格的行时，他可以修改该行的值，之后，网格上的信息发生了变化，我试图重新加载该网格而不重新加载整个页面。有没有办法（javascript调用或其他东西）重新加载/重新执行特定div中的代码？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:30:47.753

你可以泛化你的 PHP 函数来获取这个 div 的数据，并在 Ajax 请求之后使用它。PHP 代码不绑定到任何 div，它是 HTML 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:37:20.663

PHP 没有办法...将 HTML 页面与 PHP 分离..使用 ajax 请求来提取

# objective-c - 显示全景图像时内存泄漏

> ID：11825525
> 
> 赞同：2
> 
> 时间：2012-08-06T09:21:55.913
> 
> 标签：objective-c, ios, panoramas

我正在使用 PanoramaGL v0.1 显示全景图像。我的全景图像的分辨率为 4000 * 2000，大小：1 mb。在显示图像应用程序时，在模拟器中的仪器上检查了大约 60mb 的大小。此外，每当我点击按钮显示全景图像内存被分配，但从未被释放。

以下是代码：

```
NSObject<PLIPanorama> *panorama;

panorama = [PLSphericalPanorama panorama];
[(PLSphericalPanorama *)panorama setTexture:[PLTexture textureWithImage:[PLImage imageWithCGImage:imgPanoramic.CGImage]]];
[plView setPanorama:panorama];

panorama = nil;

- (void)dealloc 
{ 
  [plView release];
  [super dealloc];
} 
```

在我出错的地方需要一些指导。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T15:31:53.203

加载全景图像后删除所有纹理。

```
[plView removeAllTextures]; 
```

# php - 即使在其他页面上，require_once 也无法打开流，它运行良好且没有错误

> ID：11825527
> 
> 赞同：1
> 
> 时间：2012-08-06T09:22:02.200
> 
> 标签：php, stream, require

我在可能不是什么大问题的事情上遇到了这样的困难。

我不断收到错误消息：警告：require（models/match.php）[function.require]：无法打开流：没有这样的文件或目录。

现在我知道它确实可以在同一文件级别的同一目录中工作，但当我将它与其他代码位一起放入时，它已经工作了

代码：

```
 <?php
define('KICKOFF_REL','../../../../');

set_include_path(KICKOFF_REL);  

require 'models/match.php';

$league_id = 1; //'premier league';
require 'models/league.php';
$theMenuLeagueObj = new league();   
$league_details = $theMenuLeagueObj->fetch_league($league_id);

//require 'models/match.php';
$theMatchObj = new match(); //Create match object
$allAvaliableMatches = $theMatchObj->fetch_all_active_matches($league_details['league_name']);
echo '<table border="1">';
echo '<tr>';
    echo '<th scope="col">'. $league_details['league_name'] . '</th>';
    echo '<th scope="col">'. $league_details['league_name'] . '</th>';
    echo '</tr>';
foreach($allAvaliableMatches as $thematch){

    echo '<tr>
    <td>'. $thematch['home_team'] . " v " . $thematch['away_team'] . '</td>
    <td>Sunday Games</td></tr>';

    }

    echo '</table>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:23:39.877

其他文件有正确的路径，这个没有。

这就是其他人工作而这个人没有工作的原因。

用于`realpath('model/match.php')`查看PHP 在评估您提供的*相对路径时使用的**完整路径*。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:33:48.693

每当你使用 require、require_once、include 或 include_once 时，你必须检查路径是否正确。检查您是否只需**ctrl+left click**。如果路径正确，则将打开，否则不会。*

# java - 线程“main”中的异常 java.lang.UnsatisfiedLinkError”

> ID：11825528
> 
> 赞同：4
> 
> 时间：2012-08-06T09:22:03.410
> 
> 标签：java, smartcard

当我运行我的智能卡读取程序时会出现此异常。我的设备未连接。请帮我。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-06T09:25:01.403

这意味着它无法加载您需要的共享库。这可能是因为。

*   该库不在您的库路径中。
*   该库没有正确的名称，例如 LIBRARY 必须是 Unix 上的 libLIBRARY.so
*   您无法执行该库。
*   该库不适用于 JVM 的操作系统或位大小。例如，64 位 JVM 不会加载 32 位库。
*   您的 JRE 未正确安装，并且无法加载其自己的库之一。
*   您正在使用一个共享库，它需要另一个您没有的共享库。
*   DLL 不是作为 JNI 库构建的，也不是从 JNA 使用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-10T01:21:37.057

我在使用 System.loadLibrary 时得到了这个，它将使用 java.libary.path 资源。由于 loadLibrary 不允许使用绝对路径，因此您可以使用绝对路径和加载方法。

```
 System.load(HelloWorld.class.getResource("/dlls/HelloWorld.dll")
            .getPath()); 
```

# python - 如何在tornado RequestHandler的prepare方法中进行url路径检查？

> ID：11825533
> 
> 赞同：4
> 
> 时间：2012-08-06T09:22:23.093
> 
> 标签：python, tornado

我想像这样在龙卷风中进行路径检查：

```
class MyRequestHandler(tornado.web.RequestHandler):
    def initialize(self):
        self.supported_path = ['path_a', 'path_b', 'path_c']

    def get(self, action):
        if action not in self.supported_path:
            self.send_error(400)

    def post(self, action):
        if action not in self.supported_path:
            self.send_error(400)

    # not implemented
    #def prepare(self):
        # if action match the path 

app = tornado.web.Application([
    ('^/main/(P<action>[^\/]?)/', MyRequestHandler),]) 
```

我怎样才能检查它`prepare`，而不是两者`get`和`post`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:36:15.067

> 我如何在准备中检查它，而不是同时获取和发布？

简单的！

```
class MyRequestHandler(tornado.web.RequestHandler):
    def initialize(self):
        self.supported_path = ['path_a', 'path_b', 'path_c']

    def prepare(self):
        action = self.request.path.split('/')[-1]
        if action not in self.supported_path:
            self.send_error(400)

    def get(self, action):
        #real code goes here

    def post(self, action):
        #real code goes here 
```

在这里，我们认为您的操作名称中不包含“/”。在其他情况下，检查会有所不同。顺便说一句，您可以使用`request`prepare 方法——这就足够了。

# android - 在 Eclipse 中为 ndk 程序设置构建路径

> ID：11825534
> 
> 赞同：28
> 
> 时间：2012-08-06T09:22:30.470
> 
> 标签：android, eclipse, android-ndk, buildpath

当我在 Eclipse 中构建 android 应用程序时显示此错误：

```
14:43:33 **** Incremental Build of configuration Default for project com.***.NDKDemo ****
ndk-build all 
Cannot run program "ndk-build": Unknown reason

Error: Program "ndk-build" not found in PATH
PATH=[/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games]

14:43:33 Build Finished (took 16ms) 
```

请给我一个解决方案，在 Eclipse 中包含构建路径。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-08-06T09:50:49.450

//转到`Preference` → `Android`→ `NDK`并选择您的 ndk 位置

![在此处输入图像描述](../Images/6bf8f76bdc1fda7d97d3c9b41615acd6.png)

或者

在隐藏的 .bashrc 文件中添加以下行

```
export NDK_PATH=/home/padmakumar/android-ndk-r7b 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-01-13T11:05:58.333

如果您的 NDK 位置已设置，则工具链编辑器中的构建器可能是错误的。转到项目属性，C/C++ 构建 | 工具链编辑器并选择 Android Builder 作为当前构建器。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-06T09:50:42.520

您的情况未设置 ndk-build 的路径。使用编辑器打开您的 .bashsrc 文件（从根文件夹，它将处于隐藏格式，因此 Edit Menu 并选择 Show Hidden Files ），转到最后一行并添加以下代码，

```
NDK_HOME=/opt/android-ndk-r8
export NDK_HOME 
```

现在重新启动计算机并重试。有关更多信息，请参阅我的这个[答案](https://stackoverflow.com/a/11753336/996493)。

# android - 为什么贝宝集成不起作用？

> ID：11825537
> 
> 赞同：1
> 
> 时间：2012-08-06T09:22:38.937
> 
> 标签：android

我已经在我的 android 应用程序中集成了 paypal，但它不工作。点击该按钮有一个按钮移动到贝宝，要求支付贝宝按钮的点击付款很少登录屏幕很少打开，当单击登录屏幕时，输入登录记录消息后打开登录记录消息显示登录失败请任何人看到这个我错了我的代码这是：-

```
private LinearLayout mainLayout = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    System.out.println("inside");
    callPayment();
    setContentView(mainLayout);
}

private void initializePayPal()
{

}
private void callPayment()
{
     mainLayout= new LinearLayout(this);
    PayPal mpaypal = PayPal.initWithAppID(this, "APP-80W284485P519543T", PayPal.ENV_SANDBOX); 
    LinearLayout layoutSimplePayment = new LinearLayout(this);

    layoutSimplePayment.setLayoutParams(new LayoutParams(130,100));

    layoutSimplePayment.setOrientation(LinearLayout.VERTICAL);
    CheckoutButton getpaypalbutton =mpaypal.getPaymentButton(PayPal.BUTTON_152x33,this,PayPal.PAYMENT_TYPE_HARD_GOODS);
    getpaypalbutton.setOnClickListener(this);

    layoutSimplePayment.addView(getpaypalbutton);

    mainLayout.addView(layoutSimplePayment);
}

@Override
public void onClick(View v) 
{
    PayPalPayment mpaypalpayment = new PayPalPayment();
    mpaypalpayment.setAmount(0.2f);
    mpaypalpayment.setCurrency("USD");
    mpaypalpayment.setRecipient("xyz@gmail.com");
    mpaypalpayment.setItemDescription("mother board");
    mpaypalpayment.setMerchantName("BidNear");
    Intent checkoutIntent = new Intent(this, PayPalActivity.class);
    checkoutIntent.putExtra(PayPalActivity.EXTRA_PAYMENT_INFO, mpaypalpayment);
    this.startActivityForResult(checkoutIntent, 1);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
    switch(resultCode) {
    case Activity.RESULT_OK:
    //The payment succeeded
    String transactionID = data.getStringExtra(PayPalActivity.EXTRA_TRANSACTION_ID);
    //Tell the user their payment succeeded
    //Tel break;
    Toast.makeText(this,"Success"+transactionID,Toast.LENGTH_LONG).show();

    case Activity.RESULT_CANCELED:
    //The payment was canceled
    //Tell the user their payment was canceled
    break;
    case PayPalActivity.RESULT_FAILURE:
    //The payment failed -- we get the error from the EXTRA_ERROR_ID and EXTRA_ERROR_MESSAGE
    String errorID = data.getStringExtra(PayPalActivity.EXTRA_ERROR_ID);
    String errorMessage = data.getStringExtra(PayPalActivity.EXTRA_ERROR_MESSAGE);
    Toast.makeText(this,"Failure"+"errorid"+errorID+"errormessage"+errorMessage,Toast.LENGTH_LONG).show();
    //Tell the user their payment was failed.
    }
} 
```

# sencha-touch-2 - 未在 sencha touch 应用程序中为 websql 创建表

> ID：11825539
> 
> 赞同：0
> 
> 时间：2012-08-06T09:22:52.547
> 
> 标签：sencha-touch-2, web-sql

我创建了一个 sencha touch 2 应用程序，其中我使用 websql 进行离线数据存储。我正在使用回调函数创建大约 13 个表。这在桌面 chrome 浏览器上运行良好。但是当我在 android 平板电脑上使用这个应用程序时，只创建了 6 个表，但是当我重新启动我的应用程序时，所有表都被创建了。没有错误。请需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:56:14.723

很简单，只需要增加 db 的内存。

# android - 在 `ImageAdapter extends BaseAdapter` 中设置自定义字体

> ID：11825540
> 
> 赞同：4
> 
> 时间：2012-08-06T09:22:54.760
> 
> 标签：android, gridview, fonts, adapter

我`ImageAdapter extends BaseAdapter`用来给`gridview`. Gridview 有两个`textview`s。我想为其中之一设置自定义字体。使用`Typeface font = Typeface.createFromAsset(getAssets(), "BABYCAKE.TTF");`in`ImageAdapter`给出错误`The method getAssets() is undefined for the type ImageAdapter`。

`ImageAdapter`定义为

```
package com.amit.wozzle;

import java.util.ArrayList;

import android.app.Activity;
import android.content.Context;
import android.graphics.Color;
import android.graphics.Typeface;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;
import android.widget.TextView;
import android.view.LayoutInflater;

public class ImageAdapter extends BaseAdapter
{  
private ArrayList<String> listCountry;  
private ArrayList<String> scorestage;  
private Activity activity;  
Typeface font;

public ImageAdapter(Activity activity,ArrayList<String> listCountry, ArrayList<String> scorestage) {  
    super();  
    this.listCountry = listCountry;  
    this.scorestage = scorestage;  
    this.activity = activity;  
    font = Typeface.createFromAsset(activity.getAssets(), "BABYCAKE.TTF");
}  

@Override  
public int getCount() {  
    // TODO Auto-generated method stub  
    return listCountry.size();  
}  

@Override  
public String getItem(int position) {  
    // TODO Auto-generated method stub  
    return listCountry.get(position);  
}  

@Override  
public long getItemId(int position) {  
    // TODO Auto-generated method stub  
    return 0;  
}  

public static class ViewHolder  
{  
    public ImageView imgViewFlag;  
    public TextView  txtViewTitle; 
    public TextView  txtViewTitle2; 
}  

@Override  
public View getView(int position, View convertView, ViewGroup parent) {  
    // TODO Auto-generated method stub  
    ViewHolder view;  
    LayoutInflater inflator = activity.getLayoutInflater();  

    if(convertView==null)  
    {  
        view = new ViewHolder();  
        convertView = inflator.inflate(R.layout.grid_item, null);  
        view.txtViewTitle = (TextView) convertView.findViewById(R.id.textView1);  
        view.txtViewTitle2.setTypeface(font);
        view.txtViewTitle2 = (TextView) convertView.findViewById(R.id.textView2);  

        // view.imgViewFlag = (ImageView) convertView.findViewById(R.id.imageView1);  
        convertView.setTag(view);  
    }  
    else  
    {  
        view = (ViewHolder) convertView.getTag();  
    }  
    // view.txtViewTitle2.setBackgroundColor(Color.BLUE);
    view.txtViewTitle2.setText(listCountry.get(position)); 
    view.txtViewTitle.setText(scorestage.get(position)); 
    // view.imgViewFlag.setImageResource(scorestage.get(position));  

    return convertView;  
}  
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T09:28:57.067

尝试

```
Typeface font = Typeface.createFromAsset(activity.getAssets(), "BABYCAKE.TTF"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T09:33:26.143

你为什么要在`Typeface`里面创建对象`getView`。`Typeface`占用大量内存，并且会降低您的应用程序的速度，因为内部创建的字体对象数量将减少可用的内存空间`getView`。

相反，字体文件应该只创建一次，并在需要时重复使用。在`getView`. 如果仅在适配器内部使用它并在适配器构造函数中初始化它，请将其声明为适配器内部的实例变量。而不是每次在 getView 中创建新实例，而是使用该单个实例来设置字体。

对于您的错误，请使用活动实例变量来调用`getAssests()`

```
TypeFace font = Typeface.createFromAsset(activity.getAssets(), "fonts/BABYCAKE.TTF"); 
```

**编辑-** 尝试像这样使用它-

```
class DemoFonts{
    private static TypeFace typeFace;   
    public static TypeFace getTypeFace(Context mContext){
        if(typeface==null){
            typeface = Typeface.createFromAsset(mContext.getAssets(), "fonts/BABYCAKE.TTF");
        }

        return typeface;
    }

} 
```

尝试像上面那样使用。假设您`fonts`在资产文件夹中有文件夹。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T11:37:52.200

view.txtViewTitle2 给出空指针异常，因为您试图在初始化之前访问 textView。以下更改应该可以正常工作

```
view.txtViewTitle2 = (TextView) convertView.findViewById(R.id.textView2)
view.txtViewTitle2.setTypeface(font); 
```

# sql - 将不同表中的行值合并到一列中。[SQL]

> ID：11825553
> 
> 赞同：3
> 
> 时间：2012-08-06T09:24:06.757
> 
> 标签：sql, sql-server, sql-server-2012

嗨，我刚刚学习 SQL，我正在尝试从多个表中检索一些数据，但无法让它显示我想要的方式，所以我只是想知道这是否可能，如果可以，有人可以建议一种方法，见下文：

```
 Table1:                     Table2:                     Table3

    Package       Licenses      Package       Licenses      Package      Licenses
    ======================      ======================      =====================
    Product1         20         Product1         15         Product1        0
    Product2         15         Product2         5          Product2        5
    Product3         10         Product3         10         Product3        0 
```

我希望根据包名称将许可证列中的值相互添加，并尽可能显示如下内容：

```
 Package       Licenses
    ======================
    Product1         35
    Product2         25
    Product3         20 
```

如果有人可以让我知道如何做到这一点，如果这样的事情是可能的，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:26:12.153

这是您需要研究的`UNION ALL`条款和`GROUP BY`陈述。

解决方案的要点是

*   使用 a 组合所有表中的所有行`UNION ALL`
*   将结果放入子选择中
*   通过对子选择的结果使用 a`GROUP BY`和`SUM`聚合函数来计算许可证总数

**SQL 语句**

```
SELECT Package, SUM(Licenses) AS Licenses
FROM   (
         SELECT Package, Licenses FROM Table1 UNION ALL
         SELECT Package, Licenses FROM Table2 UNION ALL
         SELECT Package, Licenses FROM Table3
       ) t
GROUP BY
       Package 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T09:28:15.847

尝试这个：

```
SELECT Package, SUM(Licences) as TotalLicences
  FROM (
        SELECT Package, Licences FROM Table1
         UNION ALL
        SELECT Package, Licences FROM Table2
         UNION ALL
        SELECT Package, Licences FROM Table3
       ) AS AllLicences
 GROUP BY Package 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T09:27:19.793

您可以使用 a`union`创建所有许可证的视图，`sum`它们：

```
select  Package
,       sum(Licences) as Licences
from    (
        select  Package
        ,       Licences
        from    Table1
        union all
        select  Package
        ,       Licences
        from    Table2
        union all
        select  Package
        ,       Licences
        from    Table3
        ) as SubQueryAlias
group by
        Package 
```

# sencha-touch-2 - 在 Sencha 2 中为地图提供坐标

> ID：11825554
> 
> 赞同：0
> 
> 时间：2012-08-06T09:24:08.630
> 
> 标签：sencha-touch-2

我不知道如何为 Sencha 2 地图提供坐标，尝试了类似的方法（在 Internet 上的某个地方，我看到有人使用该属性，但它没有在地图 API 的配置列表中定义）。我找不到任何有意义的配置属性或方法，我忽略了什么？

[http://docs.sencha.com/touch/2-0/#!/api/Ext.Map](http://docs.sencha.com/touch/2-0/#!/api/Ext.Map)

```
this.getLoginview().push({
    xtype: 'map',
    position: new google.maps.LatLng(-34.397, 150.644)
    //useCurrentLocation: true
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T17:05:08.940

我想到了：

```
var position = new google.maps.LatLng(60.358115,5.169067);
var map = new Ext.Map({
      mapOptions: {
          center: position
      },

      }
});

loginView.push(map); 
```

# c++ - 为什么没有这个段错误？

> ID：11825560
> 
> 赞同：0
> 
> 时间：2012-08-06T09:24:37.827
> 
> 标签：c++, c

> **可能重复：**
> [为什么这个 C 代码有效？](https://stackoverflow.com/questions/713963/why-does-this-c-code-work)

为什么此用于查找结构中字段偏移量的代码不给出 segfault ？

```
#define offset(structName,fieldName) (&((structName *)0)->fieldName) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T09:26:25.757

因为它没有访问任何数据。它只是计算一个地址。尝试执行以下任一操作：

```
foo = *offset(MyStruct, MyField);
*offset(MyStruct, MyField) = 1234; 
```

你会看到一个漂亮的 SEGFAULT :-)

# javascript - html表格到javascript中的excel表格

> ID：11825566
> 
> 赞同：1
> 
> 时间：2012-08-06T09:24:59.537
> 
> 标签：javascript, html

我正在使用我在网上找到的代码的这个特定部分，我正在尝试实现它，这个 javascript 获取 html 表中显示的表的值并将其转换为 excel 表。

但由于某些未知原因，以下代码部分不起作用。它只能在 IE 中使用，我不确定为什么下面的代码不起作用。有人可以知道这段代码有什么问题，可以告诉我如何更正这段代码吗？

```
<html>
  <head>
    <script type="text/javascript">
      function write_to_excel() {
        str="";
        var mytable = document.getElementsByTagName("table")[0]; 
        var row_Count = mytable.rows.length; 
        var col_Count = mytable.getElementsByTagName("tr")[0].getElementsByTagName("td").length; 

        var ExcelApp = new ActiveXObject("Excel.Application"); 
        var ExcelSheet = new ActiveXObject("Excel.Sheet"); 
        ExcelSheet.Application.Visible = true; 

        for(var i=0; i < row_count ; i++) 
        { 
          for(var j=0; j < col_Count; j++) 
          { 
            str= mytable.getElementsByTagName("tr")[i].getElementsByTagName("td")[j].innerHTML; 
            ExcelSheet.ActiveSheet.Cells(i+1,j+1).Value = str; 
          } 
        } 

      }
    </script>
    </script>
  </head> 
  <body> 

    <input type="submit" value="Export to EXCEL" onclick="write_to_excel();"/> 

    <!-- ************************************************--> 
    <!--**** INSERT THE TABLE YOU WANT EXPORT HERE ****--> 
    <table><tr><td>First</td><td>second</td></tr></table> 
    <!-- *******************example given above****************--> 

  </body> 
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T10:16:57.210

这可以解决问题：

```
function writeToExcel() {
    var i, j, str,
        myTable = document.getElementById('mytable'),
        rowCount = myTable.rows.length,
        excel = new ActiveXObject('Excel.Application');// Activates Excel
    excel.Workbooks.Add(); // Opens a new Workbook
    excel.Application.Visible = true; // Shows Excel on the screen
    for (i = 0; i < rowCount; i++) {
        for (j = 0; j < myTable.rows[i].cells.length; j++) {
            str = myTable.rows[i].cells[j].innerText;
            excel.ActiveSheet.Cells(i + 1, j + 1).Value = str; // Writes to the sheet
        }
    }
    return;
} 
```

`for(i)`您的原始代码实际上有效， -loop ( `row_count == undefined`)中只有一个错字。并且没有错误？但是，使用此代码，您可以摆脱在行中引用单元格的可怕黑客攻击，它还会打开“工作簿”而不是“对象”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T20:30:55.263

它在哪里保存 excel 表或至少打开 excel 表？我正在我的 Wamp 服务器上尝试此代码，单击按钮后，我看不到任何操作。我如何检查是否发生了什么事？

# php - 你如何在 PHP 中生成边界？

> ID：11825568
> 
> 赞同：1
> 
> 时间：2012-08-06T09:25:02.103
> 
> 标签：php, curl, multipartform-data, boundary

我正在使用 Curl 库来模拟“multipart-form-data”提交，然后我注意到我需要生成一个唯一的字符串，但我不知道该怎么做。

例如：

```
Content-Type: multipart/form-data;  
boundary=---------------------------491299511942
Content-Length: 95418
-----------------------------491299511942
Content-Disposition: form-data; name="a"
-----------------------------491299511942
Content-Disposition: form-data; name="b"
/page.asp
-----------------------------491299511942
Content-Disposition: form-data; name="c"
-----------------------------491299511942
Content-Disposition: form-data; name="d"
true
-----------------------------491299511942
Content-Disposition: form-data; name="e"
1
-----------------------------491299511942
Content-Disposition: form-data; name="f" 
```

如何生成该边界？从图书馆或只是一些黑客？

**编辑**：在这个例子中边界=491299511942

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T09:30:31.713

如果您使用 curl，则不需要“手动”准备数据

```
$post_data = array(
    'a' => '@/absolute/path/to/file',
    'b' => '@/absolute/path/to/file',
);
curl_setopt($ch, CURLOPT_POST, true)
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_data); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-22T09:56:16.227

要回答实际问题，您可以执行以下操作：

```
$boundary = hash('sha256', uniqid('', true)); 
```

# delphi - Delphi中的OLE自动化：找出选择的行号

> ID：11825570
> 
> 赞同：1
> 
> 时间：2012-08-06T09:25:15.367
> 
> 标签：delphi, ms-word, automation, ole

有没有办法使用 Delphi 中的 OLE 自动化（使用 Unit Word2000 的 TWordApplication）在 Word 文档中搜索字符串，然后返回选择开头的行号？不过，我已经想出了如何在 Word 文档中进行搜索。

# url - # 添加在 url 中而不是替换

> ID：11825571
> 
> 赞同：0
> 
> 时间：2012-08-06T09:25:16.387
> 
> 标签：url, hash

我在基本的 MVC4 移动网络应用程序中添加了一个显示谷歌地图的页面。

这是我的网址.. h​​ttp://zenith.iwaywiz.com: [8000/MobApp/](http://zenith.iwaywiz.com:8000/MobApp/)

这在桌面浏览器中运行良好，但是当我在移动设备中检查时，当我单击联系人选项卡时，它给我带来了麻烦，URL 是

zenith.iwaywiz.com:8000/MobApp/Home/Contact

现在，当我单击地图选项卡时，URL 更改为

zenith.iwaywiz.com:8000/MobApp/Home/Contact#/MobApp/Home/Map

代替

zenith.iwaywiz.com:8000/MobApp/Home/Map

此问题仅针对此页面且仅在移动设备中出现

任何人都可以给我一个解决方案我对MVC4和移动Web开发非常陌生，感谢合适的答案......谢谢......

# c++ - 在字符串中显示空格

> ID：11825573
> 
> 赞同：1
> 
> 时间：2012-08-06T09:25:29.320
> 
> 标签：c++, string

我忙于一个实用的。我必须输入一个字符串或一条消息，并且必须将其转换为摩尔斯电码：'A' = .- 'B' = -... ecs。

通过使用一系列 if 语句，我可以毫无问题地做到这一点。

```
for(int i = 0;i < stringvalue.length();i++)
{
    if(stringvalue == 'A')
        cout << ".-";
        //there is 26 if statements

} 
```

但是当我输入一个字符串时，例如。

```
"Testing data" 
```

只有字符串的第一部分被转换（测试被转换）为莫尔斯。

为什么它不转换空格后的部分。如果字符串中有空格，则必须输出“/”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T09:29:16.650

如果您的输入例程如下所示：

```
std::string input;
std::cin >> input; 
```

输入被读取到第一个空白字符。要阅读整行，您可以使用`std::getline`.

```
std::getline(std::cin, input); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T09:30:47.967

因为您正在从`stdin`using中读取字符串`cin >> stringvalue`。C++[`operator>>(istream, string)`](http://en.cppreference.com/w/cpp/string/basic_string/operator_ltltgtgt)在空格后停止；它一次只读取一个以空格分隔的标记。

相反，使用[`getline`](http://en.cppreference.com/w/cpp/string/basic_string/getline)：

```
std::getline(std::cin, stringvalue); 
```

# netbeans - netbeans 在使用自动完成而不是插入时替换变量名

> ID：11825579
> 
> 赞同：2
> 
> 时间：2012-08-06T09:26:10.973
> 
> 标签：netbeans, autocomplete, ide, autosuggest

当我想使用自动完成 ctrl-space 将现有变量更改为新变量时遇到问题，我编写或导航新名称但选择它时，它会插入光标所在的位置而不是替换旧变量。在 Delphi IDE 中，这是默认行为（即在光标位置替换而不是插入）。

示例：如果我想用 MyVar2 替换**MyVar1**并将光标放在*My*之后，它将变为**MyVar2Var1**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T12:56:44.273

当显示自动完成框时，不要`Enter`按键，而是按`Ctrl`+ `Enter`。

# authentication - Kohana 身份验证登录

> ID：11825581
> 
> 赞同：0
> 
> 时间：2012-08-06T09:26:15.567
> 
> 标签：authentication, kohana-3.2

我正在尝试使用 kohana auth 模块，但出现错误：'调用未定义的方法 Model_User::unique_key()'

我使用代码：

```
$auth = Auth::instance();
    if ($auth->login($_POST['email'], $_POST['password']))
    {
        echo 'hello, '.$auth->$_POST['username'];
    }
    else
    {
        echo 'login failed!';
    } 
```

当电子邮件和密码正常时会发生这种情况。你知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T05:11:42.900

您收到的错误似乎是因为您没有用于身份验证的配置文件设置。您应该有一个位于 /application/config/auth.php 的文件。这是我的一个例子：

```
<?php defined('SYSPATH') or die('No direct access allowed.');

return array(

    'driver'       => 'ORM',
    'hash_method'  => 'sha256',
    'hash_key'     => 'Somebiglonghaskeyofmixedcharacters102345567709',
    'lifetime'     => 1209600,
    'session_type' => Session::$default,
    'session_key'  => 'auth_user',

    // Username/password combinations for the Auth File driver
    'users' => array(
        // 'admin' => 'b3154acf3a344170077d11bdb5fff31532f679a1919e716a02',
    ),
); 
```

我的配置文件导致 auth 使用数据库来存储用户。请参阅有关如何设置数据库的文档，或者您可以使用文件身份验证。

一旦你的配置工作，你可以像这样登录用户：

```
$user = Auth::instance()->login($this->request->post('username'), $this->request->post('password'), $remember); 
```

我还发现在 application/classes/model/user.php 中创建我自己的用户模型很有用。这是我的一个例子：

```
<?php defined('SYSPATH') or die('No direct access allowed.');
class Model_User extends ORM {

/**
 * A user has many tokens and roles
 *
 * @var array Relationhips
 */
protected $_has_many = array(
    'user_tokens' => array('model' => 'user_token'),
    'roles'       => array('model' => 'role', 'through' => 'roles_users'),
);

/**
 * Rules for the user model. Because the password is _always_ a hash
 * when it's set,you need to run an additional not_empty rule in your controller
 * to make sure you didn't hash an empty string. The password rules
 * should be enforced outside the model or with a model helper method.
 *
 * @return array Rules
 */
public function rules()
{
    return array(
        'username' => array(
            array('not_empty'),
            array('max_length', array(':value', 32)),
            array(array($this, 'unique'), array('username', ':value')),
            array('regex', array(':value', '/^[a-z][a-z0-9]+$/i')),
        ),
        'email' => array(
            array('not_empty'),
            array('email'),
            array(array($this, 'unique'), array('email', ':value')),
        ),
    );
}

/**
 * Filters to run when data is set in this model. The password filter
 * automatically hashes the password when it's set in the model.
 *
 * @return array Filters
 */
public function filters()
{
    return array(
        'password' => array(
            array(array(Auth::instance(), 'hash'))
        )
    );
}

/**
 * Labels for fields in this model
 *
 * @return array Labels
 */
public function labels()
{
    return array();
}

/**
 * Complete the login for a user by incrementing the logins and saving login timestamp
 *
 * @return void
 */
public function complete_login()
{
    if ($this->_loaded)
    {
        // Update the number of logins
        $this->logins = new Database_Expression('logins + 1');

        // Set the last login date
        $this->last_login = time();

        // Save the user
        $this->update();
    }
}

/**
 * Tests if a unique key value exists in the database.
 *
 * @param   mixed    the value to test
 * @param   string   field name
 * @return  boolean
 */
public function unique_key_exists($value, $field = NULL)
{
    if ($field === NULL)
    {
        // Automatically determine field by looking at the value
        $field = $this->unique_key($value);
    }

    return (bool) DB::select(array('COUNT("*")', 'total_count'))
        ->from($this->_table_name)
        ->where($field, '=', $value)
        ->where($this->_primary_key, '!=', $this->pk())
        ->execute($this->_db)
        ->get('total_count');
}

/**
 * Allows a model use both email and username as unique identifiers for login
 *
 * @param   string  unique value
 * @return  string  field name
 */
public function unique_key($value)
{
    return Valid::email($value) ? 'email' : 'username';
}

/**
 * Password validation for plain passwords.
 *
 * @param array $values
 * @return Validation
 */
public static function get_password_validation($values)
{
    return Validation::factory($values)
        ->rule('password', 'min_length', array(':value', 8))
        ->rule('password_confirm', 'not_empty')
        ->rule('password_confirm', 'min_length', array(':value', 8))
        ->rule('password_confirm', 'matches', array(':validation', 'password', ':field'));
}

/**
 * Create a new user
 *
 * Example usage:
 * ~~~
 * $user = ORM::factory('user')->create_user($_POST, array(
 *  'username',
 *  'password',
 *  'email',
 * );
 * ~~~
 *
 * @param array $values
 * @param array $expected
 * @throws ORM_Validation_Exception
 */
public function create_user($values, $expected)
{
    // Validation for passwords
    $extra_validation = Model_User::get_password_validation($values)
        ->rule('password', 'not_empty');

    return $this->values($values, $expected)->create($extra_validation);
}

/**
 * Update an existing user
 *
 * [!!] We make the assumption that if a user does not supply a password, that they do not wish to update their password.
 *
 * Example usage:
 * ~~~
 * $user = ORM::factory('user')
 *  ->where('username', '=', 'kiall')
 *  ->find()
 *  ->update_user($_POST, array(
 *      'username',
 *      'password',
 *      'email',
 *  );
 * ~~~
 *
 * @param array $values
 * @param array $expected
 * @throws ORM_Validation_Exception
 */
public function update_user($values, $expected = NULL)
{
    if (empty($values['password']))
    {
        unset($values['password'], $values['password_confirm']);
    }

    // Validation for passwords
    $extra_validation = Model_User::get_password_validation($values);

    return $this->values($values, $expected)->update($extra_validation);
}
} // End Auth User Model 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T23:14:50.420

我遇到了这个问题，并通过让我的模型扩展来修复它`Model_Auth_User`。

# c# - 更新 WP7 列表框

> ID：11825586
> 
> 赞同：0
> 
> 时间：2012-08-06T09:26:39.607
> 
> 标签：c#, silverlight, windows-phone-7, listbox, listboxitem

我有一个包含电话号码的网络服务。电话查询 Web 服务以获取电话列表并将它们显示在 ListBox 中。问题是我不知道如何查询每部电话的电话联系人数据库，获取联系人姓名并在列表框中显示姓名而不是电话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T17:58:40.497

> Windows Phone SDK 7.1 为您提供了对用户的联系人数据的只读访问权限，这些数据汇总在用户的不同帐户中。有关详细信息，请参阅[Windows Phone 的联系人和日历。](http://msdn.microsoft.com/en-us/library/hh202972%28v=vs.92%29.aspx)

[这篇 MSDN 文章应该可以帮助您入门](http://msdn.microsoft.com/en-us/library/hh286414%28v=vs.92%29.aspx)

这也应该有帮助：

```
Contacts cont = new Contacts();
cont.SearchCompleted += (s, e) =>
    {
        foreach (var contact in e.Results)
        {
            string name = contact.DisplayName;
        }
    };
cont.SearchAsync("07000000000", FilterKind.PhoneNumber, null); 
```

# objective-c - 如何在单个数组的不同索引上获取不同的数组

> ID：11825587
> 
> 赞同：-1
> 
> 时间：2012-08-06T09:26:40.420
> 
> 标签：objective-c, ios, xcode, nsmutablearray

我有一个名为 invoiceInfo1 的数组，我将它传递给另一个名为 allInfo 的数组。

但我想要不同的 invoiceInfo 索引，创建不同的数组并将其传递给 allInfo。

我的代码如下：

```
for (int i=0; i<[userdata count]; i++) {  

    NSLog(@" userdata count :%d",[userdata count]);

    invoiceInfo1 = [NSMutableArray arrayWithObjects:[[userdata objectAtIndex:i]valueForKey:@"fname"],  [[userdata
    objectAtIndex:i]valueForKey:@"name"],

    [[userdata objectAtIndex:i]valueForKey:@"address"],

    [[userdata objectAtIndex:i]valueForKey:@"city"], nil];
    NSLog(@" info1 is:%@",invoiceInfo1); // invoiceInfo get overwrite when loop execute

    NSMutableArray* allInfo = [NSMutableArray arrayWithObjects:headers,invoiceInfo1 ,  nil]; 

    // HERE I Want Generate New Array of different index of invoiceInfo1 & pass it to allInfo

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:33:00.680

创建一个带有 header 和 info 数组的 NSObject 类：

```
@interface AllInfo: NSObject
{
    NSMutableArray *header;
    NSMutableArray *info;
}

@property (nonatomic, retain) NSMutableArray *header;
@property (nonatomic, retain) NSMutableArray *info;

@end

@implementation AllInfo

@synthesize header;
@synthesize info;

@end 
```

然后实现这段代码：

```
allInfo = [[NSMutableArray alloc] init];
for (int i=0; i<[userdata count]; i++) {  

    NSLog(@" userdata count :%d",[userdata count]);

    NSMutableArray *invoiceInfo1 = [[NSMutableArray alloc] init]; 
    [invoiceInfo1 addObject:[userdata objectAtIndex:i]valueForKey:@"fname"]];
    [invoiceInfo1 addObject:[userdata objectAtIndex:i]valueForKey:@"name"]];
    [invoiceInfo1 addObject:[userdata objectAtIndex:i]valueForKey:@"address"]];
    [invoiceInfo1 addObject:[userdata objectAtIndex:i]valueForKey:@"city"]];

    NSLog(@" info1 is:%@",invoiceInfo1); // invoiceInfo get overwrite when loop execute
    AllInfo *newInfo = [[AllInfo alloc] init];
    newInfo.header = headers;
    newInfo.info = invoiceInfo1;
    [allInfo addObject:newInfo]; 

    // HERE I Want Generate New Array of different index of invoiceInfo1 & pass it to    allInfo

} 
```

希望这会有所帮助。

# php - xcode 使用 PhP 更新 mysql 远程数据库

> ID：11825588
> 
> 赞同：0
> 
> 时间：2012-08-06T09:26:43.273
> 
> 标签：php, mysql, database, xcode, sqlite

我一直在关注这个[很棒的教程](http://www.youtube.com/watch?v=LwCyaGoRNWM) ，并让我的代码能够处理大多数数据库传输。现在我想使用相同的方法将长文本消息和图像更新到我的服务器 MySQL 数据库中，但它似乎不起作用。

```
NSString *strURL = [NSString stringWithFormat:@"http://mydomain.com/sync.php?name=%@&message=%@&image=%@",nameField.text, messageField.text, image]; 
```

接着

```
NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURL]];

NSString *strResult = [[[NSString alloc] initWithData:dataURL encoding:NSUTF8StringEncoding] autorelease];
NSLog(@"StrResult is... %@", strResult); 
```

问题 1：当**messageField.text**是一个长文本时，中间有空格，例如*"This is a free text format with up to 1000 characters..."*，它会导致 strURL 也有空格，因此 strResult将变为空。

问题2： **图像**是我已经保存在本地sqlite中的blob格式。我什至不确定以这种方式转移是否是个好主意。但基本上我想将图像从 iPhone/iPad 直接上传到服务器 MySQL 数据库。

希望有人可以帮助我解决这两个问题中的任何一个。或者有没有更好更简单的替代方法来更新我的服务器上的 MySQL？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:38:34.953

问题1：有很多方法可以做到这一点......其中之一是当你将它放入数据库时​​这样做：

```
messageField.text = [messageField.text stringByReplacingOccurrencesOfString:@" " withString:@"_"]; 
```

将文本：“这是一种最多 1000 个字符的自由文本格式...”改为：“This_is_a_free_text_format_with_up_to_1000_characters...”

然后当您再次将其从数据库中取出时，使用相反的代码：

```
messageField.text = [messageField.text stringByReplacingOccurrencesOfString:@"_" withString:@" "]; 
```

这使得它从：“This_is_a_free_text_format_with_up_to_1000_characters...”到“这是一种最多 1000 个字符的自由文本格式...”

但请记住，这是一种方法......您也可以将“_”替换为“ *I* ”之类的其他内容或您想要的任何内容......用户不会输入的内容......

问题 2：我对数据库和图像不太了解。但是请注意：[Blob](http://www.youtube.com/watch?v=CxY3FR9doHI)

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:15:34.627

问题1：当你通过GET请求发送参数时，你需要转义你的参数以避免非法字符。顺便说一句，你不能用这种请求发送无限的数据。对于大量数据，您应该使用 POST 请求。

问题 2：[ASIHTTPRequest](http://allseeing-i.com/)是用于与远程服务器通信的包装器。如果您选择使用它（我鼓励您这样做），[这里](http://allseeing-i.com/ASIHTTPRequest/How-to-use#sending_a_form_post_with_ASIFormDataRequest)是您需要发布请求的文档。还有一个使用 NSData 将图像发送到远程服务器的示例。

# php - PHP：对成员函数的致命错误调用......在非对象上

> ID：11825592
> 
> 赞同：4
> 
> 时间：2012-08-06T09:26:54.977
> 
> 标签：php

我遇到了 PHP 的问题，因为它一直在标题中提到异常。它在以下行失败：

```
$item->getDescription(); 
```

我理解错误应该是什么意思（`$item`为空）。但是，$item 不为空。

场景如下： 这是一个将产品从供应商同步到商店的脚本。为此，我创建了自己的类（SimpleProduct）。这个类有一个 getDescription() 函数。

问题是我收到的数据往往有很多垃圾，比如尚未填写的项目。脚本应该跳过这些项目并继续迭代其余产品。这个致命错误会杀死整个脚本。

我已经尝试过实施安全措施来防止这种情况发生，但它仍然经常发生。这是当前代码（删除了一些片段，因为它们与当前案例无关）。

```
//This is part of a class that performs the sync

public function syncProduct($item) {

    if(empty($item)) { return "Not a product"; }
         else { var_dump($item) }

    $foo = $item->getDescription();
} 
```

检查 var_dump 结果时，我得到一个填充了一些值的对象。看到它是正确的类型（SimpleProduct）并且它不是空/空，我会怀疑这个错误停止发生，但它仍然存在。

另请注意，在弹出此产品之前，已经发生了几次产品同步而没有任何错误，因此我知道代码是有效的。不知何故，这个特定的案例滑过了我的空检查。

我的空检查有问题吗？当有问题的对象确实存在时，如何抛出非对象的错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T09:35:06.203

与其检查变量是否为空，不如检查它是否是`SimpleProduct`?

```
if ($item instanceof SimpleProduct)
{

} 
```

[http://php.net/manual/en/language.operators.type.php](http://php.net/manual/en/language.operators.type.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:35:58.603

检查 $item 是否是一个对象你可以使用[is_object()](http://php.net/manual/en/function.is-object.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T09:29:23.103

您的 null 检查不会阻止使用该对象，即使它~~为 null~~包含非对象。

用这个：

```
public function syncProduct($item) {
    var_dump($item);

    if($item InstanceOf SimpleProduct) {
        $foo = $item->getDescription();
    }

    return "Not a product";
} 
```

我站纠正！我没有注意到退货声明。发生这种情况的另一种情况是，如果 from 的值`$item`不是空的，但也不是产品 - 很可能是标量或数组，因为将对象用作其他类型的对象会在找不到方法方面产生不同的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-20T06:47:55.943

在运行此之后，我也遇到了类似的问题：

```
$user = DB::getInstance()->action($action="SELECT * ", 'users'); 
```

然后检查 $user 是否是数据库的实例，我发现它不是。然后我决定将其分开如下：

```
$user = DB::getInstance();
$user->action($action="SELECT * ", 'users'); 
```

完成此操作并使用 instanceof() 方法后，它显示它现在是一个实例，并且对成员函数的致命调用错误消失了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T09:32:54.973

当然，该对象在函数 syncProduct 的上下文中仍然不可用。

尝试做一个 var_dump($item) 来确认它的存在并在代码的 else 部分执行它以确保它不为空。

# c# - 无法创建大于 500 兆字节的上限集合

> ID：11825598
> 
> 赞同：0
> 
> 时间：2012-08-06T09:27:12.167
> 
> 标签：c#, mongodb

我在 32 位系统上使用 Mongo 数据库，我需要创建一个最大为 1GB 的大型上限集合。在 64 位系统上一切正常，但在 32 位系统上出现错误：

```
com.mongodb.CommandResult$CommandFailure: command failed [command failed [create] { 
"serverUsed" : "localhost:27017" , 
"errmsg" : "exception: assertion db\\pdfile.cpp:437" , 
"code" : 0 , 
"ok" : 0.0} 
```

在 32 位系统上，服务器的总存储大小为 2GB，但即使使用这个大小，我也无法创建大于 500MB 的集合。这个神奇的数字是什么意思？

Mongo db服务器版本为2.0.6

**附加信息：**

我有几个数据库文件，它们的总大小是`34MB`. 在运行 mongo db 之前，我将这些文件复制到“data”目录中，启动 Mongo db，然后在 shell 中我看到相同的总大小数字 - `35651584 (34MB)`（使用的命令取自下面的评论）。如果我尝试创建一个大小为 500MB 的集合，我会看到添加了一个新文件 (512MB)。但是，例如，如果我将尝试创建一个大小为 600MB 的集合，则会出现上述错误（但仍添加了 512MB 文件）。

[Mongo 数据库服务器日志](https://gist.github.com/3274176)

Mongo db 使用命令行选项启动：

```
> db.adminCommand("getCmdLineOpts")
{
        "argv" : [
                "mongod.exe",
                "--dbpath",
                "..\\data",
                "-vvvvvv",
                "--logpath",
                "..\\log\\server.log"
        ],
        "parsed" : {
                "dbpath" : "..\\data",
                "logpath" : "..\\log\\server.log",
                "vvvvvv" : true
        },
        "ok" : 1
}
> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T11:23:49.563

MongoDB在 64 位系统上[运行得更好，你能换成 x64 吗？](http://blog.mongodb.org/post/137788967/32-bit-limitations)正如 Stennie 所说，由于数据库中的其他数据，您可能会达到 mmap 限制。

您能否通过连接 mongo shell 并尝试通过运行大于 512 MB 1 字节的新集合来创建新集合来测试这个假设 -

```
db.createCollection("mycoll6", {capped:true, size:536870913}) 
```

您应该希望收到以下错误消息 -

```
"errmsg" : "exception: can't map file memory - mongo requires 64 bit build for larger datasets", 
```

在 Mongo shell 中，连接到 admin 数据库并查看数据库的大小以查看您拥有多少数据 -

```
use admin
show dbs 
```

更新：基于一些额外的测试（我使用 Ubuntu 12.04 32 位），这似乎是一个错误。

**Ubuntu 测试**

> db.createCollection("my13", {capped:true, size:536608768}) { "errmsg" : "exception: assertion db/pdfile.cpp:437", "code" : 0, "ok" : 0 } db. createCollection("my13", {capped:true, size:536608767}) { "ok" : 1 }`

536608767 字节略低于 512 MB，为文件中的某种标题留出了空间。

我认为这可能与`[smallfiles][2]`所有 32 位安装都使用该选项运行有关，但是，带有 的 x64 构建`smallfiles`不会显示相同的症状。

我已经为这个问题记录了[SERVER-6722](https://jira.mongodb.org/browse/SERVER-6722)。

# facebook - Facebook API：如何获取事件详细信息

> ID：11825600
> 
> 赞同：1
> 
> 时间：2012-08-06T09:27:24.810
> 
> 标签：facebook, facebook-graph-api, facebook-fql

试图获取我/我的朋友在下个月参加/可能参加的所有活动的详细信息（FQL 中的日期操作）。

我还需要获取这些事件的提要，以便在我的程序中进行进一步分析。

到目前为止，我发现 Facebook API 的文档几乎没有任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T22:51:46.970

您可以将 event 和 event_member 表与朋友表一起使用来获取此数据。
例如： `SELECT eid, name, location, start_time FROM event WHERE eid in ( select eid from event_member where rsvp_status != 'declined' and uid = me() or uid in (select uid2 from friend where uid1 = me()) ) AND start_time >= '2012-08-01' and start_time <= '2012-08-31'`

# css - safari 不会为动态属性更新 css

> ID：11825605
> 
> 赞同：0
> 
> 时间：2012-08-06T09:27:46.323
> 
> 标签：css, safari

这是一个简单的演示：

[http://jsfiddle.net/fE8ry/](http://jsfiddle.net/fE8ry/)

我正在尝试更改 div 的属性。并基于属性值我有 css 。在页面加载时，属性选择器正常工作并应用适当的 css。但如果属性是通过 javascript 更改的，则不会应用 css 。甚至在移动设备上也会发生。

适用于铬：v 21.0

Safari 测试：v 5.1.7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:23:14.797

Safari 中的 jQuery(document).ready() 存在错误，因此代码未按预期执行。你可以试试这段代码：

```
    $(文档).ready(函数(){
        $('#ele1').attr('data-attr1',false);
        $('#ele1 span').css('display', 'inline');
    });

```

# zend-framework2 - 如何理解 ZfcUser\*OptionsInterfaces？在被 ZfcUser\Form\Base 使用之前，它们没有从任何地方实现

> ID：11825606
> 
> 赞同：0
> 
> 时间：2012-08-06T09:27:46.370
> 
> 标签：zend-framework2

这是第一次接触Zend Framework，我现在是用户zf2，想练习使用3rd-party模块，ZfcUser被普遍认为是合适的。

现在这个模块已经正确设置了，但是当我去源码时，我没有找到任何实现`ZfcUser\Options\RegistrationOptionsInterface`，但是在类`ZfcUser\Form\Base`中，它调用了：

```
65\. $this->getRegistrationOptions()->getUseRegistrationFormCaptcha(); 
```

类 Base 是从`ProvideEventsForm`扩展形式扩展而来的，`Zend\Form\Form`这些类都与 无关`RegistrationOptionsInterface`，为什么上面的代码可以这样调用，使用 $this？它可能像`controller plugin`and之间的关系一样起作用`controller`，而看起来不是，那么它是如何工作的呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:31:24.820

用户，

options 实例被实例化并传递到 ZfcUser -> Module.php 中的表单中查看第 72 行，然后是第 89 行。 Options 的类在 src/ZfcUser/Options

我还在学习ZF2

# asp.net-mvc - Excel 文件在通过 swfupload 上传时“损坏”

> ID：11825615
> 
> 赞同：0
> 
> 时间：2012-08-06T09:28:35.013
> 
> 标签：asp.net-mvc, excel, swfupload, corruption

我正在使用[swfupload](http://code.google.com/p/swfupload/)将一些 excel 文件上传到我的服务器。当上传的文件为旧 (< 2003) 格式时，一切正常。我可以上传文件，重新下载，并确认它是相同的。

问题是，每当我以新的开放 xml 格式（> 2007）上传文件时。当我重新下载该文件并打开它时，我收到一个错误：

> Excel 在“文件名”中发现不可读的内容。是否要恢复此工作簿的内容？如果您信任此工作簿的来源，请单击“是”。

我检查了服务器并确认那里也存在相同的错误。

附加信息：

*   文件存储在服务器文件系统（不是 DB BLOB）上
*   如果我“恢复”文件，内容似乎与原件完全相同
*   同样的系统适用于 Excel < 2003 文件和图像文件
*   我将文件保存在服务器上，`File.WriteAllBytes(filePath, data)`其中`data`生成的位置是 `upload.InputStream.Read(data, 0, upload.ContentLength)`

# delphi - 字符串网格中单元格的循环和增加字母值

> ID：11825620
> 
> 赞同：0
> 
> 时间：2012-08-06T09:29:04.823
> 
> 标签：delphi

所以这可能很难解释，但我想做一个 for ... := 1 to 10 do 声明，但我希望它是 A to N do。本练习的主要目的是将数据加载到字符串网格中。所以让它加载单元格 0,1 0,2 0,3 0,4 0,5 0,6 0,7，字母 A、B、C、D、E 一直到 14。如果有人知道如何做到这一点，我将非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T09:32:56.343

在这里你明白了，但我不确定这是否是学习编程的好方法（我的意思是提出问题作为请求，以便其他人为你编写代码）：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  I: Integer;
begin
  StringGrid1.FixedCols := 1;
  StringGrid1.ColCount := 15;
  for I := 1 to 14 do
    StringGrid1.Cells[I, 1] := Chr(Ord('A') + I - 1);
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T09:45:12.363

如果你想一次填充 StringGrid 控件一行，你可以做

```
procedure TForm1.Button1Click(Sender: TObject);
var
  i: Integer;
begin
  StringGrid1.FixedCols := 1;
  StringGrid1.FixedRows := 1;
  for i := 0 to Min(25, (StringGrid1.ColCount-1) * (StringGrid1.RowCount-1)) do
    StringGrid1.Cells[i mod (StringGrid1.ColCount - 1) + 1,
      i div (StringGrid1.ColCount - 1) + 1] := Chr(Ord('A') + i);
end; 
```

无论有多少行和列，它都有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T12:08:10.883

想要将 TLama 的答案与“想要做一个 for ... := 1 to 10 do 声明，但我希望它是 A to N do”

不知道是双关语，还是启发性的。

```
var c: char; i: integer;
    s: string;  
    ...
  i := 0; s:= EmptyStr;
  for c := 'A' to 'N' do begin
      s := s + c + ',';
      Inc(i);
  end;

  SetLength(s, Length(s) - 1); // we do not need last comma there
  StringGrid1.ColCount := i;
  StringGrid1.Rows[0].CommaText := s; 
```

或者使用相同的 TStringBuilder - 这比在每个新的字符串修改上重新排列堆更快。

```
uses SysUtils;
    ...
var c: char; i: integer;
    s: string;
    ...
  i := 0;
  with TStringBuilder.Create do try
     for c := 'A' to 'N' do begin
         Append(c + ',');
         Inc(i);
     end;
     s := ToString;
  finally 
     Free;
  end;

  SetLength(s, Length(s) - 1); // we do not need last comma there
  StringGrid1.ColCount := i;
  StringGrid1.Rows[0].CommaText := s; 
```

# ios - 如何按字母顺序对包含 HTML 标签的列表进行排序

> ID：11825621
> 
> 赞同：0
> 
> 时间：2012-08-06T09:29:11.403
> 
> 标签：ios, sorting, nsfetchedresultscontroller, nssortdescriptor

当文本包含 HTML 标记时，如何使用 NSFetchedResultsController 按字母顺序对列表进行排序。

例如，我必须对此进行排序：

```
- <b>Hello</b>
- Adam 
```

结果应该是：

```
- Adam
- <b>Hello</b> 
```

这就是我目前的排序方式：

```
sortString = [[NSString alloc] initWithString:@"title"];

NSSortDescriptor *sortDescriptor2 = [[[NSSortDescriptor alloc] initWithKey:sortString ascending:sortAsc selector:@selector(localizedCaseInsensitiveCompare:)] autorelease];
NSArray *sortDescriptors = [[[NSArray alloc] initWithObjects:sortDescriptor, sortDescriptor2, nil] autorelease];
[fetchRequest setSortDescriptors:sortDescriptors]; 
```

那么，有没有办法对“拆分”进行排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:50:29.460

是的，有一种方法：用你自己的选择器构造一个专门的 NSSortDescriptor。由于 NSString 有标准的方法来做你想做的事，你需要在 NSString 上创建一个名为“compareWithHTML:”的类别，它会剥离 HTML 并使用“compare:”或“localizedCompare:”进行比较。

# plugins - 如何在 Symfony 1.4 中进行密码重置？（不使用插件）

> ID：11825623
> 
> 赞同：0
> 
> 时间：2012-08-06T09:29:17.440
> 
> 标签：plugins, symfony1, passwords, symfony-1.4, reset

我想为我的用户登录模块添加一个*重置密码选项。*所以我遵循[了 Askeet Tutorial (symfony 1.0)](http://www.symfony-project.org/askeet/1_0/en/12)。

但是当我单击忘记密码时出现错误，它会重定向到“密码请求操作”并出现以下错误：

> 致命错误：调用未定义函数 input_tag()、submit_tag、form_error()

为什么我会收到这些关键字的错误？这是否意味着那些与我的 symfony 版本不兼容（我使用的是 symfony 1.4，教程适用于 symfony 1.0）

**或者**任何人都可以建议我用其他方法来开发这个（不使用插件）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:57:55.773

这些关键字与 Symfony 1.0 的旧表单系统有关。从 Symfony 1.2 开始，不再有一个 FormHelper 来包含它的所有帮助程序（`input_tag`,`textarea_tag`等 ..），因为它们现在被称为小部件（`sfWidgetFormInput`,`sfWidgetFormTextarea`等 ..）。

您不应该**遵循**本教程，因为它适用于 Symfony 1.0，而您使用的是 Symfony 1.4。

相反，您可以看到 sfDoctrineGuardPlugin 如何处理其[重置密码系统](http://trac.symfony-project.org/browser/plugins/sfDoctrineGuardPlugin/trunk/modules/sfGuardForgotPassword)（链接指向模块文件夹，但也可以查看表单和模型文件夹）。

# perl - 如何将字符串解释为 Perl 代码并在没有 eval 的情况下执行它

> ID：11825626
> 
> 赞同：2
> 
> 时间：2012-08-06T09:29:27.690
> 
> 标签：perl

我知道可以使用“string-eval”。但我正在寻找一些替代方案来实现它，而无需`eval`. 原因是“字符串评估”使 Perl 批评者失败，并且根据客户端策略我不能使用它。

没有什么可以替代`eval`？

这是我正在尝试做的事情：

我将动态生成的代码引用传递给函数。此函数评估此代码引用并将结果分配给变量。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-06T09:30:59.530

Perl 评论家反对 string-eval，因为“将字符串解释为 perl 代码并执行它”通常是任何问题的糟糕解决方案。

你不能通过仅仅找到另一个函数来做同样的事情来解决它（嗯，你可以，但这完全没有抓住重点）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-06T10:41:43.037

Coderefs 不需要`eval`运行。只需取消引用 coderef 即可调用它。这在[perldoc perlref](http://p3rl.org/ref)中进行了解释。

```
my $code = sub {
    my ($name) = @_;
    say "Hi, $name!";
};
$code->('rpg'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T12:15:13.043

这对我有用。

```
#!/usr/bin/perl
use strict;
use warnings;

sub exec_code {
    my ($c) = @_;
    return &{$c};
}

my $coderef = sub {
    print "Hello, from sub";
};

exec_code($coderef); 
```

# python - PyCharm 自动完成，类型列表

> ID：11825631
> 
> 赞同：11
> 
> 时间：2012-08-06T09:29:47.473
> 
> 标签：python, autocomplete, casting, pycharm, heredoc

我如何告诉`Docstring`PyCharm**返回**类型是`SomeClass`实例列表？

试用：`@rtype [SomeClass]`，但它仅作为`list`。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-06T09:29:47.473

```
def do_something():
    """
    @rtype: list of SomeClass
    """
    pass 
```

效果很好，将返回值解释为列表并`SomeClass`在访问`list`元素时自动完成方法。

# c# - 在紧凑框架上映射对象

> ID：11825633
> 
> 赞同：2
> 
> 时间：2012-08-06T09:29:49.997
> 
> 标签：c#, compact-framework, sql-server-ce

我正在开发一个在 .net compact 框架上运行的 Windows 移动应用程序，但我的数据访问层遇到了问题。

我目前已经创建了所需的实体（poco），它运行良好，因为我可以通过模拟存储库轻松测试业务逻辑。

我遇到的问题是我不确定如何将 sql 查询映射到实体，因为实体框架在紧凑框架中不可用。

这是我应该尝试找到 CF 支持的 orm 吗？我只有几张表，可以尝试自己映射，但我不想涉及提取大量不需要的数据的问题，因此需要某种延迟加载。

我是否采取了正确的方法，或者我应该在其他地方寻找数据集之类的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T17:09:22.850

我建议你看看[DapperLite](https://github.com/ryankirkman/DapperLite)。我在很多项目中都使用过[Dapper](http://code.google.com/p/dapper-dot-net/)，它是一个很棒的轻量级和快速的 orm。DapperLite 看起来像是对紧凑框架的 Dapper 的有希望的转换。该库非常易于使用，并且有很多使用示例。

# ios - SQLite3 数据库未保存 iOS

> ID：11825634
> 
> 赞同：0
> 
> 时间：2012-08-06T09:29:51.170
> 
> 标签：ios, sqlite

我使用 navicat 创建了一个 sqlite3 数据库，然后添加到我的 XCode 项目中。当我的应用程序运行时，所有查询都执行得很好。但是模拟器的documents文件夹中没有数据库。数据库保存在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:49:04.107

假设您没有将数据库复制到 Documents 目录中，那么它将位于应用程序的主包中，该包位于`<AppName>.app`应用程序的根目录中。

您无法写入该文件。

如果要更改此文件，则必须将其从那里复制到 Documents 目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:53:42.507

[将数据插入 SQLite（使用 FMDB）在设备上不起作用？](https://stackoverflow.com/questions/11824013/inserting-a-data-into-sqlite-using-fmdb-doesnt-work-on-device)

检查我对这个问题的回答。这几乎是一样的。

# html - 使用两个图像作为表单的提交

> ID：11825636
> 
> 赞同：0
> 
> 时间：2012-08-06T09:30:02.977
> 
> 标签：html, css

> **可能重复：**
> [如何使用 CSS 更改输入按钮图像？](https://stackoverflow.com/questions/195632/how-to-change-an-input-button-image-using-css)

是否可以使用两个图像作为表单的提交按钮？

我有一个带有两个标志（.png）的语言选择页面，我想要它，所以当用户点击一个标志时，它会提交表单。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:35:18.297

```
<a href="javascript:document.myform.submit()" name="flag1">
    <img src="img1.png" width="20" height="10" alt="" />
</a>

<a href="javascript:document.myform.submit()" name="flag2">
    <img src="img2.png" width="20" height="10" alt="" />
</a> 
```

这应该对你有用:) 只要记住改变你的表单元素`javascript:document.myform.submit()`的`name`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:33:29.007

这可以通过内联事件实现，但我建议使用纯 Javascript 或 jQuery 来完成。jQuery 为您涵盖了跨浏览器的实现。

例如（使用 jQuery）：

```
$("#imgID").click(function(){
    $("#formID").submit();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T09:37:34.847

您可以使用 javascript 之类的

```
<img src="image.png" onclick="submit_form()" />
<img src="image.png" onclick="submit_form()" /> 
```

**JavaScript 函数**

```
function submit_form()
{
  // If you want to change action then

  document.form_name.action="your action";

  document.form_name.submit();
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-06T09:33:19.107

试试这个也传递一个参数：

```
<form name="FormularName">
    <input type="hidden" name="valueField" />
    <a href="#" onclick="submit_form('Flag1')"><img src="image1.jpg" /></a>
    <a href="#" onclick="submit_form('Flag2)"><img src="image2.jpg" /></a>
</form> 
```

JS：

```
function submit_form(value) {
    document.FormularName.valueField.value = value;
    document.FormularName.submit()
} 
```

# android - 在android中解析JSON文件

> ID：11825641
> 
> 赞同：0
> 
> 时间：2012-08-06T09:30:20.050
> 
> 标签：android, json

如何在 JSON 中解析这样的内容？

```
{"nodes":
   {"0":
       {"node":{"id":"13970","name_ar":"\u0623\u062f\u0647\u0645","name_en":"Adham","bio_ar":""}},
    "1":
       {"node":{"id":"14033","name_ar":"aa","name_en":"Ahmed Shaalan","bio_ar":""}}} 
```

它不是一个数组，它不止一个对象，有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:39:51.227

[您可以使用JSONObject](http://developer.android.com/reference/org/json/JSONObject.html)检索它们。这是一个非常简单的例子，只解析出一个节点的 id：

```
JSONObject object = new JSONObject(myJsonString);     
JSONObject nodes = object.getJSONObject("nodes");
JSONObject zero = nodes.getJSONObject("0");
JSONObject myNode = zero.getJSONObject("node");
String id myNode = myNode.getString("id"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:33:45.847

Android 包含原生 JSON 解析器 - 它适用于少量数据（查看 org.json 包）。如果你有更多的数据要解析，像 GSON 这样的拉式解析器会更好。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-06T09:40:43.390

您需要首先创建一个包含 JSON 中所有变量的类。像这样的东西：

```
import java.util.HashMap;

public class NodesClass { // Create a new class called NodesClass

    public Nodes nodes; // Create a new public class 

    public class Nodes { 

        public HashMap<String, InnerObject> nodes;
    }

    public class InnerObject {

        public Node node;

        public class Node {

            public int id;
            public String name_ar, name_en, bio_ar;
        }
    }
} 
```

Ant 然后你需要检索数据。例如这样的：

```
NodesClass ndes = new Gson().fromJson(stringNodes, NodesClass.class);

                int[] id = new int[11];

                for (int numNodes = 0; numNodes < maxNumNodes; numNodes++)
                {
                    try {

                        id[numNodes] = ndes.nodes.get(String.valueOf(numNodes)).node.id;

                    } catch (NullPointerException n) { break; }
                } 
```

我希望它对你有帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-06T09:41:24.407

使用 org.json.JSONObject 类：

```
jObject = new JSONObject(jString); 
JSONObject nodesObject = jObject.getJSONObject("nodes");

ArrayList<JSONObject> objects = new ArrayList<JSONObject>();
for( int i=0; i<10; i++)
{
    objects.add(nodesObject.getJSONObject(""+i);
}

String name = objects.get(0).getJSONObject("node").getString("name_ar");
... 
```

# postgresql - Configure JPA to let PostgreSQL generate the primary key value

> ID：11825643
> 
> 赞同：43
> 
> 时间：2012-08-06T09:30:24.537
> 
> 标签：postgresql, jakarta-ee, jpa, netbeans, entity

So our project use PostgreSQL database and we use JPA for operating the database. We have created the entities from the database with automatic creator in Netbeans 7.1.2.

After small changes our primary key values are described as:

```
@Id
@GeneratedValue(strategy=GenerationType.IDENTITY)
@Basic(optional = false)
@NotNull
@Column(name = "idwebuser", nullable = false)
private Integer idwebuser; 
```

The problem is that now the application is not flexible, because when we modify the database directly (using SQL or another tool) instead of going thru the Java app - the Generated Value is lower than actual database ID value - and so we get error during the creation of new entities.

Is there a possibility that the JPA could just let the database generate the ID automatically and then obtain it after the creation process? Or what could be a better solution? Thanks.

**EDIT** More specifically: We have a table of users and my problem is that using any type of strategy generationtype, the JPA is inserting a new entity with a specified by it's generator id. Which is wrong for me, because if I make changes to the table on my own, by adding new entries, the GeneratedValue for application is lower than the current ID - what leads us to exception with duplicated ID. Can we fix it ;)?

*a short note on the answer* There was a little lie from my side because we've used a PG Admin -> View first 100 Rows and edited rows from there instead of using select. ANYWAY, it turns out that this editor somehow skips the process of updating the ID and so even in DB when we write a proper INSERT it is EXECUTED with improper ID! So it was basically more a problem of the editor we used than the database and application...

now it even works using `@GeneratedValue(strategy=GenerationType.IDENTITY)`

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-08-06T12:19:49.887

Given the table definition:

```
CREATE TABLE webuser(
    idwebuser SERIAL PRIMARY KEY,
    ...
) 
```

Use the mapping:

```
@Entity
@Table(name="webuser")
class Webuser {

    @Id
    @SequenceGenerator(name="webuser_idwebuser_seq",
                       sequenceName="webuser_idwebuser_seq",
                       allocationSize=1)
    @GeneratedValue(strategy = GenerationType.SEQUENCE,
                    generator="webuser_idwebuser_seq")
    @Column(name = "idwebuser", updatable=false)
    private Integer id;

    // ....

} 
```

The naming `tablename_columname_seq` is the PostgreSQL default sequence naming for `SERIAL` and I recommend that you stick to it.

The `allocationSize=1` is important if you need Hibernate to co-operate with other clients to the database.

Note that this sequence will have "gaps" in it if transactions roll back. Transactions can roll back for all sorts of reasons. Your application should be designed to cope with this.

*   Never assume that for any id `n` there is an id `n-1` or `n+1`
*   Never assume that the id `n` was added or committed before an id less than `n` or after an id greater than `n`. If you're really careful with how you use sequences you can do this, but you should never try; record a timestamp in your table instead.
*   Never add to or subtract from an ID. Compare them for equality and nothing else.

See the [PostgreSQL documentation for sequences](http://www.postgresql.org/docs/current/static/functions-sequence.html) and [the serial data types](http://www.postgresql.org/docs/current/static/datatype-numeric.html#DATATYPE-SERIAL).

They explain that the table definition above is basically a shortcut for:

```
CREATE SEQUENCE idwebuser_id_seq;
CREATE TABLE webuser(
    idwebuser integer primary key default nextval('idwebuser_id_seq'),
    ...
)
ALTER SEQUENCE idwebuser_id_seq OWNED BY webuser.idwebuser; 
```

... which should help explain why we have added a `@SequenceGenerator` annotation to describe the sequence.

* * *

If you really must have a gap-less sequence (for example, cheque or invoice numbering) see [gapless sequences](https://stackoverflow.com/a/11752742/398670) but seriously, avoid this design, and *never* use it for a primary key.

* * *

**Note**: If your table definition looks like this instead:

```
CREATE TABLE webuser(
    idwebuser integer primary key,
    ...
) 
```

and you're inserting into it using the (*unsafe, do not use*):

```
INSERT INTO webuser(idwebuser, ...) VALUES ( 
    (SELECT max(idwebuser) FROM webuser)+1, ...
); 
```

or (*unsafe, never do this*):

```
INSERT INTO webuser(idwebuser, ...) VALUES ( 
    (SELECT count(idwebuser) FROM webuser), ...
); 
```

then *you're doing it wrong* and should switch to a sequence (as shown above) or to a *correct* gapless sequence implementation using a locked counter table (again, see above and see "gapless sequence postgresql" in Google). Both the above do the wrong thing if there's ever more than one connection working on the database.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T11:17:44.960

It seems you have to use the sequence generator like:

```
@GeneratedValue(generator="YOUR_SEQ",strategy=GenerationType.SEQUENCE) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T09:40:42.393

Please, try to use `GenerationType.TABLE` instead of `GenerationType.IDENTITY`. Database will create separate table which will be use to generate unique primary keys, it will also store last used id number.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-23T19:41:30.217

You can also save yourself some effort by writing a script to perform a mass conversion of the generic `GenerationType.IDENTITY` to the solution proposed by the selected answer. The below script has some slight dependencies on how the Java source file is formatted and will make modifications without backups. Caveat emptor!

After running the script:

1.  Search and replace `import javax.persistence.Table;` with `import javax.persistence.Table; import javax.persistence.SequenceGenerator;`.
2.  Reformat the source code in NetBeans as follows:
    1.  Select all the source files to format.
    2.  Press `Alt+Shift+F`
    3.  Confirm reformatting.

Save the following script as `update-sequences.sh` or similar:

```
#!/bin/bash

# Change this to the directory name (package name) where the entities reside.
PACKAGE=com/domain/project/entities

# Change this to the path where the Java source files are located.
cd src/main/java

for i in $(find $PACKAGE/*.java -type f); do
  # Only process classes that have an IDENTITY sequence.
  if grep "GenerationType.IDENTITY" $i > /dev/null; then
    # Extract the table name line.
    LINE_TABLE_NAME=$(grep -m 1 @Table $i | awk '{print $4;}')
    # Trim the quotes (if present).
    TABLE_NAME=${LINE_TABLE_NAME//\"}
    # Trim the comma (if present).
    TABLE_NAME=${TABLE_NAME//,}

    # Extract the column name line.
    LINE_COLUMN_NAME=$(grep -m 1 -C1 -A3 @Id $i | tail -1)
    COLUMN_NAME=$(echo $LINE_COLUMN_NAME | awk '{print $4;}')
    COLUMN_NAME=${COLUMN_NAME//\"}
    COLUMN_NAME=${COLUMN_NAME//,}

    # PostgreSQL sequence name.
    SEQUENCE_NAME="${TABLE_NAME}_${COLUMN_NAME}_seq"

    LINE_SEQ_GENERATOR="@SequenceGenerator( name = \"$SEQUENCE_NAME\", sequenceName = \"$SEQUENCE_NAME\", allocationSize = 1 )"
    LINE_GENERATED_VAL="@GeneratedValue( strategy = GenerationType.SEQUENCE, generator = \"$SEQUENCE_NAME\" )"
    LINE_COLUMN="@Column( name = \"$COLUMN_NAME\", updatable = false )\n"

    # These will depend on source code formatting.
    DELIM_BEGIN="@GeneratedValue( strategy = GenerationType.IDENTITY )"
    # @Basic( optional = false ) is also replaced.
    DELIM_ENDED="@Column( name = \"$COLUMN_NAME\" )"

    # Replace these lines...
    #
    # $DELIM_BEGIN
    # $DELIM_ENDED
    #
    # With these lines...
    #
    # $LINE_SEQ_GENERATOR
    # $LINE_GENERATED_VAL
    # $LINE_COLUMN

    sed -i -n "/$DELIM_BEGIN/{:a;N;/$DELIM_ENDED/!ba;N;s/.*\n/$LINE_SEQ_GENERATOR\n$LINE_GENERATED_VAL\n$LINE_COLUMN/};p" $i
  else
    echo "Skipping $i ..."
  fi
done 
```

When generating the CRUD application using NetBeans, the ID attributes won't include editable input fields.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-26T03:19:14.910

It work for me

1.  create table like this, use SERIAL.

```
CREATE TABLE webuser(
    idwebuser SERIAL PRIMARY KEY,
    ...
) 
```

2.  add @GeneratedValue(strategy = GenerationType.IDENTITY) at id field.

```
@Entity
@Table(name="webuser")
class Webuser {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Integer id;

    // ....

} 
```

# mysql - 在 MySQL 中使用单个查询从多个表中删除

> ID：11825648
> 
> 赞同：0
> 
> 时间：2012-08-06T09:30:39.250
> 
> 标签：mysql

我知道这是一个非常愚蠢的问题，它可能在整个互联网上都可以找到，但如果你们都不介意，我希望有人在我的查询中指出问题。我正在使用单个查询从多个表中删除，我在两个表中没有任何外键..

下面是两张表的表结构

表 1：dt_my_domain

```
|----------|----------------|
| username | domain_email   |
|----------|----------------| 
```

和

表 2：dt_my_contact

```
|----------|-------|----------------|------------------|--------|
| user     | email | contact_person | contact_email    |  type  |
|----------|-------|----------------|------------------|--------| 
```

现在，表 dt_my_domain 以用户名作为主键，并且 domain_email 是唯一的。

同样在表 dt_my_contact 中电子邮件是唯一的。

我想根据 domain_email 和 email 从两个表中删除，以便当两者匹配时，从两个表中删除对应的元组

这是我正在运行的查询，

```
DELETE FROM dt_my_domain, dt_my_contact
   USING dt_my_domain
INNER JOIN dt_my_contact USING(email) 
WHERE dt_my_domain.domain_email = 'saswat.saz.routroy@gmail.com' 
```

所以，它给出了数据库错误

```
Unknown column 'email' in 'from clause' 
```

现在我如何通过我的查询来解决这个问题，我想调试或者这个查询的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:34:09.897

```
DELETE d,c FROM dt_my_domain d inner join dt_my_contact c
   on d.domain_email = c.email
WHERE d.domain_email = 'saswat.saz.routroy@gmail.com' 
```

# c# - ListBox 不刷新 ObservableCollection

> ID：11825652
> 
> 赞同：0
> 
> 时间：2012-08-06T09:30:55.097
> 
> 标签：c#, wpf, xaml, data-binding, listbox

我已经对这个问题进行了一些研究，但我找不到解决方法。

这是问题所在：

我有一个自定义类 ListedNote 的 observableCollection。起初 ListBox 显示数据，但有些数据是异步加载的，不会更新。（例如用户图片）

```
<ScrollViewer VerticalScrollBarVisibility="Auto">
        <ListBox ItemsSource="{Binding Notes, UpdateSourceTrigger=PropertyChanged}" x:Name="Content" ItemTemplate="{StaticResource ListBoxCardFBLikeTemplate}"
                 HorizontalContentAlignment="Stretch">

        </ListBox>
    </ScrollViewer> 
```

视图模型

```
....
private ObservableCollection<ListedNote> notes;

public ObservableCollection<ListedNote> Notes
        {
            get { return notes; }
            set { notes = value; RaisePropertyChanged(() => this.Notes); }
        }
private void LoadAttachmentsAsync(ListedNote note)
        {
            Async.Call(() => this.ServiceConnector.RetrieveAnnouncementAttachment(note.IdValue),
                mm =>
                {
                    if (mm != null)
                    {
                        if (mm.MultimediaType.IsPicture)
                            note.AttachedPicture = mm;
                        else
                            note.AttachedFile = mm;

                        note.AttachmentData = new List<byte>(mm.Data);

                        var index = this.Notes.IndexOf(note);
                        if (index >= 0)
                            this.Notes[index] = note;

                    }
                });
        } 
```

任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T09:34:27.017

`ObservableCollection`仅当集合的内容发生更改时才会通知 UI：即`ListedNote`添加或删除 a 时。`ListedNote`如果集合中已经存在的属性发生变化，它不会通知 UI 。

您的`ListedNote`类需要实现`INotifyPropertyChanged`接口，以便 UI 知道某个属性已在单个注释上发生更改。

# c# - DeviceInfo ColorDepth 设置不起作用

> ID：11825654
> 
> 赞同：1
> 
> 时间：2012-08-06T09:31:05.653
> 
> 标签：c#, .net, localreport

我尝试以图像格式保存我的本地报告。但我发现`DeviceInfo`' 的`ColorDepth`设置不起作用。

```
 string mime, encoding, fileNameExtension;
 string[] streams;
 Warning[] warnings;
 byte[] bytes = report.Render("IMAGE", @"<DeviceInfo><OutputFormat>TIFF</OutputFormat><ColorDepth>8</ColorDepth><StartPage>0</StartPage></DeviceInfo>", out mime, out encoding, out fileNameExtension, out streams, out warnings);

 FileStream fs = new FileStream("C:\\imgRep.tiff", FileMode.OpenOrCreate);
 fs.Write(bytes, 0, bytes.Length);
 fs.Close(); 
```

与`ColorDepth`值无关，结果是`ColorDepth`= 24 的 .tiff 文件。

有谁知道如何修复这个错误？

我将此字节转换为另一个`PixelFormat`：

```
Bitmap orig = new Bitmap(new MemoryStream(bytes));
Bitmap clone = orig.Clone(new Rectangle(0, 0, orig.Width, orig.Height), PixelFormat.Format8bppIndexed);
clone.Save(@"c:\imgPixelF.tiff", ImageFormat.Tiff); 
```

但我不确定这是一个好的决定..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:49:50.907

根据[SQL Server 联机丛书](http://msdn.microsoft.com/en-us/library/ms155373%28v=sql.90%29.aspx)，您从报告中呈现的 TIFF 图像在当前版本中将始终保存为 24 位。

`For this release of SQL Server, the value of this setting is ignored, and the TIFF image is always rendered as 24-bit.`

由于 ReportViewer/LocalReport 只是 SQL Server Reporting Services 的客户端使用，因此您将受到同样的限制。

尽管他们说 ColorDepth 仅支持 TIFF 图像，但有点奇怪，并且在下一句中他们说在当前版本中无论如何都会忽略该设置，并且自 SQL Server 2005 以来一直如此。

# asp.net - webgrid排序不起作用

> ID：11825656
> 
> 赞同：0
> 
> 时间：2012-08-06T09:31:11.207
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor, webgrid

我正在使用 webgrid 来显示我的数据库中的数据。问题是排序选项不起作用这是我的 webgrid 代码

```
@{
    var grid = new WebGrid(Model, canPage:true ,canSort:true, rowsPerPage :4);
    grid.Pager(WebGridPagerModes.NextPrevious);
        @grid.GetHtml(tableStyle: "webGrid", htmlAttributes: new { id = "datatable" },
        headerStyle: "webgrid-header",

        selectedRowStyle : "webgrid-selected-row",
        footerStyle : "webgrid-footer",
                 rowStyle: "webgrid-row-style",
                 alternatingRowStyle: "webgrid-alternating-row",
        columns: grid.Columns(
     grid.Column(header: "", format:  (item) =>

                    Html.ActionLink("Détails", "Details", new { id = item.id_client }, new { @class = "details" }), style: "actions"),

           grid.Column(header: "", format:  (item) => Html.ActionLink("Modifier", "Edit", new { id = item.id_client }, new { @class = "modifier" }),style : "actions"),

                    grid.Column(header: "", format: (item) => Html.ActionLink("Supprimer", "Delete", new { id = item.id_client }, new { @class = "supprimer" }), style: "actions"),

                    grid.Column("Nom",canSort: true),
                    grid.Column("Prenom", "Prénom",canSort:true),
        grid.Column("Email")));

                        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:00:43.653

您可以尝试为您的 webgrid 添加名称列列表，例如：

```
var grid = new WebGrid(canPage:true ,canSort:true, rowsPerPage :4);

grid.Bind(Model,columnNames: new[] { "Nom", "Prenom"}); //adding names of columns

grid.Pager(WebGridPagerModes.NextPrevious);
@grid.GetHtml(... 
```

有时网络网格无法理解如何将模型与列绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T10:56:12.427

是的，詹姆斯的回答对我有用。排序链接适用于某些列而不适用于其他列，添加 columnNames: 使其正常工作。史蒂夫

# database - 如何在不使用任何字符串函数的情况下根据字符串长度从数据库中获取数据

> ID：11825657
> 
> 赞同：0
> 
> 时间：2012-08-06T09:31:11.637
> 
> 标签：database, jdbc, multiple-databases, string-length

我必须从记录/数据/字符串的长度大于 8 个字符的表字段中获取记录。我不能使用任何字符串函数，因为必须在（MySQL、MSSQL、Oracle）上使用查询。

我不想做下面的例子：

```
List<String> names = new ArrayList<String>();
String st = select 'name' from table;

rs = executeSQL(st);
if ( rs != null )
{
    rs.next();
    names.add(rs.getString(1));
}

for(String name : names)
{
    if(name.length() > 8)
    result.add(name);
} 
```

除了上面编码的那个之外还有什么想法吗？可以获取所需结果的查询，而不是对检索到的数据进行处理然后获取所需结果。

感谢您提供任何帮助/线索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:49:07.677

JDBC 驱动程序可以为 JDBC 规范的附录 D（标量函数）中列出的函数实现 JDBC 转义。驱动程序应将其支持的标量函数转换为数据库端的适当函数。可以使用“DatabaseMetaData.getStringFunctions()”查询支持的函数列表

要在查询中使用它，您可以使用`CHAR_LENGTH(string)`或`LENGTH(string)`喜欢：

```
SELECT * FROM table WHERE {fn CHAR_LENGTH(field)} > 8 
```

您可以替换`CHAR_LENGTH`为`LENGTH`. 驱动程序（如果它支持此功能）然后会将其转换为基础数据库中的适当功能。

从JDBC 4.1 规范的第*13.4.1 节标量函数：*

> 附录 D“标量函数”提供了一个驱动程序应该支持的标量函数列表。但是，只有当数据源支持这些函数时，驱动程序才需要实现这些函数。
> 
> 标量函数的转义语法只能用于调用附录 D“标量函数”中定义的标量函数。转义语法不打算用于调用用户定义的或供应商特定的标量函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T09:40:15.080

我认为您最好利用数据库的强大功能并为您的 SQL 语句（或者可能为封装 SQL 功能的对象）实现一个[工厂。](http://www.oodesign.com/factory-pattern.html)

这样您就可以使用数据库的名称/类型来配置您的工厂，它会为您提供该数据库的适当 SQL 语句。它为您提供了一种参数化此信息的简洁方法，同时允许您利用数据库的功能，而不必在代码中以次优方式复制数据库功能。

例如

```
 DabaseStatementFactory fac = DatabaseStatementFactory.for(NAME_OF_DATABASE);
   String statement = fac.getLongNames();
   // then use this statement. It'll be configured for each db type 
```

进一步封装并使用类似的东西可能是明智的：

```
 DabaseStatementFactory fac = DatabaseStatementFactory.for(NAME_OF_DATABASE);
   List<String> names = fac.getLongNames(); 
```

这样你就不会做出假设。通用模式和查询方式等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T11:03:55.450

我发现的另一个解决方案是：

```
Select name from table where name like '________'; 
```

SQL 计算下划线 (_) 字符并返回长度等于下划线字符数的名称。

# android - Android 网络传输对象

> ID：11825658
> 
> 赞同：1
> 
> 时间：2012-08-06T09:31:15.463
> 
> 标签：android, sockets, networking, pojo

对于我的 Android 项目，我需要在两部手机之间传输一些简单的 (POJO) Java 对象。目的是通过 WiFi（网络共享）将它们连接在一起并传输一些基本对象，例如：

```
int id;
String name;
float positionX;
... 
```

根据我的 Java 经验，我正在考虑使用简单的套接字连接，但由于我使用的是 Android，我认为可能有更好的方法来做到这一点。有没有人有这方面的经验？你有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T10:02:38.647

除非数据非常复杂，否则我会在将对象发送到服务器时将它们转换为 JSON，然后在客户端读取它们时再返回 POJO。

# php - 如何在嵌套会话属性上使用 Symfony get/setAttribute？

> ID：11825664
> 
> 赞同：1
> 
> 时间：2012-08-06T09:31:38.453
> 
> 标签：php, json, symfony-1.4

我有一个像这样的 sfuser/属性：

```
session:
 symfony/user/sfUser/attributes: {
    symfony/user/sfUser/attributes:{
        15:{
            Telefon:'+304994994994',
            option:'15',
            rules:'12',
            arrayBunch:[{
              this: 'da',
              that: "where"
            }]
        },
        17:{...},
        mysetting: "val"
    },
    sfGuardSecurityUser:{},
    admin_module:{},
    sfGuardUserSwitcher:{}
}} 
```

当我使用**setAttribute("mysetting", "val")**他们存储 mysetting 就像我的例子中的显示一样。因此没有必要使用**setAttribute("mysetting", "val", 15)**因为我得到了相同的答案。

我如何访问节点**15**或**arrayBunch**并使用**setAttribute**在那里输入值或**getAttribute**来获取它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T10:29:19.580

~~我认为您以错误的方式进行操作（关于参数）。~~

你想做的是：

*   添加一个名为的变量`val`
*   与价值`15`
*   在命名空间中`mysetting`。

但是，您以错误的顺序编写了参数。

如果你检查[代码](http://trac.symfony-project.org/browser/branches/1.4/lib/user/sfUser.class.php#L274)，参数是：

```
public function setAttribute($name, $value, $ns = null) 
```

所以你应该尝试：

```
->setAttribute('val', 15, 'mysetting'); 
```

**编辑：（** *抱歉没有注意到`arrayBunch`问题）*

如果要编辑 arrayBunch 值：

```
// retrieve the current value
$arrayBunch = $this->getUser()->getAttribute("arrayBunch", array(), 15);

// made some modification
$arrayBunch['toto'] = 'titi';
$arrayBunch['this'] = 'do';

// put back the modification
$this->getUser()->setAttribute("arrayBunch", $arrayBunch, 15); 
```

~~**编辑**：~~

 ~~仔细查看您的 json，您应该检索整个属性`15`，因为名称空间是[默认的](http://trac.symfony-project.org/browser/branches/1.4/lib/user/sfUser.class.php#L24): `symfony/user/sfUser/attributes`。所以：

```
$attribute15 = $this->getUser()->getAttribute(15);
$arrayBunch  = $attribute15['arrayBunch']; 
```

如果您想应用一些更改：

```
// update arrayBunch
$arrayBunch['this'] = 'dada';
// do not forget to re-add modified arraybBunch to the whole variable
$attribute15['arrayBunch'] = $arrayBunch

// and if you want to add a value
$attribute15['mysetting'] = 'val';

// then, save every thing to the session again
$this->getUser()->setAttribute(15, $attribute15); 
```~~

# html - 如何在缓存所有图像、样式表和其他资源的同时使我的 HTML 永远不会被缓存？

> ID：11825666
> 
> 赞同：0
> 
> 时间：2012-08-06T09:31:49.747
> 
> 标签：html, http, caching, cache-control

我有一个网站，其首页是静态 HTML，但其内容可能会不时变化。如果自上次页面加载以来发生更改，我希望所有浏览器都更新内容。同时，缓存对于图像、样式表、javascript 和其他资源非常有用。

`Cache-Control`标题是正确的选择吗？这个`Cache-Control`标头会起作用吗？

```
Cache-Control: max-age=3600, must-revalidate 
```

如果不是，是哪个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:44:30.507

`Cache-Control: no-cache`如果您不希望页面的任何部分被缓存，它将很好用。

但是，如果您需要缓存页面，除了特定部分，请尝试使用这种替代方法：

1.  使用 缓存整个页面`Cache-Control: public, max-age=XYZ`，其中 XYZ 是以秒为单位的时间。
2.  使用 Ajax 加载非缓存部分。

示例代码：

```
var loadSection = function(section) {
    $.ajax({
        url: '/section/' + section + '.html',
        cache: false
      }).done(function(html){
        $('#main-content').html(html);
        w.pageCache[section] = html;
      });
    }
}; 
```

有关实时实施，请参阅[http://jagteshchadha.com](http://jagteshchadha.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T09:47:18.153

你为什么不使用 .htaccess ？

使用所有 Expires Header，您希望按类型控制所有 exipres 文件：

```
<IfModule mod_expires.c>
  ExpiresActive on

# Perhaps better to whitelist expires rules? Perhaps.
  ExpiresDefault                          "access plus 1 month"

# cache.appcache needs re-requests in FF 3.6 (thx Remy ~Introducing HTML5) 
  ExpiresByType text/cache-manifest       "access plus 0 seconds"

# your document html
  ExpiresByType text/html                 "access plus 0 seconds"

# data
  ExpiresByType text/xml                  "access plus 0 seconds"
  ExpiresByType application/xml           "access plus 0 seconds"
  ExpiresByType application/json          "access plus 0 seconds"

# rss feed
  ExpiresByType application/rss+xml       "access plus 1 hour"

# favicon (cannot be renamed)
  ExpiresByType image/x-icon              "access plus 1 week"

# media: images, video, audio
  ExpiresByType image/gif                 "access plus 1 month"
  ExpiresByType image/png                 "access plus 1 month"
  ExpiresByType image/jpg                 "access plus 1 month"
  ExpiresByType image/jpeg                "access plus 1 month"
  ExpiresByType video/ogg                 "access plus 1 month"
  ExpiresByType audio/ogg                 "access plus 1 month"
  ExpiresByType video/mp4                 "access plus 1 month"
  ExpiresByType video/webm                "access plus 1 month"

# htc files  (css3pie)
  ExpiresByType text/x-component          "access plus 1 month"

# webfonts
  ExpiresByType font/truetype             "access plus 1 month"
  ExpiresByType font/opentype             "access plus 1 month"
  ExpiresByType font/woff                 "access plus 1 month"
  ExpiresByType image/svg+xml             "access plus 1 month"
  ExpiresByType application/vnd.ms-fontobject "access plus 1 month"

# css and javascript
  ExpiresByType text/css                  "access plus 2 months"
  ExpiresByType application/javascript    "access plus 2 months"
  ExpiresByType text/javascript           "access plus 2 months"

  <IfModule mod_headers.c>
    Header append Cache-Control "public"
  </IfModule>

</IfModule> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T09:41:39.510

对于您的 css 和 javascript 脚本，您可以使用以下版本：

```
<link rel="stylesheet" href="style.css?v=1.0.0" type="text/css" /> 
```

并且随着下一次更新，您将更改版本。如果你真的需要，你可以对 .js 脚本和图像源做同样的事情。

# sql - 在 SQLite 中使用子查询更新表

> ID：11825667
> 
> 赞同：1
> 
> 时间：2012-08-06T09:31:57.723
> 
> 标签：sql, sqlite, sql-update, subquery

我想从子查询中更新记录。我正在使用以下查询：

```
UPDATE table1 SET a = aa FROM (SELECT a AS aa FROM table2) AS abc WHERE f = 1 
```

这在 SQL Server 中运行良好。但在 SQLite 中不起作用。

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:55:11.920

SQLite 不支持`UPDATE ... FROM`. 见[https://www.sqlite.org/lang_update.html](https://www.sqlite.org/lang_update.html)

# hibernate-envers - 在休眠环境中显示审计历史

> ID：11825669
> 
> 赞同：3
> 
> 时间：2012-08-06T09:32:16.457
> 
> 标签：hibernate-envers

我是hibernate envers的新手。我已经成功地为每个实体创建了审计表。但我不知道如何为每个实体读取这些历史记录。我想在jsp中显示这个历史记录。我想阅读那个特定的所有历史记录entity.any 机构都知道如何做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T18:14:24.293

看一下 AuditReader 类：

[http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/envers/AuditReader.html](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/envers/AuditReader.html)

还有 Envers 教程：

[http://docs.jboss.org/hibernate/orm/4.1/quickstart/en-US/html/ch05.html](http://docs.jboss.org/hibernate/orm/4.1/quickstart/en-US/html/ch05.html)

# objective-c - 使用 NSCoding 将类保存到 objc 中的 NSUserDefaults

> ID：11825671
> 
> 赞同：1
> 
> 时间：2012-08-06T09:32:22.517
> 
> 标签：objective-c, ios, nsuserdefaults, nscoding

我有点困惑我应该如何在这里进行，说这是我的课

```
@interface PlayerStats : NSObject <NSCoding>
{
    NSMutableDictionary *gameStats;
    NSUserDefaults *prefs;

    GamePlayStats *_gamePlayStats;

    GameStats *_openGameStats;
    GameStats *_duelGameStats;
    GameStats *_challengeGameStats;

    float _averagePanelsRevealed;
    float _averageGuessSpeed;

    int _totalCoinsEarned;
    int _totalTokensEarned;

    int _playerLevel;
} 
```

现在，当我想保存类时，我希望这样做，因为只保存类似乎更明智，当我取回它时，我可以调用它的变量，尽管它是方法等等等。

```
- (void)encodeWithCoder:(NSCoder *)encoder 
{
    [encoder encodeObject:self forKey:@"playerStats"];
} 
```

但是，我看到的所有示例都要求您单独加载所有变量，因此它应该看起来更像

```
- (void)encodeWithCoder:(NSCoder *)encoder 
{
    [encoder encodeObject:self.gamePlayStats forKey:@"gamplaystats"];
    [encoder encodeObject:self._openGameStats forKey:@"openGameStats"];
    etc..
} 
```

为什么会这样？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:11:59.113

函数 - (void)encodeWithCoder:(NSCoder *)encoder 要求您决定要保存到编码器的变量。编码器为您生成的信息是类信息。在 [encoder encodeObject:aObject forKey:@"key"] 内部，它会尝试调用 [aObject encodeWithCoder:encoder]。我想如果写 encodeWithCoder: like

```
- (void)encodeWithCoder:(NSCoder *)encoder 
{
    [encoder encodeObject:self forKey:@"playerStats"];
} 
```

只会写你的类的名称和类类型，因为苹果已经在编码器中启用了引用检查，它不会对同一个对象进行两次编码。否则同一对象上的 encodeWithCoder 将被多次调用。

因此，您必须将必要的属性/变量编码到编码器中以保存类的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:10:41.803

以下是 Apple 关于 NSCoding 协议的文档的摘录：根据面向对象的设计原则，被编码或解码的对象负责对其实例变量进行编码和解码。您可以阅读[NSCoding](https://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html)上的全文。

对于您的示例代码段，您需要遵循后一个代码段。此外，GamePlayStats 和
GameStats 类也需要符合 NSCoding 协议。

# c++ - 持久类变量

> ID：11825672
> 
> 赞同：0
> 
> 时间：2012-08-06T09:32:25.793
> 
> 标签：c++, static, initialization

我对静态变量或其他方式有疑问。

我有一个大师班，PatternMatcher。我有几个派生单位，具体取决于使用的匹配器。现在每个子类都需要存储一个浮点向量，但在每个类中它是常量。该向量的数据是在初始化期间读取的，最大为 1GB（我拥有的最小的是 1MB，最大的是 1GB）。目前，当我有两个 Matcher_A 实例时，它将分配两倍的内存。我事先不知道要使用哪些匹配器（每次运行将是三个匹配器，您可以多次使用同一个匹配器）。我宁愿不在运行时检查所需的匹配器是否已经在某处初始化，因为这将需要为我所做的每次更改添加额外的代码。

目前我分配了3个匹配器

```
PatternMatcher* a = new PMMatcherA();
PatternMatcher* b = new PMMatcherB();
PatternMatcher* c = new PMMatcherC(); 
```

，但由于它们是用户选择的，因此例如 A 和 C 可能相同。当我通过 运行检查时`typeid(a).name();`，它会给我 PatternMatcher 作为结果，不管我以前用什么类启动。PatternMatcher 基本上是一个纯粹的虚拟类。

我一直认为静态意味着一个变量在不同的分配中是恒定的，但是当我将我的向量定义为静态时，我会得到一个链接器解析错误。在较早的迭代中，我将这些向量设为全局，但希望将它们本地化到它们的类中。

我需要使用哪些关键字才能使初始化时的向量可用于下一次初始化？一个简单的检查向量大小是否大于 0 就足够了，但是每个对象都使用自己的向量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:38:38.480

Yes, `static` is what you need. You can use it like this:

```
class MyClass
{
private:
    static std::vector< float > data_;
};

std::vector< float > MyClass::data_; 
```

Please note that in the class itself you only *declare* static variables. But you also need to *define* them outside of the class *exactly once*. That's why we have the line `std::vector< float > MyClass::data_;`, if you omit that, you will have linker errors.

After this, *every* object of `MyClass` class will share the same `data_` vector.

You can operate it either from any object of the class:

```
MyClass a;
a.data_.push_back(0); 
```

or through the class name:

`MyClass::data_.push_back(0);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T09:39:00.620

`static` keyword **is** a way to go - that would store exactly one copy of a member for the whole class. What you were missing is an actual declaration of such static in a compilation module so that the linker can use it. For instance:

`header file foo.h`:

```
struct Foo {
  static int s_int;
} 
```

`source file foo.cpp`:

```
#include "foo.h"
int Foo::s_int; // optionally =0 for initialization 
```

The second part is vital as this will allocate a memory space for the object to be used as a static member.

Keep in mind, though, that:

*   `static` members will **all** be initialized *before* the `main()`, which means your 1GB of data will be read regardless of whether anyone ever uses that particular class
*   You can work around the abovementioned issue, but then you will have to be checking if the data load and initialization has happened during run-time

There's another option for you, however. If you store your floats "as-is" (i.e. 32 bits per each, in binary format) you can just simply "map" the files into memory spaces and access them as if they were already loaded - the OS will take care of loading appropriate 4K pages into RAM when needed.

Read more about `mmap` at [http://en.wikipedia.org/wiki/Mmap](http://en.wikipedia.org/wiki/Mmap)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T09:40:29.617

> 当我将向量定义为静态时，我会收到链接器解析错误。

这是因为您声明了静态变量（在您的头文件中），但您从未在您的一个实现文件（.cpp）中显式初始化它。

例如：

```
//AClass.h 
class AClass
{
    private:
    static std::vector<int> static_vector;

}; 
```

并在 .cpp 实现文件中：

```
std::vector<int> AClass::static_vector; 
```

# jquery - 动态创建的 HTML 元素在显示/隐藏时丢失属性

> ID：11825673
> 
> 赞同：1
> 
> 时间：2012-08-06T09:32:26.847
> 
> 标签：jquery, html

我正在创建一个基本上临时伪造密码输入的输入，如下所示：

```
var fakeId = currentElement.attr("id") + "Fake";

var fakePasswordInput = $("<input>",
{
    id: fakeId,
    val: value,
    type: "text",
    class: cssClass
});

currentElement.after(fakePasswordInput); 
```

我的问题是当这种情况发生时：

```
 currentElement.blur(function () {
            if ($(this).val() == "") {
                $(this).hide();
                var id = $(this).attr("id");
                var val = elements["#" + id];
                // have NO idea why, but it loses the CSS class AND the value.
                $("#" + id + "Fake").show();
            }
        }); 
```

最后一行，`$("#" + id + "Fake").show();`将愉快地显示元素，但是它失去了它的 CSS 类和它在其中的值。为了解决这个问题，我执行以下操作：

```
$("#" + id + "Fake").val(val).addClass(cssClass).show(); 
```

这是一个黑客，我不喜欢。那么，为什么隐藏然后显示一个动态生成的 HTML 元素会丢失它的属性呢？（这发生在 Chrome/FF/IE 中）

**编辑**

这一切都在一个函数中定义。像这样在最`cssClass`顶部声明​​：

```
function formBlur(elements) {
    var cssClass = "default_text_input"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:08:42.973

尝试这个

```
var fakePasswordInput = $("<input/>",
{
    id: fakeId,
    val: value,
    type: "text",
    class: cssClass
}); 
```

您可能应该
在使用这种语法动态创建输入标签时关闭它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:35:01.357

请尝试将 val 参数更改为 value。

```
var fakePasswordInput = $("<input/>",
{
    id: fakeId,
    value: value,
    type: "text",
    class: cssClass
}); 
```

类论点似乎是正确的。可能是由于 value 参数而无法正常工作。

# java - 我们如何为 404 配置自定义错误页面，在应用程序战争之外

> ID：11825676
> 
> 赞同：0
> 
> 时间：2012-08-06T09:32:33.990
> 
> 标签：java

假设这是我的应用程序 - (localhost:8080/myApp/servlet/HomeServlet)

如果我用垃圾污染 servlet 说**localhost:8080/myApp/servlet/HomejunkServlet**我得到 404 作为响应，我可以通过配置 web.xml 重定向到通用自定义错误页面。

但是如果我请求一个不存在的应用程序例如：localhost:8080/myApp-tht-doesn-exist/servlet/HomeServlet，它仍然会给我默认的 404，即使我将我的 web.xml 配置为处理 404 错误. 在这种情况下，如何重定向到自定义错误页面？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:03:30.117

服务器将非应用程序上下文作为资源请求处理。因此，将一个 Webapp 作为 ROOT.war 放置到为代码 404 配置他自己的 error.jsp 的服务器上。

如果您的应用程序服务器已关闭，使用 Apache-HTTP-Server 来显示错误页面应该会更好。

# mysql - 查找与一个字段匹配的相关实体

> ID：11825681
> 
> 赞同：0
> 
> 时间：2012-08-06T09:32:42.150
> 
> 标签：mysql, sql, join

我有几个（MySQL）表。有趣的是`CampaignRegion`它存储一个外键到 a`Campaign`和一个外键到a `City`、`County`、`District`或。始终只有一个特定于位置的外键集，其他的是.`State``Country``NULL`

该`CampaignRegion`表如下所示：

```
mysql> describe CampaignRegion;
+-------------+---------+------+-----+---------+----------------+
| Field       | Type    | Null | Key | Default | Extra          |
+-------------+---------+------+-----+---------+----------------+
| id          | int(11) | NO   | PRI | NULL    | auto_increment |
| campaign_id | int(11) | YES  | MUL | NULL    |                |
| country_id  | int(11) | YES  | MUL | NULL    |                |
| state_id    | int(11) | YES  | MUL | NULL    |                |
| district_id | int(11) | YES  | MUL | NULL    |                |
| county_id   | int(11) | YES  | MUL | NULL    |                |
| city_id     | int(11) | YES  | MUL | NULL    |                |
+-------------+---------+------+-----+---------+----------------+ 
```

我现在需要一个查询来选择一个`Campaign`. 我有一个`City`并且需要得到与自身`Campaigns`匹配的或者匹配的或者匹配的或者匹配的。`City``County``District``State``Country``City`

这实际上很容易，我想出了这样的事情：

```
SELECT count(id) as campaign_count, campaign_id
  FROM CampaignRegion
 WHERE (city_id = 32076 OR district_id = 127 OR state_id = 7 OR country_id = 156)
 GROUP BY campaign_id
HAVING campaign_count > 0; 
```

但是我想得到`Campaigns`sorted 的结果集，它`City`首先匹配，然后是匹配的`County`，然后是匹配的`District`，依此类推（比如`OR`查询中的顺序。有没有一种简单的方法可以做到这一点？我会根据 a or中的这个查询`SELECT`对（第一次匹配）做什么？你怎么看？`Campaign``JOIN``SUBSELECT`

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:37:40.557

我认为这就是你要找的：

```
SELECT count(id) as campaign_count, campaign_id
FROM CampaignRegion
WHERE (city_id = 32076 OR district_id = 127 OR state_id = 7 OR country_id = 156)
GROUP BY campaign_id
HAVING campaign_count > 0;
ORDER BY (city_id = 32076) DESC, (country_id = 156) DESC, (state_id = 7) DESC, (district_id = 127) DESC; 
```

# php - 将 microtime() 与 Sha1 一起使用（生成唯一哈希）

> ID：11825683
> 
> 赞同：1
> 
> 时间：2012-08-06T09:32:48.273
> 
> 标签：php, sha1

```
$hash = sha1(rand().microtime()); 
```

我打算将 $hash 存储在数据库中。

如果我一次又一次地输入一个字符串，`Sha1()`它会产生相同的哈希值。但是如果我输入它，它`microtime()`会返回当前的 Unix 时间戳，以微秒为单位 - 它会保证所有未来调用的哈希值都不同（因为当前时间会增加）。我在这里假设将来的调用是对该函数的调用，在上一次调用之后至少有 1 分钟的差异？

你打算说什么？

**我知道我可以通过简单地检查这个哈希是否已经存在于数据库表中来检查唯一性，但我只是想知道在上面使用时我是否可以假设它是唯一的。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T09:46:59.277

绝对**没有**散列函数计算具有预定义的有限长度的字符串可以保证唯一性。任何这样的有限长度字符串都有有限数量的可能输出，但有无限数量的输入。**看到任何**散列函数都必须处理冲突并不复杂。

话虽如此，散列字符串的大小越长，冲突的可能性就越小。

您也可以使用 GUID 或[uniqid](http://us2.php.net/uniqid)之类的东西，但这是同一个问题：可能会发生冲突。极不可能，但有可能。

如果您需要保证唯一的东西，请使用类似`AUTO_INCREMENT`或其他类型的 ID 来确保唯一性。

如果你只是想要一些*看起来很*复杂（但实际上并不复杂）的东西，那么......好吧，为什么？但是我想如果您对此一无所知，请尝试将唯一 ID 填充到您的哈希中，例如：

```
$hash = $id . sha1(rand().microtime()); 
```

或者：

```
$sha1 = sha1(rand().microtime());
$hash = substr($sha1,0,20). '-'.$id.'-'. substr($sha1,21); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T09:37:57.123

use [uniqid()](http://nz.php.net/manual/en/function.uniqid.php) you don't need to create your own

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T09:36:52.193

你能**保证**唯一性吗？不会。SHA1 产生 160 位散列。有多个`2^160`可能的值可从`microtime`. 因此将有多个值生成相同的哈希。哈希值将针对所有意图和目的随机分布，因此即使在相对较小的时间间隔内，您也可能会发生冲突。

你能假设实践中的独特性吗？好吧，既然没有保证，那都是概率性的。强制执行最小间隔无济于事 - 哈希冲突的概率在任何两个观察值之间都是相同的。但是概率很低，所以你可能没事。取决于如果你得到一个世界是否会结束，或者你是否会受到轻微的不便......;）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T09:39:34.983

您可以使用 UUID（如本页评论所示：http: [//php.net/manual/en/function.uniqid.php](http://php.net/manual/en/function.uniqid.php)）但是上面不是 UUID，因此您不能假设它是独特的。

你可以说有十亿分之一的机会发生冲突。如果您取出`rand()`（因为这实际上可以增加与已经发生的事情相等的可能性`time+rand`）并且仅在时间上工作，则可以减少这种情况，但这一切都取决于访问，我的意思是`MongoId`根据时间取 , 但有足够的访问和碎片冲突可能发生并且确实......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T09:38:28.760

You can be sure.....of its uniqueness and make the column in the db unique to ensure that as well...so that u can rethrow...and $rand() can't be the same always as well as the microtime()

# ios - iOS 开发者企业计划

> ID：11825686
> 
> 赞同：6
> 
> 时间：2012-08-06T09:33:04.013
> 
> 标签：ios

我正在寻找在苹果网站上找不到的其他信息：

*   该应用程序是否经过 Apple 审核？
*   我究竟如何才能将应用程序提供给员工？我是否发送到应用程序的链接或是否需要一些身份验证？
*   我需要注册每个想要使用这个应用程序的设备 ID 吗？

问题是，我们开发的应用程序将由一小群人使用，而我们的应用程序可能无法通过审核流程，因为我们使用专有 API。

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-06T09:44:00.023

1.  不，该应用程序未经过 Apple 审核
2.  您可以只发送一个应用程序的链接，[http](http://shinydevelopment.com/blog/over-the-air-ios-provisioning-and-distribution/) ://shinydevelopment.com/blog/over-the-air-ios-provisioning-and-distribution/ 上的说明应该适用于企业分发，只需确保选择您的企业配置文件
3.  不，无需注册设备 UUID

# objective-c - 在 Xcode 中显示第二个 .xib 文件的第二个窗口？

> ID：11825687
> 
> 赞同：1
> 
> 时间：2012-08-06T09:33:10.213
> 
> 标签：objective-c, xcode, macos

我是一个完整的 Xcode 菜鸟，但我正在尝试制作一个小型 Mac 应用程序。我想要发生的是，我在主窗口中按下一个按钮，然后在该主窗口顶部打开另一个窗口。正如我所说，我是一个完整的菜鸟，所以我更喜欢一步一步的指南:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T10:03:17.020

这很简单，首先您必须使用 Xcode 创建一个窗口，然后创建一个 WindowController，然后您可以将 Controller 与您的视图（Xib）链接起来。然后打开一个新窗口（假设您的窗口控制器称为 YourWindowController）只需将此代码插入由您的按钮触发的 IBAction 方法中：

```
YourWindowController *controllerWindow = 
[[YourWindowController alloc] initWithWindowNibName:@"You_Window_XIB"];
[controllerWindow showWindow:self]; 
```

# php - Codeigniter 从 url 中删除 index.php 并在视图中添加外部 css

> ID：11825689
> 
> 赞同：0
> 
> 时间：2012-08-06T09:33:13.927
> 
> 标签：php, codeigniter

嗨，我是 Codeigniter 的新手。我试图做一些基本的事情，但我遇到了错误。我正在使用 v.2.12。我想做两件事。1\. 删除 index.php 2\. 将外部样式表添加到我的视图中。

我找到了很多教程，但没有人为我工作。如果 index.php 被删除，则 css 无法正常工作。那么任何人都可以帮助我如何做到这一点？

我正在尝试从早上开始做这些基本的事情。

所以请帮助我。

感谢您阅读我的帖子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:39:41.113

好吧，你的配置页面

```
$config['base_url'] = 'http://localhost/t/';
$config['index_page'] = ''; 
```

您在根文件夹中的 .htaccess 应包含以下内容。确保将 RewriteBase 中的路径更改为您的路径。

```
RewriteEngine on
RewriteBase /t/
RewriteCond $1 !^(index\.php|resources|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
```

在你看来

```
<link href="<?php echo $this->config->base_url();?>css/layout.css" rel="stylesheet" type="text/css" /> 
```

希望这可以帮助

# java - 如何用分隔符分割字符串？

> ID：11825690
> 
> 赞同：-5
> 
> 时间：2012-08-06T09:33:16.043
> 
> 标签：java

我有一个字符串`"Foo*#*Bar*#*Foo1*#*Bar1"`

我想要一个正则表达式，它在使用时`String.split(String RegularExpression)`会返回

```
[0] = "Foo";
[1] = "Bar";
[2] = "Foo1";
[3] = "Bar1"; 
```

我试过`\*#*\`了，但它没有返回我想要的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T09:34:42.300

您需要转义两个星号：

```
\*#\* 
```

所以在Java中你会做这样的事情：

```
String[] str = mystring.split("\\*#\\*"); 
```

试试[Regexr.com](http://regexr.com?31obo)来试验正则表达式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T09:40:08.917

```
for (String part:"Foo*#*Bar*#*Foo1*#*Bar1".split("\\*#\\*"))
    System.out.println(part); 
```

我们需要两个星号上的两个反斜杠（在java字符串中）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T09:36:44.657

对于你的例子，

```
List<String> matchList = new ArrayList<String>();
Pattern regex = Pattern.compile("\\w+");
Matcher regexMatcher = regex.matcher(subjectString);
while (regexMatcher.find()) {
    matchList.add(regexMatcher.group());
} 
```

将返回`subjectString`.

或者，您可以拆分分隔符：

```
String[] splitArray = subjectString.split("\\*#\\*"); 
```

请注意，您必须将所有反斜杠加倍才能在 Java 字符串中使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T09:42:16.450

```
String splitable= "Foo*#*Bar*#*Foo1*#*Bar1";
String[] splitted=splitable.split("\\*#\\*"); 
```

# c# - 如何在c#中使用cookie记住用户名和密码

> ID：11825692
> 
> 赞同：0
> 
> 时间：2012-08-06T09:33:18.047
> 
> 标签：c#, asp.net

我是 C# 的新手，我创建了一个登录表单，其中包含两个字段用户名和密码也记住我复选框.. 第一次用户登录表单并选中记住我复选框.. 你能指导我如何自动生成用户密码当用户下次使用 c# 登录时，在 cookie 的密码字段中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:38:11.867

Hope you are using FormsAuthentication. In the SetAuthCookie method, there is one parameter, PersistCookie, set this value to true, ASP.Net runtime will store the user credentials to the client.

You can find more details here : [How to: Implement Simple Forms Authentication](http://msdn.microsoft.com/en-us/library/xdt4thhy.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T09:43:01.783

如果我正确理解您的问题，您想要的是在用户下次访问您的页面时预先填写登录信息。

出于安全原因，您不应**使用cookie 来执行此操作。**最好的方法是让浏览器为您存储登录信息。我敢打赌，您的浏览器之前曾询问过您“保存此密码？是的，从不，现在不是”？

为此，浏览器需要识别它正在处理登录表单。我相信各种浏览器之间的检测方式可能存在一些差异，但是对于我相信的大多数浏览器来说，遵循这些步骤就足够了：

1.  确保输入字段已命名`username`并且`password`
2.  确保密码输入的类型`password`
3.  确保表单具有正确的操作属性
4.  确保表单有提交按钮

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T09:38:12.537

Asp.net has an implementation of forms authentication ready to use.

Use the methods FormsAuthentication.SignIn() and FormsAuthentication.SignOut() to create the auth cookie or delete it.

For more info: [http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.aspx)

# facebook - 使用点赞按钮插件来点赞 Facebook 上托管的照片

> ID：11825693
> 
> 赞同：1
> 
> 时间：2012-08-06T09:33:22.023
> 
> 标签：facebook, plugins, facebook-like

是否可以使用点赞按钮插件 ( [http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/) ) 来创建与 facebook 上托管的照片相关联的点赞按钮？

例如，当我使用这张照片作为按钮：[http](http://www.facebook.com/photo.php?fbid=10151873865243306) ://www.facebook.com/photo.php?fbid=10151873865243306时，它不会检索喜欢的数量，当点击按钮时，出现以下错误显示：

```
The page at http://www.facebook.com/photo.php?fbid=10151873865243306 could not be reached. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:41:43.000

在“10151873865243306”上使用您的 FB ID。

# jquery - 在文档准备好和元素更改时附加自定义 jQuery 函数

> ID：11825697
> 
> 赞同：0
> 
> 时间：2012-08-06T09:33:29.700
> 
> 标签：jquery, jquery-callback

我有一个函数可以隐藏或显示具有给定类名的元素：

```
$.fn.questionDetails = function(base_element, details_yes_no) {
  var details_element = '.' + base_element + '_details';
  var radio_element = '#' + base_element + '_' + details_yes_no;

  if ($(radio_element).attr('checked')) {
    $(details_element).show();
  } else {
    $(details_element).hide();
  }
} 
```

我想附加/绑定此函数，以便在加载页面和更改给定单选按钮组时使用两个参数调用它。目前我正在使用以下代码来完成此操作：

```
$(function() {
  // $.fn.questionDetails defined here, in same scope

  $.fn.questionDetails('question1', 'yes');
  $('input:radio[name=question1]').change().questionDetails('question1', 'yes');
} 
```

第一个函数调用工作正常 - 加载页面时，question1_details 面板将显示或隐藏。但是，当我更改选择了哪个单选按钮时，该函数似乎没有被正确调用，当我将 change() 行修改为这样时它也不起作用：

```
$('input:radio[name=question1]').change($.fn.questionDetails('question1', 'yes')); 
```

我希望能够说“在页面加载时以及给定的单选按钮组更改时使用这些参数调用此函数*”*，并且重复次数最少。解决此问题的最佳方法是什么？我对 jQuery 比较陌生，所以我可能从一开始就以“错误”的方式做事。

编辑：最初应该提到这一点 - 我使用的是 jQuery 1.7.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:50:02.897

如果要将调用分配给将参数（事件除外）传递给事件处理程序的函数，则需要将该调用包装在匿名函数中，如下所示：

```
$('input:radio[name=question1]').change(function() {
    $.fn.questionDetails('question1', 'yes')
}); 
```

为什么？因为该`change()`函数期望将函数引用传递给它。当你这样做时，`change($.fn.questionDetails('question1', 'yes'))`你将调用结果传递`$.fn.questionDetails('question1', 'yes')`给函数，而不是函数引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T09:51:32.913

我会尝试这样的事情：

```
$('input:radio[name=question1]').change(function(ev) {
    ev.preventDefault();
    $.fn.questionDetails('question1', 'yes');
}); 
```

如果您需要动态决定传递给回调的参数，我会[触发](http://api.jquery.com/trigger/)一个自定义事件：

```
$('input:radio[name=question1]').change(function(ev) {
    ev.preventDefault();
    var param1 = // A param you'd like to pass to the callback
    var param2 = // Another param
    $(this).trigger('mycustomevent', [param1, param2]);
}); 
```

之后，您可以绑定自定义事件，该事件将在您的输入更改时触发，访问参数如下：

```
$('input:radio[name=question1]').on('mycustomevent', function(ev, param1, param2){
    $.fn.questionDetails(param1, param2);
}); 
```

编辑：

正如您在[jQuery 文档](http://api.jquery.com/trigger/)中看到的，触发器函数允许您包含一组参数，这些参数将传递给回调函数。

我猜你正在使用 jQuery 1.7 或更高版本。如果不是这种情况，则必须使用`bind`or`live`函数而不是`on`附加事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T09:53:19.043

首先，如果您使用的是 jquery 1.7.*，请`change()`尝试使用该函数而不是函数。`on()`如果您使用的是早期版本，请使用`bind()`或`live()`。

如果您确实想使用 change()，则不要将该函数作为参数传递给 change。相反，请使用匿名函数，然后在该匿名函数中调用您的函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T10:01:55.443

试试这个

```
$.fn.questionDetails = function(base_element, details_yes_no) {
  var details_element = '.' + base_element + '_details';
  var radio_element = '#' + base_element + '_' + details_yes_no;

    $(radio_element).change(function(){
        $(details_element).toggle();
    });
} 
```

# c# - 检索按日期时间排序的列表中的下一条记录

> ID：11825699
> 
> 赞同：0
> 
> 时间：2012-08-06T09:33:39.027
> 
> 标签：c#, asp.net, linq, linq-to-sql

考虑以下日期列表

```
ID  NAME    DATE
1   Mary    01-01-1901
2   Mary    01-01-1901
3   Mary    01-01-1901
4   Mary    01-01-1901
5   Lucy    01-01-1951
6   Peter   01-01-1961 
```

以上是按日期排序的列表。因此在数据库中它不是这样表示的。

我正在尝试按日期获取列表中的下一条记录。我正在做的是，从数据库中检索人员列表，然后按日期排序，然后按 ID 排序。发生的事情是返回的 ID 总是相同的：

下一条记录 -> 2 -> 下一条记录 -> 1 -> 下一条记录 2 依此类推...看来我卡在前 2 条记录上。我正在使用 LINQ-to-SQL

下面是我用来实现这一点的代码

```
string newID = dx.Persons
                              .AsEnumerable()
                              .ToList()
                              .Where(
                                x => x.DOB.CompareTo(newConvertedValue) == 0 && x.Id > currentID
                                 ||
                                x.DOB.CompareTo(newConvertedValue) > 0 && x.Id != currentID)
                              .OrderBy(x => x.DOB)
                              .ThenBy(x => x.Id)
                              .Select(x => x.Id.ToString(CultureInfo.InvariantCulture))
                              .First(); 
```

对我来说，在指定 Where 条件之后对列表进行排序是没有意义的，但是当我尝试修改语句时，我得到了一个 no element in sequence 异常。

请注意上述变量的含义如下： newConvertedvalue = 当前显示记录的出生日期 currentID = 当前显示记录的ID。

我尝试过使用不同的解决方案，但似乎找不到解决此问题的方法。

我已经实现了类似的方法来排序和获取包含整数和字符串的列的下一条记录，这些方法运行良好（也感谢这个伟大网站的贡献）。但是这个包含日期的专栏让我很难过。

谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:43:47.403

利用

```
var Ids = dx.Persons
          .AsEnumerable()
          .ToList()
          .Where(x => x.DOB.CompareTo(newConvertedValue) == 0 && x.Id > currentID
                                 ||
                 x.DOB.CompareTo(newConvertedValue) > 0 && x.Id != currentID)
          .OrderBy(x => x.DOB)
          .ThenBy(x => x.Id)
          .Select(x => new { ID = Id, Date = DOB })
          .ToList();

Ids.ForEach(x => Console.WriteLine(x.ID)); 
```

# java - OverlayLayout 不遵守焦点更改的覆盖顺序

> ID：11825701
> 
> 赞同：2
> 
> 时间：2012-08-06T09:33:47.220
> 
> 标签：java, swing, layout, overlay, visibility

我遇到了一个问题`OverlayLayout`。

基本上，我创建了一个组件，它允许在主要内容（如下拉菜单）上方展开覆盖内容。有用！

问题是：如果我`JButton`在主要内容（下面的内容）上放了一个，当我点击这个按钮时，按钮开始出现在覆盖内容的上方！我不知道为什么？

有谁知道问题是什么？可能是重点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T11:19:55.493

我终于找到了答案！它来自stackoverflow上的[另一篇文章......](https://stackoverflow.com/a/7012365/230513)

> 当组件在面板上重叠时，您需要告诉面板，以确保它以正确的 ZOrder 重新绘制组件：
> 
> 为此，您可以重写 JPanel 的 isOptimizedDrawingEnabled() 方法以返回 false。

# methods - Ruby On Rails 中的 UTF8 修复 - 如何使用 concat 方法？

> ID：11825705
> 
> 赞同：1
> 
> 时间：2012-08-06T09:34:12.710
> 
> 标签：methods, overriding, activesupport

希望有人会帮助我:)

所以我在使用 utf8 字符时遇到了 utf8 编码问题，例如，来自 db..

我收到了这个错误：

```
incompatible character encodings: ASCII-8BIT and UTF-8 
```

顺便说一句，从 db 编码不是问题。无论如何，我找到了解决我的问题的方法，那就是改变方法

```
Ruby193\lib\ruby\gems\1.9.1\gems\activesupport-3.2.6\lib\active_support\core_ext\string\output_safety.rb 
```

我改变的方法是“concat”。所以我改变了这个方法：

```
def concat(value)
  if !html_safe? || value.html_safe?
    super(value)
  else
    super(ERB::Util.h(value))
  end
end
alias << concat 
```

对此：

```
def concat(value)
  value = (value).force_encoding('UTF-8')
  if !html_safe? || value.html_safe?
    super(value)
  else
    super(ERB::Util.h(value))
  end
end
alias << concat 
```

但是当然这是一个坏主意，因为该应用程序无法在其他服务器上运行..

所以我想从我的初始化程序中覆盖这个方法，所以我创建了：

```
config/initializers/utf8_fix.rb 
```

使用此代码：

```
module ActiveSupport #:nodoc:
  class SafeBuffer < String
    def self.concat(value)
      value = (value).force_encoding('UTF-8')
      puts "--------------------------------"
      puts "Loaded concat in utf8fix.rb"
      puts "--------------------------------"
      if !html_safe? || value.html_safe?
        super(value)
      else
        super(ERB::Util.h(value))
      end
    end
    alias << concat
  end
end 
```

但似乎它不会覆盖默认方法。那么有人可以告诉我，我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T07:58:32.073

由于“concat”不是类方法，因此我不需要 self 在它之前，所以这是我的问题..

解决变化：

```
def self.concat(value) 
```

至：

```
def concat(value) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-13T09:45:35.750

对上述答案的一些修复：

```
module ActiveSupport #:nodoc:
    class SafeBuffer < String
        def concat(value)
          if value.is_a?String
            value = value.dup if value.frozen?
            value = (value).force_encoding('UTF-8')
            puts "--------------------------------"
            puts "Loaded concat in utf8fix.rb"
            puts "--------------------------------"
          end
          if !html_safe? || value.html_safe?
            super(value)
          else
            super(ERB::Util.h(value))
          end
      end
      alias << concat
    end
  end 
```

# sql - 如何在 Oracle 存储过程中正确使用对象类型？

> ID：11825709
> 
> 赞同：0
> 
> 时间：2012-08-06T09:34:27.327
> 
> 标签：sql, oracle, stored-procedures, plsql

我有这个类型定义：

```
Create Type "T1" as Table of Varchar2(10);/ 
```

这被执行了。

如何在 PL/SQL 中使用 T1 类型变量？我有以下程序：

```
Create or replace PROCEDURE P1
AS
  P_K   T1;
BEGIN
  SELECT P_K_J INTO P_K FROM SOME_TABLE WHERE NAME='JONES' ;
  FOR I IN P_K.FIRST..P_K.LAST LOOP
    DBMS_OUTPUT.PUT_LINE('THE VALUES OF P_K ARE' || P_K(I));
  END LOOP;
END P1; 
```

这给出了以下错误：

```
错误：
3/5 PL/SQL：项目被忽略
3/5 PLS-00311：“T1”的声明不完整或格式错误

```

我的问题是：如何实例化类型的变量`T1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:54:22.023

```
Create Type "T1" as Table of Varchar2(10);
/
Create or replace PROCEDURE P1
AS
  P_K   T1;
BEGIN

  SELECT P_K_J BULK COLLECT INTO P_K FROM SOME_TABLE WHERE NAME='JONES';

  FOR I IN P_K.FIRST..P_K.LAST LOOP
    DBMS_OUTPUT.PUT_LINE('THE VALUES OF P_K ARE' || P_K(I));
  END LOOP;

END P1;
/ 
```

# java - 从其他活动调用函数时出现 ClassCastException

> ID：11825711
> 
> 赞同：0
> 
> 时间：2012-08-06T09:34:35.503
> 
> 标签：java, android

我有两个活动称为`Activity_A`和`Activity_B`。我在 Activity_A 中有一个方法或函数，例如：

```
public void printNumber (int i) {
    for(int j = 0; j <= i; j++) {
        Log.w("TAG", "Print number is: " + j);
    }
} 
```

现在我想从另一个名为 Activity_B 的活动中调用此方法。

我正在尝试使用以下行调用此方法：

```
((Activity_A) this.getApplicationContext()).printNumber(); 
```

我在 Activity_B 的 onCreate 中写了这一行，这将使我的应用程序崩溃，并且 logcat 显示此错误：

```
java.lang.ClassCastException: android.app.Application cannot be cast to com.example.app.Activity_A 
```

我怎样才能做到这一点？

**编辑：** 我发现[了这个](https://stackoverflow.com/q/5086446/1250370)问题并根据“丰富”扩展`Activity_A`到`Activity_B`. 但问题是`Activity_B`一个列表活动，我已经用`ListActivity`.

和其他答案创建一个实例`Activity_A`然后调用方法。如果我这样做，所有变量都将变为空或为空`Activity_A`。而且我不想制作静态方法。

有没有其他方法可以在不创建静态引用或另一个实例的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:36:41.397

getApplicationContext 将为您提供一个类型为 Application 而不是 Activity 的类。所以这不起作用，你必须存储一个静态的活动上下文，然后调用这个方法。如果您发布您正在尝试做的事情的详细信息，那么有人会提出解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:41:02.893

我假设您`Activity_A`来自 Activity 而不是来自 Application。`getApplicationcontext()`返回应用程序，而不是活动。

如果您想`printNumber()`从任何活动中使用您的，请将其放入应用程序或服务中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T09:43:15.580

应用程序上下文是比您的任何一个活动都更高级别的构造。

活动 A 不是活动 B 的父项。

活动之间的“直接”通信只能通过

仅通过通过 startActivity 或 startActvityForResult 触发的 Intent 从 A 到 B

B 只能与 A 通信，如果它已被 startActivityForResult 调用，然后被响应

在活动A中覆盖以下方法 public void onActivityResult(int requestCode, int resultCode, Intent data)

在活动 B 中，最后呼吁

[http://developer.android.com/reference/android/app/Activity.html#setResult(int](http://developer.android.com/reference/android/app/Activity.html#setResult(int) )

# iphone - 如何在运行时加载数组中的项目

> ID：11825715
> 
> 赞同：-1
> 
> 时间：2012-08-06T09:34:48.920
> 
> 标签：iphone, xcode, uitableview

我有三个 tableView 一个包含类别一个包含类型和其他产品名称我希望当用户选择任何类别时应该在运行时加载类型数组以获得所选类别的相同类型

在我的示例中，如果我选择类别除草剂，那么它应该插入

arrayType 中的 typeHerbicides 但是当我加载第二个表时它没有显示任何值

```
 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
  return 1;
  } 
```

// 自定义表格视图中的行数。

```
 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

   if (tableView ==tblSimpleTable ) 

    return [categoryArray count];

   else if(tableView==tblSimpleTableType)

     return [typeArray count];

   else if(tableView==tblSimpleTableProduct)

    return [productArray count];

   else if(tableView==tblSimpleTableOneSection)

    return [categorySectionOneArray count];
   else if(tableView==tblSimpleTableTypeSection)

    return [typeArraySection count];
    else 

    return  [productArraySection count];
     } 
```

// 自定义表格视图单元格的外观。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

     UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

     if (cell == nil) {
     cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier] autorelease];
     }

    if (tableView ==tblSimpleTable ) {

cell.textLabel.font=[UIFont fontWithName:@"Arial" size:16];

cell.textLabel.text = [categoryArray objectAtIndex:indexPath.row];
    return cell;

   }

    else if (tableView==tblSimpleTableType){

    cell.textLabel.font=[UIFont fontWithName:@"Arial" size:16];

    cell.textLabel.text = [typeArray objectAtIndex:indexPath.row];
    return cell;

   }

   else if(tableView==tblSimpleTableProduct) {

    cell.textLabel.font=[UIFont fontWithName:@"Arial" size:16];

    cell.textLabel.text = [productArray objectAtIndex:indexPath.row];
    return cell;

   }

   else if(tableView==tblSimpleTableOneSection){

    cell.textLabel.font=[UIFont fontWithName:@"Arial" size:16];

    cell.textLabel.text = [categorySectionOneArray objectAtIndex:indexPath.row];
    return cell;

    }

    else if(tableView==tblSimpleTableTypeSection){
    cell.textLabel.font=[UIFont fontWithName:@"Arial" size:16];

    cell.textLabel.text = [typeArraySection objectAtIndex:indexPath.row];
    return cell;

   }

   else {

    cell.textLabel.font=[UIFont fontWithName:@"Arial" size:16];

    cell.textLabel.text = [productArraySection objectAtIndex:indexPath.row];
    return cell;

   }
   }

     - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

     if (tableView ==tblSimpleTable ) {

    titleCategory=[categoryArray objectAtIndex:indexPath.row];

    NSLog(@"This is titleCategory Selected %@",titleCategory);

    NSString*test=@"Herbicides";

    if([titleCategory isEqualToString:test]){

     typeHerbicides=[[NSArray alloc] initWithObjects:@"ACCLAIM EXTRA",@"ILLOXAN",@"REVOLVER",nil];

    typeArray=[[NSArray alloc] initWithArray:typeHerbicides copyItems:YES];
    }

    else {
        typeArray=[[NSArray alloc] initWithObjects:@"ILLOXAN",@"REVOLVER",nil];

        typeArray=[[NSArray alloc] initWithArray:typeHerbicides copyItems:YES];

    }

    }

    else if(tableView==tblSimpleTableType) 

    titleType=[typeArray objectAtIndex:indexPath.row];

   else if(tableView==tblSimpleTableProduct)

    titleProduct=[productArray objectAtIndex:indexPath.row];

   else if(tableView==tblSimpleTableOneSection)

    titleSectionOneCategory=[categorySectionOneArray objectAtIndex:indexPath.row];

    else if(tableView==tblSimpleTableTypeSection)

    titleTypeSection=[typeArraySection objectAtIndex:indexPath.row];
    else 

    titleProductSection=[productArraySection objectAtIndex:indexPath.row];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:46:28.667

当用户选择任何类别时，您可以在 didSelectRowAtIndexPath 中根据所选类别初始化您的 typeArray：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if(tableView == tblSimpleTableType)
    {
       //initialize typeArray;

       //Once typeArray is initialized just reload the tableview as follows:
       [tblSimpleTableType reloadData];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:30:32.040

只需尝试仅在函数的最后返回单元格并查看。

# libav - 使用 avconv 无法识别的选项“filter_complex”

> ID：11825716
> 
> 赞同：6
> 
> 时间：2012-08-06T09:34:49.780
> 
> 标签：libav

我想使用 avconv 混合两个音频文件。在文档中，我发现了以下实现方式：

```
avconv -i INPUT1 -i INPUT2 -filter_complex amix=inputs=2:duration=first:dropout_transition=3 OUTPUT 
```

但是，当我尝试运行它时，出现以下错误：

```
Unrecognized option 'filter_complex'
Failed to set value 'amix=inputs=2:duration=first:dropout_transition=3' for option 'filter_complex' 
```

我一直在寻找解决方案很长一段时间，但找不到任何东西。

我有 avconv 的 0.8.3-4:0.8.3-0ubuntu0.12.04.1 版本。我是否需要更改配置中的任何内容或使用不同版本的 avconv？还有其他方法可以混合音频文件吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T11:21:36.280

在某些版本中，可以使用“-filter:v”选项指定“复杂过滤器”，例如：

```
avconv -i INPUT -filter:v amix=inputs=2:duration=first:dropout_transition=3 OUTPUT 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T17:40:23.007

今天我也在审查这个问题，最终的解决方案只是[下载一个新的 ffmpeg 静态副本，](http://ffmpeg.gusari.org/static/64bit/)然后忘记这个问题......

avconv 似乎没有实现 -filter_complex，尽管手册指出它确实如此。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-02T13:23:27.427

版本问题你必须用最新的更新 ffmpeg。但我们也可以 `-vf`代替`filer-complex`喜欢：

```
ffmpeg -i new1.mp4 -vf "movie=wlogo.png [watermark]; [in][watermark] overlay=main_w-overlay_w-10:10 [out]" -strict experimental output.mp4 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-18T10:22:07.917

您可能应该使用 libav9。最近发布了 9.9 版。

# java - 正则表达式在使用 javascript 的 JSP 中仅允许 0-9 位数字（甚至不包括 '.' [Dot]）

> ID：11825718
> 
> 赞同：0
> 
> 时间：2012-08-06T09:35:01.667
> 
> 标签：java, javascript, regex, jsp

谁能给我一个正则表达式，只允许数字（0-9），甚至不包括“。” （小数点）在使用 javascript 的 JSP 中的文本框中。我会用它用''（空字符串）替换受限制的字符。

我尝试了一些，但他们并没有限制 DOT。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T09:40:27.247

正则表达式模式将是：

```
/^[0-9]+$/ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T09:40:36.323

您需要[锚定](http://www.regular-expressions.info/anchors.html)正则表达式：

```
/^\d*$/ 
```

确保*整个字符串*由数字组成。

没有`^`and `$`，正则表达式将匹配`1`(and `234`) in `1.234`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T09:37:48.447

I would use the class `\d`, it includes only digits. If you want to replace all non-digits you would need to replace `\D+` with `""`.

# java - 使用java在浮点值中丢失精度

> ID：11825719
> 
> 赞同：5
> 
> 时间：2012-08-06T09:35:05.153
> 
> 标签：java, floating-point

下面给出了测试代码及其输出。当我从数值中获取浮点值时，精度会丢失。谁能告诉我为什么会出现这种行为以及如何处理？

```
public static void main(String[] args)
    {
        try
        {
            java.lang.Number numberVal = 676543.21;
            float floatVal = numberVal.floatValue();
            System.out.println("Number value    : " + numberVal);
            System.out.println("float value     : " + floatVal);
            System.out.println("Float.MAX_VALUE : " + Float.MAX_VALUE);
            System.out.println("Is floatVal > Float.MAX_VALUE ? " + ( floatVal > Float.MAX_VALUE));
        }catch(Exception e)
        {
            e.printStackTrace();
        }
    } 
```

输出：

```
 Number value    : 676543.21
    float value     : 676543.2
    Float.MAX_VALUE : 3.4028235E38
    Is floatVal > Float.MAX_VALUE ? false 
```

还有为什么浮点值小于 Float.MAX_VALUE？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-06T09:47:59.190

`float`s 通常最多 6 位有效数字。您的号码`676543.21`有 8 位有效数字。您*将*看到超过 6 位的错误，并且执行的计算越多，这些错误很容易传播到更多有效数字。如果您重视您的理智（或精确度），请使用`double`s。浮点数甚至无法准确计算超过 1000 万。

现在，您有 2 位有效数字，这向我表明您有可能想要代表货币 - *DO NOT*。使用您自己的类，该类使用定点算术在内部表示值。

现在，`Float.MAX_VAL`哪个是 3.4028235E38，意思是 3.4028235*10^38，大约是你的值的 10^32 倍。注意到里面的“E”了吗？那是指数。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-06T09:44:44.950

所有数据类型都有表示限制，因此存在限制这一事实不足为奇。

`float`使用 24 位作为其“尾数”，它包含所有有效数字。这意味着它有大约 7 位的精度（因为 2^^24 大约是 1600 万）

`double`使用 53 位作为“尾数”，因此它可以准确地保存大约 16 位数字。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-06T09:43:50.383

我爱这些。但我会让它快速而无痛。

浮点数和小数（又名浮点数）也不会精确地保存在内存中。但我不想在这里讨论浮点精度和精度问题，我只是给你一个链接 - [http://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm](http://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm)

至于你的另一个问题，让我这样说，因为浮点数是以科学记数法存储的。

```
floatVal = 6.765432E6 = 6.7 * 10^6
MAX_VALUE = 3.4E38 = 3.4 * 10^38 
```

MAX_VALUE 比您的浮点数大 32 个数量级。也可以随意看看这里[http://steve.hollasch.net/cgindex/coding/ieeefloat.html](http://steve.hollasch.net/cgindex/coding/ieeefloat.html)

几个月前，我花了很多时间比较和修复一些 FP 问题......

比较浮点数时尝试使用小增量。也许这个链接会帮助你[http://introcs.cs.princeton.edu/java/91float/](http://introcs.cs.princeton.edu/java/91float/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-06T09:39:26.187

3.4028235E38 is greater than 676543.2\. Float.MAX_VALUE is the largest float that is possible to represent.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-06T09:42:06.330

十进制文字，例如您键入的默认文字`double`，而不是type `float`。java.lang.Number 默认情况下也使用双精度数。如果您将其替换为`java.lang.Number numberVal = 676543.21f;`我希望两者的精度损失相同。或者，替换`float floatVal = numberVal.floatValue();`为`double doubleVal = numberVal.doubleValue();`为了不丢失精度。

编辑，例如，尝试运行：

```
Number num = 676543.21;
System.out.println(num); //676543.21
System.out.println(num.doubleValue()); //676543.21
System.out.println(num.floatValue()); //676543.2 <= loses the precision 
```

查看类型的精度差异

`Float.MAX_VALUE`返回浮点数可以容纳的最大值。任何更高的都会溢出。如果您仔细看，您会在其文本表示中看到一个“E”。这是标准索引形式，'E' 的意思是“乘以 10 到 E 后面的任何数字的幂”（或在 java-speak *pow(10, numberAfterE) 中）

# c++ - 为什么第一个添加的项目总是出现在 Qt 图形场景/视图的中心？

> ID：11825722
> 
> 赞同：1
> 
> 时间：2012-08-06T09:35:17.307
> 
> 标签：c++, qt, qgraphicsview, qgraphicsscene

我有一个图形场景和视图，然后我添加了一个元素。但无论我给出什么 x/y 坐标，它总是出现在图形视图的中心。

为什么会发生这种情况，我怎样才能让它出现在左上角？

这是我的代码：

```
scene = new QGraphicsScene(this);
ui->graphicsView->setScene(scene);
QGraphicsEllipseItem *ellipseItem = scene->addEllipse(150, 150, 10, 10); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:46:46.110

原因是默认情况下，通过将所有项目矩形相加来`QGraphicsScene`计算它。[`sceneRect`](http://qt-project.org/doc/qt-4.8/qgraphicsscene.html#sceneRect-prop)添加第一项时，它会自动将其用作场景矩形。默认情况下`QGraphicsView`，在场景矩形上缩放和中心。

如果您知道最终或所需的场景矩形，请在添加任何项目之前对其进行设置：

```
scene->setSceneRect(0, 0, 800, 600);
scene->addEllipse(150, 150, 10, 10); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T09:43:04.900

您可能想要定义由 QGraphicsView 显示的场景矩形。我认为默认视图只显示当前场景的居中边界矩形，这只是你的椭圆。您可以使用 QGraphicsView::fitInView 来定义要显式显示的区域。

# tridion - 无法解析组件元

> ID：11825725
> 
> 赞同：3
> 
> 时间：2012-08-06T09:35:23.473
> 
> 标签：tridion, tridion-2011

我们正在尝试将旧的 Tridion 2009 站点升级到 Tridion 2011，并且在发布页面时会出现一些问题。

这是 cd_storage_conf.xml 的片段：

```
<Publication Id="78" defaultStorageId="defaultdb" cached="true"> 
    <Item typeMapping="Binary" cached="true" storageId="defaultJSPFile"/>
    <Item typeMapping="Page" cached="true" storageId="defaultJSPFile"/>
    <Item typeMapping="Metadata" cached="true" storageId="defaultdb"/>
</Publication> 
```

`defaultJSPFile`引用文件系统存储并`defaultdb`引用 MSSQL 数据库存储。这是来自发布队列的错误消息。

```
66560, Unable to store item inside current transaction, 
Could not parse tcd:pub[78]/componentmeta[119939], 
Could not parse tcd:pub[78]/componentmeta[119939], 
Could not parse tcd:pub[78]/componentmeta[119939], 
Could not parse tcd:pub[78]/componentmeta[119939], 
Could not parse tcd:pub[78]/componentmeta[119939], 
Could not parse tcd:pub[78]/componentmeta[119939], 
Unable to store item inside current transaction, 
Could not parse tcd:pub[78]/componentmeta[119939] , 
Could not parse 
```

将 Metadata typeMapping 的 storageId 更改为 defaultJSPFile 会使错误消失，但我们无法将元数据导入数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:31:20.037

问题解决了。似乎 Tridion.ContentDelivery.Interop.Dll 没有在部署程序中升级。我仍然不确定部署者将通过部署 zip 中的 linkinfo 文件夹发生了什么变化。

总而言之，请确保在安装服务包或修补程序汇总时升级所有内容。

# sql-server - 恢复存储过程

> ID：11825729
> 
> 赞同：3
> 
> 时间：2012-08-06T09:35:50.230
> 
> 标签：sql-server

我在 SQL Server 2008 R2 中有一个数据库，我创建了这个用于恢复数据库的存储过程：

```
CREATE PROCEDURE [dbo].[usp_DBRestore]
@DBName nvarchar(60)
,@BackName nvarchar(120)
,@OutMessage nvarchar(4000) output
--,
--@DataName varchar(60),
--@DataFileName varchar(120),
--@LogName varchar(60),
--@LogFileName varchar(120)
AS

BEGIN TRY
    USE [master]

    ALTER DATABASE @DBName SET  SINGLE_USER WITH ROLLBACK IMMEDIATE
    RESTORE DATABASE @DBName FROM
        DISK = @BackName WITH
        FILE = 1,  NOUNLOAD, 
        REPLACE,
        PASSWORD = 'TEST'
    SET @OutMessage = 'OK';
    ALTER DATABASE @DBName SET  MULTI_USER WITH ROLLBACK IMMEDIATE
END TRY
BEGIN CATCH

    ALTER DATABASE @DBName SET  MULTI_USER WITH ROLLBACK IMMEDIATE

    INSERT [dbo].[ErrorLog]
  (
   [UserName], 
   [ErrorNumber], 
   [ErrorSeverity], 
   [ErrorState], 
   [ErrorProcedure], 
   [ErrorLine], 
   [ErrorMessage] 
   )
   VALUES(
          CONVERT(sysname, CURRENT_USER), 
          ERROR_NUMBER(),
          ERROR_SEVERITY(),
          ERROR_STATE(),
          ERROR_PROCEDURE(),
          ERROR_LINE(),
          ERROR_MESSAGE()

         )
END CATCH 
```

当我执行代码时，我看到了这个错误：

> 过程、函数或触发器中不允许使用 USE 数据库语句。

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:00:54.417

你不能那样做——你基本上有两个选择：

1.  坚持使用存储过程，但在这种情况下，您必须使用动态 SQL。您的存储过程创建了一个 SQL 语句字符串，它允许它使用`USE master`并允许它动态设置数据库名称等，然后它使用`sp_executesql @sqlRestoreStatement`. 如果你想看看这个，你**必须**阅读（并理解）Erland Sommarskog 的开创性文章[动态 SQL 的诅咒和祝福](http://www.sommarskog.se/dynamic_sql.html)

2.  您可以使用常规 SQL 脚本，可能带有 SQLCMD 占位符（如果您已`SQLCMD mode`在 SQL Server Management Studio 中启用）并从常规脚本执行恢复（例如，您可以将其放入您自己的模板文件夹中）。在这种情况下，你会有类似的东西：

    ```
    :setvar dbname YourDatabaseNameHere

    DECLARE @FileName NVARCHAR(255)
    SET @FileName = N'D:\YourBackupDirectory\SomeDatabase.bak' 

    RESTORE DATABASE [$(dbname)]
    FROM DISK = @FileName
    WITH FILE = 1,  
    MOVE N'YourDatabase_Data' TO N'D:\MSSQL\Data\$(dbname).mdf',  
    MOVE N'YourDatbase_Log' TO N'D:\MSSQL\Data\$(dbname)_Log.ldf',  
    NOUNLOAD, REPLACE,  
    STATS = 2
    GO 
    ```

    通过此设置，您可以轻松地将 SQL 脚本用作模板并使用它恢复任何类型的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T15:54:16.873

您可以创建一个链接服务器并在您的存储过程中引用它。例如。LinkedServer.database.[dbo].StoredProcedure

查看此 [如何为 SQL Server 2008 创建链接服务器，其中我们拥有 2000 年和 2005 年的数据库](https://stackoverflow.com/questions/10402197/how-to-create-the-linked-server-for-sql-server-2008-where-we-have-the-database-f)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T09:43:31.790

您不需要 USE 语句。最好是删除 Use 语句并在主数据库本身上创建/更改此 sp。

如果要进行备份，请从主数据库执行此 SP。我看不到任何其他出路。

# matlab - Matlab中的插值

> ID：11825730
> 
> 赞同：0
> 
> 时间：2012-08-06T09:35:53.427
> 
> 标签：matlab, interpolation

我做了一个插值，但我不知道是否可以保存数据。例如。这是我的代码：

```
load ab1.txt
x= ab1(:,2);
y= ab1(:,3);
z= 399.25:1:2179.5;
yi= interp1(x,y,z);
plot(x,y,'o',z,yi) 
```

我有很多值，例如 352.4、352.5 354.3...，我想通过插值从每个数字中只获得一个值。例如，对于值 352，我想获得插值的值。那可能吗？或者我将不得不做一些不同的事情，比如媒介或类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:38:09.133

```
y352 = interp1(X,Y,352) 
```

为您提供 352 处的插值。

2012 年 8 月 8 日编辑：然后 OP 评论

> 谢谢姆温格勒！但问题是我需要通过插值找到缺失值。例如。我有 350、351、353、354 (x) 及其值 (y)。我需要 Matlab 确定数字 352 丢失并通过插值找到它们的值。那可能吗？非常感谢！:) – user1578688 昨天

从您的其他评论中，如果 X 中没有在 range 中的真实样本，您认为整数 N 丢失`N<=x<N+1`。所以你的问题的答案是：1）找到缺失的数字并将它们组成一个数组2）只插入这些数字的值。

```
X = sort(X); % make sure our X go from least to most in order
XasInt = floor(X); % the integer X at each X value
XasIntFullRange = (X(1):X(end))'; % all X including "missing" values
XasIntMissing = setdiff(XasIntFullRange,XasInt); % just the missing ones
YasIntMissing = interp1(X,Y,XasIntMissing); % interpolated values of the missing 
```

# c# - 自动换行，多行文本框（Winforms）上的触发事件

> ID：11825731
> 
> 赞同：0
> 
> 时间：2012-08-06T09:35:53.453
> 
> 标签：c#, winforms

因此，我编写了一种方法来限制允许在多行文本框中写入的行数（因为这不是 Microsoft 提供的属性）。该方法适用于所有情况，除非发生自动换行事件（键入单个字符或从剪贴板粘贴文本时）。我现在拥有的代码：

```
 protected void limitLineNumbers(object sender, KeyPressEventArgs e, UInt16 numberOfLines)
    {
        int[] specialChars = { 1, 3, 8, 22, 24, 26 }; // ctrl+a, ctrl+c, backspace, ctrl+v, ctrl+x, ctrl+z
        bool found = false;
        string lastPressedChar = "";
        TextBox temp = (TextBox)sender;

        foreach (int i in specialChars)
        {
            if (i == (int)e.KeyChar)
                found = true;
        }
        if (!found)
            lastPressedChar = e.KeyChar.ToString(); // Only add if there is a "real" char

        int currentLine = temp.GetLineFromCharIndex(temp.SelectionStart) + 1;
        int totalNumberOfLines = temp.GetLineFromCharIndex(temp.TextLength) + 1;

        if ((int)e.KeyChar == 1)
            temp.SelectAll();

        // Paste text from clipboard (ctrl+v)
        else if ((int)e.KeyChar == 22)
        {
            string clipboardData = Clipboard.GetText();
            int lineCountCopiedText = 0;
            foreach (char c in clipboardData)
            {
                if (c.Equals("\n"))
                    ++lineCountCopiedText;
            }
            if ((currentLine > numberOfLines || (totalNumberOfLines + lineCountCopiedText) > numberOfLines))
                e.Handled = true;
        }
        // Carrige return (enter)
        else if ((int)e.KeyChar == 13)
        {
            if ((currentLine + 1) > numberOfLines || (totalNumberOfLines + 1) > numberOfLines)
                e.Handled = true;
        }

        // Disallow
        else if ((currentLine > numberOfLines) || (totalNumberOfLines > numberOfLines))
            e.Handled = true;
    } 
```

那么，你们有什么想法可以让这个方法更完整吗？最好的解决方案是捕捉 wordwrap 事件，但据我所知，这不能完成吗？如果文本超过允许的最大值，另一种解决方案是删除文本行。

还是有可能比我想出的解决方案更好？感谢您的意见。

# android - 从 android 数据库上的 ID 读取特定联系人

> ID：11825733
> 
> 赞同：0
> 
> 时间：2012-08-06T09:35:58.327
> 
> 标签：android, sqlite, android-contacts

我需要将光标设置为我有其 ID 的特定联系人

```
 Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,
                            null,null, null, null); 
```

我有所有数据库的代码，我该如何优化它？我需要光标返回联系人的姓名和默认号码

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:00:02.660

你实际上需要两个游标。一个用于姓名和身份证，另一个用于电话号码。

```
 Cursor c = managedQuery(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);

 if (c.moveToFirst()) {
    name = c.getString(c.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
    fullName  = c.getString(c.getColumnIndex("display_name_alt"));
    id = c.getString(c.getColumnIndex(ContactsContract.Contacts._ID));

    if (Integer.parseInt(c.getString(c.getColumnIndex
                   (ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
        //phone number

        Cursor phones = getContentResolver().query(Phone.CONTENT_URI, 
                              null,
                              Phone.CONTACT_ID + " = " + id,
                              null, 
                              null);

        while (phones.moveToNext()) {
               String number_type = phones.getString(phones.getColumnIndex
                              (ContactsContract.CommonDataKinds.Phone.TYPE));
               if(number_type.equalsIgnoreCase("1"))
                    number1 = phones.getString(phones.getColumnIndex
                              (ContactsContract.CommonDataKinds.Phone.NUMBER));
               if(number_type.equalsIgnoreCase("2"))
                    number2 = phones.getString(phones.getColumnIndex
                              (ContactsContract.CommonDataKinds.Phone.NUMBER));
        }

        phones.close();
    }
 }
 c.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:10:06.467

```
cursor = getContentResolver().query(Phone.CONTENT_URI,
                            null, Phone.CONTACT_ID + "=?", new String[] { id },
                            Phone.DISPLAY_NAME + " ASC"); 
```

# asp.net - 使用报表查看器在 Asp.Net 中显示 RDLC 报表

> ID：11825735
> 
> 赞同：1
> 
> 时间：2012-08-06T09:36:04.767
> 
> 标签：asp.net, visual-studio-2010, c#-4.0, rdlc

我正在使用 VS 2010 并创建了一个示例 Web 应用程序。添加了一个数据集和报告并创建了一个只返回一行的 SP。到目前为止没有包含任何变量。只是没有任何参数的简单 SP。在 Web 应用程序中，添加了一个 aspx 页面，并在该页面中添加了一个报表查看器控件。我的 Aspx 页面如下所示：

```
 <rsweb:ReportViewer ID="ReportViewer1" runat="server" Font-Names="Verdana" 
        Font-Size="8pt" InteractiveDeviceInfos="(Collection)" 
        WaitMessageFont-Names="Verdana" WaitMessageFont-Size="14pt">
    </rsweb:ReportViewer> 
```

后面的代码如下：

```
protected void Page_Load(object sender, EventArgs e)
        {
            ReportViewer1.Visible = true;
            ReportDataSource dataSource = new ReportDataSource("DataSet1", LoadData().Tables[0]);
            ReportViewer1.LocalReport.DataSources.Clear();
            ReportViewer1.LocalReport.DataSources.Add(dataSource);
            ReportViewer1.LocalReport.Refresh();
        }

        private DataSet LoadData()
        {
            var dataset = new DataSet();
            using (var con = new SqlConnection(ConfigurationManager.ConnectionStrings["CString"].ConnectionString))
            {
                var command = new SqlCommand("[spSampleReport]")
                                  {
                                      Connection = con,
                                      CommandType = CommandType.StoredProcedure
                                  };

                var adap = new SqlDataAdapter(command);
                con.Open();
                adap.Fill(dataset, "DataSet1");
            }

            return dataset;
        } 
```

在我的网络配置中，在 httphandlers 部分添加了以下内容：

运行时，页面上没有显示任何内容。甚至没有显示报表查看器工具栏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T05:51:03.827

我不是 ReportViewer 专家，但我认为您需要一个 .rdlc 来告诉报表查看器要呈现什么。

```
ReportViewer.LocalReport.ReportPath = Server.MapPath(string.Format(@"~\Reports\Definitions\{0}.rdlc", reportName)); 
```

**确保 .rdlc 中的 DataSet 名称与创建ReportDataSource**时指定的 DataSource 相同

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T15:04:31.417

我找到了一个在 asp.net 中使用代码示例生成 rdlc 报告的好例子

[http://www.dotnetsharepoint.com/2013/09/how-to-create-rdlc-reports-in-aspnet.html#.UjhvAsafh88](http://www.dotnetsharepoint.com/2013/09/how-to-create-rdlc-reports-in-aspnet.html#.UjhvAsafh88)**

# c# - 如何在 Shell 中向 Tabcontrol 添加新的视图副本？

> ID：11825741
> 
> 赞同：0
> 
> 时间：2012-08-06T09:36:40.010
> 
> 标签：c#, wpf, prism, tabcontrol

MEF+目录目录+按需

我在 ModuleB 中有一个代码 Initialize()：

```
this.regionManager.AddToRegion("TabRegion", new Views.Container());
this.regionManager.AddToRegion("TabRegion", new Views.Container()); 
```

并单击外壳上的事件：

```
modulemanager.LoadModule("ModuleB"); 
```

结果，我在 shell tabcontrol 中看到了 2 个选项卡

对我来说，问题是再次打电话：

```
this.regionManager.AddToRegion("TabRegion", new Views.Container()); 
```

怎么做？非常感谢

PS我试图在网上找到解决方案，但我想我的问题不合适。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:48:41.043

Using the EventAggregator:

1.  Create Infrastucture project with PublishModuleAgainer:CompositePresentationEvent class
2.  Point Importing constructor to Shell initializing

    ```
    public Shell(IEventAggregator _eventaggregator); 
    ```

3.  Call in runtime

    ```
    eventaggregator.GetEvent().Publish("STOCK0"); 
    ```

4.  In Initialize() of module subscribe to event

    ```
    eventaggregator.GetEvent().Subscribe(CreateView); 
    ```

5.  Just create Action CreateView and call add2region inside it:

    ```
    this.regionManager.AddToRegion("TabRegion", new Views.Container()); 
    ```

Link to the same question and an answer [Loading a prism module view from the shell, using MEF](https://stackoverflow.com/questions/8573376/loading-a-prism-module-view-from-the-shell-using-mef)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:07:16.123

**如果仅从**ModuleB 构造函数（或某些嵌套方法）调用此代码，那么您唯一的方法是创建 ModuleB 的另一个实例。这是可能对您有所帮助的文章：[MEF 中的动态部件实例化](http://blogs.msdn.com/b/nblumhardt/archive/2009/08/28/dynamic-part-instantiation-in-mef.aspx)。

但是，如果您可以将该方法设为静态，那么您可以在以后根据需要多次调用它。

# c# - 适用于任何计算机的声音播放

> ID：11825754
> 
> 赞同：-1
> 
> 时间：2012-08-06T09:37:23.157
> 
> 标签：c#, winforms

我使用以下代码在单击按钮时播放音乐。

```
private void button1_Click(object sender, EventArgs e)
    {
        SoundPlayer s = new SoundPlayer();
        s.SoundLocation = @"f:\1.wav";
        s.Play();
    } 
```

但是这些代码仅适用于我的计算机，我应该怎么做才能在其他计算机（如数据库）上播放此声音。我应该怎么做才能在其他电脑上播放这首歌？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T09:42:20.287

您可以在项目的资源中导入文件并使用从那里加载它

```
Properties.Resources.<name_of_resource> 
```

为了将某些内容导入资源，请执行以下操作（假设您使用 Visual Studio 2010 - 它类似于我认为的其他版本）：

> 在 Visual Studio 2010 解决方案资源管理器中，右键单击属性 -> 打开 -> 资源 -> 添加资源 -> 添加现有文件

请注意，稍后在其他计算机上安装应用程序时，也会安装资源。

为了播放声音，您需要执行以下操作：

```
SoundPlayer myPlayer = new SoundPlayer(yourNamespace.Properties.Resources.mySound);
myPlayer.Play(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T09:22:02.373

您可以执行类似的操作，将文件内容作为 Stream 从数据库中获取

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T09:41:05.937

您可以执行类似的操作，从数据库或远程系统获取文件内容作为 Stream 并将流传递给 SoundPlayer 实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T09:42:56.713

您可以将声音存储在应用程序的子文件夹中，并通过文件的相对路径访问它们（我相信，但我要精确查找它，它`Application.StartupPath`在 winforms 环境中）。

或者你可以让它们成为资源（见 gkaran89 的回答）。

# php - If condition from database

> ID：11825757
> 
> 赞同：-2
> 
> 时间：2012-08-06T09:37:39.213
> 
> 标签：php, mysql

I am getting $final value from database and displaying in a table according to user. Now I have a value i.e., this is I was showing in the frontend

```
Userid   Total   Letter
  36       45
  5        67
  78       90
  42       82
  12       57 
```

Back End Code

```
$sql = mysql_query('SELECT userid, total FROM history');
echo '<table><th>Userid</th>
             <th>Total</th>
             <th>Grade</th>
while($row = mysql_fetch_array($sql))
{
  echo '<tr><td>'.$row['userid'].'</td>  
            <td>'.$row['$total'].'</td> 
             $letter = mysql_query('SELECT score,letter FROM letter');               
             while($row = mysql_fetch_array($letter))
             {
               $score= $row['score'];
               $letterp= $row['letter']; 
               switch($row['$total']) 
              {
                case $row['$total'] == $score;
                echo '<td>'.$letterp.'</td>';
                break;
                case $row['$total'] >= $score;
                echo '<td>'.$letterp.'</td>';
                break;
              }                
        </tr>    
}
I have a letter table 
 ID  SCORE    letter
  1   100        A+
  2   90         A-
  3   80         B+
  4   73         B-
  5   65         C
  6   55         D
  7   45         E
  8   0          F 
```

Switch case is a sample I wrote here. I need to give condition like if userid scores 45 then I need to show letter E and if userid scores 67 then I need to show B-(b'coz the scorefield defines 65 to 54 is B-) . This is the exact requirement.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:22:51.907

这样的事情应该做：

```
SELECT 
    CASE score 
        WHEN = 100 THEN 'A+'
        WHEN >= 90 and < 100 THEN 'A-' 
        WHEN >= 80 and < 89 THEN 'B+'
        WHEN >= 73 and < 80 THEN 'B-'
        // and so one...
        ELSE 'F' 
    END as myGrade,
    studentID
from 
    table1 
```

编辑：对不起，我以为你正在尝试在数据库中执行此操作（如果我只想要成绩而不是分数，我可能会这样做。无论如何，这是 PHP 代码：

```
$myScore=90; // for example

function getMyScore($myScore)
{
    if($myScore==100)
    {
        return 'A+';
    }
    elseif ($myScore >= 90 && $myScore <100)
    {
        return 'A-';
    }
    elseif ($myScore >= 80 && $myScore <90)
    {
        return 'B+';
    }
    // .....
    else
    {
        return 'F';
    }
}

$myGrade=getMyGrade($myScore);
echo $myGrade; // output: A- 
```

基于我写的函数：

```
function getMyScore($myScore)
{
    if($myScore==100)
    {
        return 'A+';
    }
    elseif ($myScore >= 90 && $myScore <100)
    {
        return 'A-';
    }
    elseif ($myScore >= 80 && $myScore <90)
    {
        return 'B+';
    }
    // .....
    else
    {
        return 'F';
    }
}

while($row = mysql_fetch_array($sql))
{
    echo '<tr><td>'.$row['userid'].'</td><td>'.$row['$total'].'</td>';

    // In your code:
    $letter = mysql_query('SELECT score,letter FROM letter');  
    while($row = mysql_fetch_array($letter))
    {
        $score= $row['score'];
        echo '<td>'.getMyGrade($row['letter']).'</td>';
    }
    echo'</tr>';    
} 
```

# wpf - TokenizedTextBox WPF extended toolkit explanation

> ID：11825759
> 
> 赞同：1
> 
> 时间：2012-08-06T09:37:41.833
> 
> 标签：wpf, autocomplete, tokenize

I'm currently trying to develop Outlook "Send to" field like autocomplete text box with suggestions, tokenized inputs. Currently I'm trying to develop it using TokenizedTextBox of WPF extended toolkit ( which is not officially available in the released) which is available in their source code. [source site](http://wpftoolkit.codeplex.com/wikipage?title=TokenizedTextBox&referringTitle=Home) Have anyone used this ?

Edited: Can anyone give me an example of how to use TokenizedTextBox, I just can't get the autocomplete list. code below

```
<Grid>
    <xctk:TokenizedTextBox Name="testtokenized" Margin="0,25,0,240"  >

    </xctk:TokenizedTextBox>
</Grid>

testtokenized.ItemsSource = new string[] { "hey", "Bye", "goodmorning", "goodnight", "OrionCity" }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:00:14.807

```
<StackPanel Orientation="Horizontal" >
<xctk:TokenizedTextBox TabIndex="230" x:Name="testtokenized"/>
<Button x:Name="sendAllEmail" Click="sendAllEmail_Click" TabIndex="20" ToolTip="Open All In Default Email Client" Height="20" Width="20">
<Image Source="..\Common\Images\Send.png" />

</Button></StackPanel> 
```

```
Private Shared Sub OpenOutlook(ByVal strTo As String, ByVal strCC As String)
    System.Diagnostics.Process.Start(New System.Diagnostics.ProcessStartInfo(String.Format("mailto:{0}?cc={1}", strTo, strCC)))
End Sub

Public Shared Sub OpenEmailInEmailClient()
        If String.IsNullOrWhiteSpace(testtokenized.Text, testtokenized.Text)Then
            Return
        End If

        OpenOutlook(strTo, strCC)
End Sub 
```

# scala - 将元组添加到集合中不起作用

> ID：11825765
> 
> 赞同：10
> 
> 时间：2012-08-06T09:38:06.073
> 
> 标签：scala, set, tuples

```
scala> val set = scala.collection.mutable.Set[(Int, Int)]()
set: scala.collection.mutable.Set[(Int, Int)] = Set()

scala> set += (3, 4)
<console>:9: error: type mismatch;
 found   : Int(3)
 required: (Int, Int)
              set += (3, 4)
                  ^

scala> set += Tuple2(3, 4)
res5: set.type = Set((3,4)) 
```

添加`(3, 4)`不起作用 - 为什么？

通常，`(3, 4)`也表示具有两个元素的元组。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-06T09:44:46.403

问题是它存在于`Set`trait a 方法`+(elem1: A, elem2: A, elems: A+)`中，编译器被它弄糊涂了。它实际上认为您尝试将此方法与 2 个`Int`参数一起使用，而不是像预期的那样将其与元组一起使用。

您可以改用：`set += (3 -> 4)`或`set += ((3, 4))`

# php - 如何从 PHP 执行 WKHTMLTOPDF？

> ID：11825776
> 
> 赞同：1
> 
> 时间：2012-08-06T09:38:41.970
> 
> 标签：php, windows, wkhtmltopdf

我知道这个topis 已经存在，但是没有一个答案对我有帮助......我将wkhtml 文件夹从我的HDD 复制到服务器上。当我运行 exec('"../wkhtmltopdf/wkhtmltopdf.exe" "www.estiroad.com/export.php" "C:/EXTREM.pdf"');

什么都没有发生...我是否正确输入了路径？我的意思是，我需要根据我运行 exec 命令的位置键入 wkhtmltopdf 的确切路径，对吗？如果我想把它保存到用户硬盘上，我需要使用绝对路径，对吧？奇怪的是，它没有给我任何错误，只是默默地什么都不做......我发现了 PHP 绑定，但我不明白如何使用它们......每个人都只在 Linux 中解决这个问题，这对我来说毫无价值:(任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T11:00:35.420

使用来自[knplabs](https://github.com/KnpLabs/snappy)的 snappy。它是 wkhtmltopdf 的包装器并处理这些案例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T09:54:29.167

（我有使用 wkhtmltopdf 的经验，但仅限于 *nix）

我的建议：首先在没有 PHP、没有 exec() 的情况下做所有事情。

只需确保您可以在命令行上键入创建 PDF 的命令。

你确定你在机器上安装了 WebKit 吗？wkhtmltopdf.exe 依赖于它。

只有在您确定可以从命令行生成之后，才能尝试将您的操作转换为 PHP。还要确保 PHP 具有执行 wkhtmltopdf.exe 的适当权限，并且具有写入 C:/EXTREM.pdf 的适当权限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T09:57:39.813

您不应该在库周围加上引号。您可以通过以下方式捕获命令的输出：

```
$commandString = '../wkhtmltopdf/wkhtmltopdf-i386 http://www.estiroad.com/export.php file.pdf 2>&1';
$output       = shell_exec($commandString); 
```

在`2>&1`UNIX 中将意味着输出将通过。1 是标准输出。2 是标准错误。希望这可以帮助。

或者在窗户里

```
$commandString = '../wkhtmltopdf/wkhtmltopdf.exe http://www.estiroad.com/export.php file.pdf 2> output';
print $out ? $out : join("", file("output")); 
```

从权限问题看来，您是在 linux 上运行生产脚本。转到您的生产服务器并运行

```
$ uname -a 
```

你会得到类似的东西：

> Linux ora100 2.6.5-7.252-smp #1 SMP 2 月 14 日星期二 11:11:04 UTC 2006 x86_64 x86_64 x86_64 GNU/Linux

x86_64 建议您运行 64 位 CPU，如果是这种情况，请下载 amd64 版本的二进制文件，否则下载 i386 版本。两者都可以从这个网址中得到：[http ://code.google.com/p/wkhtmltopdf/downloads/list](http://code.google.com/p/wkhtmltopdf/downloads/list)

保留 windows 二进制文件。你有配置文件吗？如果您确实确保有一个开关，可以根据您的环境将库路径分配给常量。

```
if (strtoupper(substr(PHP_OS, 0, 3)) === 'WIN') {
    // this is windows server
    define('WKHTML_LIB', "../wkhtmltopdf/wkhtmltopdf.exe");
} else {
    // or the 64 bit binary?
    define('WKHTML_LIB', "../wkhtmltopdf/wkhtmltopdf-i386");
} 
```

然后更改启动 wkhtmltopdf 的代码：

```
$commandString = WKHTML_LIB' http://www.estiroad.com/export.php file.pdf 2> output';
print $out ? $out : join("", file("output")); 
```

# css - 排序列上的 CSS 分隔符

> ID：11825778
> 
> 赞同：0
> 
> 时间：2012-08-06T09:38:49.493
> 
> 标签：css

我有 2 列，每侧浮动一列，我想使用 1px 宽度的行分隔符，从最长列的顶部到底部。

我宁愿远离 TABLE 布局，而且我不知道哪一个将是最长的列，或者它将是多长。

我怎么能只用css做到这一点？

[http://jsfiddle.net/AhfXc/2/](http://jsfiddle.net/AhfXc/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:58:08.673

像这样的东西

```
.colright{ 
    float: right;
    border-left: 1px solid gray;
    left: -1px;
    position:relative;
} 
```

[http://jsfiddle.net/AhfXc/18/](http://jsfiddle.net/AhfXc/18/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:50:38.293

您可以通过在两者周围放置一个父级并给父级一个背景图像来伪造它，`div`该图像将是一个 200 像素宽、1 像素高的图像，中间有一个 1 像素的黑/灰点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T09:58:48.143

这可以通过 CSS 实现。这是我的示例版本：http: [//jsfiddle.net/AhfXc/15/](http://jsfiddle.net/AhfXc/15/)

基本上，只需使分隔符绝对定位在父容器内（使父位置相对，这样就可以了）。然后将孩子附加到顶部和底部，顶部：0 和底部：0。您可以将分隔符背景设置为您想要的颜色，但我使用了边框样式，因为如果您可以轻松应用虚线/点样式想要。

这仅在列具有已知的绝对或相对宽度时才有效，因为分隔符的水平位置不受它们直接影响，但如果是这种情况，这是一个相当简单的解决方案。

# android - One to Many example, ORMLITE

> ID：11825779
> 
> 赞同：0
> 
> 时间：2012-08-06T09:38:51.020
> 
> 标签：android, one-to-many, ormlite

i have an issue here: How can i create an One2Many connection between two tables?

Main Class: Area

```
 @DatabaseTable(tableName = "AREA")
public class Area {

    public Area() { }

    @DatabaseField(generatedId = true)
    private int Id;

    public final static String AREA_ID = "AREA_ID";
    @DatabaseField(canBeNull = true, index = true, dataType = DataType.INTEGER, columnName = AREA_ID)
    public int AreaId;

    public final static String AREA_TITLE = "AREA_TITLE";
    @DatabaseField(canBeNull = true, index = true, dataType = DataType.STRING, columnName = AREA_TITLE)
    public String AreaTitle;

    public final static String AREA_LANG = "LANG";
    @DatabaseField(canBeNull = true, index = true, dataType = DataType.STRING, columnName = AREA_LANG)
    public String Language;

    @ForeignCollectionField(eager = false)
    public Collection<City> CityList;

    //data service load
    public Area(int id, String title, Collection<City> cities, String language) {
        AreaId = id;
        AreaTitle = title;
        SetCities(cities);
        Language = language;
    }

    private void SetCities(Collection<City> cities) {
        CityList = cities;
    }
} 
```

Child class:

```
@DatabaseTable(tableName = "CITY")
public class City {

    public City() { }

    @DatabaseField(generatedId = true)
    private int Id;

    public final static String CITY_ID = "CITY_ID";
    @DatabaseField(canBeNull = true, index = true, dataType = DataType.INTEGER, columnName = CITY_ID)
    public int CityId;

    public final static String CITY_TITLE = "CITY_TITLE";
    @DatabaseField(canBeNull = true, index = true, dataType = DataType.STRING, columnName = CITY_TITLE)
    public String CityTitle;

    public final static String CITY_LANG = "LANG";
    @DatabaseField(canBeNull = true, index = true, dataType = DataType.STRING, columnName = CITY_LANG)
    public String Language;

    public final static String AREA_ID = "AREA_ID";
    @DatabaseField(foreign = true, columnName = AREA_ID, canBeNull = false ,foreignAutoCreate = true,foreignAutoRefresh = true)
    private Area Area;

    public City(int id, String title, String language) {
        CityId = id;
        CityTitle = title;
        Language = language;
    }
} 
```

I don't have any exception on create of `Area`, but `CityList` is empty, how can i fix that?

Thanks in advance....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T08:41:25.117

我认为您在 Area 类中的城市列表需要有 eager = true

# wordpress - Wordpress - the_author() empty only on index.php when not logged in

> ID：11825780
> 
> 赞同：0
> 
> 时间：2012-08-06T09:38:51.193
> 
> 标签：wordpress

All right, I'm getting really pissed by WordPress. It just doesn't do what it's supposed to do and nobody seems to know why.

Here's the situation: I have two different ways to load posts. One is in index.php and another one is in loop.php. The first one loads the first 4 posts, the latter loads more posts when scrolling down or clicking on the "load more" button. Both are inside the loop.

The code is THE SAME, but index.php doesn't show anything when I call the_author, when a user is not logged in. When I'm logged in, I see the author name all the time and when logged out, I only see the name on newly loaded posts.

Any ideas ? The website is test.nowillnoskill.net

# magento - magento full page cache with memcached

> ID：11825781
> 
> 赞同：4
> 
> 时间：2012-08-06T09:38:54.950
> 
> 标签：magento, memcached

I am trying to get Magento's full page cache using memcached.

I understand that there is some configuration that needs to be set in the app/etc/enterprise.xml file, but there doesn't appear to be any documentation anywhere giving specific details of what this configuration should be.

From what I've read, it is similar to the memcached config in app/etc/local.xml but not quite the same.

Does anyone have this working who would be able to provide the appropriate configuration settings?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T14:57:53.907

可以在管理员的缓存管理页面中启用整页缓存。要将整个页面缓存保存到 memcache 中，您需要以下配置。此 XML 可以在`app/etc/local.xml.additional`您的普通`local.xml`.

请注意，您希望将 FPC 缓存和会话存储到不同的 memcached 池中。否则刷新内存缓存也将导致注销所有客户。刷新 memcache 可以在管理员中使用`Flush Cache Storage`.

显然这只是 Magento 方面，你还需要在你的服务器上配置和运行 memcache。

```
<config>
<global>
    <session_save><![CDATA[]]></session_save> <!-- db / memcache / empty=files -->
    <session_save_path><![CDATA[]]></session_save_path><!-- e.g. for memcache session save handler tcp://10.0.0.1:11211?persistent=1&weight=2&timeout=10&retry_interval=10 -->
    <session_cache_limiter><![CDATA[]]></session_cache_limiter><!-- see http://php.net/manual/en/function.session-cache-limiter.php#82174 for possible values -->
    <cache>
        <backend></backend><!-- apc / memcached / xcache / empty=file -->
        <slow_backend></slow_backend> <!-- database / file (default) - used for 2 levels cache setup, necessary for all shared memory storages -->
        <slow_backend_store_data></slow_backend_store_data> <!-- 1 / 0 (default) - used for 2 levels cache setup, sets whether store data in db slow cache backend -->
        <auto_refresh_fast_cache></auto_refresh_fast_cache> <!-- 1 / 0 (default) - used for 2 levels cache setup, sets whether refresh data in fast cache backend -->
        <memcached><!-- memcached cache backend related config -->
            <servers><!-- any number of server nodes can be included -->
                <server>
                    <host><![CDATA[]]></host>
                    <port><![CDATA[]]></port>
                    <persistent><![CDATA[]]></persistent>
                    <weight><![CDATA[]]></weight>
                    <timeout><![CDATA[]]></timeout>
                    <retry_interval><![CDATA[]]></retry_interval>
                    <status><![CDATA[]]></status>
                </server>
            </servers>
            <compression><![CDATA[0]]></compression>
            <cache_dir><![CDATA[]]></cache_dir>
            <hashed_directory_level><![CDATA[]]></hashed_directory_level>
            <hashed_directory_umask><![CDATA[]]></hashed_directory_umask>
            <file_name_prefix><![CDATA[]]></file_name_prefix>
        </memcached>
    </cache>

    <!-- example of two level cache setup with slow backend at files. -->
    <full_page_cache>
        <backend_options>
             <cache_dir>full_page_cache</cache_dir>
         </backend_options>
         <slow_backend_options>
             <hashed_directory_level>1</hashed_directory_level>
             <hashed_directory_umask>0777</hashed_directory_umask>
             <file_name_prefix>fpc</file_name_prefix>
             <cache_dir><![CDATA[full_page_cache]]></cache_dir>
         </slow_backend_options>
     </full_page_cache>

    <remote_addr_headers><!-- list headers that contain real client IP if webserver is behind a reverse proxy -->
        <header1>HTTP_X_REAL_IP</header1>
        <header2>HTTP_X_FORWARDED_FOR</header2>
    </remote_addr_headers>
</global> 
```

# drupal - 在 drupal Commerce 上过滤我的产品

> ID：11825782
> 
> 赞同：1
> 
> 时间：2012-08-06T09:38:56.267
> 
> 标签：drupal, drupal-commerce

我已经将 5.000 导入到我的 drupal 商务网站。我希望用户能够在所有这些产品上快速导航，所以我发现我需要以某种方式在用户选择/选择时进行过滤或搜索产品的某些功能结果将只有具有这些功能的产品。我如何在 Drupal 7 和 Drupal Commerce（Commerce kickstart？）上做到这一点

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T05:42:49.620

简短的回答是您可能想要使用[Views 模块](http://drupal.org/project/views)。您可以为加载 Commerce 产品显示的主产品页面创建视图页面显示。由于产品显示实际上不包含您要过滤的字段值（它们位于引用的产品上），因此您需要向产品添加关系。这将允许您为产品字段添加过滤条件（公开它们将使它们对用户可见）。如果您希望公开的过滤器出现在侧边栏中，请使用“视图”显示上的“块中的公开表单”选项来创建一个过滤器块，您可以将其添加到管理»结构»块（/admin/structure/）上的侧边栏区域堵塞）。

多年来使用 Views 的大多数人都习惯于使用 Fields 输出 Views 结果，然后使用模板文件或扩展配置等自定义字段的显示。但是，您可以为您的产品显示内容类型创建自定义视图模式并使用[Display Suite](http://drupal.org/project/ds)给他们布局。您可以使用内容格式在视图中输出这些自定义显示。

# nosql - Cassandra 和查询层次结构

> ID：11825783
> 
> 赞同：1
> 
> 时间：2012-08-06T09:38:56.873
> 
> 标签：nosql, cassandra, hierarchical-data, composite-key

我正在调查 Cassandra，但在以下任何文档中都找不到答案。

我需要在深层层次结构中查询范围。我已经确定表示层次结构的最简单方法是将每个级别作为一列。例如：

```
Origin           Manufacturer    Price    ID
Europe.Germany   VW Group.Audi   20000    1
Europe.Germany   VW Group.Porshe 21000    2
Europe.Germany   BMW             19000    3 
```

这是一个伪 SQL 示例：

```
SELECT ID FROM CompositeTable WHERE (Origin STARTS WITH 'Europe')
AND (Manufacturer STARTS WITH 'VW Group' AND IS NOT 'VW Group.Porshe' OR IS 'BMW')
AND (Price BETWEEN 18000 AND 22000) 
```

结果：

```
ID = [1, 3] 
```

Cassandra 可以跨复合索引执行这种类型的搜索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:34:13.660

Cassandra 中的复合键是`multiple-column index`DBMS 中的一种，如果您在包含 c1 到 c6 列的表中的 c1、c2 和 c3 上有索引。如果查询是针对`=, > , <, >=, <=`(c1)、(c1,c2) 或 (c1, c2, c3) 的操作而不是 (c2)、(c2, c3)、(c3) 或 ( c1, c3)。这种情况在 cassandra 中是相同的，但是在这里您在 c1 到 c6 上有多列索引 [因为列首先根据 c1 进行排序，并且冲突延续到 c2 并继续]

# mod-rewrite - mod_rewrite redirect or block heavy traffic what's not mentioned for me

> ID：11825786
> 
> 赞同：1
> 
> 时间：2012-08-06T09:39:02.300
> 
> 标签：mod-rewrite, redirect, post, get

The following is generating a lot of traffic but it's not for me. Or they try to break in or they are voting for a house number, not sure.

Log:

POST /?xclzve_ty4AGLRXcipv06CINTZekrx28EKPVb HTTP/1.1

GET /?xclzve_lsx27CHMRWbglrw16BHMRWciou05AF HTTP/1.1

Is it possible to redirect to a 404 page or block ?xclzve_* (?xclzve_ is the same but the number or line behind it is different)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:41:31.540

尝试将其放入文档根目录（或虚拟主机配置）的 htaccess 文件中

```
RewriteEngine On
RewriteCond %{QUERY_STRING} xclzve_
RewriteRule ^ - [F,L] 
```

这将返回 403 Forbidden，或者您可以将`F`,替换`R=404`为 404 not found。

尽管您可能想要阻止这些请求来自的 IP 地址？如果只是一两个，你可以这样做：

```
Order Allow,Deny
Deny From 123.45.67.89 
```

如果 123.45.67.89 是 IP 发送虚假请求之一。它可能比使用重写引擎快一点。

# java - cannot find symbol symbol: method location: class

> ID：11825787
> 
> 赞同：0
> 
> 时间：2012-08-06T09:39:03.800
> 
> 标签：java

Sorry, just learning Java; but, can someone tell me why I'm getting a "cannot find symbol" error? My code is as follows:

```
public class NumberHolder {
  public int anInt;
  public float aFloat;

  public NumberHolder(int setAnInt, float setAFloat) {
    setAnInt = anInt;
    setAFloat = aFloat;
  }

  public static void main(String[] args) {
    NumberHolder newNumber = NumberHolder(12, 24F);
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T09:41:56.467

看起来您在`new`调用构造函数之前缺少 a ：

```
NumberHolder newNumber = new NumberHolder(12, 24F); 
```

编辑：另外，正如 Tassos Bassoukos 在他的回答中指出的那样，您需要在构造函数中扭转分配：

```
anInt = setAnInt;
aFloat = setAFloat; 
```

虽然就个人而言，我喜欢这样编写我的构造函数：

```
public NumberHolder(int anInt, float aFloat) {
  this.anInt = anInt;
  this.aFloat = aFloat;
} 
```

不过，这是风格和个人喜好的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T09:47:40.500

自从

```
public NumberHolder(int anInt, float aFloat); 
```

是构造函数而不是普通方法，您需要使用关键字 new 才能获取实际对象。你把它当作一个方法来调用，你没有任何名为 NumberHolder 的方法（但如果你有它会是有效的）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T09:50:03.557

除了`new`您缺少的关键字之外，构造函数中的赋值应该是相反的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T09:43:22.660

您需要使用`new`关键字实例化新对象。

```
public class NumberHolder {
    public int anInt;
    public float aFloat;

    public NumberHolder(int anInt, float aFloat) {
        this.anInt = anInt;
        this.aFloat = aFloat;

    }

    public static void main(String[] args) {
        NumberHolder newNumber = new NumberHolder(12, 24F);
    }

} 
```

# mysql - MySQL - Do I need a nested query?

> ID：11825789
> 
> 赞同：0
> 
> 时间：2012-08-06T09:39:16.823
> 
> 标签：mysql

I need to write a query that displays, for each activity, a count of the number of males and number of females.

Preferably in a 3 column format, activity_name, male (computed column), female (computed column).

I think I may need to use nested queries, but I cannot figure out how. Or could this be done by just using GROUP BY?

My tables are:

**Child** child_id child_fname child_sname child_gender etc etc

**Activity** activity_id activity_name etc etc

**Child_Activity_Item** child_id activity_id

**Thank you**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:03:17.080

试试这个查询 -

```
SELECT
  a.activity_id,
  a.activity_name,
  COUNT(IF(c.child_gender = 'M', c.child_gender, NULL)) male,
  COUNT(IF(c.child_gender = 'F', c.child_gender, NULL)) female
FROM
  Activity a
  JOIN Child_Activity_Item ca
    ON ca.activity_id = a.activity_id
  JOIN Child c
    ON c.child_id = ca.child_id
GROUP BY a.activity_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:59:53.820

这就是你要找的：

```
SELECT  MaleList.Activity_Name,
        MaleList.totalMale,
        FemaleList.totalFemale,
FROM
(
    SELECT  a.Activity_ID, 
            a.Activity_Name,
            COUNT(c.child_gender) totalMale
    FROM    Activity a 
                INNER JOIN Child_Activity_Item b
                    on a.activity_id = b.activity_ID
                INNER JOIN Child c
                    on b.child_id =  c.child_id
    WHERE   c.child_gender = 'male'
    Group BY a.Activity_ID
) as MaleList INNER JOIN
(
    SELECT  a.Activity_ID, 
            a.Activity_Name,
            COUNT(c.child_gender) totalFemale
    FROM    Activity a 
                INNER JOIN Child_Activity_Item b
                    on a.activity_id = b.activity_ID
                INNER JOIN Child c
                    on b.child_id =  c.child_id
    WHERE   c.child_gender = 'female'
    Group BY a.Activity_ID
) as FemaleList 
    ON  MaleList.Activity_ID =  FemaleList.Activity_ID 
```

您无法直接获得三列结果，因为只有一列包含性别。

# opencv - Homography rectangle looks distorted, as if the camera has a birds eye view

> ID：11825793
> 
> 赞同：1
> 
> 时间：2012-08-06T09:39:26.747
> 
> 标签：opencv, 3d, camera, homography

But the Markers are all correct, so I am wondering what kind of settings I could adjust to get the rectangle fit nicely around the image in the webcam view. I am using openCVsharp.

# layout - CSS：具有固定中心的可变宽度侧面板

> ID：11825794
> 
> 赞同：0
> 
> 时间：2012-08-06T09:39:31.783
> 
> 标签：layout, css

我需要以下布局，包含左、内容和右三列。

左边和右边的内容只是在其中有一个图像，而左边的 col. 图片需要留在浏览器的左边，右边的col。图像位于浏览器的右侧，因此当调整浏览器宽度时，两列都保持在其边缘。

其中内容/中心列需要固定为 960 像素，并且还保持在屏幕中间。

因此，在调整浏览器宽度时，内容会停留在中间，但是当浏览器宽度减小时，左右两列都不会越过主要内容，而是停留在两侧。

我已经尝试了多次，但目前取得了很大的成功，任何帮助将不胜感激。

谢谢你

更新：

根据要求，我添加了一个我尝试过的[jsfiddle ：](http://jsfiddle.net/)

[http://jsfiddle.net/UcmBj/](http://jsfiddle.net/UcmBj/)

我达到了我想要的 99%，但内容保持居中，右侧保持在右侧，但理想情况下，我希望内容和面板保持居中。

目前，如果缩小左列并且部分内容是可见的，但我希望在窗口中/居中查看内容，以便左列移到屏幕左侧。谢谢希望链接有帮助。

一些细节：侧列的最小宽度应为 280，内容部分宽度为 960，因此外部容器最小 1520。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T22:44:31.627

这对你有帮助吗？

[http://www.manisheriar.com/holygrail/index.htm](http://www.manisheriar.com/holygrail/index.htm)

[http://jsfiddle.net/andresilich/6vPqA/3/show/](http://jsfiddle.net/andresilich/6vPqA/3/show/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:58:16.630

环顾四周，看起来好像还不可能，因为我想怎么做，所以我所做的就是使用 css 将左右列定位在左右，然后使用 css 媒体查询添加负边距到每个人，以便他们移动，以免打断主要内容。

# wpf - “当前上下文中不存在名称‘InitializeComponent’” - 对于新的 WPF 项目

> ID：11825800
> 
> 赞同：3
> 
> 时间：2012-08-06T09:40:02.660
> 
> 标签：wpf, visual-studio, silverlight

我有一个与先前报告的类似的问题（并且未成功/未解决），如下所示：

*“如果我在 Visual Studio 2010 SP1 中创建一个新项目并选择“WPF 应用程序”，它会生成应用程序，但在我构建它之前，我会收到错误“当前上下文中不存在名称‘InitializeComponent’”。我得到了当我尝试构建已建立的项目时，同样的错误。昨天，我没有遇到任何问题。*

**我很确定这个问题与项目、源文件或生成的设置无关**，但可能与损坏的 Visual Studio 安装、注册表、.net 或 Windows 本身有关，因为同一个项目（完全相同）构建良好在我同事的电脑上，反之亦然。此外，我重新安装了 Visual Studio，卸载并重新安装，删除并重新安装，从 Microsoft 磁盘安装修复，甚至尝试手动删除 Visual Studio/.net/C#，但仍然出现问题。此问题与使用向导创建的新 WPF 项目和几周前创建的现有项目有关。

现在似乎出现的唯一选择似乎是擦除我的硬盘驱动器并再次重新安装 Windows 和 Visual Studio 等。

关于故障或如何最好地将我的系统擦除到真正消除 Visual Studio 及其注册表设置的任何想法将不胜感激？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T12:54:11.083

我遇到了同样的问题，最终发现（在重新安装 VS 并且没有效果之后）通过删除并重新安装 .Net 框架，问题就消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-24T04:05:27.540

这个非常常见和烦人的问题有两个主要原因！

1.  最常见的是`x:Class`与 MainPage.xaml 命名空间不匹配。确保 x:Class in`MainPage.xaml`具有正确的命名空间。
2.  此问题的第二个最常见原因是“构建操作”未设置为“页面” `MainPage.xaml`！

Silverlight 或 WPF 会发生这种情况，尽管当您知道问题所在后不知道是什么原因导致它时，它是一个 PITA；这是一个简单的修复。其中一件事我们都必须努力学习，但感谢 Stack Overflow。

我写了一篇有图片的博客文章，并解释了[Initialize Component 在当前上下文中不存在的问题](http://www.displacedguy.com/tech/silverlight-initializecomponent-does-not-exist-in-the-current-context/)。

# android - 我无法使用机器人运行我的测试用例

> ID：11825805
> 
> 赞同：0
> 
> 时间：2012-08-06T09:40:26.497
> 
> 标签：android, robotium

我有.apk 文件，我想使用robotiun 对其进行测试，我已经[按照](http://code.google.com/p/robotium/wiki/RobotiumForAPKFiles)程序进行了操作，但是当我使用junit test 运行应用程序时，我收到一个错误，因为**测试运行失败：仪器运行因“进程崩溃”而失败。**

这是我的 androidmanifest.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.metago.astro.test" android:versionCode="1" android:versionName="1.0">

    <uses-sdk android:minSdkVersion="15" />
    <uses-permission android:name="android.permission.RUN_INSTRUMENTATION" />>

    <instrumentation android:name="android.test.InstrumentationTestRunner"
        android:targetPackage="com.metago.astro" />

    <application android:icon="@drawable/ic_launcher"
        android:label="@string/app_name">
        <uses-library android:name="android.test.runner" />     
    </application>

</manifest> 
```

我的 TestActivity.java 文件是

```
 @SuppressWarnings("unchecked")
    public class TestActivity extends ActivityInstrumentationTestCase2 {    
        private static final String TARGET_PACKAGE_ID = "com.metago.astro";
        private static final String LAUNCHER_ACTIVITY_FULL_CLASSNAME = "com.metago.astro.SplashActivity";    
        private static Class<?> launcherActivityClass;
        static {
            try {
                launcherActivityClass = Class
                        .forName(LAUNCHER_ACTIVITY_FULL_CLASSNAME);
            } catch (ClassNotFoundException e) {
                throw new RuntimeException(e);
            }
        }    
        public TestActivity() throws ClassNotFoundException { 
            super(TARGET_PACKAGE_ID, Class.forName(LAUNCHER_ACTIVITY_FULL_CLASSNAME)); 
            }

        private Solo solo;

        @Override
        protected void setUp() throws Exception {
            solo = new Solo(getInstrumentation(), getActivity());
        }    
        public void testCanOpenSettings() {
            solo.pressMenuItem(0);
        }    
        @Override
        public void tearDown() throws Exception {
            solo.finishOpenedActivities();
        }
    } 
```

我的日志猫是

```
 FATAL EXCEPTION: main
        java.lang.ExceptionInInitializerError
        at java.lang.Class.newInstanceImpl(Native Method)
        at java.lang.Class.newInstance(Class.java:1319)
        at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:137)
        at android.app.ActivityThread.main(ActivityThread.java:4424)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
        at dalvik.system.NativeStart.main(Native Method)
        Caused by: java.lang.RuntimeException: java.lang.ClassNotFoundException: com.metago.astro.SplashActivity
        at com.metago.astro.TestActivity.<clinit>(TestActivity.java:19)
        ... 15 more
         Caused by: java.lang.ClassNotFoundException: com.metago.astro.SplashActivity
        at java.lang.Class.classForName(Native Method)
        at java.lang.Class.forName(Class.java:217)
        at java.lang.Class.forName(Class.java:172)
        at com.metago.astro.TestActivity.<clinit>(TestActivity.java:17)
        ... 15 more
        Caused by: java.lang.NoClassDefFoundError: com/metago/astro/SplashActivity
        Caused by: java.lang.ClassNotFoundException: com.metago.astro.SplashActivity
        at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
        ... 19 more 
```

第 17 行是 .forName(LAUNCHER_ACTIVITY_FULL_CLASSNAME);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:12:52.000

The package name for your **test project** needs to be different from the package name for the application you want to test. The package name must be a unique identifier. In your test application you should use something like `package="com.metago.astro.test"`

Also, you may need to add the following permission:

```
<uses-permission android:name="android.permission.RUN_INSTRUMENTATION" /> 
```

# security - 来自客户端名称 a 的远程会话超出了允许的最大失败登录尝试次数。（在我的事件日志中每 10 秒）

> ID：11825809
> 
> 赞同：3
> 
> 时间：2012-08-06T09:40:33.067
> 
> 标签：security, remote-desktop, rdp, terminal-services

我每 10 秒在我的事件日志中收到以下信息，知道这是什么意思吗？为什么要获取此信息？

Windows 2003，由 1 个用户（我）管理，我只有该帐户。

事件日志消息：

“来自客户端名称 a 的远程会话超出了允许的最大失败登录尝试次数。会话被强制终止。”

![事件簿](../Images/14f61ec001a4f3b632ac2e00cf2c4240.png)

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:19:40.357

有同样的问题。重新启动服务器，问题就消失了。我怀疑“我”是“攻击者”，而 RDP 的某些东西出现了故障。

# javascript - Javascript Appendchild

> ID：11825811
> 
> 赞同：0
> 
> 时间：2012-08-06T09:40:39.637
> 
> 标签：javascript, html

这是我的代码

```
for(var i=0;i<Year12.length;i++)
      {

                var div1=document.createElement('li');
                 div1.setAttribute('id',Year12[i]);
                 div1.setAttribute('Value',Year12[i]);
                 document.getElementById("Jan").appendChild(div1);
                 alert(div1);

       } 
```

“jan”是 UL 元素的 id。我能够创建元素。但它没有添加到父元素。任何人都可以试试这个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:44:53.177

删除值并尝试：

```
var div1=document.createElement('li');
div1.setAttribute('id',Year12[i]);
div1.innerHTML= Year12[i];
document.getElementById("Jan").appendChild(div1);
alert(div1); 
```

或者

```
var div1=document.createElement('li');
    div1.setAttribute('id',Year12[i]);
    div1.appendChild(document.createTextNode(Year12[i]));
    document.getElementById("Jan").appendChild(div1);
    alert(div1); 
```

对于设置类，您可以执行以下操作：

```
div1.className = "your_class_name"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:49:52.227

试试这个

```
for(var i=0;i<Year12.length;i++)
{

    var div1=document.createElement('li');
    div1.setAttribute('id',Year12[i]);
    div1.setAttribute('Value',Year12[i]);
    //document.getElementById("Jan").appendChild(div1);
    document.getElementById("Jan").append(div1);
    alert(div1);
} 
```

# plupload - Plupload .csv 问题

> ID：11825816
> 
> 赞同：3
> 
> 时间：2012-08-06T09:40:49.400
> 
> 标签：plupload

我正在使用 Plupload 将`.csv`文件上传到我的网站。它工作正常，除了它没有`.csv`在文件选择模型中正确过滤文件的问题。

这是我用来过滤`.csv`文件的代码：

```
filters : [
    {title : "Files of type", extensions : "csv"},
], 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-06T21:40:06.863

查看 Plupload 生成的 input[file=type]，尤其是在它的**accept**属性中。Plupload 为 csv 文件添加**text/csv**值，这是错误的。正确的值只是**.csv**

```
<input type="file" accept=".csv"> 
```

相关： [HTML Input="file" 接受属性文件类型 (CSV)](https://stackoverflow.com/questions/11832930/html-input-file-accept-attribute-file-type-csv)

在 Plupload 团队未修复此问题之前，您可以通过删除自行修复

**,文本/csv,csv**

来自 plupload.full.min.js （或任何你使用的）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T14:23:00.007

可悲的是，我找不到这个问题的根源，但我自己曾经遇到过这个问题。

问题是，如果该扩展名已在您尝试上传文件的计算机上注册，它只会显示（例如）.csv 过滤器。

因此，如果您在没有程序注册 .csv 扩展名的计算机上进行测试，这很可能是问题所在。

我记得我在 Chrome 上遇到过这个问题。不确定您正在使用什么浏览器进行测试？

因此，如果这个问题确实是您的问题的原因，那么 Plupload 无法为您做任何事情。

# html - 不使用浮点数有什么好处：对吗？

> ID：11825817
> 
> 赞同：4
> 
> 时间：2012-08-06T09:40:58.590
> 
> 标签：html, css, css-float

我的网站上有两个 div，一个在左侧，另一个在右侧。但是客户说不要使用`float:right`。所以我使用`margin:left` 了不使用的优点是什么`float:right`？`margin-left`或者`float:right`，或者我错了吗？请帮我。

```
#left
{
float:left;
width:200px;
}
#right
{
float:right;
width:200px;
} 
```

**或者**

```
#left
    {
    float:left;
    width:200px;
    }
    #right
    {
    margin-left:250px;
    width:200px;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T10:01:50.040

我想这与标记的顺序有关。原则上，您应该先编写所有标记，因此没有任何 css 是有意义的，然后再添加 css 规则。

如果您需要移动标记以满足 css 条件，您可能会破坏搜索引擎优化、可访问性或可读性以及代码的清晰结构。

如果您正确浮动某些内容，有时您需要将元素放在标记中的第一位，即使它在视觉上看起来是第二位。

这当然是猜测，正如 Marcus Aurelius 在他的书中所写的冥想 - 试图理解另一个人（在这种情况下是你的客户）或多或少是在浪费时间，因为你永远无法真正成功，只能自欺欺人地思考你完全理解他们和他们的动机。相反，你应该关注确保自己的动机和行为是正确的——所以要确保你知道什么时候什么时候不让事情左右浮动（你现在正在这样做），并将这些真相揭示给你的客户。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T09:46:58.897

实际上，如果您`float:left;`在第二个 div 中使用，那么第二**个 div**将在**第一个 div**之后立即开始。

像这样：- [http://tinkerbin.com/FfuvHZw4](http://tinkerbin.com/FfuvHZw4)

如果您`float:right`在第二个 div 中使用，则第二**个 div**将从父 div 或主体的右侧开始。

像这样：- [http://tinkerbin.com/EgtjAJA1](http://tinkerbin.com/EgtjAJA1)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-06T09:50:39.293

好吧，使用 float:right; 没有错。也许您的客户对此有想法。可能是发展问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-06T09:50:45.677

我能想到不使用的唯一可能的“加号”`float: right`是它会导致向右浮动的内联元素以相反的顺序出现（除非父元素是浮动的，在这种情况下，它的子元素将出现在正确的顺序）。因此，如果以特定顺序从数据库中提取内容（例如项目列表），则`ORDER_BY`需要反转以使它们以所需的顺序出现。与普通 HTML 元素的顺序类似。他们可能不想让你使用`float: right`，因为他们不想重构其他代码。

小提琴：http: [//jsfiddle.net/nxdD4/1/](http://jsfiddle.net/nxdD4/1/)

这是我唯一能想到的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T13:19:53.950

在确定你不会因为提问而显得愚蠢之后，我会问你的客户。也许他们的理由还有其他你应该意识到的含义，也许奥勒留斯的推理可能会不必要地束缚你的手，万一你的客户也没有从古代哲学的角度思考。

我能想到的最可能的解释是，如果代码与呈现的顺序相同，则代码更容易更新（尽管我认为在 CSS 中使用正确的语义更重要），您的代码将出现在具有其他代码的页面中，或者您的代码将由 CMS 生成，如果事情按照相同的顺序，其设置/管理会更简单，可能已经脱离上下文，或者可能引用了一些善意的论坛响应者少于他们的相关来源。罗马皇帝从来都不擅长这种敏感的感觉。

# jquery - QtWebkit jquery ajax POST 不起作用

> ID：11825821
> 
> 赞同：1
> 
> 时间：2012-08-06T09:41:02.413
> 
> 标签：jquery, ajax, qt, webkit

我有一个带有调用 jQuery AJAX POST 方法的按钮的 QT webkit HTML5 应用程序

```
<script>
        $(document).ready(function(){
            $('#bntLogin').click(function(){
                var usrn = $('#txtUsername').val();
                var pwd = $('#txtPassword').val();

              $.ajax({
                url: 'http://www.ngg-l.com/Account/ClientLogin/',
                type: 'POST',
                data: { username: usrn, password: pwd },
                dataType: 'json',
                success: function (result) {
                    alert(result);
                },
                error: function(xhr, ajaxOptions, thrownError){
                    alert(xhr.status);
                    alert(thrownError);
                }
               });
            });
        });
    </script> 
```

xhr.status = 0

有谁知道为什么我的 ajax 不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:52:12.250

您可以尝试调用：

```
QWebSettings::globalSettings()->setAttribute(QWebSettings::LocalContentCanAccessRemoteUrls, true); 
```

[“指定是否允许本地加载的文档访问远程 url。默认情况下禁用。”](http://doc.qt.digia.com/qt/qwebsettings.html)

# eclipse-rcp - Eclipse RCP StatusManager - 如何更改标题

> ID：11825829
> 
> 赞同：1
> 
> 时间：2012-08-06T09:41:56.283
> 
> 标签：eclipse-rcp

我正在尝试使用 StatusManager 来显示和/或记录消息。不一定是坏和讨厌的问题，还有信息或警告。这就是我基本上所做的：

```
Status status= new Status(IStatus.INFO, MainPlugin.ID, "Some info message");
StatusManager.getManager().handle(status, StatusManager.SHOW | StatusManager.LOG); 
```

效果很好，但我找不到修改弹出对话框默认标题的方法 - 它总是说“出现问题”。经历 eclipse 代码的迷宫让我来这里问这个问题，因为我完全迷失了......有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:21:21.843

不幸的是，现在无法设置对话框标题。`IStatus`当您给出适当的标志（例如）时，对话框是基于对象生成的`StatusManager.SHOW`，但界面没有定义标题。为了允许你想要的，`IStatus`接口应该被扩展。

Eclipse 4 中也出现了同样的问题（有一个新`StatusReporter`类）。

您可以关注错误[错误 386023](https://bugs.eclipse.org/bugs/show_bug.cgi?id=386023)，它准确地假设了您想要的（在 Eclipse 4 平台上）。

# iphone - 应用程序在 executeFetchRequest 上冻结

> ID：11825833
> 
> 赞同：3
> 
> 时间：2012-08-06T09:42:15.560
> 
> 标签：iphone, ios, cocoa-touch, ios5, core-data

我正在使用以下方法从核心获取数据。我的应用程序冻结

```
 NSArray *fetchResult = [self.managedObjectContext executeFetchRequest:request error:&error]; 
```

有时它可以工作，有时它只是冻结而没有错误消息或崩溃。当我暂停调试器时，它会停在上面的代码行上！我没有使用线程或块。

```
-(NSArray *)getSubContent
{
NSEntityDescription *desc;
NSPredicate *predicate;
NSSortDescriptor *sortDescriptor;
switch ([tableSelector selectedSegmentIndex])
{
    case 0: //fav list 
        desc = [NSEntityDescription entityForName:@"Contact" inManagedObjectContext:self.managedObjectContext];
        predicate = [NSPredicate predicateWithFormat:@"isFavorite = %@",[NSNumber numberWithBool:YES]];
        sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES];
        break;
    case 1:  //Rassayel list
        desc = [NSEntityDescription entityForName:@"Contact" inManagedObjectContext:self.managedObjectContext];
        sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES];

        predicate = [NSPredicate predicateWithFormat:@"isApp = %@",[NSNumber numberWithBool:YES]];
        break;
    case 2: //group list
        desc = [NSEntityDescription entityForName:@"Group" inManagedObjectContext:self.managedObjectContext];
        predicate = nil;
        sortDescriptor = nil;
        break;

    default:
        break;
}

NSFetchRequest *request = [[NSFetchRequest alloc] init] ;
[request setEntity:desc];
[request setSortDescriptors:[NSArray arrayWithObject:sortDescriptor]];
[request setPredicate:predicate];

NSError *error = nil;
NSArray *fetchResult = [self.managedObjectContext executeFetchRequest:request error:&error];
if ( error )
    NSLog(@"%@",error);
return fetchResult;

} 
```

**崩溃日志**

> 异常类型：00000020 异常代码：0x8badf00d 突出显示的线程：0
> 
> 应用程序特定信息：com.takarub.rasayl 未能及时启动
> 
> 已用总 CPU 时间（秒）：1.620（用户 1.620，系统 0.000），3% CPU 已用应用程序 CPU 时间（秒）：0.432，1% CPU
> 
> 线程 0 名称：调度队列：com.apple.main-thread
> 
> 线程 0：
> 
> 0 libsystem_kernel.dylib 0x32b800d8 __psynch_mutexwait + 24
> 
> 1 libsystem_c.dylib 0x34eaa674 pthread_mutex_lock + 376
> 
> 2 核心数据 0x327dbd52 -[_PFLock 锁定] + 18
> 
> 3 核心数据 0x327eb1f2-[NSPersistentStoreCoordinator executeRequest:withContext:error:] + 806
> 
> 4 CoreData 0x327e9c22-[NSManagedObjectContext 执行FetchRequest：错误：] + 598
> 
> 5 RassayelV1.0 0x000193ec-[ContactsViewController getSubContent] (ContactsViewController.m:225)

# javascript - Keyup 记录按键总数

> ID：11825834
> 
> 赞同：0
> 
> 时间：2012-08-06T09:42:16.497
> 
> 标签：javascript, mootools

# 问题

* * *

我正在注册一个 keyup 事件，当它被激活时，会显示一个建议主题的列表（使用 JSON）。

我的问题是，当一个 keyup 被注册时，它似乎也能记住以前的 keyup。这意味着它不是使用 JSON 发送一个请求，而是使用 JSON 发送多个请求（取决于已注册的 keyup 数量）。这当然是非常低效的，我想每个 keyup 只处理 1 个请求。

# 我试过什么

* * *

我已经尝试逐步执行程序采取的每一个动作。当我到达第二个 keyup 语句时出现问题（第一个是在我的模板中注册一个 keyup，第二个是我正在使用的类中的一个 keyup，它从指定的字段中检索值）。从这一点开始，每个键都以某种方式“添加”到以前的键中，例如：按下了
3 个先前的键 -> （示例）按下了退格键 -> 现在为退格键注册了 4 个键键，所有键都包含相同的信息。

我已经尝试设置语句等来检查以前的事件是否与当前事件相同，但这真的没有奏效。该类在不同的站点上工作，所以我认为问题出在其他地方，可能是模板（它包含另一个注册 keyups 的事件，但完全删除它不会改变任何东西）是随着时间的推移由不同的程序员创建的（它有点像虽然我看不到任何应该造成这种奇怪行为的东西）。

# 相关代码

* * *

模板代码：

```
$('subject_input').addEvent('keyup', function(event){
    var project_id = $('projectId').options[$('projectId').selectedIndex].get('value');

    if(project_id != "" && project_id != 0){ //Als er een project geselecteerd is 
        var elInput = $('subject_input');

        var gc = new GooCompleter('subject_input', {
            action: '/houroverview/ajax_subjects/'+project_id+'/',  // JSON source 
            param: 'search',            // Param string to send 
            listbox_offset: {x: 0, y: 0},   // Listbox offset for Y 
            typebox_offset: {x: 1, y: 1},
            delay: 100,                     // Request delay to 0.1 seconds 
        });
//Irrelevant code

                }); 
```

类代码keyup：

```
 // Retrieve suggestions on keyup
    this.field.addEvent('keyup', function(event) {
        console.log(event); //this shows the amount of keyups etc.
        //more code
    }.bind(this)); 
```

我应该指出，我对 JavaScript 并不是那么好，这意味着我要花很多时间来弄清楚一些东西。我仍然在这段代码中看不到任何会产生这种奇怪行为的东西。

# 问题

* * *

是什么导致了这种奇怪的行为，我该如何摆脱它？

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:48:03.233

是的，根据您的代码，每个键盘输入似乎都会发出一个新请求。这不是奇怪的行为，正是您的代码所做的。浏览器说每次 keyup 发生时都会发生 keyup（在键盘上释放任何键），并且您的代码会发送一个请求作为对每个 keyup 的反应。

当他们回来时，您可以忽略除最后一个之外的所有内容，但您也可以更有效，并且在用户停止输入（例如 500 毫秒）之前不发送任何请求。

```
$('subject_input').addEvent('keyup', throttle( function(event) {
    //Once no keyup has happened for 500ms, this function is then called normally
}, 500 )); 
```

油门定义：

```
function throttle( fn, timeout ) {
    var timerid = 0;

    return function() {
        clearTimeout(timerid);

        var args = [].slice.call(arguments),
            ctx = this;

        timerid = setTimeout( function() {
            fn.apply( ctx, args );
        }, timeout );

    };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:43:06.300

根据文档，`GooCompleter`它自己监视按键。您只需要初始化一次（例如在`domready`事件处理程序中）。

在您当前的实现中，每个按键都会创建一个新实例`GooCompleter`，因此在例如 10 次按键之后有 10`GooCompleter`秒，每次监控按键并发送 AJAX 请求（这样后续按键将在 10`GooCompleter`秒内发送 10 次 AJAX 请求） .

# symfony - 在 sf2/doctrine2 中使用生成的实体作为“基类”

> ID：11825841
> 
> 赞同：2
> 
> 时间：2012-08-06T09:42:45.793
> 
> 标签：symfony, doctrine-orm, generator

我如何告诉 Doctrine2 实体管理器默认使用继承的类，而不是生成的？

在我的新 sf2 应用程序中，我从现有数据库生成了所有实体`/src/Package/Bundle/DataBundle/Entity`- 当然我也希望生成表单，所以我需要我的外键关系`__toString()`方法，我不想放入那些生成的文件，因为它们被覆盖（是的，它们也被备份在一个额外的文件中，所以我的更改不会丢失，但手动合并文件不是我想要的）。

所以我添加了新的类来`/src/Package/Bundle/DataBundle/Model`继承所有的实体，但是`__toString()`在未来还有一个方法和一些其他的调整。但是现在，当我打电话时 `$entity = $em->getRepository('PackageDataBundle:Customer')->find($id);`- 我得到一个实例`/src/Package/Bundle/DataBundle/Entity/Customer`而不是`/src/Package/Bundle/DataBundle/Model/Customer`..

我想要 sf1 的行为，其中所有自定义工作都在继承的类中完成，生成的是“基”类，可以在模式更新时随时更新，否则不会被触及..

我希望对此有一些配置..

也许作为奖励，我想改变我的命名约定：`Model`作为“抽象”生成一个，并`Entity`作为实际使用的一个

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:13:31.137

> 我想要 sf1 的行为，其中所有自定义工作都在继承的类中完成，生成的是“基”类，可以在模式更新时随时更新，否则不会被触及..

出于您描述的目的，您应该使用[Propel ORM](http://www.propelorm.org/) - 在 Symfony-1.4 中就是如此，并且对于带有 Propel 1.6 的 Symfony-2.0 变得更加灵活。它在 Symfony-2.0中有[很好的文档](http://www.propelorm.org/documentation/)，[易于安装](https://github.com/propelorm/PropelBundle)和[自然使用](http://www.propelorm.org/cookbook/symfony2/working-with-symfony2.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T13:52:58.127

也许我误解了你的问题，但是从 Propel 到 Doctrine 我也很失望，因为没有办法将“肮脏”的自动生成代码排除在我的逻辑之外。我不知道它现在对你有多重要，但我目前正在编写一个实现这种生成风格的简单包。

```
$ app/console doctrine:generate:entities СompanySomeBundle --propel-style=true
Generating entities for bundle "СompanySomeBundle"
  > backing up User.php to User.php~
  > generating Сompany\SomeBundle\Entity\Base\User
  > generating Сompany\SomeBundle\Entity\User 
```

[https://github.com/madesst/MadesstDoctrineGenerationBundle](https://github.com/madesst/MadesstDoctrineGenerationBundle)

PS：对不起我的英语=/

# android - 更改 ListView 中的 ImageView

> ID：11825844
> 
> 赞同：0
> 
> 时间：2012-08-06T09:43:00.993
> 
> 标签：android, listview, imageview

我看到了来自 Android Hive 的代码，并且学习了如何将数组 JSON 从 PHP 脚本发送到我的 Android / Java 代码。我成功地从我的在线数据库中检索了所有详细信息，并以我想要的格式显示它们。

问题是，当图像位于 ListView 中时，我不知道如何设置图像的 src。这是我的代码。

```
 ArrayList<HashMap<String, String>> list = new ArrayList<HashMap<String, String>>();
                JSONParser jParser = new JSONParser();
                JSONObject json = jParser.getJSONFromUrl("http://domain.com/directory/database/retrieveComments.php?placeId=" + stringPlaceId);
                try
                {
                    commentsRatingsArray = json.getJSONArray("commentsRatings");
                    for(int i = 0; i < commentsRatingsArray.length(); i++)
                    {
                        JSONObject jsonObject = commentsRatingsArray.getJSONObject(i);
                        String dbUserFullName = jsonObject.getString(TAG_FULLNAME);
                        String dbUserEmail = jsonObject.getString(TAG_EMAIL);
                        String dbComment = jsonObject.getString(TAG_COMMENT);
                        String dbRating = jsonObject.getString(TAG_RATING);
                        String dbDate = jsonObject.getString(TAG_DATE);
                        String dbTime = jsonObject.getString(TAG_TIME);

                        HashMap<String, String> map = new HashMap<String, String>();
                        map.put(TAG_FULLNAME, dbUserFullName);
                        map.put(TAG_EMAIL, dbUserEmail);
                        map.put(TAG_COMMENT, dbComment);
                        map.put(TAG_RATING, dbRating);
                        map.put(TAG_DATE, dbDate);
                        map.put(TAG_TIME, dbTime);

                        list.add(map);
                    }   
                }
                catch (Exception e)
                {
                    e.printStackTrace();
                    Toast.makeText(getBaseContext(), "Connection to the server is lost. Please check your internet connection.", Toast.LENGTH_SHORT).show();
                }

                ListAdapter adapter = new SimpleAdapter
                        (DisplayCommentsRatings.this, list, R.layout.commentrating,

                            new String[] { TAG_FULLNAME, TAG_EMAIL, TAG_COMMENT, TAG_DATE,  TAG_TIME },
                            new int[] {R.id.tvUserFullName, R.id.tvUserEmail, R.id.tvUserComment, R.id.tvDate, R.id.tvTime });

                setListAdapter(adapter); 
```

请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T09:46:44.123

为此，我建议您为您的 ListView 定义一个**自定义适配器**。

1.  您可以通过扩展 BaseAdapter 或 ArrayAdapter 来创建自定义适配器类。
2.  覆盖 getView() 方法。
3.  在覆盖 getView() 方法时遵循 ViewHolder 模式。

在这里，Ravi 写过：[Android 自定义 ListView with Images and Text](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)。

迄今为止最好的解决方案：[Andoid - ListView 中的图像延迟加载](https://stackoverflow.com/a/3068012/379693)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:46:44.097

我认为您必须制作自己的自定义适配器（扩展`BaseAdapter`）并更新`getView`方法内的图像。Google上有很多tuts。

祝你好运=)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T09:51:45.210

例如，您可以使用指向文件 SD 名称的 URL 设置图像。

[http://developer.android.com/reference/android/widget/SimpleAdapter.html#setViewImage(android.widget.ImageView](http://developer.android.com/reference/android/widget/SimpleAdapter.html#setViewImage(android.widget.ImageView) , int)

但我认为从 BaseAdapter 扩展并将您自己的 Map 或 Array 传递给它要容易得多，然后您可以使用您想要的任何图像进行膨胀，下载并设置它等。

这是一个设备适配器的示例 :) 您不需要从 viewHolder 模式开始。

```
public class DevicesAdapter extends BaseAdapter {
private LayoutInflater inflater;
private List<Device> devices;

public DevicesAdapter(Context context, List<Device> devices) {
    inflater = LayoutInflater.from(context);
    this.devices = devices;
}

@Override
public int getCount() {
    return devices.size();
}

@Override
public Object getItem(int position) {
    return devices.get(position);
}

@Override
public long getItemId(int position) {
    return 0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    if (row == null) {
        row = inflater.inflate(R.layout.account_devices_row, null);
    }
    TextView description = (TextView) row.findViewById(R.id.device_text);
    description.setText(devices.get(position).getLabel());
    return row;
}

} 
```

问候

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T17:12:45.057

他们在上面是正确的。您将需要扩展 BaseAdapter 并覆盖 getView 方法。您还需要延迟加载图像，因为您将下载它们并且在执行此操作时不应占用 UI 线程。下面是我的延迟加载类。简单地创建一个新类（我叫我的 LazyLoadImage.java）并将这段代码粘贴在其中。以下是您可以使用该类的不同方式：

使用 placeHolder 延迟加载图像：

```
new LazyLoadImage(ImageView imageView, String urlString, Bitmap placeHolder); 
```

要延迟加载没有 placeHolder 的图像：

```
new LazyLoadImage(ImageView imageView, String urlString); 
```

手动清除缓存：

```
new LazyLoadImage().clearCache(); 
```

如果您的目标操作系统低于 12，那么您需要在项目中包含“android-support-v4.jar”。

```
import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.AsyncTask;
import android.support.v4.util.LruCache;
import android.util.Log;
import android.widget.ImageView;

public class LazyLoadImage extends AsyncTask<String, Void, Bitmap> {

ImageView mDestination;

//Set up cache size and cache
private static int mCacheSize = 4 * 1024 * 1024; // 4 mb
private static LruCache<String, Bitmap> mCache = new LruCache<String, Bitmap>(mCacheSize) {
    @Override
    protected int sizeOf(String key, Bitmap value) {
        return value.getRowBytes() * value.getHeight();
    }
};

public LazyLoadImage(ImageView destination, String urlString) {
    mDestination = destination;

    if (mCache.get(urlString) != null) {
        mDestination.setImageBitmap(mCache.get(urlString));
    }else {
        this.execute(urlString);
    }
}

public LazyLoadImage(ImageView destination, String urlString, Bitmap placeHolder) {
    mDestination = destination;

    if (mCache.get(urlString) != null) {
        mDestination.setImageBitmap(mCache.get(urlString));
    }else {
        setPlaceHolder(urlString, placeHolder);
        this.execute(urlString);
    }
}

public LazyLoadImage() {
}

private void setPlaceHolder(String urlString, Bitmap placeholder) {
    mDestination.setImageBitmap(placeholder);
}

public void clearCache() {
    mCache.evictAll();
}

@Override
protected Bitmap doInBackground(String... arg0) {

    //If the URI that is passed in arg0[0] is already in mCache then I return it without downloading it again
    if (mCache.get(arg0[0]) != null) {
        return mCache.get(arg0[0]);
    }else {

        Bitmap lazyImage = null;
        URL myFileUrl = null;          

        try {
             myFileUrl= new URL(arg0[0]);
             HttpURLConnection conn= (HttpURLConnection)myFileUrl.openConnection();
             conn.setDoInput(true);
             conn.connect();
             InputStream is = conn.getInputStream();

             lazyImage = BitmapFactory.decodeStream(is);

             //Store the image in mCache for quick assess from anywhere in app
             synchronized (mCache) {
                if (mCache.get(arg0[0]) == null) {
                    mCache.put(arg0[0], lazyImage);
                }
             }

        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        return lazyImage;
    }
}

@Override
protected void onCancelled(Bitmap result) {

}

@Override
protected void onPostExecute(Bitmap result) {

    /*
     * The returned image to the ImageView that was passed in on create
     *  (either from mCache or when downloaded the first time)
     */
    mDestination.setImageBitmap(result);

    super.onPostExecute(result);
}

} 
```

# android - 如何在android中添加许可功能？

> ID：11825848
> 
> 赞同：0
> 
> 时间：2012-08-06T09:43:04.237
> 
> 标签：android

我想向我的项目添加应用程序许可编码这是我用于检查的编码，我创建了一个库项目，并将该库项目作为库添加到我的项目中，并在项目清单中添加了所需的权限但我仍然强制关闭

```
import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.provider.Settings.Secure;
import android.util.Log;
import android.widget.Toast;

import com.google.android.vending.licensing.AESObfuscator;
import com.google.android.vending.licensing.LicenseChecker;
import com.google.android.vending.licensing.LicenseCheckerCallback;
import com.google.android.vending.licensing.ServerManagedPolicy;

public class LicenseCheck extends Activity { 

    private LicenseChecker mChecker;
    private LicenseCheckerCallback mLicenseCheckerCallback;
    private static final String BASE64_PUBLIC_KEY = "The key i got from the market";
 // Generate 20 random bytes, and put them here.
    private static final byte[] SALT = new byte[] {
     -20, 30, 50, -70, 33, -100, 32, -90, -88, 104, 12,
     -10, 72, -34, 115, 21, 62, 35, -12, 97
     };
    private AESObfuscator mObsfuscator;
    private String android_id;

    /** Called when the activity is first created. */ 
    @Override 
    public void onCreate(Bundle icicle) { 
         super.onCreate(icicle); 
         setContentView(R.layout.splash);
         android_id = Secure.getString(this.getContentResolver(), Secure.ANDROID_ID);
         mObsfuscator = new AESObfuscator(SALT, getPackageName(), android_id);
         ServerManagedPolicy serverPolicy = new ServerManagedPolicy(this,mObsfuscator);

         mLicenseCheckerCallback = new MyLicenseCheckerCallback();
         mChecker = new LicenseChecker(
             this, serverPolicy,
             BASE64_PUBLIC_KEY  // Your public licensing key.
             );
         mChecker.checkAccess(mLicenseCheckerCallback);  
    }

private class MyLicenseCheckerCallback implements LicenseCheckerCallback {
        public void allow(int reason) {
            if (isFinishing()) {
                // Don't update UI if Activity is finishing.
                return;
            }
            // Should allow user access.
            Log.w("LicenseChecker", "Allow");
            Intent i = new Intent(LicenseCheck.this, App1_1Activity.class);
            startActivity(i);
            finish();
        }

        public void dontAllow(int reason) {
            if (isFinishing()) {
                // Don't update UI if Activity is finishing.
                return;
            }
            Log.w("LicenseChecker", "Don't Allow");
            // Should not allow access. An app can handle as needed,
            // typically by informing the user that the app is not licensed
            // and then shutting down the app or limiting the user to a
            // restricted set of features.
            // In this example, we show a dialog that takes the user to Market.
            showDialog(0);

        }

//      @Override
        public void applicationError(int errorCode) {
            if (isFinishing()) {
                // Don't update UI if Activity is finishing.
                return;
            }
//          toast("Error: " + errorCode.name());

        }
    }
    @Override
    protected Dialog onCreateDialog(int id) {
        // We have only one dialog.
        return new AlertDialog.Builder(this)
                .setTitle("Application Not Licensed")
                .setCancelable(false)
                .setMessage(
                        "This application is not licensed. Please purchase it from Android Market")
                .setPositiveButton("Buy App",
                        new DialogInterface.OnClickListener() {
//                          @Override
                            public void onClick(DialogInterface dialog,
                                    int which) {
                                Intent marketIntent = new Intent(
                                        Intent.ACTION_VIEW,
                                        Uri.parse("market://details?id=" + getPackageName()));
                                startActivity(marketIntent);
                                finish();
                            }
                        })
                .setNegativeButton("Exit",
                        new DialogInterface.OnClickListener() {
//                          @Override
                            public void onClick(DialogInterface dialog,
                                    int which) {
                                finish();
                            }
                        }).create();
    }   

    public void toast(String string) {
        Toast.makeText(this, string, Toast.LENGTH_SHORT).show();
    }

    @Override
    protected void onDestroy() {
    super.onDestroy();
    mChecker.onDestroy();
  }
} 
```

这是 logcat 消息

```
 08-06 15:01:33.301: E/AndroidRuntime(887): FATAL EXCEPTION: main
08-06 15:01:33.301: E/AndroidRuntime(887): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.iexemplar.pray4me/com.iexemplar.pray4me.LicenseCheck}: java.lang.IllegalArgumentException: java.security.spec.InvalidKeySpecException: java.io.IOException: corrupted stream - out of bounds length found
08-06 15:01:33.301: E/AndroidRuntime(887):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
08-06 15:01:33.301: E/AndroidRuntime(887):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-06 15:01:33.301: E/AndroidRuntime(887):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-06 15:01:33.301: E/AndroidRuntime(887):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-06 15:01:33.301: E/AndroidRuntime(887):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-06 15:01:33.301: E/AndroidRuntime(887):  at android.os.Looper.loop(Looper.java:123)
08-06 15:01:33.301: E/AndroidRuntime(887):  at android.app.ActivityThread.main(ActivityThread.java:3683)
08-06 15:01:33.301: E/AndroidRuntime(887):  at java.lang.reflect.Method.invokeNative(Native Method)
08-06 15:01:33.301: E/AndroidRuntime(887):  at java.lang.reflect.Method.invoke(Method.java:507)
08-06 15:01:33.301: E/AndroidRuntime(887):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-06 15:01:33.301: E/AndroidRuntime(887):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-06 15:01:33.301: E/AndroidRuntime(887):  at dalvik.system.NativeStart.main(Native Method)
08-06 15:01:33.301: E/AndroidRuntime(887): Caused by: java.lang.IllegalArgumentException: java.security.spec.InvalidKeySpecException: java.io.IOException: corrupted stream - out of bounds length found
08-06 15:01:33.301: E/AndroidRuntime(887):  at com.google.android.vending.licensing.LicenseChecker.generatePublicKey(LicenseChecker.java:121)
08-06 15:01:33.301: E/AndroidRuntime(887):  at com.google.android.vending.licensing.LicenseChecker.<init>(LicenseChecker.java:92)
08-06 15:01:33.301: E/AndroidRuntime(887):  at com.iexemplar.pray4me.LicenseCheck.onCreate(LicenseCheck.java:45)
08-06 15:01:33.301: E/AndroidRuntime(887):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-06 15:01:33.301: E/AndroidRuntime(887):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
08-06 15:01:33.301: E/AndroidRuntime(887):  ... 11 more
08-06 15:01:33.301: E/AndroidRuntime(887): Caused by: java.security.spec.InvalidKeySpecException: java.io.IOException: corrupted stream - out of bounds length found
08-06 15:01:33.301: E/AndroidRuntime(887):  at org.bouncycastle.jce.provider.JDKKeyFactory.engineGeneratePublic(JDKKeyFactory.java:92)
08-06 15:01:33.301: E/AndroidRuntime(887):  at org.bouncycastle.jce.provider.JDKKeyFactory$RSA.engineGeneratePublic(JDKKeyFactory.java:396)
08-06 15:01:33.301: E/AndroidRuntime(887):  at java.security.KeyFactory.generatePublic(KeyFactory.java:177)
08-06 15:01:33.301: E/AndroidRuntime(887):  at com.google.android.vending.licensing.LicenseChecker.generatePublicKey(LicenseChecker.java:112)
08-06 15:01:33.301: E/AndroidRuntime(887):  ... 15 more
08-06 15:01:39.001: I/Process(887): Sending signal. PID: 887 SIG: 9 
```

有人帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:34:26.290

您已经为 MyLicenseCheckerCallback 编写了一个类，但尚未实例化它的实例。

相反，您有一个 LicenseCheckerCallback 实例。

所以你使用的是 LVLs 实现而不是你自己的。

# mysql - 选择不同的mysql结果组合

> ID：11825849
> 
> 赞同：0
> 
> 时间：2012-08-06T09:43:10.477
> 
> 标签：mysql, duplicates

我有一个包含 id、artist_id、web 列的表。我找到了一个查询，我可以使用它显示 Web 重复项，如下所示：

```
SELECT DISTINCT b.artist_id AS artist1, b.web AS web1, a.artist_id AS artist2, a.web AS web2 FROM artist_webs a INNER JOIN artist_webs b ON b.web=a.web AND b.web!='NULL' AND b.artist_id!=a.artist_id 
```

因此，它显示具有相同网址的不同艺术家。唯一的问题是它显示的条目两次或更多次基本相同。例如，结果可能如下所示：

```
Row 1
artist1: 21399
artist2: 1036

Row 2
artist1: 1036
artist2: 21399 
```

当然，对于数据库来说，这些是不同的条目，但很明显，它们是相同的，因为它们指的是具有相同网址的相同艺术家 ID。第一行就足够了。

因此，真正需要的是对上面的查询进行修改，无论 id 出现的顺序如何，都将显示不同的行。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:44:51.973

在同一张桌子上加入时，我总是添加类似

```
b.artist_id < a.artist_id 
```

而不是你的

```
b.artist_id!=a.artist_id 
```

这样，它们不仅“不一样”，而且您也跳过了“反向”解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T09:45:53.267

试试这个：

```
SELECT DISTINCT b.artist_id AS artist1, b.web AS web1, 
                a.artist_id AS artist2, a.web AS web2 
FROM artist_webs a 
     INNER JOIN artist_webs b 
         ON b.web = a.web AND  
            b.artist_id < a.artist_id; 
```

# c++ - 完成一个类型的数据

> ID：11825851
> 
> 赞同：-4
> 
> 时间：2012-08-06T09:43:13.767
> 
> 标签：c++, c, class, unions

我应该如何定义`FundamentalOperationalData`？是什么`FundamentalOperationalData_MarkXTransponder m_FODSystemMarkTransponder;`？是要填充其他数据`FundamentalOperationalData`还是不同的数据？正如我所看到的[，这里](http://kdis.sourceforge.net/classdoc/class_k_d_i_s_1_1_d_a_t_a___t_y_p_e_1_1_fundamental_operational_data.html)是父亲。

我想将一些东西声明为 FundamentalOperationalData Mydata(1,2,3...

来源在[这里](http://kdis.sourceforge.net/classdoc/_fundamental_operational_data_8h_source.html)

```
namespace KDIS {
namespace DATA_TYPE {

class KDIS_EXPORT FundamentalOperationalData : public DataTypeBase
{
protected:

    union
    {
        struct
        {
            KUINT8 m_ui8SystemStatus;
            KUINT8 m_ui8AltParam4;
            KUINT8 m_ui8InfoLayers;
            KUINT8 m_ui8Modifier;
            KUINT16 m_ui16Param1;
            KUINT16 m_ui16Param2;
            KUINT16 m_ui16Param3;
            KUINT16 m_ui16Param4;
            KUINT16 m_ui16Param5;
            KUINT16 m_ui16Param6;
        };

        FundamentalOperationalData_MarkXTransponder m_FODSystemMarkTransponder;
        FundamentalOperationalData_MarkXInterrogator m_FODSystemMarkInterrogator;
        FundamentalOperationalData_Soviet m_FODSystemSoviet;
        FundamentalOperationalData_RRB m_FODSystemRRB;
    };

public:

    static const KUINT16 FUNDAMENTAL_OPERATIONAL_DATA_SIZE = 16;

    FundamentalOperationalData( void );

    FundamentalOperationalData( KDataStream & stream ) throw( KException );

    FundamentalOperationalData( const FundamentalOperationalData_MarkXTransponder & FOD );

    FundamentalOperationalData( const FundamentalOperationalData_MarkXInterrogator & FOD );

    FundamentalOperationalData( const FundamentalOperationalData_Soviet & FOD );

    FundamentalOperationalData( const FundamentalOperationalData_RRB & FOD );

    virtual ~FundamentalOperationalData( void );

    //************************************
    // FullName:    KDIS::DATA_TYPE::FundamentalOperationalData::SetFundamentalOperationalData
    //              KDIS::DATA_TYPE::FundamentalOperationalData::GetFundamentalOperationalData
    // Description: Sets/Gets Fundamental Operational Data for a specific system.
    // Parameter:   FundamentalOperationalData_X FOD
    //************************************
    void SetFundamentalOperationalData_MarkXTransponder( const FundamentalOperationalData_MarkXTransponder & FOD );
    void SetFundamentalOperationalData_MarkXInterrogator( const FundamentalOperationalData_MarkXInterrogator & FOD );
    void SetFundamentalOperationalData_Soviet( const FundamentalOperationalData_Soviet & FOD );
    void SetFundamentalOperationalData_RRB( const FundamentalOperationalData_RRB & FOD );
    const FundamentalOperationalData_MarkXTransponder & GetSetFundamentalOperationalData_MarkXTransponder() const;
    FundamentalOperationalData_MarkXTransponder & GetSetFundamentalOperationalData_MarkXTransponder();
    const FundamentalOperationalData_MarkXInterrogator & GetFundamentalOperationalData_MarkXInterrogator() const;
    FundamentalOperationalData_MarkXInterrogator & GetFundamentalOperationalData_MarkXInterrogator();
    const FundamentalOperationalData_Soviet & GetFundamentalOperationalData_Soviet() const;
    FundamentalOperationalData_Soviet & GetFundamentalOperationalData_Soviet();
    const FundamentalOperationalData_RRB & GetFundamentalOperationalData_RRB() const;
    FundamentalOperationalData_RRB & GetFundamentalOperationalData_RRB();

    //************************************
    // FullName:    KDIS::DATA_TYPE::FundamentalOperationalData::GetAsString
    // Description: Returns a string representation
    //************************************
    virtual KString GetAsString() const;

    //************************************
    // FullName:    KDIS::DATA_TYPE::FundamentalOperationalData::Decode
    // Description: Convert From Network Data.
    // Parameter:   KDataStream & stream
    //************************************
    virtual void Decode( KDataStream & stream ) throw( KException );

    //************************************
    // FullName:    KDIS::DATA_TYPE::FundamentalOperationalData::Encode
    // Description: Convert To Network Data.
    // Parameter:   KDataStream & stream
    //************************************
    virtual KDataStream Encode() const;
    virtual void Encode( KDataStream & stream ) const;

    KBOOL operator == ( const FundamentalOperationalData & Value ) const;
    KBOOL operator != ( const FundamentalOperationalData & Value ) const;
};

}; // END namespace DATA_TYPES
}; // END namespace KDIS 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:53:26.437

`FundamentalOperationalData`没有构造函数`(1,2,3..`

您可以使用以下方法初始化此类：

*   *默认构造函数*
*   `FundamentalOperationalData_MarkXTransponder`参考
*   `FundamentalOperationalData_MarkXInterrogator`参考
*   `FundamentalOperationalData_Soviet`参考
*   `FundamentalOperationalData_RRB`参考
*   或`KDataStream`参考

`FundamentalOperationalData_MarkXTransponder`是`FundamentalOperationalData`该类的受保护成员。

这里`union`是授予对*这些成员*的访问权限：

```
 struct
    {
        KUINT8 m_ui8SystemStatus;
        KUINT8 m_ui8AltParam4;
        KUINT8 m_ui8InfoLayers;
        KUINT8 m_ui8Modifier;
        KUINT16 m_ui16Param1;
        KUINT16 m_ui16Param2;
        KUINT16 m_ui16Param3;
        KUINT16 m_ui16Param4;
        KUINT16 m_ui16Param5;
        KUINT16 m_ui16Param6;
    }; 
```

通过*这些成员*

```
 FundamentalOperationalData_MarkXTransponder m_FODSystemMarkTransponder;
    FundamentalOperationalData_MarkXInterrogator m_FODSystemMarkInterrogator;
    FundamentalOperationalData_Soviet m_FODSystemSoviet;
    FundamentalOperationalData_RRB m_FODSystemRRB; 
```

因为工会只有**足够的存储空间来容纳其成员列表中最大的成员。**

# design-patterns - 异常处理策略——重用异常代码

> ID：11825852
> 
> 赞同：4
> 
> 时间：2012-08-06T09:43:14.347
> 
> 标签：design-patterns, jakarta-ee, exception-handling

我正在开发一个应用程序，该过程像这样进行

```
UI --> backend process --> result to UI. 
```

在我的 Java 代码中，我使用 try-catch 处理了我的异常，但是在代码中我有很多重复的异常，可能会在不同的类中抛出相同的异常，这降低了可读性和代码重用。

所以，我打算做一个异常处理策略，而不是在不同的类中抛出相同的异常，我需要组织异常并重用异常代码。

谁能建议我最好的异常处理技术来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T11:38:51.243

始终在尽可能接近其源的位置*处理*未经检查的异常，但避免创建它们，它们本质上是最后的[不安全编程习惯；](http://www.spamer.me.uk/wiki/doku.php/oo_java_checked_vs_unchecked)当程序不可能恢复时。

在实现应用程序时，代码防御性地购买总是在编码时使用检查异常来管理异常工作流；例如当您的代码未能遵守其接口“[合同](http://en.wikipedia.org/wiki/Design_by_contract)”时。

应用程序不应因未经检查的异常而崩溃，因为它无法访问第三方信用评分系统。禁用该选项并继续允许创建现金客户。

泛化异常处理，但专门化它们的创建。例如

```
CustomerNotFound extends CustomerException
CreditCustomerNotFound  extends CustomerException 
CashCustomerNotFound  extends CutomerException

{
   aCustomer = customerList.find( ... )
} catch CustomerNotFound() { 
   logger.warn( ... )
   throw CustomerException(CustomerNotFound)
}

InvoiceAddressException extends InvoiceException 
```

尽量靠近源头做具体处理，记录细节，尽量清理。仅传播

尽可能靠近用户界面进行一般处理和报告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T09:53:35.907

由于您有一个将由客户端使用的 GUI，因此客户端需要知道是否发生了异常，因此处理异常的最佳位置是您的最上层（与 GUI 通信的层）。

您还可以捕获抛出它的异常，记录它然后再次抛出它。

这意味着所有其他较低的层只会抛出异常。

您可以创建一些自定义异常并使用它们而不是常规异常（即捕获 SqlException 并抛出 MyDBException 以及更多详细信息，如异常代码、查询字符串等）

**编辑**

我还会考虑将例外分为两类：逻辑和功能。

1.  逻辑 - 应用程序逻辑问题，例如当用户尝试使用无效的用户名/密码登录时，这些错误通常是您故意抛出的，并且是您创建的自定义错误。
2.  功能性 - 由于应用程序本身的问题（如数据库连接等）而引发的所有常规异常

然后，您可以决定处理每种类型的策略。逻辑异常会向用户返回特定数据（无效的用户名/密码），功能异常会返回更通用的消息，例如：出现问题，请联系支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T07:03:57.543

我想为此展示一种面向设计的方法，

1.  首先，“Martin Spamer”是正确的，因为我们只需要捕获 Checked 异常......但在非常精细的层面......例如，不应将 InvalidCredentialException 和 AuthorizationException 作为 LoginException 抛出/捕获，因为假设您将其作为单一类型异常抛出然后要求您将来以不同的方式处理这些类型，然后呢？

2.  其次，有层是 UI ----> front tier ----> service tier -----> DAO tier

逻辑应该是，

(i) 前端将接收来自 UI 的请求并处理基于前端的验证/异常（例如登录时的 MissingUserNameException）。如果一切正常，则将请求转发到服务层

(ii) 服务将验证业务逻辑，如果有效则处理请求。如果不是，它将向前端层抛出带有正确消息的异常

(iii) 但每个服务级别异常消息可能不适合用户显示。所以前端的职责应该是将业务异常转换为客户端可读的异常

这种方法将有另一个额外的优势。假设，在您需要将一些业务方法公开为 Web 服务的地方出现了一个需求……所以无论如何您的服务都会被公开。现在，如果您将整个异常处理（即将异常转换为正确的消息）逻辑放在前端层并且服务层完全不知道它们......那么您需要再次重构服务层代码（以及前排）。甚至在一段时间之后，可能会出现另一种情况，即您的前端技术已经过时，您必须用新技术重新编码整个异常处理逻辑。

**所以底线是**，服务层应该知道并使用适当的消息处理所有业务验证异常。在用适当的消息装饰异常后，它将把它交给调用服务的客户端层。现在是客户层的责任，显示消息并在需要时用其他消息再次装饰它。这样，您可以保持所有层独立。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-09T08:12:09.690

我不会写更多评论（删除多余的），而是在这里提出我的一些想法+我想出的一种通用解决方案。

[http://docs.oracle.com/javaee/6/tutorial/doc/bnbpj.html](http://docs.oracle.com/javaee/6/tutorial/doc/bnbpj.html)

这将这个问题放在简单的背景下。当人们不习惯异常（如脚本/函数式程序员）时，他们会抱怨只使用 RuntimeExceptions ......这会让你在 UI 上冒出非托管错误来污染前端。（如果您从长远来看考虑程序代码，我觉得这不是很方便......可维护性）

[http://www.onjava.com/pub/a/onjava/2003/11/19/exceptions.html](http://www.onjava.com/pub/a/onjava/2003/11/19/exceptions.html)

> 如果客户端可以采取一些替代操作来从异常中恢复，请将其设为已检查异常。如果客户端不能做任何有用的事情，那么就不要检查异常。有用，我的意思是采取措施从异常中恢复，而不仅仅是记录异常。

（有关于异常记录模式的帖子，但我不会去那里，因为它会逐渐消失）

很难检测到未经检查的异常，它们很容易通过您的“接近源代码”捕获。（当它们未被选中时，它们对于客户端代码将是不可见的并且会溜走）。

我遇到了这个问题，一些遗留代码抛出了许多未经检查的异常，现在导致 UI 崩溃。（因为不可靠的服务）

可能“每个人”都有自己的意见如何正确地做事，但我试图有一个通用模式来捕捉靠近 UI 的错误（未经检查的异常）并将它们呈现在漂亮的错误弹出窗口中（顺便说一下 JSF）而不是指导用户到“error.xhtml”页面（在 web.xml 中引入）。

**// 对于上述场景，我想出了这个解决方案。**
它甚至似乎工作得很好。

1.  创建拦截器和拦截器绑定注解。

2.  注释您希望清理冒泡的 EJBExceptions 的类或方法。
    *   不要去拦截一切，否则你会得到不必要的处理/开销。只需在 BackingBean/ManagedBean 级别上实际需要它的地方使用它。

拦截器绑定注解

```
@Inherited
@InterceptorBinding
@Target({ ElementType.TYPE, ElementType.METHOD })
@Retention(RetentionPolicy.RUNTIME)
public @interface InterceptEJBExceptions {} 
```

拦截器

```
@Interceptor
@InterceptEJBExceptions
public class EjbExceptionInterceptor {
    @AroundInvoke
    public Object interceptBubblingExceptions(final InvocationContext context) throws Exception {
        try {
            return context.proceed();
        } catch (MySpecificEJBException msejbe) {
            Object[] args = { msejbe.getErrorCode(), msejbe.getMethodSignature(), msejbe.getParameters()};
            // This would create a FacesMessage in JSF
            addErrorMessageToFacesContext(null, summary_template, details_template, args);
        } catch (EJBException ejbe) {
            super.addErrorMessageToFacesContext(null, "Unspecified EJBException", ejbe.getMessage());
        }
        // "Pure" RuntimeExceptions will fall through and will be shown on 'error-page' specified in web.xml
        return null;
    }
} 
```

豆类.xml

```
<beans xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/beans_1_0.xsd">

    <interceptors>
        <class>xxx.xxx.xxx.exception.interceptor.EjbExceptionInterceptor</class>
    </interceptors>
</beans> 
```

java类中的用法

```
@RequestScoped // Class must be in EE context
// @InterceptEJBExceptions // Have the annotation at class level to intercept all method calls in this class
public class MyBB {
    @InterceptEJBExceptions // Only intercept when this method gets called
    public String myEjbExceptionThrowingActionListener(Object obj) {
        // Some code that may throw an EJBException
    }
} 
```

**MySpecificEJBException**将是扩展**EJBException**的 Exception 类。根据需要构建类，以传输有用的信息以供以后记录并在屏幕上显示干净的错误消息，而不是在屏幕上呕吐异常，无论是否在*web.xml*中定义了*错误页面*（您也应该将其作为后备） ）。*不要忘记在类中包含原始异常！*

 **根据需要创建更多您自己的扩展 EJBException 的异常，并根据需要抛出它们（作为未选中的 RuntimeExceptions）。然后只需在拦截器中添加 catch 块并执行针对该案例的日志记录和/或错误消息显示。

**一般来说：**

*   在您可以对错误做出反应的地方使用已检查的异常。

    *   在 Java 7 中，您可以使用以下语法对可以类似处理的异常进行分组。

        尝试 {...} 捕获 (SomeException | OtherException e) {...}

*   如果您有很多已检查的异常，您可以/应该将它们分组（扩展您的一些更通用的异常）。然后，您可以基于该分组异常进行捕获（除了/而不是具有分组捕获子句）。

*   将这些异常转换为污染您的代码的 EJB/RuntimeExceptions（如果您在附近确实无能为力）。然后这些应该由通用*EjbExceptionInterceptor*捕获和处理。拦截器将捕获异常 => 显示干净的错误消息/弹出窗口，但用户将保持在同一页面上而不会丢失他/她正在处理的数据。
*   避免抛出普通的*RuntimeException*。这些表示代码中的错误（我的观点），上面的拦截器会让它们在*error-page*上失败。这也将使用户远离他/她当前所在的页面。
    *   这类错误应该始终是要修复的高优先级错误（例如 NullPointerException 会这样做）。
    *   **另外：不要几乎所有事情都抛出异常，那将是糟糕的编程。**如果您的代码可以事先处理错误（例如，使用重载方法或默认值来防止使用空参数），那么就这样做，不要将问题泄露给客户端（调用方法）。那只是懒惰的编程+使用 RuntimeExceptions 隐藏这些错误是不负责任的！**进行单元测试！**

我找不到任何实际的错误处理解决方案（作为模式），但是有很多争论什么是对的，什么是错的。我们有 2 种 Throwables，那么为什么不建设性地使用它们呢？
我希望这将是一个真正的解决方案，而不是继续这场辩论。

我会感谢所有建设性的意见和改进建议。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-21T00:31:21.640

**编辑：**原始答案在您的其他问题中移至此处： [https ://stackoverflow.com/a/16172074/82609](https://stackoverflow.com/a/16172074/82609)

为了将我的答案保持在问题范围内，以下是有趣的部分：

**避免异常代码**

异常类型应该足以用于流控制决策。解析异常或流控只会产生无用的代码。添加更多异常类型，就像您有异常代码一样。

**第 39 条：仅对异常情况使用异常（Jochua Bloch 的 Effective Java 章节）**：

第 39 条：仅在例外情况下使用例外。也就是说，不要对控制流使用异常，例如在调用 Iterator.next() 时捕获 NoSuchElementException 而不是首先检查 Iterator.hasNext()。

在函数式语言中，我们倾向于只在真正异常的情况下使用异常。异常情况是“无法连接到数据库”，而不是“用户没有在输入文本中提供他想要的文章数量”。这不是例外，这是一个商业错误。

Java 语言没有太大帮助，但理想情况下，您可以返回该业务错误，作为函数的输出（例如，EnumAddBasketError 的实例），而不是创建 AddProductToBasketWithoutQuantityException。在实践中，人们往往会引发异常，破坏正常的控制流程，并减慢应用程序的速度（异常是有代价的）。

**避免检查异常**

在此处阅读我的其他答案：[https](https://stackoverflow.com/a/16172074/82609) ://stackoverflow.com/a/16172074/82609 检查异常适用于可恢复的故障（Sun 建议）。对于不可恢复的故障，未经检查的异常更容易处理。

* * *

**最后我的意思是你可能不需要所有这些异常，因为它们中的大多数可能是不可恢复的，或者可能不是异常的。****

# xslt - XPATH 中的命名函数

> ID：11825860
> 
> 赞同：0
> 
> 时间：2012-08-06T09:43:31.520
> 
> 标签：xslt, xpath

我的 xmi 文件中有以下元素：

```
<element1 id= 3 >

<element2 id= 3> 
```

我想把它们变成类似的东西：

```
<element1 id= 3 name =element2>
<element2 id= 3> 
```

我正在使用 xslt 进行转换：

```
<xsl:if test="@id = //*[@id]/@id">
                <xsl:sequence
                    select="fn:createAtt('name',X)" />
            </xsl:if> 
```

我想比较两个元素的 id，如果它们匹配，那么我想将第二个元素（element2）的名称保存到第一个元素的 name 属性中。

比较工作正常。问题是如何读取第二个元素的名称？我尝试使用 name() 函数，但无法准确读取与比较匹配的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:20:48.677

我会这样做：首先定义一个键为

```
<xsl:key name="el-by-id" match="*" use="@id"/> 
```

然后我会写一个模板

```
<xsl:template match="*[@id]">
  <xsl:variable name="same-id" use="key('el-by-id', @id) except ."/>
  <xsl:copy>
     <xsl:copy-of select="@*"/>
     <xsl:if test="$same-id">
       <xsl:attribute name="name" select="node-name($same-id[1])"/>
     </xsl:if>
     <xsl:apply-templates/>
  </xsl:copy>
</xsl:template> 
```

这样，您可以使用键有效地引用元素，然后如果找到相同 id 的元素，`name`则创建名为的属性。我使用了 XSLT/XPath 2.0`node-name`函数，具体取决于您可能想要使用的确切要求`<xsl:attribute name="name" select="name($same-id[1])"/>`。

# iphone - 如何为节标题设置 RGB 颜色值 - IOS

> ID：11825863
> 
> 赞同：4
> 
> 时间：2012-08-06T09:43:47.280
> 
> 标签：iphone, objective-c, ios, xcode

我已经尝试为我的标题视图使用以下代码。它不起作用。如何设置默认颜色值以外的颜色。

```
[header_view setBackgroundColor:[UIColor colorWithRed:10\. green:0 blue:0 alpha:0]]; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-06T09:46:17.507

```
[header_view setBackgroundColor:[UIColor colorWithRed:10/255.0 green:0/255.0 blue:0/255.0 alpha:1]]; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-06T09:51:58.443

请参阅 UIColor.h 标头。将在下面显示。

```
+ (UIColor *)blackColor;      // 0.0 white 
+ (UIColor *)darkGrayColor;   // 0.333 white 
+ (UIColor *)lightGrayColor;  // 0.667 white 
+ (UIColor *)whiteColor;      // 1.0 white 
+ (UIColor *)grayColor;       // 0.5 white 
+ (UIColor *)redColor;        // 1.0, 0.0, 0.0 RGB 
+ (UIColor *)greenColor;      // 0.0, 1.0, 0.0 RGB 
+ (UIColor *)blueColor;       // 0.0, 0.0, 1.0 RGB 
+ (UIColor *)cyanColor;       // 0.0, 1.0, 1.0 RGB 
+ (UIColor *)yellowColor;     // 1.0, 1.0, 0.0 RGB 
+ (UIColor *)magentaColor;    // 1.0, 0.0, 1.0 RGB 
+ (UIColor *)orangeColor;     // 1.0, 0.5, 0.0 RGB 
+ (UIColor *)purpleColor;     // 0.5, 0.0, 0.5 RGB 
+ (UIColor *)brownColor;      // 0.6, 0.4, 0.2 RGB 
+ (UIColor *)clearColor;      // 0.0 white, 0.0 alpha 
```

因为上面的颜色与下面的代码相同。

```
black:       [UIColor colorWithWhite:0.0f alpha:1.0f];
darkGray:    [UIColor colorWithWhite:0.333f alpha:1.0f];
lightGray:   [UIColor colorWithWhite:0.667f alpha:1.0f];
white:       [UIColor colorWithWhite:1.0f alpha:1.0f];
gray:        [UIColor colorWithWhite:0.5f alpha:1.0f];
red:         [UIColor colorWithRed:255/255.0f green:0/255.0f blue:0/255.0f alpha:1.0f];
green:       [UIColor colorWithRed:0/255.0f green:255/255.0f blue:0/255.0f alpha:1.0f];
blue:        [UIColor colorWithRed:0/255.0f green:0/255.0f blue:255/255.0f alpha:1.0f];
.
.
. 
```

如果你想如何为 rgb 值着色适用于 UIColor。看下面的帖子

你想找到维基百科或其他网站的颜色。

![在此处输入图像描述](../Images/2f0bd217a627f1bceb5066810c842df8.png)

r、g、b值适用如下。

```
[UIColor colorWithRed:158/255.0f green:253/255.0f blue:56/255.0f alpha:1.0f]; 
```

![在此处输入图像描述](../Images/3e73fb58db6747976a4798aed9856799.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-06T10:02:33.320

对于任何想要在下面的代码中使用更简单的东西的人，我最近编写了一个新类别`UIColor`，您可以在[这里](https://github.com/toby4242/UIColor-extensions)找到所有您需要做的就是获取调用的文件`UIColor+extensions.h`并将`UIColor+extensions.m`它们添加到您自己的项目中。这个新类别与下面的代码不完全匹配，因为其中包含其他一些方法，我找到了一种更有效的方法来执行该`colorWithHex:`方法。

* * *

**原始答案**

`UIColor`您还可以通过扩展这样的方法来制作自己的十六进制颜色转换器。

UIColor_hex.h

```
#import <UIKit/UIColor.h>
@interface UIColor(MBCategory)
+ (UIColor *)colorWithHexString:(NSString *)hexStr;
@end 
```

UIColor_hex.m

```
#import "UIColor_Hex.h"
@interface UIColor(HexConverterCategory)

// Takes 0x123456
+ (UIColor *)colorWithHex:(UInt32)color andAlpha:(float)alpha;

@end

@implementation UIColor(HexConverterCategory)

+ (UIColor *)colorWithHex:(UInt32)color andAlpha:(float)alpha
{
    unsigned char r, g, b;
    b = color & 0xFF;
    g = (color >> 8) & 0xFF;
    r = (color >> 16) & 0xFF;
    return [UIColor colorWithRed:(float)r/255.0f green:(float)g/255.0f blue:(float)b/255.0f alpha:alpha];
 }

@end

@implementation UIColor(MBCategory)

 + (UIColor *)colorWithHexString:(NSString *)hexStr 
 {
    float alpha;
    NSString *newHexStr;
    NSCharacterSet *cSet = [NSCharacterSet characterSetWithCharactersInString:@"/-_,~^*&\\ "];
    if(![hexStr hasPrefix:@"#"]) hexStr = [NSString stringWithFormat:@"#%@", hexStr];
    if([hexStr rangeOfCharacterFromSet:cSet].location != NSNotFound) {

       NSScanner *scn = [NSScanner scannerWithString:hexStr];
      [scn scanUpToCharactersFromSet:cSet intoString:&newHexStr];
      alpha = [[[hexStr componentsSeparatedByCharactersInSet:cSet] lastObject] floatValue];

   } else {

      newHexStr = hexStr;
      alpha = 1.0f;

   }

   const char *cStr = [newHexStr cStringUsingEncoding:NSASCIIStringEncoding];
   long x = strtol(cStr+1, NULL, 16);
   return [UIColor colorWithHex:x andAlpha:alpha];
   }
@end 
```

那么你需要做的就是

```
UIColor *myHexColor = [UIColor colorWithHexString:@"#FFFFFF"]; 
```

****编辑**** 如果你愿意，你也可以错过'#'，而 colorWithHexString 会添加它，你也可以通过在 cSet 中设置的这些字符之一分隔它来添加最后的 alpha。所以你可以做

```
UIColor *myHexColorWithAlpha = [UIColor colorWithHexString:@"#FFFFFF 0.4"];
UIColor *myHexColorWithAlpha = [UIColor colorWithHexString:@"#FFFFFF/0.4"];
UIColor *myHexColorWithAlpha = [UIColor colorWithHexString:@"#FFFFFF*0.4"]; 
```

ETC

然后设置你可以做的标题

```
[header_view setBackgroundColor:[UIColor colorWithHexString:@"#FFFFFF"]]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T09:49:54.590

试试这个代码：

```
[header_view setBackgroundColor:[UIColor colorWithRed:149.0/255.0f green:149.0/255.0f 
 blue:149.0/255.0f alpha:1.0]]; 
```

# mercurial - 如何从 Mercurial 中永久删除更改集？

> ID：11825872
> 
> 赞同：1
> 
> 时间：2012-08-06T09:44:18.883
> 
> 标签：mercurial

昨晚深夜，我最终将生产登录详细信息签入到存储库中。由于我现在是唯一从事此工作的开发人员，这没什么大不了的，但将来暴露生产细节并不是很好。

我最终做的是在服务器上进行：

```
hg clone <old repo> <new repo> -r <revision> 
```

只克隆到错误提交之前的修订版并删除

我测试了它，它似乎很好。我想我在这里问得更好，以确保，我是否真的确保周围没有隐藏的历史或隐藏的足迹来暴露那个错误提交的内容？

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:20:32.357

不用担心。删除后`<old repo>`，它肯定消失了。尽管法医专家可能仍然会在磁盘上已删除的块中发现一些有趣的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:00:31.363

您的`clone`命令将起作用，但如果您的存储库有多个分支，则该克隆将不包括它们。因此，除非您小心地将它们单独拉入，否则您可能损失的比您预期的要多。这可能不是你想要的......

删除修订的最简单方法是使用[MQ 扩展](http://mercurial.selenic.com/wiki/Strip)`strip`中的命令。您可以将其与命令（[Rebase 扩展](http://mercurial.selenic.com/wiki/RebaseExtension)）结合使用，以删除已经有要保留的子项的变更集；首先是孩子到父母，然后是有问题的变更集。`rebase``rebase``strip`

请注意这些是修改历史记录*的操作，所以如果变更集已经与其他用户共享，它仍然会在他们的存储库*中。即使在他们拉动之后。他们将需要重复您的步骤才能摆脱它们，这非常令人头疼。更改甚至可能以这种方式意外地回到主存储库中。（注意：这也适用于您的`clone`方法。）

因此，如果您需要这样做，最好指示您的所有用户进行新的克隆，或者至少剥离更改，并制作挂钩以防止重新引入更改集。如果您无法联系和/或信任您的所有用户（例如，因为它是开源的），那么最好将变更集留在那里并更改您的生产凭据。反正它已经在野外了。

将来会有更好的方法来删除或更改变更集，其中包含“废弃”功能，计划用于 Mercurial 2.4。一旦完全实现，当用户从您的存储库中提取时，他们的存储库历史可以相应地自动更新。因此，请留意该功能。

# php - PHP中多个表的分页逻辑

> ID：11825874
> 
> 赞同：2
> 
> 时间：2012-08-06T09:44:29.413
> 
> 标签：php, mysql, logic, paging, custom-paging

我想在 PHP 中准备一个包含多个 mysql 表的列表页面。所以这可以是N个表，每个表中的记录可以是任何东西，我想为此实现分页。这是在编写分页逻辑之前对我有用的信息：

```
define('RECORDS_PER_PAGE_SPLIT', 15);
$htmlTableList = array(
    '_split_1' => 25,
    '_split_2' => 4,
    '_split_3' => 60
);

$currentPage = 1;
if (isset($_REQUEST['page'])) {
    $currentPage = $_REQUEST['page'];
}
if ($currentPage == '' || $currentPage == '0') {
    $currentPage = 1;
}
$offset = ($currentPage - 1) * RECORDS_PER_PAGE_SPLIT; 
```

我想要一个 PHP 函数（它将包含多表分页的逻辑），它将返回以下数组：

```
//For page=1 in request:
Array{
    0 => "SELECT * FROM _split_1 LIMIT 0, 15"
}

//For page=2 in request:
Array{
    0 => "SELECT * FROM _split_1 LIMIT 15, 25",
    1 => "SELECT * FROM _split_2 LIMIT 0, 4",
    2 => "SELECT * FROM _split_3 LIMIT 0, 1",
}

//For page=3 in request:
Array{
    0 => "SELECT * FROM _split_3 LIMIT 1, 16"
}

//For page=4 in request:
Array{
    0 => "SELECT * FROM _split_3 LIMIT 16, 31"
} 
```

如果有人已经编写过这种类型的分页逻辑，请提供该功能。注意：这只是示例，但在我的实时应用程序中，每个表中的记录数将以 lacs 为单位。而且桌子的数量也不固定。它可以是 1 到 5 任何东西。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T09:53:55.540

详细说明我上面的答案...您要做的是将`UNION`所有结果集放在一起，然后您可以让MySQL为您完成所有艰苦的工作。

所以你的代码会是这样的：

```
define('RECORDS_PER_PAGE_SPLIT', 15);

$currentPage = !empty($_REQUEST['page']) ? (int) $_REQUEST['page'] : 1;

$offset = ($currentPage - 1) * RECORDS_PER_PAGE_SPLIT;

$query = "
  SELECT SQL_CALC_FOUND_ROWS *
  FROM (
    SELECT *
    FROM _split_1
    UNION ALL
    SELECT *
    FROM _split_2
    UNION ALL
    SELECT *
    FROM _split_3
  ) u
  LIMIT $offset, ".RECORDS_PER_PAGE_SPLIT."
";

// This contains results for the page
$result = mysqli_query($conn, $query);

// If you want the total number of results to display or for other calulations
$query = "
  SELECT FOUND_ROWS()
";
$foundRows = mysqli_query($conn, $query); 
```

如果您不想知道结果总数，您可以废弃第二个查询并`SQL_CALC_FOUND_ROWS`从第一个查询中删除。

[以下](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows)是有关`SQL_CALC_FOUND_ROWS`/的更多信息`FOUND_ROWS()`

另请注意，如果您要应用 a `LIMIT`，您还应该应用 an`ORDER BY`以保证合理的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T09:50:35.877

如果您创建一个 UNION 查询，将 split_1、_2 和 _3 的所有记录按所需顺序列出在一个表中，您将不需要任何复杂的分页逻辑。就像在（例如第 4 页）

```
select * from _split_1 
union select * from _split_2
union select * from _split_3
limit 3 * 15, 15 
```

# iphone - 地图视图上的 GDirections 路线崩溃

> ID：11825876
> 
> 赞同：2
> 
> 时间：2012-08-06T09:44:33.170
> 
> 标签：iphone, objective-c, ios, xcode, mkmapview

我正在使用`AFNetworking`，并且我正在通过从谷歌方向获取方向来关注关于在 iphone 屏幕上绘制路线的教程。我正在使用`JSON`, 和`AFNetworking`. 我从教程中复制了代码，您可以在此处找到：[教程](http://iosguy.com/tag/directions-api/)

如果您还选择复制和测试此代码，请注意：您需要`AFNetworking`来自此 github 页面：[AFNetworking 下载](https://github.com/AFNetworking/AFNetworking/)

您还必须自己在 .h 中将变量定义`_path`为 an `NSMutableArray`，否则您将收到错误，因为他们没有定义它但引用了它。

这是代码：

```
 AFHTTPClient *_httpClient = [AFHTTPClient clientWithBaseURL:[NSURL URLWithString:@"http://maps.googleapis.com/"]];

    [_httpClient registerHTTPOperationClass: [AFJSONRequestOperation class]];

    NSMutableDictionary *parameters = [[NSMutableDictionary alloc] init];

    [parameters setObject:[NSString stringWithFormat:@"%f,%f", location.coordinate.latitude, location.coordinate.longitude] forKey:@"origin"];

    [parameters setObject:[NSString stringWithFormat:@"%f,%f", location2.coordinate.latitude, location2.coordinate.longitude] forKey:@"destination"];

    [parameters setObject:@"true" forKey:@"sensor"];

    NSMutableURLRequest *request = [_httpClient requestWithMethod:@"GET" path: @"maps/api/directions/json" parameters:parameters];

    request.cachePolicy = NSURLRequestReloadIgnoringLocalCacheData;

    AFHTTPRequestOperation *operation = [AFHTTPClient HTTPRequestOperationWithRequest:request success:^(AFHTTPRequestOperation *operation, id response) { 
        NSInteger statusCode = operation.response.statusCode;
        if (statusCode == 200) {
            [self parseResponse:response];

        } else {

        }
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) { }]; 

    [_httpClient enqueueHTTPRequestOperation:operation]; 
```

**所以这是我的问题**

感谢那些帮助过的人。我已经测试了没有错误的代码，但现在在尝试制作路线时发现了这一点。它在这里崩溃：

```
- (void)parseResponse:(NSDictionary *)response {

    NSArray *routes = [response objectForKey:@"routes"]; // CRASH HERE

    NSDictionary *routePath = [routes lastObject];

    if (routePath) {

        NSString *overviewPolyline = [[routePath objectForKey: @"overview_polyline"] objectForKey:@"points"];

        _path = [self decodePolyLine:overviewPolyline];

        NSInteger numberOfSteps = _path.count;

        CLLocationCoordinate2D coordinates[numberOfSteps];
        for (NSInteger index = 0; index < numberOfSteps; index++) {
            CLLocation *location = [_path objectAtIndex:index];
            CLLocationCoordinate2D coordinate = location.coordinate;

            coordinates[index] = coordinate;
        }

        MKPolyline *polyLine = [MKPolyline polylineWithCoordinates:coordinates count:numberOfSteps];
        [self.mapView addOverlay:polyLine];

        }

    } 
```

带有错误描述：

> -[__NSCFData objectForKey:]：无法识别的选择器发送到实例 0x2004bb80

你们能帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T10:23:37.227

> 我还要说，AFHTTPClient 之前没有如图所示的这个 HTTPOperationWithRequest 类方法，但我不得不从 AFHTTPRequestOperation 复制并粘贴它。

`AFNetworking`我从您的 github 链接克隆并在`AFHTTPClient.h`文件中找到了这个：

```
- (AFHTTPRequestOperation *)HTTPRequestOperationWithRequest:(NSURLRequest *)request 
                                                    success:(void (^)(AFHTTPRequestOperation *operation, id responseObject))success
                                                    failure:(void (^)(AFHTTPRequestOperation *operation, NSError *error))failure; 
```

我想知道为什么您收到错误而不是“找不到方法”警告。`HTTPRequestOperationWithRequest`是实例方法，而不是类方法：

```
AFHTTPRequestOperation *operation = [_httpClient HTTPRequestOperationWithRequest:request success:^(AFHTTPRequestOperation *operation, id responseObject) {
        // do something
        ;
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        ;
    }]; 
```

顺便说一句，您链接的教程正确无误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T00:12:09.777

好吧，玩了一会儿我就明白了。这`route`将只是一个`NSDictionary`if`JSONKit`被包括在内。`AFNetworking`和`JSONKit`这里有一些关系。所以，我已经有了以前的`JSONKit`文件，因为我知道这一点。但`AFHTTPClient`不接受它，所以我不得不说：

```
 [_httpClient setDefaultHeader:@"Accept" value:@"application/json"]; 
```

# android - android软键盘在横向覆盖editText

> ID：11825886
> 
> 赞同：2
> 
> 时间：2012-08-06T09:45:43.467
> 
> 标签：android, android-edittext, flags, soft-keyboard

我有以下布局：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent">

    <LinearLayout
            android:layout_height="wrap_content"
            android:layout_width="fill_parent"
            android:orientation="vertical"
            android:layout_above="@+id/edittext">

        <TextView
                android:layout_height="wrap_content"
                android:layout_width="fill_parent"
                android:text="line1"/>

        <TextView
                android:layout_height="wrap_content"
                android:layout_width="fill_parent"
                android:text="line2"/>

        <TextView
                android:layout_height="wrap_content"
                android:layout_width="fill_parent"
                android:text="line3"/>

    </LinearLayout>

    <EditText
            android:id="@id/edittext"
            android:layout_height="wrap_content"
            android:layout_width="fill_parent"
            android:layout_margin="5dp"
            android:text="test"
            android:layout_alignParentBottom="true"
            android:imeOptions="flagNoExtractUi"
            />
</RelativeLayout> 
```

在 Nexus 上的横向视图中，它看起来像：

![在此处输入图像描述](../Images/a42dc2aa3d31efac3cf28beaac38bcb7.png)

有没有办法解决这个问题，但保留标志 flagNoExtractUi ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T09:54:19.170

`<activity>`在 Android 清单中定义如下：

```
<activity android:name=".TodoEdit"
            android:windowSoftInputMode="adjustResize"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T09:49:19.920

您可以添加一个`ScrollView`，以便当出现键盘时，它会自动滚动以使视图完全可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-06T09:37:35.063

这似乎是Android中的一个错误，但我找到了解决方案！只需替换`android:imeOptions="flagNoExtractUi"`为`android:imeOptions="flagNoFullscreen"`，现在一切正常。

# maven - 强制码头（在 Maven 上运行）忽略 ssl 错误

> ID：11825889
> 
> 赞同：0
> 
> 时间：2012-08-06T09:45:54.550
> 
> 标签：maven, ssl, jetty, ssl-certificate, maven-jetty-plugin

有什么方法可以强制码头（在 maven 上运行）忽略 ssl 握手问题？目前我的机器有自签名证书。当我的码头从其他机器收到 https 请求时会出现问题（不过，也许我的设置是错误的）。不过，我不需要 ssl 证书是万无一失的。因为我的机器只是一台开发机器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:15:59.693

您可以使用 apache 公共库中的 EasySSLProtocolSocketFactory。

```
// EasySSLProtocolSocketFactory accepts all self-signed certs
Protocol easyhttps = new Protocol("https", new EasySSLProtocolSocketFactory(), 443);
Protocol.registerProtocol("https", easyhttps); // all https connections will be affected 
```

# facebook - 当我从我的网站使用应用程序时出现 facebook 权限问题？

> ID：11825890
> 
> 赞同：-2
> 
> 时间：2012-08-06T09:46:10.363
> 
> 标签：facebook, oauth-2.0, facebook-oauth, facebook-authorization

我开发了一个 facebook 应用程序。这需要扩展权限。当我从

```
http://apps.facebook.com/test-samplefb-app/ 
```

它要求所有许可，包括扩展许可和按我想要的方式工作。

但是当我尝试从我的站点访问应用程序时，它只要求基本许可，而不是额外和扩展许可。因为我只能获得其他“安装许可”。

注意：我正在使用 oauth。

谁能帮助为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:02:54.880

当您尝试访问您的站点的应用程序时，您是否提供了权限列表。因为如果您获得所需的权限列表，那么您可能没有指定所需的权限，而是要求默认权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:20:12.240

已解决：当我在登录网址中附加 auth_referral = 1 时，它可以工作:)

# java - Jboss 7.1.1 启动/停止脚本

> ID：11825891
> 
> 赞同：3
> 
> 时间：2012-08-06T09:46:12.583
> 
> 标签：java, jakarta-ee, jboss7.x

有人可以告诉如何使用**Shell Script**在 MAC 中启动/停止 Jboss-7.1.1 服务器。

```
stop_viewer(){
echo "********* Stopping JBoss Server by killing the process **********";
ps | grep domain.sh | grep -v grep | awk '{print $1}' | xargs kill
ps | grep java | grep -v grep | awk '{print $1}' | xargs kill
ps -ef | grep superuser | grep java | grep -v grep | awk '{print $2}'| xargs kill
echo "********* Stopped JBoss Server by killing the process **********";

} 
```

上面的脚本在 Jboss-7.0.2 中运行良好，可以停止服务器。但是在 Jboss-7.1.1 中，它不会停止服务器。请有人帮助解决这个问题。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-06T10:26:35.537

1) 首先你需要下载 JBoss。（我假设您已经安装了有效的 Java 版本）。

2）下载后解压文件夹：

```
 cd /Users/eugene/Downloads

 mkdir JBOSS-7

 cp /Users/eugene/Downloads/jboss-as-7.1.1.Final.zip /Users/eugene/Downloads/JBOSS-7

 cd /Users/eugene/Downloads/JBOSS-7

 unzip /Users/eugene/Downloads/jboss-as-7.1.1.Final.zip 
```

3)

```
 cd Users/eugene/Downloads/JBOSS-7/jboss-as-7.1.1.Final/bin

 ./standalone.sh 
```

如果你想停止它：

```
 ctrl + c 
```

当然，您的路径可能会有所不同。如果您想在后台运行它，那么只需执行以下操作：

```
 ./standalone.sh & 
```

停止它：

```
 ps -ef | grep jboss 
```

你会得到一个接近这个的输出：

```
 eugene@eugenes-MacBook-Pro ~/D/J/j/bin> ps -ef | grep jboss
 501  1471  1446   0  1:32AM ttys000    0:03.31 /usr/.... 
```

然后发出：

```
 kill -9 1471 
```

最后，您可以使用 JBoss CLI 执行：

```
 ./jboss-cli.sh --connect ":shutdown" 
```

**编辑**

脚本似乎完成了它的工作，你所要做的就是稍微编辑一下：

```
 #!/bin/sh

 echo "********* Stopping JBoss Server by killing the process **********";
 ps -e | grep jboss | grep -v grep | awk '{print $1}' | xargs kill
 echo "********* Stopped JBoss Server by killing the process **********"; 
```

请注意，我删除了几行并用**jboss更改了****java**

 **把它放在一个名为 stopJboss.sh 的文件中

然后 ：

```
 sudo chmod +x stopJBoss.sh 
```

然后在需要时调用它：

```
 ./stopJBoss.sh 
```

这仅在您运行 JBoss 的单个实例时才有效，更多情况下您将需要不同的脚本。

PS 我不是脚本方面的专家，但这就是这一行的作用：

```
 ps -e | grep jboss | grep -v grep | awk '{print $1}' | xargs kill 
```

它将查找包含**jboss**关键字的每个进程。但它也会输出 grep 命令本身，因此您将获得两个命令的输出，但您只需要第一个。

你可以运行 ps -e | grep jboss 并看到输出包含两行而不是一行。

这就是为什么你调用 grep -v grep - 这意味着：在这两行中找到 grep 为“grep”但反转结果，这样你就省略了第二个不需要的结果。

然后 awk '{print $1}' 将字符串拆分为标记并获取第一个标记，这是您需要的 PID，然后使用 xargs 命令将此 PID 传递给 kill 命令。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-13T18:43:27.213

通过命令行关闭服务器

```
sh ./bin/jboss-cli.sh --connect command=:shutdown 
```

假设您在 localhost 上运行并使用默认的本机管理端口，即 9999

如果不是，您需要指定在standalone.xml 中配置的IP（jboss.bind.address）和本机管理端口（jboss.management.native.port）

```
sh ./bin/jboss-cli.sh --connect controller=<IP>:<native-mgmt-port> command=:shutdown 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-07-28T01:33:12.210

我就是这样做的：

```
ps -ef | grep jboss | grep -v grep | awk '{print $2}' | xargs kill -9 
```

我在一个名为 killjboss 的 bash 文件中有这个，它对我很有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-21T22:15:23.807

在谷歌上潜水后，我设法完成了这项工作：

```
#!/bin/sh
  ### BEGIN INIT INFO
  # Provides: jboss
  # Required-Start: $local_fs $remote_fs $network $syslog
  # Required-Stop: $local_fs $remote_fs $network $syslog
  # Default-Start: 2 3 4 5
  # Default-Stop: 0 1 6
  # Short-Description: Start/Stop JBoss AS v7.1.1
  ### END INIT INFO
  #
  #source some script files in order to set and export environmental variables
  #as well as add the appropriate executables to $PATH

  export JAVA_HOME=/usr/lib/jvm/java-7-oracle
  export PATH=$JAVA_HOME/bin:$PATH

  export JBOSS_HOME=/home/gaspar/jboss-as-7.1.1.Final
  export PATH=$JBOSS_HOME/bin:$PATH

  case "$1" in
  start)
  echo "Starting JBoss AS 7.1.1"
  #original:
  #sudo -u jboss sh ${JBOSS_HOME}/bin/standalone.sh

  #updated:
  start-stop-daemon --start --quiet --background --chuid jboss --exec ${JBOSS_HOME}/bin/standalone.sh
  ;;
  stop)
  echo "Stopping JBoss AS 7.1.1"
  #original:
  #sudo -u jboss sh ${JBOSS_HOME}/bin/jboss-admin.sh --connect command=:shutdown

  #updated:
  sudo -u jboss sh ${JBOSS_HOME}/bin/jboss-cli.sh --connect command=:shutdown
  ;;
  *)
  echo "Usage: /etc/init.d/jboss {start|stop}"
  exit 1
  ;;
  esac

  exit 0 
```

:)**

# c# - 无法将 int 类型隐式转换为字符串

> ID：11825892
> 
> 赞同：1
> 
> 时间：2012-08-06T09:46:16.333
> 
> 标签：c#, string

当我尝试使用`+`运算符连接两个字符时，编译器显示以下错误消息：“无法将类型隐式转换`int`为`string`。”

我的代码是：

```
const string Expr = ('$' + (char)(39)); 
```

为什么我会收到此错误？我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-06T09:48:35.893

在两个字符上使用`+`运算符不会连接它们。相反，它将它们转换为`int`，并添加这些整数，从而产生`int`.

解决您的问题的一个简单方法是使用`"$"`, 这是 a `string`，而不是`'$'`, 这是 a `char`，但这不是常量表达式，因此在您的情况下，它会因新的编译器错误而失败。

或者您可以完全跳过整数步骤，只使用`const string Expr = "$'"`. 或者，如果您真的想使用整数代码点，可以将其转换为十六进制并使用“$\u0027”。

在某些类似情况下，常见的解决方法是先连接空字符串`""`( `"" + a + b`)。或者您可以手动调用`ToString()`一个（或两个）操作数。但是在您的情况下，将`$`-prefix 转换为字符串会更干净。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T09:50:51.663

只需使用`String.Concat`：

```
string.Concat('$', (char)39) 
```

无论如何，字符串上的 + 运算符都会在内部转换为该方法。

此外，您不能将`const`关键字与这样的表达式一起使用。考虑`readonly`改用。

# javascript - Ember.js 路由器入门

> ID：11825894
> 
> 赞同：4
> 
> 时间：2012-08-06T09:46:22.900
> 
> 标签：javascript, ember.js, ember-old-router

我想在下一个项目中学习使用 Ember.js。到目前为止，我已经阅读了[这里](http://emberjs.com/documentation/)的文档，但我没有看到关于路由器的解释。然后我在[这里](http://emberjs.com/guides/outlets/)阅读了指南，但我仍然不明白如何正确使用路由器。我尝试以这种方式使用路由器，我想要 2 条路线：

1.  `/login`显示进入第二条路线的按钮
2.  `/home`显示一个按钮进入第一条路线

这只是一个非常简单的代码，用于测试使用路由器在“页面”之间切换。我尝试使用此代码，但我得到的只是一个空白页：

```
<script src="js/libs/jquery-1.7.2.min.js"></script>
<script src="js/libs/handlebars-1.0.0.beta.6.js"></script>
<script src="js/libs/ember-1.0.pre.min.js"></script>
<script>
    var App = Ember.Application.create();

    App.ApplicationController = Ember.Controller.extend();
    App.ApplicationView = Ember.View.extend();

    App.LoginView = Ember.View.extend({
        templateName: 'login-page'
    });

    App.HomeView = Ember.View.extend({
        templateName: 'home-page'
    });

    App.router = Ember.Router.create({
        enableLogging: true,
        root: Ember.Route.extend({
            index: Ember.Route.extend({
                route: '/',
                redirectsTo: 'login'
            }),
            login: Ember.Route.extend({
                route: '/login',
                doLogin: Ember.Route.transitionTo('home'),
                connectOutlets: function (router) {
                    router.get('applicationController').connectOutlet('login');
                }
            }),
            home: Ember.Route.extend({
                route: '/home',
                doLogout: Ember.Route.transitionTo('login'),
                connectOutlets: function (router) {
                    router.get('applicationController').connectOutlet('home');
                }
            })
        })
    });
    App.initialize(App.router);
</script>

<script type="text/x-handlebars" data-template-name="login-page">
    <h1>Login Page</h1>

    <button {{action doLogin}}>Login</button>
</script>

<script type="text/x-handlebars" data-template-name="home-page">
    <h1>Home Page</h1>

    <button {{action doLogout}}>Logout</button>
</script> 
```

当我运行它时，URL 会转到`#/login`但它什么也不显示。有谁可以告诉我如何使上面的代码工作？为什么我得到一个空白页？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T11:20:54.407

你的代码：http: [//jsfiddle.net/jPn3H/](http://jsfiddle.net/jPn3H/)

...更新了一个全新的“应用程序”模板连接到：http `App.ApplicationView`: [//jsfiddle.net/pauldechov/jPn3H/1/](http://jsfiddle.net/pauldechov/jPn3H/1/)

该功能为您`.initialize()`附加。除非有连接，否则这些电话不会做任何事情。希望有帮助。`App.ApplicationView``<body>``.connectOutlet(...)``{{outlet}}`

# c++ - 在声明之上调用函数

> ID：11825902
> 
> 赞同：6
> 
> 时间：2012-08-06T09:46:59.123
> 
> 标签：c++, class, namespaces, scope, forward-declaration

```
void foo()
{
    bar();          // error: ‘bar’ has not been declared
}

void bar()
{
}

namespace N
{
    void foo()
    {
        N::bar();   // error: ‘bar’ is not a member of ‘N’
    }

    void bar()
    {
    }
}

class C
{
    static void foo()
    {
        C::bar();   // works just fine
    }

    static void bar()
    {
    }
}; 
```

将函数调用置于其声明之上的这种不一致的原因是什么？为什么我可以在类中做到这一点，而不是在命名空间或全局范围内？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:59:41.280

您可以在类内部或在类声明之后定义成员函数，或者其中的一些。

*为了在这里*获得一些一致性，具有内联定义函数的类的规则是，它仍然必须像函数在类*之后*定义一样进行编译。

你的代码

```
class C {
     static void foo()
     {
         C::bar();   // works just fine 
     }

     static void bar()
     {     }
 }; 
```

编译相同

```
class C {
     static void foo();
     static void bar();
 }; 

 void C::foo()
 {  C::bar();  }

 void C::bar()
 {     } 
```

现在可见性没有魔法了，因为函数都可以看到类中声明的所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:13:27.420

1.  命名空间可以重新打开，新的东西可以在任何地方添加。课程不能重新开放——所有内容必须放在一个地方。

2.  函数原型在命名空间中是合法的，但在类中是不合法的。

你可以写

```
namespace n
{
    void foo();

    void bar()
    {
        foo();
    }

    void foo()
    {
    }
} 
```

但不是

```
class C
{
    void foo();

    void bar()
    {
        foo();
    }

    void foo()
    {
    }
} 
```

所以类更需要这样的特性，并且为它们实现它比为命名空间实现它要容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T09:52:26.830

好吧，也许是因为你在一个地方有你的类声明，编译器可以很容易地获取它的成员的信息。

另一方面，命名空间可以在大量不同的文件中包含它的内容，并且您不能指望编译器浏览它们，因为它首先不知道在哪里查找。

为避免这种情况，只需使用[函数原型](http://en.wikipedia.org/wiki/Function_prototype)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T09:57:57.470

我不确定，但我的想法是 a`class`在某种程度上是一个*对象*（使用不当），它的所有内部组件一起工作（一般来说），它的成员肯定需要它的方法。

但是命名空间不同，功能不相关。这意味着一个函数不打算与命名空间内的所有其他函数一起工作。

所以拆分声明和定义是你能做的最好的事情。

如果`foo()`需要`bar()`它最有可能在同一个声明文件中，并且会以这种方式工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T11:01:50.733

请参阅下面的标准报价

> **3.3.7 类范围[basic.scope.class]**
> 
> 1) 以下规则描述了类中声明的名称范围。1) 在类中声明的名称的潜在范围不仅包括名称声明点之后的声明区域，还包括其中的所有函数体、默认参数和非静态数据成员的大括号或均衡器类（包括嵌套类中的此类内容）。
> 
> 2) 在类 S 中使用的名称 N 应在其上下文中引用相同的声明，并且在 S 的完整范围内重新评估时。对于违反本规则的情况不需要诊断。

```
typedef int c;
enum { i = 1 };

class X {
     char v[i]; // error: i refers to ::i
                // but when reevaluated is X::i
     int f() { return sizeof(c); } // OK: X::c
     char c;
     enum { i = 2 };
}; 
```

# plone - 是什么让使用 Zopeskel 模板“原型”创建的包的“粘贴添加内容”失败？

> ID：11825905
> 
> 赞同：0
> 
> 时间：2012-08-06T09:47:26.883
> 
> 标签：plone, paster, zopeskel

情况如下：

*   新鲜的 Plone 4.2 扩建
*   使用 Zopeskel 2.21.1 和模板“原型”创建的新包，并使用 mr.developer 在我的构建中配置

尝试在我的包中添加一些内容类型失败：

```
[ajung@dev1 nva.aktionsmittel]$ bin/paster addcontent
Command 'addcontent' not known (you may need to run setup.py egg_info) 
```

运行 setup.py egg_info 没有帮助。

setup.py 包含：

```
setup.py:      paster_plugins=["ZopeSkel"] 
```

setup.cfg 包含：

```
[zopeskel]
template = archetype 
```

为了使“粘贴添加内容”工作，本地命令背后的魔力是什么？它应该在其他情况下工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T12:18:22.407

*ZopeSkel 2 问题*

您正在遵循一个糟糕的教程。请确保

*   您遵循此处的特定说明[http://collective-docs.readthedocs.org/en/latest/getstarted/paste.html#adding-zopeskel-to-your-buildout](http://collective-docs.readthedocs.org/en/latest/getstarted/paste.html#adding-zopeskel-to-your-buildout) - paste 命令必须来自构建

*   如果您没有遵循上面的链接，请提供指向您遵循其说明的页面的链接，我可以烧掉该页面，因为它包含误导性说明。

*   确保您使用的贴纸来自 buildout（从您的命令行看来并非如此）。

*   `eggs =` 确保您的鸡蛋在部分中正确注册

*   确保您的 setup.py 包含必要的样板[http://collective-docs.readthedocs.org/en/latest/getstarted/paste.html#how-paster-local-commands-work](http://collective-docs.readthedocs.org/en/latest/getstarted/paste.html#how-paster-local-commands-work)（注意：示例是 ZopeSkel 3+）

这是让 paster 正确了解您的 egg 及其依赖项的方法，因此本地命令可以工作。

*ZopeSkel 3 问题（看似无关）*

`src`ZopeSkel 最近发生了变化，这意味着如果您使用 ZopeSkel 3+，则在运行命令时需要在文件夹中。

请参阅此处的注释：

[https://github.com/collective/templer.plone.localcommands/#executing-local-commands](https://github.com/collective/templer.plone.localcommands/#executing-local-commands)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T05:10:02.030

为了运行 paster 本地命令，必须从包含 .egg-info 目录（或其中的子目录）的同一目录调用它。如果paterns 找不到.egg-info 目录，它就无法运行本地命令。Paster 使用 .egg-info 目录的位置来定位 setup.cfg，然后使用它来确定是否有任何本地命令入口点可用。

检查您的包内是否生成了 .egg-info 目录，并且您正在从同一位置或子文件夹调用 paster。

# php - 如何使用 SimpleXMLElement 库生成 xml？

> ID：11825908
> 
> 赞同：0
> 
> 时间：2012-08-06T09:47:41.587
> 
> 标签：php, xml, simplexml

我正在添加带有名称空间的属性。看起来我应该以某种方式注册命名空间，但我仍然不知道答案:'( 我的 xml shold 看起来是这样的：

```
 <?xml version="1.0"?>
<WebOrders xmlns="http://microsoft.com/wsdl/types/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <WebOrder WebOrderId="weborder_id" EComChannelId="1" OrderNo="1" OrderDate="2012-08-03 15:17:42">
        <DefaultLocation  xsi:nil="true"/>
        <GlobalDiscountReason GlobalDiscountReasonId="1" GlobalDiscountAmount="0.00"/>
        <DefaultShippingMethod ShippingMethodId="shipping_id"/>
    </WebOrder>
</WebOrders> 
```

但我不能添加**xsi:nil="true"**部分。

```
<?php
class XmlGeneration
{
    public function _construct()
    {
        header('Content-Type: text/xml');
    }

    public function generateXml($params)
    {
        $webOrders = '<WebOrders xmlns="http://microsoft.com/wsdl/types/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"></WebOrders>';
        $webOrders = new SimpleXMLElement($webOrders);
        $this->generateWebOrder($webOrders);
        echo $webOrders->asXML();
    }

    public function generateWebOrder(&$webOrders)
    {
        $result = array(
            'weborder_id' => 1,
            'order_no' => 1,
            'order_date' => 1,
            'discount_id' => 1,
            'discount_amount' => 1,
            'shipping_id' => 1,
            'location_id' => null
        );
        foreach($results as $result)
        {
            $webOrder = $this->createNode($webOrders, 'WebOrder', array('WebOrderId' => $result['weborder_id'], 'EComChannelId' => $this->_channel_id, 'OrderNo' => $result['order_no'], 'OrderDate' => $result['order_date']));

            $this->createNode($webOrder, 'DefaultLocation', array('DefaultLocationId' => $result['location_id']));
            $this->createNode($webOrder, 'GlobalDiscountReason', array('GlobalDiscountReasonId' => $result['discount_id'], 'GlobalDiscountAmount' => $result['discount_amount']));
            $this->createNode($webOrder, 'DefaultShippingMethod', array('ShippingMethodId' => $result['shipping_id']));
        }
    }

    private function createNode(&$parent, $child, $attribute=array())
    {
        $$child = $parent->addChild($child);
        foreach($attribute as $k => $v)
        {
            if($v)
            {
                $$child->addAttribute($k, $v);
            }
            else
            {
                $$child->addAttribute('nil', 'true', 'xsi');
                break;
            }
        }
        return $$child;
    }
} 
```

这是我的代码，我希望使用 registerXPathNamespace 进行命名空间注册，但我之前的每一次试用都返回给我**只要。**

# java - log4j: How does a Socket Appender work?

> ID：11825917
> 
> 赞同：10
> 
> 时间：2012-08-06T09:48:05.143
> 
> 标签：java, log4j

I'm not sure how Socket Appender works. I know that logging events are sent to particular port. Then we can print logs on a console or put into a file.

My question is more about the way logs are sent. Is there e.g. one queue? Is it synchronous or asynchronous? Can using it slow down my program?

I've found some info [here](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/net/SocketAppender.html), but it isn't clear for me.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-06T10:08:47.123

From the SocketAppender documentation

> Logging events are automatically buffered by the native TCP implementation. This means that if the link to server is slow but still faster than the rate of (log) event production by the client, the client will not be affected by the slow network connection. However, if the network connection is slower then the rate of event production, then the client can only progress at the network rate. In particular, if the network link to the the server is down, the client will be blocked.
> 
> On the other hand, if the network link is up, but the server is down, the client will not be blocked when making log requests but the log events will be lost due to server unavailability.

Since the appender uses the TCP protocol, I would say the log events are "sort of synchronous".

Basically, the appender uses TCP to send the first log event to the server. However, if the network latency is so high that the message has still not been sent by the time a second event is generated, then the second log event will have to wait (and thus block), until the first event is consumed. So yes, it would slow down your application, if the app generates log events faster than the network can pass them on.

As mentioned by @Akhil and @Nikita, JMSAppender or AsyncAppender would be better options if you don't want the performance of your application to be impacted by the network latency.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-06T09:56:46.530

Socket Appender sends the logs as a serialized Obect to a SocketNode or log server. In the appender the Connector Thread with a configured reconnectionDelay will check for the connection integrity and will dump all the logs if the connection is not initialized or disconnected.Hence no blocking on the application flow. If you need better JMS features in sending log info across JVM try [JMSAppender](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/net/JMSAppender.html).

1.  Log4j JMS appender can be used to send your log messages to JMS broker.The events are serialized and transmitted as JMS message type ObjectMessage.

You can get a sample program [HERE](http://activemq.apache.org/how-do-i-use-log4j-jms-appender-with-activemq.html).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T10:01:23.167

It seems to be synchronous (checked sources) but I may be mistaken. You can use [AsyncAppender](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/AsyncAppender.html) to make it asyncrhonous. See [this](http://ricardozuasti.com/2009/asynchronous-logging-with-log4j/).

# python - 参数有问题

> ID：11825923
> 
> 赞同：1
> 
> 时间：2012-08-06T09:48:38.710
> 
> 标签：python

我试图编写这个将批量重命名文件扩展名的小脚本。我传递了三个参数，文件所在的目录、当前扩展名和新扩展名。

我得到的错误是

```
python batch_file_rename_2.py c:\craig .txt .html
Traceback (most recent call last):
  File "batch_file_rename_2.py", line 13, in <module>
  os.rename(filename, newfile) 
WindowsError: [Error 2] The system cannot find the file specified 
```

代码是

```
import os
import sys

work_dir=sys.argv[1]
old_ext=sys.argv[2]
new_ext=sys.argv[3]

files = os.listdir(work_dir)
for filename in files:
    file_ext = os.path.splitext(filename)[1]
    if old_ext == file_ext:
        newfile = filename.replace(old_ext, new_ext)
        os.rename(filename, newfile) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T09:51:41.747

`os.listdir`仅返回文件名，不返回完整路径。用于`os.path.join`重新创建正确的路径：

```
for filename in files:
    file_ext = os.path.splitext(filename)[1]
    if old_ext == file_ext:
        newfile = filename.replace(old_ext, new_ext)
        os.rename(
            os.path.join(work_dir, filename), 
            os.path.join(work_dir, newfile)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:52:34.490

当您不在目录中时（您不在），您必须指定全名：

```
os.rename(os.path.join(work_dir, filename), os.path.join(work_dir, newfile)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T09:52:55.463

问题是`os.listdir`只返回没有路径的文件名，你应该使用函数`os.path.join`来加入`work_dir`和`filename`.

而且行`newfile = filename.replace(old_ext, new_ext)`看起来很不安全，因为它不仅可以替换扩展名，还可以替换文件名的一些意外部分。

`os.path`例如，您可以使用函数以更安全的方式替换文件扩展名`splitext`。

# azure-storage - 访问 Windows azure blob 存储

> ID：11825927
> 
> 赞同：2
> 
> 时间：2012-08-06T09:49:00.270
> 
> 标签：azure-storage, azure-blob-storage

我正在尝试访问我在 Windows Azure 上的博客存储，但每次我浏览到

```
http://my_storageAcount.blob.core.windows.net 
```

它会产生 400 错误（错误请求）。谢谢你的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:39:40.120

[http://my_storageAcount.blob.core.windows.net](http://my_storageAcount.blob.core.windows.net)是您的 Azure Blob 存储帐户的地址。如果您尝试访问 blob，则需要指定容器名称和 blob 名称。假设您在“mycontainer”中有一个名为“MyBlob”的 blob **，****您**可以通过指定 [http://my_storageAcount.blob.core.windows.net/mycontainer/MyBlob](http://my_storageAcount.blob.core.windows.net/mycontainer/MyBlob)来检索它。

 **对于 Blob 上的其他操作，Microsoft 已发布 REST api 以与 Blob 一起使用。要了解更多信息，请[访问此处](https://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/)。如果您正在使用私有 blob 并坚持在浏览器中访问它们。您需要拥有私有 blob 的共享访问签名才能访问它们直接在浏览器中。如需了解有关共享访问签名的更多信息，请访问[此处。](http://msdn.microsoft.com/en-us/library/windowsazure/ee395415)

希望它有帮助。快乐编码！**

# php - 发送电子邮件时可以使用代理吗？

> ID：11825931
> 
> 赞同：0
> 
> 时间：2012-08-06T09:49:12.533
> 
> 标签：php, email

我正在使用 phpmailer，但我的服务器被列入黑名单，可能是因为其他不良网站。我知道在使用 cURL 时可以使用代理；

```
 curl_setopt($ch, CURLOPT_PROXY, "88.65.120.46:80"); 
```

我的问题是，发送电子邮件时是否可以使用代理？谢谢。

# css - 样式化禁用的 dijits，以便仅显示文本

> ID：11825934
> 
> 赞同：0
> 
> 时间：2012-08-06T09:49:24.773
> 
> 标签：css, dojo

也许你们中的一些人有设计 Dojo dijits 的经验。我想要做的是覆盖正确的 CSS 类，因此禁用/只读类型的文本框、组合框、过滤选择输入仅显示文本/选定值，没有元素的边框和灰色背景。

希望有人知道所涉及的课程或关于我如何实现这一目标的另一个想法。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T01:44:13.743

我认为`dijitDisabled`是您正在寻找的课程。我不确定你到底想做什么，但我用一个按钮做了这个简单的例子。它以我认为您正在寻找的方式显示一个启用的按钮和一个禁用的按钮。[这是 jsfiddle 中的运行示例](http://jsfiddle.net/2jADc/)。

以下是各个部分：

HTML：

```
<div id="btn"></div>
<div id="btnDisabled"></div> 
```

CSS：

```
@import "http://ajax.googleapis.com/ajax/libs/dojo/1.7.2/dijit/themes/claro/claro.css";

.dijitDisabled.dijitButtonDisabled .dijitButtonNode {
    background-image: none;
    border: none;
    background-color: transparent;
} 
```

JS：

```
require(["dijit/form/Button"], function(Button) {
    var button = new Button({ label: "Enabled" },"btn");     
    var buttonDisabled = new Button({ label: "Disabled", disabled: true },"btnDisabled");         
});​ 
```

​我假设道场 1.7。

我希望它有所帮助，

# c++ - 如何在 C++ 中删除/插入数组的元素

> ID：11825937
> 
> 赞同：2
> 
> 时间：2012-08-06T09:49:36.830
> 
> 标签：c++, c, arrays, visual-c++

所以第一个问题，我在这里有这个数组：

```
arr[] = {1; 2; 3; 4; 5} 
```

如果我输入例如：3 第三个元素将被删除并替换为下一个值。像这样：

```
arr[] = {1; 2; 4; 5} 
```

我在这里得到了这个代码：

```
for(int i = 2; i < n; i++)
{
    arr[i] = arr[i + 1];
    arr[n - 1] = 0;
} 
```

但结果是

```
arr[] = {1; 2; 4; 0; 0} 
```

请修复代码

第二个问题，我也将输入“3”，但不是删除第三个元素并替换它，而是插入一个新的第三个元素，即“50”，以便：

```
arr[] = {1; 2; 3; 4; 5} 
```

会变成：

```
arr[] = {1; 2; 50; 3; 4; 5} 
```

我仍然是编程和 C++ 的菜鸟，这是我的第一个问题，所以请好好回答：D

非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T09:51:57.100

不，元素永远不会被“删除”。数组大小在编译时确定，并将被固定。

如果您需要在运行时调整数组大小，请考虑改用[std::vector](http://www.cplusplus.com/reference/stl/vector/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T10:11:00.357

第一个问题的问题是您将数组的最后一个元素设置为 0 for 循环的每次迭代，因此在您的循环第一次通过后，它将是`{1, 2, 4, 4, 0}`, next `{1, 2, 4, 0, 0}`。
只需将`arr[n - 1] = 0;`for 循环放在外面就足够了。同样：
编辑：更新循环控制语句，使其不会越界，感谢 hmjd

```
for(int i = 2; i < n-1; i++) 
{
    arr[i] = arr[i + 1];   
}
arr[n - 1] = 0; 
```

该元素本身不会被删除，它只会被设置为 0，其余的将向左移动。

至于第二个问题：您必须创建一个更大的新数组才能添加任何内容。
您需要的是`malloc`,`calloc`和`free`函数。熟悉它们和一般的动态分配。一般的想法是`malloc`或`calloc`一个比当前数组大一号的数组，将元素复制到要插入另一个元素的空间，插入该元素，然后复制数组的其余部分。之后，不要忘记`free`旧数组并将其设置为指向新数组的指针。

```
int size = 4;
int arr[] = (int *) calloc(size, sizeof(int));
int insertTo = 2;
int insert = 50;
int tempArr[] = (int *) calloc(size+1, sizeof(int));
for(int i = 0, int j = 0; i < size; i++, j++) {
    if(j == insertTo) {
        tempArr[j] = insert;
        i--; //to offset the cycle incrementation
    } else {
        tempArr[j] = arr[i];
    }
}
free(arr);
arr = tempArr;
size++; // Don't forget to update the size 
```

为简洁起见，省略了分配检查。
第一个问题可以使用类似的方法来更改数组的大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T09:54:42.747

移动

```
arr[n - 1] = 0; 
```

循环后得到1；2；4；5个；0：

```
for(int i = 2; i < n - 1; i++)
    arr[i] = arr[i + 1];
arr[n - 1] = 0; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-23T20:00:21.613

使用标准 C++ 库函数插入或删除数组元素并调整其大小。

对于在数组中插入元素[std::vector::insert](http://www.cplusplus.com/reference/vector/vector/insert/)

用于从数组[std::vector::erase中删除或擦除元素](http://www.cplusplus.com/reference/vector/vector/erase/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T09:55:32.660

`arr[] = {1; 2; 3; 4; 5}`将分配足够的内存来容纳 5 个（不少于，不多）整数值。

当您在代码中移动元素时，您就是在这样做 - 移动。这些操作不会释放或添加“内存”；

如果由于此类插入/删除操作而确实需要更改数组的大小，**则必须**分配一个适当大小的新数组并将旧数组中的数据复制到新数组中（并记住释放第一个数组的不再使用的内存，如果合适的话）。

欢迎使用 C++，工程师**负责管理资源**（与许多脚本或其他“高级”语言不同）。

旁注：虽然您的第一个代码正在移动元素并在该内存块的末尾留下一个未使用的“尾巴”，但第二个示例将访问*超出*为此数组分配的内存块的内存，从而导致内存访问冲突（以及更多比任何体面的操作系统都可能终止您的程序）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-06T09:56:23.730

如果您使用的是 C++，那么您可以使用标准模板库中的容器。您在代码示例中使用的数组是 C 样式的数组。虽然在 C++ 代码中使用 C 风格的数组是完全可以接受的，但使用 std::vector 会更好，因为它在运行时调整数组大小方面具有更大的灵活性。在大多数情况下，C 样式数组和 std::vector 之间的性能差异可以忽略不计。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-09T15:18:38.750

使用向量

```
#include <iostream>
#include <vector>
#include <algorithm>

using namespace std;

template<typename T>
void print(const vector<T> &v){
    typename vector<T>::const_iterator it;
    for(it=v.begin(); it!=v.end(); ++it)
        cout << *it << ' ';
    cout << endl;
}

int main (){
    const int arr[] = {1, 2, 3, 4, 5};
    const int size = sizeof(arr)/sizeof(int);

    vector<int> v(&arr[0], &arr[size]);

    v.erase(v.begin() + 2);
    print(v);//1 2 4 5

    v.insert(v.begin()+2, 3);
    print(v);//1 2 3 4 5
    v.insert(v.begin()+2, 50);
    print(v);//1 2 50 3 4 5
} 
```

# gcc - Ada 链接器“-mwindows”选项终止文本输出

> ID：11825945
> 
> 赞同：1
> 
> 时间：2012-08-06T09:49:55.487
> 
> 标签：gcc, ada

我正在使用 GNAT GPS 2012。由于某些库，我必须使用“-mwindows”选项来成功链接我的程序（它实际上是混合的 Ada/C++）。

该程序在 2 种情况下运行良好：1）如果通过 GNAT 启动器启动它（我的意思是放置在工具栏顶部的三角形按钮） - 在这种情况下一切正常 2）如果从 windows cmd 或资源管理器单独启动“.exe”并且不要从 Ada 端输出任何文本。

但是（！）如果与 windows cmd 或资源管理器分开启动程序：1）调用 Put 或 Put_Line 函数 -> 程序立即完成（没有错误，没有异常，只是退出） 2）如果从 C++ 端调用 printf 它将是忽略

我在单独的混合 Ada/C++ 简单示例中确定，当“-mwindows”链接器选项添加到 Ada 链接器时会出现此问题。

我也尝试将 dll 从 GNAT 项目复制到 exe 文件夹，但没有帮助。

你们能帮帮我吗，伙计们？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T03:57:02.980

这可能是由于未能[启动 Ada RTL](http://gcc.gnu.org/onlinedocs/gcc-4.7.1/gnat_ugn_unw/Interfacing-to-C.html#Interfacing-to-C)造成的。

我认为你想要的操作是`adainit()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T19:50:07.107

根据[FSF GNAT User Manual](http://gcc.gnu.org/onlinedocs/gcc-4.7.1/gnat_ugn_unw/CONSOLE-and-WINDOWS-subsystems.html#CONSOLE-and-WINDOWS-subsystems)，`-mwindows`表示没有控制台；那么`Put_Line`or`printf`输出会去哪里呢？我的猜测是 Ada 调用引发了一个异常，它（默默地）结束了程序，而 C 调用实际上什么都不做。

不过，如果我是对的，我无法解释 GPS 中的行为。

# php - PHP - 为什么新的 SQLSRV 驱动程序比旧的 mssql 驱动程序慢？

> ID：11825949
> 
> 赞同：6
> 
> 时间：2012-08-06T09:50:12.640
> 
> 标签：php, sql-server

我有很多组件使用 PHP 中的旧驱动程序 mssql。我想切换到 Microsoft 的新驱动程序 SQLSRV，但我的查询速度要慢很多。

我有许多处理 +400 000 行的进程。

这是我对**40 000 行**的测试：

*   testOldDriver_mssql = 第 40000 行：1 秒
*   testNewDriver_nonPDO = 第 40000 行：7 秒
*   testNewDriver_PDO = 第 40000 行：4 秒

这是我最大的过程（**+480 000 行**）：

*   testOldDriver_mssql = 行 484856：27 秒
*   testNewDriver_nonPDO = 行 484856：120 秒
*   testNewDriver_PDO = 行 484856：47 秒
*   testPDO_ODBC = 行 484856：24 秒

新驱动程序肯定更慢吗？还是我错过了什么？

**编辑1：**

“旧驱动程序”是指已弃用的 MSSQL 库（请参阅 php.net/mssql）。

新驱动程序是由 Microsoft 直接制造的驱动程序（参见[http://www.microsoft.com/en-us/download/details.aspx?id=20098](http://www.microsoft.com/en-us/download/details.aspx?id=20098)）

我的查询是

```
SELECT * FROM myTable 
WHERE pdvSaisie IN 
       (SELECT number FROM pdvs WHERE nom LIKE 'ZUEE %') 
```

并使用直接`query()`（如果我使用准备好的语句，则没有准备和相同的结果）。

**编辑2：**

添加了 PDO/ODBC 测试。惊喜，它更快：o

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T06:14:58.447

已知错误： [http ://social.msdn.microsoft.com/Forums/en-US/sqldriverforphp/thread/6c4d2c96-6ddc-4872-a5b6-51daddf3a095/](http://social.msdn.microsoft.com/Forums/en-US/sqldriverforphp/thread/6c4d2c96-6ddc-4872-a5b6-51daddf3a095/)

解决方法：使用 PDO/ODBC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-19T20:56:22.983

为了加快获取速度高达 3 倍，请`"MultipleActiveResultSets"=>'0'`在您的 sqlsrv_connect 连接选项中使用。

前任：

```
$db = sqlsrv_connect('127.0.0.1', array('Database'=>'dbname','UID'=> 'sa','PWD'=> 'pass',"CharacterSet" =>"UTF-8","ConnectionPooling" => "1"
                    ,"MultipleActiveResultSets"=>'0'

            )); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-21T01:07:00.133

我的驱动程序 SQLSRV 也有类似的问题，在我的情况下，最终解决方案是将选项“TraceOn”更改为“0”，此配置会阻止驱动程序的跟踪。

有关更多详细信息，请参阅[连接选项](https://msdn.microsoft.com/en-us/library/ff628167%28v=sql.105%29.aspx)

例子：

```
$connectionInfo = array( "Database"=>"dbName", "TraceOn" => "0");
$conn = sqlsrv_connect( $serverName, $connectionInfo); 
```

# iphone - iOS5 是否支持 datepicker html 控件？

> ID：11825950
> 
> 赞同：0
> 
> 时间：2012-08-06T09:50:32.350
> 
> 标签：iphone, html, ios, ipad, ios5

[这篇文章](http://davidbcalhoun.com/2011/new-mobile-safari-stuff-in-ios5-position-fixed-overflow-scroll-new-input-type-support-web-workers-ecmascript-5)说是的。但我没有成功实现它。有人有一些关于html的例子吗？但是在早期版本的 iOS 上，如何在 html 中实现 datepicker？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:14:48.497

它不是在 HTML 中实现的 datepicker，它是一个简单的 HTML Drop-down(SELECT) 列表，分别带有日、月、年组件，但是当在 iPhone Web 视图或浏览器中查看此 HTML 时，它会在 PICKER 中自动转换。

# php - 最初隐藏 div，样式设置为 display:block

> ID：11825951
> 
> 赞同：-1
> 
> 时间：2012-08-06T09:50:33.347
> 
> 标签：php, javascript, jquery, css

我正在使用 CSS 样式`display:block`并基于以下条件`none`隐藏： If facebook has been blocked display else display 。`div``fb_Blockedwizard``fb_wizard`

当我加载或刷新页面时，`div fb_Blockedwizard`它会显示几秒钟然后`div`隐藏。

**我需要`div`在页面加载或刷新期间隐藏**

下面是我正在使用的代码：

```
<script>
  $(document).ready(function() {
    hideFbBlockedwizard();
    hidefbwizard();
    var callbackOnSuccess = function(src) {
      hideFbBlockedwizard();
      showwizard();
      return false;
    };
    var callbackOnFailure = function(src) {
      hidefbwizard();
      showFbBlockedwizard();
    };
    checkAvailability("http://www.facebook.com/favicon.ico", 
      callbackOnSuccess,callbackOnFailure);
  });

  function  showFbBlockedwizard() {
    document.getElementById('fb_Blockedwizard').style.display='block';
    document.getElementById('fade').style.display='block';
  }   

  function hideFbBlockedwizard() {  
    document.getElementById('fb_Blockedwizard').style.display='none';
    document.getElementById('fade').style.display='none';
  }

  function checkAvailability(src, callbackSuccess, callbackFailure) {
    $("<img/>").attr("src", src).load(function() {
      callbackSuccess(src);     
  }).error(function() {
    callbackFailure(src);
  });
}

function showwizard() {
  document.getElementById('fb_Blockedwizard').style.display='none';
  document.getElementById('fb_wizard').style.display='block';
  document.getElementById('fade').style.display='block';    
} 
```

这是我的CSS：

```
.white_content {
        /*display: none;*/
        display:none;
        position: absolute;
        top: 25%;
        left: 25%;
        width: 46%;
        height: 37%;
        padding: 16px;
        border: 16px solid #999;
        background-color: white;
        z-index:1002;
        overflow: auto;
}
.white_content1 {
        display:none;
        position: absolute;
        top: 13%;
        left: 18%;
        width: 60%;
        height: 63%;
        padding: 16px;
        border: 16px solid #999;
        background-color: white;
        z-index:1002;
        overflow: auto;
} 
```

这是我的PHP：

```
 <div id="fb_wizard" class="white_content">
  <?php include  'fb_blocked.php'; ?>
  </div>
  <div id="fb_Blockedwizard" class="white_content1">
         <?php include  'fb_blocked_email.php'; ?> </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:54:14.853

是`fb_Blockedwizard`您布局的一部分吗？如果是这样，那么直接给它`display:none`HTML/CSS 中的样式。将其设置为`display:block`每个 javascript。

# .net - 从坐标保存地图图像

> ID：11825956
> 
> 赞同：2
> 
> 时间：2012-08-06T09:50:40.373
> 
> 标签：.net, google-maps, map

我需要做以下事情：我有一个划定地图区域的坐标列表。使用这些坐标，我需要使用地图提供者（例如：google maps、bing 等）可视化该区域并将获得的图像保存到文件中。

我正在.net 2.0 框架中开发 ac# 应用程序，是否存在可以帮助我做到这一点的库或调用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T13:15:09.280

您可以尝试使用 Google Static Maps API。由于来源：[https ://developers.google.com/maps/documentation/staticmaps/#Overview](https://developers.google.com/maps/documentation/staticmaps/#Overview)

> Google 静态地图 API 返回图像（GIF、PNG 或 JPEG）以响应通过 URL 的 HTTP 请求。对于每个请求，您可以指定地图的位置、图像的大小、缩放级别、地图的类型以及可选标记在地图上的位置的位置。您还可以使用字母数字字符来标记您的标记。
> 
> 静态地图 API 图像嵌入在标记的 src 属性中，或在其他编程语言中的等效属性中。

当您获得 img 源时，您可以在其中操作抛出 javascript（用于获取：[Get image data in JavaScript？](https://stackoverflow.com/questions/934012/get-image-data-in-javascript) 并保存：[http ://www.html5canvastutorials.com/advanced/html5-canvas-save-drawing-as-an- image/](http://www.html5canvastutorials.com/advanced/html5-canvas-save-drawing-as-an-image/)）或使用服务器代码：[https ://stackoverflow.com/a/1272126/157666](https://stackoverflow.com/a/1272126/157666)

# cocos2d-iphone - Box2d 调试绘图有时不显示，但主体显示正常

> ID：11825958
> 
> 赞同：0
> 
> 时间：2012-08-06T09:50:41.513
> 
> 标签：cocos2d-iphone, box2d

在 CCLayer 的子类中，有以下两种方法：

```
-(void)setupDebugDraw 
{
    _debugDraw = new GLESDebugDraw(PTM_RATIO * [[CCDirector sharedDirector] contentScaleFactor]);
    world->SetDebugDraw(_debugDraw);

    uint32 flags = 0;
    flags += b2DebugDraw::e_shapeBit;
    flags += b2DebugDraw::e_jointBit;
    flags += b2DebugDraw::e_aabbBit;
    flags += b2DebugDraw::e_pairBit;
    flags += b2DebugDraw::e_centerOfMassBit;
    _debugDraw->SetFlags(flags);

    // (TEST CODE) BELOW DOESN'T SHOW!
    _debugDraw->DrawPoint(b2Vec2(0,0), 500.0f, b2Color(255, 255, 255));
}

-(void) draw {
    glDisable(GL_TEXTURE_2D);
    glDisableClientState(GL_COLOR_ARRAY);
    glDisableClientState(GL_TEXTURE_COORD_ARRAY);

    if (world) {
        // BODIES SHOW OK
        world->DrawDebugData();

        // (TEST CODE) BELOW DOESN'T SHOW EITHER!
        _debugDraw->DrawPoint(b2Vec2(0,0), 500.0f, b2Color(255, 255, 255));
    }

    glEnable(GL_TEXTURE_2D);
    glEnableClientState(GL_COLOR_ARRAY);
    glEnableClientState(GL_TEXTURE_COORD_ARRAY);    
} 
```

在上面的代码中，有两个测试代码，都没有显示任何内容。

Xcode 4.3.2 IOS 模拟器 5.1 Box2D 2.1.2

经过一番尝试： _debugDraw->DrawPoint(b2Vec2(0,0), 50.0f, b2Color(255, 0, 0)); // NO DRAW _debugDraw->DrawPoint(b2Vec2(1,1), 50.0f, b2Color(255, 0, 0)); // 画好了！！

似乎有一个或多个 0 的绘制点根本不会绘制！即使尺寸足够大！

```
void GLESDebugDraw::DrawPoint(const b2Vec2& p, float32 size, const b2Color& color)
{
    glColor4f(color.r, color.g, color.b,1);
    glPointSize(size);
    GLfloat             glVertices[] = {
        p.x * mRatio, p.y * mRatio
    };
    glVertexPointer(2, GL_FLOAT, 0, glVertices);
    glDrawArrays(GL_POINTS, 0, 1);
    glPointSize(1.0f);
} 
```

由于我不了解openGL api，这里有什么可疑的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:54:57.437

调试绘图的 zindex 为 0，因此如果您的精灵的 zindex > 0，您将看不到调试绘图。

# asp.net - asp.net和ms访问如何根据联合字段获取数据

> ID：11825965
> 
> 赞同：-1
> 
> 时间：2012-08-06T09:50:53.520
> 
> 标签：asp.net, ms-access

我的 asp.net 应用程序中有两个 MS 访问表（名为`categories`& `books`）。第一个表 ( `Categories`) 有两个名为`Category_ID`和的字段`Category_Name`。

第二个表有三个名为 的字段`Book_ID`，`Category_ID`并且`Bookname`(category_id 是两个表中的联合字段。在某些页面中，我有`category_name`并且我想获取具有该`category`名称的书籍行。换句话说，我应该首先获得`category id`基于该名称的`category name`然后选择来自 categoryID 匹配的书籍。但我不知道如何。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:57:06.657

```
SELECT Book.* FROM 
Book INNER JOIN Category ON Book.Category_ID = Category.Category_ID
WHERE Category.category_name = 'TheName' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T09:58:50.913

您将使用连接，例如：

```
select books.Bookname
,categories.Category_Name
from books
inner join categories on categories.Category_ID = books.Category_ID
where categories.Category_Name = 'your-category' 
```

# jquery - 在 JSF2.0 中打印

> ID：11825968
> 
> 赞同：0
> 
> 时间：2012-08-06T09:51:06.080
> 
> 标签：jquery, jsf-2

我正在使用 JSF 2.0 和 Jquery ，当用户单击“打印”按钮时，我想打印一个面板组而不是整个页面，但页面不应该刷新，原因是加载页面后我使会话无效。在页面中，我显示了参考号码并与我们联系。任何人都可以在这种情况下帮助我。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:06:59.940

只需提供一个带有`media="print"`.

```
<h:outputStylesheet name="print.css" media="print" /> 
```

*（这将有效地在 HTML 中生成以下内容`<head>`）*

```
<link rel="stylesheet" type="text/css" href="/contextname/resources/print.css" media="print" /> 
```

在`print.css`文件本身中，只需将`display`属性设置为`none`. 例如

```
#header, #menu, #footer, #title {
    display: none;
} 
```

在以下 JSF 标记示例的情况下，将仅打印所需的面板组。

```
<div id="header">...</div>
<div id="menu">...</div>
<div id="content">
    <h2 id="title">...</h2>
    <h:panelGroup>...</h:panelGroup>     <!-- Only this one will be printed. -->
</div>
<div id="footer">...</div> 
```

### 也可以看看：

*   [CSS 媒体类型](http://www.w3.org/TR/CSS2/media.html)

# c - 如何获取结构数组中某些结构成员的地址

> ID：11825970
> 
> 赞同：0
> 
> 时间：2012-08-06T09:51:28.303
> 
> 标签：c, struct, member, memory-address

我尝试获取结构数组中某个结构成员的地址，但我不想使用该成员的名称。

它应该是这样的：

```
typedef struct{               
  unsigned char MrChar;
  unsigned short MrShort;
  unsigned long MrLong;
  unsigned char MrArray[5];
}tModule;

static tModule taModulesArray[MODULES_AMOUNT] = {  // MODULES_AMOUNT = 2
  {0x22, 0x3298, 0x92324583, "djsoe"}, // Module 1
  {0x33, 0x1843, 0x65644113, "gskwc"}, // Module 2  
};

unsigned long usGetMemberAddr(unsigned long ulModule, unsigned long ulMember){
  unsigned long Address;
  Address = abs(taModulesArray_BaseAddress - taModulesArray[ulModule].[ulMember]);
  return Address;
} 
```

我需要它来快速修改不同结构中的配置（在 EEPROM 中）。所以我尝试做一个函数，它需要模块数量和模块成员之一的索引，并返回适当成员的偏移量。

在返回之前是否有可能出现类似该行的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T09:57:38.083

您可以通过使用辅助数组来做到这一点，使用[`offsetof`](http://linux.die.net/man/3/offsetof)：

```
typedef struct{               
  unsigned char MrChar;
  unsigned short MrShort;
  unsigned long MrLong;
  unsigned char MrArray[5];
}tModule;

size_t offsets[] = {
  offsetof(tModule, MrChar),
  offsetof(tModule, MrShort),
  offsetof(tModule, MrLong),
  offsetof(tModule, MrArray)
};

unsigned long usGetMemberAddr(unsigned long ulModule, unsigned long ulMember){
  unsigned long Address;
  Address = abs((char *)&taModulesArray            // base of taModulesArray
             - ((char *)&taModulesArray[ulModule]  // start of this module
                + offsets[ulMember]));             // + offset of member
  return Address;
} 
```

请注意，您的公式可以简化为：

```
 Address = (char *)&taModulesArray[ulModule]
           - (char *)&taModulesArray
           + offsets[ulMember]; 
```

甚至更进一步：

```
 Address = ulModule * sizeof(tModule) + offsets[ulMember]; 
```

* * *

注：`offsetof`定义在`stddef.h`. 有关更多信息，请参阅此[Wikipedia 文章](http://en.wikipedia.org/wiki/Offsetof)。

如果您的编译器没有此功能，则一种实现`offsetof`可能是：

```
#define offsetof(st, m) \
     ((size_t) ( (char *)&((st *)0)->m - (char *)0 )) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:40:58.043

我们也可以使用下面的逻辑来找到结构中每个成员的偏移量，然后我们可以直接将其添加到结构变量特定实例的基地址中。

```
#define OFFSET(type, member)   ( (int) (& ( ((type *)(0))->member ) ) )

int find_offset(unsigned long ulMember)
{
    unsigned long off = 0;

    switch(ulMember)
    {
         case 1:
             off = OFFSET(tModule, MrChar);
             break;
         case 2:
             off = OFFSET(tModule, MrShorc);
             break;
         case 3:
             off = OFFSET(tModule, MrLong);
             break;
         case 4:
             off = OFFSET(tModule, MrArray);
             break;
    }

    return off;
}

unsigned long usGetMemberAddr(unsigned long ulModule, unsigned long ulMember)
{   
    unsigned long Address;   

    Address = (unsigned long)&taModulesArray[ulModule] + find_offset(ulMember);

    return Address; 
} 
```

# silverlight-4.0 - 分析 Lightswitch 应用程序？

> ID：11825979
> 
> 赞同：1
> 
> 时间：2012-08-06T09:51:58.310
> 
> 标签：silverlight-4.0, profiler, visual-studio-lightswitch, red-gate-ants

我们正处于基于 Lightswitch 的应用程序的需求阶段。I was looking for code profiling support for lightswitch applications and have tried Ants 7.1 which we already have licence for, but it does not appear to work when the .xap file is chosen for profiling (choosing type as a Silverlight 4 app). Profiler 在“启动”后立即停止，并没有真正发生任何事情。Red Gate[在这里](http://www.red-gate.com/supportcenter/Content/ANTS_Performance_Profiler/help/7.3/APP_Silverlight)提到 了对浏览器外 Silverlight 应用程序的支持。

看起来 VS.NET 代码分析器也不能像预期的那样与 Lightswitch 一起工作。是否有真正适用于 Lightswitch 应用程序的代码分析器？由于 lightswitch 基本上是一个 silverlight 应用程序，是否存在无法分析 .xap 文件的 silverlight 配置/支持问题？

PS：我使用Microsoft 的[这个](http://code.msdn.microsoft.com/LightSwitch-HTML-Preview-b34b9311)LightSwitch 示例进行检查。

谢谢！

# java - 在 Intellij Idea 中将资源文件添加到工件

> ID：11825980
> 
> 赞同：1
> 
> 时间：2012-08-06T09:51:59.753
> 
> 标签：java, resources, intellij-idea

我正在创建一个插件来反映并由主应用程序调用。这个插件使用 xml 文件，我想让它成为嵌入式资源。我将插件构建为工件（JAR）。我的行动：

1) 将 xml 文件放到配置为 'trunk/res' 的目录中`'source root'`；

2)`'make module'`对目录'trunk/res'所在的模块执行动作；

3）进入插件我通过文件路径访问xml文件`dom = db.parse("trunk//res//resource.xml");`

但是当我从主应用程序调用插件时，我得到这个关于系统找不到文件的异常`'MainApp/trunk/trunk/res/resource.xml'`。我想我没有正确地提取资源，但是如何正确地提取资源呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:36:14.523

尝试调用：

```
System.out.println(getClass().getProtectionDomain().getCodeSource().getLocation()); 
```

看看你是否真的从罐子里打电话。进而

```
InputStream xmlFileStream = getClass().getClassloader().getResourceAsStream("res\\AIP_82.xml") 
```

# indexing - Cassandra 二级索引

> ID：11825983
> 
> 赞同：0
> 
> 时间：2012-08-06T09:52:28.713
> 
> 标签：indexing, cassandra

只是想学习 Cassandra 并尝试将 RDBMS 设计转换为 Canssandra。考虑到我的应用程序正在部署在多个数据中心。

数据库设计：

```
 A) CF : USER
              1) email_id - primary key
              2) fullname
              3) organization - ( I didnt create a separate table for organization )

       B) CF : ORG_USER

             1) organization - Primary Key
             2) email_id

             Here, my intention is to get users belong to an organization.
             Here, I can make the organization in the user table as secondary index, but heard that, this may hit the performance.
             Could you please clarify me which is the better approach? 
```

谢谢， Baskar.S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:06:17.647

只要基数低，组织可能是二级索引的良好候选者。换句话说，如果您有很多重复的组织值，请使用二级索引。如果没有，手动构建索引（正如您在 ORG_USER CF 中指出的那样）是一种很好的方法。

# tibco - Tibco BW - 启用日志

> ID：11825984
> 
> 赞同：3
> 
> 时间：2012-08-06T09:52:30.953
> 
> 标签：tibco, businessworks

如何在 TIBCO Admin 上启用日志？我想检查我发布给听众的任何文件。侦听器能够接收请求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:06:38.280

你可以设置

```
Trace.Startup=true
Trace.Task.*=true
Trace.JC.*=true
Trace.Engine=true
Trace.Debug.*=true 
```

在部署的 tra 文件中，然后重新启动应用程序并运行它。
然后检查位于 <install-path>\tibco\tra\domain\application\logs 文件夹中的详细日志文件。

请记住，所有手动设置将在重新部署后被清除。要使其永久保存，请将其设置在 <install-path>\tibco\bw\<version>\bin 文件夹中的 bwengine.tra 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-06T07:27:08.090

如果要为 TIBCO 经典管理员启用调试日志，则需要执行以下步骤： 在 \tra\domain\ 下的 hawkagent.cfg 文件中将“-tsm_traceLevel”参数设置为 -1。在 \tra\domain\ 下的 2 个 *.properties 文件中设置 logdebug=true 从 \tra\domain\ 下的日志文件夹中删除/备份文件 重新启动域的 admin 和 hawkagent

# spring - Spring Conversion Service：如何将字符串转换为列表 ?

> ID：11825992
> 
> 赞同：8
> 
> 时间：2012-08-06T09:52:58.573
> 
> 标签：spring, spring-mvc, type-conversion, spring-3

我正在使用 Spring 的转换服务，并在其中注册了我自己的转换器：

```
public class MyTypeConverter implements Converter<String, MyType> {
    @Override
    public Currency convert(String text) {
        MyType object = new MyType();
        // do some more work here...
        return object;
    }
} 
```

现在在我的应用程序中，我可以进行从`String`to 的转换，`MyType`并且效果很好：

```
@Autowired
private ConversionService cs;

public void doIt() {
    MyType object = cs.convert("Value1", MyType.class);
} 
```

但我也注意到，例如，我可以在我的 MVC 控制器中使用相同的转换器，并且它也可以在某种程度上与列表一起使用：

```
@RequestMapping(method = RequestMethod.GET, value = "...")
@ResponseBody
public final String doIt(@RequestParam("param1") List<MyType> objects) throws Exception {
    // ....
} 
```

因此，如果我确实在控制器中提交`param1=value1,value2`，我确实会收到其中`List<MyType>`包含两个元素的 a。所以 spring 确实用逗号分割字符串，然后将每个元素分别转换为`MyType`. 是否也可以以编程方式执行此操作？

我需要类似这样的东西：

```
List<MyType> objects = cs.convert("Value1,Value2", List<MyType>.class); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T11:53:05.410

我自己找到了非常接近的解决方案：

```
List<MyType> objects = Arrays.asList(cs.convert("Value1,Value2", MyType[].class)); 
```

如果转换服务会自动创建列表会更好，但`Arrays.asList()`自己做这不是很大的开销。

# android - Android 陀螺仪 - OpenGL LookAt 位置

> ID：11825993
> 
> 赞同：2
> 
> 时间：2012-08-06T09:53:06.930
> 
> 标签：android, opengl-es, sensors, gyroscope

我想通过陀螺仪传感器的能力得到我想“**看”的X、Y、Z位置的准确位置**

我可以从陀螺仪传感器获得 9 值，但我无法弄清楚从陀螺仪传感器获得确切位置的公式。

我想要公式或例子来得到正确的答案

这是我想要结果的代码

```
double standX = 0.0f, standY = 0.0f, standZ = 0.0f;
double lookX = 0.0f, lookY = 0.0f, lookZ = 1.0f;
double headupX = 0.0f, headupY = 1.0f, headupZ = 0.0f;
float[] deltaRotationMatrix = new float[9];
SensorManager.getRotationMatrixFromVector(deltaRotationMatrix, deltaRotationVector);

// code here

// in my onDraw
// I'm trying to make the lookAt position proper
Matrix.setLookAtM(mViewMatrix, 0, 
        eyeX, eyeY, eyeZ, lookX, lookY, lookZ, headupX , headupY, headupZ); 
```

结果示例如下：

![x=0、y=0、z=-1 的示例](../Images/f436bcdcc4be1eee4d648f10a0a1913e.png)

![x=0、y=1、z=0 的示例](../Images/80f534b5eb522a7c73239c9ffacef95a.png)

![x=1、y=0、z=1 的示例](../Images/53278beb59eaee2c8efabc4be3182cbc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:27:01.110

我已经完成了我的问题，这是我的解决方案

首先，我需要制作这 3 个矩阵以获得 x、y、z 位置的结果

```
private float[] mRotXMatrix = new float[] {
 1, 0, 0, 0, 
 0, 0, 1, 0,
 0, 1, 0, 0,
 0, 0, 0, 1 };
private float[] mRotYMatrix = new float[] {
 0, 0, 1, 0,
 0, 1, 0, 0,
 1, 0, 0, 0,
 0, 0, 0, 1 };
private float[] mRotZMatrix = new float[] { 
 0, 1, 0, 0,
 1, 0, 0, 0,
 0, 0, 1, 0,
 0, 0, 0, 1 }; 
```

然后在 onSensorChanged(SensorEvent e) 方法中，我像这样旋转所有这 3 个矩阵以及我的相机视图

```
Matrix.multiplyMM(mViewMatrix, 0, deltaRotationMatrix, 0, mViewMatrix, 0);
Matrix.multiplyMM(mRotXMatrix, 0, deltaRotationMatrix, 0, mRotXMatrix, 0);
Matrix.multiplyMM(mRotYMatrix, 0, deltaRotationMatrix, 0, mRotYMatrix, 0);
Matrix.multiplyMM(mRotZMatrix, 0, deltaRotationMatrix, 0, mRotZMatrix, 0); 
```

要获取我的相机视图的 X、Y、Z，只需从这些矩阵中获取

```
viewX = mRotXMatrix[2];
viewY = -mRotYMatrix[6]; // +/- up to your initial camera view
viewZ = mRotZMatrix[10]; 
```

# scons - 为什么 scons 不在环境变量中使用 CCFLAGS？

> ID：11825999
> 
> 赞同：2
> 
> 时间：2012-08-06T09:53:39.060
> 
> 标签：scons

我有这个 SConstruct 文件：

```
env=Environment()
env.Append(CCFLAGS = ['-std=c99', '-Wall', '-Wextra', '-g'])
print env["CCFLAGS"]

#Program('test_array.c',CCFLAGS=['-std=c99', '-Wall', '-Wextra', '-g'],
                                                   CPPPATH = '.', LIBS='stuff', LIBPATH=".")

#Program('test_array.c',CPPPATH = '.', LIBS='stuff', LIBPATH=".") 
```

取消注释第一个 Program() 的输出是：

```
scons
scons: Reading SConscript files ...
-std=c99 -Wall -Wextra -g
scons: done reading SConscript files.
scons: Building targets ...
gcc -o test_array.o -c -std=c99 -Wall -Wextra -g -I. test_array.c
gcc -o test_array test_array.o -L. -lstuff
scons: done building targets. 
```

取消注释第二个 Program() 的输出是：

```
scons
scons: Reading SConscript files ...
-std=c99 -Wall -Wextra -g
scons: done reading SConscript files.
scons: Building targets ...
gcc -o test_array.o -c -I. test_array.c
test_array.c: In function 'test_insert':
test_array.c:85:4: error: 'for' loop initial declarations are only allowed in C99 mode
test_array.c:85:4: note: use option -std=c99 or -std=gnu99 to compile your code 
```

env 变量具有 CCFLAGS 的值，但我不知道为什么在 Program() 调用中未明确指定时不使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:07:21.373

Program() 构建器从 DefaultEnvironment() 中获取构造变量，而不是从您创建的环境中获取。[此处](http://www.scons.org/doc/production/HTML/scons-user/x1444.html#AEN1556)描述了此行为。

尝试以下操作：

```
env=Environment()
env.Append(CCFLAGS = ['-std=c99', '-Wall', '-Wextra', '-g'])
print env["CCFLAGS"]

# Program() will take the construction vars from env, not the DefaultEnvironment()
#env.Program('test_array.c',CCFLAGS=['-std=c99', '-Wall', '-Wextra', '-g'],
                                                   CPPPATH = '.', LIBS='stuff', LIBPATH=".")

#env.Program('test_array.c',CPPPATH = '.', LIBS='stuff', LIBPATH=".") 
```

`env`请注意，我在您创建和修改的项目上调用 Program() 构建器。

因此，您真正需要的只是第二次调用，如下所示：

```
env=Environment()
env.Append(CCFLAGS = ['-std=c99', '-Wall', '-Wextra', '-g'])
print env["CCFLAGS"]

# Program() will take the construction vars from env, not the DefaultEnvironment()
env.Program('test_array.c',CPPPATH = '.', LIBS='stuff', LIBPATH=".") 
```