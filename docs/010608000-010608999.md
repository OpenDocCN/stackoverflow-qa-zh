# StackOverflow 问答 10608000-10608999

# c# - 如何从 EF 4 中的相关表中删除行？

> ID：10608001
> 
> 赞同：2
> 
> 时间：2012-05-15T20:04:48.567
> 
> 标签：c#, entity-framework, entity-framework-4

所以这里有 3 个我正在使用的表：

![在此处输入图像描述](../Images/11ecf17881498774c163202554359048.png)

我想从特定的 ClaimCodingID 中删除 ClaimCodingProcedureCodeModifierXref 表中的所有内容以及 ProcedureCodeModifier 中的所有相关行。到目前为止，这是我的代码：

```
using (HCCustDataEntities hc = new HCCustDataEntities())
            {
                var result = (from CPC in hc.ClaimCodingProcedureCodeModifierXrefs
                              where CPC.ClaimCodingID == claimCodingID
                              select CPC);

                foreach (var item in result)
                {
                    hc.DeleteObject(item);
                }
            } 
```

但只有外部参照表中的数据会被删除。为什么 EF 也不删除相关行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T20:07:14.187

`CASCADE DELETE`在您的关系中使用。当您删除主记录时，实体框架将自动删除详细信息/子对象。您不需要自己显式删除关系中的子记录。

![在此处输入图像描述](../Images/c2e972dd032462afcd77a46972d5c7bc.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T20:28:46.547

因为您只删除了 CCPCMX 行。

这是未经测试的，但它应该是这样的：

```
using (HCCustDataEntities hc = new HCCustDataEntities())
{
   var result = (from CPC in hc.ClaimCodingProcedureCodeModifierXrefs
                 where CPC.ClaimCodingID == claimCodingID
                 select CPC);

   foreach (var item in result)
   {
      hc.DeleteObject(item);

      var result2 = from pcm in hc.ProcedureCodeModifier
                    where pcm.ProcedureCodeModifierID == item.ProcedureCodeModifierID
                    select pcm;

      foreach (var row in result2)
         hc.DeleteObject(row);

      var result3 = from cc in hc.ClaimCoding
                    where cc.ClaimCodingID == item.ClaimCodingID
                    select cc;

      foreach (var row in result3)
         hc.DeleteObject(row);          
   }
} 
```

# makefile - 从 makefile 内部自动安装软件包

> ID：10608004
> 
> 赞同：8
> 
> 时间：2012-05-15T20:04:52.530
> 
> 标签：makefile, package

目标：当用户键入'make packages'时，自动搜索包libx11-dev（我的程序编译需要），如果没有找到，安装它。这是我的 makefile 的精简版本：

```
PACKAGES = $(shell if [ -z $(dpkg -l | grep libx11-dev) ]; then sudo apt-get install libx11-dev; fi)

[other definitions and targets]

packages: $(PACKAGES) 
```

当我输入“make packages”时，系统会提示我输入超级用户密码。如果输入正确，它将无限期挂起。

我在makefile中尝试做的事情是否可行？如果是这样，怎么做？

非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T12:20:14.320

问题是该`shell`函数的行为就像 shell 中的反引号：它将输出带到 stdout 并将其作为函数的值返回。所以，apt-get 并没有挂起，它在等待您输入对某个问题的回复。但是你看不到这个问题，因为 make 已经获取了输出。

你这样做的方式是行不通的。你为什么要使用`shell`而不是仅仅把它写成规则？

```
packages:
        [ -z `dpkg -l | grep libx11-dev` ] && sudo apt-get install libx11-dev
.PHONY: packages 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T00:31:47.890

I figured out a better way, which avoids the problem of having unexpected arguments to the if statement:

```
if ! dpkg -l | grep libx11-dev -c >>/dev/null; then sudo apt-get install libx11-dev; fi 
```

The -c flag on grep makes it return the number of lines in dpkg -l which contain the string libx11-dev, which will either be 0 (if uninstalled) or 1 (if installed), allowing

```
dpkg -l | grep libx11-dev -c 
```

to be treated like an ordinary boolean variable.

# jquery - 使用 jQuery 对象作为 jqGrid 的数据源

> ID：10608007
> 
> 赞同：1
> 
> 时间：2012-05-15T20:05:08.963
> 
> 标签：jquery, jqgrid

我正在尝试使用从 XML 字符串中选择的 jQuery 的结果创建一个 jqGrid。

我有一个加载大型 XML 响应 (SOAP) 的页面。我想保存初始响应并在不同的 jqGrid 表中动态使用部分响应。当我使用 jQuery 搜索 XML 部分时，我得到了表响应的正确部分，但我被困在从 jQuery 结果对象构建表的点上。下面的`loatTabTrip`函数适用于作为参数给出的原始 XML 字符串`travelXml`，但它不适用于 jQuery 结果。（因此，如果我可以将 jQuery 对象作为 XML 字符串获取，那将起作用；或者如果 jqGrid 将接受该对象。）

有任何想法吗？

```
<Travel>
    <TravelKey>2010020029A</TravelKey>
    <TravelCategoryCode>AIR</TravelCategoryCode>
    <Trips>
        <Trip>
            <AircraftTrip>
                <TripKey>
                    <TripId>50</TripId>
                    <TravelKey>2010020029A</TravelKey>
                </TripKey>
                <AssignedTravelTaskReferences>
                    <AssignedTravelTaskReference>
                        <TaskId>80203</TaskId>
                        <TravelKey>2010020029A</TravelKey>
                    </AssignedTravelTaskReference>
                </AssignedTravelTaskReferences>
                <TripTravelId>6JG79822S</TripTravelId>
                <Aircraft>
                    <AircraftModelCode>KC135R</AircraftModelCode>
                    <SerialNumber>83104038</SerialNumber>
                </Aircraft>
                <Route>...</Route>
            </AircraftTrip>
        </Trip>
        <Trip>...</Trip>
</Travel> 

function loadTabTrip(travelXml){
    jQuery("#travelTripsTable").jqGrid({
        datatype:'xmlstring',
        datastr: travelXml, 
        colNames:["ID","Aircraft"], 
        colModel:[
            {name:"id",index:"id", width:380, align:"right",xmlmap:">TripKey>TripId"},
            {name:"type",index:"type", width:80, xmlmap:">Aircraft>AircraftModelCode"}
        ],
        xmlReader: {
            root : "Travel>Trips",
            row: ">Trip>AircraftTrip",
            repeatitems: false,
            id: ">TripKey>TripId"
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T21:26:37.773

您可以使用 jQuery[`.get`](http://api.jquery.com/get/)方法来检索底层 DOM 元素——或者在本例中为 XML 元素。

从那里，您可以使用[Convert xml to string with jQuery](https://stackoverflow.com/questions/6507293/convert-xml-to-string-with-jquery)中的函数将该 XML 对象转换为字符串：

```
datastr: xmlToString( travelXml.get(0) ) 
```

这有帮助吗？

# sharepoint - 如何避免匿名用户单击列表中的项目时提示输入用户名和密码？

> ID：10608008
> 
> 赞同：1
> 
> 时间：2012-05-15T20:05:09.073
> 
> 标签：sharepoint, sharepoint-2010

如标题所示，我在列表中遇到了问题。我需要的是当匿名用户单击列表中的某个项目以查看它时，我希望他们能够查看该项目并且不被要求输入用户名和密码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T06:30:51.250

我得到了解决方案，我执行了以下步骤：

*   单击开始，单击运行，在打开框中键入 cmd，然后单击确定。

*   在命令提示符处键入以下行。在每一行之后按 ENTER。cd /d %commonprogramfiles%\Microsoft Shared\Web Server Extensions\12\Bin stsadm -o
    deactivatefeature -url http://（您的站点名称）-filename ViewFormPagesLockDown\feature.xml

*   键入 exit 退出命令提示符。

*   您必须关闭并再次打开匿名访问才能使更改生效，方法是在您需要的区域中启用和禁用匿名访问，然后导航到您的列表权限，取消选中查看匿名权限列表中的项目权限，然后单击确定并重新打开相同的权限列表并再次检查查看项目权限框。

有关更多详细信息，请访问此链接： http: [//kwizcom.blogspot.com/2007/06/anonymous-users-cannot-access-list.html](http://kwizcom.blogspot.com/2007/06/anonymous-users-cannot-access-list.html)（非常感谢该帖子）

谢谢大家！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T01:48:31.407

您必须在列表中启用匿名访问。在执行此操作之前，您还需要在站点上启用匿名访问。

您可以[在此处](http://office.microsoft.com/en-us/windows-sharepoint-services-help/enable-anonymous-access-HA010113018.aspx)找到有关如何操作的更多信息。

# c# - 如何使用 C# 中的索引设置结构的特定成员

> ID：10608009
> 
> 赞同：2
> 
> 时间：2012-05-15T20:05:10.710
> 
> 标签：c#, struct, indexing

假设我有一个结构：

```
struct Vector
{
    public int X, Y;

    // ...
    // some other stuff
} 
```

和一个班级：

```
class Map
{
    public Vector this[int i]
    {
        get
        {
            return elements[i];
        }
        set
        {
            elements[i] = value;
        }
    }

    private Vector[] elements

    // ...
    // some other stuff
} 
```

我希望能够做类似的事情：`map[index].X = 0;`但我不能，因为返回值不是变量。

如果可能的话，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T20:09:14.560

您应该避免使用可变结构。

如果您希望您的类型是可变的，请改用一个类。

```
class Vector
{
    public int X { get; set; } // Use public properties instead of public fields!
    public int Y { get; set; }

    // ...
    // some other stuff
} 
```

如果要使用结构，请使其不可变：

```
struct Vector
{
    private readonly int x;  // Immutable types should have readonly fields.
    private readonly int y;

    public int X { get { return x; }} // No setter.
    public int Y { get { return y; }}

    // ...
    // some other stuff
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T20:11:16.540

编译器会阻止您这样做，因为索引器返回对象的副本而不是引用（结构是按值传递的）。索引器返回一个副本，您修改此副本，您根本看不到任何结果。编译器可以帮助您避免这种情况。

如果你想处理这种情况，你应该改用 class 或者改变你处理 Vector 的方式。你不应该修改它的值，而是在构造函数中初始化它的值，更多关于这个主题：[为什么可变结构是“邪恶的”？](https://stackoverflow.com/questions/441309/why-are-mutable-structs-evil).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T00:26:28.373

Although generic classes work pretty well for many purposes, they do not provide any reasonable way to access structs by reference. This is unfortunate since in many cases a collection of structs would offer better performance (both reduced memory footprint and improved cache locality) and clearer semantics than a collection of class objects. When using arrays of structs, one can use a statement like `ArrayOfRectangle[5].Width += 3;` with very clear effect: it will update field `X` of `ArrayOfRectangle[5]` but it will not affect field `X` of any other storage location of type `Rectangle`. The only things one needs to know to be certain of that are that `ArrayOfRectangle` is a `Rectangle[]`, and `Rectangle` is a struct with a public `int` field `X`. If `Rectangle` were a class, and the instance held in `ArrayOfRectangle[5]` had ever been exposed to the outside world, could be difficult or impossible to determine whether the instance referred to by `ArrayOfRectangle[5]` was also held by some other code which was expecting that field `X` of its instance wouldn't change. Such problems are avoided when using structures.

Given the way .net's collections are implemented, the best one can do is usually to make a copy of a struct, modify it, and store it back. Doing that is somewhat icky, but for structs that aren't too big, the improved memory footprint and cache locality achieved by using value types may outweigh the extra code to explicitly copy objects from and to the data structures. It will almost certainly be a major win compared with using immutable class types.

Incidentally, what I'd like to see would be for collections to expose methods like: `OperateOnElement<paramType>(int index, ref T element, ref paramType param, ActionByRef<T,paramType> proc)` which would call `proc` with the appropriate element of the collection along with the passed-in parameter. Such routines could in many cases be called without having to create closures; if such a pattern were standardized, compilers could even use it to auto-generate field-update code nicely.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T20:09:25.827

*   将 Vector 定义为类，或
*   将值存储在临时变量中

    var v = 地图[索引]; vX = 0; 地图[索引] = v;

或者

*   添加函数来改变 map[index] = map[index].Offset()

或者

*   让 [] 运算符返回一个 setter 类

    类设置器 { 向量 [] 数据；整数索引；公共双 X { 获取 { 返回数据 [索引]; } set { Data[Index] = new Vector(value, Data[Index].Y); }}}

    public Setter this[int i] { get { return new Setter() { Data = elements, Index= i }; } }

# jquery - jquery：提交表单不起作用

> ID：10608012
> 
> 赞同：0
> 
> 时间：2012-05-15T20:05:28.807
> 
> 标签：jquery, forms

我有一个几乎类似的问题，如前所述。我的第一个问题已经解决，但现在我尝试了 2 个小时来解决下一个问题。

确认后，我的表格必须提交。我有一长串表单，并且有一个类强制发送一个 jquery 确认消息。我可以从该表单中获取所用表单的名称和数据（你们中的一个人提供的解决方案！）。

要发送的表单的名称或 ID 存储在变量中。我都尝试过：命名表单的 id，两者都不能在我的代码中工作？

```
<script type="text/javascript"> 
$(".confirm_submit").click( function(){ 
var confirmteamnaam = $(this).closest("form").find("input[name='teamnaam']").val();
var frmnaam = $(this).closest('form').attr('id');
jConfirm( confirmteamnaam  + frmnaam, function(r) {
    if(r == true)
    {
        $(frmnaam).submit(); // this doe not work??
        return true;
    }
    else
        return false;
});
return false; 
```

});

在确认文本中，名称显示正确。用表单的id和名称试过了，都不提交？

非常感谢任何解决方案！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T20:07:37.493

您需要使表单选择器成为 id 选择器：

```
$('#' + frmnaam).submit(); 
```

* * *

编辑：你有一些过度的查询和爬行。这里有一些重构可以减少其中的一些：

```
$(".confirm_submit").click(function() {
    var $form = $(this).closest("form"),
        confirmteamnaam = $form.find("input[name='teamnaam']").val(),
        frmnaam = $form.attr("id");

    jConfirm(confirmteamnaam + frmnaam, function(r) {
        if (!r) return false;
        $form.submit();
        return true;
    });

    return false;
}); 
```

# c# - 我在绑定课程时做错了什么？

> ID：10608015
> 
> 赞同：0
> 
> 时间：2012-05-15T20:05:37.210
> 
> 标签：c#, winforms, data-binding

我有一个名为 PlatypusInfo 的类。

我调用一个返回该类实例的方法：

```
PlatypusInfo pi;
. . .
pi = MammalData.PopulateplatypusData(oracleConnectionMainForm, textBoxPlatypusID.Text);
. . .
public static PlatypusInfo PopulateplatypusData(OracleConnection oc, String platypusID) {

    int platypusABCID = getABCIDForDuckBillID(oc, platypusID);
    platypusInfo pi = new platypusInfo(); 
```

...但得到这个错误消息：*“System.ArgumentException 未处理消息=无法绑定到数据源上的属性或列 platypusName。参数名称：dataMember Source=System.Windows.Forms ParamName=dataMember”*

...在这行代码上：

```
textBoxPlatypusID.DataBindings.Add(new Binding("Text", pi, "platypusName")); 
```

我在想，使用我的代码，PlatypusInfo 类的 platypusName 成员（其实例是“pi”）应该分配给 textBoxPlatypusID 的 Text 属性。

那么我是不是理解错了，是我做错了，还是两者兼而有之？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T23:37:55.107

您需要将其从字段更改为属性并添加[`INotifyPropertyChanged`](http://msdn.microsoft.com/en-us/library/ms229614.aspx)接口的实现。所以是这样的：

```
public class PlatypusInfo : INotifyPropertyChanged
{         
    public event PropertyChangedEventHandler PropertyChanged;
    private String _PlatypusName;

    public String PlatypusName 
    { 
       get
       {
          return _PlatypusName;
       }
       set 
       {
          _PlatypusName = value;
          NotifyPropertyChanged("PlatypusName");
       }
    }

    private void NotifyPropertyChanged(String info)
    {
       PropertyChangedEventHandler property_changed = PropertyChanged;
       if (property_changed != null)
       {
          property_changed(this, new PropertyChangedEventArgs(info));
       }
    }
} 
```

然后数据绑定将如下所示：

```
textBoxPlatypusID.DataBindings.Add(new Binding("Text", pi, "PlatypusName")); 
```

假设`pi`是一个`PlatypusInfo`对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T20:10:51.647

PlatypusInfo 类是否实现了接口 INotifyPropertyChanged

# mysql - 具有多个查找的条件别名

> ID：10608019
> 
> 赞同：0
> 
> 时间：2012-05-15T20:05:51.693
> 
> 标签：mysql, sql

假设您有一个包含两个（或更多）列的表，这些列链接到另一个表：

```
 house_history         houses
---------------       --------
OwnerID               HouseID
PreviousHouseID       Address
CurrentHouseID 
```

并且您想从这些 ID 中的每一个返回数据：

```
---------------------------------------------------------------
|OwnerID|        PreviousAddress    |      CurrentAddress     |
---------------------------------------------------------------
         (linked to PreviousHouseID) (linked to CurrentHouseID) 
```

你会怎么做呢？（特别是我对使用 MySQL 很感兴趣）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:11:25.243

```
SELECT OwnerId, p.Address as PreviousAddress, c.Address as CurrentAddress
FROM house_history h
LEFT JOIN houses p ON h.PreviousHouseID = p.HouseID
LEFT JOIN houses c ON h.CurrentHouseID = c.HouseID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T20:11:32.720

尝试这个

```
SELECT hh.OwnerID,h1.Address,h2.Address
FROM house_history hh 
LEFT JOIN house h1 ON h1.HouseId = hh.PreviousHouseID
LEFT JOIN house h2 ON h2.HouseId = hh.CurrentHouseID 
```

可能您可能需要**INNER JOIN的****LEFT JOIN**，因为它在当前和以前的房子为空时也有效

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T20:14:22.220

```
SELECT
    house_history.OwnerID
    , houses_previous.Address AS PreviousAddress
    , houses_current.houses.Address AS CurrentAddress
FROM house_history
    LEFT JOIN houses AS houses_current ON (house_history.CurrentHouseID = houses_current.HouseID)
    LEFT JOIN houses AS houses_previous ON (house_history.PreviousHouseID = houses_previous.HouseID); 
```**

# android - 有没有办法在 Android 上测试 GPS 提供程序的丢失？(onProviderDisabled())

> ID：10608020
> 
> 赞同：0
> 
> 时间：2012-05-15T20:05:54.480
> 
> 标签：android, eclipse, gps, ddms

我想在模拟器上完全测试我的 LocationListener()，看看它是否在所有情况下都能正常工作。有没有办法使用模拟器测试 onProviderDisabled() 和 onProviderEnabled() ？

```
 location_listener = new LocationListener(){

        public void onLocationChanged(Location location) {
            // Update application based on new location 
            updateLocation(location); 
        }

        public void onProviderDisabled(String provider) {
            // Update application if provider disabled
            setContentView(R.layout.lostgps);
        }

        public void onProviderEnabled(String provider) {
            // Update application if provider enabled 
            setContentView(R.layout.game); 
        }

        public void onStatusChanged(String provider, int status,
                Bundle extras) {
            // Update application if provider hardware status changed 
        }

    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T21:48:01.553

是的，您可以使用[LocationManager.setTestProviderEnabled()](http://developer.android.com/reference/android/location/LocationManager.html#setTestProviderEnabled%28java.lang.String,%20boolean%29)和[LocationManager.setTestProviderStatus()](http://developer.android.com/reference/android/location/LocationManager.html#setTestProviderStatus%28java.lang.String,%20int,%20android.os.Bundle,%20long%29)来测试监听器。

# java - 检索泛型类的 .class 属性

> ID：10608021
> 
> 赞同：6
> 
> 时间：2012-05-15T20:05:56.107
> 
> 标签：java, generics, ektorp

我正在尝试使用构造函数（来自 Ektorp 库）扩展以下类：

```
public class CouchDbRepositorySupport<T extends CouchDbDocument> implements GenericRepository<T> {

...

protected CouchDbRepositorySupport(Class<T> type, CouchDbConnector db) {
...

} 
```

这是我的实现：

```
public class OrderRepository extends CouchDbRepositorySupport<Order<MenuItem>> {

    public OrderRepository(CouchDbConnector db) {
        super(Order<MenuItem>.class, db); 
```

问题出在`Order<MenuItem>.class`零件上。Java 编译器告诉我：

```
 Syntax error on token ">", void expected after this 
```

我试过了`(Order<MenuItem>).class`，`Order.class`但`new Order<MenuItem>().getClass()`没有更好的运气。

如何检索泛型类的 .class 属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T20:08:32.533

正确的语法是：

```
Order.class 
```

在 Java 中，`Order<MenuItem>.class`并且在运行时`Order.class`是*同一个*类，泛型类型信息（`<MenuItem>`类型参数）在运行时会因为[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)而丢失- 这是 Java 泛型类型系统的严重限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T02:39:28.603

如果您更改类型以发布内部类型，则可以通过以下方式获取：

```
public class CouchDbRepositorySupport<C, T extends CouchDbRepositorySupport<C>> implements GenericRepository<T> {
...

    protected CouchDbRepositorySupport(Class<C> type, CouchDbConnector db) {
        ...
    }

public class OrderRepository extends CouchDbRepositorySupport<MenuItem, Order<MenuItem>> {

    public OrderRepository(CouchDbConnector db) {
        super(MenuItem.class, db); 
```

关于如何声明父类，您有几个选择；这只是一个例子。

免责声明：我是在没有 IDE 的情况下手动完成的，因此可能存在一些小的语法问题，但这个概念应该有效。

# c++ - 在网页上部署 Firebreath 插件，无需手动安装

> ID：10608022
> 
> 赞同：2
> 
> 时间：2012-05-15T20:05:56.810
> 
> 标签：c++, plugins, installation, firebreath

最近我一直在试验 Firebreath 并开发了一个插件，以便在我的投资组合网站上展示我的 c++ 项目。如果他们是我网站上的新项目，我想让用户轻松查看项目而无需下载文件。

我现在唯一的问题是，当用户访问我的页面时，他们会收到一条消息，指出插件丢失。我希望用户可以选择自动安装我的插件，而无需手动下载和运行它。

该插件主要针对 Windows 用户，因为应用程序也是如此。我打算支持 Google Chrome、Firefox、Internet Explorer。目前我正在使用 MSI 安装程序来安装插件。

我发现了一个与此类似的[问题](https://stackoverflow.com/questions/6122437/firebreath-plugin-automatic-installation)，但我仍然需要保存 MSI 安装程序并运行它。

我的问题是：实现这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T20:55:39.277

没有任何方法可以“自动”做你想做的事。我听说过的最接近的方法是使用可以为他们下载和安装插件的 java 小程序。这在 Mac 上可能非常可靠，但在 Windows 上则不太可靠（出于多种原因，其中许多 Windows 用户没有安装 java 以及 Chrome 默认阻止 java 小程序而无需用户干预）。

其他选项包括：

*   创建 CAB 文件安装程序（仅适用于 IE）
*   创建一个打包插件的 XPI firefox 扩展（需要重新启动浏览器，仅适用于 firefox）
*   创建打包插件的 CRX chrome 扩展（仅适用于 Chrome）
*   Microsoft ClickOnce 过去在从网页单击安装 MSI 文件时效果很好，但最近我认为它不适用于许多（如果有的话）浏览器；反正好久没看到用了。

没有安装插件的“自动”方式；这将被视为严重的安全问题。这可能是插件如此罕见的#1 原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T19:50:28.327

做土坯做的事，

创建一个小型的activeX应用程序下载器，使用便宜的SSL签署activeX

当用户进入您的站点时，他将自动下载这个微型 ActiveX，安装完成后，在微型 ActiveX 内部，有一些类型的批处理脚本可以从远程服务器下载 EXE 并静默安装。

adobe 会在 boot.ini 或 startups 中每次重新启动时执行此操作

很容易

# asp.net-mvc-3 - 使用 MVC3 请求 URL 后如何检索页面超链接？

> ID：10608027
> 
> 赞同：0
> 
> 时间：2012-05-15T20:06:13.617
> 
> 标签：asp.net-mvc-3, url

我在我的 MVC3 项目中创建了一个非常简单的视图，其中包含一个接收和验证 URL 的文本框。控制器类相当简单：

```
 [HttpPost]
    public ActionResult Save(ValidationModel model)
    {
        if (ModelState.IsValid)
        {
            //Save or whatever 
        }
        return View(model);

    } 
```

我需要一些有关如何检索输入到文本框中的 URL 的指导，然后扫描生成的页面以查找超链接或标签。扫描完这些标签后，我需要向我的用户返回一个新视图，其中包含按 alpha 顺序排列的标签列表或网格。

任何人都可以在上述步骤中指出我正确的方向吗？

谢谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:03:24.653

在您的视图模型中，您将拥有一个属性：

```
public class ValidationModel 
{
    [Required]
    public string Url { get; set; }
} 
```

然后您将在视图中有一个相应的文本框：

```
@model ValidationModel 
@using (Html.BeginForm)
{
    @Html.EditorFor(x => x.Url)
    <button type="submit">OK</submit>
} 
```

最后在您的 POST 控制器操作中：

```
[HttpPost]
public ActionResult Save(ValidationModel model)
{
    if (ModelState.IsValid)
    {
        //Save or whatever 
        // use model.Url here => it will contain the user input
    }
    return View(model);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:00:46.823

试试这个：

在您的视图中，您在 FORM 中使用模型：

```
@Html.TextBoxFor(m => m.MyHyperLink) 
```

在你的控制器中你这样做：

`model.MyHyperLink` 你可以操纵字符串或做任何你想做的事

就这么简单。。

希望我有所帮助。

# excel - 关闭复制和复制/移动（从工作簿到工作簿）而不提示公式或工作表..？

> ID：10608031
> 
> 赞同：1
> 
> 时间：2012-05-15T20:06:26.727
> 
> 标签：excel, vba

我经常得到这个，必须按回车键 1-5 分钟才能摆脱它 ![在此处输入图像描述](../Images/e9631965181219047f503aa2087e06a5.png)

有什么代码可以摆脱这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:09:04.607

试试这个。

```
Application.DisplayAlerts = False

'~~> Your Code

Application.DisplayAlerts = True 
```

# php - Symfony 2 网络套接字

> ID：10608036
> 
> 赞同：5
> 
> 时间：2012-05-15T20:06:46.557
> 
> 标签：php, symfony, websocket

我正在尝试使用 websockets 和 Symfony 2 创建一个聊天应用程序。给定聊天室的传入消息应存储在 MySQL 数据库中，而传出消息应发送给该聊天室的所有注册者。我正在考虑在后端使用这样的东西（使用 Symfony 2） [https://github.com/GulDmitry/php-websocket-server](https://github.com/GulDmitry/php-websocket-server)

这对于前端 [http://socket.io/](http://socket.io/)

我认为所有用户都应该添加到某种全局服务器数据结构中，该结构指定更新聊天室时向谁发送消息。在 PHP 中可以实现这样的结构吗？似乎不会，所以我不确定解决这个问题的最佳方法是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T22:25:35.333

是的。“服务器”通常是一个永远运行的 php 进程。您不希望它通过您的网络服务器运行，因此您可以从命令行启动套接字服务器并让它运行。使用这种结构，您可以只使用一个数组来存储所有用户。

最终，您可能希望运行多个实例。您可以让多个脚本通过内存、文件、数据库或其他形式的 IPC 进行通信。因此，该结构可以在任何单个套接字服务器进程之外维护。但是，这些是超出您问题范围的复杂情况。

# android - BroadcastReceiver 多久监听一次 Intent

> ID：10608043
> 
> 赞同：2
> 
> 时间：2012-05-15T20:07:07.760
> 
> 标签：android, android-intent, broadcastreceiver

我不确定我是否正确，但文档说 BroadcastReceiver 对象在调用 onReceive 期间有效。这是否意味着之后该对象被销毁？此外，文档表明 BroadcastReceiver 在收到 Intent 时被激活。BroadcastReceiver 是否作为某种服务运行，总是在监听这种 Intent？如果是这样，那是多久一次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T20:09:54.420

清单中列出的任何广播接收器都是由系统创建的，以响应与其意图过滤器匹配的事件。处理完意图后，广播接收器的实例将被销毁。当另一个事件发生时，系统会创建一个新的实例来处理它。

# c# - 使用 Razor 视图引擎的 HtmlEncoding

> ID：10608049
> 
> 赞同：1
> 
> 时间：2012-05-15T20:07:16.353
> 
> 标签：c#, razor, html-encode

我正在使用 Razor 视图引擎的 dll 来处理我的代码中的一些模板，其中我有一些像 Hello, @Model.name 作为输入的东西，我的视图引擎会解析它。它工作得很好，但我也希望它可以用于 Html 编码。它不这样做。例如，如果我有类似“Hello @Model.Name”的内容。

如果@Model.Name 是“P & G”，我不希望输出是`hello P&G`我希望输出与`hello p &amp; G`Razor 视图不一样。有什么办法可以做到这一点？我还尝试将 HttpUtility.HtmlEncoding 放在它上面，但这也没有完成这项工作。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T20:27:35.587

只需使用

```
@Model.name is @Html.Encode("P & G") 
```

# http - MonoTouch 中的 UIWebView 和基本身份验证

> ID：10608052
> 
> 赞同：3
> 
> 时间：2012-05-15T20:07:22.327
> 
> 标签：http, uiwebview, xamarin.ios, basic-authentication, shouldstartload

在 MonoTouch 项目中，我有一个 UIWebView 加载一个基本身份验证保护的 url。通过手动添加基本身份验证标头，我设法针对对 url 的第一个请求进行身份验证：

```
UIWebView webView = new UIWebView(View.Frame);
... initialize webView
NSMutableUrlRequest request = new NSMutableUrlRequest(new NSUrl("http://example.com"));
string header = "Basic " + Convert.ToBase64String (Encoding.UTF8.GetBytes("domain\\username:password"));
request["Authorization"] =  header;
webView.LoadRequest(request);` 
```

它在 UIWebView 中打开的第一页中运行良好。但是，当在 web 视图中单击 href 链接时，请求失败并显示 401。我通过 Fiddler 检查了发送的标头，并且在第一个请求之后的任何后续请求中都没有发送我的标头。我尝试将标头注入到 ShouldStartLoad 委托中的所有请求中，但没有结果：

```
webView.ShouldStartLoad = (w, request, navType) => {
    ((NSMutableUrlRequest)request)["Authorization"] = header;
    return true;
}; 
```

我应该如何将 Authorization http 标头注入 UIWebView 中的所有请求？

# c# - 如何在 C# winforms 中使用 Microsoft Excel 作为 Grid 控件？

> ID：10608055
> 
> 赞同：1
> 
> 时间：2012-05-15T20:07:29.193
> 
> 标签：c#, excel, winforms, winforms-interop

有没有在典型的 winform C# 应用程序中使用 Microsoft Excel 作为网格控件的好示例。

我遇到了很多关于 excel 'like' 控件或网格控件的线程，它们的功能类似于 Excel 等。

为什么不使用 excel 作为 GRID 控件，它具有构建中的所有优点（公式引擎、排序、过滤等）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T21:37:33.257

您当然[可以在 WinForm 应用程序中将 Excel](http://support.microsoft.com/default.aspx?scid=kb;EN-US;304662)作为控件托管，因此您想要的部分内容是可能的（有主要警告）。然而，连接许多 3rd 方网格库中的其余功能需要*大量*工作，并且存在许多缺陷。

主要原因是 Excel 是本机 Windows 应用程序，而不是在 .Net 框架下运行。因此，所有操作都必须在一定程度上完成——您必须实例化应用程序、实例化工作表、尝试订阅某些事件（其中许多可能不可用，因为 Excel*不是*为此目的而设计的），并且，当然，尝试并妥善管理所有 COM 引用以避免内存泄漏。

您提到的网格控件都是从头开始构建的，作为托管在 .Net 应用程序中的控件，因此围绕人们想要的网格样式交互类型公开属性和事件 - 请记住，Excel 不仅仅是一个网格。

然而，好像承认 Excel 在以编程方式使用时可以成为一个强大的工具一样，Microsoft 提供了[VSTO——](http://msdn.microsoft.com/en-US/office/hh128771.aspx)一个允许您使用 .Net 开发 Excel（和其他办公应用程序）的运行时

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T21:28:38.767

据我所知，没有用于嵌入 Office 应用程序的 .NET 控件。

早些时候你可以使用[DSOFramer](http://download.cnet.com/Microsoft-Developer-Support-Office-Framer-Control-Sample-KB-311765/3000-2206_4-10732960.html)来实现你想要的，但后来它被停产了。我相信它仍然有效（我不确定）。Web 浏览器 (COM) 控件是 DSOFramer 的替代品，但有其自身的缺点。例如，您不能使用内置的“Goodies”。

**以下只是*我*个人的看法**

我怀疑 MS 永远不会支持嵌入式 Office 应用程序，原因很简单。MS-Office 应用程序是“以最终用户为目标”的产品。您需要单独的许可证，从商业角度来看，他们不想放弃它:) 就像我之前提到的那样，这些只是我的个人想法，并不赞同 MS 的观点。

# javascript - 将 Javascript 放在 HTML 文件中

> ID：10608057
> 
> 赞同：4
> 
> 时间：2012-05-15T20:07:33.047
> 
> 标签：javascript, html

> **可能重复：**
> [将 JavaScript 嵌入 HTML 正文有多糟糕？](https://stackoverflow.com/questions/2837921/how-bad-is-it-to-embed-javascript-into-the-body-of-html)

好的，所以我使用 JavaScript 已经有一段时间了，我对它并不陌生，但我的问题是关于 JavaScript 应该**放在**HTML 文件中的什么位置。

我一直被告知和工作的印象是，您对外部脚本文件的所有引用都应该包含在`head`标记中，并且当前 HTML 文件中包含的任何脚本都应该位于文件的**末尾**。

现在，最近在与同事讨论时，我看到越来越多的人将脚本块放置在整个 HTML 页面中看似随机的位置，例如

```
<div>
   <p>Foo</p>
   <script type="text/javascript">
       //some script
   </script>
   <p>Bar</p>
</div> 
```

现在这是一个*好习惯*吗？我一直认为不是。如果是这样，它是否有益，因为脚本会在此时执行，但是为什么你不能等到 HTML 的其余部分被加载？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T20:22:31.560

在页面底部 +1 投票

给来访者；

*   内容和标记优先

*   然后用css显示

*   然后使用 javascript 的 ui

欣赏这有点高调

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T20:11:28.820

脚本应放置在页面底部，因为这将允许所有站点资源（例如图像）并行下载。完成后，将一次下载一个脚本。

最好将脚本放在页面底部的原因是它们会阻止并行下载。通常，浏览器会根据主机名并行下载图像等资源，一次下载两个资源（如 HTTP 1.1 规范所指定）。脚本会阻止这种情况发生，并且在完全下载之前不允许下载其他任何内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-15T20:13:05.060

这个问题的重复 [将 JavaScript 嵌入 HTML 正文是不好的做法吗？](https://stackoverflow.com/questions/2837921/how-bad-is-it-to-embed-javascript-into-the-body-of-html)

当您想确保在脚本运行之前创建某些 dom 时，它有时会很有帮助（并且完全有效）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-15T20:24:28.683

当我使用内联时，它对我来说有一个明显的好处。例如。

（*我会尽量用基本场景来解释。所以不要对场景挑剔*）

我的页面中有 A、B 和 C html 部分（div）。显然我会将它们全部呈现，但我希望一次只对访问者可见一个部分。所以我等不及加载整个页面和 javascript 文件，然后应用“设置部分的可见性优先级”javascript 方法来触发。因为与此同时，所有三个部分（A、B 和 C）都将保持可见，直到所有内容都没有完全加载。并且页面可能看起来很糟糕，所以我更喜欢使用内联 javascript。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-15T21:47:48.643

开始在 Rob Sedge 的回复下方写评论，但它变得越来越大......

1) CSS 在顶部，在标题中（除非您希望用户看到没有样式的页面，对于大型 HTML 文件/外部 JS，加载时间可能很长）

2）正文中的内容和标记

3) JS 在页脚，之前`</body>`

尽管目前强烈建议在 $(document).ready 或 $(window).load 事件中进行 JS 评估，但某些外部脚本可能不会这样做 - 在这种情况下，一旦下载了内容，它们就会被评估，通常会导致随机行为。此外，一旦浏览器实际处理给定的标签（第 1 点），内容就会被评估，从而获得更多有趣的东西。

另一个（至少对我来说是主要的）要点是 - 假设您有一个模板引擎，或者您的文档中包含 PHP。现在 - 假设您有很多这样的文件，其中一个需要更改 JS 代码。在这种情况下，如果您不是唯一从事项目的人，则需要在所有这些文件中搜索给定的代码位。因此 - 将 JS 保存在一个地方是一种很好的做法。

让我们补充一点，如果您确实将 JS 代码保存在一个地方，那么可以缩小或缓存此类内容，从而加快整个网站的加载速度。为什么您确实希望用户在每次加载页面时都下载您的 JS，而该脚本可以从缓存中进行评估。如果你分开你的脚本，这种方法就会变得困难。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-15T20:41:11.860

基本上，您放在标题上的脚本是同步下载的，您可以确定它们将按顺序执行，但如果不需要在页面完成加载之前执行这些脚本，也许您更喜欢将它们包含在底部或以延迟的方式包含它们，以更快地完成页面渲染，并为用户提供更好的体验。

关于 HTML 中包含的脚本，这取决于它们的作用。例如，如果由于某种原因您需要执行 Document.write，或者您想在页面呈现之前执行一些代码来修改 DOM，它们非常方便。

我强烈建议您阅读 Steve Souders 的两本书：“High Performance Web Sites”和“Even Faster Web Sites”，在那里您对差异有很好的解释。

# r - 根据列总和从数据框中排除列

> ID：10608060
> 
> 赞同：20
> 
> 时间：2012-05-15T20:07:34.313
> 
> 标签：r

我正在处理一个包含社区数据的数据集，并且许多列（物种）有很多零。我希望能够根据整列的总和删除这些列以进行我正在做的一些分析。我很想用 for 循环来做到这一点，但我听说当你使用 R 时，apply 和 by 函数会更好。我的目标是删除总和小于 15 的所有列。我曾经`which()`删除按因子排列，例如，

```
September<-which(data$Time_point=="September")

data<-data[-September,] 
```

我尝试删除列的两种方法是使用`apply()`：

```
data<-data[,apply(data,2,function(x)sum(x<=15))] 
```

并通过使用凌乱的 for 循环/if else 组合：

```
for (i in 6:length(data)){
    if (sum(data[,i])<=15)
    data[,i]<-NULL
    else 
    data[,i]<-data[,i]
    } 
```

这些方法都没有奏效。当然有一种优雅的方法可以根据逻辑标准摆脱列？

```
str(head(data,10))
'data.frame':   10 obs. of  23 variables:
 $ Core_num    : Factor w/ 159 levels "152","153","154",..: 133 72 70 75 89 85 86 90 95 99
 $ Cage_num    : num  0 1 2 3 4 5 6 7 8 9
 $ Treatment   : Factor w/ 4 levels "","C","CC","NC": 1 2 2 2 2 2 2 2 2 2
 $ Site        : Factor w/ 10 levels "","B","B07","B08",..: 1 8 8 8 7 7 7 7 9 9
 $ Time_point  : Factor w/ 3 levels "","May","September": 1 2 2 2 2 2 2 2 2 2
 $ Spionidae   : num  108 0 0 0 0 0 0 0 0 0
 $ Syllidae    : num  185 0 0 0 3 8 0 1 4 1
 $ Opheliidae  : num  424 0 1 0 0 0 1 1 0 0
 $ Cossuridae  : num  164 0 7 3 0 0 0 0 0 0
 $ Sternaspidae: num  214 0 0 6 1 0 11 9 0 0
 $ Sabellidae  : num  1154 0 2 2 0 ...
 $ Capitellidae: num  256 1 10 17 0 3 0 0 0 0
 $ Dorvillidae : num  21 1 0 0 0 0 0 0 0 0
 $ Cirratulidae: num  17 0 0 0 0 0 0 0 0 0
 $ Oligochaeta : num  3747 12 41 27 32 ...
 $ Nematoda    : num  410 5 4 13 0 0 0 2 2 0
 $ Sipuncula   : num  33 0 0 0 0 0 0 0 0 0
 $ Ostracoda   : num  335 0 1 0 0 0 0 0 0 0
 $ Decapoda    : num  62 0 4 0 1 0 0 0 0 0
 $ Amphipoda   : num  2789 75 17 34 89 ...
 $ Copepoda    : num  75 0 0 0 0 0 0 0 0 0
 $ Tanaidacea  : num  84 0 0 0 1 0 0 0 0 0
 $ Mollusca    : int  55 0 4 0 0 0 0 0 0 0 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-15T20:18:53.563

一个简单的子集呢？首先，我们创建一个简单的数据框L

```
R> dd = data.frame(x = runif(5), y = 20*runif(5), z=20*runif(5)) 
```

然后选择总和大于15的列

```
R> dd1 = dd[,colSums(dd) > 15]
R> ncol(dd1)
[1] 2 
```

在您的数据集中，您只想对第 6 列开始进行子集化，例如：

```
 ##Drop the first five columns
 dd[,colSums(dd[,6:ncol(dd)]) > 15] 
```

或者

```
 #Keep the first six columns
 cols_to_drop = c(rep(TRUE, 5), dd[,6:ncol(dd)]>15)
 dd[,cols_to_drop] 
```

应该管用。

* * *

需要注意的关键部分是，在方括号中，我们需要一个逻辑向量，即 TRUE 和 FALSE 的向量。因此，如果您想使用更复杂的东西进行子集化，请创建一个返回 TRUE 或 FALSE 的函数，并像往常一样创建子集。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-08-30T12:32:49.627

我刚刚遇到了同样的问题。这是使用 Tidyverse 的解决方案，以防您同时具有数字列和非数字列：

```
library(tidyverse)    
set.seed(123)
dat <- data.frame(var1 = runif(10), var2 = rnorm(10), var3 = rlnorm(10), var4 = "notNumeric", var5 =0, var6 = FALSE )

dat %>% 
  select_if(negate(function(col) is.numeric(col) && sum(col) < 15)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-15T20:19:02.370

您应该能够使用布尔值直接索引您的 data.frame 和`colSums()`. 例如：

```
set.seed(123)
dat <- data.frame(var1 = runif(10), var2 = rnorm(10), var3 = rlnorm(10))
colSums(dat)
#-----
     var1      var2      var3 
 5.782475  1.317914 12.91987
#Let's set the threshold at 5, so we should get var1 and var3
> dat[, colSums(dat) > 5]
#-----
        var1      var3
1  0.2875775 5.9709924
2  0.7883051 1.6451811
3  0.4089769 0.1399294
... 
```

# 编辑 - 解决非​​数字列

```
set.seed(123)
dat <- data.frame(var1 = runif(10), var2 = rnorm(10), var3 = rlnorm(10), var4 = "notNumeric")

require(plyr)
dat[, -which(numcolwise(sum)(dat) < 5)] 
```

Consolec:/文档和设置/charles/desktop/

```
> dat[, -which(numcolwise(sum)(dat) < 5)]
        var1      var3       var4
1  0.2875775 5.9709924 notNumeric
2  0.7883051 1.6451811 notNumeric
3  0.4089769 0.1399294 notNumeric
..... 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-15T20:25:47.373

这将返回不包含所有零的列，包括因子和字符列（我只在数据的第一行中读取）：

读入一些数据：

```
dat <- read.table(text="  Core_num Cage_num Treatment Site Time_point Spionidae Nereididae Syllidae Opheliidae
6        24        1         C   M2        May         0          0        0          0
4        22        2         C   M2        May         0          0        0          1
9        27        3         C   M2        May         0          0        0          0
23       41        4         C    M        May         0          0        3          0
19       37        5         C    M        May         0          0        8          0
20       38        6         C    M        May         0          0        0          1",  header=T) 
```

编码：

```
summer <- function(x){
    if(is.numeric(x)){
        sum(x) > 15
    } else {
        TRUE
    }
}

dat[, sapply(dat,  summer)] 
```

# windows - VB.net 服务编程和使用 TCP 套接字

> ID：10608062
> 
> 赞同：1
> 
> 时间：2012-05-15T20:07:38.353
> 
> 标签：windows, vb.net, sockets, service, tcp

我有一个问题，我很好奇是否有人可以帮助我解决它。我学习了 VB.NET 的客户端-服务器套接字编程教程。然后我尝试使用服务而不是程序来实现它。我了解它作为程序是如何工作的，但是当我尝试将它移植到服务时它不起作用。当我运行该服务时，它会立即启动和停止。它永远不会建立联系。不幸的是，我不是 VB.net 程序员那么出色，但到目前为止，我非常喜欢它，因为它可以快速开发程序。

这项服务的理念是：

1.  计算机启动时运行
2.  获取 PC 的名称
3.  将 PC 的名称发送到服务器

    一个。然后服务器获取名称并在数据库中查找

    湾。返回客户端计算机应该备份的时间

4.  然后，客户端计算机计算当前时间和假设备份的时间并将所有内容放在毫秒中。

5.  然后机器在指定时间通过运行 dos 命令启动程序进行备份。

现在回答一个我在论坛中发现的常见问题。为什么我不使用任务调度程序。好吧，我确实使用了任务计划，并以这种方式让服务器控制机器的时间。但是，有些计算机会进入休眠状态，我会说这种休眠状态会影响 20% 的机器。不，这种休眠状态不是睡眠模式，也不是休眠。计算机已打开，它们对鼠标移动的反应非常迅速。我创建了一个服务，将时间写入 C:\ 上的文件，这一直有效。所以现在我决定在客户端机器上提供一个服务并让它与服务器通信。

我收集的关于创建服务和网络套接字编程的信息非常少。不幸的是，我还没有找到将两者联系在一起的任何东西。我找到了一个 vb.net 客户端-服务器程序，它可以满足我的需求，但我希望它作为服务而不是程序。我找到了一个使用 PSEXEC 从服务器创建文件的临时解决方案，但是这个过程实在是太简单了。

我做了下一件最好的事情，然后我去查看了 Microsoft 套接字库，并尝试基于有意义的内容构建我自己的服务。仍然没有任何效果。如果您知道任何书籍、资源、有任何建议等，您能给我的任何帮助将不胜感激。谢谢您的帮助。

您将在下面找到我的代码。在这一点上，我关心的只是在客户端和服务器之间建立连接。我可以回去找出其余的并从那里修改代码。

麦克风

这是我一直在玩的服务器代码：

```
Imports System.Net.Sockets
Imports System.Net
Imports System.Text

Public Class BackupService

    Private Mythread As Threading.Thread
    Private clientThread As Threading.Thread
    Private listener As New TcpListener(IPAddress.Parse("#.#.#.252"), 8888)

    Protected Overrides Sub OnStart(ByVal args() As String)
        ' Add code here to start your service. This method should set things
        ' in motion so your service can do its work.

        listener.Start()            'Listener for clients
        System.IO.File.WriteAllText("C:\test\listener.txt", My.Computer.Clock.LocalTime)
        Mythread = New Threading.Thread(AddressOf listenerLoop)
        Mythread.Start()

    End Sub

    Protected Overrides Sub OnStop()
        ' Add code here to perform any tear-down necessary to stop your service.
        Mythread.Abort()
    End Sub

    Protected Sub listenerLoop()

        Dim client As TcpClient = listener.AcceptTcpClient()
        Dim networkStream As NetworkStream = client.GetStream
        Dim bytes(client.ReceiveBufferSize) As Byte
        Dim dataReceived As String

        While True
            networkStream.Read(bytes, 0, CInt(client.ReceiveBufferSize))            'Receives data from client and stores it into bytes
            dataReceived = Encoding.ASCII.GetString(bytes)                          'Encodes the data to ASCII standard
            System.IO.File.AppendAllText("C:\test\listener.txt", dataReceived)      'Copies information to text file
            Threading.Thread.Sleep(1000)

        End While

        'Listening for incoming connections
        'While True
        '    If (listener.Pending = False) Then
        '        System.IO.File.AppendAllText("C:\test\listener.txt", "Sorry, no connection requests have arrived")
        '    Else
        '        'Finds Incoming message and creates a thread for the client-server to pass information'
        '        clientThread = New Threading.Thread(AddressOf clientConnection)
        '        clientThread.Start()

        '    End If
        '    Threading.Thread.Sleep(1000)    'Let loop/thread sleep for 1 second to allow other processing and waits for clients
        'End While
    End Sub

    'Protected Sub clientConnection()
    '    Dim client As TcpClient = listener.AcceptTcpClient()
    '    Dim networkStream As NetworkStream = client.GetStream
    '    Dim bytes(client.ReceiveBufferSize) As Byte
    '    Dim dataReceived As String
    '    Dim datasent As Boolean = False

    '    While datasent = False  'Continuously loops looking for sent data
    '        If (networkStream.CanRead = True) Then
    '            networkStream.Read(bytes, 0, CInt(client.ReceiveBufferSize))            'Receives data from client and stores it into bytes
    '            dataReceived = Encoding.ASCII.GetString(bytes)                          'Encodes the data to ASCII standard
    '            System.IO.File.AppendAllText("C:\test\listener.txt", dataReceived)      'Copies information to text file
    '            datasent = True
    '        End If
    '        Threading.Thread.Sleep(1000)
    '    End While

    '    networkStream.Close()       'Closes the network stream
    '    client.Close()              'Closes the client
    '    clientThread.Abort()        'Kills the the current thread

    'End Sub
End Class 
```

客户代码（服务）：

```
Imports System.Net.Sockets
Imports System.Net
Imports System.Text
Public Class TestWindowsService

    Dim Mythread As Threading.Thread

    Protected Overrides Sub OnStart(ByVal args() As String)
        ' Add code here to start your service. This method should set things
        ' in motion so your service can do its work.

        'clientCommunication()

        Mythread = New Threading.Thread(AddressOf KeepCounting)
        Mythread.Start()
    End Sub

    Protected Overrides Sub OnStop()
        ' Add code here to perform any tear-down necessary to stop your service.

        Mythread.Abort()
    End Sub

    'Protected Sub KeepCounting()
    '    Dim wait As Integer = 0
    '    Dim hour As Integer = 0
    '    Dim min As Integer = 0

    '    System.IO.File.WriteAllText("C:\test\StartTime.txt", "Start Time: " & My.Computer.Clock.LocalTime)

    '    Do While True

    '        hour = My.Computer.Clock.LocalTime.Hour

    '        If (hour = 1) Then
    '            min = (My.Computer.Clock.LocalTime.Minute * 60) + 60000
    '            Threading.Thread.Sleep(min)         'Sleeps for the number of minutes till 2am
    '            file.FileTime()
    '        Else
    '            Threading.Thread.Sleep(3600000)     'Sleeps for 1 hour
    '            System.IO.File.WriteAllText("C:\test\hourCheck\ThreadTime.txt", "Time: " & My.Computer.Clock.LocalTime)

    '        End If

    '    Loop

    'End Sub

    Protected Sub KeepCounting()
        Dim tcpClient As New System.Net.Sockets.TcpClient()
        tcpClient.Connect(IPAddress.Parse("#.#.#.11"), 8000)
        Dim networkStream As NetworkStream = tcpClient.GetStream()

        If networkStream.CanWrite And networkStream.CanRead Then

            ' Do a simple write.
            Dim sendBytes As [Byte]() = Encoding.ASCII.GetBytes("Is anybody there")
            networkStream.Write(sendBytes, 0, sendBytes.Length)

            ' Read the NetworkStream into a byte buffer.
            Dim bytes(tcpClient.ReceiveBufferSize) As Byte
            networkStream.Read(bytes, 0, CInt(tcpClient.ReceiveBufferSize))

            ' Output the data received from the host to the console.
            Dim returndata As String = Encoding.ASCII.GetString(bytes)
            Console.WriteLine(("Host returned: " + returndata))

        Else
            If Not networkStream.CanRead Then
                Console.WriteLine("cannot not write data to this stream")
                tcpClient.Close()
            Else
                If Not networkStream.CanWrite Then
                    Console.WriteLine("cannot read data from this stream")
                    tcpClient.Close()
                End If
            End If
        End If
        ' pause so user can view the console output
        Console.ReadLine()

    End Sub

End Class 
```

客户端代码（扩展模块）

```
Imports System.Net.Sockets
Imports System.Net
Imports System.Text

Module Client_TCP_Communication

    Public Sub clientCommunication()
        Dim tcpClient As New System.Net.Sockets.TcpClient()
        tcpClient.Connect("127.0.0.1", 8000)
        Dim networkStream As NetworkStream = tcpClient.GetStream()

        If networkStream.CanWrite And networkStream.CanRead Then

            ' Do a simple write.
            Dim sendBytes As [Byte]() = Encoding.ASCII.GetBytes("Is anybody there")
            networkStream.Write(sendBytes, 0, sendBytes.Length)

            ' Read the NetworkStream into a byte buffer.
            Dim bytes(tcpClient.ReceiveBufferSize) As Byte
            networkStream.Read(bytes, 0, CInt(tcpClient.ReceiveBufferSize))

            ' Output the data received from the host to the console.
            Dim returndata As String = Encoding.ASCII.GetString(bytes)
            Console.WriteLine(("Host returned: " + returndata))

        Else
            If Not networkStream.CanRead Then
                Console.WriteLine("cannot not write data to this stream")
                tcpClient.Close()
            Else
                If Not networkStream.CanWrite Then
                    Console.WriteLine("cannot read data from this stream")
                    tcpClient.Close()
                End If
            End If
        End If
        ' pause so user can view the console output
        Console.ReadLine()

        'Dim clientSocket As New System.Net.Sockets.TcpClient()
        'Dim serverStream As NetworkStream

        'While True
        '    serverStream = clientSocket.GetStream()
        '    Dim outStream As Byte() = System.Text.Encoding.ASCII.GetBytes("Message from client$")
        '    Dim inStream(1024) As Byte
        '    Dim returnData As String

        '    System.IO.File.WriteAllText("C:\test\client\ClientStarted.txt", "Time: " & My.Computer.Clock.LocalTime)
        '    clientSocket.Connect(IPAddress.Parse("#.#.#.11"), 8999)
        '    System.IO.File.WriteAllText("C:\test\client\ClientConnected.txt", "Time: " & My.Computer.Clock.LocalTime)

        '    serverStream.Write(outStream, 0, outStream.Length)
        '    serverStream.Flush()

        '    serverStream.Read(inStream, 0, CInt(clientSocket.ReceiveBufferSize))
        '    returnData = System.Text.Encoding.ASCII.GetString(inStream)
        '    System.IO.File.WriteAllText("C:\test\client\returnData.txt", "Time: " & returnData)

        'End While

    End Sub

End Module 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:01:28.683

要找出它启动然后停止的原因，您可以在尝试启动服务后尝试查看应用程序事件日志。可能在启动时（或刚启动后）遇到导致服务停止的错误。

我在尝试编写类似的服务时遇到了这个问题——在我的例子中，我试图自动检测要使用的 IP 地址，结果发现它无意中选择了我的 IPv6 环回地址并且未能绑定。事件日志中的错误提示了我。

# android - 如何自动清除文本框并隐藏 android 中的键盘

> ID：10608064
> 
> 赞同：0
> 
> 时间：2012-05-15T20:07:47.930
> 
> 标签：android

1.  单击添加按钮（插入的数据）到数据库后，如何自动清除文本框？
2.  如何将键盘上的 DONE 按钮（用户想要键入时提示）链接到我的 ADD 按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:19:34.530

您需要使用 OnEditorActionListener，在其中单击按钮、隐藏键盘并将文本设置为“”。像这样：

```
 mEditText.setOnEditorActionListener(new OnEditorActionListener(){
        @Override
        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
            mButton.performClick();
            InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(v.getWindowToken(), 0);
            v.setText("");
            return true;
        }
}); 
```

# java - 我有一个输出流错误

> ID：10608065
> 
> 赞同：0
> 
> 时间：2012-05-15T20:07:48.667
> 
> 标签：java, outputstream, fileoutputstream

我正在尝试解压缩一个名为“resources.zip”的文件，但当我这样做时，我会收到此错误。

```
java.io.FileNotFoundException: C:\Users\User\AppData\Roaming\VAPOUR\Destiny\resources (Access is denied)
at java.io.FileOutputStream.open(Native Method)
at java.io.FileOutputStream.<init>(Unknown Source)
at java.io.FileOutputStream.<init>(Unknown Source)
at classes.a.extractFolder(a.java:198) 
```

在第 198 行……它是；

```
OutputStream outStream = new FileOutputStream(output2.toString()); 
```

如果您需要更多，我可以随时添加一些！：） 谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T20:22:07.450

如果您在尝试写入文件之前调用“outputs.mkdirs()”，那么问题在于您正在创建一个目录，该目录是您尝试写入的文件的名称。

为了创建目录和文件，请执行以下操作：

```
File f = new File("...");

// create all parent dirs for the target file
f.getParentFile().mkdirs();

// ... now write the file itself ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T20:13:09.390

确保您尝试访问的文件存在（文件**未找到**异常），并确保您有权读取它。也可能不允许您将 .zip 文件作为目录打开（您尝试访问`resources`，而不是`resources.zip`）。也许尝试`resources.zip`直接访问而不是访问目录然后访问文件？

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T20:16:02.290

如果您尝试写入的目录不存在，通常会引发该异常

# ios - 使用 AVAudioRecorder 和 AVAudioSessionCategoryPlayAndRecord 忽略麦克风输入

> ID：10608074
> 
> 赞同：2
> 
> 时间：2012-05-15T20:08:22.733
> 
> 标签：ios, input, microphone, avaudiorecorder, avaudiosession

我正在开发一个带有多个 AVAudioPlayer 和一个 AVAudioRecorder 的 iPad 应用程序。这个想法是像背景音乐一样播放主要 AvAudioPlayer 的声音，并触摸不同的按钮播放其他 AVAudioPlayer 的声音以与背景音乐混合。混合音乐将由 AVAudioRecorder 录制。

为此，我使用 AVAudioSessionCategoryPlayAndRecord 类别实现了 AVAudioSession，并使用以下设置创建了 AVAudioRecorder 对象：

```
NSDictionary *recordSetting = [NSDictionary dictionaryWithObjectsAndKeys:
                               [NSNumber numberWithInt:kAudioFormatAppleIMA4], AVFormatIDKey,
                               [NSNumber numberWithInt:AVAudioQualityHigh], AVEncoderAudioQualityKey,
                               [NSNumber numberWithInt:16], AVEncoderBitRateKey,
                               [NSNumber numberWithInt: 2], AVNumberOfChannelsKey,
                               [NSNumber numberWithFloat:44100.0], AVSampleRateKey,
                                nil]; 
```

一切正常，但麦克风的输入也被记录了，这对我来说不好。

问题是，我如何在录音过程中忽略/替换/消除麦克风输入？

我在谷歌上搜索了很长时间，并在 Apple 文档中搜索 AVAudioSession 类别和模式、AVAudioRecorder 设置，但对我没有任何帮助。

我也搜索静音麦克风，但我读到这在 iOS 设备上是不可能的。

提前感谢您的帮助，并为我写英语的错误感到抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T20:32:03.930

AVAudioRecorder API 仅用于从麦克风录制。

要创建应用程序发出的任何声音的音频文件，应用程序必须在软件（混音器音频单元或您自己的 DSP 代码）中进行音频混合，然后在需要时压缩并保存生成的音频流。

# asp.net-mvc-3 - Entity Framework - ASP MVC Models - Relationships

> ID：10608078
> 
> 赞同：0
> 
> 时间：2012-05-15T20:08:32.053
> 
> 标签：asp.net-mvc-3

I have some Models in my app like so:

```
public class Enquiry
{
    [Key]
    [Required]
    public int EnquiryID { get; set; }

    [Required]
    [Display(Name = "Enquiry Type:")]
    public virtual int EnquiryTypeID { get; set; }
    public virtual EnquiryType EnquiryType { get; set; }

    public virtual ICollection<DeliveryType> DeliveryTypes { get; set; }

}

public class EnquiryType
{
    [Key]
    public int EnquiryTypeID { get; set; }

    [Display(Name = "Enquiry Type:")]
    [MaxLength(100)]
    public string EnquiryTypeName { get; set; }
}

public class DeliveryType
{
    [Key]
    public int DeliveryTypeID { get; set; }
    public int EnquiryID { get; set; }
    public string DeliveryName{ get; set; }
} 
```

So the jist of it is. I have an Enquiry, each Enquiry has a Type of Enquiry (Sales, General, Technical etc..) so this is a One-to-One relationship. Each Enquiry can then have multiple DeliveryTypes attached to it, so its a One-to-Many relationship.

My question is, have I set this up correctly with my models above? Am I missing something? Do I have virtual's in the wrong place/not set up correctly? Do I need `EnquiryID` to be in my DeliveryType model?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:20:49.367

You do not need EnquiryID on the DeliveryType model. But, the EnquiryTypeID on the Enquiry should not be virtual. I would set it up like this:

```
public class Enquiry
{
    [Key]
    [Required]
    public int EnquiryID { get; set; }

    [Required]
    [Display(Name = "Enquiry Type:")]
    public int EnquiryTypeID { get; set; }

    public virtual EnquiryType EnquiryType { get; set; }
    public virtual ICollection<DeliveryType> DeliveryTypes { get; set; }

}

public class EnquiryType
{
    [Key]
    public int EnquiryTypeID { get; set; }

    [Display(Name = "Enquiry Type:")]
    [MaxLength(100)]
    public string EnquiryTypeName { get; set; }
}

public class DeliveryType
{
    [Key]
    public int DeliveryTypeID { get; set; }
    public string DeliveryName{ get; set; }
} 
```

# iphone - iPhone 应用程序中的图像清晰，但 iPad 应用程序中的图像有颗粒感

> ID：10608085
> 
> 赞同：0
> 
> 时间：2012-05-15T20:08:50.083
> 
> 标签：iphone, ios, ipad, ios5, retina-display

我们在我们的 iPhone 应用程序中使用视网膜图像（即，两倍大小）。

这些图像在 iPhone 4 上呈现出色——清晰明快。但是，对于同一个应用程序，在 iPad 上以“1x”模式（即 iPhone 应用程序大小）运行时，图像看起来有颗粒感。

两个应用程序的代码完全相同。没有 iPad 版本。人们只需在 iPad 上下载 iPhone 版本。

我们应该为 iPad 使用不同的图像吗？

这是应用程序：http: [//itunes.apple.com/app/dumpling/id514239919](http://itunes.apple.com/app/dumpling/id514239919)

如果您在 iPhone 上下载它，然后在 iPad 上再次下载它，您会看到不同之处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:12:49.520

如果应用程序不是通用的，那么他们将在 iPad 上呈现 iPhone 版本。我假设你没有处于“2X”模式，所以如果你在 iPad 1 或 2 上，你的应用程序将不会使用视网膜图形，所以它会看起来有颗粒感。你在 iPad 3 上测试过吗？这应该使用@2x 图像为您正确呈现。

# php - PHP - 在删除第一个单词的同时转换带有破折号的字符串

> ID：10608092
> 
> 赞同：1
> 
> 时间：2012-05-15T20:09:01.033
> 
> 标签：php

```
$title = '228-example-of-the-title' 
```

我需要将字符串转换为：

标题示例

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T20:15:00.563

单线，

```
$title = '228-example-of-the-title';
ucwords(implode(' ', array_slice(explode('-', $title), 1))); 
```

*   这会在破折号 ( `explode(token, input)`) 上拆分字符串，
*   减去第一个元素 ( `array_slice(array, offset)`)
*   用空格 ( `implode(glue, array)`) 连接结果集，
*   最后将每个单词大写（感谢[salathe](https://stackoverflow.com/users/113938/salathe)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T20:11:29.940

```
$title = '228-example-of-the-title'
$start_pos = strpos($title, '-');
$friendly_title = str_replace('-', ' ', substr($title, $start_pos + 1)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T20:10:54.043

使用[explode()](http://www.php.net/manual/en/function.explode.php)拆分“-”并将字符串放入数组中

```
$title_array = explode("-",$title);
$new_string = "";

for($i=1; $i<count($title_array); $i++)
{
$new_string .= $title_array[$i]." ";
}

echo $new_string; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T20:14:03.950

您可以使用以下代码执行此操作

```
$title = '228-example-of-the-title';

$parts = explode('-',$title);
array_shift($parts);
$title = implode(' ',$parts); 
```

使用的函数：[explode](http://bd.php.net/manual/en/function.explode.php) [implode](http://bd.php.net/manual/en/function.implode.php)和[array_shift](http://bd.php.net/manual/en/function.array-shift.php)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T20:14:44.513

```
$pieces = explode("-", $title);
$result = "";
for ($i = 1; $i < count(pieces); $i++) {
    $result = $result . ucFirst($pieces[$i]);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-15T20:18:57.073

```
$toArray = explode("-",$title);
$cleanArray = array_shift($toArray);
$finalString = implode(' ' , $cleanArray);
// echo ucwords($finalStirng); 
```

# vba - 防止从 excel 重新编译中重置 VBA 变量

> ID：10608095
> 
> 赞同：0
> 
> 时间：2012-05-15T20:09:10.890
> 
> 标签：vba, excel

```
Private Sub CommandButton2_Click()

Dim TempVar As Integer

TempVar = NumNodes
NumNodes = NumNodes + 1
TempVar = NumNodes
Debug.Print "NumNodes + 1"

Call Node_Button_Duplication
Call Channel_Selection_Duplication

NumNodes = TempVar

Debug.Print "NumNodes = " & NumNodes 'Debug
Debug.Print "TempVar = " & NumNodes 'Debug
End Sub

Public Sub Channel_Selection_Duplication()

    Range("Q8:S8").Select
    With Selection
        .HorizontalAlignment = xlCenter
        .VerticalAlignment = xlBottom
        .WrapText = False
        .Orientation = 0
        .AddIndent = False
        .IndentLevel = 0
        .ShrinkToFit = False
        .ReadingOrder = xlContext
        .MergeCells = False
    End With
    Selection.Merge
    Range("Q8:S8").Select
    ActiveCell.FormulaR1C1 = "Channel Usage Selection"
    Range("Q8:S52").Select
    Range("Q52").Activate
    Selection.Borders(xlDiagonalDown).LineStyle = xlNone
    Selection.Borders(xlDiagonalUp).LineStyle = xlNone
    With Selection.Borders(xlEdgeLeft)
        .LineStyle = xlContinuous
        .Weight = xlThin
        .ColorIndex = xlAutomatic
    End With
    With Selection.Borders(xlEdgeTop)
        .LineStyle = xlContinuous
        .Weight = xlThin
        .ColorIndex = xlAutomatic
    End With
    With Selection.Borders(xlEdgeBottom)
        .LineStyle = xlContinuous
        .Weight = xlThin
        .ColorIndex = xlAutomatic
    End With
    With Selection.Borders(xlEdgeRight)
        .LineStyle = xlContinuous
        .Weight = xlThin
        .ColorIndex = xlAutomatic
    End With
    With Selection.Borders(xlInsideVertical)
        .LineStyle = xlContinuous
        .Weight = xlThin
        .ColorIndex = xlAutomatic
End With
With Selection.Borders(xlInsideHorizontal)
    .LineStyle = xlContinuous
    .Weight = xlThin
    .ColorIndex = xlAutomatic
End With
Range("Q8:S8").Select
Selection.Interior.ColorIndex = 36

End Sub

Public Sub Node_Button_Duplication()

Worksheets("Topology").Shapes("CommandButton1").Select
Selection.Copy
Worksheets("Topology").Paste
Selection.ShapeRange.IncrementLeft 339#
Selection.ShapeRange.IncrementTop -12.75

End Sub 
```

我试图在调用 2 个子例程（Node_Button_Duplication 和 Channel_Selection_Duplication）之前保存 NumNodes 的值（一个全局变量），第一个子例程称为复制并粘贴电子表格中的命令按钮。我相信，这会重新编译 VBA 项目并重置（全部？）全局变量。

我试图写入一个单元格并从单元格中读回值，但这不起作用（基本上与使用临时变量的想法相同）。

上面的代码在运行时会导致每次运行时 TempVar 和 NumNodes 都重置为 1。我想知道保存变量不被重置的最好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T20:53:50.387

试试这个

```
Option Explicit

Private Sub CommandButton2_Click()
    Dim NumNodes as Long

    NumNodes = Sheets("Temp").Range("A1").Value

    NumNodes = NumNodes + 1

    Sheets("Temp").Range("A1").Value = NumNodes

    MsgBox "NumNodes = " & NumNodes

    Call Node_Button_Duplication
    Call Channel_Selection_Duplication
End Sub 
```

确保您有一张名为“Temp”的工作表

现在试试看。

# java - 从java代码添加图标到菜单项（android 2.3）

> ID：10608104
> 
> 赞同：0
> 
> 时间：2012-05-15T20:09:33.880
> 
> 标签：java, android, menu, icons

是否有可能从 java 代码（而不是从 xml 文件）将图像添加到菜单项？

例如（在 XML 中）：

```
item android:id="@+id/help" 
     android:icon="@drawable/ic_help"
     android:title="@string/help" 
```

第二行将图片（图标）添加到项目，但这是 XML 文件。

在代码中，当我制作菜单时，只有很少的构造函数来添加项目例如： public boolean onCreateOptionsMenu(Menu menu){

```
 menu.add(0,0,0,"Czerwony"); 
```

但是任何有图片的人（只有标题文本/字符串）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T20:12:50.287

```
menu.add((0,0,0,"Czerwony").setIcon(R.drawable.edit_icon); 
```

另请参阅这篇文章：[如何使用 Java 代码在 Android 中创建菜单](http://www.brighthub.com/mobile/google-android/articles/28673.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T20:14:37.473

您可以使用`menu.add(0, 0, 0, "Czerwony").setIcon(int iconRes);`

[参考](http://developer.android.com/reference/android/view/MenuItem.html#setIcon%28int%29)

# ruby-on-rails - 在 rails activeadmin 中对 table_for 进行排序

> ID：10608105
> 
> 赞同：14
> 
> 时间：2012-05-15T20:09:34.043
> 
> 标签：ruby-on-rails, activeadmin

在一个活动的管理显示页面中，我有两个面板，第一个是主记录，第二个是关联信息（通过 has_many）所以`show`看起来像这样：

```
panel "Max Amount" do
  table_for user.max_amount do
    column 'Amount', :amount
    column 'time', :updated_at
  end
end 
```

我可以在金额列上对这个从高到低（或从低到高）进行排序吗？

更新：我找到了演示的来源（[https://github.com/gregbell/demo.activeadmin.info/blob/master/app/admin/users.rb](https://github.com/gregbell/demo.activeadmin.info/blob/master/app/admin/users.rb)），它似乎有排序但是当你去实际演示站点不起作用。这个功能可能被破坏了吗？有解决办法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-05-08T02:38:35.880

我发现这样做的唯一方法有点hacky。ActiveAdmin 将通过参数哈希传递列名和 asc/desc，然后您可以将其添加到查询中。

另外，确保将“sortable: true”传递给 table_for 调用。

```
panel "P&L" do
  table_for Quote.order(params[:order].gsub('_', ' ')), sortable: true do
    column("Revenue", sortable: :revenue) { |quote| number_to_currency quote.revenue }
    column("Profit", sortable: :profit)  { |quote| number_to_currency quote.profit  }
  end
end 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-09-01T18:03:01.907

使用基于@idrinkpabst 的rails 4.2，我执行了以下操作：

```
table_for group.devices.order(
  # Support for column name with underscore
  # Support "no sort param"
  (params[:order] ? params[:order] : '').gsub('_asc', ' asc').gsub('_desc', ' desc')
), sortable: true do
  # Directly using symboles and not using sortable:
  column :presence
  column :serial_number
  column :apk_version
  column :firmware_version
end 
```

这是一个更强大的版本：

*   允许列名带下划线
*   支持“无排序参数”
*   适用于导轨 4.2

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-12T15:58:36.617

ActiveAdmin 现在支持表格排序。

```
table_for ride.bookings.order('updated_at desc') do
  column :name
  column :created_at
end 
```

这要感谢 Ryan Bates 的截屏视频：[http ://railscasts.com/episodes/284-active-admin?view=asciicast](http://railscasts.com/episodes/284-active-admin?view=asciicast)

# ajax - asp.net mvc 3 json 不起作用

> ID：10608109
> 
> 赞同：0
> 
> 时间：2012-05-15T20:09:36.260
> 
> 标签：ajax, json, asp.net-mvc-3

这是我的带有 json 的 jquery

```
 $('#btnVerificationOk').click(function () {
                var verId = $('#trans_verification_id').val();
                var verCode = $('#trans_verification_code').val();

                $.ajax({
                    url: '/Profile/CompleteTransactions',
                    type: 'POST',
                    data: {  },
                    dataType: 'json',
                    success: function (result) {
                        alert(result);
                    },
                    error: function () {
                        alert('ERROR ERROR !!!!!!!!!!!!');
                    }
                });
            }); 
```

还有我的 C# 方法：

```
 [Authorize]
        [HttpPost]
        private JsonResult CompleteTransactions()
        {
            return Json("Done");
        } 
```

它总是提醒'错误错误!!!!!!!!!!!!' 我尝试调试，但 CompleteTransactions 方法没有触发

这是我的第二个 json，它在下面并且效果很好

```
$('#btnTransfareOk').click(function () {
                var userName = $('#transfare_username').val();
                var amount = $('#transfare_amount').val();
                if (userName == '' || amount == '') {
                    $('#transfare_error_list').html('Please fill boxes.');
                } else {
                    $.ajax({
                        url: '/Profile/TranfareMoney',
                        type: 'POST',
                        data: { ToUsername: userName, Amount: amount },
                        dataType: 'json',
                        success: function (result) {
                            $('#transfare_error_list').html(result.text);
                            $('#trans_verification_id').val(result.id);
                            $('#transfare_username').val("");
                            $('#transfare_amount').val("");
                        },
                        error: function () {
                            $('#transfare_error_list').html('Oops... Error.');
                        }
                    });
                }
            }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T20:17:08.227

我不是 100% 确定，但你不应该是控制器动作处理程序`public`吗？

# django - Django - 两个视图，一页

> ID：10608114
> 
> 赞同：31
> 
> 时间：2012-05-15T20:09:58.303
> 
> 标签：django, django-views

假设我们有一个显示项目列表并允许用户填写表单以添加到项目的 Django 页面（我们将项目称为帖子）。

我想要什么：这个页面的 URL 是指一个视图。该视图调用另外两个视图（此处称为“子视图”），然后每个子视图呈现其部分并返回结果。然后主视图加入子视图的结果并返回。

理想情况下，我会在页面上进行快速的 javascript 检查 - 如果启用了 javascript，表单的提交按钮将对处理表单添加的子视图“Ajax'd”，并且页面将以这种方式更新. 我想我之后也可以触发刷新帖子列表的请求或其他什么。

那么如何在主视图中连接两个子视图呢？这可能吗？

**更新**：“子视图”是我编造的一个术语。我想要的是一个视图，它既可以由 Ajax 直接调用以返回有意义的内容，也可以从另一个视图（我将其称为“主视图”）调用。如果被这个“主视图”调用，主视图如何处理从多个“子视图”返回数据？

有没有一种简单的方法可以做到这一点？这是考虑页面中多个视图的*适当方式吗？*我应该关心职责分离吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-15T20:26:46.890

django 中的视图只是最终返回 Response 对象的任何可调用对象。在该视图中，您可以将工作拆分为适合您的任何组织。也许您的观点 100% 委托给其他方法。

在您的情况下，您的主视图将调用 2 个其他数据函数。如果它们也接受 Request 对象并使用它，它们也可以是视图。他们还需要返回 Response 对象才能被视为 django 视图，因为这就是您将 URL 指向它们的方式。但是让其他两个视图返回 Response 对象并没有什么好处。您可能想要的只是执行特定任务并返回某些数据结构的其他方法，甚至可能是模板的渲染片段。然后，您将使用这些数据，或将模板字符串合并在一起并在您的主响应中返回。

如果您真的打算使用返回 Response 对象的其他视图，那么您可以执行一些操作，例如从它们中抓取主体，并将它们合并到您自己的响应中：
[https ://docs.djangoproject.com/en/1.4 /ref/请求响应/](https://docs.djangoproject.com/en/1.4/ref/request-response/)

真的，与教程没有什么不同。您只是在为数据调用其他方法。如果你想让它有条理，你应该将数据处理逻辑与视图功能分开。您的主视图会调用这些数据处理函数来获取值。您的“子视图”只是简单的视图，它们也调用这些单独的数据函数并将它们包装到响应中。

伪：

```
def mainView(request):
    val = data1()
    val2 = data2()
    response = # val + va2 + other stuff
    return response

def subView1(request):
    val = data1()
    response = # val  + stuff
    return response 

def subView2(request):
    val2 = data2()
    response = # val2  + stuff
    return response 

def data1():
    val = # get data
    return val 

def data2():
    val2 = # get data
    return val2 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-15T20:43:42.857

视图应仅包含与视图相关的逻辑：

*   视图用于处理请求并提供请求的数据
*   这包括检查用户授权/许可和处理给定的参数
*   如果请求的数据不是微不足道的，请将代码外包到更合适的位置（您的模型或表单定义或其他自定义位置）

**外包计算以使它们可重用，并从您的视图中调用这些方法以保持它们的小。**

不过，也许您还想要其他东西，即带有[`extends`](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#extends)和的模板[`include`](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#include)。

`extends`您可以为您的 HTML 代码创建基本布局并定义可以在其他地方呈现的特定块。例子？行。

base.html：

```
<!doctype html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>{% block title %}My Site{% endblock %}</title>
    </head>
    <body>
        <div id="header">
            <h1>My Site</h1>
        </div>
        {% block content %}{% endblock %}
    </body>
</html> 
```

然后，在任何其他模板中，您可以覆盖我们在基本模板中定义的`title`块`content`：

```
{% extends "base.html" %}

{% block title %}My Page{% endblock %}

{% block content %}
<h2>My Page</h2>
<div>lorem ipsum</div>
{% endblock %} 
```

此外，您可以创建如下子模板，我们将其命名为`_item.html`：

```
<li class="item">
  <span>{{ something.foo }}</span>
  <strong>{{ something.bar }}</span>
</li> 
```

您可以将该片段包含在任何其他模板中并传递任意数量的参数：

```
{% for something in mymodel.mym2mrelation.all %}
    {% include "_item.html" with something=something only %}
{% endfor %} 
```

当然，您可以将这两个概念结合起来。像这样：

```
{% extends "base.html" %}

{% block title %}My Page{% endblock %}

{% block content %}
<h2>My Page</h2>
<div>lorem ipsum</div>
<ul>
{% for something in mymodel.mym2mrelation.all %}
    {% include "_item.html" with something=something only %}
{% endfor %}
</ul>
{% endblock %} 
```

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-15T20:48:43.383

这是引入[基于类的视图的最佳时机。](https://docs.djangoproject.com/en/dev/topics/class-based-views/#more-than-just-html)

类方法本质上是将逻辑拆分为可重用片段的“子视图”。

如果您想要拆分函数的可读性 - 只有使用 django 基于类的视图（通过默认提供的所有功能以及通过类实例访问请求、kwargs、args 等）才能变得更好。

[文档](https://docs.djangoproject.com/en/dev/topics/class-based-views/#more-than-just-html)甚至包含一个很好的示例，用于返回基于请求参数的 JSON 响应或 HTML 响应（这个确切的情况）。

最好的部分？您可以在未来的视图中重用基于类的视图作为 mixin。查看文档示例以了解如何转换任何基于类的视图以通过简单的子类处理模板上下文的 JSON 响应。

# wordpress - Wordpress url 和文件夹结构

> ID：10608116
> 
> 赞同：1
> 
> 时间：2012-05-15T20:10:17.477
> 
> 标签：wordpress

我正在将一个静态站点迁移到一个基于 Wordpress 作为工作平台的新站点。旧站点包含静态 html 页面和博客的单独文件夹。结果，我得到了以下 URL www.mysite.com/blog/category-name/post-number-one。在新站点上，WordPress 将 URL 转换为 www.mysite.com / category-name / post-number-one，删除 blog/ 部分。

为了搜索引擎优化，我必须像旧网站一样保留这些网址。有没有办法使用 Wordpress 只为博客文章维护这种结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:16:47.680

在您的常规设置中，您可以将子文件夹设置为您的 url，根据我的经验，当您遇到问题时可能很难调试。

另一个是，如果您进入干净的 urls 设置页面，您可能只需在另一个之前添加一个字符串`%params%`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T20:17:02.530

是的，在 Wordpress 管理员中，转到“设置”选项卡，然后转到“永久链接”菜单。将有一个名为“类别库”的部分。在那里添加“博客”。

这应该使博客类别以/blog/category-name/post-number-one为前缀。

我有一个类似的问题。基本上我正在运行两个 Wordpress 安装。一个用于页面，一个用于博客。这背后的故事很长。

但我最终需要合并 WP 安装。

在我的情况下，我还需要转到设置 -> 阅读并将帖子页面设置为“博客”，这是一个我也命名为博客的空页面。这使得博客可以在`http://mydomain/blog/`. 我不确定你是否也想要那个。

但是对于类别，您只需要在永久链接设置下添加“类别库”。

# javascript - knockoutjs：自定义数据绑定“with”以通过引用传递函数

> ID：10608118
> 
> 赞同：1
> 
> 时间：2012-05-15T20:10:24.917
> 
> 标签：javascript, mvvm, knockout.js

我有一个 observableArray

```
this.Itens = ko.obeservableArray();
this.Itens.toString = function () {return 'my items array'}; 
```

我需要通过引用所有子标签来传递“项目”属性，因为我必须访问从子标签开始附加的方法，从 jquery 插件开始：

```
<div data-bind="customWith: Items ">
    <ul data-bind="foreach:$data"> <!-- function reference of items -->
        <li data-bind="text: ko.toJSON($data)"></li>
    </ul>

    <br>
    <br>

    <!-- Only for debugging -->
    <p data-bind="text: ko.toJSON($data)"></p>
    <p data-bind="text: ko.toJSON($data()[0])"></p>
    <p data-bind="text: $data.fnTest"></p>
    <p data-bind="text: $data.fnTest()"></p>
</div> 
```

这是自定义的 ko.bindingHandler：

```
ko.bindingHandlers.customWith = {

    init: function (element, valueAccessor, allBindingsAcessor, viewModel, bindingContext) {
        ko.bindingHandlers.customWith.update.apply (this, arguments);
        $(element).myplugin ();
        return {'controlsDescendantBindings': true};
    }, 
    update: function (element, valueAccessor, allBindingsAcessor, viewModel, bindingContext) {
        var fnReference valueAccessor = ();
        var childBindingContext = bindingContext.createChildContext (fnReference);
        ko.applyBindingsToDescendants (childBindingContext, element);
    }
}; 
```

完整代码在这里：http: [//jsfiddle.net/AbraaoAlves/fz5Yj/](http://jsfiddle.net/AbraaoAlves/fz5Yj/)

正如您在 div 标记 customWith 中看到的那样，p 正确呈现内容并在我从列表中添加或删除项目时更新，但 ul 标记 (foreach: $ data) 不会呈现任何内容，甚至 valueAccessor 处理程序与 foreach 站在一起所有正确的数据。

在这种情况下，我该怎么做才能呈现列表中的项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:31:12.670

您需要将子绑定设置移动到自定义绑定处理程序的 init 方法。您的处理程序应如下所示，无需更新方法：

```
ko.bindingHandlers.customWith = {

    init:function(element, valueAccessor, allBindingsAcessor, viewModel, bindingContext){

        var fnReference = valueAccessor();           
        var childBindingContext = bindingContext.createChildContext(fnReference);
        ko.applyBindingsToDescendants(childBindingContext, element);

        $(element).myplugin();

        return {'controlsDescendantBindings':true};        
    },
}; 
```

这将导致您的 LI 正确呈现。

# windows-phone-7 - Windows Phone 7 - 来电屏幕

> ID：10608122
> 
> 赞同：1
> 
> 时间：2012-05-15T20:10:46.137
> 
> 标签：windows-phone-7, windows-phone-7.1

接到来电时是否有向来电屏幕添加数据的方法？如果可能的话，我希望能够在该屏幕上添加文本。

更新：

如果当前无法在此屏幕上添加文本，是否有办法根据来电触发代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T20:46:21.747

您可以对来电执行任何操作的唯一方法是通过 Obscured 事件获知这已发生。
请注意，其他事情（例如警报）也会触发此事件，并且您的应用程序内无法知道是什么导致您的应用程序被遮挡。

# vb.net - 在 VB.NET 运行时修改属性代码

> ID：10608128
> 
> 赞同：0
> 
> 时间：2012-05-15T20:11:14.687
> 
> 标签：vb.net, reflection

假设我有以下课程，

```
 Public Class Base

      Public Event PropertyChanged()

      Sub New()
           .....
      End Sub
 End Class

 Public Class Other
      Inherits Base

      Public Property X As String
 End Class 
```

如果我想说，更改自动属性 ​​X 的代码定义（在运行时，可能在 中`Sub New`），这样我就可以抛出`PropertyChanged`事件，我该怎么做呢？

编辑：似乎 Postsharp 是一个可用的工具，可以完成我正在探索的功能，但我希望我的问题更具学术性而不是实用性。那么，我自己如何在编译时或运行时实现代码注入呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T20:42:18.193

我猜你正在寻找[AOP](http://en.wikipedia.org/wiki/Aspect-oriented_programming)。恕我直言，在 dotnet 平台上不成熟的一项非常好的技术。我相信，如果我错了，请纠正我，[Postsharp](http://www.sharpcrafters.com/)是最著名的 AOP 框架。虽然生产不是免费的。安装和播放（可能还有 F/OSS）是免费的。另请查看[此帖子](https://stackoverflow.com/questions/5622024/opensource-alternative-to-postsharp-that-supports-easy-custom-attributes)以获取更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T21:37:15.907

答案很简单：你不能。一旦加载了一个类型，就不能更改它的代码。

如果您想在`INotifyPropertyChanged`不为每个属性编写相同代码的情况下实现，有几种方法。

其中之一是创建属性`MustOverride`（`abstract`在 C# 中），然后在运行时创建另一个类，该类在运行时实现它（例如使用 Castle DynamicProxy）。

另一种是使用 AOP 在编译后（但在运行之前）使用 PostSharp 之类的东西重写代码。

另请查看[实施 INotifyPropertyChanged - 是否存在更好的方法？](https://stackoverflow.com/questions/1315621/implementing-inotifypropertychanged-does-a-better-way-exist), 以了解其他选项的概述。

# php - 在 WAMP 环境中安装 PECL OAuth (PHP)

> ID：10608130
> 
> 赞同：1
> 
> 时间：2012-05-15T20:11:19.893
> 
> 标签：php, oauth, wamp, pecl

我想安装 PECL OAuth，但我不知道从哪里开始。我将 zip 中包含的文件放在哪里？我是否将它们全部放在带有 .dll 文件的 C:\wamp\bin\php\php5.3.5\ext 中？

如果有人有安装 PECL OAuth 的经验，我真的可以使用一些帮助！

谢谢你。

# html - 单个网页上的两个 Google 图表

> ID：10608132
> 
> 赞同：0
> 
> 时间：2012-05-15T20:11:25.323
> 
> 标签：html, google-visualization

我试图将两个谷歌图表放在一个网页上，但只能让它绘制第一个而不是另一个。谁能看看我做错了什么？

我正在使用两个不同的 div 进行绘图，我认为这是重要的一步。我还尝试对不同的图使用两种不同的函数，但仍然无法正常工作。

我将非常感谢有用的建议。

谢谢！！

阿耶莎

```
<!--To change this template, choose Tools | Templates and open the template in the editor.-->
<!DOCTYPE html>
<html>
<head>
    <script type='text/javascript' src='http://www.google.com/jsapi'></script>
    <script type='text/javascript'>
        google.load('visualization', '1', {'packages':['annotatedtimeline']});
        google.setOnLoadCallback(drawChart1);
        function drawChart1() {

            var data1 = new google.visualization.DataTable();
            data1.addColumn('date', 'Date');
            data1.addColumn('number', 'Sold Pencils');
            data1.addColumn('string', 'title1');
            data1.addColumn('string', 'text1');
            data1.addColumn('number', 'Sold Pens');
            data1.addColumn('string', 'title2');
            data1.addColumn('string', 'text2');
            data1.addRows([
                [new Date(2008, 1 ,1), 30000, undefined, undefined, 40645, undefined, undefined],
                [new Date(2008, 1 ,2), 14045, undefined, undefined, 20374, undefined, undefined],
                [new Date(2008, 1 ,3), 55022, undefined, undefined, 50766, undefined, undefined],
                [new Date(2008, 1 ,4), 75284, undefined, undefined, 14334, 'Out of Stock','Ran out of stock on pens at 4pm'],
                [new Date(2008, 1 ,5), 41476, 'Bought Pens','Bought 200k pens', 66467, undefined, undefined],
                [new Date(2008, 1 ,6), 33322, undefined, undefined, 39463, undefined, undefined]
            ]);

            var chart1 = new google.visualization.AnnotatedTimeLine(document.getElementById('chart_div1'));
            chart1.draw(data1, {displayAnnotations: true});

            var data2 = google.visualization.arrayToDataTable([
                ['Year', 'Sales', 'Expenses'],
                ['2004',  1000,      400],
                ['2005',  1170,      460],
                ['2006',  660,       1120],
                ['2007',  1030,      540]
            ]);

            var options = {
                title: 'Company Performance',
                vAxis: {title: 'Year',  titleTextStyle: {color: 'red'}}
            };

            var chart2 = new google.visualization.BarChart(document.getElementById('chart_div2'));
            chart2.draw(data2, options);

        }
    </script>
</head>

<body>
    <p> Testing Google line chart tool </p>
    // Note how you must specify the size of the container element explicitly!
    <div id='chart_div1' style='width: 700px; height: 240px;'></div>

    <br> <br> <br> 

    <p> Testing another chart </p>
    <div id='chart_div2' style='width: 700px; height: 240px;'></div>

</body>
</html> 
```

阿耶莎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:22:24.010

加载包时包括**corechart**。

```
google.load('visualization', '1', 
{'packages':['annotatedtimeline','corechart']}); 
```

见这里：http: [//jsfiddle.net/Ng7ne/](http://jsfiddle.net/Ng7ne/)

# r - 在 facet_grid 中仅绘制几个方面

> ID：10608133
> 
> 赞同：7
> 
> 时间：2012-05-15T20:11:27.400
> 
> 标签：r, ggplot2

我正在寻找一种仅显示几个选定方面的绘图方法`facet_grid`。`ggplot2`说我有以下情节：

![在此处输入图像描述](../Images/74452609d68bf17ad8728042f800b2b6.png)

一直在寻找一种快速的方法，例如，只绘制方面 1 和 3。

```
#data
y<-1:12
x<-c(1,2,3,1,2,3,1,2,3,1,2,3)
z<-c("a","a","a","b","b","b","a","a","a","b","b","b")
df<-as.data.frame(cbind(x,y,z))

#plot

a <- ggplot(df, aes(x = z, y = y,
  fill = z))
b <- a + geom_bar(stat = "identity", position = "dodge")
c <- b + facet_grid(. ~ x, scale = "free_y")
c 
```

显然，我想出了如何首先切碎我的数据，但这当然必须可以分配，`ggplot2`即使只是轻推也是最受欢迎的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-15T20:26:39.807

`subset`在您的`ggplot`通话中使用。

```
plot_1 = ggplot(subset(df, x %in% c(1, 2)), aes(x=z, y=y, fill=z)) +
         geom_bar(stat = "identity", position = "dodge") +
         facet_grid(. ~ x, scale = "free_y") 
```

![在此处输入图像描述](../Images/d6ce009b1e6b4d111f8b48cbefff70aa.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T20:25:41.513

这样可以吗

```
a <- ggplot(subset(df, x != 2), aes(x = z, y = y, fill = z))
b <- a + geom_bar(stat = "identity", position = "dodge")
c <- b + facet_grid(. ~ x, scale = "free_y")
c 
```

# sql - ORA-01861 错误

> ID：10608140
> 
> 赞同：0
> 
> 时间：2012-05-15T20:11:38.787
> 
> 标签：sql, oracle10g

我正在尝试将数据从 Netezza 插入 Oracle。这是我的插入内容，如下所示。但它们不起作用并抛出上述错误。

```
INSERT INTO AM_CTL_DDS_LOAD values('ALB',1002,'2012/02/12');
INSERT INTO AM_CTL_DDS_LOAD values('ALB',1002,'2012/02/09');
INSERT INTO AM_CTL_DDS_LOAD values('ALB',1002,'2012/02/21');
INSERT INTO AM_CTL_DDS_LOAD values('ALB',1002,'2012/02/23'); 
```

我的表结构如下。

```
CREATE TABLE AM_CTL_DDS_LOAD
(
    MAS_DIV_CD VARCHAR(5),
    LD_SEQ_NBR INTEGER NOT NULL,
    TUNING_DT DATE NOT NULL
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T20:17:17.697

该`ORA-01861: literal does not match format string`错误意味着表的第三列`AM_CTL_DDS_LOAD`被定义为 a `DATE`，而不是 a `VARCHAR2`，并且字符串到日期的隐式转换失败，因为您的会话`NLS_DATE_FORMAT`不是 'YYYY/MM/DD'。解决该问题的最佳方法是通过使用适当的格式掩码 显式调用来显式插入 a`DATE`而不是 a 。`VARCHAR2``TO_DATE`

```
INSERT INTO AM_CTL_DDS_LOAD values('ALB',1002,to_date('2012/02/12', 'YYYY/MM/DD') );
INSERT INTO AM_CTL_DDS_LOAD values('ALB',1002,to_date('2012/02/09', 'YYYY/MM/DD') );
INSERT INTO AM_CTL_DDS_LOAD values('ALB',1002,to_date('2012/02/21', 'YYYY/MM/DD') );
INSERT INTO AM_CTL_DDS_LOAD values('ALB',1002,to_date('2012/02/23', 'YYYY/MM/DD') ); 
```

# javascript - 如何禁用 Aloha 编辑器工具栏？

> ID：10608143
> 
> 赞同：6
> 
> 时间：2012-05-15T20:11:57.803
> 
> 标签：javascript, jquery, wysiwyg, aloha-editor

有没有办法像侧边栏一样禁用 Aloha 的 ExtJS 工具栏？

```
Aloha.settings =
    modules: ['aloha', 'aloha/jquery']
    editables: '.editable'
    jQuery: $
    sidebar:
        disabled: true
    toolbar:
        disabled: true # does not work 
```

![在此处输入图像描述](../Images/d2d551d37d6c505c6a3bc1afa65100c2.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T18:32:14.343

您可以使用 css 将其隐藏，例如：

```
div.aloha-toolbar {
    display: none !important;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T21:00:04.777

没有简单的方法来禁用浮动菜单。您必须通过编辑源代码来禁用它，您可以通过删除几行来做到这一点。如果您注释掉第[1207-1210](https://github.com/alohaeditor/Aloha-Editor/blob/dev/src/lib/aloha/floatingmenu.js#L1206)行，浮动菜单将不会显示。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-08T14:35:00.503

用类标记元素

```
<div class="editable notoolbar"></div> 
```

使用事件：

```
Aloha.ready(function () {
    var $ = Aloha.jQuery;
    Aloha.bind('aloha-editable-activated', function () {
        if ($(Aloha.activeEditable.obj[0]).hasClass("notoolbar")) {
            $(".aloha-toolbar").hide();
        }
    });
}); 
```

# c# - asp.net C#根据传递的查询字符串从sql中检索数据

> ID：10608144
> 
> 赞同：0
> 
> 时间：2012-05-15T20:12:05.777
> 
> 标签：c#, asp.net, query-string, datareader

假设 cardDetailsID 为 5。

查看数据库的cardDetails表中的第5条记录，可以看到它的其他字段包括“bgcolour”和“borderstyle”。因此，对于这个特定的记录，我有 cardDetailsID = 5、bgcolour = blue、bordersytle=solid。

我希望能够从cardDetailsID 中获取bgcolour 和bordersyle 设置（蓝色和纯色）。

这是到目前为止的代码。查询字符串中的值正在工作（正在传递数字“5”）但现在我如何获得该行的其余设置？

```
 cardDetailsIDrv.Text = Request.QueryString["cardDetailsID"];
    cardDetailsIDrv.Visible = false;

    //create Connection
    SqlConnection myConnection = new SqlConnection(ConfigurationManager.AppSettings["ConnString"]);

    //create Command
    SqlCommand getCardDetailsCMD = new SqlCommand("SELECT * FROM cardDetails WHERE cardDetailsID =" + Convert.ToInt32(cardDetailsIDrv.Text), myConnection);
    myConnection.Open();

    //create datareader
    SqlDataReader myReader = getCardDetailsCMD.ExecuteReader();

    //code works properly up till here

    try
    {
        //Using DataReader to retrieve info from the database and display it on the panel

        while (myReader.Read())
        { 
           //I'm guessing here is where I'm messing things up
           pnlCardps.BackColor = Color.FromName(myReader["bgcolour"].ToString());
           pnlCardps.BorderStyle = (BorderStyle)Enum.Parse(typeof(BorderStyle), myReader["borderstyle"].ToString());

        }
    }

    finally
    {
        if (myReader != null)
        {
            myReader.Close();
        }

        if (myConnection != null)
        {
            myConnection.Close();
        }
    } 
```

问题解决了！！我所要做的就是将 while 循环中的代码调整为：

```
string bgColour = myReader["bgColour"].ToString();
pnlCardrv.BackColor = Color.FromName(bgColour);

string borderColour = myReader["borderColour"].ToString();
pnlCardrv.BorderColor = Color.FromName(borderColour); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:18:54.387

首先，您必须获取`detailsID`通过查询字符串传递的内容，然后执行查询。

```
int id;
if(int.TryParse(Request.QueryString["detailsID"],out id))
{

string sql= string.Format("select .. from .. where id={0}",id);// using SqlParameter is much better and secure
// and execute your query and fetch the data reader
while(reader.Read())
{
 // bla bla bla
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T20:15:02.603

`Request.QueryString["detailsID"]`将为您获取查询字符串变量的值。

```
if (Request.QueryString("detailsID") == null || Request.QueryString("detailsID").Length <= 0 || !int.TryParse(Request.QueryString("detailsID"), out detailsID) || MessageThreadID <= 0)
{
    //This is my standard exception, but you can handle it how you want.
    throw new Exception("Error: unable to load detailsID.  Request.QueryString.count: " + Request.QueryString.Count + " Request.QueryString(\"detailsID\"): " + Request.QueryString("detailsID"));
} 
```

# java - 要下载的文件扩展名类型

> ID：10608147
> 
> 赞同：0
> 
> 时间：2012-05-15T20:12:19.240
> 
> 标签：java, file, download, httpclient, file-extension

如何确定要下载的文件的文件扩展名？我正在使用下面的代码下载文件。

```
URL url = new URL("http://server.com/file.format");
DefaultHttpClient client = new DefaultHttpClient();
HttpGet get = new HttpGet(new URI(url.getProtocol(), url.getHost(), url.getPath(), url.getQuery(), null));

InputStream in = client.execute(get).getEntity().getContent();

//... read input stream and save to file 
```

我已经查看了其他相关线程，但我找不到解决问题的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T20:30:39.247

在 Internet 和 unix 世界中，没有强制文件扩展名之类的东西。这是典型的 Windows 世界思维方式。

在 HTTP 中，最接近“文件扩展名”的是 mime 类型。它是一个实际的内容类型描述，例如`text/html`或`image/gif`。但是 HTTP 不提供**文件扩展名**。您必须自己将 mime 类型映射到文件扩展名！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T20:27:49.260

如果我理解正确，您在示例中的扩展名是“格式”。换句话说，它位于用于制作用于请求文件的 URL 的字符串中。要从用于制作 URL 的传入文件字符串中获取扩展名，请使用：

```
str.substring(str.lastIndexOf('.')+1) 
```

[已编辑]

# iphone - Titanium 和 XCode 的推送通知问题

> ID：10608148
> 
> 赞同：5
> 
> 时间：2012-05-15T20:12:20.233
> 
> 标签：iphone, xcode, titanium, apple-push-notifications

我正在使用 Titanium 2.0.2 创建一个 iPhone 应用程序，除其他外，它必须能够接收推送通知。我做了以下

一个。在我的 Apple Developer 帐户中创建 AppID b。为 Push 配置 AppID。使用新创建的 AppID 创建了一个新的配置文件 d. 为了好的措施编辑了该配置文件 - 鉴于我听说第一次没有正确获取 AppID 推送信息的报告

有了所有这些，我开始使用 Ti.Network.registerForPUshNotifications 为我的应用程序注册 Push，并编写了成功、错误和回调方法。我密切关注 Titanium Kitchen Sink 演示中的示例。

完成这一切后，我完全预料到了以下结果之一

1.  注册成功，我收到了我卡在 Success 回调中的警报消息。
2.  注册失败，我在错误回调中收到警报消息

令我惊讶的是，根本没有发生任何事情 - 就像 registerForPushNotifications 调用进入以太并且很好......消失了

为了更加确定，我按照[http://maniacdev.com/2011/05/tutorial-ios-push-notification-services-for-beginners/](http://maniacdev.com/2011/05/tutorial-ios-push-notification-services-for-beginners/)上的优秀教程创建了一个简单的 XCode 项目。该应用程序向 APNS 注册，我使用我的 iPad 和[http://itunes.apple.com/us/app/consolelog/id415116252?mt=8](http://itunes.apple.com/us/app/consolelog/id415116252?mt=8)捕获分配的 remoteDeviceUUID 。然后，我从 ManicDev 改编了 simplepush.php 脚本，并在我的本地 WAMP 服务器上运行它。它通过 APNS 并存入我的第一条 PUSH 消息。但它永远不会出现在我的 iPad 上！

为了完整起见，我应该提到我正在借助 TestFlightApp 在我的 iPad 上进行开发构建。

那么我在这里做错了什么？

一个。为什么 Titanium 根本不想做任何事情来响应 RegisterForPushNotifications？湾。我的示例 XCode 应用程序永远不会收到推送通知吗？

我将非常感谢对此提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T13:26:41.030

给遇到此帖子的任何人的说明。小心在 WiFi 防火墙路由器后面的 iPad 上测试推送通知。大多数路由器会阻止访问 APNS 使用的端口。我花了太多时间试图在我的代码中找到一个“错误”，结果却发现根本没有。将设备放在路由器上的 DMZ 中可能会有所帮助，但并不可靠——至少对于我的 Sitecom 路由器来说不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:30:28.390

就推送通知而言，Test Flight 使用的临时构建是“生产”而不是开发，因此很可能您的服务器需要使用生产 APNS 服务器密钥进行配置才能使其工作。

# ruby-on-rails - Sunspot 的 in_radius 方法不能作为 any_of 析取的一部分

> ID：10608150
> 
> 赞同：1
> 
> 时间：2012-05-15T20:12:27.383
> 
> 标签：ruby-on-rails, sunspot

我正在结合 sunspot_rails gem (2.0.0.pre) 实现 Rails 3.1 应用程序，并且我试图根据多个条件来确定搜索结果的范围，其中一个使用 in_radius 方法过滤到某个点的地理距离：

```
Sunspot.search(Post) do
    any_of do
      with(:location).in_radius(position[:lat], position[:lng], 50, :bbox => true)
      with :expired_at, nil
    end
end 
```

上面的代码导致以下错误：“Sunspot::DSL::Restriction:0x007fa7e60f0790 的未定义方法 `in_radius'”。在 any_of 块之外， in_radius 方法就像一个魅力。

由于空间搜索仍然是 sunspot 的预发布功能，因此似乎还没有实现对范围界定的支持。有谁知道作为太阳黑子分离的一部分的空间范围界定的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:47:12.660

已通过 PR 修复[https://github.com/sunspot/sunspot/pull/271](https://github.com/sunspot/sunspot/pull/271)您可以使用此 gem 的最新预发布版本来获得所需的功能。

# vbscript - 如何在 vbscript 静默模式 installshield express 中访问会话属性 ProductName

> ID：10608151
> 
> 赞同：2
> 
> 时间：2012-05-15T20:12:38.663
> 
> 标签：vbscript, installshield

如何使用 vbscript（installshield express 2010 或 2011）在静默安装中访问 productname 的会话属性。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T17:00:55.380

根据我的经验，您也可以使用即时自定义操作在静默安装期间读取属性。您无法使用延迟的自定义操作访问属性。您的自定义操作是否设置为立即？ [http://msdn.microsoft.com/library/aa368268.aspx](http://msdn.microsoft.com/library/aa368268.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T07:38:49.057

我认为这可以完成工作:)

```
Dim ISProject

Set ISProject = CreateObject("IswiAuto15.ISWiProject") \*Create the object*/

ISProject.OpenProject ("C:\Path\To\ISM\Project.ism")\*Initialize it*/

ISProject.ProductName   \* Like this you get the value of the name property */

ISProject.ProductName="MyInstallShield" \* and this is how you set */

ISProject.SaveProject()
ISProject.CloseProject 
```

我希望这会有所帮助

# c++ - _mm_cmpistri 反向

> ID：10608153
> 
> 赞同：0
> 
> 时间：2012-05-15T20:12:41.627
> 
> 标签：c++, string, sse

假设我有这些字符串：

```
char ref[30] = "1234567891234567891";
char oth[30] = "1234567891234567891"; 
```

我想`_mm_cmpistri`在 C++ 中使用 SSE 4.2 函数；通常字符串是从左到右解析的。有没有办法告诉函数反向搜索（从右到左而不是从左到右比较？

而不是搜索--------------->

*   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16
*   16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1

以这种方式搜索<-----------------

后期编辑：

这就是我想要做的：

我有两个字符串，我需要一个带有此标头的函数：

```
int sse_cmp(const char *a, int posA, const char *b, int posB); 
```

此函数必须比较字符串“backwords”： from `posA`to`0`或 until `posB == 0`。该函数必须从后面返回公共字符的数量。

前任：

```
 <--------- posA
 a : 1 2 3 4 5 6 7 8  9
 b : a b c d 7 8 9
          <---- posB 
```

将返回`3 ( 987 )`

最有效的方法是什么？（与上交所）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T23:43:13.227

您可以使用 _SIDD_MOST_SIGNIFICANT 作为 _mm_cmpistri 的模式参数的一部分。请参阅英特尔 SSE4 编程参考

# ruby-on-rails - 如何在 Ruby on Rails 中找到上传文件的大小？

> ID：10608155
> 
> 赞同：17
> 
> 时间：2012-05-15T20:12:48.207
> 
> 标签：ruby-on-rails, file-upload

我没有使用carrierwave 或回形针来上传文件。我想找出用户上传的文件的文件扩展名和大小（以字节为单位）？关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-15T20:16:34.650

```
File.size(doc.filename) 
```

只需将文件名放入大括号中，您就应该设置好。

如果您想要 KB/MB 使用：

```
number_to_human_size(File.size(doc.filename)) 
```

编辑：

您可以使用确切的路径或路径名

```
1.9.3p125 :005 > x=Pathname.new("/usr/bin/ruby")
 => #<Pathname:/usr/bin/ruby> 
1.9.3p125 :006 > File.size(x)
 => 5488 
```

对于扩展：

```
File.extname("test.rb")         #=> ".rb" 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-15T20:49:08.227

```
params[:file].size
File.extname(params[:file].original_name) 
```

或者`params[:file].original_name.match(/\.(\S*)$/).try(:"[]",1)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T20:19:15.753

您可以使用 Ruby 的 File 类方法。

*   [文件大小](http://www.ruby-doc.org/core-1.9.3/File.html#method-c-size)
*   [文件.extname](http://www.ruby-doc.org/core-1.9.3/File.html#method-c-extname)

# xml - 复杂 XML 的 XSL 转换

> ID：10608158
> 
> 赞同：-3
> 
> 时间：2012-05-15T20:12:52.230
> 
> 标签：xml, xslt

我有一个复杂的 XML，我正在尝试编写一个 XSL 转换以将其转换为 HTML。有人可以帮我吗？

这是XML

```
<?xml version="1.0" encoding="iso-8859-1"?>
<?xml-stylesheet type="text/xsl" href="Mbooks.xsl"?>
<project>
  <books>
    <bookName>Eclpise</bookName>
    <bookCount>3</bookCount>
    <Data>
      <NEW>
        <bookNumber>book3687110</bookNumber>
        <ISBN>927fd6ca660e5a9</ISBN>
        <Isbninfo>
          <IsbninfoDetails>
            <IsbninfoName>new book</IsbninfoName>
            <IsbninfoVersion>version 1</IsbninfoVersion>
          </IsbninfoDetails>
          <IsbninfoDetails>
            <IsbninfoName> new book 1</IsbninfoName>
            <IsbninfoVersion>version 2</IsbninfoVersion>
          </IsbninfoDetails>
        </Isbninfo>
      </NEW>
      <NEW>
        <bookNumber>book3674796</bookNumber>
        <ISBN>6fa276825144</ISBN>
        <Isbninfo>
          <IsbninfoDetails>
            <IsbninfoName>new book 3</IsbninfoName>
            <IsbninfoVersion>version 3</IsbninfoVersion>
          </IsbninfoDetails>
          <IsbninfoDetails>
            <IsbninfoName>new book 4</IsbninfoName>
            <IsbninfoVersion>version 4</IsbninfoVersion>
          </IsbninfoDetails>
        </Isbninfo>
      </NEW>
    </Data>
  </books>
  <books>
    <bookName>ORACLE</bookName>
    <bookCount>0</bookCount>
    <Data>
    </Data>
  </books>
  <books>
    <bookName>MUSIC</bookName>
    <bookCount>0</bookCount>
    <Data>

    </Data>
  </books>
</project> 
```

***这是 XSLT。***

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet 
  version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:template match="/">
    <html>
      <body>
        <h2>BOOK_INFORMATION </h2>
        <table style="display: inline-block; border: 1px solid; float: left; ">
          <tr bgcolor="#FFA500">
            <th>book Name</th>
            <th>book_Count</th>
            <th>book_Number</th>
            <th>ISBN</th>
            <th>Isbninfo_Name</th>
            <th>Isbninfo_Version</th>
          </tr>

          <xsl:for-each select="project/books">
            <tr>
              <td>
                <xsl:value-of select="bookName"/>
              </td>
              <td>
                <xsl:value-of select="bookCount"/>
              </td>
            </tr>
          </xsl:for-each>

        </table>

      </body>
    </html>
  </xsl:template>

</xsl:stylesheet> 
```

我不确定如何获得其他信息：我希望将所有信息都放在一张桌子上。我试着`<xsl:for-each>`在 for each 里面做，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T20:51:26.913

试试这个 XSLT：

```
<xsl:stylesheet 
  version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:template match="text()">
  </xsl:template>

  <xsl:template match="IsbninfoDetails">
    <tr>
      <td>
        <xsl:value-of select="../../../../bookName"/>
      </td>
      <td>
        <xsl:value-of select="../../../../bookCount"/>
      </td>
      <td>
        <xsl:value-of select="../../bookNumber"/>
      </td>
      <td>
        <xsl:value-of select="../../ISBN"/>
      </td>
      <td>
        <xsl:value-of select="IsbninfoName"/>
      </td>
      <td>
        <xsl:value-of select="IsbninfoVersion"/>
      </td>
    </tr>
  </xsl:template>

  <xsl:template match="books[not(Data/NEW)]">
    <tr>
      <td>
        <xsl:value-of select="bookName"/>
      </td>
      <td>
        <xsl:value-of select="bookCount"/>
      </td>
    </tr>
  </xsl:template>

  <xsl:template match="NEW[not(Isbninfo/IsbninfoDetails)]">
    <tr>
      <td>
        <xsl:value-of select="../../bookName"/>
      </td>
      <td>
        <xsl:value-of select="../../bookCount"/>
      </td>
      <td>
        <xsl:value-of select="bookNumber"/>
      </td>
      <td>
        <xsl:value-of select="ISBN"/>
      </td>
    </tr>
  </xsl:template>

  <xsl:template match="/">
    <html>
      <body>
        <h2>BOOK_INFORMATION </h2>
        <table style="display: inline-block; border: 1px solid; float: left; ">
          <tr bgcolor="#FFA500">
            <th>book Name</th>
            <th>book_Count</th>
            <th>book_Number</th>
            <th>ISBN</th>
            <th>Isbninfo_Name</th>
            <th>Isbninfo_Version</th>
          </tr>
          <xsl:apply-templates/>
        </table>

      </body>
    </html>
  </xsl:template>

</xsl:stylesheet> 
```

应用于您的示例会产生以下结果：

```
<html>
  <body>
    <h2>BOOK_INFORMATION </h2>
    <table style="display: inline-block; border: 1px solid; float: left; ">
      <tr bgcolor="#FFA500">
        <th>book Name</th>
        <th>book_Count</th>
        <th>book_Number</th>
        <th>ISBN</th>
        <th>Isbninfo_Name</th>
        <th>Isbninfo_Version</th>
      </tr>
      <tr>
        <td>Eclpise</td>
        <td>3</td>
        <td>book3687110</td>
        <td>927fd6ca660e5a9</td>
        <td>new book</td>
        <td>version 1</td>
      </tr>
      <tr>
        <td>Eclpise</td>
        <td>3</td>
        <td>book3687110</td>
        <td>927fd6ca660e5a9</td>
        <td> new book 1</td>
        <td>version 2</td>
      </tr>
      <tr>
        <td>Eclpise</td>
        <td>3</td>
        <td>book3674796</td>
        <td>6fa276825144</td>
        <td>new book 3</td>
        <td>version 3</td>
      </tr>
      <tr>
        <td>Eclpise</td>
        <td>3</td>
        <td>book3674796</td>
        <td>6fa276825144</td>
        <td>new book 4</td>
        <td>version 4</td>
      </tr>
      <tr>
        <td>ORACLE</td>
        <td>0</td>
      </tr>
      <tr>
        <td>MUSIC</td>
        <td>0</td>
      </tr>
    </table>
  </body>
</html> 
```

这个想法是让不同的模板匹配在 XML 中找到的各种可能的详细信息级别 - 每个模板生成一个包含更多或更少单元格的表格行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-16T15:46:01.870

```
<html>   
<body>     
 <h2>BOOK_INFORMATION </h2>  
   <table style="display: inline-block; border: 1px solid;     float:  left; ">      
<tr bgcolor="#FFA500">        
<th>book Name</th>    
<th>book_Count</th>     
<th>book_Number</th>      
<th>ISBN</th>        
 <th>Isbninfo_Name</th>     
<th>Isbninfo_Version</th>  
</tr>     
<tr>       
<td rowspan ="4">Eclpise</td>      
 <td rowspan ="4">3</td>       
 <td rowspan = "2">book3687110</td>   
  <td rowspan = "2">927fd6ca660e5a9</td>        
 <td>new book</td>
 <td>version 1</td>  
 </tr>
<tr>
<td>new book1</td>
<td>version 2</td> 
</tr>  
<tr>   
<td rowspan ="2">book3674796</td>    
<td rowspan ="2">6fa276825144</td>   
<td>new book2</td>
<td>version 3</td>  
</tr>
<tr>
<td>new book3</td>
<td>version 4</td> 
</tr>    
 <tr>      
<td>ORACLE</td>   
<td>0</td>   
</tr>      
<tr>       
<td>MUSIC</td>   
<td>0</td>    
</tr>   
</table>  
</body>
</html> 
```

# c++ - 这是溢出吗？

> ID：10608159
> 
> 赞同：0
> 
> 时间：2012-05-15T20:13:00.787
> 
> 标签：c++, double, long-integer

我有这段代码：

```
struct timeval start, end;
gettimeofday(&start, NULL);
//code I'm timing
gettimeofday(&end, NULL);
long elapsed = ((end.tv_sec-start.tv_sec)*1000000 + end.tv_usec-start.tv_usec);
ofstream timeFile;
timeFile.open ("timingSheet.txt");
timeFile << fixed << showpoint;
timeFile << setprecision(2);
timeFile << "Duration: " << elapsed << "\n";
timeFile.close(); 
```

这将输出已经过去的微秒数。但是，如果我改变这一行

```
long elapsed = ((end.tv_sec-start.tv_sec)*1000000 + end.tv_usec-start.tv_usec); 
```

对此：

```
long elapsed = ((end.tv_sec-start.tv_sec)*1000000 + end.tv_usec-start.tv_usec)/1000000.0; 
```

我得到一个负值。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:21:14.877

您正在除以 double: `1000000.0`，然后重新转换为整数类型。

假设你所有的开始和结束变量都是整数（或长整数），有一个尴尬的转换成双精度数，然后再转换成一个长整数。

尝试：

```
double elapsed = (double)(end.tv_sec-start.tv_sec) + (double)(end.tv_usec-start.tv)/1000000.0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T20:41:14.707

我使用我从这里某处借来的计时课程。

```
#include <time.h>
#include <sys/time.h>
#include <iomanip>
#include <iostream>

using namespace std;

class Timer 
{
private:

timeval startTime;

public:

  void start()
  {
    gettimeofday(&startTime, NULL);
  }

  double stop()
  {
    timeval endTime;
    long seconds, useconds;
    double duration;

    gettimeofday(&endTime, NULL);

    seconds  = endTime.tv_sec  - startTime.tv_sec;
    useconds = endTime.tv_usec - startTime.tv_usec;

    duration = seconds + useconds/1000000.0;

    return duration;
  }

  static void printTime(double duration)
  {
    cout << setprecision(6) << fixed << duration << " seconds" << endl;
  }
}; 
```

例如：

```
Timer timer = Timer();
timer.start();
long x=0;
for (int i = 0; i < 256; i++)
  for (int j = 0; j < 256; j++)
    for (int k = 0; k < 256; k++)
      for (int l = 0; l < 256; l++)
        x++;
timer.printTime(timer.stop()); 
```

产量`11.346621 seconds`。

对于我的[哈希函数项目](https://stackoverflow.com/questions/10605469/check-if-value-exists-across-16-containers)，我得到：

```
Number of collisions: 0
Set size: 16777216
VM: 841.797MB
22.5810500000 seconds 
```

# .net - 将会话信息传递到存储库层

> ID：10608161
> 
> 赞同：1
> 
> 时间：2012-05-15T20:13:04.383
> 
> 标签：.net, asp.net-mvc-3, ninject

我继承了一个 ASP.NET MVC3 + NInject 应用程序，我的任务是在 SQL Server 级别实现虚拟专用数据库。为了使其工作，用于连接到 SQL 的凭据需要根据用户进行更改。

如何将特定于会话的信息传递到存储库实现层？我宁愿不向每个服务和存储库调用添加参数。

当前，连接字符串是在创建存储库对象时从 web.config 条目设置的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:59:37.327

看完这篇文章： [Ninject - 根据子域动态指定连接字符串](https://stackoverflow.com/questions/7024952/ninject-dynamically-specifying-a-connection-string-based-on-a-sub-domain)

我在基础存储库对象的构造函数中添加了一个参数：

```
public DataObject( string connectionString) 
```

并在绑定代码中使用了 Ninject 方法*WithConstructorArgument()*如下：

```
k.Bind<Repository.Interface.Admin>().To<Repository.LinqToSql.Admin>().WithConstructorArgument("connectionString", context => GetConnString()); 
```

# iphone - 高级 iOS 数据库

> ID：10608168
> 
> 赞同：2
> 
> 时间：2012-05-15T20:13:23.120
> 
> 标签：iphone, ios, database, ipad, ios5

我们正在开发一个需要处理大量结构化数据的应用程序。iPhone 和 iPad 最先进的数据库是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T20:16:05.997

有两个明显的候选者：SQLite 或 Core Data。

SQLite 为您提供低级别的粒度/灵活性，但您必须编写更多代码。SQLite 应该适用于甚至 2GB 的数据集，尽管我个人没有尝试在 iOS 中使用这么大的任何东西。

Core Data 将细节从您手中抽象出来，使您免于编写大量代码，但优化可能会涉及到很多细节，并且需要掌握很多细节。

最初的学习曲线（除非你碰巧已经是一个 SQL 专家）使用 Core Data 可能更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T22:26:38.767

如果你追求 SQLite，你可以使用[FMDB](https://github.com/ccgus/fmdb) Objective C 包装器，它极大地简化了你的代码。比自己与 SQLite3 C 接口交互要容易得多。我将它与一个非常复杂的 SQL 数据库一起使用，它是一个救星。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T20:27:05.983

是的，您可以在 iPhone 上使用 sqlite 和 coredata 作为数据库（持久存储）。但是如果数据库变大，sqlite 会在 coredata 上得分。您没有提到数据的大小。对于较小的数据，您甚至可以使用 plist，它明显更快，但是对于较大的数据有明显的性能问题。

您可以使用某些 sqlite3 包装器，例如[EntropyDb](http://code.google.com/p/entropydb/)和[FMDB 。](https://github.com/ccgus/fmdb)

两个包装都很好

# websphere - 在 Lotus 连接中为 HomePage 应用程序分配管理员角色

> ID：10608169
> 
> 赞同：0
> 
> 时间：2012-05-15T20:13:23.530
> 
> 标签：websphere, ibm-connections

我在这里遵循了这个网站的程序：[http](http://wpcertification.blogspot.com.br/2011/04/assigning-administrator-role-to.html) : //wpcertification.blogspot.com.br/2011/04/assigning-administrator-role-to.html。但是当我登录时管理选项卡没有出现。可以是什么？

# java - 如何从另一台机器上的独立客户端通过 Internet 调用在远程机器上运行的 EJB，而没有 JSP/Servlet 作为中间体？

> ID：10608170
> 
> 赞同：0
> 
> 时间：2012-05-15T20:13:28.737
> 
> 标签：java, jakarta-ee, servlets, ejb, weblogic

案例：开发一个独立的 java 客户端，它将在多个用户桌面的不同位置运行。应用服务器（Oracle Weblogic）将运行在不同地方的集中位置。

现在我想从客户端访问/调用在中央服务器上运行的 EJB（会话 Bean）。由于客户端和服务器位于不同的位置，并且没有通过 Intranet 或 LAN 连接，因此唯一的连接媒介是 Internet。

我的问题是如何在不使用 servlet/JSP 层的情况下直接从客户端调用服务器中的 EJB？

EJB 是为远程访问而设计的，为什么要依赖 servlet？

我读过 RMI-IIOP 可用于建立这种类型的连接，但我无法通过 Internet 使用 RMI-IIOP！

这种远程通信的最佳架构/解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-23T18:23:05.730

请记住，EJB 是一个简洁的业务逻辑单元，它们与协议无关。将其暴露给调用者是应用服务器的工作。RMI-IIOP/CORBA 只是默认设置。

IIOP 的 Internet 路由问题与许多协议类似，并不是它们不通过 Internet 路由，而是它们没有内置简单的代理/反向代理功能。因此存在通过 DMZ 的问题。与支持反向代理的 HTTP 相比，或者 SMTP 允许中继。防火墙端口通常也会关闭，您通常不会将应用程序服务器放在 DMZ 中。

为了解决直接访问外部网络的业务逻辑的问题，我通常将协议更改为专为外部网络通信而设计的协议。例如，使用 @WebMethod 注释（或部署描述符）EJB 并自动作为 SOAP 服务可用，或使用 @PATH（等）将它们公开为 HTTP/JSON/XML 服务。

CORBA 类型的协议具有开箱即用的安全性、XA 事务功能并且性能非常高。我通常在内部将它用于企业级面向组件的系统。（每个 EJB 组件本质上都用作微服务）而对于外部集成，尤其是在调用者不需要预先知道接口契约的情况下，我通常会为 EJB 使用 SOAP 或 HTTP/JSON/XML 端点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T20:34:29.497

没有 servlet 依赖项。有一个特定于应用服务器的自定义客户端/协议依赖项。每个服务器都有自己的建立连接的方式，通过为适当的提供者和协议处理程序配置 JNDI 来体现。

为什么 RMI-IIOP 不能在 Internet 上工作？我能看到的唯一潜在问题是安全性，我不知道是否有 RMI-IIOP 的加密版本，但除此之外，它是一个完全可路由的协议。

您可能会遇到端口和防火墙问题，但这不是协议错误。如果您想通过端口 80（http 的端口）运行 RMI-IIOP，那很好（显然它不会是 http，也不会与 http 代理一起使用，但同样，这不是协议问题）。

Weblogic 也有（有？）他们自己的协议，T3？我想是吗？你能用那个吗？

我认为关键是为什么你不认为你可以“通过互联网”运行 RMI-IIOP，并试图解决这个问题，而不一定要使用什么协议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-11T14:53:18.223

RMI/IIOP 是应用程序服务器提供的默认值。通过配置/注释，可以使用 SOAP 或 HTTP/XML/JSON。（尽管这些协议在安全性、交易等方面有一些权衡）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T07:22:42.253

好吧，EJB 根本不依赖于 servlet。可以使用 RMI/IIOP 直接调用它们。您必须面对的唯一问题是网络结构，我的意思是 RMI/IIOP 使用了一些通常在公司防火墙中未打开的端口，并且可能很难打开它们。所以通常最好发出 HTTP 请求，因为几乎所有防火墙都接受这种请求。

因此，如果您在 Intranet 中（客户端和服务器在同一个 Intranet 中），您可以使用 RMI/IIOP，但如果您的客户端和服务器放置在具有 Internet 连接的不同网络中，那么我建议您使用 HTTP。您可以使用 Web 服务并将您的 EJB 作为 Web 服务“导出”。如果您不想使用 Web 服务，那么您可以将接收 HTTP 请求并调用 EJB 的 servlet 实现为 extrema-ratio。这取决于您必须返回给客户端的对象类型。如果它是一个简单的字符串或不太复杂的东西，那么您甚至可以使用 Servlet，但如果它们是对象，那么 Servlet 解决方案不是正确的选择。

# javascript - 在 JavaScript 中使用 crossfilter 动态返回结果

> ID：10608171
> 
> 赞同：16
> 
> 时间：2012-05-15T20:13:35.257
> 
> 标签：javascript, json, crossfilter

我觉得crossfilter库API解释是为我的技能以上的人写的，但我也知道掌握它会解决我的问题。

为简单起见，我将参考[API Page 的](https://github.com/square/crossfilter/wiki/API-Reference)示例数据来回答这个问题。

```
var payments = crossfilter([
  {date: "2011-11-14T16:17:54Z", quantity: 2, total: 190, tip: 100, type: "tab"},
  {date: "2011-11-14T16:20:19Z", quantity: 2, total: 190, tip: 100, type: "tab"},
  {date: "2011-11-14T16:28:54Z", quantity: 1, total: 300, tip: 200, type: "visa"},
  {date: "2011-11-14T16:30:43Z", quantity: 2, total: 90, tip: 0, type: "tab"},
  {date: "2011-11-14T16:48:46Z", quantity: 2, total: 90, tip: 0, type: "tab"},
  {date: "2011-11-14T16:53:41Z", quantity: 2, total: 90, tip: 0, type: "tab"},
  {date: "2011-11-14T16:54:06Z", quantity: 1, total: 100, tip: 0, type: "cash"},
  {date: "2011-11-14T16:58:03Z", quantity: 2, total: 90, tip: 0, type: "tab"},
  {date: "2011-11-14T17:07:21Z", quantity: 2, total: 90, tip: 0, type: "tab"},
  {date: "2011-11-14T17:22:59Z", quantity: 2, total: 90, tip: 0, type: "tab"},
  {date: "2011-11-14T17:25:45Z", quantity: 2, total: 200, tip: 0, type: "cash"},
  {date: "2011-11-14T17:29:52Z", quantity: 1, total: 200, tip: 100, type: "visa"}
]); 
```

我能够返回匹配特定键（数量、总数等）的记录，但我不明白如何返回匹配键/值对组合的结果。例如，我如何返回与数量大于 1、总数等于 90、tip 等于 0 和 tab 类型的结果匹配的结果集？这是我完全迷路的地方。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-18T21:45:02.623

您可以为每个属性创建一个维度，然后使用您指定的相应过滤条件调用每个维度的过滤方法，就像这样。

```
var payments_by_quantity = payments.dimension(function(d){return d.quantity}),
    payments_by_total = payments.dimension(function(d){return d.total}),
    payments_by_tip = payments.dimension(function(d){return d.tip}),
    payments_by_type = payments.dimension(function(d){return d.type});

payments_by_quantity.filter([1, Infinity]);
payments_by_total.filter(90);
payments_by_tip.filter(0);
payments_by_type.filter("tab");

payments_by_type.top(Infinity) 
```

效果是累积的，因此最后一行实际上是所有值的结果，所有值都尊重来自所有维度的所有过滤器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-13T16:37:53.170

作为一个初学者，我发现上面的答案准确但不准确，即我没有得到或意想不到的结果（没有不尊重 slo-jo，但我是从初学者的角度写的，因为我是一个交叉过滤器 nube）。问题是在调用某些过滤器之前需要清除过滤器（您需要使用更多种类扩展数据集，例如不同的提示、总计等，以了解我的意思）。输出到控制台对我有帮助。

这有助于我的理解：

```
 var data = [
  {date: "2011-11-14T16:17:54Z", quantity: 2, total: 190, tip: 100, type: "tab"},
  {date: "2011-11-14T16:20:19Z", quantity: 2, total: 190, tip: 100, type: "tab"},
  {date: "2011-11-14T16:28:54Z", quantity: 1, total: 300, tip: 200, type: "visa"},
  {date: "2011-11-14T16:30:43Z", quantity: 222, total: 990, tip: 0, type: "tab"},
  {date: "2011-11-14T16:48:46Z", quantity: 2, total: 90, tip: 0, type: "tab"},
  {date: "2011-11-14T16:53:41Z", quantity: 5, total: 90, tip: 0, type: "tab"},
  {date: "2011-11-14T16:54:06Z", quantity: 1, total: 100, tip: 0, type: "cash"},
  {date: "2011-11-14T16:58:03Z", quantity: 2, total: 90, tip: 0, type: "tab"},
  {date: "2011-11-14T17:07:21Z", quantity: 2, total: 90, tip: 0, type: "tab"},
  {date: "2011-11-14T17:22:59Z", quantity: 2, total: 990, tip: 0, type: "tab"},
  {date: "2011-11-14T17:25:45Z", quantity: 2, total: 200, tip: 0, type: "cash"},
  {date: "2011-11-14T17:29:52Z", quantity: 1, total: 200, tip: 100, type: "visa"}
];

<script type="text/javascript">

// questions: For instance, how would I return the result set that matched results with a quantity more than 1, a total equal 90, a tip equal 0 and a type of tab? 
// create dimensions for each attribute
var payments_by_quantity = payments.dimension(function(d){return d.quantity});
     payments_by_total = payments.dimension(function(d){return d.total}),
     payments_by_tip = payments.dimension(function(d){return d.tip}),
     payments_by_type = payments.dimension(function(d){return d.type});

//need top(Infinity) to print out contents of filtered items
var morethan1 = payments_by_quantity.filter([1, Infinity]).top(Infinity);
console.log("morethan1",morethan1);

var tot_eq_90 = payments_by_total.filter(90).top(Infinity);
console.log("tot_eq_90",tot_eq_90);

// clear filters. If not, the result below will still be filtered by totals = 90
payments_by_total.filterAll();

console.log("top1= biggest paymt qty:", payments_by_quantity.top(1));
payments_by_total.filterAll();
console.log("top2= biggest paymt qty:", payments_by_quantity.top(2));
payments_by_total.filterAll();

console.log("bottom paymt tip:", payments_by_tip.bottom(1));

var tip_eq_0 = payments_by_tip.filter(0).top(Infinity);
console.log("tip_eq_0",tip_eq_0);
payments_by_total.filterAll();

var typetab = payments_by_type.filter("tab").top(Infinity);
console.log("typetab",typetab);
payments_by_total.filterAll();

var typetab_i = payments_by_type.top(Infinity);
console.log("typetab+i",typetab_i); 
```

# ruby-on-rails - <%= will_paginate @posts %> 没有在生产中显示链接（Heroku）

> ID：10608183
> 
> 赞同：2
> 
> 时间：2012-05-15T20:14:40.210
> 
> 标签：ruby-on-rails, ruby, will-paginate

我在使用 will_paginate gem 时遇到问题，因为 Heroku 生产中没有显示分页链接。它在本地环境中运行良好。

一般信息

*   我在生产数据库中有 11 个帖子
*   heroku 日志似乎没有给我任何错误。

宝石文件

```
gem 'rails', '3.2.3'

group :development do
  gem 'sqlite3'
end

group :production do
  gem 'pg'
end

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'twitter-bootstrap-rails'
  gem 'therubyracer', :platform => :ruby
  gem 'less'
  gem 'uglifier', '>= 1.0.3'
end

  gem 'jquery-rails'
  gem 'opentok'
  gem 'redcarpet', '1.17.2'
  gem 'will_paginate', "~> 3.0.3"
  gem 'bcrypt-ruby', :require => "bcrypt" 
```

环境.rb

```
require 'will_paginate/array' 
```

Posts_Controller.rb

```
def index
  @posts = Post.paginate(:page => params[:page], :per_page => 10, :order => 'created_at DESC')

  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @posts }
  end
end 
```

Index.html.erb(帖子)

```
<%= will_paginate @posts %>
<%= render 'post' %> 
```

_Post.html.erb

```
<% @posts.each do |post| %>
<h1><%= link_to post.title, post_path(post) %></h1>
<p>Posted On: <%= post.created_at %></p>
<p>
    <%= markdown(post.body) %>
</p>
<% if admin? %>
    <%= link_to "Edit", edit_post_path(post), :class => "btn" %>
    <%= link_to "Destroy", post_path(post), :method => :delete, :class => :destroy %>
<% end %>
<hr/> 
```

如果您需要更多信息，请告诉我！

# javascript - 使 javascript 调用适用于多个 div 框

> ID：10608184
> 
> 赞同：0
> 
> 时间：2012-05-15T20:14:42.593
> 
> 标签：javascript, zeroclipboard

我有以下 JavaScript 代码，它适用于“来自”和“复制”的 div（当用户单击“复制”时，它会从“来自”复制）。我正在使用 ZeroClipboard。

```
clip.addEventListener('mouseDown', function() {
var pre = document.getElementById('from');
clip.setText(pre.innerHTML);
});

clip.glue('copy'); 
```

但是，我希望这适用于多个 div - 现在它只适用于第一个。我不是 JS 专家，所以我谦虚地请你解释一下如何做到这一点。我将使用 PHP 将我的 div 分别命名为 from1、from2、from3 等和 copy1、copy2、copy3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T20:20:45.113

您想使用`var divs = document.getElementsByTagName('div')`然后迭代`divs`对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T20:27:08.193

史蒂夫的回答将适用于页面上的所有 div。假设您有一些不想复制的 div，更好的解决方案是：

```
var pre = document.getElementsByClassName('copy'); 
```

然后 Amd 使用 a`for`迭代生成的数组。

```
for(i=0; i<pre.length; i++){
    clip.setText(pre[i].innerHTML);
} 
```

# c# - 如何反序列化使用未指定和可变属性名称的 JSON 对象

> ID：10608188
> 
> 赞同：4
> 
> 时间：2012-05-15T20:14:52.340
> 
> 标签：c#, json.net

我有一个类似于此的 JSON 响应（我无法控制）：

```
{"response":{
  "a" : "value of a",
  "b" : "value of b",
  "c" : "value of c",
  ...
}} 
```

在哪里：

*   “a”、“b”、“c”是未知名称。
*   项目的数量可能会有所不同。

最后我需要的是所有值的字符串数组。保留名称是一种奖励（字典？），但我需要按它们出现的顺序浏览值。

您将如何使用 JSON.NET 实现这一目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T20:21:48.413

您可以使用命名空间中的`JObject`类`Newtonsoft.Json.Linq`将对象反序列化为类似 DOM 的结构：

```
public class StackOverflow_10608188
{
    public static void Test()
    {
        string json = @"{""response"":{
          ""a"" : ""value of a"",
          ""b"" : ""value of b"",
          ""c"" : ""value of c""
        }}";
        JObject jo = JObject.Parse(json);
        foreach (JProperty property in jo["response"].Children())
        {
            Console.WriteLine(property.Value);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T20:55:08.670

这有效，但不是很漂亮。我相信您可以使用`JavaScriptSerializer`.

```
var json = "{\"response\":{\"a\":\"value of a\",\"b\":\"value of b\",\"c\":\"value of c\"}}";
var x = new System.Web.Script.Serialization.JavaScriptSerializer();
var res = x.Deserialize<IDictionary<string, IDictionary<string, string>>>(json);

foreach (var key in res.Keys)
{
    foreach (var subkey in res[key].Keys)
    {
        Console.WriteLine(res[key][subkey]);
    }
} 
```

或者

```
Console.WriteLine(res["response"]["a"]);
Console.WriteLine(res["response"]["b"]);
Console.WriteLine(res["response"]["c"]); 
```

输出：

```
value of a
value of b
value of c 
```

# ios - 增强现实：用 iPad 相机投影物体宽度的算法？

> ID：10608192
> 
> 赞同：0
> 
> 时间：2012-05-15T20:15:02.853
> 
> 标签：ios, ipad, augmented-reality

在 iPad 应用程序中，我们希望帮助用户以增强现实应用程序的风格使用相机可视化对象的宽度。

例如，如果我们想帮助某人想象一个书架靠墙的宽度，我们该怎么做呢？是否有估算宽度的算法（即，如果您站在 5 英尺外并将相机对准墙壁，相机中的 200 像素将代表 X 英寸）？

有什么好的资源可以开始寻找吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T20:27:28.863

为此，您可能希望自己做一些研究，因为这将取决于所使用的相机、分辨率和景深。

我建议拿一张大纸条（墙纸可以很好地工作）并以指定的间隔写下测量值，例如，您可以在纸上为每只脚写下距离标记。然后你需要做的就是站在离墙壁不同距离的地方，把纸贴在墙上，然后拍照，然后你应该能够建立距离、分辨率和测量值如何相互关联的相关性，并使用这些发现来形成自己的算法。你基本上已经回答了你自己的问题。

# sql - 需要将数据从一列分成多列

> ID：10608193
> 
> 赞同：-1
> 
> 时间：2012-05-15T20:15:05.120
> 
> 标签：sql, sql-server, tsql

我在编写用于将数据从一列分离到多列的查询时遇到问题。

例子：

```
Col1
---------------------------
bank.wrong.transaction
bank.wrong.transaction.captured
business.unit.explored.wrong.way
application.failed 
```

需要将数据放入这样的列中：

```
col1      col2           col3
-------------------------------------------------    
wrong     transaction    null
wrong     transaction    captured
unit      explored       wrong
failed    null           null 
```

我根本不知道任何字符串的长度。

请帮我解决一下这个。

谢谢萨哈。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:40:36.313

类似以下的内容可用于获取您请求的输出（不记得我从哪里抢走了 ParseString 函数 - 但我一直在使用它，效果很好）

```
CREATE FUNCTION dbo.fnParseString
    (
      @Section SMALLINT ,
      @Delimiter CHAR ,
      @Text VARCHAR(MAX)
    )
RETURNS VARCHAR(8000)
AS 
    BEGIN
        DECLARE @NextPos SMALLINT ,
            @LastPos SMALLINT ,
            @Found SMALLINT

        --#### Uncomment the following 2 lines to emulate PARSENAME functionality
        --IF @Section > 0 
        --    SELECT  @Text = REVERSE(@Text)

        SELECT  @NextPos = CHARINDEX(@Delimiter, @Text, 1) ,
                @LastPos = 0 ,
                @Found = 1

        WHILE @NextPos > 0
            AND ABS(@Section) <> @Found 
            SELECT  @LastPos = @NextPos ,
                    @NextPos = CHARINDEX(@Delimiter, @Text, @NextPos + 1) ,
                    @Found = @Found + 1

        RETURN  CASE
            WHEN @Found <> ABS(@Section) OR @Section = 0 THEN NULL
            --#### Uncomment the following lines to emulate PARSENAME functionality
            --WHEN @Section > 0 THEN REVERSE(SUBSTRING(@Text, @LastPos + 1, CASE WHEN @NextPos = 0 THEN DATALENGTH(@Text) - @LastPos ELSE @NextPos - @LastPos - 1 END))
            WHEN @Section > 0 THEN SUBSTRING(@Text, @LastPos + 1, CASE WHEN @NextPos = 0 THEN DATALENGTH(@Text) - @LastPos ELSE @NextPos - @LastPos - 1 END)

            ELSE SUBSTRING(@Text, @LastPos + 1, CASE WHEN @NextPos = 0 THEN DATALENGTH(@Text) - @LastPos ELSE @NextPos - @LastPos - 1 END)
        END
    END

DECLARE @TestData VARCHAR(255)
SET @TestData = 'business.unit.explored.wrong.way'

SELECT  dbo.fnParseString(2, '.', @TestData) ,
        dbo.fnParseString(3, '.', @TestData) ,
        dbo.fnParseString(4, '.', @TestData) ,
        dbo.fnParseString(5, '.', @TestData) ,
        dbo.fnParseString(6, '.', @TestData) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T21:05:30.693

好吧，您还没有回答任何问题，但是如果我的某些假设是正确的（例如，您只关心中间三个值），我将展示如何以这种方式提取数据而无需冗长函数的开销：

```
DECLARE @x TABLE(col1 VARCHAR(255));

INSERT @x 
SELECT 'bank.wrong.transaction'
UNION ALL SELECT 'bank.wrong.transaction.captured'
UNION ALL SELECT 'business.unit.explored.wrong.way'
UNION ALL SELECT 'application.failed';

WITH x(col1, d) AS
( 
  SELECT col1, SUBSTRING(col1, CHARINDEX('.', col1) + 1, 255) + 
    CASE WHEN LEN(col1) - LEN(REPLACE(col1, '.', '')) BETWEEN 1 AND 3 THEN
     REPLICATE('./', 4-(LEN(col1)-LEN(REPLACE(col1, '.', '')))) ELSE '' END
    FROM @x
)
SELECT orig = col1, 
    col1 = NULLIF(PARSENAME(d, 4), '/'), 
    col2 = NULLIF(PARSENAME(d, 3), '/'),
    col3 = NULLIF(PARSENAME(d, 2), '/')
FROM x; 
```

结果：

```
orig                              col1        col2         col3
--------------------------------  ----------  -----------  --------
bank.wrong.transaction            wrong       transaction  NULL
bank.wrong.transaction.captured   wrong       transaction  captured
business.unit.explored.wrong.way  unit        explored     wrong
application.failed                failed      NULL         NULL 
```

# javascript - 通过侦听自定义事件 (JavaScript) 查找动态生成的元素

> ID：10608194
> 
> 赞同：1
> 
> 时间：2012-05-15T20:15:29.677
> 
> 标签：javascript, jquery, event-handling, eventtrigger

我有一个`li`通过 AJAX 动态生成的列表：

```
<ul>
  <li id="hello"></li>
  <li id="world"></li>
  <li id="helloWorld"></li>
</ul> 
```

我的脚本中也有一个全局变量，如下所示：

```
var world = 'world'; 
```

我希望在准备好文档后，在加载列表后立即找到`li`与我的全局变量具有相同 id 的项目：

```
$('ul').find('#' + world); 
```

我不能`.on()`在这里使用传统的事件监听器，因为没有其他事件可以触发它，除了加载本身的结束。

所以我的下一步是在我的加载脚本中触发一个自定义事件：

```
$('ul').trigger('loadingDone'); 
```

然后听它：

```
$('ul').one('loadingDone', theFunctionThatDoesTheSearch ); 
```

问题是，这失败了，它完全忽略了任何生成的元素。

我知道一个可能的解决方案是在 ajax 调用的成功方法中运行这些操作，但是我正在构建的应用程序的当前架构不允许这样做。（我可以并且确实触发了成功 AJAX 方法中的事件，我只是不能在那里进行搜索）

基本上我要求的是替代解决方案，允许加载脚本让我知道它何时完成以及过滤生成的内容而不在加载脚本本身内部进行过滤的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:26:18.110

```
$(document).on("customevent","ul",function(){
console.log("event triggered from inside the ajax success handler");
});

$.ajax({
    url:'/echo/json/',
    success:function(){
    $('div').append("<ul><li>asd</li></ul>");
        $("ul").trigger("customevent");
    }
}); 
```

[http://jsfiddle.net/xp7sr/2/](http://jsfiddle.net/xp7sr/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T20:24:01.400

如果您的 ajax 请求是通过 jquery 执行的，您可以尝试[http://api.jquery.com/ajaxComplete/](http://api.jquery.com/ajaxComplete/)。

# asp.net - Asp.Net MVC3，返回成功 JsonResult

> ID：10608198
> 
> 赞同：10
> 
> 时间：2012-05-15T20:15:49.223
> 
> 标签：asp.net, asp.net-mvc-3

我还需要返回包含成功值（真或假）的 JSON 数据，它也需要有结果消息。

所以我使用 Dictionary 来包含数据，但是当它返回 Jason 数据时，它包含“”（引号）。

```
JsonResult = new Dictionary<string, string>();
JsonResult.Add("Success", "False");
JsonResult.Add("Message", "Error Message");
return Json(JsonResult); 
```

它返回，

```
{"Success":"False","Message":"Error Message"} 
```

但是我需要，

```
{Success:False,Message:"Error Message"} //with out "" (Quot) 
```

有人知道这件事吗？

谢谢！

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-15T20:19:14.447

```
{"Success":"False","Message":"Error Message"} 
```

**是有效的 JSON**。你可以[在这里查看](http://jsonlint.com/)。在 jsonlint.com

您甚至不需要 Dictionary 即可返回该 JSON。您可以简单地使用这样的匿名变量：

```
public ActionResult YourActionMethodName()
{
   var result=new { Success="False", Message="Error Message"};
   return Json(result, JsonRequestBehavior.AllowGet);
} 
```

要从您的客户端访问此数据，您可以执行此操作。

```
$(function(){
   $.getJSON('YourController/YourActionMethodName', function(data) {
      alert(data.Success);
      alert(data.Message);
   });
}); 
```

# java - java - volatile 关键字也适用于非基元

> ID：10608202
> 
> 赞同：17
> 
> 时间：2012-05-15T20:16:23.530
> 
> 标签：java, volatile

我不确定 volatile 关键字是否也应该用于非基元。我有一个由一个线程设置/分配并由另一个线程访问的类成员。我应该声明这个成员 volatile 吗？

```
private /* volatile */ Object o;

public void setMember(Object o) {
    this.o = o;
}

public Object getMember() {
    return o;
} 
```

这里，setMember(...) 由一个线程调用，getMember() 由另一个线程调用。

例如，如果它是一个布尔值，答案是肯定的。

我使用的是 Java 1.4，在这种情况下，该成员是只读的。所以我只关心在这种情况下的可见性，因此我对 volatile 关键字的问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-15T20:19:28.337

是的 -`volatile`对引用类型字段的意义与对原始类型字段的意义完全相同。除了在引用类型的情况下，字段所引用的对象的成员*也*必须设计用于多线程访问。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-15T20:19:14.443

您可以，并且可能会有所帮助，但请记住关键字仅适用于参考设置。它对该对象内部属性的多线程可见性没有影响。如果它是有状态的，那么您可能希望围绕对它的每次访问进行同步，以确保所需的先发生关系。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-15T20:19:39.367

是的，您的代码是正确的。在这种情况下，引用本身是易失的，因此引用的机会在所有其他线程中自动可见，但不会更改被引用的对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-17T07:36:59.050

如果我们查找`AtomicInteger`类，它已声明`value`为**`volatile`**，因此它可以在多线程环境中使用，而不会出现任何线程缓存问题。

```
public class AtomicInteger {
    private volatile int value;

    /**
     * Gets the current value.
     *
     * @return the current value
     */
    public final int get() {
        return value;
    }

    /**
     * Sets to the given value.
     *
     * @param newValue the new value
     */
    public final void set(int newValue) {
        value = newValue;
    }

} 
```

但是，如果您认为对 AtomicInteger 的引用，它将被许多线程使用不同的 AtomicInteger 对象修改；那么你也需要 volatile 作为该参考。

```
private volatile AtomicInteger reference = new AtomicInteger(0); 
```

大多数情况下并非如此。只有对象的值会改变；因此将其声明为最终的。

```
private final AtomicInteger reference = new AtomicInteger(0); 
```

# magento - Magento 管理问题

> ID：10608203
> 
> 赞同：4
> 
> 时间：2012-05-15T20:16:24.007
> 
> 标签：magento

嗨，我正在为我的扩展创建我的第一个管理部分。我创建了一个链接到显示网格的页面的菜单。问题是当您单击以编辑记录时，它会显示此错误

> 致命错误：在第 129 行的 /Applications/MAMP/htdocs/theBookClub/app/code/core/Mage/Adminhtml/Block/Widget/Form/Container.php 中的非对象上调用成员函数 setData()

在我的一生中，我在任何相关文件中都看不到任何参考

```
class Namespace_Bookshelf_Block_Adminhtml_Bookshelf_Edit extends Mage_Adminhtml_Block_Widget_Form_Container
{
   public function __construct()
{
    parent::__construct();

    $this->_objectId = 'id';
    $this->_blockGroup = 'bookshelf';
    $this->_controller = 'bookshelf_admin';
    $this->_mode = 'edit';

    $this->_addButton('save_and_continue', array(
              'label' => Mage::helper('adminhtml')->__('Save And Continue Edit'),
              'onclick' => 'saveAndContinueEdit()',
              'class' => 'save',
    ), -100);
    $this->_updateButton('save', 'label', Mage::helper('bookshelf')->__('Save Example'));

    $this->_formScripts[] = "
        function toggleEditor() {
            if (tinyMCE.getInstanceById('form_content') == null) {
                tinyMCE.execCommand('mceAddControl', false, 'edit_form');
            } else {
                tinyMCE.execCommand('mceRemoveControl', false, 'edit_form');
            }
        }

        function saveAndContinueEdit(){
            editForm.submit($('edit_form').action+'back/edit/');
        }
    ";
}

public function getHeaderText()
{
    if (Mage::registry('example_data') && Mage::registry('example_data')->getId())
    {
        return Mage::helper('bookshelf')->__('Edit Example "%s"', $this->htmlEscape(Mage::registry('example_data')->getName()));
    } else {
        return Mage::helper('bookshelf')->__('New Example');
    }
} 
```

还有这个

```
class Namespace_Bookshelf_Block_Adminhtml_Bookshelf_Grid extends                Mage_Adminhtml_Block_Widget_Grid {

public function __construct() {
    parent::__construct();
    $this->setId('bookshelf_grid');
    $this->setDefaultSort('bookshelf_id');
    $this->setDefaultDir('desc');
    $this->setSaveParametersInSession(true);
}

protected function _prepareCollection() {
    $collection = Mage::getModel('bookshelf/bookshelf')->getCollection();
    $this->setCollection($collection);
    return parent::_prepareCollection();
}

protected function _prepareColumns() {
    $this->addColumn('bookshelf_id', array(
        'header' => Mage::helper('bookshelf')->__('ID'),
        'align' => 'right',
        'width' => '50px',
        'index' => 'bookshelf_id',
    ));

    $this->addColumn('customer_id', array(
        'header' => Mage::helper('bookshelf')->__('Name'),
        'align' => 'left',
        'index' => 'customer_id',
    ));

    $this->addColumn('bookshelf_name', array(
        'header' => Mage::helper('bookshelf')->__('Name'),
        'align' => 'left',
        'index' => 'bookshelf_name',
    ));

    return parent::_prepareColumns();
}

public function getRowUrl($row) {
    return $this->getUrl('*/*/edit', array('id' => $row->getId()));
} 
```

}

还有这个

```
class Newdaymedia_Bookshelf_Block_Adminhtml_Bookshelf extends
Mage_Adminhtml_Block_Widget_Grid_Container
{
public function __construct()
{
$this->_controller = 'bookshelf_admin';
$this->_blockGroup = 'bookshelf';
$this->_headerText = Mage::helper('bookshelf')->__('Item Manager');
$this->_addButtonLabel = Mage::helper('bookshelf')->__('Add Item');
parent::__construct();
}

protected function _prepareLayout()
 {
   $this->setChild( 'grid',
       $this->getLayout()->createBlock( $this->_blockGroup.'/' . $this->_controller . '_grid',
       $this->_controller . '.grid')->setSaveParametersInSession(true) );
   return parent::_prepareLayout();
 }
} 
```

任何帮助将不胜感激！

新的

```
class Namespace_Bookshelf_Block_Adminhtml_Bookshelf_Edit_Form extends     Mage_Adminhtml_Block_Widget_Form
{
protected function _prepareForm()
{
    if (Mage::getSingleton('adminhtml/session')->getExampleData())
    {
        $data = Mage::getSingleton('adminhtml/session')->getExamplelData();
        Mage::getSingleton('adminhtml/session')->getExampleData(null);
    }
    elseif (Mage::registry('example_data'))
    {
        $data = Mage::registry('example_data')->getData();
    }
    else
    {
        $data = array();
    }
    Mage::log("this is the form class");
    $form = new Varien_Data_Form(array(
            'id' => 'edit_form',
            'action' => $this->getUrl('*/*/save', array('id' => $this->getRequest()->getParam('id'))),
            'method' => 'post',
            'enctype' => 'multipart/form-data',
    ));

    $form->setUseContainer(true);

    $this->setForm($form);

    $fieldset = $form->addFieldset('example_form', array(
         'legend' =>Mage::helper('bookshelf')->__('Example Information')
    ));

    $fieldset->addField('name', 'text', array(
         'label'     => Mage::helper('bookshelf')->__('Name'),
         'class'     => 'required-entry',
         'required'  => true,
         'name'      => 'name',
         'note'     => Mage::helper('awesome')->__('The name of the example.'),
    ));

    $fieldset->addField('description', 'text', array(
         'label'     => Mage::helper('bookshelf')->__('Description'),
         'class'     => 'required-entry',
         'required'  => true,
         'name'      => 'description',
    ));

    $fieldset->addField('other', 'text', array(
         'label'     => Mage::helper('bookshelf')->__('Other'),
         'class'     => 'required-entry',
         'required'  => true,
         'name'      => 'other',
    ));

    $form->setValues($data);

    return parent::_prepareForm();
} 
```

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-03T08:33:08.007

这可能会解决您的问题：

在您的表单容器类中：

```
Namespace_Bookshelf_Block_Adminhtml_Bookshelf_Edit 
extends Mage_Adminhtml_Block_Widget_Form_Container 
```

如果添加这些测试行，您将看到 Magento 正在尝试加载哪个 Form 类

```
$form_block = $this->_blockGroup . '/' . 
              $this->_controller . '_' . 
              $this->_mode . 
              '_form';
echo $form_block; 
```

为了与您的代码（上图）一起使用，您的班级：

```
Namespace_Bookshelf_Block_Adminhtml_Bookshelf_Edit_Form 
```

应该回显一个测试值：

```
bookshelf/adminhtml_bookshelf_edit_form 
```

并且应该在以下文件路径中：

```
app/code/local/Namespace/Bookshelf/Block/Adminhtml/Bookshelf/Edit/Form.php 
```

您可能必须调整类名或文件路径，或两者兼而有之，才能使其正常工作。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T21:30:11.890

您需要为您的模块创建一个助手（即使它什么都不做）。在模块的帮助器目录中创建一个名为 Data.php 的文件，并在其中创建一个名为 Namespace_Module_Helper_Data 的类，该类扩展 Mage_Core_Helper_Abstract。

我认为这应该有助于解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T14:05:24.240

假设您的 Adminhtml 控制器位于 Namespace/ModuleName/controllers/Adminhtml/BookshelfController.php

试试 $this->_controller = 'adminhtml_bookshelf'; 在您的表单容器上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-20T14:29:00.143

重要的是要澄清 $this->_controller 不是实际的控制器名称，而是块类名称，而 $this->_blockGroup 实际上是模块名称。

所以试试：

> $this->_blockGroup = 'namespace_bookshelf';
> 
> $this->_controller = 'adminhtml_bookshelf';

# matlab - 如何在 3D 空间中插入点？

> ID：10608204
> 
> 赞同：2
> 
> 时间：2012-05-15T20:16:25.030
> 
> 标签：matlab, interpolation

我有 3D 空间。我知道例如`N`这个空间中的点`(x1,y1,z1)`，`(x2,y2,z2)`...，`(xn,yn,zn)`。我想插入点，这与此不同。我怎样才能在 Matlab 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T20:52:51.000

`interp3`可以帮助你。[这](http://www.mathworks.com/help/techdoc/ref/interp3.html)是文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T23:36:02.243

与往常一样，您的单行查询仍有未回答的问题。

如果数据的形式存在函数关系`z(x,y)`，（或`y(x,z)`） ，`x(y,z)`那么您可能可以使用其中一种插值工具。因此，假设您有位于平面格子上的数据，因此在该格子的每个点上都有`(x,y)`一些值。`z`在这种情况下，您可以使用`interp2`.

或者，如果数据是分散的，但有一些`z(x,y)`你没有的单值函数关系，但它是一些连续函数。无限一阶导数在这里也是一个问题。在这种情况下，假设您的数据至少填充了`(x,y)`平面中的某个凸域，您仍然可以插值`z`. 为此，请使用 griddata 或 TriScatteredInterp。或者你可以使用我自己的[gridfit](http://www.mathworks.com/matlabcentral/fileexchange/8998-surface-fitting-using-gridfit)工具，在文件交换中可以找到。

接下来，你描述数据的方式，我一点也不肯定你有上述形式之一。例如，如果您的数据位于此 3D 域中的某个弯曲路径上，并且您希望沿该弯曲弧线插入点，可以使用我的[interparc](http://www.mathworks.com/matlabcentral/fileexchange/34874-interparc)工具完成，该工具也可以在文件交换中找到。

当人们谈论像这样的空间集的插值时，人们似乎经常遇到的最后一个情况就是一个一般表面，他们希望构建一个整齐的插值、平滑的表面。它可能是像球体表面一样简单的东西，也可能是更复杂的东西。（这些事情从来都不是简单的。）为此，如果它是一个封闭的凸面，您也许可以使用凸包来近似某些东西。更复杂的表面可能需要像 CRUST 这样的工具，尽管我没有可以提供给你的实现。如果您需要，Google 会在那里为您提供帮助。

所有这一切的重点是，您如何插入数据取决于数据的形式、代表的内容以及您将插入的关系的形状。

# visual-studio-2010 - 我的 WP7 应用程序中的 GUID 是什么？

> ID：10608210
> 
> 赞同：0
> 
> 时间：2012-05-15T20:16:42.953
> 
> 标签：visual-studio-2010, windows-phone-7

如果我右键单击我的项目并在“属性”中查找“程序集信息...”，则会有一个名为 GUID 的字段。我是否真的应该关心这一点，因为我有一些可重复使用的基本代码，当我将文件复制并粘贴到新文件夹中时，GUID 不会重新生成。

我发现了一个缺点（我认为），那就是当您将具有相同 GUID 的旧应用程序部署到您的手机时，它会被替换，但这并没有阻止......还有其他我应该知道的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T20:35:54.050

打开`WMAppManifest.xml`文件并查找`ProductID`属性。那是您的应用程序的 GUID 所在的位置。

```
<App xmlns="" ProductID="{b57106ca-db22-4809-9311-385c2a5b0921}"... 
```

# html - 隐藏透明标题下的滚动内容

> ID：10608214
> 
> 赞同：3
> 
> 时间：2012-05-15T20:16:53.140
> 
> 标签：html, header, scroll, hide, transparent

好吧，我已经发疯了，寻找答案。这很简单，我知道。

我的页面顶部有一个固定的透明标题。当我滚动时，我希望正文内容在它下方滚动，但不能通过标题 div 看到。我看过类似的帖子，但对我的情况没有任何帮助。欣赏任何可以提供帮助的提示或线索。谢谢！

下面的示例：thnki.com/hosting/sycamore

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T20:23:40.227

您将需要：

*   制作一个看起来和现在一样的非透明图像，
*   为页面的下部（直接在标题下方/之后）创建一个具有自己溢出样式设置的 div，这将导致滚动条只是页面的一部分
*   或者只是享受你得到的超棒的透明叠加效果。

我喜欢它实际上的样子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-30T18:44:12.673

我已经阅读了许多相关示例来隐藏顶部栏下的主体文本。但是，我无法在我的情况下使用它。我找到了一个在线简单的工作示例。你可能想看看：

[http://www.pmob.co.uk/temp/fixed-header-footer-left-new.htm](http://www.pmob.co.uk/temp/fixed-header-footer-left-new.htm)

我的相关 CSS 配置是： * 你可能注意到我已经声明了 top/bottom/left/right/height 以及 position 为 relative，我设置了 background，overflow 为 auto，我也设置了 z-index。

我认为所有这些组合导致在顶部栏/顶部菜单下滚动时能够隐藏文本内容。

```
.topnavigation {  
    background-position:fixed;
    background-color:   lightgray;
    width:              100%;
    overflow:           auto;
    z-index:            10;

}
    .main_body {
        background:     white;
        position:       relative;
        left:           200px;
        top:            30px;
        bottom:         0;
        right:          0;
        white-space:    wrap; 
        width:          660px; 
        overflow:       auto;
        border:         0px;
        z-index:        1;

    } 
```

# c++ - 如何将 ASCII 和 BINARY 数据同时写入同一个文件

> ID：10608217
> 
> 赞同：5
> 
> 时间：2012-05-15T20:16:59.707
> 
> 标签：c++, file-io, vtk, paraview

我为我的输出使用 VTK 数据类型。由于我的数据变得越来越大，用 ASCII 写它需要相当长的时间，这就是我迄今为止一直在做的事情。

我需要将其更改为二进制格式，但问题是文件有一些标题（请参阅[http://www.vtk.org/VTK/img/file-formats.pdf](http://www.vtk.org/VTK/img/file-formats.pdf)）即使对于二进制文件也需要用 ASCII 编写.

现在我对二进制格式没有足够的经验，我的第一次尝试是通过打开两个流

```
ofstream asciiWriter(file_name.c_str());
ofstream binWriter(file_name.c_str(), ios::app | ios::binary); 
```

问题是输出似乎杂乱无章，`asciiWriter`并且`binWriter`没有以正确的顺序输出，因此我无法在 ParaView 中对文件进行后处理。我尝试过的一件事是使用`asciiWriter.flush()`，`binWriter.flush()`每当我完成标题/数据写入，但这也无济于事。

我该怎么办？

PS：我不想使用 VTK 包本身......它的巨大并增加了我的代码依赖！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T20:36:14.537

在我所知道的所有现代系统上，二进制文件和文本文件之间的唯一区别是 C 运行时库对换行符和文件结尾字符的处理。具体来说，在 *nix 系统上，文本和二进制文件的行为完全相同。在 Windows 上，将 a 写入`'\n'`文本文件会导致将`'\r'`(CR) 后跟`'\n'`(LF) 写入实际文件；读取一`"\r\n"`对显示为单个`'\n'`。同样在 Windows 上，从文本文件中读取`'\x1A'`(Ctrl-Z, EOF) 表示文件结束条件。二进制文件是逐字读取和写入的，没有转换。

阅读您的文档，我注意到它仅在行尾指定`'\n'`（不是）。`"\r\n"`这表明正确的方法是将标头作为二进制文件读取和写入，即使在 Windows 上也是如此。

顺便说一句，一些较旧的系统（想到 RSX-11 和 VMS）在磁盘上具有与文本文件截然不同的二进制文件。他们还直接在操作系统中支持基于记录和索引的文件。但是，他们修改了`open()`, `fopen()`etc 函数的版本（以及其他语言的等效函数）来处理打开文件时可能指定的过多参数。在这样的系统上，您每次都必须使用正确的文件模式。

# coldfusion - fileExist() 无法识别我提供的任何文件

> ID：10608218
> 
> 赞同：0
> 
> 时间：2012-05-15T20:17:02.107
> 
> 标签：coldfusion, file-exists, cffile

我在提交表单后上传了文件，我需要删除文件上传完成后的旧文件。一切正常，表单提交，文件上传。但一般来说 Coldfusion 似乎无法识别旧文件。使用`fileExist()`命令或实际`<cffile action="delete">`命令。同时，当我输出我用于两者的变量`fileExist()`和删除之前，我点击这些行，我导航到我的 ftp 中的确切路径，文件实际上在那里，在表单提交之前和之后。上传的文件不应覆盖以前的照片，因为它们的名称完全不同并且`makeunique`正在使用中。如果有任何帮助，我将不胜感激。

这是我提交表单后的代码片段（我现在只是想让 image1 工作，但其他 3 个图像显示相同的行为。

此行执行`<cfoutput>#variables.erase1#</cfoutput><br />`但`hello2`不执行：

```
<cfquery name="getPreviousImage" datasource="#Application.datasourceName#">
        SELECT 
            image1, image2, image3, image4
        FROM 
            testaCustomers
        WHERE 
            RecordID = <cfqueryparam value="#form.ID#" cfsqltype="CF_SQL_INTEGER" maxlength="50">

</cfquery> 

<cfset variables.oldImage1 = getPreviousImage.image1>
<cfset variables.oldImage2 = getPreviousImage.image2>
<cfset variables.oldImage3 = getPreviousImage.image3>
<cfset variables.oldImage4 = getPreviousImage.image4>

<cfset variables.image1 = getPreviousImage.image1>
<cfset variables.image2 = getPreviousImage.image2>
<cfset variables.image3 = getPreviousImage.image3>
<cfset variables.image4 = getPreviousImage.image4>

<cfif #form.image1# NEQ ""> 

    <cffile action="upload" destination="#Application.filePath#Pics/" filefield="image1" nameconflict="makeunique" result="upload1">

    <cfif isDefined ("upload1.serverFile")>
        <cfset variables.image1 = #upload1.serverFile#> 
    </cfif>

   <cfset variables.erase1 = Application.filePath & "Pics/" & variables.oldImage1>
   <cfoutput>#variables.erase1#</cfoutput><br />

    <cfif fileExists(variables.erase1)>
        hello2
        <cffile action="delete" file="#variables.erase1#">
    </cfif>
</cfif> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:21:06.237

检查您的文件权限。运行您的应用程序服务的帐户可能对您尝试访问的文件没有读取权限。否则，您的路径可能不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T03:51:26.417

您可能必须像使用 Trim() 一样将图像路径包装在 ExpandPath() 函数中；

```
<cfif fileExists(ExpandPath(Trim(variables.erase1)))>
    ...code...
</cfif> 
```

FileExists() 需要物理路径而不是 Web 根路径。ExpandPath() 将网站路径转换为物理路径（*nix & windows）。

# spring - 在 Spring 3 中使用 onSubmitAction

> ID：10608230
> 
> 赞同：0
> 
> 时间：2012-05-15T20:17:48.767
> 
> 标签：spring, spring-mvc, spring-3

我在这样定义的控制器中使用 spring 3 RequestMapping：

```
@RequestMapping(value = "/myServlet" , method = RequestMethod.GET)
      public @ResponseBody String performAction() {
        return "success";
      } 
```

我正在尝试实现一个使用 Spring 2 方法参数的方法，SimpleFormController 正在扩展，onSubmitAction 正在被覆盖，并且正在调用使用 onSubmitAction 参数的方法：

```
 protected void onSubmitAction(ActionRequest request,
                                  ActionResponse response,
                                  Object command,
                                  BindException errors)
{
methodCall(request,response,command,errors);
} 
```

是否可以使用 spring 3 注释 @RequestMapping 访问这些参数（请求、响应、命令、错误），还是我需要以不同的方式实现我的控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T20:37:44.270

Spring MVC 在将请求数据绑定到控制器方法参数方面非常智能。

这是我自己的一些代码的示例，通过说明可以回答您的问题：

```
@RequestMapping(value = "/my-account/email", method = RequestMethod.PUT)
public ModelAndView updateEmail(EditEmailForm editEmailForm, BindingResult result) {
    // ...
} 
```

在这里，Spring MVC 智能地将请求参数绑定到我的“命令”对象（editEmailForm）并将绑定/验证结果绑定到结果。可以通过 result 访问错误，例如 result.hasErrors()、result.getErrors() 等。

显然，在幕后有很多“魔法”，但如果您只是在方法签名中“询问”它，Spring MVC 将几乎总是为您提供您所需要的东西。

希望有帮助。

# c++ - system() c++ 不会在 VirtualBox 中运行

> ID：10608233
> 
> 赞同：0
> 
> 时间：2012-05-15T20:17:56.477
> 
> 标签：c++, system, virtualbox, c++builder, system-calls

我正在尝试编译和运行该应用程序，该应用程序是 4 年前创建的。它是在 Embarcadero RAD Studio C++ builder 中为 Windows 开发的。现在我尝试使用最新版本的 RAD Studio 在 VirtualBox 中的 Windows 中编译和运行它。我对我的应用程序中的另一个应用程序进行了系统调用：

```
 system("dot.exe -Tjpg -o nfa.jpg NFA_graph.txt"); 
```

它一直返回 1 并且没有创建文件。我也试过

```
 system("Echo %CD% >> z:\log.txt"); 
```

并且没有创建文件。我也试过这样：

```
FILE *fpipe;
char *command = "Echo %CD% >> z:\log.txt";
char line[256];

if (0 == (fpipe = (FILE*)_popen(command, "r")))
{
    perror("popen() failed.");
    exit(1);
}

while (fread(line, sizeof line, 1, fpipe))
{
    ShowMessage(line);
}

_pclose(fpipe); 
```

我什么也没得到。我想知道这种奇怪行为的原因是否是我在 VirtualBox 中运行这一切？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:32:25.810

你没有逃避你的 \ 字符。您应该在文件路径中使用 /，如果必须，则使用 \\。此外，Windows 7 不允许您在没有管理员访问权限的情况下写入硬盘驱动器的根目录。

要确定命令环境是否可用，请首先执行以下操作：

```
if (!system(NULL)) {
    // Can't make any system() calls
} 
```

如果您的命令环境可用，那么您需要完全指定路径，确保像我上面提到的那样转义 \，并且不要向驱动器的根目录写入任何内容。另请注意，打开文件不会默认创建目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T20:32:17.483

不，这不太可能。我发现您的代码存在一些问题：您没有检查`errno`是否`system()`返回 1。它可以帮助您发现真正的问题。此外，所有反斜杠都必须 Esc'ed。

我建议`dot.exe`不在`PATH`环境变量中，这就是`system()`失败的原因。

# android - 如何在布局中有许多子项的 Android 布局中添加垂直滚动条？

> ID：10608234
> 
> 赞同：6
> 
> 时间：2012-05-15T20:18:02.560
> 
> 标签：android, android-layout, scrollview, vertical-scrolling

我一直在试图弄清楚如何确保屏幕可以垂直滚动，因为有很多单选按钮并且它们不适合屏幕。我已经尝试了 Stackoverflow 上发布的大多数解决方案，但我不断收到错误，这是我最后一次尝试的布局代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical">

<ScrollView
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical">

 <RadioGroup
        android:id="@+id/radioSharing"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

    <RadioButton
        android:id="@+id/radioSharingYes"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/radio_sharing_yes"  />

    <RadioButton
        android:id="@+id/radioSharingNo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/radio_sharing_no" />

</RadioGroup>

 <RadioGroup
    android:id="@+id/radioInternet"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <RadioButton
        android:id="@+id/radioInternetYes"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/radio_internet_yes"  />

    <RadioButton
        android:id="@+id/radioInternetNo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/radio_internet_no" />

</RadioGroup>

<RadioGroup
    android:id="@+id/radioMap"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <RadioButton
        android:id="@+id/radioMapYes"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/radio_map_yes"  />

    <RadioButton
        android:id="@+id/radioMapNo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/radio_map_no" />

</RadioGroup>

    <RadioGroup
    android:id="@+id/radioCalling"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <RadioButton
        android:id="@+id/radioCallingYes"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/radio_calling_yes"  />

    <RadioButton
        android:id="@+id/radioCallingNo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/radio_calling_no" />

</RadioGroup>

<RadioGroup
    android:id="@+id/radioDatabase"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <RadioButton
        android:id="@+id/radioDatabaseYes"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/radio_database_yes"  />

    <RadioButton
        android:id="@+id/radioDatabaseNo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/radio_database_no" />

</RadioGroup>

<Button
    android:id="@+id/btnSave"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="30dp"
    android:text="@string/btn_display" />

</LinearLayout>
</ScrollView> 
```

我得到的错误是：“ScrollView can host only one direct child”

任何建议将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-15T20:22:59.383

仔细看看你的嵌套：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical">

<ScrollView
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical">

 <RadioGroup
 ......
 </RadioGroup>

</LinearLayout>
</ScrollView> 
```

您应该在 ScrollView 中完全拥有 LinearLayout，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical">

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical">

 <RadioGroup
 ......
 </RadioGroup>

</LinearLayout>
</ScrollView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-06T13:16:11.470

第一个答案有一个错误。

**反而**

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical">
 ......
</ScrollView> 
```

**采用**

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

 ......
  </ScrollView> 
```

# c# - C#如何检查数组是否包含2个整数之间的值

> ID：10608236
> 
> 赞同：2
> 
> 时间：2012-05-15T20:18:09.443
> 
> 标签：c#, lambda

给定一个数组 {1,4,5,6,7,4,7,8}

如何检查是否有 4 和 7 之间的值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T20:19:08.497

```
given.Any(n => n > 4 && n < 7); 
```

随意更改`>`并`<`符合您对排他性的要求。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T20:19:33.397

```
array.Any(i=>i>=4 && i<=7); 
```

# c# - 为什么 ComboBox 最初不显示 IsSelected==true 的 ComboBoxItem？

> ID：10608245
> 
> 赞同：0
> 
> 时间：2012-05-15T20:19:06.400
> 
> 标签：c#, wpf, combobox

在下面的代码中，为什么属性`IsSelected`设置为的项目没有像单击后一样`true`被选中？ `ComboBox``ListBox``Button`![在此处输入图像描述](../Images/3c1d1de1ea45a55ea75be93b21af292e.png)

一旦我点击`ComboBox`，选定的项目就会被选中，但不是之前。 ![在此处输入图像描述](../Images/bec1a4ce9687af56b69b22a335b75537.png)

**xml:**

```
<Window x:Class="WpfApplication1.Desktop.Shell"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Height="350" Width="525">
    <StackPanel>
        <ListBox ItemsSource="{Binding Items}">
            <ListBox.Resources>
                <Style TargetType="ListBoxItem">
                    <Setter Property="IsSelected" 
                            Value="{Binding Path=IsSelected, Mode=TwoWay}" />
                </Style>
            </ListBox.Resources>
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel>
                        <Label Content="{Binding Txt}" />
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
        <ComboBox ItemsSource="{Binding Items}">
            <ComboBox.Resources>
                <Style TargetType="ComboBoxItem">
                    <Setter Property="IsSelected" 
                            Value="{Binding Path=IsSelected, Mode=TwoWay}" />
                </Style>
            </ComboBox.Resources>
            <ComboBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel>
                        <Label Content="{Binding Txt}" />
                    </StackPanel>
                </DataTemplate>
            </ComboBox.ItemTemplate>
        </ComboBox>
        <Button Content="Select second item" Click="Button_Click"  />
    </StackPanel>
</Window> 
```

**xml.cs：**

```
using System.Collections.ObjectModel;
using System.ComponentModel.Composition;
using System.Windows;
using Microsoft.Practices.Prism.ViewModel;

namespace WpfApplication1.Desktop
{
    [Export]
    public partial class Shell : Window
    {
        public class Foo : NotificationObject
        {
            static int _seq = 0;
            string _txt = "Item " + (++_seq).ToString();
            public string Txt { get { return _txt; } }
            bool _isSelected;
            public bool IsSelected
            {
                get { return _isSelected; }
                set
                {
                    _isSelected = value; 
                    RaisePropertyChanged(() => IsSelected);
                }
            }
        }

        public ObservableCollection<Foo> Items { get; set; }

        public Shell()
        {
            Items = new ObservableCollection<Foo>();
            for (int i = 0; i < 5; i++)
                Items.Add(new Foo());
            DataContext = this;
            InitializeComponent();
        }

        void Button_Click(object sender, RoutedEventArgs e)
        {
            Items[1].IsSelected = true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T21:22:12.567

这是因为 ItemContainerStyle 仅在生成 ComboBoxItems 时应用（即当您打开下拉菜单时）。

要解决此问题，您创建另一个名为 SelectedItem 的属性并将 Combobox 的 SelectedValue 绑定到它。

[长的解释和例子在这里](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/30a45233-dc01-40ca-9ead-fa816c395697)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T20:47:06.503

因为绑定是`UpdateSourceTrigger=LostFocus`默认设置的，所以您必须将其更改为`PropertyChanged`以获得您想要的结果。像这样：

```
<Style TargetType="ListBoxItem">
  <Setter Property="IsSelected"Value="{Binding Path=IsSelected, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" />
</Style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T20:46:56.510

将模型用作`DataContext`WPF 窗口时，控件最初的行为可能与您预期的不同。本质上，某些属性/事件在 Window 初始化之前永远不会被设置/调用。在这种情况下，解决方法是在 Window 的`Loaded`事件中设置绑定。

*免责声明*：我没有使用 OP 的特定场景对此进行测试，但这是我过去遇到的行为和解决方法。

# mysql - 如何进行流式查询？

> ID：10608246
> 
> 赞同：0
> 
> 时间：2012-05-15T20:19:08.280
> 
> 标签：mysql, database, database-design

我正在设计一个像 pinterest 这样的网站（用于学习），我想知道我必须在主页上做什么查询才能显示用户的信息流。

我创建了这 6 个表：

```
users, boards, pictures, boards_pictures ( many-to-many table ), followers, comments. 
```

所以在主页上我必须用 6 个表（下面）做这个 JOIN 查询吗？

```
SELECT users.username, pictures.link, comments.comment, boards.title
FROM boards_pictures, pictures, followers, users, comments, boards 
WHERE ( boards_pictures.id_user = followers.id_following ) 
  AND ( boards_pictures.id_picture = pictures.id ) 
  AND ( followers.id_user = $_session['userid'] ) 
  AND ( users.id = followers.id_following )
  AND ( comments.picture_id = pictures.id )
  AND ( boards.id = boards_pictures.boards_id ) 
```

有没有办法避免这种复杂的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T20:40:58.027

从设计的角度来看，我建议使用 jQuery 之类的东西，并为它们中的每一个使用单独的定时 .GET，而不是依赖于刷新整个页面来一次获取它们。- 只是我的看法，我*可能*是错的。

# actionscript-3 - 我怎样才能删除孩子？

> ID：10608255
> 
> 赞同：-1
> 
> 时间：2012-05-15T20:19:28.873
> 
> 标签：actionscript-3, flash

我对 XML 按钮菜单中的 removeChild 有问题，我使用 Linkage 从库中调用按钮 temp 这是我编写它的代码

```
 var genButton:butonProba;

    var i:uint = 0;

    for each (var page:XML in generacijeXML.gener.generation) {

        genButton = new butonTest();    

        genButton.butonText.text = page.@name;

        genButton.source = page.source.toString();

        genButton.butonText.autoSize = TextFieldAutoSize.LEFT;

        genButton.x = 16 + i*225;
        genButton.y = -30;

        genButton.buttonMode = true;
        genButton.mouseChildren = false;

        addChild(genButton);

        i++;
} 
```

一切都很正常......

现在，当我想在单击它时再制作 1 个按钮时，我想删除我之前调用的所有 xml 按钮

我尝试像这样简单

```
close.addEventListener(MouseEvent.CLICK, closed);

  function closed(event:Event):void {
  genButton.removeChild(0);
} 
```

还有这个

```
close.addEventListener(MouseEvent.CLICK, closed);

  function closed(event:Event):void {
  removeChild(genButton);
} 
```

但不工作任何人知道我该怎么做？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T20:38:19.870

我会将所有按钮添加到一个容器中。将容器创建为实例成员并将其添加到构造函数或 init 方法中的阶段：

```
 public var buttonContainer:Sprite = new Sprite();
 addChild(buttonContainer); 
```

在您的循环中，将所有创建的按钮添加到此容器中：

```
 ...
 genButton.buttonMode = true;
 genButton.mouseChildren = false;

 buttonContainer.addChild(genButton);

 i++; 
```

在您单击处理程序中，从容器中删除所有子项：

```
 close.addEventListener(MouseEvent.CLICK, closed);

 function closed(event:Event):void {
     while(buttonContainer.numChildren > 0 )
     {
          buttonContainer.removeChildAt(0);
     }
 } 
```

希望有帮助

# java - lucene 自定义评分

> ID：10608263
> 
> 赞同：0
> 
> 时间：2012-05-15T20:19:38.450
> 
> 标签：java, lucene

有一个文档已经被索引，在搜索时我必须将该文档分成两部分：第一部分由前 100 个单词（令牌）组成，文档的其余部分代表第二部分。我必须像这样对这两个部分进行评分：**第二部分为 70%**，**第一部分为 30%**。

**编辑 2：**所以我尝试创建一个使用 SpanPositionRangeQuery 的搜索器，但我必须完全理解 SpanQuery 的用法，因为我无法获得任何命中（我使用 lukeall 来验证我正在搜索的单词是否被索引）。有人可以帮帮我吗？

```
public static void search(String indexDir, String q) throws Exception
{

    Directory dir = FSDirectory.open(new File(indexDir), null);
    IndexSearcher is = new IndexSearcher(dir);

    Term term = new Term("Field", q);
    SpanPositionRangeQuery spanQuery = new SpanPositionRangeQuery(new SpanTermQuery(term), 0, 100);
    spanQuery.setBoost(0.3f);CustomRomanianAnalyzer(Version.LUCENE_35));

    long start = System.currentTimeMillis();
    TopDocs hits = is.search(spanQuery, 10);
    //TopDocs hits = is.search(query, 10);
    long end = System.currentTimeMillis();

    System.err.println("I found " + hits.totalHits + " documents (in " +
            (end - start) + " milliseconds) '" +
            q + "':");

    for (int i=0;i<hits.scoreDocs.length;i++)
    {
        ScoreDoc scoreDoc = hits.scoreDocs[i];
        Document doc = is.doc(scoreDoc.doc);
        System.out.println(doc.get("filename"));
    }

    is.close();
} 
```

我不知道如何将查询解析器与 SpanPositionRangeQuery 结合起来得到我需要的东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T21:37:46.517

是的，这可以通过在 BooleanQuery 中为每个子句设置提升来完成。使用单独的字段会起作用，但不是绝对必要的。Lucene 有一个[SpanPositionRangeQuery](http://lucene.apache.org/core/3_6_0/api/core/org/apache/lucene/search/spans/SpanPositionRangeQuery.html)适合搜索文档的一部分。

```
<SpanPositionRangeQuery: spanPosRange(field:term, 0, 100)^0.3> 
```

# php - PHP 可以将数组元素的顺序（如初始化）视为一种行为吗？

> ID：10608265
> 
> 赞同：0
> 
> 时间：2012-05-15T20:19:41.197
> 
> 标签：php

我正在使用作为数据一部分的数字键，如果我可以依靠初始化的顺序，我的解决方案会更容易、更易于阅读且代码更简洁！

可能很明显，但是：在数组初始化和`foreach()`输出数据之间，没有其他数组函数会接触数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T20:23:33.763

PHP 数组是作为散列实现的。即使对于数字键，键也确实存在并且值与它们相关联，这与其他语言中的列表或集合不同。您可以指望订单永远不会自行更改，因为这意味着实际更改与（数字）键关联的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T20:23:07.667

你可以指望它。PHP 只在一个`sort()`或类似的函数调用之后改变顺序。

顺便说一句，您可以`var_dump()`自己通过数组找到答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T20:25:54.867

如果你问是否：

```
array("a","b","c") 
```

将始终将 a 放入键 1，将 b 放入键 2，将 c 放入键 3，然后是的，它可以被指望（因此名称数组）。

# php - 我不知道为什么这段代码不断收到 t_string 错误

> ID：10608270
> 
> 赞同：1
> 
> 时间：2012-05-15T20:19:55.387
> 
> 标签：php, mysql, syntax-error

我认为我做的一切都是正确的，但我一直在代码中收到 t_string 错误。我会显示什么线。如果有人能弄清楚这一点，我将非常感激。我确实对报价进行了研究，并且我认为数据库中的数据可能与错误有关，因为它包含 @ 符号和句点。

错误在第 76 行，即`if(empty($row['email']))`

整个代码是

```
ini_set("include_path", ".:/public_html/phpmailer"); //Used for simplicity
include("mysql_connect.php"); //The database name, login, etc..
set_error_handler("customError"); //I created a custom error

$login = 'username@domain.com';
$password = 'password';
$server = '{imap.gmail.com:993/ssl/novalidate-cert}';
$connection = imap_open($server, $login, $password);

$mailboxinfo = imap_mailboxmsginfo($connection);
$messageCount = $mailboxinfo->Nmsgs; //Number of emails in the inbox
for ($MID = 1; $MID <= $messageCount; $MID++)
  {
  $EmailHeaders = imap_headerinfo($connection, $MID); //Save all of the header information
  $Body = imap_qprint(imap_fetchbody($connection, $MID, 1)); //The body of the email to be forwarded
  $MessageSentToAllArray = $EmailHeaders->to; //Grab the “TO” header
  $MessageSentToAllObject = $MessageSentToAllArray[0];
  $MessageSentToMailbox = $MessageSentToAllObject->mailbox; //Everything before the “@” of the recipient
  $MessageSentToHost = $MessageSentToAllObject->host; //Everything after the “@” of the recipient
  $MessageSentFromAllArray = $EmailHeaders->from; //Grab the “FROM” header
  $MessageSentFromAllObject = $MessageSentFromAllArray[0];
  $MessageSentFromMailbox = $MessageSentFromAllObject->mailbox; //Everything before the “@” of the sender
  $MessageSentFromHost = $MessageSentFromAllObject->host; //Everything after the “@” of the sender
  $MessageSentFromName = $MessageSentFromAllObject->personal; //The name of the person who sent the email
  $toArray = searchRecipient($MessageSentToMailbox); //Find the correct person to send the email to
  if($toArray == FALSE) //If the alias they entered doesn’t exist…
    {
    $bounceback = 'Sorry the email in your message does not appear to be correct';
    /* Send a bounceback email */
    $mail = new PHPMailer(); // defaults to using php “mail()”
    $mail -> ContentType = ‘text/plain’; //Plain email
    $mail -> IsHTML(false); //No HTML
    $the_body = wordWrap($bounceback, 70); //Word wrap to 70 characters for formatting
    $from_email_address = 'Support@domain.com';
    $mail->AddReplyTo($from_email_address, "Domain.Com");
    $mail->SetFrom($from_email_address, "Domain.Com");
    $address = "$MessageSentFromMailbox@$MessageSentFromHost"; //Who we’re sending the email to
    $mail->AddAddress($address, $MessageSentFromName);
    $mail->Subject = 'WAHM Link Request'; //Subject of the email
    $mail->Body = $the_body;
    if(!$mail->Send()) //If the mail fails, send to customError
      {
      customError(1, $mail->ErrorInfo, "anon-email.php", "sending the email");
      }
    }
  else //If the candidate address exists, forward on the email
    {
    $mail = new PHPMailer(); // defaults to using php “mail()”
    $mail -> ContentType = ‘text/plain’; //Plain E-mail
    $mail -> IsHTML(FALSE); //No HTML
    $the_body = wordwrap($Body, 70); //Wordwrap for proper email formatting
    $from_email_address = "$MessageSentFromMailbox@$MessageSentFromHost";
    $mail->AddReplyTo($from_email_address, $MessageSentFromName);
    $mail->SetFrom($from_email_address, $MessageSentFromName);
    $address = $toArray[1]; //Who we’re sending the email to
    $mail->AddAddress($address, $toArray[0]); //The name of the person we’re sending to
    $mail->Subject = $EmailHeaders->subject; //Subject of the email
    $mail->Body = ($the_body);
    if(!$mail->Send()) //If mail fails, go to the custom error
      {
      customError(1, $mail->ErrorInfo, "anon-email.php", "sending the email");
      }
    }
  /* Mark the email for deletion after processing */
  imap_delete($connection, $MID);
  }
  imap_expunge($connection); // Expunge processes all of the emails marked to be deleted
  imap_close($connection);

  function searchRecipient() // function to search the database for the real email
{
    global $MessageSentToMailbox; // bring in the alias email
    $email_addr = mysql_query("SELECT email FROM tbl WHERE source='$MessageSentToMailbox'"); // temp store of the real email
    $row = mysql_fetch_assoc($email_addr); //making temp store of data for use in program
    if(empty($row['email']))
    {
        return FALSE;
    }
    else  /* Else, return find the person's name and return both in an array */
    {
        $query = "SELECT * FROM tbl WHERE email = '$email_addr'"; // pulling in the row where the emails match
        $results = mysql_query($query, $email_addr); // temp store of both queries from this function
        $row = mysql_fetch_assoc($results); //making temp store of data for use in program
        $name = $row['author'];  // taking the author data and naming its variable
        return array($name, $email_addr);  // this is the name and the real email address to be used in function call
    }
}

function customError($errno, $errstr, $file, $line)
{
    error_log("Error: [$errno] $errstr in $file at line number: $line",1, "name@domain.com","From: name@domain.com");   
    die();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T20:47:03.103

我花了很长时间才弄清楚这一点，尤其是因为似乎 stackoverflow 已经为您解决了这个问题。`0xA0`在您的源代码（我的编辑器计数 33）中，在空白块中间随机散布了许多字符。PHP 解析器显然不太喜欢这些并抛出错误。

我刚刚在我的编辑器中进行了查找/替换，将它们全部转换为空格（`0x20`），现在它可以解析了。

似乎我在第一次编辑您的问题时为每个人都宠坏了它，因为当时纠正了问题，我现在无法通过复制当前显示的代码来重复它，尽管回滚到原始版本 - 对不起大家.

如果将上面的代码复制并粘贴回编辑器，问题就消失了。StackOverflow 已经积极解决了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T20:33:56.220

我不确定这是否是错误，但你在这里有花哨的单引号：

`$mail -> ContentType = ‘text/plain’; //Plain email`

它实际上在您的代码中出现了两次。

# php - 需要 PHP 标头和相关链接的解决方案

> ID：10608271
> 
> 赞同：0
> 
> 时间：2012-05-15T20:19:59.463
> 
> 标签：php, wordpress

我认为对于任何了解 PHP 的人来说，这应该是一个相当简单的问题。我更像是一名设计师，并且仍在学习 PHP 的过程中。

我有一个我建立的网站，其中包括一个 PHP 页眉和页脚。在头文件（站点中的所有页面都使用）中，我有指向 CSS 文件、JavaScript 文件等的链接。

现在我正在为链接使用这个解决方案并包含在标题中......

```
http://<?php echo $_SERVER['SERVER_NAME']; ?>/css/style.css 
```

问题在于站点中的某些页面是 SSL 页面，需要使用 HTTPS 前缀，而不是 HTTP。话虽如此，我想知道是否有一种简单的方法可以链接到头文件中的 CSS 文件、JavaScript、图像等，而不是我目前使用的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T20:22:20.457

```
<link rel="stylesheet" href="/css/style.css"> 
```

如果这对您不起作用，请编写一个 PHP 函数。

```
function base_url()
{
    if($_SERVER['HTTPS'])
        return "https://mysite.com";
    else
        return "http://mysite.com";
} 
```

并在您的 html 代码中。

```
<a href="<?php echo base_url(); ?>/css/ssl_stylesheet.css"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T20:24:29.840

或者您可以使用[相对协议](http://paulirish.com/2010/the-protocol-relative-url/)：`//<?php echo $_SERVER['SERVER_NAME']; ?>/css/style.css`

# matlab - MATLAB——事件定位函数的结构理解

> ID：10608272
> 
> 赞同：0
> 
> 时间：2012-05-15T20:20:03.727
> 
> 标签：matlab, differential-equations

在我的教科书中，我遇到了一个在为 ODE 系统指定事件位置时应该使用的函数示例。函数示例如下：

```
function [value, isterminal, dircn] = proj(t,z,flag);
g = 9.81;
if nargin < 3 | isempty(flag)
    value = [z(2); 0; z(4); -g];
else
    switch flag
        case 'events'
            value = z(3);
            isterminal = 1;
            dircn = -1;
        otherwise
            error('function not programmed for this event');
    end
end 
```

这里有一部分逻辑我不明白。假设我激活了“事件”选项，然后运行 ​​ode45。那么，ode45 如何实际读取方程组（在上述函数中指定为`value = [z(2); 0; z(4); -g];`）？当然，在指定 tspan 和初始条件之后，我已经基于上述函数运行了 ode45，它就像一个魅力。但是我不明白 ode45 仅在上面脚本的“if”部分中出现时如何正确读取系统。

如果有人能解释这里的逻辑，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T22:40:45.330

答案在`if`命令中：

```
if nargin < 3 | isempty(flag)
    value = [z(2); 0; z(4); -g];
else 
```

如果参数个数小于 3 或 variable`flag`为空，则将 variable 设置`value`为`[z(2); 0; z(4); -g]`。否则，如果 variable`flag`为`'events'`，则设置 variable`value`为`z(3)`，当`flag`is not时`'events'`，报错。所以这个函数总是为变量分配一些返回值，或者使用命令`value`报告错误。`error`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T08:49:37.943

好吧，我想我可以解释一些部分。正如我在上面所写的，奇怪的是维度的`value`变化。

给定您的状态空间和变量的名称，它看起来像二维运动。

在没有标志的情况下，状态空间似乎是：

1.  水平位置 (x)
2.  水平速度 (vx)
3.  垂直位置 (y)
4.  垂直速度（vy）

**更正** ode 似乎可以`'events'`在您指定它们时发送。所以你的函数输出状态空间的第三个分量。看看这个网站解释它： http: [//www.mathworks.de/help/techdoc/math/f1-662913.html](http://www.mathworks.de/help/techdoc/math/f1-662913.html)

~~除非您事先指定，否则 ode 无法发送`'events'`到函数，因此不会调用此部分。~~

但是你的函数无论如何都不起作用 - 因为导数需要与状态空间（4x1）具有相同的维度。但只有 1x1。

但是我真的不知道您所说的“指定活动地点”是什么意思。也许秘密就藏在那里。

~~有了一些创造力，我认为您可以使用该函数来提取状态空间的第三个分量。~~

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:05:44.443

在编写完上面的函数后，我可以补充更多关于我们如何进行的信息。然后我们定义，说：

```
tspan = [0 6];
z0 = [0, 5*cos(pi/4), 0, 5*sin(pi/4)];
options = odeset('events','on');
[t y] = ode42('proj',tspan,z0,options) 
```

通过编写此代码，输出为 5 列，其中 1 列，`tspan`每个 z 值（`z(1)`、`z(2)`和）各 1 列。当达到零时，计算将因“事件”发生而终止。`z(3)``z(4)``z(3)`

另一方面，如果我不包括该`options = odeset('events','on')`行，则只需编写：

```
[t y] = ode42('proj',tspan,z0) 
```

对整个`tspan`范围执行计算。

然而，当我们激活“事件”时，我仍然看不到如何`ode42`计算所有输出向量，因为我认为 MatLab 应该只在“proj”函数中执行“else”语句是合乎逻辑的。并且在这部分函数中，不包括微分方程的实际系统。

# ftp - ncftp 只下载文件夹，不下载文件夹内的文件

> ID：10608273
> 
> 赞同：1
> 
> 时间：2012-05-15T20:20:06.227
> 
> 标签：ftp

我正在尝试使用 ncftp 从远程 ftp 服务器下载所有文件，但我发现使用建议的“-R”选项只允许我下载所有文件夹，但不能下载文件夹内的任何文件。完整的命令是

```
ncftp> get -R /pub 
```

我也试过 ncftpget

```
$ ncftpget -R -T -v ftp.example.com . /pub
$ ncftpget -R ftp.example.com . /pub 
```

他们都只下载 /pub 文件夹和子文件夹，但不下载任何文件！我可以做些什么来下载文件？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:36:50.383

解决方案是使用“lftp”而不是 ncftp。ncftp 的“-R”选项仅在远程服务器是 Unix 时才有效。否则，它不起作用。

使用 lftp 下载远程服务器的命令是

```
lftp -e 'mirror [remote dir] [local dir]' [remote server] 
```

例如，如果要从 ftp.example.com/pub/ 获取整个目录到本地目录 /home/tom，请使用以下命令

```
lftp -e 'mirror /pub /home/tom/' ftp.example.com 
```

# haskell - 我应该创建一个函数来将数据输入另一个函数吗？

> ID：10608280
> 
> 赞同：2
> 
> 时间：2012-05-15T20:20:39.440
> 
> 标签：haskell, recursion

我正在自学在 Haskell 中编程，并且正在开发一个查找功能。它的作用是接受两个字符串，例如`"hello"`and `"he"`，并计算`"he"`在 中出现的次数`"hello"`。

find 函数需要跟踪一些不需要在函数开始时输入的内容，例如在列表中找到单词的次数。所以，我把这个函数分解成两个更小的函数：一个是用户最初输入数据的函数，然后将数据引导到第二个函数来完成这项工作。

这是我的代码：

```
search :: (Eq a) => [a] -> [a] -> Integer
search [] _ = 0
search _ [] = 0
search x y = search1 x y y 0

search1 :: (Eq a) => [a] -> [a] -> [a] -> Integer -> Integer
search1 _ _ [] n = n
search1 x [] z n = search1 x z z (n+1)
search1 [] _ _ n = n
search1 (x:xs) (y:ys) z n
  | x == y = search1 xs ys z n
  | otherwise = search1 xs (y:ys) z n 
```

在其中，我创建了一个函数来为用户“插入”数据，而不是用户从函数开始`search1`，这需要一些用户输入的冗余数据。`search``search1`

我的问题是，在 Haskell 中创建一个“插入”冗余数据的函数是一种好习惯吗？还是我应该做一些不同的事情？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T20:29:35.477

是的，这是一个很好的做法。但是，如果第二个函数本身没有用，而只能作为另一个函数的工作人员，则最好将第二个函数设置为第一个函数。

如果您在包装器本地创建一个工作器，则可以在工作器主体中引用包装器的参数，而无需将它们作为参数传递给工作器，这通常有助于提高性能。

对于您的示例，具有本地工作人员的功能可能看起来像

```
search :: (Eq a) => [a] -> [a] -> Integer
search [] _ = 0
search _ [] = 0
search hay needle = search1 hay needle 0
  where
    search1 x [] n = search1 x needle (n+1)
    search1 [] _ n = n
    search1 (x:xs) (y:ys) n
      | x == y = search1 xs ys n
      | otherwise = search1 xs (y:ys) n 
```

我已经消除了在递归调用中从未改变过的工人的一个论点。此外，使工人成为本地人消除了检查空的需要`needle`。

# python - python服务器游戏

> ID：10608284
> 
> 赞同：0
> 
> 时间：2012-05-15T20:20:50.397
> 
> 标签：python, sockets

我正在尝试使用 pygame 开发游戏，其中一个功能是玩家可以一起玩（目前在本地网络上）。所以有一个客户端和一个服务器使用套接字编程。客户端和服务器都是类，它们扩展线程：

首先，服务器向下载文件的客户端发送一些数据，然后我希望它们都能监听并能够发送，所以我启动了 2 个新线程： 能够向客户端发送数据，表明他的玩家首先完成了游戏，所以他赢了。另一种方法是不断等待接收数据。服务器和客户端都具有相似的结构。

以下是部分代码：

```
def demarrerJeu() :
    """démarrage du jeu"""
    print("Le jeu commence")
    os.system("python menu.py") #launch game window

def boucleReception(soc):
  print "Ecoute socket"
  global finPartie
  finPartie=False
  while not finPartie:
    newdata = soc.recv(1024)
    if not newdata :
       pass
    try :        
      dico=json.loads(newdata)
  code=dico['code']
      scoreClient=dico['score']
      if code==1115:
        finPartie=True
        afficherMessage('L autre a gagné !')
        soc.close()
     except :
       pass

def boucleEnvoi(soc2):
 global finPartie
 finPartie=False
 print "Attente fin de partie"
 while not finPartie : 
   pass
 data = { 'code' : 1115}
 data_string = json.dumps(data)
 soc2.send(data_string) 
 afficherMessage('Vous avez gagné !!')
 soc2.close()   

class AServer(threading.Thread):
  def run(self):
    host = ''
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
    s.bind((host, self.port))
    print 'server started successfully, waiting...'
    s.listen(backlog)

    while 1:
      client, address = s.accept() 
      client2, address2=s.accept()
      #....
      thread.start_new_thread(boucleReception, (client, ))
      thread.start_new_thread(boucleEnvoi, (client2, ))
      break

def main() :
  try:
    t = AServer(port)
    signal(SIGQUIT, process_quit) 
    t.start()
  except (KeyboardInterrupt, SystemExit):
    cleanup_stop_thread();
    sys.exit() 
```

问题是仅在我关闭游戏窗口后才执行第二和第三线程的方法（它们应该在控制台中打印的消息仅在我关闭游戏窗口后才显示）。加上方法停止执行，而线程停止的条件不满足（客户端没有发送他赢了的消息）。在我看来，线程没有正确执行？

# git - 使用 Github 部署密钥时出现权限被拒绝错误

> ID：10608285
> 
> 赞同：9
> 
> 时间：2012-05-15T20:20:51.553
> 
> 标签：git, deployment, github, amazon-ec2, key

所以我有一个项目（私人回购），它有多个子模块（也是私人的）。我有一个托管在 Amazon EC2 上的服务器来容纳该项目，我想使用我们的私有 Github 存储库。

我为主项目生成了一个 ssh 密钥并将其添加到项目部署密钥中。我还为每个子模块生成了额外的 ssh 密钥并将其添加到它们的部署密钥中。

当我尝试克隆项目（使用 git@github）时，它不起作用：

权限被拒绝（公钥）。致命：远端意外挂断

我已经仔细检查了每个 repo 及其部署密钥，一切似乎都是正确的。我还缺少其他一些小步骤吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T23:09:11.783

简短的回答：没有简单的方法可以将部署密钥与私有子模块一起使用。根据我的经验，您有两种选择：

1.  继续使用子模块，但停止使用部署密钥，而是使用单个帐户级 SSH 密钥来授予对所有私有存储库的访问权限（更简单，安全性更低）
2.  停止使用子模块，继续使用部署密钥，并手动`git clone`每个存储库传递与部署密钥匹配的 SSH 私钥（更棘手，更安全）

这样做的原因是`git clone`触发了一次只能使用*一个 SSH 私钥*的 SSH 连接（例如 ~/.ssh/id_rsa）。使用的 SSH 私钥必须与存储库的部署密钥匹配——并且每个项目的部署密钥必须是唯一的。在子模块克隆的情况下，您只使用一个私钥。该密钥可能与您的顶级项目匹配，但在子项目中肯定会因您提供的错误而失败。

希望这有帮助..

# sql - 在 SQL 中将前导字符添加到字符串

> ID：10608286
> 
> 赞同：2
> 
> 时间：2012-05-15T20:20:58.057
> 
> 标签：sql, string

我有一个存储过程。我传入 1 个变量，称为`@p_FR`char(6)。但是，传递的值并不总是 6 个字符长。有时该值只有 4 或 5 个字符长。我需要确保字符串总是 6 个字符长。例如，如果`@p_FR`是 8534，那么我需要在 中添加 2 个前导 0 `@p_FR`，所以它会是 008534。

我试着做

```
set @fr = right('000000', @p_FR, 6) 
```

`@fr`是一个 varchar(6)

但是什么时候`@p_FR`是 8534，@fr 仍然是 8534。我需要它是 008534。

我还在新查询中设置了以下代码块，但仍然得到 8534。

```
declare @p_FR as char(6),
    @fr as varchar(6)
set @p_FR = '8534'
set @fr = right('000000' + @p_FR, 6) 
select @fr 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T20:23:10.203

使用 rtrim 删除空格：

```
declare @p_FR as char(6),
    @fr as varchar(6)
set @p_FR = '8534'
set @fr = right('000000' + rtrim(@p_FR), 6) 
select @fr 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T21:04:42.843

我认为解决问题的最简单方法是使用 varchar(6) 而不是 char(6) 这样做你不必担心尾随空格，因为 varchar 只存储字符串并且不包含尾随空格填上。

如果这不是一个选项，那么您可以使用 RTRIM(@p_FR) 假设您的 RDBMS 支持 RTRIM。您没有指定您正在使用什么 RDBMS，但我假设某种 SQL Server。

# powershell - powershell Outlook 自动化命名空间

> ID：10608289
> 
> 赞同：0
> 
> 时间：2012-05-15T20:21:11.827
> 
> 标签：powershell, automation, outlook, activexobject

我正在使用javascript和activex通过IE中的EntryID自动打开公用文件夹并遇到一些错误。为了调试，我将它重写为一个 power shell 脚本。

```
$eid = "HEX EntryID FOR PUBLIC FOLDER";

$o = new-object -com outlook.application;
$ns = $o.GetNamespace("MAPI");
#$ns #if this line is commented, error
$f = $ns.GetFolderFromID($eid)
$f.Display(); 
```

如果我完全关闭 Outlook，然后运行脚本，我会收到以下错误

```
Exception calling "GetFolderFromID" with "2" argument(s): "The messaging interface has   returned an unknown error. If the problem persists, restart Outlook."
At G:\scripts\outlook.ps1:5 char:25
+ $f = $ns.GetFolderFromID <<<< ($eid)
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : DotNetMethodException 
```

如果我取消注释 $ns 行，一切正常，即使它再次被删除。也就是说，在我完全关闭 Outlook 之前，几乎就像 $ns com 对象在我将其输出到控制台之前并没有真正被初始化。

我想知道：

*   为什么打电话`$ns`可以解决问题
*   为什么 powershell 认为我正在传递 2 个参数
*   有没有办法在javascript中实现这个解决方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:17:31.733

GetFolderFromID() 需要两个参数：EntryID 和所需文件夹的 StoreID。

此代码没有错误，并在选择 PublicFolder 的情况下显示前景：

```
$o = new-object -com outlook.application;
$ns = $o.GetNamespace("MAPI");
$cp = $ns.Folders # FolderClass ComObject containing all Outlook folders, usually first is the PublicFolder
$f = $ns.GetFolderFromID( $cp.GetFirst().EntryID ,$cp.GetFirst().StoreID )
$f.Display(); 
```

使用你的代码我做不到，`$ns`行注释与否。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:21:48.737

您可以以编程方式获取公用文件夹存储：

```
$ol = New-Object -ComObject Outlook.Application
$pf = $ol.GetNamespace("MAPI").Folders | Where-Object {$_.FolderPath -like "\\Public Folders*"}
$pf.Display() 
```

# android - 跨平台图像处理库

> ID：10608290
> 
> 赞同：0
> 
> 时间：2012-05-15T20:21:13.200
> 
> 标签：android, ios, linux, image-processing

我试图找到一个可以添加过滤器和这种性质的东西的图像处理库。ImageMagick 之类的东西（我已经尝试过，但无法获得 png 支持和其他专门针对 Android 的问题）。

主要要求是它在 iOS、Linux 和 Android 中使用相同的过滤器生成相同的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T22:31:05.143

看看 android 包[graphics](http://developer.android.com/reference/android/graphics/package-summary.html)。它包含执行图像转换和过滤器所需的所有内容，并且网络上有很多示例。

# actionscript-3 - flash builder 4.6 - 本机应用程序问题 -

> ID：10608294
> 
> 赞同：0
> 
> 时间：2012-05-15T20:21:23.210
> 
> 标签：actionscript-3, flash, air, flash-builder, kinect

我正在尝试在这里学习教程：

[http://www.as3nui.com/airkinect-2-0-is-here/](http://www.as3nui.com/airkinect-2-0-is-here/)

它涉及在我已安装的 Flash Builder 4.6 中开发 AirKinect 应用程序。但是当我按照这些步骤操作时，我无法使用教程访问的一堆菜单命令。我正在开发一个 Actionscript 项目。当我转到项目属性并单击左侧的 actionscript 构建路径时，视频中有 3 个选项卡 - 源路径选项卡、库选项卡和本机扩展选项卡，但我没有看到本机扩展选项卡。此外，在左侧，他有一个名为 Actionscript 构建打包的菜单——我没有这个。最后，他使用命令 stage.nativeWindow.visible = false - 当我使用它时，它说它是一个未定义的属性。我认为所有这些问题都必须与 Flash Builder 中的本机应用程序有关，但我不确定。有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T08:02:34.243

您可能以错误的设置开始了您的项目。在 Flash Builder 4.6 中创建新的 ActionScript 项目时，您可以选择它的运行方式：在浏览器中或使用 AIR：

![新建 ActionScript 项目对话框](../Images/8bc49db0441a04aff84439f6c4501b2f.png)

您应该选择“应用程序类型”下的“桌面（在 Adob​​e AIR 中运行）”按钮。然后，您还将在项目属性中看到本机扩展选项卡。

我不知道如何将现有项目更改为 AIR 桌面项目，但创建一个新项目并将现有代码移入其中应该不会太难。

# java - wsgen 和 App Engine

> ID：10608295
> 
> 赞同：1
> 
> 时间：2012-05-15T20:21:25.493
> 
> 标签：java, web-services, google-app-engine, webmethod, wsgen

我正在尝试执行 wsgen 命令来创建 Web 服务。我的命令行是：

```
PATH=%path%;C:\Program Files\Java\jdk1.6.0_24\bin
wsgen -cp ".\war\WEB-INF\classes" -wsdl -keep -r ".\war" -d ".\war\WEB-INF\classes" -             s ".\war" "com.example.prototipo21.Greeting" 
```

并出现此错误：警告：在类型'javax.jdo.annotations.Persisten'中找不到注释方法'valueStrategy（）'：找不到javax.jdo.annotations.Persistent的类文件。error: 找不到 com.example.prototipo21.Greeting 的类文件 1 error 1 warning error: 编译失败，应该报错

我认为问题可能是我正在将数据存储应用程序集成到 Web 服务应用程序中，因此我的班级有不同的注释。例如：

```
@WebService
public class Greeting {

@PrimaryKey
@Persistent (valueStrategy = IdGeneratorStrategy.IDENTITY)
private Key key;

@Persistent
private User author; 
```

...

```
@WebMethod  
public Key getKey() {
    return key;
}
@WebMethod
public User getAuthor(){
    return author; 
```

……

你知道我的意思？？任何想法都会非常有用！！谢谢！

这些是我的命令和整个跟踪：

```
c:\Users\...\Desktop\....\Eclipse\Prototipo_21>PATH=%pa
th%;C:\Program Files\Java\jdk1.7.0_03\bin

c:\Users\...\Desktop\....\Eclipse\Prototipo_21>wsgen -c
p ".\war\WEB-INF\classes" -wsdl -keep -r ".\war" -d ".\war\WEB-INF\classes" -s "
.\war" "com.example.prototipo21.Greeting"

warning: The apt tool and its associated API are planned to be
removed in the next major JDK release.  These features have been
superseded by javac and the standardized annotation processing API,
javax.annotation.processing and javax.lang.model.  Users are
recommended to migrate to the annotation processing features of
javac; see the javac man page for more information.
.\war\WEB-INF\classes\com\example\prototipo21\Greeting.class: warning: Cannot fi
nd annotation method 'valueStrategy()' in type 'Persistent': class file for java
x.jdo.annotations.Persistent not found
warning: unknown enum constant IdGeneratorStrategy.IDENTITY
reason: class file for javax.jdo.annotations.IdGeneratorStrategy not found
error: Could not create declaration for annotation type javax.jdo.annotations.Pr
imaryKey
error: Could not create declaration for annotation type javax.jdo.annotations.Pe
rsistent
Problem encountered during annotation processing;
see stacktrace below for more information.
com.sun.tools.internal.ws.processor.modeler.ModelerException: modeler error: Cla
sses annotated with @javax.jws.WebService must have a public default constructor
. Class: com.example.prototipo21.Greeting
    at com.sun.tools.internal.ws.processor.modeler.annotation.WebServiceAP.o
nError(WebServiceAP.java:229)
    at com.sun.tools.internal.ws.processor.modeler.annotation.WebServiceVisi
tor.isLegalImplementation(WebServiceVisitor.java:515)
    at com.sun.tools.internal.ws.processor.modeler.annotation.WebServiceVisi
tor.shouldProcessWebService(WebServiceVisitor.java:322)
    at com.sun.tools.internal.ws.processor.modeler.annotation.WebServiceVisi
tor.visitClassDeclaration(WebServiceVisitor.java:113)
    at com.sun.tools.apt.mirror.declaration.ClassDeclarationImpl.accept(Clas
sDeclarationImpl.java:113)
    at com.sun.tools.internal.ws.processor.modeler.annotation.WebServiceAP.b
uildModel(WebServiceAP.java:319)
    at com.sun.tools.internal.ws.processor.modeler.annotation.WebServiceAP.p
rocess(WebServiceAP.java:260)
    at com.sun.mirror.apt.AnnotationProcessors$CompositeAnnotationProcessor.
process(AnnotationProcessors.java:84)
    at com.sun.tools.apt.comp.Apt.main(Apt.java:480)
    at com.sun.tools.apt.main.AptJavaCompiler.compile(AptJavaCompiler.java:2
70)
    at com.sun.tools.apt.main.Main.compile(Main.java:1127)
    at com.sun.tools.apt.main.Main.compile(Main.java:989)
    at com.sun.tools.apt.Main.processing(Main.java:113)
    at com.sun.tools.apt.Main.process(Main.java:103)
    at com.sun.tools.apt.Main.process(Main.java:85)
    at com.sun.tools.internal.ws.wscompile.WsgenTool.buildModel(WsgenTool.ja
va:207)
    at com.sun.tools.internal.ws.wscompile.WsgenTool.run(WsgenTool.java:111)

    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.tools.internal.ws.Invoker.invoke(Invoker.java:120)
    at com.sun.tools.internal.ws.WsGen.main(WsGen.java:42)
error: compilation failed, errors should have been reported 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T02:30:07.197

I was having the same error. The reason why you are getting this error is that you have to give wsgen a reference to the libraries that GAE are using as well.

Just modify the classpath to include the other jar files. Note that in Unix we use colon ":" to separate directories and in Windows we use semi-colon ";".

(Just change the directory path accordingly)

```
class=com.sample.MyWebService
clpth='./war/WEB-INF/classes:/Applications/eclipse_jee/plugins/com.google.appengine.eclipse.sdkbundle_1.7.0/appengine-java-sdk-1.7.0/lib/opt/user/datanucleus/v2/jdo-api-3.1-SNAPSHOT-20110926.jar:/Applications/eclipse_jee/plugins/com.google.appengine.eclipse.sdkbundle_1.7.0/appengine-java-sdk-1.7.0/lib/user/appengine-api-1.0-sdk-1.7.0.jar'
resourcedir='./war'
outsourcedir='./src'
outdir='./war/WEB-INF/classes'
wsgen -cp "$clpth" -wsdl -keep -r "$resourcedir" -d "$outdir" -s "$outsourcedir"  $class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T22:03:42.587

该错误与您编写的代码没有问题。问题在于类路径。如果您检查错误，您可以清楚地看到：

找不到 com.example.prototipo21.Greeting1 的类文件

修复您的类路径，以便该类可用于 wsgen 并且您可能会领先一步并在下一组错误中绊倒:) 祝你好运

# iphone - 我的 viewController 中同时出现了 UIImage 和“后退”按钮

> ID：10608302
> 
> 赞同：0
> 
> 时间：2012-05-15T20:21:51.530
> 
> 标签：iphone, objective-c, ios, uinavigationcontroller

我的视图控制器中同时出现了 UIImage 和“后退”按钮，但不知道为什么。

这是一个屏幕截图：

![在此处输入图像描述](../Images/de4cd0116eab1d7446cfbce24d87e69c.png)

这是我的代码：

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    [self.navigationController setNavigationBarHidden:NO animated:YES];

    UIImage *image = [UIImage imageNamed:@"arrow_back.png"];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];

    [self.navigationController.navigationBar addSubview:imageView];

} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T20:36:03.420

您必须创建一个 backbarbutton 项目并为其添加自定义项。然后为它定义动作，在其中弹出当前视图。

```
 UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
        [button setImage:buttonImage forState:UIControlStateNormal];

        //set the frame of the button to the size of the image (see note below)
        button.frame = CGRectMake(0, 0, buttonImage.size.width, buttonImage.size.height);

        [button addTarget:self action:@selector(back) forControlEvents:UIControlEventTouchUpInside];

        //create a UIBarButtonItem with the button as a custom view
        UIBarButtonItem *customBarItem = [[UIBarButtonItem alloc] initWithCustomView:button];
        self.navigationItem.leftBarButtonItem = customBarItem;

// selector for backButton

-(void)back{
[self.navigationController popViewController];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T20:27:54.323

您需要创建一个自定义按钮并将其添加为 self.navigationController.navigationBar.backBarButtonItem 的子视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T20:31:07.027

当您将第二个视图控制器推入导航控制器时，后退按钮是自动的。您可以像 Andrew Ebling 提到的那样覆盖它。您将需要创建一个自定义 UIBarButton 项。

```
UIImage *image = [UIImage imageNamed:@"back.png"];
UIBarButtonItem *back = [UIBarButtonItem alloc] initWithImage:image
                                                        style:UIBarButtonItemStylePlain
                                                       target:self
                                                       action:@selector(backEvent:)];

self.navigationItem.backBarButtonItem = back; 
```

# mod-rewrite - 使用 mod_rewrite 或 htaccess 将 301 应用于整个站点结构，并使用查询字符串构建 URL

> ID：10608304
> 
> 赞同：1
> 
> 时间：2012-05-15T20:21:52.267
> 
> 标签：mod-rewrite, http-status-code-301

我正在接管一个旧网站，需要更改域名。

当前域是 http://www.example.com/folder/，新域是 http://example.school.nz

现有和所需 URL 的示例如下：
之前：http://www.example.com/folder/index.php? page=
sport 所需：http://example.school.nz/about-us/sport

该站点是使用 CMSMS (http://www.cmsmadesimple.org) 构建的，因此页面和 URL 是通过 CMS 生成的，尽管导出 URL 列表很容易。

理想情况下，我可以为整个站点设置 301 重定向，这样用户就不会得到 404。任何线索来完成此任务的最简单方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:39:18.183

这取决于您希望事情的一般性，但是这套规则将满足您在问题中提出的要求：

```
RewriteCond %{HTTP_HOST} .*
RewriteCond %{QUERY_STRING} page=sport
RewriteRule ^folder/index.php http://example.school.nz/about-us/sport? [L,R=301] 
```

# c# - 在 C# 中禁用 OBSOLETE 错误

> ID：10608309
> 
> 赞同：18
> 
> 时间：2012-05-15T20:22:09.960
> 
> 标签：c#

我正在使用 Microsoft TFS API，其中一个接口上的属性之一已被标记为已过时，它指示我使用不同的属性。不幸的是，API 希望我使用的属性由 TFS2010 而不是 TFS2008 使用。

我试过这样做：

```
#pragma warning disable 0612, 0618
            request.CommandLineArguments = arguments;
#pragma warning restore 0612, 0618 
```

但是我仍然收到 CommandLineArguments 已过时的错误。有没有办法压制这个？

编辑

不幸的是，这并没有显示为“警告为错误”，实际上将警告视为错误在我的项目中已关闭。这是违规代码的屏幕截图以及错误列表

![在此处输入图像描述](../Images/fd99b17e1cfeb63c05408e29aa21eab7.png)

编辑2：

使用 ILSpy 后，TFS2010 API 中的 CommandLineArguments 属性如下所示：

```
 [Obsolete("This property has been deprecated. Please remove all references. To pass command line arguments to MSBuild.exe, set the ProcessParameters property.", true)]
    string CommandLineArguments
    {
        get;
        set;
    } 
```

不幸的是，我认为没有办法告诉编译器忽略 Obsolete 属性导致的错误。

编辑 3 正如@Peter Ritchie 指出的，这个值可以通过反射来设置。正如我对这个问题的思考，尽管我的猜测是，如果 Microsoft 将属性设置为抛出异常，即使您确实通过反射设置了它，我怀疑该值是否会在任何地方被引用。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-15T20:40:57.210

以下对我有用：

```
#pragma warning disable 612,618
            request.CommandLineArguments = arguments;
#pragma warning restore 612,618 
```

注意数字中没有前导0

编辑：好的，您的程序集在 ObsoleteAttribute 构造函数中具有“true”参数。这意味着您不能使用该属性并且不会出现错误。

如果您无法重新编写代码以避免使用此属性，则必须通过反射调用属性设置器，例如：

```
request.GetType().GetProperty("Number").SetValue(request, arguments, null); 
```

和得到是相似的：

> (string)request.GetType().GetProperty("CommandLineArguments").GetValue(request, null);

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-11-10T10:25:12.677

## 视觉工作室 2015

由于 [过时] 导致构建失败？

仅当启用“将警告视为错误”并且存在具有 [Obsolete] 属性的方法时才会发生这种情况。

### 方法一：将错误降级为警告

添加文件（`<WarningsNotAsErrors>612,618</WarningsNotAsErrors>`对`.csproj`所有部分重复）：

```
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
    <TreatWarningsAsErrors>true</TreatWarningsAsErrors>
    <WarningLevel>4</WarningLevel>
    <WarningsNotAsErrors>612,618</WarningsNotAsErrors>
    <DebugSymbols>true</DebugSymbols>
    <DebugType>full</DebugType>
    <Optimize>false</Optimize>
    <OutputPath>bin\Debug\</OutputPath>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
</PropertyGroup> 
```

如果处理很多`.csproj files`，请参阅`Appendix A: Notepad++ for search and replace`。

### 方法2：忽略文件中的错误

> **注意：不**推荐使用此方法，因为它**隐藏**了标记为 [Obsolete] 的方法的警告。我们仍然希望看到对过时方法的所有调用的列表，以便我们可以升级它们。

采用`#pragma warning disable 612,618`

### 方法3：忽略项目中的错误

> **注意：不**推荐使用此方法，因为它**隐藏**了标记为 [Obsolete] 的方法的警告。我们仍然希望看到对过时方法的所有调用的列表，以便我们可以升级它们。

编辑项目（对所有部分重复）：

[![在此处输入图像描述](../Images/e3aa4c66cd002cbb1ffaef257d44d157.png)](https://i.stack.imgur.com/6TKjn.png)

### 方法4：忽略项目中的错误

> **注意：不**推荐使用此方法，因为它**隐藏**了标记为 [Obsolete] 的方法的警告。我们仍然希望看到对过时方法的所有调用的列表，以便我们可以升级它们。

手动编辑您的 .csproj 以禁用特定错误的警告。添加标签`<NoWarn>612,618</NoWarn>`（对所有部分重复）：

```
<PropertyGroup Condition="'$(Configuration)|$(Platform)' == 'Debug|x64'">
    <NoWarn>612,618</NoWarn>
    <DebugSymbols>true</DebugSymbols>
    <OutputPath>bin\x64\Debug\</OutputPath>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <TreatWarningsAsErrors>true</TreatWarningsAsErrors>
    <DebugType>full</DebugType>
    <PlatformTarget>x64</PlatformTarget>
    <ErrorReport>prompt</ErrorReport>        
</PropertyGroup> 
```

* * *

## 附录 A：用于搜索和替换的 Notepad++

有很多文件吗？没问题！

`.csproj`在 NotePad++ 中打开所有文件，然后：

*   寻找：`<TreatWarningsAsErrors>true</TreatWarningsAsErrors>`
*   代替：`<TreatWarningsAsErrors>true</TreatWarningsAsErrors>\n\t<WarningsNotAsErrors>612,618</WarningsNotAsErrors>`

[![在此处输入图像描述](../Images/8a0d96695a4c856d1829ac8a66c6b6b0.png)](https://i.stack.imgur.com/O5OrJ.png)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-01-18T23:12:12.040

以防万一其他人偶然发现这一点。

如果您将设置属性的方法标记为已过时并且不要将其标记为 true，编译器将忽略内部错误并抛出您的更高级别的警告，您可以忽略该错误。

IE

```
[Obsolete("Cause it aint",false)]
public void Foo(object arguments)
{
     request.CommandLineArguments = arguments;
} 
```

# sql-server-2008 - 在 SQL Server 2008 中将数据列从 varchar(max) 更改为 nvarchar(max)

> ID：10608310
> 
> 赞同：13
> 
> 时间：2012-05-15T20:22:11.257
> 
> 标签：sql-server-2008

我必须将 SQL Server 2008 表中的数据类型从 varchar(max) 更改为 nvarchar(max)。该表中有数据。有没有办法在不丢失数据的情况下更改数据类型？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-15T20:28:09.760

您可以只使用标准语法来更改表：

```
ALTER TABLE some_table ALTER COLUMN some_column nvarchar(max) 
```

但是，您可能希望重建任何索引，以确保它们按预期工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-15T20:33:01.347

另一个减少中断的选择（因为我不相信`ALTER COLUMN`会在线发生）是：

```
ALTER TABLE dbo.table ADD new_column NVARCHAR(MAX); -- metadata operation 
```

现在您可以更新 wave/batches/transactions 中的数据，而不是在一个长事务中将更改应用于整个表。当您对复制的数据感到满意时，您可以删除旧列，重命名新列，然后重新创建任何受影响的索引（您的 MAX 列不能在任何索引的键中，但您可能有无意中将其放入 INCLUDE 定义中 - 如果是这种情况，您无论如何都应该质疑）。

您仍然需要重建所有索引以回收现在未使用的空间（如果您使用的是企业版，您可以在线执行此操作）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T20:31:53.797

始终进行备份，这样无论发生什么，您都可以回到原来的状态。

话虽如此，从更改`varchar(max)`为`nvarchar(max)`不应该丢失数据。

*旁注：*如果您在另一个方向更改，您可能会担心 `nvarchar(max)`，`varchar(max)` 因为如果存在任何扩展字符，该过程必须转换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-17T15:40:41.353

从 SQL Server 2016 开始，这现在可以是联机操作

[SQL 2016 ALTER COLUMN 在线](https://www.mssqltips.com/sqlservertip/4749/sql-server-2016-online-alter-column-operation/)

# oauth - OAuth2：为什么我们需要用户代理的重定向 URI

> ID：10608312
> 
> 赞同：5
> 
> 时间：2012-05-15T20:22:22.153
> 
> 标签：oauth, salesforce

我最近做了一个带有网络服务器流的小应用程序。现在我正在尝试用户代理示例。我想知道为什么我们需要在用户代理流程中定义一个重定向 uri。

我正在使用 Saleforce.com api：

[http://wiki.developerforce.com/page/Digging_Deeper_into_OAuth_2.0_on_Force.com](http://wiki.developerforce.com/page/Digging_Deeper_into_OAuth_2.0_on_Force.com)

redirect_uri 授权服务器将响应重定向到此 URI。此参数必须与您的应用程序配置的回调 URL 匹配。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T23:13:41.323

在用户代理流程中，redirect_uri 是用户在批准页面上单击批准后被重定向到的位置。附加到 redirect_uri 的是一个哈希片段，然后是 access_token、instance_url 和其他 oauth 参数。

# jquery - 以编程方式设置值时的jQuery-ui滑块动画

> ID：10608314
> 
> 赞同：2
> 
> 时间：2012-05-15T20:22:26.250
> 
> 标签：jquery, jquery-ui, settimeout

我正在使用[jQuery-ui 滑块](http://jqueryui.com/demos/slider/ "jQuery-ui 滑块")和一些按钮来快速选择一组值。

当用户单击其中一个按钮时，滑块通过以下`.slider`方法设置为相应的值：

```
$("#mySlider").slider("value", myValue); 
```

这很好用，但我想看看滑动动画。我试过了

```
$("#mySlider").slider({value:myValue, animate:true}) 
```

但它没有按预期工作，因为动画仅在用户稍后单击滑块时启用。

我应该使用 jQuery 编写一个函数`setTimeout`来实现我想要的功能，还是有更高级别的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:41:48.527

这是一个说明解决方案的 jsfiddle：http: [//jsfiddle.net/exXLV/8/](http://jsfiddle.net/exXLV/8/)

诀窍似乎是创建一个滑块并将其`animate`选项设置为`true`,`slow`等。然后你应该通过设置滑块的值`$("#slider").slider('value', 150);`

`.slider('value', 150)`请注意使用语法（“值”函数）和使用`.slider({value:myValue, animate:true})`语法（“选项”函数）之间的区别。

HTML：

```
<h1>HTML Slider Test</h1>

<div id="slider"></div>

<p>Your slider has a value of <span id="slider-value"></span></p>

<button type="button">Set to 150</button> 
```

JS：

```
$("#slider").slider(
{
            value:100,
            min: 0,
            max: 500,
            step: 1,
            animate: "slow",
            slide: function( event, ui ) {
                $( "#slider-value" ).html( ui.value );
            }
}
);

$( "#slider-value" ).html(  $('#slider').slider('value') );

$("button").click( function(){
    $("#slider").slider('value', 150);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T20:42:15.843

使用[动画](http://jqueryui.com/demos/slider/#option-animate)和[值](http://jqueryui.com/demos/slider/#method-value)方法

这样的事情应该做

```
var slider = $(".slider").slider({
    value: 50,
    animate: true
});

$('#animate').click(function(){
    slider.slider('value', //required value);
}); 
```

[演示](http://jsfiddle.net/dhirajbodicherla/VbM9g/1/)

希望这可以帮助

# javascript - 奇怪的jQuery事件冒泡

> ID：10608315
> 
> 赞同：0
> 
> 时间：2012-05-15T20:22:27.910
> 
> 标签：javascript, jquery

我不确定这是否真的是一个事件冒泡问题。`event.stopPropagation()`不能解决问题。场景是：

1.  单击元素类“clickMe”（根据需要单击）
2.  然后单击`li`元素。点击事件将根据点击“clickMe”类的次数来执行。

以下是代码片段：

html:

```
<div class="clickMe">Click Me 1</div>
<div class="clickMe">Click Me 2</div>
<div class="clickMe">Click Me 3</div>
<ul id="test">
    <li><a href="#">Test A</a></li>
    <li><a href="#">Test B</a></li>
    <li><a href="#">Test C</a></li>
</ul>​​​​​​​​​​​​​​​​​​ 
```

js：

```
$(function() {
    $('.clickMe').live('click', function(e){
        //e.stopPropagation()
        $('li', $('#test')).live('click',function(e){
            //e.stopPropagation()
            alert('ouch')            
        })        
    })
}); 
```

提前感谢您对此问题的任何帮助或解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T20:25:42.150

每当在“clikMe”元素之一上发生“点击”时，您都会向元素添加*另一个*点击处理程序。jQuery 代码维护了所有这些处理程序，因此在您单击“clickMe”几次后，会有几个处理程序，它们都会被调用。`<li>``<div>`

该`.live()`方法不是委托事件处理的最佳方式。如果您使用`.on()`的是新版本的 jQuery，或者至少是`.delegate()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T20:25:49.673

对于每一次点击，`clickMe`你都会附加一个事件，`#test`那就是你的 li 元素

> [live](http://jqapi.com/#p=live)为现在和将来匹配选择器的所有元素附加一个事件处理程序。

将两者分开并[使用](http://jqapi.com/#p=on)

```
$('.clickMe').on('click', function(e) {
    //e.stopPropagation()
})
$('li', $('#test')).on('click', function(e) {
    //e.stopPropagation()
    alert('ouch');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T20:31:24.440

小提琴：

[http://jsfiddle.net/iambriansreed/aEkNa/](http://jsfiddle.net/iambriansreed/aEkNa/)

jQuery：

```
$(function() {
    var clickme_clicks = 0, clickme_timeout = setTimeout(function(){},0) ;

    $('.clickMe').on('click', function(e){
        clickme_clicks++;        
        clearTimeout( clickme_timeout );
        clickme_timeout = setTimeout(function(){ clickme_clicks = 0; },1000);
    });

     $('li a', $('#test')).on('click',function(e){
        e.preventDefault();
        //if(clickme_clicks == 0) return;
        alert('clicks: ' + clickme_clicks );         
    })  
});​ 
```

# php - 用于 IP 地理定位的 PHP 和 API

> ID：10608318
> 
> 赞同：0
> 
> 时间：2012-05-15T20:22:36.470
> 
> 标签：php, mysql, api, geolocation

我试图在我的网络应用程序中使用[http://www.hostip.info/use.html](http://www.hostip.info/use.html)来显示 IP 地址的大致城市位置。我无法弄清楚如何实际显示 API 的内容......这是我所拥有的不起作用的。

```
function showCity($currIP){

$lookupData = 'http://api.hostip.info/get_html.php?ip='.$currIP;
return $lookupData;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T20:24:25.257

您的 API 返回以下内容：

```
Country: UNITED STATES (US)
City: Seattle, WA
IP: 168.111.127.225 
```

因此，您需要对该结果进行一些字符串解析。使用以下内容将帮助您入门：

```
 $array = preg_split('/$\R?^:/m', $lookupData);
 print_r($array); 
```

试试这个：

```
$array = preg_split("/[\r\n]/", $lookupData, -1, PREG_SPLIT_NO_EMPTY); 
```

此外，正如 mcmajkel 所提到的，如果您使用 JSON api 链接，您可以通过以下方式访问它：

```
$lookupData = 'http://api.hostip.info/get_json.php?ip='.$currIP;
$api = json_decode($lookupData);
$myName = $api->country_name;
$myCode = $api->country_code;
$myCity = $api->city;
$myIP   = $api->ip; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T20:28:26.677

如 GregP 所述，此调用返回字符串。但是你可以调用 [http://api.hostip.info/get_json.php?ip=12.215.42.19](http://api.hostip.info/get_json.php?ip=12.215.42.19)

并得到一个不错的 JSON 作为回报，这将更容易 [解析](http://php.net/manual/en/function.json-decode.php)

# ajax - 以编程方式安全地将数据发布到 https 端点，无需浏览器

> ID：10608320
> 
> 赞同：1
> 
> 时间：2012-05-15T20:22:39.573
> 
> 标签：ajax, security, node.js, ssl, http-post

如果以编程方式（而不是通过浏览器）发布到 https 端点，数据是否安全？我的理解是浏览器加密数据并将其发送到 https 端点。Ruby 或 Node.js 或任何其他程序如何做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T20:56:34.003

我检查了 node.js[请求](https://github.com/mikeal/request)库以及 Ruby [HTTParty](https://github.com/jnunemaker/httparty)库。这两者都基于适当的选项（端口：443等）支持SSL加密。一般来说，如果我们使用任何支持 HTTP 获取和发布的支持良好的库，我们应该了解将数据安全地传输到 https 端点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T20:26:38.240

是的。如果您使用 curl、wget 或任何库连接到 https 端点，则从连接源到目标的传输是安全的。该来源可以是服务器（您的网络服务器）或客户端浏览器。

但是，如果它是在客户端 JS 或其他浏览器脚本语言中完成的，您必须确保从客户端到您的站点的初始请求也是安全的，如果首先将安全数据传递给客户端以使其传递到目标 https 服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T06:57:16.133

我想我明白你的意思，这个问题已经得到解答。但是，我只想指出，HTTPS 不会**使**您的*数据*安全，只有连接，甚至只是从窃听中加密，这并不是真正*安全*的。

当然，要让您的数据端到端安全，还有很多事情需要考虑和做。

# php - 如何将id附加到php中的路径

> ID：10608321
> 
> 赞同：3
> 
> 时间：2012-05-15T20:22:47.233
> 
> 标签：php, path

我正在尝试将 id 索引页面传递到另一个页面，如下所示

```
 $id=48;

 header("Location: ".$redirect."parties.php&id=$id"); 
```

但它不工作请帮助我

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-15T20:23:59.487

将 更改`&`为`?`

```
header("Location: ".$redirect."parties.php?id=$id"); 
```

然后在 中`parties.php`，您将能够访问它`$_GET['id']`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T20:25:00.450

```
header("Location: ".$redirect."parties.php?id=$id"); 
```

# javascript - 这个 dojo 代码有什么问题？

> ID：10608322
> 
> 赞同：0
> 
> 时间：2012-05-15T20:22:48.873
> 
> 标签：javascript, dojo

这只是我正在编写的一段测试 dojo 代码。我是 Dojo 的初学者，我不明白这有什么问题。加载时不显示警报按钮。此外，

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Tutorial: Hello Dojo!</title>

<!-- load Dojo -->

</head>
<body>
<script src="http://ajax.googleapis.com/ajax/libs/dojo/1.7.2/dojo/dojo.js" data-dojo-    config="async:true, parseOnLoad:true">
require(["dijit/layout/BorderContainer", "dijit/layout/TabContainer",
    "dijit/layout/ContentPane", "dojo/parser"]);
require(["dojo/ready"],function(ready){
alert("BLAH");
});
</script>

<div id="targetID">
Hello world
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T21:36:26.473

不要将 javascript 放在您拥有 src= 的同一标签中并关闭您的脚本标签

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T20:26:59.530

这里似乎没问题：http: [//jsfiddle.net/XwAhY/](http://jsfiddle.net/XwAhY/)。你确定`data-dojo- config`你的页面没有空格吗？

# c - 链接描述文件中的位置计数器

> ID：10608323
> 
> 赞同：3
> 
> 时间：2012-05-15T20:22:49.480
> 
> 标签：c, gcc, linker, linker-scripts

我在想我了解链接器脚本中位置计数器的工作原理，但我想并非如此。我只是做了一个简单的测试来确认我的理解。我写了一个没有任何库调用的简单 c 程序，并用 gcc 编译它。然后我使用链接器脚本将其链接起来，并在开始时将位置计数器设置为值。这是程序

```
int a = 6;
int main(){
return 0;
} 
```

以下是链接描述文件

```
ENTRY(main)

addr = 0x8048000;

SECTIONS
{
 .text addr :
 ALIGN(0x1000)
 {
  *(text*);
  *(.rodata*);

 }

 .data :
 ALIGN(0x1000)
 {
   *(.data*);
 } 
} 
```

我不想执行它，只是查看 objdump 输出。我在想，当我`objdump -s`在精灵上做时，它应该将起始地址显示为 0x8048000。但是我总是看到起始地址为 0000

```
Contents of section .text:
 0000 b8000000 00c3                        ......          
Contents of section .data:
 1000 06000000                             ....            
Contents of section .comment:
 0000 4743433a 20285562 756e7475 20342e34  GCC: (Ubuntu 4.4
 0010 2e332d34 7562756e 74753529 20342e34  .3-4ubuntu5) 4.4
 0020 2e3300 
```

此外还有一个评论部分也是从 0000 开始的。我不明白发生了什么。

这是没有链接描述文件的 objdump 的输出（仍然没有任何库）

```
Contents of section .text:
 8048094 b8000000 00c3                        ......          
Contents of section .data:
 804909c 06000000                             ....            
Contents of section .comment:
 0000 4743433a 20285562 756e7475 20342e34  GCC: (Ubuntu 4.4
 0010 2e332d34 7562756e 74753529 20342e34  .3-4ubuntu5) 4.4
 0020 2e3300 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:44:44.277

你的地图文件是什么样的？你是如何建造它的？我尝试重现您的问题，我相信这一切都按预期工作：

```
x:~/temp> cat test.c && cat test.x && gcc test.c -Wl,-T,./test.x -nostdlib -o test.exe && readelf -S test.exe | grep .text && objdump -s test.exe
int a = 6;
int main(){
return 0;
}

ENTRY(main)

addr = 0x8048000;

SECTIONS
{
 .text addr :
 ALIGN(0x1000)
 {
  *(text*);
  *(.rodata*);

 }

 .data :
 ALIGN(0x1000)
 {
   *(.data*);
 } 
}

  [ 2] .text             PROGBITS        08048000 001000 00000a 00  AX  0   0 4096

test.exe:     file format elf32-i386

Contents of section .data:
 8049000 06000000                             ....            
Contents of section .text:
 8048000 5589e5b8 00000000 5dc3               U.......].      
Contents of section .comment:
 0000 00474343 3a202847 4e552920 342e352e  .GCC: (GNU) 4.5.
 0010 3100                                 1\. 
```

哦，编译器刚刚插入了 .comment 部分。

# css - 使 CSS background-position 从右到左引用图像

> ID：10608331
> 
> 赞同：0
> 
> 时间：2012-05-15T20:23:25.603
> 
> 标签：css, css-sprites

我知道使用带有背景位置的精灵的典型方法是使用左上角引用精灵中的图像并提供负坐标。我有一个用于按钮的圆角矩形，我想为矩形的右上角提供坐标，并让它在三角形右边缘的左侧重复 x。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:57:42.157

从我认为您要问的内容来看，听起来您想使用此规则：

```
background-position: 100% 0; 
```

或者

```
background: url(image.png) repeat-x 100% 0; 
```

这应该推动背景图像，以便与它所在的任何元素的右侧匹配。

# c# - 从 json.net 发现输出类

> ID：10608339
> 
> 赞同：0
> 
> 时间：2012-05-15T20:23:54.407
> 
> 标签：c#, json.net

我正在做一个项目，我在其中基于反射动态构建一组对象并将其序列化（使用 json.net）。

我想做的是反序列化它并重新创建对象树，但我不知道最终的类类型。

那么我怎样才能知道呢？

这是一个例子：

```
 public class insideBleah
{
    public int BProperty
    { get; set; }
}

public class bleah
{
    public int AProperty
    { get; set; }

    public insideBleah Inside
    { get; set; }
} 
```

和

```
 var bleah = new bleah();
    bleah.AProperty = 1;
    bleah.Inside = new insideBleah();
    bleah.Inside.BProperty = 2;

    var output = JsonConvert.SerializeObject(bleah, new JsonSerializerSettings()
        {
            TypeNameHandling = TypeNameHandling.Objects
}); 
```

这将产生输出字符串：

```
"{\"$type\":\"jsontest.bleah, jsontest\",\"AProperty\":1,\"Inside\":{\"$type\":\"jsontest.insideBleah, jsontest\",\"BProperty\":2}}" 
```

所以我可以看到那里的课程。它是如此接近！但我似乎无法梳理出这些信息。

我怎样才能做到这一点？我不能这样做：

```
var newObject = (bleah)JsonConvert.DeserializeObject<bleah>(output); 
```

因为我不知道这是一个'bleah'。

我该如何处理？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:38:52.587

为什么你可以使用：

```
using System;
using Newtonsoft.Json;

namespace ConsoleApplication1
{
    class Program
    {
        private static void Main(string[] args)
        {
            var bleah = new Person();
            var settings = new JsonSerializerSettings {  TypeNameHandling = TypeNameHandling.Objects };
            var output = JsonConvert.SerializeObject(bleah, settings);

            Console.WriteLine(output);

            var deserializeObject = JsonConvert.DeserializeObject(output, settings);
            Console.WriteLine(deserializeObject.GetType().Name);

        }
    }

    class Person
    {
        public string Name { get; set; }
    }
} 
```

输出：

```
{"$type":"ConsoleApplication1.Person, ConsoleApplication1","Name":null}
Person 
```

# objective-c - 如何等待下载大文件？

> ID：10608340
> 
> 赞同：4
> 
> 时间：2012-05-15T20:23:54.703
> 
> 标签：objective-c, ios, ios5

我有一个成功使用同步方法下载文件的应用程序（NSData 的 initWithContentsOfURL 和 NSURLConnection 的 sendSynchronousRequest），但现在我需要支持大文件。这意味着我需要一点一点地流式传输到磁盘。尽管流式传输到磁盘并变为异步应该是完全正交的概念，但 Apple 的 API 迫使我为了流式传输而使用异步。

**需要明确的是，我的任务是允许下载更大的文件，而不是重新构建整个应用程序以使其更加异步友好。**我没有资源。但我承认，依赖于重新架构的方法是有效且好的。

所以，如果我这样做：

```
NSURLConnection* connection = [ [ NSURLConnection alloc ] initWithRequest: request delegate: self startImmediately: YES ]; 
```

.. 我最终调用了自己的 didReceiveResponse 和 didReceiveData。优秀的。但是，如果我尝试这样做：

```
NSURLConnection* connection = [ [ NSURLConnection alloc ] initWithRequest: request delegate: self startImmediately: YES ];
while( !self.downloadComplete )
    [ NSThread sleepForTimeInterval: .25 ]; 
```

... didReceiveResponse 和 didReceiveData 永远不会被调用。我已经知道为什么了。奇怪的是，异步下载发生在我正在使用的同一个主线程中。所以当我睡主线程时，我也在睡做工作的东西。无论如何，我已经尝试了几种不同的方法来实现我想要的，包括告诉 NSURLConnection 使用不同的 NSOperationQueue，甚至执行 dispatch_async 来创建连接并手动启动它（我不明白这怎么行不通 -我一定做得不对），但似乎没有任何效果。**编辑：**我做的不对的是理解运行循环是如何工作的，并且你需要在辅助线程中手动运行它们。

**等到文件下载完成的最佳方法是什么？**

**编辑 3，工作代码**：以下代码确实有效，但如果有更好的方法，请告诉我。

在建立连接并等待下载完成的原始线程中执行的代码：

```
dispatch_queue_t downloadQueue = dispatch_get_global_queue( DISPATCH_QUEUE_PRIORITY_DEFAULT, 0 );
dispatch_async(downloadQueue, ^{
    self.connection = [ [ NSURLConnection alloc ] initWithRequest: request delegate: self startImmediately: YES ];
    [ [ NSRunLoop currentRunLoop ] run ];
});

while( !self.downloadComplete )
    [ NSThread sleepForTimeInterval: .25 ]; 
```

在响应连接事件的新线程中执行的代码：

```
-(void)connection:(NSURLConnection*) connection didReceiveData:(NSData *)data {
    NSUInteger remainingBytes = [ data length ];
    while( remainingBytes > 0 ) {
        NSUInteger bytesWritten = [ self.fileWritingStream write: [ data bytes ] maxLength: remainingBytes ];
        if( bytesWritten == -1 /*error*/ ) {
            self.downloadComplete = YES;
            self.successful = NO;
            NSLog( @"Stream error: %@", self.fileWritingStream.streamError );
            [ connection cancel ];
            return;
        }
        remainingBytes -= bytesWritten;
    }
}

-(void)connection:(NSURLConnection*) connection didFailWithError:(NSError *)error {
    self.downloadComplete = YES;
    [ self.fileWritingStream close ];
    self.successful = NO;
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    self.downloadComplete = YES;
    [ self.fileWritingStream close ];
    self.successful = YES;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T21:14:56.250

> ... didReceiveResponse 和 didReceiveData 永远不会被调用。我已经知道为什么了。奇怪的是，异步下载发生在我正在使用的同一个主线程中。它不会创建新线程。所以当我睡主线程时，我也在睡做工作的东西。

确切地。连接由run loop驱动；如果你让线程休眠，运行循环就会停止，这会阻止你的连接做它的事情。

所以不要做任何特别的事情。让应用程序坐在那里，运行循环。也许在屏幕上放一个小微调器来娱乐用户。如果可以的话，去做你的生意。如果可能，让用户继续使用该应用程序。连接完成后将调用您的委托方法，然后您可以对数据执行所需的操作。

当您将代码移动到后台线程时，您将再次需要一个运行循环来驱动连接。因此，您将开始创建一个运行循环，安排您的连接，然后返回。运行循环将继续运行，并且在连接完成时将再次调用您的委托方法。如果线程完成，您可以停止运行循环并让线程退出。这里的所有都是它的。

**示例：**让我们具体说明一下。假设您要建立多个连接，一次一个。将 URL 粘贴在可变数组中。创建一个名为（例如）的方法`startNextConnection`，它执行以下操作：

*   从数组中获取一个 URL（在此过程中将其删除）

*   创建一个 URL 请求

*   启动一个 NSURLConnection

*   返回

此外，实现必要的 NSURLConnectionDelegate 方法，尤其是`connectionDidFinishLoading:`. 让该方法执行以下操作：

*   将数据存储在某处（将其写入文件，将其交给另一个线程进行解析，无论如何）

*   称呼`startNextConnection`

*   返回

如果从未发生错误，则足以检索列表中所有 URL 的数据。（当然，您需要`startNextConnection`足够聪明，以便在列表为空时返回。）但是确实会发生错误，因此您必须考虑如何处理它们。如果连接失败，是否要停止整个过程？如果是这样，只需让您的`connection:didFailWithError:`方法做一些适当的事情，但不要让它调用`startNextConnection`. 如果出现错误，是否要跳到列表中的下一个 URL？然后`...didFailWithError:`打电话`startNextRequest`。

**替代方案：**如果你真的想保持同步代码的顺序结构，那么你就有了类似的东西：

```
[self downloadURLs];
[self waitForDownloadsToFinish];
[self processData];
... 
```

那么您必须在不同的线程中进行下载，以便您可以自由地阻止当前线程。如果这是您想要的，那么使用运行循环设置下载线程。`-initWithRequest:delegate:startImmediately:`接下来，像你一直在做的那样创建连接，但传入`NO`最后一个参数。用于`-scheduleInRunLoop:forMode:`将连接添加到下载线程的运行循环中，然后使用该`-start`方法启动连接。这使您可以自由地休眠当前线程。让连接委托的完成例程设置一个标志，例如`self.downloadComplete`您的示例中的标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:28:47.283

我不愿提供这个答案，因为其他人认为您确实应该围绕异步模型构建您的应用程序是正确的。尽管如此：

```
NSURLConnection* connection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:NO];
NSString* myPrivateMode = @"com.yourcompany.yourapp.DownloadMode";
[connection scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:myPrivateMode];
[connection start];
while (!self.downloadComplete)
    [[NSRunLoop currentRunLoop] runMode:myPrivateMode beforeDate:[NSDate distantFuture]]; 
```

不要在主线程上执行此操作。您的应用程序很可能会因为阻塞主线程而被终止，就像因为将太大的文件下载到内存中一样。

顺便说一句，鉴于您正在下载到文件而不是内存，您应该考虑`NSURLConnection`从`NSURLDownload`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T20:25:52.010

我认为您`sleepForInterval`正在阻止 NSURLConnection 的活动-

> 线程被阻塞时不会发生运行循环处理。

来自[NSThread 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsthread_Class/Reference/Reference.html)。

* * *

我认为您可能不得不重新考虑如何设置`downloadComplete`变量。考虑使用您的 `connectionDidFinishLoading:connection`委托方法来确定下载何时完成而不是循环+睡眠？

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{        
    self.downloadComplete = YES;

    // release the connection, and the data object
    [connection release];
    [receivedData release];
} 
```

来自[NSURLConnection 指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html#//apple_ref/doc/uid/20001836-162021-CJBDFIAH)。

您可以使用`connection:connection didFailWithError:error`委托方法来确保您正在处理下载未完成的情况。

# meteor - 手动发布/订阅场景中可能存在的 Meteor 错误

> ID：10608341
> 
> 赞同：1
> 
> 时间：2012-05-15T20:23:56.673
> 
> 标签：meteor

我在 Meteor 中订阅/发布时遇到问题。我编写了一个示例 Meteor 应用程序来帮助缩小问题的范围。

我正在服务器上发布一个集合，该集合由通过客户端订阅传递的参数过滤。此订阅在自动订阅中，它利用会话变量来响应式更新订阅。

在更改此特定会话变量的状态时，客户端上的集合没有得到正确更新，或者至少我收集到的是这样。我花了一整天的时间在我控制的代码中没有发现问题。我怀疑我要么不了解如何在 Meteor 中设置正确的 pub-sub，要么 Meteor 中存在问题。

要重现该问题，请启动一个新的 Meteor 项目并使用以下内容（尝试时确保删除自动发布包）：

**HTML（例如 test.html）：**

```
<head>
    <title>pubsubbug</title>
</head>

<body>
    {{> main}}
</body>

<template name="main">
    <h1>Example showing possible bug in Meteor wrt pub-sub</h1>
    <p><button name="showall">show all ({{showall}})</button></p>
    <div style="float:left;width:400px;">
        <h2>Notes:</h2>
        <ul>
            {{#each notes}}
                <li>{{title}}</li>
            {{/each}}
        </ul>
    </div>
    <div style="float:left;">
        <h2>Notes (copied):</h2>
        <ul>
            {{#each notes_copied}}
                <li>{{title}}</li>
            {{/each}}
        </ul>
    </div>
</template> 
```

**JS（例如 test.js）**

```
if (Meteor.is_client) {
    Notes = new Meteor.Collection("notes_collection");
    NotesCopied = new Meteor.Collection("notes_collection_copied");

    Session.set("showall", false);

    Meteor.autosubscribe(function () {
        Meteor.subscribe("notes_subscription", Session.get("showall"), function () {
            console.log("Notes count:", Notes.find().count());
        });

        Meteor.subscribe("notes_subscription_copied", Session.get("showall"), function () {
            console.log("Bug? This isn't getting called.");
            console.log("NotesCopied count:", NotesCopied.find().count());
        });
    });

    Template.main.notes = function () {
        return Notes.find();
    };

    Template.main.notes_copied = function () {
        return NotesCopied.find();
    };

    Template.main.showall = function () {
        return Session.get("showall");
    };

    Template.main.events = {
        "click button[name='showall']": function (evt) {
            Session.set("showall", !Session.get("showall"));
        }
    };
}

if (Meteor.is_server) {
    Notes = new Meteor.Collection("notes_collection");

    var getNotes = function (showall) {
        if (showall) {
            return Notes.find({}, {sort: {title: 1}});
        } else {
            return Notes.find({visible: true}, {sort: {title: 1}});
        }
    };

    Meteor.publish("notes_subscription", function (showall) {
        // By sending the Notes back with the same uuid as before, the
        // client end seems to get confused:
        return getNotes(showall);
    });

    Meteor.publish("notes_subscription_copied", function (showall) {
        var notes = getNotes(showall);
        var self = this;

        // Copy notes into a new notes collection (see NotesCopied on client).
        // By generating a new uuid, we don't get an issue with the notes
        // on the client getting screwed up:
        notes.forEach(function (note) {
            var uuid = Meteor.uuid();   // note._id will cause same problem
            self.set("notes_collection_copied", uuid, {title: note.title});
        });

        self.flush();
        self.complete();
    });

    // Add example notes
    Meteor.startup(function () {
        if (Notes.find().count() === 0) {
            Notes.insert({title: "Note #1 (always visible)", visible: true});
            Notes.insert({title: "Note #2 (always visible)", visible: true});
            Notes.insert({title: "Note #3 (always visible)", visible: true});
            Notes.insert({title: "Note #4 (only visible when showall true)", visible: false});
            Notes.insert({title: "Note #5 (only visible when showall true)", visible: false});
            Notes.insert({title: "Note #6 (only visible when showall true)", visible: false});
        }
    });
} 
```

*您将看到的内容的解释：*

将有一个按钮，单击该按钮时，只需在真假之间切换会话变量（showall）。

存在两个订阅（在自动订阅中），一个示例错误，另一个以`_copied`. 我不知道如何处理这些特定的信息......我不想要新的 uuid。

所以基本上，当重复单击*显示全部*按钮时，第一列*注释：*将显示不正确的结果，单击几下后不会显示任何内容。

另一方面，第二列*Notes (copied):*，其 uuid 每次都重新生成，正确显示。

这是一个错误吗？或者有没有合适的方法来做到这一点？

编辑：上面的例子在[http://pubsubbug.meteor.com/](http://pubsubbug.meteor.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T23:07:09.083

在 Windows 上的开发人员分支上没有遇到您的错误。既然是这种情况，这是一个好兆头，表明您的代码没有任何问题。您似乎看到有关订阅和/或 Mongo 查询方式的问题。

Meteor 本身很可能在其主机上运行稳定（= master）版本，因此您将不得不尝试不同的方法或等待新版本。除非你可以支持在开发中运行...

# android - 如何使用简单的xml android仅获取xml中嵌套元素的数据

> ID：10608345
> 
> 赞同：1
> 
> 时间：2012-05-15T20:24:12.160
> 
> 标签：android, xml, xml-deserialization, simple-framework

我希望有人可以提供帮助，并且非常感激。

我正在尝试使用[简单的 xml](http://simple.sourceforge.net) for android 从 xml 创建元素，我对根不感兴趣，而只对一些嵌套元素感兴趣。我想知道是否有一种方法可以让简单的 xml 获取这些元素，而无需我创建从 root 开始的所有类（在本例中为响应类）。我只对从下面的 xml 获取 Stations 类感兴趣。

谢谢你。

```
 <Response xmlns="http://www.sss.com/ws/">
    <GroupInfo>
    <Id>lirr</Id>
    <Name>Long Island Rail Road</Name>
    <VehicleTypes>R</VehicleTypes>
    <Category>NYC to LI Regional Rail</Category>
    <IconLarge>
    <Width>50</Width>
    <Height>50</Height>
    </IconLarge>
    <Icon>
    <Width>25</Width>
    <Height>25</Height>
    </Icon>
    <Stations>
    <Station>
    <Id>albertson</Id>
    <Name>Albertson</Name>
    <X>-73.64169</X>
    <Y>40.77205</Y>
    <Radius>100</Radius>
    </Station>
    <Station>
    <Id>yaphank</Id>
    <Name>Yaphank</Name>
    <X>-72.91588</X>
    <Y>40.8256</Y>
    <Radius>100</Radius>
    </Station>
    </Stations>
    </GroupInfo>
    <ResponseStatus>
    <ResultCode>200</ResultCode>
    <ResultString>Success.</ResultString>
    </ResponseStatus>
    </Response> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:30:03.477

我找到了解决方案。我使用@Path 来指定xpath，它解决了问题 [http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php#xpath](http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php#xpath)

# c# - WCF 替代跨进程/机器通信

> ID：10608355
> 
> 赞同：9
> 
> 时间：2012-05-15T20:24:52.293
> 
> 标签：c#, wcf

我正在开发一个包含多个 Windows 服务的 C# 应用程序，这些服务需要相互通信以传递数据。这些服务可能在同一台机器上，但它们可能是远程的。我考虑过为此目的使用 WCF，但似乎 WCF 太重并且有很多额外的配置，对我来说，这似乎是不必要的（.NET 3.5 是这里的要求，我知道 .NET 4 简化了这一点）

所以我的问题是，除了提供此功能的已弃用的.NET Remoting 之外，WCF 的最佳替代品是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-15T21:02:34.857

近 8 年来，我一直在使用 PInvoke 访问 Windows RPC 运行时。就运输而言，它非常快速且非常可靠。当与 protobuf-csharp-port 之类的快速串行器结合使用时，生成的通信非常可靠且[非常快](http://csharptest.net/787/benchmarking-wcf-compared-to-rpclibrary/)。

因此，要从头开始构建它，这需要三个部分：

1.  用于序列化的 Google 协议缓冲区 ( [protobuf-csharp-port](http://code.google.com/p/protobuf-csharp-port/) )。
2.  我自己的[CSharpTest.Net.RpcLibrary](http://csharptest.net/projects/rpclibrary/)用于传输。
3.  一些胶水代码将它们从[protobuf-csharp-rpc](http://code.google.com/p/protobuf-csharp-rpc/)放在一起。

这些都在 NuGet 上的以下包中可用：[Google.ProtocolBuffers](http://nuget.org/packages/Google.ProtocolBuffers)、[CSharpTest.Net.RpcLibrary](http://nuget.org/packages/CSharpTest.Net.RpcLibrary)和[Google.ProtocolBuffers.Rpc](http://nuget.org/packages/Google.ProtocolBuffers.Rpc)。

以下是入门的简要说明：

1.  [使用Google Protocol Buffer Language](https://developers.google.com/protocol-buffers/docs/proto)定义一组消息和一个服务。

2.  定义好之后，您将运行 ProtoGen.exe 以在 C# 中生成服务存根和消息。请务必添加“-service_generator_type=IRPCDISPATCH”以生成正确的服务代码。

3.  现在您已经生成了源文件，将它们添加到项目并引用上面列出的包中的三个程序集。

4.  最后看一下[protobuf-csharp-rpc](http://code.google.com/p/protobuf-csharp-rpc/)项目页面上的示例客户端/服务器代码。将“SearchService”替换为您的服务名称，您应该可以运行了。

5.  可选择更改 RPC 客户端/服务器的配置。该示例显示了仅本地主机的 LRPC 的使用；但是[DemoRpcLibrary.cs](http://code.google.com/p/protobuf-csharp-rpc/source/browse/src/ProtocolBuffers.Rpc.Test/DemoRpcLibrary.cs)源文件也显示 TCP/IP 和命名管道。

您可以随时给我发电子邮件（roger @我的用户名）以获取更多信息或示例。

**更新**

我写了一个快速启动指南：[WCF 替换跨进程/机器通信](http://csharptest.net/1177/wcf-replacement-for-cross-processmachine-communication/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T20:53:06.570

您可能想研究一下 ZeroMQ，它非常轻量级且有效，并带有良好的 C# 绑定。（在我的手机上输入这个，所以你现在必须自己谷歌搜索，抱歉）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-05T17:16:32.643

看看[NFX 胶水](https://github.com/aumcode/nfx/tree/master/Source/NFX/Glue)。

对于耦合系统，它比 WCF 快得多。

[Glue 博客的进程间通信](http://blog.aumcode.com/2014/08/nfxglue-interprocess-communication.html)

[基准](http://blog.aumcode.com/2015/03/apache-thrift-vs-nfxglue-benchmark.html)

代码：[https ://github.com/aumcode/nfx](https://github.com/aumcode/nfx)

# android - 动画文件使用 SherlockActionBar 使应用程序崩溃

> ID：10608359
> 
> 赞同：0
> 
> 时间：2012-05-15T20:25:06.450
> 
> 标签：android, actionbarsherlock

当我将动画 xml 文件添加到我的项目（我正在尝试缩放、旋转、设置）并尝试在 Android 2.1 虚拟机中启动它时，它在 logcat 中出现以下消息而崩溃

```
05-16 00:14:01.821: E/AndroidRuntime(898): Uncaught handler: thread main exiting due to uncaught exception
05-16 00:14:01.861: E/AndroidRuntime(898): java.lang.RuntimeException: Unable to start activity ComponentInfo{su.k_r.tasstelecom/su.k_r.tasstelecom.CategoriesActivity}: android.view.InflateException: Binary XML file line #31: Error inflating class com.actionbarsherlock.internal.widget.ActionBarView
05-16 00:14:01.861: E/AndroidRuntime(898):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
05-16 00:14:01.861: E/AndroidRuntime(898):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
05-16 00:14:01.861: E/AndroidRuntime(898):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
05-16 00:14:01.861: E/AndroidRuntime(898):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
05-16 00:14:01.861: E/AndroidRuntime(898):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-16 00:14:01.861: E/AndroidRuntime(898):  at android.os.Looper.loop(Looper.java:123)
05-16 00:14:01.861: E/AndroidRuntime(898):  at android.app.ActivityThread.main(ActivityThread.java:4363)
05-16 00:14:01.861: E/AndroidRuntime(898):  at java.lang.reflect.Method.invokeNative(Native Method)
05-16 00:14:01.861: E/AndroidRuntime(898):  at java.lang.reflect.Method.invoke(Method.java:521)
05-16 00:14:01.861: E/AndroidRuntime(898):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
05-16 00:14:01.861: E/AndroidRuntime(898):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
05-16 00:14:01.861: E/AndroidRuntime(898):  at dalvik.system.NativeStart.main(Native Method)
05-16 00:14:01.861: E/AndroidRuntime(898): Caused by: android.view.InflateException: Binary XML file line #31: Error inflating class com.actionbarsherlock.internal.widget.ActionBarView
05-16 00:14:01.861: E/AndroidRuntime(898):  at android.view.LayoutInflater.createView(LayoutInflater.java:513)
05-16 00:14:01.861: E/AndroidRuntime(898):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:565)
05-16 00:14:01.861: E/AndroidRuntime(898):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
05-16 00:14:01.861: E/AndroidRuntime(898):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:621)
05-16 00:14:01.861: E/AndroidRuntime(898):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
05-16 00:14:01.861: E/AndroidRuntime(898):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
05-16 00:14:01.861: E/AndroidRuntime(898):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
05-16 00:14:01.861: E/AndroidRuntime(898):  at com.actionbarsherlock.internal.ActionBarSherlockCompat.generateLayout(ActionBarSherlockCompat.java:1042)
05-16 00:14:01.861: E/AndroidRuntime(898):  at com.actionbarsherlock.internal.ActionBarSherlockCompat.installDecor(ActionBarSherlockCompat.java:912)
05-16 00:14:01.861: E/AndroidRuntime(898):  at com.actionbarsherlock.internal.ActionBarSherlockCompat.setContentView(ActionBarSherlockCompat.java:846)
05-16 00:14:01.861: E/AndroidRuntime(898):  at com.actionbarsherlock.app.SherlockListActivity.setContentView(SherlockListActivity.java:212)
05-16 00:14:01.861: E/AndroidRuntime(898):  at android.app.ListActivity.ensureList(ListActivity.java:305)
05-16 00:14:01.861: E/AndroidRuntime(898):  at android.app.ListActivity.getListView(ListActivity.java:290)
05-16 00:14:01.861: E/AndroidRuntime(898):  at su.k_r.tasstelecom.CategoriesActivity.onCreate(CategoriesActivity.java:72)
05-16 00:14:01.861: E/AndroidRuntime(898):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-16 00:14:01.861: E/AndroidRuntime(898):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
05-16 00:14:01.861: E/AndroidRuntime(898):  ... 11 more
05-16 00:14:01.861: E/AndroidRuntime(898): Caused by: java.lang.reflect.InvocationTargetException
05-16 00:14:01.861: E/AndroidRuntime(898):  at com.actionbarsherlock.internal.widget.ActionBarView.<init>(ActionBarView.java:235)
05-16 00:14:01.861: E/AndroidRuntime(898):  at java.lang.reflect.Constructor.constructNative(Native Method)
05-16 00:14:01.861: E/AndroidRuntime(898):  at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
05-16 00:14:01.861: E/AndroidRuntime(898):  at android.view.LayoutInflater.createView(LayoutInflater.java:500)
05-16 00:14:01.861: E/AndroidRuntime(898):  ... 26 more
05-16 00:14:01.861: E/AndroidRuntime(898): Caused by: java.lang.NullPointerException
05-16 00:14:01.861: E/AndroidRuntime(898):  at com.actionbarsherlock.internal.widget.ActionBarView$HomeView.setUp(ActionBarView.java:1302)
05-16 00:14:01.861: E/AndroidRuntime(898):  ... 30 more 
```

我什至不在代码中使用动画。我在哪里做错了？

在 android 4.0 中一切正常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T21:37:33.973

清理 ABS 项目修复问题

# javascript - 鼠标指令在嵌套的 AngularJS 环境中表现异常

> ID：10608365
> 
> 赞同：1
> 
> 时间：2012-05-15T20:25:47.777
> 
> 标签：javascript, angularjs

我试图在 AngularJS 中实现嵌套树结构。它由所有由相同控制器类型管理的节点组成。你可以在这里找到一个例子：http: [//jsfiddle.net/Yfmdy/2/](http://jsfiddle.net/Yfmdy/2/)

我的问题是，每次删除子节点并且修改其父节点的“子节点”数组时，所有父节点都会失去其 ng-mouseenter 和 ng-mouseleave 行为。

有谁知道该怎么做？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:19:55.160

这是一个错误：[https ://github.com/angular/angular.js/issues/963](https://github.com/angular/angular.js/issues/963)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:10:10.490

用于`$browser.defer`发出`$childDeleted`事件。
将当前元素 css 设置为`display: none;`并强制执行`ng-mouseleave`。

这里的例子：http: [//jsfiddle.net/Ticore/Yfmdy/11/](http://jsfiddle.net/Ticore/Yfmdy/11/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T13:44:18.597

实际上，这是浏览器javascript的错误。

JavaScript MouseOver/Out 事件不一致。

纯js示例在这里[http://jsfiddle.net/GbuNn/6/](http://jsfiddle.net/GbuNn/6/)

# javascript - 深思：在 if 语句中返回

> ID：10608372
> 
> 赞同：0
> 
> 时间：2012-05-15T20:26:01.763
> 
> 标签：javascript

我可以将 return 放在任何地方，例如函数、if 块、case 块。

这怎么行不通：

```
 (x == "good") ? (return("works")):""; 
```

更新：我知道我可以这样做：

```
 return (x == "good") ? ("works"):""; 
```

只是想知道为什么第一种情况是不可接受的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T20:27:26.997

你想这样做吗：

```
return (x == "good") ? "works":""; 
```

return 不是函数，因此 return("works") 不正确。或者你也可以这样做：

```
var x = "bad";

var y = (x=="good")? "works" : "";

return y; 
```

但这更冗长。因此，要回答您的问题，您可以将 return 放在函数中的任何位置，但它之后的任何内容都不会被执行。所以

```
function x ()
{
   var str = "";

   return "I love puppies.";

   str = "me too!" //this won't ever execute, because return exits the function.
} 
```

一个例外是变量声明，因为无论你把变量放在哪里，变量都会在开始时自动声明。

```
function y (){
  return "";

   var x; 
} 
```

是真的：

```
function y (){
   var x;

   return "";

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T20:27:58.787

这是因为[三元运算的语法是这样的](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Conditional_Operator)：

> 健康）状况 ？expr1 : expr2

从技术上讲，return 语句不被视为表达式。

* * *

编辑：这里有更多信息。上面是根据语言的语法来解释的，但是这里稍微讲一下为什么的推理。

实际上，我之前已经对此进行了深入研究，因为我一直认为能够执行以下操作会很酷：

```
someFlag && return; 
```

而不是

```
if (someFlag) return; 
```

然而，问题是表达式总是需要对某些东西求值。此要求与 return 语句的角色不一致，但是，它与（可选）返回结果一起，也会立即终止当前函数的执行。如果返回语句本身确实是一个表达式，那么当前函数的这种终止在逻辑上与计算返回语句本身的值的需要不一致。

鉴于这种不一致，语言作者显然选择不允许 return 语句充当表达式。希望我设法以一种有意义的方式表达了这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T20:27:30.603

`return`关键字应该放在第一位：

```
return (x == "good") ? "works": ""; 
```

原因是那`return x;`是一个声明。您不能`(return x)`用作表达式。

所有的表达式都可以用在需要语句的地方，但不是所有的语句都可以用在需要表达式的地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T20:29:28.760

你是说如果 x 是“好”，然后返回，否则什么都不做？在这种情况下，

```
if (x == "good") return "works"; 
```

成功了。此外，`return`它不是一个函数，它是一个 javascript 标记，因此不应与 . 一起使用括号`return`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T20:30:11.397

[`return`关键字](https://developer.mozilla.org/en/JavaScript/Reference/Statements/return)标记语句的开始。它不是一个表达式，您可以将其与[三元运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Conditional_Operator)一起使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-15T20:34:58.383

基于此javascript[语法](http://hepunx.rl.ac.uk/~adye/jsspec11/llr.htm)，三元运算符定义为：

```
OrExpression ? AssignmentExpression : AssignmentExpression 
```

而是`return`一个`statement`（好吧，无论如何的开始）。

无论如何，我认识的任何人都不会推荐像三元表达式这样的“富有表现力”（阅读：“我想变得聪明”）形式的控制流。if 语句是相同数量的字符：

```
 if(x==good) return x;
    (x==good)?(return x) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-15T20:40:21.167

因为[“几乎一切都是表达”](http://www.mail-archive.com/es-discuss@mozilla.org/msg11218.html)还没有进入语言。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-05-15T20:36:25.687

所有以“return”开头的答案都与我认为OP在他的三元操作中的意图不同。我猜OP想要

```
x == "good" ? return "works" : ""; 
```

意思是

```
if(x == "good") {
    return works;
}
else {
    ""; //does nothing because the statement ""; has no side effects
} 
```

它不这样做，因为格式是

```
statement1 ? statement2 : statement3; 
```

所有语句都可能有副作用，但三元运算符只考虑返回值（在语句 1 的情况下，只是它的真实性）。

即使 ? : 最好根据“if”和“then”来阅读，当考虑更接近语法级别时，应该将其视为考虑副作用和返回值的表达式。如果你理解了 x++ 和 ++x 之间的区别，你将能够理解三元运算符。

举例来说，这里有一些非法声明，出于同样的原因是非法的。

```
if( (return 5) == 5) {
     //...
}

if (loadUserStats(return userId)) == "FAILED") {
    throw error("oops");
}

x = return  y++; 
```

# php - cakephp应用程序的mysql中的十进制分隔符

> ID：10608379
> 
> 赞同：1
> 
> 时间：2012-05-15T20:26:27.430
> 
> 标签：php, mysql, cakephp

我有一个带有 MySQL 数据库的 CakePHP 1.3 网站。问题是我有一些价格，双值，使用点作为十进制分隔符存储，但是我的应用程序前端应该使用逗号显示它们。

有没有办法直接在数据库中设置它，或者只是比 str_replace EVERYWHERE 更好的方法来实现它？那会很麻烦，对我来说这似乎是不好的做法。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:29:01.853

数据库中的小数点是正确的——它是一个小数点被用作小数点。要*显示*它，您应该使用[number_format](http://php.net/manual/en/function.number-format.php)进行演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T20:30:23.770

从技术上讲，您可以在模型的 afterFind 处理程序中执行 n str_replace 并忘记它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T20:34:20.987

```
$decimalNumberFromDb= 1234.56;
//
// French notation
//
$frenchNotation = number_format($decimalNumberFromDb, 2, ',', ' '); // Output: 1 234,56
//
// English Notation
//
$englishNotation = number_format($decimalNumberFromDb, 2, '.', ''); // Output: 1234.56 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T21:58:30.357

数据库中的点不是分隔符，而是小数的存储方式。

你可以做一个这样的选择查询

```
select *, REPLACE(CAST(price AS CHAR), '.', ',') as price_formatted from products; 
```

或者用 PHP 用 number_format 以其他格式显示它

```
$price = 1300222.99;
echo "Original:     ".$price.PHP_EOL;
echo "english/us:   ".number_format($price,2).PHP_EOL;
echo "Dutch/german: ".number_format($price, 2, ',', '.').PHP_EOL;
echo "French:       ".number_format($price, 2, ',', ' ').PHP_EOL;
echo "Swiss:        ".number_format($price, 2, ',', '\'').PHP_EOL; 
```

例如[http://codepad.org/WXjc7d2D](http://codepad.org/WXjc7d2D)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T13:14:40.323

您可以使用为您执行此操作的行为： [https ://github.com/dereuromark/tools/blob/2.0/Model/Behavior/DecimalInputBehavior.php](https://github.com/dereuromark/tools/blob/2.0/Model/Behavior/DecimalInputBehavior.php)

# spring - 通过带有 Terracotta 的 ehcache 休眠二级缓存 - 根本不缓存？

> ID：10608380
> 
> 赞同：4
> 
> 时间：2012-05-15T20:26:27.573
> 
> 标签：spring, hibernate, ehcache, terracotta

我有这个 spring/hibernate 项目，我正在尝试通过 ehcache 和 terracotta 将二级缓存添加到休眠。一切似乎都很好，我什至可以在兵马俑控制台中看到我试图缓存的实体的条目。但是根据数据库中的统计数据和日志，根本没有缓存任何东西！

负载命中率为0%，负载统计也为0。我做错了什么？

这是我所做的，我通过 maven 添加了所需的 jars。

```
 <dependency>
                <groupId>net.sf.ehcache</groupId>
                <artifactId>ehcache-core</artifactId>
                <version>2.5.2</version>
        </dependency>
        <dependency>
                <groupId>net.sf.ehcache</groupId>
                <artifactId>ehcache-terracotta</artifactId>
                <version>2.5.2</version>
        </dependency>
        <dependency>
                <groupId>org.terracotta</groupId>
                <artifactId>terracotta-toolkit-1.5-runtime</artifactId>
                <version>4.2.0</version>
        </dependency> 
```

更改了我的休眠属性以启用二级缓存

```
<property name="hibernateProperties">
            <props>
                ...
                <prop key="hibernate.cache.use_second_level_cache">true</prop>
                <prop key="hibernate.cache.provider_class">net.sf.ehcache.hibernate.EhCacheProvider</prop>
                <prop key="hibernate.cache.region.factory_class">net.sf.ehcache.hibernate.EhCacheRegionFactory</prop>
                <prop key="hibernate.cache.use_query_cache">true</prop>
                <prop key="hibernate.cache.use_structured_entries">true</prop>
                <prop key="hibernate.cache.generate_statistics">true</prop>
            </props>
        </property> 
```

将 @Cache 注释添加到我的测试实体

```
@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)
public class User implements java.io.Serializable
 {
...
} 
```

这是我非常简单的 ehcache.xml （我还尝试为我的实体设置缓存条目，结果相同）

```
<?xml version="1.0" encoding="UTF-8"?>
<ehcache >    
    <defaultCache  
        maxElementsInMemory="10000"   
        eternal="false" 
        maxEntriesLocalHeap="10"         
        timeToIdleSeconds="120"         
        timeToLiveSeconds="120">        
        <terracotta/>    
    </defaultCache>        
    <terracottaConfig         
        url="localhost:9510"/>
</ehcache> 
```

在我启动我的兵马俑服务器并运行我的测试代码之后

```
@Test
    @Transactional
    @Rollback(false)
    public void testCache() {
        long start = System.currentTimeMillis();
        List<User> list = userRepository.listAll(0, 100);
        long end = System.currentTimeMillis();
        log.info("Total time "+(end-start));
        assertNotNull(list);
        assertThat(list.size(), is(100));

        for (int i=0; i<100; i++) {
            long start2 = System.currentTimeMillis();
            list = userRepository.listAll(0, 100);
            long end2 = System.currentTimeMillis();
            log.info("Total time 2 "+(end2-start2));
        }
        assertNotNull(list);
        assertThat(list.size(), is(100));
    } 
```

我的日志显示了 100 个不应该发生的 SQL。它还显示命中率为 0%。

这是我的测试运行时来自兵马俑控制台的一些屏幕截图。

为了让它工作，我需要的最后一块是什么？

![二级缓存统计](../Images/317e9080e9d142fe7b8c1ffbe7f8d065.png) ![ehcache 概述](../Images/718b7b47be9ee40d04b32b11891739f0.png) ![实体统计](../Images/ce7f9d21b0b33fd0d84288db0aa0d7e9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:58:48.113

找到了我正在试验的问题的解决方案，以下是详细信息：

*   由于休眠属性中的键错误，未设置统计信息

使用这个（注意没有**.cache。**）

```
<prop key="hibernate.generate_statistics">true</prop> 
```

代替

```
<prop key="hibernate.cache.generate_statistics">true</prop> 
```

*   查询没有被缓存，因为我没有将“.setCachable(true)”用于负责列出/加载实体的方法。

# microsoft-sync-framework - 如何使用智能手机同步 SQL 数据库以存储和转发更改？（源和目标之间没有直接连接）

> ID：10608381
> 
> 赞同：4
> 
> 时间：2012-05-15T20:26:31.090
> 
> 标签：microsoft-sync-framework, syncfx

我有一个场景，我偶尔连接的客户端（WPF 应用程序、SQL Express DB）需要与中央 SQL Server 同步。客户端机器在现场使用，并且通常没有任何类型的连接。该计划是使用智能手机作为中间存储和转发设备。客户端会将本地更改推送到手机。然后断开电话，关闭笔记本电脑的电源，然后开车上路。开车时，手机将进入连接状态并将更改上传到中央办公室。

我需要知道我是否可以使用 Sync Framework 做到这一点。

该文档似乎表明同步编排想要访问源和目标。在这种情况下，我没有连接到目的地（中央服务器）。我怀疑我需要找到一种方法来在本地缓存目的地的知识，但我不确定这是否合适。

值得注意的是，客户端计算机将定期进行直接连接，但不是每天。

所以场景是：

1.  客户端机器在星期一直接连接并进行完全同步。
2.  周二，用户外出并使用应用程序，对 SQL Express 数据库生成更新/插入/删除。
3.  用户将客户端计算机“同步”到他们的智能手机。（将文件保存到 SD 卡）
4.  用户关闭客户端并沿路行驶。
5.  智能手机进入连接并将文件上传到中央办公室。
6.  中央办公室将上传文件中的数据“同步”到中央 SQL Server 数据库。
7.  周三、周四、周五重复 2-6。
8.  在接下来的星期一，用户再次直接连接以进行完全同步。

如何使用 Sync Framework 执行此操作？

如果我可以让智能手机每天从中心办公室下载一些东西（比如中心办公室的知识），这有帮助吗？如果客户端正在针对来自中央办公室的陈旧缓存知识编排同步会话，是否会造成伤害？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T05:49:16.070

您不能使用 Sync Framework 或 Sync Framework Toolkit 开箱即用地执行此操作。数据库同步和文件同步是完全不同的。Sync Framework 使用提供者的概念来表示正在同步的存储库。例如，要处理文件，你有 FileSyncProvider，要使用 SQL Server/Express/Azure，你有 SqlSyncProvider 等等......但你不能使用 FileSyncProvider 与 SqlSyncProvider 同步......前者有效与文件，后者与数据库中的行。

与其让智能手机与本地机器同步，不如让本地机器和智能手机直接与中央服务器同步。

对于客户端计算机，您可以使用 Sync Framework SDK，并且最好使用 WCF 在 n 层设置中对其进行配置。

对于智能手机，您将不得不使用 Sync Framework Toolkit，因为您无法在手机上安装 Sync Framework SDK 本身。

这是使用 n 层设置的示例的链接：[Database Sync:SQL Server and SQL Express N-Tier with WCF](http://code.msdn.microsoft.com/Database-SyncSQL-Server-e97d1208)

这是 Sync Framework Toolkit 的链接：[Microsoft Sync Framework Toolkit](http://code.msdn.microsoft.com/Sync-Framework-Toolkit-4dc10f0e)

# objective-c - 当我调整窗口大小时，NSTableView 会自动重新加载 如何禁用它

> ID：10608389
> 
> 赞同：0
> 
> 时间：2012-05-15T20:26:55.813
> 
> 标签：objective-c, cocoa, nstableview

`NSTableView`当我调整窗口大小时自动重新加载并且我在重新加载表时计算一些东西，现在我遇到了问题，因为它是自动重新加载的。如何禁用它？我在下面找到了答案，但不起作用

```
[self.tbl setFocusRingType:NSFocusRingTypeNone]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:14:18.017

你不能。表视图没有用于表中值的内部存储。它使用数据源作为其存储。如果调整 table view 的大小需要绘制新的行或列，或者甚至重绘现有的行和列，它必须咨询数据源以获取执行此操作所需的信息。

您正在学习的是，在数据源方法中进行昂贵的计算是不合适的。从文档中`-tableView:objectValueForTableColumn:row:`：

> tableView:objectValueForTableColumn:row: 每次需要重新显示表格单元格时都会调用，所以**一定要高效**。

（强调补充。）

# javascript - Android Webviews 中的非本机滚动器性能

> ID：10608400
> 
> 赞同：1
> 
> 时间：2012-05-15T20:27:31.463
> 
> 标签：javascript, jquery, android, performance, android-webview

有没有人做过研究或对在 web 视图中运行的应用程序的 3rd 方滚动器有真正的经验？尤其是滚动的不止一个分界线？即带有导航面板和详细信息面板的网络视图。

当只有一个分区需要滚动条时，它可以顺利运行，但在上述情况下，它非常不稳定。相信很多开发者都遇到过这个问题。

我已经尝试过 iScroll（并且是迄今为止最好的）以及其他插件，但滚动的质量不太理想。我不能使用 iFrame，因为我需要调整从我们的服务器中提取的一些 HTML 文档的样式。我在网上搜索了一种在 HTML 中调用本机滚动条的方法，但还没有找到方法。有没有办法，我该怎么做？

我一直在各种设备上使用 API 的 9 到 15，但在非本机滚动器的性能方面我没有看到任何差异。如果这对您的回答有帮助，我目前正在 15 开发该应用程序。另外，我关闭了硬件加速，这效果最好。

我玩过 jqm、Sencha 等，他们看到的滚动条都令人满意。有谁知道他们用什么？我不主要使用这些平台的问题是体积和其他性能问题。

目前，我正在使用原始 javascript 构建一个应用程序，事实证明，这在 webview 布局中的所有动画性能方面都有显着提高 - 比任何大牌跨平台解决方案都要好得多。不幸的是，我没有足够的经验来构建自己的滚动条，所以我需要找到一个开箱即用的解决方案。

非常感谢任何想法、线索或解决方案，以便其他更擅长使用 javascript 编写应用程序的人可以有机会构建高质量的应用程序。

凭借您的经验和专业知识，请包括您使用的 API 级别。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T00:59:55.010

我对此做了很多测试。我不会推荐仅基于 HTML 的第三方滚动，因为根据我的经验，问题不在于 javascript，而在于 webview 本身：

1) WebView 上的 iframe 性能较弱弱弱。对于任何（复杂的）应用程序，仅将其放置在 iframe 中，我的性能就会下降近 40%。此外，如果您使用硬件加速，它们会导致更多问题。

2) 如果 div 中的内容简单且简短，则可以接受 DIVS 的滚动，但是当您添加更精细的内容进行滚动时，性能会降低。例如，在我的情况下，将所有内容都包含在 ul/li（较慢）或不包含（明显更快）中会有所不同。但是，感觉并不完美，也就是说，如果你习惯了原生滚动，你就会意识到这不是原生滚动。

3）身体的原始滚动非常好。此外，您会获得类似原生的反馈，例如过度滚动时的发光效果等。但请注意，此滚动不是使用 javascript，它只是一个比您让用户滚动的 webview 更大的页面，而 WebView 会处理它. 就我而言，这是我希望用户获得的唯一可接受的滚动体验。

所以我提出了一个混合解决方案：我做了一个 JavaScript 可调用的 Java 函数，它会打开另一个具有请求大小的 webview，就像它是一个 iframe 一样，所以我可以从 HTML 打开它并填充东西，这不是很难做到，而且改进很棒。

更多的东西：

4) 在我的情况下，从 Java (scrollTo) 滚动 WebView 非常有用，我加载了一个巨大的 HTML 页面（一种杂志）来滑动。如果我要求 webview 从 Java 滚动，性能比依靠 JavaScript 滚动要好得多。

5) 硬件加速将滚动速度提高了 100% -setLayerType(HARDWARE)- 但​​要能够使用它，你必须让你的 html 非常简单。诸如 Display:none/block 之类的东西完全破坏了应用程序（有关更多信息，请参阅[WebView 在触摸 Android 4.2.2 之前无法呈现）](https://stackoverflow.com/questions/15127762/webview-fails-to-render-until-touched-android-4-2-2/16472671#16472671)

6) 大图像上的 HTML5 动画完全扼杀了滚动体验。

7）这一切都在几个月内无效，goole正在将渲染引擎替换为“Blink”，所以谁知道会发生什么。我很不安。

# ruby-on-rails - 将周数转换为日期

> ID：10608402
> 
> 赞同：3
> 
> 时间：2012-05-15T20:27:38.307
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, datetime, time

> **可能重复：**
> [如何从周数中获取日期？](https://stackoverflow.com/questions/4389395/how-do-i-get-a-date-from-a-week-number)
> [查找给定周数的日期](https://stackoverflow.com/questions/9574926/finding-the-date-for-a-given-week-number)

我如何将周数 (%W) 转换回某个日期。例如，将第 20 周转换为 2012 年 5 月 15 日。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-15T20:38:32.737

检查[日期#商业](http://ruby-doc.org/stdlib-2.3.1/libdoc/date/rdoc/Date.html#method-c-commercial)：

```
Date.commercial(2012, 20)
#=> Mon, 14 May 2012 
```

# jquery - jquery ajax表单提交问题 - 表单数据已提交但返回错误不成功

> ID：10608408
> 
> 赞同：0
> 
> 时间：2012-05-15T20:28:00.877
> 
> 标签：jquery, jquery-validate

**更新**

*来自提琴手 2：*

我可以看到发送的数据。它们也出现在其他站点的数据库中。

来自其他域/服务器的响应似乎不正确：

```
Response sent 38 bytes of Cookie data:
Set-Cookie: ARPT=YOLMQLS172.25.102.96CKMYK; path=/

This response did not contain a P3P Header. 
```

即使标头响应不正确，继续此实现是否安全？

我正在使用[jquery validate 插件](http://docs.jquery.com/Plugins/Validation)来验证我的表单，然后使用 jquery ajax 将表单数据发布到外部网站（[Marketo](http://www.marketo.com/)潜在客户生成平台）。

表单数据成功提交到外部站点（Marketo）。我通过登录他们的网站验证了这一点，我可以看到我提交的包含所有字段数据的测试表单帖子。

但是，**我收到一个错误，而不是来自 ajax 调用的成功响应**。

这是代码 - 有什么想法吗？

```
$(feedbackForm).validate(
{
    validClass: "success",
    rules: 
    {
        FirstName: { required: true },
        LastName:  { required: true },
        Email:
        {
            required: true,
            email: true                                 
        },
        Question__c: { required: true }
    },
    messages:
    {
        FirstName: "Please enter your first name",
        LastName: "Please enter your last name",
        Email: "Please enter a valid email address",
        Question__c: "Please enter your message"
    },       
    submitHandler: function(form) 
    {            
        $.ajax(
        {
            type:"POST", 
            url: "http://app-k.marketo.com/index.php/leadCapture/save",                
            data: feedbackForm.serialize(),
            success: function(response)
            {
                feedbackForm.find('.form_result').html(response.statusText);
                alert('success');
            },
            error: function(response)
            {
                feedbackForm.find('.form_result').html(response.statusText);                       
                alert("error");
            }
        });  
        return false;          
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T20:30:29.870

您似乎正在向不在您自己域中的 url 发出 ajax 请求，这通常由于跨域访问限制而受到限制。

如果它实际上不在您的域中，您需要通过服务器端语言向该服务器发出请求。ajax 调用将指向依次进行其他调用的代码。

但是，如果他们允许从外部域公开访问该 URL，那么我所说的就无关紧要了。

# c - 如何在linux上编写命令

> ID：10608410
> 
> 赞同：1
> 
> 时间：2012-05-15T20:28:14.397
> 
> 标签：c, linux, operating-system

我必须实现一个名为 DCMD 的 linux 命令，它具有以下功能： 它必须在输入中指定的某个日期和时间执行另一个默认的 linux 命令。

简而言之，我应该这样写：`dcmd "command" "date and time"`.

好吧，问题不在于日期或时间，实际上我可以正确管理它，如果它正在展望未来，如果日、月和年是正确的等等。..还有我想我已经弄清楚的命令处理它：我使用了系统调用“execlp”并且它运行正常。

好吧，此时我不知道如何合并命令和数据，即在指示的时间运行以下命令。

有人可以向我解释该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T20:45:02.033

在 linux 上，使用`cron`或`at`来安排作业以供以后运行。

**cron**：使用您的特定日期指定一个 cron 作业。将您的命令格式化为`minute hour day month ? year command`并将其添加到您的 crontab 文件中。`cron`然后将只运行一次您的工作。用于`crontab`处理您的 crontab 文件。[crontab 的手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?crontab)

**at 命令**：语法：`at [-V] [-q queue] [-f file] [-mldbv] TIME` 在标准输入上运行脚本 at `TIME`。或者，在带有`-f`标志的文件中运行脚本。[at 的手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?at)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T16:02:52.083

**附加信息**：这是一个操作系统作业，我必须在其中重新实现“at”或“crontab”的一些功能。

我找到了解决这个问题的方法。

首先我应该调用“fork”，然后在子进程中我应该调用“execlp”，而父进程继续。

如果我想延迟命令，我会在子进程中调用一个“睡眠”（我前几天向教授询问了这一点，他说可以）。

但我有一个问题：这是一种有效的方法吗？这种方法会创建僵尸进程吗？

# c++ - 在 C++ 中使用宏生成函数

> ID：10608416
> 
> 赞同：2
> 
> 时间：2012-05-15T20:28:53.227
> 
> 标签：c++, function, templates, macros

我有以下宏，旨在在当前范围或命名空间中生成函数：

```
#define MAKE_FUNC(FNAME) \
template <typename T> \
T ##FNAME## (const T& t) \
{\
   return t; \
}

MAKE_FUNC(foo)
MAKE_FUNC(boo)

int main()
{
   foo(1);
   boo(2);
} 
```

以下是编译上述代码时的错误信息：

```
prog.cpp:8:1: error: pasting "Tfoo" and "(" does not give a valid preprocessing token
prog.cpp:9:1: error: pasting "Tboo" and "(" does not give a valid preprocessing token
prog.cpp:8: error: ISO C++ forbids declaration of ‘Tfoo’ with no type
prog.cpp:9: error: ISO C++ forbids declaration of ‘Tboo’ with no type
prog.cpp: In function ‘int main()’:
prog.cpp:13: error: ‘foo’ was not declared in this scope
prog.cpp:14: error: ‘boo’ was not declared in this scope 
```

[http://ideone.com/paiu1](http://ideone.com/paiu1)

似乎连接失败了，这个问题还有吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T20:30:39.063

你要

```
T FNAME (const T& t) \ 
```

`##`连接，你不想连接。

# objective-c - 使用 Facebook iOS 登记入住时未上传照片

> ID：10608420
> 
> 赞同：0
> 
> 时间：2012-05-15T20:29:24.100
> 
> 标签：objective-c, ios, facebook-graph-api, uiimagepickercontroller, facebook-ios-sdk

因此，我正在创建一个 iPhone 应用程序，当用户使用 Facebook Graph API 签入某个位置时，该应用程序需要能够上传照片。

现在我的代码是这样的：

```
if (![delegate.facebook isSessionValid])
    [delegate.facebook authorize:[NSArray arrayWithObjects:@"publish_stream", @"offline_access", @"publish_checkins", nil]];

parameters = [NSMutableDictionary dictionaryWithObjectsAndKeys:[placeDictionary objectForKey:@"id"] , @"place",
              serialisedCoordinates, @"coordinates",
              message, @"message",
              pickedImage, @"picture",
              @"Via the official REDACTED app", @"application", nil];

[delegate.facebook requestWithGraphPath:@"me/checkins" andParams:parameters andHttpMethod:@"POST" andDelegate:fbCheckInResultHandler]; 
```

其中“pickedImage”是从 UIImagePickerController 返回的 UIImage。

即使我选择了一张图片（即，pickedImage != nil），签入时也不会上传任何图片。签入显示在 Facebook 上，带有消息、坐标和应用程序信息，只是没有图像。

真的希望有人能帮忙。

干杯，基兰

这是进行签入时调用的整个函数：

```
-(void)fbPostCheckInWithMessage:(NSString *)message andFriends:(NSArray *)friends {

if (![delegate.facebook isSessionValid]) {
    NSLog(@"Session invalid");
    [delegate.facebook authorize:[NSArray arrayWithObjects:@"publish_stream", @"offline_access", @"publish_checkins", nil]];
} else {
    NSLog(@"Session valid");
}

NSMutableString *friendsIDString;
friendsIDString = [NSMutableString stringWithFormat:@"%@", [[friends objectAtIndex:0] userID]];

if ([friends count] > 1) {
    for (User *f in taggedFriends) {
        if (f != [taggedFriends objectAtIndex:0]) {
            [friendsIDString appendString:[NSString stringWithFormat:@", %@", f.userID]];
        }
    }
}

NSLog(@"Tagged Friends: %@", friendsIDString);
SBJSON *jsonWriter = [SBJSON new];

NSMutableDictionary *locationDictionary = [NSMutableDictionary dictionaryWithObjectsAndKeys:[NSString stringWithFormat:@"%f", userLocation.coordinate.latitude], @"latitude",
                                           [NSString stringWithFormat:@"%f", userLocation.coordinate.longitude], @"longitude", nil];

NSString *serialisedCoordinates = [jsonWriter stringWithObject:locationDictionary];

NSData *pictureData = UIImagePNGRepresentation(pickedImage);
NSLog(@"picture: %@", pictureData);

NSMutableDictionary *parameters = [NSMutableDictionary dictionaryWithObjectsAndKeys:[placeDictionary objectForKey:@"id"] , @"place",
                      serialisedCoordinates, @"coordinates",
                      pictureData, @"message",
                      pickedImage, @"picture",
                      @"Via the official REDACTED app", @"application", nil];

[delegate.facebook requestWithGraphPath:@"me/checkins" andParams:parameters andHttpMethod:@"POST" andDelegate:fbCheckInResultHandler];
} 
```

我正在使用friendsIDString 来获取用户的朋友的ID。我已从此处的示例中删除了此功能，因为它已全部被注释掉，因为我试图找出导致问题的原因（即照片标记）。只是想澄清一下。

--UPDATE-- 这是我设置pickImage的方式。我使用 UIImagePickerController 中的委托方法：

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image editingInfo:(NSDictionary *)editingInfo {
    NSLog(@"Picked image");
    pickedImage = [[UIImage alloc] init];
    pickedImage = image;
   [imagePickerController dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:42:51.827

您可以使用 UIImagePNGRepresentation、UIImageJPEGRepresentation 等根据图像类型或 UIImage 类中的 imagewithdata 将照片上传到 Facebook。

```
NSData *yourImageData= UIImagePNGRepresentation(yourImage); 
```

初始化字典：-

```
NSMutableDictionary *mutableDictWithParam= [NSMutableDictionary dictionaryWithObjectsAndKeys:@"Your text", @"message", yourImageWithData, @"theSource", nil]; 
```

最后发帖：-

```
[facebook requestWithGraphPath:@"/me/photos" andParams:mutableDictWithParam andHttpMethod:@"POST" andDelegate:self]; 
```

在您的应用程序中，我认为您尚未初始化 NSData 对象（pickedimage）..否则一切似乎都很好。

根据我们的讨论，您可以使用它来压缩图像：-

```
NSData* UIImageJPEGRepresentation(UIImage *image, CGFloat compressionQuality);
NSData *compressedImage = UIImagePNGRepresentation(yourIMage, .5)//quality is ensured through second argument lies between o and 1 
```

# php - 如何修改现有 XFA PDF 中的特定字符？

> ID：10608425
> 
> 赞同：1
> 
> 时间：2012-05-15T20:29:35.267
> 
> 标签：php, pdf, tcpdf, xfa

我被困在一个疯狂的项目上，让我寻找一个奇怪的解决方案。我有一个外部方生成的 XFA PDF 文档。PDF上有几个复选标记字符'✓'，我需要简单地更改为'X'。这个原因是我无法控制的。我只是在寻找一种将 ✓ 更改为 X 的方法。谁能指出我正确的方向？可能吗？

目前我们使用 PHP 和 TCPDF 来创建“我们的”服务器 PDF，但是这个特定的 PDF 是由不想改变他们做事方式的第三方在我的控制之外生成的。更糟糕的是，我不知道复选标记可能存在多少或在哪里。这只是一个需要改变的非常具体的角色。有谁知道破解文档以更改字符的方法？

字符 2713

[http://www.fileformat.info/info/unicode/char/2713/index.htm](http://www.fileformat.info/info/unicode/char/2713/index.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T21:57:41.503

是的，我认为你可以。根据我对 PDF 格式的（相当有限的）知识，您只能*可靠地*搜索和替换长度为一个字符的字符串，因为它们是通过以任意顺序将可变长度的字符串放置在特定坐标处来创建的。因此，字符串“hello”可以是一个由五个字母组成的字符串，或五个由一个字母组成的字符串，或者它们的某种组合，所有这些都放置在正确的位置（并且以打印驱动程序决定的任何顺序）。

恐怕我不知道有任何图书馆会这样做，但如果它们不存在，我会感到惊讶。您需要读入 PDF 对象，进行替换，然后将它们写入新文件。我会开始围绕[这个问题](https://stackoverflow.com/questions/1251956/is-there-a-pdf-parser-for-php)的答案进行研究。

编辑：[这](http://www.php.net/manual/en/intro.pdf.php)看起来可能有用。

# php - 仅在循环中显示html文本一次php

> ID：10608428
> 
> 赞同：-3
> 
> 时间：2012-05-15T20:29:55.847
> 
> 标签：php, html, loops, if-statement, html-table

我在这件事上遇到了困难，我有 2 列名称为 URL 和状态，我必须循环将数据发布到这个 html 表中，我面临的问题是列标题不断循环，但我只想要一次......这是我的代码

```
 <?php
    if (preg_match("/found/", $html))
        {

    echo '<table id="table-2">
<thead>
<tr>
<th>URL</th>
<th>Status</th>
</tr>
</thead>
<tbody>
<tr>
<td>'.$get_sites_link.'</td>
<td>Keyword Found</td>

</tr></tbody>
</table>';
    $vul_url[] = $get_sites_link1; 
    $links_duplicate_removed = array_unique($vul_url);
    file_put_contents($save_file, implode(PHP_EOL, $links_duplicate_removed));
    }
    else 
    {
    echo '<table id="table-2">
<thead>
<tr>
<th>URL</th>
<th>Status</th>
</tr>
</thead>
<tbody>
<tr>
<td>'.$get_sites_link1.'</td>
<td>Keyword Not Found</td>

</tr></tbody>
</table>'."</b>"."</br>";

    }
    }

    ?> 
```

任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T20:39:41.960

好吧，您可能应该将表开头和标题排除在循环之外。类似于以下内容：

```
echo "This is the only time this line will be shown.\n";
for ($i = 0; $i < 5; $i++) {
    echo "This line was shown $i times!\n";
} 
```

[http://codepad.viper-7.com/Tis4wU](http://codepad.viper-7.com/Tis4wU)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T21:20:31.607

要多次显示一个东西，你需要迭代它，创建一个循环：

*   为了

*   前锋

*   尽管

*   做...同时

    `for($i=0; $i <=100; $i++){ echo "It's the $i time that I show it"; end`

# c# - 调用控件事件处理程序

> ID：10608441
> 
> 赞同：0
> 
> 时间：2012-05-15T20:30:48.197
> 
> 标签：c#, .net, datagrid, event-handling, eventargs

我决定尝试第三方的 DataGridView 实现，特别是为了利用分层网格，即“网格中的网格”功能。虽然这工作得相当好，但我注意到我在正常 DataGridViews 中依赖的一些事件和属性在此实现中不存在，并且必须发现不同的方法来实现相同的目标。

一个这样的目标是，当我使用 CheckBoxColumn 并且用户“选中”或“取消选中”该框时，我需要将该更改推送到网格（以及随后的数据库），否则用户会有点击进入或离开单元格焦点以实际提交更改....有点不稳定。为了解决这个问题，我利用了“CurrentCellDirtyStateChanged”事件，并手动将检查或取消检查提交给网格，这反过来又触发了我的“CellValueChanged”事件：

```
void dataGridView_CurrentCellDirtyStateChanged(object  sender, EventArgs  e)
{       
     if ((dataGridView.IsCurrentCellDirty) & (dataGridView.CurrentCell.ColumnIndex == 0))
     {
          dataGridView.CommitEdit(DataGridViewDataErrorContexts.Commit);
     }
} 
```

但是，第三方网格不存在此事件，CommitEdit 方法也不存在。为了实现相同的功能，我最终不得不这样做：

```
void GridView_ValueChanged(object sender, EventArgs  e) 
{ 

     if(sender.GetType().ToString().Contains("RadCheckBoxEditor"))
     {       
        RadCheckBoxEditor rad_chb = (RadCheckBoxEditor)sender;
        GridCheckBoxCellElement checked_a_box = (GridCheckBoxCellElement)rad_chb.OwnerElement;

        checked_a_box.Value = rad_chb.Value;

        GridViewCellEventArgs new_args = new GridViewCellEventArgs(checked_a_box.RowInfo, checked_a_box.ColumnInfo, checked_a_box.Editor);

        GridView_CellValueChanged(checked_a_box, new_args);

     }
     else
     {
         return;
     }

} 
```

我基本上捕获了脏值，将其分配给“CellValueChanged”处理程序可识别的类型的值，定义了我自己的事件参数，并显式调用了句柄。像这样的东西有任何潜在的气味吗？就是感觉不对。我注意到其他人建议创建一个独立的函数来访问共享代码，但是，这些示例似乎并不依赖于推送事件的特定事件。

# mysql - MySQL - 'where 子句'中的未知列'article.mycount'

> ID：10608443
> 
> 赞同：0
> 
> 时间：2012-05-15T20:30:55.033
> 
> 标签：mysql

大家好，我不知道......为什么这个查询不起作用：

```
 SELECT article.topic, article.ID, 
      (
      SELECT COUNT(*) FROM comment
      WHERE article.ID_art = comment.foreign_ID_art
      GROUP BY foreign_ID_art
      ) 
      AS mycount

      FROM article
      WHERE article.mycount = '0' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:40:54.173

`mycount`不是表格的一列`article`。正确的写法是：

```
 SELECT article.topic,
        article.ID   ,
        ( SELECT  COUNT(*)
        FROM     COMMENT
        WHERE    article.ID_art = comment.foreign_ID_art
        GROUP BY foreign_ID_art
        )
        AS mycount
 FROM  article HAVING mycount = 0 
```

实现相同结果的另一种方法，但以一种更有效的方式（假设存在适当的索引）：

```
SELECT article.topic,
       article.ID
FROM   article
       LEFT JOIN COMMENT
       ON     article.ID_art = comment.foreign_ID_art
WHERE  comment.foreign_ID_art IS NULL 
```

最终，最好将每篇文章的评论计数`article`作为列存储在表中，`comment_count`并在添加新评论时增加它。那么查询可以简化为：

```
SELECT article.topic,
       article.ID
FROM   article
WHERE  article.comment_count = 0 
```

使用索引`comment_count`将非常有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T20:42:56.533

```
SELECT article.topic, article.ID, 
  (
  SELECT COUNT(*) FROM comment
  WHERE article.ID_art = comment.foreign_ID_art
  GROUP BY foreign_ID_art
  ) 
  AS mycount

FROM article
HAVING mycount = '0' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T20:37:59.887

您不能在 where 子句中使用列别名。也许你可以做类似的事情

```
select *
(SELECT article.topic, article.ID,        
(       
SELECT COUNT(*) FROM comment       
WHERE article.ID_art = comment.foreign_ID_art       
GROUP BY foreign_ID_art       
)        
AS mycount        
FROM article) mytab       
from myab 
WHERE mytab.mycount = 0 
```

# libcurl - 使用 nss 支持构建 libcurl

> ID：10608445
> 
> 赞同：3
> 
> 时间：2012-05-15T20:31:04.330
> 
> 标签：libcurl, nss

我构建了 nss 的 64 位版本，并尝试使用 --without-ssl 和 --with-nss=NSS_ROOT 选项使用它来构建 curl 库。

在配置阶段，我看到以下内容：

```
checking for PK11_CreateGenericObject in -lnss3... no
checking for NSS_Initialize in -lnss3... no
checking for ssl_version in -laxtls... no
configure: WARNING: SSL disabled, you will not be able to use HTTPS, FTPS, NTLM and more.
configure: WARNING: Use --with-ssl, --with-gnutls, --with-polarssl, --with-cyassl, --with-nss or --with-axtls to address this. 
```

最后 libcurl 是在没有 https 支持的情况下构建的。

```
 curl version:     7.25.0
  Host setup:       x86_64-unknown-linux-gnu
  Install prefix:   /usr/local
  Compiler:         gcc
  SSL support:      no      (--with-{ssl,gnutls,nss,polarssl,cyassl,axtls} )
  SSH support:      no      (--with-libssh2)
  zlib support:     enabled
  krb4 support:     no      (--with-krb4*)
  GSSAPI support:   no      (--with-gssapi)
  SPNEGO support:   no      (--with-spnego)
  TLS-SRP support:  no      (--enable-tls-srp)
  resolver:         default (--enable-ares / --enable-threaded-resolver)
  ipv6 support:     no      (--enable-ipv6)
  IDN support:      no      (--with-libidn)
  Build libcurl:    Shared=yes, Static=yes
  Built-in manual:  enabled
  --libcurl option: enabled (--disable-libcurl-option)
  Verbose errors:   enabled (--disable-verbose)
  SSPI support:     no      (--enable-sspi)
  ca cert bundle:   no
  ca cert path:     no
  LDAP support:     enabled (OpenLDAP)
  LDAPS support:    enabled
  RTSP support:     enabled
  RTMP support:     no      (--with-librtmp)
  Protocols:        DICT FILE FTP GOPHER HTTP IMAP LDAP LDAPS POP3 RTSP SMTP TELNET TFTP 
```

有人可以告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T18:00:25.050

必须将 LD_LIBRARY_PATH 设置为

```
nss-3.12.6/mozilla/dist/Linux2.6_x86_64_glibc_PTH_64_DBG.OBJ/lib 
```

让它工作。

谢谢，拉吉

# html - Internet Explorer 中的负边距

> ID：10608448
> 
> 赞同：2
> 
> 时间：2012-05-15T20:31:08.083
> 
> 标签：html, css, internet-explorer, margin

我正在处理的网站有一个相当奇怪的问题。它涉及一个“带状”导航，每端都有一个折叠角包裹在容器后面。在左侧，功能区角上的负边距工作得很好。然而，在右侧，功能区绝对拒绝超出 IE 的包装器。我可以使用负数`margin`高达`-18px`，但它必须是`-38px`。如果我将它设置为`-1000px`它仍然表现得好像它在`-18px`. 这发生在 IE7、IE8 和 IE9 中。我不知道问题是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:05:59.197

我只在 IE7 中看到这个问题。

我将包装`<ul id="nav">`成 a `<div>`，将其设置为`position: relative; padding-bottom: 20px`并将色带角分别绝对定位到`bottom:0; left:0`和`right:0`。

# c# - 将外部库的 .chm 文档文件添加到 MonoDevelop 项目？

> ID：10608451
> 
> 赞同：0
> 
> 时间：2012-05-15T20:31:39.003
> 
> 标签：c#, monodevelop

我正在尝试在使用[MonoDevelop](http://monodevelop.com/)作为 IDE（在 Windows 7 上）的 C# 项目中使用[SFML 1.6 。](http://www.sfml-dev.org/)我正在[下载页面](http://www.sfml-dev.org/download.php)的“SFML.Net full SDK”部分中使用 Windows 下载。此链接可让您下载 ZIP 存档，解压缩后会生成一个包含文件“SFML-1.6\dotnet\doc\SFML.Net.chm”的目录。

有没有办法告诉 MonoDevelop 使用这个文件在自动完成中提供类和方法文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T00:30:18.147

不，chm（已编译的 HTML）文件不是代码完成引擎的可用文档形式。您需要 xml 版本作为 C# 编译器的输出。

# xcode - 滚动视图滚动总是回到顶部

> ID：10608457
> 
> 赞同：0
> 
> 时间：2012-05-15T20:32:15.367
> 
> 标签：xcode

我有一个滚动视图，里面装满了从 json 文件加载的对象。每 3 秒重新加载一次数据，实际上并没有什么变化（除非用户添加了新数据）。重新加载非常快，但滚动视图会滚动回顶部。我希望它保持在原来的位置。我怎样才能做到这一点？

我使用此代码删除所有重新加载的内容：

```
[scrollView.subviews makeObjectsPerformSelector:@selector(removeFromSuperview)]; 
```

然后我重新填充滚动视图。重新加载时，scroll view vil的frame恢复到初始值，只有对象的添加才会使其展开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T02:19:08.123

这是假设您正在使用从 JSON 文件接收的每个对象设置 UIScrollView 的 contentSize：

当再次从 JSON 文件加载第一个对象时，它将 contentSize 设置得很低，因此滚动到顶部。

在添加所有对象之前，您真的不想从 UIScrollView 中删除所有内容。相反，您应该缓存其中的对象，并且仅在发生更改时才这样做。即使有更改，我也会考虑可能只是附加更改而不是删除和重新添加对象。

# java - java.lang.NoClassDefFoundError: org/htmlparser/util/ParserException

> ID：10608463
> 
> 赞同：0
> 
> 时间：2012-05-15T20:32:37.623
> 
> 标签：java, eclipse, classpath, buildpath, html-parser

我试图让这个[http://htmlparser.sourceforge.net/](http://htmlparser.sourceforge.net/)代码在 Eclipse 中运行。有简单的说明“要使用该库，您需要在编译和运行时将 htmllexer.jar 或 htmlparser.jar 添加到您的类路径中。”

我已将 htmllexer.jar 和 htmlparser.jar 添加到我的构建路径中，并且一切都可以正常编译。但是在运行时 eclipse 似乎找不到那些 jar 文件。我不确定如何将这些 jar 文件添加到运行时类路径中......

我的日食看起来像这样： ![在此处输入图像描述](../Images/315b6fc95744680630b4d3e477b5b0ab.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T20:47:29.307

对于 Web 项目，您必须将这些库直接放在`/WEB-INF/lib`项目的文件夹中。此文件夹参与 webapp 的默认运行时类路径。在 Eclipse 中，您不需要以这种方式摆弄构建路径属性，Eclipse 将完成所有必要的魔法。不要忘记撤消之前所做的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T20:43:44.420

如果我理解得很好，您正在创建一个 Web 应用程序。在这种情况下，您必须正确配置`Deployment assembly`项目属性的部分。

# apache - 虚拟主机不遵守 ServerName 属性

> ID：10608469
> 
> 赞同：0
> 
> 时间：2012-05-15T20:33:06.917
> 
> 标签：apache, apache2, vhosts

我有一个奇怪的问题，当我使用 SSL 设置虚拟主机时，它们没有受到限制。除了虚拟主机不仅限于名称这一事实之外，一切都按预期工作。例如，如果我浏览到[https://qa.example.com/](https://qa.example.com/)，我会看到正确的页面。但是，如果我浏览到[https://foo.example.com/](https://foo.example.com/)，我会看到相同的页面！[我已经在http://httpd.apache.org/docs/2.2/vhosts/name-based.html](http://httpd.apache.org/docs/2.2/vhosts/name-based.html)阅读了基于命名的配置，所以我很茫然。

这是我的`/etc/apache2/sites-enabled/mysite-ssl`文件（我使用的是 Ubuntu 12.04）：

```
<IfModule mod_ssl.c>
<VirtualHost *:443>
    <IfModule dir_module>
            DirectoryIndex login.html
    </IfModule>
    ServerAdmin admin@example.com
    ServerName qa.example.com
    DocumentRoot /var/www/example

    <Directory />
            Options Indexes FollowSymLinks MultiViews
            AllowOverride None
            Order allow,deny
            allow from all
    </Directory>

    JkMount /axonify/* worker1

    ErrorLog ${APACHE_LOG_DIR}/error.log
    LogLevel warn
    CustomLog ${APACHE_LOG_DIR}/ssl_access.log combined

    SSLEngine on
    SSLCertificateFile "/etc/ssl/certs/star.example.com.crt"
    SSLCertificateKeyFile "/etc/ssl/private/star.example.com.key"
    BrowserMatch "MSIE [2-6]" \
            nokeepalive ssl-unclean-shutdown \
            downgrade-1.0 force-response-1.0
    # MSIE 7 and newer should be able to use keepalive
    BrowserMatch "MSIE [17-9]" ssl-unclean-shutdown
</VirtualHost>
</IfModule> 
```

我的`/etc/apache2/ports.conf`文件是我定义`NameVirtualHost`条目的地方：

```
NameVirtualHost *:80
Listen 80

<IfModule mod_ssl.c>
    NameVirtualHost *:443
    Listen 443
</IfModule>

<IfModule mod_gnutls.c>
    NameVirtualHost *:443
    Listen 443
</IfModule> 
```

现在我的`/etc/apache2/sites-enabled/000-default`文件也很简单：

```
<VirtualHost *:80>
    ServerAdmin admin@example.com
    RewriteEngine on
    ReWriteCond %{SERVER_PORT} !^443$
    RewriteRule ^/(.*) https://%{HTTP_HOST}/$1 [NC,R,L]
</VirtualHost> 
```

我没有`default-ssl`部署站点，我只部署了一个启用 SSL 的站点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:59:53.850

我已经解决了这个问题。似乎我需要 default-ssl 文件，该文件指定`<VirtualHost _default_:443>`充当任何不匹配虚拟主机的后备的条目。

# ios - iOS 5 的 Twitter API 时间线信息

> ID：10608471
> 
> 赞同：1
> 
> 时间：2012-05-15T20:33:09.453
> 
> 标签：ios, api, uitableview, ios5, twitter

现在我正在为 iOS 5 制作一个 twitter 应用程序，我需要`TWRequest`课堂上的帮助。我无法在网络上的任何地方弄清楚如何获取用户时间线并将其放在表格视图中。所有的教程和其他网站都只展示了如何在 Twitter 上发布内容。如何向 twitter 发出经过验证的请求，然后将该时间线放在 tableview 中？任何帮助将不胜感激。

谢谢，维林德博拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T00:44:29.207

[https://dev.twitter.com/docs/ios/making-api-requests-twrequest](https://dev.twitter.com/docs/ios/making-api-requests-twrequest)的第二个示例显示了如何为用户的时间线发出经过身份验证的请求。结果被解析成一个标准的 NSArray，它应该很容易使用并放入 UITableView。

# c# - 如何从网站下载 .cs 文件？

> ID：10608476
> 
> 赞同：-1
> 
> 时间：2012-05-15T20:33:19.610
> 
> 标签：c#

我有这两个功能。现在他们将从网站下载特定图像并将其保存在 url 变量中。

但现在我想更改 GetAllImages() 函数内容并使用 csFiles 字符串网站从该网站获取所有 .cs 文件并将它们保存到硬盘。所以我需要更改 GetAllImages 函数并修改 DownloadImage 函数以下载 *.cs 文件而不是图像。

我该怎么做 ？

```
public void GetAllImages()
        {

            // Bing Image Result for Cat, First Page
            string url = "http://www.bing.com/images/search?q=cat&go=&form=QB&qs=n";
            string csFiles = "http://open-hardware-monitor.googlecode.com/svn/trunk/Hardware/";

            // For speed of dev, I use a WebClient
            WebClient client = new WebClient();
            string html = client.DownloadString(url);

            // Load the Html into the agility pack
            HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
            doc.LoadHtml(html);

            // Now, using LINQ to get all Images
            /*List<HtmlNode> imageNodes = null;
            imageNodes = (from HtmlNode node in doc.DocumentNode.SelectNodes("//img")
                          where node.Name == "img"
                          && node.Attributes["class"] != null
                          && node.Attributes["class"].Value.StartsWith("sg_t")
                          select node).ToList();*/

           var imageLinks = doc.DocumentNode.Descendants("img")
    .Where(n => n.Attributes["class"].Value == "sg_t")
    .Select(n => HttpUtility.ParseQueryString(n.Attributes["src"].Value)["amp;url"]).ToList();

            foreach (string node in imageLinks)
            {
                y++;
                //Console.WriteLine(node.Attributes["src"].Value);
                richTextBox1.Text += node + Environment.NewLine;
                Image t = DownloadImage(node);
                t.Save(@"d:\test\" + y.ToString("D6" + ".jpg"));

            }

        }

        public Image DownloadImage(string _URL)
        {
            Image _tmpImage = null;

            try
            {
                // Open a connection
                System.Net.HttpWebRequest _HttpWebRequest = (System.Net.HttpWebRequest)System.Net.HttpWebRequest.Create(_URL);

                _HttpWebRequest.AllowWriteStreamBuffering = true;

                // You can also specify additional header values like the user agent or the referer: (Optional)
                //_HttpWebRequest.UserAgent = "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)";
                //_HttpWebRequest.Referer = "http://www.google.com/";

                // set timeout for 20 seconds (Optional)
                _HttpWebRequest.Timeout = 60000;

                // Request response:
                System.Net.WebResponse _WebResponse = _HttpWebRequest.GetResponse();

                // Open data stream:
                System.IO.Stream _WebStream = _WebResponse.GetResponseStream();

                // convert webstream to image
                _tmpImage = Image.FromStream(_WebStream);

                // Cleanup
                _WebResponse.Close();
                _WebResponse.Close();
            }
            catch (Exception _Exception)
            {
                // Error
                Console.WriteLine("Exception caught in process: {0}", _Exception.ToString());
                return null;
            }

            return _tmpImage;
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T20:36:36.197

您从 Subversion 存储库中下载该项目的方法非常愚蠢。项目页面上提供了有关如何正确执行此操作的说明：

[https://code.google.com/p/open-hardware-monitor/source/checkout](https://code.google.com/p/open-hardware-monitor/source/checkout)

或者，您可能只想获取其中一个打包下载：

[https://code.google.com/p/open-hardware-monitor/downloads/list](https://code.google.com/p/open-hardware-monitor/downloads/list)

# c++ - 在 Qt Creator 中编译 Visual Studio 2010 项目？

> ID：10608477
> 
> 赞同：2
> 
> 时间：2012-05-15T20:33:20.780
> 
> 标签：c++, visual-studio-2010, qt, qt-creator

我正在寻找是否可以在 Qt Creator 中编译和集成 Visual Studio 项目的可能答案或方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T00:56:54.983

不，但是您可以从您的项目（.h 和 .cpp）中获取所有文件并将它们添加到 qt 项目中，它们应该可以编译，请记住，无论开发人员如何，您都将在 Windows 上使用相同的编译器环境

# indexing - 获取 Neo4j 索引的所有键

> ID：10608479
> 
> 赞同：4
> 
> 时间：2012-05-15T20:33:33.993
> 
> 标签：indexing, neo4j, lucene

我有一个[Neo4j](http://neo4j.org/)数据库，其内容是从一个大数据集动态生成的。

所有“入口点”节点都在一个[命名索引](http://docs.neo4j.org/chunked/1.6.2/indexing-create.html)( `IndexManager.forNodes(…)`) 上进行索引。因此，我可以查找特定的“入口点”节点。

但是，我现在想枚举所有这些特定节点，但*我不知道它们在哪个键上被索引*。

有没有办法枚举 Neo4j[索引](http://api.neo4j.org/1.6/org/neo4j/graphdb/index/Index.html)的所有键？

如果不是，那么存储这些键的最佳方式是什么，一种非常不面向图的数据类型？

* * *

**更新**（感谢询问详细信息:)）：列表将超过 200 万个条目。主要用例是在初始化步骤之后永远不要更新它，但其他用例可能需要它，因此它必须具有一定的可扩展性。

此外，我真的更希望避免杀死我当前的弹性能力，因此一次存储所有密钥，而不是增量添加它们，将是最后的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T00:11:07.477

我会使用不同的数据存储来补充 Neo4j（我喜欢 Redis），或者尝试 @MattiasPersson 的建议并将列表存储在节点上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T21:04:23.043

而不是使用增加复杂性的不同存储，您可以再试一次

1.  Lucene 索引。通常 lucene 能够轻松处理这个问题，尤其是现在 MatchAllDocsQuery 更好。但一个问题是neo4j 人使用的是非常旧的lucene 版本。

2.  每个节点中都有一个特殊的“参考”字段，特别是对于链接到下一个节点的键遍历情况，您可以轻松获得所有属性:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T12:33:09.300

它只是一个键列表还是每个节点的列表？您可以将这样的列表存储在特定节点上，例如参考节点。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-21T09:39:23.377

如果您想获取在特定索引中索引的所有节点，您可以这样做：

```
IndexHits<Node> hits = IndexManager.forNodes(<INDEX_NAME>).query("*:*");
try{
    while(hits.hasNext()){
        Node n = hits.next();
        ...process the node...
    }
}finally{
    hits.close();
} 
```

# python - 使用时间、日期、时间增量

> ID：10608481
> 
> 赞同：3
> 
> 时间：2012-05-15T20:33:50.030
> 
> 标签：python, datetime, numpy, scipy

我有一个问题，我经常处理时间和时间差异。到目前为止，我已经使用许多 if 语句解决了这个问题，但这些很容易出错。在寻找更好的解决方案并且没有重新发明轮子的情况下，我遇到了时间、日期和时间增量。但是这些对我来说似乎太不灵活了，所以我正在寻找关于如何使用 python 的内置函数解决这个问题的想法和技巧——如果可能的话。这就是问题所在：将卫星数据从大片分区到常规网格涉及大量简单的时间计算。如果我有日期整数：200702100700 我想从这样的时间格式中添加和减去小时和分钟，这样 date - 18 会给我一个新的日期，它考虑到闰年并且可以向后交叉，年，月，日和前锋。以下是我对 python 的 datetime 包的理解：

```
from datetime import timedelta, date, time
t1 = date(2007,01,01); t = time(12,0); t2 = datetime.combine(t1,t)
t3 = timedelta(hours=18); t4 = t2 - t3; t5 = t2 + t3
print t4
>>>datetime.timedelta(2006, 23401, 3001) 
```

这个时间在将进行数千次计算的脚本中不是很有用。我的问题是 t4 没有年、月或日对象，并且 2006 似乎被视为小时。这一切都非常令人困惑。这在 python/numpy/scipy 中可能吗？如果是这样，有人可以给我小费吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T20:57:45.850

Gerrat 做对了，使用 datetime 对象。

您可以完全创建 datetime 对象，而无需单独创建日期和时间（或使用`datetime.strptime()`）。

**BUG ALERT**您的代码和一些发布的响应将注入一个难以看到的错误。

```
// this works
datetime(2007,01,01,12)
// this breaks
datetime(2007,01,09,12) 
```

在 python 中，在代码中使用日期时，在“09”中键入“0”使其成为八进制数（“09”无效），避免前导零。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T20:44:02.690

```
from datetime import datetime, timedelta, date, time
t2 = datetime(2007, 1, 1, 12, 0, 0); 
t3 = timedelta(hours=18); t4 = t2 - t3; t5 = t2 + t3
print "YEAR", t4.year
print "MONTH", t4.month
print "DAY", t4.day
print "HOUR", t4.hour
print "MINUTE", t4.minute 
```

运行那个...

```
[Mike_Pennington ~]$ python foo.py 
YEAR 2006
MONTH 12
DAY 31
HOUR 18
MINUTE 0
[Mike_Pennington ~]$ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T20:43:26.823

您要使用的是日期时间对象，而不是日期对象：

```
from datetime import datetime, timedelta
t1 = datetime(2007, 01, 01)
print t1 - timedelta(days=18)
>>>datetime.datetime(2006, 12, 14, 0, 0)
print t1 - timedelta(hours=18)
>>>datetime.datetime(2006, 12, 31, 6, 0) 
```

这也适用于小时、分钟和秒！

# php - 带有mysql的jQuery模式用户删除选项

> ID：10608485
> 
> 赞同：1
> 
> 时间：2012-05-15T20:34:01.130
> 
> 标签：php, javascript, mysql

你好我还有一个问题。我正在创建一个管理系统。我添加了用户注册和删除功能。现在我需要做一个好的设计。

所以我从 MySQL 数据库创建了一个表，其中包含以下信息：ID、用户名、上次登录和删除。

这是我打印表格的 php 代码的提取：

```
echo "<td class=\"center\">
            <a href=\"#\" class=\"delete_user\">
                <img src=\"images/delete.png\" />
                <script type=\"text/javascript\">
                    var id = \"index.php?section=user_delete&id=".$getUserID[$i]."\";
                </script>
            </a>
        </td> 
```

如您所见，我将 ID 用于删除过程。

现在我想使用一个 jQuery 模态弹出窗口来确保我真的想删除这个人。

这是我的 js 代码：

```
$(".delete_user").click(function() {
    $( "#dialog_delete_user" ).dialog( "open" );
});

$( '#dialog_delete_user' ).dialog({
    autoOpen: false,
    resizable: false,
    height: 170,
    modal: true,
    buttons: {
        'ok': function() {
            alert(id);
            //document.location = id; 
            $( this ).dialog( 'close' );
        }
    }
}); 
```

如您所见，我需要添加一个变量 id 来识别此人并确保删除正确的人。

我认为只有单击链接才会执行 javascript。这似乎是不正确的。

那么我如何定义/识别每个人呢？

显示的表格是无用的，因为无法识别每个删除按钮及其所有者。所以我必须在我创建表格的地方定义它。

如果没有这个 jQuery 模态表单，它会很容易。但必须有办法让它发挥作用。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:39:04.330

就我个人而言，我会在打开对话框的链接上设置一个属性，例如

```
<a href="bla" data-user-id="5">Click me!</a> 
```

然后在打开对话框的链接的 onclick 事件中，我会将对话框的隐藏用户字段设置为 $(this).data("user-id"); 如果你不做一个表单，只是立即触发一个 ajax 请求，它会变得更容易。

```
var currentUserId;
$(".delete_user").click(function() {
    currentUserId = $(this).data("user-id");
    $( "#dialog_delete_user" ).dialog( "open" );
});

$( '#dialog_delete_user' ).dialog({
    autoOpen: false,
    resizable: false,
    height: 170,
    modal: true,
    buttons: {
        'ok': function() {
            //document.location = "/somephpfile.php?user_id=" + currentUserId; 
            $( this ).dialog( 'close' );

            // ajax version
            $.ajax({
                url : "/somephpfile.php?user_id=" + currentUserId,
                // Other ajax related code.
            });
        }
    }
}); 
```

# c# - 如何在 C# Web APP 中获取当前的 Windows 登录名？

> ID：10608486
> 
> 赞同：6
> 
> 时间：2012-05-15T20:34:02.630
> 
> 标签：c#

如何获取 Windows 登录的用户名？我使用了这些方法：

*   环境.用户名
*   WindowsIdentity.GetCurrent().Name;

但是，当我将它放入 IIS 服务器时，它会使用服务器的名称，而不是我的机器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T20:37:04.893

试试`Page.User.Identity.Name`。这应该是您正在寻找的。此属性派生自`HttpContext`并表示当前 HTTP 请求的登录用户安全信息。

如果结果为空，那么我会怀疑 IIS 设置没有正确配置。尝试以下链接中的建议：

[http://forums.asp.net/t/1689878.aspx/1](http://forums.asp.net/t/1689878.aspx/1)
[HttpContext.Current.User.Identity.Name 为空](https://stackoverflow.com/questions/1571036/httpcontext-current-user-identity-name-is-empty)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T23:03:22.083

使用这个 System.Environment.GetEnvironmentVariable("UserName")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-03T14:53:51.473

看一眼：

[https://richhewlett.com/2011/02/15/getting-a-users-username-in-asp-net/](https://richhewlett.com/2011/02/15/getting-a-users-username-in-asp-net/)

以下是上面链接中的主要示例：

场景 1：IIS 中的匿名身份验证关闭模拟。

```
HttpContext.Current.Request.LogonUserIdentity.Name  -> COMPUTER1\IUSR_COMPUTER1
HttpContext.Current.Request.IsAuthenticated -> False
HttpContext.Current.User.Identity.Name  -> –
System.Environment.UserName -> ASPNET
Security.Principal.WindowsIdentity.GetCurrent().Name    -> COMPUTER1\ASPNET 
```

场景 2：IIS 中的 Windows 身份验证，模拟关闭。

```
HttpContext.Current.Request.LogonUserIdentity.Name  -> MYDOMAIN\USER1
HttpContext.Current.Request.IsAuthenticated -> True
HttpContext.Current.User.Identity.Name  -> MYDOMAIN\USER1
System.Environment.UserName -> ASPNET
Security.Principal.WindowsIdentity.GetCurrent().Name    -> COMPUTER1\ASPNET 
```

场景 3：IIS 中的匿名身份验证，模拟

```
HttpContext.Current.Request.LogonUserIdentity.Name  -> COMPUTER1\IUSR_COMPUTER1
HttpContext.Current.Request.IsAuthenticated -> False
HttpContext.Current.User.Identity.Name  -> –
System.Environment.UserName -> IUSR_COMPUTER1
Security.Principal.WindowsIdentity.GetCurrent().Name    -> COMPUTER1\IUSR_COMPUTER1 
```

场景 4：IIS 中的 Windows 身份验证，模拟

```
HttpContext.Current.Request.LogonUserIdentity.Name  -> MYDOMAIN\USER1
HttpContext.Current.Request.IsAuthenticated -> True
HttpContext.Current.User.Identity.Name  -> MYDOMAIN\USER1
System.Environment.UserName -> USER1
Security.Principal.WindowsIdentity.GetCurrent().Name    -> MYDOMAIN\USER1 
```

笔记：

```
SERVER1\ASPNET: Identity of the running process on server.
SERVER1\IUSR_SERVER1: Anonymous guest user defined in IIS.
MYDOMAIN\USER1: The user of the remote client. 
```

# windows-7 - 通过Windows中的命令行工具合并两个png？

> ID：10608487
> 
> 赞同：3
> 
> 时间：2012-05-15T20:34:05.953
> 
> 标签：windows-7, batch-file, png, build-automation

我正在寻找一种可以通过命令行（Windows 7）使用的工具来合并两个大小相同的 png。到目前为止，我对搜索的运气并不好，因为我见过的大多数工具都是相当繁重的应用程序，它们似乎并不针对简单的操作。

我想用覆盖图像中的不透明像素覆盖不透明基础图像中的位。我也有 Photoshop CS4，但在找到相关命令行参数方面运气不佳。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T20:45:59.457

[ImageMagick](http://www.imagemagick.org/)有一个名为复合的命令行工具，它会做你想做的事。适用于 Windows、Mac、Linux 等的发行版。我刚刚用两个透明的 PNG 对其进行了测试，并按预期工作。

```
composite foreground.png background.png newimage.png 
```

# asp.net-mvc-3 - 如何将行插入子表？

> ID：10608488
> 
> 赞同：1
> 
> 时间：2012-05-15T20:34:08.670
> 
> 标签：asp.net-mvc-3, entity-framework-4.1

我对实体框架和模式还很陌生。如何将数据插入子表？

我将信息插入到父表中。我是否必须返回该行的标识，然后再发出另一个插入？

用户表和用户角色。

我一直在努力寻找一天的解决方案，但我认为这是因为我正在搜索错误的结果。我的结构是使用工作单元/存储库模式设置的。

任何帮助都会有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T20:42:52.173

获取父对象。将子记录添加到它的导航属性。

像这样的东西

```
int orderId=33;

var parent=dbContext.Orders.Where(x=>x.Id==orderId);

parent.Details.Add(new OrderDetail{ Quantity=4, ItemId=37});
parent.Details.Add(new OrderDetail{ Quantity=2, ItemId=48});

dbContext.SaveChanges(); 
```

假设 Order 是您的 Master 实体，Detail 是您的子实体，而 dbContext 是您的 DBContext 类对象。

**编辑：**如果你把它加在一起，

```
Order parent=new Order { CustomerId=35, Discount=43.63 };
parent.Details.Add(new OrderDetail{ Quantity=4, ItemId=37});
parent.Details.Add(new OrderDetail{ Quantity=2, ItemId=48});

dbContext.Orders.Add(parent);
dbContext.SaveChanges(); 
```

# ios - 搜索时的 UIActivtyIndi cator

> ID：10608491
> 
> 赞同：1
> 
> 时间：2012-05-15T20:34:20.697
> 
> 标签：ios, search-engine, uiactivityindicatorview

我正在制作一个在用户按下弹出键盘上显示的搜索按钮后搜索字典的应用程序。由于搜索字典需要一些时间，我想添加一个 UIActivtyIndi​​cator。问题只是我不知道应该在哪里添加以下代码行：

```
[loader startAnimating]; 
```

因为如果我在 UITexfieldDelegateProtcol 方法中添加它（请参见下面的代码），键盘将在执行搜索时冻结几秒钟。然后键盘会自行移除，应用程序会显示结果，而不会显示 UIActivityView。

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField

    [textField resignFirstResponder];
    [loader startAnimating]; //loader is the name of the activityindicator
    [self findSearchWords]; //Starts the dictionary search

return YES; 
```

如果我要删除以下行：

```
[self findSearchWords]; 
```

然后 UIActivtyIndi​​cator 会出现并开始旋转，但当然不会执行搜索。

因此，我的问题是，我应该在哪里实现 UIActivityIndi​​cator 的方法“startAnimating”，以便在执行搜索时它会显示并旋转。我也尝试在其他 UITextFieldDelegateProtocol 方法中实现该方法（startAnimating），但没有成功！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:41:02.473

如果您想添加活动指示器，您应该在单独的线程中执行搜索。这是因为您将在主线程中添加活动指示器，并且如果您在同一线程中执行搜索，活动将不会出现，因为它会被您的搜索过程锁定。

# wpf - 为多个环境创建 ClickOnce 包的构建方法

> ID：10608494
> 
> 赞同：2
> 
> 时间：2012-05-15T20:34:33.447
> 
> 标签：wpf, deployment, build, clickonce

这是我的场景：

我有一个通过 ClickOnce 交付的 WPF 应用程序。该应用程序为多个客户端提供多个环境（目前为 9 个，但预计在不久的将来会增加一倍）。

我目前使用的过程是（基本上）：

*   令牌替换部分 app.config
*   令牌替换生成 MSI 安装程序时使用的部分 WiX 文件（包括签名证书和指纹）
*   构建解决方案
*   创建客户端/环境特定的安装程序
*   对每个客户端/环境组合重复

这意味着安装应用程序的好处是运行所需的安装程序很简单。然而，缺点是如果（何时）我需要创建一个新环境，我必须使用一组新的配置参数重新运行整个构建过程。

我怎样才能让这一切变得更好？

我最新的想法是我将构建过程拆分为只创建二进制文件。然后有一个单独的打包过程，该过程会提取适当的二进制文件、修补配置、使用 MAGE （重新）签名的清单等。

这将具有“一次构建，多次部署”的持续优势，同时确保如果需要新环境，可以重新打包它们而无需重新构建二进制文件。

这听起来像一个明智的方法吗？有没有人对这种情况有任何指导？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-27T12:41:55.830

我们有一个类似的场景，在多个环境中使用 WPF ClickOnce 应用程序，其中 app.config 中唯一的东西是一个连接字符串。

为了解决这样一个事实，即如果没有为每个客户端/环境构建一个包的构建过程，您就无法更改 clickonce 包中的配置文件，我们提出了一种解决方案，可让您将 app.config 文件放置在服务器部署文件夹中并让应用程序在运行时访问它。

为此，我们创建了一个在 app.xaml.cs OnStartup 事件中初始化的静态类。

公共静态类 DbConnectionString { 公共静态字符串 ConnectionString { 获取；私人套装；} 公共静态字符串 ActivationPath { 获取；私人套装；}

```
public static void Init()
{
    string dbContext = "myDbContext";
    string configFile = "App.config";
    ConnectionString = "";
    ActivationPath = "";

    ActivationArguments actArg = AppDomain.CurrentDomain.SetupInformation.ActivationArguments;
    if (actArg != null)
    {
        if (actArg.ActivationData != null)
        {
            try
            {
                var actData = actArg.ActivationData[0];
                var activationPath = Path.GetDirectoryName(new Uri(actData).LocalPath);
                var map = new System.Configuration.ExeConfigurationFileMap();
                map.ExeConfigFilename = Path.Combine(activationPath, configFile);
                var config = ConfigurationManager.OpenMappedExeConfiguration(map, ConfigurationUserLevel.None);
                var connectionStringSection = config.ConnectionStrings;
                ConnectionString = connectionStringSection.ConnectionStrings[dbContext].ConnectionString;
                ActivationPath = activationPath;
            }
            catch (Exception)
            {

                ConnectionString = "";
                ActivationPath = "";
            }
        }
    }
} 
```

}

在发布/选项/清单下的项目设置中，勾选“允许将 URL 参数传递给应用程序”

然后，我在需要连接字符串的地方使用静态类的 ConnectionString 属性。除非您仅将应用程序部署为在线，否则不会设置它，因此我们默认使用包中的 app.config 进行开发/测试。

这有点令人费解，但效果很好，您只需发布一次应用并为每次安装提供一个 app.config，在构建之间不会更改。

它还设置属性 ActivationPath，它是 clickonce 服务器安装目录的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:23:23.687

这听起来像是朝着正确方向迈出的一步，并且类似于我多年来为 WPF 应用程序所做的事情，而且效果很好。

我们使用 Team City 构建解决方案，然后有多个处理 ClickOnce 发布的构建后步骤，每个配置一个步骤。每个配置都涉及启动一个使用 Mage.exe 的 MSBuild 文件。它将解决方案输出文件复制到临时目录，然后对 App.config 等文件执行大量替换，并运行各种自定义 MSBuild 任务。

MSBuild 项目文件包含 ClickOnce 下载 URL 等内容的基本设置和环境覆盖。我们还必须对生成的清单本身进行一些修改（然后重新签名），例如将特定文件标记为数据或不标记为数据。

# html - 修复 html tidy 无法修复的格式错误的 html

> ID：10608501
> 
> 赞同：0
> 
> 时间：2012-05-15T20:35:12.937
> 
> 标签：html, web-scraping, tidy

好的，所以我一直在利用 HTML tidy 将常规 HTML 网页转换为适合解析的 XHTML。问题是我在firefox中保存的测试页面的html在保存过程中显然被firefox预先清理过，称之为文件F。Html tidy在文件F上工作正常，但在通过.NET写入文件的原始数据上失败（文件N ）。Html tidy 抱怨表单标签与表格标签混合在一起。Html 不是我的，所以我不能只修复源。

如何清理文件 N 以便它可以通过 Html 整洁地运行？是否有连接到 Firefox 的标准方法（完全以编程方式，无需使用鼠标或键盘）或其他工具可以对 html 应用额外的修复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T21:50:36.973

我已经使用 HTML tidy 有一段时间了，但后来发现我从[TagSoup](http://ccil.org/~cowan/XML/tagsoup/)获得了更好的结果。

它可以用作 JAXP 解析器，即时转换非格式良好的 HTML。我通常让它解析[Saxon](http://saxon.sourceforge.net/) XQuery 转换的输入。

但它也可以用作独立实用程序，作为可执行 jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T20:48:51.980

我最终在 C# 中使用 SendKeys 并从 user32.dll 导入函数以将 Firefox 启动到我想要的网站 (file:///myfilepathhere/) 后将其设置为活动窗口。

SendKeys 似乎需要运行一个窗口程序，所以我还添加了另一个可执行文件，它在其 form_load() 方法中执行操作。

通过使用 alt+f，向下六次，输入，稍等，输入完整路径文件名，输入（两次）然后杀死 firefox，我能够自动化 firefox 清理一些 html 的能力。

# solr - 以不同于英语的方式查询 Solr

> ID：10608503
> 
> 赞同：0
> 
> 时间：2012-05-15T20:36:02.100
> 
> 标签：solr, indexing, querying

我不得不承认 solr 摇滚。但最重要的是社区的反应。再一次感谢你！

我用英文做了一个索引集合。我为了学习目的而建造了它。现在我想用希腊语索引和查询。我注意到查询希腊集合不像英语集合那么成功。你能解释一下方法吗？希腊语查询如何成功？对于像希腊语这样的语言，是否有任何特殊的 Solr 配置？

请注意，这种语言有重音、撇号和逗号。

我会很高兴有一个指针或答案。

谢谢，

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T20:41:42.457

对于初学者[，solr 分析页面中特定于希腊语的那些](http://wiki.apache.org/solr/LanguageAnalysis#Greek)

# c# - 哪些工具可用作 api 来为 .net 应用程序构建通用性能分析器？

> ID：10608505
> 
> 赞同：0
> 
> 时间：2012-05-15T20:36:13.600
> 
> 标签：c#, sql-server, profiler

我知道这里已经问过一个类似的问题[C#/.NET 分析器应该有哪些功能？](https://stackoverflow.com/questions/1275109/what-features-should-a-c-net-profiler-have)但是这个线程不仅是关于愿望清单的，而且是关于如何去实现那个愿望清单的。

所以让我再问你一次。我正在构建通用性能分析器。我知道我可以将 dll 作为输入，并采用通常的秒表方法来分析该 dll 中方法的响应时间。但这是非常基本的东西。我愿意使用第三方 api（或者我自己也做一些代码）来提取我可以从那个 dll 中获得的任何有用信息。我想知道让它变慢的一切。我想知道它的内存泄漏。任何可以帮助我找到应用程序瓶颈的东西。我想要类似的方法来查找昂贵的数据库操作。但所有这一切，在一个应用程序下。

那么你建议什么方法？我可以将哪些工具放在我的保护伞下，以便我可以在我的项目中使用它们？

我想制作一个“单一”应用程序，它将采用 dll 等通用输入，也可以将输入作为源代码树（解决方案、项目、.cs 文件）并以响应时间、识别瓶颈、内存泄漏的形式发出结果， ETC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:40:18.970

> 任何可以帮助我找到应用程序瓶颈的东西。

请注意通用分析假设，即测量会准确无误地导致瓶颈所在的位置，因为可以通过这种方式找到其中一些，但只能找到一些。

然后剩下的瓶颈就在那里浪费了不必要的时间，但开发人员没有注意到它们，因为分析器测量没有隔离它们。

一个简单的例子可能是某种看起来是最优的字典查找，除了被查找的单词是高度非随机的。如果某些词的查找频率更高，则表示优化的机会，但要检测到您需要了解有关数据的一些信息。测量分析器不查看程序的数据。

一个更极端的例子是任何类型的解释器，其数据是另一种语言的“指令集”。瓶颈很容易出现在其他语言中，但由于它是数据，测量分析器不会看到它们。

真正看到这类问题的不是测量，而是程序状态的少量样本，开发人员可以在其中全面检查和表征每个样本的内容（调用堆栈和数据）。与对方法进行测量或浏览调用图相比，这可以更好地理解程序如何以及为什么花费时间。

# css - CSS3如何使动画循环播放并且永不停止？

> ID：10608508
> 
> 赞同：1
> 
> 时间：2012-05-15T20:36:15.130
> 
> 标签：css

我有一个左右移动的红色方块。然后它停止了，我如何让它一直持续到我离开网页？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T20:39:24.453

添加属性`infinite`

例如

```
-webkit-animation: NAME-OF-ANIMATION 10s linear infinite; 
```

看这个[例子](http://jsfiddle.net/jackdent/Ch7wd/)

# google-analytics - 主域页面和子域的 Google Analytics 代码是否相同？

> ID：10608509
> 
> 赞同：2
> 
> 时间：2012-05-15T20:36:19.463
> 
> 标签：google-analytics, subdomain

嗨这是我的代码：此代码会进入我网站的所有页面吗？我知道它应该进入我网站子域的所有页面。

```
<script type="text/javascript">

  var _gaq = _gaq || [];

  _gaq.push(['_setAccount', 'UA-*******']);

  **_gaq.push(['_setDomainName', 'tuneupmedia.com']);**

  _gaq.push(['_trackPageview']);

  (function() {

    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = 

true;

    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + 

'.google-analytics.com/ga.js';

    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);

  })();

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:54:22.793

是的。该代码应放置在您的所有页面上，并具有相同的`_setDomainName`值。

# javascript - 从 javascript 或 asp.net 方法调用 wcf 服务

> ID：10608514
> 
> 赞同：0
> 
> 时间：2012-05-15T20:36:42.883
> 
> 标签：javascript, vb.net, wcf

我有一个带有 jquery 控件的 asp.net Web 应用程序。我有一个数据网格，它将显示来自数据库表的数据，并创建了一个 WCF 服务来访问数据库并返回数据。我希望能够从此应用程序调用 WCF 服务，该应用程序位于不同的服务器上，并返回 xml 数据，转换为 json 格式以在作为 jquery 小部件的数据网格中使用。我已经测试了网络服务，它工作正常。我应该从 xml 中的 javascript 函数调用 Web 服务，还是在调用该服务的后面创建一个 .net 方法，然后进行转换？从这些我将如何开始？任何想法/链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:54:07.920

您可以使用 webHttpBinding 来允许您直接从 javascript 调用 WCF 服务

# spring-mvc - 使用默认 STS 模板的 Spring MVC 中的错误 404

> ID：10608516
> 
> 赞同：0
> 
> 时间：2012-05-15T20:36:47.743
> 
> 标签：spring-mvc, http-status-code-404

我正在使用 SpringSource 工具套件，我从模板创建了一个 Spring MVC 项目，我很难理解为什么当我在项目中单击“运行为...”时它工作正常，但是当我单击它时WEB-INF/views 目录中的 home.jsp 文件出现 404 错误，因此我也看不到其他 jsp。这是正常的行为吗？如果是这样，你能解释一下或指出我的解释吗？

这就是我在控制台中得到的。

```
15/05/2012 02:43:37 PM com.springsource.tcserver.security.PropertyDecoder <init>
INFO: tc Runtime property decoder using memory-based key
15/05/2012 02:43:37 PM com.springsource.tcserver.security.PropertyDecoder <init>
INFO: tcServer Runtime property decoder has been initialized in 181 ms
15/05/2012 02:43:37 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-1234"]
15/05/2012 02:43:38 PM com.springsource.tcserver.serviceability.rmi.JmxSocketListener init
INFO: Started up JMX registry on 127.0.0.1:6969 in 75 ms
15/05/2012 02:43:38 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 651 ms
15/05/2012 02:43:38 PM org.apache.catalina.core.StandardService startInternal
INFO: Arrancando servicio Catalina
15/05/2012 02:43:38 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: VMware vFabric tc Runtime 2.6.4.RELEASE/7.0.25.B.RELEASE
15/05/2012 02:43:38 PM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Desplieque del descriptor de configuración C:\springsource32\vfabric-tc-server-developer-2.6.4.RELEASE\spring-insight-instance\conf\Catalina\localhost\HelloWorld.xml
15/05/2012 02:43:38 PM org.apache.catalina.startup.SetContextPropertiesRule begin
ADVERTENCIA: [SetContextPropertiesRule]{Context} Setting property 'source' to 'org.eclipse.jst.jee.server:HelloWorld' did not find a matching property.
15/05/2012 02:43:38 PM com.springsource.insight.collection.tcserver.ltw.TomcatWeavingInsightClassLoader start
INFO: Context [localhost|HelloWorld] will not be woven
15/05/2012 02:43:39 PM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext
INFO : org.springframework.web.context.ContextLoader - Root WebApplicationContext: initialization started
INFO : org.springframework.web.context.support.XmlWebApplicationContext - Refreshing Root WebApplicationContext: startup date [Tue May 15 14:43:39 MDT 2012]; root of context hierarchy
INFO : org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from ServletContext resource [/WEB-INF/spring/root-context.xml]
INFO : org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@a29c6e: defining beans []; root of factory hierarchy
INFO : org.springframework.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 596 ms
15/05/2012 02:43:39 PM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring FrameworkServlet 'appServlet'
INFO : org.springframework.web.servlet.DispatcherServlet - FrameworkServlet 'appServlet': initialization started
INFO : org.springframework.web.context.support.XmlWebApplicationContext - Refreshing WebApplicationContext for namespace 'appServlet-servlet': startup date [Tue May 15 14:43:39 MDT 2012]; parent: Root WebApplicationContext
INFO : org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from ServletContext resource [/WEB-INF/spring/appServlet/servlet-context.xml]
INFO : org.springframework.context.annotation.ClassPathBeanDefinitionScanner - JSR-330 'javax.inject.Named' annotation found and supported for component scanning
INFO : org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
INFO : org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@9b2a51: defining beans [org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0,org.springframework.format.support.FormattingConversionServiceFactoryBean#0,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter#0,org.springframework.web.servlet.handler.MappedInterceptor#0,org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver#0,org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver#0,org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver#0,org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping,org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter,org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter,org.springframework.web.servlet.resource.ResourceHttpRequestHandler#0,org.springframework.web.servlet.handler.SimpleUrlHandlerMapping#0,org.springframework.web.servlet.view.InternalResourceViewResolver#0,trampsController,homeController,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@a29c6e
INFO : org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Mapped "{[/tramps],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public java.lang.String com.hanzellegarda.HelloWorld.controllers.TrampsController.list(org.springframework.ui.Model)
INFO : org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Mapped "{[/],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public java.lang.String com.hanzellegarda.HelloWorld.HomeController.home(java.util.Locale,org.springframework.ui.Model)
INFO : org.springframework.web.servlet.handler.SimpleUrlHandlerMapping - Mapped URL path [/resources/**] onto handler 'org.springframework.web.servlet.resource.ResourceHttpRequestHandler#0'
INFO : org.springframework.web.servlet.DispatcherServlet - FrameworkServlet 'appServlet': initialization completed in 802 ms
15/05/2012 02:43:40 PM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Desplieque del descriptor de configuración C:\springsource32\vfabric-tc-server-developer-2.6.4.RELEASE\spring-insight-instance\conf\Catalina\localhost\insight.xml
15/05/2012 02:43:40 PM com.springsource.insight.collection.tcserver.ltw.TomcatWeavingInsightClassLoader start
INFO: Context [localhost|insight] will not be woven
15/05/2012 02:43:40 PM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext
15/05/2012 02:43:56 PM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring FrameworkServlet 'Spring MVC Dispatcher Servlet'
15/05/2012 02:44:00 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Despliegue del directorio C:\springsource32\vfabric-tc-server-developer-2.6.4.RELEASE\spring-insight-instance\webapps\manager de la aplicación web
15/05/2012 02:44:00 PM com.springsource.insight.collection.tcserver.ltw.TomcatWeavingInsightClassLoader start
INFO: Context [localhost|manager] will not be woven
15/05/2012 02:44:01 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Despliegue del directorio C:\springsource32\vfabric-tc-server-developer-2.6.4.RELEASE\spring-insight-instance\webapps\ROOT de la aplicación web
15/05/2012 02:44:01 PM com.springsource.insight.collection.tcserver.ltw.TomcatWeavingInsightClassLoader start
INFO: Context [localhost|ROOT] will not be woven
15/05/2012 02:44:01 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-1234"]
15/05/2012 02:44:01 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 23080 ms 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T20:20:33.683

一般来说，像 home.jsp 这样的静态文件是通过控制器渲染的。

在这种情况下，您的控制器是由注释驱动的，由

```
<annotation-driven /> 
```

位于 WEB-INF/spring/appServlet/servlet-context.xml 中的 XML 元素（假设您没有移动任何东西，我只是从模板中制作了一个示例 mvc 项目）

这意味着 Spring 会扫描您的 java 文件以查找 @Controller 对象，然后它将获取并绑定到视图。

home.jsp 不呈现的原因是因为它是通过位于您的基础包中的 HomeController 呈现的。

您应该注意到有一个带有以下签名的注释

```
@RequestMapping(value = "/", method = RequestMethod.GET) 
```

这将您的应用程序的根上下文（无论项目名称是什么）绑定到此注释下方的方法，该方法应该是（即 localhost:8080/your_app/）

```
public String home(Locale locale, Model model) 
```

您应该注意的是此控制器方法的 String 的返回类型。这表示方法完成后将呈现的视图名称。在这种情况下，它应该是：

```
return "home"; 
```

下一部分可能有点令人困惑，但过一段时间应该会有意义。“home”与 ViewResolver 相关联，如果你回到你的 servlet-context.xml，应该有一个带有类的 bean

```
org.springframework.web.servlet.view.InternalResourceViewResolver 
```

注意正在设置的属性：

```
<beans:property name="prefix" value="/WEB-INF/views/" />
<beans:property name="suffix" value=".jsp" /> 
```

这意味着视图解析器将开始在 /WEB-INF/views/ 中查找“home”视图文件，并将 .jsp 附加到 home 的末尾。它找到的第一个匹配项将被返回，如果您查看目录结构，则其中有一个 jsp 文件：

> /WEB-INF/views/home.jsp

希望这个回答对你有所帮助，欢迎评论。

# html - 使用 jquery mobile 的多页模板显示搜索结果

> ID：10608520
> 
> 赞同：0
> 
> 时间：2012-05-15T20:36:59.077
> 
> 标签：html, jquery-mobile

这是我的 HTML 代码。我正在尝试的事情听起来很简单，但我做不到。我正在尝试使用 jquery mobile 建议的多页模板。第一页我有一个文本框和按钮。用户在文本框中输入一个值，然后单击应该将用户带到“page2”并显示搜索详细信息的按钮。

下面的代码将我带到“page2”，但我看不到任何搜索结果。我在两者之间插入了一个警报，并弹出了数据。page2上的后退按钮也不会带我到page1？

非常感谢任何指针。

```
<!DOCTYPE HTML>
    <html>
    <head>
    <title>Employee Finder</title>

    <script src="jquery-mobile/jquery-1.7.2.min.js"/>
    <script src="jquery-mobile/jquery.mobile-1.0a3.min.js"/>
    <script src="phonegap-1.3.0.js"/> 
    <script src="http://ajax.microsoft.com/ajax/jquery.templates/beta1/jquery.tmpl.min.js"/>
    <link href="jquery-mobile/jquery.mobile-1.0a3.min.css" rel="stylesheet" type="text/css"/>

    <script> 

    $(document).ready(function() {
        $('#findemplyoee').click(function() {

          $.mobile.changePage('#page2', { transition: "slide", changeHash: true, reverse: true });

             var employeeNumber = $("#employeeNumber").val();
             var employeedetail = JSON.parse(... call a function here);

             if(employeedetail.found)
             {
                     $('#employeefirstName').text(employeedetail.firstName);
                     $('#employeelastName').text(employeedetail.lastName);
             }
             else
             {
                     $('#employeeDetails').html("<p>Sorry the employee Number you entered was not found!</p>");
             }

        });
    });

    </script>

    </head> 
    <body> 

    <div data-role="page" id="page1">
        <div data-role="header">
            <h1>Find Employee Data</h1>
        </div>

        <div data-role="content" id="searchDetails">    
           <input name="employeeNumber" type="text" id="employeeNumber"/>
           <input type="button" id="findemplyoee" data-theme="b" value="Find Employee"/>
        </div>

        <div data-role="footer">
            <h4>Page Footer</h4>
        </div>
    </div>

    <div data-role="page" data-add-back-btn="true" id="page2">
        <div data-role="header">
            <h1>Page Two</h1>
        </div>
        <div id="employeeDetails">
           <p id="employeefirstName"></p>
           <p id="employeelastName"></p>
        </div>
        <div data-role="footer">
            <h4>Page Footer</h4>
        </div>
    </div>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T21:08:28.093

您应该升级到 jQuery Mobile 1.1！您的示例工作正常：http: [//jsfiddle.net/eUTga/](http://jsfiddle.net/eUTga/)

我很确定您包含的 jQuery 版本 (jquery-mobile/jquery-1.7.2.min.js) 没有使用旧的 jQuery Mobile (jquery-mobile/jquery.mobile-1.0a3.min.js) 进行很好的测试 -或者根本不兼容。

请注意，jQuery Mobile 团队建议在 jQM 下载站点 (http://jquerymobile.com/download/) 上使用带有最新稳定版 (1.1.0) 的 jQuery 1.6.4。

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script> 
```

# node.js - 用于 Node.js 上 Riak 的 ORM 库

> ID：10608521
> 
> 赞同：0
> 
> 时间：2012-05-15T20:37:01.337
> 
> 标签：node.js, express, riak

谁能推荐一个为 Riak/Node.js 提供类似于 Mongoose for MongoDB 的类似 ORM 框架的库？

我已经检查了 Riak-js (http://riakjs.org/)，但它似乎没有提供一种定义如下模型的方法：

```
var user = new User();
user.created = new Date();
user.username = "TEST";
user.password = "PASS";
user.email = "someemail";
user.save(); 
```

我查看了很棒的 Tubbs (riakjs-model) 库，但它似乎并不活跃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:51:42.593

我发现最好在原始驱动程序之上滚动我自己的映射器。当前的驱动程序可能会混淆正在发生的事情，更不用说当您编写基于 Map/Reduce 的查询时，很难调试您到底做错了什么。

我是根据经验说的，首先尝试使用 Ripple（红宝石的 ODM），然后将其撕掉并使用 riak-ruby 驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-17T12:18:49.663

这个“ts-mongodb-orm”怎么样

[https://www.npmjs.com/package/ts-mongodb-orm](https://www.npmjs.com/package/ts-mongodb-orm)

# android - 来自两个日期选择器的查询

> ID：10608524
> 
> 赞同：0
> 
> 时间：2012-05-15T20:37:19.123
> 
> 标签：android, sqlite, date

我的布局中有两个简单的 DatePickers。

...

```
 <DatePicker
    android:id="@+id/dp1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

...

```
<DatePicker
    android:id="@+id/dp2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

...

```
<Button
    android:id="@+id/bokdate"
    android:layout_width="62dp"
    android:layout_height="wrap_content"
    android:text="@string/ok" /> 
```

我会在我的数据库中查询第一个 DatePicker 日期和第二个 DatePicker 日期之间的寄存器。

`YYYY-MM-DD HH:MM:SS`使用`datetime('now', 'localtime')`SQLite 函数，日期以这种格式存储在我的数据库中。

我试过这段代码但不起作用。

```
 DatePicker dp1 = (DatePicker) findViewById(R.id.dp1);
    DatePicker dp2 = (DatePicker) findViewById(R.id.dp2);

    Integer day1 = dp1.getDayOfMonth();
    Integer month1 = dp1.getMonth() + 1;
    Integer year1 = dp1.getYear();

    String s1 = "'" + year1.toString() + "-" + month1.toString() + "-"
            + day1.toString() + " 00:00:00'";

    Integer day2 = dp2.getDayOfMonth();
    Integer month2 = dp2.getMonth() + 1;
    Integer year2 = dp2.getYear();

    String s2 = "'" + year2.toString() + "-" + month2.toString() + "-"
            + day2.toString() + " 00:00:00'";

    final Button b1 = (Button) findViewById(R.id.bokdate);

    b1.setOnClickListener(new OnClickListener() {
        public void onClick(View arg0) {
            Intent intent = new Intent(OtherDatesActivity.this,
                    ShowDateStatisticsActivity.class);
            Bundle bundle = new Bundle();
            bundle.putString("query",
                    "SELECT * FROM statistics WHERE date BETWEEN " + s1 + " AND "
                            + s2);
            intent.putExtras(bundle);
            startActivity(intent);
        } 
```

我试图生成 2 个类似于日期格式的字符串。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T20:44:59.283

您是否尝试过 "SELECT * FROM statistics WHERE date >= Datetime(" + s1 + ") AND date <= Datetime(" + s2 +")" ？

# python - 用于选择元素的 Selenium RC CSS 定位器

> ID：10608525
> 
> 赞同：0
> 
> 时间：2012-05-15T20:37:29.160
> 
> 标签：python, selenium, css-selectors, selenium-rc

知道如何从这样定义的元素中选择一个选项：

```
<select onchange="onIsIsNot('COND_MT_USER_MOB_ACTIVE', this)">
<option selected="" value="512">Cellular</option>
<option value="256">WLAN</option>
<option value="768">Cellular or WLAN</option>
</select> 
```

我正在使用 Python 并尝试了以下变体：

```
select = "COND_MT_USER_MOB_ACTIVE"
value = "Cellular"
sel.select("css=select[onchange='onIsIsNot(\'%s\', this)']"%select, "label=%s"%value) 
```

我认为我没有得到正确的 onchange 属性的引号内的引号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:59:21.813

因此，如果您可以`id`添加一个属性，那应该很容易：

```
sel.select("id=%s"%id_val, "label=%s"%value) 
```

也就是说，如果你做不到，请考虑在哪里逃脱了什么：

```
In [1]: z = "\'"

In [2]: z
Out[2]: "'" 
```

所以在以下行中：

```
sel.select("css=select[onchange='onIsIsNot(\'%s\', this)']"%select....... 
```

这是 selenium 选择器所看到的：

```
"css=select[onchange='onIsIsNot('COND_MT_USER_MOB_ACTIVE', this)']" 
```

请注意 CSS 选择器如何不再转义单引号。我怀疑这是你需要的，虽然我没有测试过（查看`r`字符串开头的“原始字符串”）：

```
sel.select(r"css=select[onchange='onIsIsNot(\'%s\', this)']"%select....... 
```

# file - 将矩阵写入文件，没有标题和行号

> ID：10608526
> 
> 赞同：26
> 
> 时间：2012-05-15T20:37:30.283
> 
> 标签：file, r, load

我在 R 中有一个矩阵变量，比如 k。我想把它写成一个文件。我使用如下代码：

```
write.table(k,file="outfile",sep="\t") 
```

但是当我得到文件并打开它时，它包含标题。第一行就像：“v1”“v2”......“V6000”。之后，每一行都以行号开头，如“1”、“2”等。我不想要标题。有没有办法做到这一点？

现在我什至无法使用 再次将文件加载到 R 中`read.table("outfile",header=TRUE,sep= "\t")`，它甚至与我之前输出的不一样。R 将文件中作为行号的第一列识别为新列。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-05-15T20:42:06.153

要在将表格输出到文本文件时删除行名和列名（标题），请在写入矩阵时分配`FALSE`给两者`row.names`，`col.names`

```
m <- matrix(1:12, 4 , 3)
write.table(m, file="outfile,txt", sep="\t", col.names = F, row.names = F) 
```

# objective-c - 如何让数据在 iOS 应用程序的屏幕之间保持不变？

> ID：10608528
> 
> 赞同：4
> 
> 时间：2012-05-15T20:37:31.383
> 
> 标签：objective-c, ios, model-view-controller

我有一些数据字符串来自我的应用程序的一个屏幕，我想存储（在模型中），然后在用户导航回同一页面时检索它们。现在数据在模型中存储得很好，但是，我遇到了一个问题，因为似乎每次返回屏幕时都会生成一个新的控制器实例。因此，我的模型没有任何好处，因为我失去了对它的引用（它当前作为实例变量存储在我的控制器中）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T20:48:21.537

> 我究竟做错了什么？

您通常会有一个在您的文档或应用程序中共享的模型（可能是对象的集合，不一定只有一个）。创建视图控制器时，会为其提供对模型（或模型的某些部分）的引用。如果它反过来创建另一个视图控制器，它会将模型的引用传递给该对象。因此，该模型由所有视图控制器共享。当视图控制器被释放时，模型不会被遗忘，因为其他控制器知道它。

听起来您已经开始使用模型，但它仅限于单个视图控制器。也许你的其他一些视图控制器也有同样的情况。想一想如何将所有这些小模型组合成一个更大的对象图。这将使其更容易记住，并且还允许您将保存整个模型的责任放在单个对象中，例如您的应用程序委托或根视图控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T20:40:50.090

听起来您需要将模型数据持久化到磁盘，可能使用 NSUserDefaults，这是最适合此类少量数据的存储机制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T20:47:41.200

您至少可以考虑以下几个选项：

1.  正如 Andrew 所说，通过 NSUserDefaults 将数据保存到磁盘。
2.  使用单例设计模式创建一个数据“管理器”对象，该对象将在应用程序的生命周期内持久保存数据。
3.  尝试找出为什么要创建视图控制器的新实例（根据您的代码，这可能很明显或不那么明显）并尝试做一些不同的事情以重用视图控制器（考虑到您的代码）。

鉴于您正在使用评论中描述的情节提要，我会考虑选项 2，除非您真正想要做的是更改视图控制器的导航模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T21:12:55.197

当您将视图控制器推送到导航然后返回到它时，它会**持续存在**。但是，如果您希望某些数据在多个屏幕上持续存在，**单例**实例是一个好主意。

# silverlight - 下载的全景背景图像被裁剪为屏幕大小

> ID：10608529
> 
> 赞同：0
> 
> 时间：2012-05-15T20:37:32.943
> 
> 标签：silverlight, windows-phone-7, windows-phone

如果我将 Panorama.Background 图像画笔源设置为 Internet 上照片的 URL，则图像将居中并裁剪，而不是从左边缘开始，然后从屏幕向右流出，宽屏样式。

如果我将源设置为本地包 URI，那就没问题了。

闻起来像虫子。

有人有简单的解决方法吗？微软应该为我们配备一个有效的 SDK，让我们能够创造至少与手机集线器一样好的体验。

谢谢！

**更新**

问题似乎不是网络上的图像，而是小于手机屏幕尺寸的图像 - 由于带宽原因，我所有的网络托管图像都非常小。

将我的原始背景艺术 1024x768 并将其大小减半会导致手机裁剪图像的右边缘。

**更新 2**

发现其他人有同样的问题：

[http://forums.create.msdn.com/forums/p/78770/615061.aspx](http://forums.create.msdn.com/forums/p/78770/615061.aspx)

**更新 3**

[http://www.lukepuplett.com/2012/05/windows-phone-panorama-background-image.html](http://www.lukepuplett.com/2012/05/windows-phone-panorama-background-image.html)

并排的图像清楚地展示了这个错误。我会把它交给雷德蒙德团队的克里夫，看看他的想法。

这是我从最早使用手机时就发现的一个问题，我认为这将是一个众所周知的问题。所以我预计人们会很快说“哦，是的，那个老栗子，你需要做 XYZ。”

谢谢大家的-3。保持良好的工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T21:37:43.510

在跑来跑去“这是一个错误！”之前 声称，我会做我的研究。

话虽如此，您正在下载图像，并且很可能使用`BitmapImage`/的组合`ImageBrush`。现在，`ImageBrush`有一个[Stretch](http://msdn.microsoft.com/en-us/library/system.windows.media.tilebrush.stretch.aspx)属性，这就是你必须看的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:25:31.773

全景背景旨在成为丰富的高质量图像。

如果您使用的图像小于您要填充的空间并且未指定应如何拉伸它，我会期待您所看到的（“不一致的”调整大小）。

如果您声称存在错误，您期望的行为是什么？
根据您的博客文章（在更新 3 中喜欢），您似乎期望在全景图的背景中使用图像时会出现不同的默认拉伸行为。作为一般规则，从长远来看，引入不一致或有条件的默认值可能会带来更多的混乱和工作。

# java - Thrift 是否有 IPC 传输实现？或低延迟 SOA 解决方案

> ID：10608531
> 
> 赞同：8
> 
> 时间：2012-05-15T20:37:40.977
> 
> 标签：java, php, ipc, soa, thrift

我想将 SOA 引入一个没有 TCP 通信开销的低延迟系统（即使在同一台机器上）。Thirft 看起来很合适，因为我同时拥有 Java 和 php 进程。是否有用于节俭的 IPC 传输实现，或任何其他可以在这种情况下提供帮助的好主意？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T00:09:11.720

您可以使用 Thrift 序列化您的对象，然后使用您喜欢的 IPC 方法（命名管道、消息队列等）。下面是一个使用管道的简单示例

1.  我们有一个 Message 类型的对象，其中包含一些信息
2.  php进程是消息的生产者
3.  Java 进程是消费者

## 节俭模式

```
struct Message {
  1: i32 uid,
  2: string information,
} 
```

生成节俭资源

```
thrift --gen java message.thrift
thrift --gen php message.thrift 
```

## PHP 生产者

```
<?php
$GLOBALS['THRIFT_ROOT'] = 'src';
require_once $GLOBALS['THRIFT_ROOT'].'/Thrift.php';
require_once $GLOBALS['THRIFT_ROOT'].'/protocol/TBinarySerializer.php'; // this generates serialized string from our obect
require_once $GLOBALS['THRIFT_ROOT'].'/packages/message/message_types.php'; //from generated thrift sources
//create new message
$message = new Message();
$message->uid = '1';
$message->information = 'Some info';
var_dump($message);

//serialize
$serializer = new TBinarySerializer(); 
$serialized_message = $serializer->serialize($message);
var_dump($serialized_message);

//write to a pipe
if (pcntl_fork() == 0) {
$namedPipe = '/tmp/pipe';
if (! file_exists($namedPipe)) {
   posix_mkfifo($namedPipe, 0600);
}

$fifo = fopen($namedPipe, 'w');

fwrite($fifo, $serialized_message);
exit(0);
}
?> 
```

## Java 消费者

```
 //read from pipe
    FileInputStream fileInputStream = new FileInputStream(new File("/tmp/pipe"));
    int availableBytes = fileInputStream.available();

    byte[] b = new byte[availableBytes]; 
        fileInputStream.read(b , 0, availableBytes);
        //deserialize
    TDeserializer tDeserializer = new TDeserializer();
    Message deserMessage = new Message();
    tDeserializer.deserialize(deserMessage, b);
    System.out.println(deserMessage.getInformation());
    //prints "Some info" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T18:48:34.563

有关Thrift C++ 库的跨平台管道传输，[请参见此处。](https://stackoverflow.com/questions/8129553/thrift-ipc-over-pipes-transport-windows)这应该可以直接移植到其他语言。如果你只需要支持*NIX，你可以使用TSocket已经支持的域套接字。只需将 (name) 而不是 (host, port) 传递给它的构造函数。

# c# - DevExpress - 为选定的单元格应用相同的条件格式

> ID：10608538
> 
> 赞同：2
> 
> 时间：2012-05-15T20:38:37.007
> 
> 标签：c#, devexpress, report, reporting

有没有办法在不指定特定字段的情况下将相同的格式规则应用于多个表格单元格（将可见设置为 false）。只是以某种方式对当前表格单元格的 Eval() 值并相应地应用格式。例如，仅使用一条规则在报告中隐藏所有具有零值 ([] == 0) 的数字单元格:)

![在此处输入图像描述](../Images/d6626fd9f4867cc478c6927431b99a65.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T07:40:00.137

到目前为止的解决方案 -

```
private const string ZeroValue = "0,00";

    public FISaldoAccountReport()
    {
        InitializeComponent();

        RegisterEvents();
    }

    private void RegisterEvents()
    {
        positionAmountDebitCell.BeforePrint += NumCellBeforePrint;
        positionAmountCreditCell.BeforePrint += NumCellBeforePrint;
        positionSaldoCell.BeforePrint += NumCellBeforePrint;

        partnerAmountDebitCell.BeforePrint += NumCellBeforePrint;
        partnerAmountCreditCell.BeforePrint += NumCellBeforePrint;
        partnerSaldoCell.BeforePrint += NumCellBeforePrint;

        accountAmountDebitCell.BeforePrint += NumCellBeforePrint;
        accountAmountCreditCell.BeforePrint += NumCellBeforePrint;
        accountSaldoCell.BeforePrint += NumCellBeforePrint;

        accountSumCell.BeforePrint += NumCellBeforePrint;

        reportAmountDebitCell.BeforePrint += NumCellBeforePrint;
        reportAmountCreditCell.BeforePrint += NumCellBeforePrint;
        reportSaldoCell.BeforePrint += NumCellBeforePrint;
    }

    private static void NumCellBeforePrint(object sender, PrintEventArgs e)
    {
        var currentCell = sender as XRTableCell;
        if (currentCell == null) return;

        currentCell.Visible = !currentCell.Text.Equals(ZeroValue);
    } 
```

# android - 导入 HoloEverywhere 时出错

> ID：10608539
> 
> 赞同：14
> 
> 时间：2012-05-15T20:38:38.150
> 
> 标签：android, themes, actionbarsherlock, android-holo-everywhere

首先，我是安卓新手。我正在做一个应用程序，并且正在实现一个名为[HoloEverywhere](http://holoeverywhere.com/)的库。该库在themes.xml 中使用库ActionBar Sherlock。我已将 ActionBar Sherlock 导入我的工作区，并将其添加到 HoloEverywhere。接下来，我已经将 HoloEverywhere 添加到我的项目中，但是当我尝试使用它时，出现错误（我尝试使用按钮）：

```
The following classes could not be instantiated:
- com.WazaBe.HoloEverywhere.ButtonHolo (Open Class, Show Error Log)
See the Error Log (Window > Show View) for more details.
Tip: Use View.isInEditMode() in your custom views to skip code when shown in Eclipse. 
```

我将类的路径放在我的布局中，如下所示：

```
<com.WazaBe.HoloEverywhere.ButtonHolo
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/text" /> 
```

我如何解决这个问题并在我的项目中使用这个库？谢谢:) PS。对不起我的英语，我知道它不是很好。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-04T21:51:12.333

**请按照以下步骤（取自[此处](http://androidfragments.blogspot.in/2011/10/how-to-use-actionbar-sherlock.html)的博客）添加`ActionBarSherlock`**

1.  [下载](http://actionbarsherlock.com/).zip/.tgz 并解压
2.  去eclipse并选择`File->New-> Android Project`
3.  选择`Create project from existing source`然后`browse`到`library`提取文件夹内的`AndroidBarSherlock`文件夹
4.  构建目标应该是最新的（14 或 15），但您的 minSdkVersion 可以更少（7 或 8）
5.  按`Finish`
6.  右键单击新创建的项目并转到`Properties`.
7.  在`Android`标题下，您应该看到一个`Library`带有复选框的部分`IsLibrary`。确保已检查。
8.  右键单击 -> 在您希望`AndroidBarSherlock` 在`Android`标题下添加的项目上的属性，然后`Library`选择`Add`.
9.  您应该会看到该`ActionBarSherlock`库，将其添加到您的项目中
10.  最后，如果您使用的是*兼容性支持*，则需要删除该*jar* ，因为它包含在 ActionBarSherlock 中。

**按照以下步骤添加[HoloEverywhere](https://github.com/Prototik/HoloEverywhere)**

1.  [从 GitHub下载](https://github.com/Prototik/HoloEverywhere)Zip 到您的计算机
2.  解压文件夹
3.  去eclipse并选择`File->New-> Android Project`
4.  选择`Create project from existing source`然后`browse`到`HoloEverywhereLib`提取文件夹内的文件夹
5.  按`Finish`
6.  右键单击新创建的项目并转到`Properties`.
7.  在`Android`标题下，您应该看到一个`Library`带有复选框的部分`IsLibrary`。确保已选中并按`Add`之前添加的 library `ActionBarSherlock`。

**按照以下步骤添加`HoloEverywhere`到您的项目**

1.  创建一个新的安卓项目
2.  右键单击项目 -> 属性 -> Android -> 添加，同时添加`ActionBarSherlock`和`HoloEverywhere`
3.  更改`Android Manifest`为以下

    `<application android:icon="@drawable/ic_launcher" android:label="@string/app_name" android:theme="@style/Holo.Theme">`

4.  编辑您`main.xml`以包含 Holo 主题小部件。

5.  改变你`activity`如下

    ```
    public class ChkActionBarSherlock extends SherlockActivity {
        @Override
         public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
        }

    } 
    ```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-11T03:06:38.763

It seems that

```
android:theme="@style/Theme.HoloEverywhereDark.Sherlock" 
```

cause an error.

change it:

```
android:theme="@style/Holo.Theme" 
```

resons here:

[Github](https://github.com/Prototik/HoloEverywhere/issues/57)

correct!

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-15T06:40:26.460

我在我的项目中遇到了同样的错误，这就是我所做的，右键单击 HoloEverywhere (properties->android->library) 从列表中删除 ActionBarSherlock 然后通过单击添加重新添加 ActionBarSherlock 项目，然后清理项目，所有错误都会消失。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-03T01:30:10.357

ActionBarSherlock 的创建者 Jake Wharton 在 Google+ 上宣布 ActionBarSherlock 的进一步开发已停止。ActionBarSherlock 4.4 是最后一个版本，可能会修复错误 - 但不会有任何新功能：

> 虽然未来几周可能会发布一两个 dot 版本，但 4.4 版正逐渐成为 The Last Release™。

[https://plus.google.com/+JakeWharton/posts/F3HkWY9J8fK](https://plus.google.com/+JakeWharton/posts/F3HkWY9J8fK)

正如我在[holoeverywhere 问题论坛](https://github.com/Prototik/HoloEverywhere/issues/742)上询问并由开发人员回答的那样：

> HoloEverywhere 自 v2.0 起与 ABS 没有任何依赖关系

因此，您不应再使用 ABS 并从项目中删除该库，并直接将其替换为 holoeverwhere 或使用 Google 支持库中的 ActionbarCompat。

# glassfish-3 - Glassfish v3 聚类

> ID：10608540
> 
> 赞同：1
> 
> 时间：2012-05-15T20:38:39.450
> 
> 标签：glassfish-3, cluster-computing

我尝试通过 Glassfish 集群教程（[1](http://docs.oracle.com/cd/E18930_01/html/821-2432/gkybx.html)、[2](http://javadude.wordpress.com/2011/04/25/glassfish-3-1-clustering-tutorial/)）配置集群，但我仍然无法在远程主机上的集群中创建实例。我认为如果我用插入的命令给你输出会更好，它可能会解释更多：

```
adam@adam-desktop:~/Pulpit/glassfish-3.1.1/bin$ ./asadmin
Use "exit" to exit and "help" for online help.

asadmin> setup-ssh adam-laptop
Successfully connected to adam@adam-laptop using keyfile /home/adam/.ssh/id_rsa
SSH public key authentication is already configured for adam@adam-laptop
Command setup-ssh executed successfully.

asadmin> install-node --installdir /home/adam/Pulpit/glassfish3 adam-laptop
Created installation zip /home/adam/Pulpit/glassfish-3.1.1/bin/glassfish8196347853130742869.zip
Successfully connected to adam@adam-laptop using keyfile /home/adam/.ssh/id_rsa
Copying /home/adam/Pulpit/glassfish-3.1.1/bin/glassfish8196347853130742869.zip (82498155 bytes) to adam-laptop:/home/adam/Pulpit/glassfish3
Installing glassfish8196347853130742869.zip into adam-laptop:/home/adam/Pulpit/glassfish3
Removing adam-laptop:/home/adam/Pulpit/glassfish3/glassfish8196347853130742869.zip
Fixing file permissions of all files under adam-laptop:/home/adam/Pulpit/glassfish3/bin
Command install-node executed successfully.

asadmin> start-domain domain1
Waiting for domain1 to start ........................
Successfully started the domain : domain1
domain  Location: /home/adam/Pulpit/glassfish-3.1.1/glassfish/domains/domain1
Log File: /home/adam/Pulpit/glassfish-3.1.1/glassfish/domains/domain1/logs/server.log
Admin Port: 4848
Command start-domain executed successfully.

asadmin> enable-secure-admin
Command enable-secure-admin executed successfully.

asadmin> restart-domain domain1
Successfully restarted the domain
Command restart-domain executed successfully.

asadmin> create-cluster c1
Command create-cluster executed successfully.

asadmin> create-node-ssh --nodehost adam-laptop --installdir /home/adam/Pulpit/glassfish3 adam-laptop
Command create-node-ssh executed successfully.

asadmin> create-instance --node adam-laptop --cluster c1 i1
Successfully created instance i1 in the DAS configuration, but failed to create the instance files on node adam-laptop (adam-laptop).

Command failed on node adam-laptop (adam-laptop): Could not contact the DAS running at adam-desktop:4848\. This could be because a firewall is blocking the connection back to the DAS or because the DAS host is known by a different name on the instance host adam-laptop. To change the hostname that the DAS uses to identify itself please update the DAS admin HTTP listener address.
Command _create-instance-filesystem failed.

To complete this operation run the following command locally on host adam-laptop from the GlassFish install location /home/adam/Pulpit/glassfish3:

asadmin  --host adam-desktop --port 4848 create-local-instance --node adam-laptop i1
asadmin> 
```

* * *

更新

我肯定会放置主机文件内容和 ping 命令输出，这在 adam-desktop 和 adam-laptop 之间存在连接：

```
 adam@adam-desktop:~$ cat /etc/hosts
  127.0.0.1 localhost
  127.0.1.1 adam-desktop
  192.168.1.101 adam-laptop

  # The following lines are desirable for IPv6 capable hosts
  ::1     ip6-localhost ip6-loopback
  fe00::0 ip6-localnet
  ff00::0 ip6-mcastprefix
  ff02::1 ip6-allnodes
  ff02::2 ip6-allrouters
  adam@adam-desktop:~$ cat /etc/hostname 
  adam-desktop
  adam@adam-desktop:~$ ping adam-laptop
  PING adam-laptop (192.168.1.101) 56(84) bytes of data.
  64 bytes from adam-laptop (192.168.1.101): icmp_req=1 ttl=64 time=0.786 ms
  64 bytes from adam-laptop (192.168.1.101): icmp_req=2 ttl=64 time=0.694 ms
  64 bytes from adam-laptop (192.168.1.101): icmp_req=3 ttl=64 time=0.687 ms 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:03:29.820

域启动后，你能访问`http://localhost:4848`或`http://adam-desktop:4848`在你的浏览器中吗？

如果没有，在 linux glassfish 上需要您正确设置`/etc/hosts`文件，这就是我的大多数此类问题的来源。还要设置适当的网络配置。在 Redhat 上是`/etc/sysconfig/network`，在 Ubuntu 上是`/etc/hostname`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T09:55:09.807

似乎错误是由`/etc/hosts`文件中的条目引起的。

```
127.0.0.1   localhost
127.0.1.1   adam-desktop
192.168.1.101   adam-laptop 
```

改为：

```
127.0.0.1   localhost
127.0.0.1   adam-desktop
192.168.1.101   adam-laptop 
```

有用。我必须在两台机器上进行更改，这意味着 on`adam-desktop`和`adam-laptop`.

# javascript - 可见图像从上到下堆积：有没有办法一次显示？

> ID：10608542
> 
> 赞同：0
> 
> 时间：2012-05-15T20:38:51.573
> 
> 标签：javascript, html, ajax, firefox

我正在使用 javascript 定期替换 .png 图片，该图片将全屏视为网站的唯一内容。无论我如何尝试，在 Firefox 中，加载后（如通过 firebug 所见），新图像总是从上到下绘制。这需要几秒钟。有什么办法可以防止这种情况并一次显示图片吗？

这是我当前的 javascript 代码：

```
function preloadScreenshotPeriodically(){
    var new_screenshot = new Image();
    new_screenshot.src = "screenshot.png?defeat_firefox_caching=" + counter;
    new_screenshot.id = "screenshot";   
    counter = counter + 1;
    new_screenshot.onload = function(){
        loadScreenshot(new_screenshot);
        setTimeout("preloadScreenshotPeriodically();", 5000);
    };
}

function loadScreenshot(new_screenshot){
    document.getElementById("screenshot").parentNode.replaceChild(new_screenshot, document.screenshot);
} 
```

我还尝试使用两张图片，其中一张是隐藏的。然后将图片加载到隐藏的图片中并交换它们。结果相同：/

在另一个版本中，我使用 Ajax 获取图像，加载完成后，更改了 img-tag 的 url。我的希望是，浏览器会识别出图片已经被加载并从浏览器缓存中获取它而不是加载它。但这并没有发生，我最终向服务器发出了两个请求，要求一张图片，并且与我其他尝试一样缓慢地绘制它。

**编辑：** 现在我按照答案1中的建议尝试了它。虽然如果我在加载下一张图片时切换图片（我不想要这个），它工作得很好，但尝试在加载后立即切换它（我want) 会导致一个空白窗口（非常短）和可见的图片加载，如上所述。

这有效：

```
<body>
<style type="text/css">
    #loaderWin { display:block; height:1px; width:1px; overflow:hidden; }
</style>
<div id="imagewin"></div>
<div id="loaderWin"></div>

<script type="text/javascript">
    var screenshotCount=0;
    function showFirstImage() {
        loadNextImage();
    }

    function showNewImage() {
        loadNextImage();
    }

    function nextImageLoaded() {
    //  swapImage();
    }

    function loadNextImage() {
        swapImage();
        screenshotCount = screenshotCount +1;
        var nextImage = "<img id='loaderWinImg'     src='screenshot.png?x="+screenshotCount+"' onload='nextImageLoaded()' />";
        document.getElementById('loaderWin').innerHTML = nextImage;
    }

    function swapImage() {
        document.getElementById("loaderWinImg").onload = '';
        var newimage=document.getElementById('loaderWin').innerHTML;
        document.getElementById('imagewin').innerHTML = newimage;
    }
    var showImages = setInterval("showNewImage()",15000);
    showFirstImage();
</script>

</div>
</body>
</html> 
```

这不起作用：

```
<body>
<style type="text/css">
    #loaderWin { display:block; height:1px; width:1px; overflow:hidden; }
</style>
<div id="imagewin"></div>
<div id="loaderWin"></div>

<script type="text/javascript">
    var screenshotCount=0;
    function showFirstImage() {
        loadNextImage();
    }

    function showNewImage() {
        loadNextImage();
    }

    function nextImageLoaded() {
        swapImage();
    }

    function loadNextImage() {
        screenshotCount = screenshotCount +1;
        var nextImage = "<img id='loaderWinImg'     src='screenshot.png?x="+screenshotCount+"' onload='nextImageLoaded()' />";
        document.getElementById('loaderWin').innerHTML = nextImage;
    }

function swapImage() {
    //  loadNextImage();
        document.getElementById("loaderWinImg").onload = '';
        var newimage=document.getElementById('loaderWin').innerHTML;
        document.getElementById('imagewin').innerHTML = newimage;
    }
    var showImages = setInterval("showNewImage()",15000);
    showFirstImage();
</script>

</div>
</body>
</html> 
```

问题可以在这里看到（在上面描述的 Firefox 问题中，在 chrome 中，图片加载之间没有暂停，图片更改之间有一个空白窗口）：[http://sabine-schneider.silbe.org:1666/test。 html](http://sabine-schneider.silbe.org:1666/test.html)

在这里，Rob 在答案 1 中建议的内容没有任何更改（在 Firefox 中显示图片很好，但在 chrome 中不显示 - 在图片更改之间我得到一个空白窗口）：[http ://sabine-schneider.silbe.org:1666 /test0.html](http://sabine-schneider.silbe.org:1666/test0.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T20:44:54.560

听起来图像是“渐进式的”（隔行扫描），并且预加载需要更多时间才能完成下载。

您还可以为图像设置宽度和高度，以获得更稳定的演示

（可能）

使用

```
 ?defeat_firefox_caching=" + counter; 
```

意味着您永远不会缓存图像（这让我对您的问题感到困惑） - 删除该行（除非您需要它来处理您未提及的事情）

* * *

更新：你可以试试...

* * *

```
 <style type="text/css">
   #loaderWin { display:block; height:1px; width:1px; overflow:hidden; }
 </style>

 <div id="imagewin"></div>

 <div id="loaderWin"></div>

  <script type="text/javascript">

    var screenshotCount=0;
    function showNewImage() {
    screenshotCount = screenshotCount +1;
     var newimage=document.getElementById('loaderWin').innerHTML;
     document.getElementById('imagewin').innerHTML = newimage;

     var nextImage = "<img src='screenshot.png?defeat_firefox_caching="+screenshotCoun+"'/>";
     document.getElementById('loaderWin').innerHTML = nextImage;

    }

    var showImages = setInterval("showNewImage()",5000);
  </script> 
```

# php - Ajax 读取 PHP

> ID：10608543
> 
> 赞同：2
> 
> 时间：2012-05-15T20:38:52.583
> 
> 标签：php, javascript, ajax

我想我已经超越了自己，但我尝试了 AJAX 教程来读取 PHP 文件。PHP 文件只是有一个时间的 echo 语句，我想通过它来初始化一个 javascript 时钟。

但这是我第一次尝试 AJAX，我什至无法让它激活测试警报消息。

这是代码，它位于我的 PHP 页面的底部，位于所有 PHP 之后。

```
<script type='text/javascript'>
function CheckForChange(){
    //alert("4 and 4");
    //if (4 == 1){
        //setInterval("alert('Yup, it is 1')", 5000);

        //alert('Now it is changed');
    //}

    var ajaxReady = new XMLHttpRequest();
    ajaxReady.onreadystatechange = function(){
        if (ajaxReady.readystate == 4){
            //Get the data
            //document.getElementById('clocktxt').innerHTML = ajaxReady.responseText;
            alert("here");
            alert(ajaxReady.responseText);
        }
    }
    ajaxReady.open("GET","ServerTime.php",true);
    ajaxReady.send(null);
}

setInterval("CheckForChange()", 7000);
</script> 
```

有人可以告诉我为什么这不起作用吗？不知道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T21:07:39.690

您的代码中的问题是一个未大写的字母。（哎呀！）你检查`ajaxReady.readystate`; 你需要检查。`ajaxReady.ready**S**tate`

因为`ajaxReady.readystate`将*始终*未定义，所以您的警报永远不会触发。

[这是您的代码已修复且可以正常工作。](http://jsfiddle.net/josh3736/uqvjv/)

* * *

顺便说一句，您是否考虑过使用库来处理跨浏览器 XHR 的丑陋？jQuery 是你的朋友：

```
function CheckForChange(){
    $.get('ServerTime.php', function(data) {
        $('#clocktxt').text(data);
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T20:42:10.257

你可能应该有类似的东西：

```
setInterval(CheckForChange, 7000); 
```

在不相关的注释中，JavaScript 中的常见命名约定是函数和方法名称的第一个字母不大写，其余的都是驼峰式。即`checkForChange()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T20:48:47.393

我不确定您的代码的确切问题；这是我使用的——我相信它对你有用。（另外，它适用于更多浏览器）

```
var xhr = false;
function CheckForChange(){
    /* Create xhr, which is the making of the object to request an external file */
    if(window.XMLHttpRequest){
        xhr = new XMLHttpRequest();
    }else{
        if(window.ActiveXObject){
            try {
                xhr = new ActiveXObject("Microsoft.XMLHTTP");
            }catch(e){}
        }
    }
    /* End creating xhr */

    /* Retrieve external file, and go to a function once its loading state has changed. */
    if(xhr){
        xhr.onreadystatechange = showContents;
        xhr.open("GET", "ServerTime.php", true);
        xhr.send(null);
    }else{
        //XMLHTTPRequest was never created. Can create an alert box if wanted.
    }
    /* End retrieve external file. */

}

function showContents(){
    if(xhr.readyState==4){
        if(xhr.status==200){
            alert(xhr.responseText);
        }else{
            //Error. Can create an alert box if wanted.
        }
    }
}

setInterval(CheckForChange, 7000); 
```

# sleep - 睡眠（挂起）和恢复 Windows 窗体在工作线程而不是主线程上启动程序

> ID：10608551
> 
> 赞同：2
> 
> 时间：2012-05-15T20:39:40.060
> 
> 标签：sleep, resume, suspend, worker-thread, systemevent

我正在处理的 Windows 窗体订阅`Microsoft.Win32.SystemEvents.PowerModeChanged`并在`Suspend`其上运行`Close()`窗体上的方法。在`Resume`它上面运行`Run()`函数，就像在初始加载时一样。问题是，当计算机从睡眠模式唤醒时，PowerModeChanged 事件在名为“.Net SystemEvents”的工作线程上触发，当`Run()`被调用时，它会在该工作线程而不是主线程上重新创建表单。

这个表单是我从另一个开发人员那里继承的一个项目，我是 Windows 表单编程的新手。我想知道是否有更好的方法来处理睡眠/唤醒过程，而不是关闭表单并在唤醒时重新创建它们，或者强制创建到主线程上。注意：如果我删除代码并让它在计算机休眠（挂起）时什么也不做，而在它唤醒（恢复）时什么也不做，那么程序将继续正常工作（在主线程上运行）。任何帮助将不胜感激。谢谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T21:19:42.167

在静态字段中捕获 UI 线程 SynchronizationContext，并`Post()`在其上返回 UI 线程。

# ruby-on-rails - Rails：将博客放在子域上的最简单方法

> ID：10608554
> 
> 赞同：0
> 
> 时间：2012-05-15T20:39:46.480
> 
> 标签：ruby-on-rails, routing, subdomain

我已经在 Rails 中的子域上挖掘了几天，但还没有找到一个很好的解释......

我有一个集成了博客的 Rails 应用程序，我想将该博客放在子域中。IE。`blog.myapp.com`.

现在，在博客中，我希望用户能够查看帖子，`blog.myapp.com/posts/123`. 但是，如果用户要单击站点上的任何其他资源，`videos`例如，我希望它们被重定向回根目录，即。`www.myapp.com/videos/123`. 我不想`blog.myapp.com/videos...`导致路由错误，我只想让它重定向。

基本上，我正在寻找最简单的方法来设置子域并指定某些控制器使用该子域而其他控制器不使用。理想情况下，我什至希望控制器层以两种方式处理重定向，以便在视图中我可以使用诸如`post_path(123)`和之类`video_path(123)`的帮助器来回链接到事物，并且子域将根据哪个控制器提供服务而自动使用或不使用看法。

我尝试将所有控制器放在一个约束块中，即：

```
constraints :subdomain => 'www' do
    resources :sessions
    resources :users
    resources :videos
            root :to => 'home#show'
end

constraints :subdomain => 'nexturb' do
    resources :posts
    root :to => "posts#index"
end
root :to => 'home#show' 
```

但是，这似乎效果不佳，我特别难以在链接之间进行重定向以非常一致地工作。

我很确定其他人过去一定遇到过这个问题，但我似乎找不到书面这种情况的好例子。处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T02:07:42.393

在[here](http://tabfugnic.wordpress.com/2011/09/15/rails-3-routes-namespace-subdomains/)，[here](https://stackoverflow.com/a/7998381/417872)和[here](http://api.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/Scoping.html)的帮助下......我终于想通了：

```
constraints :subdomain => 'blog' do
    scope '', :subdomain => 'blog' do
        resources :posts
    end
    root :to => 'posts#index'
end 
```

这会导致`posts_path`帮助程序正确地将访问者发送到子域。

# gcc - gcc 矢量扩展不能按照文档中的说明工作

> ID：10608555
> 
> 赞同：3
> 
> 时间：2012-05-15T20:39:54.610
> 
> 标签：gcc, sse, vectorization

根据[通过内置函数使用向量指令](http://gcc.gnu.org/onlinedocs/gcc/Vector-Extensions.html)，该程序应编译：

```
int main(){
    double v_sse __attribute__ ((vector_size (16)));

    /*
     * Should work: "For the convenience in C it is allowed to use a binary vector operation where one operand is a scalar."
     */
    v_sse=v_sse+3.4;

    /*
     * Should work: "Vectors can be subscripted as if the vector were an array with the same number of elements and base type."
     */
    double result=v_sse[0];
} 
```

相反，我在两个操作中都遇到错误，抱怨无效的操作数/类型。

我在 x86-64 系统上编译，所以 -msse2 是隐式的，我的编译器是 4.6.3（也用 4.7.0 测试过，它不起作用）。问题在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T00:57:34.450

[http://gcc.gnu.org/onlinedocs/gcc/](http://gcc.gnu.org/onlinedocs/gcc/)上的文档是指当前的开发。

查看 http://gcc.gnu.org/onlinedocs/gcc-XYZ/ 以找到您正在使用的版本的文档（请参阅[http://gcc.gnu.org/onlinedocs/](http://gcc.gnu.org/onlinedocs/)上的索引以获取指向每个系列的最新版本的文档）。

在这种情况下：

*   [4.6.3](http://gcc.gnu.org/onlinedocs/gcc-4.6.3/gcc/Vector-Extensions.html)中没有记录二元运算符功能- 因为它是在 4.7 中作为新功能引入的：请参阅[4.7 发行说明](http://gcc.gnu.org/gcc-4.7/changes.html)；
*   下标功能*出现*在 4.6.3 中；和
*   这两个功能都被专门记录为“在 C 中”工作

...这解释了你所看到的。

当编译为 C 时，这两者都可以与 4.7.0 一起使用——但在编译为 C++ 时则不行。

# c# - 我怎样才能安抚编译器：在 try 块中返回结果？

> ID：10608558
> 
> 赞同：0
> 
> 时间：2012-05-15T20:40:21.230
> 
> 标签：c#, .net, winforms, exception-handling, try-catch

我有这样的代码：

```
try {
    if (!(oc.State == ConnectionState.Open)) {
        oc.Open();
    }
    query = "SELECT DUCKBILL FROM PLATYPUS";
    da = new OracleDataAdapter();
    oCommand = new OracleCommand(query, oc);
    oCommand.Parameters.Add("ABCid", platypusABCID);
    da.SelectCommand = oCommand;
    dt = new OracleDataTable();
    da.Fill(dt);
    return dt;
} catch (OracleException e) {
    log.Error(e, e);
    //return dt; //use of unassigned local variable 'dt'
}
//return dt; //use of unassigned local variable 'dt' 
```

...这阻止了我*“并非所有代码路径都返回值”*或（如评论）*“使用未分配的局部变量'dt'”*

我可以摆脱 try..catch，但由于这是一个数据库操作，我希望能够记录任何产生的 err msg。我怎样才能保持我的异常处理并安抚抱怨？我知道，这是一个仁慈的抱怨，但仍然......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T20:42:00.943

用新表或空预分配它；

```
OracleDataTable dt = null; 
```

或者

```
var dt = new OracleDataTable(); 
```

进而：

```
try
{
    ...
}
catch
{
    ...
}

return dt; // Will return null. 
```

如果为它分配一个新表，它会在出现异常时返回一个空表。

考虑到你的情况，从逻辑上选择你喜欢的那个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T20:42:30.740

我只是重新抛出异常：

```
} catch (OracleException e) {
    log.Error(e, e);
    throw;
} 
```

通常最好让异常冒泡，因为仅仅记录异常就足以让异常真正被“处理”（并允许程序流程愉快地继续而没有任何问题）是不太可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T20:44:00.020

只需将其设置为一个新表，然后在`finally`执行时将其返回到块中，无论是否引发异常。

```
OracleDataTable dt = new OracleDataTable();

try
{
    //your code
}
catch (OracleException ex)
{
    //your code
}
finally
{
    return dt;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T21:03:05.087

我宁愿用异常包装你的数据库异常，这对调用代码有更多价值：

```
try {
    if (!(oc.State == ConnectionState.Open)) {
        oc.Open();
    }
    query = "SELECT DUCKBILL FROM PLATYPUS";
    da = new OracleDataAdapter();
    oCommand = new OracleCommand(query, oc);
    oCommand.Parameters.Add("ABCid", platypusABCID);
    da.SelectCommand = oCommand;
    dt = new OracleDataTable();
    da.Fill(dt);
    return dt;
} catch (OracleException e) {
    throw new MyDataLayerException("Cannot retrieve duckbill", e);   
} 
```

在这种情况下，您的调用代码将不会被强制检查 的返回值`null`，并且在发生异常时，您将在堆栈中将其记录一次，并包含所有上下文信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T21:07:50.730

编译器在抱怨“并非所有代码路径都返回值”方面显然是正确的。非`void`方法需要（a）返回一个值，或者（b）抛出一个异常。

当数据库操作失败时，您的代码当前不会：您正在捕获异常，但您既没有将其重新抛出给调用者，也没有从`catch`块内返回值。

**如果出现错误情况，您的方法应该返回什么？**

*你*必须决定这一点。没有人能告诉你正确*的*答案，因为有很多明智的解决方案。例如：

*   它应该返回`null`吗？

    如果是这样，在您记录错误之后，`return null;`从块内部。`catch`

*   它应该返回一个空表吗？

    然后`return new OracleDataTable();`从`catch`块内。

*   或者，也许，它应该什么都不返回？

    然后`throw;`在你记录后重新捕获块内的异常。

（这可能有助于清楚地定义您的方法的合同，例如考虑您的方法对调用代码做出什么样的保证。）

# apache - 我希望 Apache 只在我指定的地址上监听端口 80。我可以吗？

> ID：10608564
> 
> 赞同：0
> 
> 时间：2012-05-15T20:40:53.013
> 
> 标签：apache, http, node.js

我有一堆域指向一个 IP 地址（我觉得这将是阻止它工作的主要因素），其中一个我想指向端口 80 上的 node.js 服务器，而不必费心关于 Apache 中的代理。

我已经在 apache 中删除了 *:80 的虚拟主机（每次我重新启动它时都会警告我）。

当我要求节点收听 domain.one:80 时（只是一个例子，不是我真正使用的），它不起作用 - 它告诉我地址​​正在使用中，即使 domain.one 没有 VirtualHost :80。

我怀疑这与 domain.one 和 domain.two 都指向同一个 IP 的事实有关，对吧？如果没有，我该怎么办？谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T05:56:11.630

端口直接绑定到 IP 地址。每个 IP 地址只能有一个进程监听给定端口。由于您的域名都解析为相同的 IP 地址，因此您不能为每个侦听端口 80 的节点设置单独的节点进程。

如果您希望保留此方案，则需要让每个节点服务器侦听不同的端口并在 Apache 中配置反向代理，如此处[所述](https://serverfault.com/questions/201196/apache-port-redirect)。您也可以考虑使用[nginx](http://nginx.org/)，因为它也具有此功能（配置略有不同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T20:46:09.930

是的。您可以在虚拟主机中指定服务器名称。那么你只能在标签中指定一个 IP 或 *。创建一个 *:80 Vhost 并添加

```
<VirtualHost *:80>

     ServerName domain.one
     DocumentRoot /blah/blah
     ....
 </VirtualHost> 
```

给它。这将按域名过滤。

# search - Solr SnowballPorterFilterFactory 用于索引和查询分析器

> ID：10608566
> 
> 赞同：0
> 
> 时间：2012-05-15T20:40:54.933
> 
> 标签：search, solr, snowball, snowballanalyzer

我将**SnowballPorterFilterFactory**用于索引和查询分析器。当我搜索“专业”这个词时。Solr 成功只找到包含“专业”的文章，但我想要“专业”“专业”...

**这是schema.xml**上的当前配置

 **```
<fieldType name="text" class="solr.TextField" positionIncrementGap="100">
    <analyzer type="index">
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="1" splitOnCaseChange="1"/>
        <filter class="solr.ASCIIFoldingFilterFactory" />
        <filter class="solr.SnowballPorterFilterFactory" language="French"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>

    </analyzer>
    <analyzer type="query">
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="0" generateNumberParts="0" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="0"/>
        <filter class="solr.ASCIIFoldingFilterFactory" />
        <filter class="solr.SnowballPorterFilterFactory" language="French"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
    </analyzer>
</fieldType> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T22:28:04.933

正在发生的事情是搬运工过度使用您的查询。当您搜索关键字时，`profession`您的关键字会被归结为`profess`，而`profession` `professional`和`professionalism` 都存储在索引中`profession`。

您要解决此问题的唯一真正方法是`fieldType`在不阻止查询的地方添加另一个。

就像是：

```
<fieldType name="text_unstemmed_query" class="solr.TextField" positionIncrementGap="100">
    <analyzer type="index">
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="1" splitOnCaseChange="1"/>
        <filter class="solr.ASCIIFoldingFilterFactory" />
        <filter class="solr.SnowballPorterFilterFactory" language="French"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
    </analyzer>
    <analyzer type="query">
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="0" generateNumberParts="0" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="0"/>
        <filter class="solr.ASCIIFoldingFilterFactory" />
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
    </analyzer>
</fieldType> 
```

使用如下复制字段：

`<copyField source="your_text_field" dest="text_unstem_query_field"/>`**

# javascript - 使用 jQuery UI 和 RequireJs 时如何防止用户看到“丑陋”的 HTML 前体？

> ID：10608575
> 
> 赞同：4
> 
> 时间：2012-05-15T20:41:20.147
> 
> 标签：javascript, jquery-ui, requirejs

我正在尝试调整 jquery-ui 代码库以使用 RequireJs，并且我将其部署在比我之前使用的专用主机慢得多（但可扩展）的虚拟化云服务上。

默认情况下，我的页面是原生 HTML 的丑陋灾难。唯一让这种混乱变得生动的是对 JavaScript 函数的调用，它为它提供了适当的选项卡控件和布局。事实上，页面是长而垂直的......一个接一个的部分......在我调用将`.tabs()`它们折叠成一个带有水平控件的单个单元的函数之前。

*（相当有信心我在 jQuery UI 思维方式中“做对了”。通过不通过代码构建整个 UI，至少可以在禁用 JavaScript 的情况下**查看**它。虽然我怀疑是否有人仍在使用[Lynx](http://en.wikipedia.org/wiki/Lynx_(web_browser))，但是可访问性的问题...或确保您的内容可被搜索引擎分析。我会省去我的老人演讲，关于这是实现内容/UI分离的荒谬方式。:-/)*

当我使用`<script>`标签来加载我的 3rd 方库依赖项并`$(document).ready`运行 jQuery UI voodoo 时，用户从未见过原始丑陋的 HTML。现在我正在使用 RequireJs，`page.js`文件滞后并在 HTML*之后*异步加载......等待 DOMready 处理并不真正需要的库。较慢的服务器使这看起来非常糟糕。

我当然可以在一开始就使用 CSS 样式来隐藏丑陋，然后在 UI 准备好之前用“正在加载...”图形覆盖。这是首先想到的，这里建议使用类似的方法：

[jQuery UI 界面在 document.ready 之前看起来很难看](https://stackoverflow.com/questions/4575965/jquery-ui-interface-looks-ugly-before-document-ready)

*（注意：这似乎是一个常见的问题，我几乎认为会有一个 RequireJs 插件继续执行此操作。有吗？）*

无论如何，我之前似乎不必担心这个......我想知道我是否错过了一些更简单的解决方案。如果您使用 RequireJs，如何防止用户看到“丑陋”的 HTML？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T20:53:23.810

我同意你应该做一些 CSS 魔法，然后在 RequireJs 的“开始”脚本中隐藏它。您还应该考虑 SEO 影响和 JavaScript 禁用方案。

请记住，归根结底，它只是 HTML、CSS 和 JavaScript。无论您使用什么模板/代码生成系统来实现目标，归根结底，它只是 HTML 内容、CSS 样式和 JavaScript 动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T21:05:33.107

我认为使用[node-browserify](https://github.com/substack/node-browserify)之类的东西来执行所有 Javascript 模块`require`然后将单个 JS 文件流式传输给最终用户更有意义。

当客户端显然不打算在离线模式下运行时，为什么要通过所有 TCP 握手和 HTTP 标头以低得多的性能获得相同的东西？

> 嘿，医生，我这样做的时候*很痛*。
> 
> 好吧，那就不要那样做！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T08:46:58.550

我对 Jquery Mobile 和 RequireJS 有同样的问题。

我首先尝试遵循[这个](https://forum.jquery.com/topic/requirejs-and-jquerymobile)提示并通过添加 CSS 来隐藏“丑陋的 HTML”：

```
.requireJS-init { visibility: hidden;}
.requireJS-init.done { visibility: visible;} 
```

并在页面启动时分配 .requireJS **-init**并在所有内容加载**完成后**通过添加另一个类将其删除（我猜你也可以删除初始类）。

但是，这会导致两个问题：
1\. 用户可能会在一段时间内出现空白页，具体取决于您正在加载的内容
2\. IE8 失败，因为（在我的情况下）Jquery Mobile 试图在元素仍处于隐藏状态时专注于这些元素。

我尝试将类表单 HTML 移动到 BODY 到包含页面内容的元素，但没有任何效果。

一个更简单的纯 CSS 解决方案是：

```
.ui-mobile-rendering:before { 
    width: 100%; 
    position: absolute; 
    top: 0; 
    bottom: 0;         
    left: 0; 
    right: 0; 
    display: block; 
    height: 100%; 
    z-index: 0; 
    background:#fff url(../images/ajax-loader.gif) no-repeat center center; 
    content: "" 
    } 
```

The **ui-mobile-rendering** class is on the body while JQM does it's widget enhnacements. Once the page is done, the class is removed. By adding a fullscreen *:before* - in this case with the JQM loader as background image - you hide everything on the page until it's rendered. No need for visibility:hidden, IE8 doesn't complain (thank good, IE8 and FF3.6 know :before).

# android - AIR/Android NFC 标签正在打开浏览器

> ID：10608576
> 
> 赞同：2
> 
> 时间：2012-05-15T20:41:21.880
> 
> 标签：android, flash, air, nfc

我正在使用 Nexus S 测试支持 NFC 的 Android/AIR 应用程序。

我的 NFC 标签上有一个示例 url，例如“http://www.google.com”。

我想捕获标签上的 url（或任何文本）以在应用程序中使用。

当标签被点击时，手机会在浏览器中打开 URL。

我想知道我的清单中是否缺少某些东西，或者链接是否总是由浏览器处理。我查看了[文档](http://developer.android.com/guide/topics/nfc/nfc.html)，甚至为特定 URL 添加了一个方案，但仍然没有运气。

我的清单如下。感谢您的任何意见。

```
<manifest android:installLocation="auto">
    <uses-permission android:name="android.permission.NFC"/>
    <uses-permission android:name="android.permission.INTERNET"/>

    <uses-feature android:name="android.hardware.nfc" android:required="true"/>

    <application android:debuggable="true">
        <activity>
            <intent-filter>
                <action android:name="android.nfc.action.NDEF_DISCOVERED"/>                 
                <data android:mimeType="text/plain" />
                <category android:name="android.intent.category.DEFAULT"/>
            </intent-filter>

            <intent-filter>
                <action android:name="android.nfc.action.TAG_DISCOVERED"/>                  
                <data android:mimeType="text/plain" />
                <category android:name="android.intent.category.DEFAULT"/>
            </intent-filter>

            <intent-filter> 
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T23:11:12.280

NFC 标签上的 URL 与 NFC 标签上的纯文本消息不同。它们有不同的消息类型。您的清单为纯文本消息列出了 2 个意图过滤器（最后一个永远不会被实际触发， TAG_DISCOVERED 意图永远不会包含来自标签的任何数据）。为了匹配您的示例 URL，请尝试：

```
<intent-filter>
  <action android:name="android.nfc.action.NDEF_DISCOVERED"/>                 
  <data android:scheme="http" android:host="www.google.com" />
  <category android:name="android.intent.category.DEFAULT"/>
</intent-filter> 
```

另请参阅[http://developer.android.com/guide/topics/nfc/nfc.html#ndef-disc](http://developer.android.com/guide/topics/nfc/nfc.html#ndef-disc)以获得更详细的解释`NDEF_DISCOVERED`和[http://developer.android.com/guide/topics/manifest/data- element.html](http://developer.android.com/guide/topics/manifest/data-element.html)用于完整记录元素中可以包含的`<data>`内容。

# php - simplexml 给出致命错误：在第 136 行和第 156 行注释掉时调用非对象上的成员函数 attributes()

> ID：10608577
> 
> 赞同：1
> 
> 时间：2012-05-15T20:41:22.680
> 
> 标签：php, xml, svg

使用我的代码，我试图从 xml（以前是 svg）文件中获取路径数据，虽然我能够通过 $attributes 数组成功打印出数据，但使用 echo 它仍然会调用“对成员的调用在（第 136 行和第 156 行）中的非对象上的函数 attributes() 我根本看不出代码有什么问题，尽管在最坏的情况下，我总是可以使用 hack 将所选数据插入到数据库中while循环并在迭代时转发到所需的页面...我想知道我的代码到底有什么问题。它使用回显命令回显出正确的信息。它仍然在非对象错误上调用成员函数

```
while($number_of_array_path >=1)
{
//declares attributes based on path number for sodipodi attributes line136
$attributes = $xml_file_open->g->path[$path_incremental_counter]-
>attributes('sodipodi', true); 

//sets each attribute within an array and uses the path incremental counter for 
//that pourpose.
$type_array[$path_incremental_counter] = $attributes['type'];
$cx_array[$path_incremental_counter] = $attributes['cx'];
$cy_array[$path_incremental_counter] = $attributes['cy'];
$rx_array[$path_incremental_counter] = $attributes['rx'];
$ry_array[$path_incremental_counter] = $attributes['ry'];
echo $type_array[$path_incremental_counter];
echo "<br/>";                               
echo $cx_array[$path_incremental_counter];
echo "<br/>";                               
echo $cy_array[$path_incremental_counter];
echo "<br/>";
echo $rx_array[$path_incremental_counter];
echo "<br/>";
echo $ry_array[$path_incremental_counter];
echo "<br/>";                               

//same as above but for non"sodipodi" attributes. line 156
$attributes = $xml_file_open->g->path[$path_incremental_counter]->attributes();
// echo $attributes['id'];  
$style_array[$path_incremental_counter] = $attributes['style'];
$id_array[$path_incremental_counter] = $attributes['id'];
$d_array[$path_incremental_counter] = $attributes['d'];
echo $style_array[$path_incremental_counter];
echo "<br/>";
echo $id_array[$path_incremental_counter];
echo "<br/>";
echo $d_array[$path_incremental_counter];
echo "<br/>";

//increments path incremental counter
$path_incremental_counter = $path_incremental_counter + 1;
//decrements number of array path
$number_of_array_path = $number_of_array_path;                                                              
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T05:33:03.707

```
foreach($xml_file_open->g->path[$shape_path_iteration_counter]->attributes() 
as $attribute => $value) 
```

对于非 sodipodi 元素

```
foreach($xml_file_open->g->path[$shape_path_iteration_counter]->
attributes('sodipodi', true) as $attribute => $value) 
```

对于 sodipodi 元素。

# xslt - 当应用模板不匹配时，我想调用命名模板

> ID：10608579
> 
> 赞同：2
> 
> 时间：2012-05-15T20:41:38.973
> 
> 标签：xslt

这是我在生成 XSL-FO 的更复杂的 XSLT 1.0 样式表中遇到的匹配问题的一个简单示例。

给定这个输入 XML，其中`<Library>`可能包含零个或多个`<Item>`节点，

```
<Library>
  <Item type="magazine" title="Rum"/>
  <Item type="book" title="Foo" author="Bar"/>
  <Item type="book" title="Fib" author="Fub"/>
  <Item type="magazine" title="Baz"/>
</Library> 
```

而这个 XSLT：

```
<xsl:template match="Library">
  <xsl:apply-templates select="Item[@type='Magazine']/>
  <!-- How to call "NoMagazines" from here? -->
  <xsl:apply-templates select="Item[@type='Book']/>
  <!-- How to call "NoBooks" from here? -->
</xsl:template>

<xsl:template match="Item[@type='book']">
  <!-- do something with books -->
</xsl:template>

<xsl:template match="Item[@type='magazine']">
  <!-- do something with magazines -->
</xsl:template>

<!-- how to call this template? -->
<xsl:template name="NoBooks">
  Sorry, No Books!
</xsl:template>

<!-- how to call this template? -->
<xsl:template name="NoMagazines">
  Sorry, No Magazines!
</xsl:template> 
```

我想制作替代品“对不起，不[无论如何]！” `Library`当没有`Item`类型 [whatever] 的节点时来自模板的消息。

到目前为止，我所做的唯一（丑陋）解决方案是按类型选择子节点到变量中，测试变量，然后如果变量包含节点，则应用模板，或者调用适当的“不匹配”命名模板，如果变量为空（我假设 test="$foo" 如果没有选择节点，将返回 false，我还没有尝试过）：

```
<xsl:template match="Library">
  <xsl:variable name="books" select="Items[@type='book']"/>

  <xsl:choose>
    <xsl:when test="$books">
      <xsl:apply-templates select="$books"/>
    </xsl:when>
    <xsl:otherwise>
      <xsl:call-template name="NoBooks"/>
    </xsl:otherwise>
  </xsl:choose>

  <xsl:variable name="magazines" select="Items[@type='magazine']"/>

  <xsl:choose>
    <xsl:when test="$magazines">
      <xsl:apply-templates select="$magazines"/>
    </xsl:when>
    <xsl:otherwise>
      <xsl:call-template name="NoMagazines"/>
    </xsl:otherwise>
  </xsl:choose>

</xsl:template> 
```

我认为这一定是一种 XSLT 设计模式（在 GoF 意义上），但我在网上找不到任何示例。非常欢迎任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T21:28:21.013

下面的解决方案更简洁，但原理相同。它使用该`count()`函数来确定杂志项目是否存在，如果不存在，则调用`NoMagazines`模板。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:template match="Library">
        <library>

            <!-- magazines -->
            <xsl:apply-templates select="Item[@type='magazine']"/>
            <xsl:if test="count(Item[@type='magazine']) = 0">
                <xsl:call-template name="NoMagazines"/>
            </xsl:if>

            <!-- books -->
            <!-- ... -->

        </library>      
    </xsl:template>

    <xsl:template match="Item[@type='magazine']">
        <magazine>...</magazine>
    </xsl:template>

    <xsl:template name="NoMagazines">
        <noMagazines/>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T02:34:16.267

**我会这样**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:my="my:my"
>
 <xsl:output method="text"/>

 <my:errorObjects>
  <noBook>No Books</noBook>
  <noMagazine>No Magazines</noMagazine>
 </my:errorObjects>

 <xsl:variable name="vErrorObjects" select=
  "document('')/*/my:errorObjects"/>

 <xsl:template match="/*">
  <xsl:apply-templates select=
  "*[@type='magazine']
  | $vErrorObjects[not(current()[*[@type='magazine']])]/noMagazine"/>

  <xsl:apply-templates select=
  "*[@type='book']
  | $vErrorObjects[not(current()[*[@type='book']])]/noBook"/>
 </xsl:template>

 <xsl:template match="Item">
  <xsl:value-of select="concat('&#xA;Type: ', @type, ', title: ', @title)"/>
 </xsl:template>

 <xsl:template match="my:errorObjects/*">
  Sorry: <xsl:value-of select="."/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<Library>
    <Item type="magazine" title="Rum"/>
    <Item type="book" title="Foo" author="Bar"/>
    <Item type="book" title="Fib" author="Fub"/>
    <Item type="magazine" title="Baz"/>
</Library> 
```

**产生了想要的（正常）结果**：

```
Type: magazine, title: Rum
Type: magazine, title: Baz
Type: book, title: Foo
Type: book, title: Fib 
```

**当转换应用于以下 XML 文档（无杂志）时：**

```
<Library>
    <Item type="XXXXX" title="Rum"/>
    <Item type="book" title="Foo" author="Bar"/>
    <Item type="book" title="Fib" author="Fub"/>
    <Item type="YYYYY" title="Baz"/>
</Library> 
```

**再次产生正确的结果（杂志的错误消息，书籍的正常结果）：**

```
 Sorry: No Magazines
Type: book, title: Foo
Type: book, title: Fib 
```

**类似地，当没有书籍或两种物品都缺失时，我们会得到想要的结果**。

**请注意**：

1.  **简单**（没有模式，没有明确的条件指令）。

2.  **模板的最小数量**（只是一个单一的错误处理模板，不管可能的不同错误类型的数量）。

3.  **`<xsl:apply-templates>`对于给定类型的处理只有一个**——不需要特殊的附加`<xsl:apply-templates>`错误处理。

4.  **灵活性、可扩展性、可维护性**——它们`errorObjects`可以驻留在它们自己的单独文件中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-16T07:21:41.850

也许像这样，作为 Dimitre 解决方案的一种变体：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:my="my:my"
>
 <xsl:output method="text"/>

 <my:errorObjects>
  <noItem type="book">No Books</noItem>
  <noItem type="magazine">No Magazines</noItem>
 </my:errorObjects>

 <xsl:variable name="vErrorObjects" select=
  "document('')/*/my:errorObjects"/>

 <xsl:template match="/*">
  <xsl:apply-templates select="(.|$vErrorObjects)/*[@type='magazine']/>   
  <xsl:apply-templates select="(.|$vErrorObjects)/*[@type='book']"/>
 </xsl:template>

 <xsl:template match="Item">
  <xsl:value-of select="concat('&#xA;Type: ', @type, ', title: ', @title)"/>
 </xsl:template>

 <xsl:template match="noItem">
  <xsl:if test="last() = 1">
    Sorry: <xsl:value-of select="."/>
  </xsl:if>
 </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-15T23:41:29.997

为什么不使用明确匹配“没有杂志”和“没有书籍”的模板：

```
<?xml version='1.0'?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="Library">
  <xsl:apply-templates select="Item" />
  <!-- Apply no[books|magazines] from here -->
  <xsl:apply-templates select="." mode="noresults" />
</xsl:template>

<xsl:template match="Item[@type='book']">
  <!-- do something with books -->
</xsl:template>

<xsl:template match="Item[@type='magazine']">
  <!-- do something with magazines -->
</xsl:template>

<xsl:template match="Library[not(Item[@type='book'])]" mode="noresults" >
  Sorry, No Books!
</xsl:template>

<xsl:template match="Library[not(Item[@type='magazine'])]" mode="noresults" >
  Sorry, No Magazines!
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-16T15:36:36.837

这并不是一个真正的原创想法。这只是对迈克尔解决方案的一个调整。对于 XSLT 1.0，document() 函数似乎有点问题，所以我试图避免它。

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:msxsl="urn:schemas-microsoft-com:xslt">
 <xsl:output method="text"/>

 <xsl:variable name="vErrorObjects">
  <Books/><Magazines/>
 </xsl:variable>

 <xsl:template match="/Library">
  <xsl:apply-templates select="*[@type='magazine'],$vErrorObjects/Magazines"/>   
  <xsl:apply-templates select="*[@type='book'    ],$vErrorObjects/Books"    />
 </xsl:template>

 <xsl:template match="Item">
  <xsl:value-of select="concat('&#xA;Type: ', @type, ', title: ', @title)"/>
 </xsl:template>

 <xsl:template match="Magazines|Books">
  <xsl:if test="last() = 1">
    Sorry: No <xsl:value-of select="local-name()"/>
  </xsl:if>
 </xsl:template>

</xsl:stylesheet> 
```

# html - 在保持纵横比的情况下部分图像的缩略图

> ID：10608594
> 
> 赞同：0
> 
> 时间：2012-05-15T20:42:34.273
> 
> 标签：html, css, image, thumbnails

我正在尝试从一些图像中创建缩略图，每个图像的大小不一定相同。

这是我当前代码的**[小提琴](http://jsfiddle.net/scgCN/)**。我在其他一些网站上读过，甚至在这里我只需要设置图像类的宽度和高度，然后应用 overflow:hidden 属性，但这似乎不起作用。它仍在改变图像的纵横比。我知道我可以简单地删除 height 或 width 属性，但我真的只想制作 100x100 的图像裁剪。我尝试了 clip:rect() 但无法弄清楚如何使其工作。理想情况下，我想从全尺寸图像的中心裁剪 100x100，但是使用剪辑，如果我的图像尺寸不完全相同，我认为我无法做到这一点。

```
.thumbnail {
    overflow:hidden;
    width:100px;
    height:100px;
    padding:10px;
    margin-left:10px;
    margin-right:10px;
    margin-top:10px;
    margin-bottom:10px;
    border:10px solid #EEEEEE;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T20:55:13.137

使用 css 和 html：

**第一个解决方案：**

**html:**

```
<div class="imageFrame">
    <img src="your_path" alt="thumb"  />
</div> 
```

**CSS：**

```
.imageFrame {
    overflow:hidden;
    width:100px;
    height:100px;
    padding:10px;
    margin-left:10px;
    margin-right:10px;
    margin-top:10px;
    margin-bottom:10px;
    border:10px solid #EEEEEE;
    position:relative;
}

.imageFrame img{
    position: absolute;
    top:50%;
    left:50%;
    margin-left: -50px;
    margin-top: -50px;
    display: block;
} 
```

**第二种解决方案：**

在这里，您将不得不使用一些 JS 将图像 url 路径动态添加到`<div class="imageFrame"`.

**html**：

```
<div class="imageFrame" style="background-image: url('your_path');"></div> 
```

**CSS**：

```
.imageFrame {
    overflow:hidden;
    width:100px;
    height:100px;
    padding:10px;
    margin-left:10px;
    margin-right:10px;
    margin-top:10px;
    margin-bottom:10px;
    border:10px solid #EEEEEE;
    position:relative;
    background-repeat: no-repeat;
    background-position: center center;
} 
```

# php - 撇号php问题

> ID：10608595
> 
> 赞同：2
> 
> 时间：2012-05-15T20:42:37.447
> 
> 标签：php, apostrophe

我正在做一个涉及一个喊话箱的学校作业。一个使用 jquery、ajax、mysql 和 php 的很棒的教程。现在我遇到了以下句子的一个小问题：

```
$result .= "<li><strong>".$row['user']."</strong><img src="\" alt="\"-\""    />".$row['message']." <span class="\"date\"">".$row['date']."</span></li>";} 
```

我想知道是否有人能找出它为什么会出错。到目前为止，我得出了这个结论`$row['message']`，然后它将其余代码视为字符串。所以这可能是一个撇号问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T20:47:34.070

只是为了让您的生活更轻松：`'`用于 php 和`"`html，如下所示：

```
$result .= '<li><strong>'.$row['user'].'</strong><img src="" alt=""/>'.$row['message'].' <span class="date">'.$row['date'].'</span></li>'; 
```

很确定你应该明白这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T20:46:19.593

```
$result .= "<li><strong>{$row['user']}</strong><img src='http://www.' alt='My Alt Tag' />{$row['message']}<span class='date'>{$row['date']}</span></li>"; 
```

进出引号会让您感到困惑 - 您可以用 {} 包装变量以在这种情况下强制插值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T20:50:00.123

看来您正试图逃避引号并使您的工作更加困难。PHP 中用于 HTML 输出的一个很棒的特性是使用带引号的字符串，这样您就不必担心转义双引号。请参考[字符串的 PHP 手册](http://us3.php.net/manual/en/language.types.string.php)。

换句话说，你的行变成：

```
 $result .= '<li><strong>' . $row['user'] . '</strong><img src="" alt="-" />' . $row['message'] .
            '<span class="date">' . $row['date'] . '</span></li>' .
            '<li><strong>' . $row['user'] . '</strong><img src="" alt="-" />' . $row['message'] . 
            '<span class="date">' . $row['date'] . '</span></li>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T20:48:18.510

```
$result .= "<li><strong>".$row['user']."</strong><img src='' alt='-'/>".$row['message']." <span class='date'>".$row['date']."</span></li>";} 
```

避免在字符串中使用 " - 很容易忘记转义特殊字符。而不是 " use '。此外 - 只有在此字符串中需要进行任何 PHP 解析时才使用 "。例如

```
$var1 = 1;
$test = "$var1"; //evaluates to '1'
$test = '$var1'; //evaluates to '$var1' 
```

# objective-c - 我正在初始化两个 NSArray。为什么一个工作而另一个失败？

> ID：10608596
> 
> 赞同：0
> 
> 时间：2012-05-15T20:42:45.390
> 
> 标签：objective-c, ios5, xcode4.3

我正在尝试使用以下代码初始化两个 NSArray

```
self.fillingTypes = [[NSArray alloc] initWithObjects:@"Ham",@"Turkey",@"Peanut Butter", @"Tuna Salad",@"Roast Beef",@"Vegemite", nil];

self.breadTypes = [[NSArray alloc] initWithObjects:@"White",@"Whole Wheat", @"Rye", "@Sourdough", @"Seven Grain", nil];` 
```

fillTypes 数组有效，但 breadTypes 数组崩溃并发送`EXC_BAD_ACCESS`错误。当我逐步浏览它时，breadTypes 数组显示“变量不是 CFArray”。为什么一个阵列工作而另一个阵列失败？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T20:51:08.287

问题是你在那里“@Sourdough”而不是@“Sourdough”，就像评论说的那样会产生警告并且会使程序崩溃..该行应该是

```
self.breadTypes = [[NSArray alloc] initWithObjects:@"White",@"Whole Wheat", @"Rye", @"Sourdough", @"Seven Grain", nil]; 
```

# ios - 在 UIImageView 中为视网膜和普通屏幕使用一个图像 png 文件

> ID：10608600
> 
> 赞同：0
> 
> 时间：2012-05-15T20:43:01.207
> 
> 标签：ios, uiimageview, retina-display

假设有尺寸为 200 X 100 像素的cool.png 文件，我想将它用于视网膜和普通设备。我需要获得 UIImageView 100 X 50 点的大小。

我试图根据图像尺寸减小 UIImageView 的大小，并且在视觉上我看不出我是否准备两个带有和不带有缩放修饰符 @2x 的文件或使用 UIImageView 通过 contentMode 属性对其进行缩放。

```
BOOL retina = [[UIScreen mainScreen] scale] == 2.0 ? YES : NO;

UIImage *img = [UIImage imageNamed:@"cool.png"];

UIImageView *imgView = [[UIImageView alloc] initWithImage:img];
imgView.contentMode = UIViewContentModeScaleToFill;

CGFloat width = img.size.width;
CGFloat height = img.size.height;

if (!retina) {
   width = width/2.0;
   height = height/2.0;     
}

imgView.frame = CGRectMake (somePoint.x, somePoint.y, width, height); 
```

方法有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T21:07:29.730

你在这里采取了错误的方法..

CGRect、Point 和 Size 不是以像素为单位测量的.. 它们是点.. 点是 iOS 坐标系，将缩放到设备...因此，例如，如果您将 UIView 设为 320 点宽，那么它将填充宽度在视网膜 iPhone 或 iPad 上...

因此，如果您希望您的 cool.png 在所有设备上以 100x50 点显示，那么您可以简单地将框架设置为 100x50，将图像设置为 cool.png，然后将 imgView.contentView 设置为 UIViewContentModeScaleAspectFit... 这将重新缩放200x100 图像以适合其非视网膜设备...然后，如果它是视网膜设备，它将处于全分辨率（200x100）但在 100x50 点...

然而，@2x 系统的制作是有原因的，因为必须缩小图像会增加加载时间，因为它必须被缩放，但如果你不能使用@2x 图像，那么你仍然可以执行上述操作

# multithreading - 在 Windows 上等待 Network.Socket.accept 的 Haskell 或 Haskell OS 线程能否被杀死？

> ID：10608602
> 
> 赞同：9
> 
> 时间：2012-05-15T20:43:03.093
> 
> 标签：multithreading, exception, networking, haskell, asynchronous

```
-- thread A
t <- forkIO $ do
   _ <- accept listener -- blocks 
```

* * *

```
-- thread B
killThread t 
```

* * *

适用于 Linux（可能也适用于 OS X 和 FreeBSD）但不适用于 Windows（尝试使用 +RTS -N4 -RTS 等进行线程化）。

*   `A`在这种情况下终止线程的正确方法是什么？
*   有没有办法以`A`特殊模式分叉线程，允许在它阻塞的点终止`accept`？
*   如果与而不是`A`分叉会有帮助吗？`forkOS``forkIO`

*[只有在收到错误报告](https://github.com/corsis/PortFusion/issues/1)提醒时，我才注意到这种异常的 Windows 行为。*

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-15T21:16:33.597

有趣的问题！

你不能中断阻塞的外部调用，所以我有点惊讶你能够中断 Linux 上的线程。此外，`forkOS`也无济于事——这只是让外部代码分配线程本地存储，但与阻塞行为无关。但请记住，accept 可以设置为非阻塞：

> 如果队列中没有挂起的连接，并且套接字没有被标记为非阻塞，accept() 会阻塞调用者，直到连接出现。如果套接字被标记为非阻塞并且队列中没有挂起的连接，accept() 将失败并返回 EAGAIN 或 EWOULDBLOCK 错误。

[这是在 Posix 系统的网络库中](http://hackage.haskell.org/packages/archive/network/2.3.0.13/doc/html/src/Network-Socket.html#accept)所做的。这然后允许`accept`被中断。

关于 Windows 的一个有趣的注释：

```
-- On Windows, our sockets are not put in non-blocking mode (non-blocking
-- is not supported for regular file descriptors on Windows, and it would
-- be a pain to support it only for sockets).  So there are two cases:
--
--  - the threaded RTS uses safe calls for socket operations to get
--    non-blocking I/O, just like the rest of the I/O library
--
--  - with the non-threaded RTS, only some operations on sockets will be
--    non-blocking.  Reads and writes go through the normal async I/O
--    system.  accept() uses asyncDoProc so is non-blocking.  A handful
--    of others (recvFrom, sendFd, recvFd) will block all threads - if this
--    is a problem, -threaded is the workaround. 
```

现在，在 Windows 上接受 -thread 运行时，使用 accept_safe （允许其他线程取得进展）——但它不会将套接字置于非阻塞模式：

```
accept sock@(MkSocket s family stype protocol status) = do
 currentStatus <- readMVar status
 okay <- sIsAcceptable sock
 if not okay
   then
     ioError (userError ("accept: can't perform accept on socket (" ++ (show (family,stype,protocol)) ++") in status " ++
     show currentStatus))
   else do
     let sz = sizeOfSockAddrByFamily family
     allocaBytes sz $ \ sockaddr -> do

#if defined(mingw32_HOST_OS) && defined(__GLASGOW_HASKELL__)
     new_sock <-
    if threaded
       then with (fromIntegral sz) $ \ ptr_len ->
          throwErrnoIfMinus1Retry "Network.Socket.accept" $
            c_accept_safe s sockaddr ptr_len
       else do
            paramData <- c_newAcceptParams s (fromIntegral sz) sockaddr
            rc        <- asyncDoProc c_acceptDoProc paramData
            new_sock  <- c_acceptNewSock    paramData
            c_free paramData
            when (rc /= 0)
                 (ioError (errnoToIOError "Network.Socket.accept" (Errno (fromIntegral rc)) Nothing Nothing))
        return new_sock 
```

自 2005 年以来`network`，在带有 -thread 的 Windows 上的包版本显式使用标记为的接受调用`safe`，允许其他线程取得进展，但不将套接字本身设置为非阻塞模式（因此调用线程阻塞）。

要解决它，我看到两个选项：

*   弄清楚如何在 Windows 上进行非阻塞接受调用，并修补网络库——看看 snap 或 yesod 在这里做了什么，看看他们是否已经解决了它。
*   使用某种监督线程来伪造 epoll，监视阻塞的子线程的进度。

# ruby-on-rails - Sublime Text 2 RubyTest 问题，没有输出

> ID：10608605
> 
> 赞同：0
> 
> 时间：2012-05-15T20:43:08.960
> 
> 标签：ruby-on-rails, sublimetext, ruby-test

当我使用 Command-Shift-R 运行 RubyTest 时，它会给出以下输出：

```
DEBUG_EXEC: cd ~/Documents/ProgrammingGeneral/rails/sample_app/ && rspec spec/requests/static_pages_spec.rb -l 54
reloading ~/Library/Application Support/Sublime Text 2/Packages/User/RubyTest.last-run 
```

该文件包含以下内容：

```
{
    "last_test_file": "static_pages_spec.rb",
    "last_test_run": "cd ~/Documents/ProgrammingGeneral/rails/sample_app/ && rspec spec/requests/static_pages_spec.rb -l 54" 
} 
```

我从来没有得到我的测试结果。我可以在控制台中手动运行它们，并使用 Guard（我在运行 RubyTest 之前将其杀死）。我也在运行Spork。

另外，我得到了很多形式的输出`scan: ~/Library/Application Support/path/to/stuff has been seen before, skipping`。

同样的事情发生在`Command-shift-T`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T05:56:10.110

有同样的问题，并且能够通过从命令行运行 Sublime Text 2 来解决它。

我使用符号链接将 Sublime 添加到我的 /usr/bin 文件夹中：

```
cd /usr/bin
sudo ln -s /Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl subl 
```

`subl`然后通过在命令行上运行来启动 Sublime Text 2 。你也可以运行：

```
 /Applications/Sublime\ Text\ 2.app/Contents/SharedSupport/bin/subl 
```

# google-data-api - Google Sites API - 如何通过 2-legged oAuth 获取所有域站点

> ID：10608606
> 
> 赞同：1
> 
> 时间：2012-05-15T20:43:23.307
> 
> 标签：google-data-api, google-sites

我正在尝试使用 Google Sites API 来检索我域的所有站点的列表，而不仅仅是当前经过身份验证的用户具有读写/所有者访问权限的站点。据我所知，在当前的 API 中没有处理这个问题的工具。

但是，根据当前的 API 参考（https://developers.google.com/google-apps/sites/docs/1.0/reference/），我可以使用一个参数来包含用户至少可以“查看”的所有站点. 这与使用域管理员用户相结合似乎可以满足我的要求。

不幸的是，我无法让它工作。我使用的是 2-legged oAuth 方法，与此处的以下示例几乎相同：http://gdatatips.blogspot.ca/search/label/oauth，[除了](http://gdatatips.blogspot.ca/search/label/oauth)我使用的是网站提要。

我可以成功指定 xoauth_requestor_id=my.admin.user@domain.com 并检索站点列表。但是，如果我将 'include-all-sites' 参数添加到我的提要 url，即：

[https://sites.google.com/feeds/site/mydomain.com/?include-all-sites=true](https://sites.google.com/feeds/site/mydomain.com/?include-all-sites=true)

我收到以下错误：

未知的授权标头错误 401

还有另一种方法可以做到这一点吗？我找不到任何使用“include-all-sites”参数的文档或工作示例。

**更新：**

这是标题输出：

```
GET /feeds/site/mydomain.com/?include-all-sites=true HTTP/1.1
Host: sites.google.com
Accept: */*
Authorization: OAuth oauth_version="1.0", oauth_nonce="831c013d3d4c9c13b149dfd21e9b48bd", oauth_timestamp="1337274463", oauth_consumer_key="mydomain.com", xoauth_requestor_id="user%mydomain.com", oauth_signature_method="HMAC-SHA1", oauth_signature="%2Bq24MoAQJL4vCcz%2BLD1P1Cy4X48%3D"
Content-Type: application/atom+xml
GData-Version: 1.4

HTTP/1.1 401 Unknown authorization header
WWW-Authenticate: GoogleLogin realm="http://www.google.com/accounts/ClientLogin", service="jotspot"
Content-Type: text/html; charset=UTF-8
Date: Thu, 17 May 2012 17:07:43 GMT
Expires: Thu, 17 May 2012 17:07:43 GMT
Cache-Control: private, max-age=0
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
Server: GSE
Transfer-Encoding: chunked 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T20:45:52.260

原来我在实现 OAuth 库时遇到了问题。这一切现在都按预期工作。下面是我的工作代码..

此示例要求您拥有适用于 PHP 的 Google API 客户端库：[http ://code.google.com/p/google-api-php-client/](http://code.google.com/p/google-api-php-client/)

```
$CONSUMER_KEY = "yourdomain.com";
$CONSUMER_SECRET = "yoursecret";
$consumer = new apiClientOAuthConsumer($CONSUMER_KEY, $CONSUMER_SECRET, NULL);

$user = 'admin.user@yourdomain.com';
$base_feed = "https://sites.google.com/feeds/site/$CONSUMER_KEY/";
$params = array('max-results' => 50, 'xoauth_requestor_id' => $user, 'include-all-sites' => 'true');  
$request = apiClientOAuthRequest::from_consumer_and_token($consumer, NULL, "GET", $base_feed, $params);

$request->sign_request(new apiClientOAuthSignatureMethod_HMAC_SHA1(), $consumer, NULL);

$url = $base_feed . '?' . implode_assoc('=', '&', $params); 

$result = send_request($request->get_normalized_http_method(), $url, $request->to_header()); 
```

上面的代码使用下面的实用函数（来自： http: [//gdatatips.blogspot.ca/search/label/oauth](http://gdatatips.blogspot.ca/search/label/oauth)）

```
/** 
 * Makes an HTTP request to the specified URL 
 * @param string $http_method The HTTP method (GET, POST, PUT, DELETE) 
 * @param string $url Full URL of the resource to access 
 * @param string $auth_header (optional) Authorization header 
 * @param string $postData (optional) POST/PUT request body 
 * @return string Response body from the server 
 */  
function send_request($http_method, $url, $auth_header=null, $postData=null) {  
  $curl = curl_init($url);  
  curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);  
  curl_setopt($curl, CURLOPT_FAILONERROR, false);  
  curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);  

  switch($http_method) {  
    case 'GET':  
      if ($auth_header) {  
        curl_setopt($curl, CURLOPT_HTTPHEADER, array($auth_header));   
      }  
      break;  
    case 'POST':  
      curl_setopt($curl, CURLOPT_HTTPHEADER, array('Content-Type: application/atom+xml',   
                                                   $auth_header));   
      curl_setopt($curl, CURLOPT_POST, 1);                                         
      curl_setopt($curl, CURLOPT_POSTFIELDS, $postData);  
      break;  
    case 'PUT':  
      curl_setopt($curl, CURLOPT_HTTPHEADER, array('Content-Type: application/atom+xml',   
                                                   $auth_header));   
      curl_setopt($curl, CURLOPT_CUSTOMREQUEST, $http_method);  
      curl_setopt($curl, CURLOPT_POSTFIELDS, $postData);  
      break;  
    case 'DELETE':  
      curl_setopt($curl, CURLOPT_HTTPHEADER, array($auth_header));   
      curl_setopt($curl, CURLOPT_CUSTOMREQUEST, $http_method);   
      break;  
  }  
  $response = curl_exec($curl);  
  if (!$response) {  
    $response = curl_error($curl);  
  }  
  curl_close($curl);  
  return $response;  
}  

/** 
 * Joins key:value pairs by inner_glue and each pair together by outer_glue 
 * @param string $inner_glue The HTTP method (GET, POST, PUT, DELETE) 
 * @param string $outer_glue Full URL of the resource to access 
 * @param array $array Associative array of query parameters 
 * @return string Urlencoded string of query parameters 
 */  
function implode_assoc($inner_glue, $outer_glue, $array) {  
  $output = array();  
  foreach($array as $key => $item) {  
    $output[] = $key . $inner_glue . urlencode($item);  
  }  
  return implode($outer_glue, $output);  
} 
```

我希望这可以帮助其他可能需要类似功能的人！

# c# - ContinueWith 方法不会等到异步任务完成

> ID：10608608
> 
> 赞同：2
> 
> 时间：2012-05-15T20:43:35.143
> 
> 标签：c#, asynchronous, task, asp.net-web-api

我正在尝试记录对 API 的请求和响应。我目前正在使用一个 delegatingHandler 来捕获 httpwebresponses 和 httpwebrequests。

处理程序：

```
 protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        LogRequest(request);
        return base.SendAsync(request, cancellationToken).ContinueWith((task) =>
             {
                 HttpResponseMessage response = task.Result;
                 LogResponse(response);
                 return response;
             });
    } 
```

日志响应：

```
 private void LogResponse(HttpResponseMessage response)
    {
        ApiResponse info = new ApiResponse();
        //Populate response obj   

        if (response.Content != null)
        {
            response.Content.ReadAsStringAsync().ContinueWith((task) =>
                    { 
                        info.Content = task.Result;
                    }
                );
        }
        _repository.LogResponse(info);
    } 
```

当我尝试将内容插入到我的存储库中的数据库时，我得到一个空异常。但是当我单步执行内容对象时，它会填充响应。我想我正在尝试在请求完成之前将数据插入数据库。

我不想等待它，因为这违背了使用异步请求的目的，当请求完成时，我如何连接它以运行 logresponse 方法？我认为 continueWith 会解决这个问题并在任务完成时运行该操作（这是否意味着请求的下载不一定完成？）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T20:47:38.220

您正在`info.Content`异步设置对`_repository.LogResponse(info)`. `LogResponse`甚至可能在继续执行之前调用。将您的呼叫移动到`LogResponse`延续的主体内。例如：

```
if (response.Content != null)
{
    response.Content.ReadAsStringAsync().ContinueWith((task) =>
            { 
                info.Content = task.Result;
                _repository.LogResponse(info);
            }
        );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T20:52:36.237

```
if (response.Content != null)
{
    var task = response.Content.ReadAsStringAsync().ContinueWith((task) =>
                       { 
                           info.Content = task.Result;
                       });

    task.Wait();
}

_repository.LogResponse(info); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T20:56:14.277

你可以试试这个例子：

```
private void LogResponse(HttpResponseMessage response)
{
    ApiResponse info = new ApiResponse();
    //Populate response obj   

    if (response.Content != null)
    {
        var info = await response.Content.ReadAsStringAsync();
        _repository.LogResponse(info);
    }
} 
```

# javascript - 从ajax请求将控制信号发送回客户端的最佳实践方法是什么？

> ID：10608612
> 
> 赞同：0
> 
> 时间：2012-05-15T20:43:46.190
> 
> 标签：javascript, html, ajax

当我从 Ajax 请求将信号发送回客户端时，我使用这种形式：

```
<!--a_b--> 
```

因此，如果某些我不解析它，并且它最终出现在 html 中，它不会破坏任何东西，因为它是一个评论。

`a`和`b`表示传达信息的值，而`_`是分隔符。

我不禁想知道其他人如何从 ajax 请求中发送回“控制”信号。

使用 ajax 将控制信号从服务器发送到客户端的最佳方式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T20:51:35.350

我只会使用 JSON。无论如何，您的客户必须知道如何解释响应，因此在 html 注释中对其进行编码并不是很有用。这只是意味着您需要额外的工作来稍后解析。这`if some how I don't parse it`只是意味着您有一个应该修复的错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T20:52:29.330

绝对使用 JSON 包。它不可能意外地“出现在 html 中”，所以这不应该是一个问题。

接收 JSON 响应，检查您的特殊属性（指令），然后根据返回的内容做出相应的响应。

```
{ "reload": "http://www.google.com" } 
```

或者

```
{ "alert": "HEY BUDDY!"} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T20:52:05.507

从技术上讲，ajax CALL 应该接收 XML。确实有一个 xhr.responseXML 用于接收此类数据。

你不会破坏任何东西...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T00:56:33.737

使用[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)，它只会“代替你做这项工作”。一个非常简单的例子：

```
$.ajax({
    url:'http://example.com/path?foo=bar',
    success: function(data) {
        // data won't land anywhere unless you want it to
    }
}); 
```

以及如何编码您的响应？我会说不要认为只使用 JSON。我看到返回 JSON 编码对象（而不是 JSON 编码字符串）的好处，因为可以使用新变量轻松扩展对象而不会破坏现有代码，而且几乎没有开销。

所以一个典型的反应可能看起来像 dontGoPlastic 说的：

```
{"key":"value"} 
```

然后在浏览器中，您可以解析它并使用以下命令访问“key”：

```
var response = JSON.parse(data);
alert(response.key); 
```

# google-chrome-extension - 当我单击 Google Chrome 扩展程序的弹出图标时，如何触发内容脚本运行？

> ID：10608613
> 
> 赞同：4
> 
> 时间：2012-05-15T20:43:55.397
> 
> 标签：google-chrome-extension

构建我的第一个 Chrome 应用程序，并且想知道如何`myscript.js`仅在单击 icon.png 时运行。现在它只在页面加载时运行。

这是我的 manifest.json 文件：

```
{
    "name": "My extension",
    "version": "1.0",
    "background_page": "background.html",
    "permissions": [
        "tabs", "http://*/*"
    ],
    "content_scripts": [
        {
            "matches": ["http://*/*"],
            "js": ["myscript.js"],
            "run_at": "document_end"
        }
    ],
    "browser_action": {
        "default_icon": "icon.png"
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T22:24:59.953

如果除了按下按钮之外，您在其他任何时候都不需要内容脚本，请参阅有关[程序注入](http://code.google.com/chrome/extensions/content_scripts.html#pi)的 Chrome 文档以`executeScript`用于动态注入脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T22:05:18.573

您将需要研究[消息传递](http://code.google.com/chrome/extensions/messaging.html)。基本上设置是：

*   制作另一个监听指令的内容脚本
*   单击弹出窗口时，将指令发送到内容脚本
*   内容脚本做它需要做的事情，传回一些说它已经完成的事情
*   Popup 知道工作已经完成

这样做是为了使内容脚本和后台脚本（或弹出窗口）隔离且安全。

# c# - 使用字典 而不是列表 加快对 Contains() 的调用

> ID：10608621
> 
> 赞同：7
> 
> 时间：2012-05-15T20:44:38.710
> 
> 标签：c#, list, collections, dictionary

我对 C# 中的泛型集合有疑问。如果我需要存储一个项目的集合，并且我经常需要检查一个项目是否在集合中，使用字典而不是列表会更快吗？

我听说检查一个项目是否在集合中相对于列表的大小是线性的，相对于字典的大小是恒定的。使用 Dictionary 然后将每个键值对的 Key 和 Value 设置为同一个对象，这是其他程序员在这种情况下经常做的事情吗？

感谢您抽时间阅读。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T20:46:21.730

`HashSet<Foo>`如果您关心的是快速遏制测试，请使用。

A`Dictionary<TKey, TValue>`用于根据键查找值。

A`List<T>`用于随机访问和动态增长属性。

A`HashSet<T>`用于对集合进行建模并提供快速遏制测试。

您不是在查找基于键的值。您不必担心随机访问，而是担心快速收容检查。这里正确的概念是`HashSet<T>`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T20:46:30.597

假设列表中只有一个项目的副本，那么适当的数据结构是`ISet<T>`，特别是`HashSet<T>`。

也就是说，我已经看到时间表明`Dictionary<TKey, TValue>` `ContainsKey`call 比 even 快一点`HashSet<T>`。无论哪种方式，它们都将比普通`List<T>`查找更快地加载。

请记住，这两种方法（HashSet 和 Dictionary）都`Equals` ***依赖*** `GetHashcode`于`T`. `List<T>`只依赖`Equals`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-15T20:46:18.460

是的，是的。也就是说，您可能想要使用`HashSet`，因为您不需要键和值，您只需要一组项目。

还值得注意的是，它`Dictionary`是在 C# 2.0 中添加的，并且`HashSet`是在 3.5 中添加的，因此在这之间的所有时间里，当你想要一个 Set 时使用 Dictionary 实际上是相当普遍的，因为这就是你所拥有的（而不是你自己的） . 当我被迫这样做时，我只是将 null 放在值中，而不是将项目作为键和值，但想法是一样的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-15T20:46:27.290

Dictionary 或 HashSet 将使用更多内存，但提供（几乎）O(1) 寻道时间。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-15T20:47:20.403

您可能想查看[HashSet](http://msdn.microsoft.com/en-us/library/bb359438.aspx)，它是唯一对象的集合（只要该对象实现 IEquality 比较器）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-17T14:11:24.960

您提到 using `List<T>`，这意味着排序可能很重要。如果是这种情况，那么您可能还想查看`SortedSet<T>`类型。

# android - ListFragment 不接受我的布局

> ID：10608624
> 
> 赞同：11
> 
> 时间：2012-05-15T20:44:49.077
> 
> 标签：android, android-listview, android-fragments

根据这个链接：[ListFragment android 开发者](http://developer.android.com/reference/android/app/ListFragment.html)

我想为列表设置我的自定义布局，但它有例外。

这是代码：

```
public class ListFragmentActivity extends FragmentActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    FragmentManager fm = getSupportFragmentManager();
    if(fm.findFragmentById(android.R.id.content) == null)
    {
        myListFragments list = new myListFragments();
        fm.beginTransaction().add(android.R.id.content, list).commit();
    }
}

public static class myListFragments extends ListFragment
{
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        return inflater.inflate(R.layout.topoffers, container, false);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onActivityCreated(savedInstanceState);
        List<OfferModel> offers = Global.getInstance().getOffers();
        List<OfferModel> topOffers = new ArrayList<OfferModel>(4);
        for (int i = 0; i < 4; i++) {
            if (offers.get(i).getOfferImage() == null)
                offers.get(i).setOfferImage(
                        downloadFile(offers.get(i).getOfferImageUrl()));
            topOffers.add(offers.get(i));
        }
        LazyAdapter adapter = new LazyAdapter(getActivity());
        adapter.setData(topOffers);
        setListAdapter(adapter);
        setListShown(true);
    }

    public Bitmap downloadFile(String fileUrl) {
        URL myFileUrl = null;
        try {
            myFileUrl = new URL(fileUrl);
        } catch (MalformedURLException e) {
            e.printStackTrace();
            return null;
        }
        try {
            HttpURLConnection conn = (HttpURLConnection) myFileUrl
                    .openConnection();
            conn.setDoInput(true);
            conn.connect();
            InputStream is = conn.getInputStream();
            return BitmapFactory.decodeStream(is);
        } catch (IOException e) {
            e.printStackTrace();
            return null;
        }
    }
}} 
```

我的自定义布局是`R.layout.topoffers`

日志猫：

```
 05-15 21:43:56.975: W/dalvikvm(218): threadid=3: thread exiting with uncaught exception (group=0x4001b188) 
 05-15 21:43:56.975: E/AndroidRuntime(218): Uncaught handler: thread main exiting due to uncaught exception
 05-15 21:43:56.995: E/AndroidRuntime(218): java.lang.RuntimeException: Unable to start activity ComponentInfo{org.anddev.android.ikiwi/org.anddev.android.ikiwi.ListFragmentActivity}:
    java.lang.IllegalStateException: Can't be used with a custom content view 
 05-15 21:43:56.995: E/AndroidRuntime(218):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496) 
 05-15 21:43:56.995: E/AndroidRuntime(218):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512) 
 05-15 21:43:56.995: E/AndroidRuntime(218):     at android.app.ActivityThread.access$2200(ActivityThread.java:119) 
 05-15 21:43:56.995: E/AndroidRuntime(218):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
 05-15 21:43:56.995: E/AndroidRuntime(218):     at android.os.Handler.dispatchMessage(Handler.java:99) 
 05-15 21:43:56.995: E/AndroidRuntime(218):     at android.os.Looper.loop(Looper.java:123) 
 05-15 21:43:56.995: E/AndroidRuntime(218):     at android.app.ActivityThread.main(ActivityThread.java:4363) 
 05-15 21:43:56.995: E/AndroidRuntime(218):     at java.lang.reflect.Method.invokeNative(Native Method) 
 05-15 21:43:56.995: E/AndroidRuntime(218):     at java.lang.reflect.Method.invoke(Method.java:521) 
 05-15 21:43:56.995: E/AndroidRuntime(218):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
 05-15 21:43:56.995: E/AndroidRuntime(218):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618) 
 05-15 21:43:56.995: E/AndroidRuntime(218):     at dalvik.system.NativeStart.main(Native Method) 
 05-15 21:43:56.995: E/AndroidRuntime(218): Caused by: java.lang.IllegalStateException:
    Can't be used with a custom content view 
 05-15 21:43:56.995: E/AndroidRuntime(218):     at android.support.v4.app.ListFragment.setListShown(ListFragment.java:282)
 05-15 21:43:56.995: E/AndroidRuntime(218):     at android.support.v4.app.ListFragment.setListShown(ListFragment.java:258)
 05-15 21:43:56.995: E/AndroidRuntime(218):     at org.anddev.android.ikiwi.ListFragmentActivity$myListFragments.onActivityCreated(ListFragmentActivity.java:57)
 05-15 21:43:56.995: E/AndroidRuntime(218):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:891)
 05-15 21:43:56.995: E/AndroidRuntime(218):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
 05-15 21:43:56.995: E/AndroidRuntime(218):     at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:622)
 05-15 21:43:56.995: E/AndroidRuntime(218):     at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1416)
 05-15 21:43:56.995: E/AndroidRuntime(218):     at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:505)
 05-15 21:43:56.995: E/AndroidRuntime(218):     at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1129)
 05-15 21:43:56.995: E/AndroidRuntime(218):     at android.app.Activity.performStart(Activity.java:3723) 
 05-15 21:43:56.995: E/AndroidRuntime(218):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2468)
 05-15 21:43:56.995: E/AndroidRuntime(218):     ... 11 more 
 05-15 21:43:57.025: I/dalvikvm(218): threadid=7: reacting to signal 3 
 05-15 21:43:57.025: E/dalvikvm(218): Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-19T23:06:44.467

创建布局文件**list_content.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

    <LinearLayout android:id="@+id/progressContainer"
            android:orientation="vertical"
            android:layout_width="match_parent" 
            android:layout_height="match_parent"
            android:visibility="gone"
            android:gravity="center">

        <ProgressBar style="?android:attr/progressBarStyleLarge"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />
        <TextView android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:text=""
                android:paddingTop="4dip"
                android:singleLine="true" />

    </LinearLayout>

    <FrameLayout android:id="@+id/listContainer"
            android:layout_width="match_parent" 
            android:layout_height="match_parent">

        <ListView android:id="@android:id/list"
                android:layout_width="match_parent" 
                android:layout_height="match_parent"
                android:drawSelectorOnTop="false" />
        <TextView android:id="@+id/internalEmpty"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:gravity="center"
                android:textAppearance="?android:attr/textAppearanceLarge" />
    </FrameLayout>

</FrameLayout> 
```

把它放在你的**ListFragment**类中：

```
public ListView mList;
boolean mListShown;
View mProgressContainer;
View mListContainer;

public void setListShown(boolean shown, boolean animate){
    if (mListShown == shown) {
        return;
    }
    mListShown = shown;
    if (shown) {
        if (animate) {
            mProgressContainer.startAnimation(AnimationUtils.loadAnimation(
                    getActivity(), android.R.anim.fade_out));
            mListContainer.startAnimation(AnimationUtils.loadAnimation(
                    getActivity(), android.R.anim.fade_in));
        }
        mProgressContainer.setVisibility(View.GONE);
        mListContainer.setVisibility(View.VISIBLE);
    } else {
        if (animate) {
            mProgressContainer.startAnimation(AnimationUtils.loadAnimation(
                    getActivity(), android.R.anim.fade_in));
            mListContainer.startAnimation(AnimationUtils.loadAnimation(
                    getActivity(), android.R.anim.fade_out));
        }
        mProgressContainer.setVisibility(View.VISIBLE);
        mListContainer.setVisibility(View.INVISIBLE);
    }
}
public void setListShown(boolean shown){
    setListShown(shown, true);
}
public void setListShownNoAnimation(boolean shown) {
    setListShown(shown, false);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    int INTERNAL_EMPTY_ID = 0x00ff0001;
    View root = inflater.inflate(R.layout.list_content, container, false);
    (root.findViewById(R.id.internalEmpty)).setId(INTERNAL_EMPTY_ID);
    mList = (ListView) root.findViewById(android.R.id.list);
    mListContainer =  root.findViewById(R.id.listContainer);
    mProgressContainer = root.findViewById(R.id.progressContainer);
    mListShown = true;
    return root;
} 
```

现在可以正常使用了：

```
setListShown(boolean shown);
setListShown(boolean shown, boolean animate);
setListShownNoAnimation(boolean shown); 
```

资源：

> [http://source-android.frandroid.com/frameworks/base/core/java/android/app/ListFragment.java](http://source-android.frandroid.com/frameworks/base/core/java/android/app/ListFragment.java)
> 
> [http://source-android.frandroid.com/frameworks/base/core/res/res/layout/list_content.xml](http://source-android.frandroid.com/frameworks/base/core/res/res/layout/list_content.xml)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-05-22T08:58:55.367

这可能更容易：像往常一样创建布局，但不要添加列表/空/加载内容。然后在您的 listfragment 的 onCreateView 中：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View v = super.onCreateView(inflater, container, savedInstanceState);
    ViewGroup parent = (ViewGroup) inflater.inflate(R.layout.mylayout, container, false);
    parent.addView(v, 0);
    return parent;
} 
```

现在你可以使用 setListShown...

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-08T13:42:05.380

只需在 onCreateView 方法中将原始 ListView 替换为您的 CustomListView 布局即可。为我工作。

```
 @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View layout = super.onCreateView(inflater, container,
            savedInstanceState);
    ListView lv = (ListView) layout.findViewById(android.R.id.list);
    ViewGroup parent = (ViewGroup) lv.getParent();

    // Remove ListView and add CustomView  in its place
    int lvIndex = parent.indexOfChild(lv);
    parent.removeViewAt(lvIndex);
    LinearLayout mLinearLayout = (LinearLayout) inflater.inflate(
            R.layout.custom_list, container, false);
    parent.addView(mLinearLayout, lvIndex, lv.getLayoutParams());
    return layout;
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-16T04:29:17.550

这听起来像是已经向 Google 报告的问题。

[谷歌问题](http://code.google.com/p/android/issues/detail?id=21742)

如果这确实是您的问题，那么该页面底部有一些修复它的建议（嗯，使其工作比修复它更多）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-08T23:08:12.647

今天我遇到了同样的问题。在谷歌中寻找解决方案，我在一个日本博客中找到了一篇文章。（[http://blog.nkzn.net/entry/2012/06/14/160706](http://blog.nkzn.net/entry/2012/06/14/160706)）。

要使用`setListShown(boolean)`，您必须首先在布局中执行：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <FrameLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </ListView>
    </FrameLayout>

    <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_centerInParent="true"
    android:gravity="center"
    android:visibility="gone" >

    <ProgressBar
        android:id="@android:id/progress"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
    </LinearLayout>
</RelativeLayout> 
```

现在在您的 ListFragment 中：

```
public class SampleListFragment extends ListFragment {

  /** ID for progressbar parent */
  private static final int INTERNAL_PROGRESS_CONTAINER_ID = 0x00ff0002;
  /** ID for listview parent */
  private static final int INTERNAL_LIST_CONTAINER_ID = 0x00ff0003;

  @Override
  public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.custom_list_layout, container, false);

    // get you progressBar and his parent
    ProgressBar pBar = (ProgressBar) view.findViewById(android.R.id.progress);
    LinearLayout pframe = (LinearLayout) pBar.getParent();
    pframe.setId(INTERNAL_PROGRESS_CONTAINER_ID);

    ListView listView = (ListView) view.findViewById(android.R.id.list);
    listView.setItemsCanFocus(false);
    FrameLayout lFrame = (FrameLayout) listView.getParent();
    lFrame.setId(INTERNAL_LIST_CONTAINER_ID);    

    return view;
  } 
} 
```

在他的父母 setListShown(boolean) 中设置的这 2 个 id 数字将毫无问题地工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-05T20:00:34.790

另一个对我有用的解决方案就是把这条线

```
<include layout="@android:layout/list_content" /> 
```

而不是您的列表视图。

您可以在其之上构建您自己的内容，或者用其他一些视图将其包围。例如，我的布局如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:padding="@dimen/default_view_padding"
        android:gravity="center"
        android:weightSum="4">

    <ImageButton
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/btnCounterBack"
            android:src="?attr/ic_previous"
            android:background="?android:attr/selectableItemBackground"
            android:contentDescription="@null"/>

    <TextView
            android:id="@+id/tvCounterLevel"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:text="@string/counter_categories"
            android:layout_gravity="center"
            android:paddingTop="@dimen/default_view_padding"
            android:paddingBottom="@dimen/default_view_padding"
            android:layout_alignParentTop="true"
            android:layout_alignParentLeft="true"
            android:layout_alignParentStart="true"
            android:gravity="center"/>

</RelativeLayout>

<LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:gravity="center_vertical"
        android:background="?attr/dropShadowBackground"
        android:orientation="vertical" >

    <include layout="@android:layout/list_content" />

</LinearLayout> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-29T04:53:42.980

I just needed to change my empty text `TextView` properties and did this

```
@Override
public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
    // Swap the new cursor in. (The framework will take care of closing the
    // old cursor once we return)
    mAdapter.swapCursor(cursor);
    if (cursor.getCount() == 0) {
        setEmptyText(getString(R.string.no_users));
        TextView tvEmpty = (TextView) getListView().getEmptyView();
        tvEmpty.setTextColor(getResources().getColor(R.color.blue));
    }
    // The list should now be shown.
    if (isResumed()) {
        setListShown(true);
    } else {
        setListShownNoAnimation(true);
    }
} 
```

Do not forget that if you try initializing `tvEmpty` before you call `setEmptyText("Empty")`, you'll run into a `NullPointerException`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-10-19T05:26:57.747

这段代码对我有用：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View root = super.onCreateView(inflater, container, savedInstanceState);

    ((TextView)root.findViewById(0x00ff0001)).setText("some text");

    ListView list = (ListView) root.findViewById(android.R.id.list);
    list.setEmptyView(root.findViewById(0x00ff0001));

    return root;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-12-06T16:24:47.223

有点晚了，但没有看到这个答案。

内部`Fragment`：

```
 @Override
    public View onCreateView(final LayoutInflater inflater, final ViewGroup container,
            final Bundle savedInstanceState) {
        final View view = inflater.inflate(R.layout.fragment_list_activity,
                container, false);  

        ListFragmentHelper.adaptView(view);

        return view;
    } 
```

但请**记住**，`fragment_list_activity.xml`您需要设置 ID`android:id="@id/loading"`和 您`android:id="@id/content"`的`android:id="@id/empty"`视图！

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2012-07-13T13:22:37.703

尝试删除`setListShown(true);`？

我有同样的问题，前段时间。如果您在`ListFragment`.

# bash - Unix shell 脚本中的 cat 命令

> ID：10608625
> 
> 赞同：3
> 
> 时间：2012-05-15T20:44:50.427
> 
> 标签：bash, shell, unix, cat

我有两行代码

1）使用以下代码：

```
for i in `ls *.properties`; do cat $i; done 
```

我得到错误：

```
cat: file_name.properties: No such file or directory. 
```

2）另一方面：

```
for i in *.properties; do cat $i; done 
```

工作正常！

我以为两者都是一样的。有人可以帮我理解两者之间的区别吗？使用 bash 外壳。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T20:54:13.617

以下命令打印什么？

```
cat -v <<< `ls *.properties` 
```

我想问题是，这`ls`是一个奇怪的别名，例如

```
ls='ls --color' 
```

**编辑：**我以前见过这个。别名应该是：`alias ls='ls --color=auto'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T20:56:17.987

很可能有一个匹配的目录`*.properties`。然后`ls`将输出该目录下的文件，不带目录名。然后`cat`将找不到给定的文件名。

所以请检查，`file_name.properties`是在实际目录中还是在某个子目录中。

**编辑**

要重现该问题，您可以尝试以下操作：

```
# cd /tmp
# mkdir foo.properties
# touch foo.properties/file_name.properties
# for i in `ls *.properties`; do cat $i; done
cat: file_name.properties: No such file or directory 
```

# jquery - 输入上的jquery .keyup事件未触发

> ID：10608631
> 
> 赞同：2
> 
> 时间：2012-05-15T20:45:21.693
> 
> 标签：jquery, html

当输入被键入时，我试图进行简单的加法计算。这是我的html：

```
<tr id="a">
        <td>
            <label>A</label>
        </td>
        <td>
            <label>Results/Action Orientation (asset)</label>
        </td>
        <td class="shade">
            <input id="a_per" type="text" />
        </td>
        <td class="shade">
            <input id="a_pot" type="text" />
        </td>
        <td class="shade">
            <input id="a_tot" class="totals" type="text" disabled="disabled" />
        </td>
</tr> 
```

这是我的keyup事件的jQuery：

```
$('#a_per').keyup(function() {
    if($('#a_pot').value != "") {
        var tot = this.value + $('#a_pot').value;
        $('#a_tot').value = tot;
    }
}); 
```

我将调整它以在#a_per 或#a_pot keyup 时触发，但首先我想确保它能够正常工作。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T20:53:00.637

另一种选择：

```
$('#a_per,#a_pot').keyup(function() {
  var a_per = +$('#a_per').val() || 0;
  var a_pot = +$('#a_pot').val() || 0;
  $('#a_tot').val(a_per + a_pot);
});​ 
```

[一个工作示例](http://jsfiddle.net/9uDRC/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T20:47:50.673

将您对 .value 的使用更改为 .val()。您还需要将 parseFloat 或 parseInt 应用于您的加法函数，否则您最终会连接字符串。还 wrap`this`是 jQuery 标签，如：

```
$('#a_per').keyup(function() {
    if($('#a_pot').val() != "") {
        var tot = parseFloat($(this).val()) + parseFloat($('#a_pot').val());
        $('#a_tot').val(tot);
    }
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T20:54:13.870

使用`val()`，而不是价值。

```
$(function(){

   $('#a_per').keyup(function() {
     var item=$(this);

      if(item.val() != "") {
         var tot = parseInt(item.val()) + parseInt($('#a_pot').val());
         $('#a_tot').val(tot);
      }
   });

}); 
```

工作样本：http: [//jsfiddle.net/zzS3U/9/](http://jsfiddle.net/zzS3U/9/)

# facebook - 为网站添加见解时，无法使用 Facebook 页面的 ID 作为 fb:admins 的值

> ID：10608647
> 
> 赞同：2
> 
> 时间：2012-05-15T20:46:26.553
> 
> 标签：facebook, metadata, facebook-page, facebook-insights

我已经添加了

```
<meta property="fb:admins" content="129523843754764" /> 
```

到 votesmart.org 的根目录，但调试器工具失败并出现以下错误：

> 'profile' 类型的 URL 'http://votesmart.org/' 上的对象无效，因为属性 'fb:admins' 的给定值 '129523843754764' 无法解析为类型 'fbid'。

我正在使用[Facebook Page](http://facebook.com/projectvotesmart)的 id 。根据[文档](https://developers.facebook.com/docs/insights/)，它应该可以工作。我想允许 Facebook 页面的所有管理员查看网站的见解。

> 如果您需要为多个用户提供访问权限，那么您应该创建并选择 Facebook 页面或应用程序。

我如何确保 Facebook 主页的管理员可以访问网页的见解，并且我可以成功地将网站与 Facebook 主页关联？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T21:49:05.773

根据[开发者路线图](https://developers.facebook.com/roadmap/)：

> ## 2012 年 5 月 2 日
> 
> **取消对使用页面 ID 声明域的支持** - 原定于 2012 年 4 月 1 日
> 
> 我们将取消使用主页 ID 声明域的功能。声明域的推荐选项是使用 App ID 或用户 ID，并且已声明的现有域将继续正常工作。声明域后，所有者可以查看见解或运行域赞助故事。有关更新的域声明流程的更多信息，请参阅 Insights 文档。

所以现在，您需要使用一系列用户 ID 或应用程序 ID 来声明它 - 页面 ID 不再可用。

# php - 如何仅显示登录人的链接？

> ID：10608653
> 
> 赞同：0
> 
> 时间：2012-05-15T20:46:38.137
> 
> 标签：php, html, session, post

我有一个链接，它使用 jQuery 显示一个框来更新用户的简历。但是，我希望该链接仅显示用户是否登录，并且仅显示在该用户的页面上。因此，例如，如果我登录了，它会显示在我的页面上，但是如果我转到朋友页面，它就不会显示，因此我不必选择更改他们的简历。这是我的代码：

```
 <div class="changeBio">
        <?php
            if ($_SESSION['loggedin'] == true) {
                ?><a href="" id="showBio">Change bio</a><?php
            }
        ?>
    </div> 
```

此代码将检查用户是否已登录，但我应该在 if 语句中输入什么来检查它是否是正确的用户？提前致谢！

编辑：

当每个用户登录时，他们都会从存储其信息的数据库中获得一个唯一的 ID。每个朋友页面都是根据这些 id 显示的，所以我只希望链接显示在登录的人的页面上，而不是他们的朋友页面上。我试过 if ($_SESSION['loggedin'] && $id != $_GET['id']) 和 if ($_SESSION['loggedin'] && $id == $_SESSION['id']) 但是它们都不起作用..在您正在查看的朋友页面的 url 中，如果有帮助，它会将该用户的 id 显示为 GET 变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T20:59:25.937

您可以将另一个变量 $current_user 与 $id 一起存储在会话中，正如您上面提到的（我猜这将不断从用户到用户），然后在您需要为当前用户显示消息的页面上，您可以使用

```
if($id == $current_user){
 //whatever you want to do
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T20:50:41.403

您需要在会话数据中存储当前登录用户的 ID、用户名或某些识别特征。

然后，您可以验证特定用户是否使用类似的代码登录

```
if ($_SESSION['currentUserID'] == $idOfTheUserThatTheBioBelongsTo)
    // let the user change the bio 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T20:48:32.250

您将必须包括 WHO 是否已登录，而不仅仅是他们是否登录。您还需要该信息来确定要显示的简历。

你的数据是这样的：

```
<div class="changeBio">
    <?php
        $id = $_POST['id'];
        if ($_SESSION['loggedin'] == true && $_POST['id'] == $_SESSION['loggedin_userid']) {
        ?><a href="biopage.php?userid='<?php echo $_SESSION['loggedin_userid']; ?>'" id="showBio">Change bio</a><?php
        }
    ?>
</div> 
```

# javascript - 从函数内部声明一个全局变量

> ID：10608656
> 
> 赞同：1
> 
> 时间：2012-05-15T20:46:45.553
> 
> 标签：javascript, dom, youtube-api

我有以下代码，使用他们的 Javascript API 在我的页面中跟踪嵌入的 Youtube 视频是必需的：

```
function onYouTubePlayerReady(playerId) {
      var youtubeplayer = document.getElementById('youtubeplayer');
      youtubeplayer.addEventListener("onStateChange", "onytplayerStateChange");
      youtubeplayer.setPlaybackQuality('large');
      }

function onytplayerStateChange(newState) {
    //Make it autoplay on page load
    if (newState == -1) {
        youtubeplayer.playVideo();
        }

    var tiempo = youtubeplayer.getCurrentTime();
    //Rounds to 2 decimals
    var tiempo = Math.round(tiempo*100)/100;
    alert(tiempo);
    } 
```

（与 Youtube API 相关的细节并不重要，但如果你好奇，可以参考我之前的问题 [Youtube Javascript API: not working in IE](https://stackoverflow.com/questions/10558598/youtube-javascript-api-not-working-in-ie)）。

现在，我的问题是 onYoutubePlayerReady() 函数声明了“youtubeplayer”，它是对 DOM 对象的引用，我也需要从另一个函数 onytplayerstateChange() 访问该变量......但是正在声明“youtubeplayer”作为局部变量。这适用于 IE 8、Safari ...，但不适用于 Firefox 12。当然，我可以通过以下方式获得对“youtubeplayer”的引用，而不需要“var”：

```
youtubeplayer = document.getElementById('youtubeplayer'); 
```

事实上，这就是它在 Youtube 的示例代码中的样子，但如果我这样写，代码在 IE 8 中不起作用（而它在 Firefox 12 中起作用；有关更多详细信息，请参阅我之前的问题）。

...所有这些都让我想到：有没有办法从函数内部声明一个全局变量（如上面的“youtubeplayer”），以便其他函数也可以访问它？适用于所有浏览器的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T20:54:36.070

声明全局变量的另一种方法是将其创建为全局“窗口”对象的额外属性——也是如此

```
window.youtubeplayer = document.getElementById('youtubeplayer'); 
```

页面上的任何其他内容都应该可以访问它。所以你的完整代码看起来像这样；

```
function onYouTubePlayerReady(playerId) {
  window.youtubeplayer = document.getElementById('youtubeplayer');
  window.youtubeplayer.addEventListener("onStateChange", "onytplayerStateChange");
  window.youtubeplayer.setPlaybackQuality('large');
}

function onytplayerStateChange(newState) {
  //Make it autoplay on page load
  if (newState == -1) {
    window.youtubeplayer.playVideo();
  }

  var tiempo = window.youtubeplayer.getCurrentTime();
  //Rounds to 2 decimals
  var tiempo = Math.round(tiempo*100)/100;
  alert(tiempo);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T21:22:29.697

您可以在 ready 函数中创建一个事件处理程序并直接将其传递，而不是将您的 onytplayerStateChange 函数的字符串引用传递给事件侦听器，如下所示：

```
function onYouTubePlayerReady(playerId) {
    var youtubeplayer = document.getElementById('youtubeplayer');
    var stateChangeHandler = function (newState) {
        //Make it autoplay on page load
        if (newState == -1) {
            youtubeplayer.playVideo();
        }
        var tiempo = youtubeplayer.getCurrentTime();
        //Rounds to 2 decimals
        var tiempo = Math.round(tiempo*100)/100;
        alert(tiempo);
    };
    youtubeplayer.addEventListener("onStateChange", stateChangeHandler);
    youtubeplayer.setPlaybackQuality('large');
} 
```

甚至直接传入一个匿名函数：

```
function onYouTubePlayerReady(playerId) {
    var youtubeplayer = document.getElementById('youtubeplayer');
    youtubeplayer.addEventListener("onStateChange", function (newState) {
        //Make it autoplay on page load
        if (newState == -1) {
            youtubeplayer.playVideo();
        }
        var tiempo = youtubeplayer.getCurrentTime();
        //Rounds to 2 decimals
        var tiempo = Math.round(tiempo*100)/100;
        alert(tiempo);
    });
    youtubeplayer.setPlaybackQuality('large');
} 
```

这保留了“onYouTubePlayerReady”函数内的 youtubeplayer 变量的范围，并绕过了建立全局变量的需要。

# php - 在 Highcharts 中从 PHP 加载 JSON 编码数据时，条不显示

> ID：10608659
> 
> 赞同：0
> 
> 时间：2012-05-15T20:47:00.663
> 
> 标签：php, mysql, ajax, json, highcharts

我正在加载存储在 MySQL 数据库中的数据。该图表未显示在网页上，但未显示任何其他警告。

我的 PHP 网页返回一个 JSON 编码的标头，其中包含以下信息：

`["John Doe","2","Jane Doe","3"]`

加载信息的脚本如下：

```
var chart;
function requestData() {
    $.ajax({
        url:'includes/bin/get_leaders.php',
        success: function(point) {
            alert(point);
        var series = chart.series[0],
        shift = series.data.length > 20; // shift if the series is longer than 20
        chart.series[0].addPoint(point, true, shift);
    },
    cache: false
});
$(document).ready(function() {
chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container',
        type: 'bar',
        events: {load: requestData}
    },
    title: {
        text: 'Top Agents'
    },
    xAxis: {
        type: 'int',
        title: {text: null}
    },
    yAxis: {
        min: 0,
        title: { text: 'Sales this Week', align: 'low'}
    },
    tooltip: {
        formatter: function() {
            return ''+ this.series.name +': '+ this.y +' sales';
            }
        },
    plotOptions: {
            bar: {
                dataLabels: {
                    enabled: true
                }
            }
        },
    legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'top',
            x: -100,
            y: 100,
            floating: true,
            borderWidth: 0,
            backgroundColor: '#FFFFFF',
            shadow: false
        },
        credits: {
            enabled: false
        },
    series: [{
        name: 'Sales'        }]
});        
});
}); 
```

有什么线索吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:50:24.697

看起来你正在传递一个 ["string", "number", "string", "number"]。您想要的是 {2, 3} 用于您的系列，然后让您的 xAxis 使用 {"John Doe", "Jane Doe"} 的类别列表。

# c# - 实体框架存储过程插入自定义序号

> ID：10608664
> 
> 赞同：0
> 
> 时间：2012-05-15T20:47:27.393
> 
> 标签：c#, .net, entity-framework-4

请耐心等待我的解释很长。

我在 EF4 中使用映射存储过程设置了一个表来插入数据。

例子 ：

```
 id | location | type
    1  |     10   |  15
    5  |     10   |  16 
```

SP 所做的是在另一个表中检查按位置和类型对应的下一个 id。

所以在这个例子中，下一个 id 将是

*   2 用于位置 10 和类型 15
*   6 用于位置 10 类型 16

这通过在 EF 中映射结果列来工作。

它可以正常工作，除非两个不同的键具有相同的序列号示例：

```
 id | location | type
    1  |     10   |  11
    1  |     10   |  10 
```

编辑：当我同时创建两个新行时会发生此错误。

它们的下一个值是 2，数据被保存到数据库中，但应用程序失败并显示以下消息：

> 对数据库的更改已成功提交，但在更新对象上下文时出错。ObjectContext 可能处于不一致的状态。
> 内部异常消息：
> AcceptChanges 无法继续，因为对象的键值与 ObjectStateManager 中的另一个对象冲突。
> 在调用 AcceptChanges 之前确保键值是唯一的。

有什么建议吗？

编辑存储过程示例

> 声明 @nextNumber int
> 
> SELECT @nextNumber = value + 1 FROM SEQUENTIAL_TABLE WHERE location = @location 和 type=@type
> 
> 插入表（位置，类型，id，......）值（@location，@type，@nextnumber，......）
> 
> UPDATE SEQUENTIAL_TABLE SET value = @nextNumber WHERE location = @location and type=@type
> 
> 选择 @nextNumber 作为 [NextNumber]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T22:01:01.393

在不了解设计的情况下；您可以修改您的表，使 ID 不是主键，而是使用 ID/Location/Type 集作为复合键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T20:55:40.940

听起来您误用了 id 列，而不仅仅是表示“自动递增 int”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T06:04:21.877

“假负数”是一个很好的技巧，在 DataSet / TableAdapter 时代工作得非常好。如果这不起作用，也许这是一个竞争条件，您需要将详细信息放在事务中，以便在您完成递增和插入您的之前，没有其他线程/行可以获取下一个 id。

# java - java - 为简单的getter初始化一个临时变量是否更好？

> ID：10608666
> 
> 赞同：2
> 
> 时间：2012-05-15T20:47:29.530
> 
> 标签：java, performance, variables, optimization

关于 Java 性能的一个非常不重​​要的问题，但它让我今天感到疑惑。

说我有简单的吸气剂：

```
public Object getSomething() {
     return this.member;
} 
```

现在，假设我在某个函数/算法中需要两次（或更多）getSomething() 的结果。我的问题：调用 getSomething() 两次（或更多）或声明一个临时的局部变量并从那时起使用此变量有什么区别吗？

也就是说，要么

```
public void algo() {
    Object o = getSomething();

    ... use o ...
} 
```

或者

```
public void algo() {
    ... call getSomething() multiple times ...
} 
```

我倾向于混合这两种选择，没有具体原因。我知道这没关系，但我只是想知道。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T20:49:39.563

从技术上讲，不多次调用该方法会更快，但情况可能并非总是如此。JVM 可能会将方法调用优化为内联，您根本看不到差异。在任何情况下，差异都可以忽略不计。

但是，始终使用吸气剂可能更安全。如果状态的值在您的调用之间发生变化怎么办？如果要使用一致的版本，则可以保存第一次调用的值。否则，您可能希望始终使用 getter。

在任何情况下，您都不应该根据性能做出此决定，因为它是如此微不足道。我会选择一个并坚持下去。我建议总是通过你的 getter/setter。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T21:44:44.470

Getter 和 setter 是关于封装和抽象的。**当您决定多次调用 getter 时，您就是在对该类的内部工作做出假设**。例如，它不进行昂贵的计算，或者该值不会被其他线程更改。

我认为最好调用一次 getter 并将其结果存储在一个临时变量中，从而允许您自由重构实现类。

作为轶事，我曾经被 getter 返回数组的变化所困扰，但实现类从数组属性更改为使用列表并在 getter 中进行转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T20:49:45.603

编译器应该优化其中任何一个，使其成为基本相同的代码。

# php - PHP用户ID到数据库

> ID：10608667
> 
> 赞同：0
> 
> 时间：2012-05-15T20:47:30.867
> 
> 标签：php, sql, database

首先，我从会话中获取 BedrijfID

```
$Deals = $_SESSION['login'];
$sSql = "SELECT BedrijfID FROM tblBedrijf WHERE Email  = '$Deals'";     
$res = $conn->query($sSql); 
return $res; 
```

比我需要把它放在另一个表中

```
$sql = "INSERT INTO tblDeal (Dealnaam, Dealkeuze, Dealbeschrijving,BedrijfID) 
                                    VALUES 
                                    (
                                    '" . $conn -> real_escape_string($this -> m_sNaamdeal) . "', 
                                    '" . $conn -> real_escape_string($this -> m_sAantal) . "',
                                    '" . $conn -> real_escape_string($this -> m_sBeschrijving) . "',
                                    '" . $conn -> real_escape_string($res) . "'
                                    );"; 
```

错误：

> 警告：mysqli::real_escape_string() 期望参数 1 是字符串，对象在 /

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T20:53:10.783

您需要先获取一行：

```
$Deals = $_SESSION['login'];
$sSql = "SELECT BedrijfID FROM tblBedrijf WHERE Email  = '$Deals'";     
$res = $conn->query($sSql);

$row = $res->fetch_assoc();

$sql = "INSERT INTO tblDeal (Dealnaam, Dealkeuze, Dealbeschrijving,BedrijfID) 
        VALUES 
        (
        '" . $conn -> real_escape_string($this -> m_sNaamdeal) . "', 
        '" . $conn -> real_escape_string($this -> m_sAantal) . "',
        '" . $conn -> real_escape_string($this -> m_sBeschrijving) . "',
        '" . $conn -> real_escape_string($row['BedrijfID']) . "'
        );"; 
```

# ios - iOS 已选标签

> ID：10608669
> 
> 赞同：0
> 
> 时间：2012-05-15T20:47:37.633
> 
> 标签：ios, uiviewcontroller, tabs

我正在尝试确定用户选择了哪个选项卡。我从几个关于 iOS 选项卡栏的教程中将其融合在一起。在我的 appDelegate 我有这个代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

//We need to implement the view controllers within the tab controller and make the tab controller the root controller of our app - note we are only using view 1-3 at first.

FirstViewController *fistView = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
SecondViewController *secondView = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
ThirdViewController *thirdView = [[ThirdViewController alloc] initWithNibName:@"ThirdViewController" bundle:nil];
FourthViewController *fourthView = [[FourthViewController alloc] initWithNibName:@"FourthViewController" bundle:nil];

NSArray *viewControllersArray = [[NSArray alloc] initWithObjects:fistView, secondView, thirdView, fourthView, nil];

self.tabController = [[UITabBarController alloc] init];
[self.tabController setViewControllers:viewControllersArray animated:YES];

self.window.rootViewController = self.tabController;

//end custom code

self.window.backgroundColor = [UIColor whiteColor];
[self.window makeKeyAndVisible];
return YES;
} 
```

viewControllerArray 是我的 tabController 的代表吗？

当我将此代码放在页面上时，没有任何反应：

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController {
    if (tabBarController.selectedIndex == 0) {
        NSLog(@"ok");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T20:51:02.120

在这种情况下，您的应用程序委托应该是 tabBarController 的委托。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T20:52:49.080

您可以简单地添加`self.tabController.delegate = self`并确保您的 AppDelegate 符合`UITabBarControllerDelegate`协议。

我还建议在您的委托方法中的 if 之外放置一个日志，以确认它确实被调用了。

# javascript - 为什么这个基于短路评估的 if 语句不起作用？

> ID：10608676
> 
> 赞同：0
> 
> 时间：2012-05-15T20:48:09.360
> 
> 标签：javascript

在`fun`函数中，如果布尔表达式为真，我想返回 1。

```
function fun() {
    (1 == 1) && return 1;
}

alert(fun()); 
```

​当然，我可以使用`if (1 == 1) return 1`. 但是，我想知道为什么上面的代码不起作用。它会在 Chrome 的控制台中触发“Uncaught SyntaxError: Unexpected token return”错误。

如果是真的，不应该`return 1`只运行吗？`(1 == 1)`为什么这不起作用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T20:49:43.010

它不起作用，因为`&&`运算符需要`expressions`它的两个操作数。例如，

> expr1 && expr2

`return`然而，陈述不是（从语法上讲）`expressions`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T20:56:23.963

对于一个很棒的解释，请参阅 jmar777 的答案，这里是你如何实现你的计划的方法。我只是把它反过来：

```
function fun() {
    return null || 1 == 1;
}

alert(fun()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T20:50:41.893

JavaScript 不是 bash shell 脚本。你没有`if`。JavaScript 也不是 C。 `==`自动转换，但`===`不会，`===`几乎在任何情况下都会做出更明智的选择。

# jquery - Jquery 滑块进入 wordpress 或插件

> ID：10608677
> 
> 赞同：0
> 
> 时间：2012-05-15T20:48:13.040
> 
> 标签：jquery, wordpress, slider

我有一个非常独特的 HTML Jquery 滑块，我想在 wordpress 中使用它。实现这一目标的最佳方法是什么？我应该把它变成一个插件吗？他们是我可以使用的转换器吗？任何建议、示例或链接都会非常有帮助。我的php知识不是最好的。提前致谢！

*   迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T04:10:43.770

有一种方法可以使用此滑块。将滑块的所有 css 和 js 放在 wordpress 主题的 Head 中，然后移动到 wordpress 管理面板并将滑块容器放在 HTML 小部件中（我们可以放置自定义 HTML 的小部件）并将此小部件加载到您想要的位置显示幻灯片..您必须根据 wordpress 提供图像 url。

希望这可以帮助你...

# python - python中的咆哮通知

> ID：10608678
> 
> 赞同：7
> 
> 时间：2012-05-15T20:48:14.897
> 
> 标签：python, macos, growl

在 python 中使用 Growl 但没有任何运气出现。使用以下代码。使用 Growl 1.3.3 在 OSX Lion 上运行。有人搞定这个吗？

```
import Growl

notifier = Growl.GrowlNotifier(applicationName='mzgrowl', notifications=['alive'])
notifier.register()
notifier.notify('alive', 'mzgrowl', 'test message') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T11:25:33.870

看起来有一个新的用于咆哮的python绑定库：[gntp](https://github.com/kfdm/gntp/)

你可能会有更好的运气。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T05:31:30.683

这是另一个适用于 Growl 1.2 的解决方案。我没有 1.3 可以测试。它比大多数漂浮的解决方案要好，因为您不必打开咆哮网络。

来自[http://wiki.python.org/moin/MacPython/Growl/AppleScriptSupport](http://wiki.python.org/moin/MacPython/Growl/AppleScriptSupport)：

```
$ pip install appscript 
```

并运行：

```
from appscript import *

# connect to Growl
growl = app('GrowlHelperApp')

# Make a list of all the notification types 
# that this script will ever send:
allNotificationsList = ['Test Notification', 'Another Test Notification']

# Make a list of the notifications 
# that will be enabled by default.      
# Those not enabled by default can be enabled later 
# in the 'Applications' tab of the growl prefpane.
enabledNotificationsList = ['Test Notification']

# Register our script with growl.
# You can optionally (as here) set a default icon 
# for this script's notifications.
growl.register(
    as_application='Growl Appscript Sample', 
    all_notifications=allNotificationsList, 
    default_notifications=enabledNotificationsList, 
    icon_of_application='PythonIDE')

# Send a Notification...
growl.notify(
    with_name='Test Notification', 
    title='Test Notification', 
    description='This is a test Appscript notification.', 
    application_name='Growl Appscript Sample')
    # You can optionally add an icon by adding one of these as the last arg:
    # icon_of_application="Script Editor.app")
    # icon_of_file="file:///Users/someone/Growl")
    # image_from_location="file:///Users/someone/pictures/stopWatch.png")

# Another one...
growl.notify(
    with_name='Another Test Notification', 
    title='Another Test Notification :) ', 
    description='Alas - you won\'t see me until you enable me...', 
    application_name='Growl Appscript Sample') 
```

# django - 如何在 django 中测试“渲染到模板”功能？(TDD)

> ID：10608681
> 
> 赞同：18
> 
> 时间：2012-05-15T20:48:19.080
> 
> 标签：django, testing, tdd, django-views

我应该如何测试这些功能？他们所做的只是渲染 html 页面并将一些对象传递给 html 页面。

```
def index(request):
    companies = Company.objects.filter(approved = True);
    return direct_to_template(request, 'home.html', {'companies': companies} ); 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-16T08:14:14.650

可以测试以下内容：

1.  响应代码
2.  使用的模板
3.  模板包含一些特定的文本

代码看起来像这样：

```
class TestPage(TestCase):

   def setUp(self):
       self.client = Client()

   def test_index_page(self):
       url = reverse('index')
       response = self.client.get(url)
       self.assertEqual(response.status_code, 200)
       self.assertTemplateUsed(response, 'index.html')
       self.assertContains(response, 'Company Name XYZ') 
```

# php - Yammer - 如何通过 api 发布到活动流？(php)

> ID：10608689
> 
> 赞同：2
> 
> 时间：2012-05-15T20:48:49.880
> 
> 标签：php, curl, yammer

我能够“获取”活动流，但不能“发布”到它。这似乎是一个技术错误。这是用于获取活动流的*代码*：

```
function getActivityStream()
{
    $as=$this->request('https://www.yammer.com/api/v1/streams/activities.json');
    var_dump($as);
}

function request($url, $data = array())
{
    if (empty($this->oatoken)) $this->getAccessToken();
    $headers = array();
    $headers[] = "Authorization: Bearer " . $this->oatoken['token'];
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url . '?' . http_build_query($data) );
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $output = curl_exec($ch);
    return json_decode($output);
} 
```

好的，这样可以正常工作...下面的代码返回 Yammer **“哎呀，找不到此页面”**消息：

```
function putActivityStream()
{
    $data=array('type'=>'text', 'text'=>'hello from api test call');
    $json=json_encode($data);
    $res=$this->post('streams/activites.json',$json);
}

function post($resource, $data)
{
    if (empty($this->oatoken)) $this->getAccessToken();
    $ch = curl_init();
    $headers = array();
    $headers[] = "Authorization: Bearer " . $this->oatoken['token'];
    $headers[]='Content-Type: application/json';
    $url = 'https://www.yammer.com/api/v1/' . $resource;
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    $response = curl_exec($ch);
    return $response;
} 
```

示例之一来自：http: [//developer.yammer.com/api/streams.html](http://developer.yammer.com/api/streams.html)

```
POST https://www.yammer.com/api/v1/streams/activities.json
Requests must be content-type: application/json.

{
  "type": "text",
  "text": "The build is broken."
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T14:14:30.260

你会踢自己的。您的代码中有错字。：） 改变：

```
$res=$this->post('streams/activites.json',$json); 
```

至

```
$res=$this->post('streams/activities.json',$json); 
```

简单的。

# ruby-on-rails - Micheal Hartls 第 11 章 rails 教程

> ID：10608690
> 
> 赞同：0
> 
> 时间：2012-05-15T20:48:57.163
> 
> 标签：ruby-on-rails

当我开始收到这些错误消息时，我几乎完成了本教程。有人可以给我一个起点，从哪里开始找出问题所在。大家都需要看什么文件？

失败：

```
 1) MicropostsController DELETE 'destroy'  for an unauthorized user should deny access
     Failure/Error: response.should redirect_to(root_path)
       Expected response to be a redirect to <http://test.host/> but was a redirect to <http://test.host/signin>
     # ./spec/controllers/microposts_controller_spec.rb:72:in `block (4 levels) in <top (required)>'

  2) UsersController GET 'new' should be successful
     Failure/Error: get :new
     ActionView::Template::Error:
       undefined local variable or method `object' for #<#<Class:0x000000051d2680>:0x00000005a62f70>
     # ./app/views/shared/_error_messages.html.erb:1:in `_app_views_shared__error_messages_html_erb___1348716384004617740_45632520'
     # ./app/views/users/_fields.html.erb:2:in `_app_views_users__fields_html_erb___3244409800155025389_45601120'
     # ./app/views/users/new.html.erb:7:in `block in _app_views_users_new_html_erb___2634588673674572576_47386100'
     # ./app/views/users/new.html.erb:3:in `_app_views_users_new_html_erb___2634588673674572576_47386100'
     # ./spec/controllers/users_controller_spec.rb:131:in `block (3 levels) in <top (required)>'

  3) UsersController GET 'new' should have the right title
     Failure/Error: get :new
     ActionView::Template::Error:
       undefined local variable or method `object' for #<#<Class:0x000000051d2680>:0x00000004242df0>
     # ./app/views/shared/_error_messages.html.erb:1:in `_app_views_shared__error_messages_html_erb___1348716384004617740_45632520'
     # ./app/views/users/_fields.html.erb:2:in `_app_views_users__fields_html_erb___3244409800155025389_45601120'
     # ./app/views/users/new.html.erb:7:in `block in _app_views_users_new_html_erb___2634588673674572576_47386100'
     # ./app/views/users/new.html.erb:3:in `_app_views_users_new_html_erb___2634588673674572576_47386100'
     # ./spec/controllers/users_controller_spec.rb:136:in `block (3 levels) in <top (required)>'

  4) UsersController GET 'new' POST 'create' failure  should have the right title
     Failure/Error: post :create, :user => @attr
     ActionView::Template::Error:
       undefined local variable or method `object' for #<#<Class:0x000000051d2680>:0x00000004c96518>
     # ./app/views/shared/_error_messages.html.erb:1:in `_app_views_shared__error_messages_html_erb___1348716384004617740_45632520'
     # ./app/views/users/_fields.html.erb:2:in `_app_views_users__fields_html_erb___3244409800155025389_45601120'
     # ./app/views/users/new.html.erb:7:in `block in _app_views_users_new_html_erb___2634588673674572576_47386100'
     # ./app/views/users/new.html.erb:3:in `_app_views_users_new_html_erb___2634588673674572576_47386100'
     # ./app/controllers/users_controller.rb:29:in `create'
     # ./spec/controllers/users_controller_spec.rb:148:in `block (5 levels) in <top (required)>'

  5) UsersController GET 'new' POST 'create' failure  should render the 'new' page
     Failure/Error: post :create, :user => @attr
     ActionView::Template::Error:
       undefined local variable or method `object' for #<#<Class:0x000000051d2680>:0x000000056482c8>
     # ./app/views/shared/_error_messages.html.erb:1:in `_app_views_shared__error_messages_html_erb___1348716384004617740_45632520'
     # ./app/views/users/_fields.html.erb:2:in `_app_views_users__fields_html_erb___3244409800155025389_45601120'
     # ./app/views/users/new.html.erb:7:in `block in _app_views_users_new_html_erb___2634588673674572576_47386100'
     # ./app/views/users/new.html.erb:3:in `_app_views_users_new_html_erb___2634588673674572576_47386100'
     # ./app/controllers/users_controller.rb:29:in `create'
     # ./spec/controllers/users_controller_spec.rb:152:in `block (5 levels) in <top (required)>'

  6) UsersController GET 'new' POST 'create' failure  should not create a user
     Failure/Error: post :create, :user => @attr
     ActionView::Template::Error:
       undefined local variable or method `object' for #<#<Class:0x000000051d2680>:0x000000051f8038>
     # ./app/views/shared/_error_messages.html.erb:1:in `_app_views_shared__error_messages_html_erb___1348716384004617740_45632520'
     # ./app/views/users/_fields.html.erb:2:in `_app_views_users__fields_html_erb___3244409800155025389_45601120'
     # ./app/views/users/new.html.erb:7:in `block in _app_views_users_new_html_erb___2634588673674572576_47386100'
     # ./app/views/users/new.html.erb:3:in `_app_views_users_new_html_erb___2634588673674572576_47386100'
     # ./app/controllers/users_controller.rb:29:in `create'
     # ./spec/controllers/users_controller_spec.rb:157:in `block (6 levels) in <top (required)>'
     # ./spec/controllers/users_controller_spec.rb:156:in `block (5 levels) in <top (required)>'

  7) UsersController GET 'new' GET 'edit' should be succesful
     Failure/Error: get :edit, :id => @user
     ActionView::Template::Error:
       undefined local variable or method `object' for #<#<Class:0x000000051d2680>:0x000000053301f8>
     # ./app/views/shared/_error_messages.html.erb:1:in `_app_views_shared__error_messages_html_erb___1348716384004617740_45632520'
     # ./app/views/users/_fields.html.erb:2:in `_app_views_users__fields_html_erb___3244409800155025389_45601120'
     # ./app/views/users/edit.html.erb:5:in `block in _app_views_users_edit_html_erb___4049085790763719618_40974080'
     # ./app/views/users/edit.html.erb:3:in `_app_views_users_edit_html_erb___4049085790763719618_40974080'
     # ./spec/controllers/users_controller_spec.rb:197:in `block (4 levels) in <top (required)>'

  8) UsersController GET 'new' GET 'edit' should have the right title
     Failure/Error: get :edit, :id => @user
     ActionView::Template::Error:
       undefined local variable or method `object' for #<#<Class:0x000000051d2680>:0x0000000508af20>
     # ./app/views/shared/_error_messages.html.erb:1:in `_app_views_shared__error_messages_html_erb___1348716384004617740_45632520'
     # ./app/views/users/_fields.html.erb:2:in `_app_views_users__fields_html_erb___3244409800155025389_45601120'
     # ./app/views/users/edit.html.erb:5:in `block in _app_views_users_edit_html_erb___4049085790763719618_40974080'
     # ./app/views/users/edit.html.erb:3:in `_app_views_users_edit_html_erb___4049085790763719618_40974080'
     # ./spec/controllers/users_controller_spec.rb:202:in `block (4 levels) in <top (required)>'

  9) UsersController GET 'new' GET 'edit' should have a link to change the gravatar
     Failure/Error: get :edit, :id => @user
     ActionView::Template::Error:
       undefined local variable or method `object' for #<#<Class:0x000000051d2680>:0x000000059d7d08>
     # ./app/views/shared/_error_messages.html.erb:1:in `_app_views_shared__error_messages_html_erb___1348716384004617740_45632520'
     # ./app/views/users/_fields.html.erb:2:in `_app_views_users__fields_html_erb___3244409800155025389_45601120'
     # ./app/views/users/edit.html.erb:5:in `block in _app_views_users_edit_html_erb___4049085790763719618_40974080'
     # ./app/views/users/edit.html.erb:3:in `_app_views_users_edit_html_erb___4049085790763719618_40974080'
     # ./spec/controllers/users_controller_spec.rb:207:in `block (4 levels) in <top (required)>'

  10) UsersController GET 'new' PUT 'update' should change the user's attributes
     Failure/Error: put :update, :id => @user, :user => @attr
     ActionView::Template::Error:
       undefined local variable or method `object' for #<#<Class:0x000000051d2680>:0x00000004cf6990>
     # ./app/views/shared/_error_messages.html.erb:1:in `_app_views_shared__error_messages_html_erb___1348716384004617740_45632520'
     # ./app/views/users/_fields.html.erb:2:in `_app_views_users__fields_html_erb___3244409800155025389_45601120'
     # ./app/views/users/edit.html.erb:5:in `block in _app_views_users_edit_html_erb___4049085790763719618_40974080'
     # ./app/views/users/edit.html.erb:3:in `_app_views_users_edit_html_erb___4049085790763719618_40974080'
     # ./app/controllers/users_controller.rb:43:in `update'
     # ./spec/controllers/users_controller_spec.rb:247:in `block (4 levels) in <top (required)>'

  11) UsersController GET 'new' PUT 'update' should have the right title
     Failure/Error: put :update, :id => @user, :user => @attr
     ActionView::Template::Error:
       undefined local variable or method `object' for #<#<Class:0x000000051d2680>:0x000000054200b8>
     # ./app/views/shared/_error_messages.html.erb:1:in `_app_views_shared__error_messages_html_erb___1348716384004617740_45632520'
     # ./app/views/users/_fields.html.erb:2:in `_app_views_users__fields_html_erb___3244409800155025389_45601120'
     # ./app/views/users/edit.html.erb:5:in `block in _app_views_users_edit_html_erb___4049085790763719618_40974080'
     # ./app/views/users/edit.html.erb:3:in `_app_views_users_edit_html_erb___4049085790763719618_40974080'
     # ./app/controllers/users_controller.rb:43:in `update'
     # ./spec/controllers/users_controller_spec.rb:255:in `block (4 levels) in <top (required)>'

  12) UsersController GET 'new' PUT 'update' failure should render the 'edit' page
     Failure/Error: put :update, :id => @user, :user => @attr
     ActionView::Template::Error:
       undefined local variable or method `object' for #<#<Class:0x000000051d2680>:0x000000057c0448>
     # ./app/views/shared/_error_messages.html.erb:1:in `_app_views_shared__error_messages_html_erb___1348716384004617740_45632520'
     # ./app/views/users/_fields.html.erb:2:in `_app_views_users__fields_html_erb___3244409800155025389_45601120'
     # ./app/views/users/edit.html.erb:5:in `block in _app_views_users_edit_html_erb___4049085790763719618_40974080'
     # ./app/views/users/edit.html.erb:3:in `_app_views_users_edit_html_erb___4049085790763719618_40974080'
     # ./app/controllers/users_controller.rb:43:in `update'
     # ./spec/controllers/users_controller_spec.rb:231:in `block (5 levels) in <top (required)>'

  13) FriendlyForwardings should forward to the requested page after signin
     Failure/Error: click_button
     ActionView::Template::Error:
       undefined local variable or method `object' for #<#<Class:0x000000051d2680>:0x0000000541df48>
     # ./app/views/shared/_error_messages.html.erb:1:in `_app_views_shared__error_messages_html_erb___1348716384004617740_45632520'
     # ./app/views/users/_fields.html.erb:2:in `_app_views_users__fields_html_erb___3244409800155025389_45601120'
     # ./app/views/users/edit.html.erb:5:in `block in _app_views_users_edit_html_erb___4049085790763719618_40974080'
     # ./app/views/users/edit.html.erb:3:in `_app_views_users_edit_html_erb___4049085790763719618_40974080'
     # ./spec/requests/friendly_forwardings_spec.rb:10:in `block (2 levels) in <top (required)>'

  14) LayoutLinks should have an signup page at '/signup'
     Failure/Error: get '/signup'
     ActionView::Template::Error:
       undefined local variable or method `object' for #<#<Class:0x000000051d2680>:0x00000003980370>
     # ./app/views/shared/_error_messages.html.erb:1:in `_app_views_shared__error_messages_html_erb___1348716384004617740_45632520'
     # ./app/views/users/_fields.html.erb:2:in `_app_views_users__fields_html_erb___3244409800155025389_45601120'
     # ./app/views/users/new.html.erb:7:in `block in _app_views_users_new_html_erb___2634588673674572576_47386100'
     # ./app/views/users/new.html.erb:3:in `_app_views_users_new_html_erb___2634588673674572576_47386100'
     # ./spec/requests/layout_links_spec.rb:28:in `block (2 levels) in <top (required)>'

  15) LayoutLinks should have the right links on the layout
     Failure/Error: click_link "Sign up now!"
     ActionView::Template::Error:
       undefined local variable or method `object' for #<#<Class:0x000000051d2680>:0x000000058c3098>
     # ./app/views/shared/_error_messages.html.erb:1:in `_app_views_shared__error_messages_html_erb___1348716384004617740_45632520'
     # ./app/views/users/_fields.html.erb:2:in `_app_views_users__fields_html_erb___3244409800155025389_45601120'
     # ./app/views/users/new.html.erb:7:in `block in _app_views_users_new_html_erb___2634588673674572576_47386100'
     # ./app/views/users/new.html.erb:3:in `_app_views_users_new_html_erb___2634588673674572576_47386100'
     # ./spec/requests/layout_links_spec.rb:47:in `block (2 levels) in <top (required)>'

  16) creation  failure should not make a new micropost
     Failure/Error: fill_in :micropost_content, :with => ""
     Webrat::NotFoundError:
       Could not find field: :micropost_content
     # ./spec/requests/microposts_spec.rb:17:in `block (4 levels) in <top (required)>'
     # ./spec/requests/microposts_spec.rb:15:in `block (3 levels) in <top (required)>'

  17) creation  success should make a new micropost
     Failure/Error: fill_in :micropost_content, :with => content
     Webrat::NotFoundError:
       Could not find field: :micropost_content
     # ./spec/requests/microposts_spec.rb:30:in `block (4 levels) in <top (required)>'
     # ./spec/requests/microposts_spec.rb:28:in `block (3 levels) in <top (required)>'

  18) Users signup failure should not make a new user
     Failure/Error: visit signup_path
     ActionView::Template::Error:
       undefined local variable or method `object' for #<#<Class:0x000000051d2680>:0x00000005766c40>
     # ./app/views/shared/_error_messages.html.erb:1:in `_app_views_shared__error_messages_html_erb___1348716384004617740_45632520'
     # ./app/views/users/_fields.html.erb:2:in `_app_views_users__fields_html_erb___3244409800155025389_45601120'
     # ./app/views/users/new.html.erb:7:in `block in _app_views_users_new_html_erb___2634588673674572576_47386100'
     # ./app/views/users/new.html.erb:3:in `_app_views_users_new_html_erb___2634588673674572576_47386100'
     # ./spec/requests/users_spec.rb:11:in `block (5 levels) in <top (required)>'
     # ./spec/requests/users_spec.rb:10:in `block (4 levels) in <top (required)>'

  19) Users signup success should make a new
     Failure/Error: visit signup_path
     ActionView::Template::Error:
       undefined local variable or method `object' for #<#<Class:0x000000051d2680>:0x000000059e8bd0>
     # ./app/views/shared/_error_messages.html.erb:1:in `_app_views_shared__error_messages_html_erb___1348716384004617740_45632520'
     # ./app/views/users/_fields.html.erb:2:in `_app_views_users__fields_html_erb___3244409800155025389_45601120'
     # ./app/views/users/new.html.erb:7:in `block in _app_views_users_new_html_erb___2634588673674572576_47386100'
     # ./app/views/users/new.html.erb:3:in `_app_views_users_new_html_erb___2634588673674572576_47386100'
     # ./spec/requests/users_spec.rb:27:in `block (5 levels) in <top (required)>'
     # ./spec/requests/users_spec.rb:26:in `block (4 levels) in <top (required)>'

Finished in 4.31 seconds
124 examples, 19 failures

Failed examples:

rspec ./spec/controllers/microposts_controller_spec.rb:70 # MicropostsController DELETE 'destroy'  for an unauthorized user should deny access
rspec ./spec/controllers/users_controller_spec.rb:130 # UsersController GET 'new' should be successful
rspec ./spec/controllers/users_controller_spec.rb:135 # UsersController GET 'new' should have the right title
rspec ./spec/controllers/users_controller_spec.rb:147 # UsersController GET 'new' POST 'create' failure  should have the right title
rspec ./spec/controllers/users_controller_spec.rb:151 # UsersController GET 'new' POST 'create' failure  should render the 'new' page
rspec ./spec/controllers/users_controller_spec.rb:155 # UsersController GET 'new' POST 'create' failure  should not create a user
rspec ./spec/controllers/users_controller_spec.rb:196 # UsersController GET 'new' GET 'edit' should be succesful
rspec ./spec/controllers/users_controller_spec.rb:201 # UsersController GET 'new' GET 'edit' should have the right title
rspec ./spec/controllers/users_controller_spec.rb:206 # UsersController GET 'new' GET 'edit' should have a link to change the gravatar
rspec ./spec/controllers/users_controller_spec.rb:246 # UsersController GET 'new' PUT 'update' should change the user's attributes
rspec ./spec/controllers/users_controller_spec.rb:254 # UsersController GET 'new' PUT 'update' should have the right title
rspec ./spec/controllers/users_controller_spec.rb:230 # UsersController GET 'new' PUT 'update' failure should render the 'edit' page
rspec ./spec/requests/friendly_forwardings_spec.rb:4 # FriendlyForwardings should forward to the requested page after signin
rspec ./spec/requests/layout_links_spec.rb:27 # LayoutLinks should have an signup page at '/signup'
rspec ./spec/requests/layout_links_spec.rb:38 # LayoutLinks should have the right links on the layout
rspec ./spec/requests/microposts_spec.rb:14 # creation  failure should not make a new micropost
rspec ./spec/requests/microposts_spec.rb:26 # creation  success should make a new micropost
rspec ./spec/requests/users_spec.rb:8 # Users signup failure should not make a new user
rspec ./spec/requests/users_spec.rb:25 # Users signup success should make a new

# Finished at 2012-05-15 16:41:20 
```

这是 _error_messages.html.erb

```
<% if object.errors.any? %>

    <div id="error_explanation">
        <h2>
            <%= pluralize(object.errors.count, "error") %>
          prohibited this <%= object.class.to_s.underscore.humanize.downcase %> from being saved:
            </h2>
            <p>There were problems with the following fields:</p>
                <ul>
                <% object.errors.full_messages.each do |message| %>

                <li><%= message %></li>
                <% end %>
                </ul>
            </div>
    <% end %> 
```

这是我的 _micropost_form.html.erb

```
<%= form_for(@micropost) do |f| %>

<%= render 'shared/error_messages', :object => f.object %>

<div class="field">
    <%= f.text_area  :content %>
    </div>
<div class="=actions">
    <%= f.submit "Submit" %>

    </div>
<%end%> 
```

这是 _fields.html.erb

```
<%= render 'shared/error_messages'%>
<div class="field">
    <%= f.label :name %><br/>
    <%= f.text_field :name%>

</div>

<div class="field">
    <%= f.label :email %><br/>
    <%= f.text_field :email %>

</div>

<div class="field">
    <%= f.label :password %><br/>
    <%= f.password_field :password %>

</div>

<div class="field">
    <%= f.label :password_confirmation, "Confirmation" %><br/>
    <%= f.password_field :password_confirmation %>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T23:50:46.063

错误 2 到 15 有一个简单的解决方法：您的 _fields.html.erb 在第一行缺少一些代码。整行应为：

```
app/views/layouts/_fields.html.erb   
<%= render 'shared/error_messages', object: f.object %> #object: f.object allows the form variable to 
                #access the associated object. 
```

不幸的是，由于未附加您的相关代码，因此我对您的其余错误无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-30T21:56:02.150

我认为您需要转到调用 _error_messages 部分的文件，并确保您使用以下命令调用它：

```
 <%= render 'shared/error_messages', object: f.object %> 
```

这是因为您要添加隐藏字段标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-12T03:53:26.810

我也遇到了这个问题，为了解决这个问题，我没有调整迈克尔示例中的代码，我只是将`_fields.html.erb`部分从`views/users`文件夹移动到`views/shared`文件夹。一旦进入共享文件夹，它似乎接受了来自两个控制器的对象。希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-07T18:33:54.797

截至发稿时，这仍然是本书最新版本中的一个问题。

在本书的前面部分，用户相关表单的字段被重构并放在呈现的部分`_fields.html.erb`中。`shared/error_messages`

和文件不需要修改，如书中所述，唯一需要修改的部分`users/new`是传递给`users/edit``_fields.html.erb``object: f.object``shared/error_messages`

# mysql - 嵌套查询和联合分组 (SQL)

> ID：10608694
> 
> 赞同：3
> 
> 时间：2012-05-15T20:49:13.483
> 
> 标签：mysql, sql

我需要帮助编写查询以获取一些信息，但我无法编写它。

```
[table_People]
int id
var name

[table_Tools]
int id
var name

[table_Activity1]
int person_id
int tool_id
date delivery_date

[table_Activity2]
int person_id
int tool_id
date installation_date 
```

该查询需要返回所有人员的列表以及他们在活动 1 或 2 中使用的最新工具的名称（两者之间发生的最新活动）。

```
SELECT
    people.id   AS personId,
    people.name AS personName,
    (
        SELECT
            tools.name AS toolName
        FROM
            activity1
        JOIN
            tools ON tools.id=activity1.tool_id
        WHERE
            activity1.id=people.id
        UNION ALL
        SELECT
            tools.name AS toolName
        FROM
            activity2
        JOIN
            tools ON tools.id=activity2.tool_id
        WHERE
            activity2.id=people.id
        ORDER BY
            installationDate,deliveryDate
    ) AS toolName
FROM
    people
ORDER BY
    people.name
ASC 
```

我遇到的问题是我无法按日期（交付或安装）排序，因为我收到错误，因为它们是不同的列名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T21:42:31.380

在子查询中使用 UNION 会创建一个派生的临时表。未选择的列不在结果集中，因此您不能对不在 SELECT 子句中的列进行 ORDER。

使用 UNION 时，SELECT 子句中使用的第一个列名将用于结果集中（类似于别名，尽管您也可以使用别名）。

只需确保在 SELECT 子句中命名列。

您还需要一个 LIMIT 子句将子查询限制为单行：

```
SELECT
    people.id   AS personId,
    people.name AS personName,
    (
        SELECT
            tools.name AS toolName, delivery_date
        FROM
            activity1
        JOIN
            tools ON tools.id=activity1.tool_id
        WHERE
            activity1.id=people.id
        UNION ALL
        SELECT
            tools.name AS toolName, installation_date
        FROM
            activity2
        JOIN
            tools ON tools.id=activity2.tool_id
        WHERE
            activity2.id=people.id
        ORDER BY
            deliveryDate
        LIMIT 1
    ) AS toolName
FROM
    people
ORDER BY
    people.name
ASC 
```

这是一个更简单的例子来说明这个问题：

```
SELECT fish FROM sea
UNION
SELECT dog FROM land
ORDER BY fish 
```

是相同的：

```
SELECT fish AS animal FROM sea
UNION
SELECT dog AS animal FROM land
ORDER BY animal 
```

结果被放入一个派生的临时表中，您可以随意命名列，但您使用的第一个名称会保留。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T21:13:59.043

我的解决方案将联合放在一个子查询中，然后按它们排序。您只需要第一行，因此您需要一个限制子句（或在 Oracle 中为 rownum = 1 或在 MSSQL 中为 top 1）：

```
SELECT people.id   AS personId,
       people.name AS personName, 
       (SELECT toolname
        FROM ((SELECT tools.name AS toolName, delivery_date as thedate
               FROM activity1 a
               WHERE a.PersonId = people.id
              ) union all
              (SELECT tools.name AS toolName, installation_date as thedate
               FROM activity2 a
               WHERE a.PersonId = people.id
              )
             ) a join
             tools t
             on a.toolsid = t.toolsid
        order by 2 desc
        limit 1
       ) AS toolName
FROM people
ORDER BY people.name ASC 
```

为了简化查询，我还删除了工具的最内层连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T22:05:54.347

```
SELECT
    p.id             AS person_id
  , p.name           AS person_name
  , CASE WHEN COALESCE(a1.delivery_date, '1000-01-01')
              > COALESCE(a2.installation_date, '1000-01-01')
           THEN t1.name
           ELSE t2.name
    END              AS tool_name
FROM 
    People AS p
  LEFT JOIN 
    Activity1 AS a1
        ON (a1.tool_id, a1.delivery_date) =
           ( SELECT tool_id, delivery_date
             FROM Activity1 AS a
             WHERE a.person_id = p.id
             ORDER BY delivery_date DESC
             LIMIT 1
           )
  LEFT JOIN 
    Tools AS t1
        ON t1.id = a1.tool_id
  LEFT JOIN 
    Activity2 AS a2
        ON (a2.tool_id, a2.installation_date) =
           ( SELECT tool_id, installation_date
             FROM Activity2 AS a
             WHERE a.person_id = p.id
             ORDER BY installation_date DESC
             LIMIT 1
           )
  LEFT JOIN 
    Tools AS t2
        ON t2.id = a2.tool_id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T21:10:04.787

做

```
SELECT
    people.id   AS personId,
    people.name AS personName,
    IF (
        (SELECT
            deliveryDate AS dDate
        FROM
            activity1
        WHERE
            person_id=personId) --assuming you have only one row returned here, else limit by some condition
        >
        (SELECT
            installationDate AS iDate
         FROM
            activity2
         WHERE
            person_id=personId) --assuming you have only one row returned here, else limit by some condition
         , (SELECT
                tools.name AS toolName
            FROM
                activity1
            JOIN
                tools ON tools.id=activity1.tool_id
            WHERE
                activity1.person_id=personId)
         , (SELECT
                tools.name AS toolName
            FROM
                activity2
            JOIN
                tools ON tools.id=activity2.tool_id
            WHERE
                activity2.person_id=personId)
           ) AS toolName
FROM
    people        
ORDER BY
    people.name
ASC 
```

此查询假定活动表中只有每个人的记录。如果还有更多，您需要根据总和最大条件限制您的选择结果集，或者只有您知道。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T20:59:31.377

如果在`select`.

例如：

```
select name from people order by name

select a1.delivery_date, t.name from activity1 a1, tools t 
order by a1.delivery_date,t.name 
```

投影的所有选定列也必须在定义中`order by`定义。在您的示例中，两个 select 语句都在使用，`tools.name as toolname`但您想按其他列排序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-15T21:21:16.090

MySQL 版本（可能您可以从中获得更紧凑的代码）：

```
Select * from 
(
  Select toolName, person_id, Max(TargetDate) as MaxDate
  From
        (
            SELECT tools.name AS toolName, activity1.person_id, activity1.delivery_date as targetDate
            FROM
                activity1
            JOIN
                tools ON tools.id=activity1.tool_id
            UNION ALL
            SELECT
                tools.name AS toolName, activity2.person_id, activity2.installation_date as TargetDate
            FROM
                activity2
            JOIN
                tools ON tools.id=activity2.tool_id
        )
 Group by toolName, person_id

) preselect
    join
    (
    Select toolName, person_id, Max(TargetDate)
    From
            (
                SELECT tools.name AS toolName, activity1.person_id, activity1.delivery_date as targetDate
                FROM
                    activity1
                JOIN
                    tools ON tools.id=activity1.tool_id
                UNION ALL
                SELECT
                    tools.name AS toolName, activity2.person_id, activity2.installation_date as TargetDate
                FROM
                    activity2
                JOIN
                    tools ON tools.id=activity2.tool_id
            )) result on result.toolName = preselect.toolName and result.person_id = preselect.person_id and result.TargetDate = preselect.MaxDate 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-16T04:27:14.127

选择 people.id 作为 person_id，people.name 作为 person_name，tools.name 作为来自 table_people 的工具名 人们离开加入（选择安装日期>交付日期然后 act2.tool_id 的情况，否则 act1.tool_id 结束为最近的_工具_id，安装日期>交付日期的情况，然后是 act2。 person_id else act1.person_id end as recent_most_person_id from table_activity1 act1 内部连接 ​​table_activity2 act2 on act1.person_id=act2.person_id)X on people.id=X.recent_most_person_id 内部连接 ​​table_tools tools.id=X.recent_most_tool_id

# c++ - c ++ String在打印时缩短了两倍

> ID：10608695
> 
> 赞同：2
> 
> 时间：2012-05-15T20:49:15.573
> 
> 标签：c++, string, double-precision

这个字符串操作以简写形式打印出一个 double，我不知道为什么。为什么会发生这种情况，我怎样才能获得像第一行输出一样的完整输出？

```
string myString = "The value is ";
ss.str(""); // stringstream from ealier
ss.clear();
ss << myDouble; // Double with value 0.000014577
myString.append(ss.str());
cout << myDouble << endl;
cout << myString << endl;

$ ./myapp
0.000014577
The value is 1.4577e-05 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T20:53:16.383

那是因为这是默认格式，您可以使用[precision](http://www.cplusplus.com/reference/iostream/ios_base/precision/)覆盖它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T20:57:00.710

它的默认行为你应该使用精度来使用固定精度

```
#include <string>
#include <iostream>
#include <iomanip>

using namespace std;

int main() {
double v = 0.000014577;
cout << fixed << v << endl;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T20:57:35.897

试试这个：

```
using std::fixed;
...
ss.setf(fixed);
ss << myDouble;
... 
```

# java - 将 375x375 图像的网格缝合在一起

> ID：10608701
> 
> 赞同：1
> 
> 时间：2012-05-15T20:49:42.093
> 
> 标签：java, image, image-processing

我有一张地图，分为 375x375 块 16 像素。我想开发一个 java 应用程序将这些图像拼接成一个大图像。我将如何在java中执行此操作？有什么有用的库吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T20:58:33.510

1.  创建一个`BufferedImage`375*16 或 6000x6000px 的。对于 36 MPix 图像，您将需要***大量***内存。
2.  从图像中获取`Graphics`实例。
3.  遍历图块并调用`g.drawImage(tile, x, y)`
4.  处理图形实例。

当然，将视图内的图块直接绘制到游戏的渲染表面（如果这是最终目的）可能更有意义（并且会占用更少的内存）。

> 有什么有用的库吗？

为此矫枉过正。使用上述任何一种技术，只需要几行代码。

# java - 带有 JPA 的 JDBCRealm

> ID：10608711
> 
> 赞同：6
> 
> 时间：2012-05-15T20:50:28.097
> 
> 标签：java, glassfish, jpa-2.0

Java EE6 的新手，我正在尝试设置 JDBCRealm。许多示例建议在 SQL 中手动制作保存用户/组信息的表。

有没有更标准的“JPA”方式呢？如果您使用例如 OneToMany 映射（这是我希望我可以使用的），Glassfish 期望的表不适合您最终会得到的那种表结构。

我读到 Glassfish 仍然使用 JDBC 来完成 JDBCRealm，这可以解释原因。我遇到了这个博客，它提出了一种使用 JPA 的方法。

[http://www.codeproject.com/Articles/238779/J2EE-JDBC-based-authentication-with-JPA-Entities-i](http://www.codeproject.com/Articles/238779/J2EE-JDBC-based-authentication-with-JPA-Entities-i)

但是有没有一种“官方”的方式来使用 JPA 呢？我想确保我遵循最佳实践，以确保我有一个安全的应用程序。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T17:56:59.277

几个月前，我想用 glassfish 创建我的 JDBC 领域，但我也有很多疑问。我将尝试或多或少地向您解释我是如何使用 JPA 做到的。

> 许多示例建议在 SQL 中手动制作保存用户/组信息的表

我不同意，如果您将 JPA 用于与持久性相关的其他任务，为什么在涉及安全性时会例外。所以 JPA 是个好主意。在您的数据库控制台中复制/粘贴一段 SQL 很容易，但如果您的实体会在您部署应用程序时自动为您创建这些表，则效果会更好。

您正在遵循的教程很好，我认为没有最佳实践。

我会给你一些我认为可以帮助你创建 JDBC 领域的资源。也许你对一些更简单的东西感兴趣，只是为了热身，在这种情况下，看看这篇文章：

[http://javing.blogspot.in/2012/05/here-in-this-video-you-can-see-how-i.html](http://javing.blogspot.in/2012/05/here-in-this-video-you-can-see-how-i.html)

它讨论了 glassfish 中基于角色的安全性，我认为它可以给你一些提示。

如果您想知道如何使用 JPA 创建 JDBC 领域，请按照我之前提出的这个问题，最后您会找到解决方案：

[Glassfish 3 安全性 - 使用 JDBC 领域的基于表单的身份验证](https://stackoverflow.com/questions/7944963/glassfish-3-security-form-based-authentication-using-a-jdbc-realm)

如果您粘贴一些代码，我们可以帮助您在遇到困难时大喊大叫。

# wifi-direct - wifi直接用笔记本电脑

> ID：10608712
> 
> 赞同：1
> 
> 时间：2012-05-15T20:50:31.760
> 
> 标签：wifi-direct

我可以购买笔记本电脑/无线网卡以允许我的笔记本电脑使用 Wifi-direct 与我的智能手机通信吗？说，在它们之间传输文件？我见过支持该技术但不支持计算机组件的手机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:42:54.230

您可以使用 Wi-Fi Alliance 网站上的认证产品列表：

*   [笔记本电脑](http://certifications.wi-fi.org/search_products.php?search=1&advanced=1&lang=en&filter_company_id=&filter_category_id=20&filter_subcategory=&filter_cid=&date_from=&date_to=&selected_certifications%5B%5D=50&x=61&y=13)
*   [外部适配器](http://certifications.wi-fi.org/search_products.php?search=1&advanced=1&lang=en&filter_company_id=&filter_category_id=3&filter_subcategory=&filter_cid=&date_from=&date_to=&x=58&y=14&selected_certifications%5B%5D=50)
*   [内部适配器](http://certifications.wi-fi.org/search_products.php?search=1&advanced=1&lang=en&filter_company_id=&filter_category_id=2&filter_subcategory=&filter_cid=&date_from=&date_to=&x=16&y=19&selected_certifications%5B%5D=50)

对于另一种类型的产品，请使用[搜索引擎](http://certifications.wi-fi.org/search_products.php?advanced=1&en)并勾选底部的 Wi-fi Direct 复选框。

# iphone - 我的Phonegap-Project 中没有PhoneGap.plist

> ID：10608715
> 
> 赞同：3
> 
> 时间：2012-05-15T20:50:42.517
> 
> 标签：iphone, xcode, cordova

开始在 Mac 上使用 phonegap（Xcode 4，构建 iphone 应用程序）我已经阅读了很多关于名为 的文件`phonegap.plist`，包括外部 URL 的白名单和其他内容。

`phonegap-project`这是我的问题，我在我的 xcode 4 项目中找不到这样的文件。有一个名为 的文件`cordova.plist`，还有一个文件`project-name.plist`（其中 project-name 表示项目的真实名称）。但是没有名为`phonegap.plist`.

我试过搜索Xcode，我试过了`find / -iname 'phonegap.plist'`

我的推理错误在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T23:18:37.487

PhoneGap.plist 已重命名为 Cordova.plist。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-03T09:32:46.363

由于 PhoneGap 升级，Cordova.plist 文件已停用，而是改为 config.xml。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-14T05:34:29.660

是的，试试 config.xml 你可以在那里找到插件..

# c++ - 将 TXT 行读入字符

> ID：10608716
> 
> 赞同：2
> 
> 时间：2012-05-15T20:50:52.183
> 
> 标签：c++

我现在完全没有想法。基本上，我想读取文本文件中一行的一部分，但是这段代码不起作用，我不知道为什么：

```
 char temp_char  = '\0';
        char _char = '\0';
        while(1)
        {
            _places.get(temp_char);
            if(temp_char == '\t')
                break;

            _char += temp_char;

            cout << _char;
        } 
```

基本上，它应该从文件的开头读取，直到它与制表符接触。不幸的是，它永远不会停止，并且 _char 会以大量毫无意义的随机字符出现。

我查看了 TXT 文件，它是正确的编码，并且制表符是文件中的普通制表符，但无论出于何种原因，我都无法使用 get 或 >> 从流中读取它。

我已经尝试了一个小时，查看了许多网站寻求帮助，但我一无所获......这一切都让我感到压力......

编辑：如果这不是问题，我也可以提供其余的程序代码，但应该是。：/

这是打开文件的位置：

```
 ifstream _places;
                _places.open("ECC.txt");
                if (_places.fail())
                {
                    cout << "Could not load text file, please make sure ECC.txt is in the same folder.";
                    _getch();
                    exit(1);
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T21:06:32.277

首先， _char 是 std::string、char[] 还是 char* ？

其次，我会使用

```
temp_char = _places.get() 
```

或者

```
std::string temp;
getline(_places,temp)
for (unsigned int i=0; i<temp.size(), ++i)
    if (temp[i] == '\t')
        break;
    _char += temp[i] // assuming, and REALLY HOPING _char is a std::string 
```

小心 ifstream 中的 get() 方法，因为它们可以返回 int。

# macos - 在 Cocoa 中的符号链接上设置修改日期

> ID：10608724
> 
> 赞同：3
> 
> 时间：2012-05-15T20:51:30.017
> 
> 标签：macos, cocoa, attributes, symlink, nsfilemanager

在 Cocoa 中，我想设置符号链接的修改日期。

使用`[NSFileManager setAttributes:ofItemAtPath:error:]`常规文件效果很好，但不适用于符号链接。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T02:03:17.263

没有办法直接用 NSFileManager 来做。setAttributes:ofItemAtPath:error: 方法封装了一堆基于 BSD 路径的函数，如 utimes、setxattr、chown 等，所有这些函数都遵循符号链接而不是直接对它们进行操作。

一种明显的替代方法是手动下拉到 BSD 层。一些函数具有“不遵循符号链接”的版本，例如 lchown，但并非所有函数都这样做。特别是，改变 mod 时间的那个，utimes，没有。因此，您必须打开文件并使用基于 fd 的变体 futimes。下面是代码的样子：

```
int fd = open([NSFileManager fileSystemRepresentationWithPath:path], O_RDONLY | O_SYMLINK);
futimes(fd, 0);
close(fd); 
```

如果你打算做很多这样的事情，你可以编写自己的 setAttributes:ofSymlinkAtPath:error: 在 NSFileManager 上的一个类别中实现，该类别包含 futimes、fchflags、fsetxattr 等。

唯一真正的问题是您需要对符号链接本身具有读取访问权限（以及修改 mod 时间所需的任何访问权限等）才能使其正常工作，但这通常不是问题，而且到目前为止据我所知，OS X 无论如何都无法解决它。（Linux 确实允许您打开一个既不是读也不是写访问的文件，只是为了进行 f* 调用，但 BSD 不允许。）

作为另一种选择，我相信 NSURL 文件 URL API*不*遵循符号链接，这意味着这应该可以工作（但我现在不在我的 Mac 前，所以我无法测试）：

```
[[NSURL fileURLWithPath:path isDirectory:NO] setResourceValue:[NSDate date] forKey:NSURLContentModificationDateKey error:nil]; 
```

# jquery - Jquery 从下拉列表中选择值

> ID：10608726
> 
> 赞同：1
> 
> 时间：2012-05-15T20:51:35.917
> 
> 标签：jquery

我有一个包含键值对的下拉列表。

通过 Jquery，followng 不起作用

```
 $("#MainContent_degree").val('APN'); 
```

但以下确实有效：

```
 $("#MainContent_degree option:contains('APN')").attr('selected', true); 
```

我以为他们是同一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T21:09:34.377

我对单选按钮有同样的问题，我认为这将适用于选择字段：

**删除活动的选定选项：**

```
$("#MainContent_degree").attr("selected", false); 
```

**设置新选择的选项**

```
$("#MainContent_degree option[value='APN']").attr("selected", true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T20:55:20.493

可能您的选项元素具有不同的`value`属性和内容。为了`.val`工作，您应该设置`value`属性：http: [//jsfiddle.net/5abK4/2/](http://jsfiddle.net/5abK4/2/)。

```
<option value="APN">APN</option> 
```

`:contains`搜索内容（即标签之间的文本）。

# ruby-on-rails - 如何在我的网站上显示其他网站的元数据，例如标题和徽标？

> ID：10608727
> 
> 赞同：2
> 
> 时间：2012-05-15T20:51:36.163
> 
> 标签：ruby-on-rails, ruby, facebook-opengraph, ruby-on-rails-3.2

如何从其他网站获取元数据并在 Ruby on Rails 中显示在我的网站上？我[之前问过这个问题，](https://stackoverflow.com/questions/10605513/how-do-i-grab-meta-data-from-other-websites-and-display-on-mine-in-ruby-on-rails)并认为我找到了解决方案，但似乎我没有。

使用 FB 或 Google+ 时，我可以将任何网站的链接粘贴到状态更新框中，它会立即加载有关该网站的信息，并可选择浏览缩略图。

我怎样才能在 ruby​​ on rails 中实现这一点？我所有的搜索似乎都提出了如何做到这一点的 php 方法。

最后一个人建议使用 oembed 或 embedly，但 embedly 会向我收费，并且 oembed ruby​​ gem 似乎不会按我希望的方式工作。

例如，我在 URL 中提供文本字段或文本区域以及用户类型或粘贴，jQuery AJAX 发挥了它的魔力，我向我的用户显示类似于以下图像的内容：

![在此处输入图像描述](../Images/c7047530601cb4b10f2455deca4ca944.png)

或者

![在此处输入图像描述](../Images/91d1b6ada3e77434e6db0e61d4a588c3.png)

为了获取视频数据信息，我使用了 Ruby Open Graph Protocol gem。有什么东西可以像 FB 和 G+ 那样抓取数据吗？如果没有，在 Rails/Ruby 中是否有标准的方法，如果有，这是如何完成的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T21:06:15.193

也许像[Mechanize](http://mechanize.rubyforge.org/)和[Pismo](https://github.com/peterc/pismo)这样的宝石会有所帮助。

机械化：

```
require 'mechanize'
agent = Mechanize.new
page = agent.get('http://google.com/')
page.title
 => "Google" 
```

和庇斯摩：

```
require 'pismo'
page = Pismo::Document.new('http://google.com')
page.title
 => "Google" 
```

# delphi - 编译包含 TForm.Create(nil) 的 dwscript 时堆栈溢出

> ID：10608731
> 
> 赞同：5
> 
> 时间：2012-05-15T20:51:56.003
> 
> 标签：delphi, stack-overflow, dwscript

我正在尝试使用 dwscript 创建一个模态表单。我用 ExposeRtti 注册表单，然后执行脚本，但它在 Script.Compile 期间因“堆栈溢出”而失败。有没有人有这个错误的解决方案。

我当然希望我不必像使用 remobjects PascalScript 那样手动注册所有 TForm 属性和函数，这会让我们在这个时代变得丑陋，想避免这种情况..

dwscript 可以做到这一点，还是表单只是超出了 dwscript 的范围（现阶段？）？

```
procedure TMainForm.Button1Click(Sender: TObject);
var AdwsProgramExecution: IdwsProgramExecution;
  ADelphiWebScript: TDelphiWebScript;
  AdwsProgram: IdwsProgram;
  AdwsUnit: TdwsUnit;
begin
  AdwsUnit := TdwsUnit.Create(nil);
  ADelphiWebScript := TDelphiWebScript.Create(nil);
  try
    AdwsUnit.UnitName := 'ShowModalTest';
    AdwsUnit.Script := ADelphiWebScript;
    AdwsUnit.ExposeRTTI(TypeInfo(TObject)); //Otherwise GetOnAlignInsertBefore error when 'compiling'
    AdwsUnit.ExposeRTTI(TypeInfo(TForm)); //Want t ocreate a form
    AdwsProgram := ADelphiWebScript.Compile('procedure TestShowModal; begin TForm.Create(nil).ShowModal; end; end.'); //Stack overflow
    if AdwsProgram.Msgs.Count = 0 then 
    begin
      AdwsProgramExecution := AdwsProgram.Execute;
      MEResult.Lines.Text := AdwsProgramExecution.Result.ToString;
    end
    else 
      MEResult.Lines.Text := AdwsProgram.Msgs.AsInfo;
  finally
    ADelphiWebScript.Free;
    AdwsUnit.Free;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T21:54:39.547

显然 dwscript 不能通过扩展 RTTI 正确注册任何东西，除非它是简单的类。这不是我对脚本引擎的想法，所以（现在）dwscript 完全属于图表，除非它可以 rtti 注册复杂的结构。这是非常有前途的，但在这个包完成和可用之前还有很长的路要走。

现在回到 pascalscript、paxcompiler 或 tmsscript

# c++ - 默认析构函数问题，未检测到

> ID：10608732
> 
> 赞同：0
> 
> 时间：2012-05-15T20:51:56.553
> 
> 标签：c++, class, destructor

我尝试使用我自己的析构函数而不是默认析构函数，但无论如何我都会收到以下错误。有谁知道我为什么会得到这个？

错误：

```
AssignmentRepository.o: In function `ZNSt6vectorI10AssignmentSaIS0_EE13_M_insert_auxEN9__gnu_cxx17__normal_iteratorIPS0_S2_EERKS0_':
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/bits/vector.tcc:308: undefined reference to `Assignment::~Assignment()'
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/bits/vector.tcc:308: undefined reference to `Assignment::~Assignment()'
AssignmentRepository.o: In function `ZN9__gnu_cxx13new_allocatorI10AssignmentE7destroyEPS1_':
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/ext/new_allocator.h:118: undefined reference to `Assignment::~Assignment()'
AssignmentRepository.o: In function `ZSt8_DestroyI10AssignmentEvPT_':
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/bits/stl_construct.h:94: undefined reference to `Assignment::~Assignment()'
collect2: ld returned 1 exit status 
```

.h 文件中的类代码：

```
#ifndef ASSIGNMENTREPOSITORY_H_
#define ASSIGNMENTREPOSITORY_H_

#include "Assignment.h"
#include <vector>

class AssignmentRepository{
private:
    vector <Assignment> assignments;
public:
    vector <Assignment> getAll();
    void save(Assignment);
    void editAssignment(Assignment);
    int searchById(int);
    void printAllAssignments();
    int findByName(string name);
    Assignment *getAssignment(int i);

    ~AssignmentRepository();
};

#endif /* ASSIGNMENTREPOSITORY_H_ */ 
```

类的 .cpp 文件：

```
int AssignmentRepository::searchById(int a){
for(unsigned i=0; i<assignments.size(); i++){
    if(a == assignments[i].getID()){
        return i;
    }
}
return 0;
}

AssignmentRepository::~AssignmentRepository(){
} 
```

Assignment.h 类头：

```
class Assignment {
private:
    int id;
    int grade;
    int dLine;
    string descrption;

public:
    Assignment(int gr, int dl, string desc):grade(gr),dLine(dl),descrption(desc){};
    ~Assignment();

    void setGrade(int value)         {grade = value;}
    void setDLine(int value)         {dLine = value;}
    void setDescription(string value)   {descrption = value;}
    void setID(int value)   {id = value;}
    int getID()                 const{return id;}
    int getGrade()              const{return grade;}
    int getDLine()              const{return dLine;}
    string getDescription()     const{return descrption;}

    friend ostream& operator << (ostream& out, const Assignment& assignment)
    {
        out << assignment.grade << " " << assignment.dLine << " " << assignment.descrption <<endl;
        return out;
    }
};

#endif /* ASSIGNMENT_H_ */ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T20:59:51.723

你已经声明了`Assignment`析构函数，但你还没有定义它。

尝试替换此行：

```
~Assignment(); 
```

有了这个：

```
~Assignment() {} 
```

# objective-c - 为透明形状绘制阴影

> ID：10608734
> 
> 赞同：1
> 
> 时间：2012-05-15T20:52:13.960
> 
> 标签：objective-c, ios, quartz-graphics

我只想为某些形状创建一个阴影（没有导致阴影的对象）。例如，对于椭圆：

```
CGContextSetShadowWithColor(ctx, offset, blur, color.CGColor);
CGContextFillEllipseInRect(ctx, drawInRect); 
```

阴影画得很好，但我希望形状是透明的。我尝试将填充颜色设置为清除：

```
CGContextSetFillColorWithColor(ctx, UIColor.clearColor.CGColor); 
```

这导致阴影也被抑制。

用黑色阴影实现透明形状的最简单方法是什么？如果我需要做一个面具，我将如何用 Quartz 做这个？

**编辑：**正如第一个回答者指出的那样，这个问题模棱两可或令人困惑。我试图澄清一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T21:03:04.927

你想只看到阴影，而不是椭圆？

如果你用 Quartz 来画这个，这很棘手，因为 Quartz 使用椭圆的外观来生成阴影。如果你剪掉或遮住椭圆，那也会影响阴影。

一种可能性是调整阴影的偏移量和椭圆的位置，以使椭圆位于上下文的可见区域之外。例如，如果您在 100 x 100 位图上下文中绘制，您可以将椭圆的位置设置为 {normalPosition.x - 100, normalPosition.y}，并将阴影的 offset.x 增加 100。这样，椭圆会完全脱离上下文，但影子会在同一个地方。（当然，根据您的情况调整数学。）

另一种选择：如果您`shadowPath`在 CALayer 上使用该属性，则仅基于该路径生成阴影，而不是基于图层的内容。根据您的情况，它可能比纯 CG 更容易管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T22:17:08.910

您可以使用剪切路径来做到这一点。EO 的东西对于定义绘制所有内容的外部空间和不绘制任何内容的内部空间是必要的。

我把这个稍微复杂了一点，因为之后我会放入一个浅色的红色圆圈。

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGContextSaveGState(ctx); // store to ignore the clipping path later
    float margin = self.bounds.size.width * .1;
    CGRect ellipseRect = CGRectMake(margin, margin, self.bounds.size.width - 2*margin, self.bounds.size.height - 2*margin);

    // OUTER path is just the bounds
    CGMutablePathRef mutablePath = CGPathCreateMutable();
    CGPathRef pathRef = CGPathCreateWithRect(self.bounds, NULL);
    CGPathAddPath(mutablePath, NULL, pathRef);
    // INNER path is the same as the ellipse
    CGPathRef pathRef2 = CGPathCreateWithEllipseInRect(ellipseRect, NULL);
    CGPathAddPath(mutablePath, NULL, pathRef2);
    CGContextAddPath(ctx, mutablePath);
    CGContextEOClip(ctx);    

    CGContextSetFillColorWithColor(ctx, UIColor.greenColor.CGColor);
    CGContextSetShadowWithColor(ctx, CGSizeMake(margin/2.0f, margin/2.0f), 10, UIColor.blackColor.CGColor);
    CGContextFillEllipseInRect(ctx, ellipseRect);

    // replace the green circle for a very transparent red one just for fun
    CGContextRestoreGState(ctx);
    CGContextSetFillColorWithColor(ctx, [UIColor.redColor colorWithAlphaComponent:.1].CGColor);
    CGContextSetShadowWithColor(ctx, CGSizeZero, 0, NULL);
    CGContextFillEllipseInRect(ctx, ellipseRect);
} 
```

# qt - 使 qmake 不附加 .so

> ID：10608740
> 
> 赞同：1
> 
> 时间：2012-05-15T20:52:52.527
> 
> 标签：qt, shared-libraries, qmake

是否有某种方法可以修改 qmake 项目文件 (*.pro) 以使 qmake 在构建共享库文件时不附加 .so？我知道这是因为目标文件类型而发生的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T21:04:21.467

尝试将这样的内容添加到您的 .pro 文件中：

```
QMAKE_EXTENSION_SHLIB = some_other_extension 
```

# jquery - 在页面转换期间从 Jquery Mobile 中删除滚动条

> ID：10608746
> 
> 赞同：3
> 
> 时间：2012-05-15T20:53:10.370
> 
> 标签：jquery, android, mobile, transition

我正在使用针对 Android 平板电脑的 JQuery mobile 编写应用程序（我正在 Honeycomb Android 3.0 上进行测试）。当我使用幻灯片转换从页面转换到页面时，在转换过程中我看到滚动条。转换前后滚动条消失。我尝试使用：

```
html { overflow: hidden; }

body { overflow: hidden; }

* { overflow: hidden; }

.ui-page { overflow: hidden; } 
```

但是，这些都不起作用。有没有人有任何想法？我已经厌倦了 Android 和 JQuery mobile。我什至将 Jquery 移动页面包装在原生 Android WebView 中，但我仍然遇到类似的问题。啊! 我最初走这条路线是为了节省时间，但现在我想我应该从一开始就走本土路线。

如果有人可以提供帮助，将不胜感激。

谢谢！

**更新**：

好的，所以在无法使用 JavaScript 删除滚动条后，我尝试在 Java 中这样做。我做了以下事情：

```
 WebView wv = (WebView) findViewById(R.id.coWebView);
    wv.setVerticalScrollBarEnabled(false);
    wv.setHorizontalScrollBarEnabled(false); 
```

这似乎很明显，但是无论如何滚动条都不会显示 - 我的问题是在转换期间删除它们。然而，这确实摆脱了过渡期间的垂直滚动条（至少对我来说 - 在 Android Honeycomb 平板电脑上）。然而，我仍然看到一个大约 1px 高的水平滚动条......但它比以前更好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-02T08:47:49.873

我在java文件中添加了这个；我的科尔多瓦版本是 4.0。现在滚动条消失了。

```
super.appView.setHorizontalScrollBarEnabled(false); 
```

像这样的函数的完整代码：

```
 @Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    super.init();
    ///////
    // Set by <content src="index.html" /> in config.xml
    super.appView.setHorizontalScrollBarEnabled(false);
    super.loadUrl(Config.getStartUrl());
    //super.loadUrl("file:///android_asset/www/index.html");
} 
```

# objective-c - 未调用 AQGridView didSelectItemAtIndex 委托

> ID：10608748
> 
> 赞同：0
> 
> 时间：2012-05-15T20:53:15.693
> 
> 标签：objective-c, ios, cocoa-touch, aqgridview

我正在使用 AQGridView 显示来自 Web 服务的图像。当我触摸一个单元格时，`didSelectItemAtIndex`不会调用代表。委托被调用，`numberOfItemsInGridView`所以我想我已经完成了委托和数据源设置。这是代码：

PhotoGridViewController.h

```
#import "AQGridView.h"
#import "PhotoGridViewCell.h"

@interface PhotoGridViewController : UIViewController<AQGridViewDelegate,AQGridViewDataSource>

@property (nonatomic, strong) NSArray *imageDictionaries;
@property (weak, nonatomic) IBOutlet AQGridView *gridView;
@property (nonatomic, retain) IBOutlet PhotoGridViewCell *gridViewCellContent;

-(void)refreshImages;

@end 
```

PhotoGridViewController.m

```
#import "PhotoGridViewController.h"
#import "PhotoGridViewCell.h"
#import "AQGridViewCell.h"

@interface PhotoGridViewController ()
@end

@implementation PhotoGridViewController

@synthesize imageDictionaries = _imageDictionaries;  
@synthesize gridView=_gridView;
@synthesize gridViewCellContent = _gridViewCellContent; 
```

... 辅助方法、单元创建和图像获取方法 ...

```
- (NSUInteger) numberOfItemsInGridView: (AQGridView *) aGridView
{
    return ( [self.imageDictionaries count] );
} 
```

^^^ 这个委托方法**被**称为 ^^^ ...

```
-(void)gridView:(AQGridView *)gridView didSelectItemAtIndex:(NSUInteger)index {
    NSLog (@"Selected theArgument=%d\n", index);
} 
```

该 NSLog 语句永远不会被调用。我使用这个项目 - [http://fdiv.net/2011/10/29/reusable-views-ios](http://fdiv.net/2011/10/29/reusable-views-ios) - 作为制作我的指南。那个工作得很好。我已经调试了两者，并逐步完成了从启动到触摸单元的每一步，但我无法找出哪里出错了。希望这是我没有看到的显而易见的事情。

编辑：单元格被选中是因为这条线

```
cell.selectionStyle = AQGridViewCellSelectionStyleGlow; 
```

显示被触摸时的单元格变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T21:04:19.107

您必须设置委托。我打赌你忘了。

```
self.gridView.delegate = self;
self.gridView.dataSource = self; 
```

# ruby-on-rails - Mongoid 和嵌入标签

> ID：10608750
> 
> 赞同：2
> 
> 时间：2012-05-15T20:53:18.223
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid, nosql

我有几个模型，每个模型都有标签。例如，a`User`和 a `Post`。我认为两者都应该有嵌入式标签。
用户的嵌入标签是他们的“最爱”，而帖子的标签是与帖子有关的标签。

我正在使用 Mongoid，但我不知道如何拥有一个`Tag`可以找到所有标签的模型（这些标签没有嵌入，我想要一个所有可用标签的单独集合）。

当用户尝试添加标签时，会对其进行检查`Tag.all`以确保它存在。如果是这样，那么它应该嵌入到`User`模型中。

我不知道如何将标签模型嵌入多个模型（`User`和`Post`）或如何嵌入标签模型以及像正常一样检索它们（我收到错误：*不允许访问标签的集合，因为它是嵌入文档，请从根文档访问集合。*）。

想法？我设计这个完全错误吗？我不需要像“检索所有拥有`example`标签的用户”这样的复杂查询，所以我认为我应该嵌入以提高效率。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T00:12:09.513

好吧，第一步是使标签成为多态嵌入。

```
class User
  embeds_many :tags, :as => :taggable
end

class Post
  embeds_many :tags, :as => :taggable
end

class Tag
  embedded_in :taggable, :polymorphic => true
end 
```

然后，您可能会拥有一个包含所有可用标签的 a`user`或 a的实例。然后，您可以在实例上调用它，`post`而不是调用Tag 类`.all`

```
available_user = User.new
available_user.tags << Tag.new
available_user.tags.all 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T04:20:00.313

我的解决方案是拥有一个嵌入多个标签的注册表模型，然后拥有一个实例，该实例具有在添加到用户或帖子之前检查的已注册标签。这与 Ron 的答案基本相同，但不会重载 User。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T21:10:15.130

首先，当您尝试获取嵌入标签时遇到的错误是正常的，这对于实际的 MongoDB 版本是不可能的。

我不是专家，但我可以向您推荐一个可行的解决方案：对*User*和*Post*使用嵌入式标签，并创建一个用于*索引*目的 的*标签*集合。

 **   当用户尝试添加标签时：调用`Tag.all`
    *   如果标签不存在：在*用户*和*标签中创建它*
    *   如果是这样，只需将其嵌入到*User*中。

*Post*也是如此。*

# php - 选项字段的php表单验证取决于从选项中选择的单选字段值

> ID：10608752
> 
> 赞同：0
> 
> 时间：2012-05-15T20:53:23.827
> 
> 标签：php, jquery, forms, validation

我有一个表格，当他们在我的无线电字段值上选择是时，会出现一个新字段来选择一个城市。城市的下拉选项以 select from 开头。我需要选择 from 的第一个选项值为空。因此，仅当用户从单选选项中选择“是”并验证以强制用户选择一个值时，才会对特定字段进行验证。

表单的html部分：

```
<li>            
  <label for="printed">Printed:</label>
  No<input type="radio" name="printed" value="no" class="morefrom" checked >
  Yes<input type="radio" name="printed" value="yes" class="morefrom">
</li>
<li>
  <div id="collectfrom">
    <label for="fromstore">Collect From:</label>
    <select name="fromstore">
      <option value=" ">Choose from</option>
      <option value="nicosia">Nicosia</option>
      <option value="limassol">Limassol</option>
      <option value="paphos">Paphos</option>
    </select>
  </div>
</li> 
```

如果选择是，则显示选项值的 jquery：

```
$(document).ready(function(){
  $('#collectfrom').css('display','none');
  $('.morefrom').click(function(){
    if ($('input[name=printed]:checked').val() == "yes" ) {
        $('#collectfrom').slideDown(); //Slide Down Effect
    } else {
        $('#collectfrom').slideUp();  //Slide Up Effect
    }
  });
}); 
```

以及 php 中的验证

```
if($printed == "yes"){
  if(empty($fromstore)){ $action['result'] = 'error'; array_push($text,'You forgot your city'); }
} 
```

显然php验证是错误的。有什么帮助吗？

新编辑：

你好，

这是完整的 index.php：

```
//setup some variables/arrays
$action = array();
$action['result'] = null;

$text = array();

//check if the form has been submitted
if(isset($_POST['signup'])){

//cleanup the variables
//prevent mysql injection
$name = mysql_real_escape_string($_POST['name']);
$surname = mysql_real_escape_string($_POST['surname']);
$address = mysql_real_escape_string($_POST['address']);
$postcode = mysql_real_escape_string($_POST['postcode']);
$contactnumber = mysql_real_escape_string($_POST['contactnumber']);
$email = mysql_real_escape_string($_POST['email']);
$mobile = mysql_real_escape_string($_POST['mobile']);
$hypernumber = mysql_real_escape_string($_POST['hypernumber']);
$fromstore = mysql_real_escape_string($_POST['fromstore']);
$hcardnumber = mysql_real_escape_string($_POST['hcardnumber']); 

//quick/simple validation
if(empty($name)){ $action['result'] = 'error'; array_push($text,'You forgot your name'); }
if(empty($surname)){ $action['result'] = 'error'; array_push($text,'You forgot your surname'); }
if(empty($address)){ $action['result'] = 'error'; array_push($text,'You forgot your address'); }
if(empty($postcode)){ $action['result'] = 'error'; array_push($text,'You forgot your postcode'); }
if(empty($contactnumber)){ $action['result'] = 'error'; array_push($text,'You forgot your contact number'); }
if(empty($email)){ $action['result'] = 'error'; array_push($text,'You forgot your email'); }
if(empty($mobile)){ $action['result'] = 'error'; array_push($text,'You forgot your mobile'); }
if($printed == "yes"){
          if(empty($_POST['fromstore'])){ $action['result'] = 'error'; array_push($text,'You forgot your city'); }
    }

if($action['result'] != 'error'){

    if($printed == "yes")
            {

           if($fromstore == "nicosia")
           {
            $file = file("nicosia.txt");

            list($hcardnumber) = explode(",", $file[0]);

            $fp = fopen("nicosia.txt", "w+");
            for($i = 1; $i < sizeof($file); ++$i) {
            fwrite($fp, trim($file[$i]) . "\n");
            }
            fclose($fp);

            echo "Your card number is: $hcardnumber.";      
           }else if ($fromstore == "limassol")
           {
            $file = file("limassol.txt");

            list($hcardnumber) = explode(",", $file[0]);

            $fp = fopen("limassol.txt", "w+");
            for($i = 1; $i < sizeof($file); ++$i) {
            fwrite($fp, trim($file[$i]) . "\n");
            }
            fclose($fp);

            echo "Your card number is: $hcardnumber.";      
           }else if ($fromstore == "paphos")
           {
            $file = file("paphos.txt");

            list($hcardnumber) = explode(",", $file[0]);

            $fp = fopen("paphos.txt", "w+");
            for($i = 1; $i < sizeof($file); ++$i) {
            fwrite($fp, trim($file[$i]) . "\n");
            }
            fclose($fp);

            echo "Your card number is: $hcardnumber.";      
           }

            }else if ($printed == "no"){

    $file = file("all.txt");

            list($hcardnumber) = explode(",", $file[0]);

            $fp = fopen("all.txt", "w+");
            for($i = 1; $i < sizeof($file); ++$i) {
            fwrite($fp, trim($file[$i]) . "\n");
            }
            fclose($fp);

            echo "Your card number is: $hcardnumber.";      
    }
            //add to the database
    $add = mysql_query("INSERT INTO `users` VALUES(NULL,'$name','$surname','$address','$postcode','$contactnumber','$email','$mobile','$hypernumber','$printed','$fromstore',0,'$hcardnumber')");

    if($add){

        //get the new user id
        $userid = mysql_insert_id();

        //create a random key
        $key = $name . $email . date('mY');
        $key = md5($key);

        //add confirm row
        $confirm = mysql_query("INSERT INTO `confirm` VALUES(NULL,'$userid','$key','$email')"); 

        if($confirm){

            //include the swift class
            include_once 'inc/php/swift/swift_required.php';

            //put info into an array to send to the function
            $info = array(
                'name' => $name,
                'email' => $email,
                'key' => $key,
                'hcardnumber' => $hcardnumber);

            //send the email
            if(send_email($info)){

                //email sent
                $action['result'] = 'success';
                array_push($text,'Thanks for signing up. Please check your email for confirmation!');

            }else{

                $action['result'] = 'error';
                array_push($text,'Could not send confirm email');

            }

        }else{

            $action['result'] = 'error';
            array_push($text,'Confirm row was not added to the database. Reason: ' . mysql_error());

        }

    }else{

        $action['result'] = 'error';
        array_push($text,'User could not be added to the database. Reason: ' . mysql_error());

    }

}

$action['text'] = $text;

}

?>

<?php
include 'inc/elements/header.php'; ?>

<?= show_errors($action); ?>

<form method="post" action="">

   <fieldset>

        <ul>
        <li>
            <label for="name">Name:</label>
            <input type="text" name="name" />
        </li>
        <li>
            <label for="surname">Surname:</label>
            <input type="surname" name="surname" />
        </li>
        <li>
            <label for="address">Address:</label>
            <input type="address" name="address" />
        </li>
        <li>
            <label for="postcode">Post Code:</label>
            <input type="postcode" name="postcode" />
        </li>
        <li>
            <label for="contactnumber">Contact Number:</label>
            <input type="contactnumber" name="contactnumber" />
        </li>
        <li>
            <label for="email">Email:</label>
            <input type="text" name="email" />  
        </li>
        <li>
            <label for="mobile">Mobile:</label>
            <input type="mobile" name="mobile" />
        </li>
        <li>
            <label for="hypernumber">Hypercard Number:</label>
            <input type="hypernumber" name="hypernumber" />
        </li>
        <li>            
            Printed:
            <label for="printed_no">No</label>
            <input type="radio" name="printed" value="no" class="morefrom" checked="checked" id="printed_no">
                    <label for="printed_yes">Yes</label>
                    <input type="radio" name="printed" value="yes" class="morefrom">
        </li>
        <li>
        <div id="collectfrom">
                <label for="fromstore">Collect From:</label>
            <select name="fromstore" id="fromstore">
                <option value="">Choose from</option>
                <option value="nicosia">Nicosia</option>
                <option value="limassol">Limassol</option>
                <option value="paphos">Paphos</option>

        </select>
        </div>
        </li>
 <li>
            <input type="hidden" name="hcardnumber" value="<?php echo $hcardnumber ?>"/>
        </li>

        <li>
            <input type="submit" value="Signup Now" class="large blue button" name="signup" />          
        </li>
    </ul>

</fieldset>

</form> 
```

我仍然无法让表单验证并检查单选按钮是否选中，然后检查 fromstore 是否已选择选项值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T21:14:41.243

首先， $fromstore 的值始终至少是一个空格字符，并且在您的示例中永远不会为空，因为您在 HTML 中为它提供了一个文本值（即使一个空格仍然作为文本值发送） ）。从您发送到 PHP 的内容中删除空间，if(empty()) 条件将开始正确评估。

其次，当您的表单输入具有关联的 ID 时，最好使用该元素。这样，当您单击标签本身时，表单元素会自动获得焦点（可访问性和可用性要好得多）。每个输入都应该有一个相关的标签，简单地描述输入的用途/代表什么。

修改您的 HTML 使其看起来更像这样：

```
<li>            
    Printed:
    <label for="printed_no">No</label>
    <input type="radio" name="printed" value="no" class="morefrom" checked="checked" id="printed_no">
    <label for="printed_yes">Yes</label>
    <input type="radio" name="printed" value="yes" class="morefrom">
</li>
<li>
    <div id="collectfrom">
        <label for="fromstore">Collect From:</label>
        <select name="fromstore" id="fromstore">
            <option>Choose from</option>
            <option value="nicosia">Nicosia</option>
            <option value="limassol">Limassol</option>
            <option value="paphos">Paphos</option>
        </select>
    </div>
</li> 
```

另外，您没有在上面的代码片段中包含该元素，您确定设置它并运行您的 PHP 脚本吗？我会假设你是，但只是想确保;）

最后，您似乎依赖于启用 PHP 的 register_globals 设置，这是非常古老的做法，您应该考虑更新自己以使用更广泛接受的方法。现在大多数服务器都没有启用 register_globals，如果您从一台服务器迁移到另一台服务器，您可能会发现您的脚本会中断。

在这里查看更多信息：

[为什么 REGISTER_GLOBALS 如此糟糕？](https://stackoverflow.com/questions/1417373/why-is-register-globals-so-bad)

在这种情况下，请将您的 PHP 更新为：

```
if($_POST['printed'] == "yes"){
    if(empty($_POST['fromstore'])){ 
        $action['result'] = 'error';

        /* I assume $text used below is a variable instantiated
         * somewhere else in this script and isn't sent from the
         * form. Thus I've left it as $text instead of $_POST['text']
         */
        array_push($text,'You forgot your city');
    }
} 
```

希望这可以帮助，

尼尔

# opencv - 使用 Cuda 编译 OpenCv

> ID：10608762
> 
> 赞同：0
> 
> 时间：2012-05-15T20:54:21.247
> 
> 标签：opencv, cuda, cmake

我发出这个命令

cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/developments/opencv/install/opencv/* -D WITH_CUDA=ON -D CUDA_TOOLKIT_ROOT_DIR=/usr/local/cuda/ ..

但总是cmake给我

-- 其他第三方库： -- 使用 IPP：否 -- 使用 TBB：否 -- 使用 Cuda：否 -- 使用 Eigen：否 -- 使用 Clp：否

怎么做到呢？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T02:32:00.490

很可能您没有安装所需的 CUDA 版本。cmake 的输出应该会警告您。

OpenCV 2.3.1 仅支持 CUDA 4.0。

OpenCV 2.4 支持 CUDA 4.1 和 4.2。

# ruby-on-rails - 如何编写一个按月返回计数的rails查询？

> ID：10608765
> 
> 赞同：5
> 
> 时间：2012-05-15T20:54:47.177
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

采用标准 NewsFeed 模型 (id,user_id)

如何在 NewsFeed 模型中查询每个月的记录数，然后排除一些 user_id？

**结果将产生：**

```
Jan - 313
Feb - 3131
Mar - 44444
etc... 
```

有没有一种简单的方法可以用 rails 来做到这一点，或者您是否需要为每个月编写一个查询？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-02-05T13:15:30.390

在 Rails 4 中，这样做的方法是在模型上创建范围。

```
class NewsFeed < ActiveRecord::Base
  scope :group_by_month,   -> { group("date_trunc('month', created_at) ") }
  scope :exclude_user_ids, -> (ids) { where("user_id is not in (?)",ids) }
end 
```

然后你会这样称呼它：

```
@counts = NewsFeed.exclude_user_ids(['1','2']).group_by_month.count 
```

这会给你：

```
{2014-01-01 00:00:00 UTC=>313, 2014-02-01 00:00:00 UTC=>3131} 
```

然后你输出（haml）：

```
- @counts.each do |m|
  = "Month: #{m[0].strftime("%b")}, Count: #{m[1]}" 
```

这将导致：

```
Month: Jan, Count: 313
Month: Feb, Count: 3131 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T21:28:16.143

活动记录中有可用的计数和组语句，因此您可以执行类似的操作

```
NewsFeed.count(:group=>"date_trunc('month', created_at)",:conditions=>"user_id NOT IN (?)",[exluded_ids]) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T06:15:15.873

也许这会起作用：

```
monthly_counts = NewsFeed.select("date_trunc('month', created_at) as month, COUNT(id) as total").where("user_id NOT IN (?)",[exluded_ids]).group("month")
monthly_counts.each do |monthly_count|
  puts "#{monthly_count.month} - #{monthly_count.total}"
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T21:36:45.023

[http://railscasts.com/episodes/29-group-by-month](http://railscasts.com/episodes/29-group-by-month)

```
NewsFeed.where("user_id is not in (?)",[user_ids]).group_by { |t| t.created_at.beginning_of_month } => each {|month,feed| ...}

NewsFeed.select("*,MONTH(created_at) as month").where("user_id is not in (?)",[user_ids]).group("month") => ... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-01T09:32:08.117

在 Rails 5 中

```
NewsFeed.select('id').group("date_trunc('month', created_at)").count 
```

# asp.net-mvc - 发布具有多个部分视图的表单

> ID：10608766
> 
> 赞同：34
> 
> 时间：2012-05-15T20:54:51.403
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, http-post, partial-views

我目前正在尝试发布一个由两个强类型视图组成的表单。这个问题很相似，但没有答案：

[MVC 3 Razor 表单发布，带多个强类型的部分视图不绑定](https://stackoverflow.com/questions/8592136/mvc-3-razor-form-post-w-multiple-strongly-typed-partial-views-not-binding)

当我提交表单时，提交给控制器的模型始终为空。我花了几个小时试图让它工作。这似乎应该很简单。我在这里错过了什么吗？我不需要做 ajax 只需要能够发布到控制器并呈现一个新页面。

谢谢

这是我的视图代码：

```
<div>
    @using (Html.BeginForm("TransactionReport", "Reports", FormMethod.Post, new {id="report_request"}))
    {
        ViewContext.FormContext.ValidationSummaryId = "valSumId";
        @Html.ValidationSummary(false, "Please fix these error(s) and try again.", new Dictionary<string, object> { { "id", "valSumId" } });
        @Html.Partial("_ReportOptions", Model.ReportOptions);
        @Html.Partial("_TransactionSearchFields", new ViewDataDictionary(viewData) { Model = Model.SearchCriteria });
    } 
```

这是控制器中的代码：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult TransactionReport(TransactionReportRequest reportRequest)
{
    var reportInfo = new List<TransactionReportItem>();

    if (ModelState.IsValid)
    {
        var reportData = _reportDataService.GetReportData(Search.MapToDomainSearchCriteria(reportRequest.SearchCriteria));
        if (reportData!=null)
        {
            reportInfo = reportData.ToList();
        }
        return View(reportInfo);
    }
    return View(reportInfo);
} 
```

部分视图本身是无关紧要的，因为他们所做的只是投标和展示他们的模型。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-05-15T21:02:35.723

部分不是这里的方式。您正在寻找 EditorTemplates，这些都是为您想要的。在这种情况下，您的属性将很好地绑定到您的模型（您将提交）。

您的主视图将具有这种形式（请注意，您只需要使用`EditorFor`而不是`Partial`；在这种情况下，您可能需要将该 viewData 参数放在 ViewBag 左右）：

```
@using (Html.BeginForm("TransactionReport", "Reports", FormMethod.Post, new {id="report_request"}))
{
    ViewContext.FormContext.ValidationSummaryId = "valSumId";
    @Html.ValidationSummary(false, "Please fix these error(s) and try again.", new Dictionary<string, object> { { "id", "valSumId" } });
    @Html.EditorFor(model => model.ReportOptions);
    @Html.EditorFor(model = Model.SearchCriteria });
} 
```

现在您只需将您的部分拖到文件夹`~/Shared/EditorTemplates/`并重命名它们以匹配它们作为编辑器模板的模型名称。

在`~/Shared/EditorTemplates/`文件夹中，创建一个新的“视图”，例如“SearchCriteria.cshtml”。在里面，将您要为其创建编辑器模板的类的类型作为“模型”。示例（示例类具有属性`Name`和`OtherCriteria`）：

```
@model MyNamespace.SearchCriteria
<ul>
    <!-- Note that I also use EditorFor for the properties; this way you can "nest" editor templates or create custom editor templates for system types (like DateTime or String or ...). -->
    <li>@Html.LabelFor(m => m.Name): @Html.EditorFor(m => m.Name)</li>
    <li>@Html.LabelFor(m => OtherCriteria): @Html.EditorFor(m => m.OtherCriteria</li>
</ul> 
```

一些关于它们的好读物：

*   [https://www.exceptionnotfound.net/asp-net-mvc-demystified-display-and-editor-templates/](https://www.exceptionnotfound.net/asp-net-mvc-demystified-display-and-editor-templates/)
*   [https://www.hanselman.com/blog/ASPNETMVCDisplayTemplateAndEditorTemplatesForEntityFrameworkDbGeographySpatialTypes.aspx](https://www.hanselman.com/blog/ASPNETMVCDisplayTemplateAndEditorTemplatesForEntityFrameworkDbGeographySpatialTypes.aspx)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-03-19T14:57:58.110

您应该在 PartialView 的字段中添加前缀。这将使绑定数据正确。

所以与其：

```
@Html.Partial("_ReportOptions", Model.ReportOptions); 
```

采用：

```
@Html.Partial("_ReportOptions", Model.ReportOptions, new ViewDataDictionary { TemplateInfo = new TemplateInfo { HtmlFieldPrefix = "ReportOptions" }}) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-15T21:10:56.457

我同意@Styxxy 和@Tony，编辑器模板是更好的解决方案。但是，您的问题是您将子模型提供给部分视图。因此，当局部视图呈现时，它不知道它是更大模型的一部分，也不会生成正确的名称属性。

如果您坚持使用部分而不是编辑器模板，那么我建议只将模型传递给部分，然后让每个部分执行 Model.Whatever.Foo ，它将生成正确的名称属性以进行绑定。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-15T21:06:07.337

尝试使用 EditorTemplates 而不是 Partials [http://coding-in.net/asp-net-mvc-3-how-to-use-editortemplates/](http://coding-in.net/asp-net-mvc-3-how-to-use-editortemplates/)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-15T05:39:10.973

```
@Html.Partial("_ReportOptions", Model.Contact, new ViewDataDictionary()
           {
               TemplateInfo = new TemplateInfo()
                   {
                       HtmlFieldPrefix = "Contact"
                   }
           })

)

@Html.Partial("_TransactionSearchFields", Model.SearchCriteria, new  
 ViewDataDictionary()
           {
               TemplateInfo = new TemplateInfo()
                   {
                       HtmlFieldPrefix = "SearchCriteria"
                   }
           }) 
```

# video - 横向模式下的 Titanium 视频播放器

> ID：10608767
> 
> 赞同：0
> 
> 时间：2012-05-15T20:54:52.793
> 
> 标签：video, titanium-mobile

我想在 Titanium 中添加视频，但不幸的是它以纵向模式插入。如何在不转动控件的情况下将其变为横向？

下面的代码显示它又高又瘦。

```
var videoPlayer = Ti.Media.createVideoPlayer({
    backgroundColor: 'red',
    media:movieFile,
    width: 280,
    height: 187,
    //top:2,
    mediaControlStyle : Titanium.Media.VIDEO_CONTROL_DEFAULT,
    scalingMode : Titanium.Media.VIDEO_SCALING_ASPECT_FIT
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T20:57:31.280

尝试这个

```
var videoPlayer = Ti.Media.createVideoPlayer({
backgroundColor: 'red',
media:movieFile,
width: 187,
height: 280,
//top:2,
mediaControlStyle : Titanium.Media.VIDEO_CONTROL_DEFAULT,
scalingMode : Titanium.Media.VIDEO_SCALING_ASPECT_FIT
}); 
```

# iphone - 设置 UIBarButtonItem 的大小

> ID：10608772
> 
> 赞同：1
> 
> 时间：2012-05-15T20:55:18.590
> 
> 标签：iphone, cocoa-touch, uibarbuttonitem

> **可能重复：**
> [如何在代码中调整 UIBarButtonItem 的大小](https://stackoverflow.com/questions/6950325/how-to-resize-uibarbuttonitem-in-code)

我尝试使用 IB 设置 UIBarButtonItem 的大小，但徒劳无功

![在此处输入图像描述](../Images/0d89294b058c05785f3599b8e08bb9d5.png)

我想减小宽度并增加高度。我该怎么做？请问有什么指点吗？设置宽度属性（如上图所示）似乎并没有改变任何东西。我也尝试像这样以编程方式设置它：

```
UIBarButtonItem *historyButton = [[UIBarButtonItem alloc]
                                  initWithTitle:@"History" style:UIBarButtonItemStyleBordered target:self action:@selector(history:)];
historyButton.width = 3.0; 
```

这也没有改变任何东西。

这是正在尝试修复的条形按钮（红色按钮）：

![在此处输入图像描述](../Images/2de664ca0e69bfc929754c1f341cdd6b.png)

* * *

## 回答 #1

> 赞同：-5
> 
> 时间：2012-05-15T22:21:32.290

您需要调整 UIBarButtonIte 的框架

某事喜欢：

```
historyButton.frame = CGRectMake(0, 0, buttonImage.size.width, buttonImage.size.height); 
```

您可以在本教程中看到它：

[http://iphone-dev-kitchan.blogspot.fr/2010/05/customizing-uibarbutton-on.html](http://iphone-dev-kitchan.blogspot.fr/2010/05/customizing-uibarbutton-on.html)

# c++ - 关于 char* 和 char[] 基础的问题

> ID：10608776
> 
> 赞同：2
> 
> 时间：2012-05-15T20:55:37.140
> 
> 标签：c++, char

> **可能重复：**
> [C 中的 char s[] 和 char *s 有什么区别？](https://stackoverflow.com/questions/1704407/what-is-the-difference-between-char-s-and-char-s-in-c)
> [char a[]=“string”的区别；字符 *p=“字符串”；](https://stackoverflow.com/questions/2938895/difference-between-char-a-string-char-p-string)

首先，我想问一下我在哪里可以学习 char* 和 char[] 的所有基础知识。

大多数时候，我发现自己在为如何比较和如何声明而苦苦挣扎。

**示例 1：**

```
 char *test = "hello world"; 
```

这将在编译时产生以下警告：

```
 warning: deprecated conversion from string constant to ‘char*’ 
```

**示例 2：**

```
 vector<char*> test2;
   test2.push_back("hello world"); 
```

这将产生复制字符串的错误。

所以我想出的解决方案是：

（它是否正确？）

```
 vector<char*> test3;
   char *str1 = "hello world"
   test3.push_back(str1); 
```

提前致谢！:)

============================================

这里的人提供的两本好书：

[char s[] 和 char *s 有什么区别？](https://stackoverflow.com/questions/1704407/what-is-the-difference-between-char-s-and-char-s-in-c)

[char a[]="string"; 之间的区别 字符 *p="字符串";](https://stackoverflow.com/questions/2938895/difference-between-char-a-string-char-p-string)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T21:00:36.003

您的问题“我在哪里可以学习 char* 和 char[] 的所有基础知识”可能过于笼统，但您可以尝试阅读 C++ 规范。

通过将示例 1 更改为来修复示例 1

```
char const *test = "hello world"; 
```

通过将示例 2 更改为来修复示例 2

```
vector<std::string> test2;
test2.push_back("hello world"); 
```

或者，如果您真的想要一个指向 c 字符串的非拥有指针向量：

```
vector<char const *> test2;
test2.push_back("hello world"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T21:01:10.063

你可以在你最喜欢的关于 C 的书中学到很多关于`char*`/的知识`char[]`（不是关于 C++，因为 C++ 提供了比 C 更好的表示字符串的工具）。

声明/分配

```
char *test = "hello world"; 
```

应该

```
const char *test = "hello world"; 
```

因为字符串文字是指向常量的指针。如果你想要一个`vector`C++ 中的字符串，你可以这样做：

```
std::vector<std::string> test2;
test2.push_back("hello world"); 
```

这是可行的，因为字符串文字可以隐式转换为`std::string`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-15T21:08:56.183

所以要记住的是指向值的指针和值本身之间的区别。

值本身是变量表示存储在内存中的文字值。指针是存储某些值的内存地址。

指针很有用，因为它们允许您访问、更改和保存跨多个函数/方法的信息更改，当您意识到只能从任何函数返回一个值时，这会派上用场，但有时您需要比这更多的信息.

数组的问题在于，虽然很多人在第一次学习 C++ 时并没有意识到这一点，但它们是指针。A[0] 不是变量，它是指向内存地址的指针。数组很方便，因为在声明数组时，您会分割出为该数组保留的一部分内存。这很有用，因为它允许您非常快速地访问存储在该内存块中的值。

所以实际上，声明指针 (char*) 和数组 (char[]) 之间并没有太大区别，只是指针将引用内存中的单个位置，而数组将引用内存中的一组连续位置。

要了解有关指针以及如何正确使用它们的更多信息，请访问[http://www.cplusplus.com/doc/tutorial/pointers/](http://www.cplusplus.com/doc/tutorial/pointers/)。

# c - 如何在 C 中实现引用计数？

> ID：10608781
> 
> 赞同：11
> 
> 时间：2012-05-15T20:56:09.873
> 
> 标签：c, memory-management, concurrency, garbage-collection

[在这里](http://en.wikipedia.org/wiki/Reference_counting)阅读它。

我需要实现这样一个接口的变体，假设我们有很大的内存空间来管理应该有 getmem(size) 和 free(pointer to block) 函数必须确保 free(pointer to block) 可以实际释放当且仅当使用该块的所有进程都使用它完成时，内存。

我正在考虑做的是将一个`Collectable`结构定义为指向块的指针，它的大小以及使用它的进程计数。然后，每当一个进程`Collectable`第一次使用结构实例时，它必须显式地增加计数，并且每当进程`free()`使用它时，计数就会减少。

这种方法的问题是所有进程都必须响应该接口并使其显式工作：每当将可收集指针分配给实例时，进程必须显式地包含该计数器，这不满足我，我在想也许有一种方法可以为此创建一个宏以在每个分配中隐式发生？

我正在寻找解决这个问题的方法一段时间，所以其他方法和想法会很棒......

**编辑：**上述方法不满足我不仅因为它看起来不太好，而且主要是因为我不能假设正在运行的进程的代码会关心更新我的计数。我需要一种方法来确保它在不更改进程代码的情况下完成......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T21:13:33.673

引用计数的一个早期问题是，通过将代码放入自定义 malloc / free 实现中来计算初始引用相对容易，但要确定初始接收者是否将该地址传递给其他人则相当困难。

由于 C 缺乏覆盖赋值运算符（以计算新引用）的能力，因此基本上您只剩下有限数量的选项。唯一可以覆盖赋值的是macrodef，因为它能够将赋值重写为内联引用计数值的增量。

所以你需要“扩展”一个看起来像的宏

```
a = b; 
```

进入

```
if (b is a pointer) { // this might be optional, if lookupReference does this work
  struct ref_record* ref_r = lookupReference(b);
  if (ref_r) {
    ref_r->count++;
  } else {
    // error
  } 
}
a = b; 
```

真正的诀窍是编写一个可以识别分配的宏，并干净地插入代码而不会引入其他不需要的副作用。由于 macrodef 不是一门完整的语言，您可能会遇到无法匹配的问题。

（关于在学习如何使用锤子的地方看到钉子的笑话在这里有一个有趣的相似之处，除了当你只有一把锤子时，你最好学习如何把所有东西都做成钉子）。

其他选项（也许更理智，也许不是）是跟踪 malloc 分配的所有地址值，然后扫描程序的堆栈和堆以查找匹配的地址。如果匹配，您*可能*找到了一个有效的指针，或者您可能找到了一个带有运气编码的字符串；但是，如果你不匹配，你当然可以释放地址；只要他们不存储从原始地址计算的地址+偏移量。（也许您可以使用宏定义来检测此类偏移，并将偏移添加为扫描同一块的多个地址）

最后，如果不构建引用系统，将不会有一个万无一失的解决方案，您可以在其中传回引用（假装地址）；隐藏真实地址。这种解决方案的缺点是*每次*要处理地址时都必须使用库接口。这包括数组中的“下一个”元素等。不是很像 C，但很好地近似于 Java 对其引用所做的事情。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T21:27:37.103

半认真的回答

```
#include "Python.h" 
```

Python 有一个很棒的引用计数内存管理器。如果我必须在生产代码中真正做到这一点，而不是家庭作业，我会考虑将 python 对象系统嵌入到我的 C 程序中，这将使我的 C 程序也可以在 python 中编写脚本。如果您有兴趣，请参阅[Python C API 文档！](http://docs.python.org/c-api/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T22:30:33.093

这样的 C 语言系统需要程序员的一些纪律，但是......

您需要考虑所有权。所有持有引用的东西都是所有者，并且必须跟踪它持有引用的对象，例如通过列表。当一个引用持有的东西被销毁时，它必须循​​环它的引用对象列表并减少它们的引用计数器，如果为零则依次销毁它们。

函数也是所有者并且应该跟踪引用的对象，例如通过在函数的开头设置一个列表并在返回时循环遍历它。

因此，您需要确定在哪些情况下对象应该被转移或与新所有者共享，并将相应的情况包装在宏/函数中，这些宏/函数将拥有的对象添加或删除到拥有对象的引用对象列表中（并相应地调整引用计数器）。

最后，您需要通过检查堆栈上的对象/指针不再可访问的对象来以某种方式处理循环引用。这可以通过一些标记和清除垃圾收集机制来完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T21:08:54.830

我认为如果没有可覆盖的析构函数/构造函数，您无法自动执行此操作。您可以查看 HDF5 引用计数，但那些需要在 C 中显式调用：

[http://www.hdfgroup.org/HDF5/doc/RM/RM_H5I.html](http://www.hdfgroup.org/HDF5/doc/RM/RM_H5I.html)

# sockets - 如何通过以太网在两个嵌入式设备之间进行通信？

> ID：10608788
> 
> 赞同：3
> 
> 时间：2012-05-15T20:56:48.203
> 
> 标签：sockets, tcp-ip

我不是这方面的专家，需要你的建议。我在以太网/局域网上有一些设备。我想让这些设备通过 LAN 进行通信，而无需进入它们的网络配置。以下是我的计划，请告诉我是否可以实现：

1) 我在这些设备上安装 TCP/IP 堆栈

2）我给他们他们的主机名，如设备1，设备2等......

3）我将这些设备配置为本地链接网络，以便他们可以配置自己并获取他们的 IP。

4）我使用套接字编程并使用主机名访问每个设备。

请让我知道这是否可以轻松完成，如果我错过了上述几点，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T21:41:54.523

这基本上是一个好方法。

如果您的嵌入式设备具有良好的 IPv6 堆栈，我建议使用它而不是 IPv4。链接本地地址更适用于 IPv6。大多数 IPv4 堆栈都配置为首先尝试从 DHCP 服务器获取地址，如果无法获取地址，则仅回退到链接本地地址。链路本地地址和 DHCP 地址可能是互斥的，因此链路本地地址只有在尝试 DHCP 并超时后才会生效。如果 DHCP 定期重试，链接本地地址甚至可能会中断。虽然设备通常会相互连接并且不会有 DHCP 服务器，但您不想禁用 DHCP，因为设备可能*应该*如果它们曾经连接到更广泛的网络，则获取 DHCP 地址。另一方面，对于 IPv6，当接口出现时，链路本地地址会立即出现，并在其他 IP 地址（来自 autoconf 或来自 DHCPv6）可能来来去去时持续保持。

单独链接本地地址不会让设备通过主机名相互联系，但 dns-sd (mDNS, zeroconf) 会。如果您使用的是 Linux，那么您可以将 avahi 用作 dns-sd 堆栈。

比使用主机名更好，考虑让设备通过 dns-sd 服务类型相互探测。如果您在设备之间使用自定义协议，请创建一个唯一的服务 tpe 名称，并让设备自己宣传它并使用 dns-sd 进行探测。

# java - 从链表 LUT 中删除节点？

> ID：10608789
> 
> 赞同：2
> 
> 时间：2012-05-15T20:56:53.430
> 
> 标签：java, memory-management, linked-list

我们正在尝试编写一种方法来从 LUT 的链表实现中删除具有特定键的节点。

我写的代码总结：

```
public void delete (String k) {

    Node currNode = listHead;
    Node prevNode = listHead;

    Key key = new Key (k);

    while (!currNode.key.equals(k) && currNode != null){
        prevNode = currNode;
        currNode = currNode.next;
    }

    if (currNode == listHead) {
      listHead = listHead.next;
    } else {
      prevNode.next = currNode.next;
    }
} 
```

我的朋友写了基本相同的东西，但没有使用以前的节点指针，而是写在他的最后一行：

```
currNode = currNode.next //detach point, override 
```

这两个是等价的吗？我想我对 Java 内存管理感到困惑。
如果您已经在`listHead`其他地方创建了节点，并且您编写：

```
Node currNode = listHead; 
```

`currNode`只是存储对存储位置的内存位置的引用`listHead`，对吗？因此，当您这样做时，在 while 循环中，您要做`currNode = currNode.next`的是转到引用的内存位置`currNode`并查看变量 next 并将对该内存位置的引用存储在`currNode`? 所以基本上更新`currNode`指向的地方。这意味着我朋友的代码是错误的，对吧？因为他的代码同样意味着：“`currNode`用”的内存位置更新当前的引用`currNode.next`。

有人介意帮我除雾吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T21:27:25.570

您的朋友不可能是对的，因为必须更改 a 的`.next`字段才能从列表`Node`中删除 a 。`Node`

正如我想象`N`的那样，要从列表中删除节点，您需要将节点的`.next`字段设置`N-1`为引用节点`N+1`。你朋友的方法不可能这样做，因为它不会改变任何节点的`.next`字段。

至于内存，一旦`N-1`的`.next`字段指的是`N+1`，则`N`列表不再保持活动状态。它是否有资格进行垃圾收集取决于程序中的其他任何内容是否引用了它。但现在这份名单已经洗白了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T21:50:17.817

您已经得到了查询的正确答案，但是您的代码中有一些错误无法放入评论中。

**`NullPointerException`**

您的`while`循环条件是向后的。它应该是

```
while (currNode != null && !currNode.key.equals(k)) { ... } 
```

避免`NullPointerException`当您到达列表末尾或列表没有节点开始时。

**未找到值**

该方法不处理`k`列表中不包含的情况。您需要在 while 循环之后进行`currNode`检查。`null`

```
if (currNode != null) {
    if (currNode == listHead)
        listHead = listHead.next;
    else
        prevNode.next = currNode.next;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T21:30:28.207

您的分析是正确的——您朋友的代码实际上不会从列表中删除该节点。

我认为使用调试器单步执行您的代码可能有助于消除迷雾。如果您还没有使用集成开发环境 (IDE)，我建议您使用 IntelliJ IDEA、Eclipse 或 Netbeans——它们都包含调试器。

# java - Java Swing 使用选项卡存储和呈现文本

> ID：10608790
> 
> 赞同：1
> 
> 时间：2012-05-15T20:56:56.937
> 
> 标签：java, html, swing, rtf, jeditorpane

我的 Swing 应用程序包含一个 JEditorPane，它允许用户以所见即所得的方式编辑文本，包括粗体、斜体和设置字体等的工具栏按钮。

JEdi​​torPane 上的内容类型是 text/html

问题：用户希望能够在编辑器窗格中键入制表符，关闭编辑对话框（将 HTML 文本保存到持久存储）并查看他们的制表符呈现。但是，HTML 将所有空格视为单个空格。

```
public class NoteTest {
    public static void main(String[] args) {
        final JEditorPane editPane1 = new JEditorPane("text/html", "Try typing some tabs");
        editPane1.setPreferredSize(new Dimension(400, 300));
        JOptionPane.showMessageDialog(null, new JScrollPane(editPane1));
        JOptionPane.showMessageDialog(null, new JScrollPane(new JEditorPane("text/html", editPane1.getText()))); // where did the tabs go?
    }
} 
```

在第一个 JEditorPane 中键入选项卡后，我们从中获取 HTML 文本，并将其传递给第二个 JEditorPane，它将选项卡呈现为空格。

如何呈现这些选项卡？我应该将用户输入的内容保存为 RTF 而不是 HTML？我是否应该解析 HTML 并构建一个包含行和单元格的 HTML 表格（呃）。或者有什么方法可以告诉 swing 将制表符呈现为制表符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T21:08:32.770

为了尽快获得更好的帮助，请发布 SSCCE。此 SSCCE 未显示您描述的行为。

![包含标签的文本](../Images/47eca71a45e8baf3b26a4a468275ce44.png)

`n`请注意&之间`g`的“制表符” `typin g`。

```
import java.awt.Dimension;
import javax.swing.*;

public class NoteTest {
    public static void main(String[] args) {
        final JEditorPane editPane1 = new JEditorPane("text/html", "Try typing some tabs");
        editPane1.setPreferredSize(new Dimension(400, 300));
        JOptionPane.showMessageDialog(null, new JScrollPane(editPane1));
        JOptionPane.showMessageDialog(null, new JScrollPane(new JEditorPane("text/html", editPane1.getText()))); // where did the tabs go?
    }
} 
```

最后有一些标签消失了，但这是有道理的，因为除非包含在`pre`元素中，否则 HTML 不正确支持标签。我猜 Swing HTML 解析忽略它们是多余的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T05:59:33.227

如果您对文本和制表符使用 < PRE > </PRE > 标记怎么办？

# javascript - Backbone：如何将 myView 渲染到 DOM 中

> ID：10608799
> 
> 赞同：1
> 
> 时间：2012-05-15T20:57:47.357
> 
> 标签：javascript, backbone.js, backbone-events

我希望这段代码足以理解问题。
问题如下，

1）我第一次加载 myView，
2）如果我点击`div#myId`，该功能`myAction`会按预期触发一次。3) 如果为另一个视图
调用该方法，该函数会被触发两次。 4）然后，如果我重复步骤 3），该功能被触发 3 次，依此类推。`remove``rendering``myAction`
`myAction`

可能是什么问题呢？

```
var myView = Backbone.View.extend({

    // The DOM events specific to an item.
    events: {
        "click #myId" : "myAction"
    },

    myAction: function () {
        // some code
    },

    remove: function remove () 
    {
        $(this.el).html("");
    }

}); 
```

PS：
为每个渲染调用创建的 DOM 是可以的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T21:27:46.380

通常这里的问题是您处于某种状态，您一遍又一遍地重新渲染预定义元素的视图，而没有正确破坏视图，从而导致“僵尸”视图。如果您`el`在视图中定义了一个，并继续在其上渲染所述视图，您最终将复制您的事件。

以 jQuery 为例，如果你这样做几次：

```
$(document).bind('click',function(){ console.log("document.click"); });
$(document).bind('click',function(){ console.log("document.click"); });
$(document).bind('click',function(){ console.log("document.click"); }); 
```

它将触发该事件三次。

好好看看你如何初始化你的视图，最重要的是你如何渲染/重新渲染它们。

您在删除方法中必须做的更多是这些方面的事情

```
remove: function remove () 
{
    this.$el.remove();
    this.$el.unbind();
} 
```

# php - PHP 本地化 - 获取文本或数组？

> ID：10608802
> 
> 赞同：1
> 
> 时间：2012-05-15T20:57:58.797
> 
> 标签：php, arrays, localization, gettext

设置多语言网站我现在需要决定我需要为网站上的静态文本使用哪个选项。让我解释一下我的站点设置，然后您是否可以帮助我决定使用哪种解决方案。

该站点是一个 CMS 系统，它允许多个域指向同一个目录并根据域名提供内容。所以所有域共享相同的代码。在该站点上，我创建了代码块，称为模块，它们执行特定的工作。所以我可能有一个模块，它所做的只是显示来自数据库的最新消息。然后我可以决定该模块可以显示在哪个页面上以及它将显示在哪个站点上。所以我的问题是，gettext 是否适用于可能在不同页面上显示不同模块的多个域？或者我应该为每个模块创建一个语言文件，其中包含一个数组，该数组具有该特定模块的语言对话？所以如果我有 10 个模块，每个模块都有自己的语言文件，每个模块显示的任何页面都只是引用该模块的语言文件中的数组来决定显示什么文本？希望这是有道理的，我阅读了很多关于 gettext 和使用数组版本的内容，但无法确定哪一个更适合这种类型的站点设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T23:01:29.530

在我看来 PHP gettext 是要走的路。在我所有的项目中，我都使用 wordpress 风格进行翻译。[http://codex.wordpress.org/Translating_WordPress](http://codex.wordpress.org/Translating_WordPress)并使用相同的函数命名约定：

```
__('message') // Return the translation
_e('message') // echo's the translation
_n('singular_message', 'plural_message', count ) // return singular or plural 
```

我使用 poedit [http://www.poedit.net/](http://www.poedit.net/)从 PHP 源代码中提取可翻译的字符串并将它们翻译成其他语言。在所需的 PHP gettext 目录结构中存储和编译文件，如下所示：

```
en_US/LC_MESSAGES/default.mo
nl_NL/LC_MESSAGES/default.mo
de_DE/LC_MESSAGES/default.mo 
```

请注意，.mo 文件由 PHP 缓存，并且在您重新启动网络服务器之前，.mo 文件中的更改不存在。在开发时拔掉头发我遇到了这个非常有用的解决方案：http: [//blog.ghost3k.net/articles/php/11/gettext-caching-in-php](http://blog.ghost3k.net/articles/php/11/gettext-caching-in-php)

整个 gettext 事情花了我一段时间来解决，但这是值得的。一旦到位，它为我节省了大量时间，并允许我的客户自己为他们的项目进行翻译。

如果您想激活社区来翻译您的项目，请查看基于 Web 的翻译工具[Pootle](http://pootle.translatehouse.org/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T21:07:47.477

很多 CMS 使用数组版本。我也见过 GetText 用于可扩展的应用程序。数组版本更简单，尤其是当您想从 Web 界面管理翻译时。

这当然是一个偏好问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T21:19:33.437

以我的经验，原始 gettext 不太适合内容随时间而变化并且通常在正式发布周期之外的网站环境。

我建议你看看[Zend_Translate](http://framework.zend.com/manual/en/zend.translate.introduction.html)（和[Zend_Locale](http://framework.zend.com/manual/en/zend.locale.introduction.html)，如果你想本地化日期、数字等）。Zend_Translate 是一个更高级别的库，它具有适用于各种底层方法（包括 gettext 和数组）的适配器。

它有很好的文档记录，可以用作独立组件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-15T21:23:50.193

事实上，我发现`gettext`更容易：

1.  您可以`echo / print _("your text");`稍后再翻译
2.  使用 getext 编辑器很容易获得帮助
3.  要生成 boostrap po 文件（iirc，/source/ 文件），您可以使用[etags](http://www.gnu.org/software/gettext/manual/gettext.html#Marking)来在您的文件上生成一种 gr​​ep。所以你以后只需要翻译标记。

所以基本上，从项目开始就一切正常，然后更容易开始，更方便高档。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T21:14:46.167

我会推荐使用gettext。这是一套完善的工具。有一个工具可以自动从您的源代码中提取文本字符串 (xgettext)，还有其他工具可以帮助您翻译本地化文件，例如 poedit ( [http://www.poedit.net/](http://www.poedit.net/) )。

如果您正在运行 PHP 5.3 和/或安装了 intl 扩展，还有另一个选项：messageformatter：

[http://php.net/manual/en/class.messageformatter.php](http://php.net/manual/en/class.messageformatter.php)

这是非常强大的，但它缺乏 - 在我看来 - 一点文档，并且对于您的目的来说可能是矫枉过正。您可以在 ICU 项目的页面上找到有关此的更多信息：

[http://userguide.icu-project.org/formatparse/messages](http://userguide.icu-project.org/formatparse/messages)

# qt - 从 Qt 中的文本文件填充表格小部件

> ID：10608805
> 
> 赞同：6
> 
> 时间：2012-05-15T20:58:04.210
> 
> 标签：qt, file, user-interface, widget

我是 Qt 新手，需要以下帮助：

我想创建一个包含表格小部件的 GUI，该小部件由来自制表符分隔的文本文件的信息填充。在我的 GUI 中，用户将首先浏览文本文件，然后在 Table Widget 中显示内容。我已经完成了浏览部分，但是如何将文本文件中的数据加载到 Table Widget 中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T19:13:25.683

分两步，解析文件，然后将其推送到小部件中。

我从[QFile 文档](http://qt-project.org/doc/qt-4.8/qfile.html#details)中获取了这些行。

```
 QFile file("in.txt");
 if (!file.open(QIODevice::ReadOnly | QIODevice::Text))
     return;

 while (!file.atEnd()) {
     QByteArray line = file.readLine();
     process_line(line);
 } 
```

您的 process_line 函数应如下所示：

```
static int row = 0;
QStringList ss = line.split('\t');

if(ui->tableWidget->rowCount() < row + 1)
    ui->tableWidget->setRowCount(row + 1);
if(ui->tableWidget->columnCount() < ss.size())
    ui->tableWidget->setColumnCount( ss.size() );

for( int column = 0; column < ss.size(); column++)
{
    QTableWidgetItem *newItem = new QTableWidgetItem( ss.at(column) );
    ui->tableWidget->setItem(row, column, newItem);
}

row++; 
```

有关操作 QTableWidgets 的更多信息，请查看[文档](http://qt-project.org/doc/qt-4.8/qtablewidget.html)。对于使用 Qt Creator 中的 GUI 构建器的新用户，一开始很难弄清楚。

最终，我建议切换到他们在所有[示例](http://qt-project.org/doc/qt-4.8/all-examples.html)中所做的方式构建 GUI ……通过在代码中手动添加所有内容而不是拖放。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-11-10T18:33:17.347

对不起...

```
void squidlogreader_::process_line(QString line)
{
    static int row = 0;
    QStringList ss = line.split('\t');

    if(ui->tableWidget->rowCount() < row + 1)
    ui->tableWidget->setRowCount(row + 1);
    if(ui->tableWidget->columnCount() < ss.size())
    ui->tableWidget->setColumnCount( ss.size() );

    for( int column = 0; column < ss.size(); column++)
    {
    QTableWidgetItem *newItem = new QTableWidgetItem( ss.at(column) );
    ui->tableWidget->setItem(row, column, newItem);
    }

    row++;

}
void squidlogreader_::on_pushButton_clicked()
{
    QFile file("in.txt");
    if (!file.open(QIODevice::ReadOnly | QIODevice::Text))
        return;

    while (!file.atEnd()) {
        QString line = file.readLine();
        process_line(line);
    } 
```

# javascript - 获取创建的 OpenLayers 标记框的 ID

> ID：10608806
> 
> 赞同：1
> 
> 时间：2012-05-15T20:58:05.193
> 
> 标签：javascript, openlayers

我有一个 OpenLayers 地图，我使用**OpenLayers.Marker.Box**创建框，如下所示：

```
var bounds = new OpenLayers.Bounds(left, bottom, right, top);
var box = new OpenLayers.Marker.Box(bounds);
boxes.addMarker(box); 
```

我需要获取此框的 ID 以添加一些功能。但是当我创建盒子时，OpenLayers 会自动添加一个像**OpenLayersDiv135**这样的 div ID 。是否可以在创建后立即在我的 javascript 中获取框 ID，甚至可以在创建时设置 ID？

编辑：就像**console.log(box.div.id);一样简单**

# python - ArcGIS 10 python - 检查栅格值是否在集合中的条件语句

> ID：10608809
> 
> 赞同：4
> 
> 时间：2012-05-15T20:58:35.083
> 
> 标签：python, arcgis, raster, arcpy

我正在尝试根据来自另一个栅格的输入创建一个栅格。如果栅格值等于 set() 中包含的数字，则我希望它为 1，否则为 0

我尝试了以下方法：

```
 ConfusedRaster = arcpy.Con(inraster in repeatSet, 1, 0) 
```

和

```
 ConfusedRaster = arcpy.Con(inraster, 1, 0, "inraster in repeatSet") 
```

这些都不起作用。我相信它们不起作用，因为 where 子句只接受地图代数表达式：[ArcGIS 帮助](http://help.arcgis.com/en/arcgisdesktop/10.0/help/index.html#//009z00000005000000.htm)

我可以想到其他两种方法来做到这一点。一个是将其转换为 NumPyArray 并使用它。另一个是遍历集合并为集合中的每个值创建一个光栅对象。循环完成后合并它们。

有没有人对如何解决这个问题有任何建议或意见？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T03:51:08.510

我正在寻找类似问题的答案，并开发了一种使用“ExtractByAttributes”中的 SQL 子句的方法。

```
repeatList = list(repeatSet)
ras1 = arcpy.sa.ExtractByAttributes(inraster, 'VALUE IN (' + str(repeatList).strip('[]') + ')') 
ConfusedRaster = arcpy.sa.Con(arcpy.sa.IsNull(ras1) == 0, 1, 0) 
```

# php - 面向数据库和 Oauth 2 的 android/iphone 应用程序 API

> ID：10608811
> 
> 赞同：0
> 
> 时间：2012-05-15T20:58:43.020
> 
> 标签：php, android, iphone, database, api

我的客户想要一个 android 应用程序和一个 iPhone 应用程序。制作一个基于 php 的 api 是否是一个很好的解决方案，这两个应用程序都可以用来与服务器通信。API 将用于访问数据库并通过 OAuth 和其他一些非数据库功能进行授权。

使用 api 而不是直接连接到数据库会不会有显着的性能损失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T21:01:36.687

PHP 可能存在一些问题，一般来说，它在处理几百个连接时并不是很好。无论如何，我强烈建议您使用某种 API 来过滤它接收到的输入，而不是让任何人连接到数据库，否则它可能在您的应用程序启动的最初几个小时内是空的（也就是一个巨大的安全风险！）。

# shell - 接受输入文件的循环不起作用

> ID：10608812
> 
> 赞同：0
> 
> 时间：2012-05-15T20:58:47.553
> 
> 标签：shell, unix, scripting, for-loop

我有一个包含两个目录路径的文件（将包含更多）。我想在每一行中阅读，然后`ls`在每一行中阅读。很简单吧？

问题是它不起作用，我不知道为什么。无论我做什么，最后一行总是与`ls`. 之前的行对 是“不”存在的`ls`，即使它们存在。

文件列表

```
/path/to/directory1/
/path/to/directory2/
/path/to/directory1/
/path/to/directory2/ 
```

当我运行以下代码段时

```
DIRECTORIES="file.list"
for DIR2 in `cat $DIRECTORIES`
do
       echo $DIR2
       ls $DIR2
done 
```

我得到以下输出

```
/path/to/directory1/
 does not exist. file /path/to/directory1/
/path/to/directory2/
 does not exist. file /path/to/directory2/
/path/to/directory1/
 does not exist. file /path/to/directory1/
/path/to/directory2/
Server 
```

它有什么问题？还有其他更好的解决方案吗？

谢谢

**编辑：**奇怪，我刚刚在另一个 Unix 机器上试了一下，效果很好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T21:24:28.927

可能是 $DIR2 包含行尾吗？尝试删除它们：

```
DIR2=`echo $DIR2 | tr -d '\r'` 
```

我是这么认为的，因为发布的日志对我来说看起来很奇怪。`ls`我的电脑上的命令输出如下所示：

`ls: cannot access /path/to/directory1/: No such file or directory`

但是你的：

```
 does not exist. file /path/to/directory1/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T21:57:17.537

`cat`是一个邪恶的程序，最好不要使用它。您必须逐行读取文件，`cat`输出不是行缓冲的。

```
while read path ; do
    ls $path
done <file.list 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T21:14:35.777

JGeZau,

该脚本看起来不错，您是否检查过您在绝对/相对方面正确引用了您的路径？

我已经在 bash 中复制了您的脚本，并且完全没有问题：

测试.sh：

```
#!/bin/bash
DIRECTORIES="paths"
for DIR2 in `cat $DIRECTORIES`
do
   echo $DIR2
   ls $DIR2
done 
```

路径：

```
/var/logs/
/var/tmp/ 
```

输出：

./test.sh

```
/var/logs/
file1.log file2.log 

/var/tmp/
tmp1 tmp2 tmp3 
```

希望这可能会有所帮助。

# delphi - Delphi TFrame Create/Destroy

> ID：10608823
> 
> 赞同：5
> 
> 时间：2012-05-15T20:59:55.473
> 
> 标签：delphi, frame, freepascal, lazarus

How to create (when I want to show it) and destroy (when I want to hide it) frames on the main TForm? Frames' align = alClient.

I tried this:

**The form:**

```
unit main;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms, Dialogs, StdCtrls, uFrame1, uFrame2;

type
  TFormMain = class(TForm)
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
    f1: TFrame1;
    f2: TFrame2;
  end;

var
  FormMain: TFormMain;

implementation

{$R *.dfm}

procedure TFormMain.FormCreate(Sender: TObject);
begin
  f1 := TFrame1.Create(Self);
  f1.Parent := Self;
end;

end. 
```

**First frame:**

```
unit uFrame1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms, Dialogs, StdCtrls;

type
  TFrame1 = class(TFrame)
    btn1: TButton;
    procedure btn1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

implementation

{$R *.dfm}

uses main, uFrame2;

procedure TFrame1.btn1Click(Sender: TObject);
begin
  Self.Free;
  FormMain.f2 := TFrame2.Create(FormMain);
  FormMain.f2.Parent := FormMain;
end;

end. 
```

**Second frame:**

```
unit uFrame2;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms, Dialogs, StdCtrls;

type
  TFrame2 = class(TFrame)
    lbl1: TLabel;
    btn1: TButton;
    procedure btn1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

implementation

{$R *.dfm}

uses main, uFrame1;

procedure TFrame2.btn1Click(Sender: TObject);
begin
  Self.Free;
  FormMain.f1 := TFrame1.Create(FormMain);
  FormMain.f1.Parent := FormMain;
end;

end. 
```

but it crashes with access vialataions when I click button on FrameStart or Frame1 (TForm FormCreate works fine i.e. it creates and shows FrameStart).

Delphi 7.

![With the first frame](../Images/75455aeb41f10aa6d8c9dc38b0aca145.png) ![With the second frame](../Images/b42e3567859e523874843da48220822d.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T21:32:21.900

You can't call `Self.Free` in those event handlers. When the event handler returns, the VCL code that executes next still uses a reference to an object that you just freed. And that's where the access violation comes from. If you had been running with FastMM in full debug mode then you would have been shown a helpful diagnostic message.

These frames will have to kill themselves in a more roundabout manner. Post a CM_RELEASE message to the frame asking it to call `Free` on the frame. You post the message, rather than sending it, so that all the in flight messages are processed first. You'll need to add a message handler to the frame to respond to the message.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T22:04:07.853

You've got some of it.

The basic idea behind this sort of stuff.

add a private property to your mainform to hold the frame.

in the button click handler assuming you only want one at a time do

```
if assigned(fMyFrame) then
begin
  fMyFrame.Free;
  fMyFrame := nil;
end;
fMyFrame := TSomeFrame.Create(self);
fMyFrame.Parent := self;
fMyFrame.blah... 
```

When you just want to get rid of it as opposed to replacing it

```
if assigned(fMyFrame) then
begin
  fMyFrame.Free;
  fMyFrame := nil;
end; 
```

If you want your frame to raise another frame, repeat the above in there.

If you want the frame you raise in a frame to be a sibling, e.g. have the same Parent, then don't use Form1 var.

```
fMyNextFrame.Parent = self.Parent; 
```

There's a huge number of ways you could improve on this once you get it working, it's a classic scenario for interfaces and or inheritance, but figure this bit out first.

```
mySomething := TMySomething.Create(); 
```

you can now do something with something. After you called free, it's not can't, it's don't and don't let anything else either.

Don't do self.free, it's like playing with matches in barrel of petrol. It will hurt....

# php - 服务器？Android 移动应用程序，可在我们的移动应用程序上显示来自我们门户网站的数据（文本、图像）

> ID：10608824
> 
> 赞同：0
> 
> 时间：2012-05-15T20:59:59.300
> 
> 标签：php, android, asp.net, wordpress

我正在开发一个显示 txt 详细信息（标题和用户详细信息）和图像的 android 应用程序（正在进行中）。用户可以在应用程序上上传和查看数据..现在谈到网站（项目图片的重要部分应该上传到门户网站，也可以从移动应用程序上传和检索）我不知道如何开始以及哪个平台可供选择。

门户网站开发平台和服务器端所需的指南。兼容性问题等，以及如何将我的应用程序与服务器/Web 连接以获取来自门户的更新。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T21:04:55.847

就我个人而言，我会使用像 CakePHP 这样的框架，它允许我轻松创建应用程序可以与之交互的 xml/json api。

# objective-c - NSPrintOperation 从不调用 drawRect：

> ID：10608827
> 
> 赞同：0
> 
> 时间：2012-05-15T21:00:06.363
> 
> 标签：objective-c, cocoa, printing

我有一个要打印的自定义 NSView 子类。我有一个控制器运行以下代码：

```
MyCustomView *printableView = [[MyCustomView alloc] init];
NSPrintOperation *po = [NSPrintOperation printOperationWithView:printableView];
[po runOperation]; 
```

当我设置断点时，此代码会运行，并且 NSView 中的自定义分页方法（`knowsPageRange:`和`rectForPage:`）会运行，但视图的`drawRect:`方法永远不会被调用。它显示打印对话框，但它打印的只是空白页。

为什么我的`drawRect:`方法永远不会被调用？我必须先做一些设置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:33:11.303

`NSView`为is指定的初始值设定项`-initWithFrame:`。虽然`MyCustomView`用 初始化是可以的`-init`，但它的实现`-init`应该调用`[super initWithFrame:someRect]`. 是这样做的吗？

换句话说，您的视图是否有框架矩形？

# salesforce - SOQL 从 ContentVersion 请求 VersionData 导致戏剧性

> ID：10608829
> 
> 赞同：0
> 
> 时间：2012-05-15T21:00:28.017
> 
> 标签：salesforce, soql

执行以下查询

```
"Select C.Title FROM ContentVersion C WHERE ContentDocumentId IN (SELECT ContentDocumentId FROM ContentWorkspaceDoc WHERE ContentWorkSpaceId='".LIBRARY_ID."')" 
```

这给了我一个 ID 为 LIBRARY_ID 的库中文件的大列表

我一添加

```
"Select C.Title,C.VersionData FROM..." 
```

我只有一张唱片。8 条记录中只有一条是链接，那么我在执行什么愚蠢的行为来获得这种不受欢迎的行为？

VersionData 是否需要一些额外的权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T22:57:51.517

使用 API 时，如果行很宽，您可能会收到少于默认的 500 条记录`QueryResult`，这在检索存储在`VersionData`. 您应该检查该`done`属性，并使用 调用`queryMore`以`queryLocator`获取更多行。请参阅[http://bit.ly/KEEo7M](http://bit.ly/KEEo7M)。

# html - HTML：为什么我在手机浏览器中看不到带有 html 图例标签的元素？

> ID：10608836
> 
> 赞同：1
> 
> 时间：2012-05-15T21:01:51.540
> 
> 标签：html, css, browser, legend

![桌面版 Chrome 浏览器](../Images/d2cf3fc9c8571dc7ab668d8d912f8005.png) ![安卓手机浏览器](../Images/414a28c7910e68a20763150512445015.png)

第一**张图片属于 Chrome 桌面，第二张是 Android 浏览器**，问题是因为在移动浏览器（包括 iPhone 版 Safari）中，我无法在我正在创建的网站上显示图例标签，“Area de administradores “是一个传说，让 slideDown 点击执行如桌面浏览器的图像所示，但在手机的 nevegador 我无法点击。

知道为什么会出现这个错误吗？下面的代码属于表单登录：

```
 <div id="content">
    <div id="wrapper">
        <legend id="leyendaAdmin">// Área de administradores</legend>
            <div class="loginIndex" >   
                <div class="titleIndex">
                    <img src="images/itcxx.png">
                    <h1>Bienvenido al<br>Centro de Información</h1>
                </div>
                <div class="inputLogin">
                    <form id="formLogin" name="formLogin" method="post" action="doLogin.php">
                        <center><h2>Iniciar sesión</h2></center>
                        <p class="fUser">
                        <input id="ncontrolLogin" name="ncontrolLogin" placeholder="Número de control" type="text" AUTOCOMPLETE=OFF maxlength="8" onKeyPress="return _onlyNumber(event);"/>
                        </p>
                        <p class="fPasswd">
                            <input id="passwdLogin" name="passwdLogin" placeholder="Contraseña" type="password" AUTOCOMPLETE=OFF maxlength="4" onKeyPress="return _onlyNumber(event);"/>
                        </p> 
                        <input id="bIniciar" name="bIniciar" value="Iniciar" type="submit"/>
                    </form> 
                    <br/>
                    <div id="status_msg"></div> 
                </div>
            </div>
        </div>
        <br/>
        <div id="wrapper">
            <legend id="leyenda">// Área de visitantes</legend>
            <button id="bSearch" name="bSearch">Realizar búsqueda</button>
        </div>
</div> 
```

和 CSS：

```
#wrapper legend{
    text-align:left;
    background-color:#000;
    color:#F0F0F0;
    font-size:25px;
    float:left;
    width:100%;
    padding:5px 0px 5px 10px;
    margin:10px 0px;
    border-bottom:1px solid #fff;
    border-top:1px solid #d9d9d9;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T21:13:40.743

我至少可以看到两个问题。评论中提到了一个，您不能`id`在一页上拥有两个具有相同属性的元素。

另一个问题可能是您的问题：您使用`<legend>`不正确。

> [http://www.w3.org/TR/2011/WD-html5-20110525/forms.html#the-legend-element](http://www.w3.org/TR/2011/WD-html5-20110525/forms.html#the-legend-element)
> 
> ### 图例元素
> 
> 可以使用此元素的上下文：**作为 fieldset 元素的第一个子元素。**

这意味着您可以使用 a的*唯一*`<legend>`时间是这样的：

```
<fieldset>
    <legend></legend>
     <!-- content -->
 </fieldset> 
```

浏览器可以自由地使用无效标记做他们的事情，您可能会看到这样做的副作用。

在尝试解决 HTML、CSS 或 JavaScript 中的问题之前，请始终先使用[W3C 标记验证服务](http://validator.w3.org/)检查您的结果。调试损坏或无效的 HTML 是不可能的。

# javascript - 全宽并排的div

> ID：10608838
> 
> 赞同：0
> 
> 时间：2012-05-15T21:01:55.063
> 
> 标签：javascript, css, html

我无法将 N 个 div 与全浏览器宽度并排放置

我想要这样。当您调整 div 之间的浏览器空间大小时，必须保持不变，并且 div 必须调整宽度。

```
|div| |div| |div|

|  div  | |  div  | |  div  | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T21:04:34.870

一种解决方案是使用百分比：

```
div.mydiv {
    width: 33%;
    display: inline-block;
} 
```

如果这样做，请注意填充：它会增加 a`div`的宽度，可能会导致溢出。如果您仅支持 IE >=8，则可以通过执行此操作来解决此问题

```
div.mydiv {
    width: 33%;
    display: inline-block;
    -moz-box-sizing: border-box; /* OMG why doesn't Firefox support this yet */
    -webkit-box-sizing: border-box; /* Safari below 5.1, including 5 */
    box-sizing: border-box;
} 
```

如果你这样做，还有一个可能的问题：`div`s 之间的空间。发生这种情况是因为您在它们之间有空文本节点，并且`display: inline-block`认为这没关系：以`inline`-type 方式布局的元素可以穿插空白文本节点。为了解决这个问题，有一个非常糟糕的 hack：

```
div.containerOfAllTheDivs {
    font-size: 0;
}
div.mydiv {
    font-size: 12px; /* or whatever */
    /* plus the above stuff */
} 
```

这使得出现在容器内的任何文本（例如空格）都是零大小的，除非它出现在您彼此相邻堆叠的 div 内，在这种情况下它会恢复为`12px`. 正如我所说，一个非常糟糕的黑客攻击。但它有效。

* * *

更通用的解决方案是新的[flexbox 提案](http://www.w3.org/TR/css3-flexbox/)，但它仍在大量修改中：在各种浏览器中实现了两个过时的版本，最新的一个截至今天 (2012-05-15) 都没有实现。但是，如果您知道您的确切环境，这可能是一个很好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T21:17:06.107

同样的事情可以使用 CSS3 灵活的盒子样式布局来实现，而且代码非常少。好吧，这取决于您计划支持的浏览器。

*现在仅在 webkit 引擎和 mozilla 中支持灵活的盒子布局*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T21:04:03.170

对于两个 div，只需执行（[Demo](http://jsfiddle.net/zBSZK/)）：

```
div
{
    width: 49%;
    float: left;
} 
```

对于三个，做（[Demo](http://jsfiddle.net/zBSZK/1/)）：

```
div
{
    width: 33%;
    float: left;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T21:13:52.553

如果您需要任意数量的 div，您有两种选择：

1.  如果数字由服务器确定（值来自数据库或会话或其他），您可以在**服务器端**生成适当的 CSS 。该解决方案是优选的。
2.  如果没有，您需要 JavaScript 来计算视口的宽度，并相应地为您的 div 分配宽度值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T21:43:41.153

把它作为一个答案，因为我猜它是有效的，并且可以很好地为你服务。960.gs 和 bootstrap 都为您想要的布局提供了脚手架。960.gs 只是布局，但如果引导程序适合您，您可以在他们的网站上对其进行自定义，以获得处理布局的部分。引导程序的一个警告，我还没有找到一种方法来删除 div 列上的左边距。960.gs 包括将`alpha`和分别`omega`设置`margin-left`为`margin-right`0 的类。当我使用它时，我必须将它们添加到引导程序中。

使用其中一个脚手架将为您节省大量时间和精力。如果您稍后必须将代码交给其他人，或者甚至只是让其他人与您一起工作，那么使用脚手架也将帮助他们处理您的代码。

# html - 每个显卡的 CSS 填充看起来不同

> ID：10608840
> 
> 赞同：0
> 
> 时间：2012-05-15T21:02:32.523
> 
> 标签：html, css, graphics, padding

在为每个浏览器重置边距和填充值后，填充似乎仍然存在问题。我认为这是因为显卡。AMD/NVidia 卡呈现的内容比 Intel 集成 HD 卡更好、更合适。有没有办法解决这个问题？

使用 Firefox 填充是完美的。IE 和 chrome 大约相差 2 个像素。使用英特尔卡，填充也关闭。当我重置所有边距和填充时，它不能与浏览器相关。

长话短说，有什么办法可以让所有显卡都同等地渲染内容？

任何帮助深表感谢！

更新：我正在使用一台带有可切换图形的计算机。AMD/Intel 这里是一个示例的屏幕截图：http: [//bayimg.com/CaONBAAdj](http://bayimg.com/CaONBAAdj)

代码示例：http: [//jsfiddle.net/7fyvb/](http://jsfiddle.net/7fyvb/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T21:07:19.790

你如何重置你的填充和边距？

边距：0；填充：0

您可能还需要考虑 display:block 和 line:height 来考虑重置。

在测试页面上尝试这个 css reset [http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)并与...进行一些比较

```
<div> 
```

..tags 设置在不同的高度和宽度

# android - android中的数据库创建

> ID：10608843
> 
> 赞同：0
> 
> 时间：2012-05-15T21:02:44.447
> 
> 标签：android

我正在创建一个适用于模拟器但不适用于设备的表。我收到此错误消息：

```
Failure 1 (near "(": syntax error) on 0x2d69a8 when preparing 'CREATE TABLE request(requestidINTEGER PRIMARY KEY,longitudefromDECIMAL(10,5),lattitudefromDECIMAL(10,5),phoneINTEGER) 
```

我正在创建这样的表：

```
 String CREATE_REQUEST_TABLE= "CREATE TABLE " + TABLE_REQUEST + "(" 
                    + KEY_REQUESTID + "INTEGER PRIMARY KEY," 
                    + KEY_LONGITUDEFROM + "DECIMAL(10,5)," 
                    + KEY_LATTITUDEFROM + "DECIMAL(10,5)," 
                    + KEY_TO + "TEXT," 
                    + KEY_DEPARTURETIME + "TIME," 
                    + KEY_ARRIVALTIME + "TIME," 
                    + KEY_DESCRIPTION + "TEXT," 
                    + KEY_PHONE + "INTEGER" + ")"; 
            db.execSQL(CREATE_REQUEST_TABLE); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T21:06:01.877

您的请求中没有空格。在键前后添加空格：

```
String CREATE_REQUEST_TABLE= "CREATE TABLE " + TABLE_REQUEST + " (" 
                + KEY_REQUESTID + " INTEGER PRIMARY KEY, " 
                + KEY_LONGITUDEFROM + " DECIMAL(10,5), " 
                + KEY_LATTITUDEFROM + " DECIMAL(10,5), " 
                + KEY_TO + " TEXT, " 
                + KEY_DEPARTURETIME + " TIME, " 
                + KEY_ARRIVALTIME + " TIME, " 
                + KEY_DESCRIPTION + " TEXT, " 
                + KEY_PHONE + " INTEGER" + ")"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T21:05:19.700

好吧，正如您在错误消息中看到的那样，`KEY_REQUESTID + "INTEGER PRIMARY KEY,"`变成`requestidINTEGER PRIMARY`which is not `requestid INTEGER PRIMARY`。基本上，列名和列类型之间没有空格，这使得它们（对于 SQLite）看起来是一个单一的标记。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T21:08:55.917

尝试在您的 id 和“INTEGER PRIMARY KEY”之间使用空格

喜欢;

```
 KEY_REQUESTID + " INTEGER PRIMARY KEY," 
```

# javascript - Javascript 平滑方法链接

> ID：10608844
> 
> 赞同：0
> 
> 时间：2012-05-15T21:02:48.880
> 
> 标签：javascript, methods, chaining

我有一个可以接受某些参数的网络服务，例如 ?top=5&orderby=column --- 等等...

我希望能够像这样执行我的对象：

```
var call = new API();
call.get().top(5).skip(15).orderby("address"); 
```

挑战在于只有最后一个 orderby 触发 execute() 方法。这是我的代码。如果您有更好的想法，请告诉我！当前每个函数结束时延迟 25ms，并在下一个函数开始时停止计时器。这是适当的/可以接受的吗？

* * *

```
var API = function (webservice) {
this.webservice(webservice);
return this;
};

API.prototype = {
version: function (urlFormat) {
    if (urlFormat) {
        return "v" + urlFormat.split('.').join('_');
    }
    return sessionStorage.getItem("version");
},
path: function () {
    return "../WebAPI/";
},
execute: function () {
    var path = this.path() + this.webservice() + ".svc/";
    if (this.__parameters) {
        path += "?";
    }
    var first = true;
    for (var k in this.__parameters) {
        if (k !== "type")
        path += ((first) ? (function(){first = false; return ""})() : "&") + "$" + k + "=" + this.__parameters[k];
    };
    console.log(this.__parameters.type + ": " + path);
    return this;
},
put: function () {
    this.doIt("type","put");
    return this;
},
post: function () {
    this.doIt("type","post");
    return this;
},
get: function() {
    this.doIt("type","get");
    return this;
},
delete: function() {
    this.doIt("type","delete");
    return this;
},
toString: function () {
    return "API";
},
webservice: function(webservice) {
    if (webservice) {
        this.__webservice = webservice;
    }
    else {
        return this.__webservice;
    }
},
top: function (p) {
    this.doIt("top",p);
    return this;
},
view: function (p) {
    this.doIt("view",p);
    return this;
},
orderby: function (p) {
    this.doIt("orderby",p);
    return this;
},
criteria: function (p) {
    this.doIt("criteria",p);
    return this;
},
skip: function (p) {
    this.doIt("skip",p);
    return this;
},
filter: function (p) {
    this.doIt("filter",p);
    return this;
},
doIt: function (method, parameter) {
    this.__timerStop();
    this.__parameters[method] = parameter;
    this.__timerStart();
},
__timerStop: function () {
    if (this.__timer) {
        clearTimeout(this.__timer);
    }
},
__timerStart: function (append) {
    var self = this;
    if (this.__timer) {
        this.__timerStop();
    }
    this.__timer = setTimeout(function() {
        console.log("executing.");
        console.log(JSON.stringify(self.__parameters));
        self.execute();
    }, 25);
},
__parameters: {}
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T21:11:13.840

**更新**：你知道吗？我将在这个问题上软化我的立场（下面的原始答案）。`setTimeout`鉴于 JavaScript 的单线程事件循环，您实际上应该没问题，因为在您的方法链“完成”之前，您传递给的回调永远不会触发。（事实上​​，这也意味着你应该安全地传递`0`给`setTimeout`而不是`25`。）

我仍然认为你想出这个设计是疯了（如果这是多个开发人员会接触的代码，我会说你最好使用更简单的设计，以减少过度复杂导致团队混乱的风险） ; 但如果你坚持走这条路，你其实*不应该*遇到任何奇怪的海森虫。

但是，是的，我坚持我最初的建议，即`execute`明确要求调用。

* * *

天啊。你**疯**了，甚至考虑到这一点！我的意思是，我的一部分确实爱你（我是[可怕的黑客的忠实粉丝](http://philosopherdeveloper.wordpress.com/2012/03/16/the-littlest-ruby-debugger/)）；但事实是，采用这种方法，虽然它最终*可能会*奏效，但如果/当它失控时会让你发疯。

我强烈反对它的主要原因是替代方案*非常*简单，更重要的是，实际上是*可靠*的：只需建立`execute`实际发送请求的方法的规则，因此任何链式方法调用都必须以此结束：

```
call.get().top(5).skip(15).orderby("address").execute(); 
```

如果你真的爱上了这个基于计时器的想法，那么有些事情告诉我你以前从未真正遭受过[Heisenbug](http://en.wikipedia.org/wiki/Heisenbug)（或者，正如我最初猜测的那样，你只是疯了）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T21:44:13.410

有趣的想法。虽然，为什么不做这样的事情呢：

```
call({ type: "get", top: 5, skip: 15, orderby: "address" }); 
```

然后通过遍历实现中的对象来处理每个参数`call`，然后发出服务请求。

```
for(var arg in args) {
    if(args.hasOwnProperty(arg) && args.propertyIsEnumerable(arg)) {
        // process argument
    }
} 
```

这使事情变得简单。

# java - Android 日历设置上午或下午时间不是 24 小时

> ID：10608845
> 
> 赞同：7
> 
> 时间：2012-05-15T21:02:52.783
> 
> 标签：java, android

我现在有一个脚本，它总是以 AM PM 格式传递时间。但是我不知道如何设置这个时间的日历，因为它只接受我编写代码的方式的 24 小时格式。如何将时间转换为 24 小时或输入 12 小时格式？

```
 calendar.set(Calendar.HOUR_OF_DAY, HourValue);
         calendar.set(Calendar.MINUTE, MinuteValue);
         calendar.set(Calendar.SECOND, 0);
         calendar.add(Calendar.MINUTE, -356); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-15T21:10:32.770

[http://developer.android.com/reference/java/util/Calendar.html#HOUR](http://developer.android.com/reference/java/util/Calendar.html#HOUR)

calendar.set(calendar.HOUR,HourValue) ，而不是 HOUR_OF_DAY 所以如果你输入 24 小时，它会将其转换为 12 小时格式

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-18T10:54:49.583

上午 0 和下午 1 `Calendar c = Calendar.getInstance(); c.set(Calendar.YEAR, year); c.set(Calendar.MONTH, month); c.set(Calendar.DAY_OF_MONTH, day); c.set(Calendar.AM_PM, 1); c.set(Calendar.HOUR, hour); c.set(Calendar.MINUTE, minute); c.set(Calendar.SECOND, 00); c.set(Calendar.MILLISECOND, 00);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-30T03:51:53.100

```
int am_pm=c.get(Calendar.AM_PM);
String time=c.HOUR + ((am_pm==Calendar.AM)?"am":"pm")) 
```

你可以试试上面的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-01T05:38:14.357

# html - 在不总是有内容的情况下设计动态内容

> ID：10608851
> 
> 赞同：1
> 
> 时间：2012-05-15T21:03:30.247
> 
> 标签：html, css, templates, joomla

好的，所以我的标题很糟糕。反正-

我正在尝试设计一个简单的“产品信息”模板。我使用的 CMS 从标签中提取动态产品信息。看起来像这样 - div 的样式是这样的，它们排成两列：

```
 <div class="specslabel">

        <strong>

        {rs_size_lbl} <br />
        {rs_material_lbl} <br />
        {rs_application_lbl} <br />
        {rs_fitting_system_lbl}

        </strong>  

        </div>  

        <div class="specs">

        {rs_size} <br />
        {rs_material} <br />
        {rs_application} <br />
        {rs_fitting_system}    

    </div> 
```

当所有这些标签都正确提取信息时，一切正常。但是，有时这些字段之一（它从 CSV 文件中提取）是空的。标签是智能的，如果相应字段中没有内容，则不会显示 {_lbl}（字段标签）内容。然后有一个空行，显然是因为换行。

如果我不使用换行符，“_lbl”标签就会全部堆叠起来（因为标签通常是短文本）。有没有另一种方式来设置这个样式，这样当没有内容被绘制时，没有换行符——但是当有内容时，有一个换行符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T21:13:42.123

重写您的 HTML 以将标签与项目放在一起。

```
<div><span class="specslabel">{rs_size_lbl}</span><span class="specs">{rs_size}</span></div>
<div><span class="specslabel">{rs_material_lbl}</span><span class="specs">{rs_material}</span></div>
<div><span class="specslabel">{rs_application_lbl}</span><span class="specs">{rs_application}</span></div>
<div><span class="specslabel">{rs_fitting_system_lbl}</span><span class="specs">{rs_fitting_system}</span></div> 
```

然后，将您的 CSS 定义为

```
.specslabel {
    display: inline-block;
    width: 45%;
}

.specs {
} 
```

将会发生的是，当标签和数据都没有得到任何东西时，该行项目的 html 将呈现为`<div></div>`，默认情况下没有高度。因此，当 div 中没有要显示的内容时，空白区域将被折叠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T21:19:15.017

我建议将您的标记更改为以下内容：

```
<div class="specs">
  <div class="spec">
    <span class="label">{rs_size_lbl}</span>
    <span class="data">{rs_size}</span>
  </div>
  <div class="spec">
    <span class="label">{rs_material_lbl}</span>
    <span class="data">{rs_material}</span>
  </div>
  <div class="spec">
    <span class="label">{rs_application_lbl}</span>
    <span class="data">{rs_application}</span>
  </div>
  <div class="spec">
    <span class="label">{rs_fitting_system_lbl}</span>
    <span class="data">{rs_fitting_system}</span>
  </div>
</div> 
```

Then style span.label and span.data to have a fixed width so they align properly. If they're empty, they should be invisible.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T21:08:17.820

如果您按以下方式对其进行格式化，则不会有任何问题：

```
<style>
    strong span { float:left; clear:left; }
</style>

<strong>

    <span>{rs_size_lbl}</span>
    <span>{rs_material_lbl}</span>
    <span>{rs_application_lbl}</span>
    <span>{rs_fitting_system_lbl}</span>

</strong> 
```

否则，您需要更改服务器脚本以输出`<br/>`适当的...

# java - 适用于 Android 的内存友好型快速键值访问解决方案

> ID：10608853
> 
> 赞同：2
> 
> 时间：2012-05-15T21:03:37.647
> 
> 标签：java, android, database, memory, map

我有一个 Android 应用程序，它遍历一个包含数千个整数的数组，并将它们用作键值来访问整数对（让我们称它们为 id），以便用它们进行计算。它需要尽可能快地完成，并最终返回对应用程序至关重要的结果。

我尝试将 HashMap 加载到内存中以快速访问这些数字，但它导致 OOM 异常。我还尝试将这些 id 写入 RandomAccessFile 并将它们在文件上的偏移量存储到另一个 HashMap 但它太慢了。另外，只存储偏移量的新 HashMap 仍然占用很大的内存。

现在我正在考虑使用 SQLite，但我不确定它是否会更快。有没有可以帮助我的结构或库？

编辑：密钥数量超过 2000 万，而我只需要访问数千个。我不知道我会事先访问哪些，因为它会随着用户输入而变化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T21:11:47.823

您可以使用 Trove[`TIntLongHashMap`](http://trove4j.sourceforge.net/javadocs/gnu/trove/map/hash/TIntLongHashMap.html)将原始 s 映射`int`到原始`long`s（存储`int`值对的 s）。这为您节省了普通 vanilla 的对象开销`Map`，这迫使您使用包装器类型。

**编辑**

由于您的更新表明您有超过 2000 万个映射，因此可能会有比散列映射更节省空间的结构。一种将您的密钥划分为桶的方法，结合一些子密钥压缩，即使是最有效的哈希映射实现，也可能会为您节省一半的内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T21:24:26.813

SQLite 是一个嵌入式关系数据库，它使用索引。我敢打赌它比使用 RandomAccessFile 快得多。你可以试一试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T21:31:39.437

我的建议是重新排列 Buckets 中的键 - 我的意思是确定（或多或少）你的键的分布，然后制作对应于每个键范围的文件（关键是每个文件必须包含与可以进入内存，仅此而已）然后当您搜索密钥时，您只需将整个文件读入内存并查找它。

例如，假设key的分布是均匀的，存储0-500k键值对应的500k值，500k-1mil键对应的500k值等等......

**编辑：**如果你确实尝试了这种方法，但它仍然很慢，我仍然有一些技巧：

1.  首先确保所有桶之间的划分实际上接近相等。
2.  尝试通过制作更多的桶来使桶更小。
3.  关于按范围正确划分存储桶的想法是，当您搜索一个键时，您会转到相应的范围存储桶，并且该键要么在其中，要么不在整个集合中。所以 Concurnetly 读取另一个存储桶没有意义。
4.  我从来没有这样做过，因为我不确定并发在 I\O 上是否有效，但是用 2 个线程读取整个文件可能会有所帮助，一个从上到下，另一个从下到上，直到它们相遇。（或类似的东西）
5.  当您将整个存储桶读入内存时，将其拆分为 3-4 个数组列表，运行 3-4 个工作线程以在每个数组上搜索您的密钥，然后搜索必须以更快的速度结束。

# regex - 使用正则表达式的 eclipse 文件名模式搜索

> ID：10608856
> 
> 赞同：1
> 
> 时间：2012-05-15T21:04:16.327
> 
> 标签：regex, eclipse, filenames

我有很多java文件：

```
Foo01.java
Foo02.java
Foo03.java
Foo04.java
Foo05.java
Foo01Bar.java
Foo01Bar.java
Foo02Bar.java
Foo03Bar.java
Foo04Bar.java
Foo05Bar.java 
```

**而且我需要仅在**FooXX.java 类中替换表达式。

在 Eclipse 中使用`CTRL + H`文件名模式，我尝试了 Foo(\d\d).java，但它不起作用。如果我写 Foo*.java，每个 FooXXBar.java 也会出现，我不想。

有什么办法呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T21:29:11.970

我不认为 eclipse 有能力对文件名做完整​​的正则表达式。据我所知，您可以使用 * 匹配任何字符串和 ? 匹配文件的任何单个字符。因此，如果您的文件列表与上述类似，您可以搜索：

> Foo??.java

对于更复杂的文件搜索，您可能需要结合使用 unix/windows 命令行工具（取决于您的操作系统选择）。

# php - Websocket - “地址已在使用中”

> ID：10608860
> 
> 赞同：0
> 
> 时间：2012-05-15T21:04:23.760
> 
> 标签：php, javascript, codeigniter, websocket

我使用了这篇文章中包含的文件：http: [//www.flynsarmy.com/2012/02/php-websocket-chat-application-2-0/](http://www.flynsarmy.com/2012/02/php-websocket-chat-application-2-0/)。然后我将它们注入我的 codeigniter 实验室，但我总是得到一个错误：

```
Message: socket_bind() [function.socket-bind]: unable to bind address [48]: Address already in use 
```

JS部分告诉我：

```
Connecting...
Connected.
Disconnected. 
```

我使用了建议的“gethostbyaddr(gethostbyname($_SERVER['SERVER_NAME'])”-方法，还尝试了 ip 没有任何结果。

我想我有一个逻辑错误。我是否需要先关闭服务器端套接字才能重新打开它？我还尝试运行“开箱即用”版本（使用正确的主机名），但仍然没有运气。

谢谢你的帮助！

直播： http: [//labs.addictivity.de/websockets/](http://labs.addictivity.de/websockets/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:45:50.580

今天我破案了。我的问题是服务器确实在没有超时的情况下运行，但是代码有问题。所以我不能在同一个端口上设置一个新的。选择另一个，瞧。还变得足够聪明，可以在测试时设置和超时。

# javascript - javascript总和计算不起作用

> ID：10608871
> 
> 赞同：0
> 
> 时间：2012-05-15T21:05:29.580
> 
> 标签：javascript, html, forms, cgi

我有一张 cgi 表格供员工输入差旅费。我正在使用 javascript 自动显示和发送计算数据。表格上的第一个（里程）计算有效。我无法显示第二个（总）计算。我正在寻找的结果是- Miles * Rate (0.555) = Mileage (works) MileageExp + 其他输入字段 = TotalExpenses (不工作)

这是javascript-

```
<script type="text/javascript">
function totalexpense()
{
//mileage
a = document.event.Miles.value
b = document.event.Rate.value

c = a * b
z = c

document.event.Mileage.value = c.toFixed(2)

//total
d = document.event.Parking.value
e = document.event.Tolls.value
f = document.event.Plane.value
g = document.event.Train.value
h = document.event.Bus_Taxi.value
i = document.event.Lodging.value
j = document.event.Food.value
k = document.event.Other.value

l = z + d + e + f + g + h + i + j + k

document.event.Total_Expenses.value = l.toFixed(2)

}
</script> 
```

浏览器说行中有错误`document.event.Total_Expenses.value = l.toFixed(2)`。

HTML-

```
<p align="left" class="bold"><span class="style8">Mileage:</span><br>
Miles:
          <input name="Miles" size="10"> 
     X rate: 
       <input name="Rate" size="10" value="0.555" onblur="totalexpense();">
= 
       <input name="Mileage" size="10" readonly=true>
</p>

<p align="left">Parking:</span><br>
            <input name="Parking" size="10" onblur="totalexpense();">
</p>

<p align="left">Tolls:</span><br>
            <input name="Tolls" size="10" onblur="totalexpense();">
</p>

<p align="left">Airline Tickets:</span><br>
            <input name="Plane" size="10" onblur="totalexpense();">
</p>

<p align="left">Train:</span><br>
            <input name="Train" size="10" onblur="totalexpense();" >
</p>

<p align="left">Bus/Taxi:</span><br>
            <input name="Bus_Taxi" size="10" onblur="totalexpense();" >
</p>

<p align="left">Lodging:</span><br>
            <input name="Lodging" size="10" onblur="totalexpense();" > 
            Accomodations with- <input name="Accomodations_With" type="text"    size="40" />
</p>

<p align="left" class="bold"><span class="style8">Food/Beverage:</span><br>
            <input name="Food" size="10" onblur="totalexpense();" >
</p>

<p align="left">Other Expenses:</span><br>
            <input name="Other" size="10" onblur="totalexpense();" >
</p>

    <p align="left" class="bold"><span class="style8">Other Expense Notes:</span><br>
                  <span class="main style22">
                  <textarea name="Other_Expense_Notes" cols="50" rows="3" class="fieldbkgrd"></textarea>
                </span>
</p>

<h3>Total Expenses:<br>
            <input name="Total_Expenses" size="10" READONLY> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T21:18:05.590

您需要将值从字符串转换为数字 - .toFixed 仅适用于数字。

```
document.event.Total_Expenses.value = Number(l).toFixed(2); 
```

您的代码使用里程的原因是因为 0.555 被转换为整数：

```
c = a * b; (c = # * 0.555) 
```

然后，您执行被视为串联的“加法”：

```
z + d + e + f + g + h + i + j + k; 
```

这将 int 转换为字符串。因此：

```
document.event.Total_Expenses.value = l.toFixed(2); 
```

失败，因为类型转换现在是一个字符串。

如果要显式转换值，则需要使用 parseInt();

```
d = parseInt(document.event.Parking.value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T21:27:58.813

您需要将值从字符串转换为数字 - .toFixed 仅适用于数字。

```
document.event.Total_Expenses.value = Number(l).toFixed(2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T21:15:52.130

```
<input name="Total_Expenses" size="10" READONLY> 
```

您将其设置为只读，因此您无法将值设置为只读元素，这是我最好的猜测

# jquery - Jquery Slider 不适用于 Internet Explorer 中的 Magento 1.6.2

> ID：10608874
> 
> 赞同：0
> 
> 时间：2012-05-15T21:05:33.203
> 
> 标签：jquery

为了在我的主页上实现滑块效果，我下载了 Wowslider。在magento后端：我主页的内容部分（CMS->PAGES），我粘贴了以下代码：

```
<!-- Start WOWSlider.com BODY section -->
<script type="text/javascript">// <![CDATA[
var $j = jQuery.noConflict();
$j(document).ready(function() {
    $j('#s3slider').s3Slider({
        timeOut: 4000
    });
});
// ]]>
</script>
<div id="wowslider-container1">
<div class="ws_images">
<ul>
<li><img id="wows0" title="Blue hills" src="data1/images/blue_hills.jpg" alt="Blue     hills" /></li>
<li><img id="wows1" title="Sunset" src="data1/images/sunset.jpg" alt="Sunset" /></li>
<li><img id="wows2" title="Water lilies" src="data1/images/water_lilies.jpg" alt="Water lilies" /></li>
<li><img id="wows3" title="Winter" src="data1/images/winter.jpg" alt="Winter" /></li>
</ul>
</div>
<div class="ws_bullets">
<div><a title="Blue hills" href="#"><img src="data1/tooltips/blue_hills.jpg" alt="Blue hills" />1</a> <a title="Sunset" href="#"><img src="data1/tooltips/sunset.jpg" alt="Sunset" />2</a> <a title="Water lilies" href="#"><img src="data1/tooltips  /water_lilies.jpg" alt="Water lilies" />3</a> <a title="Winter" href="#"><img src="data1/tooltips/winter.jpg" alt="Winter" />4</a></div>
</div>
<a class="wsl" href="http://wowslider.com">HTML Slideshow Code Generator by WOWSlider.com v2.1.3</a> <a class="ws_frame" href="#"></a></div>
<script src="engine1/wowslider.js" type="text/javascript"></script>
<script src="engine1/script.js" type="text/javascript"></script>
<!-- End WOWSlider.com BODY section --> 
```

* * *

在page.xml中，下面最后一行代码是我自己添加的：

```
<block type="page/html_head" name="head" as="head">
                <action method="addJs"><script>prototype/prototype.js</script></action>
                <action method="addJs"><script>lib/ccard.js</script></action>
                <action method="addJs"><script>prototype/validation.js</script></action>
                <action method="addJs"><script>scriptaculous/builder.js</script></action>
                <action method="addJs"><script>scriptaculous/effects.js</script></action>
                <action method="addJs"><script>scriptaculous/dragdrop.js</script></action>
                <action method="addJs"><script>scriptaculous/controls.js</script></action>
                <action method="addJs"><script>scriptaculous/slider.js</script></action>
                <action method="addJs"><script>varien/js.js</script></action>
                <action method="addJs"><script>varien/form.js</script></action>
                <action method="addJs"><script>varien/menu.js</script></action>
                <action method="addJs"><script>mage/translate.js</script></action>
                <action method="addJs"><script>mage/cookies.js</script></action>

<!--the following 1 line is added by myself -->
                <action method="addItem"><type>skin_js</type><name>skin/frontend/newdefault/default/js/jquery.js</name></action> 
```

结果是滑块在 Firefox 和 chrome 中工作，但在 IE 中不工作（它在 IE 中是静态的，只显示 1 个图像）

我也尝试过其他插件来实现滑动效果，所有插件似乎都可以在 firefox 或 Chrome 中运行，但在 IE 中却不行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T15:13:26.697

我自己也遇到了 JQuery 无法在 Internet Explorer 中工作的类似问题。我不确定这是适合您的解决方案，但值得一试。

在 /app/design/frontend/default//template/page/html 中，第 49 行可能有脚本标记，如下所示：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script> 
```

如果您有幸使用了引入 JQuery 本身的主题，那么应该存在这一行。你可能知道 1.3.2 是一个旧的 JQuery 版本。如果您将 1.3.2 更改为 1.5.1，它应该可以工作，或者至少对我有用。

我希望这会有所帮助，我花了很长时间自己追踪这个问题，希望它对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:38:18.437

“哇滑块 Internet Explorer”的[第一个 Google 结果](http://www.wowslider.com/rq/carousel-image-has-problem-with-displaying-in-internet-explorer-t.html)产生了以下信息：

> 问：我购买了 WOWSlider 第 2 版，发现以下问题。当我将代码剪切并粘贴到表格中时，在 Internet Explorer 中查看时滑块将不再显示，尽管在其他浏览器中似乎可以正常工作。这非常令人沮丧，因为我需要使用表格来使我的网站居中。请给我一些建议。谢谢你。
> 
> A: 尝试添加 DOCTYPE 声明以实现通用兼容性：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
```

> 如果问题仍然存在，请通过 support [at] wowslider [dot] com 向我们发送指向您网站的直接链接，以便我们进行检查。还请写下您使用的 IE 浏览器版本。

# html - 元素未放置在所需位置：class =“十列”对元素的位置没有影响

> ID：10608882
> 
> 赞同：0
> 
> 时间：2012-05-15T21:06:37.447
> 
> 标签：html, web2py

根据 web2py 文档页面分为 16 列，这应该放在第 10 列但它不起作用，我对所有这些都是新手，所以不知道从哪里开始调试。指针？

```
 <div class="ten columns">
      <nav>
    <ul>
      <li><a href="#">Home</a></li>
      <li><a href="#">Help</a></li>
      <li><a href="#">Login</a></li> 
      <li><a href="#">Privacy</a></li>
     </ul>
    </nav>
      </div>
    </header> 
```

`ten columns`没有效果。该列表放置在默认位置（最左侧）。

`*Entire File*`

```
<!DOCTYPE html>
  <head>
    <title>Web On Steroids</title>
    {{response.files.append(URL('static','css/skelton.css'))}}
    {{include 'web2py_ajax.html'}}
  </head>
<body>
  <header class="container">
    <div class="ten columns">
      <h1>tukker.me</h1>
      </div>
    <div class="ten columns">
      <nav>
    <ul>
      <li><a href="#">Home</a></li>
      <li><a href="#">Help</a></li>
      <li><a href="#">Login</a></li> 
      <li><a href="#">Privacy</a></li>
     </ul>
    </nav>
      </div>
    </header>
  <section id="main" class="container">
    <div class="ten columns">
          <h1>Messages With 300 Chars</h1>
      </div>
  <div class="sixteen columns">
        <a href="#" class="button">Register</a>
      </div>
      <footer class="container">
      <nav class="sixteen columns alpha omega">
        <a href="#">About</a>
        <a href="#">Terms</a>
        <a href="#">Contact</a>
     </nav>
    </footer>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T22:14:29.700

看来您正在使用 web2py 脚手架应用程序，该应用程序当前使用[Skeleton](http://getskeleton.com/)作为响应式网格。[查看Skeleton 文档](http://getskeleton.com/#grid)可能会有所帮助。

注意，`class="ten columns"`不把内容放在第十列，它使 div 宽十列。如果你想要第十列中的某些东西，你应该在它前面加上一个九列宽的 div（即`class="nine columns"`），或者将它偏移`class="one column offset-by-nine"`（实际上，你可能希望它比只有一列宽，它只有 40px 宽） . 请注意，在给定的行中，总列数（包括偏移列）应加起来不超过 16。具体而言，在您的情况下，您可以尝试：

```
 <header class="container">
    <div class="nine columns">
      <h1>tukker.me</h1>
    </div>
    <div class="one column">
    <nav>
      <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#">Help</a></li>
        <li><a href="#">Login</a></li> 
        <li><a href="#">Privacy</a></li>
      </ul>
    </nav>
    </div>
  </header> 
```

这会将您的 h1 标题放在前九列，将您的导航放在第十列（在 h1 的右侧）。如果您希望 nav ul 的宽度超过一列 (40px)，只需使用您想要的列数指定其类（例如，`class="four columns"`）。注意，因为 h1 div 占据了 16 个可用列中的 9 个，所以 nav div 不应超过 7 列宽，否则，它将被推到 h1 下方而不是浮动到它的右侧（这就是当您将其设置为 10 列宽时发生）。

# java - Java 正则表达式匹配，2 个简单的正则表达式问题

> ID：10608886
> 
> 赞同：0
> 
> 时间：2012-05-15T21:07:14.250
> 
> 标签：java, regex

**问题 1。**

```
String matchedKey = "sessions.0.something.else";
Pattern newP = Pattern.compile("sessions\\.([^\\.]+)(\\..+)");
m = newP.matcher(matchedKey);

System.out.println(m.group(1)); // has nothing. Why?

sessions\\. // word "sessions" followed by .
([^\\.]+)   // followed by something that is not a literal . at least once
(\\..+)     // followed by literal . and anything at least once 
```

我本来希望 m.group(1) 为 0

**问题2**

```
String mask = "sessions.{env}";
String maskRegex = mask.replace(".", "\\\\.").replace("env", "(.+)")
                                   .replace("{", "").replace("}", "");
// produces mask "sessions\\.(.+))" 
```

当用作

```
Pattern newP = Pattern.compile("sessions\\.(.+))"); // matches  matchedKey (above)
Pattern newP = Pattern.compile(maskRegex);          // does not match matchedKey (above) 
```

这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T21:16:56.233

您在这两个问题中都没有调用`Matcher.find()`OR`Matcher.macthes()`方法。

像这样使用它：

```
if (m.find())
   System.out.println("g1=" + m.group(1)); 
```

也很好检查`Matcher.groupCount()`价值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T21:17:24.487

在您可以访问匹配器的组之前，您必须调用`matches`它：

```
String matchedKey = "sessions.0.something.else";
Pattern newP = Pattern.compile("sessions\\.([^\\.]+)(\\..+)");
m = newP.matcher(matchedKey);
if (m.matches()) {
    System.out.println(m.group(1));
} 
```

`find`如果您想在字符串中的任何位置找到模式，也可以这样做。`matches`检查整个字符串是否从头到尾与您的模式匹配。

# c# - 这个路由事件的声明有什么问题？

> ID：10608890
> 
> 赞同：0
> 
> 时间：2012-05-15T21:07:35.490
> 
> 标签：c#, wpf, xaml, routed-events

我创建了以下用户控件：

```
public partial class ReplacementPatternEditor : UserControl, INotifyPropertyChanged
{
    ....

    public static readonly RoutedEvent CollectionChanged = EventManager.RegisterRoutedEvent(
        "CollectionChanged", RoutingStrategy.Bubble, typeof(RoutedEventHandler), typeof(ReplacementPatternEditor));

    void RaiseCollectionChangedEvent()
    {
        RoutedEventArgs newEventArgs = new RoutedEventArgs(ReplacementPatternEditor.CollectionChanged);
        RaiseEvent(newEventArgs);
    }

    ...
} 
```

现在，当我尝试在我的 xaml 代码中使用此路由事件时：

```
<local:ReplacementPatternEditor ItemsSource="{Binding MyItemSource}" CollectionChanged="OnCollectionChanged"/> 
```

我在编译时遇到以下错误：

```
The property 'CollectionChanged' does not exist in XML namespace 'clr-namespace:MyNamespace' 
```

为什么我会得到这个，以及如何使路由事件起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T21:17:53.423

看着这个[MSDN 链接](http://msdn.microsoft.com/en-us/library/ms752288.aspx)。它讨论了注册您已经完成的处理程序，然后讨论了为我在您的代码中看不到的事件提供 CLR 访问器。然后它添加事件处理程序。您没有事件声明

即这样的东西

```
public static readonly RoutedEvent CollectionChangedEvent = EventManager.RegisterRoutedEvent( 
    "CollectionChanged", RoutingStrategy.Bubble, typeof(RoutedEventHandler), typeof(ReplacementPatternEditor)); 

public event RoutedEventHandler CollectionChanged
{
    add { AddHandler(CollectionChangedEvent, value); } 
    remove { RemoveHandler(CollectionChangedEvent, value); }
}

void RaiseCollectionChangedEvent() 
{ 
    RoutedEventArgs newEventArgs = new RoutedEventArgs(ReplacementPatternEditor.CollectionChanged); 
    RaiseEvent(newEventArgs); 
} 
```

# android - 标题图像尺寸布局和布局土地

> ID：10608896
> 
> 赞同：0
> 
> 时间：2012-05-15T21:08:00.690
> 
> 标签：android, xml

我似乎无法弄清楚如何让我的标题看起来正确.. 一个视图或另一个视图中有空白。

有没有办法使用两个不同尺寸的单独图像？

我要么让它看起来像这样

[截图1 http://m4x.co/m/s1.png](http://m4x.co/m/s1.png) [截图2 http://m4x.co/m/l1.png](http://m4x.co/m/l1.png)

或者。

[截图3 http://m4x.co/m/s2.png](http://m4x.co/m/s2.png) [截图4 http://m4x.co/m/l2.png](http://m4x.co/m/l2.png)

但我想要

[screenshotideal1 http://m4x.co/m/s1.png](http://m4x.co/m/s1.png) [screenshotideal2 http://m4x.co/m/l2.png](http://m4x.co/m/l2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T21:15:42.270

要摆脱空白，您可以在图片样式中使用负边距`<img src='some_picture.png' style='margin-left:-10px; margin-right:-10px;'>`。

# javascript - 通过隐藏输入中的表单发送数组

> ID：10608902
> 
> 赞同：1
> 
> 时间：2012-05-15T21:08:46.900
> 
> 标签：javascript, jquery, html

我正在尝试将数组从 html 页面发送到 asp 代理（到服务），但无法使数组正常工作。

数组类型：json

脚本：JavaScript/jquery

```
var order = new Array();
for (var i = 0; i < list.length; i++) {
if (list[i].included == true)
order.push({ MarketID: list[i].marketID, Crop: list[i].crop })
}

$("#orderValue").val(order.join());
...

<form action="/hd.asp" method="post" id="hdForm">
<input type="hidden" name="order" id="orderValue" />
...
</form> 
```

删除数组，它可以正常工作，但数组是必需的属性。我尝试使用 .join() 和其他一些东西发送数组，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T21:14:27.900

试试这个：

```
$("#orderValue").val(JSON.stringify(order)); 
```

**编辑**.. 哎呀，应该在 JSON.stringify() 中放入 order 作为参数。现在就试试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T21:20:15.763

[编辑] c.hill 先到了：$ [/编辑]

不要使用`join()`，使用`JSON.stringify()`，例如：

```
var doit = function( myArray ) {
    var arrayString = JSON.stringify( myArray );
    $('#orderValue').val( arrayString );
    // rest of code
} 
```

# sql-server-2008 - 如果没有索引，那么它是否不可分割有关系吗？

> ID：10608908
> 
> 赞同：0
> 
> 时间：2012-05-15T21:08:59.850
> 
> 标签：sql-server-2008, query-optimization

如果我有条件查询

```
where year(MyColumn) = 2009 
```

由于 MyColumn 上没有索引，是否将其转换为“可存储”是否重要？

```
where MyColumn >= '20090101' and MyColumn < '20100101' 
```

（除了 YEAR 函数调用的开销）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T21:10:31.897

为 index 编写代码`where MyColumn >= 20090101 and MyColumn < 20100101`，您将来可能会添加一个，但忘记修复此查询以使用它。

# java - 如何用 txt 文件中的某些单词填充 JList

> ID：10608909
> 
> 赞同：2
> 
> 时间：2012-05-15T21:09:02.507
> 
> 标签：java, swing, file-io, jlist

我需要帮助`JList`。需要将文本文件添加到列表中，但 txt 文件的名称`library.txt`为：

```
title1 author1 description1 publisher1
title2 author2 description2 publisher2
title3 author3 description3 publisher3
title4 author4 description4 publisher4 
```

程序需要做的是**仅**使用 txt 中的标题填充列表，当用户从列表中选择某个标题时，程序需要将描述写入`JTextArea`.

这是我到目前为止得到的。

```
import java.awt.FlowLayout;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.DefaultListModel;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JTextArea;

public class Library extends JFrame {

    private JList lista;
    private JTextArea tekst;
    DefaultListModel model;

    public Library() {
        super("Biblioteka");
        this.setSize(300, 300);
        setLayout(new FlowLayout());
        model = new DefaultListModel();
        lista = new JList(model);
        add(lista);
        tekst = new JTextArea(20, 20);
        add(tekst);
        File fajl = new File("library.txt");
        BufferedReader ulaz = null;
        try {
            FileReader fr = new FileReader(fajl);
            ulaz = new BufferedReader(fr);
            String linija;
            try {
                while ((linija = ulaz.readLine()) != null) {
                    //lista.add(linija);
                    //System.out.println(linija);
                    String[] reci = linija.split("\t");
                    String naslovi = null;
                    for (int i = 0; i < reci.length; i++) {
                        naslovi = reci[0];
                    }
                    int pos = lista.getModel().getSize();
                    model.addElement(naslovi.toString());
                }
            } catch (IOException ex) {
                Logger.getLogger(Library.class.getName()).log(Level.SEVERE, null, ex);
            }
        } catch (FileNotFoundException ex) {
            Logger.getLogger(Library.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public static void main(String[] args) {
        Library l = new Library();
        l.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        l.setSize(300, 430);
        l.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:51:08.377

正如安德鲁在他的评论中提到的那样，使用 POJO（普通的旧 java 对象）

```
class Book {
    String title;
    String author;
    String description:
    /* other fields*/
} 
```

然后重写你的循环类似于

```
while ((linija = ulaz.readLine()) != null) {
    String[] reci = linija.split("\t");

    for (int i = 0; i < reci.length; i++) {
         Book book = new Book();
         book.title = reci[0];
         book.description = reci[2];
         /* other stuff here */
         model.addElement(book);
     }
} 
```

然后使用 a`ListCellRenderer`仅显示标题中的标题`List`并使用 a`ListSelectionListener`相应地收听和更新文本区域

# javascript - 在javascript中捕获同时单击鼠标左键和右键

> ID：10608910
> 
> 赞同：3
> 
> 时间：2012-05-15T21:09:08.123
> 
> 标签：javascript

在javascript中捕获鼠标左键和右键的最佳方法是什么？我没有使用 jQuery（它在我的学习列表中的下一个），现在只使用 javascript。基本上，我想做类似的事情

```
 onClick()=javascript:rightClickFunction() // do right click function
 onContextMenu()=javascript:leftClickFunction() /
 onBoth() ??? 
```

我在stackoverflow上唯一能找到的是： [如何用jQuery区分鼠标左键和右键](https://stackoverflow.com/questions/1206203/how-to-distinguish-between-left-and-right-mouse-click-with-jquery)

我应该如何捕获双击？我可以检查在 R 和 L 按钮例程期间是否也单击了相反的按钮？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-15T21:15:03.237

您可以使用一些布尔变量来跟踪哪些鼠标按钮被按下，如下所示：

```
var leftButtonDown = false;
var rightButtonDown = false;

$(document).mousedown(function() {
    if(e.which == 1) {
        leftButtonDown = true;
    } else if (e.which == 3) {
        rightButtonDown = true;
    }
});

$(document).mouseup(function() {
    if(e.which == 1) {
        leftButtonDown = false;
    } else if (e.which == 3) {
        rightButtonDown = false;
    }
});

$(document).click(function() {
    if(leftButtonDown && rightButtonDown) {
        // left and right buttons are clicked at the same time
    }
}); 
```

如果两个布尔值都为真，则鼠标右键和左键都被单击。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-11T16:00:10.257

基于Elliot[回答的纯 Javascript 解决方案：](https://stackoverflow.com/a/10608974/2788872)

```
var leftButtonDown = false;
var rightButtonDown = false;

document.addEventListener("mousedown", function () {
    if (e.which == 1) {
        leftButtonDown = true;
    } else if (e.which == 3) {
        rightButtonDown = true;
    }
});

document.addEventListener("mouseup", function () {
    if (e.which == 1) {
        leftButtonDown = false;
    } else if (e.which == 3) {
        rightButtonDown = false;
    }
});

document.addEventListener("click", function () {
    if (leftButtonDown && rightButtonDown) {
        // Click with both LMB and RMB.
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-18T03:31:11.773

对于仍然对最近的答案感兴趣的任何人，因为 event.which 已被弃用，您可以将以下代码与 ES6 语法一起使用。

```
let leftButtonDown = false;
let rightButtonDown = false;

document.addEventListener("mousedown", (e) => {
    // left click
    if (e.button === 0) {
        leftButtonDown = true;
    }
    // right click
    if (e.button === 2) {
        rightButtonDown = true;
    }
    if (leftButtonDown && rightButtonDown) {
        // insert code here
    }
});

document.addEventListener("mouseup", (e) => {
    if (e.button === 0) {
        leftButtonDown = false;
    }
    if (e.button === 2) {
        rightButtonDown = false;
    }
}); 
```

如果您想阻止弹出上下文菜单，您可以尝试以下变体：

```
let leftButtonDown = false;
let rightButtonDown = false;

document.addEventListener("mousedown", (e) => {
    // left click
    if (e.button === 0) {
        leftButtonDown = true;
    }
    // right click
    if (e.button === 2) {
        rightButtonDown = true;
    }
    if (leftButtonDown && rightButtonDown) {
        // insert code here
    }
});

document.addEventListener("mouseup", (e) => {
    if (e.button === 0) {
        leftButtonDown = false;
    }
});

document.addEventListener("contextmenu", (e) => {
    if (leftButtonDown && rightButtonDown) {
        e.preventDefault();
    }
    rightButtonDown = false;
}); 
```

现代浏览器鼠标按键映射：

*   左键 = 0
*   中键 = 1
*   右键= 2

IE8及更早的鼠标按键映射：

*   左键 = 1
*   中键 = 4
*   右键= 2

# java - 从j2me中的电话簿中选择多个联系人

> ID：10608911
> 
> 赞同：0
> 
> 时间：2012-05-15T21:09:14.280
> 
> 标签：java, java-me, contacts, midp, lcdui

这是我从电话簿中选择联系号码的代码。我可以从手机联系人列表中搜索并选择联系人号码。但是，我想选择多个联系人并将它们添加到文本字段中。

```
tb2 = new TextField("To: ", "", 30, TextField.PHONENUMBER);
            tb3 = new TextField("Message: ", "", 300, TextField.ANY);
            form1.append(tb2);
            form1.append(tb3);

            form1.addCommand(submitCommand);
            //display.setCurrent(tb3);
            display.setCurrent(form1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:20:32.830

当您使用 PHONENUMBER 约束时，应该只存在一个电话号码。根据[API](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/TextField.html)：

“PHONENUMBER 字段可能会显示数字分隔符和标点符号，以适应所使用的电话号码约定，将数字分组为国家代码、区号、前缀等。提供的任何空格或标点符号均不被视为文本对象实际的一部分内容。例如，具有 PHONENUMBER 约束的文本对象可能显示如下：“(408) 555-1212”，但通过 API 对应用程序可见的对象的实际内容将是字符串“4085551212”。

我认为您应该尝试使用具有 MULTIPLE 类型的 ChoiceGroup。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-16T10:32:09.333

有什么问题？

```
 /**
     *@param current - your current TextField String
     */
    public String addContact(String current) {
        return current += "," + getNextContact();
    }

    public String getNextContact() {
        //here should be the code that gives you single one
    } 
```

# ruby-on-rails - Ruby on Rails - 一个布局页面不同的内容

> ID：10608922
> 
> 赞同：2
> 
> 时间：2012-05-15T21:10:35.433
> 
> 标签：ruby-on-rails, ruby-on-rails-3, views, portfolio

我对 Rails 很陌生，正在寻找指导。

我在 Rails 上构建我的投资组合，我知道 Rails 的基本规则是“不要重复自己”。

我可以创建一个单独的布局页面来详细显示我的工作，但生成多个页面，每个页面都有自己的内容。例如：www.mywork.com/nike 与 www,mywork.com/pepsi 的布局相同但内容不同。如果我这样做，我如何以它们的唯一名称提取某些图像/文本。

还是我只是创建静态页面并使用相同的样式表？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:17:22.410

看看这个 rails cast - [http://railscasts.com/episodes/117-semi-static-pages](http://railscasts.com/episodes/117-semi-static-pages)

我同意您正在尝试做的并不是真正的“轨道方式”，但是每当我创建诸如关于我们和隐私页面的页面时，我都会使用上面链接中的技术，这些页面通常有一段文本并且可能将来会更新。

简而言之，你要做的是创建一个名为 content_page 的模型，它有一个链接（字符串）、内容（文本）和标题（字符串）。然后你创建一个只有一个显示动作的控制器，看起来像这样 -

```
 class ContentPagesController < ApplicationController

     def show
       @content_page = ContentPage.find_by_permalink(params[:link])
       raise ActiveRecord::RecordNotFound, "Page not found" if @content_page.nil?
     end
   end 
```

在您对表演动作的看法中，您可以说 -

```
 @content_page.content
   @content_page.heading 
```

获取该记录的内容和标题（或您分配给 ContentPage 的任何其他属性）。

然后在你的路线中，你可以在你的 routes.rb 底部有这样的东西（你把它放在底部，因为它是一条贪婪的路线） -

```
 match ':link' => 'content_pages#show' 
```

所以现在你可以说 www.mywork.com/nike 它将找到以 nike 作为链接的内容页面。我很简短，因为值得一看的是轨道演员。

就像我说的，上述技术只适用于基本内容页面，你应该为每个页面都有一个控制器，即使它只有一个索引操作:)

# google-chrome-extension - 如何使用内容脚本有效地覆盖 CSS？

> ID：10608924
> 
> 赞同：1
> 
> 时间：2012-05-15T21:10:45.660
> 
> 标签：google-chrome-extension

我的问题是我想覆盖网站的样式。问题是，有一种方法可以做到这一点，使用`!important`句子，如[本例所示](https://stackoverflow.com/questions/6077472/content-scripts-css-doesnt-overwrite-the-original)。

但是，我的文件中有数千条 CSS 指令，是否有更快速/有效的方法来执行此操作，即不要放在`!important`每一行上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-30T01:39:03.907

我发现最简单和最有效的方法是将您注入的任何 html 模板包装在具有非常特定 id 的 div 中。

```
<div id="my-specific-id">
  // Your injected HTML template or section of the website you want to change
</div> 
```

完成此操作后，重置所有可能影响该部分的 CSS。

```
#my-specific-id {

  // A comprehensive CSS reset

}

// The rest of your CSS will override the reset above 
```

这是一个这样的重置：[http ://html5doctor.com/html-5-reset-stylesheet/](http://html5doctor.com/html-5-reset-stylesheet/)

请注意，您可能不需要CSS 重置中的**所有内容**，因此请删除与减轻浏览器负载无关的内容。例如，我无法想象你真的想重置`figcaption`。

作为编写扩展程序的人，您应该非常关心您的扩展程序是否会破坏您注入脚本的网站上的用户体验。

我概述的方法将保证仅更改您特别关心的网站部分。

您可以使用自己的模板（假设您想在不使用 iframe 的情况下为每个页面添加天气小部件）或页面的特定部分来执行此操作。例如，您可以将所有`<p>`元素包装在您定义的高度特定的 id 中。

这是我最近从事的一个项目中使用 Sass 的示例...

```
#specific-id-css-ultimate-reset {
html, button, input, div, p, img, form {
    margin: 0;
    padding: 0;
    border: 0;
    outline: 0;
    font-size: 100%;
    vertical-align: baseline;
    background: transparent;
}

@import "modules/all";
@import "components/all";
@import "popups/all";
}

<div id="my-superspecific-html-template-wrapper">
  <HTML TEMPLATE>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T06:50:18.143

也许将您**不想**在注入的样式表中覆盖的原始 CSS 中的所有样式包含在内会更快？如果是这样，您可以使用内容脚本/代码注入或阻止浏览器对 CSS 文件的请求从页面中删除原始样式表。

您还可以编写一个小脚本来执行一些正则表达式魔术并添加`!important`到给定 CSS 文件的每一行。

# c++ - c++ boost库无法打开文件

> ID：10608929
> 
> 赞同：2
> 
> 时间：2012-05-15T21:11:30.333
> 
> 标签：c++, xml, boost

我尝试使用 boost 库来读取/写入配置文件，但我就是不明白。

我什至无法运行来自 boost.org（5 分钟教程） [http://www.boost.org/doc/libs/1_49_0/libs/property_tree/examples/debug_settings.cpp的示例代码](http://www.boost.org/doc/libs/1_49_0/libs/property_tree/examples/debug_settings.cpp)

我已经下载了 boost_1_49_0.zip 包并将其解压缩到我的 c++ 程序文件夹中。代码可以编译（TheIDE - U++），但它总是说“错误：debug_settings.xml：无法打开文件”，这基本上意味着程序可以工作，但会遇到异常。

我没有更改代码，我只是复制并粘贴它以获得一个我可以尝试理解的工作示例。但我什至没有让这个工作。（由于和链接里的一模一样，这里就不贴代码了……除非你觉得更好。）

请帮助我......或者指出一种不同的方式来将变量存储在具有某种结构的文件中（我不想学习一种适用于 Windows 和 linux 的方式，因为我的一些应用程序是跨平台的。）

谢谢。

编辑：debug_settings.xml 与 .cpp 文件位于同一文件夹中

EDIT2：现在工作，debug_settings.xml 现在位于存储可执行文件的文件夹中。（在我的情况下，U++/TheIDE 是 C:\upp\out\MyApps\MINGW.Debug.Debug_Full.Sse2 用于调试）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T05:53:06.950

配置文件在运行时需要位于可执行文件的工作目录中。

# jquery - Django 使用带有表单、视图的 AJAX

> ID：10608932
> 
> 赞同：0
> 
> 时间：2012-05-15T21:11:43.437
> 
> 标签：jquery, ajax, django, forms, python-2.7

我有一个表单，用于添加一个项目，其中使用与将提交表单的数据库不同的数据库填充 2 个下拉列表。我想将 AJAX 添加到下拉列表中，在第一个下拉列表中选择一个项目将使用 AJAX 自动填充第二个下拉列表中的数据。问题是我对表单使用相同的视图来填充数据并且即使我使用 is.ajax() 调用它也不起作用。

这是我的 AJAX 代码：

```
function get_data(){
//  alert('test');
new Ajax.Request('/abc/abc/add', { 
method: 'POST',
parameters: $H({'type':$('id_data').getValue()},
                            {'csrfmiddlewaretoken':$( "csrfmiddlewaretoken" ).getValue()}),
onSuccess: function(transport) {
    var e = $('id_def')
    if(transport.responseText)
        e.update(transport.responseText)
}
}); // end new Ajax.Request
//alert($( "csrfmiddlewaretoken" ).getValue()); 
} 
```

这是我的视图代码：

```
if request.is_ajax():
#if request.is_ajax()
    cur = connections['data'].cursor()
    #auto_type = Auto.objects.filter(type=request.POST.get('type', ''))
    abctype = request.POST.get('type', '')
    SQL = 'SELECT uuid FROM abc_abc where uid  = %s', abctype
    cur.execute(SQL)
    auto_type =cur.fetchone()

    cur = connections['data'].cursor()
    SQL = 'SELECT uuid, name FROM abc_abc where parent_id  = %s', auto_type
    cur.execute(SQL)
    colors = cur.fetchall()
    return render_to_response('abc/add_abc.html', {
            'colors' : colors,
            }, context_instance=RequestContext(request)) 
```

还有什么我想念的吗？如果您希望我从代码中添加更多内容，请告诉我.....请帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T18:28:22.023

我让它工作。似乎喜欢我在参数列表之后发送第二个参数的 js 文件。这是新代码：

```
function get_data(){
new Ajax.Request('/abc/abc/add', { 
method: 'POST',
parameters: $H({'type':$('id_data').getValue(), 
                'csrftoken':$( "csrftoken" ).getValue()
                 }),
onSuccess: function(transport) {
var e = $('id_data1')
if(transport.responseText)
      e.update(transport.responseText)
}

}); // end new Ajax.Request
} 
```

这是我的看法：

```
if request.is_ajax():
    cur = connections['data'].cursor()
    SQL = 'SELECT uuid, name FROM abc_abc where parent_id  = %s'
    auto_type = request.POST.get('type','')
    conv = iri_to_uri(auto_type)
    conv2 = (conv,)
    cur.execute(SQL,conv2)
    colors = dictfetchall(cur)
    return render_to_response('abc/add.html', {
            'colors' : colors,
            }, context_instance=RequestContext(request)) 
```

这是html对象：

```
<table border="0" cellpadding="0" cellspacing="0">
        <tr>{{ form.abc.errors }}</tr>
        <tr>
            <th><label>ABC:</label></th>
            <td><select name="abc" id="id_abc">
  <option value="" selected="selected">---------</option>
 {% for c in colors %}
<option value="{{ c.uuid }}">{{ c.name }}</option>
    {% endfor %}
</select></td>
            <td></td>
        </tr>
    </table>
    <br> 
```

# android - LogCat 的问题

> ID：10608935
> 
> 赞同：0
> 
> 时间：2012-05-15T21:12:10.417
> 
> 标签：android, logcat

我正在尝试制作我的第一个应用程序，并且制作了 2 个页面（LogoActivity（主页面）和 screen_2）。除了 LogCat，我没有任何问题。我不知道那是什么。如果你能告诉我一些事情，我很高兴学习:)。这是我从 Eclipse 获得的日志文件。

```
05-15 21:04:04.981: D/AndroidRuntime(382): Shutting down VM
05-15 21:04:04.981: W/dalvikvm(382): threadid=1: thread exiting with uncaught exception (group=0x40015560)
05-15 21:04:05.001: E/AndroidRuntime(382): FATAL EXCEPTION: main    
05-15 21:04:05.001: E/AndroidRuntime(382): java.lang.RuntimeException: Unable to start activity ComponentInfo{eu.eyestudios.logo/eu.eyestudios.logo.LogoActivity}: java.lang.ClassCastException: android.widget.ImageButton
05-15 21:04:05.001: E/AndroidRuntime(382):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
05-15 21:04:05.001: E/AndroidRuntime(382):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
05-15 21:04:05.001: E/AndroidRuntime(382):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)    
05-15 21:04:05.001: E/AndroidRuntime(382):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
05-15 21:04:05.001: E/AndroidRuntime(382):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-15 21:04:05.001: E/AndroidRuntime(382):  at android.os.Looper.loop(Looper.java:123)
05-15 21:04:05.001: E/AndroidRuntime(382):  at android.app.ActivityThread.main(ActivityThread.java:3683)
05-15 21:04:05.001: E/AndroidRuntime(382):  at java.lang.reflect.Method.invokeNative(Native Method)
05-15 21:04:05.001: E/AndroidRuntime(382):  at java.lang.reflect.Method.invoke(Method.java:507)
05-15 21:04:05.001: E/AndroidRuntime(382):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-15 21:04:05.001: E/AndroidRuntime(382):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-15 21:04:05.001: E/AndroidRuntime(382):  at dalvik.system.NativeStart.main(Native Method)
05-15 21:04:05.001: E/AndroidRuntime(382): Caused by: java.lang.ClassCastException: android.widget.ImageButton
05-15 21:04:05.001: E/AndroidRuntime(382):  at eu.eyestudios.logo.LogoActivity.onCreate(LogoActivity.java:14)
05-15 21:04:05.001: E/AndroidRuntime(382):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-15 21:04:05.001: E/AndroidRuntime(382):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
05-15 21:04:05.001: E/AndroidRuntime(382):  ... 11 more 
```

非常感谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T21:20:10.363

这些行

> 05-15 21:04:05.001: E/AndroidRuntime(382): 由: java.lang.ClassCastException: android.widget.ImageButton
> 
> 05-15 21:04:05.001: E/AndroidRuntime(382): at eu.eyestudios.logo.LogoActivity.onCreate(LogoActivity.java:14)

告诉您您正在尝试进行无效类型的强制转换。检查代码`LogoActivity.java:14`以找出你的演员有什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T05:53:00.160

```
The problem is in the imagebutton:

05-15 21:04:05.001: E/AndroidRuntime(382): Caused by: java.lang.ClassCastException: android.widget.ImageButton

I think you have not find image button by findviewbyid or you are taking wrong id for image button.like (ImageButton)findViewById(R.Id.***imagebutton**)..Check this id matches with image button id in xml. 
```

# c# - c#打印中的换页

> ID：10608938
> 
> 赞同：6
> 
> 时间：2012-05-15T21:12:25.170
> 
> 标签：c#, .net, vb.net, winforms, printing

我正在尝试进行换页并在打印时跳过 1 页，但是使用下面的代码行，我无法进行换页。

```
private void InserPageBreak(System.Drawing.Printing.PrintPageEventArgs e)
{
      Font sFont = new Font("Arial", 10);
      Brush sBrush = Brushes.White;
      e.Graphics.DrawString("\f", sFont, sBrush, 0, 0);
} 
```

我使用 PrintDialog 打印页面内容。我正在使用“\f”C# 的换页符。

关于如何实施/使此表单提要起作用的任何想法？

PS：我什至试过这个：

//ASCII 代码 12 - 打印机的换页控制代码。

```
 string test = char.ConvertFromUtf32(12);
 e.Graphics.DrawString(test, sFont, sBrush, 0, 0); 
```

在内部 c# 将其转换为“\f”，但没有做换页，任何实现过“\f”的人，请分享你的想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T15:49:18.730

在 .NET 中，应该使用 PrintPageEventArgs.HasMorePage 属性将换页符发送到打印机。通过调用 e.Graphics.DrawString("\f", sFont, sBrush, 0, 0)，您只是将文本渲染到要打印的文档中，打印机永远不会将其解释为换页。

因为您知道要在哪里中断页面，所以不要调用 InserPageBreak 方法，而是在 PrintPage 事件处理程序中设置 PrintPageEventArgs.HasMorePages = true。这将向打印机发送换页，并且您的 PrintPage 事件将继续被触发，直到您设置 HasMorePages = false。

我希望这有帮助。了解您如何实现 PrintPage 事件处理程序可能会很有用。

例子：

使用 BeginPrint 处理程序在打印前初始化数据

```
 void _document_BeginPrint(object sender, PrintEventArgs e)
    {
        //generate some dummy strings to print
        _pageData = new List<string>()
                {
                    "Page 1 Data",
                    "Page 2 Data",
                    "Page 3 Data",
                };

        // get enumerator for dummy strings
        _pageEnumerator = _pageData.GetEnumerator();

        //position to first string to print (i.e. first page)
        _pageEnumerator.MoveNext();
    } 
```

在 PrintPage 处理程序中，一次打印一页，并设置 HasMorePages 以指示是否有另一页要打印。在本例中，将打印三页，每页一个字符串。在第 3 页之后，_pageEnumerator.MoveNext() 将返回 false，结束打印作业。

```
 void _document_PrintPage(object sender, PrintPageEventArgs e)
    {
        Font sFont = new Font("Arial", 10);
        Brush sBrush = Brushes.Black;

        //print current page
        e.Graphics.DrawString(_pageEnumerator.Current, sFont, sBrush, 10, 10);

        // advance enumerator to determine if we have more pages.
        e.HasMorePages = _pageEnumerator.MoveNext();
    } 
```

# c# - DataRow 删除而不触发 CurrentChanged 事件

> ID：10608942
> 
> 赞同：0
> 
> 时间：2012-05-15T21:12:41.470
> 
> 标签：c#, event-handling, datarow

好吧，我有以下问题：

我需要在不触发 CurrentChanged 事件的情况下从绑定源中删除一行。删除工作没有任何问题。但它会立即引发 CurrentChanged 事件，这导致我正在执行与 CurrentChanged 事件匹配的代码。这导致了一个问题。`.Delete()`有什么方法可以在不引发事件的情况下达到类似的效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T21:29:55.550

如果有任何订阅者，删除一行将始终引发事件。

如果事件代码在您的控制之下，您可以设置一个您在 BindingSource_CurrentChanged 事件处理程序中检查的标志：

```
private void DeleteRow()
{
  this.justDeletedRow = true;
  this.bindingSource.DeleteRow(...);
}

protected void BindingSource_CurrentChanged(object sender ...)
{
  if (this.justDeletedRow)
  { 
     this.justDeletedRow = false;
     return;
  }

  // Process changes otherwise..
} 
```

如果代码不在您的控制之下 - 例如，如果您绑定到组件 - 那么您可以在执行操作时取消绑定处理程序：

```
private void DeleteRow()
{
  this.bindingSource.CurrentChanged -= this.component.BindingSource_CurrentChanged;
  this.bindingSource.DeleteRow(...);
  this.bindingSource.CurrentChanged += this.component.BindingSource_CurrentChanged;
} 
```

# vb.net - VB.NET 生成随机确认号

> ID：10608944
> 
> 赞同：0
> 
> 时间：2012-05-15T21:12:51.977
> 
> 标签：vb.net

我有一个属性，我刚刚添加到我的数据库中以保存确认号。唯一的问题是它们都是空的，所以我得到了错误。因此我需要一种方法来生成随机确认号（不重复）。列条目的最大大小为 varchar(20)。任何想法如何做到这一点？谢谢

解决方案：

```
 randNum = Replace(Guid.NewGuid().ToString(), "-", "")
        randNum = randNum.Substring(0, 19) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T21:18:39.350

做了一分钟的研究，发现了这些例子。

VB中的随机数：[VB.NET中的随机整数](https://stackoverflow.com/questions/18676/random-int-in-vb-net)

SQL Server 中的随机数：[http ://www.sql-server-helper.com/tips/generate-random-numbers.aspx](http://www.sql-server-helper.com/tips/generate-random-numbers.aspx)

如果您不想使用没有任何意义的数字（如果您只是填充列以避免错误），您可以在 .NET 端使您的变量可以为空，以便它可以容纳空值。

```
Dim MyInt? as Integer 
```

编辑：

您可以创建一个 GUID，删除破折号并将其减少到 20 个字符，这仍然不太可能重复。

编辑#2：如果您使用存储过程为新记录/更改记录执行这些更新（您应该这样做），您可以在 SQL 端创建随机数并将其作为 OUTPUT 变量返回。这将使您验证记录已创建/更新，并确认您在 .NET 端呈现。

编辑＃3： myGuild.ToString().Replace("-","").SubString(0,20) 应该可以解决问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-15T21:30:32.340

尝试生成 GUID，这总是不同的

```
Guid.NewGuid().ToString() 
```

# asp.net-mvc - Visual Studio 找不到自定义工具 RazorGenerator

> ID：10608948
> 
> 赞同：51
> 
> 时间：2012-05-15T21:13:10.833
> 
> 标签：asp.net-mvc, visual-studio-2010, nuget, razorgenerator

我已经安装了[NuGet 包](http://razorgenerator.codeplex.com/)，`RazorGenerator.mvc`然后运行 ​​shell 命令`Enable-RazorGenerator`并收到以下消息：

> 使用“0”参数调用“RunCustomTool”的异常：“自定义工具 'RazorGenerator' 失败。方法或操作未实现。”在 \packages\RazorGenerator.Mvc.1.3.2.0\tools\RazorGenerator.psm1： 77 char:40+ $_.Object.RunCustomTool <<<< () + CategoryInfo : NotSpecified: (:) [], MethodInvocationException + FullyQualifiedErrorId : ComMethodTargetInvocation

我还尝试右键单击并选择“运行自定义工具”，它提供了一个对话框，说明它在系统上找不到自定义工具`RazorGenerator`。

我错过了什么？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-05-15T21:14:05.950

我也遇到了同样的问题，我意识到除了解决方案的包之外，您还需要安装名为**RazorGenerator的 Visual Studio 扩展**

*   转到**Tools**，然后是**Extension Manager**
*   搜索**剃须刀发电机**
*   单击**下载**按钮。
*   安装完成后，**重新启动**Visual Studio。

# rabbitmq - 如何在 localhost 上停止 RabbitMQ 服务器

> ID：10608950
> 
> 赞同：55
> 
> 时间：2012-05-15T21:13:33.360
> 
> 标签：rabbitmq, amqp

我在 OS X 上安装了 RabbitMQ 服务器，并在命令行上启动它。现在，我应该如何阻止它运行并不明显？在我这样做之后：

```
sudo rabbitmq-server -detached 
```

我得到：

```
Activating RabbitMQ plugins ...
0 plugins activated: 
```

就是这样。我应该如何正确关闭它？在文档中，它提到了 using `rabbitmqctl(1)`，但我不清楚这意味着什么。谢谢。

编辑：根据下面的评论，这就是我运行的结果`sudo rabbitmqctl stop`：

```
(project_env)mlstr-1:Package mlstr$ sudo rabbitmqctl stop
Password:
Stopping and halting node rabbit@h002 ...
Error: unable to connect to node rabbit@h002: nodedown

DIAGNOSTICS
===========

nodes in question: [rabbit@h002]

hosts, their running nodes and ports:
- h002: [{rabbit,62428},{rabbitmqctl7069,64735}]

current node details:
- node name: rabbitmqctl7069@h002
- home dir: /opt/local/var/lib/rabbitmq
- cookie hash: q7VU0JjCd0VG7jOEF9Hf/g== 
```

为什么还有一个“当前节点”？我没有运行任何客户端程序，只运行了 RabbitMQ 服务器，这是否意味着服务器仍在运行？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-05-23T19:50:06.657

原来是和权限有关。不知何故，我的 rabbitmq 服务器是以用户 'rabbitmq' 启动​​的（这很奇怪），所以我不得不这样做

```
sudo -u rabbitmq rabbitmqctl stop 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-02-23T01:25:27.123

在我一直运行的开发环境中，我使用：

```
launchctl unload ~/Library/LaunchAgents/homebrew.mxcl.rabbitmq.plist 
```

并开始它

```
launchctl load ~/Library/LaunchAgents/homebrew.mxcl.rabbitmq.plist 
```

更容易......

```
brew services stop rabbitmq
brew services start rabbitmq 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-05-16T02:37:57.480

用于`rabbitmqctl stop`停止任何节点。如果您需要指定给您带来麻烦的节点，请添加该`-n rabbit@[hostname]`选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-30T16:58:01.883

您还可以使用快捷方式 RabbitMQ 服务 - 如果您不喜欢这些命令，请停止

# php - 将 PHP 连接到本地 SQL 2008 Express 数据库？

> ID：10608952
> 
> 赞同：0
> 
> 时间：2012-05-15T21:13:35.483
> 
> 标签：php, sql-server-2008

我花了大约一天的时间来解决这个问题，但我找不到任何问题。我得到错误：

```
Could not connect to server: SQL Server Network Interfaces: Error Locating Server/Instance Specified [xFFFFFFFF]
[message] => [Microsoft][SQL Server Native Client 11.0]SQL Server Network Interfaces: Error Locating Server/Instance Specified 
```

当我尝试点击具有数据库查询的页面时。我已经尝试过 PHP 5.4 和 5.3。我的 .ini 文件有这些行，

```
extension=php_sqlsrv_53_nts.dll

[sqlsrv]
sqlsrv.LogSubsystems = 0
sqlsrv.LogSeverity = 0
sqlsrv.WarningReturnAsErrors = 0 
```

并且 php_sqlsrv_53_nts.dll 在 ext 文件夹中。`phpinfo()`显示：

```
sqlsrv
sqlsrv support  enabled

Directive   Local Value Master Value
sqlsrv.ClientBufferMaxKBSize    10240   10240
sqlsrv.LogSeverity  0   0
sqlsrv.LogSubsystems    0   0
sqlsrv.WarningsReturnAsErrors   On  On 
```

所以我知道驱动程序已加载。我的连接代码是：

```
define('DB_SERVER',     '(local)\sqlexpress');
define('DB_NAME',       'DatabaseName');

public function __construct() {
    $connectionInfo = array('Database' => DB_NAME, 'ReturnDatesAsStrings' => true);
    $this->connection = sqlsrv_connect( DB_SERVER, $connectionInfo ) or die('Could not connect to server: <br/><br/>'.print_r( sqlsrv_errors(), true));
} 
```

这是一个本地数据库，因此 tcp、命名管道等应该没有任何问题。我可以在 .Net 项目中很好地连接到这个数据库。在这一点上，我对任何事情都持开放态度，因为我已经搜索了 Google 和 Stack Overflow 并尝试了几乎所有事情。

# numpy - python和scipy中稀疏矩阵的聚类

> ID：10608955
> 
> 赞同：1
> 
> 时间：2012-05-15T21:13:49.603
> 
> 标签：numpy, scipy, cluster-analysis, data-mining, k-means

我正在尝试使用 python 和 scipy 对一些数据进行聚类，但由于我不明白的原因，以下代码不起作用：

```
from scipy.sparse import *
matrix = dok_matrix((en,en), int)

for pub in pubs:
    authors = pub.split(";")
    for auth1 in authors:
        for auth2 in authors:
            if auth1 == auth2: continue
            id1 = e2id[auth1]
            id2 = e2id[auth2]
            matrix[id1, id2] += 1

from scipy.cluster.vq import vq, kmeans2, whiten
result = kmeans2(matrix, 30)
print result 
```

它说：

```
Traceback (most recent call last):
  File "cluster.py", line 40, in <module>
    result = kmeans2(matrix, 30)
  File "/usr/lib/python2.7/dist-packages/scipy/cluster/vq.py", line 683, in kmeans2
    clusters = init(data, k)
  File "/usr/lib/python2.7/dist-packages/scipy/cluster/vq.py", line 576, in _krandinit
    return init_rankn(data)
  File "/usr/lib/python2.7/dist-packages/scipy/cluster/vq.py", line 563, in init_rankn
    mu  = np.mean(data, 0)
  File "/usr/lib/python2.7/dist-packages/numpy/core/fromnumeric.py", line 2374, in mean
    return mean(axis, dtype, out)
TypeError: mean() takes at most 2 arguments (4 given) 
```

当我使用 kmenas 而不是 kmenas2 时，出现以下错误：

```
Traceback (most recent call last):
  File "cluster.py", line 40, in <module>
    result = kmeans(matrix, 30)
  File "/usr/lib/python2.7/dist-packages/scipy/cluster/vq.py", line 507, in kmeans
    guess = take(obs, randint(0, No, k), 0)
  File "/usr/lib/python2.7/dist-packages/numpy/core/fromnumeric.py", line 103, in take
    return take(indices, axis, out, mode)
TypeError: take() takes at most 3 arguments (5 given) 
```

我认为我有问题，因为我使用的是稀疏矩阵，但是我的矩阵太大而无法容纳内存。有没有办法使用来自 scipy 的标准聚类算法和稀疏矩阵？或者我必须自己重新实现它们？

我创建了一个新版本的代码来处理向量空间

```
el = len(experts)
pl = len(pubs)
print el, pl

from scipy.sparse import *
P = dok_matrix((pl, el), int)

p_id = 0
for pub in pubs:
    authors = pub.split(";")
    for auth1 in authors:
        if len(auth1) < 2: continue
        id1 = e2id[auth1]
        P[p_id, id1] = 1

from scipy.cluster.vq import kmeans, kmeans2, whiten
result = kmeans2(P, 30)
print result 
```

但我仍然收到错误：

> TypeError: mean() 最多接受 2 个参数（给定 4 个）

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T09:55:59.407

K-means 不能在距离矩阵上运行。

它**需要**一个向量空间来计算均值，这就是为什么它被称为 k-means。如果您想使用距离矩阵，您*需要*研究纯粹基于距离的算法，例如 DBSCAN 和 OPTICS（都在 Wikipedia 上）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-08T12:43:40.637

我可以建议，“亲和传播”`scikit-learn`吗？在我一直在做的工作中，我发现它通常能够在我的数据集中找到“自然”发生的集群。该算法的输入是任意相似性度量的亲和矩阵或相似性矩阵。

我对你手头的数据类型没有很好的处理，所以我不能说这种方法对你的数据集的确切适用性，但也许值得一试？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-09T00:03:17.590

或者，如果您正在寻找聚类图，我会看看 NetworkX。这对你来说可能是一个有用的工具。我建议这样做的原因是因为它看起来像您希望与作者网络一起使用的数据。因此，使用 NetworkX，您可以放入邻接矩阵并找出哪些作者聚集在一起。

[要对此进行进一步阐述，您可以在此处](https://stackoverflow.com/questions/17450521/networkx-finding-the-natural-clusters-of-points-on-a-graph)查看我之前提出的一个问题以寻求灵感。

# python - Python Lambda 可变性

> ID：10608956
> 
> 赞同：2
> 
> 时间：2012-05-15T21:13:51.837
> 
> 标签：python, lambda, pass-by-reference

```
class TestClass(object):
    def __init__(self):
        self.value = 100
        self.x = lambda: self.value.__add__(100)
        self.run()

    def run(self):        
        self.x()
        print self.value

t = TestClass()

#Output: 100 
```

我希望能够定义一个 lambda 函数，例如 TestClass 中的那个，并让它改变一个实例变量。似乎 lambda 的构造方式意味着它不会修改原始值。我怀疑这与我或多或少理解的 Python 参考策略有关。

所以接受我所做的缺陷，有没有类似的方法来获得类似的功能？我最终需要定义许多方法，例如`x`并打算将它们保存在字典中，因为它们将形成一个简单的指令集。据我所知，我需要使用`lambda`s 或`exec`做我想做的事。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T21:18:35.313

`__add__`不是就地的，所以返回值`TestClass.x`is `self.value + 100`，但`self.value`没有改变。尝试这个：

```
import random
HATE_LAMBDAS = random.choice(True, False)
class TestClass(object):
    def __init__(self):
        self.value = 100
        if HATE_LAMBDAS:
            def x():
                self.value += 100
            self.x = x
        else:
            self.x = lambda: setattr(self, "value", self.value + 100)
        self.run()

    def run(self):        
        self.x()
        print self.value

t = TestClass()

#Output: 200 
```

使用 setattr 来增加值，同时仍然使用 lambda。但是请注意，python 中的 lambda 是其最糟糕的功能之一。但是，这两种方法都有效。

## 编辑

刚刚记住了一些你可能会觉得有用的东西！标准库有一个名为[operator](http://docs.python.org/library/operator.html)的模块，它将标准运算符实现为函数。如果您打算大量使用 lambda，您可能想对其进行调查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T21:39:55.847

我只是在猜测你想要完成什么，但不需要 lambda。

```
class TestClass(object):
    def __init__(self):
        self.value = 100
        self.methods = { 'add':      self.w,
                         'subtract': self.x,
                         'mult':     self.y,
                         'div':      self.z,
                       }
        self.run()

    def w(self): self.value += 100
    def x(self): self.value -= 100
    def y(self): self.value *= 100
    def z(self): self.value /= 100

    def run(self):        
        self.x()
        print self.value 
```

# python - Python - 使用数字创建一组列表

> ID：10608960
> 
> 赞同：-1
> 
> 时间：2012-05-15T21:14:00.007
> 
> 标签：python, list, increment, decrement

假设我有一个字符串 n = '22' 和另一个数字 a = 4，因此 n 是 str 而 a 是 int。我想创建一组列表，例如：

```
list1 = [22, 12, 2] #decreasing n by 10, the last item must be single digit, positive or 0
list2 = [22, 11, 0] #decreasing n by 11, last item must be single digit, positive or 0
list3 = [22, 21, 20] #decreasing n by 1, last item must have last digit 0
list4 = [22, 13] #decreasing n by 9, last item must be single digit. if last item is == a, remove from list
list5 = [22, 32] #increasing n by 10, last item must have first digit as a - 1
list6 = [22, 33] #increasing n by 11, last item must have first digit as a - 1
list7 = [22, 23] #increasing n by 1, last item must have last digit a - 1
list8 = [22, 31] #increasing n by 9, last item must have first digit a - 1 
```

我正在为如何开始而苦苦挣扎。也许你可以给我一个如何解决这个问题的想法？

顺便说一句，如果不能满足某个条件，那么只有 n 会在该列表中。说 n = '20'，a = 4：

```
list3 = [20] 
```

这也适用于学校项目，用于具有列表项的列表中的索引。我想不出更好的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T21:26:36.120

这应该让你开始：

```
def lbuild( start, inc, test ):
    rslt = [start]
    while not test(start,inc):
        start += inc
        rslt.append( start )
    return rslt

n = '22'
a = 4

nval = int(n)
print lbuild( nval, -10, lambda(x,y): (x<10 and x>=0) )
print lbuild( nval, 1, lambda(x,y): x%10 == a-1 ) 
```

# ember.js - 动态绑定 在 Ember.Select 中

> ID：10608962
> 
> 赞同：0
> 
> 时间：2012-05-15T21:14:07.603
> 
> 标签：ember.js, multi-select

如果你看看我的问题简史，我似乎已经建立了提出简单问题的声誉，我应该在浪费人们的时间之前找到自己的答案。有了这个，虽然我真的很难过，我会非常感谢一些帮助，所以这里......

1.  我有一个多选列表（最终将使用 jquery 插件使其更漂亮），它将根据一些用户标准进行填充（在我的示例中，选项是硬编码的，但一个示例是 13 岁不应该能够在我的游戏商店中查看评级为“成熟”的游戏）。
2.  基于一些搜索条件（假设我们正在按发行商、特定国家/地区的可用游戏等进行搜索）。每个多选项目的计数应随着搜索条件的变化和计数的变化而更新。（在我的示例中，我只是用计时器更改了一个值）

这是小提琴，[http://jsfiddle.net/AMPBb/1/](http://jsfiddle.net/AMPBb/1/)

似乎有几种方法可以解决这个问题，比如我的 SelectListItem 上的 countBinding 和 displayText 计算属性，但我实际上无法完成一个工作示例。计数变化的第一个选项**非常**骇人听闻，但演示了我所期望的功能。我以前没有遇到过这样的例子，所以我很想看看解决这个问题的最佳方法应该是什么。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T21:33:16.787

我会`label`在你的上面创建一个计算属性，`App.SelectListItem`定义如下，请参阅[http://jsfiddle.net/pangratz666/Y6467/](http://jsfiddle.net/pangratz666/Y6467/)

```
label: function() {
    var text = this.get('text');
    var value = this.get('value');
    return '%@ (%@)'.fmt(text, value);
}.property('text', 'value').cacheable() 
```

另请注意，您必须在`App.SelectListItem`.

关于命名约定的另一件事：具体实例应该在 中命名`lowerCase`，所以它是`App.countModel`. 请参阅[http://www.emberist.com/2012/04/09/naming-conventions.html](http://www.emberist.com/2012/04/09/naming-conventions.html)。

# javascript - 如何在 d3.js 中的函数之间共享范围？

> ID：10608964
> 
> 赞同：1
> 
> 时间：2012-05-15T21:14:19.553
> 
> 标签：javascript, d3.js

我不确定这是 d3.js 问题还是 javascript 可见性问题。我有两个函数将相同的事件侦听器分配给不同的节点：

```
function render_line(){
    var x = d3.scale.ordinal();
    ...

    d3.select("#my_line").on("click", onclick);
}

function render_bar(){
    var y= d3.scale.linear();
    ...

    d3.select("#my_bar").on("click", onclick);
}

function onclick(d,i){
    use(x,y) // error: can't access x or y
    ...
} 
```

我认为共享相同的事件侦听器函数对两者都很有意义，`render_line()`因为`render_bar()`单击一个也应该更新另一个，但我不知道如何解决变量范围问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T21:18:12.457

如果您在函数之外声明变量然后分配给它们（不使用`var`函数中的关键字），那么您的函数将是*[闭包](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)*，被授予从这些变量中设置和获取值的访问权限。

```
var x,y;
function foo(){
  x = d3.scale.ordinal();
  d3.select("...").on("click",onclick);
}
function bar(){
  y = d3.scale.linear();
  d3.select("...").on("click",onclick);
}
function onclick(){
  // has access to both x and y here
} 
```

或者，如果这感觉太脏，那么在事件注册期间围绕局部变量创建一个闭包，将值传递给您的共享函数：

```
function foo(){
  var x = d3.scale.ordinal();
  d3.select("...").on("click",function(evt){
    onclick.call(this,evt,x);
  });
}
function foo(){
  var y = d3.scale.linear();
  d3.select("...").on("click",function(evt){
    onclick.call(this,evt,y);
  });
}
function onclick(evt,scale){
  // Use 'scale' passed in
} 
```

请注意，在这种情况下，您以后不能取消注册`onclick`，因为那不是向处理程序注册的函数。

# spring - 使用 Spring Junit 测试自动装配失败

> ID：10608967
> 
> 赞同：4
> 
> 时间：2012-05-15T21:14:32.020
> 
> 标签：spring, junit4, spring-test

为我的 spring 应用程序编写 Junit 测试。因为我是新手，所以我尝试从为我知道有效的 DAO 类编写单元测试开始（在 JBoss 中运行它）。但是，我无法让它在 Eclipse 中作为单元测试工作。我不断收到**“创建 bean 时出错...无法自动装配字段：NoSuchBeanDefinition”**。

我在 StackOverflow 和其他网站上看到了与此类似的错误，它总是以语法错误或试图自动装配接口的实现而不是接口等而告终。我的代码没有看到任何这些错误。

我确实从项目附带的 Spring 配置中单独下载了 Spring-test.jar。然而，两者都来自 Spring 2.5，所以我认为这不应该是一个问题：/

Eclipse 与 JUnit 4.8 捆绑在一起，而 Spring Unit Test 无法使用它，因此我将 JUnit 降级为使用 4.4

需要考虑的一件事...如果您查看我的单元测试的代码，您会注意到我自动装配了两个字段：一个 SimpleJdbcTemplate 在我要测试的查询服务中。好吧，如果我删除 DrugDao 和对它的所有引用，那么 SimpleJdbcQuery 自动连接就好了。

这是供您查看的堆栈跟踪：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'tst.hcps.glucosemanagement.dataaccess.DrugDaoTest': Autowiring of fields failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.hcps.glucosemanagement.repository.meds.DrugDao tst.hcps.glucosemanagement.dataaccess.DrugDaoTest.dQuery; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No unique bean of type [com.hcps.glucosemanagement.repository.meds.DrugDao] is defined: Unsatisfied dependency of type [interface com.hcps.glucosemanagement.repository.meds.DrugDao]: expected at least 1 matching bean
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessAfterInstantiation(AutowiredAnnotationBeanPostProcessor.java:243)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:959)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireBeanProperties(AbstractAutowireCapableBeanFactory.java:329)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:127)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:85)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:231)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:95)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.invokeTestMethod(SpringJUnit4ClassRunner.java:139)
    at org.junit.internal.runners.JUnit4ClassRunner.runMethods(JUnit4ClassRunner.java:51)
    at org.junit.internal.runners.JUnit4ClassRunner$1.run(JUnit4ClassRunner.java:44)
    at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:27)
    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:37)
    at org.junit.internal.runners.JUnit4ClassRunner.run(JUnit4ClassRunner.java:42)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.hcps.glucosemanagement.repository.meds.DrugDao tst.hcps.glucosemanagement.dataaccess.DrugDaoTest.dQuery; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No unique bean of type [com.hcps.glucosemanagement.repository.meds.DrugDao] is defined: Unsatisfied dependency of type [interface com.hcps.glucosemanagement.repository.meds.DrugDao]: expected at least 1 matching bean
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:435)
    at org.springframework.beans.factory.annotation.InjectionMetadata.injectFields(InjectionMetadata.java:105)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessAfterInstantiation(AutowiredAnnotationBeanPostProcessor.java:240)
    ... 18 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No unique bean of type [com.hcps.glucosemanagement.repository.meds.DrugDao] is defined: Unsatisfied dependency of type [interface com.hcps.glucosemanagement.repository.meds.DrugDao]: expected at least 1 matching bean
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:613)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:412)
    ... 20 more 
```

这是接口和实现：

**DrugDao.java**

```
package com.hcps.glucosemanagement.repository.meds;

import java.util.List;

import com.hcps.glucosemanagement.domain.meds.Drug;

public interface DrugDao {

    public List<Drug> searchDrugsByPrimaryName(String facilityId, String name);

    public List<Drug> searchDrugs(String facilityId, String primaryName, String secondaryName);

} 
```

**SpringJdbcDrugQuery.java**

```
package com.hcps.glucosemanagement.repository.meds;

import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.HashMap;
import java.util.List;

import org.apache.log4j.Logger;
import org.springframework.dao.EmptyResultDataAccessException;
import org.springframework.jdbc.core.simple.ParameterizedRowMapper;
import org.springframework.stereotype.Service;

import com.hcps.glucosemanagement.domain.meds.Drug;
import com.hcps.glucosemanagement.repository.DaoOperations;

@Service
public class SpringJdbcDrugQuery extends DaoOperations implements DrugDao {

private static final Logger logger = Logger.getLogger(SpringJdbcDrugQuery.class);

public List<Drug> searchDrugsByPrimaryName(String facilityId, String name) 
{
    return searchDrugs(facilityId, name, null);
}

public List<Drug> searchDrugs(String facilityId, String primaryName, String secondaryName) 
{
    List<Drug> results = null;

    StringBuffer sql = new StringBuffer();    
    HashMap<String, Object> namedParameters = new HashMap<String, Object>();

    if(primaryName==null) return null;

    sql = new StringBuffer();

    sql.append("SELECT");
            ...
        results = simpleJdbcTemplate.query(sql.toString(), new DrugMapper(), 

    return results;
}

private static final class DrugMapper implements ParameterizedRowMapper<Drug> 
{

    public Drug mapRow(ResultSet rs, int rowNum) throws SQLException {
        Drug drug = new Drug();
        drug.setFacilityId(rs.getString("FACILITY_ID"));
        drug.setPrimaryName(rs.getString("PRIMARY_NAME"));
        drug.setSecondaryName(rs.getString("SEC_NAME"));
        return drug;
    }

}
} 
```

**DrugDaoTest2.java （最初位于单独的源文件夹中，然后在同一文件夹中尝试）**

```
package com.hcps.glucosemanagement.repository.meds;

import static org.junit.Assert.assertTrue;

import java.util.List;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.simple.SimpleJdbcTemplate;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;

import com.hcps.glucosemanagement.domain.meds.Drug;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations={
        "classpath:common-test.xml"
})
public class DrugDaoTest2 {

    @Autowired
    DrugDao dQuery;
    @Autowired
    SimpleJdbcTemplate queryTemplate;

    @Test public void glucoseFetch() {
        List<Drug> rslts = dQuery.searchDrugsByPrimaryName(null, "INSU*");
        assertTrue(rslts.size()>0);
        int i=0;
        System.out.println(i);

    }

    public void setDrugDao(DrugDao drugDao) {
        this.dQuery = drugDao;
    }
} 
```

**common-test.xml**

```
<?xml version="1.0" encoding="UTF-8" ?>

<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:p="http://www.springframework.org/schema/p"
  xsi:schemaLocation="http://www.springframework.org/schema/beans
  http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"
>

   <!--
   Test configuration for Spring/JUnit Testing
   -->

  <bean id="contextApplicationContextProvider" class="com.hcps.glucosemanagement.spring.ApplicationContextProvider" />

  <bean id="jmxExporter" class="org.springframework.jmx.export.MBeanExporter" lazy-init="false">
    <property name="beans">
      <map>
        <entry key="bean:name=Log4jJmxServiceMBean" value-ref="glucosemanagement.Log4jJmxService" />
      </map>
    </property>
  </bean>
  <bean id="glucosemanagement.Log4jJmxService" class="com.hcps.glucosemanagement.logging.Log4jJmxService" />

  <bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basename" value="/WEB-INF/messages" />
  </bean>

  <bean id="parameterMappingInterceptor" class="org.springframework.web.portlet.handler.ParameterMappingInterceptor" />
  <bean id="viewResolverCommon" class="org.springframework.web.servlet.view.InternalResourceViewResolver"
    p:order="2"
    p:cache="false"
    p:viewClass="org.springframework.web.servlet.view.JstlView"
    p:prefix="/WEB-INF/jsp/"
    p:suffix=".jsp"
  />

  <bean id="defaultExceptionHandler" class="org.springframework.web.portlet.handler.SimpleMappingExceptionResolver">
    <property name="defaultErrorView" value="../error"/>
    <property name="exceptionMappings">
      <props>
        <prop key="javax.portlet.PortletSecurityException">notAuthorized</prop>
        <prop key="javax.portlet.UnavailableException">notAvailable</prop>
      </props>
    </property>
  </bean>

  <bean id="simpleParameterJdbcTemplate" class="org.springframework.jdbc.core.simple.SimpleJdbcTemplate">
    <constructor-arg ref="hciDataSource" />
  </bean>

  <bean id="hciDataSource" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driverClassName" value="oracle.jdbc.driver.OracleDriver" />
    <property name="url" value="jdbc:oracle:thin:@//vir-tst.com:1521/qar01.world" />
    <property name="username" value="ccuser" />
    <property name="password" value="bueno" />
    <property name="maxActive" value="30" />
    <property name="maxWait" value="30" />
    <property name="maxIdle" value="30" />
  </bean>

</beans> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T17:20:36.437

我的错误：我错过了在其他地方引用的另一个 Spring 配置文件。在我的单元测试中为任何自动装配的字段添加此字段并定义设置器解决了这个问题。

当发生这些类型的错误时，我现在正在使用此清单：

*   确保接口类型的实现类使用“@Service”注解
*   确保在 XML 中正确配置 bean：
*   最简单的方法是使用：

`<context:component-scan base-package="com.customization.packagename" />`

*   这会添加包名下的所有类
*   或者创建 XML Bean 定义

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-12T11:32:06.953

我遇到了类似的问题，发现虽然我可以在 Eclipse 中成功地 AutoWire 类，但 Surefire 只需要 AutoWired 接口。尤其是仅在使用 Cobertura 进行检测时才会发生这种情况，因此可以肯定代理生成存在问题。现在，我刚刚介绍了一个新界面，因为它适合我的用例，但肯定应该有另一个合适的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T22:29:46.100

将类型的 bean 定义添加`SpringJdbcDrugQuery`到 common-test.xml

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-17T03:09:21.247

我也遇到这个问题，我只是添加了setter，然后效果很好。

# javascript - 花式盒子 1.3.4 不工作

> ID：10608977
> 
> 赞同：0
> 
> 时间：2012-05-15T21:15:23.937
> 
> 标签：javascript, fancybox

这段代码有什么问题？我是初学者

```
 <link type="text/css" href="/css/custom-theme/jquery-ui-1.8.20.custom.css" rel="stylesheet" />
<script type="text/javascript" src="/js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="/js/jquery-ui-1.8.20.custom.min.js"></script>

<script type="text/javascript" src="/js/jquery.expander.js"></script>
<script type="text/javascript" src="/js/jquery.expander.min.js"></script>

<script type="text/javascript" src="/js/fancybox/jquery.fancybox-1.3.4.js"></script>
<script type="text/javascript" src="/js/fancybox/jquery.mousewheel-3.0.4.pack.js"></script>
<script type="text/javascript" src="/js/fancybox/jquery.fancybox-1.3.4.pack.js"></script> 
```

这里有一个电话fancybox

```
$("a#select_button").fancybox(); 
```

这是我的html代码

```
<p class="resp"><img src="logos/S7.png"><br>
    <b>Title</b>
    <span class="fprice">264 EUR</span>
    <a id="select_button" href="book_air.php?type=typeval&amp;origin=Val"><input class="selectt" value="Select" type="button"></a>
      <span class="f_row">
            <input name="first_row" type="radio">val-10:40 - val 11:40</span><br>
        <span class="s_row">
            <input name="second_row" type="radio">val-17:55 - val 21:10
      </span>
  <span class="buts"><input class="f_det" value="Details" type="button"> <input class="f_det" value="Share" type="button"></span>
  </p> 
```

我不知道我的问题在哪里，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T22:18:08.980

您必须确保脚本在 DOM 准备就绪时运行。有两种方法可以实现这一点。

要么等待从 jQuery 调用 document.ready 事件。为此，您可以将其添加到您的脚本中：

```
$(function() {
   $("a#select_button").fancybox();
}); 
```

或者您必须将脚本最后包含在您的 html 文档中（在 body-tag 内）。

（本例中的脚本指的是调用 fancybox 的那一行）

# c# - 如何阻止 ValueInjecter 映射空值？

> ID：10608978
> 
> 赞同：4
> 
> 时间：2012-05-15T21:15:33.893
> 
> 标签：c#, mapping, valueinjecter

我正在使用 ValueInjecter 映射两个相同的对象。我遇到的问题是 ValueInjector 从我的源复制空值到我的目标。所以我将大量数据丢失为空值。

这是我的对象的一个​​示例，它有时只填充了一半，导致其空值覆盖目标对象。

```
public class MyObject()
{
    public int ID { get; set; }
    public string Name { get; set; }
    public virtual ICollection<OtherObject> OtherObjects { get; set; }
}

to.InjectFrom(from); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-04T12:32:07.827

对于使用`ValueInjecter`v3+ 的用户，`ConventionInjection`已弃用。使用以下实现相同的结果：

```
public class NoNullsInjection : LoopInjection
{
    protected override void SetValue(object source, object target, PropertyInfo sp, PropertyInfo tp)
    {
        if (sp.GetValue(source) == null) return;
        base.SetValue(source, target, sp, tp);
    }
} 
```

用法：

```
target.InjectFrom<NoNullsInjection>(source); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T22:31:48.833

在这种情况下，您需要创建一个自定义 ConventionInjection。参见示例 #2： http: [//valueinjecter.codeplex.com/wikipage ?title=step%20by%20step%20explanation&referringTitle=Home](http://valueinjecter.codeplex.com/wikipage?title=step%20by%20step%20explanation&referringTitle=Home)

因此，您需要重写 Match 方法：

```
protected override bool Match(ConventionInfo c){
    //Use ConventionInfo parameter to access the source property value
    //For instance, return true if the property value is not null.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-16T13:17:55.643

你想要这样的东西。

```
public class NoNullsInjection : ConventionInjection
{
    protected override bool Match(ConventionInfo c)
    {
        return c.SourceProp.Name == c.TargetProp.Name
                && c.SourceProp.Value != null;
    }
} 
```

用法：

```
target.InjectFrom(new NoNullsInjection(), source); 
```

# sql-server - Linq to Entity 是否会增加与 dbms 同步的管理开销？

> ID：10608980
> 
> 赞同：0
> 
> 时间：2012-05-15T21:15:38.527
> 
> 标签：sql-server, ado.net, linq-to-entities

我正在想象一个三层 Web 应用程序的设置，MVC 3.0 和 ADO.NET 使用 Linq to Entity。构建是 VS 2010，服务器操作系统 MS Server 2008，数据库 MS Sql Server 2008。语言是 C# 或 VB。

1.  向数据库中的表添加列的首选机制是什么？
2.  重构表中的列类型的最佳机制是什么？

问题是关于保持数据库和实体模型之间的同步。与“典型的”RDBMS-SQLClient 方案相比，Linq 变体似乎为这些 DDL 操作带来了很多开销。

可能，我只是错过了一些东西......史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T06:01:29.123

根据您将遵循的架构，您可以获得所需的行为。

使用数据库优先模型，您必须通过设计器从数据库中添加表来维护您的模型类，这就是您添加/重构列的地方，更新 dbml，然后为您的数据库生成更改脚本。

如果您创建模型优先设计，那么您将在设计器中创建所有模型类，然后生成一个脚本来创建数据库。

在我看来，目前你可以完全控制并且更面向“开发人员”的方法的最佳实践是代码优先。像每个对象一样以编程方式创建所有类，创建一个库以使用 fluent API 将您的类映射到所需的数据库（您可以为不同的数据存储创建多个库），您还可以迁移您的更改。因此，您可以使用“数据库无知”的方式创建所有类并通过迁移进行维护，或者仅通过 Red Gate 的 SQL 比较等比较工具创建更改脚本。

# javascript - 基于输入和引用数据的 Javascript URL 重定向？

> ID：10608981
> 
> 赞同：0
> 
> 时间：2012-05-15T21:15:40.593
> 
> 标签：javascript, html

我有这个脚本会将用户带到特定页面引用的 url。我们使用的典型页面 url 是：

```
http://www.*****.com/Catalogues/Main/2012-Spring-Fall/#/XXX/zoomed 
```

因此，使用下面的脚本，当他们输入页码（例如 123）时，它会将 XXX（来自上面的 url）替换为 123 并带您进入页面：

```
http://www.*****.com/Catalogues/Main/2012-Spring-Fall/#/123/zoomed 
```

但是，我需要将其拆分为如下部分： **第 01 部分是第 001-050 ​​页**，**第 02 部分是第 051-100 页**，**第 03 部分是第 101-150 页**

新的网址变成：

```
http://www.*****.com/Catalogues/Main/2012-Spring-Fall/Sections/XX/#/XXX/zoomed 
```

如何分配属于每个部分的页码块，并在它们仅输入页码时自动输入，以便登录网址为：

```
http://www.*****.com/Catalogues/Main/2012-Spring-Fall/Sections/03/#/123/zoomed 
```

如果 javascript 不能处理这个问题，也许是 PHP？

将不胜感激任何帮助。

```
 <script type="text/javascript">
    function handleEnter (field, event) {
            var keyCode = event.keyCode ? event.keyCode : event.which ? event.which :     event.charCode;
        if (keyCode == 13) {
            var i;
            for (i = 0; i < field.form.elements.length; i++)
                if (field == field.form.elements[i])
                    break;
            i = (i + 1) % field.form.elements.length;
            field.form.elements[i].focus();
            return false;
        } 
        else
        return true;
    }      

    </script>

<SCRIPT LANGUAGE="JavaScript">
<!-- Begin
function goForit() {
var password;
password=this.document.testform.inputbox.value
location="http://www.*****.com/Catalogues/Main/2012-Spring-Fall/#/" + password + "/zoomed/" 
}
// End -->
</SCRIPT>

    <TABLE WIDTH=200 BORDER=0 align="center" CELLPADDING=0 CELLSPACING=0>
    <TR>
    <TD><CENTER>
      <FORM NAME="testform" target="_top">
        Go to page:
      <INPUT TYPE="text" NAME="inputbox" value="" size="3" onkeypress="return handleEnter(this, event)">
      <INPUT TYPE="button" NAME="BUTTON" value="Go!" onClick="goForit(this.form)">
      </FORM>
    </CENTER>
    </TABLE> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T21:25:59.753

听起来您最好的选择可能是创建一个可以通过 AJAX 访问的 Web 服务，以避免将此逻辑硬编码到您的 JS 中。让用户提交他们想要的页面，将其传递回您的后端，让您的后端以正确的 URL 响应，重定向到所述 URL。

完毕。

# javascript - 你如何从 localStorage 调用 url

> ID：10608990
> 
> 赞同：2
> 
> 时间：2012-05-15T21:16:17.837
> 
> 标签：javascript, local-storage

我想在设置页面上将 url 保存到 localStorage-。然后我需要一个超链接或一个按钮，点击后会转到该网址。尽量不使用 jquery。

```
<!doctype html>
<html>
<head>
<title>Local Storage URL</title>

<script type="text/javascript"> 
function save() {
    var myURL = document.getElementById('url');
    localStorage.setItem('url', myURL.value);
}

function load() {
    var storedValue = localStorage.getItem('url');
    if(storedValue) {
        document.getElementById('url').value = storedValue;
    }
}

</script>

</head>

<body onLoad="load()">
<input type="text" id="url" />
<input type="button" value="save" onclick="save()" />
<p>
<-- Here is where I am stuck below --><br>
<a href="('myUrl')">Link to localStorage Address</a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T21:36:07.407

你应该设置锚标签的href和innerHTML，

```
<a id="link" href="('myUrl')">Link to localStorage Address</a>

function load() {
    var storedValue = localStorage.getItem('url');
    var linkTag = document.getElementById('link');
    var urlInput = document.getElementById('url');
    if(storedValue) {
        urlInput.value = storedValue;
        linkTag.href = storedValue;
        linkTag.innerHTML = storedValue;
    }
} 
```

[演示](http://jsfiddle.net/jNwmm/2/)

# tsql - 2 行显示为 1

> ID：10608991
> 
> 赞同：-6
> 
> 时间：2012-05-15T21:16:27.043
> 
> 标签：tsql

这个查询给了我 2 行，但结果只显示了 1 行。我不明白为什么。我希望结果为 2 行。

```
 SELECT *
 FROM table AS S1
      INNER JOIN table AS S2
        ON S1.code = S2.code
 WHERE  S1.column1 IS NULL
   AND S2.column1 IS NOT NULL 
```

这是我期待的输出：

预期输出：

```
ID    login    email         code    column1
--------------------------------------------
96    testid1  test-Email1   XPQR    NULL
97    testid1  test-Email1   XPQR    P 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T22:41:17.870

只是一个疯狂的猜测：

```
SELECT *
FROM table AS S1
WHERE EXISTS 
      ( SELECT *
        FROM table AS S2
        WHERE ( S2.code = S1.code )
          AND (  ( S1.column1 IS NULL  AND  S2.column1 IS NOT NULL ) 
              OR ( S2.column1 IS NULL  AND  S1.column1 IS NOT NULL )
              )
      ) ; 
```

# jquery-ui - Jquery UI 自动完成选择

> ID：10608994
> 
> 赞同：4
> 
> 时间：2012-05-15T21:16:54.830
> 
> 标签：jquery-ui, jquery-ui-autocomplete

我需要一些关于下面代码的帮助。

```
$("#auto_cp").autocomplete({
    minLength: 3,
    //source
    source: function(req, add) {
        $.getJSON("friends.php?callback=?", req, function(data) {
            var suggestions = [];
            $.each(data, function(i, val) {
                suggestions.push(val.name);
            });
            add(suggestions);
        });
    },
    //select
    select: function(e, ui) {
        alert(ui.item.value);
    }
});​ 
```

使用 FireBug，我在控制台中得到了这个：

> jQuery171003666625335785867_1337116004522([{"name":"97300 Cayenne","zzz":"203"},{"name":"97311 Roura","zzz":"201"},{"name":"97312 Saint Elie ","zzz":"388"},{"name":"97320 Saint Laurent du Maroni","zzz":"391"},{"name":"97351 Matoury","zzz":"52" },{"name":"97354 Remire MontJoly Cayenne","zzz":"69"},{"name":"97355 Macouria Tonate","zzz":"449"}])

一切工作都很好，但我不知道如何在选定项目上获取 'zzz' 的值。

我试过了

```
alert(ui.item.zzz); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T22:55:23.357

自动完成小部件需要一个数组格式的数据源，其中之一是：

*   包含**标签**属性、**值**属性或两者的对象
*   简单的字符串值

您当前正在构建第二个（字符串值数组），它工作正常，但您也可以在迭代数据时稍微调整数据并提供对象中的其他属性：

```
$("#auto_cp").autocomplete({
    minLength: 3,
    //source
    source: function(req, add) {
        $.getJSON("friends.php?callback=?", req, function(data) {
            var suggestions = [];
            $.each(data, function(i, val) {
                suggestions.push({
                    label: val.name,
                    zzz: val.zzz
                });
            });
            add(suggestions);
        });
    },
    //select
    select: function(e, ui) {
        alert(ui.item.zzz);
    }
});​ 
```

现在，由于您为小部件提供的数组包含具有**name**属性的对象，因此您应该获得自动完成功能并获得对该`zzz`属性的访问权限。

**这是一个工作示例**（没有 AJAX 调用）：http: [//jsfiddle.net/LY42X/](http://jsfiddle.net/LY42X/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T21:39:58.283

您的源函数仅填充名称。如果您想要该数据结构中的所有内容，请执行以下操作：

```
$("#auto_cp").autocomplete({
    minLength: 3,
    //source
    source: function(req, add) {
        $.getJSON("friends.php?callback=?", req, function(data) {
            var suggestions = [];
            $.each(data, function(i, val) {
                suggestions.push(val); //not val.name
            });
            add(suggestions);
        });
    },
    //select
    select: function(e, ui) {
        alert(ui.item.value.zzz);
    }
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T21:43:38.713

这似乎是一个对象数组......您可能缺少的是“[0]”或一般的“[index]”。

请检查：[jqueryui.com/demos/autocomplete/#event-select](http://jqueryui.com/demos/autocomplete/#event-select)

# html - 如何在 HTML 页面中从 COM 端口读取和写入数据？

> ID：10608997
> 
> 赞同：1
> 
> 时间：2012-05-15T21:17:18.663
> 
> 标签：html, serial-port

有没有人尝试过从网页中的 COM 端口读取和写入数据。我正在运行 Apache 网络服务器。谁能建议我应该使用什么脚本来从系统上的 COM 端口访问 html 页面中的数据？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:15:14.037

目前没有办法直接从 HTML 5 执行此操作（除了可能在使用 webworks 的黑莓表 OS 或 BB10 上（也将是客户端），但我没有亲自尝试过）。如果您尝试读取服务器上的串行数据并在 HTML 文档中显示结果，使用 javascript 将发布请求发送到您的网络服务器很容易完成。在服务器上进行工作并响应，并在 javascript 中解释服务器的响应。

有很多关于从 javascript 异步发送 post 请求的在线指南，例如：[JavaScript: Sending POST, redirecting to response](https://stackoverflow.com/questions/2224359/javascript-sending-post-redirecting-to-response)。

在服务器端，有很多可用的选项。您可以使用 PHP-serial 读取串行数据：[http://code.google.com/p/php-serial/](http://code.google.com/p/php-serial/)，或者如果它不是 PHP 服务器，则可以使用大多数语言的库。或者，如果您不喜欢 PHP 串行，您可以使用您的服务器语言调用系统上的另一个可执行文件/脚本来进行串行读取（该外部程序可以通过标准输出或文件输出中继读取的数据）。无论哪种方式，网络服务器都可以通过打印数据来响应 HTTP 请求，而您的客户端 JavaScript 可以读取响应正文以检索该数据。