# StackOverflow 问答 10846000-10846999

# windows-phone-7.1.1 - 视频播放的tapjoy问题

> ID：10846001
> 
> 赞同：0
> 
> 时间：2012-06-01T07:15:03.370
> 
> 标签：windows-phone-7.1.1, tapjoy

我有一个使用 Silverlight 构建的 Windows 手机游戏。在这个游戏中，我想添加 TapJoy。我已经下载了他们最新的 SDK 并按照他们的所有步骤在我的应用程序中集成它。

在游戏中，我使用silverlight作为主框架和Global Media Element来播放连续的背景音乐。我正在使用 (Microsoft.Xna.Framework.Media) (Microsoft.Xna.Framework) 命名空间。使用它们，我使用以下方法来播放连续的背景声音。DispatcherTimer 和 FrameworkDispatcher.Update

现在，当我点击点击欢乐按钮打开他们的优惠时，他们加载正常；但是，当我在优惠中打开视频时，他们向我们显示以下错误“视频无法播放，请重试。”</p>

基于一些研究和研究，我尝试了一些事情，发现，a）我需要将 Media Element 和 DispatcherTimer 设置为空。b）应用程序在后台发送（停用），然后我再次打开它（激活），视频很好。我检查并发现 Media Element 和 DispatcherTimer 已正确设置为 null。

但是，如果我只执行第一步，并且不在后台发送应用程序，则媒体元素和 dispatcherTimer 不会设置为 null。

谁能帮助我并在下面回答我

a) 我在为此做任何事情吗？b）我可以做任何事情，以便当点击欢乐按钮时，我的应用程序会自动发送到后台，因为这可以解决问题。c）我在将值设置为 null 后使用 gc.collect() 但它仍然没有被破坏。

在此先感谢大卫雅各布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T18:51:13.450

我正在努力按照你所说的去做。我个人会以不同的方式设置它，但我稍后会谈到。我的设置与您的描述相似，它适用于 Tapjoy 的视频。

首先，你提到它是一款 Silverlight 游戏，所以我在 VS 2010 的 Silverlight For Windows Phone 模板下新建了一个 Windows Phone 应用程序项目。

## 设置调度程序：

我在我的项目中添加了以下类（通常称为此 msdn 示例中的 XNAFrameworkDispatcherService.cs：http: [//msdn.microsoft.com/en-us/library/ff842408.aspx](http://msdn.microsoft.com/en-us/library/ff842408.aspx)）

```
public class XNAFrameworkDispatcherService : IApplicationService
{
    private DispatcherTimer frameworkDispatcherTimer;

    public XNAFrameworkDispatcherService()
    {
        this.frameworkDispatcherTimer = new DispatcherTimer();
        this.frameworkDispatcherTimer.Interval = TimeSpan.FromTicks(333333);
        this.frameworkDispatcherTimer.Tick += frameworkDispatcherTimer_Tick;
        FrameworkDispatcher.Update();
    }

    void frameworkDispatcherTimer_Tick(object sender, EventArgs e)
    {
        FrameworkDispatcher.Update();
    }

    void IApplicationService.StartService(ApplicationServiceContext context)
    {
        this.frameworkDispatcherTimer.Start();
    }

    void IApplicationService.StopService()
    {
        this.frameworkDispatcherTimer.Stop();
    }
} 
```

要启动此服务，请确保已将其添加到 App.xaml。将属性添加到指向您的命名空间的 Application 元素，如下所示：

```
xmlns:s="clr-namespace:WindowsPhoneApplication;assembly=WindowsPhoneApplication"> 
```

然后在您的块中添加以下内容：

```
<s:XNAFrameworkDispatcherService /> 
```

## 播放音乐：

现在关于播放循环音乐文件。在 MainPage.xaml.cs 中，我使用 Microsoft.Xna.Framework.Media.MediaPlayer 设置了 Microsoft.Xna.Framework.Media.Song 以在页面导航到时循环。

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
{
    base.OnNavigatedTo(e);

    Tapjoy.TapjoyConnect.Instance.RequestTapjoyConnect("your-app-id", "your-secret-key");

    try
    {
        Song song = Song.FromUri("example", new Uri("/example.wma", UriKind.Relative));
        MediaPlayer.IsRepeating = true;
        MediaPlayer.Play(song);
    }
    catch (Exception)
    {
        System.Diagnostics.Debug.WriteLine("Can't load sound");
    }
} 
```

当页面离开时，我还将它设置为停止播放音乐。

```
protected override void OnNavigatedFrom(System.Windows.Navigation.NavigationEventArgs e)
{
    base.OnNavigatedFrom(e);

    MediaPlayer.Stop();
} 
```

然后我创建了一个按钮来启动 Tapjoy 优惠墙。

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    Tapjoy.TapjoyConnect.Instance.ShowOffers();
} 
```

## 概括：

现在发生的情况是，当您的应用程序启动时，它会启动以大约 30 fps 的速度滴答作响的 XNAFrameworkDispatcherService。这将为您发送 XNA 框架队列中的消息。这仅在使用来自 XNA 的音频/媒体服务的 silverlight 应用程序中需要。

当导航到 MainPage 时，您使用 Connect 调用 ping Tapjoy，然后加载您的歌曲以循环播放。

正常的游戏现在可以进行了，当点击 Show Offers 按钮时，Tapjoy 将离开您的页面，导致从事件导航到触发，并且 MediaPlayer 将停止您的歌曲。

## 游戏创意：

您可能要考虑创建一个新项目并使用“Windows Phone Silverlight 和 XNA 应用程序”选项。VS2010 将创建一个已设置内容管理器的空白项目，因此您可以使用 XNA 管道使用声音和图像，我发现这更容易。

祝你好运，记住 Tapjoy 也为这些问题提供支持。只需发送电子邮件至 support@tapjoy.com，或使用 Tapjoy 开发人员组：[https ://groups.google.com/group/tapjoy-developer?hl=en](https://groups.google.com/group/tapjoy-developer?hl=en)

# rfid - 125khz RFID 卡的最大读取长度是多少？

> ID：10846003
> 
> 赞同：4
> 
> 时间：2012-06-01T07:15:09.990
> 
> 标签：rfid

我有一个使用 125Khz RFID 卡、点、贴纸的项目。

我需要一个读取长度至少为 4-7 米的读卡器。

阅读器将收集该范围内的所有标签，并根据库存检查它们。

我无法找到任何具有此范围的 RFID 阅读器，我不确定这在技术上是否可行。

有谁知道 125khz RFID 在技术上是否可行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T07:25:00.330

根据维基百科[http://en.wikipedia.org/wiki/Radio-frequency_identification，120–150](http://en.wikipedia.org/wiki/Radio-frequency_identification) kHz (LF) 的最大范围为 10cm。

# iphone - 如何修复饼图中的错误在 iPhone 应用程序中显示空白空间切片

> ID：10846013
> 
> 赞同：0
> 
> 时间：2012-06-01T07:16:01.857
> 
> 标签：iphone, xcode

我正在使用以下代码创建饼图：

馅饼类

```
 @interface PieClass : UIView {

NSArray* itemArray;
NSArray* myColorArray; 
int radius;

 }

 @property(nonatomic,retain)NSArray* itemArray;
 @property(nonatomic,retain)NSArray* myColorArray;
 @property(nonatomic,assign) int radius;

@end 
```

Pie 类实现

```
 - (id)initWithFrame:(CGRect)frame
 {
self = [super initWithFrame:frame];
if (self) {
    // Initialization code

}
return self;
}

- (void)drawRect:(CGRect)rect
{

int c=[itemArray count];

CGFloat angleArray[c];
CGFloat offset;
int sum=0;

CGContextRef context = UIGraphicsGetCurrentContext();

CGContextSetAllowsAntialiasing(context, false);
CGContextSetShouldAntialias(context, false);

for(int i=0;i<[itemArray count];i++)

{

    sum+=[[itemArray objectAtIndex:i] intValue];

}

for(int i=0;i<[itemArray count];i++)
{

    angleArray[i]=(float)(([[itemArray objectAtIndex:i] intValue])/(float)sum)*(2*3.14); // in radians
    CGContextMoveToPoint(context, radius, radius);
    if(i==0)
        CGContextAddArc(context, radius, radius, radius, 0,angleArray[i], 0);
    else
        CGContextAddArc(context, radius, radius, radius,offset,offset+angleArray[i], 0);
    offset+=angleArray[i];

    CGContextSetFillColorWithColor(context, ((UIColor *)[myColorArray objectAtIndex:i]).CGColor);
    CGContextClosePath(context); 
    CGContextFillPath(context);

    }
       }

   - (void)dealloc
     {

[super dealloc];

    }

  @end

-(void)createGraph{
    PieClass *myPieClass=[[PieClass alloc]initWithFrame:CGRectMake(25,460,230,200)];
    myPieClass.backgroundColor=[UIColor clearColor];

    int one=[valueOne  intValue];
    int two=[valueTwo intValue];
    int three=[valueThree intValue];
    int four=[valueFour intValue]; 

    int total=one+two+three+four;

    float oneValue=(float)one/(float)total*100;
    float twoValue=(float)two/(float)total*100;
    float threeValue=(float)three/(float)total*100;
    float fourValue=(float)four/(float)total*100;
    float floatTotal=oneValue+twoValue+threeValue+fourValue;

    NSString *value1=[NSString stringWithFormat:@"%f",oneValue];
    NSString *value2=[NSString stringWithFormat:@"%f",twoValue];
    NSString *value3=[NSString stringWithFormat:@"%f",threeValue];
    NSString *value4=[NSString stringWithFormat:@"%f",fourValue];

    myPieClass.itemArray=[[NSArray alloc]initWithObjects:valueOne,valueTwo,valueThree,valueFour, nil];
    myPieClass.myColorArray=[[NSArray alloc]initWithObjects:[UIColor colorWithRed:(128/255.0) green:(100/255.0) blue:(162/255.0) alpha:1],[UIColor colorWithRed:(155/255.0) green:(187/255.0) blue:(89/255.0) alpha:1],[UIColor colorWithRed:(192/255.0) green:(80/255.0) blue:(77/255.0) alpha:1],[UIColor colorWithRed:(79/255.0) green:(129/255.0) blue:(189/255.0) alpha:1], nil];
    myPieClass.radius=100;

    [self.view addSubview:myPieClass];
} 
```

它工作正常，但有时它会在每个切片部分显示空白的灰色空间。我想删除它。下面是显示饼图的附加图像。

![显示饼图的图像](../Images/1c0e3c4fbe773133808a4b751e1859fe.png)

# python - 我的编码/密码有什么问题？

> ID：10846016
> 
> 赞同：0
> 
> 时间：2012-06-01T07:16:20.663
> 
> 标签：python, encode, encryption

我的代码用于替换某些字母（a 用 e，e 用 a 和 s 用 3）不起作用，但我不太确定错误是什么，因为它没有更改我正在输入的文本文件。

```
pattern = "ae|ea|s3"

def encode(pattern, filename):
  message = open(filename, 'r+')
  output = []
  pattern2 = pattern.split('|')
  for letter in message:
    isfound = false
    for keypair in pattern2:
      if letter == keypair[0]: 
        output.append(keypair[1])
        isfound = true
      if isfound == true:
       break;
    if isfound == false:
      output.append(letter)

  message.close() 
```

一直在绞尽脑汁想弄清楚这件事有一段时间了..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:28:15.827

这是一个具有所需结果的快速实现，您需要自己修改它以读取文件等：

```
def encode(pattern, string):
    rep = {}
    for pair in pattern.split("|"):
        rep[pair[0]] = pair[1]

    out = []
    for c in string:
        out.append(rep.get(c, c))

    return "".join(out)

print encode("ae|ea|s3", "Hello, this is my default string to replace")
#output => "Hallo, thi3 i3 my dafeult 3tring to rapleca" 
```

如果你想修改一个文件，你需要专门告诉你的程序写入文件。简单地附加到您的输出变量不会改变它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:28:50.267

它不会更改文本文件，因为您不会用`output`您创建的文本文件替换文本文件。相反，此函数正在创建`output`字符串并将其放在函数末尾。从函数返回`output`字符串并将其存储在外部，或者通过写入文件而不附加来替换函数中的文件。

由于这看起来像是一个练习，我宁愿不添加代码来完成它，因为您可能会从自己编写函数中学到更多。

# python - python if语句关于字典值

> ID：10846018
> 
> 赞同：-10
> 
> 时间：2012-06-01T07:16:34.050
> 
> 标签：python, dictionary, if-statement

我创建了一个字典：

```
print dict

{'a': [['1', ' 2', ' 3']], 'b': [['2', ' 3', ' 4'], ['3', ' 4', ' 2']], 'c': [['1', ' 6', ' 2']]} 
```

我不知道如何生成 if 语句 val[0]。

```
if val[0]dic
 print val[0] 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:43:00.030

您使用了错误的数据类型进行索引。如果您想要排序键， ActiveState 上[的这篇文章](http://code.activestate.com/recipes/52306-to-sort-a-dictionary/)显示了一种对无序字典键进行排序的方法。

[有序字典](http://docs.python.org/library/collections.html#ordereddict-objects)的顺序是稳定的，但仍然不是可索引的对象。您需要重新审视您正在尝试做的事情，并更清楚地定义您的问题域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:22:58.393

如果您尝试按索引访问元素，我认为您不需要字典类型。字典是基于哈希的查找容器，由键索引。在您的示例中：

```
>>> va['a']
[['1', ' 2', ' 3']] 
```

您可以使用以下方法测试关键存在：

```
if 'a' in va:
    print('a is in va') 
```

[http://docs.python.org/library/stdtypes.html#dict](http://docs.python.org/library/stdtypes.html#dict)

# java - NetBeans 中的 GWT RequestFactory 编译失败

> ID：10846019
> 
> 赞同：0
> 
> 时间：2012-06-01T07:16:34.953
> 
> 标签：java, gwt, maven, netbeans, requestfactory

我在使用 RequestFactory 制作一个简单的 GWT 应用程序时遇到了麻烦。GWT-RPC 应用程序运行良好。我正在使用 NetBeans、Maven、GWT 2.4.0。编译总是失败。

下面是一些编译步骤，最后有错误：

```
Apache Maven 3.0.4 (r1232337; 2012-01-17 10:44:56+0200)
Maven home: C:\Programs\NetBeans 7.1.1\java\maven\bin\..
Java version: 1.6.0_26, vendor: Sun Microsystems Inc.
Java home: C:\Programs (x86)\Java\jdk1.6.0_26\jre
Default locale: ru_RU, platform encoding: Cp1251
OS name: "windows 7", version: "6.1", arch: "x86", family: "windows"

......................................................

[gwt:compile]
org.codehaus.mojo:gwt-maven-plugin:jar:2.2.0:
   com.google.gwt:gwt-user:jar:2.4.0:runtime
      javax.validation:validation-api:jar:1.0.0.GA:runtime
      javax.validation:validation-api:jar:sources:1.0.0.GA:runtime
   com.google.gwt:gwt-dev:jar:2.4.0:runtime
   com.google.gwt:gwt-servlet:jar:2.4.0:runtime
   com.google.web.bindery:requestfactory-server:jar:2.4.0:runtime
      org.json:json:jar:20090211:runtime
   com.google.web.bindery:requestfactory-apt:jar:2.4.0:runtime
   org.hibernate:hibernate-validator:jar:4.1.0.Final:runtime
      org.slf4j:slf4j-api:jar:1.5.6:runtime
   org.apache.maven:maven-project:jar:2.0.9:compile
      org.apache.maven:maven-settings:jar:2.0.9:compile
      org.apache.maven:maven-profile:jar:2.0.9:compile
      org.apache.maven:maven-artifact-manager:jar:2.0.9:compile
         org.apache.maven:maven-repository-metadata:jar:2.0.9:compile
      org.apache.maven:maven-plugin-registry:jar:2.0.9:compile
   org.apache.maven:maven-model:jar:2.0.9:compile
   org.apache.maven:maven-artifact:jar:2.0.9:compile
   org.apache.maven:maven-plugin-api:jar:2.0.9:compile
   org.apache.maven.reporting:maven-reporting-api:jar:3.0:compile
   org.apache.maven.reporting:maven-reporting-impl:jar:2.1:compile
      org.apache.maven.doxia:doxia-core:jar:1.1.2:compile
         commons-httpclient:commons-httpclient:jar:3.1:compile
            commons-codec:commons-codec:jar:1.2:compile
      commons-validator:commons-validator:jar:1.2.0:compile
         commons-beanutils:commons-beanutils:jar:1.7.0:compile
         commons-digester:commons-digester:jar:1.6:compile
         oro:oro:jar:2.0.8:compile
   org.codehaus.plexus:plexus-container-default:jar:1.0-alpha-9-stable-1:compile
   org.apache.maven.doxia:doxia-sink-api:jar:1.0:compile
   org.apache.maven.doxia:doxia-site-renderer:jar:1.1.4:compile
      org.apache.maven.doxia:doxia-logging-api:jar:1.1.4:compile
      org.apache.maven.doxia:doxia-decoration-model:jar:1.1.4:compile
      org.apache.maven.doxia:doxia-module-xhtml:jar:1.1.4:compile
      org.apache.maven.doxia:doxia-module-fml:jar:1.1.4:compile
      org.codehaus.plexus:plexus-i18n:jar:1.0-beta-7:compile
      org.codehaus.plexus:plexus-velocity:jar:1.1.7:compile
      org.apache.velocity:velocity:jar:1.5:compile
      commons-collections:commons-collections:jar:3.2:compile
   org.springframework:spring-core:jar:3.0.5.RELEASE:compile
      org.springframework:spring-asm:jar:3.0.5.RELEASE:compile
      commons-logging:commons-logging:jar:1.1.1:compile
   org.codehaus.plexus:plexus-utils:jar:2.0.5:compile
   com.thoughtworks.qdox:qdox:jar:1.12:compile
   freemarker:freemarker:jar:2.3.6:compile
   org.codehaus.plexus:plexus-archiver:jar:1.0-alpha-9:compile
      org.codehaus.plexus:plexus-io:jar:1.0-alpha-1:compile
   org.apache.maven:maven-archiver:jar:2.4.1:compile
      org.codehaus.plexus:plexus-interpolation:jar:1.13:compile
   junit:junit:jar:4.8.1:compile
   org.apache.maven.surefire:surefire-booter:jar:2.4.3:compile
   org.apache.maven.surefire:surefire-api:jar:2.4.3:compile
   commons-lang:commons-lang:jar:2.5:compile
   org.jdom:jdom:jar:1.1:compile
   jaxen:jaxen:jar:1.1.1:compile
      dom4j:dom4j:jar:1.6.1:compile
      jdom:jdom:jar:1.0:compile
      xml-apis:xml-apis:jar:1.3.02:compile
      xom:xom:jar:1.0:compile
         xerces:xmlParserAPIs:jar:2.6.2:compile
         xalan:xalan:jar:2.6.0:compile
         com.ibm.icu:icu4j:jar:2.6.1:compile
   org.apache.bcel:bcel:jar:5.2:compile
      jakarta-regexp:jakarta-regexp:jar:1.4:compile
   xerces:xercesImpl:jar:2.9.1:compile
   classworlds:classworlds:jar:1.1-alpha-2:compile
   org.codehaus.plexus:plexus-compiler-api:jar:1.5.3:compile
   org.codehaus.plexus:plexus-compiler-javac:jar:1.5.3:compile
Created new class realm plugin>org.codehaus.mojo:gwt-maven-plugin:2.2.0
Importing foreign packages into class realm plugin>org.codehaus.mojo:gwt-maven-plugin:2.2.0
  Imported:  < maven.api
Populating class realm plugin>org.codehaus.mojo:gwt-maven-plugin:2.2.0
  Included: org.codehaus.mojo:gwt-maven-plugin:jar:2.2.0
  Included: com.google.gwt:gwt-user:jar:2.4.0
  Included: javax.validation:validation-api:jar:1.0.0.GA
  Included: javax.validation:validation-api:jar:sources:1.0.0.GA
  Included: com.google.gwt:gwt-dev:jar:2.4.0
  Included: com.google.gwt:gwt-servlet:jar:2.4.0
  Included: com.google.web.bindery:requestfactory-server:jar:2.4.0
  Included: org.json:json:jar:20090211
  Included: com.google.web.bindery:requestfactory-apt:jar:2.4.0
  Included: org.hibernate:hibernate-validator:jar:4.1.0.Final
  Included: org.slf4j:slf4j-api:jar:1.5.6
  Included: org.apache.maven.reporting:maven-reporting-api:jar:3.0
  Included: org.apache.maven.reporting:maven-reporting-impl:jar:2.1
  Included: org.apache.maven.doxia:doxia-core:jar:1.1.2
  Included: commons-httpclient:commons-httpclient:jar:3.1
  Included: commons-codec:commons-codec:jar:1.2
  Included: commons-validator:commons-validator:jar:1.2.0
  Included: commons-beanutils:commons-beanutils:jar:1.7.0
  Included: commons-digester:commons-digester:jar:1.6
  Included: oro:oro:jar:2.0.8
  Included: org.apache.maven.doxia:doxia-sink-api:jar:1.0
  Included: org.apache.maven.doxia:doxia-site-renderer:jar:1.1.4
  Included: org.apache.maven.doxia:doxia-logging-api:jar:1.1.4
  Included: org.apache.maven.doxia:doxia-decoration-model:jar:1.1.4
  Included: org.apache.maven.doxia:doxia-module-xhtml:jar:1.1.4
  Included: org.apache.maven.doxia:doxia-module-fml:jar:1.1.4
  Included: org.codehaus.plexus:plexus-i18n:jar:1.0-beta-7
  Included: org.codehaus.plexus:plexus-velocity:jar:1.1.7
  Included: org.apache.velocity:velocity:jar:1.5
  Included: commons-collections:commons-collections:jar:3.2
  Included: org.springframework:spring-core:jar:3.0.5.RELEASE
  Included: org.springframework:spring-asm:jar:3.0.5.RELEASE
  Included: commons-logging:commons-logging:jar:1.1.1
  Included: org.codehaus.plexus:plexus-utils:jar:2.0.5
  Included: com.thoughtworks.qdox:qdox:jar:1.12
  Included: freemarker:freemarker:jar:2.3.6
  Included: org.codehaus.plexus:plexus-archiver:jar:1.0-alpha-9
  Included: org.codehaus.plexus:plexus-io:jar:1.0-alpha-1
  Included: org.apache.maven:maven-archiver:jar:2.4.1
  Included: org.codehaus.plexus:plexus-interpolation:jar:1.13
  Included: junit:junit:jar:4.8.1
  Included: org.apache.maven.surefire:surefire-booter:jar:2.4.3
  Included: org.apache.maven.surefire:surefire-api:jar:2.4.3
  Included: commons-lang:commons-lang:jar:2.5
  Included: org.jdom:jdom:jar:1.1
  Included: jaxen:jaxen:jar:1.1.1
  Included: dom4j:dom4j:jar:1.6.1
  Included: jdom:jdom:jar:1.0
  Included: xml-apis:xml-apis:jar:1.3.02
  Included: xom:xom:jar:1.0
  Included: xerces:xmlParserAPIs:jar:2.6.2
  Included: xalan:xalan:jar:2.6.0
  Included: com.ibm.icu:icu4j:jar:2.6.1
  Included: org.apache.bcel:bcel:jar:5.2
  Included: jakarta-regexp:jakarta-regexp:jar:1.4
  Included: xerces:xercesImpl:jar:2.9.1
  Included: org.codehaus.plexus:plexus-compiler-api:jar:1.5.3
  Included: org.codehaus.plexus:plexus-compiler-javac:jar:1.5.3
  Excluded: org.apache.maven:maven-project:jar:2.0.9
  Excluded: org.apache.maven:maven-settings:jar:2.0.9
  Excluded: org.apache.maven:maven-profile:jar:2.0.9
  Excluded: org.apache.maven:maven-artifact-manager:jar:2.0.9
  Excluded: org.apache.maven:maven-repository-metadata:jar:2.0.9
  Excluded: org.apache.maven:maven-plugin-registry:jar:2.0.9
  Excluded: org.apache.maven:maven-model:jar:2.0.9
  Excluded: org.apache.maven:maven-artifact:jar:2.0.9
  Excluded: org.apache.maven:maven-plugin-api:jar:2.0.9
  Excluded: org.codehaus.plexus:plexus-container-default:jar:1.0-alpha-9-stable-1
  Excluded: classworlds:classworlds:jar:1.1-alpha-2
Configuring mojo org.codehaus.mojo:gwt-maven-plugin:2.2.0:compile from plugin realm ClassRealm[plugin>org.codehaus.mojo:gwt-maven-plugin:2.2.0, parent: sun.misc.Launcher$AppClassLoader@d9f9c3]
Configuring mojo 'org.codehaus.mojo:gwt-maven-plugin:2.2.0:compile' with basic configurator -->
  (f) compileReport = true
  (f) disableCastChecking = false
  (f) disableClassMetadata = false
  (f) draftCompile = false
  (f) enableAssertions = false
  (f) extra = D:\proj\Java\GWT\gwtapp\target\extra
  (f) extraJvmArgs = -Xmx512m
  (f) extraParam = false
  (f) force = false
  (f) gen = D:\proj\Java\GWT\gwtapp\target\.generated
  (f) generateDirectory = D:\proj\Java\GWT\gwtapp\target\generated-sources\gwt
  (f) gwtSdkFirstInClasspath = false
  (f) inplace = false
  (f) localRepository =        id: local
      url: file:///C:/Users/casper/.m2/repository/
   layout: none

  (f) logLevel = INFO
  (f) optimizationLevel = -1
  (f) pluginArtifacts = {org.codehaus.mojo:gwt-maven-plugin=org.codehaus.mojo:gwt-maven-plugin:maven-plugin:2.2.0:, com.google.gwt:gwt-user=com.google.gwt:gwt-user:jar:2.4.0:runtime, javax.validation:validation-api=javax.validation:validation-api:jar:sources:1.0.0.GA:runtime, com.google.gwt:gwt-dev=com.google.gwt:gwt-dev:jar:2.4.0:runtime, com.google.gwt:gwt-servlet=com.google.gwt:gwt-servlet:jar:2.4.0:runtime, com.google.web.bindery:requestfactory-server=com.google.web.bindery:requestfactory-server:jar:2.4.0:runtime, org.json:json=org.json:json:jar:20090211:runtime, com.google.web.bindery:requestfactory-apt=com.google.web.bindery:requestfactory-apt:jar:2.4.0:runtime, org.hibernate:hibernate-validator=org.hibernate:hibernate-validator:jar:4.1.0.Final:runtime, org.slf4j:slf4j-api=org.slf4j:slf4j-api:jar:1.5.6:runtime, org.apache.maven.reporting:maven-reporting-api=org.apache.maven.reporting:maven-reporting-api:jar:3.0:compile, org.apache.maven.reporting:maven-reporting-impl=org.apache.maven.reporting:maven-reporting-impl:jar:2.1:compile, org.apache.maven.doxia:doxia-core=org.apache.maven.doxia:doxia-core:jar:1.1.2:compile, commons-httpclient:commons-httpclient=commons-httpclient:commons-httpclient:jar:3.1:compile, commons-codec:commons-codec=commons-codec:commons-codec:jar:1.2:compile, commons-validator:commons-validator=commons-validator:commons-validator:jar:1.2.0:compile, commons-beanutils:commons-beanutils=commons-beanutils:commons-beanutils:jar:1.7.0:compile, commons-digester:commons-digester=commons-digester:commons-digester:jar:1.6:compile, oro:oro=oro:oro:jar:2.0.8:compile, org.apache.maven.doxia:doxia-sink-api=org.apache.maven.doxia:doxia-sink-api:jar:1.0:compile, org.apache.maven.doxia:doxia-site-renderer=org.apache.maven.doxia:doxia-site-renderer:jar:1.1.4:compile, org.apache.maven.doxia:doxia-logging-api=org.apache.maven.doxia:doxia-logging-api:jar:1.1.4:compile, org.apache.maven.doxia:doxia-decoration-model=org.apache.maven.doxia:doxia-decoration-model:jar:1.1.4:compile, org.apache.maven.doxia:doxia-module-xhtml=org.apache.maven.doxia:doxia-module-xhtml:jar:1.1.4:compile, org.apache.maven.doxia:doxia-module-fml=org.apache.maven.doxia:doxia-module-fml:jar:1.1.4:compile, org.codehaus.plexus:plexus-i18n=org.codehaus.plexus:plexus-i18n:jar:1.0-beta-7:compile, org.codehaus.plexus:plexus-velocity=org.codehaus.plexus:plexus-velocity:jar:1.1.7:compile, org.apache.velocity:velocity=org.apache.velocity:velocity:jar:1.5:compile, commons-collections:commons-collections=commons-collections:commons-collections:jar:3.2:compile, org.springframework:spring-core=org.springframework:spring-core:jar:3.0.5.RELEASE:compile, org.springframework:spring-asm=org.springframework:spring-asm:jar:3.0.5.RELEASE:compile, commons-logging:commons-logging=commons-logging:commons-logging:jar:1.1.1:compile, org.codehaus.plexus:plexus-utils=org.codehaus.plexus:plexus-utils:jar:2.0.5:compile, com.thoughtworks.qdox:qdox=com.thoughtworks.qdox:qdox:jar:1.12:compile, freemarker:freemarker=freemarker:freemarker:jar:2.3.6:compile, org.codehaus.plexus:plexus-archiver=org.codehaus.plexus:plexus-archiver:jar:1.0-alpha-9:compile, org.codehaus.plexus:plexus-io=org.codehaus.plexus:plexus-io:jar:1.0-alpha-1:compile, org.apache.maven:maven-archiver=org.apache.maven:maven-archiver:jar:2.4.1:compile, org.codehaus.plexus:plexus-interpolation=org.codehaus.plexus:plexus-interpolation:jar:1.13:compile, junit:junit=junit:junit:jar:4.8.1:compile, org.apache.maven.surefire:surefire-booter=org.apache.maven.surefire:surefire-booter:jar:2.4.3:compile, org.apache.maven.surefire:surefire-api=org.apache.maven.surefire:surefire-api:jar:2.4.3:compile, commons-lang:commons-lang=commons-lang:commons-lang:jar:2.5:compile, org.jdom:jdom=org.jdom:jdom:jar:1.1:compile, jaxen:jaxen=jaxen:jaxen:jar:1.1.1:compile, dom4j:dom4j=dom4j:dom4j:jar:1.6.1:compile, jdom:jdom=jdom:jdom:jar:1.0:compile, xml-apis:xml-apis=xml-apis:xml-apis:jar:1.3.02:compile, xom:xom=xom:xom:jar:1.0:compile, xerces:xmlParserAPIs=xerces:xmlParserAPIs:jar:2.6.2:compile, xalan:xalan=xalan:xalan:jar:2.6.0:compile, com.ibm.icu:icu4j=com.ibm.icu:icu4j:jar:2.6.1:compile, org.apache.bcel:bcel=org.apache.bcel:bcel:jar:5.2:compile, jakarta-regexp:jakarta-regexp=jakarta-regexp:jakarta-regexp:jar:1.4:compile, xerces:xercesImpl=xerces:xercesImpl:jar:2.9.1:compile, org.codehaus.plexus:plexus-compiler-api=org.codehaus.plexus:plexus-compiler-api:jar:1.5.3:compile, org.codehaus.plexus:plexus-compiler-javac=org.codehaus.plexus:plexus-compiler-javac:jar:1.5.3:compile}
  (f) project = MavenProject: ru.itskills.gwtapp:App:1.0-SNAPSHOT @ D:\proj\Java\GWT\gwtapp\pom.xml
  (f) remoteRepositories = [       id: central
      url: http://repo.maven.apache.org/maven2
   layout: default
snapshots: [enabled => false, update => daily]
 releases: [enabled => true, update => daily]
]
  (f) skip = false
  (f) soyc = false
  (f) soycDetailed = false
  (f) strict = false
  (f) style = OBF
  (f) treeLogger = false
  (f) validateOnly = false
  (f) version = 2.2.0
  (f) warSourceDirectory = D:\proj\Java\GWT\gwtapp\src\main\webapp
  (f) webappDirectory = D:\proj\Java\GWT\gwtapp\target\App-1.0-SNAPSHOT
-- end configuration --

......................................................

Failed to execute goal org.codehaus.mojo:gwt-maven-plugin:2.2.0:compile (default) on project App: GWT Module com.google.web.bindery.requestfactory.shared.RequestFactory not found in project sources or resources. -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.codehaus.mojo:gwt-maven-plugin:2.2.0:compile (default) on project App: GWT Module com.google.web.bindery.requestfactory.shared.RequestFactory not found in project sources or resources.
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.MojoExecutionException: GWT Module com.google.web.bindery.requestfactory.shared.RequestFactory not found in project sources or resources.
        at org.codehaus.mojo.gwt.shell.CompileMojo.compilationRequired(CompileMojo.java:498)
        at org.codehaus.mojo.gwt.shell.CompileMojo.compile(CompileMojo.java:325)
        at org.codehaus.mojo.gwt.shell.CompileMojo.doExecute(CompileMojo.java:255)
        at org.codehaus.mojo.gwt.shell.AbstractGwtShellMojo.execute(AbstractGwtShellMojo.java:119)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
        ... 19 more
Caused by: org.codehaus.mojo.gwt.utils.GwtModuleReaderException: GWT Module com.google.web.bindery.requestfactory.shared.RequestFactory not found in project sources or resources.
        at org.codehaus.mojo.gwt.AbstractGwtModuleMojo.readModule(AbstractGwtModuleMojo.java:205)
        at org.codehaus.mojo.gwt.GwtModule.getLocalInherits(GwtModule.java:186)
        at org.codehaus.mojo.gwt.GwtModule.getInherits(GwtModule.java:146)
        at org.codehaus.mojo.gwt.GwtModule.getEntryPoints(GwtModule.java:111)
        at org.codehaus.mojo.gwt.shell.CompileMojo.compilationRequired(CompileMojo.java:440)
        ... 24 more 
```

和 pom.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

  <!-- POM file generated with GWT webAppCreator -->
  <modelVersion>4.0.0</modelVersion>
  <groupId>ru.itskills.gwtapp</groupId>
  <artifactId>App</artifactId>
  <packaging>war</packaging>
  <version>1.0-SNAPSHOT</version>
  <name>ru.itskills.gwtapp.App</name>

  <properties>
    <!-- Convenience property to set the GWT version -->
    <gwtVersion>2.4.0</gwtVersion>
    <!-- GWT needs at least java 1.6 -->
    <maven.compiler.source>1.6</maven.compiler.source>
    <maven.compiler.target>1.6</maven.compiler.target>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <dependencies>
    <dependency>
      <groupId>com.google.gwt</groupId>
      <artifactId>gwt-servlet</artifactId>
      <version>${gwtVersion}</version>
      <scope>runtime</scope>
    </dependency>
    <dependency>
      <groupId>com.google.gwt</groupId>
      <artifactId>gwt-user</artifactId>
      <version>${gwtVersion}</version>
      <scope>provided</scope>
    </dependency>
    <dependency>
      <groupId>com.google.gwt</groupId>
      <artifactId>gwt-dev</artifactId>
      <version>${gwtVersion}</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.8.1</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>javax.validation</groupId>
      <artifactId>validation-api</artifactId>
      <version>1.0.0.GA</version>
      <scope>provided</scope>
    </dependency>
    <dependency>
      <groupId>javax.validation</groupId>
      <artifactId>validation-api</artifactId>
      <version>1.0.0.GA</version>
      <classifier>sources</classifier>
      <scope>provided</scope>
    </dependency>

    <!-- RequestFactory -->
    <dependency>
      <groupId>com.google.web.bindery</groupId>
      <artifactId>requestfactory-server</artifactId>
      <version>${gwtVersion}</version>
    </dependency>

    <!-- see sample projects for correct placement -->
    <dependency>
      <groupId>com.google.web.bindery</groupId>
      <artifactId>requestfactory-apt</artifactId>
      <version>${gwtVersion}</version>
    </dependency>

    <dependency>
      <groupId>org.hibernate</groupId>
      <artifactId>hibernate-validator</artifactId>
      <version>4.1.0.Final</version>
    </dependency>
  </dependencies>

  <build>
    <!-- Generate compiled stuff in the folder used for developing mode -->
    <outputDirectory>target/www/WEB-INF/classes</outputDirectory>

    <plugins>

      <!-- GWT Maven Plugin-->
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>gwt-maven-plugin</artifactId>
        <version>2.2.0</version>
        <dependencies>
          <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-user</artifactId>
            <version>${gwtVersion}</version>
          </dependency>
          <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-dev</artifactId>
            <version>${gwtVersion}</version>
          </dependency>
          <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-servlet</artifactId>
            <version>${gwtVersion}</version>
          </dependency>

            <!-- RequestFactory -->
            <dependency>
                <groupId>com.google.web.bindery</groupId>
                <artifactId>requestfactory-server</artifactId>
                <version>${gwtVersion}</version>
            </dependency>

            <!-- see sample projects for correct placement -->
            <dependency>
                <groupId>com.google.web.bindery</groupId>
                <artifactId>requestfactory-apt</artifactId>
                <version>${gwtVersion}</version>
            </dependency>
        </dependencies>
        <!-- JS is only needed in the package phase, this speeds up testing -->
        <executions>
          <execution>
            <phase>prepare-package</phase>
            <goals>
              <goal>compile</goal>
            </goals>
          </execution>
        </executions>
        <!-- Plugin configuration. There are many available options,
            see gwt-maven-plugin documentation at codehaus.org -->
        <configuration>
          <!-- URL that should be automatically opened in the GWT shell (gwt:run). -->
          <runTarget>App.html</runTarget>
          <!-- Location of the develop-mode web application structure (gwt:run). -->
          <hostedWebapp>target/www</hostedWebapp>
          <!-- Ask GWT to create the Story of Your Compile (SOYC) (gwt:compile) -->
          <compileReport>true</compileReport>
        </configuration>
      </plugin>

      <!-- Add source folders to test classpath in order to run gwt-tests as normal junit-tests -->
      <plugin>
        <artifactId>maven-surefire-plugin</artifactId>
        <version>2.5</version>
        <configuration>
          <additionalClasspathElements>
            <additionalClasspathElement>${project.build.sourceDirectory}</additionalClasspathElement>
            <additionalClasspathElement>${project.build.testSourceDirectory}</additionalClasspathElement>
          </additionalClasspathElements>
          <useManifestOnlyJar>false</useManifestOnlyJar>
          <forkMode>always</forkMode>

          <!-- Folder for generated testing stuff -->
          <systemProperties>
            <property>
              <name>gwt.args</name>
              <value>-out target/www</value>
            </property>
          </systemProperties>
        </configuration>
      </plugin>

      <!-- Copy static web files before executing gwt:run -->
      <plugin>
        <artifactId>maven-resources-plugin</artifactId>
        <version>2.4.2</version>
        <executions>
          <execution>
            <phase>compile</phase>
            <goals>
              <goal>copy-resources</goal>
            </goals>
            <configuration>
              <outputDirectory>target/www</outputDirectory>
              <resources>
                <resource>
                  <directory>src/main/webapp</directory>
                </resource>
              </resources>
            </configuration>
          </execution>
        </executions>
        <configuration>
          <encoding>${project.build.sourceEncoding}</encoding>
        </configuration>
      </plugin>

      <!-- Delete gwt generated stuff -->
      <plugin>
        <artifactId>maven-clean-plugin</artifactId>
        <version>2.3</version>
        <configuration>
          <filesets>
            <fileset><directory>src/main/webapp/app</directory></fileset>
            <fileset><directory>src/main/webapp/WEB-INF/classes</directory></fileset>
            <fileset><directory>tomcat</directory></fileset>
            <fileset><directory>www-test</directory></fileset>
            <fileset><directory>.gwt-tmp</directory></fileset>
          </filesets>
        </configuration>
      </plugin>

      <plugin>
        <artifactId>maven-eclipse-plugin</artifactId>
        <version>2.7</version>  <!--  Note 2.8 does not work with AspectJ aspect path -->
        <configuration>
          <downloadSources>true</downloadSources>
          <downloadJavadocs>false</downloadJavadocs>
          <wtpversion>2.0</wtpversion>
          <additionalBuildcommands>
            <buildCommand>
              <name>com.google.gwt.eclipse.core.gwtProjectValidator</name>
            </buildCommand>
          </additionalBuildcommands>
          <additionalProjectnatures>
            <projectnature>com.google.gwt.eclipse.core.gwtNature</projectnature>
          </additionalProjectnatures>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.3.2</version>
        <configuration>
          <encoding>${project.build.sourceEncoding}</encoding>
          <source>1.6</source>
          <target>1.6</target>
        </configuration>
      </plugin>
    </plugins>
  </build>
</project> 
```

看起来没有像这样的插件或库或smth。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:07:39.310

您很可能在 gwt.xml 文件中缺少 requestfactory 的继承。

类似于以下内容：

```
<inherits name='com.google.web.bindery.requestfactory.RequestFactory' /> 
```

# c - 为什么C的printf格式字符串既有%c又有%s？

> ID：10846024
> 
> 赞同：71
> 
> 时间：2012-06-01T07:16:54.990
> 
> 标签：c, string-formatting

为什么 C 的 printf 格式字符串同时具有`%c`and `%s`？

我知道它`%c`代表单个字符并`%s`代表一个以空字符结尾的字符串，但是单独的字符串表示还不够吗？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-06-01T07:22:18.027

可能是为了区分以空字符结尾的字符串和字符。如果他们只是有`%s`，那么每个字符也必须以空字符结尾。

```
char c = 'a'; 
```

在上述情况下，`c`必须为空终止。这是我的假设:)

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2012-06-01T07:19:27.693

`%s`打印出字符，直到它到达 a `0`（或`'\0'`，相同的东西）。

如果你只有一个, 用-`char x;`打印它，**你必须提供地址，因为****期望 a** - 会产生意想不到的结果，可能不会。`printf("%s", &x);`**`%s``char*`**`&x + 1``0`

所以你不能只打印一个字符，除非它是空终止的（非常低效）。

编辑：正如其他人指出的那样，两者在 var args 参数中期望不同的东西 - 一个是指针，另一个是单个字符。但这种差异有些明显。

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2012-06-01T07:34:47.017

其他人提到的单个字符必须为空终止的问题并不是真正的问题。这可以通过为格式提供精度来解决问题`%.1s`。

在我看来，更重要的是，对于`%s`任何一种形式，您都必须提供指向一个或多个字符的指针。这意味着您将无法打印右值（计算表达式、函数返回等）或注册变量。

**编辑：**我对这个答案的反应真的很生气，所以我可能会删除这个，这真的不值得。似乎人们甚至没有阅读问题或不知道如何理解问题的技术性就对此做出了反应。

**明确一点：我并不是说你应该更`%.1s`喜欢`%c`. 我只是说，为什么`%c`不能被替代的原因与其他答案假装告诉的不同。这些其他答案在技术上是错误的。空终止不是`%s`.**

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2012-06-01T07:45:23.450

printf 函数是一个可变参数函数，这意味着它具有可变数量的参数。在调用函数 (printf) 之前，参数被压入堆栈。为了让 printf 函数使用堆栈，它需要知道堆栈中的信息，格式字符串用于此目的。

例如

```
printf( "%c", ch );    tells the function the argument 'ch' 
                       is to be interpreted as a character and sizeof(char) 
```

然而

```
printf( "%s", s );   tells the function the argument 's' is a pointer 
                     to a null terminated string sizeof(char*) 
```

在 printf 函数内部不可能以其他方式确定堆栈内容，例如区分“ch”和“s”，因为在 C 中在运行时没有类型检查。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2012-06-01T07:20:03.610

`%s`表示打印所有字符，直到找到空值（将变量视为指针）。

`%c`说只打印一个字符（将变量视为字符代码）

使用`%s`for 字符不起作用，因为该字符将被视为指针，然后它将尝试打印内存中该位置之后的所有字符，直到找到 null

**从其他答案中窃取**以不同的方式解释它。

如果你想使用 打印一个字符`%s`，你可以使用下面的方法正确地传递一个字符的地址，并防止它在屏幕上写垃圾，直到找到一个空值。

```
char c = 'c';
printf('%.1s', &c); 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-06-01T07:22:14.373

对于`%s`，我们需要提供字符串的地址，而不是它的值。

对于`%c`，我们提供字符的值。

如果我们使用 the`%s`而不是`%c`，我们将如何在字符之后提供 a `'\0'`？

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-06-01T18:02:49.737

我想为这个有趣的问题添加另一个观点。

实际上，这归结为数据类型。我在这里看到了答案，表明您可以提供指向 char 的指针，并提供

```
"%.1s" 
```

这确实可能是真的。但答案在于 C 设计者试图为程序员提供灵活性，并且确实是一种（尽管很小）减少应用程序占用空间的方法。

有时程序员可能喜欢运行一系列 if-else 语句或 switch-case，其中需要简单地根据状态输出一个字符。为此，对字符进行硬编码确实可以减少内存中的实际空间，因为单个字符是 8 位，而指针是 32 位或 64 位（对于 64 位计算机）。指针将占用更多内存空间。

如果您想通过使用实际字符而不是指向字符的指针来减小大小，那么可以考虑在 printf 类型的运算符中执行此操作的两种方法。一个是关闭 .1s，但例程应该如何确定您真正提供的是 char 类型而不是指向 char 的指针或指向字符串（字符数组）的指针？这就是他们选择“%c”的原因，因为它是不同的。

有趣的问题:-)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-06-01T14:00:07.073

C 具有`%c`and`%s`格式说明符，因为它们处理不同的类型。

A`char`和字符串与 night 和 1 差不多。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-06-05T19:08:19.707

%c 需要一个 char，它是一个整**数值**，并根据编码规则打印它。

%s 需要一个**指向**包含**char**值的内存位置的指针，并根据编码规则打印该位置中的字符，直到找到 0（空）字符。

所以你看，在引擎盖下，这两种情况虽然看起来很相似，但它们并没有太多共同之处，因为一种适用于值，另一种适用于指针。一种是将特定整数值解释为 ascii char 的指令，另一种是逐个 char 迭代内存位置 char 的内容并解释它们直到遇到零值。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-06-06T16:47:03.873

我用`printf("%.1s", &c)`和做了一个实验`printf("%c", c)`。我使用下面的代码进行测试，并使用 bash 的`time`实用程序获取运行时间。

```
 #include<stdio.h>
    int main(){
        char c = 'a';
        int i;
        for(i = 0; i < 40000000; i++){
            //printf("%.1s", &c); get a result of 4.3s
            //printf("%c", c); get a result of 0.67s
        }
        return 0;
    } 
```

结果表明 using比 .`%c`快 10 倍`%.1s`。因此，尽管 %s 可以完成 %c 的工作，但性能仍然需要 %c。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-06-05T18:42:51.790

由于没有人提供任何参考的答案，这里有一个来自[pubs.opengroup.com](http://pubs.opengroup.org/onlinepubs/009695399/functions/printf.html)的 printf 规范，它类似于[IBM的格式定义](http://publib.boulder.ibm.com/infocenter/tpfhelp/current/index.jsp?topic=/com.ibm.ztpf-ztpfdf.doc_put.cur/gtpc2/cpp_fprintf-printf-sprintf.html)

> ％C
> 
> int 参数应转换为无符号字符，并写入结果字节。
> 
> %s
> 
> 参数应为指向 char 数组的指针。数组中的字节应写入（但不包括）任何终止的空字节。如果指定了精度，则写入的字节数不得超过该数量。如果精度未指定或大于数组的大小，应用程序应确保数组包含空字节。

# c# - 石英调度器。我怎么知道触发器不会再触发了？

> ID：10846025
> 
> 赞同：0
> 
> 时间：2012-06-01T07:17:02.277
> 
> 标签：c#, quartz-scheduler

我有一个简单的控制台应用程序，它定期在后台执行一项工作并等待用户按键。

我使用[Quartz](http://quartz-scheduler.org)库作为调度程序，并有这样的代码：

```
schedulerFactory = new StdSchedulerFactory();
scheduler = schedulerFactory.GetScheduler();
scheduler.Start();       

myTrigger = TriggerUtils.MakeDailyTrigger(..., ...);
myJob = new JobDetail(..., null, typeof(MyJobClass));
scheduler.ScheduleJob(myJob, myTrigger);

Console.WriteLine("Press 'Q' to exit");
while (Console.ReadKey() != new ConsoleKeyInfo('q', ConsoleKey.Q, false, false, false))
{
} 
```

这工作正常，但在几个条件下，我将触发器配置为执行一次。

我怎么知道我的触发作业执行了一次，并且使用纯 Quartz API 不会触发任何作业？我可以为此使用信号量和低级多线程的东西，但我想应该有纯 Quartz 方法。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T10:17:49.747

您可以配置 TriggerListner

或者

在 Trigger 上使用 API 方法 getPreviousFireTime() / getNextFireTime() / mayFireAgain()

# c# - 对象和参考

> ID：10846028
> 
> 赞同：0
> 
> 时间：2012-06-01T07:17:09.867
> 
> 标签：c#

我现在有点迷失在对象和引用之间。我正在构建一个带有一些不同类和 winForms 的小项目。

这是我的项目的简短描述：我有一个 MainForm，当我单击“添加新电影”按钮时，MovieForm 打开，我在其中输入有关电影的信息。当我单击“保存”按钮时，我在 MovieForm 中创建了一个信息的 NewMovie 对象。

下一步是将此 NewMovie 对象保存到文件中。就在这里，我有点迷失如何从另一个类的其他地方获取这个 NewMovie 对象的数据，比如 MovieManager，然后我使用 FileManager 的对象来保存数据？

在 MainForm 中，我有这段代码来检测何时在 MovieForm 中单击“添加新电影”按钮：

```
MovieForm movieForm = new MovieForm();
if (movieForm.ShowDialog() == DialogResult.OK)
{
Do something here?
} 
```

我可以在这里到达或传递新的 MovieForm 对象吗？那我该怎么办？在我的项目中，我还有一个 MovieManager。一种方法是将对象传递给该类？在创建 NewMovie 对象后，是否应该在 MovieForm 中创建 MovieManager 对象并以这种方式传递数据？

Preciate一些帮助和想法！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T07:22:18.727

ShowDialog 完成后，对的引用`movieForm`仍然有效。因此，您可以在 MovieForm 中创建一个公共属性：

```
class MovieForm {
    ...
    public NewMovie Result { get; private set; }
    ...
} 
```

您在 MoveForm 中设置此值（当表单关闭或按下某些保存按钮时），然后您可以在主表单中读取它并将其传递给 MovieManager：

```
MovieForm movieForm = new MovieForm();      
if (movieForm.ShowDialog() == DialogResult.OK)      
{      
    NewMovie newMovie = movieForm.Result;
    myMovieManager.CreateNewMovie(newMovie);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:19:15.617

在您的 MovieForm 类中创建一个属性，并在创建实例时传递其值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T07:48:16.753

您应该从 MovieForm 返回新创建的 Movie 实例并将其存储在管理器中。

```
public class MovieManager
{
  List<Movie> movies;

  public void AddMovie(Movie movie)
  {
    movies.Add(movie);
  }

  public Save()
  {
  }
}

public class Movie
{
  public string Name;
}

public class MainForm
{
  MovieManager manager;

  private void NewMovieClick(...)
  {
     using(var form = new MovieForm())
     {
       if(form.ShowDialog(this) == DialogResult.OK)
       {
         manager.Add(from.Movie);
       }
     }
  }
}

public class MovieForm
{
  public Movie Movie;
} 
```

# android - 安卓设备和网络服务之间的数据传输

> ID：10846034
> 
> 赞同：-2
> 
> 时间：2012-06-01T07:17:38.553
> 
> 标签：android, web

我想在 android 设备和 web 服务之间传输数据。我将数据存储在本地数据库中。现在我希望它与网络服务同步。有人可以吗？帮帮我...我应该如何开始..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:21:31.757

用于`HttpClient`通过 GET 或 POST 请求进行通信并将数据发送到 Web 服务，并为 HttpClient 示例进行谷歌搜索。

# c# - 我想在不创建另一个 pdf 文件的情况下为 pdf 文件添加水印

> ID：10846036
> 
> 赞同：1
> 
> 时间：2012-06-01T07:18:13.703
> 
> 标签：c#, asp.net, c#-2.0, itextsharp

我想将图像转换为 PDF 并为其添加水印。我使用 iTextSharp 进行转换。我成功地将图像文件转换为 pdf，但我无法在不创建另一个 pdf 文件的情况下为其添加水印。

下面的代码创建了一个 PDF 文件并添加了自定义属性，函数`watermarkpdf`用于添加水印和 pdfname 作为参数给出

```
foreach (string filenm in Images)
    using (var imageStream = new FileStream(filenm, FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
    {
        doc.NewPage();

        iTextSharp.text.Image jpeg = iTextSharp.text.Image.GetInstance(filenm);
        float width = doc.PageSize.Width;
        float height = doc.PageSize.Height;
        jpeg.ScaleToFit(width,height);
        doc.Add(jpeg);
    }
    doc.AddHeader("name", "vijay");
    watermarkpdf(pdfname); 
```

`watermarkpdf`函数如下。

```
PdfReader pdfReader = new PdfReader(txtpath.Text+"\\pdf\\" + pdfname);
FileStream stream = new FileStream(txtpath.Text + pdfname,FileMode.Open);
PdfStamper pdfStamper = new PdfStamper(pdfReader, stream);
for (int pageIndex = 1; pageIndex <= pdfReader.NumberOfPages; pageIndex++)
{
    Rectangle pageRectangle = pdfReader.GetPageSizeWithRotation(pageIndex);
    PdfContentByte pdfData = pdfStamper.GetUnderContent(pageIndex);
    pdfData.SetFontAndSize(BaseFont.CreateFont(BaseFont.HELVETICA_BOLD, BaseFont.CP1252, BaseFont.NOT_EMBEDDED), 40);
    PdfGState graphicsState = new PdfGState();
    graphicsState.FillOpacity = 0.4F;
    pdfData.SetGState(graphicsState);
    pdfData.SetColorFill(BaseColor.BLUE);
    pdfData.BeginText();
    pdfData.ShowTextAligned(Element.ALIGN_CENTER, "SRO-Kottarakkara", pageRectangle.Width / 2, pageRectangle.Height / 2, 45);
    pdfData.EndText();
}
pdfStamper.Close();
stream.Close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T13:19:31.690

iTextSharp 不支持文件的“就地编辑”，仅读取现有文件并创建新文件。问题是它必须写入正在写入的东西，这可能是非常有问题的。

但是，您可以在 a 中创建图像，而不是使用文件，从中`MemoryStream`获取字节并将其通过管道传输到`PdfReader`，所有这些都对您的代码进行最小的更改。所有获取文件的 PDF 编写函数实际上都与抽象`Stream`类一起使用，并且`MemoryStream`继承自抽象类，因此它们可以互换使用。下面是一些基本代码，应该向您展示我在说什么。我目前没有 IDE，所以可能有一两个错字，但在大多数情况下它应该可以工作。

```
//Image part
//We will dump the bytes from the memory stream to the variable below later
byte[] bytes;
using (MemoryStream ms = new MemoryStream()){
  Document doc = new Document(PageSize.LETTER);
  PdfWriter writer = PdfWriter.GetInstance(doc, ms);
  doc.Open();
  //foreach (string filenm in Images)
  //...
  doc.Close();
  //Dump the bytes, make sure to use ToArray() and not GetBuffer()
  bytes = ms.ToArray();
}

//Watermark part
//Read from our bytes
PdfReader pdfReader = new PdfReader(bytes);
FileStream stream = new FileStream(txtpath.Text + pdfname,FileMode.Open);
//... 
```

# c++ - boost::lock_guard 永远等待

> ID：10846039
> 
> 赞同：1
> 
> 时间：2012-06-01T07:18:48.630
> 
> 标签：c++, boost, locking, deadlock, boost-mutex

我正在多线程环境中使用升压互斥锁和锁在 C++ 中开发 LRU 缓存。该架构基于 boost::unordered_map + [lock-free-queue](http://haxpath.squarespace.com/imported-20100930232226/2010/8/25/a-lock-free-queue-in-c.html) 插入以非阻塞模式 (try_lock) 工作，但删除应锁定映射并继续。问题是，在清除过程中，缓存访问死锁很少见。

。H

```
typedef boost::function<std::string ( const std::string &key )> LoaderFunction;

class ListNode;

struct CacheEntry {
    CacheEntry(std::string key="", std::string value="");
    ListNode * createLruListNode() const;
    ListNode * getLruListNode() const;
    virtual ~CacheEntry();
    const std::string key;
    const std::string value;
private:
    ListNode ** listNodePP;
};

struct ListNode {
    ListNode(const CacheEntry* entry = NULL);
    ~ListNode();
    void setCacheEntry(const CacheEntry* entry);
    const CacheEntry * getCacheEntry();
    void setDirty();

private:
    const CacheEntry * cacheEntry;
    bool dirty;
};

typedef LockFreeQueue<ListNode*> List;

typedef boost::unordered_map
        < const string               , const CacheEntry * >
Cache;

typedef Cache::iterator CacheIter; 
```

.cpp

```
#include "LockFreeQueue.h"
#include <unistd.h>

using namespace std;

/* ... */

ListNode::ListNode(const CacheEntry* e2) : cacheEntry(e2) {
    dirty=false;
}

void ListNode::setCacheEntry(const CacheEntry* entry) {
    cacheEntry=entry;
}

const CacheEntry* ListNode::getCacheEntry() {
    if(dirty) {
        return NULL;
    }
    return cacheEntry;
}

void ListNode::setDirty() {
    dirty=true;
}

std::string PeachCachePartition::get(const string key) {
    CacheIter iter=cache->find(key);
    string value;
    if(iter!=cache->end()) { 
        __sync_fetch_and_add(_hits,1);
        const CacheEntry* entry=iter->second;
        value=(entry->value);

        lruList->enqueue(entry->getLruListNode());
        if(size() > max) { // removes some
            int howMany = (int) ceil((*_misses)/(*_hits))+1;
            int k=0;
            ListNode removedListNode=ListNode();
            ListNode * p=&removedListNode;
            ListNode ** pp=&p;
            while(size() > max && k<howMany) {

                if(lruList->dequeue(pp)) {
                    const CacheEntry * toBeRemoved=p->getCacheEntry();
                    if(toBeRemoved) {
                        remove(toBeRemoved->key);
                        k++;
                    }
                }

            }
        }
    } else { 
        __sync_fetch_and_add(_misses,1);
        value=loader(key);
        if(value.size()>0) {
            put(key,value);
        }
    }
    return value;
}

void PeachCachePartition::remove(const std::string &key) {
    try {
        boost::lock_guard<boost::mutex> mapLockGuard(mapMutex);
        CacheIter iter = cache->find(key);
        if(iter!=cache->end()) {
            const CacheEntry * toBeRemoved=iter->second;
            if(toBeRemoved->getLruListNode()) {
                toBeRemoved->getLruListNode()->setDirty();
            }

            delete(toBeRemoved);
            cache->erase(iter);
            __sync_sub_and_fetch(_size,1);
        }
    } catch (std::exception &e) {
        Logger::err(e.what());
    }
}

void PeachCachePartition::put(const std::string &key, std::string &value) {
    try {
        boost::unique_lock<boost::mutex> mapLockGuard(mapMutex,boost::try_to_lock);
        if(mapLockGuard.owns_lock()) {
            CacheIter iter=cache->find(key);
            const CacheEntry * entry;
            if(iter!=cache->end()) {
                entry=iter->second;
                entry->getLruListNode()->setDirty();
            } else {
                entry = new CacheEntry(key,value);
                __sync_add_and_fetch(_size,1);
                (*cache)[key] = entry;
            }

            entry->createLruListNode()->setCacheEntry(entry);

            lruList->enqueue(entry->getLruListNode());
        }
    } catch (std::exception &e) {
        Logger::err(e.what());
    }
} 
```

你能解释一下有什么问题吗？我几乎可以肯定它在删除过程中会死锁，因为它是它*必须*获取的唯一锁。

谢谢大家

编辑：我在运行 mpm_prefork_module 的 apache 模块中使用此缓存：这可能是问题吗？我应该使用 boost::interprocess 而不是 boost::thread 吗？

# iphone - 如何获取用户的谷歌帐户的电子邮件ID？

> ID：10846040
> 
> 赞同：0
> 
> 时间：2012-06-01T07:18:58.643
> 
> 标签：iphone, objective-c, xcode, json

我正在开发一个 iPhone 应用程序，在该应用程序中，我为用户提供了使用他/她的谷歌帐户登录的选项。现在，我希望通过 JSON 或 XML 获得该用户的 google 电子邮件 ID。我搜索了很多，但没有满意的结果。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:38:05.480

您是否在他们的开发人员网站上使用 google api 检查了 oauth 授权？ [https://developers.google.com/accounts/docs/OAuth2](https://developers.google.com/accounts/docs/OAuth2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:28:30.620

我想你可以从这个链接中找到一些东西.....希望这个链接对你有帮助..... [http://code.google.com/p/gdata-objectivec-client/wiki/GDataObjCIntroduction](http://code.google.com/p/gdata-objectivec-client/wiki/GDataObjCIntroduction) 和[https:/ /code.google.com/p/gdata-objectivec-client/](https://code.google.com/p/gdata-objectivec-client/) :)

想联系的时候写下面的代码....

```
GDataServiceGoogleContact *service = [self contactService];
        GDataServiceTicket *ticket;

        BOOL shouldShowDeleted = TRUE;
        const int kBuncha = 2000;

        NSURL *feedURL = [GDataServiceGoogleContact contactFeedURLForUserID:kGDataServiceDefaultUser];

        GDataQueryContact *query = [GDataQueryContact contactQueryWithFeedURL:feedURL];
        [query setShouldShowDeleted:shouldShowDeleted];
        [query setMaxResults:kBuncha];

        ticket = [service fetchFeedWithQuery:query
                                    delegate:self
                           didFinishSelector:@selector(contactsFetchTicket:finishedWithFeed:error:)];

        [self setContactFetchTicket:ticket]; 
```

下面的方法是 GmailAPI 委托方法...

```
- (GDataServiceGoogleContact *)contactService 
{
    static GDataServiceGoogleContact* service = nil;

    if (!service) {
        service = [[GDataServiceGoogleContact alloc] init];

        [service setShouldCacheResponseData:YES];
        [service setServiceShouldFollowNextLinks:YES];
    }

    [service setUserCredentialsWithUsername:txtEmail.text
                                   password:txtPass.text];

    return service;
} 
```

之后你可以联系下面的代码......

```
for (int i = 0; i < [contacts count]; i++) {
        GDataEntryContact *contact = [contacts objectAtIndex:i];
        //        NSLog(@">>>>>>>>>>>>>>>> elementname contact :%@", [[[contact name] fullName] contentStringValue]);
        NSString *ContactName = [[[contact name] fullName] contentStringValue];
        GDataEmail *email = [[contact emailAddresses] objectAtIndex:0];
        //        NSLog(@">>>>>>>>>>>>>>>> Contact's email id :%@ contact name :%@", [email address], ContactName);
        NSString *ContactEmail = [email address];
} 
```

希望这对你有帮助.... :)

# actionscript-3 - 请帮助我。无法访问空对象引用的属性或方法

> ID：10846058
> 
> 赞同：0
> 
> 时间：2012-06-01T07:19:36.503
> 
> 标签：actionscript-3, apache-flex, flex4.5

为什么不能访问空对象引用的属性或方法。

> TypeError：错误 #1009：无法访问空对象引用的属性或方法。在 barm/btn1_clickHandler()[C:\Users\Android\Adobe Flash Builder 4.6\barm\src\barm.mxml:32] 在 barm/__btn1_click()[C:\Users\Android\Adobe Flash Builder 4.6\barm\ src\barm.mxml:65]

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009"
xmlns:s="library://ns.adobe.com/flex/spark"
xmlns:mx="library://ns.adobe.com/flex/mx"
xmlns:service="services.service.*"
                   >
<fx:Script>
    <![CDATA[
        import com.adobe.serializers.utility.TypeUtility;
        import flash.sampler.DeleteObjectSample;    
        import flashx.textLayout.operations.DeleteTextOperation;
        import mx.collections.ArrayCollection;
        import mx.controls.Alert;
        import mx.events.FlexEvent;
        import spark.events.IndexChangeEvent;
        [Bindable]
        private var positionChoose:ArrayCollection = new ArrayCollection();
        protected function btn1_clickHandler(event:MouseEvent):void
        {
            // TODO Auto-generated method stub
            GetStrDataResult.token = service.GetStrData(
    "SELECT PositionCode,LocalDesc FROM StaffPosition 
    WHERE LocalDesc IN ('พนักงานขาย','Administrator','Trainner')","StaffPosition");
        var POS:Object ;            
        POS= GetStrDataResult.lastResult; 
    var savePosition:Array = new Array(POS.toString().split('|').length);
    var savePositionID:Array = new Array(POS.toString().split('|').length);
    var savePositionName:Array = new Array(POS.toString().split('|').length);
    var index:int;
    savePosition = POS.toString().split('|');
    for( index = 0; index < savePositionID.length; index++ )
            {
                savePositionID[index] = savePosition[index].split('^')[0];
            }

    for( index = 0; index < savePositionName.length; index++ )
            {
    savePositionName[index] = savePosition[index].split('^')[1];
    positionChoose.addItem(savePositionName[index]); 
            }
        }   
    ]]>
</fx:Script>
<fx:Declarations>
    <s:CallResponder id="GetStrDataResult"/>
    <service:Service id="service"
    fault="Alert.show(event.fault.faultString + '\n'+event.fault.faultDetail)"
                     showBusyCursor="true"/>

    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<s:DropDownList id="dropDownList" x="39" y="31" width="164"
                dataProvider="{positionChoose}"></s:DropDownList>
<s:Button id="btn1" x="132" y="64" label="Button"    
              click="btn1_clickHandler(event)"/>
</s:WindowedApplication> 
```

null 是 POS。如何 POS 不为 null。

```
var POS:Object;         
POS = GetStrDataResult.lastResult; 
var savePosition:Array = new Array(POS.toString().split('|').length); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:36:04.263

发生错误是因为您试图对`null`.

错误消息说问题出在第 32 行。使用您发布的代码，这相当于一行内容：`{`

但我猜测之后的下一行可能有空对象：

```
savePositionID[index] = savePosition[index].split('^')[0]; 
```

我猜`savePosition[index]`是空的。

您可以在此处设置断点并在调试器中确认、跟踪值、显式检查 null 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:45:13.440

可能是服务器没有返回任何查询结果，因此该行

```
POS= GetStrDataResult.lastResult; 
```

没有效果。所以当你基本上说它`POS.toString()`抛出空指针异常！

# python - 忽略整个子文件夹中的警告

> ID：10846061
> 
> 赞同：-1
> 
> 时间：2012-06-01T07:19:47.870
> 
> 标签：python, eclipse, pydev, directory-structure

我在子目录中有与某些源相关的资源文件，如下所示：

```
__init__.py
one.py
subdir/
    __init__.py
    two.py
    dir_two_resources_but_causes_lots_of_warnings/ 
```

如何忽略`dir_two_resources_but_causes_lots_of_warnings`Eclipse 中生成的警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:53:48.010

好吧...右键单击，然后解决方案就在那里。

![在此处输入图像描述](../Images/15c0a93b0cc86d3e9428141799fef75b.png)

# iphone - 多条彩色贝塞尔路径

> ID：10846064
> 
> 赞同：2
> 
> 时间：2012-06-01T07:20:00.310
> 
> 标签：iphone, objective-c, ios, cocoa-touch, bezier

这是我的免费手绘代码。但是当我绘制路径时，以前的路径消失了。我无法弄清楚为什么会这样。有谁能够帮助我。这是我的代码。

```
- (void)drawRect:(CGRect)rect
{

for (NSMutableDictionary *dictionary in pathArray) {

    UIBezierPath *_path = [dict objectForKey:@"Path"];

    UIColor *_colors = [dict objectForKey:@"Colors"];

    [_colors setStroke];

    _path.lineCapStyle = kCGLineCapRound;

    [_path stroke];

  }

}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
 {

isEdited=YES;

myPath=[[UIBezierPath alloc]init];

myPath.lineWidth=lineWidths;

CGPoint touchPoint = [[touches anyObject] locationInView:self];

UITouch *mytouch=[[touches allObjects] objectAtIndex:0];

[myPath moveToPoint:[mytouch locationInView:self]];

[myPath addLineToPoint:CGPointMake(touchPoint.x+1, touchPoint.y+1)];

[dict setObject:myPath forKey:@"Path"];

[dict setObject:brushPattern forKey:@"Colors"];

[pathArray addObject:dict];

[self setNeedsDisplay];

 }

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
 {

UITouch *mytouch=[[touches allObjects] objectAtIndex:0];

[myPath addLineToPoint:[mytouch locationInView:self]];

[self setNeedsDisplay];

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:37:10.753

您应该在每次触发时创建`myPath`和`dict`本地化。`touchesBegan:`放弃他们的类范围定义。

为了更简单（更快）的性能，您仍然可以在类范围`currentPath`和`currentDict` ivars 中使用`touchesMoved:`

编辑：代码看起来像这样：

```
//currentPath declared as an iVar of UIBezierPath* type
//currentDict declared as an iVar of NSMutableDictionary* type

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{    
    isEdited=YES;

    UIBezierPath *myPath=[[UIBezierPath alloc]init];  //locally created

    myPath.lineWidth=lineWidths;

    CGPoint touchPoint = [[touches anyObject] locationInView:self];

    UITouch *mytouch=[[touches allObjects] objectAtIndex:0];

    [myPath moveToPoint:[mytouch locationInView:self]];

    [myPath addLineToPoint:CGPointMake(touchPoint.x+1, touchPoint.y+1)];

    NSMutableDictionary *dict=[[NSMutableDictionary alloc]init]; //locally created

    [dict setObject:myPath forKey:@"Path"];

    [dict setObject:brushPattern forKey:@"Colors"];

    [pathArray addObject:dict];

    [self setNeedsDisplay];

    currentPath = myPath;
    currentDict = dict;
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *mytouch=[[touches allObjects] objectAtIndex:0];
    [currentPath addLineToPoint:[mytouch locationInView:self]];
    [self setNeedsDisplay];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:49:15.337

1) 在您的图纸视图中创建一个`UIImage *currentImage`实例变量。

2) 在视图的 drawRect 方法中放入以下行：

```
[currentImage drawInRect:self.bounds]; 
```

3) 在 touchesEnded 方法中输入以下代码：

```
 CGRect rect = self.bounds;
        UIGraphicsBeginImageContext(rect.size);
        [self.layer renderInContext:UIGraphicsGetCurrentContext()];
        UIImage *tempImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext(); 
        currentImage = tempImage; 
```

# ios - 用于在 iOS 中提供奇怪颜色的多重采样的 OpenGL ES 快照

> ID：10846066
> 
> 赞同：0
> 
> 时间：2012-06-01T07:20:05.307
> 
> 标签：ios, opengl-es, snapshot

当尝试将 opengl 视图快照作为 UIImage 进行多重采样时，图像颜色不同。

当多重采样关闭时，它是正确的。这就是我拍摄快照的方式：

```
- (UIImage*)snapshot
{

    GLint backingWidth, backingHeight;

    backingWidth = framebufferWidth;
    backingHeight = framebufferHeight;

    NSInteger myDataLength = backingWidth * backingHeight * 4;

    GLubyte *buffer = (GLubyte *) malloc(myDataLength);
    glReadPixels(0, 0, backingWidth, backingHeight, GL_RGBA, GL_UNSIGNED_BYTE, buffer);

    // gl renders "upside down" so swap top to bottom into new array.
    GLubyte *buffer2 = (GLubyte *) malloc(myDataLength);

    for(int y = 0; y < backingHeight; y++) {
        for(int x = 0; x < backingWidth * 4; x++) {
            buffer2[y*4*backingWidth + x] = buffer[(backingHeight - y -1 ) * backingWidth * 4 + x];
        }
    }
    // make data provider with data.
    CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, buffer2, myDataLength, myProviderReleaseData);

    // prep the ingredients
    int bitsPerComponent = 8;
    int bitsPerPixel = 32;
    int bytesPerRow = 4 * backingWidth;
    CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB();
    CGBitmapInfo bitmapInfo = kCGBitmapByteOrderDefault | kCGImageAlphaPremultipliedLast ;
    CGColorRenderingIntent renderingIntent = kCGRenderingIntentDefault;

    // make the cgimage
    CGImageRef imageRef = CGImageCreate(backingWidth, backingHeight, bitsPerComponent, bitsPerPixel, bytesPerRow, colorSpaceRef, bitmapInfo, provider, NULL, NO, renderingIntent);

    // then make the uiimage from that
    UIImage *image1 = [UIImage imageWithCGImage:imageRef];

    CGImageRelease(imageRef);
    CGColorSpaceRelease(colorSpaceRef);
    CGDataProviderRelease(provider);
    free(buffer);

    return image1;
} 
```

这是拍摄快照的结果：

![opengl 视图](../Images/c55847d01f1fa2e4c418fab0314877f8.png)

![同一视图的快照](../Images/fd1a13038e47070c37376751a94bfc00.png)

第一个是我正在绘制的 opengl 视图，第二个图像是我为上述代码获取的图像的快照。

我没有使用 GLKit 框架。想知道为什么多重采样会破坏快照。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:43:47.377

在拍摄 opengl 视图的快照之前检查您是否正在调用 [EAGLContext : presentRenderBuffer] 方法

# objective-c - 在 iOS 和 Cocoa Touch 上，我们是否应该假设我们应该始终发送“超级”相同的消息？

> ID：10846069
> 
> 赞同：0
> 
> 时间：2012-06-01T07:20:43.857
> 
> 标签：objective-c, ios, cocoa-touch

在 iOS 和 Cocoa Touch 中，有时我们似乎不需要调用 super 就可以过关，例如：

```
-(void) viewDidAppear:(BOOL)animated {
    // nothing weird if the following is not called:  
    //     [super viewDidAppear: animated]
    // but the docs says we should call it
} 
```

而且我认为`drawRect`，我们通常不会发送`super`相同的消息，除非它`super`正在自己做一些绘图。为了在 Cocoa Touch 和 iOS 中安全起见，我们是否应该始终发送`super`相同的消息，那么是否存在不发送`super`相同消息的情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T07:29:13.737

没有一般规则，它始终取决于您要继承的类和要覆盖的方法。NSObject 是（现代）Objective-C 中类层次结构的根，显然它没有实现您看到和使用的大多数方法，因此作为一般规则始终调用 super 是没有意义的。

您只需分别检查每种方法的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T07:39:11.520

一般不能这么说。只有一件事是确定的：如果你想要被覆盖的方法所具有的功能，就调用 super，如果你不想要就不要调用它。

# c# - 在子类asp.net中设置父类的ViewState

> ID：10846072
> 
> 赞同：1
> 
> 时间：2012-06-01T07:20:54.687
> 
> 标签：c#, asp.net

我正在开发一个现有的门户网站，其中我有一个从另一个类继承的类。在基类中，`Page.EnableViewstate`已设置`false`为如下所示。

```
Page_Load()
{
Page.EnableViewState=false;
} 
```

但是，在子类中，我使用 Gridview 从后端显示某些详细信息。当`Page.EnableViewstate=false`在父页面中时，gridview 不会显示。

有没有办法在子类中启用父类的视图状态？我非常需要基类，但页面。`EnableViewState`由于某种原因，必须在该页面中设置为 false。任何帮助都是最有价值的！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:31:23.330

您可以在父类禁用视图状态后将其设置为启用 - 将以下代码放在您的（子类）页面中。

```
 protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);
        EnableViewState = true;
    } 
```

顺序很重要——这是在基本页面执行完它的 onload 方法*之后*立即发生的——我们只是在之后将 viewstateenabled 设置为 true

这将仅为当前页面启用视图状态 - 从基类继承的所有其他页面将继续禁用视图状态。

# python - Python NLTK：如何在分类器预测中检索百分比置信度

> ID：10846075
> 
> 赞同：5
> 
> 时间：2012-06-01T07:21:18.363
> 
> 标签：python, nlp, machine-learning, classification, nltk

我目前正在训练一个 NLTK 分类器来识别运动命令。这些命令可以包括“向左移动”、“请向前移动”、“停止！”、“向右移动”等。

我目前正在使用基于几个关键特征（例如“halt”和“left”的存在）的分类器对信息进行分类，并且效果很好。

然而，让我们假设给出了以下文本“向左向右移动”。在这种情况下，两个关键字相互冲突，并且推测分类器在提供其结果预测时应该具有低置信度。

因此，有没有办法在使用后检索其预测“方向”的置信度`<CLASSIFIER>.classify()`？

注意：我尝试过使用`nltk.classify.accuracy()`，但它仅用于测试数据集，而不是单个查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T10:48:17.987

NLTK 中的一些分类器有一个[`prob_classify`](http://nltk.org/api/nltk.classify.html#nltk.classify.api.ClassifierI.prob_classify)方法，它返回所有可能结果的概率分布。由此您可以计算置信度分数，例如[赔率](https://en.wikipedia.org/wiki/Odds)或[对数赔率](https://en.wikipedia.org/wiki/Logit)。对于百分比分数，您可以只取最可能结果的概率。

# c - 高分辨率图像的 Opencv 角点检测

> ID：10846076
> 
> 赞同：0
> 
> 时间：2012-06-01T07:21:18.270
> 
> 标签：c, opencv, computer-vision

我刚刚使用 OpenCV 实现了角点检测，并且角值为零。我使用 3488*2616 分辨率的相机图像。有没有合适的方法来找到高分辨率图像的角点检测。我不知道我在哪里我做错了。在这里，我还附上了我的代码和图像。请帮助我。我对 opencv 很陌生。对不起我的英语。

```
int board_w = 6;
int board_h = 6;
const int MAX_CORNERS = 500;

int main()
{

    int board_n = (board_w-1) * (board_h-1);
    CvSize board_sz = cvSize( board_w-1, board_h-1 );

    CvPoint2D32f* corners = new CvPoint2D32f[board_n];
    int cornerCount = 0;

    IplImage *image = cvLoadImage("myimage.jpg");
    IplImage *gray_image = cvCreateImage(cvGetSize(image),8,1);
    cvCvtColor(image, gray_image, CV_BGR2GRAY );
const int N = cvFindChessboardCorners(gray_image,board_sz,&corners[0],&cornerCount,10);

    cvFindCornerSubPix(gray_image,&corners[0],cornerCount,cvSize(3,3),cvSize(-1,-1),cvTermCriteria(CV_TERMCRIT_EPS,0,.01)); 

    printf("\ the count was:%d \n",cornerCount);
    for (int i = 0; i < cornerCount; i++)
    {
cvCircle (image, cvPointFrom32f (corners[i]), 3, CV_RGB (0, 0, 255), 2);

    }

        cvNamedWindow("firstframe");            
        cvShowImage("firstframe",image);
        cvWaitKey(0);
    cvReleaseImage(&image);
    cvReleaseImage(&gray_image);

} 
```

该代码适用于普通棋盘图像。但是在使用具有该分辨率的实时相机图像时，它将不起作用。请帮助我。提前致谢。 ![在此处输入图像描述](../Images/3b6acb55a21c97b2696e5158eb68870b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:29:55.540

如果您怀疑检测确实失败只是因为您使用的是高分辨率图像，您可以始终[`cvResize()`](http://opencv.willowgarage.com/documentation/c/geometric_image_transformations.html#resize)将[IplImage 设置为更小的尺寸](http://linuxconfig.org/resize-an-image-with-opencv-cvresize-function)并验证您的观察结果。

# javascript - 如何在加载另一个脚本之前阻止脚本的执行？

> ID：10846084
> 
> 赞同：1
> 
> 时间：2012-06-01T07:21:51.443
> 
> 标签：javascript, asynchronous, load

假设我从我的主机网页加载这些脚本：

```
<script src="http://www.mywebsite.com/widget/widget.js?type=normal" type="text/javascript"></script>
<script src="http://www.mywebsite.com/widget/widget.js?type=rotation" type="text/javascript"></script> 
```

我只想在第一个完成后才执行第二个（完全；它可以包含异步函数）。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T07:27:55.293

您已经做对了：脚本按照页面中的集成顺序执行，而不是加载。

编辑：正如 MaxArt 所指出的，这可能不是您想要的。他的回答很好。但通常，您需要使用 javascript 常用模式和基于事件的逻辑来避免此类问题：

*   让您的大多数文件只定义类和函数（其中一些将回调作为参数）
*   有一个`main`文件启动它并调用一系列动作，异步性通过回调处理。

我的主要代码通常看起来（有点）像这样：

```
$(window).ready(function() {
    var myBigEngine = new BigEngine();
    myBigEngine.init(function(){
      // do other things, no need to add other layers as user events and ajax message callback will do the rest
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T07:26:01.727

尝试将 defer="defer" 属性应用于第二个`<script>`声明，例如

`<script src="http://www.mywebsite.com/widget/widget.js?type=rotation" type="text/javascript" defer="defer" ></script>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T07:31:05.487

将整个脚本包装在一个函数中，如下所示：

```
(function(id) {
    var id = setInterval(function() {
        if (!window.doneLoading) return;
        clearInterval(id);

        // The whole script file goes here
        ...
    }, 50);
})(); 
```

setInterval 轮询 (global, sorry) 变量`doneLoading`。在第一个脚本中，当您的异步函数完全加载时，您必须设置`doneLoading`为`true`或任何其他非 false 值，比如在 AJAX 请求结束时可能？

**编辑**：因为我建议在脚本中添加一个全局变量，它也可以添加一个全局*函数*。因此，不要设置`setInterval`调用，而是将第二个脚本包装在一个函数中......但是像这样：

```
function doneLoading() {
        // The whole script file goes here
        ...
} 
```

在第一个脚本文件中，在回调函数结束时，只需调用`doneLoading()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T07:24:30.113

您可以将第二个脚本初始化函数放在 window.onload 事件中

```
window.onload = function(){

// call function from second script

} 
```

或使用 jQuery

```
$(function(){

// call function from second script

}); 
```

您可以使用此功能添加第二个脚本

```
function loadScript(src){
    var f=document.createElement('script');
    if(f){
        f.setAttribute("type","text/javascript");
        f.setAttribute("src",src);
        document.getElementsByTagName("head")[0].appendChild(f);
    }
} 
```

# java - 使用多线程登录flex和java

> ID：10846093
> 
> 赞同：1
> 
> 时间：2012-06-01T07:22:35.123
> 
> 标签：java, multithreading, apache-flex, fingerprint

我在 java 和 flex 中的登录应用程序有问题。我们使用指纹登录。系统等待用户输入任何指纹 60 秒。之后它会自动退出页面。用户在该页面上还有文本密码选项。当用户单击该选项时，控制转到其他页面。但问题是，当用户单击文本密码选项时，他会被重定向，但 60 秒的线程会继续运行。任何人都可以帮助我如何停止该线程。这是我的代码。我正在使用阻塞队列概念通过输入一些虚拟值来退出输入屏幕。

```
private void interruptCaptureProcess() {
    System.out.println("Interrupting Capture Process.");
    ExactScheduledRunnable fingerScanInterruptThread = new ExactScheduledRunnable()
    {
        public void run()
        {
            try
            {
                if (capture != null) 
                {
                    DPFPSampleFactoryImpl test = new DPFPSampleFactoryImpl();
                    samples.put(test.createSample(new byte[1]));
                    capture.stopCapture();
                }
            }
            catch (Exception e) 
            {
                LOGGER.error("interruptCaptureProcess", e);
                e.printStackTrace();
            }
        }
    };
    timeOutScheduler.schedule(fingerScanInterruptThread, getTimeOutValue(), TimeUnit.SECONDS);
}

/**
 * Scans and Verifies the user finger print by matching it with the previous registered template for the user.
 * 
 * @param userVO is the user value object which has to be verified.
 * @return the acknowledgment string according to result for operation performed.
 * @throws UserServiceException when there is an error in case of getting user record.
 */
public String verifyUserFingerPrint(Long userId) throws LoginServiceException {
    System.out.println("Performing fingerprint verification...\n");
    interruptCaptureProcess();
    UserVO userVO = null;
    try {

        userVO = new UserService().findUserById(userId, true);
        if (userVO != null) {

            stopCaptureProcess();
            DPFPSample sample = getSample(selectReader(), "Scan your finger\n");
            timeOutScheduler.shutdownNow();
            if (sample.serialize().length == 1) {
                System.out.println("Coming in code");
                return null;
            } else if (sample.serialize().length == 2) {
                System.out.println("Capturing Process has been Timed-Out");
                return TIMEOUT;
            }

            if (sample == null)
                throw new UserServiceException("Error in scanning finger");

            DPFPFeatureExtraction featureExtractor = DPFPGlobal.getFeatureExtractionFactory()
                .createFeatureExtraction();
            DPFPFeatureSet featureSet = featureExtractor.createFeatureSet(sample,
                DPFPDataPurpose.DATA_PURPOSE_VERIFICATION);
            DPFPVerification matcher = DPFPGlobal.getVerificationFactory().createVerification();
            matcher.setFARRequested(DPFPVerification.MEDIUM_SECURITY_FAR);

            byte[] tempByte = userVO.getFingerPrint();
            DPFPTemplateFactory facotory = new DPFPTemplateFactoryImpl();
            for (DPFPFingerIndex finger : DPFPFingerIndex.values()) {
                DPFPTemplate template = facotory.createTemplate(tempByte);
                if (template != null) {
                    DPFPVerificationResult result = matcher.verify(featureSet, template);
                    // Fix of enh#1029
                    Map<ScriptRxConfigType, Map<ScriptRxConfigName, String>> scriptRxConfigMap = ScriptRxConfigMapSingleton
                        .getInstance().getScriptRxConfigMap();
                    Map<ScriptRxConfigName, String> fingerPrintPropertiesMap = scriptRxConfigMap
                        .get(ScriptRxConfigType.FINGERPRINT);
                    String fingerPrintDemoMode = fingerPrintPropertiesMap.get(ScriptRxConfigName.DEMOMODE);
                    if (fingerPrintDemoMode != null && fingerPrintDemoMode.equalsIgnoreCase("DemoEnabled")) {
                        return "LOGS_MSG_101";
                    }
                    // End of fix of enh#1029
                    if (result.isVerified()) {
                        System.out.println("Matching finger: %s, FAR achieved: %g.\n" + fingerName(finger)
                            + (double) result.getFalseAcceptRate() / DPFPVerification.PROBABILITY_ONE);
                        return "LOGS_MSG_101";
                    }
                }
            }
        }
    } catch (IndexOutOfBoundsException iob) {
        LOGGER.error("verifyUserFingerPrint", iob);
        throw new LoginServiceException("LOGS_ERR_101", iob);
    } catch (Exception exp) {
        LOGGER.error("verifyUserFingerPrint", exp);
        System.out.println("Failed to perform verification.");
        throw new LoginServiceException("LOGS_ERR_105", exp);
    } catch (Throwable th) {
        LOGGER.error("verifyUserFingerPrint", th);
        throw new LoginServiceException("LOGS_ERR_106", th.getMessage(), th);
    }
    System.out.println("No matching fingers found for \"%s\".\n" + userVO.getFirstName().toUpperCase());
    throw new LoginServiceException("LOGS_ERR_107", null);
}

/* finger scanning process
 */
private void stopCaptureProcess() {
    ExactScheduledRunnable fingerScanInterruptThread = new ExactScheduledRunnable() {
        public void run() {
            try {
                DPFPSampleFactoryImpl test = new DPFPSampleFactoryImpl();
                samples.put(test.createSample(new byte[2]));
                capture.stopCapture();
            } catch (Throwable ex) {
                ex.printStackTrace();
            }
        }
    };
    timeOutScheduler.schedule(fingerScanInterruptThread, getTimeOutValue(), TimeUnit.SECONDS);
}

/**
 * API will get the value for the finger scanner time out configuration(Default will be 60 seconds)
 */
private long getTimeOutValue() {
    long waitTime = 60;
    String configValue = ScriptRxSingleton.getInstance().getConfigurationValue(ConfigType.Security,
        ConfigName.FingerprintTimeout);
    try {
        waitTime = Long.valueOf(configValue);
    } catch (NumberFormatException e) {
        LOGGER.debug("Configuration value is not a number for FingerTimeOut", e);
    }
    return waitTime;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-03-24T08:24:47.257

在 Java 中停止阻塞任务是一个复杂的话题，需要阻塞代码和想要解除阻塞的代码之间的合作。Java 中最常见的方法是中断阻塞的线程，如果阻塞的代码和它周围的代码理解中断，这种方法就可以工作。如果不是这种情况，你就不走运了。这是一个答案，它解释了一种中断阻塞线程的方法`Executor`：[https ://stackoverflow.com/a/9281038/1109](https://stackoverflow.com/a/9281038/1109)

# android - 单击 webview 的区域时启动事件

> ID：10846100
> 
> 赞同：2
> 
> 时间：2012-06-01T07:22:59.740
> 
> 标签：android, events, webview, listener

我使用 webview，当用户单击 webview 的每个角落时，我想启动一个不同的事件。有可能的？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T16:05:16.980

您可以将 WebView 放置在 RelativeLayout 中，将 WebView 设置为填充整个 RelativeLayout，然后使用 android:layout_alignParentTop、android:layout_alignParentLeft 等添加您想要放置在 WebView 顶部的任何元素。

# memory-management - UIScrollView 内的 UIView 子类如何处理内存

> ID：10846101
> 
> 赞同：1
> 
> 时间：2012-06-01T07:23:04.033
> 
> 标签：memory-management, uiview, uiscrollview, core-graphics, drawrect

我有`UIView`一个`drawRect`包含 CoreGraphics 自定义绘图代码的变量大小。视图最初非常小，但有可能变得非常宽，并放置在 a`UIScrollView`中以使用户能够滚动视图。

目前，视图被创建为适合整个绘图所需的宽度，CoreGraphics 代码在`drawRect`.

```
- (void)drawRect:(CGRect)rect {

    // Only try and draw if the frame size is greater than zero and the graph has some range
    if ((self.frame.size.width>0) && (self.frame.size.height>0) && ((maxX - minX)>0)) {

        // Get the current drawing context
        CGContextRef context = UIGraphicsGetCurrentContext();

        // Save the state of the graphics context
        CGContextSaveGState(context);

        // Set the line style
        CGContextSetRGBStrokeColor(context, 0.44, 0.58, 0.77, 1.0); 
        CGContextSetRGBFillColor(context, 0.44, 0.58, 0.77, 1.0);
        CGContextSetLineWidth(context, 3.0);
        CGContextSetLineDash(context, 0, NULL, 0);

        // Draw the graph
        [self drawGraphInContext:context];

        // Restore the graphics context
        CGContextRestoreGState(context);
    }
} 
```

我可以通过以下方式提高效率：

1.  使用 rect 参数进行边界计算，`drawRect`并且仅绘制当前可见的内容。
2.  创建一个较小的`UIView`（比如 scrollView 框架宽度的 2 倍）并随着滚动位置的移动，重绘图像并将滚动视图重新居中。

在我努力做这些事情之前，我想了解是否值得付出努力，以及如果 UIView 变得非常宽，我以后是否会遇到问题。到目前为止，性能不是问题，但我担心内存可能是问题。

具体来说，scrollView 是否将视图使用的内存量限制在可见区域？是图形上下文创建的整个视图的大小，可见区域还是rect参数的大小？CoreGraphics 是否简单地忽略了可见区域之外的绘图操作？

任何帮助和最佳实践建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:32:56.840

IMO，这完全取决于`rect`调用的参数：

```
- (void)drawRect:(CGRect)rect 
```

据我所知，这将设置为`contentSize`您的滚动视图。简单地说，上下文和用于它的内存将与该`rect`值相关。

您可能会尝试通过考虑`frame`滚动视图来对您绘制的区域进行自己的“剪辑”。

更好的是，您可以查看 Apple 关于[在 UIScrollView 中平铺内容](http://developer.apple.com/library/ios/#samplecode/ScrollViewSuite/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008904-Intro-DontLinkElementID_2)的示例。是样品 3。

# shell - 如何使用shell脚本在括号之间的数据中用“_”替换空格？

> ID：10846103
> 
> 赞同：1
> 
> 时间：2012-06-01T07:23:13.173
> 
> 标签：shell, unix

我想替换使用 shell 脚本写在括号中的数据中的空格。我的输入线是

> 2012-05-21 06:37:16 M NumberOfHwEntitiesMismatch Cabinet=1（检测到未配置的 SAU。）

我希望我的输出是：

> 2012-05-21 06:37:16 M NumberOfHwEntitiesMismatch Cabinet=1（SAU_that_is_not_configured_detected。）

请给我一些建议......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:38:28.490

使用`awk`, 在 "(" 上拆分，然后`gsub`在第二个字段中使用下划线替换空格。

例子：

```
$ awk -F\( '{gsub(" ","_", $2);print $1"("$2}' <<< "2012-05-21 06:37:16 M NumberOfHwEntitiesMismatch Cabinet=1 (SAU that is not configured detected.)"
2012-05-21 06:37:16 M NumberOfHwEntitiesMismatch Cabinet=1 (SAU_that_is_not_configured_detected.) 
```

（这假设您的输入只有一组括号。）

# android - Android中水平寻呼机的两指滑动

> ID：10846104
> 
> 赞同：2
> 
> 时间：2012-06-01T07:23:26.733
> 
> 标签：android, android-layout, android-widget

我正在尝试为 Horizo​​ntalPager 实现两个手指像滑动一样。我了解 Horizo​​ntalPager 的单次滑动功能，效果很好。如何区分单指滑动和两指滑动？谁能告诉我如何为 Horizo​​ntalPager 实现两指滑动？代码示例会更有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:41:00.900

看看这个答案：

[https://stackoverflow.com/a/7840953/1026620](https://stackoverflow.com/a/7840953/1026620)

如果您在视图中覆盖 onTouchEvent，它应该可以工作。和

```
event.getPointerCount() 
```

检查它是否等于 2。在这种情况下，请转到下一页。否则，忽略手势。

# java - 32 位 JRE 和 64 位 JRE 中的所有可能值 os.arch

> ID：10846105
> 
> 赞同：37
> 
> 时间：2012-06-01T07:23:27.200
> 
> 标签：java, jnlp

我需要在 Linux、Solaris 和 Windows 上对 JRE 1.6 中 os.arch 属性的所有可能值进行最新编译。如果可能，请引用您的发现的来源。我需要这些值来选择我的 JNLP 文件中的资源。基本上我需要根据 JRE 是 32 位还是 64 位来分配不同的 JVM 内存。等待你的答复。谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-05-04T12:37:25.613

您可以在自己的 jdk 中寻找它的最佳位置。

看着`java.lang.System`你可以看到属性是在 `initializeSystemClass`方法使用`initProperties`方法中初始化的，该方法依赖于本机代码使用`JNI`：

```
private static native Properties initProperties(Properties props);

/**
 * Initialize the system class.  Called after thread initialization.
 */
private static void initializeSystemClass() {

    // VM might invoke JNU_NewStringPlatform() to set those encoding
    // sensitive properties (user.home, user.name, boot.class.path, etc.)
    // during "props" initialization, in which it may need access, via
    // System.getProperty(), to the related system encoding property that
    // have been initialized (put into "props") at early stage of the
    // initialization. So make sure the "props" is available at the
    // very beginning of the initialization and all system properties to
    // be put into it directly.
    props = new Properties();
    initProperties(props);  // initialized by the VM
    ...
    ...
} 
```

如果您检查从不同平台调用的本机代码的来源，您可以看到系统属性`initProperties`的可能值。`os.arch`所以一步一步来：

首先看一下调用 from`System.c`的方法。从`JNI``java.lang.System.initProperties`[`System.c`](http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/2f21faa922fe/src/share/native/java/lang/System.c)

```
JNIEXPORT jobject JNICALL
Java_java_lang_System_initProperties(JNIEnv *env, jclass cla, jobject props)
{
    char buf[128];
    java_props_t *sprops = GetJavaProperties(env);
    jmethodID putID = (*env)->GetMethodID(env,
                                          (*env)->GetObjectClass(env, props),
                                          "put",
            "(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;");

    if (sprops == NULL || putID == NULL ) return NULL;

    PUTPROP(props, "java.specification.version",
            JDK_MAJOR_VERSION "." JDK_MINOR_VERSION);
    PUTPROP(props, "java.specification.name",
            "Java Platform API Specification");
    PUTPROP(props, "java.specification.vendor", "Sun Microsystems Inc.");

    PUTPROP(props, "java.version", RELEASE);
    PUTPROP(props, "java.vendor", VENDOR);
    PUTPROP(props, "java.vendor.url", VENDOR_URL);
    PUTPROP(props, "java.vendor.url.bug", VENDOR_URL_BUG);

    ...

    /* os properties */
    PUTPROP(props, "os.name", sprops->os_name);
    PUTPROP(props, "os.version", sprops->os_version);

    // HERE IS THE `os.arch` PROPERTY :)

    PUTPROP(props, "os.arch", sprops->os_arch); 
```

如您所见，它的`os.arch`来源 `PUTPROP(props, "os.arch", sprops->os_arch);`和`sprops`实现是使用`java_props_t *sprops = GetJavaProperties(env);`. 所以让我们看一下`GetJavaProperties(env)`，这个方法定义[`java_props.h`](http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/2f21faa922fe/src/share/native/java/lang/java_props.h)为：

`java_props_t *GetJavaProperties(JNIEnv *env);`

并且实施似乎取决于操作系统。

所以最后寻找一个具体的实现`GetJavaProperties`；在 Windows 中，此属性可以采用的可能值为`ia64`、`amd64`、`x86`或`unknown`。您可以从[`java_props_md.c`文件](http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/2f21faa922fe/src/windows/native/java/lang/java_props_md.c)中看到：

```
#if _M_IA64
        sprops.os_arch = "ia64";
#elif _M_AMD64
        sprops.os_arch = "amd64";
#elif _X86_
        sprops.os_arch = "x86";
#else
        sprops.os_arch = "unknown";
#endif 
```

对于 Solaris 似乎更复杂，因为本机代码中的属性值来自[`java_props_md.c`](http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/2f21faa922fe/src/solaris/native/java/lang/java_props_md.c)特定于 solaris 中定义的宏：

```
sprops.os_arch = ARCHPROPNAME; 
```

这个宏定义如下[`Makefile`](http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/2f21faa922fe/make/java/java/Makefile)：

`OTHER_CPPFLAGS += -DARCHPROPNAME='"$(ARCHPROP)"'`

所以看起来这来自编译它的环境（对不起，我不是 C 专家，我只是在猜测，但也许我可以指导你一点）。

在Linux文件夹中`src/linux/native/`没有`java_props_md.c`所以我想在这种情况下采用与solaris相同的源（我再次猜测......）。

**注意**：我使用 1.6 版本来获取此值，但是可以在最新的 Java 版本中添加新值，因此请检查您所需的版本。

希望能帮助到你，

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-09-11T16:13:30.543

我在 2019 年遇到了同样的问题。尤其是在 arm 处理器方面。

试用后，树莓派 2 (ARMv7) 似乎只是简单地返回了字符串`arm`。

树莓派 3 (ARMv8) 返回`aarch64`.

x86 64 位桌面和服务器返回`amd64`.

希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-04-28T22:07:10.250

您还可以编写如下代码来查找 os 及其架构。

```
import java.util.HashMap;
import java.util.Map;

import org.apache.commons.lang.SystemUtils;

public class PlatformDetection {
    private String os;
    private String arch;
    public static String OS_WINDOWS = "windows";
    public static String OS_OSX = "osx";
    public static String OS_SOLARIS = "solaris";
    public static String OS_LINUX = "linux";
    public static String ARCH_PPC = "ppc";
    public static String ARCH_X86_32 = "x86_32";
    public static String ARCH_X86_64 = "x86_64";

    public PlatformDetection() {
        // resolve OS
        if (SystemUtils.IS_OS_WINDOWS) {
            this.os = OS_WINDOWS;
        } else if (SystemUtils.IS_OS_MAC_OSX) {
            this.os = OS_OSX;
        } else if (SystemUtils.IS_OS_SOLARIS) {
            this.os = OS_SOLARIS;
        } else if (SystemUtils.IS_OS_LINUX) {
            this.os = OS_LINUX;
        } else {
            throw new IllegalArgumentException("Unknown operating system " + SystemUtils.OS_NAME);
        }

        // resolve architecture
        Map<String, String> archMap = new HashMap<String, String>();
        archMap.put("x86", ARCH_X86_32);
        archMap.put("i386", ARCH_X86_32);
        archMap.put("i486", ARCH_X86_32);
        archMap.put("i586", ARCH_X86_32);
        archMap.put("i686", ARCH_X86_32);
        archMap.put("x86_64", ARCH_X86_64);
        archMap.put("amd64", ARCH_X86_64);
        archMap.put("powerpc", ARCH_PPC);
        this.arch = archMap.get(SystemUtils.OS_ARCH);
        if (this.arch == null) {
            throw new IllegalArgumentException("Unknown architecture " + SystemUtils.OS_ARCH);
        }
    }

    public String getOs() {
        return os;
    }

    public String getArch() {
        return arch;
    }

    public void setArch(String arch) {
        this.arch = arch;
    }

    public void setOs(String os) {
        this.os = os;
    }

    public String toString() {

        return os + "_" + arch;
    }
} 
```

参考下面的链接

1.  [https://github.com/trustin/os-maven-plugin/blob/master/src/main/java/kr/motd/maven/os/Detector.java](https://github.com/trustin/os-maven-plugin/blob/master/src/main/java/kr/motd/maven/os/Detector.java)

2.  [https://github.com/rachelxqy/EligibilityCriteriaModeling/blob/57001f6d86084f074f4ca6aaff157e93ef6abf95/src/main/java/edu/mayo/bmi/medtagger/ml/util/PlatformDetection.java](https://github.com/rachelxqy/EligibilityCriteriaModeling/blob/57001f6d86084f074f4ca6aaff157e93ef6abf95/src/main/java/edu/mayo/bmi/medtagger/ml/util/PlatformDetection.java)

# xcode - Xcode，无法发送 UTF-8 文本

> ID：10846111
> 
> 赞同：0
> 
> 时间：2012-06-01T07:24:05.177
> 
> 标签：xcode

我正在尝试向我的服务器发送一个帖子值。

它成功发送英文字符。

此代码用于寻找朋友，它不能发送 UTF-8 文本。

```
- (void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope{
/*
 Update the filtered array based on the search text and scope.
 */ 
if(![searchText isEqualToString:@""]){

    NSUserDefaults * userdef = [NSUserDefaults standardUserDefaults];

    NSString *encodedSearchText = [searchText stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

    NSString * uploadUrl = [NSString stringWithFormat:@"%@/%@" , GPON_URL , GPON_URL_SEARCHFRIEND];
    NSURL *url = [NSURL URLWithString:uploadUrl];

    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
    [request setPostValue:encodedSearchText forKey:@"u_id"];
    [request setPostValue:[userdef objectForKey:KEY_USER_ID] forKey:@"s_username"];

    [request startSynchronous];
    [request setShouldAttemptPersistentConnection:NO];

    NSString *response = [request responseString];
    SBJsonParser * parser = [[[SBJsonParser alloc] init] autorelease];
    NSDictionary * json = (NSDictionary *)[parser objectWithString:response];

    [searchMember removeAllObjects];
    if( [[json objectForKey:@"result"] isEqual:@"YES"] ){
        [searchMember addObjectsFromArray:[json objectForKey:@"data"]];

        [self.tableView reloadData];
    }

}

} 
```

这是我的代码。你能看到导致错误的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:29:16.677

您似乎没有设置请求的字符串编码；尝试：

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[request setStringEncoding:NSUnicodeStringEncoding]; 
```

此外，这是确定 NSString 是否为空的一种非常糟糕的方法：

```
if (![searchText isEqualToString:@""]) 
```

改用长度方法：

```
if ([searchText length] > 0) 
```

# python - 使用带有 JSON 的 urlopen.read 中的“类似字节的对象”？

> ID：10846112
> 
> 赞同：26
> 
> 时间：2012-06-01T07:24:15.853
> 
> 标签：python, python-3.x, urlopen

只是试图测试非常简单的 Python JSON 命令，但我遇到了一些麻烦。

```
urlopen('http://www.similarsitesearch.com/api/similar/ebay.com').read() 
```

应该输出

```
'{"num":20,"status":"ok","r0":"http:\\/\\/www.propertyroom.com\\/","r1":"http:\\/\\/www.ubid.com\\/","r2":"http:\\/\\/www.bidcactus.com\\/","r3":"http:\\/\\/www.etsy.com\\/","r4":"http:\\/\\/us.ebid.net\\/","r5":"http:\\/\\/www.bidrivals.com\\/","r6":"http:\\/\\/www.ioffer.com\\/","r7":"http:\\/\\/www.shopgoodwill.com\\/","r8":"http:\\/\\/www.beezid.com\\/","r9":"http:\\/\\/www.webidz.com\\/","r10":"http:\\/\\/www.auctionzip.com\\/","r11":"http:\\/\\/www.overstock.com\\/","r12":"http:\\/\\/www.bidspotter.com\\/","r13":"http:\\/\\/www.paypal.com\\/","r14":"http:\\/\\/www.ha.com\\/","r15":"http:\\/\\/www.onlineauction.com\\/","r16":"http:\\/\\/bidz.com\\/","r17":"http:\\/\\/www.epier.com\\/","r18":"http:\\/\\/www.sell.com\\/","r19":"http:\\/\\/www.rasmus.com\\/"}' 
```

但我得到了相同的字符串，`b`前面有一个：

```
b'{"num":20,"status":"ok","r0":"http:\\/\\/www.propertyroom.com\\/","r1":"http:\\/\\/www.ubid.com\\/","r2":"http:\\/\\/www.bidcactus.com\\/","r3":"http:\\/\\/www.etsy.com\\/","r4":"http:\\/\\/us.ebid.net\\/","r5":"http:\\/\\/www.bidrivals.com\\/","r6":"http:\\/\\/www.ioffer.com\\/","r7":"http:\\/\\/www.shopgoodwill.com\\/","r8":"http:\\/\\/www.beezid.com\\/","r9":"http:\\/\\/www.webidz.com\\/","r10":"http:\\/\\/www.auctionzip.com\\/","r11":"http:\\/\\/www.overstock.com\\/","r12":"http:\\/\\/www.bidspotter.com\\/","r13":"http:\\/\\/www.paypal.com\\/","r14":"http:\\/\\/www.ha.com\\/","r15":"http:\\/\\/www.onlineauction.com\\/","r16":"http:\\/\\/bidz.com\\/","r17":"http:\\/\\/www.epier.com\\/","r18":"http:\\/\\/www.sell.com\\/","r19":"http:\\/\\/www.rasmus.com\\/"}' 
```

随后，当我尝试运行

```
json.loads(urlopen('http://similarsitesearch.com/api/similar/ebay.com').read()) 
```

它给了我错误信息：

> TypeError：不能在类似字节的对象上使用字符串模式”

我假设这与`b`？

我`urlopen`从导入`urllib.request`，并且正在运行 Python 3。

有任何想法吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-12T17:29:35.853

read() 中的内容是*字节*类型，因此您需要先将其转换为字符串，然后再尝试将其解码为 json 对象。

要将*字节*转换为字符串，请将代码更改为： `urlopen('http://similarsitesearch.com/api/similar/ebay.com').read().decode("utf-8")`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-01T07:30:37.043

您需要检查`Content-Type`标头中指定的字符集并在将其传递给`json.load*()`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-03-05T19:29:14.550

它运作良好：

```
def myView(request):
    encoding = request.read().decode("utf-8")
    dic = json.loads(encoding)
    print(dic) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T07:29:22.817

urllib 正在返回一个字节数组，我假设它是 py3 中的默认值，而 json 需要一个字符串。在调用 json 调用之前，尝试将返回值包装在 str() 调用中

```
j = str(urlopen('http://similarsitesearch.com/api/similar/ebay.com').read())
json.loads(j) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T07:31:41.500

看起来像一个[字节文字](http://www.python.org/dev/peps/pep-3112/)。研究如何使用 http 获取数据，或者 API 如何在标头中返回数据。

# http - linux上简单快速的工具来观察http请求的到来

> ID：10846117
> 
> 赞同：2
> 
> 时间：2012-06-01T07:24:40.640
> 
> 标签：http, http-headers

一个 HTTP 请求正在向您发送，在一个端口上访问您的机器（假设您知道请求 url/路由和端口）这是一个简单快捷的工具，可以帮助您使用任何语言查看其标头、传递的参数、或任何微型 Web 服务器代理、任何工具。

作为一个 ruby​​/rails 人，我很快创建了一个 rails 应用程序，设置它的路由，运行它，然后简单地跟踪它的日志。

很想知道其他 Web 应用程序开发人员如何处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:32:34.813

我会这样做`tcpdump`。请参阅[手册页](http://linux.die.net/man/8/tcpdump)。还有一个适用于 windows 的版本。

**编辑**
这里是请求的示例：（`tcpdump port 80`是的，就是这么简单）。使用 sudo 或以 root 身份运行它，否则你会得到`no suitable device found`.

如果您需要更详细的输出，请添加`-v`or `-vv`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T08:24:17.327

我使用 WireShark，它非常简单且可配置。

如果您使用 debian 或衍生产品：

```
sudo apt-get install wireshark 
```

别的：

[http://www.wireshark.org/docs/wsug_html_chunked/ChapterBuildInstall.html](http://www.wireshark.org/docs/wsug_html_chunked/ChapterBuildInstall.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-09T13:53:05.807

以下是如何`wireshark`在 Debian 派生的 GNU/Linux 发行版上使用：

```
$ sudo apt-get install wireshark wireshark-doc
$ sudo dumpcap -i eth0 
```

> `Ctrl`+`C`

```
$ sudo chmod 644 /tmp/wireshark_pcapng_eth0...
$ wireshark /tmp/wireshark_pcapng_eth0... 
```

# c# - 如何赋予 IIS AppPool 桌面权限

> ID：10846123
> 
> 赞同：1
> 
> 时间：2012-06-01T07:25:03.720
> 
> 标签：c#, security, iis-7.5

我需要帮助的操作是从 Intranet 网页在自己的服务器磁盘上执行 EXE 文件，该 IIS 位于同一服务器安装上。该网页使用业务层执行 ProcessStart 以及给定的参数。

当我从 web 执行执行时，任务管理器向我显示应用程序正在以用户身份启动网页的 IIS AppPool。几秒钟后它被杀死了。在我的数据库日志中，我可以看到；

`The Microsoft Jet database engine cannot open the file '\\computer\pathfile.ext'. It is already opened exclusively by another user, or you need permission to view its data.`

这是正确的。反过来，EXE 工具从其他计算机加载文件。这是一种特殊的行为，在使用桌面工具时经过充分研究并且工作良好。

**我的目标/问题，**
我希望这个网络功能调用具有桌面权限。有可能吗？

IIS AppPool 使用帐户 ApplicationPoolIdentity 进行常规设置。我似乎是“幸运的不明智”，不知道自 <=IIS6 以来 IIS 7.5 和 Windows Server 2008 R2 提升了多少安全模型。

我试图将应用程序池用户更改为 NetworkService，管理员。
我尝试将应用程序池设置为执行/读取权限
我什至尝试让 webapp 运行批处理文件并调用内部应用程序..

> 然后我开始改变 ProcessStart 行为。在这里，我不知道该怎么做。我试图添加动词 runas。强制密码提示不是这里的解决方案。我试图模拟用户名/密码。那里没有运气。在桌面命令窗口中使用过 /savecred 后，我还尝试使用 ProcessStart 添加 runas /user: blabla 作为参数。那里没有运气。

也许这应该可行，但我只是不明白属性的正确设置。我在下面添加了 ProcessStart 代码片段，还添加了一些注释代码，让您看看我尝试了什么。

```
 public string RunProcess(ApplicationType type, int param)
    {
        currentSelection = GetApplicationType(type);

        ProcessStartInfo info = new ProcessStartInfo(currentSelection.Path);

        info.CreateNoWindow = false;
        info.UseShellExecute = true;
        //info.UseShellExecute = false;
        //info.ErrorDialog = false;
        //info.UserName = "dummyUsEr";
        //info.Password = this.SecurePwd("DummyPWd");

        info.WindowStyle = ProcessWindowStyle.Normal;
        info.Arguments = string.Format(" {0}", param.ToString());

        using (Process exec = Process.Start(info))
        {
            try
            {
                exec.WaitForExit();
            }
            catch 
            {  
            }
        }

        return output;
    } 
```

**编辑**

为了清楚起见，也许可以帮助其他一些人/女孩浏览这个问题，我附上了密码生成的片段，

```
protected System.Security.SecureString SecurePwd(string pwd)
{
    SecureString securePwd = new SecureString();

    foreach (char ch in pwd.ToCharArray())
        securePwd.AppendChar(ch);

    return securePwd;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:46:44.970

我看到您已尝试为进程启动模拟输入特定的用户名和密码，但您说该进程访问另一台计算机上的文件，我没有看到任何提及指定域名的内容，大概您需要访问远程文件？
所以像这样：

```
info.Domain = "domainname";
info.UserName = "dummyUsEr";
info.Password = "DummyPWd"; 
```

另外， this.SecurePwd() 有什么作用，您是否仅使用传递给它的直接密码字符串进行了尝试？

# c# - WP7 列表框绑定到第二个可观察集合自动选择错误

> ID：10846125
> 
> 赞同：0
> 
> 时间：2012-06-01T07:25:10.067
> 
> 标签：c#, windows-phone-7, data-binding, listbox

我有一个绑定到服务的列表框。它加载得很好，允许我选择一个项目并移动到第二页。

第二页从同一个服务加载一个新的 observable 集合，并使用从前一页中选择的项目来加载一个带有数据过滤器的新列表框。

第二个列表框允许进一步选择以基于此选择加载详细信息页面。我遇到的错误是第二个列表框加载并自动选择列表中的第一项。按下后退按钮后，它会加载第二个列表框而不进行任何选择。

有人可以告诉我如何停止第二个列表框中的自动选择吗？代码详情如下。

第一个列表框代码，包括发件人

```
void ServiceReference1Client_GetMensleaderListCompleted(object sender, GetMensLeaderListCompletedEventArgs e)
    {
        if (e.Error != null) { MensHeading.Text = "Connect to Data"; return; }

        ObservableCollection<Mens_Leaders> mensLeaders = e.Result;

        this.mensRankings.ItemsSource = mensLeaders;

    }

    private void mensRankings_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        if (mensRankings.SelectedItem != null)
        {
            Mens_Leaders SelectedPlayer = mensRankings.SelectedItem as Mens_Leaders;
            _SelectedMensPlayer = (sender as ListBox).SelectedItem;
            NavigationService.Navigate(new Uri("/Pages/PlayerProfile.xaml", UriKind.Relative));
            FrameworkElement root2 = Application.Current.RootVisual as FrameworkElement;
            root2.DataContext = _SelectedMensPlayer;
        }
    } 
```

第二个列表加载的页面

```
private void LoadPlayerList()
    {
        Service1Client ServiceReference1Client = new Service1Client();

        ServiceReference1Client.GetTournamentListCompleted += new EventHandler<GetTournamentListCompletedEventArgs>(ServiceReference1Client_GetTournamentListCompleted);
        ServiceReference1Client.GetTournamentListAsync();

        FrameworkElement root2 = Application.Current.RootVisual as FrameworkElement;
        var currentPlayer = root2.DataContext as ATP_Tennis_App.TennisService.Mens_Leaders;
        _SelectedPlayer = currentPlayer;
        _selectedPlayerTournamentsWon = currentPlayer.Name;

    }
void ServiceReference1Client_GetTournamentListCompleted(object sender, GetTournamentListCompletedEventArgs e)
    {
        if (e.Error != null) { return; }

        ObservableCollection<Tournaments> tournamentList = e.Result;

        viewSource = new CollectionViewSource();
        viewSource.Filter += TournamentWin_Filter;
        viewSource.Source = tournamentList;
        this.listBox1.ItemsSource = viewSource.View;
    }

    void TournamentWin_Filter(object sender, FilterEventArgs e)
    {
        if (e.Item != null)
            e.Accepted = ((Tournaments)e.Item).Prev_Male_Winner.Contains(_selectedPlayerTournamentsWon);
    }

    private void listBox1_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        if (listBox1.SelectedItem != null)
        {

            Tournaments selectedTournament1 = listBox1.SelectedItem as Tournaments;

            _SelectedItemTournament = (sender as ListBox).SelectedItem;
            NavigationService.Navigate(new Uri("/Pages/TournamentDetailsPanorama.xaml", UriKind.Relative));
            FrameworkElement root3 = Application.Current.RootVisual as FrameworkElement;
            root3.DataContext = _SelectedItemTournament;

        }
        else
        {
            return;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T10:08:12.270

在列表框上，将 IsSynchroziedWithCurrentItem 设置为 False。这解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T10:28:39.560

我知道这是一个肮脏的解决方案，但您可以设置 listBox1.SelectedIndex = -1

# css - 更改输入上的父 div[type=checkbox]：用 css 检查

> ID：10846127
> 
> 赞同：22
> 
> 时间：2012-06-01T07:25:27.863
> 
> 标签：css, checkbox, css-selectors, checked

我可以弄清楚如何在选中复选框时更改父 div :( 更改以下段落效果很好。

在 Chrome 中尝试了这种方法，但没有运气：

**HTML**

```
​&lt;div>
    <input type="checkbox​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​" checked>
    <p>Test</p>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**CSS**

```
div {
    background: pink;
    width: 50px;
    height:50px;
}
div + input[type=checkbox]:checked {
  background: green;
}

input[type=checkbox]:checked + p {
    background: blue;
} 
```

[​http://jsfiddle.net/lajlev/3xUac/](http://jsfiddle.net/lajlev/3xUac/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-01T07:42:07.753

没有办法只用 CSS 选择父级（直到 CSS4），所以你必须使用 JS..

[看到这个帖子在这里](https://stackoverflow.com/a/1014958/1384214)谈论它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-03-04T11:21:04.873

试试这个 ：

**html**

```
<input type="checkbox" checked>
<div>
   <p>Test</p>
</div> 
```

**css**

```
div {
    background: pink;
    width: 50px;
    height:50px;
}
input[type=checkbox]:checked + div {
  background: green;
}

input[type=checkbox]:checked + div p {
    background: blue;
} 
```

[演示](http://jsfiddle.net/tenben2/dvuwgaq1/)

# jsf-2 - PF过滤包含日期的数据表列

> ID：10846128
> 
> 赞同：6
> 
> 时间：2012-06-01T07:25:29.730
> 
> 标签：jsf-2, datatable, primefaces

我在数据表中有一个列，我想使用以下代码添加一个过滤器：

```
<p:dataTable id="aDataTable" var="aVariable" value="#{aView.values}" paginator="true" rows="10" selectionMode="single" selection="#{aView.selection}" onRowSelectUpdate="aForm">
                 <f:facet name="header">
                     A List
                 </f:facet>
              <p:column sortBy="#{aVariable.id}" filterBy="#{aVariable.id}" filterEvent="change">
                  <f:facet name="header">
                      <h:outputText value="No"/>
                  </f:facet>
                   <h:outputText value="#{aVariable.id}"/>
              </p:column>
              <p:column sortBy="#{aVariable.date}" filterBy="#{aVariable.date}" filterEvent="change">
                  <f:facet name="header">
                      <h:outputText value="Date"/>
                  </f:facet>
</p:dataTable> 
```

日期以下列格式输入：

```
<h:outputText value="Date: *"/>
<p:calendar pattern="dd/MM/yyyy" value="#{aView.value.date}"/> 
```

过滤器适用于 id 但不适用于日期。这是什么原因，在这种情况下如何使过滤器工作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-01T07:26:51.347

primefaces 中还没有现成的日期过滤器机制，但可以使用自定义过滤器按日期过滤。您必须为您的列定义一个标题方面并使用 ajax 调用进行“手动”过滤，但它确实有效：

```
<column>
  <f:facet name="header">DateRange
    <div>
      <p:calendar id="from" value="#{bean.from}" styleClass="calendarFilter">
        <p:ajax event="dateSelect" listener="#{ctrlr.filterDates()}" update="dataTableId"/>
      </p:calendar>
      <p:calendar id="to" value="#{bean.to}" styleClass="calendarFilter">
        <p:ajax event="dateSelect" listener="#{ctrlr.filterDates()}" update="dataTableId"/>
      </p:calendar>
    </div>
  </f:facet> 
```

...

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-03T07:28:31.070

对于更简单的解决方案，您只需为带有字符串的日期添加一个占位符作为 filterBy 组件使用的数据类型。

脚步：

在模型类中创建一个新的瞬态属性。

```
@Transient
private String dateForFilter;
public String getDateForFilter() {
 return dateForFilter;
}
public void setDateForFilter(String dateForFilter) {
 this.dateForFilter = dateForFilter;
} 
```

在返回数据模型之前创建以下逻辑。

```
public List<Item> getDataModel() {
   List<Item> lstItem = serviceClass.loadItem(userid);
   for (Item item : lstItem) {
      DateFormat dateFormat = null;
      Date date = item.getDate;
      dateFormat = new SimpleDateFormat("MM/dd/yyyy kk:mm");
      item.setDateForFilter(dateFormat.format(date));
   }

   return lstItem;
} 
```

更新您的 XHTML 以使用 dateForFilter 属性。

```
<p:column filterBy="#{item.dateForFilter}">
  <f:facet name="header">
    Transaction Date
  </f:facet>
  <h:outputText value="#{item.dateForFilter}" />
</p:column> 
```

注意：只有在不使用日期来更新模型类的内容时，才能使用它。

HTH。

# html - HTML onclick 下拉菜单

> ID：10846129
> 
> 赞同：2
> 
> 时间：2012-06-01T07:25:30.800
> 
> 标签：html, css, button

我必须在单击下面的按钮时对其进行编码，它将显示一个下拉菜单。

我将如何处理这个问题，因为我以前从未遇到过。

![在此处输入图像描述](../Images/8ee1f0fa9084b3d3f9504a8ff1110ef2.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T07:29:32.777

只是谷歌“下拉按钮javascript”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T07:52:30.900

[http://jsfiddle.net/YQB75/2/](http://jsfiddle.net/YQB75/2/)

非常简单，但它为您提供了一个起点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T10:26:20.430

```
<style type="text/css">
<!--
body,td,th {
 font-family: Verdana, Geneva, sans-serif;
 font-size: 100%;
 color: #666;
}
body {
 background-color: #fff;
 margin-left: 20px;
 margin-top: 20px;
 margin-right: 20px;
 margin-bottom: 20px;
} 

a, a:hover, a:active, a:focus {
 outline:0; 
 direction:ltr;
}

.wrapper {
 position:relative; height:25px;
}

.mainmenu {
 position:absolute; 
 z-index:100;
 font-family:Verdana, Geneva, sans-serif;
 font-weight:normal;
 font-size:90%;
 line-height:25px;
 left:50%; 
 margin-left:-303px; 
 width:606px;
} 

ul.menu {
 padding:0; 
 margin:0; 
 list-style:none; 
 width:100px; 
 overflow:hidden; 
 float:left; 
 margin-right:1px;
} 

ul.menu a {
 text-decoration:none; 
 color:#fff; 
 padding-left:5px;
}

ul.menu li.list {
float:left;
width:250px;
margin:-32767px -125px 0px 0px;
background:url(images/top1.png) no-repeat left bottom;
}

ul.menu li.list a.category {
position:relative;
z-index:50;
display:block;
float:left;
width:120px;
margin-top:32767px;
background:transparent;
}

ul.menu li.list a.category:hover,
ul.menu li.list a.category:focus,
ul.menu li.list a.category:active {
 margin-right:1px;
 background-image:url(images/tophover1.png);
 background-repeat:no-repeat;
 background-position:left top;
}

ul.submenu {
 float:left; 
 padding:25px 0px 0px 0px; 
 margin:0; 
 list-style:none; 
 background-image:url(images/tophover1.png);
 background-repeat:no-repeat;
 background-position:left top;
 margin:-25px 0px 0px 0px;
}

ul.submenu li a {
float:left;
width:120px;
background:#369;
clear:left;
}

ul.submenu li a.endlist {
 background:url(images/bottom1.png);
}

ul.submenu li a.endlist:hover,
ul.submenu li a.endlist:focus,
ul.submenu li a.endlist:active {
background:url(images/bottomhover1.png);
}

ul.submenu a:hover,
ul.submenu a:focus,
ul.submenu a:active {
background:#900;
margin-right:1px;
}
-->

</style>

<div class="wrapper">
<div class="mainmenu">
<ul class="menu">
<li class="list">
 <a class="category" href="#Home">Home</a>
</li>
</ul>
<ul class="menu">
<li class="list">
 <a class="category" href="#about">About Us&nbsp;&nbsp;&raquo;</a>
 <ul class="submenu">
  <li><a href="#about1">About link 1</a></li>
  <li><a href="#about2">About link 2</a></li>
  <li><a href="#about3">About link 3</a></li>
        <li><a href="#about4">About link 4</a></li>
  <li><a class="endlist" href="#about5">About link 5</a></li>
 </ul>
</li>
</ul>
<ul class="menu">
<li class="list">
 <a class="category" href="#articles">Articles&nbsp;&nbsp;&raquo;</a>
 <ul class="submenu">
  <li><a href="#articles1">Articles link 1</a></li>
  <li><a href="#articles2">Articles link 2</a></li>
  <li><a href="#articles3">Articles link 3</a></li>
  <li><a class="endlist" href="#articles4">Articles link 4</a></li>
 </ul>
</li>
</ul>
<ul class="menu">
<li class="list">
 <a class="category" href="#news">News&nbsp;&nbsp;&raquo;</a>
 <ul class="submenu">
  <li><a href="#news1">News link 1</a></li>
  <li><a href="#news2">News link 2</a></li>
  <li><a class="endlist" href="#news3">News link 3</a></li>
 </ul>
</li>
</ul>
<ul class="menu">
<li class="list">
 <a class="category" href="#donate">Donate</a>
</li>
</ul>
<ul class="menu">
<li class="list">
 <a class="category" href="#contact">Contact</a>
</li>
</ul>
<!-- end mainmenu --></div>
<!-- end wrapper --></div> 
```

或试试这个链接

```
http://www.texaswebdevelopers.com/blog/template_permalink.asp?id=129 
```

或者

```
http://www.1stwebdesigner.com/css/38-jquery-and-css-drop-down-multi-level-menu-solutions/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T07:32:32.453

我同意杰罗姆 C.

我可以给你的唯一部分是，通常有许多网站的标题是“最好的 NNN 下拉菜单”或用任何东西代替下拉菜单。

他们通常很有帮助。

在这种情况下：

[http://www.hongkiat.com/blog/drop-down-menu-30-free-scripts-to-enhance-header-navigation/](http://www.hongkiat.com/blog/drop-down-menu-30-free-scripts-to-enhance-header-navigation/)

# python - Django创建包含Unicode的CSV文件，可以直接用Excel打开

> ID：10846133
> 
> 赞同：6
> 
> 时间：2012-06-01T07:25:47.073
> 
> 标签：python, django, excel, unicode, csv

我想通过 Django 创建一个包含 unicode 数据（希腊字符）的 CSV 文件，并且我希望它可以直接从 MS Excel 打开。在其他地方我读到了 unicodecsv 库，我决定使用它。所以，这是我的看法；

```
def get_csv（请求，id）：
    响应 = HttpResponse(mimetype='text/csv')
    response['Content-Disposition'] = '附件; 文件名=csv.csv'
    writer = unicodecsv.writer(response, encoding='utf-16"')
    writer.writerow(['第二行', 'A', 'B', 'C', '"测试"', "ελληνικά"])
    返回响应

```

现在，除了 utf-16，我真的尝试**了**writer 的 encoding 参数中的所有内容，包括 utf-8、utf-8-sig、utf-8-le、utf-16-le 和其他。每次我用 excel 打开文件时，我总是在希腊字符应该出现的地方看到垃圾。

Notepad++ 能够毫无问题地打开文件。我究竟做错了什么 ？

更新：这是我在 jd 回答后尝试的：

```
导入 csv
响应 = HttpResponse(mimetype='text/csv')
response['Content-Disposition'] = '附件; 文件名=test.csv'
response.write(u'\ufeff'.encode('utf8'))
writer = csv.writer(response, delimiter=';' , dialect='excel')
writer.writerow(['第二行', 'A', 'B', 'C', '"测试"', "ελληνικά"])
返回响应

```

仍然没有运气 - 现在我也可以在 Excel 中看到 BOM（作为抓取） - 我也尝试使用 unicodecsv 和其他一些选项，但再次没有工作:(

更新 2：我在 dda 的提议后尝试了这个：

```
writer = unicodecsv.writer(response, delimiter=';' , dialect='excel')
writer.writerow(codecs.BOM_UTF16_LE)
writer.writerow([ (u'ελληνικά').decode('utf8').encode('utf_16_le')])

```

仍然没有运气:(这是我得到的错误：

```
/csv/559 处的 UnicodeEncodeError
“ascii”编解码器无法对位置 0-7 中的字符进行编码：序数不在范围内（128）

```

更新3：我快疯了。为什么这么难？？？这是另一个尝试：

```
response.write(codecs.BOM_UTF16_LE)
writer = unicodecsv.writer(response, delimiter=';' , lineterminator='\n', dialect='excel', )
writer.writerow('ελληνικ')
writer.writerow([ ('ελληνικά').decode('utf8').encode('utf_16_le')]) #A
writer.writerow([ ('ελληνικά2').decode('utf8').encode('utf_16_le'), ('ελληνικά2').decode('utf8').encode('utf_16_le') ]) #B

```

这是Excel的内容：

```
㯎㮵㯎㮻㯎㮻㯎㮷㯎㮽㯎㮹㯎઺ελληνικά딊묃묃뜃봃뤃먃갃㈃딻묃묃뜃봃뤃먃갃㈃

```

所以我得到了一些带有#A 行的希腊字符。但是 B 行，完全一样的并没有给我生成希腊字符 $^#$#^$#$#^ @@%$#^#^$#$ 请帮忙！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-01T07:29:04.157

使用 Python 的`csv`模块，您可以编写一个 UTF-8 文件，如果您将 BOM 放在文件的开头，Excel 将正确读取该文件。

```
with open('myfile.csv', 'wb') as f:
    f.write(u'\ufeff'.encode('utf8'))
    writer = csv.writer(f, delimiter=';', lineterminator='\n', quoting=csv.QUOTE_ALL, dialect='excel')
    ... 
```

同样应该适用于`unicodecsv`. 我想您可以将 BOM 直接写入`HttpResponse`对象，如果没有，您可以使用`StringIO`先写入文件。

**编辑：**

这是一些使用非 ASCII 字符编写 UTF-8 CSV 文件的示例代码。为简单起见，我将 Django 排除在外。我可以在 Excel 中读取该文件。

```
# -*- coding: utf-8 -*-
import csv
import os
response = open(os.path.expanduser('~/utf8_test.csv'), 'wb')
response.write(u'\ufeff'.encode('utf8'))
writer = csv.writer(response, delimiter=';' , dialect='excel')
writer.writerow(['Second row', 'A', 'B', 'C', '"Testing"', u"ελληνικά".encode('utf8')])
response.close() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T07:45:39.147

I've never been able to open a UTF-8-encoded (CSV) file in Excel. The only way I managed to make Excel import files properly was with UTF-16LE. YMMV.

EDIT

First

```
writer.writerow(codecs.BOM_UTF16_LE) 
```

Then (as many times as required; str is the string to encode and write)

```
writer.writerow(str.decode('utf8').encode('utf_16_le')) 
```

# android - 我是否需要在设备上预装谷歌地图应用才能使用谷歌 API 运行应用？

> ID：10846135
> 
> 赞同：0
> 
> 时间：2012-06-01T07:26:00.010
> 
> 标签：android, google-maps

我正在创建一个使用 google API 的应用程序。我想知道如果我在手机上安装该应用程序，是否需要在设备中预装谷歌地图应用程序才能使用地图，或者它使用互联网从谷歌或任何其他方法获取地图?

这是我的 main.java：

> 包 com.map.testing；
> 
> 导入android.os.Bundle；
> 
> 导入 com.google.android.maps.GeoPoint；导入 com.google.android.maps.MapActivity；导入 com.google.android.maps.MapController；导入 com.google.android.maps.MapView；
> 
> public class main extends MapActivity { /** 首次创建活动时调用。*/ 地图控制器 mControl; GeoPoint GeoP；MapView 地图V; @Override public void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); 设置内容视图（R.layout.main）；mapV = (MapView) findViewById(R.id.mapView); mapV.displayZoomControls(true); mapV.setBuiltInZoomControls(true);
> 
> ```
> double lat =  23.1;
> double longi = 113.3;
> 
> GeoP = new GeoPoint((int)(lat*1E6), (int)(longi*1E6));
> 
> mControl = mapV.getController();
> mControl.animateTo(GeoP);
> mControl.setZoom(12);
> 
> }
> 
> @Override 
> protected boolean isRouteDisplayed() {        
> // TODO Auto-generated method stub 
> return false; 
> } 
> ```
> 
> }

* * *

这是我的 main.xml：

> ```
> <com.google.android.maps.MapView
>              android:id="@+id/mapView"
>              android:layout_width="fill_parent"
>              android:layout_height="fill_parent"
>              android:enabled="true"
>              android:clickable="true"
>              android:apiKey="00_sJY0o9guZejQwsJOr8PPDHtMpnEB6LWFspjA"
>              />
> </LinearLayout> 
> ```

* * *

我的清单：

> ```
> <uses-sdk android:minSdkVersion="8" />
> 
> <uses-permission android:name="android.permission.INTERNET" />
> 
> <application
>     android:icon="@drawable/ic_launcher"
>     android:label="@string/app_name" >
>     <uses-library android:name="com.google.android.maps" />
> 
>     <activity
>         android:name=".main"
>         android:label="@string/app_name" >
>         <intent-filter>
>             <action android:name="android.intent.action.MAIN" />
> 
>             <category android:name="android.intent.category.LAUNCHER" />
>         </intent-filter>
>     </activity>
> </application> 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:32:26.527

但是您可以通过以下方式处理 api 不在电话上的 id

android:required="false" 在

[如何检测安卓设备是否支持谷歌地图API](https://stackoverflow.com/questions/3410475/how-to-detect-an-android-device-whether-it-supports-google-maps-api)

# bash - sudo -i 通过 sudoers 文件不再具有特定权限

> ID：10846138
> 
> 赞同：0
> 
> 时间：2012-06-01T07:26:03.767
> 
> 标签：bash, sudo, sudoers

我有一个名为 sudo -i -u user /bin/bla/whatever 的 bash 脚本。直到最后一次更新到 CentOS 5.8 之前，它都运行良好。这是 sudoers 文件中的相应条目：

```
Runas_Alias TEST = user1, user2
Defaults:test always_set_home
test ALL=(TEST) NOPASSWD: /bin/bash -c /bin/bla/whatever, /bin/bla/whatever 
```

如果我使用 sudo -i 它似乎调用了命令

```
"/bin/bash -c /bin/bla/whatever" 
```

（关于安全日志）。现在，自从更新以来，它似乎调用

```
"/bin/bash -c \/bin\/bla\/whatever" 
```

因此是不允许的。我试图将 sudoers 文件中的行更改为

```
test ALL=(TEST) NOPASSWD: /bin/bash -c /bin/bla/whatever, /bin/bla/whatever, /bin/bash -c \/bin\/bla\/whatever 
```

但那是不允许的语法，所以我尝试了：

```
test ALL=(TEST) NOPASSWD: /bin/bash -c /bin/bla/whatever, /bin/bla/whatever, /bin/bash -c \\/bin\\/bla\\/whatever 
```

这是有效的语法，但也不起作用。

如果我使用 sudo -H -u user /bin/bla/whatever 它工作正常。即使我在 sudoers 文件中允许 /bin/bash ，但这将允许任何事情.....

有任何想法吗？

埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-13T21:19:37.820

你在`sudo -i -u user /bin/bla/whatever`争论吗？来自`man sudoers`：

> 一个简单的文件名允许用户使用他/她希望的任何参数运行命令。但是，您也可以指定命令行参数（包括通配符）。或者，您可以指定 "" 以指示该命令只能在没有命令行参数的情况下运行。

所以一旦你添加了`/bin/bash -c`你现在指定的参数，它们必须*完全*匹配。

这是一个示例`sudoers`行：

```
test ALL=(ALL) NOPASSWD: /bin/bash -c /bin/true, /bin/bash -c /bin/true *, /bin/true * 
```

我可以这样做：

```
sudo /bin/true
sudo /bin/true foo
sudo -u /bin/true
sudo -u /bin/true foo 
```

但*不会* `sudo true`因为那变成`bash -c true`哪个不匹配`bash -c /bin/true`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T08:40:59.783

刚刚检查了我的 Fedora 16 系统上的 sudo 手册页，它说：

> ```
>  -i [command]
>                The -i (simulate initial login) option runs the shell specified by the password database entry of the target user as a login shell.  This means
>                that login-specific resource files such as .profile or .login will be read by the shell.  If a command is specified, it is passed to the shell
>                for execution via the shell's -c option. 
> ```

因此，似乎没有必要`bash -c`在您的 sudoers 命令定义中指定。

如果您调用该命令，`sudo -i /bin/bla/whatever`您应该只需要在 sudoers 文件中添加以下内容：

```
test ALL=(TEST) NOPASSWD: /bin/bla/whatever 
```

我可以在我的 fedora 16 系统上重现该问题，我尝试的 sudoers 文件没有任何更改有任何影响。我找不到使这项工作所需的任何其他配置。我只能说使用'-H -u ...'。

# jquery - 更改背景颜色和自定义数据表的搜索框

> ID：10846139
> 
> 赞同：0
> 
> 时间：2012-06-01T07:26:09.237
> 
> 标签：jquery, datatables, jsp-tags

我已经为我的表使用了 dataTables。但我想给桌子一些新的外观，但不知道在哪里做。我的文件是：

```
<link href="css/demo_page.css" rel="stylesheet" type="text/css">
    <link href="css/demo_table.css" rel="stylesheet" type="text/css">
    <link href="css/demo_table_jui.css" rel="stylesheet" type="text/css">

    <script type="text/javascript" src="js/jquery-1.4.4.min.js"></script>
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/jquery.dataTables.min.js"></script> 
```

我的表格的行的背景颜色为白色（偶数）和浅紫色（奇数）。我想**改变行的颜色，**我该怎么做？

此外，我想**在搜索框中将默认文本写**为“通过任何字段搜索”。我必须为这些更改编辑哪些文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:58:27.910

对于表格行颜色更改此注释下的 demo_table.css 文件：

```
/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 * DataTables row classes
 */ 
```

对于搜索框中的默认文本，将此参数添加到数据表的初始化中：

```
"oSearch": {"sSearch": "Search via any field"} 
```

# types - 契约可以定义类型系统所做的所有不变量吗？

> ID：10846144
> 
> 赞同：1
> 
> 时间：2012-06-01T07:26:22.803
> 
> 标签：types

我从来没有真正用契约语言设计过编程，我当然不希望这篇文章成为动态与静态类型系统的战争。

读了一会儿后，我的问题是标题中的问题：类型系统可以“捕获”的所有内容，也可以通过合同进行设计吗？在某些网站上，我读过诸如“合同是类固醇的类型”之类的内容，以及类似的声明。但它真的是一个真正的超集吗？

或者换句话说，带有合约的动态语言是否可以比没有合约的静态类型语言具有相同且更多的验证（再次，在运行时）？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T13:58:26.193

不可以。只能动态检查*本地*属性，而需要某种*全局*知识的属性则不能。考虑一些属性，例如某些东西是唯一的、没有别名的东西、没有竞争条件或死锁的计算。一个合适的静态类型系统可以验证这些属性，因为它能够在被检查的表达式的上下文中建立某些不变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T07:37:25.980

我不是合同方面的专家，但我认为这基本上是正确的。一般来说，合约允许你编写动态检查来强制执行任意复杂的行为。合约最酷的地方在于，您可以使用它们：

*   指定类型系统*无法*捕获的行为。（对于类型系统的*通常*定义。）
*   在运行时将它们包含在您的程序中，以获得有关问题的详细报告。
*   分配、跟踪和传播*责任*，看看哪里出了问题，哪里出了问题。

是的，合同可以像类型系统一样简单，从某种意义上说，“类型作为集合”的共同观点（这在多态 cse 中并不正确，但在您关心的许多情况下近似于某些行为）可以看作是契约语言的*结构*约束。但是，合同系统允许您编写更多修饰的行为。虽然您可以编写合约来表达排序函数的输入和排序后的输出之间的关系，但这需要*依赖类型*如果在类型中正确写下。所以简单的答案是，是的，合约可以用来定义类型系统所能做的一切，甚至更多。（我不完全确定像奇怪的子结构类型系统这样的边缘情况，但我认为这也可以通过污染事物的合同来完成。）

硬币的另一面是类型系统为您提供静态*保证*，即您的程序在某种程度上是正确的。然而，有了合同，你真的根本不能这么说。（当然，您可以将某些退化的合同案例视为通过使用标准类型系统、模型检查、SMT 求解器等进行了部分验证，并且在这方面确实已经完成了一些工作。）但是，合约真正强大的东西基本上是程序验证很难的想法，让我们抛弃一些静态保证，忍受一些可能的错误，并获得有关问题的更好信息，以便我们可以快速修复它。

顺便说一句，现在有更高级的合约系统，除了简单的结构约束之外，还有更高阶的时间合约（[这里](http://users.soe.ucsc.edu/~cormac/papers/icfp11.pdf)）和其他扩展，使使用合约进行编程非常酷。

编辑：我想我也应该更清楚地说明这一点，您的程序肯定有一些本地属性，您无法通过合同在全球范围内跟踪，所以安德烈斯的回应在这方面对我来说似乎更正确，对此感到抱歉！

# iphone - 在 Google 地图上显示区域？

> ID：10846145
> 
> 赞同：2
> 
> 时间：2012-06-01T07:26:26.067
> 
> 标签：iphone, google-maps, map

我正在为高尔夫游戏做一个面向地图的应用程序。在这方面，我必须展示绿色、沙子和危险等区域。我认为使用该区域的坐标，我们将显示。在谷歌地图上显示这些区域的任何其他想法？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:29:32.273

如果您只绘制一个或两个区域，那么好的旧时尚多边形应该可以正常工作

> [http://code.google.com/apis/maps/documentation/javascript/v2/overlays](http://code.google.com/apis/maps/documentation/javascript/v2/overlays) ...

（如果它们很大，使用编码的折线可能会节省一点，请参见上面链接的页面）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T16:52:15.327

另外两个选项（除了原生谷歌地图多边形）是：KmlLayer [https://developers.google.com/maps/documentation/javascript/layers#KMLLayers](https://developers.google.com/maps/documentation/javascript/layers#KMLLayers) 和 FusionTablesLayer [https://developers.google.com/maps/documentation/ javascript/图层#FusionTables](https://developers.google.com/maps/documentation/javascript/layers#FusionTables)

两者都将数据呈现为瓦片，因此如果它们很多，性能会更好 两者都允许您添加点击侦听器并在点击时显示信息窗口（如果需要）这将创建 kml，包括 Google 的 MyPlaces、Google 地图工具。

# jquery - 在可滚动的 div 上拖放

> ID：10846148
> 
> 赞同：0
> 
> 时间：2012-06-01T07:26:28.103
> 
> 标签：jquery, css, treeview

我有 2 个 div，左 div 和右 div，左 div 包含树视图，右 div 包含网格。我可以将项目从网格拖到树视图中，当我将鼠标悬停在节点上时，树视图具有展开树视图的代码。

由于树解释了由于树视图的大小而存在滚动条 - 当我将一个项目拖到完全展开的树视图中时它不允许我一直拖到底部，问题是当我拖动滚动条时不滚动，所以目前我通常需要使用滚动条查看的任何项目 - 它不允许我在树视图上拖动到足以看到这些项目的方式。

左 div 具有以下内容：-

```
{
    display: inline-block;
    width: 350px;
    height: 800px;
    float: left;
    overflow: auto;
} 
```

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:38:45.977

作为用户，您仍然可以使用鼠标滚轮滚动。作为设计小部件的人，我建议在树的上方和下方添加几个像素高的热点（带有绑定到 mousemove 事件的 javascript 的 div）。在 mousemove 事件中，向上或向下滚动树（取决于悬停的热点） - 然后用户将能够通过在热点上摆动鼠标来滚动树。

如果被拖动的对象拦截了 mousemove 事件（很可能），那么您必须添加一些代码来检查对象是被拖动到树的上方还是下方，并相应地滚动树（以适当的速度）。该代码必须位于可以判断鼠标位置的元素上 - 可能是 body 元素。

# web-services - 验证 Spring Soap Webservice 响应服务器端

> ID：10846149
> 
> 赞同：1
> 
> 时间：2012-06-01T07:26:33.537
> 
> 标签：web-services, spring, validation, soap, response

我想在服务器端验证 Soap Spring Webservice 对 XSD 的响应。验证结果不应导致肥皂故障。出于客户端兼容性原因，Web 服务响应包含验证错误，例如

```
<SOAP-ENV:Body>
   <ns:eltResponse>
      <errCode>the error code</errorCode>
      <errMessage>the error message</errMessage>
   </ns:eltResponse>
</SOAP-ENV:Body> 
```

我尝试使用[PayloadValidatingInterceptor](http://static.springsource.org/spring-ws/site/apidocs/org/springframework/ws/soap/server/endpoint/interceptor/PayloadValidatingInterceptor.html)和自定义[ValidationErrorHandler](http://static.springsource.org/spring-ws/site/apidocs/org/springframework/xml/validation/ValidationErrorHandler.html)。但这会导致肥皂故障。是否可以像上面提到的那样创建响应，例如使用异常解析器？

# javascript - 禁用 jquery ui 对话框按钮

> ID：10846150
> 
> 赞同：0
> 
> 时间：2012-06-01T07:26:45.820
> 
> 标签：javascript, jquery

如何禁用 jquery UI 对话框按钮，例如：

```
 $("#dialog").dialog({ width: 500, modal: true, show: 'drop', hide: 'drop',
        buttons: {
            "Next": function () {/* do something */ },
            "Finish" : function {/* do something */ } 
        }
    }); 
```

我想保留`disabled the Next button`直到用户选择一些`radio button or checkbox`以及用户何时选择其中任何一个`'Next button will enabled'`。（当我们安装任何新软件时，我们可以看到相同的行为。）。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:30:30.410

您可以使用萤火虫或检查谷歌浏览器中的元素，然后找到下一个按钮 id 或 css 规则...我的意思是按钮的正确选择器，然后您可以随时调用

```
$("Nextbutton selector").attr('disabled','disabled'); 
```

重新启用

```
$("Nextbutton selector").removeAttr('disabled'); 
```

希望这有帮助

PS：检查时我看到了

```
<button class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" type="button" role="button" aria-disabled="false">
<span class="ui-button-text">Next</span>
</button> 
```

所以你可以打电话

```
$('button.ui-button:contains("Next")').attr.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T22:17:56.380

启用：

```
$(e.currentTarget).button( "option", "disabled", false ); 
```

要禁用：

```
$(e.currentTarget).button( "option", "disabled", true ); 
```

[按钮小部件 API](http://api.jqueryui.com/button/#option-disabled "按钮小部件 API")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T00:19:18.030

在创建并打开对话框之后，这就是（您的代码）所做的：

```
 $("#dialog").dialog({ width: 500, modal: true, show: 'drop', hide: 'drop',
    buttons: {
        "Next": function () {/* do something */ },
        "Finish" : function {/* do something */ } 
    }
 }); 
```

做这个：

```
 $("#dialog").dialog('widget')
     .find("button :contains('Next')").parent().button("disable"); 
```

它将立即禁用“下一步”按钮。准备就绪后，您可以通过执行以下操作启用按钮：

```
 $("#dialog").dialog('widget')
     .find("button :contains('Next')").parent().button("enable"); 
```

# sql-server - 在 sql-server 中查询所有记录都是正确的-明智地铸造昂贵的性能

> ID：10846153
> 
> 赞同：3
> 
> 时间：2012-06-01T07:27:15.390
> 
> 标签：sql-server, tsql

我有一个包含一列位值的表。我想编写一个函数，如果关联项的所有记录都为真，则返回真。

我发现这样做的一种方法是：

```
Select @Ret = CAST(MIN(CAST(IsCapped as tinyInt)) As Bit) 
    from ContractCover cc
    Inner join  ContractRiskVersion crv on cc.ContractRiskId = crv.ContractRiskId
    WHERE crv.ContractVersionId = @ContractVersionId
    AND cc.IsActive = 1
    return @ret 
```

但是转换为 int 是为了获得最低的成本吗？我是否应该只是根据说查询：

(count(Id) where IsCapped = 0 > 0) 返回 false 而不是进行多次强制转换？

在执行计划中，调用这个函数似乎并不重执行（但我对分析查询计划不太熟悉 - 它似乎与存储过程的另一部分的成本相同，例如 2 %）。

编辑 - 当我执行调用函数的存储过程并查看执行计划时 - 它调用函数的部分具有查询成本（相对于批处理）：1％，与存储过程的其他部分相当。除非我看错了:)

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T07:39:17.210

我会使用 exists 语句来执行此操作，因为它会从找到 1 条记录的那一刻起跳出查询`IsCapped = 0`，因为您的查询将始终读取所有数据。

```
CREATE FUNCTION dbo.fn_are_contracts_capped(@ContractVersionId int)
RETURNS bit
WITH SCHEMABINDING
AS
BEGIN
    DECLARE @return_value bit

    IF EXISTS(
      SELECT 1 
        FROM dbo.ContractCover cc
        JOIN dbo.ContractRiskVersion crv 
          ON cc.ContractRiskId = crv.ContractRiskId
       WHERE crv.ContractVersionId = @ContractVersionId
         AND cc.IsActive = 1
         AND IsCapped = 0)
      BEGIN
        SET @return_value = 0
      END
    ELSE
      BEGIN
        SET @return_value = 1
      END

    RETURN @return_value
  END 
```

与读取数据所需的 IO 相比，强制转换不会增加很多开销。

编辑：将代码包装在标量函数中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T13:19:41.540

铸造`SELECT`将受到 CPU 和内存的限制。在这种情况下不确定多少——通常情况下，我们通常会先尝试优化 IO，然后再担心 CPU 和内存。所以我在那里没有给你一个明确的答案。

也就是说，这个特殊解决方案的问题在于它不会短路。SQL Server 将读出 ContractVersionId = @ContractVersionId 和 IsActive = 1 的所有行，将 IsCapped 转换为 INT，并取最小值，实际上，一旦找到 IsCapped = 0 的单行，您就可以退出。它不会如果 ContactVersionId 具有高度选择性，并且只返回表的一小部分，或者大多数行都有上限，这并不重要。但是，如果 ContactVersionId 的选择性不高，或者如果很大比例的行没有上限，那么您要求 SQL Server 做太多的工作。

第二个考虑是标量值函数在 SQL Server 中是一个臭名昭著的性能拖累。如果可能，最好创建为内联表函数，例如：

```
create function AreAllCapped(@ContractVersionId int)
returns table as return (
select 
  ContractVersionId = @ContractVersionId 
, AreAllCapped = case when exists (
      select * 
      from ContractCover cc 
      join ContractRiskVersion crv on cc.ContractRiskId = crv.ContractRiskId
      where crv.ContractVersionId = @ContractVersionId
        and cc.IsActive = 1
        and IsCapped = 0
      ) 
    then 0 else 1 end
) 
```

然后您可以`CROSS APPLY`在 FROM 子句中调用它（假设 SQL 2005 或更高版本）。

最后一点：计算 IsCapped = 0 的地方有类似的问题。如果您熟悉的话，这就像 LINQ 中 Any() 和 Count() 之间的区别。Any() 将短路， Count() 必须实际计算所有元素。`SELECT COUNT(*) ... WHERE IsCapped = 0`仍然必须*计算*所有行，即使您只需要一行就可以继续前进。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T18:27:51.497

当然，众所周知，`bit`列不能作为参数传递给聚合函数（因此，如果需要传递，则必须先将其转换为整数），但是`bit`可以对列进行*排序*经过。因此，您的查询可以这样重写：

```
SELECT **TOP 1 @Ret = IsCapped**
FROM ContractCover cc
INNER JOIN ContractRiskVersion crv on cc.ContractRiskId = crv.ContractRiskId
WHERE crv.ContractVersionId = @ContractVersionId
  AND cc.IsActive = 1
**ORDER BY IsCapped**; 
```

请注意，在此特定查询中，假定`IsCapped`不能为 NULL。如果可以，您需要在 WHERE 子句中添加一个额外的过滤器：

```
AND IsCapped IS NOT NULL 
```

当然，除非您实际上更愿意返回 NULL 而不是 0（如果有的话）。

至于选角的成本，对于菲利普和彼得已经说过的话，我真的没有什么要补充的。我确实发现`bit`数据需要在聚合之前进行转换是一件令人讨厌的事情，但这从来都不是主要问题。

# sharepoint - 检查共享点列表中是否存在列表项

> ID：10846157
> 
> 赞同：1
> 
> 时间：2012-06-01T07:27:36.177
> 
> 标签：sharepoint, listitem

我必须使用 C# 检查列表项是否存在于共享点列表中。如果它存在，我必须将“尝试列”更新（增量） 1 。我写了一些代码。但它们不起作用。我需要这个紧急。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:42:17.180

我不会仅仅因为你应该先尝试自己解决它，或者至少解释一下你对如何解决它有一些了解，所以我不会给你代码，但是我会帮助你给你一些见解。

你可以通过几种方式做到这一点

1 获取`SPWeb object`项目应该在的位置。通常是网站的上下文。

获取项目应该存在的列表`SPWeb object.lists[listname or guidhere]`

循环遍历列表，检查每个项目中是否有任何匹配项，甚至检查对象是否与对象匹配

另一种方法是使用 SPQuery 对象

设置`SPquery.query = "YOUR CAML STATEMENT HERE"`

```
SPList<yourlist>.GetItems(SPQuery object) 
```

如果以上返回 >0 项，则您有匹配项

加一

这应该给你一个很好的起点

欢呼特鲁兹

# .net - SQL Server 纯代码连接超时

> ID：10846162
> 
> 赞同：1
> 
> 时间：2012-06-01T07:27:58.710
> 
> 标签：.net, sql-server, timeout

我刚刚安装了 SQL Server 2012 和 SQL Server 2008 R2

我可以在本地连接到它没问题

但是当我尝试通过局域网上的另一台电脑连接时，我得到了超时：

> 超时已过。在操作完成之前超时时间已过或服务器没有响应。

这是代码

```
Dim queryString = "SELECT * FROM cities"
Using connection As New SqlConnection("data source=PCBOX\MSSERVER;initial catalog=MYDB;persist security info=True;user id=ABC;password=123;Connection Timeout=30")
    Dim command As New SqlCommand(queryString, connection)
    connection.Open()
    Dim reader As SqlDataReader = command.ExecuteReader()
    While reader.Read()
        Console.WriteLine(String.Format("{0}, {1}", reader(0), reader(1)))
    End While
End Using
Dim a = New MYDBEntities
Dim b = a.Cities.ToList 
```

现在有一些有趣的笔记：

1.  我什至可以从局域网连接 ssms
2.  当我通过 LAN 从 ssms 连接时，我总是首先在 ssms 中获得超时，并且只有在第二次尝试时它才会立即连接。
3.  只有当我通过代码查询时才会引发异常。同样的例外是通过 sqlconnection 或 EF
4.  Visual Studio 本身与数据库的连接没有问题，因为它显示了 EF 向导并显示了可用的表、创建类等......
5.  我可以在 LAN 上的 ssms 瞬间执行的查询，我很快就得到了 4 行（仅此而已）

问题可能是什么？

我试过：

1.  在配置管理器中启用我可以使用的任何客户端协议
2.  重新启动我认为相关的任何服务（代理、浏览器......）
3.  重新启动整个服务器电脑
4.  更改密码
5.  查看 SQL Server 日志（似乎没有显示任何尝试的连接，尽管我可能看错了地方）
6.  查看 Windows 防火墙日志 (C:\Windows\System32\LogFiles\Firewall\pfirewall.log) 它是空的
7.  在客户端计算机上安装 SQL Server 2012
8.  将连接字符串中的端口设置为 1433（我将两个版本都设置为 1433，可以吗？）。但后来我得到另一个错误

    > 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。连接尝试失败，因为连接方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应。

还有什么可以做的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T21:21:26.027

我发现这个链接看起来很像你的问题。单击[此处](https://serverfault.com/a/195713 "首次尝试 SQL Server 超时") 您可能想尝试打开防火墙上的端口，以防防火墙未记录丢弃的连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T18:13:10.943

由于您在 SQL Server 2008 R2 旁边安装了 SQL Server 2012，因此我会尝试在不使用默认端口的情况下进行连接。

要查找 SQL Server 2012 正在使用的端口，请转到“客户端 11 协议”部分中的 SQL“SQL Server 配置管理器。查看 TCP/IP 协议上的端口属性。

在您的代码中，在实例名称之后添加一个逗号而不是端口号。

```
data source=PCBOX\MSSERVER,1434; 
```

这可能是港口以外的东西。

# hadoop - mahout 在 hadoop 上的 kmeans 聚类错误

> ID：10846163
> 
> 赞同：0
> 
> 时间：2012-06-01T07:27:59.273
> 
> 标签：hadoop, native, mahout

我在hadoop上通过mahout运行kmeans clustering时出错，检查错误日志后，我认为可能是hadoop本机库引起的，但是当我自己重新编译hadoop，然后去运行作业时，它总是扔掉hs_err_pid*.log，其内容如下：strong text

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGFPE (0x8) at pc=0x00002aae75c8168f, pid=30832, tid=1076017472
#
# JRE version: 6.0_29-b11
# Java VM: Java HotSpot(TM) 64-Bit Server VM (20.4-b02 mixed mode linux-amd64 compressed oops)
# Problematic frame:
# C  [ld-linux-x86-64.so.2+0x868f]  double+0xcf
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#

---------------  T H R E A D  ---------------

Current thread (0x0000000040115000):  JavaThread "main" [_thread_in_native, id=30863, stack(0x000000004012b000,0x000000004022c000)]

siginfo:si_signo=SIGFPE: si_errno=0, si_code=1 (FPE_INTDIV), si_addr=0x00002aae75c8168f

Registers:
RAX=0x000000000f4d007f, RBX=0x0000000000000000, RCX=0x0000000040227d00, RDX=0x0000000000000000
RSP=0x0000000040227ba0, RBP=0x0000000040227d40, RSI=0x000000000f4d007f, RDI=0x00002aaab90008f1
R8 =0x00002aaab8e694c0, R9 =0x0000000000000000, R10=0x0000000000000000, R11=0xffffffffffffffff
R12=0x0000000040227d00, R13=0x00002aaab8e69210, R14=0x0000000000000000, R15=0x00002aaab90002c0
RIP=0x00002aae75c8168f, EFLAGS=0x0000000000010246, CSGSFS=0x0000000000000033, ERR=0x0000000000000000
  TRAPNO=0x0000000000000000

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
j  java.lang.ClassLoader$NativeLibrary.load(Ljava/lang/String;)V+0
j  java.lang.ClassLoader.loadLibrary0(Ljava/lang/Class;Ljava/io/File;)Z+300
j  java.lang.ClassLoader.loadLibrary(Ljava/lang/Class;Ljava/lang/String;Z)V+347
j  java.lang.Runtime.loadLibrary0(Ljava/lang/Class;Ljava/lang/String;)V+54
j  java.lang.System.loadLibrary(Ljava/lang/String;)V+7
j  org.apache.hadoop.util.NativeCodeLoader.<clinit>()V+25
v  ~StubRoutines::call_stub
j  org.apache.hadoop.io.compress.zlib.ZlibFactory.<clinit>()V+13
v  ~StubRoutines::call_stub
j  org.apache.hadoop.io.compress.DefaultCodec.getCompressorType()Ljava/lang/Class;+4
j  org.apache.hadoop.io.compress.CodecPool.getCompressor(Lorg/apache/hadoop/io/compress/CompressionCodec;Lorg/apache/hadoop/conf/Configuration;)Lorg/apache/hadoop/io/compress/Comp
ressor;+4
j  org.apache.hadoop.io.compress.CodecPool.getCompressor(Lorg/apache/hadoop/io/compress/CompressionCodec;)Lorg/apache/hadoop/io/compress/Compressor;+2
j  org.apache.hadoop.io.SequenceFile$Writer.init(Lorg/apache/hadoop/fs/Path;Lorg/apache/hadoop/conf/Configuration;Lorg/apache/hadoop/fs/FSDataOutputStream;Ljava/lang/Class;Ljava/l
ang/Class;ZLorg/apache/hadoop/io/compress/CompressionCodec;Lorg/apache/hadoop/io/SequenceFile$Metadata;)V+121
j  org.apache.hadoop.io.SequenceFile$RecordCompressWriter.<init>(Lorg/apache/hadoop/fs/FileSystem;Lorg/apache/hadoop/conf/Configuration;Lorg/apache/hadoop/fs/Path;Ljava/lang/Class
;Ljava/lang/Class;ISJLorg/apache/hadoop/io/compress/CompressionCodec;Lorg/apache/hadoop/util/Progressable;Lorg/apache/hadoop/io/SequenceFile$Metadata;)V+30
j  org.apache.hadoop.io.SequenceFile.createWriter(Lorg/apache/hadoop/fs/FileSystem;Lorg/apache/hadoop/conf/Configuration;Lorg/apache/hadoop/fs/Path;Ljava/lang/Class;Ljava/lang/Cla
ss;ISJLorg/apache/hadoop/io/SequenceFile$CompressionType;Lorg/apache/hadoop/io/compress/CompressionCodec;Lorg/apache/hadoop/util/Progressable;Lorg/apache/hadoop/io/SequenceFile$Me
tadata;)Lorg/apache/hadoop/io/SequenceFile$Writer;+100
j  org.apache.hadoop.io.SequenceFile.createWriter(Lorg/apache/hadoop/fs/FileSystem;Lorg/apache/hadoop/conf/Configuration;Lorg/apache/hadoop/fs/Path;Ljava/lang/Class;Ljava/lang/Cla
ss;Lorg/apache/hadoop/io/SequenceFile$CompressionType;)Lorg/apache/hadoop/io/SequenceFile$Writer;+43
j  org.apache.hadoop.io.SequenceFile.createWriter(Lorg/apache/hadoop/fs/FileSystem;Lorg/apache/hadoop/conf/Configuration;Lorg/apache/hadoop/fs/Path;Ljava/lang/Class;Ljava/lang/Cla
ss;)Lorg/apache/hadoop/io/SequenceFile$Writer;+10
j  org.apache.mahout.clustering.kmeans.RandomSeedGenerator.buildRandom(Lorg/apache/hadoop/conf/Configuration;Lorg/apache/hadoop/fs/Path;Lorg/apache/hadoop/fs/Path;ILorg/apache/mah
out/common/distance/DistanceMeasure;)Lorg/apache/hadoop/fs/Path;+101
j  org.apache.mahout.clustering.kmeans.KMeansDriver.run([Ljava/lang/String;)I+264
j  org.apache.hadoop.util.ToolRunner.run(Lorg/apache/hadoop/conf/Configuration;Lorg/apache/hadoop/util/Tool;[Ljava/lang/String;)I+38
j  org.apache.mahout.clustering.kmeans.KMeansDriver.main([Ljava/lang/String;)V+15
v  ~StubRoutines::call_stub
j  sun.reflect.NativeMethodAccessorImpl.invoke0(Ljava/lang/reflect/Method;Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+0
j  sun.reflect.NativeMethodAccessorImpl.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+87
j  sun.reflect.DelegatingMethodAccessorImpl.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+6
j  java.lang.reflect.Method.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+161
j  org.apache.hadoop.util.RunJar.main([Ljava/lang/String;)V+538
v  ~StubRoutines::call_stub

    Is there anyone can help me or give me some advice?

    xianwu 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T10:05:27.120

这实际上与 Hadoop 或 Mahout 无关。JVM 本身崩溃了。这是 JVM 中的错误，或者是您的 JVM 安装问题。再试一次，和/或重新安装 Java。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T18:04:26.463

我可以帮助你理解这个问题，如下所示：

如果您在堆栈上工作并看到堆栈中使用 Hadoop 库进行的最后一次调用如下所示：

```
org.apache.hadoop.util.NativeCodeLoader 
```

现在，如果您查看[此处](http://grepcode.com/file/repo1.maven.org/maven2/org.jvnet.hudson.hadoop/hadoop-core/0.19.1/org/apache/hadoop/util/NativeCodeLoader.java)的源代码，您将看到代码正在尝试加载 Hadoop 库，如下所示：

```
41   try {
42      System.loadLibrary("hadoop");
43      LOG.info("Loaded the native-hadoop library");
44      nativeCodeLoaded = true;
45    } catch (Throwable t) {
46      // Ignore failure to load
47      LOG.debug("Failed to load native-hadoop with error: " + t);
48      LOG.debug("java.library.path=" + System.getProperty("java.library.path"));
49    } 
```

现在，如果您查看调用堆栈，您将看到 Java 运行时尝试加载库然后发生崩溃的完全相同的事情：

```
Java.lang.ClassLoader$NativeLibrary.load(Ljava/lang/String;)V+0
java.lang.ClassLoader.loadLibrary0(Ljava/lang/Class;Ljava/io/File;)Z+300
java.lang.ClassLoader.loadLibrary(Ljava/lang/Class;Ljava/lang/String;Z)V+347
java.lang.Runtime.loadLibrary0(Ljava/lang/Class;Ljava/lang/String;)V+54
java.lang.System.loadLibrary(Ljava/lang/String;)V+7
org.apache.hadoop.util.NativeCodeLoader.<clinit>()V+25 
```

所以这个问题与 Java 运行时完全相关，你无能为力。您肯定可以记录此错误并继续尝试再次测试您的代码。这样的问题可能会不时发生，您只需继续进行下一个。

# android - 如何在 MapView 上附加自定义地图？[安卓]

> ID：10846168
> 
> 赞同：3
> 
> 时间：2012-06-01T07:28:13.557
> 
> 标签：android, google-maps, android-mapview, customization, overlays

我有一个关于 Mapview 的问题。我有一张小区域的地图（例如：http: [//goo.gl/tKQM6](http://goo.gl/tKQM6)）。

我可以在地图视图中使用此图像吗？如果可能的话，我可以在上面使用叠加层和其他地图视图操作吗？我可以为不同的缩放级别添加不同的图像。

如果谷歌地图无法做到这一点，有没有其他方法可以做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:50:34.770

I have successfully drawn a circule on map. I override the on draw method of **ItemizedOverlay** for this and perform some canvas and paint operations in it. Like that:

```
public class DepartureItemizdOverlay extends ItemizedOverlay { 
.......
......

public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
long when) {  

    Paint paint;      
    paint = new Paint();
    paint.setColor(Color.BLUE);
    paint.setAntiAlias(true);
    float strockWidth = Departure.gpsAccuracy / ACCURACY_width_constant;
        if(strockWidth >= MAX_STROCK_WIDTH)
            strockWidth = MAX_STROCK_WIDTH;
    Projection projection = mapView.getProjection();
    Point point = new Point();
    projection.toPixels(mOverlays.get(GPS_DETECTED_GP_INDEX).getPoint(), point);
    float circleRadius = (float)         (projection.metersToEquatorPixels
    (Departure.MAX_DISTANCE_gps_dep) * (1/
    Math.cos(Math.toRadians(mOverlays.
    get(GPS_DETECTED_GP_INDEX).getPoint().
    getLatitudeE6()/1E6))));

    paint.setStyle(Style.FILL);
    paint.setAlpha(30);
    canvas.drawCircle(point.x, point.y, circleRadius, paint);

    paint.setStyle(Style.STROKE);
    paint.setStrokeWidth(MAX_STROCK_WIDTH);
        paint.setAlpha(100);
    canvas.drawCircle(point.x, point.y, circleRadius, paint);

    mapView.postInvalidate();

    return super.draw(canvas, mapView, shadow, when);  
}

.....

} 
```

# php - 不正确的编码ajax jquery

> ID：10846170
> 
> 赞同：-1
> 
> 时间：2012-06-01T07:28:18.257
> 
> 标签：php, javascript, jquery, ajax

请帮忙。我在 jQuery 上实现了一个函数，它发送数据（JSON 对象），但由于编码问题，我无法得到正确的答案。>>>>>>>>>网站编码：AJAX文件：UTF-8

JS：

```
function loadvariant (hash)
{
var id_quest = $("#sel_quest").val();
var nocache = Math.random();
// Отправляем ajax запроc
  $.ajax({
    type: "POST",
    url: "/wp-content/plugins/votefe/php/ajax/loadvote.php",
    data: {hash:hash,id_quest:id_quest,nocache:nocache},
    dataType: "json"
  }).done(function(msg) {
    if (msg['return']==1) {
        $('#tab_svariant .ovar').remove();
        for (var i=0;i<msg['variant'].length;i++) {
            var html = "<tr class='ovar'><td>"+msg['variant'][i]['id']+"</td>
<td>"+msg['variant'][i]['param']+"</td><td>"+msg['variant'][i]['style']+"</td><td>
<input type=\"checkbox\" name=\"id_variant_"+msg['variant'][i]['id']+"\">
</td></tr>";
            $('#tab_svariant').append(html);
        }       
  return true;
 } else {
  alert(msg['return']+ " - Внутрення ошибка сайта. Попробуйте перезагрузить страницу, или
 обратитесь к разработчикам");
  return false;
    }
  });  
} 
```

PHP：

```
session_start();  
header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");
header("Last-Modified: ".gmdate("D, d M Y H:i:s")." GMT");
header("Cache-Control: no-store, no-cache, must-revalidate");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");
header('Content-Type: application/json; charset=utf-8');
include_once("../voteconf.php");
$results = array();
$results['return'] = 0;
//$results['variant'] = array();

$dbname = "two"; # Имя базы данных
$username = "fedor"; # Имя пользователя в БД
$host = "127.0.0.1"; # Хост MySQL сервера
$passw = "353488"; # Пароль к БД

$link = mysql_connect($host, $username, $passw);
if (!$link) $results['return'] = 2;
$db_selected = mysql_select_db($dbname, $link);
if (!$db_selected) $results['return'] = 3;

# Возвращаемые значения / ошибки
# 0 - Скрипт не отработал
# 1 - return ok (все хорошо)
# 2 - не соединился с базой
# 3 - не смог выбрвть базу.
# 4 - не верный хеш
# 5 - Не удалось получить ID вопроса.
# 6 - Ошибка запроса выборки

$hash = md5(VOTESECR);
if ($hash!=$_POST['hash']) $results['return'] = "4787 > ".$hash." > ".$_POST['hash'];

if (!isset($_POST['id_quest']) || $_POST['id_quest'] =='')  $rezults['return'] = 5;

$id_quest = mysql_real_escape_string(htmlspecialchars($_POST['id_quest']));
if ($results['return'] == 0){
 $sql = "SELECT v.id as id, v.param as param, s.name as style FROM wp_s_variant v LEFT JOIN 
 wp_s_style s ON v.id_style=s.id WHERE v.id_quest= '".$id_quest."'";
 $res_variant = mysql_query($sql);
 if (!$res_variant) $results['return'] = 6;
 else {     
while ($rv = mysql_fetch_assoc($res_variant)) {
    $results['variant'][] = $rv;
}
$results['return'] = 1;     
 }
}

$json=json_encode($results);
echo $json; 
```

html

```
<table id="tab_svariant">
  <tr>
    <th width="30px">ID</th>
    <th width="300px">Вариант ответа</th>
    <th width="400px">Стиль</th>
    <th width="60px">Выбрать</th>       
 </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:18:49.040

尝试在 jQuery.ajax 的选项中输入“contentType”：

```
$.ajax({
  type: "POST",
  url: "/php/ajax/loadvote.php",
  data: {id_vote:id_vote,nocache:nocache},
  dataType: "json",
  contentType: "utf-8"
}).done(function(msg) { 
```

# javascript - PIE.js 性能低下

> ID：10846171
> 
> 赞同：1
> 
> 时间：2012-06-01T07:28:28.977
> 
> 标签：javascript, css, internet-explorer, css3pie

我目前正在开发一个用于自动 PIE 附件的插件。
它遍历所有文档 CSS 样式表，通过 indexOf 检查 CSS3 属性，然后调用 PIE attach 方法以防找到当前选择器的任何内容。
主循环是这样的：

```
 for (var j = 0, length2 = styleSheet.rules.length; j < length2; j++) {
      rule = styleSheet.rules[j];
      // the replacedProperties is a simple array
      // with string values for css properties - border-radius and so on
        $.each(replacedProperties, function(index, property) {
            if (rule.style.cssText.indexOf(property) !== -1) {
                try {
                    $(rule.selectorText).each(function() {
                       PIE.attach(this);
                    });

                 } catch(e) { }
                    return false;
                 }
            }

        });
    } 
```

这实际上很慢，在 IE8 和 IE7 中的 CSS3 重页上运行长达 2 秒。
问题是，我能以某种方式提高这个循环的性能吗？
PIE.js 实际上优化了重复附件，因此检查 PIE 是否已附加不会做任何事情。
遗憾的是，$.fn.detach 的标准分离技术不适用于 PIE（尽管我没有尝试过香草版本）。
我将非常感谢任何答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:38:36.310

我建议您阅读文档，尤其是关于 pie.js：[http ://css3pie.com/documentation/pie-js/](http://css3pie.com/documentation/pie-js/)

现在我使用`pie.htc`它，除了有一些缺点之外，它还有更多的优点，所以这是首选的解决方案。

您可以定义哪些样式应直接在 css 中处理 - 通过声明`behaviour(/absolute-path-to-pie.htc);`. 这比迭代所有样式表和样式规则然后附加饼图要快得多。您也可以轻松地将其放入条件样式表中。我认为这应该可以解决您的问题 - 无需手动迭代所有样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-12T14:13:00.180

这里是 PIE 的忠实粉丝。但是，在性能方面，成本比人们想象的要大。最近一直在一个怪物PC上开发一个网站，可以说，运行带有IE8的Windows7和一些用于测试的VM。测试了 PIE 1.0 和 PIE 2.0 beta。虽然在项目早期，并且只有几十个元素附加了 PIE 行为，但 IE 似乎在向下滚动以及使用 jQueryUI 效果和动画时会卡住。使用 pie 2.0，关闭民意调查似乎可以提高性能，但首先会破坏使用 pie 的目的……您可以获得所需的视觉外观，但没有任何效果。最后，需要考虑客户端的性能成本。2010 年，Google 报告说几乎 48% 的网络客户端使用 IE，主要是 IE7(winXP)。尽管此后数字发生了很大变化，但有些人根本没有升级的手段。所有的事情放在一起，通过 PIE 提供 css3 内容可能会对客户产生很大的影响......不知道 100% 它将如何表现，您的客户在访问您的网站之前可能会三思而后行，因为它的表现并不顺畅（我知道我会）。所以，至少对于这个项目。我正在放弃 PIE，并恢复到良好的旧 PNG。到目前为止，包含我需要用渐变和圆角设置样式的元素的精灵比 PIE 小。毫无疑问，它会变大，但不会像以前那样影响性能。只是为了记录，我不知道浏览器是如何构建的，我也不在乎，但是伙计……他们用 IE 把它搞砸了。通过 PIE 提供 css3 内容可能会对客户产生重大影响……不知道 100% 会如何表现，您的客户在访问您的网站之前可能会三思而后行，因为它的表现并不顺畅（我知道我会）。所以，至少对于这个项目。我正在放弃 PIE，并恢复到良好的旧 PNG。到目前为止，包含我需要用渐变和圆角设置样式的元素的精灵比 PIE 小。毫无疑问，它会变大，但不会像以前那样影响性能。只是为了记录，我不知道浏览器是如何构建的，我也不在乎，但是伙计……他们用 IE 把它搞砸了。通过 PIE 提供 css3 内容可能会对客户产生重大影响……不知道 100% 会如何表现，您的客户在访问您的网站之前可能会三思而后行，因为它的表现并不顺畅（我知道我会）。所以，至少对于这个项目。我正在放弃 PIE，并恢复到良好的旧 PNG。到目前为止，包含我需要用渐变和圆角设置样式的元素的精灵比 PIE 小。毫无疑问，它会变大，但不会像以前那样影响性能。只是为了记录，我不知道浏览器是如何构建的，我也不在乎，但是伙计……他们用 IE 把它搞砸了。至少对于这个项目。我正在放弃 PIE，并恢复到良好的旧 PNG。到目前为止，包含我需要用渐变和圆角设置样式的元素的精灵比 PIE 小。毫无疑问，它会变大，但不会像以前那样影响性能。只是为了记录，我不知道浏览器是如何构建的，我也不在乎，但是伙计……他们用 IE 把它搞砸了。至少对于这个项目。我正在放弃 PIE，并恢复到良好的旧 PNG。到目前为止，包含我需要用渐变和圆角设置样式的元素的精灵比 PIE 小。毫无疑问，它会变大，但不会像以前那样影响性能。只是为了记录，我不知道浏览器是如何构建的，我也不在乎，但是伙计……他们用 IE 把它搞砸了。

# asp.net-mvc-3 - 如何使用 asp.net MVC 防止 URL 在 kendo 移动 UI 应用程序中附加当前 URL

> ID：10846174
> 
> 赞同：0
> 
> 时间：2012-06-01T07:28:39.810
> 
> 标签：asp.net-mvc-3, url, kendo-ui

我在 asp.net MVC3 中使用 kendo Mobile UI 的试用版创建了一个移动应用程序。在这里，我面临一个问题，即每当我单击任何锚标记/按钮时，其 url 都会附加当前页面的 url。例如：**www.testkendoui.c​​om /CurrentPage_Controller/CurrentPage_Action#/www.testkendoui.c​​om/NextPage_Controller/NextPage_Action**

这会导致下一页不起作用，刷新下一页后它会起作用。

我尝试过： 1.) data-ajax="false" 在所有锚标签和表单上。2.）在主 URL 中添加“http://”，但这一切都不起作用。

任何建议将不胜感激.. :)

提前致谢 ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:55:10.597

在您想要进行完整回发的任何链接/按钮上，您需要将 data-rel 属性设置为外部。

IE：

```
<a href="/logoff" data-ajax="false" rel="external" data-rel="external" data-role="button" data-align="right" >Log Off</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T17:29:40.017

尝试以下操作：

kendoui 需要 url 的地方使用以下内容（假设您使用的是 Razor）：

```
$('someitem').kendoXYZ({
     url: "@Url.Action("MVC Action", "MVC Controller")"
} 
```

请注意 @Url.Action 周围的引号很重要。

希望这可以帮助！

# ssis - 如何增加要查找的数据流量

> ID：10846177
> 
> 赞同：2
> 
> 时间：2012-06-01T07:28:47.783
> 
> 标签：ssis

在我的包中，我有一个包含大约 120000 条记录的源表和一个没有缓存模式的查找转换和一个目标表。我将与目标不匹配的源中的数据传递到同一个目标表中。当我执行包时，我可以看到这一点，一次只有 9000 条记录只移动到查找。一旦它插入目标，其他 9000 条记录移动到查找并继续。这只有 9000 条记录的原因是什么？我尝试通过将 defaultbuffermaxrows 和 defaultbuffersize 更改为不同的值，但 9000 条记录一次只能移动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T07:47:59.130

在 OLEDB 目的地，我们有一个属性`ROWS PER BATCH`。您可以使用它来更改每批传输的行数。

在这里，您看到 9000 条记录 movinf 导致默认最大行数为 10,000。

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms141031.aspx)

> 通过设置 DefaultBufferSize 属性定义任务使用的缓冲区的默认大小，并通过设置 DefaultBufferMaxRows 属性定义每个缓冲区中的最大行数。默认缓冲区大小为 10 兆字节，最大缓冲区大小为 100 兆字节。默认的最大行数为 10,000。

**编辑（根据您的评论）：**

它不起作用，因为您已将`cache`选项设置为`lookup`as `no cache`。要使其插入/流动所需的行或自定义行（> 默认行），请按照以下说明进行操作。

*   在您的查找设置中，使`cache mode`to `Full cache`。
*   在查找使用`OLEDB Connection manager`.
*   在`OLEDB Destination`设置`ROWS PER BATCH`如上所述。
*   在 DataFlow 属性中，将 设置`Default BufferMaxRow`为您想要的行。

会正常工作。

# asp.net-mvc-3 - 在 asp.net mvc 3 中未命中发布操作

> ID：10846180
> 
> 赞同：0
> 
> 时间：2012-06-01T07:28:53.713
> 
> 标签：asp.net-mvc-3, c#-4.0

单击名为“保存”的按钮时未命中注册操作？：

```
http://localhost/Account/RegisterPlayer 
```

控制器：

```
 public ActionResult RegisterPlayer()
        {
            return View();
        }

        [HttpPost]
        public ActionResult RegisterPlayer(Player player)
        {
            //it does not hit this action : (
            if (ModelState.IsValid)
            {

            }

            return View(player);
        } 
```

注册播放器.cshtml

```
@model mystuff.Models.Player

@{
    ViewBag.Title = "RegisterPlayer";
}

<h2>RegisterPlayer</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Player</legend>

        @Html.HiddenFor(model => model.id)

        <div class="editor-label">
            @Html.LabelFor(model => model.firstname)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.firstname)
            @Html.ValidationMessageFor(model => model.firstname)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.email)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.email)
            @Html.ValidationMessageFor(model => model.email)
        </div>

        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

玩家等级：

```
 public class Player
    {
        public int id { get; set; }
        public string firstname { get; set; }
        public string email { get; set; }

    } 
```

全球.asax

```
 public class MvcApplication : System.Web.HttpApplication
    {
        public static void RegisterGlobalFilters(GlobalFilterCollection filters)
        {
            filters.Add(new HandleErrorAttribute());
        }

        public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            );

        }

        protected void Application_Start()
        {
            AreaRegistration.RegisterAllAreas();

            RegisterGlobalFilters(GlobalFilters.Filters);
            RegisterRoutes(RouteTable.Routes);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:35:05.603

您没有将任何玩家对象发送到您的视图。你需要这样的东西：

```
 public ActionResult RegisterPlayer()
        {
            Player player=new Player();
            return View(player);
        } 
```

我还建议您使用调试器查看它崩溃的位置。这显然是一个数据传输问题。如果您不知道如何使用调试器访问视图，请使用 F11 浏览它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:37:02.340

我认为问题在于您的`value`与`input`您需要的操作不匹配。

试试这个：

```
<input type="submit" value="RegisterPlayer" /> 
```

# multithreading - 操作系统调度程序如何调度属于两个不同进程（任务）的线程？

> ID：10846181
> 
> 赞同：7
> 
> 时间：2012-06-01T07:28:55.930
> 
> 标签：multithreading, operating-system, scheduling, multitasking

就所有书籍而言，在任务/进程之间切换比在同一进程/任务的线程之间切换更昂贵。如果是这样，那么线程感知操作系统的调度程序应该以这样的方式调度线程，即同一进程/任务的线程应该彼此相邻（分组）执行，而不是与来自其他进程/任务的线程交错。

当我阅读有关操作系统的书籍时，所有书籍都只是说线程切换比进程切换便宜。就是这样。没有书告诉调度器如何准确地解决避免在不同任务的线程之间切换的问题。好像这样的问题不存在，或者对每个读者来说都是微不足道的。

我对问题的理解不正确吗？还是我错过了什么？为什么“调度”一章的每一本操作系统书籍都没有涵盖如此巨大的性能下降主题？我读错书了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T10:40:33.200

在我看来，这将是一个危险的优化，因为如果调度程序根据进程内存页面是否已经加载而偏爱线程，则会发生两种情况：

1.  较新的进程将被饿死。
2.  它将允许进程继续生成线程以留在 CPU 上。

调度程序的主要优先级是：

1.  I/O 响应能力 - 即 I/O 绑定线程抢占 CPU 绑定线程。
2.  公平——尽量确保饥饿是有限的。
3.  低延迟 - 确保每个进程都可以在合理的时间内完成。

很容易看出这 3 个条件与上述优化相冲突。

# java - 错误“java.lang.NoSuchMethodError：org.jboss.logging.Logger.getMessageLogger”

> ID：10846184
> 
> 赞同：13
> 
> 时间：2012-06-01T07:29:09.913
> 
> 标签：java, hibernate, logging, jboss, nosuchmethoderror

我正在尝试使用 spring + hibernate 构建 1 个混合测试项目。部署后......我对这个错误感到沮丧......并在谷歌搜索但仍然无法正常工作......

```
Caused by: java.lang.NoSuchMethodError: org.jboss.logging.Logger.getMessageLogger(Ljava/lang/Class;Ljava/lang/String;)Ljava/lang/Object;
at org.hibernate.annotations.common.util.impl.LoggerFactory.make(LoggerFactory.java:34)
at org.hibernate.annotations.common.Version.<clinit>(Version.java:34)
at org.hibernate.annotations.common.reflection.java.JavaReflectionManager.<clinit>(JavaReflectionManager.java:73)
at org.hibernate.cfg.AnnotationConfiguration.reset(AnnotationConfiguration.java:311)
at org.hibernate.cfg.Configuration.<init>(Configuration.java:216)
at org.hibernate.cfg.Configuration.<init>(Configuration.java:220)
at org.hibernate.cfg.AnnotationConfiguration.<init>(AnnotationConfiguration.java:168) 
```

试用jboss-logger 3.1.0.CR2，以及各种不同的jboss-logging，不同的版本。

如何解决？

下面是附加的图像，以查看是否存在任何版本并发或缺少任何依赖项... ![项目的库结构](../Images/f1d06036dd7c6fae7a9312f19fed7c96.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-01T12:57:42.967

我通过删除解决了它`jboss-common-client-3.2.3.jar`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-01-08T14:10:44.203

Springframework 4.1.3 Final 所需的 org.jboss.logging-3.1.0.GA 遇到了同样的问题。

我的解决方案是排除来自 Hibernate 的 org.jboss.logging，并将 org.jboss.logging-3.2.0.Final 添加到我的 pom.xml 项目中。如[在此处](https://issues.jboss.org/browse/JBLOGGING-70)指定org.jboss.logging-3.1.0.GA（和 CR2）在 LoggerProviders 检测中失败，它已在 3.2.0 Final [Voir le Github de Jboss Logging中修复](https://github.com/jboss-logging/jboss-logging/commit/787577b1d42f49ba464fc11c2ac5fd307dfdccb0)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-01T08:02:35.697

客户端类路径上的 JBoss Logging jar 版本是否不正确？如果您有 JBoss 7.1.0 最终版本，则从您的类路径中删除所有 JAR 文件并仅添加一个位于 AS7_HOME/bin/client 中的客户端 JAR 文件 (jboss-client-7.1.0.Final.jar)。

如需进一步参考，您可以查看[此](http://theopentutorials.com/examples/java-ee/ejb3/how-to-create-a-simple-ejb3-project-in-eclipse-jboss-7-1/)内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-24T08:56:50.730

我遇到了同样的问题。我从 buildpath 中删除了 glassfish 库，问题解决了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-14T15:00:10.883

我对**jboss-4.2.3GA**有同样的问题。

发生这种情况是因为在**[JBOSS_HOME]\lib**文件夹中有一个**jboss-common.jar**库，它也有一个`org.jboss.logging.Logger`类，这是考虑到的。

我的解决方案是将**jboss-logging-3.3.0.Final.jar**库添加到**[JBOSS_HOME]\lib\endorsed**文件夹，并考虑到在启动服务器时它具有选项`-Djava.endorsed.dirs = [JBOSS_HOME]\lib\endorsed`.

在此之后，它开始显示来自java.lang.NoSuchMethodError 的***警告******：org.jboss.logging.Logger.getLoggerPlugin()Lorg/jboss/logging/LoggerPlugin;***

……但那是另一回事。

# python - 如何将“stdout”重定向到标签小部件？

> ID：10846193
> 
> 赞同：5
> 
> 时间：2012-06-01T07:29:45.620
> 
> 标签：python, tkinter, label, stdout

我正在尝试将标准输出重定向到标签小部件。目标是将我脚本中的所有 Python 打印“打印”到标签中。

但是当我点击`BUTTON1`什么都没有发生...

这是我的代码：

```
from Tkinter import *
import sys
import tkMessageBox

class App:

    def __init__(self, master):

        self.frame = Frame(master, borderwidth=5, relief=RIDGE)
        self.frame.grid()

        class IORedirector(object):
            def __init__(self,TEXT_INFO):
                self.TEXT_INFO = TEXT_INFO

        class StdoutRedirector(IORedirector):
            def write(self,str):
                self.TEXT_INFO.config(text=str)

        self.TEXT_HEADER = self.text_intro = Label(self.frame, bg="lightblue",text="MY SUPER PROGRAMM") ## HEADER TEXT
        self.TEXT_HEADER.grid(row=0, column=0, columnspan=2, sticky=W+E+N+S)

        self.MENU = Frame(self.frame, borderwidth=5, relief=RIDGE, height=12) 

        self.MENU.grid(row=1, column=0, sticky=N)

        self.button = Button(self.MENU, text="QUIT", fg="red", bg="red", command=self.frame.quit)
        self.button.grid(row=4, column=0)

        self.BUTTON1 = Button(self.MENU, text="BUTTON1", command=self.BUTTON1_CMD)
        self.BUTTON1.grid(row=0, column=0,sticky=W+E)

        self.TEXT_INFO = Label(self.frame, height=12, width=40, text="I WANT TO SEE THE STDOUT OUTPUT HERE", bg="grey",borderwidth=5, relief=RIDGE)
        self.TEXT_INFO.grid(row=1, column=1)

        sys.stdout = StdoutRedirector(self.TEXT_INFO)

    def BUTTON1_CMD(self):
        print "TEST NUMBER ONE"
        print "TEST NUMBER TWO"

root = Tk()
app = App(root)
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T08:37:56.167

您看不到文本集的原因是它在瞬间正确设置，然后立即设置为空白。这是因为 print 在 print 语句之后向 stdout 发送换行符。这是一个修改后的版本，它附加到标签上，而不是为每个打印语句覆盖它。

```
 class StdoutRedirector(IORedirector):
        def write(self,str):
           self.TEXT_INFO.config(text=self.TEXT_INFO.cget('text') + str) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-09T11:37:49.380

我创建了一个类，它将标准输出写入调用复制到 tkinter 小部件，无论是标签还是文本。在 Python3.3.1/WindowsXp 上为我工作：

```
import sys

class StdoutToWidget:
    '''
    Retrieves sys.stdout and show write calls also in a tkinter
    widget. It accepts widgets which have a "text" config and defines
    their width and height in characters. It also accepts Text widgets.
    Use stop() to stop retrieving.

    You can manage output height by using the keyword argument. By default
    the class tries to get widget\'s height configuration and use that. If
    that fails it sets self.height to None which you can also do manually.
    In this case the output will not be trimmed. However if you do not
    manage your widget, it can grow vertically hard by getting more and
    more inputs.
    '''

    # Inspired by Jesse Harris and Stathis
    # http://stackoverflow.com/a/10846997/2334951
    # http://stackoverflow.com/q/14710529/2334951

    # TODO: horizontal wrapping
    #       make it a widget decorator (if possible)
    #       height management for Text widget mode

    def __init__(self, widget, height='default', width='default'):
        self._content = []
        self.defstdout = sys.stdout
        self.widget = widget

        if height == 'default':
            try:
                self.height = widget.cget('height')
            except:
                self.height = None
        else:
            self.height = height
        if width == 'default':
            try:
                self.width = widget.cget('width')
            except:
                self.width = None
        else:
            self.width = width   

    def flush(self):
        '''
        Frame sys.stdout's flush method.
        '''
        self.defstdout.flush()

    def write(self, string, end=None):
        '''
        Frame sys.stdout's write method. This method puts the input
        strings to the widget.
        '''

        if string is not None:
            self.defstdout.write(string)
            try:
                last_line_last_char = self._content[-1][-1]
            except IndexError:
                last_line_last_char = '\n'
            else:
                if last_line_last_char == '\n':
                    self._content[-1] = self._content[-1][:-1]

            if last_line_last_char != '\n' and string.startswith('\r'):
                self._content[-1] = string[1:]
            elif last_line_last_char != '\n':
                self._content[-1] += string
            elif last_line_last_char == '\n' and string.startswith('\r'):
                self._content.append(string[1:])
            else:
                self._content.append(string)

        if hasattr(self.widget, 'insert') and hasattr(self.widget, 'see'):
            self._write_to_textwidget()
        else:
            self._write_to_regularwidget(end)

    def _write_to_regularwidget(self, end):
        if self.height is None:
            self.widget.config(text='\n'.join(self.content))
        else:
            if not end:
                content = '\n'.join(self.content[-self.height:])
            else:
                content = '\n'.join(self.content[-self.height+end:end])
            self.widget.config(text=content)

    def _write_to_textwidget(self):
        self.widget.insert('end', '\n'.join(self.content))
        self.widget.see('end')        

    def start(self):
        '''
        Starts retrieving.
        '''
        sys.stdout = self

    def stop(self):
        '''
        Stops retrieving.
        '''
        sys.stdout = self.defstdout

    @property
    def content(self):
        c = []
        for li in self._content:
            c.extend(li.split('\n'))

        if not self.width:
            return c
        else:
            result = []
            for li in c:
                while len(li) > self.width:
                    result.append(li[:self.width])
                    li = li[self.width:]
                result.append(li)
            return result

    @content.setter
    def content(self, string):
        self._content = string.split('\n')

    @property
    def errors(self):
        return self.defstdout.errors

    @property
    def encoding(self):
        return self.defstdout.encoding 
```

EDIT1：我收到了反对票，所以这是更新的。我在 Label 小部件中使用它，并且 print() 函数在我的小部件中顺利显示。此外，如果我将 None 传递给 write 调用并假设 -1 作为结束参数，作为一个额外的功能，那么它不会显示最后一行（小心索引）。我使用它是因为我在小部件上附加了一个滑块。我将很快发布一个演示。

# c# - 混淆代码与？操作员

> ID：10846194
> 
> 赞同：3
> 
> 时间：2012-06-01T07:29:46.940
> 
> 标签：c#

我正在阅读某人的旧代码，发现这一行：

```
 menuItem.Checked = (menuItem.Checked == false) ? true : false; 
```

我不明白它的作用和方式。有什么帮助吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-01T07:32:28.100

这是一种复杂的编写方式：

```
menuItem.Checked = !menuItem.Checked; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T07:30:46.170

你的说法意味着：

```
if(menuItem.Checked == false)
    menuItem.Checked = true;
else 
    menuItem.Checked = false; 
```

您的声明实际上是对`menuItem`. 如果是，`Checked`则语句​​将其设置为`UnChecked`，反之亦然

来自 MSDN [?：运算符（C# 参考）](http://msdn.microsoft.com/en-us/library/ty67wk28.aspx)

> 条件运算符 (?:) 根据布尔表达式的值返回两个值之一。以下是条件 operator.m 的语法

```
condition ? first_expression : second_expression; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-01T07:34:31.480

看一下[条件运算符：**? :**](http://msdn.microsoft.com/en-us/library/ty67wk28%28v=vs.80%29.aspx)
这意味着：

```
if(menuItem.Checked == false)
{
   menuItem.Checked = true;
}
else
{ 
   menuItem.Checked = false;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-01T07:33:05.313

这可以用以下代码替换：

```
menuItem.Checked = !menuItem.Checked; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-01T07:33:08.980

这相当于：

```
 menuItem.Checked = !menuItem.Checked; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-01T07:33:25.623

它被称为三元运算符，简单的 Google 搜索提供了有关其工作原理和可能性的大量信息。

看看：[https ://www.google.com/search?q=Ternary+Operators+c%23](https://www.google.com/search?q=Ternary+Operators+c%23)

正如人们已经指出的那样，这只是编写简单 if 语句的一种更短、更简单的方法。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-01T07:32:25.640

这是关于它的 MSDN 文章。它具有其他有用运算符的链接：http: [//msdn.microsoft.com/en-us/library/ty67wk28.aspx](http://msdn.microsoft.com/en-us/library/ty67wk28.aspx)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-01T07:31:49.610

它被称为三元运算符。它像 if else 语句一样使用，但更简洁。它被称为三元，因为它需要三个操作数。它评估第一个，然后如果为真则选择第二个，如果为假则选择第三个。

# magento - Magento：如何使用类别获取完整的产品 URL

> ID：10846195
> 
> 赞同：0
> 
> 时间：2012-06-01T07:29:57.760
> 
> 标签：magento

我正在尝试找到一种解决方案，以确保 Magento 始终显示每个产品的完整 URL，包括类别路径。我希望完整的网址也出现在搜索结果中。为此，我将每种产品都归为一类。

这可以通过magento通过Url Rewrite custom来完成吗？使用 .htaccess 将 /product.html 重定向到 category/subcategory/product.html 的 301 重定向是个好主意吗？

谢谢穆迪

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T09:01:36.943

我们在产品 url 中获取完整类别的方法是使用一个帮助程序，它会尝试为您获取包含该类别的产品 URL。你也可以重写 product 方法，但是每当另一个模块重写一些产品的东西时，它会很痛苦，这就是我们使用 helper 方法的原因。

这是我们的方法：

```
public static function getFullUrl (Mage_Catalog_Model_Product $product , 
        Mage_Catalog_Model_Category $category = null , 
        $mustBeIncludedInNavigation = true ){

    // Try to find url matching provided category
    if( $category != null){
        // Category is no match then we'll try to find some other category later
        if( !in_array($product->getId() , $category->getProductCollection()->getAllIds() ) 
                ||  !self::isCategoryAcceptable($category , $mustBeIncludedInNavigation )){
            $category = null;
        }
    }
    if ($category == null) {
        if( is_null($product->getCategoryIds() )){
            return $product->getProductUrl();
        }
        $catCount = 0;
        $productCategories = $product->getCategoryIds();
        // Go through all product's categories
        while( $catCount < count($productCategories) && $category == null ) {
            $tmpCategory = Mage::getModel('catalog/category')->load($productCategories[$catCount]);
            // See if category fits (active, url key, included in menu)
            if ( !self::isCategoryAcceptable($tmpCategory , $mustBeIncludedInNavigation ) ) {
                $catCount++;
            }else{
                $category = Mage::getModel('catalog/category')->load($productCategories[$catCount]);
            }
        }
    }
    $url = (!is_null( $product->getUrlPath($category))) ?  Mage::getBaseUrl() . $product->getUrlPath($category) : $product->getProductUrl();
    return $url;
}

/**
 * Checks if a category matches criteria: active && url_key not null && included in menu if it has to
 */
protected static function isCategoryAcceptable(Mage_Catalog_Model_Category $category = null, $mustBeIncludedInNavigation = true){
    if( !$category->getIsActive() || is_null( $category->getUrlKey() )
        || ( $mustBeIncludedInNavigation && !$category->getIncludeInMenu()) ){
        return false;
    }
    return true;
} 
```

如果指定了一个类别，它会尝试获取与该类别相关的 url。

如果未指定类别或找不到提供的 url，则该方法尝试获取与产品附加到的第一个类别相关的产品 URL，并检查它是否可接受（活动，带有 url 键和匹配导航标准）。

最后，如果它回退到原始的`$product->getProductUrl()`Magento 方法。

您必须通过以下调用在模板（类别、购物车产品、最近查看的等等）中使用它：

```
echo $this->helper('yourcompany/yourmodule')::getFullProductUrl($_product); 
```

**编辑：**

我考虑了 Zachary 的评论，并通过添加一些检查和选项对其进行了一些调整。希望现在很酷。例子 ：

```
echo $this->helper('yourcompany/yourmodule')::getFullProductUrl($_product, $aCategory); 
```

将尝试在 $aCategory 中查找产品 url，然后回退到其他类别 url，最后是产品基础 url

```
echo $this->helper('yourcompany/yourmodule')::getFullProductUrl($_product, someCategory, false); 
```

还将考虑未包含在导航中的类别。

# iphone - 将参数发送到 JSON 类型 URL 的代码如何？

> ID：10846196
> 
> 赞同：0
> 
> 时间：2012-06-01T07:30:06.960
> 
> 标签：iphone, ios5

大家好，我收到了如下 URL 的响应，但我必须将 NSString 类型参数传递给我所需的 URL，如下所示，用于向 iPhone 中的 URL 发送请求的代码如何？所以请给我任何一个我的要求。

# 定义 kLatestKivaLoansURL [NSURL URLWithString:@"http://eventappmobiledev.cloudapp.net/EventDataService.svc/GetTechnologies?APIKey=62CB769C-E17E-484E-BE51-C144D062D076"]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:34:09.800

检查所有类型的请求的 ASIHTTPRequest

# jquery - jQuery 在图像地图区域上拖放

> ID：10846201
> 
> 赞同：2
> 
> 时间：2012-06-01T07:30:35.667
> 
> 标签：jquery

我正在使用 jquery 拖放功能。现在我只想删除图像地图区域。如果光标落在图像地图之外，则可拖动区域应返回 false。请任何人帮助我。

以下是我的编码

$j(函数 () {

```
 $j("#draggable").draggable({

            revert: function (dropped) {
                var $jdraggable = $j(this),
             hasBeenDroppedBefore = $jdraggable.data('hasBeenDropped'),
            wasJustDropped = dropped && dropped[0].id == 'treearea';

                alert(wasJustDropped);
                if (wasJustDropped) {
                    //centering with css
                    centerPopup();
                    //load popup
                    loadsharePopup();
                    return false;
                } else {
                    if (hasBeenDroppedBefore) {

                        return true;

                    } else {

                        return true;
                    }
                }
            }
        });

        $j("img#tree").droppable({
            activeClass: 'ui-state-hover',
            hoverClass: 'ui-state-active',
            drop: function (event, ui) {
                //var Stoppos = $j(this).position();
                //alert("STOP: \nLeft: "+ Stoppos.left + "\nTop: " + Stoppos.top);
               var newPosX = ui.offset.left - $j(this).offset().left;
               var newPosY = ui.offset.top - $j(this).offset().top;
              //  alert($j(this).offset().left);
              $j("#txtPosX").val(newPosX);
              $j("#txtPosY").val(newPosY);
                //alert("STOP: \nLeft: "+ newPosX + "\nTop: " + newPosY);
              $j(this).addClass('ui-state-highlight').find('p').html('Dropped!');
              $j(ui.draggable).data('hasBeenDropped', true);
            }
        });

    }); 
```

# php - php验证码代码不起作用

> ID：10846203
> 
> 赞同：0
> 
> 时间：2012-06-01T07:30:42.737
> 
> 标签：php, forms, validation

我正在使用一个旧的 random() 函数为我在网上找到的 AJAX 评论系统创建验证代码（源代码位于[LINK](http://tutorialzine.com/2010/06/simple-ajax-commenting-system/ "关联")）。

背后的想法很简单：

```
 function Random()
{
$chars = "ABCDEFGHJKLMNPQRSTUVWZYZ23456789";
srand((double)microtime()*1000000);
$i = 0;
$pass = '' ;
while ($i <= 4)
{
$num = rand() % 32;
$tmp = substr($chars, $num, 1);
$pass = $pass . $tmp;
$i++;
}
return $pass;
}
$random_code = Random(); 
```

然后在表单中，就在提交按钮之前：

```
<label for="security_code">Enter this captcha code: <b><? echo $random_code; ?></b></label>
<input type="text" name="security_code" id="security_code" />

<input name="randomness" type="hidden" id="randomness" value="<?php $random_code; ?>"> 
```

我的 AJAX 评论系统使用类似这样的东西来检查字段是否为空白（即，如果有任何错误）：

```
$errors = array();
$data= array();
[...]

if(!($data['name'] = filter_input(INPUT_POST,'name',FILTER_CALLBACK,array('options'=>'Comment::validate_text'))))
{
$errors['name'] = 'Please enter a name.';
}

if(!empty($errors)){
[...]
} 
```

所以我写了这个：

```
if(!($data['security_code'] = filter_input(INPUT_POST,'security_code',FILTER_CALLBACK,array('options'=>'Comment::validate_text'))))
{
$errors['security_code'] = 'You did not enter the validation code.';
}
elseif(!($data['security_code'] = $randomness))
{
$errors['security_code'] = 'You entered the validation code incorrectly. Please note that it is case sensitive.';
} 
```

[但是，当我在验证码文本字段中插入随机文本（在LINK](http://www.flapane.com/guestbook/guestbook.php "这个链接")自行测试）后单击提交按钮时，我总是得到“您输入的验证码不正确”。信息。

print_r($_POST) 给出一个空数组，然后在我单击提交后脚本挂起： Array ( )

我错过了什么？原始验证码在验证过程中的某个时间点（第 3 和第 4 块代码）丢失。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:25:23.670

[在这里](http://pastebin.com/WR2kAV0G)看到您的代码后，我看到静态函数 validate 不知道该变量`$randomness`！在您的 submit.php 中，您正在进行以下调用：

`$arr = array();
$validates = Comment::validate($arr);`

该函数`validate`对变量一无所知，`$randomness`除非您将这样的东西传递给它 - 它在不同的范围内。

尝试修改上述代码：

```
 $arr = array(); // no change here  

    $randomness = isset($_POST['randomness']) ? $_POST['randomness'] : '';   
    // Check for empty randomness before you validate it in Comment::validate
    // so that you donot verify for '' == '' there. 

    $validates = Comment::validate($arr, $randomness); 
```

并按如下方式更改验证功能：

```
 public static function validate(&$arr, $randomness)
    { 
```

我知道这不是一个优雅的解决方案 - 这需要你自己学习的更多东西，这只是向你展示方式......
让我知道它是如何进行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:57:35.763

代替：

```
<input name="randomness" type="hidden" id="randomness" value="<?php $random_code; ?>"> 
```

写：

```
<input name="randomness" type="hidden" id="randomness" value="<?php echo $random_code; ?>"> 
```

也代替：

```
elseif(!($data['security_code'] = $randomness))
{
$errors['security_code'] = 'You entered the validation code incorrectly. Please note that it is case sensitive.';
} 
```

也许是这样：

```
elseif($data['security_code'] != $randomness) {
   $errors['security_code'] = 'You entered the validation code incorrectly. Please note that it is case sensitive.';
} 
```

另外，从哪里`$data`得到它的值？**$_POST, $_GET**？ `print_r()`它也`$_REQUEST`点亮。

# html - ie7 input type=file 可以输入文字输入

> ID：10846205
> 
> 赞同：0
> 
> 时间：2012-06-01T07:30:56.313
> 
> 标签：html, internet-explorer-7

我有一个奇怪的问题，在 ie7 中输入 type=file，文本框可以接受文本输入，不像 firefox，它会自动启动文件浏览器，在 chrome 中你真的必须点击浏览按钮来浏览要上传的文件。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T10:56:59.277

早期的浏览器通常允许用户在 input type=file control 的框中输入文件名，但现在已经很少见了。这可能与假定的安全问题有关。但是这样的输入并不是特别有用，尤其是现在人们使用描述性的长文件名时。

所以这很正常。您应该期望浏览器通过文件选择窗口实现输入类型=文件。但是允许文本输入没有错误，只是一个旧功能；没有关于实现细节的规范（由于系统差异，它们需要有所不同）。

# google-sheets - 有没有办法将文档附加到 Google 表格？

> ID：10846207
> 
> 赞同：3
> 
> 时间：2012-06-01T07:31:12.380
> 
> 标签：google-sheets

我正在尝试使用 Google 表格管理一组文档。

我尝试过像 Evernote 这样的服务，但我更喜欢以表格形式显示这些文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T15:37:44.407

如果文档是 Google 文档，您可以在工作表中附上 Google 文档的互联网地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T13:08:46.913

附加是什么意思？我的意思是，你期望什么行为？

无论如何，我认为唯一的方法是上传此文档，如果它还不是在线文档，您希望附加到在线可访问的某个地方，例如您的 Google 文档，然后将文档链接放在单元格上。

# c# - 从内容页面中的更新面板更新母版页的内容

> ID：10846209
> 
> 赞同：0
> 
> 时间：2012-06-01T07:31:15.097
> 
> 标签：c#, asp.net, ajax, updatepanel

我需要更新主页面的内容以更新购物车总价。我在用户添加产品的内容页面中有一个更新面板。如何在单击更新面板内的按钮时更新主人的主内容/标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:36:47.033

由于 updatepanel 异步刷新只更新自己的区域，无法刷新其他区域（购物车总价）。一种解决方案是围绕购物车总控制添加另一个更新面板，并在您的主更新面板刷新时从服务器端代码刷新它/

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-02T15:25:19.300

几天前我遇到了这样的问题，我用jQuery解决了它。

1.  给总运输标签一个 CSS 类
2.  使用 jQuery 从 jQuery 脚本中调用该类并更新它的文本。

# php - 如何在 Symfony 中向电子邮件添加附件？

> ID：10846210
> 
> 赞同：11
> 
> 时间：2012-06-01T07:31:17.073
> 
> 标签：php, email, symfony1, symfony-1.4, swiftmailer

我想在电子邮件中添加附件。我正在使用 sfmailer 类。

在这里，我在下面给出了我的代码：

```
$mail_body = '<p>custom html mail content</p>';
$message = Swift_Message::newInstance('Message title')
  ->setFrom(array('sender'))
  ->setTo(array('receiver'))
  ->setBody($mail_body, 'text/html', 'utf-8');

try {
  $this->getMailer()->send($message);
}
catch(Exception $e) {

} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-01T07:51:35.037

您有几个选项可以使用 swift mailer 将文档附加到电子邮件中。

来自[symfony 文档](http://www.symfony-project.org/gentle-introduction/1_4/en/11-Emails#chapter_11_sub_the_powerful_way)：

```
$message = Swift_Message::newInstance()
  ->setFrom('from@example.com')
  ->setTo('to@example.com')
  ->setSubject('Subject')
  ->setBody('Body')
  ->attach(Swift_Attachment::fromPath('/path/to/a/file.zip'))
;

$this->getMailer()->send($message); 
```

[以及来自swift mailer doc 的](http://swiftmailer.org/docs/messages.html#attaching-files)许多其他可能性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-03T06:12:58.417

您也可以按资源附加文件。

```
$message = Swift_Message::newInstance()
  ->setFrom('from@example.com')
  ->setTo('to@example.com')
  ->setSubject('Subject')
  ->setBody('Body')
  ->attach(Swift_Attachment::newInstance($content, 'invoice.pdf','application/pdf')); 
```

# c# - 单个键具有不同值的哈希表

> ID：10846215
> 
> 赞同：2
> 
> 时间：2012-06-01T07:31:37.737
> 
> 标签：c#, mono, ios-simulator, hashtable, monodevelop

如果我对同一个键有多个值，那么如何将它添加到哈希表中，例如：

```
 Hashtable hs = new Hashtable();
                      hs["id"]= "x001.xhtml";
                      hs["media-type"]= "application/xhtm+xml"; 
                      hs["href"]= "text/001.xhtml";

                      hs["id"]= "x002.xhtml";
                      hs["media-type"]= "application/xhtm+xml";
                      hs["href"]= "text/002.xhtml";

                     hs["id"]= "x003.xhtml";
                     hs["media-type"]= "application/xhtm+xml";
                     hs["href"]= "text/003.xhtml"; 
```

这仅占用哈希表中的最后一组，即

```
 hs["id"]= "x003.xhtml";
                     hs["media-type"]= "application/xhtm+xml";
                     hs["href"]= "text/003.xhtml"; 
```

如何解决这个....提前谢谢！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-01T07:33:55.953

哈希表被*定义*为具有唯一键，并且索引器**替换**现有值。听起来您实际上想要一个对象列表，即

```
var list = new List<YourType> {
    new YourType { Id = "x001.xhtml", MediaType = "...", Href = "..." },
    new YourType { Id = "x002.xhtml", MediaType = "...", Href = "..." },
    new YourType { Id = "x003.xhtml", MediaType = "...", Href = "..." }
}; 
```

和

```
public class YourType {
    public string Id {get;set;}
    public string MediaType {get;set;}
    public string Href {get;set;}
} 
```

（或类似的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T07:33:27.497

***解决您的问题***

您没有为您的模型使用正确的类。你需要的是一个`List<Hashtable>`

***改进你的代码***

还可以考虑为您存储在`HashTable`.

最好的办法是使用`List<YourMedia>`

然后您的代码将如下所示：

```
List<Media> medias = new List<Media>();
media.add(new Media("x001.xhtml", "application/xhtm+xml", "text/001.xhtml")
[...] 
```

# php - 在 PHP 中按多个键对数组进行排序

> ID：10846221
> 
> 赞同：0
> 
> 时间：2012-06-01T07:32:14.423
> 
> 标签：php, arrays, sorting

我有一个表/数组。例如，在 Excel 中，我可以按第 1 列 asc、第 2 列 desc、第 3 列 asc 等排序。

我可以在 PHP 中做同样的事情吗？首先是`["first_name"] ASC`，然后`["last_name"] DESC`是 ，`["player_id"] ASC`和`["user_id"] DESC`。

```
array(2) {
    [0]=> array(6) {
        [0]=> string(8) "John",
        ["first_name"]=> string(8) "John",
        [1]=> int(7) "44",
        ["score"]=> int(7) "44",
        [2]=> string(2) "7",
        ["player_id"]=> string(2) "7",
        [3]=> string(2) "3",
        ["user_id"]=> string(2) "3"
    },
    [1]=> array(6) {
        [0]=> string(5) "Sam",
        ["first_name"]=> string(5) "Sam",
        [1]=> int(7) "55",
        ["score"]=> int(7) "55",
        [2]=> string(2) "1",
        ["player_id"]=> string(2) "1",
        [3]=> string(2) "6",
        ["user_id"]=> string(2) "61"
    }
} 
```

（实际上数组更长更深，这只是一个例子。）

更新：

```
function byPlayerID($player, $compare) {
    if($player['player_id'] > $compare['player_id'])
        return 1; // move up
    else if($player['player_id'] < $compare['player_id'])
        return -1; // move down
    else
        return 0; // do nothing

    if($player['score'] > $compare['score'])
        return 1; // move up
    else if($player['score'] < $compare['score'])
        return -1; // move down
    else
        return 0; // do nothing
} 
```

更新 2：没关系，我只需要删除`return 0;`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T07:47:00.190

[array_multisort](http://php.net/manual/en/function.array-multisort.php) is the function you are looking for.

And here is an example function written using array_multisort

[https://gist.github.com/1220785](https://gist.github.com/1220785)

using

```
 $sorted_arraty = sort_array_multidim($array,"first_name ASC, last_name DESC, player_id ASC, user_id DESC"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T07:40:11.647

使用[usort](http://se.php.net/manual/en/function.usort.php) ()。

例子：

```
$byPlayerID = function($player, $compare) {
  if($player['player_id'] > $compare['player_id'])
    return 1; // move up
  else if($player['player_id'] < $compare['player_id'])
    return -1; // move down
  else
    return 0; // do nothing
};

usort($players, $byPlayerID);
// now $players is sorted! 
```

*不过，这确实需要 PHP 5.3，下面是一个更向后兼容的版本*

```
function byPlayerID($player, $compare) {
  if($player['player_id'] > $compare['player_id'])
    return 1; // move up
  else if($player['player_id'] < $compare['player_id'])
    return -1; // move down
  else
    return 0; // do nothing
}

usort($players, "byPlayerID"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T07:38:27.933

根据需要使用 PHP 函数[usort](http://www.php.net/manual/en/function.usort.php)比较值。扩展您的回调函数以比较多个值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-24T01:39:46.770

对于那些在未来发现这一点的人，这里有一个完全回答原始问题的最终工作版本。这按四个不同的键值排序。

```
$byPlayerID = function($a, $b) {

  // Sort by first
  // > to return 1, < to return -1 = ASC order
  if($a['first_name'] > $b['first_name']) return 1; // move up
  else if($a['first_name'] < $b['first_name']) return -1; // move down

  // Sort by second
  // < to return 1, > to return -1 = DESC order
  if($a['last_name'] < $b['last_name']) return 1; // move up
  else if($a['last_name'] > $b['last_name']) return -1; // move down

  // Sort by third
  // > to return 1, < to return -1 = ASC order
  if($a['player_id'] > $b['player_id']) return 1; // move up
  else if($a['player_id'] < $b['player_id']) return -1; // move down

  // Sort by fourth
  // < to return 1, > to return -1 = DESC order
  if($a['user_id'] < $b['user_id']) return 1; // move up
  else if($a['user_id'] > $b['user_id']) return -1; // move down

  else return 0; // do nothing

};

usort($stats, $byPlayerID); 
```

# assembly - 装配 scanf 检索值

> ID：10846224
> 
> 赞同：0
> 
> 时间：2012-06-01T07:32:25.797
> 
> 标签：assembly, printf, scanf

我正在尝试创建一个简单的汇编程序，它允许用户输入一个值并将其打印出来。到目前为止，我得到了以下信息：运行程序时出现错误：分段错误。有人可以帮我吗？

```
 .text
    STRING: .asciz "test\n"

    input: .long

    .global main
    inout:
    pushl %ebp # Prolog: push the base pointer.
    movl %esp, %ebp # and copy stack pointer to EBP.

    formatstr: .asciz "%d"

    subl $4, %esp # Reserve stack space for variable
    leal -4(%ebp), %eax # Load address of stack var in eax
    pushl $input # Push second argument of scanf
    pushl $formatstr # Push first argument of scanf
    call scanf # Call scanf

    movl $8, %esp # Clear local variables from stack.

    pushl $input
    call printf

    movl $0, %eax
    movl %ebp, %esp
    popl %ebp # Restore caller's base pointer.
    ret # Return

    main:
    pushl $STRING #push the format string printing
    call printf # print the number
    call inout

    add $4, %esp
    pushl $0
    call exit 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T17:35:54.903

如果在执行数据时它没有爆炸

```
 formatstr: .asciz "%d" 
```

尝试使用带有不稳定堆栈指针的堆栈时，它很可能会出现分段错误：

```
movl $8, %esp # Clear local variables from stack.

pushl $input 
```

也许你的意思是

```
addl $8, %esp 
```

# javascript - 从 utf-8 代码打印/输出 utf-8 字符

> ID：10846234
> 
> 赞同：0
> 
> 时间：2012-06-01T07:33:15.233
> 
> 标签：javascript, ruby, encoding, utf-8, decoding

我的 HTML 文件中有包含 utf8 代码的字符串，例如`/tr'&amp;#652;mp&amp;#618;t/`，我希望将 utf8 代码打印为文档中的**utf8 字符**。`ˈtrəmpit`

哪个库提供这个功能？`Ruby`，`JavaScript`一切对我有用，`Python`也很好。

前提是文档已经以 utf-8 编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:41:28.577

对于 Python，请使用例如（在[这篇文章之后](http://fredericiana.com/2010/10/08/decoding-html-entities-to-text-in-python/)）：

```
import HTMLParser
h=HTMLParser.HTMLParser()
print h.unescape('tr&#652;mp&#618;t')
# trʌmpɪt 
```

# javascript - js文件不能使用jquery

> ID：10846237
> 
> 赞同：0
> 
> 时间：2012-06-01T07:33:28.683
> 
> 标签：javascript, jquery

我有一个奇怪的错误，我将这些文件包含在我的部分中

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="js/barScriptOOP.js"></script> 
```

在 barScriptOOP.js 我有这个

```
function position_bar(){
    //global variable
    this.sizes      = Array();
}
//class methods => getData (from xml file), draw(draws the bar )
position_bar.prototype ={
    getData: function(is_load){

        var xmlData = Array();
        $.ajax({
            type: "GET",
            url: "Bar.xml",
            dataType: "xml",
            context: this,
            success: function(xml) {

                //extracting new data - some code here
                                xmldata = "blabla";
                this.draw(is_load, xmlData);
            }
        })//end ajax

    }, 
//other functions 
```

当我使用此脚本时，我收到“$.ajax 不是函数”错误。1\. 我试着编辑出来`this.draw(is_load, xmlData);`，它没有出错。我的程序 rpeatly 调用 getData 函数。

注意：我还收到`'$.browser is undefined'`另一个函数中的错误（这是我收到的第一个错误）。

意思==> 去另一个函数无法jquery。

知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:43:40.693

不要使用 $ 作为您的 jquery 引用，而是尝试将此行放在脚本的开头

```
var $j = jQuery.noConflict();
$j(function() {
  alert('doc ready');
}); 
```

（另外，奇怪的是您的脚本标签没有设置类型属性，尽管我怀疑这是问题所在）

# python-3.x - 如何从字符串中获取元素

> ID：10846239
> 
> 赞同：0
> 
> 时间：2012-06-01T07:33:34.563
> 
> 标签：python-3.x

我想从字符串中获取特定信息，就像我有一个字符串：Hardware is FAS-2030-2T+ 请注意字符串开头的空格我想检索 FAS-2030-2T+ 如果我应该使用 re.search 或 re.match if又怎样？请帮助我，我被困在python的一些地方和新手

提前致谢

-P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T10:59:19.587

```
if(re.match('.*Hardware is.*',list)):
    #print ("Befroe List is ::",list)
    list1=shlex.split(list)
    #print ("List is ::",list1)
    print ("The Hardware is ::",list1[2]) 
```

# android - 在android的gridview中拖放图像

> ID：10846240
> 
> 赞同：2
> 
> 时间：2012-06-01T07:33:36.317
> 
> 标签：android, drag-and-drop, android-imageview, android-gridview

我正在开发一个示例 android 应用程序来了解 android 中的拖放。在应用程序启动时，我在网格视图上显示了一些图像。现在我需要一次将一个图像拖到另一个位置。将图像放在另一个图像上后，图像应该交换位置。我怎样才能实现它？请指导/帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T07:36:06.020

您可以使用 thquinn 的**[DraggableGridView轻松实现此目的](https://github.com/thquinn/DraggableGridView)**

您可以添加自定义布局

```
public class DraggableGridViewSampleActivity extends Activity {
    static Random random = new Random();
    static String[] words = "the of and a to in is be that was he for it with as his I on have at by not they this had are but from or she an which you one we all were her would there their will when who him been has more if no out do so can what up said about other into than its time only could new them man some these then two first may any like now my such make over our even most me state after also made many did must before back see through way where get much go well your know should down work year because come people just say each those take day good how long Mr own too little use US very great still men here life both between old under last never place same another think house while high right might came off find states since used give against three himself look few general hand school part small American home during number again Mrs around thought went without however govern don't does got public United point end become head once course fact upon need system set every war put form water took".split(" ");
    DraggableGridView dgv;
    Button button1, button2;
    ArrayList<String> poem = new ArrayList<String>();

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        dgv = ((DraggableGridView)findViewById(R.id.vgv));
        button1 = ((Button)findViewById(R.id.button1));
        button2 = ((Button)findViewById(R.id.button2));

        setListeners();
    }
    private void setListeners()
    {
        dgv.setOnRearrangeListener(new OnRearrangeListener() {
            public void onRearrange(int oldIndex, int newIndex) {
                String word = poem.remove(oldIndex);
                if (oldIndex < newIndex)
                    poem.add(newIndex, word);
                else
                    poem.add(newIndex, word);
            }
        });
        dgv.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> arg0, View view, int position, long arg3) {
                Toast.makeText(getApplicationContext(), "On clicked" +position, Toast.LENGTH_SHORT).show();
                dgv.removeViewAt(position);
                poem.remove(position);
            }
        });
        button1.setOnClickListener(new OnClickListener() {
            public void onClick(View arg0) {
                String word = words[random.nextInt(words.length)];
                addView();
                poem.add(word);
            }
        });
        button2.setOnClickListener(new OnClickListener() {
            public void onClick(View arg0) {
                String finishedPoem = "";
                for (String s : poem)
                    finishedPoem += s + " ";
                new AlertDialog.Builder(DraggableGridViewSampleActivity.this)
                .setTitle("Here's your poem!")
                .setMessage(finishedPoem).show();
            }
        });
    }

    public void addView()
    {

        LayoutParams mLayoutParams= new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

        LinearLayout mLinearLayout= new LinearLayout(DraggableGridViewSampleActivity.this);
        mLinearLayout.setOrientation(LinearLayout.VERTICAL);
        mLinearLayout.setGravity(Gravity.CENTER_HORIZONTAL);

        ImageView mImageView = new ImageView(DraggableGridViewSampleActivity.this);

        if(dgv.getChildCount()%2==0)
            mImageView.setImageResource(R.drawable.child1);
        else
            mImageView.setImageResource(R.drawable.child2);

        mImageView.setScaleType(ImageView.ScaleType.FIT_XY);
        mImageView.setLayoutParams(mLayoutParams);

        mImageView.setId(dgv.getChildCount());

        mImageView.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
                Toast.makeText(getApplicationContext(), v.getId()+"clicked ", Toast.LENGTH_SHORT).show();
                return dgv.onTouch(v, event);
            }
        });

            TextView mTextView = new TextView(DraggableGridViewSampleActivity.this);

            mTextView.setLayoutParams(mLayoutParams);

            mTextView.setOnTouchListener(new OnTouchListener() {

                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    // TODO Auto-generated method stub
                    Toast.makeText(getApplicationContext(), v.getId()+"clicked text ", Toast.LENGTH_SHORT).show();
                    return dgv.onTouch(v, event);
                }
            });

            TextView mTextViewLabel = new TextView(DraggableGridViewSampleActivity.this);

            mTextViewLabel.setText(((dgv.getChildCount()+1)+""));
            mTextViewLabel.setLayoutParams(mLayoutParams);

            mTextViewLabel.setId(dgv.getChildCount());

            mTextViewLabel.setOnTouchListener(new OnTouchListener() {

                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    Toast.makeText(getApplicationContext(), v.getId()+"clicked text ", Toast.LENGTH_SHORT).show();
                    return dgv.onTouch(v, event);
                }
            });

            mLinearLayout.setTag(mTextViewLabel);
            mLinearLayout.addView(mTextViewLabel);
            mLinearLayout.addView(mImageView);
            mLinearLayout.addView(mTextView);
        dgv.addView(mLinearLayout);

    }
} 
```

# php - PHP Exchange Web 服务 - 获取消息正文

> ID：10846245
> 
> 赞同：1
> 
> 时间：2012-06-01T07:34:05.520
> 
> 标签：php, exchange-server, exchangewebservices

我正在使用一个[PHP EWS](https://github.com/jamesiarmes/php-ews/)库，并以[这个例子](https://github.com/jamesiarmes/php-ews/wiki/Email-%3a-Get-List)来获取一个消息列表，它工作得很好。

它会提取发件人、收件人、主题、时间等详细信息。我尝试查看所有库，但无法锻炼如何提取邮件正文和附件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T13:35:46.040

它在 PHP EWS wiki 中有很好的描述，就在这里：[https ://github.com/jamesiarmes/php-ews/wiki/Email-:-Retrieve-All-Email-Attachments](https://github.com/jamesiarmes/php-ews/wiki/Email-:-Retrieve-All-Email-Attachments)

编辑：使用上面链接的整个示例来获取电子邮件附件，并仅使用其中的一部分来获取消息：

```
$message_id = ''; // Id of the email message

$ews = new ExchangeWebServices($host,  $user, $password);

$request = new EWSType_GetItemType();

$request->ItemShape = new EWSType_ItemResponseShapeType();
$request->ItemShape->BaseShape = EWSType_DefaultShapeNamesType::ALL_PROPERTIES;

$request->ItemIds = new EWSType_NonEmptyArrayOfBaseItemIdsType();
$request->ItemIds->ItemId = new EWSType_ItemIdType();
$request->ItemIds->ItemId->Id = $message_id; 

$response = $ews->GetItem($request);

if( $response->ResponseMessages->GetItemResponseMessage->ResponseCode == 'NoError' &&
    $response->ResponseMessages->GetItemResponseMessage->ResponseClass == 'Success' ) {

    $message = $response->ResponseMessages->GetItemResponseMessage->Items->Message;
} 
```

此时，您拥有`$message`. 访问正文使用`$message->body`- 它是一个带有 bodyType 等的对象 - 实际读取消息正文内容使用`$message->body->_`

# javascript - 如何在单页移动 Web 应用程序中实现我自己的历史堆栈？

> ID：10846248
> 
> 赞同：22
> 
> 时间：2012-06-01T07:34:19.623
> 
> 标签：javascript, mobile, backbone.js, browser-history, zepto

我有一个使用 Backbone 和 Zepto 开发的单页移动应用程序。

它与浏览器中的后退/前进按钮一起正常工作。

当用户导航到页面时，*新*内容从右侧滑入，而*旧*内容从左侧滑出（并滑出视口）。如果用户按下“前进”浏览器按钮，我希望同样的事情发生。这一切都有效。

我有一个添加到 body 元素的类，`navigate-back`它会翻转这种行为，所以当用户使用浏览器的后退按钮导航回来时，他们会看到内容*从*左侧滑入，而其他内容滑入右侧。基本上与前进相反。

我需要检测用户是否正在向后导航，以便我可以调用替代行为。我尝试过实现自己的历史堆栈，但我遇到了很多问题，有时它将前向导航标记为*后*向导航，从而破坏了视觉提示。它现在变成了一堆黑客，如果我发布它可能只会让我尴尬。

实现我自己的历史堆栈的最佳方法是什么，以便我可以检测用户是否在单页 Backbone 移动应用程序的上下文中向前/向后导航？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-05T08:25:42.850

我不了解backbone.js ¹，但我帮助开发了一个必须在html5中实现这种行为的移动应用程序，所以我应该能够给出一些好的建议：

首先，很高兴知道该`history.pushState`功能存在。它最大的问题是[它支持到 android 2.3，但不支持 android 3 直到 android 4.0.3](http://code.google.com/p/android/issues/detail?id=23979)。正如 kiranvj 正确指出的那样，这可以通过使用流行的[history.js](https://github.com/balupton/history.js)库来解决，该库为缺少历史记录功能提供了一个 polyfill 解决方案。

现在，解决您的实际问题，我实现历史方向动画的方式是向`pushState`函数 ( `history.pushState(data,title,url)`) 添加数据，通过该函数我确定了页面的逻辑位置。在我的应用程序中，我不仅限于水平条，而且在您的情况下，您将跟踪任何新加载页面的位置，该位置比当前页面高一个。例如

```
History.pushState({position:History.getState().data.position+1},"Your title","Your URL"); 
```

接下来，当`window.onstatechange`or`window.onanchorchange`事件触发时，您观察该位置是高于还是低于当前页面（例如，通过使用我在上面使用的[history.js](https://github.com/balupton/history.js) `History.getState()`函数），并根据此决定向哪个方向移动（下到左，右高），如下图所示：

![历史事件的插图](../Images/0b993d96102a25e31b39a086e08646b4.png)

您还会注意到，我已经在第一页上假设您拥有`{position:1}`，而通常第一页没有状态信息。实现这一点的方法是使用`history.replaceState`which 将当前的空状态替换为更具信息性的状态。或者，您也可以检查前面提到的任何事件的空状态，如果它是空的，则假设它是最左边的 ( `{position:1}`)。

希望这会有所帮助，如果您有任何其他问题，请随时提出。

请注意，此答案假定您正在使用[history.js](https://github.com/balupton/history.js) ，如果您想构建自己的解决方案，则需要监听稍微不同的事件（例如`onpopstate`）并使用稍微不同的结构（`history`而不​​是）。`History`

还需要注意的是，可以使用您自己的队列数组来构建它，这可以为您提供更多控制，但不能与浏览器的后退按钮结合使用。这是浏览器站点的一个大问题，但是如果您正在构建一个[cordova](http://incubator.apache.org/cordova/)（又名[phonegap](http://phonegap.com/)）Web 应用程序，则要容易得多。

* * *

^(1 刚读过它，它似乎做了一些[自己的](http://documentcloud.github.com/backbone/#History)历史处理，这*可能*会使集成上述技术变得更加复杂。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T05:11:58.493

在移动设备上使用单页 - 多视图使用 Zepto 时，我遇到了同样的问题。

最初我使用 html5 statechange 和 onhashchange。在一个或其他移动设备中都有一些问题。最后我从这里使用了 Zepto 历史插件[https://github.com/browserstate/history.js](https://github.com/browserstate/history.js)

它在一定程度上解决了大部分问题。试试看，它会很有用，它尽可能处理 html4 和 html5 功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T23:28:39.610

如果您正在开发一个*真正*的单页应用程序，为什么不设置一个数组来将历史 url 保存在 js 变量中（而不是依赖类似的东西`history.pushState`及其支持）？

每当导航到新页面时，您都可以将其 url 推送到数组中，每当按下“后退”按钮时，您都可以检索所需的 url，只要您想要。只要您在用户返回几步然后导航到*新*链接时正确丢弃 url，这将完美地工作。

我从未尝试将其用于页面历史记录，但这对于页面内撤消重做逻辑非常有效。

## 更新：

经过进一步研究，上述方法不适用于页面重新加载，因为它是在通过 JS 可用的历史处理之外发生的操作。它仍可用于跟踪向后/向前转换，但在导航到应用程序外部的 url 或页面刷新时，此类历史记录将丢失。David Mulder 的答案似乎缺乏这种限制，因为它依赖于在页面范围之外持续存在的浏览器级历史记录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-27T13:36:35.347

在单页移动应用程序中使用这个东西，这将允许历史记录并将用户移回。

```
function onBackKeyDown() {
    history.go(-1);
    navigator.app.backHistory();
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-06-09T20:00:52.817

Sammy.js 的 v.6.x 分支（仅依赖于哈希更改的分支）是一种完美、最简单、最兼容浏览器的历史记录方法。在那里，根本不跟踪历史，因为 Sammy 只是监视 hashchange。

依靠“#/slide/123”可以支持硬页面重载，简化工作

剥离每个页面视图的最后一部分（幻灯片编号），推入全局。在新路线上，查看数字是否大于或小于存储在全局中的数字并执行正确的（左或右）动画。如果 global 未定义，则没有动画。

# iphone - 图像不会改变返回 UIControlState 之间的视图

> ID：10846250
> 
> 赞同：0
> 
> 时间：2012-06-01T07:34:23.233
> 
> 标签：iphone, objective-c, ios, sdk, uibutton

我可以更改图像，但是当我返回此视图时，它会显示与 UIControlStateNormal 相同的图像，从我在 UIControlStateSelected 时开始。

```
-(IBAction) favorateImage:(UIButton*)sender{

    AppDelegate *obj=[[UIApplication sharedApplication]delegate];

    if ([sender isSelected]) {

        [sender setImage:[UIImage imageNamed:@"favrtes_uncheck.png"] forState:UIControlStateNormal];
        [sender setSelected:NO];

        NSMutableArray* array = [[[NSUserDefaults standardUserDefaults] objectForKey:@"favoriteItems"] mutableCopy];
        [array removeObject:[NSNumber numberWithInt:self.number]];

        [[NSUserDefaults standardUserDefaults] setObject:array forKey:@"favoriteItems"];

        NSLog(@"%@", array);

        obj.country_main= array;
    } else 
    {
        [sender setImage:[UIImage imageNamed:@"favrtes_detail.png"] forState:UIControlStateSelected];
        [sender setSelected:YES];

        NSMutableArray* array= [[[NSUserDefaults standardUserDefaults] objectForKey:@"favoriteItems"] mutableCopy];

        [array addObject:[NSNumber numberWithInt:self.number]];

        [[NSUserDefaults standardUserDefaults] setObject:array forKey:@"favoriteItems"];

        NSLog(@"%@", array);

        obj.country_main= array;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:40:27.617

您可以为此使用 UIControlStateHighlighted。

```
[sender setImage:[UIImage imageNamed:@"favrtes_detail.png"] forState:UIControlStateHighlighted]; 
```

您还可以通过将图像设置为突出显示状态来从界面生成器中进行设置。

# ftp - FTP：将文件从一个目录移动到另一个目录的速度

> ID：10846251
> 
> 赞同：0
> 
> 时间：2012-06-01T07:34:25.320
> 
> 标签：ftp

好的，为这里非常业余的问题道歉。我有一个 5GB 的文件夹`images`，我很快就会移到这个`/uploads`文件夹`/archives/2011/uploads`（即同一服务器上的另一个目录）。如果我通过 FTP（在 GUI 客户端中）执行此操作，此移动是否可以立即完成，或者文件需要几个小时才能通过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:40:12.617

您可以简单地将远程文件夹从 重命名`/uploads`为`/archives/2011/uploads`。

# java - 我可以从java程序更改linux中的用户密码吗？

> ID：10846255
> 
> 赞同：3
> 
> 时间：2012-06-01T07:34:40.713
> 
> 标签：java, linux, bash, shell, ubuntu

我正在尝试通过在输出流中发送密码来从 java 程序中更改 linux 中的用户密码，但它没有完成。

我的java程序就像

```
Process process = Runtime.getRuntime().exec("sudo passwd sampleuser");

OutputStream outputStream = process.getOutputStream();

InputStream inputStream = process.getInputStream();

PrintWriter printWriter=new PrintWriter(outputStream);

printWriter.write("123456");

printWriter.write("\n");

printWriter.flush(); 
```

我的程序在这里失败，它要求输入密码，但我不想要这种情况。

有没有可能从java程序提供密码？你能建议我吗，我将如何成功地做到这一点，或者是否有任何可用的 shell api。

当我尝试使用 shell 脚本并从我的 java 程序中调用它时，同样的事情成功完成

```
Process process = Runtime.getRuntime().exec("bash first.sh"); 
```

我的shell脚本是

```
i="123456"

echo -e $i"\n"$i|sudo -S passwd sampleuser 
```

它成功地更改了用户密码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T07:39:35.023

它会要求输入密码。看看你的 shell 脚本。你执行一个要求超级用户权限的命令（`sudo`）。您的程序将提示输入密码，除非您以超级用户身份运行它。

要分解你的 shell 脚本：

```
i="123456"

echo -e $i"\n"$i|sudo -S passwd sampleuser 
```

`sudo -S`方法 ：

*-S (stdin) 选项使 sudo 从标准输入而不是终端设备读取密码。密码后面必须跟一个换行符。*

这就是您的脚本正在做的事情，它正在为您的as设置 password( `passwd`) 。并且由于您正在使用它，它是从标准输入中读取的，您已经给了您的变量。而你作为超级用户正在做这一切！记在脑子里。`sampleuser``i``-S``i`

现在回头看看你的 java 程序并尝试进行相应的更改。运行程序时是否具有超级用户权限？不，你没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:44:31.767

I'm not sure why your approach fails. I suppose passwd uses a different stream.

But use [ExpectJ](http://expectj.sourceforge.net/) for this. It is made just for such cases.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-18T14:11:06.783

如果有人正在寻找答案，我只需找到以下方法：

```
try {
    Process p = Runtime.getRuntime().exec(new String[] {"sudo", "/bin/sh", "-c", "echo \"user:newpassword\" | sudo chpasswd"} );
    p.waitFor();
} catch (IOException | InterruptedException e1) {
    e1.printStackTrace();
} 
```

# c# - 如何一次异步执行页面中的两个更新面板？

> ID：10846259
> 
> 赞同：0
> 
> 时间：2012-06-01T07:34:48.990
> 
> 标签：c#, asp.net, asynchronous, updatepanel

我在 asp.net 页面中有 2 个更新面板，在更新面板中有一个文本框和 asp 按钮可用，用户输入文本框并依次单击按钮，第一个请求发送到一个类方法（需要 5 秒时间），第二个请求发送另一个类方法（需要 10 秒时间）但是现在用户单击第一个按钮而不等待响应立即单击第二个按钮，**我已经发送了两个请求并独立显示响应（这意味着异步）**请给我任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:49:03.997

使用 UpdateProgress 控件：

[更新过程](http://ajax.net-tutorials.com/controls/updateprogress-control/)

```
<asp:ScriptManager ID="ScriptManager1" runat="server" />
        <asp:UpdateProgress runat="server" id="PageUpdateProgress">
            <ProgressTemplate>
                Loading...
            </ProgressTemplate>
        </asp:UpdateProgress>
        <asp:UpdatePanel runat="server" id="Panel">
            <ContentTemplate>
                <asp:Button runat="server" id="UpdateButton" onclick="UpdateButton_Click" text="Update" />
            </ContentTemplate>
        </asp:UpdatePanel> 
```

# c# - 如何解析dd.mm.yyyy格式RegularExpressionAttribute MVC的DataAnnotations？

> ID：10846264
> 
> 赞同：0
> 
> 时间：2012-06-01T07:35:15.913
> 
> 标签：c#, regex, asp.net-mvc, model-view-controller, data-annotations

我想像这样创建 DateTimeAttribute：

```
 public class DateTimeAttribute : RegularExpressionAttribute
    {
        public DateTimeAttribute(): base(@"\d\d.\d\d.\d\d\d\d")
        {

        }

    } 
```

我想让我的格式：dd.mm.yyyy 它太简单了但是： **^((((0?[1-9]|[12]\d|3[01]).-/.-/)| ((0?[1-9]|[12]\d|30).-/.-/)|((0?[1-9]|1\d|2[0-8])[.- /]0?2.-/)|(29[.-/]0?2.-/))|(((0[1-9]|[12]\d|3[01])(0[ 13578]|1[02])((1[6-9]|[2-9]\d)?\d{2}))|((0[1-9]|[12]\d|30 )(0[13456789]|1[012])((1[6-9]|[2-9]\d)?\d{2}))|((0[1-9]|1\d |2[0-8])02((1[6-9]|[2-9]\d)?\d{2}))|(2902((1[6-9]|[2-9 ]\d)?(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00)|00)) ))$**

 **这太难了也不行吗？如何在我的正则表达式中解析 dd.mm.yyyy？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:44:35.527

尝试：

```
(0[1-9]|[12][0-9]|3[01])[\.](0[1-9]|1[012])[\.](19|20)[0-9]{2} 
```

但这将匹配无效日期，例如 2 月 31 日。因此，无论如何您都需要检查日期的有效性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T01:24:57.920

你可以只使用内置属性吗？

```
[DataType(DataType.Date, ErrorMessage="Please enter a valid date in the format dd.mm.yyyy")] 
```**

# java - 在 Mockito 中模拟我们无法明确分配的东西

> ID：10846269
> 
> 赞同：2
> 
> 时间：2012-06-01T07:35:32.750
> 
> 标签：java, junit4, mockito

我有一段这样的代码：

```
 class Lekcja {
        Calendar _date;
        public Lekcja() {
            _date = Calendar.getInstance();
        }
        public Calendar getDate() {
            return _date;
        }
    } 
```

我想使用 JUnit4 和 Mockito 对其进行测试，而不是使用真正的 Calendar 对象，我想在那里放置一个模拟对象。你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T07:41:16.530

模拟值对象很少是一个好主意。你应该模拟行为，而不是数据。我想您真正想要实现的是能够在测试中使用任意日期（这是一个好主意）。

我在这种情况下成功使用的模式是[假系统时钟](http://www.javapractices.com/topic/TopicAction.do?Id=234)（来自该站点的示例）：

```
public interface TimeSource {
  long currentTimeMillis();
} 
```

还有两个实现，真实的：

```
public final class RealSource implements TimeSource {

  public long currentTimeMillis() {
    return System.currentTimeMillis();
  }

} 
```

和假测试：

```
public final class FakeSource implements TimeSource {

  public long currentTimeMillis() {
    return //...whatever you want
  }

} 
```

我发现`currentTimeMillis()`在辅助方法中制作 static 并使用`static`指向 current 的字段很方便`TimeSource`。

最后，更简单的方法是直接传递日期：

```
class Lekcja {
    Calendar _date;
    public Lekcja(Calendar date) {
        this._date = date;
    }
    //...
} 
```

# 也可以看看

*   [Java中基于时间的逻辑单元测试](https://stackoverflow.com/questions/9410046)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T08:40:20.090

你可以使用[PowerMock](http://code.google.com/p/powermock/wiki/MockitoUsage13)

```
@RunWith(PowerMockRunner.class)
@PrepareForTest(Calendar.class)
public class LekcjaTest {
    private Lekcja lekcja;
    private Date myDate;

    @Before
    public void setUp() {
        myDate = mock(Date.class);

        PowerMockito.mockStatic(Calendar.class);
        PowerMockito.when(Calendar.getInstance()).thenReturn(myDate);
    }

    @Test
    public void calendarTest() {
        lekcja = new Lekcja();

        //verifies that the static call has been made
        PowerMockito.verifyStatic();
        Calendar.getInstance();

        assertEquals(myDate, lekcja.getDate());
    }
} 
```

# jquery - 如何不选择最后一个兄弟姐妹

> ID：10846270
> 
> 赞同：3
> 
> 时间：2012-06-01T07:35:37.240
> 
> 标签：jquery

如何不选择最后一个兄弟姐妹

```
$(this).parent().siblings(); 
```

上面的代码选择了所有的兄弟姐妹。但我不希望最后一个兄弟姐妹被选中。
我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T07:36:38.580

试一试...

```
$(this).parent().siblings().not(":last-child"); 
```

[js小提琴](http://jsfiddle.net/zKfZp/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T07:39:47.670

尝试

```
$(this).parent().siblings(":not(:last)"); 
```

或者

```
$(this).parent().siblings().not(":last-child"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T07:49:27.850

```
$('parent childrens').not(':last') 
```

### *[jsBin 演示](http://jsbin.com/ajovan/edit#javascript,html,live)*

* * *

```
$('parent childrens').slice(0,-1) 
```

### *[jsBin 演示 2](http://jsbin.com/ajovan/2/edit)*

# php - 如何使应用程序页面过期

> ID：10846271
> 
> 赞同：1
> 
> 时间：2012-06-01T07:35:51.737
> 
> 标签：php, javascript, jquery, ajax

我想知道当用户长时间没有键入或单击应用程序时，文档是否有可能过期。另外，如果用户单击了刷新按钮，那么文档会过期吗？

有人可以举例说明如何做到这一点吗？我不知道是 php 还是 javascript 做到了这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:43:20.363

我不是 PHP 专家，但页面过期规则保持不变，您必须设置适当的标头以使其不被浏览器缓存。

因此，对于第二个问题，您将执行以下操作：

```
<?php
header("Cache-Control: no-cache, must-revalidate"); // HTTP/1.1
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); // Date in the past
?> 
```

更多信息-[阅读](http://php.net/manual/en/function.header.php)示例 #2 缓存指令。

[缓存控制 HTTP 标头](http://condor.depaul.edu/dmumaugh/readings/handouts/SE435/HTTP/node24.html)

首先，您可以结合使用 javascript 事件（如 mousemove、click 等）来检查用户是否处于活动状态，如果没有，则可以显示一些确认对话框。

一个不错的[jQuery 插件空闲监视器](http://www.erichynds.com/jquery/a-new-and-improved-jquery-idle-timeout-plugin/)

[优雅地检测 JavaScript 中的空闲时间](https://stackoverflow.com/questions/667555/detecting-idle-time-in-javascript-elegantly)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:46:49.573

如果用户触发了事件或在文档上，您可以使用[setTimeout javascript 函数每隔 X 毫秒检查一次。](http://www.w3schools.com/js/js_timing.asp) 例如 ：`click``keypress`

```
var expired;

$(document).ready(function(){
    $(document).click(function(){
        expired = false;
    });

    $(document).keypress(function(){
        expired = false;
    });

    setTimeout("check_expired",60000); // Every minutes
});

function check_expired() {
    if(expired == true) {
        //DO SOMETHING
    } else {
        expired = true;
    }
} 
```

# javascript - Javascript 未在 jQuery ajax 内容中完全加载

> ID：10846275
> 
> 赞同：0
> 
> 时间：2012-06-01T07:36:07.867
> 
> 标签：javascript, jquery

我有一个问题，自从我昨天开始寻找它以来，它让我很头疼。

我有几个 jQuery 脚本，我的页面包含`.load`jQuery ajax（在页面底部）。

我对图像使用悬停效果和位于 js/tools.js 中的标题的固定位置

问题是，我的浏览器随机不会将 tools.js 加载到 ajax 中。所以有时候在加载的ajax内容中看不到图片悬停效果。刷新页面时，它可以正常工作。

我的第一个赌注是我使用的脚本发生冲突，或者内容或 .js 加载的顺序存在问题。

js：

```
$(document).ready(function() {
    $('.cta-btn, .portf1, .portf2, .portf3, .portf4, .portf5, .btn-facebook, .btn-twitter, .btn-linkedin, .btn-studiofacebook, .btn-studiotwitter,.btn-studiolinkedin,.newsitem1, .newsitem2, .newsitem3').append('<span class="hover"></span>').each(function () {
        var $span = $('> span.hover', this).css('opacity', 0);
        $(this).hover(function () {
            $span.stop().fadeTo(200, 1);
        }, function () {
    $span.stop().fadeTo(400, 0);
        });
    });
});

$(function(){
     var stickyHeaderTop = $('#stickyheader').offset().top;

     $(window).scroll(function(){
             if( $(window).scrollTop() > stickyHeaderTop ) {
                     $('#stickyheader').css({position: 'fixed', top: '0px'});
                     $('#stickyalias').css('display', 'block');
             } else {
                     $('#stickyheader').css({position: 'static', top: '0px'});
                     $('#stickyalias').css('display', 'none');
             }
       });   
}); 
```

html:

```
<!-- portfolio -->
<div id="portfoliowrapper">
<div id="portfolioitems"></div>
<script>$("#portfolioitems").load("werk.html #portfolio");</script>
<div class="clear"></div>
<a href="werk.html" class="cta-btn"><h2 class="btn">Werk</h2></a>
</div> 
```

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:47:17.353

你需要展示一些代码，你不能指望我们挖掘你的网站。

您很可能正在使用

```
$(function(){
   // code that depends on images being loaded here
}); 
```

但是，这不会等待图像加载，它只会等到 DOM 准备好进行修改。等待图像的事件是窗口的加载事件。

```
$(window).load(function(){
   // here all images in the HTML are guaranteed to be loaded
}); 
```

第二次运行您的页面时，图像在缓存中，并且当 DOM 准备好时它们已经加载，即来自您的`$(document).ready()`处理程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:56:38.290

问题在这里：

```
$("#portfolio").offset() is null
Line 33 
```

根据萤火虫。看起来您正试图在页面完全呈现之前调用函数，这会导致错误，因为它无法计算偏移量并且会破坏函数的其余部分。

# ios - 如何为 UIPopoverControllers 强制设置黑色边框

> ID：10846277
> 
> 赞同：5
> 
> 时间：2012-06-01T07:36:14.683
> 
> 标签：ios, ipad, uipopovercontroller

`UIPopoverController`可以使用类在 iOS5 中重新设置实例的样式`UIPopoverBackgroundView`。但是，这种自定义技术不能应用于`UIActionSheets`（在 iPad 中显示为弹出框）。我希望我的弹出框看起来一致，所以`UIPopoverBackgroundView`不是我的选择。

浏览 iOS 作品（使用[extractor](https://github.com/0xced/UIKit-Artwork-Extractor)），我注意到在`_UIPopoverViewBlue*`PNG（可能用于绘制默认的蓝色`UIPopoverController`边框）旁边是一`_UIPopoverViewBlack*`组 PNG。如何`UIPopoverController`使用黑色图像而不是蓝色图像？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T12:58:17.917

似乎没有办法正式实现这一目标。我怀疑它会通过 App Store 审核流程，但这适用于 iOS 6：

```
[popoverController setValue:@3 forKey:@"_popoverBackgroundStyle"]; 
```

遗憾的是，Apple 没有公开披露这一点。

# c# - 将电子邮件内容传输到 C# 页面

> ID：10846278
> 
> 赞同：0
> 
> 时间：2012-06-01T07:36:26.290
> 
> 标签：c#, asp.net, sql-server-2005

我创建了一个 Web 表单，其中包含控件以使用添加按钮添加用户的姓名、出生日期、性别信息，一旦单击添加按钮，该信息就会进入数据库。但我有我的邮箱，例如。gmail 一些邮件正在收件箱中，其中包含与之前相同的信息（姓名、出生日期、性别等）。那么我可以将收件箱数据传输到我的数据库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:40:37.007

是的你可以。

您可以利用许多库来简化检查 Gmail 帐户的过程。这里只是一个：http: [//sourceforge.net/projects/hpop/](http://sourceforge.net/projects/hpop/)

这是获取所有电子邮件的示例代码：

```
public static List<Message> FetchAllMessages(string hostname, int port, bool useSsl, string username, string password)
{
    // The client disconnects from the server when being disposed
    using (Pop3Client client = new Pop3Client())
    {
        // Connect to the server
        client.Connect(hostname, port, useSsl);

        // Authenticate ourselves towards the server
        client.Authenticate(username, password);

        // Get the number of messages in the inbox
        int messageCount = client.GetMessageCount();

        // We want to download all messages
        List<Message> allMessages = new List<Message>(messageCount);

        // Messages are numbered in the interval: [1, messageCount]
        // Ergo: message numbers are 1-based.
        // Most servers give the latest message the highest number
        for (int i = messageCount; i > 0; i--)
        {
            allMessages.Add(client.GetMessage(i));
        }

        // Now return the fetched messages
        return allMessages;
    }
} 
```

您仍然需要检查每一个并确定它是否对您的数据库有效，然后获取数据并将其插入数据库；但它应该非常简单（并且几乎与您已经在做的事情相同）

对于 GMail，您可以使用以下方式获取您的邮件：

```
List<Message> myMail = FetchAllMessages("pop.gmail.com", 995, true, "MyEmail@gmail.com", "mysupersecretpasswordshhhhh!"); 
```

# linq - 插入项目列表之前检查重复行的最佳实践

> ID：10846282
> 
> 赞同：1
> 
> 时间：2012-06-01T07:36:38.067
> 
> 标签：linq, entity-framework, insert, unique-constraint

我有一个要输入数据库的对象数组。我的方法调用看起来像这样。

```
public void Add(CardElement[] cardElements){
    foreach (var cardElement in cardElements)
    {
        Data.Entry(cardElement).State = System.Data.EntityState.Added;
    }
    Data.SaveChanges();
} 
```

数据库表类似于这样

```
MS SQL = Table mytable Columns a,b,c,d,e,f
Unique Constraint a,b,c 
```

我要插入的数据类似于此。

```
var obj []  = new [] { 
   new MyObject () { a = 1, b =1, c = 1 },
   new MyObject () { a = 1, b =1, c = 2 }
   new MyObject () { a = 1, b =1, c = 3 }
 }; 
```

所以，我想在将它们添加到数据库之前检查数据库中的这三行。

我可以做类似的事情，但我认为这应该会导致一些额外的数据库访问。

```
private bool checkExists()...

foreach (var cardElement in cardElements)
{
    var exists = (from ce in Data.CardElements
                    where ce.CardId == cardElement.CardId
                    where ce.Area == cardElement.Area
                    where ce.ElementName == cardElement.ElementName
                    select ce).Any();
    if(exists return true)
}
return false 
```

1.  那么，我怎样才能更优雅地处理这个问题呢？
2.  是否值得尝试使用 linq 完成此任务？
3.  我应该写一些存储过程来提高性能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:36:14.510

我同意你应该让分贝做出决定。请查看使用[UPSERT](http://www.databasejournal.com/features/mssql/article.php/3739131/UPSERT-Functionality-in-SQL-Server-2008.htm)，如[本文所述](https://stackoverflow.com/questions/3143779/can-linq-to-sql-linq-to-entities-generate-a-merge-statement)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:38:36.693

问题是即使您查询数据，其他人也可以在您的查询和保存更改之间插入记录。尽管您进行了额外的查询，但您仍然必须处理违反唯一约束的异常 - 是的，每次检查都会对数据库进行额外的访问。

如果您主要关心的是性能，请使用存储过程，您可以在初始检查存在时额外使用表提示来锁定表以进行插入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T07:42:42.740

为什么不尝试插入并让数据库告诉您是否发生了任何唯一约束违规（使用 try/catch）？

# c# - 下载时更新对话框表单

> ID：10846285
> 
> 赞同：2
> 
> 时间：2012-06-01T07:36:50.753
> 
> 标签：c#, asynchronous, modal-dialog

对不起，如果标题有点不伦不类，我真的说不出来。

基本上，我所拥有的是以下场景：

我有一个用户界面（WinForm），允许用户选择多个文件下载，然后点击“下载”按钮开始下载。所有下载都是异步处理的，以避免锁定表单。但是，虽然我不希望表单因“未响应”消息而锁定，但我也不希望用户能够在下载运行时修改表单字段。

理想情况下，我想生成一个模态对话框，让用户知道下载的状态（即类似于 firefox，除了模态对话框）。这可以用一块石头杀死 2 只鸟，因为它允许用户很好地查看下载进度，同时还可以在对话框处于活动状态时阻止用户与父窗体交互。

但是，为了正确地让用户了解下载进度，我需要在运行时更新对话框。这是我碰壁的地方。我目前的想法是公开我的对话框类的一些公共方法，以便在文件完成时向其发送更新，并从后台下载线程中调用它们（使用适当的委托来更新控件等）

我很确定这会按我的意愿工作，但我只是想知道是否有更优雅的解决方案来解决这个问题。不要局限于对话方法，我对所有可能提供更好选择的方法持开放态度。

干杯，J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:52:57.957

**备选方案 1**

您可以考虑使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)，它将设置一个新线程来完成工作，并提供基于事件的机制来报告进度以及请求取消操作的方法（是否要使用它取决于您）。

要为 BackgroundWorker 设置任务，您需要将处理程序附加到事件`DoWork`，然后调用`RunWorkerAsync()`.

**备选方案 2**

另一种选择是使用`IObservable<T>`创建一种机制来响应下载进度，然后您可以使用[Reactive](http://msdn.microsoft.com/en-us/data/gg577609.aspx)进行绑定。

我认为你是 Reactive 的新手。在这种情况下，这是最好的介绍（在我看来）：

[http://channel9.msdn.com/Blogs/codefest/DC2010T0100-Keynote-Rx-curing-your-asynchronous-programming-blues](http://channel9.msdn.com/Blogs/codefest/DC2010T0100-Keynote-Rx-curing-your-asynchronous-programming-blues)

* * *

如果您有不禁用 UI 的自由...您可以在状态栏中报告进度，或者[在](http://msdn.microsoft.com/en-us/library/system.windows.forms.notifyicon.aspx)您拥有当前和任何未决的作品。

# drupal - 在 drupal 中以编程方式更改管理主题

> ID：10846290
> 
> 赞同：3
> 
> 时间：2012-06-01T07:37:17.473
> 
> 标签：drupal, drupal-6

如何以编程方式设置我的管理主题？

现在我为匿名用户使用公共主题，为会员使用会员主题。我正在使用角色主题切换器来实现这一点。
现在我希望我的管理主题为 rubik。我试图从 /admin/settings/admin 更改它，但它没有效果。

有没有办法做到这一点？我想要我的网站前端的公共主题和后端的魔方主题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T21:30:52.593

管理主题存储在`variable`表中；您可以像这样在代码中更新它：

```
variable_set('admin_theme', 'theme_name'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-06T00:32:55.467

您还可以将主题分配给特定路径。

将管理主题应用于路径`/SOMEPATH/*`

```
function MYMODULE_custom_theme() {
  if (arg(0) == 'SOMEPATH') {
    return variable_get('admin_theme');
  }
} 
```

将管理主题应用于路径别名`/SOMEPATH/*`

```
function MYMODULE_custom_theme() {
  //drupal_get_path_alias() may interfere with Global Redirect module
  $arg = explode('/', substr(drupal_get_path_alias(request_uri(), 1), strlen(base_path())));
  if ($arg[0] == 'SOMEPATH') {
    return variable_get('admin_theme');
  }
} 
```

将自定义主题应用于`/admin/*`

```
function MYMODULE_custom_theme() {
  if (arg(0) == 'admin') {
    return 'MYADMINTHEME'; //list_themes() to see available themes
  }
} 
```

选择一个函数并将其插入到您的模块中，将 MYMODULE 替换为模块名称。

# php - (php, ajax) 服务器应该如何通知客户端？

> ID：10846293
> 
> 赞同：1
> 
> 时间：2012-06-01T07:37:36.600
> 
> 标签：php, ajax, interaction

有一些交互式站点（例如这个:)）可以在不刷新任何内容的情况下注意到事件。例如，当我得到答案时，那里会出现一个红色圆圈。我知道它可以通过发送`ajax`请求来完成，比如每 5 秒发送一个请求 - 但它会杀死服务器。那么服务器应该如何向客户端发送一些改变的信息呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T07:40:27.310

像[socket.io 这样](http://socket.io/)的解决方案实现了不同的方式来保持客户端连接，包括：

*   HTML5 Websockets（新的，相当不错，但旧浏览器不支持）
*   Flash 插件（需要 Flash 插件，不支持移动设备）
*   长轮询（传统 Web 服务的杀手）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T07:39:23.830

您可以打开一个保持活动状态的 XHR，直到服务器发生状态更改以发送响应。

这称为*长轮询*。

# objective-c - KVO 不适用于类属性

> ID：10846294
> 
> 赞同：3
> 
> 时间：2012-06-01T07:37:36.853
> 
> 标签：objective-c, ios, key-value-observing

我试图理解 iOS 中的关键值观察，但我认为我没有正确地做某事。作为一个想法，我尝试将观察者添加到视图控制器的属性（与 IBOutlet 连接的视图）。这个视图（tableIndicator）是动画的，所以我想看看我是否可以让观察者在视图的框架发生变化时做出反应。

所以我在视图控制器的 viewDidLoad 中做了以下操作：

```
[tableInidicator addObserver:self forKeyPath:@"frame" options:0 context:nil]; 
```

`tableIndicator`是我的视图/类属性，我将视图控制器（self）添加为观察者，默认选项为 0，帧作为被观察的键值。

然后，我等着看这个函数是否随着帧的变化而被触发：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context{
    NSLog(@"value changed");
} 
```

...但什么也没有发生。

我不一定要修复此代码，因为它除了让我理解它之外没有任何用途，如果有人能指出我做错了什么，我将不胜感激。一些好的例子/教程也会很棒。

我找到的那些（[http://iphonedevelopment.blogspot.ro/2009/02/kvo-and-iphone-sdk.html](http://iphonedevelopment.blogspot.ro/2009/02/kvo-and-iphone-sdk.html) / [http://nachbaur.com/blog/back-to-basics-using-kvo](http://nachbaur.com/blog/back-to-basics-using-kvo)）不包括此类情况。他们只是应用于一个类以观察其属性之一的观察者，而不是类中（自定义）对象的属性，我认为这对我更有用。

先感谢您

[编辑]**对于那些会错过我对已接受答案的评论的人：**

更改视图的中心显然不会触发 frame 属性的观察者。您必须更改框架本身。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T07:53:33.690

您的代码有些地方并不完全清楚。自定义类是否`tableIndicator`派生自`UIView`? 该方法`observeValueForKeyPath`应该在该类中定义，然后将被调用。但我不确定这是最好的方法。

一般来说，更合理的方法是将您的控制器（而不是您的视图）定义为观察者。在这种情况下，您可以：

```
[self addObserver:self forKeyPath:@"view.frame" options:0 context:nil]; 
```

在某个时候从控制器内部；`observeValueForKeyPath`也将被定义为控制器中的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T08:08:56.860

检查您的 IBOutlet 是否连接正确，可能 tableIndicator ivar 指向 nil。考虑下面这个简单的代码，它可以工作。它只是创建一个窗口，在其上添加一个红色方块，然后使用 KVO 注册要通知帧更改的对象。最后它实例化一个按钮：每次点击它时，框架都会缩小尺寸，并且通知会正确触发（您将在调试控制台中看到消息）。所以你必须检查你的代码。

```
 #import "AppDelegate.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize v = _v;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];

    self.v = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 200, 200)];
    _v.backgroundColor=[UIColor redColor];
    [self.window addSubview:_v];

    UIButton *b = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    b.frame=CGRectMake(0, 300, 40, 10);
    [b setTitle:@"A" forState:UIControlStateNormal];
    [b addTarget:self action:@selector(changeFrame) forControlEvents:UIControlEventTouchUpInside];
    [_window addSubview:b];

    [_v addObserver:self forKeyPath:@"frame" options:0 context:NULL];

    return YES;
}

-(void)changeFrame {
    CGRect _f = self.v.frame;
    _f = CGRectInset(_f, 20, 20);
    _v.frame=_f;
}

-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    NSLog(@"Observing...");
} 
```

# c# - 在具有数据源的 DevExpress 组合框中选择具有空值的项目

> ID：10846295
> 
> 赞同：1
> 
> 时间：2012-06-01T07:37:42.160
> 
> 标签：c#, asp.net

如何根据 SQLDataReader 值在组合框中选择值。

ASP 代码：

```
<asp:SqlDataSource ID="PREFERENCE_DS" runat="server" 
   ConnectionString="<%$ ConnectionStrings:ASPNETDBConnectionStringTEST %>" 
   SelectCommand="SELECT [ID], [NAME] FROM [OBJECTS] WHERE ([CLASSID] = @CLASSID) UNION ALL SELECT NULL, ' Нет'">
    <SelectParameters>
       <asp:Parameter DefaultValue="3" Name="CLASSID" Type="Int32" />
    </SelectParameters>
</asp:SqlDataSource>

<dx:ASPxComboBox ID="PREFERENCE" runat="server" SelectedIndex="0" Width="430px" 
   ClientInstanceName="preference" AutoPostBack="True" 
   DataSourceID="PREFERENCE_DS" TextField="NAME" TextFormatString="{0}" 
   ValueField="ID">
   <Columns>
      <dx:ListBoxColumn FieldName="ID" Visible="False" />
      <dx:ListBoxColumn Caption="Преференция" FieldName="NAME" />
   </Columns>
</dx:ASPxComboBox> 
```

我试试

```
PREFERENCE.Value = reader["PREFERENCE"]; 
```

和

```
if (reader["PREFERENCE"] != null)
   PREFERENCE.Text = reader["PREFERENCE"].ToString();
else
   PREFERENCE.SelectedIndex = PREFERENCE.Items.FindByValue(DBNull.Value).Index; 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T17:10:44.437

根据您的代码，我想我知道您在这里尝试做什么。您的 select 语句将在联合上返回 null，所以我假设您要选择它。我建立了一个测试项目并对 Databound 事件进行选择，这似乎工作正常。您需要转到组合框控件的属性并为 DataBound 设置一个事件。使用以下代码：

```
 protected void PREFERENCE_DataBound(object sender, EventArgs e)
    {
        for (int i = 0; i < PREFERENCE.Items.Count; i++)
        {
            if (PREFERENCE.Items[i].GetValue("ID") == DBNull.Value)
                PREFERENCE.Items[i].Selected = true;
        }
    } 
```

我在这里选择 ID 作为检查空值的字段，但您可以使用名称或任何其他您想要的字段。

# mysql - SQL 使用 2 个左连接返回不正确的数据

> ID：10846297
> 
> 赞同：0
> 
> 时间：2012-06-01T07:37:48.367
> 
> 标签：mysql

我写了一个 MYSQL 脚本，它返回不正确的数据。我精通 SQL，但这个查询没有返回正确的结果。有人可以看看，看看发生了什么。问题是 noOfBids 和 noOfRatedTimes。两列的值相同，并且值也很大。

```
 select
           a.user_name as userName,
           coalesce(count(b.sp_user_name),0) as noOfBids,
           coalesce(ROUND(AVG(b.a_amount),2),0) as avgAmount,
           coalesce(count(d.sp_user_name),0) as noOfRatedTimes,
           coalesce(ROUND(AVG(d.user_rate),2),0)
    from users a
    left join project_imds b
       on b.sp_user_name = a.user_name
    left join projects c
       on b.project_code = c.project_code
    left join sp_user_rating d
       on d.sp_user_name = b.sp_user_name
    where a.user_type = 'SP'
    and a.active = 'Y'
    group by a.user_name
    order by coalesce(ROUND(AVG(d.user_rate),2),0) desc; 
```

我已经为此创建了一个解决方法，通过创建一个临时表来获取平均值并将其加入到主查询中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:43:50.307

Since I don't know the specifics of the data behind your query, this is only a guess. But perhaps you'd rather join "sp_user_rating" directly to "users", changing

```
left join sp_user_rating d
   on d.sp_user_name = b.sp_user_name 
```

to

```
left join sp_user_rating d
   on d.sp_user_name = a.user_name 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-01T07:41:59.343

```
select
       a.user_name as userName,
       coalesce(count(b.sp_user_name),0) as noOfBids,
       coalesce(ROUND(AVG(b.a_amount),2),0) as avgAmount,
       coalesce(count(d.sp_user_name),0) as noOfRatedTimes,
       coalesce(ROUND(AVG(d.user_rate),2),0)
from users as a
left join project_imds as b
   on b.sp_user_name = a.user_name
left join projects as c
   on b.project_code = c.project_code
left join sp_user_rating as d
   on d.sp_user_name = b.sp_user_name
where a.user_type = 'SP'
and a.active = 'Y'
group by a.user_name
order by coalesce(ROUND(AVG(d.user_rate),2),0) desc; 
```

# valgrind - 转储 valgrind 数据

> ID：10846306
> 
> 赞同：6
> 
> 时间：2012-06-01T07:38:46.307
> 
> 标签：valgrind, memcheck

我在运行无限循环的程序上使用 valgrind。

由于 memcheck 显示程序结束后的内存泄漏，但由于我的程序有无限循环，它永远不会结束。

那么有什么办法可以不时地从 valgrind 强制转储数据。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-01T23:21:52.473

看看[客户端请求](http://valgrind.org/docs/manual/mc-manual.html#mc-manual.clientreqs)功能`memcheck`。您可能可以使用`VALGRIND_DO_LEAK_CHECK`或类似的。

**编辑**：

作为对上述声明的回应，这是行不通的。这是一个永远循环的示例程序：

```
#include <valgrind/memcheck.h>
#include <unistd.h>
#include <cstdlib>

int main(int argc, char* argv[])
{

  while(true) {
    char* leaked = new char[1];
    VALGRIND_DO_LEAK_CHECK;
    sleep(1);
  }

  return EXIT_SUCCESS;
} 
```

当我在 valgrind 中运行它时，我得到了无穷无尽的新泄漏输出：

```
$ valgrind ./a.out
==16082== Memcheck, a memory error detector
==16082== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==16082== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==16082== Command: ./a.out
==16082== 
==16082== LEAK SUMMARY:
==16082==    definitely lost: 0 bytes in 0 blocks
==16082==    indirectly lost: 0 bytes in 0 blocks
==16082==      possibly lost: 0 bytes in 0 blocks
==16082==    still reachable: 1 bytes in 1 blocks
==16082==         suppressed: 0 bytes in 0 blocks
==16082== Reachable blocks (those to which a pointer was found) are not shown.
==16082== To see them, rerun with: --leak-check=full --show-reachable=yes
==16082== 
==16082== 1 bytes in 1 blocks are definitely lost in loss record 2 of 2
==16082==    at 0x4C2BF77: operator new[](unsigned long) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==16082==    by 0x4007EE: main (testme.cc:9)
==16082== 
==16082== LEAK SUMMARY:
==16082==    definitely lost: 1 bytes in 1 blocks
==16082==    indirectly lost: 0 bytes in 0 blocks
==16082==      possibly lost: 0 bytes in 0 blocks
==16082==    still reachable: 1 bytes in 1 blocks
==16082==         suppressed: 0 bytes in 0 blocks
==16082== Reachable blocks (those to which a pointer was found) are not shown.
==16082== To see them, rerun with: --leak-check=full --show-reachable=yes
==16082== 
==16082== 2 bytes in 2 blocks are definitely lost in loss record 2 of 2
==16082==    at 0x4C2BF77: operator new[](unsigned long) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==16082==    by 0x4007EE: main (testme.cc:9)
==16082== 
==16082== LEAK SUMMARY:
==16082==    definitely lost: 2 bytes in 2 blocks
==16082==    indirectly lost: 0 bytes in 0 blocks
==16082==      possibly lost: 0 bytes in 0 blocks
==16082==    still reachable: 1 bytes in 1 blocks
==16082==         suppressed: 0 bytes in 0 blocks
==16082== Reachable blocks (those to which a pointer was found) are not shown.
==16082== To see them, rerun with: --leak-check=full --show-reachable=yes 
```

程序不会终止。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T21:16:04.333

使用 valgrind 3.7.0，您可以使用 vgdb 从 shell 触发 (ao) 泄漏搜索。

参见例如[http://www.valgrind.org/docs/manual/mc-manual.html#mc-manual.monitor-commands](http://www.valgrind.org/docs/manual/mc-manual.html#mc-manual.monitor-commands) （您可以使用 vgdb 从 gdb 或 shell 命令行执行这些监控命令）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-14T15:02:41.727

使用 VALGRIND_DO_LEAK_CHECK (acm answer) 对我有用。
备注：
- 必须使用 valgrind (valgrind myProg ...) 启动程序
- 必须安装 valgrind-devel 包（要有）

# c# - ASP.NET 网站的自定义登录机制

> ID：10846307
> 
> 赞同：3
> 
> 时间：2012-06-01T07:38:46.763
> 
> 标签：c#, asp.net, .net, login

我在一个 ASP.NET 网站上工作，我需要摆脱一些自定义但简单的登录机制。我从著名的[Employee Info Starter Kit开始](http://eisk.codeplex.com/)

这是我到目前为止所拥有的：

**在 ASP.NET 页面上：**

```
protected void ButtonLogOn_Click(object sender, EventArgs e)
{
    if (String.IsNullOrEmpty(txtUserName.Value) || String.IsNullOrEmpty(txtPassword.Value))
        labelMessage.Text = MessageFormatter.GetFormattedErrorMessage("You can login using a username and a password associated with your account. Make sure that it is typed correctly.");
    else
    {
        //if the log-in is successful
        LoginPage LoginBack = new LoginPage();

        if (LoginBack.VerifyCredentials(txtUserName.Value, txtPassword.Value) == 0)
        {
            SiteLogin.PerformAuthentication(txtUserName.Value, checkBoxRemember.Checked);
        }
        else
        {
            labelMessage.Text = MessageFormatter.GetFormattedErrorMessage("<strong>Login Failed!</strong><hr/>The username and/or password you entered do not belong to any User account on our system.<br/>You can login using a username and a password associated with your account. Make sure that it is typed correctly.");
        }
    }
}

protected void ButtonAdminLogOn_Click(object sender, EventArgs e)
{
    if (String.IsNullOrEmpty(txtUserName.Value) || String.IsNullOrEmpty(txtPassword.Value))
        labelMessage.Text = MessageFormatter.GetFormattedErrorMessage("<strong>Login Please!</strong><hr/>You can login using a username and a password associated with your account. Make sure that it is typed correctly.");
    else
    {
        //if the log-in is successful
        if (txtUserName.Value == "admin" && txtPassword.Value == "123123")
        {
            SiteLogin.PerformAdminAuthentication("admin", checkBoxRemember.Checked);
        }
        else
        {
            labelMessage.Text = MessageFormatter.GetFormattedErrorMessage("<strong>Login Failed!</strong><hr/>The username and/or password you entered do not belong to any Administrator ccount on our system.<br/>You can login using a username and a password associated with your account. Make sure that it is typed correctly.");
        }
    }
} 
```

**还有一个实用类**

```
public static void PerformAuthentication(string userName, bool remember)
{
    FormsAuthentication.RedirectFromLoginPage(userName, remember);

    if (HttpContext.Current.Request.QueryString["ReturnUrl"] == null)
    {
        RedirectToDefaultPage();
    }
    else
    {
        HttpContext.Current.Response.Redirect(HttpContext.Current.Request.QueryString["ReturnUrl"]);
    }
}

public static void PerformAdminAuthentication(string userName, bool remember)
{
    FormsAuthentication.RedirectFromLoginPage(userName, remember);

    if (HttpContext.Current.Request.QueryString["ReturnUrl"] == null)
    {
        RedirectToAdminDefaultPage();
    }
    else
    {
        HttpContext.Current.Response.Redirect(HttpContext.Current.Request.QueryString["ReturnUrl"]);
    }
} 
```

我的登录表单有两个按钮： 管理员登录是硬编码的名称/密码。正常的登录例程返回到另一个程序集，该程序集调用 Web 服务并根据域登录检查用户名和密码。

现在，还有另一个文件有代码，这让我很困惑。

**全球.asax**

```
<script RunAt="server">
protected void Application_AuthenticateRequest(Object sender, EventArgs e)
{
    if (HttpContext.Current.User != null)
    {
        if (HttpContext.Current.User.Identity.IsAuthenticated)
        {
            if (HttpContext.Current.User.Identity.AuthenticationType != "Forms")
            {
                throw new InvalidOperationException("Only forms authentication is supported, not " +
                        HttpContext.Current.User.Identity.AuthenticationType);
            }

            IIdentity userId = HttpContext.Current.User.Identity;

            //if role info is already NOT loaded into cache, put the role info in cache
            if (HttpContext.Current.Cache[userId.Name] == null)
            {
                string[] roles;

                if (userId.Name == "admin")
                {
                    roles = new string[1] { "administrators" };
                }
                else if (userId.Name == "member1")
                {
                    roles = new string[1] { "employees" };
                }
                else
                {
                    roles = new string[1] { "public" };
                }

                //1 hour sliding expiring time. Adding the roles in cache. 
                //This will be used in Application_AuthenticateRequest event located in Global.ascx.cs 
                //file to attach user Principal object.
                HttpContext.Current.Cache.Add(userId.Name, roles, null, DateTime.MaxValue, TimeSpan.FromHours(1), CacheItemPriority.BelowNormal, null);
            }

            //now assign the user role in the current security context
            HttpContext.Current.User = new GenericPrincipal(userId, (string[])HttpContext.Current.Cache[userId.Name]);
        }
    }

}
</script> 
```

该网站有一些关于允许免费访问的页面，但其余的页面供管理员或员工使用。我的管理员用户名/密码是固定的，但员工登录是以域格式输入的，需要在目标域上进行验证（全部完成），然后设置员工角色。

我如何在 Global.asax 文件的 Application_AuthenticateRequest 方法中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:46:53.380

Set different auth modes for different folders (via [Web.config](http://msdn.microsoft.com/en-us/library/ms178683.aspx) or even just [IIS snap-in](http://technet.microsoft.com/en-us/library/cc733010%28WS.10%29.aspx)):

*   Anonymous for root (with about pages)
*   Forms auth for ~/Admin area
*   Windows/NTLM for ~/Employers area

* * *

Also you can use extended [Login control](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.login.aspx) with custom [Membership provider](http://msdn.microsoft.com/en-us/library/system.web.security.membership.aspx).

# jquery - 本地化 jQuery UI TimePicker 插件

> ID：10846313
> 
> 赞同：4
> 
> 时间：2012-06-01T07:39:19.757
> 
> 标签：jquery, jquery-ui, jquery-plugins

我一直在使用这个奇妙[的将 Timepicker 添加到 jQuery UI Datepicker](http://trentrichardson.com/examples/timepicker/)

在我的示例中，我使用 HTML`select`来更改日历的区域设置（英语和意大利语）。
我已经能够本地化`datepicker`日历内部，但我无法将`timePicker`内部本地化。

我想改变`timeText`，`hourText`但`minuteText`找不到出路。
例如，它想`hourText`从**“Hour”**更改为**“Ora”**

我试过了

```
$(".order-date").datetimepicker("option", "timeText", currentCulture == "en" ? "Time" : "Tempo");
$(".order-date").datetimepicker("option", "hourText", currentCulture == "en" ? "Hour" : "Ora");
$(".order-date").datetimepicker("option", "minuteText", currentCulture == "en" ? "Minute" : "Minuto"); 
```

但这不起作用。我在这里想念什么？

到目前为止我所做的演示：http: [//jsfiddle.net/naveen/qysVp/](http://jsfiddle.net/naveen/qysVp/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T08:42:19.277

我不确定这是否是最好的方法，因为我没有找到任何通过选项更改文本的动态方法，您可以使用以下代码来实现这一点

```
 var timeText =  currentCulture == "en" ? "Time" : "Tempo";
 var hourText =  currentCulture == "en" ? "Hour" : "Ora";
 var minuteText  =  currentCulture == "en" ? "Minute" : "Minuto";

 $(".order-date").datetimepicker('destroy');
 $(".order-date").datetimepicker({
        ampm: true,
        hourText : hourText,
        minuteText: minuteText,
        timeText: timeText,

 });
 $(".order-date").datetimepicker("option", $.datepicker.regional[currentCulture]); 
```

通过使用更新的设置销毁并重新启动日期选择器。

[工作小提琴](http://jsfiddle.net/joycse06/qysVp/4/)

# ios - 如何在 cocos2d 中加载大尺寸 CCTMXTiledMap？

> ID：10846316
> 
> 赞同：2
> 
> 时间：2012-06-01T07:39:33.217
> 
> 标签：ios, cocos2d-iphone

我尝试设计一个大世界的cocos2d游戏。世界平铺地图非常大，可能有 20 个 ipad 屏幕尺寸。我想知道如何将 CCTMXTiledMap 加载到屏幕中？如果我直接添加到屏幕，会不会占用太多内存？如果是这样，是否有解决此问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T11:00:50.797

瓦片地图的内存使用取决于瓦片的大小以及需要将多少瓦片转换为精灵，例如，如果您想运行它们的动画。

假设您的图块大小为 32x32 像素。iPad 尺寸的 20 倍意味着 20.480x15.360 点。除以 32 为您提供 640x480 瓦片的地图瓦片大小，或总共 307.200 个瓦片。假设每个图块使用 64 字节内存（在较旧的 cocos2d 版本中它小于 64 字节），您的地图最终会使用近 19 MB 的内存。这还不算纹理。

现在，对于您通过 CCSprite 接口处理的每个图块，例如通过更改其中一个精灵属性或在其上运行操​​作，cocos2d 将把该图块转换为常规 CCSprite。上次我检查时，每个 CCSprite 对象使用大约 420 字节。因此，如果您要更改每个图块的颜色属性，从而将所有图块转换为 CCSprite 对象，则图块映射将消耗 123 MB 内存。同样，不包括纹理。

你可以试试 KoboldTouch 中的[Tilemap 渲染器](http://www.koboldtouch.com)。它可以处理非常大的贴图（数百万贴图，即 4000x4000 贴图）并以 60 fps 的速度渲染。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:46:54.160

如果你试图一次加载所有的瓦片，它肯定会占用太多的内存。

看看这个关于[CCTMXTilesMap](http://www.raywenderlich.com/1163/how-to-make-a-tile-based-game-with-cocos2d)的教程。

# javascript - 声明有和没有原型的变量有什么区别

> ID：10846318
> 
> 赞同：3
> 
> 时间：2012-06-01T07:39:40.787
> 
> 标签：javascript

（通过原型）有什么区别

```
var Todo = {};

Todo.prototype.name = "...";
Todo.prototype.hello = function() { ... } 
```

Vs（变量和函数“外部”对象）

```
var Todo = {}
Todo.name = "..."
Todo.hello = function() { ... } 
```

甚至以下内容：对象中的变量和函数

```
var Todo = {
    name: "...",
    hello = function() { ... }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T07:47:34.027

第一个没有意义，因为您正在处理对象实例（`({}) instanceof Object === true`），它没有`prototype`属性（`Object`does）。

您可能正在询问这两种模式之间的区别......

```
var ObjA = function() {
    this.method = function() {};
};

var ObjB = function() {};

ObjB.prototype.method = function() {}; 
```

[js小提琴](http://jsfiddle.net/36ZGp/)。

前者在实例化时会使用更多内存——每个对象都有自己的`method`. 后者不会每个都有自己的`method`，对象`method`上的生命，`prototype`当它试图在父级上访问时，它是原型链上的下一个命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T07:53:01.110

觉得像

使用原型声明的属性或函数是 Todo 的实例成员。

没有原型声明的属性或函数是 Todo 的静态成员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T07:44:53.740

`Todo.prototype`也是一个对象，所以不同的是如果你用原型声明属性，那么从这个原型创建的每个对象都将具有该属性，否则该属性仅适用`Todo`于对象自身。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T07:52:37.483

方法#1 和#2（与示例#3 几乎相同）之间的显着区别在于`new`关键字，如果您通过原型扩展函数，则需要使用该关键字，例如

```
var Todo1 = function() {};
Todo1.prototype.name = "Foobar";

var Todo2 = {name: "Foobar" }

var a = Todo1;
console.log(a.name); // no property retrieved

var b = Todo2;
console.log(b.name); // Foobar

var c = new Todo1;
console.log(c.name); // Foobar 
```

# php - 无法更改默认时区

> ID：10846320
> 
> 赞同：0
> 
> 时间：2012-06-01T07:39:56.907
> 
> 标签：php, mysql, timezone, timestamp

我使用[http://www.webhostingpad.com/](http://www.webhostingpad.com/)来托管我的网站，但我确实需要将默认时区更改为欧洲/塔林时间。我写信给他们，他们说他们不能为我改变它。

所以我尝试**了 date_default_timezone_set('Europe/Tallinn');** 但 php.ini 会覆盖它或 smth。因为如果我检查 phpinfo 它仍然有“美国/芝加哥”或 smth。

我也无法更改 php.ini 文件，但我复制了它并将其添加到可以更改的目录中。添加**了 date.timezone = "Europe/Tallinn"**并尝试**了 ini_set('date.timezone', 'Europe/Tallinn');** 它更改了 phpinfo 中的默认时区，但如果在 mysql 数据库中我使用：**on update CURRENT_TIMESTAMP**

**它添加的日期仍然是错误的 8 小时。**

有没有人有任何建议如何解决这个问题？

**更新：**

由于任何事情都没有导致解决方案，我的服务提供商说：如果您升级合同，那么您可以更改 mySQL 时区。

所以现在我试图通过用 php 添加当前日期时间来获得一些结果。

```
INSERT INTO points  (user_id, game_id, points, dateRight) VALUES($userid, $game, $points, sysdate()+3600)"); 
```

<< 这没有帮助。有人可以帮忙吗？谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:42:44.837

尝试设置[您](http://php.net/manual/en/function.setlocale.php)当前的时区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T10:41:29.020

您可以使用 date_default_timezone_set 设置 php 默认时区，对于 mysql 看[这里](https://stackoverflow.com/questions/896305/is-there-an-equivalent-to-phps-date-default-timezone-set-that-works-in-mysq)

为什么选择 mysql，因为更新 current_timestamp 的时间戳使用 mysql 默认时区。

# facebook - Facebook iFrame 选项卡上的 Facebook 喜欢/推荐按钮

> ID：10846324
> 
> 赞同：0
> 
> 时间：2012-06-01T07:40:14.473
> 
> 标签：facebook, facebook-like

我想在 facebook 选项卡中添加一个喜欢/推荐按钮。facebook 选项卡的一个例子是[这个](http://www.facebook.com/nike/app_265092000187882)。

使用 facebook like/recommend 的问题是，如果我们已经完成了粉丝门控并且用户必须在他/她查看选项卡的内容之前喜欢该页面，那么喜欢/推荐将始终显示为灰色，因为页面被喜欢了。

所以我特别希望用户喜欢页面的一部分而不是完整的页面。

我已经浏览了网络，发现了一些像[这样](http://www.socialmediaexaminer.com/how-to-add-a-like-button-to-your-facebook-tabs/)和[这样](http://www.daddydesign.com/wordpress/how-to-add-a-like-button-to-your-facebook-static-fbml-tab/)的黑客攻击。我不想使用[fb:comments](http://developers.facebook.com/docs/reference/fbml/comments/)或[fb:share](http://developers.facebook.com/docs/share/)，因为它们已被弃用。有没有其他办法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:31:34.027

将此代码放在您的页面中：您需要为您的特定链接指定 data-href。将其留空会使 facebook 喜欢当前页面。

```
<div class="fb-like" data-href="http://www.google.com" data-send="true" data-width="450" data-show-faces="true"></div> 
```

# c# - 如何在datagridview c#.net中选中和取消选中复选框

> ID：10846325
> 
> 赞同：0
> 
> 时间：2012-06-01T07:40:22.117
> 
> 标签：c#

谁能告诉我如何检查数据网格视图中的复选框？

我的 UI 中有一个 datagridview，但复选框列不起作用。（我无法选中复选框）

任何友好的答复将不胜感激！:)

# facebook-graph-api - Facebook API“喜欢”差异

> ID：10846335
> 
> 赞同：0
> 
> 时间：2012-06-01T07:41:02.630
> 
> 标签：facebook-graph-api, facebook-opengraph

这是我的应用页面：[https](https://www.facebook.com/pages/When-Biebs-Attack/402350233140999) ://www.facebook.com/pages/When-Biebs-Attack/402350233140999 如您所见，它是从我的应用控制面板创建的实际“应用页面”。所以你会假设它会与应用程序链接。

现在这里是（唯一）将 App ID 用于点赞按钮的网站： http: [//cosmati.net/biebsattack/](http://cosmati.net/biebsattack/)

这种差异不仅很奇怪，而且当我在页面上添加了“赞”按钮后，它就有 22 个赞。我已经在我的代码中仔细检查了我的 App ID。它确实与我的应用程序控制面板一致。我尝试了 HTML5 和 XFBML 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:55:43.863

好吧，我不知道它为什么会这样做，但我发现您可以通过将 href 标记添加到“赞”按钮并将其指向您的 Facebook 页面的 url 来直接链接它们。例如，我的点赞按钮现在看起来像这样：

```
<fb:like href="https://www.facebook.com/pages/When-Biebs-Attack/402350233140999" send="false" width="450" show_faces="true" font="arial"></fb:like> 
```

现在，当我访问我的网站 (http://cosmati.net/biebsattack/) 时，我不仅看到了 1 个赞（我的），而且还看到了管理我的页面和查看见解的链接。有点整洁。不知道为什么当我使用 App ID 时默认情况下它不这样做，但无论如何。

# iphone - 滚动时重复其他部分值的单元格

> ID：10846337
> 
> 赞同：-1
> 
> 时间：2012-06-01T07:41:05.470
> 
> 标签：iphone, ios, uitableview, sections

我已经解决了 2 天的问题。我参考了一些 SO 问题，例如 [Link 1](https://stackoverflow.com/questions/7760531/troubles-with-uitableview-sections-cells-are-repeating-in-each-section)。问题是**我有 2 行和数组计数部分的组表**。当我滚动表格时，意味着第 4 部分重复了第 1 部分的值，但它在 3 部分中效果很好。这两行都取第一节行的值

我的代码是：

```
static NSString *CellIdentifier = @"Cell";
cell = (CopyableTableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[CopyableTableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 
                                         reuseIdentifier:CellIdentifier] autorelease];
}

cell.delegate = self;

/*UITableViewCell *cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil] autorelease];

//cell.detailTextLabel.lineBreakMode=UILineBreakModeWordWrap;
cell.detailTextLabel.numberOfLines=2;
cell.detailTextLabel.font=[UIFont systemFontOfSize:14];*/

// Configure the cell...
DLog(@"");
//cell setBackgroundColor:[UIColor colorWithRed:0.7 green:0.7 blue:0.7 alpha:0.8]]
cell.textLabel.textColor = [UIColor blackColor];//[UIColor colorWithRed:0.22 green:0.33 blue:0.53 alpha:0.8];
cell.detailTextLabel.textColor = [UIColor blackColor];  
cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    l=indexPath.section;

    switch (indexPath.row) {
        case 0: 
            cell.textLabel.text =@"Quantity";

            if (indexPath.section ==k) {
                    cell.detailTextLabel.text = self.qtyValue;
                    [cell.detailTextLabel setTag:indexPath.section];

            }

        break;
        case 1:
            cell.textLabel.text = @"Unit";

            if (indexPath.section ==j) {
                cell.detailTextLabel.text = [self.unitValue valueForKey:@"val"];
                [cell.detailTextLabel setTag:indexPath.section];                
            }

            break;

        default:
            break;
    } 
```

任何人都可以为此提供解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T10:25:47.490

如果您的要求是，您有多个部分，每个部分中有 2 行/单元格，那么我宁愿建议您在 cellforRowAtIndexPath 中编写这样的代码：

```
switch(indexPath.row)
{
   case 0:   
   {
      switch(indexPath.section)
      {
          case 0:
          {
             //Statement needs to execute for cell0 in section 0.
          }
            break;
          case 1:
          {
             //Statement needs to execute for cell0 in section 1.
          }
            break;
          case 2:
          {
             //Statement needs to execute for cell0 in section 2.
          }
            break;
          case 3:
          {
             //Statement needs to execute for cell0 in section 3.
          }
            break;
      } 
   }
    break;
   case 1:   
   {
      switch(indexPath.section)
      {
          case 0:
          {
             //Statement needs to execute for cell1 in section 0.
          }
            break;
          case 1:
          {
             //Statement needs to execute for cell1 in section 1.
          }
            break;
          case 2:
          {
             //Statement needs to execute for cell1 in section 2.
          }
            break;
          case 3:
          {
             //Statement needs to execute for cell1 in section 3.
          }
            break;
      } 
   }
     break;
 default:
     break;
} 
```

# javascript - Javascript 滚动菜单，仅在页面向下某些方式后启动

> ID：10846339
> 
> 赞同：0
> 
> 时间：2012-06-01T07:41:23.460
> 
> 标签：javascript, css, html, menu, scroll

我想要一个从页面的某个部分（如标题下方）开始的滚动菜单，但一直保持在那里，直到您向下滚动并到达浏览器窗口的顶部，然后跟随您向下浏览页面的其余部分。

任何人都知道如何做到这一点？我在网上的任何地方都找不到它。我见过其他类似的，但没有一个移到窗口顶部。

当您查看电子邮件时，gmail 上有一个很好的例子。工具栏位于电子邮件框的顶部，但是一旦您滚动经过电子邮件框，它就会跟随您向下浏览页面。

我知道这`position:absolute;top:0;`会使它保持在顶部而没有流畅的运动（我讨厌它，因为它看起来很邋遢）。

*****编辑*****

我真的只需要知道如何检测菜单 div 是否位于页面顶部。我可以做一个模拟的事情，如果你向下滚动菜单 div 有多远，它将开始向下滚动，但我宁愿实际上得到菜单 div 是否超过浏览器窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:55:12.227

这是固定和绝对的混合位置，您将处理.scroll 事件并在其之间切换。您可以在此处找到一个示例 [创建一个位于 div 内的浮动框](https://stackoverflow.com/questions/5454821/creating-a-floating-box-which-stays-within-a-div)

# sql-server-2008 - 从一个沉重的表中进行数据库设计和数据检索

> ID：10846340
> 
> 赞同：0
> 
> 时间：2012-06-01T07:41:25.630
> 
> 标签：sql-server-2008, database-design, query-optimization, data-retrieval

我需要在我的数据库表中有 612 列。根据数据类型的列数是：

BigInt – 150 (PositionCol1, PositionCol2…………PositionCol150)

诠释 - 5

小整数 - 5

日期 - 150（SourceDateCol1，SourceDate2，………….SourceDate150）

日期时间 - 2

Varchar(2000) – 150 (FormulaCol1, FormulaCol2………………FormulaCol150)

位 - 150（IsActive1，IsActive2，……………….IsActive150）

当用户第一次进行导入时，数据将存储在 PositionCol1、SourceDateCol1、FormulaCol1、IsActiveCol1 等（其他 datetime、Int、Smallint 列）中。

当用户第二次进行导入时，数据将存储在 PositionCol2、SourceDateCol2、FormulaCol2、IsActiveCol2 等（其他日期时间、Int、Smallint 列）……等等。

正在为其导入数据的表中有一个 ProjectID 列。

在开始导入过程之前，用户将 excel 列名与数据库列名（PositionCol1、SourceDateCol1、FormulaCol1、IsActiveCol1）进行映射，并将此映射存储在单独的表中；这样当检索到的数据可以显示在这些映射列名而不是数据库列名下。例如

PositionCol1 可以映射到 SAPDATA

SourceDateCol1 可以映射到 SAPDATE

FormulaCol1 可以映射到 SAPFORMULA

IsActiveCol1 可以映射到 SAPISACTIVE

每天将在此表中添加 40,000 行，我的问题是，从长远来看，SQL 是否能够处理这么多数据的负载？

大多数时候，一行将有大约 200-300 列中的数据；在最坏的情况下，它将在所有 612 列中都有数据。考虑到这一点，我是否应该对设计进行一些更改以避免将来出现任何性能问题？如果是这样，请建议可以做什么？

如果我坚持我目前的设计，除了索引之外，我应该注意哪些方面才能在从这个巨大的表中检索数据时获得最佳性能？

如果我需要检索特定实体的数据，例如 SAPDATA，我将不得不转到我的映射表，在这种情况下获取针对 SAPDATA 即 PositionCol1 的数据库列名称；并取回它。但是，这样，我将不得不编写动态查询。还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:45:41.983

Don't stick with your current design. Your repeating groups are unweildy and self limiting... What happens when somebody uploads 151 times? Normalise this table so that you have one of each type per row rather than 150\. You won't need mapping this way as you can select SAPDATA from the positioncol without worring if it is 1-150\.

You probably want a PROJECTS table with an ID, a PROJECT_UPLOADS table with an ID and an FK to the PROJECTS table. This table would have Position, SourceDate, Formula and IsActive given your use-case above.

Then you could do things like

select p.name, pu.position from PROJECTS p inner join PROJECT_UPLOADS pu on pu.projectid = p.id WHERE pu.position = 'SAPDATA'

etc.

# php - codeigniter中这些行的含义是什么

> ID：10846342
> 
> 赞同：0
> 
> 时间：2012-06-01T07:41:52.290
> 
> 标签：php, codeigniter

```
class Demo extends CI_Controller
{
  function __construct()
  {
    parent::__construct();
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T07:43:32.880

演示类的构造函数正在调用其父类的构造函数，在这种情况下是 CI_Controller

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T08:50:29.763

类`Demo`正在扩展`CI_Controller`.

所以`CI_Controller`类的所有公共属性都可以被覆盖`Demo`。

`function __construct()`意思是`constructor`如果类`Demo`。

其中`function __construct()`,`parent::__construct()`表示在构造函数中，我们也在调用父类的构造函数。

# android - Android双指缩放文本

> ID：10846344
> 
> 赞同：0
> 
> 时间：2012-06-01T07:41:59.407
> 
> 标签：android

我想在 android 中进行捏缩放文本如何做到这一点。我见过很多例子，但它们与捏缩放图像有关，任何帮助都是光荣的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:46:10.603

使用 a[`WebView`](http://developer.android.com/reference/android/webkit/WebView.html)显示文本将是实现捏合缩放的最简单方法。您可以使用`WebView`'`loadData`方法来显示您的文本。

# c# - 如何设置和部署过程

> ID：10846348
> 
> 赞同：1
> 
> 时间：2012-06-01T07:42:23.120
> 
> 标签：c#, .net, xml

```
XmlReader reader = XmlReader.Create(@"E:\NewFolder\WindowsFormsApplication1\WindowsFormsApplication1\QuestionFile.xml") 
```

在我的应用程序中，我已经读取了一个 xml 文件，该文件位于我电脑中特定位置的位置，但现在我想部署我的应用程序，当我朗读我的 exe 并安装在其他电脑上时，我收到错误，**读取**xml 文件的错误所以应该我这样做。
就像我曾经阅读过xml文件一样。

如果有人帮助我，我将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:12:01.537

您可以将 XML 包含在与您的程序相同的文件夹中。在代码中，动态构建字符串，使用以下内容获取程序当前正在执行的文件夹的名称：

```
Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location); 
```

之后您需要做的就是将 XML 文件的名称`Path.Combine`附加或附加到字符串中。

**编辑：**

（您需要包括对`System.IO`和的引用`System.Reflection`）。

您可以创建单独保存路径的字符串，然后使用它来创建您的阅读器：

```
string xmlLocation = Path.Combine(Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location), "QuestionFile.xml");
XmlReader reader = XmlReader.Create(xmlLocation); 
```

请记住，如果您在 VS 的调试中运行它，这将指向您的调试目录，因此请确保其中存在 XML 文件的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:59:58.720

您可以将 questions.xml 与 EXE 打包为嵌入式资源吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T08:09:24.737

好吧，我认为你有两个选择：

1) 将 xml 作为嵌入式资源包含在您的解决方案中，并使用 GetManifestResourceStream 读取它。这是有关如何执行此操作[的更多信息。](http://blogs.msdn.com/b/alexdan/archive/2007/12/19/loading-embedded-resources-in-c-using-getmanifestresourcestream.aspx)

2) 将其包含在解决方案中并将文件的构建操作设置为内容。然后在您的 MSI 安装程序包中，您可以包含该项目的“内容”输出。这意味着该文件最终将作为单独的物理文件包含在应用程序的安装路径中。有关更多详细信息，请参见[此处](http://msdn.microsoft.com/en-us/library/cc766795.aspx)。第 2 步展示了如何添加不同的输出。

# c# - 基于子对象过滤器同时在主对象上的实体框架查询

> ID：10846350
> 
> 赞同：0
> 
> 时间：2012-06-01T07:42:39.390
> 
> 标签：c#, linq, entity-framework, entity-framework-4, entity-framework-4.1

我有一个名为 Query 的类，其中有一个名为 CreatedBy 的字段，即创建它的用户名。我还有一个名为 Permissions 的类，它具有查询的权限。

我创建了一个查询，该查询根据当前用户返回我，用户有权访问的查询，基于 Permissions 集合，但我需要将其与用户还创建的查询一起加入。

如果由于某种原因，创建它的用户也在 Permissions 集合中，则不应返回两次。

这是我的代码

```
public class Query
    {
        public int QueryId { get; set; }
        public string QueryName { get; set; }
        public string QuerySql { get; set; }
        public string CreatedBy { get; set; }
        public string QueryType { get; set; }
        public string RequestType { get; set; }
        public string Column1 { get; set; }
        public string Operator1 { get; set; }
        public string Value1 { get; set; }
        public string Connector2 { get; set; }
        public string Column2 { get; set; }
        public string Operator2 { get; set; }
        public string Value2 { get; set; }
        public string Connector3 { get; set; }
        public string Column3 { get; set; }
        public string Operator3 { get; set; }
        public string Value3 { get; set; }
        public virtual ICollection<Permission>  Permissions { get; set; }
    }

  public class Permission
    {
        public int PermissionId { get; set; }
        public string UserName { get; set; }
    }

   public IQueryable<Query> GetQueriesForUser(string userName)
        {
            return _context.Queries.Where(q => q.Permissions.Any(p => p.UserName.Equals(userName)));
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T08:43:52.267

你确定你需要加入吗？看起来你需要`UNION ALL`：

```
_context.Queries.Where(q => q.Permissions.Any(p => p.UserName == userName)).Concat(
    _context.Queries.Where(q => q.CreatedBy == userName)); 
```

# asp.net - .ASPXAUTH 和 .ASPXANONYMOUS 在调试环境中被删除

> ID：10846351
> 
> 赞同：0
> 
> 时间：2012-06-01T07:42:39.920
> 
> 标签：asp.net, asp.net-mvc, cookies, profile, membership

我正在本地机器上调试我的项目。我将信息存储在两个默认 cookie .ASPXAUTH 和 .ASPXANONYMOUS 中。但是，我意识到每次停止调试时它们都会被删除。因此 SQL Server 永远无法匹配以前的配置文件设置。

我阅读[了这个链接](https://stackoverflow.com/questions/2240908/aspxanonymous-cookie-getting-overwritten-on-every-fresh-session)，它说这些 cookie 仅在您获得真实 IP 地址时才有效。我没有可用于上传测试的 .net+SQL 服务器。问题是，我可以保留 cookie 或以某种方式使其在我的本地机器上工作吗？谢谢

```
<authentication mode="Forms">
  <forms name=".ASPXAUTH" defaultUrl="~/Home/Index" loginUrl="~/Account/LogOn"
         protection="All" cookieless="AutoDetect" slidingExpiration="true" timeout="8760" />
</authentication>

<anonymousIdentification cookieName=".ASPXANONYMOUS" cookieProtection="All" cookieless="AutoDetect"
         enabled="true" cookieSlidingExpiration="true" cookieTimeout="8760" /> 
```

编辑：要了解问题，请参阅下面的这张图片。每次我停止/开始新的调试时，.NET 成员都不会继续使用第一行作为 UserId，而是会不断创建新条目。原因是调试停止后，上次会话中的旧 cookie 已被删除。

![在此处输入图像描述](../Images/a05e21ce41717cc83dd1b0e6c338344a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:52:15.713

您是否尝试验证是否未从您的 Internet 选项中检查删除浏览历史记录。如果选中，则可能正在删除 cookie。

# php - PHP - 需要基于 MAX(date_start) 值的 rates.rate 中的数据

> ID：10846361
> 
> 赞同：0
> 
> 时间：2012-06-01T07:43:10.073
> 
> 标签：php, max

今天早上有点昏暗有这个问题

```
$result = $DBH->query("SELECT MAX(date_start) as date_start, rates.rate as rate FROM rates WHERE unitID=$ID AND rates.date_start <= $start "); 
```

这只有一半有效，我的意思是我总是得到最大日期但`rates.rate`不更新，为了解释更多，我需要`rates.rate`基于值的数据`MAX(date_start)`

抱歉，如果不清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:58:39.947

```
SELECT date_start,
       rate
FROM   rates
WHERE  unitid = ?
       AND date_start <= ?
ORDER  BY date_start DESC
LIMIT  1 
```

# xslt - 如何复制一个节点并更改另一个节点

> ID：10846363
> 
> 赞同：0
> 
> 时间：2012-06-01T07:43:13.367
> 
> 标签：xslt, xslt-1.0, xslt-2.0

现在我被简单的任务困住了。我有代码：

```
<m:node1>
...
</m:node1>
<namespace:something attribute1='1'/>
<namespaceOther:other attribute1='2'/>
<namespaceOther:some attribute1='1'/> 
```

所以如果 attribute1=1 我需要这个：

```
<m:node1>
...
</m:node1>
<namespace:something attribute1='1'/>
<namespaceOther:some attribute1='1'/> 
```

我需要做的是复制`<m:node1>`它的所有孩子并检查是否`<namespace:* attribute1`相等然后复制它，否则不复制。

我想要类似的东西，`<template match="*:*">`但那是不可能的。想不通这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:13:17.763

这应该有效：

```
<xsl:copy-of select="m:node1" />
<xsl:copy-of select="*[@attribute1='1']" /> 
```

# c# - 正则表达式查找具有实际数学值的百分号

> ID：10846368
> 
> 赞同：2
> 
> 时间：2012-06-01T07:43:26.797
> 
> 标签：c#, .net, regex, vb.net, replace

我有一个像`30+20%`. 现在我想`20%`用`(20/100)`. 就是这样。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-01T07:46:33.897

如果百分比没有出现在字符串中的任何其他情况下，您甚至不需要正则表达式：

```
s = s.Replace("%", "/100"); 
```

要添加括号，您需要正则表达式：

```
s = Regex.Replace(s, @"(\d{1,3})%", "($1/100)"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T07:46:18.493

```
string s="30+20%";
s=s.Replace("%","/100)");
s=s.Replace("+","+("); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-01T07:46:49.910

我只是假设你运行 Perl

```
input="30+20%"
echo $input | perl -pe 's#(\d+)%#\($1/100\)#g' 
```

编辑：只需阅读标签，无论如何，正则表达式应该在 C# 中工作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T07:46:01.680

这应该是一个容易尝试的正则表达式。1 到 3 位数字，后跟百分号。您需要捕获 1-3 位数字组以进行反向引用，并使用它来创建 (DIGITS/100) 字符串。你可以在这里玩：http://gskinner.com/RegExr/ 来学习正则表达式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-01T07:55:10.140

我不确定您使用的是哪种编程语言，但这就是您在 python 中执行此操作的方式：

```
import re
re.sub(r'(\d*)%', r'\1/100', '30+20%') 
```

返回的字符串将为“30+20/100”。

说明：让我们看一下正则表达式。r'\d*%' 是匹配一系列数字后跟 % 符号的正则表达式。我用括号 (\d*) 告诉正则表达式编译器数字系列（也就是数字）是第一组。第二个参数告诉子函数如何替换匹配的字符串。参数 '\1/100' 告诉子函数我希望它用正则表达式（通过 \1 部分）匹配的第一组的值替换匹配的字符串，然后是 /100。

您可以查看[python re 模块](http://docs.python.org/library/re.html)以获取更多信息。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-01T08:05:07.493

**试试这个**

```
string resultString = null;
try {
    resultString = Regex.Replace(subjectString, @"\b(\d+)%", "($1/100)");
} catch (ArgumentException ex) {
    // Syntax error in the regular expression
} 
```

# wordpress - 我为图像滑块写了一个插件

> ID：10846372
> 
> 赞同：-1
> 
> 时间：2012-06-01T07:43:42.803
> 
> 标签：wordpress

我正在创建 jquery 幻灯片放映插件。我在 wp-content/plugin 中创建了文件夹游戏

在我的文件夹中，我有 readme.txt game.php game.css game.js

在我的game.php中，我有代码：-

```
<?php
/*
  Plugin Name:game
  Plugin URI: http://URI_Of_Page_Describing_Plugin_and_Updates
  Description: A brief description of the Plugin.
  Version: The Plugin's Version Number, e.g.: 1.0
  Author: Neeraj swarnkar
  Author URI: http://URI_Of_The_Plugin_Author
  License: A "Slug" license name e.g. GPL2
 */

/*  Copyright YEAR  PLUGIN_AUTHOR_NAME  (email : neerajswarnkar0207@gmail.com)

  This program is free software; you can redistribute it and/or modify
  it under the terms of the GNU General Public License, version 2, as
  published by the Free Software Foundation.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with this program; if not, write to the Free Software
  Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
 */

function image() {
    hello_world_html_page();
}

add_shortcode('img', 'image');

function my_scripts_method() {
    wp_deregister_script('jquery');
    wp_register_script('jquery', 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js');
    wp_enqueue_script(
            'game', 'http://localhost/guest1/wordpress/wp-content/plugins/game/game.js'/* don't hardcode your path */, array('jquery')/* this script depends on jquery, so enqueue it automatically */
    );
}

add_action('wp_enqueue_scripts', 'my_scripts_method');

function hello_world_html_page() {
    ?>
    <?php
    return '<div id="demo-top-bar">
        <div id="slideshow">
            <div><img alt="TITLE" src="img0.jpg"></div>
            <div><img alt="TITLE"src="img1.jpg"></div>
            <div><img alt="TITLE"src="img2.jpg"></div>
            <div><img alt="TITLE"src="img3.jpg"></div>
            <div>
                Pretty cool eh? This slide is proof the content can be anything.
            </div>
        </div>';
}
?> 
```

在我的 game.js 中，我有：-

```
$(function() {

    $("#slideshow > div:gt(0)").hide();

    setInterval(function() { 
        $('#slideshow > div:first')
        .fadeOut(1000)
        .next()
        .fadeIn(1000)
        .end()
        .appendTo('#slideshow');
    },  3000);

}); 
```

在游戏.css

```
 #slideshow { 
        margin: 80px auto; 
        position: relative; 
        width: 701px; 
        height: 321px; 
        padding: 10px; 
        box-shadow: 0 0 20px rgba(0,0,0,0.4); 
    }

    #slideshow > div { 
        position: absolute; 
        top: 10px; 
        left: 10px; 
        right: 10px; 
        bottom: 10px; 
    } 
```

当我激活并运行我的程序时..它显示 js 和 css 文件的内容..帮助我，我是 wordpress 的新手..

我已经更新了我的更改..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:41:13.433

**首先是 JS**
你包括 2 个 js，你自己的和 jquery。你还没有注册你赢得的脚本，你只是将它排入队列。
您可以立即入队*和*注册。此外，我建议您合并您的 que：

```
function my_scripts_method() {
    wp_deregister_script( 'jquery' );
    wp_register_script( 'jquery', 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js');
    wp_enqueue_script(
        'game',
        'path/to/your/js'/*don't hardcode your path*/,
        array('jquery')/*this script depends on jquery, so enqueue it automatically*/
    );
}
add_action('wp_enqueue_scripts', 'my_scripts_method'); 
```

不能解决你所有的问题，但这是一个步骤。

**第二个html输出**
你的html输出`hello_world_html_page`永远不会显示在任何地方。
[`get_option`](http://codex.wordpress.org/Function_Reference/get_option)将从数据库中检索一个选项，它不会执行一个函数。

```
function image() {
    hello_world_html_page()
}
add_shortcode('img', 'image'); 
```

这更好，但仍然是错误的。
短代码不能`echo`，否则它会正确显示，您必须这样`return`做。

```
function hello_world_html_page() {
    return '<div id="demo-top-bar">
        <div id="slideshow">
            <div><img alt="TITLE" src="img0.jpg"></div>
            <div><img alt="TITLE"src="img1.jpg"></div>
            <div><img alt="TITLE"src="img2.jpg"></div>
            <div><img alt="TITLE"src="img3.jpg"></div>
            <div>
                Pretty cool eh? This slide is proof the content can be anything.
            </div>
        </div>';
} 
```

**第三个 CSS**
你不会在任何地方排队。
如果您解决了上述两点，您应该能够处理它：

[http://codex.wordpress.org/Function_Reference/wp_enqueue_style](http://codex.wordpress.org/Function_Reference/wp_enqueue_style) 正如@swapnesh所说，`wp_enqueue_style`和`wp_enqueue_script`

# java - Android：重叠使列表出错

> ID：10846374
> 
> 赞同：1
> 
> 时间：2012-06-01T07:43:49.527
> 
> 标签：java, android, listview, drawable, overlap

我有一个自定义列表视图并使重叠非常简单：在`onDraw`方法中，我将行的 z 轴设置为大约 200 并覆盖`getChildDrawingOrder (int childCount, int i)`. 所以结果看起来像这样：

![在此处输入图像描述](../Images/e4061be92d95444c9fc721b0e6805780.png)

当然，还有更多的过渡看起来像这样，但它们与这个问题无关。

但正如你所见，大约有一秒钟，第一行（我的意思是在 z 轴上，它是白色的）看起来有问题。通过坐标有`imageViews`两种状态可绘制（行在中心时为白色，在中心外时为蓝色）。通过设置背景可绘制对象以编程方式更改可绘制对象。错误似乎显示了从一个可绘制对象过渡到另一个可绘制对象的时间：底部部分的重绘发生在行的主要部分之后。我需要同时制作两块来更改可绘制对象，所以不会有这样的错误。这是android的错误还是我可以解决它？

有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T07:53:08.227

我使用 nininho 建议在`rotected boolean drawChild(Canvas canvas, final View child, long drawingTime) {}`方法结束时应用 requestLayout() 并且它有效。

PS 把它放在你真正需要它的地方，我只把它放在过渡的地方，因为这种方法会消耗大量资源，同时它会重新绘制整个孩子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T09:03:49.143

安卓：cacheColorHint="#00000000"

在您的列表视图中。试试看。

问候，

费边

# iphone - 不推荐使用单元格文本时会出现什么错误？

> ID：10846378
> 
> 赞同：0
> 
> 时间：2012-06-01T07:44:28.953
> 
> 标签：iphone, cocoa-touch, uitableview

```
int p = [indexPath indexAtPosition: [indexPath length] - 1];
[cell setText:[[array objectAtIndex: p] objectForKey: @"title"]]; 
```

我在这里找不到错误的原因。我正在做 xml 解析，只是想在 tableview 中显示内容，但程序没有运行，因为弹出了弃用的错误，我不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T07:48:36.207

您需要访问单元格`textLabel`：

```
cell.textLabel.text = [[array objectAtIndex: p] objectForKey: @"title"]; 
```

上的旧`text`属性`UITableViewCell`很久以前就被弃用了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T07:48:32.040

使用此代码

`Cell.textLabel.text=[array objectAtIndex: p] objectForKey: @"title"]];`

它不会弃用。

# jsf-2 - ui:repeat id & jsf dataTable & primefaces 数据表

> ID：10846386
> 
> 赞同：1
> 
> 时间：2012-06-01T07:45:10.483
> 
> 标签：jsf-2, primefaces

**JSF 数据表**

```
 <ui:repeat var="folioVO" value="#{myBean.folioList}" id="folioTable">
              <h:dataTable id="promotion_dataTable" var="articlePromo"
              value="#{folioVO.lstArticles}" >
               ...<
              </h:dataTable>
    </ui:repeat> 
```

在这种情况下，生成的数据表 id 是：**folioTable:ui repeat number:promotion_dataTable**

**Primefaces 数据表：**

```
 <ui:repeat var="folioVO" value="#{myBean.folioList}" id="folioTable">
      <p:dataTable id="promotionDetail_dataTable" var="articlePromo"
      value="#{folioVO.lstArticles}" >
       ...
      </p:dataTable>
    </ui:repeat> 
```

在这种情况下，生成的数据表 id 是：**folioTable:promotion_dataTable**

由于在 primefaces 数据表的情况下没有附加重复 ID，所有 jquery /javascript 都应用于第一个表。

如何才能做到这一点 ..？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T09:57:35.863

以下工作：

```
<p:dataList var="folioVO" value="#{myBean.folioList}" id="folioTable">
  <p:column>
     <p:dataTable id="promotionDetail_dataTable" var="articlePromo"
      value="#{folioVO.lstArticles}" >
       ...
      </p:dataTable>
    </p:column> 
</p:dataList> 
```

# c# - 将 CSV 数据导入应用程序数据库，保持外键一致性

> ID：10846392
> 
> 赞同：0
> 
> 时间：2012-06-01T07:45:46.947
> 
> 标签：c#, .net, database, import

在我的 ASP.NET Web 应用程序中，我试图实现一个导入/导出过程以在应用程序数据库中保存或插入数据。我的程序会生成一些 CSV 文件：每个表一个。

显然，其中一些表之间存在关系，当我在数据库中导入 CSV 时，我想保持行之间的关联。

假设我有`Table1`，并且`Table2`有`Table2`一个外键`Table1`。所以我可以有一行`Table1`和`ID = 100`一行`Table2`。`Table1_ID = 100`

当我导入带有`Table1`数据的 CSV 时，会为`Table1`行生成新的 ID，如何在`Table2`导入相应的 CSV 文件时保持外键的一致性？

我正在使用 Linq-to-SQL 从数据库中检索数据......使用`DataSet`并且`DataTable`可以帮助我吗？

**注意**我想允许累积导入，所以当我导入 CSV 文件时，数据库中可能已经有数据。所以我不能使用“设置身份关闭”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:03:29.793

先添加Table1的项，这样添加Table2的项时，数据库中已经有Table1的对应记录了。对于更多表格，您将弄清楚顺序。如果您正在创建一个任意数据库模式的系统，您将需要在内存中创建一个表图（其中每个节点是一个表，每个弧是一个外键）[基础库中没有该类型的类型]，然后将其转换为树，以便您通过遍历树（广度优先）获得正确的顺序。

您可以让数据库处理违反外键的情况，因为没有这样的字段。您必须决定是对整个导入操作还是按项目进行交易。

尽管可以事先分析 CSV。为此，您需要存储每个表的主键的值 [为此使用一个集合]（同样，以正确的顺序遍历表），然后当您读取具有外部表的表时您已经阅读过的表的键，您可以检查键是否存在，它还可以帮助您检测任何可能的重复项。[如果您已经在数据库中考虑了一些事情，那么您也必须进行查询......但是，请注意数据库是否处于活动系统中，在您仍在决定是否可以添加记录时，记录可能会被删除CSV 没有问题]。

* * *

为了解决您在添加时生成新 ID...

我能想到的最简单的解决方案是：不要。特别是如果它是一个正在处理其他请求的活动系统，因为这样就无法事先预测新的 ID。最好的办法是一个一个地添加它们，在这种情况下，您将不得不相应地考虑您的交易策略......可能是您无法回滚的情况。

虽然，我认为您的问题更深一些：如果 Table1 的 ID 确实发生了变化，那么如何更新 Table2 中的相应记录，使其指向 Table1 中的正确记录？

为此，我想建议按照上面描述的方式进行分析，然后您将拥有一组可用作索引的集合。这将帮助您在 Table2 中为 Table1 中的每个 ID 找到需要更新的记录。[如果您已经更新了一条记录，跟踪也很重要，不要重复两次，因为生成的 ID 可能会与尚未发送到数据库的 ID 匹配]。

要回滚，您还可以使用这些集合，因为它们最终将具有新的 ID，用于标识如果您想中止操作必须从数据库中提取的记录。

编辑：那些集合（我推荐 hashset）只有故事，因为它们只有主键（例如：表 1 中的 ID）。您将需要袋子来保存外键（在本例中为 Table2 中的 Table1_ID）。

# php - cannot insert contents of text files into database

> ID：10846398
> 
> 赞同：0
> 
> 时间：2012-06-01T07:46:03.793
> 
> 标签：php, mysql

i want to insert the contents of some text files into database, but it failed. please help me, thank you very much. :)

```
<?php

function saveContent($url){
set_time_limit(0);
   foreach ($url as $file =>$files) {
      $handle= fopen($files, "r") or die ('can not open file');
      $content = file_get_contents($files);

      //insert into database

      $q0 = mysql_query("INSERT INTO tb_document (doc_id, namefiles, content) VALUES('','$files','$content') ");
      fclose($handle);
   }
}

$path_to_check = 'C:/Appserv/www/textsumm2/textsumm/try/';
$url = glob($path_to_check.'*.txt');
$a = saveContent($url);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:49:58.660

You have to escape the content of your files to prevent characters that cause an invalid SQL syntax.

You can use [real-escape-string](http://php.net/manual/en/mysqli.real-escape-string.php) for that.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:51:50.230

也许你可以使用 mysql_real_escape_string() ：

$content = mysql_real_escape_string(file_get_contents($files));

# php - Doctrine 2 控制台命令失败

> ID：10846399
> 
> 赞同：1
> 
> 时间：2012-06-01T07:46:06.813
> 
> 标签：php, doctrine-orm

我仍然遇到 Doctrine 2 中控制台命令的问题。

在我的项目的第一次设置期间，我可以运行控制台命令从我的注释模型中更新数据库，而不会出现问题，例如

```
doctrine orm:schema-tool:update --force 
```

从那时起，我一直在努力完成这个项目，现在需要再次运行它。但是，现在当上述运行时没有任何反应。没有错误消息，没有成功报告——命令只是默默地完成。

我假设我做了一些破坏了这一点的事情，但是如果没有某种错误报告，我无法知道，所以我很难过。

我怎样才能找出问题所在？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:06:29.780

只要您的数据库中没有任何数据固定装置，您就可以尝试删除它并重新创建它。

```
doctrine orm:schema-tool:drop --force  --full-database
doctrine orm:schema-tool:create 
```

我个人使用 Doctrine 迁移工具管理更新。当我第一次尝试时，我遇到了一些问题：update 按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T19:04:54.460

好的，所以我有这个工作。相当愚蠢的是，我在模型目录中添加了一个应该在其他地方的类，并且删除它似乎允许模式工具工作。如果该工具提供一些反馈而不是只是默默地“完成”，但最终只是我的愚蠢疏忽，那就太好了。

# clojure - 是否有命名私有函数的 Clojure 约定？

> ID：10846423
> 
> 赞同：35
> 
> 时间：2012-06-01T07:48:37.360
> 
> 标签：clojure, naming-conventions

当我在 Clojure 中定义一个私有函数时，我通常使用一个`-`前缀作为该函数不能在我的命名空间之外使用的视觉指示，例如

```
(defn- -name []
  (let [formatter (formatter "yyyy-MM-dd-HH-mm-ss-SSSS")]
    (format "fixjure-%s" (unparse formatter (now))))) 
```

但是`-`前缀似乎也是使用`gen-class`.

Clojure 社区中是否有任何普遍接受的`defn-`'d 函数约定，或者我应该简单地使用非前缀名称？

clojure.contrib 中的很多代码（愿它安息吧）似乎都使用了私有函数的普通名称，所以这也许是最好的，但我真的很喜欢视觉指示器——也许我的 C / Perl 背景太强了！;)

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-01T15:42:41.607

没有约定；视觉指示器在没有内置私有函数概念的语言中很普遍。由于 Clojure 定义的函数`defn-`在其命名空间之外是不可见的，因此不需要在函数前面加上 uglifier ;)

所以做你想做的事，但你可能应该像社区的其他人一样做，只是正常命名它们！它会让你的生活更轻松。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-06-01T16:23:52.477

我不知道任何命名约定，但您可以附加`^:private`元数据标签来定义私有函数。恕我直言，这完全等同于`defn-`，但更清楚一点。

```
(defn ^:private foo []) 
```

# c++ - Why const member function is able to call non-const member function via member pointer?

> ID：10846427
> 
> 赞同：2
> 
> 时间：2012-06-01T07:49:18.220
> 
> 标签：c++

> **Possible Duplicate:**
> [Invoking a nonconst method on a member from a const method](https://stackoverflow.com/questions/8556794/invoking-a-nonconst-method-on-a-member-from-a-const-method)

Constant member functions are able to call non constant member functions via pointer member variables in C++, is it as expected? Below give code snippet is compiling successfully

```
#include <iostream>

class S {
public:
    void hi() {
        std::cout << "Hi" << std::endl;
    }
};

class T {
public:
    T()
    : s(new S())
    {}

    ~T()
    {
        delete s;
    }

    void hi() const {
        s->hi();
    }

private:
    S  * s;
};

int main(int argc, char ** argv) {
    T t;
    t.hi();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T07:50:19.827

The behavior is correct.

That's because the pointer is `const` - `S * s;`, not the object.

For example, the following would fail:

```
void hi() const {
    s->hi();     //OK
    s = NULL;    //not OK
} 
```

Remember, you can't modify `s` (which is a pointer), but you can modify `*s`, which is the actual object.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T07:54:40.160

`s`const 成员函数中的类型是`S * const`, not `S const*`，这意味着指针本身是常量，而不是指针指向的对象。因此，非常量的对象用于调用非常量函数，这是符合标准的行为。

```
S const * s1 = initialization1; //same as : const S *s1  = initialization1;
S * const s2 = initialization2;

s1->hi();     //error: the object is const
s1 = nullptr; //okay : the pointer is non-const

s2->hi();     //okay: the object is non-const
s2 = nullptr; //error: the pointer is const 
```

# python - 排序可以连接形成多边形的打乱点（在python中）

> ID：10846431
> 
> 赞同：17
> 
> 时间：2012-06-01T07:49:31.493
> 
> 标签：python, python-2.7, matplotlib, geometry

我有一个点集合，它们在二维笛卡尔空间中连接形成一个多边形。它采用 python 元组列表的形式

```
[(x1, y1), (x2, y2), ... , (xn, yn)] 
```

问题是加入它们并在图中形成一个多边形。（我正在使用 matplotlib.path）

我做了一个函数来做到这一点。它的工作原理如下：

它到达第一个点，即 (x1, y1) 并将一条线连接到下一个点，即 (x2, y2) 和一条从 (x2, y2) 到 (x3, y3) 的线，依此类推......直到结束 ( xn, yn)。它通过将 (xn, yn) 连接到 (x1, y1) 来闭合多边形。

问题是包含这些点的列表不包含正确顺序的点，从而导致像这样的不良绘图（每个封闭的多边形都会自动着色）。

**例子：**

对于此列表，顶点=`[（ - 0.500000050000005，-0.5），（-0.499999999500005，0.5），（-0.500000100000005，1.0） 0.5），（1.0000000250000025，-0.5），（0.4999999950000005，0.5），（-0.9999999999750000024，0.5），（0.99999999999999750000024，0.5） -0.0, -1.0), (0.0, 1.0), (1.0, 0.0), (-0.500000050000005, -0.5)]

**要点：** ![在此处输入图像描述](../Images/e7d9da5a99cdf53d5d1e7dfc302bedb2.png)

**错误的点顺序会导致：** ![在此处输入图像描述](../Images/789cbe5addd4c894d59b11bbb8550296.png)

**正确加入方式：** ![在此处输入图像描述](../Images/1eae69a86d954d0a1df5fbc929317568.png)

有没有什么好的（如果可能的话也很简单）算法来重新排列点以正确的顺序？`

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-01T09:39:57.073

这会根据极坐标对您的点进行排序：

```
import math
import matplotlib.patches as patches
import pylab
pp=[(-0.500000050000005, -0.5), (-0.499999950000005, 0.5), (-0.500000100000005, -1.0), (-0.49999990000000505, 1.0), (0.500000050000005, -0.5), (-1.0000000250000025, -0.5), (1.0000000250000025, -0.5), (0.499999950000005, 0.5), (-0.9999999750000024, 0.5), (0.9999999750000024, 0.5), (0.500000100000005, -1.0), (0.49999990000000505, 1.0), (-1.0, 0.0), (-0.0, -1.0), (0.0, 1.0), (1.0, 0.0), (-0.500000050000005, -0.5)]
# compute centroid
cent=(sum([p[0] for p in pp])/len(pp),sum([p[1] for p in pp])/len(pp))
# sort by polar angle
pp.sort(key=lambda p: math.atan2(p[1]-cent[1],p[0]-cent[0]))
# plot points
pylab.scatter([p[0] for p in pp],[p[1] for p in pp])
# plot polyline
pylab.gca().add_patch(patches.Polygon(pp,closed=False,fill=False))
pylab.grid()
pylab.show() 
```

![生成的多边形](../Images/f3dc2b7cba108e182fc09cd5c9f4583d.png)

# sharepoint - 我在样式库列表中看不到模块文件

> ID：10846432
> 
> 赞同：0
> 
> 时间：2012-06-01T07:49:31.767
> 
> 标签：sharepoint

当我使用 Visual Studio 部署 Web 部件或在测试环境中安装 wsp 时，在列表 sharepointServer/Style%20Library/Indices/CSS 中看不到模块文件

但是如果我键入文件名（例如 sharepointServer/Style%20Library/Indices/CSS/commonStyle.css），我可以访问该文件。

Elements.xml 示例：

```
<Module Name="Module_Indices" Url="Style Library">

    <File Path="Module_Indices\Indices\CSS\commonStyle.css" Url="Watson_Indices/CSS/commonStyle.css" />

</Module> 
```

一个想法为什么我看不到模块文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T08:51:41.527

请参阅[此 MSDN 文章和评论](http://msdn.microsoft.com/en-us/library/ms441170%28v=office.14%29.aspx)您需要将 **Type="GhostableInLibrary"**添加到文件标签，这是强制性的，并且由于您的 CAML 丢失，您在库中看不到它。

```
<File Path="Module_Indices\Indices\CSS\commonStyle.css" Url="Watson_Indices/CSS/commonStyle.css" Type="GhostableInLibrary" /> 
```

# java - 调用 Web 服务并通过 SOAP 方法在 Android/Eclipse 上返回结果

> ID：10846433
> 
> 赞同：1
> 
> 时间：2012-06-01T07:49:38.927
> 
> 标签：java, android, eclipse, web-services

目前我正在通过 SOAP 方法使用来自 android 的 Web 服务。这里我需要调用 Web 服务并在 android/eclipse.ie 上返回结果。我需要从 edittext 获取输入并返回适当的值。

请找到我的代码以供参考。

**网络方法**

```
public class GetName {
public String GetName(String a){
return(a);
}  } 
```

**注意：** 为了避免来自主活动线程的套接字操作异常，我编写了一个单独的类并隔离了与肥皂相关的函数。

**调用者.java**

```
public class Caller  extends Thread 
{

public AlertDialog ad;
public CallSoap cs;
public int a;

public void run()
{
    try
    {
    cs=new CallSoap();  
    String resp=cs.Call(a);
    MySOAPCallActivity.rslt=resp;
    }catch(Exception ex)
    {
        MySOAPCallActivity.rslt=ex.toString();  
    }
    }    } 
```

**调用SOAP**

```
public class CallSoap 
{
public final String SOAP_ACTION = "http://tempuri.org/GetName";

public  final String OPERATION_NAME = "GetName";

public  final String WSDL_TARGET_NAMESPACE = "http://tempuri.org/";

public  final String SOAP_ADDRESS = "http://122.248.240.105:234/Service1.asmx?WSDL";
public CallSoap()
{

}

public String Call(int a)
{

    SoapObject request = new SoapObject(WSDL_TARGET_NAMESPACE,OPERATION_NAME);
    PropertyInfo pi=new PropertyInfo();
    pi.setName("a");
    pi.setValue(a);
    pi.setType(Integer.class);
    request.addProperty(pi);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
        SoapEnvelope.VER11);
        envelope.dotNet = true;

        envelope.setOutputSoapObject(request);

        HttpTransportSE httpTransport = new HttpTransportSE(SOAP_ADDRESS);
        Object response=null;
        try

        {

            httpTransport.call(SOAP_ACTION, envelope);

            response = envelope.getResponse();
            }

            catch (Exception exception)

            {

                response=exception.toString();

            }

    return response.toString();
    }
 } 
```

**MySOAPCallActivity**

```
public class MySOAPCallActivity extends Activity 
    {
public static String rslt="";
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button b1=(Button)findViewById(R.id.btn_getvalues);
    final  AlertDialog ad=new AlertDialog.Builder(this).create();

     b1.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {

        try
            {

            EditText ed1=(EditText)findViewById(R.id.et_1);

            String ed1str = ed1.getText().toString().trim();
            int a = Integer.parseInt(ed1str);

            rslt="START";           
            Caller c=new Caller();
            c.a=a;
            c.ad=ad;
            c.join();
            c.start();
            while(rslt=="START")
            {
                try
                {
                    Thread.sleep(5);

                }catch(Exception ex)
                {

                }
            }
           ad.setTitle("");
            ad.setMessage(rslt);

            }catch(Exception ex)
            {
                ad.setTitle("Error!");
                ad.setMessage(ex.toString());

            }
           ad.show();   
        }
    });
    }    } 
```

**输出屏幕**

![在此处输入图像描述](../Images/5d72c3c2bc2fc13a64b4e0f419d6bbe6.png)

**注意：**如果我输入值**“0005”** ，它必须在浏览器中返回字符串**“Vivek” 。**

但在我的输出屏幕中，它显示为“未找到名称”。我想根据用户输入返回适当的值。请让我知道如何修改我的来源。

感谢您宝贵的时间！..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:19:58.790

请用我的经验。我想它会对你有所帮助。我在做同样的任务时遇到了很多麻烦。但最后我做了博客中给出的事情。[http://www.insightforfuture.blogspot.com/search/label/Android](http://www.insightforfuture.blogspot.com/search/label/Android)

# f# - What are the DSL Creation Facilities for Clojure and F#?

> ID：10846437
> 
> 赞同：6
> 
> 时间：2012-06-01T07:50:14.193
> 
> 标签：f#, clojure, metaprogramming, dsl

I am trying to determine what facilities Clojure and F# have for creating DSLs. What facilities does each provide in order to create and manipulate DSLs?

As F# is statically typed, does this make it more difficult for this specific task? On the Clojure part I have no real experience but all LISPs are known to be great for metaprogramming/DSLs.

My question is not intended to make a war or something of the sort between both languages. If I'm making questions about the both lately is because I do think both are great and want to know more about the specifics of the two.

After reading some days about Intentional Programming, it has made me revive my interest in DSLs and all.

Although I have some knowledge of F# it's true I haven't yet developed anything using quotations or something like that. I've seen examples of DSLs based on discriminated unions which seem interesting.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T10:19:33.740

您最终可以用任何语言创建 DSL。

使 Clojure / 其他 Lisps 特别独特且非常适合元编程的原因在于它们是[同音异形](http://en.wikipedia.org/wiki/Homoiconicity)的——也就是说，语言本身以相同语言的数据结构自然地表达。在 Lisp 中，您有效地将代码直接编写为[AST](http://en.wikipedia.org/wiki/Abstract_syntax_tree)。

这非常强大——这意味着代码生成实际上等同于创建一个相对简单的数据结构。该语言为您提供了在编译时通过宏生成任意代码的工具。这有效地允许您“扩展语言”以支持您需要的任何特定 DSL。

举个例子，我最近发现自己想要一个`for`Clojure 中的命令式循环（向函数式编程纯粹主义者道歉，但有时你想要一个......）。将此添加到语言中的是 5 行：

```
(defmacro for-loop [[sym init check change :as params] & steps]
  `(loop [~sym ~init value# nil]
     (if ~check
       (let [new-value# (do ~@steps)] (recur ~change new-value#))
       value#))) 
```

所以现在我可以这样做：

```
(for-loop [i 0 (< i 10) (inc i)]
   (println i))
=> < prints numbers from 0..9 > 
```

这显然是一个简单的例子，但希望清楚的是，通过创建一组简短的宏来生成新的语言结构，这些宏可以精确地扩展为您想要的代码，这使得构建 DSL 变得特别容易。

一些您可能会感兴趣的阅读/链接：

*   [The Curious Clojureist](http://www.parleys.com/#st=5&id=3083&sl=0) - 描述 Clojure 一些独特功能的优秀视频（与 Java 进行了一些有趣的比较）
*   保罗格雷厄姆 -[击败平均水平](http://www.paulgraham.com/avg.html)
*   [是什么让 lisp 宏如此特别](https://stackoverflow.com/questions/267862/what-makes-lisp-macros-so-special)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T09:26:17.993

由于我没有使用过 Clojure，所以我不能谈论它，但我对 F# 中的 DSL 有所了解。F# 提供了两个主要的面向语言的编程特性（Don Syme 喜欢这样称呼它们）：代码引用和计算表达式。

代码引用更接近于使用 Lisp 等语言中的宏所获得的内容。它们允许您以编程方式生成表达式，然后您可以执行这些表达式。通过使用`ReflectedDefinition`F# 表达式的属性，您可以访问它们的 AST。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/dd233212.aspx 。](http://msdn.microsoft.com/en-us/library/dd233212.aspx)

计算表达式类似于 Haskell 中的 do 表示法。编译器使用特殊语法将代码重写为对您定义的类型的调用。这种类型应该理想地形成一个单子。由于它们是伪装的 monad，它们应该允许您实现 DSL 的自定义语义。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/dd233182.aspx 。](http://msdn.microsoft.com/en-us/library/dd233182.aspx)

IMO 计算表达式更适合在 F# 之上编写 DSL，而代码引用更适合转换或翻译等任务（例如 F# 到 JavaScript）。

除了这两个主要功能之外，您还可以使用其他语言。

当然，上面我一直在谈论嵌入式领域特定语言。您可以加倍努力，将 fslex 和 fsyacc 用于独立的 DSL。

# bash - korn vs bash 退出代码

> ID：10846441
> 
> 赞同：0
> 
> 时间：2012-06-01T07:50:31.187
> 
> 标签：bash, unix, ksh, exit-code, mks

我有以下问题：

*   我有一些以前使用 ksh 运行的测试脚本（来自[MKS Toolkit](http://www.mkssoftware.com/)）
*   脚本需要保持不变（不会更改单个字符）。
*   我将使用 bash（来自 Mingw/Msys）来运行这些脚本。

问题如下：

这在 KornShell (ksh) 中工作正常，但在 bash 中不起作用：

```
typeset -i errorCode
errorCode=10
exit errorCode 
```

我需要像这样修改脚本（注意 $ 符号）：

```
typeset -i errorCode
errorCode=10
exit $errorCode 
```

有没有办法使代码可以用 bash 编译，而无需进行我提到的 chnage？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T07:58:32.237

假设您的代码位于名为**foo.sh**的文件中，您可以使用进程替换来包装它。例如：

```
bash <(sed 's/errorCode$/$&/' foo.sh) 
```

Bash 将修改后的代码解释为从文件描述符中读取，并且子shell 的退出状态按预期设置。

```
$ echo $?
10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T16:57:38.823

您也可以在 bash 中执行 ksh 脚本之前执行此操作

```
#!/bin/bash
exit ()
{
    unset -f exit
    if expr match "$1" '^[-|+|0-9|.][.0-9]*$' &> /dev/null ; then
            exit "$1"
    fi
    exit
}
source ./the_ksh_script 
```

覆盖退出。此示例与原始代码兼容，即给出的退出代码为 0。

第二个例子

```
exit () {
 unset -f exit
 eval rc2=\$$1
 rc1=$1
 for rc in "$rc1" "$rc2"
  do
   if expr match "$rc" '^[-|+|0-9|.][.0-9]*$' &> /dev/null ; then
    exit "$rc"
   fi
  done
 exit
}

source ./the_ksh_script 
```

将产生退出代码 10，这可能是原始脚本的意图。

# mysql - how to get DB backup script from Remote Server in MySQL using command-line utility?

> ID：10846443
> 
> 赞同：4
> 
> 时间：2012-06-01T07:50:49.470
> 
> 标签：mysql, database, command-line, database-scripts

Can anybody tell me that how to get DB backup script from Remote Server in MySQL using command-line utility?

I'm using a command as follows, but not working:

```
C:\>mysqldump -h <server ip> -u <user-id> -p <password> <db name> >
 E:\dumpfilename.sql 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T08:50:16.030

密码的语法错误。您需要在 之后立即写入密码`-p`，不带空格。这就是密码被解释为数据库名称的原因。

改为这样写：

```
C:\>mysqldump -h <server ip> -u <user-id> -p<password> <db name> >
 E:\dumpfilename.sql 
```

注意 . 之后没有空格`-p`。例如`-phunter2`，密码是“hunter2”。

# java - SimpleDateFormat parse does not work properly

> ID：10846444
> 
> 赞同：5
> 
> 时间：2012-06-01T07:50:51.657
> 
> 标签：java

This is probably a very simple question but I dont see the problem or how to resolve it. Thank you for you help.

```
String date = "04/11/1972"
SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/YYYY");
System.out.println(sdf.format(sdf.parse(date)); 
```

and it displays : 03/01/1972

Why? How to get back my date. it seems there is a problem with the parse which does not give the proper Date object

Thank you

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-01T07:53:37.103

它`yyyy`不适`YYYY`用于年份字段。这可能是问题所在！所以试试这个：

```
String date = "04/11/1972";
SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
System.out.println(sdf.format(sdf.parse(date))); 
```

# c# - Selecting one checkbox in loop-generated checkboxes from checkboxlist

> ID：10846445
> 
> 赞同：2
> 
> 时间：2012-06-01T07:51:01.620
> 
> 标签：c#, asp.net, sql, database, checkbox

Sorry for my poor english.

On my ASP.NET website, I'm importing a softwares list from a SQL table, looking like this, but in reality much longer :

```
Microsoft Application Error Reporting<br><br />Microsoft Application Error Reporting<br><br />Microsoft Office Professional Plus2010<br><br />Microsoft Office OneNote MUI (English) 2010<br><br/>Microsoft Office InfoPath MUI (English) 2010<br><br />Microsoft Office Access MUI (English) 2010<br><br />Microsoft Office Shared Setup Metadata MUI (English) 2010<br><br /> 
```

To create the checkbox, I did it this way :

```
 int i = 1;
            CheckBoxList1.Items.Clear();
            foreach (char c in Resultat)
            {
                string value = ""+i;
                if (c == '/')
                {
                    CheckBoxList1.Items.Add(value);
                    i++;
                }
            } 
```

And it looks like this :

[ScreenWebsite](http://www.noelshack.com/2012-22-1338536532-PartSiteWebV3.png) ( Sorry, I don't have enough reputation to directly post the picture )

What I'd like to do now is performing a specific command for each checkbox I... check. I don't know how to select a specific checkbox as my checkboxes have no ID.

Thanks a lot for you help, and sorry again for my english.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:59:04.653

尝试这个：

```
void CheckBoxList1_SelectedIndexChanged(Object sender, EventArgs e) 
      { 
   foreach var item in CheckBoxList1.Items
    {
       if(item.Selected)
       {
         string value = item.Text;
         'DO SOMETHING
       }
    }
} 
```

你也可以这样做：

```
void CheckBoxList1_SelectedIndexChanged(Object sender, EventArgs e) 
      {

         for (int i=0; i<checkboxlist1.Items.Count; i++)
         {

            if (checkboxlist1.Items[i].Selected)
            {

               string value = checkboxlist1.Items[i].Text;

            }

         }

      } 
```

# zend-framework - Zend framework : Cannot access database configuration through application.ini

> ID：10846447
> 
> 赞同：0
> 
> 时间：2012-06-01T07:51:08.287
> 
> 标签：zend-framework

I am new to Zend. The problem i am getting is that i am not able to access resources.db.* configurations from application.ini The way i am using to access is

```
$application->getOptions() 
```

. It does not shows the resource.db.* properties.

Can any one help me ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:39:08.423

按照您询问的方式进行操作，我发现最简单的方法是在引导期间将所有内容放入注册表中：

```
//bootstrap.php
public function _initConfig {
   $config = new Zend_Config($this->getOptions());
   Zend_Registry::set('config', $config);
} 
```

在应用程序的其他地方使用这些配置：

```
$db = Zend_Registry::get('config')->resources->db; 
```

虽然如果您只是尝试访问在 application.ini 中注册的适配器：

```
$db = Zend_Db_Table::getDefaultAdapter(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:14:44.117

改为这样做

```
$params = Zend_Db_Table::getDefaultAdapter()->getConfig(); //return associative array 
```

# eclipse - Eclipse Indigo 3.7 Visual Page Editor throws XPCOM error

> ID：10846449
> 
> 赞同：0
> 
> 时间：2012-06-01T07:51:32.000
> 
> 标签：eclipse, xpcom, xulrunner

I'm using Eclipse Indigo SR2 for Java and Report Developers with JBoss Tools 3.3.0 installed thru Software Manager on a Linux Xubuntu 64Bit 11.10 .

If I open a jsp or a html Page in JBoss Tools HTML Editor the Visual Editor throws an XPCOM error in Preview and in Visual/Source View.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T03:23:46.567

这是user1430064的答案，但他没有将其发布为答案！将所有信息拼凑在一起，我发现在 eclipse 插件目录 () 中嵌入了一个 XULRunner，并将 eclipse 设置`.../eclipse-reporting-indigo-SR2-linux-gtk-x86_64/plugins/org.mozilla.xulrunner.gtk.linux.x86_64_1.9.2.19pre/xulrunner`为在 eclipse.ini 中使用它解决了这个问题......
如果有必要 ( `-Dorg.eclipse.swt.browser.UseWebKitGTK=false`)

```
-vm
/tmp/java/jre/lib/amd64/jrockit/libjvm.so
-startup
plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.1.100.v20110505
-product
org.eclipse.epp.package.reporting.product
--launcher.defaultAction
openFile
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vmargs
-Djava.library.path=/usr/lib/jni
-Dosgi.requiredJavaVersion=1.5
-Xms256m
-Xmx900m
-Dorg.eclipse.swt.browser.XULRunnerPath=/home/develop/lib/eclipse-reporting-indigo-SR2-linux-gtk-x86_64/plugins/org.mozilla.xulrunner.gtk.linux.x86_64_1.9.2.19pre/xulrunner
-Dorg.eclipse.swt.browser.UseWebKitGTK=false 
```

# objective-c - 用户加载应用程序时推送通知不询问权限

> ID：10846451
> 
> 赞同：4
> 
> 时间：2012-06-01T07:51:37.517
> 
> 标签：objective-c, ios, xcode

嗨，我刚刚发布了我的应用更新，其中添加了推送通知。我担心它不能正常工作，所以我做了一堆测试。首先只有一个开发证书，然后是使用 adhoc 的生产证书。两者最终都工作了，当临时工作时我很高兴。

无论如何，更新已经持续了大约 8 个小时，由于某种原因，推送不起作用。我和我的朋友核实了一下，发现用户没有被问到他是否想接受来自我的应用程序的推送通知。这意味着当令牌被发送到我的服务器时，它显示为 (null)。我不知道为什么会这样。当他进入设备设置 --> 通知 ---> 我的应用程序没有出现在任何列表中（接收推送通知或未接收）。

这是我的委托中应该触发请求的代码：

```
[[UIApplication sharedApplication] registerForRemoteNotificationTypes:
 (UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert)]; 
```

如果有人知道为什么会这样，我们将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-10-03T13:16:33.513

我们认为我们遇到了同样的问题，但发现该应用程序实际上工作正常。即使用户卸载并重新安装应用程序，也只会提示用户一次。

我们通过卸载应用程序然后重新安装来测试它。iOS 会记住我们之前在该设备上的响应方式，并且不会再次提示导致我们认为存在问题。

我们发现最好的测试方法是使用模拟器并执行“重置内容和设置”。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-01T08:36:10.503

在为推送通知配置您的应用程序并生成 SSL 证书后，您还必须生成新的配置文件。

开发者门户在 App ID 配置页面上显示此消息：

> 生成客户端 SSL 证书后，创建一个新的配置文件，其中包含您希望用于通知的 App ID。

如果您在设置推送后没有更新您的 App Store 配置文件，则操作系统不会为您提供推送令牌。

如果这是您的问题，您只需要生成一个新的 App Store 分发配置文件并提交使用该配置文件签名的重新编译版本。

# android - 如何更改 linux 中 AVD 管理器的默认列表路径？

> ID：10846455
> 
> 赞同：4
> 
> 时间：2012-06-01T07:51:57.397
> 
> 标签：android

在提出问题之前，我确实阅读了相关主题，但没有任何帮助。

我用的是Ubuntu 12.04，AVD的默认路径是~/.android/avd，我想改一下，怎么弄？

谢谢您的回复。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-19T22:25:26.230

您可以使用符号链接来更改 Linux 中 AVD 的默认路径。

```
mv ~/.android/avd ~/.android/avd_bak #take backup of existing images in case you need them
ln -s path/to/my/avd ~/.android/avd 
```

现在，每当您创建新图像时，它们实际上都会在新位置创建。要将现有图像移动到新文件夹，您可以按照[Rajesh 的回答中提到的步骤进行操作](https://stackoverflow.com/a/10846668/80313)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-01T08:10:28.473

来自 Android 开发人员指南[从命令行管理 AVD，](http://developer.android.com/guide/developing/devices/managing-avds-cmdline.html)其中说明了以下内容：

> **AVD 文件的默认位置**
> 
> 创建 AVD 时，android 工具会在您的开发计算机上为其创建一个专用目录。该目录包含 AVD 配置文件、用户数据映像和 SD 卡映像（如果可用）以及与设备关联的任何其他文件。请注意，该目录不包含系统映像——相反，AVD 配置文件包含到系统映像的映射，它在启动 AVD 时加载。
> 
> 该工具还会在您计算机上的 .android/avd/ 目录的根目录中为 AVD`android`创建一个文件。`<AVD_name>.ini`该文件指定 AVD 目录的位置，并始终保留在 .android 目录的根目录中。
> 
> 默认情况下，该工具会在内部（在 Linux/Mac上）、Windows XP 以及Windows 7 和 Vista 上`android`创建 AVD 目录。如果要为 AVD 目录使用自定义位置，可以在创建 AVD 时使用以下选项：`~/.android/avd/``C:\Documents and Settings\<user>\.android\``C:\Users\<user>\.android\``-p <path>`

```
android create avd -n my_android1.5 -t 2 -p path/to/my/avd 
```

> 如果 .android 目录托管在网络驱动器上，我们建议使用 -p 选项将 AVD 目录放在另一个位置。AVD 的 .ini 文件保留在网络驱动器上的 .android 目录中，与 AVD 目录的位置无关。

应该清楚的是，可以使用该`-p <path>`选项在不同的位置创建新的 AVD。如果要移动现有的 AVD，则应编辑相应的`.ini`文件并更改`path=`属性，同时确保将`.ini`文件保留在`~/.android/avd`目录中。（为了安全起见，请确保`.ini`在篡改文件之前备份文件）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-11T06:11:31.320

“我猜不是，因为 Android SDK 和工具不使用任何系统注册表/配置值。” 此外，似乎没有可用于输入路径的设置。多么耻辱。这是一种耻辱，因为它是硬编码的。

对于那些冒险升级到彩色显示器而不是 linux 标准的绿色/琥珀色屏幕并且现在敢于看不起命令行的 win 7 用户的快速修复：

从 \Users\ 目录将 .android 目录复制到 C:\Users\ 目录中。

除了 avd 目录，其余的都可以删除。在 avd 目录中，不需要 yourdevice.avd 目录。您只需要 .ini 文件。也不需要修改 .ini 文件中的路径。它指向正确的位置。

当您创建一个新的设备配置文件时，它会保存到正常路径 IE：和以前一样：\Users\.android\avd 将设备的 .ini 文件从 \Users\.android\avd 目录复制并粘贴到 C:\用户\.android\avd 目录。

我做了一些测试，它似乎工作。如果这种方法有问题，请告诉它。

我可以请 Android SDK 开发人员搜索“Microsoft Windows 操作系统”、“图形用户界面”和“硬编码”，因为它与编程实践有关。

# php - 人们正在从我的网站下载损坏的 PDF

> ID：10846474
> 
> 赞同：0
> 
> 时间：2012-06-01T07:53:29.020
> 
> 标签：php, pdf, corruption, ob-start

我目前正在一个我没有亲自开发的网站上工作。它是基于 wordpress 的，但外部人员对其进行了很多开发。

我们有一些pdf的问题。当人们下载这些 pdf 甚至图像时，它们已损坏。我调查了原因，通过用记事本打开文件，我发现网页的 html 位于文档的开头。如果我删除此 html，则 pdf 不再损坏。

我知道问题出在哪里，但我似乎找不到解决方法。这是“下载”按钮的 html 链接。

```
<a href="<?php echo get_bloginfo('url');?>/?download_process=<?php echo $_GET['dl'];?>" target="_blank" id="#downloadfile_atag" class="downloadfile_atag" style="display:none;">Download</a> 
```

当我点击这个按钮时，页面被刷新，下载开始。

我在代码中发现了这一行，它应该是负责捕获“GET”的代码的一部分：

```
if (isset($_GET['download_process'])) { 
```

这个“如果”中的代码有 100 多行，我没有足够的经验知道该怎么做。我需要一些关于在哪里看的建议。例如，有

```
ob_start(); 
```

一开始，和一个

```
ob_clean(); 
```

在代码中间。没有是正常的吗

```
ob_end_clean(); // or
ob_end_flush(); 
```

或类似的东西 ？

或者可能不是来自这个缓冲区。我应该检查什么样的指令？

或者它可能不是来自代码的那部分，如果是这样，我真的迷路了......

无论如何，提前感谢您的回答。

纪尧姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:37:47.923

IF 声明中有什么`header();`您没有向我们展示的内容吗？

如果是这样，有什么关于内容大小的吗？（这是我目前正在做的事情，所以有几个想法）

$fsize 是下载内容的大小。

```
$fsize = filesize($fullPath); //this is the filename and path
header("Content-Length: ".$fsize);  //this tells the header how big it should be. 
```

# javascript - django 无法在视图中创建常规对象，返回 500 错误

> ID：10846475
> 
> 赞同：0
> 
> 时间：2012-06-01T07:53:29.847
> 
> 标签：javascript, python, ajax, django, view

我在 django 项目中遇到 ajax 请求问题。我试图通过在任何地方添加打印语句来调试视图代码，直到我发现它似乎停止并返回 500 错误。我不知道为什么会这样，所以我希望有更多经验的人知道出了什么问题。

我使用的 javascript 库是 jQuery（尽管仅用于 ajax 调用）和 GogoMakePlay (GogoMakePlay.com)

该应用程序是一个基于浏览器的国际象棋游戏，后端使用 django 和 javascript (GogoMakePlay) 显示棋盘。在这种情况下，将显示棋盘，当我单击一个棋子时，它应该对 django 视图进行 ajax 调用，该视图返回可能移动的 json。我每次都点击一个棋子，以便执行我的打印功能，我应该能够找到问题，但这次没有。

我的问题和这个差不多：

[无法在 Ajax 发布请求中创建新的 Django 模型对象](https://stackoverflow.com/questions/3537399/cannot-create-new-django-model-object-within-ajax-post-request)

除了不像他，我的问题并没有消失。

有问题的观点：

```
def get_move_options(request):
  if request.POST:
    # initialise some variables based on the request type
    pieceType = request.POST.get("pieceType")
    pieceColour = request.POST.get("pieceColour")
    pieceRow = request.POST.get("row")
    pieceColumn = request.POST.get("column")
    gameId = request.POST.get("gameId")
    game = Game.objects.get(pk=gameId)
    moves = Move.objects.filter(game=game)
    print "initialised all the variables"

    # check what type of piece it is
    if pieceType == "pawn":
        print "colour:" + pieceColour
        piece = Pawn(pieceColour)
        print "created the piece: " + piece # <-- this is never executed                                           
    elif pieceType == "king":
        piece = King(pieceColour)
    elif pieceType == "queen":
        piece = Queen(pieceColour)
    elif pieceType == "bishop":
        piece = Bishop(pieceColour)
    elif pieceType == "knight":
        piece = Knight(pieceColour)
    elif pieceType == "rook":
        piece = Rook(pieceColour)
    print "created the piece: " + piece
    # make a new board and apply the moves to it
    board = Board()
    for move in moves:
        board.makeMove(move)
    print "made all the moves"

    # get the possible moves
    responseList = piece.getMoveOptions(pieceColumn, pieceRow, board)

  return HttpResponse(json.dumps(responseList), mimetype="application/javascript") 
```

典当代码：

```
 class Pawn(Piece):
   def __init__(self, colour):
     print "creating object"
     self.colour = colour
     print "object created, the colour is: " + colour
 *snip* 
```

ajax请求代码：

```
*snip*
// get the csrf_token from the page TODO there must be a better way of doing this
var csrf_token = document.getElementById("csrf_token").getElementsByTagName("input")[0].value;

// add the variables to the post data
var data = {
        "gameId" : gameId,
    "pieceType" : piece.S.type,
    "pieceColour" : piece.S.colour,
    "column" : column,
    "row" : row,
    };
var url = "ajax/getMoveOptions";
// make the ajax call
$.ajax({
        type : 'POST',
        // add the csrf_token or we will get a 403 response
    headers : {
    "X-CSRFToken" : csrf_token
    },
    url : url,
    data : data,
    dataType : "json",
    success : function(json) {
    // loop through the json list
    for(var i = 0; i < json.length; i++) {
        // change the square colour of the options
    var x = json[i]["row"];
    var y = json[i]["column"];
    var option = G.O["square" + y + x];
    if(y % 2 == x % 2) {
            var squareColour = "white";
    } else {
        var squareColour = "black";
    }
    option.setSrc("/static/images/board/" + squareColour + "Option.png").draw();
    }
},
error : alert("I have now seen this too many times"),
});
*snip* 
```

我的 Django 控制台输出：

```
 *snip*
 [01/Jun/2012 02:07:45] "GET /static/images/chess_pieces/white/king.png HTTP/1.1" 200 1489
 initialised all the variables
 colour:white
 creating object
 object created, the colour is: white
 [01/Jun/2012 02:07:48] "POST /game/ajax/getMoveOptions HTTP/1.1" 500 10331 
```

我知道我可以只用 javascript 编写代码，但这是一个学校项目，我的目标之一是了解如何进行 ajax 调用。

我已经在谷歌上搜索了几个小时，只找到了与我的问题相关的上述链接。通常 StackOverflow 有所有的答案，但在这种情况下，我被迫创建一个帐户，以便我可以问这个问题。如果有类似的问题可以解决我的问题，请原谅我。

所以我的问题是：

1.  您需要更多信息来帮助我吗？如果是这样，你需要知道什么？
2.  我的ajax调用正确吗？
3.  如果是这样，为什么会出现 500 错误？如果没有，那我做错了什么？
4.  为什么视图开始执行但在 Pawn 对象创建后立即停止？

提前谢谢你=）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T08:58:30.373

因此，错误实际上在您的调试代码中：

```
print "created the piece: " + piece 
```

`piece`是 Pawn 的一个实例，正如错误所说，您不能只是将字符串与随机对象连接起来。Python 不是 PHP - 它是强类型的，为了做到这一点，您需要将实例转换为其字符串表示形式。最好的方法是使用字符串格式

```
print "created the piece: %s" % piece 
```

这将调用对象的`__unicode__`方法将其转换为字符串。

请注意，您实际上应该使用记录调用而不是打印 - 除了其他任何事情之外，如果您在部署时不小心在代码中留下了打印语句，那么一切都会中断。所以它真的应该是：

```
logging.info('created the piece: %s', piece) 
```

（日志调用接受参数并自己进行字符串插值，因此您不需要`%`像 print 那样使用运算符）。

# jquery - iFrame 真的与父页面分开加载 javascript 吗？

> ID：10846480
> 
> 赞同：1
> 
> 时间：2012-06-01T07:53:36.913
> 
> 标签：jquery, jquery-ui, iframe

`jquery-1.7.2.min.js`我有加载和`jquery-ui-1.8.18.custom.min.js`跟随的主页`jquery-ui-1.8.18.custom.css`。在我的主页中，我使用了 jQuery UI Tab by set `$('#main_tabs').tabs();`inside `$(function($){ });`，还使用 ​​iFrame 加载了另一个页面。

```
$(function($){
     // Tabs
     $('#main_tabs').tabs();
}); 
```

在将加载到 iFrame 中的页面内部，该 iFrame 托管在同一目录中，`jquery-1.5.min.js`并加载了第三方 javaScript 库（称为`timeline.js`）。timeline.js 中的 javaScript 代码以某种方式使用`jquery-1.5.min.js`（必须在此第三方库之前加载），因此页面将按原样工作。

timeline.js 中的一些脚本示例

```
// javaScritp Class defined here
$(document).ready(function() {
    $.browser.isChrome = navigator.userAgent.toLowerCase().indexOf('chrome') > -1;
    $.browser.isMac = navigator.userAgent.toLowerCase().indexOf('macintosh') > -1;
    if ($.browser.msie && $.browser.version >= 9) {
        $.browser.msie = false;
        $.browser.isIE9 = true;
    }
    theAJKWindowResizeEvent = new AJKWindowResizeEvent().init();
    theAJKMouseMoveEvent = new AJKMouseMoveEvent().init();
    theAJKMouseScrollEvent = new AJKMouseScrollEvent(
                    …. //more code
}); 
```

问题是当加载主页时（在 Firefox 上打开 firebug）出现错误，这些错误让我与 iFrame 混淆。

一些错误显示如下（不是按顺序，每次我尝试重新加载时顺序都会改变）

```
A script on this page may be busy, or it may have stopped responding. You can stop the script now, open the script in the debugger, or let the script continue.
Script: http://localhost/TMCH/js/jquery/jquery-1.5.min.js:16 

A script on this page may be busy, or it may have stopped responding. You can stop the script now, open the script in the debugger, or let the script continue.
Script: http://localhost/TMCH/js/jquery/ jquery-1.7.2.min.js:2 

A script on this page may be busy, or it may have stopped responding. You can stop the script now, open the script in the debugger, or let the script continue.
Script: http://localhost/TMCH/js/timeline.js?version=6.035:5532 
```

我尝试调试这些错误，并发现如果我评论`$('#main_tabs').tabs();`（避免使用 jQuery UI），没有错误。iFrame 中的页面加载得很好，但是我的主页看起来很丑，而且因为没有调用 UI，所以很乱。

有谁可以解释为什么会发生这种情况？任何解决方案都非常感谢

# algorithm - QuickSelect算法理解

> ID：10846482
> 
> 赞同：32
> 
> 时间：2012-06-01T07:53:38.123
> 
> 标签：algorithm, quickselect

我一直在研究各种讨论快速排序和快速选择的教程和文章，但是我对它们的理解仍然不稳定。

鉴于这种代码结构，我需要能够掌握并解释 quickselect 的工作原理。

```
// return the kth smallest item
int quickSelect(int items[], int first, int last, int k) {
    int pivot = partition(items, first, last);
    if (k < pivot-first) {
        return quickSelect(items, first, pivot, k);
    } else if (k > pivot) {
        return quickSelect(items, pivot+1, last, k-pivot);
    } else {
        return items[k];
    }
} 
```

在分解成伪代码方面我需要一点帮助，虽然我没有获得分区函数代码，但我想了解它会在提供的快速选择函数的情况下做什么。

我知道快速排序是如何工作的，只是不知道快速选择。我刚刚提供的代码是我们获得的关于如何格式化快速选择的示例。

编辑：更正的代码是

```
int quickSelect(int items[], int first, int last, int k) 
{
    int pivot = partition(items, first, last);
    if (k < pivot-first+1) 
    { //boundary was wrong
        return quickSelect(items, first, pivot, k);
    } 
    else if (k > pivot-first+1) 
    {//boundary was wrong
        return quickSelect(items, pivot+1, last, k-pivot);
    }
    else 
    {
        return items[pivot];//index was wrong
    }
} 
```

礼貌：@海涛

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-06-01T08:02:46.147

快速选择的重要部分是分区。所以让我先解释一下。

快速选择中的分区选择一个`pivot`（随机或第一个/最后一个元素）。然后它重新排列列表，使所有小于的元素`pivot`都位于枢轴左侧，其他元素位于右侧。然后它返回`pivot`元素的索引。

现在我们在这里找到第 k 个最小的元素。分区后的情况是：

1.  `k == pivot`. 那么你已经找到了第 k 个最小的了。这是因为分区的工作方式。确实有`k - 1`一些元素小于`kth`元素。
2.  `k < pivot`. 那么第 k 个最小的在 的左侧`pivot`。
3.  `k > pivot`. 然后第 k 个最小的在枢轴的右侧。`k-pivot`要找到它，您实际上必须在右侧找到最小的数字。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-24T19:47:20.897

顺便说一句，您的代码有一些错误..

```
int quickSelect(int items[], int first, int last, int k) {
    int pivot = partition(items, first, last);
    if (k < pivot-first+1) { //boundary was wrong
        return quickSelect(items, first, pivot, k);
    } else if (k > pivot-first+1) {//boundary was wrong
        return quickSelect(items, pivot+1, last, k-pivot);
    } else {
        return items[pivot];//index was wrong
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-01T08:12:00.080

分区非常简单：它重新排列元素，使小于选定枢轴的元素在数组中的索引低于枢轴，而大于枢轴的元素在数组中的索引更高。

[我在之前的回答](https://stackoverflow.com/a/3074394/179910)中谈到了其余的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-21T11:43:56.503

```
int quickSelect(int A[], int l, int h,int k)
{
        int p = partition(A, l, h); 
        if(p==(k-1)) return A[p];
        else if(p>(k-1)) return quickSelect(A, l, p - 1,k);  
        else return quickSelect(A, p + 1, h,k);

} 
```

// 分区函数与快速排序相同

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-08-12T13:42:54.610

我正在阅读 CLRS Algorithm book 来学习快速选择算法，我们可以简单地实现该算法。

```
package selection;    
import java.util.Random;

/**
 * This class will calculate and print Nth ascending order element
 * from an unsorted array in expected time complexity O(N), where N is the
 * number of elements in the array.
 * 
 * The important part of this algorithm the randomizedPartition() method.
 * 
 * @author kmandal
 *
 */
public class QuickSelect {
    public static void main(String[] args) {
        int[] A = { 7, 1, 2, 6, 0, 1, 96, -1, -100, 10000 };
        for (int i = 0; i < A.length; i++) {
            System.out.println("The " + i + "th ascending order element is "
                    + quickSelect(A, 0, A.length - 1, i));
        }
    }

    /**
     * Similar to Quick sort algorithm partitioning approach works, but after
     * that instead of recursively work on both halves here will be recursing
     * into desired half. This step ensure to the expected running time to be
     * O(N).
     * 
     * @param A
     * @param p
     * @param r
     * @param i
     * @return
     */
    private static int quickSelect(int[] A, int p, int r, int i) {
        if (p == r) {
            return A[p];
        }
        int partitionIndex = randomizedPartition(A, p, r);
        if (i == partitionIndex) {
            return A[i];
        } else if (i < partitionIndex) {// element is present in left side of
                                        // partition
            return quickSelect(A, p, partitionIndex - 1, i);
        } else {
            return quickSelect(A, partitionIndex + 1, r, i);// element is
                                                            // present in right
            // side of partition
        }
    }

    /**
     * 
     * Similar to Quick sort algorithm this method is randomly select pivot
     * element index. Then it swap the random pivot element index with right
     * most element. This random selection step is expecting to make the
     * partitioning balanced. Then in-place rearranging the array to make all
     * elements in the left side of the pivot element are less than pivot
     * element and the right side elements are equals or grater than the pivot
     * element. Finally return partition index.
     * 
     * @param A
     * @param p
     * @param r
     * @return
     */
    private static int randomizedPartition(int[] A, int p, int r) {
        int partitionIndex = p;
        int random = p + new Random().nextInt(r - p + 1);// select
                                                            // pseudo random
                                                            // element
        swap(A, random, r);// swap with right most element
        int pivot = A[r];// select the pivot element
        for (int i = p; i < A.length - 1; i++) {
            if (A[i] < pivot) {
                swap(A, i, partitionIndex);
                partitionIndex++;
            }
        }
        swap(A, partitionIndex, r);
        return partitionIndex;
    }

    /**
     * Swapping 2 elements in an array.
     * 
     * @param A
     * @param i
     * @param j
     */
    private static void swap(int[] A, int i, int j) {
        if (i != j && A[i] != A[j]) {
            int temp = A[i];
            A[i] = A[j];
            A[j] = temp;
        }
    }
}

Output:
The 0th ascending order element is -100
The 1th ascending order element is -1
The 2th ascending order element is 0
The 3th ascending order element is 1
The 4th ascending order element is 1
The 5th ascending order element is 2
The 6th ascending order element is 6
The 7th ascending order element is 7
The 8th ascending order element is 96
The 9th ascending order element is 10000 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-17T12:35:04.310

```
int partition(vector<int> &vec, int left, int right, int pivotIndex)
{
        int pivot = vec[pivotIndex];
        int partitionIndex = left;

        swap(vec[pivotIndex],vec[right]);
        for(int i=left; i < right; i++) {
                if(vec[i]<pivot) {
                        swap(vec[i],vec[partitionIndex]);
                        partitionIndex++;
                }
        }
        swap(vec[partitionIndex], vec[right]);

        return partitionIndex;
}

int select(vector<int> &vec, int left, int right, int k)
{
        int pivotIndex;
        if (right == left) {
                return vec[left];
        }
        pivotIndex = left + rand() % (right-left);

        pivotIndex = partition(vec,left,right,pivotIndex);
        if (pivotIndex == k) {
                return vec[k];
        } else if(k<pivotIndex) {
                /*k is present on the left size of pivotIndex*/
                return partition(vec,left,pivotIndex-1, k);
        } else {
                /*k occurs on the right size of pivotIndex*/
                return partition(vec, pivotIndex+1, right, k);
        }
        return 0;
} 
```

# c# - 成功插入期间 SqlDataAdapter 未触发 RowUpdated 或 RowUpdating

> ID：10846483
> 
> 赞同：0
> 
> 时间：2012-06-01T07:53:39.210
> 
> 标签：c#, sql, sqlconnection, sqldataadapter, datatableadapters

我有以下代码：

```
DataSet dataSet = new DataSet();
                bool result;
                using (SqlConnection connection = new SqlConnection(command.Connection.ConnectionString))
            {
            connection.Open();                             

            SqlDataAdapter adapter = new SqlDataAdapter(command);
            SqlCommandBuilder builder = new SqlCommandBuilder(adapter);

            adapter.RowUpdated += OnRowUpdated;
            adapter.RowUpdating += AdapterOnRowUpdating;

            adapter.Fill(dataSet);

            // Code to modify data in the DataSet here.
            // Without the SqlCommandBuilder, this line would fail.
            adapter.UpdateCommand = builder.GetUpdateCommand();

            int i = adapter.Update(dataSet);
            result = i > 0;
        }
        return result; 
```

此代码假设获取我的 SqlCommand 对象并将其提交给 SqlDataAdapter 的更新方法。SqlCommand 可以是使用 adapter.Update() 方法执行的 INSERT、UPDATE 或 DELETE。

该命令成功执行，但 adapter.Update() 方法返回 0 行。我检查了数据库，我可以看到它是成功的。RowUpdated 和 RowsUpdating 事件也不会触发。我不确定发生了什么事。请帮忙。

先感谢您。

**编辑：**

```
 public void OnRowUpdated(object sender, SqlRowUpdatedEventArgs sqlRowUpdatedEventArgs)
        {
            switch (sqlRowUpdatedEventArgs.StatementType)
            {
                case StatementType.Insert:
                case StatementType.Update:
                case StatementType.Delete:
                case StatementType.Batch:
                    if (sqlRowUpdatedEventArgs.Status != UpdateStatus.ErrorsOccurred)
                        SqlReporting.LogSqlCommand(sqlRowUpdatedEventArgs.Command);
                    break;
            }
        } 
```

**编辑：** 我使用以下查询插入：

```
INSERT INTO Users
                         (Username, Firstname, Lastname, RoleId, ReceiveRoleAlerts, StatusId, Password, Fingerprint, AuthenticityCheck, CreatedByUserId, CreationDate, ModifiedByUserId, 
                         ModificationDate)
SELECT        @Username AS Expr1, @Firstname AS Expr2, @Lastname AS Expr3, @RoleId AS Expr4, @ReceiveRoleAlerts AS Expr5, @StatusId AS Expr6, @Password AS Expr7, 
                         @Fingerprint AS Expr8, @AuthenticityCheck AS Expr9, @CreatedByUserId AS Expr10, @CreationDate AS Expr11, @ModifiedByUserId AS Expr12, 
                         @ModificationDate AS Expr13
WHERE        (NOT EXISTS
                             (SELECT        Username, Firstname, Lastname, RoleId, ReceiveRoleAlerts, StatusId, Password, Fingerprint, AuthenticityCheck, CreatedByUserId, CreationDate, 
                                                         ModifiedByUserId, ModificationDate
                               FROM            Users AS Users_1
                               WHERE        (Username = @Username))); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:59:39.547

利用

```
adapter.RowUpdating += new SqlRowUpdatingEventHandler(AdapterOnRowUpdating); 
adapter.RowUpdated += new SqlRowUpdatedEventHandler(OnRowUpdated); 
```

代替

```
adapter.RowUpdated += OnRowUpdated;
adapter.RowUpdating += AdapterOnRowUpdating; 
```

# html - 有没有办法用 CSS 选择一个已经溢出父元素的元素？

> ID：10846486
> 
> 赞同：0
> 
> 时间：2012-06-01T07:54:08.920
> 
> 标签：html, css

如果我有一个项目，`float: right`无论出于何种原因，该项目出现在下一行的原因是它左侧的内容太多，或者窗口太小；如何选择与这种情况匹配的项目？

我希望这样做，因为父项使用了一个看起来不错的背景图像，但是浮动项掉了出来，它看起来不可见，`color`并且`background-color`两者都是相同的。

这是可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:57:56.807

我看到的唯一方法是使用 javascript 并检测浮动 div 的相对位置。如果这个y坐标大于0，它可能已经下降。在这种情况下，添加一个 css 类或您想要的任何行为。

# c# - 了解 linq 语法

> ID：10846488
> 
> 赞同：10
> 
> 时间：2012-06-01T07:54:25.790
> 
> 标签：c#, .net, linq, syntax

我真的很困惑理解它的内部工作这是 LINQ 语法

```
string[] test = new test[] { "abc", "", "cd", "", "aa" };
test = test.Where(x => !string.IsNullOrEmpty(x)).ToArray(); 
```

我对它如何管理语法感到困惑。是否将所有数组都放在x中？如果是，那么它如何管理 x 空值？

或者

如果不是，则将测试数组值一一放入 x 中？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-01T08:07:38.140

您应该考虑其余的答案，它们非常准确，我想向您展示的内容可能会帮助您理解语法，因为这种查询实际上可以用如下查询语法表示：

```
string[] test=new test[]{"abc","","cd","","aa"};

// this is the equivalent to your code
// added explicit type to make it clearer, it's optional
var a = from (string)x in test
        where !string.IsNullOrEmpty(x)
        select x; 
```

如果你熟悉 SQL，你会发现这种语法更容易阅读，即使你不知道，这种语法也更干净。

编译代码时，此*查询语法*会自动转换为 C# 方法语法，以便生成 IL，因此如果您解散 DLL，您将看到方法语法而不是查询语法

关于此代码的简要说明：

*   如您所见，`x`声明了一个变量并且它的类型为`string`. 为什么？因为你的数组是一个**字符串数组**

*   `in test`表示`IEnumerable<>`要迭代的源 - 在这种情况下是您的数组

*   这`where`很容易解释，它只是从您的数组中选择所有非空字符串

*   最后选择实际上是数据的投影。

而这一切都相当于你的代码

现在你可能会问自己......我什么时候应该使用一种语法或另一种？好吧，它们是等价的，但是查询语法运算符是有限的，这意味着大多数操作都是使用方法语法而不是查询语法完成的。我一直在做的是尝试编写更易于阅读的代码，如果使用查询语法编写一些代码，则更容易理解。

关于方法语法，该`x => ...`语法称为 lambda 表达式，如果您是第一次使用它们，它们可能看起来很奇怪，但最终您会喜欢它们。

基本上 lambdas 是代表的快捷方式，所以你在做什么：

```
x => !string.IsNullOrEmpty(x) 
```

您正在创建一个匿名方法，并且该方法被分配给委托参数。`x`代表`string variable`. _

这个话题真的很广泛，试图在这里解释它，但我希望这能让你了解背后的原因。

顺便说一句，您可以像这样组合语法：

```
// this is the equivalent to your code
// added explicit type to make it clearer, it's optional
var a = (from (string)x in test
        where !string.IsNullOrEmpty(x)
        select x).ToArray(); 
```

如果你谷歌 LINQ 就像谷歌搜索 porm 大声笑，网络上充斥着 LINQ 文章、示例等。

一个好的开始点是来自 Microsoft 的 101 个样本

[http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)

**编辑**

我将尝试模拟 Where 方法，以便您可以有一个更好的 lambda 表达式示例

```
// this is basically the declaration of one overload of the Where method
// the this in the parameter declaration, indicates this is an extension method which will be available to all IEnumerable<> objects
// the Func<T, bool> is the interesting part, it is basically a delegate (as a reminder, the last parameter of the Func object indicates the type that must be returned, in this case is a bool)
// the delegate is simply a pointer to a function 
public IEnumerable<T> Where<T>(this IEnumerable<T> source, Func<T, bool> predicate)
{

   ...some logic

   ... yielding back the reuslts
   foreach(var r in res)
   {
      // here is the delegate in action
       if(predicate(r))
           yield return r;
   }
} 
```

如您所见，委托被称为函数（委托是指向函数的指针）对接什么函数？？？您在代码中声明的那个

*   `x => !string.IsNullOrEmpty(x)`并且`x`表示从 Where 方法传回的参数到外部代码，您可以在其中检查它并使用它来过滤结果

*   **x =>**是声明委托的缩写

*   **!string.IsNullOrEmpty(x)**这是**您的匿名方法的主体，**正如您所看到的，它满足`Func<T, bool>`返回布尔值（过滤数组元素的谓词）的要求，并且作为参数，它接收到泛型`T`，在这种情况下是数组中的字符串

声明 lambda 表达式的另一种方法是：

```
test = test.Where(
            (string) x =>
            {
                return !string.IsNullOrEmpty(x)
            })
           .ToArray(); 
```

使用这种语法很容易表明它们实际上是方法（匿名方法）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-01T08:41:11.913

我们可以把声明拆开，一次一个地检查

`x => !string.IsNullOrEmpty(x)`基本上是定义如下函数

```
bool Filter(string x){
   return !string.IsNullOrEmpty(x)
} 
```

并基于该函数创建一个谓词。谓词只是一个委托 - 一个可以传入变量的函数。

`.Where`是一种扩展方法，为简单起见可以定义

```
IEnumerable<T> Where<T>(this IEnumerable<T> sequence,Predicate<T> pred){
   foreach(var elem in sequence){
       if(pred(elem)){
          yield return elem;
       }
   }
} 
```

如果你定义了上面定义的函数`Filter`而不是使用 lambda 你的语句看起来像这样

```
test = test.Where(Filter).ToArray(); 
```

因此，通过在您的数组上调用此扩展方法并传递上述谓词，您将遍历数组中的所有元素并返回所有与谓词匹配的元素（即那些既不为 null 也不具有空字符串值的元素）

最后，您调用扩展方法`.ToArray()`，它将`.Where`返回的 (an `IEnumerable<string>`) 转换为数组

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T07:55:56.087

**编辑**

阅读这篇文章，您一定会对您所写的内容有所了解......

[C# 3.0 新语言特性（第 1 部分）](http://www.codeproject.com/Articles/22700/C-3-0-New-Language-Features-Part-1)

[C# 3.0 新语言特性（第 2 部分）](http://www.codeproject.com/Articles/23174/C-3-0-New-Language-Features-Part-2)

* * *

它来自 C# 3.0 的[扩展方法](http://pranayamr.blogspot.com/2010/11/extension-methods.html)+ [lambda experssion](http://pranayamr.blogspot.com/2010/11/lamda-expressions.html)部分

在这段代码中

```
test=test.Where(x => !string.IsNullOrEmpty(x)).ToArray(); 
```

`where`- 是一种扩展方法

`x => !string.IsNullOrEmpty(x)`- 是 lambda 表达式，它是匿名函数的替换

这整个函数检查数组的每个元素......即 lamdaba 表达式检查数组的每个元素是否满足写入的条件，然后最终重新调整满足条件的那些元素的数组

# vim - 为什么 :help 忽略 :set .vimrc 中的数字？

> ID：10846490
> 
> 赞同：5
> 
> 时间：2012-06-01T07:54:35.850
> 
> 标签：vim, ubuntu-12.04

我`:set number`在`~/.vimrc`显示行号。当我键入`:help`以查看文档时，行号不会显示在新窗口中。

如果我键入`:setl number?`，它会打印`nonumber`。如果键入`:setg number?`，则打印`number`。

我想知道为什么`~/.vimrc`不起作用。哪个脚本重置本地`number`选项？我检查了`$VIMRUNTIME/ftplugin/help.vim`，但它没有重置`number`.

* * *

目前，我正在使用：

```
if has('autocmd')
    auto FileType help set number
endif 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T08:35:45.840

我不确定你遇到了什么问题。数字不会出现在帮助中——是的，如果我没记错的话，那是一个设计决策和一个特性——在我看来，这是一个很好的选择，因为为什么人们会想要帮助文件中的行号？（好吧，您可以说“引用帮助文件中的特定行”，但标签似乎就足够了）。

至于另一件事，当我设置

```
 setl nonumber
 setg number 
```

并在拆分中打开一个新缓冲区，数字显示。

如果我开始一个新的 vim 会话，`setlocal`并且`setglobal number`存在`nonumber`和`set number`它们都改变了。

这也是你的行为吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T19:07:06.443

打开 vim 后，只需键入：

```
:auto FileType 
```

你看到`set number`下面列出了`help`吗？如果没有，你的 .vimrc 没有被读取。

# android - 如何从我的 android 项目向谷歌应用引擎发送 HTTP Post 请求？

> ID：10846491
> 
> 赞同：1
> 
> 时间：2012-06-01T07:54:38.600
> 
> 标签：android, google-app-engine, http, httprequest, http-request

我正在做一个安卓项目。我是android编程的新手。如何从我的项目向谷歌应用引擎发送 HTTP 发布请求？我搜索并发现此代码用于从 android 发送请求，但它不起作用。以下是我正在使用的代码：

```
try{
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://www.example.com/servleturl");

    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
    nameValuePairs.add(new BasicNameValuePair("username", userEmailStr));
    nameValuePairs.add(new BasicNameValuePair("password", userPasswordStr));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    // Execute HTTP Post Request
    HttpResponse response = httpclient.execute(httppost);

    info.setText(response.toString());
} catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
} catch (IOException e) {
    // TODO Auto-generated catch block
} 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:11:22.250

这是我在java中用于http请求的类：

```
public class WSConnector {
final String baseUrl = "http://www.myURL.com/"; //this is the base url of your services
String realUrlWithParams="";
String realUrl="";
String params = "";
String charset = "UTF-8";

HttpURLConnection connection = null;

public WSConnector(String serviceName,String params,String charset){ //we create the connector with everything we need (params must be ready as value pairs, serviceName is the name of your service):
    if (charset!=null){
        this.charset = charset;
    }
    this.realUrlWithParams = baseUrl+serviceName+"?"+params;
    this.realUrl = baseUrl+serviceName;
}

public String getResponse(){//getResponse will get your the entire response String
    String result = "";
    System.out.println("trying connection");
    try {
        connection = (HttpURLConnection) new URL(realUrlWithParams).openConnection();
        //connection.setRequestProperty("Accept-Charset", charset);
        int status = connection.getResponseCode();
        System.out.println("status:"+status);
        if (status==HttpURLConnection.HTTP_OK){
            InputStream responseStream = connection.getInputStream();
            BufferedReader reader = null;
            reader = new BufferedReader(new InputStreamReader(responseStream));
            for (String line; (line = reader.readLine()) != null;) {
                System.out.println("line is:" +line); 
                result = result+line;
                System.out.println("result is:"+result);
            }
        }
    } catch (MalformedURLException e) {
            System.out.println("ERROR IN CONNECTOR");
            e.printStackTrace();
    } catch (IOException e) {
            System.out.println("ERROR IN CONNECTOR");
            e.printStackTrace();
    }
    System.out.println("finished connection");
return result;
} 
```

如果想了解更多信息，请访问此 CW：

[httpurl连接](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T09:31:07.257

我没有允许我的应用程序的用户使用互联网。为此，我们只需在 AndroidManifest.xml 中添加这一行。

```
 <uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T19:00:20.140

Use restlet (http://wiki.restlet.org/docs_2.0/13-restlet/21-restlet.html) on app engine to handle the http requests as they come in. This isn't typically how app engine is used, but it'll work for what you want.

In andoid, just do a normal http request (http://stackoverflow.com/questions/1359689/how-to-send-http-request-in-java) on the appropriate url.

You should be able to figure out how to setup the url from the restlet tutorial. Once you deploy to app engine, the url will be something like [http://myapp.appspot.com/goodstuff](http://myapp.appspot.com/goodstuff)

Good luck!

# php - 在网络上显示 pdf 但不可下载

> ID：10846498
> 
> 赞同：0
> 
> 时间：2012-06-01T07:54:55.073
> 
> 标签：php, javascript, html, css

我需要在我的网站中构建一个功能来显示 pdf 文件。但是我不希望它们可以保存或下载。有没有办法强制浏览器禁止保存和下载 pdf 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T07:57:14.967

不，如果你看到任何东西，它就是你的。当您查看 pdf 文件时，文件内容在您的计算机内存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T08:17:28.657

信息可以公开或私有。没有中间，如果您希望将私有数据更改为公共数据，则无法撤消此更改。

你说的是：

*   我想将数据发送到属于某个用户的远程计算机
*   然后我想限制远程计算机可以使用该数据做什么

第一部分是*互联网的作用*。第二部分是不可能的，因为您无法控制用户机器上正在运行的进程。

需要明确的是，为了向用户显示 PDF 文件，您必须允许用户的浏览器下载该文件才能将其显示给用户。但是，用户是选择将该信息写入屏幕还是写入文件，这是您无法控制的。

您唯一的选择是*限制或标记您发送给用户的数据*，可能会将 PDF 展平为一系列图像文件，或对 PDF 加水印，尽管用户仍然可以保存这些图像，而您将使其变得更加困难让人们阅读您尝试提供的文档。或者，您可以在将 PDF 数据发送到浏览器之前将其翻译成一系列 javascript 指令，在浏览器中可以执行此代码并将 PDF 呈现到画布元素。即使使用这种方法，用户也可以截取屏幕截图。

这个问题的问题在于：它本末倒置。您不是在寻求问题的解决方案，而是假设解决方案并寻求实施它的帮助。告诉我们*根本问题*- 您是否要跟踪查看 PDF 的次数？您是否想在以后撤销对 PDF 的访问权限？也许这些文档是参考资料，您想为您的网站带来经常性流量？或者，内容归第三方所有，并且有一些关于分发的合同规定？在不了解这一点的情况下，我们无法为您面临的问题提供明智的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T08:09:19.130

也许内置的 pdf 权限管理足以满足您的需求。因此用户可以下载 pdf 但不能执行特定操作。

另一种方法是将 pdf 渲染成图像，因此用户无法下载整个 pdf。

# mysql - 在单个语句中更改多个列

> ID：10846499
> 
> 赞同：69
> 
> 时间：2012-06-01T07:54:58.113
> 
> 标签：mysql, sql, mysql-error-1064, alter-table

我正在使用查询来更改列的字符集

```
ALTER TABLE `media_value_report` 
    CHANGE `index_page_body` `index_page_body` TEXT CHARACTER  
    SET utf8 NULL DEFAULT NULL 
```

我也想对其他列 main_title、landing_page_body 执行此操作。但是在执行时出现#1064 错误。我可以在单个查询中更改更改多个列吗？

我尝试过，但我在 goog 搜索中发现无法在单个查询中更改。

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-06-01T08:25:22.977

[文档建议](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)您可以用逗号链接 alter_specifications：

```
ALTER TABLE `media_value_report` 
    CHANGE col1_old col1_new varchar(10),
    CHANGE col1_old col1_new varchar(10),
    ... 
```

# forms - Cakephp 表单助手 .. 奇怪的行为

> ID：10846502
> 
> 赞同：0
> 
> 时间：2012-06-01T07:55:13.810
> 
> 标签：forms, cakephp, formhelper

我在几个视图中使用了 Form Helper 类，我的行为非常奇怪。

例如，这是一个非常简单的视图：

```
<div class="users index">
    <h2>Users</h2>
    <table cellpadding="0" cellspacing="0">
        <tr>
            <th>id</th>
            <th>name</th>
            <th>username</th>
            <th>email</th>
            <th>role</th>
            <th class="actions">Actions</th>
        </tr>
        <?php
        $i = 0;
        foreach ($users as $user):
            $class = null;
            if ($i++ % 2 == 0) {
                $class = ' class="altrow"';
            }
            ?>
            <tr<?php echo $class; ?>>
                <td><?php echo $user['User']['id']; ?>&nbsp;</td>
                <td><?php echo $user['User']['name']; ?>&nbsp;</td>
                <td><?php echo $user['User']['username']; ?>&nbsp;</td>
                <td><?php echo $user['User']['email']; ?>&nbsp;</td>
                <td><?php echo "Role" ?>&nbsp;</td>
                <td class="actions">
                    <?php echo $this->Html->link('View', array('action' => 'view', $user['User']['id'])); ?>
                    <?php echo $this->Html->link('Edit', array('action' => 'edit', $user['User']['id'])); ?>
                    <?php echo $this->Form->postLink('Delete', array('action' => 'delete', $user['User']['id']), array('confirm' => 'Are you sure you want to delete this user?')); ?>
                </td>
            </tr>
        <?php endforeach; ?>
    </table>
</div> 
```

如果用户数组有超过 5 条记录，我会在`</`最后得到一个非常奇怪的字符串，就在标签之前。

在使用大型表单时，我注意到了同样的行为。数场之后，那条奇怪的绳子又出现了。

我可以测试任何东西来确定问题。

谢谢

# android - Webviews 并不总是存储 cookie？这要怎么强求？

> ID：10846503
> 
> 赞同：0
> 
> 时间：2012-06-01T07:55:28.380
> 
> 标签：android, session, cookies, webview

我有一个运行 Webview Activity 的应用程序，并且我的服务器的 Web 框架通过将会话令牌存储在 cookie 中来处理用户身份验证（登录）。我的应用程序在 4 台设备上运行：Android 2.2.1 (A)、Android 2.3.6 (B)、Android 2.3.7 (C) 和 Android 4.0.3 (D)。对于 Android (A)、(B) 和 (D)，即使在之前的 Activity Destorys 之后，Webview 仍保持登录状态，这表明 cookie 已自动为 WebView 保存。但是，对于 Android (C)，似乎没有为 WebView 存储 cookie，因为在之前的 Activity Destroy 之后我被要求再次登录。如果这发生在我的一台设备上，它肯定也会发生在其他设备上。我想了解如何强制 WebView 始终保存 cookie。

**TL;DR 如何强制 WebView 始终存储 cookie？或者我如何自己处理 WebView cookie 存储/检索？**

# css - 带有 svg 或 css 图像背景的文本

> ID：10846504
> 
> 赞同：4
> 
> 时间：2012-06-01T07:55:34.103
> 
> 标签：css, svg

是否可以在 svg 或 css 中有文本背景？这意味着，每个角色都有背景？这是示例：

![带有背景蒙版的文本](../Images/cf7d7a64a585566295fe3863d3a35f44.png)

我在 Photoshop 中做了这个并做了一个面具，我只是想知道我可以在 svg 或 css 中使用它吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-01T16:15:45.083

这是一个使用模式的示例。如果需要，它使用`<tspan>`带有图案填充的元素向您展示如何在每个字符的基础上完成此操作：

## 演示：http: [//jsfiddle.net/xWNR3/2/](http://jsfiddle.net/xWNR3/2/)

![文本](../Images/42c3aebd20610782d314a379e5ec646f.png)

```
<svg xmlns="http://www.w3.org/2000/svg" xmlns:x="http://www.w3.org/1999/xlink">
  <style>
    svg  { background:#ddd }
    text {
      font-family:Verdana; font-size:160pt; font-weight:bold;
      stroke:#000;
    }
  </style>
  <defs>
    <pattern id="p1" patternUnits="userSpaceOnUse" width="32" height="32">
      <image x:href="alphaball.png" width="32" height="32" />
    </pattern>
    <pattern id="p2" patternUnits="userSpaceOnUse" width="10" height="10">
      <image x:href="grid.gif" width="10" height="10" />
    </pattern>
  </defs>
  <text x="20" y="170" fill="url(#p1)">
    Hello
    <tspan x="20" y="350"
           fill="url(#p2)">Wo<tspan fill="url(#p1)">r</tspan>ld</tspan>
  </text>
</svg> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T10:46:10.847

除了 robertc 建议的答案中的模式之外，您也可以使用[掩码](http://www.w3.org/TR/SVG11/masking.html#Masking)或[clipPath来执行此操作。](http://www.w3.org/TR/SVG11/masking.html#EstablishingANewClippingPath)

这是svg 测试套件中使用 clipPath[的示例](http://dev.w3.org/SVG/profiles/1.1F2/test/harness/htmlObjectApproved/masking-path-04-b.html)。

# regex - 使用正则表达式从文件中删除注释

> ID：10846513
> 
> 赞同：2
> 
> 时间：2012-06-01T07:56:22.707
> 
> 标签：regex, f#

我想编写一个程序，从文件中删除所有注释（从“//”开始直到行尾）。

我想使用正则表达式来做到这一点。

我试过这个：

```
 let mutable text = File.ReadAllText("C:\\a.txt")
    let regexComment = new Regex("//.*\\r\\n$") 
    text <- regexComment.Replace(text, "")
    File.WriteAllText("C:\\a.txt",text) 
```

但它不起作用...

您能否向我解释为什么，并给我一些可行的建议（最好使用正则表达式..）？

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T16:40:23.210

与其将整个文件加载到内存中并在其上运行正则表达式，不如处理任何大小的文件而不会出现内存问题的更快方法可能如下所示：

```
open System
open System.IO
open System.Text.RegularExpressions

// regex: beginning of line, followed by optional whitespace, 
// followed by comment chars.
let reComment = Regex(@"^\s*//", RegexOptions.Compiled)

let stripComments infile outfile =
    File.ReadLines infile
    |> Seq.filter (reComment.IsMatch >> not)
    |> fun lines -> File.WriteAllLines(outfile, lines)

stripComments "input.txt" "output.txt" 
```

输出文件必须与输入文件不同，因为我们正在写入输出，而我们仍在从输入读取。我们使用正则表达式来识别注释行（带有可选的前导空格），并`Seq.filter`确保注释行不会被发送到输出文件。

因为我们从不将整个输入或输出文件保存在内存中，所以此函数适用于任何大小的文件，并且它可能比“读取整个文件，正则表达式所有内容，写入整个文件”方法更快。

**前方危险**

此代码不会删除出现在同一行的某些代码之后的注释。但是，正则表达式不是该工作的正确工具，除非有人能想出一个正则表达式，它可以区分以下两行代码，并避免在您从文件中删除与正则表达式匹配的所有内容时破坏第一行：

```
let request = WebRequest.Create("http://foo.com")
let request = WebRequest.Create(inputUrl) // this used to be hard-coded 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T10:11:53.820

```
let regexComment = new Regex(@"//.*$",RegexOptions.Multiline) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T08:14:30.513

没关系，我想通了。它应该是：

```
let regexComment = new Regex("//.*\\r\\n") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T08:14:46.780

您的正则表达式字符串似乎是错误的。 `"\\/\\/.*\\r\\n"`为我工作。

# objective-c - Objective-C 将基类对象转换为特定类

> ID：10846515
> 
> 赞同：3
> 
> 时间：2012-06-01T07:56:34.323
> 
> 标签：objective-c

我对目标 C 很陌生，我想知道我想做的事情是否/如何可能。我有几节课

```
 @interface A: NSObject
{
    NSString*  Aa;
    NSUInteger Ab;
}

    @interface B: A
{
    NSString*  Ba;
    NSUInteger Bb;
}

    @interface C: A
{
    NSString*  Ca;
    NSUInteger Cb;
} 
```

我想创建一个函数，我期望'A'类型的对象，并在实现中检查它们的类型是B还是C。这就是我想要的：

```
-(void)doSomething:(A *param)
{
    //do some stuff
    if(param is an instance of B)
    {
        //do stuff with B
    }
    else
    {
        //do stuff with C
    }
} 
```

怎么做到呢？

真挚地，

佐利

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T08:00:07.963

检查 NSObject 的方法 isKindOfClass:(Class)c 你会这样做：

```
-(void)doSomething:(A *)param
{
    //do some stuff
    if([param isKindOfClass:[B class]])
    {
        //do stuff with B (cast will be required to avoid warnings!)
        B *castedB = (B *)param;
        //...
    }
    else if ([param isKindOfClass:[C class]])
    {
        //do stuff with C
        C *castedC = (C *)param;
        //...
    }
} 
```

希望这有帮助！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-01T08:05:54.937

您可能要使用四种方法：

*   `isKindOfClass:`测试对象是否是类或子类的成员
*   `isMemberOfClass:`同上，但更具体，不允许子类
*   `respondsToSelector:`测试对象是否响应给定的选择器，例如`[param respondsToSelector:@selector(method:)]`. 对鸭子打字很有用。
*   `conformsToProtocol:`测试对象是否实现了协议。

# javascript - 在 onMouseOut 上调用 javascript 函数

> ID：10846517
> 
> 赞同：0
> 
> 时间：2012-06-01T07:57:01.163
> 
> 标签：javascript, html, marquee

我为选取框编写了以下代码：我希望鼠标悬停在其中，将调用一个函数

```
<marquee class="smooth_m" behavior="scroll" direction="left" scrollamount="3">
  <span style="float:left; padding:0 20px 0 0;" onMouseOut="loadStart()" onMouseOver="loadStop()">testing</span>
</marquee>
<script type="text/javascript">
loadStop()
{
alert("loadStop");  
}
loadStart()
{
alert("loadStart"); 
}
</script> 
```

但它没有在跨度中加载相应的功能，比如 onMouseOut 它应该加载 loadStart 等等。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:59:48.837

```
函数加载停止（）
{
    警报（“加载停止”）；  
}
函数加载开始（）
{
    警报（“加载开始”）；
}

```

function 关键字是必需的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T07:59:59.490

**工作演示** [http://jsfiddle.net/CTQVr/](http://jsfiddle.net/CTQVr/) **或**鼠标悬停在这样的停止选框上：http: [//jsfiddle.net/CTQVr/4/](http://jsfiddle.net/CTQVr/4/)

问题是：函数名称中缺少函数。

希望这可以帮助，

**HTML**

```
<marquee class="smooth_m" behavior="scroll" direction="left" scrollamount="3">
  <span style="float:left; padding:0 20px 0 0;" onmouseout="loadStart()" onmouseover="loadStop()"> testing</span>
</marquee>

​ 
```

**jQuery代码**

```
function loadStop() {
    alert("loadStop");
}

function loadStart() {
    alert("loadStart");
}​ 
```

**更新**以在鼠标悬停时停止

```
$("marquee").hover(function () { 
    this.stop();
   // loadStop();
}, function () {
    this.start();
   // alert("loadStart");
});
​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T08:00:22.893

您错过了函数定义中的函数，请尝试以下操作：

```
function loadStop()
{
alert("loadStop");  
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T08:04:03.560

您可以尝试`hover`方法而不是使用 html 事件处理程序：

```
$('span').hover(function(){
     alert('LoadStops')
},function(){
    alert('LoadStarts')
}) 
```

# spring - 使用spring在jasper html报告中显示图像

> ID：10846520
> 
> 赞同：0
> 
> 时间：2012-06-01T07:57:16.140
> 
> 标签：spring, jasper-reports

我正在研究*Spring*，*JasperReports*。我的*Spring*版本是*3.0.5 RELEASE*，*iReport-4.5.0*。

我使用[http://chathurangat.blogspot.in/2012/02/jasperreport-with-spring-mvc-fully.html](http://chathurangat.blogspot.in/2012/02/jasperreport-with-spring-mvc-fully.html)链接作为示例来生成报告。为此，一切正常。但是当我将报告导出为 html 时，我无法获取图像。为此，我在*web.xml*和*jasper-views.xml*文件中的**IMAGES_URI**、**IMAGES_DIR_NAME**、**IS_OUTPUT_IMAGES_TO_DIR**、**IS_USING_IMAGES_TO_ALIGN**参数中配置了 imageservlet 。

 *下面是我在*jasper-views.xml*、*web.xml*中的代码配置。

如果我运行我得到的报告，则使用此配置`500 Error as no jasperprint document found on the httpsession`。

如果我配置**DEFAULT_JASPER_PRINT_SESSION_ATTRIBUTE**属性，那么我就得到了图像。但我没有得到如何在*jasper-views.xml*文件中配置它。此属性需要***`JasperPrint`***对象，但我没有创建任何***`JasperPrint`***对象。

任何人都可以帮助我解决这个问题。我为此付出了很多努力。如果您想了解更多信息，我会告诉您。

这是我的*jasper-views.xml*配置：

```
 <util:map id="exportParameterMap">
                <entry key="net.sf.jasperreports.engine.export.JRHtmlExporterParameter.IS_USING_IMAGES_TO_ALIGN">
                        <value>false</value>
                </entry>
                 <entry key="net.sf.jasperreports.engine.export.JRHtmlExporterParameter.IS_OUTPUT_IMAGES_TO_DIR">
                        <value>true</value>
                </entry> 
                 <entry key="net.sf.jasperreports.engine.export.JRHtmlExporterParameter.IMAGES_URI">
                    <value>images?image=</value>
                 </entry> 
                 <entry key="net.sf.jasperreports.engine.export.JRHtmlExporterParameter.IMAGES_DIR_NAME">
                    <value>/home/rupa/Workspace/sample/src/main/webapp/images/rupa</value>
                 </entry> 
        </util:map>
         <bean id="ipHtmlReport"
          class="org.springframework.web.servlet.view.jasperreports.JasperReportsHtmlView"
          p:url="classpath:reports/ggsnreport.jrxml"
          p:reportDataKey="datasource"
          p:exporterParameters-ref="exportParameterMap">

         </bean> 
```

这是我的*web.xml*配置：

```
 <servlet>
                   <servlet-name>image</servlet-name>
                   <servlet-class>net.sf.jasperreports.j2ee.servlets.ImageServlet</servlet-class>
                   <load-on-startup>2</load-on-startup>
        </servlet>

        <servlet-mapping>
                   <servlet-name>image</servlet-name>
                   <url-pattern>/images</url-pattern>

        </servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:21:15.080

我还没有用纯 Spring 方法完成它。我有部分站点与 Spring，但报告是使用传统的 Servlet 生成的。

如果对您有帮助，您可以查看我为类似问题[写的这个答案。](https://stackoverflow.com/a/15747124/1238957)*

# php - 将我的 PHP 版本从 ver 降级。5.3.8 至版本。5.2 在 XAMPP 中

> ID：10846521
> 
> 赞同：0
> 
> 时间：2012-06-01T07:57:24.103
> 
> 标签：php, apache, xampp

我在 windows7 环境中的 Web 开发项目中使用**Apache 2.2.21**和**PHP 5.3.8**，但项目的托管管理只能升级到**PHP 版本。5.2** .

有没有办法在 XAMPP 中更改 php 版本？

我只是想测试如果我使用 5.2 php 版本是否会出现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:10:45.173

安装[WampServer](http://www.wampserver.com/en/)。WampServer 允许您安装多个版本的 PHP、Apache 和/或 MySQL，并通过菜单选项在它们之间切换。;)

# android - 如何构建 JSON 请求正文？

> ID：10846523
> 
> 赞同：0
> 
> 时间：2012-06-01T07:57:31.077
> 
> 标签：android, json, request

我正在尝试构建以下 JSON 请求正文。

这是我第一次使用 JSON，我正在遵循[这个](http://code.google.com/p/json-simple/wiki/EncodingExamples#Example_1-1_-_Encode_a_JSON_object)示例，但仍在苦苦挣扎。

我一直在看 GSON，但想先管理纯 JSON，也许对于这么小的东西，添加 GSON 库不值得？

你能帮我写代码吗？

谢谢。

```
{
   locations:
   [
      {
         latLng:
         {
            lat: 40.900799,
            lng: 8.606102
         }
      },
      {
         latLng:
         {
            lat: 42.900799,
            lng: 9.606102
         }
      }
   ]
} 
```

编辑：

[这](http://www.mapquestapi.com/directions/#matrix)是我尝试使用的 Web 服务，[这里](http://www.mapquestapi.com/directions/#matrix)是请求示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T08:28:21.023

使用 json 对象。做这样的事情。不要手写json，很容易出错。

```
public JSON() throws JSONException
{
    JSONArray locArr=new JSONArray();
    locArr.put(createLatLng(40.900799, 8.606102));
    locArr.put(createLatLng(42.900799, 9.606102));
    JSONObject main=new JSONObject();
    main.put("locations", locArr);
    Log.d("JSON",main.toString());      
}

public JSONObject createLatLng(double lat, double lng) throws JSONException
{
    JSONObject latLng=new JSONObject();
    latLng.put("lat",lat);
    latLng.put("lon",lng);
    JSONObject latLngWrap=new JSONObject();
    latLngWrap.put("latLng",latLng);
    return latLngWrap;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T08:04:40.037

JSON 表示法需要“”围绕字段名称。如果值是字符串，则只应包装它们。

```
{
 "locations":
   [
      {
         "latLng":
         {
            "lat": 40.900799,
            "lng": 8.606102
         }
      },
      {
         "latLng":
         {
            "lat": 42.900799,
            "lng": 9.606102
         }
      }
   ]
} 
```

[您可以随时使用http://jsonlint.com/](http://jsonlint.com/)验证 JSON 是否正确

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T08:30:16.030

扩展 maciekczwa 的答案。JSON（与可以说是 XML 不同）并不是真的要用肉眼来观察。很快就很难看到一个对象在哪里开始和结束，以及什么包裹着什么。使用他的示例创建您的主要 JSON 对象，然后用您需要的任何对象填充它。完成后，您可以非常轻松地将其转换为字符串以进行传输，而无需查看它，并且这样做意味着不必担心哪些标签需要包含在哪些类型的引号中等。

eskalera 是 100% 正确的。JSON 要求所有字段都用引号括起来（关于它们是否可以是单引号或 *必须是双引号的规则因实现而异，但同样，这仅在您手动构建 JSON 时才相关，因为你应该只在它非常简单的情况下这样做（即使那样......可能不是）。

# python - Python - 动态的类似 PHP 的数组

> ID：10846524
> 
> 赞同：1
> 
> 时间：2012-06-01T07:57:31.247
> 
> 标签：python, django, arrays, multidimensional-array

我试图在 python 中创建一个类似 PHP 的数组。在 Perl 中，这将是一个哈希......

我想将数据库中的内容组织成一个数组以便于访问。

就像是：

```
myarray[db_numeric_value1][db_numeric_value2] = db_str_value 
```

但到目前为止还没有运气...

我试图将 myarray 初始化为对象列表（myarray = {}）或数组（myarray = []）......还尝试初始化“子数组”但也没有工作......

谢谢你的帮助！

罗恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T08:42:54.667

你可以使用 python 的 defaultdict 和正确的“default_factory”：

```
from collections import defaultdict
myarray = defaultdict(dict)
myarray[4][5] = 34 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T07:59:10.350

在 Python 中，它是一个`dictionary`（[参见 python 数据结构](http://docs.python.org/tutorial/datastructures.html)）

```
In [4]: myarray = {3: {4: 'Hello World'}}

In [5]: myarray[3][4]
Out[5]: 'Hello World' 
```

编辑：同样的事情，但没有先初始化

```
In [6]: myarray = {}
In [7]: myarray[3] = {}
In [9]: myarray[3][4] = 'Hello World'

In [10]: myarray[3][4]
Out[10]: 'Hello World' 
```

字典索引也可以是变量：

```
myarray[myindex] = myvalue 
```

# java - 启用/禁用 Swing 组件的性能

> ID：10846533
> 
> 赞同：0
> 
> 时间：2012-06-01T07:57:59.307
> 
> 标签：java, performance, swing

我正在开发一个包含很多组件的大型（至少对我而言）gui。启用规则背后有一些相当复杂的机制（意味着必须根据其他组件的状态启用/禁用哪个组件）。每次我更新整个用户界面时（这并不经常，但有时是必要的，例如在加载设置文件之后），我必须通过规则集来设置每个组件。我基本上做的是以下几点：

```
meaningfulName1.setEnabled(conditionForMeaningfulName1());
meaningfulName2.setEnabled(conditionForMeaningfulName2());
meaningfulName3.setEnabled(conditionForMeaningfulName3());
// etc 
```

我问自己这样做是否有意义。

```
boolean temp = conditionForMeaningfulName1();
if (meaningfulName1.isEnabled != temp) meaningfulName1.setEnabled(temp);
temp = conditionForMeaningfulName2();
if (meaningfulName2.isEnabled != temp) meaningfulName2.setEnabled(temp);
temp = conditionForMeaningfulName3();
if (meaningfulName3.isEnabled != temp) meaningfulName3.setEnabled(temp);
// etc 
```

其背后的想法是，如果状态已经是所需的状态，则它可以节省一些性能而不设置标志，因此可以节省一些图形更新（以及函数调用）。

您认为这在大规模上有意义还是根本没有节省任何时间并且只会降低代码的可读性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:00:13.707

根据 Andrew Thompson 的评论，我创建了一个小测试。我没有使用 profiling 左右，只是非常简单`System.currentTimeMillis()`。显然前几次运行必须忽略，但在那之后，这两种方法似乎没有区别。

```
import java.awt.GridLayout;
import java.util.Random;
import java.util.Vector;

import javax.swing.JButton;
import javax.swing.JFrame;

public class Main {
    public static Vector<int[]> v;
    public static JButton[][] buttons;
    public static int n1 = 100, n2 = 100, N = 50000;

    public static void main(String[] args) {
        JFrame f = new JFrame();
        f.setLayout(new GridLayout(n1, n2));

        buttons = new JButton[n1][n2];
        for (int i = 0; i < n1; i++) {
            for (int j = 0; j < n2; j++) {
                buttons[i][j] = new JButton(String.format("%d,%d", i, j));
                f.add(buttons[i][j]);
            }
        }
        f.setSize(1024, 768);
        f.setLocationRelativeTo(null);
        f.setVisible(true);

        v = new Vector<int[]>();
        Random r = new Random();
        for (int i = 0; i < N; i++)
            v.add(new int[] {r.nextInt(n1), r.nextInt(n2), r.nextInt(2)});

        for (int i = 0; i < 10; i++) {
            test1();
            test2();
        }
    }

    public static void test1() {
        reset();
        new Thread(new Runnable() {
            @Override
            public void run() {
                long start = System.currentTimeMillis();
                for (int[] test : v) {
                    buttons[test[0]][test[1]].setEnabled(test[2] == 1);
                }
                System.out.println(String.format("Test1   -> took %dms", System.currentTimeMillis() - start));
            }
        }).start();
    }

    public static void test2() {
        reset();
        new Thread(new Runnable() {
            @Override
            public void run() {
                long start = System.currentTimeMillis();
                for (int[] test : v) {
                    if (buttons[test[0]][test[1]].isEnabled() != (test[2] == 1)) buttons[test[0]][test[1]].setEnabled(test[2] == 1);
                }
                System.out.println(String.format("Test2   -> took %dms", System.currentTimeMillis() - start));
            }
        }).start();
    }

    public static void reset() {
        for (int i = 0; i < n1; i++) {
            for (int j = 0; j < n2; j++) {
                buttons[i][j].setEnabled(true);
            }
        }
        try {
            Thread.sleep(10000);
        } catch (InterruptedException e) {}
    }
} 
```

# java - 字符串作为 \x03\x00\x00\x00 到整数

> ID：10846535
> 
> 赞同：0
> 
> 时间：2012-06-01T07:58:23.843
> 
> 标签：java, string, hex

直升机：

我有一个问题，我在 c 中解决了，但现在我想在 hava 中解决：我有一个类似的字符串：'\x03\x00\x00\x00' 这表示整数的十六进制值。我转换为0x03\0x00 ...现在我想获得整数，但我不知道如何在java中做到这一点

有人可以给我一些想法吗？

提前致谢

（是否有某种方式可以直接使用这种格式（'\x03\x00\x00\x00'）而不使用 byte[] 数组？在 C 中我可以直接使用这种格式来构建一个整数（int）吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:05:28.290

这是我的单行解决方案

```
Integer.parseInt("\\x03\\x00\\x00\\x00".replaceAll("\\\\x", ""), 16) 
```

当然，您可以将其包装在一个函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:01:28.197

我会这样做是这样的：

```
Scanner sc = new Scanner(inputString);
int value = 0;
for (int i = 0; i < 4; i++) {
    sc.next("\\\\x");
    byte b = sc.nextByte(16);
    value = (value << 8) | (b & 0xff);
}
if (sc.hasNext()) {
    throw new SomeException("Unexpected stuff at the end");
} 
```

（**更新**- 更正了符号扩展错误......并在输入字符串的末尾检测到意外的东西。）

现在，如果遇到无法处理的输入，它将抛出异常。在这种情况下，它被设计为匹配正好 4 个字节的序列。

但是（IMO）比接受错误的输入并产生不正确的结果更可取。这就是使用模式匹配技巧来避免进行正确解析的聪明解决方案的风险。

* * *

> 非常感谢我不完全理解这个解决方案的答案，它给我 sc.next("\\x"); 中的错误。

错误将是因为您在其中包含少于 4 个字节的字符串上使用它，或者它的某些内容与您的示例格式不匹配。如果您希望代码处理少于（或多于）4 个字节的序列，则需要对其进行更改。

> 我想知道你为什么做：（`value=(value <<8) | b`但我正在努力理解它）非常感谢

那么有一个错误。我将其更正为

```
value = (value << 8) | (b & 0xff); 
```

它正在做一些位旋转以将字节附加`b`到`value`. 阅读 Java`<<`移位运算符和按位运算符`&`和`|`运算符。

# qt - 使用 QSslSocket 时未解析的函数

> ID：10846536
> 
> 赞同：18
> 
> 时间：2012-06-01T07:58:26.543
> 
> 标签：qt, openssl

我尝试运行一个用 Qt 编写并使用 QSslSocket 的简单程序。

我在**安装了 OpenSSL**的 Ubuntu 12.04 机器上运行这个程序。

但我收到以下错误：

```
QSslSocket: cannot call unresolved function SSLv3_client_method
QSslSocket: cannot call unresolved function SSL_CTX_new
QSslSocket: cannot call unresolved function SSL_library_init
QSslSocket: cannot call unresolved function ERR_get_error 
```

我该如何解决这些错误？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2016-01-31T18:17:07.253

在 Windows/MinGW 上，您需要将这些文件复制到您的 exe 目录。

```
C:\Qt\Tools\mingw492_32\opt\bin\libeay32.dll
C:\Qt\Tools\mingw492_32\opt\bin\ssleay32.dll 
```

`C:\Qt\Tools\mingw492_32\bin`或者，如果您希望它与您的所有应用程序一起使用，您可以将它们复制到。显然，您需要将它们与您的程序一起分发。

您实际上*不需要*添加`QT += network`.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-01T08:25:28.530

安装最新的 openSSL 版本。 `yum install openssl`, `yum install libssl-dev.`.

并在您的 .pro 文件中添加 QT += network

来源：[http ://codeblog.vurdalakov.net/2009/11/solution-qsslsocket-cannot-call.html](http://codeblog.vurdalakov.net/2009/11/solution-qsslsocket-cannot-call.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-05T19:15:59.153

我在使用 QT 5.0.1 和 QT 5.1.1 时遇到了同样的问题，最后我意识到我需要在应用程序二进制文件旁边复制 OpenSSL DLL 文件。由于某种原因，QT 不会从 Windows 路径加载 DLL 文件...

我用过`OpenSSL Win32 0_9_8y`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-10-17T12:39:59.823

对于 Ubuntu 或（基于 Debian 的 Linux）安装 openssl 和 libssl-dev

即**sudo apt-get install openssl libssl-dev**。

对于 Red Hat、Fedora、CentOS（基于 rpm 的 linux）安装 openssl 和 openssl-devel

即**yum install openssl openssl-devel**

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-08-03T05:51:25.460

我将 OpenSSL 降级到 1.0 版并且它工作正常。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-01T08:09:13.007

您需要包含此文件：

```
 #include <QtNetwork> 
```

在您的`.pro`文件中，添加以下行：

```
 QT += network 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-23T20:37:24.170

在 debian 上安装 lua-openssl 包似乎已经解决了我的问题。

# php - 我的 PHP 联系表单向提交者邮件显示服务器地址，并且复制到不起作用

> ID：10846540
> 
> 赞同：0
> 
> 时间：2012-06-01T07:58:45.883
> 
> 标签：php, contact-form

大家，我正在使用.php 脚本进行联系过程。它工作正常。但我需要帮助两件非常小的事情。我已经通过谷歌搜索尽力而为，但一切都顺理成章。

脚本是

```
<?php

/* Subject and Email variables */

$emailSubject = 'sales';
$email_to = 'ritwikmojumder@gmail.com';

/* Gathering data variables */

$nameField = $_POST['name'];
$contactField = $_POST['contact'];
$emailField = $_POST['emailaddress'];
$chooseserviceField = $_POST['chooseservice'];
$commentsField =$_POST['comments'];

$body = <<<EOD
<br><hr><br>
Email: $emailField <br>
Name: $nameField<br>
Contact No: $contactField<br>
Choose Service: $chooseserviceField<br>
Comments: $commentsField<br>
EOD;

// To send HTML mail, the Content-type header must be set
$headers = "From: $emailField\r\n";
$headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";
$success = mail($email_to,$emailSubject,$body,$headers);

//These are the variables for the email

$sendto = $_POST['emailaddress']; // this is the email address collected form the form
$ccto = "amitabh197@gmail.com"; //you can cc it to yourself
$subject = "WebBrahma"; // Subject
$message = "Dear Customer,

We have received your e-mail.Thank you for writing to us.

We shall revert to your Query within 48 hours.

Should we require more time for further Co ordination, we will keep you 
informed. 

Assuring you of our best services.

Note: This is an auto generated message.

Warm Regards,
Billing|WebBrahma 
033-65360954

Incase you don't hear from us, escalate by writing to us at escalate@webbrahma.com
";

$header = "From: <ritwikmojumder@gmail.com>";
$headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";

// This is the function to send the email
mail($sendto, $subject, $message, $header); 

/* Results rendered as HTML */

$theResults = <<<EOD
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Web Hosting | Your friendly Web Hosting Company</title>

<link href="css/superfish.css" rel="stylesheet" type="text/css" media="screen" />
<link href="css/main.css" rel="stylesheet" type="text/css" media="screen" />
<link href='http://fonts.googleapis.com/css?family=Telex' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Gravitas+One|Paytone+One|Radley|Ultra|Bowlby+One|Prata|Spinnaker' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="demo-stuff/demo.css" type="text/css" media="screen" />
<link href='http://fonts.googleapis.com/css?family=Gravitas+One|Paytone+One|Radley|Ultra|Bowlby+One|Prata|Medula+One' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="flexslider.css" type="text/css" media="screen" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<script src="jquery.flexslider-min.js"></script>

<!-- Hook up the FlexSlider -->

<script type="text/javascript">
$(window).load(function() {
$('.flexslider').flexslider();
});
</script>

<!--<script type="text/javascript" src="js/jquery-1.2.6.min.js"></script>-->
<script type="text/javascript" src="js/hoverIntent.js"></script>
<script type="text/javascript" src="js/superfish.js"></script>
<script type="text/javascript">
// initialise plugins
jQuery(function(){
jQuery('ul.sf-menu').superfish();
});

function MM_preloadImages() { //v3.0
var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}
function MM_swapImgRestore() { //v3.0
var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}
function MM_findObj(n, d) { //v4.01
var p,i,x; if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
if(!x && d.getElementById) x=d.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}
</script>

</head>

<body onload="MM_preloadImages('images/readmorebtn1.png','images/face1.png','images/twitter2.png')">

<div id="wraper"> <!--start of "wraper"-->
<div id="header">
<div id="headertop">
<div style="height:27px;"></div> <!--blankdiv-->
<div class="logologin">
<div class="logo"></div>
<div class="loginbox">
<ul>
<li style="margin-top:-30px; "><iframe src="chat.html" style="width:350px; height:250px; overflow:hidden;"></iframe>
</li>
</ul>
</div><!-- End of "loginbox"-->
</div><!--End of "logologin"-->

<div style="height:15px;"></div> <!--blankdiv-->
<div id="nav"> <!--navigation tabs-->

<div id="nava">
<ul class="sf-menu">
<li class="current">
<a href="index.html"><strong><span style="font-size:18px;">Home</span></strong></a>

<li class="current">
<a href="aboutus.html"><span style="font-size:18px; margin-left:-12px;"><strong>Company</span></strong></a>

</li>
<li>
<a href="#"><span style="font-size:18px; margin-left:-12px;"><strong>Services</strong></span></a>
<ul>
<li style="font-size:95%;"><a href="webdesigning.html">Web Designing</a></li>
<li><a href="hosting.html">Web Hosting</a></li>
<li><a href="internetmarketing.html">Internet Marketing</a></li>
<li style="font-size:95%;"><a href="technicalconsultancy.html">Technical Consulting</a></li>
<li><a href="http://webbrahma.supersite.myorderbox.com/domain.php
" target="_blank">Domain Booking</a></li>
<li><a href="webmaintenance.html">Web Maintenance</a></li>
<li style="font-size:95%;"><a href="#">Content Management</a></li>
</ul>
</li>
<li>
<a href="contact.html"><span style="font-size:18px; margin-left:-12px;"><strong>Contact</strong></span></a>

</li>
</li>
</ul>

</div><!--End of "nava"-->

<div id="navb"><span style="margin-left:420px; font-family:'Telex', sans-serif; color:#000; font-size:100%; position:absolute; margin-top:15px;"><span style="font-size:24px; color:#000;">✆:</span> 9088016369</span></div>
<br class="clearfloat" />

</div> <!-- End of "navigation"-->

</div><!--End of "headertop"-->

<div id="container1"><!--Start of "container"-->

<div style="height:35px;"></div><!--Blank Div"-->

<div id="jquerybase">

<div class="flexslider">
<ul class="slides">
<li>
<img src="images/banner1.jpg" />

</li>
<li>
<a href="#"><img src="images/banner2.jpg"/></a>

</li>
<li>
<img src="images/banner6.jpg" />
</li>
<li>
<img src="images/banner5.jpg"/>
</li>

<li>
<img src="images/banner3.jpg"/>
</li>
<li>
<img src="images/banner4.jpg" />
</li>
<li>
<img src="images/banner7.jpg" />
</li>
</ul>
</div> <!--End of "flexslidfer"--->
<div></div>
<!--<div id="search">
<div id="searcha"><img src="images/search.png" width="213" height="73" /></div>
<div id="searchb">
<div class="box1"><p>www.</p></div>
<div class="box2">
<table width="100%" border="1">
<tr>
<td width="350"><form id="form1" name="form1" method="post" action="">

<input name="textfield" type="text" id="textfield" value="" class="comtxt"/>

<label for="select"></label>
<select name="select" class="com" id="select">
<option>.com</option>
<option>.in</option>
<option>.net</option>
<option>.org</option>
</select>

</form></td>

</tr>
</table>

</div>

</div>
<div id="searchc"><img src="images/transfer.png" width="167" height="38" style="float:right;"/></div>

</div><!--End of "search"-->

</div><!--End of "jquerybase"--->

</div> <!--End of "container1"-->

</div> <!-- End of "header"-->

<div style="height:119px;"></div> <!--blank div-->

<div id="container2">

<p align="center">&nbsp;</p>
<p align="center">&nbsp;</p>
<p align="center">&nbsp;</p>
<p align="center">&nbsp;</p>
<p align="center">&nbsp;</p>
<p align="left"><img src="images/logo.png" width="252" height="57" style="margin-left:20px;"/>
<p align="center">&nbsp;</p>
<p align="center">&nbsp;</p>
<p align="center">&nbsp;</p>
<p align="center">&nbsp;</p>
<p align="center">&nbsp;</p>
<p align="center">&nbsp;</p>
<p align="center">&nbsp;</p>
<p align="center">&nbsp;</p>
<p align="center">&nbsp;</p>
<p align="center">&nbsp;</p>
<p align="center">&nbsp;</p>
<p align="center">&nbsp;</p>
<p align="center">&nbsp;</p>
<p align="center">&nbsp;</p>
<p align="center">&nbsp;</p>
<p align="center">&nbsp;<font face="Trebuchet MS" size="5"><b>Thank you.</b></font></p><br /><br />
<p align="center">&nbsp;<font face="Trebuchet MS" size="5"><b>We will get back to you in 48 hrs.</b></font></p>

<!-------------------------- "tab1" starts here------------------------------->
<!-- End of "tab1"-->

</div> <!--End of "container2"-->

<!--------------------------------"extralinks" i.e. bottom links---------------------->
<div id="extralinks">

<div id="container3">

<div id="container3left" style="width:200px; margin-left:40px;">

<ul style="width:200px;">

<li><a href="domains.html" onclick="return openWindow(this, {width:400,height:250,center:true})">Domains &raquo;</a></li>
<li><a href="webdesigning.html">Web Designing &raquo; </a></li>
<li><a href="hosting.html">Web Hosting &raquo;</a></li>
<li><a href="webmaintenance.html">Web Maintenance &raquo;</a></li>
</ul>

</div> <!---End of "container3left"---->
<div id="container3mid" style="width:200px; margin-left:40px;">

<ul style="width:200px;">

<li><a href="seo.html">SEO &raquo;</a></li>
<li><a href="socialmediamarketingservices.html">Social Media Marketing &raquo; </a></li>
<li><a href="linkbuilding.html">Link Building &raquo;</a></li>
<li><a href="ppc.html">PPC Management Services &raquo;</a></li>
</ul>

</div><!---End of "container3mid"---->
<div id="container3right" style="width:200px; margin-left:40px;">

<ul style="width:200px;">

<li><a href="onlinepromotion.html">Online Promotion &raquo;</a></li>
<li><a href="technicalconsultancy.html">Technical Consulting &raquo; </a></li>
<li><a href="contentmanagment.html">Content Management &raquo;</a></li>
<li><a href="feedsubmissionservices.html">Feed Submission &raquo;</a></li>
</ul>

</div><!---End of "container3right"---->
<div id="container3right" style="width:200px; margin-left:40px;">

<ul style="width:200px;">
<li><a href="emailmarketing.html">Email-Marketing &raquo;</a></li>
<li><a href="index.html">Home &raquo;</a></li>
<li><a href="aboutus.html">About Us &raquo; </a></li>
<li><a href="contact.html">Contact Us &raquo;</a></li>
</ul>

</div><!---End of "container3right"---->
</div> <!--end of "extralinks"--->

<!------------------------Footer------------------------------>

<div id="footer">

<div id="container4">

<div id="container4left">

<p>
Rights Reserved to <strong style="color:#F30;">WebBrahma</strong></p><br/>
<p>Designed By: <a href="www.damiracle.com"><strong>Da Miracle</strong></a></p>

</div>
<div id="container4mid">
<ul id="menu-jquery" style="margin-left:50px;">
<li><a href="http://www.facebook.com/pages/WebBrahma/284395434959118" target="_blank"><img src="images/677166248.png" width="35px" height="35px" /></a></li>
<li><a href="https://twitter.com/#!/iWebBrahma" target="_blank"><img src="images/twit.png" width="35px" height="35px" /></a></li>
<li><a href="https://plus.google.com/u/0/b/103440980890044057050/" target="_blank"><img src="images/google-Plus-icon.png" width="35px" height="35px" /></a></li>
<li><a href="https://webbrahma.com/blog" target="_blank"><img src="images/wordpress1.png" width="35px" height="35px" /></a></li>
</ul>
</div>

</div> <!--End of "container4"-->

</div> <!-----End of "footer"------------------>
</div> <!--End of "wraper"-->
</body>
</html>
EOD;
echo "$theResults";

?> 
```

在这里，我发现一切正常。但我的问题是 1\. 当提交者提交查询时，他会收到一封接受邮件。但是在他的邮件中，它显示在标题部分***“via.vps.dial4solution.com”（这是我的服务器）*** 中，这对我来说很尴尬。所以，我需要摆脱这个 via.vps.dial4solution.com 不会显示的问题。在这方面，我已经尝试通过所有可能的方式在脚本中进行更改，但它没有奏效。请帮忙。

1.  当提交者提交时，我需要收到该查询的抄送邮件。我在那里编写了脚本

**$ccto = "amitabh197@gmail.com";**

但是我没有收到抄送邮件。

请帮助我摆脱所有这些问题。提前感谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:29:22.990

改变这个：

```
$header = "From: <ritwikmojumder@gmail.com>";
$headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n"; 
```

至

```
$headers = "From: <ritwikmojumder@gmail.com>" . "\r\n";
$headers .= "Cc: <amitabh197@gmail.com>" . "\r\n";
$headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n"; 
```

请注意第一个中的“s”、标头和新标头`$headers`之后的“\r\n” 。`From:``Cc:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:07:45.807

[尝试使用PHPMailer](http://phpmailer.worxware.com/)类库，而不是手动管理电子邮件标题。我有许多类似的特殊需求，并且对这个包有很好的体验。

# c# - 整合 C# 和 R 问题

> ID：10846541
> 
> 赞同：2
> 
> 时间：2012-06-01T07:58:45.953
> 
> 标签：c#, r

我想在 C# 应用程序中使用 R 语言。

我已按照此处的说明进行操作 - [http://joachimvandenbogaert.wordpress.com/2009/03/26/r-and-c-on-windows/](http://joachimvandenbogaert.wordpress.com/2009/03/26/r-and-c-on-windows/)我可以通过 COM 成功连接到 R 服务器。但是当我尝试获取操作的结果时，我得到的是 null 而不是一个值：

```
connector.EvaluateNoReturn("x <- c(2,3,5,1,4,4)");
var result = connector.Evaluate("sum(x)"); // it is always null here 
```

我想知道我还应该检查什么？我已将 VS 项目/解决方案的编译模式设置为 X86。我已将所有环境变量指向 bin 文件夹的 i386 子文件夹，但没有任何帮助。

我有 Win7 64 位，R 版本 2.15.0。也许我应该尝试 64bit R 代替？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T04:45:08.473

一些无耻的自我推销：还有[RserveCLI](http://rservecli.codeplex.com/)，这是另一个从 .NET 访问 Rserve 的库。我去年在 R/Finance 会议上介绍了它，似乎有一个小的用户群。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T17:57:12.943

按照 Oliver 的回答，您可以尝试使用 Oliver 项目的分支[RserveCLI2](http://obeautifulcode.com/R/RserveCLI2-A-Dot-Net-Client-For-Rserve/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-06T20:07:38.347

您可能想查看另一篇 SO 帖子，[如何在 R v3 中访问 Windows COM 对象？](https://stackoverflow.com/questions/18202999/how-can-i-access-windows-com-objects-in-r-v3).

但实际上，无耻的插件，自从这篇原始帖子和 Dieter Menne 的评论以来， [R.NET已经取得了一些进展，包括在 *nix 平台上。](https://rdotnet.codeplex.com/ "网络")需要 .NET 和 R 互操作的这篇文章的读者可能想尝试一下。

# php - 通过 PHP 进行移动开发

> ID：10846542
> 
> 赞同：-4
> 
> 时间：2012-06-01T07:58:47.073
> 
> 标签：php, mobile

我对 php 和移动应用程序开发都很陌生。我想开发一个移动应用程序，我的朋友建议 php 最适合它。我需要帮助，我该如何开始应用程序开发。或任何其他要使用的技术。我的主要动机是应用程序开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:07:47.170

您可以先从静态 html 网站开始。

您可以为移动 UI 使用移动框架，例如[http://jquerymobile.com/](http://jquerymobile.com/)。

PHP 是服务器端脚本，您可以在需要时使用它来生成动态 html。

# javascript - HTML5 Canvas：通过 Image.prototype 创建 Image.onload() 函数

> ID：10846544
> 
> 赞同：3
> 
> 时间：2012-06-01T07:58:56.297
> 
> 标签：javascript, html, canvas, prototypejs, html5-canvas

所以，我的目标是有一个简单的函数，让我可以输入如下内容：

```
var map = new Image();
map.onloadDraw();
map.src = "images/" + worldmapCanvasShapeImage; 
```

加载时会自动刷新画布。

这是我已经想出的：

```
Image.prototype.onloadDraw = function(){
    this.onload() = function() {
        drawMap();
        drawMarkers();
        drawArticles();
    }
} 
```

它似乎不起作用，这可能是一个小错误，但我找不到很多关于它的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:01:56.753

```
Image.prototype.onloadDraw = function(){
    this.onload = function() {
        drawMap();
        drawMarkers();
        drawArticles();
    }
} 
```

跳过后面的一对括号`onload`。您正在定义它，而不是调用它。:)

# c - Socket编程的分段错误

> ID：10846545
> 
> 赞同：1
> 
> 时间：2012-06-01T07:58:57.550
> 
> 标签：c, linux

我有一个家庭作业问题。Unix 域的套接字编程
1\. 客户端向服务器发送文件名
2\. 服务器检查文件是否存在，打开并将文件描述符发送给客户端
3\. 客户端打开文件描述符并输出到屏幕。平台 = Ubuntu 12.04。我有客户的问题。在线错误分段错误（核心转储）`fd = *p`（我已在客户端代码上标记）
这是我的代码

**服务器**

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <unistd.h>
#include <errno.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <sys/un.h>
#include <stdbool.h>
#include <signal.h>
#include <sys/wait.h>

#define SOCKNAME "sockunix"
bool ende = false;
void sigfkt(int signr){
    printf("SIGINT empfangen ...\n");
    ende = true;
}

int main(){
int fd, sockd, sockd2, rc, *p, sl;
FILE *fp;
struct sockaddr_un uxadr;
struct msghdr mh;
struct cmsghdr *cmp;
char ctrl[sizeof(struct cmsghdr)+10];
struct iovec iov[1];
char eab[100];
//bat dau khai bao
mh.msg_name = NULL;
mh.msg_namelen = 0;
mh.msg_iov = iov;
mh.msg_iovlen = 1;
mh.msg_control = ctrl;
mh.msg_controllen = sizeof(ctrl);
mh.msg_flags = 0;
cmp = CMSG_FIRSTHDR(&mh);
cmp->cmsg_len = CMSG_LEN(fd);
cmp->cmsg_level = SOL_SOCKET;
cmp->cmsg_type = SCM_RIGHTS;
p = (int *)CMSG_DATA(cmp);
// khoi tao socket
uxadr.sun_family = AF_UNIX;
strcpy(uxadr.sun_path, SOCKNAME);

sockd = socket(AF_UNIX, SOCK_STREAM, 0);
if(sockd<0){
    perror("socket");
    exit(1);
}

unlink(uxadr.sun_path);
sl = sizeof(uxadr);
rc = bind(sockd, (struct sockaddr*)&uxadr, sl);
if(rc<0){
    perror("bind");
    exit(2);
}

rc = listen(sockd, 10);
if(rc<0){
    perror("listen");
    exit(3);
}

sigset(SIGINT, sigfkt);
printf("Warte auf Client-Anforderungen ....\n"); //cho client ket noi toi
do{ 
    sockd2 = accept(sockd, 0, 0);
    if(ende)
        break;
    if(sockd2<0){
        perror("accept");
        exit(4);
    }

    iov[0].iov_base = eab;
    iov[0].iov_len = sizeof(eab);
    rc = recvmsg(sockd2,&mh,0); //nhan File name tu client
    if(rc<0){
        perror("recvmsg");
        exit(5);
    }
    printf("%s\n",eab);
    if(rc>0){
        fp = fopen(eab,"r");// kiem tra xem file ton tai ko?
        if(fp==NULL){
            printf("file not existiert\n");
            eab[0]=1; // thong bao cho client file ko ton tai
        }
        else{
            fd = fileno(fp); // lay File descriptor
            eab[0]=2; // thong bao cho client file ton tai
            *p = fd; //gan File descriptor vao cau truc dieu khien
        }
    }
printf("fd=%d\n",*p);
    rc = sendmsg(sockd2,&mh,0); // guoi thong bao va File descriptor den client
    if(rc<0){
        perror("sendmsg");
    }
    close(sockd2);
}while(!ende);

close(sockd);
unlink(uxadr.sun_path);
} 
```

**客户**

```
 #include <stdlib.h>
    #include <stdio.h>
    #include <string.h>
    #include <unistd.h>
    #include <errno.h>
    #include <sys/types.h>
    #include <sys/socket.h>
    #include <sys/un.h>
    #include <stdbool.h>
    #include <signal.h>
    #include <sys/wait.h>

    #define SOCKNAME "sockunix"

    int main(int argc, char *argv[]){
    int  fd = 0, sockd, rc, *p, sl;
    FILE *fp;
    struct sockaddr_un uxadr;
    struct msghdr mh;
    struct cmsghdr *cmp;
    char ctrl[sizeof(struct cmsghdr)+10];
    struct iovec iov[1];
    char eab[100],fname[100];
    //bat dau khai bao
    mh.msg_name = NULL;
    mh.msg_namelen = 0;
    mh.msg_iov = iov;
    mh.msg_iovlen = 1;
    mh.msg_control = ctrl;
    mh.msg_controllen = sizeof(ctrl);
    mh.msg_flags = 0;
    cmp = CMSG_FIRSTHDR(&mh);
    cmp->cmsg_len = CMSG_LEN(fd);
    cmp->cmsg_level = SOL_SOCKET;
    cmp->cmsg_type = SCM_RIGHTS;
    p = (int *)CMSG_DATA(cmp);
    //khoi tao socket
    uxadr.sun_family = AF_UNIX;
    strcpy(uxadr.sun_path, SOCKNAME);

    sockd = socket(AF_UNIX, SOCK_STREAM, 0);
    if(sockd<0){
        perror("socket");
        exit(1);
    }

    sl = sizeof(uxadr);
    rc = connect(sockd, (struct sockaddr *)&uxadr, sl);
    if(rc<0){
        perror("connect");
        exit(2);
    }

    if(argc>=2){ // dua File name vao tu dong lenh
        sprintf(fname,"%s",argv[1]);
    }
    else{// neu chua co File name thi bat dau nhap file name vao
        printf("Bitte Filename eingeben\n");
        fflush(stdin);
        gets(fname); 

    }

    iov[0].iov_base = fname;
    iov[0].iov_len = strlen(fname)+1;
    rc = sendmsg(sockd, &mh, 0); // guoi filename sang server
    if(rc<0){
        perror("sendmsg");
        exit(3);
    }

    iov[0].iov_base = eab;
    iov[0].iov_len = sizeof(eab);
    rc = recvmsg(sockd, &mh, 0); // nhan thong bao va File descriptor tu server
    cmp = CMSG_FIRSTHDR(&mh);
    p = (int *)CMSG_DATA(cmp);
    if(rc<0){
        perror("recvmsg");
        exit(4);
    }

    switch(eab[0]){// kiem tra thong bao
        case 1:// file khong ton tai
            printf("File ist nicht existiert!\n");
            break;
        case 2:// file ton tai
            printf("File ist existiert. Filedeskriptor ist bereits zu verwandel!\n");

FAULT ================>  fd = *p; //fault here with GDB debug

            printf("fd=%d\n",fd);
            fp = fdopen(fd,"r");
            if(fp=NULL)
                printf("fehler fd\n");
            printf("Fileinhalt ausgeben\n");
            printf("=============================================\n");
            while(fread(eab,100,1,fp)>0)
                printf("%s", eab);
            printf("=============================================\n");
            fclose(fp);
            break;
    }
    close(sockd);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T12:59:46.433

理论上，您不能通过 TCP 套接字与具有不同地址空间的进程在进程之间共享文件描述符。为此，您可以使用 UNIX 套接字。

如果您想在进程之间共享信息（而不是文件描述符），您可以使用其他技术，如`mmap`管道[、](http://linux.die.net/man/3/mkfifo)消息传递等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:31:48.333

`recvmesg`在对可能返回或未返回的数据执行任何操作之前，您需要检查返回的错误代码。

无法保证 when`recvmesg`返回的错误`mh`将处于可用状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T10:16:57.253

分段错误`*p`表示 p 为零或指向未分配的内存。

看起来 p 应该指向 mh 内部的某个地方。首先检查崩溃前 p 的值是否在`&mh`和之间`(char*)&mh + sizeof(mh)`。

# c# - Parallel.For 的性能令人失望

> ID：10846550
> 
> 赞同：20
> 
> 时间：2012-06-01T07:59:30.983
> 
> 标签：c#, performance, task-parallel-library

我正在尝试通过使用来加快计算时间`Parallel.For`。`for`我有一个 8 核的 Intel Core i7 Q840 CPU，但与顺序循环相比，我只能获得 4 的性能比。这是否尽可能好`Parallel.For`，或者可以对方法调用进行微调以提高性能？

这是我的测试代码，顺序：

```
var loops = 200;
var perloop = 10000000;

var sum = 0.0;
for (var k = 0; k < loops; ++k)
{
    var sumk = 0.0;
    for (var i = 0; i < perloop; ++i) sumk += (1.0 / i) * i;
    sum += sumk;
} 
```

并并行：

```
sum = 0.0;
Parallel.For(0, loops,
                k =>
                    {
                        var sumk = 0.0;
                        for (var i = 0; i < perloop; ++i) sumk += (1.0 / i) * i;
                        sum += sumk;
                    }); 
```

我正在并行化的循环涉及使用“全局”定义变量的计算`sum`，但这应该只占并行化循环内总时间的一小部分。

**在发布版本（“优化代码”标志集）中`for`，我的计算机上的顺序循环需要 33.7 秒，而`Parallel.For`循环需要 8.4 秒，性能比仅为 4.0。**

在任务管理器中，我可以看到顺序计算时 CPU 使用率为 10-11%，而并行计算时仅为 70%。我试图明确设置

```
ParallelOptions.MaxDegreesOfParallelism = Environment.ProcessorCount 
```

但无济于事。我不清楚为什么不将所有 CPU 功率分配给*并行*计算？

![顺序与并行 CPU 利用率](../Images/b23a9d96dfb7e74fbfed7cf6ca57e2ba.png)

我注意到[之前](https://stackoverflow.com/questions/7734295/how-to-get-max-performance-using-parallel-for-foreach-performance-timings-incl)有人在 SO 上提出过类似的问题，结果更令人失望。但是，该问题还涉及第三方库中较差的并行化。我主要关心的是核心库中基本操作的并行化。

**更新**

在一些评论中向我指出，我使用的 CPU 只有 4 个物理内核，如果启用了超线程，则系统可以看到 8 个内核。为此，我禁用了超线程并重新进行了基准测试。

*禁用*超线程后，我的计算现在*更快*了，无论是并行循环还是（我认为是）顺序`for`循环。循环期间的 CPU 利用率`for`高达约。`Parallel.For`循环期间 45% (!!!) 和 100% 。

循环的计算时间为15.6 秒（比*启用*`for`超线程时快两倍多）和 6.2 秒（比*启用*超线程时好 25% ）。性能比现在只有**2.5**，运行在 4 个真正的核心上。*`Parallel.For`*`Parallel.For`**

 ****因此，尽管禁用了超线程，但性能比仍然大大低于预期。另一方面，`for`循环期间 CPU 利用率如此之高是不是很有趣？在这个循环中是否还会发生某种内部并行化？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-01T08:22:10.340

使用全局变量可能会引入严重的同步问题，即使您不使用锁也是如此。当您为变量赋值时，每个内核都必须访问系统内存中的同一位置，或者等待另一个内核完成后再访问它。您可以通过使用较轻的[Interlocked.Add](http://msdn.microsoft.com/en-us/library/system.threading.interlocked.aspx)方法在操作系统级别以原子方式将值添加到总和来避免没有锁的损坏，但您仍然会由于争用而延迟。

正确的方法是更新线程局部变量以创建部分和，并将它们全部添加到最后的单个全局和中。[Parallel.For](http://msdn.microsoft.com/en-us/library/dd783299.aspx)有一个重载可以做到这一点。MSDN 甚至在[How To: Write a Parallel.For Loop that has Thread Local Variables 中有一个使用求和的示例](http://msdn.microsoft.com/en-us/library/dd460703.aspx)

```
 int[] nums = Enumerable.Range(0, 1000000).ToArray();
        long total = 0;

        // Use type parameter to make subtotal a long, not an int
        Parallel.For<long>(0, nums.Length, () => 0, (j, loop, subtotal) =>
        {
            subtotal += nums[j];
            return subtotal;
        },
            (x) => Interlocked.Add(ref total, x)
        ); 
```

每个线程更新其自己的*小计*值并在完成时使用 Interlocked.Add更新全局*总计。*

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-01T08:01:36.553

Parallel.For 和 Parallel.ForEach 将使用它认为合适的并行度，平衡设置和拆除线程的成本以及它期望每个线程执行的工作。 [与以前的 .NET 版本相比，.NET 4.5 对性能进行了几项改进（包括对要启动的线程数做出更智能的决策）。](http://blogs.msdn.com/b/pfxteam/archive/2011/11/10/10235962.aspx)

请注意，即使每个内核启动一个线程，上下文切换、[错误共享](http://en.wikipedia.org/wiki/False_sharing)问题、资源锁定和其他问题也可能会阻止您实现线性可伸缩性（通常，不一定与您的特定代码示例有关）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-04-12T20:11:04.173

我认为计算增益是如此之低，因为您的代码“太容易”而无法在每次迭代中处理其他任务 - 因为 parallel.for 只是在每次迭代中创建新任务，因此在线程中为它们提供服务需要时间。我会这样：

```
int[] nums = Enumerable.Range(0, 1000000).ToArray();
long total = 0;

Parallel.ForEach(
    Partitioner.Create(0, nums.Length),
    () => 0,
    (part, loopState, partSum) =>
    {
        for (int i = part.Item1; i < part.Item2; i++)
        {
            partSum += nums[i];
        }
        return partSum;
    },
    (partSum) =>
    {
        Interlocked.Add(ref total, partSum);
    }
); 
```

分区器将为每个任务创建最佳作业部分，使用线程的服务任务的时间将更少。如果可以，请对这个解决方案进行基准测试，并告诉我们它是否可以更好地加速。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-18T10:43:18.543

foreach vs parallel for each 一个例子

```
 for (int i = 0; i < 10; i++)
    {
        int[] array = new int[] { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29 };
        Stopwatch watch = new Stopwatch();
        watch.Start();
        //Parallel foreach
        Parallel.ForEach(array, line =>
        {
            for (int x = 0; x < 1000000; x++)
            {

            }

        });

        watch.Stop();
        Console.WriteLine("Parallel.ForEach {0}", watch.Elapsed.Milliseconds);
        watch = new Stopwatch();
        //foreach
        watch.Start();
        foreach (int item in array)
        {
            for (int z = 0; z < 10000000; z++)
            {

            }
        }
        watch.Stop();
        Console.WriteLine("ForEach {0}", watch.Elapsed.Milliseconds);

        Console.WriteLine("####");
    }
    Console.ReadKey(); 
```

[![在此处输入图像描述](../Images/25b271b62f5c5bc1d03015c4bbe705c7.png)](https://i.stack.imgur.com/ys5LD.png)

我的处理器

Intel® Core™ i7-620M 处理器（4M 高速缓存，2.66 GHz）****

# javascript - Ajax 请求失败的原因是什么？

> ID：10846554
> 
> 赞同：-2
> 
> 时间：2012-06-01T07:59:44.493
> 
> 标签：javascript, ajax, jquery

按照我的代码：

```
 $('#btnOK').click(function(e){
        e.preventDefault();
        $form = $('#testForm');
        dataString = $form.serialize();
        $.ajax({
            type: "POST",
            url: 'https://abc.com/login',
            data: dataString,
            dataType: 'xml',
            success: function( returnData ) {
                alert(returnData);
            }
        });
    }); 
```

我的代码无法向[http://abc.com/login](http://abc.com/login)页面发出 ajax 请求并且没有给出结果。这里有什么错误？

是否由于跨域可能：
我的域：http: [//xyz.com](http://xyz.com)
登录域：[http ://abc.com/login](http://abc.com/login)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:03:45.577

我的域：http: [//xyz.com](http://xyz.com) 登录域：[http ://abc.com/login](http://abc.com/login)

这是您可以解决的跨域问题

1.  您网站上的代理

2.  abc.com 网站的 JsonP 支持

3.  如果您只想发布而不关心结果是什么，您可以创建一个表单和一个 iframe，然后将表单的目标设置为该 iframe，然后发布（不适用于启用 csrf 的站点）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T08:03:47.960

除非您的`abc.com`域配置为处理跨域策略，否则您将无法进行跨域 ajax 调用

一种解决方案是将您的 ajax 调用重定向到`xyz.com`域下的服务器端代理，该代理发送您的数据并从中获取响应`abc.com`（例如使用`CURL`）。

或者，如果您控制`abc.com`域，则可以发送适当的标头（[Access-Control-*](https://developer.mozilla.org/en/http_access_control#The_HTTP_request_headers)）以允许跨域调用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T08:13:19.353

直接用chrome或者ie调试器调试一下，在click()函数的入口处下断点，然后一步一步，就会发现问题。

# java - 使用自定义代码将 Mirth 上的文件从一个文件夹移动到另一个文件夹

> ID：10846557
> 
> 赞同：0
> 
> 时间：2012-06-01T07:59:58.160
> 
> 标签：java, mirth

我需要知道，如果源变压器或目标中的 hl7 文件的某些条件不匹配，我如何停止处理特定 hl7 文件的通道，然后如何将该文件从源变压器或目标移动到所需的文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T03:06:43.997

不完全了解您打算完成什么，我想说您可以使用源转换器设置一些标志，您可以使用两个目的地触发这些标志。第一个目的地将有一个过滤器，并且仅在标志设置为“真”时继续，而第二个目的地将仅在条件为“假”时继续。

源转换器： - 查看数据内容/文件名/有关数据的内容，并将标志“shouldContinue”设置为“true”或“false”。

Destination Transformer #1（如果“shouldContinue”为“true”，则接收数据）： - 过滤以检查“shouldContinue” == “true” - 构建输出的转换器 - 如果数据通过过滤器则发送数据的目标设置。

Destination Transformer #2（如果“shouldContinue”为“false”，则数据的接收者）： - 过滤以检查“shouldContinue” == “false” - 构建输出的转换器 - 如果数据通过过滤器则发送数据的目标设置。

这有帮助吗？还是我完全偏离了轨道？

弗兰斯

# perl - Data::Dumper::简单用法

> ID：10846565
> 
> 赞同：5
> 
> 时间：2012-06-01T08:00:36.013
> 
> 标签：perl, data-dumper

只是感兴趣：有没有办法在下面的代码片段中做第二种形式的 Dumper？

```
use Modern::Perl;
use Data::Dumper::Simple;

my $data = { name => 'jim', age => 21, updated => time() };

my $timestr = localtime($data->{updated});
say Dumper($data->{updated}, $timestr);
# output:
# $data->{updated} = 1338537112;
# $timestr = 'Fri Jun  1 08:51:52 2012';

say Dumper($data->{updated}, scalar localtime($data->{updated} ));

# compiliation error:
# say (...) interpreted as function at c:\temp\test4.pl line 9.
# syntax error at c:\temp\test4.pl line 9, near "}]" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T08:10:17.133

引用[文档](http://search.cpan.org/perldoc?Data%3a%3aDumper%3a%3aSimple)：

> 不要尝试使用参数列表中的子例程调用 Dumper()：
> 
> `Dumper($foo, some_sub()); # Bad!`
> 
> 过滤器被括号弄糊涂了。您的作者打算解决这个问题，但很明显 Dumper() 无法弄清楚如何命名子例程的返回值，从而确保进一步破坏。所以不要那样做。

# crystal-reports - 水晶报表的兼容性

> ID：10846566
> 
> 赞同：0
> 
> 时间：2012-06-01T08:00:44.217
> 
> 标签：crystal-reports, compatibility

**vs2005的水晶报表2005和水晶报表2010不应该互相支持吗？**
至少如果我的电脑中有 CR2005 并且我升级到 CR2010 它应该可以工作。我是一名开发人员，我有权安装每个版本的 CR，如果我是 CR 的用户，他们应该是应该使其兼容的人。

找出 SAP 的声明：

> 由于每个版本的 Crystal Reports 都有其必须正确部署的特定运行时，因此部署的运行时与项目中引用的 Visual Studio .NET 的 Crystal Reports 程序集一致至关重要。

我是错还是对？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:36:39.967

Crytsal Report **REPORTS 在不同版本中保持兼容性**；
当您开始使用不同版本的报表时，IDE 只会建议您说“报表是使用不同版本编辑的”。
无论如何，报告可以在不同的运行时使用，您不需要修改它们。

您工作的解决方案（在我的情况下是**WEB APPLICATION**）应该与部署应用程序**的服务器上安装的运行时相匹配。**无论如何，有一种`web.config`解决方法可以使应用程序也可以使用不同的运行时：

```
 <runtime> 
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="CrystalDecisions.CrystalReports.Engine" publicKeyToken="692fbea5521e1304" culture="neutral"/>
        <bindingRedirect oldVersion="xx.x.xxxx.x" newVersion="yy.y.yyyy.y"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="CrystalDecisions.Shared" publicKeyToken="692fbea5521e1304" culture="neutral"/>
        <bindingRedirect oldVersion="xx.x.xxxx.x" newVersion="yy.y.yyyy.y"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="CrystalDecisions.ReportSource" publicKeyToken="692fbea5521e1304" culture="neutral"/>
        <bindingRedirect oldVersion="xx.x.xxxx.x" newVersion="yy.y.yyyy.y"/>
      </dependentAssembly>
      <dependentAssembly>
        ...
    </assemblyBinding>
  </runtime> 
```

其中**oldVersion**是您用于开发的版本， **newVersion**是安装在服务器上的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:53:36.697

在大多数情况下，当前版本的 CR（无论是什么版本）都可以读取旧版本的文件格式。但是，如果您尝试保存它，该文件将更新为当前版本的格式。

也就是说，旧版本的 CR（我认为是 v5 和更早版本）过去常常在子报告及其容器之间使用`Fetch()`和传递信息；`Store()`这些函数包含在 UFL 中。当他们切换架构以使用`Shared`可变范围时，UFL 并没有自动包含在安装中。它需要手动添加。这个决定“打破”了很多报道。虽然这不完全是文件格式兼容性问题，但这是我唯一一次记得他们（SAP nee BusinessObjects nee Crystal Decisions nee Seagate 软件）的行为不受惩罚。

# c++ - 当内容大小改变时调整 wxNotebook 的大小

> ID：10846567
> 
> 赞同：2
> 
> 时间：2012-06-01T08:00:56.560
> 
> 标签：c++, wxwidgets

当动态改变 wxNotebook 中元素的大小时（例如隐藏一个按钮），整个笔记本元素的大小不会更新。这可能会留下空白或阻止显示某些元素。

通常，调用父窗口的 F​​it() 或 FitInside() 应该可以解决问题，但对于 notebook 则不行。我们如何调整它的大小？

演示问题的最小示例：

```
#include <wx/wx.h>
#include <wx/gbsizer.h>
#include <wx/notebook.h>

const int HIDEME_ID = 512, SHOWME_ID = 513;

class MyApp: public wxApp
{
    wxButton* hideme;
    wxSizer* panel_sizer, *frame_sizer, *sw_sizer;
    wxScrolledWindow* sw;
    wxNotebook* nb;

    void hide_button( wxCommandEvent& ) {
        hideme->Hide();
        relayout();
    }
    void relayout() {
        /* Insert layout code here */
    }
    void show_button( wxCommandEvent& ) {
        hideme->Show();
        relayout();
    }
    virtual bool OnInit() {
        wxFrame *frame = new wxFrame( NULL, wxID_ANY, _("Hello World"), wxPoint(50, 50), wxSize(450, 340) );
        frame_sizer = new wxBoxSizer( wxVERTICAL );
        frame->SetSizer( frame_sizer );

        sw = new wxScrolledWindow( frame, wxID_ANY );
        sw->SetScrollRate( 5, 5 );
        frame_sizer->Add( sw, 1, wxEXPAND );

        sw_sizer = new wxBoxSizer( wxVERTICAL );
        sw->SetSizer( sw_sizer );

        nb = new wxNotebook( sw, wxID_ANY );
        wxPanel* panel = new wxPanel( nb, wxID_ANY );
        nb->AddPage( panel, wxT("Tab1") );

        sw_sizer->Add( new wxButton( sw, wxID_ANY, _("Button1"), wxDefaultPosition, wxSize(200,200) ), 0, wxEXPAND );
        sw_sizer->Add( nb, 0, wxEXPAND );
        sw_sizer->Add( new wxButton( sw, wxID_ANY, _("Button3") ), 1, wxEXPAND );
        sw_sizer->Add( new wxButton( sw, wxID_ANY, _("Button4") ), 0, wxEXPAND );

        panel_sizer = new wxBoxSizer( wxVERTICAL );
        panel_sizer->Add( hideme = new wxButton(panel, HIDEME_ID, wxT("HideMe")), 0, wxEXPAND );
        hideme->Hide();
        panel_sizer->Add( new wxButton(panel, SHOWME_ID, wxT("ShowMe")), 0, wxEXPAND );
        panel->SetSizer( panel_sizer );

        frame->Show(true);
        SetTopWindow(frame);
        return true;
    }

    DECLARE_EVENT_TABLE();
};

BEGIN_EVENT_TABLE(MyApp, wxApp)
    EVT_BUTTON(HIDEME_ID, MyApp::hide_button)
    EVT_BUTTON(SHOWME_ID, MyApp::show_button)
END_EVENT_TABLE()

IMPLEMENT_APP( MyApp ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T08:00:56.840

这里有点令人惊讶的陷阱是，与许多其他窗口不同，wxNotebook 会缓存其最佳大小。在进行任何布局之前，我们必须使缓存无效：

```
nb->InvalidateBestSize();
sw->FitInside(); 
```

# cakephp - 使多个模型中的字段无效

> ID：10846572
> 
> 赞同：0
> 
> 时间：2012-06-01T08:01:12.947
> 
> 标签：cakephp, cakephp-1.3, invalidation, formhelper

我有一个包含多个模型的表格。模型中的验证似乎是正确的，并且模型正确关联。但是如何使两个模型中的无效字段无效并将显示错误传递回表单？

我的用户中的代码）_controller.php 是：

```
$errors = $this->User->invalidFields(array('fieldList' => array('password','cpassword','firstname','lastname','email')));

$this->User->set('errors',$errors); 
```

但我有一个像这样链接的 Profile 模型：

```
$this->User->Profile 
```

并希望它对 Profile.zip 无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:02:16.787

您可以使用链接 if 子句，如 [http://www.dereuromark.de/2010/10/09/about-php-basics-and-pitfalls/中所述](http://www.dereuromark.de/2010/10/09/about-php-basics-and-pitfalls/)

基本上，您使用 & 而不是 &&

所以如果你有一个主模型和相关数据：

```
$this->User->set($this->data);
$this->User->Profile->set($this->data);
if ($this->User->validates() & $this->User->Profile->validates()) {
    //continue
} 
```

单个 & 确保两个条件都被执行（使用 && 如果出现错误，您只会触发第一个条件，因此不会为相关模型呈现验证规则）

你也可以这样做：

```
$val1 = $this->User->validates();
$val2 = $this->User->Profile->validates();
if ($val1 && $val2) {} 
```

这样，在您进入 if 子句之前，它们都会被执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:06:34.023

我建议不要在无效字段数组中手动​​设置错误，而是使用`$validate`数组来设置验证规则。

如果内置规则不够，您可以定义自己的复杂规则。

# python - wxpython 在 Linux Mint 上无法正常工作

> ID：10846578
> 
> 赞同：0
> 
> 时间：2012-06-01T08:01:30.770
> 
> 标签：python, wxpython

所以，我一直在尝试使用 thenewboston.com 上的视频来学习 wxpython，但是当我运行这段代码时，我得到的只是一个空白的灰色窗口。当我在代码中更改大小时，窗口的大小甚至都不会改变！窗口标题、按钮和面板也不会显示为空白。我正在使用 Linux Mint，所以我认为这可能是原因。请帮我解决这个问题！

```
import wx

class mainApp(wx.Frame):

    def __init_(self,parent,id):
        wx.Frame.__init__(self,parent,id,title = 'Frame aka Window',size=(800,900))
        panel=wx.Panel(self)
        buttonExit=wx.Button(panel,label="Quit", pos=(50,50),size=(60,60))
        self.Bind(wx.EVT_BUTTON,self.closebutton,buttonExit)
        self.Bind(wx.EVT_CLOSE,self.closewindow)

    def closebutton(self,event):
        self.Close(True)

    def closewindow(self,event):
        self.Destroy()

if __name__ == '__main__':
    app = wx.PySimpleApp()
    frame=mainApp(parent=None,id=-1)
    frame.Show()
    app.MainLoop() 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T09:37:59.737

你拼错了`__init__` `__init_`:)

# ruby-on-rails - 嵌套资源没有路由匹配错误

> ID：10846587
> 
> 赞同：1
> 
> 时间：2012-06-01T08:02:22.573
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, nested-resources

我正在尝试获得一个基本的嵌套资源路径来工作，但目前出现以下错误：

```
No route matches {:action=>"show", :controller=>"stores"} 
```

在我看来，我有以下链接：

```
 <% if current_user %> Hello <%= current_user.email %> /
  <%= link_to 'Store', user_store_path %> 
    <%= link_to 'New Store', new_user_store_path %>
    <%= link_to 'My Profile', home_path %>
    <%= link_to 'Edit Profile', update_path %>
    <%= link_to "Logout", logout_path %> 
   <% else %>
   <%= link_to "Login", login_path %> / <%= link_to "Sign up", signup_path %>
  <% end %> 
```

现在，当我耙我的路线时，我得到的路径与上面的完全匹配 - user_store_path 等。

我的路线文件如下所示：

```
 resources :users do
     resources :stores
   end

   match "signup" => "users#new"
   match "home" => "users#show"
   match "update" => "users#edit"

   get "login" => "sessions#new"
   post "login" => "sessions#create"
   delete "logout" => "sessions#destroy"
   get "logout" => "sessions#destroy"

   resources :sessions

   root :to => 'sessions#new' 
```

这真的让我很困惑，因为我在 RoR 网站上阅读的所有内容都表明这应该有效。有谁知道我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T08:48:46.403

```
resources :users do
  resources :stores
end 
```

创建`store`所有需要给定的路由，`user`因为它是嵌套的。

所以 eg`<%= link_to 'Store', user_store_path %>`是错误的，因为它不提供任何用户。应该是`<%= link_to 'Store', user_store_path(current_user, store) %>`。

这也适用于您的其他链接，例如`<%= link_to 'New Store', new_user_store_path %>`应该是`<%= link_to 'New Store', new_user_store_path(current_user) %>`

**根据您的评论更新**

`No route matches {:action=>"show", :controller=>"stores" [...]`发生是因为你想要`show`一个特定的资源，在这个例子中是一个`store`. 所以需要传入store id或者store对象来生成path/url。例如`<%= link_to 'Store', user_store_path(current_user, current_user.store.first %>`。我在最初的回答中错过了这一点，对不起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T08:51:20.520

仅指定路径是不够的，您还必须指定对象或其 id。例如：

```
<%= link_to 'Store', [current_user, store] %>
<%= link_to 'Store', user_store_path(user_id: current_user.id, id: store.id) %>
<%= link_to 'New Store', new_user_store_path(user_id: current_user.id) %>
#and so on 
```

运行 rake routes，你会看到在一些你想指定 id 的路径中，例如：`/users/:user_id/stores/:id`

[http://guides.rubyonrails.org/routing.html#creating-paths-and-urls-from-objects](http://guides.rubyonrails.org/routing.html#creating-paths-and-urls-from-objects)

# php - 在 json 中编码查询 db 返回空值

> ID：10846588
> 
> 赞同：0
> 
> 时间：2012-06-01T08:02:27.603
> 
> 标签：php, json, encoding, utf-8

我有一个要在 json 中编码的数据库结果，以前我在将数据导入数据库时​​遇到编码问题（phpmyadmin 上的奇怪字符），但现在我在插入数据之前通过 utf8_decode() 修复了它。

所以现在我检索我的数据，但字符串有问题......

```
echo '<pre>';
        var_dump($product);
        echo '<br>';
        var_dump( json_encode($product));
        echo '</pre>';
        echo '<br>'.mb_detect_encoding($product->name);
        echo '<br>'.$product->name;
        echo '<br>'.mb_convert_encoding($product->name, 'ISO-8859-1');
        $product->name = 'H2O AUDIO Waterproof-Ohrhörer Surge Pro Mini BA1-GY';
        echo '<br>Revu encode: '.mb_detect_encoding($product->name);
        echo '<br>'.mb_detect_encoding($product->name);
        echo '<br>Revu: '.$product->name;
        echo '<br>'.mb_convert_encoding($product->name, 'ISO-8859-1');
        echo '<br>';
        var_dump( json_encode($product)); 
```

这给了我：

```
object(Application_Model_Product)#42 (13) {
  ["id_product"]=>
  string(6) "359805"
  ["id_community_ask"]=>
  NULL
  ["barcode"]=>
  string(13) "3000000010907"
  ["name"]=>
  string(51) "H2O AUDIO Waterproof-Ohrhörer Surge Pro Mini BA1-GY"
  ["description"]=>
  NULL
  ["image"]=>
  NULL
  ["status"]=>
  string(1) "2"
  ["nb_votes_halal"]=>
  string(1) "0"
  ["nb_votes_harram"]=>
  string(1) "0"
  ["date_created:protected"]=>
  NULL
  ["date_edited:protected"]=>
  NULL
  ["updated:protected"]=>
  string(1) "0"
  ["imported:protected"]=>
  string(1) "1"
}

string(173) "{"id_product":"359805","id_community_ask":null,"barcode":"3000000010907","name":null,"description":null,"image":null,"status":"2","nb_votes_halal":"0","nb_votes_harram":"0"}"

UTF-8
H2O AUDIO Waterproof-Ohrhörer Surge Pro Mini BA1-GY
H2O AUDIO Waterproof-Ohrhörer Surge Pro Mini BA1-GY
Revu encode: UTF-8
UTF-8
Revu: H2O AUDIO Waterproof-OhrhÃ¶rer Surge Pro Mini BA1-GY
H2O AUDIO Waterproof-OhrhÃ¶rer Surge Pro Mini BA1-GY
string(227) "{"id_product":"359805","id_community_ask":null,"barcode":"3000000010907","name":"H2O AUDIO Waterproof-Ohrh\u00f6rer Surge Pro Mini BA1-GY","description":null,"image":null,"status":"2","nb_votes_halal":"0","nb_votes_harram":"0"}" 
```

你可以看到'name'字段包含一些东西，但是当我在json中编码时它告诉'null'......我知道json只在utf8中工作，这就是为什么我调用mb_detect_encoding来确保我在utf8中......

知道为什么“名称”字段返回“空”吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:37:56.490

您需要执行以下任一操作：

```
mb_convert_encoding($product->name,"utf8","THE_NAME_CHARSET"); 
```

或者：

```
$product->name = iconv("THE_NAME_CHARSET","utf8",$product->name); 
```

# hadoop - Hadoop MapReduce 思考

> ID：10846592
> 
> 赞同：2
> 
> 时间：2012-06-01T08:02:48.853
> 
> 标签：hadoop, mapreduce

我是 hadoop mapreduce 框架领域的新手。我自己阅读了很多教程并理解了框架。我已经成功地在伪分布式模式下配置了一个 hadoop 设置。我有两个需要在 Hadoop MapReduce 中完成的特定任务。

我有许多具有以下格式的数据文件。

交换消息的数量；用户1；用户2；时间戳；

一个例子是：5；约翰·多伊；约翰·史密斯; 1900 年 1 月 1 日；

我想要完成的是

1.  对用户名进行数据屏蔽（例如在用户名之上构建 SHA256，以便它们是匿名的。）

2.  汇总给定期间（例如 1 周）内交换的消息数量

现在让我们来回答我的问题：根据我目前的知识，hadoop mapreduce 框架旨在完成第二个任务。我可以映射键值（交换消息的两个用户名，消息数量）并减少它以获得给定时间段（例如 1 周）内的消息总数。但是第一个任务呢？当我进行数据屏蔽时，没有reduce操作，这个任务不是hadoop mapreduce的任务吗？我想并行执行，但真的想不到应用 hadoop mapreduce 来完成第一个任务。我需要处理的数据文件数量非常大，这使得无论如何都要使用hadoop mapreduce。

感谢您的意见！

PS：问题可以概括为“hadoop MapReduce最适合哪种类型的任务？”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T08:22:25.323

第一项任务非常适合仅地图工作。MapReduce 通常适用于排序、映射（对数据应用一些花哨的功能）和归约数据。

所以你的问题非常适合MR。

如果您需要任务之间的强通信或迭代繁重的任务（如图形算法），则 MapReduce 不适合。对于最适合的 BSP，您可以在 Hama 或 Giraph 之间进行选择，而 Giraph 主要提供图形处理，而 Hama 是纯 BSP 框架，它也有一个图形处理模块。

# java - 编写 JUnit 时如何绕过 Runtime.getRuntime()？

> ID：10846595
> 
> 赞同：8
> 
> 时间：2012-06-01T08:03:14.903
> 
> 标签：java, unit-testing, junit, singleton, mockito

我有一个类，其中 Runtime.getRuntime() 用于从命令行执行脚本并获取结果以进行进一步处理。

但是当我为这个类编写 JUnit 时，我找不到模拟/避免这个 Runtime.getRuntime().exec() 的方法。

我不能使用 EasyMock 或 PowerMock 或**Mockito**以外的任何其他模拟 API 。

请给我一个解决这个问题的方法，因为这会影响代码覆盖率。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-01T08:08:11.173

你必须重构。提取`Runtime.getRuntime().exec()`到一个单独的类：

```
public class Shell {

  public Process exec(String command) {
    return Runtime.getRuntime().exec(command);
  }

} 
```

现在以某种方式向您的测试类调用`getRuntime()`显式注入类：`Shell`

```
public class Foo {

  private final Shell shell;

  public Foo(Shell shell) {
    this.shell = shell;
  }

  //...
  shell.exec(...)

} 
```

在 JUnit 测试中，只需将模拟`Shell`类传递给构造函数即可：

```
@Mock
private Shell shellMock;

new Foo(shellMock); 
```

旁注：是的，我**不是**用一种实现来创建`Shell`接口。你介意吗？Mockito 不是。奖励：您现在可以验证是否调用了正确的过程：

```
verify(shellMock).exec("/usr/bin/gimp"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T09:10:51.133

Tomasz Nurkiewicz 提供了一个绝妙的答案。但有一个替代方案。

您可以`Runtime.getRuntime()`在您正在测试的类中进入它自己的方法；然后用 Mockito 间谍对其进行测试。在 Mockito 间谍中，您可以使用创建 mock 的版本覆盖此特定方法`Runtime`，然后用它做任何您喜欢的事情。

然而，Tomasz 的方法更简洁，我彻底推荐它。我只是想说还有另一种方法可以做到这一点，而无需求助于 Powermock。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-23T12:44:28.877

我使用了子类化和覆盖（如 Michael C. Feathers 的书“有效使用遗留代码”中所述）

假设我们有以下代码：

```
public class CannotChange{
    public CannotChange(){}
    public void TryingToTest() throws IOException {
        ...
        Process proc = Runtime.getRuntime().exec("command");
        ...
    }
} 
```

将运行时代码提取到受保护的方法中：

```
 public void TryingToTest() throws IOException {
        ...
        Process proc = execute("command");
        ...
    }
    protected Process execute(string command){ 
        return Runtime.getRuntime().exec(command);
    } 
```

然后在测试类中创建一个扩展CannotChange类并覆盖执行的类

```
public class CannotChangeTest{

   private class CannotChangeForTesting extends CannotChange{
      public CannotChangeForTesting(){ super(); }
      @Override
      public Process execute(String command){
         return null; //or a mocked object
      }
   }

   @Test
   public void TestMethod(){
      CannotChange cannotChange = new ForTestCannotChange();
      cannotChange.TryingToTest();
   }
} 
```

# delphi - 如何在每次编译时强制资源编译器？

> ID：10846597
> 
> 赞同：6
> 
> 时间：2012-06-01T08:03:19.097
> 
> 标签：delphi, configuration, embedded-resource

是否有项目/编译器/链接器设置可以强制 brcc32.exe`.rc`在项目中包含的部分或所有文件上运行？默认情况下，仅`.rc`重新编译已更改的文件，但不会重新编译包含的任何文件`.rc`。现在我们手动删除`.res`文件以强制重新编译。

**更新：**受到公认答案的启发，我写了这个：[https ://gist.github.com/2868141](https://gist.github.com/2868141)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T08:10:22.210

多年来没有使用 Delphi，但据我所知，您可以定义预构建事件，不是吗？您可以在构建之前[触摸](http://www.helge.mynetcologne.de/touch/index.htm)所有 rc 文件。

# vim - 在 Vim 中打开一个条目后如何关闭位置列表？

> ID：10846598
> 
> 赞同：5
> 
> 时间：2012-06-01T08:03:23.680
> 
> 标签：vim

当用户从中选择一个条目（即导航到列出的位置）时，有没有办法自动关闭 Vim 中的当前位置列表？

有问题的场景类似于“<a href="https://stackoverflow.com/questions/437262/how-to-open-a-file-in-a-list-of-files-in -vim">如何在 Vim 的文件列表中打开一个文件？" 问题。我有一个外部程序，它创建一个位置列表（跨多个文件），然后使用`lgetfile`命令加载。当例如使用`lopen 10`命令打开列表时，即使在选择了位置之后，位置列表窗口仍保持打开状态。

作为替代方案，我会接受任何允许我使用 Vim 命令调用具有单个参数的函数的解决方案，在此基础上运行外部程序以编写文件和位置列表。我想打开这个列表（在当前窗口或拆分窗口中）并能够选择一个文件（即，使用`↑</kbd>, `↓</kbd> for navigation and `Return` to select), so that the list is closed and the selected file is opened—much the same as the plugin buffer explorer works, just with a custom list of files instead of the list of buffers.``

也许有一个（流行和维护的）插件可以为我做到这一点——也许添加了“在新选项卡中打开”和“在拆分窗口中打开”的附加功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T13:03:04.157

`:lclose`每次`Return`在快速修复或位置列表窗口中使用时，可以使用以下映射自动发出命令：

```
:autocmd FileType qf nmap <buffer> <cr> <cr>:lcl<cr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:29:11.680

如果您使用的是`quickfix`窗口，例如：`lopen 10`，您仍然可以使用`:lopen 10 | lcl`.

我建议阅读Vim Wiki(a) 中的[这篇](http://vim.wikia.com/wiki/Toggle_to_open_or_close_the_quickfix_window)文章。

# c# - 一种通过命令行将字符串@start 传递给c#的方法

> ID：10846600
> 
> 赞同：0
> 
> 时间：2012-06-01T08:03:33.043
> 
> 标签：c#, visual-studio-2010, ip

我一直在做一个让我自己的 IP cam 弹出的项目。
我有这个工作，但现在想从命令行开始，但传递特定的相机 ip。
我的编程技能有限，对 C# 很
陌生 接受字符串的代码是

```
this.textBox_IP.Text = "xxx.xxx.xxx.xxx" 
```

我已经被困在这几天了，如何传递 ip，所以在 cmdline

```
IpCam.exe xxx.xxx.xxx.xxx 
```

任何人都可以解决如何解决这个问题

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T08:06:20.713

C#程序的默认启动方法的签名是

```
static void Main(string[] args) 
```

命令行参数出现在 中`args`，所以如果你只传递一个参数

```
args[0] 
```

将包含您示例中的 IP 地址。

建议检查

```
args.Length >= 1 
```

确保至少输入了一个参数。

有关解析命令行的更高级建议，请参阅

[在 C# 中解析命令行参数的最佳方法是什么？](https://stackoverflow.com/questions/491595/best-way-to-parse-command-line-arguments-in-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:12:55.657

最好从 GUI 应用程序中的主窗体加载事件中执行此操作它很简单，只需将 ip 作为命令行参数传递，例如：`myprogram.exe yourip` 您可以使用从参数中获取 ip

```
string[] args = Environment.GetCommandLineArgs(); 
```

但`args[0]`不会包含 ip，它将包含您的程序名称`myprogram.exe` 要获取 ip，您必须阅读第二个参数

```
string myip=args[1]; 
```

在表单加载中添加这个

```
string myip=null;
string[] myargs = Environment.GetCommandLineArgs();
string myip=myargs[1];
textBox_IP.Text =myip; 
```

# jquery - 使用 jQuery 的 scrollTop 和动画函数时的 ownerDocument 错误

> ID：10846609
> 
> 赞同：2
> 
> 时间：2012-06-01T08:04:55.543
> 
> 标签：jquery, window, jquery-animate, undefined, scrolltop

我偶然发现了一个非常奇怪的错误。我正在使用 jQuery scrollTop 让窗口滚动到 .extrasWarning 类的位置，只要该类不在窗口的视线范围内。这是以下代码：

```
$('[data-required] .number select').change(function () {
var number = $(this).closest('.choice_data').data('required'),
windowPos = $(window).height(),
selectedAmount = 0;
alert(windowPos);
$(this).closest('.choice_data').find('.number option:selected').each(function (i) {
  selectedAmount = selectedAmount + parseInt($(this).val());
});
if (selectedAmount > number) {
  $(this).closest('.choice_data').next('.extrasWarning').show();
  var errorPos = $(this).closest('.choice_data').next('.extrasWarning').offset().top;
  alert(errorPos);
  if (errorPos > windowPos) {
    $(window).animate({
      scrollTop: errorPos
    }, 1000);
  }
} else {
  $('.extrasWarning').hide();
}
}); 
```

当我使用该元素选择另一个选项时，所有事件都会正确触发，但 $(window).animate 函数除外。FireFox 显示以下错误：a.ownerDocument 未定义。

问题在于将 animate 函数与 scrollTop 函数结合使用。如果我实施以下更改：

```
if (errorPos > windowPos) {
  $(window).scrollTop(errorPos);
} 
```

它突然工作正常！但是，我真的很想使用动画功能。知道我怎样才能做到这一点吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T08:13:36.910

尝试动画 body 和 html 元素：

```
 if (errorPos > windowPos) {
    $("body, html").animate({
      scrollTop: errorPos
    }, 1000);
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:17:46.947

~~`$(elem).animate`动画 CSS 属性，并且滚动位置不是一个。~~不对; 如果给定的属性不是 CSS 属性，jQuery 会将其视为元素属性。

`animate` *无论如何，没有*dom 元素的用途不是很广为人知，而是为您喜欢的任何值设置动画：

```
var jWin = $(window);
var currentPos = jWin.scrollPos();
$({pos: currentPos}).animate(
    {pos: errorPos},
    {
        duration: 1000,
        step: function () { jWin.scrollTop(this.pos) },
        complete: function () { jWin.scrollTop(errorPos); }
    }
); 
```

`pos`这会从当前滚动位置动画到预期的目的地`errorPos`。在`step`函数中，您相应地设置实际滚动位置。

该`complete`步骤是必要的，因为`step`通常不使用最终值调用。

# java - 为不同的 Jersey REST 服务调用应用不同的 Jackson 过滤器

> ID：10846619
> 
> 赞同：16
> 
> 时间：2012-06-01T08:06:14.037
> 
> 标签：java, jersey, jax-rs, jackson

我正在使用 Jersey 来实现 JAX-RS REST 样式的服务以及用于 JSON 映射的 Jackson 2.0.2。其中一个 REST 服务返回一个`List<EntityA>`（我们称之为它`indexA`），其中`EntityA`包含另一个`List<EntityB>`，而另一个服务只返回一个`List<EntityB>`（我们称之为它`indexB`）：

```
@Entity
@JsonAutoDetect
public class EntityA {
  @Id
  private String id;

  @OneToMany
  private List<EntityB> b;

  ...
}

@Entity
@JsonAutoDetect
@JsonFilter("bFilter")
public class EntityB {
  @Id
  private String id;

  private String some;
  private String other;
  private String attributes;

  ...
}

@Path("/a")
public class AResource {

  @GET
  @Path("/")
  public List<EntityA> indexA() {
    ...
  }
}

@Path("/b")
public class BResource {

  @GET
  @Path("/")
  public List<EntityB> indexB() {
    ...
  }
} 
```

我想要实现的是将杰克逊过滤器应用于`indexA`调用，以便并非所有子`EntityB`元素的属性都被序列化。OTOH，`indexB`应该`EntityB`完整返回。

我知道存在 a `ContextResolver<ObjectMapper>`，我已经将其用于其他目的。不幸的是，在这两种情况下`ContextResolver`，似乎都无法区分两种服务调用（并且由于类型擦除，我无法找出泛型类型参数）。`Class``ContextResolver.getContext(Class)``ArrayList`

根据被映射的实体类型，有没有更适合配置`ObjectMapper`/的钩子？`FilterProvider`

我可以使用[如何使用 Java 返回部分 JSON 响应中提出的方法？](https://stackoverflow.com/questions/9314735/how-to-return-a-partial-json-response-using-java): 手动映射到 a `String`，但这会扼杀基于声明性注释的方法的整体美感，所以我想避免这种情况。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-05T19:21:39.860

我处于同样的情况，经过大量研究，我想通了，解决方案是使用`@JsonView`Spring，它可以将一个`ObjectMapper`注入 JSON Writer 而不会破坏 Jersey 的美感。

我正在研究一组 REST API，我想获取 的实例列表`SystemObject`和特定实例的详细信息`SystemObject`，就像您一样，我只想要列表中每个实例的属性数量非常有限，以及细节，我只是为它们定义视图，并在`SystemObject`类中添加注释。但默认情况下，所有没有`@JsonView`注释的属性都将输出到 JSON，但是`item(SerializationConfig.Feature.DEFAULT_VIEW_INCLUSION)`我可以使用一个配置来排除它们。

问题是我必须将其设置为 true 以满足我的需要。但我无法更改 ObjectMapper，它可以将对象转换为 JSON，通过阅读下面的 3 篇文章，我知道我能做的唯一方法是将 Modified 注入`ObjectMapper`Jersey。现在我得到了我想要的。

就像您针对数据库表创建多个视图一样。

这 3 个链接将以不同的方式帮助您：

[如何创建一个可供 Spring 用于注入的 ObjectMapperProvider](https://stackoverflow.com/questions/4428109/jersey-jackson-json-date-serialization-format-problem-how-to-change-the-form)

[泽西、杰克逊、春天和 JSON](http://willmanning.org/blog/?p=104)

[Jersey + Spring 集成示例](http://www.mkyong.com/webservices/jax-rs/jersey-spring-integration-example/)

休息资源：

```
package com.john.rest.resource;

import java.util.ArrayList;
import java.util.List;

import javax.ws.rs.GET;
import javax.ws.rs.HeaderParam;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.WebApplicationException;
import javax.ws.rs.core.Context;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.Request;
import javax.ws.rs.core.UriInfo;

import org.codehaus.jackson.map.annotate.JsonView;
import org.springframework.stereotype.Component;

import com.midtronics.esp.common.EspException;
import com.midtronics.esp.common.SystemObject;
import com.midtronics.esp.mobile.model.SystemObjectView;
import com.midtronics.esp.model.accesscontrol.AccessControlBean;
import com.midtronics.esp.model.site.SiteBean;

@Component
@Path("/hierarchy")
public class Hierarchy {

    // Allows to insert contextual objects into the class, 
    // e.g. ServletContext, Request, Response, UriInfo
    @Context
    UriInfo uriInfo;

    @Context
    Request request;

    // Return the list of sites
    @GET
    @Path("sites")
    @Produces(MediaType.APPLICATION_JSON)
    @JsonView({SystemObjectView.ObjectList.class})
    public List<SystemObject> listSite(
            @HeaderParam("userId") String userId, 
            @HeaderParam("password") String password) {
        ArrayList<SystemObject> sites= new ArrayList<SystemObject>();

        try{
            if(!AccessControlBean.CheckUser(userId, password)){
                throw new WebApplicationException(401);
            }
            SystemObject.GetSiteListByPage(sites, 2, 3);

            return sites;
        } catch(EspException e){
            throw new WebApplicationException(401);
        } catch (Exception e) {
            throw new WebApplicationException(500);
        }
    }

    // Return the number of sites
    @GET
    @Path("sites/total")
    @Produces(MediaType.TEXT_PLAIN)
    public String getSiteNumber(@HeaderParam("userId") String userId, 
            @HeaderParam("password") String password) {
        try{
            return Integer.toString(SiteBean.GetSiteTotal()); 
        } catch(EspException e){
            throw new WebApplicationException(401);
        } catch (Exception e) {
            throw new WebApplicationException(500);
        }
    }

} 
```

休息模型：

```
package com.john.rest.model;

import java.io.Serializable;
import java.util.ArrayList;

import javax.xml.bind.annotation.XmlRootElement;

import org.codehaus.jackson.annotate.JsonIgnore;
import org.codehaus.jackson.annotate.JsonProperty;
import org.codehaus.jackson.map.annotate.JsonView;

import com.midtronics.esp.mobile.model.SystemObjectView;
import com.midtronics.esp.model.common.ICommonDAO;

@XmlRootElement
public class SystemObject implements Serializable
{
    private static final long serialVersionUID = 3989499187492868996L;

    @JsonProperty("id")
    @JsonView({SystemObjectView.ObjectList.class, SystemObjectView.ObjectDetail.class})
    protected String objectID = "";

    @JsonProperty("parentId")
    protected String parentID = "";

    @JsonProperty("name")
    @JsonView({SystemObjectView.ObjectList.class, SystemObjectView.ObjectDetail.class})
    protected String objectName = "";

    //getters...
    //setters...

} 
```

REST 模型视图：

```
package com.john.rest.model;

public class SystemObjectView {
    public static class ObjectList { };

    public static class ObjectDetail extends ObjectList { }
} 
```

# iphone - iOS：从 plist 文件加载图像

> ID：10846620
> 
> 赞同：2
> 
> 时间：2012-06-01T08:06:16.517
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在尝试将 plist 文件中的各种图像显示到 UIImageView 中，我编写了这样的代码：

```
NSDictionary *picturesDictionary = [NSDictionary dictionaryWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"Photos" ofType:@"plist"]];    
    imageArray = [picturesDictionary objectForKey:@"PhotosArray"];
    PhotosInAlbum.image = [UIImage imageWithContentsOfFile:[imageArray objectAtIndex:1]]; 
```

但实际上什么也没发生，我的 ImageView 是空的！我还有两个按钮可以向前向后图像。

Plist的内容： ![在此处输入图像描述](../Images/a10b81a3b9099e1e646790e58cfc088d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T08:42:06.213

plist不正确，应该是

```
Root ---- Dictionary
     PhotosArray ----- Array
         Item 0   ------ String -- Beach.jpg 
```

然后将此代码添加到您的 viewController.. 确保 Interface imageView 链接到 IBOutlet。

```
NSDictionary *picturesDictionary = [NSDictionary dictionaryWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"Photos" ofType:@"plist"]];     
NSArray *imageArray = [picturesDictionary objectForKey:@"PhotosArray"]; 
PhotosInAlbum.image = [UIImage imageNamed:[imageArray objectAtIndex:0]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T08:13:32.427

尝试使用这个：

```
 PhotosInAlbum.image = [UIImage imageNamed:[imageArray objectAtIndex:1]]; 
```

您`[imageArray objectAtIndex:1]`将只返回图像名称而不是其路径，因此为了使用 imageWithContentsOfFile 您必须指定图像的路径而不仅仅是图像名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T08:14:12.027

```
PhotosInAlbum.image = [UIImage imageWithContentsOfFile:[imageArray objectAtIndex:1]]; 
```

这部分应该是这样的

```
PhotosInAlbum.image = [UIImage imageNamed:[imageArray objectAtIndex:1]]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T08:15:54.037

`imageWithContentsOfFile:`使用文件的完整或部分路径。您可以改用`imageNamed:`方法（使用文件名）。只需更换

```
[UIImage imageWithContentsOfFile:[imageArray objectAtIndex:1]]; 
```

到

```
[UIImage imageNamed:[imageArray objectAtIndex:1]]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T08:40:44.230

最初，`[UIImage imageNamed:[imageArray objectAtIndex:1]];`会解决你的问题。但是您无法以这种方式解决此问题，看起来问题似乎与此行有关

```
[controller.view addSubview:PhotosInAlbum]; 
```

您的控制器可能就是这种情况。**在您尝试添加您的图像视图时，视图**为零。

只要确保它不是。因为如果是这样，那么您的 PhotosInAlbum 根本不会作为子视图添加到`controller.view`.

# php - php domelement - 在插入时运行方法？

> ID：10846625
> 
> 赞同：0
> 
> 时间：2012-06-01T08:06:48.790
> 
> 标签：php, domdocument

好吧，我或多或少寻找的是 php 中的事件处理程序...... - 我想。

我正在编写一个 php 脚本来制作一个 xml 文件（确切地说是 ansi n42.42 文件）我想要做的是能够定义各种“子树”并将它们合并到最终的 DOMDocument 中。我将这些子树中的每一个定义为扩展的 DOMNode，并具有构建子树所需的属性。由于 domnode 在插入 DOMDocument 之前是不可变的，因此我定义了一个构建方法，在我将其插入以进行设置后运行该方法：

例如在我的课堂上：（为简洁起见，删除了一些部分）

```
class calibration extends DOMElement{
  var $calibtype="Energy";
  var $coefficients;
  var $id;

  function calibration($coeff,$id=false){
    parent::__construct('Calibration');
    $this->coefficients=$coeff;
    $this->id=$id;
  }
  function build(){ // must be called after the calibration is inserted into a dom-tree.
    $this->setAttribute('Type',$this->calibtype);
    $DOM=$this->ownerDocument;
    $node=$DOM->createElement('Equation');
  } 
```

然后使用它：

```
$cal = new calibration("-4, 3.12","cal_id");
$n42->firstChild->appendChild($cal);  // n42 is the object extending DOMDocument
$cal->build(); 
```

当 $cal 附加到树中时，是否有可能使 $cal->build() 自动运行？

（或者我可能是在吠叫错误的树，我从一开始就使用DOMFragment会更好吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T10:17:05.987

如果我理解正确，那么您可以在脚本中添加观察者，他们将负责更改 DOMDocument。那就是如果我正确地理解了你。

# ios - 将 2 个数据源合并为 1 个表视图

> ID：10846626
> 
> 赞同：1
> 
> 时间：2012-06-01T08:06:49.210
> 
> 标签：ios, sqlite, uitableview

我需要一些建议，我需要将 2 个数据源合并到 1 个表视图中。

目前我只有 1 个表视图，数据是从 SQLite 数据库提供的，我的计划是有 2 个部分，第一个提供来自 1 个数据库的数据，第二个提供来自第二个数据库的数据....有什么想法我会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:43:12.950

在 cellForRowAtIndexPath 中，您可以使用 indexPath.section 来区分一行的每个部分。

# c# - 如何在 SQL Server 中首先使用多个关键字排序最佳匹配？

> ID：10846628
> 
> 赞同：0
> 
> 时间：2012-06-01T08:07:19.967
> 
> 标签：c#, asp.net, sql-server

如果我有关键字树、牛和老鼠

我想从数据库中订购将首先返回最佳匹配的行，如果其中包含关键字，则该匹配具有最大的数字

例如：

1.  母牛爱老鼠和树
2.  老鼠在树上
3.  树

我可以这样做吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:13:09.697

您应该使用全文搜索 containstable

[http://msdn.microsoft.com/en-us/library/ms187787.aspx](http://msdn.microsoft.com/en-us/library/ms187787.aspx)

[http://msdn.microsoft.com/en-us/library/ms189760.aspx](http://msdn.microsoft.com/en-us/library/ms189760.aspx)

# c++ - 使用 OpenCV 库查找以英寸为单位的图像尺寸

> ID：10846629
> 
> 赞同：0
> 
> 时间：2012-06-01T08:07:34.870
> 
> 标签：c++, opencv

通过我的代码，我想知道图像的尺寸（以英寸为单位）。通过 OpenCV，我可以使用以下代码找到图像像素数组的高度和宽度：

```
#include "stdafx.h"
#include <cv.h>
#include <cxcore.h>
#include <highgui.h>
#include <iostream>
using namespace std;
int _tmain(int argc, _TCHAR* argv[])
{
     IplImage *img = cvLoadImage("photo.jpg");
     if (!img) {
        printf("Error: Couldn't open the image file.\n");
        return 1;
     }
     cout<<"Number of pixels in width = "<<img->width<<endl<<"Number of pixels in height = "<<img->height;
      return(0);
} 
```

请帮我找到以英寸为单位的图像大小。提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:17:00.257

您需要知道显示器的 DPI。为此，您需要查看您平台的 SDK (Windows/Linux/Mac) 以了解如何检索此信息，因为 OpenCV 不为此提供功能。

[Image Size Calculator](http://auctionrepair.com/pixels.html)是一个执行此计算的 JavaScript 计算器。检查页面的源代码以获取代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:10:18.780

您必须定义 px/inch 比率。你会得到价值。

如果您想在显示器上以英寸为单位调整图像大小，请采用显示器分辨率和尺寸，您将获得这些比率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T10:52:30.650

你不能。如果我拍月亮的照片，月亮的直径可能是 127 像素。那应该是多少英寸？在那张照片中，月亮透过一棵树照耀着，树宽 341 像素。树有多少英寸？真的？？

# javascript - 网站上的实时视频流

> ID：10846634
> 
> 赞同：0
> 
> 时间：2012-06-01T08:07:45.687
> 
> 标签：javascript, html, live, broadcast

嘿伙计们，我必须在 HTML/JavaScript 网站上集成实时视频捕获以进行演示。但我真的不知道我要搜索什么。请给我一个提示。:)

视频将由采访某人的摄影师现场录制。后台是一个模板（HTML/JavaScript），其中包含当前主题和**直播**的大量信息！一切都在同一个网站上。

这可能吗？如果可以，怎么办？我不知道我必须在互联网上搜索什么...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T08:11:10.690

也许 Flash Media Server 正是您所需要的。市场上还有许多其他替代产品，例如开源的 Red5 Media Server。

# javascript - Box2dweb - 绳索接头不工作

> ID：10846637
> 
> 赞同：0
> 
> 时间：2012-06-01T08:08:03.897
> 
> 标签：javascript, html, canvas, box2d

我有绳索接头（Box2dweb）的以下代码。问题是当我在浏览器中运行代码时，什么也没有发生。只是一张空白的画布。当我删除定义关节的线（//joints 之后的八行）时，它会运行，我可以看到一个静态框和两个动态框落在地上。请帮忙。

```
<html>
   <head>
      <title>Box2dWeb</title>
   </head>
   <body>
      <canvas id="canvas" width="600" height="400" style="background-color:#333333;" ></canvas>
   </body>
   <script type="text/javascript" src="Box2dWeb-2.1.a.3.js"></script>
   <script type="text/javascript">
        var    b2Vec2 = Box2D.Common.Math.b2Vec2
        ,      b2BodyDef = Box2D.Dynamics.b2BodyDef
        ,      b2Body = Box2D.Dynamics.b2Body
        ,      b2FixtureDef = Box2D.Dynamics.b2FixtureDef
        ,      b2World = Box2D.Dynamics.b2World
        ,      b2PolygonShape = Box2D.Collision.Shapes.b2PolygonShape
        ,      b2CircleShape = Box2D.Collision.Shapes.b2CircleShape
        ,      b2RevoluteJointDef = Box2D.Dynamics.Joints.b2RevoluteJointDef
        ,      b2DistanceJointDef = Box2D.Dynamics.Joints.b2DistanceJointDef
        ,      b2RopeJointDef = Box2D.Dynamics.Joints.b2RopeJointDef
        ,      b2MouseJointDef =  Box2D.Dynamics.Joints.b2MouseJointDef
        ,      b2DebugDraw = Box2D.Dynamics.b2DebugDraw
        ,      b2Fixture = Box2D.Dynamics.b2Fixture
        ,      b2AABB = Box2D.Collision.b2AABB
        ,      b2Color = Box2D.Common.b2Color;

        var world = new b2World(new b2Vec2(0,10), true);

        //box1

        var bodyDef = new b2BodyDef;
        bodyDef.type = b2Body.b2_dynamicBody;
        bodyDef.position.Set(8,4);

        var fixDef = new b2FixtureDef;
        fixDef.density = 10.0;
        fixDef.friction = 0.5;
        fixDef.restitution = .5;

        fixDef.shape = new b2PolygonShape;
        fixDef.shape.SetAsBox(.3,.3);

        var box1 = world.CreateBody(bodyDef);
        box1.CreateFixture(fixDef);

        //box2

            var bodyDef2 = new b2BodyDef;
        bodyDef2.type = b2Body.b2_dynamicBody;
        bodyDef2.position.Set(14,8);

        var fixDef2 = new b2FixtureDef;
        fixDef2.density = 10.0;
        fixDef2.friction = 0.5;
        fixDef2.restitution = .2; 
        fixDef2.shape = new b2PolygonShape;
        fixDef2.shape.SetAsBox(.3,.3);

            var box2 = world.CreateBody(bodyDef2);
        box2.CreateFixture(fixDef2);

        //box3 - static

            var bodyDef3 = new b2BodyDef;
        bodyDef3.type = b2Body.b2_staticBody;
        bodyDef3.position.Set(11,8);

        var fixDef3 = new b2FixtureDef;
        fixDef3.friction = 0.5;
        fixDef3.restitution = .2; 
        fixDef3.shape = new b2PolygonShape;
        fixDef3.shape.SetAsBox(.3,.3);

            var box3 = world.CreateBody(bodyDef3);
        box3.CreateFixture(fixDef3);

         //create a ground

             var holderDef = new b2BodyDef;
             holderDef.type = b2Body.b2_staticBody;
             holderDef.position.Set(10, 14);

         var fd = new b2FixtureDef;
         fd.shape = new b2PolygonShape;
         fd.shape.SetAsBox(10,1);

             var ground = world.CreateBody(holderDef);
         ground.CreateFixture(fd);

         //  joints

        var ropeJointDef = new b2RopeJointDef();
        ropeJointDef.bodyA = box1;
        ropeJointDef.bodyB = box2;
        ropeJointDef.localAnchorA = new b2Vec2(0,0);
        ropeJointDef.localAnchorB = new b2Vec2(0,0);
        ropeJointDef.maxLength = 6;
        ropeJointDef.collideConnected = true;
        world.CreateJoint(ropeJointDef);

        var debugDraw = new b2DebugDraw();
        debugDraw.SetSprite ( document.getElementById ("canvas").getContext ("2d"));
        debugDraw.SetDrawScale(30);     //define scale
        debugDraw.SetFillAlpha(0.3);    //define transparency
        debugDraw.SetLineThickness(1.0);
        debugDraw.SetFlags(b2DebugDraw.e_shapeBit | b2DebugDraw.e_jointBit);
        world.SetDebugDraw(debugDraw);

        window.setInterval(update,1000/60);

        function update() {
            world.Step(1 / 60, 10, 10);
            world.DrawDebugData();
            world.ClearForces();
        };

   </script>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T22:11:53.193

我在 Box2DWeb 中添加了对绳索接头的支持。

[https://github.com/aaronfarr/box2Dweb](https://github.com/aaronfarr/box2Dweb)

希望你觉得它有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T14:15:19.543

绳索接头是 Box2D 的一个相对较新的补充。我猜你使用的 javascript 端口没有它。至少，我在这里的任何地方都找不到它：[http ://code.google.com/p/box2dweb/source/browse/trunk/Box2D.js](http://code.google.com/p/box2dweb/source/browse/trunk/Box2D.js)

# sql - SQL Order By on Union - DateTime 字段上的随机顺序

> ID：10846640
> 
> 赞同：1
> 
> 时间：2012-06-01T08:08:27.997
> 
> 标签：sql

我有大约 5 个工会的询问；最后，我在 DateTime 字段上得到了一个订单（所以我 100% 肯定不是在 varchar 上订购）——而且似乎由于某种原因订单被搞砸了，有什么想法吗？也没有可识别的模式:(

```
SELECT a, b, c, DateField
FROM whatever

UNION

SELECT a, b, c, DateField
FROM whatever

UNION

SELECT a, b, c, DateField
FROM whatever

Order By convert(DateTime, DateField, 111) -- The convert is just to make doubly sure about the data type 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T08:11:42.280

为什么不这样做（我不确定您是否真的要使用样式 111 = 日本标准 = yy/mm/dd。如果您使用，请考虑一下 `style 103 = dd/MM/yyyy`）。

```
select *
from
(
SELECT a, b, c, convert(DateTime, DateField, 103) as mydate FROM whatever  
UNION  
SELECT a, b, c, convert(DateTime, DateField, 103) as mydate FROM whatever  
UNION  
SELECT a, b, c, convert(DateTime, DateField, 103) as mydate FROM whatever  
)
Order By mydate 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T08:12:28.980

```
SELECT a, b, c, DateField FROM 
(SELECT a, b, c, DateField
FROM whatever

UNION

SELECT a, b, c, DateField
FROM whatever

UNION

SELECT a, b, c, DateField
FROM whatever) x
Order By DateField 
```

# visual-studio-2010 - 找不到类型库“Microsoft.Office.Core”的包装程序集

> ID：10846641
> 
> 赞同：11
> 
> 时间：2012-06-01T08:08:30.370
> 
> 标签：visual-studio-2010, warnings, ms-office

在 Visual Studio 中构建项目时出现警告：

```
Cannot find wrapper assembly for type library "Microsoft.Office.Core" 
```

我该如何摆脱它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-09-12T15:35:20.483

我按照以下链接中的说明进行操作，问题已解决。该问题与 Windows 更新有关，因此在我删除引用 Microsoft.Office.Core 并重建项目后，问题已解决。

[警告：找不到引用的组件“Microsoft.Office.Core”](https://stackoverflow.com/questions/15745249/warning-the-referenced-component-microsoft-office-core-could-not-be-found)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-06-27T06:18:05.803

> 缺少此参考“Office = Microsoft.Office.Core”？
> 
> 以下是添加特定参考的方法：
> 
> 第 1 步：右键单击您的项目
> 
> 第 2 步：选择“添加参考..”
> 
> 第三步：点击“COM”标签
> 
> 第 4 步：向下滚动以选择“ **Microsoft Office 12.0 对象库**”。

资料来源：[https://web.archive.org/web/20160305201349/http://blogs.msdn.com/b/tolong/archive/2007/12/02/missing-office-microsoft-office-core-reference。 aspx](https://web.archive.org/web/20160305201349/http://blogs.msdn.com/b/tolong/archive/2007/12/02/missing-office-microsoft-office-core-reference.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-21T20:54:00.310

是的，我已经解决了同样的问题。转到添加参考。在右侧搜索框中键入缺少的组件名称或名称部分。您将获得选中的标记项目。然后取消选中然后项目。单击确定。然后再次执行相同的过程。现在您将获得未选中的项目。现在检查。你的问题一定会解决的。基本上，如果您的项目从较高版本的办公电脑转移到较低版本的办公电脑，就会出现这个问题。

# mysql - 奇怪的mysql导致asp

> ID：10846642
> 
> 赞同：0
> 
> 时间：2012-06-01T08:08:31.103
> 
> 标签：mysql, asp-classic

我有以下代码：

```
strSQL = "SELECT COUNT(*) AS anz FROM tbl_ergebnisse WHERE testavg >0"
set rs3 = Conn.Execute(strSQL)
Response.Write "Count(*): <br>" 
if not rs3.eof then
    Response.Write "Anz: " & rs3("anz")
else
    Response.Write "EOF" 
end if

strSQL = "SELECT testavg FROM tbl_ergebnisse WHERE testavg >0"
set rs2 = Conn.Execute(strSQL)

Response.Write "Entries: <br>" 
do while not rs2.eof
    Response.Write rs2("testavg") & "<br>"
rs2.MoveNext()
loop

strSQL = "SELECT AVG(testavg) AS mittelwert FROM tbl_ergebnisse WHERE testavg >0"
set rs = Conn.Execute(strSQL)

if not rs.eof then
    Response.Write "Mittelwert: " & rs("mittelwert")
else
    Response.Write "EOF" 
end if 
```

这给了我一个奇怪的结果：查询 1 返回“4”（计数正确）。查询 2 没有返回结果，查询 3 也没有返回结果

表“tbl_ergebnisse”看起来像这样

```
testavg (DECIMAL) 
```

条目：3；3；4；5个；

可以在此处找到表格中数据的屏幕截图：www.trinews.at/data.png

![在此处输入图像描述](../Images/4a7b3422e80d8290b8deb60ec40e7a2c.png)

有什么建议为什么我得到一个空的记录集？直接在数据库上运行查询会返回正确的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:21:56.823

我使用字段类型为 Decimal(18,0) 的 SQL Server Express 重新创建了您的问题，它按预期工作。

尝试使用 CDbl 将结果转换为双精度数，如下所示。

```
strSQL = "SELECT testavg FROM tbl_ergebnisse WHERE testavg >0" 
set rs2 = Conn.Execute(strSQL)  
Response.Write "Entries: <br>"  
do while not rs2.eof     
    Response.Write CDbl(rs2("testavg")) & "<br>" 
rs2.MoveNext() 
loop  

strSQL = "SELECT AVG(testavg) AS mittelwert FROM tbl_ergebnisse WHERE testavg >0"
set rs = Conn.Execute(strSQL)  
if not rs.eof then     
    Response.Write "Mittelwert: " & CDbl(rs("mittelwert"))
else     
    Response.Write "EOF"  
end if 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:09:08.287

尝试在你的 MySQL 语句中使用 CAST 将十进制类型转换为 ASP ADODB 可以理解的数字，否则 ASP 无法识别来自 MySQL 的结果并认为它是 EOF。例子：

```
SELECT CAST(SUM(Entry_Data_1) as UNSIGNED) as score FROM contests_entries 
```

# android - 使用初始化向量解密 AES256-rijdeal 加密文件

> ID：10846650
> 
> 赞同：0
> 
> 时间：2012-06-01T08:08:58.460
> 
> 标签：android, encryption, rijndael

我现在有一个棘手的情况。

我需要创建一个 android 方法来解密已加密的加密文件，如下所示：

*   AES256 (Rijndael)
*   密码块链接 (CBC) 使用 16 字节的初始化向量，如下所示：

{ 0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 122, 100 }

我也知道文件的加密密钥，但现在让我们说它是：“船”

我一直在谷歌上搜索，但我找不到使用这种加密组合的在线。一些涉及 Rijndael 算法但没有让我选择初始化向量，而另一些则根本不支持 AES256。

有人可以指出我在哪里找到示例或发布一些执行上述操作的示例代码的正确方向吗？

注意我不知道是否重要，但输出文件始终是 .pdf

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:24:32.557

这是一个非常标准的配置，很难相信你没有找到任何样品。您需要做的就是`IvParameterSpec`从您的 IV 字节创建一个并`Cipher`用它初始化。像这样的东西：

```
SecretKey key = getEncryptionKey(); 
byte[] iv = new byte[] { 0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, (byte)144, (byte)233, 122, 100 };
byte[] cipherBytes = readEncryptedFile();
Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
IvParameterSpec ivParams = new IvParameterSpec(iv);
cipher.init(Cipher.DECRYPT_MODE, key, ivParams);
byte[] plaintext = cipher.doFinal(cipherBytes); 
```

顺便说一句，'Rijndael' 与 AES 相同，所以如果你只搜索'AES'，你会得到更好的结果。

# android - 不能将 PowerMock 与 Robolectric 一起使用

> ID：10846651
> 
> 赞同：6
> 
> 时间：2012-06-01T08:09:05.067
> 
> 标签：android, powermock, robolectric

正如此链接中所讨论的 - [https://groups.google.com/group/powermock/browse_thread/thread/25ba2b85d9e576f4](https://groups.google.com/group/powermock/browse_thread/thread/25ba2b85d9e576f4)，我尝试将 PowerMock 与 Robolectric 一起使用来模拟静态方法。但它抛出了一些难以理解的异常。

下面是我的测试课：

```
package net.therap.passreset.service;

import android.content.Context;
import com.xtremelabs.robolectric.Robolectric;
import net.therap.passreset.util.ConnectivityStatus;
import org.junit.After;
import org.junit.Before;
import org.junit.Rule;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.powermock.core.classloader.annotations.PrepareForTest;
import org.powermock.modules.junit4.rule.PowerMockRule;
import roboguice.RoboGuice;
import roboguice.activity.RoboActivity;
import roboguice.test.RobolectricRoboTestRunner;

import static org.easymock.EasyMock.expect;
import static org.powermock.api.easymock.PowerMock.mockStatic;

/**
 * @author sharafat
 */
@RunWith(RobolectricRoboTestRunner.class)
@PrepareForTest(ConnectivityStatus.class)
public class TherapWebServiceClientTest {
    @Rule
    public PowerMockRule rule = new PowerMockRule();

    private Context context = new RoboActivity();
    private TherapWebServiceClient therapWebServiceClient;

    @Before
    public void setUp() throws Exception {
        RoboGuice.setBaseApplicationInjector(Robolectric.application, RoboGuice.DEFAULT_STAGE);
        therapWebServiceClient = RoboGuice.getInjector(context).getInstance(TherapWebServiceClient.class);
        mockStatic(ConnectivityStatus.class);
    }

    @After
    public void tearDown() throws Exception {
        RoboGuice.util.reset();
    }

    @Test
    public void testLogin_success() {
        Robolectric.setDefaultHttpResponse(200, "");
        expect(ConnectivityStatus.isInternetConnected(context)).andReturn(true);

        therapWebServiceClient.login("", "", "");
    }
} 
```

运行测试会产生以下异常：

```
com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$UnknownFieldException: No such field roboguice.activity.RoboActivity.__shadow__
---- Debugging information ----
field               : __shadow__
class               : roboguice.activity.RoboActivity
required-type       : roboguice.activity.RoboActivity
converter-type      : com.thoughtworks.xstream.converters.reflection.ReflectionConverter
path                : /org.powermock.modules.junit4.rule.PowerMockStatement$1/outer-class/fNext/fNext/fNext/fTarget/context/__shadow__
line number         : 16
class[1]            : net.therap.passreset.service.TherapWebServiceClientTest
class[2]            : org.junit.internal.runners.statements.InvokeMethod
class[3]            : org.junit.internal.runners.statements.RunBefores
class[4]            : org.junit.internal.runners.statements.RunAfters
class[5]            : org.powermock.modules.junit4.rule.PowerMockStatement
class[6]            : org.powermock.modules.junit4.rule.PowerMockStatement$1
version             : null
-------------------------------
    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.determineType(AbstractReflectionConverter.java:453)
    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doUnmarshal(AbstractReflectionConverter.java:294)
    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshal(AbstractReflectionConverter.java:234)
    at com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:72)
    at com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:65)
    at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:66)
    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshallField(AbstractReflectionConverter.java:355)
    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doUnmarshal(AbstractReflectionConverter.java:306)
    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshal(AbstractReflectionConverter.java:234)
    at com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:72)
    at com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:65)
    at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:66)
    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshallField(AbstractReflectionConverter.java:355)
    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doUnmarshal(AbstractReflectionConverter.java:306)
    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshal(AbstractReflectionConverter.java:234)
    at com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:72)
    at com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:65)
    at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:66)
    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshallField(AbstractReflectionConverter.java:355)
    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doUnmarshal(AbstractReflectionConverter.java:306)
    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshal(AbstractReflectionConverter.java:234)
    at com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:72)
    at com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:65)
    at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:66)
    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshallField(AbstractReflectionConverter.java:355)
    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doUnmarshal(AbstractReflectionConverter.java:306)
    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshal(AbstractReflectionConverter.java:234)
    at com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:72)
    at com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:65)
    at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:66)
    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshallField(AbstractReflectionConverter.java:355)
    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doUnmarshal(AbstractReflectionConverter.java:306)
    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshal(AbstractReflectionConverter.java:234)
    at com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:72)
    at com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:65)
    at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:66)
    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshallField(AbstractReflectionConverter.java:355)
    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doUnmarshal(AbstractReflectionConverter.java:306)
    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshal(AbstractReflectionConverter.java:234)
    at com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:72)
    at com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:65)
    at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:66)
    at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:50)
    at com.thoughtworks.xstream.core.TreeUnmarshaller.start(TreeUnmarshaller.java:134)
    at com.thoughtworks.xstream.core.AbstractTreeMarshallingStrategy.unmarshal(AbstractTreeMarshallingStrategy.java:32)
    at com.thoughtworks.xstream.XStream.unmarshal(XStream.java:1052)
    at com.thoughtworks.xstream.XStream.unmarshal(XStream.java:1036)
    at com.thoughtworks.xstream.XStream.fromXML(XStream.java:912)
    at com.thoughtworks.xstream.XStream.fromXML(XStream.java:903)
    at org.powermock.classloading.DeepCloner.clone(DeepCloner.java:54)
    at org.powermock.classloading.ClassloaderExecutor.execute(ClassloaderExecutor.java:89)
    at org.powermock.classloading.ClassloaderExecutor.execute(ClassloaderExecutor.java:78)
    at org.powermock.modules.junit4.rule.PowerMockStatement.evaluate(PowerMockRule.java:49)
    at com.xtremelabs.robolectric.RobolectricTestRunner$1.evaluate(RobolectricTestRunner.java:292)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.junit.runners.Suite.runChild(Suite.java:128)
    at org.junit.runners.Suite.runChild(Suite.java:24)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:76)
    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:195)
    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:63)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)

Process finished with exit code 255 
```

如果我`context`从类中删除该字段并将其替换`new RoboActivity()`为代码中的其他位置，则会引发以下异常：

```
java.lang.NullPointerException
    at roboguice.RoboGuice.setBaseApplicationInjector(RoboGuice.java:116)
    at net.therap.passreset.service.TherapWebServiceClientTest.setUp(TherapWebServiceClientTest.java:33)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
    at org.powermock.modules.junit4.rule.PowerMockStatement$1.run(PowerMockRule.java:52)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at org.powermock.reflect.internal.WhiteboxImpl.performMethodInvocation(WhiteboxImpl.java:2014)
    at org.powermock.reflect.internal.WhiteboxImpl.doInvokeMethod(WhiteboxImpl.java:885)
    at org.powermock.reflect.internal.WhiteboxImpl.invokeMethod(WhiteboxImpl.java:713)
    at org.powermock.reflect.Whitebox.invokeMethod(Whitebox.java:401)
    at org.powermock.classloading.ClassloaderExecutor.execute(ClassloaderExecutor.java:98)
    at org.powermock.classloading.ClassloaderExecutor.execute(ClassloaderExecutor.java:78)
    at org.powermock.modules.junit4.rule.PowerMockStatement.evaluate(PowerMockRule.java:49)
    at com.xtremelabs.robolectric.RobolectricTestRunner$1.evaluate(RobolectricTestRunner.java:292)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.junit.runners.Suite.runChild(Suite.java:128)
    at org.junit.runners.Suite.runChild(Suite.java:24)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:76)
    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:195)
    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:63)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)

Process finished with exit code 255 
```

上述异常似乎表明 Robolectric 无法创建应用程序上下文。关于如何让两者一起工作的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-06T04:45:59.030

Update your PowerMock to above version 1.4.9\. I think i'm using 1.5.1 and i'm not seeing the same error. i have:

```
@RunWith(RobolectricTestRunner.class)
@PrepareForTest(MyStaticClass.class) 
```

and they don't conflict.

see: [https://github.com/jayway/powermock/wiki/PowerMockAgent](https://github.com/jayway/powermock/wiki/PowerMockAgent)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-26T15:06:03.833

我找到了一种将 PowerMock 与 Robolectric 结合使用的方法。

除了标准的 PowerMock jar，还需要 PowerMock Junit Rule。[这里](https://code.google.com/p/powermock/wiki/PowerMockRule)描述了如何抓取它。我使用了`xstream`类加载版本，因为这个版本`objenesis`非常有问题。这适用于 PowerMock 1.5.5 和 Robolectric 2.3，我不能谈论旧版本。另请注意，不应包含 Java 代理，因为根据我的经验，它会导致问题。

因此，如果您使用的是 maven，则应声明这些依赖项：

```
<dependency>
    <groupId>org.powermock</groupId>
    <artifactId>powermock-module-junit4</artifactId>
    <version>${powermock.version}</version>
    <scope>test</scope>
</dependency>
<dependency>
    <groupId>org.powermock</groupId>
    <artifactId>powermock-module-junit4-rule</artifactId>
    <version>${powermock.version}</version>
    <scope>test</scope>
</dependency>
<dependency>
    <groupId>org.powermock</groupId>
    <artifactId>powermock-api-mockito</artifactId>
    <version>${powermock.version}</version>
    <scope>test</scope>
</dependency>
<dependency>
    <groupId>org.powermock</groupId>
    <artifactId>powermock-classloading-xstream</artifactId>
    <version>${powermock.version}</version>
    <scope>test</scope>
</dependency> 
```

然后你必须像这样设置你的测试类：

```
@RunWith(RobolectricTestRunner.class)
@PowerMockIgnore({ "org.mockito.*", "org.robolectric.*", "android.*" })
@PrepareForTest(Static.class)
public class MyTest {

    @Rule
    public PowerMockRule rule = new PowerMockRule();

    private MyActivity activity;

    @Before
    public void setup() {
        activity = Robolectric.buildActivity(MyActivity.class).create().get();
    }

    @Test
    public void test() throws Exception {
        PowerMockito.mockStatic(Static.class);
        Mockito.when(Static.getCurrentTime()).thenReturn(1);

        Assert.assertEquals(1, activity.getId());
    }
} 
```

# javascript - 以不同的方式使用 HTML5 JS 和 Twitter Bootstrap 格式托管 ASP.Net

> ID：10846654
> 
> 赞同：6
> 
> 时间：2012-06-01T08:09:16.453
> 
> 标签：javascript, asp.net, html, iis, twitter-bootstrap

在我的开发环境中，一切看起来都很好，我有一个使用画布和动画的饼图，当通过浏览器托管时，它看起来很好。

我也在使用 Twitter Bootstrap 并在页面顶部有一个导航栏，其中有两个项目。

这里有些例子：

在开发环境中

[http://i.stack.imgur.com/TtC5J.png](https://i.stack.imgur.com/TtC5J.png)

在 IIS 中托管

[http://i.stack.imgur.com/DNLkg.png](https://i.stack.imgur.com/DNLkg.png)

关闭 IIS 版本后，错误仍然存​​在，您还可以注意到按钮的圆角不太一样。

我们使用默认设置托管在 IIS6 上，所以想知道是否必须在网站上做任何事情才能正确地合并它？我没有在任何地方注册 .LESS 我不认为所以不确定这是否是导致这种情况的原因。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T15:34:41.017

您需要设置 X-UA-Compatible 元标记才能解决此问题。将以下元标记添加到网页的标题中，问题应该得到解决

这将确保它在开发和 IIS 中看起来相同。（使用相同的浏览器）

```
<meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
```

您还可以在 web.config 中添加以下指令以添加自定义标题应用程序范围而不是每页元标记。

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
   <system.webServer>
      <httpProtocol>
         <customHeaders>
            <clear />
            <add name="X-UA-Compatible" value="IE=Edge" />
         </customHeaders>
      </httpProtocol>
   </system.webServer>
</configuration> 
```

此行为是因为 IE 默认以兼容性方式呈现 Intranet 站点。（因为微软认为很多 Intranet 站点已经过时，我猜）您可以通过转到工具 -> 兼容性视图设置来修改它。

参考：

*   [http://weblogs.asp.net/rajbk/archive/2010/05/12/pages-in-ie-render-differently-when-served-through-the-asp-net-development-server-and-production-服务器.aspx](http://weblogs.asp.net/rajbk/archive/2010/05/12/pages-in-ie-render-differently-when-served-through-the-asp-net-development-server-and-production-server.aspx)
*   [http://msdn.microsoft.com/en-us/library/cc288325(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/cc288325(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T15:19:53.920

听起来您正在使用 LESS，对吗？如果是这样，就像您提到的那样，如果您使用需要 LESS 的那些功能，则需要在 IIS 中设置它以使用*twitter boostrap 。*

我在 IIS 上遇到过类似的问题，并且当它们在 IIS 中不是默认值时，它可以正确识别文件扩展名。

可能是您的*localhost*对文件映射没有保护，或者您在本地使用的 IIS 版本与 IIS6 不同，并且它已经允许*.less*扩展名。

要解决此问题，您需要添加到 IIS6 的扩展/映射。

**简洁版本**

*   打开 Web 应用程序属性
*   单击**配置...**
*   在**映射**选项卡下，单击**添加**
*   **可执行文件**：在“映射”选项卡下输入为 ASPX 扩展设置的相同值
*   **扩展**名：.less
*   **动词**：检查：限制到，输入：GET，HEAD
*   **脚本引擎**：选中
*   **验证文件是否存在**：未选中

图形版本，如果它对任何人都有帮助：这是一个链接，其中包含我在下面复制的详细信息，以防它消失。

[http://wiki.uiowa.edu/display/~mbergal/2012/06/08/Configuring+IIS+6+to+support+dotlesscss+(LESS+CSS)](http://wiki.uiowa.edu/display/~mbergal/2012/06/08/Configuring+IIS+6+to+support+dotlesscss+(LESS+CSS))

**转到站点的属性。**

![在此处输入图像描述](../Images/39251cb9dcfc352c1124f44de647a418.png)

**打开配置**

![在此处输入图像描述](../Images/0dcc3210b4ab273615abbc5efbb0d36b.png)

**添加扩展名**

![在此处输入图像描述](../Images/06c27cbcdeaf48f2ab40e8f715bb4a24.png)

![在此处输入图像描述](../Images/9971663a77bfdd5c0340a40e1fefe8f6.png)

# uiwebview - UIWebView 有时不能完全加载页面/图像

> ID：10846656
> 
> 赞同：0
> 
> 时间：2012-06-01T08:09:22.910
> 
> 标签：uiwebview, loading

我有一个问题，有时在 UIWebView 页面没有完全加载。有一个图片库，如果页面没有完全加载（意味着我没有得到委托“ViewDidFinishLoading”）一些图片没有加载。图片库使用jquery。正如我所提到的，并非每次都如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:01:52.987

您是否正在查看 didFailLoadWithError: 在这种情况下是否被调用？如果是这样，那么找出原因。

# html - 存在滚动条时如何使div覆盖整个页面？

> ID：10846659
> 
> 赞同：0
> 
> 时间：2012-06-01T08:09:31.663
> 
> 标签：html, css

```
 <div id="outer_product_wrapper" style="display: none;">
        <div id="outer_inner_product_wrapper">
            <div id="inner_product_wrapper">
                Test
            </div>
        </div>
    </div> 
```

我想要一个用黑色覆盖填充整个页面的 div。我怎样才能用css实现这一点？我曾尝试使用固定在 outer_product_wrapper 上的位置，但后来我失去了滚动条......

```
#outer_product_wrapper{
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;

            background-color: rgb(0, 0, 0);
            background-color: rgba(0, 0, 0, 0.6);
            filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);
            -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";
        }

#outer_inner_product_wrapper{
   ???
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:11:16.687

试试这个：最好使用技巧 top:0/bottom:0 而不是 height:100%

我不知道它是否能解决你的问题，但它可能是一个线索；）

```
#outer_product_wrapper{
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0px;
  right: 0px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:06:52.767

尝试这个

```
#outer_product_wrapper
{    
position: absolute;
top: 0;
left: 0;
z-index: 9999;
background-color: black;
opacity: 0.85;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T08:15:06.380

你可以使用 CSS3 的溢出属性

溢出-x：可见|隐藏|滚动|自动|无显示|无内容；

如果您希望该 div 可在 x 轴上滚动，则 overflow-x ：滚动；

如果您不想要，则溢出-y：隐藏；

```
#content
{
width:300px;
height:400px;
overflow-x:scroll;
overflow-y:hidden;
} 
```

# php - 禁用某些页面的 HTTP GET php

> ID：10846661
> 
> 赞同：3
> 
> 时间：2012-06-01T08:09:39.840
> 
> 标签：php, .htaccess, get, wamp

我想为我网站中的一些 php 页面禁用 HTTP GET 方法。我可以用php代码来做吗？

假设我有两个页面**a.html**和**action.php**。现在**a.html**是普通页面，可以通过任何方法访问，并将信息提交给**action.php**。但是我希望提交给**action.php**的信息只能通过post方法提交。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-01T08:13:40.157

发送一个 Method Not Allowed 标题以及一些解释性文本（最好是比我下面的示例更友好、更有用的东西）。

之后退出，这样您就不会继续使用常规页面进行处理。

```
if ($_SERVER['REQUEST_METHOD'] === 'GET') {
  header('Method Not Allowed', true, 405);
  echo "GET method requests are not accepted for this resource";
  exit;
} 
```

您可能需要考虑将 GET 列入白名单（并测试是否存在您接受的方法）而不是黑名单 GET。（因为您可能也不想要 PUT、DELETE 等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T08:12:02.903

将下面的代码放在开头。

```
if ($_SERVER['REQUEST_METHOD'] !== 'POST') {
  header('Location: a.html');
  exit;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T08:12:16.787

如果是 GET，您可以读取当前方法并重定向用户。

# silverlight - 从什么时候开始我们在 Silverlight 4 中有 UpdateSourceTrigger = PropertyChanged？

> ID：10846665
> 
> 赞同：1
> 
> 时间：2012-06-01T08:10:17.523
> 
> 标签：silverlight, propertychanged, updatesourcetrigger

我在 Silverlight 4 中进行开发，并且随着时间的推移，我习惯了绑定的 UpdateSourceTrigger 属性有两种选择：默认和显式。但是今天我发现我也可以选择“PropertyChanged”，这非常非常受欢迎但是......出乎意料。在我的项目属性中，我仍然可以看到“Silverlight 4”，但不知何故我成功使用了 Silverlight 5 功能......有人对此有解释吗？

# objective-c - 如何在 ARM 程序集中获得正确的选择器

> ID：10846669
> 
> 赞同：0
> 
> 时间：2012-06-01T08:10:29.840
> 
> 标签：objective-c, ida

当我用 IDA 打开 iOS 框架地址簿时，我得到以下代码：

```
**__ABPeoplePickerNavigationController_initAsAddressBook_withAddressBook__
var_C= -0xC
PUSH            {R7,LR}
MOV             R7, SP
SUB             SP, SP, #4
MOVW            R1, #0x2B06
MOV.W           R12, #0
MOVT.W          R1, #0xB
STR.W           R12, [SP,#0xC+var_C]
ADD             R1, PC
LDR             R1, [R1]
BLX             _objc_msgSend
ADD             SP, SP, #4
POP             {R7,PC}
; End of function __ABPeoplePickerNavigationController_initAsAddressBook_withAddressBook__** 
```

如何在调用 _objc_msgSend() 之前知道 R1 中存储了哪些选择器。

在互联网的帮助下，我做了以下事情：

1.  在 MOVW R1, #0x2B06 和 MOVT.W R1, #0xB 之后，我得到了 R1=0x000B2B06

2.  在 ADD R1, PC 之后，我得到 R1=0x000B2B06+PC(A13A)+4=0x000BCC44，其中 A13A 是 ADD R1, PC 的地址

3.  该地址附近的内容是：

    __objc_selrefs:000BCC44 DCD aInitasaddres_0 ; “initAsAddressBook:withAddressBook:withS”... __objc_selrefs:000BCC48 DCD aDefaultstylepr ; "defaultStyleProviderForStyle:" __objc_selrefs:000BCC4C DCD aInitwithnaviga ; "initWithNavigationController:" __objc_selrefs:000BCC50 DCD aSetupinitialst ; “setupInitialStackAndLoadState：”

所以我得到了选择器“initAsAddressBook：withAddressBook：withS ...”，

4.但是当我记录工作流时，我得到了“setupInitialStackAndLoadState：”实际上被调用了。

我获取选择器的方法有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T15:05:43.937

我认为这只是您的日志记录工具的错误或时间问题。显然是在召唤`initAsAddressBook:withAddressBook:withStyle:`。这是 IDA 6.3 显示的内容（看起来有点不同）：

```
__text:000014A8       PUSH            {R7,LR}
__text:000014AA       ADD             R7, SP, #0
__text:000014AC       SUB             SP, SP, #4
__text:000014AE       LDR             R1, =(selRef_initAsAddressBook_withAddressBook_withStyle_ - 0x14BA)
__text:000014B0       SXTB            R2, R2
__text:000014B2       MOV.W           R12, #0
__text:000014B6       ADD             R1, PC ; selRef_initAsAddressBook_withAddressBook_withStyle_
__text:000014B8       STR.W           R12, [SP,#4+var_4]
__text:000014BC       LDR             R1, [R1]          ; "initAsAddressBook:withAddressBook:withS"...
__text:000014BE       BLX             _objc_msgSend
__text:000014C2       SUB.W           SP, R7, #0
__text:000014C6       POP             {R7,PC} 
```

选择`setupInitialStackAndLoadState`器稍后在`initAsAddressBook:withAddressBook:withStyle:`.

# blackberry - 数据不通过设备存储在数据库中

> ID：10846672
> 
> 赞同：0
> 
> 时间：2012-06-01T08:10:46.850
> 
> 标签：blackberry, blackberry-simulator, blackberry-eclipse-plugin

嗨，我是黑莓新手，我在此应用程序中创建了一个黑莓应用程序，我遇到了一个问题，我尝试将一些数据存储在数据库中，当我在模拟器中运行我的应用程序时，数据完全存储在数据库中，但是当我运行此应用程序时设备没有存储在数据库中。我正在浏览这段代码。

```
String url="http://68.20.66.178:8080/locationProvider/location.json"; 
GPRSCellInfo cellInfo = GPRSInfo.getCellInfo();

       String event="";
                    //String  requestString =  "lat="+ parameters.lat + "&lon=" + parameters.lon;
                    String temp="cellid=" + GPRSInfo.getCellInfo().getCellId() + "&lac="
                            + GPRSInfo.getCellInfo().getLAC() + "&mcc=" + cellInfo.getMCC()+ "&mnc="
                            + cellInfo.getMNC() + "&imei=" + GPRSInfo.imeiToString(GPRSInfo.getIMEI(), false).trim() + "&lat="
                            + parameters.lat + "&lon=" + parameters.lon
                            + "&type=WORKFORCE&event" + event;
temp="imei="+imei1+"&cellid"+cellid+"&lac="+lac+"&mcc=" +mcc+"&mnc="+mnc+ "&lat="+ parameters.lat+"&lon=" + parameters.lon+"&type=WORKFORCE&event=" + event;

                    HttpConnectionUtil objConnectionUtil=new HttpConnectionUtil();
                     strRes1=objConnectionUtil.responseForGetRequest(url, temp);
                    System.out.println("Response1====="+strRes1);
                    Thread.sleep(delay);
                    ApplicationDescriptor current=ApplicationDescriptor.currentApplicationDescriptor();
                    current.setPowerOnBehavior(ApplicationDescriptor.DO_NOT_POWER_ON); 
```

我从模拟器中得到这个值

```
URL==http://68.20.66.178:8080/locationProvider/location.json
[0.0] parameters==cellid=0&lac=0&mcc=0&mnc=0&imei=123456783648138&lat=0.0&lon=0.0&type=WORKFORCE&event
[0.0] response=={"lat":"0", "lon":"0", "provider":""}
[0.0] Response1====={"lat":"0", "lon":"0", "provider":""} 
```

所以我在哪里犯错请建议我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T15:28:40.710

您说数据不存储在数据库中，但提供的唯一代码是用于发出 Web 请求。我假设 Web 请求中的数据应该存储在服务器上的数据库中。

由于您关心的主要是数据库，所以第一个问题是请求是否到达服务器。检查您的访问日志，看看是否有任何内容与您对设备的期望相符。如果您在访问日志中看到相应的条目，但数据库中没有存储任何内容，则问题可能出在服务器上。

但是，这是 BlackBerry，我怀疑您的问题确实出在连接附加程序上。这个在stackoverflow上经常被问到：
[黑莓模拟器可以连接网络服务，但真机不能](https://stackoverflow.com/questions/8849232/blackberry-simulator-can-connect-to-web-service-but-real-device-cant)

# python - 在图中找到某种颜色的边，python

> ID：10846674
> 
> 赞同：1
> 
> 时间：2012-06-01T08:11:03.303
> 
> 标签：python, attributes, networkx

我使用了颜色属性，在我的图表中为两种类型的边着色。

`G.add_edge(fgh,cde,color='blue')`

( `fgh`，`cde`是用于连接不同元素的变量) (`fgh`并且`cde`是循环的一部分，它们的值随着每次迭代而变化)

我以 gpickle 格式保存了该图，现在我试图从保存的图中获取某种颜色的边缘。

我想做的是我得到随机边缘，但它们必须是某种颜色。谢谢你帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T19:09:37.260

从泡菜加载图表后，您可以首先找到您所追求的颜色的所有边缘（请参阅[文档](http://networkx.lanl.gov/tutorial/tutorial.html#edge-attributes)）：

```
be = []
for e in G.edges_iter():
    if G.edge[e[0]][e[1]]['color'] == 'blue': # or G[e[0]][e[1]]['color']
        be.append(e) 
```

或列表理解：

```
be = [(n1, n2) for n1, n2 in G.edges_iter() if G.edge[n1][n2]['color'] == 'blue'] 
```

然后在[`random`](http://docs.python.org/library/random.html)模块的帮助下选择随机边，例如[`choice`](http://docs.python.org/library/random.html#random.choice)或[`sample`](http://docs.python.org/library/random.html#random.sample)：

```
import random

# Select one random edge...
random_blue_edge = random.choice(be)

# ... or several random edges, 3 in this case
random_blue_edges = random.sample(be, 3) 
```

但是，请务必`be`在致电之前检查您的`random.choice`或`random.sample`。如果调用时序列为空`random.choice`，你会得到一个`IndexError`，如果序列比你要采样的数字短`random.sample`，你会得到一个`ValueError`。

# java - Java：主从设置的 GC 调整？

> ID：10846677
> 
> 赞同：2
> 
> 时间：2012-06-01T08:11:11.570
> 
> 标签：java, garbage-collection

对于以下情况，我应该如何调整 GC（例如收集器的类型、堆的最小/最大大小、新/旧代的大小、伊甸园与幸存者的比率等）？（我使用的是 Sun JDK 6，可用内存为 1GB）。

1）一台运行tomcat的master机器，它又运行一个web应用程序来显示master下各种节点机器的状态

2) 节点状态消息包括其 CPU、内存、IO 使用率等内容；典型的消息大小为 1KB

3）一个节点每秒向master发送3条这样的消息，一个master下面有10个节点

4) master 必须将最后一小时的状态数据保存到内存中，所以 master 必须保存在内存中的总状态数据为：3kb * 3600 * 10 = 108MB

5) 主服务器当然需要内存来完成其他任务，因此 JVM 最多可以达到一半 GB，但不会更多。

我的具体问题是，如果我保留更大的新一代，会发生大量复制，因为这些对象至少可以存活一个小时；如果我保持老一代更大，那么会发生很多次要收藏，那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T08:13:32.180

自己测量！

将 JVisualVM 附加到 Tomcat 进程并*查看*它在各种负载下的行为。您很可能会发现 Visual GC 插件非常有用。

有关灵感，请参阅[http://techblog.zabuchy.net/2012/monitoring-of-tomcat-with-visualvm-and-visualgc/](http://techblog.zabuchy.net/2012/monitoring-of-tomcat-with-visualvm-and-visualgc/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T08:42:50.777

在您确定真正的性能问题之前，我什至不会考虑 GC 调整。默认值可能会正常工作。

基本上这是一个相当 GC-light 的应用程序。你说的是每秒大约 100k 的内存分配，以及大约 100mb 的工作集。对于现代服务器来说，这很容易处理。

# ios - 搜索栏 textdidchange 委托函数没有被日文和中文等语言调用

> ID：10846682
> 
> 赞同：2
> 
> 时间：2012-06-01T08:11:35.563
> 
> 标签：ios

我正在开发一个多语言应用程序。该应用程序包含一个带有搜索栏的表格视图，当使用日语和中文等语言在键盘上输入字母时，委托函数 textdidchange 永远不会被调用，对于英语、德语等其他语言，它工作正常

所以我的问题是

我们应该为日文和中文键盘做一些不同的事情吗？答案非常感谢。

先感谢您

# mysql - MySQL 从另一个表替换表

> ID：10846691
> 
> 赞同：0
> 
> 时间：2012-06-01T08:12:03.973
> 
> 标签：mysql

我有 2 个活动数据库连接，我需要将 'connection1' 中的一些表替换为`connection2`. 结构可能相同，也可能不同（取决于我们是否对`connection1`表格进行更改。

我假设我应该做一个完整的表转储并在必要的地方替换键，但我真的不知道该怎么做:)

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:33:38.377

查看 dbForge Studio for MySQL 中的[模式和数据同步](http://www.devart.com/dbforge/mysql/studio/database-synchronization.html)工具。它将帮助您比较不同服务器上的两个数据库、映射表和字段、生成和运行同步脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:32:31.683

我最终使用 PHP 和 mysqldump 中的 build in system 命令首先将数据（导出）转储到文件中，然后再次使用 system() 和 mysql 将其导入新表并替换旧表。

奇迹般有效 ：）

# android - 自定义视图滚动条

> ID：10846692
> 
> 赞同：1
> 
> 时间：2012-06-01T08:12:04.820
> 
> 标签：android, android-view, android-scrollbar

我有一个自定义视图，我设法使用这篇文章启用滚动条：[Android: Enable Scrollbars on Canvas-Based View](https://stackoverflow.com/questions/4869276/android-enable-scrollbars-on-canvas-based-view)。问题是我无法滚动它们，即使我覆盖了计算函数。这是创建视图的代码：

```
final PaintBoardView paintBoardView=new PaintBoardView(this);
LinearLayout.LayoutParams layoutParams=new LinearLayout.LayoutParams(
        0,ViewGroup.LayoutParams.FILL_PARENT,(float)0.8);
paintBoardView.setLayoutParams(layoutParams);
ViewGroup boardToolsContainer=(ViewGroup)findViewById(R.id.board_tools_container);
boardToolsContainer.addView(paintBoardView); 
```

这是视图的构造函数：

```
super(context);
setBackgroundResource(android.R.color.white);
setHorizontalScrollBarEnabled(true);
setVerticalScrollBarEnabled(true);
TypedArray styledAttributes=context.obtainStyledAttributes(
    R.styleable.View);
initializeScrollbars(styledAttributes);
styledAttributes.recycle(); 
```

和：

```
@Override public int computeHorizontalScrollRange() { return 2000; }
@Override public int computeVerticalScrollRange() { return 2000; } 
```

正如我所说，我看到滚动条，但滚动不起作用。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T13:25:22.070

最后，我只是使用视图的 scrollBy 和 scrollTo 方法在 onTouchEvent 函数中自己进行滚动。

# collections - 如何遍历 jQuery 模板中的交错模块（backbone.js）？

> ID：10846695
> 
> 赞同：0
> 
> 时间：2012-06-01T08:12:19.527
> 
> 标签：collections, model, backbone.js, jquery-templates

我在backbone.js中创建了一个带有交错模型的集合，如下所示：（使用for循环）

```
var categories = new Category({ // main model
    title:  myJSON.category[h].title,
    product: []
});

var product = new Product({ // sub-model
        articleNumber:  myJSON.category[h].articles[j].articleNumber,
    shortDesc:  myJSON.category[h].articles[j].shortDesc,
    stock:      myJSON.category[h].articles[j].stock,
    price:      myJSON.category[h].articles[j].price,
    packaging:  myJSON.category[h].articles[j].packaging            
});
categoryCollection.add(categories); // my Collection 
```

然后我在backbone.js 中创建了一个视图，并使用了来自jQuery 模板的渲染：

```
 render: function(){
        var col = {
            collection: categoryCollection.toJSON(),
        }
        var templ = $("#productTemplate").tmpl(col);
        $(templ).appendTo("#showProducts");
    } 
```

所以，这是我的 html 文件中的代码

```
 <script id="productTemplate" type="text/x-jQuery-tmpl"> 
<div id="product_cat_1" class="product_table">
    <div class="site_links_top">
    </div>

    <!-- creating product categories in table -->
    {{each collection}}
    <a href="#product_cat_${$index + 1}" class="category category_closed"> 
            ${$value.title} </a>

            <table>
    <!-- creating products in table -->
    {{each ????? }} // i tried value, ${value}, ${$value} ....
                 // code..
    {{/each}}
    </table>
    {{/each}}

</div>
</script> 
```

我不知道如何遍历第二个模型（ product[] ）。有任何想法吗？

# delphi - EOLESysError 使用 OpenOffice 创建 pdf 文件时出现错误的变量类型错误

> ID：10846696
> 
> 赞同：1
> 
> 时间：2012-06-01T08:12:20.703
> 
> 标签：delphi, pdf, activex, openoffice.org

我成功地使用[此处](https://stackoverflow.com/questions/7819191/saving-to-pdf-from-openoffice)讨论的技术使用 Openoffice 的 ActiveX 创建 pdf 文件（从 doc 文件）。

最近，使用 smae OO 版本（3.3），代码不再起作用，在这一行（请参阅上面链接中的代码）：

```
FilterParams[0] := CreateProperty('FilterName', AnsiString('writer_pdf_Export')); 
```

我得到了 EOLESysError“错误的变量类型”。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:48:21.030

阅读[此问题](https://stackoverflow.com/questions/747427/excel-type-library-delphi-2009-bad-variable-type)后，我以这种方式解决了问题：

```
function CreateProperty(const AName: AnsiString; const AValue: Variant): Variant;
  begin
    Result := StarOffice.Bridge_GetStruct('com.sun.star.beans.PropertyValue');
    Result.Name := AName;
    Result.Value := AValue;
  end; 
```

变成

```
function CreateProperty(const AName: AnsiString; const AValue: Variant): Variant;
  var
    AVal : Variant;
  begin
    Result := StarOffice.Bridge_GetStruct('com.sun.star.beans.PropertyValue');
    Result.Name := AName;
    AVal := AValue; // this is done to avoid 'Bad Variable Type'
    Result.Value := AVal;
  end; 
```

您也可以通过删除参数来解决`const`它`AValue`：

```
function CreateProperty(const AName: AnsiString; AValue: Variant): Variant;
begin
  Result := StarOffice.Bridge_GetStruct('com.sun.star.beans.PropertyValue');
  Result.Name := AName;
  Result.Value := AValue;
end; 
```

# django - 显示相同的“会话”，回合制 django 游戏

> ID：10846698
> 
> 赞同：0
> 
> 时间：2012-06-01T08:12:43.253
> 
> 标签：django, django-middleware

我真的不知道这种分散的问题是否适合这里，但无论如何我都会试一试。

我正在 Django 中构建一个基于回合的（Yatzee）游戏，其中我为用户/玩家提供了一个简单的拉力模型，为每个用户的记分板提供了一个更复杂的模型。

一个新游戏会生成一个新的记分牌，它基本上由许多 int-fields 和 boolean-fields 组成，每个分数一个（例如，如果你得到一个两对，有一个字段将保存分数和一个将其设置为“已分配”的字段）

问题是，通过这种方法，我在每回合后将分数保存到 db(sqlite) 中，我将能够“暂停”游戏并稍后继续。

我现在想开始研究的是如何在网络上为两个或多个游戏“托管”游戏，但实际上不知道从哪里开始。如果他们都坐在同一台计算机上没有问题，因为我可以通过 javascript 控制玩家/记分牌的数量。

为了做到这一点，我正在考虑以某种方式将属于“togheter”的记分牌分配给一个会话，但是我应该如何以及在哪里做这件事目前有点超出我的范围。

我已经阅读了一些有关 Django 中间件的信息，但无法真正弄清楚这是否比尝试从模型层解决它更好（相信这会有点困难......？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:14:06.657

实现此目的的一种方法是构建一个 javascript 框架来轮询后端的玩家活动。有许多玩家活动需要跟踪：

1.  新游戏
2.  玩家离开游戏/暂停
3.  轮到远程玩家掷骰子
4.  轮到本地玩家掷骰子

我建议使用带有计时器的 AJAX 功能，该计时器可以轮询服务器以获取更新或发布本地玩家活动。

当我说 javascript 框架时，我指的是一种在客户端处理自动轮询和更新的方法。

请注意，您不能依赖 javascript 来处理游戏规则、掷骰子等，所有这些都必须在服务器上完成。javascript 应该只更新播放器的 GUI 以显示当前状态。

因此，您将有 AJAX 调用来执行以下操作：开始新游戏、检查远程活动、掷骰子、保存玩家选项（玩家选择将 3* 六点保存为一对等）等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:23:13.853

我不知道中间件与此有什么关系。

最简单的方法肯定是让游戏模型中的外键指向 Player1 和 Player2 的 auth.User 模型。

# cassandra - 使用 JSON 的 Apache Cassandra 模式设计

> ID：10846699
> 
> 赞同：3
> 
> 时间：2012-06-01T08:12:51.617
> 
> 标签：cassandra

假设我们有包含用户信息的 CF：

```
{
   123 => { first_name => Nick, last_name => Schiff, age => 23, city = NY }
} 
```

假设我们不按列名搜索，我们使用信息只是为了显示数据。列名也不会经常更新个性。（例如更改名字）

在这种情况下，单个编码的 JSON 可能是更好的主意：

```
{
   123 => { data = [json], city = NY }
} 
```

并离开“城市”，因为假设我们会经常更新它。

JSON 的优点是：

1.  简单的非规范化 - 你只复制一列 - 例如“数据”。
2.  您不需要知道列名，因此在删除之前不需要 slice()。
3.  模拟没有复合键的超级列 - 这有点像 (1)

我可以看到的缺点：

1.  不验证 JSON 值
2.  cassandra 不知道存储的值。

有人这样工作吗？我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T15:45:21.723

根据您的使用模式，这可能是一个合理的策略。以 blob 格式存储数据的最大缺点是如何处理并发更新。假设您有 2 个进程，一个尝试更新该`first_name`字段，另一个尝试更新该`age`字段。每个进程都必须读取行以获取当前 blob，然后更新要更改的字段并将其写回 Cassandra。当您的所有数据都存储在一个 blob 中时，第二个写入器将基本上撤消第一个写入器的更改。

如果这些存储为单独的列，则不会发生更新冲突。

但也许您的记录是不可变的，在这种情况下，这个并发更新问题不会成为问题。

# css - CSS 使用 z-index

> ID：10846700
> 
> 赞同：0
> 
> 时间：2012-06-01T08:12:52.553
> 
> 标签：css, z-index

> **可能重复：**
> [Css z-index 问题](https://stackoverflow.com/questions/6965576/css-z-index-problem)

有没有我可以让边框出现在按钮后面？ `z-index:;`在这种情况下似乎不起作用。 [JS小提琴](http://jsfiddle.net/k7htb/)

**HTML：**

```
<div class="scheduleArea">
   <button class="button"></button>     
</div>
 <nav class="nav">
    <ul>
        <li><a href="#">Send Now</a></li>
        <li><a href="#">Edit Message</a></li>
    </ul>
</nav>  
</div> 
```

**CSS：**

```
.scheduleArea{
    width:100px;
    height:100px;
    float:right;
    margin:-15px 0 0 0;
    border:1px solid red;
}
.scheduleArea .button{
    width:100px;
    height:28px;
    background:url('../images/schedule.png') no-repeat center center;
    border:none;
    margin:0 auto;
}
.nav{
    float:right;
    height:57px;
    width:168px;
    margin:10px -100px 0 0;
    border-radius:3px;
    border:3px solid #B5B5B5;
    z-index:-20;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T08:19:41.610

如果没有 position:relative 或 position:absolute，z-index 将不起作用。

解决方案：http: [//jsfiddle.net/k7htb/1/](http://jsfiddle.net/k7htb/1/)

编辑：

```
.nav{
    float:right;
    height:57px;
    width:168px;
    margin:10px -100px 0 0;
    border-radius:3px;
    border:3px solid #B5B5B5;
    z-index:-20;
    position:relative; /* This line is added */
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T08:20:11.230

`z-index`仅适用于*定位*元素。添加`position:relative`并应该可以解决问题`.scheduleArea`。`.nav`

# java - 如何编写单元测试以确保我的基于日期/时间的代码适用于所有时区以及有/无 DST？

> ID：10846704
> 
> 赞同：22
> 
> 时间：2012-06-01T08:12:56.350
> 
> 标签：java, unit-testing, timezone, jodatime, dst

我正在使用 JodaTime 2.1，我正在寻找一种模式来单元测试代码，该代码执行日期/时间操作，以确保它在所有时区都表现良好并且独立于[DST](https://en.wikipedia.org/wiki/Daylight_saving_time)。

具体来说：

1.  如何模拟系统时钟（这样我就不必模拟我调用的所有地方`new DateTime()`来获取当前时间）
2.  我怎样才能为默认时区做同样的事情？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-21T13:53:19.583

您可以`@Rule`为此使用 a 。这是规则的代码：

```
import org.joda.time.DateTimeZone;
import org.junit.rules.TestWatcher;
import org.junit.runner.Description;

public class UTCRule extends TestWatcher {

    private DateTimeZone origDefault = DateTimeZone.getDefault();

    @Override
    protected void starting( Description description ) {
        DateTimeZone.setDefault( DateTimeZone.UTC );
    }

    @Override
    protected void finished( Description description ) {
        DateTimeZone.setDefault( origDefault );
    }
} 
```

您可以使用如下规则：

```
public class SomeTest {

    @Rule
    public UTCRule utcRule = new UTCRule();

    ....
} 
```

这将在每次测试执行之前将当前时区更改为 UTC，并在每次测试`SomeTest`后恢复默认时区。

如果要检查多个时区，请使用如下规则：

```
import org.joda.time.DateTimeZone;
import org.junit.rules.TestWatcher;
import org.junit.runner.Description;

public class TZRule extends TestWatcher {

    private DateTimeZone origDefault = DateTimeZone.getDefault();

    private DateTimeZone tz;

    public TZRule( DateTimeZone tz ) {
        this.tz = tz;
    }

    @Override
    protected void starting( Description description ) {
        DateTimeZone.setDefault( tz );
    }

    @Override
    protected void finished( Description description ) {
        DateTimeZone.setDefault( origDefault );
    }
} 
```

将所有受影响的测试放在一个抽象基类中`AbstractTZTest`并扩展它：

```
public class UTCTest extends AbstractTZTest {
    @Rule public TZRule tzRule = new TZRule( DateTimeZone.UTC );
} 
```

`AbstractTZTest`这将使用 UTC执行所有测试。对于您要测试的每个时区，您需要另一个类：

```
public class UTCTest extends AbstractTZTest {
    @Rule public TZRule tzRule = new TZRule( DateTimeZone.forID( "..." );
} 
```

由于测试用例是继承的，仅此而已 - 您只需要定义规则。

以类似的方式，您可以移动系统时钟。使用调用`DateTimeUtils.setCurrentMillisProvider(...)`来模拟测试在特定时间运行并`DateTimeUtils.setCurrentMillisSystem()`恢复默认值的规则。

注意：您的提供商将需要一种方法来使时钟滴答作响，否则所有新`DateTime`实例都将具有相同的值。每次`getMillis()`调用时，我经常将值提前一毫秒。

注意 2：这仅适用于 joda-time。它不影响`new java.util.Date()`。

注意 3：您不能再并行运行这些测试。它们必须按顺序运行，否则其中一个很可能会在另一个测试运行时恢复默认时区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T17:03:17.193

```
for (String zoneId : DateTimeZone.getAvailableIDs())
{
   DateTime testedDate1;
   DateTime testedDate2;
   try
   {
      final DateTimeZone tz = DateTimeZone.forID(zoneId);
      // your test with testedDate1 and testedDate2 
   }
   catch (final IllegalArgumentException e)
   {
      // catching DST problem
      testedDate1 = testetDate1.plusHours(1);
      testedDate2 = testetDate2.plusHours(1);
      // repeat your test for this dates
   }
} 
```

单次测试更改

```
DateTimeZone default;  

DateTimeZone testedTZ;

@Before
public void setUp()
{
   default = GateTimeZone.getDefault();
   DateTimeZone.setDefault
}  

@After
public void tearDown()
{
   default = GateTimeZone.setDefault();
   DateTimeZone.setDefault(testedTZ)
}   

@Test
public void test()
{
//...
} 
```

# javascript - GWT 和 JxBrowser - 有什么经验吗？

> ID：10846705
> 
> 赞同：0
> 
> 时间：2012-06-01T08:13:02.403
> 
> 标签：javascript, java, gwt, obfuscation, jxbrowser

我正在开发一个基于客户端-服务器的 Web 应用程序，使用画布组件来显示从服务器接收到的数据。

现在我遇到了以下问题：服务器生成的数据太多，无法在未压缩的情况下传输到客户端，我希望最终应用程序中的数据量 > 1 MB/秒，尽管我只传输了最少量的数据客户要求的。

通过数据压缩我可以解决这个问题，但是如果我压缩数据，我的客户端将无法在 JavaScript 中足够快地解压缩它。结果是我的屏幕卡顿了。

解决方案是在单独的线程中运行解压缩，这样屏幕就不会受到影响。

刚才我遇到了JxBrowser：[http ://www.teamdev.com/jxbrowser/](http://www.teamdev.com/jxbrowser/)

它是一个库，允许在客户端机器上的 JFrame 中运行我的 Web 应用程序，而另一个线程正在处理客户端-服务器通信和数据解压缩。

最后一步是将解压缩的数据传输到我的 JFrame 中的 Web 浏览器。

但是现在我不知道如何直接访问我的 GWT 客户端的混淆 JavaScript 函数来传输我的解压缩数据。

有没有人已经做过类似的事情，或者尝试过并得出了不可能的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:58:11.563

我一直在使用 JavaFX 在桌面上托管 GWT 应用程序。JavaFX 包含一个 webkit（没有过时），它似乎是 gwt 应用程序的一个非常好的宿主。

您可能想看看 JavaFX。

# java - EntityManager.getResultList() 中的重复结果

> ID：10846706
> 
> 赞同：1
> 
> 时间：2012-06-01T08:13:03.317
> 
> 标签：java, hibernate, persistence, hql

当我将此 HQL 查询发送到 MySQL ddbb

```
public List<EscaleCatalogueKaravel> obtenirListeEscalesCroisiereAvecIdCroisiereKaravel(Integer idCroisiereKaravel, Integer refLangue) {
         List<EscaleCatalogueKaravel> listeEscales = entityManager.createQuery("select p from EscaleCatalogueKaravel p " +
                    "where p.idCroisiereComplete=:idCroisiereComplete and p.refLangue=:refLangue")
                    .setParameter("idCroisiereComplete", idCroisiereKaravel)
                    .setParameter("refLangue", refLangue)
                    .getResultList();

         return listeEscales;
    } 
```

我得到了正确数量的结果，尽管它们都是相同的。但是，如果我手动查询 ddbb（日志中显示的查询），结果集是正确的。

另外，如果我用“p”代替实体中的字段名称，结果是正确的（但结果集中没有属性名称，只有索引）

这是我的实体

```
@Entity
@Table(name="view_croisiereitineraire")
public class EscaleCatalogueKaravel implements Serializable {

    @Id
    @Column(name="idCroisiereComplete")
    private Integer idCroisiereComplete;

    @Column(name="idEscale")
    private Integer idEscale;

    @Column(name="nomEscale")
    private String nomEscale;

    @Column(name="refMarche")
    private Integer refMarche;

    @Column(name="refLangue")
    private Integer refLangue;

    public Integer getIdCroisiereComplete() {
        return idCroisiereComplete;
    }

    ,..

} 
```

我对其他实体的做法完全相同，一切正常。想法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-01T11:50:19.057

大概是因为

```
.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY); 
```

应该添加到您的查询中，但这已经在这个论坛上被回答了一千次了

# c# - wceload.exe 未从目录加载 CAB 文件。

> ID：10846708
> 
> 赞同：1
> 
> 时间：2012-06-01T08:13:10.297
> 
> 标签：c#, windows-mobile

我有一个 Windows Mobile 6.0 应用程序安装程序，它必须在其进程中执行一个 CAB 文件。但是，如果 CAB 文件位于目录中，我将无法安装它。

这确实有效：

```
Process proc = Process.Start("wceload.exe", "/silent \\Installer.CAB");
proc.WaitForExit(); 
```

这不起作用：

```
Process proc = Process.Start("wceload.exe", "/silent \\Program Files\\Installer.CAB");
proc.WaitForExit(); 
```

似乎因为 CAB 文件位于未找到的目录中。我已经在 \temp\ 中尝试过它，它也是如此。我可以让它工作的唯一方法是将 CAB 文件放在看起来很愚蠢的根目录中。

谢谢你的帮助

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:02:03.617

这是因为您在目标路径中有一个空格（在“程序”和“文件”之间）并且它周围没有引号。尝试添加引号，如下所示：

```
Process proc = Process.Start("wceload.exe", "/silent \"\\Program Files\\Installer.CAB\""); 
```

或者

```
Process proc = Process.Start("wceload.exe", "/silent '\\Program Files\\Installer.CAB'"); 
```

# java - 在运行时在面板中添加面板时，我无法设置位置

> ID：10846710
> 
> 赞同：1
> 
> 时间：2012-06-01T08:13:21.170
> 
> 标签：java, swing, jpanel, draw, layout-manager

我在使用 java 及其 swing 组件时遇到了困难，我必须说，当我使用 C# 编程时，这要容易得多，而且我对这段代码有点卡住了。

我想做的是在`another panel`. 这向用户显示他加入的项目需要完成的任务。

![在左侧，您可以看到面板，我想向其中添加更多面板。](../Images/8085c30b21fcbf64150e71a82af7dd10.png)

我在 Gui 的右侧创建了一个面板，我想在运行时向它添加更多面板。我设法向它添加了一个面板，但它有一些奇怪的行为。

![在此处输入图像描述](../Images/42001fd1dd6e1124f0f8a9f8a29e9a76.png)

蓝色面板是`newly created`我在运行时使用此代码添加的面板。

```
 JPanel pnl = new JPanel();
  lpane.setBackground(Color.red);
  lpane.setLayout(new BorderLayout());
  pnl.setBounds(0, 0, 20, 100);
  pnl.setOpaque(true);
  pnl.setBackground(Color.BLUE);
  lpane.add(pnl);
  lpane.validate(); 
```

这只是一个测试，这就是为什么代码不包含其余面板的 for 循环等。如您所见，我正在使用它`BorderLayout`，因为我在互联网上找到了它，并且因为没有 BorderLayout 它不会绘制任何东西。另外，当我尝试将 BorderLayout 设置为 .NORTH 或 .STARTPAGE 时，它开始在面板上方绘制，但我仍然无法设置面板的任何位置？

有人知道为什么我不能设置任何位置或宽度和高度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T08:50:16.400

好的，这里有一些代码可以帮助您，但我真的建议您花一些时间在[http://docs.oracle.com/javase/tutorial/uiswing/上阅读 Swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/)

布局管理器的存在是为了使布局灵活和动态，但需要一些时间和练习才能真正理解它们。下面的代码是做你想做的事情的一种方式，但它可能不是所有用例的正确代码。

注意：这不是生产级代码，而是更多地说明一点。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.FlowLayout;
import javax.swing.JFrame;
import javax.swing.JPanel;

/**
 * Simple app to demonstrate how to use basic layout managers.
 * @author ewald
 */
public class LayoutPanels {

    private JFrame frame = new JFrame("The Top Frame");

    public LayoutPanels() {
        frame.setSize(640, 480);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new BorderLayout());
    }

    /**
     * Sample code - this is not best practice, but it will help
     * you to make some progress.
     */
    public void startUp() {
        JPanel topPanel = new JPanel(new BorderLayout());

        JPanel eastPanel = new JPanel();
        eastPanel.setBackground(Color.BLUE);
        eastPanel.setLayout(new FlowLayout());
        eastPanel.setPreferredSize(new Dimension(150,200));

        JPanel onePanel = new JPanel(new FlowLayout());
        JPanel twoPanel = new JPanel(new FlowLayout());
        JPanel threePanel = new JPanel(new FlowLayout());

        onePanel.setPreferredSize(new Dimension(100,50));
        twoPanel.setPreferredSize(new Dimension(100,50));
        threePanel.setPreferredSize(new Dimension(100,50));

        onePanel.setBackground(Color.RED);
        twoPanel.setBackground(Color.GREEN);
        threePanel.setBackground(Color.YELLOW);

        eastPanel.add(onePanel);
        eastPanel.add(twoPanel);
        eastPanel.add(threePanel);

        topPanel.add(eastPanel, BorderLayout.EAST);

        frame.getContentPane().add(topPanel, BorderLayout.CENTER);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        LayoutPanels app = new LayoutPanels();
        app.startUp();
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T08:20:28.983

*   `BorderLayout`已实施 5\. 放置区域`JComponents`，

*   最后添加`JComponent`到混凝土区域是可见的`BorderLayout`

*   use (pre_implemented in JPanel) `FlowLayout`，接受 PreferredSize 来自 JComponents

*   `GridLayout`对于屏幕上相同大小的孩子

*   一些规则[Swing LayoutManager 的工作原理](https://stackoverflow.com/a/6989230/714968)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T08:37:18.750

有几种方法可以解决这个问题。一种方法是在父面板上使用 BoxLayout.Y_AXIS。这将导致您的子面板在添加时被添加到彼此下方。与拥有 5 个区域的 BorderLayout 不同，这不是此任务的正确方法。

```
JPanel pnl = new JPanel();
pnl.setLayout(new BoxLayout(pnl, BoxLayout.Y_AXIS)); // This will cause your new panels to be added below eachother
pnl.setBackground(Color.BLUE);
//and set sizes etc

JPanel newPanel = new JPanel();
newPanel.setLayout(new FlowLayout(FlowLayout.LEFT)); // set layout on your child panel. FlowLayout is default but you might want to read up on the different layoutmanagers to pick the right one.
newPanel.setSize(50, 50); // you can use pnl.getWidth to make your panels to have the same width as it's parent pane, but you probably want the height to be locked
//and add the contents to this panel
pnl.add(newPanel); 
```

# android - Andengine中的碰撞检测

> ID：10846720
> 
> 赞同：1
> 
> 时间：2012-06-01T08:14:01.337
> 
> 标签：android, box2d, collision-detection, sprite, andengine

我想在 AnimatedSprite （box2d 的主体）和 Shape 之间进行碰撞检测。我正在使用下面的代码。但它给出了错误。“墙”是一个矩形，“玩家”是动画精灵。

```
scene.registerUpdateHandler(new IUpdateHandler() {
            public void reset() { }

            public void onUpdate(final float pSecondsElapsed) {
                    if(walls.collidesWith(player)) {
                        walls.setColor(1, 0, 0);
                    } else {
                        walls.setColor(0, 1, 0);
                    }

                    if(!mCamera.isRectangularShapeVisible(player)) {
                        walls.setColor(1, 0, 1);

                    }
            }
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T22:26:52.607

collidesWith 函数不是 box2D 碰撞检测的一部分。您需要使用 Box2D ContactListener 来监听引擎中的碰撞并在那里处理它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-03T11:10:48.663

在 AndEngine box2d 中，您可以通过 ContractListener 检测碰撞。您可以查看有关如何在 AndEngine box2d 中使用 ContactListener 的有用详细信息。[点击这里](http://www.matim-dev.com/handling-collisions-between-bodies.html)

# java - 指示属性要求级别的 Java Web 服务

> ID：10846722
> 
> 赞同：1
> 
> 时间：2012-06-01T08:14:09.980
> 
> 标签：java, xml, web-services

我已经在我的应用程序中实现了 Web 服务。当我想通过带有 Soap UI 的 SOA 上的 Web 服务将对象发送到我的服务器时，我得到如下信息：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:impl="http://impl.arg.lou.com/">
   <soapenv:Header/>
   <soapenv:Body>
      <impl:addStudent>
         <!--Optional:-->
         <student>
            <!--Optional:-->
            <name>?</name>
         </student>
      </impl:addStudent>
   </soapenv:Body>
</soapenv:Envelope> 
```

我不希望名称字段是可选的，它应该是必填字段。我该怎么做？

我使用 Apache cxf。

要求等级链接：[http ://www.ietf.org/rfc/rfc2119.txt](http://www.ietf.org/rfc/rfc2119.txt)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T20:46:01.320

在您的 Web 服务定义中，您有一个定义消息的 XML 模式的*类型*部分。在该定义中，您可以设置多个约束，例如“必填字段”。

**例子：**

```
<wsdl:definitions name="myService" ...>
  <wsdl:types>
    <xs:schema version="1.0" targetNamespace="myNameSpace" xmlns:tns="myNameSpace">
      <xs:complexType name="studentType">
        <xs:attribute name="name" type="xs:string" use="required" />
      </xs:complexType>
      <xs:element name="student" nillable="false" type="tns:studentType"/>
    </xs:schema>
  </wsdl:types>
  ...
 </wsdl:definitions> 
```

现在，如果您没有在 apache CXF 配置中激活模式验证，则不会在服务器端进行验证，如下所示：

```
<jaxws:endpoint id="myService" ...>
  <jaxws:properties>
    <entry key="schema-validation-enabled" value="true" />
    ...
  </jaxws:properties>
  ...
</jaxws:endpoint> 
```

**PS：SOAP UI 使用目标 Web 服务的 XML 模式来生成默认请求。如果 XML 模式没有，`use="required"`或者`nillable="false"`它将`<!-- optional -->`在元素上添加注释**

# c# - 硬编码值到 web.config 文件

> ID：10846725
> 
> 赞同：0
> 
> 时间：2012-06-01T08:14:18.217
> 
> 标签：c#, asp.net, .net, c#-4.0, web-config

我已经有一个带有硬编码值的 phpcode，

```
$username = "abcd";
$password = "abcd123"; 
```

现在我想把这些值放到 web.config 文件中。这是我的工作，但这里出了点问题。

```
<appSettings>
<add key="username" username="abcd"/>
<add key="password" password="abcd123"/>
<appSettings/> 
```

所以..有什么问题吗？而且我还想知道如何将这些设置带到 aspx.cs 文件中。我的意思是 [configurationmanager] 的东西

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-01T08:16:48.127

您需要使用 key 和 value 属性来声明它们，如下所示：

```
<appSettings>
   <add key="username" value="abcd"/>
   <add key="password" value="abcd123"/>
<appSettings/> 
```

如果您需要基础知识，可以通过以下方式访问密钥：

```
string username = System.Configuration.ConfigurationManager.AppSettings["username"].ToString();
string password = System.Configuration.ConfigurationManager.AppSettings["password"].ToString(); 
```

要访问我的网络配置键，我总是在我的应用程序中创建一个静态类。这意味着我可以在任何需要的地方访问它们，并且我没有在我的应用程序中使用字符串（如果它在 web 配置中发生更改，我必须经历所有更改它们的事件）。这是一个示例：

```
using System.Configuration;

public static class AppSettingsGet
{    
    public static string Username
    {
        get { return ConfigurationManager.AppSettings["username"].ToString(); }
    }

    public static string Password
    {
        get { return ConfigurationManager.AppSettings["password"].ToString(); }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T08:18:22.277

尝试使用[WebConfigurationManager](http://msdn.microsoft.com/en-us/library/system.web.configuration.webconfigurationmanager.aspx)：

```
WebConfigurationManager.AppSettings["username"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T08:20:03.907

将值硬编码到 web.config 文件是不安全的。对于密码存储哈希值而不是原始字符串。也尝试使用 DPAPI。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-01T10:08:20.840

当那些事情完成时..之后需要做以下事情吗？在这里我创建了一个实例。或者如何在我的页面中访问/调用 web.config 的连接字符串。

```
 internal static ConnectionFactory newinstance()
    {
        try
        {
            return new   ConnectionFactory(ConfigurationManager.ConnectionStrings["myConString"].ConnectionString);
        }
        catch (Exception)
        {
            throw;
        } 
```

# javascript - Ajax 进入标题部分

> ID：10846726
> 
> 赞同：0
> 
> 时间：2012-06-01T08:14:25.687
> 
> 标签：javascript, jquery, ajax, asp.net-mvc-3

```
<div class="slidera_img"> 
<a href="/image1.jpg" rel="example_group" title="<a href='#'><img src='/vote.png' style='float:left; margin-left:45%;' /></a>">
</div 
```

我有上面的代码，它打开了一个花哨的框模态窗口，在模态窗口内有一个用于投票项目的按钮。我希望能够通过 ajax 做到这一点。目前，我在服务器端执行新请求，但我想使用 jquery ajax。

如您所见，第二个 a 位于标题标签内。我怎样才能访问它，所以点击它，我可以触发一个 ajax 调用？

我的代码在没有模态窗口的情况下工作，如下所示：

```
 <script type="text/javascript">
        function ajaxpost(id) {
            var item = $(this);

            $.get('@Url.Action("VoteAjax","Home")', { id: id }, function (response) {
                item.closest("li").find(".slidera_num").html(response.vote);
            });
        }
</script> 
```

编辑：我能够在上面使用并在添加后进行 ajax 调用

```
title="<a href='#' onClick='ajaxpost(1)'>... 
```

# ruby-on-rails - Factory Girl 与现有对象创建关联

> ID：10846732
> 
> 赞同：11
> 
> 时间：2012-06-01T08:15:00.650
> 
> 标签：ruby-on-rails, associations, factory-bot

我是 FactoryGirl 的新手，我正在尝试以下简单的场景？

```
factory :female, :class => Gender do
  code 'Female'
end

factory :male, :class => Gender do
  code 'Male'
end

factory :papas, :class => Customer do
  first_name 'Jim'
  last_name 'Papas'
  association :gender, :factory => :male, :strategy => :build
end

factory :dumas, :class => Customer do
  first_name 'Mary'
  last_name 'Dumas'
  association :gender, :factory => :female, :strategy => :build
end 
```

然后在我的测试中：

```
 create(:male)
 create(:female)
 create(:papas)
 create(:dumas) 
```

请注意，Customer 类有一个关联`belongs_to` `Gender`类和一个表示`gender_id`应该存在的验证规则。我还`Gender`对代码的唯一性进行了类验证。

在`create(:papas)`上面的陈述中，在我的测试中，我得到了`Customer`将要创建的错误是无效的，因为`gender_id`是`nil`.

如果我删除与性别的`:strategy => :build`工厂`Customer` `:papas`关联，那么我会收到一个错误，即在尝试创建时`:papas`，性别的代码已经存在。

我需要做什么才能让我的测试按照上面的要求创建数据？

请注意，在其他测试中，我也希望在没有客户的情况下创建性别。不要告诉我用工厂创建命令创建客户，同时让客户创建性别。如果我也尝试创建两个相同性别的客户，这将不起作用。

此外，必须有一个比这个更好的答案：

```
@male = create(:male)
@female = create(:female)
create(:papas, :gender => @male)
create(:dumas, :gender => @female) 
```

（使用固定装置时，这些东西是开箱即用的。我应该回到固定装置吗？）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-01T08:44:29.440

您可以通过不为您的性别实例使用工厂和在您的客户工厂中使用回调来实现您想要的。

你并没有从 Gender 工厂中获得很多东西（尽管我很欣赏它可能会为了提出这个问题而简化）。你可以很容易地做到这一点来获得一个性别：

```
Gender.find_or_create_by_code!('Male') 
```

然后在您的客户工厂中，您可以使用 before 回调来设置性别：

```
factory :dumas, :class => Customer do
  first_name 'Mary'
  last_name 'Dumas'
  before_create do |customer|
    customer.gender = Gender.find_or_create_by_code!('Female')
  end
end 
```

在 factory_girl 中使用回调的格式最近发生了变化，因此如果您使用的是 3.3 或更高版本，您需要执行以下操作：

```
before(:create) do |customer| 
```

而不是`before_create`.

如果创建性别比您的示例更复杂，您仍然可以使用工厂创建性别，但使用回调将它们与您的客户联系起来，而`find_by_code!`不是使用`find_or_create_by_code!`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-10-20T08:16:15.017

`ignore`已被弃用，并将在 Factory Girl 的第 5 版中删除。

相反，您可以使用[瞬态属性](https://github.com/thoughtbot/factory_girl/blob/f9cec9d326ff04a8d033515aa020c8a2ec4eb372/GETTING_STARTED.md#transient-attributes)：

```
factory :dumas, :class => Customer do
  transient do
    female { Gender.find_by_code('Female') || create(:female) }
  end

  first_name 'Mary'
  last_name 'Dumas'
  gender { female }
end 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-25T14:36:05.437

该`ignore`块也可用于包装它：

```
factory :dumas, :class => Customer do
  ignore do
    female { Gender.find_by_code('Female') || create(:female) }
  end

  first_name 'Mary'
  last_name 'Dumas'
  gender { female }
end 
```

# matlab - 在不弹出 GUI 的情况下运行 cmd 文件

> ID：10846734
> 
> 赞同：0
> 
> 时间：2012-06-01T08:15:10.880
> 
> 标签：matlab, user-interface, command-line, terminal, cmd

我正在文件中运行命令列表：

```
matlab -nodesktop -nodisplay -nojvm -nosplash .............
xwin32 --session .................... 
```

我想让它们在 Windows 中不弹出 GUI 的情况下运行，更重要的是，我希望不要弹出命令提示符 GUI，有人知道该怎么做吗？tnx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:46:55.593

您可以在 Windows 上做的最好的事情是：

### 批处理脚本.cmd

```
start /B /MIN matlab.exe -nodesktop -noFigureWindows -nosplash ^
    -r "surf(peaks); saveas(gcf, 'output.eps'); quit;" 
```

如果您需要在脚本中处理来自 MATLAB 的结果，您可以添加该`-wait`选项（下一个命令取决于上一个命令的输出）。

# objective-c - 无需旋转设备即可更改方向

> ID：10846736
> 
> 赞同：0
> 
> 时间：2012-06-01T08:15:16.200
> 
> 标签：objective-c, ios, ipad, orientation

我有一个主要是横向的应用程序......我有 2 个纵向视图，当它改变它的方向时它们会出现。到目前为止，一切都很好。

但是在其中一个视图上，我有一个按钮，它必须在不旋转 ipad 的情况下以横向推动视图。

我怎样才能做到这一点？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T10:25:00.423

您可以随时通过此方法设置设备方向。

```
[[UIDevice currentDevice] setOrientation:UIInterfaceOrientationLandscapeRight]; 
```

这会让你担心这种方法已被弃用，但它仍然可以正常工作，iOS 5.1 更新，所以在使用这种方法时不需要警告。

希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:17:43.880

在界面构建器中将您想要的横向视图设置为横向（它可能是继承的），并将应该自动旋转方法设置为仅返回 true 为横向。

# c - C中的Escape键按下无限循环

> ID：10846738
> 
> 赞同：2
> 
> 时间：2012-06-01T08:15:19.423
> 
> 标签：c, infinite-loop, ncurses

我正在使用诅咒库。我希望我的应用程序继续执行，直到按下 Escape 键。它不应该阻止下一个键输入，

我的工作代码是：这等待用户输入 key=getch(); 我希望这是非阻塞的，直到有人按下 ESCAPE KEY。它不应该等待键盘输入。

```
while (true)
{
    key=getch();
    if (key==ESCAPE)
    {
        break;
    }
    //else
    //{
        //execute something 
    //}
}//while end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T08:27:29.817

您可以[`timeout`](http://www.manpagez.com/man/3/curs_inopts/)在循环之前调用这样的函数：

```
timeout(0); 
```

然后`getch`不会再阻塞了。

该函数的描述是：

```
void timeout(int delay);
void wtimeout(WINDOW *win, int delay); 
```

> timeout 和 wtimeout 例程为给定窗口设置阻塞或非阻塞读取。如果延迟为负，则使用阻塞读取（即无限期地等待输入）。如果延迟为零，则使用非阻塞读取（即，如果没有输入等待，则读取返回 ERR）。如果延迟为正，则读取延迟毫秒的块，如果仍然没有输入，则返回 ERR。因此，这些例程提供与 nodelay 相同的功能，以及能够仅延迟毫秒（其中延迟为正）阻塞的附加功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T08:31:25.437

这是一个示例：

```
#include <curses.h>

int
main (void)
{
  int c;

  initscr ();
  noecho ();
  timeout (0);

  while (1)
    {
      c = getch ();
      if (c != ERR)
      {
        printw ("%c", c);
      }
      if (c == 27)
      {
        break;
      }
    }

  echo ();
  endwin ();
  return 0;
} 
```

该`timeout ()`函数告诉阻塞调用在返回之前应该等待多长时间。0 值表示非阻塞，正值`x`将在返回前等待`x`毫秒。

这是 curses 手册页中的部分：

> timeout 和 wtimeout 例程为给定窗口设置阻塞或非阻塞读取。如果延迟为负，则使用阻塞读取（即无限期地等待输入）。如果延迟为零，则使用非阻塞读取（即，如果没有输入等待，则读取返回 ERR）。如果延迟为正，则读取延迟毫秒的块，如果仍然没有输入，则返回 ERR。因此，这些例程提供了与 nodelay 相同的功能，以及能够阻塞仅延迟毫秒（其中延迟为正）的附加功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T08:22:04.160

您可以通过设置[无延迟模式](http://linux.die.net/man/3/nodelay)来做到这一点。then`getch`不会阻塞，`ERR`在没有 key 的时候返回。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T11:00:04.953

谢谢大家的回复。我使用 kbhit() 解决了这个问题

# c++ - 使用 QQueue::enqueue() 时出现分段错误

> ID：10846739
> 
> 赞同：0
> 
> 时间：2012-06-01T08:15:24.897
> 
> 标签：c++, qt, queue, indexoutofboundsexception, memory-corruption

我正在尝试创建共享库（使用 CMake），它在内部使用 Qt 对象（特别是 QString 和 QQueue）并将该库与其他应用程序一起使用。问题是应用程序在调用 QQueue 的方法时收到 SIGSEGV：

```
(gdb) r
Starting program: /home/ilya/projects/qtLogger/build/qtLoggerSample
[Thread debugging using libthread_db enabled]
startup
_DEBUG
QtLogger::QtLogger()
void QtLogger::foo(void*)
void QtLogger::log(QtLogger::LOG_LEVEL, QString) lvl: DEBUGmsg: "debug 1"

Program received signal SIGSEGV, Segmentation fault.
0x08049450 in QString (this=0x2817ad9c, other=...) at /usr/include/qt4/QtCore/qstring.h:714
714     inline QString::QString(const QString &other) : d(other.d)
(gdb) bt
#0  0x08049450 in QString (this=0x2817ad9c, other=...) at /usr/include/qt4/QtCore/qstring.h:714
#1  0xb7fdda0c in QList<QString>::node_construct (this=0x804b474, n=0x2817ad9c, t=...) at /usr/include/qt4/QtCore/qlist.h:352
#2  0xb7fdd7fa in QList<QString>::append (this=0x804b474, t=...) at /usr/include/qt4/QtCore/qlist.h:481
#3  0xb7fdd5e0 in QQueue<QString>::enqueue (this=0x804b474, t=...) at /usr/include/qt4/QtCore/qqueue.h:59
#4  0xb7fdd19f in QtLogger::log (this=0x804b460, level=QtLogger::LL_DEBUG, message=...)
    at /home/ilya/projects/qtLogger/lib-qtLogger/src/libqtlogger.cpp:97
#5  0x08049099 in main (argc=1, argv=0xbffff644) at    /home/ilya/projects/qtLogger/src/main.cpp:27 
```

应用程序的源代码可以在这里找到：[https ://github.com/ilardm/qtLoggerSample/tree/137adee556f41eb4526e1d1c604e8541ef6eb65a](https://github.com/ilardm/qtLoggerSample/tree/137adee556f41eb4526e1d1c604e8541ef6eb65a)

库的源代码可以在这里找到（也可以作为应用程序存储库的 git 子模块提供）：[https ://github.com/ilardm/lib-qtLogger/tree/bf1b490fd7c6666176c23e6fd791c00937d954b4](https://github.com/ilardm/lib-qtLogger/tree/bf1b490fd7c6666176c23e6fd791c00937d954b4)

你能帮我理解我错在哪里吗？

PS 我正在使用 Qt 4.6.3、Debian Squeeze x86 和 x64、gcc 4.4.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T09:09:30.013

你正在破坏你`QQueue`的字符串数组的初始化。对于那些（像我一样）在导航您的 Sources/Branches/SubRepositories 时遇到问题的人......您的 QtLogger 声明如下所示：

```
class LIBQTLOGGER_EXPORT QtLogger
{
public:
    typedef enum {
        LL_EROR,
        LL_WARNING,
        LL_LOG,
        LL_DEBUG,

        LL_COUNT
    } LOG_LEVEL;

public:
    QtLogger();
    ~QtLogger();

public:
    void foo( void* );

    void log( LOG_LEVEL, QString );

protected:
    LOG_LEVEL currentLevel;
    QString ll_string[ LL_COUNT ];

    QQueue< QString > messageQueue;
    QMutex mqMutex;
}; 
```

然后你的构造函数看起来像这样：

```
QtLogger::QtLogger()
    : currentLevel( LL_DEBUG )
{
#if ENABLE_LOGGER_LOGGING
    std::clog << __PRETTY_FUNCTION__ << std::endl;
#endif

    ll_string[ LL_EROR      ].sprintf( "ERROR" );
    ll_string[ LL_WARNING   ].sprintf( "WARN " );
    ll_string[ LL_LOG       ].sprintf( "LOG  " );
    ll_string[ LL_DEBUG     ].sprintf( "DEBUG" );

    ll_string[ LL_COUNT     ].sprintf( "     " );
} 
```

LL_EROR 为 0，LL_COUNT 为 4。 *（旁注：该词拼写为“ERROR”，因此您的字符串是正确的位。）* 无论如何...您的声明实际上是`QString ll_string[4];`您将 5 个字符串放入其中并破坏了后续成员变量。

为什么你首先把那个空字符串放在那里对我来说有点神秘......（！）但无论哪种方式，向量类在事物方案而不是原始数组中都是相当轻量级的，并且通常提供更多检查常见操作的界限。将来使用`QVector`（或其他），将更容易捕获此类错误：

[http://qt-project.org/doc/qt-4.8/qvector.html](http://qt-project.org/doc/qt-4.8/qvector.html)

[简而言之，这与shared-libraries](/questions/tagged/shared-libraries "显示标记为“共享库”的问题")无关。下一次，在假设相关之前尝试将所有内容构建到单个可执行文件中！:-)

# windows - windows支持链接系统调用吗？

> ID：10846740
> 
> 赞同：0
> 
> 时间：2012-06-01T08:15:29.823
> 
> 标签：windows, hardlink

在linux&unix中我们可以调用link(name1,name2)让name1和name2引用同一个inode，不知道windows平台支持吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:30:43.853

我认为 CreateHardLink() 可以。

# ruby-on-rails - 确定 :delete 请求来自哪个页面

> ID：10846741
> 
> 赞同：0
> 
> 时间：2012-06-01T08:15:37.450
> 
> 标签：ruby-on-rails, request

我想知道如何确定 :delete 请求来自哪个页面？例如，我有一个同时出现在用户主页和展示页面上的墙贴。当用户从主页删除帖子时，我希望用户被重定向到主页，而如果他从他的节目（个人资料）页面删除它，我希望用户被重定向回那里。问题是，我很难区分它的来源。

我知道在 :delete 请求中，您不能传递隐藏值，因为它不是 :post。我试过检查参数，但它们最终都是一样的。它们具有相同的 :method、:controller 和 :action 即

```
{"_method"=>"delete", "authenticity_token"=>"xNsfq27sBrpssTO8sk0aAzzIu8cvnFJEZ30c17Q+BCM=",
"action"=>"destroy", "controller"=>"pub_messages", "id"=>"33"} 
```

在我的破坏行动中，我有：

```
def destroy
    @pub_message = PubMessage.find_by_id(params[:id])
    @pub_message.destroy
    redirect_to user_path(@pub_message.to_id)
end 
```

但是，我不想总是重定向回 user_path，而是想重定向到 root_path，但只是不知道用户何时在主页上发出破坏操作。

我在我的视图中显示删除选项的地方是......

```
<% if current_user == feed_item.user or current_user == feed_item.to %>
   <%= link_to "delete", feed_item,     method: :delete,
                                        confirm: "You sure?",
                                        title: feed_item.content %>
<% end %> 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T08:21:32.837

```
redirect_to request.referer 
```

或者

```
redirect_to :back 
```

会将您重定向到上一页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T08:19:51.633

您可以`redirect_to :back`，如此[处](http://api.rubyonrails.org/classes/ActionController/Redirecting.html#method-i-redirect_to)所述。这会将您从请求中带回 HTTP_REFERER。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T08:26:42.633

您可以使用`redirect_to :back`Referer。

如果您担心许多访问者的浏览器没有在请求中填写 Referer 标头，您可以处理 from params ：

```
def destroy
  @pub_message = PubMessage.find_by_id(params[:id])
  @pub_message.destroy
  redirect_to user_path(@pub_message.to_id) and return if params[:from] == "profile"
  redirect_to home_path # no if to fallback
end

<% if current_user == feed_item.user or current_user == feed_item.to %>
  <%= link_to "delete", feed_path(feed_item, from: "profile"), method: :delete,
                                                               confirm: "You sure?",
                                                               title: feed_item.content %>
<% end %> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T12:00:27.863

你*可以*传入额外的参数：

```
<%= link_to "delete", feed_item_path(feed_item, :foo => :bar),
                 method: :delete,
                 confirm: "You sure?",
                 title: feed_item.content %> 
```

然后使用这些来决定您要重定向到的位置。

如果您不喜欢将这些作为查询参数，那么您可以设置不同的路由来为您传递这些参数。

# algorithm - 计数选择算法

> ID：10846746
> 
> 赞同：1
> 
> 时间：2012-06-01T08:16:22.387
> 
> 标签：algorithm, select, counting

我已经获得了算法的基本代码，它选择未排序数组中的第 k 个最小元素（或排序，我不确定）。通常，我们会为此使用快速选择，但我们得到了另一个选择，它被标记为“countingselect”作为函数名称。

“计数选择使用类似的方法来计数排序。列表中的项目用作计数数组的索引。然后，从数组的低值端开始，项目计数被累加，直到总数超过所需值。”

```
// return the kth smallest item
int countingSelect(int items[], int first, int last, int k) {
    int counts[cap];
    for (int c = 0; c < cap; c++) {
        counts[c] = 0;
    }
    for (int i = first; i < last; i++) {
        counts[items[i]] += 1;
    }
    int c = 0;
    while (k >= 0) {
        k -= counts[c++];
    }
    return c-1;
} 
```

我在将其分解为伪代码时遇到了巨大的麻烦，以便我可以准确理解该函数的工作原理。对于我们得到的代码，我的第一个困惑是“cap”的值是什么，它的功能是什么。上限通常是什么值？我没有得到这个信息。

将算法分解为伪代码是理解它的好方法，我请求一些帮助来分解它并逐步执行代码。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T08:27:51.537

我会假设 cap 是列表中的最大数字（因此您可以分配足够的内存）。

计数是每个数字出现在列表中的计数。例如，count[n] 表示列表中 n 的数量。

第一个循环初始化计数值。

第二个循环通过增加计数中的适当位置来调整计数。此循环完成后，counts 是列表中出现的每个数字的计数。例如，count[n] 表示列表中 n 的数量。

最后一位遍历并遍历列表，将前几个索引的元素相加，直到该数字大于 k。然后前面的数字是我们超过 k 的地方，所以我们返回那个数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T08:37:01.113

如果你了解计数排序，这应该很简单。如果不是，那么让我简要介绍一下计数排序的工作原理。

假设您有 10 个数字，范围为 [0, 15]。由于您知道数据的范围，因此您可以检查输入，并标记您看到每个数字的次数。然后迭代计数并按顺序检索数字：

```
input numbers
counts[0..15] = 0
for i in numbers
    ++counts[numbers[i]]
for i in counts
    counts[i] times
        print i 
```

让我们看一个例子：

```
numbers: 1 5 3 13 5 2 0 1 14 2 
```

第一个循环创建计数：

```
(index) 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15
counts: 1 2 2 1 0 2 0 0 0 0 0  0  0  1  1  0 
```

第二个循环为您提供：

```
1 times 0
2 times 1
2 times 2
1 time 3
0 times 4
2 times 5
0 times 6
... 
```

那是：

```
0 1 1 2 2 3 5 5 13 14 
```

* * *

您的算法基本相同，只是它不是输出排序列表，而是找到第 k 个最小的项目。

在上面的示例中，您可以看到：

```
0th smallest numbers is 0
1st and 2nd smallest numbers are 1
3rd and 4th smallest numbers are 2
5th smallest number is 3
6th and 7th smallest numbers are 5
... 
```

如果你仔细观察，你会看到这样的模式：

```
if      k <= 0 => 0
else if k <= 2 => 1
else if k <= 4 => 2
else if k <= 5 => 3
else if k <= 7 => 5
else if k <= 8 => 13
else if k <= 9 => 14 
```

然而，数字

```
0 2 4 5 7 8 9 
```

实际上是`counts`自身的运行总和！

所以，你的算法的底部是一个运行总和，除了它检查总和何时大于`k`. 当它出现时，之前的数字就是你的答案。请注意，索引`counts`是数字本身。

```
int c = 0;
int sum = 0;
while (k >= sum) {
    sum += counts[c++];
}
return c-1; 
```

您的算法试图避免该`sum`变量，而是从其自身中减去运行总和，`k`这具有相同的效果。

# linux - kworker线程的起源

> ID：10846747
> 
> 赞同：19
> 
> 时间：2012-06-01T08:16:25.473
> 
> 标签：linux, linux-kernel

在我新安装的使用内核 3.2 的系统上，我看到一个 kworker-thread 不断消耗 CPU。我想找出内核/模块的哪个部分创建了这个工作队列。

如何在内核空间中跟踪名为“kworker/0:3”的 kworker 线程到其起源？

我试图查看 /sys/kernel/debug/tracing/events/workqueue，但无法弄清楚。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-19T04:07:56.977

（在我看来，这不是主题，但这是我在[unix.stackexchange.com上发布的](https://unix.stackexchange.com/questions/22851/why-is-kworker-consuming-so-many-resources-on-linux-3-0-0-12-server/65270#65270)[答案](https://unix.stackexchange.com/questions/22851/why-is-kworker-consuming-so-many-resources-on-linux-3-0-0-12-server/65270#65270)。）

我[在 lkml 上找到了这个帖子，可以稍微](https://lkml.org/lkml/2011/3/31/68)回答你的问题。（似乎连 Linus 本人都对如何找出这些线程的来源感到困惑。）

基本上，有两种方法可以做到这一点：

```
$ echo workqueue:workqueue_queue_work > /sys/kernel/debug/tracing/set_event
$ cat /sys/kernel/debug/tracing/trace_pipe > out.txt
(wait a few secs) 
```

为此，您需要在内核中编译[ftrace 。](http://www.elinux.org/Ftrace)

这将输出线程都在做什么，并且对于跟踪多个小型作业很有用。

```
cat /proc/THE_OFFENDING_KWORKER/stack 
```

这将输出做大量工作的单个线程的堆栈。它可以让您找出导致该特定线程占用 CPU 的原因（例如）。`THE_OFFENDING_KWORKER`是进程列表中kworker的pid。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-24T14:31:22.253

所以，一段时间后，我找到了解决方案。事实上，Anthon 是对的，发送中断的是 ACPI 子系统。在*我的*系统上，我禁用了以下中断并且 kworker-thread 平静下来。

```
echo disable > /sys/firmware/acpi/interrupts/gpe1B
echo disable > /sys/firmware/acpi/interrupts/gpe08 
```

然而，直到现在还没有确定虚假 IRQ 来自`gpe08`和`gpe1B`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-27T14:18:29.433

kworker / watchdog 在不使用电缆电源时经常导致高负载 - 解决方法

仅当笔记本电脑由电缆供电时，kworker（导致 kernel_thread_helper+0x6/0x10 ？）线程 1 每 5 秒达到 100% 的 cpu 1 秒。电池电量没有问题。电池是否充满电无关紧要。

它或多或少是突然出现的，所以我猜最近的 Ubuntu 更新是原因（现在是 3.2.0-55-generic-pae）。

找了半天，试图找出根本原因是，endet up 试图禁用所有 acpi 中断，这没关系。

最后将 GRUB_CMDLINE_LINUX_DEFAULT=”acpi=off” 添加到 /etc/defaults/grub 有帮助。

正如我现在发现的那样，我用这些确切的特殊 unicode 引号添加了它，这可能解释了与“安静的飞溅”（带有默认引号）的不兼容，这让我感到困惑。我必须查看更多 grub 问题（但我尝试未显示启动菜单，未使用默认条目配置......）所以我将把测试留到以后。

PS：一周后，问题又回来了（没有重启，只是中间暂停）。可能与使用 USB 鼠标有关。断电/通电有帮助（重启没有）。抛弃所有 grub 选项。我期待这个问题会在某个时候再次出现。

PPS：花了一些时间（半年），但在ram恢复后又回来了。没有最近的更新，只是像我经常做的那样插入/拔出电源。没有插入/拔出 USB 设备。在暂停期间有一个图腾在运行（但没有播放）。插上电源线断电/通电*没有*帮助，拔下电源线断电/通电有帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-05-28T09:00:26.657

针对此类问题的另一个解决方案（我已经在不久前发布在不同的[线程中，也许您可​​以找到解决您问题的其他解决方案）是使用](https://stackoverflow.com/a/61697317/12150026)**perf 工具** （默认情况下并不总是启用它，您可以需要在您的设备上[安装 perf](https://askubuntu.com/questions/50145/how-to-install-perf-monitoring-tool)  ）。

**第 1 步：**设置 perf 以记录工作队列事件：

```
perf record -e 'workqueue:*' -ag -T 
```

**第 2 步：**只要您认为需要捕捉事件就运行它（如果此事件足够频繁，10 秒应该没问题，但您可以让它运行更长时间，具体取决于您设备上剩余的可用空间）然后用`Ctrl + C`.

**第 3 步：**打印捕获的事件（在 Linux 版本 < 4.1 我认为应该是 -f 而不是 -F）：

```
perf script -F comm,pid,tid,time,event,trace 
```

这将显示如下内容： 

```
 task-name    pid/tid     timestamp    event 
------------------------------------------------------------------------------------------------------------------------------------------------------------------- 
    turtle        9201/9201   1473.339166:  workqueue:workqueue_queue_work:    work struct=0xef20d4c4 function=pm_runtime_work workqueue=0xef1cb600 req_cpu=8 cpu=1
    turtle        9201/9201   1473.339176:  workqueue:workqueue_activate_work: work struct 0xef20d4c4
    kworker/0:3  24223/24223  1473.339221:  workqueue:workqueue_execute_start: work struct 0xef20d4c4: function pm_runtime_work
    kworker/0:3  24223/24223  1473.339248:  workqueue:workqueue_execute_end:   work struct 0xef20d4c4 
```

**第四步：**分析上表：

在第一行，一个名为的任务`turtle (pid 9201)`将工作推`pm_runtime_work`送到工作队列。在第三行中，我们可以看到 `kworker/0:3 (pid 24223)`正在执行该工作。

**摘要：**现在回到您的问题，我们看到任务`kworker/0:3`已请求`turtle`运行该`pm_runtime_work`功能。那么让我们回到代码中，看看这个 `pm_runtime_work`函数做了什么！也许在这里我们将设法理解为什么它会消耗如此多的 CPU。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-06-01T10:48:53.693

kworker 是处理工作队列的内核线程。该线程在文件 linux/kernel/workqueue.c 文件中创建。

# iphone - AdMob API POST 连接

> ID：10846748
> 
> 赞同：1
> 
> 时间：2012-06-01T08:16:29.180
> 
> 标签：iphone, objective-c, sdk, admob

我会创建一个应用程序来将我的 AdMob 收入保留在我的 iPhone 上。我已阅读[API 文档](http://mm.admob.com/web/pdf/AdMob_API_Documentation.pdf)并编写了一些代码。但是我对给我一个空请求的 POST 请求有问题。响应！

```
NSString* PostURL= [NSString stringWithFormat:@"https://api.admob.com/v2/auth/login"];

ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:PostURL]];
[request setPostValue:APIKey forKey:@"client_key"];
[request addRequestHeader:@"Content-Type" value:@"application/x-www-form-urlencoded;"];
[request setPostValue:@"mymail@gmail.com" forKey:@"email"];
[request setPostValue:@"mypassword" forKey:@"password"];

[request setDelegate:self];
[request startSynchronous]; 
```

并使用 ASIHTTPRequestDelegate 方法获取响应：

```
-(void)request:(ASIHTTPRequest *)request didReceiveData:(NSData *)data{

NSLog(@"didReceive data %@", [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]);} 
```

输出是一样的：didReceive data: (null)

你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-30T10:48:39.173

新的 Admob Web 似乎不再存在 REST API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T19:45:39.550

我认为您不想在此调用中使用 ASIFormDataRequest。您应该改用标准的 ASIHTTPRequest 类并将其方法设置为 POST。然后，您传递的参数不是作为标头字段，而是作为请求的主体。所以你的代码应该是这样的：

```
NSString *bodyString = @"client_key=123456&email=email@gmail.com&password=password";

ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:@"https://api.admob.com/v2/auth/login"]];
[request setRequestMethod:@"POST"]; 
[request setPostBody:[bodyString dataUsingEncoding:NSUTF8StringEncoding]]; 
```

您还可以尝试将 Content-Type 标头显式设置为“application/json”。当您对 url 进行 POST 时，JSON 似乎是返回的。

```
[request addRequestHeader:@"Content-Type" value:@"application/json"]; 
```

如果您想对原始请求进行故障排除，您还可以尝试从命令行使用 curl 来查看它发送的内容。使用如下命令：

```
> curl -d "client_key=123456&email=email@gmail.com&password=password" https://api.admob.com/v2/auth/login 
```

此致。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T18:28:03.937

如果您正在开发应用程序，则需要使用原生[Google AdMob Ads SDK](https://developers.google.com/mobile-ads-sdk/)而非 API 来获取广告。

[在此处](https://developers.google.com/mobile-ads-sdk/docs/ios/fundamentals)查看入门指南。

# java - i18n 找不到语言环境属性

> ID：10846749
> 
> 赞同：0
> 
> 时间：2012-06-01T08:16:38.323
> 
> 标签：java, internationalization, faces-config

```
java.util.MissingResourceException: Can't find bundle for base name xxx.i18n.base, locale en_US 
```

我目前正在使用 Facelets 实现 i18n。我有三个 .properties 文件：

*   xxx.i18n.base.properties
*   xxx.i18n.base_en_US.properties
*   xxx.i18n.base_nl_NL.properties

**面孔-config.xml**

```
<?xml version='1.0' encoding='UTF-8'?>
<faces-config version="2.0"
    xmlns="http://java.sun.com/xml/ns/javaee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd">

    <application>
        <locale-config>
            <default-locale>nl_NL</default-locale>
            <supported-locale>en_US</supported-locale>
        </locale-config>
        <resource-bundle>
            <base-name>xxx.i18n.base</base-name>
            <var>base</var>
        </resource-bundle>
    </application>
</faces-config> 
```

如错误所述，我无法找到 en_US 文件，但是当我为 nl_NL 设置语言环境时，也找不到它。最后，将语言环境设置为 de_DE 之类的内容将为我提供 de_DE 的结果，即使此语言环境未定义为受支持。

我正在使用以下语法从 .properties 文件中检索值

```
#{base['msg']} 
```

有谁知道为什么我的应用程序似乎找不到这些语言环境文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T19:00:01.293

似乎我的属性文件位于错误的文件夹中：java/xxx/i18n 而不是 resources/xxx/i18n

替换属性文件后，我的问题就解决了。大家都感谢您的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:34:02.130

如果您的默认语言环境是“nl_NL”，那么请像这样更改您的 faces-config.xml。

```
 <application>
      <locale-config>
        <default-locale>nl_NL</default-locale>
        <supported-locale>en_US</supported-locale>
      </locale-config>
      <resource-bundle>
        <base-name>xxx.i18n.base_nl_NL</base-name>
        <var>msg</var>
      </resource-bundle>
   </application> 
```

还要确保属性文件的路径是否正确。

# google-calendar-api - Google Calendar API + 电子邮件通知 ics 文件

> ID：10846750
> 
> 赞同：2
> 
> 时间：2012-06-01T08:16:40.130
> 
> 标签：google-calendar-api, icalendar

我正在使用谷歌日历 API 在谷歌日历上创建事件，它工作正常。当我在 Google 日历中修改其中一个事件时，Google 可以通过电子邮件向我发送带有 .ics 文件的更新。

有没有办法通过电子邮件或 ics 文件确定 eventid，并在我使用 API 创建事件时将其绑定回 eventid？

例如，我想自动接收从 Google 日历发送的事件更改电子邮件，并在我的数据库中更新事件（我存储使用 API 添加事件返回的 eventid）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-19T06:47:14.910

在电子邮件的正文中，您应该有：

`<meta itemprop=3D"eventId/googleCalendar" content=3D"[your event id here]"/>`

但是，解析电子邮件并不是最好的方法。此处列出了首选方法：[https ://developers.google.com/google-apps/calendar/v3/sync](https://developers.google.com/google-apps/calendar/v3/sync)

如果您需要/想要一种推送方法，请在此处列出：[https ://developers.google.com/google-apps/calendar/v3/push](https://developers.google.com/google-apps/calendar/v3/push)

# rdlc - 如何使用 Visual Studio 2010 在 Reportviewer11 中的每一页上重复表格的标题行

> ID：10846752
> 
> 赞同：11
> 
> 时间：2012-06-01T08:16:44.227
> 
> 标签：rdlc

我正在尝试使用 VisualStudio2010 在 ReportViewer 11 上创建一些报告。我想在导出 execl 的每一页中重复表头。我在行组列表中将“RepeatOnNewPage”设置为“True”，将“KeepWithGroup”设置为“After”。但它仍然不起作用。

谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-03T12:01:31.340

单击列组左侧的黑色倒三角形并转到高级模式 ![高级模式小三角](../Images/7dc5b10f23d2a9d32678eab7a057e615.png)

您必须更改静态行的一些值：

```
1)      FixedData        True
2)      KeepTogether     True
3)      KeepWithGroup    After
4)      RepeatOnNewPage  True 
```

好的，现在您可能需要阅读更多详细信息

[链接 1](http://bidn.com/blogs/SMcDonald/bidn-blog/1696/scrolling-column-headers-static-header-columns) [链接 2](http://olsv.blogspot.com/2010/11/repeat-header-rows-on-each-page-fixed.html) [最后一个链接](http://blog.teamgrowth.net/index.php/net/how-to-repeat-header-rows-on-each-page-in-reportviewer-rdlc)

以上所有链接都以相同的方式解决了这个问题

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-05-30T20:24:39.860

这很可能是由于没有使用表格附带的默认标题，而是在详细信息组之外添加一行并将其用作标题。

不幸的是，我还没有找到使用设计器将行声明为表头的方法，到目前为止，我为 RDLC 报告找到的唯一工作选项是通过 XML 编辑器，如下所示：

1.  在 xml 编辑器中打开 RDLC 文件（右键单击 VS 中的文件并选择“Open With..”，然后选择“XML Editor”）

2.  搜索条目`<Tablix Name="your table name">`（如果您只有一个表，则可以发出此步骤）

3.  搜索条目（在`</tablix>`表格关闭之前）
    `<TablixRowHierarchy>`
      `<TablixMembers>`

4.  在第一个`<TablixMember>`节点（如果您的标题在表的第一行）添加以下条目“ `<RepeatOnNewPage>true</RepeatOnNewPage>`”，因此该条目通常如下所示：

    `<TablixMember>`
       `<KeepWithGroup>After</KeepWithGroup>`
       `<RepeatOnNewPage>true</RepeatOnNewPage>`
       `<KeepTogether>true</KeepTogether>`
    `</TablixMember>`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-15T12:38:48.113

谢谢乔治，这个链接对我很有帮助：http: [//blog.teamgrowth.net/index.php/net/how-to-repeat-header-rows-on-each-page-in-reportviewer-rdlc](http://blog.teamgrowth.net/index.php/net/how-to-repeat-header-rows-on-each-page-in-reportviewer-rdlc)

“现在，对行组列表中的所有“静态”行重复上述过程，除了不同组下存在的“静态”行（下图中用黑色圈起来），对详细信息组（用红色圈起来）做同样的事情:"

我的错误是我更改了“静态”行的值，而不是“详细信息”行！在我更改了 Static 和 Details 的这两个值后，一切正常： KeepWithGroup After RepeatOnNewPage True

# backbone.js - 使用 JavaScript 原型对象创建 Backbone.js 默认或新方法的任何问题

> ID：10846756
> 
> 赞同：0
> 
> 时间：2012-06-01T08:17:05.773
> 
> 标签：backbone.js, prototype

哪个性能更好？

一个）

```
var Library = Backbone.View.extend({
  initialize = function() {}
}); 
```

或者

二）

```
var Library = Backbone.View.extend({});
Library.prototype.initialize = function() {} 
```

我认为 B) 对于性能应该更好，因为 Library 对象的任何新实例都将继承并引用原型方法。

我会

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:14:56.813

我建议你使用官方的方式：

```
var Library = Backbone.View.extend({
  initialize: function() {}
}); 
```

我认为不会有任何性能差异，实际上（我认为）使用`prototype`正是*Underscore*对其`extend()`功能所做的。

# security - 如何在 CruiseControl.NET 安全性中为 simpleUser 和匿名设置权限

> ID：10846757
> 
> 赞同：2
> 
> 时间：2012-06-01T08:17:07.080
> 
> 标签：security, cruisecontrol.net

我希望匿名用户可以查看项目的状态和日志，但不能启动/停止/强制它们，而普通用户可以对项目做任何事情。但不知道cc.net是否支持匿名用户设置权限。

所以我查阅了文档并编写了以下配置，以确保“simpleuser”只能查看：

```
<internalSecurity>
  <users>
    <passwordUser name="a" password="1"/>
    <simpleUser name="*" />
  </users>
  <permissions>
    <rolePermission name="all" defaultRight="Allow">
      <users>
        <userName name="a"/>
      </users>
    </rolePermission>
    <rolePermission name="ViewOnly" defaultRight="Deny" viewConfiguration="Allow" viewProject="Allow" viewSecurity="Allow">
      <users>
        <userName name="*"/>
      </users>
    </rolePermission>
  </permissions>
</internalSecurity>

<project name="SQLBackup">
  <security type="defaultProjectSecurity">
    <permissions>
      <rolePermission name="all" ref="all" />
      <rolePermission name="ViewOnly" ref="ViewOnly" />
    </permissions>
  </security>
</project> 
```

但是 cc.net 1.6 告诉我，当我以“simpleuser”身份登录时，我没有“查看”权限。

怎么了？

有谁知道如何为 cc.net 服务器设置匿名用户的权限？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:29:12.070

您缺少“默认值”标签。：

```
<internalSecurity> 
    <users>
        <simpleUser name="*"/>
        ...
    </users>

    <defaults viewProject="Allow" defaultRight="Deny"/>

    <permissions>
    ...
    </permissions>

</internalSecurity> 
```

# android - Android NDK 和 Google Play 过滤

> ID：10846758
> 
> 赞同：11
> 
> 时间：2012-06-01T08:17:13.927
> 
> 标签：android, android-ndk, android-manifest, google-play, apk

Google Play 应用商店会自动将您的应用程序过滤到具有兼容 CPU 架构的设备上。例如，如果您有一个仅为 ARMv5 编译的库，那么您的应用程序将只显示在具有 ARMv5 或 ARMv7 处理器的设备上。

如果我有 Java 替代方案，并且希望我的应用程序也可以由非 ARM 设备下载怎么办？例如，我在尝试加载外部库时捕获了一个异常，并在 Dex 字节码 (Java) 中实现了一个可行的替代方案。

当我上传 .apk 时，Android 开发者控制台显示：“此 apk 请求 1 个本机平台，将用于 Google Play 过滤。armeabi”

我需要为 x86 和 MIPS 编译虚拟库吗？然后在我的 Java 代码中，检查处理器架构以了解我是否可以实际使用该库？应该有更好的解决方案。

据我所知，Manifest 中没有关于 CPU 架构的任何内容，而且我在开发者控制台中找不到关闭此过滤器的方法。

希望比我更了解 Google Play 过滤和 NDK 的人知道答案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-03T03:07:32.403

虽然对 loadLibrary 故障的捕获将适用于任何设备（至少我尝试过的所有设备，包括 GTV），但如果该平台的 ABI 在 apk 中不存在，Play Store 将不会显示在设备上。

来自文档（[http://developer.android.com/guide/appendix/market-filters.html](http://developer.android.com/guide/appendix/market-filters.html)）：包含针对特定平台（例如 ARM EABI v7 或 x86）的本机库的应用程序仅在支持该平台的设备。

理论上，为所有平台构建将能够针对所有设备，但实际上有一些设备（如 Google Tv）报告没有 ABI，这意味着只有没有本机代码的 apk 才会出现在这些设备上的 Play 商店中. 但是，您可以使用多个 apk，其中 1 个没有本机代码，1 个与支持您的本机代码的所有平台一起使用。

您可以在此处阅读有关多 apk 支持的信息：http: [//developer.android.com/guide/market/publishing/multiple-apks.html](http://developer.android.com/guide/market/publishing/multiple-apks.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-04T06:46:49.773

这里有同样问题的非常完整的答案：http: [//grokbase.com/t/gg/android-ndk/125v31e6wy/play-store-market-filtering-of-ndk-libs](http://grokbase.com/t/gg/android-ndk/125v31e6wy/play-store-market-filtering-of-ndk-libs)

让我发布我自己的解决方案，这与我在这里发布的几乎相同：[Android library .so with x86 architecture missing? （武佛利亚）](https://stackoverflow.com/questions/15146174/android-library-so-with-x86-architecture-missing-vuforia#comment21405056_15146174)

因此，您有一个无法在 x86 架构上编译的常规 Android.mk，因为您使用的库 (libExternalLibrary.so) 仅提供给 arm 架构。你想基于这个库构建一个 .so (libMyLibraryBasedOnExternalLibrary.so)，当然如果没有这个库，它永远不会在 x86 上编译。

这个想法是直接在 Android.mk 中使用条件编译指令为 x86 生成 Dummy 库。

1) 创建 2 个虚拟 .cpp 文件 Dummy0.cpp 和 Dummy1.cpp 示例 Dummy0.cpp 如下所示：

```
#include <jni.h>
#include <android/log.h>
#include <stdio.h>
#include <string.h>
#include <assert.h>
#include <math.h>
#include <string>

#ifdef __cplusplus
extern "C"
{
#endif

int dummy0                        =  0;

#ifdef __cplusplus
}
#endif 
```

然后，编辑构建你的库的 Android.mk 并像这样修改它：

```
LOCAL_PATH := $(call my-dir)

ifeq ($(TARGET_ARCH_ABI), armeabi)

# In this condtion block, we're compiling for arm architecture, and the libExternalLibrary.so is avaialble
# Put every thing the original Android.mk was doing here, importing the prebuilt library, compiling the shared library, etc...
# ...
# ...

else

# In this condtion block, we're not compiling for arm architecture, and the libExternalLibrary.so is not availalble.
# So we create a dummy library instead.

include $(CLEAR_VARS)
# when LOCAL_MODULE equals to ExternalLibrary, this will create a libExternalLibrary.so, which is exactly what we want to do.
LOCAL_MODULE := ExternalLibrary
LOCAL_SRC_FILES := Dummy0.cpp
include $(BUILD_SHARED_LIBRARY)

include $(CLEAR_VARS)
# This will create a libMyLibraryBasedOnExternalLibrary.so
LOCAL_MODULE := MyLibraryBasedOnExternalLibrary
# Don't forget to tell this library is based on ExternalLibrary, otherwise libExternalLibrary.so will not be copied in the libs/x86 directory
LOCAL_SHARED_LIBRARIES := ExternalLibrary
LOCAL_SRC_FILES := Dummy1.cpp
include $(BUILD_SHARED_LIBRARY)

endif 
```

当然，请确保在您的代码中，当您的应用在仅 x86 的设备上运行时，您永远不会调用该库：

```
if ((android.os.Build.CPU_ABI.equalsIgnoreCase("armeabi")) || (android.os.Build.CPU_ABI2.equalsIgnoreCase("armeabi"))) {
    // Good I can launch
    // Note that CPU_ABI2 is api level 8 (v2.2)
    // ...
} 
```

# javascript - 如何从数组中删除一个值？javascript

> ID：10846764
> 
> 赞同：2
> 
> 时间：2012-06-01T08:17:52.897
> 
> 标签：javascript, jquery, arrays, json

我因此创建了一个对象：

```
var savingArray = new Array({doctorId: "something", username: "something", password: "something", givenName: "something", familyName: "something", address: "something", zip:"something", emailAddress: "something", phoneNumber: "something", labs: "something", defaultLab: "something"}); 
```

现在我希望删除对象的每个值...我想以 saveArray 结束，这样：

```
savingArray == ({doctorId: "", username: "", password: "", givenName: "", familyName: "", address: "", zip:"", emailAddress: "", phoneNumber: "", labs: {}, defaultLab: ""}); 
```

所以我想要的只是将所有值更改为“”动态..

saveArray 从来没有相同的对象，所以不能这样做：

```
savingArray[0].doctorId = ""; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T08:20:29.607

```
for(var i = 0; i < savingArray.length; i++) {
    var obj = savingArray[i];
    for(var key in obj) {
        obj[key] = '';
    }
} 
```

或者，由于您使用的是 jQuery，您还可以使用它的`$.each()`函数进行迭代：

```
$.each(savingArray, function(i, obj) {
    $.each(obj, function(key, value) {
        obj[key] = '';
    });
}); 
```

如果修改了某些`Object.prototype`内容（例如，向其中添加了方法——通常不应该做的事情），您需要添加一个`if(obj.hasOwnProperty(key))`检查，并且只有在检查成功时才设置该值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T08:26:02.083

```
savingArray.forEach( function( el ) {
    Object.keys( el ).forEach( function( key ) {
        el[ key ] = '';
    });
}); 
```

`forEach`使用和的自解释代码`Object.keys`。这当然不适用于 IE6/7/8。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T08:20:25.240

是你要找的吗？

```
for (var i = 0; i < savingArray.length; i++) {
    for (var key in savingArray[i]) {
        if (savingArray[i].hasOwnProperty(key))
            savingArray[i][key] = "";
    }
} 
```

**演示：http:** [//jsfiddle.net/NfBqn/](http://jsfiddle.net/NfBqn/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T08:24:36.817

```
$.each(savingArray, function(index, obj) {
  $.each(obj, function(k, val) {
     obj[k] = "";
  });
}); 
```

**[演示](http://jsfiddle.net/thecodeparadox/Mf9jL/1/)**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-01T08:25:08.927

JavaScript 对象的属性可以被视为键值对，并且可以迭代对象，因此您需要做的是首先迭代数组中的对象

```
for(var i = 0;i < savingArray.length; i++)  { ... } 
```

然后遍历每个对象的属性。但是，您还想测试属性和对象之间的关系。把它们放在一起，你最终会得到这样的代码：

```
var i,prop,current;
//iterate over the objects in the array
for(i = 0;i<savingArray.length);i++){
  current = savingArray[i];
  //iterate over all the properties of the object
  for(prop in current){
     //test the relationship of the property and the object
     if(current.hasOwnProperty(prop)){
        //assign the empty string to the property
        current[prop] = "";
     } 
  }
} 
```

或在 jQuery 版本中

```
$.each(savingArray, function(i, obj) {
    $.each(obj, function(key) {
        if(obj.hasOwnProperty(key)){
           obj[key] = '';
        }
    });
}); 
```

我希望前者比 jQuery 性能更高，但发现 jQuery 更容易阅读，因为它更简洁

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-01T08:26:06.373

当您使用 jQuery 时，也可以使用它来循环数组和对象：

```
$.each(savingArray, function(i, item){
  $.each(item, function(key){
    item[key] = "";
  });
}); 
```

# html - 在谷歌浏览器中设置选择 HTML 项目的颜色

> ID：10846766
> 
> 赞同：0
> 
> 时间：2012-06-01T08:17:59.863
> 
> 标签：html, google-chrome, colors, html-select

我正在尝试在 HTML 中显示一个下拉列表。我设法在 Internet Explorer 中轻松地做到了这一点，但是当我在 google chrome 上使用它时遇到了问题。

我为 select 标签中的选项的背景颜色创建了以下 css：

```
option.red{background-color: #FF0000;}
option.green{background-color: #00FF00;}
option.blue{background-color: #0000FF;} 
```

然后，在我的选择标签中，我有

```
<option class="red" value="red" selected="selected" >blabla</option>
<option class="green" value="green">blabla</option>
<option class="blue" value="blue">blabla</option> 
```

在谷歌浏览器中，选项的背景颜色效果很好，第一个选项是默认选择的（我知道这是因为打印），但是选择项的背景颜色是白色的。

这很奇怪，因为它只在谷歌浏览器上这样做

如果有人知道如何将所选项目的颜色设置为其所选选项颜色的颜色，那就太好了

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T08:32:43.687

根据[现有答案](https://stackoverflow.com/a/2402266/28004)，您可以尝试以下操作：

```
var sel = document.getElementById('select_id');
sel.addEventListener('click', function(el){
    var options = this.children;
    for(var i=0; i < this.childElementCount; i++){
        options[i].style.color = 'gray';
    }
    var selected = this.children[this.selectedIndex];
        selected.style.color = 'red';
    }, false); 
```

> [**JSBin 示例**也可用](http://jsbin.com/ajokeg/edit#javascript,html,live)。

# cakephp - 添加功能出错

> ID：10846772
> 
> 赞同：0
> 
> 时间：2012-06-01T08:18:31.217
> 
> 标签：cakephp

在我的控制器中，我有 add($id = null) 函数。如果 iput add/43 它可以工作。但是如果任何验证失败它会重新加载而不添加/43。（显示错误消息后）。怎么办？.. 1.3 版 **控制器：**

```
 function add($id = null) {    
if (!empty($this->data)) {     
              $this->ConsultingDet->create();   
      if ($this->ConsultingDet->save($this->data)) {  
          $this->Session->setFlash('The consulting det has been saved', true);  
          $this->redirect(array('controller' => 'patients', 'action' => 'home'));  
      } else {  
          $this->Session->setFlash('The consulting det could not be saved. Please,     try   again.', true);  
      }  
  }  
  if (is_null($id)) {  
      $this->set('id', 0);  
  } 
```

}
**添加.ctp ：**

```
<div class="consultingDets form">
<?php echo $this->Form->create('ConsultingDet');?>  
<fieldset> 
    <div class="sub1">
        <?php

        echo $this->Form->input('patient_id', array('type' => 'hidden', 'value' => $patient['Patient']['id'])); 
        if ($id>0)       //This (id) brings out error on redirection
            echo $this->Form->input('id',array('type' => 'hidden', 'value' => $id));
            echo $this->Form->input('temperature');
        ?>            
    </div>         
</fieldset>
<?php echo $this->Form->end(__('Submit', true)); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:48:06.423

```
<?php echo $this->Form->create(null, array('url' => 
            array('controller' => 'consultingdets', 'action' => 'add', $id))); ?>
//<form action="consultingdets/add/43" 
```

基本上将`id`您需要的参数作为参数传递给表单。这样，当您提交并且验证失败时，蛋糕会重定向到正确的 URL（即使用您需要的 id 作为参数）

您的控制器名称可能不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:43:04.287

你可以试试这个：

```
function add($id = null) {    
   if (!empty($this->data)) {     
              $this->ConsultingDet->create();   
      if ($this->ConsultingDet->save($this->data)) {  
          $this->Session->setFlash('The consulting det has been saved', true);  
          $this->redirect(array('controller' => 'patients', 'action' => 'home'));  
      } else {  
          $this->Session->setFlash('The consulting det could not be saved. Please,   try   again.', true);  
          //redirect to referrer page
          $this->redirect($this->referer());           
      }  
  }  
  if (is_null($id)) {  
      $this->set('id', 0);  
  } 
```

# android - 强制关闭铃声选择器

> ID：10846773
> 
> 赞同：0
> 
> 时间：2012-06-01T08:18:38.927
> 
> 标签：android, android-intent, ringtone, runtimeexception

我的代码拒绝返回正确的 requestCode，所以我即兴创作了一点。它总是返回-1。

```
 if(v.getId() == R.id.imageButton9)
    {
        request = 888;
        Intent wpIntent = new Intent();
        wpIntent.setType("image/*");
        wpIntent.setAction(Intent.ACTION_GET_CONTENT);
        startActivityForResult(Intent.createChooser(wpIntent, "Select Picture"), SELECT_PICTURE);
    }

    else if(v.getId() == R.id.imageButton10)
    {
        String uri = null;
        request = 999;
        rtIntent = new Intent(RingtoneManager.ACTION_RINGTONE_PICKER);
        rtIntent.putExtra(RingtoneManager.EXTRA_RINGTONE_TYPE, RingtoneManager.TYPE_RINGTONE);
        rtIntent.putExtra(RingtoneManager.EXTRA_RINGTONE_TITLE, "Select Tone");
        if( uri != null)
        {
            rtIntent.putExtra(RingtoneManager.EXTRA_RINGTONE_EXISTING_URI, Uri.parse(uri));
        }
        else
        {
            rtIntent.putExtra(RingtoneManager.EXTRA_RINGTONE_EXISTING_URI, (Uri)null);
        }       
        this.startActivityForResult(rtIntent, SELECT_TONE);
    } 
```

我在代码开头声明了两个变量：

```
 protected static final int SELECT_PICTURE = 888;
protected static final int SELECT_TONE = 999; 
```

这是 onActivityResult：

```
 public void onActivityResult(int resultCode, int requestCode, Intent data)
{
    Toast.makeText(this, "onActivityResult: "+requestCode, Toast.LENGTH_SHORT).show();

    if(request == 888)
    {
        Toast.makeText(this, "Picture Selection", Toast.LENGTH_SHORT).show();
        Uri selectedImage = Uri.parse(data.getDataString());
        wpPath = getPath(selectedImage);
        Toast.makeText(this, "WP Path: "+wpPath, Toast.LENGTH_SHORT).show();
        request = 0;
    }

    else if(request == 999)
    {
        Toast.makeText(this, "Tone Selection", Toast.LENGTH_SHORT).show();
        Log.i("RT Picked is: ", rtIntent.getParcelableExtra(RingtoneManager.EXTRA_RINGTONE_PICKED_URI).toString());
        Uri uri = rtIntent.getParcelableExtra(RingtoneManager.EXTRA_RINGTONE_PICKED_URI);
        if (uri != null) 
        {
            rtPath = uri.toString();
            Toast.makeText(this, "Ringtone Path: "+rtPath, Toast.LENGTH_SHORT).show();
            request = 0;
        }
    }
} 
```

这总是强制关闭。它给出以下错误：

> 06-01 12:40:35.388: E/AndroidRuntime(7437): java.lang.RuntimeException: 传递结果失败 ResultInfo{who=null, request=999, result=-1, data=Intent { (有额外) }}到活动 {com.asim.autobot/com.asim.autobot.profile}：java.lang.NullPointerException

我被困住了。不能解决这个问题。

首先，为什么requestCode总是返回-1？其次，为什么应用程序强制关闭rtIntent.getParcelableExtra(RingtoneManager.EXTRA_RINGTONE_PICKED_URI);？

编辑：完整的 Logcat [http://i47.tinypic.com/1zm2gww.jpg](http://i47.tinypic.com/1zm2gww.jpg)

它指向的 Line 是 Log.i("RT Picked is: ", rtIntent.getParcelableExtra(RingtoneManager.EXTRA_RINGTONE_PICKED_URI).toString());

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T09:38:57.527

当你得到一个 resultCode 时，`-1`它​​的工作原理是[`RESULT_OK = -1`](http://developer.android.com/reference/android/app/Activity.html#RESULT_OK)

检查以下行：

```
rtIntent.getParcelableExtra(RingtoneManager.EXTRA_RINGTONE_PICKED_URI).toString() 
```

您有一个名为的参数`Intent data`，您应该使用它而不是`rtIntent`变量。您的 rtIntent 变量不会被修改，因此`getParcelableExtra(RingtoneManager.EXTRA_RINGTONE_PICKED_URI)`可能会返回 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:31:22.963

试试这个代码，

```
 public void onClick(View v) {

        switch (v.getId()) {
        case R.id.imageButton9:
            request = 888;
            Intent wpIntent = new Intent();
            wpIntent.setType("image/*");
            wpIntent.setAction(Intent.ACTION_GET_CONTENT);
            startActivityForResult(Intent.createChooser(wpIntent, "Select Picture"), SELECT_PICTURE);
        case R.id.imageButton10:

            String uri = null;
            request = 999;
            rtIntent = new Intent(RingtoneManager.ACTION_RINGTONE_PICKER);
            rtIntent.putExtra(RingtoneManager.EXTRA_RINGTONE_TYPE, RingtoneManager.TYPE_RINGTONE);
            rtIntent.putExtra(RingtoneManager.EXTRA_RINGTONE_TITLE, "Select Tone");
            if( uri != null)
                {
                    rtIntent.putExtra(RingtoneManager.EXTRA_RINGTONE_EXISTING_URI, Uri.parse(uri));
                }
            else
                {
                    rtIntent.putExtra(RingtoneManager.EXTRA_RINGTONE_EXISTING_URI, (Uri)null);
                }       
                        this.startActivityForResult(rtIntent, SELECT_TONE);

            break;
        default:
            break;
        }

    }

       public void onActivityResult(int resultCode, int requestCode, Intent data)
{
    Toast.makeText(this, "onActivityResult: "+requestCode, Toast.LENGTH_SHORT).show();

    if(requestCode == SELECT_PICTURE)
    {
        Toast.makeText(this, "Picture Selection", Toast.LENGTH_SHORT).show();
        Uri selectedImage = Uri.parse(data.getDataString());
        wpPath = getPath(selectedImage);
        Toast.makeText(this, "WP Path: "+wpPath, Toast.LENGTH_SHORT).show();
        request = 0;
    }

    else if(requestCode == SELECT_TONE)
    {
        Toast.makeText(this, "Tone Selection", Toast.LENGTH_SHORT).show();
        Log.i("RT Picked is: ", rtIntent.getParcelableExtra(RingtoneManager.EXTRA_RINGTONE_PICKED_URI).toString());
        Uri uri = rtIntent.getParcelableExtra(RingtoneManager.EXTRA_RINGTONE_PICKED_URI);
        if (uri != null) 
        {
            rtPath = uri.toString();
            Toast.makeText(this, "Ringtone Path: "+rtPath, Toast.LENGTH_SHORT).show();
            request = 0;
        }
    }
} 
```

# android - Android 4.0 以下版本的私有证书存储在什么位置？

> ID：10846774
> 
> 赞同：4
> 
> 时间：2012-06-01T08:18:43.587
> 
> 标签：android

我正在开发一个从 Android 密钥库读取私有证书和密钥的 Android 应用程序。

证书是在 Android`.p12`上使用设置 > 安全 > 从存储安装（凭据存储）从 SD 卡上的文件导入的。

在 4.0 及更高版本上，我可以从 Android [KeyChain](http://nelenkov.blogspot.com/2011/11/using-ics-keychain-api.html)获取证书和密钥。

我可以在低于 4.0 的 Android 版本上以编程方式获取此证书吗？

我可以看到证书并且可以从 WI-FI 设置中选择它，仅此而已。我尝试了“BKS”和“PKCS12”商店，但得到了一个空的结果集。我可以访问 CA 证书存储并获取 CA 证书数据，但这不是我需要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T08:33:00.313

密钥和证书被加密并存储在`/data/misc/keystore`. 但是，由于它们已被系统存储，因此您无权访问或解密它们。此外，没有用于此的公共 API。

# php - for 和 foreach 中的问题 - 区分

> ID：10846776
> 
> 赞同：0
> 
> 时间：2012-06-01T08:18:48.593
> 
> 标签：php, for-loop, foreach

我正在使用 foreach 和 for 创建一个逗号分隔的列表。下面是代码...

```
$timeofdaylist = "";
foreach($_POST['timeofday'] as $key => $value)
{
    if($timeofdaylist == "")
    {
        $timeofdaylist = "'".$value."'";
    }
    else
    {
        $timeofdaylist .= ",'".$value."'";
    }               
}
echo $timeofdaylist; 
```

上面的代码给了我一个逗号分隔的列表，如下所示：'AM','PM'

在这里，我的第一个条件`$timeofdaylist == ""`是按预期正常工作。

现在还有一段代码

```
$timeofdaylist = "";
var_dump($timeofdaylist);
for($i=0;$i<count($_POST['timeofday']);$i++) {          
    if($timeofdaylist == "") {
        $timeofdaylist = "'".$_POST['timeofday'][$i]."'";
    } else {
        $timeofdaylist = ",'".$_POST['timeofday'][$i]."'";
    }       
}
echo $timeofdaylist; 
```

上面的代码只打印最后一个值，像这样：,'PM'

我有 var_dumped timeofdaylist 并在我的第一个条件之前检查过`$timeofdaylist == ""`。它显示长度=0。

任何人都可以区分以上两段代码之间的区别吗？TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T08:22:41.183

`$timeofdaylist`因为您在每次迭代中重置变量，
所以它只包含数组的最后一个值

你的第一个例子，

`$timeofdaylist .= ",'".$value."'";`= 连接字符串

所以，我猜

```
$timeofdaylist .= ",'".$_POST['timeofday'][$i]."'"; 
```

假设拼写错误是问题的原因......

# .net - 简单但显示有关 WPF 和 MVVM 知识的面试任务

> ID：10846778
> 
> 赞同：1
> 
> 时间：2012-06-01T08:18:59.617
> 
> 标签：.net, wpf, mvvm

今天我将采访 WPF 开发人员，我想给他们一些简单的任务，但让他们有机会展示他们如何编写代码。我想知道的最重要的事情是人们如何理解 MVVM 模式。此外，很高兴看到他们是否了解线程、数据绑定、主题。你能建议这样的任务吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T14:11:06.063

任务是什么并不重要。重要的是所展示的技能。

因此，选择任何一个简单的小应用程序，并告诉他们您希望他们使用 MVVM 设计模式构建它，并在项目中演示线程、数据绑定和主题。

该应用程序甚至不必有一个现实的目的。它可能很简单

> 使用 MVVM 设计模式创建一个 2 屏应用程序，其中一个页面包含要选择的主题下拉列表，另一页面包含一个 TextBox，该文本框在短暂延迟后在后台线程上加载文本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T10:20:52.957

没有必要让他们编写代码来检查他们对 MVVM 的理解，您可以简单地给他们一个场景并让他们定义他们将定义哪些视图、ViewModel 和 Model 来构建这个应用程序。简单地讨论他们的设计将使您对他们的 MVVM 知识有足够的了解。

作为候选人，无论任务如何，我都不希望在一个小时左右（使用 WPF、MVVM、命令、线程等）内构建一个工作应用程序；

在编码任务方面，我发现最好的是 HR 在我喜欢的时间向我发送（邮件）明确定义的问题并指定时间限制，之后我需要向他们发送工作解决方案；后来一个技术人员根据我的解决方案进行了一轮面试，讨论了我所做的事情以及我为什么要做这样的事情等（这样你总是可以找出解决方案的真实性）。

过去我遇到过这种面试，这是一个展示我的知识和技能的好机会。

您可以提供的一些任务 -

1.  使用 MVVM 和 WPF 构建计算器；实现加法等简单操作，使 UI 灵活。

    您可以根据时间限制（如 log、mod、factorial 等）增加要实现的操作的数量和复杂性

    您还可以指定应异步执行特定操作（例如数字的阶乘）（使用后台工作程序、线程等）。

2.  创建一个简单的交易监视器，用户可以在其中添加新股票，股票列表将以网格状结构显示；模拟随机更改股票价格的方式，并根据更改类型（增量/减量）突出显示价格单元格

对于这两个任务，请指定您需要尽可能多地使用 WPF 功能，如 xaml、绑定、命令、模板、样式、触发器。

你可以在网上找到很多这样的任务；但无论遇到什么问题，关键是要有明确的任务，明确你的期望，并为候选人提供充足的时间和舒适的环境。当然还有审查讨论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T08:31:00.883

不错的 MVVM 东西 - 使用 DataTemplateSelector 的可切换视图和视图模型。

例如，您有以下内容：

1.  类型点：

```
public class Point
{
   public Point(int x, int y)
   {  
      this.X = x;
      this.Y = y;
   }

   public int X { get; private set; }
   public int Y { get; private set; }
} 
```

1.  点集
2.  单一主窗口

您需要设计应用程序，该应用程序将使用随机生成器在运行时生成不同的点集，并且每 N 秒将新数据集推送到 UI，UI 不应使用大型数据集冻结事件。应用程序用户应该能够通过单击按钮在不同的数据表示之间切换：网格视图、折线图视图。

*   网格视图基本上每行显示点，两列 X 和 Y
*   折线图视图显示趋势线

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T09:11:42.740

我一直想知道为什么人们倾向于给人们任务？通常问一些问题就足够了，这里戳一下，那里戳一下，你会发现更多关于你面前的人的知识水平。反正

*   向他询问将项目模板提供给 ItemsControl 的不同方法。

*   让他告诉你他对 Dispatcher 的了解。询问他将如何处理模型中的模型集合以及视图模型的外观。如果你强烈坚持 MVVM。

    类模型 { public ObservableCollection Children{get;set;} }

*   问他 UserControl 和 CustomControl 有什么区别。

*   静态资源和动态资源的区别

*   他将如何处理选择、多重选择和作用于该选择的命令

我知道你要求一个特定的任务，我认为这很难定义，这取决于你想从程序员那里得到什么。但也许这些点会给你一些想法来形成一个任务，或者你只是用它们来问他我之前说的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T10:48:40.513

为什么不让他们编写一个金融股票监控应用程序。给他们雅虎金融api的url（让你实时获取股票数据），然后他们可以编写一个应用程序来消费和显示实时数据

MVVM - 这可能是一个先决条件

DataBinding - 绑定到股票数据

线程 - 在后台线程上获取数据滴答声

主题 - 为什么不

然而，你冒着雇佣一个读过很多书但没有很多实际经验来完成工作的人的风险。最好让您拥有最热门的开发人员，以便为他们提供彻底的烧烤:)

# iphone - 如何找到作为选定控制段的子视图？

> ID：10846780
> 
> 赞同：1
> 
> 时间：2012-06-01T08:19:39.397
> 
> 标签：iphone, objective-c, ipad, uisegmentedcontrol

我正在查看[这个问题](https://stackoverflow.com/questions/2270526/uisegmentedcontrol-selected-segment-color)，想知道它是如何知道的或在哪里记录`[[segmentedControl subviews] objectAtIndex:0]`了当前选择的控制段？

那就是——我们怎么知道`objectAtIndex`要使用哪个号码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T08:45:56.173

如果您查看其他回复，您会发现他们正在寻找被选中的回复，即检查`isSelected`返回的内容

```
for (int i = 0; i < [sender.subviews count]; i++) 
{
  if ([[sender.subviews objectAtIndex:i]isSelected]) 
  {               
    ...
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:59:46.803

不得不说 Frowing 提到的代码可能会崩溃。需要进行类检查。

```
 for (int i = 0; i < [sender.subviews count]; i++) {
         UIView *seg = [sender.subviews objectAtIndex:i];
             if ([seg isKindOfClass:[UISegmentedControl class]]&&[seg isSelected]) 
             {               
             ...
             }
         } 
```

# android - 线性布局高度和重量

> ID：10846786
> 
> 赞同：6
> 
> 时间：2012-06-01T08:20:05.637
> 
> 标签：android, xml, android-layout, android-linearlayout

我有以下

```
<linearLayout>
<RelativeLayout>
    <!-- Header -->
</RelativeLayout>

<linearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:weightSum="6">

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1">
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1">
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1">
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1">
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1">
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1">
    </LinearLayout>

</linearLayout> 
```

但是，布局并没有假设正确填充高度，我希望一个线性布局低于另一个线性布局并占据父空间的 1/6。

相反，它似乎将权重应用于元素的宽度。

在Android中假设百分比高度的正确方法是什么？宽度似乎与重量轻而易举，但我似乎无法在高度上正确。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-01T08:24:29.177

默认情况下添加`android:orientation="vertical"`您的.`LinearLayout``android:orientation="horizontal"`

# php - 如何使用 facebook-opengraph 插件登录 yii

> ID：10846790
> 
> 赞同：4
> 
> 时间：2012-06-01T08:20:12.480
> 
> 标签：php, facebook, yii

嗨，我正在尝试使用 facebook graph api 通过 facebook 登录。我正在使用下面的代码来显示登录

```
<?php $this->widget('ext.yii-facebook-opengraph.plugins.LoginButton', array(
'show_faces'=>true,
'registration_url'=>'http://mysite/index.php/users/facebookregister',
'oauth'=>true,  // JS SDK -enable OAuth 2.0
)); ?> 
```

在重定向页面中我正在做

```
<?php $userinfo = Yii::app()->facebook->getInfo() // gets the Graph info of the current user ?>

but it gives me error
Property "LoginButton.oauth" is not defined. 

i am follwing this url to http://www.yiiframework.com/extension/facebook-opengraph/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T18:21:56.827

oauth 属性不是在小部件中分配，而是在配置文件（很可能是 main.php）的组件数组中分配。

```
'components'=>array(
  'facebook'=>array(
    'class' => 'ext.yii-facebook-opengraph.SFacebook',
    'appId'=>'YOUR_FACEBOOK_APP_ID', // needed for JS SDK, Social Plugins and PHP SDK
    'secret'=>'YOUR_FACEBOOK_APP_SECRET', // needed for the PHP SDK 
    //'locale'=>'en_US', // override locale setting (defaults to en_US)
    //'jsSdk'=>true, // don't include JS SDK
    //'async'=>true, // load JS SDK asynchronously
    //'jsCallback'=>false, // declare if you are going to be inserting any JS callbacks to the async JS SDK loader
    //'status'=>true, // JS SDK - check login status
    //'cookie'=>true, // JS SDK - enable cookies to allow the server to access the session
    //'oauth'=>true,  // JS SDK -enable OAuth 2.0
    //'xfbml'=>true,  // JS SDK - parse XFBML / html5 Social Plugins
    //'html5'=>true,  // use html5 Social Plugins instead of XFBML
    //'ogTags'=>array(  // set default OG tags
        //'title'=>'MY_WEBSITE_NAME',
        //'description'=>'MY_WEBSITE_DESCRIPTION',
        //'image'=>'URL_TO_WEBSITE_LOGO',
    //),
  ),
), 
```

# java - 兄弟姐妹的Graphviz顺序

> ID：10846795
> 
> 赞同：0
> 
> 时间：2012-06-01T08:20:27.383
> 
> 标签：java, graphviz, dot

每次我使用下面显示的方法将图形对象转换为点语言时 - 兄弟姐妹的顺序都会丢失。有没有办法避免这种情况？

```
StringWriter theGraph = new StringWriter();
graph.printGraph(theGraph);
theGraph.toString(); 
```

更新：

我的程序生成图形并在 java 小程序中显示它们。为了使它们格式化，我使用 GrappaSupport.filterGraph 函数将非格式化图形提供给 dot.exe 并取回格式化图形。该函数返回一个图形对象。但是，要将图形发送到小程序，我需要将其显示为字符串，因此我将其转换回点语言（使用上面给出的代码）。

我的程序生成的图表：

```
digraph "Graph" { 
    i168CF2[label="PROPERTY\n(2-cur.)" ]
    i168D02[style=filled, label="NAME\n(2-9, 13-cur.)", color=palegreen ]
    i168CF2->i168D02 
    i168D010[style=filled, label="NAME\n(10-12)", color=lightgrey ]
    i168CF2->i168D010 [color=lightgrey] 
    i168D22[style=filled, label="TEXT\n(2-9)", color=lightgrey ]
    i168CF2->i168D22 [color=lightgrey] 
    i168D210[style=filled, label="TEXT\n(10, 12-cur.)", color=palegreen ] 
    i168CF2->i168D210 
    i168D211[style=filled, label="TEXT\n(11)", color=lightgrey ] 
    i168CF2->i168D211 [color=lightgrey]  
} 
```

由 dot.exe 布局并转换回点语言图：

```
digraph "Graph" {
    graph [bb = "0,0,552,144"];
    i168D22 [
        height = "0.74639",
        style = filled,
        color = lightgray,
        width = "1.0344",
        label = "TEXT\n(2-9)",
        pos = "37,27"
    ];
    i168CF2 [
        height = "0.74639",
        width = "1.7589",
        label = "PROPERTY\n(2-cur.)",
        pos = "250,117"
     ];
    i168D211 [
        height = "0.74639",
        style = filled,
        color = lightgray,
        width = "1.0344",
        label = "TEXT\n(11)",
        pos = "130,27"
    ];
    i168D02 [
        height = "0.74639",
        style = filled,
        color = palegreen,
        width = "1.7826",
        label = "NAME\n(2-9, 13-cur.)",
        pos = "250,27"
    ];
    i168D210 [
        height = "0.74639",
        style = filled,
        color = palegreen,
        width = "1.6779",
        label = "TEXT\n(10, 12-cur.)",
        pos = "393,27"
    ];
    i168D010 [
        height = "0.74639",
        style = filled,
        color = lightgray,
        width = "1.1153",
        label = "NAME\n(10-12)",
        pos = "512,27"
    ];
    i168CF2 -> i168D010 [
        color = lightgray,
        pos = "e,481.77,44.917 304.57,103.17 347.98,92.22409.87,74.943462,54465.47,52.605 469.02,51.046 472.55,49.404"
    ];
    i168CF2 -> i168D210 [
            pos = "e,358.38,49.305 284.98,94.473 304.52,82.452 329.02,67.371 349.75,54.614"
    ];
    i168CF2 -> i168D22 [
            color = lightgray,
            pos = "e,65.486,44.636 200.92,99.814 167.46,88.26 122.43,71.686 84,54 80.855,52.553 77.634,50.978 74.425,49.344"
    ];
    i168CF2 -> i168D211 [
            color = lightgray,
            pos = "e,155.54,46.726 219.1,93.338 202.15,80.909 181.11,65.483 163.74,52.741"
    ];
    i168CF2 -> i168D02 [
            pos = "e,250,54.046 250,90.073 250,81.999 250,72.943 250,64.296"
    ]; 
```

}

如您所见，节点的 i168CF2 子节点的顺序从： **i168D02、i168D010、i168D22、i168D210、i168D211**

至： **i168D22、i168D211、i168D02、i168D210、i168D010**

有没有办法避免这种情况？这种洗牌发生在从图形对象到点语言的对话期间，而不是在使用 dot.exe 的自动布局期间（它返回相同的顺序）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:22:45.457

这可能不会解决您的问题，但以防万一：如果您的目标是*美化*点图，您可以考虑使用`dot`输出格式`canon`。从[文档](http://www.graphviz.org/content/output-formats#dcanon)中：

> 使用 canon 生成输入的漂亮打印版本，不执行布局。

这种转换尊重节点的出现顺序。

# objective-c - 水平分页的 UIScrollView 与每个视图之间的间隙 - 视图不居中

> ID：10846800
> 
> 赞同：2
> 
> 时间：2012-06-01T08:21:02.523
> 
> 标签：objective-c, gaps-in-visuals

Apple 的 WWDC 2010 教程视频“Designing Apps with Scroll Views”在 iOS 4 中运行良好，但在 iOS 5 中页面不居中：

![在此处输入图像描述](../Images/4bbb143fd0d8210787be82d60b3aad26.png)

看起来

```
pagingScrollViewFrame.origin.x -= PADDING; 
```

在 iOS 5 中不起作用。

我的代码如下：

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

#define PADDING  10

- (void)loadView 
{    

    // Step 1: make the outer paging scroll view
    CGRect pagingScrollViewFrame = [[UIScreen mainScreen] bounds];
    pagingScrollViewFrame.origin.x -= PADDING;
    pagingScrollViewFrame.size.width += (2 * PADDING);

    pagingScrollView = [[UIScrollView alloc] initWithFrame:pagingScrollViewFrame];
    pagingScrollView.pagingEnabled = YES;
    pagingScrollView.backgroundColor = [UIColor whiteColor];
    pagingScrollView.showsVerticalScrollIndicator = NO;
    pagingScrollView.showsHorizontalScrollIndicator = NO;
    pagingScrollView.contentSize = CGSizeMake(pagingScrollView.bounds.size.width * 6, pagingScrollView.bounds.size.height);
    pagingScrollView.delegate = self;
    self.view = pagingScrollView;

    for(int i = 0; i < 6; i++)
    {
        UIView *view = [[UIView alloc] init];
        view.backgroundColor = [UIColor blueColor];

        CGRect bounds = pagingScrollView.bounds;
        CGRect pageFrame = bounds;
        pageFrame.size.width -= (2 * PADDING);
        pageFrame.origin.x = (bounds.size.width * i) + PADDING;
        view.frame = pageFrame;
        [pagingScrollView addSubview:view];
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    [[UIApplication sharedApplication] setStatusBarHidden:YES   
                                    withAnimation:UIStatusBarAnimationSlide];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:29:24.673

```
pageFrame.origin.x = (bounds.size.width * i) + PADDING; 
```

将此部分更改为

```
pageFrame.origin.x = (bounds.size.width + PADDING) * i; 
```

# web-services - 如何在 Axis2 响应中删除包含 Web 服务方法的标签？

> ID：10846805
> 
> 赞同：1
> 
> 时间：2012-06-01T08:21:38.250
> 
> 标签：web-services, schema, axis2

我创建了一个使用 Axis2 框架的 Web 服务。我注意到为 Web 服务生成的响应总是在标签上包含 Web 服务方法名称。例如，如果 Web 服务方法是`/Login`，则响应将是这样的：

```
<ns:Login>
    <ns:return>
        00|Login Successful
    </ns:return>
</ns:Login> 
```

如何`ns:Login`从响应中删除？我不希望方法名称出现在标签上。另外，是否也可以删除`ns:return`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:25:09.187

不知道为什么您不想要这些标签（它们特定于soap 请求/响应），但您是否考虑过JSON XML 响应。[这](http://www.quirksmode.org/blog/archives/2005/12/the_ajax_respon.html)是一篇关于此的快速文章（带有示例 JSON XML 响应）。

# google-analytics - 谷歌分析结构

> ID：10846808
> 
> 赞同：0
> 
> 时间：2012-06-01T08:22:02.430
> 
> 标签：google-analytics, google-analytics-api

我正在尝试构建一个自定义分析应用程序。我只是想知道几件事。

Google Analytics 包含帐户，而帐户又包含 Web 属性，而 Web 属性反过来会为您提供配置文件 ID。

只是想知道 Accounts 可以有多个 Web Properties 并且 Web properties 有多个 Profile id 吗？

这些命名约定是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T02:12:46.533

你说对了。

Google Analytics（分析）帐户可以拥有多个网络资源，而这些网络资源又可以拥有多个配置文件。

当您将数据发送到 GA 时，您会将其发送到网络媒体资源。网络媒体资源 ID 的格式为 UA-123456-1。因此，网络媒体资源是您收集数据的地方。

配置文件是数据的可视化。如果您创建了许多配置文件，它们看起来完全一样，除非您实施过滤器来更改或过滤进入该配置文件的数据。

目标、广告细分、注释、预定电子邮件和警报都是配置文件的属性。

管理员有权访问其有权访问的帐户中的所有 WP 和配置文件。因此，帐户是组织 Access 的好方法。

具有正常“用户”访问权限的用户必须被授予对每个个人资料的访问权限。

# javascript - jQuery 运行函数 onload 和 key up

> ID：10846823
> 
> 赞同：5
> 
> 时间：2012-06-01T08:23:04.387
> 
> 标签：javascript, jquery, function

我有以下内容，我想在页面加载时第一次运行。然后我希望它在用户进行更改时在 keyup 上运行。我想运行的函数非常大（为了在此处发布而删减）所以我不想复制该函数。有没有办法调用函数 onload 然后在 keyup 上重用它？谢谢

```
 $(document).ready(function() {
     // this calculates the sum for some text nodes
     $("td, input").keyup(
        function (){
          var col_1revenue = $(".Col1Receipts, .Col1Receipts input").sum(); 
        } // function
      ); // keyup
    }); // document ready 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T08:25:24.260

一种简单的方法是创建一个函数，然后从两者中调用它：

`keyupfunction()`在页面加载完成以及 keyup 事件被触发时调用......这就是在编程语言中使用函数的全部目的。

```
$(document).ready(function() {
         keyupfunction(); //first call
         // this calculates the sum for some text nodes
         $("td, input").keyup(keyupfunction); // keyup
        }); // document ready 
```

常用功能

```
function keyupfunction(){
              var col_1revenue = $(".Col1Receipts, .Col1Receipts input").sum(); 
} // function 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T08:27:06.430

试试这个

```
$(document).ready(function() {
    XX();
    // this calculates the sum for some text nodes
    $("td, input").keyup(XX); // keyup

    function XX() {
        var col_1revenue = $(".Col1Receipts, .Col1Receiptsinput").sum();
    } // function    
}); // document ready​​​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T08:26:28.793

您可以在加载时触发该事件。

```
$("td, input").keyup(
  function (){
    var col_1revenue = $(".Col1Receipts, .Col1Receipts input").sum(); 
  } 
).keyup(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T08:27:41.677

如果你想在多个地方使用一个函数，不要让它匿名。匿名函数很难重用（在某些情况下，您仍然可以通过`callee`（不推荐）等方式重用它们）

而是命名函数。保持在`ready`要清洁的范围内：

```
 $(document).ready(function() {
     // this calculates the sum for some text nodes
     function myfunc(){
          var col_1revenue = $(".Col1Receipts, .Col1Receipts input").sum(); 
           //etc
             //etc
        } // function
     $("td, input").keyup(myfunc); // keyup
     myfunc()//call function;
    }); // document ready 
```

# java - 休眠中的嵌套条件因空指针异常而失败

> ID：10846826
> 
> 赞同：0
> 
> 时间：2012-06-01T08:23:21.230
> 
> 标签：java, hibernate, hql

我有 3 个实体

A、B 和 C

A 和 B
之间存在一对一关系 B 和 C 之间存在多对一关系

当我访问实体“A”时，我可以向下钻取并获取 C 的值

但是，当我的 HQL 中有嵌套条件时，我得到空指针异常

查询看起来像

`from(A) where A.B.C.some_parameter.eq(value)`

我已经添加了

`<property name="hibernate.max_fetch_depth" value="4" />`

在我的配置中，但我仍然不断收到 Null 指针异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:02:30.690

查询应该是..

```
"from A a where a.B.C.some_parameter = value" 
```

检查参考，Hibernate **Lazy**在 A、B 和 C 之间必须为假。您定义的属性我认为这与您的愿望没有任何依赖关系。此外，对于您执行查询的实体，必须具有从 A 到 C 的完整桥接以及您在 where 子句中使用的 C 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:05:19.027

那甚至不是远程有效的 HQL :)

1）您不要将实体引用包含在括号中；只是`from A`

2）您想进一步取消引用该 A 引用，因此通常您会将其别名为`from A a`

3) 假设 .eq 是进行相等比较的尝试，它的`where a.b.c.someProperty = value`

4) fetch_depth 在这里绝对没有影响。

# android - 进度条百分比计算

> ID：10846828
> 
> 赞同：0
> 
> 时间：2012-06-01T08:23:42.323
> 
> 标签：android, android-progressbar

我正在读取联系人并将联系人从我的电话簿写入 android sdcard。它已成功完成。现在我正在从 sdcard 以字节的形式读取文件。然后我必须在进度条中以百分比形式以增量形式显示读取的形式.现在，当我从 sdcard 读取的文件大小小于 100kb 时，进度条显示正确的百分比并正确递增。但是当电话簿中有很多联系人时，我的文件大小超过 100kb 或 200 kb 或 300kb 进度条增量未完成。百分比未计算，进度条未递增。请给我一些建议以解决问题。

# plone - Plone：我可以让@@manage-portlets 使用除 main_template.pt 之外的模板吗？

> ID：10846832
> 
> 赞同：1
> 
> 时间：2012-06-01T08:24:13.257
> 
> 标签：plone

我有一个备用主页模板 homepage.pt，它有不同的布局。但是，当我单击 manage-portlets 链接来编辑 portlet 时，它使用 main_template.pt 而不是 homepage.pt。有没有办法让@@manage-portlets 使用您正在编辑portlet 以供使用的页面的任何模板？它可以按原样工作，但布局与页面的实际外观完全不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T08:50:12.907

我们为此目的注册另一个页面并注册一个portal_actions对象动作

zcml:

```
<browser:page
    for="plone.portlets.interfaces.ILocalPortletAssignable"
    class="plone.app.portlets.browser.manage.ManageContextualPortlets"
    name="manage-homepageportlets"
    template="templates/managehomepageportlets.pt"
    permission="plone.app.portlets.ManagePortlets" /> 
```

看法：

```
class HomepageView(BrowserView):
    template = ViewPageTemplateFile('templates/homepage_view.pt') 
```

行动：

```
<object name="homepage portlets" meta_type="CMF Action">
   <property name="title">Homepage-portlets</property>
   <property name="url_expr">string:${portal_url}/@@manage-homepageportlets</property>
   <property name="available_expr">python: here.absolute_url() == portal_url</property>
   <property name="visible">True</property>
</object> 
```

模板：

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  metal:use-macro="context/main_template/macros/master"
  i18n:domain="plone">

<body>
<div metal:fill-slot="main">
    <h1 class="documentFirstHeading">Manage Homepage Portlets</h1>
    <h2>Top portlets</h2>
    <span tal:replace="structure provider:project.homepagetop" />
    <h2>Middle portlets</h2>
    <span tal:replace="structure provider:project.homepagemiddle" />
    <h2>Bottom portlets</h2>
    <span tal:replace="structure provider:project.homepagebottom" />
</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T04:57:17.747

所以，答案是肯定的，只是有点乱。您可以使用 plone.app.portlets 中的 manage-contextual.pt 替代模板，并更改 metal:use-macro 属性以使用您的自定义宏。我使用了 jbot 并命名了文件：

plone.app.portlets.browser.templates.manage-contextual.pt

做它应该做的。这将替换所有页面的管理 portlet 视图，包括使用 main_template.pt 的页面。不是无法克服，但有点烦人。我能想到几个解决方案：

1.  只需添加一个新的 manage-portlets-yourspecialtemplate 视图，其中包含 manage-contextual.pt 的副本，并进行修改以适合。这是最简单的方法，让我可以按照我最初的需要在上下文中编辑我的所有 portlet（包括那些已经存在的 portlet）。耶！
2.  我没有尝试过，但是如果您的主页只有一个带有 non-main_template.pt 模板的页面，那么您可以尝试为 Products.CMFPlone.interfaces.IPloneSiteRoot 接口注册一个 manage-portlets 视图。我没有尝试添加具有相同名称的视图（但适用于不同的界面），所以我不知道这是否有效。
3.  Some conditional logic in manage-contextual.pt that uses a different template based on whatever you use to distinguish whichever pages have different templates.

# python - 关于python类方法属性的问题

> ID：10846837
> 
> 赞同：2
> 
> 时间：2012-06-01T08:24:34.433
> 
> 标签：python

```
class test :

    def fn(self, i):
        #test.fn.f = 0     the "compiler" show "not define" errors
        #self.fn.f = 0     the "compiler" show "not define" errors

        return test.fn.f   #ok
        return self.fn.f   #ok

    fn.f = 1

p = test()

print p.fn(1) 
```

我只是好奇为什么我不能在“fn”方法中更改属性的值

本质上，它是...

`test.fn.f`和之间有什么区别`self.fn.f`？我确信修改函数的属性值是可以的，但为什么我可以在方法中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T08:45:07.673

会发生以下情况：

`fn.f = 1`给函数本身一个属性。

但是在使用`test.fn`and访问时`self.fn`，您不会得到函数本身，而是`instancemethod`. 为什么？因为在类中的属性访问中，`__get__`如果有任何组件的方法，就会调用该组件的方法。在函数的情况下，情况就是这样。

如果你调用一个函数的`__get__`方法，你把它变成一个绑定或未绑定的实例方法，它只是函数的一个包装器。

你可以应付

```
test.fn.im_func.f = 1
self.fn.im_func.f = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T08:40:21.873

您不能将任意属性分配给`instancemethod`. 该作业在班级主体内有效，因为那时它仍然是 a `function`；`instancemethod`在块的末尾创建类之前，它不会变成一个。

# android - 在 Android 中使用反射访问 Dtmf 功能

> ID：10846838
> 
> 赞同：0
> 
> 时间：2012-06-01T08:24:35.050
> 
> 标签：android, reflection, dtmf

每个人。我正在尝试使用反射访问 android.internal.telephony.CallManager 中的 sendDtmf 方法，以将这些音调发送到 IVR 语音。

代码如下：

```
import java.lang.reflect.Method;

import android.content.Context;
import android.util.Log;

public class RefelectionFactory {

public boolean sendDtmf(char c, Context context) throws IllegalArgumentException {

    try{
      @SuppressWarnings("rawtypes")
      //Class Phone = cl.loadClass("com.android.internal.telephony.Phone");

        ClassLoader classLoader = context.getClassLoader();
        final Class<?> classCallManager = classLoader.loadClass("com.android.internal.telephony.CallManager");

      //Parameters Types
      @SuppressWarnings("rawtypes")
      Class[] paramTypes= new Class[1];
      paramTypes[0]= Context.class;

      //Method get = Phone.getMethod("sendDtmf",  paramTypes);
      Method get = classCallManager.getMethod("sendDtmf",  paramTypes);
      get.setAccessible(true);

      //Parameters
      Object[] params= new Object[1];
      params[0]= context;

      get.invoke(null, params);

    }catch( IllegalArgumentException iAE ){
        throw iAE;
    }catch( Exception e ){
        Log.e("ERRORE", "sendDtmf", e);
    }
    return true;
}

} 
```

当我编译代码时，在 LogCat 中抛出这个异常：

```
java.lang.NoSuchMethodException: sendDtmf [class android.content.Context]
java.lang.Class.getConstructorOrMethod(Class.java:460)
java.lang.Class.getMethod(Class.java:915)
it.digitalnatives.*****.ricarica.RefelectionFactory.sendDtmf(RefelectionFactory.java:39)
it.digitalnatives.*****.ricarica.MainRicarica$2.onClick(MainRicarica.java:541)
android.view.View.performClick(View.java:3511)
android.view.View$PerformClick.run(View.java:14105)
android.os.Handler.handleCallback(Handler.java:605)
android.os.Handler.dispatchMessage(Handler.java:92)
android.os.Looper.loop(Looper.java:137)
android.app.ActivityThread.main(ActivityThread.java:4424)
java.lang.reflect.Method.invokeNative(Native Method)
java.lang.reflect.Method.invoke(Method.java:511)
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
dalvik.system.NativeStart.main(Native Method) 
```

我被这些东西困住了，我有一些要求。1）这段代码正确吗？2) classManager 类中确实存在 sendDtmf() 方法，如果是，我可以访问它吗？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:46:49.257

尝试一组不同的参数类型，我不记得`sendDtmf`曾经采用 a `Context`- ICS 和 2.3 版本都采用 a `char`，即`CallManager#sendDtmf(char c)`

我建议：

```
Class<?>[] paramTypes = new Class<?>[]{char.class};
Method get = classCallManager.getMethod("sendDtmf",  paramTypes); 
```

**编辑**：现在举个例子。

```
class Dtmf {
    private static final String CALL_MANAGER = "com.android.internal.telephony.CallManager";
    private static final String SEND_DTMF = "sendDtmf";
    private static final String GET_INSTANCE = "getInstance";
    private Method mSendDtmfMethod;
    private Object mCallManager;
    public Dtmf() {
        try {
            Class<?> callManagerClass = Class.forName(CALL_MANAGER);
            // Obtain an instance of CallManager
            Method getInstanceMethod = callManagerClass.getMethod(GET_INSTANCE);
            mCallManager = getInstanceMethod.invoke(null);
            // Get sendDtmf(char)
            Class<?>[] sendDtmfParamTypes = new Class<?>[]{char.class};
            mSendDtmfMethod = callManagerClass.getMethod(SEND_DTMF, sendDtmfParamTypes);
        } catch (ClassNotFoundException e) {
        } catch (NoSuchMethodException e) {
        } catch (IllegalArgumentException e) {
        } catch (IllegalAccessException e) {
        } catch (InvocationTargetException e) {
        }
    }

    public boolean sendDtmf(char ch) {
        boolean result = false;
        if (mCallManager != null && mSendDtmfMethod != null) {
            try {
                Object res = mSendDtmfMethod.invoke(mCallManager, 
                        new Object[]{Character.valueOf(ch)});

                if (res instanceof Boolean) {
                    result = ((Boolean) res).booleanValue(); 
                }
            } catch (IllegalArgumentException e) {
            } catch (IllegalAccessException e) {
            } catch (InvocationTargetException e) {
            }
        }
        return result;
    }
} 
```

不知道他们在呼叫管理器中设置了哪些保护措施——或者你作为用户应用程序是否能够成功调用此方法——但这个示例至少可以让你尝试。

# c# - asp web应用程序中的word文档查看器

> ID：10846841
> 
> 赞同：1
> 
> 时间：2012-06-01T08:24:45.690
> 
> 标签：c#, asp.net, com, activex

我必须使用 C# 创建一个 asp Web 应用程序以在表单（浏览器窗口）中显示 word 文档（docx）。是否有任何活动控件或 COM 组件可用于这意味着帮助实现它请帮助我...

# scala - 为什么我会从此代码中得到 MalformedInputException？

> ID：10846848
> 
> 赞同：22
> 
> 时间：2012-06-01T08:25:25.277
> 
> 标签：scala

我是 Scala 的新手，我想自己写一些源代码让我变得更好。我编写了一个简单的对象（带有一个主条目）以模拟对当前目录的所有文件的“grep”调用。（我从 Eclipse Indigo 和 Debian Squeeze 启动程序）：

```
package com.gmail.bernabe.laurent.scala.tests

import java.io.File

import scala.io.Source

object DealWithFiles {

  def main(args:Array[String]){
    for (result <- grepFilesHere(".*aur.*"))
      println(result)
  }

  private def grepFilesHere(pattern:String):Array[String] = {
    val filesHere = new File(".").listFiles

    def linesOfFile(file:File) =
      Source.fromFile(file).getLines.toList

    for (file <- filesHere;
        if file.isFile
    )
      yield linesOfFile(file)(0)
  }

} 
```

但我得到一个 java.nio.charset.MalformedInputException，我无法解决：

```
Exception in thread "main" java.nio.charset.MalformedInputException: Input length = 1
at java.nio.charset.CoderResult.throwException(CoderResult.java:260)
at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:319)
at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158)
at java.io.InputStreamReader.read(InputStreamReader.java:167)
at java.io.BufferedReader.fill(BufferedReader.java:136)
at java.io.BufferedReader.readLine(BufferedReader.java:299)
at java.io.BufferedReader.readLine(BufferedReader.java:362)
at scala.io.BufferedSource$BufferedLineIterator.hasNext(BufferedSource.scala:67)
at scala.collection.Iterator$class.foreach(Iterator.scala:772)
at scala.io.BufferedSource$BufferedLineIterator.foreach(BufferedSource.scala:43)
at scala.collection.generic.Growable$class.$plus$plus$eq(Growable.scala:48)
at scala.collection.mutable.ListBuffer.$plus$plus$eq(ListBuffer.scala:130)
at scala.collection.TraversableOnce$class.toList(TraversableOnce.scala:242)
at scala.io.BufferedSource$BufferedLineIterator.toList(BufferedSource.scala:43)
at com.gmail.bernabe.laurent.scala.tests.DealWithFiles$.linesOfFile$1(DealWithFiles.scala:18)
at com.gmail.bernabe.laurent.scala.tests.DealWithFiles$$anonfun$grepFilesHere$2.apply(DealWithFiles.scala:23)
at com.gmail.bernabe.laurent.scala.tests.DealWithFiles$$anonfun$grepFilesHere$2.apply(DealWithFiles.scala:20)
at scala.collection.TraversableLike$WithFilter$$anonfun$map$2.apply(TraversableLike.scala:697)
at scala.collection.IndexedSeqOptimized$class.foreach(IndexedSeqOptimized.scala:34)
at scala.collection.mutable.ArrayOps.foreach(ArrayOps.scala:38)
at scala.collection.TraversableLike$WithFilter.map(TraversableLike.scala:696)   
at com.gmail.bernabe.laurent.scala.tests.DealWithFiles$.grepFilesHere(DealWithFiles.scala:20)
at com.gmail.bernabe.laurent.scala.tests.DealWithFiles$.main(DealWithFiles.scala:10)
at com.gmail.bernabe.laurent.scala.tests.DealWithFiles.main(DealWithFiles.scala) 
```

在此先感谢您的帮助:)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-01T08:34:56.410

来自 JavaDoc：

> 当输入字节序列对于给定字符集不合法或输入字符序列不是合法的 16 位 Unicode 序列时抛出[MalformedInputException 。](http://docs.oracle.com/javase/7/docs/api/java/nio/charset/MalformedInputException.html)

将当前编码作为参数传递给`Source.fromFile`方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-10-15T07:54:11.710

您可以通过在代码中添加以下代码段来处理此字符编码异常

```
import scala.io.Codec
import java.nio.charset.CodingErrorAction

implicit val codec = Codec("UTF-8")
codec.onMalformedInput(CodingErrorAction.REPLACE)
codec.onUnmappableCharacter(CodingErrorAction.REPLACE) 
```

# php - 在 URL 中粘贴术语

> ID：10846857
> 
> 赞同：1
> 
> 时间：2012-06-01T08:26:20.660
> 
> 标签：php, javascript, html

我正在尝试找到一种创建简单动态 URL 的方法，该 URL 从人们输入内容的框中获取其信息。

我有一台谷歌搜索机并想参考它，所以基本上我想要两个框：一个用于选择要搜索的目录（谷歌机器在其索引中有不同的目录，我希望人们能够从中选择）和另一个是他们正在寻找的搜索词。

URL 如下所示： [http://searchengine.xx/search?q=SEARCHTERM&site=DIRECTORY&btnG=Suchen&entqr=0&ud=1&sort=date%3AD%3AL%3Ad1&output=xml_no_dtd&oe=UTF-8&ie=UTF-8](http://searchengine.xx/search?q=SEARCHTERM&site=DIRECTORY&btnG=Suchen&entqr=0&ud=1&sort=date%3AD%3AL%3Ad1&output=xml_no_dtd&oe=UTF-8&ie=UTF-8)

我用这样的PHP尝试过：

```
<?php
$directory = $_GET['searchterm'];

echo "http://searchengine.xx/search?q=".$searchterm."&site=directory&btnG=Suchen&  entqr=0&ud=1&sort=date%3AD%3AL%3Ad1&output=xml_no_dtd&oe=UTF-8&ie=UTF-8'>URL</a>
?> 
```

这似乎效果不佳，我想知道这是否可以通过任何其他方式（简单的 HTML，JavaScript 可能？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:44:30.687

尝试混合 php 和 htaccess ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:58:08.420

```
<?php
//get the text form the text box and put it in a variable eg.($text) 
$url = 'index.php?searchterms=$text';
header("Location: $url"); 
?> 
```

我认为这样的事情可能会奏效。

从文本框中获取文本，然后将文本放入变量中（我使用 $text 来举例说明）。将您想要的 url 放入一个变量中（我使用 $url 来举例说明），但在 url 的末尾按照我的方式放置 text 变量。最后，使用 header 函数重定向到您想要的 url。

希望我有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T12:44:37.243

您的问题中的 PHP 代码存在几个问题。$searchterm 永远不会被设置并且 echo 语句永远不会结束。试试这个：

```
<?php
    $searchterm = $_GET['searchterm'];
    $searchterm = strip_tags($searchterm);
    echo "<a href='http://searchengine.xx/search?q=".$searchterm."&site=directory&btnG=Suchen&entqr=0&ud=1&sort=date%3AD%3AL%3Ad1&output=xml_no_dtd&oe=UTF-8&ie=UTF-8'>URL</a>";
?> 
```

[strip_tags](http://php.net/manual/en/function.strip-tags.php)将确保`"`并被`'`删除，因此它不会破坏您的链接。

# php - PHPUnit 中模型的 Zend 自动加载

> ID：10846859
> 
> 赞同：3
> 
> 时间：2012-06-01T08:26:30.660
> 
> 标签：php, zend-framework, phpunit

我正在尝试为我正在编写的 ZF 应用程序编写一些测试用例，但我似乎无法超越这一点。

我扩展了`Zend_Test_PHPUnit_ControllerTestCase`，添加了以下内容：

```
public function setUp() {
    $this->bootstrap = new Zend_Application('testing', 
        APPLICATION_PATH . '/configs/application.ini');
    parent::setUp();
} 
```

它工作，它初始化 Zend Autoloader，允许我在我的库中加载其他类以及 Zend 类。所以我设置了一个测试：

```
public function testUserUnauthorized() {
    $this->dispatch('/api/user');
    //Assertions...
} 
```

可悲的是，测试从未通过调度。相反，它给了我一个错误：

```
Fatal error: Class 'App_Model_User' not found in ....Action.php 
```

Action.php 是一个扩展类`Zend_Controller_Action`。其中，有一个`App_Model_User`用于验证登录用户的功能。`require_once`自从自动加载器工作以来，我从来不需要添加一个。这是奇怪的部分：它通过我的浏览器工作。只是不在 PHPUnit 中。

所以我转储了用 Zend Autoloader 注册的 Autoloader：

```
public function testUserUnauthorized() {
    print_r(Zend_Loader_Autoloader::getInstance()->getAutoloaders());
    exit;
    $this->dispatch('/api/user');
} 
```

它显示了我的所有模块，以及视图、控制器、模型等的命名空间。我通过浏览器做了同样的事情，并且转储匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T16:11:44.977

Zend Autoloader 需要将 App_ 添加为自动加载前缀，才能按预期工作，如下所示：

```
$autoloader = Zend_Loader_Autoloader::getInstance();
$autoloader->registerNamespace("App_"); 
```

# git - 是否有适用于 Windows 的轻量级 git 客户端？

> ID：10846862
> 
> 赞同：7
> 
> 时间：2012-06-01T08:26:55.823
> 
> 标签：git

是否有适用于 Windows 的**轻量级git 客户端？**

我安装了依赖于 msysgit 的 TortoiseGit。msysgit 安装约为 1.6GB，这让我大吃一惊。我以为只有甲骨文可以膨胀这样的软件:)

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T10:17:14.897

最新的 Git for Windows 1.7.10.x 在我的硬盘上占用了 208M。您观察到的问题是您用来检查安装大小的软件不支持 NTFS 硬链接。例如，如果您在“文件链接”模式 ( ) 中`libexec`使用最新版本的[FAR](http://farmanager.com)`Ctrl-9`查看子目录，您会看到大多数二进制文件都有 107 个链接，因为它们都真正链接到一个可执行文件。

另一个问题是，这是 Windows，Git 的某些部分是作为 Unix shell 脚本或在 Perl 中实现的，它的两个标准 GUI 前端（`git gui`和`gitk`）是在 Tcl/Tk 中实现的；在典型的 GNU/Linux（或 *BSD 或其他）系统中，您将在系统范围内安装这些依赖的运行时，但用于 Windows 的 Git 注定要随身携带它们，因为它没有可以依赖的健全的打包系统。

有一些尝试进行干净的房间重新实现，例如[`libgit2`](http://libgit2.github.com/)可以用来实现轻量级 Git 客户端，但与成熟的 Git 相比，所有这些尝试都严重缺乏功能，并且可能会继续这样做，因为 Git 本身也在不断发展。

简而言之：我会放松并继续使用适用于 Windows 的 Git。;-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T08:27:20.213

试用[GitHub for Windows](http://windows.github.com/)客户端。即使它具有一些特定于 github 的功能，您也不*需要*将 repos 放在 github 中。

如果你不喜欢地铁风格，你也不会喜欢它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-01T08:28:16.983

查看**GitExtensions**：

[http://code.google.com/p/gitextensions/](http://code.google.com/p/gitextensions/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T09:59:42.663

你如何获得 1.6GB 的 msysgit？

我`C:/Program Files/Git`的包含 msysgit 的目录“只有”222MB。

如果你想节省空间：放弃 Tortoise，使用 git 控制台，这（[不仅在我看来](https://stackoverflow.com/a/5645910/520162)）是释放 Git 全部力量的正确方法。

# java - 引用的Java类字段？

> ID：10846864
> 
> 赞同：4
> 
> 时间：2012-06-01T08:27:12.350
> 
> 标签：java, object, reference, static, field

我创建了以下测试来了解 Java 如何处理对象，这让我很困惑。

```
public class MyClass
{
    public String text = "original";
    public MyClass(String text)
    {
        this.text = text;
    }
} 
```

然后我创建了以下 2 个场景：

1.

```
String object1 = new String("original");
String object2 = new String("original");
object2 = object1;
object2 = "changed";
System.out.println(object1);
System.out.println(object2); 
```

结果：

```
original
changed 
```

2.

```
MyClass object1 = new MyClass("object1");
MyClass object2 = new MyClass("object2");
object2 = object1;
object2.text = "changed";
System.out.println(object1.text);
System.out.println(object2.text); 
```

结果：

```
changed
changed 
```

现在为什么文本字段像静态字段一样共享？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T08:30:16.583

> 现在为什么文本字段像静态字段一样共享？

看看这一行：

```
object2 = object1; 
```

那就是将变量的值设置为与`object2`变量的值相同`object1`。这些变量值都是对对象的*引用*——它们本身不是对象。

所以在那一行之后，两个变量的值都指向同一个对象。如果您通过一个变量更改对象，您仍然会通过另一个变量看到该更改。用现实世界的话来说：假设你有两张纸条，每张纸条上都有你的家庭住址，然后把它们交给两个不同的人。第一个去把你的前门涂成红色，然后第二个去参观你的房子——他们仍然会看到一个红色的前门。

区分三个概念非常重要：

*   对象
*   变量
*   参考

变量（或任何其他表达式，实际上）的值*始终*是原始值（`int`等`char`）或引用。它*永远不是*一个完整的对象。

改变一个变量的值*永远不会*改变另一个变量的值，所以这里：

```
String object1 = new String("original");
String object2 = new String("original");
object2 = object1;
object2 = "changed"; 
```

...我们将`object2`once 的值更改为与 相同的值`object1`，然后更改为不同的值，指的是`String`带有文本“已更改”的对象。**这永远不会改变`object1`**.

这有帮助吗？如果不是，请询问非常具体的案例 - 最简单的方法是详细区分几种情况而不是一概而论。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T10:55:47.917

用于解释此行为的图示

**第1步。**

```
MyClass object1 = new MyClass("object1");
MyClass object2 = new MyClass("object2"); 
```

**第2步。**

```
object2 = object1; 
```

**第三步。**

```
object2.text = "changed"; 
```

![在此处输入图像描述](../Images/5f3a3396ec8d7914aad063935c3dba4d.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T08:35:10.763

**对象2 =对象1；**在此**object2****引用 object1**所引用的同一对象之后。

**object2.text = "改变";** 这里**text**的值发生了**变化**。现在由于**object1**和**object2**都引用同一个对象，所以输出是相同的。

# google-chrome - 在 Chrome 上运行测试时出现奇怪的问题？

> ID：10846865
> 
> 赞同：1
> 
> 时间：2012-06-01T08:27:15.127
> 
> 标签：google-chrome, selenium, watir

我正在尝试在 Chrome 上运行一些简单的测试，并且我已按照所有必需的步骤进行操作。测试开始正常，Chrome 浏览器打开并正确初始化（似乎），但是当我的测试开始搜索对象并检查网页上的值时。（例如 [@browser.div(:id, "example").text.should == "test"] 或 [puts @browser.div(:id, "example").text] ）我得到下一个错误并且我的测试失败：“Selenium::WebDriver::Error::UnkownError:”。就是这样，仅出现此消息，没有有关错误的线索或详细信息。

我根本不知道要寻找答案。我什至尝试调试测试但没有结果。我什至在 chromedriver 上搜索已知问题，但一无所获。

另一件要提的是，我创建的测试套件是用于跨浏览器测试的。这些测试在 Firefox 上运行良好。

我在初始化 Chrome 浏览器时做错了吗？这是我的 env 文件中的代码：

```
require "rubygems"
require "rspec"
require "watir-webdriver"
require "watir-webdriver/extensions/alerts"

if ENV["HEADLESS"] then
  include Selenium
  capabilities = WebDriver::Remote::Capabilities.htmlunit(:javascript_enabled => true)
  browser = Watir::Browser.new(:remote, :url => "http://127.0.0.1:4444/wd/hub", :desired_capabilities => capabilities)
elsif ENV["FIREFOX"] then
  browser = Watir::Browser.new :firefox
elsif ENV["CHROME"] then
  browser = Watir::Browser.new :chrome
elsif ENV["IE"] then
  browser = Watir::Browser.new :ie
else
  browser = Watir::Browser.new :chrome
end

Before do
  @browser = browser
end

at_exit do
  browser.close
end 
```

我也尝试过使用 selenium-webdriver gem 中的最新版本，然后使用旧版本 2.21.0。结果是一样的。

你能告诉我我做错了什么吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:41:45.033

好吧，显然我没有检查最新版本的 chromedriver :)。问题停止重现的版本是 2012 年 5 月 23 日的版本。感谢您的提示 Željko！

# iphone - 使用 UInavigationcontroller 从右侧推送视图控制器的最佳方式是什么？

> ID：10846866
> 
> 赞同：0
> 
> 时间：2012-06-01T08:27:19.660
> 
> 标签：iphone, uinavigationcontroller, pushviewcontroller, popviewcontroller

我想知道如何使用 UINavigationController 但从**左侧**推送视图控制器。现在我知道两种方法

1) 使用 UIAnimations...

2）使用弹出视图控制器而不是推送！

好吧，当应用程序具有复杂的堆栈时，似乎上述方法似乎不是合适的实现方法。

如果你们知道其他方法；请分享你的知识

问候扎胡尔

让我试着深入挖掘一下这个问题。

假设一个基于窗口的应用程序有 spiltview 控制器，主视图有 tabview 控制器，每个选项卡都有一个 uinavigation 控制器；又名内容视图控制器；管理堆栈变得相当复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T08:45:27.813

目前，推入 UINavigationController 会从右向左推入 viewController。

弹出从左到右弹出 viewController。

这是用户期望的行为。

如果你试图改变这一点，我觉得你会违反 Apple 的人机界面指南并让你的用户感到困惑。所以我说你不应该这样做。

你的数据/堆栈结构是什么让你认为这是个好主意？我问，也许有更好的方法。

# css - CSS 无法在 Firefox、Opera 和 IE 中加载 - Chrome 和 Safari 运行良好

> ID：10846868
> 
> 赞同：1
> 
> 时间：2012-06-01T08:27:21.600
> 
> 标签：css, firefox, safari, opera

我在网站建设中遇到了一些问题，关键是在 Chrome 和 Safari 中它工作得很好，但在 Firefox、Opera 和 Internet Explorer 中并不完全相同。

[在这里查看网站！](http://www.dev.alectryon.pt)

您可以在我提到的浏览器中尝试它，并确认我刚才所说的。

有小费吗 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T08:30:35.967

嘿 更改为您的 css 类型

你定义`type="text/javascript"`它是错误的

```
just define type="text/css" 
```

* * *

现在改变这个

```
 <link rel="stylesheet" type="text/javascript" href="estilos/estilos.css"> 
```

进入

```
<link rel="stylesheet" type="text/css" href="estilos/estilos.css"> 
```

# jquery - Jquery 滚动轮播在 ie7 中不起作用

> ID：10846869
> 
> 赞同：1
> 
> 时间：2012-06-01T08:27:23.337
> 
> 标签：jquery, internet-explorer-7, carousel

我陷入了一个问题...

Jq Scrollingcarousel 参考： http: [//www.convergent-evolution.co.uk/resources/jquery-plugins/scrolling-carousel/](http://www.convergent-evolution.co.uk/resources/jquery-plugins/scrolling-carousel/)

这是我正在做的过程...... [http://jsfiddle.net/BnwLh/1/](http://jsfiddle.net/BnwLh/1/)

问题是，在我的网站中，除了在 IE7 中之外，它运行平稳......它仍然在 ie7 中......

在上面的 jsfiddle 链接中，目前无法正常工作.. 任何人都可以修复它吗？

* * *

在这个轮播中，我正在尝试为其添加更多功能，因此我向左和向右添加了两个按钮...如果您将鼠标悬停在左侧，它应该向左移动，如果您将鼠标悬停在右侧，它应该向右移动...

我正在尝试使用此代码：

```
$("a.prev-go").mouseover(function() {
$('#carousel-demo1').scrollingCarousel();
});
$("a.next-go").mouseover(function() {
$('#carousel-demo1').scrollingCarousel(); 
}); 
```

[http://jsfiddle.net/xLhmS/1/](http://jsfiddle.net/xLhmS/1/)

但它不适合我....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:25:41.770

```
 $(document).ready(function() {
     $('#carousel-demo1').scrollingCarousel( {
        scrollerAlignment : "horizontal",
        autoScroll : true,
        autoScrollSpeed : 10000,
        scrollSpeed : "slow",
        scrollerOffset : 0,
        looped : true // for IE7 i put it to the end of the code and it worked well.
    }); 
}); // you forgot to add it at the end of the JQuery 
```

[工作示例 Jsfiddle](http://jsfiddle.net/agriboz/BnwLh/8/)

# asp.net-mvc - 我可以在 .NET 4.0 下编译和运行 MVC1.0 应用程序吗？

> ID：10846870
> 
> 赞同：4
> 
> 时间：2012-06-01T08:27:23.457
> 
> 标签：asp.net-mvc, asp.net-4.0

我们有一个 MVC1.0 应用程序，它是针对 .Net Framework 3.5 编译并运行的。

对应用程序进行了安全扫描，扫描组织报告了

> Microsoft ASP.NET ValidateRequest 过滤器绕过跨站点脚本漏洞

[https://community.quallys.com/docs/DOC-3495](https://community.qualys.com/docs/DOC-3495)

> 哪些版本的 Microsoft ASP.NET 易受攻击？Microsoft 已确认 ASP.NET 版本 1 和 2 均易受攻击。此外，Qualys 已确认 ASP.NET 版本 3 也存在漏洞，因为它默认包含版本 2 中的易受攻击组件。我们已经在我们的实验室中对此进行了测试，并确认该漏洞可在完全修补的版本 3 上运行。

我们已经将我们的应用程序升级到 MVC3，但这需要更多时间才能完成。

我是否有机会针对 .NET 4.0 运行和编译 MVC1.0 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T05:05:50.387

这可能会出现兼容性问题，即使对 .net 框架的依赖很少。您可以参考以下帖子。

[ASP.NET MVC 1 向前兼容 ASP.NET MVC 2 吗？](https://stackoverflow.com/questions/2202455/is-asp-net-mvc-1-forwards-compatible-with-asp-net-mvc-2) [Visual Studio 2010 中的 ASP.Net MVC 1.0](https://stackoverflow.com/questions/2232368/asp-net-mvc-1-0-in-visual-studio-2010)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T19:37:41.463

据我了解，在 .NET 3.5 上运行的任何东西都应该在 .NET 4.0 中正常运行和编译，可能会出现一些关于折旧函数的警告，但它们仍然可以工作。

如果您仍然好奇/不舒服，可以使用一些工具来帮助验证依赖关系和其他项目，例如[NDepend](http://www.ndepend.com/Features.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T00:03:53.327

最好的推荐......试试吧！除了汤米提到的不推荐使用的功能之外，我想不出任何其他原因。此外，您可以更新您的大部分参考资料

```
Update-Package 
```

没有论据。

如果编译正常，请对视图进行快速测试。如果似乎没有任何损坏，那么它可能不是。

# http - iCal - 远程查询过滤器

> ID：10846873
> 
> 赞同：2
> 
> 时间：2012-06-01T08:27:31.430
> 
> 标签：http, icalendar

也许是愚蠢的问题，但我想知道 iCal 客户端如何查询远程日历。

我刚刚创建了一个生成 iCal 文件的小 Web 服务。该文件被 Google Calendar 和 Lightning（新 Sunbird）成功解释。但我没有在任何时间范围内进行过滤。

我想谷歌和 Sunbird 客户至少会提供参数来过滤日期。

我怎么知道这些参数是什么？它是 iCal RFC 的一部分吗？

有人可以指出好的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T10:17:34.613

当您只是“订阅”时，您只是在下载整个文件，仅此而已。没有过滤。

但是，当您谈论同步时，您需要查看的地方是 CalDAV。

[https://www.rfc-editor.org/rfc/rfc4791](https://www.rfc-editor.org/rfc/rfc4791)

这是大多数主要日历应用程序使用的基于 WebDAV 的协议，并且可以执行时间范围过滤和双向同步等操作。

# git - 将最后一个 git 提交移动（或“撤消”）到未暂存区域

> ID：10846875
> 
> 赞同：190
> 
> 时间：2012-06-01T08:27:38.513
> 
> 标签：git

将您的最后一个 git 提交移回“未暂存的更改”+“未跟踪的文件”区域的最佳方法是什么（有问题的提交未推送/仅在您的本地存储库中，有效地将其从 HEAD 中删除）？

换句话说，您如何回滚提交，但自动将该差异应用到您的未暂存区域？

* * *

## 回答 #1

> 赞同：349
> 
> 时间：2012-06-01T08:33:15.293

您可以使用[`git reset`](https://git-scm.com/docs/git-reset)将当前分支设置为先前的提交，即[`HEAD^`](https://git-scm.com/docs/gitrevisions#Documentation/gitrevisions.txt-emltrevgtltngtemegemHEADv1510em)

```
git reset HEAD^ 
```

添加`--soft`会将这些文件保留在*索引*中：（准备提交）

```
git reset --soft HEAD^ 
```

> `--soft`
> 
> (...) 这会留下所有更改的文件“要提交的更改”，就像 git status 所说的那样。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-06-16T22:59:28.660

[git-extras](https://github.com/tj/git-extras)提供了一个`git undo`命令，它更容易记住做同样事情的方式（以及许多其他方便的附加功能，顾名思义）。

# jquery - JQuery Cycle，如何在转换之间设置不同的间隔

> ID：10846884
> 
> 赞同：0
> 
> 时间：2012-06-01T08:28:24.580
> 
> 标签：jquery, jquery-plugins, jquery-cycle

我正在使用 JQuery 循环为我的主页进行幻灯片放映。主要思想是某些图像组一起出现，所以我想同步间隔一些我有以下模式 1-2-3 -> 1-4-3 -> 5-4-6 -> 1- 4-3 -> 1-2-3 ->...（假设我有图像 1,2,3,4,5,6，例如 1-2-3 显示图像 1 和 2 和 3 一起出现, 和 -> 显示转换）。这是我的代码：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<style type="text/css">
pre { display:none }
#main h2 { text-align: center }
#right { cursor: pointer }
</style>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script type="text/javascript" src="http://malsup.github.com/jquery.cycle.all.js"></script>
<script type="text/javascript">

$(function() {
// run the code in the markup!
$('#demos pre code').each(function() {
    eval($(this).text());
});

});
</script>
</head>
<body>

<div id="main">

<div id="demos">
 <div id="slider">

    <div id="bxo" class="pics">
        <img id="letter-b" src="01.jpg" width="300" height="330" />
        <img id="veggi1" src="02.jpg" width="300" height="330" />
        <img id="letter-o" src="03.jpg" width="300" height="330" />

    </div>
    <div id="bio" class="pics">
        <img id="letter-b" src="01.jpg" width="300" height="330" />
        <img id="letter-i" src="05.jpg" width="300" height="330" />
        <img id="letter-o" src="03.jpg" width="300" height="330" />
    </div>
    <div id="xix" class="pics">
        <img  id="veggi2" src="04.jpg" width="300" height="330" />
        <img id="letter-i" src="05.jpg" width="300" height="330" />
        <img  id="veggi3" src="06.jpg" width="300" height="330" />
    </div>
    <div id="bio" class="pics">
        <img id="letter-b" src="01.jpg" width="300" height="330" />
        <img id="letter-i" src="05.jpg" width="300" height="330" />
        <img id="letter-o" src="03.jpg" width="300" height="330" />
    </div>

       </div>
       <pre><code class="mix">$('#slider').cycle(
    { 
                    fx:     'fade', 
                    speed:   500, 
                    timeout: 3000, 
                    pause:   1 
                    });
                    </code></pre>
 </body>
 </html> 
```

现在我需要一些幻灯片在短时间内出现。因此我需要为幻灯片定义不同的速度。我需要这样的模式：1-2-3 -----> 1-4-3 -> 5-4-6 -----> 1-4-3 -> 1-2-3 -- --->（我需要两种速度，一种快，一种慢，较长的箭头表示慢速转换，而较短的箭头表示快速转换）。我正在考虑定义一个自定义转换以获取两个速度值并在每个周期中在它们之间切换，但我不知道如何使用 JQuery Cycle 来实现它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T10:24:13.993

我通过稍微修改插件解决了这个问题，在 JQuery Cycle 源代码中，在每个转换中执行的函数是`function go(els, opts, manual, fwd)`所以我简单地定义了一个全局变量，它在每个转换中都会增加，并用它来减少每个转换中的超时奇怪的过渡。像这样的东西：

```
function go(els, opts, manual, fwd) {
    $.cycleno++;
    if($.cycleno%2==0)
        opts.timeout=3000;
    else
        opts.timeout=10;
    ....
} 
```

现在我有了我想要的效果：slide1 -----> slide2 -> slide3 -----> slide4 -> slide5 ----->...

# c# - 以编程方式按下网页上的按钮

> ID：10846886
> 
> 赞同：3
> 
> 时间：2012-06-01T08:28:42.133
> 
> 标签：c#, asp.net, .net, button

我们的 Intranet 上有一个网页，该网页`http://server1/rsyncwebgui.php`为我们提供了一种在两个文件共享之间触发 rSync 的快速方法。出于无趣的安全原因，这是我们必须采取的路线。

网页如下所示：

```
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
  <title>Rsync web gui</title>
</head>
<body>
  <script language="javascript">
    window.onload = function () { setTimeout(submitForm, 10000); }
    function submitForm() { document.getElementById('myform').submit(); }
  </script>
<h3> Execute rsync between server2 and server3</h3>
<form id="myform" method="POST">
  <input type="hidden" name="resync" value="false">
  <input type="hidden" name="scanscheduled" value="false">
  <input type="submit" value="Start sync">
</form>
<p>
  <script language="javascript">
    window.onload = function () {
      if (confirm('Are you sure to start the sync?')) {
  var formobj = document.getElementById('myform');
  formobj.elements['resync'].value = 'true';
  formobj.submit();
      }
    }
  </script>
</p>
<p><a href="/rsyncwebgui.php">Refresh page</a></p>

</body></html> 
```

当用户单击按钮时，会弹出一个“确定/取消”对话框，要求他们确认。单击确定时，页面回发并触发 rsync。

我将如何从远程 C# 控制台应用程序驱动这种交互？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T08:40:54.403

现在无法签入 VS，但你会以这样的方式结束：

```
string postDataStr = string.Format("resync=true&scanscheduled=&otherpara=xyz");
byte[] postData = Encoding.ASCII.GetBytes(postDataStr);

HttpWebRequest req = (HttpWebRequest)WebRequest.Create(new Uri("http://server1/rsyncwebgui.php"));
req.Method= "POST";
req.ContentType = "application/x-www-form-urlencoded";
req.ContentLength = postData.Length;
using(var reqStream = req.GetRequestStream())
{
    reqStream.Write(postData, 0, postData.Length);
}

HttpWebResponse response = (HttpWebResponse )req.GetResponse(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:47:59.070

使用像[Waitn](http://watin.org/)或[Selenium](http://seleniumhq.org/)这样的自动化库。两者都是免费的、非常相似的 API，并且都有 .Net 库。

它们用于网络测试，但也适用于任何网络自动化（我使用它们提交和修改 eBay 拍卖:)）。

两者都有多个浏览器的驱动程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T12:37:22.157

为 HiTech Magic 喊出的 WatiN 或 Selenium +1。你也可以试试 Telerik 的[免费测试框架](http://www.telerik.com/automated-testing-tools/free-testing-framework.aspx)。（披露：我是 Test Studio 的布道者，所以我有点偏见......）

您还可以使用 Watir，它可以让您创建一个简单的 Ruby 脚本以从命令行调用。我将 Ruby 和 Watir 用于各种类似的情况。

# objective-c - 覆盖 keyDown 会导致 NSTableView 出现问题

> ID：10846895
> 
> 赞同：0
> 
> 时间：2012-06-01T08:29:37.897
> 
> 标签：objective-c, cocoa

在我的 NSTableView 子类 MyTableView 我已经覆盖

```
- (void) keyDown:(NSEvent *)event {

    if ( [event keyCode] == 51 || [event keyCode] == 117 ) {
        [super keyDown:event];
        return;
    }

} 
```

51 是删除按钮的代码。我期望表格视图像子类化之前一样删除选定的项目。

事件被正确捕获并调用超类的 keyDown 方法。但是，该项目不再被删除。为什么 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:59:28.127

建议您在窗口类中覆盖 keyDown:。

```
-(void) keyDown: (NSEvent *) event
{
    NSString *chars = [event characters];
    unichar character = [chars characterAtIndex: 0];
    if (character == NSDeleteCharacter || character == NSBackspaceCharacter) 
    {
        NSTableView* view = (NSTableView*)[self firstResponder];
        if(view == theTableView)
        {
        // do something to delete the item from your data model and reload the tableview
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T14:17:05.287

如果您只是在按下 Delete 键时尝试调用特定方法，我建议覆盖该`-deleteBackward:`方法（部分`NSResponder`），因为它更具体地隔离了这种拦截。它还管理重新映射的键盘、宏等问题。

还有`-deleteForward`删除键而不是退格键。

```
-(void)deleteBackward:(id)sender
{
     // do my override here
     // do this only if super implements deleteBackward:
     [super deleteBackward: sender]
} 
```

# asp.net - 关于以编程方式将数据发布到另一个 aspx 页面的问题

> ID：10846896
> 
> 赞同：0
> 
> 时间：2012-06-01T08:29:40.747
> 
> 标签：asp.net

基本上我必须像 test.aspx 和 test1.aspx 这样的页面。test.aspx 有一个按钮，当单击按钮时，将调用一个例程，该例程将以编程方式将数据发布到 test1.aspx 页面，test1.aspx 页面将显示数据。

## 所以这是 test.aspx 页面的代码

```
protected void Button1_Click(object sender, EventArgs e)
{
    PostForm();
}

private void PostForm()
{

    WebRequest request = WebRequest.Create("http://localhost:14803/PaypalCSharp/Test1.aspx");
    request.Method = "POST";
    request.ContentType = "application/x-www-form-urlencoded";
    string postContent = string.Format("parameter1={0}&parameter2={1}", "Hello", "Wow");
    byte[] postContentBytes = Encoding.ASCII.GetBytes(postContent);
    request.ContentLength = postContentBytes.Length;
    Stream writer = request.GetRequestStream();
    writer.Write(postContentBytes, 0, postContentBytes.Length);
    writer.Close();

} 
```

## 所以这里是 test1.aspx 页面的代码

```
protected void Page_Load(object sender, EventArgs e)
{
    if (IsPostBack)
    {
        string str1 = Request.Form["parameter1"];
        string str2 = Request.Form["parameter2"];
    }
} 
```

我只是不明白我的代码有什么问题，因为结果数据没有发布到该页面。基本上我希望当用户单击 test.aspx 中的按钮时，数据将以编程方式从 test.aspx 页面发布到 test1.aspx 页面，并且 test1.aspx 将在浏览器中显示已发布的数据。请指导我在我的代码中需要更改的内容，因为我的要求将得到满足。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:22:55.987

我认为你让事情变得比他们需要的更难。以下是一些其他选项：

为什么不在Button1_Click方法中Response.Redirect到test1.aspx，并在查询字符串中传递两个参数呢？

或者，如果您不希望在 GET 请求中完成工作，为什么不将 test1.aspx 中的代码移动到 Button1_Click 方法中，然后在完成后重定向到 test1.aspx？

或者，为什么不将跨页面发布回 test1.aspx（尽管跨页面发布依赖于 javascript）？

# objective-c - 如何在没有 UIWebview 的情况下拦截来自 NSURLRequest 的重定向

> ID：10846898
> 
> 赞同：3
> 
> 时间：2012-06-01T08:30:07.293
> 
> 标签：objective-c, uiwebview, nsurlrequest

我有一个创建 NSURLRequest 的方法。如果我在 UIWebView 中加载这个 NSURLRequest，我会使用`- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType`.

如何在不将我的请求加载到 UIWebView 的情况下拦截此重定向？（我一点也不想要）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T08:51:47.307

好吧，你必须先告诉我们你是如何加载它的。你在用`NSURLConnection`吗？然后使用`-connection:willSendRequest:redirectResponse:`委托方法。请务必阅读文档以了解何时调用它。它通常被调用只是因为框架在实际与任何东西通信之前调整了您的请求，因此并非每次调用都是重定向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T08:33:53.293

如果我理解你想捕捉请求而不是在 webview 中加载它。如果那是您想要做的，只需让您的方法返回 NO。

```
 - (BOOL)webView:(UIWebView *)webView 
shouldStartLoadWithRequest:(NSURLRequest *)request 
            navigationType:(UIWebViewNavigationType)navigationType. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T17:28:37.997

您可以子类化`NSURLCache`以拦截任何 url 请求。

这个例子：[http](http://cocoawithlove.com/2010/09/substituting-local-data-for-remote.html) ://cocoawithlove.com/2010/09/substituting-local-data-for-remote.html演示了使用子类来加载本地文件代替远程文件，但你也应该能够使用类似的子类来取消请求或执行您需要的其他操作。

# java - 关于 URLEncoder 和 URLDecoder 的一些问题？

> ID：10846901
> 
> 赞同：2
> 
> 时间：2012-06-01T08:30:17.893
> 
> 标签：java, encoding, urlencode

我已经浏览了 URLEncoder 和 URLDecoder 的 javadocs。然后更加好奇了。将服务器视为 tomcat。在任何 web 应用程序中，每当我们提交表单时，服务器将表单字段转换为 urlencoded 字段，当我们执行 request.getParamter("fieldName") 时。服务器再次使用 URLDecoder 对其进行解码。 **那是对的吗？服务器做的还是浏览器做的？**类似地，当我们在地址栏中输入任何 url 时会发生同样的事情？**当我们需要在 URLEncoder 和 URLDecoder 的帮助下显式编码或解码请求参数时，如果服务器或浏览器这样做？**虽然这些是基本问题，但无法清楚地找到这些答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:04:28.393

虽然浏览器确实会在将 URL 传递给 Web 服务器之前对其进行编码，但可能不会一直有浏览器参与。

例如，您的服务器应用程序可能正在进行基于 REST 的调用并在简单的 GET 请求中传递一些数据。然后，如果您不在服务器上对其进行编码，则接收器对其进行解码时可能会出现乱码。

因此，强烈建议始终在将 URL 发送到服务器代码中之前对其进行编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T22:47:57.683

> 在任何 web 应用程序中，每当我们提交表单时，服务器都会将表单字段转换为 urlencoded 字段，并且当我们执行 request.getParamter("fieldName") 时。

不，浏览器会这样做。

> 服务器再次使用 URLDecoder 对其进行解码。那是对的吗？

是的。

> 服务器做的还是浏览器做的？

浏览器。

> 如果服务器或浏览器在我们需要借助 URLEncoder 和 URLDecoder 显式编码或解码请求参数时这样做？

我不知道那是什么意思，但它仍然是浏览器。如果您从应用程序代码发送请求，则只需对请求参数进行编码。如果您在 servlet 容器中运行，则根本不需要解码它们：它会为您完成。

# visual-studio - Visual Studio 2012 错误 Reference.svcmap：Stimulsoft.Controls.Win 无法找到或读取

> ID：10846902
> 
> 赞同：0
> 
> 时间：2012-06-01T08:30:35.080
> 
> 标签：visual-studio, reference, visual-studio-2012, stimulsoft

在 Visual Studio 2012 中启动了一个项目并收到此引用错误，我不知道问题出在哪里，因为我已经检查过`Reference.svcmap`并没有找到任何关于`Stimulsoft.Controls`.

所以我决定回到 VS 2010，因为它以前工作过，但错误仍然存​​在。

有谁有同样的问题可以给我一个提示，让我朝着正确的方向前进？

vs11 还问我是否要连接到 tfs，也许这给出了这个错误？

> 错误 213 Reference.svcmap: Stimulsoft.Controls.Win, Version=2009.1.400.0, Culture=neutral, PublicKeyToken=ebe6666cba19647a App_WebReferences/* * * */

# git - Git：将本地存储库添加为远程存储库时出现“无效名称”

> ID：10846908
> 
> 赞同：1
> 
> 时间：2012-06-01T08:31:06.130
> 
> 标签：git

我有这种情况：

我的机器上有两个存储库，它们都基于相同的原始存储库。

但是另一个有一个我想复制到另一个的分支（我在另一个 repo 上创建了它并做了很多更改）。这样做的原因是第二个 repo 在 Eclipse 工作区中，包括我的“当前”工作。

我试过创建一个远程仓库：

```
[remote "other"]
fetch = +refs/heads/*:refs/remotes/other/*
url = /home/me/src/other 
```

它使用 git remote 显示：

```
$:~/src/prod$ git remote
other
origin 
```

但是，如果我尝试使用例如访问该分支

```
git branch --track other_branch other/branch 
```

我明白了

```
fatal: Not a valid object name: 'other/branch'. 
```

该分支确实存在，我已使用“git branch”进行了验证。

那么有什么问题呢？

我还尝试将其添加到 .git/config 中

```
[branch "branch"]
remote = other
merge = refs/heads/other_branch 
```

但是分支不会显示为“git branch -r”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T08:38:41.593

如果您还没有联系远程存储库，git 不知道`other/branch`分支，所以它会抱怨它。只需获取存储库状态

```
git fetch other 
```

# c# - ASP.NET MVC Windows Authentiaction 和 DirectoryServices - 获取当前用户的邮件地址会引发 InvalidCastException

> ID：10846909
> 
> 赞同：4
> 
> 时间：2012-06-01T08:31:06.803
> 
> 标签：c#, asp.net-mvc, windows-authentication, directoryservices, userprincipal

我正在使用 ASP.NET MVC 4 和 Windows 身份验证。当我使用 VisualStudio 时，一切正常，但是当我部署我的站点时，会引发异常。

```
var emailAddress = UserPrincipal.Current.EmailAddress; 
```

**抛出：**

> 无法将“System.DirectoryServices.AccountManagement.GroupPrincipal”类型的对象转换为“System.DirectoryServices.AccountManagement.UserPrincipal”类型。

其余的工作正常。用户可以进行身份​​验证，我可以获取用户名等。

编辑：

我在 IIS 上启用了模拟。现在我得到以下异常：

> [DirectoryServicesCOMException (0x80072020)：发生操作错误。] System.DirectoryServices.DirectoryEntry.Bind(Boolean throwIfFail) +781 System.DirectoryServices.DirectoryEntry.Bind() +44 System.DirectoryServices.DirectoryEntry.get_AdsObject() +42 System.DirectoryServices.PropertyValueCollection.PopulateList() +29
> System.DirectoryServices .PropertyValueCollection..ctor(DirectoryEntry entry, String propertyName) +119
> System.DirectoryServices.PropertyCollection.get_Item(String propertyName) +163
> System.DirectoryServices.AccountManagement.PrincipalContext.DoLDAPDirectoryInitNoContainer() +535649 System.DirectoryServices.AccountManagement.PrincipalContext.DoDomainInit() +51 System.DirectoryServices.AccountManagement.PrincipalContext.Initialize() +141 System.DirectoryServices.AccountManagement.PrincipalContext.get_QueryCtx() +42 System.DirectoryServices.AccountManagement.Principal.FindByIdentityWithTypeHelper(PrincipalContext context, Type principalType, Nullable`1 identityType, String identityValue, DateTime refDate) +27
> System.DirectoryServices.AccountManagement.Principal.FindByIdentityWithType(PrincipalContext context, Type principalType, IdentityType identityType,字符串标识值）+146
> System.DirectoryServices.AccountManagement.UserPrincipal.FindByIdentity(PrincipalContext context, IdentityType identityType, String identityValue) +44
> System.DirectoryServices.AccountManagement.UserPrincipal.get_Current() +390 Jericho.MVC.HtmlHelperExtensions.GetUser(HtmlHelper htmlHelper) 在 C:\Development \Jericho\Jericho.MVC\HtmlHelperExtensions.cs:48

我能做些什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-01T10:53:19.403

将**IIS 应用程序池标识**设置为**NetworkService**并使用：

```
var identityName = HttpContext.Current.User.Identity.Name;
using (HostingEnvironment.Impersonate())
{
    using (var context = new PrincipalContext(ContextType.Domain, "yourDomain", null, ContextOptions.Negotiate | ContextOptions.SecureSocketLayer))
    using (var userPrincipal = UserPrincipal.FindByIdentity(context, IdentityType.SamAccountName, identityName))
    {
        emailAddress = userPrincipal.EmailAddress;
        lastname = userPrincipal.Surname;
        firstname = userPrincipal.GivenName;
    }
} 
```

# asp.net-mvc - 两个局部视图的相同模型实例（ajax）

> ID：10846913
> 
> 赞同：1
> 
> 时间：2012-06-01T08:31:26.537
> 
> 标签：asp.net-mvc

这是发生的事情：

1.  局部视图 A 和 B 显示相同的模型
2.  视图 A 通过 Ajax 更改数据（使用`Ajax.BeginForm`）
3.  View A 重新渲染自己（控制器从数据库中获取更新的模型）
4.  现在我们也必须重新渲染视图 B，因为数据已经改变了，对吧？
5.  **我们再次**从数据库中获取更新的模型并重新渲染视图 B

如何防止重新查询数据库？也许在会话中缓存模型实例？

这样做的“正确”方法是什么？

```
<!--works great when the page is rendered
    via postback but what about Ajax?--!>
<div>
@Html.Partial(@ViewA", MyModelInstance)
@Html.Partial(@ViewB", MyModelInstance)
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:12:27.127

您可以创建一个包含**A**和**B的新局部****视图 C**吗？每当模型更改时，您都必须调用返回**视图 C**的操作。

 ********更新：**

我看到的另一个简单解决方案是当**视图 A**更新模型而不是重新渲染视图时，通过 AJAX 获取更新的模型并通过 javascript 更新 HTML 部分。如果您使用的是 jquery，您可以使用**模板插件**很容易地更新 html。通过这种方式，您可以避免再发出一个不必要的请求来更新另一个**View B**。******

# php - 如何在网页中隔离文本用户？

> ID：10846914
> 
> 赞同：0
> 
> 时间：2012-06-01T08:31:27.473
> 
> 标签：php, html, css

我想在网页中打印文本用户输入，但它可能有 HTML-TAG。但是，如果用户制作了错误的 HTML 或应用了一些 CSS 规则（例如使用样式标签），我希望该页面内容不会受到影响。（我不喜欢使用 iframe）。

必须应用标签用户。我需要在可能的隔离 javascript 中防止错误关闭标记或错误或全局 css 规则。文本用户的一种“沙盒”。

最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:37:07.537

您应该为此使用一些预先构建的过滤器，因为没有简单的解决方案。

我建议查看[HTMLPurifier](http://htmlpurifier.org/)，这将帮助您实现您所追求的沙盒效果。

`striptags`可以使用，但我不建议这样做，因为恶意代码可能会放在允许的标签内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:59:39.803

您可以使用：

```
strip_tags($html,"<p><img>");    // only <p>,<img> is allowed 
```

javascript / style 不会被执行，但这并没有摆脱标签的主体。

# php - php 简单的追随者系统，从数组中删除一个值并使用 foreach 更新（更新不起作用）

> ID：10846915
> 
> 赞同：0
> 
> 时间：2012-06-01T08:31:38.683
> 
> 标签：php, foreach

我用 php(pdo) 和 mysql 做了一个简单的追随者系统。我的问题是，

假设有一个 ID 号为 99 的用户名 Mike。Mike 有两个关注者，Greg(id = 77) 和 Jenny(id = 88)

Greg 的关注列表是这样的 (1,2,3,4,99)，Jenny 的关注列表是这样的 (5,6,99,7)

我想做的是，当 Mike(99) 删除他的帐户时，我想从 Greg(77) 和 Jenny(88) 的以下列表中删除 ID 号 99。

名为“mytable”的表有 3 个字段。id（INT），following_list（文本），follower_list（文本）。

几天来我一直在努力解决这个问题。谁能给我一些建议？提前非常感谢你！！！

下面是我的更新功能

```
public function update_following_list(){
   // $this->myid is Mike's id number(99) who is about to delete his account
   // Selecting the list of people following Mike
   $query = "SELECT 'follower_list' FROM 'mytable' WHERE 'id' = $this->myid";
   $result = $this->dbc->query($query);
      foreach($result as $row){
      $this->follower_list = $row['follower_list'];
      // When I echo $this->follower_list, I get 77,88

      // Now querying Greg(77) and Jenny(88)'s following_lists, which have Mike's id number(99) in them.
      $query = "SELECT 'following_list' FROM 'mytable' WHERE 'id' IN ($this->follower_list)";
      $result = $this->dbc->query($query);
         foreach($result as $row){
         $this->following_list = $row['following_list'];
         // When I echo $this->following_list, I get both Greg(1,2,3,4,99) and Jenny(5,6,99,7)'s following lists

         // Here, I am turning following list into array by using explode
         $this->following_array = explode(",", $this->following_list);
            foreach($this->following_array as $key => $value){
            if($value == $this->myid){

                // Removing Mike(99)'s id number from Greg and Jenny's following lists
                unset($this->following_array[$key]);

                // Add back commas, which will then become string
                $this->new_following_list = implode(",", $this->_following_array);
                // When I echo $this->new_following_list, I get both Greg(1,2,3,4) and Jenny(5,6,7)'s new list without Mike(99)'s id number 

// My problem starts here. I was able to remove Mike's id number from Greg and Jenny's lists. But I am having a trouble updating Greg and Jenny's following lists with new following lists.  

            // The update query below does not work...
            $query = "UPDATE 'mytable' SET 'following_list' = $this->new_following_list WHERE 'id' IN ($this->follower_list)";
            $result = $this->dbc->query($query);
        } // End of if($value == $this->myid)
        } // End of foreach($this->following_array as $key => $value)
    }
    } 
} // End of function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T08:41:21.843

这将无法正确扩展。最好像这样规范化您的数据模型：

## 下列的

```
user_id | following_user_id
---------------------------
     77 |                 1
     77 |                 2
     77 |                 3
     77 |                 4
     77 |                99
     88 |                 5
     88 |                 6
     88 |                 7
     88 |                99 
```

并添加两个索引：

*   `UNIQUE(user_id, following_user_id)`
*   `INDEX(following_user_id)`

要获得 99 的关注者：

```
SELECT * FROM following WHERE following_user_id=99; 
```

看看谁 77 关注：

```
SELECT * FROM following WHERE user_id=77; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T08:41:19.147

我认为您的数据库设置不是最佳的。将逗号分隔的值存储在一个字段中，为绑定表和一些规范化尖叫！

您应该将逗号分隔值列表设置为表/关系，例如：

```
followTable:/  user_id | follows 
```

删除 mike 的 id 就很简单：

```
DELETE FROM followTable WHERE follows = 99 OR user_id = 99 
```

后者确保迈克和他的追随者之间的链接也被删除。

# c# - 如何在asp.net c#中的页面加载时将datalist与sqldatasource绑定

> ID：10846917
> 
> 赞同：0
> 
> 时间：2012-06-01T08:31:45.657
> 
> 标签：c#, .net

我使用 sqldatasouce 作为 datalist 的 DataSourceID 。但是，它不允许我为 datalist 提供 id。如何在页面加载时绑定数据列表？我收到以下错误 DataSource 和 DataSourceID 都是在“DTest”上定义的。删除一个定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:49:20.520

不要只使用 sqlDataSource，而是尝试将您的数据列表与您在代码隐藏中准备的一些 IEnumerable 绑定。它将允许您以您想要的方式自定义事物，而不会浪费太多时间来了解如何使用 microsoft 的现成工具完成工作，这些工具充其量只能用于简单的案例。

# magento - Magento 分层导航中的自定义过滤器

> ID：10846920
> 
> 赞同：1
> 
> 时间：2012-06-01T08:31:56.427
> 
> 标签：magento

我有一个字母数字大小属性列表，我需要能够在高级搜索或分层导航中进行过滤（如果其他人决定从标题中删除它，我指的是 Magento）。

问题是我应该能够将它们设置为间隔。想象一下鞋码：25、25/、31、31/。我希望能够设置类似：

```
20-25/
26-30
30/-40 
```

显然，第一个过滤器会返回该尺寸区间内所有可用的鞋子。我怎样才能做到这一点？

在我从 SQL Server 导出它们之前，我想到将这些间隔分配为属性......也许这会为我节省一些麻烦......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T13:26:34.853

Magento 没有将属性设置为间隔的选项，只有价格属性会像这样过滤。我认为您可以使用 2 个属性来执行此操作：第一个是鞋码，并且仅在产品详细信息页面中显示这个，因此您将列出诸如 25/26/27 之类的值......第二个是鞋码间隔，在分层导航/搜索中显示这个，并具有诸如 25-30/30-35/35-40 之类的值......它们都将是管理区域中的下拉菜单。

您可以制作一个扩展 Magento 的默认导航的模块，您必须重写前端目录中的过滤器块和模型以及管理员中的属性，以便您可以向属性添加额外的选项，例如“间隔”。

# google-app-engine - 使用 Google App Engine 和 Jinja2 的 TemplateNotFound(template)

> ID：10846921
> 
> 赞同：1
> 
> 时间：2012-06-01T08:31:58.130
> 
> 标签：google-app-engine, jinja2

我在使用 Jinja2 的 Google App Engine 上收到 TemplateNotFound 错误（下面是完整的堆栈跟踪。）

我希望看到的是带有“greet”变量的 index.html 传递给 index.html 模板文件。我不明白为什么当 TraceBack 中 index.html 的路径正确时，我得到模板未找到错误。

我试过的...

*   通过在模板路径中取出“os.path.dirname( **file )”来尝试相对路径。**
*   使用“模板”而不是主题作为目录名称。

这是我的代码。

**应用程序.yaml**

```
application: codemywayout
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:

- url: /admin/.*
  script: admin.app
  login: admin

- url: /static/([^/]+)/(.*)
  static_files: template/\1/static/\2
  upload: static/.*

- url: /favicon\.ico
  static_files: favicon.ico
  upload: favicon\.ico

- url: .*
  script: static.app

builtins:
- remote_api: on

libraries:
- name: webapp2
  version: "2.5.1"
- name: jinja2
  version: latest 
```

**管理员.py**

```
from google.appengine.ext import db
import webapp2
import jinja2
import os
import fix_path
import config

def render_template(template_name, template_vals=None, theme=None):
    template_path = os.path.join(os.path.dirname(__file__) , \
            "themes", theme or config.theme, template_name)
    env = jinja2.Environment(
        loader=jinja2.FileSystemLoader(template_path))
    return env.get_template(template_path, template_vals or {})

class BlogPost(db.Model):
    title = db.StringProperty()
    body = db.StringProperty()

def render(self):
    template_vals = {
        'config': config,
        'post': self,
    }
    return render_template("post.html", template_vals)

class BaseHandler(webapp2.RequestHandler):
    def render_to_response(self, template_name, \
            template_vals=None, theme=None):
        template_name = os.path.join("admin", template_name)
        self.response.out.write(render_template(template_name,\
            template_vals, theme))

class AdminHandler(BaseHandler):
    def get(self):
        greet = "hello"
        template_vals = {
            'greet': greet
        }
        self.render_to_response("index.html", template_vals) 
```

**配置文件**

```
# Name of the blog
blog_name = 'My Blog'

# Selects the theme to use. Theme names correspond to directories under
# the 'themes' directory, containing templates and static content.
theme = 'default'

# Defines the URL organization to use for blog postings. Valid substitutions:
#   slug - the identifier for the post, derived from the title
#   year - the year the post was published in
#   month - the month the post was published in
#   day - the day the post was published in

# URL Options
#   post_path_format = '/%(year)d/%(month)02d/%(slug)s'
post_path_format = '/%(slug)s' 
```

**追溯**

```
Traceback (most recent call last):
  File "C:\Users\john\webdev\google\lib\webapp2\webapp2.py", line 1536, in __call__
    rv = self.handle_exception(request, response, e)
  File "C:\Users\john\webdev\google\lib\webapp2\webapp2.py", line 1530, in __call__
    rv = self.router.dispatch(request, response)
  File "C:\Users\john\webdev\google\lib\webapp2\webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "C:\Users\john\webdev\google\lib\webapp2\webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "C:\Users\john\webdev\google\lib\webapp2\webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "C:\Users\john\webdev\google\lib\webapp2\webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "C:\Users\john\webdev\workspace\codemywayout\admin.py", line 49, in get
    self.render_to_response("index.html", template_vals)
  File "C:\Users\john\webdev\workspace\codemywayout\admin.py", line 34, in render_to_response
    template_vals, theme))
  File "C:\Users\john\webdev\workspace\codemywayout\admin.py", line 14, in render_template
    return env.get_template(template_path, template_vals or {})
  File "C:\Users\john\webdev\google\lib\jinja2\jinja2\environment.py", line 719, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "C:\Users\john\webdev\google\lib\jinja2\jinja2\environment.py", line 693, in _load_template
    template = self.loader.load(self, name, globals)
  File "C:\Users\john\webdev\google\lib\jinja2\jinja2\loaders.py", line 115, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "C:\Users\john\webdev\google\lib\jinja2\jinja2\loaders.py", line 162, in get_source
    pieces = split_template_path(template)
  File "C:\Users\john\webdev\google\lib\jinja2\jinja2\loaders.py", line 33, in split_template_path
    raise TemplateNotFound(template)
TemplateNotFound: C:\Users\john\webdev\workspace\codemywayout\themes\default\admin\index.html 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T02:15:26.837

我希望您不要尝试从与静态文件相同的路径加载 Jinja 模板

静态文件：模板/\1/静态/\2

因为您的应用程序无法访问该路径。

我会尝试记录 Jinja 尝试从中加载模板的路径，以帮助您了解它尝试加载模板的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T21:25:38.567

如果您查看 C:\Users\john\webdev\google\lib\jinja2\jinja2\loaders.py 第 33 行，您可能可以设置一个 pdb 断点`import pdb; pdb.set_trace( )`并查看发生了什么。

我在 Mac 上使用 SDK 源代码分发，但如果您的代码与我看到的相同，则为：

```
def split_template_path(template):
    """Split a path into segments and perform a sanity check.  If it detects
    '..' in the path it will raise a `TemplateNotFound` error.
    """
    pieces = []
    for piece in template.split('/'):
        if path.sep in piece \
           or (path.altsep and path.altsep in piece) or \
           piece == path.pardir:
            raise TemplateNotFound(template)
        elif piece and piece != '.':
            pieces.append(piece)
    return pieces 
```

请注意`for piece in template.split('/')`它在 '/' 而不是`path.sep`. 我怀疑您的输入是 C:\Path\to\file.html 在这种情况下，片段是整个路径，adn path.sep（Windows 上的 \）确实是片段，这会产生 TemplateNotFound 错误。

而不是`template_name = os.path.join("admin", template_name)`你可以尝试`template_name = 'admin/%s' % template_name`，不要在 template_path 中包含 template_name 并将 template_name 而不是 template_path`env.get_template(template_name, template_vals or {})`作为 loaders.py 第 162 行表示它在 template_path 中查找 template_name

您的代码经过修改但未经测试看起来像

```
from google.appengine.ext import db
import webapp2
import jinja2
import os
import fix_path
import config

def render_template(template_name, template_vals=None, theme=None):
    template_path = os.path.join(os.path.dirname(__file__) , \
            "themes", theme or config.theme)
    env = jinja2.Environment(
        loader=jinja2.FileSystemLoader(template_path))
    return env.get_template(template_name, template_vals or {})

class BlogPost(db.Model):
    title = db.StringProperty()
    body = db.StringProperty()

def render(self):
    template_vals = {
        'config': config,
        'post': self,
    }
    return render_template("post.html", template_vals)

class BaseHandler(webapp2.RequestHandler):
    def render_to_response(self, template_name, \
            template_vals=None, theme=None):
        template_name = "admin/%s" % template_name
        self.response.out.write(render_template(template_name,\
            template_vals, theme))

class AdminHandler(BaseHandler):
    def get(self):
        greet = "hello"
        template_vals = {
            'greet': greet
        }
        self.render_to_response("index.html", template_vals) 
```

# drupal-7 - Drupal 7 主题 - 仅呈现页面中的内容

> ID：10846929
> 
> 赞同：0
> 
> 时间：2012-06-01T08:32:50.083
> 
> 标签：drupal-7, themes, drupal-views

我想用视图模块创建一个视图。视图将位于路径 /myview。

然后，我只想在用户在 /myview 上而不是所有页面页面时呈现查看内容。

# jquery - 如何打开单个 jquery 对话框

> ID：10846930
> 
> 赞同：0
> 
> 时间：2012-06-01T08:32:50.287
> 
> 标签：jquery, dialog, leaflet

我在页面上动态生成了多个 jquery ui 对话框，如何定位和打开个人？

需要有两种打开对话框的方法，一个标记（使用传单地图）和一组与地图上的标记相对应的侧边栏项目。单击标记会打开正确的对话框，但单击单个侧边栏项目会打开所有对话框...

我有代码：

```
$(function() {

var projectDialog = $('<div id="' + L.Util.stamp(e.layer) +'" class="model-wrap">\
    ' + pDesc + '\
    </div>');

     projectDialog.dialog({
            modal: true,
            autoOpen: false,
            title: pName,
            show: 'fade',
            hide: 'fade',
            dialogClass: (e.layer)

        });

$(e.layer).click(function() {

    projectDialog.dialog('open');

});

        // this is the sidebar link items - each item is given an id & href matching the corresponding e.layer
    $('.item').click(function (e) {
        e.preventDefault();
        projectDialog.dialog('open');
        return false;
    }); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:22:34.940

`projectDialog.dialog('open');`你为什么不通过 id 打开对话框，而不是调用？

`$('#' + *yourId*).dialog('open');`
或者
`$('div[id=' + *yourId* + ']').dialog('open');`

您应该能够在单击事件中的 (e) 中获取 Id，因为您说它被赋予了 id 和 href。

此外，如果您尝试将事件绑定到动态生成的元素，您可能应该使用 .live() 或 .on() 。

# java - java web start应用如何获取管理员权限，需要写入系统目录

> ID：10846931
> 
> 赞同：2
> 
> 时间：2012-06-01T08:32:50.913
> 
> 标签：java, windows, security, permissions, java-web-start

我将开发一个 java web start 应用程序，它需要访问受保护的系统目录并在那里安装一个程序。

我知道，如何退出沙箱，我的应用程序已签名并可以访问文件系统。问题是，它仍然无法访问像 C:/windows/system32 这样的目录。

我找到了独立 Java 应用程序的解决方案： [Java：以管理员身份运行](https://stackoverflow.com/questions/1385866/java-run-as-administrator)

如何在 java web start 中执行此操作？

提前感谢您的回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T14:22:37.243

在您的情况下，您可能可以尝试使用以下技巧：

1.  预编译一个 jar 文件，其中 Manifest 指向主类，该类执行所有必需的文件系统例程

2.  将此 jar 放入 Web-Start 应用程序的资源文件夹中的某个位置，然后在执行 Web-Start 时将其复制到用户的 Temp 文件夹中

3.  以类似的方式从高程 [PowerToys提供所需的文件](http://technet.microsoft.com/en-us/magazine/2008.06.elevation.aspx)

4.  将“%PATH_TO_USER_TEMP%/elevate”命令与“java -jar %PATH_TO_USER_TEMP%/yourJar.jar”一起调用（请参阅上面的文章或有关 Elevation PowerToys 的附加文档以了解详细信息）

5.  如果一切顺利，用户将收到一个请求，要求授予已执行的 java 进程所需的管理员权限。

# c# - 实体框架复杂类型最常见的用途是什么？

> ID：10846934
> 
> 赞同：-1
> 
> 时间：2012-06-01T08:32:56.787
> 
> 标签：c#, entity-framework

我正在使用实体框架，并且正在考虑对表中的一些常见字段使用复杂类型，例如：CreatedDate、LastUpdatedDate、CreatedBy、LastUpdatedBy 等（不确定在这种情况下如何调用复杂类型？任何想法）

我认为这是使用 Coplex 类型的一个很好的候选者，主要是因为它很容易将类型复制并传递到新实体并创建自定义方法来填充这些类型等？

我正在使用模型优先方法，并尽量不在数据库中引入存储过程以具有可用于计算值的复杂类型等将不会被使用。

复杂类型还有哪些其他常见用途，如果能获得一些人们如何使用它们的例子，那就太好了。

您的意见表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:38:34.693

使用复杂类型，您可以统一常见实体，这样您就不必去多个实体。

复杂类型的另一个有用用途是您可以将存储过程导入复杂类型。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T11:35:03.133

我在当前项目中使用复杂类型来使用存储过程无缝解密数据库表中的某些字段。这允许我存储加密的数据，并将加密细节保留在我的应用程序之外，而不是在数据库层。

# tsql - Sybase - 根据一列的值对列进行条件连接

> ID：10846936
> 
> 赞同：1
> 
> 时间：2012-06-01T08:32:58.243
> 
> 标签：tsql, join, conditional, sybase

我有一种情况，我需要根据其中一个表上的列的值进行条件连接。

`table_a ta

    join table_b tb on
    case
     when ta.column_1 = 1 then ta.column_2 = tb.column_2
     when ta.column_1 = 2 then ta.column_2 = tb.column_2 and ta.column_3 = tb.column_3
     when ta.column_1 = 3 then ta.column_2 = tb.column_2 and ta.column_3 = tb.column_3 and ta.column_4 = tb.column_4
    end`

请告诉我应该怎么做？

尝试搜索并获得了一些使用 a 的选项，`left join`但我不知道该怎么做。:(

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:39:01.077

您可以在选择列时使用`left joins`并放置：`case expression`

```
select
    case when ta.column_1 = 1 then b1.column
    case when ta.column_1 = 2 then b2.column
    case when ta.column_1 = 3 then b3.column
    end
from table_a ta
left join table_b b1 on ta.column_2 = tb.column_2
left join table_b b2 on ta.column_2 = tb.column_2 and ta.column_3 = tb.column_3 
left join table_b b3 on ta.column_2 = tb.column_2 and ta.column_3 = tb.column_3 and ta.column_4 = tb.column_4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:42:38.927

我认为这一切都可以表述为单一的布尔表达式

```
...
join table_b tb on 
(ta.column_1 = 1 and ta.column_2 = tb.column_2) or
(ta.column_1 = 2 and ta.column_2 = tb.column_2 and ta.column_3 = tb.column_3)
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T23:21:40.410

试试工会

```
select * from tbla ta, tblb tb
where ta.column_1 = 1
  and ta.column_2 = tb.column_2
union
select * from tbla ta, tblb tb
where ta.column_1 = 2
  and ta.column_2 = tb.column_2
  and ta.column_3 = tb.column_3
union
select * from tbla ta, tblb tb
where ta.column_1 = 3
  and ta.column_2 = tb.column_2
  and ta.column_3 = tb.column_3
  and ta.column_4 = tb.column_4 
```

多田

# facebook - facebook 应用程序 oauth 错误（无法在框架中显示）

> ID：10846938
> 
> 赞同：0
> 
> 时间：2012-06-01T08:33:05.523
> 
> 标签：facebook, oauth

我只是想创建一个 FB 应用程序。我去了developers.facebook.com/apps，设置了一个新应用程序，在我的服务器上创建了一个新文件夹，将一个旧（工作）应用程序复制到该文件夹​​中，更改了我的应用程序ID、秘密、画布页面和画布网址配置文件......它没有工作。

它显示错误：“此内容无法在框架中显示”。

如果你能帮助我，我将不胜感激。谢谢。

我在这里复制我的配置文件：（我故意在这里删除了应用程序 ID 和密码。）

```
// Facebook App ID/API Key
$appId = '';

// Facebook App Secret
$secret = '';

// Facebook Canvas Page
$redirect_uri = 'https://apps.facebook.com/appname/';

// Facebook Canvas URL
$canvas_url = 'https://myhost.com/appname/';

// Facebook App Permissions
$scope = 'email, publish_actions';

// Configure Facebook connection

require 'facebook.php';

$facebook = new Facebook(array(
  'appId'  => $appId,
  'secret' => $secret,
  'cookie' => true,
));

$user = $facebook->getUser();

$loginUrl = $facebook->getLoginUrl(array(
    'redirect_uri' => $redirect_uri,
    'scope' => $scope,
));

$logoutUrl = $facebook->getLogoutUrl();

if ($user) {
  try {
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    $user = null;
  }
} else {
    header("Location: $loginUrl");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T08:51:14.273

您应该使用 JavaScript 将用户重定向到登录 URL `top.location = '{url}'`，然后使用登录重定向 url 将它们发送回您的应用程序。Facebook 不允许您在 iframe 中使用 facebook，这就是您看到该错误消息的原因 - 非常不言自明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:49:37.487

> 它显示“此内容无法在框架中显示”错误消息。

这条信息如何让您难以理解？

您不能在 iframe 中调用身份验证对话框，因为如果用户无法检查站点地址，它将启用网络钓鱼。

# android - 如何关闭包含许多活动的 Android 应用程序？

> ID：10846945
> 
> 赞同：0
> 
> 时间：2012-06-01T08:34:03.283
> 
> 标签：android, android-activity, android-intent

我有一个包含 6 个活动的应用程序，

```
* Home--> A1 ---> A5
* Home--> A2 ---> A5
* Home--> A3 ---> A5
* Home--> A4 ---> A5 
```

并且有一个菜单可以从任何活动中直接到达 Home、A1、A2、A3 和 A4。

我想在菜单中添加一个项目“退出应用程序”。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:38:15.837

好吧，Android 中没有真正的“退出”概念——你的设计不应该允许用户这样做。看看这个，看看你是否可以使用这个线程 [退出应用程序不受欢迎？](https://stackoverflow.com/questions/2033914/quitting-an-application-is-that-frowned-upon/2034238)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:39:33.373

你不应该那样做。Android 旨在自行管理进程。当可用内存级别变低时，它将关闭您的应用程序。

用户只需按主页按钮即可退出您的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T09:07:33.470

当您从一个移动到另一个时（在`finish()`通话之前），请致电。这样，就不会跑了。然后，每当您想退出时，也只需调用current即可。`Activity``Activity``startActivity()``Activity``finish()``Activity`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T14:27:44.800

我也遇到了这个问题，尽管这显然与整个想法背道而驰，但我只是想破坏该应用程序，因为它会引起各种问题，如果不破坏另一部分我就无法解决，如果每次都是从头开始。（而且我不想再用它伤害我的头了。）

在尝试了这个问题的所有答案以及许多类似的答案之后，我发现在每个活动中这样做都可以解决它。

```
@Override protected void onPause(){
    super.onPause();
    super.finish();
    int pid = android.os.Process.myPid();
    android.os.Process.killProcess(pid);
} 
```

（至少现在，因为我相信我之前解决过几次）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T10:08:48.870

感谢您的宝贵答案，我自己解决了，我认为施加导航模型的正确方法是添加控制的全局变量，例如：

```
boolean comeFromA;
boolean comeFromHome; 
```

并为你做必要的那些变量。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-01T08:37:27.817

对于“退出应用程序”，您可以使用 -

```
System.exit(); 
```

# c# - 可查询的 导出到excel

> ID：10846947
> 
> 赞同：0
> 
> 时间：2012-06-01T08:34:13.463
> 
> 标签：c#, linq, entity-framework, entity-framework-4, entity-framework-4.1

好吧，这肯定以前没有被问过。

我有一个返回 IQueryable 的方法，客户端要求是一个特定示例，我们应该将其导出到 excel 中而不在 gridview 中显示结果。

任何想法？

```
string strSql = BuildQuery();
            try
            {
                var list = RequestBaseBL.GetRequestByCustomQuery(strSql, DdlRequestType.SelectedValue).ToList(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T08:43:59.323

要在 excel 中导出，请看这里：

[http://epplus.codeplex.com/releases/view/42439](http://epplus.codeplex.com/releases/view/42439)

然后您可以创建自己的类来为 IEnumerable 生成 excel 导出

这里有一些提示（这些是更大对象的一部分，所以只是提示，没有任何编译）可能来自我的一个项目：

```
 public interface IExcelReporting : IServiceObject
    {
        ColumnsExcel Columns { get; }

        void SetDatasource(IEnumerable datasource);
        void SetHeaderLabelMerge(int columnMerge);
        void AddHeader(string label, string value);
        Byte[] ExportToExcel(string title, string author, DateTime date);
    } 
```

实施示例：

```
 public Byte[] ExportToExcel(string title, string author, DateTime date)
    {
        ExcelPackage package = new ExcelPackage();

        ExcelWorksheet worksheet = package.Workbook.Worksheets.Add(title);

if (_Columns != null)
            {

                Dictionary<int, Func<object, string>> internalMappingGetter = new Dictionary<int, Func<object, string>>();

                //create the Header of the body
                foreach (ColumnExcel entity in _Columns)
                {
                    worksheet.Cells[RowIndex, ColumnIndex].Value = entity.HeaderName;
                    worksheet.Cells[RowIndex, ColumnIndex].Style.WrapText = true;
                    BorderCell(worksheet.Cells[RowIndex, ColumnIndex]);
                    worksheet.Column(ColumnIndex).Width = entity.Width;
                    ColumnIndex++;
                }

                RowIndex++;

                if (_DataSource != null)
                {
                    foreach (Object o in _DataSource)
                    {
                        ColumnIndex = 1;
                        foreach (ColumnExcel column in _Columns)
                        {
                            column.Apply(worksheet.Cells[RowIndex, ColumnIndex], o);
                            worksheet.Column(ColumnIndex).BestFit = true;
                            worksheet.Cells[RowIndex, ColumnIndex].Style.WrapText = true;
                            //BorderCell(worksheet.Cells[RowIndex, ColumnIndex]);
                            ColumnIndex++;
                        }
                        RowIndex++;
                    }
                } 
```

和列类：

```
public class ColumnsExcel : IEnumerable
    {
        List<ColumnExcel> _Columns;

        public ColumnsExcel()
        {
            _Columns = new List<ColumnExcel>();
        }

        public void AddInt(Func<object,int> getValue, string headerName, int width, string format)
        {
            ColumnExcel entity = new ColumnExcelInt(headerName, width, format, getValue);
            _Columns.Add(entity);
        }

        public void AddString(Func<object, string> getValue, string headerName, int width )
        {
            ColumnExcel entity = new ColumnExcelstring(headerName, width, getValue);
            _Columns.Add(entity);
        }

        public void AddDateTime(Func<object, DateTime?> getValue, string headerName, int width, string format)
        {
            ColumnExcel entity = new ColumnExcelDateTime(headerName, width, format, getValue);
            _Columns.Add(entity);
        }

        public void AddDecimal(Func<object, decimal> getValue, string headerName, int width, string format)
        {
            ColumnExcel entity = new ColumnExcelDecimal(headerName, width, format, getValue);
            _Columns.Add(entity);
        }

        public IEnumerator GetEnumerator()
        {
            return _Columns.GetEnumerator();
        }
    } 
```

及其用途：

```
 //prepare the Ienumerable<MyObject>
 var interventi = GetInterventoSchedeConsuntivi()

 //prepare the report
 IExcelReporting report = ReportingFactory.GetInstance();
 report.SetDatasource(interventi);
 report.AddHeader("Lotto:", lotto);

 report.Columns.AddString((object v) => ((InterventoSchedeConsuntiviView)v).Lotto, "Lotto", 20);

using (System.IO.Stream s = File.Create(filepath))
                    {
                        byte[] csv = report.ExportToExcel(("titleFile", string.Empty, Servizi.DataOra.Now);
                        s.Write(csv, 0, csv.Length);
                    } 
```

# javascript - emberjs 计算属性

> ID：10846948
> 
> 赞同：2
> 
> 时间：2012-06-01T08:34:23.103
> 
> 标签：javascript, ember.js

在 emberjs 文档[http://emberjs.com/documentation/#toc_computed-properties-getters](http://emberjs.com/documentation/#toc_computed-properties-getters)中，说有两种方法可以定义计算属性。第一种是通过原型扩展，第二种是通过将函数包装在对`Ember.computed`.

谁能告诉我它们之间的区别是什么，如果一种方法比另一种更好，因为在示例代码中没有明显的区别（或者我遗漏了什么？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T14:19:13.640

两种变体之间没有区别 - 除了`Ember.computed`方法更冗长。实际上，`property`变体内部调用`Ember.computed`，请参见[function.js](https://github.com/emberjs/ember.js/blob/8647bd5815ed1cbf6adcc70ad5e2771afdefc483/packages/ember-runtime/lib/ext/function.js#L64-67)中的定义。

**包/ember-runtime/lib/ext/function.js**：

```
Function.prototype.property = function() {
    var ret = Ember.computed(this);
    return ret.property.apply(ret, arguments);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T09:08:33.750

我想最后没有。如前所述，`Ember.computed`如果您不喜欢`Function`扩展原型，您可以使用。也可能对元编程有用。

# c++ - C++子串多字节字符

> ID：10846953
> 
> 赞同：4
> 
> 时间：2012-06-01T08:34:38.127
> 
> 标签：c++, character-encoding, wstring

我有这个 std::string 包含一些跨越多个字节的字符。

当我对该字符串执行子字符串时，输出无效，因为当然，这些字符被计为 2 个字符。在我看来，我应该改用 wstring，因为它将这些字符存储为一个元素而不是更多。

所以我决定将字符串复制到 wstring 中，但这当然没有意义，因为字符仍然分成 2 个字符。这只会使情况变得更糟。

将字符串转换为 wstring 是否有一个好的解决方案，将特殊字符合并为 1 个元素而不是 2 个元素。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T06:37:30.390

更简单的版本。基于提供的解决方案[获取 UTF-8 编码的 std::string 的实际长度？](https://stackoverflow.com/questions/4063146/getting-the-actual-length-of-a-utf-8-encoded-stdstring)马塞洛·坎托斯

```
std::string substr(std::string originalString, int maxLength)
{
    std::string resultString = originalString;

    int len = 0;
    int byteCount = 0;

    const char* aStr = originalString.c_str();

    while(*aStr)
    {
        if( (*aStr & 0xc0) != 0x80 )
            len += 1;

        if(len>maxLength)
        {
            resultString = resultString.substr(0, byteCount);
            break;
        }
        byteCount++;
        aStr++;
    }

    return resultString;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-01T08:38:31.660

对象不是一串[`std::string`](http://www.sgi.com/tech/stl/basic_string.html)字符，而是一串字节。它根本没有所谓的“[编码](http://en.wikipedia.org/wiki/Character_encoding)”的概念。也一样[`std::wstring`](http://www.sgi.com/tech/stl/basic_string.html)，只是它是一个 16 位值的字符串。

为了对需要寻址不同字符的文本执行操作（例如，当您想要获取子字符串时），您需要知道 std::string 对象使用什么编码。

**更新：**既然您已澄清您的输入字符串是 UTF-8 编码的，您仍然需要决定用于输出的编码`std::wstring`。我想到了 UTF-16，但这实际上取决于您将传递`std::wstring`对象的 API 是什么。假设 UTF-16 是可以接受的，您有多种选择：

1.  在 Windows 上，您可以使用该[`MultiByteToWideChar`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd319072%28v=vs.85%29.aspx)功能；不需要额外的依赖项。
2.  [UTF8-CPP](http://utfcpp.sourceforge.net/)库声称提供了一个轻量级的解决方案来处理 UTF-* 编码的字符串。我自己从未尝试过，但我一直听到关于它的好消息。
3.  在 Linux 系统上，使用[libiconv](http://www.gnu.org/software/libiconv/)库是很常见的。
4.  如果您需要处理各种疯狂的编码并且想要就编码而言完整的 alpha 和 omega 词，请查看[ICU](http://site.icu-project.org/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T11:38:24.647

**Unicode 很难。**

1.  `std::wstring`不是代码点列表，它是 的列表`wchar_t`，并且它们的宽度是实现定义的（通常 16 位与 VC++ 和 32 位与 gcc 和 clang）。是的，这意味着它对可移植代码毫无用处......
2.  单个字符可以在多个代码点上编码（因为[变音符号](http://en.wikipedia.org/wiki/Diacritic)）
3.  在某些语言中，两个不同的字符一起形成一个不可分离的“单元”（例如，`LL`在西班牙语中被视为一个字母）。

所以……有点难。

解决 3) 可能代价高昂（它需要特定的语言/用法注释）；解决 1) 和 2) 是绝对必要的......并且需要支持 Unicode 的库或自己编写代码（并且可能会出错）。

*   1) 很容易解决：编写从 UTF-8 转换为 CodePoint 的例程很简单（CodePoint 可以用 表示`uint32_t`）
*   2）更难，它需要一个变音符号列表，并且子例程必须知道永远不要在变音符号之前剪切（它们遵循他们限定的字符）

否则，可能有你在[ICU](http://site.icu-project.org/)中寻找的东西。我祝你好运找到它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T09:53:06.653

实际上只有两种可能的解决方案。如果你在很远的距离上经常这样做，你最好将你的字符转换为单个元素编码，使用`wchar_t`(或`int32_t`，或任何最合适的。这*不是*一个简单的副本，它会转换每个人`char`转换为目标类型，而是一个真正的转换函数，它将识别多字节字符，并将它们转换为单个元素。

对于偶尔使用或更短的序列，可以编写自己的函数来推进`n`字节。对于 UTF-8，我使用以下内容：

```
inline size_t
size(
    Byte                ch )
{
    return byteCountTable[ ch ] ;
}

template< typename InputIterator >
InputIterator
succ(
    InputIterator       begin,
    size_t              size,
    std::random_access_iterator_tag )
{
    return begin + size ;
}

template< typename InputIterator >
InputIterator
succ(
    InputIterator       begin,
    size_t              size,
    std::input_iterator_tag )
{
    while ( size != 0 ) {
        ++ begin ;
        -- size ;
    }
    return begin ;
}

template< typename InputIterator >
InputIterator
succ(
    InputIterator       begin,
    InputIterator       end )
{
    if ( begin != end ) {
        begin = succ( begin, end, size( *begin ),
                      std::::iterator_traits< InputIterator >::iterator_category() ) ;
    }
    return begin ;
}

template< typename InputIterator >
size_t
characterCount(
    InputIterator       begin,
    InputIterator       end )
{
    size_t              result = 0 ;
    while ( begin != end ) {
        ++ result ;
        begin = succ( begin, end ) ;
    }
    return result ;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T09:04:33.277

为简单起见，让我假设您的编码是 UTF-8。在这种情况下，我们会有一些字符占用一个以上的字节，就像你的情况一样。然后你就有了 std::string，这些 UTF-8 编码的字符被存储在其中。现在您想根据字符而不是字节来 substr()。我会编写一个将字符长度转换为字节长度的函数。对于 utf 8 情况，它看起来像：

```
#define UTF8_CHAR_LEN( byte ) (( 0xE5000000 >> (( byte >> 3 ) & 0x1e )) & 3 ) + 1

int32 GetByteCountForCharCount(const char* utf8Str, int charCnt)
{
    int ByteCount = 0;
    for (int i = 0; i < charCnt; i++)
    {
        int charlen = UTF8_CHAR_LEN(*utf8Str);
        ByteCount += charlen;
        utf8Str += charlen;
    }
    return ByteCount;
} 
```

所以，假设你想 substr() 来自第 7 个字符的字符串。没问题：

```
int32 pos = GetByteCountForCharCount(str.c_str(), 7);
str.substr(pos); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-22T06:55:58.020

基于[此](http://www.daemonology.net/blog/2008-06-05-faster-utf8-strlen.html)，我编写了我的 utf8 子字符串函数：

```
void utf8substr(std::string originalString, int SubStrLength, std::string& csSubstring)
{
    int len = 0, byteIndex = 0;
    const char* aStr = originalString.c_str();
    size_t origSize = originalString.size();

    for (byteIndex=0; byteIndex < origSize; byteIndex++)
    {
        if((aStr[byteIndex] & 0xc0) != 0x80)
            len += 1;

        if(len >= SubStrLength)
            break;
    }

    csSubstring = originalString.substr(0, byteIndex);
} 
```

# pdf - 在网络浏览器中创建、编辑和保存 pdf 文件（受证书保护！）

> ID：10846955
> 
> 赞同：0
> 
> 时间：2012-06-01T08:34:44.343
> 
> 标签：pdf

我想知道是否可以在网络浏览器中打开一个 pdf 文件（位于网络服务器上），对其进行编辑，然后将其与更改一起保存。基本上我需要的是在我的网络浏览器中打开、编辑和保存受证书保护的 pdf 文件，而无需将副本下载到我的桌​​面。pdf 文件包含在保存更改之前需要用文本填写的文本字段。我知道可以在浏览器中查看 pdf 文件，但我不确定当它受证书保护时是否可以编辑它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T17:35:50.680

您的要求可以通过以下方法执行：首先最简单的方法是使用 Adob​​e Forms 服务器。如果您想使用自己的 PDF，您将需要扩展阅读器扩展以在框架中显示表单并执行跨脚本以告诉表单将​​自身发布到服务器。注意：阅读 Adob​​e Reader Extension 许可扩展阅读器扩展有使用限制。显然，您可以启用阅读器扩展，允许用户下载编辑并将文件上传到您的服务器。认证表格意味着您无法更改表格结构，但您可以填写表格并保存（如果启用了阅读器扩展）

# jsf - 立即上传 / 使用丰富的自动上传：文件上传

> ID：10846958
> 
> 赞同：0
> 
> 时间：2012-06-01T08:35:01.707
> 
> 标签：jsf, richfaces, ajax4jsf

当我选择一个文件时，上传不会自动开始。仍然需要通过单击上传按钮手动上传。

```
<rich:fileUpload ....
        immediateUpload="true"> 
```

有没有办法使这项工作？我使用richfaces 4.2.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:19:59.253

1.  首先将 fileupload.js 复制到您的应用程序中，并在您的页面中添加相同的内容，如下所示：

    ```
    <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/fileupload.js"></script> 
    ```

2.  第二个去 fileUpload.js 并找到一个名为的函数`__updateButtons`并更新第一个 if 它正在检查项目长度`this.__startUpload()`；

    如下所示。

    ```
    __updateButtons: function() {

    if (!this.loadableItem && this.list.children(".rf-fu-itm").size()) {

        if (this.items.length) {

            //this.uploadButton.css("display", "inline-block");

            this.__startUpload();// New - Added the immediate upload to work.

        } else { 
    ```

# java - 克隆具有同一类的父级和子级的对象

> ID：10846960
> 
> 赞同：1
> 
> 时间：2012-06-01T08:35:18.760
> 
> 标签：java, clone

我有一个对象 CategoryBean ，其中定义了其他对象 CategoryBean （其子级）和另一个对象 CategoryBean （其父级）的列表。

克隆它的孩子不是问题，但克隆它的父母是行不通的。事实上，当我拥有我的对象 A 及其父对象 P 时，当我通过 P 并获取其子对象的列表（我应该罚款 A）时，A 的引用与 P 的子对象不同。对象相等（“属性”说）但不一样。

这是我的课程及其属性：

```
public class CategoryBean implements Externalizable, Cloneable {
    public static final boolean ACTIVE = true;
    public static final boolean INACTIVE = false;

    public static final int VALIDATED = 1;
    public static final int NON_OBSERVED = 2;
    public static final int IN_PROGRESS = 3;
    public static final int PARTIEL = 4;

    private String perimetre;
    private CategoryBean parentCategory;
    private List<CategoryBean> categoryList = new LinkedList<CategoryBean>();
    protected String title;
    /**
     * Category validée ou non
     */
    protected int state = NON_OBSERVED;
    /**
     * Category active ou inactive
     */
    protected boolean activated = ACTIVE;

    /**
     * @return the parentCategory
     */
    public CategoryBean getParentCategory() {
        return parentCategory;
    }

    /**
     * @param parentCategory
     *            the parentCategory to set
     */
    public void setParentCategory(CategoryBean parentCategory) {
        this.parentCategory = parentCategory;
    }

    /**
     * @return the perimetre
     */
    public String getPerimetre() {
        return perimetre != null ? perimetre.trim() : null;
    }

    /**
     * @param perimetre
     *            the perimetre to set
     */
    public void setPerimetre(String perimetre) {
        this.perimetre = perimetre != null ? perimetre.trim() : null;
    }

    /**
     * @return the category
     */
    public List<CategoryBean> getCategoryList() {
        return categoryList;
    }

    /**
     * @param category
     *            the category to set
     */
    public void setCategoryList(List<CategoryBean> categoryList) {
        this.categoryList = categoryList;
    }

    /**
     * @return the title
     */
    public String getTitle() {
        return title != null ? title.trim() : null;
    }

    /**
     * @param title
     *            the title to set
     */
    public void setTitle(String title) {
        this.title = title != null ? title.trim() : null;
    }

    /**
     * @return the state
     */
    public int getState() {
        return state;
    }

    /**
     * @param state
     *            the state to set
     */
    public void setState(int state) {
        this.state = state;
    }

    /**
     * @return the activated
     */
    public boolean isActivated() {
        return activated;
    }

    /**
     * @param activated
     *            the activated to set
     */
    public void setActivated(boolean activated) {
        this.activated = activated;
    }

    @Override
    public int hashCode() {
        if (parentCategory != null && categoryList != null && title != null) {
            return parentCategory.hashCode() + categoryList.hashCode() + title.hashCode();
        } else if (categoryList != null && title != null) {
            return parentCategory.hashCode() + categoryList.hashCode() + title.hashCode();
        } else {
            return super.hashCode();
        }
    }

    @Override
    public boolean equals(Object o) {
        if (o != null && o instanceof CategoryBean) {
            CategoryBean o2 = (CategoryBean) o;
            if (getPerimetre() != null && getTitle() != null && getParentCategory() != null) {
                return getPerimetre().equals(o2.getPerimetre()) && getTitle().equals(o2.getTitle())
                        && getParentCategory().equals(o2.getParentCategory());
            } else if (getPerimetre() != null && getTitle() != null && getPerimetre().equals(getTitle())) {
                return getPerimetre().equals(o2.getPerimetre()) && getTitle().equals(o2.getTitle());
            }
        }
        return super.equals(o);
    }

    @SuppressWarnings("unchecked")
    @Override
    public void readExternal(ObjectInput input) throws IOException, ClassNotFoundException {
        setPerimetre((String) input.readObject());
        setParentCategory((CategoryBean) input.readObject());
        setCategoryList((List<CategoryBean>) input.readObject());
        setTitle((String) input.readObject());
        setState((Integer) input.readObject());
        setActivated((Boolean) input.readObject());
    }

    @Override
    public void writeExternal(ObjectOutput output) throws IOException {
        output.writeObject(getPerimetre());
        output.writeObject(getParentCategory());
        output.writeObject(getCategoryList());
        output.writeObject(getTitle());
        output.writeObject(getState());
        output.writeObject(isActivated());
    }

    @Override
    public CategoryBean clone() throws CloneNotSupportedException {
        try {
            CategoryBean clone = (CategoryBean) super.clone();
            clone.setPerimetre(getPerimetre());
            clone.setParentCategory(getParentCategory());

            List<CategoryBean> categoryListClone = null;
            if (getCategoryList() != null) {
                categoryListClone = new LinkedList<CategoryBean>();
                for (int i = 0; i < getCategoryList().size(); i++) {
                    categoryListClone.add(getCategoryList().get(i).clone());
                }
            }
            clone.setCategoryList(categoryListClone);

            clone.setTitle(getTitle());
            clone.setState(getState());
            clone.setActivated(isActivated());
            return clone;
        } catch (CloneNotSupportedException e) {
            throw new InternalError();
        }
    }
} 
```

你知道我在克隆方法中做错了什么吗？

谢谢你的帮助:)

（编辑）解决方案：

```
public CategoryBean clone() throws CloneNotSupportedException {
    try {
        CategoryBean clone = (CategoryBean) super.clone();
        clone.setPerimetre(getPerimetre());

        List<CategoryBean> categoryListClone = null;
        if (getCategoryList() != null) {
            categoryListClone = new LinkedList<CategoryBean>();
            for (int i = 0; i < getCategoryList().size(); i++) {
                CategoryBean childClone = getCategoryList().get(i).clone();
                childClone.setParentCategory(clone);
                categoryListClone.add(childClone);
            }
        }
        clone.setCategoryList(categoryListClone);

        clone.setTitle(getTitle());
        clone.setState(getState());
        clone.setActivated(isActivated());
        return clone;
    } catch (CloneNotSupportedException e) {
        throw new InternalError();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:06:01.460

我认为您需要缓存在克隆操作期间已经克隆的父bean，以便`clone.setParentCategory`在子项中调用时，这是注入属性的克隆父项...

不确定它是否清晰:)......所以......像这样的东西（小心，未经测试！）：

```
@Override
public CategoryBean clone() throws CloneNotSupportedException {
    return cloneRecursive(new HashMap<CategoryBean, CategoryBean>());    
}

private CategoryBean cloneRecursive(Map<CategoryBean, CategoryBean> categoryBeans) throws CloneNotSupportedException {
    try {
        CategoryBean clone = (CategoryBean) super.clone();
        categoryBeans.put(this, clone);
        clone.setPerimetre(getPerimetre());
        clone.setParentCategory(categoryBeans.get(getParentCategory()));

        List<CategoryBean> categoryListClone = null;
        if (getCategoryList() != null) {
            categoryListClone = new LinkedList<CategoryBean>();
            for (int i = 0; i < getCategoryList().size(); i++) {
                categoryListClone.add(getCategoryList().get(i).cloneRecursive(categoryBeans));
            }
        }
        clone.setCategoryList(categoryListClone);

        clone.setTitle(getTitle());
        clone.setState(getState());
        clone.setActivated(isActivated());
        return clone;
    } catch (CloneNotSupportedException e) {
        throw new InternalError();
    }
} 
```

# sql-server-2008 - SQL Server 2008 - 使用连接 B 和 C 的结果更新表 A

> ID：10846961
> 
> 赞同：1
> 
> 时间：2012-06-01T08:35:23.493
> 
> 标签：sql-server-2008, sql-update

我在发布此问题之前尝试搜索，但找不到另一个示例。

我痛苦地意识到 SQL 目前是我的致命弱点并且正在努力，所以请多多包涵！

我的悲惨故事涉及 3 张桌子：

tableA：有我想更新的列（estId）

tableB：包含建立详细信息，包括名称（estName）

tableC：包含要导入的机构数据，包括机构名称（estName）和关联的机构ID（estCode）

在伪语言中，我希望实现的是：

```
Update tableA
Set estId = tableC.estCode
Where tableC.estName = tableB.estName 
```

我试过这个：

```
UPDATE tableA
SET estId = tableC.estCode
FROM
    tableC
    JOIN tableB
    ON tableC.estName = tableB.estName 
```

那失败了。或者更确切地说，它更新了 estId 列，但每一行都包含 tableC 中的第一个值。

我可能遗漏了一些明显的东西......

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:04:45.517

UPDATE t_alias SET t_alias.estId = tableC.estCode FROM tableA as t_alias JOIN tableB on tableB.estID = tableA.estID JOIN tableC ON tableC.estName = tableB.estName

# java - 插入不存在的`table`

> ID：10846962
> 
> 赞同：0
> 
> 时间：2012-06-01T08:35:30.093
> 
> 标签：java, mysql

我想将值插入表中，但需要检查该值是否存在于最后一行中。我通常插入像

```
INSERT INTO `table` (`column1`,`column2`,`column3`,`column4`) VALUES ('value1','value2','value3','value4') 
```

但是现在我需要检查一下，如果value1存在于表的最后一行不要插入，否则插入。

为此，我正在尝试使用

```
WHERE NOT EXISTS 
```

如果值存在，我实际上想检查表的最后一行，那么它不应该重复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:47:56.290

您可以明确说明当表的主键已经存在时会发生什么。例子：

```
INSERT INTO table (...) VALUES (...) ON DUPLICATE KEY UPDATE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:37:48.503

别名子选择。它在 MySQL 中是强制性的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T08:39:22.907

顺便说一句，根据文档，在 WHERE NOT EXISTS 选择中，您不需要指定字段（在您的情况下为 value1、value2），因为这完全被忽略了。所以只需使用 *

无论如何，我相信这将回答您的问题： [如何在 MySQL 中“如果不存在则插入”？](https://stackoverflow.com/questions/1361340/how-to-insert-if-not-exists-in-mysql)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T08:41:55.783

在该对（第 1 列，第 2 列）上添加唯一约束不是更好的方法吗？

# perl - WWW::Selenium 捕获组件刷新

> ID：10846966
> 
> 赞同：2
> 
> 时间：2012-06-01T08:36:02.683
> 
> 标签：perl, selenium

我正在编写一个使用`WWW::Selenium`模块来自动化网站的 perl 脚本。我根本不是网络开发人员，对网络技术一无所知。

让我试着用外行的方式来解释这个问题。

我正在处理一个网页，它有一个带有按钮的订单。当我单击按钮时，没有页面提交，但按钮标签发生了变化。

比如说，按钮在多次单击时会经历这些变化。

获取报价 --> 订单 --> 确认订单

每次单击按钮时，页面都没有刷新，但按钮标签如上所示不断变化。

按钮的`id`始终相同，只有`class`变化。

我怎样才能在 WWW::Selenium 中做到这一点？

目前我`wait_for_page_to_load(5000)`在每次点击后使用。但是点击对标签没有任何影响，我得到了 5000 秒后超时的错误。

我应该使用其他功能等待吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:09:02.200

好像你可以使用

```
$class = $sel->get_attribute($attribute_locator) 
```

其中 $attribute_locator 是 button@class ，其中 button 是您单击的元素定位器。检查 $class 是否是您期望的课程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T14:52:19.170

你可以做这样的事情

```
$sel->wait_for_text_present_ok("Your text","time to wait","The message to display if this fails"); 
```

和下面的一个例子 -

```
$sel->wait_for_text_present_ok("Order Confirmed","9000","The order was successfully placed"); 
```

# jquery - jQuery 到达 document.ready() 尽管 .holdReady() 调用。Slickgrid 错误 - 未定义 Slick（5 超出范围 4）错误 - 依赖项

> ID：10846968
> 
> 赞同：0
> 
> 时间：2012-06-01T08:36:15.700
> 
> 标签：jquery, slickgrid, undefined-behavior, undefined-reference, document-ready

在使用 jQuery 和 slickGrid 的以下脚本中，我不断收到错误消息，`Slick is not defined (5 out of range 4)`或者`Slick is not defined (6 out of range 4)`- 在 FireBug 和 Chrome 中我都得到：

```
Uncaught ReferenceError: Slick is not defined
$.ready.$.css.opacity
f.Callbacks.o jquery-1.7.2.min.js.php:2
f.Callbacks.p.add jquery-1.7.2.min.js.php:2
e.fn.e.ready jquery-1.7.2.min.js.php:2
(anonymous function)
e.extend.globalEval jquery-1.7.2.min.js.php:2
e.extend.globalEval jquery-1.7.2.min.js.php:2
f.fn.extend.domManip jquery-1.7.2.min.js.php:4
e.extend.each jquery-1.7.2.min.js.php:2
f.fn.extend.domManip jquery-1.7.2.min.js.php:4
f.fn.extend.append jquery-1.7.2.min.js.php:3
f.fn.extend.html jquery-1.7.2.min.js.php:4
e.extend.access jquery-1.7.2.min.js.php:2
f.fn.extend.html jquery-1.7.2.min.js.php:4
$.ajax.success AJAX.js:26
f.Callbacks.o jquery-1.7.2.min.js.php:2
f.Callbacks.p.fireWith jquery-1.7.2.min.js.php:2
w jquery-1.7.2.min.js.php:4
f.support.ajax.f.ajaxTransport.send.d jquery-1.7.2.min.js.php:4
FBL.ns.handleStateChange 
```

但是，如果我注释掉`var grid = new Slick.Grid("#myGrid", data, columns, options);`，脚本运行良好。我已经确认所有脚本都在加载，甚至会在每个脚本中触发警报。同样在 Firebug/Chrome 中，我阅读了加载的脚本，它们看起来是正确的。有什么我可以忽略的吗？页面代码如下：

```
<link type="text/css" rel="stylesheet" href="css/slick.grid.css" />
<link type="text/css" rel="stylesheet" href="css/surge.slickGrid.css" /> 
<link type="text/css" rel="stylesheet" href="css/jquery.calendarPicker.css" />  
<link type="text/css" rel="stylesheet" href="css/cupertino/jquery-ui-1.8.20.custom.css" />

    <div style="position:relative; overflow:visible; margin:25px 0 0 0;">
        <div id="loader" style="position:absolute; z-index:997;top: 62px; left:200px;"><img src="images/loading.gif" border="0" /></div>

        <div id="dateInput" style="visibility:hidden;"><p><label for="datepicker">Date: </label><input type="text" id="datepicker" size="30"/></p>

    </div>
        <div id="myGrid" style="width:900px;height:200px;visibility:hidden;"></div> 
    </div>

      <div class="options-panel">
        <h2>Instructions:</h2>
        <ul>
          <li>Select the date by clicking the date image above the table</li>
          <li>Enter your event data (you can enter multiple events for that date)</li>
          <li>To add another event, hit your <em>TAB</em> key and a new row will be created</li>
          <li>When you're all done for this date, click the <em>Commit Changes</em> button to have your events saved to the site</li>
        </ul>

        <h2>Options:</h2>

<button>Commit Changes</button>
      </div>

<script type="text/javascript" src="js/jquery-ui-1.8.20.custom.min.js.php"></script>
<script>
$.getScript("js/slickGrid/slick.grid.js");
    $.getScript("js/slickGrid/surge.core.js");
        $.getScript("js/slickGrid/surge.slickGrid.js"); 
            $.getScript("js/jquery.calendarPicker.js"); 
                $.getScript("js/jquery.json-2.3.min.js");   

</script>

<? //Instantiate   slickGrid jQueryUI widget ?>
<script>
$(document).ready(function(){
    alert('Ready');
    //======== if I comment the following line out, the script completes without error =======
    var grid = new Slick.Grid("#myGrid", data, columns, options);

    $(function() {
        $( "#datepicker" ).datepicker();

            $( "#datepicker" ).datepicker( "option", "showAnim", "clip" );
    });
});

$(document).ready(function() {
    //Hide loading image div and show loaded jQuery modules
   $('#loader').hide();
   $('#dateInput').css({opacity: 0.0, visibility: "visible"}).animate({opacity: 1.0},"slow");
   $('#myGrid').css({opacity: 0.0, visibility: "visible"}).animate({opacity: 1.0},"slow");

});
</script>   
    <hr />EOP 
```

***更新的脚本加载顺序***

```
$.holdReady(true);
$.getScript("js/slickGrid/jquery.event.drag-2.0.min.js",function(){
    $.getScript("js/slickGrid/slick.core.js",function(){
        $.getScript("js/slickGrid/slick.grid.js",function(){
            $.getScript("js/slickGrid/surge.core.js",function(){
                $.getScript("js/slickGrid/surge.slickGrid.js",function(){
                    $.holdReady(false);
                    alert('Done Loading slicks'); 
                        var grid = new Slick.Grid("#myGrid", data, columns, options);
                        alert('After Grid created');
                        $('#myGrid').slickGrid({
                            forceFitColumns: true,
                            columns: [
                                { id: "venue", name: "Venue", field: "f_venue"},
                                { id: "eventName", name: "Event Name", field: "f_eventName" },
                                { id: "time", name: "Time", field: "f_time" },
                                { id: "pricing", name: "Pricing", field: "f_price" },
                                { id: "visible", name: "Visible", field: "f_visible", width: 20 }
                            ],
                            data: [
                              { f_venue: "Finn's", f_eventName: "Roy Rogers", f_time: "9pm", f_price: "$10 before 10", f_visible: 1 },
                            ]
                        });
                        alert('after data population');

                        var json = $.toJSON( $('#myGrid').slickGrid('data'));

                    }).fail(function(jqxhr, settings, exception) {  document.write('FAILED: '+exception); });
            }).fail(function(jqxhr, settings, exception) {  document.write('FAILED: '+exception); });
        }).fail(function(jqxhr, settings, exception) {  document.write('FAILED: '+exception); });
    }).fail(function(jqxhr, settings, exception) {  document.write('FAILED: '+exception) });//console.log( textstatus );
}).fail(function(jqxhr, settings, exception) {  document.write('FAILED: '+exception) });//console.log( textstatus ); 
```

我正在尝试加载一系列 .js 文件，这些文件依赖于成功完成加载之前的脚本。因此，我正在使用`.getScript()`（我对任何其他想法持开放态度，因为这很难解决）加载脚本，成功时它将下一个或回显错误加载到屏幕上，并且重复直到最后一个脚本，然后应该显示网格并允许`$(document).ready()`事件触发。问题是，这些事情都没有发生。似乎什么都不做，`$.holdReady()`虽然警报（'done loading slicks'）正确触发，并且Web开发人员控制台不再报告错误，并且脚本按我想要的顺序加载，但网格没有显示，并且`$(document).ready()`事件触发为虽然`$.holdReady()`甚至不在那里。对此实施的任何进一步了解都会有所帮助。我知道 requireJS 正是为此而构建的（依赖项），但我真的无法弄清楚如何在这种情况下正确使用它。

***更新 - 所有现在都在工作，除了`$.holdReady()`***

现在除了`.holdReady()`. 我通过在巢的中心实例化网格来说明这一点，所以它只在所有脚本都成功完成时运行。效果很好，而且比 requireJS 更轻。虽然。`getScript()`不会缓存并且总是从服务器重新加载文件。可以将这些调用替换为`$.ajax()`调用，并启用缓存以大幅提高您不经常更改的文件的性能。

我将发布最终的嵌套脚本，以防某些人无法让 slickGrid 为他们工作（对于如此出色的产品来说，文档很烂！）。

```
<script>$.holdReady(true);</script>  
<script  type="text/javascript" language="javascript" src="js/slickGrid/lib/firebugx.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.20.custom.min.js.php"></script>
<script src="js/slickGrid/plugins/slick.cellrangedecorator.js"></script>
<script src="js/slickGrid/plugins/slick.cellrangeselector.js"></script>
<script src="js/slickGrid/plugins/slick.cellselectionmodel.js"></script>
<script src="js/slickGrid/slick.formatters.js"></script>
<script src="js/slickGrid/slick.editors.js"></script>

<script>

    $.getScript("js/slickGrid/jquery.event.drag-2.0.min.js",function(){
        $.getScript("js/slickGrid/slick.core.js",function(){
            $.getScript("js/slickGrid/slick.grid.js",function(){

                        $.holdReady(false);
                        var grid;

                        var columns = [
                        { id: "VisitDate", name: "VisitDate", field: "VisitDate", width: 120, cssClass: "cell-title", editor: Slick.Editors.Text },
                        { id: "VisitTime", name: "VisitTime", field: "VisitTime", width: 100, editor: Slick.Editors.Text },
                        { id: "PrimaryComplaint", name: "PrimaryComplaint", field: "PrimaryComplaint", width: 100, cssClass: "cell-right", editor: Slick.Editors.Text },
                        ];

                        var data = [
                            {
                            "VisitDate": "11/30/2009",
                            "VisitTime": "0117",
                            "PrimaryComplaint": "General malaise "
                            },
                            {
                            "VisitDate": "02/08/2010",
                            "VisitTime": "0930",
                            "PrimaryComplaint": "General malaise "
                            }
                        ];

                        var options = {
                        editable: true,
                        enableAddRow: true,
                        enableCellNavigation: true,
                        asyncEditorLoading: false,
                        forceFitColumns: true
                        };

                        // grid = new Slick.Grid($("#acs-work"), returnObj.source, columns, options);
                        //var $tabs = $('#tabset').tabs();
                        //var selected = $tabs.tabs('option', 'selected') + 1; // => 0[edit]
                        //var panelstr = "#panel" + selected;
                        //to load dynamic data
                        // PROTO: grid = new Slick.Grid($(panelstr), returnObj.source, columns, options); 
                        grid = new Slick.Grid("#myGrid", data, columns, options); 

                            $('#loader').hide();
                           $('#dateInput').css({opacity: 0.0, visibility: "visible"}).animate({opacity: 1.0},"slow");
                           $('#myGrid').css({opacity: 0.0, visibility: "visible"}).animate({opacity: 1.0},"slow");

            }).fail(function(jqxhr, settings, exception) {  document.write('FAILED: '+exception); });
        }).fail(function(jqxhr, settings, exception) {  document.write('FAILED: '+exception) });//console.log( textstatus );
    }).fail(function(jqxhr, settings, exception) {  document.write('FAILED: '+exception) });//console.log( textstatus ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T08:48:23.017

`$.getScript`运行一个 ajax http 请求，不能保证在文档“准备好”之前解析和运行。因此，您的`$(document).ready(function(){...});`代码完全有可能（很可能）在这 5 个`$.getScript`命令完成之前运行。

我从来没用过`$.getScript`。为了让网站加载更快，只需将所有 javascript 移动到页脚即可。这样页面将在获取 javascript 之前加载。这将与 using 具有相同的效果，因为`$.getScript`页面将在加载 javascript 之前呈现，但它不是异步执行的。

`$.getScript`我会假设，当您想在用户操作或类似操作后通过 ajax 获取脚本时，而不是使页面加载更快（这是我假设您使用它的目的）。

# javascript - 如何在网站上自定义 tumblr 提要

> ID：10846969
> 
> 赞同：0
> 
> 时间：2012-06-01T08:36:21.343
> 
> 标签：javascript, jquery, css, feed, tumblr

大家好，感谢阅读。

我正在为我的朋友乐队建立一个小型（一页）网站，并且正在使用 tumblr 提要而不是新闻部分。唯一的事情是，我是 JS / JQuery 的新手。

我设法让帖子显示得很好，但目前提要拉出帖子标题、一些简介和日期（按此顺序）。因为我想在标题之前显示日期，所以我粗略地使用了一些 CSS 将日期移动到标题上方（位置：相对）。

到目前为止，我在标题中有这个：

```
<script src="http://www.google.com/jsapi" type="text/javascript"> </script> 
```

这在正文结束之前的正文中：

```
<script type="text/javascript">

google.load("feeds", "1"); 

      function OnLoad() {       
    var feedControl = new google.feeds.FeedControl();             
    feedControl.setNumEntries(3); 

    feedControl.addFeed("http://xxxxxxxxxx.tumblr.com/rss");             
    feedControl.draw(document.getElementById("recentPosts"));     
}           

google.setOnLoadCallback(OnLoad); 

</script> 
```

有谁知道我如何自定义输出以使日期出现在标题之前？

谢谢，约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:48:36.933

我认为您需要破解 Google 脚本呈现的 html；您可以尝试使用 jquery 以使事情变得更容易。请记住在

```
google.setOnLoadCallback(OnLoad);
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T10:18:57.327

可能是这样的（未经测试）：

```
 <script language="Javascript">
google.load("feeds", "1"); 
function loadFeeds()
{
    var feedControl = new google.feeds.FeedControl();             
    feedControl.setNumEntries(3); 

    var html;
    var feed = new google.feeds.Feed("http://www.digg.com/rss/index.xml");

    feed.load(function(result) {
    if (!result.error) {
        var container = document.getElementById("feed");
        for (var i = 0; i < result.feed.entries.length; i++) {
            var entry = result.feed.entries[i];

            html+=entry.date+"<p>"+entry.title+"</p>"+entry.description+"<br>";

            document.getElementById("feed").innerHTML =html;
        }
    }
    });   
}
google.setOnLoadCallback(loadFeeds);    
</script> 
```

# php - 捕获会话超时 Symfony2

> ID：10846970
> 
> 赞同：5
> 
> 时间：2012-06-01T08:36:26.057
> 
> 标签：php, symfony, firewall

我有一个关于 Symfony2 的问题，希望有人能帮助我。Symfony 在哪里检查用户会话，如果没有会话，该怎么办。比如重定向到登录页面。

我发现了一些类似的问题，但不是我的意思。

为什么我想知道它？如果有会话超时。我想检查调用是否是 XmlHttpRequest。如果是这样，我想返回一个 JSON，以便 javascript 可以处理它。如果不是，请按正常方式进行。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T10:42:36.680

您必须创建侦听器

[注册事件监听器和订阅者](http://symfony.com/doc/current/cookbook/doctrine/event_listeners_subscribers.html)

配置.yml：

```
services:
    mycompany.demobundle.listener.request:
        class: MyCompany\DemoBundle\RequestListener
        arguments: [@router, @security.context]
        tags:
             - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest } 
```

如果会话超时，则在 RequestListener 中进行测试：

```
$inactive = 600; 
$session_life = time() - $request->getSession()->('timeout');
if($session_life > $inactive && $request->isXmlHttpRequest() )
    {  
         $headers['Content-Type'] = 'application/json';
         return new Response(json_encode($data), $status, $headers); 
```

# linux - 性能/负载测试

> ID：10846976
> 
> 赞同：2
> 
> 时间：2012-06-01T08:36:49.140
> 
> 标签：linux, performance, jmeter, performance-testing

我希望在我的站点上进行性能测试，模拟成千上万的用户并找到每台服务器的容量限制。我使用的工具是 jmeter，我为测试场景准备了一个 .jmx。但是当我尝试同时模拟 1000 个用户时，我开始得到：

```
<httpSample t="0" lt="0" ts="1338538936990" s="false" lb="VerifyPassword" rc="Non HTTP response code: java.net.SocketException" rm="Non HTTP response message: Too many open files" tn="LoadConfig 1-901" dt="text" by="1375"/> 
```

我认为错误出在客户端，因为套接字连接太多。如果是这样，我如何从我的本地机器模拟这种情况？我可以增加 linux 上打开的套接字的数量吗？

我发现从单个客户端进行测试的另一件事可能会在客户端成为瓶颈并且服务器工作正常的情况下发出错误警报。如何进行性能测试，以便模拟真实生活场景，让我有 10K+ 用户，每个用户都有自己的 CPU/RAM，然后进行性能测试？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T08:46:57.513

我已经从 .NET 运行了 JMeter，但我认为你的情况也是如此。

您不能增加套接字的数量。**你应该做一个分布式负载测试**。幸运的是，Jmeter 有这个能力:)

您应该查找的谷歌术语是分布式 JMeter 测试或远程 JMeter 测试。如果碰巧你只能使用本地机器，你可能会使用虚拟机来创建几个 JMeter 分布式实例......

检查：http: [//jmeter.apache.org/usermanual/remote-test.html](http://jmeter.apache.org/usermanual/remote-test.html)

# php - 如何根据继承顺序包含文件

> ID：10846977
> 
> 赞同：0
> 
> 时间：2012-06-01T08:36:50.937
> 
> 标签：php

我有一个文件列表，其中一个文件在同一目录中继承另一个文件。我想包含一个目录的所有文件，如何按继承顺序执行，以免出现任何错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:47:10.457

与其自己计算依赖关系，不如使用[`spl_autoload_register()`](http://www.php.net/spl_autoload_register).

这样，您的依赖关系就可以根据需要得到解决。有点像“即时”加载:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:54:34.833

您可以使用**解析器**来检查依赖项，但这将是大量工作并且是真正的性能杀手。

您可以对文件进行排序并在它们前面加上数字

```
001.init.php
002.db_connect.php
003.pre_filters.php 
```

但是，如果您手动对它们进行排序，则依赖文件名是毫无意义的。

如果你有类继承，你可以结合一个自动加载器并要求一次。使用 require_once 注册一个自定义自动加载器以要求文件，并使用循环包含所有文件。如果您需要第 4 个文件中第 8 个文件的类，自动加载器将提前加载第 8 个文件，当您的 inlude 循环到达第 8 个文件时，不会发生任何事情，因为 require_once 不会再次包含该文件。

但是您可能已经意识到：从文件系统中以随机顺序包含相互依赖的文件**并不是**一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T08:48:43.220

如果您的文件/s 对其他文件有某些依赖关系，请确保首先包含“父”文件/s。

例如，您在文件 A.php 中有一个类 A：

```
 <?php

    class A {
      // .. statements
    } 
```

你有一个类 B 扩展名为 B.php 的 A：

```
 <?php

   require_once( "A.php" );
   class B extends A {
     // .. statements
   } 
```

这个想法是在使用该文件中的任何函数/类/语句之前首先“包含”/“要求”所需的文件。在 PHP 5 中，您可以使用自动加载函数“自动”添加/包含您需要的文件，而无需不断键入 require 函数。

# emacs - emacs“站点”代表什么？

> ID：10846983
> 
> 赞同：4
> 
> 时间：2012-06-01T08:37:14.513
> 
> 标签：emacs, elisp

我是emacs的初学者。当我尝试配置我的 emacs 时，我搜索了很多示例。他们中的大多数都有一个 site-lisp 目录。

我的问题是为什么不将 my-lisp 用于自制的 lisp 文件，而将 vendor-lisp 用于其他人的站点。

以及 site-lisp 目录应该包含哪些内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T09:17:53.190

`my-lisp`并且`vendor-lisp`是用于组织您的个人 elisp 配置和库的完美目录名称。

“站点”表示“这台计算机”，因此该`site-lisp`目录用于 elisp，该目录应该可供该计算机的所有用户使用。

与[.emacs.d 和 site-lisp 目录](https://stackoverflow.com/questions/10777239/emacs-d-and-site-lisp-directory/10777412)类似（请关注更多详细信息），我的印象是您可能会询问`site-lisp`在您的用户特定配置中是否有一个目录，这将违反此命名约定，并且可能是有点混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T09:10:14.997

如果你环顾四周，还有`python-site`和`ruby-site`。包管理中的其他包使用它们将`.el`文件安装在 emacs 在加载时找到它们的目录中。

# android - 如何将选定的电子邮件从 android 联系人获取到应用程序？

> ID：10846987
> 
> 赞同：-1
> 
> 时间：2012-06-01T08:37:25.373
> 
> 标签：android, email, android-contacts

我想选择构建一个应用程序，该应用程序包括从本地联系人中选择电子邮件 ID。如何在应用程序中获取选定的电子邮件值。如何实现这一点，任何独立示例都会很有用。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:53:10.363

1.  实现联系人列表如下：

    ```
     public class contDetail extends Activity implements OnItemClickListener {    
    private static final String[] PROJECTION = new String[] {            
    ContactsContract.Contacts._ID,            
    ContactsContract.Contacts.DISPLAY_NAME,            
    ContactsContract.Contacts.HAS_PHONE_NUMBER,            
    ContactsContract.Contacts.LOOKUP_KEY  
    };
    private int mIdColumnIndex;
    private int mHasPhoneColumnIndex;
    private TextView mPhone;
    @Override    
     public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
           setContentView(R.layout.pickcontact);
       mPhone = (TextView) findViewById(R.id.test); 
    ListView myList=(ListView)findViewById(R.id.list1); 
    Cursor c = managedQuery(ContactsContract.Contacts.CONTENT_URI,
            PROJECTION, null, null, null);       
            mIdColumnIndex = c.getColumnIndex(ContactsContract.Contacts._ID);      
            mHasPhoneColumnIndex = c.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER);
            ListAdapter adapter = new SimpleCursorAdapter(this, 
                    android.R.layout.simple_list_item_1,c, 
                    new String[] { ContactsContract.Contacts.HAS_PHONE_NUMBER },
                    new int[] { android.R.id.text1 }); 
            myList.setAdapter(adapter); 
            myList.setOnItemClickListener(this);
            //setOnItemSelectedListener(this);      

       }

       public void onItemClick(AdapterView<?>parent, View v, int position, long id) {
    if (position >= 0) { 
    final Cursor c = (Cursor) parent.getItemAtPosition(position); 
    if (c.getInt(mHasPhoneColumnIndex) > 0) { 
    final long contactId = c.getLong(mIdColumnIndex);   
    final Cursor phones = getContentResolver().query(  
    ContactsContract.CommonDataKinds.Phone.CONTENT_URI, 
    new String[] { ContactsContract.CommonDataKinds.Phone.NUMBER }, 
    ContactsContract.CommonDataKinds.Phone.CONTACT_ID + "=" + contactId, null, 
    ContactsContract.CommonDataKinds.Phone.IS_SUPER_PRIMARY + " DESC"); 
    try {             
    phones.moveToFirst();   
        mPhone.setText(phones.getString(0));
        String ph = phones.getString(0);
        Intent intent = this.getIntent(); 
        intent.putExtra("SOMETHING",ph ); 
        this.setResult(RESULT_OK, intent); 
        finish(); 

    } finally {                 
    phones.close();    
    }          
    } else {  
    mPhone.setText(R.string.button_info_text);  
    }}  
       }

       public void onNothingSelected(AdapterView parent) {
    mPhone.setText(R.string.button_info_text);
    }

     } 
    ```

2.  将所选联系人复制到您的活动的 EditText 框中，如下所示：

    ```
     @Override
     protected void onActivityResult(int requestCode, int resultCode, Intent data)                  {
      super.onActivityResult(requestCode, resultCode, data);
      if(resultCode==RESULT_OK && requestCode==1)       
       ed1.setText(data.getStringExtra("SOMETHING"));
      if(resultCode==RESULT_OK && requestCode==2)       
         ed2.setText(data.getStringExtra("SOMETHING"));   
       } 
    ```

# dll - 如何确定Windows上安装的库是32位还是64位？

> ID：10846989
> 
> 赞同：0
> 
> 时间：2012-06-01T08:37:37.117
> 
> 标签：dll

如何从库文件中判断库是 32 位还是 64 位？为此，我已经从 ossbuild 安装了 gstreamer，我知道它是 32 位的，但假设如果其他人安装了一个库，那么找到它是否与 32bit 或 64bit 兼容的方法是什么。库的格式也是相似还是不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:50:50.840

当您说“库”时，我猜您的意思是“运行时库”又名。动态链接库 (DLL)，对吗？

在这种情况下，这可能是[这个问题的重复](https://stackoverflow.com/questions/495244/how-can-i-test-a-windows-dll-to-determine-if-it-is-32bit-or-64bit)

# java - 将文本字段值发送到没有表单标签的服务器

> ID：10846996
> 
> 赞同：0
> 
> 时间：2012-06-01T08:37:54.340
> 
> 标签：java, javascript, html, jsp, jakarta-ee

我需要将文本字段值发布到服务器，但我没有将文本字段放在表单标签的旁边。这是我的用例的详细信息

我有一个锚标签

```
<a href="${request.contextPath}/login" class="login">LOGIN</a> 
```

此锚标记不在任何表单标记内，我需要向服务器发送一个额外的值，并且不希望该值作为查询字符串附加。我已经创建了一个隐藏字段并为该隐藏字段提供了所需的值，但是当我单击登录链接并且它进入我的控制器类时，这个隐藏字段值不可用。

有没有办法将该值作为请求参数发送到服务器端类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:40:45.900

您可以使用 ajax 来做到这一点，我建议使用 Jquery

$.post('loginhandle', {用户名:$('#username').val(), 密码: $('#password').val()} function(){});

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T11:14:13.470

```
By using Javascript get value from hidden fields like this 
<script>
var name= document.getElementById("login").value
document.getElementById("topage").innerHTML='<a href="${request.contextPath}/login.jsp"'+'&loginname='+name+' class="login">LOGIN</a>'
</script>
<input type="hidden" name="name" value="ashraf" id='login'>
<div id='topage'>

<a href="" class="login">LOGIN</a>

</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T08:40:35.633

您正在获取而不是发布。您可以附加到他的查询字符串，因为这适用于 get。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T09:04:55.320

在提交表单之前使用 javascript 获取隐藏字段值。使用 document.getElementById("hiddenID").value; 在提交表单之前附加在 URL 中获取的值。该值应该存在于服务器中。

问候， Ajai G

# playframework-2.0 - 在控制器中播放 2 个非动作方法

> ID：10846999
> 
> 赞同：0
> 
> 时间：2012-06-01T08:38:04.200
> 
> 标签：playframework-2.0

如何在 Play 2 控制器上创建非动作函数？有什么方法可以为控制器创建实用程序功能吗？

```
public class Register extends Controller {
  @BodyParser.Of(BodyParser.FormUrlEncoded.class)
  public static Result registerByForm() {
      .......

  }

  // this is utility function
  private static User getFacebookIdByToken(String fbToken) {
     FacebookClient facebookClient = new DefaultFacebookClient(fbToken);
     User user = facebookClient.fetchObject("me", User.class);
     return user;
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T08:45:48.973

是的，您可以按照您展示的方式进行说明。无论如何，我认为该方法更好的地方是`User`课堂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T11:37:16.290

在 Play 1.0 中，无法区分`static void foo()`非动作和动作，因此使用了`@Util`注解。我的猜测是 Play 2.0 可以根据返回类型来区分方法是否是动作，如果您出于某种原因想要`Result`在`Controller`不是一种行为。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-25T12:59:08.197

在 Play 1.2 中，您可以将访问修饰符从**public**更改为**private**。[这篇文章](http://redino.net/blog/2014/03/make-controller-method-non-action-play-framework-1-2/)解释了更多细节