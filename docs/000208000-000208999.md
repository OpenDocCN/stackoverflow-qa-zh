# StackOverflow 问答 000208000-000208999

# linux - 你如何管理服务器的root密码

> ID：208007
> 
> 赞同：18
> 
> 时间：2008-10-16T10:04:54.203
> 
> 标签：linux, security, passwords, ssh-keys

在我们的管理团队中，每个人都拥有所有客户端服务器的 root 密码。但是，如果其中一名团队成员不再与我们合作，我们该怎么办？他仍然有我们的密码，每次有人离开我们时，我们都必须全部更改。

现在我们使用 ssh 密钥而不是密码，但是如果我们必须使用 ssh 以外的其他东西，这将无济于事。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2008-10-16T10:06:19.787

我运行的系统有一个[sudo](http://www.sudo.ws/) -only 策略。即，root 密码是`*`（禁用），人们必须使用 sudo 来获得 root 访问权限。然后，您可以编辑您的`sudoers`文件以授予/撤销人们的访问权限。它非常精细，并且具有很多可配置性——但具有合理的默认值，因此设置起来不会花很长时间。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-19T21:48:29.477

我通常会建议以下内容：

1.  使用*空白*根密码。
2.  禁用远程登录
3.  为 no-root-login 设置 ssh（或仅通过公钥进行 root 登录）
4.  通过将其添加到 /etc/suauth 的顶部来禁用 su 到 root：'root:ALL:DENY'
5.  仅在控制台上为 root 登录启用安全 tty (tty1-tty8)
6.  使用 sudo 进行正常的 root 访问

现在，使用此设置，所有用户都必须使用 sudo 进行远程管理，但是当系统严重混乱时，无需寻找 root 密码来解锁控制台。

编辑：其他提供自己登录名的系统管理工具也需要调整。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-16T10:13:46.417

虽然根据系统的大小使用 Chris 建议的仅 sudo 策略是个好主意，但 ldap 方法也可能会有所帮助。我们通过一个包含所有 root 密码的文件来补充这一点，但 root 密码真的很长而且难以记忆。虽然这可能被认为是一个安全漏洞，但它允许我们在 ldap 服务器关闭时仍然登录。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-17T14:27:39.040

除了可能更好的 sudo 策略之外，没有理由每个管理员不能拥有自己的 UID 0 帐户，但名称不同，密码不同，甚至主目录不同。只需在他们离开时删除他们的帐户即可。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-17T17:46:41.697

合理的强根密码。每个盒子都不一样。没有远程 root 登录，也没有登录密码，只有密钥。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-17T17:21:44.930

我们只是让更改我们管理的每台机器上的 root 密码变得非常容易，所以当人们离开时，我们只需运行脚本。我知道不是很精明，但它奏效了。在我之前，公司的每个人都可以访问所有服务器上的 root。幸运的是，我们远离了这一点。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-17T17:32:52.287

一般来说，如果有人离开我们的团队，我们不会费心更改 root 密码。要么他们离开了公司（并且由于他们的 VPN 已被撤销，他们对大楼的访问权限以及对网络的无线访问权限都已被撤销，因此无法再访问机器），或者他们在公司内部的另一个部门并具有不与我们的环境搞混的专业精神。

是安全漏洞吗？也许。但是，真的，如果他们想搞砸我们的环境，他们会在继续前进之前这样做。

到目前为止，任何想要再次访问我们机器的离开团队的人总是会请求许可，即使他们可以在未经许可的情况下继续使用。我看不出有任何理由阻碍我们完成工作的能力，即，没有理由相信其他任何人向前和向上会做不同的事情。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-16T10:26:34.613

如果您通过证书进行 ssh 访问，您不能通过 ssh 登录并更改`root`密码吗？`passwd`或者`sudo passwd`当您需要执行其他需要密码的操作时？

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-16T10:28:05.437

我们在我工作的地方使用 sudo only 策略，但仍保留 root 密码。只有少数员工可以使用 root 密码。我们有一个名为 Password Manager Pro 的程序，它可以存储我们所有的密码，并且还可以提供密码审核。这使我们可以返回并查看哪些用户访问了哪些密码。因此，我们只能更改实际需要更改的密码。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-08-12T02:15:10.827

**SSH 密钥**没有真正的选择。

为了管理`authorized_keys`许多服务器上的许多文件，如果您不想在每台服务器上使用相同的文件，则必须实施自己的解决方案。要么通过自己的工具，要么使用一些配置管理解决方案，如 puppet、ansible 或类似的东西。

否则一个 for 循环`bash`或一些`clush`操作就足够了。

**除了 SSH 登录之外的任何东西：**
对于您运行的基于登录的服务，请使用某种带有中央后端的身份验证。*请记住，如果此后端不可用，则没有人会做任何工作！*

以集群方式运行服务。不要使用超级欺骗服务后门帐户进行黑客攻击，以便在出现问题时始终可以访问（例如由于配置错误导致管理员访问中断）。无论您如何监控影响此帐户的访问或配置更改，这都是“糟糕的”(TM)。

与其让这个后门正确，不如只对应用程序进行集群，或者至少有一个备用系统定期镜像手头的设置，如果主机死机，然后可以通过网络中的路由更改轻松激活。如果这听起来太复杂，您的业务要么太小，您可以忍受半天到两天的停机时间。或者你真的因为缺乏知识而讨厌集群，只是在错误的事情上存钱。

**一般来说**：如果您确实使用了无法通过某种 Active Directory 或 LDAP 集成使用的软件，则必须手动更改密码。

还有一个专用的密码管理数据库，只能由极少数人直接访问，并且对所有其他人都是只读的，非常好。不要打扰excel文件，这些文件缺乏适当的权限管理。在 .csv 文件上使用版本控制并不会在某个阈值之后真正削减它。

# c# - F# 声明的命名空间在 c# 项目中不可用或通过对象浏览器可见

> ID：208008
> 
> 赞同：8
> 
> 时间：2008-10-16T10:04:57.637
> 
> 标签：c#, f#, resharper, interop

F# 声明的命名空间在 c# 项目中不可用或通过对象浏览器可见。

我已经构建了一个普通的 F# 库项目，但即使在我构建项目并将其引用到我的 C# 项目之后，我也无法访问所需的命名空间。

我也无法在对象浏览器中看到它，我收到一条错误消息，告诉我它尚未构建。我正在运行 9 月版本，有人可以指出我的错误吗？

F# 版本 1.9.6.0

（6）编辑：直接引用dll解决了我的问题，引用项目可以编译但智能不起作用。当直接引用 dll 时，智能工作完美。

* * *

这是在 .fs 文件中找到的代码

```
#light

namespace Soilsiu.Core 

module public Process =
    open System.Xml.Linq

    let private xname (tag:string) = XName.Get(tag)
    let private tagUrl (tag:XElement) = let attribute = tag.Attribute(xname "href")
                                        attribute.Value
    let Bookmarks(xmlFile:string) = 
        let xml = XDocument.Load(xmlFile)
        xml.Elements <| xname "A" |> Seq.map(tagUrl)

    let PrintBookmarks (xmlFile:string) =     
        let list = Bookmarks(xmlFile)
        list |> Seq.iter(fun u -> printfn "%s" u) 
```

* * *

(5) 编辑：ReSharper 4.0 会是问题吗？

(4) 编辑：当我说对象浏览器无法读取生成的程序集时，我的意思是当我尝试在对象浏览器中打开程序集时，我收到一条错误消息，告诉我项目尚未构建。我再次可以使用反射器读取组件。

(3) 编辑：Reflector 可以反汇编 dll 但对象浏览器无法读取它。

(2) 编辑：我已将我的 F# 版本升级到 1.9.6.2，结果仍然相同

（1）编辑：我能够将 dll 反汇编为 C# 我得到：（这里一切似乎都很好）

```
namespace Soilsiu.Core
{
    [CompilationMapping(7)]
    public static class Crawler

    [CompilationMapping(7)]
    public static class Process
} 
```

* * *

```
[CompilationMapping(7)]
public static class Process
{
    // Methods
    static Process();
    public static IEnumerable<string> Bookmarks(string xmlFile);
    public static void PrintBookmarks(string xmlFile);
    internal static string tagUrl(XElement tag);
    internal static XName xname(string tag);

    // Nested Types
    [Serializable]
    internal class clo@13 : FastFunc<XElement, string>
    {
        // Methods
        public clo@13();
        public override string Invoke(XElement tag@9);
    }

    [Serializable]
    internal class clo@17 : FastFunc<string, Unit>
    {
        // Methods
        public clo@17();
        public override Unit Invoke(string u);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-17T16:43:19.127

如果您直接引用生成的 DLL（即，不是通过项目引用，而是通过文件引用）会怎样？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-19T17:24:43.520

也许 IntelliSense 只是搞砸了？当您尝试在 C# 中使用它时会遇到什么编译器错误？当您说“对象浏览器无法读取它”时，这是什么意思？

对于它的价值，我将它添加到 F# 库项目中，从 C# 控制台应用程序引用它（项目），并且能够使用它。IntelliSense 一开始并没有工作。（不得不重建。）

如果您可以进行可靠的复制，我建议将其通过电子邮件发送给 F# 错误别名 (fsbugs)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-22T11:30:20.347

我尝试了同样的事情。看起来 Visual Studio 和 Resharper 4.0 出于某种原因不理解 F#。如果你忽略红色文本的海洋和缺乏智能，它会编译得很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-11-10T09:22:17.667

尝试

1.  确保 C# 项目的目标是 FULL .NET（不是客户端配置文件）。

2.  将对程序集的引用添加到 F# 项目使用的 C# 项目中。

# javascript - 如何列出 JavaScript 对象的属性？

> ID：208016
> 
> 赞同：921
> 
> 时间：2008-10-16T10:08:18.190
> 
> 标签：javascript

假设我这样创建了一个对象：

```
var myObject =
        {"ircEvent": "PRIVMSG", "method": "newURI", "regex": "^http://.*"}; 
```

检索属性名称列表的最佳方法是什么？即我想最终得到一些可变的“键”，例如：

```
keys == ["ircEvent", "method", "regex"] 
```

* * *

## 回答 #1

> 赞同：1164
> 
> 时间：2008-10-16T10:12:04.237

在现代浏览器（IE9+、FF4+、Chrome5+、Opera12+、Safari5+）中，您可以使用内置的[Object.keys](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys)方法：

```
var keys = Object.keys(myObject); 
```

上面有一个完整的 polyfill，但一个简化的版本是：

```
var getKeys = function(obj){
   var keys = [];
   for(var key in obj){
      keys.push(key);
   }
   return keys;
} 
```

或者替换`var getKeys`为`Object.prototype.keys`允许您调用`.keys()`任何对象。扩展原型有一些副作用，我不建议这样做。

* * *

## 回答 #2

> 赞同：265
> 
> 时间：2008-10-16T13:00:12.493

正如[slashnick](https://stackoverflow.com/questions/208016/how-to-list-the-properties-of-a-javascript-object#208020)指出的那样，您可以使用“for in”构造来遍历对象以获取其属性名称。但是，您将遍历对象原型链中的所有属性名称。如果您只想遍历对象自己**的**属性，可以使用[Object#hasOwnProperty()](http://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Object/hasOwnProperty)方法。从而具有以下内容。

```
for (var key in obj) {
    if (obj.hasOwnProperty(key)) {
        /* useful code here */
    }
} 
```

* * *

## 回答 #3

> 赞同：103
> 
> 时间：2010-10-14T20:35:30.513

正如 Sam Dutton 所回答的，ECMAScript 第 5 版中引入了一种用于此目的的新方法。 `Object.keys()`会做你想做的事，并在[Firefox 4](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys)、Chrome 6、Safari 5 和[IE 9](https://web.archive.org/web/20151201201438/http://blogs.msdn.com/b/ie/archive/2010/06/25/enhanced-scripting-in-ie9-ecmascript-5-support-and-more.aspx)中得到支持。

您也可以很容易地在不支持它的浏览器中实现该方法。但是，那里的一些实现与 Internet Explorer 不完全兼容。这是一个更兼容的解决方案：

```
Object.keys = Object.keys || (function () {
    var hasOwnProperty = Object.prototype.hasOwnProperty,
        hasDontEnumBug = !{toString:null}.propertyIsEnumerable("toString"),
        DontEnums = [ 
            'toString', 'toLocaleString', 'valueOf', 'hasOwnProperty',
            'isPrototypeOf', 'propertyIsEnumerable', 'constructor'
        ],
        DontEnumsLength = DontEnums.length;

    return function (o) {
        if (typeof o != "object" && typeof o != "function" || o === null)
            throw new TypeError("Object.keys called on a non-object");

        var result = [];
        for (var name in o) {
            if (hasOwnProperty.call(o, name))
                result.push(name);
        }

        if (hasDontEnumBug) {
            for (var i = 0; i < DontEnumsLength; i++) {
                if (hasOwnProperty.call(o, DontEnums[i]))
                    result.push(DontEnums[i]);
            }   
        }

        return result;
    };
})(); 
```

请注意，当前接受的答案不包括对*hasOwnProperty()*的检查，并且将返回通过原型链继承的属性。它也没有解释 Internet Explorer 中著名的 DontEnum 错误，其中原型链上的不可枚举属性导致本地声明的同名属性继承其 DontEnum 属性。

实现*Object.keys()*将为您提供更强大的解决方案。

**编辑：**在最近与Prototype的知名贡献者[kangax进行讨论后，我根据](http://perfectionkills.com)[此处](http://github.com/kangax/protolicious/blob/master/experimental/object.for_in.js#L18)`Object.forIn()`找到的函数代码实现了 DontEnum 错误的解决方法。

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2010-09-29T12:34:42.347

请注意，Firefox 4、Chrome 6、Safari 5、IE 9 及更高版本支持 Object.keys 和其他 ECMAScript 5 方法。

例如：

```
var o = {"foo": 1, "bar": 2}; 
alert(Object.keys(o)); 
```

ECMAScript 5 兼容性表： http: [//kangax.github.com/es5-compat-table/](http://kangax.github.com/es5-compat-table/)

新方法说明：http: [//markcaudill.com/index.php/2009/04/javascript-new-features-ecma5/](http://markcaudill.com/index.php/2009/04/javascript-new-features-ecma5/)

* * *

## 回答 #5

> 赞同：35
> 
> 时间：2015-09-05T12:37:58.647

**`Object.getOwnPropertyNames(obj)`**

除了 显示的属性之外，此函数还显示不可枚举的属性`Object.keys(obj)`。

在 JS 中，每个属性都有一些属性，包括一个 boolean `enumerable`。

通常，不可枚举的属性更“内部”且使用频率较低，但有时深入研究它们以了解实际情况是有见地的。

例子：

```
var o = Object.create({base:0})
Object.defineProperty(o, 'yes', {enumerable: true})
Object.defineProperty(o, 'not', {enumerable: false})

console.log(Object.getOwnPropertyNames(o))
// [ 'yes', 'not' ]

console.log(Object.keys(o))
// [ 'yes' ]

for (var x in o)
    console.log(x)
// yes, base 
```

还要注意如何：

*   `Object.getOwnPropertyNames`并且`Object.keys` *不要*沿着原型链去寻找`base`
*   `for in`做

更多关于原型链的信息：[https ://stackoverflow.com/a/23877420/895245](https://stackoverflow.com/a/23877420/895245)

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2010-01-13T16:56:17.073

我是转储功能的忠实粉丝。

[http://ajaxian.com/archives/javascript-variable-dump-in-coldfusion](http://ajaxian.com/archives/javascript-variable-dump-in-coldfusion) ![替代文字](https://www.petefreitag.com/images/blog/jsdump.gif)

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2012-12-13T23:26:24.790

可以用 jQuery 做到这一点，如下所示：

```
var objectKeys = $.map(object, function(value, key) {
  return key;
}); 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2012-03-01T09:21:22.257

如果您只想获取元素而不是函数，那么此代码可以帮助您

```
this.getKeys = function() {

    var keys = new Array();
    for(var key in this) {

        if( typeof this[key] !== 'function') {

            keys.push(key);
        }
    }
    return keys;
} 
```

这是我的 HashMap 实现的一部分，我只想要键，“this”是包含键的 hashmap 对象

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2012-07-13T14:43:51.533

这适用于大多数浏览器，甚至在 IE8 中，并且不需要任何类型的库。var i 是你的钥匙。

```
var myJSONObject =  {"ircEvent": "PRIVMSG", "method": "newURI", "regex": "^http://.*"}; 
var keys=[];
for (var i in myJSONObject ) { keys.push(i); }
alert(keys); 
```

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2012-11-27T09:06:20.073

在支持 js 1.8 的浏览器下：

```
[i for(i in obj)] 
```

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2013-06-19T18:07:20.960

Mozilla 提供了有关如何在不支持的浏览器中执行此操作的[完整实现细节，如果有帮助的话：](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys)

```
if (!Object.keys) {
  Object.keys = (function () {
    var hasOwnProperty = Object.prototype.hasOwnProperty,
        hasDontEnumBug = !({toString: null}).propertyIsEnumerable('toString'),
        dontEnums = [
          'toString',
          'toLocaleString',
          'valueOf',
          'hasOwnProperty',
          'isPrototypeOf',
          'propertyIsEnumerable',
          'constructor'
        ],
        dontEnumsLength = dontEnums.length;

    return function (obj) {
      if (typeof obj !== 'object' && typeof obj !== 'function' || obj === null) throw new TypeError('Object.keys called on non-object');

      var result = [];

      for (var prop in obj) {
        if (hasOwnProperty.call(obj, prop)) result.push(prop);
      }

      if (hasDontEnumBug) {
        for (var i=0; i < dontEnumsLength; i++) {
          if (hasOwnProperty.call(obj, dontEnums[i])) result.push(dontEnums[i]);
        }
      }
      return result;
    };
  })();
} 
```

您可以根据需要包含它，但可能`extensions.js`包含在脚本堆栈顶部的某种文件中。

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2018-09-09T13:45:58.193

采用`Reflect.ownKeys()`

```
var obj = {a: 1, b: 2, c: 3};
Reflect.ownKeys(obj) // ["a", "b", "c"] 
```

*Object.keys*和*Object.getOwnPropertyNames*无法获取**不可枚举的**属性。它甚至适用于*不可枚举的*属性。

```
var obj = {a: 1, b: 2, c: 3};
obj[Symbol()] = 4;
Reflect.ownKeys(obj) // ["a", "b", "c", Symbol()] 
```

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2015-04-28T18:14:26.313

以公认的答案为基础。

如果对象有你想调用的属性说 .properties() 试试！

```
var keys = Object.keys(myJSONObject);

for (var j=0; j < keys.length; j++) {
  Object[keys[j]].properties();
} 
```

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2020-10-22T07:44:33.517

使用 ES6 及更高版本（ECMAScript 2015），您可以获得如下所有属性：

```
let keys = Object.keys(myObject); 
```

如果您想列出所有值：

```
let values = Object.keys(myObject).map(key => myObject[key]); 
```

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2015-08-13T15:09:26.127

因为我几乎在每个项目中都使用*underscore.js*[`keys`](http://underscorejs.org/#keys) ，所以我会使用这个函数：

```
var obj = {name: 'gach', hello: 'world'};
console.log(_.keys(obj)); 
```

其输出将是：

```
['name', 'hello'] 
```

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2009-06-03T13:54:12.660

IE 不支持原生属性的 for(i in obj)。这是我能找到的所有道具的列表。

似乎 stackoverflow 做了一些愚蠢的过滤。

该列表可在此 google 群组帖子的底部找到：- [https://groups.google.com/group/hackvertor/browse_thread/thread/a9ba81ca642a63e0](https://groups.google.com/group/hackvertor/browse_thread/thread/a9ba81ca642a63e0)

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2021-10-27T19:05:25.907

这里有很多答案......这是我的 2 美分。

我需要一些东西来打印出所有 JSON 属性，即使是带有子对象或数组（包括父名称）的属性。

所以 - 对于这个 JSON：

```
mylittleJson = {
  "one": "blah",
  "two": {
      "twoone": "",
      "twotwo": "",
      "twothree": ['blah', 'blah']
  },
  "three": ""
} 
```

它会打印这个：

```
.one
.two.twoone
.two.twotwo
.two.twothree
.three 
```

这是功能

```
function listatts(parent, currentJson){
   var attList = []
   if (typeof currentJson !== 'object' || currentJson == undefined || currentJson.length > 0) {
      return
   }
   for(var attributename in currentJson){
       if (Object.prototype.hasOwnProperty.call(currentJson, attributename)) {
           childAtts = listatts(parent + "." + attributename, currentJson[attributename])
           if (childAtts != undefined && childAtts.length > 0)
               attList = [...attList, ...childAtts]
           else 
               attList.push(parent + "." + attributename)
       }
   }
   return attList
} 
```

希望它也有帮助。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-08-07T17:08:09.970

该解决方案适用于我的案例和跨浏览器：

```
var getKeys = function(obj) {
    var type = typeof  obj;
    var isObjectType = type === 'function' || type === 'object' || !!obj;

    // 1
    if(isObjectType) {
        return Object.keys(obj);
    }

    // 2
    var keys = [];
    for(var i in obj) {
        if(obj.hasOwnProperty(i)) {
            keys.push(i)
        }
    }
    if(keys.length) {
        return keys;
    }

    // 3 - bug for ie9 <
    var hasEnumbug = !{toString: null}.propertyIsEnumerable('toString');
    if(hasEnumbug) {
        var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',
            'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];

        var nonEnumIdx = nonEnumerableProps.length;

        while (nonEnumIdx--) {
            var prop = nonEnumerableProps[nonEnumIdx];
            if (Object.prototype.hasOwnProperty.call(obj, prop)) {
                keys.push(prop);
            }
        }

    }

    return keys;
}; 
```

# openoffice.org - 是否可以创建 OpenOffice 的自定义发行版，或者将其打包到我的 java 应用程序中？

> ID：208017
> 
> 赞同：0
> 
> 时间：2008-10-16T10:09:13.353
> 
> 标签：openoffice.org, software-distribution

我有一个简单的基于 java 的 ppt->swf 子项目，它基本上可以工作。那里的开源软件[OpenOffice.org](http://www.openoffice.org/)和[JODConverter](http://www.artofsolving.com/opensource/jodconverter)做得很好。

问题是，要做到这一点，我需要安装 OO.o 并在服务器模式下运行它。为此，我必须安装 OO.o，这是一个软件*分配*（~160MB），只是为了将源 PPT 文件转换为中间格式。此外，公共 OO.o 发行版是特定于平台的，我真的想要一个单一的跨平台文件集。而且，我不想干扰系统的当前设置，例如文件扩展名关联。

就目前情况而言，我的项目并不是特别“软件分发友好”。

所以，问题是：

*   是否可以创建 OpenOffice 的自定义发行版？一个人会怎么做？
*   我可以使安装变得多么轻巧和不引人注目？
*   由于没有 OO.o UI，是否有可能拥有真正的跨平台分发？
*   我需要注意任何许可问题吗？（在我要检查的事情清单上，但如果你已经有了，那就是 TIA！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-10-16T10:21:19.070

我不知道要完成这样的任务，但微软有它的[PPT 查看器](http://www.microsoft.com/downloads/details.aspx?familyid=048dc840-14e1-467d-8dca-19d2a8fd7485&displaylang=en)，它是免费的，而且非常小，也许在 .NET (C#) 中你可以使用某种函数来保存到你需要的中间文件中......

顺便说一句，你是如何处理幻灯片转换的？

我找到了一个[软件](http://www.justdosoft.com/powerpoint-to-flash/)，但你需要安装 MS PPT。

这只是一个想法，**现在关于您的实际问题：**

您可以创建自己的 OO 安装，只需[跳转到安装项目](http://installation.openoffice.org/)并按照说明进行操作。

*我没有读到最后，但是从第一段开始，它接缝了您正在搜索的内容。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-26T19:38:38.680

不，除非您在 OpenOffice 项目中进行深入编码，否则不会。

# excel - 通过浏览器将多个工作表导出到 Excel

> ID：208018
> 
> 赞同：1
> 
> 时间：2008-10-16T10:09:22.073
> 
> 标签：excel

我需要将多个数据表导出到客户端机器上的 Excel 中，每个表都有自己的工作表。如果它只是一张纸，我会使用 Excel/csv 内容类型，但我听说过一些关于可以代表整个工作簿的 XML 格式。我不想走包装和 .xlsx 路线，所以我需要标准的 .xls。

我们的错误跟踪器 Gemini 曾经有一个导出功能，可以生成一个 XML 文件，Excel 会自动将其作为多页工作簿打开，但我找不到它。是否还有这样的机制，我在哪里可以找到该架构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-16T10:12:09.930

例如，如果您不想创建自己的 Excel XML 编写器库，可以使用[这个库。](http://www.carlosag.net/Tools/ExcelXmlWriter/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-16T10:12:52.190

在 Excel 中，您可以将工作簿保存为 XML 格式。（在 Excel 2007 中称为 XML 电子表格 2003）。

这可能会让你开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-20T10:22:50.993

**使用下面在单独的类文件和 page.cs 文件上粘贴这样的函数单击按钮：** ExcelHelperNS.ExcelHelper.ToExcel(Dataset1, "ExcelFileName", Page.Response);

**在单独的课程中使用它，它会起作用..**

public class ExcelHelper { //每张表的行数限制旧的 excel 版本，excel 2003 的行数限制为 65536 const int rowLimit = 65000;

```
 private static string getWorkbookTemplate()
    {
        var sb = new StringBuilder(818);
        sb.AppendFormat(@"<?xml version=""1.0""?>{0}", Environment.NewLine);
        sb.AppendFormat(@"<?mso-application progid=""Excel.Sheet""?>{0}", Environment.NewLine);
        sb.AppendFormat(@"<Workbook xmlns=""urn:schemas-microsoft-com:office:spreadsheet""{0}", Environment.NewLine);
        sb.AppendFormat(@" xmlns:o=""urn:schemas-microsoft-com:office:office""{0}", Environment.NewLine);
        sb.AppendFormat(@" xmlns:x=""urn:schemas-microsoft-com:office:excel""{0}", Environment.NewLine);
        sb.AppendFormat(@" xmlns:ss=""urn:schemas-microsoft-com:office:spreadsheet""{0}", Environment.NewLine);
        sb.AppendFormat(@" xmlns:html=""http://www.w3.org/TR/REC-html40"">{0}", Environment.NewLine);
        sb.AppendFormat(@" <Styles>{0}", Environment.NewLine);
        sb.AppendFormat(@"  <Style ss:ID=""Default"" ss:Name=""Normal"">{0}", Environment.NewLine);
        sb.AppendFormat(@"   <Alignment ss:Vertical=""Bottom""/>{0}", Environment.NewLine);
        sb.AppendFormat(@"   <Borders/>{0}", Environment.NewLine);
        sb.AppendFormat(@"   <Font ss:FontName=""Calibri"" x:Family=""Swiss"" ss:Size=""11"" ss:Color=""#000000""/>{0}", Environment.NewLine);
        sb.AppendFormat(@"   <Interior/>{0}", Environment.NewLine);
        sb.AppendFormat(@"   <NumberFormat/>{0}", Environment.NewLine);
        sb.AppendFormat(@"   <Protection/>{0}", Environment.NewLine);
        sb.AppendFormat(@"  </Style>{0}", Environment.NewLine);
        sb.AppendFormat(@"  <Style ss:ID=""s62"">{0}", Environment.NewLine);
        sb.AppendFormat(@"   <Font ss:FontName=""Calibri"" x:Family=""Swiss"" ss:Size=""11"" ss:Color=""#000000""{0}", Environment.NewLine);
        sb.AppendFormat(@"    ss:Bold=""1""/>{0}", Environment.NewLine);
        sb.AppendFormat(@"  </Style>{0}", Environment.NewLine);
        sb.AppendFormat(@"  <Style ss:ID=""s63"">{0}", Environment.NewLine);
        sb.AppendFormat(@"   <NumberFormat ss:Format=""Short Date""/>{0}", Environment.NewLine);
        sb.AppendFormat(@"  </Style>{0}", Environment.NewLine);
        sb.AppendFormat(@" </Styles>{0}", Environment.NewLine);
        sb.Append(@"{0}\r\n</Workbook>");
        return sb.ToString();
    }

    private static string replaceXmlChar(string input)
    {
        input = input.Replace("&", "&amp");
        input = input.Replace("<", "&lt;");
        input = input.Replace(">", "&gt;");
        input = input.Replace("\"", "&quot;");
        input = input.Replace("'", "&apos;");
        return input;
    }

    private static string getCell(Type type, object cellData)
    {
        var data = (cellData is DBNull) ? "" : cellData;
        if (type.Name.Contains("Int") || type.Name.Contains("Double") || type.Name.Contains("Decimal")) return string.Format("<Cell><Data ss:Type=\"Number\">{0}</Data></Cell>", data);
        if (type.Name.Contains("Date") && data.ToString() != string.Empty)
        {
            return string.Format("<Cell ss:StyleID=\"s63\"><Data ss:Type=\"DateTime\">{0}</Data></Cell>", Convert.ToDateTime(data).ToString("yyyy-MM-dd"));
        }
        return string.Format("<Cell><Data ss:Type=\"String\">{0}</Data></Cell>", replaceXmlChar(data.ToString()));
    }
    private static string getWorksheets(DataSet source)
    {
        var sw = new StringWriter();
        if (source == null || source.Tables.Count == 0)
        {
            sw.Write("<Worksheet ss:Name=\"Sheet1\">\r\n<Table>\r\n<Row><Cell><Data ss:Type=\"String\"></Data></Cell></Row>\r\n</Table>\r\n</Worksheet>");
            return sw.ToString();
        }
        foreach (DataTable dt in source.Tables)
        {
            if (dt.Rows.Count == 0)
                sw.Write("<Worksheet ss:Name=\"" + replaceXmlChar(dt.TableName) + "\">\r\n<Table>\r\n<Row><Cell  ss:StyleID=\"s62\"><Data ss:Type=\"String\"></Data></Cell></Row>\r\n</Table>\r\n</Worksheet>");
            else
            {
                //write each row data                
                var sheetCount = 0;
                for (int i = 0; i < dt.Rows.Count; i++)
                {
                    if ((i % rowLimit) == 0)
                    {
                        //add close tags for previous sheet of the same data table
                        if ((i / rowLimit) > sheetCount)
                        {
                            sw.Write("\r\n</Table>\r\n</Worksheet>");
                            sheetCount = (i / rowLimit);
                        }
                        sw.Write("\r\n<Worksheet ss:Name=\"" + replaceXmlChar(dt.TableName) +
                                 (((i / rowLimit) == 0) ? "" : Convert.ToString(i / rowLimit)) + "\">\r\n<Table>");
                        //write column name row
                        sw.Write("\r\n<Row>");
                        foreach (DataColumn dc in dt.Columns)
                            sw.Write(string.Format("<Cell ss:StyleID=\"s62\"><Data ss:Type=\"String\">{0}</Data></Cell>", replaceXmlChar(dc.ColumnName)));
                        sw.Write("</Row>");
                    }
                    sw.Write("\r\n<Row>");
                    foreach (DataColumn dc in dt.Columns)
                        sw.Write(getCell(dc.DataType, dt.Rows[i][dc.ColumnName]));
                    sw.Write("</Row>");
                }
                sw.Write("\r\n</Table>\r\n</Worksheet>");
            }
        }

        return sw.ToString();
    }
    public static string GetExcelXml(DataTable dtInput, string filename)
    {
        var excelTemplate = getWorkbookTemplate();
        var ds = new DataSet();
        ds.Tables.Add(dtInput.Copy());
        var worksheets = getWorksheets(ds);
        var excelXml = string.Format(excelTemplate, worksheets);
        return excelXml;
    }

    public static string GetExcelXml(DataSet dsInput, string filename)
    {
        var excelTemplate = getWorkbookTemplate();
        var worksheets = getWorksheets(dsInput);
        var excelXml = string.Format(excelTemplate, worksheets);
        return excelXml;
    }

    public static void ToExcel(DataSet dsInput, string filename, HttpResponse response)
    {
        var excelXml = GetExcelXml(dsInput, filename);
        response.Clear();
        response.AppendHeader("Content-Type", "application/vnd.ms-excel");
        response.AppendHeader("Content-disposition", "attachment; filename=" + filename);
        response.Write(excelXml);
        response.Flush();
        response.End();
    }

    public static void ToExcel(DataTable dtInput, string filename, HttpResponse response)
    {
        var ds = new DataSet();
        ds.Tables.Add(dtInput.Copy());
        ToExcel(ds, filename, response);
    }
} 
```

# sql-server - 保存为 csv 时，为什么 SQL Management Studio 会输出空分隔字符？

> ID：208027
> 
> 赞同：1
> 
> 时间：2008-10-16T10:15:55.727
> 
> 标签：sql-server, ssms

它可以配置为不发生吗？

我通常会发现自己将查询结果保存为 .csv 并稍后在我的 Unix 机器上处理它。以空字符分隔的字符使我不得不过滤这些字符，这有点痛苦。

所以，这些是问题：

*   为什么会这样？

编辑：

因为它默认以 UTF-16 输出。最简单的转换将是：

```
iconv -f utf-16 -t utf-8 origFile.csv > newFile.csv 
```

*   它可以以某种方式禁用吗？如何？

这是由此生成的文件的 hexdump 的一部分。每个字符后跟一个空字符 (00)：

```
00000cf0  36 00 36 00 32 00 0d 00  0a 00 36 00 38 00 34 00  |6.6.2.....6.8.4.|
00000d00  30 00 36 00 32 00 31 00  36 00 0d 00 0a 00 36 00  |0.6.2.1.6.....6.|
00000d10  38 00 34 00 30 00 36 00  33 00 36 00 34 00 0d 00  |8.4.0.6.3.6.4...|
00000d20  0a 00 36 00 38 00 34 00  30 00 36 00 38 00 34 00  |..6.8.4.0.6.8.4.|
00000d30  32 00 0d 00 0a 00 36 00  38 00 34 00 30 00 37 00  |2.....6.8.4.0.7.|
00000d40  30 00 32 00 31 00 0d 00  0a 00 36 00 38 00 34 00  |0.2.1.....6.8.4.|
00000d50  30 00 37 00 37 00 39 00  37 00 0d 00 0a 00 36 00  |0.7.7.9.7.....6.|
00000d60  38 00 34 00 30 00 37 00  39 00 32 00 31 00 0d 00  |8.4.0.7.9.2.1...|
00000d70  0a 00 36 00 38 00 34 00  30 00 38 00 32 00 34 00  |..6.8.4.0.8.2.4.|
00000d80  31 00 0d 00 0a 00 36 00  38 00 34 00 30 00 38 00  |1.....6.8.4.0.8.|
00000d90  36 00 36 00 31 00 0d 00  0a 00 36 00 38 00 34 00  |6.6.1.....6.8.4.|
00000da0  30 00 38 00 37 00 35 00  31 00 0d 00 0a 00 36 00  |0.8.7.5.1.....6.|
00000db0  38 00 34 00 31 00 30 00  32 00 35 00 34 00 0d 00  |8.4.1.0.2.5.4...|
00000dc0  0a 00 36 00 38 00 34 00  31 00 30 00 34 00 34 00  |..6.8.4.1.0.4.4.| 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-16T10:17:52.867

该文件以 Unicode 格式而不是 ASCII 格式输出。Unicode 使用两倍多的位来表示每个字符，因此使用前面的 00。

可能有保存为 ANSI 或 ASCII 的选项，应使用 8 位字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-01-19T08:38:26.133

我知道这是一个旧帖子...但是对于新访客...

当您从 Microsoft SQL Management Studio 保存数据时，您会注意到“保存”按钮旁边有一个小箭头。如果您选择小箭头，您可以选择“使用编码保存...”，这将允许您选择所需的编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-16T10:22:50.783

在 Unix 上，我建议使用`iconv -futf-16le -tutf-8`来过滤你的输出。:-)

# apache-flex - 为什么加载的 SWFLoader 的宽度和高度为零？

> ID：208033
> 
> 赞同：3
> 
> 时间：2008-10-16T10:20:29.507
> 
> 标签：apache-flex, flash

我有一个扩展 SWFLoader 的类，我像普通的 SWFLoader 一样使用它：

```
var loader:MySWFLoader = new MySWFLoader();
loader.load("myFile.SWF");
myScene.addChild(loader); 
```

加载工作正常，除了它保持为 0，因为宽度和高度永远不会从 0 改变。我必须覆盖宽度/高度获取属性以使其工作：

```
class MySWFLoader extends SWFLoader
{
public override function get width():Number{    return contentWidth;    }
public override function get height():Number{   return contentHeight;   }
} 
```

除了作为一个大黑客之外，这并不完全正确。特别是因为 SWF 有多个框架，并且这些框架具有不同的宽度/高度。

为什么宽度/高度首先不起作用？它们不应该在加载过程中自动设置吗？问题是否可能出在 SWF 本身？

**更新**：将 scaleContent 更改为 true 或 false 没有区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-21T17:11:38.007

我不确定这是否适用于 SWF 加载，但每当我加载内容时，我无法在加载整个内容之前访问宽度和高度。

所以做一个事件监听器，在加载完成时监听，然后读取高度/宽度。

还要看看 AS3 中的 loaderInfo 类

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-17T03:06:11.037

我不确定您尝试获取高度和宽度的周期的哪个部分（它是加载器对象还是加载的内容），但您可以使用 SWFLoader.loaderInfo 访问加载对象的高度和宽度.height 和 SWFLoader.loaderInfo.width。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-16T10:26:43.287

默认情况下，SWFLoader 将内容缩放到加载器的大小，因此您必须设置加载器的大小。如果您希望加载器缩放到内容的大小，则必须将 scaleContent 属性设置为 false。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-17T23:02:04.057

SWFLoader 是一个 UIComponent。

它需要通过 UIComponent 框架运行才能正确设置其尺寸

换句话说，它正在等待对 commitProperties()、updateDisplayList() 等的调用。

如果你把它放到你的应用程序中（使它成为布局框架的一部分），它应该没问题。

# asp.net - 有选择地将css应用于gridview中的一行

> ID：208038
> 
> 赞同：17
> 
> 时间：2008-10-16T10:22:55.773
> 
> 标签：asp.net, gridview

`GridView`我正在寻找一种方法来根据数据绑定项的属性有选择地将 CSS 类应用于单个行。

例如：

GridView 的数据源是一个通用列表，`SummaryItems`具有`SummaryItem`一个属性`ShouldHighlight`。当`ShouldHighlight == true`关联行的 CSS 应设置为`highlighted`

有任何想法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2008-10-16T10:44:26.947

好简单

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        DataRowView drv = e.Row.DataItem as DataRowView;
        if (drv["ShouldHighlight"].ToString().ToLower() == "true")
            e.Row.CssClass = "highlighted";
    }
} 
```

如果您使用**DataTable 作为 DataSource ，则上面的代码有效**

改成：

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        myClass drv = (myClass)e.Row.DataItem;
        if (drv.ShouldHighlight)
            e.Row.CssClass = "highlighted";
    }
} 
```

仅适用于上面使用泛型时的示例：

```
public class myClass
{ 
    public Boolean ShouldHighlight
    { get; set; }
} 
```

如果您正在使用**泛型**（列表、字典等）

记住：

```
e.Row.dataItem 
```

始终返回填充行的整个对象，因此很容易从这里操作网页中数据的外观。

您应该使用 RowDataBound 事件，该事件将在数据附加到行对象但尚未在页面中编写 HTML 代码后触发，这样您可以检查 ShouldHighlight 值（我转换为字符串，因为我不知道类型，如果你知道它是一个布尔值，你可以改变它）。

此代码比 megakemp 代码运行得快得多，因为您没有创建 List 对象并为每一行填充整个数据源......

*PS[看看这个网站](http://gridviewguy.com/Categories/7_GridView_Articles.aspx)，你可以找到几个使用 GridView 对象的项目教程*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-11-24T20:08:28.850

您要记住的一件事是，在 RowCreated 或 RowDataBound 事件处理程序中设置 Row.CssClass 属性将覆盖您可能在网格级别应用的任何默认样式。GridView 使您可以通过以下属性轻松访问行样式：

```
gvGrid.AlternatingRowStyle.CssClass = ALTROW_CSSCLASS
gvGrid.RowStyle.CssClass = ROW_CSSCLASS 
```

但是，当您将 CssClass 值分配给特定行时，正如您在这种情况下的需要，分配会覆盖网格级别的任何顶级分配。分配不会像我们希望的那样“级联”。因此，如果您想保留顶级班级分配并自己分层，更具体的一个，那么您需要检查 rowState 以查看您正在处理哪种行并相应地连接您的班级名称

```
If(item.ShouldHighlight)
 {
    If(e.Row.RowState == DataControlRowState.Alternate)
    {
        e.Row.CssClass = String.Format("{0} {1}", "highlight", ALTROW_CSSCLASS)
    }
    else
    {
        e.Row.CssClass = String.Format("{0} {1}", "highlight", ROW_CSSCLASS)
    }

} 
```

# php - 在 PHP 中使用正则表达式替换空格

> ID：208046
> 
> 赞同：3
> 
> 时间：2008-10-16T10:31:22.620
> 
> 标签：php, regex, replace, preg-replace

我对正则表达式很陌生。我需要替换一段多行文本中的空格。替换规则如下：

*   用不间断空格 ( `&nbsp;`) 替换行首的所有空格。
*   用相同数量的不间断空格替换任何重复空格（多个空格一起）的实例。
*   不在行首的单个空格保持不变。

我使用[Regex Coach](http://www.weitz.de/regex-coach/)构建匹配模式：

```
/( ){2,}|^( )/ 
```

假设我有这个输入文本：

```
asdasd asdasd  asdas1
 asda234 4545    54
  34545 345  34534
34 345 
```

使用 PHP 正则表达式替换函数（如[`preg_replace()`](http://ch.php.net/manual/en/function.preg-replace.php)），我想得到这个输出：

```
asdasd asdasd&amp;nbsp;&amp;nbsp;asdas1
&amp;nbsp;asda234 4545&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;54
&amp;nbsp;&amp;nbsp;34545 345&amp;nbsp;&amp;nbsp;34534
34 345 
```

我很高兴使用正则表达式进行简单的文本替换，但我无法弄清楚如何在匹配中多次替换以获得我想要的输出。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-16T10:48:33.927

我猜想找到每个空间并替换它会更容易。为此，请使用“前瞻”和“后瞻”组。

或者，找到一个空格 ( `\x20`)，该空格 ( ) 由任何单个空格 ( ) 开头或后跟`\s`；但是，只替换空间。

```
$str = "asdasd asdasd  asdas1\n asda234 4545    54\n  34545 345  34534\n34 345\n";

print preg_replace("/(?<=\s)\x20|\x20(?=\s)/", "&#160;", $str); 
```

（我选择了 #160，因为 markdown 会解析 nbsp。）

结果是：

```
asdasd asdasd&#160;&#160;asdas1
&#160;asda234 4545&#160;&#160;&#160;&#160;54
&#160;&#160;34545 345&#160;&#160;34534
34 345 
```

有关更多信息，请查看[PCRE](http://us2.php.net/pcre)和[perlre](http://perldoc.perl.org/perlre.html)。

* * *

**回复评论**

@Sprogz ：一开始我也是这么想的[**。**](https://stackoverflow.com/users/7508/sprogz)但是该示例显示了`"\n " => "\n&nbsp;"`第 1 行和第 2 行之间的 a。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-16T10:49:22.757

您可以使用 PHP 的`/e`修饰符在替换中*执行一些代码，如下所示：*

```
$str = preg_replace('/( {2,}|^ )/em', 'str_repeat("&nbsp;", strlen("\1"))', $str); 
```

我已更改正则表达式以捕获空格。修饰符将`/m`其置于多行模式，因此`^`匹配任何行的开头。

# javascript - 使用 Javascript 使用 Web 服务

> ID：208051
> 
> 赞同：14
> 
> 时间：2008-10-16T10:35:36.683
> 
> 标签：javascript, web-services

有没有办法使用 JavaScript 来使用 Web 服务？我正在寻找一种内置的方式来做到这一点，使用 JavaScript 框架不是一种选择。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-10-16T10:44:49.397

您可以使用 XmlHttpRequest 对象以原生方式使用 JavaScript 来使用 Web 服务。但是，实例化此对象因浏览器而异。例如，Firefox 和 IE 7+ 允许您将其实例化为原生 JavaScript 对象，但 IE6 要求您将其实例化为 ActiveX 控件。

因此，我建议使用抽象库，例如 jQuery。如果这不是一个选项，那么将创建抽象为工厂方法并检查浏览器版本。

要使用它来调用 Web 服务，您只需实例化对象，然后调用它的 open() 方法。我建议这是异步完成的，以保持 UI 响应。调用 async 时，您将获得对指定异步方法的回调，该方法将指示请求的状态。当状态为 4（已加载）时，您可以获取响应数据，然后对其进行处理。

你如何处理数据将取决于它是什么，如果它是 JSON，那么你可以通过 JavaScript 的 eval() 方法运行它，但这确实有一些安全隐患。如果是 XML，您可以使用 XML DOM 来处理它。

有关 XMLHttpRequest 对象的更多信息，请参阅[Wikipedia](http://en.wikipedia.org/wiki/XMLHttpRequest)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-16T10:44:14.843

如果服务托管在您的域中，您可以创建[XMLHttpRequest 。](http://www.w3schools.com/XML/xml_http.asp)如果没有，您将遇到跨域问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-16T10:42:34.953

您可以使用[XMLHttpRequest](http://www.w3.org/TR/XMLHttpRequest/)对象，但由于您不想使用任何 JavaScript 框架，您必须自己编组和解组 SOAP 信封。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-16T10:46:12.217

还要检查[XML HTTP Request](http://www.jibbering.com/2002/4/httprequest.html)以获得有关使用 XmlHttpRequest 对象的好信息页面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-16T11:30:43.720

有一个用 javascript 编写的小型库，可用作 XML-SOAP 客户端。我不知道它是否适用于所有浏览器，但它可能会帮助你。你可以在[这里找到](http://www.guru4.net/articoli/javascript-soap-client/en/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-16T11:38:11.393

这行得通。它很旧（检查 Netscape），是在所有 Ajax 工具出现之前编写的。您确实必须处理不同的浏览器——基本上，IE 以一种方式处理，而其他人则以另一种方式处理。

```
// javascript global variables
var soapHeader = '<?xml version=\"1.0\"?>'
               + '<SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\"'
               + ' SOAP-ENV:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\"'
               + ' xmlns:xsi=\"http://www.w3.org/1999/XMLSchema-instance\"'
               + ' xmlns:xsd=\"http://www.w3.org/1999/XMLSchema\"'
               + '>'
               + '<SOAP-ENV:Header/>'
               + '<SOAP-ENV:Body>';

var soapFooter = '</SOAP-ENV:Body>'
               + '</SOAP-ENV:Envelope>';

var destinationURI = '/webservices/websalm';

var actionURI = '';

function callWebService(nsCallback,ieCallback,parms) {
  try
     {
       // Create XmlHttpRequest obj for current browser = Netscape or IE
       if (navigator.userAgent.indexOf('Netscape') != -1)
       {
          SOAPObject = new XMLHttpRequest();
          SOAPObject.onload = nsCallback;
       } else {  //IE
          SOAPObject = new ActiveXObject('Microsoft.XMLHTTP');
          SOAPObject.onreadystatechange = ieCallback;
       }

       SOAPObject.open('POST', destinationURI, true);

       // Set 2 Request headers, based on browser
       if (actionURI == '') {
          SOAPObject.setRequestHeader('SOAPAction', '\"\"');
       } else {  SOAPObject.setRequestHeader('SOAPAction', actionURI);
       }

       SOAPObject.setRequestHeader('Content-Type', 'text/xml');

       // Compose the Request body from input parameter + global variables
       var requestBody = soapHeader + parms + soapFooter

       // Send, based on browser
       if (navigator.userAgent.indexOf('Netscape') != -1)
       {
         SOAPObject.send(new DOMParser().parseFromString(requestBody,'text/xml'));
       } else {
         SOAPObject.send(requestBody);
       }
  } catch (E)
  {
     alert('callWebService exception: ' + E);
  }
} 
```

# pki - MS CA 退出模块代码或教程

> ID：208053
> 
> 赞同：2
> 
> 时间：2008-10-16T10:37:26.930
> 
> 标签：pki

我正在努力寻找对 MS 证书颁发机构出口模块进行编码的示例/解释。

如果有人有任何帮助或资源，他们可以指出我，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-16T10:52:42.827

也许这篇文章会对你有所帮助？[编写自定义退出模块](http://msdn.microsoft.com/en-us/library/aa388214.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-23T07:29:37.197

Windows 7 SDK 在目录 security/certificateservices/exit/c++/ 中包含一个示例。

您只能在此处下载示例：[https ://github.com/Microsoft/Windows-classic-samples/tree/master/Samples/Win7Samples/security/certificateservices/exit/c%2B%2B/WindowsServer2008R2](https://github.com/Microsoft/Windows-classic-samples/tree/master/Samples/Win7Samples/security/certificateservices/exit/c%2B%2B/WindowsServer2008R2)

# user-input - 用户名和空格

> ID：208054
> 
> 赞同：6
> 
> 时间：2008-10-16T10:37:29.300
> 
> 标签：user-input, account

在过去的许多年里，我在各种在线或离线托管的应用程序和平台上进行了注册。

为什么用户名中不允许使用空格，因为空格对于名称来说非常自然，并且大多数计算系统都可以有效地处理它们。

（许多人可以对其他非法的特殊字符提出类似的问题。但他们的情况更容易理解，因为它们甚至不符合现实世界的命名方案。[当然](http://xkcd.com/327/)！）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-16T11:09:11.687

我认为实际上这可能是需要打破的约定之一。大多数系统现在处理大量复杂的数据，并用于正确处理包含空格的文本。我很高兴地发现fogbugz（另一个插件）会接受您输入的电子邮件地址、用户名或真实姓名；作为您登录时的用户名。

这只是一个约定，从 8 个字母的文件名和可能还有 8 个字母的用户名开始就仍然存在。我建议您在您的网络应用程序中允许它，让世界跟随您。:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-12-14T16:04:35.093

与用户名中的空格相关的一个微妙问题是空格字符是“不可见的”，两个连续的空格可能看起来非常类似于单个空格。输入两个而不是一个空格引起的错误可能很难发现，这是不允许空格一起出现的原因之一。

某些系统可能不允许使用空格，但仍允许使用不间断空格。聪明的用户可以利用这个事实在他的用户名中包含一个空格。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-16T10:44:43.623

我想是因为某处的某些代码仍在将输入作为一组空格分隔的参数处理，这与 Windows 命令提示符处理未加引号的文件名的方式非常相似。例如，如果您要将用户名传递给用 C 语言编写的外部可执行进程，其中用户名是在命令行上传递的，它将作为两个参数到达 C 应用程序。

虽然这在实践中可能不会再发生了，就像许多特殊字符一样，我想这是它存在的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-16T10:44:25.230

我所知道的唯一有意义的原因是，如果您在空格上解析令牌，则在用户名中添加空格会导致它失败。

但是，我确实同意您的观点：在当今的环境中，可能没有太多理由继续这样做，除非遗留兼容性有意义（*nix 等）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-16T10:53:50.750

我认为因为通常它倾向于在实际保存输入字段值之前修剪输入字段值，例如在数据库中。

由于我们删除了空格并且如果我们允许它们输入密码或用户名，您可以想象如果用户输入密码为“PWD”将会有一个大问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-16T10:54:42.043

它可以防止混淆相似的名称组合，例如“John Smith”和“JohnSmith”。它还可以更轻松地自动识别出现在文本中的名称。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-16T11:01:29.270

这取决于它们将在哪里使用。在 unix 用户名中不使用空格是有意义的，原因与在 unix 文件名中不使用空格的原因相同——在命令行中键入它们很痛苦。也就是说，unix 确实允许在用户名和文件名中使用空格。

我认为网络应用程序之类的东西没有理由不允许空间。

实际上，最让我烦恼的是网络应用程序不允许在用户名中使用 @。当它有数百万用户时，我真正想要的名字可用的机会很小，所以我喜欢使用我的电子邮件地址，它至少可以保证是唯一的。

# svn - .NET 项目源代码文件的 MIME 类型是什么？

> ID：208056
> 
> 赞同：7
> 
> 时间：2008-10-16T10:39:17.957
> 
> 标签：svn, content-type, mime-types, mod-dav-svn

.NET 项目中的 .cs（C# 源代码）、.resx、.aspx 等文件是否有官方 MIME 类型？

如果没有定义官方类型，对好的 MIME 类型有什么建议吗？当从 Web 浏览器查看 Subversion 存储库时，这将通过 Apache 和`mod_dav_svn`模块公开，因此任何有助于 Firefox*等*正确呈现文件的东西都可以解决问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-10-16T10:55:27.050

使用此[答案](https://stackoverflow.com/questions/58510/in-c-how-can-you-find-the-mime-type-of-a-file-based-on-the-file-signature-not-t#58514)中的信息轻松确定 MIME 类型。

例如（在 Windows XP SP2 上运行）我得到以下结果：

*   **cs** - 文本/纯文本
*   **resx** - 文本/xml

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-16T10:42:23.083

显然 Gnome 将 text/x-csharp 用于 C# 源文件，但我个人希望 .cs 和 .aspx 文件是 text/plain 而 .resx 是 text/xml。

# http - 通过 IIS 在 ASP Classic 中进行 HTTP 身份验证（基本或摘要）

> ID：208063
> 
> 赞同：8
> 
> 时间：2008-10-16T10:43:33.063
> 
> 标签：http, iis, authentication, asp-classic, http-authentication

我想在 ASP 经典中开发一个网站，对脚本控制下的数据库或密码列表使用 HTTP 身份验证。理想情况下，该解决方案不应涉及任何组件或 IIS 设置，因为脚本应可在托管环境中运行。

任何线索/代码都非常感谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-11-13T01:46:06.197

可以在纯经典 ASP VBScript 中进行 HTTP 基本身份验证。

您将需要一些东西来解码 base 64。[这是一个纯 VBScript 实现](http://www.motobit.com/tips/detpg_base64/)。您还需要确保在 IIS 配置中关闭“基本身份验证”和“集成 Windows 身份验证”，因为它们会干扰您在 HTTP_AUTHORIZATION 标头中返回的内容。

这是一个示例实现，它只是回显用户名和密码。

```
<%@LANGUAGE="VBSCRIPT"%>

<!--#include file="decbase64.asp" -->

<%
Sub Unauth()
    Call Response.AddHeader("WWW-Authenticate", "Basic realm=""SomethingGoesHere""")
    Response.Status = "401 Unauthorized"
    Call Response.End()
End Sub

Dim strAuth
strAuth = Request.ServerVariables("HTTP_AUTHORIZATION")

If IsNull(strAuth) Or IsEmpty(strAuth) Or strAuth = "" Then
    Call Unauth
Else 
    %>
    <html>
    <body>
    <% 
        Dim aParts, aCredentials, strType, strBase64, strPlain, strUser, strPassword
        aParts = Split(strAuth, " ")
        If aParts(0) <> "Basic" Then
            Call Unauth
        End If
        strPlain = Base64Decode(aParts(1))
        aCredentials = Split(strPlain, ":")
    %>
    <%= Server.HTMLEncode(aCredentials(0) & " - " & aCredentials(1)) %>
    </body>
    </html>
    <%
End If
%> 
```

将用户名和密码与有意义的东西挂钩，留给读者作为练习。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-16T11:50:00.480

根据定义，HTTP 身份验证是 WebServer 请求的，我怀疑您会找到一个不会导致不应用 IIS 设置的解决方案。

Web 浏览器将连接到您的网站，除非您的服务器使用 HTTP 响应代码 HTTP/1.1 401 Unauthorized 进行响应，否则浏览将不会通过凭据。

您可以尝试强制响应代码 401 并设置标题

```
 WWW-Authenticate: Basic realm="SomethingGoesHere" 
```

然后浏览器将提示用户输入用户名和密码，但将通过明文发送到浏览器（base64 编码），如下所示：

```
Authorization: Basic YnJpYW5iOmJvYmJ5Ym95 
```

从 Base64 翻译为：

```
brianb:bobbyboy 
```

我不知道您是否可以从您的 ASP 页面访问 Authorization 标头，或者 Web 服务器是否会因为有人试图将凭据传递给它而出乎意料，但可能值得一试尝试...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-16T11:42:02.743

嗨，您是要从数据库中获取用户列表还是在 HTTP 服务器上使用基于网络的权限？

如果您使用的是数据库，请使用 ODBC 和 DSN

```
Dim DatabaseObject1
Set DatabaseObject1 = Server.CreateObject("ADODB.Connection")
DatabaseObject1.Open("DSN=DSNname;") 
```

如果您想要一个密码对话框（来自服务器），您需要更改 IIS 设置以获得很好的指南。

[http://www.authenticationtutorial.com/tutorial/](http://www.authenticationtutorial.com/tutorial/)

# mysql - 如何在 SQL Server 2005 中使用 RLIKE MySQL 函数？

> ID：208070
> 
> 赞同：1
> 
> 时间：2008-10-16T10:44:49.473
> 
> 标签：mysql, sql-server, sql-server-2005

我需要在从 MySQL 移动到 SQL Server 2005 的数据库上运行 RLIKE 查询，但是在复制 MySQL 提供的“RLIKE”功能时遇到问题。

有没有人有任何想法？

干杯，

克里斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-16T12:02:07.353

我知道的唯一方法是添加用户定义的 CLR 函数。

首先，这是 MSDN 杂志的一篇文章，“[正则表达式使模式匹配和数据提取更容易](http://msdn.microsoft.com/en-us/magazine/cc163473.aspx)”

我已经使用了几年的那篇文章的代码在[这里](http://download.microsoft.com/download/f/2/7/f279e71e-efb0-4155-873d-5554a0608523/Regex2007_02.exe)。

# windows - svn工作副本的快速递归grepping

> ID：208074
> 
> 赞同：4
> 
> 时间：2008-10-16T10:47:59.547
> 
> 标签：windows, svn, bash, grep

我需要在 svn 工作副本中搜索“foo”的所有 cpp/h 文件，完全不包括 svn 的特殊文件夹。GNU grep的**确切命令是什么？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-10-16T10:50:15.983

我为此目的使用[ack ，它就像 grep 但自动知道如何排除源代码控制目录（以及其他有用的东西）。](http://petdance.com/ack/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-10-16T10:54:08.970

grep -ir --exclude-dir=.svn foo *

在工作目录中就可以了。如果您希望搜索区分大小写，请省略“i”。

如果您只想检查 .cpp 和 .h 文件，请使用

grep -ir --include={ *.cpp,* .h} --exclude-dir=.svn foo *

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-16T11:11:38.843

有点跑题了：

如果您有一个包含大量未跟踪文件（即不受版本控制）的工作副本，并且您**只想**搜索源代码控制文件，您可以这样做

```
svn ls -R | xargs -d '\n' grep <string-to-search-for> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-16T11:28:18.217

我编写了[这个](http://www.soulsphere.org/tools/fuck-you-svn.sh)脚本，并将其添加到我的 .bashrc 中。它会自动从 grep、find 和 locate 中排除 SVN 目录。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-16T10:50:57.840

这是一个 RTFM。我输入了“man grep”和“/exclude”并得到：

--exclude=GLOB 跳过基本名称与 GLOB 匹配的文件（使用通配符匹配）。文件名 glob 可以使用 *、? 和 [...] 作为通配符，并使用 \ 来引用通配符或反斜杠字符。

--exclude-from=FILE 跳过其基本名称与从 FILE 读取的任何文件名 glob 匹配的文件（使用 --exclude 中所述的通配符匹配）。

--exclude-dir=DIR 从递归搜索中排除匹配模式 DIR 的目录。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-09-02T19:50:36.837

我使用这些 bash 别名来 grepping svn 树中的内容和文件......我发现从命令行搜索（并`vim`用于编码）而不是基于 GUI 的 IDE 更快、更愉快：

```
s () {
    local PATTERN=$1
    local COLOR=$2
    shift; shift;
    local MOREFLAGS=$*

    if  ! test -n "$COLOR" ; then
        # is stdout connected to terminal?
        if test -t 1; then
            COLOR=always
        else
            COLOR=none
        fi
    fi

    find -L . \
        -not \( -name .svn -a -prune \) \
        -not \( -name templates_c -a -prune \) \
        -not \( -name log -a -prune \) \
        -not \( -name logs -a -prune \) \
        -type f \
        -not -name \*.swp \
        -not -name \*.swo \
        -not -name \*.obj \
        -not -name \*.map \
        -not -name access.log \
        -not -name \*.gif \
        -not -name \*.jpg \
        -not -name \*.png \
        -not -name \*.sql \
        -not -name \*.js \
        -exec grep -iIHn -E --color=${COLOR} ${MOREFLAGS} -e "${PATTERN}" \{\} \;
}

# s foo | less
sl () {
    local PATTERN=$*
    s "$PATTERN" always | less
}

# like s but only lists the files that match
smatch () {
    local PATTERN=$1
    s $PATTERN always -l
}

# recursive search (filenames) - find file
f () {
    find -L . -not \( -name .svn -a -prune \) \( -type f -or -type d \) -name "$1"
} 
```

# struts - 表单 bean 到会话变量

> ID：208077
> 
> 赞同：0
> 
> 时间：2008-10-16T10:48:54.270
> 
> 标签：struts, tags

如果我可以使用

```
<td><textarea><bean:write name="smlMoverDetailForm" property="empFDJoiningDate"/>
</textarea></td> 
```

要替换一个值，我如何使用 struts 标签将变量保存到 sesssion

在须藤代码中

```
session.setAttribute("test" , "<bean:write name="smlMoverDetailForm"
property="empFDJoiningDate"/>"); 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-07T09:01:18.897

我不这么认为。Struts 标签仅在 jsp 页面中可用。

但是你可以这样做：

如果 bean smlMoverDetailForm 在请求范围内

```
session.setAttribute("test",((THECLASSOFTHEBEAN)request.getAttribute("smlMoverDetailForm")).getEmpFDJoiningDate()); 
```

否则，如果 bean smlMoverDetailForm 在范围会话中

```
session.setAttribute("test",((THECLASSOFTHEBEAN)request.getSession().getAttribute("smlMoverDetailForm")).getEmpFDJoiningDate()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:52:55.643

迟到但可能。`struts-config.xml`映射操作时，您可以将会话范围设置为文件中的表单 bean 。

# .net - 如何为不同的配置使用不同的程序集名称？

> ID：208084
> 
> 赞同：12
> 
> 时间：2008-10-16T10:51:54.997
> 
> 标签：.net, visual-studio-2008

在 Visual Studio 2008（和其他）中，如果您查看项目属性，则在创建 .NET 或 silverlight 应用程序时，您似乎只能拥有一个程序集名称 - 跨所有配置。我想将我的应用程序编译为：

MyAppDebug - 处于调试模式，仅 MyApp - 处于发布模式

有谁知道这是否可能？

**编辑：**

似乎有些人质疑这个问题背后的原因，所以我将进一步解释一下：

我正在开发一个 Silverlight 应用程序，当我进入“构建解决方案”时，它会自动上传到我们的测试站点。麻烦的是，测试团队现在正在测试在线版本，而我正在开发一个新版本。因此，我希望 .\MyApp.html 之类的 URL 用于 QA 团队将测试的常规版本，然后 .\MyApp.html?version=debug 用于我正在处理的当前版本。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2010-04-04T22:39:56.783

I've done this by messing with the .csproj file: either move the attribute into the configuration-specific property groups, or just use Condition. Example:

```
<AssemblyName>MyApp</AssemblyName>
<AssemblyName Condition=" '$(Configuration)' == 'Debug' ">MyAppDebug</AssemblyName> 
```

Visual Studio becomes somewhat crippled when you start messing with .csproj like this - for example I can no longer F5/F10 to run the project in Debug mode; it tells me that "MyApp.exe" was not found (i.e. the debugger attempts to launch the assembly with the wrong AssemblyName).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-16T11:13:58.743

当然，您可以添加构建后事件来重命名程序集。如果您的解决方案只有一个程序集，这将起作用。

但是，如果您的解决方案由多个项目组成，您通常会有一个项目引用另一个问题生成的程序集。假设您的解决方案有两个项目：第一个创建一个 Windows 窗体 exe (MyApp.EXE)，它引用由第二个项目 (MyData.DLL) 创建的程序集。

在此示例中，调试 EXE 将命名为 MyAppDebug.EXE，它需要引用 MyDataDebug.EXE。这不适用于构建后事件中的重命名。

因此，我强烈建议不要进行任何重命名。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-16T11:25:00.827

如果您绝对决心这样做，那么您可以在您的 AssemblyInfo.cs 文件中执行以下操作：

```
#if DEBUG
[assembly: AssemblyTitle("MyAssemblyDebug")]
#else
[assembly: AssemblyTitle("MyAssembly")]
#endif 
```

然而，这几乎是一个黑客。此外，MSDN 文档非常清楚，在加载程序集时甚至不考虑文件名，因此进行简单的重命名不会改变程序集的整体标识。

如上所述，这通常是一个坏主意，因为它只会引入混乱和维护问题。如果您所做的只是通过执行构建后操作重命名文件：

> 重命名“$(ProjectDir)bin\Debug\SomeAssembly.dll”SomeAssemblyDebug.dll

Then you haven't really changed the identity of your assembly only the file name. You could name it Bob.dll and it will still have the same identity as far as the CLR is concerned. The only time this matters is when you are using a strongly named assembly that is going to be deployed to the GAC. In that case you **can't** have a different file name from the assembly name.

If you are truly trying to rename the assembly name, and not just the filename, then you have another issue on your hand because it is now a totally different assembly to the CLR.

I think you are better off to live with the standards that are already in place. If you find yourself having to do something really weird perhaps you should ask yourself why it is you are trying to do this. There may be a better solution.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-16T12:31:29.807

I've managed to achieve what I was after by using a post-build script:

```
if "$(ConfigurationName)"=="Debug" goto debug
"$(SolutionDir)ftp.bat" "$(TargetDir)$(TargetName).xap"
:debug
"$(SolutionDir)ftp.bat" "$(TargetDir)$(TargetName).xap" "$(TargetDir)$(TargetName)Debug.xap" 
```

My ftp script basically accepts an optional parameter at the end which is what to upload the file as. So on my local machine the filenames are always the same, but in debug mode we upload it with "Debug" at the end of the filename. Now I can choose in my webpage which version to show.

# python - 如何让 Apache/mod_python 进程收集它的僵尸？

> ID：208085
> 
> 赞同：2
> 
> 时间：2008-10-16T10:52:00.863
> 
> 标签：python, apache, apache2, mod-python

```
Apache/2.2.6 (Unix) DAV/2 mod_python/3.2.8 Python/2.4.4 configured ... 
```

其中一个 apache 进程异步生成了一些长时间运行的 python 脚本，并且显然似乎没有收集其子进程表条目。在子进程中长期运行的 python 脚本完成之后 - 已经离开了已失效的 python 进程。

```
# ps -ef | grep httpd
root     23911     1  0 Oct15 ?        00:00:01 /usr/sbin/httpd
...
qa       23920 23911  0 Oct15 ?        00:00:00 /usr/sbin/httpd

# ps -ef | grep python
...
qa       28449 23920  0 12:38 ?        00:00:00 [python] <defunct> 
```

使Apache进程收集其子进程的方法是什么？是否可以通过 mod_python 请求处理程序（例如 PythonCleanupHandler）来完成这项工作？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-16T15:31:54.747

File a bug report.

EDIT: I'm serious. Leaving zombies behind is a bug, and there is almost certainly nothing you can do from within Python.

Upgrade to the latest versions, look for bug reports, post on the mailing list, switch to another product.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-20T16:31:46.697

删除 mod_python 以支持[mod_wsgi](http://code.google.com/p/modwsgi/)（用于[wsgi](http://wsgi.org/wsgi/)），它不会在 afaik 周围留下孤立的僵尸。

# jquery - 如果 id 有 '.'，则 JQuery 选择器逻辑失败 在价值。有什么解决办法吗？

> ID：208089
> 
> 赞同：6
> 
> 时间：2008-10-16T10:52:46.197
> 
> 标签：jquery, jquery-selectors

我正在为我的 Web 应用程序使用 Spring Forms。对于嵌套属性，form 标签生成具有 id / name 形式的输入元素。

例如，Person 是命令类，并且 Address 包含在其地址字段中，那么 city 元素将是，

```
<input type="text" id="address**.**city" name="address**.**city" /> 
```

现在，问题是每当我尝试使用 jQuery 获取它的值时，

```
$("#address.city").val(); 
```

jQuery 未能选择任何合适的元素！

请让我知道任何解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-10-16T11:02:26.647

试试这个：

```
$("#address\\.city").val(); 
```

从[文档中](http://docs.jquery.com/Selectors)：

> 注意：如果您希望将上述任何元字符用作名称的文字部分，则必须使用两个反斜杠 ( `\`) 转义该字符。例如：

```
#foo\\:bar
#foo\\[bar\\]
#foo\\.bar 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-23T17:57:29.303

```
$('[id="address.city"]') 
```

也将工作

# c# - 如何找到两个字符串之间的差异？

> ID：208094
> 
> 赞同：26
> 
> 时间：2008-10-16T10:53:46.243
> 
> 标签：c#, string, word-diff

我有两个字符串，想显示它们之间的区别。例如，如果我有字符串“我来自火星”和“我来自金星”，输出可能是“我来自**金星**”。（通常用于显示审计日志中的更改等）

有一个简单的算法吗？我正在使用 C#，但我想通用算法可以适用于任何编程语言。

或者是否有一个框架类/第三方库可以做这种事情？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2008-10-16T10:55:52.353

看看这个：[http ://en.wikipedia.org/wiki/Diff#Algorithm](http://en.wikipedia.org/wiki/Diff#Algorithm)

另外：[http ://en.wikipedia.org/wiki/Longest_common_subsequence_problem](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)

这里还描述了一个实现：http: [//www.codeproject.com/KB/recipes/DiffAlgorithmCS.aspx](http://www.codeproject.com/KB/recipes/DiffAlgorithmCS.aspx)

# linux - syslog 性能可以提高吗？

> ID：208098
> 
> 赞同：11
> 
> 时间：2008-10-16T10:55:17.910
> 
> 标签：linux, unix, logging, syslog

我们在 Linux 上有一个使用[syslog](http://linux.die.net/man/3/syslog)机制的应用程序。在花了一周的时间试图弄清楚为什么这个应用程序运行得比预期慢后，我们发现如果我们消除 syslog，直接写入日志文件，性能会显着提高。

我理解为什么 syslog 比直接文件写入慢。但我想知道：有没有办法配置 syslog 来优化其性能？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2008-10-16T11:12:39.230

您可以通过在配置文件中的日志文件路径前添加“-”来配置 syslogd（和至少 rsyslog）在日志消息之后不同步日志文件。这以牺牲日志消息可能在崩溃中丢失的危险为代价来提高性能。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-11-18T18:46:02.233

有几个选项可以提高 syslog 性能：

*   使用宏优化呼叫

    ```
     int LogMask = LOG_UPTO(LOG_WARNING);
     #define syslog(a, ...) if ((a) & LogMask ) syslog((a), __VA_ARGS__)

     int main(int argc, char **argv)
     {
              LogMask = setlogmask(LOG_UPTO(LOG_WARNING));
              ...
     } 
    ```

    使用宏过滤 syslog 调用的一个优点是，整个调用被简化为对全局变量的条件跳转，如果您碰巧有通过其他函数转换大型数据集的 DEBUG 调用，这将非常有用。

*   设置日志掩码（）

    ```
    setlogmask(LOG_UPTO(LOG_LEVEL)) 
    ```

    setlogmask() 将通过不记录到 /dev/log 来优化调用，但程序仍将调用用作参数的函数。

*   使用 syslog.conf 过滤

    ```
     *.err                                               /var/log/messages 
    ```

    “有关详细信息，请查看 syslog.conf 的手册页。”

*   配置 syslog 以执行异步或缓冲日志记录

    metalog 用于缓冲日志输出并将其刷新为块。据我所知，stock syslog 和 syslog-ng 不这样做。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-16T11:08:59.130

在开始编写新的守护进程之前，您可以检查[syslog-ng](http://www.balabit.com/network-security/syslog-ng/)是否比普通的旧 syslog 更快（或可以配置为更快）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-16T12:08:52.830

如果您控制日志记录应用程序的源，您可以使用的一个技巧是在应用程序本身而不是在 syslog.conf 中屏蔽您想要的日志级别。几年前，我使用了一个生成大量调试日志的应用程序。我们没有从生产代码中删除调用，而是屏蔽了调试级别的调用，这样调试级别的调用就不会被发送到守护进程。我实际上找到了代码，它是 Perl，但它只是 setlogmask(3) 调用的前面。

```
use Sys::Syslog;
# Start system logging
# setlogmask controls what levels we're going to let get through.  If we mask
# them off here, then the syslog daemon doesn't need to be concerned by them
# 1   = emerg
# 2   = alert
# 4   = crit
# 8   = err
# 16  = warning
# 32  = notice
# 64  = info
# 128 = debug
Sys::Syslog::setlogsock('unix');
openlog($myname,'pid,cons,nowait','mail');
setlogmask(127); # allow everything but debug
#setlogmask(255); # everything
syslog('debug',"syslog opened"); 
```

不知道为什么我使用十进制而不是位掩码...... *耸了耸肩*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-16T10:59:27.883

编写您自己的 syslog 实现。:-P

这可以通过两种方式实现。

1.  编写自己的`LD_PRELOAD`钩子来覆盖 syslog 函数，并将它们输出到`stderr`。实际上，我多年前写过一篇关于此的文章：http: [//marc.info/](http://marc.info/?m=97175526803720) ?m= 97175526803720 :-P
2.  编写您自己的系统日志守护程序。这只是一个简单的获取数据报的问题`/dev/log`！:-P

好的，好的，所以这些都是滑稽的答案。你有没有分析`syslogd`过它最令人窒息的地方？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-16T11:13:59.820

您可以将 syslogd 的级别（或设施）配置为异步记录，方法是在日志文件的路径前加上减号（即：user.* [tab] -/var/log/user.log）。

干杯。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-11-24T15:35:31.840

syslog-async() 实现可能会有所帮助，但有可能在其他时间丢失日志行/有界延迟。 [http://thekelleys.org.uk/syslog-async/](http://thekelleys.org.uk/syslog-async/)

注意：这里的“异步”是指在您的应用程序中排队日志事件，而不是其他答案所指的异步 syslogd 输出文件配置选项。

# svn - 如何使用 SVNindex.cmd 获取 Srcsrv 来索引外部文件？

> ID：208100
> 
> 赞同：3
> 
> 时间：2008-10-16T10:55:47.783
> 
> 标签：svn, debugging, pdb-files, srcsrv

我最近使用了[Windows 调试工具](http://www.microsoft.com/whdc/devtools/debugging/default.mspx)中的 SrcSrv 功能，但注意到当我使用**SVNIndex.cmd**索引 pdb 时，它不会拾取来自[外部链接](http://svnbook.red-bean.com/en/1.0/ch07s03.html)的任何文件。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-09T10:00:21.487

最后我有时间再次弄清楚一切：

要同时获取包含在 svn:externals 属性中的文件，您只需将它们的目录添加到 /source= 开关！比我想象的要容易！因此，如果您的 Projectdir 下的“Ext1”目录中有一个外部目录，只需使用 /source=Projectdir;Ext1 调用 ssindex.cmd，您就可以将 Ext1 中的所有文件也编入索引。

我编写了一个简单的 perl 脚本，它为我处理命令行的创建，因此您不必添加任何新的外部条目。

HTH，斯特凡！

# robustness - 普适计算与磁干扰

> ID：208103
> 
> 赞同：1
> 
> 时间：2008-10-16T10:57:23.647
> 
> 标签：robustness

想象一下汽车的收音机，汽车经过的电磁场，在处理过程中是否有干扰？很容易理解，强字段会损坏数据。但是正在处理的数据呢？也可以改吗？

如果是这样，您如何保护您的代码免受此侵害？（没有电子保护只是代码）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-16T11:15:26.090

对于最强大的任务关键型系统，您可以使用多个处理器并比较结果。这就是我们对飞机自动驾驶（自动着陆）所做的。我们有三个自动驾驶仪，一个驾驶飞机，两个检查那个。如果这三个中的任何一个不同意，它就会被关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-12T21:59:46.960

您指的是维基百科所说的[软错误](http://en.wikipedia.org/wiki/Soft_error)。[正如Jim C](https://stackoverflow.com/users/21706/jim-c)和[fmsf 所](https://stackoverflow.com/users/26004/fmsf)指出的，业界接受的传统解决方法是通过冗余。

几年前，我们维修部门的分析显示，在保存固件的电池供电 SRAM 中，有数量不可接受的退回单元存在单位错误。尽管我们努力进行根本原因分析，但我们无法解释问题的根源。那时，硬件更改是不可能的，因此我们需要一个纯软件解决方案来治疗症状。

我们想要一个可以简单快速地实施的可靠修复，因此我们对 SRAM 中的代码块生成[奇偶校验](http://en.wikipedia.org/wiki/Parity_bit)。我们选择的块大小需要很少的额外存储来存储奇偶校验数据，但提供了足够的冗余来检测和纠正我们看到的任何错误，然后是一些错误。它记录它检测到的错误并指示它是否可以纠正它们，因此我们仍然知道现场何时发生位错误。到现在为止还挺好！

我们的产品经理出于好奇做了一些额外的研究，并说服自己，罪魁祸首是宇宙辐射。我们从未明确地证明这一点，但他对错误的数量似乎与根据他发现的数据的预期一致感到满意。我很高兴回报已经停止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-16T11:03:17.377

我怀疑你可以。

更改的代码将无法运行，因此如果您遇到此问题，您的程序可能会崩溃。

这是一个硬件问题。

# javascript - 如何从 JavaScript 对象中删除属性？

> ID：208105
> 
> 赞同：6939
> 
> 时间：2008-10-16T10:57:45.830
> 
> 标签：javascript

假设我创建一个对象如下：

```
let myObject = {
  "ircEvent": "PRIVMSG",
  "method": "newURI",
  "regex": "^http://.*"
}; 
```

我应该如何删除该属性`regex`以得到新`myObject`的如下？

```
let myObject = {
  "ircEvent": "PRIVMSG",
  "method": "newURI"
}; 
```

* * *

## 回答 #1

> 赞同：9255
> 
> 时间：2008-10-16T10:58:53.207

要从对象中删除属性（改变对象），您可以这样做：

```
delete myObject.regex;
// or,
delete myObject['regex'];
// or,
var prop = "regex";
delete myObject[prop]; 
```

演示

```
var myObject = {
    "ircEvent": "PRIVMSG",
    "method": "newURI",
    "regex": "^http://.*"
};
delete myObject.regex;

console.log(myObject);
```

对于有兴趣阅读更多相关信息的任何人，Stack Overflow 用户[kangax](https://stackoverflow.com/users/130652/kangax)`delete`已经写了一篇关于他们博客上的声明的非常深入的博客文章，*[了解删除](http://perfectionkills.com/understanding-delete)*。强烈推荐。

如果您想要一个*新*对象，其中包含除一些之外的所有原始键，您可以使用[destructuring](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment#object_destructuring)。

演示

```
let myObject = {
  "ircEvent": "PRIVMSG",
  "method": "newURI",
  "regex": "^http://.*"
};

const {regex, ...newObj} = myObject;

console.log(newObj);   // has no 'regex' key
console.log(myObject); // remains unchanged
```

* * *

## 回答 #2

> 赞同：1047
> 
> 时间：2014-02-12T17:48:05.540

Objects in JavaScript can be thought of as maps between keys and values. The `delete` operator is used to remove these keys, more commonly known as object properties, one at a time.

```
var obj = {
  myProperty: 1    
}
console.log(obj.hasOwnProperty('myProperty')) // true
delete obj.myProperty
console.log(obj.hasOwnProperty('myProperty')) // false
```

The `delete` operator does not directly free memory, and it differs from simply assigning the value of `null` or `undefined` to a property, in that the property *itself* is removed from the object. Note that if the *value* of a deleted property was a reference type (an object), and another part of your program still holds a reference to that object, then that object will, of course, not be garbage collected until all references to it have disappeared.

`delete` will only work on properties whose descriptor marks them as configurable.

* * *

## 回答 #3

> 赞同：295
> 
> 时间：2008-10-16T11:03:01.653

```
var myObject = {"ircEvent": "PRIVMSG", "method": "newURI", "regex": "^http://.*"};

delete myObject.regex;

console.log ( myObject.regex); // logs: undefined
```

这适用于 Firefox 和 Internet Explorer，我认为它适用于所有其他人。

* * *

## 回答 #4

> 赞同：289
> 
> 时间：2016-11-08T18:02:09.357

Old question, modern answer. Using object destructuring, an [ECMAScript 6](https://en.wikipedia.org/wiki/ECMAScript#6th_Edition_-_ECMAScript_2015) feature, it's as simple as:

```
const { a, ...rest } = { a: 1, b: 2, c: 3 }; 
```

Or with the questions sample:

```
const myObject = {"ircEvent": "PRIVMSG", "method": "newURI", "regex": "^http://.*"};
const { regex, ...newObject } = myObject;
console.log(newObject); 
```

[You can see it in action in the Babel try-out editor.](https://babeljs.io/repl/#?babili=false&evaluate=true&lineWrap=true&presets=es2015%2Cstage-0&experimental=true&loose=true&spec=false&code=const%20myObject%20%3D%20%7B%22ircEvent%22%3A%20%22PRIVMSG%22%2C%20%22method%22%3A%20%22newURI%22%2C%20%22regex%22%3A%20%22%5Ehttp%3A%2F%2F.*%22%7D%3B%0Aconst%20%7B%20regex%2C%20...newObject%20%7D%20%3D%20myObject%3B%0Aconsole.log(newObject)%3B)

* * *

**Edit:**

To reassign to the same variable, use a `let`:

```
let myObject = {"ircEvent": "PRIVMSG", "method": "newURI", "regex": "^http://.*"};
({ regex, ...myObject } = myObject);
console.log(myObject); 
```

* * *

## 回答 #5

> 赞同：270
> 
> 时间：2012-09-18T00:56:53.363

The `delete` operator is used to remove properties from objects.

```
const obj = { foo: "bar" }
delete obj.foo
obj.hasOwnProperty("foo") // false 
```

Note that, for arrays, **this is not the same as removing an element**. To remove an element from an array, use `Array#splice` or `Array#pop`. For example:

```
arr // [0, 1, 2, 3, 4]
arr.splice(3,1); // 3
arr // [0, 1, 2, 4] 
```

# Details

`delete` in JavaScript has a different function to that of the keyword in C and C++: it does not directly free memory. Instead, its sole purpose is to remove properties from objects.

For arrays, deleting a property corresponding to an index, creates a sparse array (ie. an array with a "hole" in it). Most browsers represent these missing array indices as "empty".

```
var array = [0, 1, 2, 3]
delete array[2] // [0, 1, empty, 3] 
```

Note that `delete` does not relocate `array[3]` into `array[2]`.

Different built-in functions in JavaScript handle sparse arrays differently.

*   `for...in` will skip the empty index completely.

*   A traditional `for` loop will return `undefined` for the value at the index.

*   Any method using `Symbol.iterator` will return `undefined` for the value at the index.

*   `forEach`, `map` and `reduce` will simply skip the missing index.

So, the `delete` operator should not be used for the common use-case of removing elements from an array. Arrays have a dedicated methods for removing elements and reallocating memory: `Array#splice()` and `Array#pop`.

## Array#splice(start[, deleteCount[, item1[, item2[, ...]]]])

`Array#splice` mutates the array, and returns any removed indices. `deleteCount` elements are removed from index `start`, and `item1, item2... itemN` are inserted into the array from index `start`. If `deleteCount` is omitted then elements from startIndex are removed to the end of the array.

```
let a = [0,1,2,3,4]
a.splice(2,2) // returns the removed elements [2,3]
// ...and `a` is now [0,1,4] 
```

There is also a similarly named, but different, function on `Array.prototype`: `Array#slice`.

## Array#slice([begin[, end]])

`Array#slice` is non-destructive, and returns a new array containing the indicated indices from `start` to `end`. If `end` is left unspecified, it defaults to the end of the array. If `end` is positive, it specifies the zero-based **non-inclusive** index to stop at. If `end` is negative it, it specifies the index to stop at by counting back from the end of the array (eg. -1 will omit the final index). If `end <= start`, the result is an empty array.

```
let a = [0,1,2,3,4]
let slices = [
    a.slice(0,2),
    a.slice(2,2),
    a.slice(2,3),
    a.slice(2,5) ]

//   a           [0,1,2,3,4]
//   slices[0]   [0 1]- - -   
//   slices[1]    - - - - -
//   slices[2]    - -[3]- -
//   slices[3]    - -[2 4 5] 
```

# Array#pop

`Array#pop` removes the last element from an array, and returns that element. This operation changes the length of the array.

* * *

## 回答 #6

> 赞同：210
> 
> 时间：2018-09-12T18:39:55.263

### [Spread Syntax](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax) (ES6)

To complete [Koen's answer](https://stackoverflow.com/questions/208105/how-do-i-remove-a-property-from-a-javascript-object/40493600#40493600), in case you want to remove a dynamic variable using the spread syntax, you can do it like so:

```
const key = 'a';

const { [key]: foo, ...rest } = { a: 1, b: 2, c: 3 };

console.log(foo);  // 1
console.log(rest); // { b: 2, c: 3 }
```

* *`foo` will be a new variable with the value of `a` (which is 1).*

### Extended answer

There are a few common ways to remove a property from an object.
Each one has its own pros and cons ([check this performance comparison](https://jsperf.com/delete-vs-undefined-vs-null/16)):

[***Delete Operator***](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/delete)

It is readable and short, however, it might not be the best choice if you are operating on a large number of objects as its performance is not optimized.

```
delete obj[key]; 
```

[***Reassignment***](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Assignment_Operators)

It is more than two times faster than `delete`, however the property is **not** deleted and can be iterated.

```
obj[key] = null;
obj[key] = false;
obj[key] = undefined; 
```

[***Spread Operator***](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax)

This `ES6` operator allows us to return a brand new object, excluding any properties, without mutating the existing object. The downside is that it has the worse performance out of the above and is not suggested to be used when you need to remove many properties at a time.

```
{ [key]: val, ...rest } = obj; 
```

* * *

## 回答 #7

> 赞同：114
> 
> 时间：2014-05-24T18:53:26.537

Another alternative is to use the [Underscore.js](https://underscorejs.org) library.

Note that `_.pick()` and `_.omit()` both return a copy of the object and don't directly modify the original object. Assigning the result to the original object should do the trick (not shown).

Reference: [link](http://underscorejs.org/#pick) **_.pick(object, *keys)**

Return a copy of the object, filtered to only have values for the whitelisted keys (or array of valid keys).

```
var myJSONObject = 
{"ircEvent": "PRIVMSG", "method": "newURI", "regex": "^http://.*"};

_.pick(myJSONObject, "ircEvent", "method");
=> {"ircEvent": "PRIVMSG", "method": "newURI"}; 
```

Reference: [link](http://underscorejs.org/#omit) **_.omit(object, *keys)**

Return a copy of the object, filtered to omit the blacklisted keys (or array of keys).

```
var myJSONObject = 
{"ircEvent": "PRIVMSG", "method": "newURI", "regex": "^http://.*"};

_.omit(myJSONObject, "regex");
=> {"ircEvent": "PRIVMSG", "method": "newURI"}; 
```

For arrays, `_.filter()` and `_.reject()` can be used in a similar manner.

* * *

## 回答 #8

> 赞同：104
> 
> 时间：2019-05-07T20:35:31.847

**To clone an object without a property:**

For example:

```
let object = { a: 1, b: 2, c: 3 }; 
```

And we need to delete `a`.

1.  With an **explicit prop key**:

    ```
    const { a, ...rest } = object;
    object = rest; 
    ```

2.  With a **variable prop key**:

    ```
    const propKey = 'a';
    const { [propKey]: propValue, ...rest } = object;
    object = rest; 
    ```

3.  A cool **arrow function** :

    ```
     const removeProperty = (propKey, { [propKey]: propValue, ...rest }) => rest;

     object = removeProperty('a', object); 
    ```

4.  For **multiple properties**

    ```
    const removeProperties = (object, ...keys) => (keys.length ? removeProperties(removeProperty(keys.pop(), object), ...keys) : object); 
    ```

***Usage***

```
object = removeProperties(object, 'a', 'b') // result => { c: 3 } 
```

***Or***

```
 const propsToRemove = ['a', 'b']
    object = removeProperties(object, ...propsToRemove) // result => { c: 3 } 
```

* * *

## 回答 #9

> 赞同：69
> 
> 时间：2014-02-12T06:29:57.957

The term you have used in your question title, *Remove a property from a JavaScript object*, can be interpreted in some different ways. The one is to remove it for whole the memory and the list of object keys or the other is just to remove it from your object. As it has been mentioned in some other answers, the `delete` keyword is the main part. Let's say you have your object like:

```
myJSONObject = {"ircEvent": "PRIVMSG", "method": "newURI", "regex": "^http://.*"}; 
```

If you do:

```
console.log(Object.keys(myJSONObject)); 
```

the result would be:

```
["ircEvent", "method", "regex"] 
```

You can delete that specific key from your object keys like:

```
delete myJSONObject["regex"]; 
```

Then your objects key using `Object.keys(myJSONObject)` would be:

```
["ircEvent", "method"] 
```

But the point is if you care about memory and you want to whole the object gets removed from the memory, it is recommended to set it to null before you delete the key:

```
myJSONObject["regex"] = null;
delete myJSONObject["regex"]; 
```

The other important point here is to be careful about your other references to the same object. For instance, if you create a variable like:

```
var regex = myJSONObject["regex"]; 
```

Or add it as a new pointer to another object like:

```
var myOtherObject = {};
myOtherObject["regex"] = myJSONObject["regex"]; 
```

Then even if you remove it from your object `myJSONObject`, that specific object won't get deleted from the memory, since the `regex` variable and `myOtherObject["regex"]` still have their values. Then how could we remove the object from the memory for sure?

The answer would be to **delete all the references you have in your code, pointed to that very object** and also **not use `var` statements to create new references to that object**. This last point regarding `var` statements, is one of the most crucial issues that we are usually faced with, because using `var` statements would prevent the created object from getting removed.

Which means in this case you won't be able to remove that object because you have created the `regex` variable via a `var` statement, and if you do:

```
delete regex; //False 
```

The result would be `false`, which means that your delete statement haven't been executed as you expected. But if you had not created that variable before, and you only had `myOtherObject["regex"]` as your last existing reference, you could have done this just by removing it like:

```
myOtherObject["regex"] = null;
delete myOtherObject["regex"]; 
```

**In other words, a JavaScript object gets killed as soon as there is no reference left in your code pointed to that object.**

* * *

**Update:**

Thanks to @AgentME:

> Setting a property to null before deleting it doesn't accomplish anything (unless the object has been sealed by Object.seal and the delete fails. That's not usually the case unless you specifically try).

To get more information on `Object.seal`: [Object.seal()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/seal)

* * *

## 回答 #10

> 赞同：50
> 
> 时间：2016-01-10T16:36:39.493

ECMAScript 2015 (or ES6) came with built-in [Reflect](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect) object. It is possible to delete object property by calling [Reflect.deleteProperty()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect/deleteProperty) function with target object and property key as parameters:

```
Reflect.deleteProperty(myJSONObject, 'regex'); 
```

which is equivalent to:

```
delete myJSONObject['regex']; 
```

But if the property of the object is not configurable it cannot be deleted neither with deleteProperty function nor delete operator:

```
let obj = Object.freeze({ prop: "value" });
let success = Reflect.deleteProperty(obj, "prop");
console.log(success); // false
console.log(obj.prop); // value 
```

[Object.freeze()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze) makes all properties of object not configurable (besides other things). `deleteProperty` function (as well as [delete operator](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/delete)) returns `false` when tries to delete any of it's properties. If property is configurable it returns `true`, even if property does not exist.

The difference between `delete` and `deleteProperty` is when using strict mode:

```
"use strict";

let obj = Object.freeze({ prop: "value" });
Reflect.deleteProperty(obj, "prop"); // false
delete obj["prop"];
// TypeError: property "prop" is non-configurable and can't be deleted 
```

* * *

## 回答 #11

> 赞同：47
> 
> 时间：2016-02-21T18:09:47.750

Suppose you have an object that looks like this:

```
var Hogwarts = {
    staff : [
        'Argus Filch',
        'Filius Flitwick',
        'Gilderoy Lockhart',
        'Minerva McGonagall',
        'Poppy Pomfrey',
        ...
    ],
    students : [
        'Hannah Abbott',
        'Katie Bell',
        'Susan Bones',
        'Terry Boot',
        'Lavender Brown',
        ...
    ]
}; 
```

### Deleting an object property

If you want to use the entire `staff` array, the proper way to do this, would be to do this:

```
delete Hogwarts.staff; 
```

Alternatively, you could also do this:

```
delete Hogwarts['staff']; 
```

Similarly, removing the entire students array would be done by calling `delete Hogwarts.students;` or `delete Hogwarts['students'];`.

### Deleting an array index

Now, if you want to remove a single staff member or student, the procedure is a bit different, because both properties are arrays themselves.

If you know the index of your staff member, you could simply do this:

```
Hogwarts.staff.splice(3, 1); 
```

If you do not know the index, you'll also have to do an index search:

```
Hogwarts.staff.splice(Hogwarts.staff.indexOf('Minerva McGonnagall') - 1, 1); 
```

* * *

### Note

While you technically can use `delete` for an array, using it would result in getting incorrect results when calling for example `Hogwarts.staff.length` later on. In other words, `delete` would remove the element, but it wouldn't update the value of `length` property. Using `delete` would also mess up your indexing.

So, when deleting values from an object, always first consider whether you're dealing with object properties or whether you're dealing with array values, and choose the appropriate strategy based on that.

If you want to experiment with this, you can use [**this Fiddle**](http://jsfiddle.net/cb57dusv/46/) as a starting point.

* * *

## 回答 #12

> 赞同：38
> 
> 时间：2016-01-22T02:29:40.380

I personally use [Underscore.js](https://en.wikipedia.org/wiki/Underscore.js) or [Lodash](https://lodash.com) for object and array manipulation:

```
myObject = _.omit(myObject, 'regex'); 
```

* * *

## 回答 #13

> 赞同：32
> 
> 时间：2017-04-07T16:16:01.140

Using **delete** method is the best way to do that, as per MDN description, the delete operator removes a property from an object. So you can simply write:

```
delete myObject.regex;
// OR
delete myObject['regex']; 
```

> The delete operator removes a given property from an object. On successful deletion, it will return true, else false will be returned. However, it is important to consider the following scenarios:
> 
> *   If the property which you are trying to delete does not exist, delete will not have any effect and will return true
>     
>     
> *   If a property with the same name exists on the object's prototype chain, then, after deletion, the object will use the property from the prototype chain (in other words, delete only has an effect on own properties).
>     
>     
> *   Any property declared with var cannot be deleted from the global scope or from a function's scope.
>     
>     
> *   As such, delete cannot delete any functions in the global scope (whether this is part from a function definition or a function (expression).
>     
>     
> *   Functions which are part of an object (apart from the
>     global scope) can be deleted with delete.
>     
>     
> *   Any property declared with let or const cannot be deleted from the scope within which they were defined. Non-configurable properties cannot be removed. This includes properties of built-in objects like Math, Array, Object and properties that are created as non-configurable with methods like Object.defineProperty().

The following snippet gives another simple example:

```
var Employee = {
      age: 28,
      name: 'Alireza',
      designation: 'developer'
    }

    console.log(delete Employee.name);   // returns true
    console.log(delete Employee.age);    // returns true

    // When trying to delete a property that does 
    // not exist, true is returned 
    console.log(delete Employee.salary); // returns true
```

For more info about and seeing more example, visit the link below:

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/delete](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/delete)

* * *

## 回答 #14

> 赞同：30
> 
> 时间：2017-03-26T15:19:55.720

Another solution, using **[`Array#reduce`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce)**.

```
var myObject = {
  "ircEvent": "PRIVMSG",
  "method": "newURI",
  "regex": "^http://.*"
};

myObject = Object.keys(myObject).reduce(function(obj, key) {
  if (key != "regex") {           //key you want to remove
    obj[key] = myObject[key];
  }
  return obj;
}, {});

console.log(myObject);
```

However, it will **mutate** the original object. If you want to create a new object **without** the specified key, just assign the reduce function to a new variable, e.g.:

(ES6)

```
const myObject = {
  ircEvent: 'PRIVMSG',
  method: 'newURI',
  regex: '^http://.*',
};

const myNewObject = Object.keys(myObject).reduce((obj, key) => {
  key !== 'regex' ? obj[key] = myObject[key] : null;
  return obj;
}, {});

console.log(myNewObject);
```

* * *

## 回答 #15

> 赞同：26
> 
> 时间：2014-09-15T00:48:08.797

There are a lot of good answers here but I just want to chime in that when using delete to remove a property in JavaScript, it is often wise to first check if that property exists to prevent errors.

E.g

```
var obj = {"property":"value", "property2":"value"};

if (obj && obj.hasOwnProperty("property2")) {
  delete obj.property2;
} else {
  //error handling
} 
```

Due to the dynamic nature of JavaScript there are often cases where you simply don't know if the property exists or not. Checking if obj exists before the && also makes sure you don't throw an error due to calling the hasOwnProperty() function on an undefined object.

Sorry if this didn't add to your specific use case but I believe this to be a good design to adapt when managing objects and their properties.

* * *

## 回答 #16

> 赞同：25
> 
> 时间：2014-12-01T07:33:17.023

This post is very old and I find it very helpful so I decided to share the unset function I wrote in case someone else see this post and think why it's not so simple as it in PHP unset function.

The reason for writing this new `unset` function, is to keep the index of all other variables in this hash_map. Look at the following example, and see how the index of "test2" did not change after removing a value from the hash_map.

```
function unset(unsetKey, unsetArr, resort) {
  var tempArr = unsetArr;
  var unsetArr = {};
  delete tempArr[unsetKey];
  if (resort) {
    j = -1;
  }
  for (i in tempArr) {
    if (typeof(tempArr[i]) !== 'undefined') {
      if (resort) {
        j++;
      } else {
        j = i;
      }
      unsetArr[j] = tempArr[i];
    }
  }
  return unsetArr;
}

var unsetArr = ['test', 'deletedString', 'test2'];

console.log(unset('1', unsetArr, true)); // output Object {0: "test", 1: "test2"}
console.log(unset('1', unsetArr, false)); // output Object {0: "test", 2: "test2"}
```

* * *

## 回答 #17

> 赞同：18
> 
> 时间：2016-07-06T14:51:03.283

Try the following method. Assign the `Object` property value to `undefined`. Then `stringify` the object and `parse`.

```
 var myObject = {"ircEvent": "PRIVMSG", "method": "newURI", "regex": "^http://.*"};

myObject.regex = undefined;
myObject = JSON.parse(JSON.stringify(myObject));

console.log(myObject);
```

* * *

## 回答 #18

> 赞同：18
> 
> 时间：2016-11-28T15:14:52.373

Using [ramda#dissoc](http://ramdajs.com/docs/#dissoc) you will get a new object without the attribute `regex`:

```
const newObject = R.dissoc('regex', myObject);
// newObject !== myObject 
```

You can also use other functions to achieve the same effect - omit, pick, ...

* * *

## 回答 #19

> 赞同：13
> 
> 时间：2016-06-23T09:38:58.933

If you want to delete a property deeply nested in the object then you can use the following recursive function with path to the property as the second argument:

```
var deepObjectRemove = function(obj, path_to_key){
    if(path_to_key.length === 1){
        delete obj[path_to_key[0]];
        return true;
    }else{
        if(obj[path_to_key[0]])
            return deepObjectRemove(obj[path_to_key[0]], path_to_key.slice(1));
        else
            return false;
    }
}; 
```

Example:

```
var a = {
    level1:{
        level2:{
            level3: {
                level4: "yolo"
            }
        }
    }
};

deepObjectRemove(a, ["level1", "level2", "level3"]);
console.log(a);

//Prints {level1: {level2: {}}} 
```

* * *

## 回答 #20

> 赞同：13
> 
> 时间：2017-09-14T14:14:07.770

### Using [Lodash](https://en.wikipedia.org/wiki/Lodash)

```
import omit from 'lodash/omit';

const prevObject = {test: false, test2: true};
// Removes test2 key from previous object
const nextObject = omit(prevObject, 'test2'); 
```

### Using Ramda

```
R.omit(['a', 'd'], {a: 1, b: 2, c: 3, d: 4}); //=> {b: 2, c: 3} 
```

* * *

## 回答 #21

> 赞同：12
> 
> 时间：2017-09-19T08:37:41.707

# Object.assign() & Object.keys() & Array.map()

```
const obj = {
    "Filters":[
        {
            "FilterType":"between",
            "Field":"BasicInformationRow.A0",
            "MaxValue":"2017-10-01",
            "MinValue":"2017-09-01",
            "Value":"Filters value"
        }
    ]
};

let new_obj1 = Object.assign({}, obj.Filters[0]);
let new_obj2 = Object.assign({}, obj.Filters[0]);

/*

// old version

let shaped_obj1 = Object.keys(new_obj1).map(
    (key, index) => {
        switch (key) {
            case "MaxValue":
                delete new_obj1["MaxValue"];
                break;
            case "MinValue":
                delete new_obj1["MinValue"];
                break;
        }
        return new_obj1;
    }
)[0];

let shaped_obj2 = Object.keys(new_obj2).map(
    (key, index) => {
        if(key === "Value"){
            delete new_obj2["Value"];
        }
        return new_obj2;
    }
)[0];

*/

// new version!

let shaped_obj1 = Object.keys(new_obj1).forEach(
    (key, index) => {
        switch (key) {
            case "MaxValue":
                delete new_obj1["MaxValue"];
                break;
            case "MinValue":
                delete new_obj1["MinValue"];
                break;
            default:
                break;
        }
    }
);

let shaped_obj2 = Object.keys(new_obj2).forEach(
    (key, index) => {
        if(key === "Value"){
            delete new_obj2["Value"];
        }
    }
);
```

* * *

## 回答 #22

> 赞同：11
> 
> 时间：2021-01-18T15:54:15.097

Here's an ES6 way to remove the entry easily:

```
let myObject = {
  "ircEvent": "PRIVMSG",
  "method": "newURI",
  "regex": "^http://.*"
};

const removeItem = 'regex';

const { [removeItem]: remove, ...rest } = myObject;

console.log(remove); // "^http://.*"
console.log(rest); // Object { ircEvent: "PRIVMSG", method: "newURI" }
```

* * *

## 回答 #23

> 赞同：10
> 
> 时间：2017-07-26T07:19:30.190

[Dan's assertion](https://stackoverflow.com/questions/208105/how-do-i-remove-a-property-from-a-javascript-object/21735614#21735614) that 'delete' is very slow and the benchmark he posted were doubted. So I carried out the test myself in Chrome 59\. It does seem that 'delete' is about 30 times slower:

```
var iterationsTotal = 10000000;  // 10 million
var o;
var t1 = Date.now(),t2;
for (let i=0; i<iterationsTotal; i++) {
   o = {a:1,b:2,c:3,d:4,e:5};
   delete o.a; delete o.b; delete o.c; delete o.d; delete o.e;
}
console.log ((t2=Date.now())-t1);  // 6135
for (let i=0; i<iterationsTotal; i++) {
   o = {a:1,b:2,c:3,d:4,e:5};
   o.a = o.b = o.c = o.d = o.e = undefined;
}
console.log (Date.now()-t2);  // 205 
```

Note that I purposedly carried out more than one 'delete' operations in one loop cycle to minimize the effect caused by the other operations.

* * *

## 回答 #24

> 赞同：10
> 
> 时间：2017-12-14T02:35:29.790

# Property Removal in JavaScript

There are many different options presented on this page, not because most of the options are wrong—or because the answers are duplicates—but because the appropriate technique depends on the situation you're in and the goals of the tasks you and/or you team are trying to fulfill. To answer you question unequivocally, one needs to know:

1.  The version of ECMAScript you're targeting
2.  The range of object types you want to remove properties on and the type of property names you need to be able to omit (Strings only? Symbols? Weak references mapped from arbitrary objects? These have all been types of property pointers in JavaScript for years now)
3.  The programming ethos/patterns you and your team use. Do you favor functional approaches and mutation is verboten on your team, or do you employ wild west mutative object-oriented techniques?
4.  Are you looking to achieve this in pure JavaScript or are you willing & able to use a 3rd-party library?

Once those four queries have been answered, there are essentially four categories of "property removal" in JavaScript to chose from in order to meet your goals. They are:

## Mutative object property deletion, unsafe

This category is for operating on object literals or object instances when you want to retain/continue to use the original reference and aren't using stateless functional principles in your code. An example piece of syntax in this category:

```
'use strict'
const iLikeMutatingStuffDontI = { myNameIs: 'KIDDDDD!', [Symbol.for('amICool')]: true }
delete iLikeMutatingStuffDontI[Symbol.for('amICool')] // true
Object.defineProperty({ myNameIs: 'KIDDDDD!', 'amICool', { value: true, configurable: false })
delete iLikeMutatingStuffDontI['amICool'] // throws 
```

This category is the oldest, most straightforward & most widely supported category of property removal. It supports `Symbol` & array indexes in addition to strings and works in every version of JavaScript except for the very first release. However, it's mutative which violates some programming principles and has performance implications. It also can result in uncaught exceptions when used on [non-configurable properties in strict mode](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/delete).

## Rest-based string property omission

This category is for operating on plain object or array instances in newer ECMAScript flavors when a non-mutative approach is desired and you don't need to account for Symbol keys:

```
const foo = { name: 'KIDDDDD!', [Symbol.for('isCool')]: true }
const { name, ...coolio } = foo // coolio doesn't have "name"
const { isCool, ...coolio2 } = foo // coolio2 has everything from `foo` because `isCool` doesn't account for Symbols :( 
```

## Mutative object property deletion, safe

This category is for operating on object literals or object instances when you want to retain/continue to use the original reference while guarding against exceptions being thrown on unconfigurable properties:

```
'use strict'
const iLikeMutatingStuffDontI = { myNameIs: 'KIDDDDD!', [Symbol.for('amICool')]: true }
Reflect.deleteProperty(iLikeMutatingStuffDontI, Symbol.for('amICool')) // true
Object.defineProperty({ myNameIs: 'KIDDDDD!', 'amICool', { value: true, configurable: false })
Reflect.deleteProperty(iLikeMutatingStuffDontI, 'amICool') // false 
```

In addition, while mutating objects in-place isn't stateless, you can use the functional nature of `Reflect.deleteProperty` to do partial application and other functional techniques that aren't possible with `delete` statements.

## Syntax-based string property omission

This category is for operating on plain object or array instances in newer ECMAScript flavors when a non-mutative approach is desired and you don't need to account for Symbol keys:

```
const foo = { name: 'KIDDDDD!', [Symbol.for('isCool')]: true }
const { name, ...coolio } = foo // coolio doesn't have "name"
const { isCool, ...coolio2 } = foo // coolio2 has everything from `foo` because `isCool` doesn't account for Symbols :( 
```

## Library-based property omission

This category is generally allows for greater functional flexibility, including accounting for Symbols & omitting more than one property in one statement:

```
const o = require("lodash.omit")
const foo = { [Symbol.for('a')]: 'abc', b: 'b', c: 'c' }
const bar = o(foo, 'a') // "'a' undefined"
const baz = o(foo, [ Symbol.for('a'), 'b' ]) // Symbol supported, more than one prop at a time, "Symbol.for('a') undefined" 
```

* * *

## 回答 #25

> 赞同：9
> 
> 时间：2018-05-24T18:42:51.470

**@johnstock**, we can also use JavaScript's prototyping concept to add method to objects to delete any passed key available in calling object.

Above answers are appreciated.

```
var myObject = {
  "ircEvent": "PRIVMSG",
  "method": "newURI",
  "regex": "^http://.*"
};

// 1st and direct way 
delete myObject.regex; // delete myObject["regex"]
console.log(myObject); // { ircEvent: 'PRIVMSG', method: 'newURI' }

// 2 way -  by using the concept of JavaScript's prototyping concept
Object.prototype.removeFromObjectByKey = function(key) {
  // If key exists, remove it and return true
  if (this[key] !== undefined) {
    delete this[key]
    return true;
  }
  // Else return false
  return false;
}

var isRemoved = myObject.removeFromObjectByKey('method')
console.log(myObject) // { ircEvent: 'PRIVMSG' }

// More examples
var obj = {
  a: 45,
  b: 56,
  c: 67
}
console.log(obj) // { a: 45, b: 56, c: 67 }

// Remove key 'a' from obj
isRemoved = obj.removeFromObjectByKey('a')
console.log(isRemoved); //true
console.log(obj); // { b: 56, c: 67 }

// Remove key 'd' from obj which doesn't exist
var isRemoved = obj.removeFromObjectByKey('d')
console.log(isRemoved); // false
console.log(obj); // { b: 56, c: 67 }
```

* * *

## 回答 #26

> 赞同：9
> 
> 时间：2019-09-18T10:59:19.380

You can use a filter like below

```
var myObject = {
    "ircEvent": "PRIVMSG",
    "method": "newURI",
    "regex": "^http://.*"
};

// Way 1

let filter1 = {}
  Object.keys({...myObject}).filter(d => {
  if(d !== 'regex'){
    filter1[d] = myObject[d];
  }
})

console.log(filter1)

// Way 2

let filter2 = Object.fromEntries(Object.entries({...myObject}).filter(d =>
d[0] !== 'regex'
))

console.log(filter2)
```

* * *

## 回答 #27

> 赞同：9
> 
> 时间：2021-12-18T17:05:12.790

There are a couple of options:

1.  Remove using a dot property accessor

```
const myObject = {
  "ircEvent": "PRIVMSG",
  "method": "newURI",
  "regex": "^http://.*",
};

delete myObject.regex;
console.log(myObject);
```

2.  Remove using square brackets property accessor

```
const myObject = {
      "ircEvent": "PRIVMSG",
      "method": "newURI",
      "regex": "^http://.*",
    };

delete myObject['regex'];
console.log(myObject);
// or
const name = 'ircEvent';
delete myObject[name];
console.log(myObject);
```

3.  Alternative option but in an immutable manner without altering the original object, is using object destructuring and rest syntax.

```
 const myObject = {
      "ircEvent": "PRIVMSG",
      "method": "newURI",
      "regex": "^http://.*",
    };

const { regex, ...myObjectRest} = myObject;
console.log(myObjectRest); 
```

* * *

## 回答 #28

> 赞同：8
> 
> 时间：2017-09-29T08:03:10.650

I have used [Lodash "unset"](https://lodash.com/docs/4.17.4#unset) to make it happen for a nested object also... only this needs to write small logic to get the path of the property key which is expected by the *omit* method.

1.  Method which returns the property path as an array

```
var a = {"bool":{"must":[{"range":{"price_index.final_price":{"gt":"450", "lt":"500"}}}, {"bool":{"should":[{"term":{"color_value.keyword":"Black"}}]}}]}};

function getPathOfKey(object,key,currentPath, t){
    var currentPath = currentPath || [];

    for(var i in object){
        if(i == key){
            t = currentPath;
        }
        else if(typeof object[i] == "object"){
            currentPath.push(i)
            return getPathOfKey(object[i], key,currentPath)
        }
    }
    t.push(key);
    return t;
}
document.getElementById("output").innerHTML =JSON.stringify(getPathOfKey(a,"price_index.final_price"))
```

```
<div id="output">

</div>
```

1.  Then just using [Lodash unset](https://lodash.com/docs/4.17.4#unset) method remove property from object.

```
var unset = require('lodash.unset');
unset(a, getPathOfKey(a, "price_index.final_price"));
```

* * *

## 回答 #29

> 赞同：4
> 
> 时间：2020-09-16T05:56:41.190

```
let myObject = {
    "ircEvent": "PRIVMSG",
    "method": "newURI",
    "regex": "^http://.*"
};

obj = Object.fromEntries(
    Object.entries(myObject).filter(function (m){
        return m[0] != "regex"/*or whatever key to delete*/
    }
))

console.log(obj)
```

You can also just treat the object like `a2d` array using `Object.entries`, and use splice to remove an element as you would in a normal array, or simply filter through the object, as one would an array, and assign the reconstructed object back to the original variable

* * *

## 回答 #30

> 赞同：3
> 
> 时间：2020-11-17T04:37:00.150

If you don't want to modify the original object.

**Remove a property without mutating the object**

If mutability is a concern, you can create a completely new object by copying all the properties from the old, except the one you want to remove.

```
let myObject = {
  "ircEvent": "PRIVMSG",
  "method": "newURI",
  "regex": "^http://.*"
};

let prop = 'regex';
const updatedObject = Object.keys(myObject).reduce((object, key) => {
  if (key !== prop) {
    object[key] = myObject[key]
  }
  return object
}, {})

console.log(updatedObject);
```

* * *

## 回答 #31

> 赞同：2
> 
> 时间：2021-02-22T15:15:08.803

Two ways to delete an object

1.  using *for* ... *in*

    ```
     function deleteUser(key) {

         const newUsers = {};
         for (const uid in users) {
             if (uid !== key) {
                 newUsers[uid] = users[uid];
             }

         return newUsers
     } 
    ```

or

```
delete users[key] 
```

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2021-04-06T16:57:07.927

Let's keep it simple, to the point:

Just set that specific property/field equal to = **undefined**

```
var myObject = {
    'i': "How are you?",
    'am': "Dear",
    'fine': "Hello"
};

myObject.am = undefined;

console.log(myObject);

> {i: "How are you?", am: undefined, fine: "Hello"} 
```

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2022-03-03T06:52:36.493

We can remove using

1.  using delete object.property
2.  using delete object['property']
3.  using rest, remove multiple property

```
let myObject = {
  "ircEvent": "PRIVMSG",
  "method": "newURI",
  "regex": "^http://.*",
  "regex1": "^http://.*",
  "regex2": "^http://.*",
  "regex3": "^http://.*",
  "regex4": "^http://.*"
};

delete myObject.regex; // using delete object.property

// Or 

delete myObject['regex1']; // using delete object['property']

const { regex2, regex3, regex4, ...newMyObject } = myObject;

console.log(newMyObject);
```

# c# - 尝试在 C# 应用程序中获得丰富的 WEB.UI.Gridview 控件的好处

> ID：208111
> 
> 赞同：0
> 
> 时间：2008-10-16T10:59:46.497
> 
> 标签：c#, asp.net, gridview

我知道我不能在我的 C# windows 应用程序中使用这个 Web 控件，并且我仅限于 DataGridView 控件。但这不会像 Web.UI.Webcontrol.GridView 控件那样以优雅的方式显示结果，而是像在 sql server 中执行 SQL 查询时那样显示结果。

我不想走上托管网络用户控件的道路，这反过来又会使用 Web.UI.WebConntrol.GridView 控件启动我的网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-26T17:21:12.890

您可以使 DataGrids 看起来比默认的更好，[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/magazine/cc164098.aspx "MSDN 文章")解释了一些您可以使用的方法，主要是通过更改可用属性，并利用 DataGridTableStyle 和 DataGridColumnStyle。

如果您想实现分页，并且正在使用只读数据集，您可以查看这篇[知识库文章](http://support.microsoft.com/kb/305271 "微软知识库")。

最后，如果你有钱，有很多公司在销售一个看起来更像 web 控件的数据网格控件版本，[Syncfusion](http://www.syncfusion.com/ "同步融合")和[DevExpress](http://www.devexpress.com/Products/NET/Controls/WinForms/Grid/index.xml)只是两个，虽然我自己没有用过，所以可以'不说他们有多好

# asp.net - 单击插入时，DetailsView Web 控件不会更改为插入模式

> ID：208115
> 
> 赞同：1
> 
> 时间：2008-10-16T11:01:38.490
> 
> 标签：asp.net

我将哈希表绑定到 ASP.NET 2.0 中的 detailsview Web 控件。我在详细信息视图上有我的编辑/删除/插入链接按钮，但是单击新建时，模式不会改变。

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-21T21:00:31.803

我假设您在 DetailsView 中创建了一个“新建”按钮。您应该能够简单地处理 CodeBehind 中的单击事件，并调用 DetailsView.ChangeMode 方法。

```
 DetailsViewName.ChangeMode(DetailsViewMode.Insert)
    DetailsViewName.DataBind() 
```

在这种情况下，我只是重新绑定 DetailsView 以显示一个空白表单。您也可以使用 Click 事件来绑定 DetailsView 表单中的控件。

填写表格，单击添加，Item_Inserting 事件应该得到处理。

# c# - 启动一个有访问者的事件

> ID：208119
> 
> 赞同：5
> 
> 时间：2008-10-16T11:05:14.130
> 
> 标签：c#, events, accessor

如何启动具有这样访问者的事件：

```
public event EventHandler CanExecuteChanged
    {
      add
      {
        CommandManager.RequerySuggested += value;
      }
      remove
      {
        CommandManager.RequerySuggested -= value;
      }
    } 
```

如果这是一个正常事件，我会通过以下方式启动它：

```
CanExecuteChanged(sender, EventArgs..). 
```

但在这里它不起作用 - 我只能做

```
CanExecuteChanged +=.. 
```

附加一个方法做事件 - 但我不能启动它。

也将不胜感激有关该主题的一些文档。谢谢。

**编辑** 该事件来自在 WPF 中实现 ICommand 的类。没有什么可以展示的了:)。不 - CommandManager.RequerySuggested(this, EventArgs.Empty); 不起作用。

**EDIT2**不知道该说什么 - 即使正确调用了 add 方法，Jon 的示例也应该有效 - 当我尝试调用事件时 - 它是 null :|。我可能会删除带有访问器的事件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-16T11:09:20.097

我认为您将事件与代表混淆了。只有暴露事件的类才能引发它......其他人只能订阅 - 取消订阅它。如果您从声明事件的类中调用事件，它应该像普通委托一样工作。

我可以在[Events vs Delegates](http://blog.monstuff.com/archives/000040.html)上找到的最佳页面。读起来..

你能发布一个更大的片段吗..似乎有些不对劲..

# 杀手更新

我想我终于看到了你的问题以及如何解决它。简短回答：**如果您编写自己的访问器，它不知道要调用的委托的名称。如果你不......编译器添加已知名称的私有委托，因此能够调用它**

这段代码片段说明了我的意思。这篇[MSDN 文章向我展示了光明](http://msdn.microsoft.com/en-us/magazine/cc163533.aspx)。好问题伙计..我失去了 30 分钟。赞成:)

```
public class Hash1 
    {

        private EventHandler myHomeMadeDelegate;
        public event EventHandler FancyEvent
        {
            add
            {
                //myDelegate += value;
                myHomeMadeDelegate = (EventHandler)Delegate.Combine(myHomeMadeDelegate, value);
            }
            remove
            {
                //myDelegate -= value;
                myHomeMadeDelegate = (EventHandler)Delegate.Remove(myHomeMadeDelegate, value);
            }
        }
        public event EventHandler PlainEvent;

        public Hash1()
        {
            FancyEvent += new EventHandler(On_Hash1_FancyEvent);
            PlainEvent += new EventHandler(On_Hash1_PlainEvent);

            // FancyEvent(this, EventArgs.Empty);  //won't work:What is the backing delegate called? I don't know
            myHomeMadeDelegate(this, EventArgs.Empty); // Aha!
            PlainEvent(this, EventArgs.Empty);
        }

        void On_Hash1_PlainEvent(object sender, EventArgs e)
        {
            Console.WriteLine("Bang Bang!");
        }

        void On_Hash1_FancyEvent(object sender, EventArgs e)
        {
            Console.WriteLine("Bang!");
        }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-16T11:17:29.267

该事件只是订阅和取消订阅另一个事件。如果您希望调用您的订阅者（并且*只有*您的订阅者 - 而不是与另一个事件分开的订阅者），您需要单独保留您的订阅者。例如，您可以将代码更改为：

```
private EventHandler canExecuteChanged;

public event EventHandler CanExecuteChanged
{
    add
    {
        CommandManager.RequerySuggested += value;
        canExecuteChanged += value;
    }
    remove
    {
        CommandManager.RequerySuggested -= value;
        canExecuteChanged -= value;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-16T11:42:33.710

好的，我发现如果我想触发那个事件，你必须这样做：

```
CommandManager.InvalidateRequerySuggested();. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-16T11:08:47.383

~~您必须直接调用底层事件。在您的情况下，看起来好像是：~~

```
<blockquote>CommandManager.RequerySuggested(sender, EventArgs.…)</blockquote> 
```

/编辑：好的，我没有注意到这`CommandManager`是一个框架类。在这种情况下，你显然不想按照我的建议去做。Jon 的解决方案很中肯：您必须跟踪自己的事件并调用它（例如作为委托）。按照 Jon 的示例，调用将如下所示：

```
canExecuteChanged(sender, EventArgs.Empty); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T02:25:53.463

哇，刚刚遇到类似的问题。帮助我理解的答案有点像**Gishu 的**。

同样来自 C# 规范，[http://www.microsoft.com/en-us/download/details.aspx?id=](http://www.microsoft.com/en-us/download/details.aspx?id=7029) 7029，在“10.8.1 Field-like events”下，它说“在编译类似 field 的事件时，编译器会自动创建存储来保存委托，”

**规格还说：**

> *因此，以下形式的实例事件声明：*

```
class X
{
   public event D Ev;
} 
```

> *可以编译成相当于：*

```
class X
{
   private D __Ev;  // field to hold the delegate

   public event D Ev {
      add {
         lock(this) { __Ev = __Ev + value; }
      }

      remove {
         lock(this) { __Ev = __Ev - value; }
      }
   }
} 
```

**如果您执行以下代码，编译器将成功编译它：**

```
namespace ConsoleApplication1
{    
    class Program 
    {
        public event EventHandler ss;

        Program()
        {
            if (null != ss)
            {
                ss(this, EventArgs.Empty) ;

            }
        }

        static void Main(string[] args)
        {
            new Program();
        }
    }
} 
```

**如果您将访问器添加到 ss 上面，它将无法编译：**

```
namespace ConsoleApplication1
{    
    class Program 
    {
        public event EventHandler ss
        {
            add { }
            remove { }
        }

        Program()
        {
            if (null != ss)
            {
                ss(this, EventArgs.Empty) ;

            }
        }

        static void Main(string[] args)
        {
            new Program();
        }
    }
} 
```

这里演示了两种事件

1.  类场事件 => 我们可以调用
2.  events with accessors => we cannot invoke (cannot find this in specs why, maybe I missed it)(and was only testing this on Visual Studio 2005, and the specs was the latest, I guess)

# python - 如何读写多个文件？

> ID：208120
> 
> 赞同：16
> 
> 时间：2008-10-16T11:06:36.187
> 
> 标签：python

我想为此编写一个程序：在一个文件夹中，我有*n*个文件；首先读取一个文件并执行一些操作，然后将结果存储在一个单独的文件中。然后读取第二个文件，再次执行操作并将结果保存在新的第二个文件中。*对n*个文件执行相同的过程。程序一个一个地读取所有文件，并分别存储每个文件的结果。请举例说明我是如何做到的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-10-16T12:28:48.890

我认为您想念的是如何检索该目录中的所有文件。为此，请使用 glob 模块。这是一个示例，它将所有扩展名为 *.txt 的文件复制到扩展名为 *.out 的文件中

```
import glob

list_of_files = glob.glob('./*.txt')           # create the list of file
for file_name in list_of_files:
  FI = open(file_name, 'r')
  FO = open(file_name.replace('txt', 'out'), 'w') 
  for line in FI:
    FO.write(line)

  FI.close()
  FO.close() 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-10-16T11:23:29.707

```
import sys

# argv is your commandline arguments, argv[0] is your program name, so skip it
for n in sys.argv[1:]:
    print(n) #print out the filename we are currently processing
    input = open(n, "r")
    output = open(n + ".out", "w")
    # do some processing
    input.close()
    output.close() 
```

然后这样称呼它：

```
./foo.py bar.txt baz.txt

```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-10-16T11:51:04.520

您可能会发现该[`fileinput`](https://docs.python.org/2/library/fileinput.html)模块很有用。它正是针对这个问题而设计的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-17T05:53:51.510

我最近刚刚了解了 os.walk() 命令，它可能对您有所帮助。它允许您遍历目录树结构。

```
import os
OUTPUT_DIR = 'C:\\RESULTS'
for path, dirs, files in os.walk('.'):
    for file in files:
        read_f = open(os.join(path,file),'r')
        write_f = open(os.path.join(OUTPUT_DIR,file))

        # Do stuff 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-16T14:12:40.117

结合目录或特定文件名参数列表的组合答案：

```
import sys
import os.path
import glob

def processFile(filename):
    fileHandle = open(filename, "r")
    for line in fileHandle:
        # do some processing
        pass
    fileHandle.close()

def outputResults(filename):
    output_filemask = "out"
    fileHandle = open("%s.%s" % (filename, output_filemask), "w")
    # do some processing
    fileHandle.write('processed\n')
    fileHandle.close()

def processFiles(args):
    input_filemask = "log"
    directory = args[1]
    if os.path.isdir(directory):
        print "processing a directory"
        list_of_files = glob.glob('%s/*.%s' % (directory, input_filemask))
    else:
        print "processing a list of files"
        list_of_files = sys.argv[1:]

    for file_name in list_of_files:
        print file_name
        processFile(file_name)
        outputResults(file_name)

if __name__ == '__main__':
    if (len(sys.argv) > 1):
        processFiles(sys.argv)
    else:
        print 'usage message' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T04:30:15.297

```
from pylab import * 
import csv 
import os 
import glob 
import re 
x=[] 
y=[]

f=open("one.txt",'w')

for infile in glob.glob(('*.csv')):
    #   print "" +infile
    csv23=csv2rec(""+infile,'rb',delimiter=',')
    for line in csv23:      
        x.append(line[1])
        #  print len(x)
    for i in range(3000,8000):
        y.append(x[i])
    print ""+infile,"\t",mean(y)
    print >>f,""+infile,"\t\t",mean(y)
    del y[:len(y)]
    del x[:len(x)] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-16T02:47:45.180

我知道我在`with open()`某个地方看到了这个替身，但不记得在哪里。所以我建立了一个小例子以防有人需要。

```
""" A module to clean code(js, py, json or whatever) files saved as .txt files to 
be used in HTML code blocks.  """
from os import listdir
from os.path import abspath, dirname, splitext
from re import sub, MULTILINE

def cleanForHTML():
    """ This function will search a directory text files to be edited. """

    ## define some regex for our search and replace. We are looking for <, > and &
    ## To replaced with &ls;, &gt; and &amp;. We might want to replace proper whitespace
    ## chars to as well? (r'\t', '    ') and (f'\n', '<br>')
    search_ = ((r'(<)', '&lt;'), (r'(>)', '&gt;'), (r'(&)', '&amp;'))

    ## Read  and loop our file location. Our location is the same one that our python file is in.
    for loc in listdir(abspath(dirname(__file__))):

        ## Here we split our filename into it's parts ('fileName', '.txt')
        name = splitext(loc)

        if name[1] == '.txt':
            ## we found our .txt file so we can start file operations.
            with open(loc, 'r') as file_1, open(f'{name[0]}(fixed){name[1]}', 'w') as file_2:

                ## read our first file
                retFile = file_1.read()

                ## find and replace some text.
                for find_ in search_:
                    retFile = sub(find_[0], find_[1], retFile, 0, MULTILINE)

                ## finally we can write to our newly created text file.
                file_2.write(retFile) 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-07-01T06:47:01.653

这个东西也适用于读取多个文件，我的文件名是`fedaralist_1.txt`这样`federalist_2.txt`，我有 84 个文件直到`fedaralist_84.txt`

我正在以 f 读取文件。

```
for file in filename:
        with open(f'federalist_{file}.txt','r') as f:
             f.read() 
```

# wpf - 在一个项目中编译 Silverlight 和 WPF 的最佳做法是什么？

> ID：208123
> 
> 赞同：12
> 
> 时间：2008-10-16T11:07:24.420
> 
> 标签：wpf, visual-studio-2008, silverlight, assemblies

我刚刚完成了一个 Silverlight 项目，是时候进行一些清理工作了。我想将我的核心文件放入一个单独的项目中，我将从我的主 Silverlight 应用程序中引用该项目。其中一些类与 WPF 兼容，我非常希望能够在一个项目中包含 Silverlight / WPF 代码。我理想的解决方案是允许多个配置的单个项目。所以，

配置：Silverlight 将生成：Company.Controls.Silverlight.dll

配置：WPF 会生成：Company.Controls.Wpf.dll

是否可以在通过定义分隔的同一个文件中具有相同的源？

有没有人这样做过？

**编辑：**我为每个项目创建了一个解决方案，例如 MyCompany.Windows.Controls，然后包含 2 个项目，MyCompany.Windows.Controls 和 MyCompany.Windows.Controls.Silverlight。除了这两个文件夹之外，我还有一个“共享”文件夹，其中包含两个项目使用的文件。到目前为止效果很好:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-10-16T21:22:36.660

*更新：表明几乎总是有更简单的方法。:-)*

第一步是使用条件编译来隔离 Silverlight 特定的代码。（我假设您的“默认”目标是 WPF。）

其次，您需要一个构建脚本来为每个平台编译代码，设置适当的定义和程序集引用。

看看开源的[Caliburn 项目](http://www.codeplex.com/caliburn)。它做到了这一切。

这是 Caliburn 的 ExtensionMethods 类中的一个示例。

```
 public static T GetResource<T>(this FrameworkElement element, object key)
        {
            DependencyObject currentElement = element;

            while (currentElement != null)
            {
                var frameworkElement = currentElement as FrameworkElement;

                if (frameworkElement != null && frameworkElement.Resources.Contains(key))
                    return (T)frameworkElement.Resources[key];

#if !SILVERLIGHT
                currentElement = (LogicalTreeHelper.GetParent(currentElement) ??
                    VisualTreeHelper.GetParent(currentElement));
#else
                currentElement = VisualTreeHelper.GetParent(currentElement);
#endif
            }

            if (Application.Current.Resources.Contains(key))
                return (T)Application.Current.Resources[key];

            return default(T);
        } 
```

如果您在 VS 中打开 Caliburn 并对其进行编译，则它符合标准框架。这些参考适用于 .NET 3.5 和 WPF，而不是 Silverlight。这也是预处理指令是“！SILVERLIGHT”的原因。

在您的构建脚本（Caliburn 使用 NAnt）中，您将有一个为每个平台设置定义的目标，例如，Caliburn 的 Silverlight 目标是：

```
<target name="config-platform-silverlight20">
    <property name="nant.settings.currentframework" value="silverlight-2.0"/>
    <property name="build.platform" value="silverlight-2.0"/>
    <property name="build.defines" value="${global.build.defines},SILVERLIGHT,SILVERLIGHT_20,NO_WEB,NO_REMOTING,NO_CONVERT,NO_PARTIAL_TRUST,NO_EXCEPTION_SERIALIZATION,NO_SKIP_VISIBILITY,NO_DEBUG_SYMBOLS"/>
    <property name="current.path.bin" value="${path.bin}/silverlight-2.0/${build.config}"/>
    <property name="current.path.test" value="${path.bin}/silverlight-2.0/tests" />
    <property name="current.path.lib" value="${path.lib}/Silverlight" />
</target> 
```

然后是调用实际 Silverlight 构建的目标：

```
<target name="platform-silverlight20" depends="config">
    <if test="${framework::exists('silverlight-2.0')}">
        <echo message="Building Caliburn ${build.version} for Silverlight v2.0."/>
        <call target="config-platform-silverlight20"/>
        <copy todir="${current.path.bin}">
            <fileset basedir="${current.path.lib}">
                <include name="*.dll"/>
                <include name="*.xml"/>
            </fileset>
        </copy>
        <call target="core"/>
        <call target="messaging"/>
        <call target="actions"/>
        <call target="commands"/>
        <call target="package-platform"/>
    </if>
    <if test="${not(framework::exists('silverlight-2.0'))}">
        <echo message="Silverlight v2.0 is not available. Skipping platform."/>
    </if>
</target> 
```

最后，这是一个负责生成 Caliburn.Core.dll 的“核心”目标示例：

```
<target name="core" depends="config, ensure-platform-selected">
    <mkdir dir="${current.path.bin}"/>
    <csc keyfile="${path.src}/Caliburn.snk" noconfig="true" warnaserror="false" target="library" debug="${build.debug}" optimize="${build.optimize}" define="${build.defines}"
     output="${current.path.bin}/Caliburn.Core.dll"
     doc="${current.path.bin}/Caliburn.Core.xml">
        <sources basedir="${path.src}">
            <include name="${build.asminfo}"/>
            <include name="Caliburn.Core/**/*.cs"/>
        </sources>
        <references basedir="${current.path.bin}">
            <include name="mscorlib.dll"/>
            <include name="System.dll"/>
            <include name="System.Core.dll"/>
            <!--WPF-->
            <include name="PresentationCore.dll"/>
            <include name="PresentationFramework.dll"/>
            <include name="WindowsBase.dll"/>
            <!--Silverlight-->
            <include name="System.Windows.dll" />
        </references>
        <nowarn>
            <warning number="1584"/>
        </nowarn>
    </csc>
</target> 
```

注意它引用必要程序集的方式。

You'll probably need to edit your NAnt.exe.config (if you are using NAnt) to match the correct version of the Silverlight framework. For Silverlight RTW, the framework version will be 2.0.31005.0.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-17T02:57:02.727

I haven't tried it myself (still trying to find the time to play with Silverlight), but couldn't you have one solution with two projects, one targetting Silverlight and the other targetting .NET 3.5, and add the common class files to each project as Links (right-click the project, Add Existing Item..., Add as Link)?

** Update: See Mark's answer below regarding the Project Linker. I've been using this in my multi-targetted composite application with the PRISM 2.0 CAL and it's a beautiful thing. I don't think this existed in PRISM 1.0?

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-12T23:17:17.827

You should check out "patterns & practices: Composite WPF and Silverlight"

[http://www.codeplex.com/CompositeWPF/Wiki/View.aspx?title=Home](http://www.codeplex.com/CompositeWPF/Wiki/View.aspx?title=Home)

It has quick starts with WPF/Silvelight versions of the same app in one solution. Also a "Project Linker" that updates the source of your WPF app when you change Silverlight code (or vice versa) using linking. It can be overridden when you have version specific code.

The examples are still a little rough around the edges but it may give you an idea of how to go about your project.

HTH

# iis - 将 Web 服务器流量日志存档保留多长时间？

> ID：208124
> 
> 赞同：7
> 
> 时间：2008-10-16T11:07:32.160
> 
> 标签：iis, logging

我们目前在一个场中有四台 Web 服务器，每天生成大约 100Mb 的 IIS Web 日志。这些可以非常有效地压缩到其大小的 5% 左右。

我们计划使用 waRmZip 将它们从服务器上移到 SAN 上。大约一周后，我们可以确信我们没有任何技术问题需要调查，因此唯一的另一件事就是将它们用于趋势分析，作为对 Google Analytics 的补充。

人们推荐什么保留期？是否有任何法律要求来保留这些数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-16T11:12:02.993

法律要求取决于您所在的国家/地区、您的日志记录量以及您的业务性质。与贵公司的律师交谈——关于 SO 的法律建议可能物有所值。

如果您每天只存储 5MB，那么您应该能够将它们存储到您想要的任何时间，而不必担心*技术*方面的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-16T11:39:59.627

请同时考虑您的网络日志数据的敏感性。我不知道如果公开访问您的网络应用程序是否会被视为敏感，但您需要意识到您的网络日志包含可能识别个人的必要信息（尤其是与其他地方可用的其他信息一起）。您的隐私政策应反映您保留这些日志的时间以及它们的用途。我认为，谷歌最近决定在 9 个月后匿名他们的日志，以帮助保护用户隐私。诚然，他们的情况略有不同，因为他们收集了如此多的信息，但是在确定保留日志的时间和形式时，您需要考虑客户的需求以及您自己的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-16T11:24:02.280

我倾向于永远保留我的。这主要用于趋势分析，因为 Google 会漏掉一些访问者（非 JavaScript 访问者）。

# .net - 设置 SQL Server 2005 的区域设置

> ID：208133
> 
> 赞同：2
> 
> 时间：2008-10-16T11:10:19.923
> 
> 标签：.net, sql-server, datetime, locale

默认情况下，SQL Server 的语言设置为“英语（美国）”，将日期格式设置为 mm/dd/yy，而不是我想要的日期格式，它是澳大利亚的并且具有日期格式，例如 dd /毫米/年。

Server Management Studio / Configuration tools 中是否有一个选项可以设置 SQL Server 的区域设置，这将阻止 DateTime 字段被格式化为美国日期格式？

如果没有，当我使用 SQL 查询时如何转换它，例如（如果语法不正确，请见谅，我当场弥补）：

```
Dim dc As New SqlCommand("INSERT INTO hello VALUES (@Date)", cn)
dc.Parameters.Add(New SqlParameter("Date", System.DateTime.Now)) 
```

提前谢谢了。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-16T11:30:37.697

您可以从 SQL Management Studio 设置每个用户的默认语言/区域设置（查看 Security 文件夹下）。

并使用 SET LANGUAGE 命令（或 SET DATEFORMAT，如果您只想更改日期格式）覆盖特定连接。

您还可以在 SQL Management Studio 中设置默认语言（用于新用户）：右键单击服务器，选择属性/高级/默认语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-16T11:30:02.580

不知道“下”的格式是什么

dd/mm/yyyy hh:mm:ss ?

如果是，则该日期是英/法注释，因此您需要做的就是：

```
INSERT INTO hello VALUES convert(datetime, @Date + ' 00:00:00', 103) 
```

或者

```
INSERT INTO hello VALUES convert(datetime, @Date, 103) 
```

如果你真的把时间

有关详细信息，[请查看 MSDN 上的在线图书](http://msdn.microsoft.com/en-us/library/ms187928.aspx)以获取正确的代码。

即使在 Selects 中，我也总是使用它，无论 SQL 中有什么（因为我倾向于使用 Hosting SQL 并且无法更改格式），例如：

```
SELECT myColumn FROM myTable WHERE myDateField >= convert(datetime, @Date + '00:00:00', 103) 
```

希望能帮助到你

# java - 根据请求的主机名在 JBoss 中配置多个密钥库

> ID：208149
> 
> 赞同：1
> 
> 时间：2008-10-16T11:16:24.247
> 
> 标签：java, ssl, jboss, https, virtual-hosts

我将 J2EE 应用程序部署到 JBossAS 中。我的应用程序必须响应两个不同的主机名（[https://foo.com/myApp](https://foo.com/myApp)和[https://bar.com/myApp](https://bar.com/myApp)）。它是为这两个主机名提供服务的应用程序的同一个实例。

但我不知道如何配置密钥库。我需要为每个主机名使用不同的密钥库。有没有办法将 JBoss 的 server.xml 中的虚拟主机绑定到特定的连接器？

还是我必须使用两个不同的 IP 地址并为每个地址创建一个连接器？

不需要第二个 IP 地址的解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-17T04:20:07.177

对于 SSL，如果您希望使用不同的 SSL 证书，则必须使用两个不同的 IP 地址。这不是 Tomcat/JBoss 的缺点，它只是协议的现实。

我不记得我头脑中的技术原因（谷歌知道），但归结为服务器在解码传入的 SSL 请求之前无法读取域名。

要使用两个不同的密钥库，您需要在 jbossweb-tomcat55.sar/server.xml 文件中定义两个不同的连接器（使用不同的 IP 地址或端口）。这将使您的 SSL 证书正常工作，但如果您只有一个 IP，则需要在非标准端口上设置第二个证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-05-05T20:43:18.607

两个应用程序可以共享一个拥有两个证书的密钥库。证书是为给定域颁发的。将第二个域定义为具有不同域的虚拟主机，并且不要触及 server.xml。它应该以这种方式工作。

# asp.net - javascript中的Webform复选框值

> ID：208151
> 
> 赞同：0
> 
> 时间：2008-10-16T11:19:47.983
> 
> 标签：asp.net, javascript

我的asp.net web 表单上有一个复选框列表控件，我从arraylist 动态填充。在 javascript 中，我希望能够遍历列表中的值以及是否选择了特定值以在页面上显示其他控件。

我的问题是复选框列表中的所有值都显示为“打开”，而不是实际设置的值。如何获取每个复选框的实际值？

谢谢。

Javascript：

```
checkBoxs=document.getElementById(CheckboxList);
    var options=checkBoxs.getElementsByTagName('input');       

    for(var i=0;i<options.length;i++)
    {            
        if(options[i].value=="Other")
        {
            if(options[i].checked)
            {
                var  otherPub=document.getElementById('<%=alsOtherPublicity.ClientID%>');
                otherPub.style.display='block';

            }                
        } 

    } 
```

**编辑：**我遇到问题的行是 if(options[i].value=="Other") 因为萤火虫中显示的值是“on”而不是我设置的值。

**编辑 2：**生成的 html 如下所示：

```
<span id="ctl00_ContentPlaceHolderMetadata_Allocation1_alfPublicity" class="ucFieldCBL" onChange="alValidate();" onClick="alPublicity('ctl00_ContentPlaceHolderMetadata_Allocation1_alfPublicity');">
  <input id="ctl00_ContentPlaceHolderMetadata_Allocation1_alfPublicity_0" type="checkbox" name="ctl00$ContentPlaceHolderMetadata$Allocation1$alfPublicity$0"/>
  <label for="ctl00_ContentPlaceHolderMetadata_Allocation1_alfPublicity_0">Text1</label>
  <input id="ctl00_ContentPlaceHolderMetadata_Allocation1_alfPublicity_1" type="checkbox" name="ctl00$ContentPlaceHolderMetadata$Allocation1$alfPublicity$1"/>
  <label for="ctl00_ContentPlaceHolderMetadata_Allocation1_alfPublicity_1">Text2</label>
  <input id="ctl00_ContentPlaceHolderMetadata_Allocation1_alfPublicity_2" type="checkbox" name="ctl00$ContentPlaceHolderMetadata$Allocation1$alfPublicity$2"/>
  <label for="ctl00_ContentPlaceHolderMetadata_Allocation1_alfPublicity_2">Text3</label>
  <input id="ctl00_ContentPlaceHolderMetadata_Allocation1_alfPublicity_3" type="checkbox" name="ctl00$ContentPlaceHolderMetadata$Allocation1$alfPublicity$3"/>
  <label for="ctl00_ContentPlaceHolderMetadata_Allocation1_alfPublicity_3">Text4</label>
  <input id="ctl00_ContentPlaceHolderMetadata_Allocation1_alfPublicity_4" type="checkbox" name="ctl00$ContentPlaceHolderMetadata$Allocation1$alfPublicity$4"/>
  <label for="ctl00_ContentPlaceHolderMetadata_Allocation1_alfPublicity_4">Text5</label>
</span> 
```

如[Dave Parslow](http://www.daveparslow.com/2007/08/assigning-value-to-aspnet-checkbox.html "戴夫·帕斯洛")所述，问题似乎源于 asp.net 复选框控件上缺少可用的 value 属性。我目前正在尝试一种解决方法，方法是调用函数服务器端来返回复选框的文本并改用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-16T11:29:39.790

`options[i].checked`将返回真或假。 `options[i].value`将为您提供复选框标签的值属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-16T11:33:11.717

我认为您的问题不在于 javascript，而在于填充复选框的代码。您是将 ArrayList 绑定为 CheckBoxList 数据源还是遍历 ArrayList 并将新的 ListItems 添加到 CheckBoxList。如果是前者，请考虑切换到后者，并确保使用同时接受文本和值参数的 ListItem 构造函数。如果您查看 HTML 源代码，我怀疑您会看到生成的代码将所有复选框的 value 参数设置为 on，这意味着这些值实际上并未绑定在代码隐藏中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-16T11:36:40.120

此处并非 100% 适用，但请注意，如果您为复选框提供 cssclass，它会得到一个环绕它的跨度，并且该类被放置在上面。当您导航 dom 或禁用复选框时，这会导致各种跨浏览器问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-16T15:33:16.740

在玩了很多预渲染事件之后，我意识到我实际上并不需要知道复选框的确切值，因为 arraylist 值的顺序与复选框的顺序相同。我搜索了 arraylist 以获取所需值的位置，然后在复选框列表中使用该位置。

这听起来有点繁琐，我不知道它是否对每个人都有效，但我想无论如何我都会把它放在这里，以防有一天它可以帮助别人。

感谢你的帮助。

# java - Java 小程序和浏览器冻结

> ID：208161
> 
> 赞同：1
> 
> 时间：2008-10-16T11:25:43.790
> 
> 标签：java, browser, applet, freeze

加载小程序时是否有避免浏览器冻结的最佳实践？

对于我的精确需求，小程序需要在 Web 应用程序初始化时加载，并且不是可视组件（将在隐藏的 div 或隐藏的 iframe 中）。

作为参考，这是[SUN 方面的一个老错误](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6267809)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-16T15:03:25.410

本质上，没有。阅读您链接到的错误的评估部分。问题是 JVM 的启动时间之一。您能做的最好的事情就是保持小程序很小，以便它可以快速加载。但是，浏览器冻结正在发生，因为浏览器必须等待 VM 启动。你永远不能把那个时间降到 0，所以短暂的冻结是不可避免的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-16T15:54:04.483

1.6.0u10 对大多数浏览器都有很大帮助，但对于较旧的 vm，没有办法避免浏览器冻结。

# iphone - 如何使用 iPhone SDK 将数据从子视图传递到父视图？

> ID：208171
> 
> 赞同：1
> 
> 时间：2008-10-16T11:30:50.380
> 
> 标签：iphone, objective-c

您建议使用哪种方法将数据从子视图传递回其父视图？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-16T13:24:46.547

有很多方法可以做到这一点。

*   添加到父级时在子级中设置一个成员变量*   给[自我监督]发消息*   使用 NSNotification

当然还有其他的，但这是我最常使用的三个。

# javascript - 如何通过 JavaScript 与 iframe 中嵌入的 PDF 文档进行交互？

> ID：208176
> 
> 赞同：3
> 
> 时间：2008-10-16T11:35:09.340
> 
> 标签：javascript, pdf, iframe

如何通过 JavaScript 与 iframe 中嵌入的 PDF 文档进行交互？

*   可能吗？
*   每个主要浏览器都有可能吗？

如果“是”，我怎么能...

*   ...知道文件已完成加载吗？
*   ...触发打印对话框？
*   ...配置缩放？
*   ...配置工具栏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-16T12:45:10.200

这是可能的，但您需要将 PDF 查看器包装在 COM 组件中（如果还没有的话），并将其包含在带有 HTML 对象标记的表单中。从那里您*应该*能够通过 javascript 操作 com 包装器（以及间接地 pdf 查看器）来执行操作。

由于您将包装和提供查看器组件（检查您的许可），因此您将可以控制存在的功能（也取决于查看器组件的功能）。

如何在对象标签中包含 com 内容的示例在这里... [http://www.activexpowupload.com/quickstart/util/srcview.aspx?path=/Examples/ActiveXPowUpload/SourceExplorer/SimpleUpload.src](http://www.activexpowupload.com/quickstart/util/srcview.aspx?path=/Examples/ActiveXPowUpload/SourceExplorer/SimpleUpload.src)

毫无疑问，这将是一项繁重的工作，并且可能会让您发疯。此外，由于您控制查看组件，因此您不会依赖于用户安装的任何内容。

附带说明一下，Web 上提供的 PDF 文件应该是线性化的——字节结构是这样的，以便页面按顺序流式传输给用户。这样，在浏览器中显示前几页之前，不必接收整个文档。这可能会干扰您想知道文件何时完成。

# linq - 基于 LINQ to SQL 的面向对象模型

> ID：208179
> 
> 赞同：2
> 
> 时间：2008-10-16T11:36:43.380
> 
> 标签：linq, linq-to-sql, oop, persistence

我正在使用 LINQ to SQL 进行一些尝试，总体而言，它比 Microsoft 之前的选择（DataSet）要好得多，但面向对象的功能似乎仍然有限。由于我们目前使用在 DataSet 之上创建 OO 模型的自定义持久性框架，因此我希望将该框架移植到新版本，在 LINQ to SQL 之上构建 OO 模型。

1.  首先，还有其他类似的举措吗？
2.  其次，你认为这样走是个好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-16T11:50:33.193

对于# 1，您可能正在寻找更新的 Linq to Entity。这是一个开始的地方：http: [//msdn.microsoft.com/en-us/library/aa697427 (VS.80).aspx](http://msdn.microsoft.com/en-us/library/aa697427(VS.80).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-15T08:56:57.333

[Rob Conery 在他的店面系列](http://blog.wekeroad.com/mvc-storefront/)中开发了一种新型的存储库模式。AFAIK，它使用 OO 对象而不是 LINQ to SQL。它包含很多关于 MVC 和 TDD 的讨论，但仍然值得一看，看看他用 LINQ to SQL 做了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-17T10:26:35.550

我已经在我的项目项目中对此进行了测试。看看：[openticket.codeplex.com](http://openticket.codeplex.com)

# bash - 如何使用前缀/后缀重命名？

> ID：208181
> 
> 赞同：114
> 
> 时间：2008-10-16T11:37:48.430
> 
> 标签：bash, rename, filenames, prefix, mv

`mv original.filename new.original.filename`如果不重新输入原始文件名，我该怎么办？

我会想象能够做类似`mv -p=new. original.filename`或可能或其他的事情 - 但在查看/ pages`mv original.filename new.~`后我看不到这样的事情。`man mv``info mv`

当然，我可以编写一个 shell 脚本来执行此操作，但它没有现有的命令/标志吗？

* * *

## 回答 #1

> 赞同：177
> 
> 时间：2008-10-16T11:48:20.110

您可以使用以下`rename(1)`命令：

```
rename 's/(.*)$/new.$1/' original.filename 
```

**编辑：**如果`rename`不可用并且您必须重命名多个文件，那么 shell 脚本实际上可以很简短。例如，将 all 重命名`*.jpg`为`prefix_*.jpg`当前目录中的：

```
for filename in *.jpg; do mv "$filename" "prefix_${filename}"; done; 
```

或者，利用[Dave Webb 的回答](https://stackoverflow.com/a/208260/2436175)并使用大括号扩展：

```
for filename in *.jpg; do mv {,prefix_}"$filename"; done; 
```

* * *

## 回答 #2

> 赞同：140
> 
> 时间：2008-10-16T12:03:42.483

在 Bash 和 zsh 中，您可以使用[Brace Expansion](http://www.gnu.org/software/bash/manual/bashref.html#Brace-Expansion)来做到这一点。这只是扩展了大括号中的项目列表。例如：

```
# echo {vanilla,chocolate,strawberry}-ice-cream
vanilla-ice-cream chocolate-ice-cream strawberry-ice-cream 
```

因此，您可以按如下方式进行重命名：

```
mv {,new.}original.filename 
```

因为这扩展为：

```
mv original.filename new.original.filename 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-11-18T11:56:33.833

您可以通过创建一个 for 循环来实现与 unix 兼容的多个文件重命名（使用通配符）：

```
for file in *; do
  mv $file new.${file%%}
done 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2008-10-16T12:42:04.637

我见过人们提到一个`rename`命令，但它在 Unix 系统上通常不可用（与 Linux 系统或 Cygwin 不同——在这两者上，rename 是可执行文件而不是脚本）。该版本的`rename`功能相当有限：

```
rename from to file ... 
```

它将文件名的*from*部分替换为*to*，手册页中给出的示例是：

```
rename foo foo0 foo? foo?? 
```

这会将 foo1 重命名为 foo01，将 foo10 重命名为 foo010，等等。

我使用了一个名为 的 Perl 脚本`rename`，我最初从大约 1992 年的第一版 Camel 书中挖掘出来，然后对其进行了扩展，以重命名文件。

```
#!/bin/perl -w
#
# @(#)$Id: rename.pl,v 1.7 2008/02/16 07:53:08 jleffler Exp $
#
# Rename files using a Perl substitute or transliterate command

use strict;
use Getopt::Std;

my(%opts);
my($usage) = "Usage: $0 [-fnxV] perlexpr [filenames]\n";
my($force) = 0;
my($noexc) = 0;
my($trace) = 0;

die $usage unless getopts('fnxV', \%opts);

if ($opts{V})
{
    printf "%s\n", q'RENAME Version $Revision: 1.7 $ ($Date: 2008/02/16 07:53:08 $)';
    exit 0;
}
$force = 1 if ($opts{f});
$noexc = 1 if ($opts{n});
$trace = 1 if ($opts{x});

my($op) = shift;
die $usage unless defined $op;

if (!@ARGV) {
    @ARGV = <STDIN>;
    chop(@ARGV);
}

for (@ARGV)
{
    if (-e $_ || -l $_)
    {
        my($was) = $_;
        eval $op;
        die $@ if $@;
        next if ($was eq $_);
        if ($force == 0 && -f $_)
        {
            print STDERR "rename failed: $was - $_ exists\n";
        }
        else
        {
            print "+ $was --> $_\n" if $trace;
            print STDERR "rename failed: $was - $!\n"
                unless ($noexc || rename($was, $_));
        }
    }
    else
    {
        print STDERR "$_ - $!\n";
    }
} 
```

这允许您编写任何 Perl 替代或音译命令来映射文件名。在请求的特定示例中，您将使用：

```
rename 's/^/new./' original.filename 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-06-22T12:15:22.707

我知道这里有很好的答案，但在添加后缀时我发现没有处理文件扩展名的参考。

我需要`wav`在文件扩展名之前为文件夹中的所有文件添加“_en”后缀。

魔法就在这里：`%.*`

`for filename in *.wav; do mv $filename ${filename%.*}_en.wav; done;`

如果您需要处理不同的文件扩展名，请检查[此](https://unix.stackexchange.com/a/56812/157775)答案。不太直观。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-11-23T15:26:01.347

批量重命名目录中文件的最简单方法是：

```
ls | xargs -I fileName mv fileName fileName.suffix 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-10-16T11:41:46.147

如果它可以修改，您可以使用后缀而不是前缀。然后您可以使用制表符完成来获取原始文件名并添加后缀。

否则，不，这不是 mv 命令支持的东西。不过，一个简单的 shell 脚本可以应付。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-01-26T23:12:49.233

就我而言，我有一组文件需要重命名才能使用它们。每个文件在组中都有自己的角色，并且有自己的模式。

结果，我有一个像这样的重命名命令列表：

```
f=`ls *canctn[0-9]*`   ;  mv $f  CNLC.$f
f=`ls *acustb[0-9]*`   ;  mv $f  CATB.$f
f=`ls *accusgtb[0-9]*` ;  mv $f  CATB.$f
f=`ls *acus[0-9]*`     ;  mv $f  CAUS.$f 
```

也试试这个：

```
f=MyFileName; mv $f {pref1,pref2}$f{suf1,suf2} 
```

这将产生所有带有前缀和后缀的组合：

```
pref1.MyFileName.suf1
...
pref2.MyFileName.suf2 
```

解决相同问题的另一种方法是创建映射数组并为每种文件类型添加 corespondent 前缀，如下所示：

```
#!/bin/bash
unset masks
typeset -A masks
masks[ip[0-9]]=ip
masks[iaf_usg[0-9]]=ip_usg
masks[ipusg[0-9]]=ip_usg
...
for fileMask in ${!masks[*]}; 
do  
registryEntry="${masks[$fileMask]}";
fileName=*${fileMask}*
[ -e ${fileName} ] &&  mv ${fileName} ${registryEntry}.${fileName}  
done 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-03-05T22:51:47.867

批量重命名文件 bash 脚本

```
#!/bin/bash
# USAGE: cd FILESDIRECTORY; RENAMERFILEPATH/MultipleFileRenamer.sh FILENAMEPREFIX INITNUMBER
# USAGE EXAMPLE: cd PHOTOS; /home/Desktop/MultipleFileRenamer.sh 2016_
# VERSION: 2016.03.05.
# COPYRIGHT: Harkály Gergő | mangoRDI (https://wwww.mangordi.com/) 

# check isset INITNUMBER argument, if not, set 1 | INITNUMBER is the first number after renaming
if [ -z "$2" ]
    then i=1;
else
    i=$2;
fi

# counts the files to set leading zeros before number | max 1000 files
count=$(ls -l * | wc -l)
if [ $count -lt 10 ]
    then zeros=1;
else
    if [ $count -lt 100 ]
        then zeros=2;
    else
        zeros=3
    fi
fi

# rename script
for file in *
do
    mv $file $1_$(printf %0"$zeros"d.%s ${i%.*} ${file##*.})
    let i="$i+1"
done 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-04-03T10:11:26.707

我不喜欢任何其他答案。
我的看法是你想要一个普通的 bash 解决方案。所以给你！

先用 echo 试试这个，看看会发生什么！
在对数千个文件使用命令之前测试您的命令！

**如果要添加前缀，请删除“./”**
`find . -type f -exec bash -c 'echo prefix_${0#./}' {} \;`

在提出的问题`prefix_`中，`new.`命令变成了
`find . -type f -exec bash -c 'echo mv $0 new.${0#./}' {} \;`

**如果你想在它后面放一些东西，请删除扩展名**
`find . -type f -exec bash -c 'echo ${0%.*}_suffix.${0##*.}' {} \;`

现在要使用它重命名只需将 echo 替换为`mv $0`.

例子：
`find . -type f -exec bash -c 'mv $0 1.${0#./}' {} \;`

灵感来自： [https ://gist.github.com/larshaendler/723d2ec447c3c694b71dc6e3bc3aadc9](https://gist.github.com/larshaendler/723d2ec447c3c694b71dc6e3bc3aadc9)

# c# - 类设计：根据线程安全性和可测试性将数据文件包装成一个类

> ID：208184
> 
> 赞同：0
> 
> 时间：2008-10-16T11:39:57.477
> 
> 标签：c#, class, thread-safety, design-patterns

我正在用 C# (.net 3.5) 编写一个应用程序，我有一个关于类设计的问题：

我想创建一个访问文件（读、写）并将其内容提供给该类的用户（实例化器）的类。实例上最常见的操作是从文件中检索某个值。实际的读写（io）操作非常昂贵，所以我想将文件数据保存在内存中并让所有实例访问这些数据。该类位于同时从各种应用程序中使用的程序集中，所以我想我应该担心线程安全。

关于线程安全和单元可测试性，我该如何设计（对于单元测试，必须使用与操作代码不同的输入文件）？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-16T11:43:50.900

首先，让你的类实现一个合适的接口。这样，客户就可以测试他们的行为，而不需要真正的文件。

测试线程安全性很困难——我从未见过在这方面真正有用的东西，尽管这并不是说这些工具不存在。

对于您的课程的单元测试，我建议如果可能的话，它应该使用通用流而不仅仅是文件。然后，您可以在测试程序集中嵌入不同的测试文件，并使用[GetManifestResourceStream](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getmanifestresourcestream.aspx)引用它们。我过去曾多次这样做，取得了巨大的成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-16T14:52:34.187

使用[ReaderWriterLock](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlock.aspx)，我认为这符合问题描述。

以下是一个快速而肮脏的实现。获取锁可能更聪明，比如在救助之前尝试多次等。但你明白了：

```
public class MyFooBarClass
{
   private static ReaderWriterLock readerWriterLock = new ReaderWriterLock();
   private static MemoryStream fileMemoryStream;

   // other instance members here

   public void MyFooBarClass()
   {
     if(fileMemoryStream != null)
     {
        // probably expensive file read here
     }

     // initialize instance members here
   }

   public byte[] ReadBytes()
   {
    try
    {
        try
         {
            readerWriterLock.AcquireReaderLock(1000);
            //... read bytes here
            return bytesRead;
         }
         finally
         {
            readerWriterLock.ReleaseReaderLock();
         }
     }
     catch(System.ApplicationException ex)
     {
        System.Diagnostics.Debug.WriteLine(ex.Message);
     }
   }

   public void WriteBytes(bytes[] bytesToWrite)
   {
    try
    {
        try
         {
            readerWriterLock.AcquireWriterLock(1000);
            //... write bytes here
         }
         finally
         {
            readerWriterLock.ReleaseWriterLock();
         }
     }
     catch(System.ApplicationException ex)
     {
        System.Diagnostics.Debug.WriteLine(ex.Message);
     }
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-16T12:16:44.187

关于线程安全：线程安全不是问题，除非*单个应用程序中的*多个线程同时引用您的类的同一个实例。除非您的类包含在进程外服务器中，否则多个应用程序无法同时引用同一个实例。因此，您可能会看到的冲突将来自文件共享违规而不是线程问题（换句话说，类的不同*实例*试图读取和写入同一个*文件*）。是的，您必须设计代码以适当地处理文件共享。

使类可单元测试的一种方法是在构造函数中为类提供流，而不是让类直接访问文件。然后单元测试可以提供内存流，例如，而不是提供文件流。

# c# - 如何仅显示数据表中的某些列？

> ID：208186
> 
> 赞同：2
> 
> 时间：2008-10-16T11:40:35.947
> 
> 标签：c#, .net, datagrid, datatable, dataset

我正在使用返回数据集的 Web 服务。在这个数据集中有 5 个表，比如说表 A、B、C、D、E。我使用表 A。

所以

```
DataTable dt = new DataTable()
dt = dataset.Table["A"] 
```

现在在这个数据表中有列 a1、a2、a3、a4、a5、a6、a7。

假设我只想获取列 a3 和 a4 然后将其绑定到我的数据网格。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-10-16T11:43:47.700

忽略您拥有的数据比您需要的更多的事实。设置`AutoGenerateColumns`为`false`。`BoundColumns`为`a3`和创建`a4`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-16T12:11:18.393

对于需要深入了解Web 控制的任何人，我建议您阅读4GuysFromRolla 的[这篇文章。](http://aspnet.4guysfromrolla.com/articles/040502-1.aspx)`DataGrid`

注意：因为这个问题已经回答了。我想澄清需要做什么，以防万一其他人想知道。

```
DataSet ds;

//Get Data
using (SqlConnection connection = new SqlConnection(connectionString))
    {
        // Create the command and set its properties.
        SqlCommand command = new SqlCommand();
        command.Connection = connection;
        command.CommandText = "GetMyData";
        command.CommandType = CommandType.StoredProcedure;

        ds = connection.ExecuteDataSet();
    }
if(ds !=null && ds.Tables.Count > 0)
{
    dg.DataSource = ds.Tables[0];
    // disable autogeneration of columns
    dg.AutoGenerateColumns = false;
    //Hide unecessary columns
    dg.Columns["a3"].Visible = false;
    dg.Columns["a4"].Visible = false;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-16T11:44:06.173

我会绑定整个表，然后设置列的可见性如下

```
dgvMain.Columns[ColumnA3_Name].Visible = true;
dgvMain.Columns[ColumnA1_Name].Visible = false; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-01T11:22:54.870

您好可以使用以下代码

```
//It represent name of column for which you want to select records
string[] selectedColumns = new[] { "a3", "a4" }; 

DataTable tableWithSelectedColumns = new DataView(dataset.Table["A"]).ToTable(false,  selectedColumns); 
```

我试过这个并且它有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T19:55:21.517

您始终可以尝试设置特定列的 DataPropertyName 属性以匹配 DataTable 中的内容。然后将该 DataTable 绑定到 BindingSource 并将该绑定源绑定到您的网格。

只要 DataTable 中的列名称与 DataGrid 列的 DataPropertyNames 匹配，您的数据网格就应该只显示那些匹配的列。

在我的示例中，我的 stred proc 做了类似的事情：

```
ALTER PROCEDURE ps_Clients_Get
AS
BEGIN
    SELECT 
        convert(varchar(2000), path) as [Client Folder], 
        c.description as [Client Name],
        c.* 
    FROM Client c
END 
GO 
```

和我的 C# 代码：

```
using (DataTable dt = new DataTable())
{
    using (OdbcConnection cnDsn = new OdbcConnection(cmLocalTrackingDBDSNAME))
    {
        cnDsn.Open();
        using (OdbcCommand cmdDSN = new OdbcCommand())
        {
                  var _with1 = cmdDSN;
                  _with1.Connection = cnDsn;
                  _with1.CommandType = System.Data.CommandType.StoredProcedure;
                  _with1.CommandText = "{ CALL ps_Clients_Get }";
                  using (OdbcDataAdapter adapter = new OdbcDataAdapter())
                  {
                            dt.Locale = System.Globalization.CultureInfo.InvariantCulture;
                            adapter.SelectCommand = cmdDSN;
                            adapter.Fill(dt);
                            bindingSourceDataLocation.DataSource = dt;
                            dataGridViewDataLocation.AutoGenerateColumns = false;

                            dataGridViewDataLocation.DataSource = bindingSourceDataLocation;
                  }
         }
         cnDsn.Close();
    }
} 
```

祝你好运！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-07T17:41:00.757

```
 Dim DT As DataTable = YourDT

    DGV.DataSource = dt
    DGV.AutoGenerateColumns = False

    Dim cc = DGV.ColumnCount

    For i = 0 To cc - 1
        DGV.Columns(i).Visible = False
    Next

    DGV.Columns("ColumnToShow").Visible = True
    DGV.Columns("ColumnToShow").Visible = True 
```

# vim - 为什么要使用 IDE？

> ID：208193
> 
> 赞同：396
> 
> 时间：2008-10-16T11:41:46.350
> 
> 标签：vim, emacs, ide

在另一个问题中，[Mark](https://stackoverflow.com/users/26310/mark)高度评价 IDE，说“有些人仍然只是不知道‘为什么’他们应该使用一个……”。作为一个使用 vim 进行编程的人，并且在我的大多数/所有同事都使用 vim 或 emacs 进行所有工作的环境中工作，IDE 的优势是什么？我为什么要使用一个？

我确信这对某些人来说是一个收费问题，而且我对发起一场激烈的战争不感兴趣，所以**请只回复您认为基于 IDE 的方法优越的原因**。我对为什么不应该使用 IDE 不感兴趣。我已经不用了。可以这么说，我有兴趣听到“围栏的另一边”的消息。

如果您认为 IDE 可能适合某些类型的工作而不适合其他类型的工作，我也很想知道为什么。

* * *

## 回答 #1

> 赞同：539
> 
> 时间：2008-10-16T11:49:06.787

这实际上取决于您使用的语言，但在 C# 和 Java 中，我发现 IDE 有利于：

*   快速导航到一个类型，而无需担心命名空间、项目等
*   通过将成员视为超链接来导航到成员
*   记不住所有成员姓名时的自动补全
*   自动代码生成
*   重构（大量）
*   组织导入（在 Java 中自动添加适当的导入，使用 C# 中的指令）
*   键入时警告（即某些错误甚至不需要编译周期）
*   将鼠标悬停在某些东西上以查看文档
*   以一种有用的方式同时在屏幕上查看文件、错误/警告/控制台/单元测试等和源代码
*   易于从同一窗口运行单元测试
*   集成调试
*   集成源代码控制
*   直接从错误详细信息导航到发生编译时错误或运行时异常的位置。
*   ETC！

所有这些都节省了时间。它们是我可以手动完成的事情，但更痛苦：我宁愿编码。

* * *

## 回答 #2

> 赞同：100
> 
> 时间：2008-10-16T11:47:31.390

代码完成。它对探索代码有很大帮助。

* * *

## 回答 #3

> 赞同：85
> 
> 时间：2008-10-16T11:51:56.127

关于我为什么使用 IDE 的简短回答是懒惰。

我是一个懒惰的灵魂，当有一种简单的方法来代替它时，我不喜欢用一种困难的方法来做事情。IDE 让生活变得轻松，因此吸引了我们这些懒惰的人。

当我键入代码时，IDE 会自动检查代码的有效性，我可以突出显示一个方法并按 F1 以获取帮助，右键单击并选择“转到定义”直接跳转到定义它的位置。我点击了一个按钮，自动附加调试器的应用程序为我启动。名单还在继续。开发人员每天所做的所有事情都集中在一个屋檐下。

无需使用 IDE。不这样做更难。

* * *

## 回答 #4

> 赞同：56
> 
> 时间：2008-10-16T11:54:42.313

当“文本编辑器”真的是 emacs 时，我认为做经典的“文本编辑器和控制台窗口 vs IDE”是不公平的。大多数 IDE:s 的典型特性也在 emacs 中。或者他们甚至起源于那里，现代 IDE:s 主要是界面改进/简化。

这意味着对于原始问题，答案并不那么明确。这取决于相关站点的人们*如何*使用 emacs，他们是否主要将其用作文本编辑器，或者他们是否全力以赴并使用自定义脚本，学习相关模式的命令，了解代码标记等等。

* * *

## 回答 #5

> 赞同：53
> 
> 时间：2009-02-16T21:10:25.433

我从相反的方向来回答这个问题。我是在 Makefile+Emacs 领域的编程中长大的。从我最早的 DOS 编译器 Microsoft Quick C 开始，我就有了一个 IDE 来实现自动化。我在 Visual C++ 6.0 上工作了很多年，当我毕业进入 Enterprise Java 时，我使用 Borland JBuilder，然后选择了 Eclipse，这对我来说非常高效。

在我最初的自学、大学和现在的职业生涯中，我逐渐了解到，任何仅在 IDE 内完成的主要软件开发都会适得其反。我这样说是因为大多数 IDE 都希望你在*他们的*独特的 I-control-the-world-how-the-world-works 风格。你必须按照他们的思路对你的项目进行切片和切块。您已经使用他们奇怪的对话框管理您的项目构建。大多数 IDE 对项目之间复杂的构建依赖关系的管理很差，而且依赖关系很难 100% 工作。我一直处于 IDE 不会生成我的代码的工作版本的情况，除非我执行了 Clean/Rebuild All。最后，很少有一种干净的方法可以将您的软件从开发中移出并从 IDE 移入其他环境，例如 QA 或生产环境。构建所有部署单元通常是一个轻而易举的节日，或者你有一些笨拙的工具，IDE 供应商为你提供了捆绑东西的工具。但又一次，

我了解到，要与团队一起进行大规模开发，如果我们使用 IDE 开发代码并使用手动编写的命令行脚本进行所有构建，我们的工作效率会最高。（我们喜欢用于 Java 开发的 Apache Ant。）我们发现，在 IDE 之外运行我们的脚本对于复杂的构建来说只是一次点击或自动化的噩梦，它更容易（并且破坏性更小）到一个shell 并在那里运行脚本。

手动构建要求我们错过现代 IDE 中的一些细节，例如后台编译，但我们获得的更为关键：可以在多种环境中运行的干净且简单的构建。那些敏捷开发人员都在谈论的“一键构建”？我们有它。我们的构建脚本也可以被持续集成系统直接调用。通过持续集成管理构建使我们能够更正式地暂存并将您的代码部署迁移到不同的环境，并让我们几乎立即知道有人签入了破坏构建或单元测试的错误代码。

事实上，我从 IDE 中构建的角色并没有对我们造成太大的伤害。Eclipse 中的智能感知和重构工具仍然完全有用且有效——后台编译只是用来支持这些工具。而且，Eclipse 对项目的特殊切片是一种很好的方式，可以以一种每个人都能理解的方式在精神上分解我们的问题集（尽管对我的口味来说还是有点冗长）。我认为 Eclipse 最重要的事情之一是出色的 SCM 集成，这就是让团队开发如此愉快的原因。我们使用 Subversion+Eclipse，这非常有效率，而且很容易训练我们的员工成为专家。

* * *

## 回答 #6

> 赞同：24
> 
> 时间：2008-11-10T04:34:21.400

作为您在问题中强调的答复的作者，并且承认这一点有点晚，我不得不说，在列出的众多原因中，专业开发人员的生产力是最重要的原因之一高度重视的技能。

我所说的生产力是指以尽可能好的结果有效地完成工作的能力。IDE 在许多层面上实现了这一点。我不是 Emacs 专家，但我怀疑它缺少主要 IDE 的任何功能。

设计、文档编制、跟踪、开发、构建、分析、部署和维护，企业应用程序中的关键踏脚石，都可以在 IDE 中完成。

如果可以选择，为什么不使用如此强大的东西？

作为一个实验，承诺自己使用 IDE 30 天，然后看看你的感受。我很想看看你对这次经历的看法。

* * *

## 回答 #7

> 赞同：20
> 
> 时间：2008-10-16T11:47:34.793

拥有 IDE 具有以下优点：

*   编译通常是“即时”的，这意味着不再需要切换到命令行进行编译
*   调试是集成的，在 IDE 中进行调试意味着步骤调试器实际上使用您的就地编辑器来直观地向您显示执行了哪些代码
*   IDE 通常对您正在使用的语言有更多的语义知识，并且可以在键入时向您显示可能出现的问题。重构比“搜索替换”更强大。

还有很多，也许你应该试一试。

* * *

## 回答 #8

> 赞同：20
> 
> 时间：2008-10-16T11:52:56.093

IDE 基本上是：

*   带有代码完成、重构和文档的编辑器
*   调试器
*   文件系统资源管理器
*   SCMS 客户端
*   构建工具

全部在一个包中。

您可以使用单独的工具或仅使用出色的可编程编辑器和额外的工具来拥有所有这些（以及更多），例如 Emacs（Vim 也是如此，但 IDEbility IMO 少一些）。

如果您发现自己在一个实用程序和下一个可以集成到环境中的实用程序之间切换了很多，或者如果您缺少此处列出的一些功能（以及其他帖子中更完整的功能），也许是时候迁移到 IDE（或通过添加宏或不添加宏来提高环境的 IDEbility）。如果您使用多个程序为自己构建了一个“IDE”（在我上面提到的意义上），那么就没有必要转向一个实际的 IDE。

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2008-10-16T11:58:22.117

蚀：

高亮代码，在后台编译，在我进行过程中指出我的错误。

与 javadoc 集成，使用 ctrl-Space 建议变量名。

当我编译时，我会在那里得到错误。我可以双击一个错误，它会显示相应的行。

与 JUnit 集成得很好，ctrl-F11 运行测试，告诉我测试失败。如果输出窗口中有异常，我可以双击一行，然后将我带到失败的行。不仅如此，ctrl-F11 还确保在运行测试之前编译所有内容（这意味着我永远不会忘记这样做）。

与蚂蚁集成。一个命令来构建和部署应用程序。

与调试器集成，包括 Web 服务器的远程调试。

FANTASTIC 重构工具，搜索对一段代码的引用。帮助我了解更改的影响。

总而言之，它让我更有效率。

* * *

## 回答 #10

> 赞同：11
> 
> 时间：2008-11-12T20:21:04.657

大约 10 年（1994-2004），我一直使用 Emacs 作为开发和邮件/新闻的主要环境。当我在 2004 年强迫自己学习 Java 时，我发现了 IDE 的强大功能，令我惊讶的是，我真的喜欢 IDE ( [IntelliJ IDEA](http://en.wikipedia.org/wiki/IntelliJ_IDEA) )。

我不会详细说明具体原因，因为这里已经提到了很多——请记住，不同的人喜欢不同的功能。我和一位同事使用相同的 IDE，我们都只使用了可用功能的一小部分，而且我们都不喜欢彼此使用 IDE 的方式（但我们都喜欢 IDE 本身）。

但是与 Emacs/Vim 相关的环境相比，IDE 有一个优势，我想重点介绍一下：您可以减少安装/配置所需功能的时间。

使用[Wing IDE](https://en.wikipedia.org/wiki/Wing_IDE)（用于 Python）我准备在安装后 15-20 分钟开始开发。不知道我需要多少小时才能使用 Emacs/Vim 来启动和运行我使用的功能。:)

* * *

## 回答 #11

> 赞同：10
> 
> 时间：2008-10-16T12:18:07.103

它肯定会提高我的生产力。我什至在 Vista 上的 Visual Studio 中编写 Linux 应用程序，然后使用 Linux 虚拟机来构建它们。

您不必记住函数或方法调用的所有参数，一旦您开始键入它，IDE 就会显示需要哪些参数。您可以获得设置项目属性、编译器选项等的向导。您可以在整个项目中搜索内容，而不仅仅是文件夹中的当前文档或文件。如果您遇到编译器错误，请双击它，它会将您带到有问题的行。

集成模型编辑器、连接和浏览外部数据库、管理代码“片段”集合、GUI 建模工具等工具。所有这些东西都可以单独拥有，但是将它们全部放在同一个开发环境中可以节省很多时间并保持开发过程更有效地进行。

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2008-10-16T11:50:00.357

不同的人可能有不同的原因。对我来说，这些都是优点。

1.  为项目提供整体感觉。例如，我将在单个视图中拥有所有相关的项目文件。
2.  提供更高的代码生产力，例如
    1.  语法高亮
    2.  大会的转介
    3.  智能感知
    4.  数据库和相关 UI 文件的集中视图。
    5.  调试功能

一天结束时，它帮助我比在记事本或写字板上更快地编写代码。这是我喜欢 IDE 的一个很好的理由。

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2008-10-17T20:27:40.077

根据开发人员试图完成的工作，IDE*可以是“优越”的选择。*

文本编辑器*可以*是“高级”的，因为 IDE 通常面向一种（或一小部分）语言。

如果开发人员将大部分时间花在单一语言或相关语言“集群”（如 C# 和 T-SQL）上，在一个操作系统中，那么 GUI 设计、调试、智能感知、重构等工具由一个好的 IDE 可以非常引人注目。例如，如果您将大部分时间都花在 VB.NET 中，有时可能会在 Windows 环境中使用一点 T-SQL，那么如果您不看 Visual Studio 或类似的 IDE，那就太愚蠢了.

我对那些喜欢 IDE 或文本编辑器的人没有偏见，如果学得好，两者都可以非常高效和*有用*！

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2008-11-10T05:09:49.690

我认为这主要与开发人员的意识范围有关。IDE 提供了开发人员工作环境的宏观视图。您可以同时看到类层次结构、引用的资源、数据库模式、SDK 帮助引用等。由于您的击键以及不断扩大的体系结构和体系结构交叉点的影响和影响如此之多，因此越来越难以一次仅从一个代码岛工作。

OTOH，“只有我和 vim 以及手册页”让我对我的工作有了更精简的微观 - 但强烈和精确 - 视图。如果我有一个设计良好、分区良好、稀疏耦合的高内聚代码库，它是用一种语言构建的，并且有一组静态库可供使用——这不是你的典型情况，尤其是随着开发团队规模的扩大和重塑代码结构随着时间、距离和个人喜好。

我目前正在从事 Flex 和 .NET 中的项目。关于 Flex 的一个更好的事情是完成标准事情的不同方法很少——从数据库中提取数据、打开/关闭/读取/写入文件等。（但我正在使用 Flex Builder/Eclipse IDE - 一个典型的重量级例子，比如 VS，因为我还在学习基础知识，我需要训练轮。一旦我对自己的模式有信心，我希望能进化回 vim。）在这个观点下，我可以做什么我需要通过非常了解一些事情来专业地做。

OTOH，我无法想象使用 .NET 达到这一点，因为我希望保持的观点不断扩大和转变。概念上的完整性要少得多，并且在几个月内多个开发人员在一个项目上的一致性要差得多 - 但 IDE 支持这一点，也许会鼓励它。所以开发人员确实需要（并且可以更容易地）充分了解更多的东西。这也有助于帮助他们回答（甚至理解）StackOverflow 上更高比例的问题。即我们可以拥有更深的知识堆栈。我们可以响应更广泛的求助广告。

事情可能在两个方向上都走得太远。也许使用“仅限编辑器”范围，就像“如果你只有一把锤子，一切看起来都像钉子”。使用 IDE 方法，无论您想将任何东西固定在一起，您都可以选择广泛的紧固件和相关的工具范围 - 纳尔/锤子、螺丝/螺丝刀、螺栓/扳手、粘合剂/胶枪/夹子、磁铁, 等等 - 一切尽在您的指尖（通过向导帮助您入门）。

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2008-11-12T21:22:17.310

不要认为它是排他性的。使用 IDE 以获得它提供的好处，并在需要认真关注时切换到 vim/首选文本编辑器。

我发现 IDE 更适合重构、浏览和调试以及弄清楚**要做**什么。小的事情然后在 IDE 中完成，大的事情我翻转到 vim 来完成工作。

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2008-11-13T23:00:57.477

除了其他答案之外，我喜欢使用[ViPlugin](http://www.satokar.com/viplugin/) for [Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29)之类的工具将 IDE的*开发*能力与Vim的*编辑*能力结合起来。

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2009-02-16T21:24:31.250

[IntelliSense](https://en.wikipedia.org/wiki/Intelli-sense)、集成调试器和即时窗口使我的工作效率大大提高（[Visual Studio 2008](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_2008)）。一切都触手可及，我可以在编写代码的同时将一个巨大项目的大部分内容牢记在心。微软可能会继续在他们的操作系统上丢球，但 Visual Studio 是有史以来最好的产品之一。

* * *

## 回答 #18

> 赞同：4
> 
> 时间：2008-11-12T20:28:39.663

我不明白你在问什么。你问“我应该使用 IDE 而不是......”，但我不明白替代方案是什么 - [Vim](http://en.wikipedia.org/wiki/Vim_%28text_editor%29)和 Emacs 可以实现任何 IDE 都会给你的许多功能。他们唯一无法处理大型 IDE 的方面可能是 UI 设计师之类的东西。然后你的问题归结为简单的“我应该使用什么 IDE”，并为更简单的 Vim 和 Emacs 领域提出论据。

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2008-10-16T12:17:29.600

我可以想到使用 IDE 的几个原因：

*   集成帮助是最受欢迎的。
*   Visual Studio 预览版的内置重构
*   [IntelliSense](https://en.wikipedia.org/wiki/Intelli-sense)、语法高亮、大型项目导航的简易性、集成调试等（虽然我知道使用插件你可以通过[Emacs](http://en.wikipedia.org/wiki/Emacs)和[Vim](http://en.wikipedia.org/wiki/Vim_%28text_editor%29)获得很多这些）。
*   另外，我认为现在的 IDE 拥有更广泛的用户群，并且可能有更多的人为它们开发插件，但我可能错了。

坦率地说，我喜欢我的鼠标。当我使用纯文本编辑器时，它会变得孤独。

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2009-03-29T11:42:02.900

[IDE](http://en.wikipedia.org/wiki/Integrated_development_environment)可以让您更快、更轻松地工作……我注意到我花了很多时间在一个简单的文本编辑器中浏览代码……

在一个好的 IDE 中，如果 IDE 支持跳转到函数、到以前的编辑位置、到变量，则该时间会减少......此外，一个好的 IDE 可以减少尝试不同语言功能和项目的时间，如启动时间可以很小。

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2010-06-10T00:00:50.970

Visual Studio 和 Eclipse 等基于 GUI 的 IDE 比 Emacs 或 vim 等基于文本的 IDE 有几个优势，因为它们的显示功能：

*   用于 GUI 设计的 WYSIWYG 预览和实时编辑
*   高效的属性编辑器（例如，使用 GUI 调色板进行颜色选择，包括定位渐变色标等）
*   代码大纲、文件相互关系等的图形描述
*   更有效地使用屏幕空间来显示断点、书签、错误等
*   对操作系统和其他应用程序提供更好的拖放支持
*   图纸、图像、3D模型等综合编辑
*   显示和编辑数据库模型

基本上，使用基于 GUI 的 IDE，您可以立即在屏幕上获得更多有用的信息，并且您可以像查看/编辑应用程序的图形部分一样轻松地查看/编辑文本部分。

作为开发人员，最酷的体验之一是编辑一种计算某些数据的方法，并在另一个窗口中以图形方式查看代码的实时输出，就像您的用户在运行应用程序时看到的那样。现在这是所见即所得的编辑！

Emacs 和 vim 等基于文本的 IDE 可以随着时间的推移添加代码完成和重构等功能，因此从长远来看，它们的主要限制是基于文本的显示模型。

* * *

## 回答 #22

> 赞同：3
> 
> 时间：2011-01-14T17:08:11.417

我也几乎完全使用 Vim（几乎是因为我现在正在尝试学习 emacs）来完成我所有的开发工作。我认为纯粹的直观性（当然来自 GUI）是人们喜欢使用 IDE 的主要原因。通过直观，几乎不需要工具的学习开销。学习开销越少，他们完成的工作就越多。

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2008-10-16T11:47:16.993

节省开发时间
通过提供集成调试、智能感知等功能，让生活更轻松。

有很多，但会推荐使用一个，它们非常明显。

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2008-10-16T12:32:06.013

我不确定文本编辑器和 IDE 之间是否有明确的分界线。一方面你有 Notepad 之类的东西，另一方面是最好的现代 IDE，但两者之间还有很多东西。大多数文本编辑器都有语法高亮；针对程序员的编辑器通常具有各种其他功能，例如简单的代码导航和自动完成。Emacs 甚至允许您集成调试器。甚至 10 年前的 IDE 所提供的帮助程序员的功能远比你现在对严肃的文本编辑器所期望的要少得多。

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2008-11-27T22:33:25.250

我使用一个的主要原因是当代码超过 100 个文件时。

尽管 ctags 可以完成这项工作，[但一些 IDE](http://www.jetbrains.com/idea/index.html)有一种非常好的方法来轻松超快速地导航文件。

当你有很多工作要做时，它可以节省时间。

* * *

## 回答 #26

> 赞同：2
> 
> 时间：2010-11-06T20:38:58.330

对我来说，这只是我们在终端的美好时光中所做的一切的 GUI 版本。我总是同意 IDE 不是很优越，因为它们隐藏了很多东西，特别是关于链接的东西，但它们在某些情况下具有显着的优势，例如在 Qt 等某些开发平台上。

一些 IDE 像其他人的可视化 IDE 甚至似乎会在您键入代码时解析您的代码，并在您编译之前检测错误：似乎只有 IDE 才能与编译器密切合作以立即检测键入源中的问题。

我对 IDE/命令行火焰战争存在的疯狂回答只是因为从标准化的角度来看，C/C++ 可执行文件的构建并没有得到很好的处理，这与 D 语言不同；每个平台都以自己的方式处理编译/链接/等，因此为了减少混乱，他们制作了一个 IDE。

从您的角度来看，使用命令行可能更简单，如果只有一个带有标准选项的编译器，那会很容易，但事实是 C/C++ 是灵活的，所以最终，所有平台以自己的方式去做，因此 IDE 不会浪费时间解释如何去做。

如果您可以了解可执行文件如何与内核对话，或者您对编译器设计有所了解，那么也许有一种方法可以使用适当的命令行，但我怀疑您有。

微软或苹果，他们都是邪恶的，不得不提出一种直接的方式来构建应用程序而不进入细节，而且由于构建一个应用程序直接依赖于操作系统的架构，它几乎不会是“标准的”，因为命令行是。

简而言之，您不想深入研究它的功能的简单、大型和复杂的应用程序 -> IDE、小软件或简单的系统软件设计 -> 命令行。当然，除了那些嵌入 Makefile 的漂亮库，但那是另一回事了。

我还认为，当交付的应用程序与 GUI 或具有接口或直接绑定到 OS 的应用程序有关时使用 IDE，所以同样，它也适用于在不知道的情况下使用 UI/GUI 的人它是如何工作的，而对系统进行编程的人并不需要它。

IDE 只是现代的狗屎，但我认为 100 年后命令行仍然存在。

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2008-10-16T11:52:55.093

我喜欢 IDE，因为它让很多功能触手可及。项目中文件的编辑/编译/可见性是我在 IDE 中所重视的一切。我现在使用 Visual Studio，但在以前的生活中，我使用了 SlickEdit，发现它使我的开发过程比我不使用它时更加简化。

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2008-10-16T12:11:38.643

在决定是否使用 IDE 时，只需要考虑一件事，那就是它是否会让您更有效率。

简短的问题如此简短的回答:)

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2008-10-17T11:08:43.810

这在很大程度上取决于您在做什么以及您使用什么语言。就个人而言，我倾向于不使用 IDE（或者“我的 IDE 由 3 个运行 vim 的 xterms 组成，一个运行数据库客户端，一个带有bash 提示符或拖尾日志”，这取决于您对我的大部分工作定义“IDE”的范围），但是，如果我发现自己正在开发平台原生 GUI，那么我会在瞬间 - IMO、IDE 和图形表单编辑显然是为彼此而制作的。

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2008-10-17T11:13:54.453

IDE 可以处理繁重的工作，从而节省您的时间。

它将所有关联的项目文件保存在一起，便于协作。

您通常可以将源代码控制集成到 IDE 中，从而节省更多繁重的工作并进一步增强协作。

如果它具有自动完成功能，它可以帮助您探索您选择的语言并节省一些输入。

基本上，IDE 减少了程序员的非编程工作。

* * *

## 回答 #31

> 赞同：1
> 
> 时间：2008-11-27T22:26:39.257

我并不完全赞成使用 IDE。但是，我认为像[Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29)这样的优秀 IDE 最有价值的方面是对大型代码库的良好集成的[Cscope](http://cscope.sourceforge.net/)风格的功能快速理解。

例如，在 Eclipse 中，您看到一个方法采用 FooBar 类型的参数，但您不知道它的含义。与其浪费一分钟艰难地寻找定义（并冒着各种干扰的风险），只需选择 FooBar，点击`F3`，它就会打开相关的源文件到定义 FooBar 的那一行。

在我看来，IDE 的缺点是它们给你一个更大的学习曲线，除非你想使用绝对默认的配置。（对于 Emacs 也是如此。）

* * *

## 回答 #32

> 赞同：1
> 
> 时间：2010-01-30T12:00:19.157

对我来说，IDE 更好，因为它允许在代码中更快地导航，如果你有一些想法要实现，这很重要。假设您不使用 IDE，到达目的地需要更长的时间。你的想法可能会更频繁地被打断。这意味着必须按下更多点击/更多键。一个人必须更多地专注于如何实现事物的思想。当然，你也可以写下东西，但必须在设计和实现之间跳来跳去。此外，GUI 设计师也有很大的不同。如果您手动执行此操作，则可能需要更长的时间。

* * *

## 回答 #33

> 赞同：1
> 
> 时间：2010-07-24T02:35:56.273

这真的很简单。但是这个答案有点自相矛盾，因为我讨论的是只有嵌入式级别的开发人员才会遇到的问题。[这是一个奇怪的观点的原因是，坦率地说，当我做嵌入式工作时（我在短时间内赚到了真正的钱），IDE 会很奇怪，你的大多数同事都会想知道为什么你对SNMP](https://en.wikipedia.org/wiki/Simple_Network_Management_Protocol)记不住/ASN.1或您正在处理的任何协议，只是/做您的工作/ [。](https://en.wikipedia.org/wiki/Abstract_Syntax_Notation_One)但是，据我所知，您不能在没有“IDE”的情况下对您的[微控制器在 /real time/ 中所做的事情进行图形模拟。](http://en.wikipedia.org/wiki/Microcontroller)

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2008-10-16T12:37:39.653

简而言之，IDE 通过简单的编辑器提供了额外的省时功能。

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2008-11-12T20:45:36.900

我更喜欢 IDE，因为它允许我集成编辑/编译/调试，一键从错误跳转到生成错误的行。此外，它允许使用 OS 标准界面显示信息的多个信息窗格。简而言之，它为用户提供了基于鼠标的输入界面和现代的输出界面，而不是依赖 1970 年代的技术和界面来帮助我。

IDE 有更复杂的用户和用途，我不声称使用它们或了解它们。当我有需要时，我会学习它们。

* * *

## 回答 #36

> 赞同：-3
> 
> 时间：2008-10-16T11:58:07.907

使用 IDE 的一个很好的理由是它们是生产现代软件的公认方式。如果你不使用，那么你可能会使用“老式”的东西，比如 vi 和 emacs。这可能会导致人们得出结论——可能是错误的——你被困在自己的方式中，无法适应新的工作方式。在像软件开发这样的行业中——想法可能在短短几个月内就过时了——这是一个危险的状态。它可能会严重损害你未来的工作前景......

# c# - 在 c# setup 项目中强制回滚安装程序

> ID：208200
> 
> 赞同：0
> 
> 时间：2008-10-16T11:43:28.810
> 
> 标签：c#, .net, windows-installer

我创建了一个自定义操作 dll。我只想检查是否存在同名产品（完成）。如果是，则通过抛出 InstallException 告诉用户卸载产品。但是，如果产品安装在同一目录中，则安装状态上一个产品的删除和新产品的安装状态被复制到基目录中，因此上一个产品无法卸载。有什么程序可以解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-22T02:42:17.870

听起来您确实想使用 Windows Installer 提供的升级逻辑来查找其他产品并设置属性。然后，该属性可以控制 LaunchCondition（或 Type19 CustomAction）。这样你就不需要任何 CustomActions。

# silverlight - 在 silverlight 控件之间自动分页

> ID：208218
> 
> 赞同：0
> 
> 时间：2008-10-16T11:47:38.177
> 
> 标签：silverlight

我有一组 Silverlight 控件，我想创建一个可以在这些控件之间自动交替的网页。知道我该怎么做吗？

它们的显示顺序和每个显示的时间段需要可配置，但任何关于让基本分页工作的技巧都会很棒。

这些控件当前托管在 asp.net winforms 中，因此我可以自动分页 winfrom，或者我可以拥有一个主 Silverlight 控件来托管其他控件并指示分页。在任何一种方法中，我都不确定该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-17T17:49:17.183

我会使用单个 Silverlight 2 应用程序并在控件内执行所有分页。

您可以在我的旧博客文章中看到如何在 Silverlight 控件之间切换的[示例](http://craign.net/2008/03/11/how-to-switch-silverlight-usercontrols/)。

# java - 有没有办法在 Windows 下使用 java.util.Preferences 而不使用注册表作为后端？

> ID：208231
> 
> 赞同：18
> 
> 时间：2008-10-16T11:52:47.607
> 
> 标签：java, windows, registry, preferences

我想使用 java.util.Preferences API，但我不希望我的程序尝试读取或写入 Windows 注册表。我该怎么办？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-10-16T12:11:56.257

我相信您已经[使用 Java 读取/写入 Windows 注册表](https://stackoverflow.com/questions/62289/readwrite-to-windows-registry-using-java)`java.util.Preferences`，然后您希望在使用API时拥有另一个后端而不是注册表

您可以像[Bernhard](http://www.jroller.com/berni/entry/my_preferences)或[Croft](https://github.com/eis/simple-suomi24-java-client/tree/master/src/main/java/net/infotrek/util/prefs)那样扩展[`Preference`API ，如](http://blogs.oracle.com/CoreJavaTechTips/entry/the_preferences_api)[本文所述](http://java.sun.com/developer/technicalArticles/releases/preferences/)：

> 因为[Preferences API](http://java.sun.com/j2se/1.4.2/docs/api/java/util/prefs/Preferences.html)是后端中立的，所以您不必关心数据是存储在文件、数据库表还是特定于平台的存储（如 Windows 注册表）中。

[可以在这里看到通过](http://code.ohloh.net/search?s=%22java.util.prefs.AbstractPreferences%22&pp=0&fl=Java&ff=1&mp=1&ml=1&me=1&md=1&filterChecked=true)[new`Preferences`](http://code.ohloh.net/search?s=%22java.util.prefs.AbstractPreferences%22&pp=0&fl=Java&ff=1&mp=1&ml=1&me=1&md=1&filterChecked=true)进行扩展的示例。

IMO，这比使用另一个 API 更好。

* * *

例如，搜索扩展类[`java.util.prefs.AbstractPreferences`](http://docs.oracle.com/javase/7/docs/api/java/util/prefs/AbstractPreferences.html)：

*   您可以使用由 XML 文件支持的首选项存储：

[`de.unika.ipd.grgen.util.MyPreferences`](http://code.ohloh.net/file?fid=cuJKx0oHXYyFIRciM_dbHYvZ4FU&cid=GPBRWJBaRz4&s=%22java.util.prefs.AbstractPreferences%22&fp=287105&mp&projSelected=true#L0)

```
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import java.util.prefs.AbstractPreferences;
import java.util.prefs.BackingStoreException;

/**
 * Own implementation of the Java preferences API, that does not use
 * a "OS backing store" but relies on importing and exporting the
 * preferences via xml files.
 * Also, If a preference is got, but was not in the tree, it is entered.
 */
public class MyPreferences extends AbstractPreferences {

    private Map<String, String> prefs = new HashMap<String, String>();
    private Map<String, AbstractPreferences> children = new HashMap<String, AbstractPreferences>();

  public MyPreferences(MyPreferences parent, String name) {
    super(parent, name);
  }

  /**
   * @see java.util.prefs.AbstractPreferences#putSpi(java.lang.String, java.lang.String)
   */
  protected void putSpi(String key, String value) {
    prefs.put(key, value);
  } 
```

* * *

*   或者您可以将这些首选项存储在 LDAP 中：

[`de.tarent.ldap.prefs.LDAPSystemPreferences`](http://code.ohloh.net/file?fid=adcrwCk6yHdkEjb9jbpCxtI4bZg&cid=HrFBgz21-IE&s=%22java.util.prefs.AbstractPreferences%22%20factory&fp=9551&mp&projSelected=true#L0)

```
import java.util.prefs.AbstractPreferences;
import java.util.prefs.BackingStoreException;

import javax.naming.NamingException;
import javax.naming.directory.Attributes;

import de.tarent.ldap.LDAPException;
import de.tarent.ldap.LDAPManager;

/**
 * @author kirchner
 * 
 * Preferences im LDAP
 */
public class LDAPSystemPreferences extends AbstractPreferences {
    LDAPManager     ldm         = null;
    Properties      properties  = new Properties();
    //Map für key/value der Preferences
    Map             cache       = new HashMap();
    //Map für timestamp der Preferences
    Map             timestamp   = new HashMap();
    private Boolean deleted     = Boolean.FALSE; 
```

* * *

*   或者您可以使用一个简单的属性文件：

`com.adito.boot.PropertyPreferences`：

```
import java.util.prefs.AbstractPreferences;
import java.util.prefs.BackingStoreException;
import java.util.prefs.Preferences;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;

/**
 * A simple implementation for the preferences API. That stores preferences
 * in propery files. We do not have to worry about sharing the preferencese 
 * with other JVM instance so there is no need for any kind of synchronising
 * or locking.
 */
public class PropertyPreferences extends AbstractPreferences { 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-16T12:04:58.703

总是可以扩展 java.util.prefs.AbstractPreferences。

另一种方法是使用 Apache Commons 的[配置包](http://commons.apache.org/configuration/)，允许您从/向不同来源读取和写入配置数据。

# c# - 如何在执行 Response.Redirect 之前显示/隐藏面板

> ID：208234
> 
> 赞同：6
> 
> 时间：2008-10-16T11:53:41.503
> 
> 标签：c#, asp.net, redirect, response.redirect

我有一个表单，它启动 Response.Redirect 以在完成后下载文件。我还想在重定向发生之前隐藏表单并显示一个“谢谢”面板，但是似乎 asp.net 引擎只是在没有执行以下代码之前的 2 个任务的情况下进行了重定向：

```
if (success)
                {
                    lblSuccessMessage.Text = _successMessage;
                    showMessage(true);                        
                }
                else
                {
                    lblSuccessMessage.Text = _failureMessage;
                    showMessage(false);
                }

                if(success)
                    Response.Redirect(_downloadURL); 
```

知道如何在重定向启动之前强制页面更新吗？

非常感谢格雷格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-16T12:36:07.300

您需要一些客户端代码来执行重定向。

我的偏好是嵌入一些 javascript 来进行重定向。

因此，隐藏表单、显示消息并（在最粗略的层面上）使用文字控件将一些这样的文本添加到页面中。

```
<script>
    location.href = "http://otherServerName/fileToDownload";
</script> 
```

您可能会发现此重定向发生在您的页面显示更改之前 - 在这种情况下，请在 HTML 的正文标记中尝试此操作（注意不同类型的引号）：

```
<body onload='location.href="http://otherServerName/fileToDownload";'> 
```

请记住，每个回发实际上是为客户端提供一个新页面，而不仅仅是更改当前页面上的某些属性（即使 ASP.NET 努力假装它就像一个 Windows 窗体）

就我个人而言，我更喜欢在流程的每个阶段都有一个单独的页面，而不是试图通过显示/隐藏各个位来在一个页面中完成所有事情 - 但我可能已经过时了。

编辑：如果他们禁用了 javascript，您只需提供下载文件的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-16T11:57:37.923

也许手动发送重定向标头，等待几秒钟是适合您的方式？

```
Response.AddHeader("Redirect", "3; URL=" + _downloadURL") 
```

**编辑**

再次阅读您的问题后，我可能对您有点误解。

您似乎想延迟整个过程，以便显示“谢谢”面板。这给你两种可能性：

*   您要么依靠 JavaScript 来显示面板并延迟表单 POST。然后服务器可以立即使用 重定向`Response.Redirect()`。这是更现代的方法。
*   或者你想完全独立于 JavaScript。在这种情况下，您必须让服务器在 POST 表单上显示一个中间“谢谢，单击此处继续”页面，并使用重定向标题方法通过`Response.AddHeader()`使该页面自动消失。这有点过时但可靠。

您不能真正将两者结合起来，因为对于那些关闭 JavaScript 的用户来说，这将是不一致的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-16T11:58:30.230

您不能，因为此操作在服务器发送回客户端之前发生在服务器上。如果您尝试将文件发送给用户，则可以使用 Response.Write() 将其流式传输给他们。这将使他们保持在当前页面上，以便您可以向他们显示消息，他们将获得下载提示。

缓冲区是文件的字节数组

```
Response.AddHeader("Content-disposition", "attachment; filename=" & myUserFriendlyFileName)
Response.ContentType = "application/octet-stream"
Response.OutputStream.Write(buffer, 0, buffer.Length) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-16T12:43:15.070

直接在 asp.net 中你不能这样做，但一种解决方法是使用 JS（如在此处发布的那样），或者您可以使用加载要下载的文件的 IFrame - 用户将看到谢谢，然后打开/保存对话...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-16T12:50:22.857

使用 javascript 将其隐藏在客户端，然后执行重定向，或者执行两次回发：第一次回发以隐藏表单并显示感谢，第二次在感谢被呈现到屏幕后进行重定向。

或者，您可以在回发和表单隐藏完成后执行 javascript window.open 而不是指向目标的重定向。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-17T02:16:26.567

我最终完成了 abrudtkuh 的建议，只是添加了成功消息的链接......我还将实现 javascript 重定向以自动开始下载，但我不想仅仅依赖 javascript，因此显示按钮按页面。

Thanks for the tips everybody - you all rock!

cheers greg

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-10-16T17:20:34.853

```
if (success)
                {
                    lblSuccessMessage.Text = _successMessage;
                    showMessage(true);                        
                }
                else
                {
                    lblSuccessMessage.Text = _failureMessage;
                    showMessage(false);
                }

                if(success) {
                    Threading.Thread.Sleep(200)
                    Response.Redirect(_downloadURL);
                } 
```

您可以通过使线程休眠来强制它在重定向之前等待。

最好的，最用户友好的选择是让用户通过添加一个按钮自行继续。例如，您可以执行以下操作：

```
if (success)
                {
                    lblSuccessMessage.Text = _successMessage + "<br /><INPUT TYPE='button' VALUE='Continue...' onClick='parent.location='" + _downloadURL + "'/>";
                    showMessage(true);                        
                }
                else
                {
                    lblSuccessMessage.Text = _failureMessage;
                    showMessage(false);
                } 
```

# oracle - oracle 是否允许未提交的读取选项？

> ID：208236
> 
> 赞同：16
> 
> 时间：2008-10-16T11:54:17.493
> 
> 标签：oracle

在 db2 中，带有“with ur”子句的查询允许查询是未提交的读取，mysql 中的“with nolock”子句也是如此。oracle中是否也有这样的选择...如果不是为什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-10-16T12:15:48.887

Tom 对此提供了一个很好的答案：[On Transaction Isolation Levels](http://www.oracle.com/technetwork/issue-archive/2005/05-nov/o65asktom-082389.html)

他说：

> READ UNCOMMITTED 隔离级别允许脏读。Oracle 数据库不使用脏读，甚至不允许它们。READ UNCOMMITTED 隔离级别的基本目标是提供允许非阻塞读取的基于标准的定义。

...

> 现在，一个允许脏读的数据库......它不仅返回错误的答案，而且它返回...... [一个答案]......表中从未存在过。在多用户数据库中，脏读可能是一个危险的特性。就个人而言，我从未见过它的用处......
> 
> 这里的重点是脏读不是一个特性。相反，这是一种责任。在 Oracle 数据库中，它只是不需要。您可以获得脏读的所有优点——没有阻塞——没有任何不正确的结果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-16T14:12:28.260

Tom Kyte 的回答是正确的 WRT 预言机，由于其多版本并发控制 (MVCC) 架构，不存在脏读之类的东西。

从应用程序功能的角度，我完全同意 Tom；没有充分的理由或脏读。

**为什么要在 Oracle 之外使用它？**在没有 MVCC 的情况下（例如 MySQL、Ingres），这是一种解决锁定问题的技巧，如果没有适当调整，可能会降低性能或导致锁定系统“用尽锁”。就像您需要在 Oracle 中调整回滚/撤消一样，您需要管理非 MVCC 数据库中的锁定系统。

**那么为什么它可能对 Oracle 有用**——作为只读函数的性能提升，其中“错误数据”极不可能且极不重要。在 MySQL/DB2/Ingres/Informix（不确定 SQL Server/Sybase）中，它可用于绕过锁管理工具以提高性能。

*这是读取不需要*一致性的情况示例：

*   所有产品列表

*以下是读取需要*一致性的示例：

*   库存产品清单

Oracle 甚至不考虑脏读，也不能在不失去性能优势的情况下将其“添加为功能”（即在 Oracle 真正的 MVCC 架构中获取脏数据需要太多技巧）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-02-07T20:44:14.447

**WITH UR 理由**：当涉及到 SELECT ONLY（报告）查询时，等待提交是没有意义的。如果您正在报告正在更新的表，那么您是否获得该更新是无关紧要的。脏读与提交后的数据一样有效。考虑一下查询是否在一秒前命中了该锁定记录。

如果您对更改的表运行查询，则不会及时获得任何设定点。查询开始时访问的数据比查询结束时访问的数据更早。查询结果中可能包含或不包含对表的大量更新。

使用 WITH UR 和其他 DBMS 等效项可以提高性能，因为查询不会等待提交，并且不会导致数据完整性损失。

（ps。刚刚设置了我的帐户，所以我无法评论其他回复。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-21T11:07:04.617

虽然上述答案确实正确，但您可以查看 Autonomous Transactions 但请记住，不推荐使用它们，您可以查看[Autonomous Transactions和](https://docs.oracle.com/cd/B19306_01/appdev.102/b14261/autonotransaction_pragma.htm)[Autonomous Transactions a Poor Mis-Understood Feature](http://www.orafaq.com/node/1915) 的缺点 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-03T13:45:48.270

well, UR means uncommitted read across commit boarders of other long running transactions. Dirty read is a old term for uncommitted read. A read into incomplete physical pages isn't possible in DB2 and I hope in Oracle, too. I locate SET ISOLATION LEVEL READ UNCOMMITTED, It seems to be possible in Oracle, too. From point of getting consistence I prefer READ UNCOMMITTED, because CS might generate serialized different returns of one table because of not reaching values. That might wasn't request by an report or dump. Eg. If you want to know - theoretical - values of transactions that will committed later, too..

[https://docs.oracle.com/javadb/10.6.2.1/ref/rrefsqlj41180.html](https://docs.oracle.com/javadb/10.6.2.1/ref/rrefsqlj41180.html)

# asp.net - 如何自动将 .html 页面重新映射到 .aspx 页面？

> ID：208246
> 
> 赞同：2
> 
> 时间：2008-10-16T11:57:26.910
> 
> 标签：asp.net, redirect

我们有一个网站；其中，到目前为止只有 HTML 页面。现在我们在 ASP .Net 中重新开发它。

这意味着所有 .html 页面都将更改为 .aspx 扩展名。问题是，这些页面有很多外部引用，我们不想马上去查每一个到 aspx 的链接。

有没有办法将指向 .html 页面的链接重定向到 .aspx 页面？例如，服务器是否有任何方法检查指定的文件，发现它链接到 .html 页面并自动打开 .aspx 页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-16T12:09:40.240

我会借此机会留下扩展名（.html、.aspx 等）。

对于我们所有的主要网站，我们现在都使用自定义映射系统，从而将虚拟页面 URI 映射到特定的 .aspx（或 .html）页面。这有几个好处：

*   您的访问者会看到“更好”的 URI；
*   您可以在幕后按照您认为合适的方式重新组织您的网站，而不会破坏现有的传入链接；
*   您可以使用动态虚拟 URI，例如，代替 /Product.aspx?p=Blah，您可以使用 /Products/Blah

我们有自己的自定义系统，但我相信 ASP.NET MVC 现在已内置此功能。

（如果您沿着这条路线走，您可以为指向新 .aspx 页面的 .html URI 添加旧版映射）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-16T12:07:45.297

如果您进行某种 url 重写，您可以让所有链接保持不变并只提供 aspx 页面，对 index.html 的请求将映射到 index.aspx

这是 ms 关于 asp.net url 重写的说法：

[http://msdn.microsoft.com/en-us/library/ms972974.aspx](http://msdn.microsoft.com/en-us/library/ms972974.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-23T16:41:31.403

您可能想查看 ASP.NET System.Web.Routing 命名空间，我相信它是在 .NET 3.5 SP1 中添加的：

[http://blogs.msdn.com/mikeormond/archive/2008/05/14/using-asp-net-routing-independent-of-mvc.aspx](http://blogs.msdn.com/mikeormond/archive/2008/05/14/using-asp-net-routing-independent-of-mvc.aspx)

[http://msdn.microsoft.com/en-us/library/system.web.routing.aspx](http://msdn.microsoft.com/en-us/library/system.web.routing.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-16T12:19:48.363

以下是我们处理类似情况的方法。

1.  设置 IIS 以将 html 扩展名映射到 ASP.Net，而不是直接处理它。

2.  在 HttpApplication.BeginRequest 处理程序中，查看是否对已迁移到 aspx 的 html 文件发出请求，如果是，则通过重定向响应来提供 aspx 页面。

3.  如果 html 文件尚未映射，则只需提供静态 html 文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-16T12:20:21.590

就像 stusmith 提到的，你不应该让你的底层技术暴露（当然也不是强制）你的 URI 是什么样的。如前所述，最好的方法是根本不显示任何扩展名，但在当前情况下，也许可以将系统配置为使 .html 文件像 .aspx 一样被处理？

我不知道关于 .NET 的第一件事，但我认为这是可能的，而不必经历太多的麻烦。

第二种最好的方法是重写 URI，但这需要服务器的额外工作（不多，但它加起来）。

（不要使用元刷新重定向。其他所有解决方案都更好。）

# gwt - GWT FileUpload 初始路径

> ID：208253
> 
> 赞同：2
> 
> 时间：2008-10-16T11:59:14.003
> 
> 标签：gwt, widget

有没有办法在 GWT 中设置 FileUpload 小部件的初始路径。因此，下次用户按下浏览按钮时，他会被放置到他上次所在的位置（如果存在）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-16T12:32:36.073

好的，显然有一个属性，但由于各种原因不支持，我们可以[在这里](http://www.cs.tut.fi/~jkorpela/forms/file.html#value)阅读。

除此之外，它对于路径（而不是文件名）非常有用，因此用户在上传多个文件时不必浏览到同一位置。

# opengl - vista下opengl问题

> ID：208254
> 
> 赞同：0
> 
> 时间：2008-10-16T11:59:57.093
> 
> 标签：opengl, windows-vista

我刚开始使用opengl，但遇到了一些奇怪的行为。

下面我发布了在 xp 中运行良好的代码，但在 vista 上它只呈现黑屏。

很抱歉发布不寻常的（至于这个板）长代码。

在vista中打开gl有什么特别的吗？谢谢。

```
#include<windows.h>
#include<gl\gl.h>
#include<gl\glu.h>
#pragma comment(lib, "opengl32.lib")
#pragma comment(lib, "glu32.lib")

void InitGL(void)
{
glClearColor(1,0.3f,0.3f,0.3f);
}

void DrawGLScene(void)
{
/* code removed */
}

HGLRC hRC = NULL;
HDC hDC = NULL;
HWND hWnd = NULL;
HINSTANCE hInstance = NULL;
LRESULT CALLBACK WndProc(HWND, UINT, WPARAM, LPARAM);

bool CreateGLWindow(char* title, int width, int height)
{
GLuint PixelFormat;
WNDCLASS wc;
RECT WindowRect;
WindowRect.left = (long)0;
WindowRect.right = (long)width;
WindowRect.top = (long)0;
WindowRect.bottom = (long)height;
LPCSTR nazwa = TEXT("Start");

hInstance = GetModuleHandle(NULL);
wc.style = CS_HREDRAW | CS_VREDRAW | CS_OWNDC;
wc.lpfnWndProc = (WNDPROC)WndProc;
wc.cbClsExtra = 0;
wc.cbWndExtra = 0;
wc.hInstance = hInstance;
wc.hIcon = LoadIcon(NULL, IDI_WINLOGO);
wc.hCursor = LoadCursor(NULL, IDC_ARROW);
wc.hbrBackground = NULL;
wc.lpszMenuName = NULL;
wc.lpszClassName = nazwa;

RegisterClass(&wc);

hWnd = CreateWindowEx(WS_EX_APPWINDOW | WS_EX_WINDOWEDGE, nazwa,
                      nazwa,
                      WS_SYSMENU |
                      WS_CLIPSIBLINGS |
                      WS_CLIPCHILDREN,
                      0,0,
                      width,
                      height,
                      NULL,
                      NULL,
                      hInstance,
                      NULL);

static PIXELFORMATDESCRIPTOR pfd = 
{
    sizeof(PIXELFORMATDESCRIPTOR),
    1,
    PFD_DRAW_TO_WINDOW |
    PFD_SUPPORT_OPENGL |
    PFD_DOUBLEBUFFER,
    PFD_TYPE_RGBA,
    32,
    0,0,0,0,0,0,
    0,
    0,
    0,
    0,0,0,0,
    16,
    0,
    0,
    PFD_MAIN_PLANE,
    0,
    0,0,0
};

hDC = GetDC(hWnd);
PixelFormat = ChoosePixelFormat(hDC, &pfd);
HRESULT rez = SetPixelFormat(hDC, PixelFormat, &pfd);
hRC = wglCreateContext(hDC);
wglMakeCurrent(hDC, hRC);
ShowWindow(hWnd, SW_SHOW);
InitGL();
return true;

}

LRESULT CALLBACK WndProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam)
{
switch(uMsg)
{
case WM_ACTIVATE:
    {
        return 0;
    }
case WM_CLOSE:
    {
        PostQuitMessage(0);
        return 0;
    }
}

return DefWindowProc(hWnd, uMsg, wParam, lParam);
}

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine,
int nCmdShow)
{
MSG msg;
bool done = false;

if (!CreateGLWindow(NULL, 800,600))
{
    return 0;
}

while(!done)
{
    if (PeekMessage(&msg, NULL, 0, 0, PM_NOREMOVE))
    {
        if (!GetMessage(&msg, 0, 0, 0)) done = true;
        else {
            TranslateMessage(&msg);
            DispatchMessage(&msg);
        }
    }
    else
    {
        DrawGLScene();
        SwapBuffers(hDC);
    }
}

return (msg.wParam);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-16T12:29:10.357

它应该做什么？根据您在此处发布的代码，除了显示黑屏之外，它不应该做任何事情。你期望会发生什么？

我看到的唯一一件事是您正在设置 glClearColor，但您从未调用 glClear，因此不会做任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-16T12:22:15.580

试试`PFD_SUPPORT_COMPOSITION`。

如果失败，请发布结果`DescribePixelFormat`并`glGetString(GL_RENDERER);`帮助更多地诊断问题。

# java - How do I get tomcat 5.5 to run behind apache 2 with mod_rewrite passing through requests to mod_jk and stripping app context?

> ID：208261
> 
> 赞同：2
> 
> 时间：2008-10-16T12:03:47.037
> 
> 标签：java, apache, tomcat, mod-rewrite, mod-jk

Ok, so I want to get a webapp running in tomcat (5.5) to run behind apache 2 (2.2.3 to be precise) serving from the root of the site (i.e. without the context), with static content being served via apache.

So if the app is running under "`/myapp`" on tomcat I want to use apache (plus `mod_rewrite`) to make it behave as if it's running under "`/`" instead.

`Mod_jk` is setup and working ok. I can access the app from "`/myapp`", but I can't quite get the last bit working. Below is the config I've got for `mod_rewrite` to try and get this working. It correctly gets rewrites `/static/` urls to get apache to serve them from the unpacked webapp and if I enable the rewrite log I see that it does attempt to pass through all other requests to `/myapp` via `mod_jk`. However it seems that mod_jk is not processing the request afterwards.

```
 JkMount /myapp/*      worker1

RewriteEngine On

# ensure static stuff gets served by apache
RewriteRule ^/static/(.*)$ /var/lib/tomcat5.5/webapps/myapp/static/$1 [L]
# everything else should go through tomcat
RewriteRule ^/(.*)$ /myapp/$1 [L,PT] 

```

When I've done this with apache 1 in the past I've had to make sure `mod_jk` get's loaded before `mod_rewrite`, but I can't seem to achieve this under apache 2\. Any thoughts? How do other people usually do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-16T13:27:40.643

Managed to get this working in the end. It appears that I need to set a JkOption to:

```
 JkOptions     +ForwardURICompat 

```

And then `mod_jk` looks at the rewritten URL. Must admit not 100% sure quite why this works, but I believe it's reverting to an older form of behaviour. If anyone can tell me a better/more correct way of doing this I'd love to know.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-24T16:51:26.860

May be better use Apache for proxy instead of mod_jk. Something like this:

ProxyPass /static/ [http://localhost:8080/myapp/static/](http://localhost:8080/myapp/static/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-19T20:43:14.163

It might be easier or more transparent what happens if you use either Tomcat Virtual Hosts or different connectors for different hosts and just deploy root applications (at "/") and setup Apache mod_jk forwarding to the different connectors or virtual hosts.

Note: When I needed this I've worked with different connectors for different tomcat hosts or Engines (can't remember) and deployed ROOT applications. I've never tried virtual hosts (name based) in tomcat, only guessing that this could work.

Benefit: no path translation, thus a lot easier to understand once you have to make changes to the installation months after initial deployment.

I confess, it feels somewhat strange, but the benefit of readability is worth a lot to me.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-10-16T12:49:05.137

We use the 'R' flag instead of 'PT':

```
RewriteRule ^/(.*)$ /myapp/$1 [L,R] 
```

**Edit:** I missed the point to not alter the URL the user sees. An alternative way is to do:

```
JkMount /* worker1
JkUnmount /static/* worker1 
```

Then you won´t need the RewriteRule's.

And according to [Apache Tomcat Site](http://tomcat.apache.org/security-jk.html) the new default settings of the `mod_jk` are incompatible with `mod_rewrite` and you should use `+ForwardURICompatUnparsed`.

# jquery - 如何使用 jQuery 查找插件的所有实例？

> ID：208262
> 
> 赞同：2
> 
> 时间：2008-10-16T12:03:58.613
> 
> 标签：jquery

我为自己创建了一个 jQuery wee 插件，它负责显示、隐藏和提交表单以进行就地编辑。目前我在一个页面上有几个独立运行的，我很高兴。但是，我认为“全部编辑”可能有用。因此，我希望能够访问页面内插件的所有实例，并一致地访问它们的显示/隐藏/验证/提交功能。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-17T21:35:17.367

使用 jQuery 中的自定义事件来简化此操作。

像这样的东西：

```
(function($) {      
    $.fn.myPlugin = function() {    
        return this.each(function(){        

            //Plugin Code Goes Here

            $(this).bind("pluginEdit",function(){
                internalEditFunction();
            });         
        });
    };
})(jQuery); 
```

然后你可以

```
$(selector).trigger("pluginEdit"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-16T12:11:17.163

嗯，我想我可以创建一个实例数组......

```
var plugins = new Array();

plugins.push($('first_editable_section').pluginThing());
plugins.push($('second_editable_section').pluginThing()); 
```

并通过它访问它们。

# sql-server - SQL Server 2005 性能问题

> ID：208263
> 
> 赞同：2
> 
> 时间：2008-10-16T12:04:33.837
> 
> 标签：sql-server, performance

我有一个开发环境和一个 UAT 环境。开发在我们的位置，UAT 在客户的位置。

我们的 DEV 机器是 XEON 4 core @2,33GHz, 4Go RAM with Windows server 2003 UAT 物理机完全一样，但使用了虚拟机（在 VMWare 下）。我不知道用于此 VM 的确切参数。

问题是开发机器上的 SQL Server 运行得很好，而 UAT 上的 SQL Server 运行得非常非常慢。

在 UAT 计算机上打开 SQL Server Management Studio 需要 2 分钟。运行一个简单的选择请求也很慢。数据库非常小（6 GB）。在该服务器上打开任何其他应用程序都可以正常工作。

所以我们认为sql server实例有问题，我必须调查找出原因。

这是我检查的内容：

*   服务器配置类似于我们在 DEV 上的配置。
*   磁盘上有足够的空间
*   处理器未超载（已使用 10% 已达到最大值）
*   记忆力似乎还可以。
*   数据和日志文件设置为自动增长
*   SQL Server 恢复模式：FULL

在数据库日志中似乎至少发生了一次此错误（我只能访问一小部分）：

> 2008-10-14 19:16:54.84 spid55
> 数据库 'xxxxxx' 中文件 'xxxxx_log' 的自动增长已被用户取消或在 6766 毫秒后超时。使用 ALTER DATABASE 为该文件设置较小的 FILEGROWTH 值或显式设置新文件大小。

由于硬盘驱动器上有足够的空间，可能是什么原因？这可能与我的性能问题有关吗？我应该检查什么来找出问题的原因？

我不是 SqlServer 专家，所以如果有人有任何建议，我很想听听。谢谢 ！

* * *

**更新 1：**
SQL Server 恢复模式：FULL
数据库是新的，到目前为止我们还没有执行任何备份。
我不知道日志文件的大小，我会检查一下。

**更新 2：**
Management Studio 问题已解决。

这是由于服务器上没有 Internet 访问，并且 Management Studio 似乎在启动时尝试连接： [http ://weblogs.sqlteam.com/tarad/archive/2006/10/05/13676.aspx](http://weblogs.sqlteam.com/tarad/archive/2006/10/05/13676.aspx)

但似乎性能问题与该问题无关。仍在搜索中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-16T12:52:56.440

处理器的虚拟化扩展是否启用？禁用这些可能会导致相当大的性能损失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-16T12:08:55.590

如果不是处理器问题，我想知道网络是否配置不正确。如果它正在尝试几件事并等待连接超时等，那可能会让事情变得非常痛苦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-17T19:37:12.830

1/ 检查 SQL Server 消耗了多少 RAM。对于 4GB RAM 服务器上的小型数据库，我将 SQL Server 设置为仅增长到最大 1GB (1024MB) 的 RAM。

2/ 我正在检查 DB 文件和 LOG 文件的自动增长大小。我们避免使用百分比增长并使用固定的 MB 增长大小（如以 1MB 块增长）。

3/ 确保您定期备份您的事务日志，否则它们只会不断增长。（同时备份整个数据库！）

4/ 你有什么磁盘设置？避免 RAID 5 用于高 IO 系统（使用镜像数据驱动器），将您的 LOGS 和 DATA 文件放在不同的磁盘上，检查您的 RAID 阵列配置是否正确。是否有其他系统在使用这些磁盘？

5/ 使用 SQL Profiler 检查服务器实际在做什么。您可能会惊讶于某些 SQL 代码在繁忙的机器上运行得多么糟糕（以及它在专用机器上运行得多么好）。

祝你好运。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-16T12:27:17.350

听起来像是虚拟机问题。当“在 UAT 机器上打开 SQL Server Management Studio 需要 2 分钟”时 - 如果您在那段时间没有连接到 SQL Server，那么 SQL Server 实例在这种缓慢中几乎没有什么作用。

如果您的意思是连接到本地 SQL Server 需要 2 分钟，那么我会查看内存和 VM 设置。

# user-interface - 您如何控制您的应用程序在哪个监视器上打开？

> ID：208266
> 
> 赞同：25
> 
> 时间：2008-10-16T12:05:20.153
> 
> 标签：user-interface, usability, desktop-application, multiple-monitors

作为工作中的双显示器用户，我注意到应用程序在打开哪个显示器（主显示器或辅助显示器，应用程序打开的最后一个显示器等）方面表现不同。老实说，有些应用程序让我很恼火，因为我希望它们在我的主显示器上打开，如果我希望它们在那里，我会将它们移动到我的辅助显示器上。但是，这些应用程序已经完成并且不受我的控制，所以我想问一下我自己的应用程序可能由使用两个监视器的人运行。

哪些类型的控件可用于允许人们指定您的应用程序在哪个监视器上打开，允许应用程序“记住”它在关闭并在那里重新打开时所在的监视器，以及强制应用程序在特定监视器上启动?

我正在寻找所有操作系统和编程语言的解决方案，尽管我猜测不同的操作系统和语言会有不同的控制。

# 相关问题

*   [是什么决定了我的应用程序在哪个监视器上运行？](https://stackoverflow.com/questions/52755/what-determines-the-monitor-my-app-runs-on)这个问题讨论了现有的应用程序以及它们如何决定在哪个监视器上运行。当前接受的答案提供了可用于控制应用程序在启动时定位的 Windows 功能。
*   [在第二台显示器上启动程序？](https://stackoverflow.com/questions/206400/start-program-on-a-second-monitor)提供了一些 Delphi 解决方案，用于强制应用程序在特定监视器上启动。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-10-16T12:25:26.870

作为一名 Windows 程序员，我控制由我的应用程序创建的 Windows 的启动监视器。将我的应用程序存储在注册表中的最后位置并恢复它，以及 b。缺少存储的信息，将起始位置设置为魔术标志值，Windows 使用其默认逻辑来定位应用程序。随着 MS 改善用户体验，默认逻辑从操作系统更改为操作系统，但倾向于确保应用程序将在用户最有可能查看的任何监视器上打开。

作为具有多显示器 Windows XP / Vista 系统的用户，我会使用 nVidia 桌面管理器，它能够为应用程序设置起始位置，否则没有适当的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-24T16:10:16.993

从传统的 Unix 和 Linux 窗口管理器的角度来看，您无法控制。窗口管理器处理窗口的定位。

您也许可以向窗口管理器提供提示，但应该可以将窗口管理器配置为忽略此类事情。当使用大型虚拟桌面时，从程序中移动或放置窗口很容易引起痛苦。

请参阅：[http ://standards.freedesktop.org/wm-spec/wm-spec-latest.html](http://standards.freedesktop.org/wm-spec/wm-spec-latest.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-03T15:01:16.160

需要考虑的一件事是，监视器配置可能在应用程序调用之间发生了变化（例如，运行在有时可能对接并使用外部监视器的膝上型电脑上）。确保您的应用程序位于可见范围内。

至于 API，有 System.Windows.Forms.Screen 类可以为您提供一些信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-02T17:14:24.437

在 KDE 4.13.3 中（也许在一些老年人和新人中你可以这样做（翻译可能不准确 - 我使用波兰语版本）：

1.  运行所需的程序
2.  右键单击其标题栏
3.  选择“更多操作”->“其他窗口设置...”（更多选项在“其他程序设置...”下）
4.  转到标签“尺寸和布局”
5.  标记复选框“屏幕”并选择“强制”并选择屏幕编号。该程序的窗口将始终在该屏幕上打开。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-04-25T16:13:54.910

有类似的问题。发现以下内容：

**右键单击窗口标题栏并选择“更多操作”->“窗口管理器设置”。在左侧的列中选择“焦点”。切换选项“活动屏幕跟随鼠标”。**

如果未指定其他默认值，则窗口将出现在当前活动屏幕上。通过上述过程，鼠标位置定义了这个活动屏幕。

希望有帮助，

最好的，BB

# c++ - 在 C++/MFC 中枚举网络共享目录

> ID：208268
> 
> 赞同：2
> 
> 时间：2008-10-16T12:05:47.250
> 
> 标签：c++, mfc, networking, directory

我需要获取当前计算机共享的目录列表及其共享名称。如何在 C++/MFC 中执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-16T12:11:33.013

您可以使用[NetShareEnum](http://msdn.microsoft.com/en-us/library/bb525387(VS.85).aspx)，提供 NULL 作为服务器名称。您需要包含 Lm.h 并将 Netapi32.lib 添加到链接的库列表中，

# c - _never_executed() 的目的是什么？

> ID：208272
> 
> 赞同：2
> 
> 时间：2008-10-16T12:06:54.003
> 
> 标签：c, embedded, c-preprocessor, intrinsics

我以前见过这个宏定义，但从来没有真正知道它的用途。任何人都可以阐明这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-16T13:19:15.387

这是用于优化的编译器内在函数，通常在嵌入式编程中看到。我看到它使用的唯一一次是在 switch 语句的“默认”中断言变量的范围有限（为了更好的优化）。例子：

```
 /* Get DTMF index */
 switch(dtmf)
 {
     case '0':
     case '1':
     case '2':
     case '3':
     case '4':
     case '5':
     case '6':
     case '7':
     case '8':
     case '9':
         /* Handle numeric DTMF */
         index = dtmf - '0';
         break;
     case 'A':
     case 'B':
     case 'C':
     case 'D':
         index = dtmf - 'A' + 10;
         break:
     default:
         _never_executed();
         break;
 } 
```

可能不适用于所有编译器...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-16T13:16:36.377

我以前没见过，但谷歌的 STFW 首先提出了这个问题，然后是其他一些参考资料。从它所说的来看，这显然是对编译器的一个提示，即代码永远不会执行——因此编译器可以进行优化。可以合理地将其视为将 'assert(0)' 置于其位置的借口——因为代码永远不会被执行，断言永远不会触发。当然，如果断言确实触发了，那么你就知道你遇到了问题。

另请参阅经典论文[“Can't Happen or /* NOTREACHED */ or Real Programs Dump Core”](http://www.literateprogramming.com/canthappen.pdf)。

值得一读，即使是现在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-16T16:15:01.663

作为一个仅供参考，MSVC 具有类似的东西（具有更多的灵活性），即[`__assume()`](http://msdn.microsoft.com/en-us/library/1b3fsfxw(VS.80).aspx?ppud=4)内在的。他们举了一个例子：

```
int main(int p)
{
   switch(p){
      case 1:
         func1(1);
         break;
      case 2:
         func1(-1);
         break;
      default:
         __assume(0);
            // This tells the optimizer that the default
            // cannot be reached. As so, it does not have to generate
            // the extra code to check that 'p' has a value 
            // not represented by a case arm. This makes the switch 
            // run faster.
   }
} 
```

我不确定首先支持哪个版本的 MSVC。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-16T12:33:16.680

作为测试的一部分，我以前见过类似的事情。如果它*被*执行，那么你就知道你有一个错误。

# windows - 是否有可能以编程方式找出哪个进程正在通过网络锁定文件

> ID：208283
> 
> 赞同：5
> 
> 时间：2008-10-16T12:11:12.297
> 
> 标签：windows, networking, locking

我在 Windows 2003 服务器上有一个文件，该文件被另一个 Windows 2003 服务器上运行的进程锁定。是否可以找出哪台机器上的哪个进程正在锁定该资源。我不介意我用哪种语言来做这件事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-16T12:13:12.277

[http://technet.microsoft.com/en-us/sysinternals/bb897552.aspx](http://technet.microsoft.com/en-us/sysinternals/bb897552.aspx)

> **文件**
> 
> “net file”命令向您显示其他计算机在您执行该命令的系统上打开的文件列表，但是它会截断长路径名并且不允许您查看远程系统的信息。PsFile 是一个命令行实用程序，它显示系统上远程打开的文件列表，它还允许您按名称或文件标识符关闭打开的文件。
> 
> ...
> 
> **这个怎么运作**
> 
> PsFile 使用平台 SDK 中记录的 NET API。

# cmdb - 寻找务实的CMDB解决方案

> ID：208292
> 
> 赞同：6
> 
> 时间：2008-10-16T12:14:09.077
> 
> 标签：cmdb, itil

我需要一个解决方案来编目我们公司中的许多应用程序（超过 100 个少于 1000 个）。

现在我们正在使用电子表格，并为每个应用程序填写名称、简短描述、联系人和维护者（内部或供应商）。目的是将此列表用于 IT 规划和事件管理（影响估计等）。为了做到这一点，我们至少需要开始添加诸如“取决于”、“部分”或“取代”之类的关系。如果未来的解决方案允许标记、向每个条目添加索引键值对、注释和附件，这也会很有用。

我们不想发现所有已部署的应用程序实例、管理配置设置、集成监控具有复杂的安全设置并被隐藏在元元模式中。任何需要专门管理员的东西已经太繁重了。

我们有以下非功能性需求：

*   应该允许多个用户同时工作
*   每个更改都应进行版本控制
*   轻松导出到 XML 或其他一些易于解析的格式

到目前为止，我们已经考虑了以下几点：

*   将电子表格放在 Confluence wiki 上，我们可以在其中通过 WebDav 对其进行编辑（并获得锁定和版本控制）
*   使用 Confluence wiki，因为它提供标记、层次结构、元数据和链接。唯一的问题是 wiki 格式过于自由，如果我们决定迁移到另一个系统，可能难以提取信息。
*   DabbleDB.com - 拥有我们需要的一切，但不幸的是数据不应该离开防火墙。
*   OneCMDB.org - 我不确定捕获临时信息和发展架构有多容易。会欣赏经验。
*   Zenoss.com - 还没有检查过。看起来太专注于网络管理。
*   轻量级注册表（Mule Galaxy、WSO2 注册表）——不确定这是否是适合这项工作的工具，尽管它们提供了我们需要的许多工具（属性、标签、版本、生命周期）。
*   BMC Atrium - 复杂的企业政治需要一些不必要的程序。除非它提供一些巨大的好处，否则我们宁愿坚持使用开源。

我对成功完成类似工作或对上述某些方法有经验的人的反馈/想法感兴趣。此外，我会很感激有关常见陷阱和建议的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-16T22:18:52.537

这是为一个漂亮、简单的网络应用程序框架量身定做的。选择你最喜欢的框架。为应用程序定义简单的数据模型。迁移您的电子表格。添加您的其他关系（依赖、取代、部分）并发展您的应用程序。

任何好的 web 应用程序框架都会为这组简单的数据提供令人愉快的数据映射。

这是一个很好的技能建设者。将新的 Web 应用程序框架引入组织可能是一个很好的概念证明。

* * *

很难避免“基础设施”问题。专门构建的资产管理工具通常是庞大而复杂的。甚至[CalemEAM](http://eam.calemeam.com/eam/)也相当复杂。

既然你有很多应用程序，我猜你已经有了一个 Web 应用程序框架和一些使用它的技能。但是，根据您的评论，您听起来好像没有首选的网络应用程序。框架。

这让我猜测，也许您的 100 到 1000 种应用程序是桌面软件和 Web 应用程序的混合体，没有一致的易于使用的框架。

我是一个 python 偏执狂，所以我不熟悉你建议的任何网络框架。最重要的技术指导来源应该是构建这 100 到 1000 多个应用程序的人——他们使用什么 Web 框架？他们希望使用哪一个？如果他们开始一个新项目（比如你的），他们会使用哪一个？

你不想成为鞋匠的孩子——村里唯一一个光着脚的人。您希望使用组织首选的工具集构建简单的小型资产管理应用程序（它只有 3 个表）。

* * *

好吧，有了 10% 的 Java 和 50% 的供应商系统，没有“首选”的 Web 应用程序框架。

选择 1：选择一个基于 Java 的相当完整的框架。尝试使用 Struts 和 iBatis 作为起点。构建最小表，即从 POJO 到表的最小 iBatis 映射。定义最小的默认表单——一个列表，每个表的一个细节。在最小的表集上为最小的表单集创建最小的管理前端。将电子表格中的最小加载程序写入表格。

然后删除电子表格，永不回头。

选择 2：学习 Python。使用 Django。您定义最小模型并使用 Django 管理界面。大约 20 分钟就完成了。严重地。然后将电子表格中的最小加载程序写入表格。这是一个很难卖的东西，所以不要卖它，就去做吧。

无论哪种方式，删除电子表格，永远不要回头。

现在，一切都必须通过基于网络的数据库来完成。没有理由。将**所有**报告添加到此界面。不允许下载到电子表格。使应用程序易于添加、更改和修改。

一旦你能控制混乱，你就会寻求宽恕。

你永远无法证明这一点——你无法证明任何有组织的投资回报率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-16T12:30:55.657

听起来您需要一个资产数据库。你可以找到很多市售商品，但那有什么好玩的呢？如果您使用 MS Access 2007，他们有一个[用于构建资产数据库的模板](http://office.microsoft.com/en-us/templates/TC012253421033.aspx?CategoryID=CT101428241033)，您可以免费下载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-11-11T18:02:27.823

你也许可以看看[COSMOS](http://www.eclipse.org/cosmos/)，一个[CMDBf](http://www.cmdbf.org/)规范的实现

# oracle - 我们能否配置 Oracle ADF Faces 以生成有效的 XHTML？

> ID：208295
> 
> 赞同：2
> 
> 时间：2008-10-16T12:15:31.367
> 
> 标签：oracle, oracle-adf, xhtml

我们在一个新的 Web 项目中使用[Oracle ADF Faces 。](https://en.wikipedia.org/wiki/Oracle_Application_Development_Framework#History)我一直在寻找具有[渐进增强](https://en.wikipedia.org/wiki/Progressive_enhancement)和有效[XHTML](http://en.wikipedia.org/wiki/XHTML)输出的不显眼的用户体验。然而，ADF Faces 似乎会产生丑陋的、非验证（基于表格）的 HTML 输出，这让我想起了 1994 年使用它们的标准组件时。

有没有办法配置 ADF Faces 或为组件创建模板，以便我们可以完全控制生成的 (X)HTML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-07T15:49:32.990

ADF 是 BC4J 的延续，因此这就是您再次遇到非验证 HTML 的原因。相反，尝试[编写您自己的自定义 UI 组件](http://www.oracle.com/technology/products/jdev/101/collateral/101/adffaces/howto_customcomponents.html)。

不幸的是，就 Oracle 的帮助而言，Stack Overflow 并没有取得太多成果。也许询问 Oracle OTN 会有所帮助。也许也会引发元链接问题。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2009-01-02T19:50:13.753

您不能影响 ADF 输出 HTML 代码。并且重写所有[JSF](http://en.wikipedia.org/wiki/JavaServer_Faces)组件不是一种选择。您可以使用[Google Chrome](http://en.wikipedia.org/wiki/Google_Chrome)为您格式化 HTML 代码。

# unit-testing - 管理单元测试的维护负担

> ID：208302
> 
> 赞同：27
> 
> 时间：2008-10-16T12:18:35.057
> 
> 标签：unit-testing, tdd, agile

编码测试优先，我发现我的代码可能有 3/4 是单元测试；如果我真的很极端，并且除了修复失败的单元测试之外没有编写任何代码，那么这个比率会更高。维护所有这些单元测试给代码更改增加了巨大的惯性。早些时候，我把它吸起来并修复它们。一旦有压力，我就会得到一个`broken_unit_tests`目录来重新访问“当有时间”。在设计有时间具体化之前，感觉就像 TDD 过早地实现了高覆盖率。

我如何找到摆脱这种困境的方法，并开始像我应该接受的那样迎接不断变化的需求？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-10-16T12:29:30.917

将程序员纪律方面放在一边...（如果您可以在不进行伙伴构建或不修复所有测试的情况下进行签入，这是个人的事情。敏捷假设有严格的纪律.. 和勇气与支持保持在正确的道路上在压力之下 ：），

如果您发现进行单个更改未通过多次测试，则表明您的测试有问题。当您开始使用 TDD 时，**脆弱的测试很常见……如果您花费更多时间修复测试而不是修复代码……停下来，呼吸和反思。**解决疾病而不是症状。
如果你有一些代码片段，我们可以讨论。就目前而言，我认为我无法为您提供太多帮助...
**指导方针：**测试失败的原因只有一个。相反，每个失败的测试都应该指出缺陷的确切独特位置。两个测试不应由于相同的更改而失败。除非您正在进行架构级别的彻底更改，否则这应该很少见。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-10-16T12:25:30.300

我认为你有相反的方式。在实施可能破坏单元测试的更改时，您应该首先更新单元测试。这样，您将永远不会得到损坏的单元测试和工作代码。您将有一个失败的单元测试，因为代码尚未准备好，或者两个部分都可以正常工作。

如果您认为这是一种开销，请考虑一下您将来会在错误修复上节省的时间。

您也可以尝试在短周期内工作。即代替

1.  做很多改变
2.  修复大量单元测试
3.  重复

尝试

1.  计划一个小改变
2.  更改相关的单元测试
3.  更改相关代码
4.  重复

当最后期限迫在眉睫并且经理在你肩上时，你很难通过大量积压的单元测试。当您养成习惯时，同时编写代码和测试实际上很容易。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-16T12:24:09.773

单元测试应该是相当不可变的。

如果您正在编写测试，编写代码以使该测试通过，并破坏您的其他测试，那么您的新代码应该被认为是“错误的”。

现在显然，在某些情况下，如果您更改 API 合同，您可能需要重写测试，但在大多数情况下，您不应该将“重写测试”视为执行 TDD 的有效方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-16T12:23:29.993

我想这个想法是抛弃不再测试适当行为的单元测试并编写新的。以反映行为而不是实现的方式编写单元测试也很好。因此它们将更加独立于设计。

一般来说，无论如何我都不是 TDD 的拥护者。:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-16T12:28:24.507

您的测试可能不够集中，或者您的系统中有太多依赖项。

当我更改代码中非常重要的方面时，我大部分时间所做的就是开发一个新的测试套件来进行更改，但不会破坏旧的测试套件，因此该软件以新旧方式并行工作，一次我对我的重构很满意，我删除了旧方式代码和旧方式的测试。

不确定它是否100％清楚...

# java - 我可以清理堆栈跟踪吗？

> ID：208306
> 
> 赞同：0
> 
> 时间：2008-10-16T12:19:44.493
> 
> 标签：java, recursion

我知道我可以使用 Thread.getAllStackTraces() 获取堆栈跟踪（它返回 Map，但 clear 不起作用）。当我运行递归方法时，由于堆栈跟踪太大，我会得到异常，有没有办法清除它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-16T12:24:03.300

导致问题的不是堆栈跟踪，而是堆栈本身。每次调用方法时，都会将信息放入堆栈，以便您返回调用方法。如果你递归的足够多，最终你会填满堆栈上的所有空间（由最大大小限制）并且你的程序会停止。堆栈跟踪只是向您显示您的调用历史记录。您可能正在进行无限递归，需要在程序失败之前找到一种方法来阻止它。要么你的算法有错误，要么你需要在你可用的内存范围内找到一种不同的方法来解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-16T12:24:07.573

如果由于递归失控而导致堆栈溢出，那么您就不走运了。堆栈的内容需要从函数调用返回，没有办法明智地“清理它”。问题不在于 getAllStackTraces() 返回的 Map，而在于堆栈的实际内容。

您需要重组您的代码，使其不会递归到如此深的层次。

或者，您可以调查是否有可能增加堆栈的大小，但要求非标准堆栈大小通常是有问题的实现的标志。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2008-10-16T13:53:15.600

首先检查您的程序在其代码中没有导致无限递归导致堆栈溢出的错误。

如果不是这种情况，您可以尝试为您的程序分配更多的堆栈空间。在 Linux 下，您可以使用`ulimit`bash 命令来执行此操作，例如：

```
ulimit -s 8000 
```

甚至

```
ulimit -s unlimited 
```

如果您真的需要展开堆栈，您可以在 C 中使用 setjmp/longjump 或使用异常或延续，例如：

```
struct ClearStack {} ;

void myLongComputationWhichCausesStackOverflow() {
  // do something
  if (needsToClearTheStack)
    throw ClearStack() ;
  // do something else
}

int main(int ac, char *av[]) {
  try {
    mylongcomputation() ;
    // continuation of program
    // no stack clearing occurred
  }
  catch(const ClearStack & cs) {
    // the stack was cleared and do something appropriately
  }
} 
```

它做你想做的事，但它并不是一种很好的编程风格。请注意，您需要想出一种方法来知道何时清除堆栈。这可能非常困难，因为您不知道还剩下多少堆栈空间，或者调用函数是否会溢出堆栈！

# asp.net - 判断应用程序是 ASP.NET 1.1 还是 ASP.NET 2.0 的方法

> ID：208316
> 
> 赞同：3
> 
> 时间：2008-10-16T12:21:36.703
> 
> 标签：asp.net

如何判断应用程序是 ASP.NET 2.0 还是 ASP.NET 1.1。这是在 C# 中

我没有源代码，也无权访问 IIS 管理器。但我可以 ftp 并检查 ASPX 文件。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-16T12:22:16.173

如果您可以收到一条错误消息，它将在页面底部告诉您正在使用的框架版本。

或者，如果您可以上传文件，您可以上传包含代码的 aspx 页面以输出框架版本：

```
<%@ Page Language="C#" EnableSessionState="False" EnableViewState="False" Trace="False" Debug="False" %>

<script language="C#" runat="server">

protected void Page_Load(object s, EventArgs e)
{
    Response.Write(System.Environment.Version);
}
</script> 
```

这只是输入，可能有语法或其他代码错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-16T12:37:43.507

1.  下载应用程序的 DLL。
2.  用反射器打开它们
3.  分析 dll 并查找“取决于”

如果它尝试加载 System.dll（或任何核心类型），您将能够看到它依赖于哪个版本的核心组件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-16T12:32:07.230

在 2.0 中，@Page 指令发生了变化，添加了 CodeFile 属性。

所以，如果你找到那个属性，它就是 2.0。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-16T12:33:51.983

或者你可以故意上传一个 test.aspx 导致抛出异常；默认的 ASP.NET 黄屏死机将显示运行时版本。

:-D

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-16T17:10:43.767

您可以通过浏览器执行此操作 - 只需查看“X-AspNet-Version”的响应标头

在 FireFox 中，您可以使用 Web 开发人员工具栏来执行此操作... -> 信息 -> 查看响应标头。

您还可以使用[Fiddler检查响应标头](http://www.fiddlertool.com/fiddler/)

[或者只使用此处](http://www.viewhtml.com)的 ViewHtml 网站查看响应标头

# language-agnostic - 自动化测试订单

> ID：208325
> 
> 赞同：3
> 
> 时间：2008-10-16T12:24:03.563
> 
> 标签：language-agnostic

我需要一种方法来自动化我们的测试和生产网站上的测试订单。我正在考虑使用 iMacro 之类的东西，但我认为必须有更好的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-16T13:02:56.373

另一个不错的 FF 插件是[Selenium IDE](https://addons.mozilla.org/en-US/firefox/addon/2079)，它似乎比 iMacros 的插件功能更丰富。您可以付费购买扩展版本（[Selenium](http://selenium.openqa.org/)、[iMacros](http://www.iopus.com/)），包括命令行脚本、记录页面计时等。

我只是在评估两者，看看哪个更好地处理 Flash，而 Selenium 希望将代码添加到动作脚本中，而我们的旧 Flash 游戏并不像使用基于 iMacros 坐标的点击那么简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-16T12:26:46.163

不知道你在说什么样的“秩序”，真的很难说。

我怀疑您并不*想*在生产系统上创建测试订单。

# c# - 已部署的 Web 部件未显示在“Web 部件库：新 Web 部件”中

> ID：208333
> 
> 赞同：2
> 
> 时间：2008-10-16T12:26:25.867
> 
> 标签：c#, sharepoint, moss, web-parts

我拿了一个 wsp 文件，然后像往常一样做了我的**stsadm -o addolution**。然后我进入*中央管理->解决方案管理*，它显示得很好。然后我部署了 Web 部件，到目前为止没有任何问题。

问题是当我将它添加到 Web 部件库（*Web 部件库：新 Web 部件*）时，通常 Web 部件在列表中，我选中它旁边的框并单击**填充库**，但它没有显示在列表？我是否会在 manifest.xml 中遗漏一些东西来导致这种情况？我刚刚以*完全相同的*方式编写并部署了另一个 Web 部件，它运行良好。此外，我编写了一个虚拟 webpart，它只打印“工作”，并尝试它得到相同的结果。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-17T02:11:30.617

哇...原来我所缺少的只是我班上的“公开”声明！？！

我觉得自己像个白痴。而且，我确实必须手动删除它才能使其被识别。谢谢大家！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-16T14:05:58.290

检查 .webpart 文件是否已部署到您网站的 wpcatalog 文件夹。根据配置 Web 应用程序时指定的目录，您应该可以在类似于以下位置的位置找到它：

c:\Inetpub\wwwroot\wss\VirtualDirectories\80\wpcatalog

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T11:38:59.917

我一直在处理的 Web 部件遇到了同样的问题，但在我的情况下，我只是忘记**将 Web 部件添加到“功能中的项目”**框中。去做这个：

1.  在*解决方案资源管理器*中展开功能的子树。
2.  双击以 结尾的项目`.feature`。
3.  您应该会看到一个带有功能标题、描述和范围的新选项卡。在它们下面有两个盒子，中间有按钮。从左侧框中选择您的 Web 部件，然后按`>`按钮（在图像上标记）将其添加到功能。

`Manifest`注意：如果您知道自己在做什么，也可以通过按下底部的按钮并手动编辑清单文件来执行此操作。

![将 Web 部件添加到功能](https://i.stack.imgur.com/USzEu.png)

这确实可以帮助其他 SharePoint 初学者。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-16T13:16:27.670

我有时也有同样的行为。最后，我们编写了一个 cmd 工具，它运行“stsadm -o addolution”，然后将 Web 部件的所有 xml 文件添加到 Web 部件库。

有来源（一点点编辑）：

```
string cmd_StsAdm = @"C:\Program files\Common files\Microsoft Shared\web server extensions\12\BIN\stsadm.exe";
string url_Site = "http://localhost";
string url_Web = "http://localhost";
if ( string.IsNullOrEmpty( url_Web ) ) { url_Web = url_Web; }

Console.WriteLine( "Deleting sharepoint solution" );
string args_DeleteSolution = string.Format( "-o deletesolution -name \"{0}\" -override", startInfo.fileNameWsp );
ShellWait( cmd_StsAdm, args_DeleteSolution );

string filePathWsp = "**** path to wsp file ****";
Console.WriteLine( "Adding sharepoint solution" );
string args_AddSolution = string.Format( "-o addsolution -filename \"{0}\"", filePathWsp );
ShellWait( cmd_StsAdm, args_AddSolution );

Console.WriteLine( "Deploy sharepoint solution" );
string args_DeploySolution = "-o deploysolution -name \"{0}\" -local -allowGacDeployment -url \"{1}\" -force";
args_DeploySolution = string.Format( args_DeploySolution, startInfo.fileNameWsp, url_Web );
ShellWait( cmd_StsAdm, args_DeploySolution );

int counter = 0;
foreach ( CWebPartVytvoreniInfo wpRslt in solutionInfo.WebParts ) {
    counter++;
    string msg = string.Format( "Aktivace web part {0} - {1} z {2}", wpRslt.Info.Nazev, counter, solutionInfo.WebParts.Count );
    Console.WriteLine( msg );
    string args_ActivateFeature = "-o activatefeature -id {0} -url {1}";
    args_ActivateFeature = string.Format( args_ActivateFeature, wpRslt.Info.ID, url_Site );
    ShellWait( cmd_StsAdm, args_ActivateFeature );
}

Console.WriteLine( "Connecting to sharepoint site" );
using ( Microsoft.SharePoint.SPSite site = new Microsoft.SharePoint.SPSite( url_Site ) ) {
    Microsoft.SharePoint.SPList ctg_WebParts = site.GetCatalog( Microsoft.SharePoint.SPListTemplateType.WebPartCatalog );

    counter = 0;
    foreach ( WebPartInfo wpInfo in solutionInfo.WebParts ) {
        counter++;
        string dirPath = System.IO.Path.Combine( wpInfo.DirectoryPath );
        string fileName = wpRslt.Info.Nazev + ".webpart";
        string filePath = System.IO.Path.Combine( dirPath, fileName );

        string msg = string.Format( "Uploading file '{0}' - {1} z {2}", fileName, counter, solutionInfo.WebParts.Count );
        Console.WriteLine( msg );
        using ( System.IO.FileStream fstrm = OtevritSoubor( filePath ) ) {
            ctg_WebParts.RootFolder.Files.Add( fileName, fstrm, true );
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-16T20:42:37.927

我发现如果我部署了一个之前被破坏的 web 部件，我必须在删除解决方案后手动删除它，然后再重新添加解决方案

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-03T07:15:44.850

Target .NET Framework 对我来说是个问题。我的目标是 .NET 3.5，但这对我不起作用。所以我改为使用 .NET 3.0，效果很好。

# java - 尝试使用 JMockit Coverage 时出现 NoClassDefFoundError

> ID：208345
> 
> 赞同：2
> 
> 时间：2008-10-16T12:29:48.980
> 
> 标签：java, junit, jmockit

我正在尝试使用 JMockit 的代码覆盖能力。使用 JVM 参数

```
-javaagent:jmockit.jar=coverage=.*MyClass.java:html:: 
```

我能够运行我的测试（jmockit.jar 和 coverage.jar 在类路径上），不幸的是我的日志文件说：

```
Loaded external tool: mockit.coverage.CodeCoverage=.*MyClass.java:html::
Loaded external tool: mockit.integration.junit3.JUnitTestCaseDecorator
Loaded external tool: mockit.integration.junit4.JUnit4ClassRunnerDecorator
Exception in thread "Thread-0" java.lang.NoClassDefFoundError
    at mockit.coverage.CodeCoverage$OutputFileGenerator.run(CodeCoverage.java:56) 
```

...并且没有生成覆盖文件。有没有人让 JMockit Coverage 工作？如果是这样，关于是什么导致此错误的任何想法？谢谢...

**回答**：~~我需要为引导条目添加覆盖范围，而不仅仅是用户条目（在 Eclipse 运行配置中）~~

**实际答案**实际答案是我使用 JUnit 3 运行测试，但覆盖范围需要 JUnit 4。这解决了问题，我不必添加任何引导条目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-17T08:42:27.847

我使用 JUnit 3 运行测试，但覆盖范围需要 JUnit 4。这解决了问题，我不必添加任何引导条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-16T13:17:01.820

随机猜测...... jmockit 使用的类路径上是否有 coverage.jar - 它可能是不同的？

# windows-installer - 为什么枚举已安装的 MSI 包这么慢？

> ID：208355
> 
> 赞同：3
> 
> 时间：2008-10-16T12:31:40.570
> 
> 标签：windows-installer, wmi

[这是这个问题](https://stackoverflow.com/questions/198087/how-do-i-list-installed-msi-from-the-command-line)的后续。

我正在使用这个稍作修改的脚本来枚举所有已安装的 MSI 包：

```
strComputer = "."

Set objWMIService = GetObject("winmgmts:" & _
    "{impersonationLevel=impersonate}!\\" & _
    strComputer & _
    "\root\cimv2")

Set colSoftware = objWMIService.ExecQuery _
    ("SELECT * FROM Win32_Product")   

If colSoftware.Count > 0 Then
    For Each objSoftware in colSoftware
        WScript.Echo objSoftware.Caption & vbtab & _
        objSoftware.Version
    Next
Else
    WScript.Echo "Cannot retrieve software from this computer."
End If 
```

然而，令人惊讶的是其糟糕的表现。枚举我的 XP 机器上安装的 34 个 MSI 软件包需要 3 到 5 分钟！

相比之下，旁边的 Linux 机器需要 7 秒才能枚举 1400+ RPM...*叹息*

这有什么线索吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-12-01T20:02:11.417

极慢是枚举 Win32_Products 的已知/常见问题

如果您需要替代解决方案，请考虑使用“卸载”注册表项构建您自己的产品列表（如您提到的[原始问题的答案之一中所建议的那样）。](https://stackoverflow.com/questions/198087/how-do-i-list-installed-msi-from-the-command-line)

枚举卸载的一些一般参考：

*   TechNet VBScript 示例：[列出已安装的软件](http://gallery.technet.microsoft.com/ScriptCenter/en-us/28946a87-b306-41e2-a84d-2a1915fd1074)
*   Microsoft KB：[如何枚举可在计算机上卸载的软件产品](http://support.microsoft.com/kb/821775)

要*远程*执行此操作，请使用 WMI 注册表类[StdRegProv](http://msdn.microsoft.com/en-us/library/aa393664%28VS.85%29.aspx)。TechNet 甚至方便地提供了一个使用 StdRegProv 做你想做的事情的简单示例： [如何列出给定机器上所有已安装的应用程序](http://technet.microsoft.com/en-us/library/ee692772.aspx#EBAA)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2011-04-19T20:02:34.670

Win32_Product WMI 类非常慢，因为它正在执行一致性检查 - 每次使用它时都使用 Msiexec.exe 处理每个包。

在此页面上使用更好的方法检查问题和 vbscript 代码：http: [//csi-windows.com/toolkit/288-win32product-wmi-class-replacement](http://csi-windows.com/toolkit/288-win32product-wmi-class-replacement)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-31T11:41:45.687

当您使用在 msi.h 中声明的 api 函数时，您的速度非常快。我将 api 用于我的软件[software-uptodate](http://www.software-uptodate.de)并且枚举数百个数据包需要一秒钟。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-16T13:04:29.613

我怀疑是网络问题，Wireshark 证明我是对的。

Windows Installer 似乎很高兴地尝试重新打开所有原始 .msi 文件，包括那些存在于网络共享上的文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-21T03:30:36.890

这对我有用，并且避免了 WMI 方法的缓慢：

```
Dim installer
Set installer = CreateObject("WindowsInstaller.Installer")
Dim productCode, productName
For Each productCode In installer.Products
    productName = installer.ProductInfo(productCode, "ProductName")
    WScript.Echo productCode & " , " & productName
Next 
```

[从http://msdn.microsoft.com/en-us/library/windows/desktop/aa369432(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa369432%28v=vs.85%29.aspx)了解有关该`Installer`对象的更多信息

# jsp-tags - 创建自定义 JSP 标记

> ID：208367
> 
> 赞同：0
> 
> 时间：2008-10-16T12:34:05.480
> 
> 标签：jsp-tags

我正在尝试创建一个自定义 JSP 标记，该标记将采用一个数组对象并在 HTML 表中显示该标记的元素。有没有人有关于如何做到这一点的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-16T12:45:36.377

你的意思是像[displayTag](http://displaytag.sourceforge.net/11/)吗？这可以从对象列表中形成表格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-16T13:02:27.700

正如 Phill 提到的，Display Tag 标签库对此非常有用，但实际上使用 JSTL 很容易做到：

```
<%@ taglib uri="http://java.sun.com/jstl/core" prefix="c" %>
.
.
.
<table summary="">
  <thead>
    <tr>
      <th>Property 1</th>
      <th>Property 2</th>
    </tr>
  </thead>
  <tbody>
  <c:forEach var="item" items="${someArrayObject}">
    <tr>
      <td><c:out value="${item.property1}" /></td>
      <td><c:out value="${item.property2}" /></td>
    </tr>
  </c:forEach>
  </tbody>
</table> 
```

根据您的需要，自定义标记库可能会过大。

# flash - 如何更改 FLVPlaybackCaptioning 组件用于字幕的字体？

> ID：208368
> 
> 赞同：0
> 
> 时间：2008-10-16T12:35:20.827
> 
> 标签：flash, actionscript-3

如何设置 FLVPlaybackCaptioning 组件用于字幕的字体？使用 textarea 的 style 属性没有任何作用，使用 TextFormat 会使文本变为空白，即使字体已被嵌入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-16T13:35:12.047

似乎字体以及文本的其他属性是在读取字幕的 XML 文件中指定的（这来自[文档](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/fl/video/FLVPlaybackCaptioning.html)）：

```
<?xml version="1.0" encoding="UTF-8"?>
  <tt xml:lang="en" xmlns="http://www.w3.org/2006/04/ttaf1"  xmlns:tts="http://www.w3.org/2006/04/ttaf1#styling">
      <head>
          <styling>
              <style id="1" tts:textAlign="right"/>
              <style id="2" tts:color="transparent"/>
              <style id="3" style="2" tts:backgroundColor="white"/>
              <style id="4" style="2 3" tts:fontSize="20"/>
          </styling>
      </head>
      <body>
           <div xml:lang="en">
              <p begin="00:00:00.50" dur="500ms">Four score and twenty years ago</p>
              <p begin="00:00:02.50"><span tts:fontFamily="monospaceSansSerif,proportionalSerif,TheOther"tts:fontSize="+2">our forefathers</span> brought forth<br /> on this continent</p>
              <p begin="00:00:04.40" dur="10s" style="1">a <span tts:fontSize="12 px">new</span> <span tts:fontSize="300%">nation</span></p>
              <p begin="00:00:06.50" dur="3">conceived in <span tts:fontWeight="bold" tts:color="#ccc333">liberty</span> <span tts:color="#ccc333">and dedicated to</span> the proposition</p>
              <p begin="00:00:11.50" tts:textAlign="right">that <span tts:fontStyle="italic">all</span> men are created equal.</p>
     <p begin="15s" style="4">The end.</p>
          </div>    
      </body>
  </tt> 
```

所以也许组件不希望你覆盖那些？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-05-18T15:15:32.237

//为您的 FLVPlaybackCaptioning 实例创建一个监听器，监听文本字段/目标的创建，例如。

```
myFLVPlybkcap.addEventListener(CaptionTargetEvent.CAPTION_TARGET_CREATED, captionTargetCreatedHandler); 
```

//然后当发生这种情况时，将文本字段的'defaultTextFormat'设置为您自己的...

```
private function captionTargetCreatedHandler(e:CaptionTargetEvent):void{
  var myTextFormat:TextFormat = new TextFormat();
  myTextFormat.font = "Arial";
  myTextFormat.color = 0x00FF00;
  myTextFormat.size = 18;
  (e.captionTarget as TextField).defaultTextFormat = myTextFormat; 
} 
```

# c++ - wxWidgets：如何在不使用宏且不进入主应用程序循环的情况下初始化 wxApp？

> ID：208373
> 
> 赞同：27
> 
> 时间：2008-10-16T12:36:59.763
> 
> 标签：c++, unit-testing, wxwidgets, googletest

我们需要使用*Google Test Framework为**wxWidgets*应用程序编写单元测试。问题是*wxWidgets*使用宏**IMPLEMENT_APP(MyApp)**来初始化并进入应用程序主循环。这个宏创建了几个函数，包括**int main()**。google 测试框架还为每个测试使用宏定义。

 ******其中一个问题是无法从测试宏中调用 wxWidgets 宏，因为第一个宏会创建函数。因此，我们发现可以将宏替换为以下代码：

```
wxApp* pApp = new MyApp(); 
wxApp::SetInstance(pApp);
wxEntry(argc, argv); 
```

这是一个很好的替代品，但是 wxEntry() 调用会进入原始应用程序循环。如果我们不调用 wxEntry() ，应用程序的某些部分仍然没有初始化。

问题是如何初始化 wxApp 运行所需的一切，而不实际运行它，以便我们能够对它的部分进行单元测试？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-28T12:01:04.293

Just been through this myself with 2.8.10\. The magic is this:

```
// MyWxApp derives from wxApp
wxApp::SetInstance( new MyWxApp() );
wxEntryStart( argc, argv );
wxTheApp->CallOnInit();

// you can create top level-windows here or in OnInit()
...
// do your testing here

wxTheApp->OnRun();
wxTheApp->OnExit();
wxEntryCleanup(); 
```

You can just create a wxApp instance rather than deriving your own class using the technique above.

I'm not sure how you expect to do unit testing of your application without entering the mainloop as many wxWidgets components require the delivery of events to function. The usual approach would be to run unit tests after entering the main loop.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-10T12:35:05.750

```
IMPLEMENT_APP_NO_MAIN(MyApp);
IMPLEMENT_WX_THEME_SUPPORT;

int main(int argc, char *argv[])
{
    wxEntryStart( argc, argv );
    wxTheApp->CallOnInit();
    wxTheApp->OnRun();

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-10-17T16:55:45.857

您想使用以下功能：

```
bool wxEntryStart(int& argc, wxChar **argv) 
```

instead of wxEntry. It doesn't call your app's OnInit() or run the main loop.

You can call `wxTheApp->CallOnInit()` to invoke OnInit() when needed in your tests.

You'll need to use

```
void wxEntryCleanup() 
```

when you're done.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-04-15T14:33:36.470

It looks like doing the tests in the wxApp::OnRun() function can perhaps work. Here's code that tests a dialog's title with cppUnitLite2.

```

#include "wx/wxprec.h"

#ifdef __BORLANDC__
#pragma hdrstop
#endif

#ifndef WX_PRECOMP
    #include "wx/wx.h"
#endif
#include  "wx/app.h"  // use square braces for wx includes: I made quotes to overcome issue in HTML render
#include  "wx/Frame.h"
#include "../CppUnitLite2\src/CppUnitLite2.h"
#include "../CppUnitLite2\src/TestResultStdErr.h" 
#include "../theAppToBeTested/MyDialog.h"
 TEST (MyFirstTest)
{
    // The "Hello World" of the test system
    int a = 102;
    CHECK_EQUAL (102, a);
}

 TEST (MySecondTest)
 {
    MyDialog dlg(NULL);   // instantiate a class derived from wxDialog
    CHECK_EQUAL ("HELLO", dlg.GetTitle()); // Expecting this to fail: title should be "MY DIALOG" 
 }

class MyApp: public wxApp
{
public:
    virtual bool OnInit();
    virtual int OnRun();
};

IMPLEMENT_APP(MyApp)

bool MyApp::OnInit()
{   
    return true;
}

int MyApp::OnRun()
{
    fprintf(stderr, "====================== Running App Unit Tests =============================\n");
    if ( !wxApp::OnInit() )
        return false;

    TestResultStdErr result;
    TestRegistry::Instance().Run(result);   
    fprintf(stderr, "====================== Testing end: %ld errors =============================\n", result.FailureCount() );

    return result.FailureCount(); 
}

```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-10-16T18:42:22.753

你可以扭转局面：

初始化并启动 wxPython 应用程序，包括主循环，然后在应用程序内运行单元测试。我认为在完成所有初始化工作之后，在主循环入口处调用了一个函数。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2008-10-17T00:27:59.267

你试过`IMPLEMENT_APP_NO_MAIN`宏吗？宏定义上方提供的注释表明它可能会执行您需要的操作。

从 <wxWidgets' 源目录>\include\wx.h：

```
// Use this macro if you want to define your own main() or WinMain() function
// and call wxEntry() from there.
#define IMPLEMENT_APP_NO_MAIN(appname)                                      \
   wxAppConsole *wxCreateApp()                                             \
    {                                                                       \
        wxAppConsole::CheckBuildOptions(WX_BUILD_OPTIONS_SIGNATURE,         \
                                        "your program");                    \
        return new appname;                                                 \
    }                                                                       \
    wxAppInitializer                                                        \
        wxTheAppInitializer((wxAppInitializerFunction) wxCreateApp);        \
    DECLARE_APP(appname)                                                    \
    appname& wxGetApp() { return *wx_static_cast(appname*, wxApp::GetInstance()); } 
```

# apache-flex - 大多数 AS3 视频播放器是如何创建的？

> ID：208380
> 
> 赞同：0
> 
> 时间：2008-10-16T12:37:59.853
> 
> 标签：apache-flex, flash, actionscript-3, video, flashplayer-9

大多数 Flash 视频播放器都是以编程方式创建的吗？或者他们使用类中引用的静态按钮来完成？即时创建所有按钮会更好还是无关紧要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-29T23:53:32.737

我发现最简单的方法是使用 AS3 视频组件并根据需要对其进行自定义。例如，播放头会自动为您完成所有擦洗，但您可以控制放置和设计。

这是一个很棒的教程： http: [//www.adobe.com/devnet/flash/articles/skinning_as3_flvcomp_03.html](http://www.adobe.com/devnet/flash/articles/skinning_as3_flvcomp_03.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-16T12:48:36.900

大多数视频播放器尚未使用 AS3，但不同的播放器使用方式不同。这取决于您想要什么级别的可配置性。就我个人而言，我主要以编程方式进行，以便我可以使用 XML 配置文件或 FlashVars 配置所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-11-27T11:04:00.737

如果您使用静态按钮或编程按钮，我认为内部没有太大区别。它更多的是个人喜好。如果我的按钮设计复杂，那么我会导入它们，然后在类中引用它们；但是，例如，如果它们是简单的框和文本，那么我会对它们进行编程，因为它可以提供更好的控制。我个人更喜欢所有东西都在课堂上而不是在舞台上，但有时更容易不在舞台上。

这是一个很好的视频教程[http://www.thetechlabs.com/tutorials/audionvideo/how-to-build-a-as3-videoplayer/](http://www.thetechlabs.com/tutorials/audionvideo/how-to-build-a-as3-videoplayer/)

# c# - 匿名方法 (C# 2.0) 和 lambda 表达式 (C# 3.0) 之间有什么区别？

> ID：208381
> 
> 赞同：46
> 
> 时间：2008-10-16T12:38:33.300
> 
> 标签：c#, methods, expression

C# 2.0 的***匿名方法和 C# 3.0 的******lambda 表达式***有什么区别？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2008-10-16T12:41:05.557

[关于匿名方法的 MSDN 页面对此进行了解释](http://msdn.microsoft.com/en-us/library/0yw3tz5k.aspx)

> 在 2.0 之前的 C# 版本中，声明委托的唯一方法是使用命名方法。C# 2.0 引入了匿名方法，在 C# 3.0 及更高版本中，lambda 表达式取代了匿名方法，成为编写内联代码的首选方式。但是，本主题中有关匿名方法的信息也适用于 lambda 表达式。在一种情况下，匿名方法提供了 lambda 表达式中没有的功能。匿名方法使您可以省略参数列表，这意味着可以将匿名方法转换为具有各种签名的委托。这对于 lambda 表达式是不可能的。有关 lambda 表达式的详细信息，请参阅 Lambda 表达式（C# 编程指南）。

[关于 lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)：

> lambda 表达式是一个匿名函数，可以包含表达式和语句，并可用于创建委托或表达式树类型。所有 lambda 表达式都使用 lambda 运算符 =>，读作“goes to”。lambda 运算符的左侧指定输入参数（如果有），右侧保存表达式或语句块。lambda 表达式 x => x * x 读作“x 乘以 x”。可以将此表达式分配给委托类型，如下所示：

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2008-10-16T14:29:16.183

1.  Lambda expressions can be converted to delegates or expression trees (with some restrictions); anonymous methods can only be converted to delegates
2.  Lambda expressions allow type inference on parameters:
3.  Lambda expressions allow the body to be truncated to just an expression (to return a value) or single statement (in other cases) without braces.
4.  Lambda expressions allow the parameter list to be shortened to just the parameter name when the type can be inferred and when there's only a single parameter
5.  Anonymous methods allow the parameter list to be omitted entirely when it's not used within the body and it doesn't lead to ambiguity

The last point is the only benefit of anonymous methods over lambdas, I believe. It's useful to create a field-like event with a no-op subscription though:

```
public event EventHandler Click = delegate{}; 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2008-10-16T12:59:34.803

1.  匿名方法基本上是没有名称的函数，具有创建闭包的能力。
2.  Lambda 表达式是可转换为匿名方法和表达式树的构造，并且遵循比匿名方法更复杂的类型推断规则。

Eric Lippert（C# 语言设计师）在他的博客中解释了或多或少细微差别的范围：

*   [Lambda 表达式与匿名方法，第一部分](http://blogs.msdn.com/ericlippert/archive/2007/01/10/lambda-expressions-vs-anonymous-methods-part-one.aspx)
*   [Lambda Expressions vs. Anonymous Methods, Part Two](http://blogs.msdn.com/ericlippert/archive/2007/01/11/lambda-expressions-vs-anonymous-methods-part-two.aspx)
*   [Lambda Expressions vs. Anonymous Methods, Part Three](http://blogs.msdn.com/ericlippert/archive/2007/01/12/lambda-expressions-vs-anonymous-methods-part-three.aspx)
*   [Lambda Expressions vs. Anonymous Methods, Part Four](http://blogs.msdn.com/ericlippert/archive/2007/03/26/lambda-expressions-vs-anonymous-methods-part-four.aspx)
*   [Lambda Expressions vs. Anonymous Methods, Part Five](http://blogs.msdn.com/ericlippert/archive/2007/03/28/lambda-expressions-vs-anonymous-methods-part-five.aspx)

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2008-10-16T12:50:29.923

首先，方便：lambda 更容易读写。

其次，表达式：lambda 可以编译为*委托*或*表达式*树（`Expression<T>`对于某些委托类型 T，例如`Func<int,bool>`）。表达式树更令人兴奋，因为它是 LINQ 到进程外数据存储的关键。

```
Func<int,bool> isEven = i => i % 2 == 0;
Expression<Func<int,bool>> isEven = i => i % 2 == 0; 
```

请注意，带有语句体的 lambda 表达式只能编译为委托，而不是`Expression`s：

```
Action a = () => { Console.WriteLine(obj.ToString()); }; 
```

# c# - 弱引用错误？

> ID：208387
> 
> 赞同：5
> 
> 时间：2008-10-16T12:41:25.153
> 
> 标签：c#, .net, memory-leaks

```
[TestMethod]
public void Memory()
{
    var wr = new WeakReference("aaabbb");
    Assert.IsTrue(wr.IsAlive);
    GC.Collect();
    GC.Collect();
    GC.Collect();
    GC.Collect();
    GC.Collect();
    Assert.IsFalse(wr.IsAlive); //<-- fails here
} 
```

它是 .NET 3.5 SP1
谁能告诉我为什么这个测试失败了？

**编辑**：谢谢斯图史密斯

> 您有一个对字符串的引用，因为它是一个常量，所以它可能是被保留的（即不是动态分配的），并且永远不会被收集。

就是这样。将第一行更改为

```
var wr = new WeakReference(new object()); 
```

并且测试通过了:-)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-10-16T12:52:37.500

我可以想到两个可能的原因：

1.  您正在调试中运行。调试中的引用比发布中的引用持续时间更长，并且可能比您想象的更长。
2.  您有一个对字符串的引用，因为它是一个常量，所以它可能是被保留的（即不是动态分配的），并且永远不会被收集。

# .net - 如何在 .NET 应用程序中嵌入 IronPython

> ID：208393
> 
> 赞同：6
> 
> 时间：2008-10-16T12:43:40.000
> 
> 标签：.net, api, ironpython

是否可以通过嵌入 IronPython 之类的脚本语言在 .NET 应用程序中公开 API？

它是如何完成的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-16T20:59:33.010

IronPython 有一个托管 API，可用于从 C#\VB 应用程序执行 IronPython 脚本。

[这](http://www.voidspace.org.uk/ironpython/dlr_hosting.shtml)是将 IronPython 嵌入到 winforms 应用程序中的一个很好的示例。请注意，自那篇文章以来，托管 API 发生了变化。[这篇文章](http://blogs.msdn.com/srivatsn/archive/2008/09/16/hosting-ironpython-made-easier.aspx)展示了一个最新 API 的示例

[您可以在此处](http://compilerlab.members.winisp.net/dlr-spec-hosting.pdf)找到最新规格[注意：截至 2010 年 9 月 7 日，URL 会抛出 404]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-16T12:47:20.943

我没有亲自使用过，但你应该看看[Visual Studio Tools for Applications](http://msdn.microsoft.com/en-us/vsx2008/products/bb933739.aspx)

我不确定是否支持 Iron Python 作为一种语言，但这将是使您的应用程序可编程的最简单途径。

# ms-access - LoadfromText 给出错误 2285（Microsoft Office Access 无法创建输出文件）

> ID：208397
> 
> 赞同：2
> 
> 时间：2008-10-16T12:46:00.447
> 
> 标签：ms-access, vba

使用 loadfromtext 在 access 中导入表单时，我不断收到运行时错误 2285。搜索互联网显示许多人遇到相同问题，但没有解决方案。有谁知道是什么导致了这个错误？

**编辑：** 此外，在包含数据库的文件夹中创建了一个名为“errors.txt”的文件。

**编辑：解决方案的排序：** 我从来没有向我的系统操作员询问修补程序，但该功能确实在家里按预期工作。我今天早上登录，它在这里工作（同时对 ms 访问没有变化）。我猜这是 ms 访问中的内部错误，而不是 vba 代码中的错误。

如果您遇到同样的错误，请尝试冷重启，稍等片刻，希望问题消失。如果您可以列出发生错误的具体情况，则最终可以找到该错误。

最后在相关新闻中：在[http://www.mvps.org/access/modules/mdl0045.htm](http://www.mvps.org/access/modules/mdl0045.htm)可以找到一个访问插件来导出您的表单/表格。这个已经验证可以工作，所以你可以检查问题是在你自己的代码中还是在一些访问错误中。

PS 感谢 Remou 的耐心和帮助。我赞成修补程序的答案，因为它似乎最接近最终的解决方案。

* * *

我的版本是 Office Access 2003(11.8166.8221) SP3

* * *

是的，我正在使用一个新的数据库。我正在尝试建立一个系统，您可以在其中将所有表单定义作为文本文件，以便它们可以进行版本控制，并且有一个基于这些文本表示“编译”的干净数据库。

我使用的代码是基本的

```
Application.LoadFromText acForms, left(filename, len(filename)-len(".frm.txt")), filename 
```

我已经检查（通过使用 F8 单步执行代码）表单名正确，文件名正确并且包括驱动器名

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-31T13:57:56.023

此问题与 Access 源代码控制集成的用户发生的错误有关。

可在此处找到解决方案：http: [//support.microsoft.com/kb/927680](http://support.microsoft.com/kb/927680) “如果 Access 默认文件类型与 Visual SourceSafe 项目中 Access 数据库的文件类型不同，则会出现此问题。”

换句话说：在“工具 -> 选项 -> 高级 -> 默认文件格式”中找到的默认文件类型与您使用 LoadFromText 的数据库的文件格式或您使用 SaveAsText 的数据库的文件格式不同。数据库的文件格式可以在 Access 标题栏中找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-07-26T12:43:01.497

我有同样的问题，我发现我可以通过确保所有 Access 对象都有唯一的名称来解决它。

Access 允许您使用与您为查询或表单指定的名称相同的报告名称。我喜欢这个想法，因为我知道哪些查询位于哪些表格和报告的后面，哪些报告是表格所显示内容的纸质副本。

但是，给这些相同的名称会产生我的 2285 错误。当我给一个唯一的名字时，问题就消失了。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-16T14:44:19.850

SP3 有问题，你应用了修复程序吗？

[http://support.microsoft.com/default.aspx/kb/945674](http://support.microsoft.com/default.aspx/kb/945674)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-09T13:17:58.793

好吧，我解决了将要导入的文件的值放入文本框，并在命令的“文本文件”字段中调用该文本框：

Me!textbox = "C:\temp\" & nameofiletobeimported

Application.LoadFromText acForm, nameofform, Me!textbox

事实上，由于某些我不知道的原因，文本框中的值，正确解决，并没有直接由命令解决....我认为这是该功能的错误

# asp.net - 散列数据以确保它在传输过程中没有损坏

> ID：208399
> 
> 赞同：1
> 
> 时间：2008-10-16T12:46:45.110
> 
> 标签：asp.net, web-services, hash

（在 asp.net 环境下）

我将通过 Web 服务将数据发送到中央服务器，并且我想对数据进行哈希处理以确保它在传输过程中不会被损坏。

我应该使用哪种哈希方法？当 Web 服务传递对象时，我可以散列吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-16T12:50:59.627

我建议使用 WCF，如果您遇到的情况是您实际上可能有较重的流量，同时需要可靠的传输。它支持标准的 SOAP、Binary 等。

它拥有您需要的所有花里胡哨。

干杯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-16T12:48:40.957

最好使用[SHA1](http://en.wikipedia.org/wiki/Sha1)。您也可以使用[MD5](http://en.wikipedia.org/wiki/MD5)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-16T12:56:29.800

您还可以使用 Web Services Enhancements (WSE) 3.0 对您的消息进行签名。好处是一切都内置，所以你不必做大量的工作。

有各种各样的统包安全选项，但听起来您可能对**AnonymousOverCertificate**解决方案最感兴趣。对于您的实现，您可以定义几个非常简单的策略文件。

但请记住，您需要在两边都使用 WSE 3.0。（即客户端和服务器端。）

有关更多信息，请查看下面的链接。它概述了 WSE 3.0。

[Web 服务增强 (WSE) 3.0 中的新增功能](http://msdn.microsoft.com/en-us/library/ms977317.aspx)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-10-16T12:50:16.833

我建议只在数据的字节数组上调用 GetHashcode()。将此值作为 web 服务调用的一部分发送，并验证它们在另一端是否匹配。

# c# - C# 枚举类型安全吗？

> ID：208404
> 
> 赞同：11
> 
> 时间：2008-10-16T12:48:46.837
> 
> 标签：c#, enums

C# 枚举类型安全吗？

如果不是，有什么影响？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-10-16T13:21:37.083

给出一个稍微不同的答案......虽然从铸造的角度来看这些值是类型安全的，但它们在被铸造后仍然未经检查 - 即

```
enum Foo { A = 1, B = 2, C = 3 }    
static void Main()
{
    Foo foo = (Foo)500; // works fine
    Console.WriteLine(foo); // also fine - shows 500
} 
```

出于这个原因，您应该注意检查这些值 - 例如使用 a `default`in a`switch`会引发异常。

~~您还可以通过以下方式检查（对于非`[Flags]`值）：~~

 ~~```
bool isValid = Enum.IsDefined(typeof(Foo), foo); 
```~~  ~~* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-10-16T12:50:51.793

是的，他们是。

以下来自[http://www.csharp-station.com/Tutorials/Lesson17.aspx](http://www.csharp-station.com/Tutorials/Lesson17.aspx)

枚举是强类型常量。它们本质上是唯一的类型，允许您将符号名称分配给整数值。在 C# 传统中，它们是强类型的，这意味着即使其成员的基础值相同，一种类型的枚举也不能隐式分配给另一种类型的枚举。同样，整数类型和枚举不是隐式可互换的。不同枚举类型和整数类型之间的所有赋值都需要显式转换。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-16T15:26:54.333

对于那些建议使用 Enum.IsDefined 进行参数验证的人......不要！Per Brad Abrams（来自[Enum Design 的框架设计指南更新](http://blogs.msdn.com/kcwalina/archive/2004/05/18/134208.aspx)）：

> Enum.IsDefined() 确实存在两个问题。首先，它加载反射和一堆冷类型元数据，使其成为一个看似昂贵的调用。其次，正如注释所暗示的那样，这里存在版本控制问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-16T12:53:04.583

是的。

C#：枚举类型：

- 命名值的类型安全枚举。

-防止编程错误

-用户可以控制底层类型（默认为int）

- 也可以控制基础价值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-16T12:54:17.030

从技术上讲不是，因为您可以将 Enum 表示为其基值（int、long 等）。但是，如果您确保仅通过提供的名称使用枚举，如果您更改枚举值的名称而不更新其引用，您将收到编译时错误。在这方面是的，它是类型安全的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-16T15:19:59.667

我在这里聚会迟到了，但我想抛出一些额外的东西...... Krzysztof Cwalina对[.NET Framework 设计指南的更新。](http://blogs.msdn.com/kcwalina/archive/2004/05/18/134208.aspx)除了上面关于检查以确保将有效值传递给您的枚举的出色提示之外，这还提供了有关如何有效使用它们的其他指导和建议，以及一堆陷阱（尤其是涉及的`Flags`枚举）等。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-13T02:28:36.303

是的，他们是强类型安全的，你不能它不会将枚举常量变量隐式转换为整数值你 hv 2 明确地做数据，例如 enum days { sun, mon } int e = (int ) days.sun; 控制台.writeline(e);

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-05T16:14:44.420

C# 枚举是类型安全的含义

1.  您不能从基础类型隐式转换为实际枚举
2.  此外，您不能将一个枚举的值分配给另一个枚举，即使两个枚举的基础类型相同。始终需要显式强制转换。
3.  枚举使您的代码更具可读性和可维护性。

我遇到了一个关于枚举的优秀视频教程，解释了它们的类型安全性。看看[这里](http://csharp-video-tutorials.blogspot.com/2012/06/part-46-c-tutorial-enums-example.html)和[那里](http://csharp-video-tutorials.blogspot.com/2012/07/part-47-c-tutorial-enums-in-c.html)。

# qt - 在Qt中，对于上下文菜单项，如何隐藏图标的空间

> ID：208411
> 
> 赞同：2
> 
> 时间：2008-10-16T12:50:47.723
> 
> 标签：qt, qt-contextmenu

我正在添加一个`QAction`用于小部件的上下文菜单。现在，动作文本旁边有一些空白。我认为这是与应该存在`QIcon`关联的空间。`QAction`现在我如何隐藏这个空间。我试着做：

```
action->setIcon(QIcon()); 
```

但似乎仍然不起作用。

如果您有办法删除文本前的空格，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-20T22:50:01.007

你不说是哪个平台。但在 Mac 上，您可以通过以下方式完全关闭菜单项：

```
qt_mac_set_menubar_icons( false ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-16T21:25:55.343

我不知道是否有特定于操作或菜单的方法，但您可以使用样式将其删除。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2008-10-17T00:37:34.240

您没有提及您正在使用的 Qt 版本，但 4.4.3 版的 QAction 允许您隐藏图标：
[http](http://doc.trolltech.com/4.4/qaction.html#iconVisibleInMenu-prop)

://doc.trolltech.com/4.4/qaction.html#iconVisibleInMenu-prop 您也可以尝试使用`QAction::QAction ( const QString & text, QObject * parent )`构造函数： http:
[//doc.trolltech.com/4.4/qaction.html#QAction-2](http://doc.trolltech.com/4.4/qaction.html#QAction-2) (4.4.3)
[http://doc.trolltech.com/4.0/qaction.html#QAction-2](http://doc.trolltech.com/4.0/qaction.html#QAction-2) (4.0)
[http: //doc.trolltech.com/3.3/qaction.html#QAction-2](http://doc.trolltech.com/3.3/qaction.html#QAction-2) (3.3)

# c# - 从不同的文件夹渲染部分（不共享）

> ID：208421
> 
> 赞同：268
> 
> 时间：2008-10-16T12:52:51.540
> 
> 标签：c#, asp.net-mvc, renderpartial

如何让视图呈现来自不同文件夹的部分（用户控件）？在预览版 3 中，我曾经使用完整路径调用 RenderUserControl，但升级到预览版 5 后，这不再可能了。相反，我们得到了 RenderPartial 方法，但它没有为我提供我正在寻找的功能。

* * *

## 回答 #1

> 赞同：467
> 
> 时间：2008-10-16T13:02:06.203

只需包含视图的路径和文件扩展名。

剃刀：

```
@Html.Partial("~/Views/AnotherFolder/Messages.cshtml", ViewData.Model.Successes) 
```

ASP.NET 引擎：

```
<% Html.RenderPartial("~/Views/AnotherFolder/Messages.ascx", ViewData.Model.Successes); %> 
```

如果这不是您的问题，能否请您包含您曾经与 RenderUserControl 一起使用的代码？

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-01-02T16:13:17.667

In my case I was using MvcMailer (https://github.com/smsohan/MvcMailer) and wanted to access a partial view from another folder, that wasn't in "Shared." The above solutions didn't work, but using a relative path did.

```
@Html.Partial("../MyViewFolder/Partials/_PartialView", Model.MyObject) 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2015-03-11T16:04:26.507

If you are using this other path a lot of the time you can fix this permanently without having to specify the path all of the time. By default, it is checking for partial views in the View folder and in the Shared folder. But say you want to add one.

Add a class to your Models folder:

```
public class NewViewEngine : RazorViewEngine {

   private static readonly string[] NEW_PARTIAL_VIEW_FORMATS = new[] {
      "~/Views/Foo/{0}.cshtml",
      "~/Views/Shared/Bar/{0}.cshtml"
   };

   public NewViewEngine() {
      // Keep existing locations in sync
      base.PartialViewLocationFormats = base.PartialViewLocationFormats.Union(NEW_PARTIAL_VIEW_FORMATS).ToArray();
   }
} 
```

Then in your Global.asax.cs file, add the following line:

```
ViewEngines.Engines.Add(new NewViewEngine()); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2020-04-15T15:12:39.210

For readers using ASP.NET Core 2.1 or later and wanting to use [Partial Tag Helper](https://docs.microsoft.com/en-us/aspnet/core/mvc/views/tag-helpers/built-in/partial-tag-helper?view=aspnetcore-3.1) syntax, try this:

```
<partial name="~/Views/Folder/_PartialName.cshtml" /> 
```

The tilde (~) is optional.

The information at [https://docs.microsoft.com/en-us/aspnet/core/mvc/views/partial?view=aspnetcore-3.1#partial-tag-helper](https://docs.microsoft.com/en-us/aspnet/core/mvc/views/partial?view=aspnetcore-3.1#partial-tag-helper) is helpful too.

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2010-06-27T08:49:22.940

对于位于 Views/Account 文件夹中名为 myPartial.ascx 的用户控件，如下所示：

```
<%Html.RenderPartial("~/Views/Account/myPartial.ascx");%> 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-09-13T00:51:55.040

我创建了一个似乎运行良好的解决方法。我发现需要切换到不同控制器的上下文以进行操作名称查找、视图查找等。为了实现这一点，我创建了一个新的扩展方法`HtmlHelper`：

```
public static IDisposable ControllerContextRegion(
    this HtmlHelper html, 
    string controllerName)
{
    return new ControllerContextRegion(html.ViewContext.RouteData, controllerName);
} 
```

`ControllerContextRegion`定义为：

```
internal class ControllerContextRegion : IDisposable
{
    private readonly RouteData routeData;
    private readonly string previousControllerName;

    public ControllerContextRegion(RouteData routeData, string controllerName)
    {
        this.routeData = routeData;
        this.previousControllerName = routeData.GetRequiredString("controller");
        this.SetControllerName(controllerName);
    }

    public void Dispose()
    {
        this.SetControllerName(this.previousControllerName);
    }

    private void SetControllerName(string controllerName)
    {
        this.routeData.Values["controller"] = controllerName;
    }
} 
```

在视图中使用它的方式如下：

```
@using (Html.ControllerContextRegion("Foo")) {
    // Html.Action, Html.Partial, etc. now looks things up as though
    // FooController was our controller.
} 
```

There may be unwanted side effects for this if your code requires the `controller` route component to not change, but in our code so far, there doesn't seem to be any negatives to this approach.

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-10-20T23:52:21.817

WebFormsViewEngine 所基于的 VirtualPathProviderViewEngine 应该支持路径前面的“~”和“/”字符，因此您上面的示例应该可以工作。

我注意到您的示例使用路径“~/Account/myPartial.ascx”，但您提到您的用户控件位于 Views/Account 文件夹中。你有没有尝试过

> `<%Html.RenderPartial("~/Views/Account/myPartial.ascx");%>`

或者这只是你问题中的一个错字？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-01-09T12:38:48.763

你应该试试这个

```
~/Views/Shared/parts/UMFview.ascx 
```

将代码放在`~/Views/`您的代码之前

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-04T12:50:42.473

Create a Custom View Engine and have a method that returns a ViewEngineResult In this example you just overwrite the `_options.ViewLocationFormats` and add your folder directory :

```
public ViewEngineResult FindView(ActionContext context, string viewName, bool isMainPage)
        {
            var controllerName = context.GetNormalizedRouteValue(CONTROLLER_KEY);
            var areaName = context.GetNormalizedRouteValue(AREA_KEY);

            var checkedLocations = new List<string>();
            foreach (var location in _options.ViewLocationFormats)
            {
                var view = string.Format(location, viewName, controllerName);
                if (File.Exists(view))
                {
                    return ViewEngineResult.Found("Default", new View(view, _ViewRendering));
                }
                checkedLocations.Add(view);
            }

            return ViewEngineResult.NotFound(viewName, checkedLocations);
        } 
```

Example: [https://github.com/AspNetMonsters/pugzor](https://github.com/AspNetMonsters/pugzor)

* * *

## 回答 #10

> 赞同：-5
> 
> 时间：2011-05-31T00:09:22.960

尝试使用`RenderAction("myPartial","Account");`

# c++ - 如何在 C++ 中编写简短的文字？

> ID：208433
> 
> 赞同：133
> 
> 时间：2008-10-16T12:57:34.090
> 
> 标签：c++, literals

非常基本的问题：如何`short`在 C++ 中编写文字？

我知道以下内容：

*   `2`是一个`int`
*   `2U`是一个`unsigned int`
*   `2L`是一个`long`
*   `2LL`是一个`long long`
*   `2.0f`是一个`float`
*   `2.0`是一个`double`
*   `'\2'`是一个`char`。

但是我将如何写一个`short`文字？我试过`2S`了，但这给出了编译器警告。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2008-10-16T13:01:35.547

```
((short)2) 
```

是的，它不是严格意义上的简短文字，更像是一个强制转换，但行为是相同的，我认为没有直接的方法。

> 这就是我一直在做的事情，因为我找不到任何关于它的东西。我猜编译器会足够聪明地编译它，就好像它是一个短文字（即它实际上不会分配一个 int 然后每次都强制转换它）。

以下说明了您应该对此担心多少：

```
a = 2L;
b = 2.0;
c = (short)2;
d = '\2'; 
```

编译->反汇编->

```
movl    $2, _a
movl    $2, _b
movl    $2, _c
movl    $2, _d 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-08-28T03:12:14.887

C++11 让你非常接近你想要的。*（搜索“用户定义的文字”以了解更多信息。）*

```
#include <cstdint>

inline std::uint16_t operator "" _u(unsigned long long value)
{
    return static_cast<std::uint16_t>(value);
}

void func(std::uint32_t value); // 1
void func(std::uint16_t value); // 2

func(0x1234U); // calls 1
func(0x1234_u); // calls 2

// also
inline std::int16_t operator "" _s(unsigned long long value)
{
    return static_cast<std::int16_t>(value);
} 
```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2008-10-16T16:25:35.260

甚至 C99 标准的编写者也被这一点所吸引。这是 Danny Smith 的公共领域`stdint.h`实现的一个片段：

```
/* 7.18.4.1  Macros for minimum-width integer constants

    Accoding to Douglas Gwyn <gwyn@arl.mil>:
    "This spec was changed in ISO/IEC 9899:1999 TC1; in ISO/IEC
    9899:1999 as initially published, the expansion was required
    to be an integer constant of precisely matching type, which
    is impossible to accomplish for the shorter types on most
    platforms, because C99 provides no standard way to designate
    an integer constant with width less than that of type int.
    TC1 changed this to require just an integer constant
    *expression* with *promoted* type."
*/ 
```

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2015-06-03T17:36:55.253

如果您使用 Microsoft Visual C++，则每种整数类型都有可用的文字后缀：

```
auto var1 = 10i8;  // char
auto var2 = 10ui8; // unsigned char

auto var3 = 10i16;  // short
auto var4 = 10ui16; // unsigned short

auto var5 = 10i32;  // int
auto var6 = 10ui32; // unsigned int

auto var7 = 10i64;  // long long
auto var8 = 10ui64; // unsigned long long 
```

请注意，这些是**非标准扩展**，**不可移植**。事实上，我什至无法在 MSDN 上找到有关这些后缀的任何信息。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2015-04-19T21:05:59.953

您还可以使用伪构造函数语法。

```
short(2) 
```

我发现它比强制转换更具可读性。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2008-10-16T13:00:41.197

据我所知，你没有，没有这样的后缀。但是，如果整数文字太大而无法放入您尝试存储它的任何变量，大多数编译器都会发出警告。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2020-11-25T12:27:34.127

一种可能性是为此目的使用 C++11“列表初始化”，例如：

```
short{42}; 
```

此解决方案的优点（与当前接受的答案中的强制转换相比）是它不允许缩小转换：

```
auto number1 = short(100000); // Oops: Stores -31072, you may get a warning
auto number2 = short{100000}; // Compiler error. Value too large for type short 
```

请参阅[https://en.cppreference.com/w/cpp/language/list_initialization#Narrowing_conversions](https://en.cppreference.com/w/cpp/language/list_initialization#Narrowing_conversions)以了解禁止使用 list-init 进行的缩小转换

# drupal - 在 drupal 中预览主题

> ID：208435
> 
> 赞同：2
> 
> 时间：2008-10-16T12:58:58.003
> 
> 标签：drupal, themes, preview

我第一次使用drupal。我在一定程度上成功开发了我的第一个drupal网站。我为前端使用了自己的自定义主题，为管理员使用了蓝色海洋主题。现在我的客户的要求是，当他在管理面板中提交页面之前单击预览按钮时，他希望在带有前端主题的弹出窗口中看到预览。请帮助我就如何实现这一目标提出您的想法和建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-17T01:42:57.943

设置管理主题时，不要选中“使用管理主题进行内容编辑”。这应该允许在“前端”主题中创建/预览内容。

编辑：假设您使用的是 Drupal 6.x

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-05-13T00:02:28.087

你看过这个模块吗 - [http://drupal.org/project/pagepreview](http://drupal.org/project/pagepreview)它旨在为你提供页面在前端主题上的样子。

但是有一些警告，例如，如果这是一个新节点，菜单将不正确

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-11-29T08:58:00.717

我也在努力寻找一个很好的解决方案。我不会发布代码，因为它是一项正在进行的工作，但基本上我进行了一个 ajax 调用来检索一个已知节点，然后在显示合并页面之前用预览框的内容替换该页面的节点内容弹出窗口。

如果一切顺利，我可能会用它制作一个模块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-12-24T11:23:24.737

据我所知，主题化在 Drupal 中是一个复杂的过程，它涉及许多模块和钩子，所以我认为模块（也许）或者像 Wordpress 这样的核心并不容易做到这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-21T02:54:28.337

这可能会有所帮助：[https ://www.computerminds.co.uk/drupal-code/making-accurate-responsive-node-preview-drupal-7](https://www.computerminds.co.uk/drupal-code/making-accurate-responsive-node-preview-drupal-7)

使用一些*响应式主题预览*模块功能修补*页面预览*模块，以便在预览面板中以不同的屏幕尺寸查看页面。

 *页面预览的警告仍然适用。

# c# - 如何在Delphi中检测打印机型号？

> ID：208436
> 
> 赞同：10
> 
> 时间：2008-10-16T12:59:28.190
> 
> 标签：c#, delphi

当我插入 HP Laserjet 3015 时，Windows 会检测到正确的型号，然后尝试安装相应的驱动程序。

如何检测已连接打印机的型号？我不想使用已安装打印机的列表，因为 Zebra 打印机可以使用 Generic/Text only 驱动程序安装。

我是 Delphi 和 C# 程序员，因此任何语言的任何提示都将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-17T18:27:34.100

您可以发送一个

```
~HI 
```

到 Zebra 打印机，它应该返回其型号和固件版本

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-16T13:17:26.000

最近我用这个做了一个小演示。只需将 a`TComboBox`和 a`TMemo`放在 Form 上并将代码替换为：

```
unit Unit1;

interface

uses
  Windows, StdCtrls, Classes, Controls, Forms;

type
  TForm1 = class(TForm)
    ComboBox1: TComboBox;
    Memo1: TMemo;
    procedure ComboBox1Change(Sender: TObject);
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

uses
  Printers, WinSpool, SysUtils;

type
  _DRIVER_INFO_6A = record
    cVersion: DWORD;
    pName: PAnsiChar;             
    pEnvironment: PAnsiChar;      
    pDriverPath: PAnsiChar;       
    pDataFile: PAnsiChar;         
    pConfigFile: PAnsiChar;       
    pHelpFile: PAnsiChar;         
    pDependentFiles: PAnsiChar;   
    pMonitorName: PAnsiChar;      
    pDefaultDataType: PAnsiChar;  
    pszzPreviousNames: PAnsiChar;
    ftDriverDate: TFileTime;
    dwlDriverVersion: Int64;
    pszMfgName: PAnsiChar;
    pszOEMUrl: PAnsiChar;
    pszHardwareID: PAnsiChar;
    pszProvider: PAnsiChar;
  end;
  TDriverInfo6A = _DRIVER_INFO_6A;
  PDriverInfo6A = ^TDriverInfo6A;
  PDriverInfo6 = PDriverInfo6A;

procedure TForm1.FormCreate(Sender: TObject);
begin
  ComboBox1.Items.Assign(Printer.Printers);
  ComboBox1.ItemIndex := 0;
  ComboBox1Change(nil);
end;

function FileTimeToDateTime(ft: TFileTime): TDateTime;
var
  st: TSystemTime;
  lt: TFileTime;
begin
  FillChar(st, SizeOf(st), 0);
  FillChar(lt, SizeOf(lt), 0);
  FileTimeToLocalFileTime(ft, lt);
  FileTimeToSystemTime(lt, st);
  result := SystemTimeToDateTime(st);
end;

procedure TForm1.ComboBox1Change(Sender: TObject);
var
  hPrinter: THandle;
  PrtName: String;
  DriverInfo: PDriverInfo6;
  dwNeeded: DWORD;
begin
  Memo1.Clear;
  PrtName := Combobox1.Text;
  OpenPrinter(PChar(PrtName), hPrinter, nil);
  DriverInfo := nil;
  try
    GetPrinterDriver(hPrinter, nil, 6, DriverInfo, 0, dwNeeded);
    GetMem(DriverInfo, dwNeeded);
    try
      if GetPrinterDriver(hPrinter, nil, 6, DriverInfo, dwNeeded, dwNeeded) then begin
        Memo1.Lines.Add('cVersion: ' + IntToStr(DriverInfo.cVersion));
        Memo1.Lines.Add('pName: '+StrPas(DriverInfo.pName));
        Memo1.Lines.Add('pEnvironment: '+StrPas(DriverInfo.pEnvironment));
        Memo1.Lines.Add('pDriverPath: '+StrPas(DriverInfo.pDriverPath));
        Memo1.Lines.Add('pDataFile: '+StrPas(DriverInfo.pDataFile));
        Memo1.Lines.Add('pConfigFile: '+StrPas(DriverInfo.pConfigFile));
        Memo1.Lines.Add('pHelpFile: '+StrPas(DriverInfo.pHelpFile));
        Memo1.Lines.Add('pDependentFiles: '+StrPas(DriverInfo.pDependentFiles));
        Memo1.Lines.Add('pMonitorName: '+StrPas(DriverInfo.pMonitorName));
        Memo1.Lines.Add('pDefaultDataType: '+StrPas(DriverInfo.pDefaultDataType));
        Memo1.Lines.Add('pszzPreviousNames: '+StrPas(DriverInfo.pszzPreviousNames));
        Memo1.Lines.Add('ftDriverDate: '+DateTimeToStr(FileTimeToDateTime(DriverInfo.ftDriverDate)));
        Memo1.Lines.Add('dwlDriverVersion: '+IntToStr(DriverInfo.dwlDriverVersion));
        Memo1.Lines.Add('pszMfgName: '+StrPas(DriverInfo.pszMfgName));
        Memo1.Lines.Add('pszOEMUrl: '+StrPas(DriverInfo.pszOEMUrl));
        Memo1.Lines.Add('pszHardwareID: '+StrPas(DriverInfo.pszHardwareID));
        Memo1.Lines.Add('pszProvider: '+StrPas(DriverInfo.pszProvider));
      end else
        Memo1.Lines.Add('No Info needed = ' + IntToStr(dwNeeded));
    finally
      FreeMem(DriverInfo);
    end;
  finally
    ClosePrinter(hPrinter);
  end;
end;

end. 
```

编辑：删除了不必要的功能`GetDriverNameByOSPrinterName`

顺便说一句：在`pName`你有驱动程序的名称而不是打印机的名称。打印机名称在 Windows 中是可更改的，因此如果您想确定，请使用打印机驱动程序名称。

# ajax - 如何在 JAR 文件中总结视图组件/小部件信息？

> ID：208440
> 
> 赞同：3
> 
> 时间：2008-10-16T13:00:26.877
> 
> 标签：ajax, frameworks, jar, toolkit

我想使用像 ZK (www.zkoss.org) 或 GWT 这样的 ajax 工具包/框架。但我不知道是否可以将资源捆绑在 JAR 中？你知道哪一个支持这样的资源加载吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-16T13:15:16.207

不确定您的目标是什么，但如果要将 Web 应用程序捆绑到一个文件中，那么您可以使用 WAR 文件来做到这一点 - 假设您部署到像 tomcat 或 jboss 这样的 java web 容器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-16T13:30:14.833

我的目标是总结 Java 类及其模板文件，以便查看各种应用程序模块，每个模块都在一个 Java-Jar-File 中。我在另一个应用程序中使用了这些模块，当然我在一个 WAR-File for Deployment 中进行了总结。我想知道哪个 ajax-Framework/Toolkit 支持这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-12T09:34:41.907

看看[http://www.ztemplates.org](http://www.ztemplates.org)，它简单易学。这个允许您将所有相关的模板、javascript 和 css 放入一个 jar 中并透明地使用它。意味着您甚至不必关心在使用提供的组件时在页面中声明所需的 javascript，因为框架会为您完成。

# project-management - Scrum 作为一种方法论的主要好处是什么？

> ID：208442
> 
> 赞同：17
> 
> 时间：2008-10-16T13:00:36.877
> 
> 标签：project-management, agile, scrum

我在一家设计机构的技术部门工作。我们使用 XP 来管理我们部门的软件开发。我被要求做一个简短的介绍，描述 Scrum 以及它是否适合在更广泛的背景下管理*客户项目工作*。

Scrum 将应用于包含图形设计师、信息架构师、内容编辑、用户体验工程师、网页设计师和软件开发人员的跨职能团队。

**Scrum 能为这种团队带来什么好处？**

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2008-10-16T15:49:45.537

根据我的经验，我想说 Scrum 的主要特点是：

*   进度可见度高。
*   客户定期反馈。
*   可预测的节奏。
*   可衡量的生产力（通过燃尽、速度等）。
*   跨职能、自组织的团队。
*   检查和适应。
*   低官僚开销（会议、文件等）。
*   强调面对面交流。

这些特性带来了*以下好处*：

*   项目可以轻松响应变化。
*   及早发现问题。
*   客户首先得到最有益的工作。
*   所做的工作将更好地满足客户的需求。
*   提高生产力。
*   能够保持可预测的交付时间表。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-10-16T13:03:39.240

如果我们只谈论*好处*，它们是非常明显的。

使用正确的方法你会更好地工作，即你有更高的项目成功率。如果您的项目已经 100% 成功，您可能不需要更改任何内容。

对我们来说，使用敏捷有助于：

1.  提高可交付成果的质量（由于严格的迭代规则，当您期望在迭代结束时一切都可以**正常工作**而不是“*编码完成*”时，它会产生奇迹）
2.  更好地应对变化（并期待变化。这主要是心理问题，但当您的开发人员预计需求会在某个时候发生变化时，它确实很有帮助）
3.  提供更好的估算并花费更少的时间进行估算
4.  更好地控制项目进度和状态（短迭代、清晰、明确的速度计算方法等）

5.  因此，我们总体上实现了更高的客户满意度

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-10-16T13:06:11.700

以我的经验，主要的好处是你的经理会说你在做 Scrum，你会浪费更多的时间去参加日常会议，而不是完成工作。

......他们可能做得不对;-)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-16T13:07:29.140

首先，Scrum 是一种用于项目管理而不是用于开发的方法……它可以与 XP 或 RUP 结合使用……

如果您的项目发生变化，Scrum 对您有好处......当您的需求发生变化时，您需要跟上这些变化...... Scrum 的迭代时间很短（2-4 周），这对变化提供了更多的响应...... . 并且客户可以提前发布他的产品，您可以获得您需要的所有反馈......也许这是第一个好处......

另一个好处：当您的团队相互依赖时，他们将始终特别同步地工作......

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-10-20T10:04:07.930

我认为 XP 和 Scrum 之间没有太大区别。如果您已经拥有 XP，则可能不需要切换。也许采用一些特定于 Scrum 的实践来获得更好的可扩展性，比如 Scrum-of-Scrums。几乎所有其他实践都存在于 XP 中，例如日常会议、迭代、角色分离、回顾等。

事实上，我不确定这种分离是否有好处。最好在回顾会议期间确定您做错了什么，并将任何流程中的实践（或创建自己的解决方案）应用于您的特定问题。XP 和 Scrum 为您提供了一个有助于适应性和创造性的框架。而传统流程为您提供了一套阻碍任何创造性行为的规则。

你的团队和你的项目很特别。思考和交流以加强您的开发过程。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-10-16T13:58:01.550

对于您描述的团队，我看到了以下主要好处：

了解正在发生的事情和问责制。在简短的日常会议中，您可以更好地了解正在发生的事情、完成的事情和未完成的事情。一段时间后，您开始看到趋势：谁是正确的估计，谁不是，谁告诉您他们正在工作，而实际上却不是。您可以更好地了解何时完成。

自组织。团队成员是为给定迭代选择做什么和何时做的人。当人们不习惯时，这需要时间，但最终会让团队成员更快乐，因为没有人决定谁来做什么。他们决定。

提高快速响应需求变化的能力。时间盒、每日状态检查和用户参与的概念将使捕获反馈和更改您的优先级变得更加容易。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-04-05T15:43:35.920

据我了解，每日 Scrum 会议是为了让团队讨论进度和阻碍问题。Scrum master 提供便利。如果团队决定这样做，可以邀请产品负责人，但会议并非旨在向老板或经理提供任何进度状态。

我希望我是正确的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-16T13:03:14.937

你不会得到迟到的最后期限:)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-16T13:21:20.577

当您说“Scrum”时，我不知道您是指敏捷，还是只是日常会议。假设你的意思是我看到的每日会议的优势是什么 3

1 - 您有机会向整个团队展示您遇到的任何问题，并且可以从您可能没想过要问的人那里获得帮助和建议。整天打断同事来寻求帮助解决你遇到的一些问题会更有效率。

2 - 小组团队可以更好地了解整个小组正在做什么，并且您有机会影响您没有立即参与的开发。

3 - 你通常会花更少的时间写进度报告，因为每个人，包括你的老板，每天都会听到你在做什么以及你取得了什么进展。

这就是我对 scrum 的体验

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-16T13:39:24.287

我已经“Scruming”两年了，我的经验告诉我，在任何时候都更容易知道“我们在哪里”，因为开发过程处于固定长度的周期（Sprint）中，可以评估已经完成的工作。在那些时期的中间进行每日 Scrum（Dmitriy 谈论的那些会议）和燃尽图（剩余工作的图形）让团队和经理总是知道已经完成了什么以及团队正在做什么.

在您的情况下，您可能需要有几个较小的 Scrum，而不是一个大的，因为 Scrum 最适合较小的团队。这本书对此有一些见解：http: [//www.infoq.com/minibooks/scrum-xp-from-the-trenches](http://www.infoq.com/minibooks/scrum-xp-from-the-trenches)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-17T21:05:23.510

我认为 Scrum 更像是一种习惯，而不是一种方法或实践。有很多团队在不知道他们正在做敏捷的情况下在 scrum 中运行，并且可能有很多团队声称他们是敏捷的并且没有遵循 scrum 的基本原则。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2017-03-28T07:32:18.310

在开发软件产品时，我曾使用过看板、瀑布、敏捷 scrum 等，根据我的经验，我对 scrum 更满意。它给你成就感，让你清醒地意识到需要进一步实现什么以及如何去做。

Scrum 产品开发方法基于增量和迭代的产品开发过程，其中解决方案由于跨职能和自组织团队之间的协作而增长。以下是 Scrum 的主要好处

*   流程的简单性和透明度
*   适应性规划
*   快速适应变化
*   进化开发和交付模式
*   迭代方法
*   快速学习周期
*   自动化测试提供了一个稳定的平台
*   快速上市
*   集成灵活的团队，可以根据用户反馈随时更改需求

我觉得我已经对答案做出了足够的公正。

您可以在这里了解更多关于我的经验：[http ://www.cygnet-infotech.com/blog/agile-scrum-methodology-for-product-engineering](http://www.cygnet-infotech.com/blog/agile-scrum-methodology-for-product-engineering)

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2014-04-16T05:00:19.813

团队精神 进步的高度可见性。利益相关者的频繁演示和早期反馈 早期发现问题 产品质量和生产力提高 更高的客户满意度

# asp.net-mvc - ASP.NET MVC 从 Preview 5 升级到 Beta 期间的问题？

> ID：208468
> 
> 赞同：9
> 
> 时间：2008-10-16T13:07:35.037
> 
> 标签：asp.net-mvc, refactoring

[当您从 ASP.NET MVC Preview 5 升级到新发布的Beta](http://www.microsoft.com/downloads/details.aspx?familyid=a24d1e00-cd35-4f66-baa0-2362bdde0766&displaylang=en&tm)版本时，您需要做哪些问题或重构？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-10-16T16:35:40.217

问题一：黄屏死机。
`CS0234: The type or namespace name 'Mvc' does not exist in the namespace 'System.Web' (are you missing an assembly reference?)`

解决方案：我删除了我项目中的所有引用并重新添加它们，指向程序文件\asp.net\asp.net mvc beta\assemblies中的程序集，但这并没有解决问题。

我在 gac 中有一个 system.web.mvc dll（不知道如何）。试图删除它。无法；一个或多个应用程序需要组装。[必须按照此处](http://support.microsoft.com/kb/873195)所述找到程序集并删除注册表项。然后我能够删除 gac 的 system.web.mvc 版本。

这仍然没有解决问题。我不得不再次重新添加参考。现在它的工作。

* * *

**只是为了清楚！**Beta 程序集被放在 Program Files 下，而旧版本的 System.Web.Mvc 在 GAC 中。

* * *

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-16T14:52:53.140

我要自己做这件事。以下是自述文件中的更改列表：

## CodePlex Preview 5 和 Beta 之间的更改

*   将默认验证消息更改为对最终用户更友好。
*   将 CompositeViewEngine 重命名为 AutoViewEngine。
*   向 UrlHelper 类型的 Controller 添加了 Url 属性。这使得从控制器内生成基于路由的 URL 变得很方便。
*   添加了 ActionNameSelectorAttribute 抽象基类，作为 ActionNameAttribute 的基类型。通过继承此基本属性类，您可以创建自定义属性，这些属性按名称参与操作选择。
*   向 IViewEngine 添加了一个新的 ReleaseView 方法，该方法允许在视图完成渲染时通知自定义视图引擎。这对于清理或视图池场景很有用。
*   将 ControllerBuilder 方法 DisposeController 重命名为 ReleaseController 以适应为视图引擎建立的模式。
*   删除了 HtmlHelper 类的大部分方法，将它们转换为 HtmlHelper 类的扩展方法。这些方法存在于一个新的命名空间 (System.Web.Mvc.Html) 中。如果您从预览版 5 迁移，则必须将以下元素添加到 Web.config 文件的命名空间部分： `<add namespace="System.Web.Mvc.Html"/>` 这使您可以用自己的方法完全替换我们的辅助方法。
*   更改了默认模型绑定器 (DefaultModelBinder) 以处理复杂类型。IModelBinder 接口也已更改为接受 ModelBindingContext 类型的单个参数。
*   添加了一个新的 HttpVerbs 枚举，其中包含最常用的 HTTP 动词（GET、POST、PUT、DELETE、HEAD）。还向接受枚举的 AcceptVerbsAttribute 添加了构造函数重载。枚举值可以组合。因为可以响应枚举中未包含的 HTTP 谓词，所以 AcceptVerbsAttribute 保留接受字符串数组作为参数的构造函数。例如，以下代码片段显示了一个可以响应 POST 和 PUT 请求的操作方法。

    ```
    [AcceptVerbs(HttpVerbs.Post | HttpVerbs.Put)]  
    public ActionResult Update() {...
    } 
    ```

*   修改了 RadioButton 辅助方法以确保每个重载都接受一个值。因为单选按钮用于从一组可能的值中指定一个选项，所以为单选按钮指定一个值是必要的。

*   对默认项目模板进行了修改和修复。这包括将脚本文件移动到新的 Scripts 文件夹。默认模板使用 ModelState 类来报告验证错误。
*   更改了操作方法选择。如果两个操作方法与请求匹配，但其中只有一个具有派生自与请求匹配的 ActionMethodSelectorAttribute 的属性，则调用该操作。在早期版本中，这种情况会导致异常。例如，以下两个动作方法在同一个控制器中：

    ```
    public ActionResult Edit() {  
      //...  
    }  

    [AcceptVerbs(HttpVerbs.Post)]  
    public ActionResult Edit(FormCollection form) {  
      //...
    } 
    ```

在预览版 5 中，对 Edit 操作的 POST 请求会导致异常，因为有两个方法与请求匹配。在 Beta 中，通过 AcceptVerb 属性匹配当前请求的方法具有优先权。在此示例中，第一个方法将处理 Edit 操作的任何非 POST 请求。

*   为接受格式字符串的 ViewDataDictionary.Eval 方法添加了重载。
*   从 ViewContext 类中删除了 ViewName 属性。
*   为值提供者添加了 IValueProvider 接口，以及默认实现 DefaultValueProvider。值提供者提供模型绑定器在绑定到模型对象时使用的值。Controller 类的 UpdateModel 方法已更新，允许您指定自定义值提供程序。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-10-16T21:52:25.663

[我遇到了和Will](https://stackoverflow.com/users/1228/will)一样的问题，不得不和他做类似的事情，包括将 dll 复制到 bin 文件夹。

现在事情在内部 vs.net 服务器中运行，但导致 IIS7 崩溃。

好的，事实证明主要问题之一是我错过了**更新 web.config 中的编译程序集**的步骤：

```
<add assembly="System.Web.Mvc, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-10-22T10:57:07.450

我所要做的就是从

%ProgramFiles%\Microsoft ASP.NET\ASP.NET MVC Beta

[还可以从codeplex](http://www.codeplex.com/aspnet/Release/ProjectReleases.aspx?ReleaseId=18459)获取最新的 Microsoft.Web.MVC

也更新我的期货程序集。

在 web.config 中添加 2 行

本`<assemblies>`节：

```
<add assembly="System.Web.Mvc, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/> 
```

这一`<namespaces>`节：

```
<add namespace="System.Web.Mvc.Html"/> 
```

然后我不得不更新`<%using (Html.Form())`所有`<%using (Html.BeginForm())`

在一个代码文件上，我必须添加`System.Web.Mvc.Html;`命名空间

我的东西是基于 Rob Conery 的[MVC Storefront](http://blog.wekeroad.com/mvc-storefront/)，所以任何使用它的人都应该能够遵循上述内容。

希望它可以帮助那里的人。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-17T16:37:35.360

**忽略这个...我是个失败者-它是程序文件中的Microsoft ASP.net...不仅仅是ASP.net**

也许这应该是第二个问题，但我认为将它们全部放在一个地方可能会有所帮助。

运行 Beta 安装程序时，我的 PC 上没有任何变化。我没有在 Program Files 文件夹中看到该文件夹​​...没有向 GAC 添加程序集...即使安装程序进入最后一步，然后挂起大约 10 分钟左右。

我现在已经卸载并重新安装了几次，但没有任何运气。

有人有类似的问题吗？

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-10-18T20:12:01.120

AutoFac 的问题现已在 AutoFac 代码库 [http://code.google.com/p/autofac/issues/detail?id=86&can=1的修订版 454 中得到解决](http://code.google.com/p/autofac/issues/detail?id=86&can=1)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-10-19T16:08:54.390

我试图找出新的 ModelBinder 是如何工作的，据我所知它有很大的不同，但我还没有设法找出它是如何工作的..

我的老样子：

```
public class GuestbookEntryBinder : IModelBinder
    {
        #region IModelBinder Members

        public object GetValue(ControllerContext controllerContext, string modelName, Type modelType, ModelStateDictionary modelState)
        {
            if (modelType == typeof(GuestbookEntry))
            {
                return new GuestbookEntry
                {
                    Name = controllerContext.HttpContext.Request.Form["name"] ?? "",
                    Website = controllerContext.HttpContext.Request.Form["website"] ?? "",
                    Message = controllerContext.HttpContext.Request.Form["message"] ?? "",
                };
            }
            return null;
        }
        #endregion
    } 
```

新的看起来像：

```
#region IModelBinder Members

public ModelBinderResult BindModel(ModelBindingContext bindingContext)
{
    throw new NotImplementedException();
}

#endregion 
```

有什么提示吗？

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-10-16T20:57:28.927

我使用 Autofac 作为我的 DI 容器。尝试处置容器对象时会引发空容器异常。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-10-17T12:29:02.680

是的，也使用 Autofac 作为 DI 容器。

遇到和这个人一样的问题

[http://groups.google.com/group/autofac/browse_thread/thread/68aaf55581392d08](http://groups.google.com/group/autofac/browse_thread/thread/68aaf55581392d08)

不知道是否可以修复，但在修复之前无法继续......

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-10-17T18:47:18.580

在一天的大部分时间里都在为此苦苦挣扎之后，我想我会在这里发布我的解决方案。也许这是正常的 Visual Studio 行为，但我以前从未注意到它......

在我现有的项目中，我实际上不得不手动将 Beta 文件移动到 Bin 文件夹。无论出于何种原因，仅使用“添加引用”浏览它是行不通的......

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-10-17T20:39:26.030

Html.TextBox - 现在的值是对象，而不是字符串。因此，可能存在隐藏错误（不是在编译时，甚至不是在运行时），例如我之前使用过这个重载方法 Html.TextBox(string name, object htmlAttributes)。现在我的属性进入文本框值。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-10-17T21:18:49.273

关于 Autofac 问题。autofac讨论组上有一个线程关于需要更新控制器工厂以兼容MVC框架的Beta版本

[http://groups.google.com/group/autofac/browse_thread/thread/68aaf55581392d08](http://groups.google.com/group/autofac/browse_thread/thread/68aaf55581392d08)

我希望他们很快就会发布一个新版本:-)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-10-18T02:46:13.510

当我从 Preview 5 升级到 Beta 时，我很难找到 ActionLink 的通用重载。这些似乎不包含在 ASP.NET MVC 的主要版本中，但正在作为“未来”发布。

我找到了必要的程序集（Microsoft.Web.Mvc）@ [http://www.codeplex.com/Release/ProjectReleases.aspx?ProjectName=aspnet&ReleaseId=18459](http://www.codeplex.com/Release/ProjectReleases.aspx?ProjectName=aspnet&ReleaseId=18459)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-10-20T04:29:06.063

ViewContext 构造函数中有一个重大更改。它已从：

ViewContext（ControllerContext 上下文，字符串 viewName，ViewDataDictionary viewData，TempDataDictionary tempData）

到：

ViewContext（ControllerContext 上下文，IView 视图，ViewDataDictionary viewData，TempDataDictionary tempData）

这破坏了我的代码，因为我使用的是 MvcContrib.Services.IEmailTemplateService，它在其 RenderMessage 方法中采用 ViewContext。要从模板名称中获取 IView，我正在执行以下操作：

var view = ViewEngines.DefaultEngine.FindView(controllerContext, viewName, null);

不确定这是否是最佳做法，但它似乎有效。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-10-20T17:06:49.327

这现在被打破了：

```
<%=Html.TextBox("Name", new Hash(@class => "required"))%> 
```

在预览版 5 中，上述内容会将 ViewData.Model.Name 的值绑定到文本框。这仍然有效：

```
<%=Html.TextBox("Name")%> 
```

但是如果要指定html属性，还必须指定值，如下：

```
<%=Html.TextBox("Name", ViewData.Model.Name, new Hash(@class => "required"))%> 
```

实际上，这并不安全。如果有任何机会 ViewData.Model 可能为空，您需要执行以下操作：

```
<%=Html.TextBox("Name", ViewData.Model == null ? null : ViewData.Model.Name, new Hash(@class => "required"))%> 
```

此更改似乎与 Beta 版本说明背道而驰：

> “...为了减少重载歧义... value 参数已从对象更改为几个辅助方法的字符串。”

TextBox 的 value 参数以前是 string，现在改为 object。因此，为了避免歧义，他们必须删除我最常使用的一个重载。:(

恕我直言，每个 HTML 辅助方法都应该有允许在所有情况下绑定而不指定值的重载。否则，我们最终会得到不一致的视图代码，这会使未来的开发人员感到困惑。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-10-20T16:09:05.823

如果您使用期货程序集 (Microsoft.Web.Mvc) 中的 Html.Form，您可能会在 FormMethod 枚举上遇到名称冲突。例如：

```
Html.Form<FooController>(c => c.Bar(), FormMethod.Post, new Hash(@class => "foobar")) 
```

这将抱怨 FormMethod 是 Microsoft.Web.Mvc 和 System.Web.Mvc 之间的模棱两可的引用。这很可悲，因为恕我直言 BeginForm 没有提供可行的选项，因为它缺少使用 lambda 表达式的覆盖。你唯一的选择是使用魔法字符串，它可以抵抗重构。

似乎最好的解决方案是将以下内容放入使用 FormMethod 的每个视图中：

```
<%@ Import Namespace="FormMethod=Microsoft.Web.Mvc.FormMethod"%> 
```

啊。希望这是暂时的。我希望期货程序集可以更改为使用 System.Web.Mvc 中的枚举。或者更好的是，希望它们重载 BeginForm 以使用表达式。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-10-20T16:16:53.123

似乎 Html.Image 坏了。 [从预览版 5 开始，它已移至期货程序集。](https://stackoverflow.com/questions/114108/aspnet-mvc-preview-5-htmlimage-helper-has-moved-namespace) 我无法想象为什么。无论如何，错误是：

```
Method not found: 'Void System.Web.Mvc.UrlHelper..ctor(System.Web.Mvc.ViewContext)' 
```

我能看到的最好的解决方案是替换它：

```
<%=Html.Image("~/Content/Images/logo.jpg") %> 
```

有了这个：

```
<img src="<%=Html.ResolveUrl("~/Content/Images/logo_350.jpg")%>" /> 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-10-23T09:39:58.150

上面会说什么，除了从 GAC 中删除程序集并重新添加引用之外，我还必须再次运行 Beta 安装程序（这次将正确的程序集放在 GAC 中，尽管我只是使用一个文件参考）。

我怀疑如果我在运行安装程序之前从 GAC 中删除了 Preview 5 程序集（而且我也不知道它们是如何进入那里的），那么一切可能都正常。值得尝试。

*万一*其他人像我一样愚蠢并在Vista 上工作，您可能不需要为了删除旧程序集而进行上述注册表黑客操作 - 只需从管理员命令提示符运行 gacutil 即可。嗬！

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-11-05T10:20:48.410

我发现使用空白项目中的名称空间更新 web.config 名称空间元素解决了我的问题。由于接口更改，我还必须更新我的 ModelBinders。

# c# - 如何判断哪个RequiredFieldValidator 失败

> ID：208469
> 
> 赞同：1
> 
> 时间：2008-10-16T13:08:12.507
> 
> 标签：c#, .net, validation

我的 aspx 页面上有多个 RequireFieldValidators。

在后端 (C#) 上，我希望能够分辨出哪个控件具体无效，以便我可以将样式应用于该控件。我使用 Page.IsValid 方法来查看整个页面是否通过了验证，但我需要具体知道哪个控件失败了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-16T13:25:15.843

正如其他人所提到的，您需要循环页面的验证器集合并检查它们的状态。[MSDN 这里有例子。](http://msdn.microsoft.com/en-us/library/dh9ad08f.aspx)

```
If (Me.IsPostBack) Then
Me.Validate()
If (Not Me.IsValid) Then
    Dim msg As String
    ' Loop through all validation controls to see which 
    ' generated the error(s).
    Dim oValidator As IValidator
    For Each oValidator In Validators
        If oValidator.IsValid = False Then
            msg = msg & "<br />" & oValidator.ErrorMessage
        End If
    Next
    Label1.Text = msg
End If 
```

万一

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-16T13:21:09.347

所有验证器都添加到页面的 ValidatorCollection（属性 Page.Validators）。

您可以遍历此集合以手动验证每个控件。

调用方法 IValidator.Validate();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-16T13:21:59.813

从内存中，在调用 Page.Validate() 之后，您可以检查各个验证器以查看哪些是有效的，在验证器上使用 IsValid。

# jquery - 让 jQuery 在 IE 中识别 .change()

> ID：208471
> 
> 赞同：131
> 
> 时间：2008-10-16T13:08:49.747
> 
> 标签：jquery, internet-explorer

当单选按钮组被更改/单击时，我正在使用 jQuery 隐藏和显示元素。它在 Firefox 等浏览器中运行良好，但在 IE 6 和 7 中，该操作仅在用户单击页面上的其他位置时才会发生。

详细地说，当您加载页面时，一切看起来都很好。在 Firefox 中，如果您单击单选按钮，则会隐藏一个表格行，而立即显示另一行。但是，在 IE 6 和 7 中，单击单选按钮，直到单击页面上的某个位置才会发生任何事情。只有这样 IE 才会重绘页面，隐藏和显示相关元素。

这是我正在使用的 jQuery：

```
$(document).ready(function () {
  $(".hiddenOnLoad").hide();

  $("#viewByOrg").change(function () {
    $(".visibleOnLoad").show();
    $(".hiddenOnLoad").hide();
  });

  $("#viewByProduct").change(function () {
    $(".visibleOnLoad").hide();
    $(".hiddenOnLoad").show();
  });
}); 
```

这是它影响的 XHTML 部分。整个页面验证为 XHTML 1.0 Strict。

```
<tr>
  <td>View by:</td>
  <td>
    <p>
      <input type="radio" name="viewBy" id="viewByOrg" value="organisation"
      checked="checked" />Organisation</p>
    <p>
      <input type="radio" name="viewBy" id="viewByProduct" value="product" />Product</p>
  </td>
</tr>
<tr class="visibleOnLoad">
  <td>Organisation:</td>
  <td>
    <select name="organisation" id="organisation" multiple="multiple" size="10">
      <option value="1">Option 1</option>
      <option value="2">Option 2</option>
    </select>
  </td>
</tr>
<tr class="hiddenOnLoad">
  <td>Product:</td>
  <td>
    <select name="product" id="product" multiple="multiple" size="10">
      <option value="1">Option 1</option>
      <option value="2">Option 2</option>
    </select>
  </td>
</tr> 
```

如果有人知道为什么会发生这种情况以及如何解决它，他们将不胜感激！

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2008-10-16T13:13:25.913

尝试使用[`.click`](http://api.jquery.com/click)而不是[`.change`](http://api.jquery.com/change).

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2009-07-03T17:25:46.540

使用`click`事件代替的问题`change`是，如果选择了相同的单选框（即实际上没有更改），您将获得事件。如果您检查新值与旧值不同，则可以将其过滤掉。我觉得这有点烦人。

如果您使用该`change`事件，您可能会注意到它会在您单击 IE 中的任何其他元素后识别更改。如果您调用`blur()`该`click`事件，它将导致该`change`事件触发（仅当单选框实际发生更改时）。

这是我的做法：

```
// This is the hack for IE
if ($.browser.msie) {
  $("#viewByOrg").click(function() {
    this.blur();
    this.focus();
  });
}

$("#viewByOrg").change(function() {
  // Do stuff here
}); 
```

现在您可以像往常一样使用更改事件。

编辑：添加了对 focus() 的调用以防止可访问性问题（请参阅下面的 Bobby 的评论）。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2009-10-28T19:56:05.610

你试过 IE 的 onpropertychange 事件吗？我不知道这是否有所作为，但它可能值得一试。当通过 JS 代码更新值时，IE 不会触发 change 事件，但也许 onpropertychange 在这种情况下会起作用。

```
$("#viewByOrg").bind($.browser.msie? 'propertychange': 'change', function(e) {
  e.preventDefault(); // Your code here 
}); 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2008-10-23T20:24:15.230

这也应该有效：

```
$(document).ready(function(){
   $(".hiddenOnLoad").hide();
   $("#viewByOrg, #viewByProduct").bind(($.browser.msie ? "click" : "change"), function () {
                        $(".visibleOnLoad").show();
                        $(".hiddenOnLoad").hide();
                    });
}); 
```

谢谢码头。这很有帮助。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-10-16T13:20:13.513

在IE中你必须使用click事件，在其他浏览器中onchange。你的功能可能变成

```
$(document).ready(function(){
   $(".hiddenOnLoad").hide();
   var evt = $.browser.msie ? "click" : "change";
   $("#viewByOrg").bind(evt, function () {
                        $(".visibleOnLoad").show();
                        $(".hiddenOnLoad").hide();
                    });

   $("#viewByProduct").bind(evt, function () {
                        $(".visibleOnLoad").hide();
                        $(".hiddenOnLoad").show();
                    });     
}); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2010-08-12T20:15:21.410

添加这个插件

```
jQuery.fn.radioChange = function(newFn){
    this.bind(jQuery.browser.msie? "click" : "change", newFn);
} 
```

然后

```
$(function(){
    $("radioBtnSelector").radioChange(function(){
        //do stuff
    });
}); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2010-03-01T10:59:29.057

我对输入文本有同样的问题。

我变了：

```
$("#myinput").change(function() { "alert('I changed')" }); 
```

到

```
$("#myinput").attr("onChange", "alert('I changed')"); 
```

一切对我来说都很好！

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2010-04-26T13:32:58.317

这是一种告诉 IE 在单击元素时触发更改事件的简单方法：

```
if($.browser.msie) {
    $("#viewByOrg").click(function() {
        $(this).change();
    });
} 
```

您可以将其扩展为更通用的内容以使用更多表单元素：

```
if($.browser.msie) {
    $("input, select").click(function() {
        $(this).change();
    });
    $("input, textarea").keyup(function() {
        $(this).change();
    });
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-10-16T13:13:57.037

我很确定这是 IE 的一个已知问题。为事件添加处理程序`onclick`应该可以解决问题：

```
$(document).ready(function(){

    $(".hiddenOnLoad").hide();

    $("#viewByOrg").change(function () {
        $(".visibleOnLoad").show();
        $(".hiddenOnLoad").hide();
    });

    $("#viewByOrg").click(function () {
        $(".visibleOnLoad").show();
        $(".hiddenOnLoad").hide();
    });

    $("#viewByProduct").change(function () {
        $(".visibleOnLoad").hide();
        $(".hiddenOnLoad").show();
    });     

    $("#viewByProduct").click(function () {
        $(".visibleOnLoad").hide();
        $(".hiddenOnLoad").show();
    });     
}); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2010-08-14T14:14:11.807

在 IE 中，强制单选框和复选框触发“更改”事件：

```
if($.browser.msie && $.browser.version < 8)
  $('input[type=radio],[type=checkbox]').live('click', function(){
    $(this).trigger('change');
  }); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2011-08-19T19:53:44.653

从 jquery 1.6 开始，这不再是问题.. 虽然不确定它什么时候修复.. 不过感谢上帝

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2011-10-25T12:31:51.567

如果您将 jQuery 版本更改为 1.5.1，则无需调整代码。然后 IE9 将完美收听：

```
$(SELECTOR).change(function() {
    // Shizzle
}); 
```

[http://code.jquery.com/jquery-1.5.1.min.js](http://code.jquery.com/jquery-1.5.1.min.js)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2012-07-02T10:44:13.200

点击的技巧有效......但如果你想获得正确的收音机或复选框状态，你可以使用这个：

```
(function($) {
    $('input[type=checkbox], input[type=radio]').live('click', function() {
       var $this = $(this);
       setTimeout(function() {
          $this.trigger('changeIE'); 
       }, 10) 
    });
})(jQuery);

$(selector).bind($.browser.msie && $.browser.version <= 8 ? 'changeIE' : 'change', function() {
  // do whatever you want
}) 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-08-10T17:51:19.883

imo 使用 click 而不是 change 使 ie 行为不同。我宁愿使用计时器 (setTimout) 来模拟更改事件的行为。

类似（警告 - 记事本代码）：

```
if ($.browser.msie) {
  var interval = 50;
  var changeHack = 'change-hac';
  var select = $("#viewByOrg");
  select.data(changeHack) = select.val();
  var checkVal=function() {
    var oldVal = select.data(changeHack);
    var newVal = select.val();
    if (oldVal !== newVal) {
      select.data(changeHack, newVal);
      select.trigger('change')
    }
    setTimeout(changeHack, interval);
  }
  setTimeout(changeHack, interval);
}

$("#viewByOrg").change(function() {
  // Do stuff here
}); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2010-07-05T04:26:18.177

试试这个，它对我有用

```
$("#viewByOrg")
        .attr('onChange', $.browser.msie ? "$(this).data('onChange').apply(this)" : "")
        .change( function(){if(!$.browser.msie)$(this).data('onChange').apply(this)} )
        .data('onChange',function(){alert('put your codes here')}); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2011-02-07T16:18:43.363

这可能对某人有所帮助：不要从表单的 id 开始，而是以选择 id 为目标并在更改时提交表单，如下所示：

```
<form id='filterIt' action='' method='post'>
  <select id='val' name='val'>
    <option value='1'>One</option>
    <option value='2'>Two</option>
    <option value='6'>Six</option>
  </select>
  <input type="submit" value="go" />
</form> 
```

和 jQuery：

```
$('#val').change(function(){
  $('#filterIt').submit();
}); 
```

（显然，提交按钮是可选的，以防 javascript 被禁用）

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2011-06-09T19:54:59.953

```
//global
var prev_value = ""; 

$(document).ready(function () {

 if (jQuery.browser.msie && $.browser.version < 8)
      $('input:not(:submit):not(:button):not(:hidden), select, textarea').bind("focus", function () { 
         prev_value = $(this).val();

       }).bind("blur", function () { 
         if($(this).val() != prev_value)
         has_changes = true;
       });
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2013-01-10T00:15:14.977

尝试以下操作：

```
.bind($.browser.msie ? 'click' : 'change', function(event) { 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2013-09-12T10:52:05.327

避免在 IE 的**jquery的****.change()**函数之前使用**.focus()**或**.select()**，然后它工作正常，我在我的网站中使用它。

 ****谢谢

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-05-31T09:33:10.343

请尝试使用**each**而不是**change** / **click**，即使是第一次在 IE 和其他浏览器中也可以正常工作

**第一次不工作**

```
$("#checkboxid").**change**(function () {

}); 
```

**即使是第一次也能正常工作**

```
$("#checkboxid").**each**(function () {

}); 
```

# c++ - 应用程序设置

> ID：208475
> 
> 赞同：7
> 
> 时间：2008-10-16T13:10:10.430
> 
> 标签：c++, windows, settings

什么是存储应用程序设置的相当标准的方式，主要用于 Windows，但也很容易转移到其他平台。

基本上我想要 4 组设置：

*   全局设置，影响所有用户，并且可以在机器之间移动
*   全局系统设置，影响所有用户，但特定于该系统（例如该系统的默认设置，例如图形选项）
*   用户设置，在系统之间移动的用户设置（例如音量）
*   用户系统设置，特定于该系统的用户设置（例如依赖于硬件的图形选项）

每个级别都覆盖前一个级别，允许“全局设置”在很大程度上是应用程序的默认设置，用户设置存储用户选择的选项。前两个基本上是没有用户设置的默认设置（例如，对于新用户）。

我考虑实现一组功能，然后我可以为不同的系统实现（可能通过 ini 文件），但这是最好的方法吗？

(c++)

```
namespace config
{
    void Init(const std::string &AppName);
    //updates config for keys/sections that don't exist (ie don't overwrite changes by advanced users by rewriting the entire file)
    void Defaults          (std::map<std::string,std::map<std::string,std::string> > &Map);
    void SystemDefaults    (std::map<std::string,std::map<std::string,std::string> > &Map);

    void Set               (const std::string &Section, const std::string &Key, const std::string &Value);
    void SetSystem         (const std::string &Section, const std::string &Key, const std::string &Value);

    void SetUser           (const std::string &Section, const std::string &Key, const std::string &Value);
    void SetUserSystem     (const std::string &Section, const std::string &Key, const std::string &Value);

    std::string GetValue   (const std::string &Section, const std::string &Key);
} 
```

我知道 Windows 有一组用于此类设置的目录，但这些是我需要的正确目录吗？

编辑：我宁愿使用文件（ini 或 xml），而不是使用 windows registery。但是，将这些配置文件放在每个操作系统下的最佳位置在哪里？

在 Vista 下，我找到了这些，似乎适合我的群体，但是旧的 windows 版本（我需要支持 win2000、XP 等），mac/linux 是否有自己的类似文件夹？

*   全局设置 - <SYSDRIVE>\Users\Default\Appdata\Roaming
*   全局系统设置 - <SYSDRIVE>\Users\Default\Appdata\Local
*   用户设置 - <SYSDRIVE>\Users\<USER>\AppData\Roaming
*   用户系统设置 - <SYSDRIVE>\Users\<USER>\AppData\Local

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-16T15:06:58.993

如果你是 boost 用户，你可以看看[程序选项](http://www.boost.org/doc/libs/1_36_0/doc/html/program_options.html)库，它支持使用配置文件以及环境变量和（当然）命令行选项。

它被设计为可移植的，因此可以减轻您跨平台的烦恼。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-16T13:30:32.463

另请参阅[跨平台应用程序应将其数据保存在哪里？](https://stackoverflow.com/questions/57019/where-should-cross-platform-apps-keep-their-data)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-16T13:20:37.100

有（至少）三个合理的选择：

Registry：由于可移植性和相对不透明性，这是我最不喜欢的。

环境变量：我建议使用一个（仅一个）指向保存材料的位置 - “安装目录”或类似的。

文件：用户主目录（或其子目录）和项目/产品目录都适合存储东西。

您可能希望使用简单的关键字=值范例和基本规则，以便您的变量 - 设置 - 可以很容易地被一种以上的代码读取。例如，我通常对属性文件使用 Java 范例并使用匹配行为 C 代码，因此我的两个代码行都可以轻松读取设置。

# svn - 如何最好地从颠覆中更新网站

> ID：208484
> 
> 赞同：5
> 
> 时间：2008-10-16T13:12:50.737
> 
> 标签：svn

我有一个由 MySQL 数据库支持的 PHP 网站和一小群程序员提交代码来颠覆。通常我们编写代码，在本地测试它，提交颠覆，然后将更改的文件复制到隐藏区域以进行在线测试。

然而，错误是可以犯的。有时我想刷新站点，以便毫无疑问地知道站点代码和数据库确实代表了颠覆中的内容。我想尽可能接近一键式解决方案，以使其万无一失。

最好的方法是什么？

顺便说一句，如果重要的话，我们在 Windows 机器上开发。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-16T13:46:32.867

可以在每次提交后使用 post-commit 钩子自动完成导出：

[http://svnbook.red-bean.com/en/1.5/svn.ref.reposhooks.post-commit.html](http://svnbook.red-bean.com/en/1.5/svn.ref.reposhooks.post-commit.html)

您可以设置挂钩以自动导出隐藏区域内的项目以进行在线测试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-16T13:20:11.267

我不建议将您的代码签出到您的生产服务器。这可能会暴露服务器上的 svn 控制文件 (.svn)。

我建议使用脚本（python、ruby 等）结合命令行 svn 和 FTP 客户端将文件从 svn 和 ftp 文件导出到服务器。svn export 命令可用于从 svn 服务器中检出一组文件，而不需要所有 .svn 目录。此外，在执行此操作时不要忘记标记 svn 存储库，这样您就有了已部署内容的检查点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-17T02:40:34.897

我们通过 Subversion 部署并使用数据库迁移工具（带有模式版本控制）来执行此操作。

（[http://blog.lavablast.com/post/2008/02/I2c-for-one2c-welcome-our-new-revision-control-overlords!.aspx](http://blog.lavablast.com/post/2008/02/I2c-for-one2c-welcome-our-new-revision-control-overlords!.aspx)）

（我们在 .NET 中开发）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-16T13:14:50.123

如何检查代码以放置您想要运行它的位置？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-16T13:21:50.407

代码版本管理和数据库版本管理是两个截然不同的问题。我更喜欢的解决方案分三个阶段（测试、部署测试、实时）完成，而不是两个阶段。

*   在开发环境中通过脚本更新代码并应用数据库更改
*   将实时数据库下载到部署测试环境，还原它并应用更改脚本
*   针对“同步”实时数据库测试代码
*   通过 svn 从存储库的相关分支更新实时环境（我们通过 ssh 隧道进行更新，因为它是一个 linux 环境）并将更改脚本应用到实时数据库

**编辑：**最好使用导出而不是结帐/更新来完成实时环境的更新。这不会留下 svn 的控制文件。这可能会或可能不会有安全隐患，但它确实会强制您指定每次要签出的分支。

您的“单击”可能会为最后一步编写脚本。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-16T13:34:42.313

如果您安装 Subversion 命令行客户端，则很容易制作一个批处理文件/shell 脚本，该脚本会将最新版本从存储~~库~~导出到服务器上的文件夹。这要求您在 Subversion 中具有与在服务器上相同的文件结构（当然，除非您想添加逻辑来更改脚本中的结构）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-16T21:49:46.807

我建议您编写某种脚本来为您执行此操作。是否使用 PHP 或其他方式执行此操作取决于您。执行此操作时请记住安全性。

导出您的项目不会导出您可能设置的任何 svn:externals，这意味着您需要进行多次导出。当您编写此脚本时，它当然不应该成为一个大问题。导出的另一件事是，如果您的项目很大（如果您使用大量视频、PDF 等），那么导出可能会非常麻烦，尤其是当您的版本控制托管在异地并且只能通过 HTTP 使用时。

我建议您进行结帐并确保您的服务器不能提供位于隐藏 .svn 文件夹中的任何文件。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-16T13:33:34.483

我会推荐：

*   将每个旧版本复制到其自己的目录（用于快速恢复；您可能只需要保留其中一个）在服务器的不可通过 Web 访问的部分。
*   然后使用`svn export`从 svn 获取整个新版本。不要使用`svn checkout`，因为这会使 .svn 目录到处都是。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-07-20T11:37:55.143

感谢所有的答案，帮助证明我没有做错太多。我们正在开发和测试在线 subversion 存储库的本地签出。当我们想要部署一个新版本时，我们运行一个脚本，它基本上删除了实时测试服务器上的当前导出，创建一个新导出，然后通过 rsync 部署到所有网络服务器。

问题在于：由于是全新的导出，Rsync 在部署到 liveserver 时总是复制所有文件。实际上，我从来没有花时间了解如何更新导出。

在另一台机器上，我只需使用 rsync --without .svn 进行结帐和部署

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-08-04T18:05:40.087

你检查过豆茎吗？[http://beanstalkapp.com/](http://beanstalkapp.com/)这是一个 SVN/GIT 服务器，具有自动 FTP 部署功能。

# multithreading - 什么时候应该使用 Win32 InterlockedExchange 功能？

> ID：208490
> 
> 赞同：19
> 
> 时间：2008-10-16T13:13:51.297
> 
> 标签：multithreading, winapi

我遇到了[InterlockedExchange](http://msdn.microsoft.com/en-us/library/ms683590(VS.85).aspx "MSDN 链接")函数，想知道什么时候应该使用这个函数。在我看来，在 x86 处理器上设置 32 位值应该始终是原子的？
在我想使用该函数的情况下，新值不依赖于旧值（它不是增量操作）。您能否提供一个强制使用此方法的示例（我不是在寻找 InterlockedCompareExchange）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-10-16T13:24:13.957

`InterlockedExchange`既是写*又*是读——它返回前一个值。

这是必要的，以确保另一个线程没有在您写入不同的值之后立即写入。例如，假设您试图增加一个变量。您可以读取该值，加 1，然后使用 设置新值`InterlockedExchange`。的返回值`InterlockedExchange`必须和你最初读取的值相匹配，否则可能另一个线程同时递增，你需要循环再试一次。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-10-16T13:25:59.010

除了写入新值之外，`InterlockedExchange`还读取并返回之前的值；这整个操作是原子的。这对于[无锁算法](http://en.wikipedia.org/wiki/Lock-free_and_wait-free_algorithms)很有用。

（顺便说一句，不能保证 32 位写入是原子的。例如，考虑写入未对齐并跨越缓存边界的情况。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-16T13:28:41.373

在多处理器或多核机器中，每个内核都有自己的缓存——因此每个内核对系统内存的内容都有各自可能不同的“视图”。

线程同步机制负责内核之间的同步，有关更多信息，请查看[http://blogs.msdn.com/oldnewthing/archive/2008/10/03/8969397.aspx](http://blogs.msdn.com/oldnewthing/archive/2008/10/03/8969397.aspx)或 google 获取和释放语义

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-16T13:27:09.757

设置 32 位值是原子的，但前提是您要设置文字。

b = a 是 2 次操作：

```
mov         eax,dword ptr [a] 
mov         dword ptr [b],eax 
```

理论上，第一次和第二次操作之间可能会有一些中断。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-10-16T13:34:55.793

默认情况下，写入值永远不会是原子的。当您将值写入变量时，会生成几条机器指令。对于现代的抢占式操作系统，操作系统可能会在写入的各个操作之间切换到另一个线程。

这在多处理器机器上更是一个问题，其中多个线程可能同时执行，并试图同时写入单个内存位置。

联锁操作通过使用专门的指令进行写入来避免这种情况（x86 针对这种情况有专门的指令），在一条指令中执行读取-修改-写入。这些指令还锁定所有处理器的内存总线，以确保没有其他执行线程可以同时写入该值。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-05-12T22:28:40.263

InterlockedExchange 确保变量的更改和其原始值的返回不会被其他线程中断。

因此，如果 'i' 是一个 int，则这些调用（单独进行）不需要围绕 'i' 的 InterlockedExchange：

```
a = i;
i = 9;
i = a;
i = a + 9;
a = i + 9;
if(0 == i) 
```

这些陈述都不依赖于“i”的初始值和最终值。但是以下这些调用确实需要围绕“i”进行 InterlockedExchange：

```
a = i++;  //a = InterlockedExchange(&i, i + 1); 
```

没有它，运行相同代码的两个线程可能会获得分配给“a”的相同值“i”，或者“a”可能会意外跳过两个或更多数字。

```
if(0 == i++) //if(0 == InterlockedExchange(&i, i + 1)) 
```

两个线程可能都执行应该只发生一次的代码。
等等

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-02-12T00:01:42.917

哇，这么多相互矛盾的答案。很难筛选谁是对的，谁是错的，以及哪些信息具有误导性。

鉴于上述半个答案，我也不确定答案，但我认为它的工作原理是这样的，我可能是错的，如果我是的话，会很有趣：

1.  32 位读写是原子的，但取决于您的代码，这可能意义不大。
2.  不要担心非对齐的读/写。对 32 位变量的所有 32 位写入都必须对齐，否则会出现机器页面错误。
3.  不用担心缓存页面末尾的写操作，这是不会发生的。
4.  如果您需要在一个线程上先写后读，而您正在另一个线程上写，那么您需要使用 InterlockedExchange。如果您只是在一个线程上读取值，然后将其写入另一个线程，那么您不需要使用它，但由于多线程，这些值可能会摇摆不定。

# wcf - ASP.net Web 服务与 WCF

> ID：208492
> 
> 赞同：6
> 
> 时间：2008-10-16T13:14:16.943
> 
> 标签：wcf, web-services

.net 桌面应用程序会将信息发送到中央服务器，可能会有成千上万的桌面应用程序将信息发送到我的服务器。

数据将很小。

.net Web 服务会适合这个场景还是 WCF 更适合？

有什么优点/缺点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-16T13:19:00.943

我会选择基于 WCF REST 的服务，因为您将能够传输纯数据，而不会产生基于 SOAP 的经典 .asmx Web 服务附带的 SOAP 标头（和其他信封废话）的开销。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-16T13:18:06.153

在 wcf 中，节流、并发等的可能性要大得多。一开始需要做更多的工作，但我想它更适合需要完全控制绑定的场景。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-16T13:24:56.437

WCF 是一种更健壮的 SOA 方法。Microsoft 致力于使其成为构建下一波 Microsoft 业务应用程序的主要框架。在其生命周期的早期，已经可用的功能优于普通的旧 Web 服务。它只会变得更好。通过尽早使用 WCF，您将能够顺应潮流并利用未来的新功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-16T13:18:30.350

在某些情况下，取决于要发送的数据类型和数量。
WCF 将为您提供更多选项来调整您的调用。

另一方面，我想不出实现 asp.net Web 服务优于 WCF 的优势。在 WCF 中，您还可以实现普通的“旧”Web 服务

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-16T13:34:46.480

ASMX 就像远程处理一样，它仍然存在，因为它随 1.0 一起提供，但是如果你开始一个新项目，你不应该再使用它。WCF 将为您提供更多功能和更好的工具支持。

# sql - 在所有表中的所有字段中搜索特定值 (Oracle)

> ID：208493
> 
> 赞同：130
> 
> 时间：2008-10-16T13:14:26.350
> 
> 标签：sql, oracle, search, plsql, database-table

是否可以在每个表的每个字段中搜索 Oracle 中的特定值？

在某些表中有数百个具有数千行的表，所以我知道这可能需要很长时间才能查询。但我唯一知道的是，我想查询的字段的值是`1/22/2008P09RR8`. <

我尝试使用下面的此语句根据我认为应该命名的列来查找合适的列，但它没有返回任何结果。

```
SELECT * from dba_objects 
WHERE object_name like '%DTN%' 
```

绝对没有关于这个数据库的文档，我不知道这个字段是从哪里提取的。

有什么想法吗？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2008-10-16T14:54:46.817

引用：

> 我已尝试使用下面的此语句根据我认为应该命名的列来查找合适的列，但它没有返回任何结果。*
> 
> ```
> SELECT * from dba_objects WHERE
> object_name like '%DTN%' 
> ```

列不是对象。如果您的意思是您希望列名类似于“%DTN%”，那么您想要的查询是：

```
SELECT owner, table_name, column_name FROM all_tab_columns WHERE column_name LIKE '%DTN%'; 
```

但是，如果“DTN”字符串只是您的猜测，那可能无济于事。

顺便说一句，您有多确定 '1/22/2008P09RR8' 是直接从单个列中选择的值？如果您根本不知道它来自哪里，它可能是多个列的串联，或者某个函数的结果，或者位于嵌套表对象中的值。因此，您可能会大吃一惊，试图检查每一列的值。您不能从显示此值的任何客户端应用程序开始并尝试找出它使用什么查询来获取它吗？

无论如何，diciu 的回答提供了一种生成 SQL 查询以检查每个表的每一列的值的方法。您还可以使用 PL/SQL 块和动态 SQL 在一个 SQL 会话中完全完成类似的工作。这是一些仓促编写的代码：

```
 SET SERVEROUTPUT ON SIZE 100000

    DECLARE
      match_count INTEGER;
    BEGIN
      FOR t IN (SELECT owner, table_name, column_name
                  FROM all_tab_columns
                  WHERE owner <> 'SYS' and data_type LIKE '%CHAR%') LOOP

        EXECUTE IMMEDIATE
          'SELECT COUNT(*) FROM ' || t.owner || '.' || t.table_name ||
          ' WHERE '||t.column_name||' = :1'
          INTO match_count
          USING '1/22/2008P09RR8';

        IF match_count > 0 THEN
          dbms_output.put_line( t.table_name ||' '||t.column_name||' '||match_count );
        END IF;

      END LOOP;

    END;
    / 
```

也有一些方法可以提高效率。

在这种情况下，给定您要查找的值，您可以清楚地消除任何 NUMBER 或 DATE 类型的列，这将减少查询次数。甚至可能将其限制为类型类似于 '%CHAR%' 的列。

您可以像这样为每个表构建一个查询，而不是每列一个查询：

```
SELECT * FROM table1
  WHERE column1 = 'value'
     OR column2 = 'value'
     OR column3 = 'value'
     ...
     ; 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2011-02-25T06:55:18.590

如果您只在一个所有者中搜索，我对上述代码进行了一些修改以使其更快地工作。您只需更改 3 个变量 v_owner、v_data_type 和 v_search_string 以适应您正在搜索的内容。

```
SET SERVEROUTPUT ON SIZE 100000

DECLARE
  match_count INTEGER;
-- Type the owner of the tables you are looking at
  v_owner VARCHAR2(255) :='ENTER_USERNAME_HERE';

-- Type the data type you are look at (in CAPITAL)
-- VARCHAR2, NUMBER, etc.
  v_data_type VARCHAR2(255) :='VARCHAR2';

-- Type the string you are looking at
  v_search_string VARCHAR2(4000) :='string to search here...';

BEGIN
  FOR t IN (SELECT table_name, column_name FROM all_tab_cols where owner=v_owner and data_type = v_data_type) LOOP

    EXECUTE IMMEDIATE 
    'SELECT COUNT(*) FROM '||t.table_name||' WHERE '||t.column_name||' = :1'
    INTO match_count
    USING v_search_string;

    IF match_count > 0 THEN
      dbms_output.put_line( t.table_name ||' '||t.column_name||' '||match_count );
    END IF;

  END LOOP;
END;
/ 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-01-06T07:38:20.560

我知道这是一个老话题。但我看到对该问题的评论，询问是否可以在**`SQL`**而不是使用**`PL/SQL`**. 所以想发布一个解决方案。

下面的演示是[**在整个 SCHEMA 的所有 TABLES 的所有 COLUMNS 中搜索一个 VALUE**](http://lalitkumarb.wordpress.com/2015/01/06/sql-to-search-for-a-value-in-all-columns-of-all-atbles-in-an-entire-schema/)：

*   搜索**CHARACTER 类型**

`KING`让我们在`SCOTT`模式中查找值。

```
SQL> variable val varchar2(10)
SQL> exec :val := 'KING'

PL/SQL procedure successfully completed.

SQL> SELECT DISTINCT SUBSTR (:val, 1, 11) "Searchword",
  2    SUBSTR (table_name, 1, 14) "Table",
  3    SUBSTR (column_name, 1, 14) "Column"
  4  FROM cols,
  5    TABLE (xmlsequence (dbms_xmlgen.getxmltype ('select '
  6    || column_name
  7    || ' from '
  8    || table_name
  9    || ' where upper('
 10    || column_name
 11    || ') like upper(''%'
 12    || :val
 13    || '%'')' ).extract ('ROWSET/ROW/*') ) ) t
 14  ORDER BY "Table"
 15  /

Searchword  Table          Column
----------- -------------- --------------
KING        EMP            ENAME

SQL> 
```

*   搜索**NUMERIC 类型**

`20`让我们在`SCOTT`模式中查找值。

```
SQL> variable val NUMBER
SQL> exec :val := 20

PL/SQL procedure successfully completed.

SQL> SELECT DISTINCT SUBSTR (:val, 1, 11) "Searchword",
  2    SUBSTR (table_name, 1, 14) "Table",
  3    SUBSTR (column_name, 1, 14) "Column"
  4  FROM cols,
  5    TABLE (xmlsequence (dbms_xmlgen.getxmltype ('select '
  6    || column_name
  7    || ' from '
  8    || table_name
  9    || ' where upper('
 10    || column_name
 11    || ') like upper(''%'
 12    || :val
 13    || '%'')' ).extract ('ROWSET/ROW/*') ) ) t
 14  ORDER BY "Table"
 15  /

Searchword  Table          Column
----------- -------------- --------------
20          DEPT           DEPTNO
20          EMP            DEPTNO
20          EMP            HIREDATE
20          SALGRADE       HISAL
20          SALGRADE       LOSAL

SQL> 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-10-16T13:27:31.407

是的，你可以，你的 DBA 会恨你，并且会发现你把你的鞋子钉在地板上，因为这会导致大量的 I/O 并在缓存清除时降低数据库性能。

```
select column_name from all_tab_columns c, user_all_tables u where c.table_name = u.table_name; 
```

作为一个开始。

我将从运行查询开始，使用`v$session`和`v$sqlarea`。这根据 oracle 版本而变化。这将缩小空间并且不会击中所有内容。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2011-09-22T14:25:33.610

这是另一个修改版本，它将比较较低的子字符串匹配。这适用于 Oracle 11g。

```
DECLARE
  match_count INTEGER;
-- Type the owner of the tables you are looking at
  v_owner VARCHAR2(255) :='OWNER_NAME';

-- Type the data type you are look at (in CAPITAL)
-- VARCHAR2, NUMBER, etc.
  v_data_type VARCHAR2(255) :='VARCHAR2';

-- Type the string you are looking at
  v_search_string VARCHAR2(4000) :='%lower-search-sub-string%';

BEGIN
  FOR t IN (SELECT table_name, column_name FROM all_tab_cols where owner=v_owner and data_type = v_data_type) LOOP

    EXECUTE IMMEDIATE 
    'SELECT COUNT(*) FROM '||t.table_name||' WHERE lower('||t.column_name||') like :1'
    INTO match_count
    USING v_search_string;

    IF match_count > 0 THEN
      dbms_output.put_line( t.table_name ||' '||t.column_name||' '||match_count );
    END IF;

  END LOOP;
END;
/ 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-03-08T07:04:09.480

我修改了 Flood 的脚本，使其对每个表执行一次，而不是对每个表的每一列执行一次，以加快执行速度。它需要 Oracle 11g 或更高版本。

```
 set serveroutput on size 100000

declare
    v_match_count integer;
    v_counter integer;

    -- The owner of the tables to search through (case-sensitive)
    v_owner varchar2(255) := 'OWNER_NAME';
    -- A string that is part of the data type(s) of the columns to search through (case-insensitive)
    v_data_type varchar2(255) := 'CHAR';
    -- The string to be searched for (case-insensitive)
    v_search_string varchar2(4000) := 'FIND_ME';

    -- Store the SQL to execute for each table in a CLOB to get around the 32767 byte max size for a VARCHAR2 in PL/SQL
    v_sql clob := '';
begin
    for cur_tables in (select owner, table_name from all_tables where owner = v_owner and table_name in 
                       (select table_name from all_tab_columns where owner = all_tables.owner and data_type like '%' ||  upper(v_data_type) || '%')
                       order by table_name) loop
        v_counter := 0;
        v_sql := '';

        for cur_columns in (select column_name from all_tab_columns where 
                            owner = v_owner and table_name = cur_tables.table_name and data_type like '%' || upper(v_data_type) || '%') loop
            if v_counter > 0 then
                v_sql := v_sql || ' or ';
            end if;
            v_sql := v_sql || 'upper(' || cur_columns.column_name || ') like ''%' || upper(v_search_string) || '%''';
            v_counter := v_counter + 1;
        end loop;

        v_sql := 'select count(*) from ' || cur_tables.table_name || ' where ' || v_sql;

        execute immediate v_sql
        into v_match_count;

        if v_match_count > 0 then
            dbms_output.put_line('Match in ' || cur_tables.owner || ': ' || cur_tables.table_name || ' - ' || v_match_count || ' records');
        end if;
    end loop;

    exception
        when others then
            dbms_output.put_line('Error when executing the following: ' || dbms_lob.substr(v_sql, 32600));
end;
/ 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-10-16T13:48:07.467

我会做这样的事情（生成你需要的所有选择）。您可以稍后将它们提供给 sqlplus：

```
echo "select table_name from user_tables;" | sqlplus -S user/pwd | grep -v "^--" | grep -v "TABLE_NAME" | grep "^[A-Z]" | while read sw;
do echo "desc $sw" | sqlplus -S user/pwd | grep -v "\-\-\-\-\-\-" | awk -F' ' '{print $1}' | while read nw;
do echo "select * from $sw where $nw='val'";
done;
done; 
```

它产生：

```
select * from TBL1 where DESCRIPTION='val'
select * from TBL1 where ='val'
select * from TBL2 where Name='val'
select * from TBL2 where LNG_ID='val' 
```

它的作用是 - 为每个`table_name`从`user_tables`获取每个字段（来自 desc）并创建一个 select * from 表，其中字段等于“val”。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2017-11-27T20:00:17.123

我对@Lalit Kumars 的回答有以下问题，

```
ORA-19202: Error occurred in XML processing
ORA-00904: "SUCCESS": invalid identifier
ORA-06512: at "SYS.DBMS_XMLGEN", line 288
ORA-06512: at line 1
19202\. 00000 -  "Error occurred in XML processing%s"
*Cause:    An error occurred when processing the XML function
*Action:   Check the given error message and fix the appropriate problem 
```

解决方案是：

```
WITH  char_cols AS
  (SELECT /*+materialize */ table_name, column_name
   FROM   cols
   WHERE  data_type IN ('CHAR', 'VARCHAR2'))
SELECT DISTINCT SUBSTR (:val, 1, 11) "Searchword",
       SUBSTR (table_name, 1, 14) "Table",
       SUBSTR (column_name, 1, 14) "Column"
FROM   char_cols,
       TABLE (xmlsequence (dbms_xmlgen.getxmltype ('select "'
       || column_name
       || '" from "'
       || table_name
       || '" where upper("'
       || column_name
       || '") like upper(''%'
       || :val
       || '%'')' ).extract ('ROWSET/ROW/*') ) ) t
ORDER  BY "Table"
/ 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2012-11-02T09:43:48.613

如果我们知道表和列的名称，但想找出每个模式出现字符串的次数：

```
Declare

owner VARCHAR2(1000);
tbl VARCHAR2(1000);
cnt number;
ct number;
str_sql varchar2(1000);
reason varchar2(1000);
x varchar2(1000):='%string_to_be_searched%';

cursor csr is select owner,table_name 
from all_tables where table_name ='table_name';

type rec1 is record (
ct VARCHAR2(1000));

type rec is record (
owner VARCHAR2(1000):='',
table_name VARCHAR2(1000):='');

rec2 rec;
rec3 rec1;
begin

for rec2 in csr loop

--str_sql:= 'select count(*) from '||rec.owner||'.'||rec.table_name||' where CTV_REMARKS like '||chr(39)||x||chr(39);
--dbms_output.put_line(str_sql);
--execute immediate str_sql

execute immediate 'select count(*) from '||rec2.owner||'.'||rec2.table_name||' where column_name like '||chr(39)||x||chr(39)
into rec3;
if rec3.ct <> 0 then
dbms_output.put_line(rec2.owner||','||rec3.ct);
else null;
end if;
end loop;
end; 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2011-11-11T08:16:46.847

搜索整个数据库的过程：

```
 CREATE or REPLACE PROCEDURE SEARCH_DB(SEARCH_STR IN VARCHAR2, TAB_COL_RECS OUT VARCHAR2) IS
      match_count integer;
      qry_str varchar2(1000);
      CURSOR TAB_COL_CURSOR IS 
          SELECT TABLE_NAME,COLUMN_NAME,OWNER,DATA_TYPE FROM ALL_TAB_COLUMNS WHERE DATA_TYPE in ('NUMBER','VARCHAR2') AND OWNER='SCOTT';
          BEGIN  
            FOR TAB_COL_REC  IN TAB_COL_CURSOR
            LOOP
              qry_str := 'SELECT COUNT(*) FROM '||TAB_COL_REC.OWNER||'.'||TAB_COL_REC.TABLE_NAME|| 
              ' WHERE '||TAB_COL_REC.COLUMN_NAME;
               IF TAB_COL_REC.DATA_TYPE = 'NUMBER' THEN
                      qry_str := qry_str||'='||SEARCH_STR; 
               ELSE
                       qry_str := qry_str||' like '||SEARCH_STR; 
               END IF;
                       --dbms_output.put_line( qry_str );
                EXECUTE IMMEDIATE  qry_str  INTO match_count;
                IF match_count > 0 THEN          
                   dbms_output.put_line( qry_str );
                  --dbms_output.put_line( TAB_COL_REC.TABLE_NAME ||' '||TAB_COL_REC.COLUMN_NAME ||' '||match_count);     
                    TAB_COL_RECS := TAB_COL_RECS||'@@'||TAB_COL_REC.TABLE_NAME||'##'||TAB_COL_REC.COLUMN_NAME;
                END IF; 
          END LOOP;
     END SEARCH_DB; 
```

执行语句

```
 DECLARE
    SEARCH_STR VARCHAR2(200);
    TAB_COL_RECS VARCHAR2(200);
    BEGIN
      SEARCH_STR := 10;
      SEARCH_DB(
        SEARCH_STR => SEARCH_STR,
        TAB_COL_RECS => TAB_COL_RECS
      );
     DBMS_OUTPUT.PUT_LINE('TAB_COL_RECS = ' || TAB_COL_RECS);
     END; 
```

样本结果

```
Connecting to the database test.
SELECT COUNT(*) FROM SCOTT.EMP WHERE DEPTNO=10
SELECT COUNT(*) FROM SCOTT.DEPT WHERE DEPTNO=10
TAB_COL_RECS = @@EMP##DEPTNO@@DEPT##DEPTNO
Process exited.
Disconnecting from the database test. 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-10-16T13:21:02.933

我没有关于 SQL 提示的简单解决方案。然而，有不少工具，如 toad 和 PL/SQL Developer，它们有一个 GUI，用户可以在其中输入要搜索的字符串，它会返回找到的表/过程/对象。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2010-10-04T08:35:12.743

有一些免费工具可以进行这种搜索，例如，这个工作正常并且源代码可用： [https ://sites.google.com/site/freejansoft/dbsearch](https://sites.google.com/site/freejansoft/dbsearch)

您需要 Oracle ODBC 驱动程序和 DSN 才能使用此工具。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-06-19T15:53:15.467

修改代码以使用 LIKE 查询不区分大小写搜索，而不是查找完全匹配...

```
DECLARE
  match_count INTEGER;
  -- Type the owner of the tables you want to search.
  v_owner VARCHAR2(255) :='USER';
  -- Type the data type you're looking for (in CAPS). Examples include: VARCHAR2, NUMBER, etc.
  v_data_type VARCHAR2(255) :='VARCHAR2';
  -- Type the string you are looking for.
  v_search_string VARCHAR2(4000) :='Test';
BEGIN
  dbms_output.put_line( 'Starting the search...' );
  FOR t IN (SELECT table_name, column_name FROM all_tab_cols where owner=v_owner and data_type = v_data_type) LOOP
    EXECUTE IMMEDIATE 
    'SELECT COUNT(*) FROM '||t.table_name||' WHERE LOWER('||t.column_name||') LIKE :1'
    INTO match_count
    USING LOWER('%'||v_search_string||'%');
    IF match_count > 0 THEN
      dbms_output.put_line( t.table_name ||' '||t.column_name||' '||match_count );
    END IF;
  END LOOP;
END; 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-04-13T02:26:38.253

--运行完成--没有错误

```
 SET SERVEROUTPUT ON SIZE 100000

DECLARE
   v_match_count     INTEGER;
   v_counter         INTEGER;

v_owner           VARCHAR2 (255) := 'VASOA';
v_search_string   VARCHAR2 (4000) := '99999';
v_data_type       VARCHAR2 (255) := 'CHAR';
v_sql             CLOB := '';

BEGIN
   FOR cur_tables
      IN (  SELECT owner, table_name
              FROM all_tables
             WHERE     owner = v_owner
                   AND table_name IN (SELECT table_name
                                        FROM all_tab_columns
                                       WHERE     owner = all_tables.owner
                                             AND data_type LIKE
                                                       '%'
                                                    || UPPER (v_data_type)
                                                    || '%')
          ORDER BY table_name)
   LOOP
      v_counter := 0;
      v_sql := '';

      FOR cur_columns
         IN (SELECT column_name, table_name
               FROM all_tab_columns
              WHERE     owner = v_owner
                    AND table_name = cur_tables.table_name
                    AND data_type LIKE '%' || UPPER (v_data_type) || '%')
      LOOP
         IF v_counter > 0
         THEN
            v_sql := v_sql || ' or ';
         END IF;

         IF cur_columns.column_name is not null
         THEN
            v_sql :=
                  v_sql
               || 'upper('
               || cur_columns.column_name
               || ') ='''
               || UPPER (v_search_string)||'''';

            v_counter := v_counter + 1;
         END IF;

      END LOOP;

      IF v_sql is  null
      THEN
         v_sql :=
               'select count(*) from '
            || v_owner
            || '.'
            || cur_tables.table_name;

      END IF;

      IF v_sql is not null
      THEN
         v_sql :=
               'select count(*) from '
            || v_owner
            || '.'
            || cur_tables.table_name
            || ' where '
            || v_sql;
      END IF;

      --v_sql := 'select count(*) from ' ||v_owner||'.'|| cur_tables.table_name ||' where '||  v_sql;

      --dbms_output.put_line(v_sql);
      --DBMS_OUTPUT.put_line (v_sql);

      EXECUTE IMMEDIATE v_sql INTO v_match_count;

      IF v_match_count > 0
      THEN
        DBMS_OUTPUT.put_line (v_sql);
        dbms_output.put_line('Match in ' || cur_tables.owner || ': ' || cur_tables.table_name || ' - ' || v_match_count || ' records');
      END IF;

   END LOOP;
EXCEPTION
   WHEN OTHERS
   THEN
      DBMS_OUTPUT.put_line (
            'Error when executing the following: '
         || DBMS_LOB.SUBSTR (v_sql, 32600));
END;
/ 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-09-19T13:59:59.570

[从这篇博客文章](https://lalitkumarb.wordpress.com/2015/01/06/sql-to-search-for-a-value-in-all-columns-of-all-atbles-in-an-entire-schema/)中借用、稍微增强和简化以下简单的 SQL 语句似乎可以很好地完成这项工作：

```
SELECT DISTINCT (:val) "Search Value", TABLE_NAME "Table", COLUMN_NAME "Column"
FROM cols,
     TABLE (XMLSEQUENCE (DBMS_XMLGEN.GETXMLTYPE(
       'SELECT "' || COLUMN_NAME || '" FROM "' || TABLE_NAME || '" WHERE UPPER("'
       || COLUMN_NAME || '") LIKE UPPER(''%' || :val || '%'')' ).EXTRACT ('ROWSET/ROW/*')))
ORDER BY "Table"; 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-05-08T00:11:27.153

我找到了最好的解决方案，但它有点慢。（它将与所有 SQL IDE 完美配合。）

```
SELECT DISTINCT table_name, column_name, data_type
  FROM user_tab_cols,
  TABLE (xmlsequence (dbms_xmlgen.getxmltype ('select '
  || column_name
  || ' from '
  || table_name
  || ' where lower('
  || column_name
  || ') like lower(''%'
  || 'your_text_here'
  || '%'')' ).extract ('ROWSET/ROW/*') ) ) a
  where table_name not in (
    select distinct table_name
      from user_tab_cols where data_type like 'SDO%'
      or data_type like '%LOB') AND DATA_TYPE = 'VARCHAR2'
  order by table_name, column_name; 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-06-23T07:55:27.327

Oracle LIKE 条件允许在 SELECT、INSERT、UPDATE 或 DELETE 语句的 WHERE 子句中使用通配符。

%：匹配任意长度的任意字符串

例如-

```
SELECT last_name
   FROM   customer_tab
   WHERE  last_name LIKE '%A%'; 
```

-：匹配单个字符

例如-

```
SELECT last_name
   FROM   customer_tab
   WHERE  last_name LIKE 'A_t'; 
```

# java - Struts JSP 上一个链接

> ID：208518
> 
> 赞同：2
> 
> 时间：2008-10-16T13:20:37.257
> 
> 标签：java, jsp, web-applications, struts, jsp-tags

有谁知道我如何检索页面来自 JSP 的先前 JSP URL？

我可以从会话/请求/响应对象中检索它吗？

希望这是有道理的，谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-16T15:43:16.003

非常感谢 - 很抱歉无法标记我的正确答案，因为该网站似乎已经改变，我不知道如何做到这一点，但我使用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-20T10:24:19.247

更简单：

```
<%= request.getHeader("Referer") %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-16T13:29:28.457

（假设 Struts 1）

那么在 struts-config.xml 中的 action 元素中有一个输入参数（在 action-mappings 部分中）所以在你的 action（java 类）中你可以像这样访问这个值：

`public ActionForward action(ActionMapping mapping, ActionForm form, HttpServletRequest request, HttpServletResponse response) { //do some stuff return mapping.getInputForward(); //return to the caller }`

因此，如果您希望某个操作返回其原始页面，您可以定义多个指向同一操作但名称和输入值不同的操作条目。

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-16T13:35:51.453

假设您正在谈论在自己的应用程序中导航并假设 struts 2 您可以将参数传递给操作，让我们调用它 next，并带有下一个操作的名称。假设您在 struts.xml 中定义了一个操作：

```
<action name="myaction" class="com.me.MyActionClass">
   <result name="success">${next}</result>
</action> 
```

在 MyActionClass 中，您必须使用它的 getter 和 setter 来声明该属性。调用此操作时，您必须提供 next 的值，该值可以与您从中调用操作的页面同名。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-07-14T10:33:27.193

例如，在referer 中，我得到的uri 为[http://www.sun.com/questions?pnr=18&value=gg](http://www.sun.com/questions?pnr=18&value=gg) ，而当时我pront referer 我得到了这个字符串。现在我需要获取**参数**值如何获取它。从那个字符串

# networking - 没有虚拟 PC 的具有网络访问权限的掌上电脑模拟器？

> ID：208528
> 
> 赞同：4
> 
> 时间：2008-10-16T13:22:12.590
> 
> 标签：networking, emulation, pocketpc

在为 Pocket PC 平台开发软件时，我一直很高兴地使用 Microsoft 随 Visual Studio 提供的 Pocket PC 仿真器（并且可以免费下载）。它提供了更快的开发/部署/测试周期。（当然，我仍然在真实硬件上进行最终测试）。我还发现，将模拟器提供给办公室的其他人（例如文档团队）可以让他们轻松获得准确的屏幕截图。所以，我相信这是适合我情况的一个很好的工具。

这里有一个问题：为了使用模拟器的网络功能，必须在运行模拟器的机器上安装 Microsoft Virtual PC。对于这么小的工具，这似乎是一个可怕的重量级要求。有没有人找到一种更简单的方法来在 Pocket PC 模拟器上启用网络功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2011-11-14T14:37:00.343

可以从 Virtual PC 2007 安装文件中提取模拟器所需的驱动程序。对于安装了*Windows Virtual PC*的 Windows 7 用户，这实际上是让模拟器在网络环境中工作的*唯一*已知方法（因为一旦安装了 Windows Virtual PC，就不能选择安装 Virtual PC 2007）。

这是解释该过程的博客文章。简而言之，从 Virtual PC 2007 SP1 安装文件中提取**VMNetSrv**驱动程序，然后在用于 Internet 连接的网络适配器上手动安装此驱动程序：

*   [BrianPeek.com：Windows Virtual PC 和 Microsoft 设备模拟器](http://www.brianpeek.com/post/2009/05/02/windows-virtual-pc-and-the-microsoft-device-emulator.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-16T13:46:15.833

简单的答案是否定的，但是...

您是否考虑过使用 Microsoft 的免费电动玩具[远程显示控制并跨 ActiveSync 运行您的应用程序。](http://www.microsoft.com/downloads/details.aspx?FamilyID=74473fd6-1dcc-47aa-ab28-6a2b006edfe9&displaylang=en)这意味着您使用的是实际的硬件、网络通信和所有设备，但屏幕、键盘和鼠标反映在屏幕上。我觉得这是一种享受。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2008-11-02T00:46:21.567

我们更进一步。我们创建了一个针对紧凑框架构建的解决方案和一个针对 win32 .net 框架构建的解决方案。由于所有代码都只是 C#，因此在 PC 上将应用程序编译和运行为 Win32 应用程序应该没有任何问题。

还有一个很大的好处 - 为 Win32 编译比为 WinCE 编译要快得多。

希望这可以帮助...

# installation - 为什么 MSI 需要原始 .msi 文件才能继续卸载？

> ID：208530
> 
> 赞同：14
> 
> 时间：2008-10-16T13:23:10.373
> 
> 标签：installation, wix, windows-installer, installshield, uninstallation

大多数人可能已经注意到，在卸载 MSI 包时，Windows 会要求提供原始`.msi`文件。这是为什么？

我只能看到它的缺点：

*   对网络变化没有弹性。
*   对本地磁盘更改没有弹性。
*   出乎用户意料。
*   通常要求用户离开他们的办公桌并开始讨伐以获得正确的 CD。
*   某种证明装置不是独立的。
*   提倡使用不安全的工具，例如 msizap。
*   这反过来又促进了“下次我将只使用 zip 文件”的心态。

有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-07-27T17:28:57.280

> ***修复损坏的卸载***：如果您在卸载 MSI 时遇到问题可以尝试[Microsoft 最新的 FixIt 卸载工具。](https://support.microsoft.com/en-us/help/17588/fix-problems-that-block-programs-from-being-installed-or-removed)还有一个链接：[在不使用 msiexec 的情况下从命令行卸载 MSI 文件](https://stackoverflow.com/questions/450027/uninstalling-an-msi-file-from-the-command-line-without-using-msiexec/1055933#1055933)（卸载 MSI 的多种不同方法）。

* * *

**更新**：

~~[**这个新的支持工具**](http://support2.microsoft.com/default.aspx?scid=kb;en-us;290301)~~（此工具现在也已弃用）如果您有**需要卸载的失效 MSI 软件包**（而不是过时的、弃用的、不受支持的~~msizap.exe~~）。

有些人建议使用 saschabeaumont 链接到此处的工具：**[Uninstall without a MSI file](https://stackoverflow.com/questions/334490/uninstall-without-an-msi-file/11058378#11058378)**。如果您尝试了它并且它有效，请务必让我们知道。该答案中的反馈表明它有效（到目前为止，我没有任何卡住的设置可供测试）。

* * *

***为什么要求您提供原始安装介质？***：

*   **除非 MSI 本身设计不当或缓存的 MSI 丢失（请参阅下面的详细信息）**，否则卸载不需要原始 MSI 。****
***   所有已安装的 MSI 文件都使用**随机十六进制名称缓存在****%SystemRoot%\Installer\*.***中。***   缓存的 MSI 文件用于任何**维护**、**修复**和**卸载**操作 - 在绝大多数情况下足以卸载。*   *在某些情况下，**这个缓存文件可能会丢失**，然后在某些情况下根本不可能卸载*（[关于为什么会发生这种情况的一些理论](https://stackoverflow.com/questions/50475550/powershell-silent-uninstall-microsoft-report-viewer-runtime-2012/50478416#50478416)- **`MSI design errors`**, **`anti-virus quarantining`**, **`system restore`**, **`tinkering`**, **`developer system in erroneous state from development work`**, **`etc...`**）。请参阅下面的更多信息 - 以及强制卸载或注销产品的链接。*   **仅当需要将文件复制到磁盘（用于维护安装）时才需要**原始源，或者 MSI 通过标准操作****ResolveSource**或自定义操作（**不应该这样做）****明确请求**解析原始源**在正确编写的包中**- 我认为 MS Office 包在当天包含此 ResolveSource 错误，导致每个人都去寻找他们的安装 CD/DVD）。*********   在以前的 Windows 版本中，这个缓存的 MSI 被剥离了所有的 cab，因此只包含安装程序结构，没有文件。*   从 Windows 7（**MSI 版本 5**）开始，**MSI 文件现在被全尺寸缓存**，以避免破坏文件签名，这会影响安装程序启动时的 UAC 提示（一个已知的 Vista 问题）。这可能会导致磁盘空间消耗的巨大增加（某些系统为几 GB）。[查看这篇文章，尤其是底部的讨论以获取更多信息](https://www.symantec.com/connect/forums/caching-msi-windowsinstaller-folder)。*   为防止缓存巨大的 MSI 文件，您可以在安装前运行软件包的**管理员**安装。这就是在托管网络中进行适当部署的公司将如何做事，它将去除 cab 文件并使用一个小的 MSI 文件和除此之外的文件创建一个网络安装点。*请注意，这可能会在某些情况下产生**UAC 提示**，因为提取的 MSI 文件不再签名 - 这必须使用您的 SOE/桌面配置进行测试*。*   阅读我在此线程中的答案以获取有关管理员安装的完整描述：[使用 msiexec /a 启动的管理安装的目的是什么？](https://stackoverflow.com/questions/5564619/what-is-the-purpose-of-administrative-installation-initiated-using-msiexec-a) 或者这个类似但可能更容易理解的答案：[**admin install and its uses**](https://stackoverflow.com/questions/1547809/extract-msi-from-exe/24987512#24987512)*   *在极少数情况下，缓存的 MSI（具有随机名称）可能会错误地丢失，然后卸载将要求原始 MSI 以完成卸载。*这并不经常发生。它曾经是一个可以使用的情况~~**MsiZap.exe**~~清理这样的安装，但这个工具已经**过时**、**不推荐使用**并且**不受支持**。不要使用它 - 与较新的 Windows 版本有太多不兼容，并且会产生新问题。也许尝试~~[**这个支持工具**](http://support2.microsoft.com/default.aspx?scid=kb;en-us;290301)~~相反（也已弃用）。我现在可以建议的唯一选择是[**saschabeaumont 的这个答案**](https://stackoverflow.com/questions/334490/uninstall-without-an-msi-file/11058378#11058378)。*如果您尝试使用此工具，请告诉我们它是否适合您*。如果您想找出可能导致缓存 MSI 丢失的原因，请尝试阅读此处的第 12 节：[在不使用 msiexec 的情况下从命令行卸载 MSI 文件](https://stackoverflow.com/questions/450027/uninstalling-an-msi-file-from-the-command-line-without-using-msiexec/1055933#1055933)（简而言之，潜在原因包括干扰系统还原、防病毒和清理脚本，错误的手动调整，磁盘空间不足，停电，开发人员框调试错误，设计错误的带有重复包代码的MSI文件，失败的补丁等......许多理论，恐怕很少有确定性）。*   作为**最后的手段**，您可以尝试**[系统还原](http://en.wikipedia.org/wiki/System_Restore)**（除非已完全或部分禁用）以返回到以前的安装状态，看看这是否解决了您的卸载问题（您可以在 youtube 或类似网站上找到此视频演示） .*   请注意，系统还原可能会影响必须重新应用的 Windows 更新以及许多其他系统设置。我看到系统还原导致新的、无法解决的安装问题，但通常可以正常工作。显然不要为了好玩而使用该功能，**这是最后的手段**，最适合用于**回滚**刚刚安装的新驱动程序或设置，发现会立即导致问题和此类问题。你回去的时间越长，你为自己创造的返工就越多。很多不言而喻的东西，但我想它需要被提及。*   由于我提到了系统还原，我想我应该提到[Last Known Good Configuration 功能](http://support.microsoft.com/kb/307852)。此功能与卸载或系统还原无关，但它是最后一次有效或导致系统运行的引导配置。如果系统在引导过程中蓝屏或停止，它可用于让您的系统再次运行。这通常发生在驱动程序安装后。不过，这对修复失败的卸载无济于事（否则我会感到**非常**惊讶）。**********

 ****相关答案：

*   [在没有 MSI 文件的情况下卸载](https://stackoverflow.com/questions/334490/uninstall-without-msi-file/1061570#1061570)

* * *

除了这个答案，也许这篇关于卸载 MSI 包的各种方法的文章也很有趣。这是一篇**颇受欢迎的文章**，**浏览量很高**：

*   **[从命令行卸载 MSI 文件而不使用 msiexec](https://stackoverflow.com/questions/450027/uninstalling-an-msi-file-from-the-command-line-without-using-msiexec/1055933#1055933)**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-16T13:29:26.413

保留原始 msi 有几个原因：

*   卸载程序使用它来了解安装了哪些文件和注册表项，并确保它们都被清理干净。
*   msi 可能包含需要执行的特殊卸载操作。
*   它允许您从“添加/删除程序”菜单执行“修复”操作，无论您是否自己保存了安装文件。

通常情况下，Windows 会为您保留文件缓存，因此您不必考虑它。查看您的`%WINDIR%\Installer\`文件夹。它会要求您提供原始 msi 的唯一原因是保存的文件是否有问题。这解决了您的大部分问题，尽管它确实提出了一个新问题（磁盘空间）。

# c# - 如何将 DataTable 转换为通用列表？

> ID：208532
> 
> 赞同：198
> 
> 时间：2008-10-16T13:23:50.543
> 
> 标签：c#, generics, datatable

目前，我正在使用：

```
DataTable dt = CreateDataTableInSomeWay();

List<DataRow> list = new List<DataRow>(); 
foreach (DataRow dr in dt.Rows)
{
    list.Add(dr);
} 
```

有没有更好/神奇的方法？

* * *

## 回答 #1

> 赞同：296
> 
> 时间：2008-10-16T13:59:01.580

如果您使用的是 .NET 3.5，则可以使用[`DataTableExtensions.AsEnumerable`](http://msdn.microsoft.com/en-us/library/system.data.datatableextensions.asenumerable.aspx)(一种扩展方法)，然后如果您真的需要 a`List<DataRow>`而不仅仅是`IEnumerable<DataRow>`您可以调用[`Enumerable.ToList`](http://msdn.microsoft.com/en-us/library/bb342261.aspx)：

```
IEnumerable<DataRow> sequence = dt.AsEnumerable(); 
```

或者

```
using System.Linq;
...
List<DataRow> list = dt.AsEnumerable().ToList(); 
```

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2011-12-15T18:44:19.060

```
List<Employee> emp = new List<Employee>();

//Maintaining DataTable on ViewState
//For Demo only

DataTable dt = ViewState["CurrentEmp"] as DataTable;

//read data from DataTable 
//using lamdaexpression

emp = (from DataRow row in dt.Rows

   select new Employee
   {
       _FirstName = row["FirstName"].ToString(),
       _LastName = row["Last_Name"].ToString()

   }).ToList(); 
```

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2008-10-16T13:28:03.530

使用 C# 3.0 和 System.Data.DataSetExtensions.dll，

```
List<DataRow> rows = table.Rows.Cast<DataRow>().ToList(); 
```

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2008-10-16T13:26:16.887

你可以使用

```
List<DataRow> list = new List<DataRow>(dt.Select()); 
```

`dt.Select()`将返回表中的所有行，作为数据行数组，并且`List`构造函数接受该对象数组作为初始填充列表的参数。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2015-04-26T12:21:11.700

您可以将扩展功能创建为：

```
public static List<T> ToListof<T>(this DataTable dt)
{
    const BindingFlags flags = BindingFlags.Public | BindingFlags.Instance;
    var columnNames = dt.Columns.Cast<DataColumn>()
        .Select(c => c.ColumnName)
        .ToList();
    var objectProperties = typeof(T).GetProperties(flags);
    var targetList = dt.AsEnumerable().Select(dataRow =>
    {
        var instanceOfT = Activator.CreateInstance<T>();

        foreach (var properties in objectProperties.Where(properties => columnNames.Contains(properties.Name) && dataRow[properties.Name] != DBNull.Value))
        {
            properties.SetValue(instanceOfT, dataRow[properties.Name], null);
        }
        return instanceOfT;
    }).ToList();

    return targetList;
}

var output = yourDataInstance.ToListof<targetModelType>(); 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2012-10-10T14:56:46.627

如果您只想返回“ID” int 字段中的值列表，您可以使用...

```
List<int> ids = (from row in dt.AsEnumerable() select Convert.ToInt32(row["ID"])).ToList(); 
```

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2015-04-14T11:13:04.633

[我已经从这个答案（ https://stackoverflow.com/a/24588210/4489664](https://stackoverflow.com/a/24588210/4489664) ）中添加了一些修改代码，因为对于可为空的类型，它将返回异常

```
public static List<T> DataTableToList<T>(this DataTable table) where T: new()
{
    List<T> list = new List<T>();
    var typeProperties = typeof(T).GetProperties().Select(propertyInfo => new
        {
            PropertyInfo = propertyInfo,
            Type = Nullable.GetUnderlyingType(propertyInfo.PropertyType) ?? propertyInfo.PropertyType
        }).ToList();

    foreach (var row in table.Rows.Cast<DataRow>())
    {
        T obj = new T();
        foreach (var typeProperty in typeProperties)
        {
            object value = row[typeProperty.PropertyInfo.Name];
            object safeValue = value == null || DBNull.Value.Equals(value)
                ? null
                : Convert.ChangeType(value, typeProperty.Type);

            typeProperty.PropertyInfo.SetValue(obj, safeValue, null);
        }
        list.Add(obj);
    }
    return list;
} 
```

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2012-07-31T06:00:38.880

```
using System.Data;

var myEnumerable = myDataTable.AsEnumerable();

List<MyClass> myClassList =
    (from item in myEnumerable
     select new MyClass{
         MyClassProperty1 = item.Field<string>("DataTableColumnName1"),
         MyClassProperty2 = item.Field<string>("DataTableColumnName2")
    }).ToList(); 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2010-03-15T13:17:00.460

同样，使用 3.5 你可以这样做：

```
dt.Select().ToList() 
```

BRGDS

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2013-07-23T19:59:59.237

```
// this is better suited for expensive object creation/initialization
IEnumerable<Employee> ParseEmployeeTable(DataTable dtEmployees)
{
    var employees = new ConcurrentBag<Employee>();

    Parallel.ForEach(dtEmployees.AsEnumerable(), (dr) =>
    {
        employees.Add(new Employee() 
        {
            _FirstName = dr["FirstName"].ToString(),
            _LastName = dr["Last_Name"].ToString()
        });
    });

    return employees;
} 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2009-03-30T15:59:08.263

一种更“神奇”的方式，不需要 .NET 3.5。

例如，如果`DBDatatable`返回一列 Guids（SQL 中的唯一标识符），那么您可以使用：

```
Dim gList As New List(Of Guid)
gList.AddRange(DirectCast(DBDataTable.Select(), IEnumerable(Of Guid))) 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2009-07-09T09:52:33.660

`DataTable.Select()`没有按照它们在数据表中出现的顺序给出行。

如果顺序很重要，我觉得迭代数据行集合并形成一个列表是正确的方法，或者您也可以使用`DataTable.Select(string filterexpression, string sort)`.

但是这种重载可能无法处理 SQL 提供的所有排序（如按大小写排序...）。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2012-12-06T05:47:40.030

```
DataTable dt;   // datatable should contains datacolumns with Id,Name

List<Employee> employeeList=new List<Employee>();  // Employee should contain  EmployeeId, EmployeeName as properties

foreach (DataRow dr in dt.Rows)
{
    employeeList.Add(new Employee{EmployeeId=dr.Id,EmplooyeeName=dr.Name});
} 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2018-01-30T09:36:26.100

```
 /* This is a generic method that will convert any type of DataTable to a List 
         * 
         * 
         * Example :    List< Student > studentDetails = new List< Student >();  
         *              studentDetails = ConvertDataTable< Student >(dt);  
         *
         * Warning : In this case the DataTable column's name and class property name
         *           should be the same otherwise this function will not work properly
         */ 
```

> 下面是两个函数，如果我们传递一个 DataTable 和一个用户定义的类。然后它将返回该类的列表以及 DataTable 数据。

```
 public static List<T> ConvertDataTable<T>(DataTable dt)
        {
            List<T> data = new List<T>();
            foreach (DataRow row in dt.Rows)
            {
                T item = GetItem<T>(row);
                data.Add(item);
            }
            return data;
        }

        private static T GetItem<T>(DataRow dr)
        {
            Type temp = typeof(T);
            T obj = Activator.CreateInstance<T>();

            foreach (DataColumn column in dr.Table.Columns)
            {
                foreach (PropertyInfo pro in temp.GetProperties())
                {
                   //in case you have a enum/GUID datatype in your model
                   //We will check field's dataType, and convert the value in it.
                    if (pro.Name == column.ColumnName){                
                    try
                    {
                        var convertedValue = GetValueByDataType(pro.PropertyType, dr[column.ColumnName]);
                        pro.SetValue(obj, convertedValue, null);
                    }
                    catch (Exception e)
                    {         
                       //ex handle code                   
                        throw;
                    }
                        //pro.SetValue(obj, dr[column.ColumnName], null);
                }
                    else
                        continue;
                }
            }
            return obj;
        } 
```

> 此方法将检查字段的数据类型，并将 dataTable 值转换为该数据类型。

```
 private static object GetValueByDataType(Type propertyType, object o)
    {
        if (o.ToString() == "null")
        {
            return null;
        }
        if (propertyType == (typeof(Guid)) || propertyType == typeof(Guid?))
        {
            return Guid.Parse(o.ToString());
        }
        else if (propertyType == typeof(int) || propertyType.IsEnum) 
        {
            return Convert.ToInt32(o);
        }
        else if (propertyType == typeof(decimal) )
        {
            return Convert.ToDecimal(o);
        }
        else if (propertyType == typeof(long))
        {
            return Convert.ToInt64(o);
        }
        else if (propertyType == typeof(bool) || propertyType == typeof(bool?))
        {
            return Convert.ToBoolean(o);
        }
        else if (propertyType == typeof(DateTime) || propertyType == typeof(DateTime?))
        {
            return Convert.ToDateTime(o);
        }
        return o.ToString();
    } 
```

> 要调用上述方法，请使用以下语法：

```
List< Student > studentDetails = new List< Student >();  
studentDetails = ConvertDataTable< Student >(dt); 
```

> 根据您的要求更改 Student 类名称和 dt 值。在这种情况下，DataTable 列的名称和类属性名称应该相同，否则此函数将无法正常工作。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2020-01-23T12:49:56.653

**将 DataTable 转换为类的通用列表的最简单方法**

使用 Newtonsoft.Json；

```
var json = JsonConvert.SerializeObject(dataTable);
var model = JsonConvert.DeserializeObject<List<ClassName>>(json); 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-04-20T06:34:21.787

使用`System.Data`命名空间然后你会得到`.AsEnumerable()`.

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2020-05-06T13:12:39.987

```
lPerson = dt.AsEnumerable().Select(s => new Person()
        {
            Name = s.Field<string>("Name"),
            SurName = s.Field<string>("SurName"),
            Age = s.Field<int>("Age"),
            InsertDate = s.Field<DateTime>("InsertDate")
        }).ToList(); 
```

链接到工作[DotNetFiddle 示例](https://dotnetfiddle.net/jPozFN)

```
 using System;
    using System.Collections.Generic;   
    using System.Data;
    using System.Linq;
    using System.Data.DataSetExtensions;

    public static void Main()
    {
        DataTable dt = new DataTable();
        dt.Columns.Add("Name", typeof(string));
        dt.Columns.Add("SurName", typeof(string));
        dt.Columns.Add("Age", typeof(int));
        dt.Columns.Add("InsertDate", typeof(DateTime));

        var row1= dt.NewRow();
        row1["Name"] = "Adam";
        row1["SurName"] = "Adam";
        row1["Age"] = 20;
        row1["InsertDate"] = new DateTime(2020, 1, 1);
        dt.Rows.Add(row1);

        var row2 = dt.NewRow();
        row2["Name"] = "John";
        row2["SurName"] = "Smith";
        row2["Age"] = 25;
        row2["InsertDate"] = new DateTime(2020, 3, 12);
        dt.Rows.Add(row2);

        var row3 = dt.NewRow();
        row3["Name"] = "Jack";
        row3["SurName"] = "Strong";
        row3["Age"] = 32;
        row3["InsertDate"] = new DateTime(2020, 5, 20);
        dt.Rows.Add(row3);

        List<Person> lPerson = new List<Person>();
        lPerson = dt.AsEnumerable().Select(s => new Person()
        {
            Name = s.Field<string>("Name"),
            SurName = s.Field<string>("SurName"),
            Age = s.Field<int>("Age"),
            InsertDate = s.Field<DateTime>("InsertDate")
        }).ToList();

        foreach(Person pers in lPerson)
        {
            Console.WriteLine("{0} {1} {2} {3}", pers.Name, pers.SurName, pers.Age, pers.InsertDate);
        }
    }   

    public class Person
    {
        public string Name { get; set; }
        public string SurName { get; set; }
        public int Age { get; set; }
        public DateTime InsertDate { get; set; }
    }
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-09-02T13:26:15.667

**这对我有用：** 至少需要 .Net Framework 3.5， *下面的代码显示 DataRow 转为 Generic.IEnumerable，comboBox1 已用于更好的说明。*

```
using System.Linq;

DataTable dt = new DataTable();            
dt = myClass.myMethod();                 
List<object> list = (from row in dt.AsEnumerable() select (row["name"])).ToList();
comboBox1.DataSource = list; 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-02-07T09:01:22.840

[输出](http://i.stack.imgur.com/dGz6P.png)

```
public class ModelUser
{
    #region Model

    private string _username;
    private string _userpassword;
    private string _useremail;
    private int _userid;

    /// <summary>
    /// 
    /// </summary>
    public int userid
    {
        set { _userid = value; }
        get { return _userid; }
    }

    /// <summary>
    /// 
    /// </summary>

    public string username
    {
        set { _username = value; }
        get { return _username; }
    }

    /// <summary>
    /// 
    /// </summary>
    public string useremail
    {
        set { _useremail = value; }
        get { return _useremail; }
    }

    /// <summary>
    /// 
    /// </summary>
    public string userpassword
    {
        set { _userpassword = value; }
        get { return _userpassword; }
    }
    #endregion Model
}

public List<ModelUser> DataTableToList(DataTable dt)
{
    List<ModelUser> modelList = new List<ModelUser>();
    int rowsCount = dt.Rows.Count;
    if (rowsCount > 0)
    {
        ModelUser model;
        for (int n = 0; n < rowsCount; n++)
        {
            model = new ModelUser();

            model.userid = (int)dt.Rows[n]["userid"];
            model.username = dt.Rows[n]["username"].ToString();
            model.useremail = dt.Rows[n]["useremail"].ToString();
            model.userpassword = dt.Rows[n]["userpassword"].ToString();

            modelList.Add(model);
        }
    }
    return modelList;
}

static DataTable GetTable()
{
    // Here we create a DataTable with four columns.
    DataTable table = new DataTable();
    table.Columns.Add("userid", typeof(int));
    table.Columns.Add("username", typeof(string));
    table.Columns.Add("useremail", typeof(string));
    table.Columns.Add("userpassword", typeof(string));

    // Here we add five DataRows.
    table.Rows.Add(25, "Jame", "Jame@hotmail.com", DateTime.Now.ToString());
    table.Rows.Add(50, "luci", "luci@hotmail.com", DateTime.Now.ToString());
    table.Rows.Add(10, "Andrey", "Andrey@hotmail.com", DateTime.Now.ToString());
    table.Rows.Add(21, "Michael", "Michael@hotmail.com", DateTime.Now.ToString());
    table.Rows.Add(100, "Steven", "Steven@hotmail.com", DateTime.Now.ToString());
    return table;
}

protected void Page_Load(object sender, EventArgs e)
{
    List<ModelUser> userList = new List<ModelUser>();

    DataTable dt = GetTable();

    userList = DataTableToList(dt);

    gv.DataSource = userList;
    gv.DataBind();
}[enter image description here][1] 
```

```
</asp:GridView>
</div> 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-03-10T11:58:18.400

我们可以使用通用方法来转换`DataTable`为，`List`而不是手动将 a 转换`DataTable`为`List`。

注意：`DataTable`'s`ColumnName`和`Type`'s`PropertyName`应该相同。

调用以下方法：

```
long result = Utilities.ConvertTo<Student>(dt ,out listStudent);

// Generic Method
public class Utilities
{
    public static long ConvertTo<T>(DataTable table, out List<T> entity)
    {
        long returnCode = -1;
        entity = null;

        if (table == null)
        {
            return -1;
        }

        try
        {
            entity = ConvertTo<T>(table.Rows);
            returnCode = 0;
        }

        catch (Exception ex)
        {
            returnCode = 1000;
        }

        return returnCode;
    }

    static List<T> ConvertTo<T>(DataRowCollection rows)
    {
        List<T> list = null;
        if (rows != null)
        {
            list = new List<T>();

            foreach (DataRow row in rows)
            {
                T item = CreateItem<T>(row);
                list.Add(item);
            }
        }

        return list;
    }

    static T CreateItem<T>(DataRow row)
    {
        string str = string.Empty;
        string strObj = string.Empty;

        T obj = default(T);

        if (row != null)
        {
            obj = Activator.CreateInstance<T>();
            strObj = obj.ToString();
            NameValueCollection objDictionary = new NameValueCollection();

            foreach (DataColumn column in row.Table.Columns)
            {
                PropertyInfo prop = obj.GetType().GetProperty(column.ColumnName);

                if (prop != null)
                {
                    str = column.ColumnName;

                    try
                    {
                        objDictionary.Add(str, row[str].ToString());
                        object value = row[column.ColumnName];
                        Type vType = obj.GetType();

                        if (value == DBNull.Value)
                        {
                            if (vType == typeof(int) || vType == typeof(Int16)
                                                     || vType == typeof(Int32)
                                                     || vType == typeof(Int64)
                                                     || vType == typeof(decimal)
                                                     || vType == typeof(float)
                                                     || vType == typeof(double))
                            {
                                value = 0;
                            }

                            else if (vType == typeof(bool))
                            {
                                value = false;
                            }

                            else if (vType == typeof(DateTime))
                            {
                                value = DateTime.MaxValue;
                            }

                            else
                            {
                                value = null;
                            }

                            prop.SetValue(obj, value, null);
                        }

                        else
                        {
                            prop.SetValue(obj, value, null);
                        }
                    }

                    catch(Exception ex)
                    {

                    }
                }
            }

            PropertyInfo ActionProp = obj.GetType().GetProperty("ActionTemplateValue");

            if (ActionProp != null)
            {
                object ActionValue = objDictionary;
                ActionProp.SetValue(obj, ActionValue, null);
            }
        }

        return obj;
    }
} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-09-18T16:03:38.967

您可以将数据表用于通用列表的通用方法

```
public static List<T> DataTableToList<T>(this DataTable table) where T : class, new()
{
    try
    {
        List<T> list = new List<T>();

        foreach (var row in table.AsEnumerable())
        {
            T obj = new T();

            foreach (var prop in obj.GetType().GetProperties())
            {
                try
                {
                    PropertyInfo propertyInfo = obj.GetType().GetProperty(prop.Name);
                    if (propertyInfo.PropertyType.IsEnum)
                    {
                        propertyInfo.SetValue(obj, Enum.Parse(propertyInfo.PropertyType, row[prop.Name].ToString()));
                    }
                    else
                    {
                        propertyInfo.SetValue(obj, Convert.ChangeType(row[prop.Name], propertyInfo.PropertyType), null);
                    }                          
                }
                catch
                {
                    continue;
                }
            }

            list.Add(obj);
        }

        return list;
    }
    catch
    {
        return null;
    }
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-06-06T06:44:51.260

转换`DataTable`为通用`Dictionary`

```
public static Dictionary<object,IList<dynamic>> DataTable2Dictionary(DataTable dt)
{
    Dictionary<object, IList<dynamic>> dict = new Dictionary<dynamic, IList<dynamic>>();

    foreach(DataColumn column in dt.Columns)
    {
        IList<dynamic> ts = dt.AsEnumerable()
                              .Select(r => r.Field<dynamic>(column.ToString()))
                              .ToList();
        dict.Add(column, ts);
    }
    return dict;
} 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-11-17T10:28:26.747

使用扩展：

```
public static class Extensions
{
    #region Convert Datatable To List
    public static IList<T> ToList<T>(this DataTable table) where T : new()
    {
        IList<PropertyInfo> properties = typeof(T).GetProperties().ToList();
        IList<T> result = new List<T>();

        foreach (var row in table.Rows)
        {
            var item = CreateItemFromRow<T>((DataRow)row, properties);
            result.Add(item);
        }
        return result;
    }
    private static T CreateItemFromRow<T>(DataRow row, IList<PropertyInfo> properties) where T : new()
    {
        T item = new T();
        foreach (var property in properties)
        {
            property.SetValue(item, row[property.Name], null);
        }
        return item;
    }
    #endregion
} 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2019-12-19T10:28:55.003

**将 DataTable 行分配给类的通用列表**

```
 List<Candidate> temp = new List<Candidate>();//List that holds the Candidate Class,
    //Note:The Candidate class contains RollNo,Name and Department
    //tb is DataTable
    temp = (from DataRow dr in tb.Rows
                        select new Candidate()
                        {
                            RollNO = Convert.ToInt32(dr["RollNO"]),
                            Name = dr["Name"].ToString(),
                            Department = dr["Department"].ToString(),

                        }).ToList(); 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2020-01-29T12:10:16.563

您可以使用以下两个通用函数

```
private static List<T> ConvertDataTable<T>(DataTable dt)
    {
        List<T> data = new List<T>();
        foreach (DataRow row in dt.Rows)
        {
            T item = GetItem<T>(row);
            data.Add(item);
        }
        return data;
    }
    private static T GetItem<T>(DataRow dr)
    {

        Type temp = typeof(T);
        T obj = Activator.CreateInstance<T>();

        foreach (DataColumn column in dr.Table.Columns)
        {
            foreach (PropertyInfo pro in temp.GetProperties())
            {
                if (pro.Name == column.ColumnName)
                    pro.SetValue(obj, dr[column.ColumnName].ToString(), null);
                else
                    continue;
            }
        }
        return obj;
    } 
```

并按如下方式使用

```
List<StudentScanExamsDTO> studentDetails = ConvertDataTable<StudentScanExamsDTO>(dt); 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2020-10-23T15:48:22.523

如果有人想创建自定义函数将数据表转换为列表

```
class Program
{
    static void Main(string[] args)
    {
        DataTable table = GetDataTable();
        var sw = new Stopwatch();

        sw.Start();
        LinqMethod(table);
        sw.Stop();
        Console.WriteLine("Elapsed time for Linq Method={0}", sw.ElapsedMilliseconds);

        sw.Reset();

        sw.Start();
        ForEachMethod(table);
        sw.Stop();
        Console.WriteLine("Elapsed time for Foreach method={0}", sw.ElapsedMilliseconds);

        Console.ReadKey();
    }

    private static DataTable GetDataTable()
    {
        var table = new DataTable();
        table.Columns.Add("ID", typeof(double));
        table.Columns.Add("CategoryName", typeof(string));
        table.Columns.Add("Active", typeof(double));

        var rand = new Random();

        for (int i = 0; i < 100000; i++)
        {
            table.Rows.Add(i, "name" + i,  rand.Next(0, 2));
        }
        return table;
    }

    private static void LinqMethod(DataTable table)
    {
        var list = table.AsEnumerable()
            .Skip(1)
            .Select(dr =>
                new Category
                {
                    Id = Convert.ToInt32(dr.Field<double>("ID")),
                    CategoryName = dr.Field<string>("CategoryName"),                      
                    IsActive =
                            dr.Field<double>("Active") == 1 ? true : false
                }).ToList();
    }
    private static void ForEachMethod(DataTable table)
    {
        var categoryList = new List<Category>(table.Rows.Count);
        foreach (DataRow row in table.Rows)
        {
            var values = row.ItemArray;
            var category = new Category()
            {
                Id = Convert.ToInt32(values[0]),
                CategoryName = Convert.ToString(values[1]),                   
                IsActive = (double)values[2] == 1 ? true : false
            };
            categoryList.Add(category);
        }
    }

    private class Category
    {
        public int Id { get; set; }
        public string CategoryName { get; set; }
        public bool IsActive { get; set; }
    }
} 
```

如果我们执行上面的代码，Foreach 方法在 56 毫秒内完成，而 linq 方法需要 101 毫秒（对于 1000 条记录）。所以 Foreach 方法更好用。资料来源：[C#中将数据表转换为列表的方法（附性能测试示例）](https://qawithexperts.com/article/c-/ways-to-convert-datatable-to-list-in-c-with-performance-test/93)

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2021-10-30T11:16:47.193

使用 Newtonsoft Json 试试这个：

```
var json = JsonConvert.SerializeObject(dataTable);
var YourConvertedDataType = JsonConvert.DeserializeObject<YourDataType>(json); 
```

# c# - Queryable.Single 上的 IndexOutOfRangeException

> ID：208533
> 
> 赞同：7
> 
> 时间：2008-10-16T13:23:54.380
> 
> 标签：c#, linq

我有一个 ASP.NET 站点，它已经运行了很长时间了，最​​近没有任何变化。从一个小时到下一个小时，我开始在执行如下 LINQ 查询的行中收到 IndexOutOfRangeException：

```
var form = SqlDB.GetTable<ORMB.Form, CDB>()
    .Where(f => f.FormID == formID)
    .Single(); 
```

ORMB.Form 是一个 POCO 对象，其 LINQ to SQL 属性将其映射到 MSSQL 表（映射被验证为正确）。堆栈跟踪如下：

```
System.Web.HttpUnhandledException: Exception of type 'System.Web.HttpUnhandledException' was thrown. ---> System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at System.Collections.Generic.List`1.Add(T item)
   at System.Data.Linq.SqlClient.SqlConnectionManager.UseConnection(IConnectionUser user)
   at System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult)
   at System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression query, QueryInfo[] queryInfos, IObjectReaderFactory factory, Object[] userArguments, ICompiledSubQuery[] subQueries)
   at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query)
   at System.Data.Linq.DataQuery`1.System.Linq.IQueryProvider.Execute[S](Expression expression)
   at System.Linq.Queryable.Single[TSource](IQueryable`1 source)
   at GetForm.Page_Load(Object sender, EventArgs e) 
```

反射 System.Collections.Generic.List.Add 显示以下代码：

```
public void Add(T item)
{
    if (this._size == this._items.Length)
    {
        this.EnsureCapacity(this._size + 1);
    }
    this._items[this._size++] = item;
    this._version++;
} 
```

唯一应该容易出现 IndexOfOutRangeException 的行是 this._items[this._size++] = item，但是我看不出我是如何影响它的。

我可以通过进行应用程序域回收来解决问题，因此它必须以某种方式与缓存相关。在 DataContext 上关闭 ObjectTracking，以防万一。

我的直觉是这可能是一个线程问题，SqlConnectionManager 在名为“用户”的列表字段中缓存了 IConnectionUsers。如果两个线程同时进入 Add 方法，是什么阻止了以下情况的发生：

```
T1: Add(x)
T2: Add(y)
T1: Since _size == _items.Length: EnsureCapacity(_size + 1)
T2: Since _size > _items.Length: _items[_size++] = item;
T1: _items[size++] = item <- OutOfRangeException since T2 didn't increase the capacity as needed 
```

任何人？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-16T14:55:46.893

您是否共享一个共同的 DataContext？这将解释您所描述的线程问题，因为 DataContext 不是线程安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-10T10:15:09.807

检查 dbml 中的所有“主键”列是否确实与数据库表上的主键相关。我刚刚遇到一种情况，设计人员决定在 dbml 中添加一个额外的 PK 列，这意味着 LINQ to SQL 在保存时无法找到外键的两侧。

# c# - 在控制框上使用 shift-f5 或 red-X 来终止调试会话有什么区别？

> ID：208554
> 
> 赞同：0
> 
> 时间：2008-10-16T13:28:49.097
> 
> 标签：c#, winforms, visual-studio-2005, debugging

调用的 dispose() 函数有区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-16T13:50:05.870

我猜你问的是通过右上角的 X 按钮关闭调试对象，而不是通过 Visual Studio 中的停止调试命令 (Shift+F5) 停止调试。

当您使用 X 按钮关闭应用程序时，您为应用程序编写的任何清理代码都将正常运行，包括 Dispose 函数（）。另一方面，使用 Shift+F5 停止会立即终止进程，就好像您已经从任务管理器的“进程”选项卡中终止了它一样。这意味着不会运行任何清理代码 - 应用程序将不知道它正在关闭。

# browser - 浏览器后退按钮在缓存环境中不起作用

> ID：208557
> 
> 赞同：1
> 
> 时间：2008-10-16T13:29:21.607
> 
> 标签：browser, caching, button, back

后退按钮只会使我的页面刷新。有没有办法在不禁用缓存的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-16T13:37:48.330

尝试将此添加到您的 HTML 标头中：

```
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
<META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T12:35:47.973

您在页面上单击产品/图像的位置调用 onclick javascript 函数，即

```
function getHashOnBack(valueget) 
{
   location.hash = "#backTo=" + $(window).scrollTop();$(document).height();
} 
```

现在，放

```
$(document).ready(function () 
{
 var ab = window.location.hash.substring(1).split("=");
 if (ab[0] == "backTo") 
 {
  // this would be called automatically when back putton pressed and hav #back=1234   etc. // value in url

  $(window).scrollTop(parseInt(ab[1]));
}
} 
```

# java - 如何检测何时不再引用对象

> ID：208562
> 
> 赞同：9
> 
> 时间：2008-10-16T13:29:58.940
> 
> 标签：java, reference, weak-references

有没有办法创建注册一个处理程序，该处理程序将在释放对某个对象的最后引用时准确调用？

一个例子是一个由物理数据文件支持的对象，一旦该对象变得未被引用，该文件应该被关闭然后重命名。如果不必在该对象上显式调用“关闭”方法就可以做到这一点，那就太好了。

我从 Weak/Phantom 参考区域了解到的所有通知机制仅表明通知将在某个时间点发生，但无法保证何时会发生……

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-10-16T13:33:47.807

简而言之，**没有。**

Java 规范明确禁止您知道最后一个引用何时发布。JVM 实现（和优化）依赖于此。没有钩子。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-16T13:34:53.750

根据我的理解，我已经寻找了一段时间来为 java 对象找到一个“析构函数”，没有办法知道你什么时候丢失了最后一个引用。Java 跟踪对对象的引用，但出于性能原因，仅在垃圾收集期间更新此信息。

最接近的是 finalize 方法，它应该在垃圾收集期间调用，但不能保证即使在那时也会调用它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-17T15:47:08.567

我认为 WeakReference 可以满足您的要求。WeakReference 在弱可访问时立即被放入 ReferenceQueue（即所有强引用都消失了）。

[请参阅Ethan Nicholas](http://weblogs.java.net/blog/enicholas/archive/2006/05/understanding_w.html)的这篇文章。

如果您担心某些引用在关闭时无法到达 ReferenceQueue，请保留所有已创建对象的列表（使用 Wea​​kReferences 或 PhantomReferences）。添加一个关闭挂钩，检查列表中是否有任何未完成的引用并执行您需要的任何操作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-16T13:57:22.300

问题是，“你如何在没有对象引用的情况下实现这一点？”

即使您可以解决该问题，例如使用我们将调用 HandleManager 的服务，HandleManager 也必须创建对该对象的新引用，以传递给您的处理程序。然后，您的处理程序可以 (a) 存储对它的引用，这会使原本希望销毁未引用对象的 HandleManager 感到困惑；或者 (b) 释放引用，这意味着最终的引用再次被释放，这意味着 Handler 必须再次被调用......

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-16T15:37:29.413

如果您需要管理文件等外部资源，您可以在 java 中做的最好的事情是 close() 函数（无论您选择什么名称）。您可以将 finalize() 用作“腰带和吊带”保险单，但这具有不可预测的时机。所以你的主要防线需要是 close() 函数。

见我的回答[你为什么要实现 finalize()？](https://stackoverflow.com/questions/158174/why-would-you-ever-implement-finalize#158216)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-16T15:15:06.183

这不能用 Java 完成——据我所知，它需要一个引用计数垃圾收集器。您是否考虑过根据需要打开和关闭对象的物理数据文件，而不是在对象的生命周期内保持打开状态？

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-10-16T14:34:28.963

您*可以*在您的对象中覆盖`finalize()`，但由于其他人提到的原因，这是有问题的。

对于您的具体示例，您可以看看使用类似的东西 [`File.deleteOnExit()`](http://java.sun.com/j2se/1.4.2/docs/api/java/io/File.html#deleteOnExit())，一旦VM退出，它将删除文件。

# .net - 如何获取标有 Attribute 的属性的实例值？

> ID：208570
> 
> 赞同：3
> 
> 时间：2008-10-16T13:31:47.280
> 
> 标签：.net, attributes

我有一个标有自定义属性的类，如下所示：

```
public class OrderLine : Entity
{
    ...
    [Parent]
    public Order Order { get; set; }
    public Address ShippingAddress{ get; set; }
    ...
} 
```

我想编写一个通用方法，我需要在其中获取标有 Parent 属性的实体上的属性。

这是我的属性：

```
[AttributeUsage(AttributeTargets.Property, AllowMultiple = false, Inherited = false)]
public class ParentAttribute : Attribute
{
} 
```

我怎么写这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-16T13:38:33.570

使用 Type.GetProperties() 和 PropertyInfo.GetValue()

```
 T GetPropertyValue<T>(object o)
    {
        T value = default(T);

        foreach (System.Reflection.PropertyInfo prop in o.GetType().GetProperties())
        {
            object[] attrs = prop.GetCustomAttributes(typeof(ParentAttribute), false);
            if (attrs.Length > 0)
            {
                value = (T)prop.GetValue(o, null);
                break;
            }
        }

        return value;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-16T13:37:21.530

这对我有用：

```
public static object GetParentValue<T>(T obj) {
    Type t = obj.GetType();
    foreach (var prop in t.GetProperties()) {
        var attrs = prop.GetCustomAttributes(typeof(ParentAttribute), false);
        if (attrs.Length != 0)
            return prop.GetValue(obj, null);
    }

    return null;
} 
```

# asp.net - CastleProject *.vm HttpForbiddenHandler 不起作用

> ID：208571
> 
> 赞同：1
> 
> 时间：2008-10-16T13:31:56.673
> 
> 标签：asp.net, iis-5, castle-monorail, httpforbiddenhandler

我尝试使用 HttpForbiddenHandler 来阻止文件但没有成功。web.config 如下：

```
<httpHandlers>
<add verb="*" path="*.ashx" type="Castle.MonoRail.Framework.MonoRailHttpHandlerFactory, Castle.MonoRail.Framework"/>
<add verb="*" path="*.vm" type="System.Web.HttpForbiddenHandler"/>
</httpHandlers> 
```

我也设置了虚拟目录以将 .vm 请求转发到 aspnet_isapi.dll。基本上我遵循了这个指南：http: [//support.microsoft.com/kb/815152](http://support.microsoft.com/kb/815152)

知道为什么它不起作用吗？我正在使用 Windows XP + IIS 5.1 对其进行测试。

更新：~~进一步的诊断测试把我推到了地狱。我尝试删除 ISAPI 列表中的 .config 绑定，正如预期的那样，该文件已被提供。我将所有内容都添加回来，这一次，它没有显示“未提供文件类型”，而是显示“没有为请求类型“GET”找到 http 处理程序！我完全被激怒了，这只是用于 XP 的 IIS 5.1 还是我做了一些可疑的事情？~~不，我只是对此感到害怕-当我进行故障排除时，我尝试使用 . 但是 .vm 未被阻止的问题仍然存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-17T04:31:22.363

忽略这个。页面缓存很疼。

# visual-studio-2008 - 在安装过程中如何注册 Windows 服务？

> ID：208575
> 
> 赞同：3
> 
> 时间：2008-10-16T13:33:48.353
> 
> 标签：visual-studio-2008, deployment, windows-services

我在 VB.net 2008 中构建了一个 windows 服务应用程序，并使用安装向导添加了一个安装过程。

安装程序有效，因为它添加了应用程序以添加/删除程序并复制所有文件等，但它缺少实际安装服务的最后（必需）步骤。

我已将项目的主要输出添加为安装和卸载的自定义操作，但没有成功。

秘诀是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-16T13:40:42.163

您需要创建自定义安装任务；MSDN 有[你需要知道的一切](http://msdn.microsoft.com/en-us/library/zt39148a(VS.80).aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-16T13:42:01.067

你可以做两件事：

1) 在您的安装项目中使用自定义操作，使用“installutil”.Net Framework 命令行实用程序注册服务，或者直接使用 installutil 自行注册。

2) 将安装程序类添加到您的 Windows 服务。此[链接](http://www.codeproject.com/KB/dotnet/simplewindowsservice.aspx)应为您提供所需的所有信息，只需跳过有关创建服务的开头部分即可。这是我推荐的方式。

# sql - 数据库表中 ID 列的命名

> ID：208580
> 
> 赞同：112
> 
> 时间：2008-10-16T13:34:43.280
> 
> 标签：sql, naming-conventions

我想知道人们对数据库表中 ID 列命名的看法。

如果我有一个名为 Invoices 的表，其主键是标识列，我会调用该列 InvoiceID，这样我就不会与其他表发生冲突，而且很明显它是什么。

在我工作的地方，他们已将所有 ID 列称为 ID。

所以他们会做以下事情：

```
Select  
    i.ID 
,   il.ID 
From
    Invoices i
    Left Join InvoiceLines il
        on i.ID = il.InvoiceID 
```

现在，我在这里看到了一些问题：
1\. 您需要为 select 上的列设置别名
2\. ID = InvoiceID 不适合我的大脑
3\. 如果您没有为表设置别名并引用 InvoiceID，那么很明显是什么表它开着？

其他人对这个话题有什么看法？

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2008-10-16T13:46:15.770

对于 id 列，我总是更喜欢 ID 而不是 TableName + ID，然后是外键的 TableName + ID。这样，所有表的 id 字段都具有相同的名称，并且没有多余的描述。这对我来说似乎更简单，因为所有表都具有相同的主键字段名称。

至于连接表并且不知道哪个 Id 字段属于哪个表，我认为应该编写查询来处理这种情况。在我工作的地方，我们总是优先使用表/表别名的语句中使用的字段。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2008-10-16T15:30:08.073

最近在我的公司里就这件事发生了一场书呆子之争。LINQ 的出现让多余的*tablename+ID*模式在我看来更加愚蠢。我认为最有理智的人会说，如果您以必须指定表名来区分*FK*的方式手写 SQL，那么这不仅可以节省键入时间，而且可以使您的 SQL 更清晰地使用里面的ID，你可以清楚的看到哪个是*PK*，哪个是*FK*。

例如

FROM 员工 e LEFT JOIN 客户 c ON e.ID = c.EmployeeID

不仅告诉我这两者是联系在一起的，而且告诉我哪个是***PK***哪个是***FK***。而在旧样式中，您不得不查看或希望它们被命名好。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2011-09-21T17:41:38.367

ID 是一个 SQL 反模式。请参阅[http://www.amazon.com/s/ref=nb_sb_ss_i_1_5?url=search-alias%3Dstripbooks&field-keywords=sql+antipatterns&sprefix=sql+a](http://www.amazon.com/s/ref=nb_sb_ss_i_1_5?url=search-alias%3Dstripbooks&field-keywords=sql+antipatterns&sprefix=sql+a)

如果您有许多以 ID 作为 id 的表，那么您的报告就会变得更加困难。它模糊了含义并使复杂的查询更难阅读，并且要求您使用别名来区分报告本身。

此外，如果有人愚蠢到在可用的数据库中使用自然连接，那么您将连接到错误的记录。

如果您想使用某些 dbs 允许的 USING 语法，则不能使用 ID。

如果您使用 ID，如果您碰巧在复制连接语法（不要告诉我从来没有人这样做过！）并且忘记在连接条件中更改别名，那么您很容易以错误的连接结束。

所以你现在有

```
select t1.field1, t2.field2, t3.field3
from table1 t1 
join table2 t2 on t1.id = t2.table1id
join table3 t3 on t1.id = t3.table2id 
```

当你的意思是

```
select t1.field1, t2.field2, t3.field3 
from table1 t1 
join table2 t2 on t1.id = t2.table1id
join table3 t3 on t2.id = t3.table2id 
```

如果使用 tablenameID 作为 id 字段，这种意外错误发生的可能性要小得多，而且更容易找到。

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2008-10-16T13:36:37.600

我们使用`InvoiceID`，不是`ID`。它使查询更具可读性——当您`ID`单独看到时，它可能意味着任何事情，尤其是当您将表别名为`i`.

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2012-06-07T14:34:32.087

我同意 Keven 和其他一些人的观点，即表的 PK 应该只是 Id，外键列出 OtherTable + Id。

然而，我想补充一个最近更加重视这一论点的原因。

在我目前的职位上，我们正在使用使用 POCO 生成的实体框架。使用 Id 的标准命名约定，PK 允许继承具有验证的基础 poco 类，例如共享一组公共列名的表。使用 Tablename + Id 作为每个表的 PK 会破坏为这些表使用基类的能力。

只是一些思考的食物。

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2011-09-21T15:34:19.807

我的偏好也是主键的 ID 和外键的 TableNameID。我还喜欢在我保存条目的用户可读标识符（即名称:-)）的大多数表中都有一个“名称”列。这种结构为应用程序本身提供了极大的灵活性，我可以以同样的方式处理大量表格。这是一个*非常*强大的东西。通常一个 OO 软件是建立在数据库之上的，但是 OO 工具集不能应用，因为 db 本身不允许。拥有列 id 和 name 仍然不是很好，但这是一个步骤。

> 选择
> i.ID , il.ID From Invoices i Left Join InvoiceLines il on i.ID = il.InvoiceID

为什么我不能这样做？

```
Select  
    Invoices.ID 
,   InvoiceLines.ID 
From
    Invoices
    Left Join InvoiceLines
        on Invoices.ID = InvoiceLines.InvoiceID 
```

在我看来，这是非常易读和简单的。将变量命名为 i 和 il 通常是一个糟糕的选择。

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2008-10-16T13:40:13.177

这并不重要，您可能会在所有命名约定中遇到类似的问题。

但是保持一致很重要，这样您就不必每次编写查询时都查看表定义。

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2010-11-16T22:00:31.630

我刚开始在一个只使用“ID”的地方工作（在核心表中，由外键中的TableNameID引用），并且已经发现了两个直接由它引起的生产问题。

在一种情况下，查询使用“... where ID in (SELECT ID FROM OtherTable ...”而不是“... where ID in (SELECT TransID FROM OtherTable ...”。

任何人都可以诚实地说，如果使用完整、一致的名称，而错误的语句会显示为“......其中 TransID in (SELECT OtherTableID from OtherTable ...”，那将不会更容易发现？我不认为所以。

重构代码时会出现另一个问题。如果您使用临时表，而之前查询离开核心表，则旧代码读取“... dbo.MyFunction(t.ID) ...”，如果没有更改，但“t”现在指的是临时表而不是核心表，您甚至不会收到错误 - 只是错误的结果。

如果生成不必要的错误是一个目标（也许有些人没有足够的工作？），那么这种命名约定很棒。否则一致的命名是要走的路。

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2013-08-14T21:45:10.820

我**个人**更喜欢（如上所述）**PK**的**Table.ID**和**FK**的**TableID**。甚至（请不要向我开枪）Microsoft Access 也建议这样做。

 ******但是，我也知道一些生成工具偏爱 TableID 进行 PK 的事实，因为它们倾向于链接单词中包含**“ID”的所有列名，***包括 ID！*

甚至查询设计器也在 Microsoft SQL Server 上执行此操作（对于您创建的每个查询，您最终都会在列 ID 上的所有表上删除所有不必要的新创建关系）

因此，尽管我的内部强迫症很讨厌它，但我还是**遵循 TableID**约定。让我们记住它被称为 Data **BASE**，因为它将成为许多许多应用程序的基础。并且所有技术都应该受益于具有清晰描述的良好规范化模式。

不用说，当人们开始使用 TableName、TableDescription 等时，我确实会划清界限。在我看来，约定应该做到以下几点：

*   表名：复数。前任。**雇员**
*   表别名：全表名，单数。前任。

    ```
    SELECT Employee.*, eMail.Address
    FROM Employees AS Employee LEFT JOIN eMails as eMail on Employee.eMailID = eMail.eMailID -- I would sure like it to just have the eMail.ID here.... but oh well 
    ```

**[更新]**

此外，由于“关系类型”或角色，此线程中有一些关于重复列的有效帖子。例如，如果一个 Store 有一个**EmployeeID**，这告诉我蹲下。所以我有时会做一些类似**Store.EmployeeID_Manager**的事情。当然它有点大，但至少人们不会疯狂地试图找到*表 ManagerID*或*EmployeeID*在那里做什么。当查询是 WHERE 时，我将其简化为： SELECT EmployeeID_Manager as ManagerID FROM Store

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2008-10-16T13:38:37.953

为了简单起见，大多数人在表 ID 上命名列。如果它在另一个表上有一个外键引用，那么在连接的情况下，他们明确地将其称为 InvoiceID（使用您的示例），无论如何您都在为表命名，因此显式 inv.ID 仍然比 inv.InvoiceID 简单

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2008-10-16T19:32:30.220

从正式数据字典的角度来看，我将数据元素命名为`invoice_ID`。通常，数据元素名称在数据字典中是唯一的，并且理想情况下始终具有相同的名称，但有时可能需要根据上下文需要附加限定术语，例如，命名的数据元素`employee_ID`可以在组织结构图中使用两次，因此限定为`supervisor_employee_ID`和`subordinate_employee_ID`分别。

显然，命名约定是主观的并且是风格问题。我发现 ISO/IEC 11179 指南是一个有用的起点。

对于 DBMS，我将表视为实体的集合（除了那些只包含一行的表，例如 cofig 表、常量表等），例如 my`employee_ID`是键的表将被命名为`Personnel`. 所以马上`TableNameID`公约对我不起作用。

我已经看到`TableName.ID=PK TableNameID=FK`用于大型数据模型的样式，不得不说我觉得它有点令人困惑：我更喜欢标识符的名称始终相同，即不会根据它恰好出现在哪个表中更改名称。需要注意的是上述风格似乎在商店中使用，它们向*每个*`IDENTITY`表添加（自动增量）列，同时避开外键中的自然键和复合键。这些商店往往没有正式的数据字典，也没有从数据模型构建。同样，这只是一个风格问题，我个人并不赞同。所以最终，它不适合我。

 *综上所述，当表名提供了这样做的上下文时，我可以看到有时从列名中删除限定符的情况，例如，命名的元素`employee_last_name`可能会简单地`last_name`出现在`Personnel`表中。这里的基本原理是域是“人们的姓氏”，并且更有可能`UNION`与其他表中的`last_name`列一起使用*，*而不是用作另一个表中的外键*，*但话又说回来......我可能只是改变主意，有时你永远无法分辨。就是这样：数据建模既是艺术，又是科学。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2008-10-16T15:12:47.513

我认为只要您保持一致，您就可以使用任何东西作为“ID”。包括表名很重要。我建议使用像 Erwin 这样的建模工具来强制执行命名约定和标准，以便在编写查询时很容易理解表之间可能存在的关系。

我所说的第一条语句的意思是，你可以使用其他东西来代替 ID，比如“recno”。那么这个表就会有一个 invoice_recno 的 PK 等等。

干杯，本

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2008-10-16T15:32:53.167

我的投票是 InvoiceID 的表 ID。当它用作外键并在查询中使用智能别名时，我也使用相同的命名约定。

```
 Select Invoice.InvoiceID, Lines.InvoiceLine, Customer.OrgName
 From Invoices Invoice
 Join InvoiceLines Lines on Lines.InvoiceID = Invoice.InvoiceID
 Join Customers Customer on Customer.CustomerID = Invoice.CustomerID 
```

当然，它比其他一些例子要长。但微笑。这是为了后代，有一天，一些可怜的初级程序员将不得不改变你的杰作。在此示例中，没有歧义，并且随着向查询中添加了其他表，您会很感激这里的冗长。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2008-10-17T19:16:40.720

FWIW，我们的新标准（改变，呃，我的意思是“进化”，随着每个新项目）是：

*   小写数据库字段名称
*   大写表名
*   使用下划线分隔字段名称中的单词 - 在代码中将它们转换为 Pascal 大小写。
*   `pk_`前缀表示主键
*   `_id`suffix 表示一个整数，自增 ID
*   `fk_`前缀表示外键（不需要后缀）
*   `_VW`视图的后缀
*   `is_`布尔值前缀

因此，一个名为 NAMES 的表可能具有字段`pk_name_id, first_name, last_name, is_alive,`和`fk_company`一个名为 的视图`LIVING_CUSTOMERS_VW`，定义如下：

```
选择名字，姓氏
来自联系人姓名
WHERE (is_alive = 'True')

```

不过，正如其他人所说，只要它是一致的并且不会不必要地混淆您的含义，几乎任何方案都可以工作。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-10-16T13:38:21.557

我确实讨厌简单的 id 名称。我强烈倾向于始终使用 invoice_id 或其变体。当我需要时，我总是知道哪个表是 id 的权威表，但这让我感到困惑

```
SELECT * from Invoice inv, InvoiceLine inv_l where 
inv_l.InvoiceID = inv.ID 
SELECT * from Invoice inv, InvoiceLine inv_l where 
inv_l.ID = inv.InvoiceLineID 
SELECT * from Invoice inv, InvoiceLine inv_l where 
inv_l.ID = inv.InvoiceID 
SELECT * from Invoice inv, InvoiceLine inv_l where 
inv_l.InvoiceLineID = inv.ID 
```

最糟糕的是你提到的混合，完全令人困惑。我不得不使用一个几乎总是 foo_id 的数据库，除了最常用的 id 之一。那简直就是地狱。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2008-10-16T13:39:41.477

出于您给出的原因，我绝对同意在 ID 字段名称中包含表名。通常，这是我将包含表名的唯一字段。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2008-10-16T13:43:38.147

对于数据库中的列名，我会使用“InvoiceID”。

如果我通过 LINQ 将字段复制到未命名的结构中，我可以在那里将其命名为“ID”，如果它是结构中唯一的 ID。

如果该列不用于外键，仅用于唯一标识行以进行编辑编辑或删除，我将其命名为“PK”。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2008-10-16T14:33:19.043

如果您给每个键一个唯一的名称，例如“invoices.invoice_id”而不是“invoices.id”，那么您可以毫无顾虑地使用“自然连接”和“使用”运算符。例如

```
SELECT * FROM invoices NATURAL JOIN invoice_lines
SELECT * FROM invoices JOIN invoice_lines USING (invoice_id) 
```

代替

```
SELECT * from invoices JOIN invoice_lines
    ON invoices.id = invoice_lines.invoice_id 
```

SQL 足够冗长，但不会使其更冗长。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2008-10-17T18:49:47.700

我为自己保持一致（其中表具有用作 ID 的单列主键）所做的事情是命名表的主键`Table_pk`。任何我有一个指向该表主键的外键的地方，我都会调用 column `PrimaryKeyTable_fk`。这样我就知道如果我的`Customer_pk`Customer 表中有 a 和Order 表中有 a `Customer_fk`，我知道 Order 表是指 Customer 表中的一个条目。

对我来说，这很有意义，尤其是对于我认为它更容易阅读的连接。

```
SELECT * 
FROM Customer AS c
    INNER JOIN Order AS c ON c.Customer_pk = o.Customer_fk 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2008-10-17T10:57:05.627

我更喜欢域名 || 'ID'。（即域名+ID）

DomainName 通常但不总是与 TableName 相同。

ID 本身的问题在于它不能向上扩展。一旦你有大约 200 个表，每个表都有一个名为 ID 的第一列，数据开始看起来都一样。如果你总是用表名来限定 ID，那会有所帮助，但没那么大。

DomainName & ID 可用于命名外键和主键。当外键以它们引用的列命名时，这可能有助于助记符。形式上，不需要将外键的名称与它引用的键绑定，因为引用完整性约束将建立引用。但是在读取查询和更新时它非常方便。

偶尔，域名 || 不能使用“ID”，因为同一个表中会有两列同名。示例：Employees.EmployeeID 和Employees.SupervisorID。在这些情况下，我使用 RoleName || 'ID'，如示例中所示。

最后但同样重要的是，我尽可能使用自然键而不是合成键。在某些情况下自然密钥不可用或不可信，但在很多情况下自然密钥是正确的选择。在这些情况下，我让自然键取它自然具有的名称。这个名字通常甚至没有字母“ID”。示例：OrderNo，其中 No 是“Number”的缩写。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2008-10-17T13:58:53.747

对于每个表，我选择一个树字母速记（例如员工 => Emp）

这样，数字自动编号主键变为**nkEmp**。

它很短，在整个数据库中是独一无二的，我一眼就知道它的属性。

我在 SQL 和我使用的所有语言（主要是 C#、Javascript、VB6）中保持相同的名称。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2008-10-17T14:36:52.080

有关经过深思熟虑的命名表和列系统，请参阅 Interakt 站点的[命名约定。](http://www.interaktonline.com/Support/Articles/Details/Design+Your+Database-Database+Naming+Convention.html?id_art=24&id_asc=221)该方法为每个表（`_prd`产品表或`_ctg`类别表）使用后缀，并将其附加到给定表中的每一列。因此 products 表的标识列将是`id_prd`并且因此在数据库中是唯一的。

他们更进一步帮助理解外键：产品表中引用类别表的外键将`idctg_prd`很明显它属于哪个表（`_prd`后缀）和它引用的表（类别） .

优点是不同表中的标识列没有歧义，并且您可以通过列名一眼看出查询引用了哪些列。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-08-17T10:34:46.190

已经有很多答案了，但我想添加两个我在上面没有看到的主要内容：

*   客户向您寻求支持。

很多时候，客户或用户甚至另一个部门的开发人员遇到了障碍，并联系我们说他们在进行操作时遇到了问题。我们问他们有什么问题。现在，他们在屏幕上看到的数据，例如带有客户姓名、订单数量、目的地等的网格是许多表格的集合。他们说他们在使用 id 83 时遇到了问题。没有办法知道那是什么 id，它是哪个表，如果它只是被称为“id”。

即，一行数据没有给出任何指示它来自哪个表。除非您碰巧很了解数据库的架构，在复杂系统或您被告知接管的非新建系统中很少出现这种情况，否则即使您有更多数据，您也不知道 id=83 意味着什么例如姓名、地址等（甚至可能不在同一张表中！）。

此 id 可能来自网格，也可能来自 API 中的错误，或者将错误消息转储到屏幕或日志文件的错误查询。

通常，开发人员只是将“ID”转储到列中而忘记了它，并且数据库通常有许多类似的表，例如 Invoice、InvoiceGrouping、InvoicePlan，并且 ID 可能适用于其中的任何一个。沮丧的是，您查看代码以查看它是哪一个，并看到他们在模型上也将其称为 Id，因此您必须深入研究该页面的模型是如何构建的。我无法计算我必须这样做多少次才能弄清楚 Id 是什么。很多。有时您还必须挖掘一个仅返回“Id”作为标题的 SPROC。恶梦。

*   当清楚出了什么问题时，日志文件会更容易

SQL 通常会给出非常糟糕的错误消息。“无法插入 ID 为 83 的项目，列将被截断”或类似的东西很难调试。通常错误消息不是很有帮助，但通常错误消息会通过仅转储主键名称和值来模糊地尝试告诉您哪些记录被破坏了。如果它是“ID”，那么它根本没有帮助。

这只是我觉得其他答案中没有提到的两件事。

I also think that a lot of comments are 'if you program in X way then this isn't an issue', and I think the points above (and other points on this question) are valid specifically because of the way people program and because they don't have the time, energy, budget and foresight to program in perfect logging and error handling or change engrained habits of quick SQL and code writing.

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2008-10-16T13:39:46.640

您可以使用以下命名约定。它有缺陷，但可以解决您的特定问题。

1.  为表名使用短（3-4 个字符）昵称，即 Invoice - `inv`、 InvoiceLines -`invl`
2.  使用这些昵称命名表中的列，即`inv_id`，`invl_id`
3.  对于参考列，请使用`invl_inv_id`名称。

这样你就可以说

```
SELECT * FROM Invoice LEFT JOIN InvoiceLines ON inv_id = invl_inv_id 
```

# sql-server - SQL Express/SQL Server 需要哪些服务？

> ID：208587
> 
> 赞同：0
> 
> 时间：2008-10-16T13:35:51.377
> 
> 标签：sql-server, windows-services, sql-server-express

我们的一位合作伙伴最近报告说，在他们启动 RPC Locator 和 SQL Server Browser 服务之前，我们的软件无法联系 SQL Express 的远程实例。我在哪里可以找到必须在服务器和客户端上运行的服务列表，以启用对 SQL Express 和/或 SQL Server 的远程访问？

遗憾的是，SQL Express 文档似乎没有包含此详细信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-28T14:22:48.227

SQL Express 始终作为命名实例 (servername\sqlexpress) 安装，因此分配了一个动态端口。客户端需要 SQL Browser 服务来定位实例。如果没有 SQL 浏览器，客户端将不知道服务正在侦听哪个端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-17T12:02:27.820

如果 MS DTC（分布式事务协调器）服务未运行，我在过去运行链接服务器查询时遇到过问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-19T01:18:05.683

我不知道需要在客户端上运行的任何服务（除非它们是应用程序依赖项），但对于服务器，这篇知识库文章解释了如何启用与 SQL Server 的远程连接：http: [//support.microsoft。 com/kb/914277](http://support.microsoft.com/kb/914277)。

默认情况下，SQL Express 配置为仅允许本地连接。文章的要点是：使用Surface Area Configuration工具告诉SQL服务监听tcp/ip和/或命名管道；然后启用 SQL Browser 服务（或不启用，并在客户端连接中使用特定端口）；最后，在防火墙上戳一个洞。有趣的是，我认为大多数人在防火墙例外方面遇到的问题最多。

我*认为*RPC Locator 服务更像是用于处理 COM 调用的通用 Windows 服务，因此我不确定将其描述为 SQL 特定要求是否公平；您的应用程序可能需要它来连接，但我不知道每个应用程序都需要（例如[Mitchel 说](https://stackoverflow.com/questions/208587/what-services-are-required-by-sql-expresssql-server#208794)他的安装在没有它的情况下工作正常）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-16T14:32:02.200

查看我当前安装的 SQL Server，我启用了远程连接并且可以正常工作，并且机器上的 RPC 定位器和 SQL Server Browser 服务都被禁用。

关键是您必须在外围应用配置向导中正确启用远程连接。

# wcf - 使用 WCF 时为客户端处理版本控制

> ID：208596
> 
> 赞同：5
> 
> 时间：2008-10-16T13:37:25.257
> 
> 标签：wcf

桌面客户端将使用 WCF 将数据推送到中央服务器。

当架构发生变化等时，假设 100 台计算机拥有旧版本的桌面客户端，而其余的则使用最新版本。

我必须在服务器端做什么来处理这两个版本？我是在 WCF 中创建 2 个端点还是创建一个智能端点来确定版本并采取相应措施？

注意：我将从客户端传递版本信息（如果需要）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-16T13:44:29.237

你有一个选择：

首先，无论如何，您都应该使用它们的名称空间对服务合同进行版本控制；例如。如果服务操作有重大更改，将更改为`http://idunno.org/2008/10/numpty`。`http://idunno.org/2008/11/numpty`

数据合同同上；但是，如果您对数据合同所做的一切都是附加的，那么您可以将新字段标记为可选；

```
[DataMember(IsRequired="false")] 
```

老客户会工作。所以这应该向您表明，进入服务的参数和输出的参数也应该是数据契约；它为您提供了这种灵活性。

MSDN 有[更多](http://msdn.microsoft.com/en-us/library/ms733832.aspx)

# sql-server - 如何在表上级联重命名 PK，MS SQL 2005

> ID：208604
> 
> 赞同：0
> 
> 时间：2008-10-16T13:39:22.243
> 
> 标签：sql-server, rename, cascade

我已经成功地重命名了一个表，并通过外键关系删除了该表上的所有约束，并将它们全部备份。但是，现在我正处于 PK_tblFoo 存在多个位置的地步（当我将表转移到另一个数据库时）。重命名表不会重命名主键。

我将如何级联重命名主键？我已经重命名了表格，我只需要弄清楚这部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-16T13:59:11.297

我相信我需要手动执行此操作，删除所有 FK 约束，运行此人：

```
IF EXISTS ( SELECT  *
        FROM    sys.indexes
        WHERE   object_id = OBJECT_ID(N'[dbo].[tblFoo]')
                AND name = N'PK_tblBusinessListings' ) 
ALTER TABLE [dbo].[tblFoo] DROP CONSTRAINT [PK_tblBusinessListings]
GO
ALTER TABLE [dbo].[tblFoo]
ADD CONSTRAINT [PK_tblFoo_1] PRIMARY KEY CLUSTERED ( [ListingID] ASC )
    WITH ( PAD_INDEX = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF,
           ONLINE = OFF ) ON [PRIMARY] 
```

然后通过新的 PK 名称设置所有 FK 约束....errrgh....这需要一段时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-22T14:53:17.877

您也可以使用重构工具，我知道 Visual Studio Team Edition for Database Professionals 可以处理这个问题。

# xsd - XSD 和多态性

> ID：208612
> 
> 赞同：4
> 
> 时间：2008-10-16T13:40:26.560
> 
> 标签：xsd, polymorphism

我有点重复这个问题，第一次被问错了。

我有这个：

```
<xsd:complexType name="A">
        <xsd:sequence>
            <xsd:element name="options" type="options"/>
        </xsd:sequence>
</xsd:complexType>

<xsd:complexType name="B">  
    <xsd:complexContent>
            <xsd:element name="options" type="ex_options"/>
    </xsd:complexContent>
</xsd:complexType>

<xsd:complexType name="options">
    <xsd:sequence>
        ...some options
    </xsd:sequence>
</xsd:element>

<xsd:complexType name="ex_options">
    <xsd:complexContent>
         <xsd:extension base="options">
             <xsd:sequence>
              ...some more options
              </xsd:sequence>
          </xsd:extension>
     </xsd:complexContent>
 </xsd:element> 
```

所以基本上我有一个带有内部选项类的 A 类 B 类从 A 类继承，我希望 B.options 从 A.options 继承，这样当我们做 web 服务时，我们只需要传递 a 并且当我们调用 getOptions 时它会返回正确的对象 B.options。目前使用 xsd 的方式，我收到一条错误消息，指出模型组中出现了具有不同类型的名称选项的多个元素。错误属于 B 类型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-08T04:39:23.700

只需坚持使用类型 B 的元素，然后使用适当的`xsi:type`属性值如下所述装饰您的实例文档元素。

```
<xsd:complexType name="B">  
      <xsd:complexContent>
                <xsd:element name="options" type="ex_options"/>
      </xsd:complexContent>
</xsd:complexType>

<xsd:complexType name="options">
      <xsd:sequence>
              ...some options
      </xsd:sequence>
</xsd:element>

<xsd:complexType name="ex_options">
      <xsd:complexContent>
             <xsd:extension base="options">
                   <xsd:sequence>
                        ...some more options
                    </xsd:sequence>
              </xsd:extension>
       </xsd:complexContent>
</xsd:element> 
```

然后将您的实例元素“装饰”为

```
<options xsi:type="ex_options"> ...     (this will work) 
```

或者

```
<options xsi:type="options"> ...     (I think you can do this as long as the base xsi:type is not abstract) 
```

如果事实证明你不能用 base 进行装饰`xsi:type`，那么你总是可以通过创建一个空的 base 类型来“作弊”，然后通过仔细构造进行扩展以达到你想要的两种格式。

有关详细说明和链接，请参阅[此帖子](https://stackoverflow.com/questions/188389/xml-schema-for-elements-with-same-name-but-different-sub-structure-depending-on#233093)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-07-27T18:22:28.163

You may also use restriction rather than extension, but it is not best solution, because restriction removes all base definitions. Better case is use xsi:type at runtime (in XML instances of elements) like described in other answer.
More one example of using xsi:type is here: [http://www.xfront.com/ElementHierarchy.html](http://www.xfront.com/ElementHierarchy.html)

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">
 <!-- Root element -->
 <xsd:element name="root" type="B"/>

 <!-- Base abstract type -->
 <xsd:complexType name="A" abstract="true">
  <xsd:sequence>
   <!-- Option that we will override -->
   <xsd:element name="options" type="options"/>
  </xsd:sequence>
 </xsd:complexType>

 <!-- Derived type -->
 <xsd:complexType name="B">
  <xsd:complexContent>
   <!--Overriding -->
   <xsd:restriction base="A">
    <xsd:sequence>
     <xsd:element name="options" type="ex_options"/>
    </xsd:sequence>
   </xsd:restriction>
  </xsd:complexContent>
 </xsd:complexType>

 <!-- Base included class -->
 <xsd:complexType name="options">
  <xsd:sequence>
   <xsd:element name="baseOption"/>
  </xsd:sequence>
 </xsd:complexType>

 <!-- Overriding of included class -->
 <xsd:complexType name="ex_options">
  <xsd:complexContent>
   <xsd:restriction base="options">
    <xsd:sequence>
     <xsd:element name="overridedOption"/>
    </xsd:sequence>
   </xsd:restriction>
  </xsd:complexContent>
 </xsd:complexType>
</xsd:schema> 
```

In pseudo CiXML it will something like:

```
{
  B root;

  abstract class A
  {
    options options;
  }

  class B override A
  {
    ex_options options;
  }

  class options
  {
    empty baseOption;
  }

  class ex_option override options
  {
    empty overridedOption
  }
} 
```

Here the example XML:

```
<?xml version="1.0" encoding="UTF-8"?>
<root xsi:noNamespaceSchemaLocation="polymorphism.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <options>
    <overridedOption/>
  </options>
</root> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-16T14:48:20.200

您可以使`options`序列开放式，以便您可以拥有任意数量的选项，然后根据属性值验证现有选项。例如，在以下模式中，`options`列表具有`type`属性`A`or `B`，指示应实际列出哪些选项：

```
<?xml version="1.0" encoding="utf-8" ?>
<xs:schema targetNamespace="http://tempuri.org/XMLSchema.xs"
                  elementFormDefault="qualified"
                  xmlns="http://tempuri.org/XMLSchema.xs"
                  xmlns:mstns="http://tempuri.org/XMLSchema.xs"
                  xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <!-- Elements for document structure. -->
  <!-- This section is just for validating my example file to -->
  <!-- demonstrate the schema. -->
  <xs:element name="root">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="elementA" type="A" minOccurs="0" maxOccurs="unbounded"/>
        <xs:element name="elementB" type="A" minOccurs="0" maxOccurs="unbounded"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>

  <!-- The important part of the schema. -->
  <!-- Types -->
  <!-- A has options of type options. -->
  <xs:complexType name="A">
    <xs:sequence>
      <xs:element name="options" type="options"/>
    </xs:sequence>
  </xs:complexType>

  <!-- Options specifies a options with a type attribute specifying which options will be available. -->
  <xs:complexType name="options">
    <xs:sequence>
      <xs:element name="option" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
    <xs:attribute name="type" use="optional" default="A">
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:enumeration value="A"/>
          <xs:enumeration value="B"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>

</xs:schema> 
```

这是此模式的 XML 示例。

```
<?xml version="1.0" encoding="utf-8"?>
<root xmlns="http://tempuri.org/XMLSchema.xs">
  <elementA>
    <options type="A">
      <option>Test-A</option>
      <option>Test2-A</option>
    </options>
  </elementA>
  <elementB>
    <options type="B">
      <option>Test-B</option>
      <option>Test2-B</option>
      <option>Test3-B</option>
      <option>Test4-B</option>
    </options>
  </elementB>
</root> 
```

# wpf - 如何在部分信任 XBAP 中获取客户端 DPI？

> ID：208616
> 
> 赞同：2
> 
> 时间：2008-10-16T13:41:16.560
> 
> 标签：wpf

是否可以在部分信任 XBAP 中获取客户端的 DPI？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-20T13:16:41.770

首先，这是在 WPF 中获取客户端 DPI 的方法：

[http://blogs.msdn.com/jaimer/archive/2007/03/07/getting-system-dpi-in-wpf-app.aspx](http://blogs.msdn.com/jaimer/archive/2007/03/07/getting-system-dpi-in-wpf-app.aspx)

但是，根据 MSDN 文档，**PresentationSource**类需要向代码授予**不受限制的 UIPermission**，因此这使得无法从运行在“Internet”区域中的部分信任应用程序中使用它。

# loading - 插页式加载页面背后的原因和基本概念是什么？

> ID：208630
> 
> 赞同：1
> 
> 时间：2008-10-16T13:45:52.043
> 
> 标签：loading, interstitial

我有兴趣找出为什么在某些网站上使用它来处理用户发起的搜索提交，它如何影响请求和响应流，以及为什么它是必要的（或有益的）。在 MVC 框架中，执行起来似乎很困难，因为您将另一个页面注入到流的中间。

编辑：

与广告无关。例如，大多数旅游网站过去都这样做，并且没有广告......一些银行网站也这样做，其中只有一个加载程序，上面写着“请稍候，我们正在处理您的交易......”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-16T13:50:14.717

它通常用于长时间运行的请求，以防止 Web 服务器超时请求。使用插页式页面，您可以不断刷新页面，直到获得结果。

编辑：

此外，对于长时间运行的请求，有一个“正在加载..”页面以向用户显示正在发生的事情是有益的。如果没有插页式页面，如果请求时间过长，请求可能看起来已挂起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-10-26T13:01:00.090

为了补充 HVS 所说的，之前出现的插页式广告，比如加载主页，在很大程度上是出于广告目的，我们都看到了“关闭此广告”链接。

从用户体验的角度来看，它们可能会有所帮助的一个例子是，当用户启动一项需要来自可能需要一些时间才能响应的流程的反馈的操作时 - 因为它很慢，很忙，或者只是有很多处理要做.

例如，考虑一个在线预订航班的网站。您经常会在点击“查找航班”时看到插页式广告，因为系统必须关闭并询问所有相关的航班信息，然后在将它们显示在屏幕上之前为您分类。如果这种“请求、询问、返回、显示”的往返时间可能超出正常网页从一个页面转换到下一个页面所需的时间，则 UX 设计师可能会考虑使用插页式屏幕（或消息）来让用户知道某事正在发生，同时允许系统有完成请求所需的时间。任何具有这种面对面时间的屏幕都会从“我们拥有它们时，我们不妨向他们展示一些东西”的角度来吸引您的营销部门的注意。

作为一名 UX 设计师，我自己并不总是喜欢这样的插页式广告，因为我希望每个系统都能立即返回数据，但如果由于某种原因它不能，我非常希望让用户尽可能地了解发生了什么 - 而不是让他们盯着浏览器状态栏，直到他们再次尝试或厌倦并离开。

考虑到这一点的最后一点也是在这样的屏幕上设置时间上限和下限。如果您需要展示插页式广告，请展示足够长的时间，以便人们可以阅读并理解它，但不要太长，以免他们厌倦了等待。作为粗略的指导，将其打开至少 3-4 秒（即使该过程平均为 4 秒，但在这种情况下已在 1 秒后完成）。在 4 到 10 秒之间，每秒检查一次进程是否已响应（然后将用户带到它具有的下一页），并在 10 秒后认真考虑告诉用户重试或告诉他们您失败了（同时让您的技术团队解决最终会影响您利润的问题）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-16T13:47:40.743

我相信绝大多数插页式页面都是用来投放广告的。

# sharepoint - Sharepoint StateMachine：处理对多个创建的任务的多个响应

> ID：208641
> 
> 赞同：2
> 
> 时间：2008-10-16T13:49:54.373
> 
> 标签：sharepoint, workflow, state-machine

我为共享点创建了一个 StateMachine 工作流，在一个状态下，我使用复制器创建了多个任务。创建的任务数量是可变的。

我需要为我创建的所有任务处理 OnTaskChanged 事件，这似乎是不可能的，因为一个事件处理程序只能与一个任务相关联。

我可以使用有限数量的任务，这些任务可以由特定数量的处理程序创建和处理，但我认为这是最后的手段，或者创建顺序工作流作为最后的手段。

请让我知道这是否受支持或是否有任何解决方法。

参考链接：[http ://social.msdn.microsoft.com/Forums/en-US/sharepointworkflow/thread/a174ac5f-03ed-4e27-998b-bbdb7d01d09b/](http://social.msdn.microsoft.com/Forums/en-US/sharepointworkflow/thread/a174ac5f-03ed-4e27-998b-bbdb7d01d09b/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-17T17:48:55.483

由于您列出的原因，它不起作用。解决方法是将您的状态机工作流程重组为顺序工作流程（这可能是不可能的）或切换到项目事件接收器（这可能不适合您）。我实际上已经写过关于这个主题的博客：[Workflow Nuttiness vol。1](http://www.pseale.com/blog/SharePointWorkflowNuttinessVolume1.aspx)

有趣的是，我刚刚检查了您提供的 MSDN 论坛链接，果然，我在那个线程中，问“所以，呃，我想我们都重写为顺序工作流？” 在那个线程中也没有更好的答案:)

# javascript - jQuery：如果没有成功删除助手，如何阻止它被删除

> ID：208647
> 
> 赞同：4
> 
> 时间：2008-10-16T13:51:29.190
> 
> 标签：javascript, jquery, jquery-ui, drag-and-drop, jquery-ui-draggable

我有[`draggable`](https://jqueryui.com/draggable/)一个自定义的[`helper`](http://api.jqueryui.com/draggable/#option-helper). 有时助手是一个克隆，有时它是原始元素。

问题是，当帮助器是原始元素并且**没有**被丢弃在有效的可放置对象上时，它会被删除。到目前为止，我的解决方案如下所示：

在我的`on_dropped`回调中，我设置`ui.helper.dropped_on_droppable`为`true`；

在`stop`可拖动的回调中，我检查该变量然后......我该怎么办？

```
$('.my_draggable').draggable({
    stop   : function(e, ui) {
        if (!ui.helper.dropped_on_droppable) {
            /* what do I do here? */
        }
    }, 
```

这甚至是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-20T09:34:33.047

好的，我找到了解决方案！它很丑，而且它打破了“封装规则”，但至少它完成了工作。

请记住**，这仅适用于特殊情况**！jQuery 可以很好地处理它自己的帮助器删除。在我的情况下，我有一个助手，它有时是原始元素，有时是克隆，所以在恢复后删除助手并不总是合适的。

```
element.draggable({
    stop   : function(e, ui) {
        /* "dropped_on_droppable" is custom and set in my custom drop method
           ".moved_draggable" is custom and set in my custom drag method, 
                     to differentiate between the two types of draggables
        */               
        if (!ui.helper.dropped_on_droppable & ui.helper.hasClass('moved_draggable')) {
            /* this is the big hack that breaks encapsulation */
            $.ui.ddmanager.current.cancelHelperRemoval = true;
        }
    }, 
```

## 警告：这会破坏封装并且可能不向前兼容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-17T15:21:22.393

我可能在这里遗漏了一些东西，但这不仅仅是添加的情况

```
revert: "invalid" 
```

如果可拖动元素是原始元素而不是克隆元素，则可以选择可拖动元素？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T19:28:38.070

我使用了一个自定义助手，它将多选可拖动项聚​​合到一个 div 中。这似乎与还原功能不符，所以我想出了这个方案。这些元素被手动附加回我通过 .data() 跟踪的原始父级。

```
.draggable({
    helper: function() {
        var div = $(document.createElement('div'))
            .data('lastParent', $(this).parent());
        return div;
    },
    start: function() {
        //... add multiple selection items to the helper..          
    },
    stop: function(event,ui) {
        $( $(ui.helper).data('lastParent') ).append( $(ui.helper).children() );
    }
} 
```

这种方法确实会失去漂亮的动画效果，但它可能对您或遇到此问题的其他人有用。

# sap - 在 SAP SCRIPT 中，如何添加分页符或在新页面中打印记录

> ID：208648
> 
> 赞同：1
> 
> 时间：2008-10-16T13:51:42.903
> 
> 标签：sap, page-break

每次合同编号更改时，我都想在新页面中打印记录。SAP SCRIPT 中新页面的语法是什么。

如果您知道如何实现这一目标，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-20T22:12:53.017

在 SAPSCRIPT（事务 SE71）内部使用控制命令 NEW-PAGE。（控制命令通过在格式栏中输入 /: 来识别）。

在打印程序（事务 SE38）中使用功能模块 CONTROL_FORM 调用命令 NEW-PAGE：

```
CALL FUNCTION 'CONTROL_FORM'
  EXPORTING
      COMMAND   = 'NEW-PAGE'
  EXCEPTIONS
      UNOPENED  = 1
      UNSTARTED = 2
      OTHERS    = 3. 
```

您只需要使用这些选项之一，具体取决于您确定是否需要分页符的位置。

# .net - 服务方法的 GUI

> ID：208653
> 
> 赞同：0
> 
> 时间：2008-10-16T13:52:45.210
> 
> 标签：.net, vb.net, testing, .net-2.0, service

我们有一项服务，它以指定的时间间隔运行用于数据导入/导出的方法。为了测试这些方法，我们有一个带有单个按钮的小应用程序，当单击该按钮时，实例化导入/导出类并调用所需的方法。没有什么花哨。我想创建一个更健壮的测试应用程序，它可以比服务方法的返回值更实时地从方法接收调试信息。这些方法可能需要几分钟到 30 分钟才能运行完整的导入/导出负载，我想要一些指示已经处理的数据量。

我最初的想法是将这些类包装在某种类型的消息队列类中，然后测试应用程序可以从中读取并显示消息。但是我在这方面仍然是一个 n00b，所以我不知道是否有更好的方法来做我想做的事情。

我们在 .NET 2.0 上使用 VB 开发

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-16T14:27:58.243

您可以修改服务方法以在处理期间引发报告状态的事件，然后只需处理代码中的事件以更新状态，这将是最快的方法。

您的生产代码根本无法对事件做任何事情

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-16T15:25:19.407

也许您可以使用 BackgroundWorker 对象来使用来自您的服务的调试信息来更新您的应用程序。BackgroundWorker 的好处在于它在单独的线程上运行代码，从而使您的表单可用于更新。

使用 BackgroundWorker 将允许您使用来自服务的调试信息更新您的应用程序，从而允许您在进程运行时查看更多信息。在“DoWork”方法中启动流程，当有调试信息要显示时，调用“ProgressChanged”方法。在“ProgressChanged”方法中，您可以使用调试信息更新您的表单。

让我知道这是否有帮助！联合部队

# c# - 在 .NET 中寻找简单的规则引擎库

> ID：208659
> 
> 赞同：68
> 
> 时间：2008-10-16T13:53:51.543
> 
> 标签：c#, .net, .net-core, logic, rule-engine

有谁知道一个好的 .NET 库规则库（最好是开源的）？我需要一些可以做嵌套逻辑表达式的东西，例如，(A AND B) AND (B OR C OR D)。我需要比较对象属性，例如 A.P1 和 B.P1。（理想情况下，我可以比较任何属性——A.P1 和 B.P2）。

它应该将规则存储在数据库中（我有很多简单的可配置逻辑）。它应该有一个规则创建/管理 API。管理工具必须检查实例以确定哪些属性可用以及存在哪些约束。

谢谢！

* * *

哦，还有一件事。作为规则引擎，我需要包含操作（命令）的概念。这些是表达式返回时执行的内容：

```
If (expression.Evaluation) { actions.Execute(); } 
```

所以我认为一个规则是这样的：

```
class Rule
{
    Expression Exp;
    Actions[] Actions;
    Run() 
    { 
        if(Exp.Evaluate()) 
        { 
            foreach(action in Actions) 
            { 
                action.Execute(); 
            }
        } 
    }
} 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2009-03-24T16:29:33.873

同意我会说使用工作流引擎系列中的一些东西，尽管不是工作流。稍微检查一下[System.Workflow.Activities.Rules命名空间 - 它在 .Net 3 中受支持，并内置在 .Net3.5 中。](http://msdn.microsoft.com/en-us/library/system.workflow.activities.rules.aspx)就像您提到的那样，您可以免费使用所有东西：

*   RuleCondition 用于条件，RuleAction 用于操作

*   描述元代码的标准化格式 (CodeDom - CodeExpressions)

*   您可以通过 TypeProviders 将任何类型的复杂性插入其中（说实话，除了 Linq 和 lambdas 以及某种扩展方法）

*   有一个用于使用智能感知进行规则编辑的内置编辑器

*   由于规则是可序列化的，因此可以很容易地持久化

*   如果您打算在数据库方案上使用规则，那么通过 typeprovider 它也可以实现

对于初学者： [在工作流程之外使用规则](http://cgeers.wordpress.com/2008/01/26/using-rules-outside-of-a-workflow/)

Ps.：我们正在广泛使用它，并且该命名空间中的内容比您想象的要多得多 -> 一种完整的元算法语言

最重要的是：它很容易使用——真的

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2008-10-16T14:24:44.537

这是我过去使用过的一个类。它像 eval() 在 Javascript 中一样评估字符串。

```
String result = ExpressionEvaluator.EvaluateToString("(2+5) < 8"); 
```

您需要做的就是构建一个要从您的业务对象中评估的字符串，这将处理所有复杂的嵌套逻辑等。

```
using System;
using System.CodeDom.Compiler;
using System.Globalization;
using System.Reflection;
using Microsoft.JScript;

namespace Common.Rule
{
  internal static class ExpressionEvaluator
  {
    #region static members
    private static object _evaluator = GetEvaluator();
    private static Type _evaluatorType;
    private const string _evaluatorSourceCode =
        @"package Evaluator
            {
               class Evaluator
               {
                  public function Eval(expr : String) : String 
                  { 
                     return eval(expr); 
                  }
               }
            }";

    #endregion

    #region static methods
    private static object GetEvaluator()
    {
      CompilerParameters parameters;
      parameters = new CompilerParameters();
      parameters.GenerateInMemory = true;

      JScriptCodeProvider jp = new JScriptCodeProvider();
      CompilerResults results = jp.CompileAssemblyFromSource(parameters, _evaluatorSourceCode);

      Assembly assembly = results.CompiledAssembly;
      _evaluatorType = assembly.GetType("Evaluator.Evaluator");

      return Activator.CreateInstance(_evaluatorType);
    }

    /// <summary>
    /// Executes the passed JScript Statement and returns the string representation of the result
    /// </summary>
    /// <param name="statement">A JScript statement to execute</param>
    /// <returns>The string representation of the result of evaluating the passed statement</returns>
    public static string EvaluateToString(string statement)
    {
      object o = EvaluateToObject(statement);
      return o.ToString();
    }

    /// <summary>
    /// Executes the passed JScript Statement and returns the result
    /// </summary>
    /// <param name="statement">A JScript statement to execute</param>
    /// <returns>The result of evaluating the passed statement</returns>
    public static object EvaluateToObject(string statement)
    {
      lock (_evaluator)
      {
        return _evaluatorType.InvokeMember(
                    "Eval",
                    BindingFlags.InvokeMethod,
                    null,
                    _evaluator,
                    new object[] { statement },
                    CultureInfo.CurrentCulture
                 );
      }
    }
    #endregion
  }    
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-10-16T14:15:49.407

开源的 .NET 规则引擎都不支持在数据库中存储规则。唯一将规则存储在数据库中的是商业的。我已经为在数据库之外运行的自定义规则引擎创建了一些 UI，但这可能并不容易实现。这通常是您不会免费看到该功能的主要原因。

据我所知，它们都不符合您的所有标准，但以下是我所知道的列表：

最简单的是 SRE
[http://sourceforge.net/projects/sdsre/](http://sourceforge.net/projects/sdsre/)

具有规则管理 UI 的一种是 NxBRE
[http://www.agilepartner.net/oss/nxbre/](http://www.agilepartner.net/oss/nxbre/)

Drools.NET 使用 JBOSS 规则
[http://droolsdotnet.codehaus.org/](http://droolsdotnet.codehaus.org/)

我个人没有使用过任何一个，因为与我合作的所有项目都不想使用内部构建的东西。大多数企业认为这很容易做到，但最终浪费了太多时间编码和实现它。这是此处未发明综合症 (NIH) 规定的领域之一。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-10-16T14:14:52.840

好吧，由于逻辑表达式只是数学表达式的一个子集，您可能想在 CodePlex 上尝试[NCalc - 用于 .NET 的数学表达式评估器。](http://www.codeplex.com/ncalc)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-10-16T14:08:37.037

官方的 MS 解决方案是[Windows Workflow](http://msdn.microsoft.com/en-us/netframework/aa663328.aspx)。虽然我不会称它为“简单”，但它符合您的所有规范（无论如何，这需要一个广泛的框架来满足）。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2011-10-27T02:18:07.937

我过去成功地使用了这个[http://www.codeproject.com/KB/recipes/Flee.aspx](http://www.codeproject.com/KB/recipes/Flee.aspx)。试试看。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2010-01-04T18:27:51.817

Windows Workflow Foundation 确实为您提供了一个免费的前向链接推理引擎。您可以在没有工作流部分的情况下使用它。开发人员可以创建和编辑规则。

如果您想让非程序员编辑和维护规则，您可以尝试使用[Rule Manager](http://www.acumenbusiness.com/Products.htm)。

Rule Manager 将为您生成一个有效的 Visual Studio 解决方案。这应该让你很快开始。只需单击文件\导出并选择 WFRules 格式。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2011-10-07T05:09:35.830

您也可以在[http://www.FlexRule.com上查看我们的产品](http://www.FlexRule.com)

FlexRule 是一个业务规则引擎框架，支持三个引擎；程序引擎、推理引擎和规则流引擎。它的推理引擎是使用 Rete 算法的增强实现的前向链接推理。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-05-17T14:41:15.470

看看 Logician：CodeProject 上的[教程/概述](http://www.codeproject.com/KB/library/logician.aspx)

项目：SourceForge 上的[页面/来源](http://sourceforge.net/projects/logician/)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-06-01T01:43:04.123

Maybe check out [SmartRules](http://www.kontac.net/site/SmartRules/SmartRulesStudio/tabid/78/Default.aspx). Its not free, but the interface looks simple enough.

Only know about it because I've used the SmartCode codegen utility from there before.

Here is an example rule from the Website:

```
BUSINESS RULES IN NATURAL LANGUAGE      

Before
If (Customer.Age > 50 && Customer.Status == Status.Active) {
policy.SetDiscount(true, 10%);
}

After (with Smart Rules)
If Customer is older than 50 and
the Customer Status is Active Then
Apply 10 % of Discount 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-03-24T16:41:26.823

我会看看 Windows 工作流。规则引擎和工作流程往往一开始很简单，然后逐渐变得复杂。像 Windows Workflow Foundation 这样的东西起步并不难，并且提供了增长空间。 [这是一篇文章，表明让一个简单的工作流引擎运行起来并不难。](http://blogs.vertigo.com/personal/dbritton/Blog/Lists/Posts/Post.aspx?List=c3cd45fa-ec9d-4874-bfe3-5c6ffe78629a&ID=16&Source=http%3A%2F%2Fblogs.vertigo.com%2Fpersonal%2Fdbritton%2FBlog%2FLists%2FPosts%2FArchive.aspx)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2010-01-28T08:37:22.737

您可以使用 RuEn，这是我创建的一个简单的基于开源属性的规则引擎：

[http://ruen.codeplex.com](http://ruen.codeplex.com)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2011-09-07T06:01:14.100

试试 [http://rulesengine.codeplex.com/](http://rulesengine.codeplex.com/)

它是一个与表达式树一起使用的 C# 开源规则引擎。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-10-16T14:52:42.813

根据您尝试使用 Lambda 表达式（和表达式树）执行的操作，该概念是否有效。本质上，您将表达式作为字符串提供，然后动态编译成 lambda 表达式/表达式树，然后您可以执行（评估）。一开始并不容易理解，但是一旦你理解它就会非常强大并且设置起来相当简单。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-12-21T15:57:16.177

它不是免费的，因为您无法轻松地将其与 BizTalk 父级解开，但 BizTalk 的业务规则引擎组件是与核心 BizTalk 引擎本身分开的实体，并包含一个非常强大的规则引擎，其中包括基于规则/策略的图形用户界面。如果有一个免费版本，它将满足您的要求（仅为 BRE 购买 BizTalk 不会真正在商业上起作用。）

# translation - 在线翻译

> ID：208665
> 
> 赞同：0
> 
> 时间：2008-10-16T13:55:42.210
> 
> 标签：translation, translate, community-translations

我正在尝试开发在线翻译服务（有点像个人挑战），但我一直在寻找任何指导方针或任何方法来了解它应该如何完成，到目前为止我还没有想出任何办法。简而言之，是否有人知道在哪里可以找到有关在线翻译工作原理和/或制作指南的服务、代码或解释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-16T14:00:26.320

对于“个人挑战”，这个项目似乎太大了。你需要一个庞大的字典和非常复杂的翻译算法。或者您是在问现有翻译服务是否有 API？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-16T14:04:00.680

体面的在线翻译服务工作如下：

1.  向公司发送要翻译的文本
2.  他们让人类翻译它。
3.  公司在另一封电子邮件中发回翻译后的文本
4.  在上述的某个时刻，货币易手。

自动翻译服务往往不能很好地工作，因为翻译文本需要大量的信息而不仅仅是文本本身，并且在两种语言之间没有准确的翻译时会出现问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-16T14:45:55.120

你可以看看一个类似的项目：[机器翻译](http://blogs.msdn.com/translation/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-16T14:08:06.833

这是一项艰巨的任务。对于个人用途，我使用谷歌翻译。它做得不是很好，但足以让我得到一个体面的理解。在工作中，我们使用 COMIDOC，一种相当昂贵的商业服务。它并不完美，我们必须做很多工作来设置专门的技术句子翻译。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-03-19T19:13:28.657

您可以查看在线翻译网站[西班牙英语的代码。](https://www.spanishenglish.com)

# database - 两个外键而不是主键

> ID：208666
> 
> 赞同：9
> 
> 时间：2008-10-16T13:55:42.427
> 
> 标签：database, oracle, foreign-keys, primary-key

我想知道，是否有可能创建一个没有主键但有两个外键的表，其中外键对总是不同的？例如，一个`STOCK`表，其中`item_id`and`warehouse_id`作为外键来自`ITEMS`and`WAREHOUSES`表。所以同一个项目可以在不同的仓库。表视图：

```
item_id   warehouse_id   quantity
10        200            1000
10        201            3000
10        202            10000
11        200            7000
11        202            2000
12        203            5000 
```

或者我是否必须使用自动增量或其他方式创建未使用的主键字段？数据库是oracle。

谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-10-16T13:57:15.747

你想要一个[复合主键](http://en.wikipedia.org/wiki/Combination_Primary_Key)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-16T14:09:37.517

像这样：

```
create table stock
( item_id      references items(item_id)
, warehouse_id references warehouses(warehouse_id)
, quantity     number(12,2) not null
, constraint stock_pk primary key (item_id, warehouse_id)
); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-16T14:00:19.393

您可以在两列上创建主键：单击设计器视图中的两列 > 单击 pk

或者，您可以在 2 列上添加唯一约束：

```
ALTER TABLE [dbo].[RepresentativeData] 
add CONSTRAINT [UK_Representative_repRecID_AppID] unique (repRecID,AppId)
go 
```

我更喜欢复合主键，因为它强制该值确实存在于其他表中。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-16T13:58:09.473

是的，它被称为复合主键

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-16T14:25:13.490

复合主键对此没有任何问题，但在大多数情况下可能更容易创建单个主键列。除非您有特定的硬件限制，否则 pk col 可能只会提高性能和易于维护。

不要忘记考虑您可能遇到的情况可能不适合您的模型。例如，您可能有库存，您知道存在但目前不知道它在哪个仓库，或在运输中或尚未分配或其他什么。您要么需要创建业务规则以使其适合您的复合主键，要么使用主键列。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-16T13:58:19.333

如果您不进行任何需要它的查询，则*不需要*主键。但是，这使得明确删除记录变得有点困难。如果 Oracle 允许，您可能希望对 item_id,warehouse_id 设置唯一约束。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-16T14:02:32.447

您不必创建“未使用”的主键字段，但它通常会使生活变得更简单*。*（正如 Paul T 指出的那样，您必须指定两个字段才能删除一行）。

我经常将此类列命名为“PK”，以使其有限的效用显而易见。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-16T14:04:03.440

就像每个人都说的那样，您可以从 2 列创建一个主节点。您不必创建人工自动增量列。

另外，请记住，外键的用途与主键不同。所以你不能用 2 个外键替换一个主键。

# c# - 奇怪的.Net序列化问题

> ID：208668
> 
> 赞同：4
> 
> 时间：2008-10-16T13:56:00.757
> 
> 标签：c#, .net, serialization

今天我在尝试序列化一个对象时遇到了一个奇怪的问题。该对象是通过 Web 服务 (svcutil.exe) 中的“添加服务引用”生成的。

问题是下面的属性 (agencyId) 没有与对象的其余部分一起序列化。出于绝望，我评论了它下面的属性，因为它分配了“XMLIgnoreAttribute”......在我评论了被忽略的属性之后，agencyId 字段按预期序列化。

有人可以向我解释为什么会发生这种行为吗？谢谢！！

```
 /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified, Order=1)]
    public string agencyId
    {
        get {
            return this.agencyIdField;
        }
        set {
            this.agencyIdField = value;
            this.RaisePropertyChanged("agencyId");
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlIgnoreAttribute()]
    public bool agencyIdSpecified
    {
        get
        {
            return this.agencyIdFieldSpecified;
        }
        set
        {
            this.agencyIdFieldSpecified = value;
            this.RaisePropertyChanged("agencyIdSpecified");
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-16T14:00:13.433

有一种模式（对于 XmlSerializer），属性 Foo 还将查找“bool FooSpecified”或“bool ShouldSerializeFoo()” - 如果找到，则仅在此其他成员返回 true 时序列化 Foo。所以我假设 AgencyIdSpecified 从未设置为 true？删除此成员将使其始终序列化（除非您添加一个`[DefaultValue]`或类似的）。

这种类型的行为用于在我们确实需要知道它是否在原始数据中的情况下对可选值进行建模 - 即它是否具有值 0 是因为调用者告诉我们该数字，或者因为这只是默认值。

请注意，“FooSpecified”成员通常具有`[XmlIgnore]`，因此 XmlSerializer 知道不应将其视为序列化数据。对于“ShouldSerializeFoo()”，这不是必需的（实际上是合法的），因为方法永远不会被序列化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-16T13:59:07.570

XmlIgnoreAttribute 的目的是告诉 XmlSerializer 您不想序列化该属性：这是重点。因此，您看到的是该代码的设计行为。一个更好的问题是为什么类实现者选择以这种方式装饰该属性。

# java - 客户端的Java媒体框架？

> ID：208672
> 
> 赞同：0
> 
> 时间：2008-10-16T13:56:43.220
> 
> 标签：java, applet, jmf

如果我正在编写一个显示视频序列的小程序（例如，从摄像机流式传输，或者小程序本身在摄像机上运行），我的客户是否需要下载 Java 媒体框架库才能看到序列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-16T14:04:43.160

他们需要在他们的计算机上安装 Java Media Framework，或者您需要以某种方式将 JMF 与您的小程序捆绑在一起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-16T18:19:20.757

如果小程序使用 JMF 库，则需要将它们下载到客户端计算机（小程序执行的地方）。然而，JMF 从 Sun 那里得到的开发很少（没有读过），而且现在几乎是遗留的（*主观*的）。

根据相机的现代程度以及它可以输出的编解码器，它也可能值得考虑在flash的[javafx中的视频支持。](http://www.sun.com/software/javafx/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-16T14:28:03.253

将 JMF.jar 与您的小程序一起分发就足够了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-20T00:37:27.513

创建一个 JAR（Java DLL）并将所有 jar 文件放在安装目录中，JMF 仅为 32 位，因此 x86\java\JMF2.1.1e\lib 是它通常所在的位置。

如果您自定义了customizer.jar，您也想要那个。

您可以从像applet 一样的服务器下载它，然后将applet 嵌入其中，然后运行它。它在成人支付网站上为我工作了 14 年以上。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-10-16T20:30:30.353

你考虑过使用[Java FX](http://javafx.com/)吗？这项技术正在处理下载媒体库的问题，所以没有。当然。它仍在开发中。如果可以选择成为第一采用者，那么值得考虑这一点。

# javascript - 为什么复选框在 FF3 中保持选中状态，但在 IE、Chrome 或

> ID：208682
> 
> 赞同：2
> 
> 时间：2008-10-16T13:58:19.473
> 
> 标签：javascript, jquery, asp.net, checkbox

所以 - 我有一个复选框

```
<asp:CheckBox ID="chkOrder" runat="server" Visible='<%#IsCheckBoxVisible() %>' 
     Checked="false"
     OnCheckedChanged="chkOrder_CheckedChanged" AutoPostBack="true" 
     EnableViewState="false"></asp:CheckBox> 
```

上面那个。现在，该复选框位于网格视图中并且在数据绑定中 - 对于网格视图中的所有行，该复选框都设置为 false。问题是第一个复选框仍然被选中。

在 IE 中不存在问题，对于 Chrome 也是如此。我的选择已经不多了。另外，如果我使用

```
$("checkboxName").attr("checked"); // verified on jquery ready function. 
```

在 FF 中是真的；即错误；铬错误。

有小费吗？

**编辑**

现在为此做好准备：在生成的 html 中 - 没有选中的属性。FF 和 IE 的区别是**完全一样的**。

另一件事 - 包含复选框的网格上有一个 ajax 面板，当我对网格进行分页时，尝试转到第 2 页 - 代码隐藏中的 checkedChanged 被触发。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-10-16T15:52:48.930

默认情况下，Firefox 会记住表单字段的状态。`Ctrl+F5`将强制 Firefox 清除此缓存。

您可以为单个表单和输入元素禁用此功能：

```
<form autocomplete="off"> 

<input ... autocomplete="off" /> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-16T14:12:35.217

如果您不希望选中复选框，则应该完全省略“checked”属性，因为检查是由属性的*存在*触发的`checked`，而不是它的值：

> 复选框（和单选按钮）是可以由用户切换的开/关开关。**当设置控制元素的选中属性时，开关为“on”**。

[http://www.w3.org/TR/html401/interact/forms.html#checkbox](http://www.w3.org/TR/html401/interact/forms.html#checkbox)

对我来说，以下标记会生成一个复选框，该复选框在 IE、Firefox 和 Opera 中被选中，正如您根据规范所期望的那样：

```
<input type="checkbox" checked="false"> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-16T14:23:45.897

在我最近做的一些 php 编码中，我注意到 FF3 会记住我检查的内容，即使在 F5 页面刷新之后也是如此。查看源代码显示了我想要生成的正​​确 HTML。要解决此问题，请转到地址栏并再次强制请求页面。

为什么这个工作是必要的，我不确定，但从正常可用性的角度来看，我很欣赏它，只是不是在开发过程中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-03-22T15:22:19.100

这揭示了复选框的一个有趣的怪癖。这是我想出的一些非常简单的html来正确总结它：

```
<html>
<body>

<input type="checkbox" checked="false" id="cb" />

<script language="javascript">
if (cb.checked == true)
  document.write('this is retarded');
</script>

</body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-16T14:05:18.023

您是否尝试过比较从 FF 和 IE 生成的 HTML？（使用“查看 html 源代码”）

只是为了更精确地定位问题。这只是一个很小的机会，但是如果两个浏览器的 HTML 不同，那么您在服务器端就会遇到 ASP 如何创建 HTML 的问题。

如果两者相同，并且完全是 HTML 投诉，那么您在 FF 中发现了一个错误，

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-16T15:52:23.957

FireFox 3 中的选择框也会发生这种情况，如果您使用该框来运行 AJAX/更新页面，这可能会很痛苦。

如果用户刷新页面或做了一些奇怪的后退按钮，他们最终可能会选择仍然选中的选择框，但实际上必须取消选择并重新选择才能重新运行 AJAX。

在这种情况下，我发现使用 body onunload 事件清除任何选择/复选框“解决”了“问题”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-04-21T22:12:03.680

```
$("input[id$=chkOrder]").click(function() {        
    if (!$(this).attr("checked")) { $(this).removeAttr("checked"); }
    else { $(this).attr("checked", "checked"); }
}) 
```

# delphi - Setting a DBGrid column format in Delphi

> ID：208691
> 
> 赞同：6
> 
> 时间：2008-10-16T14:01:35.350
> 
> 标签：delphi, format, currency, lazarus, dbgrid

I am using a DBGrid component in Delphi. I wonder how I can set the format of a column. I have real values that I want to be displayed as currency in the grid.

Someone knows how?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-10-16T14:41:30.743

1.  You can set the `DisplayFormat` of the `Field`
2.  You can handle `OnGetText` event. This approach allows to do more complex operations with the value.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-16T21:36:27.397

If you don't add the fields to field Editor list you can get the formating by code as :

```
TFloatField(MyQuery.fieldByName('MyField').DisplayFormat := '0.00'; 
```

if you don't want to show the zeros replace '0.00' with '#.##';

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-16T14:08:00.127

The first port of call is the DisplayFormat of the data field in the database itself.

# .net - 通过 SSL 连接到 .Net 客户端的 ActiveMQ

> ID：208695
> 
> 赞同：2
> 
> 时间：2008-10-16T14:03:27.217
> 
> 标签：.net, ssl, activemq

有谁知道是否可以使用 Spring.Messaging.Nms 库通过 SSL 将 ac# 客户端连接到 ActiveMQ 实例？或者如果不使用 Nms 那么其他一些库？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-16T15:13:54.377

如果可能，那么 Spring.Messaging.Nms 就是这样，是的。我只是不确定 ActiveMQ C# 代码是否支持 SSL（代理当然支持）。

您可能想在[ActiveMQ 用户论坛](http://www.nabble.com/ActiveMQ---User-f2356.html)上询问，以了解何时为 ActiveMQ 的 C# 客户端发布 SSL 支持

# c# - C# 属性属性

> ID：208703
> 
> 赞同：15
> 
> 时间：2008-10-16T14:05:37.867
> 
> 标签：c#, properties, attributes

我看过以下代码：

```
[DefaultValue(100)]
[Description("Some descriptive field here")]
public int MyProperty{...} 
```

上面的代码片段的功能似乎很清楚，我不知道如何使用它来做有用的事情。我什至不知道给它起什么名字！

有谁知道我在哪里可以找到有关这些属性属性的更多信息/教程？我也会对这个功能可以做的任何新颖/有用的任务感兴趣。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-10-16T14:11:29.150

> 上面代码片段的功能似乎很清楚，

也许不是，因为许多人认为 [DefaultValue()]*设置*了属性的值。实际上，它所做的只是告诉一些视觉设计师（例如 Visual Studio），代码将把默认值设置为什么。这样，如果它设置为其他值，它就知道在属性窗口中将值**加粗。**

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-10-16T14:14:06.243

人们已经涵盖了 UI 方面 - 属性还有其他用途，但是……例如，它们在大多数序列化框架中被广泛使用。编译器对某些属性进行了特殊处理 - 例如，`[PrincipalPermission(...)]`为方法添加声明性安全性，允许您（自动）检查用户是否具有合适的访问权限。

要添加自己的特殊处理，可以使用[PostSharp](http://www.postsharp.org/)；有很多使用 PostSharp 做 AOP 事情的好例子，比如日志记录——或者只是代码简化，比如[自动`INotifyPropertyChanged`实现](http://code.google.com/p/postsharp-user-samples/wiki/DataBindingSupport)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-10-16T14:07:42.090

它们被称为属性，在msdn中有很多信息，例如[http://msdn.microsoft.com/en-us/library/z0w1kczw.aspx](http://msdn.microsoft.com/en-us/library/z0w1kczw.aspx)

通常，它们不会自己“做”任何事情，它们被其他一些将使用您的类的代码使用。XmlSerialization 就是一个很好的例子：XmlSerializer（由 Microsoft 作为框架的一部分提供）几乎可以用于任何类（尽管对类有很多要求）——它使用反射来查看类中包含哪些数据。您可以使用属性（与 XmlSerializer 一起定义）来更改 XmlSerializer 序列化您的类的方式（例如，告诉它将数据保存为属性而不是元素）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-10-16T14:07:01.720

可视化设计器（即 MS Expression Blend 和 Visual Studio 设计器）使用您示例中的那些在设计器 UI 中提供提示。

请注意，它们是元数据，不会影响属性逻辑。例如，默认情况下设置`DefaultValue`不会将该属性设置为该值，您必须手动执行此操作。

如果您出于某种原因想要访问这些属性，则必须[使用反射](http://msdn.microsoft.com/en-us/library/z919e8tw.aspx)。

有关设计器属性的详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/a19191fh.aspx)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-10-16T15:08:20.097

我们使用它来定义应该加载哪个图形设计器来配置特定类型的实例。

也就是说，我们有一种工作流设计器，可以从程序集中加载所有可能的命令类型。这些命令类型具有需要配置的属性，因此每种命令类型都需要不同的设计器（用户控件）。

例如，考虑以下命令类型（在我们的解决方案中称为复合）

```
[CompositeMetaData("Delay","Sets the delay between commands",1)]
[CompositeDesigner(typeof(DelayCompositeDesigner))]
public class DelayComposite : CompositeBase 
{
       // code here
} 
```

这是在两个地方使用的信息

1) 当设计者创建命令列表时，它使用 CompositeMetaData 来显示有关命令的更多信息。

2) 当用户向设计器添加命令并且设计器创建该类的实例时，它会查看 CompositeDesigner 属性，创建指定类型（用户控件）的新实例并将其添加到可视化设计器。

考虑以下代码，我们用来将命令加载到我们的“工具栏”中：

```
foreach (Type t in assembly.GetExportedTypes())  
{
    Console.WriteLine(t.Name);

    if (t.Name.EndsWith("Composite"))
    {
        var attributes = t.GetCustomAttributes(false);
        ToolboxListItem item = new ToolboxListItem();

        CompositeMetaDataAttribute meta = (CompositeMetaDataAttribute)attributes
                              .Where(a => a.GetType() == typeof(Vialis.LightLink.Attributes.CompositeMetaDataAttribute)).First();
        item.Name = meta.DisplayName;
        item.Description = meta.Description;
        item.Length = meta.Length;
        item.CompositType = t;

        this.lstCommands.Items.Add(item);
    }                           
} 
```

如您所见，对于程序集中名称以“Composite”结尾的每种类型，我们获取自定义属性并使用该信息来填充我们的 ToolboxListItem 实例。

至于加载设计器，属性是这样检索的：

```
var designerAttribute = (CompositeDesignerAttribute)item.CompositType.GetCustomAttributes(false)
                         .Where(a => a.GetType() == typeof(CompositeDesignerAttribute)).FirstOrDefault(); 
```

这只是您可以如何使用自定义属性的一个示例，

我希望这能给你一个开始的地方。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-10-16T14:06:26.523

这些属性定制设计时体验。

[http://msdn.microsoft.com/en-us/library/a19191fh.aspx](http://msdn.microsoft.com/en-us/library/a19191fh.aspx)

# c# - 设计提示，工资系统...重新发布

> ID：208707
> 
> 赞同：3
> 
> 时间：2008-10-16T14:07:00.783
> 
> 标签：c#, database, oop, n-tier-architecture

我们正在为客户设计工资单生成系统。

我们所针对的组织具有如下层次结构：公司 -> 集群 -> 业务部门 (BU) -> 部门 -> 员工

员工的工资由各种工资组成部分组成。每个工资组件都有 3 个与之关联的规则，一个计算规则（将组件计算为另一个组件的百分比，或一个固定数字或固定数字的百分比），一个资格规则（员工/部门是否有资格获得一个组件）和限制组件的最大值和最小值的约束规则。

**这些规则是可编辑的，并且可以由用户最终用户进行编辑**。这些规则也是自上而下继承的，但如果在较低级别定义，则较低级别的规则优先。

**我们有一个包含出勤、休假、奖金表的数据库，这些规则也应该与这些表交互。**

客户将为多个客户生成工资单，每个客户都托管一个单独的数据库实例。它们可能对每个组件都有不同的解释，并且可能具有不同的组件。

我们只希望支持 SQL Server，工资单生成将是一项离线活动。

**我们对将使用这些规则生成各个税收组成部分（包括税收减免、税收核销、免税额等）的逻辑放在哪里存在分歧。**

有些人提倡神奇的 SP，它将获取员工 ID 并生成当月的工资单。其他人希望将逻辑拆分为单独的组件，这些组件将在应用层获取员工的相关数据并在那里计算这些组件。

我们的优先顺序是： 1\. 快速适应新客户变化的能力 2\. 长期可维护性 3\. 性能

1 和 2 在这里比 3 重要得多，因为这将是一个离线活动。

可维护性和快速可定制性非常重要，我们将为不同的客户部署应用程序。客户 A 的薪资构成规则可能为 ((0.3 * Basic) + 800)，客户 B 可能有 (0.2 * Basic) + (0.1 * Atendance Bonus)

**SP 是否会在这里造成混乱，因为上面建议的规则将由最终用户指定，并且需要通过 Web UI 进行自定义。我们将不得不从 SQL 中解析公式。会有多难或容易？与使用 SP 相比，在应用层 (C# .Net) 中执行此操作有什么优势？**

对现有系统架构的建议和指示将非常有帮助。...是的，我们在系统的其他地方使用 LINQ to SQL。

亲切的问候， Ashish Sharma

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-16T14:10:54.427

看完之后，我唯一的建议是查看 GoF 设计模式书中的策略模式。您可能希望使用脚本语言而不是您的主要编译语言来完成这些策略，但这样您会发现编辑它们更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-16T15:23:19.320

Depends how much decision points do you have in the algorithm. And how much change do you anticipate.

The all SP approach is likely to give you the best performance if your processing is uniform. This will allow you to take full advantage of the database caches and avoid the network bottleneck. Beware of cursors and queries with join criteria different than equals/not-equal (if you have these, the processing is usually better handled by a general purpose language).

If you go for an application, consider using rule management system to encode the rules outside of the database. This would give you maximum transparency and flexibility. Good free rule engines for Java is [Drools](http://www.jboss.org/drools/) (some people also like Jess which is a CLIPS clone). Not sure what are the .Net offerings, but in the worst case you can wrap Drools in a web service and use it from C#.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-16T15:33:50.593

If payroll generation is an offline activity, then I would do it in sps and run them from scheduled jobs. There is no reason the application should be involved in this at all. If you want them to have the ability to run payroll out of schedule, the application could call the same sp.

Security issues you really need to consider in doing payroll: Do not anywhere use dynamic sql. No users should have direct rights to tables. All rights should be at the sp level (and no dynamic sql inthe sps either or you have to set rights at the table level). This is to limit the abilty of users to commit payroll fraud and is extremely important. Any payroll system that uses any dynamic sql is at risk for company employees to commit fraud by directly accessing the tables and doing things the application won't let them do. This is one reason why I would not accept any answer to your question except to use sps.

Business rules should be enforced at the database level for the same reason. You do not want someone using a query tool to add or change data that doesn't follow your business rules. This is extremely critical in payroll (or any other financial system). Use constraints where possible, triggers if the logic is more complex.

You need to audit all the tables including recording who made the changes to data and when.

Be very careful about which users can change the payroll calculation. Again security is the real issue here. Just because I'm a supervisor doesn't mean I should be able to change any employee's salary. This is easy to get wrong, so be very careful here.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-16T15:10:40.437

> 有些人提倡神奇的 SP，它将获取员工 ID 并生成当月的工资单。其他人希望将逻辑拆分为单独的组件，这些组件将在应用层获取员工的相关数据并在那里计算这些组件。

为什么不结合两者的优点呢？即，将逻辑拆分为单独的组件，编写为 SP，从主 SP 调用？

这都是数据处理，除了调用主SP，为什么还要涉及“应用层”呢？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-16T14:12:10.990

也许您想查看[C# 中的敏捷原则、模式和实践，](http://www.amazon.ca/Agile-Principles-Patterns-Practices-C/dp/0131857258/ref=sr_1_29?ie=UTF8&s=books&qid=1224166307&sr=1-29)书中的核心示例是以敏捷方式设计工资单系统......

# .net - 编译并调用生成的方法

> ID：208711
> 
> 赞同：1
> 
> 时间：2008-10-16T14:07:47.520
> 
> 标签：.net, code-generation, codedom

我设法使用 CodeDom 创建了一个类，并向该类添加了一个方法。现在，有没有办法在构造 CodeCompileUnit 实例后编译代码并调用生成的方法？方法调用必须在与代码生成相同的上下文中完成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-16T14:14:03.327

摘自我一个[朋友的博客](http://zpodblog.blogspot.com/2007/11/accediendo-dinamicamente-webservices.html)：

```
 CSharpCodeProvider codeProvider = new CSharpCodeProvider();
    codeProvider.GenerateCodeFromNamespace(codeNamespace, new StringWriter(), new CodeGeneratorOptions());

    CompilerParameters param = new CompilerParameters(assemblyReferences);
    param.GenerateExecutable = false;
    param.GenerateInMemory = true;
    param.TreatWarningsAsErrors = false;
    param.WarningLevel = 4;

    CompilerResults results = codeProvider.CompileAssemblyFromDom(param, compileUnit);
    Assembly assembly = results.CompiledAssembly;

    Type[] types = assembly.GetExportedTypes(); 
```

然后，您可以对类型使用反射来创建所需类型的实例并执行所需的任何方法。

# java - 有谁知道 javaspec.org 发生了什么？

> ID：208712
> 
> 赞同：0
> 
> 时间：2008-10-16T14:07:51.187
> 
> 标签：java, wiki

javaspec.org 应该包含一个与 java 相关的 wiki；但它似乎下降了......这只是暂时的还是“永远”下降了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-16T14:48:33.833

该域名于 2008 年 1 月通过 GoDaddy 由“DomainByProxy”注册。

听上去好像是原所有者把它关了，让域名过期了，然后别人捡了，还没决定怎么处理。

# sql-server - 使用 DTS 复制检查约束时出错

> ID：208716
> 
> 赞同：0
> 
> 时间：2008-10-16T14:08:17.427
> 
> 标签：sql-server, dts

我有一个 DTS 包，它通过“复制 SQL Server 对象”任务引发错误。任务是将表和数据从一台 SQL Server 2000 SP4 服务器复制到另一台（相同版本）并给出错误：-

*找不到“dbo.MyTableName”的 CHECK 约束，尽管该表被标记为有一个。*

源表定义了一个似乎会导致问题的检查约束。运行 DTS 包后，事情似乎正常工作 - 表、所有约束和数据都是在目标服务器上创建的？但是会引发上述错误，导致后续步骤无法运行。

知道为什么会引发此错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-18T01:16:21.693

这表明 sys 表中的元数据与您的实际模式不同步。如果您没有看到任何其他更普遍的损坏迹象，请通过将表复制到另一个表来重建表（从旧表中选择 * 到新表中），删除旧表，然后重命名新表并替换约束将帮助。这类似于 2000 的企业管理器在您插入不在表末尾的列时所做的事情，因此在表中间插入一个新列然后删除将达到相同的效果不想手动编写查询。

如果您看到其他此类错误的出现，我会有点担心整个数据库的状态。（我在这里假设您已经完成了 CHECKDB 命令并且错误仍然存​​在......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-20T10:55:42.307

当将新列（带有检查约束）添加到现有表时，此错误开始。调查我有： -

*   将表复制到不同的目标 SQL Server 并得到相同的错误。
*   创建了一个结构完全相同但名称不同的新表，并且复制没有错误。
*   在问题表上删除并重新创建了检查约束，但仍然得到相同的错误。
*   带有 ALL_ERRORMSGS 的 dbcc checktable ('MyTableName') 没有给出错误。
*   源数据库和目标数据库中的 dbcc checkdb 没有给出错误。

有趣的是，DTS 包似乎： -

*   复制表格。
*   复制数据。
*   创建约束

因为检查约束创建时间是表创建时间之后的 7 分钟，即它在移动数据之后创建检查约束。这是有道理的，因为它不必在复制数据时检查数据，这可能会提高性能。

正如 Godeke 建议的那样，我认为系统表中的某些内容已经损坏，因为具有相同列的新表可以正常工作。即使 DBCC 语句没有给出错误？

# wcf - WCF 是控制台应用程序还是在 IIS 下运行是真的吗？

> ID：208721
> 
> 赞同：2
> 
> 时间：2008-10-16T14:09:47.830
> 
> 标签：wcf

WCF 是否作为必须手动启动的控制台应用程序运行或在更传统的 IIS 应用程序（如网站或 Web 服务）下运行

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-10-16T14:25:58.733

您可以在以下位置启动 WCF 主机进程：

*   Windows 窗体应用程序
*   控制台应用
*   视窗服务
*   IIS 6（仅 HTTP 托管）
*   IIS 7 - WAS（支持所有绑定）

他们每个人都有优点或缺点。此页面提供了有关托管选项的大量信息：http: [//msdn.microsoft.com/en-us/library/bb332338.aspx](http://msdn.microsoft.com/en-us/library/bb332338.aspx)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-16T14:14:27.477

**编辑**：不，这不完全正确。

这是 WCF 的两个托管选项。还有其他的。

* * *

原始答案：

您实际上可以在任何地方执行 wcf 服务，在那里您可以执行托管代码。我见过在 sql server、wpf 应用程序、windows 服务中运行的 wcf 服务，甚至还有一个在 mono 的 linux 机器上运行的服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-16T14:49:00.870

WCF 中定义了一个 ServiceHost 类，它允许您在任何应用程序中托管服务，如下所示：

```
using (ServiceHost host = new ServiceHost(typeof(MyService))
{
   host.Open();

   WaitForClose();

   host.Close();
} 
```

在 Windows XP SP2+、Vista、2003 或 2008 中运行的 IIS 可以托管 WCF 服务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-16T14:11:35.250

是的，没错……您也可以将它们作为 Windows 服务托管

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-16T14:13:05.823

WCF 的部分目标是让您摆脱对服务运行位置的限制。您还可以使用适用于 Vista 和 Windows Server 2008 的 Windows 激活服务 (WAS)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-22T17:13:16.897

我有一个 WCF 服务需要在 IIS 7 中作为服务运行。问题是，为了启动它，我需要通过浏览器手动调用它，例如[http://site/myservice.svc](http://site/myservice.svc)。

重新启动应用程序池时，有没有办法让 IIS 调出并启动服务主机/wcf 服务？

我的偏好是避免使用 Windows 服务并使用 IIS / WAS

# c# - .Net TraceSource/TraceListener 框架是否有类似于 log4net 的格式化程序的东西？

> ID：208735
> 
> 赞同：6
> 
> 时间：2008-10-16T14:13:29.303
> 
> 标签：c#, .net, trace

我已经开始使用内置的 TraceSource 和 TraceListener 类，我想独立于 TraceSources 和 TraceListeners 修改事件的输出格式。TraceListener 似乎应用了自己的格式。是否可以在不为我使用的每个 TraceListener 创建新类的情况下完全更改格式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-12T19:49:25.550

企业库日志记录应用程序块 ( [http://msdn.microsoft.com/en-us/library/cc309506.aspx](http://msdn.microsoft.com/en-us/library/cc309506.aspx) ) 建立在 .Net TraceSource 和 TraceListener 类之上（因此您几乎可以将其放入您的项目中并它会起作用），并且它支持您可以在 web.config（或 app.config）中配置的消息格式化程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-08-26T23:20:41.073

这已经很晚了，但是对于任何可能正在寻找支持类似于 log4net、NLog 和 LAB 中可用格式的 TraceSource/TraceListener 解决方案的后来者，您可以尝试[Ukadc.Diagnostics](http://ukadcdiagnostics.codeplex.com/)。您可以使用格式化字符串配置 Ukadc 提供的 TraceListeners，它将在将跟踪写入侦听器时应用。您还可以编写自己的标记并将它们添加到格式化语句中。例如，我为了好玩而写了一个，它只是在每次检索到它的值时递增一个计数器。结果是在日志文件中，每一行都会收到一个顺序增加的数字。我写了另一个允许将来自 Trace.CorrelationManager.LogicalOperationStack 的信息添加到输出中。

我现在无法轻松访问具有该功能的计算机，否则我会发布这些示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-30T11:51:38.477

您可以使用直接`Write()`或`WriteLine()`方法`Trace`将直接文本放入 TraceListener。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-10T03:52:41.513

对于最终来到这里并仍在寻找 TraceListeners 的自定义格式的任何人，还有 Essential.Diagnostics [https://essentialdiagnostics.codeplex.com/](https://essentialdiagnostics.codeplex.com/)（披露：我参与了该项目）。

要回答最初的问题，TraceListener 可以接受配置中的自定义属性，因此可以编写一个 TraceListener 来处理基于配置的多种格式，这可能比编写多个更灵活。

这就是 Essential.Diagnostics 所拥有的，它同时具有支持自定义格式字符串的 ColoredConsoleTraceListener 和 RollingFileTraceListener，许多格式值已经可用。

# jsp - 从 jsp 输出中去除空格

> ID：208736
> 
> 赞同：117
> 
> 时间：2008-10-16T14:13:32.360
> 
> 标签：jsp, tomcat, whitespace

如何从 jsp 页面的输出中去除多余的空格？有没有可以在我的 web.xml 上翻转的开关？是否有特定于 Tomcat 的设置？

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2008-10-16T14:18:06.500

有一个 trimWhiteSpaces 指令可以完成这个，

在您的 JSP 中：

```
<%@ page trimDirectiveWhitespaces="true" %> 
```

或者在 jsp-config 部分中您的 web.xml （请注意，这从 servlet 规范 2.5 开始。）：

```
<jsp-config>
  <jsp-property-group>
    <url-pattern>*.jsp</url-pattern>
    <trim-directive-whitespaces>true</trim-directive-whitespaces>
  </jsp-property-group>
</jsp-config> 
```

不幸的是，如果您有所需的空间，它可能还需要剥离它，因此您可能在某些位置需要一个不间断的空间。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2010-04-10T20:16:13.563

如果您的 servletcontainer 不支持 JSP 2.1`trimDirectiveWhitespaces`属性，那么您需要查阅其`JspServlet`文档以了解任何初始化参数。例如在[Tomcat](http://tomcat.apache.org/tomcat-6.0-doc/jasper-howto.html)中，您也可以通过在 Tomcat中将`trimSpaces`init-param 设置为`true`in for来配置它：`JspServlet``/conf/web.xml`

```
<init-param>
    <param-name>trimSpaces</param-name>
    <param-value>true</param-value>
</init-param> 
```

一个完全不同的选择是[JTidyFilter](http://jtidy.sourceforge.net/multiproject/jtidyservlet/filter.html)。它不仅修剪空白，而且还以正确的缩进*格式化*HTML。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2010-04-10T10:22:38.003

trimDirectiveWhitespaces 仅由支持 JSP 2.1 及更高版本的 servlet 容器支持，或者在 Tomcat、Tomcat 6 的情况下（以及某些版本，例如 Tomcat 6.0.10 没有正确实现它 - 不知道其他版本）。这里有关于 trimDirectiveWhitespaces 的更多信息：

[http://www.oracle.com/technetwork/articles/javaee/jsp-21-136414.html](http://www.oracle.com/technetwork/articles/javaee/jsp-21-136414.html)

和这里

[http://raibledesigns.com/rd/entry/trim_spaces_in_your_jsp1](http://raibledesigns.com/rd/entry/trim_spaces_in_your_jsp1)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2011-10-01T22:52:40.850

不是您直接要求的，而是帮助我以巧妙的方式在我的 jsp 标记周围放置 HTML 注释标记，并将空格放在 servlet 标记 (<% %>) 中：

```
${"<!--"}
<c:if test="${first}">
    <c:set var="extraClass" value="${extraClass} firstRadio"/>
</c:if>
<c:set var="first" value="${false}"/>
${"-->"}<%

%><input type="radio" id="input1" name="dayChooser" value="Tuesday"/><%
%><label for="input1" class="${extraClass}">Tuesday</label> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-02-22T15:21:50.717

如果您使用标签，您也可以在那里应用：

```
<%@ tag description="My Tag" trimDirectiveWhitespaces="true" %> 
```

在你的jsp上：

```
<%@ page trimDirectiveWhitespaces="true" %> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-04T12:19:56.960

您可以更进一步，还可以在构建时删除 html 标记之间的换行符（回车）。

例如改变：

```
<p>Hello</p>
<p>How are you?</p> 
```

进入：

```
<p>Hello</p><p>How are you?</p> 
```

这样做，使用`maven-replacer-plugin`并设置它`pom.xml`：

```
<plugin>
    <groupId>com.google.code.maven-replacer-plugin</groupId>
    <artifactId>replacer</artifactId>
    <version>1.5.3</version>
    <executions>
        <execution>
            <id>stripNewlines</id>
            <phase>prepare-package</phase>
            <goals>
                <goal>replace</goal>
            </goals>
            <configuration>
                <basedir>${project.build.directory}</basedir>
                <filesToInclude>projectname/WEB-INF/jsp/**/*.jsp</filesToInclude>
                <token>&gt;\s*&lt;</token>
                <value>&gt;&lt;</value>
                <regexFlags>
                    <regexFlag>MULTILINE</regexFlag>
                </regexFlags>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

这只会修改 build-directory 中的 JSP，而不会触及源代码中的 JSP。

您可能需要调整`<filesToInclude>`JSP 所在的路径 ( )。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-06-29T02:43:53.987

请使用修剪功能，例如

```
fn:trim(string1) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-28T19:15:55.383

添加/编辑您的tomcat`catalina.properties`文件

```
org.apache.jasper.compiler.Parser.STRICT_QUOTE_ESCAPING=false 
```

另见：[https ://confluence.sakaiproject.org/display/BOOT/Install+Tomcat+7](https://confluence.sakaiproject.org/display/BOOT/Install+Tomcat+7)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-05T15:15:35.650

离实际问题有点远，如果你想摆脱你在输出之前所做的任何事情导致的空行，你可以使用

```
out.clearBuffer(); 
```

# css - 在 Visual Studio 中是否有按字母顺序排列 CSS 定义的工具？

> ID：208739
> 
> 赞同：14
> 
> 时间：2008-10-16T14:14:05.497
> 
> 标签：css, visual-studio

Eric Meyer 建议在 CSS 样式定义中保持单个规则按字母顺序排列是有道理的 - 没有“自然”的方式来排序规则，这使得在复杂的定义中很容易确保您不会重复定义相同的事物。

```
div.Foo
{
    background:Green;
    border:1px solid Khaki;
    display:none;
    left:225px;
    max-height:300px;
    overflow-x:hidden;
    overflow-y:auto;
    position:absolute;
    top:0;
    width:230px;
    z-index:99;
} 
```

所以我的问题是：是否有插件或其他简单的方法可以在 Visual Studio 中选择规则列表并按字母顺序排列它们？（更好的是，一举将其应用到整个样式表中。）

### 更新

@Geoff 建议使用 CleanCSS，它非常酷，除了许多其他不错的清理（例如，将定义与相同的选择器合并）之外，它还会一次完成上述要求的字母排序。不幸的是，它将定义中的多个选择器折叠成一行。例如

```
div.Foo,
div.Foo p,
div.Foo li
{
   color:Green;
} 
```

变成

```
div.Foo,div.Foo p,div.Foo li
{
   color:Green;
} 
```

这更难阅读，而且有点破坏交易。这是最低压缩设置，我看不到覆盖它的方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2019-11-22T21:29:25.673

Ben 的回答是正确的，但很容易出错，但会引导我使用这个插件： [https](https://github.com/mrmlnc/vscode-postcss-sorting) ://github.com/mrmlnc/vscode-postcss-sorting 安装后 只需将其添加到您的插件中`settings.json`，

```
"postcssSorting.config": {
  "properties-order": "alphabetical"
} 
```

然后在vscode命令面板（cmd+shift+p）选择`PostCSS Sorting: Run`

还有很多其他很棒的配置选项，包括如何处理评论。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-10-16T14:19:48.853

我对视觉工作室一无所知，但是有在线工具可以清理和格式化 css。我已经成功使用了[CleanCSS](http://www.cleancss.com/)

**更新：**

试试这个[Format CSS Online](http://www.lonniebest.com/FormatCSS/)。似乎输出的行更像你想要的

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-08-16T09:24:15.217

实际上它要简单得多，您不必安装任何插件。

只需转到文件 > 首选项 > 键盘快捷键

然后键入升序排序行，然后映射一个键绑定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-14T19:47:12.047

使用 CodeMaid。无论类型如何，Ctrl+M+F9 都会对您选择的任何文本进行排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-19T07:39:22.750

2021 年，我发现这个扩展可以完美地完成工作；它还可以对其他语言的任何块代码进行排序：[https ://marketplace.visualstudio.com/items?itemName=1nVitr0.blocksort](https://marketplace.visualstudio.com/items?itemName=1nVitr0.blocksort)

**重要提示**：您必须首先将选择器组合在一行中，否则插件将无法理解它们是放在一起的。例如：

```
// Don't do this
.rule1,
.rule2 {
    color: red;
}

// Do that
.rule1, .rule2 {
    color: red;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-23T09:51:26.727

在 VS 代码中。只需将键绑定附加到“按字母顺序排序”命令。

文件 > 首选项 > 键盘快捷键 在搜索框中键入“排序行”，然后将键绑定添加到按字母顺序排序行。例如 Ctrl+Cmd+O。

但是，您需要小心格式化，因为此功能不够智能，无法将包装到多行的 css 属性移动。

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2008-10-16T19:09:59.033

它不是插件，也不了解 CSS，但它通常很有帮助：电子表格，如 Excel 或[Google 电子表格](http://docs.google.com)。

我经常剪切代码，将其粘贴到 Excel 中，稍微修改一下，然后将其粘贴回我的编辑器中。我发现这种技术对于快速字母排序特别有用。

# vb.net - 使用 Selection.ListObject.QueryTable 完整地将 Excel VBA 转换为 VB.Net

> ID：208755
> 
> 赞同：0
> 
> 时间：2008-10-16T14:21:06.137
> 
> 标签：vb.net, vba, excel

我需要访问该`Selection.ListObject.QueryTable`对象以保留列宽。

代码如下：

```
Range("B9").Select()
With Selection.ListObject.QueryTable
    .RowNumbers = False
    .FillAdjacentFormulas = False
    .PreserveFormatting = True
    .RefreshOnFileOpen = False
    .BackgroundQuery = True
    .RefreshStyle = xlInsertDeleteCells
    .SavePassword = False
    .SaveData = True
    .AdjustColumnWidth = False
    .RefreshPeriod = 0
    .PreserveColumnInfo = True
End With 
```

这个 Excel 生成的 VBA 代码的 VB.Net 版本是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-16T17:44:38.707

这样的事情呢？

```
Dim excelApp AS Object = CreateObject("Excel.Application")
excelApp.Workbooks.Open(Filename:=_file)

With excelApp.ActiveWorkbook.Worksheets(0).Cells(9, 2).QueryTable
    .RowNumbers = False
    .FillAdjacentFormulas = False
    .PreserveFormatting = True
    .RefreshOnFileOpen = False
    .BackgroundQuery = True
    .RefreshStyle = 1
    .SavePassword = False
    .SaveData = True
    .AdjustColumnWidth = False
    .RefreshPeriod = 0
    .PreserveColumnInfo = True
End With 
```

`_file`Excel 文件的名称在哪里。

# multithreading - 等待对象

> ID：208767
> 
> 赞同：0
> 
> 时间：2008-10-16T14:23:53.917
> 
> 标签：multithreading, winapi, synchronization

谁能告诉我 WaitForObject() 函数的返回值是多少。
我不是指返回值 (int) 的类型。如果事件有信号，它会返回什么，如果事件没有信号，它会返回什么。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-16T14:26:30.977

没有 WaitForObject 函数。我假设您的意思是 WaitForSingleObject 或 WaitForMultipleObjects。

WaitForSingleObject 将返回 WAIT_TIMEOUT、WAIT_OBJECT_0 或 WAIT_ERROR。WaitForMultipleObjects 将返回 WAIT_TIMEOUT、WAIT_OBJECT_0 + n（其中 n 是数组中对象的索引）或 WAIT_ERROR。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-16T14:36:18.273

这个问题不是c++。c++ 没有称为 WaitForObject() 的 API。Windows API 有一个名为 WaitForSingleObject 的函数和另一个名为 WaitForMultipleObjects 的函数。这些函数在失败时返回 -1，如果数组中的第一个对象发出信号，则返回 0，如果等待超时或被放弃，则返回一个数字 >= 0x80。（如果放弃，则为 0x80，如果超时，则为 0x102）。

# linux - 处理 ftp' ed 到托管服务器中的一组目录中的文本文件

> ID：208772
> 
> 赞同：0
> 
> 时间：2008-10-16T14:25:19.827
> 
> 标签：linux, ftp, shared-hosting, cron

情况如下：

一系列远程工作站收集现场数据，并通过 ftp 将收集到的现场数据 ftp 到服务器。数据以 CSV 文件的形式发送，该文件存储在 FTP 服务器中每个工作站的唯一目录中。

每个工作站每 10 分钟发送一次新的更新，导致以前的数据被覆盖。我们想以某种方式自动连接或存储这些数据。工作站的处理能力有限，不能扩展，因为它是一个嵌入式系统。

提供的一个建议是在 FTP 服务器中运行 cronjob，但是有一个服务条款限制，因为它是共享主机，所以只允许 cronjobs 间隔 30 分钟。考虑到工作站上传的数量和上传之间的 10 分钟间隔，看起来 cronjob 调用之间的 30 分钟限制可能是个问题。

有没有其他方法可以建议？可用的服务器端脚本语言是 perl、php 和 python。

升级到专用服务器可能是必要的，但我仍然希望获得有关如何以最优雅的方式解决此问题的意见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-16T14:31:05.867

您可能会考虑一个持续轮询目标目录的持久守护进程：

```
grab_lockfile() or exit();
while (1) {
    if (new_files()) {
        process_new_files();
    }
    sleep(60);
} 
```

然后你的 cron 作业可以尝试每 30 分钟启动一次守护进程。如果守护进程无法获取锁定文件，它就会死掉，因此无需担心多个守护进程运行。

要考虑的另一种方法是通过 HTTP POST 提交文件，然后通过 CGI 处理它们。这样，您就可以保证在提交时已对它们进行了适当的处理。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-16T15:17:33.497

大多数现代 Linux 将支持 inotify 让您的进程知道目录的内容何时更改，因此您甚至不需要轮询。

编辑：关于马克贝克的以下评论：

“不过要小心，因为您会在文件创建后立即收到通知，而不是在文件关闭时通知您。所以您需要一些方法来确保您不会拾取部分文件。”

您在目录级别设置的 inotify 监视会发生这种情况 - 确保您随后不拾取部分文件的方法是在新文件上设置进一步的 inotify 监视并查找 IN_CLOSE 事件以便您知道该文件已被完全写入。

一旦您的进程看到了这一点，您就可以删除这个新文件上的 inotify 监视，并在闲暇时处理它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-16T16:56:45.167

30分钟的限制真的很傻。在 linux 中启动进程并不是一项昂贵的操作，因此如果您所做的只是检查新文件，那么没有充分的理由不经常这样做。我们有每分钟运行的 cron 作业，它们对性能没有任何明显的影响。但是，我意识到这不是您的规则，如果您要坚持使用该托管服务提供商，您将别无选择。

您将需要某种长时间运行的守护程序。最简单的方法就是定期进行投票，这可能就是我要做的。Inotify 是一个更好的选择，因此您可以在创建文件后立即收到通知。

您可以将 perl 中的 inotify 与 Linux::Inotify 一起使用，或者将 python 中的 inotify 与 pinotify 一起使用。

不过要小心，因为您会在文件创建后立即收到通知，而不是在文件关闭时通知您。所以你需要一些方法来确保你不会拾取部分文件。

通过轮询，您不太可能看到部分文件，但它最终会发生，并且当它发生时将是一个令人讨厌的难以重现的错误，所以现在最好处理这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-03T01:01:51.113

如果您希望保留现有的 FTP 服务器设置，那么我建议您使用诸如 inotify 或守护进程之类的东西来观看上传目录。如果您可以迁移到不同的 FTP 服务器，您可以查看[**pyftpdlib**](http://code.google.com/p/pyftpdlib/)，它是一个 Python FTP 服务器库。

我一直是 pyftpdlib 开发团队的一员，其中一个更常见的请求是在文件完成上传后“处理”文件。因此，我们创建了一个`on_file_received()`在上传完成时触发的回调方法（有关详细信息，请参阅我们的问题跟踪器上的[问题 #79 ）。](http://code.google.com/p/pyftpdlib/issues/detail?id=79)

如果您熟悉 Python，那么将 pyftpdlib 作为您的 FTP 服务器并从回调方法运行您的处理代码可能会很好。注意 pyftpdlib 是异步的，不是多线程的，所以你的回调方法不能阻塞。如果您需要运行长时间运行的任务，我建议使用单独的 Python 进程或线程来进行实际处理工作。

# c# - Activator.CreateInstance 找不到构造函数（MissingMethodException）

> ID：208777
> 
> 赞同：23
> 
> 时间：2008-10-16T14:26:31.757
> 
> 标签：c#, .net, activator, missingmethodexception

我有一个具有以下构造函数的类

```
public DelayCompositeDesigner(DelayComposite CompositeObject)
{
    InitializeComponent();

    compositeObject = CompositeObject;  
} 
```

以及一个没有参数的默认构造函数。

接下来我正在尝试创建一个实例，但它只能在没有参数的情况下工作：

```
var designer = Activator.CreateInstance(designerAttribute.Designer); 
```

这工作得很好，但如果我想传递参数，它不会：

```
var designer = Activator.CreateInstance(designerAttribute.Designer, new DelayComposite(4)); 
```

这导致`MissingMethodException`：

> 未找到构造函数类型 Vialis.LightLink.Controller.Scenarios.Composites.DelayCompositeDesigner

这里有什么想法吗？

* * *

问题是我真的需要在构造过程中传递一个对象。

你看我有一个设计器，它加载所有从`CompositeBase`. 然后将它们添加到列表中，用户可以从中将它们拖到设计器中。这样做后，将拖动的实例添加到设计器中。这些类中的每一个都定义了自定义属性：

```
[CompositeMetaData("Delay","Sets the delay between commands",1)]
[CompositeDesigner(typeof(DelayCompositeDesigner))]
public class DelayComposite : CompositeBase
{
} 
```

当用户在设计器中选择一个项目时，它会查看这些属性以加载该类型的设计器。例如，在这种情况下，`DelayComposite`它会加载一个用户控件，该控件具有一个标签和一个滑块，允许用户设置`DelayComposite`实例的“延迟”属性。

到目前为止，如果我不将任何参数传递给构造函数，这可以正常工作。设计器创建 的实例`DelayCompositeDesigner`并将其分配给 WPF 的 content 属性`ContentPresenter`。

但是由于那个设计器需要修改设计器中选择的属性，所以`DelayComposite` 我必须将这个实例传递给它。这就是为什么构造函数看起来是这样的：

```
public DelayCompositeDesigner(DelayComposite CompositeObject)
{
    InitializeComponent();

    compositeObject = CompositeObject;
} 
```

欢迎提出建议

* * *

@VolkerK

您的代码的结果是这样的：

> <---- foo Vialis.LightLink.Controller.Scenarios.Composites.DelayCompositeDesignerVoid .ctor() Vialis.LightLink.Controller.Scenarios.Composites.DelayCompositeDesignerVoid .ctor(Vialis.LightLink.Controller.Scenarios.Composites.DelayComposite) 参数：Vialis .LightLink.Controller.Scenarios.Composites.DelayComposite foo ---->

* * *

Leppie，你是对的，我出于某种原因在我的 UI 应用程序中引用了 Composites 程序集……这不是我应该做的，因为我在运行时加载它。以下代码有效：

```
object composite = Activator.CreateInstance(item.CompositType,(byte)205);
                    var designer = Activator.CreateInstance(designerAttribute.Designer, composite); 
```

如您所见，代码不了解`DelayComposite`类型。

这解决了当前的问题，但是为我想要实现的目标引入了许多新的问题，无论哪种方式都谢谢你，也感谢所有在这里回答的人。

* * *

至于以下代码，多人建议：

```
var designer = Activator.CreateInstance(
    designerAttribute.Designer, 
    new object[] { new DelayComposite(4) } 
); 
```

的`Activator.CreateInstance`签名如下所示：

```
Activator.CreateInstance(Type type, params object[] obj) 
```

所以它应该接受我的代码，但我会尝试建议的代码

**更新：**

我已经按照建议尝试了这个：

```
var designer = Activator.CreateInstance(designerAttribute.Designer, new object[] { new DelayComposite(4)}); 
```

结果是一样的。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-10-16T14:36:37.743

我认为您的电话需要是：

```
var designer = Activator.CreateInstance(designerAttribute.Designer, new object[] { new DelayComposite(4) }); 
```

当然，除非*是*这样，在这种情况下，答案不会立即显而易见。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-10-16T15:56:53.820

我认为您正在处理类型不匹配。

程序集可能在不同的地方被引用，或者它们是针对不同的版本编译的。

我建议您遍历 ConstructorInfo 并`paramtype == typeof(DelayComposite)`在适当的参数上执行。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-10-16T15:17:16.553

虽然我讨厌类似 printf 的调试...

```
public static void foo(Type t, params object[] p)
{
    System.Diagnostics.Debug.WriteLine("<---- foo");
    foreach(System.Reflection.ConstructorInfo ci in t.GetConstructors())
    {
        System.Diagnostics.Debug.WriteLine(t.FullName + ci.ToString());
    }
    foreach (object o in p)
    {
        System.Diagnostics.Debug.WriteLine("param:" + o.GetType().FullName);
    }
    System.Diagnostics.Debug.WriteLine("foo ---->");
}
// ...
foo(designerAttribute.Designer, new DelayComposite(4));
var designer = Activator.CreateInstance(designerAttribute.Designer, new DelayComposite(4)); 
```

在 Visual Studio 的输出窗口中打印什么？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-16T15:06:38.540

如果你想调用这个构造函数...

```
public DelayCompositeDesigner(DelayComposite CompositeObject) 
```

...只需使用这个：

```
var designer = Activator.CreateInstance(typeof(DelayCompositeDesigner), new DelayComposite(4)); 
```

或者

```
var designer = Activator.CreateInstance<DelayCompositeDesigner>(new DelayComposite(4)); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-02-04T22:25:11.980

我有一个类似的问题，但是我的问题是由于构造函数的可见性。这个堆栈溢出帮助了我：

[使用反射在内部类中实例化带有参数的构造函数](https://stackoverflow.com/questions/4077253/instantiating-a-constructor-with-parameters-in-an-internal-class-with-reflection)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-16T14:37:34.823

[在回答](https://stackoverflow.com/questions/178645/how-does-wcf-deserialization-instantiate-objects-without-calling-a-constructor#179486)关于 SF 的另一个问题时， 我发现了另一种创建对象实例而不调用构造函数的方法。

在*System.Runtime.Serialization*命名空间中有一个函数*FormatterServices.GetUninitializedObject(type)*将创建一个对象而不调用构造函数。

如果您在 Reflector 中查看该函数，您会看到它正在进行外部调用。我不知道黑魔法实际上是如何在幕后发生的。但我确实向自己证明了构造函数从未被调用，但对象被实例化了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-08-14T18:33:20.663

当我遇到这个问题时，我使用了一个返回参数列表的方法来插入到 Activator.CreateInstance 中，它的参数数量与我试图创建的对象的构造函数不同。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-07-22T09:15:11.857

就我而言，此代码适用于 .NET Framework，但不适用于 .NET Core 3.1。它抛出`ExecutionEngineException`这是无法捕捉的。但是当我将目标更改为 .NET 5 时，它可以完美运行。希望这对某人有所帮助。

```
Type type = assembly.GetType(dllName + ".dll");
Activator.CreateInstance(type ), new Stream[] { stream }; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-16T14:39:20.670

您可以在 CreateInstance 上使用以下重载：

```
public static Object CreateInstance(
    Type type,
    Object[] args
) 
```

在你的情况下，它会是（我认为）：

```
var designer = Activator.CreateInstance(
    typeof(DelayCompositeDesigner), 
    new object[] { new DelayComposite(4) } 
); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-12-14T07:34:57.047

我找到了解决问题的方法，我正在努力解决同样的问题。

这是我的激活器：

```
private void LoadTask(FileInfo dll)
    {
        Assembly assembly = Assembly.LoadFrom(dll.FullName);

        foreach (Type type in assembly.GetTypes())
        {
            var hasInterface = type.GetInterface("ITask") != null;

            if (type.IsClass && hasInterface)
            {
                var instance = Activator.CreateInstance(type, _proxy, _context);
                _tasks.Add(type.Name, (ITask)instance);
            }
        }
    } 
```

这是我要激活的类，请注意我必须将构造函数参数更改为对象，这是我让它工作的唯一方法。

```
public class CalculateDowntimeTask : Task<CalculateDowntimeTask>
{
    public CalculateDowntimeTask(object proxy, object context) : 
        base((TaskServiceClient)proxy, (TaskDataDataContext)context) { }

    public override void Execute()
    {
        LogMessage(new TaskMessage() { Message = "Testing" });
        BroadcastMessage(new TaskMessage() { Message = "Testing" });
    }
} 
```

# html - 最小化给定 HTML 常量的 CSS 长度保持样式

> ID：208784
> 
> 赞同：1
> 
> 时间：2008-10-16T14:29:34.717
> 
> 标签：html, css, optimization

假设 A.css 样式 B.html。有哪些工具/技术可以以编程方式减小 A.css 的大小，同时保持其对 B.html 的样式效果不变？以下是一些我想像这样的工具使用的技术：

1.  **删除 A.css 中的冗余。**例如，如果同一个类被定义了两次，您可以删除第二个定义而不影响语义。这似乎很容易。

2.  **删除不使用的样式定义**。A.css 是否为 B.html 中未出现的任何元素设置样式？如果是这样，请删除它们。

3.  **在适当的地方组合样式**。如果 A.css 定义了 div.x 和 div.y 的样式，并且每个恰好有类 x 的 div 也有类 y，那么可以结合 A.css 中的类定义。

一种不同的策略是使用一个工具来检查一段样式化 HTML 中每个元素的计算样式，并输出保留计算样式的最小样式表。*这样*的事情存在吗？

## 更新

让我解释一下我是如何陷入这种境地的。有问题的 CSS 文件用于**电子邮件**，它是通过复制我们在相关网页中使用的类似 CSS 文件创建的。因为电子邮件中的 HTML 是 CSS 来自的网页中 HTML 的适当子集，所以电子邮件中的某些 CSS 是多余的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-16T14:45:52.123

“有这样的东西吗？”

当然。请参阅[CSS Tidy](http://csstidy.sourceforge.net/)工具。

不过，我不相信它会删除未使用的 CSS。请参阅 Sitepoint 的 [Dust Me 选择器](http://www.sitepoint.com/dustmeselectors/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-16T14:32:00.513

通常，您只需删除所有不必要的空格。记住也要保留原件，这样以后编辑网站时就不会失去可读性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-16T14:35:02.270

我认为确保 web 服务器对 css 文件进行 gzip 压缩是您最大的带宽节省。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-16T16:05:28.843

好的，您不想要 KB 的小文件（使用 gzip 压缩更有效！）但要修剪过时的样式，这确实会改善维护。

我不知道您想要的理想工具是否存在，但 Firebug（Firefox 的扩展）可以告诉您想要的是给定 HTML 元素使用的 CSS 元素。不是自动化的，但仍然是一种宝贵的工具。
您还可以编辑实时 CSS，以查看删除样式元素是否会更改 HTML 页面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-16T14:43:44.280

一个好主意是[压缩你的 css](https://stackoverflow.com/questions/183434/what-is-a-good-cross-platform-css-compressor)。

这不是 zip 风格的压缩，它实际上是在重写 CSS（又名缩小）。当然，你也可以使用`mod_gzip`or `mod_deflate`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-16T14:33:24.550

除非您的 CSS 文件通常很大，否则我会选择 CSS 文件的可读性和可修改性，而不是较小的 CSS 文件。由于 CSS 文件是静态的（大部分情况下），大多数浏览器都会很好地缓存它们。虽然您的所有建议都是好的建议，但是当您只想更改其中一项时，将现在针对不同文档元素的相同内容组合起来可能会在未来造成严重破坏。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-16T14:35:10.787

我不知道删除冗余样式的工具，但是如果您出于性能原因想减小文件大小，则有几种缩小工具：

看：

*   [缩放的艺术](http://www.artofscaling.com/css-minifier/)
*   [更好的 CSS 缩小器](http://www.dimebrain.com/2008/03/a-better-css-mi.html)

# oracle - ODBC x64 oracle 问题

> ID：208811
> 
> 赞同：0
> 
> 时间：2008-10-16T14:36:19.193
> 
> 标签：oracle, ms-access, odbc, 64-bit, ms-access-2007

我有一个装有 Windows 2008 x64、MS Access 2007 和 Oracle 11g x64 的工作站，我使用 Access 通过 ODBC 连接到 Oracle。我是工作站的管理员（在管理员组中）。我以管理员身份运行 Access，但是当我想对 Oracle 进行 ODBC 调用时，它不起作用。

我该怎么做：我启动 MS Access 并创建一个直接查询。在属性对话框中，我去添加新的并出现选择数据源对话框。然后我使用机器数据源并单击新建，系统数据源 - 但 Oracle 的驱动程序不存在。

问候罗伯特:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-20T12:06:19.213

解决了！创建一个 Virtual PC (Hyper-V) 并安装 32 位版本的操作系统和客户端 - 它可以工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-16T15:34:04.570

如果要使用 Oracle 提供的 ODBC 驱动程序，则需要安装 oracle 客户端。默认客户端安装不包括驱动程序，因此您需要在安装时添加它或重新运行通用安装程序以稍后添加它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-17T11:44:02.037

我可以在标准 ODBC 管理中设置 Oracle 驱动程序，但是当我从 MSAccess 中启动它时，驱动程序不会出现。这意味着 x64 驱动程序不存在。如果我查看注册表，则 Oracle 驱动程序在 HKLM\Software\Wow6432Node\ODBC\ODBCINST.INI 键下不存在，就像 SQLServer 的一样

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-16T17:42:18.010

获取10g的Oracle ODBC驱动（不知道11）：

*   运行客户端安装。您将获得 4 个安装类型选项：InstantClient、Administrator、Runtime 和 Custom。
*   选择“InstantClient”（它不在运行时安装中）
*   您必须将它安装在新的 oracle home 中。

安装完成后，您应该会在 ODBC 控件中看到 Oracle 驱动程序。

# django - Django @ Google App Engine - 站点地图框架

> ID：208824
> 
> 赞同：0
> 
> 时间：2008-10-16T14:39:17.597
> 
> 标签：django, google-app-engine

有人设法让 Django[站点地图框架](http://docs.djangoproject.com/en/dev/ref/contrib/sitemaps/)在 Google App Engine 上运行吗？

我收到以下异常：

/sitemap.xml 配置不当

您尚未设置 DATABASE_ENGINE 设置。

请求方法：GET 请求 URL： http: [//127.0.0.1](http://127.0.0.1:8080/sitemap.xml) :8080/sitemap.xml 异常类型：ImproperlyConfigured 异常值：您尚未设置 DATABASE_ENGINE 设置。异常位置：D:\Program Files\Google\google_appengine\lib\django\django\db\backends\dummy\base.py 在抱怨中，第 13 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-16T18:15:02.857

我对 GAE 不熟悉，但我可能对您的问题有解决方案。查看站点地图框架文档@ [http://docs.djangoproject.com/en/dev/ref/contrib/sitemaps/](http://docs.djangoproject.com/en/dev/ref/contrib/sitemaps/)

查看*Simple Example*和*Example*。站点地图代码采用名称的字典：站点地图。任何有效的站点地图对象都可以使用。Sitemap 类的最低要求是定义 items()，它返回来自*某处*的对象列表。

我们有一个 StaticSitemap 类，它只从文件中读取 URL 列表并返回它，此外它还有一个 location(item) 方法，它只返回项目（因为它是一个简单的路径）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-05-28T02:51:44.817

这个助手的分支具有与 GAE 和 django 助手一起使用的站点地图。

[http://code.google.com/p/dhrbst-app-engine-django/wiki/Sitemaps](http://code.google.com/p/dherbst-app-engine-django/wiki/Sitemaps)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-28T11:38:43.603

不适用于 GAE。在此处为问题加注星标。

[http://code.google.com/p/google-app-engine-django/issues/detail?id=102&q=sitemaps](http://code.google.com/p/google-app-engine-django/issues/detail?id=102&q=sitemaps)

# oop - 在方法中对参数进行排序有哪些约定？

> ID：208828
> 
> 赞同：6
> 
> 时间：2008-10-16T14:40:15.427
> 
> 标签：oop, coding-style

我和一位同事正在讨论有关订购方法参数的最佳实践。目标是在我们的组织中建立一个标准，通过为我们的方法提供通用签名来提高可读性和生产力。我们只是为我们正在招聘的应届毕业生制定指导方针。

**示例（始终传入 userId 以审核调用）：**

GetOrders(string userId, int customerId); GetOrders(string userId, int[] orderIds); GetCustomer(string userId, int customerId);

我的论点如下：

1.  最常见的论点。
2.  其余的论点基于重要性
3.  可选（可为空）参数最后。

他的论点基本上是相反的。

我在这里不是要求正确或错误的答案，也不是讨论。我只是想看看已经存在哪些标准。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-16T14:44:05.870

我会选择输入、输出、可选的顺序。

可选的应该放在最后，因为大多数语言都允许您为可选参数指定默认值以避免必须包含它们。规定是它们必须是最后一个参数，否则你不能放弃它们。

那是假设您不能命名参数。如果你能拥有它们，我总是建议使用它们来清晰和秩序成为一个有争议的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-16T14:50:57.293

我尝试让所有使用相似参数的方法以相同的顺序使用它们。

对于单一方法的选择，我按重要性进行。可选项目最后。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-16T14:49:25.940

我喜欢按名称按字母顺序排列它们。让您更容易找到您要找的人。

我同意具有默认值的可选值似乎属于最后。在某些语言中，这是必需的。

当您重载方法时，我将从最常用的参数开始，并以使此版本的方法独一无二的参数结束。

```
public method foo (string name)
public method foo (string name, string city)
public method foo (string name, string city, string state) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-16T14:53:13.873

C 编程中流行的一个成语是目标在前，所以在 strcpy(A, B); 正在将 B 复制到 A（很像“A=B;”正在将 B 复制到 A）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-16T14:57:26.547

排序的东西也出现在其他上下文中。

在末尾添加参数是最简单的。

# c - 函数指针、闭包和 Lambda

> ID：208835
> 
> 赞同：87
> 
> 时间：2008-10-16T14:41:41.070
> 
> 标签：c, lisp, lambda, computer-science, closures

我刚刚开始学习函数指针，当我阅读有关该主题的 K&R 章节时，我首先想到的是，“嘿，这有点像一个闭包。” 我知道这个假设在某种程度上是根本错误的，在网上搜索后，我并没有发现任何对这种比较的分析。

那么为什么 C 风格的函数指针与闭包或 lambda 完全不同呢？据我所知，这与函数指针仍然指向已定义（命名）函数的事实有关，而不是匿名定义函数的做法。

为什么将函数传递给在第二种情况下被视为更强大的函数，在这种情况下，它没有命名，而不是在第一种情况下，它只是一个普通的，正在传递的日常函数？

请告诉我如何以及为什么将两者如此密切地比较是错误的。

谢谢。

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2008-10-16T15:07:11.707

lambda（或[闭包](http://en.wikipedia.org/wiki/Closure_(computer_science))）封装了函数指针和变量。这就是为什么在 C# 中，您可以执行以下操作：

```
int lessThan = 100;
Func<int, bool> lessThanTest = delegate(int i) {
   return i < lessThan;
}; 
```

我在那里使用了一个匿名委托作为闭包（它的语法比等效的 lambda 更清晰，更接近 C），它将 lessThan （堆栈变量）捕获到闭包中。评估闭包时，将继续引用 lessThan（其堆栈帧可能已被破坏）。如果我改变小于，那么我改变比较：

```
int lessThan = 100;
Func<int, bool> lessThanTest = delegate(int i) {
   return i < lessThan;
};

lessThanTest(99); // returns true
lessThan = 10;
lessThanTest(99); // returns false 
```

在 C 中，这将是非法的：

```
BOOL (*lessThanTest)(int);
int lessThan = 100;

lessThanTest = &LessThan;

BOOL LessThan(int i) {
   return i < lessThan; // compile error - lessThan is not in scope
} 
```

虽然我可以定义一个带有 2 个参数的函数指针：

```
int lessThan = 100;
BOOL (*lessThanTest)(int, int);

lessThanTest = &LessThan;
lessThanTest(99, lessThan); // returns true
lessThan = 10;
lessThanTest(100, lessThan); // returns false

BOOL LessThan(int i, int lessThan) {
   return i < lessThan;
} 
```

但是，现在我在评估它时必须传递 2 个参数。如果我希望将此函数指针传递给 lessThan 不在范围内的另一个函数，我将不得不通过将其传递给链中的每个函数或将其提升为全局函数来手动使其保持活动状态。

尽管大多数支持闭包的主流语言都使用匿名函数，但并没有要求。你可以有没有匿名函数的闭包，也可以有没有闭包的匿名函数。

总结：闭包是函数指针+捕获变量的组合。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2008-12-06T04:04:36.560

作为一个为有和没有“真正”闭包的语言编写编译器的人，我恭敬地不同意上面的一些答案。Lisp、Scheme、ML 或 Haskell 闭包**不会动态创建新函数**。相反，它**重用了现有函数**，但使用了**新的自由变量**。自由变量的集合通常被称为*environment*，至少被编程语言理论家称为。

闭包只是包含函数和环境的聚合。在新泽西编译器的标准 ML 中，我们将一个表示为一条记录；一个字段包含指向代码的指针，其他字段包含自由变量的值。编译器通过分配一个新记录来**动态创建一个新的闭包（不是函数）**，该记录包含指向*相同*代码的指针，但自由变量具有*不同*的值。

您可以在 C 中模拟所有这些，但这很麻烦。两种技术很流行：

1.  传递一个指向函数（代码）的指针和一个指向自由变量的单独指针，以便将闭包拆分为两个 C 变量。

2.  传递一个指向结构的指针，其中结构包含自由变量的值以及指向代码的指针。

当您尝试在 C 中模拟某种*多态性*并且您不想透露环境的类型时，技术＃1 是理想的——您使用 void* 指针来表示环境。例如，查看 Dave Hanson 的[C Interfaces and Implementations](http://www.cs.princeton.edu/software/cii/)。技术 #2 更类似于函数式语言的本机代码编译器中发生的情况，也类似于另一种熟悉的技术……具有虚拟成员函数的 C++ 对象。实现几乎相同。

这一观察引出了亨利贝克的一句俏皮话：

> 多年来，Algol/Fortran 世界的人们抱怨说，他们不明白函数闭包在未来的高效编程中可能有什么用途。然后发生了“面向对象编程”革命，现在每个人都使用函数闭包进行编程，只是他们仍然拒绝这样称呼它们。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-10-16T14:47:09.813

在 C 中，你不能定义内联函数，所以你不能真正创建一个闭包。您所做的只是传递对某些预定义方法的引用。在支持匿名方法/闭包的语言中，方法的定义要灵活得多。

用最简单的术语来说，函数指针没有与之关联的范围（除非您计算全局范围），而闭包包括定义它们的方法的范围。使用 lambdas，您可以编写一个编写方法的方法。闭包允许你将“一些参数绑定到一个函数，从而得到一个低参数的函数”。（取自托马斯的评论）。你不能在 C 中做到这一点。

编辑：添加一个示例（我将使用 Actionscript-ish 语法，因为这就是我现在的想法）：

假设您有一些方法将另一个方法作为其参数，但没有提供在调用该方法时将任何参数传递给该方法的方法？比如说，某些方法在运行您传递的方法之前会导致延迟（愚蠢的例子，但我想保持简单）。

```
function runLater(f:Function):Void {
  sleep(100);
  f();
} 
```

现在假设您希望用户 runLater() 延迟对象的某些处理：

```
function objectProcessor(o:Object):Void {
  /* Do something cool with the object! */
}

function process(o:Object):Void {
  runLater(function() { objectProcessor(o); });
} 
```

您传递给 process() 的函数不再是静态定义的函数。它是动态生成的，并且能够包含对定义方法时范围内的变量的引用。因此，它可以访问“o”和“objectProcessor”，即使它们不在全局范围内。

我希望这是有道理的。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-10-16T14:49:17.110

闭包 = 逻辑 + 环境。

例如，考虑这个 C# 3 方法：

```
public Person FindPerson(IEnumerable<Person> people, string name)
{
    return people.Where(person => person.Name == name);
} 
```

lambda 表达式不仅封装了逻辑（“比较名称”），还封装了环境，包括参数（即局部变量）“名称”。

有关这方面的更多信息，请查看我[关于闭包的文章，](http://csharpindepth.com/Articles/Chapter5/Closures.aspx)该文章将带您了解 C# 1、2 和 3，展示了闭包如何使事情变得更容易。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-10-16T15:41:56.753

在 C 中，函数指针可以作为参数传递给函数，也可以作为函数的值返回，但函数只存在于顶层：不能将函数定义相互嵌套。想想 C 需要什么来支持可以访问外部函数变量的嵌套函数，同时仍然能够在调用堆栈上下发送函数指针。（要遵循这个解释，您应该了解如何在 C 和大多数类似语言中实现函数调用的基础知识：浏览 Wikipedia 上的[调用堆栈](http://en.wikipedia.org/wiki/Call_stack)条目。）

什么样的对象是指向嵌套函数的指针？它不能只是代码的地址，因为如果你调用它，它如何访问外部函数的变量？（请记住，由于递归，一次可能有多个不同的外部函数调用。）这称为[函数参数问题](http://en.wikipedia.org/wiki/Funarg_problem)，有两个子问题：向下函数参数问题和向上函数参数问题。

向下的函数参数问题，即，将函数指针“向下”作为参数发送给您调用的函数，实际上与 C 并不兼容，并且 GCC[支持](http://gcc.gnu.org/onlinedocs/gcc/Nested-Functions.html)将嵌套函数作为向下函数参数。在 GCC 中，当你创建一个指向嵌套函数的指针时，你真的得到了一个指向[*trampoline*](http://en.wikipedia.org/wiki/Trampoline_%28computers%29)的指针，这是一段动态构造的代码，它设置*静态链接指针*，然后调用真正的函数，它使用静态链接指针来访问外部函数的变量。

向上的 funargs 问题更加困难。GCC 不会阻止您在外部函数不再活动后让蹦床指针存在（在调用堆栈上没有记录），然后静态链接指针可能指向垃圾。不能再在堆栈上分配激活记录。通常的解决方案是在堆上分配它们，让代表嵌套函数的函数对象只指向外部函数的激活记录。这样的对象称为[*闭包*](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)。然后，该语言通常必须支持[垃圾回收](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29)，以便一旦没有更多指针指向它们，就可以释放记录。

Lambdas（[匿名函数](http://en.wikipedia.org/wiki/Anonymous_function)）确实是一个单独的问题，但通常一种允许您动态定义匿名函数的语言也允许您将它们作为函数值返回，因此它们最终成为闭包。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-10-16T15:01:37.130

lambda 是一个匿名的、*动态定义*的函数。你不能在 C 中做到这一点......至于闭包（或两者的结合），典型的 lisp 示例看起来类似于：

```
(defun get-counter (n-start +-number)
     "Returns a function that returns a number incremented
      by +-number every time it is called"
    (lambda () (setf n-start (+ +-number n-start)))) 
```

在 C 语言中，您可以说 的词法环境（堆栈）`get-counter`被匿名函数捕获，并在内部进行修改，如下例所示：

```
[1]> (defun get-counter (n-start +-number)
         "Returns a function that returns a number incremented
          by +-number every time it is called"
        (lambda () (setf n-start (+ +-number n-start))))
GET-COUNTER
[2]> (defvar x (get-counter 2 3))
X
[3]> (funcall x)
5
[4]> (funcall x)
8
[5]> (funcall x)
11
[6]> (funcall x)
14
[7]> (funcall x)
17
[8]> (funcall x)
20
[9]> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-01-13T12:40:12.157

闭包意味着从函数定义的角度来看一些变量与函数逻辑绑定在一起，比如能够动态声明一个迷你对象。

C 和闭包的一个重要问题是分配在堆栈上的变量将在离开当前范围时被销毁，无论闭包是否指向它们。这将导致人们在粗心地返回指向局部变量的指针时遇到的那种错误。闭包基本上意味着所有相关变量都是堆上的引用计数或垃圾收集项。

我不习惯将 lambda 等同于闭包，因为我不确定所有语言中的 lambda 都是闭包，有时我认为 lambda 只是本地定义的匿名函数，没有变量绑定（Python pre 2.1？）。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-11-24T06:28:49.973

在 GCC 中，可以使用以下宏来模拟 lambda 函数：

```
#define lambda(l_ret_type, l_arguments, l_body)       \
({                                                    \
    l_ret_type l_anonymous_functions_name l_arguments \
    l_body                                            \
    &l_anonymous_functions_name;                      \
}) 
```

[来源](http://walfield.org/blog/2010/08/25/lambdas-in-c.html)示例：

```
qsort (array, sizeof (array) / sizeof (array[0]), sizeof (array[0]),
     lambda (int, (const void *a, const void *b),
             {
               dump ();
               printf ("Comparison %d: %d and %d\n",
                       ++ comparison, *(const int *) a, *(const int *) b);
               return *(const int *) a - *(const int *) b;
             })); 
```

使用这种技术当然会消除您的应用程序与其他编译器一起工作的可能性，并且显然是“未定义”的行为，所以 YMMV。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-11-26T19:08:03.663

*闭包*捕获*环境*中的*自由变量*。即使周围的代码可能不再处于活动状态，环境仍将存在。

 *Common Lisp 中的一个示例，其中`MAKE-ADDER`返回一个新的闭包。

```
CL-USER 53 > (defun make-adder (start delta) (lambda () (incf start delta)))
MAKE-ADDER

CL-USER 54 > (compile *)
MAKE-ADDER
NIL
NIL 
```

使用上述功能：

```
CL-USER 55 > (let ((adder1 (make-adder 0 10))
                   (adder2 (make-adder 17 20)))
               (print (funcall adder1))
               (print (funcall adder1))
               (print (funcall adder1))
               (print (funcall adder1))
               (print (funcall adder2))
               (print (funcall adder2))
               (print (funcall adder2))
               (print (funcall adder1))
               (print (funcall adder1))
               (describe adder1)
               (describe adder2)
               (values))

10 
20 
30 
40 
37 
57 
77 
50 
60 
#<Closure 1 subfunction of MAKE-ADDER 4060001ED4> is a CLOSURE
Function         #<Function 1 subfunction of MAKE-ADDER 4060001CAC>
Environment      #(60 10)
#<Closure 1 subfunction of MAKE-ADDER 4060001EFC> is a CLOSURE
Function         #<Function 1 subfunction of MAKE-ADDER 4060001CAC>
Environment      #(77 20) 
```

请注意，该`DESCRIBE`函数显示两个*闭包的**函数对象*相同，但*环境*不同。

 **Common Lisp 使闭包和纯函数对象（那些没有环境的对象）都成为*函数*，并且可以以相同的方式调用两者，这里使用`FUNCALL`.

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-10-16T14:54:37.270

主要区别在于 C 中缺少词法作用域。

函数指针就是这样，一个指向代码块的指针。它引用的任何非堆栈变量都是全局的、静态的或类似的。

闭包 OTOH 以“外部变量”或“上值”的形式拥有自己的状态。它们可以是私有的或共享的，使用词法范围。您可以使用相同的函数代码创建许多闭包，但变量实例不同。

一些闭包可以共享一些变量，对象的接口也可以共享（在 OOP 意义上）。要在 C 中实现这一点，您必须将结构与函数指针表相关联（这就是 C++ 所做的，具有类 vtable）。

简而言之，闭包是一个函数指针加上一些状态。这是一个更高级别的构造

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-10-17T14:29:56.697

大多数响应表明闭包需要函数指针，可能指向匿名函数，但正如[Mark 所写](https://stackoverflow.com/questions/208835/function-pointers-closures-and-lamda#208940)，闭包可以与命名函数一起存在。这是 Perl 中的一个示例：

```
{
    my $count;
    sub increment { return $count++ }
} 
```

闭包是定义`$count`变量的环境。它仅可用于`increment`子例程并在调用之间持续存在。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-10-16T15:07:26.247

在 C 中，函数指针是在取消引用函数时将调用函数的指针，闭包是包含函数逻辑和环境（变量及其绑定到的值）的值，而 lambda 通常指的是一个值实际上是一个未命名的函数。在 C 中，函数不是第一类值，所以它不能被传递，所以你必须传递一个指向它的指针，但是在函数式语言（如 Scheme）中，你可以像传递任何其他值一样传递函数

# java - 如何在 Java 中挂载 Windows 驱动器？

> ID：208839
> 
> 赞同：14
> 
> 时间：2008-10-16T14:43:07.370
> 
> 标签：java, windows-services, unc

我们正在使用一些通过字母（例如 f:\）访问共享驱动器的旧代码。使用 UNC 表示法不是一种选择。我们的 Java 包装应用程序将作为服务运行，作为第一步，我想在代码中显式映射驱动器。有人做过吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-10-16T14:51:30.897

考虑执行映射网络驱动器的 DOS 命令，如下面的代码所示：

```
String command = "c:\\windows\\system32\\net.exe use f: \\\\machine\\share /user:user password";
Process p = Runtime.getRuntime().exec(command);
... 
```

查看 net use 命令的详细信息：

```
该命令的语法是：

网络使用
[设备名称 | *] [\\计算机名\共享名[\volume] [密码| *]]
        [/USER:[域名\]用户名]
        [/USER:[虚线域名\]用户名]
        [/USER:[用户名@dotted域名]
        [/智能卡]
        [/已保存]
        [[/删除] | [/坚持：{是| 不}]]

网络使用 {设备名称 | *} [密码 | *] /家

网络使用 [/持久性：{是 | 不}]

```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-10-16T14:55:27.050

您可以使用 JCIFS

[http://jcifs.samba.org/src/docs/api/jcifs/smb/SmbFile.html](http://jcifs.samba.org/src/docs/api/jcifs/smb/SmbFile.html)

或者，如果您想要更高级别的 API 并支持其他协议，如 FTP、Zip 等：

[http://commons.apache.org/vfs/filesystems.html](http://commons.apache.org/vfs/filesystems.html)

这两个选项都是纯 Java 和跨平台的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-10-16T14:48:11.060

我认为最简单的方法是使用 Runtime.getRuntime().exec() 方法并调用“net use”命令。

例如：

```
 try {
        // Execute a command without arguments
        String command = "C:\\Windows\\system32\\net.exe use F: \\\\server\\share /user:user password";
        Process child = Runtime.getRuntime().exec(command);
    } catch (IOException e) {
    } 
```

# c++ - 如何从另一个线程获取指针？

> ID：208855
> 
> 赞同：3
> 
> 时间：2008-10-16T14:47:44.647
> 
> 标签：c++, multithreading

让我们有以下类定义：

```
CThread::CThread ()
{
    this->hThread       = NULL;
    this->hThreadId     = 0;
    this->hMainThread   = ::GetCurrentThread ();
    this->hMainThreadId     = ::GetCurrentThreadId ();
    this->Timeout       = 2000; //milliseconds
}

CThread::~CThread ()
{
    //waiting for the thread to terminate
    if (this->hThread) {
        if (::WaitForSingleObject (this->hThread, this->Timeout) == WAIT_TIMEOUT)
            ::TerminateThread (this->hThread, 1);

        ::CloseHandle (this->hThread);
    }
}

//*********************************************************
//working method
//*********************************************************
unsigned long CThread::Process (void* parameter)
{

    //a mechanism for terminating thread should be implemented
    //not allowing the method to be run from the main thread
    if (::GetCurrentThreadId () == this->hMainThreadId)
        return 0;
    else {
                m_pMyPointer = new MyClass(...);
                // my class successfully works here in another thread
        return 0;
    }

}

//*********************************************************
//creates the thread
//*********************************************************
bool CThread::CreateThread ()
{

    if (!this->IsCreated ()) {
        param*  this_param = new param;
        this_param->pThread = this;
        this->hThread = ::CreateThread (NULL, 0, (unsigned long (__stdcall *)(void *))this->runProcess, (void *)(this_param), 0, &this->hThreadId);
        return this->hThread ? true : false;
    }
    return false;

}

//*********************************************************
//creates the thread
//*********************************************************
int CThread::runProcess (void* Param)
{
    CThread*    thread;
    thread          = (CThread*)((param*)Param)->pThread;
    delete  ((param*)Param);
    return thread->Process (0);
}

MyClass* CThread::getMyPointer() {
    return m_pMyPointer;
} 
```

在主程序中，我们有以下内容：

```
void main(void) {
  CThread thread;
  thread.CreateThread();

  MyClass* myPointer = thread.getMyPointer(); 
  myPointer->someMethod(); // CRASH, BOOM, BANG!!!!
} 
```

在使用 myPointer 的那一刻（在主线程中）它崩溃了。我不知道如何获取在另一个线程中分配的指向内存的指针。这真的可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-10-16T14:53:53.903

所有线程都可以访问应用程序的内存空间。默认情况下，无论上下文如何，任何线程都可以看到任何变量（唯一的例外是声明为 __delcspec(thread) 的变量）

由于比赛条件，您正在崩溃。您刚刚创建的线程在您调用 getMyPointer 时尚未开始运行。您需要在新创建的线程和原始线程之间添加某种同步。换句话说，原始线程必须等待，直到新线程向它发出它已创建对象的信号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-16T15:22:51.970

我正在努力了解您正在尝试做的事情。对于像线程类这样的东西来说，它看起来过于复杂。你介意发布类定义吗？

首先删除 CreateThread() 的过程参数的 C 风格转换：

```
this->hThread = ::CreateThread (NULL, 0,&runProcess, (void *)(this_param), 0, &this->hThreadId); 
```

如果这不编译你做错了！*永远不要*投射函数指针！如果编译器抱怨你需要改变你的函数，不要试图抛弃错误！真的！你只会让自己变得更糟！如果你再做一次，*他们**会来你家做……让我们看看你喜欢什么！说真的，不要再这样做了。

顺便说一句，在 Process() 我认为这样做更合适：

```
assert(::GetCurrentThreadId() == hThreadId); 
```

但是如果你声明它是私有的，它应该只能被你的 CThread 类访问，因此它不应该是一个问题。断言虽然很好！

*目前尚不清楚*他们*是谁，但很明显无论*他们*做什么都不会令人愉快！

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2008-10-16T15:18:08.533

正如 Rob Walker 指出的那样——我真的错过了比赛条件。此外，崩溃不是在获取指针时，而是在使用它时。

一个简单的等待就完成了：

```
MyClass* myPointer = thread.getMyPointer(); 

while (myPointer == 0) 
{
    ::Sleep(1000);
}

myPointer->someMethod(); // Working :) 
```

# javascript - 使用 google.load('jQuery', ...) 与直接包含托管脚本 URL 有什么优势？

> ID：208869
> 
> 赞同：38
> 
> 时间：2008-10-16T14:50:30.070
> 
> 标签：javascript, optimization

Google 在以下位置托管了一些流行的 JavaScript 库： [http ://code.google.com/apis/ajaxlibs/](http://code.google.com/apis/ajaxlibs/)

根据谷歌：

> 加载库最强大的方法是使用 google.load() ...

使用的真正优势是什么

`google.load("jquery", "1.2.6")`

对比

`<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js"></script>`

?

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2008-11-04T19:52:50.080

除了 Google 能够根据请求将多个文件捆绑在一起的好处之外，使用 google.load 没有任何好处。事实上，如果你知道你想使用的所有库（比如 jQuery 1.2.6），你可能会让用户的浏览器执行一个不需要的 HTTP 连接。由于使用 Google 托管的全部目的是减少带宽消耗和响应时间，因此最好的决定 - 如果您只使用 1 个库 - 是直接调用该库。

此外，如果您的站点将使用任何 SSL 证书，您需要通过 Google 的 HTTPS 连接调用脚本来对此进行规划。从 http 页面调用 https 脚本没有任何缺点，但是从 https 页面调用 http 脚本会导致比您想像的更难以理解的调试问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-16T15:05:58.683

1.  它允许您在任何地方[动态加载](http://code.google.com/apis/ajax/documentation/#Dynamic)代码中的库。
2.  因为它允许您直接切换到 javascript 中库的新版本，而无需强制您在整个站点中重建/更改模板。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-16T14:58:01.663

它允许 Google 更改 URL（但他们不能，因为 URL 方法已经建立）

理论上，如果您执行多个 google.load()，Google 可以将其捆绑到一个文件中，但我认为这没有实现。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-30T20:46:21.640

我发现它对于测试不同的库和不同的方法非常有用，特别是如果您不习惯它们并希望并排查看它们的差异，而无需下载它们。这样做的主要原因之一似乎是它是异步的，而不是同步的脚本调用。您还可以获得一些直接包含在 google 加载程序中的简洁内容，例如客户端位置。你可以从中得到他们的纬度和经度。不一定有用，但如果您打算投放有针对性的广告或类似的东西，它可能会有所帮助。

更不用说动态加载总是有用的。特别是要平滑初始站点负载。将最初的“网站加载时间”保持在尽可能短的水平是每个网页设计师都在进行的艰苦战斗。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-16T16:55:34.170

您可能只想在特殊条件下加载库。

此外， google.load 方法将加速初始页面显示。否则，如果您在 html 代码中包含脚本标记，则页面呈现将冻结，直到文件已加载。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-14T17:10:44.023

就我个人而言，我对已经加载该库的浏览器是否有缓存优势感兴趣。好像有人浏览谷歌并加载正确的 jQuery 库，然后浏览到我的站点并加载正确的 jQuery 库... ...两者都可能使用相同的缓存 jQuery。不过，这只是一种推测的可能性。

编辑：是的，至少在使用直接脚本标记到该位置时，如果有人已经从 google 调用了该库（例如，如果它被其他站点包含在某处），则 javascript 库将被缓存。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-14T18:36:10.697

如果您要编写仅在特定事件发生时使用该库的大量 JavaScript，您可以等到该事件发生时才下载该库，这样可以避免那些实际上并未最终触发该事件的人发出不必要的 HTTP 请求。但是，对于像 Prototype + Scriptaculous 这样下载超过 300kb 的 JavaScript 代码的库来说，这是不切实际的。

# internet-explorer-6 - 你在IE6上花了多少时间和精力？

> ID：208871
> 
> 赞同：9
> 
> 时间：2008-10-16T14:50:39.180
> 
> 标签：internet-explorer-6

我经常读到一旦 Internet Explorer 6 最终停止运行，企业将节省数百万美元，但阅读这样的引文让我想知道人们在 IE6 开发上花费了多少时间。一旦 IE6 出现，我会很高兴，但我发现如果我编写有效的 HTML 和 CSS，使用 JavaScript 框架，记住透明图像的问题，不要试图让我的设计过于复杂，我只会需要写几行IE6专用的CSS，一般需要10-15分钟左右。所以我很好奇，您或您的公司在为 IE6 准备网站上花费了多少时间、精力和金钱？另外，什么时候你会放弃对 IE6 的支持？如果您已经放弃了支持，那么您在节省时间和金钱方面的经验是什么？转换率和客户满意度有什么影响？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-16T15:51:20.290

根据[一些](http://www.w3schools.com/browsers/browsers_stats.asp)[浏览器](http://www.adtech.info/news/pr-08-07_en.htm)的统计[，](http://www.thecounter.com/stats/2008/September/browser.php) IE6 的市场份额仍然比 Chrome、Safari 和 Opera 加起来还要大，几乎和 IE7 一样多。

除非您针对一个非常具体的市场（确实要检查您的统计数据以确定），否则今天忽略让您的网站看起来至少体面的 IE6 似乎有点愚蠢......

我肯定不会告诉访问者使用什么浏览器！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-16T14:59:59.520

我已经在逐步淘汰它了。花在调试过时（7 年以上！！）浏览器上的每一秒都浪费在我的书中。我开始做的是当一个 IE6 用户第一次访问该站点时（由 cookie 和一些狡猾的浏览器嗅探确定），我弹出一个警报，通知他们他们使用的是旧浏览器，它不支持所需的大部分功能由今天的许多网站。我告诉他们，他们的体验可能会因继续而略有下降，但可以通过升级到[现代](http://www.getfirefox.com) [网络](http://www.google.com/chrome) [浏览器](http://www.opera.com/)轻松缓解（即使[它很糟糕](http://www.microsoft.com/windows/downloads/ie/getitnow.mspx)）。

不要特意为他们制造糟糕的东西（尽管他们可能应得的），但也不要为这些用户特意（使用非标准的 CSS hack 等）。他们只有一种学习方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-16T15:27:48.793

我不喜欢它，但我仍然支持它。对于小型网站，这不是问题，只需先在 Firefox 中运行，然后是 IE7，最后是 IE6。我已经多次使用 IE6-only css，而那些只有一些规则。

对于一个布局复杂的大型项目，我在 IE6 上浪费了很多时间。如果无法在其上提供我的主要功能之一，我将非常乐意完全放弃它。到目前为止，它已经足够接近了，我仍然支持它。

根据我在网上阅读的内容，大约 1/4 的人仍在使用它，因此放弃支持可能是不明智的。 [http://www.w3schools.com/browsers/browsers_stats.asp](http://www.w3schools.com/browsers/browsers_stats.asp)

根据您的应用程序以及您认为您可以从用户那里得到的期望，使用您自己的判断。我不相信典型的网络用户会为一个站点升级/切换他们的浏览器。我认为那些现在还没有从 IE6 升级的人永远不会有动力这样做。IE6 用户的数量正在下降，但我认为我们将等待他们更换电脑而不是升级他们的浏览器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-16T17:36:24.683

在我的工作中，我们所有的项目都是为那些不愿意放弃对拥有如此大市场份额的浏览器的支持的大公司而设计的。此外，我们的设计是由第三方设计公司指定给我们的，因此即使符合标准，IE 6 中的复杂设计仍然存在问题。

我会说对于任何给定的页面，大约 5%-50% 的 CSS 开发时间用于 IE 6，这取决于开发人员是谁以及设计的复杂程度。开发人员越有经验，设计越简单，你达到 5% 的几率就越大 :) 但即使是我自己，拥有大量 IE 6 网络开发经验，也花了 3 个小时在 CSS 上只为一个页面再花 3 个小时解决 IE 6 中的小问题。

出现的另一件事是，某些在更现代的浏览器中看起来如此直观和简单的标记 + CSS 方法在 IE 6 中根本不起作用。如果你沿着这些路径之一走，你通常必须从头开始意识到您在 FF 和 IE 7 中运行良好的代码在 IE 6 中没有机会。更多浪费的时间......

我同意你们其他人的观点，如果你可以控制你的项目并且不关心 IE 6 市场，那么就别管它了。不幸的是，我们中的一些人还没有那种奢侈。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-16T14:55:32.680

我们已经放弃了它，但这取决于您的营销对象。只有其他公司才能看到我们的产品，所以我们可以相当肯定他们至少使用的是可以支持 IE7 的操作系统。如果您正在向整个互联网进行营销，那么您可能需要确保暂时没有任何中断。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-16T15:02:07.100

取决于项目。如果我编写符合 Web 标准的代码，我通常不会遇到很多问题。

如果我使用的是从网上下载的模板，它通常会用粗体字非常清楚地拼出：“**天命是个婊子。不要与任何人交换毯子。** ”

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-16T15:00:07.273

不幸的是，我有一群其他行业的朋友在坚持使用 IE6，并且没有升级的计划。

他们不喜欢 IE7 中的选项卡，他们不想使用其他浏览器，等等等等。

有足够的东西过滤给我，我会继续针对 IE6 进行测试，并且会在不确定的未来进行测试。不会让我开心……就去做吧。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-16T15:00:54.013

我们的绝大多数内部企业用户仍在使用 IE6。在当权者决定推出 IE7 或 IE8 更新之前，我们将继续支持 IE6 作为我们的主要浏览器。

据我所知，没有立即升级的计划。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-16T15:03:24.193

零。就我而言，已经死了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-16T15:04:55.143

真的，你应该自己回答这个问题。如果您没有像[AWSStats](http://awstats.sourceforge.net/)这样的不错的 Web 日志统计包，那么您需要做的第一件事就是。否则，决定你花多少时间支持 IE6，看看[你的用户中有多少是](http://www.nltechno.com/awstats/awstats.pl?config=destailleur.fr&framename=mainright&output=browserdetail). 如果时间与客户的比率不平衡，那么您可以决定放弃 IE6。另一个需要考虑的因素是你的产品对你的客户有多重要。如果您在 Salesforce.com 上工作，您可能会假设如果您提示他们升级，他们会愿意升级。如果您正在谈论将广告注入网页的服务器，那么您可能会受到浏览器选择的支配。

# sql - 如何编写通过关系表获取结果的 SQL 语句？（多对多）

> ID：208874
> 
> 赞同：1
> 
> 时间：2008-10-16T14:51:00.430
> 
> 标签：sql, many-to-many, relational

我有 3 个表（档案有很多部分，部分（可能）属于许多档案）：

*   `archive`

    *   `id PK`
    *   `description`
*   `archive_to_section`

    *   `archive_id PK FK`
    *   `section_id PK FK`
*   `section`

    *   `id PK`
    *   `description`

列出属于某个归档 id 的所有部分的 SQL 会是什么样子？

我只是在学习 SQL。从我读到的内容听起来我需要加入或工会？仅供参考，我正在使用 postgres。

* * *

**[编辑]**这是 gdean2323 的答案，没有别名：

```
SELECT section.* 
FROM section 
INNER JOIN archive_to_section 
ON section.id = archive_to_section.section_id 
WHERE archive_to_section.archive_id = $this_archive_id 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-16T14:52:59.880

```
SELECT s.*
FROM archive_to_section ats
  INNER JOIN section s ON s.id=ats.section_id
WHERE ats.archive_id= @archiveID 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-16T14:53:56.600

```
SELECT s.* 
FROM section s INNER JOIN archive_to_section ats ON s.id = ats.section_id 
WHERE ats.archive_id = 1 
```

# agile - 务实是敏捷的吗？

> ID：208876
> 
> 赞同：7
> 
> 时间：2008-10-16T14:51:17.887
> 
> 标签：agile, methodology

我刚刚重读了[The Pragmatic Programmer](https://rads.stackoverflow.com/amzn/click/com/020161622X)（我第三次阅读它......我每次都会得到新的东西）。他们提到的技巧似乎与许多不同的敏捷方法有关。实用编程只是敏捷开发的另一种形式吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-10-16T14:56:25.207

很多被称为“敏捷开发”的东西都是已经使用多年的实践，你会在“实用程序员”和“代码完成”等中找到很多这样的想法。在某种程度上，敏捷是一种很好的营销方式自旋已经被创造出来，但我确实相信将这些实践和想法中的一些纳入主流对我们有很大帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-10-16T14:53:23.013

不想轻率：这有关系吗？

归根结底，这些是人们以不同方式使用的标签，意味着各种各样的不同事物。实践本身比你赋予它们的标签重要得多。

但是，是的，从根本上说，这两个地方都出现了许多做法，这不足为奇。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-10-16T14:57:20.650

两位作者都是发起[整个敏捷运动](http://www.agilemanifesto.org/history.html)的小组的一部分（或者至少给它起了个名字），所以我会说是的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-10-29T20:10:39.027

**是的，pragprog 方式是敏捷的。**敏捷宣言的许多元素都可以在实用的程序员书中找到。很好的例子包括“没有最终决定”和“在黑暗中发光的代码”。

Andy Hunt 和 Dave Thomas (Ruby Dave) 签署了敏捷宣言。

我想说的主要一点是，很少有真正有经验的敏捷人士会非常重视任何事物的“敏捷”程度。Kent Beck 几周前在 FLOSS 播客 ( [http://twit.tv/floss87](http://twit.tv/floss87) ) 上接受了采访，从他所说的和他的语气中可以清楚地看出，极限编程的先驱并不相信“如今，敏捷”在行业中具有重要意义。

我做过很多极限编程，发现每个人都说他们“敏捷”——即使是五分钟前还不知道这意味着什么的人。恕我直言，这个词已经变得毫无意义。一个项目是遵循 Scrum 规则还是遵循极限编程规则要明确得多……我会说选择一种特定的风格，因为**随着时间的推移，“敏捷”这个总称似乎意味着越来越少。**

# c# - 从 Outlook 将所有联系人导出为电子名片

> ID：208890
> 
> 赞同：4
> 
> 时间：2008-10-16T14:53:56.757
> 
> 标签：c#, .net, outlook, vcf-vcard

因此，我想将 Outlook 中的所有联系人导出为电子名片。如果我用谷歌搜索，我会得到一堆共享软件程序，但我想要一些免费的东西。

如果我自己编写代码，我想我应该使用 Microsoft.Office.Interop.Outlook 程序集。有没有人已经编写了将 ContactItems 转换为 vcard 的代码？

**编辑：**我以完全不同的方式解决了它，请参见下面的答案，但我已将 dok1.myopenid.com 的答案标记为已接受，因为它回答了我原来的问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-10-21T13:40:51.363

我以非编程方式解决了它：

*   选择 Outlook 中的所有联系人
*   将它们作为卡片转发给我自己
*   将所有附件（电子名片）保存在一个文件夹中，`c:\temp`
*   打开命令提示符并键入将`copy /a *.vcf c:\allcards.vcf`所有 vcard 连接成一个的命令

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2011-11-24T03:39:27.503

对于它的价值 - 我刚刚遇到这个线程，正在寻找从 Outlook 到单个 .VCF 文件的相同导出。我有 2007 年（不知道这是否有区别），但我选择了所有联系人并将它们拖到新的电子邮件消息中，以添加为单独的 .VCF 文件。全部添加后，我单击新电子邮件的附件部分，按 CTRL-A 突出显示所有附件，然后左键单击并拖动第一个（因此全部）到我想要的文件夹。 VCF 文件。几分钟的 Outlook“思考”了我的 400 个联系人，他们都在那里！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-16T15:08:30.707

他们肯定很难找到，不是吗？看看这是否有帮助。 [http://msdn.microsoft.com/en-us/library/aa579624(EXCHG.80).aspx](http://msdn.microsoft.com/en-us/library/aa579624(EXCHG.80).aspx)

这包括： 以下示例使用 CDO Person 对象获取联系人的 vCard 信息。

```
Dim oPerson As New CDO.Person
Dim strm As New ADODB.Stream

' Assume strURL is a valid URL to a person contact item
oPerson.DataSource.Open strURL

' You can set the ADO Stream object to the returned vCard stream
Set strm = oPerson.GetvCardStream

' Save the stream to a file.
' Note: using adSaveCreateOverwrite may cause an existing
' contact to be overwritten.
strm.SaveToFile "d:\vcard.txt", adSaveCreateOverwrite

' You don't have to set a Stream object,
' just use the Stream methods off GetvCardStream directly
oPerson.GetvCardStream.SaveToFile "d:\vcard.txt", adSaveCreateOverwrite 
```

是的，VB 中唯一的代码示例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-12-09T00:04:14.197

刚刚购买了 X8，当我无法轻松转移我的联系人时，我正要变得非常生气......直到我开始在手机上窥探。

首先，将 Outlook 中的所有联系人导出到 vCard（我发现通过电子邮件将它们发送给自己是最简单的。如果您收到错误消息“发送到多个附件...”，您可以将它们从电子邮件中保存到已发送项目文件夹中）并复制将 vCards 复制到手机上的存储卡中。

其次，在手机上打开您的地址簿，然后按手机上的左键（上面有 4 个小方块的按钮。不是屏幕上的 4 个框...物理按钮！）。

第三，选择“导入/导出”并选择从存储卡导入。导入所有 vCard 文件，您应该会很成功。

祝你好运......不要问我任何问题，因为我不会再回来看任何帖子......只是路过试图自己弄清楚。

# windows - 64 位 Windows 2008 问题上的 VMWare Server 1.0.7

> ID：208893
> 
> 赞同：0
> 
> 时间：2008-10-16T14:54:49.127
> 
> 标签：windows, 64-bit, vmware-server

通常在使用 VMWare Server 1.0.7 时，系统会询问您是要连接到本地机器还是远程主机。在 64 位 Windows 2008 上安装相同的软件仅提供远程主机选项。

我尝试输入本地计算机名称作为主机并输入对服务器具有管理员权限的凭据，但我只是收到“无法连接，因为目标计算机主动拒绝它”错误。我试图在谷歌上找到解决方案，但没有任何乐趣。

以前有人遇到过这个问题，可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-16T15:24:16.617

VMWare Server 1.0.7 的驱动程序似乎是未签名的，并且 64 位 Windows 拒绝加载它们。在安全更新 KB932596 之前，您可以禁用此检查，但他们现在已停止此检查。

我之前尝试过 VMWare Server 2，但没有发现它那么稳定。

脑洞大开……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-21T09:23:02.727

最后不得不安装VMWare Server 2，没有找到其他选项。

# python - 如何在 Python 中对 PDF 文件进行 base64 编码

> ID：208894
> 
> 赞同：10
> 
> 时间：2008-10-16T14:54:49.470
> 
> 标签：python, encoding, base64, xml-rpc

我应该如何对 PDF 文件进行 base64 编码，以便在 Python 中通过 XML-RPC 进行传输？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2008-10-16T22:33:24.380

如果不想使用 xmlrpclib 的 Binary 类，可以只使用字符串的 .encode() 方法：

```
a = open("pdf_reference.pdf", "rb").read().encode("base64") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-16T15:09:33.887

实际上，经过更多挖掘，看起来该`xmlrpclib`模块可能具有我需要的`Binary`辅助类：

```
binary_obj = xmlrpclib.Binary(open('foo.pdf').read())

```

[这是来自Trac XML-RPC 文档](http://trac-hacks.org/wiki/XmlRpcPlugin)的示例

```
 import xmlrpclib 
server = xmlrpclib.ServerProxy("http://athomas:password@localhost:8080/trunk/login/xmlrpc") 
server.wiki.putAttachment('WikiStart/t.py', xmlrpclib.Binary(open('t.py').read())) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-16T15:08:49.067

您可以使用[base64 库](https://docs.python.org/3/library/base64.html)、遗留接口来实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-16T15:13:02.990

看起来你也许可以使用[binascii](http://docs.python.org/library/binascii.html)模块

> binascii.b2a_base64（数据）
> 
> 将二进制数据转换为 base64 编码中的一行 ASCII 字符。返回值是转换后的行，包括换行符。数据长度最多应为 57 以符合 base64 标准。

# cocoa - 在 Cocoa 中找出可执行文件的位置

> ID：208897
> 
> 赞同：6
> 
> 时间：2008-10-16T14:55:27.707
> 
> 标签：cocoa, macos

一个简单的问题是：如何在 Cocoa 应用程序中找出可执行文件的位置。

请记住，在许多类 Unix 操作系统中，人们使用 PATH 环境为其可执行文件分配首选位置，尤其是当他们的系统中有多个版本的相同应用程序时。作为一个好的实践，我们的 Cocoa 应用程序应该找到它需要的可执行文件的首选位置。

例如，Leopard 默认配置中有一个 SVN 1.4，位于 /usr/bin，而您安装了一个更新得多的版本，例如通过 MacPorts 在 /opt/local/bin 安装的 SVN 1.5.3。然后你使用 /etc/path.d 或 .bash_profile 或 .zshrc 设置你的 PATH ：

导出 PATH=/opt/local/bin:$PATH

因此，您可以使用新版本的 svn 代替系统中的旧版本。它适用于任何终端环境。但不是在 Cocoa 应用程序中。据我所知，Cocoa 应用程序只有一个默认的 PATH 环境，如下所示：

导出 PATH="/usr/bin:/bin:/usr/sbin:/sbin"

默认情况下，它不会使用 /etc/path.d、.bash_profile、.profile、.zshrc 等中的配置。

那么我们具体可以怎么做呢？

ps 我们[这里有一个半解决方案](http://github.com/pieter/gitx/tree/master/PBGitBinary.m)，但它不能完全满足这个问题的目标。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-10-16T17:09:53.393

尝试这样做的棘手之处在于，用户可以将他们的 shell 设置为任何东西：sh、bash、csh、tcsh 等等，并且每个 shell 设置其终端环境的方式不同。我不确定我自己是否会为此而烦恼，但如果你*真的*想要，这就是我会采取的路线。

第一步是弄清楚用户的shell。在 OS X 上，此信息存储在目录服务中，可以通过 DirectoryService.framework 中的 API 或使用`dscl`命令行工具访问。DirectoryService API 实在是太麻烦了，所以我可能会选择 CLI 路线。在 Cocoa 中，您可以使用 NSTask 执行带有参数的工具以获取用户的 shell（我将在其他地方详细说明）。该命令看起来像：

`dscl -plist localhost -read /Local/Default/Users/username UserShell`

这将返回 XML 文本，您可以将其解释为 plist 并转换为 NSDictionary，或者您可以省略该`-plist`选项并自己解析文本输出。

一旦您知道了用户 shell 的路径，下一步就是执行该 shell 并告诉它运行`env`命令以打印出用户的环境。看起来大多数 shell 都接受一个`-c`命令行选项，让你传入一个字符串来执行——我想你只需要假设它是用户选择的任何 shell 的通用接口。

一旦你有了用户的环境，你就可以从中获取他们的路径列表，并从中搜索你正在寻找的任何可执行文件。就像我说的那样，我真的不知道这是否值得麻烦，但如果我实施它，这就是我要走的方向。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-12-22T23:52:26.543

与布赖恩韦伯斯特的回答相关：

获取用户外壳的一种更简单的方法是使用 NSProcessInfo 类。例如

```
NSDictionary *environmentDict = [[NSProcessInfo processInfo] environment];
NSString *shellString = [environmentDict objectForKey:@"SHELL"]; 
```

这比使用 dscl 和解析 XML 输入更容易。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2011-11-11T08:03:25.263

这是我基于上述答案的实现，从 applicationDidFinishLaunching 调用：

```
// from http://cocoawithlove.com/2009/05/invoking-other-processes-in-cocoa.html
#import "NSTask+OneLineTasksWithOutput.h"

void FixUnixPath() {
    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 0.1 * NSEC_PER_SEC), dispatch_get_main_queue(), ^(void){
        NSString *userShell = [[[NSProcessInfo processInfo] environment] objectForKey:@"SHELL"];
        NSLog(@"User's shell is %@", userShell);

        // avoid executing stuff like /sbin/nologin as a shell
        BOOL isValidShell = NO;
        for (NSString *validShell in [[NSString stringWithContentsOfFile:@"/etc/shells" encoding:NSUTF8StringEncoding error:nil] componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]]) {
            if ([[validShell stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]] isEqualToString:userShell]) {
                isValidShell = YES;
                break;
            }
        }

        if (!isValidShell) {
            NSLog(@"Shell %@ is not in /etc/shells, won't continue.", userShell);
            return;
        }
        NSString *userPath = [[NSTask stringByLaunchingPath:userShell withArguments:[NSArray arrayWithObjects:@"-c", @"echo $PATH", nil] error:nil] stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
        if (userPath.length > 0 && [userPath rangeOfString:@":"].length > 0 && [userPath rangeOfString:@"/usr/bin"].length > 0) {
            // BINGO!
            NSLog(@"User's PATH as reported by %@ is %@", userShell, userPath);
            setenv("PATH", [userPath fileSystemRepresentation], 1);
        }
    });
} 
```

PS 之所以起作用，是因为它捕获了 shell 所做的环境更改。例如，RVM`PATH=$PATH:$HOME/.rvm/bin`在安装时添加到 .bashrc。Cocoa 应用程序是从 launchd 启动的，因此它们的 PATH 中没有这些更改。

我对这段代码不是 100% 满意，因为它没有捕捉到所有内容。我最初的意图是专门处理 RVM，所以我不得不在这里使用非登录 shell，但在实践中，人们随机将 PATH 修改放入 .bashrc 和 .bash_profile，因此最好同时运行两者。

我的一个用户甚至在他的 shell 配置文件中有一个交互式菜单 (!!!)，这自然会导致这段代码挂起，我只为他导出一个 shell env 标志。:-) 添加超时可能是个好主意。

这还假设 shell 与 bourne 兼容，因此不适用于 fish 2.0，后者在黑客社区中越来越流行。（Fish 认为 $PATH 是一个数组，而不是一个以冒号分隔的字符串。因此默认情况下它使用空格作为分隔符来打印它。人们可能会想出一个简单的修复方法，比如运行`for i in $PATH; echo "PATH=$i"; end`然后只获取以 . 开头的行`PATH=`。过滤是在任何情况下都是一个好主意，因为配置文件脚本通常会自己打印一些东西。）

最后一点，一年多来，此代码一直是发布应用程序的重要组成部分（Mac App Store 在一年中的大部分时间里排名前 10 的付费开发者工具）。但是，我现在正在实施沙盒并将其取出；自然，您不能从沙盒应用程序中执行此操作。我用对 RVM 和朋友的明确支持来替换它，并手动复制他们各自的 env 更改。

对于那些希望在沙盒应用程序中使用系统 Git 之类的东西的人，请注意，虽然您无权读取文件和枚举目录，但您可以访问 stat — `[[NSFileManager defaultManager] fileExistsAtPath:path]`. 您可以使用它来探测查找二进制文件的典型文件夹的硬编码列表，当您找到位置（例如 /usr/local 或 /opt/local 或其他）时，请用户通过 NSOpenPanel 授予您访问权限。这不会涵盖所有情况，但可以处理 90% 的用例，并且是开箱即用您可以为用户做的最好的事情。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-23T00:09:44.933

您的用户拥有您正在使用的工具的自定义版本的可能性有多大（以及您的应用与该工具的任意版本兼容的可能性有多大）？如果答案是“不是非常”，那么考虑默认使用系统提供的工具的路径，并为高级用户提供一种方法来指定他们自己的路径作为首选项。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-16T15:27:43.770

Isn't the path for Finder (and hence, any GUI-launched Cocoa apps) set from your login shell? If your login shell and the shell you're using in Terminal.app aren't the same, that'd probably lead to some confusion.

This information might be helpful: [http://lists.apple.com/archives/cocoa-dev/2005/Oct/msg00528.html](http://lists.apple.com/archives/cocoa-dev/2005/Oct/msg00528.html)

Apparently, the "right" way to set environment variables for GUI processes is in a hidden .plist file. I'm sure I knew this at one point, then promptly forgot it.

# silverlight - Silverlight：如何在 generic.xaml 中为子类设置默认样式？

> ID：208908
> 
> 赞同：0
> 
> 时间：2008-10-16T14:57:56.483
> 
> 标签：silverlight

我有以下层次结构：

```
public class A
{
  protected class B
  {
  }
} 
```

我尝试通过以下方式定义默认样式（在 generic.xaml 中）：

```
<Style TargetType="local:A+B">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="local:A+B">
                <Grid/>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<Style TargetType="local:A.B">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="local:A.B">
                <Grid/>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<Style TargetType="local:B">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="local:B">
                <Grid/>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

有谁知道正确的语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-19T21:08:40.993

我不相信继承样式受支持，因为它在 CSS 中。您只能为特定目标类型创建样式。然后在您需要指定样式的实例上。

但是，您使用的是 generic.xaml 文件（现在在主题/generic.xaml 下），该文件将默认样式应用于特定目标类型。因此，如果您需要以包含的类 B 为目标，则需要定义 B 的样式或通过公共属性将其包含在 A 下。

# perl - 如何搜索文本然后打印结果？

> ID：208919
> 
> 赞同：-1
> 
> 时间：2008-10-16T15:02:17.240
> 
> 标签：perl, search

我正在搜索“o”，然后用“o”打印所有行。我必须申请的任何建议/代码？

数据.txt：

```
j,o,b:
a,b,d:
o,l,e:
f,a,r:
e,x,o: 
```

所需的输出：

```
j,o,b:
o,l,e:
e,x,o: 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-10-16T15:08:54.637

```
grep o data.txt

perl -ne 'print if (/o/);' <data.txt 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-16T15:07:41.393

如果您的系统上有 grep，那么`grep o data.txt`从命令行应该可以解决问题。

如果做不到这一点，你可以试试 Perl：

```
open IN, 'data.txt';
my @l = <IN>;
close IN;
foreach my $l (@l) {
   $l =~ /o/ and print $l;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-16T15:06:46.310

```
grep "o" data.txt 
```

这有帮助吗？我不知道 Perl，但你可以使用上面的 grep 获得相同的输出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-16T15:06:49.430

```
print if /o/; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-16T16:03:44.433

作为一个非常短的单行：

```
> perl -pe'$_ x=/o/' filename 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-16T15:07:57.913

在 Perl 中：

```
while (<>) { print if /o/; } 
```

或使用 grep：

```
grep 'o' data.txt 
```

# asp.net - HTML 报告解决方案

> ID：208923
> 
> 赞同：3
> 
> 时间：2008-10-16T15:03:30.107
> 
> 标签：asp.net, reporting

有哪些好的组件和包可用于根据报表定义生成 HTML 报表？我有一个真正可怕的项目，其中每个报告都是一个专用的 aspx 页面，它构建一个非常大的 HTML 字符串，然后将其分配给“reportBody”标签控件。

标准网格不是一个好的解决方案，因为它们不提供分组功能，但我愿意购买对分组、打印和导出友好的网格。仅供参考是我将要研究的一个报告引擎选项。那里还有什么？SSRS 可能不是一个选项，因为 MSSQL 甚至可能不是一个选项。

顺便说一句，这是一个 ASP.NET 网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-16T15:09:31.437

你可以试试[ActiveReports.net](http://www.datadynamics.com/Products/ProductOverview.aspx?Product=ARNET3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-16T19:56:41.450

您可以使用**[i-net Clear Reports](http://www.inetsoftware.de/products/crystalclear/)**（以前是 i-net Crystal-Clear）。它有许多不同的输出格式，如 HTML、PDF、Postscript 等。它可以打印，当然它支持分组。它与平台无关。您也可以将它与您的 ASP.NET 一起使用。它支持许多不同的数据库，如 MS SQL、Oracle、MySQL 等。但也可以使用其他数据源。免费且功能齐全的[报表设计](http://www.inetsoftware.de/products/crystal-clear/designer)器非常易于使用。

此外，价格也远低于 Crystal Reports 等其他报告工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-16T15:33:28.113

您仍然可以使用 RDLC 报告，只需在本地模式下构建它们（不需要 SQL SERVER）。我经常从函数调用的结果中提供我的 RDLC 报告数据，而不是让它们与数据库密切相关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-01T21:07:32.743

DevExpress ASPxGridView 已被证明是完成这项工作的绝佳工具。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-01T21:19:31.247

> 标准网格不是一个好的解决方案，因为它们不提供分组功能

如果你想创建自己的，我可以给你一些建议。首先，您可以在 SQL 中使用 ROLLUP 或 COMPUTE 语句或类似语句创建组并使用网格。

我走了以下路线：报告是数据驱动的，所以我知道哪些列可以分组，哪些列需要计算总计。我使用标准 DataGrid，在 ItemDataBound 事件中，我为任何需要它的列保留一个运行总计，然后检测组列中的更改。当检测到时，我插入一个组总计，重置运行总计并插入一个新的组标题。

I did a quick prototype of this in a day. But by the time you work out all the little details to give the reports all the features they need, and make them look just right, you'll spend quite a bit of time and end up with a small mountain of code.

# sql - Select * 和 Select [列出每个列] 之间有区别吗

> ID：208925
> 
> 赞同：27
> 
> 时间：2008-10-16T15:04:44.240
> 
> 标签：sql, database, linq, linq-to-sql

我正在使用 MS SQL Server 2005。对于 SQL 引擎，两者之间是否有区别

```
SELECT * FROM MyTable; 
```

和

```
SELECT ColA, ColB, ColC FROM MyTable; 
```

当 ColA、ColB 和 ColC 代表表中的每一列时？

如果它们相同，那么您是否有理由使用第二个？我有一个在 LINQ 上很重的项目，我不确定它生成的标准 SELECT * 是否是一种不好的做法，或者我是否应该始终使用 .Select() 来指定我想要的列。

编辑：更改“当 ColA、ColB 和 ColC 都是表的列时？” 到“当 ColA、ColB 和 ColC 代表表中的每一列时？” 为了清楚起见。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2008-10-16T15:07:54.717

一般来说，最好是明确的，所以`Select col1, col2 from Table`更好。原因是在某些时候，可能会向该表添加一个额外的列，并会导致从查询中带回不需要的数据。

不过，这不是一个硬性规定。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2008-10-16T15:08:54.650

1）第二个更明确地说明了返回哪些列。那么第二个的价值就是你明确知道哪些列回来了。

2) 当列数多于显式使用的列数时，这涉及到返回的数据可能更少。

3) 如果通过添加新列来更改表，则第一个查询会更改，而第二个不会。如果您有类似“for all columns returned do ...”之类的代码，那么如果您使用第一个而不是第二个，结果会发生变化。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-10-16T15:12:43.880

我会让很多人对我不满意，但特别是如果我稍后要添加列，我通常喜欢使用 SELECT * FROM 表。由于这个原因，我被称为惰性，因为如果我对我的表进行任何修改，我不想追踪所有使用该表的存储过程，而只是在我的应用程序的数据访问层类中更改它. 在某些情况下我会指定列，但在我试图从数据库中获取完整的“对象”的情况下，我宁愿只使用“*”。而且，是的，我知道人们会因此而讨厌我，但它让我在向我的应用程序添加字段时更快、更少错误。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2008-10-16T15:21:24.143

问题的两个方面是：显式列规范在添加新列时提供更好的性能，但 * 规范在添加新列时不需要维护。

使用哪个取决于您希望添加到表中的列类型以及查询的重点。

如果您将表用作对象的后备存储（这在 LINQ-to-SQL 情况下很可能），您可能希望添加到该表的任何新列都包含在您的对象中，反之亦然。您正在并行维护它们。因此，对于这种情况，SELECT 子句中的 * 规范是正确的。每次更改时，显式规范都会为您提供额外的维护，如果您没有正确更新字段列表，则会出现错误。

如果查询要返回大量记录，出于性能原因，您最好使用明确的规范。

如果这两件事都是真的，考虑有两个不同的查询。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2008-10-16T15:09:21.810

您应该指定一个明确的列列表。SELECT * 将带回比创建更多 IO 和网络流量所需的更多列，但更重要的是，即使存在非聚集覆盖索引（在 SQL Server 上），它也可能需要额外的查找。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-10-16T15:09:07.070

**不使用**第一个语句 (select *) 的一些原因是：

1.  如果稍后向该表添加一些大字段（BLOB 列会*非常*糟糕），您可能会在应用程序中遇到**性能问题**
2.  如果查询是包含两个或多个表的 JOIN 查询，则某些字段可能具有**相同的名称**。最好确保您的字段名称不同。
3.  从编程美学的角度来看，第二条语句的查询目的更**清楚**

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-10-16T15:07:07.353

当您单独选择每个字段时，更清楚实际选择了哪些字段。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-10-16T15:10:08.707

SELECT * 在大多数地方都是不好的做法。

*   如果有人向该表添加 2gb BLOB 列怎么办？
*   什么是有人在该表中添加了任何列？

这是一个等待发生的错误。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-10-16T15:16:30.550

几件事：

*   很多人在这里发帖建议不要使用 *，并给出了这些答案的几个充分理由。到目前为止，在其他 10 个回复中，只有一个不建议列出列。
*   在向 StackOverflow 等帮助网站发帖时，人们通常会对该规则做出例外处理，因为他们通常不知道您的表中有哪些列或对您的查询很重要。出于这个原因，您会在这里和网络上的其他地方看到许多使用 * 语法的代码，即使发帖人倾向于在他自己的代码中避免使用它。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-10-16T15:09:52.560

它有利于向前兼容。

当你使用

```
SELECT * FROM myTable 
```

在“myTable”中有 3 列。你得到相同的结果

```
SELECT Column1, Column2, Column3 FROM myTable 
```

但是如果你以后添加新的列，你会得到不同的结果。

当然，如果您更改现有列的名称之一，在第一种情况下您会得到结果，而在第二种情况下您会收到错误（我认为，这是应用程序的正确行为）。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-10-16T15:12:50.353

如果您的代码依赖于按特定顺序排列的某些列，则需要列出这些列。如果不是，则使用“*”或在 select 语句中写出列名并没有什么不同。

例如，如果您将列插入到表中。

拿这张桌子： ColA ColB ColC

你可能有一个疑问：

```
SELECT *
FROM myTable 
```

那么代码可能是：

```
rs = executeSql("SELECT * FROM myTable")
while (rs.read())
    Print "Col A" + rs[0]
    Print "Col B" + rs[1]
    Print "Col C" + rs[2] 
```

如果您在 ColB 和 ColC 之间添加一列，则查询不会返回您要查找的内容。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-10-16T15:09:31.967

快速查看查询执行计划表明查询是相同的。

一般的经验法则是，您希望将查询限制为仅需要返回的字段。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-10-16T15:10:05.053

对于 LinqToSql，如果您打算稍后修改这些记录，则应将整条记录拉入内存。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-10-16T15:10:24.040

这取决于您所说的“差异”是什么意思。有明显的语法差异，但真正的差异是性能之一。

当您说 时`SELECT * FROM MyTable`，您是在告诉 SQL 查询引擎返回一个包含该表中**所有**列的数据集，同时`SELECT ColA, ColB, ColC FROM MyTable`告诉查询引擎从该表中返回一个**仅**包含 ColA、ColB 和 ColC 的数据集。

假设您有一个包含 100 列定义为 CHAR[10] 的表。`SELECT *`将返回 100 列 * 10 字节的数据，而`SELECT ColA, ColB, ColC`将返回 3 列 * 10 字节的数据。这是通过网络传回的数据量的巨大差异。

指定列列表也可以让您更清楚您感兴趣的列。缺点是如果您从表中添加/删除列，您需要确保列列表也被更新，但我认为这是一个很小的代价与性能增益相比。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-10-16T15:15:02.517

```
SELECT * FROM MyTable 
```

select * 取决于架构中的列顺序，因此如果您通过集合的索引 # 引用结果集，您将看到错误的列。

```
SELECT Col1,Col2,Col3 FROM MyTable 
```

此查询将为您提供一个随时间保持不变的集合，但是您多久更改一次列顺序？

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-10-16T15:12:33.333

选择每一列比只选择 * 更好，因为如果您添加或删除新行，您必须查看代码并查看您对检索到的数据做了什么。
此外，它还可以帮助您更好地理解您的代码，并允许您使用别名作为列名（如果您正在执行与共享名称的列的表连接）

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-10-16T17:06:26.007

一个关于为什么你从不（恕我直言）应该使用 SELECT * 的例子。这与 MSSQL 无关，而与 MySQL 有关。5.0.12 之前的版本以非标准方式从某些类型的连接返回列。当然，如果您的查询定义了您想要的列和顺序，那么您没有问题。想象一下，如果他们不这样做会很有趣。

（一个可能的例外：您的查询仅从一个表中选择，**并且**您通过名称而不是位置来识别您选择的编程语言中的列。）

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-10-20T20:32:06.010

使用“SELECT *”优化程序员打字。就是这样。这是唯一的优势。

# c++ - 如何在 C++ 中存储变体数据

> ID：208959
> 
> 赞同：23
> 
> 时间：2008-10-16T15:09:33.543
> 
> 标签：c++, variant

我正在创建一个存储有关特定数据源的元数据的类。元数据以树的形式结构化，与 XML 的结构化方式非常相似。元数据值可以是整数、十进制或字符串值。

我很好奇 C++ 中是否有一种好方法可以为这种情况存储变体数据。我希望变体使用标准库，因此我避免使用可用的 COM、Ole 和 SQL VARIANT 类型。

我当前的解决方案如下所示：

```
enum MetaValueType
{
    MetaChar,
    MetaString,
    MetaShort,
    MetaInt,
    MetaFloat,
    MetaDouble
};

union MetaUnion
{
    char cValue;
    short sValue;
    int iValue;
    float fValue;
    double dValue;
};

class MetaValue
{
...
private:
    MetaValueType ValueType;
    std::string StringValue;
    MetaUnion VariantValue;
}; 
```

MetaValue 类具有各种 Get 函数，用于获取当前存储的变量值，但它最终使每个值查询成为 if/else if 语句的一大块，以确定我正在寻找的值。

我还探索了将值仅存储为字符串，并执行转换以获取不同的变体类型，但据我所知，这会导致一堆内部字符串解析和错误处理，这并不漂亮，打开使用浮点值解决了一大堆旧的精度和数据丢失问题，并且仍然不能消除上述 if/else if 问题的查询。

是否有人使用标准库实现或看到了更清洁的用于 C++ 变体数据类型的东西？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2008-10-16T15:12:03.787

从 C++17 开始，有[`std::variant`](http://en.cppreference.com/w/cpp/utility/variant).

如果您还不能使用它，您可能需要[Boost.Variant](http://www.boost.org/doc/libs/1_36_0/doc/html/variant.html)。[`std::any`](http://en.cppreference.com/w/cpp/utility/any)（以及，C++17 之前的[Boost.Any](http://www.boost.org/doc/libs/1_36_0/doc/html/any.html) ）提供了一种类似但不同的多态建模类型。

作为附加指针，您可以查找“<a href="https://stackoverflow.com/q/5450159/1968">类型擦除”。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-11-16T03:29:09.463

虽然 Konrad 的答案（使用现有的标准化解决方案）肯定比编写自己的容易出错的版本更可取，但 boost 变体有一些开销，尤其是在复制构造和内存方面。

一种常见的定制方法是以下修改后的工厂模式：

1.  为也封装对象类型（作为枚举）或使用“typeid”（首选）的通用对象创建 Base 接口。
2.  现在使用模板`Derived`类实现接口。
3.  `create`使用带有签名的模板化函数创建工厂类：

`template <typename _T> Base * Factory::create ();`

这在内部`Derived<_T>`在堆上创建了一个对象，并重新调整了动态转换指针。专门针对您要实现的每个类进行此操作。

最后，定义一个`Variant`包含 this`Base *`指针并定义模板 get 和 set 函数的包装器。`getType()`, , 赋值和相等运算符等实用功能`isEmpty()`可以在这里适当地实现。

根据实用功能和工厂实现，支持的类将需要支持一些基本功能，如赋值或复制构造。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-10-16T15:30:15.513

您还可以使用更 C-ish 的解决方案，该解决方案将在您的系统上具有一个 double 大小的 void*，以及您正在使用的类型的枚举。它相当干净，但对于那些对系统的原始字节感到完全满意的人来说绝对是一个解决方案。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-02-13T18:08:12.147

C++17 现在拥有`std::variant`您正在寻找的内容。

[标准::变体](http://en.cppreference.com/w/cpp/utility/variant)

> 类模板 std::variant 表示类型安全的联合。在任何给定时间，std::variant 的实例要么保存其替代类型之一的值，要么在错误的情况下 - 没有值（这种状态很难实现，请参阅 valueless_by_exception）。
> 
> 与联合一样，如果变体拥有某个对象类型 T 的值，则 T 的对象表示直接分配在变体本身的对象表示中。不允许变体分配额外的（动态）内存。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-04-15T06:44:09.370

尽管这个问题已经回答了很长时间，但我想提一下Qt 库中的[QVariant也可以做到这一点。](http://doc.qt.io/qt-5/qvariant.html)

> 因为 C++ 禁止联合包含具有非默认构造函数或析构函数的类型，所以大多数有趣的 Qt 类不能在联合中使用。如果没有 QVariant，这对于 QObject::property() 和数据库工作等来说都是一个问题。
> 
> QVariant 对象一次保存单个 type() 的单个值。（某些 type() 是多值的，例如字符串列表。）您可以找出变体持有的类型 T，使用 convert() 将其转换为不同的类型，使用 toT 之一获取其值() 函数（例如，toSize()）并检查是否可以使用 canConvert() 将类型转换为特定类型。

# linq - .NET 3.5 表达式树中的赋值

> ID：208969
> 
> 赞同：12
> 
> 时间：2008-10-16T15:12:05.737
> 
> 标签：linq, expression-trees

是否可以将赋值编码为表达式树？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-10-16T15:21:59.540

不，我不相信。

当然 C# 编译器在转换 lambda 表达式时不允许它：

```
int x;
Expression<Func<int,int>> foo = (x=y); // Assign to x and return value 
```

这会产生错误：

```
CS0832: An expression tree may not contain an assignment operator 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-01-21T17:37:39.310

您应该能够使用 .NET 4.0 库来做到这一点。通过将 Microsoft.Scripting.Core.dll 导入您的 .NET 3.5 项目。

我正在使用 DLR 0.9 - Expession.Block 和 Expression.Scope 在 1.0 版中可能会有一些变化（您可以从[http://www.codeplex.com/dlr/Thread/View.aspx?ThreadId=43234](http://www.codeplex.com/dlr/Thread/View.aspx?ThreadId=43234)看到参考）

以下示例向您展示。

```
using System;
using System.Collections.Generic;
using Microsoft.Scripting.Ast;
using Microsoft.Linq.Expressions;
using System.Reflection;

namespace dlr_sample
{
    class Program
    {
        static void Main(string[] args)
        {
            List<Expression> statements = new List<Expression>();

            ParameterExpression x = Expression.Variable(typeof(int), "r");
            ParameterExpression y = Expression.Variable(typeof(int), "y");

            statements.Add(
                Expression.Assign(
                    x,
                    Expression.Constant(1)
                )
             );

            statements.Add(
                Expression.Assign(
                    y,
                    x
                )
             );

            MethodInfo cw = typeof(Console).GetMethod("WriteLine", new Type[] { typeof(int) });

            statements.Add(
                Expression.Call(
                    cw,
                    y
                )
            );

            LambdaExpression lambda = Expression.Lambda(Expression.Scope(Expression.Block(statements), x, y));

            lambda.Compile().DynamicInvoke();
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2010-11-09T08:21:51.447

我的扩展方法就是这样做的：

```
/// <summary>
/// Provides extensions for converting lambda functions into assignment actions
/// </summary>
public static class ExpressionExtenstions
{
    /// <summary>
    /// Converts a field/property retrieve expression into a field/property assign expression
    /// </summary>
    /// <typeparam name="TInstance">The type of the instance.</typeparam>
    /// <typeparam name="TProp">The type of the prop.</typeparam>
    /// <param name="fieldGetter">The field getter.</param>
    /// <returns></returns>
    public static Expression<Action<TInstance, TProp>> ToFieldAssignExpression<TInstance, TProp>
        (
        this Expression<Func<TInstance, TProp>> fieldGetter
        )
    {
        if (fieldGetter == null)
            throw new ArgumentNullException("fieldGetter");

        if (fieldGetter.Parameters.Count != 1 || !(fieldGetter.Body is MemberExpression))
            throw new ArgumentException(
                @"Input expression must be a single parameter field getter, e.g. g => g._fieldToSet  or function(g) g._fieldToSet");

        var parms = new[]
                        {
                            fieldGetter.Parameters[0],
                            Expression.Parameter(typeof (TProp), "value")
                        };

        Expression body = Expression.Call(AssignmentHelper<TProp>.MethodInfoSetValue,
                                          new[] {fieldGetter.Body, parms[1]});

        return Expression.Lambda<Action<TInstance, TProp>>(body, parms);
    }

    public static Action<TInstance, TProp> ToFieldAssignment<TInstance, TProp>
        (
        this Expression<Func<TInstance, TProp>> fieldGetter
        )
    {
        return fieldGetter.ToFieldAssignExpression().Compile();
    }

    #region Nested type: AssignmentHelper

    private class AssignmentHelper<T>
    {
        internal static readonly MethodInfo MethodInfoSetValue =
            typeof (AssignmentHelper<T>).GetMethod("SetValue", BindingFlags.NonPublic | BindingFlags.Static);

        private static void SetValue(ref T target, T value)
        {
            target = value;
        }
    }

    #endregion
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2010-10-19T20:16:21.647

正如 Jon Skeet 和 TraumaPony 已经说过的，`Expression.Assign`在 .NET 4 之前不可用。这是另一个如何解决这个缺失位的具体示例：

```
public static class AssignmentExpression
{
    public static Expression Create(Expression left, Expression right)
    {
        return
            Expression.Call(
               null,
               typeof(AssignmentExpression)
                  .GetMethod("AssignTo", BindingFlags.NonPublic | BindingFlags.Static)
                  .MakeGenericMethod(left.Type),
               left,
               right);
    }

    private static void AssignTo<T>(ref T left, T right)  // note the 'ref', which is
    {                                                     // important when assigning
        left = right;                                     // to value types!
    }
} 
```

然后只需调用`AssignmentExpression.Create()`.`Expression.Assign()`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-16T15:25:15.320

您可能可以通过下一个表达式树来解决它。调用一个 lambda 函数，其中一个参数是受让人的值。

# cruisecontrol.net - CruiseControl.NET 配置文件中的“检测到重复节点”

> ID：208977
> 
> 赞同：0
> 
> 时间：2008-10-16T15:13:31.710
> 
> 标签：cruisecontrol.net

当我使用特定配置文件启动 CruiseControl.NET 时，我收到以下错误：

> ThoughtWorks.CruiseControl.Core.Config.ConfigurationException：检测到重复节点

这是什么意思，是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-16T15:22:16.717

我认为您的配置中有 2 个节点，而它只需要一个。您是否有机会在此处发布引发异常的配置文件作为附加信息？我目前正在使用 Cruisecontrol（不是 .net 版本），发现它可能对它的 XML 文件非常挑剔（这是正确的），但没有告诉您有关文件中异常是从哪里引发的任何信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-16T15:28:16.687

我发现我的配置文件结构不正确。特别是，一些块在配置部分之外。错误指向这些 exec 部分中的第二个——显然它不喜欢项目中有多个给定部分。

因此，由于这样的配置文件而发生错误：

> ```
> <project>
>   <tasks>
>     ...
>   </tasks>
>   <exec>...</exec>
>   <exec>...</exec>
> <project> 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-15T23:00:28.243

就我而言，我有类似的东西：

```
<任务>...</任务>
<sourceControls>...</sourceControls>
<任务>...</任务>
<发布者>...</发布者>

```

它不喜欢两个“<task>”节点，所以我通过删除第一个“<task>”节点来修复它。在从 svn 获取最新信息之前，我试图做一些事情，然后在第二个“<task>”节点中进行构建。我需要重新审视如何做到这一点......有什么建议吗？

# c - 用于查找局部最大值的 AC 库？

> ID：208978
> 
> 赞同：3
> 
> 时间：2008-10-16T15:13:49.040
> 
> 标签：c, numerical

我正在尝试编写一个音频分析应用程序，我需要在表示频谱图的二维数组中识别局部最大值。我已经有了一个可以使用快速傅立叶变换生成频谱图的开源库，但我想知道是否有人知道任何好的库来帮助我实际找到最大值？我不太确定要在谷歌搜索什么——我能想到的最好的就是“数字图书馆”，但这并没有让我走得太远。

最好在 C 中，但我愿意接受其他建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-16T16:52:46.720

峰值查找是一个相当普遍的问题。它已经在 SO 上讨论过一次作为[测量信号的峰值检测](http://stackoverflow.com/questions/3260/peak-detection-of-measured-signal)。

提供的答案包括几个可行的启发式方法。

当然，如果您需要严谨，我更喜欢[我自己的答案](http://stackoverflow.com/questions/3260/peak-detection-of-measured-signal#24259)，但是 ROOT 是用 c++ 编写的，几乎可以肯定对于您的应用程序来说太重了，所以您只需要删除您想要的代码......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-17T09:40:16.937

GNU 科学库具有一个[多维最小化框架](http://www.gnu.org/software/gsl/manual/html_node/Multidimensional-Minimization.html)，可以很容易地实现最大化。然而，它被设计为只返回一个最小值而不是一堆不同的最小值。

# c# - 如果 x86 构建，Nunit.exe 无法在 Vista 64 位上运行

> ID：208985
> 
> 赞同：27
> 
> 时间：2008-10-16T15:16:05.807
> 
> 标签：c#, .net, .net-2.0, nunit, 64-bit

我在 Vista 64 位上，我有一个使用 x86 配置构建的项目。一切正常。现在，我们正在创建测试。我们有 NUnit 2.4.8 但我们有很多问题。

当我们直接选择 .dll 时，测试正在通过 Nunit.exe (gui) 加载，但在执行时我们有一个 system.badimageformatexception。

我通过在 Google 上搜索了一些关于 nunit.exe.config 的技巧，但没有任何工作。（更改为 UTF8...取消注释 .net 版本以进行启动）。

任何的想法？

**更新**

我已经清理了解决方案并删除了所有 BIN 文件夹。现在，当我编译时，我清楚地看到 bin 目录中只有 /x86/，而不是 x64 中的旧 /debug/。

当我使用 Nunit 时，我有一个异常（在加载中）：**System.IO.FileNotFoundException...**

服务器堆栈跟踪：在 System.Reflection.Assembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, Assembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection) at System.Reflection.Assembly.InternalLoad(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection) 在 System.Reflection.Assembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection) 在 System.Reflection.Assembly.Load(String assemblyString) 在 NUnit.Core.Builders.TestAssemblyBuilder.Load(String path) 在 NUnit.Core.Builders.TestAssemblyBuilder.Build(String assemblyName, Boolean autoSuites) 在 NUnit.Core.Builders.TestAssemblyBuilder.Build(String assemblyName, String testName,Boolean autoSuites) 在 NUnit.Core.TestSuiteBuilder.BuildSingleAssembly(TestPackage package) 在 NUnit.Core.TestSuiteBuilder.Build(TestPackage package) 在 NUnit.Core.SimpleTestRunner.Load(TestPackage package) 在 NUnit.Core.ProxyTestRunner.Load(TestPackage package ) 在 NUnit.Core.ProxyTestRunner.Load(TestPackage package) 在 NUnit.Core.RemoteTestRunner.Load(TestPackage package) 在 System.Runtime.Remoting.Messaging.StackBuilderSink._PrivateProcessMessage(IntPtr md, Object[] args, Object server, Int32 System.Runtime.Remoting.Messaging.StackBuilderSink.SyncProcessMessage（IMessage msg，Int32 methodPtr，布尔 fExecuteInContext）处的 methodPtr，布尔 fExecuteInContext，Object[]& outArgs）Build(TestPackage package) at NUnit.Core.SimpleTestRunner.Load(TestPackage package) at NUnit.Core.ProxyTestRunner.Load(TestPackage package) at NUnit.Core.ProxyTestRunner.Load(TestPackage package) at NUnit.Core.RemoteTestRunner.Load( TestPackage 包）在 System.Runtime.Remoting.Messaging.StackBuilderSink._PrivateProcessMessage(IntPtr md, Object[] args, Object server, Int32 methodPtr, Boolean fExecuteInContext, Object[]& outArgs) 在 System.Runtime.Remoting.Messaging.StackBuilderSink。 SyncProcessMessage(IMessage msg, Int32 methodPtr, Boolean fExecuteInContext)Build(TestPackage package) at NUnit.Core.SimpleTestRunner.Load(TestPackage package) at NUnit.Core.ProxyTestRunner.Load(TestPackage package) at NUnit.Core.ProxyTestRunner.Load(TestPackage package) at NUnit.Core.RemoteTestRunner.Load( TestPackage 包）在 System.Runtime.Remoting.Messaging.StackBuilderSink._PrivateProcessMessage(IntPtr md, Object[] args, Object server, Int32 methodPtr, Boolean fExecuteInContext, Object[]& outArgs) 在 System.Runtime.Remoting.Messaging.StackBuilderSink。 SyncProcessMessage(IMessage msg, Int32 methodPtr, Boolean fExecuteInContext)System.Runtime.Remoting.Messaging.StackBuilderSink.SyncProcessMessage(IMessage msg, Int32 methodPtr, Boolean fExecuteInContext) )System.Runtime.Remoting.Messaging.StackBuilderSink.SyncProcessMessage(IMessage msg, Int32 methodPtr, Boolean fExecuteInContext) )

在 [0] 处重新抛出异常：在 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) 在 NUnit.Core 的 System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)。 NUnit.Util.TestDomain.Load(TestPackage package) 处的 TestRunner.Load(TestPackage package) NUnit.Util.TestLoader.LoadTest(String testName)

**更新 2**

我正在使用已修改为 x86 而不是 x64 的任何 CPU 进行编译。原因是为了[调试](https://stackoverflow.com/questions/206894/change-to-64-bits-not-allowed-when-trying-to-edit-in-debug-why)。这已经在上一个链接中讨论过了。我必须确认 NUnit 在 64bits mod 和 Corflags.exe 中运行

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2008-10-16T16:36:57.487

好的，我在这个[网站上](http://cloudnine.no/2008/07/msbuild-nunit-running-32-bit-unit-tests-on-64-bin-machine)找到了解决方案。您必须使用 \NUnit-2.4.8\bin\nunit-x86.exe 而不是 \NUnit-2.4.8\bin\nunit.exe ...不知道 \bin\ 有 2 个 nunit！ ！

谢谢大家

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-16T15:35:14.397

NUnit 主机很可能作为 64 位进程运行（您可以通过查看任务管理器来确认）。如果您的程序集只是 x86，那么它将无法在该进程中运行。

您可以尝试在 NUnit 可执行文件上运行[corflags](http://msdn.microsoft.com/en-us/library/ms164699(VS.80).aspx)以强制它运行 x86，使用 /32bit+ 标志

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-03T16:26:48.127

在 MSBuild 运行平台设置为 x86的**x64**构建服务器上从 TeamCity 3.1 升级到 4.0 时，也会发生这种情况。TeamCity runner 似乎在 4.0 和 3.1 中默认平台不同，不尊重构建运行 x86 的事实。

在我的情况下，第一个有效的修复是在我的 MSBuild 脚本中向 NUnit 调用添加一个平台覆盖：

```
<NUnit Assemblies="Test/bin/$(Platform)/$(Configuration)/Test.dll" Platform="x86" />
```

（即，在其他建议中强制 32 位的 TeamCity 测试运行器方式）

（这包括当测试程序集的平台目标是任何 CPU 时（尽管碰巧我已将它们显式设置为 x86，因为某些测试会动态加载受限于 x86 的 DLL））。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-16T15:36:20.260

为什么你使用 x86 配置而不是任何 CPU？

我想当您加载 NUnit 时，它是使用 Any CPU 选项构建的，因此 JIT 是 x64 代码。当它尝试加载专门编译为作为 x86 运行的测试时，它会引发异常。

我会尝试将您的所有配置设置更改为任何 CPU，看看这是否能解决您的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-05-27T11:40:30.690

如果使用 TeamCity，您可以将值为**x86的属性****teamcity.dotnet.nant.nunit2.platform**添加到 TeamCity 项目配置设置中的构建参数（在属性和环境变量部分）。

 *** * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-02T11:40:51.187

TeamCity 8.1 也有同样的问题。解决它的方法是将 NUnit 构建步骤**.NET Runtime** / **Platform:**更改为**x86**

我还必须将**运行测试从以下位置更改：从****TestProject\bin\Release**到**TestProject\bin\x86\Release**的路径

 **# asp.net - 文件下载不适用于 IE7

> ID：208993
> 
> 赞同：2
> 
> 时间：2008-10-16T15:18:16.613
> 
> 标签：asp.net, internet-explorer-7, download

我有一个将文件内容发送到客户端的 asp.net 页面，因此浏览器显示另存为对话框以下载文件。此页面显示在弹出窗口中，当用户单击保存按钮时，它会自动关闭并开始下载。

在 Windows Server 2003 上，它工作正常。在 vista 上使用其他浏览器，也可以正常工作。但是当我尝试使用 IE7 和 Vista 时，弹出窗口会打开，并在大约一秒钟后关闭，而不显示文件下载对话框。我该如何解决这个问题？

我用于响应生成的代码是：

```
FileStream fileStream = new FileStream(filePath, FileMode.Open);
int fileSize = (int)fileStream.Length;

byte[] buffer = new byte[fileSize];
fileStream.Read(buffer, 0, (int)fileSize);
fileStream.Close();

Response.Clear();

Response.Buffer = true;
Response.BufferOutput = true;
Response.ContentType = "application / octet - stream";

Response.AddHeader("Content-Length", buffer.Length.ToString());
Response.AddHeader("Content-Disposition", "attachment; filename=" + filename);
Response.AddHeader("Extension", Path.GetExtension(filename));
Response.ContentEncoding = System.Text.Encoding.GetEncoding("windows-1254"); 
Response.BinaryWrite(buffer);
Response.Flush();
Response.End(); 
```

我正在用这个 javascript 打开弹出窗口：

```
window.open ('Download.aspx?filename=somefile.ext','downloadWindow','location=0,status=0,scrollbars=0,width=1,height=1'); 
```

**编辑：**我更正了空格，但不幸的是它们不是问题。

**编辑 2:** : 似乎这个问题与 Vista 无关，而仅与 IE 有关。我还发现当项目在本地开发服务器上运行时它工作正常，但是当连接到发布服务器时，它无法下载文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-10-16T15:21:01.337

尝试删除`ContentType`. 标准是`application/octet-stream`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-16T15:35:24.503

两件事情。

1.  如前所述，您将要删除类型中的空格
2.  是否有任何特殊原因您不使用 Response.TransmitFile() 而不是自己读取文件？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-17T11:28:04.097

我还建议您在文件名周围添加引号，否则，如果它包含空格，它将在 Firefox 中被截断。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-16T15:23:42.967

I can't point to a specific problem in your code (except possibly for that content type, which looks badly-formed; not sure if that makes a difference). Here's the code I use for this, which works in both IE7 and Firefox:

```
Response.ContentType = "application/x-download";
Response.AddHeader("Content-Disposition", "attachment; filename=" + fileName);
Response.CacheControl = "public";
Response.OutputStream.Write(byteArr, 0, byteArr.Length);
Response.End(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-27T16:11:54.547

我认为您的问题可能出在 IIS 7 上。集成管道模式的新互联网信息服务器中的“addHeader”存在问题。

尝试使用 Response.AppendHeader 。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-07-07T18:06:35.323

我遇到了这篇文章，因为如果不是同一个问题，我也遇到了类似的问题。我在 Windows 7 上运行 IE8。

在我的本地机器上调试时，我可以显示文件下载提示，但是当单击“保存”或“打开”时，下载进度窗口会显示大约半秒，然后突然关闭而没有下载任何内容。

我为 Internet Explorer 安装了一个名为**[IE7Pro](http://www.ie7pro.com/)**的附加组件。它带有一个我启用的下载管理器。当我禁用它时，我的问题就消失了，我可以打开或保存我的文件。

希望这对其他人有帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-02T09:35:32.953

我也有同样的问题......我使用了这个解决方案（我在 button.click 上使用它）：

```
Response.ContentType = "text/txt";
Response.AppendHeader("Content-Disposition", "attachment; filename="+DownloadFileName);
Response.Write(MyFileContent_Text_);
Response.End(); 
```

......它刚刚工作！

# php-gtk - 这里有人使用 PHP-GTK 吗？有更好的选择吗？

> ID：208995
> 
> 赞同：4
> 
> 时间：2008-10-16T15:19:02.447
> 
> 标签：php-gtk

我提出了一些关于 PHP-GTK 的问题（只有 4 个`php-gtk`标记的问题，三个是我的），我最终回答了自己，因为没有人回答。

我知道这是一个奇怪的语言选择，但我被它吸引了，因为它可以在多个操作系统上运行，而且我可以重用我的一些代码（而且这些应用程序最终看起来不错，我可以在 NSIS 中制作一些非常棒的小安装程序）。

有没有更好的选择，即免费（如自由）并且可以在多个平台上运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-16T15:29:41.490

它必须是 GPL，还是可以接受其他开源解决方案？Python 具有更成熟的 GTK 集成，它是开源的，但不是 GPL。您可以将 python 脚本捆绑到带有运行时的可执行文件中。您可以为包括 Windows 在内的许多平台生成这些可执行文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-16T15:31:27.850

Python 和 Ruby 都可以使用 GTK 库。这些对你来说可能是更好的语言选择（你肯定会在这里得到更多的人来回答你的问题：）

请参阅[Ruby 对 GUI 开发有好处吗？](https://stackoverflow.com/questions/115501/is-ruby-any-good-for-gui-development)和[https://stackoverflow.com/questions/115495/is-python-any-good-for-gui-development](https://stackoverflow.com/questions/115495/is-python-any-good-for-gui-development)分别用于 Ruby 和 Python 的链接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-05-08T16:05:03.510

回答你问题的第一部分。是的 - 我使用 php-gtk。这可能是一段美好友谊的开始。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-08T09:32:25.997

从另一面回答你的问题。

其他可以用 PHP 编码的 GUI 应用程序包括[wxWidgets](https://en.wikipedia.org/wiki/WxWidgets)和[Qt](https://en.wikipedia.org/wiki/Qt_(software))，它们都有可用的 PHP 绑定：[wxPHP](https://en.wikipedia.org/wiki/WxPHP)和[PHP-Qt](https://en.wikipedia.org/wiki/PHP-Qt)

# ruby - 例如，在传递给迭代器的长代码块之后，Ruby 是否最好避免使用语句修饰符？

> ID：208998
> 
> 赞同：3
> 
> 时间：2008-10-16T15:20:13.850
> 
> 标签：ruby, statement-modifiers

```
something.each do |x|

  #lots of stuff

end if some_condition 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-10-16T16:56:38.960

我认为流行的方法是**仅在语句修饰符是 one-liner 时才使用它**。在所有其他情况下，使用 C、Java 等中流行的普通 if 样式。

```
bail_out if reqd_param.nil?

if its_gonna_be_long then
  long_exec stmt1
  long_exec stmt2
  ....
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-16T15:24:10.127

I'd personally advocate against that for the pure and simple reason that it is too easy to miss. Even with that shortened version it took me a double-take to realise you had the

```
if some_condition 
```

at the end

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-16T16:45:41.400

我几乎从不使用条件句的修饰语形式，因为我认为有太多可能让读者感到困惑。这就像一个军官和一个下属说话：

```
<中士> 你的命令是爬上那座小山侦察敌人！
<私人> 是的，先生！*开始往山上跑*
<中士> ...但前提是你有双筒望远镜。

```

我唯一认为可以接受的情况是当修改的东西很小以至于可以清楚地看到条件时，例如

```
做循环
  # ...
  下一个 if 条件
  # ...
结尾

```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-16T16:51:50.840

长代码块本身是一种不好的做法，将其重构为更小的块。

长块后的修饰符是通往地狱的道路。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-10-16T15:40:49.703

在我工作的组织中，我们已经开始标记此类结构以进行重写。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2008-10-16T16:01:50.707

我认为上面的例子在某些情况下非常好，因为它存在于几个嵌套块中。如果上面的代码有 4 个级别，那么您已经消除了另一个级别。因此，在某些情况下，上述样式实际上可以增加可读性。请注意，我们假设块中的语句不超过 20 个。***********************~~******