# StackOverflow 问答 10258000-10258999

# c# - ButtonDown 和 ButtonUp 使用布尔值？

> ID：10258002
> 
> 赞同：-1
> 
> 时间：2012-04-21T10:09:08.050
> 
> 标签：c#, events, input, controller, keypress

所以基本上我使用自定义控制器进行输入，只要按住按钮，就会将布尔值设置为 true，释放按钮时设置为 false。

我需要能够在第一次按下按钮和释放按钮时触发一次事件。

有人有建议吗？

PS 我使用 C# 和 .Net 框架。

编辑：.Net Framework 如何实现 keydown 和 keyup 事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T10:31:08.890

请注意，winforms 按钮已经具有此类事件，例如[Click Event](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.buttonbase.click.aspx)。如果您需要将它们提供给程序的其他部分，您可以在触发时触发您自己的事件。如果您使用 Visual Studio，则可以在其中放置控件的图形视图。该视图还有一个属性窗口，其中包含事件（通过闪电图标）。只需选择您的控件（按钮），转到属性下的事件，输入您想要在鼠标按下时触发的函数的名称并将其传递

```
public event EventHandler SomethingHappened;
private void OnMouseDown(object sender, MouseEventArgs e) {
    OnSomethingHappened(e);
}

private void OnSomethingHappened(EventArgs args) {
    var handler = SomethingHappened;
    if (handler != null)
        handler(this, args);
} 
```

高温高压

# xcode - 在 Xcode 4 编辑器中突出显示当前行？

> ID：10258003
> 
> 赞同：2
> 
> 时间：2012-04-21T10:09:12.647
> 
> 标签：xcode, line, highlight

除非我忽略了它，否则 Xcode 4 首选项中没有这样的选项。有没有办法（扩展、插件等）来实现这种视觉反馈？

谷歌搜索[“xcode 4 highlight current line”](https://www.google.si/webhp?sourceid=chrome-instant&ie=UTF-8&ion=1#hl=sl&sclient=psy-ab&q=xcode%204%20highlight%20current%20line&oq=xcode%204%20highlight%20current%20line&aq=f&aqi=g-L1&aql=&gs_nf=1&gs_l=serp.3..0i19.993561.994697.3.995272.5.5.0.0.0.0.257.647.3j1j1.5.0.kneXqqi4-ic&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.,cf.osb&fp=c4824870849d112f&ion=1)是徒劳的......

还是故意遗漏了这个（基本的）功能？

## 相关问题

另外，如果有人可以回答[有关（符号）选择突出显示的问题](https://stackoverflow.com/questions/7333509/make-xcode-highlight-selected-symbol-more)，请回答。

## 安装*CurrentLineHighlighter.dylib*问题

执行这两个之后

```
$  defaults write /PATH/TO/Xcode.app/Contents/Info LSEnvironment -dict DYLD_INSERT_LIBRARIES /PATH/TO/CurrentLineHighlighter.dylib

$  /System/Library/Frameworks/CoreServices.framework/Frameworks/LaunchServices.framework/Support/lsregister -v -f /PATH/TO/Xcode.app 
```

`Xcode`停止工作（`Spotlight`也找不到`Xcode`）。

`/PATH/TO/CurrentLineHighlighter.dylib`实际上是在 Xcode 的文件`Contents`夹中：`/Applications/Xcode.app/Contents/Developer/usr/CurrentLineHighlighter.dylib`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-01T00:51:27.617

我是那个（旧）代码的作者。它的更新（和更安全）版本现在是[Xcode4-Fixins](https://github.com/davekeck/Xcode-4-Fixins)的一部分。它更容易处理，因为它实际上是一个 Xcode 插件。

# hadoop - 在多节点集群上的 Hadoop 中运行字数统计示例时出现异常

> ID：10258006
> 
> 赞同：0
> 
> 时间：2012-04-21T10:09:32.387
> 
> 标签：hadoop, mapreduce

我按照链接在[这里的教程](http://jinutechworld.blogspot.in/2012/02/multi-node-hadoop-cluster-on-ubuntu.html)

我正确配置了所有步骤。但是在第 8 步中，即使用字数统计的示例 MapReduce 作业中，当我执行命令时它会引发异常

```
./bin/hadoop jar /home/ila/hadoop-0.20.1-examples.jar wordcount /user/hduser/gutenberg /user/hduser/gutenberg-out
```

我怎么解决这个问题。例外情况如下：-

```
 hduser@ila:/usr/local/hadoop-0.22.0/bin$ ./hadoop jar /home/ila/hadoop-0.20.1-examples.jar wordcount /user/hduser/gutenberg /user/hduser/gutenberg-out
    Exception in thread "main" java.io.IOException: Error opening job jar: /home/ila/hadoop-0.20.1-examples.jar
    at org.apache.hadoop.util.RunJar.main(RunJar.java:130)
    Caused by: java.util.zip.ZipException: error in opening zip file
    at java.util.zip.ZipFile.open(Native Method)
    at java.util.zip.ZipFile.(ZipFile.java:114)
    at java.util.jar.JarFile.(JarFile.java:133)
    at java.util.jar.JarFile.(JarFile.java:70)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:128) 
```

提前致谢... [：）] [：）]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:58:22.660

该错误是因为命令 ( `/home/ila/hadoop-0.20.1-examples.jar`) 中引用的 jar 文件不存在。很明显，您正在使用它`hadoop-0.22.0`并且不会`hadoop-0.20.1-examples.jar`随它一起发货。

尝试`hadoop-*-examples jar`在hadoop安装目录中找到并在命令中使用它。那应该可以解决问题。通常它会被命名为`hadoop-0.22.0-examples.jar`jar 命名与 hadoop 版本相关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T11:58:28.707

我猜`hadoop-0.20.1-examples.jar`你的主目录（`/home/ila`）中没有文件？

也许修改如下（基于您对 hadoop 命令的相对路径）：

```
./bin/hadoop hadoop-0.20.1-examples.jar wordcount /user/hduser/gutenberg /user/hduser/gutenberg-out 
```

虽然我从您提供的链接中看到，但系统会提示您下载示例 jar - 您也在哪里下载了这个文件？这应该是您提供的路径

# php - mysql_fetch_array 中的数组。不能让它工作

> ID：10258010
> 
> 赞同：0
> 
> 时间：2012-04-21T10:10:03.713
> 
> 标签：php, mysql, arrays

要显示 mysql 表中的一些数据，我习惯的常用方法是：

```
while ($row = mysql_fetch_array($result, MYSQL_ASSOC))
{
     echo $row['FIELD'];
} 
```

现在为了让事情更有活力，我试过这个：

```
/* $array carries list of column names like 'FIELD'. In this case its the only one
 * $result stores whatever the query like "SELECT * FROM TABLE1" returned
 */
function dosomething($array, $result) 
{
     while ($row = mysql_fetch_array($result, MYSQL_ASSOC))
     {
          for($i = 0; $i < sizeof($array); $i++)     //gets size of $array and loops
          {
              echo $row["'".$array[$i]."'"];         //should read $row['FIELD'] yes?
          }
     }
} 
```

上面的代码什么也没显示。数据存在。回声 $row['FIELD']; 返回一些东西。但线

```
echo $row["'".$array[$i]."'"]; 
```

不给予任何回报。我尝试过另一种方式，例如-

```
echo $row[$array[$i]]; 
```

依然没有。

我希望我能够让读者理解这个问题。如何在 mysql_fetch_array 类型数组中放置一个数组？

欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T10:26:40.023

尝试这个....

$array=array("表格字段");

表 fielda 是 id、name、value。

你应该把它放在数组中。

```
 $array=array('id','name','value');

 function dosomething($array, $result) 
 {
    while ($row = mysql_fetch_array($result, MYSQL_ASSOC))
    {
        for($i = 0; $i < sizeof($array); $i++)     //gets size of $array and loops
        {
            echo $row[$array[$i]];         //should read $row['FIELD'] yes?
         }
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T10:30:07.403

```
while ($row = mysql_fetch_array($result, MYSQL_ASSOC))
{
    foreach ($row as $key => $field)
    {
        echo "$key: $value";
    }
} 
```

您必须在查询中定义要显示的字段，
并且像您的 dosomething() 这样的功能没有意义

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-21T10:20:18.080

你为什么用`$row["'".$array[$i]."'"]`这个？我想试试`$row["'".$array."'"]`

并确保数组不为空并调用函数

# javascript - Javascript setTimeout 是否停止其他脚本执行

> ID：10258012
> 
> 赞同：13
> 
> 时间：2012-04-21T10:10:18.190
> 
> 标签：javascript

我指的是[这个](https://stackoverflow.com/q/4861050/787158)。一切都还不清楚。

*   我有一个`fillTree()`更新树的 JS 函数，它有复选框。
*   我有另一个`checkSelectedBoxes()`执行`window.onload`检查选定复选框的函数。
*   现在有很多其他功能连接在一起。

我的问题：

*   如果我正在使用`setTimeout()`其他脚本函数是否也会停止并等待我的函数完成加载？

在这种情况下可能是什么情况：

```
function fillTree(){...}
function checkSelectedBoxes(){...}

fillTree(); // This take time to get data. onLoad() doesnt work.
setTimeout(function(){ checkSelectedBoxes()  },5000); 
```

即使增加了时间间隔，这也会返回空值。是否`fillTree()`暂停执行？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-21T10:13:33.930

不，`setTimeout`不等你（因此，JS 没有暂停功能）。什么`setTimeout`是稍后将该任务搁置，并允许执行下一行。当达到该超时时~~，它将该任务插入到执行行中。~~并且当没有其他代码在运行时，它会执行指示的功能。

你想要做的是给你一个回调`fillTree()`并在它完成时执行。

```
function fillTree(callback){

    //do something very long

    callback(); //execute passed function when it's done
}

fillTree(function(){
    checkSelectedBoxes(); //executes only when fillTree finishes
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T10:18:00.393

> 它是我正在使用的 CMS，并且树设置在其他一些 js 文件中，我不会干扰它，因为它使用了许多其他功能，并且情况可能并不总是相同

如果`fillTree()`无法修改函数，您可以将其包装在您自己的函数中并对其应用回调函数。尝试这个：

```
function doStuff(callback) {
    fillTree();

    // Call the callback parameter (checkSelectedBoxes() in this case)
    // when fillTree() has completed
    callback();
}

doStuff(checkSelectedBoxes); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-17T22:36:50.360

该`setTimeout`函数不等待执行，您可以在以下代码段中清楚地检查它。您可以看到，在给定`waitTimes`随机时间数组的情况下，该`Array.map`函数将首先打印出所有`time[index]=waitTimes[index]`值，然后`wait[index]=waitTimes[index]`在毫秒`setTimeout`后准确地触发。`waitTimes[index]`

```
var console = {
  log: function(s) {
    document.getElementById("console").innerHTML += s + "<br/>"
  }
}
var roundDecimals = function(num, pos) {
  pos = pos || 4;
  return (Math.round(num * Math.pow(10, pos)) / Math.pow(10, pos));
}
var arrayRangeMap = function(a, block) {
  c = [];
  while (a--) c[a] = block();
  return c
};
var getRandomArbitrary = function(min, max) {
    return (Math.random() * (max - min) + min);
  }
  // random 10 wait times, 3 decimal positions
var waitTimes = arrayRangeMap(10, function() {
  return roundDecimals(getRandomArbitrary(0.250, 0.5, 3) * 1000, 2);
});

waitTimes.map(function(item, index) {
  setTimeout(function() {
    console.log("wait[" + index + "]=" + item);
  }, item);
  console.log("time[" + index + "]=" + item);
});
```

```
<div id="console" />
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-15T05:05:47.910

我刚刚做了一个可能感兴趣的测试：

```
<!DOCTYPE html>
<html>
  <head>
    <script>

/* test: if returns in around 1000ms, must interrupt, otherwise it is indeed
   not going to let timeout work until work is done. */    
window.onload = function() {
    var before = performance.now();
    setTimeout(function() {
        alert('completed in ~' + (performance.now() - before) + ' nanoseconds.');
    }, 1000);

    /* count to 2^31 - 1... takes 8 seconds on my computer */
    for (var i = 0; i < 0xffffffff; ++i) {
        /* me busy, leave me alone */ 
    }
};      
    </script>
  </head>
  <body>
  </body>
</html> 
```

我现在真的很好奇 JavaScript 是如何知道何时经过的。它会产生一个休眠一段时间的线程吗？如果是这样，有多少线程睡眠有限制，或者睡眠线程是否“存储”直到需要它们？很困惑。

我认为这与

> “如果它不需要正好是 1s，那么就睡一秒钟。usleep 和 sleep 使当前线程进入一个有效的等待状态，至少是你请求的时间量（然后它就有资格再次被调度）。
> 
> 如果您不想接近准确时间，则无需检查clock()。”

-- [pthread休眠功能，cpu消耗](https://stackoverflow.com/questions/7830243/pthread-sleep-function-cpu-consumption)

所以我猜操作系统为你做了调度，此时它会中断引擎，引擎停止世界并将超时功能放在队列顶部以尽快执行？

# java - Groovy 可以复制类签名但修改实现吗

> ID：10258013
> 
> 赞同：5
> 
> 时间：2012-04-21T10:10:18.783
> 
> 标签：java, groovy, abstract-syntax-tree

我想完全复制一个 groovy 脚本的接口，但将所有方法转发给一个方法，如 invokeMethod 或 methodMissing。

这与[我在这里的另一个问题](https://stackoverflow.com/questions/10205496/how-can-i-intercept-a-call-from-java-to-groovy-or-simulate-this-easily)有关（但我放弃了“容易”部分），这解释了为什么我实际上不能使用 invokeMethod 或 ProxyMetaClass——简而言之，因为我的方法是从 java 调用的，而没有 groovy grooviness 适用于该调用。

所以我一直试图复制类签名并将调用转发到原始类。

这可能涉及 AST 转换，但我仍在尝试围绕这些进行思考，任何使用 AST 执行此类操作的示例（或任何其他想法）都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:37:40.860

[通过在GroovyShell](http://groovy.codehaus.org/api/groovy/lang/GroovyShell.html)的上下文中执行定义明确的用例，您可以让所有的*grooviness工作*

# entity-framework-4 - 实体框架中的延迟加载问题

> ID：10258014
> 
> 赞同：1
> 
> 时间：2012-04-21T10:10:23.293
> 
> 标签：entity-framework-4, lazy-loading

我启用了延迟加载的上下文中有两个实体。我正在使用 POCO。当我加载第一个时，相关实体不会显示，直到我加载第二个并导航它的实体。更具体地说，我将货币（标记为虚拟）作为 CashAccount 上的相关实体，它从 Account 以及 SuspenseAccount 继承，它也从 Account 继承。当我加载 SuspenseAccount 时，货币为空。但是，如果我加载 CashAccount 并使用它的 Currency 属性，那么 SuspenseAccount 的 Currency 就会被正确加载。任何有想法的人为什么会这样以及如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:07:17.103

我发现了问题所在！SuspenseAccount 类没有公共构造函数（它唯一的构造函数被标记为内部）。显然，这阻止了 POCO LazyLoading 逻辑的启动，并且在访问另一个实体的关系后修复了关系，因为两者的相关实体相同。

# php - CakePHP 2.1 中所有错误的自定义布局

> ID：10258022
> 
> 赞同：1
> 
> 时间：2012-04-21T10:11:29.647
> 
> 标签：php, cakephp

如何为 CakePHP 2.1 中的错误使用自定义布局？

我浏览了文档并看到了自定义处理程序等的各种提及，但没有选择要使用的布局......有什么想法吗？

在像 1.3 之前的 CakePHP 版本中，您可以创建一个 AppError 类，但这将不再起作用，因为 CakeError 现在已被贬低，并且根据新应用程序的文档，做任何类似的事情都会受到蔑视。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:59:17.393

您可以在 beforeRender() 函数中更改布局，如下所示：-

```
public function beforeRender(){
  if($this->name == 'CakeError'){
      $this->layout = 'error';
   }        
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T23:04:29.400

这就是我在 CakePHP 2.2.2 中所做的：我更改了 core.php 中的异常渲染器并扩展了 ExceptionRenderer，其中 MyExceptionRenderer 仅覆盖了父方法之一。该发行版已经包含文件 app/View/Layouts/error.ctp，所以我只是对其进行了一些编辑。

我还注意到 CakeError 已被弃用，所以这对我有用。

应用程序/配置/core.php：

```
Configure::write('Exception', array(
  'handler' => 'ErrorHandler::handleException',
  'renderer' => 'MyExceptionRenderer',
  'log' => true
)); 
```

应用程序/Lib/错误/MyExceptionRenderer.php：

```
App::uses('ExceptionRenderer', 'Error');

class MyExceptionRenderer extends ExceptionRenderer {

  protected function _outputMessage($template) {
    $this->controller->layout = 'error';
    parent::_outputMessage($template);
  }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T10:24:40.940

在 core.php 中，我将错误处理程序和异常处理程序切换为自定义处理程序：

```
App::uses('MyErrorHandler', 'Tools.Error');
Configure::write('Error', array(
    'handler' => 'MyErrorHandler::handleError',
    'level' => E_ALL & ~E_DEPRECATED & ~E_STRICT,
    'trace' => true
));

Configure::write('Exception', array(
    'handler' => 'MyErrorHandler::handleException',
    'renderer' => 'Tools.MyExceptionRenderer',
    'log' => true
)); 
```

那么你应该把你的类放进去`Lib/Error/`（不管是插件还是不）

示例：[https ://github.com/dereuromark/tools/tree/2.0/Lib/Error](https://github.com/dereuromark/tools/tree/2.0/Lib/Error)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-09T02:22:39.863

写吧

```
$this->layout = 'my_error' 
```

在您的 error400.ctp 和 error500.ctp 文件中

在你的 View/Errors/404.ctp View/Errors/500.ctp

像这样

```
<?php $this->layout = 'my_error' ?>
<!doctype html>
<html>
<head>
</head>
<body>
</body>
</html> 
```

@faferuziel / @fetruzie 最好的问候

# mysql - 使用 mysqldump

> ID：10258024
> 
> 赞同：0
> 
> 时间：2012-04-21T10:12:04.337
> 
> 标签：mysql, mysqldump

我有一个用 html、jsp 在 eclipse 中编写的网站，使用 apache tomcat 和 mysql 5.5 作为用户数据库。
我需要这个学校项目将数据库导出到 XML 文件中。我在用着：

> mysqldump a1 成员 -u root -p12345678 --xml > c:\Project\MysqlToXML.xml

它工作正常。唯一的问题是，每当我需要使用 mysqldump 导出到 XML 时，我都需要“离开”网站并将代码放入终端。

我需要一种在网站内使用此命令的方法。喜欢按下一个按钮，它将执行命令并将其导出为 XML 文件。
现在如果在我使用的网站中将命令插入 mysql 很重​​要

> db.insertUpdateDelete(~sql 语句~);

谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T10:31:21.393

您必须能够从您的一个 jsp 文件中运行 mysqldump 程序。我不知道您的项目是如何构建的，所以我将提出一个不太好的但简单的解决方案。

创建一个运行 mysqldump 程序的 backup.jsp 文件。[您可以在此处](https://stackoverflow.com/questions/4283168/how-can-i-backup-a-mysql-database-from-java)或[此处](http://obscuredclarity.blogspot.com.ar/2011/07/executing-mysqldump-from-java-and.html)阅读并查看有关此的代码示例。

然后，从你的一个jsp 的html 文件中创建一个链接() 到backup.jsp 文件。

我希望这仅用于维护，没有最终用户可以访问它，因为根据数据库大小可能需要一些时间。

# java - 在这种情况下使用 Java 集合

> ID：10258026
> 
> 赞同：1
> 
> 时间：2012-04-21T10:12:13.217
> 
> 标签：java

我正在编写一个从 Web 服务下载文件的应用程序。

文件下载方式描述如下：

1.  从 Web 服务下载文件列表。如果文件数量太大，则下载第一组文件，每组的最大数量未知。下载的文件保存在系统临时目录中。
2.  对于每个文件，构造一个 FileDescriptor（自定义）类，其​​中包含系统临时文件夹中的文件文件名和临时文件名以及其他一些属性。b FileDescriptor 保存在列表中。
3.  在这里做一些业务逻辑。
4.  下载下一组文件（如果有）。

我用来保存 FileDescriptor 列表的集合是 LinkedList。但是，对于每组文件，我将创建一个全新的 LinkedList 来保存它们的 FileDescriptor。伪代码类似于：

```
do {
   List<FileDescriptor> list = new LinkedList<FileDescriptor>();
   GroupOfFiles group = webService.getGroupOfFiles();
   Iterator<File> itr = group.iterator();
   while(itr.hasNext) {
       list.add(new(FileDescriptor(itr.next()));
   }

   <My Business Logic here>

} while(group.hasMoreGroups()); 
```

可以看出，每次检索到一组新文件时，我都会创建一个新的 LinkedList。处理完这组文件后，不再需要LinkedList。我无法创建一个列表并重复使用它，因为每个组可以包含的最大数量是未知的。

如果我使用这样的代码并且有数百万个文件，例如每个组最多只能有 1000 个文件，它将最终得到很多 LinkedList（及其元素）作为垃圾。这是好事吗？我相信在这种情况下会有更好的方法来处理它。

请发表你的意见。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T10:46:18.190

与下载数百万个文件相比，创建 1000 个 LinkedList 对象（并对其进行垃圾收集）的成本可以忽略不计。我们在这里谈论的是 1 毫秒与小时。几米与从地球到月球的距离。

您正在预优化，并且通常在预优化时的情况下，您在错误的地方进行。

也就是说，列表是一个动态大小的数据结构，您不需要知道它的最大大小就可以重用它。它将动态增长：

```
List<FileDescriptor> list = new LinkedList<FileDescriptor>();
do {
    list.clear(); // remove everything from the list
    ...
}
while (...); 
```

# android - 基于 Android GPS 的应用卫星图标不显示

> ID：10258035
> 
> 赞同：1
> 
> 时间：2012-04-21T10:13:25.030
> 
> 标签：android, gps, icons, satellite

我做了一个基于 GPS 的应用程序，除了一个小错误外，它运行良好。我在主屏幕上使用 TAB。在我使用 TAB 之前，GPS/LocationListener/ 工作时显示的卫星图标。在我使用 TabHost/TabView 重新设计 GUI 并且从不在屏幕顶部显示卫星图标后，电池状态和时间也不会显示。仅显示应用程序标题。我的问题是当 GPS 工作时我需要做什么来显示卫星图标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T10:51:43.480

检查`WindowManager.LayoutParams.FLAG_FULLSCREEN`并`Window.FEATURE_NO_TITLE`标记标签活动中的使用情况。我想你已经设置了它们。

# facebook - 脸书帖子链接（通过 )

> ID：10258049
> 
> 赞同：0
> 
> 时间：2012-04-21T10:15:19.293
> 
> 标签：facebook, api, post

当我们使用 APP ID 在 facebook 上发帖时，应用程序名称出现在链接到应用程序页面的帖子下方。我需要将其链接到我的网站。我发现了这个：postplanner.com/schedule-facebook-posts-brand-app。它是一项付费服务​​。我可以自己做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:06:52.170

如果您的应用程序有一个画布实现（apps.facebook.com/yourapp），那是链接所在的位置，如果没有，它将转到您的网站

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T12:42:25.680

我认为这可能有用：

1.  首先创建您的 Facebook 应用程序
2.  在 facebook 应用程序中输入重定向 Uri（如果有）。
3.  将此网址包含在您想通过新闻源中的应用名称发布的任何位置 [https://www.facebook.com/dialog/feed?app_id=](https://www.facebook.com/dialog/feed?app_id=) "APP_ID"&redirect_uri="Redirect URI"

或查看此链接以获得进一步说明

[http://www.hongkiat.com/blog/customize-facebook-status/](http://www.hongkiat.com/blog/customize-facebook-status/)

# ios - 在文本字段之间拖动文本，如 ios 5 的邮件应用程序

> ID：10258050
> 
> 赞同：1
> 
> 时间：2012-04-21T10:15:26.993
> 
> 标签：ios, uitextfield, drawable

我想在 ios5 的邮件应用程序等文本字段之间实现拖动文本。

这是我想要实现的视频链接和图像。视频链接。（仅在 2:49 分钟观察）。 [http://www.youtube.com/watch?v=-JURDFe2PNE&feature=b-vrec](http://www.youtube.com/watch?v=-JURDFe2PNE&feature=b-vrec)

图片：

![在此处输入图像描述](../Images/7018df9d52c050914ff595723dd46bb0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T11:24:54.017

将其分为三个任务：

1.  将您想要的数据包含在适当的基于 UIView 的类/子类中
2.  处理相关的触摸事件以启动和结束拖放
3.  动画源和目的地之间的移动

您可以一次实现这些，以便精确地开发您需要的拖放功能。

您不需要将视图转换为图像，因为 UIView 子类可以通过 Core Animation 进行动画处理。[这个 SO 帖子](https://stackoverflow.com/questions/4707858/basic-drag-and-drop-in-ios)有更多关于处理触摸事件的信息。

祝你好运！

# java - 对类属性的部分访问

> ID：10258053
> 
> 赞同：1
> 
> 时间：2012-04-21T10:15:50.197
> 
> 标签：java, class, design-patterns, attributes

考虑 3 个类：

*   数据*   机械手1*   机械手2

    数据类有一些属性：a,b,c

    我正在寻找一种设计模式，因此*Manipulator1*只能对**a**和**b**进行读写访问，而*Manipulator2*只能更改**b**和**c**。

    有任何想法吗？

    我正在用Java BTW编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T10:18:59.073

它可以看作是[代理模式](https://en.wikipedia.org/wiki/Proxy_pattern)的一个应用案例，代理控制对数据对象的访问。

就个人而言，我认为将操纵器编程为仅访问相关字段就足够了，但是如果出于对恶意客户端或类似情况的恐惧而必须对数据进行访问限制，那么代理是正确的做法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T10:28:57.347

您可以让 Data 类实现两个不同的接口，并让 Manipulator 类每个只知道其中一个。

您可能还想看看[Interface Segregation Principle](http://en.wikipedia.org/wiki/Interface_segregation_principle)。

# git - 将先前合并的代码分离到多个 git 存储库中

> ID：10258054
> 
> 赞同：2
> 
> 时间：2012-04-21T10:16:11.797
> 
> 标签：git, git-filter-branch

这个问题听起来与这里提出的许多问题相似，但令人讨厌的不同。

我有一个 git 存储库，它曾经是 svn 存储库（曾经是 cvs 存储库）。这包含可追溯到 1999 年左右的数据。

是时候将这个存储库拆分为几个不同的存储库了，以保留所有这些丰富的历史。但是，存储库的结构经常发生变化。当前所有的项目都来自一个基础项目，这个基础项目增长到几个项目，然后缩小到两个项目，然后再次增长。代码已被移动，但从未重复；它现在已经在几个成熟的项目之一中找到了最后的安息之地。

如果我想保留历史记录，这使得拆分存储库变得非常困难。使用 git-filter-branch 似乎是正确的方法，但所有这些似乎都破解了存储库的一部分并用它们截断了历史记录。

**编辑添加**为了澄清，这是一个小例子，假装我在存储库的根目录中。假设存储库如下所示：

```
foo/
    bar/
        file.txt
    baz/ 
```

现在假设我编辑`file.txt`. 然后我将其重命名为`newfile.txt`. 然后我再次编辑内容。然后我将此文件移出`bar/`和移入`baz/`. 我的存储库现在看起来像这样：

```
foo/
    bar/
    baz/
        newfile.txt 
```

好的，现在假设我想拆分`baz/`到它自己的存储库中。使用 git filter-branch 或使用 git subtree split 将丢失所有提交消息和历史记录，以便`newfile.txt`在它位于内部`bar/`和命名时返回`file.txt`。

我知道查看历史版本可能很疯狂；它可能引用了一个叫做的东西，`../bar/`或者它可能引用了一个不存在的无效目录并严重失败。我不在乎，只要我可以查看任何特定修订版的文件内容即可。

**结束编辑**

我想做的事情似乎有两条路径：

1.  克隆存储库 N 次，在该存储库中保留我想要的文件夹（通过 git rm-ing 其他文件夹），并以某种方式破解任何最终不会引用 HEAD 中文件的修订。我意识到这会产生一些负面影响，因为检查旧版本不会提供有意义的代码库——我不在乎。为了做到这一点，我需要找到一种方法来获取来自 HEAD 中存在的所有文件的所有路径，我可以使用丑陋的脚本来做到这一点。

2.  为每个索引期间存储库的样子构建某种历史索引。使用树过滤器并删除在其各自版本中不匹配的文件。然后，删除 HEAD 中未出现或源自文件的文件。

是否可以找到所有未出现在 HEAD 中的文件并删除与它们相关的任何历史记录？我不关心恢复已被长期删除的文件，这似乎是我问题的症结所在。

替代解决方案也将受到赞赏。我对 git 比较陌生，所以我可能遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T21:47:36.287

我最终不得不在几个阶段的过程中做到这一点。

首先，我得到了在存储库中找到的所有文件路径的列表：

```
git log --pretty=format: --name-only --diff-filter=A | sort -u 
```

使用它，我能够确定我想要保留的文件曾经驻留在某个位置。就我而言，它们在其整个生命周期中都驻留在存储库中的四个独立目录中。我使用这些信息手动创建了一个正则表达式，例如`(?:^foo|^bar/baz|^qux/(?:moo|woof))`. 这与我想保留的目录相匹配。

然后我创建了一个 perl 脚本来保存这些路径名和包含它们的任何父路径名。

```
use Path::Class;    
if(scalar(@ARGV) < 1) { die "no regex"; }

my $regex = qr/$ARGV[0]/;    
my @want; my @remove; my $last = undef; my $lastrm = undef;

while(<STDIN>) {
    chomp;
    my $d = $_;
    if( $d =~ $regex ) {
        if( ! defined($last) || ! dir($last)->subsumes(dir($d)) ) {
            $last = $d;
            push @want, $d;
        }
    } else {
        if( ! defined($last) || ! dir($last)->subsumes(dir($d)) ) {
           push @remove, $d;
        }
    }
}
foreach $rm (@remove) {
    my $no_rm = 0;
    if( defined($lastrm) && dir($lastrm)->subsumes($rm) ) {
        $no_rm++;
    } else {
        foreach $keep (@want) {
            if( dir($rm)->subsumes(dir($keep)) ) {
                $no_rm++;
            }
        }
    }
    if( $no_rm == 0 ) {
        print "$rm\n";
        $lastrm = $rm;
    }
} 
```

最后，我使用 git filter-branch 将我的新过滤器与我的正则表达式一起使用来保留我想要的路径。

```
git filter-branch --prune-empty --index filter '
    git ls-tree -d -r -t --name-only --full-tree $GIT_COMMIT 
    | sort | /path/to/filter.pl "(?:regex|of|paths)" 
    | xargs -n 50 git rm -rf --cached --ignore-unmatch' -- --all 
```

排序是必要的，因为它可以确保 perl 脚本以正确的层次结构获取目录。

我希望这对某人有所帮助，因为我花了很多很多时间才想出这个。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T13:25:15.670

您应该考虑安装和使用 git subtree [https://github.com/apenwarr/git-subtree](https://github.com/apenwarr/git-subtree)它可以很好地处理拆分存储库和保存历史记录。

# mapping - 需要学说2映射

> ID：10258064
> 
> 赞同：0
> 
> 时间：2012-04-21T10:17:44.493
> 
> 标签：mapping, doctrine-orm

我是学说 2 的新手。我想知道学说 2 需要哪种映射？我使用所有列、方法等创建我的**注释图。**

我需要知道需要为学说 2 中的任何类型的功能定义**XML**或**YAML**映射，而没有它们我没有哪些功能？

[http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/basic-mapping.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/basic-mapping.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T13:59:55.093

您只需要使用一种类型的映射，并且您已经使用注释方法完成了此操作。这也是我收集到的首选方法。

其他映射方法只是让您按照自己喜欢的方式工作。因此，如果您希望在模型源代码之外定义架构。您可以使用 XML 或 YAML。很多 Symfony 人使用 YAML，因为它是框架配置的。我个人更喜欢注解方式。

# java - 类对象与哈希图

> ID：10258071
> 
> 赞同：30
> 
> 时间：2012-04-21T10:19:10.480
> 
> 标签：java, class, object, hashmap

用hashmap代替对象类好不好…… 用hashmap....

```
Map<String, String> cellMap = new HashMap<String, String>();
int j = 0;
while (cellIter.hasNext()) 
{
   HSSFCell myCell = (HSSFCell) cellIter.next();
   cellMap.put(columnMap[j], myCell.toString());
   j++;
} 
```

并使用对象类.....

```
ABC abc= new ABC(); 
abc.setA(myRow.getCell(0).toString());
abc.setB(myRow.getCell(1).toString());
abc.setC(myRow.getCell(2).toString()); 
```

请在应用程序运行状况、内存要求等方面告诉我...

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-21T10:30:33.357

这在很大程度上取决于您要实现的目标：为了灵活性，哈希映射更好。但灵活性是有代价的：哈希映射也比具有相同数量的强类型字段的类更大且更慢。

*   哈希映射比具有相同数量字段的类具有更大的内存占用
*   哈希映射强制对基元进行装箱
*   哈希映射的创建和访问速度较慢

对可读性也有影响：当您的业务逻辑特定于具有固定数量字段的类时，专用类显然会胜出；当动态配置字段时，哈希表是您唯一的选择。您还可以进行混合设计，当对象在内部使用哈希映射进行存储时，在外部呈现命名良好的字段，并公开语义以随时添加更多“字段”。

总而言之，在您决定使用哈希映射以实现其灵活性之前，您应该确定您是否真的需要设计中的所有灵活性。有时，答案是“是”，有时是“否”；对此没有“一刀切”的解决方案。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-21T10:31:15.690

一个对象有字段（数据）和方法（行为）。如果您的数据包含在一组固定的单元格（A、B 和 C）中，那么一定要使用对象。

Java 是一个 OO 对象，OO 设计、封装等可以帮助您构建健壮、可维护和快速的程序。

当您必须关联可变数量的键和值时，映射很有用。但它只是一种数据结构，不允许您封装额外的行为。

例如，您的对象中可能有一个 getAAndB() 方法，它返回与 B 连接的 A。或者您可能有转换或查询字段的方法。或者您可以将 ABC 实例传递给使用它们的其他对象。使用具有明确定义的方法的对象 ABD 比使用`Map<String, String>`. 地图的键是什么？他们的价值观是什么？它记录在哪里？如果您想更改密钥怎么办？您将如何检测代码中使用这些键的所有位置？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-21T10:29:52.820

您应该将其视为性能之前的“设计”问题。无需提前进行过早优化以支持良好的设计。所以，问题是：**“你需要通过一个中间集合来填充你的域对象 ABC 吗？”** 在大多数情况下，我不会这样做，但如果不了解更大的背景，很难说明确的**是**或明确的**不。**

**更新：** 30-40K：记录数与 Object 与 HashMap 比较无关，因为它们将在循环中处理（免责声明：与设计无关，与性能无关）。但是，电子表格中的列数很重要，因为这将直接反映为对象中的属性数。

如果这只是一个**数据迁移**或**数据传输**练习，那么我会使用 HashMap 方法。假设 ABC 将是一个没有行为的短命、一次性的数据容器对象，则无需创建它。然后我会测试系统的性能，如果它不满足验收标准，那么我会对其进行分析并仅在必要时对其进行优化。

# javascript - Jquery No Conflict - Onclick 函数 - 多个框架

> ID：10258072
> 
> 赞同：1
> 
> 时间：2012-04-21T10:19:14.087
> 
> 标签：javascript, jquery, function, onclick, mootools

我有多个 JS 框架正在运行，其中一些`onClick="changeText()"`只是更改元素文本的内容。在我的脚本中，我有

```
jQuery(document).ready(function($){
     function changeText(){
         $('#test').text('Hello World!');
     }
}); 
```

我相信这个`Jquery.ready`功能会把它全部扔掉。在我的调试器中，它告诉我它找不到我的`changeText()`函数，脚本是 100% 加载的（我可以通过 view:source -> js 链接查看）。此外，如果它有所作为，我正在运行 Joomla 1.5，并将 Mootools 作为我的另一个框架加载。

我也知道这些函数是 100% 正确的，因为我可以在没有 Jquery.ready 函数的标准 html 页面中正常运行它们。

有没有办法指定从哪个文件调用它或围绕这个“hacky”方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T10:27:22.970

你可以包装`jQuery`一个函数。顺便说一句，`$`它只是一个别名，`jQuery`它是 jQuery 的实际命名空间。总而言之，它看起来像这样：

```
(function($){
   $(function(){

       //do regular jQuery as needed

       function changeText(){                //your function
           $('#test').text('Hello World!');
       }

       $('element').on('click',function(){   //onclick handler
           changeText();
       });

   });
}(jQuery)); 
```

* * *

正如@ThiefMaster 评论的那样，您已经使用`jQuery`并提供了`$`，因此您可以丢弃我的包装。

并添加内联事件，例如`<button onclick="doSomething()">`仅触发全局命名空间上的事件。一旦将函数包装在 jQuery 中，它就不再是全局命名空间的一部分。最好从包装的代码中使用 JS 附加事件处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T10:22:57.667

从[文档](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)中，

```
var $j = jQuery.noConflict(); 
```

在您的 jquery 脚本标记之后立即将 jQuery 变量更改为 $j

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T10:45:35.583

最好的选择是根本不使用内联事件 -`$('selector').on('click', function() { ... })`改为使用。

If you cannot do that for some reason, you can still use inline events. However, since you are defining your functions inside another function, you need to make them global. You do so by adding them to the `window` object which is the *global object* in a browser environment:

```
window.changeText = function() {
    // ...
}; 
```

# wordpress - WordPress论文主题 - 钩在帖子下方

> ID：10258073
> 
> 赞同：0
> 
> 时间：2012-04-21T10:19:15.147
> 
> 标签：wordpress, wordpress-thesis-theme

我需要一些关于论文主题的帮助，我为带有自定义内容的单个帖子制作了一个简单的钩子，我希望钩子在帖子之后，但在帖子之后有一个像 facebook 等插件......我的钩子在下面. 如何在不禁用此插件的情况下使我的钩子在发布后立即生效？

*我已经尝试了所有可能的组合 thesis_hook_after_post、thesis_hook_after_post_box 等，但它不起作用

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T10:32:57.850

更改[add_action中的优先级值](http://codex.wordpress.org/Function_Reference/add_action)

```
add_action( $tag, $function_to_add, $priority, $accepted_args ); 
```

> （int）（可选）用于指定与特定操作关联的函数的执行顺序。**较低的数字对应于较早的执行**，具有相同优先级的函数按照它们添加到操作的顺序执行。默认值：10

编辑：-

```
 function post_article111() { 
   if (is_single( )) {  
    echo "content goes here.."; 
    }
 } 

add_action('thesis_hook_after_post_box', 'post_article111','5'); 
```

# java - 什么是对等路由算法

> ID：10258074
> 
> 赞同：0
> 
> 时间：2012-04-21T10:19:25.140
> 
> 标签：java, algorithm, routing, p2p

在多次尝试使用 JXTA api 失败后，我决定推出自己的点对点 api。我是java网络编程的新手。我现在最大的障碍是如何让网络或互联网中的每个对等点相互检测。我认为这就是 P2P 路由算法的功能，是否有现有的 P2P 路由算法 api 可供使用，有人可以告诉我 CHORD、CAN、PASTRY 等中最好的算法，以及我如何使用它的分布式哈希表来启用每个对等点检测同一 LAN、WLAN 和/或 Internet 上的其他对等方。谢谢。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T10:52:23.207

我认为您需要一个集中式基础架构，其中当前的客户端列表会定期更新。下载列表后，客户端可以在没有主机的情况下自动更新列表。

# c# - 向 Silverlight 图表添加数据时出错？

> ID：10258075
> 
> 赞同：0
> 
> 时间：2012-04-21T10:19:51.793
> 
> 标签：c#, silverlight, azure, wcf-ria-services

我试图将值添加到 silverlight 折线图。为此，我创建了一个折线图，然后使用 wcf ria 服务添加该图表中的数据。

一切正常，但是当我尝试运行我的网站时，它会在图表中加载一些虚拟数据。我的 windows azure sql 表中没有这样的数据。它访问 azure sql 表并且工作正常，但我的数据库中的值不同。

为了显示从 azure 应用程序访问数据库，我使用了 ado.net 实体模型并创建了一个 **waterinfodomain**，我使用了此代码和其他折线图的类似代码。

我用了 ：

```
 private GetTemprature()
            {
                //shows and gives garden uses from sql table
                context = new WaterDomainContext();
                context.FarmTemps.Clear();
                var query = context.GetFarmTempsQuery();
                LoadTemp = context.Load<FarmTemp>(query);
                LoadTemp.Completed += new EventHandler(LoadTemp_Completed);
            }

            private void LoadTemp_Completed(object sender, EventArgs e)
            {
                //Draw values from a table for Performance
                List<Temprature> tmp = new List<Temprature>();
                if (LoadTemp.Entities != null || LoadTemp.Entities.Count() > 0)
                {
                    foreach (FarmTemp item in LoadTemp.Entities)
                    {
                        tmp.Add(new Temprature()
                        {
                            Temp = (float)(item.Temp),
                            Date = Convert.ToDateTime(item.ODate)
                        });
                    }
                }
                LineSeries tmpv = FarmCondtion.Series[0] as LineSeries;
                tmpv.ItemsSource = tmp;

            } 
```

我已经添加了我在这里得到的图表的快照：http: [//i.imgur.com/bZkxZ.png](http://i.imgur.com/bZkxZ.png)

现在您可以看到日期不是按常规顺序排列的[这些也不是我数据库中的日期]，并且只显示点而不是线。但是我的数据库确实只有过去 7 天的常规日期值和其他值。

为什么会这样

请告诉我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T14:14:57.640

我的第一个赌注是问题出在**Convert.ToDateTime**方法上。我想**item.ODate**是您要转换为 DateTime 的字符串。

通过传递正确的文化转换为 DateTime 会更安全。例如，2012 年 10 月 1 日在 en-US 中与在 nl-BE 中不同。这就是为什么始终指定要从哪种文化中转换字符串很重要的原因（参考：http: [//msdn.microsoft.com/en-us/library/9xk1h71t.aspx](http://msdn.microsoft.com/en-us/library/9xk1h71t.aspx)）。

现在另一方面。为什么您希望以正确的顺序查看日期？我没有看到任何根据日期对项目进行排序的代码。你在后台做这个吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:25:06.040

您提到相同的数据在一个图表中运行良好，但在另一个图表中却不行。这两个图表有什么区别吗？我认为问题出在客户端，因为您已经验证数据库和图表之一中的数据都很好。所以现在请关注客户端，检查您如何配置图表的数据源。顺便说一句，据我从屏幕截图中可以看出，日期是有序的。它从 2011 年 11 月 1 日开始，到 2011 年 12 月 1 日，然后是 2012 年 1 月 1 日，一直到 2012 年 10 月 1 日。图表有点小，所以标签显示在两条线上。请不要先读第一行，再读第二行。相反，从左到右一起阅读这两行。就像是：

```
1   3   5
  2    4   6 
```

如果您的意思是日期不应该在未来，那么请检查您是否有任何可能更改日期的代码。

最好的祝福，

明旭。

# javascript - 带有全局变量的 IE 错误。如何绕过这个错误？

> ID：10258076
> 
> 赞同：2
> 
> 时间：2012-04-21T10:19:52.800
> 
> 标签：javascript, jquery, internet-explorer

正如标题所说，我对 IE8 和 Javascript 有一些问题。众所周知，它在解释全局变量方面存在错误：如果您不声明为，它就不会得到它们：

```
var variable1 = something; 
```

问题是我正在尝试制作一个脚本来更改单击按钮的主体背景，并且我需要一个包含实际状态的全局变量（我正在加载的 bg-x.png）。该脚本适用于 FF、Safari 和 Chrome，但显然不适用于 IE。帮助？（问题出在变量“状态”上）

```
$('#change').click(function() {
    var numStates = 2;
    var name = $(this).text();

    if(!(status)) {
        status = parseInt(1,10);
    }

    if(status<numStates) {
        status = parseInt(status,10) + 1;
    }
    else {
     status = parseInt(1,10);
    }

    alert(status);

    var bgvar = null;

    switch(parseInt(status,10)) {
        case 1: var bgvar = ' #7097ab url(./img/bg-' + status + '.png) top center repeat';
        var name = 'Pattern';
        break;
        case 2: var bgvar = ' #7097ab url(./img/bg-' + status + '.png) top center repeat-x';
        var name = 'Sfumato';
        break;
        default: alert('Default');
    }

    $('body').css({
        background:bgvar,
    });

    $(this).text(name);

}
); 
```

即使使用 IE 也能工作代码（感谢 Zeta）：

```
$('#change').click(function() {
   var numStates = 2;
   var name = $(this).text();

// If data-status isn't defined set it to the initial value
if($('body').data('status') === undefined)
    $('body').data('status',1);

// Extract the status
var status = parseInt($('body').data('status'),10);

// Handle the status
if(status < numStates)
    status++;
else
    status = 1;

// Save the status
$('body').data('status',status);

    switch(status) {
        case 1: bgvar = ' #7097ab url(./img/bg-' + status + '.png) top center repeat';
        name = 'Pattern';
        break;
        case 2: bgvar = ' #7097ab url(./img/bg-' + status + '.png) top center repeat-x';
        name = 'Sfumato';
        break;
        default: alert('Default');
    }

    $('body').css({
        background:bgvar,
    });

    $(this).text(name);

}
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T10:30:43.597

status 是 window-object 的预定义成员，指向状态栏的内容。使用另一个变量名

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T10:27:14.207

由于您已经在使用 jQuery，您可以使用[`.data()`](http://api.jquery.com/data/)而不是全局变量：

```
$('#change').click(function() {
    var numStates = 2;
    var name = $(this).text();

    // If data-status isn't defined set it to the initial value
    if($('body').data('status') === undefined)
        $('body').data('status',1);

    // Extract the status
    var status = parseInt($('body').data('status'),10);

    // Handle the status
    if(status < numStates)
        status++;
    else
        status = 1;

    // Save the status
    $('body').data('status',status);

    /* ... Rest of your code ... */ 
```

请注意，这在 IE 中的 XML 文档中不起作用（根据 jQuery 文档）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T10:35:06.407

你知道什么时候使用»var«吗？我刚刚通过以下方式清理了您的代码：

1.  添加“变量状态；” 使其成为局部变量
2.  删除 switch 语句中已定义变量的“var”
3.  删除“background:bgvar”后面不必要的逗号，会导致IE报错

    ```
    $('#change').click(function () {
            var numStates = 2;
            var name = $(this).text();
            var status;

            if (!(status)) {
                    status = parseInt(1, 10);
            }

            if (status < numStates) {
                    status = parseInt(status, 10) + 1;
            } else {
                    status = parseInt(1, 10);
            }

            alert(status);

            var bgvar = null;

            switch (parseInt(status, 10)) {
            case 1:
                    bgvar = ' #7097ab url(./img/bg-' + status + '.png) top center repeat';
                    name = 'Pattern';
                    break;
            case 2:
                    bgvar = ' #7097ab url(./img/bg-' + status + '.png) top center repeat-x';
                    name = 'Sfumato';
                    break;
            default:
                    alert('Default');
            }

            $('body').css({
                    background: bgvar
            });

            $(this).text(name);

    }); 
    ```

它现在有效吗？

PS 使用[http://www.jshint.com/](http://www.jshint.com/)来防止这些错误。

# haskell - 与预期类型不匹配

> ID：10258081
> 
> 赞同：0
> 
> 时间：2012-04-21T10:20:49.740
> 
> 标签：haskell

如何解决此错误并使我的代码正常工作？

我的数据类型：

```
 data ID x = ID ( ( x, Mark ), [ ID x ] ) 
   data Mark = Marked | Unmarked 
```

显示实例：

```
 instance  Show a  => Show ( ID a )  where

           show t  = go " " t   where 

                  go aP ( ID ( (x, Marked ), z ) ) =

                           aP ++ x ++ "\n" 
```

错误：

```
Couldn't match expected type `[Char]' against inferred type `a'
  `a' is a rigid type variable bound by
      the instance declaration at Dictionary.hs:117:23
  Expected type: ID [Char]
  Inferred type: ID a
In the second argument of `go', namely `t'
In the expression: go "" t
Failed, modules loaded: none. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T10:25:49.997

编辑：

我发现您的意图难以破译，但我想您可能想将树结构表示为字符串？这是一个演示实现，向您展示了它是如何完成的（以一种快速、笨拙的方式。）

```
data ID x = ID ((x, Mark), [ID x]) 
data Mark = Marked | Unmarked

instance Show a => Show (ID a) where
    show (ID ((x, _), ids)) = "Val: " ++ show x ++
                              ", Children: " ++ 
                              (show $ map show ids) 
```

# ios - 内部带有 UIControls 的 iOS 原型单元

> ID：10258082
> 
> 赞同：6
> 
> 时间：2012-04-21T10:20:49.973
> 
> 标签：ios, uitableview, prototype

到目前为止，我只需要实现具有预定义设计（正常、字幕等）的原型单元，这不是问题。

现在我需要实现原型单元，其中包含一些控件，如分段开关、开关或任何其他控件。问题是我无法找出触发的动作是如何实现的，以及它们与控件的关系如何。此外，我还没有找到任何关于如何实现单个 UITableViewController 中的不同原型单元的示例。

我知道这是一个一般性的问题，但我很感激这里的一些指示。也许有人知道一些文档、教程等。好吧，任何帮助都可以，

提前谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-21T11:47:51.743

我也花了一段时间才了解如何使用原型单元。如果要访问原型单元格内的用户界面元素，则必须创建 UITableViewCell 的子类并将其分配给 Interface Builder 中的原型单元格。然后您必须手动定义 IBOutlet 属性，例如：

```
@interface OptionSwitchCell : UITableViewCell
@property (weak, nonatomic) IBOutlet UISwitch* switchControl;
@end 
```

之后，您可以通过从元素拖动控件到助手视图中的属性定义来连接界面元素。IBActions 可以在拥有的 View Controller 中定义。您可以从界面元素控制拖动到 View Controller 头文件并创建操作。在动作实现中，您可能想知道哪个单元格触发了动作。我这样做：

```
@implementation SomeTableViewController

- (IBAction)toggleActivity:(id)sender {
    OptionSwitchCell* cell = (OptionSwitchCell *)[sender superview].superview;
    NSIndexPath *indexPath = [self.tableView indexPathForCell:cell];
    ...
}

@end 
```

寻找相应单元格和索引路径的另一种解决方案（通过 jrturton）：

```
- (IBAction)toggleActivity:(id)sender {
    CGPoint hitPoint = [sender convertPoint:CGPointZero toView:self.tableView]; 
    NSIndexPath *hitIndex = [self.tableView indexPathForRowAtPoint:hitPoint];
    OptionSwitchCell* cell = (OptionSwitchCell *)[self.tableView cellForRowAtIndexPath:hitIndex];
    ...
} 
```

虽然这有点古怪，但到目前为止我还没有找到更好的解决方案。希望有帮助。

# knockout.js - 如何交换 observableArray 中的两个项目？

> ID：10258086
> 
> 赞同：22
> 
> 时间：2012-04-21T10:21:38.390
> 
> 标签：knockout.js

我有一个按钮，可以将一个项目在 observableArray 中向左移动一个位置。我正在按照以下方式进行操作。但是，缺点是 categories()[index] 从数组中删除，因此丢弃了该节点上的任何 DOM 操作（在我的情况下通过 jQuery 验证）。

有没有办法在不使用临时变量的情况下交换两个项目以保留 DOM 节点？

```
 moveUp: function (category) {
        var categories = viewModel.categories;
        var length = categories().length;
        var index = categories.indexOf(category);
        var insertIndex = (index + length - 1) % length;

        categories.splice(index, 1);
        categories.splice(insertIndex, 0, category);
        $categories.trigger("create");
    } 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-17T05:32:07.373

这是我的版本，`moveUp`它一步完成了交换：

```
moveUp: function(category) {
    var i = categories.indexOf(category);
    if (i >= 1) {
        var array = categories();
        categories.splice(i-1, 2, array[i], array[i-1]);
    }
} 
```

但是，这仍然不能解决问题，因为 Knockout 仍会将交换视为删除和添加操作。不过，Knockout有一个[未解决的问题](https://github.com/SteveSanderson/knockout/issues/259)来支持移动项目。*更新：*从 2.2.0 版开始，Knockout 可以识别移动的项目，并且`foreach`绑定不会重新渲染它们。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-11-04T08:59:24.387

我知道这个答案来得有点晚，但我认为它可能对其他想要更通用交换解决方案的人有用。您可以像这样向 observableArrays 添加交换函数：

```
ko.observableArray.fn.swap = function(index1, index2) {
    this.valueWillMutate();

    var temp = this()[index1];
    this()[index1] = this()[index2];
    this()[index2] = temp;

    this.valueHasMutated();
} 
```

然后，您可以使用此函数在给定索引的情况下交换数组中的两个元素：

```
myArray.swap(index1, index2); 
```

对于 moveUp 函数，您可以执行以下操作：

```
moveUp: function(category) {
    var i = categories.indexOf(category);
    if (i > 0) {
        categories.swap(i, i+1);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T07:55:03.260

我有一个类似的问题，因为我想要 jQuery 拖放我的项目。我的解决方案变成使用 knockoutjs 模板将 beforeRemove 和 afterAdd 事件绑定到模型。Person 类/函数也是一个简单的淘汰视图模型。

在下面的示例中，我使用 .draggable()，但您可以轻松使用验证。添加您自己的代码来操作 observableArray，您应该一切顺利。

HTML：

```
<div data-bind="template: {foreach:attendeesToShow, beforeRemove:hideAttendee, afterAdd:showAttendee}">
    <div class="person">
        <img src="person.jpg" alt="" />
        <div  data-bind="text: firstName" ></div>
        <div class="deleteimg" data-bind="click:$parent.removeAttendee" title="Remove"></div>
    </div>
</div> 
```

视图模型：

```
var ViewModel = function () {
    var self = this;
    var at = [new Person('First', 'Person', 'first@example.com'),
                    Person('Second', 'Person', 'second@example.com')
                ];
    self.attendees = ko.observableArray(at);

    self.removeAttendee = function (attendee) {
        self.attendees.remove(attendee);
    };

    this.showAttendee = function (elem) {
        if (elem.nodeType === 1) {
    $(elem).hide().show("slow").draggable();//Add jQuery functionality 
        }
    };
    this.hideAttendee = function (elem) {
        if (elem.nodeType === 1) {
            $(elem).hide(function () {
                $(elem).remove();
            });
        }
    };
};

ko.applyBindings(new ViewModel()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-04T02:02:01.340

感谢[Michael Best](https://stackoverflow.com/users/1287183/michael-best)的 moveup 版本

我的 moveDown 版本

```
moveDown: function(category) {
    var array = categories();
    var i = categories.indexOf(category);
    if (i < arr.length) {
        categories.splice(i, 2, array[i + 1], array[i]);
    }
} 
```

# entity-framework - asp.net mvc实体框架代码先将外键与不同名称关联

> ID：10258088
> 
> 赞同：0
> 
> 时间：2012-04-21T10:22:21.903
> 
> 标签：entity-framework, orm, entity-framework-4.1, foreign-keys

如何在这里将外键与不同的名称相关联：post中的*createdby和 users 表中的**UserID*。

```
public class Post : IValidatableObject
{
    [Key]
    public long PostID { get; set; }

    public long? ParentPostID { get; set; }      

    [ForeignKey("CreatedBy")]  
    public virtual User Users { get; set; }

    [ScaffoldColumn(false)]
    public DateTime? CreatedDate { get; set; }

    [ScaffoldColumn(false)]
    public long? CreatedBy { get; set; }     
}

public class User
{
    [Key]
    public long UserID { get; set; }

    [Required]
    [MaxLength(20)]
    [Display(Name = "User Name")]
    public string UserName { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T11:28:08.223

您的映射是正确的 - 特别是`[ForeignKey("CreatedBy")]`属性，您不需要更改任何内容。

在实体框架中的外键关系中，从属 (= `Post`) 及其外键始终引用主体 (= `User`) 的主键 - 并且主键是`UserID`- 按照惯例，还因为您已使用`Key`属性对其进行了标记。您无需再指定任何内容。

您的关系是可选的（0..1 对多），因为外键`CreatedBy`可以为空 ( `long?`)。因此，数据库中可能存在尚未由任何用户创建的帖子。如果您不希望这样，您可以使用不可为空的外键属性 ( `long CreatedBy`) 来建立所需的关系。

# c# - JCM 的销售点

> ID：10258092
> 
> 赞同：2
> 
> 时间：2012-04-21T10:23:09.570
> 
> 标签：c#, java

我需要为 POS 创建小型应用程序。但我找不到足够的信息=（我有什么：1）现金阅读器 - 日本自动取款机。型号 EB-200-RUS。它连接到comp。通过串行电缆 RS232。

2) 硬币阅读器 - MFT 08V01。连接一样。

我可以在 Java、C#、C++ 上编写软件。但最好是Java））如何使用这些设备？有人可以给我有关 API 文档或示例代码的链接））谢谢！！！

PS 有趣的是，我必须在 COM 端口上写和读什么才能使用它？

# java - 如何在 Java 中获取当前用户的地理位置？

> ID：10258093
> 
> 赞同：2
> 
> 时间：2012-04-21T10:23:13.283
> 
> 标签：java, geolocation

我看到在不同的网络服务中（例如在 Twitter 或 Facebook 上，但也有其他的）他们能够说出用户的地理位置是什么。Java中是否有任何用于这种地理位置的库？

我正在考虑建立一个我们服务，这将取决于用户的地理位置。

请注意，我不是在谈论移动设备上的地理定位，我想获取在他/她的桌面计算机上使用其网络浏览器的用户的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T10:40:29.767

具有 WiFi 定位功能的最大数据库是 Skyhook 无线。您可以从这里获取 SDK：[Skyhook Location SDK](http://skyhookwireless.com/location-technology/)

它没有完全覆盖，但在我看来它是最好的（谷歌和苹果使用它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-03T13:49:28.993

他们正在维护庞大的 IP 数据库，用于根据主机跟踪用户地理位置。

作为个人，不可能维护所有这些主机映射。因此，为此，您必须告别第三方提供商的 IP 表。

但是，如果您愿意，您可以从请求标头中获取位置详细信息，即城市、地区、国家、经度、纬度。

它仅适用于 GAE 用户（IP 表由 google 维护）。

如果您愿意，您可以在 GAE 上托管一个示例应用程序并使用 Web 服务调用从您的服务器获取位置详细信息 (SOA)。特别是我正在为非 GAE 用户说话。

有关更多详细信息，请参阅[GAE 发行说明](https://code.google.com/p/googleappengine/wiki/SdkForJavaReleaseNotes)

```
 country     =   request.getHeader("X-AppEngine-Country"); 
    region      =   request.getHeader("X-AppEngine-Region");
    city        =   request.getHeader("X-AppEngine-City");
    temp        =   request.getHeader("X-AppEngine-CityLatLong"); 
```

# python - scipy.optimize.fmin_bfgs 的正确使用

> ID：10258094
> 
> 赞同：11
> 
> 时间：2012-04-21T10:23:13.707
> 
> 标签：python, scipy, python-2.7, regression

我正在玩 Python 中的逻辑回归。我已经实现了一个版本，其中成本函数的最小化是通过梯度下降完成的，现在我想使用 scipy 的 BFGS 算法（**scipy.optimize.fmin_bfgs**）。

我有一组数据（矩阵 X 中的特征，X 的每一行都有一个样本，垂直向量 y 中有相应的标签）。我正在尝试找到参数 Theta 以最小化：

![在此处输入图像描述](../Images/f23d851b5d7589f7b8c51d6ad62ea474.png)

我很难理解**fmin_bfgs**是如何工作的。据我所知，我必须传递一个要最小化的函数和一组 Thetas 的初始值。

我执行以下操作：

```
initial_values = numpy.zeros((len(X[0]), 1))
myargs = (X, y)
theta = scipy.optimize.fmin_bfgs(computeCost, x0=initial_values, args=myargs) 
```

其中 computeCost 计算 J(Thetas)，如上图所示。但是我得到了一些与索引相关的错误，所以我认为我没有提供 fmin_bfgs 期望的内容。

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T10:26:30.453

在浪费了几个小时之后，通过发布的力量再次解决了......我正在定义 computeCost(X, y, Thetas)，但由于 Thetas 是优化的目标参数，它应该是签名中的第一个参数。已修复且有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:58:29.230

我不知道你的整个代码，但你有没有试过

```
initial_values = numpy.zeros(len(X[0])) 
```

? 我认为这个 x0 应该是一维向量。

# java - SSLHandshakeException：不存在主题替代名称

> ID：10258101
> 
> 赞同：57
> 
> 时间：2012-04-21T10:24:23.057
> 
> 标签：java, tomcat, soap, ssl, https

我正在通过 java 代码调用 HTTPS SOAP Web 服务。我已经在 jre cacerts 密钥库中导入了自签名证书。现在我得到：

```
com.sun.xml.internal.ws.com.client.ClientTransportException: HTTP transport error: javax.net.ssl.SSLHandshakeException: java.security.cert.CertificateException: No subject alternative names present 
```

服务 URL 的主机名与证书中提供的 CN 的主机名不匹配。[我在此处](http://docs.oracle.com/cd/E17904_01/web.1111/e13734/proxy.htm)阅读了有关定义自定义主机名验证程序的解决方法。但我无法确定我应该在我的代码中实现解决方法的地方。

```
public SOAPMessage invokeWS(WSBean bean) throws Exception {

    SOAPMessage response=null;
    try{

    /** Create a service and add at least one port to it. **/
    String targetNameSpace = bean.getTargetNameSpace();
    String endpointUrl = bean.getEndpointUrl();
    QName serviceName = new QName(targetNameSpace, bean.getServiceName());
    QName portName = new QName(targetNameSpace, bean.getPortName());
    String SOAPAction = bean.getSOAPAction();
    HashMap<String, String> map = bean.getParameters();

    Service service = Service.create(serviceName);
    service.addPort(portName, SOAPBinding.SOAP11HTTP_BINDING, endpointUrl);

    /** Create a Dispatch instance from a service. **/
    Dispatch dispatch = service.createDispatch(portName, SOAPMessage.class,
            Service.Mode.MESSAGE);

    // The soapActionUri is set here. otherwise we get a error on .net based
    // services.
    dispatch.getRequestContext().put(Dispatch.SOAPACTION_USE_PROPERTY,
            new Boolean(true));
    dispatch.getRequestContext().put(Dispatch.SOAPACTION_URI_PROPERTY,
            SOAPAction);

    /** Create SOAPMessage request. **/
    // compose a request message
    MessageFactory messageFactory = MessageFactory.newInstance();
    SOAPMessage message = messageFactory.createMessage();

    // Create objects for the message parts
    SOAPPart soapPart = message.getSOAPPart();
    SOAPEnvelope envelope = soapPart.getEnvelope();
    SOAPBody body = envelope.getBody();

    SOAPElement bodyElement = body.addChildElement(bean.getInputMethod(),
            bean.getPrefix(), bean.getTargetNameSpace());

             ...more code to form soap body goes here

    // Print request
    message.writeTo(System.out);

    // Save the message
    message.saveChanges();

    response = (SOAPMessage)dispatch.invoke(message);
    }
    catch (Exception e) {
        log.error("Error in invokeSiebelWS :"+e);
    }
    return response;
} 
```

请忽略 WSBean 参数，因为名称空间和其他 wsdl 属性都来自此 bean。如果可以通过一些不同的解决方法解决此异常，请建议。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-04-24T10:52:51.530

谢谢，布鲁诺给了我关于通用名称和主题备用名称的提示。正如我们发现证书是使用 CN 生成的，带有网络的 DNS 名称，并要求使用主题备用名称条目重新生成新证书，即 san=ip:10.0.0.1。这是**实际的解决方案**。

但是，我们设法找到了一种可以在开发阶段运行的**解决方法。**只需在我们建立 ssl 连接的类中添加一个静态块。

```
static {
    HttpsURLConnection.setDefaultHostnameVerifier(new HostnameVerifier()
        {
            public boolean verify(String hostname, SSLSession session)
            {
                // ip address of the service URL(like.23.28.244.244)
                if (hostname.equals("23.28.244.244"))
                    return true;
                return false;
            }
        });
} 
```

如果您碰巧使用的是 Java 8，那么有一种更巧妙的方法可以实现相同的结果：

```
static {
    HttpsURLConnection.setDefaultHostnameVerifier((hostname, session) -> hostname.equals("127.0.0.1"));
} 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-04-22T20:15:50.450

与某些浏览器不同，Java 在服务器身份验证（RFC 2818，第 3.1 节）和 IP 地址方面严格遵循 HTTPS 规范。

使用主机名时，可以回退到服务器证书的主题 DN 中的公用名，而不是使用主题备用名称。

使用 IP 地址时，证书中必须有一个主题备用名称条目（类型为 IP 地址，而不是 DNS 名称）。

[您将在此答案](https://stackoverflow.com/a/8444863/372643)中找到有关规范以及如何生成此类证书的更多详细信息。

# javascript - 是否有一种非 Flash 方式来设置/获取 WebKit 中的剪贴板数据

> ID：10258102
> 
> 赞同：1
> 
> 时间：2012-04-21T10:24:38.853
> 
> 标签：javascript, jquery, html, webkit, clipboard

我想将**数据**或文本设置或获取到剪贴板，但没有闪存。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T10:45:37.907

您可以在 WebKit 中获取剪贴板数据，但仅在粘贴事件期间，出于安全原因（能够随时从系统剪贴板复制的随机网站会很糟糕）。假设您有一个 id 为“textBox”的文本输入：

现场演示：http: [//jsfiddle.net/qc4s8/](http://jsfiddle.net/qc4s8/)

代码：

```
document.getElementById("textBox").onpaste = function(evt) {
    alert(evt.clipboardData.getData("text/plain"));
};​ 
```

参考：

*   [https://developer.apple.com/library/mac/#documentation/appleapplications/conceptual/safarijsprogtopics/tasks/copyandpaste.html](https://developer.apple.com/library/mac/#documentation/appleapplications/conceptual/safarijsprogtopics/tasks/copyandpaste.html)
*   [http://brooknovak.wordpress.com/2009/07/28/accessing-the-system-clipboard-with-javascript/](http://brooknovak.wordpress.com/2009/07/28/accessing-the-system-clipboard-with-javascript/)
*   [JavaScript 在粘贴事件中获取剪贴板数据（跨浏览器）](https://stackoverflow.com/questions/2176861/javascript-get-clipboard-data-on-paste-event-cross-browser)

# android - 过滤 SimpleAdapter 时出现 IndexOutOfBoundException

> ID：10258115
> 
> 赞同：2
> 
> 时间：2012-04-21T10:27:42.297
> 
> 标签：android, filter, indexoutofboundsexception, simpleadapter

我对它进行了分类`SimpleAdapter`以添加一些额外的功能，例如更改背景颜色、自定义视图和过滤。背景效果很好，但过滤器却不行。如果我使用`SimpleFilter`适配器提供的完全没有问题，所以我从源中复制了方法并将它们放入我的适配器中。虽然我没有碰任何东西，但`IndexOutOfBoundsException`在输入搜索词时我会得到一个。通常在第二个或第三个字符上。

我复制了整个课程，但有趣的部分是`CustomFilter` `bindView`并且`getView`效果很好。实施过滤器更改后，它停止工作。异常是由`bindView`第一行方法中的 data.get(position) 引起的，但问题必须是过滤器。

```
public class ChangingColorAdapter extends SimpleAdapter {

    int resource;
    int[] to;

    List<Map<String, String>> data, mUnfilteredData;
    String[] from;

    Context context;
    Resources res;
    Filter filter;

    /*
     * A custom adapter which changes background colors on the elements
     * and implements custom filtering
     */
    public ChangingColorAdapter(Context context,
            List<Map<String, String>> data, int resource, String[] from, int[] to) {

        super(context, data, resource, from, to);
        this.context = context;
        this.resource = resource;
        this.data = data;
        this.from = from;
        this.to = to;
        this.res = context.getResources();

    }

    @Override
    public Filter getFilter() {
        if(filter != null) return filter;
        else return filter = new CustomFilter();
    }

    /*
     * A custom filter which is copied from the simplefilter in simpleadapter.
     * Changed word check from .startswith to .contains
     */
    private class CustomFilter extends Filter {

        @Override
        protected FilterResults performFiltering(CharSequence prefix) {
            FilterResults results = new FilterResults();

            if (mUnfilteredData == null) {
                mUnfilteredData = new ArrayList<Map<String, String>>(data);
            }

            if (prefix == null || prefix.length() == 0) {
                List<Map<String, String>> list = mUnfilteredData;
                results.values = list;
                results.count = list.size();
            } else {
                String prefixString = prefix.toString().toLowerCase();

                List<Map<String, String>> unfilteredValues = mUnfilteredData;
                int count = unfilteredValues.size();

                ArrayList<Map<String, ?>> newValues = new ArrayList<Map<String, ?>>(count);

                for (int i = 0; i < count; i++) {
                    Map<String, ?> h = unfilteredValues.get(i);
                    if (h != null) {

                        int len = to.length;

                        for (int j=0; j<len; j++) {
                            String str =  (String)h.get(from[j]);

                            String[] words = str.split(" ");
                            int wordCount = words.length;

                            for (int k = 0; k < wordCount; k++) {
                                String word = words[k];

                                if (word.toLowerCase().contains(prefixString)) {
                                    newValues.add(h);
                                    break;
                                }
                            }
                        }
                    }
                }

                results.values = newValues;
                results.count = newValues.size();
            }

            return results;
        }

        @SuppressWarnings("unchecked")
        @Override
        protected void publishResults(CharSequence constraint, FilterResults results) {
            data = (List<Map<String, String>>) results.values;
            if (results.count > 0) {
                 notifyDataSetChanged();
            } else {
                 notifyDataSetInvalidated();
            }
        }
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v;
        if (convertView == null) {
            LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = inflater.inflate(resource, parent, false);
        } else {
            v = convertView;
        }

        bindView(position, v);

        if(position%2!=0) {
            v.setBackgroundColor(Color.DKGRAY);
        }
        else {
            v.setBackgroundColor(Color.BLACK);
        }

        return v;
    }

    /*
     * Iterate over all elements, check which type the given view is and fill in the data
     */
    private void bindView(int position, View view) {
        final Map<String, String> dataSet = data.get(position);
        if (dataSet == null) {
            return;
        }

        final ViewBinder binder = getViewBinder();
        final String[] from = this.from;
        final int[] to = this.to;
        final int count = to.length;

        for (int i = 0; i < count; i++) {
            final View v = view.findViewById(to[i]);
            if (v != null) {
                final Object data = dataSet.get(from[i]);
                String text = data == null ? "" : data.toString();
                if (text == null) {
                    text = "";
                }

                boolean bound = false;
                if (binder != null) {
                    bound = binder.setViewValue(v, data, text);
                }

                if (!bound) {
                    if (v instanceof Checkable) {
                        if (data instanceof Boolean) {
                            ((Checkable) v).setChecked((Boolean) data);
                        } else if (v instanceof TextView) {
                            setViewText((TextView) v, text);
                        } else {
                            throw new IllegalStateException(v.getClass().getName() +
                                    " should be bound to a Boolean, not a " +
                                    (data == null ? "<unknown type>" : data.getClass()));
                        }
                    } else if (v instanceof TermView) {
                        if(text.length()==10) {
                            int year = Integer.parseInt(text.substring(0,4));
                            if(text.substring(5, 7).equals("04")) {
                                setViewText((TextView) v, res.getString(R.string.summerterm) + " " + year);
                            }
                            else {
                                setViewText((TextView) v, res.getString(R.string.winterterm) + " " + year + "/" + (year+1));
                            }   
                        }
                        else {
                            setViewText((TextView) v, text);
                        }
                    } else if (v instanceof TextView) {
                        setViewText((TextView) v, text);
                    } else if (v instanceof ImageView) {
                        if (data instanceof Integer) {
                            setViewImage((ImageView) v, (Integer) data);                            
                        } else {
                            setViewImage((ImageView) v, text);
                        }
                    } else {
                        throw new IllegalStateException(v.getClass().getName() + " is not a " +
                                " view that can be bounds by this SimpleAdapter");
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T08:33:41.643

试试这个代码：

```
@SuppressWarnings("unchecked")
@Override
protected void publishResults(CharSequence constraint, FilterResults results) {
    data.clear();
    data.addAll((List<Map<String, String>>) results.values);
    if (results.count > 0) {
       notifyDataSetChanged();
    } else {
       notifyDataSetInvalidated();
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-03-18T11:16:05.963

无需添加`filter`和`bindView`方法，只需确保`getView`：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View v = super.getView(position, convertView, parent);

    if(position%2!=0) {
        v.setBackgroundColor(Color.DKGRAY);
    }
    else {
        v.setBackgroundColor(Color.BLACK);
    }

    return v;
} 
```

# c++ - ostream << 在课堂上重载粉碎

> ID：10258121
> 
> 赞同：1
> 
> 时间：2012-04-21T10:29:40.733
> 
> 标签：c++, operator-overloading, ostream

当我在我的复数类中声明 ostream << 重载方法时，它突然崩溃了

```
#include<math.h>
#include<ostream>
#include<iostream>

class complex
{

public:
    double getRe();
    double gerIm();
    void setRe(double value);
    void setIm(double value);
    explicit complex(double=0.0,double=0.0);
    static complex fromPolar(double radius,double angle);
    complex operator+(complex rhs);
    complex operator-(complex rhhs);
    complex operator*(complex rhs);
    complex operator+(double rhs);
    complex operator-(double rhs);
    complex operator*(double rhs);
    complex conjugate();
    double norm();
    complex operator/(double rhs);
    complex operator/(complex rhs);
     friend ostream &operator<<(ostream &out, complex c);
private:
    double real;
    double img;

};
 ostream &operator<<(ostream &out, complex c)
{
    out<<c.real<<"  ";
    out<<c.img<<"  ";
    return out;

}
complex operator+(double lhs,complex rhs);
complex operator-(double lhs,complex rhs);
complex operator*(double lhs,complex rhs);
complex operator/(double lhs,complex rhs);
complex exp(complex c);
inline double complex::getRe(){return real;}
inline double complex::gerIm(){ return img;}
inline void complex::setRe(double value) {  real=value;}
inline void complex::setIm(double value) { img=value;}
 inline complex::complex(double re,double im) :real(re),img(im){}
 inline   complex complex::fromPolar(double radius,double angle){

     return complex(radius*cos(angle),radius*sin(angle));

 }
 inline complex complex::operator+(complex rhs)
 {
     return complex(this->real+rhs.real,this->img+rhs.img);

 }
 inline complex complex::operator-(complex rhs)
 {
     return complex(this->real-rhs.real,this->img-rhs.img);

 }
 inline complex complex::operator*(complex rhs)
 {
     return complex(this->real*rhs.real-this->img*rhs.img,this->real*rhs.img+this->img*rhs.real);

 }
 inline complex complex::operator+(double rhs)
 {
     return complex(this->real+rhs,this->img);

 }

 inline complex complex::operator-(double rhs)
 {
     return complex(this->real-rhs,this->img);

 }
 inline complex complex::operator*(double rhs)
 {
     return complex(this->real*rhs,this->img*rhs);

 }
 inline complex complex::operator/(double rhs)
 {
     return complex(this->real/rhs,this->img/rhs);

 }
 inline complex complex::operator/(complex rhs)
 {

     return (*this)*rhs.conjugate()/rhs.norm();

 }

 inline double complex::norm()
 {
 return (this->real*this->real+this->img*this->img);
 }

 inline complex complex::conjugate()
 {

     return complex(this->real,-this->img);
 }

 inline complex operator+(double lhs,complex rhs)
 {
     return rhs+lhs;
 }

 inline complex operator-(double lhs,complex rhs)
 {
     return complex(lhs-rhs.getRe(),rhs.gerIm());

 }
 inline complex operator*(double lhs,complex rhs)
 {
     rhs*lhs;

 }

 inline complex operator/(double lhs,complex rhs)
 {
     return rhs.conjugate()*lhs/rhs.norm();

 } 
```

错误说，它是 ostream 运算符的重新定义，但我认为我写得正确，所以无法理解发生了什么，请帮助我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T11:06:54.070

`ostream`在`std`命名空间中，所以在你的类定义中你需要：

```
friend std::ostream &operator<<(std::ostream &out, complex c); 
```

相应的定义应如下所示：

```
std::ostream &operator<<(std::ostream &out, complex c)
{
// ... 
```

此外，您需要在其中一个`operator*`重载中使用 return 语句：

```
inline complex operator*(double lhs,complex rhs)
{
    return rhs*lhs;
} 
```

由于您在代码中使用与标准库类模板相同的名称，因此不应使用`using namespace std;`. （即使不是这种情况，您也应该`using namespace std;`在大多数情况下避免，当然也应避免在头文件中使用它。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-21T21:05:26.230

If you did what Charles Bailey says but still get the error make sure you include iostream at the top of the file.

# php - 如何在codeigniter中获取mysql表的字段名？

> ID：10258128
> 
> 赞同：11
> 
> 时间：2012-04-21T10:30:36.930
> 
> 标签：php, mysql, sql, codeigniter

我是codeigniter的新手。我正在尝试通过查询获取表的字段名称。

我写了一个查询

> “从用户中选择 *”

并将其传递给`$this->db->query()`函数。我正在获取记录。但我想获取表的字段名称。那我怎么能得到呢？

任何人都可以帮助我吗？提前致谢。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-21T10:33:22.820

使用数据库库编写此代码以列出所有字段：

```
$this->db->list_fields('table') 
```

看看这里：[https ://codeigniter.com/userguide3/database/results.html#CI_DB_result::list_fields](https://codeigniter.com/userguide3/database/results.html#CI_DB_result::list_fields)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-06-27T13:24:45.283

有时这可能会有所帮助

```
$fields = $this->db->field_data('table_name');

foreach ($fields as $field)
{
   echo $field->name;
   echo $field->type;
   echo $field->max_length;
   echo $field->primary_key;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-21T10:45:36.693

你所做的是从表中获取数据......这里你的表是用户所以

在您的模型函数中执行此操作...

```
function get_field()
{
$result = $this->db->list_fields('user');
foreach($result as $field)
{
$data[] = $field;
return $data;
}
} 
```

在您的控制器中执行此操作

```
function get_field()
{
$data['field'] = $this->model_name->get_field();
$this->load->view('view_name',$data);
} 
```

在你看来这样做

```
foreach($field as $f)
{
echo $f."<br>"; //this will echo all your fields
} 
```

希望对你有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-10T03:51:58.983

**您可以使用以下代码从数据库中获取字段**

```
$fields = $this->db->list_fields('table_name');

foreach ($fields as $field)
{
   echo $field;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-19T06:59:38.080

**借助此代码，我们可以从 db 中获取字段名称**

```
include('db.php');

    $col="SHOW COLUMNS FROM `camera details`";
    $output=mysqli_query($db,$col);

    $kal=array();
    while($row=mysqli_fetch_array($output))
    {
        if($row['Field']!='id')
        {
            ?><div class="values"><?php echo $row['Field'];
            echo "<br>";?></div><br><br><?php
            array_push($kal, $row['Field']);
        }
    }
    ?>
    <?php** 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-07T14:05:19.530

```
The answer given above by Anwar needs modification, there is no need for foreach loop in model function as it will only give the first element despite using foreach, which means the foreach loop is not bringing the fields using $data[], below code should give you 100% result

in your model function do this...

function get_field()
{
$result = $this->db->list_fields('user');
return $result();
}
in your controller do this

function get_field()
{
$data['field'] = $this->model_name->get_field();
$this->load->view('view_name',$data);
}
in your view do this

foreach($field as $f)
{
echo $f."<br>"; //this will echo all your fields
} 
```

# sandbox - 沙盒线程

> ID：10258139
> 
> 赞同：0
> 
> 时间：2012-04-21T10:32:01.483
> 
> 标签：sandbox, virtual-address-space

我想创建具有自己的虚拟地址空间的线程或进程（它可能必须是单独的进程），而地址空间中没有系统库。我的目标是为外国源代码创建一个执行环境。

我想创建一个没有系统库的线程，只有几个可执行页面，用户代码将被复制并放置线程入口点，还有几个 RW 页面用于堆栈和与主线程的数据交换。

是否可以从应用程序级别的虚拟内存中完全取消映射 Windows（或可能是 Linux）上的所有系统库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T11:34:56.890

取消映射系统库不会阻止二进制文件自行执行系统调用。要捕获您试图阻止的所有操作，某种形式的二进制转换是必要的。您可能想看看[libdetox](http://nebelwelt.net/projects/libdetox/)和[fastBT](http://nebelwelt.net/projects/fastbt/)（[Google Tech Talk about fastBT](http://www.youtube.com/watch?v=VIxaQeAHIxs)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T11:52:20.573

根据您想要实现的目标，在用户模式 ​​Linux、qemu、VMware 或其他虚拟化解决方案中运行外部代码可能更容易（每次运行使用虚拟硬盘的新副本，不提供任何网络接口， ETC。）。

# c# - 如何使用C#将数据从Excel的一列导入列表框

> ID：10258141
> 
> 赞同：0
> 
> 时间：2012-04-21T10:32:15.277
> 
> 标签：c#, listbox, oledb, openfiledialog, import-from-excel

我有一个 openFileDialog 工具。我将从我的计算机中选择一个 excel 文件，我的程序读取一列（例如 A 列）并在 GUI 上写入我的列表框。我怎样才能通过 OleDB 做到这一点？我是 C# 的新手。如果你解释得详细一点，我会很高兴的。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T18:31:38.173

为了成功使用 OLEDB 提供程序，我们必须考虑几点。

*   Excel 2003 文件的 OLEDB 提供程序与 Excel 2007/2010 文件使用的提供程序不同。因此，我们要做的第一件事是确定 Excel 文件格式，以便选择正确的提供程序。在下面的代码示例中，我只是检查文件的扩展名以确定 Excel 文件格式。请注意，有更详细的方法来确定 Excel 文件格式（例如，通过魔术字节）。

*   要选择 Excel 工作表的所有行，我们需要知道 Excel 工作表的名称。标准工作表名称取决于语言并且可以由用户重命名。因此，我们需要一种方法来确定 Excel 文件中包含的工作表名称与语言无关（当然也与重命名的工作表无关）。幸运的是，`OleDbConnection`该类提供了一个名为的方法，该方法`GetOleDbSchemaTable`允许我们获取 Excel 文件中的所有工作表名称。

*   Excel 的 OLEDB 提供程序支持称为 HDR 的扩展属性。设置`HDR`为`Yes` 表示工作表的第一行包含列标题。因此，如果您使用列标题，您应该设置 `HDR=Yes`.

因此，总结下面的代码示例执行以下操作（单击按钮）：

1.  根据文件扩展名确定 Excel 文件类型。
2.  根据 excel 文件类型选择正确的 OLEDB 提供程序来构建连接字符串。
3.  确定 Excel 文件中包含的工作表名称。
4.  选择第一个工作表，选择所有行并将行存储在名为 的 DataTable 中`mytable`。
5.  在名为 的列表框中显示第一列的所有值`listbox1`。

**代码示例：**

```
private static bool IsExcelXmlFileFormat(string fileName)
{
  return fileName.EndsWith("xlsx", StringComparison.OrdinalIgnoreCase);
}

private void button1_Click(object sender, EventArgs e)
{
  // Open your FileOpenDialog and let the user select a file...

  string fileName = "c:\\temp\\myexcelfile.xlsx";      

  OleDbConnectionStringBuilder connStringBuilder =
    new OleDbConnectionStringBuilder();

  connStringBuilder.DataSource = fileName;
  if (IsExcelXmlFileFormat(fileName))
  {
    // Set HDR=Yes if first row contains column titles.        
    connStringBuilder.Provider = "Microsoft.ACE.OLEDB.12.0";
    connStringBuilder.Add("Extended Properties", "Excel 8.0;HDR=NO;");        
  }
  else
  {
    connStringBuilder.Provider = "Microsoft.Jet.OLEDB.4.0";
    connStringBuilder.Add("Extended Properties", "Excel 8.0;");        
  }

  DataSet data = new DataSet();
  using (OleDbConnection dbConn = new OleDbConnection(connStringBuilder.ConnectionString))
  {
    dbConn.Open();

    DataTable sheets = dbConn.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);                

    using (OleDbCommand selectCmd = new OleDbCommand(
      String.Format("SELECT * FROM [{0}]", sheets.Rows[0]["TABLE_NAME"]), dbConn))
    {
      using (OleDbDataAdapter dbAdapter = new OleDbDataAdapter())
      {
        dbAdapter.SelectCommand = selectCmd;           
        dbAdapter.Fill(data, "mytable");                       
      }
    }
  }

  // To enumerate all rows use the following code.
  // foreach (DataRow row in data.Tables["mytable"].Rows)
  // {
  //   Console.Out.WriteLine(row[0]);
  // }

  // Display the values of column 0 in a listbox called listBox1.
  listBox1.ValueMember = data.Tables["mytable"].Columns[0].ColumnName;
  listBox1.DisplayMember = data.Tables["mytable"].Columns[0].ColumnName;
  listBox1.DataSource = data.Tables["mytable"];             
} 
```

# ruby-on-rails - 当您在 rails 控制器操作中调用 render 时，url 路由在哪里得到解析

> ID：10258142
> 
> 赞同：1
> 
> 时间：2012-04-21T10:32:15.930
> 
> 标签：ruby-on-rails, ruby, routing

我应该在 rails3.2 源代码中查看任何方法，以便知道渲染调用的导航或 url 部分在哪里得到解决？原因是，我有一个小应用程序，其中 url 的形式是

> www.example.com/bob/edit

上面建议的路线呈现编辑表单。编辑：我能够通过修改 link_to 助手上的响应来到达此路线。

```
def update
  #when validation passes
   redirect_to @user
  #when validation fails
  respond_to do |format|
     format.html {render :action => "edit"}
  end
end 
```

现在的问题是，当提交到 users_controller 的更新操作时发生验证错误时，url 变为

> www.example.com/users/bob/edit

配置/路由.rb

```
get "users/new", to: => "users#new"
resources :users 
```

如您所见，路线中没有发生任何有趣的事情，

在模型/user.rb

```
def to_param
  "#{name}"
end 
```

在意见/edit.html.erb

```
form_for(@user) do |f|
end 
```

> **观察：**在这里，当重新呈现表单时，表单“action”指向“users/bob”，但是当表单重新呈现“验证错误的 cos”时，表单操作神秘地变为“users/”，这很奇怪，如果我删除 user.rb 模型中的 to_param 它工作正常

虽然这没什么大不了的，但我在想，如果我需要覆盖在渲染调用时生成的 url，在哪里改变？？？？？？

欢迎任何建议和探索的指针......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T13:47:21.617

我不确定您是如何获得所获得的 URL，但对您的问题的一般回答是**它没有**。您在发送请求后看到的 URL 是请求发送到（或重定向到）的 URL，而不是您来自的页面的 URL，也不是您最终呈现的模板的 URL。在您的情况下，我猜问题是您为`edit`页面创建了一个自定义 URL，而不是为`update`，并且您`form_for(@user)`正在将请求发送到您的`update`URL（可能`PUT "/users/bob"`）。

要解决这个问题，第一件事是创建您的自定义`update`路线。也许是这样的：

```
put ":id/update", to: => "users#update" 
```

然后让您`form_for`使用该 URL：

```
form_for(@user, :url => "#{@user.to_param}/update") 
```

# vim - 在 Vim 中用引号括住两个单词

> ID：10258143
> 
> 赞同：18
> 
> 时间：2012-04-21T10:32:21.067
> 
> 标签：vim, surround

我正在使用 vim-surround 和以下文本。（*为光标所在位置）

```
This is a lo*ng line and I want to highlight two words 
```

我想将单词 long 和 line 都用引号括起来，这样它就变成了

```
This is a "long line" and I want to highlight two words 
```

是否可以在不进入视觉模式的情况下做到这一点？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-21T10:34:09.713

尝试：（`ys2w"`获取`ys`一个动作或文本对象，然后是您想要包围的角色）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-21T11:32:57.713

先按`b`后按`ys2w"`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-21T11:33:54.877

使用环绕命令时，我发现最合乎逻辑的解决方案是对“标记”和“环绕”操作进行排序。

因此，对于文本对象，我使用 v2aw 来直观地标记两个单词，然后使用 s" 来表示总数

```
v2aws" 
```

# c# - 用于存储facebook好友列表+设备通讯录的数据库设计

> ID：10258144
> 
> 赞同：0
> 
> 时间：2012-04-21T10:32:26.273
> 
> 标签：c#, php, sql-server, facebook, database-design

您将如何设计数据库以满足以下**两个**要求

设备地址簿要求

```
User 1.* Device
Device 1.* Contact
Contact 1.* Email
Contact 1.* Phone 
```

脸书/推特要求

```
User 1.* SocialNetworkAccount (i.e 1 user can have many facebook accounts)
SocialNetworkAccount 1.* FSocialNetworkAccountFriends (i.e 1 facebook account can have many facebook friends) 
```

* * *

USER 是应用程序用户。

设备可以是 iPhone、ipad、Android、Windows Phone 等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T11:00:05.903

也许是这样的。这是一个mssql数据库图。但我想你明白了：

![数据库图](../Images/b9d1af7393c354b99dea5768d4416dbb.png)

**编辑**

我对类型表没有任何好的经验。这些表很难查询，并且在大多数情况下需要大量的`case when`语句来获取正确的数据。我会遵循 tum 规则，即一张桌子有一个目的。问题还在于，如果您想添加另一种类型，则可能需要其他列。然后您可能会发现自己必须添加可为空的列，这可能会导致糟糕的数据库设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T12:56:12.063

@Arion

那这个呢？（忽略设备）

![在此处输入图像描述](../Images/161def384bb7f0e77abc7a84071d3ee4.png)

# java - 数组排序方法

> ID：10258153
> 
> 赞同：0
> 
> 时间：2012-04-21T10:34:01.930
> 
> 标签：java, arrays, sorting, merge

在过去的几天里，我一直在努力实现字典式合并排序方法。如果我得到了一个点：ArrayIndexOutOfBounds 错误，我不知道为什么。如果有人可以看看并告诉我可能出了什么问题。我尝试调试但所有值似乎都是正确的。

回复 aix：就在这个时候发生了`temp[index1] = array[min + index1] ;` 这些是那个确切时间的值：

```
array :String[5] (5 entries originating from a text file)
min : 0
max : 1
size : 2
pivot : 0
temp : Comparable<T>[2]  (both entries null)

Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 5
    at Merge.mergeSort(Merge.java:47)
    at Merge.mergeSort(Merge.java:43)
    at Merge.Sort(Merge.java:20)
    at Sort.main(Sort.java:96) 
```

第 43 行：

```
mergeSort(array, pivot + 1, max) ; 
```

第 47 行：

```
temp[index1] = array[min + index1] ; 
```

编码：

```
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;

public class Merge 
{
    public static void Sort (LinkedList listIn, int size) throws Exception
    {
        String[] mArray = new String[size] ;
        String textContent = null ;
        File outputFile ;

        //copy the list values in the array
        for (int i = 0 ; i < size ; i++)
        {
             mArray [i] = listIn.get(i).printNode();
        }

        mergeSort(mArray, 0, mArray.length) ;       

    }

    public static <T extends Comparable<? super T>> void mergeSort(T[] array, int min, int max)
    {
        T[] temp ;
        int index1 ;
        int left ;
        int right ;

        // if array is of size 1

        if (min == max)
            return ;

        // find length and midpoint
        int size = max - min + 1 ;
        int pivot = (min + max) / 2 ;
        temp = (T[]) (new Comparable[size]) ;

        mergeSort(array, min, pivot) ;
        mergeSort(array, pivot + 1, max) ;

        for (index1 = 0 ; index1 < size ; index1++)
        {
            temp[index1] = array[min + index1] ;
        }

        left = 0 ;
        right = pivot - min + 1 ;
        for (index1 = 0 ; index1 < size ; index1++)
        {
            if (right <= max - min)
                if (left <= pivot - min)
                    if (temp[left].compareTo(temp[right]) > 0)
                        array[index1 + min] = temp[right++] ;
                    else
                        array[index1 + min] = temp[left++] ;
                else
                    array[index1 + min] = temp[right++] ;
            else
                array[index1 + min] = temp[left++] ;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T11:14:49.160

当您第一次调用时，您的`Sort`方法发送了错误的值`merge`。更改`mergeSort(mArray, 0, mArray.length)` 为`mergeSort(mArray, 0, mArray.length-1);`

# c# - 可以要求 LINQ 跳过/保留特定索引吗？

> ID：10258157
> 
> 赞同：4
> 
> 时间：2012-04-21T10:34:24.747
> 
> 标签：c#, .net, linq, loops

我本人是 LINQ 的忠实粉丝。简洁的艺术体现在 LINQ 中。同样在 .Net 中，我们说 LINQ 比循环领先一步，或者我们可以说 LINQ 是循环++。

但真的是这样吗？

为什么我要评判是因为我试图将这个 for 循环代码转换为 LINQ，但对 LINQ 跳过/离开索引感到困惑？

```
double[] NMD = {3.0, 5.0, 6.0, 65.0, 34.0, 3.0, 5.0, 6.0, 65.0, 34.0, 3.0, 5.0, 6.0, 65.0, 34.0 };

for(int i=1; i<NMD.Length-1; i+=2)
   NMD[i] = NMD[i]/10; 
```

在这里，我要求循环从索引 1 开始并在倒数第二个值处停止，并且还将值跳过 2。所以我们可以在 LINQ 中执行此操作吗？IMO 我不这么认为但我很高兴被证明是错误的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T10:40:18.537

您可以测试内部的索引`Select`并相应地选择您的操作：

```
NMD = NMD.Select((x, i) => i % 2 == 1 && i < NMD.Length - 1 ? x / 10 : x).ToArray();
// => { 3, 0.5, 6, 6.5, 34, 0.3, 5, 0.6, 65, 3.4, 3, 0.5, 6, 6.5, 34 } 
```

但是，您可能已经通过查看此语句的大小了解到，LINQ在这里*并不是*概念上的改进，因为您只能使用它创建新序列，而不能改变现有序列。

也就是说`for`，在我看来，循环很好，实际上更具可读性。与其说“LINQ 是循环++”，不如说它是“LINQ 是序列生成++”或“只读迭代++”。

如果您想有效地使用 LINQ，您必须以更实用的方式重新思考和重新设计您的代码（例如，使用不可变的数据结构），而不是仅仅用`for`LINQ 表达式替换每个循环。如果您因此而明智地这样做，则可以提高代码的质量，并使将来的切换并行执行问题更少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T10:41:53.387

```
var NMD = new[] {3.0, 5.0, 6.0, 65.0, 34.0, 3.0, 5.0, 6.0, 65.0, 34.0, 3.0, 5.0, 6.0, 65.0, 34.0 };
NMD = NMD.Select((n, i) => i % 2 == 1  ? n / 10 : n).ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T10:38:15.180

您可以使用 仅选择具有奇数索引的项目`NMD.Where((x,i) => i % 2 == 1)`，但您将无法更新数组中的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T10:45:08.327

对于此类任务，Linq 并不是真正的最佳工具——就地更改数据，而且只是其中的一些。但如果你真的想这样做，你可以这样做：

```
NMD = NMD.Select((x, i) =>
{
    if (i < 1 || i >= NMD.Length - 1 || (i % 2)==0)
        return x;
    else
        return x / 10;
}).ToArray(); 
```

请记住，使用 linq，您不会更改现有序列，而是将其替换为新序列。

# jquery - 如何将 AJAX 数组响应推送到 js 数组中

> ID：10258163
> 
> 赞同：2
> 
> 时间：2012-04-21T10:35:47.193
> 
> 标签：jquery

**在 AjAX 调用中，我正在获取数据**

```
success : function(data){
               alert(data);
         } 
```

**这是该警报的结果**

```
[/files/1.jpg,/files/2.jpg,/files/3.jpg] 
```

**我想将此结果推送到 javascript 数组中**

```
 var outputdata = []; 
```

数组 outputdata 的样子

```
 var outputdata = [/files/1.jpg,/files/2.jpg,/files/3.jpg]; 
```

我试过这种方式

```
success : function(data){
               alert(data);
outputdata.push(data);

         } 
```

更新部分

我试过你的和这个

```
success: function(data) {
                $.each(data, function(i) {

                    outputdata.push(data[i]);
                });
                alert(outputdata);

                outputdata.forEach(function (element) {

                      content = "<div><a href='#'><img src=" + element + "   /></a></div>";
                     $("#container").append(content);
                    });

            } 
```

![在此处输入图像描述](../Images/8324d9621e61bd774e9903970173c763.png)

初始警报数据很好（我的意思是初始值）

```
success: function(data) {

             alert(data);

                $.each(data, function(i) {

                    outputdata.push(data[i]);
                });
                alert(outputdata); 
```

查看初始警报的图片

![在此处输入图像描述](../Images/5584064f56d9d8edb374875b13b429b4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T10:41:37.337

为什么要这么做？ *data*已经是一个数组，您可以通过以下方式调用元素

```
data[i] 
```

还是从您的 ajax 调用返回的数据字符串？比你需要先解析它，比如

```
var your_data = JSON.parse(data); 
```

并且可以通过

```
your_data[i] 
```

无论如何，循环数组看起来像这样：

```
success: function(data) {
    $.each(data, function(i) {
        outputdata[i] = data[i];
    });
} 
```

# jquery - Rails 3.2 中未使用 Javascript 函数

> ID：10258164
> 
> 赞同：0
> 
> 时间：2012-04-21T10:35:56.227
> 
> 标签：jquery, ruby-on-rails-3, ruby-on-rails-3.1

我在资产管道文件夹中的 javascript 文件中有以下函数，我已将此文件设置在 application.js 文件的要求中，并按加载顺序位于所有其他库下方。该文件正确加载到浏览器中。

由于某种原因它不起作用，所以目前我将它添加到 erb 文件中并且它可以正常工作，但我想知道如何在资产管道中使用它。

我是在错误地声明它还是什么？

```
 $(function(){

      var $container = $('#container');

      $container.isotope({
        itemSelector: '.element'
      });

    }); 
```

这是视图：

```
<div id="container" class="super-list width2 height2  clearfix">

    <% @feature.issues.each do |issue| %>
    <div class="element metalloid isotope-item   " data-symbol="Mg" data-category="alkaline-earth">
    <p class="number">  <%= issue.id %> </p>
  <h2 class="symbol"> <%= link_to issue.title, [@feature, issue] %> </h2>

  </div>
  <% end %>

</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T11:23:55.413

然后根据评论，您需要做的不是将此代码放在一个`$(function() {})`块中，而是需要将它放在一个事件块中，以用于触发加载的任何内容。查看 pjax 文档，我认为有一个非常明确的答案。

[https://github.com/defunkt/jquery-pjax](https://github.com/defunkt/jquery-pjax)

它声明：“pjax 将在你要求它加载你的响应体的容器上触发两个事件。`pjax:start`和`pjax:end`”。

所以我认为如果你将 div 与 end 事件绑定，并传入你的函数，它应该可以工作。如果没有，您可能需要发布您的视图代码。

**编辑**

我想你很接近。根据您添加的代码，应该将 on 标志附加到您将 pjax 绑定到元素的位置。鉴于您发布的第一行是：

```
$('a.pjax').pjax() 
```

我想你可以尝试以下方法：

```
$('a.pjax').pjax().on('pjax:end', function(){ 
  var $container = $('#container'); 
  $container.isotope({ itemSelector: '.element' }); 
}); 
```

# javascript - 隐藏和显示时 JScrollPane 不显示

> ID：10258166
> 
> 赞同：0
> 
> 时间：2012-04-21T10:36:07.427
> 
> 标签：javascript, jquery, html, css, jquery-jscrollpane

请检查此代码：http: [//jsfiddle.net/rkumarnirmal/Rq7b2/2/](http://jsfiddle.net/rkumarnirmal/Rq7b2/2/)

我正在做的是显示一些文字。如果单击文本，则列表将与 Jscrollpane 一起显示。但是这里显示了列表并且没有显示 jscrollpane。

我在那里犯了什么错误？谁能帮助我？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T10:56:07.433

当内容改变时你必须重新调用它，

[http://jsfiddle.net/Rq7b2/3/](http://jsfiddle.net/Rq7b2/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:49:22.657

You can set the JScrollPane to auto-reinitialize.

[http://jsfiddle.net/L7KSa/](http://jsfiddle.net/L7KSa/)

[http://jscrollpane.kelvinluck.com/settings.html](http://jscrollpane.kelvinluck.com/settings.html)

> autoReinitialise - boolean (default false)
> 
> Whether jScrollPane should automatically reinitialise itself periodically after you have initially initialised it. This can help with instances when the size of the content of the scrollpane (or the surrounding element) changes. However, it does involve an overhead of running a javascript function on a timer so it is recommended only to activate where necessary. Demo.

# struts - 在 Struts 中使用复选框显示标签

> ID：10258169
> 
> 赞同：0
> 
> 时间：2012-04-21T10:36:50.000
> 
> 标签：struts, displaytag

一个列表被传递给 display:table。在表格中，我需要有一个复选框列来选择/取消选择任何被选中的交易。我如何将检查的项目与交易相关联。我还需要将此检查的事务传递给 java 脚本。谢谢

jsp代码：

```
<display:column title="<input type='checkbox' name='selectall' onClick='selectAll()' />" media="html">
    <input type="checkbox" name="selectBox" class="selectableCheckbox" id="selectBox" value="${sample.txniD}"></>
</display:column>
<display:column property="txniD" sortable="true" scope="all" title="Transaction ID %>" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T23:42:41.733

尝试提醒`value`复选框，`alert(checkboxArray[i].value);`，而不是`toString`。

# sql - sql查询显示最流行的记录

> ID：10258175
> 
> 赞同：1
> 
> 时间：2012-04-21T10:38:21.217
> 
> 标签：sql, oracle

我有四张桌子

1.  **汽车**( `car_ registration_no, class, type_code`)
2.  **出租历史**( `rent_date, car_registration_no, rent_location_code, return_location_code`)
3.  **输入**( `type_code, make, model`)
4.  **位置**( `location_code, branch_name`)

我需要一个查询来显示按位置租用的最受欢迎的汽车。我需要查询以显示上个月每个地点的总租金？

到目前为止，我的代码如下，但我无法完成：

```
SELECT car.class, car.type_code , type.make, type.model 
  FROM car , type, rental_history 
 where rental_history.car_registration_no = car.car_registration_no 
   and car.type_code = type.type_code 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T11:21:27.243

您将需要加入表格并计算数字。让我们从一个更简单的查询开始，为您指明正确的方向。

这将显示每个位置租用“type_code”汽车的次数（未经测试，可能包含错误）

```
SELECT
    count(car.car_registration_no) as rental_num,
    car.type_code,
    rental_history.rent_location_code
FROM car
LEFT JOIN rental_history ON (rental_history.car_registration_no = car.car_registration_no)
GROUP BY car.type_code, rental_history.rent_location_code; 
```

我在这里使用左连接，因为可能存在尚未租用且没有任何历史记录的汽车。而不是不显示，你将有一个“0”的租金数量。

**编辑：**

对于第二个查询，它实际上非常简单。您需要按位置分组，按日期过滤并使用 COUNT（同样，未经测试）：

```
SELECT
    count(rental_history.car_registration_no) as rental_num,
    rental_history.rent_location_code
FROM rental_history
WHERE rent_date >= '2012-03-01' AND rent_date < '2012-04-01'
GROUP BY rental_history.rent_location_code; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T10:43:03.250

加入所有表并使用计数..！

# php - 如何验证/检查插入日期到当前日期

> ID：10258178
> 
> 赞同：0
> 
> 时间：2012-04-21T10:39:22.450
> 
> 标签：php

我是 PHP 新手。我有一个存储日期的表。

```
id     nic     date
1      765     2012-04-20
2      654     2012-03-19
3      777     2011-01-08 
```

我正在使用 jQuery 日历插入日期。我不知道如何将此日期验证为当前日期，以便用户无法输入小于当前日期的日期。

我只想插入等于或大于当前日期的日期。

在我的数据选择器初始化代码中

```
var A_TCALCONF = {
    'cssprefix'  : 'tcal',
    'months'     : ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
    'weekdays'   : ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],
    'longwdays'  : ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],
    'yearscroll' : true, // show year scroller
    'weekstart'  : 0, // first day of week: 0-Su or 1-Mo
    'prevyear'   : 'Previous Year',
    'nextyear'   : 'Next Year',
    'prevmonth'  : 'Previous Month',
    'nextmonth'  : 'Next Month',
    'format'     : 'Y-m-d' //'d/m/Y' // 'd-m-Y', Y-m-d', 'l, F jS Y'
};

var A_TCALTOKENS = [
     // A full numeric representation of a year, 4 digits
    {'t': 'Y', 'r': '19\\d{2}|20\\d{2}', 'p': function (d_date, n_value) { d_date.setFullYear(Number(n_value)); return d_date; }, 'g': function (d_date) { var n_year = d_date.getFullYear(); return n_year; }},
     // Numeric representation of a month, with leading zeros
    {'t': 'm', 'r': '0?[1-9]|1[0-2]', 'p': function (d_date, n_value) { d_date.setMonth(Number(n_value) - 1); return d_date; }, 'g': function (d_date) { var n_month = d_date.getMonth() + 1; return (n_month < 10 ? '0' : '') + n_month }},
     // A full textual representation of a month, such as January or March
    {'t': 'F', 'r': A_TCALCONF.months.join('|'), 'p': function (d_date, s_value) { for (var m = 0; m < 12; m++) if (A_TCALCONF.months[m] == s_value) { d_date.setMonth(m); return d_date; }}, 'g': function (d_date) { return A_TCALCONF.months[d_date.getMonth()]; }},
     // Day of the month, 2 digits with leading zeros
    {'t': 'd', 'r': '0?[1-9]|[12][0-9]|3[01]', 'p': function (d_date, n_value) { d_date.setDate(Number(n_value)); if (d_date.getDate() != n_value) d_date.setDate(0); return d_date }, 'g': function (d_date) { var n_date = d_date.getDate(); return (n_date < 10 ? '0' : '') + n_date; }},
    // Day of the month without leading zeros
    {'t': 'j', 'r': '0?[1-9]|[12][0-9]|3[01]', 'p': function (d_date, n_value) { d_date.setDate(Number(n_value)); if (d_date.getDate() != n_value) d_date.setDate(0); return d_date }, 'g': function (d_date) { var n_date = d_date.getDate(); return n_date; }},
     // A full textual representation of the day of the week
    {'t': 'l', 'r': A_TCALCONF.longwdays.join('|'), 'p': function (d_date, s_value) { return d_date }, 'g': function (d_date) { return A_TCALCONF.longwdays[d_date.getDay()]; }},
    // English ordinal suffix for the day of the month, 2 characters
    {'t': 'S', 'r': 'st|nd|rd|th', 'p': function (d_date, s_value) { return d_date }, 'g': function (d_date) { n_date = d_date.getDate(); if (n_date % 10 == 1 && n_date != 11) return 'st'; if (n_date % 10 == 2 && n_date != 12) return 'nd'; if (n_date % 10 == 3 && n_date != 13) return 'rd'; return 'th'; }}

]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T10:45:05.293

您可以禁用 jquery 日历过去的日期，以便在插入时无需检查。

您可以在 datepicker 初始化时执行此操作。

```
var dates = $("#from").datepicker({
defaultDate: "+1w",   
minDate: new Date()
}
}); 
```

# iphone - Xcode 遇到意外错误 (0xC00D) 权限被拒绝

> ID：10258181
> 
> 赞同：2
> 
> 时间：2012-04-21T10:39:42.813
> 
> 标签：iphone, permission-denied, organizer

Xcode 无法访问我的 iPhone 4、其他 iPhone 4 或 iPad 2。我尝试重新启动设备、mac 并从 App Store 重新安装 Xcode 两次。我还尝试将所有内容的 chmods 设置为 777，删除 5.1 sdk，但没有任何帮助。

我在组织者中不断遇到的错误是：

Xcode 遇到意外错误 (0xC00D) Permission denied, at '/SourceCache/DTDeviceKit/DTDeviceKit-1196/DTDeviceKit/DTDeviceKit_Utilities.m:854'</p>

请帮忙。

我在 Apple 开发论坛上开始了相同的主题： [https ://devforums.apple.com/message/650466#650466](https://devforums.apple.com/message/650466#650466)

# iphone - 如何将变量传递给下一个视图？

> ID：10258184
> 
> 赞同：0
> 
> 时间：2012-04-21T10:40:17.103
> 
> 标签：iphone, objective-c, view, global-variables

我的应用程序有一个名为 的变量`int antalratt`，它是该视图中正确答案的数量。现在我想将该变量传递给下一个视图，我想在其中获得要显示的正确答案的数量！我知道如何为标签文本获取整数！

`int antalratt`写在 中，`firstviewcontroller.m`我如何使它“全局”，以便我可以在中使用它`secondviewcontroller`？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T10:50:11.330

在 secondviewcontroller.h 的公共接口中创建一个变量

```
@property (nonatomic, strong) NSNumber *correctAnswers; 
```

在 .m 中合成它，然后在 firstviewcontroller 中传递 antalratt 的值`secondviewcontroller.correctAnswers = [NSNumber numberWithInt:antalratt];`

到第二视图控制器。然后设置标签文本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T10:45:21.843

```
filename *detailViewController = [[filename alloc] initWithNibName:@"filename" bundle:nil];
detailViewController.audio=@"yourData";
[self presentModalViewController:detailViewController animated:YES];
[detailViewController release]; 
```

在 filename.h 中声明

```
NSString *audio;

@property(nonatomic,retain) NSString *audio; 
```

和文件名.m

```
@synthesize audio;

 -(void) ViewDidLoad
 { 
      NSLog(@"Audio = %@",audio);   // if ur variable is integer declare %d in nslog.
 } 
```

就这样

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T11:54:19.637

**方法一：**

根视图控制器

```
-(IBAction)nextPage{

    int antalratt = 12;    // Value to be transfered

    FirstViewController * fvc = [[FirstViewController  alloc] initWithNibName:@"FirstViewController" bundle:nil];
    fvc.answer = antalratt;
    [self presentModalViewController:fvc animated:YES];
    [fvc release];

} 
```

第一视图控制器

```
@interface FirstViewController : UIViewController
{

    int answer;
}
@property(nonatomic,assign) int  answer;

@implementation FirstViewController
@synthesize answer;

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSLog(@"%d",answer);   // //displays answer on log
}

@end 
```

**方法二（AppDelegate）**

应用委托

```
@interface AppDelegate : UIResponder <UIApplicationDelegate>
{

    int antalratt;
}
@property(nonatomic ,assign) int antalratt; 
```

根视图控制器

```
-(IBAction)nextPage{

    int antalratt = 12;    // Value to be transfered
    AppDelegate * delegate = [[UIApplication sharedApplication] delegate];
    delegate.antalratt = antalratt;

    FirstViewController * fvc = [[FirstViewController  alloc] initWithNibName:@"FirstViewController" bundle:nil];
    [self presentModalViewController:fvc animated:YES];
    [fvc release];
} 
```

第一视图控制器

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    AppDelegate * delegate = [[UIApplication sharedApplication] delegate];
    NSLog(@"%d",delegate.antalratt);  //displays answer on log
} 
```

**方法 3 (NSUserDefaults)**

根视图控制器

```
-(IBAction)nextPage{
    int antalratt = 12;    // Value to be transfered
    [[NSUserDefaults standardUserDefaults] setInteger:antalratt forKey:@"answer"];
    FirstViewController * fvc = [[FirstViewController  alloc] initWithNibName:@"FirstViewController" bundle:nil];
    [self presentModalViewController:fvc animated:YES];
    [fvc release]; } 
```

第一视图控制器

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    int ans = [[[NSUserDefaults standardUserDefaults] objectForKey:@"answer"] intValue];
    NSLog(@"%d",ans);  //displays answer on log
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T11:36:38.180

// view1.h

```
@interface view1 : UIView{

NSString *passingVariable;

}

@property (nonatomic, strong) NSString *passingVariable;

@end 
```

//

```
view1.m

@synthsize passingVariable;

@implementation view1

@end 
```

// 在另一个视图中

```
view2.m

#import "view1.h"

@implementation view2

-(IBAction)changeview

{

  view1 *myview = [[view1 alloc]init];

  myview.passingVariable = [NSString stringWithString:@"Hello Variable"];

  [self.navigationController pushViewController:myview animated:YES];

 }

@end 
```

# java - 使用 kyrillic 字符（utf16？）从 java 打开浏览器

> ID：10258187
> 
> 赞同：1
> 
> 时间：2012-04-21T10:40:26.403
> 
> 标签：java, character-encoding

有人可以帮助解决字符串字符问题吗？任何想法如何从 java 程序中打开带有 kyrillic 字符的浏览器？

在我的 JAVA 程序中，我有一个带有 kyrillic 字符的字符串。它是一个 URL，我喜欢用它来打开带有“ProcessBuilder”的浏览器。浏览器打开，但在 url 中没有出现 kyrillic 字符。仅有的 ？？？？？？？？？？？。

任何想法如何从 java 程序中打开带有 kyrillic 字符的浏览器？

问候

```
 String url = "https://www.google.ch/search?q=" + sKyrillic + "&hl=de&client=firefox-a&hs=hzU&rl......";
        try {
            new ProcessBuilder("rundll32", "url.dll,FileProtocolHandler", url).start();
        } catch (IOException ex) {
            ex.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T10:55:30.647

用于[`URLEncoder`](http://docs.oracle.com/javase/7/docs/api/java/net/URLEncoder.html)将值编码为[`application/x-www-form-urlencoded`](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.1). 例如：

```
String cyrillic_letter_i = "\u0418";
String encoded = URLEncoder.encode(cyrillic_letter_i, "UTF-8");
String google = "https://www.google.ch/search?q="
              + encoded
              + "&hl=de&client=firefox-a&hs=hzU&rl......";
URI uri = URI.create(google);
Desktop.getDesktop().browse(uri); 
```

# android - 在Android地图上更改位置时如何删除标记并重新绘制它

> ID：10258192
> 
> 赞同：2
> 
> 时间：2012-04-21T10:40:44.637
> 
> 标签：android, map, location, marker

////编辑前

我正在使用下面的代码在android地图上重绘一个标记，实际上它重绘了一个标记，但它并没有删除旧的，我试过了

```
mapView.invlaidate 
```

但它并没有删除旧的。

这是 onLocationChanged 函数：

```
 @Override
 public void onLocationChanged(Location location) {
    // mapView.invalidate();

        //getCurrantPoint();
         OverlayItem currentOverlay = new OverlayItem(getCurrantPoint(),"Current Location","Here is my current location!!!");

            itemizedoverlay2.addOverlay(currentOverlay);
            mapOverlays.add(itemizedoverlay2);
            mapOverlays.remove(currentOverlay);
            Log.v("TAG", "Removeeeeeeeeeeeeeeeed");

         ///
         //mapOverlays.add(itemizedoverlay);
 } 
```

提前致谢。

/////编辑后

```
 if(itemizedoverlay2!=null)
     {
         mapOverlays.remove(itemizedoverlay2);

         itemizedoverlay2 = new HelloItemizedOverlay(drawable2, cntxt);
         OverlayItem currentOverlay = new OverlayItem(getCurrantPoint(),"Current Location","Here is my current location!!!");
         itemizedoverlay2.addOverlay(currentOverlay);

         mapOverlays.add(itemizedoverlay2);
     }
     else
     {
            itemizedoverlay2 = new HelloItemizedOverlay(drawable2, cntxt);

            OverlayItem currentOverlay = new OverlayItem(getCurrantPoint(),"Current Location","Here is my current location!!!");
            itemizedoverlay2.addOverlay(currentOverlay);
            mapOverlays.add(itemizedoverlay2);

     } 
```

非常感谢 imran khan 和 agarwal；我用你的答案来调试问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T11:01:29.127

尝试这个：

```
OverlayItem currentOverlay = new OverlayItem(getCurrantPoint(),"Current Location","Here is my current location!!!");
itemizedoverlay2.addOverlayItem(currentOverlay);
mapOverlays.getOverlays().add(itemizedoverlay2);
mapOverlays.getOverlays().remove(itemizedoverlay2);
mapOverlays.invalidate();
Log.v("TAG", "Removeeeeeeeeeeeeeeeed"); 
```

//mapOverlays 是您的 mapView 对象，而 itemizedoverlay2 是您的 LocationOverlay

*删除 LocationOverlay 即 itemizedoverlay2 而不是 OverlayItem*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T10:46:26.423

尝试这个：：：

@Override public void onLocationChanged(Location location) { // mapView.invalidate();

```
 //getCurrantPoint();
     OverlayItem currentOverlay = new OverlayItem(getCurrantPoint(),"Current Location","Here is my current location!!!");
        itemizedoverlay2.clear();
        itemizedoverlay2.addOverlay(currentOverlay);
       //in above line create new itemizedoverlay2 every time.
        mapOverlays.clear();
        mapOverlays.add(itemizedoverlay2);            

     ///
     //mapOverlays.add(itemizedoverlay); 
```

}

更新看看:::

典型的自定义叠加层如下所示。它将地图上显示的各种 OverlayItem 封装在一个列表中。

```
public class MyItemizedOverlay extends ItemizedOverlay<OverlayItem>{

    private List<OverlayItem> mOverlays = new ArrayList<OverlayItem>();

    public MyItemizedOverlay(Drawable defaultMarker) {
        super(boundCenterBottom(defaultMarker));        
    }

    @Override
    protected OverlayItem createItem(int i) {
        return mOverlays.get(i);
    }

    public void addOverlay(OverlayItem overlay) {
        mOverlays.add(overlay);
        populate();
    }

    public void removeOverlay(OverlayItem overlay) {
        mOverlays.remove(overlay);
        populate();
    }

    public void clear() {
        mOverlays.clear();
        populate();
    }

    @Override
    public int size() {
        return mOverlays.size();
    }
} 
```

方法可以公开添加/删除单个覆盖项，也可以删除所有覆盖项（清除方法）。

删除单个覆盖项

```
MyItemizedOverlay sitesOverlay =  (MyItemizedOverlay ) map.getOverlays().get(0);
sitesOverlay.removeOverlay(overlay); 
```

添加单个overlayItem

```
MyItemizedOverlay sitesOverlay =  (MyItemizedOverlay ) map.getOverlays().get(0);
sitesOverlay.addOverlay(new OverlayItem(p, "title", "snippet")); 
```

删除所有覆盖项

```
MyItemizedOverlay sitesOverlay =  (MyItemizedOverlay ) map.getOverlays().get(0);
sitesOverlay.clear(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T13:29:04.360

为什么要重新发明自己的距离计算器，[Location](http://developer.android.com/reference/android/location/Location.html)类中内置了一个。

查看

```
distanceBetween(double startLatitude, double startLongitude, double endLatitude, double endLongitude, float[] results) 
```

计算两个位置之间的近似距离（以米为单位），以及它们之间最短路径的初始和最终方位（可选）。

# django - 在 Django 中遍历多个页面上的数据

> ID：10258193
> 
> 赞同：0
> 
> 时间：2012-04-21T10:40:46.180
> 
> 标签：django, database-design

我正在尝试找到解决我的问题的最佳方法，我希望您能提供意见。我试图让用户将多个条形码扫描到文本区域中。提交后，它们被分成一个数组。*然后，用户输入将数组中每个*值的多少次迭代插入到 MySQL 数据库中。我已经使用 PHP 和会话变量实现了这一点，一次循环遍历数组。使用 Django，我发现它有点困难，我想知道我是否应该在我的数据库中有一个“临时”表，用条形码数组中的值重新填充。接下来的页面然后从表中提取每个值，而不是使用任何类型的会话变量。

编辑：我为这个令人困惑的问题道歉。让我试着澄清一下：我需要根据用户提交的数组中的每个值呈现一个视图。首次提交时，会针对第一个值呈现视图。当用户点击“下一步”时，将为数组中的第二个值呈现视图，依此类推。

至于数据库问题，每个值可以有两种“类型”。用户将在我尝试呈现的每个视图中声明将每种类型的多少添加到数据库中。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T10:53:29.793

这与 Django 无关。

忘记那个临时表。

*   在你的表中添加一个“*填充*”字段
*   选择第一个未填充的行，并按此行显示“重新填充”页面
*   然后将用户输入的数字更新回数据库，同时将“*填充*”设置为“真”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T11:20:25.613

您可能可以使用[Django 会话对象](https://docs.djangoproject.com/en/dev/topics/http/sessions/)移植您的 PHP 解决方案。

我不确定“一次一个项目”是一个功能还是“以这种方式编码更容易”的事情，但在第二种情况下 - 您可能希望使用[Django Formsets](https://docs.djangoproject.com/en/dev/topics/forms/formsets/)一次显示所有项目并且避免遍历数组。

# javascript - 在屏幕上保持分区可见

> ID：10258195
> 
> 赞同：-1
> 
> 时间：2012-04-21T10:41:31.897
> 
> 标签：javascript

我正在创建一个网页，当用户将鼠标悬停在图像上时，它会显示一个段落，该段落包含在它下面的一个分区中。当用户将光标移出图像时，分割消失。

我的问题是，当用户单击屏幕底部的图像时..我希望使用**javascript**滚动页面，直到底部的分割可见...

我想知道如何做到这一点。用什么功能？？

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T10:44:51.667

基本上你需要计算你的浏览器窗口的高度......然后还要知道你的图像的高度和它的偏移量（即它的放置位置）......

做一些数学，你会得到你想要的额外的页面滚动......只需这样做......

以下是一些适合您的功能：

```
in Internet Explorer (backward-compatibility mode):
document.body.offsetWidth, document.body.offsetHeight

in Internet Explorer (standards mode, document.compatMode=='CSS1Compat'):
document.documentElement.offsetWidth, document.documentElement.offsetHeight

in most other browsers – as well as IE9 (standards mode):
window.innerWidth, window.innerHeight (the page's visible width/height)
window.outerWidth, window.outerHeight (the browser outer width/height) 
```

直接从这里获取：[http](http://www.javascripter.net/faq/browserw.htm) ://www.javascripter.net/faq/browserw.htm 你可以在这里查看更多关于如何计算所需参数的具体示例。

# c# - 使用 Watin 打印页面

> ID：10258198
> 
> 赞同：0
> 
> 时间：2012-04-21T10:41:55.480
> 
> 标签：c#, watin

我正在使用 Watin 在浏览器（IE）中打开一些页面，而不是打印该页面，我使用 System.Windows.Forms.SendKeys.SendWait("^(p)"); 要发送打印命令，它会打开一个打印对话框，现在我想点击对话框中的“打印”按钮。锄头我可以这样做..？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:56:53.220

也许这可以帮助

```
var diag = new PrintDialogHandler(PrintDialogHandler.ButtonsEnum.Print); 
```

也许您必须摆弄它，但 PrintDialogHandler 是您问题的答案。

# android - 如何在不滚动Android的情况下获取自定义列表视图中的所有项目名称

> ID：10258199
> 
> 赞同：-2
> 
> 时间：2012-04-21T10:42:45.200
> 
> 标签：android, android-listview

在我的应用程序中，我从 MySQL 服务器数据库中获取所有图像和名称到 Android 手机。如果模拟器屏幕是[HVGA](http://en.wikipedia.org/wiki/Graphics_display_resolution#HVGA_.28480.C3.97320.29)，则只显示五个图像和名称。

在[LogCat](https://sites.google.com/site/androidhowto/how-to-1/save-logcat-to-a-text-file)中，也只打印了五个名称。当我滚动屏幕时，我能在屏幕上看到多少个名字，而只有多少个名字被打印出来？取而代之的是，所有名称都必须在滚动之前打印出来。

这是我的代码：

```
public class VegdishesListview extends BaseAdapter {
    String qrimage;
    Bitmap bmp, resizedbitmap;
    Bitmap[] bmps;
    Activity activity = null;
    private LayoutInflater inflater;

    private ImageView[] mImages;
    String[] itemimage;
    TextView[] tv;
    String itemname,price,desc;
    String[] itemnames;
    String[] prices;
    String[] descs;
    HashMap<String, String> map = new HashMap<String, String>();

    public VegdishesListview(Context context, JSONArray imageArrayJson) {
        //inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        //  imageLoader=new ImageLoader(activity);
        inflater=LayoutInflater.from(context);
        this.mImages = new ImageView[imageArrayJson.length()];
        this.bmps = new Bitmap[imageArrayJson.length()];
        this.itemnames = new String[imageArrayJson.length()];
        this.prices=new String[imageArrayJson.length()];
        this.descs=new String[imageArrayJson.length()];
        try {
            for (int i = 0; i < imageArrayJson.length(); i++) {
                JSONObject image = imageArrayJson.getJSONObject(i);
                qrimage = image.getString("itemimage");
                itemname = image.getString("itemname");
                price=image.getString("price");
                desc=image.getString("itemdesc");

                itemnames[i] = itemname;
                prices[i]=price;
                descs[i]=desc;

                byte[] qrimageBytes = Base64.decode(qrimage.getBytes());

                bmp = BitmapFactory.decodeByteArray(qrimageBytes, 0,
                                                    qrimageBytes.length);
                int width = 100;
                int height = 100;
                resizedbitmap = Bitmap.createScaledBitmap(bmp, width, height,
                                                          true);
                bmps[i] = bmp;

                mImages[i] = new ImageView(context);
                mImages[i].setImageBitmap(resizedbitmap);

                mImages[i].setScaleType(ImageView.ScaleType.FIT_START);

                // tv[i].setText(itemname);
            }
            System.out.println(map);
        } catch (Exception e) {
          // TODO: handle exception
        }
    }

    public int getCount() {
        return mImages.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(final int position, View convertView, ViewGroup parent) {
        View vi=convertView;

        vi = inflater.inflate(R.layout.vegdisheslistview, null);

        TextView text=(TextView)vi.findViewById(R.id.vegdishestext);
        ImageView image=(ImageView)vi.findViewById(R.id.vegdishesimage);
        TextView text1=(TextView)vi.findViewById(R.id.vegdishesprice);
        TextView text2=(TextView)vi.findViewById(R.id.vegdishesdesc);
        image.setImageBitmap(bmps[position]);
        text.setText(itemnames[position]);
        text1.setText(prices[position]);
        text2.setText(descs[position]);
        System.out.println(itemnames[position]);

        return vi;
    }
} 
```

在这里，我想打印所有项目名称，`System.out.println(itemnames[position]);` 而不是滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T10:57:57.770

`getView`仅对显示的项目调用方法，因此您应该像这样放置代码

```
for(String itemname: itemnames)
  System.out.println(itemname); 
```

在构造函数的末尾（之后`System.out.println(map);`）做它而不是从打印`getView`

# jquery - jQuery：如何在动画堆栈中使用延迟

> ID：10258200
> 
> 赞同：4
> 
> 时间：2012-04-21T10:42:46.147
> 
> 标签：jquery, jquery-deferred

在动画序列完成后，我无法确定如何使用 Deferreds 运行回调。如果我只为一件事制作动画，我知道我可以`.promise()`在动画/淡入淡出/幻灯片的末尾使用，但是在尝试为多个事物制作动画时，我不确定如何使用它。

到目前为止，我的代码如下：

```
var delayTime = 0;
$stack = $('li'); // returns five list items.
$stack.each(function(index, element) {
    $(element).delay(delayTime).animate({ opacity: 0.3 }, 500, function() {
        $(element).animate({ opacity: 1 }, 500);
    });
    delayTime += 1250;
}); 
```

在所有元素相继淡入淡出之后，我想在最后运行一个回调。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T11:51:10.623

```
<script src="js/jquery/jquery-1.7.1.js"></script>

<ul>
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
    <li>5</li>
</ul>

<script>
    $(function() {
        var delayTime = 0;
        var $stack = $("li");
        $stack.each(function(index, element) {
            $(element)
                .delay(delayTime)
                .animate({ opacity: .3 }, 500)
                .animate({ opacity: 1 }, 500);
            delayTime += 1250;
        }).promise().done(function() {
            $stack.parent().append("<li>Hello!</li>");
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T12:25:46.717

这是设置自定义函数队列的默认 jQuery 方式：

```
articleDiv.queue("createPages",function(next){articleDiv.html(loader);next()});//step 1
articleDiv.delay(800,"createPages");//add delay after step 1
articleDiv.queue("createPages",function(next){articleDiv.html(content);next()});//step 2
articleDiv.delay(800,"createPages");//add delay after  step2
articleDiv.dequeue("createPages");//process the entire queue 
```

一些基本规则：上面示例中的 articleDiv 是 var articleDiv=$('#the_container_of_the_animation') 并且 createPages 是您正在创建的队列的名称。我希望这几乎涵盖了它。

# html - 将 tr 标签与 div 分组真的是个坏主意吗？

> ID：10258202
> 
> 赞同：24
> 
> 时间：2012-04-21T10:42:58.327
> 
> 标签：html, backbone.js, html-table

我正在使用 Backbone.js 开发应用程序 View 类在渲染后返回一个元素。如果我使用 div 或 span 也没关系。但是当我开始将对象呈现为 tr 行时，问题就开始了。一个对象应呈现为 2-3 行。那么我可以使用这个结构吗？

```
<table>
    <div>
        <tr>...</tr>
        <tr>...</tr>

    </div>
</table> 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-04-21T10:44:33.663

表标签内的 div 是无效的。改用 tbody

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-21T10:50:50.423

是的，这是一个非常糟糕的主意。

HTML 规范不允许 div 元素成为 table 元素的子元素，因此它会触发浏览器中的错误恢复例程。

鉴于此输入：

```
<table>
  <tr><td>1</td></tr>
<div>
  <tr><td>2</td></tr>
  <tr><td>3</td></tr>
</div>
  <tr><td>4</td></tr>
<div>
  <tr><td>5</td></tr>
  <tr><td>6</td></tr>
</div> 
```

Firefox 将生成的 DOM（您可以使用 Inspect Element 功能查看）如下所示：

```
<div>
  </div><div>
  </div><table>
  <tbody><tr><td>1</td></tr>
<tr><td>2</td></tr>
  <tr><td>3</td></tr>

  <tr><td>4</td></tr>
<tr><td>5</td></tr>
  <tr><td>6</td></tr>

</tbody></table> 
```

请注意， div 元素已从表格中删除并放置在其前面。这使得它们对于操作行毫无用处。

HTML 提供了[thead、tfoot 和 tbody](http://www.w3.org/TR/html4/struct/tables.html#h-11.2.3)元素来对表格行进行分组。使用其中适当的元素代替 div 元素（您可以只有一个 thead 和一个 tfoot，但对 tbody 元素的数量没有限制）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T10:47:18.457

那不是有效的 HTML。您不能在表格中嵌套块或内联元素，只能嵌套表格元素，例如`<tbody>`、`<tr>`或`<thead>`。您当然可以将 a 嵌套`<div>`在表格单元格（`<td>`或`<th>`）中。

# java - 并行深度优先搜索

> ID：10258204
> 
> 赞同：0
> 
> 时间：2012-04-21T10:43:10.017
> 
> 标签：java, multithreading, algorithm, depth-first-search

我有一个巨大的二叉树（每个节点都有一个通过和失败节点），我想遍历这棵树以便使用 DFS 获取所有可能的路径。由于树很大，使用单线程进行 DFS 所花费的时间非常长。所以为了解决这个问题，我现在正在考虑做并行DFS。基本思路如下。

*   从单个线程开始并执行正常的 DFS，因为这会命中一个节点，生成一个以失败节点作为起始节点的新线程，并将该节点传递给该调用到目前为止
*   初始线程在 pass 的路径中继续
*   最后，每个线程都会返回一个它经过的节点列表；因此，我会用多个线程遍历整个树。由于所谓的父线程将其经过的节点的信息传递给子线程，因此每个线程都被称为自给自足

为了实现这一点，我正在考虑这样做

*   使用 newCachedThreadPool。
*   在 Main 中，我将创建 Pool，并启动对 Callable DFS 类的初始调用。DFS 类的构造函数也将采用 ExecutorService，以便新生成的 Thread 也可以使用上述规则生成新的 Thread

**DFS的代码实现**

```
 public class DFS implements Callable<List<List<TestNode>>> {
        private Node node = null;
        private List<TestNode> testNodeList = new ArrayList<TestNode>();
        private List<List<TestNode>> returnNodeList = new ArrayList<List<TestNode>>();
        private ExecutorService service = null;

        public DFS(ExecutorService service, Node node, List<TestNode> initList) {
           this.node = node;
           this.service = service;
           if (initList != null && initList.size() > 0) {
              testNodeList.addAll(initList);
        }
    }

    public List<List<TestNode>> call() throws Exception {
         performDFS(this.node);
         returnNodeList.add(testNodeList);
         return returnNodeList;
    }

    private void performDFS(Node node) {
         TestNode testNode = new TestNode();
         testNode.setName(node.getName());
         Thread t = Thread.currentThread();
         testNode.setThreadName(t.getName());
         testNodeList.add(testNode);

         if (node.getPass() != null) {
            performDFS(node.getPass());
         }
         if (node.getFail() != null) {
             Callable<List<List<TestNode>>> task = new DFS(service, node.getFail(),         
             this.testNodeList);
             Future<List<List<TestNode>>> returnList = service.submit(task);
             try {
                 returnNodeList.addAll(returnList.get());
             }
             catch (InterruptedException e) {
             }
             catch (ExecutionException e) {
             }
       }
    } 
```

}

**主班**

```
 public static void main(String[] args) {
          Main main = new Main();
          Node root = main.createTree();
          ExecutorService service = Executors.newCachedThreadPool();
          Callable<List<List<TestNode>>> task = new DFS(service, root, null);

          Future<List<List<TestNode>>> returnList = null;
          try {
             returnList = service.submit(task);
         }
         catch (Exception e) {
         }
         try {
            main.displayTestNode(returnList.get());
            service.shutdown();
         }
         catch (InterruptedException e) {
        }
        catch (ExecutionException e) {
      }
   } 
```

**问题**

*   这有意义吗？这甚至可能吗？
*   实现有问题，因为我可以一次又一次地看到同​​一个线程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T10:49:03.243

是的，可以编写并行 DFS。也可以使用线程池，但我认为[fork/join](http://gee.cs.oswego.edu/dl/papers/fj.pdf)风格的算法会更“自然”。fork 操作将并行遍历节点的所有子节点，而 join 操作将简单地连接返回的路径列表。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-21T11:00:50.183

好吧，我认为最大的问题是多线程对您没有帮助，因为您永远不会并行执行任何事情。您生成一个线程，然后立即等待，因此只有一个线程可以同时计算任何东西。

要问的另一个问题是为什么（以及是否）您想要所有路径的列表。在树中，来自根的路径由它们的端点唯一标识（并且可以通过遵循“向上”链接从那里重建）。`N`此外，所有路径的列表具有更大的内存复杂度（在具有节点的完全平衡二叉树中，树的内存复杂度为`O(N)`，而所有路径列表的内存复杂度为`O(N*log(N))`，这将是其时间复杂度创造，也是）。即使树中没有提供“向上”链接，您也可以`IdentitiyHashMap<Node, Node>`在`O(N)`时间，这将花费您更少的时间（和内存！）而不是构建所有路径的列表。我真的不认为您应该通过将大树转换为浪费的表示来开始处理大树。

# wpf - 如何在外部资源字典中的资源字典中多次使用样式？

> ID：10258207
> 
> 赞同：0
> 
> 时间：2012-04-21T10:44:27.417
> 
> 标签：wpf, mvvm, resourcedictionary

我在资源字典中有一个按钮样式，现在我想在另一个资源中多次使用这种样式（对于几个按钮），但它只影响最后一个按钮。这里有什么问题？

编辑：这是我的风格：（CommonControlStyles.xaml）

```
 <ResourceDictionary .....>
 .
 .
 .
 <Style  TargetType="{x:Type Button}" x:Key="ListButtonsStyle">
    <Setter Property="MaxHeight" Value="35"/>
    <Setter Property="Width" Value="20"/>
    <Setter Property="Content">
        <Setter.Value>
            <Image Source="Images\up.png"/>
        </Setter.Value>
    </Setter>
</Style>
.
.
.
</ResourceDictionary> 
```

现在我想在另一个资源字典中使用这种样式（myResourcedictionary.Xaml）

```
 <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="/...StyleResource;component/CommonControlStyles.xaml" />
        </ResourceDictionary.MergedDictionaries>

 <Button  x:Name="btn1"  Grid.Column="0" Style="{DynamicResource ListButtonsStyle}"/>
 <Button  x:Name="btn2"  Grid.Column="0" Style="{DynamicResource ListButtonsStyle}"/>
 <Button  x:Name="btn3" Grid.Column="0" Style="{DynamicResource ListButtonsStyle}"/> 
```

但它只对 btn3 有影响！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T12:56:02.570

不是`DynamicResource`应该的`StaticResource`。

您应该使用`DynamicResource`可变资源（例如：系统颜色）。但你的风格是不变的，`StaticResource`应该是你的选择。

# boost - FreeBSD，Boost，编译失败

> ID：10258222
> 
> 赞同：0
> 
> 时间：2012-04-21T10:45:41.453
> 
> 标签：boost, freebsd

我正在尝试在使用 boost 的 FreeBSD（不是我的）上编译一些代码，但是当我运行 Makefile 时，出现以下错误：

```
g++ -Wall -I/usr/local/include/boost `taglib-config --cflags` -fPIC -O3 -DBOOST_UBLAS_NDEBUG -DNDEBUG -c -o Codegen.o Codegen.cxx
在 SubbandAnalysis.h:11 包含的文件中，
                 来自指纹.h:12,
                 来自 Codegen.cxx:13：
MatrixUtility.h:12:42: 错误: boost/numeric/ublas/matrix.hpp: 没有这样的文件或目录
MatrixUtility.h:13:48: 错误: boost/numeric/ublas/matrix_proxy.hpp: 没有这样的文件或目录
在 SubbandAnalysis.h:11 包含的文件中，
                 来自指纹.h:12,
                 来自 Codegen.cxx:13：
MatrixUtility.h:15: 错误: 'boost' 尚未声明
MatrixUtility.h:15：错误：“ublas”不是命名空间名称

```

我确实安装了boost，文件`matrix.hpp`等确实在文件夹中`/usr/local/include/boost/numeric/ublas/`。

我能做些什么来修复它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T10:53:28.407

`-I/usr/local/include/boost`应该只是`-I/usr/local/include`

就像现在一样，编译器搜索 /usr/local/include/boost/boost/numeric/ublas/matrix.hpp

# listview - Android：不可能有一个带有列表视图元素的混合屏幕吗？

> ID：10258223
> 
> 赞同：0
> 
> 时间：2012-04-21T10:45:43.870
> 
> 标签：listview, android-layout

可能是一个布局文件可以解释我在说什么

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ListView
    android:id="@+id/listview"
    android:layout_width="match_parent"
    android:layout_height="400dp" />

<LinearLayout
    android:id="@+id/sublayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

  <Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/text_btn1"
    android:onClick="select" />

  <Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/text_btn2"
    android:onClick="select2" />

</LinearLayout> 
```

如您所见，linearlayout 充当根布局元素

我想要的是 80% 的屏幕的列表视图，接下来 20% 的屏幕将由其他元素组成，例如按钮。在android中不可能这样做吗？如果是这样，我应该处理哪个属性？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T08:52:48.907

我认为解决方案是使用`android:layout_weight`，因此您可以指定多个视图之间的大小比例。试试这个：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ListView
    android:id="@+id/listview"
    android:layout_width="fill_parent"
    android:layout_height="0dp" 
    android:layout_weight="80"/>

<LinearLayout
    android:id="@+id/sublayout"
    android:layout_width="fill_parent"
    android:layout_height="0dp" 
    android:layout_weight="20">

 <Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/text_btn1"
    android:onClick="select" />

 <Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/text_btn2"
    android:onClick="select2" />

</LinearLayout>
</LinearLayout> 
```

# java - 更改背景颜色可编辑的 JComboBox

> ID：10258224
> 
> 赞同：4
> 
> 时间：2012-04-21T10:46:00.423
> 
> 标签：java, swing, jcombobox, java-7, setbackground

我正在 JFrame 表单中编写一个可编辑的组合框，但我想更改背景颜色。

程序是如何工作的：如果我点击按钮“按下”，那么他的背景组合框需要变成黑色。

**我试过了：**

**1.**

```
cbo.setBackground(Color.BLACK); 
```

但它什么也没做

**2**

```
cbo.getEditor().getEditorComponent().setBackground(Color.BLACK);

((JTextField) cbo.getEditor().getEditorComponent()).setOpaque(true); 
```

做这个：

![图片](../Images/a1dfffe1ce91ad0f89a7e76888d46616.png)

代码示例：

```
public class NewJFrame extends javax.swing.JFrame {

    private JComboBox cboCategorie;

    public NewJFrame() {
        initComponents();

        cboCategorie = new JComboBox();
        cboCategorie.setBounds(10, 10, 250, 26);
        cboCategorie.setVisible(true);
        cboCategorie.setEditable(true);
        this.add(cboCategorie);

    }

private void pressActionPerformed(java.awt.event.ActionEvent evt) {
        cboCategorie.getEditor().getEditorComponent().setBackground(Color.BLACK);
        ((JTextField) cboCategorie.getEditor().getEditorComponent()).setOpaque(true);
} 
```

我正在使用 Java JDK7

有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T10:58:33.643

看我的代码示例

![在此处输入图像描述](../Images/ca991c392ddadaa52dd32bad0d5da74a.png)

```
import java.awt.*;
import java.util.Vector;
import javax.swing.*;
import javax.swing.UIManager;
import javax.swing.plaf.ColorUIResource;
import javax.swing.plaf.metal.MetalComboBoxButton;

public class MyComboBox {

    private Vector<String> listSomeString = new Vector<String>();
    private JComboBox someComboBox = new JComboBox(listSomeString);
    private JComboBox editableComboBox = new JComboBox(listSomeString);
    private JComboBox non_EditableComboBox = new JComboBox(listSomeString);
    private JFrame frame;

    public MyComboBox() {
        listSomeString.add("-");
        listSomeString.add("Snowboarding");
        listSomeString.add("Rowing");
        listSomeString.add("Knitting");
        listSomeString.add("Speed reading");
//
        someComboBox.setPrototypeDisplayValue("xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx");
        someComboBox.setFont(new Font("Serif", Font.BOLD, 16));
        someComboBox.setEditable(true);
        someComboBox.getEditor().getEditorComponent().setBackground(Color.YELLOW);
        ((JTextField) someComboBox.getEditor().getEditorComponent()).setBackground(Color.YELLOW);
//
        editableComboBox.setPrototypeDisplayValue("xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx");
        editableComboBox.setFont(new Font("Serif", Font.BOLD, 16));
        editableComboBox.setEditable(true);
        JTextField text = ((JTextField) editableComboBox.getEditor().getEditorComponent());
        text.setBackground(Color.YELLOW);
        JComboBox coloredArrowsCombo = editableComboBox;
        Component[] comp = coloredArrowsCombo.getComponents();
        for (int i = 0; i < comp.length; i++) {// hack valid only for Metal L&F
            if (comp[i] instanceof MetalComboBoxButton) {
                MetalComboBoxButton coloredArrowsButton = (MetalComboBoxButton) comp[i];
                coloredArrowsButton.setBackground(null);
                break;
            }
        }
//
        non_EditableComboBox.setPrototypeDisplayValue("xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx");
        non_EditableComboBox.setFont(new Font("Serif", Font.BOLD, 16));
//
        frame = new JFrame();
        frame.setLayout(new GridLayout(0, 1, 10, 10));
        frame.add(someComboBox);
        frame.add(editableComboBox);
        frame.add(non_EditableComboBox);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocation(100, 100);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        UIManager.put("ComboBox.background", new ColorUIResource(Color.yellow));
        UIManager.put("JTextField.background", new ColorUIResource(Color.yellow));
        UIManager.put("ComboBox.selectionBackground", new ColorUIResource(Color.magenta));
        UIManager.put("ComboBox.selectionForeground", new ColorUIResource(Color.blue));
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                MyComboBox aCTF = new MyComboBox();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-28T00:13:11.450

结果很容易。创建渲染器并设置背景颜色。然后覆盖渲染器的 setOpaque 方法以始终将不透明度设置为 true。

```
class PDFChooser extends JComboBox<String>  {
    PDFChooser() {
        setRenderer(new Renderer());
    }
    class Renderer extends DefaultListCellRenderer {
        @Override 
        public void setOpaque(boolean makeBackGroundVisible) {
            super.setOpaque(true);     // THIS DOES THE TRICK
        }
        @Override
        public Component getListCellRendererComponent(JList<?> list, 
                    Object value, int index, 
                    boolean isSelected, boolean cellHasFocus) {
            setText((String)value);
            setBackground(Color.cyan);
            return this;
        }
    }
} 
```

如果您希望弹出菜单使用 LAF 背景，您可以添加一个 PopupMenuListener 来记录弹出菜单何时弹出。那时，setOpaque 方法会将不透明度设置为 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-28T05:51:35.673

它对我来说可以更改 JComboBox 中选定项目的颜色。

```
 JComboBox cmb = new JComboBox();
    cmb.setEditable(true);
    cmb.setEditor(new WComboBoxEditor(getContentPane().getBackground()));

    // To change the arrow button's background        
    cmb.setUI(new BasicComboBoxUI(){
        protected JButton createArrowButton()
        {
            BasicArrowButton arrowButton = new BasicArrowButton(BasicArrowButton.SOUTH, null, null, Color.GRAY, null);
            return arrowButton;
        }
    });
    cmb.setModel(new DefaultComboBoxModel(new String[] { "a", "b", "c" })); 
```

```
import java.awt.Color;
import java.awt.Component;
import java.awt.event.ActionListener;
import javax.swing.ComboBoxEditor;
import javax.swing.JTextField;

public class WComboBoxEditor implements ComboBoxEditor
{
    JTextField tf;

    public WComboBoxEditor(Color background)
    {
        tf = new JTextField();
        tf.setBackground(background);
        tf.setBorder(null);
    }

    public Component getEditorComponent()
    {
        return tf;
    }

    public void setItem(Object anObject)
    {
        if (anObject != null)
        {
            tf.setText(anObject.toString());
        }
    }

    public Object getItem()
    {
        return tf.getText();
    }

    public void selectAll()
    {
        tf.selectAll();
    }

    public void addActionListener(ActionListener l)
    {
        tf.addActionListener(l);
    }

    public void removeActionListener(ActionListener l)
    {
        tf.removeActionListener(l);
    }

} 
```

如果您想更改 JCombobox 中项目的颜色（除了选定的项目），请自定义 ListCellRenderer。

# ssrs-2008 - SSRS 将多个数据集组合成一张图

> ID：10258227
> 
> 赞同：3
> 
> 时间：2012-04-21T10:46:22.870
> 
> 标签：ssrs-2008, reporting-services, ssrs-tablix, ssrs-grouping

我一直在网上寻找一种在 SSRS (2008 R2) 中完全组合数据集的方法。

基本上，我需要创建一个由多个不同数据集组成的表和图形（所有数据集都具有以下相同的列），这些数据集是从多个 sql 服务器中检索的（阻止我将它们组合在一个查询中）

可以将数据集组合成一个数据集或表格，我可以从中生成一个图表（这是我的要求），如下所示？

提前致谢。

```
DataSetA (ServerA)
ProductName    Sold    Remaining
Product1       4       8
Product2       13      7
Product3       34      57

DataSetB (ServerB)
ProductName    Sold    Remaining
Product4       34      12
Product5       21      32
Product6       16      20

DataSetC (ServerC)
ProductName    Sold    Remaining
Product7       45      28
Product8       22      56
Product9       7       4

-->Combined into

Table/DataSetD 
ProductName    Sold    Remaining
Product1       4       8
Product2       13      7
Product3       34      57
Product4       34      12
Product5       21      32
Product6       16      20
Product7       45      28
Product8       22      56
Product9       7       4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T01:15:19.770

最简单的解决方案是创建从一个 SQL 服务器到另外两个的链接服务器。然后可以将您的报告查询修改为通过链接连接加入或联合数据。

Microsoft 提供的有关创建链接服务器的过程的指南如下：

[http://msdn.microsoft.com/en-us/library/aa560998(v=bts.10).aspx](http://msdn.microsoft.com/en-us/library/aa560998(v=bts.10).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:49:17.307

您的问题出在数据源级别。数据集仅从一个数据源读取数据，因此您所要求的（您所要求的方式）是不可能的。

您可以做的是编写您的自定义数据处理扩展来实现这一点。检查[此](http://www.codeproject.com/Articles/272652/SSRS-Multi-Data-Source-DPE-Data-Processing-Extensi)链接

# matlab - 是否有任何直接功能可以执行一维数据插值（表格查找）

> ID：10258229
> 
> 赞同：1
> 
> 时间：2012-04-21T10:46:33.043
> 
> 标签：matlab, opencv, computer-vision

我对opencv很陌生...我需要预测opencv中两个线性数据数组的值之间的值。我将为此做...例如，我们在matlab中使用interp1函数。

```
tab =
    1950    150.697
    1960    179.323
    1970    203.212
    1980    226.505
    1990    249.633
then the population in 1975, obtained by table lookup within the matrix tab, is

p = interp1(tab(:,1),tab(:,2),1975)
p =
    214.8585 
```

我们如何在opencv中做到这一点...请帮助我..提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T15:26:40.523

您可以尝试使用 OpenCV 中内置的回归函数。但是对于您似乎正在做的简单线性插值，您自己编写它可能更容易。

```
double interpolate(int x1, double y1, int x2, double y2, int targetX)
{
  int diffX = x2 - x1;
  double diffY = y2 - y1;
  int diffTarget = targetX - x1;

  return y1 + (diffTarget * diffY) / diffX;
} 
```

此函数线性插值给定两个给定数据点的目标值。

如果你想像 matlab 函数一样使用它，一次提供所有数据点，你需要一个函数来选择两个最近的邻居。像这样的东西：

```
double interpolate(Mat X, Mat Y, int targetX)
{
  Mat dist = abs(X-targetX);
  double minVal, maxVal;
  Point minLoc1, minLoc2, maxLoc;

  // find the nearest neighbour
  Mat mask = Mat::ones(X.rows, X.cols, CV_8UC1);
  minMaxLoc(dist,&minVal, &maxVal, &minLoc1, &maxLoc, mask);

  // mask out the nearest neighbour and search for the second nearest neighbour
  mask.at<uchar>(minLoc1) = 0;
  minMaxLoc(dist,&minVal, &maxVal, &minLoc2, &maxLoc, mask);

  // use the two nearest neighbours to interpolate the target value
  double res = interpolate(X.at<int>(minLoc1), Y.at<double>(minLoc1), X.at<int>(minLoc2), Y.at<double>(minLoc2), targetX);
  return res;
} 
```

这是一个小例子，展示了如何使用它：

```
int main()
{
  printf("res = %f\n", interpolate(1970, 203.212, 1980, 226.505, 1975));

  Mat X = (Mat_<int>(5, 1) <<
  1950, 1960, 1970, 1980, 1990);
  Mat Y = (Mat_<double>(5, 1) <<
  150.697, 179.323, 203.212, 226.505, 249.633);
  printf("res = %f\n", interpolate(X, Y, 1975));

  return 0;
} 
```

我没有对此进行广泛的测试。所以你可能需要修复一些错误。

# javascript - JSON.parse：JSON 数据后出现意外的非空白字符

> ID：10258230
> 
> 赞同：8
> 
> 时间：2012-04-21T10:46:41.323
> 
> 标签：javascript, jquery, json

我希望创建一个从 4 个选择菜单的选定选项派生的 JSON 对象。这些菜单可能在加载时选择了选项（由于服务器端技术），或者可能没有选择任何选项！使用 $(document).ready() 加载页面后，我的脚本就会运行……但是我遇到了 JSON 对象“<strong>JSON.parse：JSON 数据后意外的非空白字符”的问题</p>

我希望我的 JSON 具有以下结构

```
selObj = {

    category: selectedCategory, // we can only have 1 category, this isn’t giving me a problem…

    catOptions:{
        optionValue:discountValue, // we can have many of these
        optionValue:discountValue,
        optionValue:discountValue
    },

    tariff:{
        tariffValue:discountValue, // we can have many of these
        tariffValue:discountValue
    },

    tarOptions:{
        tarOption:discountValue, // we can have many of these

    }

}; 
```

好的，这是我的函数，为了简化，我在这里删除了一些项目，但是我将一个原始的空对象作为参数传递给函数，然后希望修改它，因为如果我想将 JSON 对象传递回服务器/when the select menus are changed… but for now we're just dealing with the page loading… the function also shows the values or what is selected in a dynamic table that is created using a function called `defaultTable()`just ignore that for now, it's the填充我感兴趣的 JSON 对象（并且遇到问题）。

```
var selectMenuArray = ["cat", "catOpt", "tariff", "tariffOpt"], // these are the IDs of the select menus...     
selObj = {};

function setUpTable(selectArray, theObj){

    // okay, if we enter the page and and the user already has a tarif selected (so it is shown in the menus) we wish to show the table with the 
    // default/original values...

    var currentSelect,
        catA = [],
        catOptA = [],
        tarA = [],
        tarOptA  = [],
        catOptForObj,
        tariffForObj,
        tariffOptForObj,
        temp1 = {},
        temp2 = {},
        temp3 = {},
        i;

    // loop through the 4 menus and see what is selected
    for(i=0;i<selectArray.length;i++){
    // let's look at the options to see if any are selected by looping through the <option>
        currentSelect = document.getElementById(selectArray[i]);

        for(j=0;j<currentSelect.length;j++){
            // do we have an options with the selected attribute?
            if(currentSelect.options[j].selected == true){
                // okay, we need to make sure the table is shown then the correct values are shown?
                // we know what the Menu is... selectArray[i], and this is the text... currentSelect.options[j].
                // lets build up whet's selected in Arrays...
                switch(selectArray[i]){
                    case "cat":
                        catA.push(currentSelect.options[j].value);
                        break;
                    case "catOpt":          
                        catOptA.push(currentSelect.options[j].value);
                        catOptForObj = catOptForObj + '"' + currentSelect.options[j].value + '":"' + "% to come later" + '",';
                        break;
                    case "tariff":
                        tarA.push(currentSelect.options[j].value);
                        tariffForObj = tariffForObj + '"' + currentSelect.options[j].value + '":"' + "% to come later" + '",';
                        break;  
                    case "tariffOpt":
                        tarOptA.push(currentSelect.options[j].value);
                        tariffOptForObj = tariffOptForObj + '"' + currentSelect.options[j].value + '":"' + "% to come later" + '",';
                        break;  
                    default:
                    // no default?
                }
            }
        }
    }

    // now we can build the table
    if(catA.length > 0 || catOptA.length > 0 || tarA.length > 0 || tarOptA.length > 0){

        // show table...
        $("#dynamicTableHolder table").css("visibility","visible").hide().fadeIn('slow');

        for(i=0;i<selectArray.length;i++){  
            switch(selectArray[i]){ 
                case "cat":
                    defaultTable(catA, "dtCats");
                    theObj.cat = catA[0];
                    break;
                case "catOpt":          
                    defaultTable(catOptA, "dtTariffs");
                    temp1 = '"{' + catOptForObj.substring(0, catOptForObj.length-1).replace(/undefined/g, "")  + '}"'; 
                    theObj = jQuery.parseJSON('"catOptions":' + temp1);
                    break;
                case "tariff":
                    defaultTable(tarA, "dtCatOpts");
                    temp2 = "{" + tariffForObj.substring(0, tariffForObj.length-1).replace(/undefined/g, "") + "}";
                    //theObj = jQuery.parseJSON('"tariff":' + temp2);
                    break;  
                case "tariffOpt":
                    defaultTable(tarOptA, "dtTariffOpts");
                    temp3 = "{" + tariffOptForObj.substring(0, tariffOptForObj.length-1).replace(/undefined/g, "") + "}";
                    //theObj = jQuery.parseJSON('"tarOptions":' + temp3);
                    break;  
                default:
                // no default?
            }
        }
    }

} 
```

我在制作 JSON 对象时遇到问题，我想做的是在循环时连接字符串，然后使用 jQuery.parseJSON 方法将这些字符串转换为对象……但是我没有正确执行此操作。我什至尝试在创建 temp1 时更改引号。

我知道这很复杂，我可能会问很多，但谁能看到我做错了什么。我对 jQuery.parseJSON 不太熟悉，所以任何建议都会很棒，因为我觉得我快疯了！

如果我含糊不清或不能很好地解释自己，请这么说......我也把它放在小提琴上...... [http://jsfiddle.net/itakesmack/JSRt7/1/](http://jsfiddle.net/itakesmack/JSRt7/1/)

请注意这是一个工作进度，因此某些项目可能丢失或需要开发（或者我可能有其他错误......但我希望不会）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T18:34:00.397

您正在为 parseJSON() 提供一个看起来像`'"catOptions":"{"A":"B","C":"D",}"'` parseJSON() 的字符串想要看起来像这样的东西 `'{"catOptions":{"A":"B","C":"D"}}'`

如果您要手动构建 JSON，则需要处理一些问题。

要解决您不想用引号引起来的错误`{key:value}`，它们会被 catOptForObj 中的引号破坏

如果它们可能包含双引号，则需要转义正在构建 OptForObj 字符串的值

你基本上是这样构建你的字符串的：

```
s = s + '"' + A '":"' + "B" + '",'; 
```

这将产生类似的东西`"A":"B","C":"D",`

逗号应该只存在于值之间。一种方法是先检查 s 是否为空，然后仅在附加值之前将其附加到 s 。就像是：

```
s = (s.length?(s+','):'') + '"' + A + '":"' + "B" + '"'; 
```

最好的办法是依赖像 JSON.stringify 这样的内置函数，如评论中所建议的那样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T18:37:34.403

要将值添加到 JSON 对象，您正在使用字符串。

```
catOptForObj = catOptForObj + '"' + currentSelect.options[j].value + '":"' + "% to come later" + '",'; 
```

相反，您可以尝试以下约定为 JSON 中的不同键分配值。

`catOptForObj[currentSelect.options[j].value] = "% to come later";`

# winforms - 将 DatagridviewComboboxCell 添加到新行

> ID：10258236
> 
> 赞同：1
> 
> 时间：2012-04-21T10:47:28.883
> 
> 标签：winforms, c#-4.0, datagridview, datagridviewcomboboxcell

我在按钮单击事件上添加一行并在行单元格中添加组合框，但我无法绑定该单元格组合框中的值。谁能建议我做错了什么？

```
DataGridViewRow dgr = new DataGridViewRow();            

DataGridViewComboBoxCell cbCol = new DataGridViewComboBoxCell();
cbCol.Items.Add("Test");
cbCol.Items.Add("Test");
cbCol.Items.Add("Test");
cbCol.Items.Add("Test");       

dgr.Cells.Add(cbCol);

dataGridView1.Rows.Add(dgr); 
```

上面的代码写在一个按钮点击事件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T13:53:21.943

您尝试做的事情不应该是必要的。

您的网格应该有一个类型的列，`DataGridViewComboBoxColumn`该列具有一个 DataSource 集，为该列中的所有单元格提供可用的值。

当您向网格添加新行时，您将自动在组合框列中获得一个包含您需要的值的单元格。如果您想在每一行中有不同的值，那么您可以使用`EditingControlShowing`网格的事件来更改组合框数据源。

# jquery - 对需要的智能感知和 js 文件感到困惑

> ID：10258238
> 
> 赞同：2
> 
> 时间：2012-04-21T10:47:43.383
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, razor

当我想在 VS2010 中使用智能感知时，是否还需要在我的字段顶部声明这一点？它还需要正好在前两行吗？

```
/// <reference path="jquery-1.6.2.js" />
/// <reference path="jquery.validate.js" /> 
```

我还应该声明完整路径，例如 "/script/jquery-1.6.2.js" 吗？我所拥有的是，除了 js 脚本，我还有一些像这样的文件：

```
jquery-1.7.2-vsdoc.js 
```

我不确定这一切。如果我在 VS2010 中使用 jQuery，有人可以解释一下我需要哪些。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:43:10.593

如果您想要智能感知，您需要添加对 js 文件的引用，并且它们必须位于文件顶部。引用应该有相对路径。这意味着如果您的 js 文件与 jquery.js 位于同一目录中，您只需添加

```
/// <reference path="jquery-1.6.7.js" /> 
```

如果您在使用的子目录中

```
/// <reference path="../jquery-1.7.2.js" /> 
```

jquery-1.7.2-vsdoc.js 文件给出了智能感知（[主页](http://appendto.com/community/jquery-vsdoc)）、函数定义和参数。

如果您的页面上有很多 javascript，我建议您将其拆分为插件和函数，并通过交叉引用您可以获得它们的智能感知（[所以问题](https://stackoverflow.com/questions/10171388/javascript-documentation-from-vsdoc)）。但是在生产服务器上，您应该将它们缩小到一个文件中以保存 http 请求。

# c# - 格式化不带逗号的小数

> ID：10258243
> 
> 赞同：8
> 
> 时间：2012-04-21T10:48:12.523
> 
> 标签：c#, .net, decimal

我尝试在 c# 中将小数格式化为 0:0.0 尝试了这段代码

```
string nv = textBox7.Text.Trim().Replace(',', '.');

res =  Convert.ToDecimal(nv, new CultureInfo("en-GB")); 
```

但 res 总是用逗号显示结果，也尝试过

```
new CultureInfo("en-GB") 
```

但问题仍然存在并提前感谢您。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-02-06T23:37:53.900

正如其他评论和答案所暗示的那样，您首先需要了解一些基础知识。我可能会说一些你已经知道的事情，但请耐心等待：

1.  你的`textBox7.Text`包含一个`string`，而不是一个`decimal`。
2.  如果你想要一个`decimal`for 计算，你必须转换它（我认为你已经做到了这一点）
3.  因为`res`是小数，所以每当您想查看它的值时，SOMETHING 会将其转换为`string`. `Console`当您将鼠标悬停在它上面时，无论是您将其写入还是您的调试器。该转换将使用您当前的区域设置。**这**就是为什么你总是看到逗号。
4.  要将其显示给其他人或以您想要的格式将其写入某处，您必须指定格式或 CultureInfo。

a)[标准格式](http://msdn.microsoft.com/en-us/library/dwhawy9k%28v=vs.110%29.aspx)。示例：
`Console.WriteLine(res.toString("F2"));`
这将格式化 123456，逗号后有 2 个数字：123456.00

b)[自定义格式](http://msdn.microsoft.com/en-us/library/0c899ak8%28v=vs.110%29.aspx)。示例：
`Console.WriteLine(res.toString("[##-##-##]"));`
这将输出 123456 到类似 [12-34-56]

c)[文化信息](http://msdn.microsoft.com/en-us/library/3ebe5aks%28v=vs.110%29.aspx)。示例：
`Console.WriteLine(res.ToString(CultureInfo.CreateSpecificCulture("nl-BE")));`
这将像在比利时一样输出 1234.56：带逗号 1234,56

顺便说一句，我认为 en-GB 也输出为逗号 :-)

d)[结合](http://msdn.microsoft.com/en-us/library/18sthszb%28v=vs.110%29.aspx)。发疯！两者都做！示例：
`Console.WriteLine(res.ToString("F2", CultureInfo.CreateSpecificCulture("nl-BE")));`
格式 123456 到 123456,00 ！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T10:51:42.210

`res`是一个`decimal`，而不是一个字符串。所以它不能有格式。小数是没有关联格式的纯数学数字。该格式仅在您将 a 转换`decimal`为 a时才存在`string`。

您可以使用`res.ToString(CultureInfo.InvariantCulture)`来生成`.`用作小数分隔符的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-24T16:45:06.433

这将为您提供没有逗号的小数点，例如“15000.00”：

```
FormatNumber(nv, , , , 0) 
```

# java - Java：使用 Class.forName 动态获取自身的新实例

> ID：10258245
> 
> 赞同：1
> 
> 时间：2012-04-21T10:48:28.963
> 
> 标签：java, reflection

假设我有一个名为 Dog 的类，它是 Animal 的子类

我有一个方法需要根据字符串参数创建特定动物子类的实例

```
public void createAnimalType(String animalType) {

Class clazz = Class.forName(animalType);

//Check if animalType  equals Dog, or Cat, or Fox, etc
// Example
Dog dog = (Dog) clazz.newInstance();
... 
```

在这种情况下，有没有办法在不使用子类（狗）的显式转换的情况下创建自身的实例（狗、猫等，不是动物类型）？

我可能错过了一个更好的多态性（就像我为什么要这样做......应该将它转换为 Object 或 Anmial :-)）

感谢您帮助我在这方面变得聪明。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T10:50:34.963

如果有无参数构造函数，则可以使用`getClass().newInstance()`.

`getClass()`在超类中使用时将为您提供实际的类`this`，例如`Dog`在您的示例中。

您的整个方法将变为：

```
public Animal createAnimal() {
    return getClass().newInstance();
} 
```

# node.js - 尝试让 Mocha 观看我的项目时出现“没有这样的模块”错误

> ID：10258248
> 
> 赞同：7
> 
> 时间：2012-04-21T10:48:56.547
> 
> 标签：node.js, windows-7, mocha.js

我试图让 Mocha 观看我的项目进行测试并不断运行测试，但是当我使用该`-w`标志时出现错误。

这里测试执行得很好：

```
C:\Foo>mocha

  .

  ? 1 tests complete (3ms) 
```

在这里`-w`

```
C:\Foo>mocha -w

node.js:201
        throw e; // process.nextTick error, or 'error' event on first tick
              ^
Error: No such module
    at EventEmitter.<anonymous> (node.js:392:27)
    at Object.<anonymous> (C:\Users\Greg\AppData\Roaming\npm\node_modules\mocha\bin\_mocha:203:11)
    at Module._compile (module.js:441:26)
    at Object..js (module.js:459:10)
    at Module.load (module.js:348:31)
    at Function._load (module.js:308:12)
    at Array.0 (module.js:479:10)
    at EventEmitter._tickCallback (node.js:192:40) 
```

我已经全局安装了 Mocha ( `npm install -g mocha`) 并且应该在本地安装到项目中。

我在 64 位 Windows 7 家庭高级版上使用节点 v0.6015、Mocha 1.0.1 和应该 0.6.1。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T10:33:00.263

通过更改几个 mocha 源代码文件，我能够使其在 Windows 上运行。在 npm install mocha 之后（在我的情况下，我只是为我的项目安装它，而不是全局安装）：

1）首先去**node_modules\mocha\lib\utils.js**找到并修复*watch*函数如下：

```
exports.watch = function(files, fn) {
    var options = { interval: 100 };
    files.forEach(function(file) {
        debug('file %s', file);
        fs.watch(file, options, function(curr, prev) {
            fn(file);
        });
    });
}; 
```

我用 fs.watch 替换了 fs.watchFile（有关详细信息，请参阅[https://github.com/fgnass/node-dev/issues/26](https://github.com/fgnass/node-dev/issues/26)），因为第一个似乎不适用于 Windows。

2) 现在打开**node_modules\mocha\bin\_mocha**并应用以下修复：

a) 查找并注释掉或删除以下代码：

```
process.on('SIGINT', function(){
  showCursor();
  console.log('\n');
  process.exit();
}); 
```

由于上面没有等效的 POSIX 信号行（理想情况下由正确的实现替换，请参阅[Node.js 中 process.on('SIGINT') 的 Windows 等效项是什么？](https://stackoverflow.com/questions/10021373/what-is-the-windows-equivalent-of-process-onsigint-in-node-js)了解更多详细信息）

b) 找到以下代码*utils.watch(watchFiles, function(){...*并将其替换为

```
 var lastRun = new Date();
  utils.watch(watchFiles, function(){
    if (new Date() - lastRun > 300)
    {
        purge();
        stop()
        mocha.suite = mocha.suite.clone();
        ui = interfaces[program.ui](mocha.suite);
        loadAndRun();
        lastRun = new Date();
    }
  }); 
```

它可以抑制来自 fs.watch 的过多调用。

c) 最后的更改是删除或注释掉这一行：

```
 process.stdout.write('\r' + str); 
```

在*函数 play(arr, interval)*中。它只是消除噪音。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T17:51:21.357

尝试将 mocha 本地安装到您正在测试的项目中，看起来 mocha 没有找到需要使用的模块。

另外我认为这对你也应该有帮助： [Mocha 需要 make。找不到适用于 Windows 的 make.exe](https://stackoverflow.com/questions/9779700/mocha-requires-make-cant-find-a-make-exe-that-works-on-windows)

# c# - 禁用另一个类的按钮

> ID：10258250
> 
> 赞同：0
> 
> 时间：2012-04-21T10:49:11.840
> 
> 标签：c#, winforms, button

我知道之前有人问过这个问题或问过类似的问题，但没有一个解决方案可以解决我的问题。

我有一个带有名为`hitButton`. 我需要做的就是从另一个类（即不是表单类）禁用这个按钮。

我的表单类是：

```
public partial class BlackJackTable : Form
{
} 
```

我的单独课程是：

```
class GameWon
{
} 
```

我试过`BlackJackTable`像这样公开一个公共方法：

```
public void DisableButtons()
{
    hitButton.Enabled = false;
} 
```

并从`GameWon`构造函数访问（尽管我从类中的哪个位置访问它似乎并不重要），如下所示：

```
public BlackJackTable blackJackTable = new BlackJackTable();

public GameWon()
{
    blackJackTable.DisableButtons();
} 
```

我尝试在以下位置使用变量`GameWon`：

```
public Button hit; 
```

并从 blackJackTable 分配：

```
GameWon gameWon = new GameWon();

public void Assign()
{
    gameWon.hit = this.hitButton; // or just = hitButton;
} 
```

并禁用`GameWon`：

```
hit.Enabled = false; 
```

我尝试了其他几件事，但没有一个有效。我猜我错过了一些明显的东西，因为我尝试过的方法都没有奏效。

任何想法表示赞赏！

**更新**

我已经设法用文本框和图片框做后一种方法，按钮有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T11:01:00.400

它不起作用的原因是您调用`DisableButtons`了*错误*的`BlackJackTable`. 您的`GameWon`类创建自己的不可见`BlackJackTable`对象，将其存储在`BlackJackTable blackJackTable`变量中，并禁用其按钮；您可见的表单对象不会被修改。

要解决此问题，您应该将`BlackJackTable`表单的实例传递给 的构造函数`GameWon`，并将其设置为变量：

```
private readonly BlackJackTable blackJackTable;

public GameWon(BlackJackTable blackJackTable) {
    this.blackJackTable = blackJackTable;
} 
```

创建`GameWon`类实例的代码应将表单作为参数传递给构造函数：

```
GameWon gameWon = new GameWon(myBjTable); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T11:00:39.820

您可以向原始类返回一个值，然后禁用该按钮：看看： [如何在服务器上运行的脚本中调用属性](https://stackoverflow.com/questions/10183307/how-to-call-properties-inside-of-a-script-runat-at-server/10183606#10183606)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T14:37:17.147

我最终使用后一种方法解决了这个问题，但将 Button 变量设为静态。

```
public static Button hit; 
```

一定是把课堂实例弄混了。谢谢你的想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T09:07:12.840

您在构造函数中做了很多工作。这通常是不好的做法，尤其是对于表单。在显示表单之前，您似乎正在修改表单上对象的属性 - 我并不惊讶这会产生不可预测的行为。如果我猜的话，我会想象在您的代码运行后通过表单初始化来重置按钮状态。表单非常保护自己的生命周期要求，我认为您一定遇到了与表单如何为显示做准备有关的特质。

我必须指出，你在这里展示了一个非常奇怪的架构。我很难理解为什么你会选择以这种方式安排你的申请。我认为最好从控制器类与表单和游戏类进行通信，可能使用控制器中引发的事件来允许表单修改自身。让表单在屏幕上可见时修改自己的状态应该始终有效。

# git - 在 git 中相当于 `darcs whatsnew --summarize`？它总结了每个文件的当前更改

> ID：10258254
> 
> 赞同：0
> 
> 时间：2012-04-21T10:50:20.420
> 
> 标签：git, git-diff

我试过

```
git diff --summary 
```

如 中所述`git diff help`，但未汇总更改，`git diff`是否在 5 个不同文件中输出更改。

还有其他方法吗？

输出示例`darcs whatsnew --summarize`：

```
M ./XMonad/Prompt.hs -1 +1
M ./XMonad/Prompt/Shell.hs -1 +1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T10:58:15.970

尝试

`git diff --stat`

它提供了一个很好的每文件行列表/图表，显示添加和删除的行。

# javascript - 使用 javascript 访问属性值的不同方法

> ID：10258259
> 
> 赞同：20
> 
> 时间：2012-04-21T10:50:49.777
> 
> 标签：javascript, html, css

```
document.getElementById('myId').style; 
```

是访问样式属性的一种方式。我们也可以使用 `document.getElementById('myId').getAttribute('style');`

这两种获取属性值的方法有什么区别……哪一种更可取？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-21T10:56:45.247

在第一个示例中，您访问的不是`style`属性，而是`style`属性。如果属性是对象，则属性的值可以是任何值`style`。在第二个示例中，您正在访问标签的 style 属性。属性的值只能是字符串。

在某些属性的情况下，它们之间存在映射。因此，如果您`style`在 HTML 节点上设置属性，您的`style`属性会更新并应用您的样式。但是，这并不总是正确的：某些 IE 版本（至少在 IE7 之前）中的一个众所周知的错误是这种映射被破坏了，因此设置的属性不会反映到属性中。

因此，如果要在 HTML 节点上设置属性，则必须使用第二个。但是，如果您想访问*代表*HTML 节点的对象的属性，则必须使用第一个。

如果是`style`，强烈推荐第一个。

举个例子（在现代浏览器中）说清楚：

```
document.body.style.border = "1px solid red";
console.log(document.body.style); // [object CSSStyleDeclaration]
console.log(document.body.getAttribute("style")); // "border: 1px solid red;" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-21T11:01:27.210

`getAttribute`将返回非标准属性的值以及标准属性的值。

对象属性表示法不会，因为非标准属性不会转换为属性。

```
<a id="test" foo="bar"> ... </a>​

<script>

    console.log(document.getElementById('test').foo); // undefined

    console.log(document.getElementById('test').getAttribute('foo')); // "bar"

</script> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-21T10:54:01.240

没有区别。

```
document.getElementById('myId').style; 
```

是的简写

```
document.getElementById('myId').getAttribute('style'); 
```

getAttribute('attributeName') 的唯一用途是如果 attributeName 不是有效的 javascript 变量名，因此将其封装在引号中将是访问它的唯一方法。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-21T17:51:08.193

是的，没有区别，详细示例可以在以下链接中找到： [https ://developer.mozilla.org/en/DOM/element.style#Example](https://developer.mozilla.org/en/DOM/element.style#Example)

# php - 更改字符串中的所有图像

> ID：10258265
> 
> 赞同：0
> 
> 时间：2012-04-21T10:51:15.337
> 
> 标签：php, string

我正在使用这一行来更改`$comments`字符串中的所有图像：

```
$comments = preg_replace("{<img\\s*(.*?)src=('.*?'|\".*?\"|[^\\s]+)(.*?)\\s*/?>}ims", '<a class ="gallery"rel="'.$pagelink.'"href=$2><img $1src=$2 $3 name= $2 $3  /></a>', $comments); 
```

这就像一个魅力，它将它包裹起来`<a>`并添加一些东西。现在我需要更改 src 路径。

我想添加`"mcith/mcith_"`到字符串中的每个图像。我查看了 dom 函数，但这似乎并没有真正起到作用。

图像路径如下所示：“/uploads/userdirs/admin（从用户到用户的变量目录更改）/image.jpeg”

我希望它是这样的：“/uploads/userdirs/admin/mcith/mcith_image.jpeg”

在[类似的问题](https://stackoverflow.com/questions/10246534/exploding-a-string-with-variable)上，我使用 pathinfo 得到了答案，所以我尝试这样做：

```
if (preg_match('/<img.+src=[\'"](?P<src>.+?)[\'"].*>/i', $comments, $image) ) {
   $imagedir = $image['src'];
   $pathchange = pathinfo($imagedir);
   $comments = $pathchange['dirname'] . '/mcith/mcith_' . $pathchange['basename'];
} 
```

但这并不像我想要的那样工作，因为它会弄乱我的整个字符串，文本和所有内容。我认为解决方案在 preg_replace 行中，但无法弄清楚如何在该行的 src 中添加内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T12:22:32.370

试试这个解决方案......希望这会对你有所帮助

```
 if(preg_match_all('/(<img[^>]*>)/Ui', $comments, $match, PREG_OFFSET_CAPTURE)){ //loop through all img tags 
        $shiftOffset = 0;
        for($i=0; $i<count($match[1]); $i++){  //loop to execute no.of times img tag found
        if($i){ // do not change offset for single or first occurence
                $shiftOffset += substr_count($match[1][$i-1][0], "<img ");  //count the img tag
                $match[1][$i][1] += $shiftOffset;
               }
        $sub = "form your new img src that is to replaced for old img src"; 
        $comments = str_replace($match[1][$i][0],$sub,$comments); //change the original img tag with our img tag
       }
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T13:18:24.267

这是你需要的吗？

```
<?php
$comment = '<img src="/uploads/userdirs/admin-something/image.jpeg" />
<div>text</div>
<img src="/uploads/userdirs/admin-another/coffee.png" />
';
$comment = preg_replace('@(<img.+src=[\'"]/uploads/userdirs/admin)(?:.*?/)(.+?)\.(.+?)([\'"].*?>)@i', '$1/mcith/mcith_$2.$3$4', $comment);
echo $comment; 
```

看看有没有帮助。在线尝试：[http ://codepad.org/TT9rH6IX](http://codepad.org/TT9rH6IX)

# backbone.js - 捕获div上的滚动事件

> ID：10258270
> 
> 赞同：4
> 
> 时间：2012-04-21T10:52:03.880
> 
> 标签：backbone.js, backbone-events, marionette

我试图在 Backbone.Marionette.CompositeView 中捕获滚动事件，但没有成功。

作为练习，我正在使用 Backbone.Marionette重写[http://www.atinux.fr/backbone-books/ 。](http://www.atinux.fr/backbone-books/)如您所见，当您向下滚动时，会获取并显示更多书籍（即无限滚动）。但是，我无法在我的视图中捕获滚动事件。

这是我的（简化的）代码：

```
 LibraryView = Backbone.Marionette.CompositeView.extend({
    // properties, initializer, etc.

    events: {
      'scroll': 'loadMoreBooks',
      'click': 'loadMoreBooks'
    },

    // some functions

    loadMoreBooks: function(){
      console.log("loadMoreBooks");
    }
  }); 
```

完整的源代码可以在这里看到：[https ://github.com/davidsulc/backbone.marionette-atinux-books/blob/scroll/assets/javascript/app.js#L86-89](https://github.com/davidsulc/backbone.marionette-atinux-books/blob/scroll/assets/javascript/app.js#L86-89)

我不明白的是“点击”事件被正确触发，但“滚动”事件没有。我究竟做错了什么？

* * *

编辑：所以错误最终非常简单......我将“el：#content”传递给视图的构造函数，但滚动是在“.library”上的CSS中定义的。所以一旦我改变了我的DOM

```
<div id="content">
  <div class="library">
  </div>
</div> 
```

到

```
<div id="content" class="library"></div> 
```

一切正常...

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-27T13:01:37.267

Backbone 附加到顶部的*el*元素以查找*所有*事件。一些 DOM 事件不会冒泡到父元素，这包括*滚动*。点击事件有效，因为它确实冒泡。

参考：[http ://www.w3.org/TR/2009/WD-DOM-Level-3-Events-20090908/#event-type-scroll](http://www.w3.org/TR/2009/WD-DOM-Level-3-Events-20090908/#event-type-scroll)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-23T09:44:30.853

这段代码对我有用：

```
var View = Backbone.View.extend({
  events: { "scroll": "scroll" },
  scroll: function(){ console.log( "scrolling..." ); }
}); 
```

[检查 jsFiddle](http://jsfiddle.net/fguillen/fGtZk/)

正如@JoshLeitzel 所说，我认为问题在于它本身的DOM 元素。

尝试绕过 Backbone：

```
$("#content").bind( "scroll", function(){ console.log( "scrolling from jquery directly" ); } ); 
```

也尝试更换：

```
el: $('#content') 
```

经过

```
el: '#content' 
```

我认为这不是问题，而是新的`el`定义风格:)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-21T17:39:40.777

我不知道你`el`是什么，但我怀疑这是没有收到`scroll`事件的东西。由于 Backbone 将事件处理委托给 jQuery，请查看 jQuery 对[`scroll`事件](http://api.jquery.com/scroll/)的说明：

> 当用户滚动到元素中的不同位置时，该`scroll`事件被发送到元素。它适用于`window`对象，也适用于`overflow`CSS 属性设置为滚动的可滚动框架和元素（或者`auto`当元素的显式高度或宽度小于其内容的高度或宽度时）。

除非您`el`满足这些条件，否则它将不会收到该`scroll`事件。您必须将事件处理程序放在`window`或其他接收它的元素上。

# ruby-on-rails - 在heroku上使用自定义目录进行Rails部署

> ID：10258278
> 
> 赞同：0
> 
> 时间：2012-04-21T10:53:56.830
> 
> 标签：ruby-on-rails, git, heroku

假设我有 git 存储库`repo`和 rails 应用程序`repo/rails`。默认情况下，Heroku 会上传我不想要的整个存储库。解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:42:42.097

简短的回答：按照标准的 Heroku 方式来做。长答案：您也许可以使用[自定义](https://devcenter.heroku.com/articles/buildpacks)Heroku [ruby​​ buildpack](https://github.com/heroku/heroku-buildpack-ruby)破解某些东西，但它可能不会很有趣。

# sockets - Erlang Tip&Tricks 减少 gen_server ssl 套接字的内存占用

> ID：10258280
> 
> 赞同：2
> 
> 时间：2012-04-21T10:54:00.723
> 
> 标签：sockets, memory, ssl, erlang, gen-server

有没有人知道如何减少面向 Erlang gen_server ssl 套接字的内存占用？

现在每个客户端（gen_server）在内存中都有一个类似 128 Ko 的东西。而在 C++ 中，我有更多的东西，比如每个客户端 40 Ko。

喜欢：

*   更改 ssl 密码会改变内存占用吗？
*   改变缓冲区大小？

我真的在寻找任何可以大大减少内存占用的想法！

编辑 1：我已经在使用 hibernate_after 选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T13:46:15.823

如果您的应用程序不需要支持 TLS 会话重用，您可以将应用程序的`session_cb`环境参数设置`ssl`为您自己的“NULL 实现”。

# android - 布局计算时间过长

> ID：10258283
> 
> 赞同：2
> 
> 时间：2012-04-21T10:54:30.167
> 
> 标签：android, layout

我启动了一个初始化复杂布局的活动。这是一个表格，有很多图像、文本视图、EditTexts、Checkboxes、Spinners 和 ActionListeners。每个项目的位置是不同的，这取决于它开始的被调用者。所以信息存储在Intent中。

这意味着：布局不能通过 XML 构建，因为所有项目总是有不同的位置。

问题：这个计算需要很多时间。最多可能需要 400 毫秒才能开始活动。这真是太糟了。

我怎样才能避免这种情况？据我所知，我无法预先计算布局。无法克隆视图。如果我在另一个 Activity 中创建该视图并在此处分配它，我也会遇到一些崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T12:55:24.190

分段构建您的布局，并为用户制作整个结构的动画。可能需要超过 400 毫秒才能完成，但用户很高兴看到您在他眼前创建的漂亮布局的体验。如果没有您的布局细节，很难提供比这更多的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T11:32:44.350

我也认为 400 毫秒不是很多时间。

您可以尝试的另一件事是，您可以在 xml 文件中创建布局，并在活动中创建一个重新定位所有元素的函数。首先要重新定位，您可以获得视图的布局参数，然后您可以设置新位置，然后您可以根据新位置再次在视图上设置布局参数。

# php - PHP 中 EMAIL 的样式

> ID：10258286
> 
> 赞同：0
> 
> 时间：2012-04-21T10:54:44.020
> 
> 标签：php

我正在尝试对从联系表单发送的消息进行样式化，以下是我尝试执行的代码 $message = echo "< hr>"; 但是代码不起作用请让我知道如何设置以下消息的样式，例如更改文本颜色，字体大小（HTML STYLING）

```
$message="Name : $name \r\n\n";
$message.="PHONE : $phone \r\n\n";
$message.="Company : $company \r\n\n";
$message.="Comments/Questions : \r\n";
$message.="---------------------------------------------------------------------------\r\n";
$message.= $_POST['message']; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T11:02:01.557

要在您的电子邮件中使用 HTML 标记，您需要在[`mail`](http://us.php.net/manual/en/function.mail.php#example-3144)函数中包含一个额外的标题：

```
Content-Type: text/html; charset=utf-8 
```

或者，更好的是，使用[PHPMailer 之](http://sourceforge.net/projects/phpmailer/files/phpmailer%20for%20php5_6/PHPMailer-Lite%20v5.1/)类的库。这样，您只需告诉它此消息是 HTML，它会为您处理标题。

**编辑**：忘了提，不同的电子邮件客户端有非常不同的 CSS 支持。一般来说，您应该将样式保持在最低限度，在各种邮件客户端中测试所有内容，阅读[已经尝试过的人的有用文章](http://www.sitepoint.com/code-html-email-newsletters/)......并接受一些邮件客户端只是一场噩梦的事实。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T11:07:21.983

试试这个..

```
$message = "<html>
<head>
<meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
<title>Something</title>
</head>
<body>";

$message .="
    Name : $name <br />
    PHONE : $phone $domain<br />
    Company : $company<br />
    Comments/Questions:<br />
    <hr /><br />

</body>
</html>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T11:03:03.737

我假设您知道所有其他事情，在电子邮件中使用此标头用于 html 电子邮件 $headers = "MIME-Version: 1.0" 。"\r\n 内容类型:text/html;charset=iso-8859-1" 。"\r\n"; 然后你可以写html电子邮件

$htmlMessage="你的风格化消息"; 邮件($to,$subject,$htmlMessage,$headers); 但请注意，出于安全原因，gmail 不会显示图像。因此，如果标题不正确，html 代码可能无法运行，有时 gmail（其他人也是）可能会将您的电子邮件发送到垃圾邮件。

# java - Java 多播套接字在 Windows 上不起作用（SocketPermission 异常）

> ID：10258291
> 
> 赞同：1
> 
> 时间：2012-04-21T10:55:24.750
> 
> 标签：java, windows, networking, socketexception, multicastsocket

在 Windows 上启动多播 java 套接字时，出现以下错误（防火墙已停用）：

java.security.AccessControlException：在 java.security.AccessController.checkPermission(Unknown Source) 在 java.security.AccessControlContext.checkPermission(Unknown Source) 的访问被拒绝 (java.net.SocketPermission 230.0.0.1 connect,accept,resolve)。 lang.SecurityManager.checkPermission(Unknown Source) at java.lang.SecurityManager.checkMulticast(Unknown Source) at java.net.MulticastSocket.joinGroup(Unknown Source) at ch.uzh.ifi.group10.client.ServiceBrowser.(ServiceBrowser.java :49) 在 ch.uzh.ifi.group10.server.RMIServer.startServer(RMIServer.java:176) 在 ch.uzh.ifi.group10.server.RMIServer.main(RMIServer.java:279)

似乎我无法加入多播组，因为程序没有套接字的权限。有趣的是，相同的代码在 linux (ubuntu 11.10) 上没有任何问题。我还尝试向 security.policy 文件添加套接字权限（Permission java.net.SocketPermission "230.0.0.1", "connect, accept, listen, resolve";）这也没有帮助。

我被困住了，因为我找不到任何其他可能出现问题的地方或我错过了什么......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T22:19:26.400

我发现了问题。未正确加载安全管理器。出于某种原因，Eclipse 不需要安全管理器即可成功运行

# javascript - $("#ELEMENT_ID") 与 $('div[id="ELEMENT_ID"]')

> ID：10258293
> 
> 赞同：0
> 
> 时间：2012-04-21T10:55:42.107
> 
> 标签：javascript, jquery, performance, jquery-selectors, css-selectors

对于 DIV 元素，我想知道哪些选择器可能更快

```
$("#ELEMENT_ID")
$('div[id="ELEMENT_ID"]') 
```

仅使用 DIV id 或仅使用其 ID 将搜索限制为 DIV 元素在性能上是否有任何差异？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T10:58:57.447

> 或仅使用其 ID 将搜索限制为 DIV 元素？

请注意，ID 是唯一的，因此如果您在多个元素上使用一个 ID，那是错误的做法。

`div[id="ELEMENT_ID"]`甚至`div#ELEMENT_ID`通常是多余的，除非您在多个页面中包含一个样式表，并且不同的页面对不同的元素使用一个 ID。这样做可能不是一个好主意，因为它可能会使阅读代码的人感到困惑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T11:03:56.020

检查 jsPerf 表明只有 id 选择器要快得多。[http://jsperf.com/id-vs-data-id/4](http://jsperf.com/id-vs-data-id/4)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T11:08:14.310

对于`#ID`和`div#ID`选择器，jQuery 提到：

> 对于 id 选择器，jQuery 使用 JavaScript 函数 document.getElementById()，效率极高。当另一个选择器附加到 id 选择器时，例如 h2#pageTitle，jQuery 在将元素识别为匹配之前执行额外的检查。

对于`div[ID=something]`选择器，我不太确定，但我怀疑它是否会比`#ID`. 我会[运行性能基准并检查结果](http://jsperf.com/jquery-id-selector-vs-jquery-attribute-equal-selector)。

[PS：在jQuery ID 选择器](http://api.jquery.com/id-selector/)页面上有一个有趣的注释：

> 与往常一样，请记住，作为开发人员，您的时间通常是最宝贵的资源。不要专注于优化选择器速度，除非很明显需要提高性能。

# objective-c - 让 GLSL 1.5 在 Mac OS X 上运行

> ID：10258294
> 
> 赞同：0
> 
> 时间：2012-04-21T10:55:43.440
> 
> 标签：objective-c, macos, opengl, shader

我正在尝试在我的程序中创建自己的顶点和片段着色器（这基本上是一个非常简单的程序，用 VBO 显示三角形）。但是，当我尝试运行它时，我总是得到一个黑屏，没有任何显示。我检查了编译日志，它返回没有错误。我还没有使用我自己的自定义着色器运行程序，这让我想知道我是否在这里做错了什么。我在 OpenGL 3.2 和 GLSL 1.5 上运行我的代码

以下是我当前尝试运行的代码

```
 GLuint vbo;

GLfloat data[] = {0.0, 0.0, -5.0,
                  1.0, 0.0, -5.0,
                  1.0, 1.0, -5.0
};

const char *vertexShader = "\n\
#version 150\n\
\n\
layout (location=0) in vec4 position;\n\
void main()\n\
{\n\
gl_Position = position;\n\
}\n\
";

const char *fragmentShader = "\n\
#version 150\n\
\n\
out vec4 outColor;\n\
\n\
void main()\n\
{\n\
    outColor = vec4(1.0, 0.0, 0.0, 1.0);\n\
}";

- (void)drawRect:(NSRect)dirtyRect
{
    glClear(GL_COLOR_BUFFER_BIT);

    glMatrixMode(GL_MODELVIEW);

    glLoadIdentity();

    glUseProgram(programId);

    glBindBuffer(GL_ARRAY_BUFFER, vbo);
    glEnableVertexAttribArray(0);
    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, 0);

    glEnableClientState(GL_VERTEX_ARRAY);

    glVertexPointer(3, GL_FLOAT, 0, 0);

    glDrawArrays(GL_TRIANGLES, 0, sizeof(data));

    glFlush();

    glDisableClientState(GL_VERTEX_ARRAY);

}

-(void)reshape
{
    glViewport(0, 0, w, h);
    gluPerspective(45.0,                  //The camera angle
                   (double)w / (double)h, //The width-to-height ratio
                   1.0,                   //The near z clipping coordinate
                   200.0); 
}

-(void)prepareOpenGL
{
    glEnable(GL_DEPTH_TEST);  

    glGenBuffersARB(1, &vbo);
    glBindBufferARB(GL_ARRAY_BUFFER_ARB, vbo);
    glBufferDataARB(GL_ARRAY_BUFFER_ARB, sizeof(data), data, GL_STATIC_DRAW);

    glVertexAttribPointer(0, 3, GL_FLOAT, 0, 0, 0);

    vertexShaderId = glCreateShader(GL_VERTEX_SHADER);
    glShaderSource(vertexShaderId, 1, &vertexShader, NULL);

    glCompileShader(vertexShaderId);

    GLint completed;
    glGetShaderiv(vertexShaderId, GL_COMPILE_STATUS, &completed);

    if (!completed)
    {
        GLint length;
        GLchar *log;
        glGetShaderiv(vertexShaderId, GL_INFO_LOG_LENGTH, &length);

        log = (GLchar *)malloc(length);
        glGetShaderInfoLog(vertexShaderId, length, &length, log);
        fprintf(stderr, "Vertex compile log = '%s'\n", log);
    }

    fragmentShaderId = glCreateShader(GL_FRAGMENT_SHADER);
    glShaderSource(fragmentShaderId, 1, &fragmentShader, NULL);
    glCompileShader(fragmentShaderId);

    GLint complete;

    glGetShaderiv(fragmentShaderId, GL_COMPILE_STATUS, &complete);

    if (!complete)
    {
        GLint length;
        GLchar *log;
        glGetShaderiv(fragmentShaderId, GL_INFO_LOG_LENGTH, &length);

        log = (GLchar *)malloc(length);
        glGetShaderInfoLog(fragmentShaderId, length, &length, log);
        fprintf(stderr, "fragment compile log = '%s'\n", log);
    }

    programId = glCreateProgram();

    glAttachShader(programId, vertexShaderId);
    glAttachShader(programId, fragmentShaderId);

    glLinkProgram(programId);

    glUseProgram(programId);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T16:52:55.470

这里有几个问题。从上到下：

* * *

```
GLfloat data[] = {0.0, 0.0, -5.0,
                  1.0, 0.0, -5.0,
                  1.0, 1.0, -5.0
}; 
```

此数据不可见，因为 Z 值在查看体积 [-1, 1] 之外。尝试改用 0.0。

* * *

```
#version 150\n\
\n\
layout (location=0) in vec4 position; 
```

`layout(location=0)`仅在以下两种情况下对于顶点着色器输入是合法的：

1.  您正在使用 GLSL 3.30 或更高版本。你的着色器说`#version 150`。
2.  您正在使用 ARB_explicit_attrib_location 扩展。在这种情况下，您需要`#extension`声明以在着色器中激活它。另外，我知道 OSX 的 GL 3.2 支持不*提供*此扩展。

所以你需要用老式的方式来做：用[`glBindAttribLocation`](http://www.opengl.org/wiki/GLAPI/glBindAttribLocation). [在链接您的程序](http://www.opengl.org/wiki/GLSL_Object#Program_linking)[*之前*](http://www.opengl.org/wiki/GLSL_Object#Program_linking)[使用此功能](http://www.opengl.org/wiki/GLSL_Object#Program_linking)*。*

 ** * *

```
glEnableClientState(GL_VERTEX_ARRAY);
glVertexPointer(3, GL_FLOAT, 0, 0); 
```

这不仅是不必要的，而且对您要完成的工作具有积极的破坏性，因为它会在您尝试渲染时导致生成 OpenGL 错误。

如果您使用的是通用属性，则*不需要*旧式属性。

* * *

```
glDrawArrays(GL_TRIANGLES, 0, sizeof(data)); 
```

`sizeof(data)`是数组的*字节*大小。`data`在大多数机器上，这将是 36 个。您*不是在*渲染 36 个顶点；而是在渲染 36 个顶点。你正在渲染*三个*. 所以这应该是：

```
glDrawArrays(GL_TRIANGLES, 0, 3); 
```

* * *

```
gluPerspective(45.0,                  //The camera angle
               (double)w / (double)h, //The width-to-height ratio
               1.0,                   //The near z clipping coordinate
               200.0); 
```

这不是一个完全没有意义的问题。您正在使用着色器进行渲染，并且没有使用内置矩阵的东西。这*无济于事*。

* * *

```
glGenBuffersARB(1, &vbo);
glBindBufferARB(GL_ARRAY_BUFFER_ARB, vbo);
glBufferDataARB(GL_ARRAY_BUFFER_ARB, sizeof(data), data, GL_STATIC_DRAW); 
```

这也可能不是一个“问题”，但它可能是。以“ARB”结尾的函数和枚举数代表 OpenGL 扩展。因此，您正在使用 ARB_vertex_buffer_object 扩展所公开的函数。

自 GL 1.4 以来，此扩展一直是核心。事实上，您甚至没有*始终如一*地使用扩展程序（这可能会出现问题）。您正在使用 ARB 扩展设置缓冲区的数据，但在渲染时使用核心功能。

只需放弃 ARB 扩展的东西并使用核心功能。

* * *

```
 log = (GLchar *)malloc(length);
    glGetShaderInfoLog(vertexShaderId, length, &length, log);
    fprintf(stderr, "Vertex compile log = '%s'\n", log); 
```

这不会导致错误，但是......你的电话在`free`哪里？

* * *

```
glLinkProgram(programId);
glUseProgram(programId); 
```

在编译着色器*或*链接程序后，您应该*始终* [检查错误。](http://www.opengl.org/wiki/OpenGL_Shading_Language#Error_Checking)

 ** * *

您的代码似乎是从各种来源复制并粘贴在一起的，以形成某种科学怪人计划。您的大多数问题都源于不同的代码位，它们的作用方式与您计划使用它们的方式不同。你真的应该研究一下这些东西是如何工作的；这样，您就不会遇到这些问题。**

# actionscript-3 - 如何重置我的游戏？

> ID：10258295
> 
> 赞同：1
> 
> 时间：2012-04-21T10:55:43.690
> 
> 标签：actionscript-3, flash

在我的游戏/死亡画面结束时，我希望用户能够重新启动，但它不像跳回第一帧那么简单，因为一切都结束了。

当你按下按钮时，他们的代码是重置你的游戏吗？

谢谢洛奇

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T11:04:29.670

点击按钮时没有重置游戏的代码，您必须重新设置所有变量、电影剪辑等。

您可以使用内置的 for-each 循环来遍历变量，但我假设因为您的变量可能不是所有相同的值，这不是一个好的选择。

在您的情况下（好吧，如果您想保持它非常基本）的最佳实践是创建一个初始化游戏的方法，然后在需要时调用它。

这是关于 AS3 中的函数的教程： [http ://www.republicofcode.com/tutorials/flash/as3functions/](http://www.republicofcode.com/tutorials/flash/as3functions/)

# android - 绕轴旋转图像

> ID：10258296
> 
> 赞同：0
> 
> 时间：2012-04-21T10:55:50.460
> 
> 标签：android, image, matrix, rotation

我有一个想要旋转的图像，比如手表指针。问题是，无论我在枢轴点（在 matrix.setrotate 中）放置什么，它仍然旋转相同。这是我的代码：

```
c = holder.lockCanvas();
matrix.setRotate((float) degre * 4, 500, 500);
Bitmap to_rotate = Bitmap.createBitmap(watch_hand, 0, 0, watch_hand.getWidth(), watch_hand.getHeight(), matrix, false);
c.drawARGB(255, 255, 255, 255);
c.drawBitmap(background, 0, 0, null);
c.drawBitmap(to_rotate, CENTER_X - 20 , CENTER_Y - height / 2 + 20, null);
holder.unlockCanvasAndPost(c); 
```

我能做些什么？

我希望图像在“CENTER_X，CENTER_Y.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:17:54.733

我找到了答案。我用了这个，它工作正常：

```
canvas = holder.lockCanvas(); 

matrixUP.setTranslate(CENTER_X - watch_hand.getWidth()/2, height/4 - watch_hand.getHeight() - 40); matrixUP.preRotate((float) degreUP , watch_hand.getWidth()/2 , watch_hand.getHeight()-10); canvas.drawBitmap(watch_hand, matrixUP, null); 

holder.unlockCanvasAndPost(canvas); 
```

# proxy - 在 Eclipse 中从哪里读取此代理条目？

> ID：10258297
> 
> 赞同：0
> 
> 时间：2012-04-21T10:55:58.433
> 
> 标签：proxy, eclipse-plugin, eclipse-indigo

当我安装 Eclipse 时，我看到以下内容并导航到 Windows -> Preferences -> General -> Network Connections 我看到以下代理条目：

![在此处输入图像描述](../Images/b2d7fef6f4ccdd415748efed5b6f61bb.png)

这个代理条目是从哪里读取的？我已经在不同的机器上安装了 Eclipse，并且这个条目没有在 Eclipse 中配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T03:03:28.407

从您的系统代理配置。在 Windows 上，您可以在 IE 的 LAN 配置中找到它。

# prolog - 简单的 dcg 词法分析器

> ID：10258298
> 
> 赞同：0
> 
> 时间：2012-04-21T10:56:04.283
> 
> 标签：prolog, dcg

嗨，我正在写一个简单的词法分析器

```
:- module(lekser, [lekser/3]).

lekser(Tokens) -->
    white_space,
    (
            (
                   "{",  !, { Token = tkLBrace }
                ;  "}",  !, { Token = tkRBrace }
                ;  ")",  !, { Token = tkRParen }
                ;  "(",  !, { Token = tkLParen }
                ;  ";",  !, { Token = tkSColon }
                ;  "\",  !, { Token = tkLambda }
                ;  "->", !, { Token = tkImpli }
                ;  "<",  !, { Token = tkLT }
                ;  ">",  !, { Token = tkGT }
                ;  "<=", !, { Token = tkLeq }
                ;  ">=", !, { Token = tkGeq }
                ;  "=",  !, { Token = tkAssgn }
                ;  "\=", !, { Token = tkNeq }
                ;  "+",  !, { Token = tkPlus }
                ;  "-",  !, { Token = tkMinus }
                ;  "*",  !, { Token = tkTimes }
                ; "div", !, { Token = tkDiv }
                ; "mod", !, { Token = tkMod }
                   ...
        ...)). 
```

这是代码的开头，如果有人告诉我我在哪里犯了错误，因为 swi 代码编辑器说有一个错误（即使只放了几个空行）`Syntax error: String too long (see style_check/1)`

...好吧，我知道是什么原因，但我不知道为什么它会像这个编辑器那样工作`"\"`，以某种奇怪的方式解析，我必须做到，`"\""`但我可能不会是 \ 运算符，而是 \" 如何改变它 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T11:44:28.343

只是为了扩大我的回答范围，是的，使用`"\""`您输入的正是一个带有双引号的字符串`"`。例如：

```
?- write("\"abc\"").
[34,97,98,99,34] 
```

请注意字符串`abc`是如何被两个 34 值（ASCII 中的双引号）包围的。

# c# - .NET 三重 des 到 Windows API

> ID：10258302
> 
> 赞同：2
> 
> 时间：2012-04-21T10:56:39.467
> 
> 标签：c#, c++, winapi, encryption

我有一些 C# 中的加密代码，我必须用 C++ 重写我在 SO 上看到了几个类似的问题，但不知何故我仍然无法弄清楚这一点。用相同的密码编码相同的字符串会产生不同的结果。

C# 代码

```
 byte[] TestEncrypt(string data)
    {
        byte[] plainText  = System.Text.Encoding.ASCII.GetBytes(data);
        TripleDES des3 = new     System.Security.Cryptography.TripleDESCryptoServiceProvider();
        des3.Mode = CipherMode.CBC;
        des3.Key = System.Text.Encoding.ASCII.GetBytes("12656b2e4ba2f22e");
        des3.IV = System.Text.Encoding.ASCII.GetBytes("d566gdbc");
        ICryptoTransform transform = des3.CreateEncryptor();
        MemoryStream memStreamEncryptedData = new MemoryStream();
        CryptoStream encStream = new CryptoStream(memStreamEncryptedData,
            transform, CryptoStreamMode.Write);
        encStream.Write(plainText, 0, plainText.Length);
        encStream.FlushFinalBlock();
        encStream.Close();
        byte[] cipherText = memStreamEncryptedData.ToArray();
        return cipherText;
    } 
```

结果 255,142,22,151,93,255,156,10,174,10,250,92,144,0,60,142 已编辑：添加了新的 C++ 版本

```
 string Test3DES()
    {
        string key = "12656b2e4ba2f22e";
        HCRYPTPROV hCryptProv = NULL;
        HCRYPTHASH hHash = NULL;
        HCRYPTKEY hCryptKey = NULL;
        char pIV[] = "d566gdbc";  //simple test IV for 3DES
        CryptAcquireContext(&hCryptProv, NULL, MS_ENHANCED_PROV, PROV_RSA_FULL,CRYPT_VERIFYCONTEXT);
        PlainTextKeyBlob keyBlob ={0};
        keyBlob.hdr.bType = PLAINTEXTKEYBLOB;
        keyBlob.hdr.bVersion = CUR_BLOB_VERSION;
        keyBlob.hdr.reserved = 0;
        keyBlob.hdr.aiKeyAlg = CALG_3DES_112;
        keyBlob.cbKeySize = key.size();
        memcpy(keyBlob.key, key.c_str(), key.size());
        DWORD dwSizeBlob = sizeof(BLOBHEADER)+sizeof(DWORD)+key.size();
        ret = CryptImportKey( hCryptProv, (const BYTE*)&keyBlob, dwSizeBlob, 0, CRYPT_EXPORTABLE, &hCryptKey );
        DWORD dwMode = CRYPT_MODE_CBC;
        CryptSetKeyParam(hCryptKey, KP_MODE, (BYTE*)&dwMode, 0);
        CryptSetKeyParam(hCryptKey, KP_IV,(const BYTE*) pIV, 0) ; 
        DWORD dwFilled = 0;
        BOOL ret = CryptEncrypt( hCryptKey, NULL, TRUE, 0, (LPBYTE)cipherText.c_str(), &dwFilled, (DWORD)str.size());
        cipherText.resize(dwFilled);
        if( hCryptKey ) CryptDestroyKey( hCryptKey );
        if( hHash ) CryptDestroyHash( hHash );
        if( hCryptProv ) CryptReleaseContext( hCryptProv, 0 );
        return cipherText;
    } 
```

结果 167,177,201,56,123,240,169,174

旧 C++ 版本

C++

```
 string Test3DES()
    {
        string key = "12656b2e4ba2f22e";
        HCRYPTPROV hCryptProv = NULL;
        HCRYPTHASH hHash = NULL;
        HCRYPTKEY hCryptKey = NULL;
        char pIV[] = "d566gdbc";  //simple test IV for 3DES
        CryptAcquireContext(&hCryptProv, NULL, MS_ENHANCED_PROV, PROV_RSA_FULL, CRYPT_VERIFYCONTEXT);
        CryptCreateHash( hCryptProv, CALG_MD5, NULL, 0, &hHash );
        CryptHashData( hHash, (LPBYTE)key.c_str(), (DWORD)key.size(), 0 ); 
        DWORD dwMode = CRYPT_MODE_CBC;
        CryptDeriveKey(hCryptProv, CALG_3DES, hHash, 0, &hCryptKey);
        CryptSetKeyParam(hCryptKey, KP_MODE, (BYTE*)&dwMode, 0);
        CryptSetKeyParam(hCryptKey, KP_IV,(const BYTE*) pIV, 0) ; 
        DWORD dwFilled = 0;
        BOOL ret = CryptEncrypt( hCryptKey, NULL, TRUE, 0, (LPBYTE)cipherText.c_str(), &dwFilled, (DWORD)str.size());
        cipherText.resize(dwFilled);
        if( hCryptKey ) CryptDestroyKey( hCryptKey );
        if( hHash ) CryptDestroyHash( hHash );
        if( hCryptProv ) CryptReleaseContext( hCryptProv, 0 );
        return cipherText;
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T00:24:49.323

我从您的代码开始设置了一些示例项目。你没有包括所有东西，所以我不得不添加一些东西。当我编译和测试时，我在 C++ 和 C# 中都得到了相同的答案。我怀疑问题可能出在您指定 cipherText 缓冲区的方式上？这是我所有的测试代码，所以你应该很容易设置一些示例项目，看看你是否也得到了相同的结果，那么也许你可以从那里弄清楚：

C＃

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Security.Cryptography;
using System.IO;

namespace _3dtest
{
    class Program
    {
        static byte[] TestEncrypt(string data)
        {
            byte[] plainText = System.Text.Encoding.ASCII.GetBytes(data);
            TripleDES des3 = new System.Security.Cryptography.TripleDESCryptoServiceProvider();
            des3.Mode = CipherMode.CBC;
            des3.Key = System.Text.Encoding.ASCII.GetBytes("12656b2e4ba2f22e");
            des3.IV = System.Text.Encoding.ASCII.GetBytes("d566gdbc");
            ICryptoTransform transform = des3.CreateEncryptor();
            MemoryStream memStreamEncryptedData = new MemoryStream();
            CryptoStream encStream = new CryptoStream(memStreamEncryptedData,
                transform, CryptoStreamMode.Write);
            encStream.Write(plainText, 0, plainText.Length);
            encStream.FlushFinalBlock();
            encStream.Close();
            byte[] cipherText = memStreamEncryptedData.ToArray();
            return cipherText;
        }

        static void Main(string[] args)
        {
            var info = TestEncrypt("password");
            foreach (byte b in info)
            {
                Console.Write(b.ToString());
                Console.Write(", ");
            }
            Console.WriteLine();
        }
    }
} 
```

C++

```
#include "stdafx.h"
#include <Windows.h>
#include <WinCrypt.h>
#include <cassert>
#include <vector>
#include <string>
#include <algorithm>
#include <iostream>

using namespace std;

struct PlainTextKeyBlob {
        BLOBHEADER hdr;
        DWORD cbKeySize;
        BYTE key[16];
};

std::wstring LastError(DWORD lasterr)
{
    LPVOID lpMsgBuf;
    DWORD dw = GetLastError(); 

    FormatMessage(
        FORMAT_MESSAGE_ALLOCATE_BUFFER | 
        FORMAT_MESSAGE_FROM_SYSTEM |
        FORMAT_MESSAGE_IGNORE_INSERTS,
        NULL,
        dw,
        MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT),
        (LPTSTR) &lpMsgBuf,
        0, NULL );
    return (wchar_t*)lpMsgBuf; // Leaking, don't care
}

std::vector<BYTE> Test3DES(const std::string& passwd)
{
        string key = "12656b2e4ba2f22e";
        unsigned char pIV[] = "d566gdbc";  //simple test IV for 3DES
        HCRYPTPROV hCryptProv = NULL;
        HCRYPTHASH hHash = NULL;
        HCRYPTKEY hCryptKey = NULL;
        DWORD ret = CryptAcquireContext(&hCryptProv, NULL, MS_ENHANCED_PROV, PROV_RSA_FULL,CRYPT_VERIFYCONTEXT);
        if( ret == 0 ) std::wcout << LastError(GetLastError()) << std::endl;

        PlainTextKeyBlob keyBlob ={0};
        keyBlob.hdr.bType = PLAINTEXTKEYBLOB;
        keyBlob.hdr.bVersion = CUR_BLOB_VERSION;
        keyBlob.hdr.reserved = 0;
        keyBlob.hdr.aiKeyAlg = CALG_3DES_112;
        keyBlob.cbKeySize =  key.size();
        memcpy(keyBlob.key, key.c_str(), key.size());

        DWORD dwSizeBlob = sizeof(BLOBHEADER)+sizeof(DWORD)+key.size();
        ret = CryptImportKey( hCryptProv, (const BYTE*)&keyBlob, dwSizeBlob, 0, CRYPT_EXPORTABLE, &hCryptKey );
        if( ret == 0 ) std::wcout << LastError(GetLastError()) << std::endl;

        DWORD dwMode = CRYPT_MODE_CBC;
        CryptSetKeyParam(hCryptKey, KP_MODE, (BYTE*)&dwMode, 0);
        CryptSetKeyParam(hCryptKey, KP_IV,(const BYTE*) pIV, 0) ; 

        std::vector< BYTE > buffer( 1024 );
        memcpy( &buffer[0], passwd.c_str(), passwd.size() );
        DWORD dwFilled = passwd.size();
        ret = CryptEncrypt( hCryptKey, NULL, TRUE, 0, (LPBYTE)&buffer[0], &dwFilled, (DWORD)buffer.size());
        if( ret == 0 ) std::wcout << LastError(GetLastError()) << std::endl;
        buffer.resize(dwFilled);
        if( hCryptKey ) CryptDestroyKey( hCryptKey );
        if( hHash ) CryptDestroyHash( hHash );
        if( hCryptProv ) CryptReleaseContext( hCryptProv, 0 );
        return buffer;
}

int _tmain(int argc, _TCHAR* argv[])
{
    auto result = Test3DES("password");
    std::for_each( begin(result), end(result), [](BYTE b) {
        cout << to_string( (_ULonglong)b ) << " ";
    });
    cout << std::endl;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:28:08.963

所以你的密钥`System.Text.Encoding.ASCII.GetBytes("5656b2e4ba2f22e")`是 15 个字节，这不是你想要 16 个字节或 24 个字节的 Triple DES 的有效密钥长度。我的猜测是，这两种实现正在补偿他们以不同方式需要更大密钥的事实。

**附言**

将 ascii 常量字符串的原始字节值用于 Key 和 IV 真的很奇怪。在您的示例中， Key 和 IV 是字符串中的十六进制数字。似乎它们应该是您想要的字节长度的两倍，以便每两个字符代表一个完整的可能字节范围，然后使用十六进制转换器进行转换， [如何将十六进制字符串转换为字节数组？](https://stackoverflow.com/questions/321370/convert-hex-string-to-byte-array), [C++ 将字符串转换为十六进制，反之亦然](https://stackoverflow.com/questions/3381614/c-convert-string-to-hexadecimal-and-vice-versa)

始终拥有一个十六进制表示的密钥（您只能获得算法的 ASCII 字节）的安全含义是，您正在将可能的密钥空间减少一个平方根！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T11:57:11.873

您的 C++ 是使用宽/Unicode 字符串编译的 - 因此您使用与字符串对应的宽/Unicode 字节作为键`"5656b2e4ba2f22e"`（可能是 30 个字节），而在 C# 中，您使用 ASCII 编码将相同的字符串转换为字节，所以您得到相同字符串的 ASCII 字节（15 个字节）。

尝试在 C# 中使用 Unicode 编码，或者更好地将键声明为字节数组而不是字符串。

编辑

错误的答案 -`string`每个字符总是 8 位，所以问题不可能是由于编码的差异。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T14:04:16.377

请记住，DES 密钥是自校验密钥。这意味着每个字节的一位用于检查您的密钥是否正确。也许你有这些错误？您应该能够使用 DES 维基百科页面找到它。

此外，您至少需要两个完整的（64 位）密钥才能使 TDES 工作。

# java - 如何实现一定深度的广度优先搜索？

> ID：10258305
> 
> 赞同：15
> 
> 时间：2012-04-21T10:56:59.173
> 
> 标签：java, algorithm, search, depth-first-search, breadth-first-search

我理解并且可以轻松实现 BFS。

我的问题是，我们怎样才能使这个 BFS 限制在一定的深度？假设，我只需要深入 10 级。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-31T02:25:56.750

您可以使用恒定的空间开销来做到这一点。

BFS 具有这样的特性，即队列中未访问​​的节点的深度都不会减少，并且最多增加 1。因此，当您从 BFS 队列中读取节点时，您可以在单个变量中跟踪当前深度，该`depth`变量最初是0。

您需要做的就是记录队列中的哪个节点对应于下一次深度增加。您可以简单地通过使用变量`timeToDepthIncrease`来记录插入此节点时已经在队列中的元素数量，并在您从队列中弹出节点时递减此计数器。

当它达到零时，您从队列中弹出的下一个节点将处于一个新的、更大（1）的深度，所以：

*   增量`depth`
*   设置`pendingDepthIncrease`为真

每当你将一个子节点压入队列时，首先检查是否`pendingDepthIncrease`为真。如果是的话，这个节点会有更大的深度，所以`timeToDepthIncrease`在你推送之前设置成队列中的节点数，然后重置`pendingDepthIncrease`为false。

`depth`最后，当超过所需深度时停止！以后可能出现的每个未访问节点都必须处于此深度或更大。

**[编辑：感谢评论者键控器。]**

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-06-04T16:57:06.580

对于未来的读者，请查看上述算法的这个示例。此实现将监视以下级别包含多少个节点。在这样做时，实现能够跟踪当前深度。

```
void breadthFirst(Node parent, int maxDepth) {

  if(maxDepth < 0) {
    return;
  }

  Queue<Node> nodeQueue = new ArrayDeque<Node>();
  nodeQueue.add(parent);

  int currentDepth = 0, 
      elementsToDepthIncrease = 1, 
      nextElementsToDepthIncrease = 0;

  while (!nodeQueue.isEmpty()) {
    Node current = nodeQueue.poll();
    process(current);
    nextElementsToDepthIncrease += current.numberOfChildren();
    if (--elementsToDepthIncrease == 0) {
      if (++currentDepth > maxDepth) return;
      elementsToDepthIncrease = nextElementsToDepthIncrease;
      nextElementsToDepthIncrease = 0;
    }
    for (Node child : current.children()) {
      nodeQueue.add(child);
    }
  }

}

void process(Node node) {
  // Do your own processing here. All nodes handed to
  // this method will be within the specified depth limit.
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-05-23T21:05:06.490

跟踪深度的简单想法是每次进入深度级别时将“NULL”添加到队列中。一旦您从队列中轮询一个空值，将您的级别计数器增加 1 并将另一个“空”添加到队列中。如果你得到两个连续的空值，你可以退出循环。

```
q.offer(user);
q.offer(null);

user.setVisited(true);

while(!q.isEmpty()){

    User userFromQ = q.poll();

    if(userFromQ == null){
        level++;
        q.offer(null);
        if(q.peek()==null)
            break;
        else
            continue;
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-03T18:18:41.513

如果你不想有一个类节点（并为你的节点添加一个可变深度），那么你可以有两个距离图和visitedNodes 或一个二维数组，其中每行是一个节点，column1：depth，column2：visited。当然，您可以使用一个来跟踪两者`map<Node,Depth>`（其中 Node 是类或 int、String 等的实例，而 Depth 是表示从根节点开始的节点深度的 int）。如果地图包含一个节点（O（1）成本），则访问它，如果不继续并将其添加到当前节点深度为+1的地图中。

```
public static void BfsToDepth(graph graphDb, Node rootNode, int depth) {
    if(depth<1)
       return;
    Queue<Node> queue = new LinkedList<>();
    ResourceIterator<Node> nodesIterator = graphDb.getAllNodes().iterator();
    LinkedHashMap<Node, Boolean> visited = new LinkedHashMap<>();
    LinkedHashMap<Node, Integer> distance = new LinkedHashMap<>();
    // Start: Bfs Init Step
    if (nodesIterator.hasNext() == true) {
        while (nodesIterator.hasNext()) {
            Node currentNode = nodesIterator.next();
            visited.put(currentNode, false);
            distance.put(currentNode, Integer.MAX_VALUE);
        }
    } else {
        System.out.println("No nodes found");
    }
    // End: Bfs Init Step 

    distance.put(rootNode, 0);
    visited.put(rootNode, true);
    queue.add(rootNode);
    Node current = null;

    while (queue.isEmpty() == false) {
        current = queue.poll();
        if (distance.get(current) <= depth) {
            Iterator<Relationship> relationships = current.getRelationships().iterator();
            if (relationships.hasNext() == true) {
                while (relationships.hasNext()) {
                    Relationship relationship = relationships.next();
                    Node adjacent = relationship.getOtherNode(current);

                    if (visited.get(adjacent) == false) {
                        /*if you want to print the distance of each node from root then 
                        System.out.println("len: "+ (distance.get(current) + 1)+" to: "+ adjacent);*/
                        distance.put(adjacent, (distance.get(current) + 1));
                        visited.put(adjacent, true);
                        queue.add(adjacent);
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-01T19:07:57.920

一种简单的方法是在探索图形时使用字典来跟踪每个节点的深度。然后如果达到最大深度就休息。

Python 中的示例：

```
from collections import deque

def bfs_maxdepth(graph, start, maxdepth):
    queue = deque([start])
    depths = {start: 0}
    while queue:
        vertex = queue.popleft()
        if depths[vertex] == maxdepth:
            break
        for neighbour in graph[vertex]:
            if neighbour in depths:
                continue
            queue.append(neighbour)
            depths[neighbour] = depths[vertex] + 1
    return depths 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-06T05:04:23.863

这行得通。假设节点中不存在已访问标志。如果 isVisited 可用，则无需跟踪 Map。

```
// k is depth, result should not contain initialNode.
public static Collection<Node> bfsWithK_Depth(Node initialNode, int k) {

    if (initialNode == null || k <= 0) {
        return new ArrayList<>();
    }

    Queue<Node> q = new LinkedList<>();
    q.add(initialNode);
    Map<Node, Node> tracker = new HashMap(); // no need if there is visited flag.
    Collection<Node> result = new ArrayList<>();

    while (!q.isEmpty()) { // Q will be filled only with eligible nodes
        --k ;
        Node node = q.remove();
        List<Node> neighbor = node.getNeighbor();
        for (Node n : neighbor) {
            if (tracker.get(n) == null && k > 0) {
                q.add(n);
            }
            if (tracker.get(n) == null) { 
                tracker.put(n, n); 
                result.add(n); // visit this node
            }
        }

    }
    return result;
} 
```

# windows - Yate Jabber Server 故障排除-登录失败未授权错误

> ID：10258306
> 
> 赞同：0
> 
> 时间：2012-04-21T10:57:06.450
> 
> 标签：windows

我可以在 windows xp 上安装 YATE 4.0，语音 thr' SIP 工作正常。我也想启用文本聊天/IM。

我遵循了本文档中的所有步骤， http://yate.null.ro/pmwiki/index.php?n= [Main.BuildYateJabberServer](http://yate.null.ro/pmwiki/index.php?n=Main.BuildYateJabberServer) 但是当我使用 Yate Client (Qt) 连接时 - 它给了我错误未注册帐户 jabber： sham@192.168.0.1 原因：未授权。更多细节，

1.  要连接到 Jabber 服务器，我在 Yate 客户端上提供以下详细信息，用户名：假密码：mypassword 域：192.168.0.1 服务器：192.168.0.1 资源：Yate 端口：5222

2.  我保留了 openssl.conf 的 Enable= no，我能够创建 postgre SQL 数据库并且连接到该数据库是成功的，因为我检查了启动 Yate 控制台，最初它给连接字符串提供了错误，连接字符串“=”丢失，我对 postgre SQl 数据库进行了修改，但在 pgsqldb.conf 中进行了更正，初始化模块 PostgreSQL 时没有错误。有没有人在本地服务器（windows）上使用 Yate 尝试过 Jabber，因为我只想将语音和 IM 限制在我的本地网络中。这有有限或没有互联网。

感谢您回答我的问题。

问候 Sham Yemul

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T05:37:31.200

我可以登录到将 PostgreSQL DB 配置为 JabberServer 的 YATE。

我为我的本地 Web 服务器创建了自签名 SSL 证书，安装方式与上述相同，并且我保留了 openssl.conf 的 Enable= yes

然后它工作得很好。SSL 证书似乎是强制性的，或者我无法在没有 SSL 证书的情况下进行设置。

# c# - 在松散耦合的模块棱镜之间共享动态对象？

> ID：10258307
> 
> 赞同：1
> 
> 时间：2012-04-21T10:57:17.983
> 
> 标签：c#, dynamic, prism, eventaggregator

是否可以在没有任何静态引用或任何其他 DI/IoC 解决方案`dynamic`的情况下在其他模块之间共享来自模块的类型对象？`interface`

假设我们在汇编中有一个这样的 GlobalEvent `Core.dll`：

```
public class GlobalEvent : CompositePresentationEvent<dynamic>
{
    public GlobalEvent()
    {
    }

    // public void Publish(dynamic payload) exist in base class
} 
```

并在`ModuleA.dll`（具有对 的静态引用`Core.dll`）中，像这样发布它：

```
public void RaiseVoucherAdded(Models.Voucher voucher)
{
    _eventAggregator.GetEvent<GlobalEvent>().Publish(voucher);
}

// also Voucher class is in ModuleA.dll in Models namespace
public class Voucher
{
     // members...
} 
```

并在`ModuleB.dll`（具有对 的静态引用`Core.dll`）中，像这样订阅：

```
 this._eventAggregator.GetEvent<GlobalEvent>().Subscribe(EventOccured);
    ...
    private void EventOccured(dynamic data)
    {
        if (data.GetType().Name == "ModuleA.Models.Voucher")
        {
            DoSomethingByVoucher(data);
        }
    } 
```

出色地，

这种解决方案有什么缺点？甚至可能吗？如果是，它是否支持由 .NET 中的任何其他 CLR 语言创建的模块？

提前致谢 ：）

# algorithm - 检查两棵树是否等价

> ID：10258325
> 
> 赞同：4
> 
> 时间：2012-04-21T10:59:34.157
> 
> 标签：algorithm, bioinformatics, phylogeny

以下是同一棵树（系统发育）的三个等效表示。我试图找出一种算法来检查两个树表示是否等效。如果节点之间的父子关系相似，则树被定义为等效的。

```
(Whale,(Seal,((Mouse,Rat),((((Carp,Loach),Frog),Chicken),Human))),Cow);
(Whale,(Seal,((Rat,Mouse),(Human,((Frog,(Loach,Carp)),Chicken)))),Cow);
((Seal,((Rat,Mouse),(Human,((Frog,(Loach,Carp)),Chicken)))), Cow, Whale); 
```

任何人都可以提出一种方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-21T11:05:06.593

一种方法是按字典顺序（或任何严格的弱排序）让孩子们走路并进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T11:08:33.030

您可以将每条边写两次 - 一次作为 (a,b) 和一次作为 (b,a) 用于两棵树。例如，为 (Mouse, Rat) 生成两个字符串：“Mouse : Rat”和“Rat : Mouse”，然后编写所有这些字符串，按字典顺序对它们进行排序并比较两个列表。如果它们相同，则树是相似的。这与 Andrew Tomazos 的解决方案不同，因为它会说一棵树类似于自下而上遍历的树，即它支持边缘反转。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T13:49:28.753

检查两棵树的中序和后序遍历。如果它们相同，则这两棵树相同

# php - 如何为 xampp 1.7.7 和 php 5.3.8 找到 ffmpeg-php dll

> ID：10258326
> 
> 赞同：0
> 
> 时间：2012-04-21T10:59:35.387
> 
> 标签：php, xampp, ffmpeg-php

我在 Windows 上的 xampp 1.7.7 和 php 5.3.8 上安装 ffmpeg-php 扩展时遇到问题。有没有人为这个版本编译过 ffmpeg-php 的 dll，我知道如何安装扩展，但我找不到适合我的 php 版本的正确 dll。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:30:00.397

这是该 [http://www.youtube.com/watch?feature=player_embedded&v=gU49GiWGGAI的最佳教程](http://www.youtube.com/watch?feature=player_embedded&v=gU49GiWGGAI)

如果您使用的 xampp 版本高于 1.7.4，则需要安装使用 MSVC9 (Visual C++ 2008) 编译的 ffmpeg。这是使用 MSVC9 (Visual C++ 2008) 编译的 ffmpeg 的链接。 [http://x32.elijst.nl/ffmpeg6-php53-win32-vc9-all.zip](http://x32.elijst.nl/ffmpeg6-php53-win32-vc9-all.zip)

# android - 在选项卡上使用 Intent 时关闭

> ID：10258334
> 
> 赞同：0
> 
> 时间：2012-04-21T11:01:09.643
> 
> 标签：android, android-intent, tabs, android-tabhost, shutdown

我创建了一个包含 3 个活动的 tabHost，因此当我单击选项卡时，我更改了活动。

这是第一个活动的代码：

```
public class estadisticas extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.estadisticas);
    // TABS

    Intent intent1 = new Intent(estadisticas.this, clasificacion.class);
    Intent intent2 = new Intent(estadisticas.this, novedades.class);
    Resources res = getResources();
    TabHost tabHost = (TabHost) findViewById(R.id.mytabhost);
    tabHost.setup();

    //tab 1
    TabSpec tab1 = tabHost.newTabSpec("estadisticas");
    tab1.setIndicator(getString(R.string.statistics),res.getDrawable(R.drawable.estadisticastabs));
    tab1.setContent(R.id.tab1);
    tabHost.addTab(tab1);

    //tab 2 
    TabSpec tab2 = tabHost.newTabSpec("clasificacion");
    tab2.setIndicator(getString(R.string.scores),res.getDrawable(R.drawable.estadisticastabs));
    tab2.setContent(intent1);
    tabHost.addTab(tab2);

    //tab 3
    TabSpec tab3 = tabHost.newTabSpec("novedades");
    tab3.setIndicator(getString(R.string.whatsnew),res.getDrawable(R.drawable.estadisticastabs));
    tab3.setContent(intent2);
    tabHost.addTab(tab3);

    // END TABS 
```

当我同时单击（或 tab2 或 tab3）时，我会关机。

我哪里错了？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:56:24.977

你错过了这两行

```
TabHost tabHost = getTabHost();
        TabHost.TabSpec spec; 
```

试试这个代码：

```
 @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.tab);
           // LocationManager locManager = (LocationManager) getSystemService(LOCATION_SERVICE);

    //if (!locManager.isProviderEnabled(LocationManager.GPS_PROVIDER)){

           //     }

           // SetupTabs();
            Resources res = getResources(); 
            TabHost tabHost = getTabHost();
            TabHost.TabSpec spec;  
            Intent intent;

            intent = new Intent().setClass(this, Addplace.class);
            spec = tabHost.newTabSpec("BYM").setIndicator("By Manually",res.getDrawable(R.drawable.marker_unselected)).setContent(intent);
            tabHost.addTab(spec);

           // createGpsDisabledAlert();
            intent = new Intent().setClass(this, HelloAndroidGpsActivity.class);
            spec = tabHost.newTabSpec("BGPS").setIndicator("By GPS",res.getDrawable(R.drawable.marker_unselected)).setContent(intent);
            tabHost.addTab(spec);
          //  }

            intent = new Intent().setClass(this, mapclass.class);
            spec = tabHost.newTabSpec("BYM").setIndicator("By Map", res.getDrawable(R.drawable.marker_unselected)).setContent(intent);
            tabHost.addTab(spec);

          //  tabHost.setCurrentTab(1);

        } 
```

# html - ASP.NET CodeBehind C#：如何从代码隐藏中获取 HTML 表格的单元格值？

> ID：10258338
> 
> 赞同：0
> 
> 时间：2012-04-21T11:01:28.500
> 
> 标签：html, asp.net, html-table, code-behind

例如这是表：

```
<table id="users">
<thead>
  <tr class="ui-widget-header ">
    <th>Name</th>
    <th>Email</th>
    <th>Password</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td><input type="text" value="Name1"/></td>
    <td><input type="text" value="Email1"/></td>
    <td><input type="text" value="Password1"/></td>
  </tr>  <tr>
    <td><input type="text" value="Name2"/></td>
    <td><input type="text" value="Email2"/></td>
    <td><input type="text" value="Password2"/></td>
  <tr>
</tbody>
</table> 
```

然后我希望代码隐藏从表中获取值..请帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T11:04:20.623

您必须使用`<asp:TextBox>`标签而不是`<input>`标签。这使您能够从代码隐藏中的文本框中获取值。
请参阅 MSDN 上的[System.Web.UI.WebControls.TextBox 文档](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.textbox.aspx)。

**更新：**
如果您不能将`<input>`标签更改为，您可以访问通过这样`<asp:TextBox>`发布的表单值：`Request.Form`

```
Request.Form[valueName] 
```

其中 value name 是发布的值的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T11:05:05.653

创建表以在这样的服务器上运行

`<table id="users" runat="server">`

并且您将能够使用 HtmlTable 类访问它。看看[http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmltable%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmltable%28v=vs.80%29.aspx)

# c# - 以树视图样式显示

> ID：10258340
> 
> 赞同：3
> 
> 时间：2012-04-21T11:01:34.183
> 
> 标签：c#

我的输入

```
Sore | aye
A    |   1 
A    |   2
A    |   3
B    |   1
B    |   2 
```

outPut：我想将顶部表排序到下面的树视图中

```
A
   1 
   2 
   3
B  
   1
   2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T11:18:19.157

给定这个对象：

```
public class MyObject
{
    public string Sore { get; set; }
    public int aye { get; set; }
} 
```

有了这些数据：

```
var ls=new List<MyObject>();
ls.Add(new UserQuery.MyObject(){Sore="A",aye=1});
ls.Add(new UserQuery.MyObject(){Sore="A",aye=2});
ls.Add(new UserQuery.MyObject(){Sore="A",aye=3});
ls.Add(new UserQuery.MyObject(){Sore="B",aye=1});
ls.Add(new UserQuery.MyObject(){Sore="B",aye=2}); 
```

你可以很容易地做到这一点：

```
var result=ls.GroupBy (l =>l.Sore)
      .Select (l =>new 
                    {
                        Root= l.Key,
                        Children=l.Select (x =>x.aye)
                    }
                ).ToList(); 
```

然后循环列表：

```
foreach (var root in result)
    {
        //root.Root to the root node
        foreach(var child in root.Children)
        {
            //Add the child to the root nodes children
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T11:16:00.810

```
var str = "Sore | aye\r\nA    |   1 \r\nA    |   2\r\nA    |   3\r\nB    |   1\r\nB    |   2";

var relations = str.Split(new[] {Environment.NewLine},
                          StringSplitOptions.RemoveEmptyEntries)
                   .Skip(1).Select(l => l.Split('|').Select(
                                   x => x.Trim()).ToArray()).ToArray();

var relationsDic = new SortedDictionary<string, SortedSet<string>>();

foreach (var relation in relations)
{
    if (relationsDic.ContainsKey(relation[0]))
    {
        relationsDic[relation[0]].Add(relation[1]);
    }
    else
    {
        relationsDic[relation[0]] = new SortedSet<string> {relation[1]};
    }
}

foreach (var kvp in relationsDic)
{
    Console.WriteLine(kvp.Key);

    foreach (var sub in kvp.Value)
    {
        Console.WriteLine("\t" + sub);
    }
} 
```

# php - 带有 HTML 的 PHP 简单 foreach 循环

> ID：10258345
> 
> 赞同：76
> 
> 时间：2012-04-21T11:02:14.917
> 
> 标签：php, html, foreach

我想知道是否最好实际编写以下内容，例如：

```
<table>
    <?php foreach($array as $key=>$value){ ?>
    <tr>
        <td><?php echo $key; ?></td>
    </tr>
    <?php } ?>
</table> 
```

所以基本上将 HTML 嵌入到 foreach 循环中，但不使用`echo`打印表格标签。这行得通吗？我知道在 JSP 中这是有效的。

* * *

## 回答 #1

> 赞同：211
> 
> 时间：2012-04-21T11:06:53.723

这将起作用，尽管在 HTML 中嵌入 PHP 时，最好使用以下形式：

```
<table>
    <?php foreach($array as $key=>$value): ?>
    <tr>
        <td><?= $key; ?></td>
    </tr>
    <?php endforeach; ?>
</table> 
```

[您可以在 PHP.net 上](http://www.php.net/manual/en/control-structures.alternative-syntax.php)找到替代语法的文档

# javascript - 执行按钮单击事件的操作，按钮被放置在 dojox.grid.DataGrid 中。

> ID：10258346
> 
> 赞同：0
> 
> 时间：2012-04-21T11:02:18.450
> 
> 标签：javascript, jsp, button, dojo, dojox.grid.datagrid

我有一个`dojox.grid.DataGrid`. 在此显示一组值以及填充的最后 2 列，这些列是根据使用属性`buttons`从数据库中检索到的数据动态创建的。现在我的网格很好。按钮也很好。我现在需要做的是，当我单击该按钮单击事件上的特定按钮时，我将其重定向到一个新 URL，其中特定值（A）作为该 URL 中的查询字符串参数传递。而且我不希望我的页面被刷新。就像单击按钮时，它会在其他 JSP 页面上执行操作并显示消息。`formatter``gridStruture``alert("Action is being performed")`

我为我的数据网格编码的java脚本代码::

```
<script type="text/javascript">
function getInfoFromServer(){
        $.get("http://localhost:8080/2_8_2012/jsp/GetJson.jsp?random=" + new Date().getTime(), function (result) {
        success:postToPage(result),
        alert('Load was performed.');
            },"json");
    }

    function postToPage(data){
    alert(data);    
    var storedata = {
        identifier:"ActID",
        items: data
        };
    alert(storedata);

    var store1 = new dojo.data.ItemFileWriteStore({data: storedata}) ;
    var gridStructure =[[

                          { field: "ActID",
                                name: "Activity ID",

                                classes:"firstName"
                          },
                          {
                              field: "Assigned To",
                              name: "Assigned To",

                              classes: "firstName"
                          },
                          { field: "Activity Type",
                                name: "Activity Type",

                                classes:"firstName"
                          },
                          {
                              field: "Status",
                              name: "Status",

                              classes: "firstName"
                          },
                          {
                              field: "Assigned Date",
                              name: "Assigned Date",

                              classes: "firstName"
                          },
                          {
                              field: "Assigned Time",
                              name: "Assigned Time",

                              classes: "firstName"
                          },
                          {
                              field: "Email",
                              name: "Send Mail",
                              formatter: sendmail,
                              classes: "firstName"

                          },
                          {
                              field: "ActID",
                              name: "Delete",
                              formatter: deleteact,
                                classes: "firstName"
                          }

                    ]
              ];
    //var grid = dijit.byId("gridDiv");
    //grid.setStore(store1);

    var grid = new dojox.grid.DataGrid({

        store: store1,
        structure: gridStructure,
        rowSelector: '30px',
        selectionMode: "single",
        autoHeight:true,
        columnReordering:true

        },'gridDiv');

    grid.startup();
    dojo.connect(grid, "onRowClick", grid, function(){
                var items = grid.selection.getSelected();
                dojo.forEach(items, function(item){
                    var v = grid.store.getValue(item, "ActID");
                    getdetailsfordialog(v);

                    function showDialog() {
                        dojo.require('dijit.Tooltip');
                        dijit.byId("terms").show();
                    }

                    showDialog();
                    }, grid);

            });
}

function sendmail(item) {
    alert(item);
      return "<button onclick=http://localhost:8080/2_8_2012/jsp/SendMailReminder.jsp?Send Mail="+item+"'\">Send Mail</button>";

    }
function deleteact(item) {
    alert(item);
      return "<button onclick=http://localhost:8080/2_8_2012/jsp/DeleteActivity.jsp?Activity ID="+item+"'\">Delete</button>";
    }
</script> 
```

我正在使用`$.get`调用获取网格数据。在上面的代码字段中`Email`，`ActID`实际上是在每次运行时创建的按钮，`sendmail`并且`deleteact`正在被调用`formatter`。显示网格。两个函数中的值也`alert(item)`都出现了，即存​​在各自的值。就像`alert(item)`在`Delete`我得到`ActID`和得到现在我想要`alert(item)`在我的页面上的特定（列中的按钮）`sendmail``"shan@gmail.com"``button click``Sendmail`

```
http://localhost:8080/2_8_2012/jsp/SendMailReminder.jsp?Send Mail="+item+"' 
```

并`button click`在`Delete`此页面的列中

```
http://localhost:8080/2_8_2012/jsp/DeleteActivity.jsp?Activity ID="+item+"'\" 
```

打开从数据库中检索到的项目的值。我还应用了一个`rowClick`事件，这也导致了问题，因为当我单击 u 按钮时，我的`Rowclick`事件触发而不是按钮单击事件。这该怎么做。我想将点击事件应用于网格上的每个按钮。但是有ID我不知道。请帮我解决这个问题。谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:25:45.547

我认为，您需要调整服务器端代码以处理发送邮件的 ajax 发布请求，并`dojo.xhrPost`在用户单击按钮时使用方法。您的 JS 代码可能如下所示：

```
 function sendMailHandler(evt, item) {
    dojo.xhrPost({
      url: "/2_8_2012/jsp/SendMailReminder.jsp",
      content: {
        'SendMail': item
      },
      error: function() {
        alert("Sent failure");
      },
      load: function(result) {
        alert("Email sent with result: " + result);
      }
    });

    dojo.stopEvent(evt);
  }

  function sendmail(item) {
    return "<button onclick='sendMailHandler(arguments[0], \"" + item +  "\")'>Send Mail</button>";
  } 
```

请注意，`dojo.stopEvent(evt);`in`sendMailHandler`用于停止事件冒泡并防止`RowClick`引发。

也`dojo.xhrGet`有类似的语法来执行 ajax GET 请求，您可以使用它来代替 jQuery 的`$.get`. 您也可以在我的示例中使用`dojo.xhrGet`而不是`dojo.xhrPost`，因为它有可能无需调整即可与您的后端一起使用，但`POST`（或 ajax 表单提交）在语义上会更正确。

关于“尝试注册 id="something"，您应该调整您的代码以避免 ID 重复。或者显示您的代码导致错误。

# objective-c - NSButtonCell悬停图像，点击透明背景？

> ID：10258347
> 
> 赞同：3
> 
> 时间：2012-04-21T11:02:21.003
> 
> 标签：objective-c, cocoa, hover, transparency, nsbuttoncell

我已经实现了一个带有图像的 NSButton。

当用户将其悬停时，图像会更改为其他内容，然后重新显示。

* * *

**正常状态：**

![在此处输入图像描述](../Images/6ad0225558c9f2eff8c89dbf68791a9e.png)

**悬停时：**

![在此处输入图像描述](../Images/2607444feeaafea409677fba96d738ff.png)

* * *

我用于的代码`NSButtonCell`是：

**界面 ：**

```
#import <Foundation/Foundation.h>

@interface DKHoverButtonCell : NSButtonCell 
{
    NSImage *_oldImage;
    NSImage *hoverImage;
}

@property (retain) NSImage *hoverImage;

@end 
```

**执行 ：**

```
#import "DKHoverButtonCell.h"

@interface NSButtonCell()
- (void)_updateMouseTracking;
@end

@implementation DKHoverButtonCell

@synthesize hoverImage;

- (void)mouseEntered:(NSEvent *)event {
    if (hoverImage != nil && [hoverImage isValid]) {
        _oldImage = [[(NSButton *)[self controlView] image] retain];
        [(NSButton *)[self controlView] setImage:hoverImage];
    }
}

- (void)mouseExited:(NSEvent *)event {
    if (_oldImage != nil && [_oldImage isValid]) {
        [(NSButton *)[self controlView] setImage:_oldImage];
        [_oldImage release];
        _oldImage = nil;
    }
}

- (void)_updateMouseTracking {
    [super _updateMouseTracking];
    if ([self controlView] != nil && [[self controlView] respondsToSelector:@selector(_setMouseTrackingForCell:)]) {
        [[self controlView] performSelector:@selector(_setMouseTrackingForCell:) withObject:self];
    }
}

- (void)setHoverImage:(NSImage *)newImage {
    [newImage retain];
    [hoverImage release];
    hoverImage = newImage;
    [[self controlView] setNeedsDisplay:YES];
}

- (void)dealloc {
    [_oldImage release];
    [hoverImage release];
    [super dealloc];
}

@end 
```

* * *

**现在，这里是问题：**

*   尽管上述控件 100% 工作（带有“X”圆形图像和透明背景），但当用户单击它时，它会显示“白色”-ish 背景，而不是保留我旧的“透明”背景
*   我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-21T20:10:58.857

您需要将按钮的类型更改为***Momentary Change***。您可以在属性检查器中更改它：

![怎么做](../Images/e8b576dc0bc6b1e1ccd2cc274f9f0e68.png)

或以编程方式更改：

```
[button setButtonType:NSMomentaryChangeButton]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-04T13:26:06.000

但是对于您的情况，使用从一开始就存在的`showsBorderOnlyWhileMouseInside`属性（OS X 10.0）就足够了。`NSButtonCell`只有当鼠标悬停在按钮内时，才会显示按钮的边框。将其与填充和浅灰色的边框样式相结合，它将非常接近您所获得的结果。

不需要子类化，也不需要使用未记录的 API 函数（在您的情况下，`_updateMouseTracking`）。

```
closeButton.bezelStyle = .inline
closeButton.setButtonType(.momentaryPushIn)

if let buttonCell = closeButton.cell as? NSButtonCell {
    buttonCell.showsBorderOnlyWhileMouseInside = true
} 
```

# asp.net-mvc-3 - 不支持关键字：“元数据”

> ID：10258348
> 
> 赞同：3
> 
> 时间：2012-04-21T11:02:31.367
> 
> 标签：asp.net-mvc-3, connection-string, publish

我正在尝试发布我的 mvc 3 项目，但由于连接字符串错误，我无法连接到 sql 服务器（使用 EF）。这里是：

```
 <add name="PackStoreEntities" connectionString="metadata=res://*/Models.PackStore.csdl|res://*/Models.PackStore.ssdl|res://*/Models.PackStore.msl;provider=System.Data.SqlClient;provider connection string=&quot;workstation id=PackStore.mssql.somee.com;packet size=4096;user id=*****;pwd=****;data source=PackStore.mssql.somee.com;persist security info=False;initial catalog=PackStore&quot;" providerName="System.Data.EntityClient" /> 
```

我把这部分从我的主人那里拿走了：

```
workstation id=PackStore.mssql.somee.com;packet size=4096;user id=*****;pwd=****;data source=PackStore.mssql.somee.com;persist security info=False;initial catalog=PackStore 
```

Mvc 项目在本地服务器上运行良好，但在发布时我得到 "Keyword not supported: 'metadata'" 。我的错误在哪里？谢谢你的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T11:06:16.797

试试这个...

```
<add name="PackStoreEntities" connectionString="metadata=res://*;provider=System.Data.SqlClient;provider connection string='Data Source=PackStore.mssql.somee.com;Initial Catalog=PackStore;User ID=***;Password=****;'"  providerName="System.Data.EntityClient" /> 
```

编辑..

```
<add name="PackStoreEntities" connectionString="metadata=res://*;provider=System.Data.SqlClient;provider connection string='workstation id=PackStore.mssql.somee.com;packet size=4096;user id=*****;pwd=****;data source=PackStore.mssql.somee.com;persist security info=False;initial catalog=PackStore;'" providerName="System.Data.EntityClient" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T21:33:20.440

我在从 Linq To Sql 转换为 Entity 框架时也遇到了这个错误，即使在修复了我的连接字符串之后也是如此。原来有些 asp:SqlDataSource 控件需要切换到 asp:EntityDataSource。

前：

```
 <asp:SqlDataSource ID="SqlDataSourceProducts" runat="server" SelectCommand="SELECT Id, Description FROM [Product]"
        ConnectionString="<%$ ConnectionStrings:crmConnectionString %>" CacheDuration="5" CacheExpirationPolicy="Absolute">
    </asp:SqlDataSource> 
```

后：

```
 <asp:EntityDataSource ID="SqlDataSourceProducts" runat="server" Select="Id, Description"
        EntitySetName="Products" ConnectionString="<%$ ConnectionStrings:crmConnectionString %>" DefaultContainerName="CRM" >
    </asp:EntityDataSource> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-29T16:01:17.207

在您的 web.config 中，您需要有两个单独的连接：一个用于实体框架，一个用于 ADO.net

应该是这样的：

```
<connectionStrings>
        <add name="LoginDB" connectionString="Data Source=****;Initial Catalog=int422_113b16;User ID=****;Password=****" />
        <add name="BlogEntities" connectionString="metadata=res://*/App_Code.BlogModel.csdl|res://*/App_Code.BlogModel.ssdl|res://*/App_Code.BlogModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source****;initial catalog=int422_113b16;user id=****;password=****;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
</connectionStrings> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T11:14:35.437

从连接字符串中删除他的元数据。这仅适用于本地调试。对于在线申请可以不需要。

请尝试 naim 给出的连接字符串

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-15T05:04:32.303

有一个类似的问题，似乎来自somee服务器的连接字符串必须在两个之间`&quot;` 这就是我改变的全部并且它有效......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-12T15:32:36.127

我不确定为什么人们认为您的 web.config 中需要两个连接，这是不正确的。我想检查的第一件事是查看我的连接是否在 Visual Studio 中有效。尝试转到您的服务器资源管理器并在那里连接到您的数据库。如果您能够毫无问题地连接并且能够看到您的表格，那么您就知道这不是连接问题。第二件事确保您的模型名称与您的 web.config 中的名称匹配。这可以最大限度地减少项目中的混乱程度，并最终确保您的模型名称空间指向您的项目名称空间，这样您就可以通过模型名称调用模型，而不必导入或完全限定它。

您应该能够使用模型中的任何表创建强视图。这就是我为我所做的，我没有像许多人建议的那样修改连接字符串，也没有删除元数据。

查看此[故障排除](http://blogs.teamb.com/craigstuntz/2010/08/13/38628/)指南，它可能会有所启发，并帮助您了解实体连接的工作原理。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-06T21:10:21.140

我有同样的例外，但能够通过保持`ConnectionString`相同但使用 a`EntityConnection`而不是 a来修复它`SqlConnection`。

# curl - 如何使用 curl 获取链接，但不包括跨度、样式等

> ID：10258349
> 
> 赞同：0
> 
> 时间：2012-04-21T11:02:38.677
> 
> 标签：curl, preg-match, preg-match-all, web-crawler

这是 curl 中仅解析网站链接的代码（包括所有参数，如跨度、样式）：

```
if(preg_match_all('/<a.*?href="(.*?)".*?>(.*?)<\/a>/si',$result,$parts))
{

    $links=$parts[0];

    foreach($links as $link)
    {
        echo $link."<br>";
    }
    curl_close($ch);
} 
```

但我想从标签中排除跨度、样式。我怎样才能以那种模式编辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T12:27:48.003

你的意思是说如果`<span>`标签出现在`<a>`and之间`</a>`，你不希望它出现在输出中？

如果是这样，没有简单的方法可以在正则表达式中完成，但您可以在打印之前对每个函数使用[strip_tags()之类的函数。](http://jp2.php.net/strip_tags)`$link`

顺便说一句，可能适合您目的的更简单的模式是`/<a .*?<\/a>/`.

# ruby-on-rails - Cucumber + Capybara：“当我按 X 时”什么都没有发生

> ID：10258358
> 
> 赞同：0
> 
> 时间：2012-04-21T11:04:29.510
> 
> 标签：ruby-on-rails, ruby, testing, cucumber, capybara

这一定很简单，但我似乎找不到我的代码有什么问题。我有一个非常简单的表单，当我在浏览器中使用它时可以正常工作。

当我用黄瓜测试它时，按下提交按钮的步骤显然什么都不做，因为所有后续的“then”步骤都失败了，没有发现任何应该出现的成功消息。

我放了一条简单的调试消息，在按下提交按钮后显示论坛的 html 代码，并显示未提交的表单 html。有什么想法吗？

# android - 片段事务：替换片段

> ID：10258363
> 
> 赞同：4
> 
> 时间：2012-04-21T11:05:27.817
> 
> 标签：android

我正在制作一个简单的应用程序来理解 android 中的 Fragments。一切似乎都很简单，除了一个，即我在 LeniarLayout 中动态添加了多个片段。它工作得很好，但是现在当**我尝试使用其他片段在该容器布局上调用 replace 时，它​​不会删除所有先前添加的片段**。为什么会有这样的行为？

Android api 说“*替换已添加到容器中的现有片段。这与为所有当前添加的片段调用 remove(Fragment) 相同，这些片段使用相同的 containerViewId 添加，然后使用 add(int, Fragment, String)这里给出的论点相同*。”

请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-13T16:40:52.920

也许你忘记了提交？

这是完整的工作流程：

```
final FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
transaction.replace(R.id.content_fragment, myFragment, myFragment.name );
transaction.commit(); 
```

希望这可以帮助。

# matrix - 卡尔曼增益和误差协方差矩阵应该是对角线吗？

> ID：10258364
> 
> 赞同：3
> 
> 时间：2012-04-21T11:06:03.023
> 
> 标签：matrix, kalman-filter

我开发了一个扩展卡尔曼滤波器并将卡尔曼增益矩阵、前一个、当前和下一个状态误差协方差矩阵初始化为 1 的对角线。在第一个样本之后，矩阵不再是对角线。这是正确的还是应该保持对角线？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T08:30:50.640

协方差矩阵（通常称为 P）是对您所在州的误差的估计。对角线元素是状态变量的方差。非对角线元素表示状态变量（错误/不确定性）之间的相关性。

您通常会通过将对角元素设置为状态初始值中的不确定性（在大多数情况下非常大）来初始化 P对角线元素将变为非零。

请注意，P 应该是对称的并保持对称。

# android - Android getbearing 仅返回 0.0。尝试使用旋转当前位置图标

> ID：10258365
> 
> 赞同：0
> 
> 时间：2012-04-21T11:06:14.167
> 
> 标签：android, google-maps-api-3, gps, location, android-mapview

这部分是对上一个问题的扩展：[Android 编程，mapview locationoverlay: how to change the default blue location dot, with another image](https://stackoverflow.com/questions/10200074/android-programming-mapview-locationoverlay-how-to-change-the-default-blue-loc)

我一直在努力让设备位置显示在地图上（使用 enablemylocation 很容易），但我需要替换默认图标（很简单，对其进行排序）然后旋转它以对应于当前设备方位 - 从 GPS 获取，因为它需要是移动方向，而不是手机面对的方向。

我使用 'getbearing()' 的方式与我成功使用 'getlatitude()' 和 'getaltitude()' 的方式相同，但 getbearing 始终返回 0。（以确保不是旋转的代码图标是轴承的变量在发生其他任何事情之前打印在文本视图中的问题）

非常奇怪的是，它现在在 5 秒内工作了两次，然后又返回 0 - 所以理论上代码似乎是正确的？

代码如下。

亲切的问候

缺口

**主要活动：**

```
package com.nick.kestrel;

import android.content.Context;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.widget.TextView;

import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;

public class KestrelActivity extends MapActivity {
/** Called when the activity is first created. */

static TextView LocationText;
MapView mapView;

@Override
protected boolean isRouteDisplayed() {
        return false;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

  //Identifies the textview 'locationtext' as the variable LocationText. Planned usage just for debugging
    LocationText = (TextView)findViewById(R.id.locationtext);

  //defines the mapview as variable 'mapView' and enables zoom controls
    mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);

    /**
     * Code required to receive gps location. Activates GPS provider, and is set to update only after
     * at least 10 seconds and a position change of at least 10 metres
     */
    LocationListener locationListener = new MyLocationListener();

    //setting up the location manager
    LocationManager locman = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    locman.requestLocationUpdates(LocationManager.GPS_PROVIDER, 500, (float) 0.01, locationListener); 

    //Adds a current location overlay to the map 'mapView' and turns on the map's compass

    MyLocation myLocationOverlay = new MyLocation(this, mapView);
    myLocationOverlay.enableMyLocation();
    myLocationOverlay.enableCompass();

    mapView.getOverlays().add(myLocationOverlay);
    mapView.postInvalidate();
} 
```

}

**我的位置监听器**

```
package com.nick.kestrel;

import android.location.Location;
import android.location.LocationListener;
import android.os.Bundle;

public class MyLocationListener implements LocationListener {

private boolean hasbearing;

/**
 * Code to run when the listener receives a new location
 */

@Override
public void onLocationChanged(Location locFromGps) {

    //Toast.makeText(getApplicationContext(), "Location changed, Lat: "+locFromGps.getLatitude()+" Long: "+ locFromGps.getLongitude(), Toast.LENGTH_SHORT).show();

    //LocationText.setText("Your Location: Latitude " +locFromGps.getLatitude() + " Longitude: " +locFromGps.getLongitude());

    double dbllatitude = locFromGps.getLatitude();
    double dbllongitude = locFromGps.getLongitude();
    double dblaltitude = locFromGps.getAltitude();
    float bearing = locFromGps.getBearing(); 

    KestrelActivity.LocationText.setText("Your Location: Latitude " + dbllatitude + " Longitude: " +dbllongitude + " Altitude " + dblaltitude + " Bearing: " + bearing);

    hasbearing = locFromGps.hasBearing();

    if (hasbearing =  false) {

        //Toast.makeText(getApplicationContext(), "No bearing", Toast.LENGTH_SHORT).show();

    }
    else
    {
        //Toast.makeText(getApplicationContext(), "I HAZ bearing: " + locFromGps.getBearing(), Toast.LENGTH_SHORT).show();
    }

}

@Override
public void onProviderDisabled(String provider) {
   // called when the GPS provider is turned off (user turning off the GPS on the phone)
}

@Override
public void onProviderEnabled(String provider) {
   // called when the GPS provider is turned on (user turning on the GPS on the phone)
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
   // called when the status of the GPS provider changes

} 
```

}

**我的位置**

```
package com.nick.kestrel;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Matrix;
import android.graphics.Point;
import android.location.Location;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapView;
import com.google.android.maps.MyLocationOverlay;

public class MyLocation extends MyLocationOverlay {
private Context mContext;
static float   mOrientation;

public MyLocation(Context context, MapView mapView) {
    super(context, mapView);
    mContext = context;
}

@Override 
protected void drawMyLocation(Canvas canvas, MapView mapView, Location lastFix, GeoPoint myLocation, long when) {
    // translate the GeoPoint to screen pixels
    Point screenPts = mapView.getProjection().toPixels(myLocation, null);

    // create a rotated copy of the marker
    Bitmap arrowBitmap = BitmapFactory.decodeResource( mContext.getResources(), R.drawable.pin_icon);
    Matrix matrix = new Matrix();
    matrix.postRotate(mOrientation);
    Bitmap rotatedBmp = Bitmap.createBitmap(
        arrowBitmap, 
        0, 0, 
        arrowBitmap.getWidth(), 
        arrowBitmap.getHeight(), 
        matrix, 
        true
    );
    // add the rotated marker to the canvas
    canvas.drawBitmap(
        rotatedBmp, 
        screenPts.x - (rotatedBmp.getWidth()  / 2), 
        screenPts.y - (rotatedBmp.getHeight() / 2), 

        null

    );
    mapView.postInvalidate();

}

public void setOrientation(float newOrientation) {
     mOrientation = newOrientation;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T11:42:14.373

什么是位置提供者？如果是`NETWORK_PROVIDER`，那么您将无法获得轴承，因为它的精度低，无法检测轴承。

在外面试试你的应用程序`GPS_PROVIDER`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T20:02:32.237

问题解决了！感谢 Aleksejs 的努力 - 原来这是一个 PICNIC 案例。

我已将 GPS 设置为以最小的移动进行更新，并且随着位置的跳跃，我认为它应该能够计算出方位并继续进行。

在测试 'getSpeed()' 的结果时，我注意到轴承工作 - 结果你**必须比花园周围移动一点**，以便有时间计算你的轴承。

问候

缺口

# visual-studio-2010 - VS 2010 + ReSharper 6.1 - 插入新行的快捷方式？

> ID：10258372
> 
> 赞同：6
> 
> 时间：2012-04-21T11:07:07.980
> 
> 标签：visual-studio-2010, editor, keyboard-shortcuts, resharper-6.1

在IntelliJ中，可以按`Ctrl`++在编辑器的当前光标位置插入新行。`Alt``Enter`

VS + ReSharper 是否存在这样的快捷方式？

此外，我希望使用 IntelliJ 快捷方式来完成当前语句，而无需跳转到下一行。

在 IntelliJ 中

`Ctrl`+ `Shift`+ `Enter`= 完成当前语句而不跳到下一行。
`Shift`+ `Enter`= 只跳到下一行。
`Ctrl`+ `Alt`+ `Enter`= 插入新行并将当前行向下移动。

很想为 VS + ReSharper 提供这个

我真的很感谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T15:33:29.650

根据您的要求：

> 完成当前语句而不跳到下一行。

我知道的最短方法是***Ctrl+Shift+Enter***，***Ctrl+L***（如果使用 VisualStudio 方案）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-07T08:24:27.147

配置快捷方式Edit.LineOpenBelow

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T11:11:54.570

IIRC，Ctrl+enter 在 VS 中插入一个新行（即使没有 resharper）...

# css - 防止一行中的多个跨度重叠（Clojure 打嗝代码，但纯粹与 css 相关）

> ID：10258375
> 
> 赞同：0
> 
> 时间：2012-04-21T11:08:00.620
> 
> 标签：css, clojure, hiccup

如何将两个`div`s 分组在 a 内`span`（一个在另一个下方，`div`包含文本并具有固定宽度）并在固定宽度标签中显示多个`span`这样的。`td`我能够这样做，但我`span`的重叠。如果一行中的空间已满，则下一个`span`应该在下一行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T11:27:19.813

您需要更正您的标记。

不允许将块级元素（like `div`）放入内联元素（like `span`）中。这样做会使您的标记无效并弄乱布局，因为内联元素对`width`和有限制`margin`。

声明`display:block`或`display:inline-block`在您的跨度上，甚至更好地将它们转换为 div。这很可能会解决您的问题。

# java - java代码有什么问题？

> ID：10258376
> 
> 赞同：1
> 
> 时间：2012-04-21T11:08:04.313
> 
> 标签：java, if-statement, enums

我正在尝试生成一个数字来执行 switch 语句，但它没有生成正确的结果。但是当删除 IF 块时，它可以正常工作。代码中的问题是什么？

```
import static java.lang.Character.isDigit;
public class TrySwitch
{
  enum WashChoise {Cotton, Wool, Linen, Synthetic }
  public static void main(String[]args)
        {

        WashChoise Wash = WashChoise.Cotton;
        int Clothes = 1;
         Clothes = (int) (128.0 * Math.random());
         if(isDigit(Clothes))
         {
            switch (Clothes)
            {
                case 1:
                System.out.println("Washing Shirt");
                Wash = WashChoise.Cotton;
                break;
                case 2:
                System.out.println("Washing Sweaters");
                Wash = WashChoise.Wool;
                break;
                case 3:
                System.out.println("Socks ");
                Wash = WashChoise.Linen;
                break;
                case 4:
                System.out.println("washing Paints");
                Wash = WashChoise.Synthetic;
                break;

            }
                switch(Wash)
                {
                    case Wool:
                    System.out.println("Temprature is 120' C "+Clothes);
                    break;
                    case Cotton:
                    System.out.println("Temprature is 170' C "+Clothes);
                    break;
                    case Synthetic:
                    System.out.println("Temprature is 130' C "+Clothes);
                    break;
                    case Linen:
                    System.out.println("Temprature is 180' C "+Clothes);
                    break;

                 }              
                }   
         else{
             System.out.println("Upps! we don't have a digit, we have  :"+Clothes );
                  }
        }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T11:12:44.583

您没有正确使用 isDigit()，它需要一个 char 作为参数，而不是一个 int，请参阅此链接：[http ://www.tutorialspoint.com/java/character_isdigit.htm](http://www.tutorialspoint.com/java/character_isdigit.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T11:20:26.880

诀窍在于 isDigit 方法适用于字符并检测它们是否代表数字。例如`isDigit(8) == false`，因为 8 映射到 ASCII 中的退格，但`isDigit('8') == true`因为 '8' 在 ASCII 中实际上是 56。

您可能想要做的是完全删除 if 并将随机生成更改为始终生成 1 到 4 之间的数字。这可以按如下方式完成：

```
Clothes = ((int) (128.0 * Math.random())) % 4 + 1; 
```

将`% 4`确保该值始终介于 0 和 3 之间，并将`+ 1`范围转移到 1 到 4。

您还可以使用 java 中包含的 Random 类：

```
import java.util.Random;
...
Clothes = new Random().nextInt(4) + 1 
```

再次`+ 1`将范围转换为 1 到 4 （含）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T11:18:27.453

isDigit() 本质上是测试 48-57 范围内的 ascii 值，即数字字符。很有可能，事实并非如此`Clothes`。

[http://www.asciitable.com/](http://www.asciitable.com/)

# php - YII：如何在页面加载时更新 ajax 数据？

> ID：10258383
> 
> 赞同：3
> 
> 时间：2012-04-21T11:09:07.670
> 
> 标签：php, ajax, drop-down-menu, yii

我有一个更新 ajax 字段的下拉列表。一切正常，但 ajax 字段没有在页面加载时填充数据。如何在页面加载时强制 ajax 字段更新？

这是视图中的下拉列表：

```
echo CHtml::dropDownList('category_selection_code', '', $cat_list_data, 
        array('style'=>'width:400px',
              'ajax' => 
                        array(
                            'type'=>'POST', 
                            'url'=>CController::createUrl('articles/GetContentFields'), 
                            'update'=>'#ExtraContentFields', 

                        )
            )
); 
```

* * *

*更新

我找到了适合我的解决方案：

```
$(document).ready(function(){
    $.ajax({
        type: 'POST',
        data: {category_selection_code: $('#category_selection_code').val()},
        url: '<?php echo CController::createUrl('articles/GetContentFields'); ?>',
        success: function(data){
                    $('#ExtraContentFields').html(data)
                }
    })
}) 
```

ajax 处理**文章/GetContentFields**的控制器正在等待$_POST 数组中的**category_selection_code**参数。我们应该在ajax部分的**数据**部分设置它：

数据：{**类别**选择代码：$（'#category_selection_code'）.val（）}，

* * *

谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T11:59:59.857

我不认为你上面所做的是正确的。首先，CHtml::dropdownList() 函数的第四个参数是一个 HTML 选项数组。[查看 CHtml::dropdownList() 的函数签名](http://www.yiiframework.com/doc/api/1.1/CHtml#dropDownList-detail)

将您的 AJAX 调用放入

```
$(document).ready(function() {
 //Your call goes in here. 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T14:02:33.707

火灾变化事件对我有用。另外，我找到了有用`CHtml::activeId(..)`的方法。

```
<?php
$cs = Yii::app()->clientScript->registerScript(
  'update-brand-car-on-page-load',
  '$(document).ready(function() {
        $("#'.CHtml::activeId($model, 't_brand_car').'").change();
    });'
);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T15:33:33.207

也许这会有所帮助：

```
jQuery(function($) {
    $('input name["category_selection_code"]').change();
}); 
```

# javascript - 将谷歌地图位置数据传递给 Rails 表单？

> ID：10258384
> 
> 赞同：1
> 
> 时间：2012-04-21T11:09:40.333
> 
> 标签：javascript, ruby-on-rails

当我将地图上的标记拖到新位置时，单击标记后会出现一个信息窗口，其中包含以下属性：电子邮件、纬度、经度。如何使用新位置的信息自动设置这些属性（纬度和经度），以便我只需填写：电子邮件并单击提交？这是我的代码（不完整）。

```
google.maps.event.addListener(testMarker, 'dragend', function(evt) {
        var testContent = '<%= form_for @newlazystreeter, :url => { :action => "create" }, :html => {:class => "nifty_form"} do |f| %>'+
            '<%= f.text_field :email %><br>'+
            '<%= f.text_field :latitude %><br>'+
            '<%= f.text_field :longitude %><br>'+
            '<%= f.submit "Submit!" %>'+
            '<% end %>';
        var infowindow = new google.maps.InfoWindow({
            content: testContent
        });
        infowindow.open(map,testMarker);
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T04:34:36.217

我认为，最好将表单代码分开，因为在某些情况下，rails 会生成多行，并且从 html 到 javascript 的转换将不起作用。

所以，第一件事是将表单添加到 DOM 并将其隐藏在不可见的 div 中：我还添加了一些 id 以便以后更容易找到这些元素（表单、纬度和经度）

```
<div style="display:none">
  <%= form_for @newlazystreeter, :url => { :action => "create" }, :html => {:class => "nifty_form", :id => "info_window_form"} do |f| %>
    <%= f.text_field :email %><br>
    <%= f.text_field :latitude, :id => 'latitude_field' %><br>
    <%= f.text_field :longitude, :id => 'longitude_field' %><br>
    <%= f.submit "Submit!" %>
  <% end %>
 </div> 
```

比您使用表单元素作为内容选项创建信息窗口：

```
var infowindow = new google.maps.InfoWindow({
  content: document.getElementById('info_window_form'),
}); 
```

这里是我真正回答你问题的地方。最后，您必须将您想要的行为添加到标记中。您打开信息窗口并更新纬度和经度的表单值。

```
google.maps.event.addListener(testMarker, 'dragend', function(evt) {
  document.getElementById('latitude_field').value = testMarker.position.lat();
  document.getElementById('longitude_field').value = testMarker.position.lng();
  infowindow.open(map,testMarker);
}); 
```

我建议再做一件事：在拖动标记时隐藏此信息窗口。

```
google.maps.event.addListener(testMarker, 'dragstart', function(evt) {
  infowindow.close();
}); 
```

请记住在触发的侦听器上添加此 javascript 代码，`DOMContentLoaded`以确保找到每个 html id。

```
document.addEventListener('DOMContentLoaded', function () {
  // add here javascript code to load map and all this stuff above
}, false); 
```

这应该运行良好。

# shell - 切 | 排序 | uniq -d -c | 但？

> ID：10258385
> 
> 赞同：3
> 
> 时间：2012-04-21T11:09:41.200
> 
> 标签：shell

给定的文件格式如下。

```
GGRPW,33332211,kr,P,SUCCESS,systemrenewal,REN,RAMS,SAA,0080527763,on:X,10.0,N,20120419,migr
GBRPW,1232221,uw,P,SUCCESS,systemrenewal,REN,RAMS,ASD,20075578623,on:X,1.0,N,20120419,migr
GLSH,21122111,uw,P,SUCCESS,systemrenewal,REN,RAMS,ASA,0264993503,on:X,10.0,N,20120419,migr 
```

我需要取出重复项并计数（每个重复项按 f1、2、5、14 分类）。然后将第一个重复出现记录整个字段插入数据库并在另一列中标记计数（重复）。为此，我需要剪切所有提到的 4 个字段并使用 uniq -d 进行排序并找到重复项，对于计数，我使用 -c。现在在整理完所有重复后再次回来，我需要输出为以下形式。

```
3,GLSH,21122111,uw,P,SUCCESS,systemrenewal,REN,RAMS,ASA,0264993503,on:X,10.0,N,20120419,migr 
```

而三是 f1、2、5、14 的重复重复次数，其余字段可以来自任何重复行。

通过这种方式，应从原始文件中删除 dups 并以上述格式显示。原始文件中的其余部分将是 uniq 的，它们将按原样进行......

* * *

我所做的是..

```
awk '{printf("%5d,%s\n", NR,$0)}' renewstatus_2012-04-19.txt > n_renewstatus_2012-04-19.txt 
cut -d',' -f2,3,6,15 n_renewstatus_2012-04-19.txt |sort | uniq -d -c 
```

但这需要再次回到原始文件以获取 dup 发生的行。..

让我不要混淆..这需要一个不同的观点..我的大脑正在坚持我的方法..需要一支雪茄..有什么想法......？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T11:38:25.500

sort 有一个选项 **-k**

> ```
>  -k, --key=POS1[,POS2]
>           start a key at POS1, end it at POS2 (origin 1) 
> ```

uniq 有一个选项 **-f**

> ```
>  -f, --skip-fields=N
>           avoid comparing the first N fields 
> ```

所以用字段编号排序和uniq（计算NUM并自己测试这个cmd，请）

```
awk -F"," '{print $0,$1,$2,...}' file.txt | sort -k NUM,NUM2 | uniq -f NUM3 -c 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:07:24.867

句法 ：

awk -F, '!(($1 SUBSEP $2 SUBSEP $5 SUBSEP $14) in uniq){uniq[$1,$2,$5,$14]=$0}{count[$1,$2,$5,$14]++}END{for (i in count){if(count[i] > 1)file="dupes";else file="uniq";print uniq[i],","count[i] > file}}' renewstatus_2012-04- 19.txt

计算：

sym@localhost:~$ cut -f16 -d',' uniq | 排序 | uniq -d -c 124275 1 -----> UNIQ (1) 条目的总和

sym@localhost:~$ cut -f16 -d',' dupes | 排序 | uniq -d -c 3860 2 850 3 71 4 7 5 3 6 sym@localhost:~$ cut -f16 -d',' dupes | 排序 | 唯一的 -u -c

## 1 7

10614 ------> 重复条目的总和与其计数相乘

sym@localhost:~$ wc -l renewstatus_2012-04-19.txt 134889 renewstatus_2012-04-19.txt ---> 原始文件的总行数，与 (124275+10614) = 134889 完全匹配

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T18:21:59.257

使用 awk 的关联数组是查找唯一/重复行的便捷方法：

```
awk '
    BEGIN {FS = OFS = ","}
    {
        key = $1 FS $2 FS $5 FS $14
        if (key in count) 
            count[key]++
        else {
            count[key] = 1
            line[key] = $0
        }
    }
    END {for (key in count) print count[key], line[key]}
' filename 
```

# java - Android: Execute javascript to Jsoup

> ID：10258388
> 
> 赞同：0
> 
> 时间：2012-04-21T11:10:01.163
> 
> 标签：java, javascript, android, jsoup

In my website I have a "SHOW MORE" Button which sends javascript to show more text. I'm trying to make a app that can fetch text from my site.

I'm currently using jsoup, but it returns `"blalblbla + "show more"` So how do I get that hidden text that isnt show'd onLoad?

Is there anyway to send javascript code to jsoup? or should I use another library.

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T11:35:46.730

You cannot execute javascript code with Jsoup. If you want to execute JS, use [HTMLUnit](http://htmlunit.sourceforge.net/)

But if your javascript code sending some HTTP request to get some data(i.e. show more results), you can imitate this request and get responce data.

# cocoa-touch - 如何获得 UITextView 的真实高度（内容 + 填充 + 所需的任何内容）

> ID：10258389
> 
> 赞同：3
> 
> 时间：2012-04-21T11:10:02.137
> 
> 标签：cocoa-touch, uitextview

在尝试论坛中的建议后，我无法获得 UITextView 的真实高度，例如：

[如何根据内容调整 UITextView 的大小？](https://stackoverflow.com/questions/50467/how-do-i-size-a-uitextview-to-its-content)

[调整 UITextView 的大小](https://stackoverflow.com/questions/728704/resizing-uitextview)

此解决方案使 UItextView 根据其内容调整大小，但我需要知道 UItextView 的实际高度，以便我可以定位其余视图而不会重叠。

我有一个 UITableView，每个单元格显示一个 UITextView。

我得到了 UITextView 的大小，调整它的大小并使用以下代码调整包含它的单元格的大小：

```
//self.descriptionTV is a UITextView
self.descripcionTV.text = self.detailItem.descripcion;

//I calculate the height (altura) to size the UITextView and to later size the cell
NSNumber *altura = [NSNumber numberWithFloat:
                            (self.descripcionTV.contentInset.top + self.descripcionTV.contentSize.height + self.descripcionTV.contentInset.bottom)];            

//Here I size the UITextView        
CGRect frame = self.descripcionTV.frame;
frame.size.height = altura.floatValue;
self.descripcionTV.frame = frame;

 //I use this in tableView:heightForRowAtIndexPath:
 [self.cellsToLoad addObject:[NSArray arrayWithObjects:self.cellDescripcion, altura, nil]]; 
```

* * *

```
-(float)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    //La altura de la celda la tenemos almacenada en el array cells
    float altura = [[[self.cellsToLoad objectAtIndex:indexPath.row] objectAtIndex:1] floatValue];
    return altura;
} 
```

不幸的是，这并没有完成工作。之后的单元格被一些像素重叠。我之前一直在使用 UILabel 而不是 UITextViews 没有问题。

我知道一个解决方案只是手动增加计算的高度，但我想知道是否有真正的方法来获取 UITextView 的大小。

# ajax - ExtJS 4 基于组合框选择呈现新网格

> ID：10258393
> 
> 赞同：0
> 
> 时间：2012-04-21T11:10:53.930
> 
> 标签：ajax, extjs

我有一个使用远程存储和远程分页的网格，因为我有太多记录。主网格的存储是：

```
Ext.define('ArD.store.RecordsListStore', {

    extend: 'Ext.data.Store',
    model: 'ArD.model.RecordsListModel',

    autoLoad: true,
    autoSync: true,
    remoteSort: true,
    remoteFilter: true,

    pageSize: 15,

    proxy: {
        type: 'ajax',
        actionMethods: 'POST',
        api: {
            read:  g_settings.baseUrl + 'index.php/recordslist/getAll',

            destroy: g_settings.baseUrl + 'index.php/recordslist/deleteRecord'
        },
        reader: {
            type: 'json',
            root: 'data',
            totalProperty: 'totalCount',
            successProperty: 'success'  
        },
        writer: {
            root: 'data',
            writeAllFields: true,
            encode: true
        }
    }

}); 
```

然后我填充我的网格，一切都很好。但问题是我有一个看起来像这样的组合框：

```
{
                            xtype: 'combo',
                            id: 'records_list_form_id',
                            emptyText: 'Choose Form',
                            editable: false,
                            store: 'FilterRecordsByForm',
                            displayField: 'title',
                            valueField: 'id',
                            lastQuery: '',
                            triggerAction: 'all',
                            queryMode: 'remote',
                            typeAhead: false,
                            width: 200,
                            listeners: {
                                select: this._filterRecords
                            }
                        } 
```

当我从组合框中选择一些东西时，就会出现以下功能：

```
_filterRecords: function()
    {
        var recStore =  Ext.getStore('RecordsListStore');
        var a = Ext.getCmp('records_list_form_id').getValue( );
        var rec = Ext.getStore('FilterRecordsByForm').getAt(a);
        console.log(recStore);
    }, 
```

主要只是尝试一些事情，但我可以从组合框中获取所选元素的 ID，这就是我所在的位置。

我需要的是使用我的 AJAX api（PHP/SQL 后端）进行新查询的 id，并使用与此 id 相关的信息填充网格。在我的情况下，我有 1:M 关系，所以当我传递 Id 时，我期望 M 记录我想在旧网格的位置呈现。

谢谢

勒龙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T11:52:51.027

使用`filter()`方法。提供您需要过滤的信息和存储对象将自动从服务器请求更新的信息（您已经配置了 remoteFilter）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T02:37:04.003

查看 Ext.Ajax() 对服务器端进行按需 ajax 调用以加载数据，然后使用 Store.loadData() 或类似的东西重新填充网格。

# mysql - MySQL触发器中的IF语句

> ID：10258394
> 
> 赞同：15
> 
> 时间：2012-04-21T11:11:06.207
> 
> 标签：mysql, triggers

我需要一些帮助来完成这个触发器。我试了一下，但我不知道出了什么问题。

这是代码：

```
delimiter $$

CREATE TRIGGER attendance_clock AFTER INSERT ON alldevicerecord
FOR EACH ROW
BEGIN
    DECLARE check INT;
    SET check= 1;
    IF (check % 2 == 0) THEN
      INSERT into designation(emp_id, clock_date, clock_in) VALUES (new.id, new.time, new.time);
      check  = check + 1;
    ELSE
      UPDATE designation SET clock_out = new.time WHERE emp_id = NEW.id;
      check = check + 1;
    END IF
END$$

delimiter ; 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-21T11:27:09.873

```
delimiter $$

CREATE TRIGGER attendance_clock AFTER INSERT ON alldevicerecord
FOR EACH ROW
BEGIN
  DECLARE `check` INT;
  SET `check` = 1;
  IF (`check` % 2 = 0) THEN
    INSERT INTO designation (emp_id, clock_date, clock_in) VALUES(new.id, new.time, new.time);
    SET `check`  = `check` + 1;
  ELSE
    UPDATE designation SET clock_out = new.time WHERE emp_id = NEW.id;
    SET `check`  = `check` + 1;
  END IF;
END$$

delimeter ; 
```

# android - 如何获取下载状态？

> ID：10258395
> 
> 赞同：7
> 
> 时间：2012-04-21T11:11:16.447
> 
> 标签：android, download, download-manager

我使用 DownloadManager 来获取下载状态，但它仍然无法正常工作，它永远不会跳转到条件`if(c.moveToFirst())`，我不知道为什么。有人可以帮我吗？

```
private final BroadcastReceiver myReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            String action = intent.getAction();

            if(Intent.ACTION_SCREEN_OFF.equals(action)) {

                DownloadManager downloadMgr = (DownloadManager)getSystemService(DOWNLOAD_SERVICE);
                DownloadManager.Query query = new DownloadManager.Query();
                query.setFilterByStatus(DownloadManager.STATUS_FAILED|DownloadManager.STATUS_PENDING|DownloadManager.STATUS_RUNNING|DownloadManager.STATUS_SUCCESSFUL);
                Cursor c = downloadMgr.query(query);
                if(c==null) {
                    //
                }
                else {
                    if(c.moveToFirst()) {
                        int columnIndex = c.getColumnIndex(DownloadManager.COLUMN_STATUS);
                        int status = c.getInt(columnIndex);
                        if(status == DownloadManager.STATUS_RUNNING){
                        //do something
                        }
                    }
                }
            }
        }
    }; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T02:31:26.720

这里有几个链接参考它。

*   [链接1](http://developer.android.com/reference/android/app/DownloadManager.html)
*   [链接2](http://android-coding.blogspot.in/2011/11/download-using-downloadmanager.html)

示例代码如下::

```
DownloadManager.Query query = null;
    Cursor c = null;
    DownloadManager downloadManager = null;
    downloadManager = (DownloadManager)getSystemService(Context.DOWNLOAD_SERVICE);
    query = new DownloadManager.Query();
     if(query!=null) {
                query.setFilterByStatus(DownloadManager.STATUS_FAILED|DownloadManager.STATUS_PAUSED|DownloadManager.STATUS_SUCCESSFUL|
                        DownloadManager.STATUS_RUNNING|DownloadManager.STATUS_PENDING);
            } else {
                return;
            }
    c = downloadManager.query(query);
    if(c.moveToFirst()) { 
    int status = c.getInt(c.getColumnIndex(DownloadManager.COLUMN_STATUS)); 
    switch(status) { 
    case DownloadManager.STATUS_PAUSED: 
    break; 
    case DownloadManager.STATUS_PENDING: 
    break; 
    case DownloadManager.STATUS_RUNNING: 
    break; 
    case DownloadManager.STATUS_SUCCESSFUL: 
    break; 
    case DownloadManager.STATUS_FAILED: 
    break; 
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-10T05:33:01.423

我就是这样做的

```
//broadcastReceiver
private val receiver = object : BroadcastReceiver() {
    override fun onReceive(context: Context, intent: Intent) {
        val id = intent.getLongExtra(DownloadManager.EXTRA_DOWNLOAD_ID, -1)

        //call notify off NotificationManager passing in the id & notification
        notificationManager.apply {

            notify(NOTIFICATION_ID, createNotification())
        }

        //DownloadManager.Query() is used to filter DownloadManager queries
        val query = DownloadManager.Query()

        query.setFilterById(id)

        val cursor = downloadManager.query(query)

        if (cursor.moveToFirst()){
val status = cursor.getInt(cursor.getColumnIndex(DownloadManager.COLUMN_STATUS))

            when (status) {
                DownloadManager.STATUS_SUCCESSFUL ->{

                }
                DownloadManager.STATUS_FAILED -> {

                }

            }
        }

    }
} 
```

# mongodb - MongoDB组加入两个集合

> ID：10258396
> 
> 赞同：1
> 
> 时间：2012-04-21T11:11:26.327
> 
> 标签：mongodb

我知道使用 map reduce （[参考](http://tebros.com/2011/07/using-mongodb-mapreduce-to-join-2-collections/)）是可能的，但我想知道是否可以使用组（特别是在`keyf`函数中）加入 2 个集合。

```
MYCOLL.collection.group(:keyf => "function(doc) { var var2Item=db.mycoll2.find({\"_id\":doc.my_sub_id}); var2=var2Item.join_var; return {'myreturn': doc.var1 + var2 }; }",     
:initial => { :r => 0 }, 
:reduce => "function(doc,prev) { prev.r += +1; }", 
:cond => {( ...my_conditions...)}) 
```

我也试过

```
var2=doc.my_sub_id.join_var 
```

而且似乎都不起作用。我正在使用 Ruby 驱动程序，但这并不重要，因为查询（实际上）是原始的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T19:00:42.880

使用“组”功能无法加入两个集合。group 函数用于聚合，cond 查询表达式用于选择文档，key 表达式或 keyf 函数提供分组，初始表达式和 reduce 函数处理组，finalize 函数允许您处理聚合结果。

请注意，聚合“组”功能适用于单个集合，即所有数据都来自单个集合。在 map-reduce 引用中，join 的等价物是将两个集合映射到公共键和一个公共输出集合的结果，同时在输出集合上运行 reduce 函数。

您可以通过使用 mongo shell 运行以下命令，在服务器上运行 group 函数的上下文中自己验证 find 函数是否未定义。

```
db.coll.remove();
db.coll.insert({a: 1, b: 2});
printjson(db.coll.group(
    {
        keyf: function(doc) { return {x: db.coll.find({a: true})}; },
        reduce: function(doc,prev) { prev.r += 1; },
        initial: { r: 0 }
    })); 
```

结果是：

```
[ { "x" : "DBQuery: test.coll -> undefined", "r" : 1 } ] 
```

# security - 通过 JSP Servlet 安全地上传文件

> ID：10258402
> 
> 赞同：0
> 
> 时间：2012-04-21T11:12:31.420
> 
> 标签：security, jsp, servlets, web

这个问题可能更广泛。但是请考虑一个jsp servlet应用程序的文件上传点。当一个jsp站点允许用户上传文件（图像、文本文件、媒体文件..等）时，有人可以上传一些易受攻击的文件，这些文件可能对应用程序或容器/服务器构成威胁。如果安装了防病毒应用程序，它可能会反对它（我认为是这样）。
我们是否可以采取任何措施来检查文件是否可以接受？（例如，检查文件及其文件扩展名以及它们是否在真实文件扩展名中。或者是否有任何可执行的隐藏文件..）。任何带有代码示例的链接都将受到高度赞赏。

# c# - 允许用户输入字母数字字符和仅一个非字母数字字符的正则表达式

> ID：10258405
> 
> 赞同：0
> 
> 时间：2012-04-21T11:13:37.770
> 
> 标签：c#, asp.net, regex

我正在使用`Asp.Net/C#`。我正在使用`RegularExpressionValidator`控件来验证我的密码。我的密码`textbox`字段可以允许字母数字字符和一个非字母数字字符。任何人都可以如何允许用户输入这样的模式。任何帮助都感激不尽。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T11:16:22.697

类似的东西？（如有必要，添加锚点 - 不确定验证器如何应用正则表达式）

```
\w*(\W\w*)? 
```

# python - 我如何改进这个等式，使负票多于正票的项目返回更有用的威尔逊分数

> ID：10258409
> 
> 赞同：2
> 
> 时间：2012-04-21T11:14:19.017
> 
> 标签：python, math, statistics

使用此处描述的威尔逊分数方程[http://www.evanmiller.org/how-not-to-sort-by-average-rating.html](http://www.evanmiller.org/how-not-to-sort-by-average-rating.html)，我正在对我的评分项目进行排序。但是，如果一个项目有 1 个反对票（和 0 个赞成票），它返回与一个有 1000 个反对票（和 0 个赞成票）的项目相同的分数（即 0 分）。

**我想要么允许负威尔逊分数，以克服这个缺点，要么可能有人可能会提出另一种解决方案。**

无论哪种方式，**我都不确定如何改变这个方程/函数**：

```
def ci_lower_bound(pos, n, confidence):
    if n==0: return 0

    z = 1.96
    phat = 1.0*pos/n

    score = (phat + z*z/(2*n) - z*math.sqrt((phat*(1-phat)+z*z/(4*n))/n))/(1+z*z/n)
    return score 
```

其中`pos`是正面评分数，`n`是评分总数，`confidence`是指统计置信度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T12:26:05.427

好吧，您总是可以按 tuple 排序`(wilsonscore, -negative_votes)`，因为 python 对元组进行排序的方式。Python 从不考虑negative_votes，除非 wilsonscore 相同。看：

```
>>> sorted([(0,-4000),(1,-4000),(0,-1),(1,-1)])
[(0, -4000), (0, -1), (1, -4000), (1, -1)] 
```

pro：问题的简单解决方案，无需更改函数，几乎不需要更改代码（因为元组在排序时表现“自然”）。

缺点：需要跟踪反对票。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T14:09:34.900

从逻辑上讲，您的评分系统必须处理以下情况：

```
+----------+----------+------------+-------------- -+
| 积极 | 负数 | 有投票吗？| 威尔逊分数？|
+----------+----------+------------+-------------- -+
| N | N | N | Y, = 0 |
| 是 | 是 | 是 | 是 |
| 是 | N | 是 | 是 |
| N | 是 | 是 | N |
+----------+----------+------------+-------------- -+

```

正如您所指出的，缺少的项目是当您有 0 个赞成票和超过 0 个反对票时。

由于您当时既有正分又有负分，为什么不按照自己的想法创建一个负的威尔逊分数来处理这个问题，记住负数的平方根是复数。

为了绕过复杂性，假设反对票是积极的。然后，您计算一个负面评分项目的“喜欢”程度，并将其乘以 -1 以将其转化为不喜欢的程度。

```
import math

def ci_lower_bound(pos, n, neg=0):

    if n == 0:
        return 0

    # Cannot calculate the square-root of a negative number
    if pos == 0:
        votes, use_neg = neg, True
    else:
        votes, use_neg = pos, False

    # Confidence
    z = 1.96

    phat = 1.0 * votes / n

    # Calculate how confident we are that this is bad or good.
    score = (phat + z*z/(2*n) - z * math.sqrt((phat*(1-phat)+z*z/(4*n))/n))/(1+z*z/n)

    # This relationship is defined above.
    # Multiply by -1 to return a negative confidence.
    if use_neg:
        return -1 * score

    return score 
```

# php - 自动更新 $_SESSION[balance]？

> ID：10258411
> 
> 赞同：0
> 
> 时间：2012-04-21T11:14:31.903
> 
> 标签：php, mysql, ajax, jquery

`$_SESSION[balance]`每次登录时，我都会从 MySQL 数据库中获取值。如何在不每 5 分钟重新加载页面的情况下更新客户端浏览器中的值？我认为可以使用 AJAX 来完成吗？

抱歉，如果这太模糊了，我完全不知道从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T11:23:54.817

你是对的，你需要AJAX。最简单的方法是使用`$.get();`jQuery[库](http://docs.jquery.com/Downloading_jQuery#Download_jQuery)

**js/jQuery 脚本**

```
window.setInterval(function() {

    $.get('script.php', function(balance) {
        $('#balance').html(balance); // set the value to the element with the ID balance
    });

}, 60000); // execute every minute 
```

在`script.php`您只需查询数据库中的余额并回显它

# c# - 在 Java 中替代 c# 用户定义的转换

> ID：10258417
> 
> 赞同：0
> 
> 时间：2012-04-21T11:14:49.967
> 
> 标签：c#, java

是否有类似Java 中[的用户定义转换](http://msdn.microsoft.com/en-us/library/aa288476%28v=vs.71%29.aspx)或关于如何在不添加数十种`.toXXXX`方法的情况下在 Java 中获得相同效果的任何建议

我有一段时间没有使用 c#，所以我不记得它的正确名称，但我还记得在 c# 中我能够在不使用符号的情况下将第一个参数传递给函数

```
Foo(MyClass instance) 
```

反而

```
instance.Foo() 
```

如果我没记错的话，我必须在 MyClass 之前使用这个关键字，`Foo(this MyClass instance)`但正如我所说，我有一段时间没有使用 c#，所以我不记得了

谁能告诉我Java中这两种“方法”的替代方法是什么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T11:16:59.767

不，在 Java 中没有像用户定义的转换那样的东西。就我个人而言，无论如何我都不喜欢在 C# 中使用*隐式*用户定义的转换，甚至很少写显式的转换。如果缺少它们导致您添加了数*十种*`toXXX`方法，那么您可能应该重新考虑在 C# 中使用转换的范围。

您正在谈论的第二个功能是Java 中也不存在的[*扩展方法。*](http://msdn.microsoft.com/en-us/library/bb383977.aspx)您只需要照常调用静态方法。

# objective-c - 解析 KOI8-r 编码目标 c

> ID：10258420
> 
> 赞同：0
> 
> 时间：2012-04-21T11:15:40.083
> 
> 标签：objective-c, url, encoding, url-parsing

我需要解析实际上是 KOI8-R 编码的 url，并且正如我所浏览的那样，objective c 中没有允许这样做的编码。

它曾经是这样的 NSString* fileText = [NSString stringWithContentsOfURL: [NSURL URLWithString:@"ThePageISurf.com"] encoding: **NSCyrrilicKOI8-Rencoding** error:nil];

也许有一个库/方法可以将字符串转换为 KOI8-R？或者甚至直接URL？一定有办法的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T11:45:08.770

试试`CFStringConvertEncodingToNSStringEncoding(kCFStringEncodingKOI8_R)`。

# c++ - 函子 + 成员指针创建信号对象

> ID：10258421
> 
> 赞同：1
> 
> 时间：2012-04-21T11:15:59.710
> 
> 标签：c++, functor, member-pointers

我有这个代码：

```
// signal supporter parent
class signalable {};

template <class typeT = signalable>
typedef void (typeT::*trig)(std::string);

template <class typeT = signalable>
class trigger
{
    private:
        typeT* instance;
        typeT::trig fun;

    public:
        trigger(typeT* inst, typeT::trig function)
            : instance(inst), fun(function)
        {}
        void operator ()(std::string param)
        {
            (instance->*fun)(param);
        }
}; 
```

而且我得到很多我打赌专业人士都知道的编译错误。我只是对这种情况有点困惑。

我想要做的很清楚：传递指向对象的指针，以及指向其中一个成员函数的指针，以创建一个仿函数并将其传递到我的程序中。

感谢您的帮助和“更正”。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T11:24:36.907

你想做这样的事情吗？

```
#include <string>
#include <iostream>

// signal supporter parent
class signalable 
{
public:
    void foo(std::string s) { std::cout << "hello: " << s << std::endl; }
};

template <class typeT = signalable>
class trigger
{

    typedef void (typeT::*trig)(std::string);

    private:
        typeT* instance;
        trig fun;

    public:
        trigger(typeT* inst, trig function)
            : instance(inst), fun(function)
        {}
        void operator ()(std::string param)
        {
            (instance->*fun)(param);
        }
};

int main()
{
    signalable s;
    trigger<> t(&s, &signalable::foo);
    t("world");
} 
```

至于您的代码中一些更具体的错误，它们中的大多数似乎与您的 typedef 有关。C++11 允许“模板类型定义”，但它们看起来不像那样。查看此线程以获取模板类型定义的示例：

[C++ 模板类型定义](https://stackoverflow.com/questions/2795023/c-template-typedef)

# algorithm - 如何确定哪个玩家会获胜

> ID：10258424
> 
> 赞同：1
> 
> 时间：2012-04-21T11:16:12.150
> 
> 标签：algorithm

两个玩家玩下面的游戏。在游戏开始时，他们从 n (1<=n<=100000) 堆石头开始。在游戏的每一步，玩家选择一堆并从该堆中取出至少一个石头，然后将零个或多个石头从该堆移到任何其他仍然有石头的堆中。如果玩家没有更多可能的动作，他就输了。给定最初的牌堆，确定谁赢：第一个玩家或第二个玩家，如果两者都玩得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T21:54:41.893

这是[Nim](http://en.wikipedia.org/wiki/Nim)的变体。了解 Nim 的解决方案应该可以帮助您更好地理解这个游戏。

对于 Nim 来说，游戏从`n`一堆石头开始。反过来，每个玩家选择一堆并从堆中取出至少一个，可能更多的石头。当没有更多的石头剩余时，游戏结束。

上面链接的维基百科文章很好地解释了获胜策略，其中涉及计算堆大小的二进制数字总和。仔细阅读，您应该能够解决此变体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T11:37:00.350

首先从分析已知结果的位置开始 - 这将是所有石头都在一个堆中的情况。然后你没有其他至少有一块石头的堆，所以你不能执行移动的第二部分（这是假设即使你移动 0 块石头仍然必须有另一个非空的堆）所以这是失去位置。

现在开始分析您可以从哪些位置进入亏损位置。这些将是您的第一轮获胜位置。

第一个观察：作为一个移动只影响两堆，很明显，只有当你正好有两堆时，你才能到达失败的位置。如果你只有两堆，你总是可以通过从其中一个中移除所有的石头来达到亏损的位置，因此这是一个获胜的位置。

因此，现在您必须考虑哪些位置会迫使您采取行动，将您带到找到的获胜位置。这些将再次失去位置（提示：我相信这只是您有 3 堆每堆 1 块石头的情况）。

以这种方式继续下去，最后你会想出最终的解决方案。我不想为你解决整个问题，因为这对你的技能没有好处。最好自己想出解决方案。

希望这可以帮助。

注意：如果您被允许对单个非空堆进行操作，即如果移动零棋子时您不需要另一堆非空堆，那么初始丢失位置是当您根本没有剩余棋子并且初始获胜位置是当您只有一堆带有任意数量的石头时。

# javascript - 如何从 servlet 调用 JavaScript 的函数

> ID：10258425
> 
> 赞同：5
> 
> 时间：2012-04-21T11:16:13.960
> 
> 标签：javascript, servlets

我是网络开发的新手。我有一个外部 JavaScript 文件，它具有显示错误详细信息提示的功能。我需要将错误消息传递给函数。我已经在 servlet 中编写了控制器。

如何从我的 servlet 调用该 JavaScript 文件的函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T11:18:39.843

不能从 servlet 调用 java 脚本函数。相反，您可以使用打印 javascript 代码

`response.getOutputStream().println("[javascript code]");`

进入浏览器，然后javascript函数将在浏览器中执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T11:30:26.403

您可以使用以下方法实现类似的行为。在发送响应本身时，您可以提供 JS 事件。

```
PrintWriter out = response.getWriter();
out.println("<tr><td><input type='button' name='Button' value='Search' onclick=\"searchRecord('"+ argument + "');\"></td></tr>"); 
```

所以当你点击搜索按钮时，会调用JS的搜索记录方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T12:52:25.477

您需要了解 servlet 运行在 Web 服务器中，而不是 Web 浏览器中，并且 JS 运行在 Web 浏览器中，而不是 Web 服务器中。通常的做法是让 servlet 将请求转发到[JSP](https://stackoverflow.com/tags/jsp/info)文件，该文件依次生成 HTML/CSS/JS 代码，这些代码由网络服务器发送到网络浏览器。最终，所有 HTML/CSS/JS 代码都在网络浏览器中执行。

要实现您的（有点奇怪，tbh）功能要求，只需让转发的 JSP 有条件地呈现特定的脚本调用。[以JSTL](https://stackoverflow.com/tags/jstl/info) 为例`<c:if>`，假设您已收集并设置错误为`${errors}`JSON 数组格式：

```
<c:if test="${not empty errors}">
    <script>displayErrors(errors);</script>
</c:if> 
```

或者让JSP把它赋值为JS变量，让JS进一步处理。就像是：

```
<script>
    var errors = ${errors};

    if (errors.length) {
        displayErrors(errors);
    }
</script> 
```

至于奇怪的需求，如果你被迫使用JS来显示消息，那只能意味着你正在使用an`alert()`或其他东西。这是非常 90 年代的，对用户不友好。只需让 JSP 相应地生成 HTML，将它们放在输入字段旁边或表单顶部的列表中。[我们的 servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)有一个 hello world 示例，它就是这样做的。

# jquery - 显示取决于单选按钮的隐藏字段

> ID：10258427
> 
> 赞同：2
> 
> 时间：2012-04-21T11:16:28.690
> 
> 标签：jquery

我正在尝试在单击单选按钮时显示隐藏的文本字段。

我是 jQuery 新手，一直在查看不同的代码示例和教程，但是它们在 jQuery 的不同版本中都略有不同，并且对于我的哪些代码是新的，哪些是旧的感到困惑。一些人建议改变，而另一些人则点击（这对我来说更有意义，但我可能完全错了）。

这是我的代码的一部分：

一、形式：

```
Are you eighteen or above?<br/>
<input type="radio" id="age" name="age" value="yes"/>Yes<br/>
<input type="radio" id="age" name="age" value="no"/>No<br/><br/>

<!-- if no is selected the below text form shall appear -->     
<div id="agetext">
    If no, please tell us your date of birth:<br/>
    <textarea id="age" name="agetext" rows="5" cols="40"></textarea><br/><br/>
</div> 
```

其次，脚本（在 head 标签中）：

```
$(document).ready(function() 
{
    $("#agetext").hide();
    $("#agetextgo").click(function() 
    {
        if ( $('input[name="age"]:checked').val() == "no")
        {
            $("#agetext").show();
        }
        else ( $('input[name="age"]:checked').click() == "yes")
            $("#agetext").hide();
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T11:35:03.967

做这个：-

```
$("#agetext").hide();
$("input[name=age]").click(function() 
    {
        if ( $("#age1").attr('checked'))
            $("#agetext").hide();
        else
            $("#agetext").show();
    }); 
```

## [现场演示](http://jsfiddle.net/XWN7U/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T11:36:46.553

请看这里：**演示** [http://jsfiddle.net/Yu7fN/6/](http://jsfiddle.net/Yu7fN/6/)

您有多个语法问题，我已经解决了它们，但仍然可以改进。干杯！（希望这可以帮助）

**jQuery代码**

```
$(function() {

    $("#agetext").hide();

    $(".age").click(function() {
        alert($('input[name="age"]:checked').val());
        if ($('input[name="age"]:checked').val() == "no")
            $("#agetext").show();
        else if ($('input[name="age"]:checked').val() == "yes") 
            $("#agetext").hide();

    });
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T11:40:03.593

您的代码有一些错误：

*   多个具有相同 ID 的 HTML 元素（输入单选），这是无效的，
*   您正在使用`"#agetextgo`页面中不存在的元素
*   `$('input[name="age"]:checked').click() == "yes"`不正确，a`click`不能等于字符串值

我在 jsfiddle 上做了一个工作演示，看看[http://jsfiddle.net/pomeh/5DuQB/1/](http://jsfiddle.net/pomeh/5DuQB/1/)

演示中使用的代码是

```
<form>
Are you eighteen or above?<br/>
    <input type="radio" name="age" value="yes"/>Yes<br/>
    <input type="radio" name="age" value="no"/>No<br/><br/>
    <div id="agetext">
        If no, please tell us your date of birth:<br/>
        <textarea id="age" name="agetext" rows="5" cols="40"></textarea><br/><br/>
     </div>
</form> 
```

和

```
var $div = jQuery("#agetext");

// hidden by default
$div.hide();

// when a click occur on an input[type=radio] element
jQuery("form").on("click", "input[type=radio]", function() {
    // does the element clicked has the value "yes" ?
    if ($(this).val()==="yes") {
        $div.hide();
    }
    else {
        $div.show();
    }
});​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T11:23:22.090

**只需更改两个单选按钮的 id 两个具有相同 id 的单选按钮无效....**

给你的html

```
<input type="radio" id="age1" name="age" value="yes"/>Yes<br/>
<input type="radio" id="age2" name="age" value="no"/>No<br/><br/> 
```

这是这个的jquery

```
$("#age1").click(function() 
    {
        if ( $("#age1").attr('checked'))
            $("#agetext").show();
    });

   $("#age2").click(function() 
    {
        if ( $("#age2").attr('checked'))
            $("#agetext").hide();
    }); 
```

# xml - 如何将 Disqus XML 导出的评论导入 Wordpress WXR

> ID：10258433
> 
> 赞同：6
> 
> 时间：2012-04-21T11:17:01.843
> 
> 标签：xml, wordpress, disqus

我目前将我的评论系统移回默认的 Wordpress 评论。我以前使用过 Disqus，但我决定搬回去。Disqus 提供了一个工具，您可以导出所有评论，但不幸的是，它们会为您提供 XML 格式。最糟糕的是 WordPress 只读取 WXR 文件格式。

我对此的解决方案是我应该手动将 Disqus 给我的内容（我的意思是我从 disqus 导出的 XML 文件）重写为 WordPress WXR 文件格式。我的问题是我不知道所需的 WordPress 评论的基本结构是什么。

[您可以在此处查看 Disqus 导出的 XML 文件](http://bendaggers.com/Disqus-Comments-Export-File.txt)！我唯一关心的是我只需要一个模板或格式，我可以按照它来编写正确的 WXR 文件注释，以便我可以使用导入工具将它直接导入到我的 WordPress 中。顺便说一句，当我尝试将 XML 文件上传到 WordPress 时，我收到了这个错误：

> 无效文件。请上传有效的 Disqus 导出文件。”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T22:31:16.963

Disqus WordPress 插件包含一个同步功能，可将您的评论从 Disqus 同步回您的 WordPress 安装。它可以位于插件内的“高级选项”选项卡上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T13:48:23.683

与其尝试生成 WXR 文件格式，不如解析 Disqus XML 文件并将您从那里提取的评论直接插入到 wordpress 数据库中的 wp_comments 表中，而不是尝试生成 WXR 文件格式。至少通过这种方式，您可以更好地控制流程。

上述插件可能无法正常工作，因为 Disqus 会不时更改导出格式（奇怪的是，您甚至无法使用导出的文件将您的评论再次导入回 Disqus）。

[对于我的服务](http://migratetowp.com/)，我不得不重写两次解析器以使其适应 Disqus XML 的小而烦人的变化

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-30T09:45:47.917

我在将 disqus 评论导入我的新网站时遇到了同样的问题。最近我想出了一些方法来进行解析并将评论插入到 wordpress 数据库中，所有都是用 PHP 编写的，请参考这个[这个链接](http://theatmojo.com/?p=158)，欢迎任何反馈

这是代码

```
//    start to count the timer

$start        = microtime( true );

$max_duration = ”;

//    get content of file and parse the xml

$xml = simplexml_load_file( ‘yourmxlfilesource.xml’ );

//    initiate database connection

$database_info[ 'hostname' ] = “”; //    database hostname

$database_info[ 'database' ] = “”; //    database name

$database_info[ 'username' ] = “”; //    database username

$database_info[ 'password' ] = “”; //    database password

$database_connect = mysql_pconnect( $database_info[ 'hostname' ], $database_info[ 'username' ], $database_info[ 'password' ] ) or trigger_error( mysql_error(), E_USER_ERROR );

mysql_select_db( $database_info[ 'database' ], $database_connect );

$i = 0;

//    get all the comment from xml file

$comments = get_post();

//    get all the post title array from xml file

$post_title = get_post_title_array();

$comment_result = array( );

$temp           = array( );

//    create loop to convert from xml comment into wordpress-format comment

foreach ( $comments as $comment ) {

$start_sub = microtime( true );
$comment_result[ 'comment_post_ID' ]      = get_post_id( $comment->thread->attributes( ‘dsq’, TRUE )->id );

$comment_result[ 'comment_author' ]       = $comment->author->name;

$comment_result[ 'comment_author_email' ] = $comment->author->email;

$comment_result[ 'comment_author_url' ]   = ”;

$comment_result[ 'comment_author_IP' ]    = $comment->ipAddress;

$comment_result[ 'comment_date' ]         = sanitize_date( $comment->createdAt );

$comment_result[ 'comment_date_gmt' ]     = sanitize_date( $comment->createdAt );

$comment_result[ 'comment_content' ]      = strip_tags( mysql_real_escape_string( $comment->message ), ‘&lt;br><img><a>’ );

$comment_result[ 'comment_karma' ]        = 1;
//    check if comment is spam, deleted or approved
if ( $comment->isSpam == ‘true’ ) {

$comment_approved = ‘spam’;

} else if ( $comment->isDeleted == ‘true’ ) {

$comment_approved = ‘trash’;

} else {

$comment_approved = 1;

}
$comment_result[ 'comment_approved' ] = $comment_approved;

$comment_result[ 'comment_agent' ]    = ”;

$comment_result[ 'comment_type' ]     = ”;

$comment_result[ 'comment_parent' ]   = ”;

$comment_result[ 'user_id' ]          = ”;
//    store the wordpress format comment into temporary variable
$temp[ $i ] = $comment_result;
//    insert the wordpress format comment into wp database

insert_comment( $temp[ $i ] );

$duration[ $i ] = microtime( true ) – $start_sub;
$i++;

}

echo ‘max duration : ‘ . max( $duration ) . ‘&lt;br/>’;

echo ‘min duration : ‘ . min( $duration ) . ‘&lt;br/>’;

echo ‘average duration : ‘ . ( array_sum( $duration ) / count( $duration ) ) . ‘&lt;br/>’;

//    show the total duration of process

echo ‘total duration : ‘ . ( microtime( true ) – $start );

/////////    define function here

function insert_comment( $comment )

{

global $database_connect;
//    function to insert the comment into wp database
$field  = ”;

$values = ”;
foreach ( $comment as $key => $value ) {

//    create sql query to insert the comment

$field .= ‘`’ . $key . ‘`’ . ‘,’;

$values .= ‘”‘ . $value . ‘”‘ . ‘,’;

}
$field  = rtrim( $field, ‘,’ );

$values = rtrim( $values, ‘,’ );
//    insert the comment into the database
$query = “INSERT INTO `wp_comments` ($field) VALUES ($values)”;

$query_result = mysql_query( $query, $database_connect ) or die( mysql_error() );

}

function sanitize_date( $date )

{

//  remove the additional string from the date
$date = str_replace( ‘T’, ‘ ‘, $date );

$date = str_replace( ‘Z’, ‘ ‘, $date );
return $date;

}

function get_post_id( $thread )

{

global $post_title, $database_connect;

//  get wordpress post id from disqus thread id
$thread_title = find_thread( ‘id’, $thread, ‘title’ ); //  get the title of the post
$thread_title = explode( ‘/’, $thread_title );

$thread_title = $thread_title[ count( $thread_title ) - 1 ];

$thread_title = str_replace( ‘-’, ‘ ‘, $thread_title );
$thread_title = str_replace( ‘.html’, ”, $thread_title );
$post_title_closest = get_closest_post_title( $thread_title, $post_title );
//  get the wordpress post id from the title of the post
$query = “SELECT `ID` FROM `wp_posts` WHERE `post_title` = ‘$post_title_closest’ LIMIT 1″;

$query_result = mysql_query( $query, $database_connect ) or die( mysql_error() );
$query_result_row = mysql_fetch_assoc( $query_result );

return $query_result_row[ 'ID' ];
}

function get_closest_post_title( $input, $words )

{

// no shortest distance found, yet

$shortest = -1;
// loop through words to find the closest

foreach ( $words as $word ) {
// calculate the distance between the input word,

// and the current word

$lev = levenshtein( $input, $word );
// check for an exact match

if ( $lev == 0 ) {
// closest word is this one (exact match)

$closest  = $word;

$shortest = 0;
// break out of the loop; we’ve found an exact match
break;

}
// if this distance is less than the next found shortest

// distance, OR if a next shortest word has not yet been found

if ( $lev <= $shortest || $shortest < 0 ) {

// set the closest match, and shortest distance

$closest  = $word;

$shortest = $lev;

}
}

return $closest;

}

function get_post_title_array( )

{

//  get wordpress post id from disqus thread id
global $database_connect;
//  get the wordpress post id from the title of the post
$query = “SELECT DISTINCT(`post_title`) FROM `wp_posts`”;

$query_result = mysql_query( $query, $database_connect ) or die( mysql_error() );
$query_result_row = mysql_fetch_assoc( $query_result );
$i = 0;
do {

$result[ $i ] = $query_result_row[ 'post_title' ];

$i++;

} while ( $query_result_row = mysql_fetch_assoc( $query_result ) );
return $result;
}

function find_thread( $category, $source_value, $return_category )

{

//    function to get thread information
global $xml;
foreach ( $xml->children() as $row ) {
if ( (int) $row->attributes( ‘dsq’, TRUE )->id == (int) $source_value ) {

return $row->$return_category;

}

}
}

function get_post( )

{

//    function to get all post from xml data
global $xml;
$i = 0;
foreach ( $xml->children() as $key => $value ) {
if ( $key == ‘post’ ) {
$result[ $i ] = $value;

$i++;

}

}
return $result;

} 
```

*   查看更多信息：http: [//theatmojo.com/ide/wordpress-import-comment-disqus-using-php/](http://theatmojo.com/ide/wordpress-import-comment-disqus-using-php/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T21:09:50.797

你看过这个插件吗？
[http://wordpress.org/extend/plugins/disqus-comments-importer/](http://wordpress.org/extend/plugins/disqus-comments-importer/)

它看起来很有限，但也许是一个很好的起点。

# mysql - MySQL：查看或创建新表？

> ID：10258442
> 
> 赞同：0
> 
> 时间：2012-04-21T11:19:46.567
> 
> 标签：mysql, views, create-table

我正在做一个 java 项目，其中我必须使用具有大量数据（地理名称）的 MySQL 数据库。因为我需要验证一个正确的名称是否是一个地理实体，所以我只需要一个表的 3 个列。所以我想知道是使用这个表的视图还是只创建另一个只有这三个属性的表更好。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T11:25:07.830

为什么不只选择这样的 3 列：

```
select col1, col2, col3 from your_table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T12:13:06.243

无需在案例中创建视图。如果你这样做，这个数据库可能会有更多的开销。

顺便说一句，创建正确的索引会影响很多性能。

# javascript - 原型 JavaScript 在所有浏览器中本地工作，但不在服务器上的 IE9 中

> ID：10258443
> 
> 赞同：1
> 
> 时间：2012-04-21T11:19:55.600
> 
> 标签：javascript, internet-explorer, prototypejs

我在这里使用原型版本 1.6.0.2：

[http://sgm189.csesalford.com/invoices](http://sgm189.csesalford.com/invoices)

请使用用户名“billy”登录密码“billy”

转到发票 > 新发票。然后尝试在“销售税”、“数量”和“价格”字段中填写数字数据。

在除 IE9 之外的所有浏览器中，字段动态刷新并且一切正常。另一个奇怪的症状是代码在 IE9 本地运行。UTF-8 编码，无 BOM。

我可以对我的代码进行任何修改吗？此处提供的代码：

[http://jsfiddle.net/Fqe5d/](http://jsfiddle.net/Fqe5d/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T13:33:29.973

更新你的原型！那应该可以解决它:)

# css - 如何使 google +1 按钮悬停消息透明

> ID：10258445
> 
> 赞同：2
> 
> 时间：2012-04-21T11:20:17.330
> 
> 标签：css, google-plus

如何编辑 google +1 按钮这些部分的样式？*我很难用英语解释细节。所以我做了这张照片* ![在此处输入图像描述](../Images/5ad6f6b2f1e76e29e4e3d0d7df1d7475.png)

我知道它位于 iframe 内，有人说我们无法编辑来自其他域的 iframe 内的样式。但显然，我已经成功地将我的 facebook like 按钮设置为看起来不错（在边框上是透明的）。而且，我看到其他一些网站有一个漂亮的 google +1 按钮（没有那些阻挡纯白色背景的网站）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T11:29:17.197

**编辑：可能的解决方案：**

查看下面页面上的标记和 css，看起来您的 css 中的某处您必须将气泡包含在的 设置`background-color`为或。尝试类似的东西： -`div``white``#fff`

```
.pls-container {background-color:transparent} 
```

您是否有指向此页面的链接，或者有一个具有相同翻转的 +1 按钮的网站，以便人们可以进行实验？那么给出一个明确的解决方案会更容易......

**编辑：**刚刚在[这里](http://kikolani.com/you-guide-to-the-google-1-button.html)查看了 +1 按钮（在帖子的顶部和右侧的侧边栏中），它们看起来都是透明的边框 - 所以你的页面一定有一些不同的地方。您可以尝试以该页面为例，看看哪里出了问题，但是如果没有页面的代码，就很难直接为您的问题提供解决方案。

# matlab - 矩阵创建 Octave / Matlab，无环解请求

> ID：10258448
> 
> 赞同：2
> 
> 时间：2012-04-21T11:20:30.343
> 
> 标签：matlab, matrix, octave, vectorization

我想创建一个矩阵

```
A = [0 0 0 0 1;
     0 0 0 1 1;
     0 0 0 1 1;
     0 0 0 1 1;
     0 0 1 1 1;
     0 1 1 1 1] 
```

基于一个向量，该向量指示每行上应该有多少个“0”在“1”之前：

```
B = [4 3 3 3 2 1] 
```

有没有一种无循环的方式来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T12:01:10.010

你没有在你的问题中提到应该如何定义数组的水平大小（个数）。

对于预定义的宽度，您可以使用以下代码：

```
width = 5;

A = cell2mat(arrayfun(@(x) [ zeros(1,x), ones(1,width-x) ], B, 'UniformOutput', false)'); 
```

如果您希望 A 具有最小宽度，但每行仍然至少有一个 1：

```
A = cell2mat(arrayfun(@(x) [ zeros(1,x), ones(1,max(B)+1-x) ], B, 'UniformOutput', false)'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T17:41:44.767

在没有循环的情况下实现这一点的更短的“老派”方法如下：

```
A = repmat(B',1,max(B)+1)<repmat([1:max(B)+1],size(B,2),1) 
```

如果你想拥有最少数量的

```
min_ones=1; %or whatever
A = repmat(B',1,max(B)+min_ones)<repmat([1:max(B)+min_ones],size(B,2),1) 
```

我不知道这与 @nrz 的方法相比如何快速比较（我现在只有 Octave），但对我来说它更直观，因为它只是比较`max(B) + min_ones`B 的 * 列平铺：

```
4  4  4  4  4
3  3  3  3  3
3  3  3  3  3
3  3  3  3  3
2  2  2  2  2
1  1  1  1  1 
```

行平铺 [1 : max(B) + min_ones]

```
1  2  3  4  5
1  2  3  4  5
1  2  3  4  5
1  2  3  4  5
1  2  3  4  5
1  2  3  4  5 
```

生成：

```
A =

  0  0  0  0  1
  0  0  0  1  1
  0  0  0  1  1
  0  0  0  1  1
  0  0  1  1  1
  0  1  1  1  1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-16T23:02:26.473

这只需要一行，并且似乎比以前基于`repmat`or的解决方案更快`arrayfun`：

```
%// Example data
ncols = 5;
B = [4 3 3 3 2 1];

%// Generate A
A = bsxfun(@gt, 1:ncols, B(:)); 
```

# object - 对象压缩后的 MD5 哈希不匹配

> ID：10258449
> 
> 赞同：3
> 
> 时间：2012-04-21T11:20:31.543
> 
> 标签：object, md5, compression, mismatch

我正在使用以下代码段压缩可序列化对象：

```
 private byte[] compressObject(Object obj) throws IOException {
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    GZIPOutputStream gzipOut = new GZIPOutputStream(baos);
    ObjectOutputStream objectOut = new ObjectOutputStream(gzipOut);
    objectOut.writeObject(obj);     
    objectOut.close();
    byte[] bytes = baos.toByteArray();

    return bytes;       
} 
```

并使用以下代码段解压缩相同的对象：

```
private Object decompressObject(byte[] bytes) throws IOException,ClassNotFoundException {
    ByteArrayInputStream bais = new ByteArrayInputStream(bytes);
    GZIPInputStream gzipIn = new GZIPInputStream(bais);
    ObjectInputStream objectIn = new ObjectInputStream(gzipIn);
    Object obj = objectIn.readObject();     
    objectIn.close();

    return obj;
} 
```

在压缩对象之前和解压缩对象之后，我使用以下代码段计算 MD5 哈希：

```
public String getMD5Hash(Object obj) throws IOException, NoSuchAlgorithmException {

    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    ObjectOutput out = new ObjectOutputStream(bos);   
    out.writeObject(obj);
    byte[] data = bos.toByteArray();                
    MessageDigest m = MessageDigest.getInstance("MD5");                     
    m.update(data,0,data.length);
    BigInteger i = new BigInteger(1,m.digest());
    return String.format("%1$032X", i);     
} 
```

但是压缩前和压缩后计算的MD5 Hash不匹配。请建议如何在解压后获取对象。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T17:36:48.847

您可能需要使用 GZIPOutputStream 上的完成方法来压缩数据。

# php - 使用 wp_query 循环的上一页/下一页链接

> ID：10258451
> 
> 赞同：2
> 
> 时间：2012-04-21T11:20:40.327
> 
> 标签：php, wordpress, loops

我正在一个 wordpress 网站上工作，该网站有一个名为的自定义帖子类型，比如说“plops”。我只想在网站中使用这种自定义帖子类型。因此，在 index.php 中，我使用 WP_Query 遍历那些，这里是代码：

```
<?php 
$args = array( 'post_type' => 'plops', 'posts_per_page' => 30, 'orderby' => 'desc');
$loop = new WP_Query( $args );
while ( $loop->have_posts() ) : $loop->the_post();
$meta = get_post_meta($post->ID);
?> 
// my template for the post...

<?php endwhile; ?> 
```

问题是我想实现一个无限滚动到这个页面，为此我需要有分页链接。我试图用这个`next_posts_link()`功能实现那些，但不能让它工作！它只是不会显示任何链接，我尝试了很多东西，似乎没有任何东西可以让它工作......

如果我去 mysite.com/worpress/page/2，我的帖子会显示，但我在 firebug 中得到 404 ......很奇怪......

有任何想法吗 ？非常感谢帮助！非常感谢提前！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T02:10:58.050

下面的修复可能会对您有所帮助 - 这对我有用。它结合了 Chris Coyier 的解决方案和评论中的一些帮助。 [CSS技巧文章](http://css-tricks.com/snippets/wordpress/paginate-custom-post-types/)

```
//Fix homepage pagination
if ( get_query_var('paged') ) {
    $paged = get_query_var('paged');
} else if ( get_query_var('page') ) {
    $paged = get_query_var('page');
} else {
    $paged = 1;
}

$args = array('post_type' => 'custom_post_type', 'paged' => $paged );

$temp = $wp_query; 
$wp_query = null; 
$wp_query = new WP_Query(); 
$wp_query->query( $args ); 

while($wp_query->have_posts()) : $wp_query->the_post(); 
?>

  <!-- LOOP: Usual Post Template Stuff Here-->

<?php endwhile; ?>

<nav>
    <?php previous_posts_link('&laquo; Newer') ?>
    <?php next_posts_link('Older &raquo;') ?>
</nav>

<?php 
  $wp_query = null; 
  $wp_query = $temp;  // Reset
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-09T17:23:11.090

自从发布此问题以来已经有很长时间了，但是对于正在寻找一种方法在他/她自己的代码中实现这一点的任何人：

```
$args = array( 'post_type' => 'plops', 'posts_per_page' => 30, 'order' => 'desc');
$loop = new WP_Query( $args );

while ( $loop->have_posts() ) {
    $loop->the_post();
    $meta = get_post_meta($post->ID);
    // my template for the post...
}

previous_posts_link('&laquo; Newer');
next_posts_link('Older &raquo;', $loop->max_num_pages);

wp_reset_postdata(); 
```

**注意：**您只需将最大页数传递给`next_posts_link`函数。

# image-processing - 图像处理按位指令概念解释

> ID：10258452
> 
> 赞同：0
> 
> 时间：2012-04-21T11:20:41.857
> 
> 标签：image-processing, bitwise-operators

该代码来自一个 Qt 库，该库有助于生成具有图像形状的按钮；它扫描所有行 y 和所有宽度 x，当像素的 rgb 部分与掩码部分重合时生成以下更改（mp 是行开头的指针，并且预填充为 0xff）：

*(mp + (x >> 3)) &= ~(1 << (x & 7));

我真的无法解释它；有背景的人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:44:26.163

从代码的外观来看，mp 指向每像素 1 位图像的当前行。代码清除表示 X 处像素的位。它将 X 偏移量转换为字节偏移量 (x >> 3)，然后将字节与掩码进行逻辑与，该掩码是从字节内左移 X 位置的逆 1 创建的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T01:03:03.760

为凡人；好的，背景：[http ://www.cprogramming.com/tutorial/bitwise_operators.html](http://www.cprogramming.com/tutorial/bitwise_operators.html); &= 表示我们要进行按位乘法；在 rhs 中，~ 是补码，所以它用 0 翻转 1，反之亦然；二进制中的 7 末尾有 3 个 1，前面全为零，因此 x & 7 保留 x 中的最后 3 位；结合 << 这将根据指数将第一位中的 1 从 char 1 向左移动一定数量的位置；由于指数仅使用 x 的最后 3 位，因此它小于 8(2^3)；因此，带有 1 的位将位于 char 的 8 位内的 1-8 位置；翻转〜将把东西变成全1，除了那个神奇的位置；&= 执行的乘法将保留 lhs 中的所有内容，除了一位。现在是 lhs；我们在右移操作中用 >> 踢出 x 的最后一个字节或最后 3 位；这意味着我们将为 x 的每 8 个增量修改相同的字节（mp 的 char 类型）的位置；当我们“跳转”时，我们只会跳一个字节；当 x=9 时，它将转到 mp+1，当 x=17 时，它将转到 mp+2；所以它就像整数运算中的 x/2^3，但在一次移位运算中；好的，现在我们有了理解整个事情的要素；

tmask 已预填充 0xff，全为 1；这意味着它将在 &= 操作上是被动的，保留 rhs 指示的内容；这意味着如果在检查特定像素是否等于背景的 if 语句中有命中，则执行此行，我们将擦除与像素相关的特定位；

# extjs - 从 Ext.util.MixedCollection 获取值？

> ID：10258459
> 
> 赞同：2
> 
> 时间：2012-04-21T11:22:49.297
> 
> 标签：extjs

我怎样才能从“年龄”中获得价值？我已经有了“record.data.items”，但我无法再进一步了。我想要年龄的价值。谁能帮我？

`Ext.util.MixedCollection

```
...
items: Array[3]
    0: c
        data: Object
            age: "4"
            id: "1"
            name: "sam"
    1: c
    2: c
    length: 3
    __proto__: Array[0]
keys: Array[3]
length: 3
...` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:32:48.547

```
for (var i = 0 ; i < record.getCount() ; i ++){
    console.log(record.getAt(i).data.age);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T03:50:16.983

查看此链接： [http ://docs.sencha.com/ext-js/4-0/#!/api/Ext.util.MixedCollection](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.util.MixedCollection)

您可以使用 getAt() 方法获取集合中的项目。

要遍历列表，循环 0 到 getCount()

# asp.net-mvc - ASP.NET MVC 在创建用户时获取 userId？

> ID：10258461
> 
> 赞同：3
> 
> 时间：2012-04-21T11:23:03.633
> 
> 标签：asp.net-mvc, authentication, user-registration, userid

我想在注册时获取 UserId

```
[AllowAnonymous]
    [HttpPost]
    public ActionResult Register(RegisterModel model)
    {
        if (ModelState.IsValid)
        {
            // Attempt to register the user
            MembershipCreateStatus createStatus;
            Membership.CreateUser(model.UserName, model.Password, model.Email, passwordQuestion: null, passwordAnswer: null, isApproved: true, providerUserKey: null, status: out createStatus);

            if (createStatus == MembershipCreateStatus.Success)
            {
                FormsAuthentication.SetAuthCookie(model.UserName, createPersistentCookie: false);
                //Object reference not set to an instance of an object.
                Guid id = (Guid)System.Web.Security.Membership.GetUser().ProviderUserKey;
                System.Web.Security.Roles.AddUserToRole(model.UserName, "User");
                return RedirectToAction("Index", "Home");
            }
            else
            {
                ModelState.AddModelError("", ErrorCodeToString(createStatus));
            }
        }

        // If we got this far, something failed, redisplay form
        return View(model);
    } 
```

但是发生错误（“对象引用未设置为对象的实例。”）。如何在注册方法中获取 userId？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T11:43:32.777

[`FormsAuthentication.SetAuthCookie`](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.setauthcookie.aspx)验证*下一个*请求，`System.Web.Security.Membership.GetUser()`在同一个请求上将返回 null：

> 如果 CookiesSupported 为 false，SetAuthCookie 方法将表单身份验证票添加到 cookie 集合或 URL。forms-authentication ticket 为浏览器发出的下一个请求提供表单认证信息。使用表单身份验证，当您想要对用户进行身份验证但仍保留对重定向导航的控制时，可以使用 SetAuthCookie 方法。

`Membership.CreateUser`返回创建的用户，所以你应该能够做到这一点：

```
[AllowAnonymous]
[HttpPost]
public ActionResult Register(RegisterModel model)
{
    if (ModelState.IsValid)
    {
        // Attempt to register the user
        MembershipCreateStatus createStatus;
        MembershipUser membershipUser = Membership.CreateUser(model.UserName, model.Password, model.Email, passwordQuestion: null, passwordAnswer: null, isApproved: true, providerUserKey: null, status: out createStatus);

        if (createStatus == MembershipCreateStatus.Success)
        {
            FormsAuthentication.SetAuthCookie(model.UserName, createPersistentCookie: false);
            Guid id = (Guid)membershipUser.ProviderUserKey;
            ... 
```

# c# - 如何通过继承使用单例模式？

> ID：10258462
> 
> 赞同：1
> 
> 时间：2012-04-21T11:23:05.823
> 
> 标签：c#, inheritance, singleton

我正在尝试通过我的抽象 Charcter 类使用 Singleton 设计模式，以便所有子类都可以访问对象实例。这是我的单身课程：

```
 class GatewayAccess

{
private static GatewayAccess ph;

// Constructor is 'protected'
protected GatewayAccess()
{
}

public static GatewayAccess Instance()
{
  // Uses lazy initialization.
  // Note: this is not thread safe.
  if (ph == null)
  {
      ph = new GatewayAccess();
      Console.WriteLine("This is the instance");
  }

  return ph;
}
} 
```

我可以在我的 program.cs 中使用它来创建一个实例没问题：

```
static void Main(string[] args)
    {
        GameEngine multiplayer = new GameEngine(5);

        Character Thor = new Warrior();
        Thor.Name = "Raymond";
        Thor.Display();
        Thor.PerformFight();
        Thor.PerformFight();
        multiplayer.Attach(Thor);

        GatewayAccess s1 = GatewayAccess.Instance();
        GatewayAccess s2 = GatewayAccess.Instance();

        if (s1 == s2)
        {
            Console.WriteLine("They are the same");
        }

        Console.WriteLine(Thor.getGamestate());

        Console.ReadLine();
    } 
```

所以我想做的是允许子类，即战士访问网关的实例，我只是不知道如何做到这一点，因为继承的东西让我感到困惑。基本上，网关访问是对一次只能有一个连接的数据库的访问点。单例模式很容易理解，它只是它和继承的混合。我希望一旦我实现了这一点，我就可以以线程安全的方式做到这一点。

我还想知道如何删除单例实例，因为它是与数据库的连接，一次只能由一个角色对象使用，然后一旦角色对象完成，它必须释放单例对象对？

我试图在我的 Character 类中使用方法来完成这一切，但它不起作用。

我很感激这方面的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T11:39:06.157

我在这里感觉到了几种设计气味。

*   数据库连接不应该是单例 - 正如您自己提到的那样，连接来来去去，而单例的主要观点是它会在应用程序的生命周期内保持不变
*   单例和线程安全不是很好的匹配
*   游戏角色不应该与网关一起工作（来吧，战士与数据库有什么关系？;-)

您应该更好地分离关注点，并让 DB / 持久性由调用游戏角色的不同类处理，而不是反之亦然。

您提供的信息很少，很难给出更具体的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T11:33:16.987

您可以使用简单的`static class`，而不是单音，您不能扩展它，也不能创建它的实例。另外，您可以通过简单地在其上调用一个函数来以您想要的方式使用`static`它，并且它可以在内部跟踪`private static connection`成员的状态。

**编辑**

只是一个*伪代码*示例：

```
public static class Connector
{
    static SqlConnection con = new SqlConnection(...); //return type object, 
                                                       //just for example, choose more 
                                                       //appropriate type for you.

    public static object GetData(string query)
    {
       con.Open();

       //run query and retrieve results

       con.Close();
    }
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T11:37:52.733

单例绝对不是好的模式，当它应该只被一个对象使用时。为什么不将它创建为该 Character 类的非静态字段并在 IDispose.Dispose() 中销毁它？如果您仍然想要单例，请保护“ph”，然后您可以将其作为 GatewayAccess.ph 访问

# java - Java 线程，绿色的还是原生的？

> ID：10258474
> 
> 赞同：1
> 
> 时间：2012-04-21T11:24:56.337
> 
> 标签：java, multithreading

如果我有多核机器，Java 线程是否在不同的处理器核心上运行？换句话说，如果我运行 Thread.start()，这个线程是绿色的还是原生的？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T11:31:21.683

> 在 Java 1.1 中，绿色线程是 JVM 使用的唯一线程模型，至少在 Solaris 上是这样。由于与原生线程相比，绿色线程有一些限制，因此后续的 Java 版本放弃了它们，转而使用原生线程。
> 
> 一个例外是 Squawk 虚拟机，它是低功耗设备操作系统和 Java 虚拟机的混合体。它使用绿色线程以将本机代码保持在绝对最低限度并支持其隔离区的迁移。

[维基百科](http://en.wikipedia.org/wiki/Green_threads)如是说。

# android - androidplot：同一图表上的多个y轴

> ID：10258477
> 
> 赞同：2
> 
> 时间：2012-04-21T11:25:21.120
> 
> 标签：android, graph, androidplot

我正在尝试使用 androidplot 在同一个图表上显示两组数据；但是，数据集的规模非常不同。虽然我可以对数据集进行某种标准化以使其兼容，但我宁愿将它们绘制在多个 y 轴上 - 例如

[http://www.cohort.com/2yaxes.gif](http://www.cohort.com/2yaxes.gif)

我几乎可以在 achartengine 中做到这一点，但我认为 androidplot 可以生成更好看的图形并提供“更好”（即更像 android）的架构。

有没有人有任何想法：a）如果可以做到吗？并且，b）怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T16:02:13.123

我猜到现在答案有点晚了，但无论如何都是这样：

Androidplot 不提供任何内置支持来同时使用不同的刻度间隔显示多个对数刻度。正如您已经指出的，最流行的解决方法是规范化，它强制您使用共享的滴答间隔。话虽如此，一位 Androidplot 用户能够通过叠加数据找到解决方法：

![在此处输入图像描述](../Images/5d3298ad819ecce2527fe048791545bc.png)

这是讨论的链接：

[http://old.androidplot.com/forum/index.php/topic,116.0.html](http://old.androidplot.com/forum/index.php/topic,116.0.html)

# jquery - 如何通过使用 jquery 在另一个 td 中单击来显示具有特定类名的 td 中的值？

> ID：10258480
> 
> 赞同：1
> 
> 时间：2012-04-21T11:25:47.600
> 
> 标签：jquery

我必须在表格的单元格中显示内容。

表格如下：

```
<table id="innertable">
                        <thead>
                            <tr class="tablewrapperheader">
                                <th>Status</th>
                                <th>Date Requested</th>
                                <th>Date Time Range</th>
                                <th>Reason</th>
                                <th>Date Approved/Denied</th>
                                <th>Reason Denied</th>
                                <th>Approve/Deny</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="odd">
                                <td id="check" class="pending"><img src="../images/icons/36x36/exclamation.gif" alt="exclamation"/>
                                    &nbsp;<span id="checkMsg">Pending</span></td>
                                <td>06/15/2012</td>
                                <td>06/21/2012</td>
                                <td>Medical Checkups</td>
                                <td class="dateApproveDenied"></td>
                                <td class="reasonDenied"></td>
                                <td><img src="../images/icons/128x128/approve.png" class="actionApprove" alt="exclamation" height="16" width="16"/>&nbsp;&nbsp;<img src="../images/icons/128x128/deny.png" class="actionDeny" alt="" height="16" width="16"/></td>
                            </tr> 
```

用户将点击激活或拒绝，如果拒绝，他们必须给出拒绝的理由。我必须在我使用类名“dateApproveDenied”和“reasonDenied”的受人尊敬的td中显示拒绝日期和原因。我正在使用 Jquery 来实现这种效果，但无济于事。

这是我的jQuery

```
$(".actionDeny").click(function(){

    var reason = prompt("Write reason for denial.",'');
    var today = new Date();
    var dd = today.getDate();
    var mm = today.getMonth()+1; //js months 0-11
    var yyyy = today.getFullYear();
    if(dd<10){
        dd='0'+dd
    }
    if(mm<10){
        mm='0'+mm
    }
    var today = mm+'/'+dd+'/'+yyyy;
    $(this).closest('td .dateApproveDenied').text(today);
    $(this).closest('td .reasonDenied').text(reason);
}); 
```

我收到了写下原因的提示，但原因和日期没有出现在 td 中。请有人帮我把它设置好。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T11:49:41.817

使用最接近获取父 tr，然后找到 tds。

```
$(this).closest('tr').find('.dateApproveDenied').text(today);
$(this).closest('tr').find('.reasonDenied').text(reason); 
```

编辑

您也可以缓存最近的选择器：

```
var $tr = $(this).closest('tr');
$tr.find('.dateApproveDenied').text(today);
$tr.find('.reasonDenied').text(reason); 
```

# c# - 将列中的 XML 转换为表

> ID：10258483
> 
> 赞同：3
> 
> 时间：2012-04-21T11:26:04.893
> 
> 标签：c#, sql-server, xml, sql-server-2005, import

我的输入是 SQL Server 表中的一个 XML 列，如下所示：

```
<word Entry="Ketab" Affix="miyanvand" Pos="esm" Derv="Jamed" /> 
```

期望的输出：这样的表：

```
Entry    | Affix       | Pos     | Derv
Ketab    | miyanvand   | esm     | Jamed 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T11:37:26.917

如果您使用的是 sql-server 2005+。然后可能是这样的：

```
DECLARE @xml XML=
'<word Entry="Ketab" Affix="miyanvand" Pos="esm" Derv="Jamed" />'

SELECT 
   Y.ID.value('(@Entry)[1]', 'Varchar(100)') as [Entry],
   Y.ID.value('(@Affix)[1]', 'Varchar(100)') as [Affix],
   Y.ID.value('(@Pos)[1]', 'Varchar(100)') as [Pos],
   Y.ID.value('(@Derv)[1]', 'Varchar(100)') as [Derv]
FROM @xml.nodes('/word') as Y(ID) 
```

或者你也可以这样做：

```
DECLARE @xml XML=
'<word Entry="Ketab" Affix="miyanvand" Pos="esm" Derv="Jamed" />'

SELECT 
    @xml.value('(/word/@Entry)[1]', 'varchar(50)') as Entry,
    @xml.value('(/word/@Affix)[1]', 'varchar(50)') as Affix,
    @xml.value('(/word/@Pos)[1]', 'varchar(50)') as Pos,
    @xml.value('(/word/@Derv)[1]', 'varchar(50)') as Derv 
```

或者，如果你有一张桌子。然后是这样的：

```
DECLARE @tbl TABLE(ID INT,someXML XML)
INSERT INTO @tbl
VALUES
    (1,'<word Entry="Ketab" Affix="miyanvand" Pos="esm" Derv="Jamed" />')

SELECT
    tbl.ID,
    Y.ID.value('(@Entry)[1]', 'Varchar(100)') as [Entry],
    Y.ID.value('(@Affix)[1]', 'Varchar(100)') as [Affix],
    Y.ID.value('(@Pos)[1]', 'Varchar(100)') as [Pos],
    Y.ID.value('(@Derv)[1]', 'Varchar(100)') as [Derv]
FROM
    @tbl AS tbl
    CROSS APPLY someXML.nodes('/word') as Y(ID) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T11:39:45.470

您可以`value`在 XML 列上使用该函数：

```
declare @t table (col1 xml)
insert @t values ('<word Entry="Ketab" Affix="miyanvand" />')

select  t.col1.value('(/word/@Entry)[1]', 'varchar(50)') as Entry
,       t.col1.value('(/word/@Affix)[1]', 'varchar(50)') as Affix
from    @t t 
```

# .net - EF Code first 4.3 命名约定外键

> ID：10258484
> 
> 赞同：2
> 
> 时间：2012-04-21T11:26:16.773
> 
> 标签：.net, entity-framework, ef-code-first, entity-framework-migrations

我有以下实体：

```
public class User
{
    public int ID {get; set;}

    public int GroupID {get; set;}     // navigation property with 
    public Group Group {get; set;}     // foreign key field

    public Adress Adress {get; set;}   // navigation property only

} 
```

从实体框架生成的表如下所示：

```
ID
GroupID
Adress_ID 
```

我不喜欢 FK 列的列命名不一样。我可以实现两者都使用相同的约定“GroupID，AdressID”或“Group_ID，Adress_ID”吗？

我使用约定而不是配置，不想使用 Fluent API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T11:40:20.553

EF 4.1 到 4.3 不支持创建自定义约定，因此不可能。您唯一能做的（没有 Fluent API）可能是将外部属性映射到另一个列名：

```
[Column("Group_ID")]
public int GroupID {get; set;} 
```

然后你在数据库中有两个带下划线的 FK 列。但是 - 如您所见 - 您至少需要使用数据注释覆盖约定。

只有使用 Fluent API 才能定义不带下划线的第二个 FK 列：

```
modelBuilder.Entity<User>()
    .HasOptional(u => u.Address)
    .WithMany()
    .Map(x => x.MapKey("AddressID")); 
```

# php - 使用 PHP5 DOM 进行 XML 转换

> ID：10258485
> 
> 赞同：0
> 
> 时间：2012-04-21T11:26:22.380
> 
> 标签：php, xml, dom

我正在开发一个应用程序，我需要转换如下所示的 XML 文档（words.xml）：

```
<?xml version='1.0' encoding='ISO-8859-1'?>
<!DOCTYPE words SYSTEM "words.dtd">
<words>
<word id="word_1">Alfa</word>
<word id="word_2">Beta</word>
<word id="word_3">Gamma</word>
<word id="word_4">Delta</word>
<word id="word_5">Zeta</word>
</words> 
```

使用 PHP5 和 DOM。我希望结果是（在这种情况下）：

```
word_1 = Alfa 
```

我的 PHP 代码是这样的：

```
<?php

$xmlHitzakDok = new DOMDocument();

if($xmlHitzakDok->load("words.xml") === FALSE){die('Errorea hitzen xml-a kargatzean');}

$xPath_Hitzak = new DOMXPath($xmlHitzakDok);

$Hurrengo_Hitza = 'word_1';

foreach ($xPath->query('//words/word') AS $item)
{
   if ($item->getAttribute('id') == $Hurrengo_Hitza)
   {
    echo $item->getAttribute('id') . " = " . $item->nodeValue . "<br />";
   }
} 
```

我没有得到任何结果。哪个是问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T23:02:55.500

您应该使用： $xPath->query('//words/word') 而不是 $xPath_Hitzak->query('//words/word')

# php - 如何在不宣传您的技术的情况下通过 jQuery 加载 php 文件

> ID：10258487
> 
> 赞同：1
> 
> 时间：2012-04-21T11:26:39.480
> 
> 标签：php, jquery, ajax

如今，开发人员和专业人士倾向于使用 PHP 模板，原因有两个。它们是可管理的，其次，我们不需要宣传我们的技术，因为 URL 中没有问号和 .php 扩展名。

但是如何在发送 jQuery Ajax 请求以将 PHP 文件加载到`div`. 我的意思是我们必须`$.get('phpfile.php')`在脚本中编写，并且可以说他正在使用 PHP 嗯嗯。

简单地说，我想问是否有任何方法可以通过请求加载 PHP，而无需像上面所说的那样宣传您的技术。

一些编码将受到尊重。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T11:42:42.130

mod_rewrite 是您所有困境的最佳答案。为什么不使用它？上面代码中的 URL phpfile.php 可以重写以实现混淆...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T11:58:30.903

> 但是如何在发送 jQuery ajax 请求以在 div 中加载 php 文件时使您的技术不做广告成为可能。我的意思是我们必须在脚本中编写 $.load('phpfile.php') 并且可以说他正在使用 PHP 嗯嗯。

我不明白。jQuery 不知道 PHP 文件。如果您的网站有 2 个“公共页面”`www.example.com`和，那么您可以使用类似 的内容从主页`www.example.com/foo`访问该页面。在这里，我使用 AJAX、jQuery，没有人知道我的页面是使用 PHP 还是什么。`/foo``$.get("/foo")`

然后，您应该寻找`mod_rewrite`已被逼真地解释过，但重写 url 并不是唯一的解决方案。看看这个网站[http://builtwith.com/](http://builtwith.com/)并输入一个随机的 url。默认情况下，Web 服务器会发送大量关于它们自己的数据，因此如果你想“隐藏”所使用的技术，你也应该避免这种行为。看看这里[http://xianshield.org/guides/apache2.0guide.html](http://xianshield.org/guides/apache2.0guide.html)。它是“按照通用安全标准安装和强化 Apache 2.0 Web 服务器的指南。”。您可能会在其中找到有用的信息。

**编辑**

而且，“PHP 模板”根本与页面 URL 无关。例如，您可能有多个使用相同“PHP 模板”的 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T12:16:56.647

@pomeh。好点子。

看。这里可以做两件事。

1) 禁用 APACHE 签名。在 Apache 的默认配置中，通过它提供的任何页面都将包含服务器的完整签名。服务器签名包含有关已安装软件的有价值信息，并且可以被读取（和利用）。因此，关闭此行为是否更安全。这就是你的做法。打开 Apache 的配置文件（httpd.conf 或 apache2.conf）并搜索*ServerSignature*。将其设置为“关闭”。之后搜索*ServerTokens*并将其设置为“Prod”。

2) 将 php.ini 中的“expose_php”设置为 false：向世界公开 PHP 安装在服务器上，其中包括 HTTP 标头中的 PHP 版本。

3) 有一些可用的 php 混淆器也可以使用。我不会推荐它们，因为我没有亲自尝试过。

除了这些还有隐藏“技术”的方法和手段。默认情况下，启用 php 的 APACHE Web 服务器处理并解释所有扩展名为 .php 的文件。但是我们可以绑定任何奇怪的扩展来隐藏服务器要处理的技术..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T12:17:48.000

我想逼真度和 pomeh 已经回答了这个问题。

所有网络服务器都通过 Internet 发送有关自身的信息。你不能隐瞒。

如果您想隐藏文件扩展名，例如“aspx、php、asp、html”，那么您需要在 Apache 下使用 mod_rewrite 或在 IIS7 下使用 URL Rewrite 之类的东西。

您还可以在 IIS7 下设置默认文档。这实际上只对每个 web 文件夹有效。例如，您可以将 default.htm 设置为默认文档之一。当访问者访问您的网站时，他们键入 www.domain.com 并获得一个网页。该访问者实际上正在查看 www.domain.com/default.htm

# haskell - 判断一个值是否是 Haskell 中的函数

> ID：10258488
> 
> 赞同：8
> 
> 时间：2012-04-21T11:26:56.750
> 
> 标签：haskell, typeinfo

是否可以编写一个函数`isFunc :: a -> Bool`来确定任意值是否是（任何类型的）函数，使得

```
foo :: Int -> Int
bar :: Char -> Char -> Char    

> isFunc foo
True
> isFunc bar
True
> isFunc 3
False
> isFunc 'a'
False 
```

我正在使用[Data.Dynamic](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-Dynamic.html)，所以我无法提前确定类型。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-21T12:02:42.173

你要求什么和你需要做什么`Data.Dynamic`似乎是不同的事情。`fromDyn`在使用/提取值之前，您需要知道值的确切类型`fromDynamic`。要确定是否`Dynamic`包含您需要分析的函数值`TypeRep`：

```
isFuncDynamic x = typeRepTyCon (dynTypeRep x) == typeRepTyCon (typeOf2 id) 
```

（如果这不是最简洁的实现，请原谅我。）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-21T11:40:07.550

参数化说不。类型的唯一功能

```
a -> Bool 
```

是常数函数。

但是，通过一些特殊的多态性和更多的胆量，您可以这样做：

```
{-# LANGUAGE OverlappingInstances, FlexibleInstances #-}

class Sick x where
  isFunc :: x -> Bool

instance Sick (a -> b) where
  isFunc _ = True

instance Sick x where
  isFunc _ = False 
```

然后看起来你有

```
*Sick> isFunc 3
False
*Sick> isFunc id
True 
```

但这似乎是一件很奇怪的事情。结果`Bool`对你有什么用？

# iphone - 如何在没有 UITableViewController 的情况下使用 UITableView

> ID：10258489
> 
> 赞同：8
> 
> 时间：2012-04-21T11:27:09.773
> 
> 标签：iphone, ios, uitableview

我想在我自己的 ViewController 中使用 UITableView 作为单个选择，现在我可以显示它但无法填充单元格或在如何填充单元格的文本标签时出错。有什么建议吗？...

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-21T11:39:29.090

在第一响应者和接口构建器中实现或连接 tableview的协议`UITableViewDataSource`，并支持您的.`UITableViewDelegate``.h``.m``-datasource``-delegate``.m`

对于数据源，它是：`cellForRowAtIndexPath`和`numbersOfRowsInSection`.

设置你`cell.textlabel.text`的`cellForRowAtIndexPath`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T11:32:29.353

如果要填充对象，则必须将对象注册为其数据源。如果你还想接收事件，你还必须实现一个委托

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-21T11:40:17.970

您可以在 ViewController（属性）中嵌入 TableViewController，并将 TableViewControllers 视图添加到您的 ViewControllers 视图（addSubView）。创建单元格进入 TableViewController 并以与通常情况相同的方式工作。

# php - Codigniter Pagination - 第一页保持粗体

> ID：10258493
> 
> 赞同：0
> 
> 时间：2012-04-21T11:28:01.913
> 
> 标签：php, codeigniter, pagination

我在使用 Codeigniters 分页类时遇到了一些问题。

问题是“第 1 页”仍然是粗体，即使 URL 发生了变化。

我的网址如下所示：

[http://mypage.com/s/search+str/4/1](http://mypage.com/s/search+str/4/1)

uri->segment(3) 是 per_page，uri->segment(4) 是页码。

我已经设置了 $config['uri_segment'] = 4; 正如您在下面的代码中看到的那样。

任何人都可能看到代码有什么问题？

谢谢..

```
/** Load The Search model **/
    $this->load->model('search_model');

    /** Perform the search **/
    $this->search_model->set_search_str(decode_url($str));

    // prettyPrint($config['per_page']); die();
    $offset = $this->uri->segment(4,0);

    /** Pagination **/
    $this->load->library('pagination');
    $config = array (
            'uri_segmet'       => 4,
            'per_page'         => $this->uri->segment(3, 25),
            'total_rows'       => $this->search_model->get_nums(),
            'num_links'        => 4,
            'base_url'         => base_url()."s/{$str}/".$this->uri->segment(3, 25),
            'use_page_numbers' => TRUE
        );

$this->pagination->initialize($config);

$pagination_links = $this->pagination->create_links();

    $query = $this->search_model->search( $config['per_page'], $offset );

    $num_results = $this->search_model->get_nums();

    /** Set the theme data **/
    $data = array(
        'title'         => 'Search page',
        'page'          => 'search',
        's_str'         => decode_url($str),
        'num_results'       => $num_results,
        'results'       => $query['results'][0],
        'pagination'        => $pagination_links
    );

    /** Load the theme  **/     
$this->load->theme($data); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T12:46:47.820

如果您的数据库记录，我的意思是页面中的结果是正确的。而且您只面临“第一个粗体链接”的问题，然后您可以设置如下样式（css）：

$config['first_link'] = 'First_PAGE_STYLE_CLASS';

您必须将 css 制作如下： .Frist_PAGE_STYLE_CLASS { text-weight:normal; }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T07:09:40.160

尝试在配置数组中手动​​添加**current_page**，并将其设置为

```
$data['current_page'] = $this->uri->segment(4); 
```

它可能对你有用..

# java - 摆动输出在第一次运行时没有出现

> ID：10258494
> 
> 赞同：1
> 
> 时间：2012-04-21T11:28:02.117
> 
> 标签：java, swing, netbeans

我正在尝试使用 netbeans 中的 swing 执行简单的客户端服务器通信。第一次运行时，它显示一个空白窗口。我再次运行它而不关闭第一个输出窗口，它显示了所需的输出。我附上代码。

谢谢

```
import java.io.*;
import java.net.*;

public class serverg extends javax.swing.JFrame {

ServerSocket ss;
Socket s;
BufferedReader in;
PrintWriter out;

public serverg() {
    initComponents();       
}

 void work() {
    try {

        String line;
        ss = new ServerSocket(3500);
        s=new Socket();
        jTextArea1.append("waiting for connection");
        s=ss.accept();
        in = new BufferedReader(new InputStreamReader(s.getInputStream()));
        out = new PrintWriter(s.getOutputStream());
        out.print("connection established");
        if((line=in.readLine())!=null)
        jTextArea1.append("Client : " + line );

    } catch (IOException r) {
    }

}

@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">                          
private void initComponents() {

    jScrollPane1 = new javax.swing.JScrollPane();
    jTextArea1 = new javax.swing.JTextArea();
    jTextField1 = new javax.swing.JTextField();
    jButton1 = new javax.swing.JButton();
    jLabel1 = new javax.swing.JLabel();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    setName("Form"); // NOI18N

    jScrollPane1.setName("jScrollPane1"); // NOI18N

    /*try{
        jTextArea1.setEditable(false);
        //s=new Socket();
        jTextArea1.append("waiting for client..." );
        s=ss.accept();
        String line=in.readLine();
        jTextArea1.append("Client : " + line );
    }
    catch(IOException r){}*/
    jTextArea1.setColumns(20);
    jTextArea1.setRows(5);
    jTextArea1.setName("jTextArea1"); // NOI18N
    jScrollPane1.setViewportView(jTextArea1);

    jTextField1.setName("jTextField1"); // NOI18N

    org.jdesktop.application.ResourceMap resourceMap = org.jdesktop.application.Application.getInstance(desktopapplication1.DesktopApplication1.class).getContext().getResourceMap(serverg.class);
    jButton1.setText(resourceMap.getString("jButton1.text")); // NOI18N
    jButton1.setName("jButton1"); // NOI18N
    jButton1.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton1ActionPerformed(evt);
        }
    });

    jLabel1.setName("jLabel1"); // NOI18N

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(jTextField1, javax.swing.GroupLayout.DEFAULT_SIZE, 380, Short.MAX_VALUE)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 380, Short.MAX_VALUE)
                .addGroup(layout.createSequentialGroup()
                    .addGap(10, 10, 10)
                    .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 43, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGap(98, 98, 98)
                    .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 68, javax.swing.GroupLayout.PREFERRED_SIZE)))
            .addContainerGap())
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 187, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, 51, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 19, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addContainerGap())
    );

    pack();
}// </editor-fold>                        

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    String line = jTextField1.getText();
    out.println(line);
    jTextArea1.append("\nServer : " + line);
}                                        

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {

    java.awt.EventQueue.invokeLater(new Runnable() {

        public void run() {
            serverg ob=new serverg();                
            ob.setVisible(true);                      
            ob. jTextArea1.append("waiting for connection"  );
            ob.work();              
        }
    });

}
// Variables declaration - do not modify                     
private javax.swing.JButton jButton1;
private javax.swing.JLabel jLabel1;
private javax.swing.JScrollPane jScrollPane1;
private static javax.swing.JTextArea jTextArea1;
private javax.swing.JTextField jTextField1;
// End of variables declaration                   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T12:49:02.630

您的`work()`方法不是您的一部分`Swing Application`，因此您的`main()`方法是错误的，只需将您的`work()`方法更改为此，以便两个进程都可以在各自的线程上运行，通过编写`s=ss.accept();`，您阻塞了事件调度程序线程。

此外，您想要对 GUI 进行的任何更改都必须在 Event Dispatcher 线程上完成，因此您需要`work()`同样更改您的方法，请参阅[Swing 中的并发以](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)获取更多信息。因此，将您的主要方法恢复为这种方式，以解决问题。

```
public static void main(String args[]) 
{
    final serverg ob=new serverg();  
    java.awt.EventQueue.invokeLater(new Runnable() 
    {
        public void run() 
        {                         
            ob.setVisible(true);                      
            ob. jTextArea1.append("waiting for connection"  );                        
        }       
    });
    ob.work(); 
} 
```

您的 if 块内部`work()`方法必须如下所示，为此，您必须将`line`变量声明为实例变量：

```
if((line=in.readLine())!=null)
    SwingUtilities.invokeLater(new Runnable()
    {
        public void run()
        {
            jTextArea1.append("Client : " + line );
        }
    }); 
```

# objective-c - XCode heapshots 非对象增加导致内存崩溃

> ID：10258497
> 
> 赞同：1
> 
> 时间：2012-04-21T11:28:29.217
> 
> 标签：objective-c, ios, memory-management, heap-memory

我有一个在 iPad 上运行的应用程序。我会说相当复杂的一个。我现在面临的主要问题是内存崩溃。经过几个讨论线程后，我无法弄清楚如何解决它。

我所有的内存泄漏都是固定的。在监控仪器中的 heapshots 时，它们会在每个周期持续增加 1 MB 的数量级（我在应用程序的一个正常“状态”下进行 heapshots）。80% 的 heapshots 增加属于“非对象”类别。它们的引用计数均为 1。

这些非对象内存占用是我的内存崩溃的可能原因吗？或者这只是一个症状？我应该在其他地方寻找根本原因吗？如果这些是可能的原因，那么消除这些记忆猪的系统方法是什么？

编辑：添加了屏幕截图。如您所见，没有调用我的代码（底部的 main() 除外）。有人可以对右侧的扩展细节有任何意义，我在哪里可以寻找，以删除引用计数为 1 的这 16 位内存（非对象）？这只是一个例子，有成千上万，导致我的记忆增长。

![在此处输入图像描述](../Images/aac82c2475f35e9115f694f1ffb02854.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T11:57:54.163

我猜这些是在堆上分配的简单缓冲区，就像`malloc()`. 对于在两个堆之间分配和未释放的所有堆，检查堆栈跟踪以查看导致分配的原因。如果它在您的代码中，请确保您正在释放您分配的任何内容。

顺便说一句，并非所有内存管理问题都会导致真正的泄漏。真正的泄漏是您的代码丢失了地址的分配，因此无法想象释放它。伪泄漏是您仍然拥有对该对象的引用，但您的代码永远不会再次使用它。也就是说，您已经将它隐藏在某个数据结构中的某个地方，永远不会再访问它，而您确实应该释放它并忘记它。

因此，您可能要对非对象分配负责，因为您在不需要时保留对象。

# sql - 在 oracle 10g 中连接三个表

> ID：10258502
> 
> 赞同：3
> 
> 时间：2012-04-21T11:29:06.513
> 
> 标签：sql, oracle, oracle10g

我有 3 张桌子，College、Student 和 Result

```
create table college
(
clg_id int,
clg_name varchar2()50,
insert into college values(1,'GIFT');
insert into college values(2,'GITA');
insert into college values(3,'MIT');

create table student
(
clg_id int,
regno int,
sname varchar2(50)
)

insert into student values(1,10,sahar);
insert into student values(2,11,raj);
insert into student values(3,12,Payal);
insert into student values(3,13,Monalisha);
insert into student values(2,14,mary);

create table Result
(
clg_id int,
sname varchar2(50),
clg_name varchar2(50),
regno int,
dt date,
result varchar2(30)
)

insert into Result values(1,'sahar',10,'GIFT',20-02-1990,'A+');
insert into Result values(2,'raj',11,'GITA',21-02-1991,''B+);
insert into Result values(3,'monalisha',13,'MIT',22-09-2005,'A++');
insert into Result values(3,'payal',14,'MIT',22-09-2005,'C'); 
```

我想从浏览器中给出一个特定的`dt`和`clg_id`显示`result`，学生姓名，大学名称以及`regno`结果存储的日期。

例如：我将输入`clg_id = 3`，`dt = 22-09-2005`然后它应该显示：

```
 clg_name   sname      regno    result      
 MIT       monalisha   13        A++     
 MIT       payal        14       C 
```

我尝试了很多...我的尝试之一是

```
SELECT college.clg_name,student.sname,
student.regno result.result  FROM college,student,result
WHERE college.clg_id=student.clg_id=result.date; 
```

但这是错误的......请帮忙。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-21T12:44:16.103

好的，为了做到这一点，您实际上不需要加入 3 个表。我可以在2上完成如下。请注意，我使用了显式而不是隐式连接语法。这已经存在了几十年，应该真正使用。

```
select r.clg_name, s.sname, r.regno, r.result
  from result r
  join student s
    on r.regno = s.regno
 where r.clg_id = 3
   and r.dt = to_date('22-09-2005','dd-mm-yyyy') 
```

我还创建了一个[SQL Fiddle](http://sqlfiddle.com/#!4/7d7f7/7)来演示这一点。

可以在两个连接中执行此操作，因为您已经对数据库进行了部分非规范化并且正在复制信息，这可能会导致不一致。在表`result`中，不需要列`sname`或`clg_name`，并且，如果学生只能在一所大学注册，则不需要`clg_id`任何一个。

通过删除这些列，您可以确保数据库不允许错误输入数据，从长远来看，您可以省去很多麻烦。一个非常好的例子是你的模式创建，在`result`表中 Payal 是`regno`14，但`regno`在你的`student`表中是 12！

如果您要正确规范您的数据库（并纠正上述错误），您的查询将如下所示。请注意，我已经更改了您的一些命名约定，以便让事情变得不那么混乱。

```
select c.name, s.name, s.id, r.result
  from colleges c
  join students s
    on c.id = s.college_id
  join results r
    on s.id = r.student_id
 where c.id = 3
   and r.dt =  to_date('22-09-2005','dd-mm-yyyy') 
```

这是该查询的架构，也在[SQL Fiddle](http://sqlfiddle.com/#!4/6bff2)中。请注意我对您自己所做的更改：

1.  标准化的命名约定。
2.  `int`--> `integer`。
3.  表中有多个*学生*，`student`所以我将名字（和其他人）复数了。
4.  主键和外键约束——保持完整性*非常重要。*结果，一定是学生的，学生一定是大学的。
5.  另请注意，您输入的日期不正确。*永远不要*依赖隐式转换并*始终*明确地进行。
6.  删除不必要的列。
7.  我已经在表中添加了一个主键`results`。虽然这是一个代理键，即它与数据无关，但表应该始终有一个主键。您可能想要添加唯一约束，`student_id, dt`但我更喜欢第 8 点中概述的选项。
8.  我原以为您会需要另一个表 ,`exams`并`exam_id`在`results`. 我没有添加这个，但这是值得考虑的事情。
9.  学生姓名已增加到最大值。你只是不能用名字来判断，最好不要过度限制。

```
create table colleges
(
    id integer,
    name varchar2(50),
    constraint pk_colleges primary key ( id )
  );

create table students
(
    id integer,
    name varchar2(4000), -- Use the maximum. Names are impossible to predict
    college_id integer,
    constraint pk_students primary key ( id ),
    constraint fk_student_college foreign key ( college_id )
       references colleges ( id )
);

create table Results
(
    id integer,
    student_id integer,
    dt date,
    result varchar2(30),
    constraint pk_results primary key ( id ),
    constraint fx_result_student foreign key ( student_id )
       references students ( id )
); 
```

## 延伸阅读：

*   来自 Coding Horror[的连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)
*   加入维基百科的[解释](http://en.wikipedia.org/wiki/Join_(SQL))
*   [关于约束的文档](http://docs.oracle.com/cd/E11882_01/server.112/e26088/clauses002.htm#SQLRF52180)
*   [创建表的文档](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_7002.htm#SQLRF01402)
*   从 TECH on the Net[创建表示例](http://www.techonthenet.com/sql/tables/create_table.php)
*   [比较 Oracle SQL 中的日期](https://stackoverflow.com/questions/10178292/comparing-dates-in-oracle-sql/10178346#10178346)- 我自己对 Oracle 中日期的回答

# javascript - jQuery 将图像附加到 div 动画

> ID：10258504
> 
> 赞同：0
> 
> 时间：2012-04-21T11:29:15.220
> 
> 标签：javascript, jquery, html, animation, gallery

我认为这个问题最好通过给你一个[jsFiddle](http://jsfiddle.net/z2mrh/1/)来解释。在该示例中，当用户单击图库项目时，图像将附加到 div 中`id="showimage"`。我无法弄清楚如何做的是传入单击图像的参数，并显示该图像而不是绝对图像。

它的功能应该如下：

*   如果单击图像 1，则应将图像 1 附加到`showimage`. 它应该从宽度 0px 动画到宽度为父 div 的 10%。
*   如果再次单击图像 1，它应该折叠：它应该从宽度 100% 动画到宽度 0px
*   如果在 中已有图像时单击任何其他 img，则已在`showimage`其中的图像应折叠，并且新图像在其位置展开

我认为这最好通过 3 个功能来完成：

1.  展开 - 附加到`showimage`0px 到 100% 并设置动画
2.  Collapse - 从 100% 动画到 0px 并从`showimage`
3.  替换 - 对已存在的图像调用折叠`showimage`，并在单击的图像上调用展开

在此先感谢，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T12:08:35.170

没有动画到位。您的代码应该看起来像这样。

```
$(document).ready(function () {

    $('div.gallery').click(function (event) {

        var len = $('#showimage').find('img').length;
        var myimage = '<img src="http://s3images.coroflot.com/user_files/individual_files/302239_CauyLQoHZTkSJkkGnr3kVbFtw.jpg">';

        if (len === 0) {
            appendImage();

        }
       else {

            $('div#showimage').empty();
            appendImage();
      }

    });  

    function appendImage() {

       $('div#showimage').append(myimage);
       // your animation here 
    }  
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T11:58:46.657

在这里，我叉了你的小提琴，让它按你的意愿工作

[http://jsfiddle.net/6vVUS/5/](http://jsfiddle.net/6vVUS/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T20:24:58.770

我设法解决了这个问题，你可以[在这里](http://jsfiddle.net/jackdent/6vVUS/16/)看到一个实时的 jsFiddle 示例。

我为这一个保持代码非常整洁 - 3 个单独的函数，以及 1 个 if 语句来检查 showimage div 是否有内容。

我使用的jQuery如下：

```
var add_image = function(clicked) {
    var image_create = '<img src="' + clicked + '">';
    $('#showimage').hide().append(image_create).slideDown(400);
};

var change_image = function(clicked) {
    $('#showimage img').slideUp(400, function() {
        $(this).remove();
        add_image(clicked);
    });
};

var remove_image = function() {
    $('#showimage img').slideUp(400, function() {
        $(this).remove();
    });
};

$('.gallery').click(function() {
    var len = $('#showimage').children().length;
    var clicked = $("img", this).attr('src');
    if (len === 0) {
        add_image(clicked);
    } else if (len === 1) {
        change_image(clicked);
    }
});

$('#showimage').click(function() {
    remove_image();
});​ 
```

# java - 使用 setLayoutParams 循环 - ClassCastException

> ID：10258506
> 
> 赞同：0
> 
> 时间：2012-04-21T11:29:36.427
> 
> 标签：java, android, android-layout

**-更新-**

我按照 Agarwal 的建议做了，现在有这个错误：

```
04-21 11:42:01.807: E/AndroidRuntime(1456): java.lang.ClassCastException: android.view.ViewGroup$LayoutParams cannot be cast to android.widget.LinearLayout$LayoutParams 
```

我正在使用此代码动态设置 15 个按钮的宽度。而且，你猜对了，它不起作用。错误发生在`for`循环中，但我不知道为什么。

```
 Button[] buttons = new Button[16];
    buttons[0] = (Button)findViewById(R.id.root2);
    buttons[1] = (Button)findViewById(R.id.root3);
    /* blah blah blah */
    buttons[13] = (Button)findViewById(R.id.root15);
    buttons[14] = (Button)findViewById(R.id.root16);

    LayoutParams lp = new LayoutParams(widthOfButtons,LayoutParams.WRAP_CONTENT);

    for(int x = 0; x < 16; x ++){
        buttons[x].setLayoutParams(lp);
    } 
```

谢谢你的帮助。（如果有人能想到一个更好的方法来填充`buttons[]`变量，那将非常感激。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T11:37:32.653

```
for(int x = 0; x < 16; x ++){
        buttons[x].setLayoutParams(lp);
    } 
```

上面的循环重复了 16 次，你只灌输了 15 个按钮，要么添加一个按钮，要么改变 x < 15。如果你改变 x< 15，那么也改变下面

按钮 [] 按钮 = 新按钮 [15];

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T12:58:50.877

我已经用这个修复了它：

```
LayoutParams lp = new LinearLayout.LayoutParams(widthOfButtons,LayoutParams.WRAP_CONTENT);

    for(int x = 0; x < 15; x ++){
        buttons[x].setLayoutParams(lp);
    } 
```

从. `LayoutParams`_`LinearLayout`

# android - 将应用程序上下文保存到 Android 中的静态变量是否安全？

> ID：10258507
> 
> 赞同：50
> 
> 时间：2012-04-21T11:29:40.613
> 
> 标签：android, process, static, android-context

我知道在 Android 上使用静态变量是非常危险的，尤其是当您将它们引用到活动时。但是，如果我有一个扩展 Application 的类（我们称这个类为“App”），那么引用这个类的实例是否安全？

如果是这样，任何其他类对应用程序上下文有任何类型的引用是否也是安全的？我的意思是，如果我在任何类型的类中都引用了应用程序上下文，会不会出现内存泄漏？

目的是无论我在哪个范围内，我总能获得对应用程序上下文的引用。我认为这是安全的，因为如果系统关闭应用程序，静态变量也会消失，直到下次应用程序再次启动，这将再次初始化静态变量。

另外，这并不重要，但是如果我使用多个进程，我会在每个进程上获得对 App 类的完全不同的引用吗？

作为代码示例，这就是我的想法：

```
public class App extends Application
{
    private static Context _appContext;

    @Override
    public void onCreate()
    {
        super.onCreate();
        _appContext = this;
    }

    public static Context getAppContext()
    {
        return _appContext;
    }
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-21T11:48:31.333

> 将应用程序上下文保存到静态变量是否安全？

目前，是的，它*似乎*是安全的，虽然我不会有`getAppContext()`return `Context`，而是 return `App`or `Application`。

话虽如此，核心 Android 团队一开始并没有这样设置，这表明可能存在我们不知道的隐藏问题，或者将来这种方法可能会带来问题。

俗话说，[YMMV](http://www.urbandictionary.com/define.php?term=YMMV)。:-)

* * *

**编辑**

> 如果是这样，任何其他类对应用程序上下文有任何类型的引用是否也是安全的？

我不知道您在这里所说的“安全”是什么意思。

> 但是如果我使用多个进程，我会在每个进程上获得对 App 类的完全不同的引用，对吧？

如果你使用多个进程，你应该被打上一条鳟鱼。但是，是的，您应该`App`为每个进程获得不同的实例。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-20T09:31:34.660

它应该是安全的。[API 文档](http://developer.android.com/reference/android/app/Application.html)中的以下注释也可能与您相关：

> 通常不需要子类化`Application`. 在大多数情况下，静态单例可以以更模块化的方式提供相同的功能。如果您的单例需要全局上下文（例如注册广播接收器），则可以为检索它的函数提供一个上下文，该上下文`Context.getApplicationContext()`在首次构建单例时在内部使用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-11-26T08:31:14.973

这样做是安全的，`Application#onCreate()`因为它`Application`是在任何活动之前创建的。如果您的应用程序在后台`Application`被终止，则将重新创建实例并在任何活动运行之前设置您的全局。

请务必注意，您永远不应该从活动中设置全局变量。如果这样做，您的应用程序可能会以下列方式失败：

1.  在活动 A 中设置全局
2.  导航到活动 B
3.  应用程序进入后台
4.  框架杀死应用程序和进程
5.  应用程序已恢复
6.  框架创建活动 B. **在您导航回它们之前不会创建后台堆栈中的活动，因此未设置全局！**
7.  活动 B 尝试使用全局，并且繁荣...`NullPointerException`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-26T10:20:52.460

当我整理令人讨厌的静态上下文时，Studio 弹出了有趣的评论：

“这是一个泄漏（也破坏了 Instant Run）。”

因此，随着 Instant Run 的推出，我们遇到了 Android 开发人员不打算保存静态变量的情况。虽然即时运行（尚未）在我的议程上，但知道有一个特定示例不仅是不好的做法，而且确定了错误的用例是很有用的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-10-23T15:21:03.877

这是`Context context;`在 android-studio 中创建时的警告：

> 不要将 Android 上下文类放在静态字段中；这是内存泄漏，也会破坏 Instant Run。
> 
> 静态字段会泄漏上下文。
> 
> 非静态内部类具有对其外部类的隐式引用。
> 
> 如果该外部类例如是 Fragment 或 Activity，则此引用意味着长时间运行的处理程序/加载程序/任务将持有对该 Activity 的引用，从而防止其被垃圾收集。同样，从这些运行时间较长的实例中直接对活动和片段的字段引用可能会导致泄漏。
> 
> ViewModel 类不应指向视图或非应用程序上下文。

# ruby-on-rails - 如何防止 PostgreSQL 全文搜索解析器将符号重写为空格？

> ID：10258508
> 
> 赞同：0
> 
> 时间：2012-04-21T11:29:40.313
> 
> 标签：ruby-on-rails, postgresql, full-text-search

我的问题是[PL/pgSQL](http://en.wikipedia.org/wiki/PL/pgSQL)解析器将 '#' 或 '+' 之类的符号视为空格符号（这没关系），因此像 'C++' 或 'C#' 或 'PL/SQL' 这样的查询被解析如下：

```
 asciiword | Word, all ASCII | C     | {english_stem}        | english_stem | {c}
 blank     | Space symbols   | #     | {thesaurus_en,simple} | simple       | {#} 
```

我正在尝试找到处理此类查询的最佳方法。我一直在尝试通过使用同义词词典来实现这一点，但它看起来并不可行。

我在想的是在写入数据库时​​将“C#”重写为“CSHARP”的东西（因为我猜“C#”将被索引为“C”）以及在搜索时会做同样的事情。

我可以在我的 Web 应用程序端做到这一点，但它似乎并不正确。

我将如何处理这个问题，或者我可以将哪些 PL/pgSQL 触发器用于我正在考虑的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:30:02.880

好吧，您可以编写自己的解析器（用 C 语言），但这可能比您想要的要多。

您可以执行以下操作：

```
to_tsvector('english', my_transformer(document_text)) 
...
to_tsquery('english', my_transformer(query_text)) 
```

您不需要转换实际的文字文档文本，只需转换 tsvector 索引和查询。您也可以在索引定义中执行此操作（但 my_transformer 必须是不可变函数）。

那么问题就变成了转换传入文本的最简单/最有效的方法是什么。如果您已经在使用 plperl/pltcl，那么您可能会做一些聪明的正则表达式替换。如果没有，请在 plpgsql 甚至 plsql 中尝试几个更简单的正则表达式替换。不过，这种事情总是有一些棘手的角落案例，因此请确保彻底测试您的替代品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-16T17:43:04.773

*（代表 OP 发布。）*

为了将来参考，这里有一个关于创建 tsearch 解析器的很好的指南：http: [//www.sai.msu.su/~megera/postgres/gist/tsearch/V2/docs/HOWTO-parser-tsearch2.html](http://www.sai.msu.su/~megera/postgres/gist/tsearch/V2/docs/HOWTO-parser-tsearch2.html)

无论如何，Richard 建议的解决方案工作得很好，并且需要更少的努力。

# python - 如何在脚本中使用 Google 应用程序专用密码？

> ID：10258509
> 
> 赞同：11
> 
> 时间：2012-04-21T11:29:53.807
> 
> 标签：python, bash, security, google-authentication

由于在 Google 上启用了 2 因素身份验证（又名 2 步验证），我的[Google 导出脚本](https://github.com/l0b0/export)不再起作用。计算机经过验证和信任，但不知何故脚本不是。实际上，每次运行 cron 作业时，我都会收到一个新的“Google 验证码”并且脚本失败。`wget`我认为使用or对此类脚本进行一劳永逸的身份验证应该是一件简单的事情`curl`，但是我找不到任何有关如何执行此操作的文档。

* * *

Google 身份验证方案经过多次迭代，我似乎无法再使用`curl`或登录`mechanicalsoup`。我尝试过使用类似的 URL `https://accounts.google.com/ServiceLogin?continue=https://calendar.google.com/calendar/exporticalzip&Email=username@gmail.com&Passwd=application-specific-password`，但我总是被重定向到登录页面，通常会显示“请使用您的帐户密码而不是应用程序专用密码”的消息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T05:57:00.597

您确定要在 shell 脚本中使用 2-factor auth 吗？如果是这样，您无需尝试将您的计算机或脚本设置为“受信任”。每次运行脚本时，您只需执行完整的 2 因素身份验证。

如果目标是跳过手动第二因素身份验证，我建议使用特定于应用程序的密码（正如其他答案已经建议的那样）。**假装您根本没有使用 2-factor auth并使用您的真实登录名，但将密码设置为在**[https://accounts.google.com/b/0/IssuedAuthSubTokens?hl=en](https://accounts.google.com/b/0/IssuedAuthSubTokens?hl=en)生成的密码（[https的子页面） ://www.google.com/settings/security](https://www.google.com/settings/security)）。

目的是将特定于应用程序的密码“名称”设置为对您有意义的值。例如，我有标记为“Pidgin at work”、“My Android Phone”、“Thunderbird Google Address Book Extension at Work”等的密码。您可以为“日历和阅读器导出脚本”设置一个密码。如果您认为此应用程序特定密码已泄露（“泄露”），只需点击同一页面上的“撤销”链接，然后为您的脚本生成一个新密码。

对于代码，只需使用与 Google 单因素身份验证一起使用的最新版本。**更新：**因为原始问题使用 URL`https://accounts.google.com/ServiceLogin`来启动会话登录，所以它实际上是在伪造浏览器登录。但是，Google 并未正式支持这一点，在我写这篇文章时，似乎使用应用程序特定密码进行正常登录最终会出现错误消息“请使用您的帐户密码而不是应用程序特定密码”。

关于 Google 2-factor auth 和“受信任的计算机”需要了解的一件事是，实际实施只是向您的浏览器添加了一个具有 30 天到期时间的永久 cookie。受信任的计算机并不意味着您的 IP 地址受信任或创建了其他一些神奇的连接。除非您的脚本从您选择的浏览器中捕获“受信任的计算机”cookie，否则您是否曾经将您的计算机标记为受信任并不重要。（Google 表单不应该说“记住这台计算机 30 天”，而是“信任这个浏览器和用户帐户组合 30 天（保存永久 cookie）”。但是，我想这被认为过于技术性......）

**更新：（**从我下面的评论中复制）唯一官方支持的方法（服务器到服务器应用程序）记录在[https://developers.google.com/accounts/docs/OAuth2ServiceAccount](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)。[它需要对请求进行 OAuth/JWT 编码并使用在https://code.google.com/apis/console](https://code.google.com/apis/console)创建的服务帐户私钥。作为替代方案，您可以使用 ClientLogin 身份验证（已弃用，尽力服务，直到 2015 年）。

如果您决定使用 OAuth，您可能需要查看[http://blog.yjl.im/2010/05/bash-oauth.html](http://blog.yjl.im/2010/05/bash-oauth.html)和[https://github.com/oxys-net/curl-oauth](https://github.com/oxys-net/curl-oauth)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-29T21:29:35.093

我的 python 脚本停止发送电子邮件，所以我生成了应用程序专用密码，将我的脚本实用程序 gmail 帐户（例如，myscriptutility@gmail.com）更改为该密码，然后通过以下方式成功使用该密码（例如“applicationpassw”） python 脚本片段（抱歉，没有完整的示例）。

```
email = SMTPHandler(mailhost=('smtp.gmail.com',587),
    fromaddr='anyaddress@mail.homeserver',
    toaddrs=['whoiwanttomailto@gmail.com'],
    subject= webSite + ' not working',
    credentials=('myscriptutility@gmail.com','applicationpassw'),
    secure=())
logger.addHandler(email) 
```

因此，至少在 Windows 10 上的 python 3.6.5 看来，所有需要做的就是更改为在帐户和应用程序中使用十六个字符的应用程序特定密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T11:04:28.177

使应用程序特定密码适用于我的脚本，您所做的就是创建密码，然后在您的脚本中输入您的谷歌帐户密码，而不是输入应用程序特定密码。

有关应用程序特定密码的更多信息，请参见此处：

[应用程序特定密码](http://support.google.com/accounts/bin/answer.py?hl=en&answer=185833)

希望这可以帮助 ！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T14:14:32.747

生成[应用程序专用密码](https://accounts.google.com/IssuedAuthSubTokens)。[用户文档](http://support.google.com/accounts/bin/answer.py?hl=en&answer=185833)，[开发者文档](http://support.google.com/a/bin/answer.py?hl=en&answer=1032419#api)。

# php - 将项目部署到网络的正确方法是什么

> ID：10258513
> 
> 赞同：4
> 
> 时间：2012-04-21T11:30:28.390
> 
> 标签：php, html, git, notepad++

我正在做一个小型网络项目，我正在努力做正确的事。我学会了如何使用 git/github，这样我就可以在同一代码上与多个用户一起工作（现在只有我在多台计算机上）。

**我的问题是 - 将文件上传到网络的正确方法是什么？**

我可以通过 file-zilla 复制粘贴整个文件夹，但这似乎不是正确的方法。有没有办法通过 git 部署最新版本？github？记事本++（我正在研究）还是aptana？

我从哪说起呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T12:12:13.970

您的里程和策略可能会因您的工作流程而异。我在下面描述的内容适用于我目前的公司，但请随意尝试并找到适合您的内容。

在我们的 Git 存储库中，我们有一个“主”分支。所有新开发以及主要错误修复都发生在“主”分支的分支中。当它们准备好时，它们将合并到 master 中。这里的想法是没有未完成的功能或故意错误的代码在 master 中（理论上......）。

当我们想要做一个新的“发布”——我们网站上的一个新版本的代码——我会联系其他开发人员并确保他们正在处理的应该完成的东西已经合并到 master 并推送到 GitHub回购。我将通过将 master 中的更改拉取并合并到我的本地 repo 中，运行任何必要的数据库更新脚本，然后在本地进行测试，以确保我的 repo 本地副本是最新的。如果有问题需要修复，我会自己修复或请负责的开发人员修复它。如果事情看起来不错，那么我将登录到我们的临时服务器（它实际上在我们的实时服务器上，但使用一个单独的数据库和一个不可公开访问的 URL），将代码从 GitHub 存储库拉到那里的存储库，更新数据库，并在那里再次测试。那样，

如果事情仍然看起来不错，那么我将在我的本地开发存储库中使用适用的标签（如`BETA-4`or `v1.8`）标记存储库中的相关提交并推送标签。然后我会登录直播服务器，*备份数据库，*从 GitHub 中拉取 master 分支，然后使用`git checkout`来签出我刚刚创建的标签。这就是诀窍；如果你有一个标签（不是`HEAD`）签出，那么 Git 会将仓库的状态保留到该标签指向的提交时的文件中，直到你签出另一个标签。然后我在实时服务器上运行更新脚本，然后就可以了。

Git 是一个强大的工具，所有试图告诉你它易于使用的人都是正确的骗子。如果你是新手，我强烈建议你买一本关于它的好书。地狱，我几乎每天都在使用它已经快两年了，有时它*仍然*让我感到惊讶。[O'Reilly 的书](http://shop.oreilly.com/product/9780596520137.do)一如既往地不错，而且我发现[SourceTree](http://sourcetreeapp.com/)是一个不错的 OS X GUI 应用程序（你当然应该学习使用 CLI 界面，特别是这样你就可以通过 SSH 登录远程服务器并进行拉取等操作，但是一个不错的 GUI 可以使诸如执行提交之类的任务变得更加愉快）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T11:34:15.077

那里有专业的部署工具。imo 最好的一个是`capistrano`如果您不与`ruby on rails`您另外需要一起开发`railsless-deploy`。

使用这样的系统，您可以轻松地将应用程序从 git 存储库部署到您有权访问的任何服务器。它需要一些配置，但你会得到它......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T12:06:50.790

您可以查看 html5boilerplate 构建脚本[http://html5boilerplate.com/docs/Build-script/](http://html5boilerplate.com/docs/Build-script/)。它做了很多事情，但这是对您问题的有价值的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T12:00:23.073

如果您对服务器具有 root 访问权限，则可以使用 svn 或 git 并将当前状态部署到您的在线项目

# mysql - 在 MySQL 中出现 ERROR 1701、ERROR 1452 和 ERROR 1305 错误 - 需要一些专业知识

> ID：10258515
> 
> 赞同：3
> 
> 时间：2012-04-21T11:31:09.550
> 
> 标签：mysql, sql, mysql-error-1452, mysql-error-1071

这是我第一次真正地用第三范式创建数据库。我成功地创建了 DDL 脚本（在我继续构建脚本之前，我已经将逻辑模型验证为 3NF），但是我遇到了很多我不确定修复的错误。对于这个特殊情况，我可能咬得比我能咀嚼的更多，但我不想放弃——这对我来说是一个很大的学习曲线，在一些帮助下，我可以克服这个并继续前进。

首先，这是我的 DDL 脚本：

```
-- This sql script creates the structure.
-- of the rugby club database.

DROP DATABASE IF EXISTS database_rugby;

CREATE DATABASE database_rugby;

USE database_rugby;

-- Create the "coach" table.
DROP TABLE IF EXISTS `database_rugby`.`coach` ;
CREATE  TABLE IF NOT EXISTS `database_rugby`.`coach` (
  `coachID` INT(5) NOT NULL ,
  `dateBeganCoaching` DATE NOT NULL ,
  `personID` INT(5) NOT NULL ,
  PRIMARY KEY (`coachID`))
ENGINE = InnoDB;

-- Create the "grade" table.
DROP TABLE IF EXISTS `database_rugby`.`grade` ;
CREATE  TABLE IF NOT EXISTS `database_rugby`.`grade` (
  `gradeID` INT(5) NOT NULL AUTO_INCREMENT ,
  `gradeName` VARCHAR(50) NOT NULL ,
  `minWeight` INT(3) NOT NULL ,
  `maxWeight` INT(3) NOT NULL ,
  `minAge` INT(3) NOT NULL ,
  `maxAge` INT(3) NOT NULL ,
  `ballSize` INT(1) NOT NULL ,
  PRIMARY KEY (`gradeID`) )
ENGINE = InnoDB;

-- Create the "coachQualification" table.
DROP TABLE IF EXISTS `database_rugby`.`coachQualification` ;

CREATE  TABLE IF NOT EXISTS `database_rugby`.`coachQualification` (
  `qualID` INT(5) NOT NULL AUTO_INCREMENT ,
  `qualName` CHAR(5) NOT NULL ,
  `gradeID` INT(5) NOT NULL ,
  PRIMARY KEY (`qualID`) ,
  INDEX `gradeID` (`gradeID` ASC) ,
  CONSTRAINT `coachQualification_ibfk_1`
    FOREIGN KEY (`gradeID`)
    REFERENCES `database_rugby`.`grade` (`gradeID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;

-- Create the "parent" table.
DROP TABLE IF EXISTS `database_rugby`.`parent` ;
CREATE  TABLE IF NOT EXISTS `database_rugby`.`parent` (
  `parentID` INT(5) NOT NULL ,
  `personID` INT(5) NOT NULL ,
  PRIMARY KEY (`parentID`))
ENGINE = InnoDB;

-- Create the "school" table.
DROP TABLE IF EXISTS `database_rugby`.`school` ;
CREATE  TABLE IF NOT EXISTS `database_rugby`.`school` (
  `schoolID` INT(5) NOT NULL AUTO_INCREMENT ,
  `schoolName` VARCHAR(100) NOT NULL ,
  PRIMARY KEY (`schoolID`))
ENGINE = InnoDB;

-- Create the "player" table.
--
-- Inherits fields from the "person"
-- and "school" tables.
DROP TABLE IF EXISTS `database_rugby`.`player` ;

CREATE  TABLE IF NOT EXISTS `database_rugby`.`player` (
  `playerID` INT(5) NOT NULL ,
  `personID` INT(5) NOT NULL ,
  `schoolID` INT(5) NOT NULL ,
  PRIMARY KEY (`playerID`) ,
  INDEX `schoolID` (`schoolID` ASC) ,
  CONSTRAINT `player_ibfk_1`
    FOREIGN KEY (`schoolID`)
    REFERENCES `database_rugby`.`school` (`schoolID` )
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;

-- Create the "person" table.
--
-- This table has one:one relationships
-- with the parent, coach and player 
-- tables.
DROP TABLE IF EXISTS `database_rugby`.`person` ;
CREATE  TABLE IF NOT EXISTS `database_rugby`.`person` (
  `personID` INT(5) NOT NULL AUTO_INCREMENT ,
  `firstName` VARCHAR(50) NOT NULL ,
  `lastName` VARCHAR(50) NOT NULL ,
  `dateOfBirth` DATE NOT NULL ,
  `streetAddress` VARCHAR(150) NOT NULL ,
  `suburbAddress` VARCHAR(150) NULL DEFAULT NULL ,
  `cityAddress` VARCHAR(150) NOT NULL ,
  `photo` BLOB NULL DEFAULT NULL ,
  `parent_parentID` INT(5) NOT NULL DEFAULT '0' ,
  `coach_coachID` INT(5) NOT NULL DEFAULT '0' ,
  `player_playerID` INT(5) NOT NULL DEFAULT '0' ,
  `parent_parentID1` INT(5) NOT NULL DEFAULT '0' ,
  `player_playerID1` INT(5) NOT NULL DEFAULT '0' ,
  `coach_coachID1` INT(5) NOT NULL DEFAULT '0' ,
  `coach_coachID2` INT(5) NOT NULL DEFAULT '0' ,
  `parent_parentID2` INT(5) NOT NULL DEFAULT '0' ,
  `player_playerID2` INT(5) NOT NULL DEFAULT '0' ,
  PRIMARY KEY (`personID`) ,
  INDEX `fk_person_coach1` (`coach_coachID2` ASC) ,
  INDEX `fk_person_parent1` (`parent_parentID2` ASC) ,
  INDEX `fk_person_player1` (`player_playerID2` ASC) ,
  CONSTRAINT `fk_person_coach1`
    FOREIGN KEY (`coach_coachID2` )
    REFERENCES `database_rugby`.`coach` (`coachID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_person_parent1`
    FOREIGN KEY (`parent_parentID2`)
    REFERENCES `database_rugby`.`parent` (`parentID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_person_player1`
    FOREIGN KEY (`player_playerID2`)
    REFERENCES `database_rugby`.`player` (`playerID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- Create the "homePhone" table.
DROP TABLE IF EXISTS `database_rugby`.`homePhone` ;
CREATE  TABLE IF NOT EXISTS `database_rugby`.`homePhone` (
  `homePhoneID` INT(5) NOT NULL AUTO_INCREMENT ,
  `homeNumber` CHAR(9) NOT NULL ,
  PRIMARY KEY (`homePhoneID`))
ENGINE = InnoDB;

-- Create the "mobilePhone" table.
DROP TABLE IF EXISTS `database_rugby`.`mobilePhone` ;

CREATE  TABLE IF NOT EXISTS `database_rugby`.`mobilePhone` (
  `mobilePhoneID` INT(5) NOT NULL AUTO_INCREMENT ,
  `mobileNumber` CHAR(10) NULL DEFAULT NULL ,
  PRIMARY KEY (`mobilePhoneID`))
ENGINE = InnoDB;

-- Create the "emailAddress" table.
DROP TABLE IF EXISTS `database_rugby`.`emailAddress` ;

CREATE  TABLE IF NOT EXISTS `database_rugby`.`emailAddress` (
  `emailAddressID` INT(5) NOT NULL AUTO_INCREMENT ,
  `emailAddress` CHAR(10) NULL DEFAULT NULL ,
  PRIMARY KEY (`emailAddressID`))
ENGINE = InnoDB;

-- Create the "Contact" table
--
-- This is a linking table 
-- that describes the many:many 
-- relationships between "person" 
-- and the "homePhone", "mobilePhone", 
-- and "emailAddress" tables.
DROP TABLE IF EXISTS `database_rugby`.`contact` ;
CREATE  TABLE IF NOT EXISTS `database_rugby`.`contact` (
  `personID` INT(5) NOT NULL ,
  `homePhoneID` INT(5) NOT NULL ,
  `mobilePhoneID` INT(5) NULL DEFAULT NULL ,
  `emailAddressID` INT(5) NULL DEFAULT NULL ,
  INDEX `personID` (`personID` ASC) ,
  INDEX `homePhoneID` (`homePhoneID` ASC) ,
  INDEX `mobilePhoneID` (`mobilePhoneID` ASC) ,
  INDEX `emailAddressID` (`emailAddressID` ASC) ,
  CONSTRAINT `contact_ibfk_1`
    FOREIGN KEY (`personID` )
    REFERENCES `database_rugby`.`person` (`personID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `contact_ibfk_2`
    FOREIGN KEY (`homePhoneID`)
    REFERENCES `database_rugby`.`homePhone` (`homePhoneID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `contact_ibfk_3`
    FOREIGN KEY (`mobilePhoneID`)
    REFERENCES `database_rugby`.`mobilePhone` (`mobilePhoneID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `contact_ibfk_4`
    FOREIGN KEY (`emailAddressID`)
    REFERENCES `database_rugby`.`emailAddress` (`emailAddressID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;

-- Create the "family" table.
--
-- This is a linking table 
-- that describes the many:many 
-- relationship between "parent" 
-- and "player" tables.
DROP TABLE IF EXISTS `database_rugby`.`family` ;
CREATE  TABLE IF NOT EXISTS `database_rugby`.`family` (
  `parentID` INT(5) NOT NULL ,
  `playerID` INT(5) NOT NULL ,
  `parent_parentID` INT(5) NOT NULL ,
  INDEX `playerID` (`playerID` ASC) ,
  INDEX `fk_family_parent1` (`parent_parentID` ASC) ,
  CONSTRAINT `family_ibfk_2`
    FOREIGN KEY (`playerID` )
    REFERENCES `database_rugby`.`player` (`playerID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_family_parent1`
    FOREIGN KEY (`parent_parentID`)
    REFERENCES `database_rugby`.`parent` (`parentID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- Create the "qualificationSet" table.
--
-- This is a linking table 
-- that describes the many:many 
-- relationship between "coach" 
-- and "coachQualification" tables.
DROP TABLE IF EXISTS `database_rugby`.`qualificationSet` ;
CREATE  TABLE IF NOT EXISTS `database_rugby`.`qualificationSet` (
  `coachID` INT(5) NOT NULL ,
  `qualID` INT(5) NOT NULL ,
  INDEX `coachID` (`coachID` ASC) ,
  INDEX `qualID` (`qualID` ASC) ,
  CONSTRAINT `qualificationSet_ibfk_1`
    FOREIGN KEY (`coachID`)
    REFERENCES `database_rugby`.`coach` (`coachID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `qualificationSet_ibfk_2`
    FOREIGN KEY (`qualID`)
    REFERENCES `database_rugby`.`coachQualification` (`qualID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;

-- Create the "team" table.
DROP TABLE IF EXISTS `database_rugby`.`team` ;
CREATE  TABLE IF NOT EXISTS `database_rugby`.`team` (
  `teamID` INT(5) NOT NULL AUTO_INCREMENT ,
  `teamName` VARCHAR(50) NOT NULL ,
  `teamYear` INT(2) NOT NULL ,
  `gradeID` INT(5) NOT NULL ,
  PRIMARY KEY (`teamID`) ,
  INDEX `gradeID` (`gradeID` ASC) ,
  CONSTRAINT `team_ibfk_1`
    FOREIGN KEY (`gradeID`)
    REFERENCES `database_rugby`.`grade` (`gradeID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;

-- Create the "teamAllocation" table
--
-- this is a linking table for a 
-- many:many relationship between
-- team and player tables.
DROP TABLE IF EXISTS `database_rugby`.`teamAllocation` ;

CREATE  TABLE IF NOT EXISTS `database_rugby`.`teamAllocation` (
  `teamID` INT(5) NOT NULL ,
  `playerID` INT(5) NOT NULL ,
  INDEX `teamID` (`teamID` ASC) ,
  INDEX `playerID` (`playerID` ASC) ,
  CONSTRAINT `teamallocation_ibfk_1`
    FOREIGN KEY (`teamID` )
    REFERENCES `database_rugby`.`team` (`teamID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `teamAllocation_ibfk_2`
    FOREIGN KEY (`playerID`)
    REFERENCES `database_rugby`.`player` (`playerID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;

-- Create the "teamCoachAllocation" table.
--
-- This is a linking table 
-- that describes the many:many 
-- relationship between "coach" 
-- and "team" tables.
DROP TABLE IF EXISTS `database_rugby`.`teamCoachAllocation` ;
CREATE TABLE `database_rugby`.`teamCoachAllocation` (
  `coachID` INT(5) NOT NULL ,
  `teamID` INT(5) NOT NULL ,
  INDEX `coachID` (`coachID` ASC) ,
  INDEX `teamID` (`teamID` ASC) ,
  CONSTRAINT `teamCoachAllocation_ibfk_1`
    FOREIGN KEY (`coachID`)
    REFERENCES `database_rugby`.`coach` (`coachID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `teamCoachAllocation_ibfk_2`
    FOREIGN KEY (`teamID`)
    REFERENCES `database_rugby`.`team` (`teamID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB; 
```

这是我的 DML 脚本（注意：到目前为止，该脚本仅尝试在“人”、“学校”和“玩家”详细信息中插入记录。如果我到目前为止遇到的问题得到解决，这可以帮助我稍后的..）：

```
-- database_data.sql.
-- This sql script inserts data into the 
-- rugby club database.

USE database_rugby;

TRUNCATE TABLE database_rugby.person;

-- Insert new persons which will be 
-- players.
INSERT INTO database_rugby.person (
firstName,
lastName,
dateOfBirth,
streetAddress,
suburbAddress,
cityAddress)
VALUES(
"Michael", 
"Peck", 
'2002-12-10',
"45 Skibo Street",
"Caversham", 
"Dunedin");

INSERT INTO database_rugby.person (
firstName,
lastName,
dateOfBirth,
streetAddress,
suburbAddress,
cityAddress)
VALUES(
"Matt", 
"Petersen", 
'2001-06-15',
"192 Bayview Road",
"South Dunedin", 
"Dunedin");

INSERT INTO database_rugby.person (
firstName,
lastName,
dateOfBirth,
streetAddress,
suburbAddress,
cityAddress)
VALUES(
"Christopher", 
"Petersen", 
'2003-02-19',
"192 Bayview Road",
"South Dunedin", 
"Dunedin");

INSERT INTO database_rugby.person (
firstName,
lastName,
dateOfBirth,
streetAddress,
suburbAddress,
cityAddress)
VALUES(
"Richard", 
"Michaels", 
'2002-04-08',
"15 Fitzroy Street",
"Caversham",  
"Dunedin");

INSERT INTO database_rugby.person (
firstName,
lastName,
dateOfBirth,
streetAddress,
suburbAddress,
cityAddress)
VALUES(
"Shaun", 
"Michaels", 
'2003-11-11',
"15 Fitzroy Street",
"Caversham",  
"Dunedin");

INSERT INTO database_rugby.person (
firstName,
lastName,
dateOfBirth,
streetAddress,
suburbAddress,
cityAddress)
VALUES(
"Harry", 
"Dackers", 
'2004-02-11',
"32 Peter Street",
"Caversham",  
"Dunedin");

INSERT INTO database_rugby.person (
firstName,
lastName,
dateOfBirth,
streetAddress,
suburbAddress,
cityAddress)
VALUES(
"Daniel", 
"Mitchell", 
'2002-05-19',
"112 South Road",
"Caversham",  
"Dunedin");

-- Insert new persons which will be 
-- parents.
INSERT INTO database_rugby.person (
firstName,
lastName,
dateOfBirth,
streetAddress,
suburbAddress,
cityAddress)
VALUES(
"Gregory", 
"Peck", 
'1971-07-22',
"123 Burns Street",
"South Dunedin", 
"Dunedin");

INSERT INTO database_rugby.person (
firstName,
lastName,
dateOfBirth,
streetAddress,
suburbAddress,
cityAddress)
VALUES(
"Laura", 
"Peck", 
'1979-09-08',
"123 Burns Street",
"South Dunedin", 
"Dunedin");

INSERT INTO database_rugby.person (
firstName,
lastName,
dateOfBirth,
streetAddress,
suburbAddress,
cityAddress)
VALUES(
"Martha", 
"Petersen", 
'1973-12-07',
"192 Bayview Road",
"South Dunedin", 
"Dunedin");

INSERT INTO database_rugby.person (
firstName,
lastName,
dateOfBirth,
streetAddress,
suburbAddress,
cityAddress)
VALUES(
"Chris", 
"Michaels", 
'1967-08-07',
"15 Fitzroy Street",
"Caversham",  
"Dunedin");

INSERT INTO database_rugby.person (
firstName,
lastName,
dateOfBirth,
streetAddress,
suburbAddress,
cityAddress)
VALUES(
"Nadine", 
"Michaels", 
'1973-10-19',
"15 Fitzroy Street",
"Caversham",  
"Dunedin");

INSERT INTO database_rugby.person (
firstName,
lastName,
dateOfBirth,
streetAddress,
suburbAddress,
cityAddress)
VALUES(
"Barry", 
"Dackers", 
'1965-02-11',
"32 Peter Street",
"Caversham",  
"Dunedin");

INSERT INTO database_rugby.person (
firstName,
lastName,
dateOfBirth,
streetAddress,
suburbAddress,
cityAddress)
VALUES(
"Kevin", 
"Mitchell", 
'1972-05-19',
"112 South Road",
"Caversham",  
"Dunedin");

INSERT INTO database_rugby.person (
firstName,
lastName,
dateOfBirth,
streetAddress,
suburbAddress,
cityAddress)
VALUES(
"Rebecca", 
"Mitchell", 
'1978-01-23',
"112 South Road",
"Caversham",  
"Dunedin");

-- Insert schools into school table.
TRUNCATE TABLE database_rugby.school;
INSERT INTO database_rugby.school(
schoolName)
VALUES(
"College Street School");

INSERT INTO database_rugby.school(
schoolName)
VALUES(
"Macandrew Intermediate School");

INSERT INTO database_rugby.school(
schoolName)
VALUES(
"Carlton Hill Primary");

INSERT INTO database_rugby.school(
schoolName)
VALUES(
"Caversham Primary School");

INSERT INTO database_rugby.school(
schoolName)
VALUES(
"Concord School");

-- Insert players into player table.
TRUNCATE TABLE database_rugby.player;
INSERT INTO database_rugby.player(
personID, 
schoolID)
VALUES(
    (SELECT personID FROM database_rugby.person 
    WHERE database_rugby.person(firstName) = "Michael" 
    AND database_rugby.person(lastName) = "Peck"), 
    (SELECT schoolID FROM database_rugby.school 
    WHERE database_rugby.school(schoolName) =  "College Street School"));

INSERT INTO database_rugby.player(
personID, 
schoolID)
VALUES(
    (SELECT personID FROM database_rugby.person 
    WHERE database_rugby.person(firstName) = "Matt" 
    AND database_rugby.person(lastName) = "Petersen"), 
    (SELECT schoolID FROM database_rugby.school 
    WHERE database_rugby.school(schoolName) =  "Macandrew Intermediate School"));

INSERT INTO database_rugby.player(
personID, 
schoolID)
VALUES(
    (SELECT personID FROM database_rugby.person 
    WHERE database_rugby.person(firstName) = "Christopher" 
    AND database_rugby.person(lastName) = "Petersen"), 
    (SELECT schoolID FROM database_rugby.school 
    WHERE database_rugby.school(schoolName) =  "College Street School"));

INSERT INTO database_rugby.player(
personID, 
schoolID)
VALUES(
    (SELECT personID FROM database_rugby.person 
    WHERE database_rugby.person(firstName) = "Richard" 
    AND database_rugby.person(lastName) = "Michaels"), 
    (SELECT schoolID FROM database_rugby.school 
    WHERE database_rugby.school(schoolName) =  "College Street School"));

INSERT INTO database_rugby.player(
personID, 
schoolID)
VALUES(
    (SELECT personID FROM database_rugby.person 
    WHERE database_rugby.person(firstName) = "Shaun" 
    AND database_rugby.person(lastName) = "Michaels"), 
    (SELECT schoolID FROM database_rugby.school 
    WHERE database_rugby.school(schoolName) =  "College Street School"));

INSERT INTO database_rugby.player(
personID, 
schoolID)
VALUES(
    (SELECT personID FROM database_rugby.person 
    WHERE database_rugby.person(firstName) = "Harry" 
    AND database_rugby.person(lastName) = "Dackers"), 
    (SELECT schoolID FROM database_rugby.school 
    WHERE database_rugby.school(schoolName) =  "Caversham Primary School"));

INSERT INTO database_rugby.player(
personID, 
schoolID)
VALUES(
    (SELECT personID FROM database_rugby.person 
    WHERE database_rugby.person(firstName) = "Daniel" 
    AND database_rugby.person(lastName) = "Mitchell"), 
    (SELECT schoolID FROM database_rugby.school 
    WHERE database_rugby.school(schoolName) =  "Caversham Primary School")); 
```

这是两个脚本生成的 MySQL 命令行界面的输出 - 将显示有关错误的更多信息：

```
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 82
Server version: 5.5.23 MySQL Community Server (GPL)

Copyright (c) 2000, 2011, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> source c:\scripts\database_schema.sql
Query OK, 16 rows affected (0.35 sec)

Query OK, 1 row affected (0.03 sec)

Database changed
Query OK, 0 rows affected, 1 warning (0.00 sec)

Query OK, 0 rows affected (0.06 sec)

Query OK, 0 rows affected, 1 warning (0.00 sec)

Query OK, 0 rows affected (0.06 sec)

Query OK, 0 rows affected, 1 warning (0.00 sec)

Query OK, 0 rows affected (0.04 sec)

Query OK, 0 rows affected, 1 warning (0.00 sec)

Query OK, 0 rows affected (0.07 sec)

Query OK, 0 rows affected, 1 warning (0.00 sec)

Query OK, 0 rows affected (0.06 sec)

Query OK, 0 rows affected, 1 warning (0.00 sec)

Query OK, 0 rows affected (0.06 sec)

Query OK, 0 rows affected, 1 warning (0.01 sec)

Query OK, 0 rows affected (0.09 sec)

Query OK, 0 rows affected, 1 warning (0.00 sec)

Query OK, 0 rows affected (0.06 sec)

Query OK, 0 rows affected, 1 warning (0.01 sec)

Query OK, 0 rows affected (0.07 sec)

Query OK, 0 rows affected, 1 warning (0.00 sec)

Query OK, 0 rows affected (0.07 sec)

Query OK, 0 rows affected, 1 warning (0.00 sec)

Query OK, 0 rows affected (0.10 sec)

Query OK, 0 rows affected, 1 warning (0.00 sec)

Query OK, 0 rows affected (0.06 sec)

Query OK, 0 rows affected, 1 warning (0.00 sec)

Query OK, 0 rows affected (0.08 sec)

Query OK, 0 rows affected, 1 warning (0.00 sec)

Query OK, 0 rows affected (0.06 sec)

Query OK, 0 rows affected, 1 warning (0.00 sec)

Query OK, 0 rows affected (0.10 sec)

Query OK, 0 rows affected, 1 warning (0.01 sec)

Query OK, 0 rows affected (0.07 sec)

mysql> source c:\scripts\database_data.sql
Database changed
ERROR 1701 (42000): Cannot truncate a table referenced in a foreign key constrai
nt (`database_rugby`.`contact`, CONSTRAINT `contact_ibfk_1` FOREIGN KEY (`person
ID`) REFERENCES `database_rugby`.`person` (`personID`))
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint f
ails (`database_rugby`.`person`, CONSTRAINT `fk_person_coach1` FOREIGN KEY (`coa
ch_coachID2`) REFERENCES `coach` (`coachID`) ON DELETE NO ACTION ON UPDATE NO AC
TION)
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint f
ails (`database_rugby`.`person`, CONSTRAINT `fk_person_coach1` FOREIGN KEY (`coa
ch_coachID2`) REFERENCES `coach` (`coachID`) ON DELETE NO ACTION ON UPDATE NO AC
TION)
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint f
ails (`database_rugby`.`person`, CONSTRAINT `fk_person_coach1` FOREIGN KEY (`coa
ch_coachID2`) REFERENCES `coach` (`coachID`) ON DELETE NO ACTION ON UPDATE NO AC
TION)
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint f
ails (`database_rugby`.`person`, CONSTRAINT `fk_person_coach1` FOREIGN KEY (`coa
ch_coachID2`) REFERENCES `coach` (`coachID`) ON DELETE NO ACTION ON UPDATE NO AC
TION)
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint f
ails (`database_rugby`.`person`, CONSTRAINT `fk_person_coach1` FOREIGN KEY (`coa
ch_coachID2`) REFERENCES `coach` (`coachID`) ON DELETE NO ACTION ON UPDATE NO AC
TION)
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint f
ails (`database_rugby`.`person`, CONSTRAINT `fk_person_coach1` FOREIGN KEY (`coa
ch_coachID2`) REFERENCES `coach` (`coachID`) ON DELETE NO ACTION ON UPDATE NO AC
TION)
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint f
ails (`database_rugby`.`person`, CONSTRAINT `fk_person_coach1` FOREIGN KEY (`coa
ch_coachID2`) REFERENCES `coach` (`coachID`) ON DELETE NO ACTION ON UPDATE NO AC
TION)
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint f
ails (`database_rugby`.`person`, CONSTRAINT `fk_person_coach1` FOREIGN KEY (`coa
ch_coachID2`) REFERENCES `coach` (`coachID`) ON DELETE NO ACTION ON UPDATE NO AC
TION)
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint f
ails (`database_rugby`.`person`, CONSTRAINT `fk_person_coach1` FOREIGN KEY (`coa
ch_coachID2`) REFERENCES `coach` (`coachID`) ON DELETE NO ACTION ON UPDATE NO AC
TION)
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint f
ails (`database_rugby`.`person`, CONSTRAINT `fk_person_coach1` FOREIGN KEY (`coa
ch_coachID2`) REFERENCES `coach` (`coachID`) ON DELETE NO ACTION ON UPDATE NO AC
TION)
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint f
ails (`database_rugby`.`person`, CONSTRAINT `fk_person_coach1` FOREIGN KEY (`coa
ch_coachID2`) REFERENCES `coach` (`coachID`) ON DELETE NO ACTION ON UPDATE NO AC
TION)
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint f
ails (`database_rugby`.`person`, CONSTRAINT `fk_person_coach1` FOREIGN KEY (`coa
ch_coachID2`) REFERENCES `coach` (`coachID`) ON DELETE NO ACTION ON UPDATE NO AC
TION)
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint f
ails (`database_rugby`.`person`, CONSTRAINT `fk_person_coach1` FOREIGN KEY (`coa
ch_coachID2`) REFERENCES `coach` (`coachID`) ON DELETE NO ACTION ON UPDATE NO AC
TION)
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint f
ails (`database_rugby`.`person`, CONSTRAINT `fk_person_coach1` FOREIGN KEY (`coa
ch_coachID2`) REFERENCES `coach` (`coachID`) ON DELETE NO ACTION ON UPDATE NO AC
TION)
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint f
ails (`database_rugby`.`person`, CONSTRAINT `fk_person_coach1` FOREIGN KEY (`coa
ch_coachID2`) REFERENCES `coach` (`coachID`) ON DELETE NO ACTION ON UPDATE NO AC
TION)
ERROR 1701 (42000): Cannot truncate a table referenced in a foreign key constrai
nt (`database_rugby`.`player`, CONSTRAINT `player_ibfk_1` FOREIGN KEY (`schoolID
`) REFERENCES `database_rugby`.`school` (`schoolID`))
Query OK, 1 row affected (0.01 sec)

Query OK, 1 row affected (0.01 sec)

Query OK, 1 row affected (0.01 sec)

Query OK, 1 row affected (0.00 sec)

Query OK, 1 row affected (0.00 sec)

ERROR 1701 (42000): Cannot truncate a table referenced in a foreign key constrai
nt (`database_rugby`.`person`, CONSTRAINT `fk_person_player1` FOREIGN KEY (`play
er_playerID2`) REFERENCES `database_rugby`.`player` (`playerID`))
ERROR 1305 (42000): FUNCTION database_rugby.person does not exist
ERROR 1305 (42000): FUNCTION database_rugby.person does not exist
ERROR 1305 (42000): FUNCTION database_rugby.person does not exist
ERROR 1305 (42000): FUNCTION database_rugby.person does not exist
ERROR 1305 (42000): FUNCTION database_rugby.person does not exist
ERROR 1305 (42000): FUNCTION database_rugby.person does not exist
ERROR 1305 (42000): FUNCTION database_rugby.person does not exist
mysql> 
```

这是逻辑模型（如果有人发现任何关系存在问题 - 特别是多：多关系，请告诉我）。

![在此处输入图像描述](../Images/aa2a9696d4ca3f74d602872bd56dc75b.png)

如果我提供了太多信息，我深表歉意，但我认为如果我提供了所有这些信息，它会让想要帮助我的人变得更容易。我花了 3 个小时对 DDL 脚本进行调整，但花了这么长时间后，我意识到我需要有更多经验的人来帮助我。我已经向具有数据库行业经验的人展示了这个逻辑模型，他们认为它符合 3NF。做概念模型和逻辑模型对我来说并不是那么糟糕，它试图将逻辑模型转换为工作脚本并成功插入数据（我想为每个表插入至少 10 条记录），这已成为最大的障碍。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T11:34:37.633

您还必须添加此语句 将其添加到转储文件的顶部

```
SET foreign_key_checks = 0; 
```

这将禁用外键检查，您可以轻松执行转储文件

并在转储文件底部添加另一条语句以启用外键检查

```
SET foreign_key_checks = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T11:09:20.173

`person`您在(超类) 和`player`,`parent`和(子类)之间的外键约束`coach`没有定义`1:1`关系。这是一个可能的解决方案：

```
-- Create the "person" table.
--
-- This table has one:one relationships
-- with the parent, coach and player 
-- tables.
DROP TABLE IF EXISTS `person` ;                --- no change
CREATE TABLE `person` (
  `personID` INT(5) NOT NULL AUTO_INCREMENT ,
  --- ...
  --- several columns omitted for clarity
  --- ...
  PRIMARY KEY (`personID`))
ENGINE = InnoDB; 
```

该`parent`表可以`personID`同时作为主键和外键`person`：

```
-- Create the "parent" table.
DROP TABLE IF EXISTS `parent` ;
CREATE TABLE `parent` (
  --- `parentID` INT(5) NOT NULL ,             --- removed

  `personID` INT(5) NOT NULL ,

  --- PRIMARY KEY (`parentID`, `personID`),    --- removed

  PRIMARY KEY (`personID`),                    --- this part only as PK
                                               --- which is also a FK
  FOREIGN KEY (`personID`)                     --- as previously (no change here)
    REFERENCES `person` (`personID`)
    ON DELETE CASCADE 
    ON UPDATE CASCADE)
ENGINE = InnoDB; 
```

同样对于`player`：

```
-- Create the "school" table.
-- omitted for clarity
--
--    
-- Create the "player" table.
--
-- Inherits fields from the "person"
-- and "school" tables.
DROP TABLE IF EXISTS `player` ;
CREATE TABLE `player` (
  --- `playerID` INT(5) NOT NULL ,             --- removed
  `personID` INT(5) NOT NULL ,
  `schoolID` INT(5) NOT NULL ,
  PRIMARY KEY (`personID`),                    --- Primary Key
  FOREIGN KEY (`personID`)                     --- that is also Foreign Key
    REFERENCES `person` (`personID`)
    ON DELETE CASCADE 
    ON UPDATE CASCADE, 
  FOREIGN KEY (`schoolID`)
    REFERENCES `school` (`schoolID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB; 
```

`coach`对桌子也应该这样做。

* * *

请注意，上述解决方案允许 a`person`既是 a`player`又是 a`parent`或既是 a`parent`又是 a `coach`。如果您想将超类 ( `person`) 表的一行限制为子类表中的一个，则必须采用稍微不同的方法。

# linux - Linux NASM - 重写存储在 .data 段中的字符 - 段错误

> ID：10258521
> 
> 赞同：1
> 
> 时间：2012-04-21T11:32:54.373
> 
> 标签：linux, assembly, segmentation-fault, nasm

可能是一个非常初学者的问题，但我真的很感兴趣如何让它发挥作用。

我有以下汇编代码（从[这里](http://www.safemode.org/files/zillion/shellcode/doc/Writing_shellcode.html)深受启发，rename() 示例）：

```
[SECTION .text]
global _start

_start:
    mov             esi, msg        ; saves pointer to string to ESI
    xor             eax, eax
    mov byte        [esi+6], al     ; terminates first string with NULL char
    mov byte        [esi+13], al    ; terminates second string with NULL char
    mov byte        al, 38          ; syscall number (38 = rename)
    lea             ebx, [esi]      ; put the adress of /tmp/a in EBX
    lea             ecx, [esi+7]    ; put the adress of /tmp/b in ECX
    int             0x80            ; syscall execution

    mov             al, 0x01        ; prepare to exit!
    xor             ebx, ebx
    int             0x80            ; exit!

[SECTION .data]
msg:            db '/tmp/a#/tmp/b#' 
```

让我解释一下：这个程序调用 syscall`rename`将文件重命名`/tmp/a`为`/tmp/b`.data 部分中的字符串包含源文件的名称和目标文件的名称。

因为我想避免 NULL，所以我决定使用 # 而不是 NULL，并在运行时更改它。但是，程序以 SEGFAULT 终止。重写 .data 段中的 # 字符似乎确实存在问题。我的问题是 - 我应该如何处理它并让它发挥作用？我知道这是一个初学者的问题，也许我错过了一些非常重要的东西。

感谢您的任何建议。

## 编辑 - 用于组装和链接的命令

这是针对 NASM 的：

```
nasm -f elf -o ThisWorks.o ThisWorks.asm 
```

这适用于链接器（请注意，我将其构建为 32 位，尽管我有 64 位 Phenom II）。

```
ld -melf_i386 -o ThisWorks.aout ThisWorks.o 
```

比我执行它：

```
./ThisWorks.aout 
```

结果是：

```
Segmentation fault 
```

## 拆卸

这是拆解`objdump -D ThisWorks.aout`

```
ThisWorks.aout:     file format elf32-i386

Disassembly of section .text:

08048080 <_start>:
 8048080:   be 9c 90 04 08          mov    $0x804909c,%esi
 8048085:   31 c0                   xor    %eax,%eax
 8048087:   88 46 06                mov    %al,0x6(%esi)
 804808a:   88 46 0d                mov    %al,0xd(%esi)
 804808d:   b0 26                   mov    $0x26,%al
 804808f:   8d 1e                   lea    (%esi),%ebx
 8048091:   8d 4e 07                lea    0x7(%esi),%ecx
 8048094:   cd 80                   int    $0x80
 8048096:   b0 01                   mov    $0x1,%al
 8048098:   31 db                   xor    %ebx,%ebx
 804809a:   cd 80                   int    $0x80

Disassembly of section .data:

0804909c <msg>:
 804909c:   2f                      das    
 804909d:   74 6d                   je     804910c <_end+0x60>
 804909f:   70 2f                   jo     80490d0 <_end+0x24>
 80490a1:   61                      popa   
 80490a2:   23 2f                   and    (%edi),%ebp
 80490a4:   74 6d                   je     8049113 <_end+0x67>
 80490a6:   70 2f                   jo     80490d7 <_end+0x2b>
 80490a8:   62 23                   bound  %esp,(%ebx) 
```

## 解决方案

调试显示，该程序运行正常，但在没有文件可重命名时陷入段错误。否则我的代码按预期工作。对此感到抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T20:39:15.683

在 strace 显示下运行你的问题：

```
execve("./a.out", ["./a.out"], [/* 67 vars */]) = 0
[ Process PID=7054 runs in 32 bit mode. ]
rename("/tmp/a", "/tmp/b")              = -1 ENOENT (No such file or directory)
syscall_4294967041(0, 0x80490a3, 0, 0x804909c, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0) = -1 (errno 38)
--- SIGSEGV (Segmentation fault) @ 0 (0) ---
+++ killed by SIGSEGV +++
Segmentation fault 
```

结论：

1.  您的问题与重写该部分无关`.data`- rename 系统调用按照您的预期执行。
2.  您的设置`exit`不正确。

    要修复它，请更改`mov al, 0x01`为`mov eax, 0x01`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T11:46:42.680

假设您正在编写 shellcode：您无法`.data`从 shellcode 访问段中的任何内容，因为您的 shellcode 将在被利用的软件的进程中执行，并且那里不会有数据段（或者更准确地说，只有数据段被利用的过程）。Shellcode 没有分段结构，它通常只是字节的线性缓冲区。在任何情况下，您都必须将数据放在 shellcode 的末尾。

# iphone - 将应用程序移至后台时音乐不会停止

> ID：10258523
> 
> 赞同：0
> 
> 时间：2012-04-21T11:33:07.773
> 
> 标签：iphone, actionscript-3, audio, air

我正在优化游戏，以便当有来电或由于任何其他原因将其移至后台时，它应该停止音乐、计时器并正确暂停。

它的效果很好，除了由于某种原因音乐不会停止播放，即使我发出了停止的命令。更奇怪的是，当游戏回到前台时，播放的是 2 首背景音乐而不是 1 首。

这是我的一些代码，没有什么太复杂或与众不同的地方：

```
 ...

NativeApplication.nativeApplication.systemIdleMode = SystemIdleMode.KEEP_AWAKE;
            NativeApplication.nativeApplication.addEventListener(Event.ACTIVATE, handleActivate);
            NativeApplication.nativeApplication.addEventListener(Event.DEACTIVATE, handleDeactivate);
...
private function handleActivate(event:Event):void
        {

            stage.frameRate = previousFrameRate;

//if the music was on when the game is moved to the background, then replay it when its moved back to the foreground
            if(musicOn) 
            {
                BGMusic.play();
            }

        }

        private function handleDeactivate(event:Event):void
        {
            BGMusic.stop();
            stage.frameRate = 0;
        } 
```

值得注意的是，如果我在游戏返回前台时不重播音乐（即当我没有在handleActivate 中使用BGMuusic.play() 时），则不会有任何音乐如预期的那样。只有当我停止音乐并稍后在移动到前台时恢复它时，背景音乐才不会停止并且我得到两个正在播放的曲目。

有任何想法吗？正如我所说，其他一切正常，游戏正确暂停。我正在 Flash builder Emulator 上对此进行测试，因为我没有必要的证书来直接在 iphone 上对其进行测试。所以也许这是模拟器本身而不是代码的问题。

提前致谢

**编辑：**我用 flash 和 adobe air 写这个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T13:27:21.987

好吧，那是我的愚蠢。一切正常我只是忘记在 if 语句中添加另一个条件。所以而不是：

```
 if(musicOn) 
            {
                BGMusic.play();
            } 
```

它应该是

```
 if(musicOn && !BGMusic.isPlaying())
            {
                BGMusic.play();
            } 
```

现在一切正常...我会将musicOn 的变量名称更改为更清晰的名称，例如musicButtonOn。

无论如何感谢您的帮助。如果您有任何建议或意见，请随时告诉我 =D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T11:37:31.130

```
- (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag {
      NSLog(@"Playing stoped");
      [player stop];
} 
```

# ruby - Clojure 与 Node.js 内存消耗

> ID：10258529
> 
> 赞同：2
> 
> 时间：2012-04-21T11:34:27.990
> 
> 标签：ruby, node.js, memory, resources, clojure

最近我偶然发现了很多 Node.js 和 Clojure 之间的基准测试，例如[this](http://dosync.posterous.com/22397098)和[this](http://dosync.posterous.com/clojure-nodejs-and-why-messaging-can-be-lame)和[this](https://stackoverflow.com/questions/6216888/is-nodejs-faster-than-clojure)。在我看来，与 Ruby 之类的语言相比，Node.js 和 Clojure 都差不多快（这意味着要快得多）。

问题是，Clojure 在 RAM 消耗方面与 Node.js 相比如何？假设我要编写一个简单的实时聊天应用程序。

如果我要比较 Rails 和 Node.js，我基本上可以预期 Node.js 比 Rails 快 100 倍，占用的内存少 10 倍……但是 Clojure 是如何适应这里的呢​​？

Clojure 在内存消耗方面如何比较？我可以期望它比 Node.js 占用更多的内存，因为它在 JVM 上运行吗？或者这只是一种不再真实的刻板印象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T12:28:06.233

对于现代硬件上的简单应用程序，Node.js 或 Clojure 都应该没有内存使用问题。

当然，正如 Niklas 指出的那样，这最终将取决于您使用的框架以及您的应用程序编写得有多好。

Clojure 有相当大的基本内存需求（因为 java 运行时环境/JVM 非常大），但我发现它的内存效率非常高——Clojure 对象只是底层的 Java 对象，所以可能不应该不要太令人惊讶。

还值得注意的是，直接测量 JVM 应用程序的内存使用情况通常会产生误导，因为 JVM 通常会预先分配比它需要的更多的内存，并且只会以惰性（根据需要）方式进行垃圾收集。因此，虽然表面上的总内存使用量看起来很高，但实际的工作集可能非常小（这是您真正关心的性能目的）。

# java - java中的protobuf是线程安全的吗？

> ID：10258534
> 
> 赞同：5
> 
> 时间：2012-04-21T11:35:19.520
> 
> 标签：java, thread-safety, protocol-buffers

我定义了以下 protobuf msg：

```
message Counts {
    repeated int32 counts = 1;
} 
```

它在线程之间`R`和`W`作为构建器共享：

```
private final Counts.Builder countsBuilder; 
```

线程`R`只会读取`countsBuilder`并且`W`只会写入`countsBuilder`. 共享构建器将通过网络被读取、写入和（在某些时候）构建和发送。

AFAIK，对消息的并发读取很好，但是开发人员必须在更高级别同步其他任何内容？那么，我实际上不能同时写入和读取共享构建器吗？

如果这本质上不是线程安全的，我正在考虑使用某种线程安全的`Collection<Integer>`，我将使用它来读取/写入，并将（在某些时候）在通过网络发送之前创建一个全新的消息。还是我错过了什么？

谢谢！

编辑 1：我正在使用 protobuf 2.4.1 和 java 6

编辑 2：一些术语和拼写修复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T18:50:53.920

*如果你同步你的读写，*你应该没问题：

```
synchronized (countsBuilder) {
   // modify countsBuilder
} 
```

但请记住，您还需要确保在构建消息时没有任何竞争条件；构建消息后，不允许写入线程进行任何写入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-08T06:39:39.473

根据[https://developers.google.com/protocol-buffers/docs/reference/cpp](https://developers.google.com/protocol-buffers/docs/reference/cpp)它在 C++ 中不是线程安全的。

而且也不在 java [https://developers.google.com/protocol-buffers/docs/reference/java-generated](https://developers.google.com/protocol-buffers/docs/reference/java-generated)

我最近遇到了这个问题，我发现了这个。这是它在 C++ 上所说的

> 关于线程安全的说明：
> 
> Protocol Buffer 库中的线程安全遵循一个简单的规则：除非另有明确说明，否则从多个线程同时使用一个对象总是安全的，只要该对象在所有线程中都声明为 const（或者，它仅用于如果它被声明为 const 是允许的）。但是，如果一个对象在一个线程中以一种如果它是 const 则不允许的方式被访问，那么同时在任何其他线程中访问该对象是不安全的。
> 
> 简而言之，对对象的只读访问可以同时在多个线程中进行，但写访问一次只能在单个线程中进行。

在java上说：

> 请注意，构建器不是线程安全的，因此只要多个不同的线程需要修改单个构建器的内容，就应该使用 Java 同步。

# cuda - CUDA：如何存储持久数据？

> ID：10258537
> 
> 赞同：2
> 
> 时间：2012-04-21T11:35:56.000
> 
> 标签：cuda

我想将背景图像数据存储在 CUDA 中的设备上。稍后，当我从视频源读取新场景时，我想将新场景作为前景图像发送到 GPU 并从背景图像中减去它。我不想为每个场景都将背景图像重新发送到 GPU。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T23:16:27.483

将背景图像存储在设备内存阵列中（即在 GPU 上）。然后，当您读取前景图像时`cudaMemcpy`，将其复制到另一个设备内存阵列。然后启动一个内核，将两个设备内存数组作为参数并执行图像减法。应该很简单。

假设您使用默认上下文创建并且这一切都在同一个 CPU 线程中运行，您不必担心执行任何特定的操作来保持您的 CUDA 上下文“完整​​”，正如 Bart 评论的那样。但是，如果您进行任何 CPU 多线程处理，则需要进行一些上下文管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T13:52:33.197

这是一个简单的例子..

```
int main(int argc, char **argv) {
    uint *hostBackground, *hostForeground; //new uint[]..
    uint *background, *foreground; 
```

首先初始化你的后台和前台数据..

```
 cudaMalloc(background, ..);
    cudaMalloc(foreground, ..); 
```

然后加载后台数据

```
 cudaMemCpy(background, hostBackground, ..); //copy to device.. 
```

然后读取前台数据

```
 while (applicationRuns) {
        readImage(hostForeground); //read image..
        cudaMemcpy(foreground, hostForeground, ..); //copy to device

        //operate on foreground..
        substruct_kernel<<<threads, blocks>>>(foreground, background, width, height);

        cudaMemcpy(hostForeground, foreground, ..); //copy to host

        //use hostForeground
    } 
```

释放他们

```
 cudaFree(foreground);
    cudaFree(background);
} 
```

这是一个简单的子结构内核..

```
__global__ void substruct_kernel(uint *foreground, uint *backgroung, int width, int height)
{
    int idx = threadIdx.x + threadDim.x * blockIdx.x;
    int idy = threadIdx.y + threadDim.y * blockIdx.y;

    if (idx < width && idy < height)
       foreground[idx + idy * width] -= background[idx + idy * width]; //clamp may be required..
} 
```

我确实建议使用库来进行这种简单的操作。Blas 库或 Thrust 库可能是选项。

# php - 将序列号等自定义属性添加到 order_item 和 quote_item

> ID：10258538
> 
> 赞同：1
> 
> 时间：2012-04-21T11:35:58.510
> 
> 标签：php, magento

我想为 magento 添加一个自定义属性，`order_item`并`quote_item`在订单中为我的序列号属性和其他自定义属性添加一个字段。

我正在离线销售平板电脑，但我使用 Magento 后端来管理所有库存和客户信息以及订单，平板电脑是在订阅基础上提供的，因此没有运输，因为客户在购买期间会在商店。

我想添加客户和平板电脑独有的自定义属性。

我可以为客户创建一个属性，但是如果他们订购了多个平板电脑怎么办，这在逻辑上意味着唯一的方法是将这些属性放在订单项目中。

我真的不知道该怎么办。

我希望有人可以将我指向扩展的 magento 销售模块并将我的自定义属性添加到`order_item`并显示在 magento 订单中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T00:54:59.060

首先，您需要添加/更改这两个表：

```
- sales_flat_order_item
- sales_flat_quote_item 
```

只需添加字段并根据需要命名（这将是您的新属性）

您需要编辑以使新属性在订单页面上可见的文件应该是这个：

```
app/design/adminhtml/default/default/template/sales/order/view/items/renderer/default.phtml 
```

和你的新属性：

```
<?php echo $_item->getMyCustomAttribute() ?> 
```

如果您想让该属性“以正确的方式”，则需要更多技巧。这是一个如何添加自定义类别属性的示例，同样适用于您的问题：

[http://inchoo.net/ecommerce/magento/how-to-add-new-custom-category-attribute-in-magento/](http://inchoo.net/ecommerce/magento/how-to-add-new-custom-category-attribute-in-magento/)

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T02:00:55.973

我会向一些更受欢迎的扩展提供商询问自定义报价。AheadWorks 很快就出现在我的脑海中……我说访问 Magento Connect 商店并浏览评价很高的扩展程序，您会看到少数公司在做很多成功的工作。

他们将能够通过整个系统“更正确地”处理、存储、跟踪和传达您想要的数据。

一旦我更好地量化了我想编程的类似情况，我将寻求有经验的模块构建者的帮助。一旦您开始尝试在 Zend MVC 中编写代码，Zend MVC 就是一碗可悲的意大利面！:D

# algorithm - 对于不完整的字符串，是否有任何修改过的最小编辑距离（Levenshteina 距离）？

> ID：10258539
> 
> 赞同：0
> 
> 时间：2012-04-21T11:36:19.347
> 
> 标签：algorithm, levenshtein-distance

我已经从 0 和 1 构建了序列。我想以某种方式测量它们与目标字符串的距离。但目标字符串不完整。

我拥有的数据示例，其中 x 是目标字符串，其中 [0] 表示至少出现一个`'0'`：

```
x =11[0]1111[0]1111111[0]1[0]`, the length of x is fixed and eaquel to length of y.

y1=11110111111000000101010110101010111

y2=01101000011100001101010101101010010
all y's have the same length 
```

很容易看出这`x`确实可以解释为一组字符串，但是这个集合可能非常大，也许我只需要从那个集合中采样并取最小编辑距离的平均值，但这又是一个太大的计算问题。

我试图弄清楚算法，但我被堆叠了，它的步骤如下所示：x - 目标字符串 - 模糊之一，

y - 第二个字符串 - 固定 Cx1, Cy1 - x 和 y 中的个数 Gx1, Gy1 - 向量列表，每个列表的长度等于给定序列中的组数，

Gx1[i] 第 i 个向量，

Gx1[i]=(第i组的第一个，第i组的长度)

如果 Gx1 和 Gy1 的长度相同，那么我们知道要从每个组中添加或删除多少个，但是有一个问题，因为我不知道简单的添加和删除是否会给出最小距离

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T13:46:18.500

令 (Q, Σ, δ, q [0] , F) 为目标自动机，它接受正则语言 L ⊆ Σ ^*，令 w ∈ Σ ^*为源字符串。您想计算 min [x ∈ L] d(x, w)，其中 d 表示 Levenshtein 距离。

我的方法是概括通常的动态程序。令 D 为由 Q × {0, ..., |w|} 索引的表。在计算结束时，D(q, i) 将是

最小[x : δ(q [0] , x) = q] d(x, w[0…i]),

其中 w[0…i] 表示 w 的长度-(i + 1) 前缀。换句话说，D(q, i) 是 w[0…i] 与使自动机处于状态 q 的字符串集之间的距离。总体答案是

min [q ∈ F] D(q, |w|),

或 w 与使自动机处于最终状态之一的字符串集之间的距离，即语言 L。

* * *

D 的第一列由每个状态 q ∈ Q 的条目 D(q, 0) 组成。因为对于每个字符串 x ∈ Σ ^*它都认为 d(x, ε) = |x|，所以条目 D(q, 0) 是由转移函数 δ 定义的图中从 q [0]到 q的最短路径的长度。[通过从 q 0]运行“Dijkstra 算法”来计算这些条目（实际上只是广度优先搜索，因为边长都是 1）。

D 的后续列是根据前一列计算的。首先通过最小化几种可能性来计算辅助量 D'(q, i)。

**精确匹配**对于每个状态 r ∈ Q 使得 δ(r, w[i]) = q，包括 D(r, i - 1)。

**删除**包括 D(q, i - 1) + 1。

**代入**对于每个状态 r ∈ Q 和每个字母 a ∈ Σ ∖ {w[i]} 使得 δ(r, a) = q，包括 D(r, i - 1) + 1。

请注意，我省略了**Insertion**。与第一列一样，这是因为可能需要在此处插入*许多*字母。要从 D'(i, q)s 计算 D(i, q)s，请在具有顶点 Q ∪ {s} 的隐式图上运行 Dijkstra，并且对于每个 q ∈ Q，边长为 D'(i, q) 从超级源 s 到 q，并且对于每个 q ∈ Q 和 a ∈ Σ，从 q 到 δ(q, a) 的边长度为 1。令 D(i, q) 为最终距离。

* * *

我相信这个算法，如果实现得好（使用专门支持具有单位长度的 Dijkstra 的堆），运行时间为 O(|Q||w||Σ|)，对于小字母 Σ，它与通常的Levenshtein DP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T13:04:59.180

我建议您为此使用[动态编程](http://en.wikipedia.org/wiki/Dynamic_programming)。dp 是二维的：xi - 您所在的 xpattern 字符串中的索引和 yi - 您所在的 y 字符串中的索引，每个子问题的值是子字符串 x[xi..x. size-1] 和 y[yi...y.size-1]。

以下是在解释固定 y 字符串时如何找到给定的 ax 模式之间的最小编辑距离。我将假设 x 模式中的符号 @ 表示任何正数的零。此外，我将使用一些全局变量来使代码更易于阅读。

```
#include <iostream>
#include <string>
using namespace std;

const int max_len = 1000;
const int NO_SOLUTION = -2;
int dp[max_len][max_len];

string x; // pattern;
string y; // to compute minimum edit distance to
int solve(int xi /* index in x */, int yi /* index in y */) {
  if (yi + 1 == y.size()) {
    if (xi + 1 != x.size()) {
      return dp[xi][yi] = NO_SOLUTION;
    } else {
      if (x[xi] == y[yi] || (y[yi] == '0' && x[xi] == '@')) {
        return dp[xi][yi] = 0;
      } else {
        return dp[xi][yi] = 1; //  need to change the character 
      }
    }
  }
  if (xi + 1 == x.size()) {
    if (x[xi] != '@') {
      return dp[xi][yi] = NO_SOLUTION;
    }
    int number_of_ones = 0;
    for (int j = yi; j < y.size(); ++j) {
      if (y[j] == '1') {
        number_of_ones++;
      }
    }
    return dp[xi][yi] = number_of_ones;
  }
  int best = NO_SOLUTION;
  if (x[xi] != '@') {
    int temp = ((dp[xi + 1][yi + 1] == -1)?solve(xi + 1, yi +1):dp[xi + 1][yi +1]);
    if (temp != NO_SOLUTION && x[xi] != y[yi]) {
      temp++;
    }
    best = temp;
  } else {
    int temp = ((dp[xi + 1][yi + 1] == -1)?solve(xi + 1, yi +1):dp[xi + 1][yi +1]);
    if (temp != NO_SOLUTION) {
      if (y[yi] != '0') {
        temp++;
      }
      best = temp;
    }

    int edit_distance = 0; // number of '1' covered by the '@'

    // Here i represents the number of chars covered by the '@'
    for (int i = 1; i < y.size(); ++i) {
      if (yi + i >= y.size()) {
        break;
      }
      int temp = ((dp[xi][yi + i] == -1)?solve(xi, yi + i):dp[xi][yi + i]);
      if (temp == NO_SOLUTION) {
        continue;
      }
      if (y[yi] != '0') {
        edit_distance++;
      }
      temp += edit_distance;
      if (best == NO_SOLUTION || temp < best) {
        best = temp;
      }
    }
  }
  return best;
}

int main() {
  memset(dp, -1, sizeof(dp));
  cin >> x >> y;
  cout << "Minimum possible edit distance is: " << solve(0,0) << endl;
  return 0;
} 
```

希望这可以帮助。

# php - Facebook 应用重定向

> ID：10258551
> 
> 赞同：0
> 
> 时间：2012-04-21T11:38:00.297
> 
> 标签：php, facebook, api

我是 Facebook API 的新手。阅读开发者页面后，有 3 种类型的应用可供选择。我正在尝试创建与 Dailymotion 应用程序非常相似的东西，而当用户在 dailymotion 上观看视频时，它会自动发布在他们的墙上。

我知道身份验证的基础知识，我想知道的是如何开始做这个应用程序。我找到了dailymotion应用程序，每当我尝试访问它时，它都会重定向到他们的主页（顺便说一句，它是如何完成的？点击“转到应用程序”按钮会转到他们的网站）。

这是应用程序： http: [//www.facebook.com/apps/application.php?id= 96937694899&ref=ts](http://www.facebook.com/apps/application.php?id=96937694899&ref=ts)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T17:23:53.887

我刚刚发现如何做到这一点。在 facebook 应用程序页面中，您必须取消选中以下所有内容：“选择您的应用程序如何与 Facebook 集成” - 这就是我设置的方式，当您单击应用程序时，它只会重定向到主页而不是 iframe FB 应用程序。

关于“ *_*观看Dailymotion上的视频”。如 Dhiraj 所述，这些是使用开放图的动作和对象。

# glassfish - 连接断开原因

> ID：10258556
> 
> 赞同：0
> 
> 时间：2012-04-21T11:38:48.427
> 
> 标签：glassfish, connection-pooling, h2

我正在使用 Apache JMeter 测试我的 Spring MVC Web 应用程序，但是我在连接 h2db 池时遇到了一些问题。

我的测试包括 5 个线程和 100 个循环。我在 glassfish 服务器上测试注册流程。首先作为我使用的数据库连接类`org.springframework.jdbc.datasource.DriverManagerDataSource`，但我的连接在测试过程中被暂停。现在，我使用带有以下参数的 DBCP：

```
<property name="initialSize" value="1"/>
<property name="maxActive" value="100"/>
<property name="maxIdle" value="10"/> 
```

不幸的是，测试仍然暂停。我越来越：

```
 org.h2.jdbc.JdbcSQLException: Broken connection: "session closed"
Connection is broken: "session closed" [90067-164]
  at org.h2.message.DbException.getJdbcSQLException(DbException.java:329)
  at org.h2.message.DbException.get(DbException.java:169)
  at org.h2.message.DbException.get(DbException.java:146)
  at org.h2.engine.SessionRemote.checkClosed(SessionRemote.java:500)
  at org.h2.engine.SessionRemote.removeServer(SessionRemote.java:431)
  at org.h2.command.CommandRemote.prepare(CommandRemote.java:80)
  at org.h2.command.CommandRemote.<init>(CommandRemote.java:46)
  at org.h2.engine.SessionRemote.prepareCommand(SessionRemote.java:437)
  at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1125)
  at org.h2.jdbc.JdbcConnection.rollbackInternal(JdbcConnection.java:1427)
  at org.h2.jdbc.JdbcConnection.rollback(JdbcConnection.java:467)
  at org.apache.commons.dbcp.DelegatingConnection.rollback(DelegatingConnection.java:368)
  at org.apache.commons.dbcp.PoolingDataSource$PoolGuardConnectionWrapper.rollback(PoolingDataSource.java:323)
  at org.hibernate.transaction.JDBCTransaction.rollbackAndResetAutoCommit(JDBCTransaction.java:213)
  at org.hibernate.transaction.JDBCTransaction.rollback(JDBCTransaction.java:192)
  at org.springframework.orm.hibernate3.HibernateTransactionManager.doRollback(HibernateTransactionManager.java:597)
  at org.springframework.transaction.support.AbstractPlatformTransactionManager.processRollback(AbstractPlatformTransactionManager.java:845)
  at org.springframework.transaction.support.AbstractPlatformTransactionManager.rollback(AbstractPlatformTransactionManager.java:822)
  at org.springframework.transaction.interceptor.TransactionAspectSupport.completeTransactionAfterThrowing(TransactionAspectSupport.java:411)
  at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:114)
  at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
  at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
  at $Proxy137.save(Unknown Source)
  at com.car.rental.controllers.user.RegisterFormController.processSubmit(RegisterFormController.java:95)
  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
  at java.lang.reflect.Method.invoke(Method.java:597)
  at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
  at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
  at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
  at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
  at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
  at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
  at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
  at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
  at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
  at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
  at javax.servlet.http.HttpServlet.service(HttpServlet.java:754)
  at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
  at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
  at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
  at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
  at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
  at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
  at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
  at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
  at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
  at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
  at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
  at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
  at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
  at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
  at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
  at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:330)
  at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
  at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:174)
  at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
  at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
  at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
  at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
  at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
  at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
  at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
  at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
  at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
  at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
  at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
  at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
  at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
  at java.lang.Thread.run(Thread.java:662) 
```

说明事务回滚存在一些问题。我的注册表单参数包含一个图像文件 (34,7 kB)。在性能测试期间不应该使用这些文件吗？

有人知道原因或解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T14:33:56.387

这似乎是数据库系统错误/错误。当我使用 MySQL 启动同一个应用程序时，一切正常。

# android - 是否可以在启动器中的图标下方有一个标题为“X”且标题为“Y”的应用程序？

> ID：10258563
> 
> 赞同：0
> 
> 时间：2012-04-21T11:39:45.963
> 
> 标签：android, icons, label

我有一个名字很长的安卓应用。此名称在启动器中的应用程序图标下显示时是“压缩的”（在 2.2 到 4.0 上测试）。这既丑陋又愚蠢（你看不到实际的应用程序名称）。

我想更改此图标标签而不影响在 App Manager 中可以看到的名称。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T11:45:18.947

当然。启动器图标的标题是由[`android:label`](http://developer.android.com/guide/topics/manifest/activity-element.html#label)任何`<activity>`有魔法`<intent-filter>`出现在`LAUNCHER`. 默认情况下，它设置为与用于 相同的字符串资源 ( `@string/app_name`) `<application>` `android:label`，但您可以将`<activity>`点指向不同的字符串资源。

# android - Android ADT Eclipse 布局编辑器提供 StackOverflowErrors

> ID：10258566
> 
> 赞同：1
> 
> 时间：2012-04-21T11:40:10.490
> 
> 标签：android, android-layout

布局编辑器给了我 StackOverflowErrors 要求我每次加载布局 XML 时退出 Eclipse。

这显然是一个错误，但有谁知道解决方法，所以我知道不该做什么？不幸的是，无论我打开什么布局，它都会发生。

我正在使用带有 ADT v18 的 Indigo

```
java.lang.StackOverflowError
    at java.util.SubList$1.<init>(AbstractList.java:688)
    at java.util.SubList.listIterator(AbstractList.java:687)
    at java.util.AbstractList.listIterator(AbstractList.java:284)
    at java.util.SubList.iterator(AbstractList.java:678)
    at java.util.AbstractCollection.toArray(AbstractCollection.java:162)
    at java.util.regex.Pattern.split(Pattern.java:1027)
    at java.lang.String.split(String.java:2292)
    at java.lang.String.split(String.java:2334)
    at com.android.ide.common.resources.ResourceResolver.findResValue(ResourceResolver.java:206)
    at com.android.ide.common.resources.ResourceResolver.resolveResValue(ResourceResolver.java:325)
    at com.android.ide.common.resources.ResourceResolver.resolveResValue(ResourceResolver.java:333)
    at com.android.ide.common.resources.ResourceResolver.resolveResValue(ResourceResolver.java:333)
    at com.android.ide.common.resources.ResourceResolver.resolveResValue(ResourceResolver.java:333)
    at com.android.ide.common.resources.ResourceResolver.resolveResValue(ResourceResolver.java:333) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T04:20:38.187

这里有一个问题报告 [http://code.google.com/p/android/issues/detail?id=24317](http://code.google.com/p/android/issues/detail?id=24317)

这似乎是资源引用的问题。到目前为止没有找到解决方案，但这提醒我在更改应用程序的主题后发生了问题。所以我把它改回来了，现在没事了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T21:31:03.270

我在使用 actionbarsherlock 构建 4.0.3 时遇到了这个问题。在我的 USB SSD 与 Eclipse 打开断开连接后，每次我尝试在我的项目中打开任何 xml 布局时都会出现堆栈溢出。最初，我可以通过将构建目标更改回 2.3.3 来解决它，最终发现删除 actionbarsherlock 应用程序主题停止了崩溃。我发现解决方法是删除 actionbarsherlock 库并导入新版本。这完全解决了这个问题。

# java - Java - 不寻常的 GridLayout 行为

> ID：10258570
> 
> 赞同：1
> 
> 时间：2012-04-21T11:40:24.390
> 
> 标签：java, swing, jbutton, jlabel, grid-layout

只是在玩 Swing，想知道为什么当 GridLayout 定义为 10 行和 10 列时，下面的代码构造了一个似乎有 3 列的布局？

任何人都可以解释这种不寻常的行为以及提供的代码中导致这种情况发生的原因吗？

```
public class MyGrid {

    public static void main (String[] args) {
        JFrame frame = new JFrame();
        Container container = frame.getContentPane();
        container.setLayout(new GridLayout(10,10));
        for (int i = 0; i < 5; i++) {
            for (int j = 0; j < 5; j++) {
                if (i>=j) {
                    container.add(new JButton("X"));
                } else {
                    container.add(new JLabel("Y"));
                }
            }
        }
        frame.setSize(500,500);
        frame.setVisible(true);
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T11:53:00.030

请参阅类 javadoc `GridLayout`：

> 当行数和列数都已通过构造函数或 setRows 和 setColumns 方法设置为非零值时，指定的列数将被忽略。相反，列数由指定的行数和布局中的组件总数确定。因此，例如，如果指定了三行两列，并且向布局中添加了九个组件，它们将显示为三行三列。仅当行数设置为零时，指定列数才会影响布局。

如果您使用此代码

```
public class MyGrid {

  public static void main (String[] args) {
    JFrame frame = new JFrame();
    Container container = frame.getContentPane();
    container.setLayout(new GridLayout(10,10));
    for ( int i =0; i < 100; i++ ){
      container.add( new JLabel( ""+i ) );
    }
    frame.setSize(500,500);
    frame.setVisible(true);
  }

} 
```

你会看到 10 行和 10 列。例如，如果`i < 50`在 for 循环中使用，列数会发生变化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T11:52:51.243

```
import java.awt.*;
import javax.swing.*;

public class MyGrid {

    public static void main (String[] args) {
        JFrame frame = new JFrame();
        Container container = frame.getContentPane();
        container.setPreferredSize(new Dimension(500,500));
        container.setLayout(new GridLayout(10,10));
        for (int i = 0; i < 10; i++) {
            for (int j = 0; j < 10; j++) {
                if (i>=j) {
                    container.add(new JButton("X"));
                } else {
                    container.add(new JLabel("Y"));
                }
            }
        }
        //frame.setSize(500,500);
        frame.pack();
        frame.setVisible(true);
    }

} 
```

最初的代码是将 25 个组件放入为 100 个设计的容器中。预计它看起来很奇怪。

# windows - 升级到 django 1.4 后，Eclipse 中的 Django 应用程序将无法运行

> ID：10258571
> 
> 赞同：6
> 
> 时间：2012-04-21T11:40:33.430
> 
> 标签：windows, django, eclipse, pydev

升级到 Django 1.4 后，我现在收到以下错误消息：

```
raise ImportError("Could not import settings '%s' (Is it on sys.path?): %s" % (self.SETTINGS_MODULE, e))
ImportError: Could not import settings 'settings.py' (Is it on sys.path?): No module named py 
```

我读到它可能与 pydev 2.4 有关，例如：[here](https://stackoverflow.com/questions/9966287/pydev-error-while-creating-new-django-project)，所以我将 pydev 升级到了最新版本 2.5。我正在使用日食靛蓝。

我开始查看运行配置，注意到 django 1.3 egg 仍然被引用。所以我去了windows/preferences/pydev/interpreter-python，系统PYTHON路径中引用了1.3 egg。

为了尝试纠正这个问题，我删除了现有的 python 解释器，并重新添加了一个新解释器。我的 python 是从 venv 运行的，所以我添加了这个。出现错误：

![错误信息](../Images/307e70f28e709ed8b540a479118110b9.png)

我不认为这是相关的，但我可以看到 /venv/lib 已出现在 System PYTHONPATH 列表中，而在 Windows 中，该文件夹称为 /venv/Lib，所以我也添加了它。仍然没有包含新的 django egg，所以我在“库”窗口下手动添加了它。

但是，我仍然收到错误消息。

该应用程序从命令行运行良好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T01:40:46.587

经过几个小时尝试不同的事情后想通了。

我使用 pydev 2.5 创建了一个新的 Django 项目，只是为了看看会发生什么，我注意到“django 设置模块”条目（见下文）是*appname.settings*。以前我放了'settings.py'。我完全删除了该条目，从而解决了第一个问题。

![在此处输入图像描述](../Images/15dc0fcbaf5ba81ed222e8c135b2f705.png)

在此之后，我收到“找不到模块*应用*程序名称”错误，因此我尝试将一个空的 __init__.py 文件放在我的应用程序的根目录中，这似乎有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T11:09:38.910

在 virtualenv 中，这通常是您在安装过程中忘记从基本 python 安装添加 /Lib 的情况（因此，在 PYTHONPATH 中搜索时，找不到诸如“threading.py”或“traceback.py”之类的东西'， ETC。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T04:30:42.623

我通过添加以下内容解决了这个问题`manage.py`：

```
import os

os.environ['DJANGO_SETTINGS_MODULE'] = '<django_app_folder>.settings'
os.environ['SERVER_NAME'] = '<name_of_server>' 
```

`<django_app_folder>`是包含该`settings.py`文件的文件夹的名称。

`<name_of_server>`需要在那里，但我发现它的设置并不重要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T16:54:30.903

我有这个问题。我的项目没有 PyDev - Django 属性，所以这里的其他解决方案不起作用。我认为这是因为我最初没有将它创建为 Django 项目。相反，有效的是：

1.  右键单击项目 > 属性 > PyDev PYTHONPATH > 字符串替换变量。
2.  添加一个名为 DJANGO_SETTINGS_MODULE 的变量它的值应该是 yourapp.settings （或者如果它已经存在则编辑它）

# forms - 什么是基于表单的应用程序？

> ID：10258575
> 
> 赞同：1
> 
> 时间：2012-04-21T11:41:12.870
> 
> 标签：forms, jsf, web-applications

应用程序“基于表单”是什么意思？我正在阅读 JSF 规范和出现的术语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T13:29:23.537

基于表单的应用程序，意味着对于每个表单，都有一个后端 bean（java 类）来处理对类的调用。例如，您将有一个登录表单 (login.xhtml)，并且您将在 LoginBean.java 中显示表单中所需值的所有 getter 和 setter

**仅**针对此表单的所有操作（例如从 db 中检索数据）都将在一个`postconstruct`方法中完成。

所以如果登录有这样的用户名和密码：

```
<h:inputtext name="name" value="#{loginBean.name}" />

<h:inputtext name="password" value="#{loginBean.password}" /> 
```

LoginBean.java 将看起来：

```
public class LoginBean{
    String name;
    String password;

    public getName(){return name;}
    public getPassword(){return password;}

    public setName(String name){
       this.name = name;
}
   public setPassword(String password){
       this.password = password;
}
   @PostContruct
   public void init(){
      this.name = ... //get the name from db
   }
} 
```

# java - Java中超过7F的十六进制转换成String

> ID：10258576
> 
> 赞同：3
> 
> 时间：2012-04-21T11:41:16.310
> 
> 标签：java, string, hex, string-conversion

我需要在我的字符串中附加一些十六进制字符。我正在尝试这个：

```
content += Character.toString((char) Integer.parseInt(Integer.toHexString(originalSize).toString(), 16)); 
```

它正在工作，但是当`originalSize`超过 127（十六进制为 7F）时，它会返回两个十六进制值。

例如，这样做：

```
content += Character.toString((char) Integer.parseInt(Integer.toHexString(176).toString(), 16)); 
```

结果是：`(content hex numbers) C0 B0`

B0 是十六进制的 176，但我不知道如何删除 C0。请问有什么建议吗？谢谢！

**编辑**：

我想通过低功耗蓝牙向设备发送字符串。我有一个这样的字符串：

“ABCABC”。十六进制是`41 42 43 41 42 43`.

现在，我想添加这个字符串的格式（因为设备正在等待它），所以我在末尾添加它：`41 42 43 41 42 43 7E 06 02`，其中：

*   `7E`: 格式的开始
*   `06:`字符数
*   `02`：制造商给出的具体格式。

我有主字符串，我正在手动添加这三个十六进制字符。

**解决方案：**

基于 Devon_C_Miller 的回答，我找到了自己的解决方案：

```
contentFormated = new byte[originalSize+3];

for(int i=0;i<originalSize;i++){
    contentFormated[i] = content.getBytes()[i];
}

contentFormated[originalSize] = 0x7E;
contentFormated[originalSize+1] = (byte) 0xB0;
contentFormated[originalSize+2] = 0x02; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T12:01:41.667

听起来您想要一个字节数组而不是字符串：

```
byte[] content = {0x42, 0x43, 0x41, 0x42, 0x43, 0x7E, 0x06, 0x02}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T11:57:11.777

在这里您可以忘记十六进制表示法，因为转换是来回的。

如果您真的是指字符 0xB0（十六进制）或其他表示法 176 十进制，您可以这样做：

```
int c = 176;
content += Character.toChars(c); 
```

由于字符串是用 Unicode 编码的，因此可能会导致其他字节。如评论中所述，如果您想要字节值，请使用 byte[] 或更好的[ByteArrayOutputStream](http://docs.oracle.com/javase/7/docs/api/java/io/ByteArrayOutputStream.html)，最后使用`write(176)`and `toByteArray`。

* * *

***解释***

在 ASCII 范围 0-127 Character.toChars 中给出一个字符，以 UTF-8 表示，一个字节。

在 ISO-8859-* 范围 160-255 中也是一个字符，一个字节。在 128-159 范围内，大部分是 UTF-8 控制字符，例如 ASCII 0-32。

但有些值用于 UTF-8 多字节编码。较高的值 256-... 可能会给出一个字符（16 位）或几个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T12:23:32.680

```
hexString = String.format ("%x", 176); 
```

是另一种选择。

# mysql - Hibernate：ORDER BY 子句中的 OR

> ID：10258577
> 
> 赞同：2
> 
> 时间：2012-04-21T11:41:19.913
> 
> 标签：mysql, hibernate, jakarta-ee, jpa, sql-order-by

考虑这种情况：我有一张课程表，每节课都有一周中的一天（0-6；不是日期）和上课时间（不是时间，而是一天中课程的序号，即 1 到 10)。我需要在特定的日期和时间之后找到第一节课。

鉴于这些课程（白天时间）：星期一 5、星期三 2、星期五 1、星期五 3。

对于周三 2 之后的课程，我会在 friday-1、friday-3 在friday-2 之后、monday-5 在friday-5 之后收到，依此类推。所以它在周末“溢出”。

在我使用 Hibernate HQL 的一个项目中，我通过以下查询解决了这个问题：

```
SELECT l FROM Lesson l
ORDER BY (l.day > :day OR (l.day = :day AND l.hour >= :hour)),
l.day DESC, l.hour DESC LIMIT 1 
```

令人惊讶的是，这确实有效，尽管我真的不记得我是怎么想出来的。这是一个真正的魔法。

但是现在我需要在另一个使用 JPA 和 Hibernate 的项目（这次是基于 Java EE 的 Web）中进行。认为它会工作相同（再次使用 Hibernate 和 HQL），它会抛出异常：

```
org.hibernate.hql.ast.QuerySyntaxException: unexpected AST node: OR near line 1, column 101 
```

它指向 ORDER BY 子句中的 OR。

我知道 ORDER BY 中的 OR 真的很尴尬，但它确实有效，所以我认为它没问题。但现在我不知道该怎么处理它。可能是因为不同的 Hibernate 版本还是因为使用了 JPA？（我不确定版本，两者都是 Hibernate 3）。两个数据库都是 MySQL。

感谢您的任何帮助（或提供另一个按指定工作的查询）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T13:09:17.877

免责声明，我真的不太了解 Hibernate，所以我将假设`l.day > :day`在你的`order by`“返回”中是一个布尔值。

我有点惊讶这完全有效。在这种情况下，我会使用一个[`case`](http://dev.mysql.com/doc/refman/5.0/en/case-statement.html)声明，以便非常清楚发生了什么：

```
SELECT <columns>
  FROM Lesson l
 ORDER BY case when (l.day > :day OR (l.day = :day AND l.hour >= :hour)) then 1
               else 0 end DESC
        , l.day DESC
        , l.hour DESC 
 LIMIT 1 
```

# cakephp - CakePHP 管理员前缀带有破折号？

> ID：10258581
> 
> 赞同：2
> 
> 时间：2012-04-21T11:42:21.957
> 
> 标签：cakephp, cakephp-2.0

我希望我的管理员前缀是 admin-manage，但后来，我什么时候可以在我的控制器中定义功能？

我不能写这样的函数：

```
admin-manage_add(){
      //some code here
} 
```

我在 core.php 中添加了这个：

```
 Configure::write('Routing.prefixes', array('admin-manage')); 
```

我该如何管理？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T12:31:49.877

您可以修改[默认的前缀路由](http://book.cakephp.org/1.3/view/950/Prefix-Routing)并将它们手动包含在您的*routes.php*中。

```
Router::connect("/admin-manage", array('controller' => 'client','action' => 'index', 'prefix' => 'admin', 'admin' => true));
Router::connect("/admin-manage/:controller", array('action' => 'index', 'prefix' => 'admin', 'admin' => true));
Router::connect("/admin-manage/:controller/:action/*", array('prefix' => 'admin', 'admin' => true)); 
```

这样，admin-manage url 被路由到 admin 前缀，这就是您用于控制器操作的内容：

```
admin_add(){
    //some code here
} 
```

我认为你应该把

```
Configure::write('Routing.prefixes', array('admin')); 
```

虽然在你的 core.php 中，但我认为这并不重要。

# python - 如何使用 lxml 获取根元素的文本？

> ID：10258584
> 
> 赞同：7
> 
> 时间：2012-04-21T11:42:30.670
> 
> 标签：python, lxml

我完全不明白为什么 lxml`.text`会给我一个子标签的文本，而不是根标签的文本。

```
some_tag = etree.fromstring('<some_tag class="abc"><strong>Hello</strong> World</some_tag>')

some_tag.find("strong")
Out[195]: <Element strong at 0x7427d00>

some_tag.find("strong").text
Out[196]: 'Hello'

some_tag
Out[197]: <Element some_tag at 0x7bee508>

some_tag.text 
```

`some_tag.find("strong").text``<strong>`返回标签之间的文本。

我希望`some_tag.text`返回之间的一切`<some_tag> ... </some_tag>`

预期的：

```
<strong>Hello</strong> World 
```

相反，它什么也不返回。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T17:58:23.603

```
from lxml import etree

XML = '<some_tag class="abc"><strong>Hello</strong> World</some_tag>'

some_tag = etree.fromstring(XML)

for element in some_tag:
    print element.tag, element.text, element.tail 
```

输出：

```
strong Hello  World 
```

有关`.text`和`.tail`属性的信息，请参阅：

*   [http://lxml.de/tutorial.html#elements-contain-text](http://lxml.de/tutorial.html#elements-contain-text)
*   [http://infohost.nmt.edu/tcc/help/pubs/pylxml/web/etree-view.html](http://infohost.nmt.edu/tcc/help/pubs/pylxml/web/etree-view.html)

要准确获得您预期的结果，请使用

```
print etree.tostring(some_tag.find("strong")) 
```

输出：

```
<strong>Hello</strong> World 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T12:19:40.707

您将在此处找到缺少的文本

```
>>> some_tag.find("strong").tail
' World' 
```

查看[http://lxml.de/tutorial.html](http://lxml.de/tutorial.html)并搜索“tail”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T11:59:49.967

我不确定是否理解您的问题，但您在解析中有 2 个主要解决方案：

DOMParser ：取决于语言，它是 node.getNodeValue();

SAXParser：取决于语言，但在 java 中，例如在函数中：characters(...)

我没有时间在谷歌上搜索，但在 python 中，我知道 MiniDOM（一个 DOM 解析器）： http: [//www.blog.pythonlibrary.org/2010/11/12/python-parsing-xml-with-minidom /](http://www.blog.pythonlibrary.org/2010/11/12/python-parsing-xml-with-minidom/)

希望我的回答能帮到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T13:40:47.190

这有帮助吗？

```
comp = [ etree.tostring(e) for e in some_tag]
print ''.join(comp[0]) 
```

已编辑：感谢@mzjin 让我走上正轨

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-10T10:59:31.603

您必须使用内置的 lxml 方法来检索标签之间的所有文本。

```
 from lxml import etree
  xml='''<some_tag class="abc"><strong>Hello</strong> World</some_tag>'''
  tree = etree.fromstring(xml)
  print(''.join(tree.xpath('//text()'))) 
```

# php - 使用 Facebook Graph API 从纽约市获取餐厅列表

> ID：10258589
> 
> 赞同：4
> 
> 时间：2012-04-21T11:43:31.600
> 
> 标签：php, facebook-graph-api

我想使用 Facebook Graph API 获取位于纽约的所有餐厅页面的列表。我已经下载了 PHP-SDK，现在我遇到了这个问题。我只需要餐厅页面的 id。

```
<?php
  $url = "https://graph.facebook.com/search?q=restaurant&type=page";
  $result = file_get_contents($url,true);
  $result = json_decode($result);
  //print_r($result);
  $i = 25;
  for($a=0;$a<$i;$a++) {
$restaurantName = $result->data[$a]->name;
$restaurantCategory = $result->data[$a]->category;
$restaurantPage_id = $result->data[$a]->id;
}

?> 
```

现在，正如您在上面的代码中看到的那样，我得到了来自世界不同地区的所有类型的类别（如 APP、食品和饮料、公司等）。我只想要纽约的餐馆，真的不知道如何过滤结果。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T13:27:41.667

替换此网址，

```
$url ="https://graph.facebook.com/search?q=restaurant&type=place&center=40.714623,-74.006605&distance=16000&access_token=`Your_Access_Token`"; 
```

纽约中心纬度=40.714623 & 经度=-74.006605。请求此资源需要访问令牌。

愿这对你有所帮助。

# linux - Linux 2.6.23 。接收错误。读取函数返回 -1

> ID：10258593
> 
> 赞同：1
> 
> 时间：2012-04-21T11:44:32.527
> 
> 标签：linux, embedded, embedded-linux

请参考以下代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <fcntl.h>
#include <sys/types.h>
#include <sys/ioctl.h>
#include <sys/stat.h>
#include <termios.h>

#define BAUDRATE    B115200
#define SER_DEVICE  "/dev/ttyS0"
#define FALSE       0
#define TRUE        1

int main()
{
int fd,c,res,i,n;
struct termios oldtio,newtio;
unsigned char buf[255] = "WELCOME TO THE WORLD OF LINUX PROGRAMMING\n";
unsigned char buf2[255]= {"\0"};
//Opening a Device for Reading Writing.
//O_NOCTTY : - The Port Never Becomes the Controlling Terminal of the Process.
//O_NDELAY : - Use NON-Blocking IO. on some system this also means Deactivating the DCD line.

fd=open("/dev/ttyS0",O_RDWR | O_NOCTTY | O_NDELAY);

if(fd<0)
{
printf("\nError in opening the File\n");
exit(0);
}
else
{
printf("File Opened  SuccessFull..HurraYYY !!!!1\n");
}

//printf("--------------Test Begin---------------\n");

//Save Current Serial Port Settings

tcgetattr(fd,&oldtio);
//clear the struct for New port settings
memset(&newtio,0,sizeof(newtio));

//Baud rate : Set bps rate .
//You could also use cfsetispeed and cfsetospeed.
//CRTSCTS : Output Hardware Flow control
//CS8 : 8n1(8bit No Parity 1 Stopbit)
//CLOCAL : local connection no modem control
//CREAD : Enable Receiving character
//printf("Setting Configuration for Port");
newtio.c_cflag |= (BAUDRATE | CRTSCTS | CS8 | CLOCAL | CREAD);

//IGNPAR : Ignore bytes with parity error.
//ICRNL : map CR to NL 
//printf("Setting Parity\n");
newtio.c_cflag |= (IGNPAR | ICRNL);

//RAW output
//printf("Raw Output\n");
newtio.c_oflag = 0;
//printf("Enabling Canonical format \n");
//ICANON : Enable canonical input.
newtio.c_lflag |= ICANON;
//printf("Initialising Char\n");
//Initialise all characters
newtio.c_cc[VMIN] = 1;   /*Blocking read until one character arrives*/
newtio.c_cc[VTIME] = 0;  /*Inter character timer unused*/

/*
Now clean the Modem Line and Activate the Settings for the Port.
*/
tcflush(fd,TCIFLUSH);
printf("Flushing Lines\n");
tcsetattr(fd,TCSANOW,&newtio);

n=write(fd,&buf,42);
printf("n=%d",n);

for(i=0;i<sizeof(unsigned int);i++);

for(i=0;i<sizeof(unsigned int);i++);
for(i=0;i<sizeof(unsigned int);i++);
for(i=0;i<200;i++)
printf("");
n=0;
n = read(fd,&buf2,42);
if(n==-1)
{
printf("\nError in Receiving");
}
else
printf("Received String = %s",buf2);

/*
Restore the Old Port Setting
*/

tcsetattr(fd,TCSANOW,&oldtio);

printf("==============TEST END==============\n");

close(fd);
} 
```

我能够传输出现在超级终端上的字符串。但函数读取返回值为 -1。我发现的可能性是：1.接收配置错误。2\. 是否需要环回。

我尝试循环返回，但它不起作用。我在 while(1) 中执行了代码

> > 发送和接收...如果读取返回一些东西！= -1 ..从循环中中断。但这不起作用。在读/写周期中应该添加的最小延迟是多少。

我在 MPC 8641d 处理器上执行此代码。

请您的建议对我很重要。

希望得到您的指导！！！！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T12:13:50.223

要了解 read() 失败的详细原因，您需要查看全局变量 errno 中存储的值（这在读取的手册页中有说明）。一个简单的方法是在打印失败消息时使用`perror()`而不是 printf() ——perror() 将附加一个人类可读的字符串来告诉你原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T12:38:49.857

在此之前阅读 John Zwinck 的答案；）

有关 errno 的背景信息：[http ://www.gnu.org/software/libc/manual/html_node/Checking-for-Errors.html](http://www.gnu.org/software/libc/manual/html_node/Checking-for-Errors.html)

要详细说明特定 errno WRT 的意义，请阅读：并非所有“错误”都意味着“您做错了什么”或“无法读取此连接”。它们可能只是意味着此时无法读取此连接，例如，如果 errno 在非阻塞连接上为 EAGAIN。

这意味着您必须弄清楚错误是什么，如果是这种错误，如何处理它。然后你必须专门针对 errno 进行测试，例如：

```
#include <errno.h>

int bytes = read(...);
if (bytes == -1) {
// example of an error which may happen under normal conditions
// for certain kinds of file descriptors:
    if (errno == EAGAIN) {
        // handle appropriately
    } else {
        // this is a real error which should not happen
    }
} 
```

您可以通过打印 errno 的 int 值并查看 errno.h 来找到常量。很有可能，它们实际上位于 errno.h 包含的文件中，例如 /usr/include/asm-generic/errno.h 和 errno-base.h。我系统上前者的随机示例：

`#define ECOMM 70 /* Communication error on send */`

所以 perror() 或 strerror() 会（可能）报告“发送时的通信错误”，但无论如何，它的 int 值是 70。 **不要在代码中使用它**，它们可能因实现而异；`#include <errno.h>`并使用常数`ECOMM`。

# mysql - 将 Excel 数据矩阵导入 MySQL 数据库

> ID：10258595
> 
> 赞同：6
> 
> 时间：2012-04-21T11:44:55.557
> 
> 标签：mysql, excel, csv, rows

在搜索了许多论坛之后，我认为我的问题是如何正确输入问题，因为我似乎无法找到与我需要的答案很接近的答案，但我认为这是 excel > mysql 101 看起来..

我有一张带有几十种百叶窗的 excel 表（用于窗户）。有一行是宽度.. 左列是高度。当您交叉引用宽度和高度（例如 24 x 36）时，它具有价格值。

```
 |  24  |  30  |  32  |  36   (width)
   ----------------------------
    24 | $50     $55    etc
    30 | $60     etc    etc(price)
    32 | $70
(height) 
```

当我的数据库看起来像这样时，我一生都无法弄清楚将其导入mysql的位置或方式。

```
itemname_id <<(my primary)  |  width  |  height  |  price
------------------------------------------------------------------- 
```

我注定要手动输入数千个组合还是这很常见？如何键入正确的术语以找到解决方案？显然我说的不是正确的术语。

非常感谢您的任何指导。我一直在寻找，我一​​直在撞墙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T11:55:03.943

知道 Excel 数据的布局通常称为数据**透视表**可能会有所帮助。可以“反透视” Excel 中的数据，以获取要导入数据库的格式的数据。

[这篇简短的文章](http://spreadsheetpage.com/index.php/tip/creating_a_database_table_from_a_summary_table/)展示了如何创建数据透视表，然后对其进行反透视。基本上，这需要创建一个“值总和”数据透视表，然后双击作为结果的单个值。这是违反直觉的，但做起来很简单。

# jruby - JRuby + OpenURI + HTTPS 的问题

> ID：10258600
> 
> 赞同：0
> 
> 时间：2012-04-21T11:45:38.387
> 
> 标签：jruby

我尝试使用 JRuby、Open URI 和 JRuby-OSSL 编写的非常简单的程序有问题。

我使用以下方法安装了 JRuby-OSSL gem：

```
gem install jruby-openssl 
```

并下载了最新的 jruby-complete jar (1.6.7)。

我有简单的脚本 test.rb：

```
require 'jruby/openssl/gem_only'
require 'open-uri'
open('https://google.com') 
```

当我像这样运行它时：

```
java -jar jruby-complete-1.6.7.jar test.rb 
```

我得到：

```
NameError: uninitialized constant Net::HTTP::OpenSSL
  const_missing at org/jruby/RubyModule.java:2642
       use_ssl= at file:/Users/mislocin/.m2/repository/org/jruby/jruby-complete/1.6.7/jruby-complete-1.6.7.jar!/META-INF/jruby.home/lib/ruby/1.8/net/https.rb:124
      open_http at file:/Users/mislocin/.m2/repository/org/jruby/jruby-complete/1.6.7/jruby-complete-1.6.7.jar!/META-INF/jruby.home/lib/ruby/1.8/open-uri.rb:231
    buffer_open at file:/Users/mislocin/.m2/repository/org/jruby/jruby-complete/1.6.7/jruby-complete-1.6.7.jar!/META-INF/jruby.home/lib/ruby/1.8/open-uri.rb:616
      open_loop at file:/Users/mislocin/.m2/repository/org/jruby/jruby-complete/1.6.7/jruby-complete-1.6.7.jar!/META-INF/jruby.home/lib/ruby/1.8/open-uri.rb:164
          catch at org/jruby/RubyKernel.java:1183
      open_loop at file:/Users/mislocin/.m2/repository/org/jruby/jruby-complete/1.6.7/jruby-complete-1.6.7.jar!/META-INF/jruby.home/lib/ruby/1.8/open-uri.rb:162
       open_uri at file:/Users/mislocin/.m2/repository/org/jruby/jruby-complete/1.6.7/jruby-complete-1.6.7.jar!/META-INF/jruby.home/lib/ruby/1.8/open-uri.rb:132
           open at file:/Users/mislocin/.m2/repository/org/jruby/jruby-complete/1.6.7/jruby-complete-1.6.7.jar!/META-INF/jruby.home/lib/ruby/1.8/open-uri.rb:518
           open at file:/Users/mislocin/.m2/repository/org/jruby/jruby-complete/1.6.7/jruby-complete-1.6.7.jar!/META-INF/jruby.home/lib/ruby/1.8/open-uri.rb:30
         (root) at test.rb:4 
```

我很确定我错过了一些细节，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T06:46:28.393

尝试要求**openssl**代替：

```
require 'openssl'
require 'open-uri'
open('https://google.com') 
```

但当然这可能不会解决你的问题。你`gem install jruby-openssl`在你的 jruby gems 中，但不要使用`jruby`而是直接调用 java - 你不应该依赖它根据你的`ENV`变量解析 gems。

您还应该期待一个`SSLError`，因为您尚未将其配置为忽略证书验证，这里是如何获取**https://** URI的示例： [https ://gist.github.com/1361989](https://gist.github.com/1361989)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-22T09:25:24.737

好的，发现我的错误。

错误地，我将 GEM_HOME 变量配置为指向我的 gem 存储库而不是 GEM_PATH。配置 GEM_PATH 环境变量后，现在一切正常。

# python - 根据python列表中的另一个变量（使唯一）对变量中的条目求和

> ID：10258602
> 
> 赞同：2
> 
> 时间：2012-04-21T11:46:25.047
> 
> 标签：python, arrays, csv, count, bigdata

我有一个关于如何在 python 中执行此任务的问题：-

我有一个条目数组，例如：[IPAddress、连接、策略状态、活动标志、经度、纬度]（全部为字符串）

前任。

```
['172.1.21.26','54','1','2','31.15424','12.54464']
['172.1.21.27','12','2','4','31.15424','12.54464']
['172.1.27.34','40','1','1','-40.15474','-54.21454']
['172.1.2.45','32','1','1','-40.15474','-54.21454'] 
```

...直到大约 110000 个条目，大约 4000 种不同的经纬度组合

我想计算每个位置的平均连接数、平均策略状态、平均活动标志

像这样的东西：

```
[longitude,latitude,avgConn,avgPoli,avgActi]
['31.15424','12.54464','33','2','3']
['-40.15474','-54.21454','31','1','1'] 
```

... 很快

我有大约 195 个文件，每个文件有约 110,000 个条目（有点像大数据问题）

我还是 python 新手，所以我不确定什么是最好的使用方法，但我真诚地感谢任何关于这个问题的帮助或指导

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T12:15:33.167

我只会给你算法，你可以通过自己编写实际代码来了解更多信息。

使用字典，键作为表单对`(longitude, latitude)`，值作为 for 的列表`[ConnectionSum,policystatusSum,ActivityFlagSum]`

1.  遍历条目一次（计算条目总数**N**）

2.  一个。对于每个条目，如果位置存在 - 将 conn、policystat 和 Activity 值添加到现有总和中。

    湾。如果条目不存在，则分配 [0,0,0] 作为值

3.  对所有文件执行 1 和 2。

4.  扫描完所有条目后。遍历字典并将列表中的每个元素除以`[ConnectionSum,policystatusSum,ActivityFlagSum]`N**以**获得每个元素的平均值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T12:16:14.373

只要您的位置被限制在同一个文件中（甚至在一个文件中彼此靠近），您需要做的就是流处理范例。例如，如果您知道重复位置仅出现在文件中，请读取每个文件，计算平均值，然后关闭文件。只要你让旧数据浮出范围，垃圾收集器就会为你处理掉它。基本上这样做：

```
def processFile(pathToFile):
    ...

totalResults = ...
for path in filePaths:
    partialResults = processFile(path)
    totalResults = combine...partialResults...with...totalResults 
```

一个更优雅的解决方案是使用“在线”计算平均值的 O(1) 方法。例如，如果您的平均数为 5、6、7，您会做`5/1=5.0`, `(5.0*1+6)/2=5.5`, `(5.5*2+7)/3=6`. 在每个步骤中，您只跟踪当前平均值和元素数量。此解决方案将产生使用的最小内存量（不超过最终结果的大小！），并且不关心您访问元素的顺序。它会像这样。请参阅[http://docs.python.org/library/csv.html](http://docs.python.org/library/csv.html)了解您在 CSV 模块中需要哪些功能。

```
import csv

def allTheRecords():
    for path in filePaths:
        for row in csv.somehow_get_rows(path):
            yield SomeStructure(row)

averages = {}  # dict: keys are tuples (lat,long), values are an arbitrary
               # datastructure, e.g. dict, representing {avgConn,avgPoli,avgActi,num}

for record in allTheRecords():
    position = (record.lat, record.long)
    currentAverage = averages.get(position, default={'avgConn':0, 'avgPoli':0, 'avgActi':0, num:0})
    newAverage = {apply the math I mentioned above}
    averages[position] = newAverage 
```

（请注意，“一个位置的平均值”的概念没有明确定义。好吧，它是明确定义的，但不是很有用：如果您知道每个 IP 事件的确切位置到无限精度，那么平均一切都是自己的。您可以压缩数据集的唯一原因是因为您的纬度和经度具有有限的精度。如果您在获取更精确的数据时遇到此问题，您可以选择四舍五入到适当的精度。这可能是合理的舍入到 10 米以内或其他东西；查看纬度和经度。这只需要一点数学/几何知识。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T11:57:21.993

不，如果你有 .csv 格式的文件，以文本形式威胁它们是没有意义的，因为 python 附带了出色的`csv`模块。您可以将 csv 行读入 a`dict`以对它们进行分组，但我建议将数据写入适当的数据库中，并使用 SQL`AVG()`和`GROUP BY`. Python 附带了大多数数据库的绑定。如果您没有安装，请考虑使用该`sqlite`模块。

# java - 如何等待队列包含元素？

> ID：10258604
> 
> 赞同：5
> 
> 时间：2012-04-21T11:46:37.947
> 
> 标签：java, queue, wait

我正在尝试实现一个 FIFO 观察者/可观察的解耦队列，但我不知道如何让一个方法等到队列不为空后再返回。这是我目前的尝试，但我确信必须有一个更优雅的解决方案。

```
/*
 * Waits until there is data, then returns it.
 */
private Double[] get() {
    while (queue.isEmpty()) {
        try {
            Thread.sleep(1);
        } catch (InterruptedException e) {
            // Don't care.
        }
    }

    return queue.removeFirst();
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-21T11:53:02.920

为什么不使用[`BlockingQueue`](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/BlockingQueue.html)- 这正是你想要的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-21T12:00:47.373

该[`BlockingQueue`](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/BlockingQueue.html)接口有一个[`take()`](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/BlockingQueue.html#take--)用于此目的的方法。

# android - ia32lib 安装 Ubuntu 工作室

> ID：10258607
> 
> 赞同：0
> 
> 时间：2012-04-21T11:47:20.610
> 
> 标签：android, eclipse, ubuntu, installation

我的 ubuntu 工作室是一个 64 位系统，我已经安装了 Eclipse IDE，它在 java 开发中可以正常工作，但不能在 android 上工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T06:42:03.763

我认为它被称为“ia32-libs”（这就是它在我的 Debian Unstable 系统上的名称，在 Ubuntu 上应该是一样的）。提示：试试

```
apt-cache search ia32 
```

搜索可能的包名称。

# java - Java：在哪里编写配置而不需要管理权限

> ID：10258609
> 
> 赞同：2
> 
> 时间：2012-04-21T11:47:45.827
> 
> 标签：java, file, permissions, settings

我真的不敢相信我会这么说，但是自从将我的程序移植到 OSX 并习惯了权限后，我意识到我计划在 Windows 上做的事情不会像我想要的那样工作。目前，在 Windows 上，我的程序将其设置存储在注册表 (HKLM) 中，并将一些用户可编辑的资源存储在程序文件旁边的文件夹中。由于各种原因，我现在决定将配置/设置存储在一个文件中，并且用户将能够在哪个文件夹中保存其他资源。

所以我现在的问题是在哪里存储配置文件。显然它将被更新，但我不想编程必须需要管理员权限才能运行。我想提供一个选项，以便所有用户都可以使用该程序（就像大多数程序一样），这当然需要管理员，所以这会导致第二个查询：我应该在哪里存储配置文件（以及文件夹保留了哪些其他资源）以及如何检测该程序是为所有用户安装还是只为一个用户安装！

提前致谢

PS 如果您没有猜到，该程序是用 Java 编写的，所以我想知道如何以编程方式获取您建议的位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T12:10:26.873

它在 *nix 兼容程序中的正常做法是将信息存储在以 name 开头的文件夹中。在用户的主目录中，

```
.bash_history
.bashrc 
```

在我看来，您可以在 OSX 上使用相同的内容并创建一个目录说，

```
.myapp 
```

您可以在该目录下存储任意数量的任何格式的文件。

要获取文件夹的位置，您可以执行

```
String homeDir = System.getProperty("user.home");
File myAppDir = new File(homeDir, ".myapp"); 
```

这大致是可以为您的应用程序获取自定义配置目录的代码。

请注意，点文件/文件夹有点类似于 Windows 中的隐藏文件夹。默认情况下，您的文件管理器通常不会显示这些文件/文件夹。

要确定是否为所有用户安装了该程序，您可以在某些管理员（根）控制的位置创建配置，例如 /etc（不确定 Mac）用户配置始终可以覆盖默认配置。不过，可能有更好的方法来处理这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T12:17:48.283

在 Windows 和 unix 上，用户（通常）都有一个（主）文件夹，它对其具有完全权限。您可以在主文件夹中创建一个目录，并让您的用户配置文件驻留在那里。

# dom - DOM Level 3 和 HTMLElement

> ID：10258613
> 
> 赞同：1
> 
> 时间：2012-04-21T11:48:26.673
> 
> 标签：dom

我正在比较 DOM Level 2 和 DOM Level 3 (http://www.w3.org/DOM/DOMTR)。我知道 DOM Level 2 有不同的部分，例如“Core”和“HTML”，例如 HTMLElement 接口是在 DOM Level 2“HTML”部分定义的。

特定于 HTML 的定义也是 DOM Level 3 的一部分吗？与 Dom Level 2 Core 一样，DOM Level 3 Core 不涵盖特定于 HTML 的定义。但是我没有看到任何 DOM Level 3“HTML”部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T10:14:46.683

正确，没有 DOM Level 3 HTML 规范。但是，DOM Level 2 HTML 正在被 HTML5 规范所取代。

例如，这里定义了 HTMLElement 接口：

[http://dev.w3.org/html5/spec/elements.html#htmlelement](http://dev.w3.org/html5/spec/elements.html#htmlelement)

* * *

顺便说一句，DOM 3 Core 也正在被 DOM4 取代。

见[http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html](http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html)

# networking - CIDR 条目和路由表

> ID：10258616
> 
> 赞同：2
> 
> 时间：2012-04-21T11:48:50.863
> 
> 标签：networking, cidr

我有一个问题，问如下：

> 假设路由器在其路由表中有以下 CIDR 条目：
> 
> ```
> Net/Preﬁx Next Hop
> 128.96.39.0/24 Interface 0
> 128.96.39.128/25 Interface 1
> 128.96.40.0/25 Router 2
> 192.4.153.0/26 Router 3
> default Router 4 
> ```
> 
> 对于以下每个 IP 地址，如果具有该地址的数据包到达，路由器会做什么？
> 
> 1.  128.96.39.10；
> 2.  128.96.40.12；
> 3.  128.96.39.151；
> 4.  192.4.153.17；
> 5.  192.4.153.90。

我知道这`/24`意味着将 24 位分配给网络地址，这意味着将 8 位分配给主机。如何从以十进制表示的 IP 地址获取子网掩码，然后从那里确定 IP 的去向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T22:40:47.550

好吧，总是首先使用最具体的子网：

/25 比 /24 更具体。在您的示例中，这意味着：

1.  接口 0
2.  路由器 2
3.  接口1
4.  路由器 3
5.  路由器 4

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T11:58:03.023

路由器采用最长匹配子网掩码的路由。

(i) 接口 0 (ii) 路由器 2 (iii) 接口 1 (iv) 路由器 3 (v) 路由器 4

# sql - 如何在输出参数中设置默认值

> ID：10258618
> 
> 赞同：1
> 
> 时间：2012-04-21T11:49:09.133
> 
> 标签：sql

在我的以下查询中，如果与它们一起使用的选择语句不返回任何内容，我想分别在 @TMarks、@OMarks、@Percentage 中设置 0、0、0

```
 create procedure [dbo].[TestRecordSelectMInfo]
@GRNo varchar(4),
@SessionId numeric(1),
@TestTypeId numeric(1),
@TMarks int output,
@OMarks numeric(4) output,
@Percentage numeric(4) output,
@Grade varchar(4) output
as 
begin
SELECT Subjects.Subject, Marks.TotalMarks, Marks.PassingMarks, TestRecord.Marks, Result = case when TestRecord.Marks = 'A' then 'A' else case when cast(TestRecord.Marks as numeric) < Marks.PassingMarks then 'F' else 'P' end end FROM Subjects INNER JOIN Marks ON Subjects.SubjectId = Marks.SubjectId INNER JOIN TestRecord ON Subjects.SubjectId = TestRecord.SubjectId AND Marks.TestTypeId = TestRecord.TestTypeId where TestRecord.SessionId = @SessionId and TestRecord.TestTypeId = @TestTypeId and TestRecord.GRNo = @GRno
set @TMarks = (select sum(Marks.TotalMarks) from Marks inner join TestRecord on Marks.TestTypeId = TestRecord.TestTypeId and Marks.SubjectId = TestRecord.SubjectId where TestRecord.SessionId = @SessionId and TestRecord.TestTypeId = @TestTypeId and TestRecord.GRNo = @GRNo and TestRecord.Marks <> 'A' and cast(TestRecord.Marks as numeric) > Marks.PassingMarks )
set @OMarks = (select sum(cast(TestRecord.Marks as numeric)) from Marks inner join TestRecord on Marks.TestTypeId = TestRecord.TestTypeId and Marks.SubjectId = TestRecord.SubjectId where TestRecord.SessionId = @SessionId and TestRecord.TestTypeId = @TestTypeId and TestRecord.GRNo = @GRNo and TestRecord.Marks <> 'A' and cast(TestRecord.Marks as numeric) > Marks.PassingMarks)
set @Percentage = @OMarks / @TMarks * 100;
set @Grade = case
when @Percentage < 50
then
'NIL'
else
case 
when @Percentage < 60
then
'C'
else
case
when @Percentage < 70
then
'B'
else
case
when @Percentage < 80
then
'A'
else
case
when @Percentage <= 100
then
'A+'
else
'FAIL'
end
end
end
end
end
end
GO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T11:52:05.590

编辑：没有`group by`返回`null`空集的聚合。您可以使用以下方法解决此问题`insull`：

```
select  @TMarks = IsNull(sum(Marks.TotalMarks),0)
from    Marks  
inner join TestRecord
  on Marks.TestTypeId = TestRecord.TestTypeId 
  and Marks.SubjectId = TestRecord.SubjectId 
where TestRecord.SessionId = @SessionId 
  and TestRecord.TestTypeId = @TestTypeId 
  and TestRecord.GRNo = @GRNo 
  and TestRecord.Marks <> 'A' 
  and cast(TestRecord.Marks as numeric) > Marks.PassingMarks 
```

# android - Android 附件不通过电子邮件发送

> ID：10258623
> 
> 赞同：1
> 
> 时间：2012-04-21T11:49:56.580
> 
> 标签：android, android-intent

我正在开发和 android 应用程序，并且在某些时候我希望允许用户通过电子邮件发送 .csv 文件。我在网上看过很多教程，它们都有相同的代码，相同的代码我已经尝试了很多次。问题是，发送电子邮件活动开始，附件出现在电子邮件中，但是当它被发送时，文件或变为空到目的地，或者根本不出现在目的地中。

这是一段代码：

```
File file = null;
File dir = ProjectViewerResume.this.getCacheDir();
if (dir.canWrite()){
    file = new File(dir, ProjectViewerResume.this.mProject.getName()+".csv");
    FileOutputStream out = new FileOutputStream(file);
    out.write(csv.toString().getBytes());
    out.close();
}
Uri u1 = null;

u1 = Uri.fromFile(file);

Intent sendIntent = new Intent(Intent.ACTION_SEND);
sendIntent.setFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
sendIntent.putExtra(Intent.EXTRA_SUBJECT, "Project Resume: "+
                ProjectViewerResume.this.mProject.getName());
sendIntent.putExtra(Intent.EXTRA_STREAM, u1);
sendIntent.setType("text/csv");
startActivity(sendIntent); 
```

csv 变量具有 csv 格式的文件内容。我省略了 try..catch，所以代码看起来更干净..

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T12:48:44.860

这段代码现在对我有用。
使用 createTempFile 而不是 openFileOutput。我仍然不知道前一种方法有什么问题。
它附加了一个名为**LogCat.log.gzip**的文件，这次它不是空的，它有我放入 insde 的数据。

```
 public void run() {
            Uri uriLog = null;
            try {
                File gzipFile = File.createTempFile("LogCat.log", ".gzip");
                FileOutputStream out = new FileOutputStream(gzipFile);
                out.write(gzip(dump().getBytes()));
                out.close();
                uriLog = Uri.fromFile(gzipFile);
            }
            catch (IOException e) {
                e.printStackTrace();
            }

            Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
            emailIntent.setType("text/plain");
            emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Android Log");
            emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, dump());
            emailIntent.putExtra(android.content.Intent.EXTRA_STREAM, uriLog);
            try {
                String str = getResources().getString(R.string.send_prompt);
                Intent chooser = Intent.createChooser(emailIntent, str);
                startActivity(chooser);
            }
            catch (Exception e) {
                e.printStackTrace();
            }
        }
    }).start(); 
```

并且不要忘记将此行添加到您的清单中：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T11:53:47.953

你可以试试这个......

```
Intent sendIntent = new Intent(Intent.ACTION_SEND);
    sendIntent.setType("text/plain");
    sendIntent.putExtra(Intent.EXTRA_SUBJECT, "Subject of Email");
    sendIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("/mnt/sdcard/file.csv"));
    sendIntent.putExtra(Intent.EXTRA_TEXT, "Enjoy the mail");
    startActivity(Intent.createChooser(sendIntent, "Email:")); 
```

如果附加文件时出现问题，请尝试以下路径。

```
sendIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("file:///sdcard/file.csv")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T08:53:46.033

我有完全一样的问题。因此，不要重复同一篇文章，我想向您展示我的代码，这与您的代码略有不同，但仍会发送一封带有 0KB 附件的电子邮件。
我在日志中打印 2 条消息：

*   打印路径（我编辑了包名）*   文件大小不是0KB！！！

    ```
    05-11 11:32:58.133: W/Log Viewer(432): Path is /data/data/<package>/files/LogCat.log.gzip
    05-11 11:32:58.192: W/Log Viewer(432): The file is 504 bytes 
    ```

    我用 Eclipse 调试器在代码中停下来并检查了 uriLog：它不是 null 并且包含正确的路径。

    代码是：

    ```
     public void run() {
                Uri uriLog = null;
                try {
                    FileOutputStream out = openFileOutput("LogCat.log.gzip", Context.MODE_PRIVATE);
                    out.write(gzip(dump().getBytes()));
                    out.close();
                    File gzipFile = new File(getFilesDir(), "LogCat.log.gzip");
                    //uriLog = Uri.parse("file://" + getFilesDir() + "/LogCat.log.gzip");
                    uriLog = Uri.fromFile(gzipFile);
                    Log.w(TAG,"Path is " + uriLog.getPath());
                    Log.w(TAG,"The file is " + gzipFile.length() + " bytes");
                }
                catch (IOException e) {
                    e.printStackTrace();
                }

                Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
                emailIntent.setType("text/plain");
                emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Android Log");
                emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, dump());
                emailIntent.putExtra(android.content.Intent.EXTRA_STREAM, uriLog);
                try {
                    String str = getResources().getString(R.string.send_prompt);
                    Intent chooser = Intent.createChooser(emailIntent, str);
                    startActivity(chooser);
                }
                catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }).start(); 
    ```

    我尝试过的事情：

    *   我通过解析创建了 uri（见注释行*   我还将数据放在电子邮件正文中以检查它是否存在 --> 它到达电子邮件中*   我还尝试将压缩后的数据放入电子邮件正文中以检查它是否存在 --> 它到达了电子邮件
    **编辑：** *   **试图从 /mnt/system/app/CustomLocale.apk 发送一个预先存在的文件，从 /mnt/system/app/CustomLocale.apk
    23745 字节 uriLog.getPath() 的路径被打印 /apk/CustomLocale.apk
    并且邮件仍然带有一个名为的附件CustomLocale.apk 和 0KB 大小** ![模拟器截图](../Images/841af95b52445c256eab8ff8fc5c497c.png)

    我唯一想到的失败是 putextra(intent.EXTRA_STREAM,uri) 是基于

    ```
    public Intent putExtra (String name, Parcelable value) 
    ```

    **uris**实现了parcelable 接口。但是由于某种原因，我将调查，也许对*writeToParcel(Parcel out, int flags)*的调用没有将文件数据写出；这就是为什么它在附件中是 0KB 的原因。

# javascript - 根据属性选择带有javascript的HTML元素

> ID：10258624
> 
> 赞同：0
> 
> 时间：2012-04-21T11:49:59.553
> 
> 标签：javascript, google-analytics

虽然我已经非常精通 jQuery，但不幸的是我的 Javascript 有点缺乏，在这种情况下我无法访问 jQuery，所以请不要回答“使用 jQuery”。

基本上，谷歌分析使我能够跟踪社交点击：

```
_gaq.push(['_trackSocial', 'facebook', 'like', 'http://domain.com/somepage']); 
```

现在我的页面上有各种链接，如下所示：

```
<a href="#myfacebook#" track_social="facebook"><img src="facebook_button" /></a>
<a href="#mytwitter#" track_social="twitter"><img src="twitter_button" /></a>
<a href="#mygoogleplus#" track_social="googleplus"><img src="googleplus_button" /></a>
<a href="#mypinterest#" track_social="pinterest"><img src="pinterest_button" /></a> 
```

现在我想要跟踪每一个的点击并运行上面展示的谷歌分析代码。如果我使用 jQuery，我会做这样的事情：

```
$('a[track_social]').click(function(){
    _gaq.push(['_trackSocial', $(this).attr('track_social'), 'click', $(this).attr('href')]);  
}); 
```

但正如我所说，我无法访问 jQuery，那么我将如何使用通用 Javascript 来做到这一点？

它不一定必须使用“track_social”属性，我可以放入其他内容，但它不能是每个 ID 的唯一 ID，因为它们将在整个网站上以多种方式出现，并且多次出现在各种页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T11:53:19.637

jQuery 可以直接移植到原生 DOM API：

```
Array.prototype.slice.call(
    document.querySelectorAll('a[track_social]')
).forEach(function(i) {
    i.addEventListener('click', function(e) {
        _gaq.push(['_trackSocial',
            e.target.getAttribute('track_social'),
            'click', e.target.href]);  
    }, false);
}); 
```

请注意，虽然此代码完全符合标准，但它需要 JavaScript 1.6 for `forEach`（在大多数主要浏览器中支持，但仅在 IE 9+ 中支持），并且它需要`addEventListener`和`querySelectorAll`（在大多数主要浏览器中支持，但仅在 IE 8+ 中） . 如果您想要更广泛的浏览器支持，您可以添加到此解决方案中。

* * *

补充代码#1：

```
var n = document.querySelectorAll('a[track_social]');
for (var i = 0; i < n.length; i++)
    n[i].addEventListener('click', function(e) {
        _gaq.push(['_trackSocial',
            e.target.getAttribute('track_social'),
            'click', e.target.href]);  
    }, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T11:55:03.430

你有选择：

您可以选择[`querySelectorAll()`](https://developer.mozilla.org/en/DOM/Document.querySelectorAll)类似于 CSS（和 jQuery 选择器）的功能。它为您提供了`NodeList`一个类似数组的检索元素集合。

```
var links = document.querySelectorAll('a[track_social]');
//gives us [element,element,element...], loop and attach

for(var i; i<links.length;i++){
    links[i].addEventListener(...);
} 
```

另一种方法是获取所有`<a>`标签并测试它们的属性

```
var links = document.getElementsByTagName('a');

for(var i; i<links.length;i++){
    if(links[i][yourAttribute]){
        links[i].addEventListener(...);
    }
} 
```

但有一些警告。`querySelectorAll()`某些浏览器[不支持](http://caniuse.com/#search=querysele)（螺丝 IE）。此外，IE 的版本[`addEventListener()`](https://developer.mozilla.org/en/DOM/element.addEventListener)是[`attachEvent()`](http://msdn.microsoft.com/en-us/library/ie/ms536343%28v=vs.85%29.aspx)

# java - 如何使用java从以下代码片段中提取所有http链接？

> ID：10258625
> 
> 赞同：1
> 
> 时间：2012-04-21T11:50:14.803
> 
> 标签：java, regex, json

我从自定义结果中获得了以下结果。

```
{
    "kind": "customsearch#search",
    "url": {
        "type": "application/json",
        "template": "https://www.googleapis.com/customsearch/v1?q={searchTerms}& ={count?}&    start={startIndex?}&lr={language?}&safe={safe?}&cx={cx?}&cref={cref?}&sort={sort?}&filter={filter?}&gl={gl?}&cr={cr?}&googlehost={googleHost?}&c2coff={disableCnTwTranslation?}&hq={hq?}&hl={hl?}&nsc={nsc?}&siteSearch={siteSearch?}&siteSearchFilter={siteSearchFilter?}&exactTerms={exactTerms?}&excludeTerms={excludeTerms?}&linkSite={linkSite?}&orTerms={orTerms?}&relatedSite={relatedSite?}&dateRestrict={dateRestrict?}&lowRange={lowRange?}&highRange={highRange?}&searchType={searchType}&fileType={fileType?}&rights={rights?}&imgSize={imgSize?}&imgType={imgType?}&imgColorType={imgColorType?}&imgDominantColor={imgDominantColor?}&alt=json"
    },
    "queries": {
        "nextPage": [
            {
                "title": "Google Custom Search - flowers",
                "totalResults": 10300000,
                "searchTerms": "flowers",
                "count": 10,
                "startIndex": 11,
                "inputEncoding": "utf8",
                "outputEncoding": "utf8",
                "cx": "013036536707430787589:_pqjad5hr1a"
            }
        ],
        "request": [
            {
                "title": "Google Custom Search - flowers",
                "totalResults": 10300000,
                "searchTerms": "flowers",
                "count": 10,
                "startIndex": 1,
                "inputEncoding": "utf8",
                "outputEncoding": "utf8",
                "cx": "013036536707430787589:_pqjad5hr1a"
            }
        ]
    },
    "context": {
        "title": "Custom Search"
    },
    "items": [
        {
            "kind": "customsearch#result",
            "title": "Flower - Wikipedia, the free encyclopedia",
            "htmlTitle": "<b>Flower</b> - Wikipedia, the free encyclopedia",
            "link": "http://en.wikipedia.org/wiki/Flower",
            "displayLink": "en.wikipedia.org",
            "snippet": "A flower, sometimes known as a bloom or blossom, is the reproductive structure found in flowering plants (plants of the division Magnoliophyta, ...",
            "htmlSnippet": "A <b>flower</b>, sometimes known as a bloom or blossom, is the reproductive structure <br>  found in flowering plants (plants of the division Magnoliophyta, <b>... </b>",
            "pagemap": {
                "RTO": [
                    {
                        "format": "image",
                        "group_impression_tag": "prbx_kr_rto_term_enc",
                        "Opt::max_rank_top": "0",
                        "Opt::threshold_override": "3",
                        "Opt::disallow_same_domain": "1",
                        "Output::title": "<b>Flower</b>",
                        "Output::want_title_on_right": "true",
                        "Output::num_lines1": "3",
                        "Output::text1": "꽃은 식물 에서 씨 를 만들어 번식 기능을 수행하는 생식 기관 을 말한다. 꽃을 형태학적으로 관찰하여 최초로 총괄한 사람은 식물계를 24강으로 분류한 린네 였다. 그 후 꽃은 식물분류학상중요한 기준이 되었다.",
                        "Output::gray1b": "- 위키백과",
                        "Output::no_clip1b": "true",
                        "UrlOutput::url2": "http://en.wikipedia.org/wiki/Flower",
                        "Output::link2": "위키백과 (영문)",
                        "Output::text2b": "   ",
                        "UrlOutput::url2c": "http://ko.wikipedia.org/wiki/꽃",
                        "Output::link2c": "위키백과",
                        "result_group_header": "백과사전",
                        "Output::image_url": "http://www.gstatic.com/richsnippets/b/fcb6ee50e488743f.jpg",
                        "image_size": "80x80",
                        "Output::inline_image_width": "80",
                        "Output::inline_image_height": "80",
                        "Output::image_border": "1"
                    }
                ]
            }
        }
    ]
} 
```

如何使用 java 从上述代码中提取所有 https 链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T12:10:15.643

您可能很懒惰并忽略解析 JSON，将整个结果视为字符串，只使用正则表达式来匹配 URL。

```
String httpLinkPattern = "https?://[-a-zA-Z0-9+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9+&@#/%=~_|]";
Pattern p = Pattern.compile(httpLinkPattern);
Matcher m = p.matcher(jsonResult);
while (m.find())
  System.out.println("Found http link: "+m.group()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T23:15:27.267

`https?://.*?\.(org|com|net|gov)/.*?(?=")`

此正则表达式将适用于您的目的。 [http://regexr.com?30nm2](http://regexr.com?30nm2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T12:53:29.117

如果您希望将响应转换为字符串以进行操作，并因此提取 URL 以反对使用 JSON 库，那么下面应该这样做。

```
 public List<String> extractUrls(String input)
  {
    List<String> result = new ArrayList<String>();
    Pattern pattern =
        Pattern.compile("\\b(((ht|f)tp(s?)\\:\\/\\/|~\\/|\\/)|www.)" + "(\\w+:\\w+@)?(([-\\w]+\\.)+(com|org|net|gov"
            + "|mil|biz|info|mobi|name|aero|jobs|museum" + "|travel|[a-z]{2}))(:[\\d]{1,5})?"
            + "(((\\/([-\\w~!$+|.,=]|%[a-f\\d]{2})+)+|\\/)+|\\?|#)?" + "((\\?([-\\w~!$+|.,*:]|%[a-f\\d{2}])+=?"
            + "([-\\w~!$+|.,*:=]|%[a-f\\d]{2})*)" + "(&(?:[-\\w~!$+|.,*:]|%[a-f\\d{2}])+=?" + "([-\\w~!$+|.,*:=]|%[a-f\\d]{2})*)*)*"
            + "(#([-\\w~!$+|.,*:=]|%[a-f\\d]{2})*)?\\b");

    Matcher matcher = pattern.matcher(input);
    while (matcher.find())
    {
      result.add(matcher.group());
    }

    return result;
  } 
```

**用法：**

```
 List<String> links = extractUrls(jsonResponseString);
    for (String link : links)
    {
      System.out.println(link);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T14:42:42.870

请使用 JSON Parser 来执行此操作。我认为那将是最好的。请参阅以下链接以获取很好的示例

[解析 JSON 的 Java 代码](http://answers.oreilly.com/topic/257-how-to-parse-json-in-java/)

# c# - 绑定到中继器中的隐藏字段时如何处理撇号

> ID：10258627
> 
> 赞同：0
> 
> 时间：2012-04-21T11:50:21.787
> 
> 标签：c#, asp.net, html

我有一个带有隐藏字段的gridview，我正在尝试设置一个值，如下所示：

```
<div class="newsletter" 
     onclick="document.getElementById('divMail').style.display='block';
              document.getElementById('hdnTitleOfContent').value='<%# Eval("mailTitle") %>';">
</div> 
```

它工作正常，但是当我有一个撇号登录时，`mailTitle`比如“如何等”，它会阻止我的其他代码。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T12:26:26.277

`'`将字符串中的with替换`&#39;`为您的标题。

# c# - 我们如何从 pop3client 获取电子邮件发件人 IP 地址或国家/地区名称

> ID：10258631
> 
> 赞同：1
> 
> 时间：2012-04-21T11:51:04.080
> 
> 标签：c#, email, pop3

我们如何从 pop3client 获取电子邮件发件人 IP 地址或国家/地区名称。

在 asp.net 中使用 C#.net

提前致谢。

阿卜杜什

# android - Android 从带有参数的 QR 码启动应用程序

> ID：10258633
> 
> 赞同：21
> 
> 时间：2012-04-21T11:51:17.203
> 
> 标签：android, qr-code

我想知道在android中是否可以使用QR码阅读器启动应用程序。我想要实现的目标是：

> 我创建了二维码，在使用二维码阅读器扫描后，我需要使用一些参数启动我的应用程序，也许它看起来像这样：myApp://org.hardartcore.myApp?myParams 或者类似的东西，不是真的当然。

有没有办法实现这一点并获得构建在 qr 代码中的参数，以启动应用程序。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-08T07:38:28.417

使用此文本创建二维码：`myApp://extraString`并使用任何二维码阅读器阅读。甚至您可以使用`Zxing`的开源集成您自己的二维码阅读器。你可以得到`extraString`@Sean Owen 提到的使用`getIntent().getDataString()`. 并且不要忘记将其添加到您的清单文件中：

```
<intent-filter>
<action android:name="android.intent.action.VIEW"/>
<category android:name="android.intent.category.DEFAULT"/>
<category android:name="android.intent.category.BROWSABLE"/>
<data android:scheme="myApp"/>
</intent-filter> 
```

那应该行得通。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-21T12:36:20.040

是的。在`AndroidManifest.xml`中，在您的 中`<activity>`，声明应用程序响应此 URL：

```
 <intent-filter>
    <action android:name="android.intent.action.VIEW"/>
    <category android:name="android.intent.category.DEFAULT"/>
    <category android:name="android.intent.category.BROWSABLE"/>
    <data android:scheme="myApp" android:host="org.hardartcore.myApp" android:path="/"/>
  </intent-filter> 
```

（我认为您可能必须在您的“？”之前以“/”结尾才能使其正常工作。）

然后任何使用该平台解析 URL 的东西都会打开您的应用程序。Web 浏览器中的超链接将起作用。

可以使用 检索 URL 本身`getIntent().getDataString()`。您可以根据需要对其进行解析`android.net.Uri`。

`CaptureActivity`在[ZXing](http://code.google.com/p/zxing)中查看它是如何做到这一点的示例。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-04-21T12:26:13.647

是的，可以通过使用意图来实现。

```
Intent intent = new Intent("com.google.zxing.client.android.SCAN");
intent.putExtra("SCAN_MODE", "QR_CODE_MODE");
startActivityForResult(intent, 0);

public void onActivityResult(int requestCode, int resultCode, Intent intent) 
{
if (requestCode == 0) 
{
if (resultCode == RESULT_OK) 
     {
              final String contents = intent.getStringExtra("SCAN_RESULT");
        Toast.makeText(this, contents, Toast.LENGTH_SHORT).show();
} else if (resultCode == RESULT_CANCELED) 
        {
    Toast.makeText(this, "Not proper QRCODE...!",Toast.LENGTH_SHORT).show();
    }
}
} 
```

# objective-c - XCode 模板中的 ivars 前缀为一个或两个下划线

> ID：10258634
> 
> 赞同：3
> 
> 时间：2012-04-21T11:51:25.347
> 
> 标签：objective-c, ios, cocoa-touch, xcode4.3

有谁知道为什么在 XCode 模板中（至少在 XCode 4.3.2 中）有一些 ivars 前缀有两个下划线，而一些只有一个？

例如，Master-Detail 应用程序模板包含文件 MasterViewController.m，可以在其中找到：

```
@synthesize detailViewController = _detailViewController;
@synthesize fetchedResultsController = __fetchedResultsController;
@synthesize managedObjectContext = __managedObjectContext; 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T13:08:29.483

这是一小罐​​虫子。

@synthesize 中使用下划线，主要用于区分实例变量和访问器名称。这很重要，尤其是当您不仅仅访问访问器中的变量时（例如，延迟初始化）。如果它们同名，您可以轻松键入“foo”并获取实例变量，而您的意思是调用访问器方法的“self.foo”。因此，这就是在这种情况下使用下划线的原因。

现在，Apple 表示我们不应该在私有*方法*名称中使用前导下划线。他们使用该约定作为其私有方法名称，您可能会无意中覆盖其中一个基类方法。那会很糟糕，尤其是因为您无法在编译时捕捉到它。

但是，他们说可以对私有实例变量使用下划线。事实上，作为一个例子，他们说在合成属性时使用前导下划线作为 ivars 是完全可以的（并且建议）。

现在，这就是问题所在。他们还为私有实例变量使用单个前导下划线。所以，如果你有相同的名字，你可能会发生冲突。为了看到这一点，在视图控制器方法的实现中，他们'_'并查看代码完成会抛出你的方式。

那么，他们为什么不阻止这种命名做法呢？因为冲突是在编译时捕获的。您不能有两个具有相同名称的实例变量。如果你尝试这样做，你会得到一个错误。

现在，为什么他们的代码模板会生成带有双下划线的名称？我不知道。“实现”实际上保留了前导双下划线（后跟大写字母），但我们看到像 __block 这样的 ObjC 添加。

为了我的钱，我避免任何带有双下划线的东西。Apple 可以在生成的代码中为所欲为。FWIW，他们为 ARC 生成的一些代码仍然引用旧的非 ARC 关键字，所以我不会把他们生成的代码当作福音。FWIW，我肯定**不会**保留他们为 Core Data 生成的代码。至少，您应该更改（在 managedObjectContext 访问器方法中）：

```
__managedObjectContext = [[NSManagedObjectContext alloc] init]; 
```

至

```
__managedObjectContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType]; 
```

顺便说一句，我看到人们使用美元符号作为前导或尾随字符作为他们的私有合成名称。

```
@synthesize foo = $foo;
@synthesize bar = bar$; 
```

我已经编写 C/C++ 超过 25 年了，但我对 ObjC 还是很陌生，它有自己的复杂性。所以，我不是语言律师。我什至不是律师助理。我所知道的是它似乎是合法的 - 它适用于我尝试过的所有东西，但我不能肯定地说美元符号不应该用于其他东西。Xcode 语法高亮不喜欢它（它不会用变量名的其余部分对其进行着色）。

我希望这足以回答您的问题，尽管它可能只是促使您提出更多问题......

# javascript - 粘贴到内容可编辑和清理后如何恢复光标位置？

> ID：10258637
> 
> 赞同：3
> 
> 时间：2012-04-21T11:51:56.877
> 
> 标签：javascript, cursor, copy-paste, contenteditable, sanitize

我有一个`<div>`，`contenteditable="true"`粘贴后我正在使用[Sanitize.js 清理](https://github.com/gbirke/Sanitize.js)粘贴的内容。当然，问题是在消毒之后，光标放在了 div 的开头。如何在粘贴的内容之后放置光标位置？

HTML： `<div contentEditable="true" id="ce"></div>`

来自 Sanitize.js 示例的 JS（已修改）：

```
function do_sanitize(){
    var elm = document.getElementById('ce');
    var cfg = Sanitize.Config.RELAXED;
    // Create new Sanitize object
    var s = new Sanitize(cfg);
    var cleaned_html = s.clean_node(elm);
    // Prepare container for sanitized HTML and append it
    var clean_container = document.getElementById('ce');
    while(clean_container.childNodes.length > 0) {
    clean_container.removeChild(clean_container.firstChild);
  }
  clean_container.appendChild(cleaned_html);
} 
```

# javascript - 使用 JavaScript 清空 Select 表单元素

> ID：10258639
> 
> 赞同：0
> 
> 时间：2012-04-21T11:52:07.537
> 
> 标签：javascript, jquery, forms, dom

我正在创建一个小型应用程序，在应用程序的一部分上，我正在创建一个下拉选择菜单，其中填充了数组中的值。

我遇到的问题是，当加载表单时，它成功加载并使用数组值填充选择选项，但问题是当我将另一个元素添加到数组并再次调用表单时，它仍然只会加载值从第一次调用表单时开始。

当我按下提交按钮时，我将如何让选择选项清除其值。这是调用的代码：

```
<div class="popupForm" id="newRelate_Form" style="display:none">
    <form name="relationFormOne">
        <script type="text/javascript" language="javascript">
            var $selectFrom = $('<select id="mySelect">');
            $($selectFrom).attr('id', 'objFrom');
            for (var i = 0; i < objectArray.length; i++)
            {
                var value = objectArray[i].Name;
                $('<option>').val(value).text(value).appendTo($selectFrom);
            }
            $selectFrom.appendTo($("#from_Object"));
            var fromVal = document.getElementById("objFrom");
        </script>
        <button class="closeDOMWindow" onclick="createObj(fromVal.options[fromVal.selectedIndex].text)">Create</button>
    </form> 
```

然后将该值传递给函数 createObj()：

```
function createObj()
{
    /*
        DO THE WORK NEEDED
    */
} 
```

现在什么 javascript 代码会清除 select 选项，以便在再次调用它时可以重新填充放入数组中的任何新对象？

感谢您的任何反馈。

顺便说一句，弹出表单是指我使用以下 jquery 插件的事实：[DOM Window](http://swip.codylindley.com/DOMWindowDemo.html)

感谢您的任何反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T12:00:50.803

纯 JavaScript：

```
var ob = document.getElementById('selectID');
while (ob.hasChildNodes())
    ob.removeChild(ob.firstChild); 
```

jQuery：

```
$('#mySelect').children().remove() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T12:15:13.183

不要忘记使用删除之前创建的选择标签`$('#mySelect').remove()`，然后运行该功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T12:21:07.047

首先，添加一段 html 的最佳方式是从字符串中写入：

```
<form id="relationFormOne">

<script type="text/javascript" language="javascript">
$(function(){
var objectArray = [{Name:'1'},{Name:'2'},{Name:'3'}];
var selectHtml = [];

$('#relationFormOne').append($('<select name="mySelect">'));

$(objectArray).each(function(ix, val){
    selectHtml.push('<option>'+val.Name+'</option>');
});
$('select[name=mySelect]').html(selectHtml.join(''));
}); 
</script>

<input type="button" value="clear" onclick="$('select[name=mySelect]>option').remove()" />
</form> 
```

当您想清除您的选择时，只需使用如下代码：

```
$('#mySelect>option').remove(); 
```

# android - 在非 Activity 类中使 用 MediaPlayer

> ID：10258642
> 
> 赞同：1
> 
> 时间：2012-04-21T11:52:26.850
> 
> 标签：android, this, android-mediaplayer, media, android-context

我`MediaPlayer`在非活动类中使用 android 时遇到了一些问题，总是出现上下文错误。这是错误的行：

```
MediaPlayer Shoot = MediaPlayer.create(this, R.raw.shot); 
```

现在我知道我不能`this`在服务中使用“”，但是我尝试过的所有其他东西都在不断地给出错误。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T12:04:00.137

你太幸运了，因为在过去的两天里，我开发了一个在后台服务中使用 MediaPlayer 的应用程序；）

您可以使用下一行简单地检索 MediaPlayer 的实例：

```
MediaPlayer mediaPlayer = new MediaPlayer(); 
```

然后您可以设置所有听众并播放您想要的歌曲。

**编辑 2012 年 4 月 22 日**

设置监听器（一个例子）：

```
 mediaPlayer.setOnErrorListener(new OnErrorListener() {                

                public boolean onError(MediaPlayer mp, int what, int extra) {
                        // TODO notify error to user or play next song
                        return true;
                }
        });
        mediaPlayer.setOnCompletionListener(new OnCompletionListener() {                       

                public void onCompletion(MediaPlayer mp) {
                        // TODO Notify to user the completion of song or play next song
                }
        }); 
```

要开始和播放歌曲，您必须执行以下操作：

```
try{
    mediaPlayer.setDataSource(mSongUrl);
    mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
    mediaPlayer.prepare(); 
} catch (Exception e) {
    e.printStackTrace();
} 
// Starting media player
mediaPlayer.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T11:56:02.260

为什么不直接将上下文引用传递给非活动类的构造函数。然后从那里保存并将其传递到需要的地方。

确保您的上下文引用在使用后不再有效。否则会导致内存问题。

# php - 如何从 Flash 电影 (.swf) 中读取文本

> ID：10258645
> 
> 赞同：3
> 
> 时间：2012-04-21T11:52:51.887
> 
> 标签：php, flash

今天我意识到 Google 正在索引 Flash 电影中的文本，这对我来说非常有趣，例如，如何使用任何服务器端语言 (PHP) 来实现这一点？由于它是一个编译文件，我唯一可能的方法是通过光学字符识别。

**编辑：** [这是一个示例](https://www.google.bg/search?ix=heb&sourceid=chrome&ie=UTF-8&q=site%3ahttp://m.bgflash.com/)，其中包含已为保加利亚 Flash 网站编制索引的所有 Flash 电影。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T12:20:08.390

您可能想阅读以下内容：[SWF Searchability](http://www.adobe.com/devnet/flashplayer/articles/swf_searchability.html)。

特别是，有一段可能是您提出问题的关键：

> Adobe 已向 Google 和 Yahoo! 提供 Flash Player 技术！这允许他们的搜索蜘蛛在实时 SWF 应用程序中导航，就好像他们是虚拟用户一样。Flash Player 技术针对搜索蜘蛛进行了优化，运行 SWF 文件的方式类似于文件在浏览器中的 Adob​​e Flash Player 中的运行方式，但它将在应用程序的任何状态下出现的所有文本和链接返回给搜索蜘蛛，然后出现在最终用户的搜索结果中。

因此，他们似乎为这两个搜索引擎提供了一个特定的 Flash 播放器，以使其内容*可抓取*，这就是为什么您可以通过电影中出现的文本进行搜索的原因。但是，我不确定您将如何使用任何服务器端语言来做到这一点。

# c++ - 如何在 Windows 平台上开发 iOS 应用程序？

> ID：10258646
> 
> 赞同：1
> 
> 时间：2012-04-21T11:52:53.550
> 
> 标签：c++, ios, xcode, sdk

> **可能的重复：**
> [Windows 上的 iPhone 开发](https://stackoverflow.com/questions/113547/iphone-development-on-windows)

Xcode 4 仅适用于 Mac，我收到 iOS 项目请求，我需要在不使用 Mac 的情况下开发 iOS 应用程序。我有一台 Windows 电脑。是否有与 iOS SDK 配合良好的 IDE，或者正在开发使用 iOS SDK 库的 C++ 代码是唯一的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T12:06:20.367

如果您熟悉 C#，请考虑[monotouch](https://stackoverflow.com/questions/tagged/monotouch)。在任何情况下，您都需要一台 mac 来注册该应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T12:07:47.097

一种较新的开源解决方案称为**MonoCross**。这是[他们网站](http://www.monocross.net/)的链接，这是[Google 代码网站](https://code.google.com/p/monocross/)。从他们的网站：

> Monocross 是一个使用 C# .NET 和 Mono 框架的开源跨平台移动框架。Monocross 让您可以在 iPad、iPhone、Android 设备、Windows Phone 7 和支持 Webkit 的手机上创建精美的应用程序。

它使用 C#。不需要 C++。

编辑：MonoCross 使用 MonoTouch。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T11:56:13.153

在您的情况下，如果您身边没有 Mac，那么使用 VirtualBox（或 VMware）并在那里安装 MacOS 会更好、更容易。并在VB里面开发。

# jquery - 事件 onSeek - 中止搜索过程

> ID：10258652
> 
> 赞同：5
> 
> 时间：2012-04-21T11:54:11.533
> 
> 标签：jquery, events, jwplayer, seek

是否可以中止搜索过程？我的 url 在 10 秒后过期，所以当用户点击 seek 时我必须请求一个新的 url。

```
onSeek: function(event)
{
     getFreshUrl({videoId:'XXXXX', action:get}, function(data)
     {
        jwplayer().load({file: data.url, start: event.offset});
     });
     // STOP SEEKING
} 
```

这可能吗？

提前致谢！彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:59:08.713

它可能有点晚了：

您使用的网址已经过验证，并将在 x 秒后停止工作。

尝试使用验证 url 而不是已验证的 url（这样在播放和搜索时的所有请求都将被再次验证）。

我没有看到来自验证服务器/页面的响应，但要使其正常工作，它需要重定向。

# php - PHP样板代码？

> ID：10258656
> 
> 赞同：2
> 
> 时间：2012-04-21T11:54:26.737
> 
> 标签：php, html5boilerplate, boilerplate

我是 PHP 新手。

我正在寻找一些样板代码来帮助我开始一个新项目，但不是一个完整的框架。我正在考虑类似[**HTML5 Boilerplate**](https://html5boilerplate.com/)之类的东西，但适用于 PHP。

我希望这样的样板能够提供一些方便的方法来访问数据库、字符串操作、自动加载等。

你知道任何这样**的 PHP Boilerplate**吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T12:05:49.847

最好的方法是制作自己的模板。我不认为开发人员会与其他人分享他们的模板。但是如果你不想浪费几个小时来制作模板，你总是可以使用一些 PHP 框架，比如 Yii、codeigniter、kohana、ZFM、cake 等。但它们不仅仅是一个简单的模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T11:59:24.460

有一些模板引擎，例如：

[树枝](http://twig.sensiolabs.org/)
[聪明](http://www.smarty.net/)

当您需要 PHP 框架时，有一些框架。谷歌他们一个提示：

[Yii](http://www.yiiframework.com/)
[Symfony2](http://symfony.com/)
[Cake PHP](http://cakephp.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T12:10:18.413

**php 本身就是一个模板引擎！**

不要使用其他模板库，它们只会减慢处理速度

**例子**

```
<persons>
    <? foreach ($persons as $person): ?>
    <person>
        <firstname><?= $person>firstname ?></firstname>
        <lastname><?= $person->lastname ?></lastname>
    </person>
    <? endforeach; ?>
</persons> 
```

**mysql**

有几个选项，如 ORM，但对于初学者，我建议使用 PDO

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-25T20:11:08.883

你可以试试[CodeIgniter](https://www.codeigniter.com/)、[Kohana](https://kohanaframework.org/)或[FuelPHP](http://fuelphp.com/)。

虽然它们是框架，但它们非常轻巧，并且都具有您正在寻找的那种功能。

# macos - “ 现有配置文件 (./config.inc.php) 不可读。”？

> ID：10258657
> 
> 赞同：6
> 
> 时间：2012-04-21T11:54:45.070
> 
> 标签：macos, osx-lion, xampp, root

刚刚在我的 Mac 上安装了 XAMPP。当我试图修改上传目录时，`config.inc.php`它说文件被锁定，并且由于我没有修改文件夹的权限而无法解锁。因此，我更改了对该文件夹的权限，并且文件不再被锁定，但我无法再通过浏览器访问“phpmyadmin” `http://localhost/phpmyadmin/`，每次尝试时，它都会显示`"Existing configuration file (./config.inc.php) is not readable."`

我在这个[页面上](http://myeasylinux.wordpress.com/2010/07/31/phpmyadmin/)搜索了解决方案，它说用于`chown root:cpanelphpmyadmin config.inc.php`更改文件的权限。我做到了，但它`chown: cpanelphpmyadmin: Invalid argument`在我的终端窗口中显示。我在这里很绝望，请任何人帮助我！

顺便说一句，我尝试删除App文件夹中XAMPP文件夹中的所有内容，然后创建一个新的，它不起作用

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-29T17:08:16.410

```
rasel@rasel-Dell:~$ sudo -s
rasel@rasel-Dell:~$ type your password
root@rasel-Dell:/# cd /opt/lampp/phpmyadmin
root@rasel-Dell:/opt/lampp/phpmyadmin# chmod 644 config.inc.php
root@rasel-Dell:/opt/lampp/phpmyadmin# cd /
root@rasel-Dell: /opt/lampp/lampp restart 
```

就是这样，它对我有用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-04-17T04:24:41.383

对于 OSX Mavericks 和 XAMPP 1.8.2-5 和 1.8.3-4 版本，需要使用上述相同的 chmod 644，但目录不同。

```
cd /Applications/XAMPP/xamppfiles/phpmyadmin/
sudo chmod 644 config.inc.php
[enter your password] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-03T08:31:18.337

我通过创建一个新的 config.inc.php 文件、复制所有原始锁定的 config.inc.php 内容并修改该行来解决了这个问题

```
$cfg['Servers'][$i]['password'] = 'myserverpassword'; 
```

并删除原来的锁定文件。这是为了以防您正在寻找更改 XAMPP 配置文件，以便您可以访问已输入新密码的服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-18T09:31:12.920

```
cd /Applications/XAMPP/xamppfiles/phpmyadmin/
sudo chmod 777 config.inc.php
[enter your password] 
```

更改后`config.inc.php`，您需要输入：

```
sudo chmod 644 config.inc.php 
```

只是`sudo chmod 644`没有为我工作。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-06-28T08:15:09.277

如果您使用的是 ubuntu 14.04，您实际需要做的是：

1.  前往终端
2.  键入-> sudo nautilus
3.  将打开一个文件对话框。
4.  将文件夹导航到 computer/opt/lampp/phpmyadmin/config.inc.php
5.  打开文件
6.  检查 $cfg['Servers'][$i]['password'] = '';
7.  将上面的 LOC 更改为 $cfg['Servers'][$i]['password'] = 'root';

并尝试打开 phpmy 管理员。您的问题将得到成功解决。

# opengl - OpenGL翻译奇怪的行为

> ID：10258658
> 
> 赞同：-1
> 
> 时间：2012-04-21T11:54:54.497
> 
> 标签：opengl, jogl

我正在用 java 开发一个应用程序，它使用 openGL (JOGL) 来绘制金字塔。当我尝试在 X 方向上平移金字塔时，我看到的是，我的金字塔也在 Z 方向上平移。当我尝试沿 Y 方向平移金字塔时，也会发生同样的事情。沿 Z 方向的平移似乎没有问题。是什么导致了这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T13:35:02.937

这种行为可能是由许多不同的因素引起的。

你可能有：

*   相机设置错误（很可能）
*   进行矩阵转换，您没有使用`glLoadIdentity`or `glPushMatrix`/重置`glPopMatrix`。

# linux - Linux 无法检测到 Altera FPGA

> ID：10258661
> 
> 赞同：2
> 
> 时间：2012-04-21T11:55:13.223
> 
> 标签：linux, usb, fpga, jtag, intel-fpga

嗯，我有一个 Altera FPGA 和 USB 冲击波。我下载了 quartus，但它没有检测到 FPGA，我尝试使用 urjtag，它工作正常。我尝试用 sudo 运行它，但还是一样。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-24T19:17:31.057

如果这个问题可以移动可能会很好。

这是一个指向该问题说明的站点的链接：[http ://www.fpga-dev.com/altera-usb-blaster-with-ubuntu/](http://www.fpga-dev.com/altera-usb-blaster-with-ubuntu/)

简而言之，由于 Quartus 通常会尝试以用户身份使用 USB 设备，因此 nu 必须授予用户使用该设备的权限。这可以通过 udev 规则来完成。您首先可以通过运行以下命令序列来确认这是一个权限问题。如果现在找到设备，这表明存在权限问题，因为我们现在已经以 root 身份运行所有内容：

```
 $ sudo killall -9 jtagd   # Kill jtagd, ...
    $ sudo killall -9 jtagd   # ...and verify jtagd is indeed not running.
    jtagd: no process found   # Good, verified.
    $ jtagconfig
    1) CV SoCKit [2-1]
      02D020DD   5CSEBA6(.|ES)/5CSEMA6/..
      4BA00477   SOCVHPS 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T03:24:35.093

我同意蒂姆的观点，这个问题应该在另一个地方问，你的问题可能是因为 USB blaster 的驱动程序没有正确安装。试着在网上搜索一下，看看有没有类似的问题，或者去Altera论坛问问题，那里有很多有经验的用户对这类问题很熟悉。

# c++ - 通过 C++ 在 Windows 上的唯一 CPU ID

> ID：10258662
> 
> 赞同：1
> 
> 时间：2012-04-21T11:55:25.313
> 
> 标签：c++, windows

好吧，我想获得一个唯一的 CPU ID，这样我就可以获得每台机器的唯一标识。我确实从 windows.h 库中检查了 __cpuid()，但问题是它得到的 ID，它是所有类型 CPU 的 ID，如果你有一个 I3 核心处理器，而我有一个 I3 核心处理器，它会给相同的“唯一 ID”。

这是我想出的从 __cpuid() 返回相同类型处理器的相同信息的 CPU ID 的方法：

```
std::string GetCPUID(){

            int CPUInfo[4] = {-1};
            __cpuid(CPUInfo, 0);
             if (CPUInfo[0] < 4)
            return ""; //Error on retrieving

            stringstream st;
            for(int i = 0; i <= 3; i++){ 
                         st << CPUInfo[i];
                    }

            return st.str();

} 
```

我还检查了一个名为“Hardware ID Extractor”的程序，它工作正常，它实际上返回一个唯一的 CPU ID 作为我想要的 GUI，所以他们提供了一个 DLL，以便我们可以提取它生成的 CPU ID，我用使用 DLL 并遵循他们的示例的最干净的代码，但它似乎在 Windows 7 上运行时没有返回任何内容。很多其他人通过 DLL 在 Windows 7 上抱怨这一点，即使 Windows 7 上的 GUI 返回正确的 CPU ID .

展示我在硬件 ID 提取器中的工作，

这是我下载 DLL 的站点（我选择了 C++、VB、.NET 的链接）： http: [//www.soft.tahionic.com/download-hdd_id/free-download/free%20download.html](http://www.soft.tahionic.com/download-hdd_id/free-download/free%20download.html)

这是要下载的 DLL 本身：http: [//www.soft.tahionic.com/download-hdd_id/free-download/DLL%20compressed/HardwareIDExtractorC.dll](http://www.soft.tahionic.com/download-hdd_id/free-download/DLL%20compressed/HardwareIDExtractorC.dll)

这是我从 Hardware ID Extractor 获得的代码（我使用的是 Visual Studio 2008）：

```
#include <iostream>
#include <windows.h>
#include <conio.h>
using namespace std;

int main (){

    char* (__stdcall *GetIDESerialNumber)(BYTE);

    HINSTANCE DllInst = NULL;
    if (DllInst == NULL) DllInst = LoadLibrary("C:\\HardwareIDExtractorC.dll");
    printf( "LoadLibrary error %d\n", GetLastError() );
    if (DllInst) {
        GetIDESerialNumber = (char* (__stdcall*)(BYTE))GetProcAddress(DllInst, "GetIDESerialNumber");

    //Now call the imported function
        cout << "SN: " <<  GetIDESerialNumber(0);   // 0 = first IDE hard drive in your system 
    }else{
        printf(" - Not Loaded");
    }

    _getch();

return 0;
} 
```

在 Visual Studio 输出中，它显示 DLL 是通过以下方式执行的：

```
'Test.exe': Loaded 'C:\HardwareIDExtractorC.dll', Binary was not built with debug information. 
```

我得到的程序输出是：`LoadLibrary error 998 - Not loaded`

有人知道我可以做些什么来获得唯一的 CPU ID，比如在应用程序硬件 ID 提取器中？我需要获得 CPU ID，因为如果我获得 HDD 信息，用户可能会格式化他们的硬盘驱动器并且程序将停止工作，因为我将其设计为仅适用于指定的计算机。

我正在使用 Windows 7 32 位 Ultimate 和 Intel I3 Core 处理器（如果有帮助的话）。

我希望我的问题很清楚。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T12:14:04.043

你无法完成这项工作。英特尔在 Pentium III 设计中引入了处理器序列号，可通过 cpuid 读取。由于[隐私问题](http://en.wikipedia.org/wiki/Processor_Serial_Number#Controversy_about_privacy_issues)，这引起了巨大的反响，英特尔被迫让步。该功能在后来的 Pentium III 设计中被删除，并且从未被放回。

您将不得不使用另一个指纹来源。不要只使用一个，收集一堆，只有在多个更改时才声明它无效。使用 NIC MAC 地址、RAM 大小、磁盘卷序列号等。在 SO 已经有成千上万的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T14:12:03.190

[硬件 ID 提取器](http://www.soft.tahionic.com/download-hdd_id/hardware%20ID%20programmer%27s%20DLL.html)可靠且易于使用。我有它。因为我很久以前购买了 DLL**和源代码，所以我不必购买升级。**我只是自己更改了代码。

> Hans 感谢您的回答，您知道这个名为“Hardware ID Extractor”的程序声称它检索 CPU ID

是的。DLL 不仅提供 CPU ID 和 HDD IDE ID，还提供许多其他与硬件相关的统计信息 (ID)。我已经在多个 CPU（AMD 和 Intel）上尝试过它，它就像一个魅力。

**方案**

最便宜的“保护”是序列号。那真是糟透了。一个没有头脑的客户在互联网上提供它，每个人都可以免费获得您的程序！更不用说今天的“黑客”不会打扰您的软件保护。他们将使用假信用卡购买您的软件，并在网络上发布密钥，或者他们将使用有效信用卡购买软件，然后他们将使用 30 天退款政策来取回款项。一些疯狂的软件经销商，例如 Plimus（是的，远离 Plimus）正在对软件供应商强制执行此操作。经典的序列号和恐龙一样死。

另一个建议，基于服务器的保护，也不是很好。更难被假信用卡“黑客”欺骗，也不会在整个互联网上泄露密钥。但是您将失去至少一半的客户，因为现在每个人都有防火墙/防病毒软件，会阻止您的程序连接到服务器。那些移动的呢？还是只能随机/很少访问互联网？我什至不敢谈论那些在机构/公司/组织的防火墙后面工作的人。这些公司中的大多数都被愚蠢的网络管理员“统治”，他们切断了除 Internet Explorer（甚至是 Firefox）以外的任何程序访问 Internet。我去过那里。我已经做到了。相信我，这是噩梦！否则，要将程序连接到互联网，您必须去管理部门填写大量申请表，最后也许，也许，他们会让程序访问互联网。也许通过代理。

无论如何，为您的程序执行基于密钥的可靠保护非常容易：向客户发送密钥但不要发送经典密钥，而是发送基于硬件的密钥。这样，密钥将仅在该特定系统中有效。您甚至可以在您的网站上发布公告：“请随时公开此密钥。我不在乎”:)

只是不要依赖单个硬件 ID（仅例如 CPU），而是要依赖所有这些 ID。允许用户更改/升级除一个以外的所有硬件组件。因此，只要他们不更改整台计算机，许可证就可以工作。由于每 3.4 年购买一台新计算机（我在 Internet 上找到了统计数据），您应该允许用户要求 3 个新密钥（重新激活许可证）。可能你会在 3.4 年的时间间隔到期之前发布一个新版本。因此，无论如何，客户都必须购买升级并获得新密钥。

# multithreading - 初始化一个事件数组，win32,ada

> ID：10258664
> 
> 赞同：1
> 
> 时间：2012-04-21T11:55:48.140
> 
> 标签：multithreading, winapi, events, ada

我需要在 win32 的帮助下欺骗一系列事件。语言：阿达。

我所做的：

```
p:integer := 4;
Type EvArr1 is array (1..p) of HANDLE;

procedure Start (Tid : in integer) is
       Task T1;
        task body T1 is
            Bl:bool;
            temp:Dword;
            ...
        begin
                        ...
            Bl:=(EvArr1(Tid));
            temp:=WaitForMultipleObjects(EvArr1, infinite);
                        ...
    end T1;
end start;
BEGIN
        ...
    for i in 1..p loop
        EvArr1(i) := CreateEvent(null, 1, 0, null); -- error
        EvArr2(i) := CreateEvent(null, 1, 0, null); -- error
        start(i);
    end loop; 
```

错误：

> 类型不可转换；操作数类型必须是数组类型，继续

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:51:52.447

正如声明的那样，`EvArr1`是一个类型，而不是一个对象。

尝试

```
EvArr1 : array (1 .. p) of HANDLE; 
```

或者

```
type Event_Array is array (1 .. p) of HANDLE;
EvArr1 : Event_Array; 
```

如果您想要具有类型参数的子程序/条目，则第二个很好。更妙的是，

```
type Event_Array is array (Positive range <>) of HANDLE;
EvArr1 : Event_Array (1 .. p); 
```

# javascript - 如何在jquery中停用过去的日期

> ID：10258668
> 
> 赞同：-1
> 
> 时间：2012-04-21T11:56:31.993
> 
> 标签：javascript

我正在使用 jquery 日历，我想停用所有过去的日期。用户只能输入当前日期或大于当前日期的日期。我正在使用此代码

```
<!-- calendar code starts-->
    <link rel="stylesheet" type="text/css" href="calendar2/tcal.css" />
    <script type="text/javascript" src="calendar2/tcal.js"></script> 
    <script type="text/javascript"> 
      $("#dt").datepicker({ minDate: new Date() });
     </script> 
<!-- calendar code ends-->

html code
<div><input type="text" id="dt" name="requireddate" 
class="tcal" value="<?php echo $rec5['requireddate']; ?>" /> </div> 
```

但上面的代码不起作用..它显示所有过去的日期

我正在使用这个日历`http://www.softcomplex.com/products/tigra_calendar/`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T12:06:42.440

**更新**
*刚刚注意到你不使用jquery UI ..我的回答是基于那个..*

* * *

**答案（*基于 jQuery UI datepicker*）**

在您的示例中，以前的日期已停用..

它们已显示，但不可选择..

你想让它们不可见吗？

为此，您可以使用该`beforeShowDay`事件，将类应用到过去并使用 css 隐藏它们

**脚本**

```
var today = new Date();
$("#dt").datepicker({
    minDate: today,
    beforeShowDay: function(cdate){
        var old = cdate < today;
        return [true, old?'old':''];
    }
}); 
```

和**CSS**

```
td.old span{
    visibility:hidden;
} 
```

演示在[http://jsfiddle.net/gaby/s2ZmQ/1/](http://jsfiddle.net/gaby/s2ZmQ/1/)

# python - fuse-python xmp.py - 无法创建文件

> ID：10258670
> 
> 赞同：1
> 
> 时间：2012-04-21T11:56:37.060
> 
> 标签：python, filesystems, fuse

我正在编写一个网络文件系统，我首先尝试理解 python-fuse 提供的 xmp.py。

好吧，基本上我通过网络发送所有调用，在服务器端执行它并将结果发送给客户端并将其返回给用户。这些部件工作得很好。

我面临的问题是，xmp.py 无法创建文件，因此问题也出现在我的网络文件系统中。

我遵循的步骤是：

1.  通过以下方式安装 fuse-python：

    ```
    sudo apt-get install python-fuse 
    ```

2.  然后我进入所在的目录`xmp.py`：

    ```
    cd /usr/share/doc/python-fuse/examples/ 
    ```

3.  我使用以下命令行参数运行 xmp.py 程序

    ```
    python xmp.py -o root=/home/user /tmp/fuse 
    ```

    将在哪里`/home/user`复制或安装`/tmp/fuse`

4.  然后我 cd 进入`/tmp/fuse`目录并尝试使用 制作一个文件`cat`，例如：

    ```
    cd /tmp/fuse
    cat > temp.txt 
    ```

    我得到错误

    ```
    bash: temp.txt: Invalid argument 
    ```

经过大量的探索，我相信这是由于功能

```
def getattr(self, path):
    return os.lstat("." + path) 
```

当我执行`cat > temp.txt`,时，由于找不到`os.lstat("./temp.txt")`文件而引发错误。`/home/user/temp.txt`在此之后，该程序会卡住一段时间并减慢我的计算机速度。

请帮我弄清楚我做错了什么。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T00:16:24.530

我想我已经弄清楚了，我看到的问题是曾经`os.lstat("./temp.txt")`失败，调用文件类的`__init__`方法，然后立即调用 truncate 并且程序返回。

我遵循的一种解决方案是根本不使用文件类，并实现 Fuse 类' `open`/`create`来制作文件。

这种方法对我有用。如果有人有更好的建议，请告诉我。我想使用面向对象的方法并使用文件类。

# c# - 在字符串c#中查找单个字符的索引

> ID：10258671
> 
> 赞同：0
> 
> 时间：2012-04-21T11:56:55.937
> 
> 标签：c#, string

我对这段代码感到困惑。

```
string str = sample.indexof("a",0); 
```

它正在工作。但下面不起作用。

```
string str = sample.indexof("\",0); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T11:58:49.467

您需要在 C# 中转义字符串和字符文字中的反斜杠 - 或使用逐字字符串文字。这些中的任何一个都可以：

```
int index = sample.IndexOf("\\", 0);
int index = sample.IndexOf(@"\", 0);
int index = sample.IndexOf('\\', 0); 
```

或者不指定初始索引，如果您还是从头开始看：

```
int index = sample.IndexOf("\\");
int index = sample.IndexOf(@"\");
int index = sample.IndexOf('\\'); 
```

如果您只寻找一个字符，我个人会使用其中的最后一个 - 更清楚的是它确实*是*一个字符。（它也可能稍微更有效，但清晰更重要。）

（请注意，C# 区分大小写 - 它是[`IndexOf`](http://msdn.microsoft.com/en-us/library/system.string.indexof.aspx)，不是`indexof`。另请注意，它返回`int`，而不是`string`。如果您可以使示例代码准确，这将有所帮助...）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T11:58:37.597

因为 \ 是转义序列字符，您可以尝试以下选项之一来工作

```
int i = sample.indexof("\\",0) 
```

或者

```
int i = sample.IndexOf(@"\", 0); 
```

# macos - 如何知道窗口是否最小化？

> ID：10258676
> 
> 赞同：1
> 
> 时间：2012-04-21T11:57:52.633
> 
> 标签：macos, cocoa

我想知道屏幕上可以看到哪些窗口。CGWindowListCopyWindowInfo 给了我窗口列表，这很好，除了它还列出了最小化的窗口。我尝试使用 kCGWindowIsOnscreen 来检测隐藏/最小化的窗口，但它总是为所有窗口提供 TRUE。有没有办法以某种方式检测到这一点？

```
- (void) checkWindows {
NSMutableArray *windows = (__bridge NSMutableArray *)CGWindowListCopyWindowInfo(kCGWindowListOptionOnScreenOnly | kCGWindowListExcludeDesktopElements, kCGNullWindowID);

for (NSDictionary *window in windows) {
    NSString *owner = [window objectForKey:@"kCGWindowOwnerName" ];
    NSString *name = [window objectForKey:@"kCGWindowName" ];
    CFBooleanRef visibleBR = (CFBooleanRef)[window objectForKey:@"kCGWindowIsOnscreen"];
    bool visible = CFBooleanGetValue(visibleBR);

    NSLog(@"%@,%@,Visible:%@",owner,name,visible?@"YES":@"NO");

} 
```

}

更新：很奇怪，这只是微软的话。事实上，它不必隐藏，Word 会创建一个全屏窗口，该窗口不可见，但列在可见窗口中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T01:14:11.300

该问题是由 MS Word 引起的。它创建一个不可见但列在可见窗口中的全屏窗口。CGWindowListCopyWindowInfo 正确列出可见/最小化的窗口。

# extjs - 如何将 ExtJS GridPanel 导出到 Excel？

> ID：10258679
> 
> 赞同：2
> 
> 时间：2012-04-21T11:58:11.337
> 
> 标签：extjs, export-to-excel, gridpanel

我想将我的 GridPanel 导出到 Excel。我搜索了太多次，但找不到任何可接受的解决方案。

你能帮我解决这个问题吗？

PS：我使用 ExtJS 3.2 和 3.3.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T05:28:40.263

在 javascript 中生成 xls/xlsx 没有任何好的解决方案。

您最好的收获是在服务器端进行。

将包含所有数据的ajax 请求发送到[http://your-website.com/generate_xls](http://your-website.com/generate_xls)，然后返回 xls 标头，然后返回正文。

这是一个很好的 PHP 库，如果您使用的是 PHP： http: [//phpexcel.codeplex.com/](http://phpexcel.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-20T17:08:37.370

.随着 ExtJS 5 的发布，最好开始将您的应用程序移植到更新版本的 ExtJS，至少 4。

我们创建了一个前端 XLS(X) 和 CSV 导入和导出工具，您可以通过几行代码在 ExtJS 4 应用程序中使用它。用户只需将文件拖到网格上即可完成。我们刚刚推出它，这里是一个描述：http: [//2gears.com/2014/08/ext-js-excel-import-export-easy/](http://2gears.com/2014/08/ext-js-excel-import-export-easy/)

如前所述，导入和导出完全在客户端完成，因此在具有许多并发用户的应用程序中，这可以减轻服务器的过度负载。在接下来的几周内，还将添加一个导入向导，用于指导能力较差的用户导入文件。

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-11T08:59:59.923

这是一个服务器端的工作。这是我用来生成基于网格数据的表格报告的内容：http: [//xmlgraphics.apache.org/fop/](http://xmlgraphics.apache.org/fop/)

此外，您可以从表格数据生成一个非常漂亮、功能齐全的 Excel 电子表格：http: [//msdn2.microsoft.com/en-us/lib...ffice.10 ).aspx](http://msdn2.microsoft.com/en-us/lib...ffice.10).aspx)

# sql - PostgreSQL 查询 WHERE 日期大于 3 年

> ID：10258680
> 
> 赞同：15
> 
> 时间：2012-04-21T11:58:21.600
> 
> 标签：sql, postgresql, date, where-clause

我有一个包含 4 个日期的表：

```
CREATE TABLE dates (
    date date
);

    11-mar-2008
    25-now-2007
    18-apr-2012
    20-apr-2012 
```

我需要一个返回所有三岁以上的日期的查询。那应该是前两个日期。

这对我不起作用：

```
SELECT * FROM dates WHERE date = now()::-1095; 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-21T12:01:51.540

```
SELECT 
  * 
FROM 
  dates 
WHERE 
  date < now() - '3 years' :: interval; 
```

此外，为您的列命名`date`不是一个好习惯，因为这是 PostgreSQL 中的保留字。

# linux - Bash 关联数组错误

> ID：10258686
> 
> 赞同：1
> 
> 时间：2012-04-21T11:59:06.320
> 
> 标签：linux, bash, shell, scripting, sh

尝试在 bash 中执行以下操作时

```
foo=foo
my_array[$foo]=bar 
```

我收到错误“bash: foo: expression recursion level exceeded (error token is "foo")”。但这很好用：

```
foo=hello
my_array[$foo]=bar 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T12:12:36.007

问题是您没有将数组声明为关联数组，因此假定它是数字数组。当 bash 尝试评估时

```
my_array[$foo]=bar 
```

他进入的是

```
my_array[foo]=bar 
```

但数组索引仍然不是数字，所以他尝试再次评估它，导致

```
my_array[foo]=bar 
```

因为您不需要在方括号之间使用 $ 。您可以看到这种情况一直持续下去，直到引发超出递归级别的异常。

要解决它，只需将数组声明为关联：

```
declare -A my_array 
```

# android - 插入耳机时如何降低 MediaPlayer 的音量？

> ID：10258694
> 
> 赞同：4
> 
> 时间：2012-04-21T12:00:34.767
> 
> 标签：android, media-player, volume, android-audiomanager, headphones

针对 Android 2.2。

我需要检查用户在收听媒体时是否使用扬声器或耳机。到目前为止，我发现的最好的是[isWiredHeadsetOn](http://developer.android.com/reference/android/media/AudioManager.html#isWiredHeadsetOn%28%29)方法。可惜它已经被弃用了。有没有更好的方法来判断耳机是否插入？

真正的问题是：插入耳机时如何降低`MediaPlayer`音量？在播放开始（即通过布尔检查）和播放期间（即通过事件）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T09:52:26.703

我发布了一个链接，因为我认为这将有助于回答并转换为评论。以下代码来自，我不相信。他们用它来收听未插入的耳机，但是对于您所要求的，应该可以使用相同的概念： [Headphone Jack Listener Android](https://stackoverflow.com/questions/9985343/headphone-jack-listener-android)

```
private class NoisyAudioStreamReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        if (AudioManager.ACTION_AUDIO_BECOMING_NOISY.equals(intent.getAction())) {
            pause();
        }
    }
}

private IntentFilter intentFilter = new IntentFilter(AudioManager.ACTION_AUDIO_BECOMING_NOISY);

private void startPlayback() {
    registerReceiver(myNoisyAudioStreamReceiver(), intentFilter);
}

private void stopPlayback() {
    unregisterReceiver(myNoisyAudioStreamReceiver);
} 
```

# iphone - 将视图带回其他 iPhone

> ID：10258701
> 
> 赞同：0
> 
> 时间：2012-04-21T12:01:02.510
> 
> 标签：iphone, ios, uiview

我想将一个视图（firstView）放回另一个视图（secondView）。SecondView 基本上是一个使用 CGContext 的条形图。

我想我不能在那里使用**bringViewToFront**。所以我需要将firstView放回secondView。是否有一些默认功能可以将视图放回其他视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T12:15:34.853

的倒数[`bringSubviewToFront:`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW24)是[`sendSubviewToBack:`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW23)。

> **发送子视图返回：**
> 
> 移动指定的子视图，使其出现在其兄弟视图的后面。

另一种选择是使用[`insertSubview:belowSubview:`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW21)or [`exchangeSubviewAtIndex:withSubviewAtIndex:`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instm/UIView/exchangeSubviewAtIndex:withSubviewAtIndex:)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T12:18:31.420

检查 UIView.h

你会发现所有相关的方法 `UIViewHierarchy`

像，

```
(void)exchangeSubviewAtIndex:(NSInteger)index1 withSubviewAtIndex:(NSInteger)index2;
- (void)bringSubviewToFront:(UIView *)view;
- (void)sendSubviewToBack:(UIView *)view; 
```

还有更多……问候，尼尔。

# android - 在真正的 Android 手机上运行 Python 应用程序

> ID：10258703
> 
> 赞同：6
> 
> 时间：2012-04-21T12:01:18.997
> 
> 标签：android, python

为了使用 Python 开发 Android 应用程序，我需要在我的计算机上安装 Python for Android 和 SL4A 以与 Android 模拟器一起使用。我的问题是，当我将此应用程序分发给实际用户/手机时，手机是否需要明确获取适用于 Android 和 SL4A 的 Python？还是 Android 设备中内置了支持基础设施？或者有没有一种方法可以打包 Python 应用程序，用户不必为了运行应用程序而获得 SL4A 和 Python for Android？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T12:29:09.640

有关重新分发脚本以在开发设备以外的设备上运行的说明如下：

[http://code.google.com/p/android-scripting/wiki/SharingScripts](http://code.google.com/p/android-scripting/wiki/SharingScripts)

您可以将它们包装在模板项目中并构建一个独立的 apk。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T12:34:13.003

您的用户必须在他们的手机上安装 SL4A 和语言插件（python？），这不是内置功能。

由于源代码可用，因此可以创建组合应用程序，其中包括您的脚本和 SL4A/python 代码，但在我看来，这首先违背了编写脚本的目的。

# c# - wpf usercontrol 在应用程序中的多个位置具有公开的命令

> ID：10258705
> 
> 赞同：2
> 
> 时间：2012-04-21T12:01:48.567
> 
> 标签：c#, wpf, mvvm, user-controls

我显然没有在某个地方得到这个。

我创建了一个 UserControl，其基本内容是：

```
private readonly DependencyProperty SaveCommandProperty =
      DependencyProperty.Register("SaveCommand", typeof(ICommand),
                                  typeof(ctlToolbarEdit));

private readonly DependencyProperty IsSaveEnabledProperty = 
      DependencyProperty.Register("IsSaveEnabled", typeof(bool), 
        typeof(ctlToolbarEdit), new PropertyMetadata(
           new PropertyChangedCallback(OnIsSaveEnabledChanged)));

public ctlToolbarEdit()
{
   InitializeComponent();
}

public bool IsSaveEnabled
{
   get { return (bool)GetValue(IsSaveEnabledProperty); }
   set { SetValue(IsSaveEnabledProperty, value); }
}

public static void OnIsSaveEnabledChanged(DependencyObject d,
   DependencyPropertyChangedEventArgs e)
{
   ((ctlToolbarEdit)d).cmdSave.IsEnabled = (bool)e.NewValue;
}

#region Command Handlers
public ICommand SaveCommand
{
   get { return (ICommand)GetValue(SaveCommandProperty); }
   set { SetValue(SaveCommandProperty, value); }
}

private void cmdSave_Click(object sender, RoutedEventArgs e)
{
   if (SaveCommand != null) 
      SaveCommand.Execute(null);
}

#endregion 
```

优秀的。你可以看到我在做什么......处理按钮的点击事件，并基本上启动命令。

托管控件的表单（让我们暂时称其为 Form1 ......但请注意，这实际上是一个 UserControl：我相信在 MVVM 中的常见做法）具有以下行：

```
<ctl:ctlToolbarEdit HorizontalAlignment="Right" Grid.Row="1" 
   SaveCommand="{Binding Save}" IsSaveEnabled="{Binding IsValid}" /> 
```

这很好用。**我的ViewModel**中有一个名为*“Save”的***ICommand**，并且**ViewModel**正确显示了**IsValid**属性。

 *******到目前为止非常好。

现在我想在 Form2 上也有我的新用户控件（这也是一个用户控件 - 我相信在 MVVM 上的常见做法）。碰巧的是，Form1 和 Form2 同时出现在屏幕上。

它编译，但我得到一个运行时异常：

> 'SaveCommand' 属性已由 'ctlToolbarEdit' 注册。”

...让我相信我根本没有得到“命令”。

为什么我不能在多个地方使用我的用户控件？

如果我不能，你会建议另一种方法来做到这一点吗？

非常令人沮丧！

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T12:21:26.297

尝试使您的依赖项属性静态。否则，每次实例化新控件时都会重新注册。否则，您对 MVVM 命令的使用看起来不错，听起来您对它掌握得很好。*******

# iphone - 使用 xcode 4 在 ios 5 中创建选项卡式导航应用程序的问题

> ID：10258708
> 
> 赞同：2
> 
> 时间：2012-04-21T12:02:34.190
> 
> 标签：iphone, objective-c, ios, xcode, tabbed-view

我正在尝试更改**xcode 4**上的选项卡式应用程序以合并没有情节提要的导航控制器。第一个选项卡包含一个表格。这是需要导航的。

这是 FirstViewController.h

```
#import <UIKit/UIKit.h>

@interface FirstViewController : UIViewController <UITableViewDelegate,     UITableViewDataSource> {
IBOutlet UITableView *storeDetailsTable;
}

@property (nonatomic, retain) UITableView *storeDetailsTable;
@property (nonatomic, strong) NSDictionary *resultData;
@property (nonatomic, strong) NSMutableArray *populatedStoreArray;
@property (nonatomic, strong) NSMutableArray *images;

@end 
```

这是 NavController.h：

```
 #import <UIKit/UIKit.h>

    @interface NavController : UINavigationController

    @property (nonatomic,retain) IBOutlet UINavigationController * navController;

    @end 
```

因此，我将 NavController 用作 UIViewControllerSubclass，然后将其更改为上述内容。

AppDelegate.h：

```
#import <UIKit/UIKit.h>
@class NavController;

@interface AppDelegate : UIResponder <UIApplicationDelegate, UITabBarControllerDelegate> {
    IBOutlet NavController *navController;
}

@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) UITabBarController *tabBarController;
@property (strong, nonatomic) IBOutlet NavController *navController;

@end 
```

和 AppDelegate.m：

```
#import "AppDelegate.h"
#import "FirstViewController.h"
#import "SecondViewController.h"
#import "NavController.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize tabBarController = _tabBarController;
@synthesize navController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    navController = [[NavController alloc] initWithNibName:@"NavController" bundle:nil];
//        UIViewController *viewController1 = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
    UIViewController *viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = [NSArray arrayWithObjects:navController, viewController2, nil];
    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

现在，当我构建并运行它时，我看到了 2 个选项卡。但是第一个选项卡只是一个描绘导航控制器的空白黑屏，但没有应有的表格视图。

有什么我错过的吗？

谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T17:53:08.447

在您的代码中，我看不到您正在初始化 FirstViewController 类并使其为 NavController 所知。NavController 需要使用 RootViewController 进行初始化，例如：

```
NavController *myNavController = [[NavController alloc] initWithRootViewController:yourFirstViewController]; 
```

查找更多信息的好地方是：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)

# python - 将文件中的二维数组读入python列表

> ID：10258710
> 
> 赞同：1
> 
> 时间：2012-04-21T12:02:41.857
> 
> 标签：python

我正在尝试将逗号分隔值的二维数组从文件读取到列表中。我有以下问题，如何摆脱尾随换行符？这就是我的意思。这是我读过的一行。

```
['0', '0', '0', '1', '0', '0', '0', '0', '0', '0', '0', '0', '0', '1', '1', '1\n'] 
```

目前，我在代码中有以下内容：

```
ins = open( "parseTable.txt", "r" )
parseTable = []
for line in ins:
    row = line.split(',')
    parseTable.append(row) 
```

谢谢大家的提示。我做了以下事情。感谢所有的提示。我做了以下事情。

```
ins = open( "parseTable.txt", "r" )
parseTable = []
for line in ins:
    row = line.split(',')
    parseTable.append(map(int,line.split(','))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T12:07:51.277

对现有代码唯一需要的更改是`rstrip()`在您之前的行上使用该函数`split()`。例如，

```
ins = open( "parseTable.txt", "r" )  # the "r" is not really needed - default 
parseTable = []

for line in ins:
   row = line.rstrip().split(',')  # <- note use of rstrip()
   parseTable.append(row) 
```

这将根据要求消除尾随换行符。

* * *

一个简单的例子，一步一步：

```
In [2]: s = 'this is a test\n'

In [3]: s
Out[3]: 'this is a test\n'

In [4]: s.rstrip()
Out[4]: 'this is a test' 
```

因此，为了使更改生效，您需要进行分配

```
In [5]: s = s.rstrip()

In [6]: s = s.split()

In [7]: s
Out[7]: ['this', 'is', 'a', 'test'] 
```

或者在一个步骤中：

```
 In [11]: s = s.rstrip().split()

 In [12]: s
 Out[12]: ['this', 'is', 'a', 'test'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T12:16:23.247

带有`with`语句、列表理解和`csv`模块

```
import csv
with open("parseTable.txt") as f:
    parseTable = [x.rstrip() for x in row for row in csv.reader(f)] 
```

编辑：

1.  `with`当打开/处理文件时出现异常时，语句将自动关闭您的文件。在您的情况下可能没有必要，但您应该记住这种可能性。使用上下文管理器是一种很好的做法 [[更多](http://docs.python.org/reference/compound_stmts.html#the-with-statement)]

2.  列表理解通常会使您的脚本更快，但有时更难阅读。无论如何，您必须了解并使用它。

3.  我并不是说任何支持`csv`模块或反对使用内置函数打开文件并使用`split(',')`. 这是你的选择，我只是建议替代方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T12:09:32.910

```
t = []
for line in open("txt", "r").readlines():
    t.append(line.rstrip().split(',')) 
```

# c# - 我想要类似 switch 语句的东西（但当然不同）

> ID：10258711
> 
> 赞同：3
> 
> 时间：2012-04-21T12:02:54.643
> 
> 标签：c#, c#-4.0

是否有一个 C# 构造，例如`switch`允许控制下降到下一个级别的语句？我有这样的事情：

```
 public static IEnumerable<string> SeverityOrHigher(string severity)
    {
        var result = new List<string>();

        switch (severity.ToUpper())
        {
            case "ALL":
                result.Add("ALL");
            case "DEBUG":
                result.Add("DEBUG");
            case "INFO":
                result.Add("INFO");
            case "WARN":
                result.Add("WARN");
            case "ERROR":
                result.Add("ERROR");
            case "FATAL":
                result.Add("FATAL");
            case "OFF":
                result.Add("OFF");
            default:
                break;
        }

        return result;
    } 
```

...这显然在 C# 中不起作用，( `Control cannot fall through from one case label...`) 但在我看来它应该如此。我知道它会在那里中断，但这不会给我正在寻找的数据流。可以做些什么来让这一切以我想要的方式发生？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-21T12:11:17.760

在你的情况下，你可以用一点 LINQ 来模拟“下降的情况”：

```
public static IEnumerable<string> SeverityOrHigher(string severity)
{
    var result = new List<string>() 
        { "ALL", "DEBUG", "INFO", "WARN", "ERROR", "FATAL", "OFF" };
    return result.SkipWhile(l => l != severity.ToUpper()).ToArray();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T12:16:22.427

除了 goto 等，您还可以使用枚举和一些 linq：

```
 public static IEnumerable<Severity> SeverityOrHigher(Severity severity)
    {
        var value = (int) severity;

        return Enum.GetValues(typeof (Severity))
            .Cast<int>()
            .Where(i => i >= value)
            .Select(i => (Severity) i);
    }

    public enum Severity
    {
        All = 0,
        Trace = 1,
        Debug = 2,
        Information = 3,
        Warning = 4,
        Error = 5,
        Fatal = 6
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T12:12:44.887

这不是最佳解决方案，但您可以使用如下`goto`语句：

```
switch (severity.ToUpper())
{
  case "ALL":
    result.Add("ALL");
    goto case "DEBUG";
  case "DEBUG":
    result.Add("DEBUG");
    goto case "INFO";
  case "INFO":
    result.Add("INFO");
    goto case "WARN";
  case "WARN":
    result.Add("WARN");
    goto case "ERROR";
  case "ERROR":
    result.Add("ERROR");
    goto case "FATAL";
  case "FATAL":
    result.Add("FATAL");
    goto case "OFF";
  case "OFF":
    result.Add("OFF");
    break;
  default:
    break;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T12:14:24.463

使用转到：

```
 switch (severity.ToUpper())
        {
            case "ALL":
                result.Add("ALL");
                goto case "DEBUG";
            case "DEBUG":
                result.Add("DEBUG");
                goto case "INFO";
            case "INFO":
                result.Add("INFO");
                goto case "WARN";
            case "WARN":
                result.Add("WARN");
                goto case "ERROR";
            case "ERROR":
                result.Add("ERROR");
                goto case "FATAL";
            case "FATAL":
                result.Add("FATAL");
                goto case "OFF";
            case "OFF":
                result.Add("OFF");
                break;
            default:
                break;
        } 
```

微软（含蓄地）推荐这种用法： http: [//msdn.microsoft.com/en-us/library/06tc147t (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/06tc147t(v=vs.71).aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-21T12:48:05.843

@nemesv 的 Linq 答案是更好的解决方案，但如果你想用 switch 来做，你可以这样做并且会得到相同的结果。

```
public static IEnumerable<string> SeverityOrHigher(string severity)
{
  var lastFound = -1;

  var severityList = new List<string>() { "ALL", "DEBUG", "INFO", "WARN", "ERROR", "FATAL", "OFF" };
  var results = new List<string>();

  foreach (var t in severityList)
  {

    if (lastFound > -1)
    {
      for (var index = lastFound + 1; index < severityList.Count; index++)
      {
        results.Add(severityList[index]);
      }
      return results;
    }

    switch (severity.ToUpper())
    {
      case "ALL":
        results.Add(severity);
        lastFound = 0;
        break;
      case "DEBUG":
        lastFound = 1;
        results.Add(severity);
        break;
      case "INFO":
        lastFound = 2;
        results.Add(severity);
        break;
      case "WARN":
        lastFound = 3;
        results.Add(severity);
        break;
      case "ERROR":
        lastFound = 4;
        results.Add(severity);
        break;
      case "FATAL":
        lastFound = 5;
        results.Add(severity);
        break;
      case "OFF":
        lastFound = 6;
        results.Add(severity);
        break;
    }
  }

  return results;
} 
```

**测试：**

```
 var list = SeverityOrHigher("ALL");
  foreach (var severity in list)
  {
    Console.WriteLine(severity);
  }

  Console.ReadKey(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-21T12:06:46.253

看起来不是很好，但可以为您完成这项工作：

```
string s = severity.ToUpper();
result.add("OFF");
if (s == "OFF")
  return result;
result.add("FATAL");
if (s == "FATAL")
  return result;
result.add("ERROR");
if (s == "ERROR")
  return result;
// ...
result.add("ALL");
return result; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-21T12:13:25.993

我会选择创建另一个代表所有有效严重性的列表并检查输入严重性是否是其中之一：

```
public static IEnumerable<string> SeverityOrHigher(string severity)
{
    var result = new List<string>();
    var severities = new List<string> { "ALL", "DEBUG", "INFO", "WARN", "ERROR", "FATAL", "OFF" };

    severity = severity.ToUpper();

    if (severities.Contain(severity))
            result.Add(severity);

    return result;
} 
```

# facebook - Facebook FQL 错误 - 使用“updated_time”列对“流”表进行 FQL 查询不再返回正确结果

> ID：10258713
> 
> 赞同：0
> 
> 时间：2012-04-21T12:02:59.593
> 
> 标签：facebook, facebook-fql

我遇到了与以下错误页面所示相同的错误。

使用“updated_time”列对“流”表进行 FQL 查询不再返回正确的结果

```
SELECT post_id,updated_time, actor_id, target_id, message,comments FROM stream WHERE source_id  = " + PageID + " AND updated_time >" + unixfromdate 
```

请参阅下面的错误 URL。

[http://developers.facebook.com/bugs/316607451683448?browse=search_4eed342fe60cc52875050191](http://developers.facebook.com/bugs/316607451683448?browse=search_4eed342fe60cc52875050191)

有什么解决办法吗？

布里耶什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:20:45.153

这是FB错误。FB 中至少有两个关于这个问题的 bug： [https ://developers.facebook.com/bugs/322648647820172/](https://developers.facebook.com/bugs/322648647820172/) [https://developers.facebook.com/bugs/436202526413815/](https://developers.facebook.com/bugs/436202526413815/)

我找到了另一个：[https](https://developers.facebook.com/bugs/105849459574668) ://developers.facebook.com/bugs/105849459574668 并以如下评论关闭 - “这个错误对开发者社区没有太大影响，所以我们关闭了它”！

请报告您的问题 - 否则 FB 将永远无法解决它！

# cordova - 可以在子浏览器上捕获 URL（正在加载）吗？

> ID：10258714
> 
> 赞同：0
> 
> 时间：2012-04-21T12:03:12.243
> 
> 标签：cordova, phonegap-plugins

**你好，**

情况是这样的。

我的项目需要使用 PhoneGap 在 iOS 和 Android 上构建 Web 应用程序。

90% 的页面嵌入在设备上。10% 位于应加载子浏览器的远程站点上。

但是是否可以在 ChildBrowser 上捕获任何 URL 或加载，以便我的应用程序可以在加载另一个页面之前预处理一些操作？

谢谢，

最好的问候， **亨利霍**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T15:05:41.920

是的。ChildBrowser onLocationChange 方法允许您拦截 URL 并做自己的事情。

[请参阅https://github.com/phonegap/phonegap-plugins/tree/master/Android/ChildBrowser](https://github.com/phonegap/phonegap-plugins/tree/master/Android/ChildBrowser)上的文档。

我们的条形码教程中有一个 onLocationChange[示例](http://www.mobiledevelopersolutions.com/home/start/twominutetutorials/tmt3p2)。

# java - Java：使用K，M，B将double格式化为String

> ID：10258718
> 
> 赞同：0
> 
> 时间：2012-04-21T12:04:04.610
> 
> 标签：java, string, format, double

999 至 999 1000 至 1k

1500000 至 1.5m

等等，我不想失去任何精度

此外，需要将它们转换回原来的值

1.5m 至 1500000 等

最高可达 11 位数

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T12:25:12.923

这个怎么样：

```
import static java.lang.Double.parseDouble;
import static java.util.regex.Pattern.compile;

import java.util.regex.Matcher;
import java.util.regex.Pattern;

...

private static final Pattern REGEX = compile("(\\d+(?:\\.\\d+)?)([KMG]?)");
private static final String[] KMG = new String[] {"", "K", "M", "G"};

static String formatDbl(double d) {
  int i = 0;
  while (d >= 1000) { i++; d /= 1000; }
  return d + KMG[i];
}

static double parseDbl(String s) {
  final Matcher m = REGEX.matcher(s);
  if (!m.matches()) throw new RuntimeException("Invalid number format " + s);
  int i = 0;
  long scale = 1;
  while (!m.group(2).equals(KMG[i])) { i++; scale *= 1000; }
  return parseDouble(m.group(1)) * scale;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T12:19:09.180

如果它们不是最终的，您可以扩展 java.lang.Integer 等以覆盖 toString() 方法。是否值得创建一个 java.lang.Number 子类？可能不是。您可以使用组合创建自己的类：MyInteger、MyFloat 等（它们将具有保存数值的属性）并覆盖 toString() 方法以返回您想要的格式。

相反，您可以在 MyXXX 类中创建工厂方法，以创建包含字符串数值的对象（例如“1m”）。

好消息是这种工作非常适合单元测试。

您可能可以通过直接使用 NumberFormat 子类来获得所需的内容，但取决于您将如何使用它，上述设计可能会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T12:56:42.873

```
static String[] prefixes = {"k","M","G"};

// Formats a double to a String with SI units
public static String format(double d) {
    String result = String.valueOf(d);
    // Get the prefix to use
    int prefixIndex = (int) (Math.log10(d) / Math.log10(10)) / 3;
    // We only have a limited number of prefixes
    if (prefixIndex > prefixes.length)
        prefixIndex = prefixes.length;
    // Divide the input to the appropriate prefix and add the prefix character on the end
    if (prefixIndex > 0)
        result = String.valueOf(d / Math.pow(10,prefixIndex*3)) + prefixes[prefixIndex-1];
    // Return result
    return result;
}
// Parses a String formatted with SI units to a double
public static double parse(String s) {
    // Retrieve the double part of the String (will throw an exception if not a double)
    double result = Double.parseDouble(s.substring(0,s.length()-1));
    // Retrieve the prefix index used
    int prefixIndex = Arrays.asList(prefixes).indexOf(s.substring(s.length()-1)) + 1;
    // Multiply the input to the appropriate prefix used
    if (prefixIndex > 0)
        result = result * Math.pow(10,prefixIndex*3);
    return result;
} 
```

# python - 从数字元组对到所有单个数字的一 个元组的最佳方法

> ID：10258720
> 
> 赞同：2
> 
> 时间：2012-04-21T12:04:12.647
> 
> 标签：python, list, tuples

我怎么能得到这个

```
nums = [(0, 1), (1, 2), (2, 3), (3, 4), (4, 5), (5, 6), (6, 7), (7, 8)] 
```

到这个？每个元组的第二项是下一个元组的第一项。

```
[0, 1, 2, 3, 4, 5, 6, 7, 8] 
```

我做了：

```
>>> zip(*nums)[0]
(0, 1, 2, 3, 4, 5, 6, 7) 
```

但它给了我除了最后一个元素之外的一切，然后我不得不使用一些糟糕的代码来得到正确的结果，所以我正在寻找一个优雅的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T12:06:35.153

不知道你的一般情况是什么，但是

```
[nums[0][0]] + [x[1] for x in nums] 
```

对于你的例子

```
range(nums[-1][-1] + 1) 
```

也有效，你能描述一下你正在尝试做什么，而不仅仅是给出一个简单的案例吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-21T12:09:18.493

```
>>> nums = [(0, 1), (1, 2), (2, 3), (3, 4), (4, 5), (5, 6), (6, 7), (7, 8)]
>>> i = iter(nums)
>>> next(i) + tuple(y for x,y in i)
(0, 1, 2, 3, 4, 5, 6, 7, 8) 
```

使用更高效的版本`itertools`

```
>>> from itertools import chain
>>> nums = [(0, 1), (1, 2), (2, 3), (3, 4), (4, 5), (5, 6), (6, 7), (7, 8)]
>>> i = iter(nums)
>>> list(chain(next(i),(y for x,y in i)))
[0, 1, 2, 3, 4, 5, 6, 7, 8] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T12:52:53.717

```
def flatten(E):
    if E in [[], ()]:
        return []
    elif type(E) not in [list, tuple]:
        return [E]
    else:
        return flatten(E[0]) + flatten(E[1:])

def declutter(L):
    s = set()
    answer = []
    for i in L:
        if i not in s:
            s.add(i)
            answer.append(i)
    return answer

>>> nums = [(0, 1), (1, 2), (2, 3), (3, 4), (4, 5), (5, 6), (6, 7), (7, 8)]
>>> declutter(flatten(nums))
[0, 1, 2, 3, 4, 5, 6, 7, 8] 
```

希望这可以帮助

# iphone - 我的应用程序崩溃但未在 iphone sdk 上显示错误 xcode

> ID：10258721
> 
> 赞同：1
> 
> 时间：2012-04-21T12:04:13.750
> 
> 标签：iphone, objective-c, ios, xcode

我正在ios中开发绘图应用程序。在我的应用程序崩溃后，我的 touchesmoved 事件继续执行。但是，它没有显示错误消息控制台并在控制台中显示（gdb），并且项目处于运行状态，它由线程显示已暂停。我在任何时候都不是书签语句.. ！

我在屏幕截图下方的状态

![在此处输入图像描述](../Images/9f77754b07257aa935184435fd5c8c88.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T12:11:45.667

尝试启用`NSZombie`

它可能是`EXE_BAD_EXCESS`。

您可以通过以下链接检查如何启用僵尸等以解决应用程序中的崩溃问题

1.  [http://www.raywenderlich.com/10209/my-app-crashed-now-what-part-1](http://www.raywenderlich.com/10209/my-app-crashed-now-what-part-1)

    2\. [https://stackoverflow.com/a/4917557/730776](https://stackoverflow.com/a/4917557/730776)

问候尼尔

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T04:38:27.880

您的应用程序是否在模拟器/设备启动时启动（可能黑屏）？简而言之，设备状态是什么。在我的情况下，它无法找到 SDK，并且模拟器窗口中有一个弹出窗口，它不知何故被隐藏了，我有一段时间一无所知。

# python - python脚本中的Cmd命令？

> ID：10258724
> 
> 赞同：0
> 
> 时间：2012-04-21T12:05:01.403
> 
> 标签：python, scripting, cmd

我只想从 cmd 输入集成这两个命令并在 python 脚本中使用它们，但我在编程和 python 方面都是新手。我怎样才能做到这一点？

```
cd C:\
python dumpimages.py http://google.com C:\images\ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T12:07:32.317

[使用`os.subprocess`模块。](http://docs.python.org/library/subprocess.html)

请注意，这`exec()`也可以使用，但不推荐使用`os.subprocess`.

除了我上面的评论，如果您只想从网页中检索图像，请使用[带有](https://stackoverflow.com/questions/4602153/how-do-i-use-wget-to-download-all-images-into-a-single-folder)[标志的](https://stackoverflow.com/questions/4602153/how-do-i-use-wget-to-download-all-images-into-a-single-folder)[GNU ：`wget``-A`](https://stackoverflow.com/questions/4602153/how-do-i-use-wget-to-download-all-images-into-a-single-folder)

```
wget -r -P /save/location -A jpeg,jpg,bmp,gif,png http://www.domain.com 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T12:08:35.343

我怀疑这`cd C:\`是没有必要的，一旦它消失了，你似乎所要求的只是一种启动 python 脚本的方法。

也许您想要的只是修改 saveimage.py 以使其具有您想要的硬编码参数？我不知道那个脚本是什么——也许你可以告诉我们它是否重要或者你不能修改它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T12:13:26.353

我想你正在寻找`sys.argv`

尝试：

```
import sys
print(sys.argv) 
```

在你的 saveimage.py 之上。

它应该打印如下内容：

```
['C:\saveimage.py', 'http://google.com', 'C:\images\'] 
```

你看， sys.argv 是一个字符串列表。第一项是脚本本身的名称，其他是参数。由于列表是从 0 开始的，因此您可以使用以下命令访问脚本的第 i 个参数`sys.argv[i]`

# python - Django：使用 Apache 和 FastCGI 部署应用程序

> ID：10258725
> 
> 赞同：2
> 
> 时间：2012-04-21T12:05:13.857
> 
> 标签：python, django, apache, fastcgi

我一直在按照“The Definitive guide to Django”一书来创建一个 Web 应用程序。到目前为止一切顺利，很快，我将在生产环境中部署应用程序。我的目标是使用书中指定的 Apache + FastCGI。我能够按照书中指示的初始设置进行操作。（即安装 Apache，安装 mod_fastcgi 并编辑 httpd.conf）。指示的下一步是“指定 FastCGI 服务器的位置”。有 2 个步骤，即 (1) 使用 FastCGIExternalServer 指令指定您的 FastCGI 服务器的位置，以及 (2) 使用 mod_rewrite 将 URL 适当地指向 FastCGI。

这就是我迷路的地方。我不知道我是否会在 httpd.conf 中再次添加以下几行：

```
# Connect to FastCGI via a socket/named pipe:
FastCGIExternalServer /home/user/public_html/mysite.fcgi -socket /home/user/mysite.sock
# Connect to FastCGI via a TCP host/port:
FastCGIExternalServer /home/user/public_html/mysite.fcgi -host 127.0.0.1:3033 
```

如果没有，我应该如何进行？希望听到任何想法。非常感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:46:24.663

我自己对 FastCGI 并不熟悉（我过去使用过 Apache 的 mod_wsgi 和 gunicorn，将来可能会使用 gunicorn），但看起来您只需要其中的一行。最好是使用插座的顶部。

您将其添加到哪个文件完全取决于您的特定 Linux 发行版。我建议不要使用您的书来获取有关如何为 django 提供服务的建议，因为特定于 linux 发行版的在线教程（例如，[这篇关于如何](http://library.linode.com/frameworks/django-apache-mod-wsgi/ubuntu-10.04-lucid)使用 mod_wsgi 在 Ubuntu 10.04 上安装 django 的 Linode 帮助文章）将是最新的更具体。如果您是经验丰富的系统管理员，请仅尝试理解可能已过时的书籍说明。

# java - 如何处理组合框中很长的文本项

> ID：10258728
> 
> 赞同：4
> 
> 时间：2012-04-21T12:05:40.577
> 
> 标签：java, swing, text, jcombobox, swingx

所以我的文本比它们占用的某些组件长得多。我已经为大多数问题提出了合理的解决方案，但我不知道如何处理组合框中的非常长的文本项。如果用户看不到文本，他就无法做出正确的决定——尤其是如果文本的第一部分匹配。请参阅下面的我的[SSCCE](http://www.sscce.org/)。

我使用 JScrollpane 来解决 JTextfield 中的长文本问题，并且我使用工具提示来解决 JXhyperlink 字段中的长文本。另外，我为组合框提供了一个工具提示，可以在选择它之后显示一个长项目，但理想情况下，我想在用户做出选择之前将该选项提供给用户。此代码示例是使用 Netbeans 的 GUI 设计器（非常适合 RAD 目的）组合在一起的，布局是 GUI 设计器使用的 GroupLayout。

```
package longtextsexample;

import javax.swing.JFileChooser;

public class MainFrame extends javax.swing.JFrame {

    /**
     * Creates new form MainFrame
     */
    public MainFrame() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     */
    @SuppressWarnings("unchecked")
    private void initComponents() {

        jScrollPane1 = new javax.swing.JScrollPane();
        jTextField1 = new javax.swing.JTextField();
        jComboBox1 = new javax.swing.JComboBox();
        jXHyperlink1 = new org.jdesktop.swingx.JXHyperlink();
        jButton1 = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jScrollPane1.setHorizontalScrollBarPolicy(javax.swing.ScrollPaneConstants.HORIZONTAL_SCROLLBAR_ALWAYS);
        jScrollPane1.setVerticalScrollBarPolicy(javax.swing.ScrollPaneConstants.VERTICAL_SCROLLBAR_NEVER);
        jScrollPane1.setViewportView(jTextField1);

        jComboBox1.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Item 1", "Item 222222222222222222222222", "Item 333333333333333333333333", "Item 333333333333333333333333444444444444" }));
        jComboBox1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jComboBox1ActionPerformed(evt);
            }
        });

        jXHyperlink1.setText("Path");

        jButton1.setText("Browse");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(10, 10, 10)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 164, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jComboBox1, javax.swing.GroupLayout.PREFERRED_SIZE, 164, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 19, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(6, 6, 6)
                        .addComponent(jXHyperlink1, javax.swing.GroupLayout.PREFERRED_SIZE, 130, javax.swing.GroupLayout.PREFERRED_SIZE))))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(11, 11, 11)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 44, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(jComboBox1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jButton1)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(4, 4, 4)
                        .addComponent(jXHyperlink1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))))
        );

        pack();
    }

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
        JFileChooser jfc = new JFileChooser();
        String path;

        if (jfc.showOpenDialog(this) == JFileChooser.APPROVE_OPTION) {
            path = jfc.getSelectedFile().getAbsolutePath();
        } else {
            path = "";
        }
        jXHyperlink1.setText(path);
        jXHyperlink1.setToolTipText(path);
    }

    private void jComboBox1ActionPerformed(java.awt.event.ActionEvent evt) {
        jComboBox1.setToolTipText(jComboBox1.getSelectedItem().toString());
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /*
         * Set the Nimbus look and feel
         */

        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(MainFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(MainFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(MainFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(MainFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new MainFrame().setVisible(true);
            }
        });
    }
    // Variables declaration
    private javax.swing.JButton jButton1;
    private javax.swing.JComboBox jComboBox1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTextField jTextField1;
    private org.jdesktop.swingx.JXHyperlink jXHyperlink1;
    // End of variables declaration
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T13:01:51.017

```
How to deal with very long text items in comboboxes 
```

1）你可以把`JTextArea`或更好的可能是`JTextPane`派生`JList`自`JComboBox`

无论如何，以上几点可能很简单，但为什么要这样做，因为有

2) [Combo Box Popup](http://tips4java.wordpress.com/2010/11/28/combo-box-popup/)，我建议设置`setMaximumWidth`

# image - 非常相似的图像的图像哈希

> ID：10258731
> 
> 赞同：9
> 
> 时间：2012-04-21T12:05:54.180
> 
> 标签：image, image-processing, hash

我正在截取应用程序的屏幕截图，并尝试检测之前是否看过确切的图像。我正在寻找不同的细微变化 - 例如，如果图像中有文本，并且拼写发生变化，这算作不匹配。

我已经成功地使用屏幕截图图像内容的 MD5 哈希在已知图像的数据库中查找，并检测它是否以前见过。

现在，我已将它移植到另一台机器上，尽管我尝试完全匹配配置，但我得到的图像与旧机器略有不同。当我说不同时，变化是微小的——如果我炸毁新旧图像并在它们之间轻弹，我看不到任何区别！尽管如此，ImageMagick 的`compare`命令可以看到一些不同的像素。

所以我的 MD5 哈希不再匹配。[我需要一个图像散列](https://stackoverflow.com/questions/998662/what-is-image-hashing-used-for)，而不是简单的 MD5散列。

在进行研究时，我发现大多数图像哈希都试图相当慷慨——它们接受调整大小、转换和加水印的图像，并带有相应的误报匹配。我想要一个更严格的图像哈希 - 唯一允许的更改是颜色的微小变化。

谁能推荐一个图像哈希库或算法？（不是应用程序，例如[dupdetector](http://www.photo-freeware.net/dupdetector.php)）。

请记住：我的要求与许多类似问题的不同之处在于，我不想要像[shrinking](http://echochamber.me/viewtopic.php?f=11&t=40638)或[pHash](http://www.phash.org/)这样的自由算法，也不想要像[结构相似性](http://en.wikipedia.org/wiki/Structural_similarity)或[ImageMagick 的 compare](http://www.imagemagick.org/script/compare.php)这样的比较工具。

我想要一个散列，使非常相似的图像给出相同的散列值。这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:26:04.163

您可以查看以下名为“Spectral hashing”的论文。它是一种算法，旨在从图像中生成哈希码，以便将相似的图像组合在一起（参见本文末尾的检索示例）。这是一个很好的起点。

链接：[http ://www.cs.huji.ac.il/~yweiss/SpectralHashing/](http://www.cs.huji.ac.il/~yweiss/SpectralHashing/)

# css - CSS：如何生成圆角框列表

> ID：10258737
> 
> 赞同：-1
> 
> 时间：2012-04-21T12:06:33.457
> 
> 标签：css

我想以最简单的方式重现以下内容（可能使用 a `<ul>`）： ![在此处输入图像描述](../Images/97f4fc544c87ca1bc5d6a9c418315b87.png)

因此，我希望能够在此列表中添加任意数量的行，每一行由图片、描述和计数器组成。列表应该在一个圆角框中，并且行应该用线分隔。

有 CSS 技能的人可以帮我解决这个问题吗？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T12:13:00.640

好吧，[这是一种方法](http://jsfiddle.net/jamwaffles/pY5MP/1/)。

HTML：

```
<ul>
    <li>
        <img src="http://www.placekitten.com/16/16">
        Item 1
        <span>1</span>
    </li>

    <!-- More list items -->
</ul> 
```

CSS：

```
/* Container with border and rounded corners */
ul {
    border: 1px solid #ccc;
    width: 200px;

    /* Border radius for Chrome, Webkit and other good browsers */
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    -border-radius: 10px;
    border-radius: 10px;
}

/* Only add border to bottom of <li> */
li {
    padding: 10px;
    border-bottom: 1px solid #ccc;
}

/* Get rid of the last <li>'s bottom border to stop overlap with <ul>'s border */
/* :last-child works in IE7+ */
li:last-child {
    border-bottom: none;
}

/* Get the number and float it right */
span {
    float: right;
}
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T12:10:21.103

我正在为您开发[JSfiddle](http://jsfiddle.net/H245D/)。

HTML：

```
<ul>
    <li><img src="http://ghickman.co.uk/images/sidebar/stackoverflow.png"/> <span>text</span> <span class="num">1</span></li>
   <li><img src="http://ghickman.co.uk/images/sidebar/stackoverflow.png"/> <span>text</span> <span class="num">1</span></li>
   <li><img src="http://ghickman.co.uk/images/sidebar/stackoverflow.png"/> <span>text</span> <span class="num">1</span></li>
</ul> 
```

CSS：

```
ul {
    border-radius:10px;
    border:1px solid #DDD;
    margin:10px;
    width:200px;
}

li:last-child {
    padding:7px;
}

li:not(:last-child) {
    padding:7px;
    border-bottom:1px solid #DDD;
}

span.num {
    float:right;
}
img {
    width:20px;
}

span {
    float:none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T12:14:28.950

似乎您甚至没有尝试在 Google 上搜索“圆角”，但无论如何，您有 2 个选项：

1.  使用 CSS 属性[边框半径](http://www.css3.info/preview/rounded-border/)，但请注意它在 IE7 中不起作用
2.  使用图像和`background`属性

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-21T12:16:19.900

HTML：

```
<ul>
   <li>Event</li>
   <li>Journal</li>
   <li>Task</li>
</ul> 
```

CSS：

```
ul { -moz-border-radius: 3px; -webkit-border-radius: 3px; border-radius: 3px; background:#3d3d3; border:1px solid gray; width:400px; }
ul li { padding: 5px 5px 5px 20px; border-top:1px solid gray; } 
```

这是[JsFiddle](http://jsfiddle.net/8v7J8/2/)。

# list - 将字符串拆分为 Ocaml 中的单词字符列表

> ID：10258743
> 
> 赞同：2
> 
> 时间：2012-04-21T12:06:56.910
> 
> 标签：list, ocaml, morse-code

所以，我有作业，我正在尽力解决它。我们必须从英语翻译成摩尔斯电码。每个单词都必须分开。

示例：如果我输入`this is`它应该写：`["_";"....";"..";"..."]["..";"...."]`

到目前为止，我编写了 2 个函数（小写到大写并使用摩尔斯电码匹配字母和数字），现在我需要编写将字符串转换为字符列表的函数，如下所示：

```
stringSAllCaps "   ban an  a  ";;
- : char list list = [['B'; 'A'; 'N']; ['A'; 'N']; ['A']]
stringSAllCaps "banana";;
- : char list list = [['B'; 'A'; 'N'; 'A'; 'N'; 'A']] 
```

我知道如何将字符串转换为字符列表，但不知道下一步该做什么。我不需要有人为我完全解决这个问题，只是为了引导我朝着正确的方向前进。

这就是我所做的：

```
let explode niz =
  let rec exp a b =
    if a < 0 then b 
    else exp (a - 1) (niz.[a] :: b) in
  exp (String.length niz - 1) []
     ;; 
```

编辑：

你的帮助:) 我已经设法解决了这个问题，但不是这样。我稍后会发布它。当我解决它并继续我的作业时，我意识到我必须使用`while`，`pointers`现在我又被卡住了（指针不是我最好的朋友..）。有什么建议么？

我目前的解决方案：

```
# let explode str =
let rec exp = function
| a, b when a < 0 -> b
| a, b -> exp (a-1, str.[a]::b)
in
exp ((String.length str)-1, []);;
# let split lst ch =
let rec split = function
| [], ch, cacc', aacc' -> cacc'::aacc'
| c::lst, ch, cacc', aacc' when c = ch -> split (lst, ch, [], cacc'::aacc')
| c::lst, ch, cacc', aacc' -> split (lst, ch, c::cacc', aacc')
in
split (lst, ch, [], []);; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T12:29:31.540

我想你应该从以下开始：

*   重命名递归函数的参数以具有更明确的含义（`index`例如`current_word`）
*   在递归函数中添加一个新参数来存储已经看到的单词 ( `seen_words`)
*   测试是否`niz.[a]`是空白字符，如果是，则做正确的事情，即。更新当前单词或已经看到的单词列表。

# android - 设置布局的重力

> ID：10258744
> 
> 赞同：0
> 
> 时间：2012-04-21T12:07:04.267
> 
> 标签：android, android-layout, android-ui

我试图在 OnPreExecute 方法中将右重力设置为线性布局，但对话框仍然在左侧显示我的希伯来文文本。我的代码有什么问题？

```
private ProgressDialog dialog;
    private Context context;
    private LinearLayout layout;

    public MyTask(Activity activity) {
        context = activity;
        dialog = new ProgressDialog(context);
        layout = new LinearLayout(context);
    }

    protected void onPreExecute() {           
        ViewGroup.LayoutParams params = new ViewGroup.LayoutParams(-1, -2);             
        layout.setGravity(Gravity.RIGHT);
        TextView loadMsg = new TextView(context);
        loadMsg.setText("טוען...");
        loadMsg.setGravity(Gravity.RIGHT);
        layout.addView(loadMsg, params);
        dialog.setView(layout);         
    //  dialog.setContentView(R.layout.loaddialog);
    //   dialog.show();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T12:51:26.400

我已尝试解决您的问题尝试使用它。它对我有用。

```
 LinearLayout lp = new LinearLayout(getApplicationContext());
    lp.setMinimumWidth(100);
    ViewGroup.LayoutParams params = new ViewGroup.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    lp.setGravity(Gravity.RIGHT);
    TextView loadMsg = new TextView(this);
    loadMsg.setText("my msg");
    loadMsg.setTextColor(Color.WHITE);
    loadMsg.setGravity(Gravity.RIGHT);
    lp.addView(loadMsg, params);
    Dialog dialog = new Dialog(this);
    dialog.setContentView(lp);
    dialog.show(); 
```

# c# - 如何以新形式打开RSS提要的文章？

> ID：10258749
> 
> 赞同：0
> 
> 时间：2012-04-21T12:07:51.253
> 
> 标签：c#, windows-phone-7, rss, syndication

您知道要在代码中添加什么内容以从 RSS 提要中打开所需的文章吗？以新的形式。

在一个新的表单中，我应该得到文章的标题和内容，图片是可选的

这是我的代码，其中文章列表是：

```
private void ls_text_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        try
        {
    ListBox listBox = sender as ListBox;

            if (listBox != null && listBox.SelectedItem != null)
            {
                SyndicationItem sItem = (SyndicationItem)listBox.SelectedItem;

                if (sItem.Links.Count > 0)
                {
                     if (listBox != null && listBox.SelectedItem != null)
            {

                SyndicationItem sItem = (SyndicationItem)listBox.SelectedItem;
                PhoneApplicationService.Current.State["myItem"] = sItem;

                NavigationService.Navigate(new Uri("/Clanak.xaml",UriKind.Relative));// leads to article form

                }
            }
        }
        catch (Exception f)
        {

            MessageBox.Show(f.Message, "", MessageBoxButton.OK);
        }
    } 
```

* * *

我编写了一个代码，可以完成大部分工作：

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        try
        {
            SyndicationItem sItem = PhoneApplicationService.Current.State["myItem"] as SyndicationItem;
            PageTitle.Text = sItem.Title.Text; //Title would go in the pagetitle of the form , Title shows fine
            PageTitle.FontSize = 40;
            //tb_Content.Text = sItem.Summary.Text; //all goes fine

            foreach (SyndicationItem item in sItem.SourceFeed.Items)
            {
                foreach (SyndicationElementExtension ext in item.ElementExtensions)
                {

                    if (ext.GetObject<XElement>().Name.LocalName == "encoded")

                        tb_Content.Text = ext.GetObject<XElement>().Value; //textblock for content, throws NullReferenceException
                }
            }
        }
        catch (Exception f)
        {

            MessageBox.Show(f.Message, "Error clanak", MessageBoxButton.OK);
        }
    } 
```

内容无法识别，并且我一直得到 NullReference，当我在 TextBlock 上链接摘要时，文章的日期显示得很好。此外，每次当我返回列出所有文章的列表时，我都会收到错误消息“您只能在 OnNavigatedTo 和“OnNavigatedFrom”之间使用状态。当我按下主页按钮时，调试器出现（应用程序崩溃）。

这就是我得到的： Microsoft.Phone.dll 中出现“System.InvalidOperationException”类型的第一次机会异常 System.Runtime.Serialization.dll 中发生“System.Security.SecurityException”类型的第一次机会异常 第一次机会异常在 mscorlib.dll 中发生了“System.Reflection.TargetInvocationException”类型的第一次机会异常 System.Runtime.Serialization.dll 中发生了“System.Security.SecurityException”类型的线程“”（0xfc2037a）已退出，代码为 0（0x0 ）。线程 '' (0xe880366) 以代码 0 (0x0) 退出。线程 '' (0xe310372) 已退出，代码为 0 (0x0)。线程 '' (0xf970392) 以代码 0 (0x0) 退出。线程 '' (0xe470392) 已退出，代码为 0 (0x0)。

这是我正在处理的提要：[http](http://www.zimo.co/feed/) : //www.zimo.co/feed/ 我的主要问题是如何通过 nullref。异常并获取内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T14:07:13.870

首先，您应该将您的文件保存`Item`到某个地方，您可以从另一个地方访问它`Page`。

例如：

```
SyndicationItem sItem = (SyndicationItem)listBox.SelectedItem;  
PhoneApplicationService.Current["myItem"] = sItem; 
```

然后，创建一个新页面并导航到它`NavigationService.Navigate(new Uri("/newPage.xaml"));`

在详情页的构造函数中，根据需要填写标题和内容

```
SyndicationItem sItem = PhoneApplicationService.Current["myItem"] as SyndicationItem;
// set Title and so on... 
```

# xslt - XSLT 更改页面

> ID：10258757
> 
> 赞同：-1
> 
> 时间：2012-04-21T12:09:43.430
> 
> 标签：xslt, hyperlink

我试图通过单击表中的元素来弄清楚如何使用我的 xslt 转换来更改页面。我环顾四周，找不到答案，这是一个简单的代码，我想知道如何更改页面并显示某些内容：我认为您没有必要阅读代码，除了最后一个，XSLT。我已经添加了代码的其他部分，以防它们也需要一些更改。

XSD：

```
 <?xml version="1.0" encoding="UTF-8"?>
 <xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" targetNamespace="http://www.w3schools.com"
 xmlns="http://www.w3schools.com">

 <xs:element name="Table">
 <xs:complexType>
 <xs:sequence maxOccurs="unbounded">
 <xs:element ref="Person"/>
 </xs:sequence>
 </xs:complexType>
 </xs:element>
 <xs:element name="Person">
 <xs:complexType>
 <xs:all maxOccurs="1">
 <xs:element ref="Name"/>
 <xs:element minOccurs="1" ref="Age"/>
 </xs:all>
 </xs:complexType>
</xs:element>
<xs:element name="Name">
 <xs:complexType>
 <xs:sequence>
 <xs:element maxOccurs="1" ref="theName"/>
 <xs:element maxOccurs="1" ref="Description"/>
 </xs:sequence>
 </xs:complexType>
 </xs:element>
 <xs:element name="theName" type="xs:string"/>
 <xs:element name="Description" type="xs:string"/>
 <xs:element abstract="false" name="Age" type="xs:positiveInteger"/>
 </xs:schema> 
```

所以我创建了两个元素，theName 和 age。名称由字符串 TheName 和字符串描述组成。年龄只是一个正整数。现在我创建了一个 XML 文件，它只选择了两个不同的人：

XML:

```
 <?xml version="1.0" encoding="UTF-8"?>
 <?xml-stylesheet type="text/xsl" href="try.xsl"?>
 <Table xmlns="http://www.w3schools.com"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://www.w3schools.com try.xsd">
 <Person>
 <Name>
 <theName>Thomas</theName>
 <Description>He is a nice guy</Description>
 </Name>
 <Age>10</Age>
 </Person>

 <Person>
 <Name>
 <theName>Peter</theName>
 <Description>He is good at swimming</Description>
 </Name>
 <Age>12</Age>
 </Person>

 </Table> 
```

我现在的转变是做一个表格，上面有年龄函数的人的名字：

XSLT：

```
 <?xml version="1.0" encoding="UTF-8"?>

 <xsl:stylesheet

 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ws="http://www.w3schools.com"
 version="1.0"> 

 <xsl:template match="/">
 <html>

 <table border="2">
 <tr bgcolor="red">
 <th>Name</th>
 <th>Age</th>
 </tr>
 <xsl:for-each select="ws:Table/ws:Person">
 <tr>

 <td><xsl:value-of select="ws:Name/ws:theName"/></td>
 <td><xsl:value-of select="ws:Age"/></td>

 </tr>
 </xsl:for-each>
 </table> 
```

这是我需要帮助的地方，如何更改我所在的页面并转到仅显示此人描述的页面，我想通过单击此人的姓名来执行此操作。我不想打开新窗口，只需更改页面即可。

```
 </html>
 </xsl:template>
 </xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T17:16:13.580

在您的 XSLT 代码中，生成包含指向相关页面的超链接的 HTML。这可以是传统的`<a href="...">`超链接，也可以是任何具有 onclick 属性的元素。

# c# - 绝对时间测量

> ID：10258766
> 
> 赞同：2
> 
> 时间：2012-04-21T12:10:50.487
> 
> 标签：c#, .net, datetime

当我开始某个过程时，我会使用 DateTime.Now 并将其记为 StartTime。

在稍后的过程中，我从 DateTime.Now 中减去 StartTime 来计算这两者之间经过的时间 - 在开始时间和当前时间之间。

现在，问题是这种方法并不总是准确的——在处理过程中，时间可能会被窗口使用时间服务器更改，甚至可能由用户手动更改。

是否有其他一些方法来测量所描述的时间，这些方法总是能正常工作——即使同时改变了窗口时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T12:12:41.297

有`StopWatch`类 - [http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T12:13:21.003

你可以利用这个：[**Get time of Code Execution Using StopWatch**](http://pranayamr.blogspot.in/2011/07/during-development-of.html)

```
Stopwatch stopWatch = new Stopwatch();
stopWatch.Start();
//instead of this there is line of code that you are going to execute
Thread.Sleep(10000);
stopWatch.Stop();
// Get the elapsed time as a TimeSpan value.
TimeSpan ts = stopWatch.Elapsed;
string elapsedTime = String.Format("{0:00}:{1:00}:{2:00}.{3:00}",
ts.Hours, ts.Minutes, ts.Seconds,
ts.Milliseconds / 10);
Console.WriteLine(elapsedTime);
Console.ReadLine(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T12:13:57.737

使用秒表。

```
var a = Stopwatch.StartNew(); // Initializes and starts running
var b = new Stopwatch(); // Initializes and doesn't start running

var c = a.Elapsed; // TimeSpan

a.Stop();
a.Start();
a.Reset(); 
```

秒表本身就像一块手表，所以它不依赖计算机的时钟。只需从头开始，然后检查 Elapsed 以查看已经过去了多少时间。

# ruby-on-rails - Rails：为什么向页面添加翻译会导致 javascript 脚本标签出现乱码？

> ID：10258767
> 
> 赞同：0
> 
> 时间：2012-04-21T12:10:50.973
> 
> 标签：ruby-on-rails, ruby, openssl, macports

通过用语句替换字符串来使页面可翻译`<%= t(:something) %>`触发了一个奇怪的行为，其中 javascript`script`标签是乱码。

这是一个示例：

```
<script src="/assets/jquery.js?body=1" type="text/jipt>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/modernizr.js?body=1" type="text/javascript"></script>
<script src="/assets/controls.js?body=1" type="text/javascript"></script> 
```

这可能是什么原因造成的？

作为记录，我正在运行 Rails 3.2.3、Ruby 1.9.2p290，并且正在使用常规资产管道在开发环境中生成脚本标签。

**更新：**

我已将其缩小到页面的长度。显然rails（或Webrick）开始破坏页面超过一定长度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T05:00:19.640

问题最终与翻译无关。原因是一个旧的 openssl 被链接到。

所以更新 mac 端口，并重新安装 ruby​​ 1.9.3（从源代码）解决了这个问题：

```
$ port selfupdate
$ sudo port upgrade outdated
$ rvm remove ruby-1.9.3-p125
$ rm -rf /Users/XXXXXXX/.rvm/gems/ruby-1.9.3-p125/
$ rvm install 1.9.3-p125
$ rvm use ruby-1.9.3-p125
$ gem install rails
$ bundle 
```

# codeigniter - 如何使用高级搜索 codeigniter 解决此问题

> ID：10258771
> 
> 赞同：0
> 
> 时间：2012-04-21T12:11:50.130
> 
> 标签：codeigniter, codeigniter-2

我想构建高级搜索脚本，但模型中的 search_all 函数出现此错误

```
A PHP Error was encountered

Severity: 4096

Message: Object of class CI_DB_mysql_result could not be converted to string

Filename: models/search_model.php

Line Number: 129 
```

我有四个字段 1- 输入要写书名的文本 2- 为作者选择框 3- 为出版商选择框 3- 为章节选择框

模型是

```
class search_model extends CI_Model
{
    function __construct()
    {
        parent::__construct();
    }
    /* This function get all search in database sort by order asc.*/

    function get_new_one($id)
    {

    $this->db->where('ne_id',$id);

    $result=$this->db->get('d_search');

    return $result->row();

    }
    //////////////frontend//////////////////////////////////////////////////////////

    function show_new($id)
    {

    $result=$this->db->query("SELECT * , COUNT( d_comments_search.cn_new_id ) as count

                        FROM d_search

                        left JOIN d_comments_search ON d_search.ne_id = d_comments_search.cn_new_id and d_search.ne_hide='1'

                        inner join d_search_category on d_search_category.nc_id = d_search.ne_category_id and d_search_category.nc_hide= '1'

                        and d_search.ne_id= $id group by d_search.ne_id");

    return $result->row() ;

    }

    function generate_results($keyword,$row=0){
        $result1 = $this->db->query("SELECT bo_id,bo_name,bo_state,bo_about FROM d_book where (bo_name like '%$keyword%' or bo_about like '%$keyword%') and bo_state = '1' limit $row,20");
        $result2 = $this->db->query("SELECT au_id,au_name,au_state,au_info FROM d_author where (au_name like '%$keyword%' or au_info like '%$keyword%') and au_state = '1' limit $row,20");
        $result3 = $this->db->query("SELECT pub_id,pub_name,pub_state,pub_info FROM d_publishing where (pub_name like '%$keyword%' or pub_info like '%$keyword%') and pub_state = '1' limit $row,20");
        $results = array_merge($result1->result_array(),$result2->result_array(),$result3->result_array());

        return $results;

    }

    // get total number of users
    function getNumUsers($keyword)
    {
        $result1 = $this->db->query("SELECT bo_id,bo_name,bo_state,bo_about FROM d_book where (bo_name like '%$keyword%' or bo_about like '%$keyword%') and bo_state = '1'");
        $result1 = $result1->num_rows();
        $result2 = $this->db->query("SELECT au_id,au_name,au_state,au_info FROM d_author where (au_name like '%$keyword%' or au_info like '%$keyword%') and au_state = '1'");
        $result2 = $result2->num_rows();
        $result3 = $this->db->query("SELECT pub_id,pub_name,pub_state,pub_info FROM d_publishing where (pub_name like '%$keyword%' or pub_info like '%$keyword%') and pub_state = '1'");
        $result3 = $result3->num_rows();
        return $result1 + $result2 + $result3;
    }
    //////////////////////////////////end paging///////////////////

    function get_publishing()
    {
        $this->db->where('pub_state','1');
        $result=$this->db->get('d_publishing')->result_array();
        return $result;
    }

    function get_author()
    {
        $this->db->where('au_state','1');
        $result=$this->db->get('d_author')->result_array();
        return $result;
    }

    function get_section()
    {
        $this->db->where('sec_state','1');
        $result=$this->db->get('d_section')->result_array();
        return $result;
    }

    function search_name()
    {
        $bo_name=$_POST['bo_name'];
        $this->db->order_by("bo_ord","asc");
        $this->db->like('bo_name',$bo_name);
        return $this->db->get('d_book')->result_array();

    }

        function search_all() {
        $publish = $this->input->post('publish');
        $author = $this->input->post('author');
        $sec_name = $this->input->post('section');

        $sql = $this->db->query("SELECT * FROM `d_book`");
        $searches = array();
        if ($publish != 'choose')
            $searches[] = "`bo_pub_id` = '$publish'";
        if ($author != 'choose')
            $searches[] = "`bo_au_id` = '$author'";
        if ($sec_name != 'choose')
            $searches[] = "`bo_sec_id` = '$sec_name'";
        if (count($searches) > 0) {
       $sql .= "WHERE " . implode(" AND ", $searches);
        }
        $sql .= ';';

    }

} 
```

这是控制器

```
class Search extends front_end {
    var $temp;

    function __construct(){
       parent::__construct();
       $this->load->library('form_validation');
       //echo $this->input->post("keyboard");

    }

    public  function index()
    {
        $this->overview();
    }

    /**
     * This function display all  search
     * @param integer $row
     */
    public  function overview($row=0)
    {
        $this->form_validation->set_rules('keyword', 'ÙƒÙ„Ù…Ø© Ø§Ù„Ø¨Ø­Ø«', 'trim|required|xss_clean|htmlspecialchars');
        $this->form_validation->run();
        $this->store_keyword();
        //echo $this->session->flashdata('keyword');
        if ($this->session->flashdata('keyword') != ''){
            $keyword=$this->session->flashdata('keyword');
            $this->generate_results($this->session->flashdata('keyword'),$row);
        }else{
        $this->generate_results($this->input->post("keyword"),$row);
        }
        //$this->session->set_flashdata('keyword', $this->input->post("keyword"));
        $data = $this->temp;

        //$this->session->keep_flashdata('keyword');
        $this->view('search/site/results', $data);
    }

    /**
     * This function generate result of search
     * @param string $keyword
     * @param integer $row
     */
    public  function generate_results($keyword,$row=0){
        $this->load->model('search/search_model','search');
        $this->load->library('pagination');
        $config['base_url'] = base_url().'search/search/overview/';
        $config['total_rows'] = $this->search->getNumUsers($keyword);
        $config['per_page'] = '20';
        $config['uri_segment'] = '4';
        $this->pagination->initialize($config);
        $data['page'] = $row;
        $data['results'] = $this->search->generate_results($keyword,$row);
        $data['total_rows'] = $this->search->getNumUsers($keyword);
        $data['links']=$this->pagination->create_links();
        $this->temp = $data;

    }

    /**
     * This function display detail of new
     * @param integer $id
     */
    public  function show($id)
    {
        $data['new']=$this->search->show_new($id);
        $count=$data['new']->ne_count_visit;
        $this->search->add_count($count,$id);
        $data['comments']=$this->search->show_comments($id);
        $this->view('site/new', $data);
    }

    /**
     * This function store keyword to use in search 
     */
    private  function store_keyword(){
        if($this->input->post("keyword")){
           $this->session->set_userdata('keyword', $this->input->post("keyword"));
       }
    }

    public  function search_form()
    {
        $this->load->model('search/search_model','search');
        $data['publish']=$this->search->get_publishing();
        $data['author']=$this->search->get_author();
        $data['section']=$this->search->get_section();
        $this->view('search/site/adv_search_form',$data);
    }

    public function search_adv()
    {
       $this->load->model('search/search_model','search');
       $data['bo_name']=$this->input->post('bo_name');
       $data['section']=$this->input->post('section');
       $data['publish']=$this->input->post('publish');
       $data['author']=$this->input->post('author');
       $data['result1'] = '';
       $data['result2'] = '';
       $data['result3'] = '';
       $data['result4'] = '';
       if($data['bo_name'] == NULL and $data['section']== NULL and $data['publish']==NULL and $data['author']== NULL){
            $this->search_form();
       }else{
            if(isset($data['bo_name']) and $data['bo_name']!= NULL)
            {
               $data['result1'] = $this->search->search_name();
}
           if(isset($data['section']) and $data['section'] != NULL)
            {
               $data['result2']=$this->search->search_all();
            }
            if(isset($data['publish']) and $data['publish'] != NULL)
            {
               $data['result3']=$this->search->search_all();
            }
            if(isset($data['author']) and $data['author']!= NULL)
            {
               $data['result4']=$this->search->search_all();
            }
            $data['no_results'] = '';
            if(! $data['result1'] &&  !$data['result2'] &&  !$data['result3'] &&  !$data['result4']){
               $data['no_results'] = TRUE;
            }else{
                $data['no_results'] = FALSE;
            }
            $this->view('search/site/search_result',$data);
        }
    }
}

/* End of file dashboard.php */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T12:19:20.327

[`$this->db->query()`](http://codeigniter.com/user_guide/database/queries.html)不存储查询字符串供以后使用。它实际上立即执行查询并返回`CI_DB_mysql_result`. 您应该在调用之前构建查询字符串`$this->db->query()`并将其存储到变量中，然后将其传递给方法。

```
$sql = "SELECT * FROM `d_book` ";
$searches = array();
if ($publish != 'choose')
{
    $searches[] = "`bo_pub_id` = '__some_id__'";
}

if ($author != 'choose')
{
    $searches[] = "`bo_au_id` = '__some_id__'";
}

if ($sec_name != 'choose')
{
    $searches[] = "`bo_sec_id` = '__some_id__'";
}

if (count($searches) > 0) 
{
    $sql .= "WHERE " . implode(" AND ", $searches);
}

$sql .= ';';
$this->db->query($sql); 
```

# android - Android webView 保存状态

> ID：10258772
> 
> 赞同：22
> 
> 时间：2012-04-21T12:12:05.067
> 
> 标签：android, webview, save

我有一个带有 3 个标签的标签主机。在每个选项卡中都有一个 webiview。当我单击一个选项卡时，即使我以前去过那里，webview 也需要“重新加载”，它还没有被保存。有什么办法可以保存 webview 吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-04-21T12:13:43.103

这可以通过在您的活动中覆盖 onSaveInstanceState(Bundle outState) 并从 web 视图调用 saveState 来处理：

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    webView.saveState(outState);
    super.onSaveInstanceState(outState); 
} 
```

然后在 webview 重新膨胀之后在你的 onCreate 中恢复它：

```
@Override
public void onCreate(final Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.blah);
   WebView webview = (WebView)findViewById(R.id.webview);
   if (savedInstanceState != null)
      webview.restoreState(savedInstanceState);
   else
      webview.loadUrl(URLData)
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-09-30T13:38:01.487

[restoreState](http://developer.android.com/reference/android/webkit/WebView.html#restoreState(android.os.Bundle))从不可靠。而到2015年的文件接受事实。（可能是在 2014 年左右对文件进行了更改）。这就是它现在所说的。

> 如果在此 WebView 有机会建立状态（加载页面、创建后退/前进列表等）之后调用它，则可能会产生不良副作用。请注意，此方法不再恢复此 WebView 的显示数据。

saveState() 的相应条目是这样说的：

> 请注意，此方法不再存储此 WebView 的显示数据。

在 onCreate 方法中你真正应该做的是调用 webView.loadUrl() 如果你想显示最后访问的 url，请看这个[答案](https://stackoverflow.com/a/32835087/267540)：

如果您担心 webview 在方向更改等时重新加载。

> 你可以设置你的活动来处理方向和键盘隐藏的变化，然后只留下 WebView

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-09T11:26:55.970

或者，您可以考虑将片段与您的 tabHost 一起使用。进入另一个 webView 时，您可以将片段设置为隐藏，另一个显示。当您返回上一个片段时，内容不会被破坏。我就是这样做的，它对我有用。

# css - 如何增加 Photoshop 精灵画布的宽度和高度

> ID：10258778
> 
> 赞同：-1
> 
> 时间：2012-04-21T12:12:37.590
> 
> 标签：css, photoshop, css-sprites

我正在通过 Photoshop 创建一个精灵并且画布宽度用完了。但是当我尝试增加画布宽度时，css 中图标的所有位置似乎都消失了。我使用的是相对增加法。

我如何只增加高度而不影响当前图层的 css 位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:09:20.610

虽然这与编程无关（*所以是关于编程问题*）

您需要从 的锚点部分单击左上角的框`canvas size`，以便仅在右侧和底部进行扩展。这样当前内容的位置就不会改变..

![在此处输入图像描述](../Images/93373c6e021a8e88ed88b7d757d2c83b.png)

# entity-framework - 如何首先在实体框架代码中设置默认值

> ID：10258790
> 
> 赞同：0
> 
> 时间：2012-04-21T12:13:36.010
> 
> 标签：entity-framework, code-first

当我使用代码优先方法时，有没有办法为列指定默认值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T18:09:30.243

是的，您将在实体的默认构造函数中设置默认值。

# c# - What does this mean in regular expression?

> ID：10258797
> 
> 赞同：0
> 
> 时间：2012-04-21T12:14:27.210
> 
> 标签：c#, url-rewriting

The other day I was going through the article on URL rewriting and I saw this expression

```
<conditions>
  <add input="{HTTP_HOST}" type=”Pattern” pattern="^([^.]+)\.mysite\.com$"> <!-- condition back-reference is captured here -->
 </conditions> 
```

I understand all except what does the expression `([^.]+)` mean. I understand ^ means beginning and . means anything but what does the whole expression mean?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T12:20:21.637

`[^.]` means "any character but a dot". (In character classes, the `^` at the beginning means "not".) The dot has no meaning inside a character class other than "a dot".

the `+` means "one or more".

And the parentheses group the stuff inside them, and tell the regex engine to remember what it found there.

End result being, the whole expression would match something like "sub.mysite.com", and the parenthesized part would match "sub" and remember it (presumably for future use).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T12:16:58.360

A greedy, captured match of one or more characters that aren't `.` (literally; within square brackets, `.` really means `.`, not 'any character').

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T12:17:10.223

`^` inside square brackets is not the beginning of input anchor, but rather reverses what the character class matches. So `[^x]` would match "anything except `x`".

Therefore, `[^.]` matches one or more occurrences of everything except the dot.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T12:17:29.563

```
[^.]+ 
```

Means: Any character except for the dot, for one time or more, repeatedly.

"[...]" define a set of characters, that any of which satisfy.

"^" at the start of brackets mean that the set of characters are to be excluded, and all other characters are to be included. The ^ does not count as a character here.

"+" means it must at least once, and can appear more than once

"." in this case means a simple dot

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-21T12:18:48.147

Square brackets mean "any of the enclosed characters." A caret as the first character within square brackets changes its meaning to "none of the following characters," and a period loses its special meaning. A plus means "one or more of the previous units" and parens mean "treat the contents as a single unit."

So `([^.]+)` means "One or more characters that are not periods, treated as a single unit."

# javascript - 带有引导程序的“模态形式”部分工作

> ID：10258799
> 
> 赞同：1
> 
> 时间：2012-04-21T12:14:35.990
> 
> 标签：javascript, ruby-on-rails, ajax, forms, twitter-bootstrap

在 Rails 3.2.3 上，我在部分视图中有一个表单，使用[引导程序 2.0.2 模态](http://twitter.github.com/bootstrap/javascript.html#modals)

```
#myModal.modal
  .modal-header
    .close{"data-dismiss" => "modal"}= link_to "x", root_path
    %h3 Add Tags
  .modal-body
    = form_tag '/tagging', :remote => true do
      = text_field_tag 'tags_string', params[:tags_string]
      = hidden_field_tag 'id', params[:id]
      .modal-footer
        = submit_tag "Add tag", :class => "btn btn-primary"
  :javascript
    $(document).ready(function() {
      $('#myModal .btn.btn-primary').click(function() {
        $('#myModal').modal('hide');
        $('form').submit();
      });
    }); 
```

我的“主”页面我有一个链接按钮来调用部分：

```
%td= link_to "Tag", tagging_path(:id => "#{repo.id}", :tags_string => "#{repo.tags}"), "data-toggle" => "modal", :class => "tag add-tag btn btn-primary 
```

并且控制器具有相对标记方法。

现在我有两个问题：

1.  第一的

    当我单击按钮时，它会正确显示表单，但它会离开“主”页面（我不想要），显示相对 href（为空）作为背景：

    ```
    http://localhost:3001/tagging?id=4f82cb8ef370ff0001000699&tags_string= 
    ```

    由链接按钮中的 'tagging_path' 生成。我不能像在引导示例中那样调用模态：

    ```
    <a data-toggle="modal" href="#myModal" class="btn btn-primary btn-large">Launch demo modal</a> 
    ```

    因为我需要用表单参数填充控制器/模型所以......，这怎么做？

2.  第二：

    当我单击表单中的“添加标签”按钮时，数据库会获得正确的内容并且一切正常，但是在我单击“X”链接之前表单不会消失，这只是指向 root_path 的链接而不是 JS 操作。

    所以看起来js不能正常工作

    ```
    $(document).ready(function() {
      $('#myModal .btn.btn-primary').click(function() {
        $('#myModal').modal('hide');
        $('form').submit();
      });
    }); 
    ```

更新：

这是生成的 html ：

```
<div class='modal hide fade' id='myModal'>
    <div class='modal-header'>
        <div class='close' data-dismiss='modal'><a href="/">x</a></div>
            <h3>Add Tags</h3>
        </div>

        <div class='modal-body'>
        <form accept-charset="UTF-8" action="/tagging" data-remote="true" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" />
                <input name="authenticity_token" type="hidden" value="vlZaCIRV58BfDZ0xjYsefSEVL1LSpiI5UL1tgzbm/8o=" /></div>
            <input id="tags_string" name="tags_string" type="text" />
            <input id="id" name="id" type="hidden" />

            <div class='modal-footer'>
            <input class="btn btn-primary" name="commit" type="submit" value="Add tag" />
            </div>
        </form>
    </div>
</div>

<td>
    <a href="/tagging?id=4f82cb5cf370ff000100003a&amp;tags_string=ruby+web+framework" class="tag add-tag btn btn-primary" data-toggle="modal">Tag</a></td>
</tr>
<tr>
<td>
    <div class='gravatar'><img alt="Assets.github.com%2fimages%2fgravatars%2fgravatar-orgs" height="26" src="https://secure.gravatar.com/avatar/b0f9595244db739302ccce55bfbfc5e5?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-orgs.png" width="26" /></div>
</td>
<td>
    <a href="https://github.com/h5bp/html5-boilerplate">h5bp/html5-boilerplate</a>
</td>
<td class='watchers span1'>12105</td>
<td class='forks span1'>1781</td>
<td>A professional front-end template that helps you build fast, robust, adaptable, and future-proof websites.</td>
<td>Sun, Jan 24 at  6:03pm</td>
<td>Sat, Apr 14 at  2:10pm</td>

... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:54:07.797

1)`event.preventDefault()`用于停止链接动作

2）您的选择器需要一个空格。或者你可以`.btn`完全省略。

```
$(document).ready(function() {
    $('#myModal .btn-primary').click(function(e) {
        e.preventDefault();
        $('#myModal').modal('hide');
        $('form').submit();
    });
}); 
```

如果您发布您的模态*渲染的*HTML 标记，我可以帮助您使用选择器，因为如果您想捕获特定的按钮点击，使用该类通常不是一个好主意。

**编辑给定的标记：**

好的，您可以将按钮设置为`button`类型，而不是`submit`选择它`name`。如果您使用 a`submit`您不需要调用`form.submit`，则默认情况下会这样做。使用`button`类型可以让您获得更多控制权。

```
$('input[name="commit"]').click(function() {
    //$('form').submit();
    $('#myModal').modal('hide');        
}); 
```

工作示例：http: [//jsfiddle.net/tcjCj/3/](http://jsfiddle.net/tcjCj/3/)

# php - 查询 Wordpress 自定义字段的正确方法是什么

> ID：10258800
> 
> 赞同：1
> 
> 时间：2012-04-21T12:14:36.590
> 
> 标签：php, wordpress

我有这个工作查询成功地在我的页面模板文件中获取自定义字段数据：

```
<?php $featuredpost_cat = get_field('featured_category_id'); ?> 
```

如果我将它回显到页面中，我会得到“23”自定义字段的值，所以我知道这是有效的，我想要做的是获取该值并将其用作查询参数。

在我的页面下方，我有这个：

```
<?php query_posts( $featuredpost_cat . '&posts_per_page=1'); if (have_posts()) : while (have_posts()) : the_post(); ?> 
```

所做的只是忽略我的变量并返回网站上的最新帖子。

我希望这足够清楚。

== 编辑 ===

如果我不清楚，我想从页面获取一个作为类别 ID 的自定义字段，然后在页面模板上的查询中使用它。

所以我将该字段设置为类别 ID：23，然后在我的 query_posts 函数中调用它，以便我只返回该类别的帖子。

也许整页代码会有所帮助：[模板代码](http://pastebin.com/XhKS8byu)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T12:32:43.723

怎么样

```
<?php query_posts( 'cat='.$featuredpost_cat . '&posts_per_page=1'); if (have_posts()) : while (have_posts()) : the_post(); ?> 
```

我假设 $featuredpost_cat 是一个类别 ID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T12:32:46.130

对不起，我不明白你的第二个代码示例。您是否尝试使用三元运算符来完成此操作？

```
query_posts('cat='.$featuredpost_cat . '&posts_per_page=1');

if (have_posts()){
  while (have_posts()){
    the_post();
  }
} 
```

做什么`query_posts()`和`the_post()`做什么？如果`query_post()`获取帖子，`have_post()`检查帖子的存在并`the_post()`在页面上回显它们，上面的代码应该可以工作。如果不是这种情况，请说明这些功能的作用。

* * *

编辑。去掉了问号。

# mysql - LEFT JOIN 中断 WHERE 子句

> ID：10258802
> 
> 赞同：1
> 
> 时间：2012-04-21T12:15:21.503
> 
> 标签：mysql

我最近被要求从我的数据库中输入更多信息，我只是 LEFT JOIN 来帮助我，它几乎完美地工作（它实际上确实从另一个表中获取了正确的字段）但是我的 WHERE 子句被无效给用户访问这两个表而不受我的 where 子句的限制。

MySQL 不会排除任何错误，所以我假设这与我的 where 子句或连接中发生的事情有关。

```
SELECT * FROM students 
LEFT JOIN courses ON students.appliedforCourse = courses.idNumber 
WHERE 
    students.telephone LIKE '%$var' 
    OR students.email LIKE '%$var' 
    OR students.address like'%$var%' 
    OR (CONCAT(students.firstName,' ',students.lastName) LIKE '%$var%')
    AND addedBy ='$userid'
LIMIT $s,limit 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T12:20:17.697

查询本身是正确的（尽管由于 OR 和 % % [ 不会使用索引] 确实效率低下）。
我建议回显查询，您确定 $var 评估正确吗？尝试直接在 mysql 中运行查询（例如通过 phpmyadmin 或使用控制台）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T12:23:16.443

我怀疑只是您没有设置 $var 值。然后条件，例如 students.telephone LIKE '%$var' 将变为 students.telephone LIKE '%' （对于非空地址始终为真），这将匹配 join 的每条记录，正是你得到的。

# c++ - 使用 CPP 获取成员函数的地址

> ID：10258807
> 
> 赞同：1
> 
> 时间：2012-04-21T12:16:05.323
> 
> 标签：c++, pointers, casting

我正在做一项学校作业，我需要在其中建立一个线程库。我需要`pc`保存给定 Thread 对象`run()`函数的地址。当我尝试将成员函数指针强制转换为`address_t`（实际上是无符号长整数）时，我收到此错误

> ../main.cpp: 在函数'void setup(Thread&)'中：
> 
> ../main.cpp:77:22：错误：从类型“int (Thread::*)()”到类型“address_t {aka unsigned int}”的无效转换</p>
> 
> 制作：*** [main.o] 错误 1

这是我得到错误的函数：

```
void setup(Thread &thread)
{
    address_t sp, pc;

    sp = (address_t)stack1 + STACK_SIZE - sizeof(address_t);
    int (Thread::*temp)() = &Thread::run;
    pc = (address_t) temp; // @@ LINE 77 @@

    sigsetjmp(jbuf[0],1);
    (jbuf[0]->__jmpbuf)[JB_SP] = translate_address(sp);
    (jbuf[0]->__jmpbuf)[JB_PC] = translate_address(pc);
    sigemptyset(&jbuf[0]->__saved_mask);
} 
```

几点澄清：

Thread 是我写的一个类，目前什么也没做。它作为`int run(void)`它的“主要”功能。`address_t`，正如我所说，是`typedef unsigned long int`

关于我为什么会收到此错误的任何想法？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T12:26:04.437

我不认为你能做到这一点。

> *void指针是指向数据的指针，函数指针指向函数。该语言不要求函数和数据位于相同的地址空间中，因此，作为示例而非限制，在将它们放在不同地址空间中的体系结构上，两种不同的指针类型将不具有可比性。*

看看[这个不错的常见问题解答](http://www.parashift.com/c++-faq-lite/pointers-to-members.html)。如果您无法转换为`void*`，则您无法转换为`int`或`long int`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T12:30:04.477

这不起作用有两个原因：

1.  `void*`函数指针与（se UmNyobe's answer）不兼容，并且
2.  为了将成员函数用作线程条目，您还需要存储一个`this`指针。

由于您使用的是 C++，因此您有一些可能性：

1.  使用`thread_base`定义虚函数的基类作为线程入口点。
2.  使用仿函数作为线程入口点。

无论哪种情况，您都需要将此信息存储在某处并使用操作系统的线程库调用它。

# objective-c - 使用 Parse.com 查询数组中的 2 个值

> ID：10258808
> 
> 赞同：4
> 
> 时间：2012-04-21T12:16:14.183
> 
> 标签：objective-c, ios, parse-platform

我需要查询 parse.com 以检查数组中是否存在 2 个指定值。

文档指出：“您可以给出多个约束，并且对象只有在匹配所有约束时才会出现在结果中。换句话说，它就像约束的 AND。”

我的经验表明不是。

我这样查询：

```
NSString *user1 = [self.users objectAtIndex:0];
NSString *user2 = [self.users objectAtIndex:1];

NSLog(@"User 1: %@", user1);
NSLog(@"User 2: %@", user2);

PFQuery *gameQuery = [PFQuery queryWithClassName:@"GameObject"];
[gameQuery whereKey:@"users" equalTo:user1];
[gameQuery whereKey:@"users" equalTo:user2];

NSArray *gameObjects = [gameQuery findObjects];

NSLog(@"gameObjects: %@", gameObjects); 
```

我的日志会这样说：

```
2012-04-21 14:12:23.656 Cargo[5435:707] User 1: 689XXX62
2012-04-21 14:12:23.658 Cargo[5435:707] User 2: 51XXXX994 
```

和

```
2012-04-21 14:12:24.614 Cargo[5435:707] GameObject: <GameObject:W7qXXXPLWp> {
  users =     (
     8XXX66,
     51XXXX994
  );
} 
```

该查询显然返回给我一个匹配任何一个约束的对象数组。不是都...

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-08T19:33:37.817

## 如 PFQuery.h 中所述

使用这个可用的方法。这是确保指定数组中的**每个**对象都必须存在。

```
- (void)whereKey:(NSString *)key containsAllObjectsInArray:(NSArray *)array; 
```

# 例子

```
PFQuery *gameQuery = [PFQuery queryWithClassName:@"GameObject"];
[gameQuery whereKey:@"users" containsAllObjectsInArray:@[user1,user2]];

NSArray *gameObjects = [gameQuery findObjects]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:14:54.620

来自 Parse 标头文档：

```
/*!
  Add a constraint to the query that requires a particular key's object to be contained in the provided array.
 @param key The key to be constrained.
 @param array The possible values for the key's object.
 */
- (void)whereKey:(NSString *)key containedIn:(NSArray *)array; 
```

你会这样称呼它：

```
[query whereKey: @"users" 
    containedIn: [NSArray arrayWithObjects: user1, user2, nil]]; 
```

# mobile - J2ME 加速度计有什么好的参考吗，我似乎没有找到

> ID：10258817
> 
> 赞同：2
> 
> 时间：2012-04-21T12:17:03.613
> 
> 标签：mobile, java-me, accelerometer, sensors

我用谷歌搜索但找不到任何足够的资源/示例/教程，任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T01:58:16.457

我不知道有任何手机具有适用于 J2ME 的工作标准加速度计实现，但如果存在（我将从查看最新的诺基亚 Series40 手机开始），它应该使用 JSR-256。

您可以在另一个 stackoverflow 问题中找到有关如何使用 JSR 的代码：

[JSR 256 电池事件](https://stackoverflow.com/questions/950172/jsr-256-battery-events/)

# ruby-on-rails - Thinking-Sphinx 在搜索结果中获取连接字段的值

> ID：10258819
> 
> 赞同：0
> 
> 时间：2012-04-21T12:17:18.253
> 
> 标签：ruby-on-rails, activerecord, join, model, thinking-sphinx

使用此模型：

```
class Product < ActiveRecord::Base
    belongs_to :category

    define_index do
        join category

        indexes sku
        indexes category.name, :as => :category_name, :facet => true
    end
end 
```

当我做：

```
products = Product.search("something")
products[0].category_name if products.size > 0 
```

我得到错误：

```
NoMethodError: undefined method `category_name' 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T02:48:01.740

Thinking Sphinx 不会为您创建新方法 - 所以您需要自己动手，或者只使用标准 Rails 方法来获取名称：

```
products = Product.search 'something'
products.first.category.name unless products.empty?

# or add the following to your Product model:
def category_name
  category.name
end

# and then....
products = Product.search 'something'
products.first.category_name unless products.empty? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:59:29.587

我是这样解决的：

```
Product.search("something", :select=>"products.*, category.name AS category_name", :joins=>[:category]) 
```

# android - 如何从代码在android中创建非常小的按钮？

> ID：10258823
> 
> 赞同：40
> 
> 时间：2012-04-21T12:17:57.070
> 
> 标签：android, android-layout, button

Android 默认 Button 类提供了一个非常大的按钮。

![带标题的按钮](../Images/345c14049b93e88947b98052c6cdb60d.png)

周围有很多浪费的空间。现在我想创建非常小的按钮，只比文本/标题大一点。如何从代码中做到这一点？到目前为止，我找到了以下方法，但它仍然提供了太大的按钮并浪费了太多的空间：

A. 在 res/layout 中创建一个 XML (smallbutton.xml)：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
 style="?android:attr/buttonStyleSmall"
    android:text="color"
    android:padding="0dp"
    android:layout_margin="0dp"

    android:textSize="8dp"
    android:maxHeight="2dp"
    android:maxWidth="2dp"

/> 
```

B. 从您的代码中将其膨胀并添加到视图中：

```
Button pickBackColor = (Button) this.getLayoutInflater().inflate(R.layout.smalbutton,null); 
```

...

```
LinearLayout linLayout = new LinearLayout(this);

linLayout.addView(pickBackColor); 
```

现在的问题是按钮仍然太大，它在文本周围（左、右、上、下）占用了太多空间。

![在此处输入图像描述](../Images/201edde544f69db280c9293309b46e5f.png)

任何提示如何进一步减小按钮的大小？

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2013-01-08T10:16:02.177

按钮具有最小的高度和宽度（默认情况下通常分别为 48dp 和 64dp）。所以添加

```
android:minHeight="0dp"
android:minWidth="0dp" 
```

获得非常小的按钮：

![在此处输入图像描述](../Images/4d575d9806f16df0f58056b242672f70.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-05-16T00:38:02.233

供您参考，Android 还提供了定义较小按钮的默认样式：

```
style="?android:attr/buttonStyleSmall" 
```

如有必要，您还可以修改此默认样式并在您的文件 styles.xml 中定义自定义属性。以下是问题中描述的修改示例：

```
<style name="MyButtonStyleSmall" parent="android:Widget.Button.Small">
    <!-- Customizations  -->
    <item name="android:minHeight">0dp</item>
    <item name="android:minWidth">0dp</item>
</style> 
```

然后你只需要在 XML 中调用它：

```
<Button 
   android:id="@+id/small_button"
   android:text="@string/example"
   android:contentDescription="@string/example_desc"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   style="@style/MyButtonStyleSmall" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T12:25:04.163

在 .xml 文件中...您需要将较小的值传递给 xml 文件中的 layout_height 和 layout_width ......试试这个。

```
android:layout_width="50dp" android:layout_height="50dp" 
```

根据您的要求更改值...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T13:21:25.247

在你的代码中试试这个：

```
pickBackColor.setWidth(VALUE);
pickBackColor.setHeight(VALUE); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-20T05:58:36.127

```
 <com.google.android.material.button.MaterialButton
        android:id="@+id/food_item_minus_button"
        android:layout_width="36dp"
        android:layout_height="36dp"
        android:layout_marginTop="8dp"
        android:layout_marginBottom="8dp"
        android:background="@drawable/custom_small_button_bg"
        android:drawableLeft="@drawable/ic_minus"
        android:paddingStart="6dp"
        android:paddingLeft="6dp" /> 
```

# javascript - 如何将二进制字符串转换为十进制？

> ID：10258828
> 
> 赞同：141
> 
> 时间：2012-04-21T12:18:35.023
> 
> 标签：javascript, node.js

我想将二进制字符串转换为数字例如

```
var binary = "1101000" // code for 104
var digit = binary.toString(10); // Convert String or Digit (But it does not work !)
console.log(digit);
```

这怎么可能？谢谢

* * *

## 回答 #1

> 赞同：267
> 
> 时间：2012-04-21T12:20:20.393

该[`parseInt`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)函数将字符串转换为数字，它需要第二个参数来指定字符串表示的基数：

```
var digit = parseInt(binary, 2); 
```

**[看到它在行动](http://jsfiddle.net/uhTr4/)**。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-08-10T08:28:28.910

ES6 支持整数的[二进制数字文字](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Numbers_and_dates#Binary_numbers)，所以如果二进制字符串是不可变的，就像问题中的示例代码一样，可以直接输入它，并带有前缀`0b`或`0B`：

```
var binary = 0b1101000; // code for 104
console.log(binary); // prints 104 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-04-21T12:20:36.943

使用[*radix*](http://en.wikipedia.org/wiki/Radix)参数[`parseInt`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)：

```
var binary = "1101000";
var digit = parseInt(binary, 2);
console.log(digit); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2020-02-07T22:29:31.783

```
var num = 10;

alert("Binary " + num.toString(2));   // 1010
alert("Octal " + num.toString(8));    // 12
alert("Hex " + num.toString(16));     // a

alert("Binary to Decimal " + parseInt("1010", 2));  // 10
alert("Octal to Decimal " + parseInt("12", 8));     // 10
alert("Hex to Decimal " + parseInt("a", 16));       // 10 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-02-12T08:43:14.643

`parseInt()`基数是最好的解决方案（正如许多人所说的那样）：

但是如果你想在没有 parseInt 的情况下实现它，这里有一个实现：

```
 function bin2dec(num){
    return num.split('').reverse().reduce(function(x, y, i){
      return (y === '1') ? x + Math.pow(2, i) : x;
    }, 0);
  } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-09-05T17:05:00.280

我收集了所有其他人的建议并创建了以下函数，该函数具有 3 个参数，该数字来自的数字和基数以及该数字将位于的基数：

```
changeBase(1101000, 2, 10) => 104 
```

**运行代码片段自己尝试一下：**

```
function changeBase(number, fromBase, toBase) {
    if (fromBase == 10)
        return (parseInt(number)).toString(toBase)
    else if (toBase == 10)
        return parseInt(number, fromBase);
    else {
        var numberInDecimal = parseInt(number, fromBase);
        return parseInt(numberInDecimal).toString(toBase);
    }
}

$("#btnConvert").click(function(){
    var number = $("#txtNumber").val(),
    fromBase = $("#txtFromBase").val(),
    toBase = $("#txtToBase").val();
    $("#lblResult").text(changeBase(number, fromBase, toBase));
});
```

```
#lblResult {
  padding: 20px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<input id="txtNumber" type="text" placeholder="Number" />
<input id="txtFromBase" type="text" placeholder="From Base" />
<input id="txtToBase" type="text" placeholder="To Base" />
<input id="btnConvert" type="button" value="Convert" />
<span id="lblResult"></span>

<p>Examples: <br />
  <em>110, 2, 10</em> => <em>6</em>; (110)<sub>2</sub> = 6<br />

  <em>2d, 16, 10</em> => <em>45</em>; (2d)<sub>16</sub> = 45<br />
  <em>45, 10, 16</em> => <em>2d</em>; 45 = (2d)<sub>16</sub><br />
  <em>101101, 2, 16</em> => <em>2d</em>; (101101)<sub>2</sub> = (2d)<sub>16</sub>
</p>
```

仅供参考：如果您想`2d`作为十六进制数字传递，则需要将其作为字符串发送，如下所示： `changeBase('2d', 16, 10)`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-01-10T22:11:03.653

```
function binaryToDecimal(string) {
    let decimal = +0;
    let bits = +1;
    for(let i = 0; i < string.length; i++) {
        let currNum = +(string[string.length - i - 1]);
        if(currNum === 1) {
            decimal += bits;
        }
        bits *= 2;
    }
    console.log(decimal);
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-09-12T23:40:35.903

基于[@baptx](https://stackoverflow.com/users/1176454/baptx)、[@Jon](https://stackoverflow.com/users/50079/jon)和[@ikhvjs](https://stackoverflow.com/users/14032355/ikhvjs)的评论，以下内容应该适用于非常大的二进制字符串：

```
// ES10+
function bin2dec(binStr) {
    const lastIndex = binStr.length - 1;

    return Array.from(binStr).reduceRight((total, currValue, index) => (
        (currValue === '1') ? total + (BigInt(2) ** BigInt(lastIndex - index)) : total
    ), BigInt(0));
} 
```

或者，同样使用`for`循环：

```
// ES10+
function bin2dec(binStr) {
    const lastIndex = binStr.length - 1;
    let total = BigInt(0);

    for (let i = 0; i < binStr.length; i++) {
        if (binStr[lastIndex - i] === '1') {
            total += (BigInt(2) ** BigInt(i));
        }
    }

    return total;
} 
```

例如：

```
console.log(bin2dec('101')); // 5n

console.log(bin2dec('110101')); // 53n

console.log(bin2dec('11111111111111111111111111111111111111111111111111111')); // 9007199254740991n

console.log(bin2dec('101110110001101000111100001110001000101000101011001100000011101')); // 6741077324010461213n 
```

为那些希望了解更多信息的人写了[一篇关于它的博客文章。](https://www.designcise.com/web/tutorial/how-to-manually-convert-a-binary-string-into-a-decimal-number-in-javascript)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2017-03-22T18:20:47.630

另一个仅用于功能 JS 练习的实现可能是

```
var bin2int = s => Array.prototype.reduce.call(s, (p,c) => p*2 + +c)
console.log(bin2int("101010"));
```

其中将类型`+c`强制为类型值以进行正确添加。`String``c``Number`

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2019-07-18T20:56:29.497

稍微修改了传统的二进制转换算法，利用了更多的 ES6 语法和自动功能：

1.  将二进制序列字符串转换为数组（假设它尚未作为数组传递）

2.  反向序列强制 0 索引从最右边的二进制数字开始，因为二进制是从右向左计算的

3.  'reduce' 数组函数遍历数组，对每个二进制位执行 (2^index) 求和 [仅当二进制位 === 1 时]（0 位总是产生 0）

注意：二进制转换公式：

{其中d=二进制数字，i=数组索引，n=数组长度-1（从右开始）}

n
∑ (d * 2^i)
i=0

```
let decimal = Array.from(binaryString).reverse().reduce((total, val, index)=>val==="1"?total + 2**index:total, 0);  

console.log(`Converted BINARY sequence (${binaryString}) to DECIMAL (${decimal}).`); 
```

# html - 重复按钮 - 如果你一直按下它，它会一直触发一个功能

> ID：10258832
> 
> 赞同：0
> 
> 时间：2012-04-21T12:19:07.970
> 
> 标签：html, button, zooming, repeater

我不知道该怎么称呼它，我能想到的只是一个中继器按钮。

我想按下一个按钮，它会立即触发一个函数，例如 MyZoom(InOrOut)。

但是，如果我按住鼠标按钮，它将每隔十分之一秒触发一次 MyZoom(InOrOut)，直到我松开鼠标按钮。

正如您可能从函数名称中猜到的那样，我将有 2 个按钮，一个放大和一个缩小。他们将调用 MyZoom(-1) 使其更小，调用 MyZoom(1) 使其更大。

```
<button onclick="MyZoom(-1);">Zoom Out</button>
<button onclick="MyZoom(1);">Zoom In</button> 
```

如何更改它以包含重复效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T12:27:00.277

使用`onmousedown`和`onmouseup`事件。

在`onmousedown`开始一个间隔并停止它`onmouseup`。

这是一个使用 jQuery 的小例子：

**HTML：**

```
<button class="zoomButton" data-zoom="out">Zoom Out</button>
<button class="zoomButton" data-zoom="in">Zoom In</button> 
```

**JavaScript：**

```
var zoomIntervals = {};
$('.zoomButton').on('mousedown', function() {
    var mode = $(this).data('zoom');
    zoomIntervals[mode] = setInterval(function() {
        // here you perform your action.
        // check if mode == 'in' or mode == 'out' to determine if
        // the user is zooming in or out
    }, 100);
}).on('mouseup', function() {
    var mode = $(this).data('zoom');
    clearInterval(zoomIntervals[mode]);
    del zoomIntervals[mode];
}); 
```

如果您不（想要）使用 jQuery，请使用[`addEventListener()`](https://developer.mozilla.org/en/DOM/element.addEventListener)来注册事件并直接访问数据属性（**与旧浏览器不兼容**）或使用例如 ID 属性来识别按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T12:29:47.960

我会为此使用jQuery。有一个名为[mousedown](http://api.jquery.com/mousedown/)的事件和另一个名为[mouseup](http://api.jquery.com/mouseup/)的事件可以帮助您做到这一点。基本上 mousedown 事件会启动一个计时器（重复它），当 mouseup 事件被触发时该计时器会停止。

你可以有这样的东西：

```
$('#myzoominbutton').mousedown(function() {
  alert('zooming is cool');
}); 
```

# javascript - javascript字符串替换

> ID：10258837
> 
> 赞同：1
> 
> 时间：2012-04-21T12:19:22.393
> 
> 标签：javascript

嘿伙计们今晚只是一个快速的。

我只是想改变一个笑脸，例如：-P 到一个 html 代码，`<span class=surp></span>` 但它出现了一个错误，即
`Uncaught SyntaxError: Invalid regular expression: /:-(/: Unterminated group`

这是我的代码的一部分

```
newmessage = newmessage.replace(/:-(/gi, "<span class=sad></span>"); 
```

我想通了，它不喜欢支架，所以有没有其他方法可以用支架做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T12:20:08.597

在正则表达式中，`(`开始一个组 - 但在你的情况下你想匹配文字`(`，所以你需要用反斜杠转义它：

```
newmessage = newmessage.replace(/:-\(/gi, "<span class=sad></span>"); 
```

除此之外，我会`-`选择 - 大多数人使用`:(`而不是`:-(`：

```
newmessage = newmessage.replace(/:-?\(/gi, "<span class=sad></span>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T12:28:33.670

正如@ThiefMaster 正确指出的那样，您需要使用转义字符转义括号才能在正则表达式中逐字使用它`\`。

但是对于你想要做的事情，我认为你最好将一个函数作为第二个参数传递，这样你就可以`.replace()`用一个匹配你想要替换的所有笑脸的单个正则表达式来替换单个调用中的所有内容。

像这样的东西：

```
newmessage = newmessage.replace(/(:-\(|:\(|:-\)|:\)|:-P|:P)/gi, function(match) {
  switch (match.toUpperCase()) {
    case ':-)':
    case ':)':
      return '<span class="happy"></span>';
    case ':-(':
    case ':(':
      return '<span class="sad"></span>';
    case ':-P':
    case ':P':
      return '<span class="surp"></span>';
    default:
      return match;
  }
}); 
```

# jquery - jQuery - 加载 jqGrid - 带有数组数据的 TreeGrid

> ID：10258844
> 
> 赞同：0
> 
> 时间：2012-04-21T12:20:17.273
> 
> 标签：jquery, arrays, jqgrid, treegrid

我正在尝试使用数组数据加载 TreeGrid (jqGrid)。但不知何故，等级制度并没有出现。数据仅以扁平结构出现。

代码：

```
$("#list").jqGrid({
    treeGrid: true,
    treeGridModel: 'adjacency',
    ExpandColumn: 'label',
    ExpandColClick: true,
    datatype: 'local',
    colNames:['Parent','Org','cd'],
    colModel:[
        {name:'parent',id:'parent',index:'parent', width:250, hidden: true,
            align: 'left', sortable: false, classes: 'indeling', title: false },
        {name:'label',id:'label',index:'label', width:250,align: 'left',
            sortable: false, classes: 'indeling', title: false, visible: false},
        {name:'cd',id:'cd',index:'cd', width:100,align: 'left', sortable: false,
            classes: 'indeling', title: false,visible: false }
    ],
    rowNum: 20000,
    viewrecords: true,
    height: "100%",
    treeIcons: { leaf: 'ui-icon-document-b' },
    hoverrows: false
}); 
```

然后我将数组中的行添加到网格中：

```
$('#list').jqGrid('addRowData',0,array[0]);
$('#list').jqGrid('addRowData',1,array[1]); 
```

数组结构：

```
array=[{parent:"",label:"1",cd:"32"},{parent:"1",label:"2",cd:"42"}] 
```

谁能帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T13:59:08.483

[你会在这里](https://stackoverflow.com/a/6789333/315935)找到你的问题的答案。

你不应该使用`addRowData`速度慢的，而且大多数情况下会被错误地使用。对于父节点，您应该使用`parent: "null"`or `parent: null`。此外，您应该在 TreeGrid 的输入数据中包含其他所需的信息，例如`level`，`isLeaf`。所有节点都必须`loaded:true`将节点保持在本地。

在输入中使用正确的项目顺序很重要。该顺序应与完整展开树中的项目顺序相对应。所以所有的孩子都应该跟随父母。

您应该从`colModel`未知属性中删除`id`和`visible`。[您可以在文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:colmodel_options)中找到支持的属性列表。

# c# - 在 ASP.NET MVC 3 中以编程方式创建 routeValues（匿名类型）

> ID：10258847
> 
> 赞同：9
> 
> 时间：2012-04-21T12:20:20.723
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, dynamic, anonymous-types

假设我们有一个页面，其中包含一些支持从 DB 搜索的元素，因此在 Post Action 中，我们需要找到哪些元素是活动的，并据此创建路由值，如下所示：

```
List<Parameter> SearchParameters = GetFilterParameters(collection);

if(SearchParameters.Count > 0)
foreach(Parameter item in SearchParameters) {

    switch(item.Name) {
                    case "Category":
                    CategoryValue= item.Value;
                        break;

                    case "StartDate":
                    StartDateValue= item.Value;
                        break;

                    case "Product":
                    ProductValue= item.Value;
                        break;

                }
return RedirectToAction("Index", new {category = CategoryValue, startdate=StartDateValue, product=ProductValue }); 
```

那么有没有办法`routeValues`动态定义类似以下伪代码的东西：

```
var dynamicRoutValues;
foreach(Parameter item in SearchParameters) {

  dynamicRoutValues.Add(item.Name, item.Value)

}

    return RedirectToAction("Index", dynamicRoutValues); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-21T12:25:19.080

您可以使用[`RouteValueDictionary`](http://msdn.microsoft.com/en-us/library/system.web.routing.routevaluedictionary.aspx)：

```
var dynamicRoutValues = new RouteValueDictionary();
foreach(Parameter item in SearchParameters) {
    dynamicRoutValues[item.Name] = item.Value;
}

return RedirectToAction("Index", dynamicRoutValues); 
```

如果`SearchParameters`实现`IDictionary<string, object>`了，那么您可以将其直接传递给`RouteValueDictionary`构造函数：

```
return RedirectToAction("Index", new RouteValueDictionary(SearchParameters)); 
```

# c++ - atlbase.h 和不同版本的 VC CRT

> ID：10258848
> 
> 赞同：1
> 
> 时间：2012-04-21T12:20:21.587
> 
> 标签：c++, c++-cli, atl, crt

我有一个使用 Visual Studio 2010 创建的 C++/CLI 项目，它以 .NET Framework 3.5 和 PlatformToolset v90 为目标。最初它请求版本 9.0.21022.8 的 VC CRT，但如果我包含 atlbase.h 标头，则它请求版本 9.0.30729.6161 的 VC CRT。为什么会这样？以及如何在不包含 atlbase.h 的情况下使其目标 9.0.30729.6161？

我试图定义宏 _BIND_TO_CURRENT_CRT_VERSION=1 和 _BIND_TO_CURRENT_VCLIBS_VERSION=1 但这没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T14:26:06.170

版本由vc/include/crtassem.h设置，靠近底部可以看到：

```
#ifndef _CRT_ASSEMBLY_VERSION
#if _BIND_TO_CURRENT_CRT_VERSION
#define _CRT_ASSEMBLY_VERSION "9.0.30729.6161"
#else
#define _CRT_ASSEMBLY_VERSION "9.0.21022.8"
#endif
#endif 
```

所以规则是您可以通过#defining _CRT_ASSEMBLY_VERSION 显式覆盖版本。不要那样做。正如您在问题中指出的那样，#defining _BIND_TO_CURRENT_CRT_VERSION to 1 为您提供所需的版本字符串。

在 C++/CLI 项目中可能会遇到此问题。您可以编译 C++/CLI 代码，而无需 #include 任何 CRT 包含文件。因此，您最终会得到一个默认版本，具有讽刺意味的是，它被*链接器*默认为它自己的 CRT 版本。因此，一种解决方法是显式放入`#include <crtassem.h>`您的一个源代码文件。#include atlbase.h 也会这样做，因为它*确实*包含 CRT 标头，但当然是大锤方法。

其他故障排除可从 Project + Properties、C/C++、Advanced、Show Includes = Yes 获得。您将在“输出”窗口中看到所有#include 文件的跟踪。

请注意，您现在将有额外的负担来确保将最新版本的 msvcr90.dll 部署在用户的计算机上。如果您的程序丢失或陈旧，您的程序将无法启动。

# wordpress - wordpress 中某个类别的 Rss 提要

> ID：10258854
> 
> 赞同：7
> 
> 时间：2012-04-21T12:21:19.707
> 
> 标签：wordpress, rss, feed

我想在 wordpress 中仅获取一个特定类别的 RSS 提要。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-12-14T08:15:39.397

wordpress 中的特定类别：

```
http://example.com/category/categoryname/feed 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-21T15:03:58.650

通常，除非您对 Wordpress 的核心进行了一些修改，否则您可以在类别 URL 的末尾添加“/feed”，这将为您提供 RSS 提要。

例如，如果您有一个类别“食物”，那么您的 RSS 提要将是 example.com/food/feed

如果您在永久链接设置 /wp-admin/options-permalink.php 下设置了类别基础，那么它将是 example.com/your-category-base/food/feed

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T12:25:49.560

您可以在此处了解有关 Feed 的更多信息： [https ://wordpress.org/support/article/wordpress-feeds/](https://wordpress.org/support/article/wordpress-feeds/)

添加`/feed`到任何 URL 的末尾使您可以访问 WordPress 提供的提要功能，包括类别。

# php - jquery mobile select with data-native-menu="false" 和 php 数组不起作用

> ID：10258860
> 
> 赞同：0
> 
> 时间：2012-04-21T12:22:09.127
> 
> 标签：php, jquery-mobile

我不能让它工作。带有 jqm data-native-menu="false" 的 php 数组不会显示所有项目，而只会显示第一个和最后一个。如果 data-native-menu="true" 则显示所有项目。我该如何解决？

```
<?php
$fooArray = array('Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday');
?>
<!DOCTYPE html>
<html>
<head>
<title></title> 
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
<meta name="viewport" content="width=device-width, initial-scale=1"> 
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script src="js/jquery.js"></script>
<script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>
</head>
<body>
<section id="main" data-role="page">

    <header data-role="header" data-theme="b"><h1></h1></header>

    <div data-role="content">
        <div data-role="fieldcontain">
            <label for="select-choice-1" class="select">Choose the day:</label>
            <select name="select-choice-1" id="select-choice-1" data-native-menu="false">
            <?php foreach ($fooArray as $value) { echo '<option value=>'.$value.'</option>'; } ?>
            </select>
        </div>                
    </div>

    <footer data-role="footer" data-theme="b"><h1></h1></footer>

</section>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T21:28:55.357

将您的 foreach 循环更改为此

```
<?php foreach ($fooArray as $value) { echo '<option value="'.$value.'">'.$value.'</option>'; } ?> 
```

# c++ - 用户定义的“队列”类的向量

> ID：10258862
> 
> 赞同：0
> 
> 时间：2012-04-21T12:22:27.347
> 
> 标签：c++, vector, constructor, overloading, operator-keyword

我正在尝试定义一个向量<Queue>。这个向量应该包含每个队列对象的起始地址。我在 List.h 中创建了一个复制构造函数和一个赋值运算符（队列有私有：列表）。但是，即使在我的程序运行之前，它也会引发错误： List.h:156:1: error: invalid use of template-name 'List' without a argument list

这是代码（标出相关位）

```
#ifndef LIST_H
#define LIST_H
#include "ListNode.h"

using namespace std;
template <typename NODETYPE>
class List {
public:
    List(const List&);                    <-----------copy constructor 
    List();
    ~List();
    void insertAtFront(const NODETYPE& );
    void insertAtBack (const NODETYPE& );
    bool removeFromFront(NODETYPE& );
    bool removeFromBack (NODETYPE& );
    bool isEmpty() const;
    void print() const;
    int length() const;
    List<NODETYPE>& operator=(const List&);     <----- assignment operator overload (see end)
private:
    ListNode<NODETYPE> *firstPtr;
    ListNode<NODETYPE> *lastPtr;
    ListNode<NODETYPE> *getNewNode (const NODETYPE& );
};

template <typename NODETYPE>                <------------code for copy constructor
List<NODETYPE>::List(const List& source){
    firstPtr = source.firstPtr;
    lastPtr = source.lastPtr;}

template <typename NODETYPE>
List<NODETYPE>::List():firstPtr(0),lastPtr(0){}

template <typename NODETYPE>
List<NODETYPE>::~List(){
    if (!isEmpty()){
        cout<<"\nDestroying node ... \n";
        ListNode<NODETYPE> *currentPtr = firstPtr;
        ListNode<NODETYPE> *tmpPtr;
        while (currentPtr != 0){
            tmpPtr = currentPtr;
            cout<<tmpPtr->value<<endl;
            currentPtr = currentPtr->nextPtr;
            delete tmpPtr;
        }
        }
    cout<<"\nAll node destroyed\n";
    }

template <typename NODETYPE>
void List<NODETYPE>::insertAtFront(const NODETYPE &val){
    ListNode<NODETYPE>*newPtr = getNewNode(val);
    if (isEmpty()){
        firstPtr = lastPtr = newPtr;}
    else {
        newPtr ->nextPtr = firstPtr;
        firstPtr = newPtr;                                          // do not understand this frag
    }}

template <typename NODETYPE>
void List<NODETYPE>::insertAtBack(const NODETYPE& val){
        ListNode<NODETYPE>*newPtr = getNewNode(val);
    if (isEmpty()){
        firstPtr = lastPtr = newPtr;}
    else {
        lastPtr ->nextPtr =newPtr;
        lastPtr = newPtr;                                           // do not understand this frag
    }

}

template <typename NODETYPE>
bool List<NODETYPE>::removeFromFront(NODETYPE& data)
{
    if (isEmpty()){
        return false;}
    else
    {
        ListNode<NODETYPE> *tempPtr = firstPtr;
        if (firstPtr == lastPtr)
            firstPtr = lastPtr = 0;
        else
            firstPtr = firstPtr->nextPtr;           // must look at detail inside DDD, what happens to the current ListNode object pointed to byfirstPtr
        data = tempPtr->value;
        delete tempPtr;
        return true;
    }
}
template <typename NODETYPE>
bool List<NODETYPE>::removeFromBack (NODETYPE& data) {

    if (isEmpty){
        return false;}
    else
    {
        ListNode<NODETYPE> *tempPtr = firstPtr;
        if (firstPtr == lastPtr)
            firstPtr = lastPtr = 0;
        else
        {
            ListNode<NODETYPE> *currentPtr = firstPtr;
            while (currentPtr->nextPtr !=lastPtr){
                currentPtr = currentPtr->nextPtr; }
            lastPtr = currentPtr;
            currentPtr ->nextPtr = 0;
        }
        data= tempPtr->value;
        delete tempPtr;
        return true;
    }
    }

template <typename NODETYPE>
bool List<NODETYPE>::isEmpty() const{                               // CONSTANT MEMBER FUNCTION
    return firstPtr==0;
    }

                                                                // different from textbook (see p 755)
template <typename NODETYPE>
ListNode<NODETYPE>* List<NODETYPE>::getNewNode(const NODETYPE&value) {
    return new ListNode <NODETYPE>(value); }

template<typename NODETYPE>
void List<NODETYPE>::print() const {
    if (isEmpty()) {
        cout<<" This list is empty\n";
        return ;}
    ListNode<NODETYPE> *currentPtr = firstPtr;
    while (currentPtr !=0)
    {
        cout << currentPtr->value <<' ';
        currentPtr = currentPtr->nextPtr;
        }
    cout<< "\n\n";

}

template <typename NODETYPE>
int List<NODETYPE>::length() const {
    if (this->isEmpty()){
        cout<< "\n Return size of what ? .. this list is empty ";
        return 0; }
    int size = 1;
    ListNode<NODETYPE>* currentPtr = firstPtr;
    while (currentPtr != lastPtr) {
        currentPtr = currentPtr->nextPtr;
        size +=1;
        }
    return size;
}

 template<typename NODETYPE>                       
List<NODETYPE>& List<NODETYPE>::operator=(List& rhs)       <---- line of error
{
    if (this !=&rhs){
        this->firstPtr = rhs.firstPtr;
        this->lastPtr = rhs.lastPtr; 
        return &firstPtr;
    }

   #endif 
```

调用程序如下：

```
#include <iostream>List& operator=(const List&);
#include <vector>
#include "Queue.h"
#include <algorithm>
using namespace std;

int main () {
    vector < Queue <int> > dodo;
    for (int init = 0; init<4;init++ ){
        dodo.push_back(init);
    vector <Queue <int> >::const_iterator iterator;
    for (iterator = dodo.begin();iterator !=dodo.end();iterator ++){
        cout<<"Address of each queue item "<<dodo[]<<'\t'<<&dodo[];}
    int dequeueInteger;
    Queue <int> intQueue;
    cout <<"\n Size is .. " <<intQueue.howbig();
    cout << "\nProcessing integer Queue\n";
    for (int i=0;i<3;++i) {
        intQueue.enqueue(i);
        intQueue.printQueue(); }
    Queue<int> photo;
    photo = intQueue;

    cout <<"\n\n Here is mr. photo";
    photo.printQueue();

cout<<endl<<"\nSize of this queue is .. " <<intQueue.howbig();
cout<<endl;
while (!intQueue.isQueueEmpty()){
    intQueue.dequeue(dequeueInteger);
    cout<<dequeueInteger<<" dequeued\n";
    intQueue.printQueue();
}
} 
```

文件队列.h

```
 #ifndef QUEUE_H
#define QUEUE_H
#include "List.h"

template <typename QUEUETYPE>
class Queue : private List< QUEUETYPE >
{
public:
void enqueue (const QUEUETYPE &data) {
    insertAtBack(data);}
bool dequeue (QUEUETYPE &data) {
    return removeFromFront(data); }
bool isQueueEmpty ()const {
    return this->isEmpty(); }
void printQueue() const {
    this ->print(); }
int howbig() const {
    return this->length();
    }

};
   #endif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T12:29:04.293

您缺少返回值的模板参数

```
template<typename NODETYPE>                       
List<NODETYPE>& List<NODTETYPE>::operator=(List& rhs)
    ^^^^^^^^^^ 
```

你需要那个，因为编译器不知道他正在解析一个`List`成员，这`List`意味着当前模板实例化，直到 after `List<NODETYPE>::`。

# c++ - zeromq 套接字接收挂起

> ID：10258867
> 
> 赞同：1
> 
> 时间：2012-04-21T12:23:27.657
> 
> 标签：c++, zeromq, freeze

我使用 zeromq（最新版本，2012.04.04）、c++、ms vs 2008（x86 发布/调试）、windows 7 x64。我尝试编写简单的客户端-服务器系统。

## 问题

我的问题是在 Windows 7 上的 recv() 命令**中计算机死机，当***许多客户端同时连接到服务器时*。

在 Windows Vista 上，结果就像在 Windows XP 上一样 - 客户端失败：
[http://research.makseq.com/testZMQ/2.Vista.png](http://research.makseq.com/testZMQ/2.Vista.png)
[http://research.makseq.com/testZMQ/1.PNG](http://research.makseq.com/testZMQ/1.PNG)
在此之后失败的客户端无法连接到服务器，他们写道：
“断言失败：地址已在使用中：...”

## 这是源代码：

[http://research.makseq.com/testZMQ/testZMQ.rar](http://research.makseq.com/testZMQ/testZMQ.rar)

## 如何使用：

1）“testZMQ.exe服务器”到服务器启动，

2）按回车并按住“testZMQ.exe”启动多对多客户端。

尝试多次启动服务器：我认为这个错误发生在服务器启动两次或更多次时。

```
#include "stdafx.h"
#include "../Libraries/zeromq/include/zmq.h"
#include "../Libraries/zeromq/include/zhelpers.hpp"
#include <string>
using namespace std; 

#ifdef WIN32
#pragma comment(lib, "../Libraries/zeromq/libzmq.lib") 
#endif

//-----------------------------------------------------------------------------
int server()
{
    cout << ":: Server ::" << endl;
    zmq::context_t context(1);
    zmq::socket_t server(context, ZMQ_REP);
    server.bind("tcp://*:7774");

    while (1) {

         // receive 
         zmq::message_t messageR;
         cout << "debug point 1" << endl; 
         server.recv(&messageR); // <== dead hanging here
         cout << "debug point 2" << endl; 
         string recieved = string(static_cast<char*>(messageR.data()), messageR.size());

         // send
         string reply = "do something";
         zmq::message_t messageS(reply.size());
         memcpy(messageS.data(), reply.data(), reply.size()); 
         cout << "debug point 3" << endl; 
         server.send(messageS);
         cout << "debug point 4" << endl; 

    }
    return 0;
}

//-----------------------------------------------------------------------------
int client()
{
    cout << ":: Client ::" << endl;
    // connect
    zmq::context_t context(1);
    zmq::socket_t *client = new zmq::socket_t (context, ZMQ_REQ);
    client->connect("tcp://localhost:7774");
    int linger = 0;
    client->setsockopt (ZMQ_LINGER, &linger, sizeof (linger));

    // send
    string reply = "hello";
    zmq::message_t messageS(reply.size());
    memcpy(messageS.data(), reply.data(), reply.size()); 
    client->send(messageS);

    // receive
    zmq::message_t messageR;
    client->recv(&messageR);
    string recieved = string(static_cast<char*>(messageR.data()), messageR.size());

    // close
    client->close();
    delete client;
    zmq_term(&context);

    return 0;
}

int _tmain(int argc, _TCHAR* argv[])
{
    if (argc == 2) server(); 
    else client(); 

    return 0;
} 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T21:15:50.937

`recv` is a blocking call. Until something connects, it will sit there and wait. It's not a *dead hang*, it's just waiting for a connection.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T12:55:25.163

“地址已在使用”错误似乎暗示您对 socket.bind() 的调用发生了多次 - 即您正在运行多个服务器进程。您只能绑定一次到给定接口上的给定端口。

我怀疑这解释了为什么它会导致机器挂起......

# php - 从 mysql 数据库中检索 blob 图像并在 android listview 中显示

> ID：10258869
> 
> 赞同：1
> 
> 时间：2012-04-21T12:24:05.600
> 
> 标签：php, android, database, json

我在 phpmyadmin 中创建了一个名为 article 的数据库，其中包含有关文章和图像的信息（存储为 blob）。我能够从数据库中获取数据并将其显示在 android 列表视图中，但我不知道如何从数据库中检索 blob 图像并将其与相应的文章信息一起显示在 android 列表视图中。请帮助我..我做了很多谷歌搜索，但我没有做..任何指向教程的链接或发布的任何代码都会非常棒......我的项目需要这个..提前谢谢:)

我的php代码是-

```
<?php
header('Content-type: application/json');
mysql_query('SET CHARACTER SET utf8');
mysql_connect("localhost","root","");
mysql_select_db("reader");
$id=$_REQUEST['keyword'];
$id1=(int)$id;
$sql=mysql_query("SELECT * FROM article a WHERE a.a_id='{$id}'");
while($row=mysql_fetch_assoc($sql))
{
$row['a_thumbnail']=base64_encode($row['a_thumbnail']);
$row1= array_slice($row, 0, 2);
$row_slice=array_slice($row,2);
$output2=array_map('utf8_encode', $row_slice);
$output[]=array_merge((array)$row1, (array)$output2);
}
print(json_encode($output));
mysql_close();
?> 
```

我为检索图像而编写的 java 代码是-

```
public class SearchByLikeCount extends ListActivity {
ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main2);
        String result = "";
        InputStream is= null;
        try{
                HttpClient httpclient = new DefaultHttpClient();
                HttpGet httpget = new HttpGet("http://10.0.2.2/likeCountsearch.php");
                HttpResponse response = httpclient.execute(httpget);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();
        }catch(Exception e){
                Log.e("log_tag", "Error in http connection "+e.toString());
        }
        try{
                BufferedReader reader = new BufferedReader(new InputStreamReader(is,"utf-8"),8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                }
                is.close();

                result=sb.toString();
        }catch(Exception e){
                Log.e("log_tag", "Error converting result "+e.toString());
        }
        try{
                JSONArray jArray = new JSONArray(result);
                for(int i=0;i<jArray.length();i++){

                    HashMap<String,String> map = new HashMap<String, String>();
                    JSONObject e = jArray.getJSONObject(i);
                    Log.i("shruthi", "jason object length = " + e.length());
                    map.put("id",  e.getString("a_id"));
                    map.put("title",  e.getString("a_title"));
                    map.put("author",  e.getString("a_author"));
                    map.put("image", e.getString("a_thumbnail"));
                    mylist.add(map);
            }
               }catch(JSONException e)        {
                 Log.e("log_tag", "Error parsing data "+e.toString());
               }

        ListAdapter adapter = new SimpleAdapter(SearchByLikeCount.this, mylist , R.layout.main2,
        new String[] { "title", "author","image"},
        new int[] { R.id.item_title ,R.id.item_author,R.id.list_image});

        setListAdapter(adapter);

        final ListView lv = getListView();
        lv.setTextFilterEnabled(true);
        lv.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        @SuppressWarnings("unchecked")
        HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);
        Object v=o.get("id");
        String id1=v.toString();
        Intent myintent= new Intent(SearchByLikeCount.this,ViewArticle.class);
        myintent.putExtra("articleId", id1);
        startActivity(myintent);
        }
    }); 
 }
} 
```

这没有用:(谁能告诉我我犯了什么错误？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T09:40:58.347

也许您可以将图像存储在文件夹
中并将文件夹链接存储在数据库中，然后通过链接检索图像

```
 try 
{
    Bitmap bitmap = BitmapFactory.decodeStream((InputStream)new URL(imageUrl).getContent());
    imageView.setImageBitmap(bitmap); 
} 
catch (MalformedURLException e) 
{
      e.printStackTrace();
} 
catch (IOException e)
 {
       e.printStackTrace();
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T14:24:16.453

如果您从数据库中检索图像，那么您想使用哪个设备并不重要，图像就是图像

您可以执行以下操作

```
$im = imagecreatefromstring($imageContent);
if ($im !== false) {
    header('Content-Type: image/png'); // Change to what you want
    imagepng($im);
    imagedestroy($im);
}
else {
    echo 'An error occurred.';
} 
```

# ios - 如何在滚动视图上的 UIImageview 上启用操作

> ID：10258871
> 
> 赞同：0
> 
> 时间：2012-04-21T12:24:14.403
> 
> 标签：ios

嗨，我有一个大背景图像，我将该图像添加到 BGimageview，然后我将 BGImageView 添加到 ScrollView，现在我想在顶部 og BGImageView 上添加另一个 smallImageView，这也完成了。我在触摸时为 smallImageView 制作了一些动画，但它没有发生。请有人帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T12:29:55.510

默认情况下，图像视图不接收触摸事件。您需要将 userInteractionEnabled 设置为 YES。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T12:34:03.180

使用@phix23 给出的上述答案，您需要使用它来处理图像视图上的事件，只需从[此处](https://github.com/AalokParikh/pinch-and-uiguesture)`requireGestureRecognizerToFail:`下载代码

# c# - 整数字符串到带有 TryParse 的整数列表

> ID：10258873
> 
> 赞同：7
> 
> 时间：2012-04-21T12:24:26.643
> 
> 标签：c#

我有这段代码：

```
TheString = "443,432,546,4547,4445,2,132"; //actually, about 1000 entries    
List<int> TheListOfIDs = new List<int>();   
TheListOfLeadIDs = from string s in TheString.Split(',')
                   select Convert.ToInt32(s)).ToList<int>(); 
```

我知道我可以使用 try catch 来确保转换不会引发错误，但我想知道如何在 linq 语句中使用 TryParse 使其工作。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-21T12:29:51.553

```
TheListOfIDs = TheString.Split(',')
                        .Select(s => 
                        {
                            int i;
                            return Int32.TryParse(s, out i) ? i : -1;
                        }).ToList(); 
```

这将为`-1`任何失败的转换返回一个。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-21T12:28:40.677

```
TheListOfLeadIDs = (from string s in TheString.Split(',')
                    let value = 0
                    where int.TryParse(s, out value)
                    select value).ToList<int>(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-21T12:50:00.423

你可以这样做：

```
string TheString = "443,432,546,4547,4445,2,132"; //actually, about 1000 entries
int temp=0;
var TheListOfIDs= TheString
                  .Split(',')
                  .Where (ts =>int.TryParse(ts,out temp))
                  .Select (ts =>temp )
                  .ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T12:41:59.297

警告：未尝试。

```
string[] myString = TheString.Split(',');

int leadId;
var theListOfLeadIds = (from myString in myString where int.TryParse(myString, out leadId) select int.Parse(myString)).ToList<int>(); 
```

这意味着您只会获得成功解析的价值......

# ios - iOS MKMapView setCenterCoordinate 不遵守确切的坐标

> ID：10258874
> 
> 赞同：1
> 
> 时间：2012-04-21T12:24:48.807
> 
> 标签：ios, mkmapview, zooming, centering, coordinate

当按下定位按钮时，我有以下代码以用户的当前位置为中心：

```
- (void)locate
{
    if (self.curLocation) {
        [self.googleMapView setCenterCoordinate:self.curLocation.coordinate animated:YES];
        NSLog(@"setting center (%f,%f), but got (%f,%f)", self.curLocation.coordinate.latitude, self.curLocation.coordinate.longitude, self.googleMapView.centerCoordinate.latitude, self.googleMapView.centerCoordinate.longitude);
    }
} 
```

NSLog 的输出是“设置中心 (37.785834,-122.406417), but got (37.785826,-122.406406)”

这意味着 setCenterCoordinate 移动到近似坐标而不是指示的坐标。这非常不方便，因为当我实现缩放级别时，在同一位置缩小然后再放大（因为 setRegion 也会更改中心坐标）将从旧位置移开。这是违反直觉的，Android 平台 API 不会表现出这种不稳定的行为。

有人可以解释为什么 setCenterCoordinate 不去确切的坐标，如果可能的话，任何方法来确保放大和缩小将具有相同的中心。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T11:10:18.537

您可以将原始的“良好”中心坐标保存在 ivar 中，然后在每次放大时使用它。这样它应该总是回到它开始的地方。我假设您正在使用按钮或调用方法进行放大。

中心坐标似乎不可靠。当您放大时，它会变得更加可靠，但它似乎从未完全按照您的要求设置。即使使用返回的中心坐标`regionThatFits:`也不会给出完全匹配，它应该。您可以使用以下方法`-mapView:regionDidChangeAnimated:`进行试验：

```
- (void)viewDidAppear:(BOOL)animated
{
    MKCoordinateSpan span = MKCoordinateSpanMake(0.0001f, 0.0001f);
    CLLocationCoordinate2D coordinate = {35.67106,139.764909};
    MKCoordinateRegion region = {coordinate, span};

    MKCoordinateRegion regionThatFits = [self.mapView regionThatFits:region];
    NSLog(@"Fit Region %f %f", regionThatFits.center.latitude, regionThatFits.center.longitude);

    [self.mapView setRegion:regionThatFits animated:YES];
//  [self.mapView setRegion:region animated:YES];
//  [self.mapView setCenterCoordinate:coordinate animated:NO];
}

- (void)mapView:(MKMapView *)myMapView regionDidChangeAnimated:(BOOL)animated
{
    NSLog(@"Center: %f %f", myMapView.region.center.latitude,myMapView.region.center.longitude);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T06:00:52.143

setCenterCoordinate 中的最后一个参数是“动画”。您将其设置为“是”，因此可能需要一秒钟左右才能到达正确的位置。由于这发生在另一个线程上，因此 NSLog 行发生在地图到达目标坐标之前。在阅读中心之前等待一两分钟，或者通过屏幕上的按钮激活您的 NSLog 语句，这样您就可以确保在地图停止移动后执行此操作。

# hibernate - 休眠映射文件中的损失长度，精度，比例

> ID：10258875
> 
> 赞同：0
> 
> 时间：2012-04-21T12:24:51.567
> 
> 标签：hibernate

我使用 Hibernate Tools 从带注释的类生成 *.hbm 文件。我有一个带注释的类，如下所示：

```
@Entity
@Table(name = "COUNTRIES")
public class Countries implements java.io.Serializable { {
   // ...
   @Id
   @Column(name = "COUNTRY_ID", unique = true, nullable = false, length = 2)
   public String getCountryId() {
     return this.countryId;
   }
   // ...
} 
```

这是我生成的休眠映射文件

```
<class name="com.hibernate.domain.Countries" table="COUNTRIES">
        <id name="countryId" type="java.lang.String">
            <column name="COUNTRYID" />
            <generator class="assigned" />
        </id>
        <many-to-one name="regions" class="com.hibernate.domain.Regions" fetch="join">
            <column name="REGIONS" />
        </many-to-one>
        <property name="countryName" type="java.lang.String">
            <column name="COUNTRYNAME" />
        </property>
        <set name="locationses" table="LOCATIONS" inverse="false" lazy="true">
            <key>
                <column name="COUNTRYID" />
            </key>
            <one-to-many class="com.hibernate.domain.Locations" />
        </set>
    </class> 
```

在映射文件中，列 COUNTRY_ID 的属性长度是丢失的，这与具有比例和精度的数字数据类型相同。我应该如何在 Hibernate Tools 中解决这个问题？

# arrays - 如何按自定义列名对数组进行排序

> ID：10258880
> 
> 赞同：0
> 
> 时间：2012-04-21T12:25:32.453
> 
> 标签：arrays, wordpress, sorting

我在一个 wordpress 网站上工作，我需要通过自定义列名“IDlisting”对一些用户的数组进行排序

如何通过“IDlisting”对该数组进行排序？

```
 Array 
    ( 
        [0] => stdClass Object 
            ( 
                [ID] => 6 
                [user_login] => adri 
                [user_url] =>  
                [user_status] => 0 
                [display_name] => adrian
                [IDlisting] => 6 
            ) 

        [1] => stdClass Object 
            ( 
                [ID] => 1 
                [user_login] => admin 
                [user_nicename] => admin 
                [user_activation_key] =>  
                [user_status] => 0 
                [display_name] => admin 
                [IDlisting] => 0 
            )
    ) 
```

我试过

```
$args  = array('orderby' => 'IDlisting',
                'order' => 'ASC'

      );
  $authors = get_users($args); 
```

但它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T21:37:10.597

[http://codex.wordpress.org/Function_Reference/get_users](http://codex.wordpress.org/Function_Reference/get_users)

> orderby - 按“nicename”、“email”、“url”、“已注册”、“display_name”或“post_count”排序。

原生不支持按 IDlisting 排序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T22:20:38.880

如果你有一个数组中的结果，那么你可以手动对数组进行排序。

```
<?php
header("Content-type: text/plain");

$data = array();
$data[] = array("id" => 6, "user_login" => "adri", "url" => "", "user_status" => 0, "display_name" => "adrian", "IDlisting" => 6);
$data[] = array("id" => 1, "user_login" => "admin", "url" => "", "user_status" => 0, "display_name" => "admin", "IDlisting" => 1);

var_dump($data);

echo "-----------------------------\n";

function cmp($a, $b)
{
    return $a["IDlisting"] - $b["IDlisting"];
}

uksort($data, "cmp");

var_dump($data);

?> 
```

# javascript - 在 javascript 中处理 youtube 数据 api 中的错误

> ID：10258882
> 
> 赞同：3
> 
> 时间：2012-04-21T12:25:47.303
> 
> 标签：javascript, youtube, youtube-api, youtube-javascript-api, script-tag

成功的加载之一是这样的：

[http://gdata.youtube.com/feeds/api/videos/N7m86aMNjlQ?callback=jsonp1335008664824&alt=json-in-script](http://gdata.youtube.com/feeds/api/videos/N7m86aMNjlQ?callback=jsonp1335008664824&alt=json-in-script)

但是，当视频是私有的或不存在时，它只会返回一条带有 http 错误状态代码的消息。

[http://gdata.youtube.com/feeds/api/videos/zkZBEnBjOjY?callback=jsonp1335008664915&alt=json-in-script](http://gdata.youtube.com/feeds/api/videos/zkZBEnBjOjY?callback=jsonp1335008664915&alt=json-in-script)

我创建了一个示例唯一回调函数名称，例如“jsonp1335008664824”，并将 url 作为脚本标记的 src 附加，并在脚本加载时捕获该函数。但是，如果它返回错误，则 youtube 不会将内容作为回调函数返回，并且我无法捕获其中任何一个。因为脚本标签没有“onerror”属性，我什至不知道它是在加载还是返回一个错误，比如 404 或 503 状态码。

似乎处理它的唯一方法是在我附加脚本标签时设置超时功能。但是，这不是一种可靠的方法，因此我正在寻找另一种选择。我知道即使我可以捕获状态代码，我也无法收到错误消息，但正如我所见，只有两个状态代码和两个错误，即“找不到视频”的 404 或“视频是私有的”的 503。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T01:18:12.577

我从 Youtube 开发者论坛得到了答案。因此，jsonc 是处理此类请求的更好方法。而这个开发请求变成了这个布局： [http ://gdata.youtube.com/feeds/api/videos/zkZBEnBjOjY?callback=jsonp1335008664915&alt=jsonc&v=2](https://code.google.com/p/gdata-issues/issues/detail?id=2233#c1)

而且正如我从[这里](https://code.google.com/p/gdata-issues/issues/detail?id=2233#c1)了解到的，我们可以在 Youtube Data Api 中使用 XMLHTTPRequest。这太棒了，因为我们可以从现在开始发出 POST 和 PUT 请求。

# jquery - 使用jquery从xml获取数据到html

> ID：10258889
> 
> 赞同：0
> 
> 时间：2012-04-21T12:26:35.930
> 
> 标签：jquery, html

我正在使用 jquery 从 XML 获取数据到 html，我构建了一个运行良好的函数，如下所示

```
function parseXml(xml){
    xmlcontent = xml;
    $('#file').html('$'+ GetDeals('delhi','india'));
    $('#file1').html('$'+ GetDeals('mumbai','india'));
    $('#file2').html('$'+ GetDeals('kolkata','india'));    
}

function GetDeals(state, country){
    var lowestPrice=0;    
    $(xmlcontent).find("ndata[nstate='"+state+"'][ncountry='"+ country +"']").each(function(){
        lowestPrice =  parseInt($(this).attr('price')) ;
    });
    return lowestPrice;    
} 
```

现在我想从 xml 中再选择一个字段调用 cityrating 例如第一个参数包含 cityrating=1，第二个 cityrating=2，最后一个是 3，我想在新的 div 中得到它，我挣扎了将近 3 个小时，但它不工作我下面给出的更改功能。当我运行这个函数 cityrating 替换为最后一个 cityrating 例如所有参数 cityrating 替换为 3

```
function parseXml(xml){
    xmlcontent = xml;
    $('#file').html('$'+ GetDeals('delhi','india'));
    $('#file1').html('$'+ GetDeals('mumbai','india'));
    $('#file2').html('$'+ GetDeals('kolkata','india'));    
}

function GetDeals(state, country){
    var lowestPrice=0;
    var cityRating=[];

    $(xmlcontent).find("ndata[nstate='"+state+"'][ncountry='"+ country +"']").each(function(){
        lowestPrice =  parseInt($(this).attr('price'));
        cityRating.push(parseInt($(this).attr('CityRating')));
        $('.city').html(cityRating[0])
    });
    return lowestPrice;    
} 
```

//我的html

```
<div id="file"></div>
<div class="city"></div>

<div id="file1"></div>
<div class="city"></div>

<div id="file2"></div>
<div class="city"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T12:30:21.757

我看到您正在尝试查找具有`city`不存在的类的元素。

应该`$('#city').html(cityRating[0])`改为`$('.city').html(cityRating[0])`

# ruby - 停止 ruby http 请求修改标头名称

> ID：10258893
> 
> 赞同：6
> 
> 时间：2012-04-21T12:27:09.253
> 
> 标签：ruby, http

我在 ruby​​ 中做一个 http 请求：

```
 http = Net::HTTP.new(uri.host, uri.port)
  req = Net::HTTP::Post.new(uri.path)
  req.body = payload
  req['customeheader'] = 'xxxxxxxxx'
  http.set_debug_output $stdout 
```

我已经打开了调试，当请求发布时，我可以看到标题被发布为：

```
 Customheader: xxxxxxxxx 
```

无论如何要阻止这个，我发布到的第三方服务器给出了一个错误，因为标题名称不正确 - 它期待`customheader:`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-15T21:06:35.063

虽然可以修改 Net::HTTPHeader 和 Net:HTTPGenericRequest 以删除小写和大写，但我发现了一种不同的方法，它允许选择性区分大小写而不是强制所有内容。

解决方案：

```
class CaseSensitiveString < String
    def downcase
        self
    end
    def capitalize
        self
    end
end 
```

然后 CaseSensitiveString.new('keyname') 在区分大小写时创建您的密钥。对其他键使用字符串/符号来保持现有行为。这比猴子补丁要简单得多，并且可以很好地与 rest-client 库以及 Net::HTTP 一起使用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-21T15:02:32.240

根据 HTTP 规范 (RFC 2616)，标头字段名称[不区分大小写](http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.2)。所以第三方服务器的实现有问题。

如果您真的需要，您可以对 Net::HTTP 进行猴子补丁以保留大小写，因为它在存储字段名称时将其小写，然后用初始大写字母写入它们。

这是您使用的存储方法 ( [`Net::HTTPHeader#[]=`](http://apidock.com/ruby/Net/HTTPHeader/%5B%5D=))：

```
# File net/http.rb, line 1160
    def []=(key, val)
      unless val
        @header.delete key.downcase
        return val
      end
      @header[key.downcase] = [val]
    end 
```

这里是它写入标题 ( [`Net::HTTPGenericRequest#write_header`](http://apidock.com/ruby/Net/HTTPGenericRequest/write_header)) 的地方：

```
# File lib/net/http.rb, line 2071
    def write_header(sock, ver, path)
      buf = "#{@method} #{path} HTTP/#{ver}\r\n"
      each_capitalized do |k,v|
        buf << "#{k}: #{v}\r\n"
      end
      buf << "\r\n"
      sock.write buf
    end 
```

这些可能是您需要覆盖的唯一方法，但我不是 100% 确定。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-02-08T18:54:37.270

基于先前的答案，这将适用于 ruby​​ 2.3：

```
class CaseSensitiveString < String
  def downcase
    self
  end

  def capitalize
    self
  end

  def to_s
    self
  end
end 
```

`to_s`需要添加该方法，因为从 2.3 开始，每个标头都会调用`HTTP::Header`'s方法。[`capitalize`](https://github.com/ruby/ruby/blob/trunk/lib/net/http/header.rb#L187)`to_s`

# javascript - onclick= 更改表单中同一个类的所有输入文本字段背景颜色

> ID：10258897
> 
> 赞同：1
> 
> 时间：2012-04-21T12:27:35.977
> 
> 标签：javascript, css, internet-explorer-7, forms, getelementsbyclassname

让它在 IE7 中工作。尝试通过类更改表单中输入文本字段的背景颜色。我了解 IE7 不支持 getelementsbyClassName 所以必须创建函数。我已经尝试了许多 getelementsbyClassName 函数的例子，但没有一个对我有用。希望有人可以为我提供解决方案。

```
function changecolor() {
    //i don't know what to put here
}

<input type="text" class="items">
<input type="text" class="items">
<input type="text" class="items">
<div onclick="changecolor()">Change Color</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T12:33:26.570

这在 IE7 中起到了作用：

```
function changecolor(c){
  var a,n;
  a=getElementsByTagName('INPUT'); // or a=document.all for all elements in items-class;
  for(n=0;n<a.length;a++){
   if(a[n].className=='items'){
     a[n].style.backgroundColor=c;
   }
   return;
} 
```

您也可以在 中编辑规则`class`，但不能保证在重排页面之前真正更改颜色。

```
function changeColor(c){
    var sSheet,n;
    sSheet=document.styleSheets[0].rules;
    for(n=0;n<sSheet.length;n++){
        if(sSheet[n].selectorText=='.items') sSheet[n].style.backgroundColor=c;
    }
    return;
} 
```

您可以使用 的`id`代替`styleSheet`中的索引`styleSheets[0]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T12:38:57.200

既然你想使用现代功能但又需要支持古老的浏览器，那么最好的解决方案是使用[jQuery](http://jquery.com/)之类的库。

使用 jQuery，您想要做的事情非常简单：

```
<input type="text" class="items">
<input type="text" class="items">
<input type="text" class="items">
<div id="changeColor">Change Color</div>

<script>
$('#changeColor').on('click', function() {
     $('input.items').css('backgroundColor', '#0ff');
});
</script> 
```

这是一个演示：http: [//jsfiddle.net/ThiefMaster/kSwv8/](http://jsfiddle.net/ThiefMaster/kSwv8/)

# jdbc - 连接 Access 数据库时出现 JDBC SQL 错误

> ID：10258898
> 
> 赞同：0
> 
> 时间：2012-04-21T12:27:40.113
> 
> 标签：jdbc

我试图使用 jdbc 和 swings 连接到访问数据库。但是，我在 ODBC 数据源控制面板中找不到任何 MS Access 数据库驱动程序 (*.mdb)。唯一可用的是 SQL Server。在读了一点之后，我猜它的发生是因为我的操作系统是 64 位的，而我的 MS Access 是 32 位的。

然后，我去了 Windows/sysWOW64/odbcad32.exe

在那里，我可以找到 Microsoft Access 数据库驱动程序。我使用名称“avi”与数据库建立了适当的连接并再次运行它。

我收到了这个错误

```
java.sql.SQLException: [Microsoft][ODBC Driver Manager] The specified DSN contains an architecture mismatch between the Driver and Application
    at sun.jdbc.odbc.JdbcOdbc.createSQLException(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbc.standardError(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbc.SQLDriverConnect(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbcConnection.initialize(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbcDriver.connect(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at Conn.updt(Conn.java:25) 
```

Conn.java 第 24 和 25 行：

```
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
Connection con = DriverManager.getConnection("jdbc:odbc:avi"); 
```

我仍然认为它是一个 32-64 位的问题，但有什么好转的吗？不需要很多专业知识的东西，因为我对此不太熟悉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T13:02:48.093

--来自 MSDN --

要管理连接到 64 位平台下的 32 位驱动程序的数据源，请使用 c:\windows\sysWOW64\odbcad32.exe。要管理连接到 64 位驱动程序的数据源，请使用 c:\windows\system32\odbcad32.exe。

如果您使用 64 位 odbcad32.exe 配置或删除连接到 32 位驱动程序的 DSN，您将收到此消息。

# .net - 光标处的小消息框

> ID：10258899
> 
> 赞同：1
> 
> 时间：2012-04-21T12:27:40.737
> 
> 标签：.net, vb.net, cursor, message

我正在寻找出现在光标处的某种消息框。本质上，当我滚动标签时，我希望显示有关该标签的一些信息。一旦光标离开标签，该框就会消失。我似乎无法让谷歌理解我，所以我希望你们能帮助我。

就像当您将鼠标悬停在链接上时，一旦您移动鼠标，这个白框就会出现并消失。这叫什么？

很抱歉这个非常简单的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T12:31:35.280

您可能正在寻找[工具提示](https://web.archive.org/web/20140205185309/http://msdn.microsoft.com:80/en-us/library/windows/desktop/aa511495.aspx)：

> 工具提示是一个小的弹出窗口，用于标记所指向的未标记控件，例如未标记的工具栏控件或命令按钮。
> 
> [![](../Images/709c943c169b44f8880168eab4df5ecc.png)](https://i.stack.imgur.com/tHP84.png)
> [（来源：[microsoft.com](http://i.msdn.microsoft.com/dynimg/IC76059.png)）]

但是，它们通常用于*未标记*的控件。标签通常用于*描述*另一个控件，因此不需要工具提示。事实上，System.Windows.Forms.Label 甚至都不提供。

# android - 如何赋予 Android 3.2 与 Android 2.2 应用程序相同的外观？

> ID：10258902
> 
> 赞同：1
> 
> 时间：2012-04-21T12:27:56.173
> 
> 标签：android, android-2.2-froyo, android-3.2-honeycomb

我已经开发了一个针对 Android 2.2 的 Android 应用程序现在我想让它与 Android 3.2 兼容我面临这两个应用程序之间的以下界面差异

1.  编辑文本背景
2.  标签主机大小；我给了 fill_parent ，它在所有设备上的 Android 2.2 中都能完美运行，但在 Android 3.2 中，它的大小几乎缩小到屏幕的一半。
3.  按钮的背景颜色不同
4.  Android 3.2 中的字体大小小于 Android 2.2 应用程序。

等等……等等

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:29:50.213

对于 Android 3.2 使用`<resource>-sw600dp`eg`drawable-sw600dp`和`values-sw600dp`结合

`res/layout/main_activity.xml` # 对于手机（小于 600dp 可用宽度）

`res/layout-sw600dp/main_activity.xml` # 适用于 7 英寸平板电脑（600dp 宽和更大）

`res/layout-sw720dp/main_activity.xml` # 适用于 10 英寸平板电脑（720dp 宽和更大）

这是参考： [支持多个屏幕](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T12:31:14.957

您可以为不同的版本使用不同的资源文件夹：

例如

```
values <-- default
values-v11 for Honeycomb and bigger 
```

或者

```
layout
layout-v11 
```

等等...

在这些文件夹中，您可以声明不同的样式、尺寸、值、布局等

# sql - Sybase 到 SQL Server 2008 的迁移

> ID：10258904
> 
> 赞同：0
> 
> 时间：2012-04-21T12:28:03.993
> 
> 标签：sql, sql-server-2008, sybase

我有 sybase 数据库，其中包含名为 (GOVS) 的表，其中有一列名为 (GOV_NAME 数据类型 varchar (50)) 的阿拉伯数据，当我将其迁移到 SQL Server 2008 时，我在该列中得到不可读的数据

请提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-16T11:09:10.853

请在 sql server 2008 中尝试`nvarchar`此列。即支持特殊字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T12:49:56.867

将 GOV_NAME 列排序规则设置为 Arabic_CI_AS。请参阅[MSDN](http://msdn.microsoft.com/en-us/library/ms190920.aspx)。

# java - Netbeans 自定义运行外壳

> ID：10258905
> 
> 赞同：1
> 
> 时间：2012-04-21T12:28:05.560
> 
> 标签：java, netbeans

是否可以运行自定义 shell 脚本而不是在 Netbeans 中运行应用程序？

在运行应用程序之前，我需要运行一些服务并进行一些清理。

# android - 在哪里存储 FileInputStream 中使用的文件

> ID：10258907
> 
> 赞同：0
> 
> 时间：2012-04-21T12:28:10.487
> 
> 标签：android, android-file

如果我想在我的 android 应用程序中使用 FileInputStream 读取具有文件名的文件，我应该将文件保存在哪里。我可以将它保存在 res/raw 中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T12:29:27.267

您不能在运行时将其保存在 res/raw 中，您可以将其保存在 sdcard 或缓存目录中。

为了将文件保存到 SD 卡，您必须具有写入卡的权限。您需要将以下内容添加到您的 AndroidManifest.xml：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

接下来，您打开一个文件流，写入它，然后在代码中任何您想这样做的地方关闭它：

```
String filename = "filename.txt";
File file = new File(Environment.getExternalStorageDirectory(), filename);
FileOutputStream fos;
byte[] data = new String("data to write to file").getBytes();
try {
    fos = new FileOutputStream(file);
    fos.write(data);
    fos.flush();
    fos.close();
} catch (FileNotFoundException e) {
    // handle exception
} catch (IOException e) {
    // handle exception
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T13:32:23.200

如果你想将文件包含在你的 .apk 中并在运行时读取它，你应该把它放在`assets/`你项目的文件夹中，你可以使用：

```
InputStream istream = context.getAssets().open(FILE_NAME); 
```

到达它。但是，如果您正在寻找从 /sdcard 读取文件的方法，请参阅其他答案。

# malloc - 从 Instruments 中识别 malloc 的对象

> ID：10258908
> 
> 赞同：1
> 
> 时间：2012-04-21T12:28:30.413
> 
> 标签：malloc, instruments

我在 Xcode 4/Instruments 中运行分配工具，并且想识别特定 malloc 对象的类。我知道负责的调用者，但不知道分配了哪个特定对象——我只有一个地址、一个“malloc 712KB”类别，以及负责库和调用者的详细信息。任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:55:03.973

打开扩展详细视图会显示内存分配的调用堆栈。查看调用堆栈有助于确定您在代码中分配内存的位置，这将帮助您确定分配的对象的类。

选择“视图”>“扩展的详细视图”以显示扩展的详细视图或单击工具栏中“视图”组中的右键。

# mysql - 这个 SQL 重复行是怎么发生的？

> ID：10258911
> 
> 赞同：0
> 
> 时间：2012-04-21T12:28:37.470
> 
> 标签：mysql, sql, duplicates

我有一个Flash游戏；一个用户有很多物品；每个项目都是数据库表中的一行，其中包含列：

```
id - user_id - item_type_id - quantity 
```

每次用户获得一个项目时，我都会在数据库上执行选择以检查用户是否已经拥有该项目类型的行。如果不存在，则插入，否则增加数量并提交；一切总是在一个事务中。

有时，当游戏流量大时，会出现重复的项目行。现在，我执行选择以检查重复行以合并数量并删除重复行。

*   这个问题是怎么发生的？
*   我怎样才能防止问题发生？

我正在使用 MySQL。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T12:38:31.350

您需要确保列对`user_id`和`item_type_id`. 否则，系统可能允许重复条目，正如您发现的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T13:03:55.177

为了避免在需要更新时尝试插入时出错，您可以使用 ON DUPLICATE 子句。请参阅[此](https://stackoverflow.com/questions/5296946/sql-query-update-if-exists-insert-otherwise)链接以了解如何使用它。

# ruby - Ruby 和写入 CSV - 如何避免最后出现空行？

> ID：10258913
> 
> 赞同：5
> 
> 时间：2012-04-21T12:28:42.187
> 
> 标签：ruby, csv

我正在从 Ruby 生成一个 CSV 文件，并且接收数据的系统无法接受底部的空行。

但是，在我添加了所有行（以 CRLF 结尾）之后，最后一行仍然有 CFLF，所以接收系统认为有一个空白的 lasy 行。

我通过执行此（hackish）代码来打开和截断文件来解决它：

```
 size = File.size(filename)
  File.truncate(filename, size-3) 
```

如果它是最后一行，我是否缺少 ruby​​ CSV 中的某些功能以不添加 CRLF？

我编写 CSV 的代码是：

```
 csv = CSV.open(filename, "w", {:row_sep => "\r\n"})
  .. code to create an array of cols ..
  csv << cols 
```

我尝试将其转换为使用字符串，而不是文件。但我没有成功。使用 << 运算符时，我不断收到错误消息。

**更新：原来我有错误的问题......**

已经有一段时间了，但我终于弄清楚发生了什么。我上传的主机系统也可以处理文件末尾的换行符 - Ruby CSV 输入了错误的换行符：\r\r\n instread of \r\n! 如果我写为文本文件，它会这样做。如果我写成二进制文件，问题就解决了。

如果其他人看到同样的问题，这是我的 Ruby：

```
csv = CSV.open(filename, "w", {:row_sep => "\r\n"}) # actually writes \r\r\n 
```

二进制模式修复它：

```
csv = CSV.open(filename, "wb", {:row_sep => "\r\n"}) # correctly writes \r\n 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T14:29:31.927

如果您在写入之前将 CSV 作为字符串获取，则可以使用它[`String#chomp`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-chomp)来删除尾随换行符。

如果您正在使用以下方式写入文件：

```
File.open('my.csv','w'){ |f| f.puts my_csv } 
```

…然后您自己添加换行符，并且可以通过以下方式避免它：

```
File.open('my.csv','w'){ |f| f.write my_csv } 
```

如果您提供用于生成和编写 CSV 的实际代码，我们可以进一步、更准确地为您提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T14:07:20.563

您可以只使用`sub!`删除文件末尾的任何换行符：

```
# my_csv_contents contains all of the CSV data
my_csv_contents.sub!(/(\r?\n)*\z/, "") 
```

# objective-c - 在iOS中触摸时如何从UITextView中消失键盘？

> ID：10258914
> 
> 赞同：0
> 
> 时间：2012-04-21T12:28:57.077
> 
> 标签：objective-c, ios

当我在 iOS 中触摸 UITextView 时，我不想出现任何键盘。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T12:32:43.833

您可以使 UITextView 不可编辑。

```
UITextView* tv = [[UITextView alloc] init];
[tv setEditable:NO]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T14:26:11.570

您可以继承 UITextView 并覆盖“-(BOOL)canBecomeFirstResponder”，返回 NO。

# string - 当代表前缀附加到非字符串指令时会发生什么？

> ID：10258918
> 
> 赞同：7
> 
> 时间：2012-04-21T12:29:23.863
> 
> 标签：string, assembly, x86, undefined-behavior

我试图找出普通循环、`loop`循环和内置`rep`循环之间的速度差异。我写了三个程序来比较行为：

### 程序 1

```
_start: xor %ecx,%ecx
0:      not %ecx
        dec %ecx
        jnz 0b
        mov $1,%eax
        xor %ebx,%ebx
        int $0x80       # syscall 1: exit 
```

### 节目二

```
_start: xor %ecx,%ecx
        not %ecx
        loop .
        mov $1,%eax
        xor %ebx,%ebx
        int $0x80 
```

### 方案 3

```
_start: xor %ecx,%ecx
        not %ecx
        rep nop # Do nothing but decrement ecx
        mov $1,%eax
        xor %ebx,%ebx
        int $0x80 
```

事实证明，第三个程序没有按预期工作，一些研究人员告诉我，这`rep nop`又`pause`做了一些完全不相关的事情。

*当`rep`,`repz`和`repnz`前缀后面的指令不是字符串指令时，它们在做什么？*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-21T14:22:14.130

这取决于。`rep ret`有时用于避免`ret`在某些 AMD 处理器上直接跳转到 a 的不良性能。( `rep`F3) 和`repne`(F2) 前缀也用作许多 SSE 指令的强制前缀（例如，它们将打包单变体更改为标量单或标量双变体）。`pause`（自旋锁提示）是`rep nop`. 其他一些新指令也使用“假代表前缀”（`popcnt`, `crc32`,`vmxon`等）。“假”或强制前缀出现在可选的 REX 前缀之前，因此不能说它是操作码的一部分，它确实是一个前缀。

如果以 . 为前缀，其他操作会生成 #UD `rep`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-21T14:38:50.263

我只是在这里引用[手册](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)，因为我猜它指定了唯一的“官方”行为。

来自第 4.2 节“REP/REPE/REPZ/REPNE/REPNZ - 重复字符串操作前缀”：

> REP前缀可以添加到INS、OUTS、MOVS、LODS和STOS指令，REPE、REPNE、REPZ和REPNZ前缀可以添加到CMPS和SCAS指令。（REPZ 和 REPNZ 前缀分别是 REPE 和 REPNE 前缀的同义形式。） **当与非字符串指令一起使用时，REP 前缀的行为是未定义的。**

# ios - JSON 和 iOS 以及字符串数据

> ID：10258924
> 
> 赞同：0
> 
> 时间：2012-04-21T12:29:54.380
> 
> 标签：ios, xcode

我尝试在 JSON UITableViewDataSource 中显示数据时遇到问题来自 JSON 的数据是：

```
[
 "Jon",
 "Bill",
 "Kristan"
] 
```

JSON 本身已经通过了验证器。我遇到的错误是 TableViews [2050: f803] Illegal start of token [h]

这是我的代码

```
NSString *myRawJson = [NSString stringWithFormat:@"http://site.com/json.php"];

if ([myRawJson length] == 0){
    return; 
}
NSError *error = nil;
SBJsonParser *parser = [[SBJsonParser alloc] init];
tableData =[[parser objectWithString:myRawJson error:&error] copy];
NSLog(@"%@", [error localizedDescription]);

list  = [[NSArray alloc] initWithObjects:@"Johan", @"Polo", @"Randi", @"Tomy", nil];

[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T12:46:12.440

您不会从 URL 中获取 JSON 数据。相反，您尝试解析 URL 本身。

# java - 从一个框架转到另一个类中的另一个框架

> ID：10258926
> 
> 赞同：-1
> 
> 时间：2012-04-21T12:29:59.490
> 
> 标签：java, class, frame

我有一个类，我希望它加载位于另一个类中的框架（由 NetBeans 的设计器创建）。我应该怎么做？

```
public class Champs1 extends javax.swing.JFrame {

/**
 * Creates new form Champs1
 */
public Champs1() {
    initComponents();
}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    setTitle("COMBAT SIMULATOR");
    setMaximumSize(new java.awt.Dimension(640, 480));
    setMinimumSize(new java.awt.Dimension(640, 480));
    setResizable(false);

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 640, Short.MAX_VALUE)
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 480, Short.MAX_VALUE)
    );

    pack();
}// </editor-fold>

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /*
     * Set the Nimbus look and feel
     */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /*
     * If Nimbus (introduced in Java SE 6) is not available, stay with the
     * default look and feel. For details see
     * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(Champs1.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(Champs1.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(Champs1.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(Champs1.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /*
     * Create and display the form
     */
    java.awt.EventQueue.invokeLater(new Runnable() {

        public void run() {
            new Champs1().setVisible(true);
        }
    });
}
// Variables declaration - do not modify
// End of variables declaration 
```

}

这就是我在包含我要加载的框架的类上得到的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T13:30:22.140

您可能希望在执行某些操作时调用另一个类（例如，当您单击按钮时）。因此，制作一些按钮或任何其他组件，然后实现`ActionListener`的`actionPerformed()`方法，您可以在其中指定类的对象并从中调用方法。

**编辑：**

供你参考：

```
JButton test_button=new JButton(new AbstractAction("Test") {
            @Override
            public void actionPerformed(ActionEvent e) {
                Test test=new Test();            // Make Object of class which you want to call
                test.showMessage();              //Any method that you might want to call
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T13:06:20.743

我不确定我是否理解正确，但我会尝试：

首先请注意，Java 中的框架是一个完整的窗口，而不仅仅是它的内容。所以加载另一个框架可能意味着打开一个新窗口。您可以像这样在 Java 中执行此操作：

```
new NameOfOtherFrameClass().setVisible(true); 
```

我认为如果您阅读一些教程并尝试“手动”编写一些简单的代码（即没有 NetBeans 设计器），事情会变得更清楚。

为了获得更好的答案，您应该更好地解释“加载”框架的含义或您想要做什么以及您的 Java 技能是什么。

# media-player - 如何在 iphone sdk 的 Touch down 事件中设置增加声音的速率并重复此声音

> ID：10258928
> 
> 赞同：0
> 
> 时间：2012-04-21T12:30:13.757
> 
> 标签：media-player, avaudioplayer, ios5

我正在使用 9 按钮，每个按钮都有一个标签。当我在 Touch Up Inside 方法上单点触摸 mp3 文件时。当我触摸按住增加 mp3 文件的声音速率。主要问题 - 当我释放按钮时它也在播放声音。我想要这个--当我按住它时，声音文件应该重复自己，直到我释放 Touch Down 方法上的按钮。任何人都可以解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T05:28:48.447

AVAudioPlayer setRate 可以帮助您更改费率

# php - curl 错误返回值

> ID：10258930
> 
> 赞同：1
> 
> 时间：2012-04-21T12:30:28.530
> 
> 标签：php, curl

我正在使用 cURL 从服务器检索文件，我想知道当 curl_exec() 失败时有没有办法指定返回值。我的代码是这样的：

```
if (!$result = curl_exec($curl)){
    echo "something is wrong.";
    exit;
}
/**
 *the rest of the script
 */ 
```

当 exec() 调用失败时，页面上不会打印 echo 语句，显然 exit() 也没有被调用，导致我的以下脚本正常执行。我注意到当 curl_exec() 失败时，它不会给你 FALSE，它只是给你一个类似“NOT FOUND”页面的东西，我想这就是我的问题所在。有什么方法可以强制它返回布尔值或字符串，以便我可以进行条件测试？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T12:33:27.267

`curl_exec``false`仅当 HTTP 请求从技术角度未成功完成时才会返回。如果请求本身*完成*但结果不是您所期望的（例如服务器以 404 响应），它将*正确*返回`true`结果（取决于`CURLOPT_RETURNTRANSFER`是否设置）。

因此，您必须单独检查这种可能性。例如：

```
if (!$result = curl_exec($curl)){
    echo "request totally failed.";
    exit;
}

$code = curl_getinfo($curl, CURLINFO_HTTP_CODE);
if ($code >= 400) {
    echo "the server responded with an error code.";
    exit;
} 
```

有关详细信息，请参阅[HTTP 状态代码列表](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T12:32:13.930

尝试：

```
$result = curl_exec($curl);
if (!$result){
    echo "something is wrong.";
    exit;
} 
```

`curl_exec()`只有当返回 false时才会满足上述条件。`curl_exec()`当它无法访问您提供的目标链接时返回 false。即使 like 返回 404 错误，`curl_exec()`也不会返回 false，因为它访问链接没有问题。

# php - 通过表单发布多个值，以对输入执行 PHP/MySQL 查询

> ID：10258934
> 
> 赞同：0
> 
> 时间：2012-04-21T12:30:47.757
> 
> 标签：php, mysql, forms, post, echo

对这个问题有点困惑......

我的网站有一个管理部分，管理员可以在其中搜索乘客（按 ID 号），搜索会将所有相关数据返回给该乘客。仅使用 ONE 参数时，这些搜索似乎很好。

现在，当从这个表格发布信息时......

```
 <form action="search2.php" method="post"> 
<table> 
<tr><td>Aircraft ID:</td><td><input type="text" name="addAircraftID" /></td></tr> 
<tr><td>Aircraft Type</td><td><input type="text" name="addAirType" /></td></tr> 
<tr><td colspan="2" align="center"><input type="submit" /></td></tr> 
</table> 
 <input type="hidden" name="addaircraft" value="formsub5"/>
</form> 
```

它可以很好地发布数据，就像在我的 results.php 文件中一样，我可以使用这个示例（将飞机添加到机队）。

```
// Add an aircraft
 $addAircraftID = $_POST['addAircraftID'];
$addType = $_POST['addAirType'];

echo $addAircraftID . $addType; 
```

在以前的表单中发布的值正确回显。但是，在下面的代码中，这个 IF 似乎永远不会被触发。当我在表单中提交了多个值时，我需要做些什么不同的事情吗？

```
 if (isset($_POST['addaircraft']) && $_POST['addaircraft']=='formSub5') {

echo "Aircraft Added Successfully! Taking you back to your control panel!";
echo '<meta http-equiv="refresh" content="30;url=http://www.seatselector.net/admin.php">';

 } 
```

我在网上查了，可惜没能找到太多帮助，希望各位大神帮忙！

非常感谢，

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T12:39:21.133

```
<input type="hidden" name="addaircraft" value="formsub5"/> 
```

值为“formsub5”，而`$_POST[]`检查“formSub5”。

区分大小写的字符串。

# php - 在谷歌地图中使用 getTile() 函数的正确方法

> ID：10258939
> 
> 赞同：0
> 
> 时间：2012-04-21T12:32:02.440
> 
> 标签：php, javascript, jquery, ajax, google-maps

我正在使用磁贴 id 在数据库中存储标记。

因此，当某个图块显示在地图上时，该图块包含的所有标记都是

也要求并显示。

所以我终于创建了一个无法正常工作的代码。它没有要求所有需要的

瓷砖。更准确地说，每次我移动地图时它只要求一个图块。

```
 ServerFetchMapType.prototype.tileSize = new google.maps.Size(256,256);

     ServerFetchMapType.prototype.maxZoom = 100;

     ServerFetchMapType.prototype.name = "Server Tile #s";

     ServerFetchMapType.prototype.alt  = "Server Data Tile Map Type";

ServerFetchMapType.prototype.getTile = function(coord, zoom, ownerDocument){

  if(zoom>10){

  var tileId=this.getAddrLatLng(coord,zoom);

  if(isTileAlreadyLoaded(tileId)){
    return ;
  }

  ServerFetchedTiles[tileId] = true;

  var url = "markerRequestPageJson.php?tileNumber=";
  var json;
   $.getJSON(url+tileId,function(json){
    // this is where we can loop through the results in the json object
        var _item;
        var infoWindow = new google.maps.InfoWindow;

        $.each(json, function(i,_item){
            var point = new google.maps.LatLng(
              parseFloat(_item.lat),
              parseFloat(_item.lng));
            var html = _item.id + "<br/>";
            var marker = new google.maps.Marker({
            map: map,
            position: point
          });

          markerClusterer.addMarker(marker);
          bindInfoWindow(marker, map, infoWindow, html);
        });
});

 }
 return;

}; 
```

但最后我做了一些改变，它应该可以工作：

```
 ServerFetchMapType.prototype.tileSize = new google.maps.Size(256,256);

     ServerFetchMapType.prototype.maxZoom = 100;

     ServerFetchMapType.prototype.name = "Server Tile #s";

     ServerFetchMapType.prototype.alt  = "Server Data Tile Map Type";

ServerFetchMapType.prototype.getTile = function(coord, zoom, ownerDocument){

  if(zoom>10){

  var tileId=this.getAddrLatLng(coord,zoom);

  if(isTileAlreadyLoaded(tileId)){
    return ;
  }

  ServerFetchedTiles[tileId] = true;

  var div = ownerDocument.createElement('DIV');

  var url = "markerRequestPageJson.php?tileNumber=";
  var json;
   $.getJSON(url+tileId,function(json){
    // this is where we can loop through the results in the json object
        var _item;
        var infoWindow = new google.maps.InfoWindow;

        $.each(json, function(i,_item){
            var point = new google.maps.LatLng(
              parseFloat(_item.lat),
              parseFloat(_item.lng));
            var html = _item.id + "<br/>";
            var marker = new google.maps.Marker({
            map: map,
            position: point
          });

          markerClusterer.addMarker(marker);
          bindInfoWindow(marker, map, infoWindow, html);
        });
});
  return div;
 }
 return;

}; 
```

我的问题：这是一个适当的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T14:12:26.917

我不确定您要在这里做什么；但是为什么你必须费心点击正在加载的磁贴呢？

您可以只给出 Marker{ position: the_position, ... } 并且 Maps API 应该负责显示它，不是吗？

# javascript - 如何将字符串添加到变量中；

> ID：10258941
> 
> 赞同：0
> 
> 时间：2012-04-21T12:32:10.310
> 
> 标签：javascript, string, variables, increment

我有这个js....

```
$("#form").submit(function(){  
var answerlist = "first";  
var answerlist = answerlist + "," + $("#get_answer").attr("value");  
alert(answerlist);  
}); 
```

我正在尝试将带有 id 的输入字段的值添加`#get_answer`到`answelist`变量中......

我希望`answerlist`现在是= `first move`//输入字段的值在哪里`move` ，是的，结果是成功的......

现在我第二次尝试向`answerlist`变量添加另一个值....

价值是`on`
我希望结果是`first move on`

但是当我使用它检查时`alert()`它返回`first on`

有人可以帮我吗？

我想要的是将值（字符串）增加到变量`answerlist`

喜欢

```
answerlist = "first";
answerlist = "first move";
answerlist = "first move on"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T13:04:17.970

```
(function () {
    // to isolate it from rest of the code 

    var handler = function (target) {
        var list = 'first';
        return function () {
            list = list + target.value;
            alert(list);
        };
    },
    action = handler(document.getElementById('get_answer'));

    $(document.getElementById('form')).submit( action );

}()); 
```

这种结构称为“闭包”，它是 JavaScript 语言中最重要的特性之一，您应该学习如何使用它。[这个讲座](http://www.youtube.com/watch?v=ya4UHuXNygM)可能会有所帮助。

请停止使用`$.attr()`琐碎的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T12:41:59.493

使用您在此处的代码段，您永远不会超过“首先，移动”，因为您每次都在第 2 行设置应答列表，并且它仅在提交表单时生成。因此，除非您输入的值是“继续”，否则它永远不会显示预期的结果。

如果需要，您可以将 answerlist 变量放在函数范围之外，并在输入更改时添加值...

```
var answerlist = "first";  
$("#form #get_answer").change(function(){  
    answerlist = answerlist + "," + $("#get_answer").val();  
});
$("#form").submit(function(){  
    alert(answerlist);  
}); 
```

但是，请注意，您将无法从此列表中删除任何内容。相反，如果您需要有删除项目的潜力，您可能希望使用数组并推送/弹出值。[JavaScript 数组引用](http://www.w3schools.com/jsref/jsref_obj_array.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T12:34:17.363

这应该这样做

```
$("#form").submit(function(){  
   var answerlist = "first";  
   var answerlist = answerlist + "," + $("#get_answer").val();  
   alert(answerlist);  
}); 
```

**编辑：**

**[演示](http://jsfiddle.net/dhirajbodicherla/jsPDx/3/)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T12:38:09.957

您正在函数内部初始化变量的值，所以很自然，当再次调用它时，该值将返回到*first*

在函数外初始化它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-21T12:34:42.380

尝试这个...

```
var answerlist = answerlist + "," + $("#get_answer").val(); 
```

# cocoa - 如何在 NSTableView 中禁用排序

> ID：10258946
> 
> 赞同：0
> 
> 时间：2012-04-21T12:33:02.160
> 
> 标签：cocoa, nstableview

我正在使用由 NSArrayController 控制的 NSTableView 并启用了启用了**创建排序描述符的值绑定****排列**对象。

 **最初显示视图时，它是“未排序的”（实际上显示的顺序与已排序的 NSArray 相同）。

如果我单击列标题，我可以更改排序顺序或排序列，这很方便。

我想做的是能够恢复到“未排序”的顺序并禁用列标题突出显示和排序指示器。

这可能吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-21T13:02:20.153

您想以编程方式执行此操作吗？您可能可以将数组控制器的排序描述符设置为`nil`空数组或空数组。使用 的`-setSortDescriptors:`方法`NSArrayController`。我不记得是否有必要再打电话`-rearrangeObjects`。可能不是。**

# android - 如何在 Android 的状态栏通知中显示正确的当前时间？

> ID：10258947
> 
> 赞同：1
> 
> 时间：2012-04-21T12:33:06.957
> 
> 标签：android, notifications

我在我的应用程序中使用状态栏通知并在单击按钮时发送它。但是当通知到达时，打开它显示错误的日期（在我的情况下它显示 1/1/1970）。

![通知](../Images/350b1606761f7f55922dceda6419f381.png)

我正在使用以下代码显示状态栏通知。

```
@Override
    public void onClick(View v)
    {
        // TODO Auto-generated method stub
        NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(R.drawable.ic_launcher, "Notify", 1000);

        Context context = getApplicationContext();
        Intent intent = new Intent(this, NotificationActivity.class);
        PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, 0);
        notification.setLatestEventInfo(context, "TITLE", "MESSAGE", pendingIntent);

        notificationManager.notify(R.id.button1, notification);

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T12:37:57.157

取自我的博客文章：http:
[//blog.blundellapps.com/notification-for-a-user-chosen-time/](http://blog.blundellapps.com/notification-for-a-user-chosen-time/)

您应该像这样创建通知：

```
// This is the icon to use on the notification
int icon = R.drawable.ic_dialog_alert;
// This is the scrolling text of the notification
CharSequence text = "Your notification time is upon us".
// What time to show on the notification
long time = System.currentTimeMillis();

Notification notification = new Notification(icon, text, time); 
```

# django - Django - 使用中间表注释多对多字段

> ID：10258960
> 
> 赞同：5
> 
> 时间：2012-04-21T12:34:50.680
> 
> 标签：django, django-models

我正在为一个 Django 项目构建一个小型搜索系统（是的，我知道，已经有很多产品在这样做，但我想尝试一下，只是为了好玩）。我基本上有以下型号：

```
class Word(models.Model):
    """ A searchable word.
    We only store the slugified value
    """
    slug = models.SlugField(unique = True)

class Searchable(models.Model):
    """ Superclass for Searchable objects.
    """
    words = models.ManyToManyField(
        Word,
        through='WordCount')

class WordCount(models.Model):
   """ Occurences of a word in a Searchable object.
    """
    word = models.ForeignKey(Word)
    item = models.ForeignKey(Searchable)
    count = models.IntegerField() 
```

因此，例如，我创建了一个带有文本“Hello StackOverflow，我有一个 Django 问题”的对象 Page（子类化 Searchable）。系统将为该句子中的每个单词创建一个 Word 实例，并为每个单词创建一个 WordCount 实例，说明每个单词在文本中出现一次。

进行查询以获取包含一个更多单词的所有 Searchable 实例可以正常工作（searchable_text 提取单词并从中创建一个列表）：

```
def search(query)
    tokens = searchable_text(query)
    words = Word.objects.filter(
                        reduce(operator.or_,
                               [models.Q(slug__contains = t)
                                for t in tokens]))

    return Searchable.objects.filter(words__in = words) 
```

现在我想做的是使用中间关系对结果进行排序。我想保留一个 QuerySet 所以下面的代码将不起作用，但给出了我想要做什么的想法（使用丑陋的补丁来制作注释）：

```
def search(query)
    tokens = searchable_text(query)
    words = Word.objects.filter(
                        reduce(operator.or_,
                               [models.Q(slug__contains = t)
                                for t in tokens]))
    results = []
    for obj in Searchable.objects.filter(words__in = words):
        matching_words = obj.wordcount_set.filter(word__in = words)
        obj.weight = sum([w.count for w in matching_words])
        results.append(obj)

    return sorted(results,
                  reverse = True,
                  key = lambda x: x.weight) 
```

所以基本上： - 我得到查询中包含的所有 Word 对象（或部分匹配，如果我搜索“Stack”，将考虑单词“StackOverflow”） - 我得到所有与其中任何一个有关系的对象单词-对于每个对象，我选择与先前计算的单词列表中的单词相关的所有相关 WordCount 对象，然后对“计数”属性求和并将其存储为注释“权重”-我对对象进行排序关于“重量”

我不知道 QuerySet 是否可行，但我想在之后保留一些额外操作的格式（例如过滤掉一些结果）。

我知道有很多改进可能，但这将是一个好的开始。

谢谢你的回答，文森特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T13:28:49.100

尝试

```
Searchable.objects.filter(words__in=words).annotate(
    weight=models.Sum('wordcount__count')).order_by('-weight') 
```

# javascript - 从循环和字符串创建 JSON 对象

> ID：10258961
> 
> 赞同：0
> 
> 时间：2012-04-21T12:34:54.563
> 
> 标签：javascript, json

我想创建一个具有以下结构的 JSON 对象……我意识到 JSON 对象不应该有注释，但在这个例子中我只想解释所需的结构

```
selObj = {

    category: selectedCategory, // 1 category only

    catOptions:{
        optionValue:discountValue, // we can 1 or have many of paired keys in this sub object
        optionValue:discountValue,
        optionValue:discountValue
    },

    tariff:{
        tariffValue:discountValue, // we can 1 or have many of paired keys in this sub object
        tariffValue:discountValue
    },

    tarOptions:{
        tarOption:discountValue // we can 1 or have many of paired keys in this sub object

    }

}; 
```

现在我有一个函数可以填充我在脚本开头声明的空对象，如下所示……</p>

```
$(document).ready(function() {
        var selObj = {}; 
        populateMyEmptyObject(selObj)

});

populateMyEmptyObject(emptyObject){

        emptyObject.category = "Category"

        // in my original function I have loops that produce strings with the following structure {"value1":"10","value2":"20","value3":"30","value4":"40"}, for this example I’ll call them loopReturn1,  loopReturn2, loopReturn3, loopReturn4

        // loops have happened and vars are produced... I've removed my loops as they're working just fine, I've omitted that code for simplicity

        emptyObject.catOptions = loopReturn1;
        emptyObject.tariff = loopReturn2;
        emptyObject.tarOptions = loopReturn3;
} 
```

现在有了这个，我经常遇到空格问题等错误。有人告诉我应该使用`JSON.stringify`，但我仍然遇到问题。现在忘记循环，我应该如何获取生成的字符串并将它们附加到我的对象，有人可以告诉我获取字符串并将它们转换/解析为我的原始对象 selObj 的最佳实践。我还需要在我的函数中返回我的 emptyObject 以更新 selObj（如`return emptyObject;`）

我是否应该更改我原来的空对象，以便它更好地代表我想要的结构，如下所示：

```
var selObj = {

    "category": "selectedCategory",

    "catOptions":{
                },

    "tariff":{
              },

    "tarOptions":{
     }

}; 
```

任何建议都将不胜感激，我认为很明显我是一名自学成才的开发人员，而且我有一些坏习惯和知识漏洞！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T13:02:49.970

[例子](http://jsfiddle.net/Zzjke/)

```
$(document).ready(function() {
    var o = getCategoryData(),
        sJSON = JSON.stringify(o);

    console.log(o, sJSON);
});

var getCategoryData = function(o) {

    // example functions start
    var getCategory = function() {
        return "Category";
    },
    getCatOptions = function() {
        return {value1: 10, value2: 20, value3: 30, value4: 40};
    },
    getTariff = function() {
        return {value1: 10, value2: 20, value3: 30, value4: 40};
    },
    getTarOptions = function() {
        return {value1: 10, value2: 20, value3: 30, value4: 40};
    };
    // example functions end

    if (!o) o = {};
    o.category = getCategory();
    o.catOptions = getCatOptions();
    o.tariff = getTariff();
    o.tarOptions = getTarOptions();
    return o;
}​ 
```

# android - 当焦点从 EditText 更改为 Button 时，ActionBarSherlock 操作栏消失

> ID：10258962
> 
> 赞同：2
> 
> 时间：2012-04-21T12:35:07.513
> 
> 标签：android, actionbarsherlock

我有一个简单的登录布局，其中包含两个 EditText 字段和一个登录按钮。问题是当软键盘打开时，ActionBar 消失了，我将焦点从 EditText 更改为 Button，当我按下返回时，ActionBar 又回来了。当软键盘关闭并且我使用 DPAD 浏览 EditTexts 和 Button 时，问题不会发生。

我使用ActionBarSherlock，问题只出现在Android 2.x 模拟器上，在4.x 模拟器上一切正常。我知道 ActionBarSherlock 在可用的 Android 版本上使用本机 ActionBar 实现，因此这可能是 ActionBarSherlock 代码的问题。

我还执行了一个测试来检查 的值`ActionBar.isShowing()`，但即使 ActionBar 在屏幕上不可见，它也会返回 true。

我不知道在这种情况下发生了什么，有人有什么想法吗？

**布局 XML**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:ignore="UselessParent" >

    <LinearLayout
        android:layout_width="250dp"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:orientation="vertical" >

        <EditText
            android:id="@+id/username"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="10dp"
            android:hint="@string/username"
            android:inputType="textNoSuggestions"
            android:nextFocusUp="@+id/loginButton"
            android:imeOptions="actionNext" />

        <EditText
            android:id="@+id/password"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="10dp"
            android:hint="@string/password"
            android:inputType="textPassword"
            android:imeOptions="actionDone" />

        <Button
            android:id="@+id/loginButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:text="@string/login"
            android:textSize="20sp"
            android:nextFocusDown="@+id/username" />

    </LinearLayout>

</RelativeLayout> 
```

**片段代码**

```
public class LoginFragment extends BaseFragment {

    @InjectView(R.id.loginButton) protected Button mLoginButton;
    @InjectView(R.id.username) protected EditText mUsernameEditText;
    @InjectView(R.id.password) protected EditText mPasswordEditText;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.login, container, false);
    }

    @Override
    public void onStart() {
        super.onStart();

        mLoginButton.setEnabled(allFieldsValid());
        mLoginButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                handleLogin();
            }
        });

        mPasswordEditText.setOnEditorActionListener(new TextView.OnEditorActionListener() {

            @Override
            public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
                if (actionId == EditorInfo.IME_ACTION_DONE && allFieldsValid()) {
                    handleLogin();
                }
                return false;
            }
        });

        TextWatcher fieldValidatorTextWatcher = new TextWatcher() {
            @Override
            public void afterTextChanged(Editable s) {
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count, int after) {
            }

            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                mLoginButton.setEnabled(allFieldsValid());
            }
        };

        mUsernameEditText.addTextChangedListener(fieldValidatorTextWatcher);
        mPasswordEditText.addTextChangedListener(fieldValidatorTextWatcher);
    }

    private void handleLogin() {
        getSherlockActivity().setSupportProgressBarIndeterminateVisibility(true);

        Intent intent = new Intent(getActivity(), LoginService.class);
        intent.putExtra(BaseIntentService.EXTRA_STATUS_RECEIVER, mResultReceiver);
        intent.putExtra(LoginService.PARAM_USERNAME, mUsernameEditText.getText().toString());
        intent.putExtra(LoginService.PARAM_PASSWORD, mPasswordEditText.getText().toString());
        getActivity().startService(intent);
    }

    private boolean allFieldsValid() {
        return usernameFieldIsValid() && passwordFieldIsValid();
    }

    private boolean usernameFieldIsValid() {
        return !TextUtils.isEmpty(mUsernameEditText.getText());
    }

    private boolean passwordFieldIsValid() {
        return !TextUtils.isEmpty(mPasswordEditText.getText());
    }

    @Override
    public void onReceiveResult(int resultCode, Bundle resultData) {
        getSherlockActivity().setSupportProgressBarIndeterminateVisibility(false);
        super.onReceiveResult(resultCode, resultData);
    }

    @Override
    public void onReceiveResultSuccess(Bundle resultData) {
        ((LoginActivity) getActivity()).redirectToSelectTeamwebActivity(resultData.getInt(LoginService.RESULT_USER_ID));
    }

    @Override
    public void onReceiveResultFailure(Bundle resultData) {
        mPasswordEditText.setText("");
        String errorMessage = getString(R.string.invalid_login_credentials);
        Toast.makeText(getActivity(), errorMessage, Toast.LENGTH_LONG).show();
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T17:45:52.290

ActionBarSherlock 在内容视图内的 pre-ICS 上附加了一个兼容性操作栏，而不是在 Window 的装饰视图中。正因为如此，它很容易受到更多的不便，这可能会导致像您所看到的那样的意外行为。

如果您已将 设置为`windowSoftInputMode`在 IME 打开时平移内容视图，则操作栏将从屏幕上消失。解决这个问题的简单方法是使用不同的模式（例如，调整大小），这将重新布局内容视图并将操作栏保持在屏幕上。

# c++ - Boost Metafunction 类高阶函数

> ID：10258966
> 
> 赞同：1
> 
> 时间：2012-04-21T12:35:43.647
> 
> 标签：c++, boost, functional-programming, c++11, boost-mpl

元函数类和占位符以及高阶函数有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T13:51:11.523

Boost 为元函数和高阶函数提供了特性，但这些概念并不特定于 Boost。

术语“元函数”描述了一种模板元编程技术，用于使用模板专业化来允许编译器在编译时根据其模板参数做出决定。

通常，元函数*可能*看起来像这样

```
template<bool B>
struct my_metafunction
{
    enum { value = 1 };
};

template<>
struct my_metafunction<false>
{
    enum { value = 0 };
}; 
```

使用时`my_metafunction`， 的确切值`my_metafunction<B>::value`将取决于**B**的值（即`my_metafunction<true>::value`与 不同`my_metafunction<false>::value`）。如果您不熟悉模板元编程，那么您可能想知道*为什么*这很有用 - 而现实情况是，它通常只对编写大量使用模板和编译时决策的库的人有用。（模板元编程是一个完全不同的范式！）

* * *

另一方面，“高阶函数”描述了一种函数式编程技术，它允许您将函数作为函数参数传递。这在标准 C++ 中更容易表达，标准`<algorithm>`库与标准容器一起工作。

例如，C++ 包含一个名为的高阶函数`transform`- 其目的是遍历容器中的每个元素（例如向量、字符串、列表、映射、数组等）并为每个元素执行转换。

```
std::string str = "Hello, World";
std::transform(str.begin(),
               str.end(),
               str.begin(),
               std::toupper); // Note - toupper is a function!

std::cout << str << std::endl; 
```

执行的转换取决于其最终参数，`std::toupper`。std::toupper 的目的是接受一个（字符）值并返回该值的大写版本。`str.begin()`std::transform 为and之间的每个元素获取 toupper 的结果`str.end()` （在此示例中，结果被放回 str 中）

标准库中还有很多其他高阶函数的例子—— `std::find_if`, `std::sort`,`std::count_if`等等。C++ 中的高阶函数通常可以接受任何类型的可调用对象，包括函数、lambda 或函数对象。
传递的可调用对象通常称为[i]谓词[/i]（尽管我不完全确定这是否是术语“谓词”的正确用法）

* * *

Boost 占位符是函数式编程的另一个方面的一部分，称为*柯里*化——它允许您在调用该函数之前将参数“绑定”到函数。（在 Boost 的世界中，currying 的结果是一个函数对象，它通常被传递给一个高阶函数）。

Currying 旨在通过重用现有的可调用对象/谓词并在使用它们之前具体设置它们的一些参数来替代编写自己的自定义专用可调用对象。

例如，您可以使用高阶函数`find_if`在字符串中搜索“大于 q”的第一个字符。C++ 标准库包含一个名为 的可调用对象`greater_equals`，但它需要 find_if 使用的第二个参数（“大于和等于 **to what??”）

如果不使用柯里化，您可能会编写一个函数（暂时忽略所有区分大小写），例如

```
bool greater_than_or_equals_to_q(char c)
{
    return c >= 'Q';
} 
```

使用currying，您可以将字符'Q'“绑定”到greater_equals函数，以创建一个只接受单个参数的谓词，并表示一个谓词在其参数“大于或等于Q”时产生真值。

```
std::bind( std::greater_equal<char>(), 
           std::placeholders::_1, 
           'Q' ); 
```

因此，使用大写字符串：

```
std::string str = "HELLO WORLD";
auto gt_eq_Q = std::bind( std::greater_equal<char>(), 
                          std::placeholders::_1, 
                          'Q' );

auto iter = std::find_if( str.begin(), str.end(), gt_eq_Q );
std::cout << *iter << std::endl; 
```

正如预期的那样，输出 - “HELLO WORLD”中大于或等于“Q”的第一个字符恰好是“W”

```
W 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-21T15:29:13.533

有关详细说明，请查看

1.  [http://www.artima.com/cppsource/metafunctions.html](http://www.artima.com/cppsource/metafunctions.html)
2.  [http://www.mywikinet.com/mpl/paper/mpl_paper.pdf](http://www.mywikinet.com/mpl/paper/mpl_paper.pdf)

原则上，元函数是：

*   一个类模板，其中所有参数都是类型
*   具有可公开访问类型的类`type`

例如：

```
template <bool, class L, class R>
struct IF
{
  typedef R type; 
};

template <class L, class R>
struct IF<true, L, R>
{
  typedef L type; 
}; 
```

对另一个函数进行操作的函数称为高阶函数。因此，高阶元函数是接受其他元函数作为参数并在计算过程中使用它们的元函数。这在概念上类似于函数在运行时接受指向另一个函数或函数对象的指针作为参数。唯一的区别是元函数仅在编译时存在。`boost::mpl::transform`是这种高阶元函数的一个例子。

# c# - 遍历数据表并删除列表中的列

> ID：10258968
> 
> 赞同：0
> 
> 时间：2012-04-21T12:36:03.757
> 
> 标签：c#, asp.net, visual-studio-2010, datatable

我有一个`List<String>`允许列的。我有一个数据集 DT1，其中列出了所有列。现在我想做的是只从 DT1 获取允许的列。

```
List<String> = FirstName,LastName,Age,EmailAddress
DT1 contains = FirstName,LastName,Age,EmailAddress,Sex,PhoneNumber,Address 
```

我已经尝试过`DataTable.Merge()`，`foreach`等等......但我无法得到预期的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T12:41:26.190

假设您的列表是`List<String>`包含列名的：

```
var toBeRemoved = DT1.Columns.Cast<DataColumn>()
                 .Where(c => !allowed.Contains(c.ColumnName))
                 .ToList();
foreach(DataColumn col in toBeRemoved)
{
     DT1.Columns.Remove(col);
} 
```

**编辑**：您想知道如何将删除列表中的字段设置为 null：

```
foreach(DataRow row in DT1.Rows) 
{
    foreach(DataColumn col in toBeRemoved)
    {
        row[col] = DBNull.Value;
    }
} 
```

# r - googleVis MotionChart 的默认变量

> ID：10258970
> 
> 赞同：1
> 
> 时间：2012-04-21T12:36:32.557
> 
> 标签：r, google-visualization

我正在尝试使用该包创建一个`googleVis MotionChart`带有 Google Visualization API 的。`R`

我的问题是我想在互联网上发布 MotionChart，为此我希望能够控制不同轴/尺寸的默认变量。

可以使用以下方法设置很多信息：

```
gvisMotionChart(M, options=list(state='xxx') 
```

`'xxx'`可以从 MotionChart 中的“高级”选项卡复制的状态在哪里，但默认时间序列不包含在状态中。

我的问题是，如何为 googleVis MotionChart 的不同轴/尺寸选择默认变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T15:50:19.030

不确定如何在 googleVis 包中以编程方式执行此操作，但我怀疑仔细阅读[googleVis 小插图的第 2.6 节](http://cran.r-project.org/web/packages/googleVis/vignettes/googleVis.pdf)会给你一个线索。

当我这样做时，我手动编辑。我自己的[带有欧洲公共卫生时间序列的动态图表](http://dl.dropbox.com/u/77053/motionchart/newdata.html)示例选择了一些默认时间序列。查看该页面的源代码，位于最底部。告诉我们这是否有帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T20:38:26.383

好的，我想出了一个解决方法，但这有点烦人。包似乎按照它们在数据集中的顺序传递变量。

因此，为了为不同的轴/维度选择默认变量，您必须更改数据框中变量的顺序。变量分配给轴的顺序如下：

1.  X轴
2.  Y轴
3.  点颜色
4.  点大小

ID（例如国家）和时间（例如年份）变量会被自动识别。这意味着这两个之后的第一个变量将放在 X 轴上，第二个放在 Y 轴上，依此类推。

但是，应该有更好的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T21:17:09.190

我不知道更好的方法，但是当我最近做了类似的事情时，我想我发现变量的默认顺序是：

```
## order of variables in data file:
##  1 = idvar
##  2 = timevar
##  3 = bubble colour
##  4 = x var
##  5 = y var
##  6 = bubble size 
```

该示例使用世界银行数据：

```
library(googleVis)
library(WDI)

HealthWealth = WDI(country="all", indicator=c("SP.DYN.LE00.IN", "NY.GDP.PCAP.CD", "SP.POP.TOTL"),
   start = 1960, end = 2010, extra = TRUE)  #Can take some time
HealthWealth = HealthWealth[-which(is.na(HealthWealth$Country.Name)), ]
HealthWealth = HealthWealth[-which(HealthWealth$Region == "Republic of Belarus"),]
HealthWealth = HealthWealth[, c(37, 3, 10, 5,4,6)]
names(HealthWealth) = c("Country", "Year", "Region", "GDP.(Current.$US)", "Life.Expectancy", "Population")
## order of variables in data file:
##  1 = idvar
##  2 = timevar
##  3 = bubble colour
##  4 = x var
##  5 = y var
##  6 = bubble size

## Create a motion chart
M <- gvisMotionChart(HealthWealth, idvar="Country", timevar="Year")  # Be patient

## Display the chart in your browser
plot(M)   # Change the x axis from lin to log 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T13:33:31.837

下面是 gvisMotionChart 的一个小接口函数，除了 idvar 和 timevar 之外，它还允许指定 xvar、yvar、colorvar 和 sizevar 的默认值。它通过简单地更改提供的 data.frame 的列顺序来实现这一点。该函数还将布尔值转换为数字（否则 gvisMotionChart 会引发错误）。由于我的运动图也很方便分析横截面数据，它允许设置timevar=NULL。

```
 # Convenience interface to gvisMotionChart that allows to set default columns
    myMotionChart = function(df,idvar=colnames(df)[1],timevar=colnames(df)[2],xvar=colnames(df)[3],yvar=colnames(df)[4], colorvar=colnames(df)[5], sizevar = colnames(df)[6],...) {
        library(googleVis)

        # Generate a constant variable as column for time if not provided
        # Unfortunately the motion plot still shows 1900...
        if (is.null(timevar)) {
            .TIME.VAR = rep(0,NROW(df))
            df = cbind(df,.TIME.VAR)
            timevar=".TIME.VAR"
        }

        # Transform booleans into 0 and 1 since otherwise an error will be thrown
        for (i in  1:NCOL(df)) {
            if (is.logical(df [,i])[1])
                df[,i] = df[,i]*1
        }

        # Rearrange columns in order to have the desired default values for
        # xvar, yvar, colorvar and sizevar
        firstcols = c(idvar,timevar,xvar,yvar,colorvar,sizevar)
        colorder = c(firstcols, setdiff(colnames(df),firstcols))
        df = df[,colorder]

        gvisMotionChart(df,idvar=idvar,timevar=timevar,...)
    } 
```

# c - 内核如何知道物理页面由两个不同的进程共享？

> ID：10258971
> 
> 赞同：3
> 
> 时间：2012-04-21T12:36:34.497
> 
> 标签：c, linux, x86-64

我们知道页表是用来从虚拟内存页地址中获取物理内存页地址的。但是，内核如何知道物理内存页面是否由不同的进程共享（例如，在分叉进程及其父进程的情况下）。这样的清单保存在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T12:46:08.157

内核是创建所有虚拟映射的实体。所以它确切地知道什么是共享的，什么不是。如果没有内核的帮助，用户空间进程无法创建共享映射。

当进程请求分叉时，内核还负责复制映射。它具有所需的所有信息。

一个页面的映射数量保存在`struct page`表示该页面的结构中的一个字段中。每次创建新映射时它都会增加，而当映射消失时它会减少。

如果您想更深入地了解这一点，可以访问[Linux-MM](http://linux-mm.org)。特别是，请阅读文档部分中链接的 Mel Gorman 的“*[了解 Linux 虚拟内存管理器](https://rads.stackoverflow.com/amzn/click/com/0131453483)*”一书（非常技术性）（免费提供的 PDF）。

# java - 如何获得在java中提供url的绝对路径

> ID：10258974
> 
> 赞同：0
> 
> 时间：2012-04-21T12:36:59.747
> 
> 标签：java

我想获取url的绝对路径。例如，[http://localhost:8080](http://localhost:8080)将在根目录中为我提供可用的 tomcat 主页。如何通过在 java 中提供其 url [http://localhost:8080来获取 tomcat 根目录的绝对路径。](http://localhost:8080)

我发现了类似的问题，但没有找到满意的答案，所以我在这里发布问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T13:21:08.713

您可以使用`javax.servlet.ServletContext.getRealPath(java.lang.String)`，尽管在某些情况下它不起作用。

从[API 文档](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getRealPath%28java.lang.String%29)：

> 获取给定*虚拟*路径对应的*真实*路径。
> 
>  *例如，如果`path`等于`/index.html`，此方法将返回服务器文件系统上的绝对文件路径，表单的请求`http://<host>:<port>/<contextPath>/index.html`将映射到该路径，其中`<contextPath>`对应于此 ServletContext 的上下文路径。
> 
> 返回的真实路径将采用适合运行 servlet 容器的计算机和操作系统的格式，包括正确的路径分隔符。
> 
> `/META-INF/resources`仅当容器从包含 JAR 文件中解压它们时，才必须考虑捆绑在应用程序目录中的 JAR 文件目录中的资源`/WEB-INF/lib`，在这种情况下，必须返回解压位置的路径。
> 
> 如果 servlet 容器无法将给定的虚拟路径转换为真实路径，则此方法返回 null。
> 
> **参数：**
> *path* - 要转换为真实路径的虚拟路径
> 
> **返回：**
> 真实路径，如果无法执行翻译，则返回 null*

# java - MongoDB 确保索引

> ID：10258975
> 
> 赞同：0
> 
> 时间：2012-04-21T12:37:14.563
> 
> 标签：java, jakarta-ee, mongodb

我正在开发 Mongodb，我正在尝试对我的集合进行索引，它只占用 -140 到 3320000 之间的范围，然后总索引非常高，即 23628640（通过使用`db.Location.totalIndexSize()`）

因此，我的查询需要更多时间来执行。

如何在 (-180 ,180) 之间建立索引？请帮帮我

```
db.Location.ensureIndex({loc:"2d",type:1,clientId:1,background:true},{min:-140,max:3320000}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:03:20.330

我认为你的语法是错误的。你可能想要：

```
db.Location.ensureIndex({loc:"2d",type:1,clientId:1}, {background:true}) 
```

min 和 max 选项是可选的，默认为 -180 和 180。您是否有任何超出该范围的对象？查看您得到的错误和示例对象会很有帮助。

# yaml - jekyll，当我在 post markdown 文件中编辑关于标签和类别的 yaml 时，css 不起作用？

> ID：10258978
> 
> 赞同：1
> 
> 时间：2012-04-21T12:37:51.567
> 
> 标签：yaml, jekyll

我使用 rake 生成新帖子。yaml是

```
category:
tags:[] 
```

当我像这样更改 yaml

```
category:test
tags:[test] 
```

CSS不起作用...

我最少使用 jekyll bootstrap 的主题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T14:24:41.697

您需要在冒号和内容之间留一个空格。代替：

```
category:test
tags:[test] 
```

尝试：

```
category: test
tags: [test] 
```

而且，当然，请确保您的模板设置正确。我不确定是否要留下一个空的“类别”。我建议您制作模板输出`category: default`或类似的东西以避免任何问题。

# git - 脏工作树 ($HOME/.dotfiles) 中的非破坏性 Git 检出

> ID：10258988
> 
> 赞同：3
> 
> 时间：2012-04-21T12:39:59.930
> 
> 标签：git, git-checkout, dotfiles, working-copy

这个问题是在设计另一个 Git`.dotfiles`管理系统时出现的。我想`$HOME`用作我的工作树并将存储库存储在其他地方（而不是`.git`因为这会混淆其他存储库）。

在具有先前复制和可能调整的点文件的旧机器上，我现在想克隆我的新点文件存储库并（*挥手*）进入一个状态，我可以看到我的点文件的（预先）存在状态`$HOME/.*`作为对主文件的修改我新克隆的存储库。这主要是背景，在**Git 中我只想小心地在脏目录中签出而不覆盖**.

（在一般情况下，我可以从一个新目录开始，然后复制我的更改，但是当工作树是我的时，这似乎很难做到`$HOME`。）

我发现一对命令似乎可以让我到达正确的位置，但我不确定这种方法是否存在缺陷或更简单的方法来做同样的事情：

```
git read-tree -v HEAD # load HEAD into the index
git checkout-index -a # cautiously check out all files without overwriting 
```

这两个命令是否与复制我的家、进行普通结帐、然后复制我的文件的状态相同，这样`git diff`只会有我在这台机器上所做的更改并且没有文件被删除？

还有其他应该应用的选项吗？

上下文是我的（alpha）引导脚本：

```
git clone --bare -n git://github.com/$(git config github.user)/.dotfiles.git ~/.dotfiles/repo.git
git config -f .dotfiles/repo.git/config core.bare false
git config -f .dotfiles/repo.git/config core.logallrefupdates true
git config -f .dotfiles/repo.git/config core.worktree $HOME
export GIT_DIR=~/.dotfiles/repo.git ;  export GIT_WORK_TREE=~
git read-tree -v HEAD 
git checkout-index -a # all files without overwriting
ln -sf $HOME/.dotfiles/gitignore-dots $HOME/.dotfiles/repo.git/info/exclude 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T22:14:44.940

> 我想使用 $HOME 作为我的工作树并将存储库存储在其他地方（而不是在 .git 下，因为这会混淆其他存储库）。

不要这样做。我所做的是

把你的工作树放在这里

```
/opt/dotfiles 
```

把你的回购放在这里

```
/opt/dotfiles/.git 
```

然后你可以`$HOME`通过运行引导工作树

```
. /opt/dotfiles/bootstrap.sh 
```

著名的例子，我的例子在这里

# [mathiasbynens bootstrap.sh](https://github.com/mathiasbynens/dotfiles/blob/master/bootstrap.sh)

# [svnpenn bootstrap.sh](https://github.com/svnpenn/dotfiles/blob/master/bootstrap.sh)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T02:41:16.033

## 2012-08-19 更新

一段时间以来，我一直在使用此方案在新帐户和现有帐户上设置我的点文件，并且到目前为止，上述命令还没有破坏任何东西。另一方面，没有 git 专家表示赞同这种安排，有些人含糊地表示反对，“你疯了吗？” 一种方式。

我现在有别名 doton/dotoff 和调整 GIT_DIR 和 GIT_WORK_TREE 的源文件，所以我在工作中进行了调整，尝试一下，推送到 github，然后在家里更新我的其他机器。大多数时候它是一个简单的快进或变基，但偶尔需要一个脏更新。

### 脏更新

我在这里添加它，因为它是问题中概述的方法的另一半。

假设我 git add 我的 ~/.XCompose 并推送它。当我想将它拉到已经有 .XCompose 文件的机器上时，我想获取更改，查看与本地（未添加）副本的差异并从那里合并。Git 对此进行检查并退出，这通常是合适的。

我再次使用管道命令来执行大多数更高级别的命令，但没有一些讨厌的安全检查以处理脏工作副本。文档中没有很好地介绍管道命令，但似乎可以工作（不能保证）。

这些说明假定您没有新的本地更改，即。它不做变基。

（*请注意，这最终可能会破坏文件*，包括未跟踪的文件。我不知道这是否接近安全，我怀疑如果出现问题，您可能会陷入混乱。）

```
git fetch # download FETCH_HEAD

# Check HEAD is an ancestor of FETCH_HEAD
cmp <( git rev-parse HEAD ) <( git merge-base HEAD FETCH_HEAD ) \
    || echo "merge-base is not HEAD, not fast forward"

# merge FETCH_HEAD into HEAD in index (2 tree merge is ff, no local changes)
# (no -u means the work tree is not updated)
git read-tree -v -m  HEAD FETCH_HEAD # --trivial ?
# index now merged with FETCH_HEAD

# set HEAD to be FETCH_HEAD with dereferencing
git update-ref HEAD FETCH_HEAD

# update work tree without overwriting existing files (not forced)
# (existing un-added isn't overwritten)
git checkout-index -a

# can now check diffs for conflicts add either commit/edit/checkout
git diff --stat

git pull -vn # should be a no-op 
```

这是我用来检查事物状态的一些命令：

```
git rev-parse HEAD FETCH_HEAD   # what do they point to
git diff --stat HEAD FETCH_HEAD # differences
git merge-base HEAD FETCH_HEAD  # common ancestor
for r in HEAD FETCH_HEAD; do echo $r ; git log --oneline $r | head -1; done
git name-rev $( git merge-base HEAD FETCH_HEAD )

# peek at index
git ls-files --directory --exclude-standard --stage

git diff-index --cached FETCH_HEAD # see "local changes" carried forward 
```

# animation - 如何使 CSS3 悬停过渡只运行一次，而不是在用户“取消悬停”后“倒带”？

> ID：10258990
> 
> 赞同：2
> 
> 时间：2012-04-21T12:40:12.230
> 
> 标签：animation, css, hover

我有一些 CSS（见下文），当用户将鼠标悬停在外部字段上时，我想让内部 div（小猫）在屏幕上平移。这工作正常，但正如您所料，当用户从外场移开他或她的鼠标时，动画会“倒带”，然后（当然）如果用户再次悬停，它会重播。我试图弄清楚如何让这个动画运行一次（用户第一次悬停在外场上），然后不再倒带或再次播放，无论他或她将来悬停在什么上面。这可能吗？我不想在我的页面上添加另一个脚本，但如果这是唯一的解决方法，那么我愿意接受。提前致谢！

将要

```
<style type="text/css">
div.kitty {
    position: absolute; 
    bottom: 50px; 
    left: 20px; 
    -webkit-transition: all 3s ease-in; 
    -moz-transition: all 3s ease-in; 
    -o-transition: all 3s ease-in; 
    -ms-transition: all 3s ease-in;
    animation-iteration-count: 1;
}
#actioner {
    padding: 0px;
    height: 400px;
    position: relative;
    border-width: 1px;
    border-style: solid;
}
#actioner:hover div.kitty{
    -webkit-transform: translate(540px,0px); 
    -moz-transform: translate(540px,0px); 
    -o-transform: translate(540px,0px); 
    -ms-transform: translate(540px,0px);
}
</style>

<div id="actioner">
    <div class="kitty">Kitty-Cat Sprite</div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T13:50:42.287

恕我直言，纯 CSS 是不可能的。最简单的解决方案是使用 jQuery。

```
// css
.actioner{
    -webkit-transform: translate(540px,0px); 
    -moz-transform: translate(540px,0px); 
    -o-transform: translate(540px,0px); 
    -ms-transform: translate(540px,0px);
}

// script
$(function(){
    $('.kitty').one("mouseover", function() {
        $('.kitty').addClass('actioner');
    });
}); 
```

# compiler-errors - 错误“您选择的 CPU 不支持 x86-64 指令集”是什么意思？

> ID：10258992
> 
> 赞同：5
> 
> 时间：2012-04-21T12:41:07.947
> 
> 标签：compiler-errors, makefile, cmake

我在 Ubuntu 11.10 x86_64 中从 ppa 安装了[点云库](http://pointclouds.org/)（包括开发包，不一定与问题相关，但为了完整起见，我提供了这个细节）。当我尝试编译（在 cmake 生成的 make 文件上制作）我自己的使用 pcl 的代码时，我收到错误**CPU you selected does not support x86-64 instruction set**。这个错误是什么意思，我应该检查什么才能消除错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T15:05:52.270

这意味着您正在传递一个标志，`gcc`该标志选择不支持 64 位的 CPU 类型。例如，也许您正在使用类似`-march=prescott`或类似的标志。你的编译行是什么样的？关于标志的一些有用信息可以在 Gentoo（还有哪里？）wiki 上找到： http: [//en.gentoo-wiki.com/wiki/Safe_Cflags/Intel](http://en.gentoo-wiki.com/wiki/Safe_Cflags/Intel)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T12:46:46.673

你是在 64 位机器上运行的吗？

看起来该软件适用于 64 位机器，而您有一个 32 位处理器。

# java - Java - BorderLayout - 组件是否应该占据整个宽度？

> ID：10258996
> 
> 赞同：2
> 
> 时间：2012-04-21T12:41:54.123
> 
> 标签：java, swing, layout, border-layout

我的理解是，当向 BorderLayout 添加组件时，它们会占据整个隔间的大小。将 panel1 添加到 contentPane 的北部时，似乎是这种情况。但是，当我将 panel2 放在 panel3 的北部，并将 panel3 添加到 contentPane 的中心时，panel2 似乎占用了它可以占用的最少空间。

是什么导致了这些尺寸的差异？

```
public class BorderLayoutTesting {

    public static void main (String[] args) {
        JFrame frame = new JFrame();

        JPanel panel1 = new JPanel();
        panel1.setLayout(new BorderLayout());
        panel1.add(new JLabel("name:"), BorderLayout.WEST);
        panel1.add(new JTextField(), BorderLayout.CENTER);

        JPanel panel2 = new JPanel();
        panel2.setBorder(BorderFactory.createLineBorder(Color.black));
        panel2.setLayout(new BorderLayout());
        panel2.add(new JLabel("your full address with postcode:"), BorderLayout.WEST);
        panel2.add(new JTextField(), BorderLayout.CENTER);

        Container container = frame.getContentPane();
        container.setLayout(new BorderLayout());
        container.add(panel1, BorderLayout.NORTH);
        JPanel panel3 = new JPanel();
        panel3.add(panel2, BorderLayout.NORTH);
        container.add(panel3, BorderLayout.CENTER);
        panel3.setBorder(BorderFactory.createLineBorder(Color.black));

        frame.setSize(500,500);
        frame.setVisible(true);
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T12:47:04.520

您的 panel3 JPanel 没有设置布局，因此它使用 JPanel 的默认 FlowLayout 而不是 BorderLayout。

# binary - 十六进制位运算

> ID：10258999
> 
> 赞同：0
> 
> 时间：2012-04-21T12:42:16.860
> 
> 标签：binary, bit-manipulation, endianness, hex

我正在阅读关于大字节序和小[字节序](http://people.cs.umass.edu/~verts/cs32/endian.html "字节序")的非常有趣的课程。一个伪代码示例解释了如何将 longInt（4 字节）从大端转换为小端或相反的东西。

```
 Function Reverse (N:LongInt) : LongInt ;
     Var B0, B1, B2, B3 : Byte ;
    Begin
    B0 := (N AND $000000FF) SHR  0 ;
    B1 := (N AND $0000FF00) SHR  8 ;
    B2 := (N AND $00FF0000) SHR 16 ;
    B3 := (N AND $FF000000) SHR 24 ;
    Reverse := (B0 SHL 24) OR (B1 SHL 16) OR (B2 SHL 8) OR (B3 SHL 0) ;
    End ; 
```

代码就是这样，我在第一行十六进制表示时遇到了麻烦。他们如何通过这样做在这里提取第一个字节

```
B0 := (N AND $000000FF) SHR  0 ; 
```

? 什么操作

```
 N AND $000000FF 
```

做？

我看到 AND 对二进制表示做了什么，但是十六进制表示呢？接下来的几行让我感到惊讶。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T12:45:38.360

一个十六进制数字相当于 4 个连续的二进制数字，例如`C`<==> `1100`。按位运算对等效的二进制表示进行操作。