# StackOverflow 问答 10619000-10619999

# c# - 如何使线程以正确的顺序运行

> ID：10619003
> 
> 赞同：2
> 
> 时间：2012-05-16T12:53:52.817
> 
> 标签：c#, multithreading, locking

有两个流，第一个显示进程表，而第二个将它们视为计数并显示。最初是为第一个启动，然后是第二个：

```
Thread t1 = new Thread(tmh1.FillTable);
Thread t2 = new Thread(tmh1.GetGeneralInfo);
t1.Start();
t2.Start(); 
```

以下是在线程中运行的方法：

```
public void FillTable()
{
    while (true)
    {
         lock (lockObj)
         {
            arr.Clear();
            arr.AddRange(Process.GetProcesses());
            TableFormatter.Line();
            TableFormatter.Row("Name", "ID", "threads quantity", "Start time");
            TableFormatter.Line();
          }
          Thread.Sleep(interval);
      }
}
public void GetGeneralInfo()
{
    while (true)
    {
        lock (lockObj)
        {
           Console.WriteLine(arr.Count.ToString());
        }
    Thread.Sleep(interval);
    }
} 
```

结果：

```
0
-----------------------------------------------------------------------------
|     Name     |         ID       |  threads quantity|  Start time          |
----------------------------------------------------------------------------- 
```

但应该如下：

```
-----------------------------------------------------------------------------
|     Name     |         ID       |  threads quantity|  Start time          |
-----------------------------------------------------------------------------
**68** 
```

如何使踏板以正确的顺序运行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T12:58:33.460

线程应该并行运行。如果您希望在第一个线程完成时执行第二个线程执行的任务，只需让第一个线程也执行第二个任务。

您还可以使用[任务并行库](http://msdn.microsoft.com/en-us/library/dd991174.aspx)的方式一个接一个地运行任务。

```
Task.Factory.StartNew(() => tmh1.FillTable()).ContinueWith(() => tmh1.GetGeneralInfo(), TaskScheduler.FromCurrentSynchronizationContext()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T13:02:49.437

我会使用任务。例如：

```
Task.Factory.StartNew(tmh1.FillTable).ContinueWith(tmh1.GetGeneralInfo) 
```

虽然，目前还不清楚为什么你想要两个线程。以下内容也应该起作用：

```
Thread t1 = new Thread(()=>{tmh1.FillTable; tmh1.GetGeneralInfo();});
t1.Start(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-16T13:03:26.927

这段代码很奇怪，很难确定为什么要创建 2 个相互运行的线程。

假设所需的效果是在不同的线程上在不同的时间运行两件事，那么最简单的方法是，假设您可以使用 C# 4 是利用任务并行库。一个例子如下：

```
 Task.Factory
            .StartNew(() => Console.WriteLine("This is the first"))
            .ContinueWith(t => Console.WriteLine("This is the second"));

        Console.ReadLine(); 
```

如果你想手动创建线程，你应该阅读[信号结构](http://www.albahari.com/threading/part2.aspx#_Signaling_with_Event_Wait_Handles)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T12:59:24.577

您可以使用重置事件来使用信号（请参阅 C# 中的 AutoResetEvent 或 ManualResetEvent）。但是在锁中调用等待信号可能很危险（例如死锁）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T13:40:40.827

仅作为您发布的代码我不得不说在这里使用线程是没有意义的。我猜它的内容比你介绍的要多。也许您精简了代码以制作更小的帖子？

无论如何，需要最少调整和重构的解决方案是使用`Monitor.Pulse`and `Monitor.Wait`.

```
public void FillTable()
{
    while (true)
    {
         Thread.Sleep(interval);
         lock (lockObj)
         {
            arr.Clear();
            arr.AddRange(Process.GetProcesses());
            TableFormatter.Line();
            TableFormatter.Row("Name", "ID", "threads quantity", "Start time");
            TableFormatter.Line();
            Monitor.Pulse(lockObj);
          }
      }
}

public void GetGeneralInfo()
{
    while (true)
    {
        lock (lockObj)
        {
           Monitor.Wait(lockObj);
           Console.WriteLine(arr.Count.ToString());
        }
    }
} 
```

不过，还有其他技术可以使用。一种常见的方法是使用生产者-消费者模式。这在课堂上很容易`BlockingCollection`。

```
private BlockingCollection<Process[]> queue = new BlockingCollection<Process[]>();

public void FillTable()
{
    while (true)
    {
         Thread.Sleep(interval);
         queue.Add(Process.GetProcesses());
    }
}

public void GetGeneralInfo()
{
    while (true)
    {
        Process[] processes = queue.Take();
        Console.WriteLine(processes.Length.ToString());
    }
} 
```

# python - Django 对象的任意排序

> ID：10619006
> 
> 赞同：1
> 
> 时间：2012-05-16T12:54:01.813
> 
> 标签：python, django, sequence

假设我有一系列书籍章节对象，由该模型定义：

```
class Chapter(models.Model):
    heading = models.CharField()
    contents = models.TextField() 
```

假设我目前有四章：a、b、c 和 d。我如何将章节的顺序定义为 b、d、c、a 或其他任意顺序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:59:18.560

你可以：

1.  **向 Chapter 模型添加一个 'sortkey'**整数字段，

2.  **为每个模型设置排序键**，这意味着 1 代表你想要的第一章，2 代表第二章，等等……

3.  **设置[Chapter.Meta.ordering](https://docs.djangoproject.com/en/dev/ref/models/options/#ordering)**，以便排序键将用于默认排序

它看起来像：

```
class Chapter(models.Model):
    heading = models.CharField()
    contents = models.TextField()
    sortkey = models.IntegerField(default=0)

    class Meta:
        ordering = ('sortkey',) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:03:23.107

这些解决方案太可怕了！！

```
Chapter.objects.all().order_by("?") 
```

非常非常简单漂亮

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T16:17:11.757

我相信您会对`order-with-respect-to`Django Meta 选项感到非常满意。

看看[Meta 选项参考](https://docs.djangoproject.com/en/dev/ref/models/options/#order-with-respect-to)

`id`除了in之外，我找不到使用任何其他字段的方法`set_RELATED_order`。尽管我没有对其进行测试，但我突然想到，您可以`order = IntegerField...`在 Chapter 模型中有一个，并且在某处有一个看起来像这样的语句：

```
order = [id for (order, id) in sorted([(x.order, x.id) for x in Chapter.objects.all()], key=0)] 
```

我在这里既不准确也不可靠。我只是想通过参考[1](https://docs.djangoproject.com/en/dev/ref/models/options/#order-with-respect-to)和洞察力为您指明方向。

祝你好运！

# jquery - jquery根据订单号将数据附加到html

> ID：10619016
> 
> 赞同：0
> 
> 时间：2012-05-16T12:54:14.797
> 
> 标签：jquery, html, html-lists

我需要用 6`li`和它们的值（是否为空）构建一个列表，然后将其附加到现有的`li`.

从 sql 查询返回这些结果：

```
id_news  title      category  order
-------  --------   --------  -----
3        Alex...    12        1
12415    Obama...   3         3 
```

有了这些数据，我需要按`order`列表顺序构建一个，我的意思是列表应该是这样的：

```
<ul>
    <li data-order="1"> Alex... </li>
    <li data-order="2"> No featured news here, click to add </li>
    <li data-order="3"> Obama... </li>
    <li data-order="4"> No featured news here, click to add </li>
    <li data-order="5"> No featured news here, click to add </li>
    <li data-order="6"> No featured news here, click to add </li>
</ul> 
```

所以，我的问题是：

*   我应该有一个预定义的列表并在那里添加数据吗？
*   或者，我应该在构建列表时这样做吗？如果是这样，怎么做？

我现在拥有的 jQuery 代码：

```
var sublist = '<ul id="order_list"> <h3> Order list: </h3>';
$.each(data, function(index, value) {
  sublist += '<li data-target="'+value['id_news']+'">'+value['headline']+'</li>';
});
sublist += '</ul>';
list.append(sublist); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:17:50.510

重要的是要记住，在插入 DOM 之前，按照你想要的方式获取所有标记字符串文本，这将是 99% 的优化（不是说你不是，只是指出这绝对是重点保持）。

至于实现这一点：使用与创建标记相同的代码，但首先对“数据”数组进行排序。为此，请使用 javascript 数组的[“排序”功能](http://www.w3schools.com/jsref/jsref_sort.asp)。[这个 jsfiddle](http://jsfiddle.net/ykTgD/)显示它正在发生。

```
var data = [{order:5}, {order:45}, {order:4}, {order:200}];
data.sort(function(a,b){return a.order-b.order;});

$.each(data,function(index, value){
    document.write(value.order+'<br/>');
});

// output shows the array ordered by the val of the objects' order prop 
```

我假设您的数据数组包含具有数字顺序属性的对象。当然，如果属性被命名为其他名称，则相应地更改，并且如果它是字符串而不是数字，则在函数中使用 Number() 以使数学工作。

# php - 通过 sql 和 codeigniter 检索数据

> ID：10619017
> 
> 赞同：0
> 
> 时间：2012-05-16T12:54:32.930
> 
> 标签：php, mysql, sql, codeigniter

当我使用这个 sql 时，第一个表中 mem_name 的结果被重复了很多我该如何修复它

```
 <?php     
    $sql="SELECT mc.mc_id,mc.mc_role,mc.mc_order,mc.mc_order IS NULL AS isnull, mem.*
                    FROM $this->memberCatsTableName mc, $this->tableName mem

                    WHERE mc.cat_id=$cat_id $where  AND mc.member_id=mem.mem_id or mem.mem_name='$mem_name'

                    ORDER BY isnull ASC, mc.mc_order ASC";

            $query = $this->db->query($sql);
            return $query->result_array();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T04:22:53.070

这是修改后的查询..

```
<?php     
    $sql="SELECT mc.mc_id,mc.mc_role,mc.mc_order,mc.mc_order IS NULL AS isnull, mem.*
                    FROM $this->memberCatsTableName mc, $this->tableName mem

                    WHERE mc.cat_id=$cat_id $where  AND mc.member_id=mem.mem_id or mem.mem_name='$mem_name' 

       Group by mem.mem_name 

                    ORDER BY isnull ASC, mc.mc_order ASC";

            $query = $this->db->query($sql);
            return $query->result_array();
?> 
```

您可以按查询分组..

```
Or you can also specify the join criteria 
```

希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:57:49.970

您必须指定连接条件。

# tomcat - 设置 Liferay Tomcat 运行时

> ID：10619019
> 
> 赞同：0
> 
> 时间：2012-05-16T12:54:38.773
> 
> 标签：tomcat, liferay

我似乎无法更改 Liferay Tomcat 运行时窗口上的运行时 JRE。

我想将其更改为 JRE 7，但它确实保存了更改。过去有人遇到过这个问题吗？你是如何解决这个问题的？

![Liferay Tomcat 服务器运行时](../Images/4181323561970f702bcf6224c252367f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:06:12.933

您可以在 Liferay 的 tomcat 文件夹中`setenv.bat`（对于 Windows）或（对于 Linux）更改 JRE 。`setenv.sh`

# javascript - 将文本附加到输入字段

> ID：10619020
> 
> 赞同：0
> 
> 时间：2012-05-16T12:54:43.627
> 
> 标签：javascript

有没有办法将文本附加到输入字段？

所以让我们说而不是：

```
<input type="text" id="val" name="val" value="http://" style="width: 140px;" /> 
```

`http://`已经写了“”，当`http://`有人输入地址时会自动添加一个“”，如果有人输入完整的url“ `http://www.****.com`”，则不应添加http，因此它不会加倍。

有人有什么想法吗？我不能使用php。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:04:38.413

***附加：***

`document.getElementById('val').value += "http://www.google.co.uk";`

***删除重复项：*** `

`document.getElementById('val').value.replace("http://http://","http://");`

这样，如果他们确实键入`http://`了两次，它就会将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:08:23.860

为什么不添加`http://`if 它丢失了？

```
var input = document.getElementById('val').value;

if (input.search('http://') === -1) {
    input = 'http://' + input;
} 
```

编辑：如果您还需要允许 https，请将搜索更改为正则表达式：

```
if (input.search(/https?:\/\//) === -1) { 
```

[http://jsfiddle.net/jbabey/Bt67X/](http://jsfiddle.net/jbabey/Bt67X/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T13:09:06.283

我强烈建议使用脚本框架，例如 jQuery (http://jquery.com) 来访问输入字段。

见这里：http: [//jsfiddle.net/5BLrU/](http://jsfiddle.net/5BLrU/)

这是供参考的JS代码

```
$(function() {
    $("#some-form").submit(function(){
        var $val = $("#val");
        var url = $val.val();
        if (!/^http:\/\/.+/.test(url)) {
            $val.val("http://" + url);
        }
        // remove this to submit the form!
        return false;
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T13:10:38.880

以下示例假定目标元素的 ID 为**val**。

```
// Store current element
var elem = document.getElementById('val'),
    // Store current value
    currentValue = elem.value;

// Prepend something if not present
if (currentValue.match(/^http:\/\//) == false) {
    currentValue = 'http://' + currentValue;
}

// Re-assign
elem.value = currentValue; 
```

# java - 获取 WebSphere 应用服务器的实例名称

> ID：10619021
> 
> 赞同：15
> 
> 时间：2012-05-16T12:54:44.430
> 
> 标签：java, websphere

我的 Web 服务将在 Jboss 应用服务器或 Websphere 应用服务器上运行。对于他们两个，我都需要知道实例名称，对于 Jboss 我可以使用`System.getProperty("jboss.server.name"),`，但是对于 WebSphere，我可以使用什么？我不能使用特定于 WebSphere 的方法，我需要调用 System.properties

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-10-03T12:49:50.943

至少对于 WebSphere 而言，另一种方法是在 JNDI 树中查找它。这就是我使用的：

```
InitialContext ic = new javax.naming.InitialContext();
String serverName = ic.lookup("servername").toString(); 
```

这样我就不必配置任何东西，因为 WebSphere 会为我绑定这些信息。

也可以使用“thisNode/cell/cellname”和“thisNode/nodename”检索单元和节点名称。在集群中有用的东西。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-17T12:33:12.057

我同意将服务器名称指定为环境变量（Manglu 的触摸也很好）。为了使讨论完整，这里是您如何通过运行时获取实例名称（此 API 在最近的版本中已弃用但仍在使用）；

```
import com.ibm.websphere.runtime.ServerName;

System.out.println("Display name: " + ServerName.getDisplayName());
System.out.println("Full name: " + ServerName.getFullName()); 
```

样本输出就像

> 显示名称：server1
> 全名：was7host01Node01Cell\was7host01Node01\server1

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-16T13:23:59.647

为了保持平台中立，您可以将变量设置为 Websphere 服务器的 JVM 参数（如果节点是集群的，则每个节点一个）。对于 Websphere 7，您将在 Admin Console 中找到以下内容...

```
Servers > Server Types > Websphere application servers > [your cluster node] >
  >  Java and Process Management  > Process Definition > Java Virtual Machine >
    > Generic JVM arguments 
```

并添加一个像这样的变量......

```
-DServerName=serverNodeA 
```

然后，您可以访问代码中的值...

```
String serverName = System.getproperty("ServerName"); 
```

只要您有权向 JVM 添加参数，此技术就可以用于所有应用程序服务器。我确定必须有特定于 Websphere 的 API 来查询节点名称，但是随后您将代码输入到服务器，这使得单元测试变得困难并且不可移植。我更喜欢这种方法。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-21T19:10:44.380

kurtcebe 解决方案效果很好。对于那些使用 maven 的人，您将无法轻松地将 jar 放入您的项目中。因此，使用 Class.forname...

```
try {
  Class<?> c = Class.forName("com.ibm.websphere.runtime.ServerName");
  LOGGER.debug("Class found" + c);
  Method m = c.getMethod("getFullName", new Class<?>[0]);
  LOGGER.debug("Method found" + m);
  Object o = m.invoke(DeliveryServiceUtils.class, new Object[0]);
  LOGGER.debug("Method invoked, response is " + o);
  processName = o.toString();
}
catch (Exception ex) {
  processName = "unknown - " + ex.getClass().getName() + ": " + ex.getMessage();
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-17T03:56:13.230

布拉德建议的方法很好，但我会以不同的方式来做。

在 Server JVM 的自定义属性中，我将添加一个属性 Server-Name 并将其值指定为 WAS_SERVER_NAME。

这是面包屑：

服务器 -> -> 进程定义 -> Java 虚拟机 > 自定义属性

添加一个新的服务器名称，其值为 ${WAS_SERVER_NAME}

每个 WAS 服务器实例都将此 WebSphere 变量设置为服务器实例的名称。您无需担心会出现拼写错误（或此处的类似错误），并且此方法适用于所有 WAS Server。

您可以创建一个将这些值设置为模板的服务器，当您创建一个新服务器时，这些值始终为您呈现。

高温高压

# mysql - MYSQL 内部选择查询

> ID：10619022
> 
> 赞同：1
> 
> 时间：2012-05-16T12:54:48.033
> 
> 标签：mysql, sql, sql-subselect

我正在使用 MYSQL，因为我尝试以下选择查询

```
SELECT col_A,Col_B FROM table_A WHERE Col_C in (1,2) 
```

此查询显示为 2 条记录，但我尝试了以下查询我只有一条记录

```
SELECT col_A,Col_B FROM table_A WHERE Col_C in (
SELECT col_A FROM table_B WHERE Col_B) 
```

“SELECT col_A FROM table_B WHERE Col_B”的输出是 1,2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:24:08.740

你的mysql查询没有问题。请再次检查 `SELECT col_A FROM table_B WHERE Col_B`查询结果。

如果您可以显示您的表格内容或在`www.sqlfiddle.com`站点中，请让您的表格包含一些内容，以便我们检查这里有什么问题。

谢谢你。

# javascript - 删除 CSS 规则在 Firefox 中不起作用

> ID：10619025
> 
> 赞同：1
> 
> 时间：2012-05-16T12:54:57.363
> 
> 标签：javascript

我正在尝试删除第一个 css 规则。

但是，这在 Firefox 3.6.28 中不起作用。每个人都一样吗？为什么会这样？

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <title>Test</title>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script type="text/javascript">

            $(window).load(function(){

                console.log(document.styleSheets);
                document.styleSheets[0].deleteRule(0);
                console.log(document.styleSheets); // same as the first console.log

            });

        </script>
        <style>
            body{font-size:62.5%;}
            #mc{padding:310px 0 10px 162px; color:#fff;}
            #content{width:500px;}
            #header{padding-top:10px;}
            #banner{padding:10px 0}
        </style>
    </head>
    <body>
        Test JS
    </body>
</html> 
```

## 更新

只是为了澄清，删除似乎正在工作，但是在`console.log`删除之前和之后显示相同数量的规则。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:05:14.493

似乎对我来说工作得很好

例如[http://jsfiddle.net/gaby/JmWwM/](http://jsfiddle.net/gaby/JmWwM/)

您需要检查`cssRules`属性的长度。

如果您在 firebug 中记录实际对象，那么当您尝试更深入地挖掘时，它会向您显示样式表的当前状态，因此它的规则数量会减少..（*因为当您开始挖掘时，删除已经发生*)

但是如果您在删除之前和之后记录实际的规则数量，那么它将显示正确的结果..

所以问题是理解`console.log`命令如何工作的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T12:57:22.023

根据[https://developer.mozilla.org/en/DOM/CSSStyleSheet/deleteRule](https://developer.mozilla.org/en/DOM/CSSStyleSheet/deleteRule) `stylesheet.deleteRule(index)`，删除规则接受索引，因此您`1`应该是`0`.

我创建了一个 jsfiddle [http://jsfiddle.net/N3zsw/](http://jsfiddle.net/N3zsw/)。我不得不对您的代码进行一些更改，因为页面上还有其他样式表，所以 0 == 3。

它似乎对我有用。当你这样做时，`console.log`你应该显示`console.log(document.styleSheets[0])`而不是`console.log(document.styleSheets)`. CSS

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T13:07:36.427

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <title>Test</title>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
        <style>
            body{font-size:62.5%;}
            #mc{padding:310px 0 10px 162px; color:#fff;}
            #content{width:500px;}
            #header{padding-top:10px;}
            #banner{padding:10px 0}
        </style>
        <script type="text/javascript">
            (function () {
                var s = document.styleSheets[0];
                console.log(s.cssRules.length);
                s.deleteRule(1);
                console.log(s.cssRules.length);
                s.deleteRule(1);
                console.log(s.cssRules.length);
                s.deleteRule(1);
                console.log(s.cssRules.length);
                s.deleteRule(1);
                console.log(s.cssRules.length);
            })();
        </script>
    </head>
    <body>
        Test JS
    </body>
</html> 
```

它工作正常，我认为它与萤火虫的对象引用有关

# actionscript-3 - 闪存 CS5.5 输出错误

> ID：10619033
> 
> 赞同：0
> 
> 时间：2012-05-16T12:55:20.677
> 
> 标签：actionscript-3, flash-cs5

我一直在创建一个超媒体播放器，我已经到了一个它出现故障的阶段，它显然是一个......

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
    at AvalancheCityHypermediaPlayer_fla::MainTimeline/fl_CustomMouseCursor() 
```

这是我的代码：

```
import flash.events.Event;

cust_cursor.mouseEnabled= false;

cust_cursor.addEventListener(Event.ENTER_FRAME, fl_CustomMouseCursor);

function fl_CustomMouseCursor(event:Event)

{

    cust_cursor.x = stage.mouseX;

    cust_cursor.y = stage.mouseY;
}

Mouse.hide(); 
```

我不确定为什么它不能正常工作，基本上当一个按钮悬停在它上面时，它意味着跳转到第 2 帧并停止，但它正在跳转到该帧，然后直接跳转到第 1 帧而不在第 2 帧停止，并停在第 1 帧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T17:49:23.037

**1\.** 您的错误没有产生行号。您（和我）会发现这对于调试非常宝贵；如果在 Flash IDE 中，您可以在 swf 首选项下的“发布设置”中将其打开，作为标题为“允许调试”的切换。

**2\.** 此代码是在类中还是在文档代码中（例如，Flash IDE“操作”选项卡）？如果它在类中，请确保将阶段的引用传递给类的构造函数并将其分配给内部持久变量，以便 fl_CustomMouseCursor 可以解决它。默认情况下，类没有引用舞台的内部方式，我假设这就是产生 #1009 错误的原因。

例如，在您的类构造函数中......

```
package com.example {
    public class MyClass {
        private var stage;
        public function MyClass(arg) {
            stage = arg;
        }
    }
} 
```

在实例化类时在外面......

```
var myObj:MyClass = new MyClass(stage); 
```

**3\.** 如果您希望您的代码停在一个框架上，请使用[`stop();`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/MovieClip.html#stop%28%29)或[`gotoAndStop()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/MovieClip.html#gotoAndStop%28%29)

**4\.** 最后，如果您使用 Flash IDE 进行编译，您可以对其进行调试，并准确查看堆栈中运行时环境存在问题的变量。您可以从调试菜单或通过编译来访问它`control-shift-enter`。

# python - Python - GUI - Tkinter 列表框

> ID：10619034
> 
> 赞同：0
> 
> 时间：2012-05-16T12:55:23.913
> 
> 标签：python, file, listbox, tkinter

我无法将我的一个文本文件加载到我的 GUI 中。我有一个加载功能（在菜单栏上），并创建了一个列表框。

加载菜单和列表框的代码：

```
class View(Listbox):
    def __init__(self, master):
        Listbox.__init__(self, master)      #makes view class listbox

class Controller(object):
    def __init__(self, master):
        """ Main interface:
        master - the top level window

        """
        self._master = master
        menubar = Menu(self._master)

        frame1 = Frame(self._master)
        frame1.pack(side=TOP, fill=BOTH, padx=5,expand=True)

        self._Listbox=View(frame1)
        self._Listbox.pack(side = TOP,fill=BOTH, expand = True,pady=20)

        menubar = Menu(self._master)
        filemenu = Menu(menubar, tearoff=0)
        filemenu.add_command(label="Open rooms file", command = self.file_open)

    def file_open(self):
        filename = tkFileDialog.askopenfilename() 
```

加载文件有效，但当前正在加载的文本文档在哪里？如何在我的列表框中显示它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:23:34.090

这有效：

```
from Tkinter import *
import tkFileDialog

class View(Listbox):
    def __init__(self, master):
        Listbox.__init__(self, master)      #makes view class listbox

class Controller(object):
    def __init__(self, master):
        """ Main interface:
        master - the top level window
        """
        self._master = master

        frame1 = Frame(self._master)
        frame1.pack(side=TOP, fill=BOTH, padx=5,expand=True)

        self._Listbox=View(frame1)
        self._Listbox.pack(side = TOP,fill=BOTH, expand = True,pady=20)

        menubar = Menu(self._master)
        filemenu = Menu(menubar, tearoff=0)
        filemenu.add_command(label="Open", command = self.file_open)
        menubar.add_cascade(label='File',menu=filemenu)
        self._master.config(menu=menubar)

    def file_open(self):
        filename = tkFileDialog.askopenfilename()

        #insert each line in the file into the listbox
        with open(filename,'r') as f:
            for line in f:
                self._Listbox.insert(END,line)

if __name__ == "__main__":
    root=Tk()
    c=Controller(root)
    root.mainloop() 
```

这与您的代码仅略有不同......首先，我删除了第一个，`menubar = Menu(self._master)`因为它并没有真正做任何事情。其次，我添加了一个“级联” `menubar.add_cascade(label='File',menu=filemenu)`，第三，我实际上将菜单附加到了根`Tk`窗口： `self._master.config(menu=menubar)`

# gwt - 由于转换为 Java 脚本而导致的 Gwt 性能

> ID：10619036
> 
> 赞同：0
> 
> 时间：2012-05-16T12:55:42.033
> 
> 标签：gwt

嗨，当我知道 GWT 将转换为 javascript 后，我​​正在使用 GWT。

那么性能问题呢？？它比纯 javascript 应用程序慢吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:07:19.717

1.  在部署应用程序之前，用 Java 编写的代码由 GWT 编译器转换为 javascript。编译不会在运行时发生。

2.  GWT 对已编译的 javascript 进行优化。它实际上为不同的浏览器和语言组合生成不同的版本。它使用延迟绑定为浏览器检索适当的 javascript 文件。此外，它会进行混淆处理，以便编译后的 javascript 大小会很小。所以你的javascript应用程序会相对更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:06:46.087

它实际上并没有变慢，但是当你有一个更大的应用程序时问题就出现了，所以你的 javascript 文件的大小越来越大。

在我工作的公司中，我们有超过 1 MB 的 JS 文件必须在应用程序启动期间加载。我们之前甚至有 2.5 MB，但我们使用代码拆分来削减它（您可以将 JS 拆分为更多文件，但它确实并不完美）。

但除此之外，GWT 是一个非常快速的框架，所以不用担心。您也不能将它与纯 JS 进行比较，因为 GWT 通常与服务器进行大量通信。

# javascript - 谷歌地图更改标记的图标

> ID：10619047
> 
> 赞同：0
> 
> 时间：2012-05-16T12:56:23.027
> 
> 标签：javascript, google-maps

我正在尝试更改标记图标并将我自己的图标与以下代码一起放置，但没有出现任何图标。请问有什么建议吗？

```
var marker = new google.maps.Marker({
    position: location,
    map: map,
    icon: 'c:\green.jpg'
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:01:45.590

您必须将图像 (green.jpg) 放在程序可访问的文件夹中。例如，将其放在 WAR 文件夹中。如果您只有一个 HTML、PHP、... 页面，则将图像放在同一个文件夹中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:01:55.210

图标值应该是一个 URI，因此在这种情况下您可能需要向它传递一个文件 URI。

```
file:///C:/green.jpg 
```

显然，如果您要在网络上使用它，那么您将需要使用由网络服务器提供的内容的 URL，而不是计算机上的图像文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T13:02:00.177

尝试使用 setIcon() 函数。像 marker.setIcon("iconfile")

有关此功能的更多信息： [https ://developers.google.com/maps/documentation/javascript/reference#Marker](https://developers.google.com/maps/documentation/javascript/reference#Marker)

搜索：“setIcon(icon:string|MarkerImage)”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T13:03:27.340

您可以尝试使用文件的相对路径：

```
var marker = new google.maps.Marker({
    position: location,
    map: map,
    icon: 'img/markers/brown_MarkerE.png'
}); 
```

我希望这有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T13:03:54.463

您必须指定要使用的协议，在您的情况下是`file://` [文件传输协议](http://wikipedia.org/wiki/File_Transfer_Protocol)

```
var marker = new google.maps.Marker({
    position: location,
    map: map,
    icon: 'http://c:/green.jpg'
}); 
```

注意：您必须将图像存储在您的网络服务器上，以便所有人都可以访问它。这样，只有在该`C`分区上带有图像“grren.jpg”的用户才能看到该图标。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-16T12:55:32.603

```
here is the full document for that with example :
https://developers.google.com/maps/tutorials/customizing/custom-markers

you can also use this code:

var marker = new google.maps.Marker({
    position: location,
    map: map,
    icon: 'your_img.png'
}); 
```

# java - 将 JScrollPane 添加到 JTable 组件

> ID：10619048
> 
> 赞同：4
> 
> 时间：2012-05-16T12:56:27.393
> 
> 标签：java, swing, jtable, jscrollpane

我正在尝试将 a 添加`JScrollPane`到我的`JTable`中，但它似乎不起作用。我有一个`JTable`21 行和 5 列，我正在添加一个`JScrollPane`按照以下代码...

```
public Targy_felv() {
    JScrollPane scrollPane;
    JFrame frame = new JFrame();
    frame.setVisible(true);
    frame.setSize(600, 300);
    table = new JTable();
    Object o[] = new Object[]{"Tárgynév", "Oktató", "Kredit", "Félév", "Tárgykód"};
    table.setModel(new DefaultTableModel(get_Tárgyak(), o));
    scrollPane = new JScrollPane();
    scrollPane.getViewport().add(table);
    frame.add(table);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
} 
```

有人可以帮我理解为什么滚动条没有出现。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-16T13:09:09.457

确保您将 . 添加`JScrollPane`到您的`JFrame`中，而不是`JTable`. 如果你最初只有 a`JFrame`和 a`JTable`你会像这样添加它......

```
JTable table = new JTable();
JFrame frame = new JFrame();
frame.add(table); 
```

如果要添加`JScrollPane`，则需要更改`add()`方法以添加`JScrollPane`而不是`JTable`，就像这样...

```
JTable table = new JTable();
JFrame frame = new JFrame();
frame.add(new JScrollPane(table)); 
```

或者像这样，如果您需要`JScrollPane`在代码中引用后面的内容...

```
JTable table = new JTable();
JScrollPane scrollPane = new JScrollPane(table);
JFrame frame = new JFrame();
frame.add(scrollPane); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-31T15:40:07.923

我在初始代码中注意到 frame.add(table); 将 'table' 更改为 'scrollPane' 就可以了。

# iphone - 如何使用 iOS 应用程序和 Windows 服务之间的事件进行通信？

> ID：10619054
> 
> 赞同：0
> 
> 时间：2012-05-16T12:56:43.840
> 
> 标签：iphone, ios, service, ibaction, iboutlet

我希望能够使用服务来识别 iOS 应用程序上发生的事件，然后根据该事件向 iOS 应用程序发送响应。

**这是一个场景：**

我有一个按钮和一个文本字段。

*   如果我按下按钮并且文本字段中没有输入，那将是一个“事件”，我需要识别并发送到 Windows Web 服务。

*   如果文本字段确实有输入并且我按下按钮，那将是一个不同的“事件”，需要识别并发送到 Windows Web 服务。

我不确定如何解决这个问题，所以我愿意接受建议。另外，我希望这尽可能高效。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:15:03.300

如果您只是询问如何检查文本字段是否包含任何内容，那么这样的事情应该可以工作（textField 的类型为 UITextField）：

```
NSString * myText = self.textField.text;

if (0 == [myText length]) {
  // no text, do something
  ...
} else {
  // text, do something else
  ...
} 
```

但是，如果您询问如何从 iOS 向 Web 服务发出请求，那么您可以查看许多教程（例如[MVCNetworking](http://developer.apple.com/library/ios/#samplecode/MVCNetworking/Introduction/Intro.html)）或查看类似[RESTkit](http://restkit.org/)的工具包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T18:55:36.567

选项1：

```
NSString * myText = [self.textField.text stringByTrimmingCharactersInSet: [NSCharacterSet whitespaceAndNewlineCharacterSet]];    

if (0 == [myText length]) {
  // call web service method 1:
  ...
} else {
  // call web service method 2:
  ...
} 
```

选项2：

调用您的 Web 服务方法，将 textField 的内容传递给它，让它处理繁重的工作，在应用程序端，只需使用 if-else 检查 Web 服务响应，并执行类似操作。

# asp.net - 搜索网格视图

> ID：10619056
> 
> 赞同：0
> 
> 时间：2012-05-16T12:56:45.497
> 
> 标签：asp.net

我现在有一个留言簿，显示“comment”、“comment_time”、“user”。我想在下面添加一个搜索框，然后按“用户”搜索网格视图，然后将数据绑定到下面的新网格视图。我受到严格的指示，让所有数据交互都通过 Web 服务传递。

我现在有一个 Web 方法来获取所有评论：

```
[WebMethod]
    public DataSet SearchDatabase(string query)
    {
        DataSet ds = new DataSet();
        string database = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|/dvd_forum.accdb;Persist Security Info=True";
        string queryStr = "SELECT * FROM Comments WHERE User LIKE '%query%'";
        OleDbConnection myConn = new OleDbConnection(database);
        OleDbDataAdapter myDataAdapter = new OleDbDataAdapter(queryStr, myConn);
        myConn.Open();
        myDataAdapter.Fill(ds, "Comments");
        myConn.Close();
        return ds;
    } 
```

这是前面的代码：

```
<asp:Label ID="Label3" runat="server" Text="Search"></asp:Label><asp:TextBox ID="TextBoxSearch"
    runat="server"></asp:TextBox><asp:Button ID="ButtonSearch" 
runat="server" Text="Search" onclick="ButtonSearch_Click" />
<asp:GridView ID="GridView2" runat="server"> 
```

后面的代码：

```
protected void ButtonSearch_Click(object sender, EventArgs e)
{
    string query = TextBoxSearch.Text;

    localhost.Service1 myws = new localhost.Service1();
    ds = myws.SearchDatabase(query);
    GridView2.DataSource = ds;
    GridView2.DataBind();
} 
```

它根本不做任何事情，页面刷新没有新的 GridView 或任何其他操作。

另一方面：我在同一页面上有另一个输入，带有必填字段验证器，除非我用一些文本填充输入，否则我不会搜索。我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:48:05.213

```
string queryStr = "SELECT * FROM Comments WHERE User LIKE '%"+query+"%'"; 
```

# java - 在 Postgresql 中未正确显示元音变音/变异元音（不同的文本类型和字符类型）

> ID：10619058
> 
> 赞同：1
> 
> 时间：2012-05-16T12:56:48.567
> 
> 标签：java, postgresql, encoding, heroku, playframework

我对变异元音和 postgresql 有疑问。Playframework 使用 UTF-8 编码，Postgresql 也是如此。然而，像 ÄÖÜ 这样的变异元音不能正确显示。它们对于普通字符串正确显示，这些字符串存储在 postgresql 中的“字符变化”类型中。但是这些都有限制，所以你需要“文本”类型来存储大字符串。在 Java 中，它们都是字符串，第二个带有 @Lob 注释。

问题是，存储在“文本”类型中的那些字符串没有正确显示，没有变音符号。关于可能是什么问题以及如何解决问题的任何线索？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:09:26.857

今天有同样的问题..只需删除 @Lob 注释。此外，您可以在 @Column 注释中指定列的类型，例如

```
@Basic
@Column(name = "text", columnDefinition = "text")
public String text; 
```

# php - 复制（）时PHP报告失败，但实际上复制了文件

> ID：10619061
> 
> 赞同：0
> 
> 时间：2012-05-16T12:56:58.183
> 
> 标签：php, linux

我有一个问题，当我尝试从 php 复制一些文件时，我得到它失败的响应，但文件实际上被复制了。这是一个问题，因为我记录了一条错误消息并在脚本失败时退出脚本，但脚本仍有很多工作要做。

我尝试了两种不同的复制方式：

```
if(!copy("/var/www/html/smicadmin.properties", "/etc/conf/".$new_dir."/smicadmin.properties"))

if(shell_exec("cp $src $dest")==null) 
```

为了让 SELinux 允许 apache 写入，我标记了“conf”：

```
chcon -R -t httpd_sys_script_rw_t /etc/conf 
```

有谁知道为什么会发生这种情况以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:04:35.853

shell_exec 将返回一个字符串，这个程序的输出。如果它返回一些“blablabla”并且您与 null 进行比较，它将是错误的。

使用函数执行

[http://www.php.net/manual/en/function.exec.php](http://www.php.net/manual/en/function.exec.php)

and compare the return_var with zero -- if success it will be equal to zero, other value in case of failure.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:03:51.407

也试试这些命令：

```
//http://es2.php.net/manual/en/function.passthru.php

passthru("cp $src $dest, $result");
var_dump($results); 
```

或者

```
//http://es2.php.net/manual/en/function.system.php

system("cp $src $dest", $retval);
var_dump($retval); 
```

# iphone - 如何在 Project Navigator 中自动显示

> ID：10619062
> 
> 赞同：28
> 
> 时间：2012-05-16T12:56:58.663
> 
> 标签：iphone, xcode

我想在 xcode 的项目导航器中显示当前编辑的文件

我知道项目导航器中的右键单击和显示

[如何在“项目导航器”面板上突出显示 XCode 4 中打开的文件？](https://stackoverflow.com/questions/6133225/how-to-highlight-opened-file-in-xcode-4-on-the-project-navigator-panel)

但这是一项手动任务

我希望它在每次切换文件时都显示出来——比如 Eclipse IDE 顶部的 2 个黄色箭头

我希望项目导航器始终突出显示当前编辑的文件。

谢谢，努尔

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-16T14:37:03.850

嗯...我没有你的问题的答案，我真的很想知道。

但是我知道比右键单击更好的东西，那就是：`⌘</kbd>-`shift`-`J``

你的手在键盘上，至少你不必拿鼠标......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-16T14:30:47.390

在项目导航器面板的底部“仅显示最近的文件”过滤器选项提供选择它以仅查看最近编辑的文件

# php - 如何仅显示数据库中表中的某些行？

> ID：10619076
> 
> 赞同：0
> 
> 时间：2012-05-16T12:58:06.027
> 
> 标签：php, mysql, zend-framework, forum

我正在使用 Zend Framework 和 phpMyAdmin (MySQL) 在 PHP 中创建一个留言板。我是 Zend Framework 的初学者，在 PHP 方面做得不多，所以请在你的答案中尽可能简单。

我已经在数据库中保存了留言板的结构（部分、下部分和下部分）。我需要显示论坛的部分及其相应的underSections。问题是 - 我如何在其下显示特定部分的下部分？

`IndexController.php`：

```
 public function indexAction()
{
    $sections = new Model_Sections();
    $this->view->sections = $sections->fetchAll();

    $undersections = new Model_Undersections();
    $this->view->undersections = $undersections->fetchAll();
} 
```

在此代码中，我获取所有部分和部分数据（id 和名称）。

数据库模型`Section.php`：

```
class Model_Sections extends Zend_Db_Table_Abstract
{
    protected $_name = 'sections';
} 
```

数据库模型`Undersection.php`：

```
class Model_Undersections extends Zend_Db_Table_Abstract
{
    protected $_name = 'undersections';
} 
```

主视图“index.phtml”中有关数据输出的片段：

```
<div class="section">
   <?php foreach($this->sections as $sections) : ?>

   <!-- Generates names of sections -->
   <h1><?php echo $this->escape($sections->section_name);?></h1>

      <!-- Generates names of undersections -->
      <?php foreach($this->undersections as $undersections) : ?>
         <div class="underSection">
            <h2>
              <a href=" ***link to some controller according to the undersection*** ">
                 <?php echo $this->escape($undersections->undersection_name);?>
              </a>
            </h2>
         </div>
      <?php endforeach; ?>
   <?php endforeach; ?>
 </div> 
```

目前它显示每个部分下的所有下部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:27:16.060

您的代码当前显示每个部分下的所有下部分的原因是因为您使用了嵌套的 for 循环，其中内部循环始终相同。即，您总是在相同的下节集合上进行迭代。您需要为sections 和undersections 定义一种父子关系的方式。

以下是我将如何大致构建它：

DB结构（表名：sections）：

```
id INT NOT NULL AUTO_INCREMENT
parentId INT DEFAULT 0
section_name TINYTEXT 
```

因此，*所有*部分的数据都将存在于同一个数据库表中。当您插入一个顶级部分时，您只需将 parentId 列保留为 0。当您插入一个下部分时，您将插入父部分的 id 值。

我还会更改您的模型，以便您没有 Model_Section 和 Model_Undersection。相反，在 Model_Section 类中有一个名为 getChildren() 的函数，它将向您返回属于该特定 Model_Section 实例的所有部分的集合。

控制器动作：

```
public function indexAction()
{
    $sections = new Model_Sections();
    $this->view->sections = $sections->fetchAll();
} 
```

查看脚本：

```
<div class="section">
   <?php foreach($this->sections as $sections) : ?>

   <!-- Generates names of sections -->
   <h1><?php echo $this->escape($sections->section_name);?></h1>

      <!-- Generates names of undersections -->
      <?php foreach($sections->getChildren() as $undersections) : ?>
         <div class="underSection">
            <h2>
              <a href=" ***link to some controller according to the undersection*** ">
                 <?php echo $this->escape($undersections->section_name);?>
              </a>
            </h2>
         </div>
      <?php endforeach; ?>
   <?php endforeach; ?>
 </div> 
```

注意使用 $sections->getChildren() 而不是 $this->undersections 的变化

您从中获得的最大好处是您的模型现在是完全递归的。您的下部分可以有自己的子部分，依此类推。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T08:36:38.973

您应该设置要选择的列：

```
class Model_Sections extends Zend_Db_Table_Abstract
{
    protected $_name = 'sections';
    public function getSections()
    {
        $select = $this->select()
            ->from($this->_name, array('col1', 'col2')); // set your columns
        return $this->fetchAll($select);
    }
} 
```

在控制器中：

```
$sections = new Model_Sections();
$this->view->sections = $sections->getSections(); 
```

# iphone - 带有状态栏的整个应用程序的圆角屏幕角

> ID：10619078
> 
> 赞同：3
> 
> 时间：2012-05-16T12:58:09.037
> 
> 标签：iphone, ios, cocoa-touch, uiwindow

如何在仍然显示状态栏的同时在屏幕上实现圆角？

在应用程序委托中，我将这些设置应用于窗口：

```
[self.window.layer setCornerRadius:10.0];
[self.window.layer setMasksToBounds:YES];
self.window.layer.opaque = NO; 
```

但在屏幕顶部，由于状态栏，我没有看到圆角。这是一个问题，因为我也需要应用程序中的状态栏。

谁能建议我如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:16:17.437

如果您想保留状态栏并仍然看到圆角边缘，则必须圆角视图的边缘而不是窗口。

在这种情况下，您的代码将几乎相同，而是应用于视图：

```
[self.view.layer setCornerRadius:10.0];
[self.view.layer setMasksToBounds:YES];
self.view.layer.opaque = NO; 
```

这将进入视图控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:08:32.017

要删除状态栏吗？或者你想绕过状态栏的角落？如果你想绕过状态栏的角落，快速简单的答案是你不能。如果要删除状态栏，这很简单：

**来自 Apple 类参考：**

> **setStatusBarHidden:withAnimation:**
> 
> 隐藏或显示状态栏，可选择为过渡设置动画。- `(void)setStatusBarHidden:(BOOL)hidden withAnimation:(UIStatusBarAnimation)animation Parameters`
> 
> hidden YES 隐藏状态栏，NO 显示状态栏。
> 
> 动画 一个常量，指示是否应该有动画，如果需要动画，是否应该淡入或淡出状态栏，或者是否应该将状态栏滑入或滑出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T13:17:22.393

在方法中添加以下行`viewWillAppear`。它将为视图提供圆润的外观。为此包括“QuartzCore”框架。

```
self.view.layer.cornerRadius = 10.0 
```

希望这可以帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-02T17:25:41.317

我知道这个问题很老，但只是把

```
func applicationDidBecomeActive(_ application: UIApplication) {
    window?.layer.cornerRadius = 10
    window?.clipsToBounds = true
    window?.backgroundColor = UIColor.black
} 
```

在您的 AppDelegate.swift 中，您的应用程序中到处都有圆角：D

# c++ - 用于搜索和索引的 C++ 框架，如 clucene

> ID：10619081
> 
> 赞同：1
> 
> 时间：2012-05-16T12:58:15.330
> 
> 标签：c++, indexing, search-engine

有没有人知道 clucene 的一些好的替代品作为 c++ 的搜索和索引框架，它有据可查且是最新的？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:59:29.580

你可以试试 Sphinx - [http://sphinxsearch.com/](http://sphinxsearch.com/)。

> Sphinx 是一个自由软件搜索引擎，设计时考虑到索引数据库内容。它目前支持 MySQL、PostgreSQL 和 ODBC 兼容的数据库作为本机数据源。其他数据源可以通过管道以自定义 XML 格式进行索引。它是根据 GNU 通用公共许可证第二版或专有许可证的条款分发的。

来源：[http ://en.wikipedia.org/wiki/Sphinx_%28search_engine%29](http://en.wikipedia.org/wiki/Sphinx_%28search_engine%29)

这也可能对您有用： [全文搜索引擎的比较 - Lucene、Sphinx、Postgresql、MySQL？](https://stackoverflow.com/questions/737275/comparison-of-full-text-search-engine-lucene-sphinx-postgresql-mysql)

# c# - 从 XML (WPF) 加载数据

> ID：10619084
> 
> 赞同：0
> 
> 时间：2012-05-16T12:58:29.727
> 
> 标签：c#, .net, xml, wpf, xaml

目前我正在直接从我的 xaml.cs 文件加载数据，但我现在想从 XML 文件加载它，因为我目前不知道如何做到这一点，我想知道人们是否可以帮助我，这些是我当前的文件：

```
enter code here

        //Create a viewmodel and add some data to it. 
        var viewModel = new MyViewModel();
        viewModel.Items.Add(new Data() { Name = "Yes", Type = "Yes", Selected = true });
        viewModel.Items.Add(new Data() { Name = "Yes", Type = "No", Selected = true });
        viewModel.Items.Add(new Data() { Name = "No", Type = "No", Selected = true });
        viewModel.Items.Add(new Data() { Name = "Yes", Type = "No", Selected = true });
        viewModel.Items.Add(new Data() { Name = "No", Type = "No", Selected = true });
        viewModel.Items.Add(new Data() { Name = "No", Type = "No", Selected = true });
        viewModel.Items.Add(new Data() { Name = "No", Type = "No", Selected = true });
        viewModel.Items.Add(new Data() { Name = "No", Type = "No", Selected = true });
        viewModel.Items.Add(new Data() { Name = "No", Type = "No", Selected = true });
        viewModel.Items.Add(new Data() { Name = "Unknown", Type = "No", Selected = true });
        viewModel.Items.Add(new Data() { Name = "Yes", Type = "No", Selected = true });
        viewModel.Items.Add(new Data() { Name = "Yes", Type = "No", Selected = true });
        viewModel.Items.Add(new Data() { Name = "No", Type = "No", Selected = true });
        viewModel.Items.Add(new Data() { Name = "Yes", Type = "No", Selected = true });
        viewModel.Items.Add(new Data() { Name = "No", Type = "No", Selected = true });
        viewModel.Items.Add(new Data() { Name = "No", Type = "No", Selected = true });

        //Set the window's datacontext to the ViewModel.  This will make binding work. 
        this.DataContext = viewModel;

    }
}

//This is the ViewModel used to bind data
public class MyViewModel
{
    //This could just be a List<Data> but ObservableCollection<T> will automatically 
    //update UI when items are added or removed from the collection. 
    public ObservableCollection<Data> Items { get; set; }

    public MyViewModel()
    {
        Items = new ObservableCollection<Data>();
    }
}

//Just a sample class to hold the data for the grid. 
//This is the class that is contained in the ObservableColleciton in the ViewModel 
public class Data
{
    public string Name { get; set; }
    public string Type { get; set; }
    public bool Selected { get; set; }
}

//This is an example converter.  It looks to see if the element is set to "Yes"  
//If so, it returns Visibility.Collapsed.  Otherwise, it returns Visibility.Visible. 
public class YesToVisibilityConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value != null && value is string)
        {
            var input = (string)value;
            if (string.Equals(input, "Yes", StringComparison.CurrentCultureIgnoreCase))
            {
                return Visibility.Collapsed;
            }
            else
            {
                return Visibility.Visible;
            }
        }

        return Visibility.Visible;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:22:06.187

您可以利用[Xlinq](http://msdn.microsoft.com/en-us/library/bb387098.aspx) 对 XML 数据进行序列化/反序列化。

例如：

序列化

```
 public static String ToXml(ObservableCollection<Data> items)
    {
        try
        {
            XElement _items = new XElement("Root",
                                from item in items()
                                select new XElement("Item",
                                    new XElement("Name", item.OrderId),
                                    new XElement("Type", item.OrderType),
                                    new XElement("Selected", item.Security)
                                    )
                                    );

            return _items.ToString();

        }
        catch (Exception ex)
        {

        }
        return String.Empty;
    } 
```

反序列化

```
public static ObservableCollection<Data> FromXml(String data)
{
    ObservableCollection<Data> dataCollection = default(ObservableCollection<Data>);
    try
    {
        XElement _items = XElement.Parse(data);
        var items = _items.Elements("Item").Select(i
            =>
            new Data
            {
                Name = i.Element("Name").Value,
                    Selected = bool.Parse(i.Element("Selected").Value),
                    Type = i.Element("Type").Value,
            }
        ).ToArray();

        if (items != null)
        {
            dataCollection = new ObservableCollection<Data>();
            foreach (var item in dataCollection)
            {
                dataCollection.Add(item);
    }
            return dataCollection;
        }
    }
    catch (Exception e)
    {
    }
    return null;
} 
```

您可以将上述函数与[File.ReadAllText](http://msdn.microsoft.com/en-us/library/system.io.file.readalltext.aspx)、[File.WriteAllText](http://msdn.microsoft.com/en-us/library/system.io.file.writealltext.aspx)一起使用，将字符串读/写到文件中。

# java - 在这里拆分字符串的好方法是什么？

> ID：10619086
> 
> 赞同：7
> 
> 时间：2012-05-16T12:58:33.770
> 
> 标签：java, regex, string, optimization

我有以下字符串：是可选的，所以
`A:B:1111;domain:80;a;b`
也是有效的输入。也是可选的， 或者也是有效的输入 我想要的最终结果是： `A``B:1111;domain:80;a;b`
`:80``B:1111;domain;a;b``:1111;domain;a;b`
`String[]`

```
s[0] = "A";  
s[1] = "B";  
s[2] = "1111";  
s[3] = "domain:80"  
s[4] = "a"  
s[5] = "b" 
```

我这样做如下：

```
List<String> tokens = new ArrayList<String>();  
String[] values = s.split(";");  
String[] actions = values[0].split(":");   

for(String a:actions){  
    tokens.add(a);  
}  
//Start from 1 to skip A:B:1111
for(int i = 1; i < values.length; i++){  
    tokens.add(values[i]);  
}  
String[] finalResult = tokens.toArray(); 
```

我想知道有没有更好的方法来做到这一点？我还能如何更有效地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:08:21.377

这里没有太多效率问题，我所看到的都是*线性*的。

无论如何，您*可以*使用正则表达式或手动标记器。

你可以避开这个清单。`values`你知道and的长度`actions`，所以你可以做

```
String[] values = s.split(";");  
String[] actions = values[0].split(":");
String[] result = new String[actions.length + values.length - 1];
System.arraycopy(actions, 0, result, 0, actions.legnth);
System.arraycopy(values, 1, result, actions.length, values.length - 1);
return result; 
```

它应该是相当有效的，除非你坚持`split`自己实施。

未经测试的低级方法（确保在使用前进行单元测试和基准测试）：

```
// Separator characters, as char, not string.
final static int s1 = ':';
final static int s2 = ';';
// Compute required size:
int components = 1;
for(int p = Math.min(s.indexOf(s1), s.indexOf(s2));
  p < s.length() && p > -1;
  p = s.indexOf(s2, p+1)) {
    components++;
}
String[] result = new String[components];
// Build result
int in=0, i=0, out=Math.min(s.indexOf(s1), s.indexOf(s2));
while(out < s.length() && out > -1) {
  result[i] = s.substring(in, out);
  i++;
  in = out + 1;
  out = s.indexOf(s2, in);
}
assert(i == result.length - 1);
result[i] = s.substring(in, s.length());
return result; 
```

注意：此代码以疯狂的方式进行了优化，它`:`只会在第一个组件中考虑 a。处理最后一个组件有点棘手，就像`out`value一样`-1`。

我通常**不会**使用最后一种方法，除非性能和内存非常重要。很可能其中仍然存在一些错误，并且代码相当不可读，特别是与上面的代码相比。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:06:17.710

通过对可接受字符的一些假设，此正则表达式提供验证以及拆分为您想要的组。

```
Pattern p = Pattern.compile("^((.+):)?(.+):(\\d+);(.+):(\\d+);(.+);(.+)$");
Matcher m = p.matcher("A:B:1111;domain:80;a;b");
if(m.matches())
{
    for(int i = 0; i <= m.groupCount(); i++)
        System.out.println(m.group(i));
}
m = p.matcher("B:1111;domain:80;a;b");
if(m.matches())
{
    for(int i = 0; i <= m.groupCount(); i++)
        System.out.println(m.group(i));
} 
```

给出：

```
A:B:1111;domain:80;a;b // ignore this
A: // ignore this
A // This is the optional A, check for null
B
1111
domain
80
a
b 
```

和

```
B:1111;domain:80;a;b // ignore this
null // ignore this
null // This is the optional A, check for null
B
1111
domain
80
a
b 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T13:03:04.527

你可以做类似的事情

```
String str = "A:B:1111;domain:80;a;b";
String[] temp;

/* delimiter */
String delimiter = ";";
/* given string will be split by the argument delimiter provided. */
temp = str.split(delimiter);
/* print substrings */
for(int i =0; i < temp.length ; i++)
System.out.println(temp[i]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T13:03:14.547

除非这是您代码中的瓶颈，并且您已经验证不必太担心效率，因为这里的逻辑是合理的。您可以避免创建临时数组列表，而是直接创建您知道所需大小的数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T13:11:18.937

如果您想将域和端口保持在一起，那么我相信您将需要您需要两个拆分。您也许可以使用一些正则表达式魔术来做到这一点，但我怀疑您是否会从中看到任何真正的性能提升。

如果您不介意拆分域和端口，则：

```
 String s= "A:B:1111;domain:80;a;b";
  List<String> tokens = new ArrayList<String>();
  String[] values = s.split(";|:");

  for(String a : values){
      tokens.add(a);
  } 
```

# python - 正则表达式替换字符串，同时保存部分字符串

> ID：10619096
> 
> 赞同：2
> 
> 时间：2012-05-16T12:59:13.877
> 
> 标签：python, regex, django

我想知道是否可以在更换时保留一些现有价值。例子：

**原来的：**

```
{u'America': u'A'} 
```

**更换后：**

```
{u'America': _(u'A')} 
```

`u\'[w]\'`正确选择值，但是如何保存`'A'`到替换值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:04:28.567

使用捕获组：

```
In [13]: s = "{u'America': u'A'}"

In [14]: re.sub(r"(u'[\w]')", r"_(\1)", s)
Out[14]: "{u'America': _(u'A')}" 
```

在这里，`(...)`捕获括号内的内容，`\1`并将其插入替换字符串中。

# javascript - 在 jQuery 中选择 DOM 元素 - 动态添加

> ID：10619103
> 
> 赞同：2
> 
> 时间：2012-05-16T12:59:31.110
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

在 jQuery 中，您可以使用`.live()`、`.on()`和`.delegate()`将事件绑定到页面上尚未添加的 DOM 元素。

是否可以使用类似的技术来选择尚未添加的 DOM 元素以应用某些功能？

例如，我想选择所有具有类 .req 并包含一个名为“必需”的水印的输入元素。

我已经使用 jquery 插件来做水印，但不能处理动态添加到页面的 DOM 元素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T13:00:53.637

您可以使用[突变事件](https://developer.mozilla.org/en/DOM/Mutation_events)( `DOMNodeInserted`)，但它们已被弃用。
因此，除非您想使用它们或每 X 次拉动 DOM，否则**答案是否定的**

牵引方式：

```
setInterval(function(){
    // Do what you want here.
    $('.req').watermark("Required");
}, 500); // evey half a second. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:02:16.723

抱歉不行。事件委托之所以有效，是因为您在技术上绑定到已经存在的 DOM 节点，因此最终触发事件的元素还不存在并不重要。有 DOM 级别 2 事件正在进行中（并且已经在某些浏览器中实现）可以让您对正在创建的新 DOM 节点或正在操作的现有节点做出反应，但是在浏览器支持更好之前，实际上没有任何选项除了重复轮询 DOM 来寻找新节点，这是非常低效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T16:49:42.527

我知道这篇文章很旧，但我相信这可以使用 jQuery [find](http://api.jquery.com/find/)方法来完成。

[http://jsfiddle.net/vreTG/1/](http://jsfiddle.net/vreTG/1/)

```
// Generate some dynamic content
var dyn = '<ul>';
dyn += '<li class="req">Name</li>';
dyn += '<li class="req">Address</li>';
dyn += '<li class="opt">Phone Number</li>';
dyn += '<ul>';

// Add to DOM
$("#container").html(dyn);

// Find required fields
$("#container").find(".req")
    .prepend("* ")
    .css("color", "#900"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T13:15:43.597

答案是，这取决于您如何将元素插入 DOM。如果您通过 jQuery 插入它们，那么您可以使用诸如[livequery](https://github.com/brandonaaron/livequery)之类的插件。如您[所见](https://github.com/brandonaaron/livequery/blob/master/jquery.livequery.js#L221)，它与核心操作方法挂钩，并且无论何时调用它们，它都会运行在实时查询中注册的回调。如果您通过 vanilla JS 插入元素，那么正如其他人所说，DOM 变异事件已被弃用且不可靠，因此轮询将是您的最佳选择。

# java - jpa级联坚持多对一

> ID：10619104
> 
> 赞同：0
> 
> 时间：2012-05-16T12:59:34.020
> 
> 标签：java, hibernate, jpa, persistence

我有两个 JPA 实体（帐户和人员），具有双向关系：

```
@Entity
@Table(name = "ACCOUNTS")
@DataCache(enabled = false)
public class Account
{
    ....
    @ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL)
    @JoinColumn(name = "ID_OWNER", nullable = false)
    private Person owner;
    ...
}

@Entity
@Table(name = "OWNERS")
@DataCache(enabled = false)
public class Person {
    ...
    @Column(name = "HAS_ACCOUNTS", nullable = false, columnDefinition = "CHAR(1)")
    private char hasAccounts;

    @OneToMany(mappedBy = "owner")
    private Set<Accpunt> comments = new LinkedHashSet<Account>(3);
    ...
} 
```

当我持久化一个人时，我不想持久化所有帐户，但是当我持久化一个帐户时，我想更新人员属性 hasAccounts，因此我还需要更新人员。

我做了以下步骤：

*   创建一个人
*   坚持这个人
*   创建一个帐户
*   修改所有者（之前创建的
*   持久化帐户（我希望它会自动合并人员）

```
Person p = new Person();
em.persist(p);
Account a = new Account();
a.setOwner(p);
p.setHasAccounts('Y');
em.persist(a); 
```

我得到了这个例外：

```
 javax.ejb.EJBTransactionRolledbackException: org.hibernate.PersistentObjectException: detached entity passed to persist: Person 
```

（我将 JPA 1.0 与 Hibernate 一起使用）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-06T22:25:38.287

尝试以下操作：

```
Person p = new Person();
Account a = new Account();

p.getComments().add(a);
p.setHasAccounts('Y');

em.persist(p); 
```

# sql-server - 实体框架：创建实体并在没有主键的表中插入数据

> ID：10619108
> 
> 赞同：1
> 
> 时间：2012-05-16T12:59:41.627
> 
> 标签：sql-server, entity-framework, primary-key, sqlconnection

有几个类似的问题和答案是：最好添加一个主键......

问题是：是否可以使用实体框架在没有主键的表中插入数据？

或者我必须使用`SqlConnection`类？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T13:06:52.840

不，EF 不可能。EF 要求每个表都有一个主键。如果它没有主键，您必须以某种方式欺骗 EF，以便它认为某些列是主键 - 这需要手动修改 EDMX 文件。

通常，如果您的表中没有一组列唯一标识记录，则不应使用 EF 处理此类表，因为 EF 始终要求唯一标识。这也适用于数据库视图。

# c# - 正确的 XPath 产生空结果

> ID：10619112
> 
> 赞同：2
> 
> 时间：2012-05-16T13:00:08.210
> 
> 标签：c#, xml, xpath

我正在尝试根据节点的 id 从 html 页面中选择一个节点。由于外部限制，我必须使用 XPath 来做到这一点。

我想获取论坛帖子的容器元素，在这种情况下是 Delphi-PRAXiS。我附上了一个简单的页面示例。

我需要的节点是一个 id 为“posts”的 div，所以我的查询是`//div[@id='posts']`. 问题是，结果是一个空列表。如果我查询使用`//*[@id='posts']`我得到我的节点。

我使用框架的 XmlDocument 类进行了尝试。

最终我想使用[Html Agility Pack](http://htmlagilitypack.codeplex.com)（它使用与 XmlDocument 相同的 XPath 类），但如果我使用它，无论查询字符串如何，我都不会得到任何结果。

我知道查询字符串是正确的，所以我的猜测是解析器有问题。但不知何故，我怀疑微软会发布一个损坏的 XPath 解析器。

有什么建议么？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="de">  
  <head>    
    <title>Some title</title>  
  </head>  

  <body>    
    <div>          
      <div class="page">                 
        <div id="dp-page" class="round-all">          
          <div class="dpbox">               
            <div id="posts">
              Here we go!               
            </div>            
          </div>            
        </div>          
      </div>        
    </div>  
  </body>
</html> 
```

我发现了另一个线索：如果节点`<a name="poststop" id="poststop"></a>`存在于 xml 中，则查询失败，否则查询成功。但为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:07:55.587

XHTML 元素位于`http://www.w3.org/1999/xhtml`命名空间中，因此您需要在选择器中指定它。您的代码应该看起来像这样（`XDocument`在涉及命名空间的情况下使用会更容易一些）。

```
var nsmgr = new XmlNamespaceManager(doc.NameTable);
nsmgr.AddNamespace("xhtml", "http://www.w3.org/1999/xhtml");
var nodelist = doc.SelectNodes("//xhtml:div[@id='posts']", nsmgr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:12:05.283

虽然我不推荐它，但您也可以使用 XmlTextReader 加载没有命名空间的文档

```
// Create XML data element
xmlData = new XmlDocument();

// Read using XmlTextReader to strip namespaces
using (XmlTextReader tr = new XmlTextReader(sourceFile))
{
    tr.Namespaces = false;
    xmlData.Load(tr);
} 
```

我将其用于一些文档处理，以确保在使用数据库配置数据搜索字段时无需担心命名空间。

# mysql - ruby：与 mysql 的连接在单个查询后关闭

> ID：10619113
> 
> 赞同：0
> 
> 时间：2012-05-16T13:00:08.970
> 
> 标签：mysql, ruby

我正在编写一个包含多个选择查询的 ruby​​ 脚本。在脚本的开头，我正在初始化一个新的数据库连接：

```
db = Mysql.new 'localhost', 'root', 'pass', 'mydb', 3308 
```

第一个选择查询成功，但是当它到达第二个时出现以下错误：

在“查询”中：查询：未连接（Mysql::Error）

我可以通过在每个查询之前复制连接初始化行来解决这个问题，但我真的不认为这是正确的解决方案。

谢谢，李

添加我的完整脚本（我是新手，很抱歉这种悲惨的风格）：（用更简单的复制替换原始脚本）：在下面的代码中，如果我注释掉“SELECT”查询并只留下“INSERT INTO”查询，一切正常。但是，如果我尝试按原样运行代码，则会收到上述错误。

```
#!/usr/local/bin/ruby -w 

require "mysql"

dbname = "sample_db"

m = Mysql.new 'localhost', 'root', 'passw', 'sample_db', 3306

m.select_db(dbname)

m.query("CREATE TABLE words         
     (          
       german varchar(30),          
       english varchar(30),          
       french varchar(30)         
     )"        
   )

m.query("INSERT INTO words VALUES('Adler', 'eagle', 'aigle')")

results = m.query("SELECT german, english FROM words")

m.query("INSERT INTO words VALUES('Haus', 'house', 'maison')")

m.close 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:57:11.783

找到答案：

[http://halyph.blogspot.com/2009/08/rails-23-migration-issues-with-mysql_26.html](http://halyph.blogspot.com/2009/08/rails-23-migration-issues-with-mysql_26.html)

似乎这是一个常见问题，我只需要将 libmysql.dll 替换为：http: [//instantrails.rubyforge.org/svn/trunk/InstantRails-win/InstantRails/mysql/bin/libmySQL.dll](http://instantrails.rubyforge.org/svn/trunk/InstantRails-win/InstantRails/mysql/bin/libmySQL.dll)

然后重新启动我的mysql服务。请注意，我已经替换了我的 dll（在出现安装问题后），但似乎只有 ruby​​forge 的 dll 解决了这个问题

请注意，此问题的另一个症状是零星的分段错误。更换dll后这些也消失了

# graph-algorithm - 是否有“简化”依赖图的算法？

> ID：10619116
> 
> 赞同：8
> 
> 时间：2012-05-16T13:00:20.807
> 
> 标签：graph-algorithm, simplify

我的问题很简单，但我真的不知道它的名字，因此，我自己很难找到解决方案：如何简化依赖关系图，如（其中`->`手段取决于）：

> A -> B -> C & A -> C

到

```
A -> B -> C 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T13:18:36.610

您正在寻找[传递归约](http://en.wikipedia.org/wiki/Transitive_reduction)。

有关算法的讨论，请参阅[传递闭包和归约](http://www8.cs.umu.se/kurser/TDBAfl/VT06/algorithms/BOOK/BOOK4/NODE163.HTM)。

# entity-framework - 如何创建包括标记类名称和文本字符串的 LINQ to Entities 查询

> ID：10619121
> 
> 赞同：0
> 
> 时间：2012-05-16T13:00:51.783
> 
> 标签：entity-framework, linq-to-entities, asp.net-mvc-4

我的 ASP.NET MVC 项目有一些

> 章节类

和相关的

> 标记类

它们具有多对多的关系，虽然一个标签有多个章节，而且一章有多个标签。

我的问题是：我想通过`tag.title`在这个结构中使用来进行查询，但 LINQ 不允许对象；它只获取变量，例如`string`，`int`...等。

我觉得有点愚蠢，但我无法弄清楚这个基本的事情:(（也许我必须休息一下，让它在我的脑海中清晰）

我的模型是：

```
public partial class Chapter
{
    public string Id { get; set; }
    public string Subject { get; set; }
    public string Content { get; set; }
    public virtual ICollection<Tag> Tags { get; set; }
}

public partial class Tag
{
    public int? TagId { get; set; }
    public string Title { get; set; }
    public int CallCount { get; set; }
    public virtual ICollection<Chapter> Chapters { get; set; }
} 
```

也适用于分贝：

```
public class DataContext : DbContext
{
    public DbSet<Chapter> Chapters { get; set; }
    public DbSet<Tag> Tags { get; set; }
} 
```

所以我们开始：

```
var tag = (from t in db.Tags where t.Title.Contains(search_word)).FirstOrDefault();
var chapters = (from c in db.Chapters where (m.Title.Contains(search_word) || m.Tags.Contains(tag)) select c).ToList(); 
```

正如我上面解释的那样；它给

> “你应该在查询中使用字符串、guid、int ...”

此查询的错误。我认为我犯了一个逻辑上的失败，但我的大脑停止了反应......

简要地; 我想按标签名称搜索，如果您有其他方法，我会很高兴听到它。

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:35:11.040

你要：

```
var tag = (from t in db.Tags 
           where t.Title.Contains(search_word)
           select t).FirstOrDefault();
var chapters = (from c in db.Chapters 
                where m.Title.Contains(search_word) 
                    || m.Tags.Any(t => t.TagId == tag.TagId)
                select c).ToList(); 
```

# php - Amazon S3 PUT 错误...BadDigest？

> ID：10619122
> 
> 赞同：1
> 
> 时间：2012-05-16T13:00:52.157
> 
> 标签：php, amazon-s3, amazon-web-services

所以我有这个脚本，它已经把文件放在 S3 上没问题。但我注意到的是，当我使用一个有空格的文件时，如果我只保留名称，它会失败并给我一个“BadDigest”错误，如果我对其执行 str_replace 并删除所有“-”， “_”和“”我收到“RequestTimeout”错误。

但是，如果我更改计算机上的名称并上传它可以正常工作......所以我认为字符是原因。

我如何清理它以使其工作？我看到可能存在 UTF8 问题，但不知道如何纠正它。

```
$s3 = new AmazonS3();

$response = $s3->create_object(
    'bucketName',
    'userFiles/marie 123.jpg',
    array(
       'fileUpload'  => '/var/www/uploads/marie 123.jpg',
       'acl'         => AmazonS3::ACL_OPEN,
       'contentType' => 'image/jpeg',
       'storage'     => AmazonS3::STORAGE_STANDARD,
    )
);

print_r($response); die(); 
```

# drupal - Drupal 7 - 图像模块和贡献模块

> ID：10619125
> 
> 赞同：0
> 
> 时间：2012-05-16T13:00:57.883
> 
> 标签：drupal, image-processing, drupal-7

我在依赖项中编写了一个带有“图像”的模块。但我不能使用 image.gd.php Apache 日志中的函数：调用未定义函数 image_gd_save()

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:10:13.897

如果您在图像/系统模块的正常操作之外执行此操作，则需要确保首先包含相关文件：

```
module_load_include('inc', 'system', 'image.gd'); 
```

# php - 确保字符串是有效的 CSS ID 名称

> ID：10619126
> 
> 赞同：6
> 
> 时间：2012-05-16T13:00:58.667
> 
> 标签：php, css

我有一堆数据库记录（没有 auto_increment ID 或其他类似的东西）呈现为一个列表，而且我需要用唯一的`id`.

我可以在循环中添加一个正在运行的计数器并完成它，但不幸的是，这个 ID 需要在整个站点中是可交叉引用的，但是列表是有序或过滤的。

因此，我想到了将记录标题作为一部分包含在内`id`（带有前缀，因此它不会与布局元素发生冲突）。

如何`id`以万无一失的方式将字符串转换为名称，使其永远不会包含会破坏 HTML 或不能用作有效 CSS 选择器的字符？

例如;

```
Title ==> prefix_title
TPS Report 2010 ==> prefix_tps_report_2010
Mike's "Proposal" ==> prefix_mikes_proposal
#53: Míguèl ==> prefix_53_miguel 
```

标题总是足够多样化以避免冲突，并且永远不会包含任何非西方角色。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-07T12:14:58.613

我需要一个类似的 Deeplink Anchors 解决方案。

发现这很有用：

```
function seoUrl($string) {
    //Lower case everything
    $string = strtolower($string);
    //Make alphanumeric (removes all other characters)
    $string = preg_replace("/[^a-z0-9_\s-]/", "", $string);
    //Clean up multiple dashes or whitespaces
    $string = preg_replace("/[\s-]+/", " ", $string);
    //Convert whitespaces and underscore to dash
    $string = preg_replace("/[\s_]/", "-", $string);
    return $string;
} 
```

信用：[https ://stackoverflow.com/a/11330527/3010027](https://stackoverflow.com/a/11330527/3010027)

*PS：Wordpress-用户看这里：[https ://codex.wordpress.org/Function_Reference/sanitize_title](https://codex.wordpress.org/Function_Reference/sanitize_title)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:33:10.667

您根本不需要使用 HTML`id`属性。您可以使用[HTML5 data-* 属性](http://html5doctor.com/html5-custom-data-attributes/)来存储用户定义的值。这是一个例子：

```
<ul class="my-awesome-list">
    <!-- PHP code, begin a for/while loop on rows -->
    <li data-rowtitle="<?php echo json_encode($row["title"]); ?>">
        <?php echo $row["title"]; ?>
    </li>
    <!-- PHP loop end -->
</ul> 
```

然后，在您的 jQuery 代码中，您可以使用该[`$.fn.data`](http://api.jquery.com/data/)方法访问 data-* 值

```
$(".my-awesome-list li").each(function(){
     var realTitle = $(this).data('rowtitle');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-05T17:13:50.637

查看[W3 规范](https://www.w3.org/TR/CSS21/syndata.html#characters)，ids 和 classes 可以包含：

> 只有字符 [a-zA-Z0-9] (...) 加上连字符 (-) 和下划线 (_)；它们不能以数字或连字符后跟数字开头

请注意，接受其他一些字符（为简单起见，我省略了）。所以我用这个：

```
// We must be careful not to replace into an invalid string,
// thus adding 'a' in some cases and doing a second replace.
string.replace(/(^-\d-|^\d|^-\d|^--)/,'a$1').replace(/[\W]/g, '-'); 
```

请注意，您最终可能会得到最初不同的相同字符串：如果您对此有疑问，则必须依赖更高级的替换功能。

# c++ - 为什么静态常量成员不能出现在像'switch'这样的常量表达式中

> ID：10619129
> 
> 赞同：14
> 
> 时间：2012-05-16T13:01:02.890
> 
> 标签：c++, gcc, constants, switch-statement

我有一些静态常量成员的以下声明

。H

```
class MyClass : public MyBase
{
public:
    static const unsigned char sInvalid;
    static const unsigned char sOutside;
    static const unsigned char sInside;
    //(41 more ...)
} 
```

.cpp

```
const unsigned char MyClass::sInvalid = 0;
const unsigned char MyClass::sOutside = 1;
const unsigned char MyClass::sInside = 2;
//and so on 
```

在某些时候，我想在开关中使用这些值，例如：

```
unsigned char value;
...
switch(value) {
    case MyClass::sInvalid : /*Do some ;*/ break;
    case MyClass::sOutside : /*Do some ;*/ break;
    ...
} 
```

但我收到以下编译器错误：*错误：'MyClass::sInvalid' cannot appear in a constant-expression*。

我已经阅读了其他 switch-cannot-appear-constant-stuff 并没有为我找到答案，因为我不明白为什么这些`static const unsigned char`不是常量表达式。

我正在使用 gcc 4.5。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-16T13:06:35.993

你看到的问题是由于这个事实

```
static const unsigned char sInvalid; 
```

不能是编译时常量表达式，因为编译器不知道它的值。像这样在标题中初始化它们：

```
class MyClass : public MyBase
{
public:
    static const unsigned char sInvalid = 0;
    ... 
```

它会起作用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-16T13:04:54.760

这些值确实是`const`，但它们不是**编译时常量**。

条件在`switch`编译时解决，而不是在运行时解决。您可以初始化`sInvalid`为任何值，只要它只有一次，并且`switch`直到运行时才会知道它。

似乎您最好使用`enum`s 而不是`static`常量。除了它可以工作之外，它似乎更适合设计。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T13:35:33.923

您可以使用枚举技巧使它们成为编译时常量：

```
class MyClass 
{
public:
    enum {
        sInvalid,
        sOutside,
        sInside,
        //(41 more ...)
    };
}; 
```

在您的代码中，您仍然可以使用枚举来分配无符号字符，如下所示：

```
int main(int argc, char *argv[])
{
    unsigned char buf[32];
    buf[0] = MyClass::sInvalid; //int to unsigned char
    return buf[0]; //Cast back to int (and avoid a warning a -Wall)
} 
```

并`MyClass::sInvalid`在您的 swith 语句中使用。

# xml - com.google.gwt.xml.client.XMLParser 可以配置为禁止 doctype 吗？

> ID：10619134
> 
> 赞同：0
> 
> 时间：2012-05-16T13:01:13.613
> 
> 标签：xml, gwt, xml-parsing, dtd

我的问题是关于 google 的 XML Parser：com.google.gwt.xml.client.XMLParser。可以将其配置为根本不允许外部 doctype 或 doctype 吗？

据我了解，SAXParser 具有 setFeature(" [http://apache.org/xml/features/disallow-doctype-decl](http://apache.org/xml/features/disallow-doctype-decl) ", true)的选项

gwt解析器中有这样的东西吗？我在哪里可以找到 API？任何帮助，将不胜感激？

谢谢，塔尔

答：
GWT 正在将 java 代码翻译成 javscript，因此代码最终在客户端执行。GWT 依赖于浏览器来解析 XML。在 web 中寻找，javadocs 似乎没有这个功能，这个解析器是一个非常简单的 DOM 工具，没有 SAX ，没有外部 DTD 和 XPath ，因此不会有外部实体问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T07:17:35.797

GWT 正在将 java 代码转换为 javscript，因此代码最终在客户端执行。GWT 依赖于浏览器来解析 XML。在 web 中寻找，javadocs 似乎没有这个功能，这个解析器是一个非常简单的 DOM 工具，没有 SAX ，没有外部 DTD 和 XPath ，因此不会有外部实体问题。

# c++ - 如何使用 valgrind 3.7.0 打印内存泄漏根本原因的行号？

> ID：10619144
> 
> 赞同：0
> 
> 时间：2012-05-16T13:02:01.580
> 
> 标签：c++, c, valgrind

输出格式显示堆栈，因此很难找到根本原因。

```
 ==21663== Invalid read of size 4
==21663==    at 0x4448117: iurcall_init_rlmgt_IsAllAlcapSuccess(Iurcall_Init_CallCtx_t*) (iurcall_init_rlmgt_p.cc:6319)
==21663==    by 0x47D98DD: iurcall_init_rlmgt_IsAllAlcapSuccess_Test_return_1_when_edchMacD_flow_ctx_not_exist_and_alcapEstablish_is_FALSE_Test::TestBody() (iurcall_init_rlmgt_p_test.cc:373)
==21663==    by 0x8BCAB27: testing::Test::Run() (gmock-gtest-all.cc:3436)
==21663==    by 0x8BD1966: testing::internal::TestInfoImpl::Run() (gmock-gtest-all.cc:3655)
==21663==    by 0x8BD1AA8: testing::TestCase::Run() (gmock-gtest-all.cc:3761)
==21663==    by 0x8BD1D96: testing::internal::UnitTestImpl::RunAllTests() (gmock-gtest-all.cc:5365)
==21663==    by 0x8BD1F21: testing::UnitTest::Run() (gmock-gtest-all.cc:5028)
==21663==    by 0x4820149: Gtest_initialisation(int, char**) (iurcall_init_gtest_main.cc:49)
==21663==    by 0x808E500: main (bosinit_config_template.h:439)
==21663==  Address 0xa8190e4 is 44 bytes inside a block of size 56 free'd 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:32:23.140

这个 Valgrind 输出看起来不完整。它应该类似于[这个问题](https://stackoverflow.com/q/9891767/72178)，第二个调用堆栈在`Address 0xa8190e4 is 44 bytes inside a block of size 56 free'd`.

这个调用堆栈是问题的根本原因。这不是内存泄漏。您正在尝试使用已释放的对象。第二个调用堆栈是对象被释放的地方，第一个是它被使用的地方。

# java - 应用程序在计数和对话框上崩溃

> ID：10619145
> 
> 赞同：1
> 
> 时间：2012-05-16T13:02:07.850
> 
> 标签：java, android

我正在使用以下代码。

```
public class MyCount extends CountDownTimer
   {

        public MyCount(long millisInFuture, long countDownInterval) 
        {
            super(millisInFuture, countDownInterval);
        }

        @Override
        public void onFinish() 
        {
             displayAlertForRestart();
        }

        @Override
        public void onTick(long millisUntilFinished) 
        {
            counter.setText("Time Left: " + millisUntilFinished/1000 + " sec");
        }

     }

   public void displayAlertForRestart()
   {
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setCancelable(true);
    builder.setMessage("Do you want to Restart?");
    builder.setTitle("Game Over");
    builder.setInverseBackgroundForced(true);
    builder.setPositiveButton("Yes", new DialogInterface.OnClickListener()
    {
      public void onClick(DialogInterface dialog, int which) {

            Intent myIntent = new Intent(context,Level.class);
            startActivity(myIntent);
            dialog.dismiss();
            finish();
      }  
    });
    builder.setNegativeButton("No", new DialogInterface.OnClickListener() {

      public void onClick(DialogInterface dialog, int which) {
        dialog.dismiss();
        finish();

      }
    });
    AlertDialog alert = builder.create();
    alert.show();
   } 
```

LogCat 错误：错误发生在 `alert.show();`

```
36: E/AndroidRuntime(9829): android.view.WindowManager$BadTokenException: Unable to add window -- token android.os.BinderProxy@43cf1e38 is not valid; is your activity running? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:11:09.363

像这样更改您的代码

```
public class MyCount extends CountDownTimer
   {

   Context mContext;

        public MyCount(long millisInFuture, long countDownInterval,Context context) 
        {
            super(millisInFuture, countDownInterval);

            mContext=context;
        }

        @Override
        public void onFinish(Context context) 
        {
             displayAlertForRestart(context);
        }

        @Override
        public void onTick(long millisUntilFinished) 
        {
            counter.setText("Time Left: " + millisUntilFinished/1000 + " sec");
        }

     }

   public void displayAlertForRestart(Context context)
   {
    AlertDialog.Builder builder = new AlertDialog.Builder(context);
    builder.setCancelable(true);
    builder.setMessage("Do you want to Restart?");
    builder.setTitle("Game Over");
    builder.setInverseBackgroundForced(true);
    builder.setPositiveButton("Yes", new DialogInterface.OnClickListener()
    {
      public void onClick(DialogInterface dialog, int which) {

            Intent myIntent = new Intent(context,Level.class);
            startActivity(myIntent);
            dialog.dismiss();
            finish();
      }  
    });
    builder.setNegativeButton("No", new DialogInterface.OnClickListener() {

      public void onClick(DialogInterface dialog, int which) {
        dialog.dismiss();
        finish();

      }
    });
    AlertDialog alert = builder.create();
    alert.show();
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T02:42:04.177

如果您的倒计时没有完成，您必须在完成活动之前先完成它。

`myCount.cancel`当你完成活动时试试这个。

# php - PHP中的FTP不复制index.php文件

> ID：10619146
> 
> 赞同：0
> 
> 时间：2012-05-16T13:02:10.273
> 
> 标签：php, apache, ftp, indexing, warnings

我有一个 PHP 脚本来复制目录中的所有文件我已经更改了我的服务器现在它没有复制 index.php 文件所有其他文件都成功复制并抛出以下警告。

```
Warning: ftp_get(tmp/readme.txt): failed to open stream: Permission denied in /var/www/vhosts/Site.com/httpdocs/includes/ftp.class.php on line 123

Warning: ftp_get(): Error opening tmp/readme.txt in /var/www/vhosts/Site.com/httpdocs/includes/ftp.class.php on line 123

Warning: fopen(tmp/readme.txt): failed to open stream: Permission denied in /var/www/vhosts/Site.com/httpdocs/includes/clone.php on line 196 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:04:36.617

似乎是新服务器上的权限问题。仔细检查您正在访问的服务器目录，以确保您和 apache 具有适当的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:37:17.227

似乎这个权限问题，不在新服务器中，而是在旧服务器中。

请检查旧服务器中 index.php 文件的 owner:group，以便您的脚本可以访问和操作原始文件。

还有一件事。您是在浏览器中还是在命令行中运行了 ftp 传输脚本？

这非常重要，因为可以使用 APACHE 用户（www-data）运行脚本，而另一种方法使用系统用户运行脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T13:07:34.150

就像错误消息所说：权限被拒绝，换句话说，您的脚本没有访问文件 tmp/readme.txt 的权限。检查您的 PHP 脚本使用的用户是否具有文件/文件夹的读取权限。检查的方法取决于您的服务器设置，因此除非您提供有关服务器正在运行的更多信息，否则无法提供更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T13:07:57.380

欢迎来到 Unix 世界。这是一个权限问题。如果您有权限，您可以在服务器中使用命令 chmod 修复它。

```
 $ ssh username@server
 $ chmod PERMISSIONS /path/to/filr 
```

检查 chmod 的手册页以了解权限。可能你会做这样的事情：+w

# wamp - 为什么 WAMP 不显示我的任何文件？只是显示一个空白的白页？

> ID：10619150
> 
> 赞同：0
> 
> 时间：2012-05-16T13:02:24.157
> 
> 标签：wamp

我启动了 wamp 服务器，它只显示所有文件的空白白页，我不确定我应该怎么做？

它以前可以工作，今天我没有对任何配置文件或任何东西进行任何更改，也没有显示任何错误消息，我什至重新启动了我的机器，但这并没有太大变化。我重新启动了 Apache 服务，它也给了我一个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T06:43:07.933

确保您没有任何名为 default.php 或 index.php 的文件，因为服务器会先显示它们，并且您将无法从树索引中选择文件。

如果不是这种情况，则 wamp 在 apache 的 xampp 中的 htdocs 等效项是 www 目录文件夹。在 www 目录中创建一个文件夹，例如 Sites，将一些文件放在那里，然后运行 ​​wamp 并写入`http://127.0.0.1/Sites`（对于本示例）。您应该看到文件的树目录，您可以在其中打开它们并运行您的 php 文件。

WAMP 在我的 Windows 7 中也不能很好地运行，但它确实有效。干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T02:14:59.250

你用Skype吗？如果是这样，只需注销您的 Skype 并再次重新启动 wamp 服务器。之后再次登录您的Skype。在 Wamp 服务器启动之前，切勿登录 Skype。问题是服务器端口与Skype冲突。如果您确定您的服务器配置，那么它可能只是端口冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-29T15:37:17.230

您需要检查正在使用的端口。

左键单击 wamp 管理器 -> Apache -> httpd.conf

搜索此行

听 80

如果 LISTEN 是 8080，你的 url 应该是`http://127.0.0.1:8080/Sites`

或者在 httpd.conf 中将 8080 端口更改为 80

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-06T15:01:48.820

编辑 C:\wamp\www\index.php

在这一行设置“false”... $suppress_localhost = false;

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-30T10:42:46.433

在位于 www 文件夹中的 index.php 中，编辑该行

```
($suppress_localhost? 
```

到

```
($suppress_localhost==false? 
```

不要包含`;`，因为它会引起错误。祝你好运！

# php - PHP 文件包含内部函数，需要保留全局变量。（试图包装 HTML 注释）

> ID：10619152
> 
> 赞同：5
> 
> 时间：2012-05-16T13:02:35.413
> 
> 标签：php

为了加快我的工作流程并帮助后端人员进行集成（我是前端开发人员），我试图通过在每个文件包含周围包装注释来扩展文件包含功能以输出它的文件名：

```
function include_module($path) {
    echo "\n\n<!-- MODULE: ".basename($path, '.php')." -->\n";
    include($path);
    echo "\n<!-- /MODULE: ".basename($path, '.php')." -->\n\n";
}   
include_module('form-controls.php'); 
```

但是，这会导致无法访问函数外设置的任何变量。我知道我可以做到：

```
global $var 
```

但这只会让我访问 $var （我知道我可以做 $var['var1'] 等），有没有办法做'全局所有'或者任何人都可以想到一种不同的方法来包装评论？

干杯:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T13:09:17.243

试试这个：

```
function include_module($path) {
    foreach($GLOBALS as $name => $value) global $$name;
    echo "\n\n<!-- MODULE: ".basename($path, '.php')." -->\n";
    include($path);
    echo "\n<!-- /MODULE: ".basename($path, '.php')." -->\n\n";
}   
include_module('form-controls.php'); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-16T13:14:36.863

您可以使用以下内容访问全局变量。

```
extract($GLOBALS, EXTR_REFS); 
```

# javascript - Javascript 缓慢填充 ActiveXObject Excel.Application

> ID：10619155
> 
> 赞同：0
> 
> 时间：2012-05-16T13:02:47.130
> 
> 标签：javascript, excel

我有一个最多包含 25,000 个对象的数组，我正在使用下面的代码对其进行迭代并导出到 Excel。导出过程非常缓慢，并且看起来需要数小时才能完成全部 25,000 个对象。放入Excel的数据实际上比下面显示的名字和姓氏更多。

有没有办法更快地生成 Excel 文档？甚至是 CSV 文件？

```
var xls = new ActiveXObject ( "Excel.Application" );
xls.visible = true;
var totalsSheet = xls.Workbooks.Add;
totalsSheet.Worksheets.Add;
totalsSheet.Worksheets(1).Activate;
totalsSheet.Worksheets(1).Name="Dinners";
for (var i = 0; i < filteredObjects.length; i++) {
    totalsSheet.Worksheets(1).Cells(i + 2, 1).value = filteredObjects[i].forename;
    totalsSheet.Worksheets(1).Cells(i + 2, 2).value = filteredObjects[i].surname;
} 
```

# html - WordPress 发布 HTML 和 CSS 代码

> ID：10619157
> 
> 赞同：0
> 
> 时间：2012-05-16T13:02:52.763
> 
> 标签：html, css, wordpress

在 WordPress 中，我正在创建一个新帖子。在帖子的 HTML 部分中，我使用以下代码：

```
<html>
<head>
<style type="text/css">
body {color:red;}
h1 {color:#00ff00;}
p.ex {color:rgb(0,0,255);}
</style>
</head>

<body>
<h1>This is heading 1</h1>
<p>This is an ordinary paragraph. Notice that this text is red. The default text-color for a page is defined in the body selector.</p>
<p class="ex">This is a paragraph with class="ex". This text is blue.</p>
</body>
</html> 
```

文本 h1 字体大小没有那么大，请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:22:58.087

在该`<style>`部分中，添加：

`h1, p {font-size:14px}`或您想使用的任何尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T18:16:50.107

首先，如果您在 POST (html) 中写入内容，则不应在字段中使用 and so。

你的帖子应该看起来像这样

```
 <style type="text/css">
body {color:red;}
h1 {color:#00ff00;}
p.ex {color:rgb(0,0,255);}
</style>
</head>

<body>
<h1>This is heading 1</h1>
<p>This is an ordinary paragraph. Notice that this text is red. The default text-color for a page is defined in the body selector.</p>
<p class="ex">This is a paragraph with class="ex". This text is blue.</p> 
```

但事实是为什么你不把你的 CSS 放到一个特定的 CSS 文件中呢？在你的主题的根目录中，你应该有一个默认的 style.css 可以使用。

另外，您是否可以检查您是否使用了 reset.css 或类似的东西会覆盖您在该字段中输入的内容？

# shell - 如何对多种文件类型使用 grep --include 选项？

> ID：10619160
> 
> 赞同：117
> 
> 时间：2012-05-16T13:03:02.280
> 
> 标签：shell, grep

当我想 grep 某个目录中的所有 html 文件时，我执行以下操作

`grep --include="*.html" pattern -R /some/path`

效果很好。问题是如何 grep 某个目录中的所有 html、htm、php 文件？

从this [Use grep --exclude/--include syntax to not grep through certain files](https://stackoverflow.com/questions/221921/grep-exclude-include-syntax-do-not-grep-through-certain-files)看来，我可以执行以下操作

`grep --include="*.{html,php,htm}" pattern -R /some/path`

但遗憾的是，它对我不起作用。
仅供参考，我的 grep 版本是 2.5.1。

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2012-05-16T23:52:45.880

您可以使用多个`--include`标志。这对我有用：

```
grep -r --include=*.html --include=*.php --include=*.htm "pattern" /some/path/ 
```

但是，您可以按照[Deruijter 的建议](https://stackoverflow.com/a/10619274)进行操作。这对我有用：

```
grep -r --include=*.{html,php,htm} "pattern" /some/path/ 
```

不要忘记你也可以使用`find`and`xargs`来做这种事情：

```
find /some/path/ -name "*.htm*" -or -name "*.php" | xargs grep "pattern" 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2017-05-22T19:56:03.207

using**`{html,php,htm}`只能用作[大括号扩展](https://www.gnu.org/software/bash/manual/html_node/Brace-Expansion.html#Brace-Expansion)**`bash`，这是、`ksh`和的非标准（不符合 POSIX）功能`zsh`。

*   换句话说：不要尝试在目标脚本中使用它`/bin/sh`- 在这种情况下使用*显式*的多个`--include`参数。

*   **`grep`本身不*理解*符号`{...}`。**

要识别大括号扩展，它**必须是命令行上未加*引号*的（a 的一部分）标记**。

大括号扩展**扩展为*多个 arguments***，因此在手头的情况下**`grep`最终会看到*多个* `--include=...`options**，就像您单独传递它们一样。

大括号扩展的结果会**受到通配（文件名扩展）**的影响，这有以下**缺陷**：

*   如果每个结果参数碰巧包含不*带引号*的通配元字符，例如`*`.
    虽然这对于诸如此类的标记不太可能`--include=*.html`（例如，您必须有一个文件*字面上命名为*类似`--include=foo.html`的东西才能匹配），但总的来说值得牢记。

*   如果`nullglob`shell 选项恰好打开 ( ) 并且通配符*不*`shopt -s nullglob`匹配，则该参数将被*丢弃*。

 **因此，对于**完全稳健的解决方案**，请使用以下内容：

```
grep -R '--include=*.'{html,php,htm} pattern /some/path 
```

*   `'--include=*.'`由于*被单引号*引起来，被视为*文字*；这可以防止无意中将其解释为通配符。*`*`*

**   `{html,php,htm}`， - 必要的 - 不带*引号*的大括号扩展^([1]) ，扩展为*3 个*参数，由于`{...}` *直接跟在`'...'`token*之后，因此*包含*该 token。

    *   因此，在 shell 移除引号后，最终**将以下*3 个* *文字*参数传递给`grep`**：

    *   `--include=*.html`
    *   `--include=*.php`
    *   `--include=*.htm`*

 ** * *

^([1] 更准确地说，只有大括号扩展的*语法相关*部分必须不加引号，*列表元素*仍然可以单独引用，并且如果它们包含可能导致大括号扩展后不需要的通配符的通配元字符，则必须是；虽然在这种情况下没有必要，但上面可以写成
`'--include=*.'{'html','php','htm'}`)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-16T13:10:07.020

尝试删除双引号

```
grep --include=*.{html,php,htm} pattern -R /some/path 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-16T13:08:03.733

这不工作吗？

```
 grep pattern  /some/path/*.{html,php,htm} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-08-16T14:10:17.340

它用于相同的目的，但没有`--include`选项。它也适用于 grep 2.5.1。

```
grep -v -E ".*\.(html|htm|php)" 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-10-20T07:09:53.777

尝试这个。-r 将进行递归搜索。-s 将抑制文件未找到错误。-n 将显示找到该模式的文件的行号。

```
 grep "pattern" <path> -r -s -n --include=*.{c,cpp,C,h} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-16T16:22:23.293

`grep`与`find`命令一起使用

```
find /some/path -name '*.html' -o -name '*.htm' -o -name '*.php' -type f 
 -exec grep PATTERN {} \+ 
```

您也可以使用`-regex`和`-regextype`选项。***

# c++ - 定义内省 C++ 类层次结构描述的有效方法？

> ID：10619164
> 
> 赞同：2
> 
> 时间：2012-05-16T13:03:15.187
> 
> 标签：c++, introspection

我有一个由继承定义的 C++ 类层次结构，我在其中存储了这个层次结构的描述，以后可以用于自省。我想知道是否有比我目前的方式更有效或更清洁的方式来定义它。这是我的代码的精简版

```
// in header file (hpp)
struct Type
{
    Type( const string& n, const Type* p = nullptr ) : name(n), parent(p) {}
    const string name;
    const Type* parent;
};

class Base
{
public:
    static const Type m_type;
    virtual const Type& type() const { return m_type; } 
};

class Derived : public Base
{
public:
    static const Type m_type;
    const Type& type() const { return m_type; }
};

// in implementation file (cpp)
const Type Base::m_type( "Base" );
const Type Derived::m_type( "Derived", &Base::m_type ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:10:33.370

不一定更有效，但请考虑您是否真的需要一个公共基类。另一种方法使用全局类型信息注册表。然后通过`TypeInfo::get(my_variable)`or来查询类型的类型信息`TypeInfo::get(typeid(my_type))`。

这样做的好处是它也适用于现有类型，只需将其添加到此类型信息注册表中即可。

在内部，注册表将使用从`std::type_info`到`Type`或类似的映射。以下是概念证明。不幸的是，代码不能在 clang 或 GCC 上编译。根据错误消息，我怀疑是一个错误，但我也可能是错的……</p>

```
struct Type {
    std::string name;
    std::vector<Type*> parents;
    // TODO Extend by fully-qualified name (namespace) etc.

    template <typename... T>
    Type(std::string&& name, T*... parents)
        : name(name), parents{parents...} { }
};

struct TypeInfo {
    template <typename T>
    static Type const& get(T const&) { return get(typeid(T)); }

    template <typename T>
    static Type const& get() { return get(typeid(T)); }

    static Type const& get(std::type_info const& info) {
        auto i = types.find(info);
        if (i == types.end())
            throw unknown_type_error(info.name());

        return i->second;
    }

    template <typename T>
    static void register_type(Type&& type) {
        types.insert(std::make_pair(typeid(T), type));
    }

    typedef std::unordered_map<std::type_info, Type> type_dir_t;
    static type_dir_t types;
}; 
```

完整代码可[在 github 上作为 gist 获得](https://gist.github.com/2710960)。

在 C++ 中，通常不赞成为逻辑上不相关的类使用公共基类，尽管可以说这类似于 CRTP / mixins，其中鼓励使用公共基*类*。所以我想说，如果你不关心现有类型，这种方法不一定有什么问题。

# asp.net-mvc-3 - 如何将模型属性绑定到 mvc3 中的 html 帮助器 textboxfor

> ID：10619165
> 
> 赞同：1
> 
> 时间：2012-05-16T13:03:20.190
> 
> 标签：asp.net-mvc-3, c#-4.0

我想使用 TextBoxFor 的 html 帮助程序紧密绑定我的属性，但我不能这样做，我只是使用 Textbox 进行绑定，但我想将数据分配给 httpPost 上的文本框

下面是我如何使用简单的 HtmlHelper 文本框

```
<%: Html.TextBox("RenewalDate", (string.Format("{0:yyyy/MM/dd}", Model.RenewalDate)), new { id = "txtRenewalDate", maxlength = 20, tabindex = 3, @class = "date" })%> 
```

我不想使用 FormCollection 这就是为什么我想与 TextBoxFor 紧密绑定，以便在 httpPost 我的模型具有分配给`Model.RenewalDate`

请帮忙....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:26:53.987

使用编辑器模板，它更容易：

```
<%= Html.EditorFor(x => x.RenewalDate) %> 
```

您可以使用 DisplayFormat 属性装饰您的视图模型属性以指定所需的格式：

```
[DisplayFormat(DataFormatString = "{0:yyyy/MM/dd}", ApplyFormatInEditMode = true)]
public DateTime RenewalDate { get; set; } 
```

然后您的 POST 控制器操作会将视图模型作为操作参数。

```
[HttpPost]
public ActionResult SomeAction(MyViewModel model)
{
    ...
} 
```

为了将 class、tabindex 和 maxlength 等 HTML 属性应用于此编辑器模板，您可以编写自定义元数据提供程序，[如下文](http://aspadvice.com/blogs/kiran/archive/2009/11/29/Adding-html-attributes-support-for-Templates-_2D00_-ASP.Net-MVC-2.0-Beta_2D00_1.aspx)所示。

此外，由于日期正在使用，`yyyy/MM/dd`因此默认模型绑定器可能无法将值解析回来，因为默认模型绑定器使用当前区域性设置。要解决此问题，您可以编写一个自定义模型绑定器，如我在[此线程](https://stackoverflow.com/a/7836093/29407)中所示。

# qt - QtWebKit 不呈现日语（Shift_JIS 字符集）

> ID：10619168
> 
> 赞同：0
> 
> 时间：2012-05-16T13:03:23.357
> 
> 标签：qt, character-encoding, qtwebkit, qt4.8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T14:33:34.157

Turns out I've been over-thinking this one, there is in fact a pretty simple solution:

When confronted with Kanji characters which the current font is unable to display, Chrome is clever enough to fall back to a font which does support those characters (on my Win 7 PC the default Kanji font is MS Gothic).

QtWebKit does not have this feature, and hence it is necessary to explicitly specify (in CSS) a Kanji-capable font for the areas which need it.

# html - 为什么我的标志旁边有一条红线？

> ID：10619171
> 
> 赞同：2
> 
> 时间：2012-05-16T13:03:27.347
> 
> 标签：html, css, image

我的标志旁边有一条奇怪的红线，我一辈子都想不通为什么。

看看： [http ://www.pdf-explode.com.au/index.php](http://www.pdf-explode.com.au/index.php)

这是我正在谈论的红线：http: [//www.bounceapp.com/66618](http://www.bounceapp.com/66618)

*   我试过看所有的边界，没有红色。
*   通过背景搜索，没有红色。
*   检查员不能检查。
*   它不在图像中

让我知道你是否能找到它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T13:07:05.070

背景是重复的（红线是字母的一部分`D`），所以添加：`no-repeat`到你的css

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T13:08:07.000

它是`repeat`背景图像的`#menu a.logo`（所以它是`D`Document 再次出现在右侧）。删除重复。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T13:08:18.393

你的CSS：

```
#menu a.logo {
    background: url("../images/logo1.png") repeat scroll 0 0 transparent;
    height: 45px;
    left: 0;
    position: absolute;
    text-indent: -10000px !important;
    top: 5px;
    width: 265px;
    z-index: 10;
} 
```

正确的CSS：

```
#menu a.logo {
    background: url("../images/logo1.png") no-repeat scroll 0 0 transparent; //edited
    height: 45px;
    left: 0;
    position: absolute;
    text-indent: -10000px !important;
    top: 5px;
    width: 263px; //edited
    z-index: 10;
} 
```

你的标志的宽度是`263px;`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-16T13:08:42.577

这是因为您的徽标开始重复。这条线来自红色的“D”。添加`background-repeat: no-repeat;`或缩短徽标宽度约 2 像素。

# c# - 查看部署的 aspx 页面背后的代码

> ID：10619176
> 
> 赞同：-2
> 
> 时间：2012-05-16T13:03:53.970
> 
> 标签：c#, asp.net, code-behind

我想知道是否有办法查看已经部署在服务器上的 .aspx 页面上的代码？

谢谢回答 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T13:07:05.010

是的，如果您有权访问服务器上的目录。

如果你问它是否可以在客户端完成，那么不能。

# iphone - 设置与 Facebook 的连接未按预期工作 (iPhone)

> ID：10619179
> 
> 赞同：0
> 
> 时间：2012-05-16T13:04:19.487
> 
> 标签：iphone, ios, facebook, delegates

我正在尝试创建与 Facebook 的连接，但是我在处理 openUrl 时遇到了问题。

过去，我能够在我的应用委托类中添加以下内容：

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication annotation:(id)annotation 
{   
    return [[viewController facebook] handleOpenURL:url];
} 
```

正如我所期望的那样工作。但是，这一次我的情况略有不同，因为 viewController 是在应用程序的其他地方加载的。为了解决这个问题，我想出了一个想法，即创建一个负责处理连接的新类，但也可以从我创建 Facebook 帖子的类中访问。

在这里进一步解释是我的应用委托类中的相关代码

**.m**

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication annotation:(id)annotation 
{
    FacebookConnectionHandler *fbConnHandler = [[FacebookConnectionHandler alloc] init];

    return [[fbConnHandler facebook] handleOpenURL:url];
} 
```

然后是`FacebookConnectionHandler`类中的代码：

**。H**

```
#import <Foundation/Foundation.h>
#import "Other_ViewController.h"
#import "Facebook.h"

@interface FacebookConnectionHandler : NSObject <FBSessionDelegate>
{
    Other_ViewController *otherView;
    Facebook *facebook;
}

@property(nonatomic, strong)Other_ViewController *otherView;
@property(nonatomic, strong)Facebook *facebook;

+ (id)sharedManager;

@end 
```

**.m**

```
#import "FacebookConnectionHandler.h"

@implementation FacebookConnectionHandler
@synthesize otherView;
@synthesize facebook;

static FacebookConnectionHandler *mySingleton = nil;

+ (id)sharedManager
{
    @synchronized(self) 
    {
        if (mySingleton == nil) mySingleton = [[self alloc] init];
    }

    return mySingleton;
}

- (void)fbDidLogin
{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:[facebook accessToken] forKey:@"FBAccessTokenKey"];
    [defaults setObject:[facebook expirationDate] forKey:@"FBExpirationDateKey"];
    [defaults synchronize];

    // Allow the user to create a post
    [self.otherView createFacebookPost];
}

@end 
```

最后......这是`Other_ViewController`类中的相关代码（正在创建帖子）：

**。H**

```
#import "FBConnect.h"

@interface Other_ViewController : UIViewController <FBSessionDelegate>
{
    Facebook *facebook;
}

@property(nonatomic, retain)Facebook *facebook;

- (void)createFacebookPost;

@end 
```

**.m**

```
- (void)createFacebookPost
{
    // Create the post
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"Blah", @"name",
                                   @"", @"caption",
                                   @"", @"description",
                                   @"http://www.xyz.com", @"link",
                                   @"", @"picture",
                                   nil];

    // Post it to the users feed
    [facebook dialog:@"feed" andParams:params andDelegate:nil];
}

- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
    switch (buttonIndex) 
    {
        case kFacebookButton:
        {
            if (facebook == nil || ![facebook isSessionValid]) 
            {
                // Setup Facebook connection
                facebook = [[Facebook alloc] initWithAppId:@"1111111111" andDelegate:self];

                NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
                if ([defaults objectForKey:@"FBAccessTokenKey"] 
                    && [defaults objectForKey:@"FBExpirationDateKey"]) 
                {
                    facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
                    facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
                }

                // Set the connection handler
                FacebookConnectionHandler *fbConnectionHandler = [[FacebookConnectionHandler alloc] init];
                fbConnectionHandler.mapView = self;
                fbConnectionHandler.facebook = self.facebook;

                if (![facebook isSessionValid])
                {
                    NSArray *permissions = [[NSArray alloc] initWithObjects:@"publish_actions", nil];
                    [facebook authorize:permissions];
                }
            }
            else
            {   
                // Create the post
                [self createFacebookPost];
            }

            break;
        }
        default:
            break;
    }
} 
```

我可能以完全错误的方式解决这个问题并且完全使问题复杂化，但是我对整个 facebook SDK 都是新手，在这一点上我真的很难过。请问有人可以提供解决方案吗？

**注意：**要清楚，问题是该方法`fbDidLogin`没有被调用，因此其余代码没有机会运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:19:54.703

您没有在应用程序委托中使用单例，而是在创建连接处理程序类的新实例：

代替

```
FacebookConnectionHandler *fbConnHandler = [[FacebookConnectionHandler alloc] init];
return [[fbConnHandler facebook] handleOpenURL:url]; 
```

尝试

```
return [[[FacebookConnectionHandler sharedManager] facebook] handleOpenURL:url]; 
```

您也没有在`Other_ViewController`课堂上使用单例。

如果您要使用单例架构模式，则必须记住始终使用`sharedManager`并且永远不要分配/初始化新的 :)

我有时会`init`抛出异常来提醒我有一个单例方法。

```
static FacebookConnectionHandler *mySingleton = nil;

- (id)init {
    @throw [NSException exceptionWithName:self.class.description reason:@"Please use the sharedManager, don't make a new one of these!" userInfo:nil];
}

- (id)initInternal {
    // Put your real init stuff in here
}

+ (id)sharedManager
{
    @synchronized(self) 
    {
        if (mySingleton == nil) mySingleton = [[self alloc] initInternal];
    }

    return mySingleton;
} 
```

PS 使用单独的 Facebook 类正是我在之前编写的应用程序中使用的方式 - 你的架构很好:) 我还会考虑让 Facebook 连接处理程序类负责使其成为自己的 Facebook 实例而不是视图控制器必须这样做:)

# objective-c - 尝试使用 extern int，告诉它现在是一个指针

> ID：10619180
> 
> 赞同：1
> 
> 时间：2012-05-16T13:04:20.780
> 
> 标签：objective-c, xcode, compiler-errors, extern

`Constants.h`我已经在我的项目文件中声明了这个小家伙：

`extern int *exitDirection;`

然后，我将他设置为一个整数。在这种情况下，它是 881，这是一个非常好的数字。

现在，我想在项目其他地方的 switch 语句中使用他：

```
 switch (exitDirection) {
        case kExitDirectionLeft:
            // Have him spawn on the right of the next level.
            break;
        case kExitDirectionRight:
            // Have him spawn on the left of the next level.
            break;
        default:
            break;
    }
} 
```

我收到了可爱的错误消息`"Statement requires expression of integer type (int * invalid)`，我认为这意味着我给它一个指向整数的指针，而不是一个实际的整数。kExitDirectionLeft 只是`#define`'d as 881，我试过用实际数字切换它，不高兴。还尝试将 int 切换为 NSNumber 或 NSInteger，同样的错误。

在这种情况下，为什么我不能使用这个外部定义的整数？我怎样才能让它工作？任何帮助表示赞赏！

修复了它，但这样做我现在触发了这个 Apple Mach-O Linker (Id) Error..

```
"_exitDirection", referenced from: 
  -[GameplayLayer positionHeroMale] in GameplayLayer.o
  -[GameCharacter checkAndClampSpritePosition] in GameCharacter.o
  -[GameplayLayer positionHeroMale] in GameplayLayer.o
  -[GameCharacter checkAndClampSpritePosition] in GameCharacter.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T13:07:43.397

```
extern int *exitDirection; 
```

在这里，您实际上声明了指向 int 的指针，您可能（取决于您如何创建它并为其设置值）在这里只需要普通的 int：

```
extern int exitDirection; 
```

同样通过该声明，您只需告诉编译器 exitDirection 是在当前范围之外的某个地方创建的，变量本身不会被创建。您需要在某些实现文件中实际创建（并可能为其设置一些初始值），例如：

```
// Constants.m
int exitDirection = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:07:52.913

您声明`exitDirection`为`int`指针，并且需要`switch`在`int`. 更改`exitDirection`为`int`或执行以下操作

```
switch(*exitDirection)
{
     ...
} 
```

# content-management-system - 语言内容树

> ID：10619183
> 
> 赞同：1
> 
> 时间：2012-05-16T13:04:31.067
> 
> 标签：content-management-system, umbraco

我打算使用 Umbraco CMS 做一个项目，但我有一些问题想澄清。

只是为了让您了解上下文，我将使用 umbraco 来处理网站的部分内容，并使用其他数据库来处理其他部分。这将是一个多语言网站，但我不想为每种语言使用一个内容树。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:37:38.033

除了一种内容树标准语言之外的建议（对于大多数非技术用户来说，这是最容易管理的）：

*   将**字典**用于静态文本
*   为特定语言的内容使用**子节点**：对于每种内容类型，创建一个包含所有特定语言字段的子内容类型。
*   使用**标签**：为每种语言重复所有特定于语言的字段，并最好在每种语言的标签中组织它们。使用一致的命名方案，以便您可以使用宏来检索适当的版本。
*   使用**关系**来链接节点，这些节点是彼此的翻译

这当然只涵盖在 Umbraco 中管理的内容。

# android - Android画布绘制无法设置深色

> ID：10619195
> 
> 赞同：1
> 
> 时间：2012-05-16T13:05:54.717
> 
> 标签：android

我正在研究油漆应用程序，我将布局背景设置为白色，并将油漆颜色设置为黑色。但是，在画布中我得到透明的黑色，我希望它是画布油漆的深色。

我的输出如下截图：

![在此处输入图像描述](../Images/520eb940924a51121f79a812900e25c7.png)

我的代码如下：

```
public DrawView(Context context){
    super(context);
    setFocusable(true);
    setFocusableInTouchMode(true);      
    this.setOnTouchListener(this);
    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setColor(0x80808080);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(6);
    mCanvas = new Canvas();
    mPath = new Path();
    paths.add(mPath);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:10:21.877

```
mPaint.setColor(Color.BLACK); 
```

**代替**

```
mPaint.setColor(0x80808080); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T13:21:56.147

您的 Paint 有一个设置为稍微透明的 Alpha 通道。插入这一行。

```
mPaint.setAlpha(255); 
```

# mysql - 在同一查询中创建和更新列的 SQL 查询

> ID：10619202
> 
> 赞同：1
> 
> 时间：2012-05-16T13:06:23.460
> 
> 标签：mysql, sql

对于我的作业，我被要求编写一条 SQL 语句来执行以下操作。

在表中添加一个新列，`registration`即 ( )，并更新与每个for`module_name char (15)`对应的该列。 是，因为是，因为是`module_id``200``module name``digital diary``201``year planner``202``b’day remainder`

我可以使用两个或更多语句来做到这一点，但是有什么方法可以在单个 sql 语句中完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-06-07T14:06:29.677

是的，可以使用 DEFAULT：

```
CREATE TABLE registration(module_id INT);
INSERT INTO registration(module_id) VALUES (100),(200),(201),(202); 
```

改变：

```
ALTER TABLE registration
ADD COLUMN module_name char(15)
    DEFAULT (CASE module_id WHEN 200 THEN 'digital diary'
                            WHEN 201 THEN 'year planner'
                            WHEN 202 THEN 'b’day remainder'
            END); 
```

**[db<>小提琴演示](https://dbfiddle.uk/?rdbms=mysql_8.0&fiddle=48d7b53f1fb5df3fed5a92c1ba1e2a07)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:11:12.140

您不能在一个批处理中执行此操作，您可以使用`EXEC`命令运行 sql 语句，这样您可以在两个不同的批处理和一个查询中执行此操作：

```
EXEC('statement1')

EXEC('statement2') 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-16T13:15:37.387

使用存储过程，并在那里编写您需要的任何语句。

# php - QueryPath 或 DOMDocument 用于编辑大型 XML 文件？

> ID：10619204
> 
> 赞同：0
> 
> 时间：2012-05-16T13:06:29.623
> 
> 标签：php, xml, openxml, domdocument, querypath

我正在尝试使用 PHP 编辑一个大型 XML 文件（从 Excel .xlsm 文件中提取），我想知道哪个是最好的（关于性能）：QueryPath 还是 PHP 的 DOMDocument？

该文件的大小至少为 8 MB，并且包含大约 400k 行（格式化时）。

感谢您的反馈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T00:52:52.377

QueryPath 基本上只是一个`DOMDocument`. `DOMDocument`它为裸对象增加了相对较少的开销。对于访问和写入操作——比如`attr()`,`append()`等，应该没有显着的性能差异。

但随之而来的是一个大问题：寻找东西。

传统上，遍历 a`DOMDocument`是通过“走树”或使用`DOMNode->getElementsByTagname()`. 如果您愿意编写代码，这会相对较好。

除非您使用非常特定的选择器（例如 ':root>foo>bar>baz'），否则使用 QueryPath 2.x 进行查询在这样大小的文档上会有点慢。

但是，即将进入 Alpha1 的 QueryPath 3.x 在查询大对象时要快很多很多倍。执行`qp('foo')`速度与 XPath 一样快……这让我想到了最后一个选项。

然后是内置的 XPath 处理器，它也带有 PHP 的 libxml 支持。如果您正在处理大型 XML 文档，这可能会给您带来更好的性能，因为它是以 C 速度而不是 PHP 速度执行的。但是您将不得不编写 XPath 表达式，这（恕我直言）有点痛苦。

所以底线：

*   基础知识：任何一个都可以。
*   修改：任何一个都可以。
*   大量穿越：
    *   DOMDocument 会让你手动遍历。
    *   QueryPath 2.x 很慢
    *   QueryPath 3.x 更快
    *   XPath 最快……但它是 XPath

# ruby-on-rails - JQuery AJAX 附加到附加元素

> ID：10619205
> 
> 赞同：0
> 
> 时间：2012-05-16T13:06:33.310
> 
> 标签：ruby-on-rails, ajax, jquery, append

我正在使用带有 AJAX 的 RoR 来创建帖子。所以我需要能够通过以前的 id 添加“答案”。
每次提交按钮点击下面的代码被调用

```
$("<%= selector %>").append("<div id='<%= newanswer %>'><%= escape_javascript(render('answer_layout')) %></div>"); 
```

`selector`看起来像这样`#answer-12`
`newanswer`的地方`#answer-13`

第一次它按建议工作，但是当我第二次单击提交时，我需要使用已经附加`#answer-13`的 div 来追加新`#answer-14`的，它不起作用。我了解该文档不知道第一个附加元素，但不知道如何解决此问题。谢谢你的帮助。

**更新** 我使用编辑和销毁链接呈现新`answer`的，所以我不仅需要能够附加可以解决的问题，而且还需要与添加的元素完全交互

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:40:21.067

您还可以为所有答案创建一个包装 div，因为 append 添加到当前选定元素的末尾。

所以有`$('#answer-div').append(etc.....`

代替`$('#specific-answer').append(etc...`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:09:07.680

将所有答案归类，然后选择最后一个：

```
$('.theClass:last').append("<div id='<%= newanswer %>'><%= escape_javascript(render('answer_layout')) %></div>"); 
```

或者使用这个：

```
$('[id^="answer-"]:last').append("<div id='<%= newanswer %>'><%= escape_javascript(render('answer_layout')) %></div>"); 
```

* * *

**jQuery('[attribute^="value"]')**
`attribute` - 属性名称。
`value`- 一个属性值。可以是不带引号的单个单词或带引号的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T16:45:40.490

我可以提出一个建议，您可以将您最近使用的 ID 放在 DOM 中的某个位置：

```
var appendTo = $('#append-to');    
var appendToId = appendTo.attr('latest');
$( '#' + appendToId ).append("<div id='<%= newanswer %>'><%= escape_javascript(render('answer_layout')) %></div>");

appendTo.attr( 'latest', '<%= newanswer %>' ); 
```

# php - Symfony 1.4 为命令行任务设置默认应用程序

> ID：10619209
> 
> 赞同：1
> 
> 时间：2012-05-16T13:06:44.827
> 
> 标签：php, symfony1, symfony-1.4, command-line-interface

我正在寻找以下问题的解决方案：

在 symfony 1.4 项目中，我有 2 个应用程序：`frontend`和`backend`. 每当我运行 symfony cli 任务时，symfony默认`php symfony doctrine:build --all-classes`使用该应用程序。`backend`

如何让 symfony cli`frontend`用作默认应用程序？

我知道我可以运行相同的命令，`php symfony --application=frontend doctrine:build --all-classes`但必须有一种方法让它`frontend`默认使用该应用程序。

**编辑：**

在`lib/vendor/symfony/lib/task/sfBaseTask.class.php`

```
/**
 * Returns the first application in apps.
 *
 * @return string The Application name
 */
protected function getFirstApplication()
{
    if (count($dirs = sfFinder::type('dir')->maxdepth(0)->follow_link()->relative()->in(sfConfig::get('sf_apps_dir'))))
    {
        return $dirs[0];
    }

   return null;
} 
```

似乎顺序是按字母顺序...

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:36:35.153

检查`configure`您的任务的方法，您应该会看到类似的内容：

```
new sfCommandOption('application', null, sfCommandOption::PARAMETER_REQUIRED, 'The application name', 'backend'), 
```

替换`backend`为`frontend`。

**编辑：**

根据您的发现（关于`getFirstApplication`），最好的解决方案是创建您自己的任务（在 中`/lib/task/myDoctrineBuildTask.class.php`）来扩展当前的学说任务。然后`frontend`在方法中定义应用`configure`：

```
class myDoctrineBuildTask extends sfDoctrineBuildTask
{
  /**
   * @see sfTask
   */
  protected function configure()
  {
    $this->addOptions(array(
      new sfCommandOption('application', null, sfCommandOption::PARAMETER_OPTIONAL, 'The application name', 'frontend'),
      new sfCommandOption('env', null, sfCommandOption::PARAMETER_REQUIRED, 'The environment', 'dev'),
      new sfCommandOption('no-confirmation', null, sfCommandOption::PARAMETER_NONE, 'Whether to force dropping of the database'),
      new sfCommandOption('all', null, sfCommandOption::PARAMETER_NONE, 'Build everything and reset the database'),
      new sfCommandOption('all-classes', null, sfCommandOption::PARAMETER_NONE, 'Build all classes'),
      new sfCommandOption('model', null, sfCommandOption::PARAMETER_NONE, 'Build model classes'),
      new sfCommandOption('forms', null, sfCommandOption::PARAMETER_NONE, 'Build form classes'),
      new sfCommandOption('filters', null, sfCommandOption::PARAMETER_NONE, 'Build filter classes'),
      new sfCommandOption('sql', null, sfCommandOption::PARAMETER_NONE, 'Build SQL'),
      new sfCommandOption('db', null, sfCommandOption::PARAMETER_NONE, 'Drop, create, and either insert SQL or migrate the database'),
      new sfCommandOption('and-migrate', null, sfCommandOption::PARAMETER_NONE, 'Migrate the database'),
      new sfCommandOption('and-load', null, sfCommandOption::PARAMETER_OPTIONAL | sfCommandOption::IS_ARRAY, 'Load fixture data'),
      new sfCommandOption('and-append', null, sfCommandOption::PARAMETER_OPTIONAL | sfCommandOption::IS_ARRAY, 'Append fixture data'),
    ));

    $this->namespace = 'mydoctrine';
    $this->name = 'build';

    $this->briefDescription = 'Generate code based on your schema';

    $this->detailedDescription = ''; // feel free to re-add all the doc
  }
} 
```

然后，使用以下命令启动构建：`php symfony mydoctrine:build --all-classes`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:35:06.173

当您在`cache:clear`没有特定应用程序的情况下运行任务时，Symfony 会清除所有应用程序的缓存。这可以在[这个任务的源代码中](http://trac.symfony-project.org/browser/branches/1.4/lib/task/cache/sfCacheClearTask.class.php#L84)观察到。对于提供默认应用程序的任务（您自己创建的），您可以简单地将其更改为您想要的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-13T10:52:32.193

这已经晚了四年，希望 Symfony 1.x 现在没有被太多使用，但是文件系统决定了默认应用程序是什么。应用程序查询应用程序目录，第一个文件夹用作默认应用程序。因此，您可以通过修改文件系统来破解它，但强烈建议不要这样做。

# php - 在php中限制已经连接ftp的用户

> ID：10619212
> 
> 赞同：0
> 
> 时间：2012-05-16T13:06:51.813
> 
> 标签：php, ftp

我将每 10 秒运行一次 cron 作业来连接和复制文件，然后删除。我不会在复制文件等时运行cron，最好的方法是什么？

我可以限制已经连接的用户吗？

```
try {
    $con = ftp_connect($server);
    if (false === $con) {
        throw new Exception('Unable to connect');
    }

    $loggedIn = ftp_login($con,  $username,  $password);
    if (true === $loggedIn) {
        echo 'Success!';
    } else {
        throw new Exception('Unable to log in');
    }

    print_r(ftp_nlist($con, "."));
    ftp_close($con);
} catch (Exception $e) {
    echo "Failure: " . $e->getMessage();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:29:14.387

```
if a certain file doesnt exist
    make the file
    do stuff
    delete file
else if the file exists, but its very old
    recreate the file
    do stuff
    delete file
else
    its busy 
```

如果 ftp 软件本身允许您限制这一点，我不会感到惊讶。可能想检查一下。

# java - Java的通用分布式调度库

> ID：10619213
> 
> 赞同：9
> 
> 时间：2012-05-16T13:06:51.940
> 
> 标签：java, distributed, schedule

我正在寻找一些用于安排大量任务的通用库。该库必须提供跨集群节点拆分任务、执行负载平衡和容错的能力——因此，如果某个节点出现故障，则该节点的任务必须分布在其余节点上。

我查看了 Hadoop——但看起来它适用于 map-reduce 任务。在我的情况下，任务只是通知的发送者、对象状态的检查器等。

Quartz 似乎很棒——但是当涉及到向节点分派事件时，它到底有多好还不清楚。

还有其他选择吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T13:09:52.497

[听起来像是Akka](http://akka.io)的一个用例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T13:26:09.910

我同意 Christian 的观点，Akka 似乎更合适。Quartz 非常适合它的功能，但它的基本构建块是应该执行的作业。它不会帮助您将工作分解为可分发的组件。

如果你所有的任务都可以分解成作业，那么 Quartz 可以帮你安排它们，这是它最擅长的。但是如果一个工作需要分解成子任务，那么你就需要使用另一个框架。

另一种选择可能是[spring batch](http://static.springsource.org/spring-batch/)，这取决于您的需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-08T16:05:28.887

您可以尝试[ProActive](http://proactive.activeeon.com/index.php)，这是一个与 Java（用 Java 编写）很好地集成的工作流调度程序。它支持您列出的功能。它是一个开源项目，属于 OW2 的一部分。

例如，以下功能可用：

*   工作流，即具有依赖关系和结构的任务集，例如循环/if/replication
*   任务在节点上执行，即在不同机器上运行的代理
*   节点故障时可以自动重启任务

[免责声明] 我是 Activeeon 的一员，该公司为 ProActive 提供专业支持[/disclaimer]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T13:15:52.977

或者你也可以试试[Quartz](http://quartz-scheduler.org/)，它几乎可以处理你想要的任何事情：）

# properties - Umbraco - 如何使用剃刀脚本设置属性的值

> ID：10619214
> 
> 赞同：3
> 
> 时间：2012-05-16T13:06:52.343
> 
> 标签：properties, razor, set, umbraco

我正在尝试创建一个非常简单的投票表单，我想尝试使用剃须刀而不是使用外部控件。

我创建了一个表单，其中列出了一个问题和一个答案列表，当我们按下提交时，我们转到调用处理结果的 razor 脚本的页面。

我想要做的是遍历所有答案并将它们的计数器加一。每个 Answer 对象都有一个名为“Counter”的数字属性。

然而，这一直失败。如果我做：

```
var objAnswer = @Model.NodeById(Int32.Parse(submittedAnswer));
objAnswer.getProperty("Counter").Value++; 
```

或类似的方式，他们都失败了。奇怪的是 objAnswer.getProperty("Counter") 确实包含一个数字，但是当我尝试设置它时，我得到了这个错误：

```
 umbraco.MacroEngines.DynamicNull' does not contain a definition for 'Value' 
```

我知道我也尝试过

```
Document post = new Document(objAnswer.Id);
post.Publish(user); 
```

但这也失败了。

有没有一种简单的方法可以实现这一目标？

* * *

答案是这样的！！

```
 Document doc = new Document(objAnswer.Id);
      doc.getProperty("counter").Value = 34;
      umbraco.BusinessLogic.User author = umbraco.BusinessLogic.User.GetUser(0); 
      doc.Publish(author);
      umbraco.library.UpdateDocumentCache(doc.Id); 
```

并不是说该属性需要小写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:39:59.493

Model.NodeById() 返回一个 DynamicNode 对象，其属性是只读的。您肯定会想走 Document 路线，特别是因为 Node 和 DynamicNode 都从 XML 缓存中获取数据，而 Document 操作数据库。

# android - 从外部 sd 卡文件夹中获取图像并将它们显示在列表中

> ID：10619217
> 
> 赞同：0
> 
> 时间：2012-05-16T13:07:02.010
> 
> 标签：android

我试图从外部的特定文件夹中获取图像，`SD card`并在运行应用程序时尝试在列表中显示它们。没有提供错误，没有任何反应。只是一个空白页的任何建议。

我正在获取带有扩展名的图像列表，但我如何查看图像！

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        File file = new File("/sdcard/external_sd/folder_name/");

        File imageList[] = file.listFiles();
        ArrayList<Bitmap> images = new ArrayList<Bitmap>();
        for(int i=0;i<imageList.length;i++)
        {
            Log.e("Image: "+i+": path", imageList[i].getAbsolutePath());

            Bitmap b = BitmapFactory.decodeFile(imageList[i].getAbsolutePath());

            images.add(b);

        }
         setListAdapter(new ArrayAdapter(this,
                android.R.layout.simple_list_item_1,imageList));
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:22:17.523

`OutOfMemory`如果您使用代码加载图像，您将面临异常。尝试使用以下方法正确加载图像。之后，您可以填充您的`ListView`.

```
private static final int IMG_BUFFER_LEN = 16384;
// R.drawable.ic_default - default drawable resource, if we cannot load drawable from provided file
// R.dimen.list_icon_size - size in dp of ImageView inside of ListView (for example, 40dp)

private Drawable extractMediaIcon(String filePath) {
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(filePath, options);
    if (options.outWidth < 0 || options.outHeight < 0 || (options.outWidth * options.outHeight == 0)) {
        return context.getResources().getDrawable(R.drawable.ic_default);
    }

    final int targetHeight = dp2px((int) context.getResources().getDimension(R.dimen.list_icon_size));
    final int targetWidth = targetHeight;

    final boolean isScaleByHeight =
        Math.abs(options.outHeight - targetHeight) >= Math.abs(options.outWidth - targetWidth);

    if (options.outHeight * options.outWidth * 2 >= IMG_BUFFER_LEN) {
        // Load, scaling to smallest power of 2 that'll get it <= desired dimensions
        final double sampleSize = isScaleByHeight
                ? options.outHeight / targetHeight
                : options.outWidth / targetWidth;
        options.inSampleSize =
                (int) Math.pow(2d, Math.floor(
                        Math.log(sampleSize) / Math.log(2d)));
    }

    // Do the actual decoding
    options.inJustDecodeBounds = false;
    options.inTempStorage = new byte[IMG_BUFFER_LEN];

    Bitmap bitmap = BitmapFactory.decodeFile(filePath, options);
    if (bitmap == null) {
        return context.getResources().getDrawable(R.drawable.ic_default);
    }

    final double imageFactor = (double) bitmap.getWidth() / bitmap.getHeight();
    final double targetFactor = (double) targetWidth / targetHeight;

    bitmap = Bitmap.createScaledBitmap(
            bitmap,
            targetFactor > imageFactor ? bitmap.getWidth() * targetHeight / bitmap.getHeight() : targetWidth,
            targetFactor > imageFactor ? targetHeight : bitmap.getHeight() * targetWidth / bitmap.getWidth(),
            false);

    return new BitmapDrawable(context.getResources(), bitmap);
} 
```

# r - 选择后，操纵器中的选取器列表重置为 NULL (R)

> ID：10619218
> 
> 赞同：0
> 
> 时间：2012-05-16T13:07:02.560
> 
> 标签：r

我正在尝试使用操纵器函数生成图，其中选择器列表将从表中选择某些行（我将其作为列表传递给选择器）。当我运行操纵器时，它显示的情节非常适合第一次选择，但在我做出选择后，它给了我以下错误：-

```
Error in plot.window(...) : need finite 'xlim' values

In addition: Warning messages:

1: In is.na(e2) : is.na() applied to non-(list or vector) of type 'NULL'
2: In is.na(e2) : is.na() applied to non-(list or vector) of type 'NULL'    
3: In is.na(e2) : is.na() applied to non-(list or vector) of type 'NULL'    
4: In min(x) : no non-missing arguments to min; returning Inf   
5: In max(x) : no non-missing arguments to max; returning -Inf 
6: In min(x) : no non-missing arguments to min; returning Inf   
7: In max(x) : no non-missing arguments to max; returning -Inf 
```

以下是我的代码：-

```
Bivariate_Plots_cont=function(base_table,Table)
{
  c<- subset(base_table$segment_per_book, base_table$var_name==Table)
  print(c)
  plot(c, type="b", col="red", 
   axes=FALSE, xlab="Decile Starting Value", ylab="Event Rate (%)",main=Table,xaxt="n")

  axis(1, at=1:10,labels=subset(base_table$min,     base_table$var_name==Table),cex.axis=0.5)
  par(new=TRUE)

  plot(subset(base_table$per_distribution, base_table$var_name==Table), type="b",   col="blue", 
   axes=TRUE, xlab="", ylab="",xaxt="n")
}

Set_Factors_cont=function(base_table)
{
  Variables<<- unique(base_table$var_name)
  Factors <<- as.list(as.character(Variables))
}

Set_Factors_cont(cont3)

manipulate(
  Bivariate_Plots_cont(cont3,Table),
  Table=picker(Factors)
  ) 
```

基本上在上面的三段代码中，我定义了一个包装函数-Bivariate_Plots_cont，它结合了两个图，并在操纵器内部调用它，将“因子”作为列表传递给选择器选项。

# android - 使用 AccountManager 中的 AuthToken 处理 Google 客户端 API 请求

> ID：10619221
> 
> 赞同：1
> 
> 时间：2012-05-16T13:07:14.167
> 
> 标签：android, google-api-java-client, google-api-client, auth-token

我想从用户那里访问 Google Drive 帐户。我从 Android 上的 AccountManager 获得了一个令牌。

我将来自 Google 的客户端库和驱动器库添加到我的项目中，并希望将带有接收到的令牌的请求发送到 Google 服务。我怎样才能做到这一点？

# xml - 除了 http 请求，还有什么可以用来拉取 xml 数据？

> ID：10619222
> 
> 赞同：0
> 
> 时间：2012-05-16T13:07:15.933
> 
> 标签：xml, httpwebrequest, xmlhttprequest, httprequest

我有两台服务器。我正在尝试将 xml 文件从一台服务器拉到下一台服务器。有人告诉我，托管文件的服务器不允许远程 http 请求。获取xml数据的另一种方法是什么？

iTunes或其他程序一定会以某种方式提取xml数据吗？

这是动态创建的 xml 页面的示例：http: [//panel.secc.org/index.php/sermon/getXmlSeriesList](http://panel.secc.org/index.php/sermon/getXmlSeriesList)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:00:44.063

如果您在两台服务器上都有帐户并且在两台服务器上都有 ssh 访问权限，那么您可以使用 scp。这对于从 shell 进行的交互式传输来说很好。

如果您正在编写自己的应用程序来提取数据，那么您可能会找到一个库来执行 scp 从 shell 执行的操作；这取决于您的编程语言。

如果传输中的两台机器都是服务器，我看不出像 iTunes 这样的客户端应用程序是如何适应的。

# insert - 如何将计数记录列插入现有表

> ID：10619223
> 
> 赞同：0
> 
> 时间：2012-05-16T13:07:17.163
> 
> 标签：insert

我需要计算一个表中的记录并将 YTD 总计插入到我存储 YTD 汇总总计的表中。

这是我试图做的：

SELECT COUNT(members) as YTD_Members_CT FROM dbo.tblMembers WHERE InputDate between '2011-10-01' 和 '2012-04-30'

插入 dbo.YTDSummary (YTD_Members) 值 (YTD_Members_CT)

dbo.tblMembers 包含我希望计算的每日信息。我正在尝试将时间段内的成员计数存储在另一个表中。我可以让计数以列名“YTD_Members_CT”出现在屏幕上，但是如何将该计数插入另一个名为 dbo.YTDSummary 的表中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:10:04.793

只需使用以下语句：

```
Insert into dbo.YTDSummary (YTD_Members) SELECT COUNT(members) as YTD_Members_CT FROM dbo.tblMembers WHERE InputDate between '2011-10-01' and '2012-04-30'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:12:56.847

不确定您使用的是哪个数据库引擎，但它看起来像 MS-SQL。

您应该能够通过连接查询来做到这一点，例如：

```
insert into dbo.YTDSummary (YTD_Members) values ((SELECT COUNT(members) as YTD_Members_CT FROM dbo.tblMembers WHERE InputDate between '2011-10-01' and '2012-04-30')) 
```

# html - myQuery 没有返回结果的地方会导致奇怪的 HTML 行为

> ID：10619228
> 
> 赞同：1
> 
> 时间：2012-05-16T13:07:29.303
> 
> 标签：html, sql, jsp, tomcat7

我在 Windows Server 2008 上使用 Tomcat7。

我的 JSP 页面中有以下两行

```
<apptags:SQLIteratorTag query="<%=myQuery%>">
</apptags:SQLIteratorTag> 
```

如果`myQuery`返回至少一行，那么我的 JSP 页面表现正常。如果`myQuery`没有返回任何行，那么我的 JSP 页面会从页面中复制一些文本（例如组合框的内容）并复制它！

我的想法如下：由于它复制的组合框由查询填充，因此在没有查询返回结果的情况下，页面似乎获取了不同查询的结果。

有没有人知道如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T08:51:05.557

JSP 主体中的Scriptlet`<%...%>`通常是杂乱无章的。可以通过将[JSTL](http://www.oracle.com/technetwork/java/index-jsp-135995.html) `@taglib`与[EL](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPIntro7.html) `${...}`一起使用来完全避免它们，这是在 JSP 中迭代查询结果的干净且强烈推荐的方法。

下载[jstl-api.jar 和 jstl-impl.jar](http://java.sun.com/products/jsp/jstl/downloads/index.html)，将它们放入你的 lib 文件夹并添加到页面顶部：

```
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%> 
```

对于查询部分，将所有处理留给 Java 类，将查询结果存储在`myList`类型变量中`List`并将其发送（get/post forward）到您的页面，它应该只显示值而不是其他内容：

```
<c:forEach items="${myList}" var="product" varStatus="status">
    Product number ${status.count}: ${product}<br />
</c:forEach> 
```

这应该足以避免页面中出现意外行为。如果没有行，它将什么也不做。但是，如果您仍然想检查，则不必再次进行查询，因为它的结果已经在里面`myList`：

```
<c:if test="${fn:length(myList) != 0}">
    <c:forEach items="${myList}" var="product" varStatus="status">
        Product number ${status.count}: ${product}<br />
    </c:forEach>
</c:if> 
```

或者使用`${noCompanySelected}`代替`${fn:length(myList) != 0}`，如果那真的是你的条件。

...您可能需要验证的其他事项：

您`myQuery`正在被其他东西或应用程序中的其他地方重用......或者如果您`myQuery`在会话而不是请求中创建，则被同一页面递归两次。

此外，如果您的 taglib`apptags`是您自己制作的，另一种可能性是它正在操作不应该的标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T21:57:56.390

在没有看到更多页面的情况下，我敢打赌您使用的是与以下相同的变量名称：

```
%=myQuery% 
```

因此，当没有返回查询结果时，它只是返回它拥有的最后一个对象......即组合框。尝试为您的查询字符串名称指定一个不同的名称，例如 query1、query2 等，而不是所有 myQuery。

# c# - 将 SQL 转换为 LINQ

> ID：10619237
> 
> 赞同：0
> 
> 时间：2012-05-16T13:07:48.850
> 
> 标签：c#, .net, sql, linq

我是 LINQ 的新手，并且对翻译以下代码感到困惑。我目前正在为 SQL 数据库编写前端。我有一个 SQL 视图，它给出了一个标识值列表（electrolyte_id）。该列表按电解液标识值分组，并按电解液最大日期（视图）中每个工艺罐标识值 (process_tanks_id) 的最大日期过滤。下面是sql查询。

```
SELECT electrolyte.electrolyte_id, electrolyte.process_tanks_id, electrolyte.date_active
FROM   electrolyte_max_date INNER JOIN electrolyte ON 
           electrolyte_max_date.max_date = dbo.electrolyte.date_active AND 
           electrolyte_max_date.process_tanks_id = electrolyte.process_tanks_id 
```

我已经能够在 LINQ 中翻译电解质最大日期查询。下面是代码：

```
var filter_electrolyte_list = from tbl_electrolyte in _ds.electrolyte.AsEnumerable()
                              group tbl_electrolyte by
                                     tbl_electrolyte.process_tanks_id into tankgroup
                              select new
                              {
                                  tank = tankgroup.Key,
                                  maxdate = tankgroup.Max(tbl_electrolyte =>
                                                        tbl_electrolyte.date_active)
                               }; 
```

我的问题是：如何将 filter_electrolyte_list LINQ 查询加入另一个 LINQ 查询中的电解质表？我需要复制在 SQL 视图中得到的相同结果。

提前感谢您的帮助。乔纳森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:16:14.703

我觉得你想做的是联合两个 Linq 查询？

```
var filter_electrolyte_list = (from tbl_electrolyte in _ds.electrolyte.AsEnumerable()
                          group tbl_electrolyte by
                                 tbl_electrolyte.process_tanks_id into tankgroup
                          select new
                          {
                              tank = tankgroup.Key,
                              maxdate = tankgroup.Max(tbl_electrolyte =>
                                                    tbl_electrolyte.date_active)
                           }).Union( //New Linq Query that has the same select statement); 
```

确保每个查询中的选定变量与常规 SQL 联合一样匹配。

# java - 将外部 rar 文件添加到 Cloud Foundry

> ID：10619243
> 
> 赞同：0
> 
> 时间：2012-05-16T13:08:01.063
> 
> 标签：java, cloud-foundry

嗨，我刚开始使用 CloudFoundry 并部署了一个项目。我的项目使用了一些 rar 文件，所以如何将 rar 文件附加到使用这些 rar 文件的部署页面。

更多细节：我的页面是一个jsp页面，使用jstl。由于 jstl rar 文件，在这种情况下，Class Foundry 的容器找不到它们。我的 jsp 页面有指令 <%@ taglib uri="java.sun.com/jsp/jstl/core"; 前缀="c" %> 。如果我将 rar 文件添加到我的 Eclipse 项目的 Webcontent 文件夹中，我仍然会收到错误“org.apache.jasper.JasperException: The absolute uri: java.sun.com/jsp/jstl/core cannot be resolve in either web. xml 或使用此 applicationorg.apache 部署的 jar 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T20:55:12.753

请记住，Cloud Foundry 使用 Tomcat 6 作为它的容器。因此，适合您情况的最佳测试用例是使用本地 tomcat 6 测试您的应用程序。

另外我假设你已经有了这个：

```
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>jstl</artifactId>
    <version>1.2</version>
</dependency> 
```

或者，如果您手动包含 JSTL jar：

```
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>jstl</artifactId>
    <version>1.2</version>
    <scope>provided</scope>
</dependency> 
```

此链接还为您提供了更多有用的详细信息：

[http://www.coderanch.com/how-to/java/JstlTagLibDefinitions](http://www.coderanch.com/how-to/java/JstlTagLibDefinitions)

让我们知道怎么回事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T23:48:08.493

您必须使 RAR 文件成为将要部署的包的一部分。这意味着您可以将它们放在资源文件夹中并在需要时引用它们。如果您可以让我们知道您想要达到的目标的更多详细信息，我们可以提供更多帮助。

您可以将您的应用程序部署到像 tomcat 这样的独立容器并查看结果吗？此外，您的问题似乎更多的是应用程序问题而不是 CloudFoundry 问题。检查类似问题： [http](http://forums.netbeans.org/topic28571.html) ://forums.netbeans.org/topic28571.html 和 [如何安装 JSTL？绝对uri：http://java.sun.com/jstl/core 无法解析](https://stackoverflow.com/questions/4928271/jstl-1-2-the-absolute-uri-http-java-sun-com-jstl-core-cannot-be-resolved)

如果您得出结论认为您的应用程序很好，请提出 CloudFoundry 票，但我认为问题出在您的应用程序上

# php - 从表单保存和加载数据而不提交

> ID：10619254
> 
> 赞同：2
> 
> 时间：2012-05-16T13:08:34.730
> 
> 标签：php, javascript, jquery, html, forms

我的任务是为一个相当大的表单编写一个加载/保存函数。这样，用户可以保存他们的工作，然后稍后再回来加载并继续工作。

我决定使用服务器端存储并将数据本地保存到 mysql 数据库。我想出了“saveForm”，它只是将 $_POST 作为一个长字符串存储到列中。

我不知道如何编写“loadForm”。

我有：

```
<form id="qa" .. "> 
    <button id="saveForm" type="submit"..."> 
    <button id="loadForm" type="submit"..."> 
    <input type="hidden" id="unique_user_id"..."> 
</form>

<javascript> 
$('#saveForm').bind({
    click: function() {
        $.ajax({ 
            type: 'post',
            url: "/saveForm.php",
            data: $("#qa").serialize(),
            success: function() {
                alert("form was submitted");
            },
        });
        return false;
    },
}); 
<javascript>

saveForm.php:  (PHP & PDO) 
// connect
insert into `saveQAForm` ($_POST['id'],var_export($_POST)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:23:40.700

当页面被加载（$(document).ready()）时， loadForm 函数被执行：一个 AJAX 请求被发送到服务器并且它响应数据来填充表单。在这种情况下，服务器必须查询数据库并返回请求的数据。您可以在不提交任何内容的情况下执行此操作。

这是一个例子：

**客户端：**

```
$(document).ready (loadForm);

function loadForm () {
  $.ajax ({
    url: '/loadForm.php' ,
    success: function (data) {
      $('#firstField').val (data.firstField);
      $('#secondField').val (data.secondField);
    }
  }); 
```

**服务器端：**查询数据库并回显数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:27:31.560

做这样的事情：

```
$(document).ready(function() {

    $('#loadForm').bind({
       click: function() {
          $.ajax({ 
             type: 'post',
             url: "/loadForm.php",
             data: 'id=123&token=8ash198hkuhd98yhk',
             success: function(data) {
                $('#first_name').val = data.first_name;
                $('#last_name').val = data.last_name;   
             }
          });
          return false;
       },
    }); 

}); 
```

**加载表单.php**

```
// Get values
$id = $_POST['id'];
$token = $_POST['token'];

// Check hash value here. Use your preferred
// database method ensuring POST values are filtered first. Then:
if($token == $row['token'])
{
   // Make DB query to get form data and return it as JSON
   return json_encode($row);
} 
```

我觉得在检索表单时传递用户/会话唯一的唯一令牌或随机数很重要，这样其他人就无法请求 ID 并获取该用户的个人信息。只是一个想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T13:25:53.203

您可以在执行 php 代码期间加载保存的数据（如果有）并在表单中填写这些数据字段。这里可能不需要 Ajax。

```
<?php //yourform.php (PHP & PDO) 
// connect
select * from `saveQAForm` where user_id = $_COOKIE['user_id']

?><input name="field1" value="<?=(isset($data['field1'])?$data['field1']:""?>" /> 
```

# objective-c - 如何在没有导航的情况下更改 iPhone 中按钮单击的视图？

> ID：10619255
> 
> 赞同：-2
> 
> 时间：2012-05-16T13:08:35.280
> 
> 标签：objective-c, xcode

我是 xCode 的新手。我的项目基于基于视图的应用程序。例如，主视图由两个按钮组成，我将它们命名为 button1 和 button2。

如果我单击 button2，它应该会在同一个主视图中出现一个新的视图区域，而无需导航。假设现在两个视图同时可见。当我单击主视图时，辅助视图应该消失或隐藏。怎么可能做到这一点？请建议我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:14:45.790

您只需要在按钮上定义一个 IBAction

第一个动作做类似的事情

```
[myViewPopUp setHidden:NO];
[myviewPopUp setAlpha:1.f]; 
```

第二个动作

```
[myViewPopUp setHidden:YES];
[myviewPopUp setAlpha:0.f]; 
```

或者您可以在单击第一个动作时创建模态序列

```
[self performSegueWithIdentifier: SEGUENAME sender:self]; 
```

第二个按钮：

```
[ViewPOPUp dismissModalViewControllerAnimated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:14:09.553

如果你正在开发 iPad 应用程序，你可以做一个模态视图，它只是一个可以是任意大小的窗口。您还可以在第一个视图上创建一个按钮，将新视图推送到导航控制器上，并在第二个视图上创建一个按钮，从导航控制器中关闭并弹出视图控制器。我会试着找一些样本来分享。

# jquery - 从处理内容页面的母版页获取 jQuery

> ID：10619258
> 
> 赞同：0
> 
> 时间：2012-05-16T13:08:47.337
> 
> 标签：jquery, asp.net, vb.net, master-pages, content-pages

当我在内容页面上时，我的 jQuery 无法加载或出现问题。

当我单击应加载 jquery 的链接时，它仅适用于我的起始页（Default.aspx）。当我在任何其他内容页面的页脚中单击相同的链接时，什么也没有发生。所以我猜我的脚本的路径或加载有问题。

我对jQuery不太熟悉，所以希望有人可以帮助我。

这是我在 masterpage 中的脚本。

```
<script type="text/javascript" src="../fancybox/jquery.fancybox-1.3.4.pack.js"</script>

<link href="../fancybox/jquery.fancybox-1.3.4.css" rel="stylesheet" type="text/css" />

<script type="text/javascript">

    $(document).ready(function () {

        $(".inline").fancybox({
            'hideOnContentClick': true,
            'titlePosition': 'inside',
            'transitionIn': 'none',
            'transitionOut': 'none'
        });

    });
</script> 
```

这就是它所说的，我母版页中的页脚。

```
<div id="footer"><a class="inline" href="#data">Viktor Nilsson</a></div>

<div style="display:none">
<div id="data">
Kontakta Viktor Nilsson<br />
Tel: 00000<br />
Email: aaa@hello.com <br /><br /> 
</div></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:46:51.503

`../fancybox/etc`您使用: 打开内容页面时，此相对路径可能是错误的链接脚本文件。假设您的主人在根文件夹中，而您的内容页面在内容文件夹中

```
webroot    
   |
   |-Master.aspx
   |-Content
   |    L contentPage.aspx
   L fancybox 
```

脚本应该变成`../../fancybox/etc`...

因此，您最好使用

```
<script src='<%= Page.ResolveUrl("~/fancybox/jquery.fancybox-1.3.4.pack.js")%>' type="text/javascript"></script> 
```

css链接也一样

# video - 服务器端视频转换器

> ID：10619259
> 
> 赞同：1
> 
> 时间：2012-05-16T13:08:49.247
> 
> 标签：video, server-side, flv, converter, mp4

我正在建立一个用 PHP 构建的 CMS，现在我需要添加一个部分，用户可以将视频从 FLV 转换为 MP4 格式。我已经搜索了脚本和解决方案，但没有任何效果。我准备为该软件付费，但“Aviberry”软件售价 5000 美元，而“sothinkmedia”在 Linux 服务器上无法正常运行。如果有人有一些肯定会起作用的东西，我将不胜感激所有建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:18:06.907

MPlayer的[`mencoder`](http://www.mplayerhq.hu/)部分应该可以做到这一点，或者试试[`ffmpeg`](http://ffmpeg.org/)。两者都可以从命令行（或脚本）调用以进行转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-24T07:20:33.133

在 java 代码中尝试 ffmpeg 命令，或者使用 Xuggler API 的另一个解决方案，它将视频文件转换为任何扩展名。

```
/* Sample Code For converting Videos in server side */

import java.io.*;
import java.io.BufferedReader;
import java.io.File;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.HashMap;
import java.util.Map;

public class Quality {

public static void main(String args[]) {

    String s = null;

    try {

    // run the Unix "ps -ef" command
        // using the Runtime exec method:
        Process p = Runtime.getRuntime().exec("ffmpeg -i /home/praveen/videos/Oracle.mp4 
-vcodec libvpx -acodec libvorbis -f webm /home/praveen/videos/Oracle.webm");
        //Process p = Runtime.getRuntime().exec("ffmpeg -i /home/praveen/resize
 images/Videos/RaymondMadetoMeasure.mp4 -vcodec libvpx -acodec libvorbis -f webm 
 /home/praveen/resize images/Videos/Raymond.webm");

        BufferedReader stdInput = new BufferedReader(new 
             InputStreamReader(p.getInputStream()));

        BufferedReader stdError = new BufferedReader(new 
             InputStreamReader(p.getErrorStream()));

        // read the output from the command
        System.out.println("Here is the standard output of the command:\n");
        while ((s = stdInput.readLine()) != null) {
            System.out.println(s);
        }

        // read any errors from the attempted command
        System.out.println("Here is the standard error of the command (if any):\n");
        while ((s = stdError.readLine()) != null) {
            System.out.println(s);
        }

        System.exit(0);
    }
    catch (IOException e) {
        System.out.println("exception happened - here's what I know: ");
        e.printStackTrace();
        System.exit(-1);
    }
 }
 } 
```

# liferay - 带有 Weblogic 10.3 的 Liferay 6 上的 LAR 导入失败

> ID：10619269
> 
> 赞同：0
> 
> 时间：2012-05-16T13:09:40.313
> 
> 标签：liferay, weblogic-10.x, noclassdeffounderror

我正在尝试从一个社区将页面导出为 LAR，并尝试将此 LAR 导入另一个社区。基本上，我们想从一个环境中导出 LAR 并导入到其他环境中。在导入期间，我们收到以下异常。我们正在使用以下配置： Liferay 6 Enterprise Edition 安装在 Weblogic 10.3 JDK 1.6 Unix 环境上

屏幕错误：访问请求的资源时发生错误。

[http://myserver.com:7003/en_GB/group/control_panel/manage?p_auth=Za3nNCBU&p_p_id=156&p_p_lifecycle=1&p_p_state=maximized&p_p_mode=view&doAsGroupId=12401&refererPlid=10165&_156_struts_action=%2Fgroup_pages%2Fimport_pages&_156_backURL=&_156_groupId=12401&_156_privateLayout=false](http://myserver.com:7003/en_GB/group/control_panel/manage?p_auth=Za3nNCBU&p_p_id=156&p_p_lifecycle=1&p_p_state=maximized&p_p_mode=view&doAsGroupId=12401&refererPlid=10165&_156_struts_action=%2Fgroup_pages%2Fimport_pages&_156_backURL=&_156_groupId=12401&_156_privateLayout=false)

引起：java.lang.NoClassDefFoundError: org.jaxen.dom4j.DocumentNavigator.getChildAxisIterator(DocumentNavigator.java:231) at org.jaxen.expr.iter.IterableChildAxis.namedAccessIterator(IterableChildAxis.java:98) 的 org/dom4j/Element在 org.jaxen.expr.DefaultNameStep.evaluate(DefaultNameStep.java:180) 在 org.jaxen.expr.DefaultLocationPath.evaluate(DefaultLocationPath.java:140) 在 org.jaxen.expr.DefaultXPathExpr.asList(DefaultXPathExpr.java:102 ）在 org.jaxen.BaseXPath.selectNodesForContext(BaseXPath.java:674) 在 org.jaxen.BaseXPath.selectNodes(BaseXPath.java:213) 在 org.jaxen.BaseXPath.selectSingleNode(BaseXPath.java:234) 在 org.dom4j .xpath.DefaultXPath.selectSingleNode(DefaultXPath.java:159) 在 org.dom4j.tree.AbstractNode.selectSingleNode(AbstractNode.java:185) 在 com.liferay.portal.xml.NodeImpl.selectSingleNode(NodeImpl.java:211) 在 com.liferay.portal.lar.LayoutImporter.importLayout(LayoutImporter.java:818) 在 com.liferay.portal.lar.LayoutImporter .importLayouts(LayoutImporter.java:346) 在 com.liferay.portal.service.impl.LayoutLocalServiceImpl.importLayouts(LayoutLocalServiceImpl.java:706) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 com.liferay.portal.spring.aop。 ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:115) 在 com.liferay.portal.spring.transaction。TransactionInterceptor.invoke(TransactionInterceptor.java:86) 在 com.liferay.portal.spring.aop.ChainableMethodAdvice.invoke(ChainableMethodAdvice.java:60) 在 com.liferay.portal.spring.aop.ChainableMethodAdvice.invoke(ChainableMethodAdvice.java: 60) 在 com.liferay.portal.spring.aop.ChainableMethodAdvice.invoke(ChainableMethodAdvice.java:60) 在 com.liferay.portal.spring.aop.ServiceBeanAopProxy.invoke(ServiceBeanAopProxy.java:93) 在 $Proxy96.importLayouts( Unknown Source) at com.liferay.portal.service.impl.LayoutServiceImpl.importLayouts(LayoutServiceImpl.java:300) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39 ) 在 sun.reflect.DelegatingMethodAccessorImpl。invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:115) at com.liferay .portal.spring.transaction.TransactionInterceptor.invoke(TransactionInterceptor.java:86) 在 com.liferay.portal.spring.aop.ChainableMethodAdvice.invoke(ChainableMethodAdvice.java:60) 在 com.liferay.portal.spring.aop.ChainableMethodAdvice .invoke(ChainableMethodAdvice.java:60) 在 com.liferay.portal.spring.aop.ChainableMethodAdvice.invoke(ChainableMethodAdvice.java:60) 在 com.liferay.portal.spring.aop.ServiceBeanAopProxy.invoke(ServiceBeanAopProxy.java:93) ) 在 com.liferay.portal.service.LayoutServiceUtil 的 $Proxy97.importLayouts(Unknown Source)。importLayouts(LayoutServiceUtil.java:173) at com.liferay.portlet.communities.action.ImportPagesAction.processAction(ImportPagesAction.java:62) at com.liferay.portal.struts.PortletRequestProcessor.process(PortletRequestProcessor.java:174) at com .liferay.portlet.StrutsPortlet.processAction(StrutsPortlet.java:190) 在 com.liferay.portlet.FilterChainImpl.doFilter(FilterChainImpl.java:70) 在 com.liferay.portal.kernel.portlet.PortletFilterUtil.doFilter(PortletFilterUtil.java :48) 在 com.liferay.portlet.InvokerPortletImpl.invoke(InvokerPortletImpl.java:653) 在 com.liferay.portlet.InvokerPortletImpl.invokeAction(InvokerPortletImpl.java:689) 在 com.liferay.portlet.InvokerPortletImpl.processAction(InvokerPortletImpl. java:361) 在 com.liferay.portal.action.LayoutAction。processPortletRequest(LayoutAction.java:840) at com.liferay.portal.action.LayoutAction.processLayout(LayoutAction.java:629) at com.liferay.portal.action.LayoutAction.execute(LayoutAction.java:240) at org.apache .struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:431) at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:236) at com.liferay.portal.struts.PortalRequestProcessor.process(PortalRequestProcessor.java :170) 在 org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196) 在 org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:432) 在 javax.servlet.http.HttpServlet。 com.liferay.portal.servlet.MainServlet.callParentService(MainServlet.java:516) 上的服务（HttpServlet.java:727）。servlet.MainServlet.service(MainServlet.java:493) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:820) 在 weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227) 在 weblogic .servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125) 在 weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:292) 在 weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:26) 在weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56) 在 com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72) 在 com.liferay.portal.kernel。 servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:113) 在 com.liferay.portal.kernel。servlet.BaseFilter.processFilter(BaseFilter.java:121) 在 com.liferay.portal.servlet.filters.secure.SecureFilter.processFilter(SecureFilter.java:199) 在 com.liferay.portal.kernel.servlet.BaseFilter.doFilter( BaseFilter.java:48) 在 com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203) 在 com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter( InvokerFilterChain.java:105) 在 com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121) 在 com.liferay.portal.servlet.filters.autologin.AutoLoginFilter.processFilter(AutoLoginFilter.java:240)在 com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48) 在 com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain。processDoFilter(InvokerFilterChain.java:203) 在 com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105) 在 com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter。 doFilter(InvokerFilter.java:75) 在 weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56) 在 weblogic.servlet.internal.RequestDispatcherImpl.invokeServlet(RequestDispatcherImpl.java:500) 在 weblogic.servlet.internal.RequestDispatcherImpl .forward(RequestDispatcherImpl.java:248) 在 com.liferay.portal.servlet.FriendlyURLServlet.service(FriendlyURLServlet.java:136) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:820) 在 weblogic.servlet。 weblogic 上的 internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)。servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125) 在 weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:292) 在 weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:26) 在 weblogic .servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56) 在 com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72) 在 com.liferay.portal.kernel.servlet .BaseFilter.processFilter(BaseFilter.java:121) 在 com.liferay.portal.servlet.filters.strip.StripFilter.processFilter(StripFilter.java:301) 在 com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter .java:48) 在 com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203) 在 com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121) 的 com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105) .liferay.portal.servlet.filters.secure.SecureFilter.processFilter(SecureFilter.java:199) 在 com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48) 在 com.liferay.portal.kernel .servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203) 在 com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105) 在 com.liferay.portal.kernel .servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:113) 在 com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain。doFilter(InvokerFilterChain.java:113) 在 com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121) 在 com.liferay.portal.servlet.filters.etag.ETagFilter.processFilter(ETagFilter.java: 55) 在 com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48) 在 com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203) 在 com .liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105) 在 com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121) 在 com.liferay.portal .servlet.filters.autologin.AutoLoginFilter.processFilter(AutoLoginFilter.java:240) 在 com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48) 在 com。liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203) 在 com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105) 在 com. liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:75) 在 weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56) 在 weblogic.servlet.internal.RequestDispatcherImpl.invokeServlet( RequestDispatcherImpl.java:500) 在 weblogic.servlet.internal.RequestDispatcherImpl.forward(RequestDispatcherImpl.java:248) 在 com.liferay.portal.servlet.I18nServlet.service(I18nServlet.java:102) 在 javax.servlet.http.HttpServlet .service(HttpServlet.java:820) 在 weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction。在 weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:292) 在 weblogic.servlet.internal.TailFilter 上运行 (StubSecurityHelper.java:227) 在 weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125) .doFilter(TailFilter.java:26) 在 weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56) 在 com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72 ) 在 com.liferay.portal.servlet.filters.sso.ntlm.NtlmPostFilter.processFilter(NtlmPostFilter.java:83) 在 com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121) 在 com。 liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48) 在 com.liferay.portal.kernel.servlet.filters.invoker。InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203) 在 com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105) 在 com.liferay.portal.kernel.servlet.BaseFilter.processFilter( BaseFilter.java:121) 在 com.liferay.portal.sharepoint.SharepointFilter.processFilter(SharepointFilter.java:80) 在 com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48) 在 com.liferay .portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203) 在 com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105) 在 com.liferay .portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121) 在 com.liferay.portal.servlet.filters.virtualhost。VirtualHostFilter.processFilter(VirtualHostFilter.java:207) at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48) at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter( InvokerFilterChain.java:203) 在 com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105) 在 com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDirectCallFilter( InvokerFilterChain.java:184) 在 com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:92) 在 org.tukey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFilter.java: 738）在com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter（InvokerFilterChain.java：203) 在com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105) 在com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDirectCallFilter(InvokerFilterChain.java: 164) 在 com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:92) 在 com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDirectCallFilter(InvokerFilterChain.java: 164) 在 com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:92) 在 com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java: 75) 在 weblogic.servlet.internal 的 weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)。WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3592) 在 weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321) ... 6 更多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T22:58:25.663

`Jaxen`并且`dom4j`是驻留在其`WEB-INF/lib`文件夹中的 Liferay 依赖项，同时`jaxen`也存在于 Weblogic 系统类路径中。因此，当 Liferay`dom4j`查找时`jaxen`，首先加载应用程序服务器类路径上的 jar，然后它会尝试查找`dom4j`并且看不到门户应用程序 jar。

`dom4j.jar`您可以尝试通过从 Liferay 移动到 Weblogic 系统类路径或通过`prefer-web-inf-classes`在 Liferay 应用程序的 WEB-INF/weblogic.xml 部署描述符中设置选项来解决这种情况。

[您可以在此](https://stackoverflow.com/q/9002082/546117)问题和[该](http://docs.oracle.com/cd/E15051_01/wls/docs103/programming/classloading.html)文档中找到其他信息。

# php - 使用 php 和 ExtJs 的简单文件上传不起作用

> ID：10619270
> 
> 赞同：1
> 
> 时间：2012-05-16T13:09:42.357
> 
> 标签：php, file-upload, extjs, extjs4

我需要使用 php 从 Ext 应用程序上传文件的最简单的解决方案。我是一个完全的 php 新手，所以我没有收到我收到的错误，只能猜测是什么导致了它们。在前端我有一个简单的形式：

```
Ext.create('Ext.form.Panel', {
    width: 300,
    renderTo: Ext.getBody(),
    frame: false,
    title: 'File Upload Form',
    bodyPadding: '10 10 0',

    defaults: {
        anchor: '100%',
        allowBlank: false,
        msgTarget: 'side',
        labelWidth: 50
    },

    items: [{
        xtype: 'filefield',
        id: 'form-file',
        emptyText: 'Select mpp file',
        fieldLabel: 'File',
        name: 'mpp-file',
        buttonText: '',
        buttonConfig: {
            iconCls: 'upload-icon'
        }
    }],
    buttons: [{
        text: 'Upload',
        handler: function(){
            var form = this.up('form').getForm();
            if(form.isValid()){
                form.submit({
                    url: 'msp-load.php',
                    waitMsg: 'Loading data...',
                    success: function(fp, o) {
                        msg('Success', 'Data from .mpp file loaded ');
                    }
                });
            }
        }
    }]
}) 
```

msp-upload.php 如下所示：

```
<?
if(isset($_FILES)){
    $file_tmp  = $_FILES['mpp-file']['tmp_name'];
    $file_name = $_FILES['mpp-file']['name'];
    $file_size = $_FILES['mpp-file']['size'];

    //echo ($file_tmp.", ".$file_name.", ".$file_size);

    if(is_uploaded_file($file_tmp)) {
        if(move_uploaded_file($file_tmp, "tmp/$file_name")){
            echo '{success: true}';
        } else {
            echo '{success: false}';
        }    
    }  else{
        echo '{success: false}';
    }
}
?> 
```

单击“上传”后，我得到：

`uncaught exception: Ext.JSON.decode(): You're trying to decode an invalid JSON String: <br> <b>Warning</b>: move_uploaded_file(tmp/MSP1.mpp) [<a href="function.move-uploaded-file">function.move-uploaded-file</a>]: failed to open stream: No such file or directory in <b>/Library/WebServer/Documents/examples/MSProject_import/msp-load.php</b> on line <b>10</b><br> <br> <b>Warning</b>: move_uploaded_file() [<a href="function.move-uploaded-file">function.move-uploaded-file</a>]: Unable to move '/private/var/tmp/phpJVDktB' to 'tmp/MSP1.mpp' in <b>/Library/WebServer/Documents/examples/MSProject_import/msp-load.php</b> on line <b>10</b><br> {success: false}`

这个：'没有这样的文件......'错误来自哪里？它找不到上传的文件，还是别的什么？我的服务器用户具有管理员权限，因此与权限无关。

我正在使用带有 PHP 5.3.6 的内置 OSX 10.7 服务器。error.log 中没有错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:28:13.870

如上所述，有两个可能的问题。

1.  路径错误（基本上您要上传的路径无效）
2.  或者给出了错误的许可。(CHMOD 777)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:13:43.707

您的 msp-upload.php 收到错误消息：无法将 '/private/var/tmp/phpJVDktB' 移动到 'tmp/MSP1.mpp' 您必须设置具有写入权限的完整目标路径

```
 if(move_uploaded_file($file_tmp, dirname(__FILE__)."/tmp/$file_name")){
        echo '{success: true}';
    } else {
        echo '{success: false}';
    } 
```

# php - Drupal 7 视图中的 PHP 相对日期过滤器

> ID：10619273
> 
> 赞同：0
> 
> 时间：2012-05-16T13:10:06.380
> 
> 标签：php, drupal-7, relative-date

我正在 Drupal 中构建一个视图，并且在围绕日期设置过滤条件时遇到问题。

我的内容类型是“本周电影”。它存储了电影的基本属性，如电影名称、导演、指导等级、主演等。它还有一个日期，说明电影何时开始为本周电影，何时结束。

目前，本周电影（电影 A）从周二一直持续到下周一。下周二，一部新电影（电影 B）将作为本周电影放映。

当使用运算符“等于”和“下周一”相对结束日期进行过滤时，我想我总是会取回本周的当前电影。但是，在星期一我应该看到电影 A，因为它仍然有效，但“下周一”是下一周，所以我只看到“电影 B”。

在这种情况下，我有什么建议可以说“如果今天不是星期一，下周一给我看，否则今天给我看”？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:56:39.333

我想我明白了：

开始日期 >= -6 天 结束日期 <= +13 天

# iphone - 如何搜索导航栏的子视图

> ID：10619277
> 
> 赞同：1
> 
> 时间：2012-05-16T13:10:14.010
> 
> 标签：iphone, ios, ios4, cocos2d-iphone

我有一个小问题...如何搜索导航栏的子视图？如何获取导航栏的子视图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:34:27.373

如果我正确理解了您的问题，那么您可以这样做：

```
for (UIView *temp in self.navigationController.navigationBar.subviews)
{        
    if ([temp isKindOfClass:[UIButton class]]) 
    {
        NSLog(@"is button !");

        UIButton *tempButton = (UIButton *)temp ;
    }
    else if ([temp isKindOfClass:[UILabel class]])
    {

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:48:42.703

您不必搜索导航栏的子视图来更改标题标签的属性。您可以访问 viewcontroller 的 navigationItem 的 titleView 并将其设置为您使用自定义字体创建的标签。

这方面的例子可以在[这个](https://stackoverflow.com/questions/5832036/change-the-navigation-bars-font)答案中看到。

另一种解决方案是使用导航控制器 UINavigationBar 的 titleTextAttributes 属性来设置标题的字体。更多信息[在这里](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationBar_Class/Reference/UINavigationBar.html#//apple_ref/doc/c_ref/UINavigationBar)。此解决方案可能是最正确的方法，但它仅适用于 iOS 5 及更高版本。

# javascript - Javascript代码错误

> ID：10619279
> 
> 赞同：0
> 
> 时间：2012-05-16T13:10:29.003
> 
> 标签：javascript

您好，任何人都可以了解以下代码及其相关错误。

**代码：**

```
Text = " <a href=""#"" onclick=""javascript:popup('" & dvStressdays.ClientID & "');" & _
                                               hdnCurrentSequenceName.ClientID & ".value='" & sequenceNode.Value & _
                                               hdnCurrentSequenceTestTypeId.ClientID & ".value='" & intSequencesTestTypesId & _
                                               "'; "">Change Stressdays</a>" 
```

**错误**

预期的 ';'

信息被appriciated！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:17:23.747

设置 hdnCurrentSequenceName.ClientID 的值后，您缺少一个结束分号。

```
...
hdnCurrentSequenceName.ClientID & ".value='" & sequenceNode.Value & "';" & _
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:19:17.187

（以下假设是 .NET 框架或具有类似功能的东西）

*   您应该使用字符串生成器，而不是字符串连接。
*   您应该使用 string.format 在字符串中放置变量值。
*   您的 javascript 输出格式错误
*   锚标签没有`value`属性。

    ```
    Text = String.Format("<a href=""#"" onclick=""javascript:popup('{0}');"">Change Stressdays</a>", dvStressdays.ClientID) 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T13:17:22.797

你有一个额外的`javascript:`，但这并没有破坏任何东西。正如浏览器所说，真正的错误是您缺少分号（和右引号）。我将其添加回来（第二行末尾）。

```
Text = " <a href=""#"" onclick=""popup('" & dvStressdays.ClientID & "');" & _
       hdnCurrentSequenceName.ClientID & ".value='" & sequenceNode.Value & "';" & _
       hdnCurrentSequenceTestTypeId.ClientID & ".value='" & intSequencesTestTypesId & _
       "'; "">Change Stressdays</a>" 
```

# php - 如何使用 PHP DOMDocument 删除属性？

> ID：10619282
> 
> 赞同：2
> 
> 时间：2012-05-16T13:10:39.643
> 
> 标签：php, domdocument

使用这段 XML：

```
<my_xml>
  <entities>
    <image url="lalala.com/img.jpg" id="img1" />
    <image url="trololo.com/img.jpg" id="img2" />
  </entities>
</my_xml> 
```

我必须摆脱图像标签中的所有属性。所以，我这样做了：

```
<?php

$article = <<<XML
<my_xml>
  <entities>
    <image url="lalala.com/img.jpg" id="img1" />
    <image url="trololo.com/img.jpg" id="img2" />
  </entities>
</my_xml>  
XML;

$doc = new DOMDocument();
$doc->loadXML($article);
$dom_article = $doc->documentElement;
$entities = $dom_article->getElementsByTagName("entities");

foreach($entities->item(0)->childNodes as $child){ // get the image tags
  foreach($child->attributes as $att){ // get the attributes
    $child->removeAttributeNode($att); //remove the attribute
  }
}

?> 
```

不知何故，当我尝试在 foreach 块中删除一个 from 属性时，看起来内部指针丢失了，并且没有删除这两个属性。

还有另一种方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T13:27:22.853

将内部`foreach`循环更改为：

```
while ($child->hasAttributes())
  $child->removeAttributeNode($child->attributes->item(0)); 
```

或从前删除：

```
if ($child->hasAttributes()) { 
  for ($i = $child->attributes->length - 1; $i >= 0; --$i)
    $child->removeAttributeNode($child->attributes->item($i));
} 
```

或制作属性列表的副本：

```
if ($child->hasAttributes()) {
  foreach (iterator_to_array($child->attributes) as $attr)
    $child->removeAttributeNode($attr);
} 
```

这些中的任何一个都可以。

# php - 更新mysql数据库中的一行？

> ID：10619284
> 
> 赞同：0
> 
> 时间：2012-05-16T13:10:50.500
> 
> 标签：php, mysql, html

使用 INSERT、REPLACE 或 ON DUPLICATE KEY UPDATE 来更新数据库中的一行是否更好？

我目前正在使用：

```
mysql_query("insert into pages (pages_id, pagename, pagedesc, pagekey, pagecont) values('$pages_id', $pagename', '$pagedesc', '$pagekey', '$pagecont')"); 
```

在数据库中创建新行。

pages_id 是 mysql 数据库中的 auto_increment 字段。我不确定哪个是更新数据库中现有行的最佳方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:12:36.953

具有讽刺意味的是，您使用[`UPDATE`](http://dev.mysql.com/doc/refman/4.1/en/update.html)SQL 来更新一行。

```
UPDATE pages SET ... WHERE pages_id = $pages_id; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T13:18:46.543

如果您要更新现有行（并且您 100% 确定它存在），请务必使用 UPDATE。

但

如果您要“更新”可能不存在的行，请选择“INSERT...ON DUPLICATE KEY UPDATE”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T13:12:25.863

使用`UPDATE`并指定 pages_id？

这里有一个教程`UPDATE`：[更新教程](http://www.w3schools.com/php/php_mysql_update.asp)

小例子：

```
mysql_query("UPDATE pages SET pagename = $pagename WHERE pages_id = $page_id"); 
```

不过，在完全不同的情况下，停止使用 mysql* 函数并开始使用 PDO，它更安全！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T13:21:58.333

`INSERT`总是比 更重的操作`UPDATE`。`INSERT`必须为新插入的项目分配内存，同时`UPDATE`在表上执行搜索并且没有寻找新内存。当您必须在短时间内插入许多记录时，这种差异变得至关重要。最好`INSERT`在数据库不是很忙的时候，然后`UPDATE`在必要的时候。

# powershell - 通过 Powershell 连接到 VPN

> ID：10619285
> 
> 赞同：22
> 
> 时间：2012-05-16T13:10:54.540
> 
> 标签：powershell, vpn

我希望我的 Windows 在加载后立即连接到 VPN 服务器。我如何使用 Powershell 来做到这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2017-07-06T20:27:41.047

试试这个适用于 Windows 10

```
 $vpnName = "YOUR_VPN_NAME";
    $vpn = Get-VpnConnection -Name $vpnName;
    if($vpn.ConnectionStatus -eq "Disconnected"){
    rasdial $vpnName;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:34:53.437

你可以尝试这样的事情：

我还没有测试它是否有效。我安装了[PowerShell V3 Beta](http://www.microsoft.com/en-us/download/details.aspx?id=28998) - 可能需要运行这些命令。

```
Register-ScheduledJob -name ConnectVPN -ScriptBlock { & rasphone MyVpnConnection 
$trigger = New-JobTrigger -AtLogOn
Add-JobTrigger -Name ConnectVPN -Trigger $trigger
Get-ScheduledJob -Name ConnectVPN | Get-JobTrigger 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-01T06:47:20.200

除了其他答案外，Windows 10 还通过名为 Always On 的配置原生支持此功能。有关始终开启的更多详细信息，请访问[https://docs.microsoft.com/en-us/windows/access-protection/vpn/vpn-auto-trigger-profile](https://docs.microsoft.com/en-us/windows/access-protection/vpn/vpn-auto-trigger-profile)

您可以通过 MDM 甚至使用 WMI/Powershell 进行部署

部署参考

VPN 2 CSP：[https ://docs.microsoft.com/en-us/windows/client-management/mdm/vpnv2-csp](https://docs.microsoft.com/en-us/windows/client-management/mdm/vpnv2-csp)

CSP 到 WMI 桥：[https ://docs.microsoft.com/en-us/windows/client-management/mdm/using-powershell-scripting-with-the-wmi-bridge-provider](https://docs.microsoft.com/en-us/windows/client-management/mdm/using-powershell-scripting-with-the-wmi-bridge-provider)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-15T09:18:17.790

Windows VPN 设置中的“自动连接”复选框对我来说效果很好。但是在配置拆分隧道以连接到锁定到 VPN IP 地址的 VM 后，需要断开/重新连接 VPN 连接才能生效。问题在于`rasdial /disconnect`禁用 AutoTrigger 设置。以下似乎可以重新启用自动触发。

在此处设置特定的 VPN 配置文件名称或使用从 Get-VpnConnection 返回的第一个：

```
$vpnProfileName = Get-VpnConnection | select -first 1 -ExpandProperty Name 
```

显示如何设置拆分隧道的可选示例：

```
# Enable split-tunneling to a specific address
# Name of VM restricted to VPN IP addresses
$vmName = "myserver.eastus.cloudapp.azure.com"
$ip = $(Resolve-DnsName -name $vmName  | where section -eq answer).IPAddress
Add-VpnConnectionRoute -Name $vpnProfileName -DestinationPrefix "$ip/32"

# Rasdial disconnect will turn off AutoTriggering
rasdial $vpnProfileName /disconnect

# Check VPN status
Get-VpnConnection | select Name, IsAutoTriggerEnabled, ConnectionStatus 
```

重新启用自动触发并启动 VPN 连接：

```
# Remove Disabled Profile
$disabledProfiles = [string[]](Get-ItemPropertyValue HKLM:SYSTEM\CurrentControlSet\Services\RasMan\Config -name AutoTriggerDisabledProfilesList)
$disabledProfiles = $disabledProfiles | where { $_ -ne $vpnProfileName }
Set-ItemProperty HKLM:SYSTEM\CurrentControlSet\Services\RasMan\Config -name AutoTriggerDisabledProfilesList -Type MultiString -Value $disabledProfiles

# Remove AutoTriggeringDisabled
Remove-ItemProperty HKLM:SYSTEM\CurrentControlSet\Services\RasMan\Config -name AutoTriggeringDisabled 

# Add trigger to a process that is certain to be running. Will trigger on process launch as well as if it is already running.
# Adding trigger even it already exists seems to be necessary to get it to trigger after rasdial /disconnect
Add-VpnConnectionTriggerApplication -Name $vpnProfileName –ApplicationID "C:\Windows\explorer.exe" -ErrorAction Ignore 

# Check VPN status
Get-VpnConnection | select Name, IsAutoTriggerEnabled, ConnectionStatus 
```

# ruby-on-rails - 使用 Oj JSON 解析器无法提高性能

> ID：10619287
> 
> 赞同：6
> 
> 时间：2012-05-16T13:11:05.303
> 
> 标签：ruby-on-rails, json

根据[https://www.ruby-toolbox.com/categories/JSON_Parsers](https://www.ruby-toolbox.com/categories/JSON_Parsers)，我应该在使用 Oj 序列化哈希时获得疯狂的加速。我已经安装了最新的 gem，将它包含在我的 Gemfile 中，运行 bundle install，并且可以确认它正在被使用。[如何_知道_在我的 Rails 3 应用程序中哪个 JSON 渲染器处于活动状态？](https://stackoverflow.com/questions/10589342/how-can-know-which-json-renderer-is-active-in-my-rails-3-app)但是，在呈现 JSON 响应方面绝对没有加速。

在一个库中，我使用 Ruby 的 mysql 模块查询一个遗留的 MySQL 数据库。我将字符串转换为值，并返回一个哈希数组。这工作正常，大约需要 1.5 到 2 秒。应该，这里有一大块数据正在被检索。

控制器

```
@data = Gina.points(params[:project], params[:test],
    session[:username], session[:password])
respond_to do |format|
    format.html { render :text => @data }
    format.json { render :json => @data } # :text => MultiJson.engine
end 
```

图书馆

```
dbh = Mysql.real_connect(@@host, u, p)
res = dbh.query("SELECT * FROM #{d}.#{t}")
    @data = []
    res.each_hash do |row|
    obj = {}
        row.each_pair do |k, v|
            v.match(/\A[+-]?\d+?(\.\d+)?\Z/) == nil ? obj[k] = v : obj[k] = v.to_f
        end
    @data << obj
end 
```

我的问题是“渲染：json”部分。对于大约 1.5 MB 的数据，这可能需要大约 8 或 9 秒。在较大的数据集（3.5 - 4 MB）上，它可能需要 25 或 30 个。我已经完全使用 JSON 编写了一个字符串和库中的“人工”分隔符，在视图中使用来自 jQuery 的普通 .get , 然后在浏览器中将字符串解析为 JS 中的哈希值。我在较小的集合上减少到 1.4 秒，在较大的集合上减少到 5 秒。

JSON 方法简洁易懂，并且符合设计工作的方式。字符串解析方法是一种肮脏的技巧，我不喜欢它，但它快了六倍。在比较这两种方法时我学到的有趣的事情是，将我的 hacky 字符串“序列化”为 JSON 就像“渲染”文本一样快（因为真的没什么可做的）。这个过程的密集部分实际上是序列化*hash*，但这正是我希望“更快”的 JSON 库做得更好的事情。

我是从根本上误解了 Oj 应该为我做什么，还是我只是做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T07:18:07.110

您没有使用 Oj！除非您明确调用它，否则它不会自动生效。将您的原始 JSON 渲染替换为

```
Oj.dump(args) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-03T03:05:46.543

正如[这篇博](http://devblog.agworld.com.au/post/42586025923/the-performance-of-to-json-in-rails-sucks-and-theres)文所指出的，Rails 强制 json 编码方法`to_json`使用自己的编码实现。这会影响基类，例如 Array、Hash 和 Integer。

这意味着在 json 编码期间，默认情况下根本不使用 multi_json 和 oj，这就是为什么你觉得它很慢。

正如@yujingz 指出的那样，您可以手动使用 Oj 进行编码。

作为替代方案，我使用博客文章创建[补丁 gem](https://github.com/GoodLife/rails-patch-json-encode)来使用 MultiJson，它应该自动使用 Oj 进行编码。

# javascript - CRM 2011 OData 关系查询教程

> ID：10619290
> 
> 赞同：1
> 
> 时间：2012-05-16T13:11:15.860
> 
> 标签：javascript, dynamics-crm-2011, odata

我正在寻找一些关于 CRM 2011 中的 oData 的教程。

特别是，我正在寻找有关如何使用 OData 查询实体关系的详细、深入的解释和示例

请不要将我指向 CRM 2011 OData 查询设计器。

虽然我同意该工具很棒，但它没有解释为什么/如何以它们的方式生成查询。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T10:30:26.737

我建议你先看看这个[视频](http://channel9.msdn.com/Series/DynamicsCRM2011/oData-endpoint)。这个链接对我很有用：

*   [MSDN - 使用 REST 端点的 OData 系统查询选项](http://msdn.microsoft.com/en-us/library/gg309461)
*   [CRM 2011：使用 Javascript 获取实体](https://stackoverflow.com/questions/7874562/crm-2011-getting-entity-with-javascript)
*   [在 Microsoft Dynamics CRM 2011 中使用 OData 检索](http://blogs.msdn.com/b/crm/archive/2011/03/02/using-odata-retrieve-in-microsoft-dynamics-crm-2011.aspx)
*   [数据](http://www.odata.org/media/30002/OData.html)

# blackberry - 黑莓：KeywordFilterField 搜索 UI 改进

> ID：10619293
> 
> 赞同：0
> 
> 时间：2012-05-16T13:11:22.897
> 
> 标签：blackberry, blackberry-jde

我在使用关键字过滤器字段的搜索功能时遇到 UI 问题。我想将关键字过滤字段的搜索栏设置为在屏幕上保持冻结状态，这样如果用户在关键字过滤字段中向下滚动（具有大数据），搜索栏仍会显示。使用此功能的一个示例是在黑莓手机的联系人（地址簿屏幕）中，您向下滚动，即使向下滚动，搜索栏仍然固定在顶部位置。

谁能给我一个冻结keywordfilterfield的搜索栏的代码或方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:01:05.380

您可以轻松地将 KeywordFilterField 的搜索字段用作屏幕标题：

```
yourScreen.setTitle(yourKeywordFilterField.getKeywordField()); 
```

如果您将标题部分用于其他信息，请尝试将列表字段包装在`VerticalFieldManager`with style`Manager.VERTICAL_SCROLL | Field.USE_ALL_HEIGHT`中。

或者，为了完全控制，您可以编写一个自定义`Manager`，首先使用其首选高度绘制关键字字段，然后`VerticalFieldManager`使用包含列表字段的其余可用高度绘制 a。但由于正确的焦点处理和布局，这更难实现。这里有一些链接可以开始编写自定义管理器：

[如何 - 为屏幕创建自定义布局管理器](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/800505/800508/How_To_-_Create_a_custom_layout_manager_for_a_screen.html?nodeid=800263&vernum=0)

[创建自定义字段和管理器比您想象的要容易！](http://issuu.com/halloula/docs/dev19)

# linux - libaio.so.1：无法打开共享对象文件

> ID：10619298
> 
> 赞同：53
> 
> 时间：2012-05-16T13:11:54.503
> 
> 标签：linux, oracle, oracle-call-interface

我有一个简单的测试程序，当我运行时，我得到：

```
./hello: error while loading shared libraries: libaio.so.1: cannot open shared object file: No such file or directory 
```

我像这样链接它：

```
$(CC) $(CCFLAGS) -o hello hello.o -L../ocilib-3.9.3/src/.libs -L../instantclient_11_2 -locilib 
```

我的 LD_LIBRARY_PATH 包含以下内容：

```
LD_LIBRARY_PATH=../ocilib-3.9.3/src/.libs:../instantclient_11_2:/usr/lib 
```

/usr/lib 看起来像这样：

```
Linux$ ls -l /usr/lib/libaio*
lrwxrwxrwx  1 root root   15 Nov  5  2008 /usr/lib/libaio.so.1 -> libaio.so.1.0.1
-rwxr-xr-x  1 root root 2632 Sep 16  2005 /usr/lib/libaio.so.1.0.0
-rwxr-xr-x  1 root root 2628 Sep 16  2005 /usr/lib/libaio.so.1.0.1 
```

ldd hello 的输出：

```
libocilib.so.3 => ../ocilib-3.9.3/src/.libs/libocilib.so.3 (0x0000002a95558000)
libc.so.6 => /lib64/tls/libc.so.6 (0x0000003811200000)
libclntsh.so.11.1 => ../instantclient_11_2/libclntsh.so.11.1 (0x0000002a956c4000)
/lib64/ld-linux-x86-64.so.2 (0x000000552aaaa000)
libnnz11.so => ../instantclient_11_2/libnnz11.so (0x0000002a97f56000)
libdl.so.2 => /lib64/libdl.so.2 (0x0000003811500000)
libm.so.6 => /lib64/tls/libm.so.6 (0x0000003811700000)
libpthread.so.0 => /lib64/tls/libpthread.so.0 (0x0000003811b00000)
libnsl.so.1 => /lib64/libnsl.so.1 (0x0000003819000000)
libaio.so.1 => not found 
```

我希望我在这里遗漏了一些简单的东西。oracle instantclient 软件包似乎需要 libaio，但这似乎已经安装了，有什么问题吗？

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2014-05-20T10:25:46.000

安装软件包：

```
sudo apt-get install libaio1 libaio-dev 
```

或者

```
sudo yum install libaio 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-05-16T13:37:00.453

它看起来像 32/64 位不匹配。*ldd*输出显示主要选择了来自的库`/lib64`。这表明您已经安装了 64 位版本的 Oracle 客户端并创建了 64 位可执行文件。但`libaio.so`可能是 32 位库，不能用于您的应用程序。

因此，您要么需要 64 位版本的 libaio，要么创建 32 位版本的应用程序。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-12-30T22:35:02.710

万一没有 sudo 权限，但仍需要安装库。

使用以下方式下载软件/库的源代码：

```
apt-get source libaio 
```

或者

```
wget https://src.fedoraproject.org/lookaside/pkgs/libaio/libaio-0.3.110.tar.gz/2a35602e43778383e2f4907a4ca39ab8/libaio-0.3.110.tar.gz 
```

解压库

使用以下命令安装到用户特定的库：

```
make prefix=`pwd`/usr install #(Copy from INSTALL file of libaio-0.3.110) 
```

或者

```
make prefix=/path/to/your/lib/libaio install 
```

将 libaio 库包含到您的应用程序的 LD_LIBRARY_PATH 中：

```
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/path/to/your/lib/libaio/lib 
```

现在，您的应用应该能够找到 libaio.so.1

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-08T01:47:48.407

我有同样的问题，结果我没有安装库。

这个链接非常有用。

[http://help.directadmin.com/item.php?id=368](http://help.directadmin.com/item.php?id=368)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-09T11:47:37.533

我必须执行以下操作（在 Kubuntu 16.04.3 中）：

1.  安装库：`sudo apt-get install libaio1 libaio-dev`
2.  查找库的安装位置：`sudo find / -iname 'libaio.a' -type f`-> 导致`/usr/lib/x86_64-linux-gnu/libaio.a`
3.  将结果添加到环境变量：`export LD_LIBRARY_PATH="/usr/lib/oracle/12.2/client64/lib:/usr/lib/x86_64-linux-gnu"`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-09T06:14:33.603

在 openSuse 12.3 上，解决方案是另外安装 32 位版本的 libaio。Oracle 现在似乎需要这个，尽管它在 12.1 上运行时没有 32 位版本。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-12-08T09:49:47.357

我有一个类似的问题。

我发现

> 康达安装pyodbc

是错的！

当我使用

> apt-get 安装 python-pyodbc

我解决了这个问题。</p>

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-27T15:30:33.283

```
sudo yum install libnsl 
```

为我工作。[https://github.com/knapsu/plex-media-player-appimage/issues/13](https://github.com/knapsu/plex-media-player-appimage/issues/13)

# c++ - 通过 PostMessage 发送/接收字符串

> ID：10619301
> 
> 赞同：7
> 
> 时间：2012-05-16T13:12:04.230
> 
> 标签：c++, vb.net, winapi, wndproc, param

尽管网上已经~~有一些~~资源可以解决这个粗略的话题，但我仍然没有找到适合我的答案。

我希望在我的**VB.net**进程和我的**C++**进程之间进行充分的通信。我希望能够在 C++ 进程之间发送一个字符串*，*但目前我需要实现：

**将字符串发送**到**C++**进程并进行处理。

这造成了一些我不确定的点，但我会尽量保持简单......

**在VB**中使用以下函数声明；

```
Declare Function PostMessage Lib "user32" Alias "PostMessageA" ( _
    ByVal hWnd As IntPtr, _
    ByVal Msg As UInteger, _
    ByVal wParam As IntPtr, _
    ByVal lParam As String _
) As Boolean 
```

并像这样发送消息；

```
PostMessage(hWnd, SM_PING, Nothing, "schlampe") 
```

使用以下方法声明在**C++**中捕获消息；

```
LRESULT CALLBACK newWndProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam) 
```

并测试我是否可以使用以下方法访问字符串；

```
char buffer[50];
sprintf(buffer, "Received: %s", (char *)lParam);
MsgBox(buffer); 
```

我浏览了很多我认为不必要的细节，但是问一下，它就会给你。

我的问题是消息**已被**接收并“处理”......但是由 C++ 进程创建的消息框不包含我的测试消息（它显示为：“已接收：”）。

那么，如何通过 PostMessage/SendMessage 从 VB 向 C++ 发送字符串？

* * *

* * *

* * *

# 解决方案：

请参阅解决方案的公认答案......但此外，这是我接收字符串的方式（C++）：

```
LRESULT CALLBACK newWndProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam) {
    switch(uMsg) {
        case WM_COPYDATA:
            MsgBox("Received a WM_COPYDATA message");
            COPYDATASTRUCT * pcds = (COPYDATASTRUCT *)lParam;
            LPCTSTR lpszString = (LPCTSTR)(pcds->lpData);
            MsgBox(lpszString);
            return 1L;
    }
    return CallWindowProc(instance->OriginalProcessor(), hwnd, uMsg, wParam, lParam);
} 
```

最后，我在这里使用了 IPC 示例[来](http://www.codeproject.com/Articles/22402/Interprocess-Communication-Between-NET-and-MFC-Usi)发送*消息*。此示例使用 C# 发送消息，但我只需要这个概念（更不用说将此类代码转换为 VB 是在公园散步）。请注意，在我的 VB 实现中，我不需要用空字符终止字符串。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T13:14:43.383

使用 Windows 消息时，应使用[`WM_COPYDATA`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms649011.aspx)在进程之间传输字符串数据。如果您使用自定义消息 ID，则不会在两个不同的进程地址空间之间编组字符串数据。

这就是您当前的代码失败的原因。接收进程在调用进程的地址空间中传递`lParam`一个指向内存的指针。当然，这在其他过程中毫无意义。

虽然还有其他方法可以使用 Windows 消息在进程之间编组这样的数据，但这`WM_COPYDATA`是迄今为止最简单的方法。如果您的要求变得更加复杂，那么您可能需要考虑比 Windows 消息更全面的 IPC 方法。

# javascript - 选择所有级别的所有孩子

> ID：10619304
> 
> 赞同：1
> 
> 时间：2012-05-16T13:12:25.690
> 
> 标签：javascript, jquery

我有一个脚本如下：

```
$('.Addable').find('input').each(function () {
            if ($(this).attr('name')) {
                var Name = $(this).attr('name');
                var Number = Name;
                if (Name.substring(Name.length - 1) == ']') {
                    var Fi = Name.lastIndexOf("[") + 1;
                    var Li = Name.lastIndexOf("]");
                    if (Fi > -1) {
                        Number = Name.substring(Fi, Li);
                        if (Number > Indx) {
                            Number = Number - 1;
                            $(this).attr('name', Name.substring(0, Fi) + Number + ']');
                        }
                    }
                }
            }
        }); 
```

因此，`input`完美地更改 s 的名称，现在我需要更改所有元素，不仅`input`像`select`s 我认为将第一行替换为：

```
$('.Addable').children().each(function () { 
```

但这不起作用，那么您对选择所有子元素有什么建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T13:15:20.940

对于所有后代元素，您可以执行@gdoron 建议的操作。如果您要查找所有表单字段，而不仅仅是`input`'s，您可以使用`:input`选择器，它也将匹配`select`,`textarea`等：

```
$('.Addable').find(':input').each(function() { ... }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T13:13:44.200

> 那么你对选择所有子元素有什么建议呢？

**选项：**

```
$('.Addable *').each(function () {
$('.Addable').find('*').each(function () { 
```

`jQuery('*')` [**文档**](http://api.jquery.com/all-selector/)：

> 描述：选择所有元素。
> *警告：所有或通用选择器非常慢，除非单独使用。*

# jquery - 将鼠标单击时的图像交换应用于现有的 CSS 鼠标悬停

> ID：10619306
> 
> 赞同：0
> 
> 时间：2012-05-16T13:12:27.997
> 
> 标签：jquery, css, mouseover, onmouseclick

我碰壁了，我快到最后期限了。所以这里。

我有一个 3x3 网格，在 8 个外部 div 中的每一个中都有一个背景图像，当悬停在上面时，使用 CSS 会发生变化。

中央 div 有使用一点 jQuery 的文本，显示每个对应的 div 被单击的时间。

我需要发生的是，当单击带有图像的外部 div 并显示文本时，该 div 中的背景图像保持悬停状态，直到单击另一个，理想情况下使用现有图像。

悬停的 CSS 是 -

```
.br a {
display:block;
width:250px;
margin:0;
height:225px;
float:left;
background:url('wp-content/themes/bondwoodhouse/img/br.png');
background-position:0px 0px;}
.br a:hover {
background:url('wp-content/themes/bondwoodhouse/img/br.png');
background-position:250px 250px; } 
```

jQuery是-

```
$(document).ready(function(){
$('a').click(function () {
var divname= this.name;
$("#"+divname).show("fadeIn").siblings().hide("fadeIn");
});
}); 
```

所有的div都这样排列——

```
<div class="br"><a href="#" onclick="return false;" name="div9"></a></div> 
```

如前所述，有 8 个单独的类，br 是右下角的类。

这可能相当容易，但我对 jQuery 很迷茫。我假设我可以将一些东西粘贴到现有的 jQuery 中，只是换掉图像？切换什么的？

整页是最后一刻才拼凑起来的，但这是最后的绊脚石。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:20:01.547

jQuery中的`.hide()`和`.show()`方法不支持'fadeIn'或'fadeOut'，使用'fast'、'slow'或任何数字作为毫秒（ms）整数，即400，像这样：

```
$("#"+divname).show("slow").siblings().hide("slow"); 
```

如果你坚持使用fadeIn或fadeOut动画，你应该使用`.animate()`方法来代替，像这样：

```
$("#"+divname).show().animate({height:"toggle",opacity: "toggle"},duration:"slow"}).siblings().hide().animate({height:"toggle",opacity:"toggle"},{duration:"slow"}); 
```

有关更多详细信息，请参见[此处](http://api.jquery.com/animate/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:29:40.100

您可以在 CSS 中添加一些 .selected 规则，其行为类似于悬停规则：

```
/* Highlight if hover and also if the .br is selected */
.br a:hover,
.br.selected a {
  background:url('wp-content/themes/bondwoodhouse/img/br.png');
  background-position:250px 250px;
} 
```

并将其设置在 div 上：

```
var selectedTile = $();
$(".container > div > a").click(function() {
    // remove the selected class from the previously
    // selected element (does nothing for the first time)
    selectedTile.removeClass("selected");
    selectedTile = $(this).parent();
    selectedTile.addClass("selected");
}); 
```

假设一个容器元素：

```
<div class="container">
<div class="br"><a href="javascript:;"></a></div>
<div class="tl"><a href="javascript:;"></a></div>
</div>​ 
```

您的脚本可能如下所示：

```
$(document).ready(function(){
    var selectedTile = $();
    $('a').click(function () {
        var divname= this.name;
        $("#"+divname).show("fadeIn").siblings().hide("fadeIn");

        // remove the selected class from the previously
        // selected element (does nothing for the first time)
        selectedTile.removeClass("selected");
        selectedTile = $(this).parent();
        selectedTile.addClass("selected");
    });
}); 
```

如果您按照上述说明修改 CSS，这将起作用。

[这是小提琴](http://jsfiddle.net/REPmt/1/)

# c - 是 ”。” _wfopen_s/_wfindfirst 真的是允许的通配符吗？

> ID：10619314
> 
> 赞同：0
> 
> 时间：2012-05-16T13:13:05.647
> 
> 标签：c, winapi, file-io

我的 Win32 系统有一些奇怪的行为：如果我将路径传递`C:/temp/file.txt.`给`_wfindfirst`and `_wfopen_s`，我会得到一个成功打开的文件，尽管它只`C:/temp/file.txt`存在于磁盘上。

首先，我认为 the`.`也可能是 Win32 上可接受的通配符，但查看 Microsoft 文档

*   [http://msdn.microsoft.com/en-us/library/ms690414(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms690414(v=vs.85).aspx)
*   [http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/find_c_search_wildcard.mspx?mfr=true](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/find_c_search_wildcard.mspx?mfr=true)

这些根本没有提到`.`角色。

当然，我可以在将路径放入`_wfopen_s`or之前检查路径`_wfindfirst`，但我想知道是否有其他方法可以阻止我打开具有非法路径的文件......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:20:18.357

它不是通配符。文件名末尾的点始终被省略，因此`F.`和`F`等价于所有`F`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T07:53:39.973

虽然 NTFS 本身支持文件名末尾的句点（某些客户端，如旧的 POSIX 子系统，可以使用此类文件），但 Win32 API 本身不支持，并且会`'.'`在打开文件时去除尾随：

> *   [信息：不支持以空格或句点结尾的文件名](http://support.microsoft.com/kb/115827)
> 
> CreateFile() 从文件和目录名称中删除尾随空格和句点。这样做是为了与 FAT 和 HPFS 文件系统兼容。

显然，`FindFirstFile()`朋友们也这样做（鉴于上述情况，这并不奇怪，但我找不到任何明确的文档这么说）。

无需直接检查输入文件名以查看它是否与您的受限制文件名之一匹配，您可以检查由返回的结构的`name`字段以查看它是否匹配（并对通过 and 找到的所有文件执行相同操作）。但我想这就是你要去的地方。`_wfinddata_t``_wfindfirst()``_wfindnext()`

请记住，传入 8.3 格式的文件名也可能会在`name`字段中返回一个完全不同的文件名（因为操作系统将长文件名映射到短文件名）。您可能需要在检查中考虑该映射，Win32 `FindFirstFile()`/ `FindNextFile()`API 可能会为您提供帮助，因为它们会返回匹配的长文件名和任何相应的短文件名。

如果您`FindFirstFileW()`直接使用而不是`_wfindfirst()`您可以检查`cFileName`和 cAlternatefileName` 字段以查看实际找到的文件

# php - 结合两个 XML PHP

> ID：10619315
> 
> 赞同：-1
> 
> 时间：2012-05-16T13:13:07.757
> 
> 标签：php, xml, merge, html-table

我正在尝试组合两个或多个 xml 文件以便更好地使用。假设我有两个 XML 文件，我想在将它们的数据提取到表中之前组合它们的内容。

```
<table id="rounded-corner">
    <tr>
            <th>Title</th>
            <th>Download Link</th>
            <th>Language</th>
    </tr>

<?php

        $xml_request_url = 'file.xml';
        $xml = new SimpleXMLElement($xml_request_url, null, true);

        foreach ( $xml->results->content as $item )
        {

        echo "

<tr><td>" . $item->movie . "</td><td><a href=" . $item->download . ">Download Link</a>    </td><td>" . $item->language . "</td></tr>
";

}

        ?> </table> 
```

你能给我一个例子来说明如何做到这一点吗？我不想为我拥有的每个 XML 文件制作表格。

```
<find>
<base>
http://www.example.com
</base>
<results items="2" itemsfound="2">
<song>
  <downloadlink>
  http://example.com/dldlink.php?lk=43543
  </downloadlink>
  <format>
  mp3
  </format>
</song>
<song>
  <downloadlink>
  http://example.com/dldlink.php?lk=87798
  </downloadlink>
  <format>
  mp4
  </format>
 </song>
 </results>
 </find> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:22:55.873

您的问题实际上不是询问如何连接两个 XML 文件，而是更准确地说是如何从这两个文件中创建一个迭代器。这可以通过使用[`AppendIterator`](http://php.net/AppendIterator)：

```
<table id="rounded-corner">
    <tr>
            <th>Title</th>
            <th>Download Link</th>
            <th>Language</th>
    </tr>
<?php

    $content = new AppendIterator();
    $content->append(new IteratorIterator(simplexml_load_file('file1.xml')->results->content));
    $content->append(new IteratorIterator(simplexml_load_file('file2.xml')->results->content));
    foreach($content as $item)
    {
?>
    <tr>
        <td><?= $item->movie ?></td>
        <td><a href="<?= $item->download ?>">Download Link</a></td>
        <td><?= $item->language ?></td>
    </tr>
<?php
    }
?>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:18:04.740

您可以将它们存储在中间数组中。例如：

```
$files = array('test1.xml','test2.xml');
$data = array();
foreach($files as $file)
{
 $xml = new SimpleXMLElement($xml_request_url, null, true);
 foreach($xml as $node)
   $data[] = $node;
} 
```

然后使用您的 $data 数组获取所有值。

# java - Spring MVC 和 Tiles 集成问题

> ID：10619316
> 
> 赞同：2
> 
> 时间：2012-05-16T13:13:13.913
> 
> 标签：java, spring, tiles2

我正在尝试使用磁贴集成创建一个简单的 Spring 3 MVC 应用程序。

当我尝试构建应用程序时，我收到此错误消息（为简洁起见被截断）：

```
java.lang.NullPointerException
at org.apache.commons.digester.Digester.getXMLReader(Digester.java:1058)
at org.apache.commons.digester.Digester.parse(Digester.java:1887)
at org.apache.tiles.definition.digester.DigesterDefinitionsReader.read(DigesterDefinitionsReader.java:329)
at org.apache.tiles.definition.dao.BaseLocaleUrlDefinitionDAO.loadDefinitionsFromURL(BaseLocaleUrlDefinitionDAO.java:276)
at org.apache.tiles.definition.dao.CachingLocaleUrlDefinitionDAO.loadDefinitionsFromURLs(CachingLocaleUrlDefinitionDAO.java:251) 
```

我是否缺少一些必需的库？

我在 WEB-INF/lib 文件夹中有以下罐子。

```
commons-beanutils-1.8.0.jar
commons-digester-2.0.jar

org.springframework.asm-3.1.1.RELEASE.jar
org.springframework.beans-3.1.1.RELEASE.jar
org.springframework.context-3.1.1.RELEASE.jar
org.springframework.core-3.1.1.RELEASE.jar
org.springframework.expression-3.1.1.RELEASE.jar
org.springframework.web.servlet-3.1.1.RELEASE.jar
org.springframework.web-3.1.1.RELEASE.jar
tiles-api-2.2.2.jar
tiles-core-2.2.2.jar
tiles-jsp-2.2.2.jar
tiles-servlet-2.2.2.jar
tiles-template-2.2.2.jar
log4j-1.2.16.jar
slf4j-api-1.6.4.jar
slf4j-log4j12-1.6.4.jar 
```

**WEB-INF/web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"     xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
<display-name>SpringMVC</display-name>
  <servlet>
<servlet-name>spring</servlet-name>  
<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
<load-on-startup>1</load-on-startup>  
</servlet>

<servlet-mapping>  
<servlet-name>spring</servlet-name>  
<url-pattern>*.html</url-pattern>
</servlet-mapping>

<welcome-file-list>
<welcome-file>index.jsp</welcome-file>
</welcome-file-list>
</web-app> 
```

**WEB-INF/spring-servlet.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="
    http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

<!-- Scans within the base package of the application for @Components to configure as beans -->
<!-- @Controller, @Service, @Configuration, etc. -->
<context:component-scan base-package="xyz.sample.baremvc" />

<!-- Enables the Spring MVC @Controller programming model -->
<mvc:annotation-driven />

<bean id="viewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.tiles2.TilesView" />
</bean> 

<bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
    <property name="definitions">
        <list>
            <value>/WEB-INF/tiles.xml</value>
        </list>
    </property>
</bean> 
```

**WEB-INF/tiles.xml**

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE tiles-definitions PUBLIC 
 "-//Apache Software Foundation//DTD Tiles Configuration 2.0//EN" 
 "http://tiles.apache.org/dtds/tiles-config_2_0.dtd">
<tiles-definitions>
    <definition name="base.definition" template="/WEB-INF/views/layout.jsp">
    <put-attribute name="title" value="" />
    <put-attribute name="header" value="/WEB-INF/views/header.jsp" />
    <put-attribute name="menu" value="/WEB-INF/views/menu.jsp" />
    <put-attribute name="body" value="" />
    <put-attribute name="footer" value="/WEB-INF/views/footer.jsp" />
    </definition>

    <definition name="contact" extends="base.definition">
    <put-attribute name="title" value="Contact Manager" />
    <put-attribute name="body" value="/WEB-INF/views/contact.jsp" />
    </definition>
</tiles-definitions> 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T13:24:05.590

将 commons-digester-1.8.jar 与瓷砖 2.2.2 一起使用，commons-digester 的 2.0 版在 sax 方面存在缺陷。

编辑：我用来解决问题的额外 pom 是为了解决初始 http 请求，这是一个已知问题（注意我使用的是 jdk 1.6）这是我的 pom 的额外内容，以使其工作：

```
 <!-- Note: tiles 2.2 uses commons-digester 2.0 which is buggy with sax 
            (http request will fail the first time) using version 1.8 to solve the issue -->
        <dependency>
            <groupId>commons-digester</groupId>
            <artifactId>commons-digester</artifactId>
            <version>1.8</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-servlet</artifactId>
            <version>${apacheTiles.version}</version>
            <exclusions>
                <exclusion>
                    <groupId>commons-digester</groupId>
                    <artifactId>commons-digester</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-jsp</artifactId>
            <version>${apacheTiles.version}</version>
        </dependency> 
```

${apacheTiles.version} 为 2.2.2，spring 的版本为 3.0.5.RELEASE

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:32:12.883

我假设`com.sun.org.apache.xerces.internal.jaxp.SAXParserFactoryImpl`是从第三方库引用的。确保它是从 Sun 的 jre 库中引用的。

如果您使用的是 maven，请尝试从类路径中排除任何不需要的库。

[或参考这篇文章](http://pwu-developer.blogspot.com/2010/01/nullpointerexception.html)

**编辑：**

看看[org.apache.commons.digester.parser.XercesParser中的这段代码](http://grepcode.com/file/repo1.maven.org/maven2/commons-digester/commons-digester/2.0/org/apache/commons/digester/parser/XercesParser.java#XercesParser.newSAXParser%28java.util.Properties%29)

```
 public static SAXParser newSAXParser(Properties properties) 
        throws ParserConfigurationException, 
              SAXException,
               SAXNotSupportedException {

   SAXParserFactory factory =  
                    (SAXParserFactory)properties.get("SAXParserFactory");

    if (versionNumber == null){
      versionNumber = getXercesVersion();
        version = new Float( versionNumber ).floatValue();
   }

   // Note: 2.2 is completely broken (with XML Schema). 
    if (version > 2.1) {

       configureXerces(factory);
       return factory.newSAXParser();
   } else {
        SAXParser parser = factory.newSAXParser();
       configureOldXerces(parser,properties);
       return parser;
    }
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-18T08:49:40.020

用 commons-digestor-1.7 替换 2.2.2 的 commons-digestor-2.0 来解决这个问题。

# sql-server-2005 - 删除具有默认约束的列

> ID：10619320
> 
> 赞同：0
> 
> 时间：2012-05-16T13:13:29.647
> 
> 标签：sql-server-2005

我创建了一个表：

```
create table userTable
(
    userId int identity(1,1) not null,
    userName nvarchar(20) not null,
    joinDate datetime not null default getdate()
        constraint pk_userTable primary key(userId) on [primary]

) 
```

然后我尝试删除列joinDate：

```
alter table userTable drop column joinDate 
```

但我得到了错误：

> 消息 5074，级别 16，状态 1，第 1 行
> 对象“DF_userTable_joinD_31EC6D26”依赖于列“joinDate”。
> 消息 4922，级别 16，状态 9，第 1 行
> ALTER TABLE DROP COLUMN joinDate 失败，因为一个或多个对象访问此列。

为什么会这样？

另外，我想在插入新行时仅为 userName 列指定值，但是当我尝试这样做时：

```
INSERT userTable SELECT 'name1'; 
```

我收到错误消息：

> 消息 213，级别 16，状态 1，行 1
> 列名称或提供的值的数量与表定义不匹配。

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:58:58.440

如果要删除列，首先需要删除约束。由于您没有费心命名约束，因此您需要找到它（例如，如果您没有在收到的错误消息中注意到它）。

```
DECLARE @sql NVARCHAR(4000);

SELECT @sql = 'ALTER TABLE userTable DROP CONSTRAINT ' + QUOTENAME(dc.name) + ';'
  FROM sys.default_constraints AS dc
  INNER JOIN sys.columns AS c
  ON dc.parent_object_id = c.[object_id]
  AND dc.parent_column_id = c.column_id
  WHERE parent_object_id = OBJECT_ID('dbo.userTable')
  AND c.name = 'joinDate';

PRINT @sql;
-- EXEC sp_executesql @sql;
-- ALTER TABLE userTable DROP COLUMN joinDate; 
```

**编辑**

如果您想插入此表而不对`joinDate`列的值进行硬编码，您不能只说：

```
INSERT userTable SELECT 'name1'; 
```

您将收到列列表与表定义不匹配或类似的错误。因此，如果要插入列的子集，则需要命名这些列。

```
INSERT userTable(userName) SELECT 'name1'; 
```

懒惰并省略列列表适用于`IDENTITY`列，但这是例外而不是规则（我认为不应该允许它，因为它具有误导性）。

# ruby-on-rails - 使用 Savon (Ruby on Rails) 访问 SOAP 请求的请求正文

> ID：10619321
> 
> 赞同：5
> 
> 时间：2012-05-16T13:13:33.250
> 
> 标签：ruby-on-rails, ruby, soap, wsdl, savon

我在 Ruby on Rails 中使用 Savon gem 与 wsdl WS 进行通信。一切正常，但我想使用自定义日志记录请求 XML，即不是 Rails 或 Savon 记录器。我的代码看起来像这样：

```
 response = self.client.request :add_order do
      soap.body = { 
        :indata => {
          "CustomerNo" => config[:kundnr],
          "Pwd" => config[:password],
          "OrderDate" => order["purchase_order_date"].strftime('%Y%m%d')
        }
      }
    end 
```

访问响应没有问题，但是请求呢？我需要能够通过将 XML 记录到 DB 字段来查看生产环境中发送的内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T15:12:59.903

现在没有简单的方法来获取请求 XML。但正如您所注意到的，[Savon 将每个请求和响应](http://savonrb.com/#global_configuration)记录到指定的记录器。因此，如果您不更改日志级别，则可以使用自定义的类似 Logger 的对象来响应`:debug`并存储记录的内容。

```
module DBLogger
  def self.debug(message)
    p message  # replace with custom impl.
  end
end

Savon.configure do |config|
  config.logger = DBLogger
end 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-29T22:16:27.463

这在官方答案中没有明确说明，但我必须包含更多选项才能让请求/响应正确记录。就我而言，我只是使用`Rails.logger`而不是自己滚动：

```
client = Savon.client(
  wsdl: 'http://example.com?wsdl',
  log: true,
  logger: Rails.logger,
  log_level: :debug
)

client.call(:example_operation, message: {example: 'example'}) 
```

`log_level`可能默认为调试，但明确表示没有害处 :) 但如果没有该选项`log: true`，您将看不到实际的请求/响应正文，只有 url 和状态。

我使用 Savon 2.7.2 作为参考。

# sql - SQL Server + 条件更新

> ID：10619324
> 
> 赞同：1
> 
> 时间：2012-05-16T13:13:42.313
> 
> 标签：sql, sql-server, conditional, sql-update

我有一个这样的更新语句，它试图执行更新。在我的 SPROC 中，我要么传入 2 个参数之一（@TransactAutoID 或 @ReceiptNo），要么同时传入这两个参数。我想要做的是如果@TransactAutoID 为空，那么我将使用@ReceiptNo 作为第二选择来代替它。是否有更好或更有效的编写方式，因为据我了解，“或”运算符仍将继续执行此操作：

```
OR  (@ReceiptNo IS NOT NULL AND [AutoID] = (SELECT Max(AutoID)  
                                                FROM   [Transact]
                                                WHERE  [ReceiptNo] = @ReceiptNo) 
```

即使@TransactAutoID 不为空。谢谢。

```
 UPDATE  [Transact]
    SET     [VoidBy]     = @VoidedBy,
            [VoidOn]     = Getdate(),
            [VoidReason] = @VoidedReason
    WHERE   (@TransactAutoID IS NOT NULL 
              AND [AutoID] = @TransactAutoID)
        OR  (@ReceiptNo IS NOT NULL AND [AutoID] = (SELECT Max(AutoID)  
                                                    FROM   [Transact]
                                                    WHERE  [ReceiptNo] = @ReceiptNo) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:16:49.260

只需在您的第二个语句中添加 @TransactAutoID IS NULL - 并且可能在第一个语句中添加相反的 - 取决于您的逻辑（例如，如果您同时通过两者，您是否希望它做一些不同的事情或失败或什么？）

例如

```
UPDATE  [Transact] 
SET     [VoidBy]     = @VoidedBy, 
        [VoidOn]     = Getdate(), 
        [VoidReason] = @VoidedReason 
WHERE   (@TransactAutoID IS NOT NULL AND @ReceiptNo IS NULL
          AND [AutoID] = @TransactAutoID) 
    OR  (@TransactAutoID IS NULL AND @ReceiptNo IS NOT NULL AND [AutoID] = (SELECT Max(AutoID)   
                                                FROM   [Transact] 
                                                WHERE  [ReceiptNo] = @ReceiptNo) 
```

# html - Web 浏览器中的文本/字体呈现。它是如何实现的？

> ID：10619327
> 
> 赞同：1
> 
> 时间：2012-05-16T13:13:43.893
> 
> 标签：html, pdf, text, fonts, browser

前提：我知道 PDF 文本是通过 C 库呈现的，该库理解字体并能够以图形形式呈现它们。例如，开源 PDF 库（如 poppler 或 mupdf）依赖于负责渲染字体的 freetype2。问题：我想知道 HTML Web 浏览器中使用哪种方法来呈现文本和字体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:23:32.830

PDF 通常包含呈现文档所需的一切，包括字体。根据[维基百科](https://en.wikipedia.org/wiki/Portable_Document_Format)

> 可移植文档格式 (PDF) 是一种文件格式，用于以独立于应用软件、硬件和操作系统的方式表示文档。 [2] 每个 PDF 文件都封装了一个固定布局的平面文档的完整描述，包括显示它所需的文本、字体、图形和其他信息。

浏览器通常（希望）遵循 W3C 定义的标准。例如，在[http://www.w3.org/TR/css3-fonts/](http://www.w3.org/TR/css3-fonts/)中，我们有以下内容：

> 字体资源可以是本地的、安装在运行用户代理的系统上或可下载的。对于本地字体资源，可以直接从字体资源中获取描述信息。对于可下载的字体资源（有时称为网络字体），描述信息包含在对字体资源的引用中。对于字体属性的每种可能变化，字体系列通常不包含单个面。CSS 字体选择机制描述了如何将一组给定的 CSS 字体属性与给定的字体相匹配。

如果您真的想深入了解浏览器如何呈现字体，请熟悉[http://www.w3.org/TR/css3-fonts/](http://www.w3.org/TR/css3-fonts/)。

因此，CSS 为网页设计师提供了指定要使用的字体的优先级的能力。例如，W3C 提供了以下示例：

```
body { 
    font-family: Helvetica, Verdana, sans-serif; 
} 
```

> 如果 Helvetica 可用，它将在渲染时使用。如果 Helvetica 和 Verdana 都不存在，则将使用用户代理定义的无衬线字体。

# javascript - 编辑谷歌地球多边形

> ID：10619333
> 
> 赞同：0
> 
> 时间：2012-05-16T13:14:03.017
> 
> 标签：javascript, google-earth-plugin

我需要一些关于如何在谷歌地球插件中实现多边形编辑的好建议。
我的应用程序能够通过鼠标单击创建多边形，但我不明白如何让用户编辑以前保存的多边形实例。我的意思是，我想单击多边形的顶点以选择它，然后单击地图中的其他点将其移动到那里（例如代码游乐场上可用的[拖放示例）。](http://code.google.com/apis/ajax/playground/?exp=earth#draggable_placemark)
但是，阅读 API 文档，在我看来，顶点不支持事件处理（单击、鼠标悬停等）。
任何帮助是极大的赞赏。

PS：我在[这里做了一个jsfiddle](http://jsfiddle.net/andreapier/8gHtQ/1/)，让你帮助一些代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:46:08.147

好的，我能够自己解决问题。
我在这里做了一个完整的工作[jsfiddle 示例](http://jsfiddle.net/andreapier/8gHtQ/2/)。它与最终顶点位置有关，但我怀疑它与高度有关。我非常怀疑这是我的代码。但是，如果您发现问题报告回来请。
希望对某人有所帮助！
再见

# hudson - 如何使用詹金斯对构建失败进行分类？

> ID：10619334
> 
> 赞同：8
> 
> 时间：2012-05-16T13:14:03.540
> 
> 标签：hudson, jenkins, build-automation

我正在寻找一种解决方案，可以让我们对构建失败进行分类，例如：

*   开发人员（开发人员添加了错误代码）
*   构建系统（构建系统中的错误）
*   基础设施问题（服务器没有响应）

如果**大部分时间**可以根据控制台输出自动完成，那就太好了，但我们还需要一个选项来使构建处于特定状态。

我们如何从詹金斯那里获得这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-30T15:17:38.723

[Build Failure Analyzer 插件](https://wiki.jenkins-ci.org/display/JENKINS/Build+Failure+Analyzer)允许您设置正则表达式以对当前和未来的构建进行分类。一旦设置了正则表达式，就会自动检测当前和未来的构建。这可能正是您所追求的。

我还为 Jenkins 实现了一个轻量级的手动故障分类插件，它提供了一个简单的下拉菜单和额外的文本字段，用于手动分类故障。这是为研究构建失败的研究项目完成的。分类目前在每个构建的目录中保存为单独的 XML，对 Jenkins 自己的文件没有影响。类别显示在构建列表和每个构建的单独分类页面中。

![用于手动故障分类的轻量级 Jenkins 插件](../Images/f330d5ff47a795403a52ba736a7d9e3e.png)

我很遗憾地说该插件目前没有在任何地方共享，因为它包含特定项目的一些硬编码。如果有这样的插件需求，我可以重新访问代码并开源发布。但是，出于您的目的，Build Failure Analyzer 的自动解决方案似乎更合适。

插件非常简单，类似的东西也不难实现。如果您希望自己制作类似的东西，或者可能扩展自动构建失败分析器插件以满足您的需求，[Jenkins 插件教程](https://wiki.jenkins-ci.org/display/JENKINS/Plugin+tutorial)和[扩展 Jenkins](https://wiki.jenkins-ci.org/display/JENKINS/Extend+Jenkins)页面是 Jenkins 插件开发的一个很好的起点。对于持久性，熟悉[XStream](http://xstream.codehaus.org/tutorial.html)将是有益的，因为 Jenkins 和大多数插件在内部使用 XStream 将数据序列化为 XML。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T15:09:29.217

出于报告目的，您可以使用*构建描述*（手动编辑它以查看其工作方式`http://[jenkins_server]/job/[job_name]/[build_number]/editDescription`，或单击构建状态页面上的“添加描述”）。

以编程方式，您可以通过[Jenkins CLI](https://wiki.jenkins-ci.org/display/JENKINS/Jenkins+CLI)（**set-build-description**命令）进行设置；或通过 Jenkins [Java API](http://javadoc.jenkins-ci.org/)从 Groovy - [Run::setDescription()](http://javadoc.jenkins-ci.org/hudson/model/Run.html#setDescription%28java.lang.String%29)方法。

Groovy 脚本可以通过[Groovy Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Groovy+plugin)或[Groovy PostBuild Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Groovy+Postbuild+Plugin)调用，或者两者都调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-28T19:33:19.120

我使用的这个工具可能会对您有所帮助：[https](https://github.com/nacuteodor/SearchInJenkinsLogs) ://github.com/nacuteodor/SearchInJenkinsLogs 。这可以与 Jenkins 作业集成。您可以在构建工件或测试失败中找到指定正则表达式的搜索文本，它将打印构建节点和失败的测试报告按构建和测试排序的链接。此外，它还具有使用最大差异阈值对常见的相似故障进行分组的功能，按组故障计数排序。

您可以使用此工具在工件日志中查找您希望尽快报告和修复的崩溃，并且您可以使作业发送电子邮件通知或使工具作业构建失败。将来我可能会添加一些其他功能。

# c - linux 上的 poll 实现与 solaris 上的 poll 实现

> ID：10619335
> 
> 赞同：7
> 
> 时间：2012-05-16T13:14:05.487
> 
> 标签：c, linux, solaris

在 linux 环境中调试我们的应用程序期间，我们可以观察到一些事件 -`POLLHUP|POLLIN`仅在 linux 上发生。我们的应用程序使用 unix 套接字。当我们这样做时：

```
ret = poll(xpoll->pfd, xpoll->pfd_count, xpoll_timeout); 
```

strace 显示：

```
poll([{fd=4, events=POLLIN|POLLPRI|POLLERR|POLLHUP}, {fd=6, events=POLLIN|POLLPRI|POLLERR|POLLHUP}, {fd=7, events=POLLIN|POLLPRI|POLLERR|POLLHUP}], 3, 16) = 1 
([{fd=7, revents=POLLIN|POLLHUP}]) 
```

这种情况在 solaris 中永远不会发生（相同的应用程序）： struss 显示：

```
2463/3:                 fd=569 ev=POLLIN|POLLPRI|POLLERR|POLLHUP rev=0
2463/3:                 fd=639 ev=POLLIN|POLLPRI|POLLERR|POLLHUP rev=0
2463/3:                 fd=631 ev=POLLIN|POLLPRI|POLLERR|POLLHUP rev=POLLIN
2463/3:                 fd=1160 ev=POLLIN|POLLPRI|POLLERR|POLLHUP rev=0
2463/3:                 fd=400 ev=POLLIN|POLLPRI|POLLERR|POLLHUP rev=0 
```

你能解释一下solaris中的poll和liunx中的poll有什么区别吗？提前谢谢所有答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T22:45:21.737

Linux 和 Solaris 过去都无法在某些类型的文件（尤其是管道）上为 EOF 设置 POLLIN。一个常见的解决方法是同时检查 POLLHUP 和 POLLIN。据我所知，Linux 核心开发人员保持这种方式（可能是有意的），而 Solaris 研究员改变了这种行为以使用~~POLLIN~~ POLLEOF。

但是，这对您的应用程序来说应该不是问题：为了增加应用程序的可移植性，人们总是会检查位掩码中的两个标志。

干杯!

# c++ - 对 GUID_DEVINTERFACE_XXX 的未定义引用

> ID：10619353
> 
> 赞同：3
> 
> 时间：2012-05-16T13:15:16.410
> 
> 标签：c++, guid, msdn

我正在尝试`GUID_DEVINTERFACE_DISK`在 function 中使用（或 _FLOPPY... 等）`SetupDiGetClassDevs`，但由于未定义的引用，g++ 仍然无法构建。

我已链接到 SetupAPI 并根据需要包含 nstddstor.h ( [http://msdn.microsoft.com/en-us/library/windows/hardware/ff545824%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff545824%28v=vs.85%29.aspx) )。

我看到包含 initguid.h 可能会解决问题，但它不适合我。

此外，当我尝试影响 GUID 变量时 `GUID g = GUID_DEVINTERFACE_DISK;` ，如果我将鼠标放在 GUID_DEVINTERFACE_DISK 上，eclipse 会显示它在哪里定义（nstddstor.h），但在编译后，它仍然不起作用。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:48:41.780

我手边没有 Windows DDK，因此无法验证它，但[另一个论坛上的用户报告说它可以通过包含`initguid.h`before`ntddstor.h`](http://www.osronline.com/showthread.cfm?link=201981)来工作，因此以下*可能会*起作用：

```
#include <initguid.h>
#include <ntddstor.h>
#include <Setupapi.h>

// Code copied from:
// http://msdn.microsoft.com/en-us/library/windows/hardware/ff551069.aspx
int main(void) {
    HDEVINFO hDevInfo;
    hDevInfo = SetupDiGetClassDevs(&GUID_DEVINTERFACE_VOLUME,
        NULL, NULL, DIGCF_PRESENT | DIGCF_INTERFACEDEVICE);
}

cl /nologo /W4 /EHsc /MD guid.cpp Setupapi.lib 
```

# linux - 将秒转换为 hh:mm:ss 格式（或 Excel 或 LibreOffice 喜欢的任何格式）并将其插入回 Bash 中的 csv 文件

> ID：10619356
> 
> 赞同：0
> 
> 时间：2012-05-16T13:15:27.687
> 
> 标签：linux, macos, bash, csv, sed

我有一个这样的 csv 文件：

```
ELAPSEDTIME_SEC;CPU_%;RSS_KBYTES
0;3.4;420012
1;3.4;420012
2;3.4;420012
3;3.4;420012
4;3.4;420012
5;3.4;420012 
```

我想将第一列中的值（它们是秒）转换为 hh:mm:ss 格式（或任何 Excel 或 LibreOffice 可以从 csv 导入的时间格式）并将其插入到文件中的新列中继第一个。所以输出会是这样的：

```
ELAPSEDTIME_SEC;ELAPSEDTIME_HH:MM:SS;CPU_%;RSS_KBYTES
0;0:00:00;3.4;420012
1;0:00:01;3.4;420012
2;0:00:02;3.4;420012
3;0:00:03;3.4;420012
4;0:00:04;3.4;420012
5;0:00:05;3.4;420012 
```

而且我必须在 Bash 中执行此操作才能在 Linux 和 OS X 下工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:27:20.817

我希望这是你想要的：

```
TZ=UTC awk -F';' -vOFS=';' '
{
    $1 = $1 ";" (NR==1 ? "ELAPSEDTIME_HH:MM:SS" : strftime("%H:%M:%S", $1))
}1' input.csv 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:19:05.940

通过思考您的问题，我发现了一个有趣的操作可能性：将公式插入 CSV，以及如何将其传递给 ooCalc：

```
cat se.csv | while read line ; do  n=$((n+1)) ; ((n>1)) && echo ${line/;/';"=time(0;0;$A$'$n')";'} ||echo ${line/;/;time of A;} ;done > se2.csv 
```

格式化：

```
cat se.csv | while read line ; do
  n=$((n+1))
  ((n>1)) && echo ${line/;/';"=time(0;0;$A$'$n')";'} || echo ${line/;/;time of A;}
done > se2.csv 
```

评论：

*   这会添加一列 - 它不会替换
*   您必须正确设置 CSV 的导入选项。在这种情况下：
    *   delimiter = 分号（好吧，我们也必须对原始文件执行此操作）
    *   text delimiter = "（不是默认值）
    *   停用复选框“引用字段为文本”
*   根据您的语言环境，必须翻译函数名称。例如，在德语中，我必须使用“zeit(”而不是“time(”
*   因为公式本身使用分号，所以方法会更简单，不需要那么多掩码，如果分隔符是别的东西，也许是制表符。
*   在实践中，您可能会像对待所有其他行一样对待标题，并最终手动更正它，但 SO 的观众希望一切都能开箱即用，因此命令变得更长。
*   我宁愿`while read / cat/ loop`用一个简短的命令来替换整个东西`sed '...'`，我在 sed 的手册页中找到了一个注释，它`=`可以用于 rownum，但我不知道如何处理它。

结果：

```
cat se2.csv
ELAPSEDTIME_SEC;time of A;CPU_%;RSS_KBYTES
0;"=time(0;0;$A$2)";3.4;420012
1;"=time(0;0;$A$3)";3.4;420012
2;"=time(0;0;$A$4)";3.4;420012
3;"=time(0;0;$A$5)";3.4;420012
4;"=time(0;0;$A$6)";3.4;420012
5;"=time(0;0;$A$7)";3.4;420012 
```

在这种特定情况下，awk 解决方案似乎更好，但我想这种方法有时可能有用。

# box-api - Box API：Get_managed_users 返回所有用户

> ID：10619358
> 
> 赞同：0
> 
> 时间：2012-05-16T13:15:34.767
> 
> 标签：box-api

使用 Box 1.0 REST API，我正在尝试使用 SOAP UI 中的函数。

具有 user_id=12345 的 get_managed_users 的 API 文档（使用 get_user_id 正确调用检索的内部 id）正在返回所有用户。文档说，如果您不指定 user_id 值，就会出现这种情况。但我的完整命令是：（更改了令牌和 API 密钥以保护无能者）

```
https://www.box.com/api/1.0/rest?user_id=27360&auth_token=blahbalhblah1234&action=get_managed_users&api_key=someKeyYouShouldNotSee 
```

现在我可以使用完整的结果列表，但是当我们让成千上万的用户进入系统时，这将无法扩展。

我可以使用相同的 user_id 值与 edit_managed_user 进行调用，并且更改会反映在 UI 和下一个 get_managed_users 调用中。因此，我确实有正确的 user_id 值，我会这么假设。

我也尝试将 testuser@gmail.com 作为 user_id 值，并取回整个列表。这让我相信我以某种方式发送了错误的 user_id，但我只是没有看到它。

有什么提示吗？为什么，看起来像一个有效的 user_id 值，它表现得好像它不存在或不正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:16:44.380

很可能您使用无效的 user_id 调用了此方法，或者使用了不在您的托管用户集中的方法。您能否再次检查该用户是否返回到您已管理的用户列表中？

# javascript - LocalStorage、JavaScript 和对象

> ID：10619362
> 
> 赞同：4
> 
> 时间：2012-05-16T13:15:43.647
> 
> 标签：javascript, html, local-storage

我需要在 localStorage 中存储一个对象——我知道为了这样做，我必须将对象转换为字符串。都很酷。

我的问题是首先创建对象：我在 sessionStorage 中有两个值需要添加到对象中，然后将其传递给 localStorage。但是，当我尝试创建对象时，一个值被存储为变量名，而不是它的（数字）值。知道这里发生了什么吗？

```
var siteName = sessionStorage['1'];
var siteID = (+sessionStorage['2']);
var temp = {siteID:siteName};
alert(typeof siteID);
alert(JSON.stringify(temp)); 
```

第一个警报确认 siteID 确实是数字类型，但第二个警报显示存储变量名称 (siteID) 而不是其数值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T13:21:39.427

这一行：

```
var temp = {siteID:siteName}; 
```

...创建一个包含属性的对象，该属性`siteId`使用从`siteName`变量中获取的值调用。

如果您希望从`siteID`变量中获取属性名称：

```
var temp = {};
temp[siteID] = siteName; 
```

或者在 ES2015（又名“ES6”）中，您可以使用新的*计算属性名称*语法：

```
// ES2015+ only!
var temp = {[siteId]: siteName}; 
```

在 JavaScript 中，您可以通过两种不同但相同的方式访问/创建对象的属性： 使用带有文字属性名称的点分表示法：

```
obj.foo = "bar";    // Creates a `foo` property on `obj` with the value `"bar"` 
```

...或使用括号表示法和字符串：

```
obj["foo"] = "bar"; // Does the same thing 
```

像你这样的对象初始化器中的键`var temp = {siteID:siteName};`总是按字面意思使用（尽管它们可以选择用引号引起来）；对象初始化器无法从变量中获取键。因此，您必须分两步进行，首先创建对象，然后设置属性。

所以，如果你这样做

```
temp[siteID] = siteName; 
```

... in 中的数字`siteID`将转换为字符串，并将成为属性名称，其中 value`siteName`是 value。

```
var temp = {};
var key = 1;
temp[key] = "value";
console.log(temp[1]); // "value"
console.log(temp["1"]); // "value" 
```

（属性名称在 JavaScript [暂时] 中始终是字符串。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T13:21:30.837

改成这样。

```
var temp = {};

temp[siteName] = siteID; 
```

或者，如果`typeof`测试旨在显示属性名称，您可以反转它们。

```
var temp = {};

temp[siteID] = siteName; 
```

但请注意，`siteID`从那时起，它被视为一个字符串。

# ajax - .innerHTML 不更新页面 - AJAX

> ID：10619363
> 
> 赞同：0
> 
> 时间：2012-05-16T13:15:48.373
> 
> 标签：ajax, html-select

下面，我有一个 java 脚本函数（名为 stateChange），它有望更新 HTML 选择列表的内容（请参阅下面标记为 HERE 的代码部分）。我已经通过编写一些警报语句（即 xmlHttp.onreadystatechange=function() { alert(xmlHttp.responseText); }）验证了服务器是否正确返回了新数据。

基于函数中的这些警报语句，我注意到该行

```
 document.getElementById("dgpids").innerHTML=xmlHttp.responseText; 
```

根本不执行，因此页面不会使用来自服务器的新数据进行更新。

有人可以告诉我我在下面的函数 stateChange 中缺少什么吗？为什么你认为页面没有更新新数据？谢谢。

```
 <%@page import="java.util.List"%>
     <%@page import="com.pm.dao.VirtualConfigTableDAO;" %>
     <%@page import="com.pm.entity.VirtualConfigEntity;" %>
     <%@page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
   <!DOCTYPE html>
   <html>
   <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>DAE PM Counters</title>

    <script language="javascript" type="text/javascript">  
        var xmlHttp              
        function stateChange(){                                  
            if (xmlHttp.readyState==4 || xmlHttp.readyState=="complete"){   
                **//!!!!!! HERE !!!!!**
                //FOLLOWING LINE works                    
                xmlHttp.onreadystatechange=function() { alert(xmlHttp.responseText); }
                //I cannot update the list named dgpids below.
                //The content of the response text coming from the server is correct.
                //But the following line does not update the page. Do you know why???
                document.getElementById("dgpids").innerHTML=xmlHttp.responseText;   

                xmlHttp.onreadystatechange=function() { alert('Got here2!'); }                                       
            }                                  
        }

        function showState(str){
            if (typeof XMLHttpRequest != "undefined"){
                xmlHttp= new XMLHttpRequest();
            }
            else if (window.ActiveXObject){
                xmlHttp= new ActiveXObject("Microsoft.XMLHTTP");
            }
            if (xmlHttp==null){
                alert("Browser does not support XMLHTTP Request")
                return;
            } 
            var url="dgp.jsp";
            url +="?id=" +str;
            xmlHttp.onreadystatechange = stateChange;
            xmlHttp.open("GET", url, true);
            xmlHttp.send(null);
        }

    </script> 

</head>
<body>
    <form method="POST" name="me">
        <select size="13" name="D1"  multiple="no" onChange="checkData()">             
            <option value="1">CommonCounters(vDaeId)</option>
            <option value="2">DgpCommonCounters(dgpId, vDaeId)</option>
            <option value="3">SystemCommonCounters()</option>
        </select>
        <input type="submit" value="Submit" name="B1">
        <input type="reset" value="Reset" name="B2"></p>        
        <br/>

        <%
            VirtualConfigTableDAO dao = new VirtualConfigTableDAO();
            List<VirtualConfigEntity> vList = dao.getEntireVirtualConfigList();
        %>

        <select size="2" name="D2"  multiple="no" onChange="if (this.selectedIndex != -1) showState(this.value);" onclick="showState(this.value);">   
            <%
                for (VirtualConfigEntity entity : vList) {
            %>                              
            <option value="<%=String.valueOf(entity.getId())%>"> <%=String.valueOf(entity.getVirtualId())%></option>
            <%}%> 
        </select>

        <br/>
        <br/>
        <select name="dgpids" >  
            <option value='-1'></option>  
        </select>

    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:19:05.920

您没有 id 为 的元素`dgpids`。

我认为您的意思是给 select 一个 id 但我不确定 select 是否允许`innerHTML`。您可能最好将选择包装在 a 中`div`并更新您的服务器代码以返回可以插入到 div 中的完整选择 html。

类似这个[jsfiddle](http://jsfiddle.net/CU5Sp/3/)的东西。

希望这可以帮助。

# asp.net - 文件上传时显示的简单消息

> ID：10619364
> 
> 赞同：2
> 
> 时间：2012-05-16T13:15:52.117
> 
> 标签：asp.net, vb.net, file-upload

我一直在我的 ASP.NET 站点中处理文件上传部分。

使用下面的代码，我可以让用户根据`RegularExpressionValidator`. 我很高兴这能相应地工作。

我现在要完成的是一条消息，表明文件已成功上传。我不确定如何完成此操作，但想将其添加到`Label`名为“fileuploaded”的文件中。

这是我的 .aspx 页面代码：

```
<table width = "60%">
  <tr>
    <td>Modes of Operation:</td>
    <td>
       <asp:FileUpload ID="FileUpload1" runat="server" />
    </td>
    <td>
       <asp:Button ID="buttonUpload" runat="server" Text="Upload" ValidationGroup="FileUpload" />
    </td>
  </tr>
  <tr>
    <td colspan="3">
       <asp:RequiredFieldValidator ID="FilenameRFValidator" runat="server" 
            ControlToValidate="FileUpload1" Display="Dynamic" 
            ErrorMessage="RequiredFieldValidator" ValidationGroup="FileUpload"> 
            * Please select a file to upload...
       </asp:RequiredFieldValidator></td>
   </tr>
   <tr>
     <td colspan="3">
        <asp:RegularExpressionValidator ID="FilenameRegExValidator" runat="server" 
             ControlToValidate="FileUpload1" Display="Dynamic" 
             ErrorMessage="RegularExpressionValidator" 
             ValidationExpression="(?i)^[\w\s0-9.-]+\.(txt|pdf|doc|docx|xls|xlsx)$" 
             ValidationGroup="FileUpload">
             * Please upload file in format .pdf / .docx / .xlsx.
        </asp:RegularExpressionValidator>
     </td>
   </tr>
  </table>   
        <asp:Label ID="lblfileuploaded" runat="server" Text=""></asp:Label> 
```

到目前为止，这是我的 VB 页面代码：

```
Protected Function GetUploadList() As String()
            Dim folder As String = Server.MapPath("~/Uploads")
    Dim files() As String = Directory.GetFiles(folder)
    Dim fileNames(files.Length - 1) As String
    Array.Sort(files)

    For i As Integer = 0 To files.Length - 1
        fileNames(i) = "<a href=""Uploads/" & Path.GetFileName(files(i).ToString()) & """ target=""_blank"">" & Path.GetFileName(files(i)) & "</a>"
    Next

    Return fileNames
End Function

   Protected Sub UploadThisFile(ByVal upload As FileUpload)
    If upload.HasFile Then
        Dim theFileName As String = Path.Combine(Server.MapPath("~/Uploads"), upload.FileName)

        If File.Exists(theFileName) Then
            File.Delete(theFileName)
        End If

        upload.SaveAs(theFileName)
    End If
End Sub

Protected Sub buttonUpload_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles buttonUpload.Click
    UploadThisFile(FileUpload1)
    UploadedFiles.DataBind()
End Sub 
```

非常感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:49:36.610

正如[Tim Schmelter](https://stackoverflow.com/users/284240/tim-schmelter)[在评论中所说](https://stackoverflow.com/questions/10619364/simple-message-to-display-on-file-upload#comment13761436_10619364)，您应该在[`SaveAs`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.saveas.aspx)成功调用后设置标签的文本。

您可以使用`Try`->`Catch`来确保没有异常（根据上面链接的 MSDN 文章，该`SaveAs`方法可能会抛出[`HttpException`](http://msdn.microsoft.com/en-us/library/system.web.httpexception.aspx)）。像这样的东西：

```
Try
    upload.SaveAs(theFileName)
    fileuploaded.Text="File uploaded successfully"
Catch ex As Exception
    fileuploaded.Text="Upload failed.  Reason: " + ex.Message 
```

# javascript - 如何有效加载 1000 多个 Google 地球标记？

> ID：10619374
> 
> 赞同：0
> 
> 时间：2012-05-16T13:16:22.977
> 
> 标签：javascript, google-earth, google-earth-plugin

我有一个包含 1000 多个 Google 地球标记的数组。

目前，我正在使用 for 循环遍历数组，这会导致地球冻结，直到它们全部成功加载。

任何人都可以推荐最好的方法来处理这个问题，以便访问者更快地加载吗？

理想情况下，我正在考虑仅在视图/边界中加载那些标记，但还没有看到任何支持这个想法的文档。

任何帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:56:50.670

我建议您使用[HTML5 WebWorkers](http://www.whatwg.org/specs/web-apps/current-work/multipage/workers.html#workers)异步实例化标记，然后使用它们为 show()/hide() 提供的任何方法，遍历您的对象。

它只适用于实现 WebWorkers 的最新浏览器，但我认为没有另一种有效的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T20:47:21.290

一种可能性是使用 KML 更新从服务器执行此操作： [https ://developers.google.com/kml/documentation/updates](https://developers.google.com/kml/documentation/updates)

例如，每次更新都会加载 100 个标记并显示它们，然后一秒钟后它会重新加载并提取接下来的 100 个标记。

# c# - 如何以编程方式将 XLL 文件加载到 Excel 中？

> ID：10619376
> 
> 赞同：2
> 
> 时间：2012-05-16T13:16:37.683
> 
> 标签：c#, c++, .net, excel, office-interop

当 XLL 文件链接到其他 DLL 时，如何以编程方式将其加载到 Excel 中。使用 c# winforms application + Excel Automation 我正在创建 Excel Application 对象。然后我正在使用：

```
bool bXllLoadSuccess = _excelApp.RegisterXLL(_pathXll); 
```

当 XLL 是独立的时就可以了。当它依赖于其他 DLL 时会出现此问题。即使我把它们放在同一个文件夹中，Excel 也不想把它们捡起来。在加载 XLL 之前，我尝试执行以下操作，但没有帮助：

```
_excelApp.DefaultFilePath = Path.GetDirectoryName(_pathXll); 
```

我也试过这个：

```
Directory.SetCurrentDirectory(Path.GetDirectoryName(_pathXll)); 
```

Dependency walker 没有显示任何问题 - 所有必需的文件都与 XLL 位于同一文件夹中。有任何想法吗？

谢谢。

**UPD：**我尝试将所有需要的 dll 复制到一个文件夹中，然后将其路径添加到 PATH 变量中。没有帮助:)

**UPD2：**我尝试同时更改 c# 应用程序和 Excel 应用程序对象的当前目录。没有帮助:(

# c++ - 检测 CRTP 基类的同级

> ID：10619381
> 
> 赞同：1
> 
> 时间：2012-05-16T13:17:00.913
> 
> 标签：c++, inheritance, stl, sfinae, crtp

我正在尝试使用`boost::is_base_of`以检测 CRTP 基类是否`Generic`可以识别其对等点，即`T`也派生自的类。

如中所示`Generic<T>::init()`，我想使用这些机制来允许类`Generic<T>`将指针添加到其对等函数之一`Bar1`或`Bar2`（`T`也从中派生）映射。不幸的是，无法检测到不派生自的`boost::is_base_of`类，例如。`Bar3``T`

```
#include <iostream>
#include <cstdlib>
#include <string>
#include <typeinfo>
#include <map>
#include <boost/type_traits.hpp>

//////////////////////////////////////////////////////////////////////////////////////

template<typename T>
class Bar
{
public:
    void setValue()
    {
        std::cout << typeid(this).name() << std::endl;
    }
};

class Bar1 : public Bar<char>{};
class Bar2 : public Bar<bool>{};
class Bar3 : public Bar<long>{};

//////////////////////////////////////////////////////////////////////////////////////

template<typename T>
class Generic
{
public:
    typedef void (T::*setter)();
    void init();
};

template<typename T>
void Generic<T>::init()
{
    std::map<std::string , Generic<T>::setter> setterMap;
    if( boost::is_base_of<Bar1, T >::value ) setterMap["bar1"] = &Bar1::setValue;
    if( boost::is_base_of<Bar2, T >::value ) setterMap["bar2"] = &Bar2::setValue;
    if( boost::is_base_of<Bar3, T >::value ) setterMap["bar3"] = &Bar3::setValue;
    std::cout << setterMap.size() << std::endl;
}

//////////////////////////////////////////////////////////////////////////////////////

template<typename T>
class Foo : public Bar1 , public Bar2 , public Generic<Foo<T> >
{
public:

};

//////////////////////////////////////////////////////////////////////////////////////

int main()
{
    Foo<int> f;
    f.init();

    return EXIT_SUCCESS;
}

////////////////////////////////////////////////////////////////////////////////////// 
```

gcc 错误信息：

```
In static member function ‘static void Generic<T>::init() [with T = Foo<int>]’:
error: cannot convert ‘void (Bar<long int>::*)()’ to ‘void (Foo<int>::*)()’ in assignment 
```

**编辑**

为这个问题提供一些背景。我正在尝试将指向`setValue`每个基类的方法的指针存储`Foo<T>`在映射中以便快速访问。调用的选择`setValue`取决于字符串，因此取决于地图。另一个类`X`可以继承`Bar1`，`Bar3`但不能继承`Bar2`，和以前一样，我必须存储指向适当`setValue`的指针以便快速访问。`Generic<T>`旨在为 等 履行这个`Foo`角色`X`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:21:53.953

在我的脑海中，我无法想象没有中间人的工作......

是否可以通过运算符重载创建一个封装所需逻辑的结构？该结构将有一个原始指针，然后您可以通过重载来尊重它，以确保它被正确使用。

另一种看似易读的方法是创建另一个作为 Facade 的前向类，然后利用它。

这类似于需要[覆盖逆变换方法](https://stackoverflow.com/questions/7144893/override-contra-variance-workaround-needed)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:39:18.993

杰是对的。我做了以下更改，这似乎有效。

```
template <bool, typename T> struct AddSetter;

template <typename T> struct AddSetter <true, T>
{
    template<typename F>
    void Set (std::map<std::string , typename Generic<T>::setter>& setterMap, const std::string& key, F fn)
    {
        setterMap[key] = fn;
    }
};

template <typename T> struct AddSetter <false, T>
{
    template<typename F>
    void Set (std::map<std::string , typename Generic<T>::setter>& setterMap, const std::string& key, F fn)
    {
    }
};

template<typename T>
void Generic<T>::init()
{
    std::map<std::string , Generic<T>::setter> setterMap;
    AddSetter<boost::is_base_of<Bar1, T >::value, T>().Set (setterMap, "bar1", &Bar1::setValue);
    AddSetter<boost::is_base_of<Bar2, T >::value, T>().Set (setterMap, "bar2", &Bar2::setValue);
    AddSetter<boost::is_base_of<Bar3, T >::value, T>().Set (setterMap, "bar3", &Bar3::setValue);
    std::cout << setterMap.size() << std::endl;
} 
```

# math - 将极角映射到 0..1

> ID：10619382
> 
> 赞同：2
> 
> 时间：2012-05-16T13:17:01.723
> 
> 标签：math, glsl, trigonometry

给定一个笛卡尔位置，如何将角度从原点映射到范围 0 .. 1？

我试过了：

```
sweep = atan(pos.y,pos.x) + PI) / (2.*PI); 
```

（扫描应介于 0 和 1 之间）

这是 GLSL，因此该[`atan`](http://www.opengl.org/sdk/docs/manglsl/xhtml/atan.xml)函数对两个参数（y 然后 x）感到满意并返回 -PI ... PI

这在左上象限中给出了 1，在右上象限中给出了一个很好的渐变到右下象限，然后在左下象限中为 0：

![一个映射不好的 atan](../Images/c33a8cef9e19f99310ef8c2ff78a0f16.png)

我如何获得一个不错的单梯度扫描呢？我想要某处的最大扫掠，以及逆时针与之相邻的最小扫掠。

这是我的 GLSL 着色器代码：

顶点着色器：

```
uniform mat4 MVP_MATRIX;
attribute vec2 VERTEX;
varying vec2 pos;
void main() {
    gl_Position = MVP_MATRIX * vec4(VERTEX,-2,1.);
    pos = gl_Position.xy;
} 
```

片段着色器：

```
uniform vec4 COLOUR;
varying vec2 pos;
void main() {
    float PI = 3.14159265358979323846264;
    float sweep = (atan(pos.y,pos.x) + PI) / (2.*PI);
    gl_FragColor = vec4(COLOUR.rgb * sweep,COLOUR.a);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T13:24:52.397

大多数编程语言都有一个双参数版本`atan`，通常称为`atan2`这通常会给出范围内的结果（-PI，PI]。要将其转换为值 0-1，您可以使用：

```
(atan2(y,x) + PI) / (2*PI) 
```

由于您的语言`atan`函数需要两个参数，因此它可能与`atan2`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T13:25:36.837

您似乎正在使用[`atan2`](https://en.wikipedia.org/wiki/Atan2)，它返回 (-pi, pi) 中的角度。把它变成：

```
atan2(pos.y,pos.x) + PI) / (2*PI) 
```

# .net - 以编程方式将文件添加到 .NET 安装项目中的文件系统

> ID：10619384
> 
> 赞同：2
> 
> 时间：2012-05-16T13:17:09.230
> 
> 标签：.net, installation, filesystems, setup-deployment

**问题：** 有一个构建我们的可执行文件的过程。在运行 setup/deploy 项目的构建之前，我构建了需要包含在 setup/deploy 项目的 FileSystem/Common Documents 文件夹中的文件。如果文件名总是被创建为相同的文件名，这很简单；但是，我有一个无法预先确定文件名的情况，因为该过程可以并且将在每次连续运行时创建一个唯一的文件名。

**问题：** 如何以编程方式将文件添加到 FileSystem/Common Documents 文件夹？

**我的研究：** 我研究了自定义操作，但不确定如何引用设置/部署项目的文件系统，以便我可以添加这些文件。

**更多细节** 作为我们日常构建过程的一部分，我们创建[http://lucene.apache.org/](http://lucene.apache.org/) (Lucene) 索引，其中 *.cfs 形式的文件可以具有与前一天不同的文件名。由于我们不希望在 Visual Studio 中打开 vdproj 文件并使用文件系统编辑器手动替换文件名，因此我们需要一种更自动化的方法。

**我们的解决方案** 作为解决方案，我使用了[http://www.ewaldhofman.nl/post/2011/04/06/Customize-Team-Build-2010-e28093-Part-16-Specify-the-relative-reference-path。 aspx](http://www.ewaldhofman.nl/post/2011/04/06/Customize-Team-Build-2010-e28093-Part-16-Specify-the-relative-reference-path.aspx)（Ewald Hofman 的）关于 TFS Team Build 的优秀教程。在此，我复制了他的签出活动和签入活动，同时添加了我自己的自定义活动，该活动打开 vdproj 文件并根据预生成的 Lucene 索引文件名编辑文件。

**代码示例**

```
 protected override void Execute(CodeActivityContext context)
    {

        string fileFullName = context.GetValue(this.FileFullName);

        string dropFolder = context.GetValue(this.DropLocation);

        string[] indexerNames = context.GetValue(this.LuceneIndexes);

        try
        {
            //read the vdproj file into memory
            string text = File.ReadAllText(fileFullName);

            //for each lucene index folder 
            foreach (string index in indexerNames)
            {

                //traversing twice so that the lucene index and spell index can be handled
                //these are subfolder names we use to segregate our normal lucene index from our spelling indexes.
                foreach (string subFolderInLuceneIndex in new string[] { "en_US_9", "en_US_9_sp" })
                {

                    //retrieve all the files in folder \\[DropFolder]\[index]\[subFolderInLuceneIndex]\*.cfs
                    foreach (string file in Directory.GetFiles(System.IO.Path.Combine(dropFolder, index, subFolderInLuceneIndex), "*.cfs"))
                    {
                        FileInfo cfsFile = new FileInfo(file);

                        context.TrackBuildMessage(string.Format("Exiting file in lucene index directory: {0}", cfsFile.FullName));

                        string fileNamePattern = ".+.cfs";

                        string div = Dividor(4);

                        //matching pattern for sourcepath ie("SourcePath" = "8:\\\\...\\[index]\\[subFolderInLuceneIndex]\\_0.cfs")
                        string sourcePattern = string.Format("(\".+{1}{0}{2}{0}{3})", div, index, subFolderInLuceneIndex, fileNamePattern);

                        //matching pattern for targetname ie("TargetName" = "8:_0.cfs")
                        string targetPattern = string.Format("(\"TargetName\"\\s=\\s\"8:{0})", fileNamePattern);

                        StringBuilder sb = new StringBuilder();
                        sb.Append(sourcePattern);
                        sb.Append("(.+\\r\\n.+)"); //carriage return between targetpattern and sourcepattern
                        sb.AppendFormat(targetPattern);

                        //(.+[index]\\\\[subFolderInLuceneIndex].+.cfs)(.+\r\n.+)(TargetName.+8:.+.cfs)

                        MatchCollection matches = Regex.Matches(text, sb.ToString(), RegexOptions.Multiline);
                        //if more than one match exists, a problem with the setup and deployment file exists
                        if (matches.Count != 1)
                        {
                            throw new Exception("There should exist one and only one match.");

                        }
                        else
                        {

                            foreach (Match match in matches)
                            {
                                string newText = text;

                                string existingPattern = match.Value;

                                if (match.Groups != null)
                                {
                                    //if the value found using the match doesn't contain the filename, insert the filename
                                    //into the text
                                    if (!match.Value.Contains(cfsFile.Name))
                                    {
                                        //matched by sourcePattern
                                        string sourceValue = match.Groups[1].Value;

                                        //matched by targetPattern
                                        string targetNameValue = match.Groups[3].Value;

                                        int idIndex = targetNameValue.IndexOf("8:") + 2;

                                        //get the old *.cfs file name
                                        string oldFileName = targetNameValue.Substring(idIndex, targetNameValue.Length - idIndex);

                                        //replace old cfs file name with new cfs file name in the target pattern
                                        string newTargetNameValue = Regex.Replace(targetNameValue, oldFileName, cfsFile.Name);

                                        //replace old cfs file name with new cfs file name in the source pattern
                                        string newSourceValue = Regex.Replace(sourceValue, oldFileName, cfsFile.Name);

                                        //construct the new text that will be written to the file
                                        StringBuilder newSb = new StringBuilder();
                                        newSb.Append(newSourceValue);
                                        //account for the quote, carriage return and tabs. this ensures we maintain proper 
                                        //formatting for a vdproj file
                                        newSb.Append("\"\r\n\t\t\t");
                                        newSb.AppendFormat(newTargetNameValue);

                                        newText = Regex.Replace(text, sb.ToString(), newSb.ToString(), RegexOptions.Multiline);

                                        File.WriteAllText(fileFullName, newText);

                                        context.TrackBuildMessage(string.Format("Text {0} replaced with {1}.", oldFileName, cfsFile.Name));

                                    }
                                    else
                                    {
                                        context.TrackBuildMessage("No change applied for current file.");
                                    }
                                }
                            }
                        }
                    }
                }

            }

        }
        catch (Exception ex)
        {

            context.TrackBuildError(ex.ToString());

            throw ex;
        }
    }
    private static string Dividor(int n)
    {
        return new String('\\', n);
    } 

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:31:37.260

您需要将所需信息添加到 .V?PROJ（如在 C++ 中，您有文件扩展名 VDPROJ）。需要添加到安装程序文件的文件部分的信息。这不是一个步骤的过程，请通过安装程序项目文件（VDPROJ 文件）并理解它。

# assembly - GCC4 - ARMv5 寄存器分配

> ID：10619388
> 
> 赞同：1
> 
> 时间：2012-05-16T13:17:45.673
> 
> 标签：assembly, arm, gcc4

有没有办法让 GCC 以不同于该架构的标准 ABI 的方式生成使用寄存器的代码。

我正在使用 ARMv4 芯片（LPC2000），我需要我的快速中断更快。

我有一个 FIQ 例程，但我必须将 r0..r7 存储在堆栈上，这对于 FIQ 模式似乎毫无意义，因为它有自己的寄存器组 R8..r15。我想改用它们并节省 16 个指令周期，用于从堆栈中推送和弹出内容。

在任何人陈述明显之前：用汇编语言重新编写 FIQ 处理程序，是的，我知道我可以做到，这个问题更具体。

是否有 #pragma 或 __attribute__ 或开关告诉 GCC4 更改它在函数中分配寄存器的顺序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:51:20.563

A.当您使用pragma声明函数时，这*应该*被正确优化掉：`interrupt`

```
void f () __attribute__ ((interrupt ("FIQ"))); 
```

来源： http: [//gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html#Function-Attributes](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html#Function-Attributes)

B.**但是**我发现一个开放的错误报告，这目前*没有*优化相关寄存器的推送/弹出。该错误报告已被归类为“错过的优化”，自 2011 年 6 月确认以来一直开放。

来源：[http ://gcc.gnu.org/bugzilla/show_bug.cgi?id=48429](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=48429)

# linear-programming - 用 Mathprog 编写的线性程序中变量的已知值

> ID：10619389
> 
> 赞同：2
> 
> 时间：2012-05-16T13:17:47.060
> 
> 标签：linear-programming, ampl, mathprog

我有一个用[MathProg](http://en.wikibooks.org/wiki/GLPK/GMPL_%28MathProg%29)编写的线性程序。我未知的二进制变量是一个二维数组，定义为：

```
var x{i in V, l in L}, >=0, <=1; 
```

其中 V 和 L 是整数集。

然而，一些变量的值是预先知道的，我想为求解器指定它以减小 ILP 的大小。例如，我知道当 l=2 时 x[4,l] 为 1 并且对于 l 的任何其他值为零。目前，我将其指定为***约束***：

```
s.t. initial4{i in V: i=4}:   sum{l in L}(l*x[i,l]) = 2; 
```

我想知道这是否是提前指定未知子集值的有效方法。

理想情况下，我想将此类信息与数据部分一起放在单独的文件中，而不是放在模型文件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:57:10.703

为每个变量创建一个上限和下限：

```
var x{i in index_set}, >=x_L[i], <=x_U[i]; 
```

并调整已知值的下限和上限。

`x[2]`这是一个固定为零的 MathProg 片段：

```
set index_set;

param x_L{index_set};
param x_U{index_set};

var x{i in index_set}, >=x_L[i], <=x_U[i];

s.t.

dummy:
  sum{i in index_set} x[i] = 2;

solve;

display x;

data;

set index_set := 1, 2, 3;

param x_L default 0;
param x_U default 1 :=
2 0;

end; 
```

从（过滤后的）输出中可以清楚地看出，预处理器足够聪明，可以修复`x[2]`为 0：

```
glpsol --math test.mod 

OPTIMAL SOLUTION FOUND BY LP PREPROCESSOR

x[1].val = 1
x[2].val = 0
x[3].val = 1 
```

# c# - listView 删除行并更新

> ID：10619391
> 
> 赞同：0
> 
> 时间：2012-05-16T13:17:53.007
> 
> 标签：c#, listview

我有一个正在从多个线程更新的 listView，其中显示了线程状态和 id。当一个线程结束时，该项目被删除。

我的问题是我用来更新我的 listView 的方式是使用 listViews ID（定位我希望更新的子项）。现在，随着 listView 项目开始被删除，我遇到了问题，因为特定线程的 ID 已更改。

这是我目前用于更新和删除的代码：

```
 private void AddToListViewThread(string user, string status, int threadNumber)
    {
        Invoke(new MethodInvoker(
                       delegate
                       {
                           listView2.BeginUpdate();
                           this.listView2.Items[threadNumber].SubItems[1].Text = user;
                           this.listView2.Items[threadNumber].SubItems[2].Text = status;
                           listView2.EndUpdate();
                       }
                       ));
    }

    private void RemoveFromListViewThread(int threadNumber)
    {
        Invoke(new 
            MethodInvoker(
                       delegate
                       {
                           listView2.BeginUpdate();
                           this.listView2.Items.RemoveAt(threadNumber);
                           listView2.EndUpdate();
                       }
                       ));
    } 
```

我现在明白我不能使用 threadNumber 作为项目索引（因为项目被删除）还有其他方法可以实现吗？也许通过定位“用户”子项？然后从中获取子项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:28:23.670

使用 ListViewItem 的 tag 属性来存储不同的索引（类似于 SQL autoincrement ）。

Tag 属性是用于存储有关项目的元数据的字段。

一个简单的二分搜索可以让您在 Log(n) 时间内找到要删除的项目。

您的代码如下所示：

```
private void AddToListViewThread(string user, string status, int threadNumber)
{
    Invoke(new MethodInvoker(
                   delegate
                   {
                       listView2.BeginUpdate();
                       int i = SearchItem(listView2, threadNumber);
                       if ( i > -1)
                       {
                       this.listView2.Items[i].SubItems[1].Text = user;
                       this.listView2.Items[i].SubItems[2].Text = status;
                       }
                       listView2.EndUpdate();
                   }
                   ));
}

private void RemoveFromListViewThread(int threadNumber)
{
    Invoke(new MethodInvoker(
                   delegate
                   {
                       listView2.BeginUpdate();
                       int i = SearchItem(listView2, threadNumber);
                       if ( i > -1)
                       {
                           this.listView2.Items.RemoveAt(i);
                       }
                       listView2.EndUpdate();
                   }
                   ));
}

private int SearchItem(ListView list, int id)
{ 
         for (int i  = 0; i < list.Items.Count; i++) // I used sequential search but you can implement binary instead
         {
            if (((int)list.Items[i].Tag) == id) return i;
         }
         return -1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:28:07.287

您可能想查看 ListViewItem.Tag 以了解它是否适​​用于您的特定场景。您可以在创建时将线程的 ID 存储在项目的标签中，如果您删除 ListView 中的其他项目，它不会更改。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.listviewitem.tag.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.listviewitem.tag.aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-16T13:23:33.560

试试这个->`this.listView2.Remove(this.listView2.Items.FindByValue(threadNumber));`

# java - 何时在 libgdx 中使用演员？什么是缺点和优点？

> ID：10619394
> 
> 赞同：22
> 
> 时间：2012-05-16T13:17:58.213
> 
> 标签：java, android, actor, libgdx, stage

我正在编写简单的太阳系模拟器。这是我的第一个 libgdx 项目。我在主菜单中使用了舞台和演员，并且非常方便，尤其是触摸事件处理。但是......看看这些例子，我发现没有人在实际游戏逻辑中使用演员。如果我应该使用actor作为行星类的父级，或者只是编写我自己的类，我会徘徊。行星是不可触摸的，它们只会在帧之间移动，因此动作 MoveBy 的第三个参数必须是帧之间的时间。这就是缺点。使用 Actors 的优点是什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-22T19:53:26.137

Actor 的主要优点是动作、命中测试和触摸事件以及 Actor 组。

如果您的游戏逻辑需要，动作可以快速轻松地进行补间。

您可以随时调用 stage.hit(x, y) 以将第一个返回 true 的 actor 返回到您为其编写的任何命中逻辑（通常检查 x、y、width、height 的边界）。返回此演员或 null 以继续遍历演员的命中方法以寻找命中演员。如果没有演员被击中，则返回 Null。

Hit 用于舞台的触摸事件。演员的触摸方法传递本地坐标，舞台处理对象的重叠，例如，如果一个演员覆盖另一个演员，使另一个演员不应该收到touchDown，则在覆盖的演员上返回true以停止对演员的touchDown调用“下面”。这也将“焦点”设置在返回 true 的 Actor 上，以便调用 Actor 的 touchUp。

您可以将 Actor 组合在一起，以将整个 Actor 组作为一个单元执行动作、触摸事件等。

一些缺点：演员需要一个在一定程度上限制功能的舞台。许多编码人员使用其他逻辑来确定游戏对象状态，而不是scene2d Actions（例如box2d）。如果您将 Actors 用于游戏对象，您可能需要两个阶段，一个用于 ui，一个用于游戏世界。如果你不使用它们，你可能会使用你自己的 SpriteBatch 和 Camera。请记住，Actor 只有一个抽象的 Draw 方法，所以无论如何您仍然需要创建绘制逻辑。您可能会将 TextureRegion 或 Sprite 作为 Actor 的私有字段。如果您想使用自己的更新逻辑，您可以重写 act(float delta) 方法来获取增量时间（如果使用 Actions，请调用 super.act(delta)）。

因此，如果您有自己的逻辑并且不会使用 Stage 提供的大部分功能，请节省一些资源并推出您自己的特定于应用程序的解决方案。如果您可以在不限制所需功能的情况下使用某些专业人士，那么请为游戏逻辑选择第二阶段。

# java - ResourceBundle.getBundle 和 Websphere

> ID：10619395
> 
> 赞同：0
> 
> 时间：2012-05-16T13:18:00.167
> 
> 标签：java, websphere

我有一些这样的代码：

```
 resourceBundle = ResourceBundle.getBundle(
      "com.something.whatever.txt", getLocale()); 
```

此代码是 websphere 运行的应用程序的一部分。

`com.something.whatever.properties`是一个文本文件，然后被 jarred 和部署。

问题是：我可以轻松地覆盖它吗？以某种方式重新部署这个文件而不是整个应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:23:25.237

是的，你可以但我强烈建议你在尝试之前重新启动应用程序。

# jakarta-ee - 在Servlet中注入EntityManager？

> ID：10619396
> 
> 赞同：0
> 
> 时间：2012-05-16T13:18:00.603
> 
> 标签：jakarta-ee, servlets, jpa, ejb, entitymanager

我想将 EM 注入 Servlet，持久性单元在 EJB JAR 中声明。我有一个带有 EJB JAR 和 WAR 的 EAR。
问题是我收到此错误：

> 无法解析与调用的模块范围内的 persistence-context-ref-name [cvu.JpaServlet/em] 对应的持久性单元

如果我将persistence.xml 放在WAR 中它可以正常工作，但我不想这样做。

我可以从 EJB JAR 中声明的 PersistenceUnit (persistence.xml) 中获取 EntityManager 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T08:53:01.773

我将我所有的持久性类和持久性.xml 移动到一个`persist.jar`. `ear/lib`现在它适用于 EJB 和 WAR。如果你把`persistence.xml`just 放在你的里面，`name.war/WEB-INF/classes/META-INF/persistence.xml`你将无法在 EJB 中使用它。如果你把它放在 EJB 中，你将无法`@PersistenceUnit EntityManagerFactory`在 WAR 中使用。为了让您在 WAR 中访问它，您也可以将它放在`WEB-INF/lib/persist.jar/META-INF/persistence.xml`. 但更好的是在 EAR 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:34:39.787

我认为您需要将 ejb jar 添加到您的战争类路径中。

通常，您应该将 EntityManagerFacotry 注入 Servlet，而不是 EntityManager，因为 Servlet 是共享的。

您还可以使用 SessionBeans 包装您的持久性。

# ios - 如何恢复丢失的 SKPaymentTransactions？

> ID：10619402
> 
> 赞同：9
> 
> 时间：2012-05-16T13:18:24.190
> 
> 标签：ios, storekit

我有一个测试帐户，其交易历史记录中恰好有两次购买。这两种产品都是非消耗品。

我在 iPad 1 上登录并购买了产品 A。

然后我退出 iPad 1 并登录 iPad 2 并购买产品 B。

然后我尝试恢复以前的交易，`[[SKPaymentQueue defaultQueue] restoreCompletedTransactions];`用于在 iPad 2 上解锁产品 A。

当调用返回时，只有产品 B 在可恢复事务列表中。

此外，当我尝试在 iPad 2 上再次购买产品 A 时，使用

```
SKPayment *payment = [SKPayment paymentWithProduct:productA];
[[SKPaymentQueue defaultQueue] addPayment:payment]; 
```

我收到一个弹出窗口说'你已经购买了这个。点击确定以免费再次下载。

如果我已经购买了产品 A，当我尝试恢复之前的购买时，为什么它不在产品列表中？为什么我必须让用户再次尝试购买？

编辑：
我发现我使用哪个 iPad（iPad 1 或 iPad 2）并不重要，只有产品 B 出现在可恢复交易列表中，并且产品 A 需要重新购买。

编辑：
我将产品请求、恢复和购买工作外推到其自己的项目中，其捆绑 ID 和产品 ID 与原始项目相同。

现在可恢复交易列表中*没有任何内容*，但是当我尝试购买任何一种产品时都会出现相同的弹出窗口。

又一次带着坏掉的苹果工具钻进兔子洞。

编辑：
这项调查的灵感来自于用户对缺少权利的大量投诉。当用户从他们的 iPad 2s 切换到新的 iPad 3s 时，这在很大程度上开始成为一个问题。这在我的所有用户中并不一致，但他们中有足够多的人对此表示不满，将其作为优先事项，Apple 客户支持已将他们转回给我，但我不确定这是我能解决的问题，特别是因为苹果坚持成为应用内购买的收银机。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T08:03:31.803

此消息'您已经购买了这个。点击确定以免费再次下载。通常在您将付款交易添加到默认队列并且未完成交易时出现，因此`StoreKit`假设用户确实购买了该项目但尚未由您的应用程序下载，因此请确保您已交付该项目给用户并完成交易......我有办法检索用户购买的物品，它对我有好处..试试看

```
- (void) checkPurchasedItems
{
   [[SKPaymentQueue defaultQueue] restoreCompletedTransactions];
}//You Call This Function

//Then this delegate Function Will be fired
- (void) paymentQueueRestoreCompletedTransactionsFinished:(SKPaymentQueue *)queue
{
  purchasedItemIDs = [[NSMutableArray alloc] init];

  NSLog(@"received restored transactions: %i", queue.transactions.count);
  for (SKPaymentTransaction *transaction in queue.transactions)
  {
      NSString *productID = transaction.payment.productIdentifier;
      [purchasedItemIDs addObject:productID];
  }

} 
```

将`purchasedItemIDs`包含用户购买的所有产品 ID。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T17:19:41.600

我有充分的权威认为这是苹果服务器软件某处的一个错误。

# sql - SQL 从表中的两列（或多列）中选择最高值

> ID：10619407
> 
> 赞同：4
> 
> 时间：2012-05-16T13:18:40.787
> 
> 标签：sql, sql-server

不确定是否有一种优雅的方式来实现这一点：

**数据**

```
ID   Ver   recID  (loads more columns of stuff)  
1     1       1  
2     2       1  
3     3       1  
4     1       2  
5     1       3  
6     2       3 
```

因此，我们将 ID 作为主键，将 Ver 作为版本，将 recID 作为记录 ID（将所有版本绑定在一起的任意基础 ID）。

所以我想`select`从以下数据，第 3、4 和 6 行。即给定记录 ID 的最高版本。

有没有办法用一个 SQL 查询来做到这一点？或者我需要`SELECT DISTINCT`在记录 ID 上做一个，然后单独查询以获得最高值？还是将批次拉入应用程序并从那里过滤？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T13:22:01.847

A`GROUP BY`足以获得每个`recID`.

```
SELECT  Ver = MAX(Ver), recID
FROM    YourTable
GROUP BY
        recID 
```

如果还需要对应的ID，可以把这个包装成子选择

```
SELECT  yt.*
FROM    Yourtable yt
        INNER JOIN (
          SELECT  Ver = MAX(Ver), recID
          FROM    YourTable
          GROUP BY
                  recID
        ) ytm ON ytm.Ver = yt.Ver AND ytm.recID = yt.RecID 
```

或者，根据您使用的 SQL Server 版本，使用`ROW_NUMBER`

```
SELECT  *
FROM    (
          SELECT  ID, Ver, recID
                  , rn = ROW_NUMBER() OVER (PARTITION BY recID ORDER BY Ver DESC)
          FROM    YourTable
        ) yt
WHERE   yt.rn = 1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-16T13:22:02.223

`ver`获得给定的最大值`recID`很容易。要获得`ID`，您需要加入获得这些最大值的嵌套查询：

```
select ID, ver, recID from table x
inner join
    (select max(ver) as ver, recID
     from table
     group by recID) y
on x.ver = y.ver and x.recID = y.recID 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T13:22:07.247

您可以使用`cte`with`ROW_NUMBER`函数：

```
WITH cte AS(
    SELECT ID, Ver, recID
    ,      ROW_NUMBER()OVER(PARTITION BY recID ORDER BY Ver DESC)as RowNum
    FROM data
)
SELECT ID,Ver,recID FROM cte
WHERE RowNum = 1 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-16T13:24:50.207

使用子查询的简单示例：

```
SELECT  a.*
FROM    tab a
WHERE   ver = (
            SELECT max(ver)
            FROM   tab b
            WHERE  b.recId = a.recId
        ) 
```

（注意：这假设 (recId, ver) 的组合是唯一的。通常，这些列上会有一个主键或唯一约束，按此顺序，然后该索引可用于优化此查询）

这适用于几乎所有 RDBMS-es，尽管相关的子查询可能无法非常有效地处理（取决于 RDBMS）。不过在 MS SQL 2008 中应该可以正常工作。

# jsf - jsf - 带有 bean 的 el 函数

> ID：10619409
> 
> 赞同：-1
> 
> 时间：2012-05-16T13:18:44.910
> 
> 标签：jsf, el, taglib

嗨，我可以为 el 定义这样的函数：

```
 <function>
        <function-name>areAllGranted</function-name>
        <function-class>org.springframework.faces.security.FaceletsAuthorizeTagUtils</function-class>
        <function-signature>boolean areAllGranted(java.lang.String)</function-signature>
    </function>
</facelet-taglib> 
```

但是，如果我想使用带有初始化的自动装配字段的 spring bean，而不是一个简单的类的新实例，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:23:19.400

如果您使用的是支持 EL 2.2（Tomcat 7、Glassfish 3 等）的 Servlet 3.0 容器，请执行此操作。

```
<h:someComponent rendered="#{bean.areAllGranted('someString')}"> 
```

如果您使用的是不支持它的旧 Servlet 2.5 容器，请安装 JBoss EL 以便您可以使用新的 EL 2.2 语法。这在此处详细回答：[Invoking methods with parameters by EL in JSF 1.2](https://stackoverflow.com/questions/8325298/invoking-methods-with-parameters-by-el-in-jsf-1-2/8326551#8326551)

# java - Webapp 中的法语字符编码

> ID：10619414
> 
> 赞同：1
> 
> 时间：2012-05-16T13:18:56.640
> 
> 标签：java, tomcat, encoding

我在我的 web 应用程序中编码/解码法语字符时遇到问题。技术堆栈如下所示：

*   一个实用 jar，它对使用目标 Java 1.5 编译的法语字符进行了编码/解码
*   一场将使用 maven 编译的战争，目标是 Java 1.5
*   Tomcat 5.5.17 / JVM 1.5.0_06-b05

我有一个实用程序类来编码/解码如下：

```
public static String encodeFrenchCharacters(String src)
{
    String output = src;
    logger.info("[encodeFrenchCharacters] start: " + output);

    output = output.replaceAll("è","&egrave;");

    logger.info("[encodeFrenchCharacters] end: " + output);
    return output;
}

public static String decodeFrenchCharacters(String src)
{
    String output = src;
    logger.info("[decodeFrenchCharacters] start: " + output);

    output = output.replaceAll("&egrave;","è");

    logger.info("[decodeFrenchCharacters] end: " + output);
    return output;
} 
```

我编写了一个简单的 Java 程序来测试功能：

```
public static void main(String[] args)
{
        String s1 = "è è è test 2";
        System.out.println("s1: " + s1);

        String s2 = encodeFrenchCharacters(s1);
        System.out.println("s2: " + s2);

        String s3 = decodeFrenchCharacters(s1);
        System.out.println("s3: " + s3);
} 
```

正如预期的那样，一切正常：

```
s1: è è è test 2

[encodeFrenchCharacters] start: è è è test 2
[encodeFrenchCharacters] end: &egrave; &egrave; &egrave; test 2
s2: &egrave; &egrave; &egrave; test 2

[decodeFrenchCharacters] start: &egrave; &egrave; &egrave; test 2
[decodeFrenchCharacters] end: è è è test 2
s3: è è è test 2 
```

所以上面看起来不错。该实用程序类位于通过 maven 编译的 jar 中：

```
 <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.3.2</version>
        <configuration>
          <source>1.5</source>
          <target>1.5</target>
          <encoding>UTF-8</encoding>
        </configuration>
      </plugin> 
```

另外，我有一个包含 helper jar 的 webapp (war)。在war里面的Servlet中，它接收到一个POST，body中包含了String

```
&egrave; &egrave; &egrave; test 2 
```

然后在阅读 POST 正文后，我将其传递给 decode 函数，结果如下：

```
[decodeFrenchCharacters] start: &egrave; &egrave; &egrave; test 2
[decodeFrenchCharacters] end: Ã¨ Ã¨ Ã¨ test 2 
```

在 Tomcat server.xml 我已经有：

```
<Connector port="8383" maxHttpHeaderSize="8192"
           maxThreads="150" minSpareThreads="25" maxSpareThreads="75"
           enableLookups="false" redirectPort="8443" acceptCount="100"
           connectionTimeout="20000" disableUploadTimeout="true"
           URIEncoding="UTF-8"
/> 
```

在我的 Servlet doPost 我也尝试添加

```
request.setCharacterEncoding("UTF-8"); 
```

这里发生了什么？为什么当我在简单的 Java 程序中运行它（在我的机器上本地运行）时它可以工作，然后当我将它作为对 tomcat 的战争部署时，它无法处理法语字符？

旁注：我的第一次尝试实际上没有使用手动替换法语字符的实用程序类，我使用的是 Java 的 URLEncode 和 URLDecode，它给了我 %C3%A8 这很好，但与上面相同的问题，当我尝试解码时我结束了用 Ã¨ 而不是 è

谢谢你的帮助

# python - 双索引编号到线性编号

> ID：10619415
> 
> 赞同：0
> 
> 时间：2012-05-16T13:19:03.577
> 
> 标签：python, indexing

我正在努力解决一个问题 - 请原谅我的英语不好。我目前正在用 Python 编写一些脚本，我需要在其中操作列表并转换它们。我想将双编号转换为仅使用一个索引的另一种编号。

如果`n`是我的双编号的第一个索引和第二个索引，那么允许从中传递`m`的表达式是什么（这里但我想要一个一般规则）：`L(n, m) = idx``n_max = 3`

```
[n, m] => [[0, 0], [1, 0], [2, 0], [3, 0], [1, 1], [2, 1], [3, 1], [2, 2], [3, 2], [3, 3]] 
```

依此类推

```
idx => [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

? 它显然取决于 n_max 但我正在搜索一段时间并没有找到任何可靠的表达式或脚本。

例如，如果`[n, m]`具有以下结构：

```
[[0, 0], [1, 0], [1, 1], [2, 0], [2, 1], [2, 2], [3, 0], [3, 1], [3, 2], [3, 3]] 
```

搜索的表达式将是：

```
idx = L(n, m) = n * (n + 1) / 2 + m 
```

任何帮助将不胜感激，即使是很少的提示或链接 :) 谢谢！我已经在网上和这个网站上搜索过，但没有找到任何答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:42:56.067

找到了。如下：

```
$ idx = \sum_{i=0}^{m-1} l_{max} - i $ 
```

# css - ACE 组件的 CSS 样式路径

> ID：10619417
> 
> 赞同：0
> 
> 时间：2012-05-16T13:19:09.310
> 
> 标签：css, icefaces, icefaces-3

我喜欢在 jsf 页面中为 ace 组件（icefaces）添加 css 默认样式，但我不知道应该在 jsf 页面中包含什么路径的 css 样式。对于冰组件，我有以下 css 路径。

```
<link href="#{request.contextPath}/xmlhttp/css/rime/rime-portlet.css" rel="stylesheet" type="text/css"/> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-05T14:31:35.573

在 Web.xml 中

```
<context-param>
    <param-name>org.icefaces.ace.theme</param-name>
    <param-value>rime</param-value>
</context-param> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:56:36.140

那是你要找的吗？[http://wiki.icesoft.org/display/ICE/ace.theme](http://wiki.icesoft.org/display/ICE/ace.theme)

# c++ - c++更有效的方法将这两行代码写成一行代码

> ID：10619418
> 
> 赞同：1
> 
> 时间：2012-05-16T13:19:12.973
> 
> 标签：c++, optimization

是否有类似简短的 if else`= (cond) ? true : false`语句，但是将条件的结果传递给`{ }`？或者也许其他一些想法如何编写这种代码更优雅？

```
double t_day = day * 0.15;
if (t_day < 1) { t_day = 1; } 
```

也许像

```
double t_day = (day * 0.15) ? day * 0.15 : 1; 
```

但没有额外的计算？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-16T13:21:07.640

```
double t_day = std::max(day * 0.15, 1.); 
```

不要忘记 之后的句点，`1`因为编译器将无法推断出正确的`double`模板参数（最终会出现奇怪的编译器错误）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-16T13:32:22.093

给定三个函数：

```
double func1(const double& day) {
  double t_day = day * 0.15;
  if (t_day < 1) { t_day = 1; }
  return t_day;
}

double func2(const double& day) {
  return std::max(day*0.15, 1.);
}

double func3(const double& day) {
  return (day * 0.15 > 1) ? day * 0.15 : 1;
} 
```

我们可以检查编译器的输出（例如`g++ -O3 -S`）：

`func1`变成：

```
_Z5func1RKd:
.LFB368:
        .cfi_startproc
        movsd   .LC1(%rip), %xmm0
        movsd   .LC0(%rip), %xmm1
        mulsd   (%rdi), %xmm0
        maxsd   %xmm0, %xmm1
        movapd  %xmm1, %xmm0
        ret 
```

`func2`变成：

```
_Z5func2RKd:
.LFB370:
        .cfi_startproc
        movsd   .LC1(%rip), %xmm0
        movsd   .LC0(%rip), %xmm1
        mulsd   (%rdi), %xmm0
        maxsd   %xmm0, %xmm1
        movapd  %xmm1, %xmm0
        ret 
```

并`func3`变成：

```
_Z5func3RKd:
.LFB369:
        .cfi_startproc
        movsd   .LC1(%rip), %xmm0
        mulsd   (%rdi), %xmm0
        maxsd   .LC0(%rip), %xmm0
        ret 
```

其中 LC0 和 LC1 是常数 1.0 和 0.15。

作为参考，Clang 的中间表示可能更容易阅读：

```
define double @_Z5func1RKd(double* nocapture %day) nounwind uwtable readonly {
  %1 = load double* %day, align 8, !tbaa !0
  %2 = fmul double %1, 1.500000e-01
  %3 = fcmp olt double %2, 1.000000e+00
  %t_day.0 = select i1 %3, double 1.000000e+00, double %2
  ret double %t_day.0
}

define double @_Z5func2RKd(double* nocapture %day) nounwind uwtable readonly {
  %1 = load double* %day, align 8, !tbaa !0
  %2 = fmul double %1, 1.500000e-01
  %3 = fcmp olt double %2, 1.000000e+00
  %4 = select i1 %3, double 1.000000e+00, double %2
  ret double %4
}

define double @_Z5func3RKd(double* nocapture %day) nounwind uwtable readonly {
  %1 = load double* %day, align 8, !tbaa !0
  %2 = fmul double %1, 1.500000e-01
  %3 = fcmp ogt double %2, 1.000000e+00
  %4 = select i1 %3, double %2, double 1.000000e+00
  ret double %4
} 
```

## 结论：

他们都变成了一个`mulsd`，`maxsd`无论你怎么写。花时间以最自然，最容易获得正确的方式编写东西，让编译器担心这样的细节。我会说是`std::max`在这种情况下，因为您正在做的是取两个值中的较大者。

# php - Wordpress - 魔术字段 - 使用 WP_Query 按自定义魔术字段排序

> ID：10619420
> 
> 赞同：0
> 
> 时间：2012-05-16T13:19:22.370
> 
> 标签：php, mysql, wordpress

我正在使用魔法字段，并定义了一个名为 的自定义帖子类型`collection`，`sort`我在其中输入了一个我想对自定义帖子进行排序的数字。

我的 WP_Query 参数很简单：

```
'post_type' => 'collection',
'meta_key' => 'sort',
'order_by' => 'meta_value',
'order' => 'ASC' 
```

其中，在 $query 结果上使用 print_r 会显示以下 mysql 语句：

```
SELECT SQL_CALC_FOUND_ROWS  wp_posts.* FROM wp_posts  INNER JOIN wp_postmeta ON (wp_posts.ID = wp_postmeta.post_id) WHERE 1=1  AND wp_posts.post_type = 'collection' AND (wp_posts.post_status = 'publish' OR wp_posts.post_status = 'private') AND (wp_postmeta.meta_key = 'sort' ) GROUP BY wp_posts.ID ORDER BY wp_posts.post_date ASC LIMIT 0, 10 
```

所以我很困惑为什么生成的mysql`ORDER BY wp_posts.post_date`在我明确说明它应该排序时仍然包含`wp_postmeta.meta_key = 'sort'`它的对应关系`meta_value`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:23:01.627

```
'post_type' => 'collection',
'meta_key' => 'sort',
'orderby' => 'meta_value',
'order' => 'ASC' 
```

order_by = orderby

它也不叫魔术字段，而是自定义字段

[http://codex.wordpress.org/Class_Reference/WP_Query#Order_.26_Orderby_Parameters](http://codex.wordpress.org/Class_Reference/WP_Query#Order_.26_Orderby_Parameters)

# php - 通过数据表插件创建 csv 文件

> ID：10619421
> 
> 赞同：0
> 
> 时间：2012-05-16T13:19:22.227
> 
> 标签：php, csv, datatable

我有一个列表，通过使用数据表插件，我对它们进行了清晰的排序。在此之前，我只通过 php 编码制作了排序列表。根据当前列表，我可以导出到 csv 文件。我的代码如下：

```
header('Content-Type: text/csv; charset=utf-8');
header('Content-Disposition: attachment; filename=data.csv');

  // create a file pointer connected to the output stream
    $output = fopen('php://output', 'w');

$rows = mysql_query(base64_decode($_REQUEST['qur']));
        $number = mysql_num_rows($rows);
        if($number > 0){

            fputcsv($output, array('Name','Username','Email','Age','Location','Contact','Privilege','JoiningDate','Status'));

            // loop over the rows, outputting them
            $blankArray = array();
            while ($row = mysql_fetch_assoc($rows)) {
                $name = $row['admin_name'];
                $username = $row['username'];
                $email = $row['email'];
                $age = $row['age'];
                $location = $row['location'];
                $cont = $row['contact_no'];
                $priv = get_role_name_by_id($row['role']);
                $doj = substr($row['creation_date'],0,10);
                $status = ($row['status'] == '1')?"enable":"disable";
                $blankArray['Name'] = $name;
                $blankArray['Username'] = $username;
                $blankArray['Email'] = $email;
                $blankArray['Age'] = $age;
                $blankArray['Location'] = $location;
                $blankArray['Contact'] = $cont;
                $blankArray['Privilege'] = $priv;
                $blankArray['JoiningDate'] = $doj;
                $blankArray['Status'] = $status;

                fputcsv($output, $blankArray);

            }
        }else{
            fputcsv($output, array('No Record Found'));
        } 
```

从我使用以下代码的页面开始：

```
<a href="export.php?report=user&qur=<?php echo base64_encode($search_sql); ?>"><button>Export to CSV</button></a> 
```

现在，当我更改数据表插件中的排序选项时，我使用以下代码：

```
$('#example').dataTable( {
                                "bProcessing": true,
                                "bServerSide": true,
                                "sAjaxSource": "datatabledb.php",
                                "bJQueryUI": true,
                                "sPaginationType": "full_numbers",
                                //"sDom": 'T<"clear">lfrtip',
                                "oTableTools": {
                                    "aButtons": [
                                        {
                                            "sExtends": "copy",
                                            "sButtonText": "Copy to clipboard"
                                        },
                                        {
                                            "sExtends": "csv",
                                            "sButtonText": "Save to CSV"
                                        },
                                        {
                                            "sExtends": "xls",
                                            "sButtonText": "Save for Excel"
                                        }
                                    ]
                                }                       
                            } ); 
```

但它仍然没有显示按钮。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:38:33.313

您可以使用 TableTools 来满足您的需求。

看到这个[链接！](http://datatables.net/release-datatables/extras/TableTools/index.html)例如，请参阅此链接以获取[文档！](http://datatables.net/extras/tabletools/)

# emacs - emacs Semantic/senator : 外部库的自动完成

> ID：10619422
> 
> 赞同：2
> 
> 时间：2012-05-16T13:19:38.870
> 
> 标签：emacs, cedet

看来这个论坛比邮件列表更活跃：http: [//sourceforge.net/mailarchive/forum.php](http://sourceforge.net/mailarchive/forum.php?forum_name=cedet-semantic) ?forum_name=cedet-semantic 。我想从那里重新发布一周前的任务：

首先向所有为 CEDET 做出贡献的人致敬：D。

没有太多的麻烦，我可以处理 CEDET 的大部分期货，但是当涉及到参议员/语义时，事情变得更加艰难：\。

解析本地文件很好。我不使用 EDE 不是为了让事情变得更复杂。为了与 ECB 兼容，我使用 1.0.6 git trunk 版本。

1.  首先是关于 emacs core / cedet git-trunk hussle 的讨论。如何检查当前安装是否正在运行后者？（我做了一些 .emacs 修改，见下文）。

2.  我通常无法为外部库获得正确的自动完成功能 - 在这种情况下是 OGRE3D 项目，它们都在 /usr/include/OGRE. 我想我已经正确地添加到“搜索路径”中，语义描述-c-env。看到它们正确添加。

2.a 语义解析器的基本命令是什么？，也就是说我需要强制它解析所需的包含。

一旦我在“空闲时间”看到语义解析 OGRE 文件。自动完成功能仍然不起作用（ OGRE:RAY 未被识别为一种类型）。senator-completion-menu-pop 给出了一些不匹配的 'c**p'

2.b 我知道有语义的自定义组选项，他们的描述对我来说很难说。

从另一个帖子：

“是的，有一个设置成本。你可以使用 semanticdb.sh 来预解析你的代码，但是如果你从不打开*每个*文件，你最终可能会得到 Emacs 拥有如此庞大的数据结构，它会变得更大，以至于你的机器可以处理. 如果你的项目很小，这应该不是问题。

好吧，这可能是，如果那会解析 OGRE。

这是我的 .emacs：

[pastebin.com 上的 .emacs](http://pastebin.com/HR6i8ZKr)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:37:01.790

这是我在邮件列表中收到的内容，希望对某人有所帮助，感谢 Eric Ludlam :D:

=======================

```
1\. First is the rumble about the emacs core / cedet git-trunk hussle. How do I check that current installation is running the latter ? ( I have done some .emacs modificaitons see below) . 
```

emacs 启动后，使用：

Mx cedet 版本 RET

并从 CEDET/bzr 寻找 1.1 版本。

我刚刚尝试过，发现并非所有内容都有正确的版本号。有趣的。我得调查一下。

无论如何，接下来要尝试的是：

Mx 定位库 RET cedet RET

并确保它指向您认为应该指向的位置。

```
2\. I generally cannot get the proper autocomplete working for external libs - in this case the OGRE3D project, which all are in the /usr/include/OGRE. I suppose I have added to 'search path' include properly, semantic-describe-c-env. sees them added properly. 
```

如果启用 global-semantic-decoration-mode 你可以右键单击头文件，它会给你一些选项，例如显示头文件在哪里，以及显示它是否已经被解析。

```
2.a What are the basic commands to the semantic parser ? , that is I need to force it to parse the desired includes. 
```

您可以使用包含菜单强制解析标题，或访问所说的包含。如果找不到，您也可以从那里将 OGRE 添加到您的路径中。

如果您查看标题，您可以使用 senator 菜单强制重新解析文件，或使用：

Cu Mx 牛酸盐 RET

去做吧。

```
Once I saw semantic parsing the OGRE files in the 'idle time'. Still the autocomplete does not work ( OGRE:RAY is not recongized as a type). senator-completition-menu-pop gives some non-matching 'c**p' 
```

自动完成可能因多种原因而失败。找出原因的最佳方法是：

Mx 语义分析调试辅助 RET

在你想要完成的地方。它将告诉您有关头文件、符号等的信息。可能是您的预处理器符号需要一些设置。

对于大型复杂的库头文件，有时只需在语义中设置正确的预处理器符号，以便解析头文件的正确位以查找符号。您必须访问要完成的​​符号所在的标头，并查看它是否已被解析。使用：

Mx boviante RET

将转储符号表。

```
2.b I know there are customize-group options for semantic, tough their description say little to me.

    From the other post: 

"Yes, there is a setup cost. You can use semanticdb.sh to pre-parse your code, but if you never open *every* file, you might end up with Emacs having such a huge data structure it gets larger that your machine can handle. If your project is small, this shouldn't be a problem." Well this might be, if that would parse OGRE. 
```

我怀疑解析包含是这里的问题。我认为我们必须处理的食人魔标题中只是有一些新的东西。

埃里克

====================================

# javascript - jQuery .height() 不能按预期工作

> ID：10619423
> 
> 赞同：4
> 
> 时间：2012-05-16T13:19:44.410
> 
> 标签：javascript, jquery, html, css

我有一个页面，我希望彼此相邻的 div 具有相同的高度。

我有以下功能：

```
function setProjectsHeight() {
    var count = 0;
    $(".project").each(function() {
        if(count % 3 === 0) { 
            var highest = 0;
            for(i=count;i<=count+2;i++) {
                if($("div.project#"+i).height() > highest) { 
                    highest = $("div.project#"+i).height(); 
                }
            }
            console.log(highest);
        }
        count++;
    });
} 
```

不知何故，高度总是为零。选择器似乎是正确的（经过测试），当 console.log() 具有相同选择器的宽度时，它返回 200（正确）。

**编辑：刚刚解决了！** 不知何故，我想到在 css 中设置“body {display:none}”，并在 document.ready() 的末尾将此属性设置回“block”。我这样做是因为我使用 jQuery UI 按钮并且用户看到这些按钮从普通链接切换到 UI 布局。

当我删除此功能时，一切都恢复了。似乎在调用 setProjectsHeight() 时，body 仍然是 display:block。因此，没有计算出的高度。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:23:42.800

尝试从 window.load() 事件而不是 document.ready() 调用该函数。

这个问题的原因是 jQuery 在所有 img/object/... 元素完成加载之前不会启动 width() 和 height() 设置 - 一旦页面被处理，ready() 就会触发，但此时某些对象可能仍在下载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T13:22:00.507

确保您有一个清除浮动的元素/应用 clearfix（如果有任何浮动）。如果你不这样做，至少父容器不会扩展到它应该有的高度。

也尝试使用`.outerHeight()`，因为这包括边框大小和填充。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T13:26:26.123

您的选择器可能是错误的。您应该单独使用 id 选择器，因为 id 在文档中是唯一的并且查找速度最快：

```
$('#'+i) 
```

也正如人们所提到的，以数字开头的 id 无效（但适用于大多数浏览器）

也有可能您的 DOM 中可能有重复的 id，在这种情况下，任何事情都不会像您期望的那样工作。**dom id 必须是唯一的**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T13:42:30.170

您确定每个`.project`元素都具有适当的 ID 属性吗，因为`$("div.project#"+i)`选择器需要一个 0、1、2 等的 ID？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T13:23:09.757

如果标签 ID 是`1, 2, 3`那么请在项目后给空间

```
$("div.project #"+i) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-19T00:38:39.517

刚刚解决了！不知何故，我想到在 css 中设置“body {display:none}”，并在 document.ready() 的末尾将此属性设置回“block”。我这样做是因为我使用 jQuery UI 按钮并且用户看到这些按钮从普通链接切换到 UI 布局。

当我删除此功能时，一切都恢复了。似乎在调用 setProjectsHeight() 时，body 仍然是 display:block。因此，没有计算出的高度。

谢谢你的帮助！

# android - Spannabletext背景图片android

> ID：10619427
> 
> 赞同：0
> 
> 时间：2012-05-16T13:20:01.100
> 
> 标签：android, background, textview

对于 spannabletext 中的字母，我可以使用 BackgroundColorSpan 类设置背景颜色。如何将背景图像设置为 spannabletext 中的字母？

# java - 即使 Struts2 f/w 用于 Web 应用程序，也会在服务器日志中获取 FreeeMarker 异常

> ID：10619434
> 
> 赞同：2
> 
> 时间：2012-05-16T13:20:23.313
> 
> 标签：java, struts2, freemarker, socketexception

我面临一个神秘的问题，它对我的​​ Web 应用程序的可用性造成了严重破坏。一些背景 -

*   服务器 - Apache+Tomcat7
*   Web 框架 - 带有 JSP 的 Struts2

在检查服务器注销较晚时，我收到了很多以下异常-

```
26092219 [http-bio-8080-exec-695] ERROR org.apache.struts2.components.template.FreemarkerTemplateEngine  - Could not load the FreeMarker template named 'hidden':
26092219 [http-bio-8080-exec-695] ERROR org.apache.struts2.components.template.FreemarkerTemplateEngine  - Attempted: /template/simple/hidden.ftl
26092219 [http-bio-8080-exec-695] ERROR org.apache.struts2.components.template.FreemarkerTemplateEngine  - The TemplateLoader provided by the FreeMarker Configuration was a: freemarker.cache.MultiTemplateLoader

Error reading included file template/simple/dynamic-attributes.ftl
The problematic instruction:

----------
==> include "/${parameters.templateDir}/simple/dynamic-attributes.ftl" [on line 44, column 1 in template/simple/a-close.ftl]
----------

Java backtrace for programmers:
----------
freemarker.template.TemplateException: Error reading included file template/simple/dynamic-attributes.ftl
freemarker.template.TemplateException: Error reading included file template/simple/dynamic-attributes.ftl
    at freemarker.core.Include.accept(Include.java:167)
    at freemarker.core.Environment.visit(Environment.java:209)
    at freemarker.core.MixedContent.accept(MixedContent.java:92)
    at freemarker.core.Environment.visit(Environment.java:209)
    at freemarker.core.Environment.process(Environment.java:189)
    at freemarker.template.Template.process(Template.java:237)
    at org.apache.struts2.components.template.FreemarkerTemplateEngine.renderTemplate(FreemarkerTemplateEngine.java:157)
    at org.apache.struts2.components.UIBean.mergeTemplate(UIBean.java:559)
    at org.apache.struts2.components.Anchor.end(Anchor.java:145)
    at org.apache.struts2.views.jsp.ComponentTagSupport.doEndTag(ComponentTagSupport.java:42)
    at org.apache.jsp.jsp_005froot.ajax.synset.trackedCustomEntities_jsp._jspx_meth_gs_005fa_005f0(trackedCustomEntities_jsp.java:648)
    at org.apache.jsp.jsp_005froot.ajax.synset.trackedCustomEntities_jsp._jspx_meth_gs_005fif_005f2(trackedCustomEntities_jsp.java:573)
    at org.apache.jsp.jsp_005froot.ajax.synset.trackedCustomEntities_jsp._jspx_meth_gs_005fiterator_005f0(trackedCustomEntities_jsp.java:380)
    at org.apache.jsp.jsp_005froot.ajax.synset.trackedCustomEntities_jsp._jspService(trackedCustomEntities_jsp.java:128)
... 
```

这种情况继续发生，然后导致 -`too many open files`像这样的异常，

```
java.io.FileNotFoundException: /opt/tomcat7/work/Catalina/localhost/_/loader/template/simple/form.ftl (Too many open files)
javax.mail.MessagingException: Could not connect to SMTP host: localhost, port: 25;
  nested exception is:
java.net.SocketException: Too many open files
    ... 
```

我很困惑，主要是因为我在代码库中没有一个 freemarker 文件。我的猜测是，这是从我导入的某个库内部发生的，问题是我有大量的库，所以要逐个浏览它们并弄清楚哪个库的行为是不可行的。

温度。我的技巧是重新启动服务器并将“ulimit -n”大小加倍。但这只是一个创可贴。我想通过删除有问题的库或包含丢失的库来解决这个问题并解决它！？！？。

任何帮助表示赞赏。

**更新** 我在几个小时内收集的堆栈跟踪转储 - [https://gist.github.com/4e22ffd19f0445521083](https://gist.github.com/4e22ffd19f0445521083)希望这能提供一些指示。

# java - java - 从内存中创建进程

> ID：10619436
> 
> 赞同：0
> 
> 时间：2012-05-16T13:20:30.870
> 
> 标签：java, windows, process, zip

假设无盘情况，我如何（在 Java 中）从内存中解压缩的 exe（和相应的支持文件）创建一个进程？

[我已经看到在这里](https://stackoverflow.com/questions/7299106/how-can-i-read-files-from-zip-file-to-memory-with-java)和[这里](https://stackoverflow.com/questions/2063099/unzipping-a-file-from-inputstream-and-returning-another-inputstream-in-java)解压缩到内存，但找不到从 byte[] 或 InputStream 创建进程的方法，即没有（文件系统）命令字符串。

**这个想法**是将第 3 方组件捆绑在 Java 应用程序/项目中，而不允许其独立使用，从而将其捆绑在受密码保护的 Zip 中。在我的程序执行期间，它将被解压缩到内存（exe + 支持文件）并为后面的 OutputStream 写入做好准备，如下所示：

```
Process process = ?
OutputStream output = process.getOutputStream();
...
output.write("my commmand to 3rd party component"); 
```

有什么提示吗？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:24:12.893

我可以看到几种可能的方法：

1.  解压到内存文件系统中。
2.  编写一个自定义[类加载器](http://en.wikipedia.org/wiki/Java_Classloader)，它将直接从 ZIP 文件加载类。

在这两者中，第一个可能需要较少的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:16:47.890

Windows 要求进程的映像驻留在操作系统可见的文件系统上。这意味着您需要一个“磁盘”（准确地说，是内核模式驱动程序公开的系统范围的可见文件系统），EXE 被解压到该“磁盘”上。

我们提供了几种产品，可用于创建适合从中启动 EXE 的虚拟文件系统，但在所有这些产品中都需要安装内核模式驱动程序。这就是 Windows 的工作方式。

So running the native EXE (in PE format) from just a stream unfortunately won't work. .NET assemblies can be loaded in/from memory, and Java classes can also be loaded from anywhere using Java runtime capabilities, but this is not so for native processes.

# ios - 键盘出现时防止用户界面移动

> ID：10619438
> 
> 赞同：8
> 
> 时间：2012-05-16T13:20:36.153
> 
> 标签：ios, sencha-touch, mobile-safari

我正在开发一个使用 Sencha Touch 2 作为用户界面的小应用程序。现在我在我的 iPad 和 iPhone 上的 Safari 中运行它。

我的问题是，每当我点击一个文本字段时，Safari 就会打开虚拟键盘并将整个网页视图向上推，离开屏幕。

这看起来不太自然，因为顶部工具栏不再可见。

这是两个演示问题的屏幕截图。在第二个屏幕截图中，您可以看到键盘可见时的效果。

有没有办法阻止这种行为，并让 Safari*调整*用户界面的大小？

> ![普通视图](../Images/c7501be05bbea28f8dba8cffcc55806c.png)

* * *

> ![启用键盘](../Images/a922a6b61985662cd0c10e82f2e1e374.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T06:39:49.567

不幸的是，Apple 想要这种行为，但[有人](http://www.sencha.com/forum/showthread.php?170450-Toolbar-gets-pushed-off-screen-when-virtual-opens)建议使用 window.scrollTo() 进行一些小技巧：

```
listeners: {
    focus: function() {
        window.scrollTo(0,0);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-02T06:28:53.027

将此代码放在 app.js 的启动函数中对我有用：

```
 if (Ext.os.is.Android) {
        Ext.Viewport.on('painted', function () {
            Ext.Viewport.setHeight(window.innerHeight);
        });
    }

    if (Ext.os.is.iOS) {

        Ext.Viewport.on('painted', function () {
            Ext.Viewport.setHeight(window.innerHeight);
        });
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-05T10:13:19.583

我找到了适合我的解决方案。您将顶栏移动到容器中。

```
xtype: 'container',
                docked: 'top',
                height: '100%',
                html: '',
                itemId: 'MyContainer',
                width: '100%',
                items: [
                    {
                        xtype: 'titlebar',
                        docked: 'top',
                        itemId: 'topBar',
                        title: 'Obec Webchat',
                        layout: {
                            type: 'hbox',
                            align: 'start'
                        },
                        items: [
                            {
                                xtype: 'button',
                                action: 'back',
                                id: 'BackButton',
                                itemId: 'BackButton',
                                margin: '5 70% 5 15',
                                ui: 'back',
                                text: 'Home'
                            }
                        ]
                    },
                    {
                        xtype: 'container',
                        docked: 'bottom',
                        height: '95%',
                        html: '<iframe src="http://webim.obec.local/" width="100%" height="100%" scrolling="yes"></iframe>',
                        itemId: 'MyContainer1',
                        width: '100%'
                    }
                ]
            } 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-16T14:44:19.307

您将需要调用该`blur()`方法`textfield`

```
// Assuming the id of textfield - "textFieldId"
Ext.getCmp('textFieldId').blur(); 
```

> 尝试`forcefully`模糊字段的输入焦点。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-16T21:34:46.413

如果你这个使用 html 进入 Sencha 元素必须删除一些标记 html。或者您可以将标签
放在源 html 代码中。我希望能帮助你。:)

# ruby-on-rails - 如何使用过滤器表单按某个值过滤项目？

> ID：10619442
> 
> 赞同：0
> 
> 时间：2012-05-16T13:20:50.037
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有物品，有价格、颜色、制造商、型号等。我希望用户同时按价格范围、制造商、型号过滤商品。例如：显示制造商为“Ford”、型号为“Mustang”以及价格从 1k 到 10k 的所有汽车。

对于分页结果，我想使用 will_paginate （并使用 ajax 提交表单）。我正在寻找一些“第一块砖”或“第一步”来解决我的问题。如果我错过了一些好的*新*教程，请随时提供链接:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:40:37.900

在控制器中使用 where 查询执行类似的操作：

```
@records = Stuff.select("stuffs.*")

@records = @records.where("model = ?", model) if filter_car
@records = @records.where("price >= ? and price <= ?", price) if filter_price
@records = @records.paginate(:page => params[:page], :per_page => params[:per_page]) 
```

# visual-c++ - 如何在pictureBox VC++中显示二值图像

> ID：10619444
> 
> 赞同：-1
> 
> 时间：2012-05-16T13:21:03.310
> 
> 标签：visual-c++, image-processing, opencv, bitmap

我正在开发 VC++ 和 OpenCV 应用程序，我正在将图像加载到 picturBox 并对其进行一些 OpenCV 操作，我将加载的图像分配给 IplImage 以对其进行处理，然后将处理后的图像再次分配到图片框中，我编写此代码以将从 openFileDialog 选择的图像加载到 IplImage 中，对图像进行二值化，然后将二值化图像重新分配回 pictureBox 代码：

```
const char* fileName = (const char*)(void*)
   Marshal::StringToHGlobalAnsi(openFileDialog1->FileName);
             IplImage *img=cvLoadImage(fileName,CV_LOAD_IMAGE_COLOR);
             int width=img->width;
             int height=img->height;
             IplImage *grayScaledImage=cvCreateImage(cvSize(width,height),IPL_DEPTH_8U,1);
             cvCvtColor(img,grayScaledImage,CV_RGB2GRAY);
cvThreshold(grayScaledImage,grayScaledImage,128,256,CV_THRESH_BINARY);
this->pictureBox1->Image=(gcnew 
System::Drawing::Bitmap(grayScaledImage->width,grayScaledImage->height,grayScaledImage->widthStep, 
System::Drawing::Imaging::PixelFormat::Format24bppRgb,(System::IntPtr)grayScaledImage->imageData)); 
```

但我没有找到显示二进制图像的格式，对此有任何帮助。

原图： ![在此处输入图像描述](../Images/12e9f88cba40f5f6b3c2935de5a853c9.png)

转换后的图像： ![在此处输入图像描述](../Images/af225c0f12ae16de765417a3b5b13c67.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:17:00.757

您似乎正在创建一个 RGB 图像 (System::Drawing::Imaging::PixelFormat::Format24bppRgb) 但将灰度复制到其中，大概是 System::Drawing::Imaging 函数不进行转换 - 或者不是正确地做。

编辑：更多解释。
您的灰度图像存储在内存中，每个像素 Y0、Y1、Y2、Y3 ...... Y639 为一个字节（我们使用 Y 表示亮度，并假设图像为 640 像素宽）。

您已经告诉 .net 图像类这是 Format24bppRgb，它将存储为每个像素一个红色、一个绿色和蓝色字节（3 字节 = 24bpp）。因此，该类获取您的图像数据并假设 Y0、Y1、Y2 是第一个像素的红色、绿色、蓝色值，Y3、Y4、Y5 是下一个像素的值，依此类推。
这使用了图像所具有的 3 倍字节，因此在行的 1/3 之后它开始读取下一行，依此类推 - 这为您提供了三张重复的图片。

附言。您已将其转换为二进制图像这一事实仅意味着 Y 值为 0 或 255 - 它不会改变数据大小或形状。

# javascript - 使用 jQuery 创建新元素的首选方式

> ID：10619445
> 
> 赞同：250
> 
> 时间：2012-05-16T13:21:04.607
> 
> 标签：javascript, jquery, append, createelement, jquery-append

我有两种方法可以创建`<div>`using `jQuery`.

任何一个：

```
var div = $("<div></div>");
$("#box").append(div); 
```

或者：

```
$("#box").append("<div></div>"); 
```

除了可重用性之外，使用第二种方式的缺点是什么？

* * *

## 回答 #1

> 赞同：371
> 
> 时间：2012-05-16T13:22:11.777

第一个选项为您提供更多灵活性：

```
var $div = $("<div>", {id: "foo", "class": "a"});
$div.click(function(){ /* ... */ });
$("#box").append($div); 
```

当然`.html('*')`会覆盖内容`.append('*')`，但不会，但我想，这不是你的问题。

另一个好的做法是在您的 jQuery 变量前面加上`$`：
[在 jQuery 中使用 $ 和变量是否有任何特定原因](https://stackoverflow.com/q/10204606/601179)

在属性名称周围加上引号`"class"`将使其与不太灵活的浏览器更兼容。

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2012-05-16T13:43:35.250

我个人认为代码的可读性和可编辑性比性​​能更重要。无论您发现哪一个更容易查看，它都应该是您根据上述因素选择的那个。你可以把它写成：

```
$('#box').append(
  $('<div/>')
    .attr("id", "newDiv1")
    .addClass("newDiv purple bloated")
    .append("<span/>")
      .text("hello world")
); 
```

你的第一个方法是：

```
// create an element with an object literal, defining properties
var $e = $("<div>", {id: "newDiv1", name: 'test', class: "aClass"});
$e.click(function(){ /* ... */ });
// add the element to the body
$("#box").append($e); 
```

**但就可读性而言；[jQuery 方法是我最喜欢的](http://api.jquery.com/jQuery/#jQuery2)。遵循这个[有用的 jQuery 技巧、注释和最佳实践](http://net.tutsplus.com/tutorials/javascript-ajax/14-helpful-jquery-tricks-notes-and-best-practices/)**

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2013-07-08T07:54:21.383

更有表现力的方式，

```
jQuery('<div/>', {
    "id": 'foo',
    "name": 'mainDiv',
    "class": 'wrapper',
    "click": function() {
      jQuery(this).toggleClass("test");
    }}).appendTo('selector'); 
```

参考：[文档](http://api.jquery.com/jQuery/#jQuery2)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-04-09T17:36:07.353

根据[jQuery官方文档](http://api.jquery.com/jquery/#jQuery-html-ownerDocument)

创建一个 HTML 元素，`$("<div/>")`或者`$("<div></div>")`是首选。

然后你可以使用`appendTo`, `append`, `before`,`after`等等。将新元素插入 DOM。

PS：jQuery 版本 1.11.x

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-02-24T12:46:50.670

根据[3.4](https://api.jquery.com/jQuery/#jQuery2)的文档，最好将属性与`attr()`方法一起使用。

```
$('<div></div>').attr(
  {
    id: 'some dynanmic|static id',
    "class": 'some dynanmic|static class'
  }
).click(function() {
  $( "span", this ).addClass( "bar" ); // example from the docs
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-16T13:23:24.883

我会推荐第一个选项，您实际上使用 jQuery 构建元素。第二种方法只是简单地将元素的 innerHTML 属性设置为一个字符串，该字符串恰好是 HTML，并且更容易出错且灵活性较差。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-16T13:25:11.227

如果`#box`是空的，什么都没有，但如果不是，这些会做非常不同的事情。前者将添加 a`div`作为 的最后一个子节点`#box`。后者`#box`用一个 empty `div`、 text 和 all 完全替换了 的内容。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-29T20:06:06.013

也可以通过以下方式创建 div 元素：

```
var my_div = document.createElement('div'); 
```

添加类

```
my_div.classList.add('col-10'); 
```

也可以执行`append()`和`appendChild()`

# prism-4 - PRISM 4.0 项目给出构建错误

> ID：10619449
> 
> 赞同：0
> 
> 时间：2012-05-16T13:21:08.010
> 
> 标签：prism-4

我已经使用 PRISM 创建了一个新的 silverlight 项目，并且我已经包含了 microsoft.practices.prism.dll 但在模块类中它给出了错误：名称空间“microsoft”中不存在类型或名称空间“practices”。那怎么办？请紧急重播。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:20:35.030

我已经解决了这个问题。实际上问题出在我下载的 PRISM 4.1 v 上，因为我有 silverlight runtime 5。所以我卸载它并重新安装 PRISM 4v，现在该项目正在运行 F9。:)

# sqlite - yii 框架中的 sqlite

> ID：10619460
> 
> 赞同：1
> 
> 时间：2012-05-16T13:21:36.043
> 
> 标签：sqlite, yii

我正在关注 YII Framework 的[博客教程](http://www.yiiframework.com/doc/blog/1.1/en/start.design)来深入了解它。

本教程使用 SQLITE 作为数据库。我以前从未使用过 SQLITE。我一直在使用 MYSQL 和 SQL SERVER。对于 MYSQL，我可以使用 phpmyadmin 创建集成在 WAMP 中的数据库和表。在这里，我不知道如何在 SQLITE 中为链接中的博客教程创建数据库和表。是否有任何快速参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:13:00.333

在本教程的[下一页](http://www.yiiframework.com/doc/blog/1.1/en/prototype.database)是以下提示：

*提示：要执行 SQL 语句，我们可以使用[SQLite 官网中的](http://www.sqlite.org/download.html)**sqlite3**命令行工具。*

# php - 如何从 MySQL 表中获取图像

> ID：10619462
> 
> 赞同：-1
> 
> 时间：2012-05-16T13:21:43.143
> 
> 标签：php, mysql

我有一个给定的表结构

```
 |   ID    |             IMAGE                | 
     |   01    |           123.jpg                |    
     |   02    |  http://localhost/test/logo.jpg  |    
     |   03    |  http://localhost/test/pic.jpg   |    
     |   04    |           image.png              | 
```

我得到如下所示的图像

```
$qry="SELECT IMAGE FROM `table`";
$res=mysql_query($qry);
while($row=mysql_fetch_row($res)){
    if($row[0])
    {
       $pic="http://localhost/test/".$row[0];
    }
    else
    {
        $pic="";
    }
    echo $pic;
} 
```

但它不能正常工作 02,03 图像

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:28:00.860

以下仅在给定值尚未以“http://”或“https://”开头时添加完整 URL：

```
if($row[0])
{
    if (stripos($pic, "http://") === false && stripos($pic, "https://") === false)
        $pic="http://localhost/test/".$row[0];
    else
        $pic=$row[0];
}
else
{
    $pic="";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:28:26.833

您似乎没有在表格中存储图像的标准方式。如果这些是唯一的格式，则需要在将图像字符串放在一起之前添加某种检查。

```
while($row=mysql_fetch_row($res)){
if($row[0])
   {
   if
   $pic = (strpos($row[0], "//") === false) ? "http://localhost/test/".$row[0]: $row[0];
   }
   else
   {
   $pic="";
   }
echo $pic;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-16T13:27:23.253

我想你改变你的代码

```
 $pic="http://localhost/test/".$row[0]; 
```

至

```
 $pic="http://localhost/test/".$row[1]; 
```

因为您的图像列是 $row[1]

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-16T13:29:29.000

好吧，显然你会得到图像 02 和 03 的 URL：

```
http://localhost/test/http://localhost/test/logo.jpg
http://localhost/test/http://localhost/test/pic.jpg 
```

这显然是坏形成的。也许您想将此添加到您的代码中...

```
if($row[0])
   {
   if (strpos($row[0],'/')) {
     $pic=$row[0];
   } else {
   $pic="http://localhost/test/".$row[0];
   }
} else ... 
```

# php - 将读取操作创建为自定义操作？

> ID：10619464
> 
> 赞同：0
> 
> 时间：2012-05-16T13:21:46.277
> 
> 标签：php, facebook, facebook-opengraph

我知道有一个名为 news.reads 的内置操作，但我需要创建相同的操作，因为我需要在活动项上使用我的应用程序名称，我可以创建与自定义操作相同的读取操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T08:36:09.337

如果您创建自定义阅读操作，Facebook 将在批准该操作时拒绝它。类似于以下内容：

`Your Action failed the criteria: You are trying to submit a custom action which is not permitted. Please delete this action and submit a built-in version of this action instead.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T19:13:47.633

只需使用内置的读取操作。无论如何，它会将其归因于您的应用程序。

# ruby - 如何在 ruby 中使用字符串进行多种组合？

> ID：10619466
> 
> 赞同：1
> 
> 时间：2012-05-16T13:21:52.993
> 
> 标签：ruby, string

输入应该是一个字符串：

```
"abcd@gmail.com" 
```

输出应该是一个字符串数组：

```
["abcd@gmail.com",
 "a.bcd@gmail.com",
 "ab.cd@gmail.com",
 "abc.d@gmail.com",
 "a.b.cd@gmail.com",
 "a.bc.d@gmail.com",
 "a.b.c.d@gmail.com"] 
```

想法：“使第一个字符串部分（“abcd”）中的每个可能组合都带有一个点。不允许连续的点。第一个字符串部分（“abcd”）的开头和结尾不允许有点"

到目前为止，这是我想出的：

```
text,s = "abcd".split""
i=0

def first_dot(text)
  text.insert 1,"."
end

def set_next_dot(text)
  i = text.rindex(".")
  text.delete_at i
  text.insert(i+1,".")
end 
```

我的方法是

1.  编写一个函数，设置第一个点
2.  编写一个设置下一个点的函数
3.  ...（魔法）

我不知道如何将这些碎片拼凑在一起。任何想法？或者也许是更好的方法？提前谢谢

编辑：我想我找到了解决方案 :) 我会在大约一小时内发布它（它很棒 -> 真值表、二进制数、转置）

**...这里的解决方案**

```
s = "abc"
states = s.length
possibilites = 2**states

def set_space_or_dot(value)
  value.gsub("0","").gsub("1",".")
end

def fill_with_leading_zeros(val, states)
  if val.length < states 
   "0"*(states-val.length)+val
  else
   val
  end
end

a = Array.new(possibilites,s)
a = a.map{|x| x.split ""}

b = [*0...possibilites].map{|x| x.to_s(2).to_s}
b = b.map{|x| fill_with_leading_zeros x,states} 
b = b.map{|x| x.split ""}

c = []

for i in 0 ... a.size
  c[i] = (set_space_or_dot (a[i].zip b[i]).join).strip
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:47:55.403

稍微改变一下 pduersteler 的答案：

```
possibilities = []
string = "abcd@example.com"
(string.split('@')[0].size-1).times do |pos|
  possibility = string.dup
  possibilities << possibility.insert(pos+1, '.')
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:38:15.593

这个怎么样（可能需要更多微调以满足您的需求）：

```
s = "abcd"

(0..s.size-1).map do |i|
  start, rest = [s[0..i], s[(i+1)..-1]]
  (0..rest.size-1).map { |j| rest.dup.insert(j, '.') }.map { |s| "#{start}#{s}"}
end.flatten.compact
#=> ["a.bcd", "ab.cd", "abc.d", "ab.cd", "abc.d", "abc.d"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T13:31:52.277

一个选项是通过移动点的字符串迭代 n 次，其中 n 是字符数减 1。这就是您现在正在做的事情，但没有定义两种方法。

像这样的东西：

```
possibilities = []
string = "abcd@example.com"
(string.split('@')[0].size-1).times do |pos|
  possibilities << string.dup.insert(pos+1, '.')
end 
```

**编辑**
现在测试。感谢评论，您需要`.dup`在插入之前调用字符串。否则，点会被插入到字符串中，并且每次迭代都会留在那里，导致混乱。调用`.dup`字符串将复制字符串并在副本上工作，而原始字符串保持不变。

# javascript - WebSocket JavaScript：发送复杂对象

> ID：10619478
> 
> 赞同：2
> 
> 时间：2012-05-16T13:22:17.060
> 
> 标签：javascript, websocket

我使用 WebSockets 作为 Node.js 服务器和我的客户端 JS 代码之间的连接。

我想通过套接字发送许多不同的媒体类型（文本、音频、视频、图像）。这当然不难。message.data instanceof Blob 将文本与媒体文件分开。问题是，我想在这些媒体文件中包含几个附加属性。

铁：

*   图像的尺寸
*   图像的名称。. .

现在我可以以文本形式发送一条包含这些信息的消息，然后用另一条包含 blob 的消息跟进它。不过，我非常希望能够构建一个对象：

```
imageObject = {

xDimension : '50px',

yDimension : '50px', 

name : 'PinkFlowers.jpg'

imageData : fs.readFileSync(".resources/images/PinkFlowers.jpg")

} 
```

并通过`socket.send(imageObject)`.

到目前为止一切顺利，这确实有效，但是我如何收集对象并使其字段再次在客户端中可访问？

我已经对其进行了一段时间的篡改，如果有任何想法，我将不胜感激。

此致，

棍子

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T15:24:18.700

好吧，我确实使用base64让它工作。

在服务器端，我正在运行这段代码：

```
var imageObject = newMessageObject('img', 'flower.png');
imageObject.image = new Buffer(fs.readFileSync('./resources/images/flower.png'), 'binary').toString('base64');
imageObject.datatype = 'png';
connection.send(JSON.stringify(imageObject)); 
```

new Buffer() 是确保有效 utf 编码所必需的。如果不使用，Chrome（不知道 Firefox 和其他）会抛出错误，检测到无效的 utf8 编码并在 JSON.parse(message) 之后关闭执行。注意：newMessageObject 只是一个对象构造方法，有两个字段，我使用的类型和名称。

在客户端，它真的很简单：

```
websocketConnection.onmessage = function(evt) {
   var message = JSON.parse(evt.data);
   ... // Some app specific stuff
   var image = new Image();
   image.onload = function() {
     canvas.getContext("2d").drawImage(image, 0, 0);
   }

   image.src = "data:image/" + message.datatype + ";base64," + message.image;

} 
```

这将在画布上绘制图像。

我不相信这对于音频或视频文件是可行的，但对于图像它可以完成工作。我可能会退回到简单地发送一个模糊的 URL 而不是音频/视频数据，并直接从服务器读取文件。我不喜欢安全隐患。

# python - 使用 Scapy 逐步剖析有效载荷的每个部分

> ID：10619481
> 
> 赞同：1
> 
> 时间：2012-05-16T13:22:23.687
> 
> 标签：python, scapy

我想知道如何使用 Scapy 根据不同的字段类型/长度来剖析有效负载。

例如，我有这个 =>

```
|###[ Raw ]###
        |   |  load='\x00!\x92(\x00!\x92(\x00\x00\x01\x0c\x00\x00\x00\x01\x00\x01\x00\x00\xc0\xa8\x03\x01\xc0\xa8\x03\x02\x01\xc0\x00\x00\x03\x03\x00\x00\x00\x00\x00\x00\x18\x18\x10\x00\x00\x00\x00\x00' 
```

我想逐步划分每个部分：第一部分为 2 个字节/第二部分为 4 个字节等...

实际上，我使用 Scapy 添加了一个新协议，但最后一部分管理起来非常复杂，所以这就是为什么我选择/尝试以这种方式剖析有效负载的最后一部分（上图）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:26:24.457

在 Scapy 中剖析复杂协议的最佳方法是了解所有可用字段（鉴于其糟糕的文档，这可能很困难）。

Scapy 支持的字段列表：http: [//trac.secdev.org/scapy/wiki/Fields](http://trac.secdev.org/scapy/wiki/Fields)

特别看一下ConditionalField：

```
ConditionalField(XShortField("chksum",None),lambda pkt:pkt.chksumpresent==1) 
```

此外，了解在 Scapy 解剖期间如何使用guess_payload_class() 来选择不同的层。如果您想在小部分（2 字节/4 字节等）中剖析它，请考虑为每个部分创建一个层并使用guess_payload_class()。[http://trac.secdev.org/scapy/wiki/BuildAndDissect](http://trac.secdev.org/scapy/wiki/BuildAndDissect)

如果您对如何剖析某些领域有更具体的问题，我可以尝试回答，但目前这是我可以为您的一般性问题提供的最佳建议。希望能帮助到你。

# php - 使用php删除包含3个字符的单词

> ID：10619482
> 
> 赞同：-1
> 
> 时间：2012-05-16T13:22:25.843
> 
> 标签：php, words

请有人帮助我。

我想使用 php 代码删除包含 3 个或更少字符的单词，请帮助以下句子：

`$string = "this is my new minimalist style"`

结果一定是“这种新的极简风格”

那么我应该使用什么代码来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:26:15.400

你可以做：

```
$string = "this is my new minimalist style"
$string = preg_replace(array('/\b\w{1,2}\b/','/\s+/'),array('',' '),$string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:36:52.177

那应该这样做：

```
$text = "this is my new minimalist style";
$text = preg_replace("/\b(\w{1,2}\s|\s\w{1,2})\b/","", $text); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T13:39:01.893

PHP >= 5.3 的另一个解决方案（也适用于旧版本，您只需要避免使用匿名函数）：

```
$string = "this is my new minimalist style";

print implode(" ", array_filter(explode(" ", $string), function($item) { return strlen($item) >= 3; })); 
```

# java - 如何使用具有不可变结果和扩展接口的 fluent-interface 实现构建器模式？

> ID：10619483
> 
> 赞同：2
> 
> 时间：2012-05-16T13:22:32.907
> 
> 标签：java, design-patterns, generics, builder, fluent-interface

我想实现一个具有流畅界面的构建器。

# 要求

为了使事情变得更加困难，还有两个额外的要求：

1.  我希望返回的对象是不可变的，以便它可以按如下方式使用，并且接口应该在派生接口中可扩展：

    ```
    ConcreteBuilder b1 = builder().setValue(1);
    ConcreteBuilder b2 = b1.setValue(2);

    ComplexObject o1 = b1.build();
    o1.getValue(); // should return 1

    ComplexObject o2 = b2.build();
    o2.getValue(); // should return 2 
    ```

    首先是一个有待讨论的问题：构建器是否应该是不可变的，以便它具有上述语义？[（ Jonathan](https://stackoverflow.com/users/157852/jonathan)在[How to create an immutable builder of an immutable class that contains a set? 中](https://stackoverflow.com/q/5396534/814206)简要评论了这一点？ ）

2.  构建器接口应该是可扩展的：

    ```
    interface Builder<T extends Builder<T>> {
         T setValue(int v);
    }

    interfacte BuilderEx<T extends BuilderEx<T>> {
         T someOtherOpp();
    } 
    ```

    ^([（它使用 Eamonn McManus 1](http://weblogs.java.net/node/642849 "Eamonn McManus - 使用带有子类的构建器模式"))描述的自引用泛型）

# 执行

为了满足第一个要求，AbstractBuilder 的实现类似于[如何创建包含集合的不可变类的不可变构建器？](https://stackoverflow.com/q/5396534/814206)：

```
class AbstractBuilder<T extends Builder<T>> implements Builder<T> {
    T setValue(final int v) {
        return castToConcrete(new AbstractBuilder<T>() {
            // with build() overridden to use v
        }
    }
} 
```

`castToConcrete`应该类似于`self()`^([1](http://weblogs.java.net/node/642849 "Eamonn McManus - 使用带有子类的构建器模式"))和`getThis()`^([2](http://www.angelikalanger.com/GenericsFAQ/FAQSections/ProgrammingIdioms.html#FAQ206 "Angelika Langer - Java 泛型常见问题解答：“getThis”技巧是什么？"))：将 a 转换`Builder<T>`为`ConcreteBuilder`或`ConcreteBuilderEx`取决于`T`. 问题是如何实现`castToConcrete`

由于构建器方法创建新实例，因此覆盖方法`getThis`不起作用`ConcreteBuilder`。使用提供给 的构造函数并存储在字段中的“函子” ^([3](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Function.html "Functor 的一个示例实现：Guava - 函数"))可以转换为。添加以下字段（它使用 Guava 库^([3](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Function.html "Functor 的一个示例实现：Guava - 函数"))到：`AbstractBuilder``Builder<T>``T``AbstractBuilder`

```
Function<Builder<T>, T> castToConcrete; 
```

# 问题

我目前的实施`castToConcrete`变得非常丑陋：

1.  这是一`if-else`棵树`instanceof`
2.  当`input instanceof Builder`而不是`input instanceof BuilderEx`需要在 中定义所有方法的包装类时，将这些方法`BuilderEx`转发`Builder`到`input`并为其他方法执行默认或 nil 操作。
3.  ~~当`input instanceof BuilderEx`它将输入转换为`ConcreteBuilderEx`即使`input`可能不是实际实例，`ConcreteBuilderEx`而是匿名子类的实例`AbstractBuilderEx`（希望这可行。）~~ [由 OP 编辑​​]不起作用：我们需要每个接口的包装器[/编辑]

有什么更好/更清洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:44:01.843

干净的方法是不使用，`AbstractBuilder`而是为您需要构建的每种类型创建一个特定的构建器。通过使构建器方法可读并针对您尝试构建的对象进行定制，您可以获得流畅的界面。如果您需要创建大量构建器，您可以使用代码生成，但这些方法不会设计得那么好。

# java - 后台方法总是作为私有类？

> ID：10619496
> 
> 赞同：0
> 
> 时间：2012-05-16T13:23:16.537
> 
> 标签：java, android

我从 Android 开始，想知道数据库读取和保存等后台任务是否总是封装在私有类中？

我的意思是，目前我有：

```
private class SaveToDB extends AsyncTask..
private class ReadFromDB extends AsyncTask..

public void onButtonClick(View v) {
 new SaveToDB().execute();
} 
```

等等。这样，如果我想执行后台任务，我总是必须创建一个新对象。这是正确的方法吗？

我想知道的是，我所有的私有类本身都是“动作”，而不是真正的对象。因为它们被命名，例如 save 或 read，通常按照约定命名方法适用于方法，而不适用于类。

此外，如果我做得对：将私有类放在 MyApplication Activity 中是一种好习惯吗？还是我应该将它们重构为自己的单独类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:30:23.977

您可以编写一个服务来处理所有后台内容管理。因此，当您想要保存时，您只需向服务发送消息并告诉它写入数据。这要复杂得多。对于简单的事情，您可以完全按照您当前的方式进行操作。

编辑：

另外，正如 Ian 所指出的，看看 3.0 之后的新数据库接口类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:26:35.890

不总是。

例如，如果您有一个任务将被不同的活动使用（我不是在谈论共享同一个实例），您将需要一个公共类，这样您就不会多次编写它。

如果您只在一个地方使用该（类）任务，私有类可能有助于保持您的代码更清洁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T13:29:22.447

1.  这是使用 AsyncTask 的正确方法，您可以执行一次。
2.  类名可以`DbSaver`代替`SaveToDb`例如更具可读性的类名。
3.  如果该类仅用于一个活动，您可以嵌套它们，为什么不呢。但是，如果您有在不同活动中执行的任务，那么创建自己的文件是个好主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T13:29:27.467

将数据库访问与 UI 代码松散耦合是一个很好的设计。避免每次都必须创建新对象的一种方法是使数据库访问类成为单例，并在需要进行事务时仅返回该类的实例。

对于您的最后一个问题，最好将数据库管理移至其自己的类，以便可以跨多个活动访问它。如果您在私有类中完成所有操作，那么当您有一个需要访问数据库的新活动时会发生什么？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T13:34:11.193

如果您正在触发异步任务以与 sqlite 数据库进行交互，那么这不是当今做事的最佳方式，您应该检查游标加载器。

[http://developer.android.com/guide/topics/fundamentals/loaders.html](http://developer.android.com/guide/topics/fundamentals/loaders.html)

[http://developer.android.com/reference/android/content/CursorLoader.html](http://developer.android.com/reference/android/content/CursorLoader.html)

一旦你对它们有所了解，它们比启动异步任务要容易得多，事实上它们建立在异步任务之上，以解决你描述的一些问题，并且可以容忍配置更改。

我强烈建议不要使用 AsyncTask（用于数据库访问）并改用 Loader API。

它在兼容性包中向后移植，因此您可以在 Honeycomb 之前的旧版本中使用它们。

# node.js - Jade with Express - 如何禁用 ReferenceError

> ID：10619502
> 
> 赞同：0
> 
> 时间：2012-05-16T13:23:27.773
> 
> 标签：node.js, pug, express

我想替换空字符串而不是 ReferenceError。以下代码：

```
p #{data.data.data} 
```

ReferenceError 发生在我想禁用它的渲染模板时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T14:32:57.280

偶然发现了同样的东西，但是传递一个空的物体感觉不对。我建议使用以下内容处理模板中的可能性：

```
- if(data)
  p #{data.data.data}
- else
  p No data for you! 
```

或指定一个占位符内联

```
p #{data.data.data ? data.data.data : 'No data'} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T11:06:43.563

如果渲染时没有值，则传递一个空对象：

`res.render('view/index', {data: your_data_variable || {} });`

# android - 地图活动 Android

> ID：10619510
> 
> 赞同：0
> 
> 时间：2012-05-16T13:23:53.377
> 
> 标签：android, google-maps-api-3, mapactivity

我在模拟器和设备上显示地图时遇到问题。

当我运行代码时，它似乎没问题，我得到的只是简单的网格显示，在 logCat 上我有错误`Couldn’t get connection factory client`

它与密钥库 API 有关吗？我可以对我实施的其他地图活动使用相同的 API 密钥吗？还是必须是独一无二的？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:32:16.260

它是从 Map 开始的最佳教程

[http://mobiforge.com/developing/story/using-google-maps-android](http://mobiforge.com/developing/story/using-google-maps-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:26:46.793

您可以使用相同的密钥，但使用签名密钥进行密钥验证，因此设备和模拟器会有所不同，就好像签名密钥不同一样。

看看

[无法获得连接工厂客户端 - 与谷歌地图打架](https://stackoverflow.com/questions/7982320/couldnt-get-connection-factory-client-fighting-with-google-maps)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T05:49:02.050

是的，问题在于您的 API_KEY。
您必须根据您的包名称生成密钥。请参阅此链接： [https ://developers.google.com/maps/documentation/android/start#getting_the_google_maps_android_api_v2](https://developers.google.com/maps/documentation/android/start#getting_the_google_maps_android_api_v2)

# git - git svn clone 在创建空分支时遇到错误

> ID：10619512
> 
> 赞同：1
> 
> 时间：2012-05-16T13:23:57.023
> 
> 标签：git, svn

我正在尝试克隆一个大型 SVN 存储库以迁移到 git，但是当它到达一个创建分支目录但不向其中添加文件的 SVN 提交时，克隆操作失败了大约三分之一（文件在另一个 SVN 提交中添加）。

错误是：

文件系统没有项目：/usr/local/Cellar/git/1.7.10.1/libexec/git-core/git-svn 第 5669 行的存储库中不存在工作副本路径“/branches/secretName”

我认为这是因为 git 不跟踪空目录。我怎样才能克服这个？

编辑：

[http://gitorious.org/svn2git](http://gitorious.org/svn2git)

看起来很有希望，不过可能几天都没有时间玩它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:59:29.240

你没有忘记 --stdlayout 选项吗？

尝试[使用 SubGit](http://subgit.com/)进行迁移。它不是基于 git-svn 的，而是将更多的 SVN 概念转换为 Git（如分支、标签、忽略等）。

# apache - 默认 Apache 索引页面参数

> ID：10619516
> 
> 赞同：3
> 
> 时间：2012-05-16T13:24:00.083
> 
> 标签：apache, ubuntu, indexing, directoryindex

我很惊讶我在谷歌上找不到这个答案。

我见过有人使用查询字符串参数访问默认的 Apache 索引页面（没有 index.html，所以它只显示目录列表）。他们使用的 URL 类似于：

```
http://example.com/?C=M;O=D 
```

它看起来`O=D`意味着“order = descending”，因为它颠倒了列表的顺序，但我想知道可以传入哪些其他参数，以及它们的含义。这是在某处记录的吗？我找不到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:34:35.240

来自[http://www.gforums.net](http://www.gforums.net/web-design-coding-programming-forum/7234-what-does-c-m-o-d-mean.html)

“C=M;O=D”是传递给可浏览 URL 的查询字符串。它用于对文件列表进行排序。

O 是排序顺序，可以是 A 或 D 分别表示升序和降序。

C 代表要排序的列名。它可以采用以下值：

N - 名称（文件名）列

M - 上次修改的列

S - 尺寸栏

D - 可能是描述

您可能想看看这个：[https ://httpd.apache.org/docs/2.2/mod/mod_autoindex.html](https://httpd.apache.org/docs/2.2/mod/mod_autoindex.html)

# iis - IIS6 应用程序池凭据导致网站说“访问被拒绝”

> ID：10619522
> 
> 赞同：0
> 
> 时间：2012-05-16T13:24:16.840
> 
> 标签：iis, iis-6

好吧，我很难过。我已经配置了一个具有自己的应用程序池的 IIS 6 网站，该应用程序池具有自己的 AD 域凭据。当我尝试浏览该站点时，我看到一个页面简单地显示“访问被拒绝。”。事件日志中没有错误代码或信息。

我可以使用应用程序池帐户凭据打开记事本（并打开我尝试浏览的 html 文件）。

如果我将应用程序池的域帐户添加到本地管理员组，则会加载该站点。但是，这对我们的环境来说是不可接受的。

我已经在两台服务器上成功配置了这个站点（在负载平衡对中应该是相同的）。但是，尽我所能，我找不到这两个服务器配置之间的任何区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:57:02.110

您的泳池身份是否存在于本地组中`IIS_WPG`？

该组确保工作进程将具有正确运行所需的权限。

此外，您的网站根文件夹必须对 具有读取权限`IIS_WPG`，如果您的根位于`Inetpub\wwwroot`.

如果您运行 ASP.NET 网站，则`C:\WINDOWS\Microsoft.NET\Framework\vx.x.x.x\Temporary ASP.NET Files` **+ Write**也是如此。

仅供参考，在 IIS 7 中，该组现在称为 IIS_IUSRS。

[IIS 6.0 的默认权限和用户权限](http://support.microsoft.com/kb/812614/en-us)

[在 IIS 6.0 中配置应用程序池标识](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/12a3d96c-65ea-4210-96ad-86a801f6a88c.mspx?mfr=true)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T00:35:18.580

我重新安装了 IIS 6，错误消失了。重新安装 IIS 后，我还必须重新安装 .NET 4。

非常感谢您的建议和建议！

# db2 - 如果为空，则定义结果字段，然后定义另一个字段

> ID：10619526
> 
> 赞同：1
> 
> 时间：2012-05-16T13:24:28.540
> 
> 标签：db2, ibm-midrange

我要做的是，如果一个字段为空白，请`WRKQRY`在定义结果字段中使用（Query/400）中的另一个字段。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:35:39.753

您可以使用该命令创建 SQL 视图`RUNSQLSTM`，然后对视图运行查询。

```
CREATE VIEW QTEMP/MYVIEW AS
SELECT F1, CASE WHEN F2 <> ' ' THEN F2 ELSE F3 END AS FX FROM MYLIB/MYFILE 
```

`CL`然后将它们与一个程序结合在一起。

```
PGM

DLTF FILE(QTEMP/MYVIEW)
MONMSG MSGID(CPF0000)
RUNSQLSTM SRCFILE(MYLIB/MYSRC) MBR(MYMBR)
RUNQRY QRY(MYLIB/MYQRY)

ENDPGM 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T05:09:12.617

Query/400 已过时，应视为已弃用。大约 2 年前，它被查询管理取代。Query/400 查询在旧的数据库优化器 (CQE) 下运行，无法从新优化器 (SQE) 采用的更新更快的优化技术中受益。建议将 Query/400 查询迁移到 QM Query 或 DB2 Web Query。

幸运的是，可以在提示模式下创建查询管理查询，这对于 Query/400 用户来说应该非常熟悉。提示模式查询可以转换为更强大的 SQL 模式。

您可以使用该`RTVQMQRY`命令从您询问的 Query/400 查询中生成 SQL 源。一旦获得源，您就可以使用`CASE ... END`@Mike 给出的表达式。使用命令创建 QM 查询`CRTQMQRY`，并使用`STRQMQRY`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T21:56:17.537

如果您仍然需要这样做，我可以通过 3 次 Query 400 向您展示如何做到这一点。是的，我知道这效率不高，但可以做到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T13:36:47.243

看看应该对你[有用](http://publib.boulder.ibm.com/iseries/v5r2/ic2924/index.htm?info/db2/rbafzmst151.htm)。`CASE`

```
CASE field
    WHEN ' ' THEN newfield
    ELSE field
END as myfield 
```

# gwt - GWT JSONPRequestBuilder-浏览器控制台中出现“未知令牌：”错误，最后出现超时异常

> ID：10619527
> 
> 赞同：1
> 
> 时间：2012-05-16T13:24:35.343
> 
> 标签：gwt, rest, jsonp

我正在尝试使用 JSOPRequestBuilder 从 GWT 调用 Restful WS。我有一个在链接中报告的类似问题

[http://groups.google.com/group/google-web-toolkit/browse_thread/thread/ef93383aca7a3dfc/d4dc5bad1a9110ea](http://groups.google.com/group/google-web-toolkit/browse_thread/thread/ef93383aca7a3dfc/d4dc5bad1a9110ea)

但是，我想不出解决方案。请尽早帮助我。

## 我来自服务器的 JAX-WS 资源代码片段

```
 @GET
   @Produces(MediaType.APPLICATION_JSON)
   public DealerAddress getDealerAddress(@QueryParam("dealerId") String sDealerId) {

       DealerAddress dlrAd = new DealerAddress("test", "test", "test", "test", 10, new Date(), new Date());
       return dlrAd;
   } 
```

* * *

Jersey 返回一个 DealerAddress 的 JSON 对象。

现在当我在浏览器中尝试请求时，rest URL "https://127.0.0.1:8181/application/rest/OrderManagementResource?alt=json-in-script&dealerId=DLR1" 工作得很好。

它甚至适用于 GWT 的 RequestBuilder 方法，但不适用于 JSONPRequestBuilder 方法。

## 使用 JSONPRequestBuilder 从 GWT 调用 WS 的代码片段

```
JsonpRequestBuilder jsonPReqBuilder = new JsonpRequestBuilder();        
jsonPReqBuilder.setTimeout(100000);
        jsonPReqBuilder.setCallbackParam("callback");
        jsonPReqBuilder.requestObject("https://127.0.0.1:8181/application/rest/OrderManagementResource?alt=json-in-script&dealerId=DLR1" , new       AsyncCallback<DealerAddressJSON>() {

            @Override
            public void onFailure(Throwable caught) {
                // TODO Auto-generated method stub
                caught.printStackTrace();
                Window.alert("Inside error"+caught.getLocalizedMessage());          
            }

            @Override
            public void onSuccess(DealerAddressJSON result) {
                // TODO Auto-generated method stub
                Window.alert("Inside success"+result);
            }

        }); 
```

* * *

其中 DealerAddressJSON 是一个 JavaScriptObject 类型类。

我可以看到我的 JAX Rest 资源被调用并说从服务器返回。

此外，我可以在 Firebug 中看到响应来自浏览器但失败并出现异常“未知令牌：”最后我总是得到一个超时异常。现在我有一个很大的问题，我们从 JAX-RS 资源返回 JSON 的方式是服务器中的问题还是 JSONPRequestBuilder 调用过程有问题？我无法理解某些链接在此问题上解释的回调更改。

请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:40:55.717

您可能正在发回 JSON，而 JSONPRequestBuilder 需要 JSONP。这些不是一回事。

JSON只是数据，原样使用AJAX（即RequestBuilder）发出请求，可以直接读取内容。这些请求只能向同一服务器发出。示例 JSON 数据：

```
{"response":"success", "items":[{"id":1}, {"id":2}]} 
```

相比之下，JSONP 是为跨域请求而设计的，因此不仅仅是包含数据，而是将数据包装在 JavaScript 中。由于您的 JSON 服务没有将响应包装在 js 函数调用中，因此这是行不通的。JSONP 数据示例：

```
callback_1({"response":"success", "items":[{"id":1}, {"id":2}]}) 
```

回调随每个请求而变化，因此服务器应该根据客户端每次请求的内容更改该回调函数。

# jquery - 通过数据顺序值查找 li 并附加内容

> ID：10619529
> 
> 赞同：0
> 
> 时间：2012-05-16T13:24:39.510
> 
> 标签：jquery, html, html-lists, replace

我怎样才能找到`li`我需要的值`data-order`？

该列表包含在：

```
var list = '
    <ul id="order_list"> <h3> Order: </h3>
       <li data-order="1"></li>
       <li data-order="2"></li>
       <li data-order="3"></li>
       <li data-order="4"></li>
       <li data-order="5"></li>
       <li data-order="6"></li>
     </ul>'; 
```

我有一个名为 data 的对象，我通过 ajax 调用检索了该对象。订单值包含在这里，这就是我想要实现的

```
$.each(data, function(index, value) {
   // append data['title'] between <li ...> </li>
   // where data-order in <li> is data['order']
}); 
```

所以我需要找到`li`按=`var list`过滤的内容并附加内容;`data-order``data['order']``data`

*   有什么建议么？

我的其他帖子与此相关：[jquery append data to html based on order number](https://stackoverflow.com/questions/10619016/jquery-append-data-to-html-according-to-order-number)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:28:23.917

编辑：在看到这篇文章[jquery 根据订单号将数据附加到 html之后](https://stackoverflow.com/questions/10619016/jquery-append-data-to-html-according-to-order-number)

* * *

首先，`h3`取出您的`ul`.

其次，在开始使用选择器来操作和附加数据之前，请确保您`list`在 DOM 中。

第三，不要像这样在 JS 中的字符串中使用换行符。如果您需要多行，请使用串联：

```
var list = '<h3> Order: </h3>' + 
    '<ul id="order_list">' + 
       '<li data-order="1">No featured news here, click to add</li>' + 
       '<li data-order="2">No featured news here, click to add</li>' + 
       '<li data-order="3">No featured news here, click to add</li>' + 
       '<li data-order="4">No featured news here, click to add</li>' +
       '<li data-order="5">No featured news here, click to add</li>' +
       '<li data-order="6">No featured news here, click to add</li>' +
     '</ul>';

var data = [
    {
        id_news: 3,
        title: 'Alex...',
        category: 12,
        order: 1
    },
    {
        id_news: 12345,
        title: 'Obama...',
        category: 3,
        order: 3
    },
];

$(list).appendTo('body');

$.each(data, function(index, value) {
    $('#order_list li:eq(' + value['order'] + ')').html(value['title']);
});​ 
```

演示：http: [//jsfiddle.net/aKcxW/](http://jsfiddle.net/aKcxW/)

# jquery - 如何在 jQuery 中分离事件并附加新事件

> ID：10619531
> 
> 赞同：3
> 
> 时间：2012-05-16T13:24:43.467
> 
> 标签：jquery

我在颜色框弹出窗口内的按钮上遇到 jQuery click 事件问题。

按钮如下：

```
<div id="popup">
    <button class="close_bu">Close</button>
</div> 
```

默认情况下附加以下事件：

```
jQuery('.close_bu').bind('click',function(){        
            jQuery.colorbox.close();
}); 
```

当我触发另一个事件时，我想更改默认行为，所以我执行以下操作：

```
jQuery('#anotherpopup').on('click','.deleteplan_button',function(){

            jQuery('#popup .close_bu').addClass('returnBack');
            jQuery('#popup .returnBack').removeClass('close_bu');

            jQuery.colorbox({inline:true , href:"#popup", opacity: 0.6, width: "600px"});
return false;
         }) 
```

我已添加：

```
jQuery('#popup').on('click','.returnBack',function(){
                e.preventDefault();
                //Do something
}) 
```

但是附加到 .returnBack 的新事件不起作用，当我单击按钮触发关闭事件时，按钮不再具有 .close_bu 类并不重要，它会继续触发该事件。

我有点困惑：S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:32:14.107

在您的代码中，没有带有 id 的元素`popup`。所以`jQuery('#popup')`什么也不做（或者你没有向我们展示代码的重要部分）。

**更新：**

您将需要使用[.unbind()](http://api.jquery.com/unbind/)而不是删除类

```
$('#popup .close_bu').unbind('click'); 
```

`'#popup .close_bu'`您只需选择要与事件关联的元素，或者在这种情况下从事件中取消关联。jQuery css 选择器看起来就像 css。事件和处理程序之间的连接不使用 css。添加和删​​除类的全部技巧是触发不同的css样式，它只会改变元素的外观，但不会改变事件。

# javascript - 防止替换 JavaScript 正则表达式中的转义序列

> ID：10619536
> 
> 赞同：0
> 
> 时间：2012-05-16T13:25:08.377
> 
> 标签：javascript, regex, replace

JSFiddler：http: [//jsfiddle.net/A3vg6/20/](http://jsfiddle.net/A3vg6/20/)

```
 var regex = /(?:window|scope|data|owner)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*/gi;

    var path = [];
    var vars = [];

    var ms = txt.replace(regex,
        function (match) {
        var nv = "v" + (path.length + 1);
            if (match.indexOf("owner.")==0) {
                match = match.substr(6);
            }
            path.push(match);
            vars.push(nv);
            return nv;
        }
        ); 
```

我得到输出

```
data.x + data.y + $data.z + xdata => v1 + v2 + $v3 + xv4 
```

但正确的输出应该是，

```
data.x + data.y + $data.z + xdata => v1 + v2 + data.z + xdata 
```

所以任何以 $ 开头的东西都应该被转义，以及如果数据出现在任何字符之后不应该被替换。关键字只有window、scope、data和owner 4个，需要用变量替换。

我讨厌正则表达式，但这必须是正则表达式，因为它将包含复杂的序列，例如......

```
data[ Calculate( x, data.y)] => v1[ Calculate(x,v2)] 
```

我们现在收效甚微，但我对新序列有疑问

```
data[data['x']] + data.x + data.y + $data.y + xdata 
```

变成

```
v1v2['x']] +v3 +v4 + data.y + xdata 
```

但应该是

```
v1[v2['x']] +v3 +v4 + data.y + xdata 
```

**回答：**

[http://jsfiddle.net/A3vg6/44/](http://jsfiddle.net/A3vg6/44/)

工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:29:17.720

试试这个正则表达式：

```
/(^|[^\w])(?:window|scope|data|owner)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*/gi 
```

并将您的功能更改为：

```
var ms = txt.replace(regex,
        function (match, prefix) {
            if (prefix == "$") return match.substr(1);
            var nv = "v" + (path.length + 1);
            match = match.substr(1);
            if (match.indexOf("owner.")==0) {
                match = match.substr(6);
            }
            path.push(match);
            vars.push(nv);
            return prefix + nv;
        }
        ); 
```

在这里试试：http: [//jsfiddle.net/A3vg6/40/](http://jsfiddle.net/A3vg6/40/)

# jsp - JSP标签属性不能设置多次？

> ID：10619538
> 
> 赞同：6
> 
> 时间：2012-05-16T13:25:10.023
> 
> 标签：jsp, jsp-tags

我有一些带有标签的旧 JSP 文件，例如

`<mytag:editbox name="SEL_1" param="onclick='clickit();" param="size='4'" />.`

这些 JSP 在 Websphere 5.0 中运行得非常好。当我将它移入 Websphere 8.0 时，出现了问题。JSP编译的java源码是这样的：

```
editbox.setName("SEL_1");
editbox.setParam("size='4'");  //replaced by the last one
editbox.setParam("size='4'"); 
```

最后一个 [attributes] 覆盖它之前的那些。我还在 Websphere 6.0 和 Tomcat 中测试了 JSP。WAS6 和 8.0 一样，Tomcat 说：

```
org.apache.jasper.JasperException: /index.jsp (line: 17, column: 20) Attribute qualified names must be unique within an element 
```

tag 的属性不能设置多次。

这是 JSP 2.0+ 规范的要求吗？（我认为 WAS5.0 中的 JSP 容器是 JSP 1.2 。）

我可以将两个 param 属性合并为一个来纠正问题，但是如何在不更改 JSP 源的情况下获得正确的结果呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T13:35:47.197

*JSP 规范从不*支持具有多个同名的属性。如果它在 Websphere 5 上工作，那么这将取决于该服务器版本允许的专有行为，而不是任何其他版本。我认为标签类会做一些事情，比如将值添加到集合中，或者类似的事情。

您需要通过使用分隔字符串或使用嵌套标签来重构标签以符合规范。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T13:36:02.023

JSP 标记是 XML 元素。并且一个 XML 元素不能有多个同名的属性。恕我直言，您的代码碰巧在以前的 Websphere 版本中偶然工作，可能是由于对 JSP 标记的草率验证和解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-24T21:04:27.293

要与 WAS 8 具有相同的行为，您可以在应用程序部署描述符 ( `ibm-ext-web.xmi`) 中包含此 JSP 属性：

`allowMultipleAttributeValues` set to `true`.

Or set the Web container custom property `com.ibm.wsspi.jsp.allowMultipleAttributeValues` to `true`.

Source: [http://www-01.ibm.com/support/docview.wss?uid=swg1PM65454](http://www-01.ibm.com/support/docview.wss?uid=swg1PM65454)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-12T22:13:35.240

I had the same issue. I was using struts tags with Display tag library tags at the same time, so I faced this issue. Once I chose one to use the error went away. Using same tags from two different libraries causes ambiguity.

# xcode - 如何将二进制元数据设置为 XCode 构建的一部分？

> ID：10619540
> 
> 赞同：2
> 
> 时间：2012-05-16T13:25:16.290
> 
> 标签：xcode, build, binary, metadata

我需要为 XCode 生成的二进制文件设置元数据。例如，文件的“获取信息”屏幕中出现的“版权”和“版本”等字段。

有没有办法设置构建设置，以便在每次构建二进制文件时设置这些属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:34:18.653

每个 xcode 项目都有一个**YourProjectName-info.plist文件。**

该文件有很多与项目相关的信息，包括您希望作为 XML 格式的键和值的信息。

Xcode 还为您提供了使用基于 GUI 的表格的选项，类似于相同的表示形式。

[在Apple 文档](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPRuntimeConfig/Articles/ConfigFiles.html)中阅读有关它的更多信息。

**编辑**：默认情况下，命令行项目中似乎缺少 plist。阅读[这篇](http://www.red-sweater.com/blog/2083/the-power-of-plist)文章，它很好地解释了 plist 的基本原理。

阅读其中的**嵌入 Info.plist**部分以了解如何在命令行项目中执行此操作。

# asp.net-mvc - Fluent Nhibernate HasMany 从几张桌子到一张桌子

> ID：10619547
> 
> 赞同：0
> 
> 时间：2012-05-16T13:25:42.623
> 
> 标签：asp.net-mvc, nhibernate, fluent-nhibernate, automapper

我有一个从其他几个实体引用的实体/类/表，我使用 Fluent NHibernate 为我处理 ORM。在少数情况下，这是一个简单的引用，我可以将外键 ID 存储为列并以这种简单的方式处理引用，但在其他一些情况下，我需要引用这些项目的列表，并且需要完成我能想到的至少三门课。您可以假设将复制此设置以处理其他类的关系。

以下是公共实体的外观（由 s 中的其他几个实体拥有的实体`HasMany`）：

```
public class Student {
    public virtual int Id {get; set;}
    public virtual string Name {get; set;}
} 
```

而且，这是`ShopCourse`实体的样子：

```
public class ShopCourse {
    public virtual int Id {get; set;}
    public virtual int Name {get; set;}
    public virtual IList<Student> Students {get; set;}
} 
```

想象一下，我拥有的其他几个课程，例如特定课程，可以“拥有”几个学生。为了保持这种关系，我必须在我的数据库中创建一个表来跟踪两者之间的外键（对于每个引用的实体`Student`）——这个中间表不需要实体，除非我将表本身的字符串名称交给它：

**表：ShopCourse学生**

```
int - ShopCourseId
int - StudentId 
```

最后，这是我的映射。您可以假设实体本身映射得很好 - 诸如 Id 的命名方案之类的事情已解决并正常工作。当我尝试初始化任何具有以下属性的实体时，问题就出`HasMany`在`Student`：

```
//Inside a FluentlyConfigure().Mappings(m => m.AutoMappings.Add() call:
.Override<ShopCourse>(map => {
    map.HasMany(x => x.Students)
        .Table("ShopCourseStudents")
        .KeyColumns.Add("ShopCourseId")
        .KeyColumns.Add("StudentId")
        .Cascade.All();
    }) 
```

问题是，当我尝试加载`ShopCourse`s 列表时，我得到了 Fluent 错误：

> 外键 (ABC123AF9:Student [ShopCourseId, StudentId]) 的列数必须与引用的主键 (ShopCourses [Id]) 相同

我*不会*覆盖 Fluent 的映射，`Student`因为它很简单。出于本示例的目的，`Student`不需要知道`ShopCourse`它属于哪个 s，或者可能拥有该特定`Student`记录的任何其他课程。

这似乎是我在做一些基本的、错误的事情——到底是什么？非常有义务提前！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:48:00.430

因此，问题在于我在项目中重复使用的自定义代码，显然为处​​理 ManyToMany 约定而编写的部分大部分都被破坏了。我在这里寻找的是一种`ManyToMany`关系，而不是`HasMany`。我遇到的问题是我的代码强制将子对象（在本例中为`Student`）上的引用指向父对象，我不需要而且只会使事情复杂化。删除它，然后我的`ManyToMany`工作：

```
.Override<ShopCourse>(map => {
    map.HasManyToMany(x => x.Students)
        .Table("ShopCourseStudents")
        .ParentKeyColumn("ShopCourseId")
        .ChildKeyColumn("StudentId")
        .Cascade.All() 
```

# python - unicode findall python

> ID：10619549
> 
> 赞同：4
> 
> 时间：2012-05-16T13:25:46.313
> 
> 标签：python, regex

我有一个英语工作模式，但我的母语不起作用，这让我很头疼。首先我提出了很多关于编码的问题，我知道我低估了它，这是一个大问题。我花了一些时间阅读它，但问题仍然存在。所以现在我面临一个正则表达式 utf 问题。所以模式是：

```
exactMatch = re.compile(r"([^\.]*\bтурција\b[^\.]*)\.", re.UNICODE)
print exactMatch.pattern
result= exactMatch.findall("турција е на врвот од индустријата. турција е на врвот од индустријата.") 
```

它适用于英语。它的功能是给我一个段落中的所有句子。那么有什么建议吗？

我也尝试过编码和解码，但注意到除了编码错误之外会发生。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T13:31:51.610

这将起作用：

```
exactMatch = re.compile(ur"([^\.]*\bтурција\b[^\.]*)\.", re.UNICODE)
print exactMatch.pattern
result= exactMatch.findall(u"турција е на врвот од индустријата. турција е на врвот од индустријата.") 
```

如果您使用 unicode，则**使用**unicode。

# jquery - jQuery如何定义对象结构？

> ID：10619552
> 
> 赞同：0
> 
> 时间：2012-05-16T13:26:00.267
> 
> 标签：jquery, object, xml-parsing

嗯，这个问题让我很生气。我认为我在这方面缺乏知识。

我正在尝试解析 XML 响应，一切正常，但问题是当我尝试访问对象时。我将它们视为数组，我总是收到“未定义”：

```
<?xml version="1.0" encoding="UTF-8" ?>
  <ajax-response>
   <response>
    <item>
      <name><![CDATA[ok]]></name>
      <value><![CDATA[true]]></value>
    </item>
    <item>
      <name><![CDATA[menuDiv]]></name>
      <value><![CDATA[Some HTML value]]></value>
    </item>
   </response>
  </ajax-response> 
```

这是Jquery代码：

```
xmlDoc = $.parseXML( xml ),
        $xml = $( xmlDoc ),
        $item = $xml.find( "item" );
        alert($item.length);
        $item.each(function(key, value){ 
            alert(typeof value);     
        }); 
```

此行`alert(typeof value);`返回“对象”。但是，如果我这样做，`value[0]`或者`$value[0]`它返回“未定义”。

我想从对象中获取“一些 HTML 值”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:28:03.247

传递给您的迭代函数的`value`对象将是一个 XML DOM 节点，在您的例子中是一个`Element`带有标签 name的节点`item`。因此，您可以通过从中获取属性或查看`TextNode`它拥有的任何 child 中的文本来从中检索信息。

您可以将元素包装在 jQuery 实例中，并使用 jQuery[`attr`](http://api.jquery.com/attr)获取属性和[`text`](http://api.jquery.com/text/)文本。

> 我想从对象中获取“一些 HTML 值”。

那将是`text`-这是一个示例：

```
$item.each(function(key, value){ 
    var $value = $(value);
    alert(typeof $value.text());
}); 
```

* * *

这是一个完整的示例，循环遍历每个的子级`item`：[Live copy](http://jsbin.com/iwonoq) | [来源](http://jsbin.com/iwonoq/edit)

```
jQuery(function($) {

  var xml =
      '<?xml version="1.0" encoding="UTF-8" ?>' +
      '<ajax-response>' +
          '<response>' +
              '<item>' +
                  '<name><![CDATA[ok]]></name>' +
                  '<value><![CDATA[true]]></value>' +
              '</item>' +
              '<item>' +
                  '<name><![CDATA[menuDiv]]></name>' +
                  '<value><![CDATA[Some HTML value]]></value>' +
              '</item>' +
          '</response>' +
      '</ajax-response>';

  var xmlDoc = $.parseXML( xml ),
      $xml = $( xmlDoc ),
      $item = $xml.find( "item" );
  display($item.length);
  $item.each(function(key, value){ 
    $(value).children().each(function(clave, valor) {
      display("$(valor).text() = " + $(valor).text());
    });
  });

  function display(msg) {
    $("<p>").html(msg).appendTo(document.body);
  }
}); 
```

* * *

或者，如果您只想获取包含 text`value`的兄弟，相关位是：`name``"menuDiv"`

```
var menuDivText = $xml.find("item name:contains(menuDiv)").next().text(); 
```

[实例](http://jsbin.com/ipopug)| [来源](http://jsbin.com/ipopug/edit)

# monodevelop - MonoDevelop 与 XCode 同步时出错。IsDerivedFrom() 必须来自同一编译

> ID：10619553
> 
> 赞同：0
> 
> 时间：2012-05-16T13:26:00.723
> 
> 标签：monodevelop

自从我升级到 MonoDevelop 3.0 后，我得到了这个

“从 XCode 同步更改时出错。IsDerivedFrom() 必须来自同一个编译”

之后，我丢失了 Designer 类中的一些 Partial 出口声明并且无法编译该项目。

这是工作流程： 1\. 在 MonoDevelop 中打开我的解决方案 2\. 双击情节提要 3\. 在 XCode 中添加一个新的 TableViewController 4\. 保存，退出 XCode 5\. MonoDevelop 需要一分钟来同步更改并引发错误。6\. 我还原代码，丢失我的更改，然后重新开始。

我正在使用 MonoTouch 的评估版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:54:15.373

这是[MD 3.0 中的错误](https://bugzilla.xamarin.com/show_bug.cgi?id=5084)。它已被修复，修复程序应该很快就会发布。

# php - 检查用户何时使用 PHP 离开页面

> ID：10619560
> 
> 赞同：0
> 
> 时间：2012-05-16T13:26:15.230
> 
> 标签：php

好的，我读[了这篇文章](https://stackoverflow.com/questions/6696871/how-to-check-if-user-has-left-certain-page)，有人建议使用此代码检查用户是否离开页面：

```
 if($_SERVER['REQUEST_URI'] !== 'page_with_session.php'){
    session_destroy(); // Kill session for all pages but page_with_session.php
} 
```

现在有人可以解释一下 REQUEST_URI 是如何工作的，因为我似乎在 PHP 手册中找不到它，或者有人可以建议另一种方法来检查用户何时离开页面。

请注意**我不能**在这个项目中使用 Javascript。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:29:53.947

使用该代码，您只能判断用户何时更改到服务器上的另一个页面。如果他离开另一个网站，或关闭标签/浏览器，这将不起作用。请改用 javascript 或使用会话超时。REQUEST_URI 是当前请求的 URI，因此如果用户更改到您服务器上的另一个页面，您可以检查它不是“会话页面”并销毁会话。这仅在您不使用重写或类似技术时才有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:34:15.057

> $_SERVER 是一个包含标题、路径和脚本位置等信息的数组。此数组中的条目由 Web 服务器创建。无法保证每个 Web 服务器都会提供其中任何一个；服务器可能会省略一些，或提供此处未列出的其他内容。也就是说，在 » CGI/1.1 规范中说明了大量这些变量，因此您应该能够预料到这些变量。
> 
> $HTTP_SERVER_VARS 包含相同的初始信息，但不是超全局的。（注意 $HTTP_SERVER_VARS 和 $_SERVER 是不同的变量，PHP 会这样处理它们）
> 
> 'REQUEST_URI' 为访问此页面而提供的 URI；例如，'/index.html'。

(c) php.net

如您所见，它得到了完美的解释。当用户离开页面时，您无法做您想做的事。所以正如@jimpic 告诉你的那样使用会话。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T13:42:08.960

唯一真正做到这一点的方法是保持非常短的会话超时，然后使用带有元刷新的嵌入式 iframe，或者对 PHP 页面进行 javascript 调用以使其保持活动状态。

# css - div切入蒙版

> ID：10619561
> 
> 赞同：0
> 
> 时间：2012-05-16T13:26:18.037
> 
> 标签：css, html

我有一个 div 是面具。第二个 div 应该被切割成透明的蒙版。如果背景颜色为绿色，那么 div 应该是绿色的

```
<body style="background:green;">
<div style="position:fixed;width:100%;height:100%;background:red;z-index:501;"></div>
<div style="width:500px;height:500px;background:blue;position:absolute;z-index:502;"></div>
<!-- I want to make the second div in the body-color that is the green color -->
​ 
```

你能以某种方式帮助我吗？谢谢。[http://jsfiddle.net/RYKFQ/2/](http://jsfiddle.net/RYKFQ/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:50:18.747

怎么样：在第二个 Div.Play 中根据需要设置颜色的不透明度，围绕不透明度获得所需的遮罩效果。将第二个 div 放在具有所需背景颜色的父 DIV 中。可能是下面的小提琴可能会帮助你。祝你好运！

[http://jsfiddle.net/meetravi/AFckr/](http://jsfiddle.net/meetravi/AFckr/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:43:02.780

简单：替换`background:blue;`为`background:none;`

这仍然会将`div`背景放在前面。你可以把任何东西放在那里，浏览器会让背景发光。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T09:01:28.740

如果你想在第二个 div 中看到 body 背景，你可以使用例如：

```
body, div.second {background: url("some_image.png") 0 0 fixed} 
```

但是，这只是技巧，不会使第一个 div 透明。

# .htaccess - 是否可以根据子目录有单独的域别名和重定向？

> ID：10619565
> 
> 赞同：1
> 
> 时间：2012-05-16T13:26:26.727
> 
> 标签：.htaccess, redirect, dns, domain-aliasing

我需要根据域名是否在子目录中来设置域名的别名/重定向。

`newdomain.com`是 的别名`parent.com/newdomain`。这在主机控制面板中设置为别名并且正在工作。

我需要根据文件显示不同的 url，例如

*   中的文件`newdomain.com`应在地址栏中显示为 `parent.com/newdomain/filename.php`
*   中的子目录`newdomain.com`应在地址栏中显示为`newdomain.com/subdir/filename.php`

我可以使用 htaccess 来控制重定向，但我还没有找到一种方法来控制别名。这可能吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:45:27.947

我的回答是基于这样的假设，即`newdomain.com`由`parent.com`同一个 Apache 进程提供服务。

将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下`newdomain.com`：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^(www\.)?newdomain\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/+subdir/ [NC]
RewriteRule ^ http://parent.com/newdomain%{REQUEST_URI} [L,R=302,NC] 
```

一旦您确认它正在工作，然后更改`R=302`为`R=301`

# matlab - 当我使用 datestr 时，如何在 1 x 1 数组中显示日期？

> ID：10619567
> 
> 赞同：2
> 
> 时间：2012-05-16T13:26:30.893
> 
> 标签：matlab

我曾经`datestr`转移`732154.873773148`到`26-Jul-2004 20:58:14`，但是当我将它输出到.csv文件时，它将是一个`1*20`数组...，但我想要将它存储在一个`1*1`数组中，我该怎么办？

有没有简单的方法可以转移`26-Jul-2004 20:58:14`到`2004/07/26 20:58:14`？

谢谢：）

```
data = csvread('4.csv');
date = data(:, 1);
loc = data(:, 2);
record_num = size(loc, 1);

result = zeros(record_num, 2);
new_date = datestr(date);
csvwrite('4_res.txt', new_date); 
```

我想要的是 `2004/07/26 20:58:14`

但它会 `2,0,0,4,/,0,7,/,2,6, ,2,0,:,5,8,:,1,4`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T14:13:58.500

为了使日期采用`2004/07/26 20:58:14`您可以使用的格式：

```
new_date = datestr(date,'mm/dd/yy HH:MM:SS'); 
```

要编写仅包含 1x1 单元格的 csv 文件，您可以使用`dlmwrite`空字符串作为分隔符：

```
dlmwrite('4_res.txt',new_date, 'delimiter','') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T14:12:39.870

您的问题是，对于 Matlab，字符串是字符数组。正如您所发现`csvwrite`的，将您的“字符串”写为整数数组（字符串中字符的 ASCII 码）。我不认为有办法强迫`csvwrite`行为不同。

我想你将不得不使用`fprintf`，像这样

```
fprintf(fid,datestr('26-Jul-2004 20:58:14')) 
```

得到你想要的输出。`fid`当然，这里是您打开（使用`fopen`）启用写访问的文件的句柄。至于以您想要的格式编写日期字符串，请尝试：

```
fprintf(fid,datestr('26-Jul-2004 20:58:14', 'yyyy/mm/dd HH:MM:SS')) 
```

# date - JQgrid json日期格式

> ID：10619570
> 
> 赞同：6
> 
> 时间：2012-05-16T13:26:41.750
> 
> 标签：date, jqgrid, format

我有一个日期通过 Json 字符串传递到我的 JQGrid 中，它看起来像

```
"31/10/2011" 
```

我无法通过 JQGrid[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3apredefined_formatter)确定格式。我只是希望它出现然后在网格中排序。

如果我在没有格式化的情况下发布，日期看起来很好但不会被识别为日期，因此排序都是错误的。

如果我将以下日期格式添加到列

```
formatter: 'date', formatoptions: { newformat: 'd/m/Y'} 
```

我得到一个看起来像这样的日期

```
03/10/2031 
```

我无法为我的生活找出问题所在，请帮忙。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T13:54:28.430

```
formatter: 'date', formatoptions: { srcformat: 'd/m/Y', newformat: 'd/m/Y'} 
```

对问题进行了排序

# java - 读取一个文本文件并写入多个文本文件以进行过滤/提取

> ID：10619571
> 
> 赞同：0
> 
> 时间：2012-05-16T13:26:44.627
> 
> 标签：java, loops, text, io, count

我正在寻找一种过滤我的文本文件的方法。我有许多包含许多文本文件的文件夹名称，文本文件有几个没有人员，每个人员有 10 个集群/组（我在这里只显示了 3 个）。但是每个组/集群可能包含几个原语（我在这里展示了 1 和 2）

这是我的亚当文本文件 page1_d.txt：

```
 # staff No. 0 //no of staff

 *  0  0  1 //no of cluster

 1 1 1 1 1 1 //one primitive here actually p1 in my Array

 *  0  1  1

 1 1 1 1 1 1 

 *  0  2  1

 1 1 1 1 1 1 

 *  0  3  1

 1 1 1 1 1 1

 # staff No. 1

 *  1  0  2

 2 2 2 2 2 2 2 // two primitive here actually p2 and p3 in my Array
 3 3 3 3 3

 *  1  1  2

 2 2 2 2 2 2 2
 3 3 3 3 3

 *  1  2  2

 2 2 2 2 2 2 2
 3 3 3 3 3

 *  1  3  2

 2 2 2 2 2 2 2
 3 3 3 3 3 
```

我的公开课：

```
public class NewClass {
String [][][][] list = { {{{"adam"}},{{"p1"},{"p2","p3"}},{{"p4","p5","p6"}}} };
// first is name for the folder, second is num of text file, 3rd num of staff, 4th num of primtive
final int namefolder = list.length;
final int page = list[0].length; 
```

这是我读取文本文件并写入另一个文本文件的方法：

```
public void search (File folder, int name,int numPage){
    BufferedReader in;
    String line=null;
    int staff = list[name][numPage].length; // the length vary for each txt file

    for (int numStaff=0;numStaff<staff;numStaff++){ 
        int primitive = list[name][numPage][numStaff].length; //the length vary for each staff
        StringBuilder contents = new StringBuilder();
        String separator = System.getProperty("line.separator");

            try {
                in = new BufferedReader(new FileReader(folder));
                for (int numPrim=0;numPrim<primitive;numPrim++) {
                while(( line = in.readLine()) != null) {
                    if (!(line.startsWith("#") ||line.startsWith("*") ||line.isEmpty() )) {
                        contents.append(line);
                        contents.append(separator);
                        try {
                            PrintWriter output = new PrintWriter(new FileOutputStream("C://"+list[name][numPage][numStaff][numPrim]+".txt", true));
                            try {
                                output.println(line);
                            }
                            finally {
                                output.close();
                            }
                            for (int i = numPrim+1; i < primitive; i++){ // this is for more than 2 primitive
                                if((line = in.readLine()) != "\n"){ // 2nd or more primitive has no newline
                                    contents.append(line);
                                    contents.append(separator);
                                    try {
                                        PrintWriter output2 = new PrintWriter(new FileOutputStream("C://"+list[name][numPage][numStaff][i]+".txt", true));

                                        try {
                                            output2.println(line);
                                        }
                                        finally {
                                          output2.close();
                                        } 
                                    } catch (IOException e) {
                                        System.out.println("Error cannot save");
                                        e.printStackTrace();
                                    }
                                }
                            }
                        } catch (IOException e) {
                            System.out.println("Error cannot save");
                            e.printStackTrace();
                        }
                    }                       
                }//end of while
            }// end for loop for prim
                in.close();
            }//end of try
            catch(IOException e) {
                e.printStackTrace();      
            }
    }// end for loop for staff
} 
```

我希望 p1.txt 的输出是这样的：

```
1 1 1 1 1 1 
1 1 1 1 1 1 
1 1 1 1 1 1
1 1 1 1 1 1 
```

但它表明了这一点：

```
1 1 1 1 1 1 
1 1 1 1 1 1 
1 1 1 1 1 1 
1 1 1 1 1 1
(empty)
2 2 2 2 2 2 2
3 3 3 3 3
2 2 2 2 2 2 2
3 3 3 3 3
2 2 2 2 2 2 2
3 3 3 3 3
2 2 2 2 2 2 2
3 3 3 3 3 
```

这个（p2.txt）：

```
1 1 1 1 1 1 
1 1 1 1 1 1 
1 1 1 1 1 1 
1 1 1 1 1 1
2 2 2 2 2 2 2
2 2 2 2 2 2 2
2 2 2 2 2 2 2
2 2 2 2 2 2 2 
```

这个（p3.txt）：

```
(empty)    
(empty)
(empty)
(empty) 
3 3 3 3 3
3 3 3 3 3
3 3 3 3 3
3 3 3 3 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:30:38.380

您的计数器计算打印了多少行，没关系，如果您想计算总共有多少行，请将其移到 if 块之外：

```
while (( line = input.readLine()) != null){
    if (!(line.startsWith("#") || line.startsWith("*") ||line.isEmpty() )) {
        contents.append(line);
        contents.append(separator);
        System.out.println(line);
    }
    count++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:40:10.970

一些忠告：

1.  将长方法拆分为几个较小的方法
2.  如果因为使用了许多局部变量而这很困难，请将所有内容移到解析器类中，并使每个局部变量成为一个字段。
3.  每种方法都应该做一件事。

这使您可以像这样编写过滤器：

```
void parse() {
    while( hasMoreLines() ) {
        if( lineMatches() ) {
            processLine();
        }
    }
}

boolean lineMatches() {
    if( line.startsWith( "#" ) ) return false;
    if( line.startsWith( "*" ) ) return false;

    return true;
} 
```

您现在有两个选择：您可以`1 1 1 1 1 1`在.`lineMatches()``processLine()`

如果您采用后一种方法，您可以简单地`return`在编写任何输出之前。

# ruby-on-rails - 立即通过复选框切换布尔属性

> ID：10619573
> 
> 赞同：0
> 
> 时间：2012-05-16T13:26:47.793
> 
> 标签：ruby-on-rails

我的应用程序中有布尔属性“已完成”的任务。我希望能够选中复选框并立即将该布尔属性从 false 更改为 true（而不必单击提交按钮）。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:36:23.430

你可以试试：

```
<script>        
    function toggle(id, value)
    {
       document.getElementById('img').src = "scriptURL?id=" + id+ "&value=" + value;   } 
 </script>  

 <input type="checkbox" name="toggleBox" onclick="toggle(this.id,this.checked);"/>

 <img src="scriptURL" id="img" style="display:none;"/> 
```

图像被隐藏，当您单击复选框时，它会向图像发送一条消息以从“scriptURL”重新加载。

“ScriptURL”接收控件的名称和值 - 您的代码可以从查询字符串中获取这些并处理它们。

它对用户完全透明，不需要任何额外的框架。

或者

```
<script>

    function toggle(id, value)
    {
       var url = "scriptURL?id=" + id+ "&value=" + value; 

       // this sends the name and value parameters to the scriptURL
       $("<div/>").html(url);
    } 

    $(document).ready(function(){

        $(".toggleBox").bind("click", function(){
            toggle($(this).attr("id"), $(this).is(':checked'));
        });
    });

</script>

<input type="checkbox" id="something" name="something" class="toggleBox" /> 
```

红宝石脚本：

```
...
require 'cgi' 

params = CGI.parse(request.query_string) 
# params is now {"id"=>["id name"], "value"=>["true or false"]} 

**Completed = p['value'].first** 

... rest of your code ... 
```

# jquery - Pre-IE9 中的 JQuery 动画

> ID：10619577
> 
> 赞同：0
> 
> 时间：2012-05-16T13:27:05.777
> 
> 标签：jquery, internet-explorer, internet-explorer-8

这可能是一个简单的解决方案，但我无法在任何地方找到任何东西。

在我的代码中，我正在做：

```
$('#animateObject').animate({
    'position': 'absolute',
    'height': thisWidgetSettings.detailHeight,
    width: thisWidgetSettings.detailWidth,
    marginTop: '-120px',
    marginLeft: '-320px',
    top: $(window).height() / 2 - (parseInt(thisWidgetSettings.detailHeight, 10) / 2) + 120 + $(window).scrollTop(),
    left: $(window).width() / 2 - (parseInt(thisWidgetSettings.detailWidth, 10) / 2) + 320 + $(window).scrollLeft()
}, 500); 
```

在 IE9、Safari、Firefox 和 Chrome 中，这一切都很好，并且完全符合我的要求。但是，在 IE7 和 IE8 中，下面的行会导致错误。

```
// JQuery 1.7.2 Line 8938
    this.now = this.start + ( (this.end - this.start) * this.pos );
}
this.update(); 
```

我相信这个错误的原因是此时 this.now 被设置，如果传入的值不是数字，this.now 最终会像“absoluteNaN”这样导致更新函数失败。我是否将某些内容错误地传递给动画对象，或者这是 JQuery 的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:03:40.430

这是因为“动画”不适用于非数字值，例如“-320px”。传入“-320”就可以了。

# wpf - WPF程序自动软件更新

> ID：10619584
> 
> 赞同：0
> 
> 时间：2012-05-16T13:27:24.593
> 
> 标签：wpf, auto-update

我开发了一个 WPF 设置应用程序。此应用程序无法自动更新。对于更新，用户应删除该应用程序并重新安装。

我的应用程序正在从我服务器上的 SQL Server 2008 获取数据。换句话说，应用程序就像浏览器一样工作。所有数据都来自我的服务器。

如何通知我的用户并自动更新应用程序？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:31:39.310

您可以使用[单击一次（自动更新）](http://msdn.microsoft.com/en-us/library/s22azw1e.aspx)。

如果您不想使用 clickonce，可以使用[netsparkle](https://stackoverflow.com/a/5040651/649524)

[使用中央服务器部署和更新智能客户端项目](http://msdn.microsoft.com/en-us/magazine/cc163973.aspx)-> 使用单击一次

[向您的应用程序添加自动更新](http://www.codeproject.com/Articles/19623/Adding-automatic-updates-to-your-program-Part-1)- > 它本身不使用 clickonce，但使用 clickonce 清单。

[设置 net sparkle 自动更新](http://netsparkle.codeplex.com/documentation)

# forms - Symfony 2 表单 - 从表单类访问 parameters.ini

> ID：10619587
> 
> 赞同：2
> 
> 时间：2012-05-16T13:27:38.457
> 
> 标签：forms, parameters, symfony

我需要`parameters.ini`从表单访问。

当然我可以从控制器访问：

```
$myVal = $this->container->getParameter('my_val'); 
```

将其传递给控制器​​：

```
$demoForm = $this->createForm(new demoFormType($myVal), $demoObject); 
```

并以保存传递给构造函数的值的形式（当然，应该显式实现）。

但是，这种形式在多个控制器中使用，因此从表单类中以某种“魔术”方式简单地访问会更加简洁。

可能吗？？？我找不到任何答案。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:55:57.333

我不确定按照您建议的方式进行操作是最好的主意。表单不应该像那样被配置绑定。

相反，也许您可​​以创建一个新的控制器来继承。

```
namespace Your\Bundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Your\Bundle\Form\Type\demoFormType;

class FormAwareController extends Controller
{
  protected function createDemoForm( $demoObject )
  {
    $myVal = $this->container->getParameter( 'my_val' );
    return $this->createForm( new demoFormType( $myVal, $demoObject ) );
  }
} 
```

然后，在你需要的地方扩展这个类

```
namespace Your\Bundle\Controller;

class SampleController extends FormAwareController
{
  public function indexAction()
  {
    $demoObject = new stdClass; // or whatever
    $form = $this->createDemoForm( $demoObject );

    // etc...
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:13:45.463

[Define your form as a service](https://stackoverflow.com/questions/8107179/create-a-form-as-a-service-in-symfony2) then pass parameters to it using the %parameter% notation. Your controllers can then just grab the service without needing to know anything about the initialization process.

The technique is also very useful for setting entity managers and other dependencies.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-10T06:01:40.157

这是发送parameters.ini值以在Symfony2中查看的过程

参数.ini

```
app_name = "Application Name"; 
```

在控制器中

```
$data = array(
app_name =>$this->container->getParameter( 'app_name' );
)
return $this->render('Bundle:Home:index.html.twig', $data); 
```

在视图中

```
{{app_name}} 
```

# iphone - 使用 AudioServicesAddSystemSoundCompletion 传递参数

> ID：10619588
> 
> 赞同：1
> 
> 时间：2012-05-16T13:27:42.110
> 
> 标签：iphone, objective-c, ios, ipad, audio

我正在尝试传递一个`UILabel`with`AudioServicesAddSystemSoundCompletion`但我无法操纵`completionCallback`方法中的值。我正在使用 ARC，Xcode 建议添加`(_bridge void*)`.

任何帮助将非常感激。

```
-(void) playWordSound:(UILabel *)label
{
    NSString *path;
    SystemSoundID soundId;
    switch (label.tag)
    {
        case 1:
            ..........
            break;
    }
    NSURL *url = [NSURL fileURLWithPath:path];
    AudioServicesCreateSystemSoundID( (CFURLRef)objc_unretainedPointer( url), &soundId);
    AudioServicesPlaySystemSound(soundId);
    AudioServicesAddSystemSoundCompletion (soundId, NULL, NULL, 
                                           completionCallback,
                                           (__bridge void*) label);
}

static void completionCallback (SystemSoundID  mySSID, void* data) {
    NSLog(@"completion Callback");
    AudioServicesRemoveSystemSoundCompletion (mySSID);
    //the below line is not working
    //label.textColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:1];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:34:54.663

在完成处理程序中，标签存储在`data`. 您需要将`__bridge`其退回才能使用它。

```
static void completionCallback (SystemSoundID  mySSID, void* data) {
    NSLog(@"completion Callback");
    AudioServicesRemoveSystemSoundCompletion (mySSID);
    UILabel *label = (__bridge UILabel*)data;
    label.textColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:1];
} 
```

# javascript - JavaScript，未能检测到换行符

> ID：10619594
> 
> 赞同：1
> 
> 时间：2012-05-16T13:28:06.717
> 
> 标签：javascript, replace

我在我的代码中发现了一个错误：

**此代码用突出显示的版本替换了一些常规文本：**

```
var param = getCurrentParam();
var text = document.getElementById("mydiv").innerHTML;
document.getElementById("mydiv").innerHTML = text .replace(param, '<span style="background-color:yellow;">'+param+'</span>'); 
```

**但这在这种情况下不起作用：**

```
param = 'my text more text another line here'; 
```

**“真实”html：**

```
my text more text
another line here 
```

因为有一个换行符（**没有 br，只需在文本编辑器中输入键**），参数只有空格，但实际上（在 html 中）文本有一些东西（我猜是这样）`'\n'`：;
所以替换不会起作用，因为可能有一个：“\n”，但它会搜索一个“”；
**如何修复我的替换方法？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:38:20.140

由于换行符通常在 html 中不可见，因此您可以完全剥离它们

```
 var text = document.getElementById("mydiv").innerHTML.replace(/\r?\n/g, ''); 
```

# c# - 在每个新字符上触发 WPF TextBox 绑定？

> ID：10619596
> 
> 赞同：91
> 
> 时间：2012-05-16T13:28:07.457
> 
> 标签：c#, wpf, xaml, data-binding, textbox

在 TextBox 中输入新字符后，如何进行数据绑定更新？

我正在学习 WPF 中的绑定，现在我陷入了一个（希望如此）简单的问题。

我有一个简单的 FileLister 类，您可以在其中设置 Path 属性，然后当您访问 FileNames 属性时，它将为您提供文件列表。这是那个类：

```
class FileLister:INotifyPropertyChanged {
    private string _path = "";

    public string Path {
        get {
            return _path;
        }
        set {
            if (_path.Equals(value)) return;
            _path = value;
            OnPropertyChanged("Path");
            OnPropertyChanged("FileNames");
        }
    }

    public List<String> FileNames {
        get {
            return getListing(Path);
        }
    }

    private List<string> getListing(string path) {
        DirectoryInfo dir = new DirectoryInfo(path);
        List<string> result = new List<string>();
        if (!dir.Exists) return result;
        foreach (FileInfo fi in dir.GetFiles()) {
            result.Add(fi.Name);
        }
        return result;
    }

    public event PropertyChangedEventHandler PropertyChanged;
    protected void OnPropertyChanged(string property) {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null) {
            handler(this, new PropertyChangedEventArgs(property));
        }
    }
} 
```

我在这个非常简单的应用程序中使用 FileLister 作为 StaticResource：

```
<Window x:Class="WpfTest4.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfTest4"
    Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <local:FileLister x:Key="fileLister" Path="d:\temp" />
    </Window.Resources>
    <Grid>
        <TextBox Text="{Binding Source={StaticResource fileLister}, Path=Path, Mode=TwoWay}"
        Height="25" Margin="12,12,12,0" VerticalAlignment="Top" />
        <ListBox Margin="12,43,12,12" Name="listBox1" ItemsSource="{Binding Source={StaticResource ResourceKey=fileLister}, Path=FileNames}"/>
    </Grid>
</Window> 
```

绑定正在工作。如果我更改文本框中的值然后单击它外部，则列表框内容将更新（只要路径存在）。

问题是我想在输入新字符后立即更新，而不是等到文本框失去焦点。

我怎样才能做到这一点？有没有办法直接在 xaml 中执行此操作，或者我是否必须处理框上的 TextChanged 或 TextInput 事件？

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2012-05-16T13:31:27.410

在您的文本框绑定中，您所要做的就是 set `UpdateSourceTrigger=PropertyChanged`。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-05-16T13:30:25.930

您必须将`UpdateSourceTrigger`属性设置为`PropertyChanged`

```
<TextBox Text="{Binding Source={StaticResource fileLister}, Path=Path, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
         Height="25" Margin="12,12,12,0" VerticalAlignment="Top"/> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-11-03T18:16:33.370

如果没有 C#，XAML 中的 TextBox 就足够了，而不是类。所以，监控TextBlock的属性，其中TextBox的写入长度： **Binding Text.Length**

```
<StackPanel>
  <TextBox x:Name="textbox_myText" Text="123" />
  <TextBlock x:Name="tblok_result" Text="{Binding Text.Length, ElementName=textbox_myText}"/>
</StackPanel> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-12-01T15:47:32.350

突然之间，滑块和关联的 TextBox 之间的数据绑定出了问题。最后我找到了原因并可以解决它。我使用的转换器：

```
using System;
using System.Globalization;
using System.Windows.Data;
using System.Threading;

namespace SiderExampleVerticalV2
{
    internal class FixCulture
    {
        internal static System.Globalization.NumberFormatInfo currcult
                = Thread.CurrentThread.CurrentCulture.NumberFormat;

        internal static NumberFormatInfo nfi = new NumberFormatInfo()
        {
            /*because manual edit properties are not treated right*/
            NumberDecimalDigits = 1,
            NumberDecimalSeparator = currcult.NumberDecimalSeparator,
            NumberGroupSeparator = currcult.NumberGroupSeparator
        };
    }

    public class ToOneDecimalConverter : IValueConverter
    {
        public object Convert(object value,
            Type targetType, object parameter, CultureInfo culture)
        {
            double w = (double)value;
            double r = Math.Round(w, 1);
            string s = r.ToString("N", FixCulture.nfi);
            return (s as String);
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            string s = (string)value;
            double w;
            try
            {
                w = System.Convert.ToDouble(s, FixCulture.currcult);
            }
            catch
            {
                return null;
            }
            return w;
        }
    }
} 
```

在 XAML 中

```
<Window.Resources>
    <local:ToOneDecimalConverter x:Key="ToOneDecimalConverter"/>
</Window.Resources> 
```

进一步定义的 TextBox

```
<TextBox x:Name="TextSlidVolume"
    Text="{Binding ElementName=SlidVolume, Path=Value,
        Converter={StaticResource ToOneDecimalConverter},Mode=TwoWay}"
/> 
```

# javascript - 将数组转换为 Google Lat/Lng 数组？

> ID：10619599
> 
> 赞同：1
> 
> 时间：2012-05-16T13:28:14.807
> 
> 标签：javascript, google-maps

我有数组

```
[[[11.11,11.11],[22.22,22.22],[33.33,33.33]],[[11.11,11.11],[22.22,22.22],[33.33,33.33]]] 
```

我想做的就是把它转换成，

```
 var paths = [[
    new google.maps.LatLng(38.872886, -77.054720),
    new google.maps.LatLng(38.872602, -77.058046),
    new google.maps.LatLng(38.870080, -77.058604),
    new google.maps.LatLng(38.868894, -77.055664),
    new google.maps.LatLng(38.870598, -77.053346)
  ], [
    new google.maps.LatLng(38.871684, -77.056780),
    new google.maps.LatLng(38.871867, -77.055449),
    new google.maps.LatLng(38.870915, -77.054891),
    new google.maps.LatLng(38.870113, -77.055836),
    new google.maps.LatLng(38.870581, -77.057037)
  ]]; 
```

每个地方

```
[[11.11,11.11],[22.22,22.22],[33.33,33.33]] 
```

我的数组是一个新数组 Google LatLng Markers。

我试过在数组上使用 map 函数，如下所示：

```
 point.map(new google.maps.LatLng(point)) 
```

但是得到一个 NaN 错误。我是否需要打破每个点，或者我可以通过 map 之类的调用更流畅地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:36:45.450

嵌套循环？

```
var input = [
    [
        [11.11, 11.11],
        [22.22, 22.22],
        [33.33, 33.33]
    ],
    [
        [11.11, 11.11],
        [22.22, 22.22],
        [33.33, 33.33]
    ]
];
var paths = [];
for (var i = 0; i < input.length; i++) {
    var path = [];
    for (var j = 0; j < input[i].length; j++) {
        path.push(new google.maps.LatLng(input[i][j][0], input[i][j][1]));
    }
    paths.push(path);
}
console.dir(paths);​ 
```

# [演示在这里](http://jsfiddle.net/GMMCy/1/)

# python - 将 NoneType 分配给 Dict

> ID：10619600
> 
> 赞同：14
> 
> 时间：2012-05-16T13:28:16.273
> 
> 标签：python, list, dictionary, typeerror, nonetype

我正在尝试将 None 分配给 dict 中的一个键，但我得到一个 TypeError：

```
self._rooms[g[0]] = None
TypeError: 'NoneType' object does not support item assignment 
```

我的代码在这里：

```
r = open(filename, 'rU')
    for line in r:
        g = line.strip().split(',')
        if len(g) > 1:
            r1 = g[0]
            h = Guest(g[1], str2date(g[2]), str2date(g[3]))
            self._rooms.set_guest(r1, h)
        else:
            self._rooms[g[0]] = None
    r.close() 
```

在它让我分配之前，但不是它不会。它很奇怪 ：/

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-16T13:30:10.283

例外清楚地表明`TypeError: 'NoneType' object does not support item assignment`这表明`self._rooms`实际上是`None`

编辑：正如你自己所说

```
self._rooms = {} 
```

或者

```
self._rooms = dict() 
```

将做你需要清除字典

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T13:30:56.860

检查`self._rooms`不是`None`。

将值分配`None`给 a`dict`的键实际上是有效的：

```
In [1]: dict(a=None)
Out[1]: {'a': None} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T13:45:45.807

From reading your comments to Jakob, I gather that the culprit is this line (not posted)

```
d = self._rooms 
self._rooms = d.clear() 
```

`d.clear()` will clear the dictionary `d` (and `self._rooms`) in place and return `None`. Thus, all said an done, `d` is an empty dictionary and `self._rooms` is `None`.

The cleanest solution to this is:

```
self._rooms.clear()  #No need for assignment here! 
```

especially since `self._rooms` appears to have inherited from `dict` -- so it may have other attributes that you don't want to lose by doing:

```
self._rooms={}  #Now this is just a dict, no longer has `set_guest` method! 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T13:30:35.123

它可能是在抱怨`self._rooms`，我怀疑是`None`。

# symfony1 - 有没有更好的教程来学习 symfony 1.4？

> ID：10619607
> 
> 赞同：2
> 
> 时间：2012-05-16T13:28:46.953
> 
> 标签：symfony1, symfony-1.4

虽然有 jobeet 教程，但我正在寻找更好的教程来学习和理解 Symfony 1.4。我尝试了 jobeet 教程，但是在学习教程时，我在设置 route.yml 时迷失了方向。如果有更好的教程，有人可以建议我吗？[先感谢您]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:48:33.933

最初的 Symfony Book [http://www.symfony-project.org/book/1_2/](http://www.symfony-project.org/book/1_2/)仍然是一个非常好的资源。某些功能已被贬低，但从概念上讲，它是框架的明确指南。我希望它能够延续到 1.4 和 2.0 版本，因为它是比所有其他单个资源更好的单一资源。

最大的变化领域是表格，完全忽略本书中的这一部分并使用：[http ://www.symfony-project.org/forms/1_4/en/](http://www.symfony-project.org/forms/1_4/en/)

最后，新增功能教程详细介绍了所有更改。 [http://www.symfony-project.org/tutorial/1_4/en/whats-new](http://www.symfony-project.org/tutorial/1_4/en/whats-new)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:32:45.633

你试过[温柔的介绍](http://www.symfony-project.org/gentle-introduction/1_4/en/)吗？

# html - 这个简单的差距是如何实现的？

> ID：10619610
> 
> 赞同：2
> 
> 时间：2012-05-16T13:28:53.247
> 
> 标签：html, css

我开始使用 Bootstrap 和一般的 HTML。

[查看 Bootstrap](http://twitter.github.com/bootstrap/index.html)的主页，是什么导致了`<div class="navbar navbar-fixed-top">`和之间的 ~50px 差距`<div class="container">`？

![在此处输入图像描述](../Images/8b0de35228483b3a7b1b22e8f6f95ff6.png)

浏览了chrome中的DOM结构，看不出是哪个元素造成了缝隙？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T13:31:24.870

它是由元素的`padding-top`属性引起的`body`，当前设置为 90px。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T13:34:53.953

这是由 90px 的 padding-top 应用到 body 元素引起的。

他们这样做的原因是因为顶部栏是一个固定元素，并且为了确保页面的其余部分在页面加载时不会隐藏在下面，应用了 padding-top 来将页面的其余部分向下推。

# ios - 在 iOS 中使用核心数据映射业务对象

> ID：10619613
> 
> 赞同：1
> 
> 时间：2012-05-16T13:29:09.210
> 
> 标签：ios, core-data, mapping

我是 iOS 新手。谁能告诉我如何将我的 BO 与 Core Data 映射，以便我可以在我的项目中重用映射。这是我的代码

```
- (void) saveData
{       
    CoredataAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];

    NSManagedObjectContext *context = [appDelegate managedObjectContext];

    NSManagedObject *newContact;

    newContact = [NSEntityDescription insertNewObjectForEntityForName:@"Person" inManagedObjectContext:context];

    [newContact setValue:firstName.text forKey:@"firstName"];
    [newContact setValue:lastName.text forKey:@"lastName"];
    [newContact setValue:driverLicenceno.text forKey:@"driverLicenceNumber"];
    [newContact setValue:state.text forKey:@"state"];
    [newContact setValue:phoneNO.text forKey:@"phoneNumber"];
    [newContact setValue:injuryStatus.text forKey:@"injuryStatus"];
    [newContact setValue:emailAddress.text forKey:@"emailAddress"];

    NSLog(@"fName%@",firstName.text);
    firstName.text = @"";
    NSLog(@"fName%@",firstName.text);
    lastName.text = @"";
    driverLicenceno.text = @"";
    state.text = @"";
    phoneNO.text = @"";
    injuryStatus.text = @"";
    emailAddress.text = @"";

    NSError *error;
    [context save:&error];
    status.text = @"Person saved";
} 
```

除了这个之外，还有其他方法可以将我的 BO 与 coredata 映射吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T07:15:42.090

首先你必须创建你已经创建的 Coredata db。接下来在 coredata 模型的实体面板中选择表。右键单击项目层次结构树中的模型。选择新文件，选择 coredata 和 NSManagedObjectSubclass 然后保存。它为您可以在方法中使用的 coredata 表创建模型类。![在此处输入图像描述](../Images/5f21ad303cc7ba07d7ec83c718034f09.png)

此图像显示选择 db 和 table 以右键单击并选择 NSManagedObjectSubClass

![在此处输入图像描述](../Images/830432843474a68bb7fd2f61e309bd02.png)

此图像显示了第一个 coredata 的选择，而不是 NSManagedObjectSubClass，然后当您单击下一步时，它会显示面板以提供名称并将其保存在您的项目中。我希望这对你有帮助谢谢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T07:55:45.400

> 告诉我如何在核心数据中应用 sql 查询，如更新、删除、查找第二个最大值、连接、查看等

由于 Core Data 涵盖了很多东西，我可以给出一些提示。

首先，处理 Core Data 意味着处理“存在”在一种名为`NSManagedObject`. 将其视为一种容器图，其中包含根据您创建的数据模型从文件（例如 sql 文件）中检索到的对象。除非您不保存上下文，否则更改将驻留在内存中并且不会物理存储。

```
[moc save:&error]; 
```

使用`NSManagedObject`可以创建、更新、查询或删除对象。当然，还可以做其他事情。

如果您需要插入一个新的托管对象（在您的数据模型中声明），您可以使用`insertNewObjectForEntityForName:inManagedObjectContext:`.

如果你需要执行查询，你需要看看`NSFetchRequest`类。设置 a`NSFetchRequest`相当于 SQL 语言中的 SELECT 语句。

这里有一个简单的例子：

```
NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:[NSEntityDescription entityForName:@"Person" inManagedObjectContext:moc]];

NSError *error = nil;
NSArray *results = [moc executeFetchRequest:request error:&error];

// error handling code 
```

该数组`results`包含 sqlite 文件中包含的所有托管对象（人员）。如果要获取特定对象（或更多对象），则需要对该请求使用谓词。例如：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"firstName == %@", @"John"];
[request setPredicate:predicate]; 
```

在这种情况下`results`，包含属性等于的对象（人）`John`。设置谓词等于将 WHERE 子句放在 SQL 语句中。

如果您想设置连接、视图等，您需要`NSPredicates`在实体之间正确执行（基于关系和属性）并让 Core Data 为您执行行内容。

如果你需要删除一个对象，你需要这样做：

```
[moc deleteObject:managedObjectToDelete]; 
```

如果您需要更新一个托管对象，您必须创建一个获取请求并检索您正在寻找的对象（例如，您可以为每个对象提供一个特定的 id 并使用您想要的 id 设置一个谓词）。如果 fetch 请求检索到一些对象，那么您可以更新它们。

这些是指导您使用 Core Data 的简单技巧。我建议你阅读[核心数据编程指南](http://developer.apple.com/library/iOS/#documentation/Cocoa/Conceptual/CoreData/cdProgrammingGuide.html)。在那里你可以找到很多东西。如果您愿意，可以从有关使用 Core Data 的优秀教程开始，请访问[www.raywenderlich.com](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)。

如果你想要别的东西，请告诉我。

希望能帮助到你。

# jquery - 需要jQuery自动功能

> ID：10619618
> 
> 赞同：3
> 
> 时间：2012-05-16T13:29:22.573
> 
> 标签：jquery, html, css

我为我的网站创建了简单的滑块，这里的演示效果很好 [http://jsfiddle.net/Kxnh3/1/](http://jsfiddle.net/Kxnh3/1/)

现在我想用这个滑块自动工作吗？任何的想法 ？

```
jQuery(document).ready(function() {
     jQuery('.sliderBtn li:eq(0) a').click(function()
     {
     jQuery('.sliderBtn li:eq(0)').addClass('activeSlide');
     jQuery('.sliderBtn li:eq(1)').removeClass('activeSlide');
     jQuery('#homeSliderSlideshow').animate({'left':'0'},'slow');
     });

     jQuery('.sliderBtn li:eq(1) a').click(function()
     {
     jQuery('.sliderBtn li:eq(0)').removeClass('activeSlide');
     jQuery('.sliderBtn li:eq(1)').addClass('activeSlide');
     jQuery('#homeSliderSlideshow').animate({'left':'-100px'},'slow');
     });

}); 
```

HTML：

```
<div class="wraper">
    <ul id="homeSliderSlideshow">
        <li>
            <div>1</div>
            <div>2</div>
            <div>3</div>
            <div>4</div>
        </li>
    </ul>
</div>

<div class="sliderBtn">
    <ul>
        <li class="activeSlide">
            <a href="#">1</a>
         </li>
        <li>
            <a href="#">2</a>
         </li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:36:07.917

```
jQuery(document).ready(function() { 

    var value=0;
    setInterval(function(){
        value=value==0?-100:0;

        if(value==0)
        {
           jQuery('.sliderBtn li:eq(0)').addClass('activeSlide');
           jQuery('.sliderBtn li:eq(1)').removeClass('activeSlide');
        }else if(value==-100){
           jQuery('.sliderBtn li:eq(1)').removeClass('activeSlide');
           jQuery('.sliderBtn li:eq(0)').addClass('activeSlide');
        }

        jQuery('#homeSliderSlideshow').animate({'left': value + 'px'},'slow');
    },2000);

}); 
```

[演示](http://jsfiddle.net/ankur20us/P8ex3/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:04:57.060

# *[演示 jsBin](http://jsbin.com/irowab/edit#javascript,html,live)*

```
(function($){  // remap '$' to jQuery

  $(document).ready(function(){

    var c = 0;
    var t;
    var n = $('#homeSliderSlideshow li div').length/2;

    function actives(){
      $('.sliderBtn li:eq('+c+')').addClass('activeSlide');
      $('.sliderBtn li:eq('+c+')').siblings('li').removeClass('activeSlide');
    } 

    function anim(){
        $('#homeSliderSlideshow').animate({left : -(c*104)},800);        
    }

    function autoAnim(){
            t = setTimeout(function(){
                c=++c%n;
                actives();
                anim();
                autoAnim();
            },2000);
    }
    autoAnim();

    $('.sliderBtn li').click(function(e){
        e.stopPropagation();
        clearTimeout(t);
        c = $(this).index();
        actives();
        anim();
        return false;
    });

});

 })(jQuery); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T13:35:33.867

查看[setInterval](https://developer.mozilla.org/en/DOM/window.setInterval)函数，您可以使用它每隔几秒循环一次幻灯片。

# css - 无法居中 标签

> ID：10619621
> 
> 赞同：2
> 
> 时间：2012-05-16T13:29:30.717
> 
> 标签：css, html

我已经尝试了该站点上的所有内容，以使我的 yahoo 管道在页面上居中，而不将文本居中在管道内，并且没有任何效果。我真的需要另一双眼睛看这个！这是我的代码：

CSS：

```
#pipe_container{
    width: 850px;
    height: 350px;
    position: relative;
    margin-left: auto;
    margin-right: auto;
    background-color: #fff;
    text-align: center;
}

#event_pipe {  
    position: relative;
    text-align:left;
    width:100%px;  
    height:350px;  
    background-color:#888;
    padding:0px;
    margin: 0px 20px 20px 20px;
} 
```

的HTML：

```
 <div id="pipe_container">
   <div id="event_pipe">     
       <script src="http://l.yimg.com/a/i/us/pps/listbadge_1.6.js">
        { 
          "pipe_id":"2a44070dcf6974aea04ad155a76caef4",
          "_btype":"list",
          "width":"80%",
          "height":"350px"
        }
      </script>
   </div>
</div> 
```

我不能在“event_pipe”代码中使用居中属性，因为它会居中所有内容，包括文本。我希望文本保持在左侧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:42:50.660

我无法使用 CSS 让它工作。我不得不将它作为参数传递给管道：

```
 <div id="pipe_container">
   <div id="event_pipe">     
       <script src="http://l.yimg.com/a/i/us/pps/listbadge_1.6.js">
        {
          "pipe_id":"2a44070dcf6974aea04ad155a76caef4",
          "_btype":"list",
          "width":"80%",
          "height":"350px",
          "margin":"auto"
        }
      </script>
   </div>
</div> 
```

注意 JSON 的最后两行：

```
"height":"350px",
"margin":"auto" 
```

这就是诀窍。

[这是工作 jsFiddle 的链接](http://jsfiddle.net/nhdwk/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:34:43.980

尝试将 #event_pipe 规则更改为：

```
#event_pipe > div {  
    position: relative;
    text-align:left;
    width:100%px;  
    height:350px;  
    background-color:#888;
    padding:0px;
    margin: 0px auto;
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T13:36:52.940

添加你的风格：

```
#event_pipe div:first-child {
          margin: 0px auto;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T13:38:14.867

把它放在你的 head 部分进行本地测试，以防止它进入怪癖模式。

```
<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
```

并尝试这个 css

```
#pipe_container{
  width: 850px;
  height: 350px;
  position: relative;
  margin:0 auto;
  background-color: #fff;
  text-align: center;
 }
#event_pipe > div{
  margin:0 auto;
 }
#event_pipe {  
position: relative;
text-align:left; 
height:350px;  
background-color:#888;
padding:0px;
margin: 0px 20px 20px 20px;
} 
```

# java - Spring 表达式语言 (SpEL)：将 String 解析为 int

> ID：10619624
> 
> 赞同：12
> 
> 时间：2012-05-16T13:29:42.077
> 
> 标签：java, spring, spring-el

我有一个 ( `String`，显然) 以分钟表示的属性，我想`int`在进行一些算术运算并将其注入我的 Spring bean 之前将其转换为。现在我有这个 SpEL 表达式：

```
#{T(java.lang.Integer).parseInt(myProperties['MIN_TIME']) * 60 * 1000} 
```

哪里`myProperties`是一个简单的`java.util.Properties`bean。

并不是说我对这个表达式特别恼火，但尽管如此：SpEL 是否有一种更漂亮的内置方法来将字符串解析为数值？

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-16T13:55:48.873

看起来不像，例如看看开发人员如何在这里创建它们：[https ://jira.springsource.org/browse/SPR-8716](https://jira.springsource.org/browse/SPR-8716)

稍短的版本可能是

```
#{new Integer(myProperties['MIN_TIME']) * 60 * 1000} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T07:52:15.613

另一种方法是使用 util 命名空间来定义一个属性 bean，... xmlns:util="http://www.springframework.org/schema/util" ... [http://www.springframework。 org/schema/util](http://www.springframework.org/schema/util) [http://www.springframework.org/schema/util/spring-util-3.1.xsd](http://www.springframework.org/schema/util/spring-util-3.1.xsd) ...

```
<util:properties id="apiProperties"
    location="classpath:/api.properties" /> 
```

然后使用属性 bean 的替代语法

```
@Value("#{apiProperties['api.orders.pingFrequency']}")
private Integer pingFrequency; 
```

由 context 生成的 spring util properties bean 将在分配值之前进行解析和转换。

# powershell - PowerShell - 全局变量有什么用？

> ID：10619628
> 
> 赞同：2
> 
> 时间：2012-05-16T13:30:00.170
> 
> 标签：powershell, global-variables

通常，这是一个微不足道的问题，可以通过简单搜索大多数编程语言来回答，但在 PowerShell 中，这并不容易。

如果通过点源包含脚本或包含模块，它们的脚本变量被转移到调用脚本中，那么拥有全局变量有什么意义呢？

有人可以为我澄清一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:36:37.647

不仅有范围的变量，还有函数定义。

让事物全球化的好处是每个人都可以使用它们。想象一下，您正在导入一个定义了一些功能的模块，但您无法使用它们。

关于模块中的全局变量......我很少使用它们，除非它们可以控制某些行为，比如`*Preference`PS 已经拥有的各种变量。

顺便说一句，在点源脚本时，您不一定要使范围全局化。点源只是*在当前范围内*执行一个脚本，而不是为该脚本创建一个脚本。因此，当在函数中点源某些东西时，您只能在该函数中从脚本中获取东西。

# cuda - 安装驱动程序 Cuda

> ID：10619631
> 
> 赞同：0
> 
> 时间：2012-05-16T13:30:07.897
> 
> 标签：cuda, nvidia, xserver

我必须为 Linux 安装 CUDA。我下载了工具包、驱动程序和 SDK。但是当我尝试安装 CUDA 驱动程序时，出现以下错误：

> 错误：您似乎正在运行 X 服务器；
> 请在安装前退出 X。

我使用 Ubuntu 10.04 LTS（32 位）
我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:38:05.433

对于 Ubuntu 10.04，假设您使用的是 Gnome 桌面环境，您需要停止`gdm`守护进程。从终端运行以下命令：

```
sudo service gdm stop 
```

这将停止`gdm`守护进程并将您带到一个裸终端（如果您想重新开始`gdm`，只需将`stop`参数替换为`start`参数）。像往常一样安装 CUDA 工具包、驱动程序和 SDK。完成后，重新启动计算机以确保您使用的是新驱动程序。

```
sudo reboot 
```

# android - 操作栏：膨胀新的菜单资源

> ID：10619635
> 
> 赞同：0
> 
> 时间：2012-05-16T13:30:17.567
> 
> 标签：android, menu, android-actionbar

我的应用中有一个`ActionBar`带有标签的应用程序。每个选项卡都有自己的`Fragment`.

在`Fragment`课堂上，`onCreateOptionsMenu`被调用，但只有一次。根据用户输入，我想在第一次调用*之后扩充一个新的菜单资源。*`onCreateOptionsMenu`

我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T13:49:59.130

您应该能够动态更改 ActionBar 菜单。在`onCreateOptionsMenu`.

当您需要重新运行逻辑调用时

```
invalidateOptionsMenu(); 
```

这将重新创建菜单项。

# blackberry - 验证文本字段以允许 upCase 作为首字母 - 黑莓

> ID：10619644
> 
> 赞同：0
> 
> 时间：2012-05-16T13:30:44.107
> 
> 标签：blackberry, uitextfield, validation

如何允许文本字段中输入的第一个字母为大写。或者是否可以在文本字段文本更改事件上进行更改。另外我想避免将空格作为第一个字符。（虽然它可以在文本中间使用）

这是用于测试其他参数的文本字段验证代码

```
 TextField1 = new TextField("\n Customer Name: ",null)
     {
            protected boolean keyChar(char ch, int status, int time) 
            {
            if (CharacterUtilities.isLetter(ch) || (ch == Characters.BACKSPACE || (ch == Characters.SPACE))) 
            {
            return super.keyChar(ch, status, time);
            }
           return true;
            }
        };
     add(TextField1); 
```

请指导。谢谢

重新编辑：

```
 AutoTextEditField auto = new AutoTextEditField("Name: ",EditField.NO_NEWLINE | Field.EDITABLE | AutoTextEditField.NON_SPELLCHECKABLE);

     add(auto); 
```

重新编辑 2：使用下面的代码可以防止输入任何空格（在开始时或之间）。此外，仍然没有验证 Caps 作为第一个字母。请参阅此[链接](https://stackoverflow.com/questions/1931475/blackberry-text-filter)了解我是如何得到以下想法的

```
BasicEditField bf = new BasicEditField("BasicEditField: ","", 10,EditField.FILTER_UPPERCASE); 
     class AlphaTextFilter extends TextFilter
    {
      public char convert(char c, int status) 
      {
      if (!validate(c))
           return 0;
           return c;
      }

       public boolean validate(char c) 
       {
         return CharacterUtilities.isLetter(c);
       }
    }
    bf.setFilter(new AlphaTextFilter());
    add(bf); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:47:25.687

使用`AutoTextEditField`而不是`TextField`与以下标志一起使用：`EditField.NO_NEWLINE | Field.EDITABLE | AutoTextEditField.NON_SPELLCHECKABLE`.

不要害怕真实价值前面的空格。只需要求`trim()`最终价值。

# bash - Kdialog 无法使用进度条中的 ffmpeg 取消作业，使用其他命令它可以工作：S

> ID：10619645
> 
> 赞同：0
> 
> 时间：2012-05-16T13:30:46.007
> 
> 标签：bash, ffmpeg

我做了一个脚本来用 ffmpeg 转换我的东西

它确实：

1 创建带有取消按钮的进度条 2 循环转换文件 3 设置进度值

它工作正常，但是当我单击取消时它不会停止 ffmpeg

奇怪的是，当我使用像 echo 这样的另一个程序时，它的工作方式就像是 ffmpeg 问题

谁能帮我找出诀窍？

```
listoffile="$HOME/ffmpeglist.lst"
numberoffile=$(wc -l <$listoffile)
ffmpegpath="/usr/bin/ffmpeg"

    mystufvariabletouseonmyscript=$(kdialog --progressbar "hello this is a progress bar with 100 steps" 100) ;  sleep 2 ; qdbus $mystufvariabletouseonmyscript  showCancelButton true

    until test "true" = `qdbus  $mystufvariabletouseonmyscript wasCancelled` ; do 

            while read line ; do
                qdbus $mystufvariabletouseonmyscript org.kde.kdialog.ProgressDialog.setLabelText $"Starting Conversion...processing file $line"

                $ffmpegpath -i   "$line"   "${line%%.*}.$mp3" 

                value=$(( $(($a*100))/$numberoffile ))
                qdbus  $mystufvariabletouseonmyscript Set org.kde.kdialog.ProgressDialog value $value
                a=$(($a+1))

                done< "$listoffile"

        done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-02T15:57:36.667

这是我的答案确保你已经设置了一个我为这个做的文件夹

/usr/share/sounds/ 但这是一个很好的例子，因为文件很短，所以......

```
ls -d -1 /usr/share/sounds/*.* > /tmp/listoffile.txt 
a=$(kdialog --title $"FFmpeg Dolphin Service Menu"  --progressbar $"Starting Conversion..." 100)
b=$(kdialog --title $"FFmpeg Dolphin Service Menu"  --progressbar $"Global work..." 100)

qdbus $b  showCancelButton true

qdbus $b org.kde.kdialog.ProgressDialog.autoClose true

numberoffile=$(wc -l <"/tmp/listoffile.txt")
echo $numberoffile
count=1

while  read <&3 line ; do 

    while read linetwo ; do
qdbus $a org.kde.kdialog.ProgressDialog.setLabelText $"Processing file..... $line"
        qdbus $a  showCancelButton true
        while [[  $(qdbus  $a wasCancelled) != "false" || $(qdbus  $b wasCancelled) != "false"  ]] ; do
            echo -e "$COL_RED ECHO KILLING AXEL AND KDIALOG $COL_RESET"
            qdbus $a  org.kde.kdialog.ProgressDialog.close 
            qdbus $b  org.kde.kdialog.ProgressDialog.close 
            exit
        done

        qdbus  $a Set org.kde.kdialog.ProgressDialog value  "$linetwo"

    done < <((pv -W -n "$line" | ffmpeg -y ciao.flac -i pipe:0 2>/tmp/logffm.lst) 2>&1 )
    v=$(( $(($count*100))/$numberoffile ))
    echo $(($count*100)) and 
    count=$(($count+1))
    echo "qdbus  $b Set org.kde.kdialog.ProgressDialog value $v"
    qdbus  $b Set org.kde.kdialog.ProgressDialog value $v

done 3<"/tmp/listoffile.txt" 
```

# sql-server - 从数据库日志中排除表

> ID：10619646
> 
> 赞同：2
> 
> 时间：2012-05-16T13:30:47.147
> 
> 标签：sql-server, recoverymodel

我们的产品包含多个包含自定义应用程序安全信息的表格。在某些情况下，这些 securityinfo 表可能包含大量行（在一种情况下为 1300 万行），这些表用于加快查询速度，并且可能从头开始重建，但这在时间/处理能力等方面代价高昂。

应用程序的设计方式，更有效（在程序运行期间）删除安全部分的记录，然后插入新记录，而不是识别要保留/更新的记录并插入不存在的记录.

不幸的是，当数据库恢复模式设置为完整时，此过程会生成大量事务日志。

在 SQL 2005+ 中是否有可能在具有完整恢复模式的数据库中拥有一个未记录的表（简单恢复模式）？

我们可以在 Web 应用程序/数据库首次启动时重建 securityinfo 表以防恢复。

或者，具有简单恢复模型的并行数据库是最佳解决方案。

干杯蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:39:56.717

据我所知，只能为每个数据库设置恢复模型，可能是因为事务日志是针对整个数据库的。或者正如[BOL 所说](http://msdn.microsoft.com/en-us/library/ms189275.aspx)：

> 恢复模型是一种**数据库**属性，它控制如何记录事务、事务日志是否需要（并允许）备份以及可用的恢复操作类型。

（重点是我的）。因此，您最好的选择是将这个特定的表移动到另一个数据库，或者查看内存中的数据库/缓存，因为该表听起来像是可以从权威数据源轻松重建的缓存。

# asp.net - IIS，数据传输不完整，状态码400

> ID：10619650
> 
> 赞同：3
> 
> 时间：2012-05-16T13:31:16.460
> 
> 标签：asp.net, iis, http-post

我注意到我的 ASP.Net aspx 页面（在 IIS7.5 上运行）有时会收到 http POST 请求，其中标头中的内容长度与 Request.InputStream.Length 不同。

有时实际长度为 0，有时 > 0，但对于这些请求，绝对 != http 标头中声称的长度。（本页面的客户端使用的是http 1.0，所以与100 continue状态无关，不是浏览器。）。

我曾认为这种格式错误的请求永远不会被我的 asp.net 页面处理 - IIS 会在较低级别返回 400（或类似的东西）。

这种情况对您来说是否正确，如果是，是否可以切换开关以在 asp.net 中进行全局检查，这样我的页面就不会尝试处理不完整的数据，还是必须在代码中手动完成？

如果相关，客户端正在提交 ContentType = "application/text", Keep-Alive = false 的数据。

非常感谢。

# ios - 删除功能类似于 iOS 删除消息

> ID：10619653
> 
> 赞同：-1
> 
> 时间：2012-05-16T13:31:24.927
> 
> 标签：ios, ios5, imessage

我在 UITableView 中有一个要删除的项目列表，有没有办法重用与 iPhone 中的删除消息类似的删除功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T13:36:06.957

您将需要实现一些 UITableViewDelegate 方法，例如：

```
- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath 
```

要提供编辑和删除单元格的默认功能，您需要在导航栏中包含编辑按钮，例如：

```
[[self navigationItem] setLeftBarButtonItem:[self editButtonItem]]; 
```

这应该满足您正在寻找的大多数“默认”实现，当然还有一些修改来环绕您的代码:)

# jquery-mobile - jQuery移动外部链接问题

> ID：10619655
> 
> 赞同：2
> 
> 时间：2012-05-16T13:31:34.967
> 
> 标签：jquery-mobile, hyperlink

我是 jQuery 移动平台的新手。

我面临一个问题。我有一个关于我们的页面，其中有一个链接，比如 google.com 当我在任何浏览器上运行此页面时，它都运行良好。但是，当我对此进行构建并将其部署在 ipad 上时，它无法正常工作。

我很困惑为什么会发生这种情况。

以下是我的代码片段

```
<h3 align="center"><a href="http://www.google.com" class="ui-link-inherit ui-link" target="_new">www.google.com</a></h3> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:33:55.403

我知道这是旧的，但它`<a href="link here" target="new">`

或者

```
<a href="link here" target="_blank"> 
```

此外，如果它的 jquery mobile，您必须在链接中添加“rel=external”。

所以它会是`<a href="link here" rel="external">`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:36:56.840

您应该使用`target="_blank"`而不是`target="_new"`最后一个不存在。

# c# - 在c#中插入语句

> ID：10619657
> 
> 赞同：0
> 
> 时间：2012-05-16T13:31:41.563
> 
> 标签：c#, sql, database

我想创建一个 SQL 语句，该语句将从文本框中获取的值插入到该列中的任何值为 NULL 的列中

我正在用 C# 做，我想知道是否有人可以帮助我......我写了一个伪代码版本的命令：

```
string newPhoneNumber = textBox.Text;
SqlCommand cmd = new SqlCommand(
"INSERT INTO table ([Tag ID]) 
 VALUES ('" + newPhoneNumber + "')"; 
 WHERE columnName = NULL" 
cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T13:33:45.543

使用 is NULL 而不是等于 NULL ：

```
WHERE columnName IS NULL 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-16T13:37:13.363

首先，使用**SQL 参数**。这将防止[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)。不敢相信还没有人提到这一点。5个答案，到目前为止，我是唯一一个提到这一点的人。

像这样构造你的命令：

```
SqlCommand cmd = new SqlCommand(
"INSERT INTO table ([Tag ID]) SELECT TOP 1 @newPhoneNumber FROM [table] WHERE columnName IS NULL");
cmd.Parameters.Add("@newPhoneNumber", Sqldbtype.nvarchar).Value = textBox.Text;
cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-16T13:34:11.843

## 您不能使用`Insert Query`with`Where`子句

由于您的价值观已经存在，即使您`ColumnName IS NUll`按照其他答案所说的那样写，它也行不通。

你必须使用`Update query`

```
"Update tablename set first_field_name = first_value, 
  second_field_name = second_field_value WHERE columnName IS NULL"; 
```

而且`NULL`不是一个值。它是一种状态。这意味着（在前端）尚未分配内存。

例如 C# 中的字符串 - 如果未分配内存，则它们为空。他们没有空值。

**与问题相关的注意/警告，与答案无关：**

始终注意[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)。使用参数化查询（带有@的查询）。

[更多关于 SQL 注入](http://msdn.microsoft.com/en-us/library/ms161953%28v=SQL.90%29.aspx)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-16T13:34:55.513

使用此查询，使用**IS** NULL。

```
"INSERT INTO table ([Tag ID]) VALUES (@PhoneNumber) WHERE columnName IS NULL" 
```

使用 ParametrizedCommand，您在其他答案中有示例。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-16T14:01:12.830

有2个问题。在 SQL 中，NULL 不等于任何东西，甚至不等于 NULL。即`NULL = NULL`是错误的。所以第一个问题是`WHERE ColumnName = NULL`

其次，SQL 的语法无效。使用时不能指定 where 子句`INSERT .. VALUES`，必须使用`SELECT .. WHERE`or `IF.. ELSE`。例如

```
INSERT INTO table ([Tag ID])
SELECT  TOP 1 @PhoneNumber
FROM    YourTable 
WHERE   YourColumn IS NULL 
```

**或者**

```
IF EXISTS (SELECT 1 FROM YourTable WHERE YourColumn IS NULL)
    BEGIN
        INSERT Table ([tAG id]) VALUES(@PhoneNumber)
    END 
```

在这两个示例中都是Exists in`YourTable`的表。`YourColumn`

最后，尽可能避免在构建 SQL 语句时使用字符串连接。

```
string sql = // One of the queries above
cmd.CommandText = sql
cmd.Parameters.Add("@PhoneNumber", SqlDbType.Varchar).Value = textBox.Text;
cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-16T13:58:16.170

使用LINQ to SQL，自动使用参数，消除SQL注入的危险。

它也比连接 SQL 语句更容易使用。

[使用 LINQ to SQL 是否有助于防止 SQL 注入](https://stackoverflow.com/q/473173/138938)

[如何：将行插入数据库 (LINQ to SQL)](http://msdn.microsoft.com/en-us/library/bb386941.aspx)

# asp.net - Asp.net httpcontext 及其与 IIS 的配合

> ID：10619661
> 
> 赞同：0
> 
> 时间：2012-05-16T13:32:00.500
> 
> 标签：asp.net

谁能给我一个很好的链接来了解“什么是 Http Context”。它何时创建以及如何工作？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:35:04.547

熟悉使用[MSDN](http://msdn.microsoft.com/en-us/library/gg145045)。

具体对于 HttpContext，请参阅[http://msdn.microsoft.com/en-us/library/system.web.httpcontext.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:35:27.307

看看[MSDN - HttpContext 类](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.aspx)

# drupal - Drupal 如何记录内容创建者的 IP 地址

> ID：10619666
> 
> 赞同：0
> 
> 时间：2012-05-16T13:32:18.323
> 
> 标签：drupal, drupal-7

我正在创建一个允许匿名上传图像的网站。我正在使用 drupal 7，我几乎完成了网站的创建。我现在需要一种方法来记录每个节点的创建者的 IP 地址。有没有一种简单的方法可以做到这一点？也许到一个隐藏的领域？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:16:40.653

启用 dblog 模块（核心）后，您可以跟踪大部分操作，包括创建到数据库的节点（db 中的 watchdog 表）。

我会创建一个视图（使用视图模块）来列出所有节点创建消息，让生活更轻松。然后，您可以跟踪谁从哪个 IP 创建了哪个节点。不过，这完全取决于您。

但是，请注意，这些记录在达到特定数量的**总记录**后会被删除。您可以在管理员设置中更改此值。

# url - 在 php 邮件中发送 url

> ID：10619670
> 
> 赞同：4
> 
> 时间：2012-05-16T13:32:22.337
> 
> 标签：url, phpmailer, php

我发送了一个 mp3 文件下载 url，该 url 从数据库中获取并邮寄给 php 中的用户。当链接被触发给用户时，

*   一些链接包含“！” 标记并且不生成超链接。
*   在某些链接中，下载了 download.php 文件。

笔记：

当我打印发送到邮件的消息时，所有链接都工作正常。只有邮件的问题。我检查了雅虎和 Gmail。两者在相同的文件中都有相同的问题。

`$this->_res['Song_Info']`包含所有mp3文件的名称、链接等信息...

```
$emailto = "xxxx@yahoo.com";
$user_name = $this->_res['User_Info']['Name'];
$header = "MIME-Version: 1.0" . "\r\n";
$header.= "Content-type:text/html;charset=iso-8859-1" . "\r\n";
$header.= "From:no-reply@example.com\r\n";
header.= "Bcc: yyy@gmail.com\r\n";
$message = "<table>";
$message = $message. "<tr><th align='left' colspan='3'>Dear user</th><tr>";
$message = $message."<tr><td colspan='3'>Here is the Download links</td></tr>";
$message = $message."<tr><td colspan='3'></td></tr>";
    foreach ($this->_res['Song_Info'] as $key => $value) {
        $message = $message."<tr><td colspan='3'><a href='www.example.com/download.php?dlink='.trim($value['Song_Url'])."'>".trim($value['Song_Name'])."<a></td></tr>";
    }
$message = $message."<tr><td colspan='3'></td></tr>";
$subject = "Download Links";
mail($emailto,$subject,$message,$header); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:36:34.463

更改以下两行，然后检查

1) $ 丢失

```
$header.= "Bcc: yyy@gmail.com\r\n"; 
```

2) 字符串断了

```
$message = $message.'<tr><td colspan="3"><a href="www.example.com/download.php?dlink='.trim($value['Song_Url']).'">'.trim($value['Song_Name']).'<a></td></tr>'; 
```

Also make sure when you run any songfile url with download.php?dlink=something it should download song. If it is not working check [http://www.zubrag.com/scripts/download.php](http://www.zubrag.com/scripts/download.php) or [[http://www.finalwebsites.com/forums/topic/php-file-download](http://www.finalwebsites.com/forums/topic/php-file-download)

# android - Android：java.lang.RuntimeException：无法实例化活动 ComponentInfo：java.lang.NullPointerException

> ID：10619675
> 
> 赞同：0
> 
> 时间：2012-05-16T13:32:45.563
> 
> 标签：android, audio, audio-streaming, audio-recording, audiorecord

我正在尝试录制音频，之后应该立即播放录音。我要去哪里错了。请帮帮我。我没有得到。显示空指针异常...

这是代码

```
import android.app.Activity;
import android.media.AudioFormat;
import android.media.AudioManager;
import android.media.AudioRecord;
import android.media.AudioTrack;
import android.media.MediaRecorder;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.LinearLayout;

public class Audio_testActivity extends Activity {
private String LOG_TAG = null;

/* variables which are required to generate and manage the UI of the App */
// private RecordButton mRecordButton = null;
private Button recordBtn, stopBtn, playBtn;

/*
 * variables which are required for the actual functioning of the recording
 * and playing
 */
private AudioRecord recorder = null;
private AudioTrack player = null;
private AudioManager audioManager = null;
private int recorderBufSize, recordingSampleRate;
private int trackBufSize;
private short[] audioData;
private boolean isRecording = false, isPlaying = false;
private Thread startRecThread;

private AudioRecord.OnRecordPositionUpdateListener posUpdateListener;

/**
 * constructor method for initializing the variables
 */
public Audio_testActivity() {
    super();
    LOG_TAG = "Constructor";
    recorderBufSize = recordingSampleRate = trackBufSize = 0;

    // init function will initialize all the necessary variables ...
    init();

    if (recorder != null && player != null) {
        Log.e(LOG_TAG, "recorder and player initialized");
        audioData = new short[recorderBufSize / 2]; // since we r reading
                                                    // shorts

    } else {
        Log.e(LOG_TAG, "Problem inside init function ");
    }
    posUpdateListener = new AudioRecord.OnRecordPositionUpdateListener() {
        int numShortsRead = 0;

        @Override
        public void onPeriodicNotification(AudioRecord rec) {
            // TODO Auto-generated method stub
            // String LOG_TAG = Thread.currentThread().getName();
            // Log.e(LOG_TAG, "inside position listener");
            audioData = new short[recorderBufSize / 2]; // divide by 2 since
                                                        // now we are
                                                        // reading shorts
            numShortsRead = rec.read(audioData, 0, audioData.length);
            player.write(audioData, 0, numShortsRead);

        }

        @Override
        public void onMarkerReached(AudioRecord recorder) {
            // TODO Auto-generated method stub
            Log.e(LOG_TAG, "Marker Reached");
        }
    };
    // listener will be called every time 160 frames are reached
    recorder.setPositionNotificationPeriod(160);
    recorder.setRecordPositionUpdateListener(posUpdateListener);

    Log.e(LOG_TAG, "inside constructor");
}

private void init() {
    LOG_TAG = "initFunc";
    // int[] mSampleRates = new int[] { 8000, 11025, 22050, 44100 };
    short audioFormat = AudioFormat.ENCODING_PCM_16BIT;
    // for (int rate : mSampleRates) {
    this.recordingSampleRate = AudioTrack
            .getNativeOutputSampleRate(AudioManager.STREAM_MUSIC);
    try {
        // Log.d(LOG_TAG, "Attempting rate " + rate + "Hz, bits: " +
        // audioFormat);
        int bufrSize = AudioRecord.getMinBufferSize(
                this.recordingSampleRate, AudioFormat.CHANNEL_IN_MONO,
                audioFormat);

        // lets find out the minimum required size for AudioTrack
        int audioTrackBufSize = AudioTrack.getMinBufferSize(
                this.recordingSampleRate, AudioFormat.CHANNEL_OUT_MONO,
                audioFormat);

        if (bufrSize != AudioRecord.ERROR_BAD_VALUE
                && bufrSize != AudioRecord.ERROR) {
            // check if we can instantiate and have a success
            if (audioTrackBufSize >= bufrSize) {
                this.recorderBufSize = audioTrackBufSize;
            } else {
                this.recorderBufSize = bufrSize;
            }

            AudioRecord rec = new AudioRecord(
                    MediaRecorder.AudioSource.DEFAULT,
                    this.recordingSampleRate, AudioFormat.CHANNEL_IN_MONO,
                    audioFormat, this.recorderBufSize);

            if (rec != null
                    && rec.getState() == AudioRecord.STATE_INITIALIZED) {

                // storing variables for future use . . .
                // this.recordingSampleRate = rate;
                // this.recorderBufSize = bufrSize;

                Log.e(LOG_TAG,
                        "Returning..(rate:channelConfig:audioFormat:recorderBufSize)"
                                + this.recordingSampleRate + ":"
                                + AudioFormat.CHANNEL_IN_MONO + ":"
                                + audioFormat + ":" + this.recorderBufSize);

                // Now create an instance of the AudioTrack
                // int audioTrackBufSize = AudioTrack.getMinBufferSize(rate,
                // AudioFormat.CHANNEL_OUT_MONO, audioFormat);

                Log.e(LOG_TAG, "Audio Record / Track / Final buf size :"
                        + bufrSize + "/ " + audioTrackBufSize + "/ "
                        + this.recorderBufSize);

                this.player = new AudioTrack(AudioManager.STREAM_MUSIC,
                        this.recordingSampleRate,
                        AudioFormat.CHANNEL_OUT_MONO, audioFormat,
                        this.recorderBufSize, AudioTrack.MODE_STREAM);

                this.recorder = rec;
                this.player.stop();
                this.player.flush();
                this.player.setPlaybackRate(this.recordingSampleRate);
                return;
            }
        }
    } catch (IllegalArgumentException e) {
        Log.d(LOG_TAG,
                this.recordingSampleRate + "Exception, keep trying.", e);
    } catch (Exception e) {
        Log.e(LOG_TAG, this.recordingSampleRate + "Some Exception!!", e);
    }
    // for loop for channel config ended here. . . .
    // for loop for audioFormat ended here. . .
    // }// for loop for sampleRate
    return;
}

private void startPlaying() {
    LOG_TAG = "startPlaying";

    Log.e(LOG_TAG, "start Playing");
}

private void stopPlaying() {
    LOG_TAG = "stopPlaying";

    Log.e(LOG_TAG, "stop Playing");
}

private void startRecording() {
    LOG_TAG = "startRecording";

    /* start a separate recording thread from here . . . */
    startRecThread = new Thread() {
        @Override
        public void run() {
            // TODO Auto-generated method stub
            android.os.Process
                    .setThreadPriority(android.os.Process.THREAD_PRIORITY_URGENT_AUDIO);
            // String LOG_TAG = Thread.currentThread().getName();
            if (recorder.getRecordingState() != AudioRecord.RECORDSTATE_RECORDING) {
                recorder.startRecording();
            }
            // Log.e(LOG_TAG, "running" +recorder.getRecordingState());
            while (recorder.getRecordingState() == AudioRecord.RECORDSTATE_RECORDING) {
                recorder.read(audioData, 0, audioData.length);
                try {

                    Thread.sleep(1000); // sleep for 2s
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    Log.e("run Method", "recorder thread is interrupted");
                    e.printStackTrace();
                }
            }
        }
    };
    setVolumeControlStream(AudioManager.STREAM_MUSIC);
    audioManager.setSpeakerphoneOn(false);
    player.flush();
    player.play();
    startRecThread.start();

    Log.e(LOG_TAG, "start Recording");
}

private void stopRecording() {
    LOG_TAG = "stopRecording";
    recorder.stop();

    if (startRecThread != null && startRecThread.isAlive()) {
        startRecThread.destroy();
        startRecThread = null;
    }

    player.stop();
    player.flush();
    Log.e(LOG_TAG, "stop Recording");
}

private void stop() {
    if (isRecording) {
        isRecording = false;
        stopRecording();
    }
    if (isPlaying) {
        isPlaying = false;
        stopPlaying();
    }
    recordBtn.setEnabled(true);
    playBtn.setEnabled(true);
}

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    LOG_TAG = "onCreate";
    // Log.e(LOG_TAG, "Create Called");
    // getting the audio service
    audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);
    LinearLayout ll = new LinearLayout(this);

    // creating Buttons one by one . . . .
    // button to start the recording process
    recordBtn = new Button(this);
    recordBtn.setText("Record");
    recordBtn.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            // TODO Auto-generated method stub
            recordBtn.setEnabled(false);
            playBtn.setEnabled(false);
            isRecording = true;
            startRecording();
        }
    });
    // single button to stop recording and playing as applicable
    stopBtn = new Button(this);
    stopBtn.setText("Stop");
    stopBtn.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            stop();
        }
    });
    // button to play the recorded sound
    playBtn = new Button(this);
    playBtn.setText("Play");
    playBtn.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            // reverse the isPlaying
            isPlaying = true;
            recordBtn.setEnabled(false);
            playBtn.setEnabled(false);
            startPlaying();
        }
    });

    ll.addView(recordBtn, new LinearLayout.LayoutParams(
            ViewGroup.LayoutParams.WRAP_CONTENT,
            ViewGroup.LayoutParams.WRAP_CONTENT, 1));

    ll.addView(playBtn, new LinearLayout.LayoutParams(
            ViewGroup.LayoutParams.WRAP_CONTENT,
            ViewGroup.LayoutParams.WRAP_CONTENT, 1));

    ll.addView(stopBtn, new LinearLayout.LayoutParams(
            ViewGroup.LayoutParams.WRAP_CONTENT,
            ViewGroup.LayoutParams.WRAP_CONTENT, 1));

    setContentView(ll);
}

@Override
protected void onDestroy() {
    // Clean up code . ..
    super.onDestroy();
    if (recorder != null)
        recorder.release();
    if (startRecThread != null && startRecThread.isAlive())
        startRecThread.destroy();
    if (recorder != null)
        recorder.release();
    if (player != null)
        player.release();
    startRecThread = null;
    recorder = null;
    player = null;
    recordBtn = null;
    stopBtn = null;
    playBtn = null;
    audioData = null;
    System.gc();
}

} 
```

这是错误的LOGCAT文件.....

```
05-17 09:53:01.402: E/AndroidRuntime(367): FATAL EXCEPTION: main
05-17 09:53:01.402: E/AndroidRuntime(367): java.lang.NullPointerException
05-17 09:53:01.402: E/AndroidRuntime(367):  at audio.xxx.com.Audio_testActivity.startRecording(Audio_testActivity.java:232)
05-17 09:53:01.402: E/AndroidRuntime(367):  at audio.xxx.com.Audio_testActivity.access$9(Audio_testActivity.java:194)
05-17 09:53:01.402: E/AndroidRuntime(367):  at audio.xxx.com.Audio_testActivity$3.onClick(Audio_testActivity.java:291)
05-17 09:53:01.402: E/AndroidRuntime(367):  at android.view.View.performClick(View.java:2485)
05-17 09:53:01.402: E/AndroidRuntime(367):  at android.view.View$PerformClick.run(View.java:9080)
05-17 09:53:01.402: E/AndroidRuntime(367):  at android.os.Handler.handleCallback(Handler.java:587)
05-17 09:53:01.402: E/AndroidRuntime(367):  at android.os.Handler.dispatchMessage(Handler.java:92)
05-17 09:53:01.402: E/AndroidRuntime(367):  at android.os.Looper.loop(Looper.java:123)
05-17 09:53:01.402: E/AndroidRuntime(367):  at android.app.ActivityThread.main(ActivityThread.java:3683)
05-17 09:53:01.402: E/AndroidRuntime(367):  at java.lang.reflect.Method.invokeNative(Native Method)
05-17 09:53:01.402: E/AndroidRuntime(367):  at java.lang.reflect.Method.invoke(Method.java:507)
05-17 09:53:01.402: E/AndroidRuntime(367):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-17 09:53:01.402: E/AndroidRuntime(367):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-17 09:53:01.402: E/AndroidRuntime(367):  at dalvik.system.NativeStart.main(Native Method) 
```

让我知道我错在哪里..请帮助我.!!!!!!!!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T14:00:51.690

如果您从代码中得到“初始化函数内部的问题”

```
if (recorder != null && player != null) {
        Log.e(LOG_TAG, "recorder and player initialized");
        audioData = new short[recorderBufSize / 2]; // since we r reading
                                                    // shorts

    } else {
        Log.e(LOG_TAG, "Problem inside init function ");
    } 
```

记录器可能为空。请检查一下。

# javascript - 如何使用 JavaScript 查找 Flash 内容？

> ID：10619676
> 
> 赞同：3
> 
> 时间：2012-05-16T13:32:49.590
> 
> 标签：javascript, jquery, flash

如何使用 JavaScript 查找 Flash 内容？

adblockers 或 gimme bar 之类的工具似乎可以做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T13:38:59.367

Flash 使用`<object>`和`<embed>`标记。`getElementsByTagName`对这两个 Flash 标签执行 a ：

```
var flash1=document.getElementsByTagName("object");
var flash2=document.getElementsByTagName("embed"); 
```

请注意，YouTube 嵌入使用`<iframe>`元素，因此更难捕捉这些元素。此外，请确保在所有元素都加载（aka `window.onload`）之后运行它，否则你会错过一些或全部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:40:43.080

也许这段代码可以提供帮助：

```
<script>
var length = document.getElementsByTagName('object').length;
alert(length);
</script> 
```

添加您的页面末尾..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-26T11:24:34.100

**2017 回答**：一行可以找到两种类型的 Flash 元素：

```
document.querySelectorAll("object, embed"); 
```

# haskell - 使用 ReaderT 创建可修改的环境

> ID：10619678
> 
> 赞同：2
> 
> 时间：2012-05-16T13:32:58.340
> 
> 标签：haskell, monad-transformers

我一直在关注并扩展教程[Write Yourself A Scheme](http://en.wikibooks.org/wiki/Write_Yourself_a_Scheme_in_48_Hours)。我有一种`LispVal`包裹在几层单子变压器中的类型：

```
import qualified Data.Map as M

data LispVal   = ...
data LispError = ...

type Bindings = M.Map String (IORef LispVal)
data Env = Environment { parent :: Env, bindings :: IORef Bindings }

type IOThrowsError = ErrorT LispError IO
type EvalM = ReaderT Env IOThrowsError 
```

using 的想法`ReaderT`是，我将能够通过评估器自动传递环境（它维护变量绑定），并且它的使用位置很明显，因为将调用`ask`. 这似乎比将环境作为额外参数显式传递更可取。当我开始实现延续时，我会想用`ContT`monad 转换器做一个类似的技巧，并避免为延续传递额外的参数。

但是，我还没有弄清楚如何通过这样做来*修改*环境。例如，定义一个新变量或设置一个旧变量的值。

举一个具体的例子，假设每当我评估一个 if 语句时，我想将变量绑定`it`到 test 子句的结果。我的第一个想法是直接修改环境：

```
evalIf :: [LispVal] -> EvalM LispVal
evalIf [test, consequent, alternate] = do
  result <- eval test
  bind "it" result
  case (truthVal result) of
    True  -> eval consequent
    False -> eval alternate 
```

这`truthVal`是一个将 a 分配`Bool`给 any的函数`LispVal`。但我不知道如何编写函数`bind`以修改环境。

我的第二个想法是使用`local`：

```
evalIf :: [LispVal] -> EvalM LispVal
evalIf [test, consequent, alternate] = do
  result <- eval test
  local (bind "it" result) $ case (truthVal result) of
    True  -> eval consequent
    False -> eval alternate 
```

但是这里`bind`需要有 type `Env -> Env`，而且由于我`IORef`在环境中使用 s 作为值，所以我只能写一个带有签名的函数`Env -> IO Env`。

这甚至可能吗，还是我需要使用`StateT`而不是`ReaderT`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T13:38:53.297

`ReaderT`当您有范围内的只读环境时使用。例如在口译员中。环境`ReaderT`嵌套在词法上，因此您可以在每次遇到绑定时扩充环境。像这样：

```
eval (LetE x e1 e2) = do
    env <- ask
    v   <- eval e1
    local (M.insert x v) (eval e2) 
```

这是我的[一篇旧帖子](http://donsbot.wordpress.com/2006/12/11/quick-interpreters-with-the-reader-monad/)，其中包含一些示例。

`IORefs`如果你有这样的环境，除非你在玩动态范围的有趣游戏，否则应该没有必要也使用？IORefs 的原因是什么？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T13:39:12.700

If you want a modifiable context, `StateT` is what you need rather than `ReaderT`. Reader will only allow you to `ask`, not `tell` (as in `WriterT`). State is a composition of Reader and Writer, allowing you to `get`, `put`, and `modify` at will.

# java - 为什么我的琴弦不能正确穿过插座？

> ID：10619679
> 
> 赞同：0
> 
> 时间：2012-05-16T13:33:05.707
> 
> 标签：java, android, sockets

```
05-16 14:29:16.935: W/System.err(20981): java.lang.NumberFormatException: 
    unable to parse '��������������������' as integer 
```

这几乎是我的 Android 应用程序在它应该接收 10 字节长的字符串时显示的错误消息（在错误消息中显示为 20 个不同的字节。

```
BufferedReader in = new BufferedReader(
        new InputStreamReader(client.getInputStream(), "UTF-8"));
BufferedWriter out = new BufferedWriter(
        new OutputStreamWriter(socket.getOutputStream(), "UTF-8")); 
```

^^ 我添加了 UTF-8。

```
String count = String.format("%10s", 
        (new Integer(result.length())).toString()).replace(" ", "0"); 
```

这就是我获取我发送的字符串的方式，它工作正常，因为它在 PC 端日志上正确显示。

但是，在 Android 端，它没有被正确接收。

```
BufferedReader in = new BufferedReader(
        new InputStreamReader(client.getInputStream(), "UTF-8"));
CharBuffer buf = CharBuffer.allocate(1024*1024);
in.read(buf);
char[] buffer = new char[10];
buf.get(buffer, 0, 10);
cont = Integer.parseInt(new String(buffer)); 
```

这就是我获取字符串的方式，它似乎无法正常工作。有更多经验的人可以帮助我理解为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:35:56.003

Java String 是 Unicode，每个 char 事务 2 字节。很高兴知道。

您可能应该告诉流如何对字符串进行编码。UTF-8 是我的推荐。

我建议您暂时忘记数字解析位，看看您是否能理解来回发送的内容。不可读字符的异常没有用。

将您的问题简化为简单的发送和接收并记录收到的内容。可见性和透明度是您的朋友。在您知道自己得到什么之前，很难看到需要什么。

# c# - datagridview 的数据绑定问题

> ID：10619683
> 
> 赞同：2
> 
> 时间：2012-05-16T13:33:18.973
> 
> 标签：c#, asp.net, data-binding, gridview, page-lifecycle

实际上，说问题可能是错误的。我有 2 页。我可以从第一页获取第二页的查询字符串。这个查询字符串是我查询的关键部分。在调试模式下，我可以看到查询结果，它们就是我想要的。但它不能显示在我的网格视图上。这是我的代码块：我的 CustomerList 页面，

```
public partial class CustomerList : System.Web.UI.Page
    {
        CustomerBusiness m_CustomerBusiness = new CustomerBusiness();
        COMPANY m_Company = new COMPANY();

    protected void Page_Load(object sender, EventArgs e)
            {
                if (!Page.IsPostBack)
                {
                    BindCustomers();
                }
            }

        private void BindCustomers()
                {
                    string CompanyName = Request.QueryString.Get("CompanyName");

                    LabelCompanyName.Text = CompanyName;
                    List<CUSTOMER> CustomerListt = m_CustomerBusiness.SelectByFirmName(CompanyName);
                    GridViewCustomerList.DataSource = CustomerListt;
                    GridViewCustomerList.DataBind();
                }
} 
```

GridView 客户列表：

```
 <asp:GridView ID="GridViewCustomerList" runat="server" 
            AutoGenerateColumns="False" BackColor="White" BorderColor="#999999" 
            BorderStyle="None" BorderWidth="1px" CellPadding="3" GridLines="Vertical" 
            ondatabinding="GridViewCustomerList_DataBinding" 
            onselectedindexchanged="GridViewCustomerList_SelectedIndexChanged" 
            Width="239px">
            <AlternatingRowStyle BackColor="#DCDCDC" />
            <FooterStyle BackColor="#CCCCCC" ForeColor="Black" />
            <HeaderStyle BackColor="#000084" Font-Bold="True" ForeColor="White" />
            <PagerStyle BackColor="#999999" ForeColor="Black" HorizontalAlign="Center" />
            <RowStyle BackColor="#EEEEEE" ForeColor="Black" />
            <SelectedRowStyle BackColor="#008A8C" Font-Bold="True" ForeColor="White" />
            <SortedAscendingCellStyle BackColor="#F1F1F1" />
            <SortedAscendingHeaderStyle BackColor="#0000A9" />
            <SortedDescendingCellStyle BackColor="#CAC9C9" />
            <SortedDescendingHeaderStyle BackColor="#000065" />
        </asp:GridView> 
```

CustomerList 是我想要的，但我的绑定部分不起作用，我在运行项目时看不到 GridViewCustomerList。我研究了一些asp.net页面生命周期模型，目标解决方案可能与此有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T14:11:20.727

这里的问题是您的标记中没有明确[`<Column>`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.columns.aspx)的声明，并且您将[`AutoGenerateColumns`属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.autogeneratecolumns.aspx)设置为“false”。因此，即使数据绑定到您的 GridView 控件，它也不知道要显示什么（因此它什么也不显示。

这里最简单的解决方案是`AutoGenerateColumns="False"`从您的 GridView 声明中删除（默认情况下为“true”），您应该一切顺利。它将根据您的数据源自动创建您的列。

或者，您可以通过将列部分添加到 GridView 来指定所需的列。

```
 <columns>
      <asp:boundfield datafield="columnOne" headertext="Column 1"/>
      <asp:boundfield datafield="columnTwo" headertext="Column 2"/>
      <asp:boundfield datafield="columnThree" headertext="Column 3"/>
    </columns>
</asp:GridView> 
```

# database - 在 Microsoft SQL Server 2005 中作为一个整体运行多个 SQL 脚本作业

> ID：10619686
> 
> 赞同：0
> 
> 时间：2012-05-16T13:33:35.843
> 
> 标签：database, tsql, stored-procedures, scheduled-tasks

我在一个文件夹中有许多 Transact-SQL (SQL 2005) 脚本，旨在作为一个完整的独特作业运行。我想根据文件名（具有许多 *.sql 文件的文件系统文件夹）以有序的方式将它们作为“计划的子作业”（单击运行）一个接一个地运行，例如：

```
01_init_vars.sql
05_create_this_thing.sql
10_create_another_thing.sql
15_calculate_this_value_based_on_today_date.sql
20_create_that_thing.sql
25_summarize_finish.sql 
```

每个 SQL 脚本都作用于数据库的不同部分，有时它们使用相同的表，但它们在不同的时间戳中以不同的“逻辑级别”运行（即我需要先运行一个脚本，然后再运行另一个脚本等）。所有这些脚本共享“环境变量”，我只想在第一个脚本中设置一次并将它们用作“SQL会话变量”，例如：

```
DECLARE @Username NVARCHAR(100)
SET     @Username = 'Blahblahblah' 
```

我想知道是否有一个 Microsoft SQL Server Management Studio Tool 来合并和运行它们，或者（对我来说更好）一个运行存储过程的示例。

请注意，在其中一些“子作业”中可能有一个存储过程，那么我想防止由于定义的存储过程并在其他存储过程中运行（如果有的话）而引起的问题。

对于这个非常直截了当的问题，我感到非常抱歉，但是在使用不同的关键词多次查询 Google 之后，在查看了标准的 transact-SQl 语句（MSDN 网站）之后，我找不到正确的答案，我认为这应该是在 SQL 数据库上运行任务的“通常方式”，可能我遗漏了一些东西，我找不到什么。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:39:41.687

如果您在脚本之间共享变量，您可能需要调查[Sql Sever Integration Services](http://msdn.microsoft.com/en-us/library/ms141026.aspx) (SSIS)。

您可以控制脚本之间的数据流，为事物运行的顺序设置条件“路由”，以及执行此任务可能不需要的更多功能。

如果由于某种原因不能使用 SSIS，为什么不在 Sql Server Agent 中创建一个新作业并将每个脚本添加为作业中的一个新步骤呢？如果您需要从一个保存结果以在另一个中使用，也许只需创建一个表来在工作期间保存这些值，并让最终脚本按原样“在退出时”将它们删除。

# c - 我可以将 argv 从 main 传递给 execv 吗？

> ID：10619693
> 
> 赞同：5
> 
> 时间：2012-05-16T13:34:00.140
> 
> 标签：c, exec, main, argv, setuid

该`execv()`函数需要一个终止字符串的数组，`NULL`但不接受参数的数量。它使用标记值（`NULL`指针）来确定数组何时结束。

状态的手册页`execv()`...

> 按照惯例，第一个参数应该指向与正在执行的文件关联的文件名。指针数组必须以 NULL 指针终止。

......所以我的问题是......

我想传递`argv`from`main()`到`execv()`。

我可以确定进入 main 的 argv 会被 NULL 指针终止吗？也就是说，我可以放心`argv[argc] == NULL`还是必须分配我自己的 size + 1`char*`数组并放入索引？`argc``NULL``argc`

如果我可以放心，它是否记录在某个地方？

谢谢，~埃里克

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T13:34:35.543

是的。`argv`向量总是`NULL`终止的。

C99 标准草案规定：

> 如果声明了它们，则`main`函数的参数应遵守以下约束：
> 
> *   的值`argc`应为非负数。
> *   `argv[argc]`应为空指针。

# java - 向控制台输出一行 90 等号，两边各有空行

> ID：10619702
> 
> 赞同：0
> 
> 时间：2012-05-16T13:34:26.797
> 
> 标签：java, string, for-loop

我正在尝试编写一个输出空行的方法，然后 90 = 在新行上签名，最后是空行。

这是我的代码...

```
public void easyToRead(){
    for (int i=0; i<=EQUAL_SIGNS; i++){
        if (i >= 0){
            if (i == EQUAL_SIGNS || i == 0){
                System.out.println(" ");
            }
            else {
                System.out.print("=");
            }
        }
    }
} 
```

输出应该是这样的......

```
blah blah blah

======================= ---> 90 of them

blah blah blah 
```

有人可以帮我更正我的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:40:31.833

我认为你在`for`循环的正确轨道上，但你不应该真的需要任何`if`陈述。这样的事情可能更简单......

```
public void easyToRead() {
    // Write a blank line
    System.out.println();

    // Write the 90 equals characters
    for (int i=0; i<90; i++){
        System.out.print("=");
    }

    // Write a new-line character to end the 'equals' line
    System.out.println();

    // Write a blank line
    System.out.println();
} 
```

哪个会输出...

```
<blank line>
===========================...
<blank line>
// the next output will write on this line 
```

对于您想要的每个空行，只需添加另一个`System.out.println();`语句

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T13:40:08.993

```
System.out.println(String.format("%n%90s%n"," ").replaceAll(" ", "=")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T13:44:37.597

Let's imagine you want to use as many equal signs as you want.

In your class, create a static block

```
public static String LINE_EQUAL_SIGNS;

public static String LINE_SEPARATOR = System.getProperty("line.separator").toString();

static {

    StringBuffer sb = new StringBuffer(LINE_SEPARATOR);
    for (int i = 0; i < EQUAL_SIGNS; i++)
        sb.add("=");
    sb.add(LINE_SEPARATOR);
    LINE_EQUAL_SIGNS = sb.toString();
} 
```

Now you only need to do :

```
public void easyToRead()
{
    System.out.print(LINE_EQUAL_SIGNS);
} 
```

# ruby - 是否有 Rails 宏可以为模型动态添加许多类似的方法？

> ID：10619706
> 
> 赞同：0
> 
> 时间：2012-05-16T13:34:33.327
> 
> 标签：ruby, ruby-on-rails-3, dynamic, metaprogramming

我觉得我在某处读到了关于在模型上动态生成许多类似实例方法的 ActiveRecord 宏，但现在（尽管浏览了在线文档和 RoR 书籍）我找不到它。

我已经使用普通的旧 Ruby 解决了这个问题，但是如果有更好的（更多 Rails-y）方法来解决这个问题，我想知道它。

所以，我有`Character`,`Gear`和`Modifiers`模型（是的，这是一个用于 RPG 的应用程序）。角色将拥有可以为他的统计数据添加修饰符的装备。所以我想要一个方法来查询他的装备（和他的装备的修饰符）并为相关统计数据的修饰符求和。（参见下面代码中的方法）。

所以我的角色模型看起来像这样：

```
class Character < ActiveRecord::Base
  has_many :gears
  has_many :modifiers, :as => :modifiable, :through => :gears

  stats = ["hp", "bab", "ac"]  # etc...

  stats.each do |method_name|
    define_method method_name do 
      self.modifiers.where(:kind => method_name).sum(:amount)  
    end    
  end

end 
```

所以，这样我可以做到

```
>  jim = Character.create(:name => "Jim") 
```

然后给吉姆一些修改他的“hp”、“bab”或“ac”的装备，然后我就可以这样做了：

```
>  jim.hp 
```

或者

```
>  jim.ac 
```

ETC...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T19:23:53.323

This is not a more (Rails-y) way but it is an alternative to your code. With method missing.

Where is what [rubylearning.com](http://rubylearning.com) has to say about it.

When you send a message to an object, the object executes the first method it finds on its method lookup path with the same name as the message. If it fails to find any such method, it raises a NoMethodError exception - unless you have provided the object with a method called method_missing...

```
def method_missing(m, *args, &block)  
  self.modifiers.where(:kind => method_name).sum(:amount)    
end 
```

The Pros about this approach is that you don't need to be maintaining your stats array and looping thru them to define a method for each stat. The cons is that it can be dangerous if every time that there is a missing_method for a User it goes and execute this code.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:40:21.573

您可能会想到`ActiveRecord::Base.store`，它出现在 Rails 3.2 中。有了它，您可以执行以下操作：

```
class Character < ActiveRecord::Base
  store :stats, accessors: [:hp, :bab, :ac]
end

jim = Character.create(:name => "Jim")
jim.hp = 100 
```

注意：该`stats`列应定义为一`text`列，以确保您有足够的空间容纳您的值。

[在 Rails 文档中阅读更多内容](http://api.rubyonrails.org/classes/ActiveRecord/Store.html)

# jquery - 为什么 jQuery selected 会收集重复元素

> ID：10619709
> 
> 赞同：0
> 
> 时间：2012-05-16T13:34:38.383
> 
> 标签：jquery, jquery-ui

我有一个简单的 li 元素网格，可以选择。一旦选择完成，我就会遍历它们。但是当您在网格中选择多个框时，元素的集合似乎是一组重复项。这里发生了什么？

[示例可以在这里找到](http://jsfiddle.net/mdoering/xrPHE/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:38:48.437

不要绑定到`selected`事件，而是尝试`stop`像这样绑定到事件：

```
stop: function() {
    elements = null;
    elements = $('.ui-selected');
    elements.each(function(idx, item) {
        alert($(item).position().top);

    });
} 
```

selected 事件将为您选择的每个项目触发一次，然后您的函数也将每次运行，从而构建在所选项目列表上。通过使用停止事件，该函数仅对每个选定项目运行一次。

**[jsFiddle 示例](http://jsfiddle.net/j08691/xrPHE/5/)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:39:26.543

您的`selected`回调会为每个选定的项目调用一次。在该回调中，您将查询所有选定的项目，并为每个项目发出警报。

最终结果是，当您选择例如 2 个项目时，`selected`会为第一个项目调用回调，并且您会收到该项目的单个警报。然后为第二个项目调用您的回调，此时现在选择了两个项目，您现在又收到 2 个警报（总共 3 个）。选择第 3 个项目后，您会收到 6 个警报，依此类推。

无论如何，这就是你所看到的行为的部分*原因。*查看@j08691 的答案，了解显示您可能想要的行为的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T13:43:41.593

看起来选定的函数被多次调用，实际上是为每个选定的元素调用一次。

我已经修改了您的代码以查看以下内容：

```
elements = $('.ui-selected');
console.log(elements); 
```

从[http://jqueryui.com/demos/selectable/](http://jqueryui.com/demos/selectable/)的文档中，它建议“此事件在选择操作结束时触发，在添加到选择的每个元素上。” 所以你看到的是预期的行为。

我认为您想要的是“停止”事件：

```
$("#selectableGrid").selectable({
    stop: function() {
        elements = $('.ui-selected');
        elements.each(function(idx, item) {
            alert($(item).position().top);
        });
    }
});​ 
```

# macos - 用于安装新键盘布局的 Mac OS X 脚本

> ID：10619712
> 
> 赞同：3
> 
> 时间：2012-05-16T13:34:46.607
> 
> 标签：macos, keyboard

我会感谢 Mac OS X 开发人员的任何帮助。有没有办法编写某种脚本，至少可以执行以下步骤 2-3？

1.  下载自定义键盘布局
2.  将键盘布局移动到 /System/Library/Keyboard Layouts/
3.  将此键盘布局激活为系统输入源之一

我在问一个非常高级的问题——最好使用的脚本语言是什么，我可能需要处理什么问题？例如，我不介意跳过第 1 步并将其与脚本下载本身一起打包。

# java - NetBeans：从运行 (F6) 按钮启动 .exe

> ID：10619713
> 
> 赞同：0
> 
> 时间：2012-05-16T13:34:51.300
> 
> 标签：java, netbeans, ant, target, netbeans-7

（使用 v7.1.1 的 NetBean 新手）

我正在开发一个 java 类库，它是一个更大的应用程序 (.exe) 的插件。我想让我的主机应用程序在按下 F6 按钮或执行运行->运行项目菜单项时启动。我从 java 类库生成的项目开始，覆盖生成的 build.xml 中的 run 和 run-single 目标。我正在使用这样的运行目标测试 ant 脚本

```
<target depends="init,compile" description="Test target" name="run">
    <echo>run target echo - Application startup would go here</echo>
</target> 
```

转到文件选项卡，右键单击 build.xml 文件并通过 Run-Target->run 上下文菜单可以实现我想要的行为（在输出窗口中运行目标回显...或启动我的主机应用程序）。但是 F6 按键只会弹出一个名为 Run Project 的对话框，要求我选择主类。 *我的代码永远不会有一个带有 main 函数的类。*

在看到[这个问题](https://stackoverflow.com/questions/5147188/ant-in-netbeans-overriding-run-target-doesnt-work)和它的链接[错误报告](http://netbeans.org/bugzilla/show_bug.cgi?id=196133)后，我关闭了“保存时编译”，这没有任何区别。

我是否针对我的情况使用了正确类型的 NetBeans 生成项目？

[是否有其他一些netbeans](http://www.catb.org/jargon/html/F/frobnicate.html)设置需要我来获取我想要的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:48:43.560

添加一个包含 main 方法的类以用于测试，并在库正常工作时删除该类。我几乎每天都使用 Netbeans，这是我用来测试我创建的库的简单方法。

# java - 在没有 MVC 的 Spring 中使用 REST

> ID：10619717
> 
> 赞同：1
> 
> 时间：2012-05-16T13:34:55.123
> 
> 标签：java, rest, spring-mvc

我想在不使用 MVC 框架的情况下在 Spring 中使用 REST，但似乎他们鼓励仅将它与控制器一起使用！

我可以在不使用控制器的情况下这样做吗？可取吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:44:33.583

您可以使用 Jersey 创建没有 spring-mvc 的 Rest 服务。

官方：http: [//jersey.java.net/](http://jersey.java.net/)

示例：[http ://www.vogella.com/articles/REST/article.html](http://www.vogella.com/articles/REST/article.html)

[带有 Spring 3.0 的球衣？](https://stackoverflow.com/questions/2185640/jersey-w-spring-3-0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:43:06.097

如果您愿意，可以将[JAX-RS 与 Spring 结合](http://www.infoq.com/articles/springmvc_jsx-rs)使用，如果您想避免将 Spring 用于 Web 层的东西。

# java - 如何从整个 jar 中导入特定的类？

> ID：10619719
> 
> 赞同：0
> 
> 时间：2012-05-16T13:34:59.770
> 
> 标签：java, eclipse

我想在我的 android 项目中使用**Blob**类。 现在导入整个 jar 会在安装 apk 时终止应用程序。而且也不合理的重量 23 MB。`appengine-api-1.0-sdk-1.6.3.jar`
`appengine-api-1.0-sdk-1.6.3.jar`

如何使用 Eclipse 仅导入 jar 中的特定类而不导入整个 jar？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:38:55.030

解压缩 jar，只取类并将其放入类路径中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:43:37.133

这是一种蛮力的方法，但您绝对可以重新打包 jar 并删除您不需要的类。如果有依赖关系，请务必考虑（包括 Blob 及其依赖关系，包括它们的依赖关系等）。Jars 实际上是 .zip 文件，因此创建一个空 jar (zip)，根据需要添加依赖项，重新压缩（如果已解压缩），重命名（如果需要）。我不知道Android是否提供了过滤机制，但是您可以将上述步骤放在自动构建脚本中。如果您使用的是[Maven](http://code.google.com/p/maven-android-plugin/)，您可能会利用[jar 插件](http://maven.apache.org/plugins/maven-jar-plugin/)来执行此操作。

# javascript - 在 CRM 2011 Javascript 中获取架构名称

> ID：10619733
> 
> 赞同：1
> 
> 时间：2012-05-16T13:35:51.003
> 
> 标签：javascript, dynamics-crm, dynamics-crm-2011, crm

如何在 CRM 2011 Javascript 的记录中获取特定字段的架构名称...？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T14:21:41.323

字段的名称应与“id”属性相同。

如果您碰巧正在处理某个字段的事件，则始终可以在定义函数时传递执行上下文，然后在事件代码中使用：

```
executionContext.getEventSource().getName(); 
```

[http://msdn.microsoft.com/en-us/library/gg334332.aspx](http://msdn.microsoft.com/en-us/library/gg334332.aspx)

如果您需要基于字段 id/name（小写）的模式名称（混合大小写），您可以使用类似这样的内容（基于[http://crmxpg.nl/wp/2010/10/19/how-to-通过javascript查询元数据服务](http://crmxpg.nl/wp/2010/10/19/how-to-query-the-metadata-service-via-javascript/)）

```
function GetSchemaName() {

    alert(gGetAttributeList(Xrm.Page.data.entity.getEntityName(), "thefieldname"));

}

//*********************************************************
gQueryMetadataService = function (request) {

    var xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
    xmlhttp.open("POST", '/mscrmservices/2007/MetadataService.asmx', false);
    xmlhttp.setRequestHeader("Content-Type", "text/xml; charset=utf-8");
    xmlhttp.setRequestHeader("SOAPAction", 'http://schemas.microsoft.com/crm/2007/WebServices/Execute');
    var soapMessage = "<?xml version='1.0' encoding='utf-8'?>" + 
                      "<soap:Envelope xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' " + 
                      "xmlns:xsd='http://www.w3.org/2001/XMLSchema' xmlns:soap='http://schemas.xmlsoap.org/soap/envelope/'>" + 
                      "<soap:Header>" + 
                      "<CrmAuthenticationToken xmlns='http://schemas.microsoft.com/crm/2007/WebServices'>" + 
                      "<AuthenticationType xmlns='http://schemas.microsoft.com/crm/2007/CoreTypes'>" + AUTHENTICATION_TYPE + 
                      "</AuthenticationType>" + 
                      "<OrganizationName xmlns='http://schemas.microsoft.com/crm/2007/CoreTypes'>" + ORG_UNIQUE_NAME + 
                      "</OrganizationName>" + 
                      "<CallerId xmlns='http://schemas.microsoft.com/crm/2007/CoreTypes'>00000000-0000-0000-0000-000000000000</CallerId>" + 
                      "</CrmAuthenticationToken>" + 
                      "</soap:Header>" + 
                      "<soap:Body><Execute xmlns='http://schemas.microsoft.com/crm/2007/WebServices'>" + request + 
                      "</Execute></soap:Body>" + 
                      "</soap:Envelope>";
    xmlhttp.send(soapMessage);
    return xmlhttp.responseXML;
}

gGetAttributeList = function (entityName, fieldname) {

    var request = "<Request xsi:type='RetrieveEntityRequest'>" + 
                  "<MetadataId>00000000-0000-0000-0000-000000000000</MetadataId>" + 
                  "<EntityItems>IncludeAttributes</EntityItems>" + 
                  "<LogicalName>" + entityName + "</LogicalName>" + 
                  "<IsCustomizable>1</IsCustomizable>" + 
                  "<RetrieveAsIfPublished>true</RetrieveAsIfPublished>" + 
                  "</Request>";

    var result = gQueryMetadataService(request);
    var schemaNames = result.selectNodes("//EntityMetadata/Attributes/Attribute/SchemaName");
    for (var i = 0; i < schemaNames.length; i++) {
        if (fieldname === schemaNames[i].text.toLowerCase()) {
            return schemaNames[i].text;
        }
    }
    return null;
} 
```

# java - 丑陋的 Hibernate Composite PK 映射问题

> ID：10619739
> 
> 赞同：2
> 
> 时间：2012-05-16T13:35:57.483
> 
> 标签：java, hibernate

假设我有这些表：

表 A 在两个字段上有一个复合主键：

*   员工 ID（字符串）
*   交易 ID（长）

表 B 也有一个复合主键，但在三个字段上：

*   员工 ID（字符串）
*   交易 ID（长）
*   日期（日期）

在表 B 中，Employee ID 和 Transaction ID 上有一个外键，称为“FK1”（为简单起见）。

由于表 A 中使用的复合 id 用于多个映射的休眠类，因此我创建了一个可以重用的类：

```
@Embeddable
public class EmployeeTransactionComposite {

    private String employeeId;
    private Long transactionId;

} 
```

因此，映射到表 A 的类如下所示：

```
public ClassA implements Serializable {

    private EmployeeTransactionComposite id;
    // rest of fields

    @EmbeddedId
    public EmployeeTransactionComposite getId() {
        return id;
    }
} 
```

映射到表 B 的类如下所示：

```
public ClassB implements Serializable {

    private ClassBCompositeId id;
    // fields

    @EmbeddedId
    public getId() {
        return this.id;
    }

    @Embeddable
    public class ClassBCompositeId implements Serializable {

        private EmployeeTransactionComposite composite;
        private Date date;

        @ManyToOne
    @ForeignKey(name="FK1")
        public EmployeeTransactionComposite getComposite() {
            return composite;
        }

        @Column(name="THEDATE")
        public Date getDate() {
            return date;
        }
    }
} 
```

显然，如果它有效，我不会发布这个。它会出现这样的堆栈跟踪：

```
Caused By: java.lang.NullPointerException
at org.hibernate.cfg.Configuration.processFkSecondPassInOrder(Configuration.java:1419)
at org.hibernate.cfg.Configuration.secondPassCompile(Configuration.java:1359)
at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1728)
at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1779)
at org.springframework.orm.hibernate4.LocalSessionFactoryBuilder.buildSessionFactory(LocalSessionFactoryBuilder.java:189)
Truncated. see log file for complete stacktrace 
```

这是到旧模式的映射，因此不可能进行更改。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:16:25.200

ManyToOne 从不指向主键类，但始终指向实体。因此，这个映射是不正确的：

```
@ManyToOne
@ForeignKey(name="FK1")
public EmployeeTransactionComposite getComposite() {
    return composite;
} 
```

我建议不要在主键类中定义任何关联，而只定义基本列（或包含基本列的嵌入）。然后在实体本身中定义关联，并在该关联上使用@MapsId 注解告诉Hibernate，该关联使用与用于映射ID 的列相同的列。

[该文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#d0e4865)包含一个映射示例，该示例完全符合您的要求：

> 嵌入的 id 本身可以包含关联实体的主键。

```
@Entity
class Customer {
   @EmbeddedId CustomerId id;
   boolean preferredCustomer;

   @MapsId("userId")
   @JoinColumns({
      @JoinColumn(name="userfirstname_fk", referencedColumnName="firstName"),
      @JoinColumn(name="userlastname_fk", referencedColumnName="lastName")
   })
   @OneToOne User user;
}

@Embeddable
class CustomerId implements Serializable {
   UserId userId;
   String customerNumber;

   //implements equals and hashCode
}

@Entity 
class User {
   @EmbeddedId UserId id;
   Integer age;
}

@Embeddable
class UserId implements Serializable {
   String firstName;
   String lastName;

   //implements equals and hashCode
} 
```

# android - 安卓应用中的广告，值得吗？

> ID：10619741
> 
> 赞同：1
> 
> 时间：2012-05-16T13:35:59.490
> 
> 标签：android, ads

我目前正在设计一个 Android 应用程序，它将在 Play 中免费发布。我正在考虑加入广告，但我不确定是否应该这样做。这样做真的值得吗？收入真的那么高吗？我不打算以此为生，因为我已经有一份全职工作，所以我想知道我可以通过广告获得大约多少收入，以便决定我是否应该使用它们或不。

顺便说一句，我知道有些人实际上通过广告赚了很多钱。我对特殊情况不感兴趣，或者对下载数以万计的应用程序不感兴趣，只是一个普通的应用程序可以期望赚多少钱。如果有人可以发布诸如“使用此库，您可以期望每小时使用您的应用程序获得 X 美元的收入”之类的答案，那将是完美的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:39:50.113

根据我的经验，普通应用程序不会通过广告获得太多收益，只有高端应用程序或大容量应用程序才能通过广告赚钱。我会推荐[免费增值](http://en.wikipedia.org/wiki/Freemium)模式，它带来了最多的钱。

# java - 如何在java中使用iText将阿拉伯语数据写入pdf

> ID：10619747
> 
> 赞同：1
> 
> 时间：2012-05-16T13:36:13.753
> 
> 标签：java, pdf, itext

我正在使用java中的iText从html字符串创建pdf，下面是我的代码

```
 try {    
    Document document = new Document(PageSize.LETTER);  
    PdfWriter pdfWriter = PdfWriter.getInstance
               (document, new FileOutputStream("d://itextpdf.pdf"));       
    document.open();

    XMLWorkerHelper worker = XMLWorkerHelper.getInstance();

 String str = "<html><head></head><body>"+
                 "<table border='1' cellpadding='1' cellspacing='1' id='' class=''>" +
                 "<tr><th> Sr.No.</th><th>Currency Id</th><th>Code</th><th>Name</th>" +
                 "<tr><td align='center'>1</td><td align='center'>1</td>"+
                 "<td align='center'>100</td>"+
                 "<td align='center'>الرياض (رويترز)</td></tr>" +
                 "</table></body></html>"
   worker.parseXHtml(pdfWriter, document, 
             new InputStreamReader(new ByteArrayInputStream(str.getBytes("UTF-8")))) ;
   document.close();
}catch(Exception e){ } 
```

但它无法在生成的 pdf 中显示阿拉伯语数据。我应该怎么办？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:34:13.793

您可以在编写之前设置字体。例子

```
BaseFont bf = BaseFont.createFont("c:/windows/fonts/arial.ttf", BaseFont.IDENTITY_H, true);
Font font = new Font(bf, 14); 
```

# ios - NSFetchedResultsController 试图限制显示的记录数

> ID：10619750
> 
> 赞同：0
> 
> 时间：2012-05-16T13:36:18.080
> 
> 标签：ios, core-data, nsfetchedresultscontroller, nsfetchrequest

当创建一个`NSFetchRequest`传递给我的时，`NSFetchedResultsController`我将 fetchLimit 属性设置为 3。

现在最初这似乎工作正常。我可以以任何方式修改前三个返回的对象，从而改变它们的顺序并且它们都正确地重新洗牌。当我将最初落在前三个之外的对象更改为现在将其带入前三个时，或者只是添加一个新对象使其出现在前三个中时，就会出现问题。

我预期会发生什么：插入的物体将其余物体向下推，一个从底部掉落。

实际发生了什么：插入的对象将其余部分向下推，**记录数增加到 4**？！

谁能解释一下，或者我应该如何处理？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T16:07:12.260

我已经在解决这个问题上取得了一些进展，基本上是通过忽略`numberOfObjects`并返回我希望表格固定的实际长度。这需要一些技巧，`controller:didChangeObject:...`但到目前为止似乎有效。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return kTableSize;
    //return [[[self.fetchedResultsController sections] objectAtIndex:section] numberOfObjects];
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath
{
    UITableView *tableView = self.myTableView;

    switch(type) {

        case NSFetchedResultsChangeInsert:

            // Only modify table if insert will effect visible rows
            if (newIndexPath.row < kTableSize) {
                // Delete last row to maintain fixed length
                [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:(kTableSize - 1) inSection:newIndexPath.section]] withRowAnimation:UITableViewRowAnimationAutomatic];

                [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
            }
            break;

        case NSFetchedResultsChangeDelete:

            // Only modify table if delete will effect visible rows
            if (indexPath.row < kTableSize) {
                [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];

                // Insert extra row to maintain fixed length
                [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:(kTableSize - 1) inSection:newIndexPath.section]] withRowAnimation:UITableViewRowAnimationAutomatic];
            }
            break;

        case NSFetchedResultsChangeUpdate:

            // Only modify table if update will effect visible rows
            if (indexPath.row < kTableSize) {
                [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
            }
            break;

        case NSFetchedResultsChangeMove:

            // Only modify table if move will effect visible rows
            if ((indexPath.row < kTableSize) || (newIndexPath.row < kTableSize)) {

                // Delete old row or last row of table
                if (indexPath.row < kTableSize) {
                    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
                } else {
                    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:(kTableSize - 1) inSection:newIndexPath.section]] withRowAnimation:UITableViewRowAnimationAutomatic];
                }

                // Insert new row or a row at bottom of table
                if (newIndexPath.row < kTableSize) {
                    [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
                } else {
                    [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:(kTableSize - 1) inSection:newIndexPath.section]] withRowAnimation:UITableViewRowAnimationAutomatic];
                }
            }
            break;
    }
} 
```

如果对象少于表长度，还需要注意`tableView:cellForRowAtIndexPath:`确保我们不会尝试访问不存在的对象。

# selenium - Webdriver 焦点事件：js.executeScript("document.getElementByName(' ').focus()");

> ID：10619756
> 
> 赞同：1
> 
> 时间：2012-05-16T13:36:45.043
> 
> 标签：selenium, webdriver, selenium-webdriver

我正在开发一个**不包含少数文本框的 id 属性**的应用程序。其他 txtboxes 有 id。如果我不使用**焦点事件**，我将无法使用**“sendKeys”**来设置文本框的值。因此我用

```
js.executeScript ("document.getElementById('x').focus()"); 
```

但是由于某些文本框没有 id 属性，因此我无法使用上述属性，因此尝试使用

```
js.executeScript ("document.getElementByName('xyz').focus()"); 
```

执行此操作会生成以下异常消息：

```
org.openqa.selenium.WebDriverException: document.getElementByName is not a function (WARNING: The server did not provide any stacktrace information); duration or timeout: 26 milliseconds 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:42:59.093

我不相信有一个`getElementByName`。你需要做`getElementsByName`（注意元素的's'）。

`getElementsByName`返回一个集合，因此您需要指定索引：

```
js.executeScript ("document.getElementsByName('xyz')[0].focus()"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T16:58:26.510

您可以尝试单击元素来设置焦点。

```
driver.findElement(By.name("someName")).click(); 
```

# android - Android 资源 java 为什么认为字符串是整数？

> ID：10619765
> 
> 赞同：6
> 
> 时间：2012-05-16T13:37:07.363
> 
> 标签：android, xml, warnings

对于我的每个 XML 首选项，我都会收到以下警告，
并且我了解 java 认为我给出的默认值是整数，并且它需要字符串。但是如何放置文字字符串？
我可以忍受这个警告，因为我知道它是无害的，但如果有一个简单的方法来纠正它，我会的。

```
05-16 16:28:03.210: I/ActivityManager(68): Starting activity: Intent { cmp=com.delta.app/.Preferences }
05-16 16:28:03.750: W/Resources(1869): Converting to string: TypedValue{t=0x10/d=0x1388 a=-1}
05-16 16:28:03.870: W/Resources(1869): Converting to string: TypedValue{t=0x10/d=0x64 a=-1}
05-16 16:28:03.901: W/Resources(1869): Converting to string: TypedValue{t=0x10/d=0xa a=-1}
05-16 16:28:03.970: W/Resources(1869): Converting to string: TypedValue{t=0x10/d=0x0 a=-1}
05-16 16:28:03.970: W/Resources(1869): Converting to string: TypedValue{t=0x10/d=0x2 a=-1} 
```

这是 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

<EditTextPreference
    android:defaultValue="5000"
    android:key="@string/MAX_MESSAGES"
    android:summary="@string/MAX_MESSAGES_desc"
    android:title="@string/MAX_MESSAGES_title" />

<EditTextPreference
    android:defaultValue="100"
    android:key="@string/VIEW_MAX_ROWS"
    android:summary="@string/VIEW_MAX_ROWS_desc"
    android:title="@string/VIEW_MAX_ROWS_title" />

<EditTextPreference
    android:defaultValue="10"
    android:key="@string/VIEW_EDGE_ROWS"
    android:summary="@string/VIEW_EDGE_ROWS_desc"
    android:title="@string/VIEW_EDGE_ROWS_title" />

<ListPreference
    android:defaultValue="0"
    android:entries="@array/level_list"
    android:entryValues="@array/level_values"
    android:key="@string/INITIAL_ORG"
    android:summary="@string/INITIAL_ORG_desc"
    android:title="@string/INITIAL_ORG_title" />

<ListPreference
    android:defaultValue="2"
    android:entries="@array/view_list"
    android:entryValues="@array/view_values"
    android:key="@string/INITIAL_VIEW"
    android:summary="@string/INITIAL_VIEW_desc"
    android:title="@string/INITIAL_VIEW_title" />

<CheckBoxPreference
    android:defaultValue="true"
    android:key="@string/AUTOSCROLL"
    android:summary="@string/AUTOSCROLL_desc"
    android:title="@string/AUTOSCROLL_title" />

<CheckBoxPreference
    android:defaultValue="true"
    android:key="@string/SEND_THEN_EXIT"
    android:summary="@string/SEND_THEN_EXIT_desc"
    android:title="@string/SEND_THEN_EXIT_title" />

<Preference
    android:key="@string/DEFAULT_PREFS"
    android:summary="@string/DEFAULT_PREFS_desc"
    android:title="@string/DEFAULT_PREFS_title" />

</PreferenceScreen> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T13:47:09.457

将此行添加到`string.xml`

`<string name="five_thousand">5000</string>`

将其设置为默认值..您可以为其他默认值执行此操作...

```
<EditTextPreference
    android:defaultValue="@string/five_thousand"
    android:key="@string/MAX_MESSAGES"
    android:summary="@string/MAX_MESSAGES_desc"
    android:title="@string/MAX_MESSAGES_title" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-09T15:24:10.330

双引号每个 defaultValue 摆脱了对我的警告，但它产生了其他问题：

```
<EditTextPreference
    android:defaultValue="'5000'"
    android:key="@string/MAX_MESSAGES"
    android:summary="@string/MAX_MESSAGES_desc"
    android:title="@string/MAX_MESSAGES_title" /> 
```

虽然 defaultValue 是 XML 的字符串，但似乎外部引号在发送到 java.util 之前被剥离。

但是当您尝试在 Android 应用程序中编辑首选项时，该框现在包含字符串“5000”而不是数字 5000，这可能会导致其他问题。

如果我们不得不容忍不必要的警告或无效字段，我想前者是唯一真正的选择。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-04-04T10:30:34.147

其实你可以试试这个，只要在值后面加一个空格即可：

```
<EditTextPreference
    android:defaultValue="5000 " 
```

但是你需要先 trim() 字符串，然后再转移到 value，例如：Integer.valueOf(prefer.getstring(...).trim())

# c# - Windows phone 推送通道过期

> ID：10619768
> 
> 赞同：2
> 
> 时间：2012-05-16T13:37:21.503
> 
> 标签：c#, .net, windows-phone-7, push-notification, mpns

当我向手机发送推送通知时遇到问题，它返回以下错误：

```
[X-SubscriptionStatus] => Expired
[X-NotificationStatus] => Dropped
[X-DeviceConnectionStatus] => Connected 
```

从这一点来看，我有两个问题：

1.  就我在文档中没有得到正常说明和重新创建推送通道返回相同的 url 而言，现在该怎么办
2.  我如何意识到到期发生在客户端？就现实世界中的运行时电话而言，它只会停止接收消息，并且不会知道发生了什么……谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T23:56:21.267

在服务器端，您无能为力 - 您只需停止向该 URI 发送通知即可。

您可以做的是尝试确保您`ChannelUri`不会过期，或者如果它发生更改，请通知您的服务器端应用程序更改。基本流程是；

**1** . 唯一标识电话。一个非常有可能的候选人，`Microsoft.Phone.Info.UserExtendedProperties.GetValue("ANID")`但请注意它需要您的应用程序具有该`ID_CAP_IDENTITY_DEVICE`功能

**2** . 在手机上设置 a`HttpNotificationChannel`并接收`ChannelUri`.

**3** . 将唯一的设备标识符和 发送`ChannelUri`到您的服务器。

**4** . 订阅 上`ChannelUriUpdated`的通知`HttpNotificationChannel`。每当此事件触发时，发送重新发送设备 ID/ `ChannelUri`对到您的服务器。

按照这种模式，您应该始终在服务器端拥有正确的推送通知 Uri，只要用户定期运行您的应用程序以刷新推送通知通道。

# android - 安卓AES加密/解密

> ID：10619770
> 
> 赞同：1
> 
> 时间：2012-05-16T13:37:27.230
> 
> 标签：android, performance, aes

我已经设法编写了用于文件加密/解密的函数。但它非常慢，尤其是随着文件大小的增加。例如，几 MB 长的音频/视频文件

我已经阅读了几乎所有的帖子来改进它，并尝试改变算法。如果有任何更改可以帮助我提高性能，请帮助我。

```
public class DataEncryptDecrypt {
public Cipher encryptcipher, decryptCipher;
int blockSize = 16;
String TAG = "DataEncryptDecrypt";
private static final String RANDOM_ALGORITHM = "SHA1PRNG";

public DataEncryptDecrypt(String passwd) {
    final String CIPHERMODEPADDING = "AES/CBC/PKCS5Padding";
    //AES/CBC/PKCS7Padding
    char[] humanPassphrase = passwd.toCharArray();
    byte[] salt = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0xA, 0xB, 0xC, 0xD, 0xE,
            0xF }; // must save this!
    //salt =generateSalt();
    final int HASH_ITERATIONS = 100;
    final int KEY_LENGTH = 128; //256
    PBEKeySpec mykeyspec = new PBEKeySpec(humanPassphrase, salt,
            HASH_ITERATIONS, KEY_LENGTH);
//  final String KEY_GENERATION_ALG = "PBEWITHSHAANDTWOFISH-CBC";
    final String KEY_GENERATION_ALG="PBEWithMD5And128BitAES-CBC-OpenSSL";
    SecretKey sk;
    try {
        encryptcipher = Cipher.getInstance(CIPHERMODEPADDING);
        SecretKeyFactory keyfactory = SecretKeyFactory
                .getInstance(KEY_GENERATION_ALG);
        sk = keyfactory.generateSecret(mykeyspec);

        // step 1 - get an instance of the cipher, specifying the mode and
        // padding

        byte[] iv = { 0xA, 1, 0xB, 5, 4, 0xF, 7, 9, 0x17, 3, 1, 6, 8, 0xC,
                0xD, 91 }; // must save this
        //iv= generateIv();
        IvParameterSpec IV = new IvParameterSpec(iv);
        encryptcipher = Cipher.getInstance(CIPHERMODEPADDING);
        decryptCipher = Cipher.getInstance(CIPHERMODEPADDING);

        // step 2 - initialize the cipher
        encryptcipher.init(Cipher.ENCRYPT_MODE, sk, IV);
        decryptCipher.init(Cipher.DECRYPT_MODE, sk, IV);

    } catch (NoSuchAlgorithmException nsae) {
        Log.e("AESdemo",
                "no key factory support for PBEWITHSHAANDTWOFISH-CBC");
    } catch (InvalidKeySpecException ikse) {
        Log.e("AESdemo", "invalid key spec for PBKDF2");
    } catch (Exception ex) {

    }
}

public String encryptData(String inputFileName) {
    String outFilename = null;
    File inputFile = new File(inputFileName);
    try {

        // step 3 - not needed, as we have all the blocks on hand

        // step 4 - call doFinal()

         outFilename = ".".concat(CommonUtils.getHash(inputFile.getName()));
        InputStream fis;
        OutputStream fos;
        fis = new BufferedInputStream(new FileInputStream(inputFileName));

        fos = new BufferedOutputStream(new FileOutputStream(
                inputFile.getParent() + "/" + outFilename));
        Log.i(TAG, "Output path:" + inputFile.getParent() + "/" + outFilename);
        byte[] buffer = new byte[blockSize];
        int noBytes = 0;
        byte[] cipherBlock = new byte[encryptcipher
                .getOutputSize(buffer.length)];
        int cipherBytes;
        while ((noBytes = fis.read(buffer)) != -1) {
            cipherBytes = encryptcipher.update(buffer, 0, noBytes,
                    cipherBlock);
            fos.write(cipherBlock, 0, cipherBytes);
        }
        // always call doFinal
        cipherBytes = encryptcipher.doFinal(cipherBlock, 0);
        fos.write(cipherBlock, 0, cipherBytes);

        // close the files
        fos.close();
        fis.close();
        Log.i("encrpty", "done");
        inputFile.delete();
    }

    catch (Exception ex) {
        ex.printStackTrace();
    }
    return inputFile.getParent() + "/" + outFilename;
} 
```

我在评论中保留了我尝试过的其他算法，但没有发现任何区别。非常感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:34:20.157

分析您的代码，但您可能做了太多的 IO。使你的`buffer`更大，它不必与密码块大小相同。至于实际的加密速度，它主要取决于 CPU，所以你无法真正改变它。您可以尝试使用本机代码（OpenSSL 等），看看是否有所作为。

# android - 如何通过同步来导入定期事件的 Android 日历？

> ID：10619775
> 
> 赞同：2
> 
> 时间：2012-05-16T13:37:56.947
> 
> 标签：android, google-calendar-api, android-calendar

对于学生应用程序，我实现了日历导入功能。将从学校网站下载一个 ICS 文件，该网站有几个事件。所有事件都是单个事件，而不是 ics 文件中的重复事件。导入工作没有问题。但是，当我想删除所有导入的事件时，有时会收到一条消息，指出无法同步记录。我现在想的是：

*   解析所有事件的 ICS 文件
*   尝试将事件合并为重复事件
*   将重复事件导入日历

但无论我做什么都行不通。任何一个事件都被标记为重复但按预期每月而不是每周。或者继续作为单个事件导入。

这是我尝试过的最后一个代码。

```
 ContentValues event = new ContentValues();

    event.put("calendar_id", calId);
    event.put("title", title);
    event.put("description", "[HSLU_TAAPP_IMPORTED]");
    event.put("eventLocation", location);
    event.put("eventTimezone", "GMT+1");

    long startTime = startDateTime.getTimeInMillis();
    startDateTime.add(Calendar.HOUR, 1);
    long endTime = startDateTime.getTimeInMillis();
    event.put("dtstart", startTime);
    event.put("rrule", "FREQ=WEEKLY");
    event.put("dtend", endTime);         

    Uri eventsUri = Uri.parse(getCalendarUriBase()+"events");
    Uri insertedUri = _activity.getContentResolver().insert(eventsUri, event);
    return insertedUri; 
```

任何人都可以给我一个如何做正确的例子吗？或者是否有另一种方法可以消除“无法同步”消息？

# events - 类模块内的工作表事件

> ID：10619779
> 
> 赞同：0
> 
> 时间：2012-05-16T13:38:12.643
> 
> 标签：events, vba, excel

我创建了一个用于更改所选单元格颜色的代码。通常我将该代码放在 Sheet1 VBA 文件中，或者我正在使用它的任何工作表中。

我想把它放到一个类模块文件中，这样可以更容易地实现到另一个工作表或 excel 文件中。

类模块甚至是它的好地方吗？我的整个想法是有几个这样的事件，以及一些简单的方法来打开和关闭它们，以及将代码迁移到另一个 excel 文件。

您认为最好的方法是什么？

代码如下：

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
    If (Range("A1").Value = "yes") Then
        Dim iColor As Integer
        On Error Resume Next
        iColor = Target.Interior.ColorIndex
        iColor = 36
        Cells.FormatConditions.Delete
        Target.FormatConditions.Add Type:=2, Formula1:=iInternational
        Target.FormatConditions(1).Interior.ColorIndex = iColor
    Else
        Cells.FormatConditions.Delete
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:14:12.007

悉达多是当场的。您不需要类模块。为了解决您的问题，您可以编写代码来更新您的工作簿代码，以便可以获取任何给定 .bas 文件中的任何给定模块并将其复制到工作簿中的任何对象中。

因此，如果您在 myLibrary.bas 中有 Worksheet_Change 代码，则可以将其复制出来并将其放置在工作簿中的每个 Worksheet 对象中。

这是一个让你开始的好地方：[使用模块](http://www.cpearson.com/excel/vbe.aspx)

# c# - 使用 JsonRequest 获取 TeamCity 用户名：内部

> ID：10619783
> 
> 赞同：1
> 
> 时间：2012-05-16T13:38:19.367
> 
> 标签：c#, sql, asp.net-mvc-3, teamcity

我的问题是我必须以某种方式获取最后一个构建选择构建的人的用户名。有了这些信息，我会将用户名放入数据库。这可能吗？下面是我的 Json 调用方法。

```
 public JsonResult AllStatuses() //from the json called in the _client view
    {
        var buildStatuses = new List<BuildStatus>();
        var projects = Client.AllProjects();

        var user = Client.AllUsers();

        foreach (var project in projects)
        {                
            try 
            {
                var buildConfigs = Client.BuildConfigsByProjectId(project.Id);

                foreach (var buildConfig in buildConfigs)
                {
                    var b = new BuildStatus();
                    var build = Client.LastBuildByBuildConfigId(buildConfig.Id);
                    var status = Client.LastBuildByBuildConfigId(buildConfig.Id).Status; // Used to loop through BuildConfigID's to find which is a FAILURE, SUCCESS, ERROR, or UNKNOWN
                    b.user = user.ToString();

                    b.id = buildConfig.Id.ToString();

                    // If the date isn't null place the start date in long format
                    if (build.StartDate != null)
                        b.date = build.StartDate.ToString();

                    // If block; set the status based on the BuildconfigID from the var status
                    if (status.Contains("FAILURE")){
                        b.status = "FAILURE";
                    }
                    else if (status.Contains("SUCCESS")){
                        b.status = "SUCCESS";
                    }
                    else if (status.Contains("ERROR")){
                        b.status = "ERROR";
                    }
                    else{
                        b.status = "UNKNOWN";
                    }
                    buildStatuses.Add(b);
                }

            } catch { }

        }
        var query = buildStatuses.OrderBy(x => x.status); // Create a sorted list from Error - Unknown               

        return Json(query, JsonRequestBehavior.AllowGet);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:17:17.057

```
var change = Client.LastChangeDetailByBuildConfigId(buildConfig.Id); // Provides the changeID
                    var changeDetail = Client.ChangeDetailsByChangeId(change.Id); // Provides the username, this one populates the usernames 
```

这就是我所需要的，第一个 var 更改找到了更改 ID，但没有填充用户名字段。使用找到的新 changeID 的 changeDetail 填充用户名列表。

# ruby-on-rails - Rails 3 多级连接

> ID：10619786
> 
> 赞同：1
> 
> 时间：2012-05-16T13:38:33.080
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我一直在阅读以了解执行以下操作的最佳 Rails 3 方法。我将非常感谢建议的方法。（范围？）

我有以下型号：

```
class DonorCategory < ActiveRecord::Base
  has_many :donors
end

class Donor < ActiveRecord::Base
  has_many :donations
  belongs_to :donor_category
end

class Donation < ActiveRecord::Base
  belongs_to :donor
end 
```

我需要的是：“与给定捐赠者类别相关的所有捐赠，在给定日期”日期标准适用于捐赠，但捐赠者类别标准适用于捐赠者所以好像我需要过滤捐赠者应用于捐赠查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:47:14.107

您可以向 Donor 添加一个有用的查询方法。添加`has_many ... through`on DonationCategory 可以让您轻松访问给定类别的捐赠，自动加入表格，如下所示：

```
class DonationCategory < ActiveRecord::Base
    has_many :donors
    has_many :donations, through: :donors
end

class Donation < ActiveRecord::Base

  def self.within_dates(start_date, end_date)
    where "created_at >= ? AND created_at <= ?", start_date, end_date
  end

end

# Query looks like this:
some_category.donations.within_dates(start_date, end_date)

# Or this:
DonorCategory.find(123).donations.within_dates(start_date, end_date) 
```

要使用`through`on 选项`has_many`，您根本不需要修改数据库。Rails 将通过加入您的捐赠、捐赠者和捐赠者类别表`donations`从捐赠者类别中获取。`donors`

你提到了范围。类`within_dates`方法实际上是一个作用域。`scope`只是用于创建查询数据库的类方法的[特殊 rails 语法。](http://guides.rubyonrails.org/active_record_querying.html#scopes)这是一种冗余机制，但[DHH 喜欢它](https://twitter.com/#!/dhh/statuses/189874148259012608)。而且我同意范围通常比等效的类方法更容易看，但是当范围需要参数时，就像在这里一样，我认为类方法实际上更简单。

**更新**

RFC1337的回答让我意识到查询方法可以简化：

```
def self.within_dates(start_date, end_date)
  where created_at: start_date..end_date
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:20:12.260

我认为你需要的是这样的：

```
Donor.where(:donor_category => DonorCategory.find(id)).where(:date => start_date..end_date) 
```

# java - 在 Spring xml 配置中使用应用程序常量的最佳方法是什么？

> ID：10619789
> 
> 赞同：12
> 
> 时间：2012-05-16T13:38:35.200
> 
> 标签：java, spring, constants, spring-el

我想在 spring xml 配置中使用我的应用程序常量。

我知道用 spring SpEl 做到这一点，如下所示：

```
<bean class="example.SomeBean">
    <property name="anyProperty" value="#{ T(example.AppConfiguration).EXAMPLE_CONSTANT}" />
    <!-- Other config -->
</bean> 
```

那么，有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-16T13:41:26.630

您可以使用`<util:constant>`（参见[C.2.2 The util schema](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/xsd-config.html#xsd-config-body-schemas-util)）：

```
<bean class="example.SomeBean">
    <property name="anyProperty">
       <util:constant static-field="example.AppConfiguration.EXAMPLE_CONSTANT" />
    </property>
</bean> 
```

不过，这是否更好还有待商榷。您的 SpEL 版本更简洁。

另一种选择是使用 Java 配置风格，更自然（参见[4.12 基于 Java 的容器配置](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-java)）：

```
@Bean
public SomeBean myBean() {
    SomeBean bean = new SomeBean();
    bean.setProperty(EXAMPLE_CONSTANT);  // using a static import
    return bean;
} 
```

# social-networking - 可以 loggly 用于存储活动流

> ID：10619791
> 
> 赞同：0
> 
> 时间：2012-05-16T13:38:40.187
> 
> 标签：social-networking, feed

loggly 服务会为写入和检索活动流提供可靠的性能吗？编写代表每个用户的活动的 json 对象似乎很好，但在为特定用户检索这些对象方面，它的性能如何？我可以查询诸如获取用户的最后 100 个活动项或给定用户上周的活动之类的内容吗？我可以做某种特定类型的所有活动项目的总和吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T02:13:03.913

如果您正在寻找具有云存储的活动流 API，Collabinate ( [http://www.collabinate.com](http://www.collabinate.com) ) 可能就是您要找的。它是为将活动流高性能聚合到可以检索到任何长度的提要中而构建的。

完全披露：我是 Collabinate 的创建者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T16:30:11.273

您所描述的是使用 loggly 作为 NoSQL 数据库。我建议使用您自己的数据库，因为您在存储之上编写查询逻辑。

如果您不想为完整的数据库服务器管理 IT 和存储，也许 ravenhq.com 更合适。

# android - 如何在没有数据库以及 Android 中没有共享首选项的情况下永久保存 arrayList？

> ID：10619793
> 
> 赞同：2
> 
> 时间：2012-05-16T13:38:46.283
> 
> 标签：android, sharedpreferences

我有一个带有自定义对象的 ArrayList。每个自定义对象都包含各种字符串和数字。即使用户离开活动然后想稍后再回来，我也需要数组保持不变，但是在应用程序完全关闭后我不需要可用的数组。我通过使用 SharedPreferences 以这种方式保存了许多其他对象，但我不知道如何以这种方式保存我的整个数组。这可能吗？也许 SharedPreferences 不是解决这个问题的方法？有没有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:07:47.453

您可以序列化`ArrayList`using`ObjectInputStream`和`ObjectOutputStream`因为您的所有对象似乎都是可序列化的。

序列化在这里描述：http: [//java.sun.com/developer/technicalArticles/Programming/serialization/](http://java.sun.com/developer/technicalArticles/Programming/serialization/)

在 Android 中，保存此类文件的推荐位置是使用`Context.getCacheDir()`so 指定的目录，在您的 Activity 上，您只需调用`this.getCacheDir()`即可获取它，然后构建一个唯一的文件名，然后将其提供给 ObjectStream 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:51:48.897

如果您在应用程序被杀死后不需要它，也许您可​​以尝试使用[onSaveInstanceState()](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)和[onRestoreInstanceState()](http://developer.android.com/reference/android/app/Activity.html#onRestoreInstanceState%28android.os.Bundle%29)。

[这](http://android-er.blogspot.co.uk/2011/09/onsaveinstancestate-and.html)是一个简短的示例，展示了如何使用它！

# delphi - 在 Delphi 中检查空字符串的更好方法是什么？

> ID：10619801
> 
> 赞同：22
> 
> 时间：2012-05-16T13:39:14.637
> 
> 标签：delphi

所有程序都应该做的一个常见条件是检查字符串是否为空。

采取以下陈述：

**(1)**

```
if Length(Str)=0 then
  // do something 
```

**(2)**

```
if Str='' then
  // do something 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-16T14:07:24.813

在 XE2 中，`if str = ''`编译为~~更好的~~Ansi 和 Unicode 字符串的更快代码。`if Length(str) = 0`编译为~~更好的~~宽字符串的更快代码。

测试程序：

```
{$A8,B-,C+,D+,E-,F-,G+,H+,I+,J-,K-,L+,M-,N-,O+,P+,Q-,R-,S-,T-,U-,V+,W-,X+,Y+,Z1}
program Project172;

{$APPTYPE CONSOLE}

{$R *.res}

var
  sa1,sa2: AnsiString;
  sw1,sw2: WideString;
  su1,su2: UnicodeString;

begin
  if Length(sa1) = 0 then
    ;
  if sa2 = '' then
    ;
  if Length(sw1) = 0 then
    ;
  if sw2 = '' then
    ;
  if Length(su1) = 0 then
    ;
  if su2 = '' then
    ;
end. 
```

编译代码：

```
Project172.dpr.14: if Length(sa1) = 0 then
004050E2 A19C9B4000       mov eax,[$00409b9c]
004050E7 85C0             test eax,eax
004050E9 7405             jz $004050f0
004050EB 83E804           sub eax,$04
004050EE 8B00             mov eax,[eax]
004050F0 85C0             test eax,eax

Project172.dpr.16: if sa2 = '' then
004050F2 833DA09B400000   cmp dword ptr [$00409ba0],$00

Project172.dpr.18: if Length(sw1) = 0 then
004050F9 A1A49B4000       mov eax,[$00409ba4]
004050FE 85C0             test eax,eax
00405100 7407             jz $00405109
00405102 83E804           sub eax,$04
00405105 8B00             mov eax,[eax]
00405107 D1E8             shr eax,1
00405109 85C0             test eax,eax

Project172.dpr.20: if sw2 = '' then
0040510B A1A89B4000       mov eax,[$00409ba8]
00405110 33D2             xor edx,edx
00405112 E839E8FFFF       call @WStrEqual

Project172.dpr.22: if Length(su1) = 0 then
00405117 A1AC9B4000       mov eax,[$00409bac]
0040511C 85C0             test eax,eax
0040511E 7405             jz $00405125
00405120 83E804           sub eax,$04
00405123 8B00             mov eax,[eax]
00405125 85C0             test eax,eax

Project172.dpr.24: if su2 = '' then
00405127 833DB09B400000   cmp dword ptr [$00409bb0],$00 
```

如果禁用优化，差异会更大。

```
Project172.dpr.14: if Length(sa1) = 0 then
004050E2 A19C9B4000       mov eax,[$00409b9c]
004050E7 8945EC           mov [ebp-$14],eax
004050EA 837DEC00         cmp dword ptr [ebp-$14],$00
004050EE 740B             jz $004050fb
004050F0 8B45EC           mov eax,[ebp-$14]
004050F3 83E804           sub eax,$04
004050F6 8B00             mov eax,[eax]
004050F8 8945EC           mov [ebp-$14],eax
004050FB 837DEC00         cmp dword ptr [ebp-$14],$00

Project172.dpr.16: if sa2 = '' then
004050FF 833DA09B400000   cmp dword ptr [$00409ba0],$00

Project172.dpr.18: if Length(sw1) = 0 then
00405106 A1A49B4000       mov eax,[$00409ba4]
0040510B 8945E8           mov [ebp-$18],eax
0040510E 837DE800         cmp dword ptr [ebp-$18],$00
00405112 740D             jz $00405121
00405114 8B45E8           mov eax,[ebp-$18]
00405117 83E804           sub eax,$04
0040511A 8B00             mov eax,[eax]
0040511C D1E8             shr eax,1
0040511E 8945E8           mov [ebp-$18],eax
00405121 837DE800         cmp dword ptr [ebp-$18],$00

Project172.dpr.20: if sw2 = '' then
00405125 A1A89B4000       mov eax,[$00409ba8]
0040512A 33D2             xor edx,edx
0040512C E81FE8FFFF       call @WStrEqual

Project172.dpr.22: if Length(su1) = 0 then
00405131 A1AC9B4000       mov eax,[$00409bac]
00405136 8945E4           mov [ebp-$1c],eax
00405139 837DE400         cmp dword ptr [ebp-$1c],$00
0040513D 740B             jz $0040514a
0040513F 8B45E4           mov eax,[ebp-$1c]
00405142 83E804           sub eax,$04
00405145 8B00             mov eax,[eax]
00405147 8945E4           mov [ebp-$1c],eax
0040514A 837DE400         cmp dword ptr [ebp-$1c],$00

Project172.dpr.24: if su2 = '' then
0040514E 833DB09B400000   cmp dword ptr [$00409bb0],$00 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-05-16T13:58:03.003

从语义上讲，它们是相同的，不会有明显的性能差异。因此，我们只能为代码的读者寻找清晰性。

```
if Str='' then 
```

在我看来是可读的版本。看看你的问题的标题：

> 检查空字符串的更好方法是什么？

在您的脑海中，您将其视为空字符串，而不是长度为 0 的字符串。因此，请按照与您的观点相匹配的方式编写代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T14:03:15.223

为了扩展[@gabr 的答案](https://stackoverflow.com/a/10620303/320333)，如果我们修改源以添加额外的比较`EmptyAnsiStr/EmptyWideStr/EmptyStr`，我们会看到来自 XE1 的以下反汇编：

```
Project1.dpr.21: if sa3 = EmptyAnsiStr then
004111DD A1807E4100       mov eax,[$00417e80]
004111E2 8B15EC2C4100     mov edx,[$00412cec]
004111E8 8B12             mov edx,[edx]
004111EA E83148FFFF       call @LStrEqual

Project1.dpr.27: if sw3 = EmptyWideStr then
0041120D A18C7E4100       mov eax,[$00417e8c]
00411212 8B15E82C4100     mov edx,[$00412ce8]
00411218 8B12             mov edx,[edx]
0041121A E8CD49FFFF       call @WStrEqual

Project1.dpr.33: if su3 = EmptyStr then
00411236 A1987E4100       mov eax,[$00417e98]
0041123B 8B15BC2D4100     mov edx,[$00412dbc]
00411241 8B12             mov edx,[edx]
00411243 E8DC4CFFFF       call @UStrEqual 
```

所有 3 个都需要函数调用。

# vb6 - VB6 Excel.Application 对象“权限被拒绝”

> ID：10619805
> 
> 赞同：3
> 
> 时间：2012-05-16T13:39:24.937
> 
> 标签：vb6, excel, vba

> > 我放弃了，将所有内容发送到 XLS VBA。谢谢！

我必须在 Win7 和 Office2010 (v14.0 32bits) 环境中对 VB6 程序进行小修改。目前该程序尝试通过以下代码行实例化：

```
Dim objExcel as Excel.Application
Set objExcel = New Excel.Application 
```

在执行第二行代码后，我看到了错误 70: Permission Denied。我已经在 Excel VBA 上尝试了一个简单的测试，对于同一行代码，效果很好。

有什么线索吗？应该运行的服务是否可能已关闭？我应该做些什么来避免重新安装 Office？

我收集的提示：

1.  已尝试在 DCOMCNFG 上配置权限，但无法找到 Excel 应用程序。

2.  已尝试运行 excel.exe /regserver 但似乎没有任何反应：当 Excel 应该静默运行时，它照常运行。

3.  运行 ProcessMonitor 并发现调用`Excel.exe \automation`显示`Path Not Found`（我检查了路径，没问题，我猜这`\automation`很麻烦）。

4.  如果我更改代码以实例化 Word 应用程序（当然还有 dll 引用），则会出现相同的错误。

5.  授予 Office14 文件夹的完全权限。图片在以下链接： http: [//i.stack.imgur.com/sgZW5.png](http://i.stack.imgur.com/sgZW5.png) （抱歉，作为新用户，无法发布图片）

提前致谢。

加布里埃尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-31T17:06:10.437

我遇到了类似的问题，我在我的访问 DB VBA 中使用打开 excel 文件，因此我使用命令“Set xlApp = CreateObject("Excel.Application")”，突然有一天开始抛出错误 70 Access denied 和在它正常工作了几个月之前。我开始用谷歌搜索它，当我得知这是 DCOM 错误时，我意识到问题的根源。因为几天前我试图将装有 OPC 客户端的 PC 连接到 OPC 服务器，并且需要更改我的本地默认 DCOM 设置，所以我需要更改默认身份验证级别。所以我的问题的解决方案是：

1.  在命令行中运行命令 dcomcnfg

2.  转到控制台根目录 > 组件服务 > 计算机 > 我的电脑 > DCOM 配置 > Microsof Excel 应用程序

3.  右键单击并选择属性

4.  在常规选项卡中，将身份验证级别更改为“无”

并找到它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:31:56.177

尝试这个

1) 打开 Windows 资源管理器并导航到`C:\Program Files (x86)\Microsoft Office`

3）右键单击文件夹“Office14”，然后单击“属性”

4) 导航到“安全”选项卡

5) 将“完全控制”授予 [Machine]\Users。

6) 现在尝试再次运行您的 vb6 应用程序

![在此处输入图像描述](../Images/421b0313744a39058758a05b0761b0d3.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T07:00:57.060

它让我震惊：从您的屏幕截图中，您似乎在 64 位 Windows 上运行 Office 32 位。

因此，默认情况下，当您打开 DCOMCNFG.exe 时，您访问的是 64 位版本。它允许您编辑 64 位 COM 组件。并解释了为什么在那里找不到 Excel，因为 Excel 是在 WoW64 中运行的。

您应该尝试以下命令：

```
C:\Windows\System32\mmc.exe comexp.msc /32 
```

打开 32 位控制台。从那里您应该找到 Excel 的 COM 组件的设置，并编辑其权限。允许所有人访问，然后再次尝试运行您的程序。如果这可行，您应该在后面微调您的权限以仅允许特定用户（允许 DCOM 访问每个人是危险的......）。

希望有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-26T20:08:47.230

在 DCOM CONFIG 中尝试设置以下内容：

1.  常规选项卡 -> 身份验证级别 -> 无
2.  身份选项卡-> 选择“交互式用户”

希望这可以帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T16:23:37.357

您是否检查了机器上的 DCOM*默认*安全设置？这些位于组件服务 MMC 管理单元中“我的电脑”的属性中。你仍然可以通过运行到达那里`dcomcnfg`。

# java - Swing 项目崩溃了

> ID：10619808
> 
> 赞同：-2
> 
> 时间：2012-05-16T13:39:30.160
> 
> 标签：java, swing, matlab

在 java 项目中，我调用了一个 MATLAB 项目。我可以在控制台中运行该项目（运行时间超过 5 秒），但是当我在 GUI(Swing) 部分中运行它时，它会因以下报告而崩溃。请帮我！谢谢你。

我认为我的问题与 one.mathworks.com/matlabcentral/newsreader/view_thread/251694 类似。但是，我不明白。

```
#
# An unexpected error has been detected by Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x65a83427, pid=2864, tid=4760
#
# Java VM: Java HotSpot(TM) Client VM (1.6.0-b105 mixed mode)
# Problematic frame:
# C  [jvm.dll+0x3427]
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
#

---------------  T H R E A D  ---------------

Current thread (0x0840d800):  JavaThread "Unknown thread" [_thread_in_native, id=4760]

siginfo: ExceptionCode=0xc0000005, writing address 0x00000164

Registers:
EAX=0x00000002, EBX=0x0840d8e8, ECX=0x0840d7c0, EDX=0x00000002
ESP=0x0a6de4d4, EBP=0x0a6de4d8, ESI=0x00000000, EDI=0x082e0ca0
EIP=0x65a83427, EFLAGS=0x00010246

Top of Stack: (sp=0x0a6de4d4)
0x0a6de4d4:   00000000 0a6de4fc 65b483e0 00000000
0x0a6de4e4:   00000006 082e0ca0 0840d8e8 00000000
0x0a6de4f4:   082ea3c0 00000000 0a6de518 786a1463
0x0a6de504:   0840d8e8 082e0ca0 0840d800 180942f8
0x0a6de514:   180942f8 0a6de554 0a84a460 0840d8e8
0x0a6de524:   0a6de55c 0a6de564 00000007 78e6a575
0x0a6de534:   0a6de534 180942f8 0a6de564 18100630
0x0a6de544:   00000000 180942f8 00000000 0a6de564 

Instructions: (pc=0x65a83427)
0x65a83417:   64 01 00 00 5e 5d c3 cc cc 55 8b ec 56 8b 75 08
0x65a83427:   c7 86 64 01 00 00 05 00 00 00 83 3d 58 ce d6 65 

Stack: [0x09ee0000,0x0a6e0000),  sp=0x0a6de4d4,  free space=8185k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
C  [jvm.dll+0x3427]
C  [jvm.dll+0xc83e0]
C  0x786a1463
j  java.lang.Class.getPrimitiveClass(Ljava/lang/String;)Ljava/lang/Class;+0
j  java.lang.Float.<clinit>()V+2
v  ~StubRoutines::call_stub

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
j  java.lang.Class.getPrimitiveClass(Ljava/lang/String;)Ljava/lang/Class;+0
j  java.lang.Float.<clinit>()V+2
v  ~StubRoutines::call_stub
j  java.util.HashMap.<init>(IF)V+56
j  java.util.HashMap.<init>(I)V+4
j  sun.misc.SoftCache.<init>(I)V+26
j  java.lang.Thread.<clinit>()V+28
v  ~StubRoutines::call_stub

---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
=>0x0840d800 JavaThread "Unknown thread" [_thread_in_native, id=4760]

Other Threads:
  0x08363c00 VMThread [id=1460]

VM state:not at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread: None

Heap
 def new generation   total 14784K, used 263K [0x10080000, 0x11080000, 0x12080000)
  eden space 13184K,   2% used [0x10080000, 0x100c1ec8, 0x10d60000)
  from space 1600K,   0% used [0x10d60000, 0x10d60000, 0x10ef0000)
  to   space 1600K,   0% used [0x10ef0000, 0x10ef0000, 0x11080000)
 tenured generation   total 49152K, used 0K [0x12080000, 0x15080000, 0x18080000)
   the space 49152K,   0% used [0x12080000, 0x12080000, 0x12080200, 0x15080000)
 compacting perm gen  total 32768K, used 518K [0x18080000, 0x1a080000, 0x1c080000)
   the space 32768K,   1% used [0x18080000, 0x18101a00, 0x18101a00, 0x1a080000)
No shared spaces configured.

Dynamic libraries:
0x00e20000 - 0x00e4f000     C:\Program Files\Java\jre7\bin\javaw.exe
0x76f80000 - 0x770bc000     C:\Windows\SYSTEM32\ntdll.dll
0x76db0000 - 0x76e84000     C:\Windows\system32\kernel32.dll
0x75190000 - 0x751da000     C:\Windows\system32\KERNELBASE.dll
0x768e0000 - 0x76980000     C:\Windows\system32\ADVAPI32.dll
0x75ae0000 - 0x75b8c000     C:\Windows\system32\msvcrt.dll
0x76cf0000 - 0x76d09000     C:\Windows\SYSTEM32\sechost.dll
0x76c40000 - 0x76ce1000     C:\Windows\system32\RPCRT4.dll
0x770e0000 - 0x771a9000     C:\Windows\system32\USER32.dll
0x754f0000 - 0x7553e000     C:\Windows\system32\GDI32.dll
0x754e0000 - 0x754ea000     C:\Windows\system32\LPK.dll
0x76d10000 - 0x76dad000     C:\Windows\system32\USP10.dll
0x74050000 - 0x741ee000     C:\Windows\WinSxS\x86_microsoft.windows.common-controls_6595b64144ccf1df_6.0.7601.17514_none_41e6975e2bd6f2b2\COMCTL32.dll
0x76f20000 - 0x76f77000     C:\Windows\system32\SHLWAPI.dll
0x768c0000 - 0x768df000     C:\Windows\system32\IMM32.DLL
0x75410000 - 0x754dc000     C:\Windows\system32\MSCTF.dll
0x659c0000 - 0x65a7e000     C:\Program Files\Java\jre7\bin\msvcr100.dll
0x65a80000 - 0x65da8000     C:\Program Files\Java\jre7\bin\client\jvm.dll
0x70ab0000 - 0x70ab7000     C:\Windows\system32\WSOCK32.dll
0x755d0000 - 0x75605000     C:\Windows\system32\WS2_32.dll
0x770d0000 - 0x770d6000     C:\Windows\system32\NSI.dll
0x738d0000 - 0x73902000     C:\Windows\system32\WINMM.dll
0x770c0000 - 0x770c5000     C:\Windows\system32\PSAPI.DLL
0x68180000 - 0x6818c000     C:\Program Files\Java\jre7\bin\verify.dll
0x68160000 - 0x68180000     C:\Program Files\Java\jre7\bin\java.dll
0x659a0000 - 0x659b3000     C:\Program Files\Java\jre7\bin\zip.dll
0x6b490000 - 0x6b5d2000     C:\Program Files\Java\jre7\bin\awt.dll
0x75540000 - 0x755cf000     C:\Windows\system32\OLEAUT32.dll
0x757c0000 - 0x7591c000     C:\Windows\system32\ole32.dll
0x73ac0000 - 0x73ad3000     C:\Windows\system32\DWMAPI.DLL
0x73db0000 - 0x73df0000     C:\Windows\system32\uxtheme.dll
0x6c530000 - 0x6c539000     C:\Program Files\Common Files\Spigot\Search Settings\wth.dll
0x70ac0000 - 0x70b63000     C:\Windows\WinSxS\x86_microsoft.vc90.crt_1fc8b3b9a1e18e3b_9.0.30729.4940_none_50916076bcb9a742\MSVCR90.dll
0x10000000 - 0x1007c000     E:\Program Files\DigitalPersona\Bin\DpoFeedb.dll
0x74720000 - 0x74737000     C:\Windows\system32\USERENV.dll
0x75110000 - 0x7511b000     C:\Windows\system32\profapi.dll
0x75060000 - 0x7506c000     C:\Windows\system32\CRYPTBASE.dll
0x04380000 - 0x043db000     E:\Program Files\DigitalPersona\Bin\DpoSet.dll
0x69370000 - 0x69533000     C:\Windows\system32\d3d9.dll
0x745c0000 - 0x745c9000     C:\Windows\system32\VERSION.dll
0x6c140000 - 0x6c146000     C:\Windows\system32\d3d8thk.dll
0x68bf0000 - 0x69369000     C:\Windows\system32\nvd3dum.dll
0x74020000 - 0x74045000     C:\Windows\system32\powrprof.dll
0x76aa0000 - 0x76c3d000     C:\Windows\system32\SETUPAPI.dll
0x752a0000 - 0x752c7000     C:\Windows\system32\CFGMGR32.dll
0x753f0000 - 0x75402000     C:\Windows\system32\DEVOBJ.dll
0x75bf0000 - 0x7683a000     C:\Windows\system32\SHELL32.dll
0x70d50000 - 0x70dd4000     C:\Windows\WinSxS\x86_microsoft.windows.common-controls_6595b64144ccf1df_5.82.7601.17514_none_ec83dffa859149af\comctl32.dll
0x61d90000 - 0x61dba000     C:\Program Files\Java\jre7\bin\fontmanager.dll
0x656f0000 - 0x65704000     C:\Program Files\Java\jre7\bin\net.dll
0x74b70000 - 0x74bac000     C:\Windows\system32\mswsock.dll
0x74b40000 - 0x74b46000     C:\Windows\System32\wship6.dll
0x656e0000 - 0x656ef000     C:\Program Files\Java\jre7\bin\nio.dll
0x72e30000 - 0x72e61000     C:\Program Files\Java\jre7\bin\t2k.dll
0x75010000 - 0x7505c000     C:\Windows\system32\apphelp.dll
0x76e90000 - 0x76f13000     C:\Windows\system32\CLBCatQ.DLL
0x06eb0000 - 0x07048000     C:\Windows\system32\NetworkExplorer.dll
0x73ee0000 - 0x73fd5000     C:\Windows\system32\PROPSYS.dll
0x73420000 - 0x73441000     C:\Windows\system32\ntmarta.dll
0x76840000 - 0x76885000     C:\Windows\system32\WLDAP32.dll
0x6e740000 - 0x6e76e000     C:\Windows\System32\shdocvw.dll
0x73140000 - 0x7314a000     C:\Windows\system32\slc.dll
0x70580000 - 0x70592000     C:\Windows\system32\MPR.dll
0x716c0000 - 0x716c8000     C:\Windows\System32\drprov.dll
0x75070000 - 0x75099000     C:\Windows\System32\WINSTA.dll
0x716e0000 - 0x716f4000     C:\Windows\System32\ntlanman.dll
0x6d960000 - 0x6d977000     C:\Windows\System32\davclnt.dll
0x6cda0000 - 0x6cda8000     C:\Windows\System32\DAVHLPR.dll
0x74960000 - 0x7496f000     C:\Windows\system32\wkscli.dll
0x701f0000 - 0x701fb000     C:\Windows\system32\cscapi.dll
0x74b30000 - 0x74b39000     C:\Windows\system32\netutils.dll
0x71f30000 - 0x72168000     C:\Windows\system32\wpdshext.dll
0x73c20000 - 0x73db0000     C:\Windows\WinSxS\x86_microsoft.windows.gdiplus_6595b64144ccf1df_1.1.7601.17825_none_72d273598668a06b\gdiplus.dll
0x6dde0000 - 0x6de69000     C:\Windows\system32\PortableDeviceApi.dll
0x75270000 - 0x7529d000     C:\Windows\system32\WINTRUST.dll
0x752d0000 - 0x753ed000     C:\Windows\system32\CRYPT32.dll
0x75180000 - 0x7518c000     C:\Windows\system32\MSASN1.dll
0x72d90000 - 0x72dcf000     C:\Windows\system32\audiodev.dll
0x61640000 - 0x618a7000     C:\Windows\system32\WMVCore.DLL
0x72b10000 - 0x72b4d000     C:\Windows\system32\WMASF.DLL
0x6e9c0000 - 0x6e9f1000     C:\Windows\system32\EhStorShell.dll
0x6cd70000 - 0x6cd92000     C:\Windows\system32\EhStorAPI.dll
0x73990000 - 0x73a8b000     C:\Windows\system32\WindowsCodecs.dll
0x00990000 - 0x009a7000     C:\Users\Administrator\AppData\Roaming\Dropbox\bin\DropboxExt.14.dll
0x6fc90000 - 0x6fd7b000     C:\Windows\system32\dbghelp.dll
0x7c3a0000 - 0x7c41b000     C:\Users\Administrator\AppData\Roaming\Dropbox\bin\MSVCP71.dll
0x7c340000 - 0x7c396000     C:\Users\Administrator\AppData\Roaming\Dropbox\bin\MSVCR71.dll
0x6e950000 - 0x6e9ba000     C:\Windows\System32\cscui.dll
0x6e940000 - 0x6e949000     C:\Windows\System32\CSCDLL.dll
0x6e8d0000 - 0x6e940000     C:\Windows\system32\ntshrui.dll
0x74f50000 - 0x74f69000     C:\Windows\system32\srvcli.dll
0x088a0000 - 0x08a06000     E:\Program Files\MATLAB\R2008a\bin\win32\nativemcl.dll
0x7ad60000 - 0x7adb2000     e:\Program Files\MATLAB\R2008a\bin\win32\libmx.dll
0x7ac90000 - 0x7ad5b000     e:\Program Files\MATLAB\R2008a\bin\win32\libut.dll
0x76890000 - 0x768ba000     C:\Windows\system32\imagehlp.dll
0x7b4d0000 - 0x7b4ef000     e:\Program Files\MATLAB\R2008a\bin\win32\LIBEXPAT.dll
0x70cb0000 - 0x70d4b000     C:\Windows\WinSxS\x86_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.6195_none_d09154e044272b9a\MSVCR80.dll
0x7b040000 - 0x7b117000     e:\Program Files\MATLAB\R2008a\bin\win32\icuuc36.dll
0x7a820000 - 0x7a824000     e:\Program Files\MATLAB\R2008a\bin\win32\icudt36.dll
0x7a830000 - 0x7a83c000     e:\Program Files\MATLAB\R2008a\bin\win32\icuio36.dll
0x7aaf0000 - 0x7abb2000     e:\Program Files\MATLAB\R2008a\bin\win32\icuin36.dll
0x70a20000 - 0x70aa7000     C:\Windows\WinSxS\x86_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.6195_none_d09154e044272b9a\MSVCP80.dll
0x78680000 - 0x78692000     e:\Program Files\MATLAB\R2008a\bin\win32\zlib1.dll
0x08240000 - 0x082be000     e:\Program Files\MATLAB\R2008a\bin\win32\mclmcr.dll
0x79710000 - 0x79746000     e:\Program Files\MATLAB\R2008a\bin\win32\mcr.dll
0x7a840000 - 0x7a857000     e:\Program Files\MATLAB\R2008a\bin\win32\iqm.dll
0x7adc0000 - 0x7af93000     e:\Program Files\MATLAB\R2008a\bin\win32\libmwservices.dll
0x7afa0000 - 0x7b036000     e:\Program Files\MATLAB\R2008a\bin\win32\libmwmathutil.dll
0x791b0000 - 0x791e3000     e:\Program Files\MATLAB\R2008a\bin\win32\mpath.dll
0x7b500000 - 0x7b515000     e:\Program Files\MATLAB\R2008a\bin\win32\mlutil.dll
0x75620000 - 0x7569b000     C:\Windows\system32\comdlg32.dll
0x74b50000 - 0x74b61000     C:\Windows\system32\NETAPI32.dll
0x78550000 - 0x7856a000     e:\Program Files\MATLAB\R2008a\bin\win32\bridge.dll
0x7a870000 - 0x7a87e000     e:\Program Files\MATLAB\R2008a\bin\win32\libmex.dll
0x795e0000 - 0x79638000     e:\Program Files\MATLAB\R2008a\bin\win32\m_dispatcher.dll
0x78570000 - 0x7858c000     e:\Program Files\MATLAB\R2008a\bin\win32\datasvcs.dll
0x78a30000 - 0x78bf2000     e:\Program Files\MATLAB\R2008a\bin\win32\xerces-c_2_7.dll
0x79c90000 - 0x7a1a0000     e:\Program Files\MATLAB\R2008a\bin\win32\m_interpreter.dll
0x78590000 - 0x785b1000     e:\Program Files\MATLAB\R2008a\bin\win32\libmat.dll
0x7abc0000 - 0x7ac85000     e:\Program Files\MATLAB\R2008a\bin\win32\libhdf5.dll
0x794f0000 - 0x79539000     e:\Program Files\MATLAB\R2008a\bin\win32\profiler.dll
0x7a8d0000 - 0x7a8d9000     e:\Program Files\MATLAB\R2008a\bin\win32\libmwmathrng.dll
0x78600000 - 0x78612000     e:\Program Files\MATLAB\R2008a\bin\win32\m_pcodeio.dll
0x79170000 - 0x791a4000     e:\Program Files\MATLAB\R2008a\bin\win32\m_ir.dll
0x797c0000 - 0x79c8b000     e:\Program Files\MATLAB\R2008a\bin\win32\m_parser.dll
0x7a860000 - 0x7a86d000     e:\Program Files\MATLAB\R2008a\bin\win32\ir_xfmr.dll
0x782e0000 - 0x78411000     e:\Program Files\MATLAB\R2008a\bin\win32\mcos.dll
0x7a900000 - 0x7a90a000     e:\Program Files\MATLAB\R2008a\bin\win32\mtok.dll

VM Arguments:
jvm_args: -Xss512k -XX:PermSize=32M -Xms64m -XX:NewRatio=3 -XX:MaxPermSize=64M -Xmx128m -XX:MaxDirectMemorySize=1200000000 -Dsun.java2d.noddraw=true -Dsun.awt.nopixfmt=true -Xshare:off -Xrs -Djava.library.path=e:\Program Files\MATLAB\R2008a\bin\win32 vfprintf abort
java_command: <unknown>
Launcher Type: generic

Environment Variables:
JAVA_HOME=C:\Program Files\Java\jdk1.7.0_02
CLASSPATH=.;E:\Program Files\Java\jre6\lib\ext\QTJava.zip
PATH=C:/Program Files/Java/jre7/bin/client;C:/Program Files/Java/jre7/bin;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\Common Files\Thunder Network\KanKan\Codecs;C:\Program Files\Broadcom\Broadcom 802.11\Driver;C:\Program Files\Microsoft SQL Server\90\Tools\binn\;C:\Program Files\Common Files\Teleca Shared;C:\Program Files\QuickTime\QTSystem\;E:\Program Files\cvsnt;C:\Program Files\cvsnt;e:\Program Files\MATLAB\R2008a\bin;e:\Program Files\MATLAB\R2008a\bin\win32;
USERNAME=Administrator
OS=Windows_NT
PROCESSOR_IDENTIFIER=x86 Family 6 Model 23 Stepping 10, GenuineIntel

---------------  S Y S T E M  ---------------

OS: Windows NT 6.1 Build 7601 Service Pack 1

CPU:total 2 family 6, cmov, cx8, fxsr, mmx, sse, sse2

Memory: 4k page, physical 2095060k(531652k free), swap 4190120k(1770128k free)

vm_info: Java HotSpot(TM) Client VM (1.6.0-b105) for windows-x86, built on Nov 29 2006 00:48:48 by "java_re" with unknown MS VC++:1310 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:52:48.767

清单的第 8 行显示您的程序在`jvm.dll`调用 offset 处的代码时在名为的本机库中失败`0x3427`。执行堆栈跟踪从第 57 行开始，并逐步建立；第 42 行是同样的致命错误。其余部分描述当时的处理器状态。

如果共享库不是 Java 运行时环境 (JRE) 所期望的，就会发生这种情况。Matlab 的表示`Float`可能在版本之间发生了变化；您可能需要检查您的安装。

为了比较，[这里](https://stackoverflow.com/a/6673044/230513)看到了类似的分析；行号如下所示。

```
     1#
     2 # Java Runtime Environment 检测到意外错误：
     3#
     4 # EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x65a83427, pid=2864, tid=4760
     5#
     6 # Java VM：Java HotSpot(TM) Client VM（1.6.0-b105混合模式）
     7 # 有问题的框架：
     8 # C [jvm.dll+0x3427]
     9#
    10 # 如果您想提交错误报告，请访问：
    11 # http://java.sun.com/webapps/bugreport/crash.jsp
    12#
    13      
    14 --------------- 螺纹 ---------------
    15      
    16 当前线程 (0x0840d800): JavaThread "未知线程" [_thread_in_native, id=4760]
    17      
    18 siginfo：ExceptionCode=0xc0000005，写入地址0x00000164
    19      
    20 个寄存器：
    21 EAX=0x00000002，EBX=0x0840d8e8，ECX=0x0840d7c0，EDX=0x00000002
    22 ESP=0x0a6de4d4，EBP=0x0a6de4d8，ESI=0x00000000，EDI=0x082e0ca0
    23 EIP=0x65a83427，EFLAGS=0x00010246
    24      
    25 栈顶：（sp=0x0a6de4d4）
    26 0x0a6de4d4: 00000000 0a6de4fc 65b483e0 00000000
    27 0x0a6de4e4: 00000006 082e0ca0 0840d8e8 00000000
    28 0x0a6de4f4：082ea3c0 00000000 0a6de518 786a1463
    29 0x0a6de504：0840d8e8 082e0ca0 0840d800 180942f8
    30 0x0a6de514: 180942f8 0a6de554 0a84a460 0840d8e8
    31 0x0a6de524：0a6de55c 0a6de564 00000007 78e6a575
    32 0x0a6de534：0a6de534 180942f8 0a6de564 18100630
    33 0x0a6de544：00000000 180942f8 00000000 0a6de564
    34      
    35条指令：（pc=0x65a83427）
    36 0x65a83417: 64 01 00 00 5e 5d c3 cc cc 55 8b ec 56 8b 75 08
    37 0x65a83427：c7 86 64 01 00 00 05 00 00 00 83 3d 58 ce d6 65
    38      
    39      
    40 堆栈：[0x09ee0000,0x0a6e0000)，sp=0x0a6de4d4，可用空间=8185k
    41 个本机帧：（J=编译的 Java 代码，j=解释的，Vv=VM 代码，C=本机代码）
    42 C [jvm.dll+0x3427]
    43 C [jvm.dll+0xc83e0]
    44 C 0x786a1463
    45 j java.lang.Class.getPrimitiveClass(Ljava/lang/String;)Ljava/lang/Class;+0
    46 j java.lang.Float.()V+2
    47 v ~StubRoutines::call_stub
    48      
    49 个 Java 帧：（J=编译的 Java 代码，j=解释的，Vv=VM 代码）
    50 j java.lang.Class.getPrimitiveClass(Ljava/lang/String;)Ljava/lang/Class;+0
    51 j java.lang.Float.()V+2
    52 v ~StubRoutines::call_stub
    53 j java.util.HashMap.(IF)V+56
    54 j java.util.HashMap.(I)V+4
    55 j sun.misc.SoftCache.(I)V+26
    56 j java.lang.Thread.()V+28
    57 v ~StubRoutines::call_stub
    58      
    59 --------------- 过程 ---------------
    60      
    61 个 Java 线程：（=> 当前线程）
    62 => 0x0840d800 JavaThread“未知线程”[_thread_in_native，id=4760]
    63      
    64 其他主题：
    65 0x08363c00 VMThread [id=1460]
    66      
    67 VM 状态：不在安全点（正常执行）
    68      
    69 VM Mutex/Monitor 当前由一个线程拥有：无
    70      
    71 堆
    72 def new generation 总计 14784K，使用 263K [0x10080000, 0x11080000, 0x12080000)
    73 伊甸园空间 13184K, 2% 已使用 [0x10080000, 0x100c1ec8, 0x10d60000)
    74 来自空间 1600K，0% 已使用 [0x10d60000, 0x10d60000, 0x10ef0000)
    75 到 1600K 空间，使用 0% [0x10ef0000, 0x10ef0000, 0x11080000)
    76个tenured generation总共49152K，使用了0K [0x12080000, 0x15080000, 0x18080000)
    77 空间 49152K, 0% 已使用 [0x12080000, 0x12080000, 0x12080200, 0x15080000)
    78 次压缩 perm 总 32768K，使用 518K [0x18080000, 0x1a080000, 0x1c080000)
    79 空间 32768K, 1% 已用 [0x18080000, 0x18101a00, 0x18101a00, 0x1a080000)
    80 未配置共享空间。
    81      
    82个动态库：
    83 0x00e20000 - 0x00e4f000 C:\Program Files\Java\jre7\bin\javaw.exe
    84 0x76f80000 - 0x770bc000 C:\Windows\SYSTEM32\ntdll.dll
    85 0x76db0000 - 0x76e84000 C:\Windows\system32\kernel32.dll
    86 0x75190000 - 0x751da000 C:\Windows\system32\KERNELBASE.dll
    87 0x768e0000 - 0x76980000 C:\Windows\system32\ADVAPI32.dll
    88 0x75ae0000 - 0x75b8c000 C:\Windows\system32\msvcrt.dll
    89 0x76cf0000 - 0x76d09000 C:\Windows\SYSTEM32\sechost.dll
    90 0x76c40000 - 0x76ce1000 C:\Windows\system32\RPCRT4.dll
    91 0x770e0000 - 0x771a9000 C:\Windows\system32\USER32.dll
    92 0x754f0000 - 0x7553e000 C:\Windows\system32\GDI32.dll
    93 0x754e0000 - 0x754ea000 C:\Windows\system32\LPK.dll
    94 0x76d10000 - 0x76dad000 C:\Windows\system32\USP10.dll
    95 0x74050000 - 0x741ee000 C:\Windows\WinSxS\x86_microsoft.windows.common-controls_6595b64144ccf1df_6.0.7601.17514_none_41e6975e2bd6f2b2\COMCTL32.dll
    96 0x76f20000 - 0x76f77000 C:\Windows\system32\SHLWAPI.dll
    97 0x768c0000 - 0x768df000 C:\Windows\system32\IMM32.DLL
    98 0x75410000 - 0x754dc000 C:\Windows\system32\MSCTF.dll
    99 0x659c0000 - 0x65a7e000 C:\Program Files\Java\jre7\bin\msvcr100.dll
   100 0x65a80000 - 0x65da8000 C:\Program Files\Java\jre7\bin\client\jvm.dll
   101 0x70ab0000 - 0x70ab7000 C:\Windows\system32\WSOCK32.dll
   102 0x755d0000 - 0x75605000 C:\Windows\system32\WS2_32.dll
   103 0x770d0000 - 0x770d6000 C:\Windows\system32\NSI.dll
   104 0x738d0000 - 0x73902000 C:\Windows\system32\WINMM.dll
   105 0x770c0000 - 0x770c5000 C:\Windows\system32\PSAPI.DLL
   106 0x68180000 - 0x6818c000 C:\Program Files\Java\jre7\bin\verify.dll
   107 0x68160000 - 0x68180000 C:\Program Files\Java\jre7\bin\java.dll
   108 0x659a0000 - 0x659b3000 C:\Program Files\Java\jre7\bin\zip.dll
   109 0x6b490000 - 0x6b5d2000 C:\Program Files\Java\jre7\bin\awt.dll
   110 0x75540000 - 0x755cf000 C:\Windows\system32\OLEAUT32.dll
   111 0x757c0000 - 0x7591c000 C:\Windows\system32\ole32.dll
   112 0x73ac0000 - 0x73ad3000 C:\Windows\system32\DWMAPI.DLL
   113 0x73db0000 - 0x73df0000 C:\Windows\system32\uxtheme.dll
   114 0x6c530000 - 0x6c539000 C:\Program Files\Common Files\Spigot\Search Settings\wth.dll
   115 0x70ac0000 - 0x70b63000 C:\Windows\WinSxS\x86_microsoft.vc90.crt_1fc8b3b9a1e18e3b_9.0.30729.4940_none_50916076bcb9a742\MSVCR90.dll
   116 0x10000000 - 0x1007c000 E:\Program Files\DigitalPersona\Bin\DpoFeedb.dll
   117 0x74720000 - 0x74737000 C:\Windows\system32\USERENV.dll
   118 0x75110000 - 0x7511b000 C:\Windows\system32\profapi.dll
   119 0x75060000 - 0x7506c000 C:\Windows\system32\CRYPTBASE.dll
   120 0x04380000 - 0x043db000 E:\Program Files\DigitalPersona\Bin\DpoSet.dll
   121 0x69370000 - 0x69533000 C:\Windows\system32\d3d9.dll
   122 0x745c0000 - 0x745c9000 C:\Windows\system32\VERSION.dll
   123 0x6c140000 - 0x6c146000 C:\Windows\system32\d3d8thk.dll
   124 0x68bf0000 - 0x69369000 C:\Windows\system32\nvd3dum.dll
   125 0x74020000 - 0x74045000 C:\Windows\system32\powrprof.dll
   126 0x76aa0000 - 0x76c3d000 C:\Windows\system32\SETUPAPI.dll
   127 0x752a0000 - 0x752c7000 C:\Windows\system32\CFGMGR32.dll
   128 0x753f0000 - 0x75402000 C:\Windows\system32\DEVOBJ.dll
   129 0x75bf0000 - 0x7683a000 C:\Windows\system32\SHELL32.dll
   130 0x70d50000 - 0x70dd4000 C:\Windows\WinSxS\x86_microsoft.windows.common-controls_6595b64144ccf1df_5.82.7601.17514_none_ec83dffa859149af\comctl32.dll
   131 0x61d90000 - 0x61dba000 C:\Program Files\Java\jre7\bin\fontmanager.dll
   132 0x656f0000 - 0x65704000 C:\Program Files\Java\jre7\bin\net.dll
   133 0x74b70000 - 0x74bac000 C:\Windows\system32\mswsock.dll
   134 0x74b40000 - 0x74b46000 C:\Windows\System32\wship6.dll
   135 0x656e0000 - 0x656ef000 C:\Program Files\Java\jre7\bin\nio.dll
   136 0x72e30000 - 0x72e61000 C:\Program Files\Java\jre7\bin\t2k.dll
   137 0x75010000 - 0x7505c000 C:\Windows\system32\apphelp.dll
   138 0x76e90000 - 0x76f13000 C:\Windows\system32\CLBCatQ.DLL
   139 0x06eb0000 - 0x07048000 C:\Windows\system32\NetworkExplorer.dll
   140 0x73ee0000 - 0x73fd5000 C:\Windows\system32\PROPSYS.dll
   141 0x73420000 - 0x73441000 C:\Windows\system32\ntmarta.dll
   142 0x76840000 - 0x76885000 C:\Windows\system32\WLDAP32.dll
   143 0x6e740000 - 0x6e76e000 C:\Windows\System32\shdocvw.dll
   144 0x73140000 - 0x7314a000 C:\Windows\system32\slc.dll
   145 0x70580000 - 0x70592000 C:\Windows\system32\MPR.dll
   146 0x716c0000 - 0x716c8000 C:\Windows\System32\drprov.dll
   147 0x75070000 - 0x75099000 C:\Windows\System32\WINSTA.dll
   148 0x716e0000 - 0x716f4000 C:\Windows\System32\ntlanman.dll
   149 0x6d960000 - 0x6d977000 C:\Windows\System32\davclnt.dll
   150 0x6cda0000 - 0x6cda8000 C:\Windows\System32\DAVHLPR.dll
   151 0x74960000 - 0x7496f000 C:\Windows\system32\wkscli.dll
   152 0x701f0000 - 0x701fb000 C:\Windows\system32\cscapi.dll
   153 0x74b30000 - 0x74b39000 C:\Windows\system32\netutils.dll
   154 0x71f30000 - 0x72168000 C:\Windows\system32\wpdshext.dll
   155 0x73c20000 - 0x73db0000 C:\Windows\WinSxS\x86_microsoft.windows.gdiplus_6595b64144ccf1df_1.1.7601.17825_none_72d273598668a06b\gdiplus.dll
   156 0x6dde0000 - 0x6de69000 C:\Windows\system32\PortableDeviceApi.dll
   157 0x75270000 - 0x7529d000 C:\Windows\system32\WINTRUST.dll
   158 0x752d0000 - 0x753ed000 C:\Windows\system32\CRYPT32.dll
   159 0x75180000 - 0x7518c000 C:\Windows\system32\MSASN1.dll
   160 0x72d90000 - 0x72dcf000 C:\Windows\system32\audiodev.dll
   161 0x61640000 - 0x618a7000 C:\Windows\system32\WMVCore.DLL
   162 0x72b10000 - 0x72b4d000 C:\Windows\system32\WMASF.DLL
   163 0x6e9c0000 - 0x6e9f1000 C:\Windows\system32\EhStorShell.dll
   164 0x6cd70000 - 0x6cd92000 C:\Windows\system32\EhStorAPI.dll
   165 0x73990000 - 0x73a8b000 C:\Windows\system32\WindowsCodecs.dll
   166 0x00990000 - 0x009a7000 C:\Users\Administrator\AppData\Roaming\Dropbox\bin\DropboxExt.14.dll
   167 0x6fc90000 - 0x6fd7b000 C:\Windows\system32\dbghelp.dll
   168 0x7c3a0000 - 0x7c41b000 C:\Users\Administrator\AppData\Roaming\Dropbox\bin\MSVCP71.dll
   169 0x7c340000 - 0x7c396000 C:\Users\Administrator\AppData\Roaming\Dropbox\bin\MSVCR71.dll
   170 0x6e950000 - 0x6e9ba000 C:\Windows\System32\cscui.dll
   171 0x6e940000 - 0x6e949000 C:\Windows\System32\CSCDLL.dll
   172 0x6e8d0000 - 0x6e940000 C:\Windows\system32\ntshrui.dll
   173 0x74f50000 - 0x74f69000 C:\Windows\system32\srvcli.dll
   174 0x088a0000 - 0x08a06000 E:\Program Files\MATLAB\R2008a\bin\win32\nativemcl.dll
   175 0x7ad60000 - 0x7adb2000 e:\Program Files\MATLAB\R2008a\bin\win32\libmx.dll
   176 0x7ac90000 - 0x7ad5b000 e:\Program Files\MATLAB\R2008a\bin\win32\libut.dll
   177 0x76890000 - 0x768ba000 C:\Windows\system32\imagehlp.dll
   178 0x7b4d0000 - 0x7b4ef000 e:\Program Files\MATLAB\R2008a\bin\win32\LIBXPAT.dll
   179 0x70cb0000 - 0x70d4b000 C:\Windows\WinSxS\x86_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.6195_none_d09154e044272b9a\MSVCR80.dll
   180 0x7b040000 - 0x7b117000 e:\Program Files\MATLAB\R2008a\bin\win32\icuuc36.dll
   181 0x7a820000 - 0x7a824000 e:\Program Files\MATLAB\R2008a\bin\win32\icudt36.dll
   182 0x7a830000 - 0x7a83c000 e:\Program Files\MATLAB\R2008a\bin\win32\icuio36.dll
   183 0x7aaf0000 - 0x7abb2000 e:\Program Files\MATLAB\R2008a\bin\win32\icuin36.dll
   184 0x70a20000 - 0x70aa7000 C:\Windows\WinSxS\x86_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.6195_none_d09154e044272b9a\MSVCP80.dll
   185 0x78680000 - 0x78692000 e:\Program Files\MATLAB\R2008a\bin\win32\zlib1.dll
   186 0x08240000 - 0x082be000 e:\Program Files\MATLAB\R2008a\bin\win32\mclmcr.dll
   187 0x79710000 - 0x79746000 e:\Program Files\MATLAB\R2008a\bin\win32\mcr.dll
   188 0x7a840000 - 0x7a857000 e:\Program Files\MATLAB\R2008a\bin\win32\iqm.dll
   189 0x7adc0000 - 0x7af93000 e:\Program Files\MATLAB\R2008a\bin\win32\libmwservices.dll
   190 0x7afa0000 - 0x7b036000 e:\Program Files\MATLAB\R2008a\bin\win32\libmwmathutil.dll
   191 0x791b0000 - 0x791e3000 e:\Program Files\MATLAB\R2008a\bin\win32\mpath.dll
   192 0x7b500000 - 0x7b515000 e:\Program Files\MATLAB\R2008a\bin\win32\mlutil.dll
   193 0x75620000 - 0x7569b000 C:\Windows\system32\comdlg32.dll
   194 0x74b50000 - 0x74b61000 C:\Windows\system32\NETAPI32.dll
   195 0x78550000 - 0x7856a000 e:\Program Files\MATLAB\R2008a\bin\win32\bridge.dll
   196 0x7a870000 - 0x7a87e000 e:\Program Files\MATLAB\R2008a\bin\win32\libmex.dll
   197 0x795e0000 - 0x79638000 e:\Program Files\MATLAB\R2008a\bin\win32\m_dispatcher.dll
   198 0x78570000 - 0x7858c000 e:\Program Files\MATLAB\R2008a\bin\win32\datasvcs.dll
   199 0x78a30000 - 0x78bf2000 e:\Program Files\MATLAB\R2008a\bin\win32\xerces-c_2_7.dll
   200 0x79c90000 - 0x7a1a0000 e:\Program Files\MATLAB\R2008a\bin\win32\m_interpreter.dll
   201 0x78590000 - 0x785b1000 e:\Program Files\MATLAB\R2008a\bin\win32\libmat.dll
   202 0x7abc0000 - 0x7ac85000 e:\Program Files\MATLAB\R2008a\bin\win32\libhdf5.dll
   203 0x794f0000 - 0x79539000 e:\Program Files\MATLAB\R2008a\bin\win32\profiler.dll
   204 0x7a8d0000 - 0x7a8d9000 e:\Program Files\MATLAB\R2008a\bin\win32\libmwmathrng.dll
   205 0x78600000 - 0x78612000 e:\Program Files\MATLAB\R2008a\bin\win32\m_pcodeio.dll
   206 0x79170000 - 0x791a4000 e:\Program Files\MATLAB\R2008a\bin\win32\m_ir.dll
   207 0x797c0000 - 0x79c8b000 e:\Program Files\MATLAB\R2008a\bin\win32\m_parser.dll
   208 0x7a860000 - 0x7a86d000 e:\Program Files\MATLAB\R2008a\bin\win32\ir_xfmr.dll
   209 0x782e0000 - 0x78411000 e:\Program Files\MATLAB\R2008a\bin\win32\mcos.dll
   210 0x7a900000 - 0x7a90a000 e:\Program Files\MATLAB\R2008a\bin\win32\mtok.dll
   211      
   212 虚拟机参数：
   213 jvm_args: -Xss512k -XX:PermSize=32M -Xms64m -XX:NewRatio=3 -XX:MaxPermSize=64M -Xmx128m -XX:MaxDirectMemorySize=1200000000 -Dsun.java2d.noddraw=true -Dsun.awt.nopixfmt=true - Xshare:off -Xrs -Djava.library.path=e:\Program Files\MATLAB\R2008a\bin\win32 vfprintf abort
   第214章
   215 发射器类型：通用
   216      
   217个环境变量：
   218 JAVA_HOME=C:\Program Files\Java\jdk1.7.0_02
   219 CLASSPATH=.;E:\Program Files\Java\jre6\lib\ext\QTJava.zip
   220 PATH=C:/Program Files/Java/jre7/bin/client;C:/Program Files/Java/jre7/bin;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem; C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\Common Files\Thunder Network\KanKan\Codecs;C:\Program Files\Broadcom\Broadcom 802.11\Driver;C:\Program Files\Microsoft SQL Server\90\Tools\binn\;C:\Program Files\Common Files\Teleca Shared;C:\Program Files\QuickTime\QTSystem\;E:\Program Files\cvsnt;C:\Program Files\cvsnt;e :\Program Files\MATLAB\R2008a\bin;e:\Program Files\MATLAB\R2008a\bin\win32;
   221 用户名=管理员
   222 操作系统=Windows_NT
   223 PROCESSOR_IDENTIFIER=x86 Family 6 Model 23 Stepping 10, GenuineIntel
   224      
   225      
   226      
   227 --------------- 系统 ---------------
   228      
   229 操作系统：Windows NT 6.1 Build 7601 Service Pack 1
   230      
   231 CPU：共 2 个系列 6、cmov、cx8、fxsr、mmx、sse、sse2
   232      
   233 内存：4k 页，物理 2095060k（531652k 空闲），交换 4190120k（1770128k 空闲）
   234      
   235 vm_info：适用于 windows-x86 的 Java HotSpot(TM) 客户端 VM (1.6.0-b105)，由“java_re”于 2006 年 11 月 29 日 00:48:48 构建，MS VC++:1310 未知

```

# c - 系统托盘中的 Windows 服务消息

> ID：10619809
> 
> 赞同：0
> 
> 时间：2012-05-16T13:39:35.763
> 
> 标签：c, windows, winapi, service, windows-services

我已经发布了一个类似的类似查询 [链接到我以前的帖子。](https://stackoverflow.com/questions/10561081/warning-window-once-the-user-tries-to-stop-a-service)

我仍然需要对这个话题做更多的澄清，

1) 一旦用户尝试停止 Windows 服务，我可以使用“WTSSendMessage”显示警告消息吗？（在所有版本的 Windows 中（XP、VISTA、7））。

2）如果上述方法不可行，**“我可以在我的计算机的系统托盘中显示警告消息吗”**

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:43:50.217

> `WTSSendMessage`一旦用户尝试停止 Windows 服务，我可以使用 显示警告消息吗？

是的你可以。MSDN 文档[Service Changes for Windows Vista](http://msdn.microsoft.com/en-us/library/windows/desktop/bb203962.aspx)说明了这一点（强调我的）：

> 服务始终在会话 0 中运行。在 Windows Vista 之前，第一个登录的用户也被分配到会话 0。现在，会话 0 专门为服务和其他与交互式用户会话无关的应用程序保留。（第一个登录的用户连接到会话 1，第二个登录的用户连接到会话 2，依此类推。）会话 0 不支持与用户交互的进程。此更改意味着服务无法向应用程序发布或发送消息，并且应用程序无法向服务发送或发布消息。此外，服务不能直接显示对话框等用户界面项。**服务可以使用 WTSSendMessage 函数在另一个会话中显示对话框**。

# android - 拍一张照片

> ID：10619810
> 
> 赞同：2
> 
> 时间：2012-05-16T13:39:36.497
> 
> 标签：android, android-camera

有一个简单的教程可以用我遵循的 android (http://developer.android.com/guide/topics/media/camera.html) 拍照。

```
private static final int CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE = 100;
protected void onTakePicture()
{
    // create Intent to take a picture and return control to the calling application    
    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);    
    // create a file to save the image    
    File file = Environment.getExternalStorageDirectory();
    String path = file.getAbsolutePath() + "/Android/data/com.myapplication/files";
    File dir = new File(path);
    if (!dir.isDirectory())
        dir.mkdirs();
    File outFile = new File(path + File.separator + "img.jpg");
    Uri fileUri = Uri.fromFile(outFile);
    intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri); 
    // set the image file name    
    // start the image capture Intent
    startActivityForResult(intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);        
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
    if (requestCode==CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE)
    {
         // Image captured and saved to fileUri specified in the Intent
        Uri fn = data.getData();
        Toast.makeText(this, "Image saved to:\n" + fn.toString(), Toast.LENGTH_LONG).show();
    }
} 
```

我在活动中调用它。现在的问题是，当camera Activity出现时，我可以拍多张照片，但我只想拍一张照片，然后返回调用的Activity。在我离开相机活动（通过按“后退”按钮）之前不会调用 onActivityResult。然后 data.getData() 崩溃。

有任何想法吗？

谢谢格哈德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:53:15.350

嗯......这对我来说可以捕捉图像：

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
activity.startActivityForResult(intent, AbstractActivity.CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE); 
```

当用户拍照时，它会询问用户是否愿意接受这张图片，然后它会回到我的活动中，我...

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) {
        if (resultCode == RESULT_OK) {
            handleAvatarUpload(data); // which uses Uri selectedImage = data.getData();
        } 
    }
} 
```

我没有收到任何有关此代码的崩溃报告，并且它已经在野外出现了几个月。我们的用户群与我们类别中的其他应用程序一致，Android 2.3.3 约占 71%，2.2 占 16.35%，2.1 占 5.7%

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-25T12:00:21.807

我知道这是一个老问题，但我遇到了同样的问题。

对我来说，它是通过不提供 URI 而是提供 URI 路径来解决的`myUri.getPath()`

以下应该做你想要的：

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri.getPath());
startActivityForResult(intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE); 
```

# android - 如何在输入时捕获 EditText 的文本长度？

> ID：10619814
> 
> 赞同：3
> 
> 时间：2012-05-16T13:40:00.973
> 
> 标签：android, android-edittext

我想从 EditText 中获取文本，然后在每次用户键入或**删除**值时获取文本的长度。

我用**InputFilter 过滤器**做到了，但我的经验是，输入过滤器不听删除键。

因此，例如，如果用户在我的 EditText 中写了一些东西，然后将其全部删除，我的 toast 消息不会告诉我“0”，例如它只是停留在“5”（输入文本的长度）

每次用户键入或删除 EditText 的文本长度值时，有没有办法取回它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T13:44:03.117

您应该添加一个`TextWatcher`using [TextView.addTextChangedListener()](http://developer.android.com/reference/android/widget/TextView.html#addTextChangedListener%28android.text.TextWatcher%29)。然后，您将能够在文本更改之前、之后或之后做您想做的事情。

# sql-server - 为 T-SQL 变量分配的内存在哪里？

> ID：10619815
> 
> 赞同：3
> 
> 时间：2012-05-16T13:40:04.220
> 
> 标签：sql-server, tsql, memory, heap-memory, stack-memory

在 T-SQL 中，当我们执行类似的操作时

```
declare @PolicyId int = 20 
```

分配了 4 个字节，因为 an 的大小`int`是 4 个字节，但是这个内存分配*在哪里*- 它是在堆栈上还是在堆上？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T14:45:28.070

T-SQL 变量既不在堆栈上，也不在堆上。它们在当前执行上下文中被命名为逻辑实体。将声明放在循环内与将其放在循环外相同。通过将变量放在循环中，您不会导致内存耗尽或堆栈溢出。请参阅以下代码：

```
declare @i int =0
while @i<2
begin
    declare @x int = 0;
    set @x += 1
    print @x;
    set @i += 1;
end

print @x; 
```

请注意如何在`@x`循环外引用，即使在循环内声明也是如此。IE。循环没有*创建*范围。但是初始赋值*确实*会在循环的每次迭代中执行（打印的值始终是`1`，而不是`1,2,3...`）。

# c - C Char 多维数组定义

> ID：10619821
> 
> 赞同：0
> 
> 时间：2012-05-16T13:40:29.083
> 
> 标签：c, arrays

C对我来说就像中文，但我必须使用一些代码

```
struct Message {
    unsigned char      state;
};

char state   [4][4] = { "OFF", "ON", "IL1", "IL2" }; 
```

这是一个接收消息的简单服务器。它的 Struct 部分很明显，但是还有那个 char 数组的东西。这是否说有 4 个不同的字符数组，每个数组包含 4 个字符？这里到底发生了什么？我知道这听起来很愚蠢，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:43:07.177

这意味着它`state`是一个由 4 个 char 数组组成的数组，每个数组都是一个 4 个 char 数组，它们被初始化为“OFF\0”、“ON\0”、“IL1\0”和“IL2\0”值"

```
 +----+----+----+----+
state => |OFF |ON  |IL1 |IL2 |
         +----+----+----+----+
         ^state[0]
              ^state[1]
                   ^state[2]
                        ^state[4] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T13:43:54.700

这是一个二维数组。它创建一个由 4 个元素组成的数组，每个元素都是一个 4 个字符的数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T13:44:14.643

> 这是否说有 4 个不同的字符数组，每个数组包含 4 个字符？

完全正确：`state`是一个由四个`char`子数组组成的数组。

每个子阵列有四个`chars`长。相应的字符串文字 ( `"OFF"`etc) 用 NUL 填充到四个字符，然后复制到子数组中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T13:45:08.750

char state[4][4] declared at the end is a 2 dimensional array having 4 rows with 4 columns in each row. The values you have assigned will be stored into positions state[0][0], state[0][1], state[0][2], state[0][3].

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T13:45:40.340

In C, you deal with strings as `char*`, or arrays of `char`. Therefore, when you have an array of strings, you have an array of an array of chars.

# node.js - NodeJs 一步一步执行我的动作

> ID：10619830
> 
> 赞同：0
> 
> 时间：2012-05-16T13:41:02.950
> 
> 标签：node.js, sync

我有一些问题。我有迷你套接字服务器。

```
var net = require('net');
var server = net.createServer(function (socket) {
    socket.on('data', function(data){
        // here i do xml parsing and run some action
        var xml2js = require('xml2js'), parser = new xml2js.Parser();
        parser.addListener('end', function(result) {
            var command = require(result['@']['action']);
            var c = new command(socket);
            c.run();
        }).parseString(data);
    });
});        
server.listen('8081', '127.0.0.1'); 
```

很好，但是如果我像这样向服务器发送许多命令：

```
telnet 127.0.0.1 8081
<query action="some_action1"></query>
<query action="some_action2"></query>
<query action="some_action3"></query> 
```

我的服务器正在执行此操作是异步的。我怎样才能一步一步地运行这个动作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:39:27.227

您需要从命令中创建队列（FIFO）。并按服务器 getem 的顺序执行。

# jquery - JQuery 将 ajaxComplete 事件附加到特定元素

> ID：10619834
> 
> 赞同：0
> 
> 时间：2012-05-16T13:41:20.963
> 
> 标签：jquery, ajax

我在尝试将其他“关于 ajax 完成”事件添加到特定元素时遇到问题。我有以下不显眼的 JS 函数，它可以动态加载任何具有“ajax-loader”属性的 div。此功能运行良好，它位于全局脚本文件中，并被我网站上的许多页面使用，因此**我无法向此脚本添加任何特定于页面的功能**。

```
 <script type="text/javascript">
    $(document).ready(function () {
      $('[ajax-loader]').each(function () {
        var loadContainer = $(this);
        var loadUrl = loadContainer.attr('ajax-loader');
        $.ajax({ url: loadUrl, type: 'GET', cache: 'false' }).done(function (data) { $(loadContainer).html(data); });
      });
    });
  </script> 
```

这是一个页面的片段，它将使用上面的函数来动态加载一些内容。在这种情况下，正在加载的内容是标准表格。

```
<body>
  <div id="MyDynamicDiv" ajax-loader="/SomePageThatReturnsATable"></div>
  <div id="MyPopUpDialog"></div>
</body> 
```

现在，我想在上面的页面中添加一些脚本，**在加载动态内容后**，将使用 JQuery DataTables 格式化表格并将“单击”事件添加到打开 JQuery 对话框并动态加载的按钮之一其他数据进入该对话框。这是我为完成此任务而想出的脚本。

```
 <script type="text/javascript">
    $(document).ready(function () {
      $('#MyDynamicDiv').ajaxComplete(function () {
        console.log('MyDynamicDiv Load Complete'); 
        $('#MyDynamicallyLoadedTable').dataTable({"bJQueryUI": true});
        $('.myDialogButton').click(function () { $('#MyPopUpDialog').dialog().load('/MyDialogContent'); });
      });    
    });
  </script> 
```

问题是`$('#MyDynamicDiv').ajaxComplete(function () {...});`即使加载了对话框（基本上对于所有 ajax 请求）也会被调用。我只希望在#MyDynamicDiv 完成加载时调用它（所以只有一次）。我有`ajaxComplete`与该特定选择器相关联的功能，所以我不知道为什么它会触发其他加载完成事件。

我知道该函数被重复调用，甚至是复合调用，`console.log`因为第一次加载页面时触发一次，第一次打开对话框时触发两次，第二次打开对话框时触发四次，等等。

使用 DataTables 时问题更加复杂，因为在加载对话框时会引发以下错误：

**DataTables 警告（表 id = 'MyDynamicallyLoadedTable'）：无法重新初始化 DataTable。要检索此表的 DataTables 对象，请不传递任何参数或查看 bRetrieve 和 bDestroy 的文档**

除了 ajaxComplete 之外，我还应该使用其他 JQuery 函数吗，或者我做错了什么？

# json - 为什么 fetch() 不起作用？

> ID：10619836
> 
> 赞同：3
> 
> 时间：2012-05-16T13:41:24.233
> 
> 标签：json, backbone.js

我正在尝试从 JSON url 获取集合。主干确实发送了请求并得到了响应，但`models`在它之后的集合中没有：

这是我的 JavaScript：

```
stores.fetch(); 
```

响应中的 JSON

```
[{"name":"Store 1"},{"name":"Store 2"},{"name":"Store 3"},{"name":"Store 4"}] 
```

响应中的 Content-Type HTTP 标头是`application/json`。

为什么它不加载到集合中？JSON 是否正确？

更多代码：

```
be.storeList.Item = Backbone.Model.extend({
    defaults: {
        id: null,
        name: null,
        description: null
    },
    initialize:function(attrs){
        attrs.id = this.cid;
        this.set(attrs);
    }
});

be.storeList.Items = Backbone.Collection.extend({
    model: be.storeList.Item,
    url:'/admin/stores'
});

var stores = new be.storeList.Items();
stores.fetch();
console.log(stores.toJSON()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T14:27:31.117

`fetch`是异步的。尝试

```
stores.fetch({ 
    success:function() {
        console.log(stores.toJSON());
    }
}); 
```

或者

```
stores.on("sync", function() {
    console.log(stores.toJSON());
});
stores.fetch(); 
```

或者

```
stores.fetch().then(function() {
    console.log(stores.toJSON());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:57:36.247

摆脱 Item 类中的初始化函数。你不需要它。

没有这样的事情`stores.models`——如果你想看看里面有什么，你必须做`console.log(stores.toJSON());`

# javascript - 有没有不能内联的 CSS 属性？

> ID：10619842
> 
> 赞同：3
> 
> 时间：2012-05-16T13:41:41.947
> 
> 标签：javascript, html, css

当我说内联时，我的意思是在样式属性中放置 CSS 属性。

有没有办法用 Javascript 确定一个特定的属性是否不能内联？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T13:44:39.950

Css properties can all be used,

but you cannot use [pseudoclasses and pseudoelements](http://www.w3.org/TR/CSS2/selector.html) like `:hover`, `:after` `:nth-child()` etc.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:48:03.137

您可以内联您可以在*普通*STYLE 元素或外部样式表中定义的每种样式（请参阅[HTML 规范](http://www.w3.org/TR/html4/present/styles.html)的第 14.2.2 节）。

正如 Gaby 所指出的，您不能使用任何选择器。他们说：

> 例如，对于 [[CSS2]] 内联样式，使用第 4.1.8 节中描述的声明块语法（没有大括号分隔符）。

第[4.1.8 节](http://www.w3.org/TR/1998/REC-CSS2-19980512/syndata.html#declaration)描述了*声明和属性*，而不是规则和选择器，因此 STYLE 属性的内容仅限于属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T13:45:51.700

I can't think of any (standard) CSS that can't be written inline, but you couldn't declare a class or pseudoclass inline for instance.

Inline is a valid place to define CSS, so any CSS will work there else the precedence of CSS (C=*cascading*) would be broken.

# c# - 从 Web API 接收 System.DateTime 时出现奇怪的格式

> ID：10619843
> 
> 赞同：1
> 
> 时间：2012-05-16T13:41:47.393
> 
> 标签：c#, javascript, entity-framework-4

我正在使用最新版本的**Entity Frameworks在****MVC4**中开发一个 web api 应用程序。

 **我在我的视图中使用**AJAX**为我的一个 API 类中的用户调用我的 GET 函数，如下所示：

```
 $.ajax({
            url: '../api/UserAPI/Get',
            cache: false,
            type: 'GET',

            contentType: 'application/json; charset=utf-8',statusCode: {
                200: function (data) {
                    $('#email').val(data.Email);
                    $('#firstname').val(data.FirstName);
                    $('#lastname').val(data.LastName);
                    $('#birthdate').val(data.BirthDate);
                }
            }
        }); 
```

在成功函数（200）中，我想在某些文本字段中写入用户的一些值。这就是我遇到问题的地方。我在视图中收到的 data.BirthDate 格式非常奇怪。

在我的 API 类中，如果我的数据库和视图之间的连接是这样的，则 DateTime 是这样的：**1/1/1993 12:00:00 AM**

但是因为我想在文本字段中写出我收到的日期，如下所示：

**$('#birthdate').val(data.BirthDate);**

输出格式如下：**/Date(725842800000+0100)/**

我想要的输出是这样的：**19930101**

任何人都知道为什么奇怪的格式会发生变化，在这种情况下如何避免它/以一种好的方式转换它？

希望我解释得足够好，让人们理解我的问题！！

此致！**

# ios - Cocos2d 文本列表

> ID：10619845
> 
> 赞同：0
> 
> 时间：2012-05-16T13:41:56.103
> 
> 标签：ios, cocos2d-iphone

这是一个令人困惑的问题，但我会尽力描述它。

我想要的是一个设定大小的框，在该框内，顶部会添加一行文本。随着应用程序的继续，更多行将添加到最后一行下方。当文本到达框的底部时，它不会显示，直到您向下滚动文本列表。换句话说，我希望所有文本行都包含在框中。

另外，我需要在单击某行文本时弹出一条消息，

实现这一目标的最佳方法是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:22:48.257

当我在我的 Cocos2d iPhone 应用程序中执行此操作时，我使用了`NSTableView`.

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSTableView_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSTableView_Class/Reference/Reference.html)

在 Cocos2d 中使用 Cocoa 接口类需要弄清楚一些事情，但这是值得的。如果您想查看结果，我在 Crystal Shuffle 中使用了这些。

这些项目可以响应触摸事件，并且您可以在收到这些事件时弹出窗口。我也会为此使用 Cocoa 接口类。就我而言，我使用了 NSAlert 类：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSAlert_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSAlert_Class/Reference/Reference.html)

我使用 UITableView 的示例代码，使用 Cocos2d 版本 0.99.3：

```
@interface MyMenu : CCLayer <UITableViewDelegate, UITableViewDataSource>
{
    UITableView* m_myTableView;
}

@implementation MyMenu
-(void) onEnter
{
    m_myTableView = [[UITableView alloc] initWithFrame:CGRectMake(10, 10, 250, 120) style:UITableViewStylePlain];
    m_myTableView.delegate = self;
    m_myTableView.dataSource = self;
    m_myTableView.backgroundColor = [UIColor clearColor];
    m_myTableView.separatorStyle = UITableViewCellSeparatorStyleNone;
    m_myTableView.rowHeight = 27;
    m_myTableView.allowsSelection = NO;
}

-(void)onEnterTransitionDidFinish
{
    [super onEnterTransitionDidFinish];

    [[[CCDirector sharedDirector] openGLView] addSubview:m_myTableView];
    [m_myTableView release];
} 
```

在关闭层之前调用：

```
 NSArray *subviews = [[[CCDirector sharedDirector] openGLView] subviews];
        for (id sv in subviews)
        {
            if(((UIView*)sv).tag == e_myTableTag)
            {
                [((UITableView*)sv) removeFromSuperview];
            }
        } 
```

您还需要相关的重载，您可以在 Apple 文档中查找：

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
-(UITableViewCell *)tableView:(UITableView *)aTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

# java - Java Hibernate - 从数据库中检索值时事务不活动

> ID：10619848
> 
> 赞同：0
> 
> 时间：2012-05-16T13:42:12.407
> 
> 标签：java, hibernate, exception

我需要从数据库中获取一些数据。为此，我编写了类似的代码

```
try{
   return (EmployeeImpl) em.createQuery(
      "select e from EmployeeImpl e " +
      "where e.empName = :employeeName " + 
          " and (e.eDate is null or e.eDate <=   :todaysDate )")
 .setParameter("employeeName", employeeName)
 .setParameter("todaysDate", todaysDate)
 .getSingleResult();
}catch(NoResultException exception){
     throw new NoResultException("Record not found");
} 
```

我应该返回一份有效记录。但给出了例外

org.hibernate.util.JDBCExceptionReporter] 事务未激活：tx=TransactionImple < ac, BasicAction: 0:ffff0a5308fa:126a:4fb36c77:559 状态：ActionStatus.ABORT_ONLY >; - 嵌套 throwable：（javax.resource.ResourceException：事务未激活：tx=TransactionImple < ac，BasicAction：0:ffff0a5308fa:126a:4fb36c77:559 状态：ActionStatus.ABORT_ONLY >）

```
 org.hibernate.exception.GenericJDBCException: Cannot open connection

javax.persistence.PersistenceException: org.hibernate.exception.GenericJDBCException: Cannot open connection 
```

我的应用程序可以连接到数据库，因为我可以在其他地方执行 CRUD 操作。

此异常的可能原因是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-16T10:04:49.790

**根本原因：数据不可用**

getSingleResult() 抛出空指针异常，而 getResultList() 返回空，是根据您在查询中传递的条件找到零记录的情况。尝试更换： -

```
catch(NoResultException exception){
     throw new NoResultException("Record not found");
} 
```

和

```
catch(NoResultException exception){
    throw new NoResultException("Record not found");
}
catch(Exception ex){
    ex.printStackTrace();
} 
```

我相信你会在日志中得到 NullPointerException。简而言之，这个完整的跟踪应该得到：-

```
SQL Error: 0, SQLState: null
Transaction is not active: tx=TransactionImple < ac, BasicAction: 0:ffffa9b67064:126a:58924abe:14bb957 status: ActionStatus.ABORT_ONLY >; - nested throwable: (javax.resource.ResourceException: Transaction is not active: tx=TransactionImple < ac, BasicAction: 0:ffffa9b67064:126a:58924abe:14bb957 status: ActionStatus.ABORT_ONLY >)
org.hibernate.exception.GenericJDBCException: Cannot open connection 
```

这清楚地说明了您的交易被中止的方式和原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:44:38.830

The reason seems clear:

> org.hibernate.exception.GenericJDBCException: Cannot open connection

For whatever reason, the code you posted is unable to acquire a connection while other parts of your application (according to what you've posted) are able to do so fine. I would check to make sure that this part of the code is not configured differently, using a different method for getting connections, etc.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T19:15:08.460

在实际执行任何数据库操作，如插入、更新或选择之前，您应该首先启动一个事务（当然是在获取会话对象之后）。然后你应该做任何 CRUD 操作。请确保您在执行查询之前开始交易。

# c# - 尝试运行 Silverlight 业务应用程序时引发错误

> ID：10619850
> 
> 赞同：3
> 
> 时间：2012-05-16T13:42:23.093
> 
> 标签：c#, visual-studio-2010, silverlight-5.0, business-application

我对这个错误束手无策。我终其一生都无法弄清楚问题所在。即使我已经剥离了我所做的所有更改，所以它回到了创建时提供的基本应用程序，它仍然有相同的错误。有一次我设法对它进行排序，但我不知道我做了什么来得到它。

如果有人可以帮助我理解这个错误，我将非常感激！

我什至无法在断点上进行调试，因为它甚至没有达到我设置的任何断点。消息如下：

```
Error
Exception has been thrown by the target of an invocation.

Error Details
   at System.Windows.Navigation.PageResourceContentLoader.EndLoad(IAsyncResult asyncResult)
   at System.Windows.Navigation.NavigationService.ContentLoader_BeginLoad_Callback(IAsyncResult result)
Caused by: Exception has been thrown by the target of an invocation.

   at System.Windows.Navigation.PageResourceContentLoader.EndLoad(IAsyncResult asyncResult)
   at System.Windows.Navigation.NavigationService.ContentLoader_BeginLoad_Callback(IAsyncResult result)
Caused by: Exception has been thrown by the target of an invocation.

   at System.Windows.Navigation.PageResourceContentLoader.EndLoad(IAsyncResult asyncResult)
   at System.Windows.Navigation.NavigationService.ContentLoader_BeginLoad_Callback(IAsyncResult result) 
```

有没有其他人遇到过这个？有谁知道如何修复它，以便一旦它被抛出，我就可以继续从事同一个项目？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:29:26.310

In conclusion:

This particular error means there is something wrong in the xaml and neither Visual Studio nor Expression Blend can/will give the source of the error and debugging won't help. It is very likely to do with a binding issue. Anyone with this same error would do well to thoroughly check the xaml code.

My problem was compounded by the fact that my default browser (SRWare Iron) was caching the 'website' and would only show an initial version of the application so any changes I made were not updating in what I saw (thus the error would continue to show no matter what I changed in the code). As you can imagine **very** frustrating! I didn't realise this until I changed the xaml to show a visual difference and the changes weren't shown. - Interestingly this only happened in VS, Expression Blend would load the newest version correctly.

I made IE the default browser [(link to method)](https://stackoverflow.com/a/79965/1372191) so the second issue is no longer a problem and the error has magically disappeared (because I fixed the code a long time ago).

I hope this helps anyone who may have either the first or second problem. - While scouring the web I did find a few others who had the browser problem and no-one knew anything about it, so I hope this solves it.

# google-app-engine - 如何获取具有最新日期的实体

> ID：10619853
> 
> 赞同：5
> 
> 时间：2012-05-16T13:42:35.837
> 
> 标签：google-app-engine, google-cloud-datastore, objectify

有谁知道如何在objectify中检索最后一个（最新日期）实体？我知道如何进行查询，但如何检索具有最新日期的查询？

```
List<Transaction> fetched2 = ofy.query(Transaction.class).filter("someproperty", somepropertyvalue).order("date").list(); 
```

我可以尝试对其进行冒泡排序，但我确信有更简单的方法。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T14:01:11.097

您只需在订单中的“日期”前添加一个减号：

`List<Transaction> fetched2 = ofy.query(Transaction.class).filter("someproperty", somepropertyvalue).order("-date").list();`

这应该会返回一个交易列表，其中最新的交易位于第一位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-07T09:08:11.993

如果要在 objectify 中执行排序，则应用户按方法排序。例如，如果您有一个表 Sample 并且您想对其应用排序

升序排序 Sample = ofy.query(Sample .class).filter("propertyname", "propertyvalue).order("+date").list().first();

获得第一条记录

降序排序 Sample sample = ofy.query(Sample .class).filter("propertyname", "propertyvalue).order("+date")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T18:41:33.147

我不知道您的用例，但如果您想要获取“新”实体（在最后一次查询后添加/更新的实体），您可能想要使用游标。它们效率更高，因为它们只获取新的/更新的实体：[https ://developers.google.com/appengine/docs/java/datastore/queries#Query_Cursors](https://developers.google.com/appengine/docs/java/datastore/queries#Query_Cursors)

# android - Android 应用内结算：“RESULT_DEVELOPER_ERROR”

> ID：10619855
> 
> 赞同：3
> 
> 时间：2012-05-16T13:42:47.643
> 
> 标签：android, in-app-billing

我无法理解为什么我在执行“应用内计费”时收到“RESULT_DEVELOPER_ERROR”。

我做了什么：

*   将示例应用程序中的代码复制到我的应用程序
*   android清单包含“”
*   在 Android 4.0.4 和 Google Play 应用程序版本 3.5.19 的 Xoom 设备上在 Google Play 控制台中声明的测试帐户
*   我能够成功使用四个保留的产品 ID：“android.test.purchased”、“android.test.canceled”、“android.test.refunded”、“android.test.item_unavailable”
*   声明我自己的产品 ID
*   我的应用在 Google Play 上发布

与 Google Play 交流的开始是：

*   从服务中调用“checkBillingSupported”
*   获得“onBillingSupported(true)”答案
*   从服务调用“restoreTransactions”
*   获得“responseCode”等于 5 的“onRestoreTransactionsResponse”（RESULT_DEVELOPER_ERROR）
*   UI 显示“此版本的应用程序未配置为计费”

然后我可以使用 4 保留的产品 ID 吗？

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T16:29:08.537

该应用程序需要使用您的生产密钥进行签名，*并且*上传到 Google Play 的版本应该与您正在测试的版本相同。

# php - 表单字段发布到本地主机上的脚本，但在实时服务器上没有传递任何值

> ID：10619858
> 
> 赞同：0
> 
> 时间：2012-05-16T13:42:52.987
> 
> 标签：php, jquery, ajax, twitter-bootstrap

**编辑：**我将 post 方法更改为 get 方法，一切正常。我会进一步调查，如果我弄清楚为什么会这样，我会添加答案。我确实在其他地方使用过帖子，所以我们会看到...

我已经四处寻找这个问题的答案，但到目前为止还没有找到任何有帮助的东西。我有一个简单的表单，它使用 jquery 的 .submit 函数来序列化数据并通过 ajax 将其发布到 php 脚本。这一切在我的本地主机上都很好用，但是一旦我将它发布到服务器，字段值就不会发布。

这是表格：

```
<div id="loginDiv">
 <form  id="login" class="form-inline pull-right">
  <input id="loginVal" name="loginVal" type="password" class="input-small" />
   &nbsp;<button type="submit" class="btn btn-success">Log In</button>
 </form>
</div> 
```

下面是提交函数和成功回调函数：

```
// ajax function to login to session
$(document).ready(function() {
 $("#login").submit(function() {
  $.post(
   "functions/sessionLogin.php",
   $("#login").serialize(),
   //{"loginVal":"CHAPMANADMIN"}, (this was just to troubleshoot)
   function(json) {
    parseReturnedLogin(json);
   }
  );
  return false;
 });
});

// login success handler
function parseReturnedLogin(data) {
 var obj = jQuery.parseJSON(data);
 $("#loginDiv").html("<p class=\"navbar-text pull-right\">Logged in as <span 
  style=\"color:#0088cc\">"+obj.priveleges+"</span></p>");
} 
```

这是我在 localhost 上获得的一些标头和响应的示例：

> 请求方法：POST 状态码：200 OK
> 
> 接受：*/*
> 
> X-Requested-With:XMLHttpRequest
> 
> 表单数据：loginVal:CHAPMANADMIN
> 
> 响应：{“用户”：“CHAPMANADMIN”，“priveleges”：“管理员”，“sessid”：“pvigqmcfumlbiu13esiojg1n74”}

这是我在服务器上得到的一些标头和响应的示例：

> 请求方法：POST 状态码：200 OK
> 
> 接受：*/*
> 
> X-Requested-With:XMLHttpRequest
> 
> 表单数据：loginVal:CHAPMANADMIN
> 
> 响应：{“用户”：“”，“特权”：“”，“sessid”：“o2nf69vc2tdd8hc8n0usas4010”}

实时服务器上的查询以空值运行。我在同一台服务器上还有其他 AJAX 应用程序，它们应该使用类似的设置工作，所以我不确定发生了什么，并且希望专家提供一些建议/故障排除指导！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T20:23:46.533

这最终成为在我的 $_POST 变量上使用 mysql_real_escape_string 的问题。我将我的代码从 mysql 转换为 PDO 函数，但没有删除需要 mysql 连接才能工作的 mysql_real_escape_string 函数，否则它们返回 false。

当我将此代码发布到服务器时，没有活动的 mysql 连接，因此该函数返回 false 并将我的变量的值设置为 false。

希望这可以帮助将来的人摆脱同样的愚蠢错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:21:00.720

您的表格工作正常，但响应不正确。检查服务器上的服务器验证功能以及工作正常的数据库连接！

发布您的脚本以进行进一步调查。

为了调试这些情况，我使用 firefox 和 firebug 扩展检查请求/响应。

# php - 将地址分解为数组

> ID：10619859
> 
> 赞同：2
> 
> 时间：2012-05-16T13:42:55.887
> 
> 标签：php, regex

我有一个需要分解为数组的地址列表。

所以我开始考虑使用explode 将每一行分解成一个数组。在这样的地址上可以正常工作：

> 阿德威尔 - 牛津郡 51.68N 01.00W SU6999

但如果我有这样的地址：

> Afan - Castell-nedd Phort Talbot (Neath Port Talbot) 51.63N 03.74W SS794938

这会导致问题。

我一直在尝试使用 preg_match 但无法使表达式起作用，因此我最终得到：

> 0 => 阿德威尔 1 => 牛津郡 2 => 51.68N 3 => 01.00W 4 => SU6999

第二个地址的输出应该是

> 0=> Afan 1=> Castell-nedd Phort Talbot (Neath Port Talbot) 2=> 51.63N 3=> 03.74W 4=> SS794938

有没有人看到用正则表达式实现这一目标的好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:55:02.190

```
<?php
// Solution.
function parseAddress($address)
{
    $matches = NULL; 
    preg_match('/([^-]*) - ([^\d]*) (\d\d\.\d\dN) (\d\d\.\d\dW) (.*)/',
               $address, $matches);
    return array_slice($matches, 1);
}

// Test case 1.
$parsed = parseAddress('Adwell - Oxfordshire 51.68N 01.00W SU6999');
var_dump($parsed);

// Test case 2.
$parsed = parseAddress('Afan - Castell-nedd Phort Talbot (Neath Port Talbot) ' .
                       '51.63N 03.74W SS794938');
var_dump($parsed);
?> 
```

输出：

```
array(5) {
  [0]=>
  string(6) "Adwell"
  [1]=>
  string(11) "Oxfordshire"
  [2]=>
  string(6) "51.68N"
  [3]=>
  string(6) "01.00W"
  [4]=>
  string(6) "SU6999"
}
array(5) {
  [0]=>
  string(4) "Afan"
  [1]=>
  string(45) "Castell-nedd Phort Talbot (Neath Port Talbot)"
  [2]=>
  string(6) "51.63N"
  [3]=>
  string(6) "03.74W"
  [4]=>
  string(8) "SS794938"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:44:52.400

I think you dont need regex for that. Just simple explode call is enough.

```
explode(' ', "Adwell - Oxfordshire 51.68N 01.00W SU6999") 
```

More [advance way](http://ideone.com/fCguj),

```
$str = "Afan - Castell-nedd Phort Talbot (Neath Port Talbot) 51.63N 03.74W SS794938";
$parts = array_filter(explode(' ', $str));
$ss = array_pop($parts);
$w = array_pop($parts);
$n = array_pop($parts);
$name = array_shift($parts);
$hash = array_shift($parts);
$result = array($name, implode($parts, ' '), $n, $w, $ss);
print_r($result); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T13:51:57.693

您需要更好地消除语法歧义。从这两个示例中，我的猜测是以下应该有效：

*   分成两部分，`' - '`用作分隔符。第一个组件可以保持原样，其余的需要进一步处理。
*   从其余部分中取出最后 3 个以空格分隔的部分，其余部分保持原样。

所以试试这个：

```
/^(.*?)\s-\s(.*)\s+(\S+)\s+(\S+)\s+(\S+)$/ 
```

如果没有对预期输入格式的更正式的描述，没有人可以给你一个决定性的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T13:47:35.540

```
(.*)\s+-\s*(.*)\s+(\d+\.\d+N)\s*(\d+\.\d+W)\s*(SS\d+) 
```

可能是最灵活的。我将大部分空白设为可选，除了您看到 \s+ 的位置，因为它使用它作为自由文本的一种分隔符

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T13:55:23.787

我从事地址解析等工作已经有一段时间了，不幸的是，没有涵盖所有基础的解决方案。因此，您需要确定的是所有地址中的共同点。对我来说，这似乎是右边的东西。所以我会先把它们解析出来。似乎您可以按空间爆炸并抓住最后 3 件物品（pop x 3 或 slice 作品）。然后重新组合（加入）并对其进行正则表达式。

```
/([a-z]+)\s-\s([a-z\-)\s\(\)]+)/i 
```

这会给你两批字符串。一个是第一个东西，第二个是剩下的东西。然后，您需要检查括号中是否有任何内容并相应地解析出这些内容。

不幸的是，我并不完全熟悉您的地址格式，因为我主要处理基于美国的地址字符串/块。但是，从末尾删除常见项目后，剩余的字符串应该可以轻松识别其城市/州/省部分。无论哪种方式，您都需要一套正则表达式和逻辑来确保最终结果尽可能准确。本质上，您根据数据的格式为数据设计一条路径。

祝你好运！

# java - Java中非线性多变量函数的约束优化

> ID：10619860
> 
> 赞同：9
> 
> 时间：2012-05-16T13:42:58.273
> 
> 标签：java, mathematical-optimization, nonlinear-functions

我正在寻找一种方法的**开源**实现，该方法对**Java**中的非线性多变量函数进行约束优化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T15:48:43.770

[IPOPT](https://projects.coin-or.org/Ipopt)是我所知道的最强大的求解器。

它有一个[Java 接口](https://projects.coin-or.org/Ipopt/wiki/JavaInterface)，虽然我不知道它有多好，但我只使用 C++ API。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-31T16:54:41.500

有几个开源的 java 实现可以做到这一点，例如：

*   [OptaPlanner](http://www.optaplanner.org/)（apache 许可证，100% java，大量示例和文档）
*   雅科普
*   巧克力
*   ...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-03T20:42:55.093

我最近将 Michael Powells 的用于非线性目标函数和约束的 COBYLA2 无导数优化器移植到 Java。您可以在[此处](https://github.com/cureos/jcobyla)找到源代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T07:20:57.227

你可以看看[Choco](http://www.emn.fr/z-info/choco-solver/)，一个用 java 实现的约束编程框架。

# ios - 铿锵声：错误：没有这样的文件或目录：'/Users/waterskiingmithrill/Development/iPhone/Event/Event_Prefix.pch'

> ID：10619865
> 
> 赞同：4
> 
> 时间：2012-05-16T13:43:13.093
> 
> 标签：ios, iphone, objective-c, xcode, clang

我搞砸了我的 iPhone 项目。我跑了`svn update`，几个月前摆弄过存储库。此后的许多变化，使得从旧点恢复几乎是不可能的。

当我现在尝试构建项目时，我得到：

```
ProcessPCH /Users/waterskiingmithrill/Library/Developer/Xcode/DerivedData/Event-cqyicuekijryjpbuuucigvdrxrdc/Build/Intermediates/PrecompiledHeaders/Event_Prefix-brpgiiwwokyynuheloumlvxlmurs/Event_Prefix.pch.pth Event_Prefix.pch normal i386 objective-c com.apple.compilers.llvm.clang.1_0.compiler
cd /Users/waterskiingmithrill/Development/iPhone/Event
setenv LANG en_US.US-ASCII
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c-header -arch i386 -fmessage-length=0 -std=c99 -Wno-trigraphs -fpascal-strings -O0 -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wno-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-sign-compare -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -fexceptions -fasm-blocks -Wprotocol -Wdeprecated-declarations -mmacosx-version-min=10.6 -g -fvisibility=hidden -Wno-conversion -Wno-sign-conversion -fobjc-abi-version=2 -fobjc-legacy-dispatch "-DIBOutlet=__attribute__((iboutlet))" "-DIBOutletCollection(ClassName)=__attribute__((iboutletcollection(ClassName)))" "-DIBAction=void)__attribute__((ibaction)" -D__IPHONE_OS_VERSION_MIN_REQUIRED=40000 -iquote "/Users/waterskiingmithrill/Library/Developer/Xcode/DerivedData/Event-cqyicuekijryjpbuuucigvdrxrdc/Build/Intermediates/Event.build/Debug-iphonesimulator/HatFair.build/Hat Fair-generated-files.hmap" "-I/Users/waterskiingmithrill/Library/Developer/Xcode/DerivedData/Event-cqyicuekijryjpbuuucigvdrxrdc/Build/Intermediates/Event.build/Debug-iphonesimulator/HatFair.build/Hat Fair-own-target-headers.hmap" "-I/Users/waterskiingmithrill/Library/Developer/Xcode/DerivedData/Event-cqyicuekijryjpbuuucigvdrxrdc/Build/Intermediates/Event.build/Debug-iphonesimulator/HatFair.build/Hat Fair-all-target-headers.hmap" -iquote "/Users/waterskiingmithrill/Library/Developer/Xcode/DerivedData/Event-cqyicuekijryjpbuuucigvdrxrdc/Build/Intermediates/Event.build/Debug-iphonesimulator/HatFair.build/Hat Fair-project-headers.hmap" -I/Users/waterskiingmithrill/Library/Developer/Xcode/DerivedData/Event-cqyicuekijryjpbuuucigvdrxrdc/Build/Products/Debug-iphonesimulator/include -I/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/usr/include/libxml2 -I/Users/waterskiingmithrill/Library/Developer/Xcode/DerivedData/Event-cqyicuekijryjpbuuucigvdrxrdc/Build/Intermediates/Event.build/Debug-iphonesimulator/HatFair.build/DerivedSources/i386 -I/Users/waterskiingmithrill/Library/Developer/Xcode/DerivedData/Event-cqyicuekijryjpbuuucigvdrxrdc/Build/Intermediates/Event.build/Debug-iphonesimulator/HatFair.build/DerivedSources -F/Users/waterskiingmithrill/Library/Developer/Xcode/DerivedData/Event-cqyicuekijryjpbuuucigvdrxrdc/Build/Products/Debug-iphonesimulator -DNS_BLOCK_ASSERTIONS=1 --serialize-diagnostics /Users/waterskiingmithrill/Library/Developer/Xcode/DerivedData/Event-cqyicuekijryjpbuuucigvdrxrdc/Build/Intermediates/PrecompiledHeaders/Event_Prefix-brpgiiwwokyynuheloumlvxlmurs/Event_Prefix.pch.dia -c /Users/waterskiingmithrill/Development/iPhone/Event/Event_Prefix.pch -o /Users/waterskiingmithrill/Library/Developer/Xcode/DerivedData/Event-cqyicuekijryjpbuuucigvdrxrdc/Build/Intermediates/PrecompiledHeaders/Event_Prefix-brpgiiwwokyynuheloumlvxlmurs/Event_Prefix.pch.pth -MMD -MT dependencies -MF /Users/waterskiingmithrill/Library/Developer/Xcode/DerivedData/Event-cqyicuekijryjpbuuucigvdrxrdc/Build/Intermediates/PrecompiledHeaders/Event_Prefix-brpgiiwwokyynuheloumlvxlmurs/Event_Prefix.pch.d

clang: error: no such file or directory: '/Users/waterskiingmithrill/Development/iPhone/Event/Event_Prefix.pch'
clang: error: no input files
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

而且我不知道为什么`Event_Prefix.pch`没有叮当声。（我什至不知道clang是什么）任何帮助，如何调试的建议，如何修复的提示，非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T13:46:42.233

Clang 是编译器。确保您`Event_Prefix.pch`的项目文件中有一个文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-06T15:30:31.630

我只是在测试版本上有这个。似乎测试目标没有更新命名更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-14T14:04:33.990

就我而言，我的搜索路径不是递归的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-11T08:34:01.120

重命名项目并更改文件夹名称时出现此错误。

在 Xcode 中，您可以通过选择组/文件夹引用轻松设置新路径，打开实用工具侧边栏（菜单栏：）`View > Utilities > Show File Inspector`并单击“身份和类型”部分中的小文件夹图标。

但是：路径也设置在项目配置的深处。选择您的项目，转到“构建设置”，在左侧的“目标”下选择您的应用程序，并更正以下路径：

*   打包 > Info.plist 文件
*   Apple LLVM 5.1 - 语言 > 前缀标题

# java - 发送的 UDP 数据包随机崩溃

> ID：10619869
> 
> 赞同：0
> 
> 时间：2012-05-16T13:43:40.207
> 
> 标签：java, android, udp

我正在尝试在 android 平台上实现 java quoteserver 示例。客户端是一个 android 平板电脑，而服务器是一个简单的 PC。当我尝试将我的第一个数据包从平板电脑发送到服务器时，eclipse 有时（并且仅有时）显示“找不到源”错误并且应用程序崩溃。我在 onCreate() 方法中发送我的数据包。

我正在使用的代码是在这里找到的：http: [//docs.oracle.com/javase/tutorial/networking/datagrams/clientServer.html](http://docs.oracle.com/javase/tutorial/networking/datagrams/clientServer.html)

唯一的例外是客户端在 android 上。

谢谢，

编辑：

onCreate 方法现在只启动一个异步任务，但 DatagramSocket 发送方法仍然存在问题

编辑2：

在执行了一些测试后，我意识到故障线是对新 asynctask 的调用

```
new ClientSocketThread( "192.168.20.100", 38300 ).executeOnExecutor(null, null, null); 
```

及时调用：

```
socket.send( packet ); 
```

当注释掉这一行时，应用程序运行良好（当然连接部分除外）。但是当行在代码中时，活动甚至不会开始，这完全独立于代码中行的位置。

# android - “在Android中获取电话号码”的确切解决方案

> ID：10619872
> 
> 赞同：4
> 
> 时间：2012-05-16T13:43:52.500
> 
> 标签：android

我尝试使用此代码获取自己的电话号码

```
TelephonyManager Mgr=(TelephonyManager)Context.getSystemService(Context.TELEPHONY_SERVICE);  
mPhoneNumber = tMgr.getLine1Number(); 
```

和

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

但它不能正常工作。

“在Android中获取电话号码”的确切解决方案是什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T14:43:46.480

> “在Android中获取电话号码”的确切解决方案是什么？

让用户在 中输入一个`EditText`，也许配置为`android:inputType="phone"`。Android SDK 中没有任何内容支持检索设备的电话号码，因为设备可能不知道其电话号码——只有运营商需要。此外，在几种情况下，用户需要指明他们希望使用哪些可能的电话号码：

*   双卡手机
*   将其他电话号码移植到此设备的人，或使用呼叫转移将呼叫路由到此设备的人
*   拥有 SIP 号码或他们更喜欢与设备一起使用的其他 VOIP 电话号码的人

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-22T21:14:56.687

以编程方式将手机中的彩信发送到您服务器上的电子邮件地址，然后读取发件人号码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-07T11:15:10.670

> TelephonyManager 不是正确的解决方案，因为在某些情况下，号码没有存储在 SIM 卡中，由于我的建议，您应该在第一次打开应用程序时使用共享偏好来存储用户的电话号码，之后该号码将在任何时候使用您需要在应用程序中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T13:47:55.343

```
public String myNO()
{
    return ((TelephonyManager) getSystemService(TELEPHONY_SERVICE)).getLine1Number();
} 
```

试试这个

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T13:48:54.153

使用此代码，

```
 private String getMyPhoneNumber(){
    TelephonyManager mTelephonyMgr;
    mTelephonyMgr = (TelephonyManager)
        getSystemService(Context.TELEPHONY_SERVICE); 
    return mTelephonyMgr.getLine1Number();
}

private String getMy10DigitPhoneNumber(){
    String s = getMyPhoneNumber();
    return s.substring(2);
} 
```

# iphone - iPhone iOS5 CLGeocoder 如何对大量（200）组地址进行地理编码？

> ID：10619879
> 
> 赞同：7
> 
> 时间：2012-05-16T13:44:15.723
> 
> 标签：iphone, objective-c, multithreading, ios5, clgeocoder

我有一大组大约 200 个地址，我需要知道它们的纬度和经度。我创建了一个解析地址的方法，现在我正在尝试使用`CLGeocoder`.

我目前的方法是并行创建地理编码器并让它们发挥作用。我注意到他们每个人似乎都有一个单独的线程。（所以我一次看到多达 100 个线程）。

**我遇到的问题是，在某个时间点（大约 50 个地址之后），地理编码停止返回任何地点标记，并且**

```
NSLog(@"Address not recognized: *%@*",[htc objectForKey:kAddressKey]); 
```

被调用。这是对线程数量的限制还是内置的 CLGeocoder 限制？难道是我没有正确清理地理编码器并且需要某种自动释放语句（ARC）？

-(void)geocodeArray:(NSMutableArray*)array {

```
 NSMutableDictionary* htc = nil;
    objectsToGeocode = array.count;

    NSDictionary *htcDictionary =nil;
     for (int i = 0; i<array.count;i++) {
         htcDictionary = [array objectAtIndex:i];

        //create an updated dictionary that would hold the reverse geocoding location
        htc = [[NSMutableDictionary alloc] initWithDictionary:htcDictionary];
        NSLog(@"geocoding: %@",[htc objectForKey:kAddressKey]);

        CLGeocoder* geoCoder = [[CLGeocoder alloc] init];
        [geoCoder geocodeAddressString:[htc objectForKey:kAddressKey] completionHandler:^(NSArray *placemarks, NSError *error) {

            if(placemarks.count>0)
            {
                NSLog(@"Found placemarks for %@",[htc objectForKey:kAddressKey]);
                CLPlacemark* placemark =  [placemarks objectAtIndex:0];
                MyLocation *annotation = [[MyLocation alloc]
                                          initWithName:[htcDictionary objectForKey:kNameKey]
                                          address:[htcDictionary objectForKey:kAddressKey]
                                          coordinate:placemark.location.coordinate] ;
                annotation.faxNumber = [htc objectForKey:kFaxKey];
                annotation.phoneNumber = [htc objectForKey:kPhoneKey];
                annotation.website = [htc objectForKey:kWebsiteKey];
                annotation.type = [htc objectForKey:kFacilityTypeKey];
                [_mapView addAnnotation:annotation];  

                double placemarkToUserDistance = [self._mapView.userLocation.location distanceFromLocation:placemark.location] ;
                //convert distance to miles
                placemarkToUserDistance =placemarkToUserDistance/ 1000/ kKilometersPerMile;

                [htc setObject:[NSNumber numberWithDouble:placemarkToUserDistance] forKey:kDistanceToUserKey];
                [htc setObject:[NSNumber numberWithDouble:placemark.location.coordinate.latitude] forKey:kLatitudeKey];
                 [htc setObject:[NSNumber numberWithDouble:placemark.location.coordinate.longitude] forKey:kLongitudeKey];
                NSAssert([htc objectForKey:kLatitudeKey]!=nil,@"kLatitudeKey is not saved!");
                NSAssert([htc objectForKey:kLongitudeKey]!=nil,@"kLongitudeKey is not saved!");

            }else {
                NSLog(@"Address not recognized: *%@*",[htc objectForKey:kAddressKey]);
            }

            [self.dataSource addObject:htc];

            if(++geocodingCount >=objectsToGeocode){
                NSLog(@"%@",self.dataSource);
                    [self saveGeocoding];

            }

        } ];

        //        [temp addObject:htcDictionary];
    }

} 
```

为了测试这是否是线程问题，我创建了这个方法，它将我的大型数据集分成 5 个数组，并尝试将它们分块进行地理编码。我注意到第一个请求以及第二个请求的一部分都通过了。但是一旦达到 (~50) 的幻数，地理编码就会停止。

对可能发生的事情有任何想法吗？**这是苹果对地理编码操作数量施加的限制吗？**我应该增加请求之间的延迟还是尝试单独运行应用程序 5 次并手动拼凑结果？

```
-(void)geocodeDatasource
{

        //I'm trying to build a file with coordinates of addresses and include it with the app
        geocodingCount = 0;
        self.dataSource = [[NSMutableArray alloc] initWithCapacity:self.arrayForGeocodingInitialJSON.count+5];
        haveToEmailInitialResults = YES;

    //attempt to geocode in batches

     float numberOfArrays = 5.0;
    NSMutableArray* array1 = [[NSMutableArray alloc] initWithCapacity:arrayForGeocodingInitialJSON.count/numberOfArrays];
    NSMutableArray* array2 = [[NSMutableArray alloc] initWithCapacity:arrayForGeocodingInitialJSON.count/numberOfArrays];
    NSMutableArray* array3 = [[NSMutableArray alloc] initWithCapacity:arrayForGeocodingInitialJSON.count/numberOfArrays];
    NSMutableArray* array4 = [[NSMutableArray alloc] initWithCapacity:arrayForGeocodingInitialJSON.count/numberOfArrays];
    NSMutableArray* array5 = [[NSMutableArray alloc] initWithCapacity:arrayForGeocodingInitialJSON.count/numberOfArrays];

    for(int i = 0 ;i<arrayForGeocodingInitialJSON.count;i++)
    {
        id object = [arrayForGeocodingInitialJSON objectAtIndex:i];
        if(i<arrayForGeocodingInitialJSON.count*(1/numberOfArrays))
        {
            [array1 addObject:object];
        }else if(i>=arrayForGeocodingInitialJSON.count/numberOfArrays && i<arrayForGeocodingInitialJSON.count*(2/numberOfArrays))
        {
            [array2 addObject:object];
        }else if(i>=arrayForGeocodingInitialJSON.count*(2/numberOfArrays) && i<arrayForGeocodingInitialJSON.count*(3/numberOfArrays))
        {
            [array3 addObject:object];
        }else if(i>=arrayForGeocodingInitialJSON.count*(3/numberOfArrays) && i<arrayForGeocodingInitialJSON.count*(4/numberOfArrays))
        {
            [array4 addObject:object];
        }else if(i>=arrayForGeocodingInitialJSON.count*(4/numberOfArrays) && i<arrayForGeocodingInitialJSON.count)
        {
            [array5 addObject:object];
        }

    }

    //simple delays eliminate the need for extra variables and notifications
        [self geocodeArray:array2];

        [self performSelector:@selector(geocodeArray:) withObject:array1 afterDelay:15];
        [self performSelector:@selector(geocodeArray:) withObject:array3 afterDelay:30];
        [self performSelector:@selector(geocodeArray:) withObject:array4 afterDelay:45];
        [self performSelector:@selector(geocodeArray:) withObject:array5 afterDelay:45];
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-16T13:59:50.123

您不能立即对大型集进行地理编码。iOS 会限制你。我已经看到 iOS 一次将您限制为 50 个地理编码，“时间”因素是未知的。

我遇到了类似的问题，但由于我只需要按顺序向用户呈现地理编码数据，这需要时间，因此我将所有地理编码排队。

实际上，我对 25 个数据块进行地理编码 - 一次向用户 1 显示结果，每次显示结果之间的间隔约为半秒。当我要显示的内容少于 4 个时，我将对接下来的 25 个进行地理编码。这种情况一直持续到所有内容都被地理编码（或者在我的情况下，无限期地）。

如果您需要一次对所有内容进行地理编码，则需要将地理编码与每个块之间的延迟链接在一起，并在完成之前显示某种忙碌指示符。使用大量地理编码可能需要一段时间。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-16T14:18:18.703

答案是您违反了 Apple 地理编码器的 TOS。

来自[CLGeocoder](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html)文档。

> 应用程序应该意识到它们如何使用地理编码。以下是有效使用此类的一些经验法则：
> 
> 最多为任何一个用户操作发送一个地理编码请求。如果用户执行涉及对同一位置进行地理编码的多个操作，请重用初始地理编码请求的结果，而不是为每个操作启动单独的请求。当您想要自动更新用户的当前位置时（例如当用户移动时），仅当用户移动了相当长的距离并且经过了合理的时间后才发出新的地理编码请求。例如，在典型情况下，您每分钟不应发送超过一个地理编码请求。不要在用户不会立即看到结果时启动地理编码请求。例如，如果您的应用程序处于非活动状态或在后台，请不要启动请求。

Apple 完全有权停止提供回复、完全切断您的应用程序，甚至撤销您的开发者帐户。

如果您需要快速处理如此大量的地址，那么您应该考虑使用 Factual for Points of Interest 或 Data Science Toolkit 等服务来处理邮政地址和地理区域。

* * *

**更新**

这是[Places API - Resolve](http://developer.factual.com/display/docs/Places+API+-+Resolve)的 API 文档，它是 Factual 的*地点*地理编码器。

* * *

**更新 2**

这是[Street Address to Coordinates](http://www.datasciencetoolkit.org/developerdocs#street2coordinates)的 API ，它是 Data Science Toolkit 的*位置*地理编码器。

# python - 在reportlab中使用PDF报告缓存数据

> ID：10619880
> 
> 赞同：1
> 
> 时间：2012-05-16T13:44:20.333
> 
> 标签：python, django, reportlab

我在我的一个项目中使用带有 django 的 reportlab 来生成动态 PDF 报告。我在段落中使用标签。

我得到了正确的输出，但是如果从 django 管理页面更改图像，那么报告中的图像不会改变。

是缓存问题吗？

如果是这样，我该如何解决？

# android - Adobe Flex Android Mobile - 防止不活动导致控制值丢失？

> ID：10619881
> 
> 赞同：0
> 
> 时间：2012-05-16T13:44:23.680
> 
> 标签：android, apache-flex, air, adobe, flex-spark

我正在开发一个可以进行简单年龄计算的移动应用程序。我有一个更新 3 个标签的日期微调器。当我第一次在我的 android 设备上启动我的移动应用程序时，它运行良好。我可以多次更新控件而没有任何问题。

我遇到的问题是，当应用程序在几个小时内处于非活动状态，然后我返回应用程序时，它就会失去它的价值。奇怪的是，我尝试更改日期微调器并且标签没有更新，并且日期微调器返回到默认日期。有没有我需要参与的事件来纠正这个问题？有人可以帮助解释发生了什么吗？我检查了 Adob​​e 的支持网站，他们没有提供任何关于这个问题的信息。

如何防止这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:59:21.513

您的应用程序可能在不活动时被 Android 系统杀死以优先考虑系统资源。当您返回您的应用程序时，它会重新启动，但您的应用程序的状态会丢失并返回默认值。为避免丢失应用程序的状态，您需要将确定状态的变量（在您的情况下为微调器的位置）保存在持久内存中。保存状态的一种方法是使用[PersistenceManager](http://www.unitedmindset.com/jonbcampos/2010/11/01/flex-4-5-persistencemanager/)。[这](http://cookbooks.adobe.com/post_Simple_data_persistence_in_a_Flex_4_5_mobile_appli-18856.html)是一个关于如何使用它的例子。

您需要决定*何时*保存状态。您可以在应用级别收听一些有用的事件，例如

```
Event.DEACTIVATE 
```

触发对持久内存的写入。

# java - 从另一个调用有界任务流

> ID：10619882
> 
> 赞同：1
> 
> 时间：2012-05-16T13:44:27.337
> 
> 标签：java, jdeveloper, oracle-adf, adf-task-flow

我有两个任务流，带有页面片段（.jsff）作为视图的任务流 A 和带有页面（.jspx）的任务流 B。两者都是有界的。是否可以从任务流 A 视图中发生的任何操作打开该页面（任务流 B）？

这是我的情况。我有一个有界任务流专辑任务流.xml。它有两个视图album-list.jsff 和album-details.jsff。可以交换这些视图。此任务流已添加到 af:region 中的页面。

视图 album-details.xml 有图像。在每张图片旁边我都有一个链接。单击该链接时，我必须在新选项卡中显示该图像，并且必须打开浏览器的打印选项对话框。

我怎样才能实现这个功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T17:05:59.223

我创建了album.jspx：

```
<?xml version='1.0' encoding='UTF-8'?>
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" version="2.1"
          xmlns:f="http://java.sun.com/jsf/core"
          xmlns:af="http://xmlns.oracle.com/adf/faces/rich"
          xmlns:cust="http://xmlns.oracle.com/adf/faces/customizable"
          xmlns:pe="http://xmlns.oracle.com/adf/pageeditor">
    <jsp:directive.page contentType="text/html;charset=UTF-8"/>
    <f:view>
        <af:document id="d1" title="#{applicationScope.navigationContext.currentNavigationModel.currentSelection.title}">
            <af:form id="f1" usesUpload="true">
                <af:pageTemplate viewId="/oracle/webcenter/portalapp/pagetemplates/WF_Template.jspx"
                         value="#{bindings.pageTemplateBinding}" id="pt1">
                    <f:facet name="content">
                        <pe:pageCustomizable id="pageCustomizable1" inlineStyle="width:968px;">
                            <f:facet name="editor">
                                <pe:pageEditorPanel id="pep1"/>
                            </f:facet>
                            <af:panelGroupLayout layout="vertical" id="pgl1"> 
                                ---
                                <af:region value="#{bindings.albumtaskflow1.regionModel}" id="albumrg"/>
                                ---
                            </af:panelGroupLayout>
                        </pe:pageCustomizable>
                    </f:facet>
                </af:pageTemplate>
            </af:form>
        </af:document>
    </f:view>
</jsp:root> 
```

在“albumrg”区域的此页面中，我添加了一个任务流专辑任务流。此专辑任务流添加了两个页面片段作为视图：

```
<?xml version="1.0" encoding="UTF-8" ?>
<adfc-config xmlns="http://xmlns.oracle.com/adf/controller" version="1.2">
  <task-flow-definition id="album-task-flow">
    <default-activity id="__1">album-list</default-activity>
    <managed-bean id="__15">
      <managed-bean-name id="__13">album</managed-bean-name>
      <managed-bean-class id="__14">com.mhis.webfactory.taskflow.album.AlbumManagedBean</managed-bean-class>
      <managed-bean-scope id="__12">pageFlow</managed-bean-scope>
    </managed-bean>
    <view id="album-list">
      <page>/oracle/webcenter/portalapp/pagefragments/taskflow/album/album-list.jsff</page>
    </view>
    <view id="album-details">
      <page>/oracle/webcenter/portalapp/pagefragments/taskflow/album/album-details.jsff</page>
    </view>
    <control-flow-rule id="__2">
      <from-activity-id id="__3">album-list</from-activity-id>
      <control-flow-case id="__4">
        <from-outcome id="__6">goToDetail</from-outcome>
        <to-activity-id id="__5">album-details</to-activity-id>
      </control-flow-case>
    </control-flow-rule>
    <control-flow-rule id="__7">
      <from-activity-id id="__8">album-details</from-activity-id>
      <control-flow-case id="__10">
        <from-outcome id="__11">goToList</from-outcome>
        <to-activity-id id="__9">album-list</to-activity-id>
      </control-flow-case>
    </control-flow-rule>
    <use-page-fragments/>
  </task-flow-definition>
</adfc-config> 
```

从这段代码中我们可以看到有两个视图：album-list 和album-details，并且已经定义了一个托管bean 相册。它还有两个控制流规则。这些规则用于导航或交换视图专辑列表和专辑详细信息。

专辑列表包含专辑列表。这是基于来自 UCM 的数据创建的模型。这不是我认为的主题的一部分。每个专辑项目都有一个 commandLink，通过它可以进入 Detail 视图。详细信息视图由该特定相册的图像的缩略图组成。

我没有给出这两个页面片段的代码。唯一需要的是 commandLink 位于每个图像缩略图下方，单击该链接将打开一个新选项卡或窗口。新打开的选项卡的页面将只有该缩略图的放大或原始图像。此外，当此选项卡将在那时打开时，必须打开浏览器的打印对话框才能打印该页面。我想我让你能够理解我的要求。

这是该 commandLink 的代码，也是我的解决方案：

```
<af:iterator value="#{pageFlowScope.album.albumDetailCurrent}" id="i4" var="images" varStatus="parentStatus"
             rows="#{pageFlowScope.album.numberOfAlbumDetailRow}">
    <af:iterator value="#{images}" var="image" id="i5" varStatus="childStatus">
        <af:commandLink styleClass="btnPrint" id="cl10" actionListener="#{pageFlowScope.album.printImage}">
             <f:attribute name="parentStatus" value="#{parentStatus.index}"/>
             <f:attribute name="childStatus" value="#{childStatus.index}"/>
         </af:commandLink>
    </af:iterator>
</af:iterator> 
```

图片缩略图被封装成List>的数据结构。

现在我做了另一个任务流。这是任务流B，即album-printtask-flow。

```
<?xml version="1.0" encoding="UTF-8" ?>
<adfc-config xmlns="http://xmlns.oracle.com/adf/controller" version="1.2">
  <task-flow-definition id="album-printtask-flow">
    <default-activity id="__1">album-detail-print</default-activity>
    <managed-bean id="__4">
      <managed-bean-name id="__3">albumPrint</managed-bean-name>
      <managed-bean-class id="__6">com.mhis.webfactory.taskflow.album.AlbumPrintManagedBean</managed-bean-class>
      <managed-bean-scope id="__5">pageFlow</managed-bean-scope>
    </managed-bean>
    <view id="album-detail-print">
      <page id="__2">/oracle/webcenter/portalapp/pages/album-detail-print.jspx</page>
    </view>
  </task-flow-definition>
</adfc-config> 
```

从代码中我们可以看到这个任务流有一个jspx 页面，即album-detail-print.jspx 作为它的默认视图，还有一个名为albumPrint 的托管bean。

我需要的是在新选项卡中打开此任务流。所以从上述commandLink的actionListener我做到了：

```
public void printImage(ActionEvent event) {
        String taskflowDocument = "/WEB-INF/album-printtask-flow.xml";
        String taskflowId = "album-printtask-flow";        
        Integer parentStatus = (Integer)event.getComponent().getAttributes().get("parentStatus");
        Integer childStatus = (Integer)event.getComponent().getAttributes().get("childStatus");        
        FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("image", getAlbumDetailCurrent().get(parentStatus).get(childStatus));        
        Map<String, Object> params = new HashMap<String, Object>();        
        String taskflowURL = ControllerContext.getInstance().getTaskFlowURL(false,new TaskFlowId(taskflowDocument,taskflowId),params);
        FacesContext context = FacesContext.getCurrentInstance();
        ExtendedRenderKitService service = Service.getRenderKitService(context, ExtendedRenderKitService.class);
        StringBuilder script = new StringBuilder();
        script.append("window.open(\""+taskflowURL+"\");");
        service.addScript(FacesContext.getCurrentInstance(), script.toString());  
} 
```

这是在新选项卡中打开专辑详细信息打印.jspx。以下代码来自album-detail-print.jspx：

```
<?xml version='1.0' encoding='UTF-8'?>
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" version="2.1"
          xmlns:f="http://java.sun.com/jsf/core"
          xmlns:h="http://java.sun.com/jsf/html"
          xmlns:af="http://xmlns.oracle.com/adf/faces/rich">
    <jsp:directive.page contentType="text/html;charset=UTF-8"/>
    <f:view>
        <af:document id="d1" title="Print">
            <af:resource type="javascript" source="/js/js/jquery-1.7.1.min.js"/>
            <af:form id="f1">
                <af:image source="http://#{facesContext.externalContext.request.serverName}/file/#{pageFlowScope.albumPrint.image.docName}&amp;Rendition=Web" id="i3" shortDesc="#{pageFlowScope.albumPrint.image.title}"/>
            </af:form>            

            <af:resource type="javascript">
                $(document).ready(function () {                    
                    window.print();
                });
            </af:resource>            
        </af:document>
    </f:view>
</jsp:root> 
```

这是 AlbumPrintManagedBean：

```
package com.mhis.webfactory.taskflow.album;

import com.mhis.portal.backing.main.JSFUtils;

import com.mhis.webfactory.taskflow.album.model.Image;

import java.util.List;

import java.util.Map;

import javax.faces.context.FacesContext;

import javax.servlet.http.HttpSession;

public class AlbumPrintManagedBean {
    private Image image;

    public AlbumPrintManagedBean() {
        super();
        image = (Image)FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("image");
    }

    private String jym="JYM";

    public void setImage(Image image) {
        this.image = image;
    }

    public Image getImage() {
        return image;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T11:26:55.513

上面提到的流程似乎很正确。处理 TF 确实会消耗很多代码行。

# google-apps-script - 导出 600 个联系人 + 组时超过最大指令数

> ID：10619893
> 
> 赞同：0
> 
> 时间：2012-05-16T13:44:48.560
> 
> 标签：google-apps-script, google-contacts-api

我想将我的 google 联系人及其组导出到 Google 电子表格中，因为标准导出文件很糟糕。我的数据集并不过分（32 个组和 600 个联系人）。我究竟做错了什么？我怎样才能限制指令的数量，这样我就不会再遇到这个错误了？

* * *

```
function GetGroups() {

  var ss=SpreadsheetApp.getActiveSpreadsheet();
  var blad6=ss.getSheets()[6];
  var vId;
  var vGroep;
  var lijn5=2;

  var contact = ContactsApp.getContacts();

  blad6.clearContents();
  blad6.getRange("A1").setValue("Naam");
  blad6.getRange("B1").setValue("Groep");
  blad6.getRange("C1").setValue("ID");

for (var i=0;i<contact.length;i++) {
    sleep(500);
    vId=contact[i].getId();
    vGroep=contact[i].getContactGroups();

    for (var j=0;j<vGroep.length;j++) {
      blad6.getRange("A" + (lijn5)).setValue(contact[i].getFullName());
      blad6.getRange("B" + (lijn5)).setValue(vGroep[j].getName());
      blad6.getRange("C" + (lijn5)).setValue(vId);
      lijn5++;
    }
  }
} 
```

* * *

谢谢，解决了大部分问题。但是，我仍然在此部分收到 Over Quota 错误。怎么会？正如您建议的那样，我正在构建一个数组

```
function HaalGroepenOp() {

  var ss=SpreadsheetApp.getActiveSpreadsheet();
  var blad6=ss.getSheets()[6];
  var resultaat=new Array();

  var vId;
  var vGroep;
  var lijn=1;

  var contact = ContactsApp.getContacts();

  blad6.clearContents();
  resultaat[0]=[["Naam"],["Groep"],["ID"]];

for (var i=0;i<contact.length;i++) {
    vId=contact[i].getId();
    vGroep=contact[i].getContactGroups();

    for (var j=0;j<vGroep.length;j++) {
      resultaat[lijn]=[[contact[i].getFullName()],[vGroep[j].getName()],[vId]];
      lijn++;
    }
  }
  blad6.getRange(1,1,lijn,3).setValues(resultaat);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T16:56:22.097

您为每个单独的项目使用 setValue 对电子表格进行了太多调用。

您应该构建数组，然后使用 setValues() 将数组分配给电子表格。

```
 blad6.getRange("A1").setValue("Naam");
  blad6.getRange("B1").setValue("Groep");
  blad6.getRange("C1").setValue("ID"); 
```

应该：

```
blad6.getRange("A1:C1").setValues([["Naam","Groep","ID"]]); 
```

同样，您应该使用循环构建一个数组，然后使用 setValues() 将数组分批分配给电子表格

请参阅[优化脚本](https://developers.google.com/apps-script/guide_common_tasks#OptimizeScripts)

# javascript - jquery unbind 事件似乎仍然存在于函数之外

> ID：10619897
> 
> 赞同：1
> 
> 时间：2012-05-16T13:45:01.060
> 
> 标签：javascript, jquery, bind, unbind

我希望我能很好地解释这一点。

我在 else if 语句中有 mousedown 和 mouseup 函数（这允许用户在页面中拖动对象并与根据某些模式运行的指针和鼠标事件相关）。

代码：

```
}else if(typeof mode !== 'undefined' && mode === 'move'){

        toolId =        'toolMove';
        this.deselectAllElems($svgContentRef);  
        fdtObj.dragMode = true;

        $('#formWrap').draggable( "option", "disabled", false ).addClass('dragCursor');
        $svgContentRef.css({ cursor: 'url(images/cursor_drag.gif),auto' });

        $('#formWrap').bind('mousedown',function() {
            $svgContentRef.css({ cursor: 'url(images/cursor_dragging.gif),auto' });
        });
        $('#formWrap').unbind('mousedown',event);

        $('#formWrap').bind('mouseup',function() {
            $svgContentRef.css({ cursor: 'url(images/cursor_drag.gif),auto' });
        });
        $('#formWrap').unbind('mouseup',event);
    }else{

        $svgContentRef.css('cursor','default');

    } 
```

问题似乎是，当我单击另一种模式（当前模式之外）时，mousedown 事件仍在被触发。我怀疑未正确处理取消绑定。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:49:27.747

可变事件从何而来？它是处理程序传递的参数吗？

如果是这样，您必须传递给 unbind() 的是对您使用 bind() 或 live() 传递的相同函数的引用

所以，你可以做这样的事情：

```
$('#formWrap').bind('mousedown',function() {
        ....
        $(this).unbind('mousedown', this);
    }); 
```

在哪里`$(this) refers to $('#formWrap')`和`this refers to the function in scope`

# 更新

而不是`$('#formWrap').bind('mousedown',function() {...});` 这样做：

```
function handler(eventObject){
   .....
   $(this).unbind('mousedown', handler);
}

$('#formWrap').bind('mousedown', handler); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T08:49:17.690

这是完整的功能。当客户端单击不同的模式时，一切都在重置光标选项方面工作。然而，在拖动模式下，拖动光标上的 mousedown 第一次工作，mouseup 也是如此，但它随后停留在 mouseup 选项上，即 mousedown 没有第二次触发，这里是代码：

```
 this.switchDesignMode = function(mode){

    fdtObj.dragMode = false;

    $('#formWrap').draggable({ disabled: true });
    $('#formWrap').removeClass('dragCursor').css('cursor','');
    //$('#formWrap').unbind('mousedown');
    //$('#formWrap').unbind('mouseup');

    designMode =                mode;                                                                           

    var $sideRef =              this.getCurrentSideRef(),                                                       
        $svgContentRef =        this.getSvgContentRef($sideRef),                                                
        $panelTools =           $('#panelTools'),                                                               
        toolId =                'toolPointer';                                                                  

    if(typeof mode !== 'undefined' && mode === 'text'){

        toolId =                'toolText';
        this.deselectAllElems($svgContentRef);                                                                  
        $svgContentRef.css('cursor','text');                                                                    

    }else if(typeof mode !== 'undefined' && mode === 'move'){

        toolId =                'toolMove';
        this.deselectAllElems($svgContentRef);                                                                  
        fdtObj.dragMode = true;

        $('#formWrap').draggable( "option", "disabled", false ).addClass('dragCursor');
        $svgContentRef.css({ cursor: 'url(images/cursor_drag.gif),auto' });

        function handler1(eventObject){
            $svgContentRef.css({ cursor: 'url(images/cursor_dragging.gif),auto' });
            $(this).unbind('mousedown', handler1);
        }
        $('#formWrap').bind('mousedown', handler1);

        function handler2(eventObject) {
            $svgContentRef.css({ cursor: 'url(images/cursor_drag.gif),auto' });
            $(this).unbind('mouseup', handler2);
        }
        $('#formWrap').bind('mouseup', handler2);

    }else{

        $svgContentRef.css('cursor','default');                                                                 

    }

    $panelTools.find('a').removeClass('active');                                                                
    $panelTools.find('a#' + toolId).addClass('active');                                                         

}; 
```

（我还尝试在函数顶部设置取消绑定选项，但这不起作用。

希望这很清楚。大号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T13:48:54.527

试试这个：

```
 $('#formWrap').bind('mousedown',function() {
        $svgContentRef.css({ cursor: 'url(images/cursor_dragging.gif),auto' });
        $(this).unbind('mousedown');
    }); 
```

您还可以使用`on`和`off`方法：

```
 $('#formWrap').on('mousedown',function() {
        $svgContentRef.css({ cursor: 'url(images/cursor_dragging.gif),auto' });
        $(this).off('mousedown');
    }); 
```

# networking - Vlan State from MIB-2

> ID：10619898
> 
> 赞同：1
> 
> 时间：2012-05-16T13:45:03.527
> 
> 标签：networking, port, snmp, cisco, mib

I need to get [vtpVlanState](http://tools.cisco.com/Support/SNMP/do/BrowseOID.do?local=en&translate=true&objectInput=vtpVlanState) results on MIB-2. I need the vlan indexes that this object returns and I need to know whether this vlan is active.

The reason I want to do this in mib-2 is because I want to do the same command(snmp) in all the switches and not only on cisco.

Is there anyway to do that?

thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:18:37.513

您无法从 MIB-II 获取 VTP 信息。VTP 是 Cisco 专有协议，MIB-II（由 IETF 在[RFC 1213](https://www.rfc-editor.org/rfc/rfc1213)中指定）不支持专有协议

**评论后编辑**

如果您正在寻找 IETF MIB 来轮询设备 Vlan 定义，请查看`dot1qVlanStatus`Q [-BRIDGE-MIB](https://www.rfc-editor.org/rfc/rfc4363)

# jquery - 可以使用 jquery 删除和旋转图像的图像库

> ID：10619899
> 
> 赞同：0
> 
> 时间：2012-05-16T13:45:06.723
> 
> 标签：jquery, image, gallery

我需要一个 jquery 插件，它允许显示一些图像并提供从图库中删除/旋转一个或多个图像的可能性，就像[在这个站点](https://annunci.ebay.it/pubblica-annuncio)中一样。你知道任何允许这样做的画廊吗？我知道这不是一个尊重标准的问题，但在网上我找不到类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T14:26:58.600

我用[这个 jquery 插件解决了](https://github.com/blueimp/jQuery-File-Upload)

# php - How to get error if FTP server is invalid.?

> ID：10619903
> 
> 赞同：2
> 
> 时间：2012-05-16T13:45:11.653
> 
> 标签：php, ftp, remote-access, ftp-server

I am trying to connect FTP Server ushin php code, if i put FTP-Servaer Name Invalid then its end the script and not return false in $conn_id.

code spinet:

```
$conn_id = ftp_connect($_POST['ftp_server']);
if($conn_id)
{
   echo "invalid server name";
}
else
{
   if(ftp_login($conn_id, $_POST['ftp_username'], $_POST['ftp_password']))
   {
    $connection_status = 'tested';
    echo "<script>alert('Correct FTP login credentials');</script>";
   }
} 
```

its stop script at first line and not shows echo "invalid server name";

**error**

ftp_connect() [function.ftp-connect]: php_network_getaddresses: getaddrinfo failed: No such host is known.

i need to alert user if he puts invalid server-name. Thanks !!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T08:40:43.427

试试这个，你就完成了

```
$conn = @ftp_connect("ftp.funnybunnyvideos.in");
if($conn)
{
    echo 'server name is valid';
}
else
{
    echo 'server name is invalid';
} 
```

干杯！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:55:59.360

我认为您只需要更改`if($conn_id)`为`if($conn_id === FALSE)`

***编辑***

尝试运行这个：

```
<?php
$c = ftp_connect('ftp.mozilla.org');
var_dump($c);

$c = ftp_connect('abcdefg');
var_dump($c);
?> 
```

你应该得到这个：

> resource(2) 类型（FTP 缓冲区）警告：ftp_connect()
> 
> [function.ftp-connect]：php_network_getaddresses：getaddrinfo 失败：不知道这样的主机。在第 5 行的 C:\abc\def.php 中
> 
> 布尔（假）

# python - Quicksort a list containing lists using python

> ID：10619905
> 
> 赞同：0
> 
> 时间：2012-05-16T13:45:18.363
> 
> 标签：python, sorting, multidimensional-array, quicksort

If I have a list defined as such:

```
myresults = [
    [1,"A",2],
    [2,"Z",1],
    [3,"J",0]
    ] 
```

and I need to sort the list. I know I can use the `sorted()` function with a key function `lambda=x:x[i]` where `i` is the position to sort in a list. So this should work:

```
print sorted(myresults, key=lambda x:x[1]) 
```

and give back a list sorted on the 2nd column in the sub list.

How would you adapt a quicksort algorithm to handle a multi-dimensional list?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:56:17.807

快速而肮脏的解决方案。如果您的快速排序如下所示：

```
def qsort(lst):
    if len(lst) == 0:
        return []
    else:
        pivot = lst[0]
        lesser = qsort([x for x in lst[1:] if x < pivot])
        greater = qsort([x for x in lst[1:] if x >= pivot])
        return lesser + [pivot] + greater 
```

您可以只使用索引变量按所需维度排序：

```
def qsort_index(lst, index):
    if len(lst) == 0:
        return []
    else:
        pivot = lst[0]
        lesser = qsort_index([x for x in lst[1:] if x[index] < pivot[index]], index)
        greater = qsort_index([x for x in lst[1:] if x[index] >= pivot[index]], index)
        return lesser + [pivot] + greater

>>> qsort_index(myresults, 0)
[[1, 'A', 2], [2, 'Z', 1], [3, 'J', 0]]
>>> qsort_index(myresults, 1)
[[1, 'A', 2], [3, 'J', 0], [2, 'Z', 1]]
>>> qsort_index(myresults, 2)
[[3, 'J', 0], [2, 'Z', 1], [1, 'A', 2]] 
```

这种实现远非最佳，但我认为你明白了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T13:50:15.633

您可以使用 Python 的[operator](http://docs.python.org/library/operator.html)模块。

```
import operator
sorted(myresults, key=operator.itemgetter(0))
[[1, 'A', 2], [2, 'Z', 1], [3, 'J', 0]]
sorted(myresults, key=operator.itemgetter(1))
[[1, 'A', 2], [3, 'J', 0], [2, 'Z', 1]] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T13:49:46.773

您可以通过这种方式实现：

```
import operator
list.sort(key=operator.itemgetter(*args)) 
```

这也可以..

```
import operator
sorted(list, key=operator.itemgetter(1)) 
```

# java - Connect to MDB from java jar File - Failure

> ID：10619906
> 
> 赞同：0
> 
> 时间：2012-05-16T13:45:18.470
> 
> 标签：java, database, jar, odbc

I have a java program connecting to a mdb database file. In Eclipse it works fine. Now I export the program as an jar file. When I start the program now and want to have access to the same file, I get the message

> Data source name not found and no default driver specified.

I have already registered the database as ODBC-source in windows, but it doesn't work. The Path to the Database is the same in Eclipse and in jar. Maybe is the problem accessing some external source from within a jar?? Any suggestions?

```
protected static Connection getAccessConnection(String fullPath)
  throws ClassNotFoundException, SQLException 
  {
    String driver = "sun.jdbc.odbc.JdbcOdbcDriver";
    Class.forName(driver);      
    String url = "jdbc:odbc:Driver="
         + "{Microsoft Access Driver (*.mdb)};"
         + "DBQ="
         + fullPath.replace("\\", "/");
    String username = "";
    String password = "";
    Connection result =
        DriverManager.getConnection(url, username, password);
    return result;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:20:48.867

您似乎使用了不同版本的 Java：64 位`.jar`模式和 32 位 Eclipse 模式。您可以使用 ProcessExplorer 或其他类似工具进行检查。根据：[http ://www.selikoff.net/2011/07/26/connecting-to-ms-access-file-via-jdbc-in-64-bit-java/](http://www.selikoff.net/2011/07/26/connecting-to-ms-access-file-via-jdbc-in-64-bit-java/)

对于 32 位和 64 位环境，连接到 Access 数据库的字符串似乎是不同的。在 32 位中，您可以使用：

```
jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};... 
```

在 64 位中：

```
jdbc:odbc:Driver={Microsoft Access Driver (*.mdb, *.accdb)};... 
```

我认为您可以尝试两者并首先使用该工作（如果两者都不起作用，则抛出异常）。这样，您的应用程序将能够在 32 位和 64 位 JRE 中运行。

如果您在 Eclipse 和 中使用相同的 JRE `.jar`：

在 ODBC 管理员中有“跟踪”选项卡。启用跟踪并从 Eclipse 运行您的应用程序。保存此跟踪日志，然后从`.jar`应用程序创建跟踪日志。比较两条迹线。

# c# - How do I pass back a string and a boolean in one function in C#?

> ID：10619907
> 
> 赞同：1
> 
> 时间：2012-05-16T13:45:18.920
> 
> 标签：c#, arrays, list

So i have this function

```
 public bool FileExists(string path, string filename)
    {
        string fullPath = Path.Combine(path, "pool");
        string[] results = System.IO.Directory.GetFiles(fullPath, filename, SearchOption.AllDirectories);
       return (results.Length == 0 ?  false : true);
    } 
```

And it returns true or false on whether a file is found in a directory and all its subdirectories...But i want to pass the string location as well

Here is how i call it

```
 if (FileExists(location, attr.link))
            {
                FileInfo f = new FileInfo("string the file was found"); 
```

Any ideas on how to achieve this? Maybe change to a list or array ...any ideas

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T13:52:01.940

你的意思是你只想返回找到文件的所有位置吗？

你可以这样做：

```
public static string[] GetFiles(string path, string filename)
{
    string fullPath = Path.Combine(path, "pool");
    return System.IO.Directory.GetFiles(fullPath, filename, SearchOption.AllDirectories);   
} 
```

并像这样使用：

```
var files = GetFiles(location, attr.link);

if (files.Any())
{
    //Do stuff
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T13:48:33.203

因此将方法重命名为`TryFindFile`并提供签名：

```
public bool TryFindFile(string path, string filename, out string location) 
```

`true`如果找到该文件，则该方法返回，并设置`location`为该位置，否则返回`false`并设置`location`为`null`. 如果有多个位置，您可以键入`location`a 。`string[]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T13:49:33.700

各种方式 - 返回具有两个字段的结构或类，使用[out](http://msdn.microsoft.com/en-us/library/t3c3bfhx%28v=vs.80%29.aspx)关键字修改，使用[Tuple](http://msdn.microsoft.com/en-us/library/system.tuple.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T13:50:06.953

你可以使用一个`out`参数？

```
public bool FileExists(string path, string filename, out string location)
{
    string fullPath = Path.Combine(path, "pool");
    string[] results = System.IO.Directory.GetFiles(fullPath, filename, SearchOption.AllDirectories);
    var doesExist = (results.Length == 0 ?  false : true);
    location = fullPath;//or whatever it is
} 
```

然后你可以这样称呼它

```
if (FileExists(path, filename, out location))
{
    //location now holds the path
} 
```

更多关于`out`参数的信息可以在[这里](http://msdn.microsoft.com/en-us/library/t3c3bfhx%28v=vs.71%29.aspx)找到。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T13:48:15.547

添加您需要的参数。

```
bool FileExists(string path, string filename, out string somthElse)
{
   somthElse = "asdf";
   return true;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-16T13:49:22.250

您可以将输出参数（out string[] results）传递给方法并保留该方法，或者您可以更改方法并返回结果数组（并在调用者中检查 true 或 false）。

更便宜的做法是添加一个 out 参数。

# c#-4.0 - DisplayForModel vs globalization

> ID：10619916
> 
> 赞同：1
> 
> 时间：2012-05-16T13:45:52.493
> 
> 标签：c#-4.0, razor, localization, globalization, asp.net-mvc-4

We are developing a website that should work in Portuguese and English! For this we create the following architecture:

*   Each class (Product, Service, Contact ..) has a field for pt-br and one for en-us. Here's an example: [http://chopapp.com/#1u9no3qw](http://chopapp.com/#1u9no3qw)

*   For the View to be displayed in correct language, the approach we use: ![Solution](../Images/1b87958d098dd42377bb29308b8e2ca2.png)

## Remover.cshtml and Remover.us-en.cshtml

**There is no difference between the views!**

```
@using Resources
@using Dicionario = Semep.Recursos.Admin.Pagina.Remover
@model PaginaViewModel

@section css {
    @Script.StylesForms()
    <link href="~/Areas/Admin/Content/controller/paginas/remover.css" rel="stylesheet" type="text/css" />
}

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    <legend>@Dicionario.DesejaRemoverEstaPagina</legend>
    <fieldset>
        @Html.ValidationSummary(false, Strings.VerifiqueOsErrosAbaixo)
        @Html.DisplayForModel()
    </fieldset>

    <div class="buttons">
        @Html.ActionLink("Cancelar", "Index", "Solucoes")
        <input type="submit" value="SIM" />
    </div>
} 
```

## DisplayTemplates\PaginaViewModel.cshtml

Displays the fields pt-br!

```
@model PaginaViewModel

@Html.DisplayFor(p => p.ID)

<div class="display-label">
    @Html.LabelFor(p => p.Link)
</div>
<div class="display-field">
    @Html.DisplayFor(p => p.Link)
</div>

<div class="display-label">
    @Html.LabelFor(p => p.Nome)
</div>
<div class="display-field">
    @Html.DisplayFor(p => p.Nome)
</div>

<div class="display-label">
    @Html.LabelFor(p => p.Texto)
</div>
<div class="display-field">
    @Html.DisplayFor(p => p.Texto)
</div> 
```

## DisplayTemplates\PaginaViewModel.en-us.cshtml

Displays the fields en-us!

```
@model PaginaViewModel

@Html.DisplayFor(p => p.ID)

<div class="display-label">
    @Html.LabelFor(p => p.Link)
</div>
<div class="display-field">
    @Html.DisplayFor(p => p.Link)
</div>

<div class="display-label">
    @Html.LabelFor(p => p.NomeEn)
</div>
<div class="display-field">
    @Html.DisplayFor(p => p.NomeEn)
</div>

<div class="display-label">
    @Html.LabelFor(p => p.TextoEn)
</div>
<div class="display-field">
    @Html.DisplayFor(p => p.TextoEn)
</div> 
```

## Question

However, the data come only in "pt-br".
**How to work with DisplayTemplates and globalization in asp.net mvc?**

## Notes

I know this is not the best way to structure the data to work with globalization.
But the whole system is so, and **I have** to maintain this standard!

# java - how to search in a java file using java?

> ID：10619917
> 
> 赞同：0
> 
> 时间：2012-05-16T13:45:55.680
> 
> 标签：java, reflection

I need to search for a string (actually a method call) in a java file. I also need to know where it was called (I mean in which method in the java file). What is the best approach?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:48:35.827

反射实际上只能告诉您给定 Java 对象存在哪些方法和字段。到 JVM 运行时，Java 源代码已经编译为字节码，在源文件中“搜索字符串”是没有意义的。

我认为最好的办法就是像普通文本文件一样解析它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-16T14:04:11.703

```
class Test {
   void doTest(){
    // do test
   }

   public static void main(String[] args){
      for (Method each : Test.class.getMethods()){
         System.out.println(each.getName() + "()");
      }
   }
} 
```

将返回：“doTest()”

# android - how to use ffmpeg on android

> ID：10619918
> 
> 赞同：1
> 
> 时间：2012-05-16T13:46:00.770
> 
> 标签：android, ffmpeg

I want to create video file from Jpeg and audio file. I've compiled FFMpeg to android and I've got libffmpeg.so, and obj folder with ithers resources.

But how to use it? What I need to do for use command like: "ffmpeg -i image.jpeg -i audio.mp3 out.avi" Please help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:42:46.487

来自[图像上的 FFmpeg 文档](http://ffmpeg.org/ffmpeg.html#image2-1)：

> 以下示例显示如何使用 ffmpeg 从文件序列“img-001.jpeg”、“img-002.jpeg”、... 中的图像创建视频，假设输入帧速率为每秒 10 帧：
> 
> ```
> ffmpeg -i 'img-%03d.jpeg' -r 10 out.mkv 
> ```

要从 Android 实际运行它，请查看[Runtime.exec() 的文档](http://developer.android.com/reference/java/lang/Runtime.html#exec%28java.lang.String%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:48:53.540

您将需要包含可以从 Java 调用的[JNI](http://java.sun.com/docs/books/jni/)包装器方法，这些方法将依次调用 FFmpeg 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T18:56:23.153

您可以使用 JNI 接口从库中调用函数，在您的情况下为 ffmpeg 库。这是JNI的基础教程：http: [//marakana.com/forums/android/examples/49.html](http://marakana.com/forums/android/examples/49.html)

简而言之，JNI 是 Java 代码和 C 代码之间的桥梁。

为了从您的 Java 代码在命令行中调用 ffmpeg，您可以将 ffmpeg.c（和其他需要的文件）包含到您的 jni 接口（在 jni 目录下）并与您的其他 jni 代码一起编译，以便您可以调用ffmpeg 的 main 函数，带有参数，就像命令行一样。

# google-apps-script - 一天服务调用次数过多：gmail read

> ID：10619919
> 
> 赞同：2
> 
> 时间：2012-05-16T13:46:13.433
> 
> 标签：google-apps-script

我有一个脚本每分钟轮询收件箱，然后相应地进行一些处理。我收到此错误：

> 一天服务调用次数过多：gmail 读取。

每天的限额是多少？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T13:55:02.357

过时>>gmail 读取上限为 10000/天。

查看当前配额> 选择配额限制选项卡> [在此处查看配额。](https://docs.google.com/macros/dashboard)

# ruby - 替换 Capistrano / Capifony 中的任务

> ID：10619926
> 
> 赞同：3
> 
> 时间：2012-05-16T13:46:35.993
> 
> 标签：ruby, capistrano, capifony

我正在使用[Capifony](https://github.com/everzet/capifony)，一个针对 Capistrano 的 Symfony 特定扩展。我需要覆盖其中一个预定义的任务，以便运行我自己的 symfony 任务 - 用我自己的替换[https://github.com/everzet/capifony/blob/master/lib/symfony1.rb#L180](https://github.com/everzet/capifony/blob/master/lib/symfony1.rb#L180)`task :permissions`中的任务。

我尝试将以下内容添加到我的`deploy.rb`文件末尾，但 Capistrano 没有选择它，而是使用已经定义的任务：

```
namespace :project do
  desc "Fixes symfony directory permissions using Citizencard custom permission setter"
  task :permissions do
    run "cd #{latest_release} && #{php_bin} ./symfony citizencard:permissions"
  end
end 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T14:22:11.840

我没有深入挖掘命名空间堆栈。将我的代码更改为以下使其工作：

```
 namespace :symfony do
    namespace :project do
      desc "Fixes symfony directory permissions using Citizencard custom permission setter"
      task :permissions do
        run "cd #{latest_release} && #{php_bin} ./symfony citizencard:permissions"
      end
    end
  end 
```

# c# - 带有socket.io（nodejs）的tcp客户端

> ID：10619932
> 
> 赞同：5
> 
> 时间：2012-05-16T13:46:54.653
> 
> 标签：c#, node.js, tcp, connection, socket.io

我需要一个连接到 C# 应用程序的 nodejs 服务器，我不喜欢使用第三方库，所以我一直在尝试使用一个`TcpClient`，服务器是这样的：

```
var io = require('socket.io').listen(8000);
io.socket.on('connection',function(socket)
{
 console.log("connected");
} 
```

在 C# 项目上：

```
var client = new TcpClient(Server,8000);
Socket s = client.Client;
if (!s.Connected)
{
   s.SetSocketOption(SocketOptionLevel.Socket,
   SocketOptionName.ReceiveBuffer, 16384);
   MessageBox.Show("disconnected");
}
else
{
   MessageBox.Show("connected");
   s.Send(Encoding.UTF8.GetBytes("something"));
} 
```

对于我所理解的，`"something"`我应该写一些会在nodejs端触发“on（'connection'）”的东西，我错过了什么吗？

PS：如果你知道我需要的一个好的第三方库，你可以提一下

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:55:33.057

实际上，服务器 on('connection') 应该在您构造 TcpClient 对象时触发，因为那是连接发生的时候，而不是在您尝试发送一些数据的时候。

# android - 以编程方式设置可扩展列表视图项的高度

> ID：10619934
> 
> 赞同：0
> 
> 时间：2012-05-16T13:46:58.520
> 
> 标签：android, layout, height, expandablelistview

我有一个可扩展列表视图，并且为组项设置了背景，但我想调整高度。我已经将高度设置为 xml 文件（50dp），但它不起作用（实际高度不是 50 dp，但它更高），所以我正在考虑以编程方式进行。

![在此处输入图像描述](../Images/967ca819d573a92bebc639feaf870e80.png)

这是我的一段代码来解释它

grouplayout_index.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
      android:id="@+id/LinearLayout_index"
      android:background="@drawable/bg_capitolo_retina"
      android:paddingBottom="10dp"
      android:paddingTop="10dp"
      android:layout_height="50dp"             ---------------------//height = 50 dp
      android:layout_marginTop="10dp"
      android:layout_marginBottom="10dp"
      android:layout_width="match_parent" >

    <ImageView android:id="@+id/freccia_indice" android:src="@drawable/freccia_o"
        android:clickable="false"
        android:layout_height="28dp"
        android:layout_width="28dp"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="10dp" 
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:paddingLeft="10dp"  />

    <TextView android:id="@+id/tvGroup"  
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginTop="10dp"
        android:paddingLeft="50dp" />
</LinearLayout> 
```

索引.java

```
 public class Index extends  ExpandableListActivity {
        .....
           IndexAdapter   mAdapter = new IndexAdapter .....
          explistview.setAdapter(mAdapter);
} 
```

索引适配器.java

```
 public class IndexAdapter  extends BaseExpandableListAdapter{

     ....various methods......
   public View getGroupView(int groupPosition, boolean isExpanded, View  convertView,ViewGroup parent) {

    if (convertView == null) {
            LayoutInflater infalInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
             convertView =   infalInflater.inflate(R.layout.grouplayout_index, null);

    }      
         TextView textView = (TextView) convertView.findViewById(R.id.tvGroup);
         textView.setTextAppearance(context, R.style.textViewStyleGroup);
         textView.setText("textview");

            /* I have tried this code but it doesn't works.
           LinearLayout ll = (LinearLayout)   convertView.findViewById(R.id.LinearLayout_indice);
           ll.setLayoutParams(new LinearLayout.LayoutParams(30,50));
*/              
   } 
```

有人能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:27:03.573

额外高度的问题可能是在 LinearLayout 上设置的 layout_marginTop 和 layout_marginBottom 的结果。如下布局可能满足您的需求：

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/LinearLayout_index"
android:layout_width="match_parent"
android:layout_height="50dp"
android:background="@drawable/shape_data_background"
android:paddingBottom="10dp"
android:paddingTop="10dp" >

<ImageView
    android:id="@+id/freccia_indice"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:clickable="false"
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:paddingLeft="10dp"
    android:src="@drawable/arrow_right" />

<TextView
    android:id="@+id/tvGroup"
    android:layout_width="0dp"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:text="textview" />

</LinearLayout> 
```

除非您对正好为 50dp 的行有要求，否则我通常最好使用 layout_height="wrap_content" 让列表视图中的行自行调整大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T09:32:19.123

使用此代码设置父子高度

> expListView.setChildDivider(getResources().getDrawable(R.color.white)); expListView.setDivider(getResources().getDrawable(R.color.white));
> expListView.setDividerHeight(20);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-16T06:57:39.040

通过向组布局添加额外的图像视图，我已经成功地在屏幕右侧实现了组指示器，没有任何问题，如下所示： -

```
Expandable Adapter method 

@Override
    public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent)
    {
        View row;

        if (convertView != null)
        {
            row = convertView;
        }
        else
        {
            row = LayoutInflater.from(getContext()).inflate(R.layout.group_row, null));
        }

        final ImageView indicator = (ImageView)row.findViewById(R.id.indicator);
        indicator.setSelected(isExpanded);
        return row;
    } 
```

* * *

```
group layout 
```

* * *

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:padding="8dp" 
    android:background="#fff">

    <TextView
        android:id="@+id/lblListHeader"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:paddingLeft="3dp"
        android:paddingRight="20dp"
        android:textSize="16dp"
        android:text="Header"
        android:lineSpacingExtra="-4dp"
        android:textColor="@color/title_heading" />

    <LinearLayout 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="5"
        >
    </LinearLayout>

     <ImageView 
         android:id="@+id/imageview_list_group_indicator"
        android:layout_width="30dp"
        android:layout_height="30dp"
        android:layout_marginRight="7dp"
        android:src="@drawable/groupindicator1"/>
</LinearLayout> 
```

* * *

## 图像的选择器 xml

```
<?xml version="1.0" encoding="utf-8"?>

 <selector xmlns:android="http://schemas.android.com/apk/res/android" >
       <item android:drawable="@drawable/arrow_up" android:state_selected="true" />
    <item android:drawable="@drawable/arrow_down" android:state_selected="false" />
    <item android:drawable="@drawable/arrow_down"  />
</selector> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-12T06:39:12.663

像这样使用

```
ExpandableAdapter adapter = new 

ExpandableAdapter(Fragment_Test.this.getActivity(), parentList, childList);
        ExpandableListView exp = new ExpandableListView(Fragment_Test.this.getActivity());
        exp.setGroupIndicator(null);
        exp.setSelector(getResources().getDrawable(R.drawable.selectedcorner));
        exp.setVerticalScrollBarEnabled(true);
        exp.setScrollbarFadingEnabled(false);
    exp.setLayoutParams(new FrameLayout.LayoutParams(FrameLayout.LayoutParams.MATCH_PARENT,FrameLayout.LayoutParams.MATCH_PARENT)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-09T13:46:24.687

如果您正在使用数据绑定并且在展开时如果可扩展列表视图没有调整高度，那么我建议调用 binding.executependingBinding()

# c# - LINQ 查询查找对象与查询输入变量最接近的数据变量

> ID：10619935
> 
> 赞同：1
> 
> 时间：2012-05-16T13:46:58.727
> 
> 标签：c#, linq, min

我有一个 List，其中 UserObj 有一个 DateTime 数据成员和一个字符串 Name 成员。我想在具有给定名称 InputName 和 DateTime 最接近输入 DateTime InputDT 的列表中找到 UserObj

Names 和 DateTimes 可能同时出现，但会有一个独特的解决方案。

我想过：

```
UserObj user = userObjList.Where(u => ((u.Name ==inputName) && (userObjList.Min())).ToList()[0]; 
```

但不确定如何指定最低条件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T13:54:06.450

按两个日期之间的绝对差对它们进行排序，然后取第一个。

```
UserObj user = userObjList
    .Where(u => u.Name == inputName)
    .OrderBy(u => Math.Abs((u.Date - inputDT).TotalSeconds))
    .First(); 
```

或使用[MinBy](http://code.google.com/p/morelinq/source/browse/trunk/MoreLinq/MinBy.cs?r=83)扩展：

```
UserObj user = userObjList
    .Where(u => u.Name == inputName)
    .MinBy(u => Math.Abs((u.Date - inputDT).TotalSeconds)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:03:49.337

我认为以下内容应该可以工作，尽管它未经测试......

```
var validUserObjs = userObjList.Where(u => u.Name ==inputName);
double mintime = validUserObjs.Min(u=>Math.Abs((u.Date-inputDate).TotalSeconds));
var result = validUserObjs.First(u=>Math.Abs((u.Date-inputDate).TotalSeconds)==mintime); 
```

这个想法是它首先由用户获取有效的用户对象。然后它会找到最接近的日期与输入日期的距离。然后它通过使用该时间差找到特定项目。

它比给定的顺序要混乱得多，但它应该是 O(N) 来完成它（一次通过列表以找到最小值，然后第二次通过以获取该项目）。它可能需要对我的代码中的错误进行一些小的调整，但这个想法是合理的。:)

# c# - 将字符串解析为浮动

> ID：10619937
> 
> 赞同：-1
> 
> 时间：2012-05-16T13:47:02.750
> 
> 标签：c#, parsing

我正在尝试解析一个字符串以浮动并将其添加到 SqlParameter。当我输入 1234567890 时，它在数据库中保存为 1234567936。我还看到它在调试时转换为 1.234568E+9。由于数据库接受浮点数，我无法将其转换为双精度。

```
com.Parameters.Add(new SqlParameter("Awb", SqlDbType.Float)).Value = float.Parse(txtAwb.Text); 
```

解决方案：看起来我必须在数据库中使用另一种数据类型。浮点值不能包含多位数的数字。我正在研究一个旧数据库，所以我会考虑别的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T13:55:43.267

浮点值的精度有限......即*有效数字的数量有限*。

如果您需要准确存储大值，则需要在数据库中使用不同的字段类型。货币换取货币，或者可能是大的非小数值的整数。

基本上一个浮点数不能保持你想要的精度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:52:36.603

[这](http://msdn.microsoft.com/en-us/library/b1e65aza%28v=vs.80%29.aspx)是关于浮点数的所有 c# 内容

`float.Parse(value)`应该做你想做的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T13:56:26.717

[不幸的是，当您使用float](http://msdn.microsoft.com/en-us/library/b1e65aza%28v=vs.71%29.aspx)时，您不能获得超过 7 个有价值的数字。请考虑使用其他数据类型。

# javascript - 谷歌分析中的大量直接视图

> ID：10619942
> 
> 赞同：1
> 
> 时间：2012-05-16T13:47:20.267
> 
> 标签：javascript, google-analytics

几个月来，我怀疑谷歌分析没有正确跟踪推荐人。直接观看的数量非常可笑，而且我确信有些从常规链接获得的人被视为直接观看。

为什么这会发生在我身上？

如何调试/解决此问题？

我一无所知...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T09:20:00.193

如果有人感兴趣，我很晚才知道，当一个带有 ssl 引用者的网站指向我的网站（不是 ssl）时，它会将其显示为直接视图

# ruby-on-rails - rails 选择框选项默认不是来自数组

> ID：10619943
> 
> 赞同：0
> 
> 时间：2012-05-16T13:47:23.467
> 
> 标签：ruby-on-rails, select, options

好的，

**这会在 rails 中创建一个选择框。**

```
<%= select("dashboard_sub_category", "id",options_for_select( @vendor_sub_categories.collect {|p| [p.category_name, p.sub_category_id] }.unshift(["All Categories", 0]))) %> 
```

当我的页面加载时，我想要在选择框中显示一个元素，

**“所有类别”**

我希望它***默认被选中。***

我已经像上面那样使用了***unshift 。***

## 这是好事吗？还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:42:43.580

尝试将包含空白添加到您的选择代码中，然后在您的数据库中将默认位置设置为 0 或所有类别，以便在访问选择菜单时默认值为 0/所有类别。

```
{:include_blank => 'All Categories'} 
```

请注意确定 zI 是否将其放在正确的括号内，但试试这个

```
<%= select("dashboard_sub_category", "id",options_for_select( @vendor_sub_categories.collect {|p| [p.category_name, p.sub_category_id] }.unshift(["All Categories", 0], { :include_blank => 'All Categories' }))) %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:29:26.193

就个人而言，我喜欢将选择器选项的创建提取到可能的 before_filter 中，这样视图就不必执行任何代码。它可以只接受类似的东西`@options`，将来你可以在不改变视图的情况下改变它的生成方式，只是控制器，因为它属于它的范围。视图不应该做任何真正的编码工作。

然后我通常会像这样生成：

```
@options = Model.all.inject(Array.new) do |sel, model|
  sel << [model.category_name, model.sub_category_id]
end
@options = [["All Categories", 0]] + @options 
```

然后你可以只使用`@options`你的选择标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T15:10:59.747

**伙计，您的意思是，将该操作移至控制器，不要在视图中执行。我完全同意这一点，我非常感谢你的回答。**

*我将把它移到控制器并创建@options，谢谢。*

现在，让我们谈谈我不同意的地方。

你是说？

这个，

```
@options = Model.all.inject(Array.new) do |sel, model|
  sel << [model.category_name, model.sub_category_id]
end
@options = [["All Categories", 0]] + @options 
```

比这更好，

```
Model.collect {|p| [p.category_name, p.sub_category_id] }.unshift(["All Categories", 0]) 
```

## 我可以期待一个解释吗？

```
ruby-1.9.2-p290 :027 >  timing = Benchmark.measure {@options = v.sub_categories.inject(Array.new) do |sel, model|
ruby-1.9.2-p290 :028 >        sel << [model.category_name, model.sub_category_id]
ruby-1.9.2-p290 :029?>     end
ruby-1.9.2-p290 :030?>   @options = [["All Categories", 0]] + @options
ruby-1.9.2-p290 :031?>   }
 =>   0.000000   0.000000   0.000000 (  0.000079)

ruby-1.9.2-p290 :023 > timing = Benchmark.measure { v.sub_categories.collect {|p| [p.category_name, p.sub_category_id] }.unshift(["All Categories", 0])}
 =>   0.000000   0.000000   0.000000 (  0.000086) 
```

# php - Joomla 认证返回 URL

> ID：10619945
> 
> 赞同：0
> 
> 时间：2012-05-16T13:47:33.190
> 
> 标签：php, joomla, joomla1.5

我正在尝试修改已经大量修改的 joomla 环境。我不是 Joomla 开发人员，所以可以这么说，我有点迷失在荒野中。

基本上，99% 的网站都包含访问级别 = 已注册的文章。当您点击其中一篇文章的 URL 时，Joomla 会重定向到授权页面。这是有道理的，除了原始文章的 URL 丢失，因此登录后，您将被重定向回主页，而不是原来的文章。

现在，我可以看到 error.php 页面已经修改了代码以拦截 403 错误，这看起来应该可以工作。但是，不知何故/某处 Joomla 以其他方式重定向到身份验证页面，并且没有抛出 403。

所以我的问题是，Joomla 如何执行对身份验证页面的重定向（顺便说一句，自定义插件），Joomla 有什么方法可以改为抛出 403 错误，以便我可以使用已经在 error.php 中编码的逻辑。

提前致谢

ps 它是 Joomla 1.5.23 和 PHP 5.2.17

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:58:39.523

Joomla！1.5 使用了一个相当全面的`.htaccess`文件，正如[Joel](https://stackoverflow.com/users/468405/joel)所说，这发生在 Joomla 之前！进去看看。

标准的 Joomla！如果相关组件编写正确（如文章的标准），1.5 安装将在用户登录后重定向到正确的内容`com_content`。我会先看看为什么这不起作用，例如*是否出于某种原因修改了身份验证检查。*

Joomla！1.5 通常通过将`return`参数（base64 编码）附加到用于调用的 URL 来执行此操作`com_user`，您可以在大多数组件中找到这样的代码来检查用户是否可以访问，如果没有则重定向它们。

```
if (($contact->access > $user->get('aid', 0)) || ($contact->category_access > $user->get('aid', 0))) {
    $uri        = JFactory::getURI();
    $return     = $uri->toString();

    $url  = 'index.php?option=com_user&view=login';
    $url .= '&return='.base64_encode($return);

    $mainframe->redirect($url, JText::_('You must login first') );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:56:23.383

HTTP 级别出现[403 错误](http://en.wikipedia.org/wiki/HTTP_403)。当用户试图访问他无权访问的服务器的一部分时，就会抛出它。这些权限与 Joomla 权限完全不同。大多数情况下，403 错误仅来自[.htaccess](http://en.wikipedia.org/wiki/.htaccess)文件中的限制，或者当脚本告诉服务器抛出 403 错误时（参见下面的代码）。

我不是 Joomla 专家，但是当用户进入身份验证页面时，您应该能够抛出 403 错误。这个 PHP 代码应该可以解决问题：

```
header("HTTP/1.0 403 Forbidden"); 
```

希望这对您有所帮助。

# c - 如何在C中完全破坏套接字连接

> ID：10619952
> 
> 赞同：30
> 
> 时间：2012-05-16T13:48:02.357
> 
> 标签：c, linux, sockets, network-programming

我已经使用套接字在 linux 中创建了一个聊天客户端，我希望完全破坏连接。以下是代码的相关部分：

```
int sock, connected, bytes_recieved , true = 1, pid;  
char send_data [1024] , recv_data[1024];     
struct sockaddr_in server_addr,client_addr;    
int sin_size;
label:
if ((sock = socket(AF_INET, SOCK_STREAM, 0)) == -1)
{
    perror("Socket");
    exit(1);
}
if (setsockopt(sock,SOL_SOCKET,SO_REUSEADDR,&true,sizeof(int)) == -1)
{
    perror("Setsockopt");
    exit(1);
}
server_addr.sin_family = AF_INET;         
server_addr.sin_port = htons(3128);     
server_addr.sin_addr.s_addr = INADDR_ANY; 
bzero(&(server_addr.sin_zero),8); 
if (bind(sock, (struct sockaddr *)&server_addr, sizeof(struct sockaddr))== -1)
{
    perror("Unable to bind");
    exit(1);
}
if (listen(sock, 5) == -1)
{
    perror("Listen");
    exit(1);
}
printf("\nTCPServer Waiting for client on port 3128");
fflush(stdout);
connected = accept(sock, (struct sockaddr *)&client_addr,&sin_size);
//necessary code
close(sock);
goto label; 
```

但关闭（袜子）似乎并没有完全关闭破坏连接，因为在进入“标签”之后，代码正在退出并显示错误消息

```
Unable to bind: Address already in use 
```

那就是连接不再发生。问题可能是什么？提前致谢。

编辑：我真正想要的是，当我在破坏连接后从头开始运行脚本时，它应该作为一个新程序运行。我该怎么做？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-18T10:37:58.347

该`close`调用仅标记 TCP 套接字已关闭。它不再被进程使用。但是内核可能仍会在一段时间内保留一些资源（TIME_WAIT、2MLS 等）。

SO_REUSEADDR 的设置应该消除绑定问题。

因此，请确保`true`调用时的值确实非零`setsockopt`（溢出错误可能会覆盖它）：

```
true = 1;
setsockopt(sock,SOL_SOCKET,SO_REUSEADDR,&true,sizeof(int)) 
```

有`pid`变量是你的代码。如果您使用`fork`（用于启动连接处理过程），那么您也应该`sock`在不需要它的过程中关闭它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-16T16:53:37.733

首先对于命名，所以我们都将相同的东西命名为相同的：

服务器端：

套接字传递给`listen()`然后`accept()`让我们调用*监听*套接字。`accept()`让我们调用*接受*的套接字返回的套接字。

客户端：

传递给`connect()`让我们调用*连接/连接*套接字的套接字。

* * *

关于你的问题：

要终止`accept()`ed 连接，可以选择先使用，然后**关闭*接受*的套接字**（你称之为连接的）。[`shutdown()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/shutdown.html)[`close ()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/close.html)

然后在调用之前接受一个新的连接循环，`accept()`不要**一遍**`bind()`又`listen()`一遍。

如果您想摆脱返回后发出的**挂起**的s，请仅~~关闭并~~关闭*侦听*套接字。 **`connect()``accept()`**

 *** * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-18T06:05:20.147

连接仍然处于活动状态，因为您忘记关闭连接的套接字。关闭监听套接字不会自动关闭连接的套接字。

```
//necessary code
close(connected);  // <---- add this line
close(sock);
goto label; 
```

我不确定您为什么要获得 EADDRINUSE。该代码在 linux 和 mac os 上运行良好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T16:01:00.250

您应该使用[shutdown(2)](http://linux.die.net/man/2/shutdown)系统调用。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-16T13:50:47.913

好吧，因为当对方确认或在某个超时之后，连接才真正关闭。这是正常行为...

编辑：我实际上并没有检查您的代码，但从其他用户的评论来看，您做错了什么......**

# sql - 上次更新行

> ID：10619957
> 
> 赞同：-1
> 
> 时间：2012-05-16T13:48:08.837
> 
> 标签：sql, sql-server, triggers

记录最后一次使用日期列更新或插入行的最佳触发器是什么？

我试过这个，但它不工作：

```
CREATE TRIGGER trUpdate ON Tablename FOR INSERT, UPDATE 
AS

  IF @@nestlevel = 0
  BEGIN

    UPDATE Tablename 
       SET Datecolumn = GETDATE() 
      FROM 
     WHERE ID = (SELECT i.id FROM INSERTED i)

  END 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T13:50:55.050

你的语法有点不对劲：

```
CREATE TRIGGER dbo.trUpdate 
ON dbo.Tablename 
FOR INSERT, UPDATE 
AS
BEGIN
  SET NOCOUNT ON;

  UPDATE Tablename 
    SET Datecolumn = GETDATE() 
    WHERE ID IN (SELECT id FROM inserted);
END
GO 
```

现在您应该做的是将列更改为`NOT NULL`默认值`GETDATE()`。然后你只需要在更新时触发这个触发器。

```
-- first clean up any remaining NULL values:
UPDATE dbo.Tablename 
  SET DateColumn = '19000101'
  WHERE DateColumn IS NULL;

-- now add the default constraint:
ALTER TABLE dbo.Tablename ADD CONSTRAINT
  DF_Tablename_DateColumn DEFAULT(GETDATE()) FOR DateColumn;

-- now add the NOT NULL constraint:
ALTER TABLE dbo.Tablename ALTER COLUMN DateColumn
  DATETIME NOT NULL;

-- now you can update the trigger so that it only fires on update:
ALTER TRIGGER dbo.trUpdate 
ON dbo.Tablename 
FOR UPDATE 
AS
BEGIN
  SET NOCOUNT ON;

  UPDATE Tablename 
    SET Datecolumn = GETDATE() 
    WHERE ID IN (SELECT id FROM inserted);
END
GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:51:17.553

你应该改变

```
 UPDATE Tablename 
       SET Datecolumn = GETDATE() 
  WHERE ID = (SELECT i.id FROM INSERTED i) 
```

至

```
IF NOT UPDATE(Datecolumn)
UPDATE Tablename 
       SET Datecolumn = GETDATE() 
  WHERE ID IN (SELECT i.id FROM INSERTED i) 
```

因为插入的表可能包含多个实体。否则它应该可以正常工作。

# android - 我怎样才能持久保存我的结果？

> ID：10619960
> 
> 赞同：0
> 
> 时间：2012-05-16T13:48:19.243
> 
> 标签：android, persistence

即使我重新启动应用程序或关闭应用程序并重新启动它（持久存储），我如何保存`contadorliga`或转动的值？`.setVisibility(View.VISIBLE);`我想保存`int contadorliga`，`correcto1.setVisibility(View.VISIBLE);`所以`correcto2.setVisibility(View.VISIBLE);`每次我重新启动应用程序时，它都是最近一次。就像一个保存游戏。这是我的代码：

```
package com.fakur.android.futbolquiz;

import android.app.Activity;
import android.content.ComponentName;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.ImageView;
import android.widget.TextView;

public class Liga extends Activity {
/** Called when the activity is first created. */

static final int LIGA = 0;
int contadorbarcelona = 0;
int contadormadrid = 0;
int contadorliga = 0;

ImageView about;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

setContentView(R.layout.liga);
TextView contador1 = (TextView) findViewById(R.id.contador1);
contador1.setText(contadorliga + "/20");
}

public void onBarcelonaClick(View botton) {

Intent intent = new Intent();
intent.setClass(this,Pregunta.class);
intent.putExtra("Barcelona", "Barcelona");
startActivityForResult(intent,LIGA);
}

public void onMadridClick(View botton) {

Intent intent = new Intent();
intent.setComponent(new ComponentName(this,Pregunta.class));
intent.putExtra("Madrid", "Madrid");
startActivityForResult(intent,LIGA);
}
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
super.onActivityResult(requestCode, resultCode, data);

TextView contador1 = (TextView) findViewById(R.id.contador1);
ImageView correcto1 = (ImageView) findViewById(R.id.correcto1);
ImageView correcto2 = (ImageView) findViewById(R.id.correcto2);

if (requestCode == LIGA){

if (resultCode == 1) {

    if(contadorbarcelona == 0){

      correcto1.setVisibility(View.VISIBLE);
      contadorliga++ ;
      contadorbarcelona++;
    }
}

if (resultCode == 2) {
    if(contadormadrid == 0){

       correcto2.setVisibility(View.VISIBLE);
       contadorliga++ ;
       contadormadrid++;
    }
}

}

contador1.setText(contadorliga + "/20");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:59:42.590

正如 rciovati 所建议的，SharedPreferences 最好使用该数据库，因为如果您想一次又一次地从数据库中检索此数据，它将导致性能问题。

还有其他选项可用于在 android 应用程序中存储持久数据。检查[这个](http://developer.android.com/guide/topics/data/data-storage.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:22:32.777

您可以使用数据库来保存您想要永久存储的数据

# asp.net-mvc - 自定义 ResourceProviderFactory 依赖注入

> ID：10619962
> 
> 赞同：7
> 
> 时间：2012-05-16T13:48:20.283
> 
> 标签：asp.net-mvc, dependency-injection, resourceproviderfactory

在 ASP.NET MVC 中是否有任何地方可以获取对实例化的 ResourceProviderFactory 的引用，以便执行属性注入以添加自定义 DB 实现以从中检索资源？

我正在加载一个自定义资源提供程序，但我想知道是否有替代方法可以使用静态 DI 容器在提供程序中注入依赖项。

类似于在 MVC 中为 Role 和 Membership 提供程序注入的方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T09:34:04.300

诀窍是在 MVC 中实现一个基础结构组件调用`DependencyResolver.Current`，因此您可以`ResourceProviderFactory`使用您最喜欢的 DI 容器注册真实的。

这是一个可以解决问题的类：

```
public class MvcResourceProviderFactory : ResourceProviderFactory
{
    public override IResourceProvider CreateGlobalResourceProvider(
        string classKey)
    {
        return GetFactory().CreateGlobalResourceProvider(classKey);
    }

    public override IResourceProvider CreateLocalResourceProvider(
        string virtualPath)
    {
        return GetFactory().CreateLocalResourceProvider(virtualPath);
    }

    private static ResourceProviderFactory GetFactory()
    {
        var resolver = DependencyResolver.Current;

        var factory = resolver.GetService<ResourceProviderFactory>();

        if (factory != null)
        {
            return factory;
        }

        throw new InvalidOperationException(string.Format(
            "No {0} has been registered in the {1}.",
            typeof(ResourceProviderFactory).FullName,
            DependencyResolver.Current.GetType().FullName));
    }
} 
```

这个类可以配置如下：

```
<globalization
    resourceProviderFactoryType="MyApp.MvcResourceProviderFactory, MyApp"
    enableClientBasedCulture="true" uiCulture="auto" culture="auto"
/> 
```

# jquery - jQuery FAQ 演示文稿 - 展开和折叠

> ID：10619964
> 
> 赞同：0
> 
> 时间：2012-05-16T13:48:32.113
> 
> 标签：jquery, expand, collapse

**嗨，大家好！**

希望有人可以帮助我解决一个小问题。

我有一个用 jQuery 实现的展开/折叠常见问题列表。到目前为止一切正常，除了客户想要两个按钮：“全部展开”和“全部折叠”。我尝试了不同的方式，但没有任何效果。

有人会帮忙添加一些脚本来创建这些按钮吗？

*HTML：*

```
<div class="faq">
<div class="faq_item" > 
<div class="faq_header">Question</div>
<div class="faq_content" ><p>Answer</p></div>
<div class="closed"><p>Answer</p></div>
</div>
<div class="faq_item">
<div  class="faq_header">Question</div >
<div class="faq_content" ><p>Answer</p></div>
<div class="closed"><p>Answer</p></div>
</div>
<div class="faq_item">
<div  class="faq_header">Question</div >
<div class="faq_content" ><p>Answer</p></div>
<div class="closed"><p>Answer</p></div>
</div>     
</div> 
```

*JavaScript：*

```
jQuery(document).ready(function() {
    $('.faq_content').hide();
    $('.faq_header').click(function() {
        t = $(this);
        if (!t.hasClass('active')) {
            t.parent().children('.faq_content').slideToggle();
            t.addClass('active');
        }
        else {
            t.parent().children('.faq_content').slideToggle();
            t.removeClass('active');
        }
        return false;
    });
}); 
```

**这是 jsFiddle：http: [//jsfiddle.net/G7tTN/](http://jsfiddle.net/G7tTN/)**

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:52:14.140

试试这个代码：

```
$("#expand").click(function() {
    $(".faq_header").addClass("active").siblings(".faq_content").slideDown();
});
$("#collapse").click(function() {
    $(".faq_header").removeClass("active").siblings(".faq_content").slideUp();
}); 
```

**演示：http:** [//jsfiddle.net/G7tTN/1/](http://jsfiddle.net/G7tTN/1/)

# jquery - 使用 jquery 删除一些 html 代码

> ID：10619972
> 
> 赞同：0
> 
> 时间：2012-05-16T13:48:47.177
> 
> 标签：jquery, jquery-selectors

如果用户需要添加更多信息，我正在使用 append 方法添加一些输入字段和一个按钮来形成。每个按钮具有不同的名称和 ID，但具有相同的类。

附加过程工作正常，但是当我想使用新按钮删除特定字段时，它不起作用。单击操作适用于默认情况下存在的第一个按钮，但现在适用于在运行时添加的按钮。

```
 rc; //is the counter which increments by one, each time.
   jQuery('#mytable').append("<div id='rev-" + rc + "' class='reviewer'>" +
                             "<input type='text' name='reviewer_email[]' id='reviewer_email" + rc + "' value=''  />" +
   "<input type='button' name='rd" + rc + "' id='rd" + rc + "' class='rrd' value='Remove' /></div>");

   jQuery(".rrd").click(function(){
    alert("Test");
   }); 
```

我已经搜索了解决方案，首先我对所有按钮使用相同的 id，但现在我对每个按钮使用相同的类而不是 id。

任何人都可以给出一个想法，我要去哪里错了。

上面的代码不是确切的代码，而是想法，我如何使用它。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:55:46.403

您只能`.click()`对已添加到 DOM 的元素使用事件处理程序。

对于动态添加的元素，您应该使用[`.on()`](http://api.jquery.com/on/)：

```
$(document).on("click", ".rrd", function(event){
    // do stuff
}); 
```

或者当使用 jQuery < 1.7 时，你应该使用[`.delegate()`](http://api.jquery.com/delegate/)：

```
$(document).delegate(".rrd", "click", function(event){
    // do stuff
}); 
```

请注意，`.live()`已弃用且[速度较慢](http://jsperf.com/jquery-live-vs-delegate-vs-on)。

来自 jQuery 文档：

> 从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。旧版本 jQuery 的用户应该使用 .delegate() 而不是 .live()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:59:59.057

这不是您的问题的直接解决方案，但总体上对您来说可能是更好的解决方案。您是否考虑过使用现有插件而不是自己开发所有内容？

看看[SheepIt](http://www.mdelrosso.com/sheepit/index.php?lng=en_GB)可能还有其他的，但我只用过这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T13:57:25.543

您使用类 .rrd 在所有元素上绑定了事件，但这不包括动态创建的元素（在页面加载后）。

而是先定位 head 元素，然后再定位要删除的实际元素。

查看此视频，详细说明-> [http://tutsplus.com/lesson/bind-live-delegate-huh/](http://tutsplus.com/lesson/bind-live-delegate-huh/)

# python - Search API 中的 FieldExpression 可以使用自定义函数吗？

> ID：10619975
> 
> 赞同：0
> 
> 时间：2012-05-16T13:48:56.853
> 
> 标签：python, google-app-engine, gae-search

Google App Engine 之前发布了一个 Search API，它允许您创建`Document`对象，这些对象可以在类似于 Google 搜索操作的索引系统中进行搜索。

相关的类之一是`FieldExpression`. 根据[文档](https://developers.google.com/appengine/docs/python/search/fieldexpressionclass)，表达式允许您为字段定义自定义内容片段。他们为 FieldExpression 定义给出的示例是：

```
FieldExpression(name='content_snippet',
                expression='snippet("very important", content)') 
```

...其中`name`参数标识表达式，`expression`参数是某种形式的代码，当在`FieldExpression`文档上访问特定的值时执行。

我的问题是，我可以从表达式代码中调用我的 Document 对象（或可能在其他地方）的外部方法吗？如果没有，定义`FieldExpression`对象时使用的语法选项是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:48:28.947

您不能调用自己的外部方法。
目前，定义的函数是'snippet'、'max'、'min'和'count'。（例如，`max(3,price)`）。但是，其中一些目前存在一些已知问题；例如，'count' 可能不起作用。

未来，此类支持功能的数量将会增加。除了字符串操作，例如连接和修整，还将支持更多的数学函数。

# javascript - 如何在 html/javascript 中制作动态可伸缩表格

> ID：10619977
> 
> 赞同：0
> 
> 时间：2012-05-16T13:48:59.787
> 
> 标签：javascript, jquery, html, css

我有一个基本的 html 表，其中包含的单元格如果不能全部放入分配的空间，则会滚动。我想让用户能够通过抓取和拉伸表格底部来垂直拉伸表格。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T13:51:16.507

看看[jQuery-UI 可调整大小的](http://jqueryui.com/demos/resizable/)交互。这使得任何 DOM 元素都可以调整大小并且非常易于使用。

要仅使其水平调整大小，请修改`handles`选项以仅启用`north`和`south`边缘：

```
foo.resizable({
    handles: 'n, s'
});​ 
```

或垂直：

```
foo.resizable({
    handles: 'e, w'
});​ 
```

# android - 在 Graphview 库中使用日期

> ID：10619978
> 
> 赞同：10
> 
> 时间：2012-05-16T13:49:14.030
> 
> 标签：android, datetime, charts, android-graphview

我正在使用 GraphView 库（参见：[https](https://github.com/jjoe64/GraphView) ://github.com/jjoe64/GraphView或[http://www.jjoe64.com/p/graphview-library.html](http://www.jjoe64.com/p/graphview-library.html)）

但我想为 X-as 使用日期/时间。有谁知道实现这一目标的简单方法，或者任何人都可以将我推向正确的方向吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-17T08:41:39.647

**这是执行此操作的正确方法**

您只需使用 unix 时间戳（从 1.01.1970 开始的秒数）作为 x 值。

然后您可以设置自定义标签格式化程序并将 unix 时间戳转换为字符串：

```
final java.text.DateFormat dateTimeFormatter = DateFormat.getTimeFormat(mActivity);

LineGraphView graphView = new LineGraphView(mActivity, entry.getValue()) {
    @Override
    protected String formatLabel(double value, boolean isValueX) {
        if (isValueX) {
            // transform number to time
            return dateTimeFormatter.format(new Date((long) value*1000));
        } else {
            return super.formatLabel(value, isValueX);
        }
    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T21:06:52.823

GraphView 是一个很棒的库，我发现它也是最简单的。这样做的第一步是在 GraphView.java 的 GraphViewData 类中添加一个字符串变量。像这样：

```
static public class GraphViewData {
    public final double valueX;
    public final double valueY;
    public final String valueDate;

    public GraphViewData(double valueX, double valueY,String valueDate) {
        super();
        this.valueX = valueX;
        this.valueY = valueY;
        this.valueDate = valueDate;
    }
} 
```

当您在创建 GraphView 图表时创建 GraphViewData 对象时，您需要以字符串形式添加日期数据（连同 X 和 Y）。

假设您的图表中有 80 个数据点（索引 0 - 79）。GraphView 中有一个方法负责生成和返回水平标签，我相信它叫做**generateHorLabels**。不只是返回 X 值 (0-79)，而是使用 X 值从 GraphData 对象中获取字符串。

在您现在拥有的代码中，它应该在**for**循环中包含以下内容

```
labels[i] = formatLabel(min + ((max-min)*i/numLabels), true); 
```

而不是上面的，你可以做这样的事情。

```
Double temp =  Double.valueOf(formatLabel(min + ((max-min)*i/numLabels), true));
int rounded =(int)Math.round(temp); 
labels[i] = values[rounded].valueDate; 
```

希望这有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-23T05:31:10.887

这是来自 jjoe64 的更新答案，其中 x 值是从 Date#getTime() 获得的

```
 final DateFormat dateTimeFormatter = DateFormat.getDateTimeInstance();        
    graphView = new LineGraphView(context, "Chart");
    graphView.setCustomLabelFormatter(new CustomLabelFormatter() 
    {
        @Override
        public String formatLabel(double value, boolean isValueX) 
        {
            if (isValueX)
            {
                return dateTimeFormatter.format(new Date((long) value));
            }
            return null; // let graphview generate Y-axis label for us
        }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-28T13:43:35.610

我在设置值的同时创建了水平标签：

```
public void initializeLineGraphView() {

    // Get last weeks entries from the DB
    ArrayList<Entry> entries = DbManager.getInstance().getLastWeeksEntries(new Date());
    String[] hLabels = new String[entries.size()];
    GraphView.GraphViewData[] graphViewData = new GraphView.GraphViewData[entries.size()];

    for(int i = 0; i < entries.size(); i++) {

        Entry entry = entries.get(i);
        int pain = entry.getPain();
        graphViewData[i] = new GraphView.GraphViewData(i, pain);

        // Generate the horizontal labels
        SimpleDateFormat sdf = new SimpleDateFormat("EEE");
        String dayOfWeek = sdf.format(entry.getDate());
        hLabels[i] = dayOfWeek;

    }

    mSeries = new GraphViewSeries("", null, graphViewData);
    GraphView graphView = new LineGraphView(getActivity(), "");
    graphView.addSeries(mSeries);
    graphView.setHorizontalLabels(hLabels);
    graphView.setVerticalLabels(new String[] {"10", "5", "0"});
    mLineGraphView = graphView;

} 
```

# sql - 为什么 # 在 Rails SQL 语句中无法识别？

> ID：10619982
> 
> 赞同：0
> 
> 时间：2012-05-16T13:49:35.030
> 
> 标签：sql, ruby-on-rails-3

我有两个模型，消息和用户。Message 有两个 User 对象，user_1 和 user_2。

```
class Message < ActiveRecord::Base
  attr_accessible :user_1, :user_2

  belongs_to :user_1, :class_name => "User"
  belongs_to :user_2, :class_name => "User"
end

class User < ActiveRecord::Base
  attr_accessible :email, :password

  has_many :message, dependent: :destroy, :finder_sql => 'SELECT * FROM messages where (user_1_id = #{id} or user_2_id = #{id})'
end 
```

当我尝试删除 User 对象时，出现以下错误：

> 用户控制器中的 ActiveRecord::StatementInvalid#destroy
> 
> SQLite3::SQLException：无法识别的令牌：“#”：SELECT * FROM messages where (user_1_id = #{id} or user_2_id = #{id})

错误消息看起来很简单，但我认为 # 是正确的语法。我正在使用 Rails 3.2.3。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:55:51.450

在 ruby​​ 中，单引号内的所有内容除了`\\`and`\'`都按字面意思对待。

您必须在 SQL 语句中使用双引号。

# maven - Nexus 找不到 Maven Central 中的工件

> ID：10619985
> 
> 赞同：5
> 
> 时间：2012-05-16T13:49:40.800
> 
> 标签：maven, sonarqube, nexus

我有一个包含 Maven 中心的组类型存储库的 Nexus 服务器。[我可以在 Maven Center [1]](http://repo1.maven.org/maven2/org/codehaus/mojo/cobertura-maven-plugin/2.5.1/)中看到 org.codehaus.mojo:cobertura-maven-plugin:2.5.1 工件（pom 和 jar），但是当我尝试使用 Maven 下载这个工件时，它说：

```
Downloading: https://example.com/nexus/content/groups/all/org/codehaus/mojo/cobertura-maven-plugin/2.5.1/cobertura-maven-plugin-2.5.1.pom
[WARNING] The POM for org.codehaus.mojo:cobertura-maven-plugin:jar:2.5.1 is missing, no dependency information available
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 14.523s
[INFO] Finished at: Wed May 16 16:31:24 EEST 2012
[INFO] Final Memory: 18M/219M
[INFO] ------------------------------------------------------------------------
[INFO] [16:31:24.647] Execute org.codehaus.mojo:cobertura-maven-plugin:2.5.1:cobertura done: 3978 ms
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO]
[INFO] example project 1 ................................. FAILURE [10.077s]
[INFO] example project 2 ................................. SKIPPED
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 14.804s
[INFO] Finished at: Wed May 16 16:31:24 EEST 2012
[INFO] Final Memory: 17M/218M
[INFO] ------------------------------------------------------------------------
[ERROR] Plugin org.codehaus.mojo:cobertura-maven-plugin:2.5.1 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.codehaus.mojo:cobertura-maven-plugin:jar:2.5.1: Could not find artifact org.codehaus.mojo:cobertura-maven-plugin:pom:2.5.1 in example.com (https://example.com/nexus/content/groups/all) -> [Help 1]
[ERROR] Failed to execute goal org.codehaus.mojo:sonar-maven-plugin:2.0:sonar (default-cli) on project example project 1: Can not execute Sonar: Unable to execute maven plugin: Exception during execution of org.codehaus.mojo:cobertura-maven-plugin:2.5.1:cobertura -> [Help 2] 
```

任何想法为什么它不能下载工件？

**UPD：**是的，我在 settings.xml 中设置了镜像，是的，存储库是“服务中”，并且只使用了反向代理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T16:42:28.787

您必须让您的 settings.xml 指向您定义的“全部”组。此外，您必须覆盖存储库和 pluginRepository 的“中央”（请参阅[​​ http://www.sonatype.com/books/nexus-book/reference/maven-sect-single-group.html](http://www.sonatype.com/books/nexus-book/reference/maven-sect-single-group.html)）并确保中央是你的所有组。

一旦一切顺利，再次尝试使用 -U 强制更新您的项目，例如

```
mvn -U clean install 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T02:57:46.750

插件通常存储在与“正常”工件不同的存储库中（尽管据我了解，没有真正的理由需要这样做，只是经常这样做）。

仔细检查您的配置并确保您指向的组具有中央可用的*插件*。如果您显示您的 Nexus 配置，也许能够查明问题。

# javascript - js/jq 表单验证问题/帮助（jquery）

> ID：10619986
> 
> 赞同：0
> 
> 时间：2012-05-16T13:49:43.293
> 
> 标签：javascript, jquery

长话短说，除了是一个菜鸟，我不知道为什么这不起作用。总的来说，我有不同的功能来检查不同的东西。

为了这个例子，我有一个表单（一个要测试的字段），默认值为say..“在此处输入名称”。所以下面的html

```
<input type="text" value="enter name here" id="fieldOne"/> 
```

下面是js。

```
// sample vars

var fieldOne = $('#fieldOne'); 
```

**//下面的这个函数将在模糊时触发。**

```
function checkVal(){
    if($(this).val()== $(this).attr('defaultValue')){
        $(this).css("background-color","red");
        $(this).css("color","white");   
    } else if($(this).val()==""){
        $(this).css("background-color","red");
        $(this).css("color","white");   
        $(this).val("oopsiiee, you forgot this one");

    } else {
        $(this).css("background-color","green");
        $(this).css("color","white");   
    }

} 
```

然后在表单字段上，在模糊上我这样做

`fieldOne.blur(checkVal);`ETC...

以上工作，

现在因为它有一个默认值，所以我想要它，以便当用户单击所述字段时，该默认值消失。

所以我做这样的事情：

```
function clearField(){
  $(this).val("");
} 
```

这行得通

`fieldOne.click(clearField);`ETC...

现在的问题是，即使数据已从 def 更改为任何内容，输入的 mssg 也会再次消失 SOOooo，我想编辑这个简单的功能，以便如果 mssg 是默认值，请清除它。如果 mssg 不是默认值，则意味着它已更改，因此请保留它。所以我写这个打破了整个事情。

```
function clearField(){
    if($(this).val() == $(this).attr('defaultValue')){
        $(this).val() == "";
    }
} 
```

不知道发生了什么。

我也试过

```
function clearField(){
    if($(this).val() == $(this).attr('defaultValue')){
        $(this).attr('defaultValue') == "";
    }
} 
```

我虚心接受/欣赏任何提示、想法、更正等

先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:13:42.150

这是你想要完成的事情吗？

```
$inputs = $('input[type=text], input[type=password]');

$inputs.focus(function() {
    if(this.value==this.defaultValue)
    {
        this.value='';
    }
}).blur(function() {
    if($.trim(this.value)=='')
    {
        this.value=this.defaultValue;
    }    
}); 
```

这个例子的小提琴：http: [//jsfiddle.net/yajxr/2/](http://jsfiddle.net/yajxr/2/)

# html - hta - Firefox、Chrome 中的等价物 - 这是旧技术吗？

> ID：10619990
> 
> 赞同：19
> 
> 时间：2012-05-16T13:49:53.450
> 
> 标签：html, internet-explorer, firefox, google-chrome, hta

我想将网页 html5/js 页面转换为桌面应用程序。他们可以在没有实时互联网连接的情况下在桌面上使用的东西。（我不想重新编码我的 html5 或 js。）

如果最终用户安装了 Internet Explorer，我可以轻松地将其移植到 hta 文件中。但是，如果他们使用 Vista 或更高版本并卸载了 Internet Explorer（您可以这样做），该怎么办？如果他们的主要浏览器是 Firefox 或 Chrome 怎么办？

我在四处寻找 Firefox，它似乎 Prism 是 hta 文件的替代品，但如果你去 Mozilla 的 Prism 页面，它会说它是一种不再被追求的技术。

所以我有几个问题：

1.  hta 文件是否仍然是 Internet Explorer 的现代技术，仍然可以在 IE9、IE10 中使用？
2.  如果 IE 未安装在 Windows（或其他操作系统）上，hta 文件是否会自动启动 Firefox/Chrome？
3.  我可以将一些 html5 的本地存储内容添加到我的 hta 文件中，并且它仍然可以在 IE、FF 和 Chrome 上运行吗？
4.  如果这些东西在 FF 或 Chrome 上不起作用，他们是否有任何现代且不被弃用的技​​术替代品？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-16T17:52:23.647

实际上 HTA 不是由 Internet Explorer 运行的。它们由安装在 Windows/System32 (Windows7) 中的 mshta.exe 运行。但是，HTA 使用 IE 的渲染引擎，没有 IE 就无法运行。它们也仅适用于 Windows 用户。

可以通过使用添加 HTML5 支持`<meta http-equiv="x-ua-compatible" content="ie=9">`。根据我自己的经验，也是`<!DOCTYPE html>`需要的。

MSDN 中的更多信息：[HTA 简介](http://msdn.microsoft.com/en-us/library/ms536496%28v=vs.85%29.aspx)

在 SO：[HTA；使用其他浏览器托管？](https://stackoverflow.com/questions/992695/htas-use-other-browser-to-host)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-01-26T15:27:33.407

我想说.hta 应用程序已经过时了，因为它们不支持现代设计标准。你仍然可以使用它们或使用另一个 HTML 编译器，比如 David Esperalta 的那个，它对于非常简单的应用程序来说已经足够了，但是它们都依赖于 IE，我们都知道它是多么的有限和缓慢。

## 现代替代品：

*   [NW.js](https://nwjs.io/)（以前称为 node-webkit）
*   我个人使用和推荐的[电子。](http://electron.atom.io/)

提到的两个选项都基于**Chromium**（与 Chrome 相同）、**Node.js**和 V8。它们支持**HTML5、CSS3**和最新的 JavaScript 引擎，包括最新的**[ECMAScript](https://nodejs.org/en/docs/es6/)**功能等等！

由于他们使用**node.js**，你可以在你的 DOM中使用它的任何[内置库（如 FileSystem）](https://nodejs.org/api/fs.html)或[任何 npm 包！](https://www.npmjs.com/)

> npm 注册表托管了超过 25 万个可重用代码包——世界上最大的代码注册表。

这两个选项都是免费且开源的，~~但电子支持 ffmpeg 编解码器，无需下载或构建它们。~~

*   这两个选项现在都支持 ffmpeg。

您的应用程序将 100% 独立，您可以为 Windows、macOS 和 Linux 构建相同的应用程序。

electron 还可以提供简单的解决方案来自动编译和使用**CoffeeScript、Babel、LESS、SASS**等。

# 缺点：

• 由于没有运行时解决方案，您总是必须随应用程序一起发布整个内容，而且您最终会得到一个相对较大的包。

• 对于某些应用而言，启动时间不太理想

• 尽管有一些方法可以让它变得更难，但是任何知道自己在做什么的人都可以使用您的代码。

* * *

# 2021 更新

electron 和 nwjs 与以往一样可行，但如果您正在寻找更轻量级的 UI，我还推荐[Sciter.JS](https://github.com/c-smile/sciter-js-sdk)，它在最近的更新中取得了巨大的飞跃，并且它没有为您的应用程序提供整个浏览器，开发人员似乎致力于遵循最新的 HTML/CSS/JS 标准并添加一些不错的内容。它带有很好的样本集合，可以帮助您入门。和主要操作系统版本的预构建二进制文件。需要注意的一件事是，如果这对您很重要，它会使用 QuickJS 而不是 Node.js。

我一直在密切关注它的发展，我建议尝试一下。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T04:00:18.500

> 1.hta 文件是否仍然是 Internet Explorer 的现代技术，仍然可以在 IE9、IE10 中使用？

很可能是的。底层技术基于将 IE 浏览器控件嵌入为 activex 对象。即使 mshta 不再随 windows 一起分发，仍然可以使用 c# 和浏览器控件创建副本。

> 2.如果没有在Windows（或其他操作系统）上安装IE，没有安全问题或本地访问问题的hta文件会自动启动Firefox/Chrome吗？

不，虽然 .hta 扩展名可以与这些浏览器相关联，但两者都不支持 mshta 指令 - 结果是浏览器会提示您将文档另存为外部文件，就像 exe 或 zip 文件一样。

> 3.我可以将一些html5的本地存储内容添加到我的hta文件中，它仍然可以在IE、FF和Chrome上运行吗？

是的，您可以添加对 html5 的支持，但同样只能在 IE 上使用。

> 4.如果这些东西不能在 FF 或 Chrome 上运行，他们是否有任何现代且不被弃用的技​​术替代品？

Adobe 生产了一款名为 Adob​​e AIR 的竞争产品 - [http://www.adobe.com/products/air.html](http://www.adobe.com/products/air.html)。该产品提供了 hta 中可用功能的有限交集。本地文件访问受限于特定路径，通常对父操作系统的访问受到很大限制。然而，它们确实在所有主要平台上运行，包括移动设备，因此它们可能是您正在寻找的技术。AIR 使用 webkit 作为嵌入式浏览器引擎。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-24T07:07:39.167

我不会尝试使用 .HTA 文件，我会使用 Node-Webkit。Node-Webkit 将让您做与 .HTA 文件相同的事情，但 Node-Webkit 似乎更快并且得到更好的支持。[https://github.com/rogerwang/node-webkit](https://github.com/rogerwang/node-webkit)；[https://github.com/rogerwang/node-webkit/wiki/Manifest-format](https://github.com/rogerwang/node-webkit/wiki/Manifest-format)。此外，使用 Node-Webkit，您可以使用 node.js 并轻松地使您的程序也跨平台。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-12T19:37:14.747

是的，.hta 是一个已弃用的功能，仅适用于 Windows 机器。但是，据我所知，它也是提供操作系统功能集成的唯一选项，**不需要网络服务器**，可以完全控制应用程序窗口的外观/感觉/放置，以及我上次检查的时间（诚然，这是 2 年前的事了）仍然在 Windows 10 中工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-19T09:20:38.073

这个旧但仍然相关的问题的更新。

mhtml / mht，“MIME HTML”可能是一个简单的解决方案。来自：[https ://whatis.techtarget.com/fileformat/MHTML-MHTML-document-MIME](https://whatis.techtarget.com/fileformat/MHTML-MHTML-document-MIME)

> MHTML（MIME HTML 的缩写）是 Internet Explorer 保存的网页存档文件格式的文件扩展名。存档的网页是一个 MHTML 文档。MHTML 保存网页内容并将外部资源（如图像、小程序、Flash 动画等）合并到 HTML 文档中。

在撰写本文时，我已经测试了对以下浏览器的原生支持：

*   是 Chrome 81.0.4044.138
*   是的歌剧 68.0.3618.104
*   没有火狐 76.0.1
*   没有 Safari 版本 13.1 (15609.1.20.111.8)

Chrome 在去年添加、删除和重新添加了对 mhtml 的支持，因此那里的投资是不稳定的。Safari 原生支持 MAFF，但不支持 mhtml Firefox 可以通过插件支持 mhtml。其他浏览器未测试，但 MSIE 已支持它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-14T02:11:43.167

请查看电子它基于 v8

[http://electron.atom.io](http://electron.atom.io)

# orchardcms - Javascript 的顺序包含在 Orchard 中

> ID：10619996
> 
> 赞同：6
> 
> 时间：2012-05-16T13:50:11.470
> 
> 标签：orchardcms

我正在尝试在 Orchard 中创建一个主题，并在我的布局中添加了一些脚本：

```
Script.Include("//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js").AtHead();
using (Script.Head()) {
    @:<script>window.jQuery || document.write('<script src="scripts/jquery-1.7.1.min.js"><\/script>')</script>
}

Script.Include("plugins.js").AtHead();
Script.Include("script.js").AtHead(); 
```

我想从 Google CDN 加载 jQuery，但如果无法加载 CDN 版本，则有本地回退。为了实现这一点，我在 jQuery 脚本之后添加了脚本块。但是，在查看生成的页面源时，它看起来像：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"  
type="text/javascript"></script>
<script src="/OrchardLocal/Themes/Test/scripts/plugins.js" type="text/javascript">
</script>
<script src="/OrchardLocal/Themes/Test/scripts/script.js" type="text/javascript">  
</script>
<!--[if lt IE 9]>
<script src="/OrchardLocal/Core/Shapes/scripts/html5.js" type="text/javascript">    
</script>
<![endif]-->
<script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.1.min.js"><\/script>')
</script> 
```

问题是我的后备现在在所有其他脚本之后，而我希望它在 jQuery CDN 脚本包含之后。

有什么方法可以控制 Orchard 渲染内联脚本块的位置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T02:49:43.870

`Script.Include()`当您与`Script.Head()`或混合时，目前似乎无法控制脚本的顺序`Script.Foot()`。

但是，有一种方法可以将 CDN 与 Orchard 一起使用。但是，不幸的是，它不能正常工作。您应该能够指定`Script.Require("jquery").AtHead().UseCdn()`处理您在此处尝试执行的操作。这些方法已经存在，但它们不起作用有两个原因：

1.  jQuery 模块目前没有指定 CDN URL
2.  依赖`UseCdn()`方法生成脚本标签的方法不能正常工作

已经有关于此问题的[报告问题。](http://orchard.codeplex.com/workitem/19101)`Orchard Codeplex`Orchard 团队将其状态更改为`Active`希望，该错误将很快得到解决。我已经对这个问题进行了投票，所以你可以向 Orchard 团队发出信号，让他们比其他一些错误更快地解决这个错误。

与此同时，你可以做和我一样的事情——将`Document.cshtml`模板添加到你的主题中（你可以从 复制它`/Core/Shapes/Views/Document.cshtml`），找到这一行：（`@Display(Model.Head)`这是你所有头脚本和样式所在的地方），最后，上面该行您可以添加以下代码：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>!window.jQuery && document.write('<script src="@Url.Content("~/Themes/[NAME-OF-YOUR-THEME]/Scripts/jquery-1.7.1.min.js")"><\/script>')</script> 
```

并更改`[NAME-OF-YOUR-THEME]`为您的主题的文件夹名称。

# javascript - 如果我在使用 chrome 上的 javascript 设置其他内容之前正确设置它，HTML5 -webkit-transition 将不起作用

> ID：10619998
> 
> 赞同：0
> 
> 时间：2012-05-16T13:50:17.650
> 
> 标签：javascript, html, css, classname, webkit-transition

我还是 HTML5 的新手，但我遇到了一个非常奇怪的行为。（在铬）

以下代码适用于 chrome：

```
<!DOCTYPE html>

<html>
<head>
    <title>Webkit-transition test</title>
    <script language="javascript" >
        function addSpan()
        {
            document.getElementById("someDiv").innerHTML = "<span id=\"t47\" >A new span!</span>";
            document.getElementById("t47").className += "letter";
        }
        function moveIt()
        {
            document.getElementById("t47").style["MozTransform"] = "translate(10px,40px)";
            document.getElementById("t47").style["WebkitTransform"] = "translate(10px,40px)";
        }
    </script>
    <style>
        .letter{
            -webkit-transition: all 1s ease-in-out;
            -moz-transition: all 1s ease-in-out;
            display: inline-block;
            color: red;
        }
    </style>
</head>

<body>
<div id="someDiv"></div>
<span class="letter"  id="aaa">This is an old span</span>
<button onclick='addSpan()'>Add Span</button>
<button onclick='moveIt()'>Move it!</button>
</body>
</html> 
```

但是，如果我移动这条线：

```
document.getElementById("t47").className += "letter"; 
```

到 moveIt 函数的开头，跨度只是跳跃而不过渡

javascript部分将是这样的：

```
<script language="javascript" >
    function addSpan()
    {
        document.getElementById("someDiv").innerHTML = "<span id=\"t47\" >A new span!</span>";

    }
    function moveIt()
    {
        document.getElementById("t47").className += "letter";
        document.getElementById("t47").style["MozTransform"] = "translate(10px,40px)";
        document.getElementById("t47").style["WebkitTransform"] = "translate(10px,40px)";
    }
</script> 
```

那么这里有什么区别呢？不过，这两种情况在 Firefox 上运行良好。我没试过IE。

我很感激我能得到的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:44:26.210

从[CSS 过渡规范](http://www.w3.org/TR/css3-transitions/)：

> ...在进行可能转换的更改后的一小段时间内更改任何转换属性可能会导致不同实现之间的行为发生变化，因为在某些实现中可能会认为这些更改是同时发生的，但在其他实现中则不会。

在您的替代版本中，您更改`className`并更新 ，`transform`而不允许浏览器计算更改`className`. （这通常发生在您将控制权返回给事件循环时。）因此，浏览器可能仍然从`transition`属性的旧值（这是 的默认值`all 0s ease 0s`）进行操作。如果发生这种情况，则属性更改立即发生，没有动画，因为延迟和持续时间为`0s`.