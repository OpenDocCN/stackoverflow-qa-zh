# StackOverflow 问答 12091000-12091999

# java - 两个停靠的组件，其中第二个填充剩余空间

> ID：12091001
> 
> 赞同：2
> 
> 时间：2012-08-23T11:56:00.127
> 
> 标签：java, swing, layout

我正在开发一款棋盘游戏，我希望棋盘是一个靠西的正方形，尺寸为 frameHeight x frameHeight，我希望靠东的侧面板可以填充剩余的部分。

本质上：
West - frameHeight x frameHeight
East - remainingWidth x frameHeight

```
 _________________
|          |      |
|          |      |
|  WEST    | EAST |
|          |      |
|          |      |
|__________|______| 
```

目前使用 MigLayout 我说 LARGE（西）的高度应该是 100%，但我不确定如何说宽度应该等于父高度的 100%，并且让 SMALL（东）填充剩余的宽度。

任何有一个不错的想法来解决这个问题的人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:12:03.303

1.  在`DockingPanel`可以覆盖部分`JFrame`（具有显示和隐藏功能）的情况下，然后使用

    *   `GlassPane`（注意都`JComponents`必须是`lightweight`，否则`GlassPane`往后走）

    *   `JLayer`（基于 Java6 `JXLayer`）

2.  最舒服的可能是使用`JSplitPane`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T14:15:54.480

您可以覆盖该`getPreferredSize()`方法以根据其父级的大小来计算面板的大小。请记住，此时您完全忽略了面板中任何内容的大小。如果您仍然关心这一点，我建议您扩展 a`JScrollPane`而不是 a `JPanel`。

```
import java.awt.*;
import javax.swing.*;

public class TempProject extends JPanel{

    enum Type{
        SQUARE,
        FILL
    };

    Type mytype;

    public TempProject(Type type){
        mytype = type;
        if(mytype == Type.SQUARE){
            setBackground(Color.orange);
        } else if(mytype == Type.FILL){
            setBackground(Color.blue);
        }
    }

    @Override
    public Dimension getPreferredSize(){
        Dimension result = getParent().getSize();
        if(mytype == Type.SQUARE){
            //Calculate square size
            result.width = result.height;

        } else if(mytype == Type.FILL){
            //Calculate fill size
            int tempWidth = result.width - result.height;
            if(tempWidth > 0){  // Ensure width stays greater than 0
                result.width = tempWidth;
            } else{
                result.width = 0;
            }
        }
        return result;
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                try {
                    JFrame f = new JFrame("Java Game");
                    f.setSize(700, 500);
                    f.setVisible(true);
                    f.setBackground(Color.GRAY);

                    Box contentPanel = Box.createHorizontalBox();
                    contentPanel.add(new TempProject(Type.SQUARE));
                    contentPanel.add(new TempProject(Type.FILL));
                    f.setContentPane(contentPanel);

                    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });

    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T14:16:37.840

MiGLayout 不允许您使用大小约束的引用，但您可以使用约束来做到这一点`pos`：

```
add(panel, "id large, pos 0 0 container.h container.h"); 
```

这将添加`panel`看似停靠到左边缘，覆盖整个高度并且宽度等于其高度。

然后，您可以使用以下内容填充剩余空间：

```
add(otherPanel, "pos large.x2 0 container.w container.h"); 
```

# google-apps-script - 你能在你的 tumblr 博客上嵌入谷歌应用吗？如果您没有自己的域？

> ID：12091006
> 
> 赞同：0
> 
> 时间：2012-08-23T11:56:17.273
> 
> 标签：google-apps-script, tumblr, google-apps

如果您没有自己的域，是否可以在您的 tumblr 博客中嵌入谷歌应用服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:17:19.017

不可以。您不能在外部站点中嵌入 Apps Script Web 应用程序。您只能在 Google 网站上执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T21:17:43.950

是的，我可能在我的 tumblr 博客上安装了谷歌评论和谷歌关注者。

# c# - HttpListener 构造函数在系统启动时耗时过长

> ID：12091007
> 
> 赞同：3
> 
> 时间：2012-08-23T11:56:24.337
> 
> 标签：c#, windows-services, httplistener

我有一个应该监听 HTTP 请求的 Windows 服务。我为此使用 HttpListener。该服务已成功完成其工作。但是，当服务设置为在系统启动时自动启动时，HTTP 初始化会出现延迟。HttpListener 构造函数需要 1 到 2 分钟才能返回。所以用户成功登录，例如他的信使已经在线。我读过 HttpListener 正在使用 HTTP.SYS：内核模式 http 侦听器，所以可能是正常的，因为系统正在初始化。

我的问题是：1）HttpListener 在初始化时有这样的延迟是否正常？2) 是否有任何解决方法可以避免这种延迟（不使用 HttpListener 除外）？

**编辑：** 问题在 Windows 7 上没有重现。我只能在 Windows XP 机器上重现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:22:01.887

我找到了解决方法。

我正在从服务的“OnStart 线程”调用 HttpListener 构造函数。如果我在另一个线程中移动构造函数调用并从服务的 OnStart 方法返回，则 HttpListener 像往常一样快速初始化。

我不知道为什么会这样。只能假设 HttpListener 需要的某些组件稍后在系统启动时被初始化。

顺便说一句，问题没有在 Windows 7 上重现。我只能在 Windows XP 机器上重现它。

# javascript - 无法让节点时间正常运行

> ID：12091009
> 
> 赞同：1
> 
> 时间：2012-08-23T11:56:25.333
> 
> 标签：javascript, node.js, installation, monitoring

我试图让这个[节点时间](http://nodetime.com/docs)运行，但似乎有一些我无法弄清楚的问题。我完全按照指南所说的那样做，所以我应该得到以下信息：

> 启动应用程序后，格式为 https://nodetime.com/[session_id] 的链接将打印到控制台，其中会话将是您访问分析器服务器的唯一 ID

它结束控制台没有显示任何会话ID链接，只有这个：

`23 Aug 13:32:23 - Nodetime: profiler resumed for 180 seconds`

也许你们中的任何人都遇到过同样的问题？寻找修复！提前致谢！

以下是我在 nodetime 安装后得到的结果，我遇到了一些 Python 错误，但似乎仍然是成功安装...

```
npm WARN package.json application-name@0.0.1 No README.md file found!
npm WARN package.json jade@0.26.3 No README.md file found!
npm http GET http://registry.npmjs.org/nodetime
npm http 200 http://registry.npmjs.org/nodetime
npm http GET http://registry.npmjs.org/nodetime/-/nodetime-0.4.5.tgz
npm http 200 http://registry.npmjs.org/nodetime/-/nodetime-0.4.5.tgz
npm http GET http://registry.npmjs.org/request/2.10.0
npm http GET http://registry.npmjs.org/v8tools
npm http GET http://registry.npmjs.org/timekit
npm http 200 http://registry.npmjs.org/request/2.10.0
npm http GET http://registry.npmjs.org/request/-/request-2.10.0.tgz
npm http 200 http://registry.npmjs.org/v8tools
npm http GET http://registry.npmjs.org/v8tools/-/v8tools-0.1.1.tgz
npm http 200 http://registry.npmjs.org/timekit
npm http GET http://registry.npmjs.org/timekit/-/timekit-0.1.9.tgz
npm http 200 http://registry.npmjs.org/v8tools/-/v8tools-0.1.1.tgz
npm http 200 http://registry.npmjs.org/request/-/request-2.10.0.tgz
npm http 200 http://registry.npmjs.org/timekit/-/timekit-0.1.9.tgz
npm http GET http://registry.npmjs.org/bindings
npm http 200 http://registry.npmjs.org/bindings

> timekit@0.1.9 install C:\Users\TJIA\Desktop\Sommarjobb\Extrauppgifter\demo\nod
e_modules\nodetime\node_modules\timekit
> node-gyp rebuild

> v8tools@0.1.1 install C:\Users\TJIA\Desktop\Sommarjobb\Extrauppgifter\demo\nod
e_modules\nodetime\node_modules\v8tools
> node-gyp rebuild

C:\Users\TJIA\Desktop\Sommarjobb\Extrauppgifter\demo\node_modules\nodetime\node_
modules\timekit>node "C:\Program Files (x86)\nodejs\node_modules\npm\bin\node-gy
p-bin\\..\..\node_modules\node-gyp\bin\node-gyp.js" rebuild

C:\Users\TJIA\Desktop\Sommarjobb\Extrauppgifter\demo\node_modules\nodetime\node_
modules\v8tools>node "C:\Program Files (x86)\nodejs\node_modules\npm\bin\node-gy
p-bin\\..\..\node_modules\node-gyp\bin\node-gyp.js" rebuild
gyp ERR! configure error
gyp ERR! stack Error: Can't find Python executable "python", you can set the PYT
HON env variable.
gyp ERR! stack     at failNoPython (C:\Program Files (x86)\nodejs\node_modules\n
pm\node_modules\node-gyp\lib\configure.js:110:14)
gyp ERR! stack     at C:\Program Files (x86)\nodejs\node_modules\npm\node_module
s\node-gyp\lib\configure.js:74:11
gyp ERR! stack     at Object.oncomplete (fs.js:297:15)
gyp gypERR!  System Windows_NT 6.1.7601
ERR! gyp configure errorERR!
 command "node" "C:\\Program Files (x86)\\nodejs\\node_modules\\npm\\node_module
s\\node-gyp\\bin\\node-gyp.js" "rebuild"
gyp ERR! cwd C:\Users\TJIA\Desktop\Sommarjobb\Extrauppgifter\demo\node_modules\n
odetime\node_modules\timekit
gypgyp  ERR! node -v v0.8.5
gyp ERR! node-gyp -v v0.6.3
gyp ERR! not ok
ERR! stack Error: Can't find Python executable "python", you can set the PYTHON
env variable.
gyp ERR! stack     at failNoPython (C:\Program Files (x86)\nodejs\node_modules\n
pm\node_modules\node-gyp\lib\configure.js:110:14)
gyp ERR! stack     at C:\Program Files (x86)\nodejs\node_modules\npm\node_module
s\node-gyp\lib\configure.js:74:11
gyp ERR! stack     at Object.oncomplete (fs.js:297:15)
gyp ERR! System Windows_NT 6.1.7601
gyp ERR! command "node" "C:\\Program Files (x86)\\nodejs\\node_modules\\npm\\nod
e_modules\\node-gyp\\bin\\node-gyp.js" "rebuild"
gyp ERR! cwd C:\Users\TJIA\Desktop\Sommarjobb\Extrauppgifter\demo\node_modules\n
odetime\node_modules\v8tools
gyp ERR! node -v v0.8.5
gyp ERR! node-gyp -v v0.6.3
gyp ERR! not ok
npm WARN optional dep failed, continuing timekit@0.1.9
npm WARN optional dep failed, continuing v8tools@0.1.1
nodetime@0.4.5 node_modules\nodetime
+-- request@2.10.0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:05:52.253

成功构建`nodetime`. 先安装`python`。然后重新安装`nodetime`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T12:31:05.080

npm 无法安装 nodetime 的可选依赖项：timekit 和 v8tools（C 绑定），原因在上一个答案中正确提及（缺少 python）。尽管即使没有这些模块，它也应该可以使用（尽管有一些功能将不起作用，例如 CPU 和堆分析）。

如果您的初始化看起来像这样`require('nodetime').profile()`，即没有任何参数的 profile() 调用，那么除了失败的可选依赖项之外还有其他问题。使用调试标志查看问题所在：`require('nodetime').profile({debug: true})`. 可能与网络有关，等等。

如果您使用的是 Nodetime Pro，并且在配置文件调用中包含了您的帐户密钥和应用程序名称，即`require('nodetime').profile({accountKey: '...', appName: '...'})`，那么您的应用程序应该会在登录 nodetime.com 后出现在您的应用程序页面上。在这种情况下，不会将会话链接打印到控制台。

# mysql - How to use a where clause within a MySQL subquery?

> ID：12091012
> 
> 赞同：0
> 
> 时间：2012-08-23T11:56:32.333
> 
> 标签：mysql, subquery, where-clause

I am using the following MySQL query to access the latest 20 messages in a chat log and reverse the order so that the latest message is printed on screen last:

```
SELECT * 
FROM 
    (
        SELECT
            messageID,
            posterID,
            messageTime,
            message
        FROM
            chat_messages
        /* Subquery is used to get the most recent 20 by messageTime */
        ORDER BY 
            messageTime DESC
        LIMIT 20
    ) subq
/* Reorder the result of the subquery to put them back into ascending order */
ORDER BY 
    messageTime ASC 
```

It works well. The problem is that I am now trying to add groups to the chat functionality. In doing this I have added a further column to the table chat_messages called 'group'. The main chat log is group 0 so I need to change the above query to access only messages from the main chat log. This is where I am stuck. It appears that MySQL will not allow me to add a where clause within the sub-query. I have tried the following and it did not work:

```
SELECT * 
FROM 
    (
        SELECT
            messageID,
            posterID,
            messageTime,
            message
        FROM
            chat_messages
        WHERE
            group = '0'
        /* Subquery is used to get the most recent 20 by messageTime */
        ORDER BY 
            messageTime DESC
        LIMIT 20
    ) subq
/* Reorder the result of the subquery to put them back into ascending order */
ORDER BY 
    messageTime ASC 
```

I get this error message (line 58 is the next line after the query):

> Warning: mysql_num_rows() expects parameter 1 to be resource, boolean given in xxxxxxx on line 58

Following what was written on [this thread](https://stackoverflow.com/questions/8590421/mysql-subquery-result-in-where-clause) I tried the following, which also did not work:

```
SELECT * 
FROM 
    (
        SELECT
                (
                    SELECT
                        messageID,
                        posterID,
                        messageTime,
                        message
                    FROM
                        chat_messages
                    WHERE
                        group = '0'
                )
        FROM
            chat_messages
        /* Subquery is used to get the most recent 20 by messageTime */
        ORDER BY 
            messageTime DESC
        LIMIT 20
    ) subq
/* Reorder the result of the subquery to put them back into ascending order */
ORDER BY 
    messageTime ASC 
```

How can I make the query only access messages from group 0? I just don't understand how it is not working?

Thank you,
Joe

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:00:50.280

`GROUP` is a [reserved word](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html) for MySQL, place backticks ``` around it.

```
SELECT * 
FROM 
(
     SELECT messageID,
          posterID,
          messageTime,
          message
     FROM chat_messages
     WHERE `group` = '0'
        /* Subquery is used to get the most recent 20 by messageTime */
     ORDER BY  messageTime DESC
     LIMIT 20
 ) subq
/* Reorder the result of the subquery to put them back into ascending order */
ORDER BY  messageTime ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:06:40.153

I don't see why you use a subquery. The first select is like the second one, except it reverses the order. When querying MySQL with and ORDER clause, it knows to order them properly. Given a table (chat) structure like this: messageID | posterID | messagetTime | message | group | [other fields], you can select them like this:

`SELECT messageID, posterId, messageTime, message FROM chat WHERE `group` = [number] ORDER BY messageTIME DESC LIMIT 20`

This will give you the latest 20 messages. And as @bluefeet said, GROUP is a reserved word and you should use backticks.

# java - 在java中将浮点值四舍五入到最接近的整数的最有效方法是什么？

> ID：12091014
> 
> 赞同：3
> 
> 时间：2012-08-23T11:56:36.290
> 
> 标签：java, optimization, rounding, floating-accuracy

我已经看到很多关于 SO 与舍入浮点值相关的讨论，但考虑到效率方面，没有可靠的问答。所以这里是：

将浮点值四舍五入到最接近的整数的最有效（但正确）方法是什么？

```
(int) (mFloat + 0.5); 
```

或者

```
Math.round(mFloat); 
```

或者

```
FloatMath.floor(mFloat + 0.5); 
```

或者是其他东西？

最好我想使用标准 java 库中可用的东西，而不是我必须导入的一些外部库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T12:02:56.737

根据我认为您所指的问答，各种方法的相对效率*取决于您使用的平台*。

但底线是：

*   最新的 JRE 对`Math.floor`/进行了性能修复`StrictMath.floor`，并且
*   除非你做了*很多*舍入，否则你做的方式可能没有任何区别。

参考：

*   [这是否意味着 Java Math.floor 非常慢？](https://stackoverflow.com/questions/12049314/does-this-mean-that-java-math-floor-is-extremely-slow/)
*   [http://bugs.sun.com/view_bug.do?bug_id=6908131（“java.lang.StrictMath.floor(double](http://bugs.sun.com/view_bug.do?bug_id=6908131) ) & java.lang.StrictMath.ceil(double) 的纯 Java 实现”）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T12:13:45.230

```
public class Main {
    public static void main(String[] args) throws InterruptedException {
        for (int i = 0; i < 10; i++) {
            measurementIteration();
        }
    }

    public static void measurementIteration() {
        long s, t1 = 0, t2 = 0;
        float mFloat = 3.3f;
        int f, n1 = 0, n2 = 0;
        for (int i = 0; i < 1E4; i++) {
            switch ((int) (Math.random() * 2)) {
            case 0:
                n1 += 1E4;
                s = System.currentTimeMillis();
                for (int k = 0; k < 1E4; k++)
                    f = (int) (mFloat + 0.5);
                t1 += System.currentTimeMillis() - s;
                break;
            case 1:
                n2 += 1E4;
                s = System.currentTimeMillis();
                for (int k = 0; k < 1E4; k++)
                    f = Math.round(mFloat);
                t2 += System.currentTimeMillis() - s;
                break;
            }
        }
        System.out.println(String.format("(int) (mFloat + 0.5): n1 = %d    -> %.3fms/1000", n1, t1 * 1000.0 / n1));
        System.out.println(String.format("Math.round(mFloat)  : n2 = %d    -> %.3fms/1000", n2, t2 * 1000.0 / n2));
    }
} 
```

Java SE6 上的输出：

```
(int) (mFloat + 0.5): n1 = 500410000    -> 0.003ms/1000
Math.round(mFloat)  : n2 = 499590000    -> 0.022ms/1000 
```

Java SE7 上的输出（感谢**alex**提供的结果）：

```
(int) (mFloat + 0.5): n1 = 50120000 -> 0,002ms/1000
Math.round(mFloat) : n2 = 49880000 -> 0,002ms/1000 
```

如您所见，`Math.round`从 SE6 到 SE7 的性能有了巨大的提升。我认为在 SE7 中不再有显着差异，您应该选择对您来说更具可读性的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T12:02:03.027

我应该这样做，`Math.round(mFloat)`因为它将舍入逻辑封装在一个方法中（即使它不是你的方法）。

根据其[文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Math.html#round%28float%29)，您编写的代码与`Math.round`执行的代码相同（除了检查边界情况）。

无论如何，更重要的是算法的时间复杂性，而不是类似常量的小东西的时间......除非你正在编写将被调用数百万次的东西！:D

**编辑：**我不知道 FloatMath。它来自JDK吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T12:09:09.460

您可以使用`System.currentTimeMillis()`. 你会发现差异太小了

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-04T19:03:07.453

简单地添加 0.5 将给出负数的错误结果。请参阅[Math.round 的更快实现？](https://stackoverflow.com/questions/1750739/faster-implementation-of-math-round)以获得更好的解决方案。

# c++ - 使用大括号（语法）初始化 C++ 对象

> ID：12091016
> 
> 赞同：3
> 
> 时间：2012-08-23T11:56:38.317
> 
> 标签：c++, syntax

我刚刚遇到了这行代码：

```
SDL_Color textColor = { 255, 0, 255 }; 
```

这让我想知道为什么它可以像数组一样声明。我想它可能和我一样，`textColor(255,0,255);`但是当我尝试制作自己的课程时它并没有那样工作。谁能解释何时使用这种语法？参数去哪儿了..？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-23T12:00:57.710

它是一种类型的[聚合初始化](http://en.cppreference.com/w/cpp/language/aggregate_initialization)，很可能是一个简单的结构或类。例如，

```
struct Foo 
{
  int i,j;
  double x,y;
};

int main()
{
  Foo f = {1,2, 3.,4.};
} 
```

**请注意**，由于对 有一些混淆`structs`，所以上面的示例也适用于 a `class`，在这种情况下，它与 相同`struct`：

```
class Foo 
{
 public:
  int i,j;
  double x,y;
}; 
```

在 C++11 中，这种类型的初始化在某些条件下[扩展到非聚合类型。](http://en.wikipedia.org/wiki/C%2B%2B11#Uniform_initialization)

例如

```
std::vector<int> v = {1,2,3,4,5}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T12:00:14.720

所有**聚合**都可以用大括号初始化，它用匹配项初始化每个聚合成员。如果列表包含的项目少于聚合成员的数量，则其余元素将被初始化，就像从一个空的大括号列表中一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T12:00:11.340

`SDL_Color`是一个*聚合*（`struct`在本例中为 4 个成员）。

您可以使用初始化列表初始化聚合（不仅仅是数组）。

```
SDL_Color textColor = { 255, 0, 255 }; 
```

是相同的

```
SDL_Color textColor;
textColor.r = 255;
textColor.g = 0;
textColor.b = 255;
textColor.unused = 0; 
```

# sql - Sql中的WHERE，结合两个快速条件会成倍增加成本

> ID：12091019
> 
> 赞同：2
> 
> 时间：2012-08-23T11:56:51.917
> 
> 标签：sql, performance, tsql, sql-server-2005

我有一个相当复杂的 sql，它从具有 ~14M 行的表中返回 2158 行的 id。我正在使用 CTE 进行简化。

由`WHERE`两个条件组成。如果我注释掉其中一个，另一个会在大约 2 秒内运行。如果我将它们都保留（由 分隔`OR`），则查询运行约 100 秒。单独第一个条件需要1-2秒，返回19行，单独第二个条件需要0秒，返回2139行。

可能是什么原因？

这是完整的 SQL：

```
WITH fpcRepairs AS
(
    SELECT FPC_Row = ROW_NUMBER()OVER(PARTITION BY t.SSN_Number ORDER BY t.Received_Date, t.Claim_Creation_Date, t.Repair_Completion_Date, t.Claim_Submitted_Date)
    ,   idData, Repair_Completion_Date, Received_Date, Work_Order, SSN_number, fiMaxActionCode, idModel,ModelName
    ,   SP=(SELECT TOP 1 Reused_Indicator FROM tabDataDetail td INNER JOIN tabSparePart sp ON td.fiSparePart=sp.idSparePart
            WHERE td.fiData=t.idData
            AND (td.Material_Quantity <> 0) 
            AND (sp.SparePartName = '1254-3751'))
    FROM   tabData AS t INNER JOIN
       modModel AS m ON t.fiModel = m.idModel 
    WHERE (m.ModelName = 'LT26i') 
    AND EXISTS(
        SELECT  NULL 
        FROM    tabDataDetail AS td 
        INNER JOIN tabSparePart AS sp ON td.fiSparePart = sp.idSparePart
        WHERE  (td.fiData = t.idData) 
        AND (td.Material_Quantity <> 0) 
        AND (sp.SparePartName = '1254-3751')
    ) 
), needToChange AS
(
    SELECT idData FROM tabData AS t INNER JOIN
       modModel AS m ON t.fiModel = m.idModel
    WHERE (m.ModelName = 'LT26i') 
    AND EXISTS(
        SELECT  NULL 
        FROM    tabDataDetail AS td 
        INNER JOIN tabSparePart AS sp ON td.fiSparePart = sp.idSparePart
        WHERE  (td.fiData = t.idData) 
        AND (td.Material_Quantity <> 0) 
        AND (sp.SparePartName IN ('1257-2741','1257-2742','1248-2338','1254-7035','1248-2345','1254-7042'))
    ) 
)
SELECT t.idData
FROM tabData AS t INNER JOIN modModel AS m ON t.fiModel = m.idModel
INNER JOIN needToChange ON t.idData = needToChange.idData  -- needs to change FpcAssy
LEFT OUTER JOIN fpcRepairs rep ON t.idData = rep.idData
WHERE   
rep.idData IS NOT NULL          -- FpcAssy replaced, check if reused was claimed correctly
AND rep.FPC_Row > 1             -- other FpcAssy repair before
AND (
    SELECT SP FROM fpcRepairs lastRep
    WHERE lastRep.SSN_Number = rep.SSN_Number
    AND lastRep.FPC_Row = rep.FPC_Row - 1
) = rep.SP                      -- same SP, must be rejected(reused+reused or new+new)
OR      
rep.idData IS NOT NULL          -- FpcAssy replaced, check if reused was claimed correctly
AND rep.FPC_Row = 1             -- no other FpcAssy repair before
AND rep.SP = 0                  -- not reused, must be rejected
order by t.idData 
```

这是执行计划：

下载：[http ://www.filedropper.com/exeplanfpc](http://www.filedropper.com/exeplanfpc)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T12:07:22.907

尝试分别使用**UNION ALL** of 2 查询而不是**OR**条件。

我已经尝试了很多次，它确实有帮助。我在[Art Of SQL](https://rads.stackoverflow.com/amzn/click/com/0596008945)中读到过这个问题。

阅读它，您可以找到许多有关性能问题的有用信息。

**更新：**

检查相关问题

[sql server查询中的UNION ALL vs OR条件](https://stackoverflow.com/questions/5639710/union-all-vs-or-condition-in-sql-server-query)

[http://www.sql-server-performance.com/2011/union-or-sql-server-queries/](http://www.sql-server-performance.com/2011/union-or-sql-server-queries/)

[UNION ALL 可以比 JOIN 快还是我的 JOIN 很糟糕？](https://stackoverflow.com/questions/3374459/can-union-all-be-faster-than-joins-or-do-my-joins-just-suck)

检查韦斯的答案

> OR 的使用可能导致查询优化器不再在第二个查询中使用索引。

# rest - RestSharp 用法

> ID：12091023
> 
> 赞同：2
> 
> 时间：2012-08-23T11:56:59.020
> 
> 标签：rest, http-headers, wcf-rest, restsharp

最近我正在使用[RestSharp](http://restsharp.org/)来消耗我的 Restful Resouce。并期望在服务器和客户端之间与 JSON 交换数据。下面是我的 C# 代码。

```
var client = new RestSharp.RestClient();
var request = new RestRequest(sUrl,Method.POST);
request.RequestFormat = DataFormat.Json;
request.Timeout =  TIME_OUT_MILLISECONTS ;
request.AddHeader("Content-Type", "application/json");
request.AddBody(new { appID = sAppId, loginName = sUserName, password=sPassword });
var response = client.Execute(request);
string s=response.Content;//It is always XML format. 
```

结果不是我所期望的（Json 数据格式），尽管我已经设置`RequestFormat Json`并添加了 Http 标头`Content-Type`。所以我决定使用 .Net Reflector 来找出 RestClient.Execute 方法中发生了什么。这是该方法的代码。

```
public RestClient()
    {
        ...
        this.AddHandler("application/json", new JsonDeserializer());
        this.AddHandler("application/xml", new XmlDeserializer());
        this.AddHandler("text/json", new JsonDeserializer());
        this.AddHandler("text/x-json", new JsonDeserializer());
        this.AddHandler("text/javascript", new JsonDeserializer());
        this.AddHandler("text/xml", new XmlDeserializer());
        this.AddHandler("*", new XmlDeserializer());
        ...
    } 
```

我对此有一些疑问：

1.  由于 RestClient 在 HttpWebRequest 中添加了多种类型`Content-Type`。构建请求是否正确？我想也许这就是为什么 Response.Content 总是 XML 的原因。

2.  我不知道为什么 RestClient 需要构建一个`HttpWebRequest`这样的。这样做有什么意义吗？

3.  如果我们在一个 Http Request 中同时指定了 JSon 和 XMl 消息格式，那么最后哪一个可以工作？是否允许？

谢谢。祝你有美好的一天。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T20:48:43.590

RestSharp 将根据**响应**的内容类型使用正确的处理程序。这就是那些`AddHandler`s 正在做的事情；它将 RestClient 配置为接受响应中的某些内容类型并将这些类型映射到反序列化器。通常，您希望为 json 内容类型设置一个接受标头，以通知服务器在响应中发送 json。

```
request.AddHeader("Accept", "application/json") 
```

当然，这假设您访问的服务器配置为使用 json 响应。

# ruby-on-rails - Rails 应用程序与视频播放器

> ID：12091027
> 
> 赞同：0
> 
> 时间：2012-08-23T11:57:22.983
> 
> 标签：ruby-on-rails, html5-video

不久前开始使用 reils，我有一个关于视频加载和处理的问题......有没有像视频载波波之类的东西？

用户将视频上传到文件 public/video 并在数据库中使用上传的文件名创建文件，然后在视图中创建一个视频标签

有这样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T06:24:59.217

您可能会受益于 Nick DeSteffen 关于[Uploadify + CarrierWave + Zencoder + Video.js的博文](http://www.nickdesteffen.com/blog/video-encoding-with-uploadify-carrierwave-and-zencoder)

# python - 在 appengine 中解析 json 格式的请求

> ID：12091028
> 
> 赞同：7
> 
> 时间：2012-08-23T11:57:37.623
> 
> 标签：python, google-app-engine

最近一直在开发 appengine 应用程序。我想解析对应用程序的请求中包含的 json 数据。如何使用 requesthandler 类的 request 对象来实现这一点？

下面是一段代码，显示我想要实现的目标：

```
import cgi
import webapp2
import datamethods

from google.appengine.ext.webapp.util import run_wsgi_app

class adduser(webapp2.RequestHandler):
    def get(self):
        # Get the phone number from json data in request.
        userphone = self.request.get("phone")
        # Get the name from json data in request.
        name = self.request.get("name")

app = webapp2.WSGIApplication([
  ('/adduser', adduser),
  ('/sign', updatestatus),
  ('/login',login)
], debug=True)

def main():
    run_wsgi_app(app)

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-23T12:19:32.893

您必须解析对象中传入的 json 字符串。在此之后，您可以访问属性。

```
import json   # Now you can import json instead of simplejson
....
jsonstring = self.request.body
jsonobject = json.loads(jsonstring) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T11:43:54.763

```
import cgi
import webapp2
import datamethods

from google.appengine.ext.webapp.util import run_wsgi_app

class adduser(webapp2.RequestHandler):
    def get(self):
        items = [] 
        response = { }

        userphone = self.request.get("phone") 
        name = self.request.get("name")

        items.append({'userphone': userphone , 'name':name})
        response['userInformation'] = items
        return response #return json data

app = webapp2.WSGIApplication([
  ('/adduser', adduser),
  ('/sign', updatestatus),
  ('/login',login)
], debug=True)

def main():
    run_wsgi_app(app)

if __name__ == "__main__":
    main() 
```

# ios - 如何在我的一个应用程序上线时在服务器模型中测试我的 inApp 购买

> ID：12091030
> 
> 赞同：3
> 
> 时间：2012-08-23T11:57:50.833
> 
> 标签：ios, in-app-purchase, sandbox

我有一个带有服务器模型的应用程序内购买的 iOS 应用程序，并准备提交 QA。根据 Apple 文件，我的服务器应该调用“https://sandbox.itunes.apple.com/verifyReceipt”url 进行测试。

这意味着在我的应用程序处于 QA 阶段之前，我必须将此网址放在我的服务器中，当我的应用程序通过审核流程并准备好销售时，我应该更改我的网址吗？

好的，如果是这样，那么当前一个应用程序上线时，我该如何测试我的另一个应用程序？我必须创建新的 url 才能与服务器通信？我不认为这将是唯一的方法。或者我的应用程序应该告诉我的服务器它是否是沙盒用户？如果是，请帮助我如何在应用程序中检查。如果我遗漏了什么，请帮助我。谢谢。

# php - Mysql和php，不会得到所有列

> ID：12091033
> 
> 赞同：-2
> 
> 时间：2012-08-23T11:58:00.150
> 
> 标签：php, mysql

我有这个代码。出于某种原因，当我显示 html 时，它不会显示 id 列的值。有一列，但其中没有值。在 mysql 表中，共有三列：“id”、“username”和“password”。有谁能够帮助我？

```
 include "Connector.php";
        $query = "SELECT id, username, password FROM users";
        $result = mysql_query("SELECT username, password FROM users") or die ("MySQL error: " .mysql_error());

        echo "<table>";
        while($row = mysql_fetch_array($result)){
            echo "
            <tr>
            <td>"
            .$row['id'].
            "</td>
            <td>"
            .$row['username'].
            "</td>
            <td>"
            .$row['password'].
            "</td>";
            echo "<td><a href='deleteRow.php?oId=".$row[password]."'>Delete</a></form></td>
        </tr>";
        }
        echo "</table>";
        mysql_free_result($result);
        mysql_close($connection); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T12:00:12.833

您不选择 id 列：

```
$query = "SELECT id, username, password FROM users";
$result = mysql_query("SELECT username, password FROM users")... 
```

您缺少 mysql_query 行上的 id 列。$query 变量根本没有被使用。让我猜猜……你复制粘贴的代码？

做这个：

```
$result = mysql_query($query).... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T12:00:01.313

```
 $result = mysql_query("SELECT username, password FROM users") or die ("MySQL error: " .mysql_error());
                                 ^^^^^^^^^^^^^^^^^^^^ 
```

那里没有`id`田地。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T12:00:08.653

您有 2 个查询，其中一个正在实际运行。这是实际运行的查询：

```
$result = mysql_query("SELECT username, password FROM users") 
```

您需要将“id”添加到该 SELECT 或仅使用上面的 $query 变量。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-23T12:04:17.147

使用此查询查找所有列的值：

$result = mysql_query("SELECT id, username, password FROM users") or die ("MySQL error: " .mysql_error());

# css - last-child 伪类

> ID：12091040
> 
> 赞同：0
> 
> 时间：2012-08-23T11:58:23.380
> 
> 标签：css

我正在用 html & css 开发树视图结构。

请在下面的链接中找到代码。在那个“特殊文件夹”中，缺少虚线。我正在使用 css :last-child 作为 ul, li。

[http://jsfiddle.net/LtzSF/](http://jsfiddle.net/LtzSF/)

任何机构都可以解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T12:11:23.750

尝试只选择直系后代：`ul#test li:last-child > ul`.

[http://jsfiddle.net/LtzSF/1/](http://jsfiddle.net/LtzSF/1/)

# jsf - ViewState 在每次使用 ICEfaces 请求后都会增长

> ID：12091043
> 
> 赞同：1
> 
> 时间：2012-08-23T11:58:27.693
> 
> 标签：jsf, facelets, icefaces

我尝试使用 ICEfaces 创建一个简单的 Web 应用程序，但遇到了问题。

这是网页：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core">

<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>test</title>
</h:head>
<h:body>
    <h:form>
        <h:commandButton value="Action" action="#{test1.action}" />
    </h:form>
</h:body>
</html> 
```

这是支持bean：

```
@ManagedBean(name = "test1")
@SessionScoped
public class Test1 {
    public Test1() {
    }

    public void action() {
        System.out.println("action invoked");
    }
} 
```

这是 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="WebApp_ID" version="3.0">
    <display-name>regconf</display-name>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>

    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Production</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.FACELETS_REFRESH_PERIOD</param-name>
        <param-value>1</param-value>
    </context-param>
    <context-param>
        <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
        <param-value>resources.application</param-value>
    </context-param>
    <context-param>
        <description>State saving method: 'client' or 'server' (=default). See JSF Specification 2.5.2</description>
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>client</param-value>
    </context-param>

    <listener>
        <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
    </listener>
</web-app> 
```

问题是 ViewState 的大小很大（用 Firebug 检查）并且每次单击“操作”按钮时它都会增长。在第一次请求之后是 32 KB，在第二次之后是 61 KB，然后是 94 KB、128 KB 等（在我看来，它总是保存上一个请求的状态）。

当我将`javax.faces.STATE_SAVING_METHOD`param的值设置为时，行为会发生变化`server`- 在这种情况下一切正常，并且 ViewState 在每次请求后仍然很小（使用 StateManager 在服务器端检查它）。

我正在使用 Mojarra 2.1.12（也尝试过 MyFaces - 结果相同）、ICEfaces 3.1.0 和 Tomcat 7.0.29。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:35:53.260

ICEfaces 需要服务器端状态保存，因此您应该设置以下内容：

```
<context-param>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>server</param-value>
</context-param> 
```

# mysql - 在子查询中选择 LIKE 值

> ID：12091047
> 
> 赞同：1
> 
> 时间：2012-08-23T11:58:50.563
> 
> 标签：mysql, sql

> **可能重复：**
> [MySQL LIKE IN()？](https://stackoverflow.com/questions/1127088/mysql-like-in)

我有 2 张桌子

**atm_name_initials（初始）**

```
KS
FW
GE
SD 
```

**atm_tasks_dit (task_name,task_given_to)**

```
task1 KS
task2 GE
task3 GE/SD 
```

现在我想建立所有与他们`SELECT`不同的名字`atm_name_initials` `WHERE``IN LIKE atm_tasks_dit.task_given_to`

这是我到目前为止所拥有的：

```
SELECT initial FROM atm_name_initials
WHERE initial 
IN
(
    SELECT DISTINCT task_given_to FROM atm_tasks_dit
    WHERE on_big_project_id = 29
) 
```

`atm_name_initials.initial`如果确切地建立了值，那么这段代码会搜索什么`atm_tasks_dit.task_given_to`

我想要类似的东西

```
SELECT initial FROM atm_name_initials
WHERE initial 
"IS LIKE" IN

'%
(
    SELECT DISTINCT task_given_to FROM atm_tasks_dit
    WHERE on_big_project_id = 29
)
%' 
```

或者其他的东西...

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:05:59.203

使用 MySQL sintax 提出的答案之间的混合：

```
SELECT DISTINCT initial
  FROM atm_tasks_dit,atm_name_initials
 WHERE task_given_to LIKE CONCAT('%',initial,'%') 
```

以防万一检查[SQL Fiddle 代码](http://www.sqlfiddle.com/#!2/9eec3/19)。

这是另一个[类似的问题](https://stackoverflow.com/questions/4420554/use-like-with-field-values-in-mysql)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:03:04.413

尝试这个：

```
SELECT initial 
FROM   atm_name_initials
join   atm_tasks_dit
on     initial like concat('%',task_given_to,'%')
WHERE  on_big_project_id = 29 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T12:13:59.110

尝试

```
Select distinct ani.initial--atd.task_name,atd.task_given_to
From atm_tasks_dit atd
join atm_name_initials ani on atd.task_given_to like '%' + ani.initial + '%'
-- WHERE on_big_project_id = 29 
```

**结果**

*最初的*

```
GE 
KS 
SD 
```

我在 Sql Server 中做过，因为我没有安装 MySql

# session - 多个 Grails 应用程序会话超时问题

> ID：12091048
> 
> 赞同：0
> 
> 时间：2012-08-23T11:58:51.663
> 
> 标签：session, tomcat, grails, tomcat7, contextpath

我正在使用 tomcat7 并想在其上部署 2 grails 应用程序。一个带有 ROOT.war，另一个带有 abc.war。我在我的 abc 应用程序上收到会话过期问题。

您能否告诉我如何为这两个应用程序配置上下文，以免它们发生冲突。

我试图`grails.app.context="/abc"` 在我的 abc 应用程序中设置但无法解决问题..

如果我单独运行这个名为 ROOT.war 的 abc 应用程序，它可以正常工作。

这两个应用程序都有一些常见的 jar 和类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:30:26.880

在同一个实例中运行两个应用程序应该没有问题。对于 ROOT 应用，在 Config.groovy 中设置 grails.app.context = '/'。对于 abc，您不必在 Config 中指定任何内容。

请参阅[如何为 Grails 应用程序配置会话超时？](https://stackoverflow.com/questions/2907516/how-to-configure-a-session-timeout-for-grails-application)用于设置会话超时。

# prototypejs - 使用原型更改标签的标签？

> ID：12091052
> 
> 赞同：0
> 
> 时间：2012-08-23T11:59:05.370
> 
> 标签：prototypejs, label

我知道我可以像这样更改标签 ID：

```
$(someid).id = 123; 
```

我怎样才能改变for呢？

这是我的代码：

```
<label id="10" for="xyz">
   sometext
</label> 
```

如何使用 Prototype将 for 从*xyz*更改为*abc ？*

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:07:51.850

$(someid).writeAttribute('for', 'abc');

# linux - 当程序在没有调试器和有调试器的情况下运行时，执行行为是不同的

> ID：12091053
> 
> 赞同：0
> 
> 时间：2012-08-23T11:59:09.137
> 
> 标签：linux, ddd-debugger

我正在linux中运行一个程序。当我在 ddd 调试器中运行它时，程序的行为是不同的。那就是程序在不同的点停止。为什么会这样？它是依赖于调试器还是每个调试器有时都会发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:38:09.403

您的问题描述不是很准确，但听起来像是内存访问问题。

当您的代码中有无效的内存访问时，行为是未定义的，并且可能与连接的 gdb 不同。对于内存错误，您应该尝试运行像 Valgrind 这样的内存分析器。

# oracle - 泛化 Oracle 静态游标

> ID：12091057
> 
> 赞同：1
> 
> 时间：2012-08-23T11:59:22.117
> 
> 标签：oracle, cursor, dry, olap

我在 Oracle 中创建了一个类似 OLAP 的包，您可以在其中调用一个主要的控制函数，该函数通过进行大量左连接来组装其返回的输出表。这些连接表在包内的“从”函数中定义，这些函数使用静态游标返回特定子集，由函数的参数进行参数化。问题是，这些光标都非常相似。

除了生成动态查询并在 a 中使用它们之外，还有什么方法`ref cursor`可以概括这些。每次我添加一个函数时，我都会有一种奇怪的感觉，作为一个开发人员，这不是特别优雅！

* * *

伪码

```
somePackage
  function go(param)
    return select    myRows.id,
                     stats1.value,
                     stats2.value
           from      myRows
           left join table(somePackage.stats1(param)) stats1
           on        stats1.id = myRows.id
           left join table(somePackage.stats2(param)) stats2
           on        stats2.id = myRows.id

  function stats1(param)
    return [RESULTS OF SOME QUERY]

  function stats2(param)
    return [RESULTS OF A RELATED QUERY] 
```

`stats`查询都具有相同的结构：

*   首先，他们以有用的方式聚合数据
*   然后他们根据标准将这些数据分成逻辑部分，然后再次聚合（例如，按部门、按地区等），然后合并结果
*   然后他们返回结果，转换成相关的`object`类型，这样我就可以轻松地做一个`bulk collect`

就像是：

```
cursor myCursor is
  with fullData as (
    [AGGREGATE DATA]
  ),
  fullStats as (
    [AGGREGATE FULLDATA BY TOWN]
    union all
    [AGGREGATE FULLDATA BY REGION]
    union all
    [AGGREGATE FULLDATA BY COUNTRY]
  )
  select myObjectType(fullStats.*)
  from   fullStats;

...

open myCursor;
fetch myCursor bulk collect into output limit 1000;
close myCursor;

return output; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-11T17:09:04.363

过滤器操作可以帮助使用静态 SQL 构建动态查询。特别是当列列表是静态的时。

您可能已经考虑过这种方法，但出于性能原因放弃了它。“如果我们只需要其中一个的结果，为什么要执行每个 SQL 块？” 你很幸运，优化器已经为你做了一个`FILTER`操作。

**示例查询**

首先创建一个每次运行等待 5 秒的函数。它将帮助查找执行了哪些查询块。

```
create or replace function slow_function return number is begin
    dbms_lock.sleep(5);
    return 1;
end;
/ 
```

此静态查询由绑定变量控制。有三个查询块，但整个查询在 5 秒内运行，而不是 15 秒。

```
declare
  v_sum number;
  v_query1 number := 1;
  v_query2 number := 0;
  v_query3 number := 0;
begin
  select sum(total)
  into v_sum
  from
  (
    select total from (select slow_function() total from dual) where v_query1 = 1
    union all
    select total from (select slow_function() total from dual) where v_query2 = 1
    union all
    select total from (select slow_function() total from dual) where v_query3 = 1
  );
end;
/ 
```

**执行计划**

这种表现不是好运的结果；这不仅仅是 Oracle 在另一个谓词之前随机执行一个谓词。Oracle 在运行前分析绑定变量，甚至不执行不相关的查询块。这就是`FILTER`下面的操作正在做的事情。（这是一个糟糕的名字，许多人通常将所有谓词称为“过滤器”。但只有其中一些会导致`FILTER`操作。）

```
select * from table(dbms_xplan.display_cursor(sql_id => '0cfqc6a70kzmt'));

SQL_ID  0cfqc6a70kzmt, child number 0
-------------------------------------
SELECT SUM(TOTAL) FROM ( SELECT TOTAL FROM (SELECT SLOW_FUNCTION() 
TOTAL FROM DUAL) WHERE :B1 = 1 UNION ALL SELECT TOTAL FROM (SELECT 
SLOW_FUNCTION() TOTAL FROM DUAL) WHERE :B2 = 1 UNION ALL SELECT TOTAL 
FROM (SELECT SLOW_FUNCTION() TOTAL FROM DUAL) WHERE :B3 = 1 )

Plan hash value: 926033116

-------------------------------------------------------------------------
| Id  | Operation        | Name | Rows  | Bytes | Cost (%CPU)| Time     |
-------------------------------------------------------------------------
|   0 | SELECT STATEMENT |      |       |       |     6 (100)|          |
|   1 |  SORT AGGREGATE  |      |     1 |    13 |            |          |
|   2 |   VIEW           |      |     3 |    39 |     6   (0)| 00:00:01 |
|   3 |    UNION-ALL     |      |       |       |            |          |
|*  4 |     FILTER       |      |       |       |            |          |
|   5 |      FAST DUAL   |      |     1 |       |     2   (0)| 00:00:01 |
|*  6 |     FILTER       |      |       |       |            |          |
|   7 |      FAST DUAL   |      |     1 |       |     2   (0)| 00:00:01 |
|*  8 |     FILTER       |      |       |       |            |          |
|   9 |      FAST DUAL   |      |     1 |       |     2   (0)| 00:00:01 |
-------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   4 - filter(:B1=1)
   6 - filter(:B2=1)
   8 - filter(:B3=1) 
```

**问题**

该`FILTER`操作记录不充分。我无法详细解释它何时起作用或不起作用，以及它对查询的其他部分的确切影响。例如，在解释计划中`Rows`估计为 3，但在运行时 Oracle 应该很容易估计基数为 1。显然执行计划不是那么动态的，糟糕的基数估计可能会导致以后的问题。此外，我还看到了一些奇怪的情况，静态表达式没有被适当地过滤。但是，如果查询使用简单的等式谓词，它应该没问题。

这种方法允许您删除所有动态 SQL 并将其替换为大型静态 SQL 语句。有一些优点；动态 SQL 通常“丑陋”且难以调试。但是只熟悉过程式编程的人倾向于将单个 SQL 语句视为一个巨大的上帝函数，这是一种不好的做法。他们不会欣赏`UNION ALL`s 创建独立的 SQL 块

**动态 SQL 仍然可能更好**

一般来说，我建议*不要*使用这种方法。你拥有的东西很好，因为它*看起来*不错。动态 SQL 的主要问题是人们不把它当作真正的代码。它没有评论或格式化，最终看起来像一个没人能理解的可怕混乱。如果您能够花费额外的时间来生成干净的代码，那么您应该坚持下去。

# c - 如何在 C 中解析整数命令行参数？

> ID：12091059
> 
> 赞同：17
> 
> 时间：2012-08-23T11:59:27.923
> 
> 标签：c, parameter-passing, command-line-arguments

我希望用户传递两个参数或将其留空。例如：

```
./program 50 50 
```

或者

```
./program 
```

当我尝试使用`int main(int argc, char *argv[])`时，我所做的第一件事就是更改`char *argv[]`为，`int *argv[]`但它不起作用。我想要的是用户只是**输入 0 和 100 之间的两个整数**。所以如果它不是两个整数，那么它应该给出一个错误。

我有点想给出一个类型错误（就像我以前在 C# 上编程的那样），但无论我输入什么，argv[1] 都会一直是 'char' 类型。

所以我所做的是

```
for (int i = 0; i <= 100; i++) {
    //printf("%d", i);
    if (argv[1] == i) {
        argcheck++;
        printf("1st one %d\n", i);
    }
    else if (argv[2] == i) {
        argcheck++;
        printf("2nd one %d\n", i);
    } 
```

这也不起作用。它在编译时也会发出警告，但如果我改变例如，那么它会给出一个`argv`分段*错误（核心转储）*错误。`atoi(argv[1])`

 *我需要一个简单的方法来解决这个问题。

编辑：

所以我修复了`atoi()`它，它给出分段错误的原因是因为我在没有参数的情况下尝试使用空值。所以我通过添加一个额外的条件来修复它。但现在的问题是，如果值是让我们说

```
./program asd asd 
```

那么 的输出`atoi(argv[1])`将为 0。有没有办法改变这个值？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-23T13:21:06.483

不使用`atoi()`也不使用`strtol()`。`atoi()`没有错误检查（如您所见！）并且`strtol()`必须使用全局`errno`变量进行错误检查，这意味着您必须设置`errno`为 0，然后调用`strtol()`，然后`errno`再次检查错误。**更好的方法是使用`sscanf()`**，它还可以让您从字符串解析任何原始类型，而不仅仅是整数，它还可以让您读取花哨的格式（如十六进制）。

例如，要从字符串中解析整数“1435”：

```
if (sscanf (argv[1], "%i", &intvar) != 1) {
    fprintf(stderr, "error - not an integer");
} 
```

从字符串中解析单个字符“Z”

```
if (sscanf (argv[1], "%c", &charvar)!=1) {
    fprintf(stderr, "error - not a char");
} 
```

从字符串中解析浮点数“3.1459”

```
if (sscanf (argv[1], "%f", &floatvar)!=1) {
    fprintf(stderr, "error - not a float");
} 
```

从字符串中解析一个大的无符号十六进制整数“0x332561”

```
if (sscanf (argv[1], "%xu", &uintvar)!=1) {
    fprintf(stderr, "error - not a hex integer");
} 
```

如果您需要更多的错误处理，请使用正则表达式库。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-23T12:11:49.677

这将做：

```
int main(int argc, char*argv[])
{
   long a,b;
   if (argc > 2) 
   {
      a = strtol(argv[1], NULL, 0);
      b = strtol(argv[2], NULL, 0);
      printf("%ld %ld", a,b);
   }
   return 0;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-23T12:02:24.190

参数始终作为字符串传递，您不能更改`main()`. 操作系统和周围的机器总是传递字符串，并且无法弄清楚你已经改变了它。

您需要使用 eg`[strtol()](http://linux.die.net/man/3/strtol)`将字符串转换为整数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-23T14:12:18.863

你想检查是否

1.  收到 0 或 2 个参数
2.  收到的两个值介于 0 和 100 之间
3.  收到的参数不是字符串。如果字符串来`sscanf`将返回 0。

下面的逻辑会帮助你

```
int main(int argc, char *argv[])
{
    int no1 = 0, no2 = 0, ret = 0;

    if ((argc != 0) && (argc != 2)) 
    {
        return 0;
    }

    if (2 == argc)
    {
        ret = sscanf(argv[1], "%d", &no1);
        if (ret != 1)return 0;
        ret = sscanf(argv[2], "%d", &no2);
        if (ret != 1)return 0;          

        if ((no1 < 0) || (no1 >100)) return 0;
        if ((no2 < 0) || (no2 >100)) return 0;          
    }

    //now do your stuff
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-29T22:29:06.127

您**仍然**可以使用**atoi**，只需先检查参数是否为数字；）
*顺便说一句，人们会告诉您 goto 是* **邪恶**的，*但他们通常会被不明智的* **“goto is bad”**、**“goto is evil”**、**“goto ”洗脑是魔鬼”的** *言论，只是在互联网上未经详细说明就被扔掉了。*
是的，意大利面条代码不太容易管理。在这种情况下 goto 是从它取代功能的时代开始的......

```
 int r, n, I;
    for (I = 0; I < argc; ++I)
    {
      n = 0;
      do
        if ( !((argv + I) [n] >= '0' && (argv + I) [n] <= '9') )
        {
          err:
            fprintf(stderr,"ONLY INTEGERS 0-100 ALLOWED AS ARGUMENTS!\n");
            return 1;
        }
      while ((argv + I) [++n] != '\0')
      r = atoi(argv[I]);
      if (r > 100)
        goto err;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-23T12:09:20.750

你如此天真地做的事情在 C 中是错误的。无论如何，你必须将字符串或字符作为参数，然后你可以对它们做任何你喜欢的事情。要么使用它们将它们更改为整数，`strtol`要么让它们成为字符串，并检查字符串的每个字符在 的范围内，`48 to 57`因为这些是 的十进制值`char 0 to 9`。就个人而言，这不是一个好主意，也不是很好的编码实践。更好地转换它们并检查您想要的整数范围。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-23T12:04:47.770

您不能更改 main() 函数的参数。所以你应该只使用 atoi() 函数将参数从字符串转换为整数。

atoi() 有其缺点。strtol() 或 strtoul() 函数也是如此。如果函数的输入是非数字的，即用户输入 asdf 或除有效数字以外的任何内容，这些函数将返回 0 值。为了克服这个问题，您需要在将字符串传递给 atoi() 之前解析字符串并在每个字符上调用[isdigit()](http://www.cplusplus.com/reference/clibrary/cctype/isdigit/)以确保用户输入了有效数字。之后，您可以使用 atoi() 转换为整数。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-11-21T12:53:00.467

```
#include<stdio.h>
#include<conio.h>
#include<stdlib.h>
main(int argc,char *args[])
{
    int i,sum=0;
    for(i=0;i<=argc;i++)
    {
        printf("\n The %d argument is: %s",i,args[i]);
    }
    printf("\nTHe sum of given argumnets are:");
    for(i=1;i<argc;i++)
    {
       int n;
       n=atoi(args[i]);
       printf("\nN=%d",n);
       sum += n;
    }
    printf("\nThe sum of given numbers are %d",sum);
    return(0);

  } 
```

检查这个程序我添加了另一个库stdlib.h，所以我可以使用函数atoi将字符数组转换为字符串。*

# python - python中的“否定”模式匹配

> ID：12091065
> 
> 赞同：31
> 
> 时间：2012-08-23T11:59:56.710
> 
> 标签：python, regex

我有以下输入，

```
OK SYS 10 LEN 20 12 43
1233a.fdads.txt,23 /data/a11134/a.txt
3232b.ddsss.txt,32 /data/d13f11/b.txt
3452d.dsasa.txt,1234 /data/c13af4/f.txt
. 
```

我想提取除包含“ ”的行和包含单个（点）的最后一行*之外的所有输入。*也就是说，我要提取以下内容`OK SYS 10 LEN 20``"."`

```
1233a.fdads.txt,23 /data/a11134/a.txt
3232b.ddsss.txt,32 /data/d13f11/b.txt
3452d.dsasa.txt.1234 /data/c13af4/f.txt 
```

我尝试了以下，

```
for item in output:
    matchObj = re.search("^(?!OK) | ^(?!\\.)", item)
    if matchObj:
        print "got item "  + item 
```

但它不起作用，因为它不会产生任何输出。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-08-23T12:25:43.607

看看它[在行动](http://regexr.com?31u07)：

```
matchObj = re.search("^(?!OK|\\.).*", item) 
```

不要忘记`.*`在负前瞻之后放置，否则您将无法获得任何匹配；-)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-23T12:08:28.433

```
 if not (line.startswith("OK ") or line.strip() == "."):
     print line 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-23T12:15:10.343

使用否定匹配。（另请注意，默认情况下，正则表达式中的空格很重要，因此不要将内容隔开。或者，使用[re.VERBOSE](http://docs.python.org/library/re.html#re.VERBOSE)。）

```
for item in output:
    matchObj = re.search("^(OK|\\.)", item)
    if not matchObj:
        print "got item " + item 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-23T12:08:31.260

为什么不匹配 OK SYS 行而不返回它。

```
for item in output:
    matchObj = re.search("(OK SYS|\\.).*", item)
    if not matchObj:
        print "got item "  + item 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-23T12:09:33.187

如果这是一个文件，您可以简单地跳过第一行和最后一行，然后使用以下命令阅读其余部分`csv`：

```
>>> s = """OK SYS 10 LEN 20 12 43
... 1233a.fdads.txt,23 /data/a11134/a.txt
... 3232b.ddsss.txt,32 /data/d13f11/b.txt
... 3452d.dsasa.txt,1234 /data/c13af4/f.txt
... ."""
>>> stream = StringIO.StringIO(s)
>>> rows = [row for row in csv.reader(stream,delimiter=',') if len(row) == 2]
>>> rows
[['1233a.fdads.txt', '23 /data/a11134/a.txt'], ['3232b.ddsss.txt', '32 /data/d13f11/b.txt'], ['3452d.dsasa.txt', '1234 /data/c13af4/f.txt']] 
```

如果它是一个文件，那么你可以这样做：

```
with open('myfile.txt','r') as f:
   rows = [row for row in csv.reader(f,delimiter=',') if len(row) == 2] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-01T15:38:10.700

```
and(re.search("bla_bla_pattern", str_item, re.IGNORECASE) == None) 
```

正在工作中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-28T09:58:54.883

您也可以在没有负面展望的情况下做到这一点。您只需在要提取的表达式部分添加括号。这个带括号的结构被命名为`group`.

让我们编写python代码：

```
string = """OK SYS 10 LEN 20 12 43
1233a.fdads.txt,23 /data/a11134/a.txt
3232b.ddsss.txt,32 /data/d13f11/b.txt
3452d.dsasa.txt,1234 /data/c13af4/f.txt
.
"""

search_result = re.search(r"^OK.*\n((.|\s)*).", string)

if search_result:
    print(search_result.group(1)) 
```

输出是：

```
1233a.fdads.txt,23 /data/a11134/a.txt
3232b.ddsss.txt,32 /data/d13f11/b.txt
3452d.dsasa.txt,1234 /data/c13af4/f.txt 
```

`^OK.*\n`将找到带有 OK 语句的第一行，但我们不想提取它，所以不带括号。接下来是我们要捕获的部分：`((.|\s)*)`，所以把它放在括号内。在正则表达式的末尾，我们寻找一个点`.`，但我们也不想捕获它。

PS：我发现这个答案对于理解群体的力量非常有帮助。[https://stackoverflow.com/a/3513858/4333811](https://stackoverflow.com/a/3513858/4333811)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-06T08:23:41.353

如果 OK 行是第一行，最后一行是点，您可以考虑像这样将它们切掉：

```
TestString = '''OK SYS 10 LEN 20 12 43
1233a.fdads.txt,23 /data/a11134/a.txt
3232b.ddsss.txt,32 /data/d13f11/b.txt
3452d.dsasa.txt,1234 /data/c13af4/f.txt
.
'''
print('\n'.join(TestString.split()[1:-1])) 
```

但是，如果这是一个非常大的字符串，您可能会遇到内存问题。

# django - 使用 django 处理 HTTP 分块编码

> ID：12091067
> 
> 赞同：10
> 
> 时间：2012-08-23T11:59:59.673
> 
> 标签：django, apache, mod-wsgi, wsgi, chunked-encoding

我在处理 http 分块传输编码时遇到问题。

我正在使用：

*   阿帕奇。
*   mod_wsgi 插件。
*   django。

django 只能处理带有 content-length 标头字段的常规 http 请求，但是在处理 TE（Transfer-Encoding）、分块或 gzip 时，它会返回一个空结果。

我正在考虑两种方法：

1.  对 django.wsgi python 文件进行一些修改
2.  将一些中间件 python 文件添加到 django，以拦截任何分块的 http 请求，将其转换为带有 content-length 头字段的 requelar http 请求，然后将其传递给 django，它可以很好地处理它。

任何人都可以提供上述 2 个选项中的任何一个（当然欢迎更多选项）

谢谢！

* * *

这是格雷厄姆第一次回答后对我的问题的延伸：

首先，感谢您的快速回复。使用的客户端是 Axis，它是另一家公司与我们的系统通信的一部分。我已经`WSGIChunkedRequest On`设置好了，我还对我的 wsgi 包装器进行了一些修改，如下所示：

`def application(environ, start_response):`

 *```
 if environ.get("mod_wsgi.input_chunked") == "1":
        stream = environ["wsgi.input"]
        print stream
        print 'type: ', type(stream)
        length = 0
        for byte in stream:
            length+=1
        #print length    
        environ["CONTENT_LENGTH"] = len(stream.read(length))

    django_application = get_wsgi_application()
    return django_application(environ, start_response) 
```*  *但它给了我这些错误（从 apache 的 error.log 文件中提取）：

```
[Sat Aug 25 17:26:07 2012] [error] <mod_wsgi.Input object at 0xb6c35390>
[Sat Aug 25 17:26:07 2012] [error] type:  <type 'mod_wsgi.Input'>
[Sat Aug 25 17:26:08 2012] [error] [client xxxxxxxxxxxxx] mod_wsgi (pid=27210): Exception occurred processing WSGI script '/..../wsgi.py'.
[Sat Aug 25 17:26:08 2012] [error] [client xxxxxxxxxxxxx] Traceback (most recent call last):
[Sat Aug 25 17:26:08 2012] [error] [client xxxxxxxxxxxxx]   File "/..../wsgi.py", line 57, in application
[Sat Aug 25 17:26:08 2012] [error] [client xxxxxxxxxxxxx]     for byte in stream:
[Sat Aug 25 17:26:08 2012] [error] [client xxxxxxxxxxxxx] IOError: request data read error 
```

我究竟做错了什么？！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-23T12:21:27.143

这不是 Django 问题。这是 WSGI 规范本身的一个限制，因为 WSGI 规范通过要求请求的 CONTENT_LENGTH 值来禁止使用分块的请求内容。

使用 mod_wsgi 时，有一个开关可以启用对分块请求内容的非标准支持，但这意味着您的应用程序不符合 WSGI，而且它需要自定义 Web 应用程序或 WSGI 包装器，因为它仍然无法与 Django 一起使用.

mod_wsgi 中允许分块请求内容的选项是：

```
WSGIChunkedRequest On 
```

你的 WSGI 包装器应该调用 wsgi.input.read() 来获取全部内容，用它创建一个 StringIO 实例并用它来替换 wsgi.input ，然后在调用包装的应用程序之前添加一个具有实际长度的新 CONTENT_LENGTH 值到环境中。

请注意这是危险的，因为您不知道正在发送多少数据。

无论如何，您使用什么客户端只支持分块请求内容？

* * *

**更新 1**

您的代码因多种原因而损坏。你应该使用类似的东西：

```
import StringIO

django_application = get_wsgi_application()

def application(environ, start_response):

    if environ.get("mod_wsgi.input_chunked") == "1":
        stream = environ["wsgi.input"]
        data = stream.read()   
        environ["CONTENT_LENGTH"] = str(len(data))
        environ["wsgi.input"] = StringIO.StringIO(data)

    return django_application(environ, start_response) 
```

请注意，这对 gzip 的请求内容没有帮助。您将需要额外检查以查看内容编码何时是压缩数据，然后执行与上述相同的操作。这是因为当 Apache 解压缩数据时，内容长度会发生变化，您需要重新计算它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T17:00:28.997

现在一切正常，问题出在守护程序模式下，因为它不适用于分块的 http 流量，可能在 mod_wsgi 4 中 - 根据 Graham Dumpleton。因此，如果您遇到此问题，请将 mod_wsgi 切换到嵌入式模式。

作为对 wsgi 包装器中 Graham 代码的修改，有两个选项可以读取缓冲在环境变量中的流：

**第一：**

```
try:
    while True:
        data+= stream.next()
except:
    print 'Done with reading the stream ...' 
```

第二个：

```
try:
   data+= stream.read()
except:
   print 'Done with reading the stream ...' 
```

第一个代码存根能够在守护程序模式下读取缓冲区但在某处停止，并且程序没有继续运行（这让我有点困惑，因为我希望看到它运行良好），而另一个代码存根崩溃了带有 IOError，并且仅在嵌入式模式下工作。

还要补充一点，从 3.3 升级到 3.4 并没有解决问题，所以你必须切换到嵌入式模式。

这些是我的结果和观察。如果您有任何意见、补充或更正，请不要犹豫。

谢谢！*

# jquery - 使用 jquery 更改母版页元素的 css

> ID：12091077
> 
> 赞同：-1
> 
> 时间：2012-08-23T12:00:20.623
> 
> 标签：jquery, asp.net, css

当我在任何子链接页面上时，我想突出显示主菜单。

为此，我试图从内容页面将 css 应用于母版页中的主菜单链接。

菜单代码如下：

```
 <div class="menu">
                 <ul id="vertical-navigation">
                    <li runat="server" id="liConfiguration" class="main_link"><a href="#">Configuration</a>
                        <ul>
                            <li class="">
                                <div class="ParentMenu">
                                    <div class="ChildItem">
                                        <asp:HyperLink ID="HyperLink5" runat="server" NavigateUrl="~/xyz/xyz.aspx">xyz Master</asp:HyperLink></div>
                                    <iframe src="" class="IframeMenuItem" scrolling="no"></iframe>
                                </div>
                            </li> 
```

因此，在这种情况下，当我转到 xyz.aspx 时，我想将“liConfiguration”的 css 更改为“active_butn”

我想编写用于更改 css 的 jquery 函数...我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:17:48.257

尽管您要求提供 jquery 代码（对此有 2 个答案），但我认为这里的服务器代码可能会更好。当您可能想要更改元素 id 时会更安全。

在大师：

```
public void ChangeConfigurationElementClass(string className)
{
    liConfiguration.Attributes["class"] = className;
} 
```

在页面中：

```
var master = Master as MyMaster;

if (master != null)
    master.ChangeConfigurationElementClass("active_butn"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:06:26.937

```
var $path = window.location.pathname;

var $indexPath = function ($path) {

            if ($path.indexOf('xyz') > -1) {
                $('#liConfiguration').addClass("active_butn");
            }
            else {
                $('#liConfiguration').addClass("main_link");
            }
} 
```

我希望添加新类 $indexPath($path); 会很好

# android - 在打开新活动之前使用进度条发出 HTTP 请求：如何？

> ID：12091091
> 
> 赞同：0
> 
> 时间：2012-08-23T12:01:19.737
> 
> 标签：android, eclipse, multithreading, progress-bar

我有一段代码通过简单地调用一些 URL 来设置一些网络 IP 摄像机参数。URL（为了简化）采用这种格式“http://mydomain.com:portnumber/setalarm.cgi”，我使用普通的 HttpGet / HttpResponse 机制来调用 URL 并获取结果状态（如果好，则为 200，如果不好，则为其他）。现在：由于要调用的 URL 是 8 个或更多，因此按顺序（我使用 for 循环），我想显示一个进度条（或简单的进度指示器），让用户知道正在执行不同的 URL 调用。当所有 8 次调用都完成后，我希望显示一个带有结果的新活动（OK，或 KO 与 KO 凸轮列表）。

我尝试了很多解决方案，在这个站点上找到了，但没有一个成功的（线程、进度条、对话框栏、异步任务等）。要么我得到异常，要么栏不显示，要么在流程完成之前显示新的活动。

有人可以帮忙吗？这是我现在代码的相关部分：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mainlayout);

    // ON button
    Button myButton1 = (Button) findViewById (R.id.button1);
    myButton1.setOnClickListener(new OnClickListener() {            

        public void onClick(final View arg0) {

            intGoodCamera = 0;
            intBadCamera = 0;

            for (int i = 0; i<intNumCam; i++) {

                System.out.println (intStartingPortNb+i);

                String myurl = strIPAddress + ":" + (intStartingPortNb+i) + strSuffixSetAlarmOn;
                HttpClient httpClient = new DefaultHttpClient();
                HttpContext localContext = new BasicHttpContext();
                HttpGet httpGet = new HttpGet(myurl);
                HttpResponse response = null;
                try {

                    response = httpClient.execute(httpGet, localContext);
                    System.out.println (response.getStatusLine().getStatusCode());
                    if (response.getStatusLine().getStatusCode() == 200) 
                        intGoodCamera++;
                    else {
                        intBadCamera++;
                    }
                } catch (ClientProtocolException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }

            System.out.println ("OK: "+intGoodCamera + " KO: "+ intBadCamera);
            Intent nextIntent = new Intent(MainActivity.this, Results.class);
            MainActivity.this.startActivity(nextIntent);
        }
    }); 
```

......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:04:05.647

只需使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html) ..

*   将启动**ProgressDialog**代码放在`onPreExecute()`AsyncTask..
*   将您的**HttpRequest**放在`doInBackGround()`AsyncTask 中。
*   现在删除（关闭）**ProgressDailog**`onPostExecute()`并在`onPostExecute()`.

简单的..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:03:40.920

我认为您的问题是您将 http 请求放在 UI 线程中，这是自 Android 3.0 以来被禁止的

我认为你应该检查这个链接： [httpGet Request error](https://stackoverflow.com/questions/12056382/httpget-request-error/12056438#12056438)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T12:05:51.077

我建议阅读有关 AsyncTask 的内容。查看[本教程 (http://www.vogella.com/articles/AndroidPerformance/article.html#asynctask)](http://www.vogella.com/articles/AndroidPerformance/article.html#asynctask)中的一个很好的示例，几乎完全可以说明您正在尝试做什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T12:18:21.783

您不能在 UI 线程中执行超过 5 秒的操作。为此使用[异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)

在上一个 http 请求完成后调用下一个 http 请求（因为任务正在运行 Async）并更新进度条。

最好使用监听器接口来处理异步任务完成

脚步 ：

1.  调用异步任务以获得第一个 http 请求。
2.  当任务完成时，从 post execute 部分编写代码来调用其相应的完成侦听器。
3.  从已完成的侦听器开始，开始下一个 http 请求并更新进度。
4.  只要提出所有请求，就继续。

# c# - 使用 Thread.Sleep() 时未更新 Wpf 标签

> ID：12091093
> 
> 赞同：0
> 
> 时间：2012-08-23T12:01:21.687
> 
> 标签：c#, wpf, multithreading

我有一个标签，我想在每秒后更新它的内容，3 秒后我只看到最后一个字符串“第 3 步 ...”我做错了什么，如果出于某种原因还有其他方法可以实现这一点我不能使用 Thread.Sleep()：

**看法：**

```
<Window x:Class="WpfApplication1.ScrollerView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Scroller" DataContext="{StaticResource scrollerVM}" Height="150" Width="300">
    <Grid>
        <ListBox ItemsSource="{Binding Messages}" Width="200" Height="50" BorderThickness="0" VerticalAlignment="Top" HorizontalAlignment="Left">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Label Content="{Binding Text}"  />
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ListBox>
        <Button Width="70" Height="24" Content="Add new" Command="{Binding AddNew}" HorizontalAlignment="Left" Margin="0,56,0,30" />
    </Grid>
</Window> 
```

**查看型号：**

```
using System.Collections.ObjectModel;
using System.ComponentModel;
using System.Threading;

namespace WpfApplication1.Scroller
{
    public class Message
    {
        public Message(string _text)
        {
            text = _text;
        }

        private string text;
        public string Text
        {
            get { return text; }
            set {text = value;}
        }
    }

    public class ScrollerViewModel : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;
        public DelegateCommand AddNew { get; protected set; }

        ObservableCollection<Message> _messages = new ObservableCollection<Message>();
        public ObservableCollection<Message> Messages
        {
            get { return _messages; }
            set
            {
                _messages = value;
                OnPropertyChanged("Messages");
            }
        }

        public ScrollerViewModel()
        {
            AddNew = new DelegateCommand(Add);
        }

        private void Add(object parameter)
        {
            UpdateProgress("Step 1...");
            UpdateProgress("Step 2...");
            UpdateProgress("Step 3...");
        }

        private void UpdateProgress(string step)
        {
            Messages.Clear();
            Messages.Add(new Message(step));
            Thread.Sleep(1000);
        }

        protected void OnPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T12:10:14.607

这是因为您正在 UI 线程中睡觉。在添加完成之前，用户界面将没有机会更新。您可以使用带有 ReportProgress 的 BackgroundWorker 来实现您想要的。像这样的东西：

```
BackgroundWorker worker = new BackgroundWorker();
worker.WorkerReportsProgress = true;
worker.DoWork += delegate(object s, DoWorkEventArgs args)
{
    worker.ReportProgress(1, "Step1");
    Thread.Sleep(1000);
    worker.ReportProgress(2, "Step2");
    Thread.Sleep(1000);
    worker.ReportProgress(3, "Step3");
};
worker.ProgressChanged += delegate(object s, ProgressChangedEventArgs args)
{
    string step = (string)args.UserState;
    Messages.Clear();
    Messages.Add(new Message(step));
};
worker.RunWorkerAsync(); 
```

UI线程在执行时不会被占用`DoWork`，但是里面的代码`ProgressChanged`会在UI线程上执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T12:11:59.420

当你在 UI 线程上时，你永远不应该调用 Thread.Sleep。这将阻塞 Dispatcher 并且不进行渲染。在此期间将发生绑定更新等。

如果您想在 UpdateProgress() 调用之间等待，请使用 DispatcherTimer。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-23T12:09:28.947

在添加新消息之前，您正在清除消息。

```
private void UpdateProgress(string step)
{
    Messages.Clear(); // <- Why?
    Messages.Add(new Message(step));
    Thread.Sleep(1000);
} 
```

# eclipse - 使用 eclipse juno 配置 Java CV

> ID：12091095
> 
> 赞同：0
> 
> 时间：2012-08-23T12:01:23.307
> 
> 标签：eclipse, opencv, javacv

我有一台 64 位 Windows 7 笔记本电脑。

我有opencv 2.4.2版。我已经在 C 中提取了它：

我的笔记本电脑上有 Eclipse Juno Classic。

已安装 Jdk 7 64 位版本并设置了路径变量，因此我可以从 CMD 访问 javac。

我从谷歌项目下载了 javacv-0.2。

对于opencv，我已将以下路径添加到类路径变量中。

C:\opencv\build\x64\vc10\bin;C:\opencv\build\common\tbb\intel64\vc10\

我已经安装了 Microsoft Visual C++ 2010 Redistributable Package (x64)

我在eclipse的ProjectBuildPath中包含了javacv.jar、javacpp.jar和javacv-windows-x86_64.jar。

然而，当我尝试编写以下程序函数 cvLoadImage()、cvSmooth()、cvSaveImage 和 cvReleaseImage() 时，我无法识别它们并且无法使用它们。

```
import static com.googlecode.javacv.cpp.opencv_core.*;
import static com.googlecode.javacv.cpp.opencv_imgproc.*;
import static com.googlecode.javacv.cpp.opencv_highgui.*;

public class ssss {
    public static void main(String filename) { 
    IplImage image = cvLoadImage(filename);
        if (image != null) {
            cvSmooth(image, image, CV_GAUSSIAN, 3);
            cvSaveImage(filename, image);
            cvReleaseImage(image);
        }
    }
} 
```

请指导我。如果您需要有关它的任何其他信息，请告知。

我按照此链接提供的说明配置 java-cv： http: [//ganeshtiwaridotcomdotnp.blogspot.in/2011/12/opencv-javacv-eclipse-project.html](http://ganeshtiwaridotcomdotnp.blogspot.in/2011/12/opencv-javacv-eclipse-project.html)

问候， 普里扬克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:40:22.283

您提到您使用的是 64 位系统。但是您已经为 32 位二进制文​​件设置了路径。64位系统的正确路径应该是

`C:\opencv\build\x64\vc10\bin;C:\opencv\build\common\tbb\intel64\vc10\`

# visual-studio-2012 - StyleCop-4.7.35.0 未与 VS2012 RTM 集成

> ID：12091097
> 
> 赞同：7
> 
> 时间：2012-08-23T12:01:37.957
> 
> 标签：visual-studio-2012, stylecop

我注意到最新的 StyleCop 版本 (4.7.35.0) 没有与 VS2012 RTM 集成。安装后不显示。

VS2012 RTM 是否计划很快发布？

# c# - MVC3 中的 Ajax.ActionLink 不起作用

> ID：12091100
> 
> 赞同：0
> 
> 时间：2012-08-23T12:01:54.243
> 
> 标签：c#, razor, asp.net-ajax, visual-studio-2012

我正在从**VS2012RC**开发一个 Asp.net MVC3 网站。我正在尝试使用 Ajax Actionlink 创建网站的部分视图。但它不起作用。在与我的团队一起尝试了我所知道的一切并进行了大量搜索之后，我在一个 TestProject 上进行了尝试。我的进一步抑郁症也不起作用。我已经尝试解决这个问题很长时间了，现在我打电话给 SO。

这就是我创建测试项目的方式。请让我知道我是否犯了错误，或者这是我机器的故障。

1.  我用 html5 语义标记和 Razor 的视图引擎创建了一个 MVC3 空项目。
2.  然后我在我的项目中添加了一个 Home 控制器并为 View() 操作创建了一个视图。
3.  然后我创建了另一个动作 TestAjax()。
4.  **然后我在 Views Folder**的 Home 文件夹中创建了一个局部视图。

这是我的索引视图：

```
 @{
    ViewBag.Title = "Index";
    }

    <div>
    @Ajax.ActionLink("This is a test ajax","testAjax",new AjaxOptions{ UpdateTargetId =                                       "TestAjax" ,HttpMethod ="GET",InsertionMode =InsertionMode.InsertAfter})

    </div>

    <div id ="TestAjax">
    </div> 
```

部分视图是：

```
<h1>Testing testing testing testing</h1> 
```

现在我期望的是，当我单击链接时，标题必须出现在 TestAjax 部门中的链接下方。但实际发生的是在主页中出现链接。当我单击链接时，它将转到“/Home/testAjax”并仅显示部分视图。没有部分观点。

你能告诉我这个程序有什么问题吗？

编辑：

```
<head>
<meta charset="utf-8" />
<title>@ViewBag.Title</title>
<link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/jquery-1.6.2.min.js")" type="text/javascript">         </script>
<script src="@Url.Content("~/Scripts/modernizr-2.0.6-development-only.js")" type="text/javascript"></script>
<script src="@Url.Content(" ~/Scripts/jquery.unobtrusive-ajax.js")" type = "text/javascript"> </script>  
</head> 
```

当我查看视图 Index() 的网页中的资源时：

```
<a href="/Home/TestAjax" onclick="Sys.Mvc.AsyncHyperlink.handleClick(this, new Sys.UI.DomEvent(event), { insertionMode: Sys.Mvc.InsertionMode.insertAfter, httpMethod: 'GET', updateTargetId: 'TestAjax' });">This is a test ajax</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:17:23.083

引用的`~/Scripts/jquery.unobtrusive-ajax.js`js 文件不在我的布局/视图中。由于我不熟悉ajax。因此，那些不熟悉 MVC 中的 ajax 并通过谷歌搜索来到这里的人，首先检查上面提到的这个参考是否在您的布局/视图中。

# c# - 使用 WCF 同步文件下载

> ID：12091101
> 
> 赞同：1
> 
> 时间：2012-08-23T12:01:54.313
> 
> 标签：c#, wcf, download, wcf-rest

我有一个基于 WCF REST 的服务，它在 Web 服务器机器中下载和存储视频文件。视频文件的最大大小在 1MB 左右，目前下载是异步的。

是否可以使用同步下载，如果几乎同时提交大量或请求，是否会发生超时？如果是这样，是否有处理这种情况的机制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:39:46.437

您可以将服务设置为单例。WCF 将处理多个调用的排队。可以在[此处](https://stackoverflow.com/questions/6195009/wcf-wondering-about-request-queueing)找到类似的问题，并且可能会有所帮助。

# windows - OpenCV videocapture 几个摄像头

> ID：12091104
> 
> 赞同：0
> 
> 时间：2012-08-23T12:01:58.620
> 
> 标签：windows, opencv

应使用 OpenCV 读取多个 GigE 相机。如何识别单个相机？相机索引 (open(deviceID)) 是如何构建的？

谢谢你的帮助！

乔霍尔格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:35:44.593

我会使用相机制造商自己的SDK来控制相机，特别是如果您需要良好的性能（例如大图像，高帧率）或需要设置相机特定参数（例如曝光时间），然后将返回的数据传递给openCV进行处理和显示。

# jsf - JSF ui：重复渲染

> ID：12091105
> 
> 赞同：1
> 
> 时间：2012-08-23T12:02:00.587
> 
> 标签：jsf, jsf-2, richfaces, spring-webflow, uirepeat

我想使用 ui:repeat 或任何其他迭代标记为数组列表中的每个项目显示多个组件一次。

```
<!-- print multiple mandates -->
        <ui:repeat id="mandates" var="mandate" value="#{taxheadDirectDebit.mandates}">

        <a4j:region id="remittanceDetailsSection"
            rendered="#{(taxheadDirectDebit.accountFinancialInfo.registration.type != 'PREM') or (taxheadDirectDebit.accountFinancialInfo.registration.type != 'VAT')}">

            <!-- Remittance Details -->
            <fieldset><legend class="sub"> <h:outputText
                value="#{msg['remittanceDetails.title']}" /> </legend> 

            <!-- Estimated Liability -->
            <div class="field">
            <div class="label"><label for="allocatedAmount"><h:outputText
                for="estimatedLiability"
                value="#{msg['remittanceDetails.estimatedLiability']}" /> </label><span
                class="requiredFlag">*</span></div>
            <div class="error">
                <rich:message styleClass="errorText" for="estimatedLiability" />
            </div>
            <div class="input">
                <h:inputText id="estimatedLiability" size="30"
                maxlength="11" label="#{msg['registerContractPage1.subTaxNumber']}"
                value="#{taxheadDirectDebit.estimatedLiability}">
                <a4j:ajax event="change" render="remittanceFrequency" />
                </h:inputText>
            </div>

            <br class="clear" />

            </div>

            <!-- Is Seasonal -->
            <div class="field">
            <div class="label"><label for="isSeasonal"> <h:outputText
                for="isSeasonal"
                value="#{msg['remittanceDetails.isTheNatureSeasonal']}" /> </label><span
                class="requiredFlag">*</span></div>
            <div class="error"><rich:message styleClass="errorText"
                for="isSeasonal" /></div>
            <div class="input"><h:selectOneRadio id="isSeasonal"
                label="#{msg['remittanceDetails.isTheNatureSeasonal']}"
                value="#{taxheadDirectDebit.isSeasonal}"
                styleClass="radioLabelTop">
                <ddo:twoOptionSelection />
            <a4j:ajax event="click" render="remittanceFrequency" />
            </h:selectOneRadio></div>

            <br class="clear" />

            </div>

            </fieldset>

        </a4j:region> 

        <!-- Remittance Frequency -->
        <a4j:outputPanel id="remittanceFrequency">

        <div class="field">
            <div class="label"><label for="allocatedAmount"><h:outputText
                for="estimatedLiability"
                value="#{msg['remittanceDetails.estimatedLiability']}" /> </label><span
                class="requiredFlag">*</span></div>
            <div class="error">
                <rich:message styleClass="errorText" for="estimatedLiability" />
            </div>
            <div class="input">
                <h:inputText id="estimatedLiability" size="30"
                maxlength="11" label="#{msg['registerContractPage1.subTaxNumber']}"
                value="#{taxheadDirectDebit.estimatedLiability}">
                <a4j:ajax event="change" render=":remittanceDetails:mandates:remittanceFrequency" />
                </h:inputText>
            </div>

            <br class="clear" />

            </div>

            <fieldset><legend class="sub"> <h:outputText
                value="#{msg['remittanceDetails.frequency']}" /> </legend> 

            <!-- Amount to be Debited -->
            <div class="field">
            <div class="label"><label for="amountEachMonth"><h:outputText
                for="amountEachMonth"
                value="#{msg['remittanceDetails.amountToBeDebited']}" /> </label></div>
            <div class="error"><rich:message styleClass="errorText"
                for="amountEachMonth" /></div>
            <div class="input"><h:inputText id="amountEachMonth" size="30" readOnly="true" 
                maxlength="8" label="#{msg['remittanceDetails.amountToBeDebited']}"
                value="#{mandate.remittanceDetails.amountEachMonth}">
                <a4j:ajax event="change" render="remittanceFrequencyNoDebitedEachMonth"/>
            </h:inputText></div>
            <br class="clear" />
            </div>

            <a4j:outputPanel id="remittanceFrequencyNoDebitedEachMonth">
            <!-- Months -->
            <div class="field">
                <div class="grid1"><h:outputText
                    value="&#160;" />&#160;
                </div>
                <rich:panel styleClass="ddo-panel" rendered="#{taxheadDirectDebit.isSeasonal == 1}">
                    <div class="grid2"><div align="center">
                        <h:outputText value="#{msg['reviewDetails.reduce']}"/><div align="center"></div>
                    </div></div>
                </rich:panel>
                <rich:panel styleClass="ddo-panel" rendered="#{taxheadDirectDebit.action == 'AMEND'}">
                    <div class="grid3">
                        <div align="center">
                            <h:outputText value="#{msg['reviewDetails.suspend']}"/><div align="center"></div>
                        </div>
                    </div>
                </rich:panel>
                <rich:panel styleClass="ddo-panel" rendered="#{taxheadDirectDebit.isSeasonal == 1}">
                    <div class="grid2">
                        <div align="center">
                            <h:outputText value="#{msg['reviewDetails.exclude']}"/><div align="center"></div>
                        </div>
                    </div>
                </rich:panel>
            <br class="clear" />

            <div class="floatleft">

                    <div class="row3">
                        <div class="row1">

                        <!-- January -->
                            <!-- Months Column -->
                            <div class="grid1">
                                <label>
                                    <h:outputText readOnly="true" disabled="true" size="4" value="#{msg['calendar.month.0']}" />
                                </label>
                            </div>
                            <!-- Reduce check box --> 
                            <rich:panel styleClass="ddo-panel" rendered="#{taxheadDirectDebit.isSeasonal == 1}">
                                <div class="grid2">
                                    <div align="center">
                                        <h:selectBooleanCheckbox 
                                            id="reduce12" 
                                            value="#{mandate.remittanceDetails.remittanceFrequencys[0].reduce}" 
                                            disabled="#{mandate.remittanceDetails.remittanceFrequencys[0].exclude}">
                                            <a4j:ajax event="click" render="remittanceFrequency" />
                                        </h:selectBooleanCheckbox>
                                    </div>
                                </div>
                            </rich:panel>
                            <!-- Suspend check box --> 
                            <rich:panel styleClass="ddo-panel" rendered="#{taxheadDirectDebit.isSeasonal != 1}">
                                <div class="grid2hidden">
                                    <h:outputText value="&#160;" />
                                </div>
                            </rich:panel>
                            <rich:panel styleClass="ddo-panel" rendered="#{taxheadDirectDebit.action == 'AMEND'}">
                                <div class="grid3">
                                    <div align="center">
                                    <h:selectBooleanCheckbox 
                                        id="suspend0" 
                                        value="#{mandate.remittanceDetails.remittanceFrequencys[0].suspend}">
                                        <a4j:ajax event="change" />
                                    </h:selectBooleanCheckbox>
                                    </div>
                                </div>
                            </rich:panel>
                            <!-- Exclude check box --> 
                            <rich:panel styleClass="ddo-panel" rendered="#{taxheadDirectDebit.isSeasonal == 1}">
                                <div class="grid2">
                                    <div align="center">
                                    <h:selectBooleanCheckbox 
                                        id="exclude0" 
                                        value="#{mandate.remittanceDetails.remittanceFrequencys[0].exclude}" 
                                        disabled="#{mandate.remittanceDetails.remittanceFrequencys[0].reduce}">
                                        <a4j:ajax event="change" render="remittanceFrequency" />
                                    </h:selectBooleanCheckbox>
                                    </div>
                                </div>
                            </rich:panel>
                            <rich:panel styleClass="ddo-panel" rendered="#{taxheadDirectDebit.isSeasonal != 1}">
                                <div class="grid2hidden">
                                    <h:outputText value="&#160;" />
                                </div>
                            </rich:panel>
                            <div class="errorRemittance">
                                <rich:message styleClass="errorText" for="remittanceAmount0"/>
                            </div>
                            <!-- Monthly Amount field --> 
                            <div class="grid5">
                                <h:inputText 
                                    id="remittanceAmount0" size="30" maxlength="8" readOnly="true"
                                    value="#{mandate.remittanceDetails.remittanceFrequencys[0].amount}" 
                                    disabled="#{!mandate.remittanceDetails.remittanceFrequencys[0].reduce}" 
                                    label="#{msg['remittanceDetails.amountToBeDebited']}">
                                    <a4j:ajax event="change" render="remittanceFrequency" />
                                </h:inputText>
                            </div>
                        </div>
                    </div>

                <div class="errorText" font="bold">
                    <rich:message styleClass="errorTextNoPadding" for="continue"/>
                </div>
                </div>

                </div>
                </a4j:outputPanel>
                </fieldset>
            </a4j:outputPanel>

            <rich:message>
                <rich:message for="remittanceFrequency" ajaxRendered="true" />
            </rich:message>

        </ui:repeat> 
```

我在这里取出了很多我的代码，所以可能有 un macthed div 等，但想法就在那里。

我有两个问题：

*   你可以看到一些组件有更改事件，这些事件会根据 id 呈现其他组件。这些在重复中不起作用
*   我正在使用 webflow 并将消息添加到消息上下文中，以便消息标签可以显示验证消息，但这些在迭代中也不起作用。

我试过 tr:iterator、c:forEach、a4j:repeat、tr:forEach。我很确定我正在尝试做的事情不可能像我尝试做的那样，所以如果有人有尝试实现类似的经验，我会很感激一些帮助。我无法更改我正在使用的 MVC 框架，但也许可以使用 jQuery。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-24T10:21:41.817

我通过将 ajax 区域移到重复之外并仅在整个区域上调用 render 来解决这个问题。我知道不漂亮，但我能找到最快的解决方案。

在消息前面，我只需将列表中被迭代的项目的索引添加到消息中。

```
"remittanceDetails:mandates:"+taxhead.getMandates().indexOF(mandate)+":remittanceAmount" + frequency.getMonth().getCode() 
```

JSF 负责其余的工作。

# gstreamer - 使用 GStreamer 的多个应用程序

> ID：12091112
> 
> 赞同：3
> 
> 时间：2012-08-23T12:02:18.923
> 
> 标签：gstreamer

我想编写（但首先我想了解如何去做）基于 GStreamer 框架的应用程序（多个），它们将同时共享相同的硬件资源。

例如：有一个硬件带有硬件加速，用于视频解码。我想同时启动两个能够使用硬件加速解码不同视频流的应用程序。当然，我假设 HW 能够处理此类请求，有适当的驱动程序（但不是 GStreamer 元素）来执行此操作，但是如何编写支持在单独进程之间共享此类资源的 GStreamer 元素？

我将不胜感激任何链接，建议从哪里开始......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T16:40:36.123

您有可以同时访问的硬件。因此，同时访问它的两个 gstreamer 元素应该可以工作！这里没有具体的 Gstreamer。

假设您想编写一个解码元素，它就像任何解码元素一样，并且您可以正确访问您的硬件。您的驱动程序应该处理并发访问。起点是 Gstreamer 插件编写者指南。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T06:55:01.580

因此，您需要一个控制硬件解码器并解码来自多个源的流的单个进程。

我建议构建一个守护进程，它本身也可能基于 GStreamer。gdppay 和 gdpdepay 提供了非常简单的方法来通过套接字将数据传递到守护程序并返回。守护进程将等待指定端口（或 unix 套接字）上的连接，并为每个连接打开一个虚拟解码器。单独应用程序中的视频解码器元素将在内部连接到守护程序并取回解码的视频。

# c# - 如何防止未经授权的子操作返回 401

> ID：12091116
> 
> 赞同：1
> 
> 时间：2012-08-23T12:02:26.800
> 
> 标签：c#, asp.net-mvc, authentication, iis, ntlm

# 问题

长话短说，您如何防止未经授权的 ChildActions 返回 401 代码并返回空结果。

# 语境

我的应用程序使用**NTLM**在网络上进行身份验证。我还想处理匿名身份识别，对于不支持**NTLM**的设备，或者如果有人通过某些代理。

Web 应用程序之一是绝对需要登录才能查看的控制器/操作，还有一些可以匿名查看的控制器/操作。对于那些在我最初使用以下内容时必须进行身份验证的人：

```
[Authorize()]
public class SomeController : BaseController 
```

它按预期工作并返回**401 状态代码 (Unauthorized)**。

问题从允许匿名的页面开始。因为这些页面的部分使用 RenderAction 来呈现**需要身份验证**的部分。

在前端的本地开发服务器上，一切看起来都很好，但是对于**IIS**，任何具有任何需要身份验证的小块的页面都会返回 401 页面。所以我创建了一个自定义 Authorize 属性：

```
public class CustomAuthorizeAttribute : AuthorizeAttribute
{
    public bool Ignore401ChildAction { get; set; }

    public CustomAuthorizeAttribute()
        : base() {
        this.Ignore401ChildAction = true;
    }

    protected override void HandleUnauthorizedRequest( AuthorizationContext filterContext ) {
        base.HandleUnauthorizedRequest( filterContext );
        if( this.Ignore401ChildAction && filterContext.IsChildAction ) {
            filterContext.HttpContext.Response.TrySkipIisCustomErrors = true;
        }
    }
} 
```

然后在前端，无论有没有 IIS，它似乎都能产生正确的行为。但是在后端，即使页面完全呈现，它也会返回 401

所以我将以下内容添加到我的 CustomAttribute 而不是**TrySkipIisCustomErrors**

```
filterContext.HttpContext.Response.StatusCode = 200;
filterContext.Result = new EmptyResult(); 
```

在匿名中一切都很好，但是当启用 NTLM 时，当控制器没有该 CustomAuthorize 属性时，服务器不会请求身份验证。似乎它只是在强制性而不是可用时才请求凭证。

谢谢，

## 编辑

经过大量搜索、挖掘和摆弄，意识到真正的问题是匿名识别将优先于 Windows/NTLM。如果启用了**匿名**和**Windows身份验证，则****Windows**将仅在匿名身份验证失败时执行。

## 解决方案

（不完美，有点骇人听闻，但它有效）

将以下函数添加到您的 BaseController 然后从不需要身份验证的视图中调用，或者只是从您的**_Layout**视图中调用它。

注意：即使页面将正确呈现为匿名，**仍将返回 401 状态代码。**

```
[CustomAuthorize]
public ActionResult Auth() {
    return new EmptyResult();
} 
```

# asp.net-mvc - 实体框架 TPT 继承 在表之间移动数据

> ID：12091128
> 
> 赞同：0
> 
> 时间：2012-08-23T12:03:04.260
> 
> 标签：asp.net-mvc, entity-framework, table-per-type

我正在考虑将 TPT 继承与 EF 一起使用。我有以下表格。

库存位置 库存位置类型

StockLocationType 包含以下类型：

批量可选安全

我正在考虑使用 StockLocation 作为基表并创建一个大容量、可挑选且安全的表。在安全表中将有一个名为locked 的列，它将使位置锁定，因此没有人可以从中选择。

要将位置从可拾取切换到安全位置，我是否必须从可拾取表中删除数据并将其插入到安全表中，并在位置锁定时将锁定列设置为 true？然后在位置解锁后将其从安全表移回可拾取表？

还是每个表中都有重复记录？

似乎我在两个表之间不断地传递数据。

任何建议/建议都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:20:47.947

> 要将位置从可拾取切换到安全位置，我是否必须从可拾取表中删除数据并将其插入到安全表中，并在位置锁定时将锁定列设置为 true？

这不是继承的用例。一种实体是永久的。您不能更改 EF 中的实体类型（您可以通过直接在数据库中执行 SQL 来做到这一点，但这会破坏 EF 并且可能会产生意想不到的后果）。

> 还是每个表中都有重复记录？

这也很难实现，因为您只能在单个表中记录派生类型，否则 EF 将无法理解它是什么类型并引发错误。

> 似乎我在两个表之间不断地传递数据。

如果您的数据库是以这种方式设计的，您将必须传递数据，并且您必须在 EF 中使用正常的导航属性。

# javascript - Jquery复选框val数组？

> ID：12091135
> 
> 赞同：1
> 
> 时间：2012-08-23T12:03:38.027
> 
> 标签：javascript, jquery, checkbox

html

```
<td>
     <input type="checkbox" value="1" id="t1" checked="checked" class="filter" /><label
                for="t1">T1</label>
</td>
<td>
     <input type="checkbox" value="2" id="t2" checked="checked" class="filter" /><label
                for="t2">T2</label>
</td>
<td>
     <input type="checkbox" value="3" id="t3" checked="checked" class="filter" /><label
                for="t3">T3</label>
</td>
<td>
     <input type="checkbox" value="4" id="t4" checked="checked" class="filter" /><label
                for="t4">Toplam</label>
</td> 
```

脚本：

```
$(document).ready(function () {
    $(".filter").click(function () {
        drawChart();
    });
});

function drawChart()
{
    // I want to get checkboxes value here. 
    var filters = {$("#t1").val(),$("#t2").val(),$("#t3").val(),$("#t4").val()};
    var view = new google.visualization.DataView(new google.visualization.DataTable(evalledData, 0.5));
    view.setColumns([0, 4]); //here you set the columns you want to display
} 
```

我想获得像上面这样的复选框值，但我不知道正确的语法？或者我会将数组传递给drawChart。你能写出正确的语法来创建一个复选框值数组吗？

**编辑**

我想`view.setColumns([0, 4]);`使用复选框设置视图列。我的意思是我想使用`view.setColumns([array]);`而不是`view.setColumns([0, 4]);`

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:05:53.737

```
var myValues = $(".filter").map(function () {
    return this.value;
}).get();
console.log(myValues.join(",")); 
```

如果您只想要选中的：

```
var myValues = $(".filter:checked").map(function () {
    return this.value;
}).get();
console.log(myValues.join(",")); 
```

*   [http://api.jquery.com/map/](http://api.jquery.com/map/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T12:09:30.270

我假设按值，您实际上是指复选框是否被选中。（无论是否选中，复选框始终具有相同的值。）

要获取布尔值数组：

```
var filters = $('.filter').map(function(i, e){
  return $(e).is(':checked');
}).get(); 
```

# apache-flex - FlashBuilder：如何从 FileReference 对象获取文件位置？

> ID：12091139
> 
> 赞同：0
> 
> 时间：2012-08-23T12:03:46.443
> 
> 标签：apache-flex, flash-builder

如何使用 FileReference 对象浏览到文件并将文件位置发送到后端？我正在使用 flex 3.6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:08:41.340

出于安全目的；您无法在基于浏览器的应用程序中使用 FileReference 获取文件位置；你只能得到文件名。

# c# - 部署 ASP.NET“网站”后缺少 using 指令或程序集引用问题

> ID：12091141
> 
> 赞同：0
> 
> 时间：2012-08-23T12:03:58.203
> 
> 标签：c#, asp.net, visual-studio-2010, deployment, json.net

所以我有一个 ASP.NET 网站，它在我的机器上运行良好。但是当我将它部署在 Web 主机服务器上时，它给了我一个错误消息：

```
Compilation Error

Description: An error occurred during the compilation of a resource required to service this request. Please review the following specific error details and modify your source code appropriately. 

Compiler Error Message: CS0246: The type or namespace name 'Newtonsoft' could not be found (are you missing a using directive or an assembly reference?)

Source Error:

Line 15: using Microsoft.VisualBasic;
Line 16: using System.Data.SqlClient;
Line 17: using Newtonsoft.Json;
Line 18: using System.Globalization;
Line 19: using System.Text.RegularExpressions; 
```

我认为这是一个典型的错误，并且已经[有人问](https://stackoverflow.com/questions/11697479/type-or-namespace-name-newtonsoft-could-not-be-found)过类似的问题，即使我[以前](https://stackoverflow.com/questions/11446348/missing-a-using-directive-or-an-assembly-reference-error-upon-deploying-the-webs)也是如此。但是，所有解决方案要么不明确，要么不适用。

由于它是一个“网站”项目，因此 aspx.cs 文件的属性不包含任何字段，例如“构建操作”或“复制本地”等。我正在使用 Newtonsoft 解析 JSON。有人可以建议我逐步解决这个问题吗？

我遇到了诸如清理之类的解决方案。清洁什么？在我的解决方案资源管理器中，有一个 BIN 文件夹，其中包含 Newtonsoft 库的 dll、xml 和 pdb；使用 COPY WEBSITE 工具将其原样复制到 webhost 服务器。

我需要做什么来解决问题？谢谢一堆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-28T18:03:43.393

如果您不部署到应用程序根目录，而是部署到普通的 windows 文件夹，就会发生这种情况。

bin 文件夹必须位于您的应用程序根目录 ( `~/bin`) 中，才能正确解析程序集。您可以通过更改 web.config 文件中的私有探测路径来更改此设置，但这是一个糟糕的解决方案。

确保您将应用程序上传到配置为托管应用程序的文件夹。如果您有远程桌面访问权限，这可以在您的 IIS 管理器中完成。共享主机解决方案可以在基于 Web 的配置工具中提供此功能。登录您的“控制面板”并环顾四周。

或者您可以联系您的托管支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:37:20.647

采取这些步骤： -> 解决方案资源管理器窗口 -> 在 Visual Studio 中的 .cs 文件上用鼠标右键 -> 选择属性 -> 构建操作 = 编译

或者

删除您的 Newtonsoft 的引用并将 Newtonsoft.dll 复制到您的 bin 文件夹并从那里提供参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-26T16:16:58.477

建立您的网站并将其发布到某个文件夹。然后将所有必需的文件复制到您的 Web 服务器。只需检查 bin 文件夹（Web 服务器）中是否有 Newtonsoft dll。如果没有，则从本地计算机复制并粘贴到 Web 服务器。

# codeigniter - CodeIgniter 中的路由 + 分页 - 无法打开第一页

> ID：12091143
> 
> 赞同：0
> 
> 时间：2012-08-23T12:04:04.867
> 
> 标签：codeigniter, pagination

我定义了这条路线：

```
$route['search/(:any)/(:num)/(:num)/(:num)/(:num)'] = "home/results/$1/$2/$3/$4/$5"; 
```

和我在 results() 函数中的分页：

```
 $config['base_url'] = base_url().'/search/'.$data['keyword'].'/'.$data['1'].'/'.$data['2'].'/'.$data['3'].'/';
    $config['per_page'] = 10;
    $config['uri_segment']=6; 
```

它工作得很好，除了当我从任何下一页返回第一页时 - 找不到 url，因为当我在浏览器中输入时：

```
mysite.com/search/key/param1/param2/param3/0 (first page) -> works fine 
```

但是当我想从以下位置转到第一页时：

```
mysite.com/search/key/param1/param2/param3/10 (second page) => 
mysite.com/search/key/param1/param2/param3/ (fiest page - without "0" index at the end, pagination doesn't add it at the end) 
```

然后找不到网址

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:07:32.080

您必须添加多条路线才能工作：

```
$route['search/(:any)/(:num)/(:num)/(:num)/(:num)'] = "home/results/$1/$2/$3/$4/$5";
$route['search/(:any)/(:num)/(:num)/(:num)'] = "home/results/$1/$2/$3/$4/0";
$route['search/(:any)/(:num)/(:num)'] = "home/results/$1/$2/$3/0/0";
... 
```

我想你明白了

# jquery - 如何使用 jQuery 选择 $(this) AND $(this) > child？

> ID：12091145
> 
> 赞同：1
> 
> 时间：2012-08-23T12:04:11.827
> 
> 标签：jquery, jquery-selectors, this, css-selectors, parent-child

不能完全弄清楚这一点。如果我使用：

```
$('> .someClass', this); 
```

它会选择`this > .someClass`，但我想选择`this`AND`this > child`

试过了

```
 $(this+'> .someClass', this);
//AND
 var currentEl = $(this);
  $(currentEl, currentEl+'> .someClass') 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:12:06.130

采用`andSelf()`

```
$(this).find('> .someclass').andSelf(); 
```

[andSelf() 文档](http://api.jquery.com/andSelf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T12:12:22.797

您可以使用该[`.andSelf()`](http://api.jquery.com/andSelf/)函数添加`this`到匹配元素的集合中，如下所示：

```
$(this).find('> .someclass').andSelf(); 
```

# solr - 主从 solr 3.6 服务器的备份策略

> ID：12091150
> 
> 赞同：5
> 
> 时间：2012-08-23T12:04:24.410
> 
> 标签：solr, backup, replication

我们正在使用**solr 3.6 复制**和 2 个服务器 -**一个主服务器和一个从属**服务器 -我们目前正在寻找进行干净备份的方法。

[正如 wiki 所说](http://wiki.apache.org/solr/SolrReplication#HTTP_API)，我们可以使用 HTTP 命令来创建 master 的快照，如下所示：`http://myMasterHost/solr/replication?command=backup`

但是我们仍然有一些问题：

*   `backup`复制索引文件的经典 shell 脚本上的命令有什么好处？

*   该命令只备份索引；`spellchecker`文件夹也可以复制吗？需要吗？

*   我们可以在应用程序运行时创建快照，以便在有潜在的索引更新时创建快照吗？

*   当我们必须从备份中恢复服务器时，我们必须在从服务器上做什么？
    *   只需将快照复制到其索引文件夹中，然后删除`replication.properties`文件（或不删除）？
    *   通过 HTTP 命令请求 fetchindex `http://mySlave/solr/replication?command=fetchindex`？
    *   只是清空从属索引文件夹，以强制从主控进行完全复制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T08:04:28.283

您可以使用[ReplicationHandler](http://wiki.apache.org/solr/SolrReplication)`backup`提供的命令。这是一个异步操作，如果您的索引很大，则需要时间。这样你就不需要关闭 Solr。然后您会在索引目录中找到一个以备份日期命名的新目录。您还可以配置要保留多少旧备份。`backup.yyyymmddHHMMSS`

在那之后当然最好将备份移动到一个安全的位置，可能是另一台服务器。

我认为不可能备份拼写检查器，但不完全确定。

当然，该命令是在应用程序运行时运行的。唯一的问题是您可能会在备份中丢失您在开始备份后提交的文档。

您还可以查看 lucene CheckIndex 工具。备份索引后，您可以检查索引是否正常。

如果您在主服务器上已经有一个好的索引，我个人不会使用备份来恢复从服务器上的索引。索引的副本将使用标准复制过程自动进行（它实际上是索引段的副本），您不需要手动复制它们，除非备份包含比主副本更好的数据。

# facebook - Facebook 不正式支持 FB.JSON.parse 方法，并且很快将删除对它的访问。

> ID：12091151
> 
> 赞同：1
> 
> 时间：2012-08-23T12:04:27.940
> 
> 标签：facebook, actionscript-3, api

我的 Facebook 应用程序在 Chrome 上收到了这条警告消息。

Facebook 不正式支持 FB.JSON.parse 方法，并且很快将删除对它的访问。

和

Facebook 不正式支持 FB.JSON.stringify 方法，并且很快将删除对它的访问。

加载此闪光灯时，会出现此消息。我正在使用 Facebook Flash AS3 API 1.8.1、SWFObject 2.2。

这是什么意思 ？

在这里测试（facebook 测试）：[https ://apps.facebook.com/vuvuzelagame/](https://apps.facebook.com/vuvuzelagame/)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:58:00.720

我的申请也有同样的错误。

您可能知道，[Facebook AS3 API](http://code.google.com/p/facebook-actionscript-api/)调用 JavaScript 函数来与 FB 通信，正如 Baris 所说，这个错误是一个警告，它调用的那些 JS 函数之一已被弃用，很快就会被删除。

您暂时可以放心地忽略它。希望 API 将在函数实际被弃用之前更新，否则我们可能会得到一个破坏性错误，而不仅仅是一个警告。我将密切关注 API 的更新，并在发布代码后立即升级我的代码。

或者，如果你真的很勇敢，你可以去挖掘 API 源并自己解决问题：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T06:57:31.923

前几天，很多flash应用突然停止工作，如果你有这个问题，请按照以下步骤操作：

1.  如果您使用`GraphAPI_Web_1_8_1.swc`删除它

2.  从这里下载修改后的图形 API

3.  将这些文件夹粘贴到您的库中，如果您让 facebook 文件夹覆盖它

4.  发布您的项目

当 facebook 更改其文件时，这个问题就开始`http://connect.facebook.net/en_US/all.js`了，所有从 AS3 文件进行的调用都`FacebookJSBridge.as`必须`FB.JSON`从`JSON`.

（[来源](http://ederchrono.com/blog/2012/05/09/fixing-fb-graph-api-for-as3/)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T13:23:58.277

FB.JSON.stringify 是 javascript 函数还是 actionscript 函数？

在 flash 中，如果您的目标是 flash player 11 及更高版本，您可以只使用 JSON.parse 和 JSON.stringify，或者您可以使用 com.adobe.serialization 包中的 JSON 类。

如果那是一个 javascript 方法，只需从网上获取一个 json 库。

该错误仅意味着 facebook 不再支持/更新该功能，他们将删除它。它很快就会停止工作，因此您应该用其他东西替换它的用法。

# c# - 从具有多个参数的 C# 代码运行应用程序

> ID：12091152
> 
> 赞同：2
> 
> 时间：2012-08-23T12:04:30.367
> 
> 标签：c#, .net

我有以下要运行某些应用程序的参数列表。

```
 "C:\Release one" "My Manager" 321 
```

我知道我应该把它们归为`ProcessStartInfo` `Arguments`财产。

但是我该如何正确地编写它们，因为它们在字符串中有空格， " `My Manager"`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T12:11:32.040

尝试：

```
process.StartInfo.Arguments = "\"My Manager\" 321"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T12:07:18.493

用这个：

```
 System.Diagnostics.Process.Start("something.exe","arg_1"+"  "+"arg_2"+"  "+"arg_3"+"  "); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T12:09:15.630

您需要将它们放在那里，用引号括起来。

所以代码可能看起来像

```
Process.Start("myexe.exe","\"My stuff\" "+myarg); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T12:10:13.030

尝试...

```
"\"C:\\Release one\""
"\"My Manager\""
321 
```

我没有在您的特定情况下尝试过，但这是将双引号作为字符串的一部分包含在内的标准方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T12:11:30.737

转义 " 和 \

例子：

```
Process p = new Process();
p.StartInfo.FileName = "C:\\Release one";
p.StartInfo.Arguments = "\"My Manager\" 321";
p.Start(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-23T13:35:56.807

我正在使用这个方法来获取 CorrectaArgumentvalue

```
 public static string GetArgumentValue(string arg)
    {
        if (arg.Contains(" "))
            return string.Format("\"{0}\"", arg);
        return arg;
  } 
```

例子：

```
 process.StartInfo.Arguments = string.Format("{0} {1} {2}", GetArgumentValue(@"C:\Release one"), GetArgumentValue("My Manager"), 321); 
```

# forms - 在浏览器而不是 Lotus Notes 选项卡中显示表单的响应

> ID：12091153
> 
> 赞同：0
> 
> 时间：2012-08-23T12:04:31.230
> 
> 标签：forms, lotus-notes, html-email

这是我第一次使用 Lotus Notes 的电子邮件表单——如果答案太简单，请见谅。

我所做的是发送带有 FORM 的 HTML 邮件。通常，Notes 在新的浏览器窗口中打开此类电子邮件中的 URL - 但电子邮件表单（或者更确切地说是服务器的响应）是在新选项卡中打开的。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html charset=UTF-8" />
<title>Title</title>
</head>
<body style="width: 600px; padding: 20px; margin: 0px; font-family: Verdana, Arial, sans-serif; font-size: 12px">
...
<form action="http://server/url/" method="post" target="_blank">
...
<div style="margin-top: 30px; text-align: right; padding-bottom: 30px; border-bottom: 2px solid #CCCCCC">
<input type="submit" value="Send" />
</div>
</form>
</body>
</html> 
```

PS：Lotus 似乎忽略了是否设置了 target="_blank" 。

有什么建议么？我知道当它是您的 Notes 时，您可以修改程序的行为 - 但由于选项卡有时有其他连接设置（例如代理）而不是本地浏览器，我想“通过邮件”更改行为。

感谢您的建议！BurninLeo

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:43:35.893

不幸的是，浏览器行为不能由内容控制，需要在客户端进行设置。目标属性是您唯一可以更改的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:56:43.540

检查您的浏览器设置以及单击浏览器中的链接时会发生什么。如果它通常在新选项卡中打开，那么设置您的目标并没有什么不同，因为新选项卡就是目标。

在引入标签浏览之前，它总是会打开一个新窗口，但现在它只是打开一个新标签。

# gnuplot - 用条件绘制直方图

> ID：12091156
> 
> 赞同：2
> 
> 时间：2012-08-23T12:04:45.147
> 
> 标签：gnuplot, histogram

我正在尝试使用文件中的数据制作直方图，如下所示：

```
#Column 1   Column 2
#
0.0300      0.2126
1.0000e-4   0.0104
6.0000e-3   0.1299
1.0000e-4   8.0600e-3
1.0000e-4   0.0105
0.0190      0.2204
6.0000e-3   7.4900e-3
1.0000e-4   0.0952
6.0000e-3   7.4200e-3
1.0000e-4   0.0131
0.0190      0.3062
0.0190      0.2561
0.0300      0.9748
0.0300      0.9406
0.0300      0.0139
1.0000e-4   0.0281
0.0300      0.3625
1.0000e-4   0.0945
0.0300      0.5650
1.0000e-4   0.1045
6.0000e-3   0.2362
1.0000e-4   0.0180
1.0000e-4   0.1366
1.0000e-4   0.0195
0.0300      0.4652
0.0190      0.3505
0.0300      0.5146
0.0190      0.4319
6.0000e-3   0.2054
6.0000e-3   0.2377
0.0300      0.5281
1.0000e-4   0.1128
6.0000e-3   0.0623 
```

如果我使用代码：

```
n=20    #number of intervals
max=0.03 #max value
min=0    #min value
width=(max-min)/n        #interval width
hist(x,width)=width*floor(x/width)+width/2.0

plot 'data' u (hist(\$1,width)):(1.0) smooth freq w boxes lc rgb "blue" lt 1 lw 0.5 notitle 
```

我得到正确的直方图：

![正确的组织](../Images/e3a771f6e8bde48eff261077098c5aa8.png)

但如果我使用条件行：

```
plot 'data' u (hist((\$2<=0.5?\$1:1/0),width)):(1.0) smooth freq w boxes lc rgb "blue" lt 1 lw 0.5 notitle 
```

我明白了：

![历史错误](../Images/bca97b47c88e5717a541699af7ae7d46.png)

您可以看到`gnuplot`没有正确添加线条，而是将它们绘制为单独的列。

有没有什么办法解决这一问题？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T12:40:54.623

我怀疑这是 gnuplot 如何处理“丢失”数据的症状。关于缺失数据，以下实际上略有不同：

```
plot 'data' u 1:2 w lines    #connects lines across missing records
plot 'data' u 1:($2) w lines #doesn't connect lines when a missing record is encountered 
```

我怀疑您看到此设计决策的症状略有不同。

不幸的是，它使典型的 gnuplot 数据过滤器在这里毫无用处:-(。幸运的是，您的情况很容易进入`awk`：

```
plot "< awk '{if ($2 <= 0.5) {print $0}}' test.dat " u (hist($1,width)):(1.0) smooth freq w boxes lc rgb "blue" lt 1 lw 0.5 notitle 
```

现在 gnuplot 只看到您想要的数据（因为它没有看到任何 NaN 值，所以它不会创建任何新的计数器）。

# ios - iphone开发：nstimer调用函数

> ID：12091161
> 
> 赞同：0
> 
> 时间：2012-08-23T12:04:54.710
> 
> 标签：ios, cocoa-touch, function, nstimer, method-call

我有一个 void 函数，它只是`NSLog(@"Call me");`在它的身体里。

我每隔十​​秒钟就会在我的视图中调用它

```
NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:10 target:self selector:@selector(yourMethod) userInfo:nil repeats:YES]; 
```

但我希望它在 5 次迭代后停止它。然而它会走向无穷大。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:11:15.323

您应该使用一个计数器，每次调用您的方法时将其递增，计数为 5，然后使用下面的代码使您的计时器无效。

```
[timer invalidate]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T12:11:24.980

1) 保留一个全局变量，从 0 递增到 5。

```
 int i = 0; 
```

2）在你的定时器函数中增加这个变量..

```
-(void) yourFunction:(NSTimer*)timer{
  //do your action

  i++;
  if(i == 5){
     [timer invalidate];
  }
} 
```

3) 创建定时器时

```
NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:10 
                 target:self 
                 selector:@selector(yourMethod:) // <== see the ':', indicates your function takes an argument 
                 userInfo:nil 
                 repeats:YES]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T12:11:42.967

要从当前循环中销毁计时器，您应该调用`[timer invalidate];`

要确定五次出现，您需要维护一个变量并每次增加其计数。如果等于 5，则调用 invalidate 方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T12:11:50.237

首先你需要声明一个`int`并声明你的`NSTimer *timer`，所以我们可以阻止它：

```
@interface AppDelegate : UIViewController {
    int myInt;
    NSTimer *timer;
} 
```

要开始，`NSTimer`您只需要更改一些代码：

```
timer = [NSTimer scheduledTimerWithTimeInterval:10 target:self selector:@selector(yourMethod) userInfo:nil repeats:YES]; 
```

在您的 void 函数中，您可以进行验证以检查代码是否在 5 次迭代后运行：

```
- (void)myVoid{
    NSLog(@"Call Me");

    if (myInt == 5) {
        [timer invalidate];
        timer = nil;
    }

    myInt++;
} 
```

# javascript - 限制输入标签的格式

> ID：12091162
> 
> 赞同：1
> 
> 时间：2012-08-23T12:05:00.483
> 
> 标签：javascript, jquery, html

在`<input type="text" />`标签内，我如何屏蔽输入字段，以便将用户限制为以下格式`[].[]`，并且括号之间可以是任意数量的字符。

举个例子：

```
"[Analysis].[Analysis]" 
```

或另一个例子：

```
[Analysis-Result].[Analysis Result]" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:17:19.800

使用这个插件[http://digitalbush.com/projects/masked-input-plugin/#demo](http://digitalbush.com/projects/masked-input-plugin/#demo)

# javascript - 在 sharepoint 2010 webpart 中解析 json

> ID：12091165
> 
> 赞同：1
> 
> 时间：2012-08-23T12:05:09.280
> 
> 标签：javascript, ajax, json, sharepoint-2010, asp.net-ajax

所以我在php中做

```
$.ajax({
         url: 'parser.php',
         type: 'POST',
         data: 'Data=' + $.toJSON(schedule),
         success: function (res) {
                  alert(res);
         }
       }); 
```

即将到来的对象

```
stdClass object {
   weeks => array (1) (
     [0] => stdClass object {
       0 => stdClass object {}
       1 => stdClass object {}
       2 => stdClass object {}
       3 => stdClass object {}
       4 => stdClass object {}
       5 => stdClass object {}
       6 => stdClass object {}
       alltime => (int) 60
     }
   )
   alltime => (int) 60
   hours => (int) 60
} 
```

如何将 ajax 请求传递给 sharepoint 2010？
然后在服务器上进行解析。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T15:27:40.780

使用 .NET 4.0 非常容易做到这一点。从[JSON 的兴起](http://visitmix.com/writings/the-rise-of-json)：

```
WebClient webClient = new WebClient();
dynamic result = JsonValue.Parse(webClient.DownloadString(
    "https://api.foursquare.com/v2/users/self?oauth_token=XXXXXXX"));
Console.WriteLine(result.response.user.firstName); 
```

不幸的是，SharePoint 2010 构建在 .NET 3.5 之上，因此我们无法使用该代码。

相反，要调用 Web 服务，我们可以使用类似使用 C#[从 REST 服务获取数据中描述的代码：](http://devlicio.us/blogs/derik_whittaker/archive/2009/02/15/getting-data-from-a-rest-service-using-c.aspx)

```
public string GetMessage( string endPoint )
{
    HttpWebRequest request = CreateWebRequest( endPoint );

    using ( var response = (HttpWebResponse) request.GetResponse( ) )
    {
        var responseValue = string.Empty;

        if ( response.StatusCode != HttpStatusCode.OK )
        {
            string message = String.Format( "POST failed. Received HTTP {0}", 
                response.StatusCode );
            throw new ApplicationException( message );
        }

        // grab the response
        using ( var responseStream = response.GetResponseStream() )
        {
            using ( var reader = new StreamReader( responseStream ) )
            {
                responseValue = reader.ReadToEnd();
            }
        }

        return responseValue;
    }
} 
```

然后我们可以使用[JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)解析为 JSON 响应。

```
var serializer = new JavaScriptSerializer();
var result = serializer.DeserializeObject(response); 
```

JavaScriptSerializer 使用起来有点古怪。[如果你想要一些更优雅的东西，你可以使用像Json.NET](http://james.newtonking.com/projects/json-net.aspx)这样的第三方库来解析 JSON 响应。

```
JObject o = JObject.Parse(responseValue); 
```

我希望这有帮助，

# php - Facebook API，/me 中没有电子邮件字段

> ID：12091168
> 
> 赞同：0
> 
> 时间：2012-08-23T12:05:17.173
> 
> 标签：php, facebook

我正在使用 javascript + PHP

```
 <!DOCTYPE html>
<html xmlns:fb='http://www.facebook.com/2008/fbml'>
  <body>
        <fb:login-button scope='email,user_photos'></fb:login-button>
        <div id='fb-root' ></div>
                <script>
      window.fbAsyncInit = function() {
        FB.init({
          appId: '478449982166112',
          cookie: true,
          xfbml: true,
          oauth: true
        });
        FB.Event.subscribe('auth.login', function(response) {
          window.location.reload();
        });
        FB.Event.subscribe('auth.logout', function(response) {
          window.location.reload();
        });
      };
      (function() {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol +
          '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
      }());
    </script>.
      </body>
</html> 
```

如您所见，我正在请求电子邮件权限。

然后我从 PHP 调用 /me：

```
 $user = $facebook->getUser();

 if ($user) {
    try {
        // if user is logged on to facebook, the account details will be saved in $me variable
        $me = $facebook->api('/me');
    } catch (FacebookApiException $e) {
        // if user is not logged on to facebook, set $user to null . 
        $user = null;
    }
 } 
```

但它不包含电子邮件字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:17:21.540

您不是`email`在 PHP 中请求权限，而是在 Javascript 中请求权限。Javascript 在您的浏览器中运行，PHP 在服务器上运行。

要在 PHP 中生成登录 URL 并重定向到它，请尝试以下操作：

```
$user = $facebook->getUser();

if (!$user) {
    header('Location: ' . $facebook->getLoginUrl(array('scope' => 'email')));
    exit;
} else {
    try {
        // if user is logged on to facebook, the account details will be saved in $me variable
        $me = $facebook->api('/me');
    } catch (FacebookApiException $e) {
        // if user is not logged on to facebook, set $user to null . 
        $user = null;
    }
} 
```

# c - GTK+，结构中的 gchar 似乎已被释放

> ID：12091172
> 
> 赞同：2
> 
> 时间：2012-08-23T12:05:25.697
> 
> 标签：c, struct, gtk

在我的应用程序中，我有结构：

```
struct
{
  gchar *xen_srv_addr;
  gchar *xen_srv_usr;
  gchar *xen_srv_psw;
  gchar *xen_srv_prt;
} Xen_Server_Connection; 
```

我想为那个 gchars 分配一个值。我从文件中读取它，用 strtok 解析并以 char* 形式返回。设置解析器查找特定标记并：

```
if(a==b)
  {
    Xen_Server_Connection.xen_srv_addr=Parm_Pars(pattern, 2);
    .....
  } 
```

此分配仅在此 if 块内有效。gchar 之后就变成了垃圾。但如果我：

```
if(a==b)
  {
    Xen_Server_Connection.xen_srv_addr="192.168.1.1";
    .....
  } 
```

一切似乎都很好，我可以在全球范围内访问该 gchar。好像有什么不明白

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:08:24.083

您不了解`Parm_Pars()`函数对返回值的生命周期保证。它似乎不会永远存在，所以如果你想坚持下去，你需要复制它。

只需将该行包装在调用中`[g_strdup()](http://developer.gnome.org/glib/stable/glib-String-Utility-Functions.html#g-strdup)`以获取动态分配的副本，就可以了。当然，当你想释放你的`Xen_Server_Connection`，你必须调用`g_free()`所有重复的字符串，否则你会泄漏内存。

*更新*：混合普通`char`和`gchar`很好，glib 保证这`gchar`只是`char`. 我认为他们甚至建议（在某处）应用程序从不使用`gchar`.

# javascript - Javascript`this`对象==成员函数中的`window`

> ID：12091173
> 
> 赞同：3
> 
> 时间：2012-08-23T12:05:35.047
> 
> 标签：javascript

在我的一些 Javascript 对象中，我发现我的`this`指针是正确的 - 这些是`new Func()`-type 对象 - 在创建时，但在分配的方法中它可能是错误的。

```
function Confused() {
   console.log("checking",this==window,"is always false");
   this.method = function() {
       console.log("checking",this==window,"is true for some funcs but not others");
   };
}; 
```

在一些调用`(new Confused()).method()`- 它似乎已经失去了它的`this`指针。这种情况发生的时间似乎取决于函数，而不是随机的；它在代码中围绕我如何创建导致这种情况的类。

[在http://williame.github.com/barebones.js/](http://williame.github.com/barebones.js/)上有一个示例，有时调用成员回调时指针[`G3D._file_loaded`](https://github.com/williame/barebones.js/blob/d313f04dceba0b9c9125501661728e1908a2d026/g3d.js#L10)错误。`this`

为什么，我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T12:13:41.203

有 4 种方法可以在 Javascript 中使用函数，每种方法的作用都是改变其内容`this`：

*   函数调用：this = 全局对象（浏览器中的窗口）
*   方法调用：this = 调用它的对象。
*   构造函数调用： this = 您正在创建的新对象。
*   调用/应用调用：this = 您传递的对象。

在您的情况下`this == window`，当您直接调用函数（`Confused()`）但如果您使用 new（`new Confused()`）调用，那么它将是您正在创建的新对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T12:07:37.173

关键字是`this`指调用上下文。它永远*不会错*，但它可能不是你所期望的。

如果使用`.call`或调用函数，则可以在调用函数时手动设置上下文`.apply`。

此外，如果引用`window`是您想要的，为什么不使用`window`而不是`this`？这是访问窗口对象的一种更可靠的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T12:10:38.867

除了 David Hedlunds 的解释之外，您还可以像这样“解决”这个问题：

```
function Confused() {
   var that = this;
   console.log("checking",that==window,"is always false");
   this.method = function() {
       console.log("checking",that==window,"is always false");
   };
}; 
```

问题是实际调用您的函数的人可以控制您的函数的上下文。如果你不控制函数调用（也就是说，如果你不能修改代码），那么你就会坚持我给出的解决方案（至少我不知道其他方法）。

虽然该解决方案看起来有点“骇人听闻”，但如果你仔细想想，它确实不是。它只是利用闭包赋予你的力量：D

# java - MongoD JAVA 插入与更新并比较更改

> ID：12091177
> 
> 赞同：0
> 
> 时间：2012-08-23T12:05:39.820
> 
> 标签：java, mongodb, insert-update, mongo-java

我有大约 320 万条记录的大量集合，该集合数据每月更新一次，但源数据按原样获取，这意味着我不仅获得更新的记录，还获得所有内容。在性能方面，是简单地删除集合并插入所有内容，还是对每条记录进行更新更好？还有一种好方法可以将现有记录与从源读取的记录进行比较，以检查是否有任何变化？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:30:23.007

> 还有一种好方法可以将现有记录与从源读取的记录进行比较，以检查是否有任何变化？

您正在寻找变更检测系统：这是 ETL 系统通常描述的问题。我建议您阅读一些有关 ETL 过程的内容（Kimball 的[Datawarehouse ETL Toolkit](http://www.kimballgroup.com/html/booksDWET.html)是一个很好的来源）。一般来说，检测变化是一个难题，并且涉及使用快照来计算差异。如果您确定您的收藏将始终保留在 mongo 存储中，您可以查看是否有可能弄乱 mongo 日志。此外，请考虑更改检测与数据的结构和含义非常相关：例如，如果您有仅插入的集合，则可以通过以下方式获取更改的数据`_id`. 这个问题太复杂了，无法给出“做这个做那个，你会得到它”的答案；您必须分析您的数据并了解什么是更好的方法：参考文献以找到已知的解决方案并避免重新发明轮子。

> 在性能方面，是简单地删除集合并插入所有内容，还是对每条记录进行更新更好？

再一次，您必须知道数据的结构。如果您的集合比常量部分具有更多更改，则最好重新加载整个集合并避免跟踪更改。如果您的集合具有比整个集合小得多的变更集，则更新现有文档会导致更好的性能。

希望这可以帮助。

# http - 通过域套接字的 HTTP

> ID：12091179
> 
> 赞同：1
> 
> 时间：2012-08-23T12:05:49.143
> 
> 标签：http, sockets, unix-socket

我正在编写一些包含两个组件的桌面软件。组件 B 查询组件 A。原则上，创建 Web 服务似乎是进行 IPC 的理想方式。数据模型适合，有现成的客户端和服务器库，一种众所周知的编码和解码参数的方法等。

但是在网络套接字上设置 HTTP 服务器似乎不适用于本地应用程序。例如，我选择什么端口？我真的不希望人们能够从外部扫描并与应用程序交谈等。

所以我在想我也许可以通过域套接字执行 HTTP。这有任何意义吗？它有什么优先权吗？是否有可用于 IPC 的等效协议，它具有与 HTTP 相同的属性（对指定资源 (URI) 的请求、编码参数、响应）？

寻找 C 库（可能还有 Go 和 ObjC 以获得奖励积分）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T22:19:17.970

仅绑定到环回接口（127.0.0.1）可以解决您的“外部可见性”问题，只有本地计算机上的进程才能连接。

但是它并不能解决您的端口分配问题，您选择的端口号可能会在您的应用程序启动时被占用。然后您的服务器无法绑定，并且您的客户端连接到绑定到您的端口的另一个进程。

旧的，不那么时髦，但 CORBA 实现往往存在您尚未想到但尚未解决的问题。

# asp.net - 如何验证中继器控件上文本框的唯一条目？

> ID：12091183
> 
> 赞同：1
> 
> 时间：2012-08-23T12:05:54.117
> 
> 标签：asp.net, validation, repeater

我有一个转发器控件 rptbrand，其中有一个文本框 txtMultiBrand，并且在每次重复单击 btnAddBrand 按钮后，我想验证文本框中的唯一条目，这是我的 aspx 代码

```
<table width="100%">
    <asp:Repeater ID="rptBrand" runat="server" OnItemDataBound="rptBrandDetail_ItemDataBound">
        <ItemTemplate>
            <tr>
                <td align="right" `enter code here`width="150">
                    Brand<asp:Label ID="lblBrandNum" runat="server"></asp:Label>
                    <span class="msgred">*</span> :
                </td>
                <td align="left">
                    <table width="100%">
                        <tr>
                            <td align="left" width="20%">
                                <asp:TextBox ID="txtMultiBrand" CssClass="imageSearch" runat="server"></asp:TextBox>
                                <asp:RequiredFieldValidator ID="RequiredFieldValidator14" runat="server" ValidationGroup="VGrpMultiSave"
                                    ControlToValidate="txtMultiBrand" ErrorMessage="Brand Required" Display="none"
                                    SetFocusOnError="True"></asp:RequiredFieldValidator>
                                <asp:RequiredFieldValidator ID="RequiredFieldValidator11" runat="server" ValidationGroup="VGrpSave"
                                    ControlToValidate="txtMultiBrand" ErrorMessage="Brand Required" Display="none"
                                    SetFocusOnError="True"></asp:RequiredFieldValidator>
                            </td>
                            <td align="left">
                                <asp:ImageButton ID="btnDelete" runat="server" CausesValidation="false" CommandName="CmdDelete"
                                    CommandArgument='<%# Eval("SrNo") %>' ToolTip="Delete" ImageUrl="images/b_drop.png"
                                    OnCommand="rptBrand_Command" Width="16" Height="16" OnClientClick="javascript:return confirm('Are you sure you want to remove brand?')" />
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </ItemTemplate>
    </asp:Repeater>
    <tr>
        <td align="right" width="150">
        </td>
        <td>
            <asp:Button ID="btnAddBrand" runat="server" Text="Add more" ValidationGroup="VGrpMultiSave"
                OnClick="btnAddBrand_Click" />
            <asp:ValidationSummary ID="ValidationSummary2" runat="server" DisplayMode="List"
                ShowMessageBox="True" ShowSummary="False" ValidationGroup="VGrpMultiSave" />
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:50:02.737

使用 jQuery：

**这是工作**

检查以下链接：

[http://jsfiddle.net/NtF7h/](http://jsfiddle.net/NtF7h/)

```
 $(function () {
        $("#<%=btnAddBrand.ClientID%>").on("click", function (event) {
            var valueArray = new Array(); ;
            $("input[id*='txtMultiBrand']").each(function (index) {
                if ($.inArray($(this).val(), valueArray) == -1) {
                    valueArray[index] = $(this).val();
                }
                else {
                    alert("Duplicate Entry Found.");
                    event.preventDefault();
                    return false;
                }
            });
        });
    }); 
```

# dojo - dojo 自定义小部件不工作

> ID：12091184
> 
> 赞同：0
> 
> 时间：2012-08-23T12:05:54.613
> 
> 标签：dojo

我有以下用于自定义小部件的 Java 脚本类。但它不起作用。未调用任何函数。请帮助，无法进一步进行。

```
dojo.provide("FancyCounter");

dojo.require("dijit._Widget");
dojo.require("dojo.parser");

dojo.declare("FancyCounter",[dijit._Widget],
{
//counter
_i:0,

buildRendering: function()
{
    //create DOM
    this.domNode = dojo.create("button",{innerHTML:this._i});
},

postCreate: function()
{
    this.connect(this.domNode,"onClick","increment");

},

increment:function()
{
    //you need to update dom in order to refresh display i believe
    this.domNode.innerHTML = ++this._i;
},
});
dojo.ready(function(){
   dojo.parser.parse();
});

/////html code
<span data-dojo-type ="FancyCounter"></span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:15:40.580

改变

```
this.connect(this.domNode,"onClick","increment"); 
```

至

```
this.connect(this.domNode,"onclick","increment"); 
```

使用小写的“c”。您正在连接到 DOM 节点上的事件，请参阅[http://www.w3schools.com/jsref/dom_obj_event.asp](http://www.w3schools.com/jsref/dom_obj_event.asp)

# asp.net - signalR 第一个演示项目

> ID：12091190
> 
> 赞同：3
> 
> 时间：2012-08-23T12:06:09.887
> 
> 标签：asp.net, signalr, signalr-hub

我是 SignalR 的新手，我正在寻找一个在 Asp.net 而不是 mvc 中的示例应用程序，它可以执行实时通知，以便我可以开始工作。任何人都可以指导我找到一个工作示例，因为我已经下载了许多不起作用的示例

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T14:03:25.707

**请注意，此答案适用于 SignalR 版本 0.5.3，现在与最新版本的 SignalR 已过时**

设置自己的小Demo真的很简单。真的没什么。只需创建一个新项目，通过 NuGet 包管理器控制台安装 SignalR，然后执行最基本的操作以使其运行。

[我在我的网站http://timjames.me/creating-your-first-signalr-mvc-project](http://timjames.me/creating-your-first-signalr-mvc-project)上写了关于如何做的博客

**中心**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using SignalR;
using SignalR.Hubs;

namespace MySignalR
{
    public class SNRL : Hub
    {
        public void SendMessage(string msg)
        {
            Clients.sendMessage(msg);
        }
    }
} 
```

**Javascript**

```
<script>
    $(function () {
        var myHub = $.connection.sNRL;
        myHub.sendMessage = function (data) {
            $('#mySpanTag').html(data);
        };
        $.connection.hub.start({ transport: 'auto' }, function () {
            myHub.sendMessage("Hello World!");
        });
    });
</script> 
```

**html**

```
<span id="mySpanTag"></span> 
```

And make sure you reference the correct script files

```
<script src="~/Scripts/jquery-1.6.4.min.js"></script>
<script src="~/Scripts/jquery.signalR-0.5.3.min.js"></script>
<script src="/signalr/hubs"></script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T13:07:01.990

您是否尝试过从 NuGet 库下载 SignalR 示例？

# jquery - 在 Chrome 中加载某些 ajax URL 的 Fancybox 问题

> ID：12091191
> 
> 赞同：1
> 
> 时间：2012-08-23T12:06:11.197
> 
> 标签：jquery, google-chrome, fancybox

我在整个网站上使用 fancybox 没有问题，但我在 Chrome 中发现了一个奇怪的错误 - 某些 URL 将无法加载。

控制台记录以下错误：

```
GET https://xxxxxxx/advertise/stats/test.asp  jquery.min.js:18
f.support.ajax.f.ajaxTransport.send    jquery.min.js:18
f.extend.ajax                          jquery.min.js:18
_start                                 jquery.fancybox-1.3.4.js:243
$.fn.fancybox                          jquery.fancybox-1.3.4.js:819
f.event.handle                         jquery.min.js:17
f.event.add.i.handle.k                 jquery.min.js:16 
```

我已经签入了 Fiddler 并且上面的请求没有触发，所以它必须在发出请求之前失败。

奇怪的是，如果我将 stats/ 目录从广告/ 目录中移出并移至它加载的根目录。查看控制台日志：

```
XHR finished loading: "https://xxxxxxxx/stats/test.asp". jquery.min.js:18
f.support.ajax.f.ajaxTransport.send    jquery.min.js:18
f.extend.ajax                          jquery.min.js:18
_start                                 jquery.fancybox-1.3.4.js:243
$.fn.fancybox                          jquery.fancybox-1.3.4.js:819
f.event.handle                         jquery.min.js:17
f.event.add.i.handle.k                 jquery.min.js:16 
```

以上内容在一个精简的文件中进行了测试，其中包含运行 fancybox 所需的基本要素。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:30:56.277

我发现了问题。我安装了 AdBlock 插件，它不喜欢文件夹名称“广告”，因此阻止加载该文件夹中的任何内容。

# php - Ion Auth - 注销时出现“sess_destroy()”致命错误

> ID：12091200
> 
> 赞同：2
> 
> 时间：2012-08-23T12:06:40.500
> 
> 标签：php, codeigniter, ion-auth

我已经在 GitHub 上为 Codeigniter 下载了最新版本的 IonAuth。这是一个非常好的库，但是当我在登录后尝试注销时，我收到以下错误（我在以前的版本中遇到过） - 我知道我可以将这些行注释掉，但是有错误的原因吗？

```
Fatal error: Call to undefined method CI_Session::sess_destroy() ....\Ion_auth.php on line 381 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-01-30T12:21:01.923

我只是让他们评论出来..似乎wrk

# facebook - Facebook 实时更新：(#2200) 回调验证失败，代码 2200

> ID：12091202
> 
> 赞同：0
> 
> 时间：2012-08-23T12:06:44.850
> 
> 标签：facebook, facebook-graph-api, real-time-updates

我正在尝试从 facebook 获取我的应用程序的实时更新，如[https://developers.facebook.com/docs/reference/api/realtime/](https://developers.facebook.com/docs/reference/api/realtime/)中所述。*当它回到订阅验证*时，我现在正在苦苦挣扎。我已经建立了一个回调服务器，它接受 GET 和 POST 请求。我通过向它发出 curl 请求来验证服务器是否正常工作。

但是，当我尝试创建一个发出以下 POST 请求的订阅时，我仍然收到此错误

> {"error":{"message":"(#2200) 回调验证失败：","type":"OAuthException","code":2200}

根据我在文档和其他线程中阅读的内容，我假设这意味着对我的回调 URL 的单个 GET 请求失败。回调 url 确实没有被 GET 和 POST 请求请求。我想 facebook 以某种方式被阻止访问端点。但是，我可以使用身份验证对话框（https://developers.facebook.com/docs/reference/dialogs/oauth/）以用户身份进行身份验证，在该对话框中，我也在同一台服务器上传递了回调 url。服务器运行 http（目前）。

这是我用来发布订阅的 curl。主机文件有一个条目将 dev.minggler.com 重定向到 localhost =>( 127.0.0.1 dev.minggler.com)

```
curl -XPOST 'https://graph.facebook.com/256139341164822/subscriptions?callback_url=http%3A%2F%2Fdev.minggler.com%3A3000%2Ffacebook%2Frealtimeupdates&object=user&fields=friends&verify_token=abcd123&access_token=$MYTOKEN' 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:11:49.483

终于发现问题了。无法从外部访问服务器。解决它解决了问题

# javascript - 随主要内容滚动的侧边栏

> ID：12091203
> 
> 赞同：0
> 
> 时间：2012-08-23T12:06:48.937
> 
> 标签：javascript, css, twitter-bootstrap, positioning

如何实现一个侧边栏，它位于页面的某个位置，当用户向下滚动页面时，它会改变位置并随着主要内容滚动，始终保持可见？

这是一个[例子](http://twitter.github.com/bootstrap/components.html) （请向下滚动）

* * *

哦亲爱的！我只需要指定以下样式（这对我来说不太明显）：

```
.affix {
    position: fixed;
} 
```

当然，要添加 jQuery：

```
$('.leftnav').affix(); 
```

*非常感谢所有试图帮助我的人！*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:19:29.150

检查您链接到的页面的来源。该解决方案涉及在用户向下滚动时更改为固定位置，刚好足以使菜单的顶部边缘到达屏幕的顶部边缘（这是通过监听`scroll`事件来完成的）。最初（提供页面时）菜单没有固定位置。

编辑：或者更好...这里的脚本可以做到这一点[http://twitter.github.com/bootstrap/javascript.html#affix](http://twitter.github.com/bootstrap/javascript.html#affix) ;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T12:22:55.187

尝试`position: fixed`：

> [http://jsfiddle.net/FlameTrap/mfyAc/](http://jsfiddle.net/FlameTrap/mfyAc/)

****编辑****

试试这个：

> [http://jsfiddle.net/FlameTrap/Wqb3g/1/](http://jsfiddle.net/FlameTrap/Wqb3g/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T12:19:33.377

您需要监听每个滚动事件，并在滚动时更改元素的位置，或者更改为`fixed`阈值之后，或者不断更新：

```
var newPos = Math.max( startPosition, scrollTop + scrollOffset) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T12:22:54.343

你看起来像这样吗

## [看演示](http://jsfiddle.net/KF29z/)

**JS代码：**

```
 var ns = (navigator.appName.indexOf("Netscape") != -1);
        var d = document;
        function JSFX_FloatDiv(id, sx, sy)
        {
            var el=d.getElementById?d.getElementById(id):d.all?d.all[id]:d.layers[id];
            var px = document.layers ? "" : "px";
            window[id + "_obj"] = el;
            if(d.layers)el.style=el;
            el.cx = el.sx = sx;el.cy = el.sy = sy;
            el.sP=function(x,y){this.style.left=x+px;this.style.top=y+px;};

            el.floatIt=function()
            {
                var pX, pY;
                pX = (this.sx >= 0) ? 0 : ns ? innerWidth : 
                document.documentElement && document.documentElement.clientWidth ? 
                document.documentElement.clientWidth : document.body.clientWidth;
                pY = ns ? pageYOffset : document.documentElement && document.documentElement.scrollTop ? 
                document.documentElement.scrollTop : document.body.scrollTop;
                if(this.sy<0) 
                pY += ns ? innerHeight : document.documentElement && document.documentElement.clientHeight ? 
                document.documentElement.clientHeight : document.body.clientHeight;
                this.cx += (pX + this.sx - this.cx)/8;this.cy += (pY + this.sy - this.cy)/8;
                this.sP(this.cx, this.cy);
                setTimeout(this.id + "_obj.floatIt()", 40);
            }
            return el;
        } 
```

**HTML：**

```
<div id="main">
    <div id="divTopLeft" style="position:absolute">
        <script>JSFX_FloatDiv("divTopLeft", 10,30).floatIt();</script>
        <ul>
            <li id="img1">Image 1</li>
            <li id="img2">Image 2</li>
            <li id="img3">Image 3</li>
            <li id="img4">Image 4</li>
        </ul>
    </div>
</div> 
```

**CSS：**

```
 #main {
        width: 1280px;
        height:720px;
        background: url(http://www.designworks.com.pk/example/background/images/1.jpg) left top no-repeat;
        margin: 0;
        position:relative;
        z-index:2;
    }
    ul { margin:20px; display:inline-block; }
    ul li { cursor:pointer; list-style-type: none; color: #fff; background:#000; border:1px solid #fff; font-size:16px; font-weight: bold; padding: 5px; margin:2px 0 0 0;  }
    ul li#img1 { background:#F90; } 
```

# php - 从 PHP 脚本调用 python 脚本

> ID：12091204
> 
> 赞同：1
> 
> 时间：2012-08-23T12:06:48.510
> 
> 标签：php, python

我已经编写了一个 python 脚本 (mail.py) 来在 python 中发送电子邮件，并且我已经编写了另一个文件来提交操作。我需要该文件`mail.py`应该在后台运行。当我编写以下代码时

```
$result=shell_exec('python mail.py&');
                echo $result; 
```

然后没有响应但是当我运行文件时`python mail.py &`它运行成功

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:21:50.987

您必须设置 python 解释器的完整路径，例如：

```
 shell_exec('/usr/bin/python mail.py &'); 
```

# c# - WCF CustomBing 异常 - AddressingNone 不支持添加 WS-Addressing 标头

> ID：12091206
> 
> 赞同：0
> 
> 时间：2012-08-23T12:07:01.620
> 
> 标签：c#, wcf, custom-binding

当我使用实用创建的 CustomBinding 时，我不断收到以下异常。

**寻址版本“AddressingNone (http://schemas.microsoft.com/ws/2005/05/addressing/none)”不支持添加 WS-Addressing 标头。**

有没有办法解决这个问题？

```
private static CustomBinding CreateCustomBinding(bool useHttps)
{
    BindingElement security;
    BindingElement transport;
    if (useHttps)
    {
        security = SecurityBindingElement.CreateSecureConversationBindingElement(
            SecurityBindingElement.CreateUserNameOverTransportBindingElement());
        transport = new HttpsTransportBindingElement
        {
            MaxBufferPoolSize = 2147483647,
            MaxBufferSize = 2147483647,
            MaxReceivedMessageSize = 2147483647,
        };
    }
    else
    {
        security = SecurityBindingElement.CreateSecureConversationBindingElement(
            SecurityBindingElement.CreateUserNameForSslBindingElement(true));
        transport = new HttpTransportBindingElement
        {
            MaxBufferPoolSize = 2147483647,
            MaxBufferSize = 2147483647,
            MaxReceivedMessageSize = 2147483647,
        };
    }

    var encoding = new MtomMessageEncodingBindingElement
    {
        MaxReadPoolSize = 64,
        MaxWritePoolSize = 16,
        MaxBufferSize = 2147483647,
        MessageVersion = MessageVersion.Soap11,
        WriteEncoding = System.Text.Encoding.UTF8
    };

    //var encoding = new TextMessageEncodingBindingElement();

    var customBinding = new CustomBinding();

    customBinding.Elements.Add(security);
    customBinding.Elements.Add(encoding);
    customBinding.Elements.Add(transport);

    return customBinding;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T00:19:03.227

以防万一有人感兴趣，下面是我的解决方案。我添加了一个`if`用于处理文本编码部分并更新了`SecurityBindingElement`以下内容`if (useHttps)`：

```
private static CustomBinding CreateCustomBinding(bool useHttps, bool textEncoding)
{
    BindingElement security;
    BindingElement encoding;
    BindingElement transport;
    if (useHttps)
    {
        var seq = SecurityBindingElement.CreateUserNameOverTransportBindingElement();
        seq.MessageSecurityVersion =
            MessageSecurityVersion.
                WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10;
        seq.SecurityHeaderLayout = SecurityHeaderLayout.Lax;
        seq.DefaultAlgorithmSuite = SecurityAlgorithmSuite.Default;

        security = seq;
        transport = new HttpsTransportBindingElement
        {
            MaxBufferPoolSize = 2147483647,
            MaxBufferSize = 2147483647,
            MaxReceivedMessageSize = 2147483647,
        };
    }
    else
    {
        security = SecurityBindingElement.CreateUserNameOverTransportBindingElement();
        transport = new HttpTransportBindingElement
        {
            MaxBufferPoolSize = 2147483647,
            MaxBufferSize = 2147483647,
            MaxReceivedMessageSize = 2147483647,
        };
    }

    if (textEncoding)
        encoding = new TextMessageEncodingBindingElement
        {
            MaxReadPoolSize = 64,
            MaxWritePoolSize = 16,
            MessageVersion = MessageVersion.Soap11,
            WriteEncoding = System.Text.Encoding.UTF8
        };
    else
        encoding = new MtomMessageEncodingBindingElement
        {
            MaxReadPoolSize = 64,
            MaxWritePoolSize = 16,
            MaxBufferSize = 2147483647,
            MessageVersion = MessageVersion.Soap11,
            WriteEncoding = System.Text.Encoding.UTF8
        };

    var customBinding = new CustomBinding();

    customBinding.Elements.Add(security);
    customBinding.Elements.Add(encoding);
    customBinding.Elements.Add(transport);

    return customBinding;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T20:35:17.720

它对我有用，只需进行一些小改动。谢谢塔瓦尼。只是我为 HTTPSTransportBinidingElement 将 AuthenticationSheme 设置为 Basic。

```
transport = new HttpsTransportBindingElement
            {
                MaxBufferPoolSize = 2147483647,
                MaxBufferSize = 2147483647,
                MaxReceivedMessageSize = 2147483647,
                AuthenticationScheme = System.Net.AuthenticationSchemes.Basic
            }; 
```

# javascript - “查询”是 MongoDB 中的保留名称吗？

> ID：12091208
> 
> 赞同：4
> 
> 时间：2012-08-23T12:07:08.973
> 
> 标签：javascript, mongodb

当我尝试将其`query`用作引用字段的键名时，我遇到了 MongoDB v2.0.7 的这种奇怪行为。

如果我插入带有名为 的引用字段的记录`query`，MongoDB 将无法检索该对象：

```
> db.item.insert({query: {$ref: "query", $id: ObjectId("50361887352fc04c86af4c10")}})
> db.item.find({query: {$ref: "query", $id: ObjectId("50361887352fc04c86af4c10")}})
> 
```

但是，如果我将字段名称更改为`query_`，一切都很好：

```
> db.item.insert({query_: {$ref: "query", $id: ObjectId("50361887352fc04c86af4c10")}})
> db.item.find({query_: {$ref: "query", $id: ObjectId("50361887352fc04c86af4c10")}})
{ "_id" : ObjectId("503619f0dd2290f4bb17a275"), "query_" : { "$ref" : "query", "$id" : ObjectId("50361887352fc04c86af4c10") } } 
```

如果该字段有一个简单的非复合值也可以：

```
> db.item.insert({query: ObjectId("50361887352fc04c86af4c10")})
> db.item.find({query: ObjectId("50361887352fc04c86af4c10")})
{ "_id" : ObjectId("50361b44dd2290f4bb17a276"), "query" : ObjectId("50361887352fc04c86af4c10") } 
```

我错过了什么，还是这是一个 MongoDB 错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:13:07.933

我认为有未记录的保留字段名称。我遇到[了同样的问题](https://jira.mongodb.org/browse/SERVER-6078)。

# visual-studio-2012 - 如何在 VS 2012 中启用 CSS 编辑器功能？

> ID：12091209
> 
> 赞同：0
> 
> 时间：2012-08-23T12:07:10.133
> 
> 标签：visual-studio-2012, css-editor

我似乎错过了 VS 2012 RC 中所有很酷的 CSS 编辑器功能。例如，颜色选择器。是因为我使用的是评估版吗？还是有一个开关可以在版本中打开它们？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T16:47:32.060

您需要“工具 > 扩展和更新 > 在线 > Visual Studio 库”中的“Web Essentials 2012”扩展。将需要重新启动 VS2012。

希望能帮助到你！

# ios - 了解 NSRunLoop

> ID：12091212
> 
> 赞同：120
> 
> 时间：2012-08-23T12:07:15.243
> 
> 标签：ios, objective-c, cocoa-touch, nsrunloop

谁能解释一下是什么`NSRunLoop`？所以据我所知`NSRunLoop`，与`NSThread`权利有关吗？所以假设我创建了一个像

```
NSThread* th=[[NSThread alloc] initWithTarget:self selector:@selector(someMethod) object:nil];
[th start];

-(void) someMethod
{
    NSLog(@"operation");
} 
```

那么在这个线程完成他的工作之后呢？为什么使用`RunLoops`或在哪里使用？从Apple docs我读过一些东西，但对我来说不清楚，所以请尽可能简单地解释

* * *

## 回答 #1

> 赞同：224
> 
> 时间：2012-08-23T13:00:33.323

A run loop is an abstraction that (among other things) provides a mechanism to handle system input sources (sockets, ports, files, keyboard, mouse, timers, etc).

Each NSThread has its own run loop, which can be accessed via the currentRunLoop method.

In general, you do not need to access the run loop directly, though there are some (networking) components that may allow you to specify which run loop they will use for I/O processing.

A run loop for a given thread will wait until one or more of its input sources has some data or event, then fire the appropriate input handler(s) to process each input source that is "ready.".

After doing so, it will then return to its loop, processing input from various sources, and "sleeping" if there is no work to do.

That's a pretty high level description (trying to avoid too many details).

**EDIT**

An attempt to address the comment. I broke it into pieces.

> *   it means that i can only access/run to run loop inside the thread right?

Indeed. NSRunLoop is not thread safe, and should only be accessed from the context of the thread that is running the loop.

> *   is there any simple example how to add event to run loop?

If you want to monitor a port, you would just add that port to the run loop, and then the run loop would watch that port for activity.

```
- (void)addPort:(NSPort *)aPort forMode:(NSString *)mode 
```

You can also add a timer explicitly with

```
- (void)addTimer:(NSTimer *)aTimer forMode:(NSString *)mode 
```

> *   what means it will then return to its loop?

The run loop will process all ready events each iteration (according to its mode). You will need to look at the documentation to discover about run modes, as that's a bit beyond the scope of a general answer.

> *   is run loop inactive when i start the thread?

In most applications, the main run loop will run automatically. However, you are responsible for starting the run loop and responding to incoming events for threads you spin.

> *   is it possible to add some events to Thread run loop outside the thread?

I am not sure what you mean here. You don't add events to the run loop. You add input sources and timer sources (from the thread that owns the run loop). The run loop then watches them for activity. You can, of course, provide data input from other threads and processes, but input will be processed by the run loop that is monitoring those sources on the thread that is running the run loop.

> *   does it mean that sometimes i can use run loop to block thread for a time

Indeed. In fact, a run loop will "stay" in an event handler until that event handler has returned. You can see this in any app simply enough. Install a handler for any IO action (e.g., button press) that sleeps. You will block the main run loop (and the whole UI) until that method completes.

The same applies to any run loop.

I suggest you read the following documentation on run loops:

[https://developer.apple.com/documentation/foundation/nsrunloop](https://developer.apple.com/documentation/foundation/nsrunloop)

and how they are used within threads:

[https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html#//apple_ref/doc/uid/10000057i-CH16-SW1](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html#//apple_ref/doc/uid/10000057i-CH16-SW1)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-08-04T20:25:09.953

> 运行循环*将* **交互式**应用程序与 **命令行**工具区分开来。
> 
> *   命令行工具使用参数启动，执行它们的命令，然后退出。
> *   交互式应用程序**等待**用户输入、做出反应，然后继续等待。
> 
> [从[这里](http://bou.io/RunRunLoopRun.html)]

它们允许你等到用户点击并做出相应的响应，等到你得到一个completionHandler并应用它的结果，等到你得到一个计时器并执行一个功能。如果你没有运行循环，那么你不能监听/等待用户点击，你不能等到网络调用发生，你不能在 x 分钟内被唤醒，除非你使用`DispatchSourceTimer`或`DispatchWorkItem`

同样来自[此评论](https://stackoverflow.com/questions/45463996/how-does-urlsessiontask-run/45464390#comment77989568_45464390)：

> 后台线程没有自己的运行循环，但您可以添加一个。例如， [AFNetworking 2.x](https://github.com/AFNetworking/AFNetworking/blob/2.x/AFNetworking/AFURLConnectionOperation.m#L157)做到了。对于后台线程上的 NSURLConnection 或 NSTimer 来说，这是经过验证的真正技术，但我们自己不再这样做了，因为更新的 API 消除了这样做的需要。但似乎 URLSession 确实如此，例如，[这里是简单的请求](https://i.imgur.com/b3DYLTJ.png)，在主队列上运行 [参见图像的左侧面板] 完成处理程序，您可以看到它在后台线程上有一个运行循环

* * *

具体来说：“后台线程没有自己的运行循环”。以下计时器无法为**异步**调度触发：

```
class T {
    var timer: Timer?

    func fireWithoutAnyQueue() {
        timer = Timer.scheduledTimer(withTimeInterval: 1, repeats: false, block: { _ in
            print("without any queue") // success. It's being ran on main thread, since playgrounds begin running from main thread
        })
    }

    func fireFromQueueAsnyc() {
        let queue = DispatchQueue(label: "whatever")
        queue.async {
            self.timer = Timer.scheduledTimer(withTimeInterval: 1, repeats: false, block: { (_) in
                print("from a queue — async") // failed to print
            })
        }
    }

    func fireFromQueueSnyc() {
        let queue = DispatchQueue(label: "whatever")
        queue.sync {
            timer = Timer.scheduledTimer(withTimeInterval: 1, repeats: false, block: { (_) in
                print("from a queue — sync") // success. Weird. Read my possible explanation below
            })
        }
    }

    func fireFromMain() {
        DispatchQueue.main.async {
            self.timer = Timer.scheduledTimer(withTimeInterval: 1, repeats: false, block: { (_) in
                print("from main queue — sync") //success
            })
        }
    }
} 
```

我认为该`sync`块也运行的原因是：

*同步*块通常只是从其*源*队列中执行。在这个例子中，源队列是主队列，*无论*是什么队列都是目标队列。

为了测试我`RunLoop.current`在每个调度中都登录了。

同步调度与主队列具有**相同的运行循环。**而异步块中的 RunLoop 是与其他实例不同的实例。你可能会想为什么会`RunLoop.current`返回不同的值。不就是*共同*的价值吗！？好问题！进一步阅读：

**重要的提示：**

类**属性** [`current`](https://developer.apple.com/documentation/foundation/runloop/1412291-current)不是全局变量。

> 返回**当前**线程的运行循环。

这是上下文的。它仅在线程范围内可见，即[Thread-local storage](https://en.wikipedia.org/wiki/Thread-local_storage)。有关更多信息，请参见[此处](https://stackoverflow.com/questions/35692188/what-is-thread-local-storage-why-we-need-it)。

这是计时器的一个已知问题。如果你使用，你没有同样的问题`DispatchSourceTimer`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-10-14T09:30:54.617

**RunLoops 有点像一个刚刚发生事情的盒子。**

基本上，在一个 RunLoop 中，你去处理一些事件然后返回。或者如果在超时之前没有处理任何事件，则返回。您可以说它类似于异步 NSURLConnections，在后台处理数据而不会干扰您当前的循环，但同时，您需要同步数据。这可以在 RunLoop 的帮助下完成，它使您的异步`NSURLConnection`并在调用时提供数据。您可以像这样使用 RunLoop：

```
NSDate *loopUntil = [NSDate dateWithTimeIntervalSinceNow:0.1];

while (YourBoolFlag && [[NSRunLoop currentRunLoop] runMode: NSDefaultRunLoopMode beforeDate:loopUntil]) {
    loopUntil = [NSDate dateWithTimeIntervalSinceNow:0.1];
} 
```

在此 RunLoop 中，它将一直运行，直到您完成一些其他工作并将**YourBoolFlag**设置为**false**。

**同样，您可以在线程中使用它们。**

希望这对您有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-25T01:50:26.953

> 运行循环是与线程相关的基础架构的一部分。运行循环是一个事件处理循环，用于安排工作和协调接收传入事件。运行循环的目的是在有工作要做时让你的线程保持忙碌，并在没有工作时让你的线程进入睡眠状态。

[从这里](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html#//apple_ref/doc/uid/10000057i-CH16-SW1)

* * *

> CFRunLoop 最重要的特性是 CFRunLoopModes。CFRunLoop 与“运行循环源”系统一起工作。源在一个或多个模式的运行循环上注册，并且运行循环本身在给定模式下运行。当事件到达源时，只有源模式与运行循环当前模式匹配时才会由运行循环处理。

[从这里](https://bou.io/RunRunLoopRun.html#fnref:6)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-20T01:55:18.467

```
Swift
let runLoop = RunLoop.current

Obj-c
NSRunLoop * runloop = [NSRunLoop currentRunLoop]; 
```

运行循环是一个事件处理循环，用于持续监控和处理输入事件，并将其分配给相应的目标进行处理。

# gwt - 无法在 Eclipse 中安装 GWT 插件

> ID：12091217
> 
> 赞同：1
> 
> 时间：2012-08-23T12:07:22.737
> 
> 标签：gwt, eclipse-plugin

我在 windows xp 平台上使用 eclipse 3.7 版本。我想为它安装 GWT 插件，所以我尝试下面的 url 来安装插件。 [http://dl.google.com/eclipse/plugin/3.6](http://dl.google.com/eclipse/plugin/3.6)

我选中了建议列表中的三个框。1\. eclipse 的 Google 插件 2\. Google App Engine Java SDK 1.7 3\. Google Web Tool kit 2.4

我还检查了安装过程中联系所有更新站点的问题。但它没有安装 GWT 插件并给我以下错误。

```
An error occurred while collecting items to be installed
session context was:(profile=SDKProfile, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
Problems downloading artifact: osgi.bundle,com.google.gwt.eclipse.sdkbundle,2.4.0.v201208080120-rel-r37.
MD5 hash is not as expected. Expected: 4377ba085a0089b1641d9c989f4bd0cc and found 4cacae71d159d6c14fe5b09f04b2ec16.
Problems downloading artifact: osgi.bundle,com.google.appengine.eclipse.sdkbundle,1.7.0.
MD5 hash is not as expected. Expected: 1ba46f6b6c57b36904abecef6ae99cba and found f142767a855d57c150e2383afd1c342e. 
```

我不知道问题出在哪里。我也尝试了 eclipse 3.6，但同样的问题也出现在那个版本中。请帮帮我。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:02:00.370

从这个错误来看，你可能有一个本地失败。尝试重新启动 Eclipse 并再次安装此插件。但总的来说，为避免此类麻烦，我建议您从[存档文件](https://developers.google.com/eclipse/docs/install-from-zip)手动安装任何 Eclipse 插件。

# python - Linux/Windows 中的 os.path.join(os.path.dirname(__file__), 'data') 在哪里？

> ID：12091219
> 
> 赞同：5
> 
> 时间：2012-08-23T12:07:29.077
> 
> 标签：python

以下代码根据不同的操作系统创建的文件夹在哪里？

```
data_dir = os.path.join(os.path.dirname(__file__), 'data')
if not os.path.exists(data_dir):
    import generate_data
    os.mkdir(data_dir) 
```

是 '/path/to/file/data' 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T12:12:31.143

`__file__`是包含代码的文件正在运行的完整路径；所以它将成为执行包含代码段的文件的目录。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T12:14:17.523

`os.path.dirname`为您提供其参数所在的目录，`os.path.join`并将文件或目录附加到给定目录。

`os.path`为您提供了一种与平台无关的方式来修改文件和目录路径，使用适当类型的斜杠。

所以是的，这将在与运行此代码的源文件相同的目录中创建一个“数据”目录（如果它不存在）。

# oauth - OAuth 和 OauthLite 的区别

> ID：12091221
> 
> 赞同：0
> 
> 时间：2012-08-23T12:07:35.253
> 
> 标签：oauth, oauth-2.0

我是 OAuth 的初学者 - 所以我想知道 Oauth 和 Oauth Lite 有什么区别

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T21:06:42.363

[OAuth](http://en.wikipedia.org/wiki/OAuth)是一种授权协议。

[OAuth::Lite](https://github.com/lyokato/p5-oauth-lite)是一个实现 OAuth 1.0 协议的 perl 库。如果您开发一个应该提供 OAuth 授权的 Web 服务，或者如果您开发一个应该连接到某个 OAuth 提供程序的 perl 应用程序，您可以使用这个库。

对于 OAuth 2.0，分别有[OAuth::Lite2](https://github.com/lyokato/p5-oauth-lite2)库。

# java - 如何将索引属性绑定到 jface 查看器

> ID：12091223
> 
> 赞同：0
> 
> 时间：2012-08-23T12:07:36.087
> 
> 标签：java, data-binding, jface, indexed-properties

我想将索引属性绑定到 JFace ComboViewer。

假设我有一个这样的 DataModel 类：

```
class DataModel {
   private String[] props = {"A","B","C"};
   private PropertyChangeSupport pcs = new PropertyChangeSupport(this);

   public String getProperties( int idx ){
      return props[idx];
   }

   public void setProperties( int idx, String value ){
      String oldVal = props[idx];
      props[idx] = value;
      pcs.fireIndexedPropertyChange( "properties", idx, oldVal, value );
   }

   // code to add/remove PropertyChangeListener
   // ...
} 
```

简单属性的数据绑定代码如下所示：

```
DataModel dataModel = ...
ComboViewer propertyChoice = ...

DataBindingContext ctx = new DataBindingContext();

IObservableValue target = ViewerProperties.singleSelection().observe( propertyChoice );
IObservableValue model = BeanProperties.value( DataModel.class, "properties" ).observe(dataModel);
ctx.bindValue( target, model ); 
```

但是对于索引属性，我必须通知 ctx 哪个索引是我要绑定的值。我努力了

```
IObservableValue model = BeanProperties.value( DataModel.class, "properties[0]" ).observe(dataModel); 
```

但它不起作用。

是否可以绑定索引属性而不是简单属性？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:07:41.017

不幸的是，这似乎不受支持。我一直在寻找完全相同的功能。BeanProperties 中没有说明它受支持的文档。

查看 BeanProperties.value 的实现时，您会发现它委托给 BeanPropertyHelper 来读取和写入属性。该方法`Object readProperty(Object source, PropertyDescriptor propertyDescriptor)`不知道子类 IndexedPropertyDescriptor。当为索引属性调用它时，readProperty 会尝试使用读取整个数组的读取方法。我认为这种方法对于索引属性是可选的。对于索引属性，它应该使用 IndexedPropertyDescriptor.getIndexedReadMethod()。

根据您的用例，您可以使用 BeanProperties.list 解决该问题。但是，您不能将其与索引属性结合使用。我通过添加一个返回整个数组但仍保留执行“fireIndexedPropertyChange”的方法来尝试此操作。不幸的是，这给出了 ClassCastException：Eclipse 的 BeanListProperty 似乎假设更改事件中的值是一个数组或列表。但是，对于索引属性，它是数组的单个元素。

或者也许您可以使用可观察的地图？

# mysql - 在一个查询中动态排序

> ID：12091226
> 
> 赞同：2
> 
> 时间：2012-08-23T12:07:39.693
> 
> 标签：mysql, sql

我正在构建一个根据一组 ORDER BY 指令提取值的查询

```
SELECT * from values ORDER BY displayOrder, actualValue, field(key, 'A', 'B', 'C') 
```

所以这可能会返回：

```
name        productType       displayOrder      actualValue       key
object_a    X                 1                 1.2               A
object_b    Z                 1                 1.2               C
object_c    Z                 1                 1.6               B
object_d    X                 1                 1.8               B 
```

但是，如果 productType = Z，我想切换 ORDER BY actualValue 和 field(key) 以生成以下内容：

```
name        productType       displayOrder      actualValue       key
object_a    X                 1                 1.2               A
object_c    Z                 1                 1.6               B
object_b    Z                 1                 1.2               C
object_d    X                 1                 1.8               B 
```

这有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:15:52.177

尝试这个：

```
SELECT *
FROM values
ORDER BY
    displayOrder
,   CASE WHEN productType <> Z THEN actualValue ELSE 0.0 END
,   CASE WHEN productType <> Z THEN field(key, 'A', 'B', 'C') ELSE 0 END
,   CASE WHEN productType = Z THEN field(key, 'A', 'B', 'C') ELSE 0 END
,   CASE WHEN productType = Z THEN actualValue ELSE 0.0 END 
```

这个想法是将您的`order by`表达式按两种顺序排列，但每行只使用其中一个。

# android - 无法让 shouldOverrideUrlLoading 在 Android 应用程序中工作

> ID：12091230
> 
> 赞同：1
> 
> 时间：2012-08-23T12:07:53.570
> 
> 标签：android, url, webview, mailto

我制作了一个基于`WebView`. 我想将除域之外的所有链接`myWebView.loadUrl()`指向浏览器，而不是在`WebView`. 我想直接`mailto://`链接到用户的邮件程序。

我已经尝试了几个我发现使用的例子，`shouldOverrideUrlLoading()`但每次我都遇到错误或者它不起作用。我完全是个菜鸟，无法理解，更不用说纠正错误了——我的能力仅限于复制和粘贴。

任何人都可以帮助我提供必要的代码以及将其放置在下面的代码中的什么位置？

```
package dk.ugenshoroskop.mobil;

import android.os.Bundle;
import android.app.Activity;
import android.view.KeyEvent;
import android.view.Menu;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class UgensHoroskop extends Activity {
private WebView myWebView;

@Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_ugens_horoskop);

    myWebView = (WebView) findViewById(R.id.webview);
    myWebView.getSettings().setJavaScriptEnabled(true);
    myWebView.loadUrl("http://ugens-horoskop.dk/mobile.php");
    myWebView.setWebViewClient(new WebViewClient());
    }     

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK) && myWebView.canGoBack()) {
        myWebView.goBack();
        return true;
    }
    return super.onKeyDown(keyCode, event);
 }       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T20:12:49.320

经过大量的试验和错误，我成功地使http链接工作，你会在下面找到解决方案。但是，mailto 链接仍然不起作用。当我单击 mailto 链接时，我被告知当前不支持该操作。任何让 mailto 工作的想法将不胜感激。

这就是我所做的：

```
package dk.ugenshoroskop.mobil;

import android.os.Bundle;
import android.app.Activity;
import android.view.KeyEvent;
import android.view.Menu;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.net.Uri;                  /* new in order to handle URIs */

public class UgensHoroskop extends Activity {
private WebView myWebView;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_ugens_horoskop);

myWebView = (WebView) findViewById(R.id.webview);
myWebView.getSettings().setJavaScriptEnabled(true);
myWebView.loadUrl("http://ugens-horoskop.dk/mobile.php");
myWebView.setWebViewClient(new WebViewClient()     /* inserted code: */
{  
@Override  
public boolean shouldOverrideUrlLoading(WebView view, String url)  
{  
if (url.contains("http://ugens-horoskop.dk"))  {
myWebView.loadUrl(url);  
return false; } 
else {
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setData(Uri.parse(url));
startActivity(intent);
return true;
}  
}  
}

/* end inserted code */
);
}     

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
if ((keyCode == KeyEvent.KEYCODE_BACK) && myWebView.canGoBack()) {
    myWebView.goBack();
    return true;
}
return super.onKeyDown(keyCode, event);
}       
} 
```

# html - DIV 以匹配 TABLE 的宽度

> ID：12091235
> 
> 赞同：2
> 
> 时间：2012-08-23T12:08:13.633
> 
> 标签：html, css

我有一个容器 DIV。容器内部是三个元素。两个横幅 DIV（模拟页眉和页脚）和一个 TABLE。表非常宽。没有办法绕过水平滚动，我必须让横幅背景颜色扩展以匹配 DIV 的全长。如何让 DIV 将其宽度扩展到 TABLE 的整个宽度，为什么 TABLE 不影响其父 DIV 的宽度？

谢谢你。

见我的[jsfiddle](http://jsfiddle.net/yaksandpie/rqJQg/2/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T12:16:06.457

删除`width: 100%`并添加`display: inline-block`到容器元素应该可以做到。[http://jsfiddle.net/rqJQg/6/](http://jsfiddle.net/rqJQg/6/)

# ios - 复杂绘图 UIView

> ID：12091242
> 
> 赞同：0
> 
> 时间：2012-08-23T12:08:33.197
> 
> 标签：ios, objective-c, core-graphics

我想复制这个`UIView`在`iOS`绘图中的自定义`Framework`。我怎么能这样做？

我知道我可以使用图像，但还有其他解决方案吗？

[![图片](../Images/d7845e946e3dc6f0aa8aeaa44ccb9604.png)](https://i.stack.imgur.com/etIZY.png)

# google-chrome-devtools - Chrome 开发者工具错误

> ID：12091243
> 
> 赞同：1
> 
> 时间：2012-08-23T12:08:40.553
> 
> 标签：google-chrome-devtools

我在使用 Chrome 开发人员工具时遇到了问题，有时会阻止我使用它。我添加了屏幕截图，显示当我打开工具时，我收到一个 jQuery 错误，阻止我加载页面，或者将加载页面但会阻止我使用该工具执行任何操作。

请看一下，让我知道我需要禁用、删除什么来阻止这个问题。谢谢你。

截图链接：[https ://skitch.com/e-pertrai1/eqjfw/semsdesign.me-2012-08-23-how-to-install-make](https://skitch.com/e-pertrai1/eqjfw/semsdesign.me-2012-08-23-how-to-install-make)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T04:37:49.587

请按 devtools 窗口底部的蓝色按钮。

它正在改变异常模式的中断。

在你的情况下，它需要是黑色的。

# mysql - LEFT JOIN 别名的未知列错误

> ID：12091246
> 
> 赞同：1
> 
> 时间：2012-08-23T12:08:51.707
> 
> 标签：mysql

我试图为我的左连接添加别名，以便我可以在同一个表（不同的键）上进行两个连接，但遇到了这个问题。我已将查询剥离到问题所在，以保持简单。

```
SELECT stock_items.id AS stockid, exchange_rates.rate AS rate
FROM stock_items
LEFT JOIN exchange_rates AS exr ON stock_items.currency = exchange_rates.id 
```

当我运行此查询时，我得到

1054 - 'on 子句'中的未知列'exchange_rates.id'

但是，如果我删除别名，它看起来像这样......

```
SELECT stock_items.id AS stockid, exchange_rates.rate AS rate 
FROM stock_items 
LEFT JOIN exchange_rates ON stock_items.currency = exchange_rates.id 
```

此查询运行良好...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:11:50.037

如果你添加一个`alias`，你应该在你的`join`.

```
SELECT stock_items.id AS stockid, exr.rate AS rate
FROM stock_items
LEFT JOIN exchange_rates exr ON stock_items.currency = exr.id 
```

# android - Android图标没有改变

> ID：12091257
> 
> 赞同：17
> 
> 时间：2012-08-23T12:09:23.413
> 
> 标签：android

我已经开发了几个 Android 应用程序，这从来没有发生在我身上，并且让我很困扰。我在 android 几个文件夹（xhdpi、hdpi、mdpi 和 ldpi）上有一个名为 ic_launcher 的应用程序启动器图标。我的 Android 清单如下所示：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <uses-library android:name="com.google.android.maps" /> 
```

应用程序图标只是默认的 android 图标。我已经清理了项目，刷新了，从几台不同的计算机构建，使用 ant 来处理 png 文件，什么都没有。

我开始认为这是我的 Android 上的缓存文件或其他东西（我在 S2 上使用 Miui）的问题，但我不确定。

有人有更好的建议吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2018-11-24T03:18:11.023

我发现我必须删除 ic_launcher.xml 因为它包含一个路径，其中编码了默认图标。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-20T16:41:01.550

问题在于 MIUI 缓存应用程序图标。我搜索并删除了现有的图标，从那时起一切都按预期工作。

从 MIUI 9 开始，MIUI 图标缓存问题仍然存在

**清除缓存的步骤：**设置 > 已安装的应用程序 > 搜索您的应用程序 > 存储 > 清除缓存 > 重启手机

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-11-18T13:16:12.500

如果您使用 MIUI，请更改您的主题。图标将刷新..

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-12-08T19:06:05.500

我遇到了同样的问题，重新启动设备使新图标出现。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-10-16T03:24:37.853

我有同样的问题并检查了类似的帖子。我删除了 bin 目录，只是让 eclipse 重新编译并将新的 apk 发送到设备。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-23T12:13:56.360

Andorid 将根据您使用的 DPI（像素密度）拍摄图像，因为您使用的是**S2**，我的猜测是将您需要的图像放入***x-hdpi***并检查。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-23T12:14:05.583

如果我是你，我会从我的 res 文件夹中删除这些图标，并在没有它们的情况下构建我的应用程序。如果它可以安装到设备上，那么它可能是某种缓存是的，如果不是，我建议您更改清单中图标的名称并使用另一个只是为了查看。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-06-10T11:14:03.393

如果您在 MIUI 中，请转到设置中的应用程序并清除数据。确保重新启动手机。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-06-20T12:01:02.297

我遇到了同样的问题，所以我从 res 文件中删除了旧图标，并在清除缓存后重新启动设备，然后它就可以工作了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-31T14:33:22.783

您是否在项目的根目录中看到“classes/res-cache”文件夹？如果是这样，请将其删除。对我有帮助。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-06-03T10:06:56.040

它也发生在某些 HTC 设备上。这是因为启动器会缓存图标，即使在您修改后也不会刷新它。

您可以终止启动器的进程来解决它。这样做适用于我的 HTC One。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-09-18T03:08:22.213

如果使用 Z-launcher，请转到 Z-launcher 设置，然后将图标主题更改为其他内容并返回您想要的值，图标将刷新

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-09-19T09:14:29.663

还记得检查可绘制和 anydpi 文件夹上的动态 xmls 默认图标

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-10-31T09:09:58.833

就我而言，在从互联网上搜索了很多之后，我发现我们尝试运行应用程序的设备上有某种缓存，为了清除该设备上的缓存，我只是重新启动了我的设备并重新启动时更新的图标。

# php - 使用 exec 调整图像大小并在 PHP 中转换

> ID：12091263
> 
> 赞同：2
> 
> 时间：2012-08-23T12:09:42.213
> 
> 标签：php, imagemagick

我正在尝试通过以下方式在 PHP 中转换 png 图像：

```
exec($cmd, $output, $return_code); 
```

其中 $cmd 包含以下代码行：

```
/usr/bin/convert 'images/original/Id1741.png' -thumbnail x200 -quality '90' './cache/a3b84c5931d9619d12a9e244a310cb17_h200.png' 
```

在命令行上调用此代码可以正常工作，但在网络服务器上执行它会给我以下错误消息：

```
Tried to execute : convert 'images/original/Id1741.png' -thumbnail x200 -quality '90' './cache/a3b84c5931d9619d12a9e244a310cb17_h200.png', return code: 1, output: Array() 
```

如果我删除缩略图选项，该命令在网络服务器上执行得很好，但显然它不会调整任何东西的大小。所以我猜这不是权限或设置的问题。

PHP 版本是`5.2.17`. ImageMagick 版本是：`6.6.0-4 2012-04-26`

任何人都遇到过类似的问题，可以帮助我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T22:31:35.727

好的，我终于把它修好了。将 stderr 重定向到文件后，我发现以下错误：

```
libgomp: Thread creation failed: Resource temporarily unavailable 
```

似乎我的主机 1&1 最近升级了 ImageMagick 版本，它显然比旧版本使用了更多的内存（至少主机是这么说的）。他们建议限制 ImageMagick 创建的线程数量：

```
putenv('MAGICK_THREAD_LIMIT=1'); 
```

我将此代码放入我的初始化脚本中，现在它工作得很好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:49:13.020

您正在转换为 PNG，但您正在设置`-quality 90`（似乎只是类似于*JPEG*质量设置）。

但是，对于 PNG 输出，该`-quality`设置与 JPEG 的质量设置非常不同（它只是一个从`0`到的整数`100`）。

对于 PNG，它由两个个位数组成：

*   第一个数字（十位）**（很大程度上）是 zlib 压缩级别**，它可能从`0`到`9`。
    *（但是 的设置`0`有一个特殊的含义：当你使用它时，你会得到 Huffman 压缩，而不是 zlib 压缩级别 0。这通常更好......奇怪但真实。）*

*   第二位是**PNG数据编码过滤器类型**（压缩前）：

    *   0 是无，
    *   1 是“子”，
    *   2是“向上”，
    *   3 是“平均”，
    *   4 是“Paeth”，并且
    *   5是“自适应”。

**实际上，这意味着：**

*   对于具有纯色序列的插图，“无”过滤器 ( `-quality 00`) 通常是最合适的。
*   对于自然景观的照片，“自适应”过滤 ( `-quality 05`) 通常是最好的。

也许您想`-quality 90`根据此信息重新访问您的设置。

也许你已经意识到了。在这种情况下：我为“向合唱团讲道”道歉。:-)

# java - 如何使用延迟加载创建显示文本日志文件的 JSF 页面

> ID：12091269
> 
> 赞同：2
> 
> 时间：2012-08-23T12:10:13.957
> 
> 标签：java, jsf, jsf-2

我想显示显示 Glassfish 日志文件内容的 JSF 页面。到目前为止，我只做了这个：

```
 import java.io.File;
    import java.io.FileInputStream;
    import java.io.IOException;
    import java.io.Serializable;
    import javax.annotation.PostConstruct;
    import javax.faces.bean.ViewScoped;
    import javax.faces.context.FacesContext;
    import javax.inject.Named;

    @Named("GlassfishLogFileController")
    @ViewScoped
    public class GlassfishLogFile implements Serializable
    {

        String id;
        String fileData;

        // Constructor
        public GlassfishLogFile()
        {
            // Get the ID value 
            try
            {
                this.id = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("id");
            }
            catch (Exception e)
            {
                this.id = null;
            }
        }
        // Path for Glassfish directory with log files
        String path = "/opt/glassfish3/glassfish/domains/domain1/logs/" + id;

        @PostConstruct
        public void redFile()
        {
            File file = new File(path);

            try (FileInputStream fis = new FileInputStream(file))
            {

                int content;
                while ((content = fis.read()) != -1)
                {
                    // convert to char and display it
                    fileData = fileData + (char)content;
                }

            }
            catch (IOException e)
            {
                e.printStackTrace();
            }
        }

        public String getdata()
        {
            return fileData;
        }
    } 
```

看法：

```
<div id="settingsdiv" style="width:350px; height:400px; position:absolute;  background-color:r; top:20px; left:1px">

    <div id="settingsHashMap" style="width:1050px; height:400px; position:absolute;  background-color:r; top:20px; left:1px">

        <h:form id="form" >
            <p:growl id="growl" showDetail="true" sticky="true" />

            <h:inputTextarea rows="30" cols="50" value="#{GlassfishLogFileController.data}" />                            

        </h:form>                    
    </div> 

</div> 
```

我很感兴趣是否有任何可能的方法来实现延迟加载到我将用来显示文本文件内容的文本区域。我想这样做是因为我想节省内存。日志文件有时会非常消耗内存。

而且我还发现了许多如何将 .pdf 文档显示到 JSF 页面的示例，但没有一个示例如何将文本文档显示到文本区域中。

最良好的祝愿

PS我更新了代码。现在我得到空的输入字段。不显示日志文件中的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:56:34.373

试试这个，我刚刚测试过：

```
import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.Serializable;
import javax.faces.bean.ViewScoped;
import javax.faces.context.FacesContext;

@Named("GlassfishLogFileController")
@ViewScoped
public class GlassfishLogFile implements Serializable {

String data;

String id;

private int offset = 0;
private int pageSize = 30;
// Path for Glassfish directory with log files
String path = "/opt/glassfish3/glassfish/domains/domain1/logs/" + this.id;

// Constructor
public GlassfishLogFile() {
// Get the ID value
try {
    this.id = FacesContext.getCurrentInstance().getExternalContext()
            .getRequestParameterMap().get("id");
    // We load the first page initially!
    this.actionNextPage();
} catch (Exception e) {
    this.id = null;
}
}

public String actionClearOffset() {
this.offset = 0;
this.actionNextPage();
return "SUCCESS";
}

public String actionNextPage() {
StringBuilder page = new StringBuilder();

for (int i = 0; i < this.pageSize; i++) {
    String line = this.readLine(this.offset);
    if (line == null) {
    break;
    }
    System.out.println(this.offset);
    this.offset += line.length() + 2;
    page.append(line).append(System.getProperty("line.separator"));
}
this.data = page.toString();
return "SUCCESS";
}

public String getData() {
return this.data;
}

public int getPageSize() {
return this.pageSize;
}

public String readLine(long offset) {
String strLine = null;
DataInputStream in = null;
try {
    // Open the file that is the first
    // command line parameter
    FileInputStream fstream = new FileInputStream(new File(this.path));
    // Get the object of DataInputStream
    in = new DataInputStream(fstream);
    BufferedReader br = new BufferedReader(new InputStreamReader(in));

    br.skip(offset);

    strLine = br.readLine();
    // Close the input stream
} catch (Exception e) {// Catch exception if any
    System.err.println("Error: " + e.getMessage());
} finally {
    try {
    in.close();
    } catch (IOException e) {
    e.printStackTrace();
    }
}
return strLine;
}

public void setData(String data) {

}
} 
```

看法：

```
<div id="settingsdiv" style="width:350px; height:400px; position:absolute;  background-color:r; top:20px; left:1px">

    <div id="settingsHashMap" style="width:1050px; height:400px; position:absolute;  background-color:r; top:20px; left:1px">

        <h:form id="form" >
            <p:growl id="growl" showDetail="true" sticky="true" />

            <h:commandButton value="Show next #{GlassfishLogFileController.pageSize} lines" 
                                 action="#{GlassfishLogFileController.actionNextPage}" />
            <h:commandButton value="Clear offset" 
                                 action="#{GlassfishLogFileController.actionClearOffset}" />
            <h:inputTextarea rows="30" cols="1000" value="#{GlassfishLogFileController.data}" />   
        </h:form>                    
    </div> 

</div> 
```

# mysql - 在 MySQL 表中查找所有只有空值的列

> ID：12091272
> 
> 赞同：22
> 
> 时间：2012-08-23T12:10:31.167
> 
> 标签：mysql, sql

情况如下：

我有大量的表，每个表都有大量的列。我需要为新系统处理这个旧的和将被弃用的数据库，我正在寻找一种方法来消除所有 - 显然 - 从未使用过的列。

我想通过过滤掉在任何给定行上具有值的所有列来做到这一点，给我留下一组在所有行中值为 NULL 的列。当然，我可以手动对每一列进行降序排序，但是因为我要处理大量的表和列，所以这会花费太长时间。我估计它有 400 个表，每个表最多有 50 个（！）列。

有什么方法可以从 information_schema 中获取这些信息？

**编辑：**

这是一个例子：

```
column_a    column_b    column_c    column_d
NULL        NULL        NULL        1
NULL        1           NULL        1
NULL        1           NULL        NULL
NULL        NULL        NULL        NULL 
```

输出应该是“column_a”和“column_c”，因为它们是唯一没有任何填充值的列。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-30T10:03:52.250

[`INFORMATION_SCHEMA.COLUMNS`](http://dev.mysql.com/doc/en/columns-table.html)您可以通过动态创建（从表中）包含您希望执行的 SQL 的字符串，然后从该字符串[准备语句](http://dev.mysql.com/doc/en/sql-syntax-prepared-statements.html)并执行它来避免使用过程。

我们希望构建的 SQL 如下所示：

```
SELECT * FROM (
  SELECT 'tableA' AS `table`,
         IF(COUNT(`column_a`), NULL, 'column_a') AS `column`
  FROM   tableA
UNION ALL
  SELECT 'tableB' AS `table`,
         IF(COUNT(`column_b`), NULL, 'column_b') AS `column`
  FROM   tableB
UNION ALL
  -- etc.
) t WHERE `column` IS NOT NULL 
```

这可以使用以下方法完成：

```
SET group_concat_max_len = 4294967295; -- to overcome default 1KB limitation

SELECT CONCAT(
         'SELECT * FROM ('
       ,  GROUP_CONCAT(
            'SELECT ', QUOTE(TABLE_NAME), ' AS `table`,'
          , 'IF('
          ,   'COUNT(`', REPLACE(COLUMN_NAME, '`', '``'), '`),'
          ,   'NULL,'
          ,    QUOTE(COLUMN_NAME)
          , ') AS `column` '
          , 'FROM `', REPLACE(TABLE_NAME, '`', '``'), '`'
          SEPARATOR ' UNION ALL '
         )
       , ') t WHERE `column` IS NOT NULL'
       )
INTO   @sql
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_SCHEMA = DATABASE();

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/953c4/11/2)上查看。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-27T07:10:07.843

我不是 SQL 程序方面的专家，因此使用 SQL 查询和 PHP/python 脚本给出了大致的想法。

*   在数据库上使用`SHOW TABLES`或其他一些查询`INFORMATION_SCHEMA`来获取数据库中的所有表`MY_DATABASE`

*   执行查询以生成语句以获取特定表中的所有列名，这将在下一个查询中使用。

> ```
>  SELECT Group_concat(Concat( "MAX(", column_name, ")" ))
>          FROM   information_schema.columns
>          WHERE  table_schema = 'MY_DATABSE'
>                 AND table_name = 'MY_TABLE'
>          ORDER  BY table_name,ordinal_position 
> ```

*   你会得到像这样的输出 `MAX(column_a),MAX(column_b),MAX(column_c),MAX(column_d)`

*   使用此输出生成最终查询：

> 从 MY_DATABASE.MY_TABLE 中选择 Max(column_a)、Max(column_b)、Max(column_c)、Max(column_d)

输出将是：

```
 MAX(column_a)    MAX(column_b)   MAX(column_c)   MAX(column_d)
     NULL            1           NULL                1 
```

*   所有具有最大值的列`NULL`都是具有所有值的列`NULL`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-27T14:41:37.457

您可以利用关于 NULL 的*COUNT*聚合函数的行为。通过将字段作为参数传递，*COUNT*函数返回非 NULL 值的数量，而*COUNT(*)*返回总行数。因此，您可以计算 NULL 与“可接受”值的比率。

我将举一个具有以下表结构的示例：

```
CREATE TABLE `t1` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
   `col_1` int(10) unsigned DEFAULT NULL,
   `col_2` int(10) unsigned DEFAULT NULL,
   PRIMARY KEY (`id`)
) ;

-- let's fill the table with random values
INSERT INTO t1(col_1,col_2) VALUES(1,2);
INSERT INTO t1(col_1,col_2) 
SELECT 
IF(RAND() > 0.5, NULL ,FLOOR(RAND()*1000), 
IF(RAND() > 0.5, NULL ,FLOOR(RAND()*1000) FROM t1;

-- run the last INSERT-SELECT statement a few times
SELECT COUNT(col_1)/COUNT(*) AS col_1_ratio, 
COUNT(col_2)/COUNT(*) AS col_2_ratio FROM t1; 
```

您可以编写一个函数，通过将表名作为输入变量传递，自动从 INFORMATION_SCHEMA 数据库构造查询。以下是直接从 INFORMATION_SCHEMA 表中获取结构数据的方法：

```
SET @query:=CONCAT("SELECT @column_list:=GROUP_CONCAT(col) FROM (
SELECT CONCAT('COUNT(',c.COLUMN_NAME,')/COUNT(*)') AS col
FROM INFORMATION_SCHEMA.COLUMNS c 
WHERE NOT COLUMN_KEY IN('PRI') AND TABLE_SCHEMA=DATABASE() 
AND TABLE_NAME='t1' ORDER BY ORDINAL_POSITION ) q");
PREPARE COLUMN_SELECT FROM @query;
EXECUTE COLUMN_SELECT;
SET @null_counters_sql := CONCAT('SELECT ',@column_list, ' FROM t1');
PREPARE NULL_COUNTERS FROM @null_counters_sql;
EXECUTE NULL_COUNTERS; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-28T21:06:55.563

[**SQL Fiddle 演示链接**](http://sqlfiddle.com/#!2/dd076/1)

我创建了 4 个表。三是演示，一是`nullcolumns`解决方案的必修部分。在三个表中，只有`salary`和`dept`具有所有值为空的列（您可以查看它们的脚本）。

最后给出了必填表和程序

您可以在本地主机上的所需数据库中复制粘贴并运行（强制部分或全部）作为 sql（只需将分隔符更改为 //），然后 ---`call get();`并查看结果

```
CREATE TABLE IF NOT EXISTS `dept` (
  `did` int(11) NOT NULL,
  `dname` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`did`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

INSERT INTO `dept` (`did`, `dname`) VALUES
(1, NULL),
(2, NULL),
(3, NULL),
(4, NULL),
(5, NULL);

CREATE TABLE IF NOT EXISTS `emp` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `ename` varchar(50) NOT NULL,
  `did` int(11) NOT NULL,
  PRIMARY KEY (`ename`),
  KEY `deptid` (`did`),
  KEY `id` (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=6 ;

INSERT INTO `emp` (`id`, `ename`, `did`) VALUES
(1, 'e1', 4),
(2, 'e2', 4),
(3, 'e3', 2),
(4, 'e4', 4),
(5, 'e5', 3);

CREATE TABLE IF NOT EXISTS `salary` (
  `EmpCode` varchar(50) NOT NULL,
  `Amount` int(11) DEFAULT NULL,
  `Date` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

INSERT INTO `salary` (`EmpCode`, `Amount`, `Date`) VALUES
('1', 344, NULL),
('2', NULL, NULL);

------------------------------------------------------------------------
------------------------------------------------------------------------

CREATE TABLE IF NOT EXISTS `nullcolumns` (
  `Table_Name` varchar(100) NOT NULL,
  `Column_Name` varchar(100) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--Only one procedure Now
CREATE PROCEDURE get(dn varchar(100))
BEGIN
declare c1 int; declare b1 int default 0; declare tn varchar(30);
declare c2 int; declare b2 int; declare cn varchar(30);

select count(*) into c1 from information_schema.tables where table_schema=dn;
delete from nullcolumns;
while b1<c1 do
select table_name into tn from information_schema.tables where
table_schema=dn limit b1,1;        

select count(*) into c2 from information_schema.columns where
table_schema=dn and table_name=tn;
set b2=0;
while b2<c2 do
select column_name into cn from information_schema.columns where
table_schema=dn and table_name=tn limit b2,1;

set @nor := 0;
set @query := concat("select count(*) into @nor from ", dn,".",tn);
prepare s1 from @query;
execute s1;deallocate prepare s1;

if @nor>0 then set @res := 0;
set @query := concat("select ((select max(",cn,") from ", dn,".",tn,")
is NULL) into @res");
prepare s1 from @query;
execute s1;deallocate prepare s1;

if @res=1 then
insert into nullcolumns values(tn,cn);
end if; end if;

set b2=b2+1;
end while;

set b1=b1+1;
end while;
select * from nullcolumns;
END; 
```

您可以轻松地在您的 phpmyadin 'as it is' 中轻松地执行存储过程，只需将分隔符（在 SQL 查询框的底部）更改为 // 然后

```
call get(); 
```

并**享受**:)

您现在可以看到该表`nullcolumns`显示具有 100/100 空值的所有列以及表名称

在过程代码`if @nor>0`限制结果中不应包含空表，您可以删除该限制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T12:13:05.313

我认为您可以使用 GROUP_CONCAT 和 GROUP BY 来做到这一点：

```
select length(replace(GROUP_CONCAT(my_col), ',', ''))
from my_table
group by my_col 
```

（*未经测试*）

**编辑**：文档似乎没有说明 GROUP_CONCAT 需要相应的 GROUP BY，所以试试这个：

```
select 
    length(replace(GROUP_CONCAT(col_a), ',', '')) as len_a
    , length(replace(GROUP_CONCAT(col_b), ',', '')) as len_b
    , length(replace(GROUP_CONCAT(col_c), ',', '')) as Len_c
from my_table 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-09-18T05:59:48.503

```
select column_name
from user_tab_columns
where table_name='Table_name' and num_nulls>=1; 
```

只需通过简单的查询，您就会得到这两列。

# python - 无法从字典/关联数组中提取值

> ID：12091277
> 
> 赞同：0
> 
> 时间：2012-08-23T12:10:40.760
> 
> 标签：关联数组, 字典, python, arrays

我已经参考了[文档](http://docs.python.org/tutorial/datastructures.html)，但我似乎无法提取这个[关联数组](/questions/tagged/associative-array "显示标记为“关联数组”的问题")或[字典](/questions/tagged/dictionary "显示标记为“字典”的问题")：

```
# errors = session.pop('_flashes')
# repr(errors)
[('message', [u'Content is empty'])] 
```

当我做：

```
repr(errors['message']) 
```

我收到了一个错误：

```
TypeError: list indices must be integers, not str 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T12:11:24.900

```
errors = [('message', [u'Content is empty'])] 
```

不是字典。它是一个元组列表。

您可以轻松地将其转换为 dict：

```
d = dict(errors) 
```

`d`现在包含`{'message': [u'Content is empty']}`

并访问其元素：

```
d['message'] 
```

返回`[u'Content is empty']`

或直接下到字符串：

```
d['message'][0] 
```

返回`u'Content is empty'`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T12:15:02.890

这可能有助于理解正在发生的事情：

```
>>> errors = [('message', [u'Content is empty'])]
>>> errors[0]
('message', [u'Content is empty'])
>>> errors[0][0]
'message'
>>> errors[0][1]
[u'Content is empty']
>>> errors[0][1][0]
u'Content is empty' 
```

# php - Yii 附加事件

> ID：12091278
> 
> 赞同：3
> 
> 时间：2012-08-23T12:10:45.090
> 
> 标签：php, yii

在此链接阅读 YIi 指南时：[http](http://www.yiiframework.com/wiki/327/events-explained/) ://www.yiiframework.com/wiki/327/events-explained/ ，我看到了这一行：

> ...所以在引发我们应该调用的事件之前，可能在组件的初始化方法中，像这样：

```
$myComponent->onForestRan = array(new SomeOtherClass, 'eventHandler1'); 
```

我知道这段代码会将处理程序附加到事件，左侧的数组是一个 PHP 回调函数。但是，我真正不明白的是它的语法，它是否调用了 onforestRan() 函数（之前在 $component 上定义-> 请参见上面的 Yii 链接），如果是这样，它将无效，因为它缺少 $事件论据。或者，如果它是一个回调，那么我从未见过这样使用回调的方法（如果它是一个回调，其中 call_user_func() 或 usort()..）。它的语法对我来说真的很奇怪。有人可以帮我解决这个问题吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T16:57:10.823

这不是一个回调本身，而是你告诉 Yii 对事件执行什么动作（即什么函数）。

在给出的示例中，当`onForestRan`发生时，`eventHandler1`函数 from`SomeOtherClass`将被触发。

当该页面描述回调时，它表示您分配的任何内容都`$myComponent->onForestRan`需要是回调函数。回调不会在那个时候执行，你只是让 Yii 知道在事件发生时使用哪个回调。

更多细节：

onForestRan 是 $myComponent 的一个特殊属性，如此[处](http://www.yiiframework.com/doc/guide/1.1/en/basics.component#component-event)所述。更多细节可以在[CComponent](http://www.yiiframework.com/doc/api/1.1/CComponent)中看到。您可以[在 CComponent 源代码](https://github.com/yiisoft/yii/blob/1.1.12/framework/base/CComponent.php)中搜索类似于[第 113](https://github.com/yiisoft/yii/blob/1.1.12/framework/base/CComponent.php#L113)行的行，您可以在其中看到特殊属性的逻辑的开头。`action*`这与控制器中的方法非常相似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T08:43:48.377

$CComponent->onWhatever 是 Yii 中的一种特殊语言结构。“属性” onWhatever 在 CComponent 的魔术 __set 方法中被识别，然后作为事件附件处理。

让我无耻地引用[http://phpmaster.com/yii-under-the-hood-2/](http://phpmaster.com/yii-under-the-hood-2/)：

```
public function __set($name, $value){
    if (strncasecmp($name, "on", 2) === 0 && method_exists($this, $name)) {
        $name = strtolower($name);
        if (!isset($this->_e[$name])) {
            $this->_e[$name] = new CList();
        }
        return $this->_e[$name]->add($value);
    }
} 
```

实现首先检查 $name 的值是否以文本“on”开头，以及是否存在与该值同名的方法。如果是这样，Yii 假设 $value 是一个回调的表示，它需要附加到 $name 定义的事件上。Yii 有一个私有成员变量 $_e ，它包含一个由事件名称键控的回调数组，它只是将回调添加到特定事件键的列表中。

```
$_e => array(
    'onUserRegistered' => array(
        0 => array(object, 'sendMyEmail')
    ),
    'onSomeOtherEvent'=>array(
        0 => function(){}
        1 => ...
    )
) 
```

# perl - 如何检测套接字连接何时丢失？

> ID：12091282
> 
> 赞同：3
> 
> 时间：2012-08-23T12:10:54.520
> 
> 标签：perl, sockets, networking, io

我有一个脚本（我目前没有代码示例，但我使用了 IO::Async），它连接到远程服务器上的套接字并进行侦听。客户端通常只是监听新数据。

问题是客户端无法检测是否发生网络问题并且套接字连接已消失。我使用了 IO::Async，也尝试了 IO::Socket。建立初始连接后，句柄始终“已连接”。

如果再次建立网络连接，套接字连接自然仍然会丢失，因为脚本不知道它应该重新连接。

我正在考虑创建某种“keepAlive”，它每 X 秒“ping”（syswrite）套接字（如果没有任何新内容通过套接字）来检查连接是否仍然存在。

这是正确的方法还是可能有另一种更有创意或更清洁的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T12:43:45.517

您可以设置`SO_KEEPALIVE`用于 TCP 的套接字选项，该选项会定期发送 keepalive 消息，并且可能有助于检测这种情况。如果检测到这种情况，您将收到一个 EOF 条件（很可能导致容器`IO::Async::Stream`触发`on_read_eof`）。

为了获得更好的解决方案，您可能会考虑某种应用程序级别的 keepalive 消息，例如 IRC 的`PING`命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T12:45:14.817

简短的回答是在 perl 中没有自动检测丢弃的套接字的默认方法。

您的 ping 方法可能会很好用；您可以在后台运行一个发送 ping 请求的连续线程，如果它没有收到响应，则可以通知主线程并重新连接。

如果你想弄得一团糟，你可以使用 select() 来检测保持活动的消息；但是，这可能需要一些操作系统配置，具体取决于您的平台。

有关更多详细信息，请参阅此线程：[http ://www.perlmonks.org/?node_id=566568](http://www.perlmonks.org/?node_id=566568)

# java - javaagents：转换顺序

> ID：12091283
> 
> 赞同：2
> 
> 时间：2012-08-23T12:10:55.420
> 
> 标签：java, java-bytecode-asm, javaagents

在我的项目中，我想分两个阶段转换字节码。顺序很重要。

1.  首先我需要改变方法定义
2.  然后调用方法的方式

例如

1.  将定义从 更改`String hello()`为`String hello(String s)`
2.  将呼叫从更改`Hello.hello()`为`Hello.hello("newArgument")`

我设法添加了变压器，这是第一步。

```
public class MyJavaAgent {

    private static Instrumentation instrumentation;

    public static void premain(String args, Instrumentation inst)
            throws Exception {
        instrumentation = inst;
        instrumentation.addTransformer(new MyClassFileTransformer());
    }
} 
```

我的问题是：我可以这样添加新的变压器吗：

```
public class MyJavaAgent {

    private static Instrumentation instrumentation;

    public static void premain(String args, Instrumentation inst)
            throws Exception {
        instrumentation = inst;
        instrumentation.addTransformer(new MyClassFileTransformer());
        instrumentation.addTransformer(new MyClassFileTransformer2());
    }
} 
```

并确定`MyClassFileTransformer`他的工作之前`MyClassFileTransformer2`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T02:49:01.217

有一个简单的方法来测试这个......在每个 Transformer 类的 transform 方法中添加一个 System.out 指令，该指令将输出各个类的唯一消息。然后查看控制台上获取输出的顺序。如果您在 Transformer2 之前收到 Transformer1 的唯一消息，那么是的，转换方法是按顺序调用的。

这就是我所做的...

```
package Test;

import java.lang.instrument.ClassFileTransformer;
import java.lang.instrument.IllegalClassFormatException;
import java.lang.instrument.Instrumentation;
import java.security.ProtectionDomain;

public class TransFormerTest  {

    public TransFormerTest() {
        super();
    }

    public static void premain(String agentArguments, Instrumentation instrumentation) {
        instrumentation.addTransformer(new Transformer1());
        instrumentation.addTransformer(new Transformer2());
    }
}

class Transformer1 implements ClassFileTransformer {
    public byte[] transform(ClassLoader loader, String className, Class redefiningClass, ProtectionDomain domain, byte[] bytes) throws IllegalClassFormatException {
        System.out.println(className + "one"); // one for Transformer
        return bytes;
    }
}

class Transformer2 implements ClassFileTransformer {
    public byte[] transform(ClassLoader loader, String className, Class redefiningClass, ProtectionDomain domain, byte[] bytes) throws IllegalClassFormatException {
        System.out.println(className + "two"); // two for Transformer 2
        return bytes;
    }
} 
```

因此，每次加载一个类并调用转换器时，您应该会看到该类的名称被打印两次，第一次是**一个**作为后缀，然后是**两个**作为后缀。

我用一个简单的 Hello World 程序测试了这个理论......这是我的输出::

```
Test/Transformer2 - one
sun/launcher/LauncherHelper - one
sun/launcher/LauncherHelper - two
java/lang/Enum - one
java/lang/Enum - two
HelloWorld - one
HelloWorld - two
java/lang/Void - one
java/lang/Void - two
Hello World
java/lang/Shutdown - one
java/lang/Shutdown - two
java/lang/Shutdown$Lock - one
java/lang/Shutdown$Lock - two 
```

所以，它似乎确实维持了秩序。

话虽如此，您是否考虑过链接转换方法？例如...

```
public class TransFormerTest  {

    public TransFormerTest() {
        super();
    }

    public static void premain(String agentArguments, Instrumentation instrumentation) {
        instrumentation.addTransformer(new Transformer());
    }
}

class Transformer implements ClassFileTransformer {
    public byte[] transform(ClassLoader loader, String className, Class redefiningClass, ProtectionDomain domain, byte[] bytes) throws IllegalClassFormatException {
        byte[] bytes2 =  privateTransformer(className, bytes);
        return bytes2;
    }

    private byte[] privateTransformer(String className, byte[] bytes) {
        System.out.println(className + " - one");
            // TODO add code for First Transformation.
        byte[] bytes2 = privateTransformer2(className, bytes);
        return bytes2;
    }

    private byte[] privateTransformer2(String className, byte[] bytes) {
        System.out.println(className + " - two");
            // TODO add code for Second Transformation.
        return bytes;
    }
} 
```

这仍然会达到类似的结果，这肯定会保持转换可能发生的顺序。

# jquery - 要根据复选框隐藏或显示 div，请单击 mvc3

> ID：12091284
> 
> 赞同：2
> 
> 时间：2012-08-23T12:11:02.033
> 
> 标签：jquery, asp.net-mvc-3, checkbox

在我看来，我有一个表格，其中每行包含复选框和 2 列。最初它没有被检查

```
 <input type="checkbox" name="chkbox" class="a" data-id="@item.Data.CandidatePortfolioID" onclick="Checked()" />
        <div class="cell" id="edit2" style="width:auto;">@Html.DisplayFor(modelItem => item.DataEndDate)</div>
        <div class="cell" id="edit1" style="width:auto; display:none;">
         @Html.TextBox("Enddate", item.DataEndDate, new { @class = "date"})
                </div> 
```

我希望在选中复选框时显示 id='edit1' 的 div，否则对于该特定行隐藏它

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T12:13:24.700

```
$("input[name='chkbox']").on("change", function () {
    $("#edit1").toggle(this.checked);
}); 
```

jQuery 1.7 之前：

```
$("input[name='chkbox']").change(function () { // or .bind("change", function () {
    $("#edit1").toggle(this.checked);
}); 
```

[**演示。**](http://jsfiddle.net/karim79/quMfQ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:13:46.303

```
$('input.a').click(function() 
{
    if ($(this).is(':checked'))
    {
         $('div#edit1').hide();
    }
    else
    {
        $('div#edit1').show();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T11:39:51.560

使用“名称”属性使其特定于复选框：

```
$('inpunt[name="chkbox"]').bind('click',function(){ 
if ($(this).is(':checked'))
{
     $('div#edit1').hide();
}
else
{
    $('div#edit1').show();
}
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T06:46:10.650

首先，感谢您的所有帮助和指导
在我的代码中我做了以下更改：
在视图代码中

```
 <div class="cell" style="width:auto;"> <input type="checkbox" name="chkbox" class="a"  data-id="@item.Data.CandidatePortfolioID" onclick="checkbox1(@item.Index)"/> 
</div> 
       <div class="cell" id=**"edit2-@item.Index"** style="width:auto;">@Html.DisplayFor(modelItem => item.EndDate)</div>
        <div class="cell" id=**"edit1-@item.Index"** style="width:auto; display:none;">@Html.TextBox("Enddate", item.EndDate, new { @class = "date" })</div> 
```

****jQuery 函数****

```
 function checkbox1(index) {
    var divname =index;
    $("#edit1-" + divname).toggle();
    $("#edit2-" + divname).toggle();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T12:20:28.270

```
$('.a').click(function(){

if ($('.a').is(':checked'))
{
 $('#edit1').css('display','block');
}
else
{
$('#edit1').css('display','none');
}
});​ 
```

这是工作演示[复选框](http://jsfiddle.net/Q2X4Y/1/)

```
$('input[type=checkbox]').click(function(){

if ($(this).is(':checked'))
 {
 $(this).next().next().show();
 }
else
{
$(this).next().next().hide();
}
});​ 
```

# emacs - 如何在命令输入中间启动

> ID：12091285
> 
> 赞同：1
> 
> 时间：2012-08-23T12:11:07.663
> 
> 标签：emacs, emacs23

如何让 emacs 启动并处于命令输入的中间？特别是，我希望 emacs 在命令输入中间开始，并`find-file`在小缓冲区中显示一条消息：

```
Find file: ~/ 
```

并将光标放在它的最后一个字符上，这样我就可以继续输入剩余的路径来打开我想要的文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T13:32:31.780

您可以在命令提示符下执行以下命令之一，或者制作一个适当地包含它的 shell 脚本：

```
$ emacs -f find-file         # if you want to start Emacs in the current direcoty
$ (cd ~; emacs -f find-file) # if you want to start Emacs in your home diretory 
```

从[emacs(1)](http://linux.die.net/man/1/emacs)手册页：

> **`-f`** *函数*,*函数***`--funcall`**
> 
>  *> 执行lisp函数*函数**

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T14:10:50.237

我不得不承认我的 lisp 有点生疏，但这对我有用。将其放入您的`~/.emacs`文件（或您正在使用的任何初始化文件）中：

```
(add-hook 'emacs-startup-hook
          (lambda ()
            (if (= (length command-line-args) 1)
                  (call-interactively 'find-file)))) 
```

如果你`emacs`不带参数调用，像这样：

```
sawa@localhost:~$ emacs

```

它会为你调用`find-file`。另一方面，如果您`emacs`使用参数（例如文件名）进行调用，如下所示：

```
sawa@localhost:~$ emacs somefile.txt

```

它将默认为仅访问`somefile.txt`*

# c# - 在 MVC3 中自定义输出缓存

> ID：12091286
> 
> 赞同：2
> 
> 时间：2012-08-23T12:11:14.263
> 
> 标签：c#, asp.net-mvc-3, outputcache

我有一些想要自定义缓存的控制器操作。例如，假设我有一个控制器动作`ActionResult Index(string name) {}`。我想在服务器上缓存此操作的 HTML，除非 url 中有“ **live=true** ”查询字符串参数。如果该参数存在，我想从服务器缓存中删除该操作结果并正常提供响应。

我们通常使用`OutputCache(Location=OutputCacheLocation.Server)`属性来进行缓存。**如果 URL 中存在live=true**参数，是否可以以某种方式扩展此属性并清除缓存？

如果我无法自定义 OutputCache 属性来获得我需要的行为，是否可以使用其他方法来完成此操作？

**更新**

根据詹姆斯的反馈，这里是我拥有的代码：

```
public class LiveOutputCacheAttribute : OutputCacheAttribute
{
    private const string _resetParam = "live";
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        var context = filterContext.HttpContext;
        AddLiveToVaryByParam();
        if (context.Request[_resetParam] == "true")
        {
            var urlToRemove = GetUrlToRemove(filterContext);
            context.Response.RemoveOutputCacheItem(urlToRemove);
            return;
        }
        base.OnActionExecuting(filterContext);
    }

    private void AddLiveToVaryByParam()
    {
        // add live reset flag when vary by param is specified
        if (VaryByParam != "*" && !VaryByParam.Contains("live"))
            VaryByParam = string.Format("{0};{1}",VaryByParam, _resetParam).TrimStart(';');
    }

    private static string GetUrlToRemove(ActionExecutingContext filterContext)
    {
        var routeValues = new RouteValueDictionary(filterContext.ActionParameters);
        var urlHelper = new UrlHelper(filterContext.RequestContext);
        string action = filterContext.ActionDescriptor.ActionName;
        string controller = filterContext.ActionDescriptor.ControllerDescriptor.ControllerName;
        return urlHelper.Action(action, controller, routeValues);
    }
} 
```

以下是我如何在我的行动中使用它：

```
[LiveOutputCache(Location = OutputCacheLocation.Server, Duration = 60 * 60, VaryByParam = "name")]
public ActionResult Index(string name)
{
    ViewData.Model = name + "-----" +  DateTime.Now.Ticks.ToString();
    return View();
} 
```

问题是当我使用 live=true 参数时，它仍然没有从缓存中删除原始请求。我在这里做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T13:44:58.143

您可以使用[VaryByParam](http://msdn.microsoft.com/en-us/library/system.web.ui.outputcacheparameters.varybyparam.aspx)属性来检查 live 选项是否为真，例如

```
public class LiveOutputCacheAttribute : OutputCacheAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (VaryByParam == "true")
        {
            // clear cache
            return;   
        }

        base.OnActionExecuting(filterContext);
    }
}

...

[LiveOutputCache(Location=OutputCacheLocation.Server, VaryByParam="live")]
public ActionResult Index(string name) 
{
    ...
} 
```

有关清除部分，请参阅[如何以编程方式清除控制器操作方法的输出缓存。](https://stackoverflow.com/questions/1167890/how-to-programmatically-clear-outputcache-for-controller-action-method)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:54:34.477

您无法自定义 OutputCacheAttribute 来获取行为，但您可以编写自己的 CustomCacheAttribute 来实现这一点。为此，您可以获取 OutputCacheAttribute 的来源（MVC 是开源的，因此您可以这样做），复制它并重写函数`OnActionExecuting(ActionExecutingContext filterContext)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-17T08:35:06.810

查看我关于在 ASP.NET MVC 中创建自己的自定义输出缓存的博客文章[http://bstavroulakis.com/blog/web/custom-output-caching-in-asp-net-mvc/](http://bstavroulakis.com/blog/web/custom-output-caching-in-asp-net-mvc/)

我对输出缓存有以下期望，但没有得到满足

1) 能够在必要时查看缓存对象，并在需要时查看其所有子对象以使部分无效。

2）有能力在需要时禁用缓存。

3）在缓存项目之前和之后有一些逻辑。

4) 让网站上的某些部分是动态的，并且只加载那些部分，让网站的其余部分保持静态

5）在站点的其他部分也使用缓存结构。

我的行动在哪里：

*   创建我自己的 CacheManager，它将在缓存中添加/删除/查找/...对象。

```
公共类 CacheManager
    {
        #region ICacheManager 成员

        公共静态无效添加（字符串键，对象值，int expireSeconds）
        {
            if (expireSeconds == CacheManagerKey.CacheLifeSpanForever)
                WebCache.Add(key, value, null, System.Web.Caching.Cache.NoAbsoluteExpiration, System.Web.Caching.Cache.NoSlidingExpiration, CacheItemPriority.Normal, null);
            别的
                WebCache.Add(key, value, null, DateTime.MaxValue, TimeSpan.FromSeconds(expireSeconds), CacheItemPriority.Normal, null);
        }

        公共静态布尔包含（字符串键）
        {
            返回 WebCache.Get(key) != null;
        }

        公共静态整数计数（）
        {
            返回 WebCache.Count;
        }

        公共静态无效插入（字符串键，对象值）
        {
            WebCache.Insert(key, value);
        }

        公共静态 T 获取（字符串键）
        {
            返回 (T)WebCache.Get(key);
        }

        公共静态列表 GetCacheKeys()
        {
            列表键 = 新列表（）；
            foreach（HttpContext.Current.Cache 中的DictionaryEntry 条目）keys.Add(entry.Key.ToString());
            返回键；
        }

        公共静态无效删除（字符串键）
        {
            WebCache.Remove(key);
        }

        公共静态无效 RemoveAll()
        {
            列表键 = GetCacheKeys();
            foreach（键中的字符串键）
                WebCache.Remove(key);
        }

        公共对象 this[字符串键]
        {
            得到
            {
                返回 WebCache[键]；
            }
            放
            {
                WebCache[键] = 值；
            }
        }

        #endregion

        公共静态 System.Web.Caching.Cache WebCache
        {
            得到
            {
                System.Web.Caching.Cache 缓存 = null;
                如果（HttpContext.Current！= null）
                    缓存 = HttpContext.Current.Cache；

                如果（缓存 == 空）
                    缓存 = HttpRuntime.Cache;

                返回缓存；
            }
        }
    }

```

*   之后我创建了自己的属性

```
        [AttributeUsage(AttributeTargets.All, Inherited = true, AllowMultiple = false)]
        公共类 WebCacheAttribute : ActionFilterAttribute
        {
            公共 int 持续时间 { 获取；放; }
            公共字符串 CacheKey { 获取；放; }
            公共字典 CacheParams { 获取；放; }
            公共类型 CacheReturnType { 获取；放; }
            公共字符串 ContentType { 获取；放; }
            公共 HeaderContentTypeEnum ResponseHeaderContentType{get;set;}
            公共字符串 CacheObj { 获取；放; }
            私有只读 ICacheHoleFiller _cacheHoleFiller;

            公共 WebCacheAttribute（int 持续时间，字符串 cacheKey，字符串 cacheParamsStr，HeaderContentTypeEnum 响应 = HeaderContentTypeEnum.Html，类型类型 = null）
            {

            }

            公共覆盖无效 OnActionExecuting(ActionExecutingContext filterContext)
            {

            }

            public T GetCachedParam(字典参数, bool isAjaxRequest)
            {

            }

            公共字符串 GetUniqueKey(bool isAjaxRequest)
            {

            }

            公共无效 OnException(ExceptionContext filterContext)
            {

            }

            私人 HtmlTextWriter tw;
            私有 StringWriter sw；
            私人 StringBuilder 某人；
            私有 HttpWriter 输出；

            公共覆盖无效 OnResultExecuting(ResultExecutingContext filterContext)
            {

            }

            公共覆盖无效 OnResultExecuted(ResultExecutedContext filterContext)
            {

            }
    }

```

*   为了使某些部分动态化，我使用了[“甜甜圈缓存”](http://mvcdonutcaching.codeplex.com/)

*   最后，我创建了一个 cachehelper 来调用我项目中的其他方法，这些方法也将使用 webcache 属性。

```
var articleStr = CacheHelper.InvokeCacheMethod(typeof(HtmlHelperExtensions), "RenderArticlesCallback", new object[] { (int)articleType });
```

```
[WebCacheAttribute(CacheManagerKey.CacheLifeSpanForever, CacheManagerKey.Page_Article_Key, "articleTypeID")]
            公共静态字符串 RenderArticlesCallback(int articleTypeID)
            {
```

```
公共静态类 CacheHelper
    {
        公共委托对象 SourceDataDelegate(object[] args);

        public static T InvokeCacheMethod(Type type, string methodName, object[] args)
        {
            return (T)InvokeCacheMethod(type, methodName, null, args);
        }

        public static T InvokeCacheMethod(Type type, string methodName, object instance, object[] args)
        {
            var method = type.GetMethod(methodName);
            var webCache = method.ReturnParameter.Member.GetCustomAttributes(typeof(WebCacheAttribute), true).FirstOrDefault();
            字典 cacheParameters = FixCacheParameters(method, args);
            T 缓存对象；

            if (Config.CacheEnabled && webCache != null)
            {
                cachedObj = ((WebCacheAttribute)webCache).GetCachedParam(cacheParameters, false);
                if (cachedObj != null)
                    返回缓存对象；
            }
            T returnObj = (T)method.Invoke(instance, args);
            SaveCachedData(webCache, returnObj);
            返回返回对象；
        }

        公共静态无效SaveCachedData（对象webCache，对象returnObj）
        {
            if (Config.CacheEnabled && webCache != null)
            {
                var fullParamString = ((WebCacheAttribute)webCache).GetUniqueKey(false);
                CacheManager.Add(fullParamString, returnObj, ((WebCacheAttribute)webCache).Duration);
            }
        }

        公共静态 Dictionary FixCacheParameters(MethodInfo 方法, object[] args)
        {
            字典缓存参数 = new Dictionary();
            如果（参数！= null）
            {
                var arguments = args.ToList();
                变量计数 = 0;
                var argsCount = args.Length;
                var methodParameters = method.GetParameters().ToList();

                foreach（args 中的 var 参数）
                {
                    var key = methodParameters[count].Name;
                    对象值 = 空；

                    如果（argsCount > 计数）
                        值 = 参数 [计数];

                    if (value != null && value.GetType() == typeof(string))
                        value = (object)value.ToString();

                    如果（值！= null）
                        cacheParameters.Add(key, value);

                    计数++；
                }
            }

            返回缓存参数；
        }
    }
```

有关所有这些的更多详细信息，您可以访问我的博客文章 => [ASP.NET MVC 中的自定义输出缓存](http://bstavroulakis.com/blog/web/custom-output-caching-in-asp-net-mvc/)

# php - 删除不在我的数据库中的文件

> ID：12091289
> 
> 赞同：0
> 
> 时间：2012-08-23T12:11:20.387
> 
> 标签：php, mysql

我正在尝试从名为“照片”的文件夹中删除当前不在我的数据库中的照片。（这些都是我一直在构建网站并对其进行测试等时堆积起来的照片，所以现在是时候让网站上线了，我不希望所有这些浪费在里面）

我有三个表，其中包含照片信息，并且贯穿始终。下面是一个关于我认为它应该是什么样子的模型查询。

```
SELECT left_image, right_image, photo1, photo2, photo3, photo4, home_photo 
FROM about_photos, facilities, home 
```

`left_image`和`right_image`去`about_photos`。 `photo1`, `photo2`,`photo3`和`photo4`一起去`facilities`。 `home_photo`与`home`.

另外，我需要在照片的末尾使用通配符，因为文件有缩略图，所以例如原始照片会被调用，`abcimage.jpg`但是在我只存储的数据库中也会有`abcimage.jpg`, `abcimage_medium.jpg`,并添加其余的文件名取决于它的去向。`abcimage_thumb.jpg``photos/abcimage`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:20:26.980

```
$directory = "../path/to/photos_directory/";

//get all image files with a .jpg extension.
$images = glob($directory . "*.jpg");

foreach($images as $image)
{
    $name = explode('_',$image);
    $name = 'photos/' . $name[0];
    $sql = mysql_query("SELECT id FROM table WHERE photo1='$name' OR photo2='$name'");
    if(mysql_num_rows($sql) == 0)
        unlink($directory . $image);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:25:01.160

你有两个选择：

**一：**

*   使用 SQL 查询，获取数据库中引用的所有照片的完整列表
*   遍历目录中的文件
    *   如果文件是图像并且不在您的列表中，请删除该文件。

**二：**

*   遍历目录中的文件
    *   如果文件是图像
        *   在数据库中查询该文件名
            *   如果响应为空，则删除文件

确切的 SQL 查询取决于您未提供的表结构。

最佳选择主要取决于规模。如果数据库中有很多图像，那么第一个选项涉及在内存中拥有一个非常大的列表。然而，第二个版本涉及更多的数据库查询。所以这是一个权衡。

还有更复杂的选项涉及缓存和抢先查询，但我想你还不想那么深。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-17T13:13:12.253

类似于以下内容。我在文件夹中也有原始文件，我一次限制为 500 个删除。根据需要进行调整。希望它可以节省某人的时间...

```
<?php

require 'session.php';
require 'settings.php';

/* Execute the query. */  
$DBH = new PDO($mssql_driver.'='.$mssql_server.';'.$mssql_dbkey.'='.$mssql_database,        $mssql_username, $mssql_password); 
$DBH->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );  

$tsql = 'select * from ProductImage';
$PRE = $DBH->prepare($tsql);
$PRE->execute();

$pictures =$PRE->fetchAll(PDO::FETCH_ASSOC);

$directory = $_SERVER["DOCUMENT_ROOT"]."\..\..\products\pictures/";

//get all image files with a .jpg extension.
$images = glob($directory . "*.jpg");

$counter =0;

foreach($images as $image)
{
   $name = explode('pictures/',$image);
   $name =  $name[1];

    $foundImage = false;

    print  "checking: ".$name;

    foreach ($pictures as $picture){

         $original_file = explode('.', $picture['Image_Big']);
         $original_file = $original_file[0].'-original.'.$original_file[1];

         if ( ($picture['Image_Small'] == $name)|| ($picture['Image_Big'] == $name) || ( $original_file == $name) || ($picture['Image_Thumb'] == $name) || ($picture['Image_PriceList'] == $name)){
               $foundImage = true;  
               break;       
         }
    }

    if (!$foundImage) {
         unlink($directory . $name);

         print "....deleting";

         $counter += 1;

     }

     print "<br />";

     if ($counter> 500){ 
         exit;
     }
} 
```

?>

# sql-server-2008 - 在 windows7 上使用 powershell 脚本创建 sqlserver 数据库的备份

> ID：12091307
> 
> 赞同：0
> 
> 时间：2012-08-23T12:11:56.540
> 
> 标签：sql-server-2008, powershell, windows-7

嗨，我正在尝试编写一个 powershell 脚本来在 windows7 终极机器上创建 mdf 文件（sqlserver 数据库文件）的备份

但是当我运行我的脚本时，它会显示错误：

```
New-Object : Cannot find type [Microsoft.SqlServer.Management.Smo.Backup]: make sure the assembly
is loaded.
At C:\Users\abc\tmp.ps1:5 char:23
+ $dbBackup = new-object <<<<  ("Microsoft.SqlServer.Management.Smo.Backup")
    + CategoryInfo          : InvalidType: (:) [New-Object], PSArgumentException
    + FullyQualifiedErrorId : TypeNotFound,Microsoft.PowerShell.Commands.NewObjectCommand

Property 'Database' cannot be found on this object; make sure it exists and is settable.
At C:\Users\abc\tmp.ps1:8 char:11
+ $dbBackup. <<<< Database = "ds"
    + CategoryInfo          : InvalidOperation: (Database:String) [], RuntimeException
    + FullyQualifiedErrorId : PropertyNotFound

You cannot call a method on a null-valued expression.
At C:\Users\abc\tmp.ps1:11 char:28
+ $dbBackup.Devices.AddDevice <<<< ("D:\backups\BLACKSWASTIK.bak", "File")
    + CategoryInfo          : InvalidOperation: (AddDevice:String) [], RuntimeException
    + FullyQualifiedErrorId : InvokeMethodOnNull

Property 'Action' cannot be found on this object; make sure it exists and is settable.
At C:\Users\abc\tmp.ps1:14 char:11
+ $dbBackup. <<<< Action="Database"
    + CategoryInfo          : InvalidOperation: (Action:String) [], RuntimeException
    + FullyQualifiedErrorId : PropertyNotFound

You cannot call a method on a null-valued expression.
At C:\Users\abc\tmp.ps1:17 char:20
+ $dbBackup.SqlBackup <<<< ($s)
    + CategoryInfo          : InvalidOperation: (SqlBackup:String) [], RuntimeException
    + FullyQualifiedErrorId : InvokeMethodOnNull 
```

这是我的代码：

```
[System.Reflection.Assembly]::LoadWithPartialName('Microsoft.SqlServer.SMO') | out-null
$s = New-Object ('Microsoft.SqlServer.Management.Smo.Server') "localhost\sqlexpress2008"

$dbBackup = new-object ("Microsoft.SqlServer.Management.Smo.Backup")

#Set the Database property to Northwind 
$dbBackup.Database = "bs"

#Add the backup file to the Devices collection and specify File as the backup type 
$dbBackup.Devices.AddDevice("D:\backups\BLACKSWASTIK.bak", "File")

#Specify the Action property to generate a FULL backup 
$dbBackup.Action="Database"

#Call the SqlBackup method to generate the backup 
$dbBackup.SqlBackup($s) 
```

这段代码在 xp 机器上运行良好，但我想在 windows7 终极机器上运行它有什么需要改变的吗？请建议....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:33:40.737

查看MSDN上关于运行 SQL Server Powershell 的[这篇文章。](http://msdn.microsoft.com/en-us/library/cc281962%28v=sql.105%29.aspx)它为您提供了先决条件以及一个不错的脚本，您可以运行加载所有必需的程序集和命名空间。然后，您可以将其 DotSource 到您的脚本中，以使您可以访问 SMO。

对于我的环境，我采用了这个脚本，对其进行了一些调整，并创建了一个[PowerShell 模块](http://msdn.microsoft.com/en-us/library/windows/desktop/dd878324%28v=vs.85%29.aspx)，以便更容易地将代码引入我的脚本中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T23:22:46.963

@Brandon 有正确的想法，但不是最新的信息。如果您在[sqlps 实用程序上查看](http://msdn.microsoft.com/en-us/library/cc280450.aspx)*此*MSDN 页面，您将看到它已被弃用，并在第二段中指出“此功能将在 Microsoft SQL Server 的未来版本中删除”。这确实是 SQL Server 2012 的情况，它带有内置的 sqlps**模块**（与 sqlps**实用程序**不同）。您可以按照 Brandon 的建议制作自己的 sqlps 模块，但您不需要这样做，因为[本文](http://sev17.com/2010/07/making-a-sqlps-module/)末尾有一个可供下载的版本。对于“sqlps”与“sqlps”与“sqlps”的完整扭曲、混淆和可怕的故事******，[第 1 部分](http://www.simple-talk.com/sql/database-administration/practical-powershell-for-sql-server-developers-and-dbas-%E2%80%93-part-1/)和[第 2 部分](http://www.simple-talk.com/sql/database-administration/practical-powershell-for-sql-server-developers-and-dbas-%E2%80%93-part-2/)，刚刚在 Simple-Talk.com 上发布。您还可以在此处找到我的挂图的链接，该链接将您需要从两篇文章中了解的所有内容都放在一张纸上。******

# php - MySQL 高分 - 用户的个人排名：重复的条目导致不正确的值

> ID：12091313
> 
> 赞同：1
> 
> 时间：2012-08-23T12:12:08.880
> 
> 标签：php, mysql

我目前正在用 PHP 创建一个页面，该页面将在我的网站的高分中显示用户及其排名。

但是，我有一个领域与其他领域不同，并且没有按预期运行。

这是我的桌子：

```
-- ----------------------------
--  Table structure for `playerstats`
-- ----------------------------
DROP TABLE IF EXISTS `playerstats`;
CREATE TABLE `playerstats` (
  `uid` int(11) NOT NULL DEFAULT '0',
  `gamelevel` int(11) NOT NULL DEFAULT '0',
  `overall` int(11) NOT NULL DEFAULT '0',
  `overallxp` bigint(20) NOT NULL DEFAULT '0',
  KEY `uid` (`uid`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

...以及一些示例数据：

```
INSERT INTO `playerstats` VALUES ('14950', '123', '1495', '129825211')
INSERT INTO `playerstats` VALUES ('28967', '124', '1495', '127168799')
INSERT INTO `playerstats` VALUES ('95848', '121', '1495', '108481173') 
```

这是我的查询：

```
SELECT count(*) + 1 FROM (SELECT uid, overall, overallxp, gamelevel FROM playerstats GROUP BY playerstats.uid) AS x WHERE overall > (SELECT overall FROM playerstats WHERE uid = ". $userid .")" 
```

...和 ​​$userid 是：

```
$userid = (int) $_GET['searched']; 
```

现在，当我导航到 userid14950 的个人高分时，它会显示该用户的正确总体排名，因为他们是总体总体 xp 最高的人。但是，当我访问 userid28967 或 userid95848 的个人高分时，由于某种原因，它们的总体排名与 userid14950 相同（很可能是因为我没有考虑到总体结果相同的用户）。

我的问题是：如果两个（或更多）用户共享相同的整体，我将如何做到这一点，他们会显示正确的排名，而不是重复的排名？

就是这样。
很感谢任何形式的帮助 ：）

谢谢，
马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:48:40.253

尝试这个：

```
SET @rank = 0;
SELECT rank FROM (
    SELECT @rank:=@rank + 1 AS rank, uid FROM playerstats ORDER BY overall DESC, 
    overallxp  DESC
) as tmp WHERE uid = 14950 
```

avove 查询将返回 user14950 的排名

此查询将列出所有用户及其排名

```
SET @rank=0;
SELECT rank, uid, overall, overallxp FROM (
SELECT @rank:=@rank + 1 AS rank, uid, overall, overallxp FROM playerstats ORDER BY overall DESC, overallxp DESC
) as tmp 
```

# objective-c - 如何获取 AVPlayer 的视频帧？

> ID：12091315
> 
> 赞同：12
> 
> 时间：2012-08-23T12:12:15.470
> 
> 标签：objective-c, avfoundation, avplayer, avplayerlayer

我有用于显示 AVPlayer 播放的 PlayerView 类。来自[文档](https://developer.apple.com/library/archive/documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/02_Playback.html#//apple_ref/doc/uid/TP40010188-CH3-SW1)的代码。

```
#import <UIKit/UIKit.h>
#import <AVFoundation/AVFoundation.h>

@interface PlayerView : UIView
@property (nonatomic) AVPlayer *player;
@end

@implementation PlayerView
+ (Class)layerClass {
    return [AVPlayerLayer class];
}
- (AVPlayer*)player {
    return [(AVPlayerLayer *)[self layer] player];
}
- (void)setPlayer:(AVPlayer *)player {
    [(AVPlayerLayer *)[self layer] setPlayer:player];
}
@end 
```

我在此 PlayerView（frame.size.width = 100，frame.size.height = 100）中设置了我的 AVPlayer（包含大小为 320x240 的视频资产），并且调整了我的视频大小。添加 PlayerView 后如何获取视频大小？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-09-25T06:58:30.473

在**iOS 7.0**中增加了新功能：

**AVPlayerLayer**有属性*videoRect*。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-10-20T21:02:31.297

This worked for me. When you don't have the AVPLayerLayer.

```
- (CGRect)videoRect {
    // @see http://stackoverflow.com/a/6565988/1545158

    AVAssetTrack *track = [[self.player.currentItem.asset tracksWithMediaType:AVMediaTypeVideo] firstObject];
    if (!track) {
        return CGRectZero;
    }

    CGSize trackSize = [track naturalSize];
    CGSize videoViewSize = self.videoView.bounds.size;

    CGFloat trackRatio = trackSize.width / trackSize.height;
    CGFloat videoViewRatio = videoViewSize.width / videoViewSize.height;

    CGSize newSize;

    if (videoViewRatio > trackRatio) {
        newSize = CGSizeMake(trackSize.width * videoViewSize.height / trackSize.height, videoViewSize.height);
    } else {
        newSize = CGSizeMake(videoViewSize.width, trackSize.height * videoViewSize.width / trackSize.width);
    }

    CGFloat newX = (videoViewSize.width - newSize.width) / 2;
    CGFloat newY = (videoViewSize.height - newSize.height) / 2;

    return CGRectMake(newX, newY, newSize.width, newSize.height);

} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-24T16:42:34.903

找到了解决方案：

添加到 PlayerView 类：

```
- (CGRect)videoContentFrame {
    AVPlayerLayer *avLayer = (AVPlayerLayer *)[self layer];
    // AVPlayerLayerContentLayer
    CALayer *layer = (CALayer *)[[avLayer sublayers] objectAtIndex:0];
    CGRect transformedBounds = CGRectApplyAffineTransform(layer.bounds, CATransform3DGetAffineTransform(layer.sublayerTransform));
    return transformedBounds;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-06-19T21:50:50.490

这是对我有用的解决方案，考虑到 AVPlayer 在视图中的定位。我刚刚将它添加到 PlayerView 自定义类中。我必须解决这个问题，因为 videoRect 在 10.7 中似乎没有工作。

```
- (NSRect) videoRect {
    NSRect theVideoRect = NSMakeRect(0,0,0,0);
    NSRect theLayerRect = self.playerLayer.frame;

    NSSize theNaturalSize = NSSizeFromCGSize([[[self.movie asset] tracksWithMediaType:AVMediaTypeVideo][0] naturalSize]);
    float movieAspectRatio = theNaturalSize.width/theNaturalSize.height;
    float viewAspectRatio = theLayerRect.size.width/theLayerRect.size.height;
    if (viewAspectRatio < movieAspectRatio) {
        theVideoRect.size.width = theLayerRect.size.width;
        theVideoRect.size.height = theLayerRect.size.width/movieAspectRatio;
        theVideoRect.origin.x = 0;
        theVideoRect.origin.y = (theLayerRect.size.height/2) - (theVideoRect.size.height/2);
}
    else if (viewAspectRatio > movieAspectRatio) {

        theVideoRect.size.width = movieAspectRatio * theLayerRect.size.height;
        theVideoRect.size.height = theLayerRect.size.height;
        theVideoRect.origin.x = (theLayerRect.size.width/2) - (theVideoRect.size.width/2);
        theVideoRect.origin.y = 0;
    }
    return theVideoRect;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-19T22:36:42.240

这是移植到 iOS的[Eric Badros 的答案。](https://stackoverflow.com/a/30947795/4122965)我还添加了preferredTransform 处理。这假设`_player`是一个`AVPlayer`

```
- (CGRect) videoRect {
    CGRect theVideoRect = CGRectZero;

    // Replace this with whatever frame your AVPlayer is playing inside of:
    CGRect theLayerRect = self.playerLayer.frame;

    AVAssetTrack *track = [_player.currentItem.asset tracksWithMediaType:AVMediaTypeVideo][0];
    CGSize theNaturalSize = [track naturalSize];
    theNaturalSize = CGSizeApplyAffineTransform(theNaturalSize, track.preferredTransform);
    theNaturalSize.width = fabs(theNaturalSize.width);
    theNaturalSize.height = fabs(theNaturalSize.height);

    CGFloat movieAspectRatio = theNaturalSize.width / theNaturalSize.height;
    CGFloat viewAspectRatio = theLayerRect.size.width / theLayerRect.size.height;

    // Note change this *greater than* to a *less than* if your video will play in aspect fit mode (as opposed to aspect fill mode)
    if (viewAspectRatio > movieAspectRatio) {
        theVideoRect.size.width = theLayerRect.size.width;
        theVideoRect.size.height = theLayerRect.size.width / movieAspectRatio;
        theVideoRect.origin.x = 0;
        theVideoRect.origin.y = (theLayerRect.size.height - theVideoRect.size.height) / 2;
    } else if (viewAspectRatio < movieAspectRatio) {
        theVideoRect.size.width = movieAspectRatio * theLayerRect.size.height;
        theVideoRect.size.height = theLayerRect.size.height;
        theVideoRect.origin.x = (theLayerRect.size.width - theVideoRect.size.width) / 2;
        theVideoRect.origin.y = 0;
    }
    return theVideoRect;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-03T20:40:31.700

这是基于[Andrey Banshchikov 的回答](https://stackoverflow.com/a/40164496/1877617)的 Swift 解决方案。当您无法访问`AVPLayerLayer`.

```
func currentVideoFrameSize(playerView: AVPlayerView, player: AVPlayer) -> CGSize {
    // See https://stackoverflow.com/a/40164496/1877617
    let track = player.currentItem?.asset.tracks(withMediaType: .video).first
    if let track = track {
        let trackSize      = track.naturalSize
        let videoViewSize  = playerView.bounds.size
        let trackRatio     = trackSize.width / trackSize.height
        let videoViewRatio = videoViewSize.width / videoViewSize.height

        var newSize: CGSize

        if videoViewRatio > trackRatio {
            newSize = CGSize(width: trackSize.width * videoViewSize.height / trackSize.height, height: videoViewSize.height)
        } else {
            newSize = CGSize(width: videoViewSize.width, height: trackSize.height * videoViewSize.width / trackSize.width)
        }

        return newSize
    }
    return CGSize.zero
} 
```

# c# - MVC2 绑定不适用于自定义类型

> ID：12091316
> 
> 赞同：0
> 
> 时间：2012-08-23T12:12:22.093
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-2, model-binding

我已将模型中的字符串属性转换为具有与我的自定义类型之间的隐式运算符的类`EngNum`。我这样做是为了让这种类型的所有出现都有我的自定义编辑器，即使该类型应该像字符串一样表现和使用。

我的问题是该属性不再正确绑定到我的模型，即使该值存在于 POST 的表单中。

请参阅下面的我的`EngNum`类型：

```
public class EngNum
{
    private string internalString;

    public EngNum() { }

    public EngNum(string number)
    {
        internalString = number;
    }

    public static implicit operator string(EngNumnumber)
    {
        return number == null ? null : number.internalString;
    }

    public static implicit operator EngNum(string number)
    {
        return new EngineerNumber() { internalString = number };
    }
} 
```

现在它显示在视图中：

```
<%= Html.EditorFor(m => m.EngineerNumber) %> 
```

这是它的编辑器：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<ThreeSixtyScheduling.Models.EngineerNumber>" %>
<%@ Import Namespace="ThreeSixtyScheduling.BLL.Utilities" %>
<%= Html.ComboBoxFor(m => m,
                     new { @class = "EngineerNumber" },
                     Url.Action("MasternautEngineers", "Data", new { area = (string)null }),
                     Model, 0) %> 
```

`ComboBoxFor``TextBoxFor`与一些 jquery 一起呈现 a 。

在我从视图中获取此代码并将其放入编辑器之前，它运行良好。

**我必须做些什么才能在回发时正确绑定我的财产？**

* * *

控制器动作中的有以下与属性`ModelState`关联的异常：`EngineerNumber`

> {System.InvalidOperationException：从类型“System.String”到类型“ThreeSixtyScheduling.Models.EngNum”的参数转换失败，因为没有类型转换器可以在这些类型之间进行转换。在 System.Web.Mvc.ValueProviderResult.ConvertSimpleType(CultureInfo 文化，对象值，类型 destinationType) 在 System.Web.Mvc.ValueProviderResult.UnwrapPossibleArrayType(CultureInfo 文化，对象值，类型 destinationType) 在 System.Web.Mvc.ValueProviderResult.ConvertTo （类型类型，CultureInfo 文化）在 System.Web.Mvc.DefaultModelBinder.ConvertProviderResult(ModelStateDictionary modelState, String modelStateKey, ValueProviderResult valueProviderResult, Type destinationType)}

* * *

控制器方法（和模型类型）：

```
[HttpPost]
public ActionResult CreateStockcheckJob(CreateStockcheckJobModel viewModel)

public class CreateStockcheckJobModel
{
    [Required]
    [DisplayName("Engineer Number")]
    public EngNum EngineerNumber { get; set; }

    [Required]
    [DisplayName("Date and Time")]
    public DateTime DateAndTime { get; set; }

    public bool JobCreated { get; set; }

    public CreateStockcheckJobModel()
    {
        DateAndTime = DateTime.Today.WithTimeOfDay(8, 0, 0);
    }
} 
```

代码`ComboBoxFor`：

```
 public static MvcHtmlString ComboBoxFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper,
                                                               Expression<Func<TModel, TProperty>> expression,
                                                               object htmlProperties,
                                                               string ajaxJSONLocation,
                                                               string selectedValue,
                                                               int minLength)
    {
        return ComboBoxFor(htmlHelper, expression, htmlProperties, ajaxJSONLocation, selectedValue, minLength, false, string.Empty);
    }

    public static MvcHtmlString ComboBoxFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper,
                                                               Expression<Func<TModel, TProperty>> expression,
                                                               object htmlProperties,
                                                               string ajaxJSONLocation,
                                                               string selectedValue,
                                                               int minLength,
                                                               bool hideId,
                                                               string selectCallbackScript)
    {
        var textboxHTML = htmlHelper.TextBoxFor(expression, htmlProperties);

        var scriptString = @"<script type=""text/javascript"">
$(function() {
    " + (string.IsNullOrEmpty(selectedValue) ? "$('#" + htmlHelper.IdFor(expression) + @"').val('')" : string.Empty) + @"
    $.getJSON('" + ajaxJSONLocation + @"', function(result) {

        $('#" + htmlHelper.IdFor(expression) + @"').autocomplete({
                                                                     minLength: " + minLength.ToString() + @",
                                                                     source: function(request, response) {
                                                                                 dataArray = new Array();
                                                                                 $.each(result, function(k, v) {
                                                                                    if (v.value.toUpperCase().indexOf(request.term.toUpperCase()) != -1 ||
                                                                                        v.desc.toUpperCase().indexOf(request.term.toUpperCase()) != -1) {
                                                                                        dataArray.push(v);
                                                                                    }
                                                                                 });
                                                                                 response(dataArray);
                                                                     },
                                                                     focus: function(event, ui) {},
                                                                     select: function(event, ui) {
                                                                     $('#" + htmlHelper.IdFor(expression) + @"').val( ui.item.value );
                                                                     " + selectCallbackScript + @"
                                                                     return false; }
                                                            })
                                                   .data(""autocomplete"")._renderItem = function (ul, item) {
                                                        return $(""<li></li>"")
                                                                .data(""item.autocomplete"", item)
                                                                .append(""<a>"" + " + (hideId ? string.Empty : @"item.value + ""<br/>"" + ") + @"""<span>"" + item.desc + ""</span></a>"")
                                                                .appendTo(ul);
                                                   };
    });
});
</script>";

        return MvcHtmlString.Create(textboxHTML.ToString() + scriptString);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-28T22:08:55.047

您需要通过`TypeConverterAttribute`. ASP.NET MVC 将使用此类型转换器将字符串转换为您的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T12:57:18.670

模型绑定器不会调用您的自定义隐式运算符。您需要拥有同名的公共属性或编写自定义模型绑定器。通常您不需要在视图模型上使用隐式运算符。

# c# - 如何在第一个选择的属性上使用新的选择？

> ID：12091322
> 
> 赞同：1
> 
> 时间：2012-08-23T12:12:34.073
> 
> 标签：c#, asp.net, linq

我的代码是：

```
var serverManager = new ServerManager();
var regex = new Regex("^(http|https)://");
var host = regex.Replace(url, "");
var instance = serverManager.Sites.First(
    site => site.Bindings.First(
        binding => binding.Host == host
    )
); 
```

你可以看到我尝试对第一个属性进行第二次选择，因为`Bindings`它是一个集合，我需要这个集合的一个特定项目。我收到此错误：

```
Cannot implicitly convert type 'Microsoft.Web.Administration.Binding' to 'Bool'. 
```

有什么办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:17:30.210

您正在寻找

```
var instance = serverManager.Sites.First(
    site => site.Bindings.Any(
        binding => binding.Host == host
    )
); 
```

`site.Bindings.First(binding => binding.Host == host)`返回 a `Binding`，但它在 内部`serverManager.Sites.First(...)`，这反过来又需要一个谓词（返回 a `bool`），而不是 a `Binding`。

上面的代码片段`Any`用于获取第一个与`Host == host`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T12:14:20.097

```
var instance = serverManager.Sites.SelectMany(b =>b.Bindings).First(
                binding => binding.Host == host); 
```

那应该解决它。

# linux - bash / sh -c 不适用于多个管道

> ID：12091324
> 
> 赞同：7
> 
> 时间：2012-08-23T12:12:37.920
> 
> 标签：linux, bash, shell

所以，命令：

```
dmesg | grep 'Attached SCSI disk' | awk '{ print $5}' 
```

当直接从 shell 执行时，工作正常，输出：

> `[sdb]`
> `[sdc]`
> `[sda]`

但是，当我启动它时：

```
sh -c "dmesg | grep 'Attached SCSI disk' | awk '{ print $5}'"
# or
bash -c "dmesg | grep 'Attached SCSI disk' | awk '{ print $5}'" 
```

我得到：

> `[ 2.460353] sd 1:0:0:0: [sdb] Attached SCSI disk`
> `[ 2.461348] sd 2:0:0:0: [sdc] Attached SCSI disk`
> `[ 2.464181] sd 0:0:0:0: [sda] Attached SCSI disk`

这清楚地表明最后一个管道尚未执行。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-23T12:16:03.830

你`$5`的评估太早了。将其更改为`\$5`.

如果要替换`bash`为`echo`，您会看到它`$5`被空字符串替换：

```
 % echo "dmesg | grep 'Attached SCSI disk' | awk '{ print $5}'"
 dmesg | grep 'Attached SCSI disk' | awk '{ print }' 
```

因此，当 bash 评估命令时，awk 将打印整行，而不是第五个字段。

当您转义美元符号时（通过使用反斜杠预先添加），变量`$5`将被保留：

```
% echo "dmesg | grep 'Attached SCSI disk' | awk '{ print \$5}'"
dmesg | grep 'Attached SCSI disk' | awk '{ print $5}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T18:43:01.013

`$1`shell 和 awk 在, `$2`, ...的使用和解释上存在冲突

在所有 Bourne 后代（ash、bash、dash、ksh93、zsh）中，这些表示在命令行上传递的编号参数，而`$0`替换为当前正在运行的脚本的名称或交互式 shell 的名称。

在`awk`, `$1`, , ... 中指的是当前*记录*`$2`的对应*字段*，即当前输入行的第一个、第二个等字。 总是指整个记录，包括任何字段分隔符。*`$0`*

 *从 shell（脚本）调用`awk`时，您必须确保正确引用了 awk 脚本。为防止 shell 插值，请将 awk 代码括在单引号内。*

# wcf - 为什么 ENLIST=TRUE 会增加 oracle 的最大会话数？

> ID：12091327
> 
> 赞同：0
> 
> 时间：2012-08-23T12:12:52.687
> 
> 标签：wcf, msdtc

我们在 WCF 服务中使用 MSDTC。配置包括 3 台计算机： 1\. Linux 上的服务器 Oracle。2\. 服务器 2003 上带有服务 WCF 客户端的 IIS。 3\. 服务器 2003 上带有服务 WCF 和服务器 Oracle 的 IIS。

如果连接字符串具有属性 ENLIST=FALSE，则服务有效！但分布式事务并非总是能正常工作。有时一侧（客户端服务）已提交，另一侧（服务器服务）未提交。

如果连接字符串具有属性 ENLIST=TRUE，则服务正常工作！但是 oracle 的会话数增加了最大值并且服务不起作用。

谁能告诉我为什么当 ENLIST=TRUE 时会话会增加？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:00:08.017

问题已解决。使用 IIS 在 mashine 上安装了两个客户端，应用程序与一个客户端一起工作，msdtc 由另一个客户端支持。删除两个客户端并安装一个客户端应用程序后成功！

# java - 在 J2ME 波兰语中配置图标的大小

> ID：12091331
> 
> 赞同：2
> 
> 时间：2012-08-23T12:13:22.623
> 
> 标签：java, java-me, icons, midlet, j2mepolish

如何配置图标的大小以正确适应多个移动设备？

基于[J2ME Polish 文档](http://www.enough.de/products/j2me-polish/documentation/building/resource-handling/resource-assembling.html)，我使用以下`resources`文件夹结构：

```
IconSize.15x15\icon.png
IconSize.16x16\icon.png
... 
```

但它不起作用，我已经在几个移动设备上尝试过，它们都加载了默认的 J2ME 波兰语图标。

这是我的`build.xml`文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="myProject" default="j2mepolish">
    <property name="polish.home" location="C:\Program Files (x86)\J2ME-Polish" />
    <property name="wtk.home" location="C:\JavaME_SDK" />
    <taskdef
        name="j2mepolish"
        classname="de.enough.polish.ant.PolishTask"
        classpath="${polish.home}/lib/enough-j2mepolish-build.jar"
    />
    <target name="run">
        <j2mepolish>
            <info
                name="My Project"
                version="1.0.0"
                description="My Project"
                vendorName="Diogo"
                jarName="myProject.jar"
            />
            <deviceRequirements>
                <requirement name="Term" value="polish.api.wmapi" />
                <requirement name="Identifier" value="Generic/AnyPhone" />
            </deviceRequirements>
            <build
                usePolishGui="true">
                <libraries>
                        <library file="lib/json-1.0.jar" />
                </libraries>
                <midlet class="myProject" />
                <resources
                    dir="resources/"
                    defaultexcludes="yes"
                    excludes="readme.txt" >
                    <root dir="resources/" includeSubDirs="true" includeBaseDir="true" />
                </resources>
                <variables>
                    <variable name="polish.usePolishTitle" value="true" />
                    <variable name="polish.TextField.suppressCommands" value="true" />
                    <variable name="polish.TextField.useDirectInput" value="true" />
                    <variable name="polish.TextField.showInputInfo" value="false" />
                </variables>
                <obfuscator name="ProGuard"></obfuscator>
                <postcompiler name="java5" />
            </build>
            <emulator />
        </j2mepolish>
    </target>
    <target name="clean">
        <delete dir="build" />
        <delete dir="dist" />
    </target>
</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:33:56.970

Java ME 应用程序图标在 Jad 和 Manifest 键上定义。它通常以`MIDlet-Icon`和 的第二个值通知`MIDlet-1`。请参阅有关它的其他问题[add icon to j2me application](https://stackoverflow.com/questions/3730243/add-icon-to-j2me-application)。并且还看到关于图标大小的其他问题[J2ME 有标准的图标大小和颜色深度吗？](https://stackoverflow.com/questions/481715/is-there-a-standard-icon-size-and-color-depth-for-j2me).

在您提供的链接[http://www.enough.de/products/j2me-polish/documentation/building/resource-handling/resource-assemble.html](http://www.enough.de/products/j2me-polish/documentation/building/resource-handling/resource-assembling.html)有这样的文字：“您可以使用 IconSize.0x0 存储图标具有未知 IconSize 功能的设备的资源”

我建议您，根据我对图标的个人经验 - 而不是波兰语 - 在此文件夹中添加 32x32 png 图标图像。

# camera - 从相机预览中主动读取 150 x 150 像素

> ID：12091332
> 
> 赞同：0
> 
> 时间：2012-08-23T12:13:22.600
> 
> 标签：camera, preview, pixels

我已经设置了一个 Android 相机应用程序，它允许我在我的主 Activity 的框架布局中预览相机。我想做的是（不使用相机特定功能；我希望它完全独立于硬件。）通过在像素周围显示一个框或模糊所有除了 150 x 150 以外的像素。另外，不拍照，我想读取这些像素。最终我想要的效果是，随着相机的移动，我会在 150 x 150 区域内显示红色、绿色和蓝色浓度的变化。我知道如何进行嵌套 for 循环并从像素中获取颜色，但我需要知道如何获取高度和重量的偏移量才能开始读取像素。提前感谢您的所有帮助！麦克风

```
public class MyActivity extends Activity {
    final public String TAG = "MyActivity";
    static private Camera mCamera = null;
    static public Camera getCamera() { return mCamera; }
    private static boolean mBPreviewingCamera = false;
    private PreviewSurface mPS;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        String lMTH = "onCreate ";
        Log.i(TAG, lMTH + "Start");
        setContentView(R.layout.activity_color_temperature_estimator);
        if (isThereACamera()) {
            mPreviewCamera(true);
            TextView lTVTemp = (TextView) findViewById(R.id.TV_TEMP);
            lTVTemp.setText("Camera exists able to proceed");
            lTVTemp = null;
        } else {
            Toast.makeText(this, "No camera! Uunable to proceed", Toast.LENGTH_LONG).show();
            TextView lTVTemp = (TextView) findViewById(R.id.TV_TEMP);
            lTVTemp.setText("No camera! Uunable to proceed");
            lTVTemp = null;
        }
    }

    public void mPreviewCamera(boolean pBPreviewingCamera) {
        String lMTH = "mPreviewCamera ";
        try {
            if (pBPreviewingCamera) {
                Log.i(TAG, lMTH + "Open Camera");
                mCamera = Camera.open();
                mPS = new PreviewSurface(this);
                FrameLayout lFVPreview = (FrameLayout) findViewById(R.id.FL_Preview);
                lFVPreview.addView(mPS);
                lFVPreview = null;

                mBPreviewingCamera = true;
                Button lBTNTemp = (Button) findViewById(R.id.BTN_CLOSE);
                lBTNTemp.setText(R.string.BTN_CLOSE);
                lBTNTemp = null;
            } else {
                Log.i(TAG, lMTH + "Open Camera");
                mCloseCamera();
                Button lBTNTemp = (Button) findViewById(R.id.BTN_CLOSE);
                lBTNTemp.setText(R.string.BTN_OPEN);
                lBTNTemp = null;
            }

        } catch (Exception e) {
            Log.i(TAG, lMTH + e.getMessage());
            mCloseCamera();
            e.printStackTrace();
        }
    }

    public void mCloseCamera() {
        String lMTH = "mCloseCamera ";
        Log.i(TAG, lMTH + "Turn Camera Off");
        if (mCamera != null) {
            mCamera.stopPreview();
            mCamera.release();
        }
        mCamera = null;
        mBPreviewingCamera = false;
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        String lMTH = "onPause ";
        Log.i(TAG, lMTH + "Turn Camera Off");
        mPreviewCamera(false);
    }

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        String lMTH = "onDestroy ";
        Log.i(TAG, lMTH + "Turn Camera Off");
        mPreviewCamera(false);
    }

    /** Check if this phone has a camera */
    private boolean isThereACamera() {
        if (getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA)){
            // There is a camera
            return true;
        } else {
            // There isn't a camera
            return false;
        }
    }

    public void mBTN(View view) {
        mPreviewCamera(!mBPreviewingCamera);
    }
}

public class PreviewSurface extends SurfaceView implements SurfaceHolder.Callback  {
    final static public String TAG = "PreviewSurface";
    private SurfaceHolder mSH;

    /**
     * @param context
     */
    public PreviewSurface(Context pContext) {
        super(pContext);
        // TODO Auto-generated constructor stub
        String lMTH = "PreviewSurface(Context pContext) ";
        Log.i(TAG, lMTH + "Constructor");

        pContext = null;
        mSH = getHolder();
        mSH.addCallback(this);
        mSH.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

    }

    /* (non-Javadoc)
     * @see android.view.SurfaceHolder.Callback#surfaceChanged(android.view.SurfaceHolder, int, int, int)
     */
    public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) {
        String lMTH = "surfaceChanged ";
        // TODO Auto-generated method stub
        Log.i(TAG, lMTH + "arg1 = " + arg1 + " arg2 " + arg2 + " arg3 " + arg3);
        if (arg0.getSurface() != null) {
            // stop old preview if it exists
            try {
                Log.i(TAG, lMTH + "Stop Preview ");
                MyActivity.getCamera().stopPreview();
            } catch (Exception e) {
                Log.i(TAG, lMTH + "Stoping preview exception " + e.getMessage());

            }

            // start new preview
            try {
                Log.i(TAG, lMTH + "Set Preview ");
                MyActivity.getCamera().setPreviewDisplay(arg0);
                Log.i(TAG, lMTH + "Start Preview ");
                MyActivity.getCamera().startPreview();

            } catch (Exception e){
                Log.i(TAG, lMTH + "Starting camera preview exception " + e.getMessage());
            }
          }

          // stop preview before making changes

    }

    /* (non-Javadoc)
     * @see android.view.SurfaceHolder.Callback#surfaceCreated(android.view.SurfaceHolder)
     */
    public void surfaceCreated(SurfaceHolder arg0) {
        String lMTH = "surfaceCreated ";
        // TODO Auto-generated method stub
        try {
            Log.i(TAG, lMTH + "Set Preview ");
            MyActivity.getCamera().setPreviewDisplay(arg0);
            Log.i(TAG, lMTH + "Start Preview ");
            MyActivity.getCamera().startPreview();
        } catch (Exception e) {
            Log.i(TAG, lMTH + "Exception " + e.getMessage());
            e.printStackTrace();
        }

    }

    /* (non-Javadoc)
     * @see android.view.SurfaceHolder.Callback#surfaceDestroyed(android.view.SurfaceHolder)
     */
    public void surfaceDestroyed(SurfaceHolder arg0) {
        String lMTH = "surfaceDestroyed ";
        // TODO Auto-generated method stub
        Log.i(TAG, lMTH + "Activity will handle destroy");

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T23:36:19.320

> “我需要知道如何获得高度和重量的偏移量才能开始读取像素”

使用描述性变量来获取嵌套 for 循环的偏移量的简单方法：

```
int xWidth = 150; // The length you want to concentrate on
int yHeight = 150;
int xCenter = previewWidth/2;
int yCenter = previewHeight/2;
int xStart = xCenter - xWidth/2;
int xEnd = xCenter + xWidth/2;
int yStart = yCenter - yHeight/2;
int yEnd = yCenter + yHeight/2;

for(int y = yStart; y < yEnd; y++) {
    for(int x = xStart; x < xEnd; x++) {
        // read pixels
    }
} 
```

previewWidth 和 previewHeight 可以很容易地从 surfaceChange() 中得到：

```
public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
    previewWidth = w;
    previewHeight = h;
    ...
} 
```

我在这里使用许多变量的原因是为了让您可以清楚地看到我是如何解决这个问题的。

让我知道事情的后续。

# c# - 如何在 .NET 中为属性声明命名空间前缀？

> ID：12091335
> 
> 赞同：1
> 
> 时间：2012-08-23T12:13:24.277
> 
> 标签：c#, xml

问题与此类似：

[如何在 .NET 中的反序列化期间指定 XML 序列化属性以支持命名空间前缀？](https://stackoverflow.com/questions/1254544/how-do-i-specify-xml-serialization-attributes-to-support-namespace-prefixes-duri)

但专门用于属性。我有类似的东西：

`<person xmlns:a="http://example.com" xmlns:b="http://sample.net"> <a:fName a:age="37">John</a:fName> <b:lName>Wayne</b:lName> </person>`

而且我找不到将前缀添加到属性“年龄”的方法。

必须如何更改上面链接中提出的解决方案才能达到目标？我尝试了不同的解决方案但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:57:25.680

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Xml.Serialization;

    namespace XMLSer
    {
        class Program
        {
            static void Main(string[] args)
            {
                FName fname = new FName { Age = 16.5, Text = "John" };

            Person person = new Person();

            person.fname = fname;
            person.lname = "Wayne";

            XmlSerializer ser = new XmlSerializer(typeof(Person));
            ser.Serialize(Console.Out, person);
            Console.ReadKey();
        }
    }

    [XmlRoot(ElementName = "person")]
    public class Person
    {
        [XmlElement(Namespace = "http://example.com")]
        public FName fname;

        [XmlElement(Namespace = "http://sample.com")]
        public string lname;

        [XmlNamespaceDeclarations]
        public XmlSerializerNamespaces xmlns = new XmlSerializerNamespaces();

        public Person()
        {
            xmlns.Add("a", "http://example.com");
            xmlns.Add("b", "http://sample.com");
        }
    }

    public class FName
    {
        [XmlAttribute("age")]
        public double Age;

        [XmlText]
        public string Text;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:25:34.553

您应该能够执行与链接示例中相同的操作（但使用 the`XmlAttributeAttribute`而不是`XmlElementAttribute`）。您的财产声明将类似于：

```
[XmlAttribute(Namespace = "http://example.com")]
public decimal Age { get; set; } 
```

更多详细信息和示例`XmlAttributeAttribute`在[msdn 站点上](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlattributeattribute%28v=vs.90%29)。

要获取`fName`元素的属性，我认为您需要将年龄作为名字属性的属性。属性应该在`fName`元素上还是在`person`元素上？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-23T11:18:03.073

我在尝试将“xsi:schemaLocation”指定为属性时遇到了同样的问题。

我修复了它做下一个：

```
[XmlElement("xsi", Namespace = "http://www.w3.org/2001/XMLSchema-instance")]
public string Xsi { get; set; }    

[XmlAttribute(AttributeName = "schemaLocation", Namespace = "http://www.w3.org/2001/XMLSchema-instance")]
public string SchemaLocation { get; set; } 
```

注意：两个命名空间必须匹配。

# ios - OAuth 2 不记名授权标头

> ID：12091341
> 
> 赞同：13
> 
> 时间：2012-08-23T12:13:40.707
> 
> 标签：ios, nsurlconnection, oauth-2.0, nsurlrequest

随着客户端 API 的更新，HTTPBasicAuthication 方法已替换为 OAuth2`Bearer`授权标头。

使用旧 API，我将执行以下操作：

```
NSURLCredential *credential = [NSURLCredential credentialWithUser:self.account.username 
                                                         password:self.account.token 
                                                      persistence:NSURLCredentialPersistenceForSession];

NSURLProtectionSpace *space = [[NSURLProtectionSpace alloc] initWithHost:kAPIHost
                                                                    port:443
                                                                protocol:NSURLProtectionSpaceHTTPS
                                                                   realm:@"my-api"
                                                    authenticationMethod:NSURLAuthenticationMethodHTTPBasic]; 
```

但这不适用于`Bearer`标题。

现在通常我会像这样添加我自己的标题：

```
NSString *authorization = [NSString stringWithFormat:@"Bearer %@",self.account.token];
[urlRequest setValue:authorization forHTTPHeaderField:@"Authorization"]; 
```

但这个解决方案的问题是 API 将大部分调用重定向到其他 URL，这与安全性有关。重定向后`NSURLRequest`，授权标头从请求中删除，并且由于我无法将 Bearer 方法添加到`NSURLCredentialStorage`重定向后，它无法再进行身份验证。

什么是好的解决方案？我只能想抓住重定向并修改它，`NSURLRequest`所以它确实包含`Bearer`标题。但是怎么做？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-24T12:46:57.783

好吧，经过大量研究，我发现我只需要在`NSURLRequest`重定向呼叫时替换。

没有我希望的那么好，但确实有效。

我使用`AFNetworking`并添加了重定向块，然后检查是否`Authorization`仍然设置了标头，如果没有我创建一个新的`NSMutableURLRequest`并设置所有属性以匹配旧请求（我知道我可能刚刚创建了一个可变副本）：

```
[requestOperation setRedirectResponseBlock:^NSURLRequest *(NSURLConnection *connection, NSURLRequest *request, NSURLResponse *redirectResponse) {

    if ([request.allHTTPHeaderFields objectForKey:@"Authorization"] != nil) {
        return request;
    }

    NSMutableURLRequest *urlRequest = [[NSMutableURLRequest alloc] initWithURL:request.URL cachePolicy:request.cachePolicy timeoutInterval:request.timeoutInterval];
    NSString *authValue = [NSString stringWithFormat:@"Bearer %@", self.account.token];
    [urlRequest setValue:authValue forHTTPHeaderField:@"Authorization"];

    return  urlRequest;

}]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T13:05:32.717

我正在使用 AFNetworking 库

找到**AFHttpClient.m**你有一个方法

```
- (void)setAuthorizationHeaderWithToken:(NSString *)token {
    [self setDefaultHeader:@"Authorization" value:[NSString stringWithFormat:@"Token token=\"%@\"", token]];
} 
```

将此方法替换为以下内容，或者如果您需要它以实现向后兼容性，请将其保留为具有不同名称的添加并使用该名称

```
- (void)setAuthorizationHeaderWithToken:(NSString *)token {
    [self setDefaultHeader:@"Authorization" value:[NSString stringWithFormat:@"Bearer %@", token]];
} 
```

然后使用 oauth 访问令牌发出请求。（以下是一个GET方法服务）

```
 NSURL *url = [EFServiceUrlProvider getServiceUrlForMethod:methodName];
    AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];
    [httpClient setAuthorizationHeaderWithToken:@"add your access token here"];

    [httpClient getPath:@"" parameters:params success:^(AFHTTPRequestOperation *operation, id responseObject) {
        NSString *response = [[NSString alloc] initWithData:responseObject encoding:NSUTF8StringEncoding];
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        //
    }]; 
```

# 更新

* * *

在 matt 编写的 AFNetworking 上使用 Oauth2 客户端

[https://github.com/AFNetworking/AFOAuth2Client](https://github.com/AFNetworking/AFOAuth2Client)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-20T14:52:32.823

如果您碰巧在 Django REST 框架和路由器中遇到此问题，则该问题可能与 NSUrlRequest 剪切的尾部斜杠有关。如果尾部斜杠被剪裁，那么 django 将不得不重定向您的请求，为避免这种情况，您可以像这样使用 Trailing_slash = True

```
router = routers.DefaultRouter(trailing_slash=False) 
```

这样，您的授权标头和参数都不会丢失。

希望这可以节省一些时间。

# python - django 模板引擎中的印地语或波斯语数字

> ID：12091353
> 
> 赞同：6
> 
> 时间：2012-08-23T12:14:06.783
> 
> 标签：python, django, django-templates, persian, hindi

我想用波斯语或印地语编码打印 {{forloop.counter}} 意味着有“1 2 3 4 ..”而不是“1 2 3 4 ...”。我搜索了很多，但找不到任何相关功能。你介意帮助我吗？

问候

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-04-25T19:48:03.147

您可以创建自己的模板过滤器。

```
@register.filter(name='persian_int')
def persian_int(english_int):
    devanagari_nums = ('۰', '۱', '۲', '۳', '۴', '۵', '۶', '۷', '۸', '۹')
    number = str(english_int)
    return ''.join(devanagari_nums[int(digit)] for digit in number)

def hindi_int(english_int):
    devanagari_nums = ('०','१','२','३','४','५','६','७','८','९')
    number = str(english_int)
    return ''.join(devanagari_nums[int(digit)] for digit in number) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-24T06:27:56.403

您可以使用[自定义模板过滤器](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-custom-template-filters)。我对 Django 的 l10n 库不够熟悉，不知道他们是否为您执行此操作。

```
def devanagari_int(arabic_int):
    """ Converts an arabic numeral (ex. 5817) to Devanagari (ex. ५८१७) """
    devanagari_nums = ('०','१','२','३','४','५','६','७','८','९')
    #    arabic_nums = ('۰','١','۲'....)
    #     farsi_nums = (...)
    number = str(arabic_int)
    return ''.join(devanagari_nums[int(digit)] for digit in number)

# register your filter, and then:
{{forloop.counter|devanagari_int}} 
```

确保将过滤器文件保存为 UTF-8（或者使用适当的 unicode 表示）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T12:31:24.133

您可以制作一个[模板过滤](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-custom-template-filters)器，将数字转换为适当的编码。然后你可以这样使用它：

```
{{ forloop.counter|convert_to_hindi }} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T12:48:35.267

您可以使用 django 国际化有一个库 l10n 在 django 中定义

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-18T18:31:11.573

您可以创建自己的自定义模板标签。

为此，您需要创建以下文件，假设您的应用名为“myapp”

```
myapp/
    __init__.py
    models.py
    templatetags/
        __init__.py
        extra_tags.py
    views.py 
```

然后在文件中添加如下代码`extra_tags.py`

```
from django import template                                                             

register = template.Library()                                                           

@register.filter(name='persianize_digits')                                              
def persian_int(string):                                                                
    persianize = dict(zip("0123456789",'۰۱۲۳۴۵۶۷۸۹'))                                   
    return ''.join(persianize[digit] if digit in persianize else digit for digit in str(string)) 
```

现在您可以简单地`{{ value|persianize_digits }}`在您的模板中进行操作，数字将变为波斯语。此方法也适用于不是整体数字但在其中包含一些数字的字符串，例如`10:27:33`，它是一个持续时间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-22T12:35:28.990

这对我来说可以将英文数字转换为波斯数字

```
from django import template

register = template.Library()

@register.filter(name='persian_int')
def persian_int(english_int):
    persian_nums = {'0':'۰', '1':'۱', '2':'۲', '3':'۳', '4':'۴', '5':'۵', '6':'۶', '7':'۷', '8':'۸', '9':'۹'}
    number = str(english_int)
    persian_dict = number.maketrans(persian_nums)
    result = number.translate(persian_dict)
    return result 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-03T09:52:07.423

您可以尝试使用 unicode 版本的模板过滤器，如下所示：

```
register = template.Library()

to_arabic_number_trans = dict(
    zip((ord(s) for s in u'0123456789'),
        u'\u0660\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669')
)

to_english_number_trans = dict(
    zip((ord(s) for s in u'٠١٢٣٤٥٦٧٨٩'),
        u'\u2080\u2081\u2082\u2083\u2084\u2085\u2086\u2087\u2088\u2089')
)

@register.filter
def format_number(value):
    cur_lang = get_language()
    if hasattr(value, 'translate'):
        if cur_lang == 'ar':
            return value.translate(to_arabic_number_trans)
        return value.translate(to_english_number_trans)
    return value 
```

这适用于独立数字，但是关于日期数字的任何想法？就像在 2 يونيو، 2020 中一样，我怎样才能在不弄乱日期时间对象的情况下做到正确！

# matlab - 如何使用Matlab匹配每月的每日数据？

> ID：12091354
> 
> 赞同：1
> 
> 时间：2012-08-23T12:14:09.933
> 
> 标签：matlab, time-series, datetime-select

我有每月的宏观经济数据系列，我计划将它们用于每周（每周一）的回归分析。自新点发布以来，如何将每月发布一次的数据点与我的日期模板（该月 4 次）匹配，依此类推。

```
for u=2:size(daily,1)
    l=find(dailytemplate(u)==monthly)

    %# when the monthly date is not equal to my daily template
    if isempty(l)
       %# I need a clearver code for this part to find the previous release
       dailyclose(u)=dailyclose(u-1)
    else 
        dailyclose(u)=monthlyclose(l) 
    end
end 
```

**来自评论的**更新****

 **我有以下每月宏观数据。我想用它们来喂每周的日期。例如，在 2012 年 3 月 31 日 31/03/2012`M-input`是`2.7`. 因此，该日期之后的任何每周日期都应该是

```
W_output=2.7 
```

直到 2012 年 4 月 30 日 04 日。然后每周`W_output`将`2.3`是新的每月点，`M_input`。下表提供了每周`W_ouput`和每月的示例`M_Input`：

```
08/06/2012 1.7
30/06/2012 1.7
01/06/2012 1.7
31/05/2012 1.7
25/05/2012 2.3
30/04/2012 2.3
18/05/2012 2.3
31/03/2012 2.7
11/05/2012 2.3
29/02/2012 2.9
04/05/2012 2.3
31/01/2012 2.9
27/04/2012 2.7
31/12/2011 3
20/04/2012 2.7 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:02:11.240

```
format long g

%Create a vector of dates (what I am assuming your date template looks like, this is march 31 and the next 9 mondays that follow it)
datetemplate = [datenum('2012/03/31')];
for i = 1:10
    datetemplate(i + 1) = datetemplate(i) + 7;
end
datetemplate';

%Your macro ecos input and dates
macrochangedate = [datenum('2012/03/31');datenum('2012/04/30')]
macrochangedate = [macrochangedate [2.7; 2.3]]

for i = 1:size(macrochangedate,1)
    result(datetemplate >= macrochangedate(i,1)) = macrochangedate(i,2);
end 
```

结果：

```
result = 
             2.7
             2.7
             2.7
             2.7
             2.7
             2.3
             2.3
             2.3
             2.3
             2.3
             2.3

datestr(datetemplate)

ans =

31-Mar-2012
07-Apr-2012
14-Apr-2012
21-Apr-2012
28-Apr-2012
05-May-2012
12-May-2012
19-May-2012
26-May-2012
02-Jun-2012
09-Jun-2012 
```**

# php - 从调用属性的位置获取变量

> ID：12091355
> 
> 赞同：1
> 
> 时间：2012-08-23T12:14:12.390
> 
> 标签：php

对于某些用户级调试，我想知道从哪个变量调用了某个类的某个属性。所有课程都是`stdClass`，所以我无法在那个方向寻找答案。

假设我有一个`Person`具有属性的类`Name`和`Sex`. 设置看起来像`$oPerson = new Person()`。当我打电话时，`$oPerson->FirstName = 'Jack';`我想弄清楚电话是从`$oPerson`. 这可以实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:43:02.697

这并不完美（[请参阅此处了解我的灵感以及为什么](http://us2.php.net/manual/en/language.variables.php#49997)不完美），但这是一个开始：

```
class Person {
    var $name;
    var $sex;

    function Person() {
        $this->name = "Jon";
        $this->sex = "male";
    }

    function __get($name) {
        $var_name = "";
        foreach ($GLOBALS as $key => $val) {
            if ($val === $this) {
                $var_name = $key;
                break;
            }
        }

        echo "Getting undefined '$name' from '\$$var_name'.\n";

        $trace = debug_backtrace();
        trigger_error(
            'Undefined property via __get(): ' . $name .
            ' in ' . $trace[0]['file'] .
            ' on line ' . $trace[0]['line'],
            E_USER_NOTICE);

        return null;
    }
}

$oPerson = new Person();
$name = $oPerson->name;
$fullname = $oPerson->fullname; 
```

例如，以下内容将不起作用：

```
class Nerd {
    var $person;

    function Nerd() {
        $person = new Person();
        $nerd_fullname = $person->fullname;
    }
} 
```

因为 的`$person`属性`Nerd`不是全局的，所以没有出现在 中`$GLOBALS`，也不在`Persons`的魔法函数范围内`__get()`。

# php - 从网站代码中删除未使用的 CSS

> ID：12091356
> 
> 赞同：17
> 
> 时间：2012-08-23T12:14:14.527
> 
> 标签：php, javascript, jquery, html, css

我目前正在修改我在网上免费找到的网站模板。

例如，当我`div`从代码中删除 a 时，它的 CSS 将保留在一个或多个文件中。

是否有一个工具可以自动从我的代码中删除未使用的 CSS？因此，我不会手动搜索不再使用的所有内容并删除代码`id`。`class`

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-23T12:26:48.883

Intellij IDEA 可以做到这一点。导航到 CSS 文件，单击“分析”，然后将分析范围缩小到选定的文件。之后，您将看到与此文件相关的所有问题。所有错误都分为类别，导航到名为“未使用的 CSS 选择器”的类别以找到您所追求的。这同样适用于 JavaScript。请注意，CSS 支持仅在 IDEA 的 Ultimate 版本中可用，尽管您花在它上面的每一分钱都是值得的。终极版还有 30 天的试用期。哦，顺便说一句，它具有出色的 PHP 支持。同一供应商还提供了一个更便宜的 PHP 特定 IDE，称为 PHPStorm。那里也提供分析功能。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-23T12:28:26.923

您可以使用 Google Chrome 的“开发人员工具”下的“审核”选项卡非常接近您的要求。它不会删除未使用的 CSS，但会显示未使用的 CSS 规则。

观察： ![在此处输入图像描述](../Images/1fb5dd438da797f63f5d55f021fc4b6c.png)

# desire2learn - 使用 Web 服务的 D2L 电子邮件集成。获取登录用户收件箱中的所有消息。

> ID：12091357
> 
> 赞同：0
> 
> 时间：2012-08-23T12:14:15.493
> 
> 标签：desire2learn

我正在使用 Java HttpClient 集成 D2L。我调用了rest API来获取所有课程：

/d2l/api/le/1.0/97578/classlist/

在这让用户的电子邮件 ID 为空。我想使用 Java 客户端集成 D2L 电子邮件。我们是否有任何 API 用于使用 Java 客户端集成 D2L 电子邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T18:53:36.327

出于隐私原因，后端 LMS 可以配置为防止某些类型的用户数据出现在类列表中检索到的数据中。这可以包括用户的电子邮件地址。

也有可能，组织单位（在这种情况下为课程提供）已配置为不通过类列表或类似的 API 调用公开用户的电子邮件地址。

# c# - ZIP 的冲洗流

> ID：12091359
> 
> 赞同：0
> 
> 时间：2012-08-23T12:14:19.253
> 
> 标签：c#, asp.net, .net

我正在尝试刷新刚刚创建的 Zip 文件，但遇到了问题：a）它实际上并没有刷新（我之前使用 CSV 文件的代码并且一切正常）

这是代码：

```
 outputMemStream.Position = 0;

      System.Web.HttpResponse Resp = System.Web.HttpContext.Current.Response;

      Resp.ClearContent();
      Resp.ClearHeaders();
      Resp.ContentType = "application/zip";
      Resp.AddHeader("Content-Disposition", "attachment; filename=\"download.zip\"");

      //byte[] buff = outputMemStream.ToArray();
      //File.WriteAllBytes(path, buff);

      outputMemStream.CopyTo(Resp.OutputStream);
      outputMemStream.Close();
      outputMemStream.Dispose();

      Resp.Flush();
      Resp.End(); 
```

流是正确创建的，因为我可以保存它，以后可以检查它看起来还不错。只是我的浏览器不允许我下载它的东西很烦人。为你的帮助干杯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:48:41.163

> 它在 aspx 页面中（在 .cs 后面的代码中），在按下按钮“全部导出”后发生的一种方法中

这大概就是问题所在。该页面同时呈现您的文件*和控件*（包括您的“全部导出”按钮）。

尝试将用于下载的逻辑移动到除了返回文件之外什么都不做的不同页面或处理程序。

# android - ListView 中的第一项在 Android 中无法正常工作

> ID：12091362
> 
> 赞同：4
> 
> 时间：2012-08-23T12:14:27.703
> 
> 标签：android, android-listview, android-listfragment

根据我正在处理的应用程序，我需要创建一个列表视图，然后在用户单击每个项目时处理事件。除了列表视图中的第一项外，一切正常。第一次加载列表视图时它不可点击，在我向上或向下滚动列表视图后它可以正常工作。还有一件事，第一次加载列表视图如果我单击第一个项目，然后单击第二个项目，则 toast 消息首先显示第二个项目的名称，然后显示第一个项目的名称。因此，在滚动或单击列表视图之前，列表视图中的第一项是不活动的。这是我的这个片段的代码。知道如何处理吗？

```
public EyeDiseasesFragment(File diseasesJsonFile) {
    this.diseasesJsonFile = diseasesJsonFile;
    mainUrl = Config.mainUrl;
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onActivityCreated(savedInstanceState);

    diseasesList = new ArrayList<Diseases>();

    new LoadContent().execute();

}

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
    try {
        listener = (MainFragmentController) activity;
    } catch (ClassCastException e) {
        throw new ClassCastException(activity.toString()
                + " must implement OnArticleSelectedListener");
    }
}

@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    View view = inflater.inflate(R.layout.diseases, container, false);

    mList = (ListView) view.findViewById(R.id.diseases);

    return view;

}

class DiseasesAdapter extends BaseAdapter {

    LayoutInflater inflater;

    public DiseasesAdapter() {
        inflater = (LayoutInflater) getActivity().getSystemService(
                Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public int getCount() {
        return diseasesList.size();
    }

    @Override
    public Diseases getItem(int arg0) {
        return diseasesList.get(arg0);
    }

    @Override
    public long getItemId(int arg0) {
        return arg0;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup arg2) {

        final Diseases item;

        ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.diseases_item, null);

            holder.title = (TextView) convertView.findViewById(R.id.disease_item_header);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        item = getItem(position);
        holder.title.setText(item.diseaseName);

        convertView.setLayoutParams(new ListView.LayoutParams(
                LayoutParams.MATCH_PARENT, HelperStaticMethods.getDIP(
                        getActivity(), 50)));

        convertView.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {

                listener.onDiseasItemClick(item);

            }
        });

        return convertView;
    }
}

class ViewHolder {
    TextView title;
}

class LoadContent extends AsyncTask<Void, Void, Void> {

    @Override
    protected Void doInBackground(Void... params) {

        setDiseasesInformation(getActivity());

        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);

        mList.setCacheColorHint(Color.TRANSPARENT);
        mList.setDivider(null);
        mList.setVerticalFadingEdgeEnabled(false);
        DiseasesAdapter adapter = new DiseasesAdapter();
        mList.setAdapter(adapter);
    }

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
    }

} 
```

**编辑**

将下面的代码移动到 convertView 为 Null 的语句中解决了这个问题。

```
if (convertView == null) {

    // ... after inflating the view
    convertView.setLayoutParams(new ListView.LayoutParams(
                LayoutParams.MATCH_PARENT, HelperStaticMethods.getDIP(getActivity(), 50)));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:26:53.377

你能尝试移动代码吗

```
convertView.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

            listener.onDiseasItemClick(item);

        }
    }); 
```

里面

```
if (convertView == null){
.....
} 
```

确保侦听器设置一次。

# php - 是否可以使用弹性搜索提升“最新”项目？(FOQElasticaBundle)

> ID：12091365
> 
> 赞同：27
> 
> 时间：2012-08-23T12:14:41.623
> 
> 标签：php, symfony, elasticsearch

我目前正在通过[FOQElasticaBundle](https://github.com/Exercise/FOQElasticaBundle)在我的 Symfony2 应用程序中实现弹性搜索，到目前为止，基于应用于我的“故事”实体的各个领域的提升，它一直运行良好。这是配置：

```
foq_elastica:
    clients:
        default: { host: localhost, port: 9200 }

    indexes:
        website:
            client: default
            types:
                story:
                    mappings:
                        title: { boost: 8 }
                        summary: { boost: 5 }
                        text: { boost: 3 }
                        author:
                    persistence:
                        driver: orm # orm, mongodb, propel are available
                        model: Acme\Bundle\StoryBundle\Entity\Story
                        provider:
                            query_builder_method: createIsActiveQueryBuilder
                        listener:
                            service: acme_story.search_index_listener
                        finder: 
```

但是，我还想根据故事的“published_at”日期应用提升，以便昨天发布的故事会在 6 个月前发布的故事之前出现在结果中 - 即使较旧的故事得分略高（显然这需要一些调整）。这可能吗？

如果有人可以让我知道如何使用 FOQElasticaBundle 实现这一点，那就太好了，但是如果你能让我知道如何直接在弹性搜索中实现这一点，我将不胜感激，这样我就可以自己尝试实现该行为并为如果需要，捆绑。

谢谢。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-06T12:09:51.970

唷，经过大量的实验和数小时的互联网拖网，我终于设法获得了所需的行为！（全部归功于[Clinton Gormley](http://elasticsearch-users.115913.n3.nabble.com/Boost-recent-documents-td2126107.html#a2126317)。）

映射配置：

```
mappings:
    title: { boost: 8 }
    summary: { boost: 5 }
    text: { boost: 3 }
    author:
    publishedAt: { type: date } 
```

以下是使用 PHP 客户端 Elastica 动态构建查询以使用原始映射和发布日期进行提升的代码：

```
$query = new \Elastica_Query_Bool();
$query->addMust(new \Elastica_Query_QueryString($queryString));

$ranges = array();
for ($i = 1; $i <= 5; $i++) {
    $date = new \DateTime("-$i month");

    $currentRange = new \Elastica_Query_Range();
    $currentRange->addField('publishedAt', array(
        'boost' => (6 - $i),
        'gte' => $date->getTimestamp()
    ));

    $ranges[] = $currentRange->toArray();
}

$query->addShould($ranges);

/** @var $pagerfanta Pagerfanta */
$pagerfanta = $this->getFinder()->findPaginated($query); 
```

对于那些对原始 elasticsearch 查询更感兴趣的人（为简洁起见，仅提供 3 个日期范围）...

```
curl -XPOST 'http://localhost:9200/website/story/_search?pretty=true' -d '
{
  "query" : {
    "bool" : {
      "must" : {
        query_string: {
          query: "<search term(s)>"
        }
      },
      "should" : [
        {
          "range" : {
            "publishedAt" : {
              "boost" : 5,
              "gte" : "<1 month ago>"
            }
          }
        },
        {
          "range" : {
            "publishedAt" : {
              "boost" : 4,
              "gte" : "<2 months ago>"
            }
          }
        },
        {
          "range" : {
            "publishedAt" : {
              "boost" : 3,
              "gte" : "<3 months ago>"
            }
          }
        }
      ]
    }
  }
}' 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-04-28T09:30:44.413

您可以使用衰减评分函数来降低评分与时间的关系：

```
{
 "query": {
 "function_score": {
    "functions": [
     {
      "linear": {
        "pubdate": {
          "origin": 1398673886,
          "scale": "1h",
          "offset": 0,
          "decay": 0.1
        }
      }
    }
    ]
   }
  }
 } 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-05-04T09:49:13.240

基于**function_score**的完整**elasticsearch 5**示例。有关更多信息，请参阅[此博客文章](https://www.elastic.co/guide/en/elasticsearch/reference/5.3/query-dsl-function-score-query.html#query-dsl-function-score-query)和[function_score 文档](https://www.elastic.co/guide/en/elasticsearch/reference/5.3/query-dsl-function-score-query.html#query-dsl-function-score-query)。

 **允许在没有“硬截止”的高斯曲线上基于多个日期范围以不同的强度提升最近的条目。

```
{
    "query": {
        "function_score": {

            "score_mode": "sum", // All functions outputs get summed
            "boost_mode": "multiply", // The documents relevance is multiplied with the sum

            "functions": [
                {
                    // The relevancy of old posts is multiplied by at least one.
                    // Remove if you want to exclude old posts
                    "weight": 1
                },
                {
                    // Published this month get a big boost
                    "weight": 5,
                    "gauss": {
                        "date": { // <- Change to your date field name
                            "origin": "2017-04-07", // Change to current date
                            "scale": "31d",
                            "decay": 0.5
                        }
                    }
                },
                {
                    // Published this year get a boost
                    "weight": 2,
                    "gauss": {
                        "date": { // <- Change to your date field name
                            "origin": "2017-04-07", // Change to current date
                            "scale": "356d",
                            "decay": 0.5
                        }
                    }
                }
            ],

            "query": {
                // The rest of your search here, change to something relevant
                "match": { "title": "< your search string >" }
            }
        }
    }
} 
```**

# asp.net - 到达日期后如何使 SQL Server 中的特定行过期？

> ID：12091368
> 
> 赞同：11
> 
> 时间：2012-08-23T12:14:55.270
> 
> 标签：asp.net, sql-server, sql-server-2008-express

对于有经验的开发人员来说，这可能是一个非常简单的场景，但作为一个初学者，我已经在这个问题上徘徊了很长时间。我正在 asp.net 中创建一个网站，用户可以在其中购买包。这些软件包有一些与之相关的到期日期（例如购买后 2 个月、6 个月等）。

问题是如何在我根据购买日期计算的相同日期和时间准确地使每个包裹过期。这件事怎么办？

我正在使用 SQL Server express edition 2008 和 asp.net 4.0 。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-23T12:18:10.620

`WHERE`您可以放置​​一个条款，根据到期日期排除记录，而不是删除记录：

```
SELECT PackageName
FROM Package
WHERE ExpiryDate>GETDATE() 
```

但是，如果您仍希望将它们从数据库中删除，您可以放置​​一个[SQL 作业](http://msdn.microsoft.com/en-us/library/ms191439.aspx)，该作业每天/每小时运行一次等，这将删除已过期的记录：

```
DELETE FROM Package
WHERE ExpiryDate<GETDATE() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T12:20:55.590

取决于您所说的过期的含义-您是要删除数据，标记记录还是只是从用户屏幕上隐藏数据。

无论哪种方式，您都需要将到期日期作为列添加到表 (?packages) 中，并将计算出的到期日期保存到此列中。

然后，您可以选择：

*   运行一个作业以在记录过期后删除/过期记录，即`CURRENT_TIMESTAMP is > ExpiryDate`（SQL Express 没有 SQL 代理，因此您需要编写一个 Windows 服务，或者挂接到 Windows 任务计划程序来执行此操作）。
*   或者，将您的应用程序更改为“检查”ExpiryDate 的值（例如`DateTime.Now >= ExpiryDate`），然后将用户锁定在 UI 之外/隐藏包。

# javascript - Windows 8 Metro 风格应用程序 - 查找基于鼠标或触摸的执行

> ID：12091370
> 
> 赞同：1
> 
> 时间：2012-08-23T12:14:58.187
> 
> 标签：javascript, touch, windows-8

我正在使用 HTML 5 和 JavaScript 为 Windows 8 Metro 风格应用程序创建一个应用程序。我需要在启动应用程序时查找它是基于触摸的进程还是基于鼠标的进程（智能手机或台式计算机）。

我尝试了以下事情。

1）按照以下， http: [//msdn.microsoft.com/en-us/library/windows/apps/windows.devices.input.pointerdevicetype.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.input.pointerdevicetype.aspx)

但我们不确定在函数 getPointerDeviceType(pdt) 中将什么作为“pdt”传入

尝试了各种方法，但它只返回“未定义”。

2）我们尝试了Modernizr js框架来查找以下代码

```
 if (Modernizr.touch){
       // bind to touchstart, touchmove, etc and watch `event.streamId`
    } else {
       // bind to normal click, mousemove, etc
    } 
```

但是当我们插入“Modernizr”最新的js代码时，它给了我们appendchild命令的安全错误。类似于“0x800c001c - JavaScript 运行时错误：无法添加动态内容。”</p>

谁能告诉我们如何实现，以便根据条件，我们可以执行基于触摸和基于鼠标的应用程序执行代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:57:52.233

刚刚解决了。可以对其他人有用。

我把下面的代码放在我需要找到我需要应用的 css 上。

```
 helloButton.addEventListener("MSPointerDown", buttonClickHandler, false); 
```

这是功能：

```
 function buttonClickHandler(eventInfo) {

        if (eventInfo.pointerType == eventInfo.MSPOINTER_TYPE_TOUCH) {
            // Do something for touch input only
            console.log('Touch');
        } else {
            // Do something for non-touch input
            console.log('Mouse');
        }
    } 
```

您可以根据条件设置代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:13:14.803

您假设应用程序在执行期间只有一种输入类型是错误的——我一直在鼠标、键盘和触摸设备之间切换。

那说明：

1.  如果您要动态添加 Modernizr，只需将 Modernizer 作为脚本标签包含在 HTML 中，而不是动态添加
2.  您需要使用`Windows.Devices.Input.PointerDevice.GetPointerDevices();`获取设备，然后使用您提供的链接中的功能查看哪些设备支持触摸。（[这里](http://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.input.pointerdevice.aspx)有详细信息）
3.  您可以通过查看事件对象上的`pointerType` [属性](http://msdn.microsoft.com/en-us/library/windows/apps/hh466130.aspx)来检测特定输入事件用于哪种类型的设备（例如 onmspointerup 等） 。

# php - Symfony2中一个用户名的两个密码

> ID：12091371
> 
> 赞同：1
> 
> 时间：2012-08-23T12:14:59.363
> 
> 标签：php, authentication, symfony, passwords

对于一个项目，我们需要授予具有 2 个密码的用户访问权限。一个是用户的密码，第二个是管理员访问帐户的临时密码。

经过多次研究，我们没有找到如何做到这一点。身份验证过程由 Symfony2 的核心处理，在这个文件中：[DaoAuthenticationProvider.php](http://github.com/symfony/symfony/blob/master/src/Symfony/Component/Security/Core/Authentication/Provider/DaoAuthenticationProvider.php#L54)

有人有想法可以帮助我们吗？我们尝试查看 FOSUserBundle，但它也使用 Symfony2 来验证用户...

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:20:14.577

您必须定义[自己的身份验证提供者](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html#the-authentication-provider)、[工厂](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html#the-factory)并将[其注入您的安全性](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html#configuration)。

检查链接 - 它们阐明了您需要的一切。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T12:29:56.170

好的，最后我们找到了另一种方法来解决我们的问题。我们希望能够在没有密码的情况下访问用户。

我们在 Symfony 2 文档中发现了模拟功能，该功能只能通过在 URL 中使用参数**_switch_user传递用户名来授予用户访问权限**

有关更多信息，请查看此处： [http ://symfony.com/doc/current/book/security.html#impersonating-a-user](http://symfony.com/doc/current/book/security.html#impersonating-a-user)

# c# - 如何获取 PropertyGrid 的单元格值（c#）？

> ID：12091375
> 
> 赞同：3
> 
> 时间：2012-08-23T12:15:14.913
> 
> 标签：c#, propertygrid

如何在 c# 中获取属性网格项和项的值？例如 ：

```
Name : Ali
LastName : Ahmadi 
```

（Name 和 LastName 是 propertygrid 的 2 个属性）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T12:37:58.563

`PropertyGrid`只是对象的组件模型表示的视图。与其看网格，不如说：看组件模型，例如：

```
var props = TypeDescriptor.GetProperties(obj);
foreach(var prop in props) {
    string name = prop.DisplayName;
    if(string.IsNullOrEmpty(name)) name = prop.Name;
    Console.WriteLine("{0}: {1}", name, prop.GetValue(obj));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T12:11:22.333

正确答案是：

```
private void button1_Click(object sender, EventArgs e)
{
    GridItem gi = propertyGrid1.SelectedGridItem;
    while (gi.Parent != null)
    {
        gi = gi.Parent;
    }
    foreach (GridItem item in gi.GridItems)
    {
        ParseGridItems(item); //recursive
    }
}

private void ParseGridItems(GridItem gi)
{
    if (gi.GridItemType == GridItemType.Category)
    {
        foreach (GridItem item in gi.GridItems)
        {
            ParseGridItems(item);
        }
    }
    textBox1.Text += "Lable : "+gi.Label + "\r\n";
    if(gi.Value != null)
        textBox1.Text += "Value : " + gi.Value.ToString() + "\r\n";
} 
```

# asp.net-mvc-3 - lucene.net 搜索具有一个值的多个字段和具有另一个值的另一个字段

> ID：12091376
> 
> 赞同：0
> 
> 时间：2012-08-23T12:15:16.353
> 
> 标签：asp.net-mvc-3, c#-4.0, lucene.net

我有一个包含各个领域的 Lucene 文档；Name、BriefData、FullData、ParentIDs（逗号分隔的字符串）、ProductType、Experience。

我有一个带有文本框、父母下拉列表、产品类型下拉列表、体验下拉列表的搜索表单。

如果我从文本框中搜索，我会得到我应该得到的结果。如果我从任何下拉列表（或所有下拉列表）中搜索，我会得到我想要的结果。如果我使用下拉菜单和文本框，我会得到所有结果作为文本框或下拉菜单的搜索。我想要的是文本框和下拉菜单。

所以，我的搜索建立了这样的东西：

```
 if (string.IsNullOrWhiteSpace(searchTerm))
        {
            searchTerm = "";
            if (!string.IsNullOrWhiteSpace(Request.QueryString["textbox"]))
            {
                string tester = Request.QueryString["query"];
                searchTerm += tester;
            }
            if (!string.IsNullOrWhiteSpace(Request.QueryString["parent"]))
            {
                searchTerm += searchTerm.Length > 0 ? " " : "";
                searchTerm += "+ParentIDs:" + Request.QueryString["parent"];
            }
            if (!string.IsNullOrWhiteSpace(Request.QueryString["product"]))
            {
                ProductTypes pt = db.ProductTypes.Find(int.Parse(Request.QueryString["product"]));
                if (pt != null) {
                    searchTerm += searchTerm.Length > 0 ? " " : "";
                    searchTerm += "+ProductType:" + pt.TypeName;
                }
            }
            if (!string.IsNullOrWhiteSpace(Request.QueryString["experience"]))
            {
                searchTerm += searchTerm.Length > 0 ? " " : "";
                searchTerm += "+Experience:" + Request.QueryString["experience"];
            }
        }
        if (!Directory.Exists(Helper.LuceneSearch._luceneDir))
            Directory.CreateDirectory(Helper.LuceneSearch._luceneDir);

        _searchResults = string.IsNullOrEmpty(searchField)
                            ? Helper.LuceneSearch.Search(searchTerm).Distinct()
                            : Helper.LuceneSearch.Search(searchTerm, searchField).Distinct();

        return View(_searchResults.Distinct()); 
```

如果我只搜索文本框和下拉父项，我会得到一个搜索词“north +ParentIDs:62”

我想要的是搜索只返回父级为 62 AND（名称或 BriefData 或 FullData 的“北”）的结果。

我尝试创建“+(Name:north BriefData:north FullData:north) +ParentIDs:62”和“Name:north BriefData:north FullData:north +ParentIDs:62”的 searchTerm。第一个不返回任何结果，第二个返回与仅搜索 +ParentIDs:62 相同的结果。

我认为这背后的逻辑很简单。但是，我不知道我需要用代码编写什么。

请帮忙。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T07:24:56.270

感谢 JF Beaulac 让我有理由查看我包含的 Lucene.Net 代码 (Helper.LuceneSearch.Search(searchTerm).Distinct()) 我重写了我的搜索，基本上不费心使用它，而是在某种程度上复制了它。

我通过使用 MultiFieldQueryParser 来完成我想要的多字段搜索，奇怪的是。然后我使用 TermQuery 进行单字段查询。这些都添加到 BooleanQuery 中，我的搜索是针对所述 BooleanQuery 执行的。

```
var hits_limit = 1000;
var analyzer = new StandardAnalyzer(Version.LUCENE_29);
BooleanQuery bq = new BooleanQuery();
if (string.IsNullOrWhiteSpace(searchTerm))
{
    searchTerm = "";
    if (!string.IsNullOrWhiteSpace(Request.QueryString["textbox"]))
    {
        string tester = Request.QueryString["textbox"];
        var parser = new MultiFieldQueryParser(Version.LUCENE_29, new[] { "Name", "BriefData", "FullData" }, analyzer);
        var query = Helper.LuceneSearch.parseQuery(tester.Replace("*", "").Replace("?", ""), parser);
        bq.Add(query, BooleanClause.Occur.MUST);
    }
    if (!string.IsNullOrWhiteSpace(Request.QueryString["parent"]))
    {
        bq.Add(new TermQuery(new Term("ParentIDs", Request.QueryString["parent"])), BooleanClause.Occur.MUST);
    }
    if (!string.IsNullOrWhiteSpace(Request.QueryString["product"]))
    {
        ProductTypes pt = db.ProductTypes.Find(int.Parse(Request.QueryString["product"]));
        if (pt != null) {
            bq.Add(new TermQuery(new Term("ProductType", pt.TypeName)), BooleanClause.Occur.MUST);
        }
    }
    if (!string.IsNullOrWhiteSpace(Request.QueryString["experience"]))
    {
        bq.Add(new TermQuery(new Term("Experience", Request.QueryString["experience"])), BooleanClause.Occur.MUST);
    }
}
if (!System.IO.Directory.Exists(Helper.LuceneSearch._luceneDir))
    System.IO.Directory.CreateDirectory(Helper.LuceneSearch._luceneDir);

var searcher = new IndexSearcher(Helper.LuceneSearch._directory, false);
var hits = searcher.Search(bq, null, hits_limit, Sort.RELEVANCE).ScoreDocs;
var results = Helper.LuceneSearch._mapLuceneToDataList(hits, searcher).Distinct();
analyzer.Close();
searcher.Close();
searcher.Dispose(); 

return View(results); 
```

应该注意的是，为了让产品和体验字段起作用，我必须在将它们添加到索引时将它们设置为“Field.Index.NOT_ANALYZED”。我猜这是因为他们在每个文档中只会有一个值。其他搜索的字段是“Field.Index.ANALYZED”。

# symfony - YML与Entity的关系图

> ID：12091377
> 
> 赞同：0
> 
> 时间：2012-08-23T12:15:20.323
> 
> 标签：symfony, doctrine-orm

我想在 YML 之间创建某种关系，我在其中放置了天的名称，例如：

```
0: Sunday
1: Monday
...
6: Saturday 
```

另一方面，我想创建一个名为 Company 的实体，在表中有许多字段，例如。`id, name, description`等等

是否可以在 YML 和名为 OpenHoursMap 的实体之间以如下形式创建关系映射： `day_id, company_id, open_hour, close_hour`？

如果是，你能告诉我最快的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T17:34:50.827

不确定您要做什么，但也许您可以做一个类似于`CountryType`or的自定义表单类型`LocaleType`？

# jsf - p:ajax 正在崩溃复合组件

> ID：12091378
> 
> 赞同：3
> 
> 时间：2012-08-23T12:15:22.703
> 
> 标签：jsf, jsf-2, primefaces, myfaces, composite-component

我创建了一个实现微调器的复合组件，我工作得很好，但是当我从 primefaces 2.2.1 更改为 primefaces 3.3.1 时，当我尝试使用 p:ajax 而不是 f:ajax 时，组件崩溃了所有页面。

这是组件：

```
<c:interface>
    <c:attribute name="value" required="true"/>
    <c:attribute name="fator" required="false" default="1"/>
    <c:attribute name="required" required="false" default="false"/>
    <c:attribute name="requiredMessage" required="false" default=""/>
    <c:attribute name="validatorMessage" required="false" default="Não é um número válido!"/>
    <c:attribute name="disabled" required="false" default="false"/>
    <c:attribute name="title" required="false" default=""/>
    <c:attribute name="width" required="false" default="100"/>
    <c:attribute name="dinheiro" required="false" default="false"/>
    <c:attribute name="local" required="false" default="pt-BR"/>
    <c:attribute name="imediato" required="false" default="false"/>
    <c:attribute name="onchange" required="false" default=""/>
    <c:attribute name="onkeyup" required="false" default=""/>
    <c:attribute name="max" required="false" default="-1"/>
    <c:attribute name="min" required="false" default="0"/>
    <c:attribute name="parametro" required="false" default=""/>
    <c:attribute name="casasDecimais" required="false" default="2"/>
    <c:attribute name="valueChangeListener" method-signature="void method(javax.faces.event.ValueChangeEvent)"
                 targets="spinner"/>
    <c:attribute name="rendered" required="false" default="true"/>
    <c:editableValueHolder name="#{cc.id}" targets="spinner"/>
    <c:clientBehavior name="blur" default="true" event="blur"
                      targets="spinner"/>
    <c:clientBehavior name="change" default="true" event="change"
                      targets="spinner"/>
</c:interface>

<c:implementation>
    <h:outputStylesheet library="css" name="hrgiSpinner.css" target="head"/>
    <h:outputScript library="js" name="jquery.formatCurrency-1.4.0.min.js" target="head"/>
    <h:outputScript library="js" name="jquery.formatCurrency.pt-BR.js" target="head"/>
    <h:outputScript library="js" name="hrgiSpinner.js" target="head"/>
    <h:panelGroup layout="block" styleClass="hrgi-spinner" rendered="#{cc.attrs.rendered}">
        <p:inputText id="spinner" value="#{cc.attrs.value}"
                     styleClass="hrgi-spinner-input editableField" disabled="#{cc.attrs.disabled}"
                     onchange="formatar(this,'#{cc.attrs.fator}','#{cc.attrs.local}','#{cc.attrs.dinheiro}','#{cc.attrs.max}','#{cc.attrs.min}','#{cc.attrs.casasDecimais}'); #{cc.attrs.onchange}"
                     required="#{cc.attrs.required}" requiredMessage="#{cc.attrs.requiredMessage}"
                     validatorMessage="#{cc.attrs.validatorMessage}" onkeyup="#{cc.attrs.onkeyup}"
                     title="#{cc.attrs.title}" immediate="#{cc.attrs.imediato}" style="width: #{cc.attrs.width}px;"
                     converterMessage="O valor informado não é um número.">
            <f:attribute name="objeto" value="#{cc.attrs.parametro}"/>
        </p:inputText>
        <h:panelGroup layout="block" styleClass="hrgi-spinner-painel-botoes"
                      rendered="#{not cc.attrs.disabled}">
            <div onmousedown="incrementar('#{cc.clientId}'+':spinner','#{cc.attrs.fator}','#{cc.attrs.local}','#{cc.attrs.dinheiro}','#{cc.attrs.max}','#{cc.attrs.min}','#{cc.attrs.casasDecimais}');"
                 class="hrgi-spinner-botao hrgi-spinner-botao-alto clearfix"/>
            <div onmousedown="decrementar('#{cc.clientId}'+':spinner','#{cc.attrs.fator}','#{cc.attrs.local}','#{cc.attrs.dinheiro}','#{cc.attrs.max}','#{cc.attrs.min}','#{cc.attrs.casasDecimais}');"
                 class="hrgi-spinner-botao hrgi-spinner-botao-baixo clearfix"/>
        </h:panelGroup>
        <h:panelGroup layout="block"
                      styleClass="hrgi-spinner-painel-botoes hrgi-spinner-painel-botoes-desabilitados"
                      rendered="#{cc.attrs.disabled}">
            <div class="hrgi-spinner-botao hrgi-spinner-botao-alto clearfix"/>
            <div class="hrgi-spinner-botao hrgi-spinner-botao-baixo clearfix"/>
        </h:panelGroup>
    </h:panelGroup>
</c:implementation> 
```

当我使用 f:ajax 时：

```
 <hrgi:spinner id="aliquotaIpiItem" rendered="#{itemEmbrulhado.carregado}"
     disabled="#{not modeloPopupLancamentoNF.lancamentoDanfe}"
     value="#{controladorTabelaDinamicaItemNF.recuperarIPI(itemEmbrulhado).aliquota}"
     dinheiro="false" fator="0.01" local="pt-BR" min="0.00" width="70"
     parametro="#{itemEmbrulhado}">
     <f:ajax render=":lancamentoNF:abasNF:painelItensNF :alerta" execute="@form"
         event="blur" listener="#{controladorPopupLancamentoNF.validarAliquotasItemEAdicionar}"
         onevent="definirFoco"/>
     <f:convertNumber maxFractionDigits="2" minFractionDigits="2" locale="#{cc.attrs.local}"
         for="aliquotaIpiItem"/>
 </hrgi:spinner> 
```

![普通的](../Images/42b2f159919c3b173df616927d76fb36.png)

当我使用 p:ajax 时：

```
<hrgi:spinner id="aliquotaIpiItem" rendered="#{itemEmbrulhado.carregado}"
    disabled="#{not modeloPopupLancamentoNF.lancamentoDanfe}"
    value="#{controladorTabelaDinamicaItemNF.recuperarIPI(itemEmbrulhado).aliquota}"
    dinheiro="false" fator="0.01" local="pt-BR" min="0.00" width="70"
    parametro="#{itemEmbrulhado}">
    <p:ajax update=":lancamentoNF:abasNF:painelItensNF :alerta" process="@form"
        event="blur" listener="#{controladorPopupLancamentoNF.validarAliquotasItemEAdicionar(itemEmbrulhado)}"
        onsuccess="salvarFoco();" oncomplete="carregarFoco(); exibirPopupAlerta(xhr, status, args);"/>
    <f:convertNumber maxFractionDigits="2" minFractionDigits="2" locale="#{cc.attrs.local}"
        for="aliquotaIpiItem"/>
</hrgi:spinner> 
```

![坠毁](../Images/00e6a57539f54ff481c6352c23bcd517.png)

有人可以解释一下发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:35:06.073

PrimeFaces ajax 组件只能与其他 Primefaces 组件一起使用。我不相信您可以将它作为这样的复合组件的 clientBehavior 插入并期望它能够工作。您将不得不使用`f:ajax`.

附带说明一下，从 PrimeFaces 3.0 开始，该`p:spinner`组件已被引入，因此您的复合组件虽然令人印象深刻，但实际上不再需要了。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T18:18:47.913

正如@maple_shaft 所说，我无法将 p:ajax 传递给复合组件。Primefaces 有一个微调器组件，但不幸的是它仍然不好（不支持国际化并显示额外的十进制数字，例如 0.06666666669 而不是 0.07），我没有足够的时间等待更正。我需要在这个组件中使用 p:ajax 的情况很少见，通常只是为了获得像validationFailed 这样的参数。所以，我用一个丑陋的解决方法解决了这个问题：

```
<hrgi:spinner id="aliquotaIpiItem" rendered="#{itemEmbrulhado.carregado}"
     disabled="#{not modeloPopupLancamentoNF.lancamentoDanfe}"
     value="#{controladorTabelaDinamicaItemNF.recuperarIPI(itemEmbrulhado).aliquota}"
     dinheiro="false" fator="0.01" local="pt-BR" min="0.00" width="70"
     onblur="adicionarItemNF();">
     <f:convertNumber maxFractionDigits="2" minFractionDigits="2" locale="#{cc.attrs.local}"
         for="aliquotaIpiItem"/>
</hrgi:spinner>
<p:remoteCommand name="adicionarItemNF" update=":lancamentoNF:abasNF:painelItensNF :alerta" process="@form"
    action="#{controladorPopupLancamentoNF.validarAliquotasItemEAdicionar(itemEmbrulhado)}" global="false"
    onsuccess="salvarFoco();" oncomplete="carregarFoco(); exibirPopupAlerta(xhr, status, args);"/> 
```

# node.js - Node.js：从同一模块中的另一个调用一个导出函数

> ID：12091379
> 
> 赞同：8
> 
> 时间：2012-08-23T12:15:28.550
> 
> 标签：node.js, module

我正在编写一个导出两个函数的 node.js 模块，我想从另一个函数调用一个函数，但我看到一个未定义的引用错误。

有没有模式可以做到这一点？我只是制作一个私有函数并包装它吗？

这是一些示例代码：

```
(function() {
    "use strict";

    module.exports = function (params) {
        return {
            funcA: function() {
                console.log('funcA');
            },
            funcB: function() {
                funcA(); // ReferenceError: funcA is not defined
            }
        }
    }
}()); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T12:23:17.097

我喜欢这种方式：

```
(function() {
    "use strict";

    module.exports = function (params) {
        var methods = {};

        methods.funcA = function() {
            console.log('funcA');
        };

        methods.funcB = function() {
            methods.funcA();
        };

        return methods;
    };
}()); 
```

# wordpress - Wordpress 管理员欢迎信息

> ID：12091383
> 
> 赞同：0
> 
> 时间：2012-08-23T12:15:43.920
> 
> 标签：wordpress, customization, panel, admin

我正在尝试在 Wordpress 管理区域的第一页上创建自己的“面板”。当您第一次登录时，您将进入一个显示不同面板的页面，例如“欢迎...”。我想创建自己的面板（或自定义欢迎面板），以便我的客户每次登录管理页面时都会收到我的特殊消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:41:38.223

好吧，回购中有一个最新的插件可以做到这一点，所以我建议看一下代码，看看他们是如何解决这个问题的。然后，您可以删除您需要的任何内容并将其作为您自己的插件或在您的主题中实现。

[Wordpress 自定义消息插件](http://wordpress.org/extend/plugins/custom-welcome-messages/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-05T16:19:26.193

有一个插件[AG Custom Admin](https://wordpress.org/plugins/ag-custom-admin)

可用于在仪表板页面上创建自定义 HTML 内容。

# wso2 - 如何通过 rest-api 发布具有 long 类型属性的 BAM 事件？

> ID：12091384
> 
> 赞同：1
> 
> 时间：2012-08-23T12:15:42.963
> 
> 标签：wso2, wso2bam

根据日志，我设法使用 rest-api 创建了一个事件流定义。

```
[2012-08-22 08:48:57,287]  INFO {org.wso2.carbon.databridge.streamdefn.cassandra.datastore.CassandraConnector} -  Saving Stream Definition : StreamDefinition{streamId='labit.stream-0.0.3-67a2ed14-ece6-4d98-a904-0dde7892c3a9', name='labit.stream', version='0.0.3', nickName='null', description='LONG and BigINT Test stream', tags=null, metaData=[Attribute{name='myTimeStamp', type=LONG}, Attribute{name='source', type=STRING}], correlationData=null, payloadData=[Attribute{name='fibonacciNumber', type=INT}]} 
```

但是当我尝试发布一个事件时..

```
[
    {
    "payloadData" : [1] ,
    "metaData" : [1340279541606, "labittest"]
    }
] 
```

..对它使用rest-api，会引发异常。

```
[2012-08-22 08:51:48,797] ERROR {org.wso2.carbon.databridge.streamdefn.cassandra.subscriber.BAMEventSubscriber} -  Error processing event. 
java.lang.ClassCastException: java.lang.Double cannot be cast to java.lang.Long
at org.wso2.carbon.databridge.streamdefn.cassandra.inserter.LongInserter.addDataToBatchInsertion(LongInserter.java:31)
at org.wso2.carbon.databridge.streamdefn.cassandra.datastore.CassandraConnector.prepareDataForInsertion(CassandraConnector.java:690)
at org.wso2.carbon.databridge.streamdefn.cassandra.datastore.CassandraConnector.insertEventList(CassandraConnector.java:489)
at org.wso2.carbon.databridge.streamdefn.cassandra.subscriber.BAMEventSubscriber.receive(BAMEventSubscriber.java:41)
at org.wso2.carbon.databridge.core.internal.queue.QueueWorker.run(QueueWorker.java:64)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

另一方面，我可以将事件从 Java 代码发布到同一个流。

```
dataPublisher.publish(labitStream, new Object[] { 1340279541606L, "labittest" }, null, new Object[] { 1 }); 
```

我使用的 WSO2 BAM2 版本是从 wso2bam-2.0.0-BETA.zip 中提取的版本。

所以问题是：如何使用 rest-api 发布具有 long 类型属性的事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:54:30.153

修复了此问题的 beta2 托管在[产品下载页面](http://wso2.com/products/business-activity-monitor)

# php - Try_files 没有命中 PHP（NginX 配置）

> ID：12091386
> 
> 赞同：10
> 
> 时间：2012-08-23T12:15:51.013
> 
> 标签：php, nginx

下面是我的 nginx.conf。

如果不存在文件`/index.php`，则可以正常提供。

但是当我的 URL`/foo/bar => /foo/bar/index.php`通过下载作为 PHP 源代码提供时。

有任何想法吗？

```
try_files $uri $uri/ $uri/index.php /index.php;

location ~ \.php$ { 
    fastcgi_pass 127.0.0.1:9000;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    include fastcgi_params;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T15:08:32.640

解决方案是添加**索引 index.php**

```
 index index.php

    try_files $uri $uri/ $uri/index.php /index.php;

    location ~ \.php$ { 
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include fastcgi_params;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:29:29.233

我的配置

```
index index.html index.htm index.php;
location ~ \.php$ {
        fastcgi_pass unix:/tmp/php-fpm.sock;
        include fastcgi_params;
      } 
```

重新加载 nginx 和 fastcgi

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-26T17:38:26.787

我也有同样的问题。当我在 PHP 上下文 ( `location ~ ^(.+\.php)(.*)$ { ...`) 中有以下内容时：

```
try_files $fastcgi_script_name =404; 
```

..它总是返回404。最后我阅读了[try_files docs](http://nginx.org/en/docs/http/ngx_http_core_module.html#try_files)，它说：

> 文件的路径是根据根和别名指令从文件参数构造的。

我只`alias`为每个位置块定义了（当然，在 PHP-FPM 块中没有定义），但在任何地方都没有整体`root`设置，所以 NGiNX 不知道在哪里查找文件。一旦我为服务器块设置了根目录，它就开始工作了。

# java - 创建枚举的超类

> ID：12091388
> 
> 赞同：1
> 
> 时间：2012-08-23T12:15:52.743
> 
> 标签：java, inheritance, enums

我目前使用这样定义的枚举：

```
public enum Language{
    English("english", "eng", "en", "en_GB", "en_US"),
    German("german", "de", "ge"),
    Croatian("croatian", "hr", "cro"),
    Russian("russian");

    private final List<String> values;

    Language(String ...values) {
        this.values = Arrays.asList(values);
    }

    public List<String> getValues() {
        return values;
    }
    public static Language find(String name) {
        for (Language lang : Language.values()) {
            if (lang.getValues().contains(name)) {
                return lang;
            }
        }
        return null;
    }
} 
```

问题是，我将不得不使用相同的方法和构造函数来使用多个枚举。在我的情况下，唯一改变的是枚举本身的值。

有没有办法让我创建一个我可以重用的枚举的超类？

这样我就可以做类似的事情：

```
public Language extends(specializedEnum){
        English("english", "eng", "en", "en_GB", "en_US"),
        German("german", "de", "ge"),
        Croatian("croatian", "hr", "cro"),
        Russian("russian");
} 
```

提前谢谢你！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T12:20:20.273

这在 Java 中存在一些困难，但是一个能够满足您大量需求的解决方案是让所有枚举都实现一个通用接口。

您将难以重用实现接口的方法的代码，但您可以通过将实际工作委托给外部方法来减轻损害。

此外，通常需要一个按名称查找的函数，它可以为您提供正确的枚举成员，而不管确切的`enum`类如何。这可以使用`HashMap`聚合所有枚举成员的单独来完成。

基本上，这是我现在在项目中如何做的大纲。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T12:17:20.050

枚举不能在 Java 中扩展。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-23T12:20:45.840

它根本不可能扩展 Enums，但您可以实现一个通用接口来添加额外的功能。

```
public interface BaseLanguage {
   public void doStuff();
}

public enum Language implements BaseLanguage {
    English("english", "eng", "en", "en_GB", "en_US"),

   // etc.

   @Override
   public void doStuff() {
     // do work based on current Language enum
   }
} 
```

# java - 在 OSGi 包之间共享对象

> ID：12091389
> 
> 赞同：0
> 
> 时间：2012-08-23T12:15:57.347
> 
> 标签：java, spring, jetty, osgi, apache-karaf

我有两个`OSGi`包部署在`Apache Karaf`. `A`和`B`。我的`A` `OSGi`捆绑包用作基本身份验证处理程序。我已经设置了我的安全处理程序，它工作正常：

```
<bean id="securityHandler" class="org.eclipse.jetty.security.ConstraintSecurityHandler">
    <property name="authenticator">
        <bean class="org.eclipse.jetty.security.authentication.BasicAuthenticator"/>
    </property>
    <property name="constraintMappings">
        <list>
            <ref bean="constraintMapping"/>
        </list>
    </property>
    <property name="loginService" ref="loginService"/>
    <property name="strict" value="false"/>
    <property name="identityService" ref="identityService"/>
</bean> 
```

此处理程序位于 bundle 中`A`。我需要做的是使这个处理程序成为`OSGi`其他捆绑包使用的服务，在这种情况下，由 bundle 使用`B`。我无法实现任何`ConstraintSecurityHandler`类接口，因为它来自`org.eclipse.jetty.security`包。

我试图创建自己的 Handler 类，然后扩展`ConstraintSecurityHandler`并实现我的接口。所以`OSGi`服务看起来像这样：

```
<osgi:service ref="securityHandler" interface="my.company.MyInterface"  /> 
```

这不起作用，我得到了例外：

```
org.apache.camel.RuntimeCamelException: org.apache.camel.FailedToCreateRouteException: Failed to create route route1: Route[[From[jetty:http://0.0.0.0:8019/TARGETjobs/Indeed?hand... because of Failed to resolve endpoint: jetty://http://0.0.0.0:8019/TARGETjobs/Indeed?handlers=securityHandler&matchOnUriPrefix=true due to: null 
```

所以问题是我怎样才能让这个`securityHandler`bean 作为`OSGi`服务提供给其他`OSGi`捆绑包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:58:19.467

我自己找到了解决方案。我`A`创建的捆绑包：

```
public class BasicAuthSecurityHandler implements Handler {

    private ConstraintSecurityHandler securityHandler;

    @Override
    public ConstraintSecurityHandler getSecurityHandler() {
        return securityHandler;
    }

    public void setSecurityHandler(ConstraintSecurityHandler securityHandler) {
        this.securityHandler = securityHandler;
    }        

} 
```

还有一个界面：

```
public interface Handler {

    ConstraintSecurityHandler getSecurityHandler();

} 
```

在我的`A`包`Spring`上下文中，我将安全处理程序设置为此 bean 并`OSGi`从此 bean 提供服务：

```
<bean id="basicAuthSecurityHandler" class="com.groupgti.handler.authentication.basic.BasicAuthSecurityHandler">
    <property name="securityHandler" ref="securityHandler"/>
</bean>

<osgi:service ref="basicAuthSecurityHandler" interface="com.groupgti.handler.authentication.basic.Handler"/> 
```

现在在我的包中，`B`我可以像这样轻松地检索我的安全处理程序：

```
<osgi:reference id="basicAuthSecurityHandler" interface="com.groupgti.handler.authentication.basic.Handler"/>
<bean id="securityHandler" factory-bean="basicAuthSecurityHandler" factory-method="getSecurityHandler"/> 
```

一切正常。

# facebook-graph-api - 为什么有些朋友的赞无法通过 Graph API 或 FQL 获得？

> ID：12091393
> 
> 赞同：2
> 
> 时间：2012-08-23T12:16:03.767
> 
> 标签：facebook-graph-api, facebook-like, facebook-fql

我有一些朋友，如果我查看他们的时间表，我可以看到他们的点赞。

但是，我无法使用 Graph API 访问那些喜欢的内容。我运行时返回一个空集：

```
https://graph.facebook.com/DAT_USER_ID/likes?access_token=DAT_ACCESS_TOKEN 
```

或者

```
https://graph.facebook.com/fql?q=SELECT url FROM url_like WHERE user_id=DAT_USER_ID&access_token=DAT_ACCESS_TOKEN 
```

我**确实**获得了`friends_likes`许可。

我在这里创建了一个 Facebook 错误报告：http: [//developers.facebook.com/bugs/112253515590244 ?browse=search_50367fda9e6d48337036107](http://developers.facebook.com/bugs/112253515590244?browse=search_50367fda9e6d48337036107)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T00:30:47.447

In addition to your friends' privacy settings for their Likes, there's another privacy setting which dictates how apps **you** use can access **their data**.

Generally an app you authorise to connect to your account is able to see anything you can, you're effectively delegating the level of access you have to your data and your friends' data to the app.

There's a privacy setting which overrides this though, it's under Privacy Settings -> Ads, Apps & Websites, and is called 'How people bring your info to apps they use'. This allows a user to specify certain categories of information they do NOT want to be made available to apps being used by a friend, even if that friend can access the information normally via Facebook.com

It currently looks like this ![screenshot of the privacy setting discussed here](../Images/a0427e90602703133440781b48aecacb.png)

There's more information about this (written for a user audience, not a developer audience) on [Facebook's Privacy information site](https://www.facebook.com/about/privacy/your-info-on-other#friendsapps)

# c# - DirectoryEntry.Children 和 Dispose

> ID：12091398
> 
> 赞同：2
> 
> 时间：2012-08-23T12:16:19.447
> 
> 标签：c#, .net, active-directory, dispose

当我与孩子一起工作时，我不确定如何释放 DirectoryEntry 对象。我需要释放所有孩子然后释放父母还是只释放父母？

例如，

```
using(DirectoryEntry entry = new DirectoryEntry())
{
    foreach (DirectoryEntry childEntry in entry.Children)
    {
        ....
    }   
} 
```

够了吗？

或者需要额外的代码，例如

```
using(DirectoryEntry entry = new DirectoryEntry())
{
    foreach (DirectoryEntry childEntry in entry.Children)
    {
        using(childEntry)
        {
            ...
        }
    }   
} 
```

?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T12:40:17.387

您必须释放每个枚举的孩子。

此外，您应该注意，`DirectoryEntry.Children`每次访问它的 getter 时都会返回新创建的对象。这很令人作呕，因为它粗暴地违反了 MS 自己的准则（`DirectoryEntry.Children` **必须**是一种方法），但这是事实。

所以：

*   每次枚举孩子时，都会得到**新的**实例；
*   父条目对枚举器的创建实例和由枚举器创建的子条目一无所知。

# ssh - 对不存在文件上的 SFTP“打开”的正确响应

> ID：12091399
> 
> 赞同：5
> 
> 时间：2012-08-23T12:16:21.663
> 
> 标签：ssh, protocols, sftp

我正在为 Apache SSHd 编写自定义文件系统类。`get`当客户端尝试访问不存在的文件时，我遇到了问题。

我的对象返回`doesExist() == false`。

这会导致服务器发送 SSH_FX_NO_SUCH_FILE 数据包以响应 SSH_FXP_STAT。

使用 OpenSSH 客户端，这可以正常工作：客户端报告“找不到文件 '/foo'”。

但是，PSFTP（Putty SFTP 客户端）通过管道传输其请求，因此无论对 STAT 的响应如何，它都会发送一个 OPEN 数据包。然后它在生成的文件句柄上发送一个 READ，这当前会导致我的代码出现异常，从而导致整个会话终止。

当尝试读取不存在的文件时，服务器应该响应什么？

抱歉，这里是有问题的 Apache 代码。我不想修改它——我的类是这里的 SshFile“文件”。但如果 Apache 代码肯定有问题，我想我必须给他们一个补丁。

```
 if (version <= 4) {
       String path = buffer.getString();
       int pflags = buffer.getInt();
       // attrs
       try {
            SshFile file = resolveFile(path);
            if (file.doesExist()) {
                if (((pflags & SSH_FXF_CREAT) != 0) && ((pflags & SSH_FXF_EXCL) != 0)) {
                    sendStatus(id, SSH_FX_FILE_ALREADY_EXISTS, path);
                    return;
                }
            } else {
                if (((pflags & SSH_FXF_CREAT) != 0)) {
                    if (!file.isWritable()) {
                        sendStatus(id, SSH_FX_FAILURE, "Can not create " + path);
                        return;
                    }
                    file.create();
                }
            }
            String acc = ((pflags & (SSH_FXF_READ | SSH_FXF_WRITE)) != 0 ? "r" : "") +
                   ((pflags & SSH_FXF_WRITE) != 0 ? "w" : "");
            if ((pflags & SSH_FXF_TRUNC) != 0) {
                 file.truncate();
            }
            String handle = UUID.randomUUID().toString();
            handles.put(handle, new FileHandle(file, pflags)); // handle flags conversion
            sendHandle(id, handle);
       } catch (IOException e) {
            sendStatus(id, SSH_FX_FAILURE, e.getMessage());
       } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T12:41:42.637

`SSH_FXP_OPEN`还使用`SSH_FX_NO_SUCH_FILE`状态代码回复请求。那应该可以解决问题`psftp`。

无论如何，您必须保留活动文件和目录句柄的寄存器。当远程端请求对未激活或不正确类型的句柄进行操作时，以`SSH_FX_FAILURE`状态消息进行响应。使用数据包`error message`上的插槽`SSH_FXP_STATUS`包含更多信息和用户友好的错误，因为只是代码不是很有用。

# ios - 使用添加的静态库构建项 目时出错

> ID：12091400
> 
> 赞同：1
> 
> 时间：2012-08-23T12:16:21.600
> 
> 标签：ios, static-libraries

当我运行我的项目时，我有错误，这个项目包括静态库。

```
Undefined symbols for architecture i386:
"_OBJC_CLASS_$_Composer", referenced from:
  objc-class-ref in libImageCollage_Simulator.a(ImageCollageTableViewController.o)
"_OBJC_CLASS_$_FirstTableViewCell", referenced from:
  objc-class-ref in libImageCollage_Simulator.a(ImageCollageTableViewController.o)
"_OBJC_CLASS_$_SecondTableViewCell", referenced from:
  objc-class-ref in libImageCollage_Simulator.a(ImageCollageTableViewController.o)
"_OBJC_CLASS_$_ThirdTableViewCell", referenced from:
  objc-class-ref in libImageCollage_Simulator.a(ImageCollageTableViewController.o)
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:21:38.207

您的项目与静态库链接，您尚未在项目中添加`libImageCollage_Simulator.a`库，要在项目设置中添加转到构建阶段，在目标依赖项中单击`+`并将库添加到您的项目![在此处输入图像描述](../Images/2cffa63cef3cef01899c89abe8af063a.png)

还在这里添加库搜索路径，像这样![](../Images/42f924bafb47770b1a7fc1e038c187a2.png) 转到构建阶段并双击库搜索路径，单击加号并在项目中添加库的路径

# iphone - UISlider 代码不会覆盖 IB 默认值

> ID：12091401
> 
> 赞同：0
> 
> 时间：2012-08-23T12:16:29.457
> 
> 标签：iphone, objective-c, ios, ipad, uislider

[heightSlider addTarget:self action:@selector(updateHeightLabel:)forControlEvents:UIControlEventValueChanged];我`heightSlider`在文件中声明`.h`如下： `@property (retain, nonatomic) UISlider *heightSlider;`它`@synthesize heightSlider;` 在`.m`文件中。

在`IB`，我把它连接到`updateHeightLabel`了`valueChanged`。我也有默认设置`maximumValue`并`minimumValue`设置`36.0`为`84.0`.`IB`

`unitType`的默认值为`0`。所以`heightSlider.maximumValue`应该相应地设置，从而 `NSLog`改变从`91.0`到，`213.0`但它没有。它`NSLogs`从`IB`默认值更改。

`[heightSlider addTarget:self action:@selector(updateHeightLabel:)forControlEvents:UIControlEventValueChanged];`似乎也没有工作，并且仅由于`IB`.

我做错了什么基本的事情吗？

```
- (void)viewDidLoad
  {
      [super viewDidLoad];

      heightSlider = [[UISlider alloc] init];
      heightSlider.userInteractionEnabled = TRUE;
      heightSlider.continuous = YES;
      [heightSlider addTarget:self action:@selector(updateHeightLabel:)forControlEvents:UIControlEventValueChanged]; 

      if (unitType == 0) {
            heightSlider.maximumValue = 91.0;
            heightSlider.minimumValue = 213.0;      
}

      else if (unitType ==1 ) {

            heightSlider.maximumValue = 36.0;
            heightSlider.minimumValue = 84.0;
}

}

-(IBAction) updateHeightLabel:(id)sender {

   NSLog(@"Sender Value : %f", sender.value");

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T12:21:18.057

如果您在 IB 中创建了滑块，并将其连接到您的 heightSlider 属性，那么您不应该执行 alloc/init 来创建新的。您正在有效地创建一个不可见的滑块（因为您没有将其添加为子视图），并更改其属性。

注释掉 alloc/init 代码行...

# c# - 将 gZipStream 与一个或两个内存流一起使用会产生很大的不同

> ID：12091404
> 
> 赞同：2
> 
> 时间：2012-08-23T12:16:42.147
> 
> 标签：c#, compression, memorystream, gzipstream, binaryformatter

我肯定遗漏了一些非常明显的东西，但谁能解释为什么在第二种情况下压缩率要好得多？！

案例 1：非常低的压缩率，有时甚至会增长。

```
using (var memoryStream = new System.IO.MemoryStream())
using (var gZipStream = new GZipStream(memoryStream, CompressionMode.Compress))
{
  new BinaryFormatter().Serialize(gZipStream, obj);
  gZipStream.Close();
  return memoryStream.ToArray();
} 
```

案例 2：更好的压缩并且我没有得到尺寸增长。

```
using (MemoryStream msCompressed = new MemoryStream())
using (GZipStream gZipStream = new GZipStream(msCompressed, CompressionMode.Compress))
using (MemoryStream msDecompressed = new MemoryStream())
{
  new BinaryFormatter().Serialize(msDecompressed, obj);
  byte[] byteArray = msDecompressed.ToArray();

  gZipStream.Write(byteArray, 0, byteArray.Length);
  gZipStream.Close();
  return msCompressed.ToArray();
} 
```

我已经完成了镜像解压缩，在这两种情况下，我都可以将其反序列化为源对象而不会出现任何问题。

以下是一些统计数据：

> UncSize: 58062085B, Comp1: 46828139B, 0.81%
> 
> UncSize: 58062085B, Comp2: 31326029B, 0.54%
> 
> UncSize: 7624735B, Comp1: 7743947B, 1.02%
> 
> UncSize: 7624735B, Comp2: 5337522B, 0.70%
> 
> UncSize: 1237628B, Comp1: 1265406B, 1.02%
> 
> UncSize：1237628B，Comp2：921695B，0.74%

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T14:18:19.560

您没有说您使用的是哪个版本的 .NET。在 4.0 之前的版本中，`GZipStream`按写入压缩数据。也就是说，它会压缩您发送给它的缓冲区。在您的第一个示例中，该`Serialize`方法可能会将非常小的缓冲区写入流（一次一个字段）。在您的第二个示例中，`Serialize`将整个对象序列化到内存流，然后将内存流的缓冲区写入`GZipStream`一大块。`GZipStream`当它有更大的缓冲区（64K 接近最佳值）时，它会做得更好。

在 .NET 4.0 中可能仍然是这种情况。我不记得我是否测试过它。

我过去处理这个问题的方式是使用[BufferedStream](http://msdn.microsoft.com/en-us/library/system.io.bufferedstream.aspx)：

```
using (var mstream = new MemoryStream())
{
    using (var bstream = new BufferedStream(new GZipStream(mstream, CompressionMode.Compress), 65536))
    {
        new BinaryFormatter().Serialize(btream, obj);
    }
    return mstream.ToArray();
} 
```

这样，压缩器就可以使用 64K 缓冲区。

在 .NET 4.0 之前，为 .NET 提供大于 64K 的缓冲区没有任何好处`GZipStream`。我看到一些信息表明 .NET 4.0 中的压缩器可以使用更大的缓冲区更好地进行压缩。但是，我自己没有测试过。

# sql-server-2008-r2 - 根据另一列的值选择列值

> ID：12091405
> 
> 赞同：0
> 
> 时间：2012-08-23T12:16:52.447
> 
> 标签：sql-server-2008-r2

我需要生成一份报告并将“NUMBER”列中的所有 NULL 值替换为 1 到 10 之间的值，具体取决于另一个“VALUE”列的值，然后将它们加起来。“NUMBER”中的一些已经包含在内，但有些还没有。基本上，这就是我所拥有的 -

```
**NUMBER**   **VALUE**    **DATE**
NULL         Apple        2012-08-01
NULL         Pear         2012-08-01
NULL         Banana       
NULL         Apple        2012-08-02
1            Apple        
2            Pear         2012-08-04
3            Banana       2012-08-04 
```

我需要制作的是一份报告，显示类似这样的内容 -

```
**NUMBER**    **VALUE**    **TOTAL**    **DATE**
1             Apple        3            2
2             Pear         2            2
3             Banana       2            1 
```

我遇到的问题是 SQL 中还有另一个 COUNT ，我无法找到让所有东西一起工作的方法。当前的 SQL 看起来像这样 -

```
SELECT    NUMBER,
          VALUE,
          COUNT (NUMBER) AS TOTAL,
          COUNT (DATE) AS DATE

FROM      MY_TABLE

GROUP BY  NUMBER,
          VALUE 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:51:29.300

如果我正确理解了您的问题，此查询将返回您想要的总数：

```
WITH ValueCount AS
(
   SELECT mt.Value, COUNT(1) AS Total
   FROM #My_Table AS mt
   GROUP BY mt.Value
)
, DateCount AS
(
   SELECT mt.Value, COUNT(1) AS DateTotal
   FROM #My_Table AS mt
   WHERE mt.MyDate IS NOT NULL
   GROUP BY mt.Value
)
SELECT mt.Number, vc.Value, vc.Total, dc.DateTotal
FROM ValueCount AS vc
INNER JOIN #My_Table AS mt ON vc.Value = mt.Value
INNER JOIN DateCount AS dc ON vc.Value = dc.Value
WHERE mt.Number IS NOT NULL
ORDER BY mt.Number ASC; 
```

我分手了从日期算起的价值，因为你正在寻找不同的标准。如果您不喜欢[Common Table Expression (CTE)](http://msdn.microsoft.com/en-us/library/ms175972.aspx)的外观，您可以使用多个查询或子查询来完成此操作。

使用 CTE 时，前面的查询必须以分号结尾。

# wordpress - 在 Wordpress 主题中添加 3 列动态小部件页脚

> ID：12091407
> 
> 赞同：4
> 
> 时间：2012-08-23T12:17:06.847
> 
> 标签：wordpress, dynamic, widget, footer

我的 wordpress 主题没有小部件页脚区域。所有的只是一个

页脚文字

在页脚中。

我希望能够从仪表板的小部件区域在页脚中添加小部件，例如博客、网站页面、最近的帖子等。我希望页脚为 3 列。

我怎样才能做到这一点？干杯

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-23T12:55:07.450

您首先在functions.php 中注册您的小部件区域；

```
/* REGISTER WIDGETS ------------------------------------------------------------*/

if (function_exists('register_sidebar')) {
    register_sidebar(array(
        'name' => 'Footer Left',
        'id'   => 'footer-left-widget',
        'description'   => 'Left Footer widget position.',
        'before_widget' => '<div id="%1$s">',
        'after_widget'  => '</div>',
        'before_title'  => '<h2>',
        'after_title'   => '</h2>'
    ));

    register_sidebar(array(
        'name' => 'Footer Center',
        'id'   => 'footer-center-widget',
        'description'   => 'Centre Footer widget position.',
        'before_widget' => '<div id="%1$s">',
        'after_widget'  => '</div>',
        'before_title'  => '<h2>',
        'after_title'   => '</h2>'
    ));

    register_sidebar(array(
        'name' => 'Footer Right',
        'id'   => 'footer-right-widget',
        'description'   => 'Right Footer widget position.',
        'before_widget' => '<div id="%1$s">',
        'after_widget'  => '</div>',
        'before_title'  => '<h2>',
        'after_title'   => '</h2>'
    ));

} 
```

然后在你的 footer.php 文件中你会有这样的东西；

```
 <!-- footer -->
    <div id="mainfooter">

        <!-- 1/3 -->
        <div class="four columns">
            <?php if ( !function_exists( 'dynamic_sidebar' ) || !dynamic_sidebar('footer-left-widget') ) ?>
        </div>
        <!-- /End 1/3 -->
        <!-- 2/3 -->
        <div class="four columns">
            <?php if ( !function_exists( 'dynamic_sidebar' ) || !dynamic_sidebar('footer-center-widget') ) ?>
        </div>
        <!-- /End 2/3 -->
        <!-- 3/3 -->
        <div class="four columns">
            <?php if ( !function_exists( 'dynamic_sidebar' ) || !dynamic_sidebar('footer-right-widget') ) ?>
        </div>
        <!-- /End 3/3 -->

    </div>
    <!-- /End Footer --> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-03T08:56:17.623

先把这行代码放在function.php中

```
if ( function_exists('register_sidebar') ) {
    register_sidebar(); 

    register_sidebars(3, array('name'=>'Footer %d'));
} 
```

将此添加到您的 footer.php 文件

```
<div id="footerwidgets">
 <div id="footer-left"> 

 <ul> <?php if ( !function_exists('dynamic_sidebar') ||
    !dynamic_sidebar('footer 1') ) : ?> <li> <?php endif; ?> </ul>

 </div> 
<div id="footer-middle"> 

 <ul> <?php if ( !function_exists('dynamic_sidebar') ||
    !dynamic_sidebar('footer 2') ) : ?> <li> <?php endif; ?> </ul>

</div> 
<div id="footer-right"> 

 <ul> <?php if ( !function_exists('dynamic_sidebar') ||
 !dynamic_sidebar('footer 3') ) : ?> <li> <?php endif; ?> </ul>

 </div> 
</div> 
<br>
 <br clear="all" /> 
```

# python - 如何在 Python 中从远程数据库中提取数据？

> ID：12091413
> 
> 赞同：0
> 
> 时间：2012-08-23T12:17:19.077
> 
> 标签：python, database

我正在使用 MySQLdb。我正在使用 Rpy2 开发一个简单的 GUI 应用程序。我的程序做什么？- 用户可以输入静态数据和数学运算将使用这些数据进行计算。- 我迷路的另一件事是，用户将给出他们数据库的位置，程序将使用远程数据库中的数据进行计算机数学运算。

我已经使用本地主机完成了结果。如何从远程数据库执行此操作？任何想法？提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:20:06.043

建立 MySQL 连接时，使用远程机器 IP 地址/主机名和相应的凭据（用户名、密码）。

# java - 如何使用 java 在 selenium 中测试 css 属性

> ID：12091414
> 
> 赞同：0
> 
> 时间：2012-08-23T12:17:19.270
> 
> 标签：java, html, css, selenium, selenium-rc

我想测试我页面上的某个文本是否在外观上是**粗体。**所有必填字段的类似标签都以粗体显示。我正在使用 java 编写我的 selenium 测试脚本并使用 selenium RC 执行测试。问题是 firebug 上的 HTML 选项卡对 CSS 属性一无所知。元素的所有 CSS 属性都列在 firebug 的 CSS 选项卡上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:27:59.933

如果您在谷歌中输入您的问题，您会发现很多答案。

这是一个可以帮助您的教程： http: [//sauceio.com/index.php/2010/01/selenium-totw-css-selectors-in-selenium-demystified/](http://sauceio.com/index.php/2010/01/selenium-totw-css-selectors-in-selenium-demystified/)

# php - 如何保护 MySQL 免受 SQL 注入？

> ID：12091420
> 
> 赞同：-2
> 
> 时间：2012-08-23T12:17:34.397
> 
> 标签：php, mysql

> **可能重复：**
> [在 PHP 中防止 SQL 注入的最佳方法](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

这是我的 SQL 查询，我想让它没有 SQL 注入

```
 $q1="insert into ecat_user(login_id,password,fullname,gender,disp_name,dob,";
 $q1.="street_addr,city,country,zip,email,aol,msn,icq,yahoo,homepg_link,homepg_caption,description,";
 $q1.="legal_guardian,phoneno,promotioncode,user_type,height,weight,chest,waist,inseam,eyecolor,haircolor,";
 $q1.="shoesize,biceps,collar,experience,travel,notes,added_on,updated_on) values('$modelName','$password','$firstName',";
 $q1.="'$gender','$description','$dob','$streetAddress','$city','$country','$zipCode','$emailAddress',";
 $q1.="'$aolID','$msnID','$icqID','$msnID','$homePage','$homePageCaption','$description','$legalGuardian',";
 $q1.="'$phoneNumber','$promotionalCode','','','','','','','','','','','','','','','','')";
 mysql_query($q1, $Conn);
 $id = mysql_insert_id(); 
```

请建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T12:19:51.873

停止使用古老的、即将被弃用的`mysql_*`函数，并开始使用[PDO](http://php.net/pdo)。查看文档[`PDO::prepare()`](http://www.php.net/manual/en/pdo.prepare.php)以查看示例。

另请查看有关[选择 API](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)的手册页，其中指出：

> 建议使用[`mysqli`](http://www.php.net/manual/en/book.mysqli.php)或[`PDO_MySQL`](http://www.php.net/manual/en/ref.pdo-mysql.php)扩展名。不建议使用旧的mysql扩展进行新的开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:23:26.263

您有两个选择 - 转义 unsafe_variable 中的特殊字符，或使用参数化查询。两者都可以保护您免受 SQL 注入。参数化查询被认为是更好的做法，但在变量中转义字符将需要较少的更改。

这在上面的文章中有明确的描述和清除，请完整阅读。

[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T12:20:09.287

这实际上取决于您如何获取变量。

最好和最安全的方法是使用准备好的语句。您*可以*使用语句来执行这些操作`mysql_*`，但再次使用 PDO 可能是更好的选择。

这是在 PDO 中使用准备好的语句的示例：

```
<?php
/* Execute a prepared statement by passing an array of values */
$sql = 'SELECT name, colour, calories
    FROM fruit
    WHERE calories < :calories AND colour = :colour';
$sth = $dbh->prepare($sql, array(PDO::ATTR_CURSOR => PDO::CURSOR_FWDONLY));
$sth->execute(array(':calories' => 150, ':colour' => 'red'));
$red = $sth->fetchAll();
$sth->execute(array(':calories' => 175, ':colour' => 'yellow'));
$yellow = $sth->fetchAll();
?> 
```

这个想法是您准备语句 - 告诉数据库它应该期望*什么*，然后在执行语句期间将参数与数组一起传递给它。任何有趣的事情都会被排除在等式之外。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T12:20:38.487

用占位符替换所有值并在发送前准备好语句。以 PDO 为例。

# android - 为android不同的屏幕分辨率缩放图像

> ID：12091425
> 
> 赞同：0
> 
> 时间：2012-08-23T12:17:54.057
> 
> 标签：android, android-layout

我正在制作一个 android 应用程序，但这里的问题是有几十个具有不同屏幕分辨率的 android 手机。所以现在我不知道应该使用哪种图像尺寸。有没有办法使用一个图像，然后android会根据屏幕分辨率相应地缩放它？如果是，那么哪种图像尺寸会更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:23:20.333

是的，即使您在可绘制文件夹中仅使用单个图像，Android 系统也会为所有设备调整其大小，但当然会出现图像失真。好吧，您应该只关心 Drawable-hdpi、mdpi、ldpi 和 x-hdpi 文件夹，并将图像分别放入其中。其中大小不同。最好的方法是使用 MDPI。

很难理解，我上面的建议，如果你还没有读过[这个](http://developer.android.com/training/basics/supporting-devices/screens.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:22:00.423

查看[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# r - 基于另一个数据框创建一个新的数据框（使用循环或其他方式）

> ID：12091426
> 
> 赞同：5
> 
> 时间：2012-08-23T12:18:03.707
> 
> 标签：r, dataframe

我有一个这样的数据框：

```
Site    speciescode abundance   times
LM1           MkI        9      3
LM2           KiU        8      4 
```

我想根据`times`值重复行。我正在考虑使用循环来制作新的数据框，如下所示：

```
Site   speciescode   abundance
LM1    MkI           9
LM1    MkI           9
LM1    MkI           9
LM2    KiU           8
LM2    KiU           8
LM2    KiU           8
LM2    KiU           8 
```

帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T12:35:07.493

如果你愿意，你可以避免循环（而且它更 R'ish）

```
d <- data.frame(Site=c("LM1","LM2"),speciescode=c("MkI","KiU"),abundance=c(3,4),time=c(3, 4))

dnew <- d[rep(1:nrow(d), d$time), ]
dnew[ ,1:3]
##     Site speciescode abundance
## 1    LM1         MkI         3
## 1.1  LM1         MkI         3
## 1.2  LM1         MkI         3
## 2    LM2         KiU         4
## 2.1  LM2         KiU         4
## 2.2  LM2         KiU         4
## 2.3  LM2         KiU         4 
```

您还可以使用@BlueMagister 方法更改丰度值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T12:42:40.520

```
df <- data.frame(Site=c("LM1","LM2"),speciescode=c("MkI","KiU"),abundance=c(9,8),times=c(3,4))
df <- df[rep(1:nrow(df), df$abundance),]
df$abundance <- rep(c(9,8), c(3,4))

#    Site speciescode abundance
#1    LM1         MkI         9
#1.1  LM1         MkI         9
#1.2  LM1         MkI         9
#2    LM2         KiU         8
#2.1  LM2         KiU         8
#2.2  LM2         KiU         8
#2.3  LM2         KiU         8 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T12:30:52.973

试试这个（根据需要编辑行号）：

```
d <- data.frame(Site=c("LM1","LM2"),speciescode=c("MkI","KiU"),abundance=c(3,4),times=c(3,4))
for(i in seq(from=3,to=7,by=2)) {
  d[i,] <- d[1,]
  d[i+1,] <- d[2,]
}
d$abundance[d$times == 3] <- 9
d$abundance[d$times == 4] <- 8 
```

# java - 如何隐藏一个活动来调用另一个活动并在后台运行并再次显示？

> ID：12091427
> 
> 赞同：0
> 
> 时间：2012-08-23T12:18:06.850
> 
> 标签：java, android

*** *我正在开发一个android项目，我必须在三星标签（Android 3.2及更高版本）上收听音频歌曲的同时提供阅读电子书的功能。为此，我需要隐藏音频播放器视图以转到文件浏览器以选择电子书。

我需要您的帮助来了解如何隐藏**AudioPlayer**活动并从任何地方再次显示相同的（播放器视图）。

简而言之，我想让 AudioPlayer 视图类似于 Windows 平台中的最小化选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:24:09.343

您应该做的是将音频播放器作为[服务](http://developer.android.com/reference/android/app/Service.html#WhatIsAService)运行并构建一个活动作为它的接口。然后，即使音频播放器活动关闭，音乐也会继续播放。

# asp.net - 从 aspx 页面中的对象设置 href 值

> ID：12091430
> 
> 赞同：2
> 
> 时间：2012-08-23T12:18:21.203
> 
> 标签：asp.net

我想像这样在href中设置对象的值

```
<a href="<%result[0].DocumentUrl %>"> 
```

但我收到编译错误。语法方面的任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T12:19:45.860

您需要添加一个等号 ( `=`)：

```
<a href="<%= result[0].DocumentUrl %>"> 
```

[您可以在此处](http://naspinski.net/post/inline-aspnet-tags-sorting-them-all-out-%283c25242c-3c253d2c-3c252c-3c252c-etc%29.aspx)阅读有关不同内联 asp 标签的更多信息。

# visual-studio-2010 - VS2010 中 RIA 服务代码生成文件的烦恼

> ID：12091431
> 
> 赞同：0
> 
> 时间：2012-08-23T12:18:26.103
> 
> 标签：visual-studio-2010, wcf-ria-services

这是一个关于 VS2010 结合使用 RIA 服务的简单可用性问题。每隔一段时间，我就会打开一个讨厌的生成文件，VS 一直问我是否要重新加载它。有没有办法摆脱这种滋扰？也许在更改特定文件模式 (*.g.cs) 时自动重新加载/自动关闭？

不是什么大事，我知道。但这让我很烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T19:02:25.160

您可以允许在文件更改时重新加载所有文件。从`Tools > Options...`，您可以设置前三个设置，如下图所示。

通过禁止编辑只读文件，您不会意外编辑 *.g.cs 文件，从而导致 VS 更加恐慌。

![Visual Studio 选项对话框](../Images/3982151fb21519544e8635c2472fbdb5.png)

# tridion - 获取出版物的所有元数据模式

> ID：12091432
> 
> 赞同：6
> 
> 时间：2012-08-23T12:18:45.203
> 
> 标签：tridion, tridion-2011

我对 Tridion 核心服务很陌生，所以这可能是一个简单的问题。我想通过传递发布 ID 来获取所有元数据模式。如果有人这样做过，请回复。

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-23T12:50:34.097

好的，这是一个例子。GetCoreServiceClient 返回一个 SessionAwareCoreServiceClient ，并为正确的用户调用了 Impersonate。

```
public static IdentifiableObjectData[] GetMetadataSchemas(string publicationId)
{
    using (var client = GetCoreServiceClient())
    {
        var filter = new RepositoryItemsFilterData
        {
            SchemaPurposes = new[] { SchemaPurpose.Metadata },
            Recursive = true,
            ShowNewItems = false,
            ItemTypes = new[] { ItemType.Schema }
        };

        return client.GetList(publicationId, filter);
    }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-23T12:37:36.863

我会建议您从 [此处][1]（需要登录）查看示例代码并先尝试自己。

[http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_95D8F90693834AF089FEBCDC0347D04D][1]

或试试这个。

```
RepositoryItemsFilterData filterData = new RepositoryItemsFilterData();
filterData.ItemTypes = new[]
                       {
                        ItemType.Schema
                       };
filterData.Recursive = true;
XElement resultXml = client.GetListXml(publicationId, filterData); 
```

然后你需要在从上面的 xml 中获取 id 后创建每个 schema 对象，并检查它是否是元数据 schema。

# sql - SQL 子查询什么性能最好

> ID：12091436
> 
> 赞同：0
> 
> 时间：2012-08-23T12:19:06.437
> 
> 标签：sql, performance, subquery, exists, in-clause

我对这个 SQL 查询有疑问：

```
 SELECT class
 FROM Ships
 WHERE name IN (SELECT ship
                FROM Outcomes
                WHERE result = ’sunk’); 
```

我可以在子查询中写`SELECT * From Outcomes`还是我总是需要`select`一个`row`？

那么什么查询的性能最好呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:23:44.010

从性能的角度来看，使用这个查询

```
 select class 
 FROM Ships 
 join outcomes on ships.name=outcomes.ship
 and result like 'sunk' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T12:25:37.430

您不能将 * 放在此子查询中。最好的方法是：

```
SELECT class
  FROM Ships s
 WHERE exists
     (
        select 1 
          from Outcomes o
        where s.name = o.ship
          and result = ’sunk’
       ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T12:23:33.967

您需要选择一个列，就像您在 SQL 示例中所做的那样。

还值得注意的是，通配符`*`对性能不利，因为服务器将需要做一些额外的工作来计算出所有列是什么，正如您没有明确说明的那样。

如果您想在 中包含多个要比较的列，`IN`那么我建议`UNION`您在子查询中使用 a ：

```
SELECT class
     FROM Ships
     WHERE name IN
       (SELECT ship
        FROM Outcomes
        WHERE result = ’sunk’
        UNION
        SELECT secondColumn
        FROM Outcomes
        WHERE result = ’sunk’        
        ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T12:24:22.103

您正在使用`In`，因此您只需要一个`row`即可将其与名称进行比较。在这种特殊情况下，您可以使用 Join 作为替代方案。In`MySQL`的性能相同，但[在 SQL-Server In 中的性能比 Join 更高](http://explainextended.com/2009/06/16/in-vs-join-vs-exists/)。因此，在这种情况下，您只需要返回一行。

如果您`subquery`在 a 中使用 a `inner join`，您可以使用`*`，但为了便于阅读，最好返回您将使用的字段。这个例子，将是

```
select (fields..)
from yourTable
inner join (select fields from yourTable2) T2 on ConditionOfJoining

select (fields..)
from yourTable
inner join (select * from yourTable2) T2 on ConditionOfJoining 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T12:25:07.507

您应该始终尽量避免使用 *. 更好的是永远不要使用 *.

但在您的查询中，您必须说明该列。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-23T12:21:47.713

在这种情况下，您需要说明您选择的列。

我会建议加入

```
 seLECT class 
 FROM Ships 
     inner join outcomes
     on ships.name=outcomes.ship
    WHERE result = ’sunk’ 
```

# mysql - 谷歌地图商店定位器的MySQL错误

> ID：12091440
> 
> 赞同：1
> 
> 时间：2012-08-23T12:19:20.750
> 
> 标签：mysql

我在使用mysql时遇到了一些问题。我的环境是 wamp，当我试图从 xml 文件中提取一些数据时出现问题。这是错误。

无效查询：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 ') ) * cos( radians( lat ) ) * cos( radians( lng ) - radians() ) + sin( radians()' 在第 1 行附近使用正确的语法

我正在尝试使用谷歌地图商店定位器，[这是课程的链接](https://developers.google.com/maps/articles/phpsqlsearch_v3)。我得说我前几天运行的程序很好，但今天它坏了。诡异的。

顺便说一句，将 .csv 文件导入到我的 mysql 时也会出现错误，这会导致错误键的值。有关系吗？

任何人都可以帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:24:57.510

您输入的 SQL 查询无效。您可能忘记填写一个参数，这会使解析器翻转。

[您给我们的页面](https://developers.google.com/maps/articles/phpsqlsearch_v3)显示了这个查询：

```
SELECT id, 
  ( 3959 * acos( cos( radians(37) ) * cos( radians( lat ) ) 
  * cos( radians( lng ) - radians(-122) ) 
  + sin( radians(37) ) * sin( radians( lat ) ) ) ) AS distance 
FROM markers 
HAVING distance < 25 
ORDER BY distance LIMIT 0 , 20; 
```

您使用的是什么查询？你用什么东西代替了`37`吗？如果您只省略 37，则查询将失败并出现您描述的错误：

```
SELECT id, 
  ( 3959 * acos( cos( radians() ) * cos( radians( lat ) ) 
  * cos( radians( lng ) - radians(-122) ) 
  + sin( radians(37) ) * sin( radians( lat ) ) ) ) AS distance 
FROM markers 
HAVING distance < 25 
ORDER BY distance LIMIT 0 , 20; 
```

因为 MySQL 正在调用[弧度函数](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_radians)并期待一个参数。

# javascript - Dojo Toolkit 中的代码重用

> ID：12091442
> 
> 赞同：1
> 
> 时间：2012-08-23T12:19:26.600
> 
> 标签：javascript, html, mobile, dojo

我正在使用 Dojo Toolkit 实现一个移动应用程序。该应用程序有几个页面，所有页面都有相同的 TabBar。目前，每个页面中的 TabBar 都是硬编码的。因此，如果要进行更改，我需要更改每个页面中的 TabBar。如何使用 Dojo Toolkit 解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T12:33:17.093

使用 dojo.declare，创建由 TabBar 扩展的自定义小部件。然后在您的初始化代码中，需要该模块并在您的标记代码中，将 dojoType 设置为您的自定义模块名称。与此类似的东西：

```
require([
     "dojox/mobile/TabBar", 
     "dojox/mobile/TabBarButton"
  ], function ( TabBar, Button ) {

   dojo.declare("myTabBar", [ TabBar ], {

       buildRendering: function() {
           this.inherited(arguments); // call parent
           // add a number of children
           this.addChild( new Button( {
                icon1: 'path/to/image',
                icon1: 'path/to/hoverimage',
                label: 'clickme',
                moveTo:"view1"
           }));
       }
   });
}); 
```

而不是代码中的 UL / LI html 标记，只需添加：

```
<div dojoType="myTabBar"></div> 
```

运行示例：http: [//jsfiddle.net/8sD6A/](http://jsfiddle.net/8sD6A/)

# android - 如何插入ascii的值？

> ID：12091443
> 
> 赞同：1
> 
> 时间：2012-08-23T12:19:26.740
> 
> 标签：android

如何在我的 TextView 中插入 ascii 向下箭头的值？

例如：

我发现向下箭头的ascii =`&#x25B2`

`myText.setText(&#x25B2);`

但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T12:21:13.457

尝试

```
myText.setText(Html.fromHtml("&#x25B2")); 
```

# c# - 扫描网页以查找损坏的 403/404 引用（支持闪存）

> ID：12091444
> 
> 赞同：1
> 
> 时间：2012-08-23T12:19:28.440
> 
> 标签：c#, flash, google-chrome, firebug

我正在寻找一种扫描网页的方法（非递归），但它还需要加载 Flash 对象。正因为如此，WebClient 或 HttpWebRequest 走出了窗口。在我看来，这必须通过与浏览器交互来完成。

有谁知道我可以与 Chrome 或 Firefox 交互以编程方式获取页面加载时的网络活动的方法？

编辑：我应该澄清它只需要加载 Flash 对象，不需要与对象交互。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:39:26.190

只需在 HTML 页面上使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/discussions)：

```
var webGet = new HtmlWeb();
var document = webGet.Load(url); 
```

然后遍历`document`直到找到对 Flash 对象的引用并尝试下载该对象（使用 WebClient 或 HttpWebRequest）。

# c# - 我尝试使用 XDocument 解析 xml 文件中的文本，但并非所有结果都如我所愿，为什么？

> ID：12091449
> 
> 赞同：0
> 
> 时间：2012-08-23T12:19:37.670
> 
> 标签：c#

我有一个按钮点击事件：

```
private void button1_Click(object sender, EventArgs e)
        {

            string fileName = @"d:\adilipman1937067724.xml";
            ParseAndDisplayXml(fileName);
        } 
```

和功能：

```
private void ParseAndDisplayXml(string filename)
        {
            XDocument document = XDocument.Load(filename);
            var list = document.Root.Elements("Message")
                .Select(
                e => new
                {
                    Date = e.Attribute("Date").ToString(),
                    Time = e.Attribute("Time").ToString(),
                    Text = e.Attribute("Text").ToString()
                }
                );
 string result="";
            foreach (var item in list)
            {
               result += string.Format("Date--{0},Time--{1},Text--{2}", item.Date, item.Time, item.Text);

            }
textBox1.Text = result;
        } 
```

日期和时间的结果是好的，但文本的结果是错误的。这是文本的结果：你好我需要在文本中得到的只是你好日期和时间的结果是：日期=“31/01/2012”和时间=“10:15:42”

问题是获取文本。

然后，当我运行程序时，我在 textBox1 中得到的东西是一团糟：

Date--Date="31/01/2012",Time--Time="10:15:42",Text--הייDate--Date="31/01/2012",Time--Time="10: 15:55",Text--הייתה ליבעיה עם התוכנת ברקים אבל עכשיו הכל עובד.Date--Date="31/01/2012",Time--ה-ב-ב,Text הבא ?Date--Date="31/01/2012",Time--Time="10:16:27",Text--אמרת ליבזמנו לחשב ממוצע של 1000 ערכים ? הכוונה 1000 ערכים בפריים ? 256מספרמספרשששש？ /01/2012",Time--Time="10:17:10",Text--ז"א בפרייםDate--Date="31/01/2012",Time--Time="10:17:14" ,Text--לא בהיסטוגרמהDate--Date="31/01/2012",Time--Time="10:17:20",Text--בעזרת ההיסטוגרמהDate--Date="

例如原始的xml文件内容是这样的：

```
<?xml version="1.0"?>
<?xml-stylesheet type='text/xsl' href='MessageLog.xsl'?>
<Log FirstSessionID="1" LastSessionID="2">
  <Message Date="31/01/2012" Time="10:15:42" DateTime="2012-01-31T08:15:42.467Z" SessionID="1">
    <From>
      <User FriendlyName="Chocolade"/>
    </From>
    <To>
      <User FriendlyName="adilipman@yahoo.com"/>
    </To>
    <Text Style="font-family:Segoe UI; color:#000000; ">היי</Text>
  </Message>
  <Message Date="31/01/2012" Time="10:15:55" DateTime="2012-01-31T08:15:55.097Z" SessionID="1">
    <From>
      <User FriendlyName="Chocolade"/>
    </From>
    <To>
      <User FriendlyName="adilipman@yahoo.com"/>
    </To>
    <Text Style="font-family:Segoe UI; color:#000000; ">הייתה לי בעיה עם התוכנת ברקים אבל עכשיו הכל עובד.</Text>
  </Message>
  <Message Date="31/01/2012" Time="10:15:58" DateTime="2012-01-31T08:15:58.897Z" SessionID="1">
    <From>
      <User FriendlyName="Chocolade"/>
    </From>
    <To>
      <User FriendlyName="adilipman@yahoo.com"/>
    </To>
    <Text Style="font-family:Segoe UI; color:#000000; ">מה השלב הבא ?</Text>
  </Message>
  <Message Date="31/01/2012" Time="10:16:27" DateTime="2012-01-31T08:16:27.775Z" SessionID="1">
    <From>
      <User FriendlyName="Chocolade"/>
    </From>
    <To>
      <User FriendlyName="adilipman@yahoo.com"/>
    </To>
    <Text Style="font-family:Segoe UI; color:#000000; ">אמרת לי בזמנו לחשב ממוצע של 1000 ערכים ? הכוונה 1000 ערכים בפריים ? כי בפריים יש 256 מספרים לא ?</Text>
  </Message>
</Log> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:28:47.317

这是因为在您提供的 XML 文件中，`Text`不是*属性*，而是*.*`Message`

您需要做的是选择您想要的子节点（例如使用`node.SelectNodes`or `node.SelectSingleNode`），然后获取它的文本值（`node.InnerText`）。

至于textBox1 里面*乱七八糟*的，需要`\r\n`在每一行后面加上 ( `string.Format("...\r\n", ...`)

* * *

好的，让我们看一下您的 XML 文件：如果需要，您应该阅读一些内容，以对 XML 文件的组成有基本的`attributes`了解`elements`。

所以你的文件：有 element `Message`，其中有`attributes`：*Date*，*Time*，*DateTime*和*SessionID*。接下来，这个`Message`元素有*子节点*:和`From`，其中两个第一个没有属性，而第三个有*Style*属性和内部文本（和标签之间的所有内容。`To``Text`*`<Text>``</Text>`*

 *以下是如何使用`XmlNode`类：

```
XmlDocument xml = new XmlDocument()
xml.Load("path_to_xml_file"); 
```

在这里，我们将整个 xml 文件加载到一个对象中。现在我们可以选择特定的节点：

```
XmlNodeList messages = xml.SelectNodes("/root/Message"); 
```

`"/root/Message"`部分是 a `XPath`，您可能想了解它，它非常有用...

现在，`Message`我们文件中的所有节点都在一个列表中`messages`。我们可以迭代它：

```
foreach (XmlNode message in messages)
  { ... } 
```

对于每个节点，我们可以获取它的属性：

```
#msg is a XmlNode from messages list
#XmlNode.Attributes is a list of all attributes in given node
XmlNode dateAttribute = msg.Attributes.GetNamedItem("Date"); 
```

注意我们的属性本身是一个 XmlNode。如果节点中没有这样的属性，则`dateAttribute == null`，否则，它的值可以通过 访问`dateAttribute.Value`。我通常为此制作辅助功能：

```
public static string GetStringAttribute(XmlNode node, string name, string defaultValue="")
    {
        XmlNode attrNode = node.Attributes.GetNamedItem(name);
        if (attrNode == null)
            return defaultValue;
        else
            return attrNode.Value.Trim();
    } 
```

同样从我们的`Message`节点中，我们可以提取它的`Text`部分：

```
XmlNode textNode = msg.SelectSingleNode("Text");
string textBetweenTags = textNode.InnerText; 
```

我希望这能澄清一点，以了解 XML 文件是如何构建的、什么是`XPath`以及如何使用它，我推荐[W3School](http://www.w3schools.com/xml/)。

我不会更正你所有的代码，但是使用它并记住`\r\n`在添加每一行之后放置，你应该得到你想要的输出，祝你好运！*

# c# - 在 C# 中拼接图像

> ID：12091452
> 
> 赞同：-2
> 
> 时间：2012-08-23T12:19:51.877
> 
> 标签：c#, image, sprite

我目前正在制作精灵表制作器，但在拼接目录中的所有图像时遇到了麻烦。到目前为止，我的代码可以读取用户输入的目录中所有文件的名称，并将它们放在字符串列表中。但是我不确定如何将它们缝合在一起。
我现在添加了用于拼接图像的代码，并在程序保存拼接图像时出现异常

。我拉入的图像是 *.png，输出也是如此。图像需要水平缝合。
我当前的代码：

```
static void Main()
        {
            bool cont = false;
            bool skip = false;
            while (cont == false)
            {
                Console.WriteLine("Enter a Folder name(end to end):");
                string fold = Console.ReadLine();
                if (fold.Equals("end"))
                {
                    break;
                }
                try
                {
                    string[] files = Directory.GetFiles(@"sprites\" + fold, "*.PNG");
                    foreach (string file in files)
                    {
                        Console.WriteLine(file);
                    }
                    skip = false;
                }
                catch (Exception)
                {
                    Console.WriteLine("Folder not Found!");
                    Console.WriteLine("Try Again!");
                    cont = false;
                    skip = true;
                }
                if (skip != true)
                {
                    try
                    {
                        string[] files = Directory.GetFiles(@"sprites\" + fold, "*.PNG");
                        System.Drawing.Bitmap stitchedImage = Combine(files);
                        Console.WriteLine("save filename (no extention)");
                        string fil = Console.ReadLine();
                        stitchedImage.Save(@"/sheets/"+fil+".png", System.Drawing.Imaging.ImageFormat.Png);
                        cont = true;
                    }
                    catch (Exception ex)
                    {
                        Console.WriteLine("Error Creating Sprite Sheet");
                        Console.WriteLine(ex);
                        Console.WriteLine("Please Try Again!");
                    }
                }
            }
            Console.WriteLine("Done!");
            Console.WriteLine("Program will now exit(Enter to continue)");
            Console.ReadLine();
        }
        public static System.Drawing.Bitmap Combine(string[] files)
        {
            //read all images into memory
            List<System.Drawing.Bitmap> images = new List<System.Drawing.Bitmap>();
            System.Drawing.Bitmap finalImage = null;

            try
            {
                int width = 0;
                int height = 0;

                foreach (string image in files)
                {
                    //create a Bitmap from the file and add it to the list
                    System.Drawing.Bitmap bitmap = new System.Drawing.Bitmap(image);

                    //update the size of the final bitmap
                    width += bitmap.Width;
                    height = bitmap.Height > height ? bitmap.Height : height;

                    images.Add(bitmap);
                }

                //create a bitmap to hold the combined image
                finalImage = new System.Drawing.Bitmap(width, height);

                //get a graphics object from the image so we can draw on it
                using (System.Drawing.Graphics g = System.Drawing.Graphics.FromImage(finalImage))
                {
                    //set background color
                    g.Clear(System.Drawing.Color.Black);

                    //go through each image and draw it on the final image
                    int offset = 0;
                    foreach (System.Drawing.Bitmap image in images)
                    {
                        g.DrawImage(image,
                          new System.Drawing.Rectangle(offset, 0, image.Width, image.Height));
                        offset += image.Width;
                    }
                }

                return finalImage;
            }
            catch (Exception ex)
            {
                if (finalImage != null)
                {
                    finalImage.Dispose();
                }
                Console.WriteLine(ex);
                throw ex;
            }
            finally
            {
                //clean up memory
                foreach (System.Drawing.Bitmap image in images)
                {
                    image.Dispose();
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:17:36.970

真的没那么难 - 依次解锁每个图像的位并将其写入新图像（考虑到空/边界/缓冲区像素）。

您需要预先确定上下多少张图像、每个图像的大小以及最终图像的尺寸。还有图像格式（pixelFormat - 是否需要透明度等）您可以设置 Stride 或让 .Net 为您设置等。

通常，您希望尺寸为 2 的幂或 4 的幂 - 取决于最终精灵表的使用。您可能还需要将图像转换为 ny .Net 不直接支持的 DDS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:26:55.607

与其自己构建东西，为什么不使用像[SpriteMe](http://spriteme.org/)这样的众多工具之一呢？

# php - 如何将android连接到joomla数据库

> ID：12091453
> 
> 赞同：2
> 
> 时间：2012-08-23T12:19:55.140
> 
> 标签：php, android, joomla

我是 android 的初学者。我想将我的 android 应用程序连接到 joomla 1.5 数据库。请帮我....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T12:32:06.937

连接到任何特定技术数据库不是 Android 应用程序的选项，您应该公开 Web 服务以从**任何 X 技术**数据库中获取数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T12:28:46.137

要将 android 应用程序与 joomla 数据库进行交互，您必须使用[Web 服务](http://en.wikipedia.org/wiki/Web_service)

请参阅 Web 服务初学者的最佳[文章](http://davidwalsh.name/web-service-php-mysql-xml-json)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-23T12:21:35.857

您需要通过 Web 服务从 Joomla 公开您的数据，并在您的 Android 应用程序上使用它。

此演示文稿可以帮助您： [http](http://fr.slideshare.net/HermanPeeren/webservices-connecting-joomla-with-other-programs-4399412) ://fr.slideshare.net/HermanPeeren/webservices-connecting-joomla-with-other-programs-4399412 Joomla API 的文档：http: [//docs.joomla.org/API](http://docs.joomla.org/API)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T22:56:11.860

我们为 Joomla 和任何其他基于 SQL 和 PHP 的系统做了一个更新和稳定的 RPC-JSON（Dojo 和 SMD 兼容）适配器。您只需传递可以在顶部包含 PHP 函数的查询和嵌套模式。安全性由黑白列表完成。

它是免费的，双重（GPL 和自定义）和我们移动应用程序的一部分：xapp-studio.com（下载 Joomla 插件）。

实际工作由我们的另一个项目完成：xapp-php.com 原来是通用 PHP 网关。

# authentication - HDFS 数据节点未开始使用 kerberos

> ID：12091454
> 
> 赞同：3
> 
> 时间：2012-08-23T12:19:56.843
> 
> 标签：authentication, hadoop, kerberos, hdfs

我已将 kerberos 身份验证添加到 apache hdfs，namenode 已启动并正在运行，但我无法启动 datanode，出现此异常：

```
2012-08-23 17:05:45,648 ERROR org.apache.hadoop.hdfs.server.datanode.DataNode: java.lang.RuntimeException: Cannot start secure cluster without privileged resources.
    at org.apache.hadoop.hdfs.server.datanode.DataNode.startDataNode(DataNode.java:324)
    at org.apache.hadoop.hdfs.server.datanode.DataNode.<init>(DataNode.java:299)
    at org.apache.hadoop.hdfs.server.datanode.DataNode.makeInstance(DataNode.java:1582)
    at org.apache.hadoop.hdfs.server.datanode.DataNode.instantiateDataNode(DataNode.java:1521)
    at org.apache.hadoop.hdfs.server.datanode.DataNode.createDataNode(DataNode.java:1539)
    at org.apache.hadoop.hdfs.server.datanode.DataNode.secureMain(DataNode.java:1665)
    at org.apache.hadoop.hdfs.server.datanode.DataNode.main(DataNode.java:1682) 
```

我在fedora 16上使用apache hadoop 1.0.1版本而不是cloudera版本，jsvc文件也存在于libexec下。

有人可以帮我解决这个问题。

谢谢，-Chhavi

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:31:23.247

我已经解决了异常，数据节点必须从安全集群中的根目录启动。

# bash - 在 bash 中使用带有 case 语句的 shift

> ID：12091459
> 
> 赞同：3
> 
> 时间：2012-08-23T12:20:13.930
> 
> 标签：bash

我正在尝试结合这两个参数来使我的函数工作

```
#!/bin/bash

while [ $? -gt 0 ] 
do
  case "$1" in             
    [0-9]*-[0-9]*)
      for ip in $(sec ${1%-*} ${##*-})
      do
        ping -c 1 192.168.1.$ip
        (shift)?
      done
      ;;
    a)
      >/dev/null;
      [ $? -eq 0 ] && echo "192.168.1.$ip is up!" ||:;
      ;;
  esac
done 
```

通常，如果我将这两个函数都放在`[0-9]*-[0-9]*)`参数中，我们可以得到例如输出

```
someTest.sh 90-105 
```

它会检查 90 到 105 之间的 IP 号码但我想这样做：

```
sometest.sh 90-105 -a 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:36:43.810

我看到您想检查机器是在您从命令行指定的范围内上升还是下降。您可以简单地使用 for 循环来完成。

```
#!/bin/bash

a=$1;
b=$2;

for ((i=a;i<=b;i++)) do

   ping -c 1 -w 1 192.168.1.$i  >> /dev/null 2>&1

   if [ $? -eq 0 ]; then
      echo "192.168.1.$i is up";
   else
      echo "192.168.1.$i is down";
   fi

done 
```

从命令行运行它：`./script 10 50`从 192.168.1.10 ping 机器到 192.168.1.50。

* * *

如果你想传递这样的参数：`./script 10-50`那么你也可以这样做：

```
#!/bin/bash

OLDIFS=$IFS
IFS=$'\-'
set $@

a=$1;
shift;
b=$1;

for ((i=a;i<=b;i++)) do

   ping -c 1 -w 1 192.168.1.$i  >> /dev/null 2>&1
   if [ $? -eq 0 ]; then
     echo "192.168.1.$i is up";
   else
     echo "192.168.1.$i is down";
   fi

done 
```

IFS=$OLDIFS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:21:39.757

如果您想做的是在某个范围内 ping IP，并且还能够传递其他参数（-a 和/或 -b），您可以查看 getopts 以轻松处理所需数量的参数，使用或没有选项：

```
usage()
{
cat << EOF
usage: $0 options iprange

OPTIONS:
   -a      set a option
   -b      set b option
   -r      set rangei, e.g 1 10
EOF
}

A=
B=

while getopts “abr:” OPTION
do
     case $OPTION in
         a)
             A=1
             ;;
         b)
             B=1
             ;;
         r)  
             RANGE="$OPTARG"
             ;;
         ?)
             usage
             exit
             ;;
     esac
done

for i in $(seq $RANGE); do
    ping -c 1 -w 1 192.168.1.$i  >> /dev/null 2>&1

    if [ $? -eq 0 ]; then
        echo "192.168.1.$i is up";
    else
        echo "192.168.1.$i is down";
fi
done 
```

你会这样称呼它：

./somescript.sh -a -b -r "10 34"

您可以检查 $A 和 $B 变量并根据它们的值做任何您想做的事情。

我知道，范围分隔符之间没有破折号，你需要引号，写得很快，你可以使用上面 KingsIndian 的解决方案来处理这个问题。

# jsf - JSF 应用程序中 CDI 事件的常见用例

> ID：12091464
> 
> 赞同：3
> 
> 时间：2012-08-23T12:20:27.113
> 
> 标签：jsf, ejb, cdi

让 bean 使用 CDI bean（使用 Myfaces CODI）代替 JSF 托管 bean 一段时间以来，我一直在阅读一些教程，以更好地理解我可以用这项技术*真正做些什么。*最明显的利用潜力是 CDI 事件模型，但我对我可以使用它的用途没有太多灵感。

我有一个页面计数器机制，它可以在不访问关键路径上的数据库的情况下维护页面访问的持久记录，即减慢页面加载时间。这通过增加 AtomicReference 访问的 ConcurrentHashMap 中的 AtomicInteger 来工作，数据存储在单例 EJB 中。然后一个 EJB 计时器周期性地“抓取”地图，用一个新的替换它，并将新的命中添加到适当的数据库记录中。PreDestroy 侦听器在应用服务器关闭时保存所有非持久更新。

我认为在页面加载时，我可以使用应用程序范围的 CDI bean 来触发“页面访问”事件并观察它并进行后端处理，但这在某些方面不符合现有设计：

*   目前更新是批量更新的，timer 方法每隔几分钟运行一次。

*   虽然现有设计在服务器电源故障时会丢失数据，但这是不可取的，但可以接受，但它相当可靠，因为它可以处理正常关闭。

我需要更好地了解在服务器关闭时排队的 CDI 事件会发生什么，我将通过规范来解决这个问题。

虽然我很感谢对上述想法的任何反馈，但我真正感兴趣的是受到您在 JSF 应用程序中使用 CDI 事件的任何有趣场景的启发，有人愿意分享他们的经验吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T11:15:12.607

您可以在 jsf 应用程序的以下用例中使用 CDI 事件：

*   当用户想要登录/注销时触发/观察事件
*   用户更改区域设置时触发/观察事件
*   用户更改主题时触发/观察事件
*   等等

对于您的用例，您可以使用 @Asynchronous 注释负责存储页面视图统计信息的 EJB，以便在另一个线程中执行此操作。那么我认为您的页面加载速度不会减慢。

通常，当您想使用旧的事件/观察者模式时，您可以使用 CDI 事件，但要以解耦和优雅的方式加上 DI 功能。这种模式可以应用于各种各样的用例。

欲了解更多信息，请阅读此博客。[链接1 链接](http://ovaraksin.blogspot.com/2012/07/event-based-communication-in-jsf-old.html) [2](http://ovaraksin.blogspot.com/2012/07/event-based-communication-in-jsf-new.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T15:40:55.153

首先，**事件是同步**的，而不是异步的。这意味着您显然不能像 JMS 那样使用它们，而且如果服务器停止，也没有什么能比得上故障转移。

事实上，唯一的原因——我知道——为什么引入事件机制是为了以类型安全的方式**解耦组件**（但这是一个很好的理由:)

我遇到的最优雅的场景之一是 Seam Catch（现在模制成**Seam Solder**）。在此处查看[此](http://docs.jboss.org/seam/3/3.1.0.Final/reference/en-US/html/catch-introduction.html)说明。**事件驱动的异常处理**的想法是允许不同的参与者（又名：CDI 模块和用户代码）注册自己以获取异常通知。然后事件在注册的观察者链中上下冒泡，并将使用固有的 CDI 机制自动找到最合适的处理程序。

最好自己阅读文档/查看源代码。

# python - matplotlib：多个箱线图的插入轴

> ID：12091471
> 
> 赞同：5
> 
> 时间：2012-08-23T12:20:54.900
> 
> 标签：python, plot, matplotlib, zooming, boxplot

[我在 matplotlib 中有一些箱线图，我想使用插入轴](http://matplotlib.sourceforge.net/mpl_toolkits/axes_grid/users/overview.html)放大特定的 y 范围（[0,0.1]）。从文档中的[示例](http://matplotlib.sourceforge.net/mpl_toolkits/axes_grid/examples/inset_locator_demo2.py)中我不清楚我应该如何为同一图中的多个箱线图执行此操作。我试图修改此示例提供的代码，但有太多不必要的复杂性。我的代码很简单：

```
# dataToPlot is a list of lists, containing some data. 
plt.figure()
plt.boxplot(dataToPlot)
plt.savefig( 'image.jpeg', bbox_inches=0) 
```

如何添加插入轴并放大两者的第一个箱线图？我怎样才能为两者做到这一点？

编辑：我尝试了下面的代码，但这是我得到的： ![在此处输入图像描述](../Images/333221054d572629ac5d02daf5e8cab0.png)

什么地方出了错？

```
# what's the meaning of these two parameters?
fig = plt.figure(1, [5,4])
# what does 111 mean?
ax = fig.add_subplot(111)
ax.boxplot(data)
# ax.set_xlim(0,21)  # done automatically based on the no. of samples, right?
# ax.set_ylim(0,300) # done automatically based on max value in my samples, right?
# Create the zoomed axes
axins = zoomed_inset_axes(ax, 6, loc=1) # zoom = 6, location = 1 (upper right)
axins.boxplot(data)
# sub region of the original image
#here I am selecting the first boxplot by choosing appropriate values for x1 and x2 
# on the y-axis, I'm selecting the range which I want to zoom in, right?
x1, x2, y1, y2 = 0.9, 1.1, 0.0, 0.01
axins.set_xlim(x1, x2)
axins.set_ylim(y1, y2)
# even though it's false, I still see all numbers on both axes, how do I remove them?
plt.xticks(visible=False)
plt.yticks(visible=False)
# draw a bbox of the region of the inset axes in the parent axes and
# connecting lines between the bbox and the inset axes area
# what are fc and ec here? where do loc1 and loc2 come from?
mark_inset(ax, axins, loc1=2, loc2=4, fc="none", ec="0.5")
plt.savefig( 'img.jpeg', bbox_inches=0) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-23T16:25:12.797

`loc`确定缩放轴的位置，1 代表，`upper right`2 代表`upper left`以此类推。我稍微修改了示例代码以生成多个缩放轴。

```
import matplotlib.pyplot as plt

from mpl_toolkits.axes_grid1.inset_locator import zoomed_inset_axes
from mpl_toolkits.axes_grid1.inset_locator import mark_inset

import numpy as np

def get_demo_image():
    from matplotlib.cbook import get_sample_data
    import numpy as np
    f = get_sample_data("axes_grid/bivariate_normal.npy", asfileobj=False)
    z = np.load(f)
    # z is a numpy array of 15x15
    return z, (-3,4,-4,3)

fig = plt.figure(1, [5,4])
ax = fig.add_subplot(111)

# prepare the demo image
Z, extent = get_demo_image()
Z2 = np.zeros([150, 150], dtype="d")
ny, nx = Z.shape
Z2[30:30+ny, 30:30+nx] = Z

# extent = [-3, 4, -4, 3]
ax.imshow(Z2, extent=extent, interpolation="nearest",
          origin="lower")

axins = zoomed_inset_axes(ax, 6, loc=1) # zoom = 6
axins.imshow(Z2, extent=extent, interpolation="nearest",
             origin="lower")

# sub region of the original image
x1, x2, y1, y2 = -1.5, -0.9, -2.5, -1.9
axins.set_xlim(x1, x2)
axins.set_ylim(y1, y2)

axins1 = zoomed_inset_axes(ax, 8, loc=2) # zoom = 8
axins1.imshow(Z2, extent=extent, interpolation="nearest",
             origin="lower")

# sub region of the original image
x1, x2, y1, y2 = -1.2, -0.9, -2.2, -1.9
axins1.set_xlim(x1, x2)
axins1.set_ylim(y1, y2)

plt.xticks(visible=False)
plt.yticks(visible=False)

# draw a bbox of the region of the inset axes in the parent axes and
# connecting lines between the bbox and the inset axes area
mark_inset(ax, axins, loc1=2, loc2=4, fc="none", ec="0.5")
mark_inset(ax, axins1, loc1=2, loc2=4, fc="none", ec="0.5")

plt.draw()
plt.show() 
```

![在此处输入图像描述](../Images/c5c5126b3c7b9bc7653c6f8e3a66b712.png)

**编辑1：**

同样，您也可以在箱线图中添加缩放轴。这是一个例子

```
from pylab import *
from mpl_toolkits.axes_grid1.inset_locator import zoomed_inset_axes
from mpl_toolkits.axes_grid1.inset_locator import mark_inset

# fake up some data
spread = rand(50) * 100 
center = ones(25) * 50
flier_high = rand(10) * 100 + 100
flier_low = rand(10) * -100
data = concatenate((spread, center, flier_high, flier_low), 0)

# fake up some more data
spread= rand(50) * 100
center = ones(25) * 40
flier_high = rand(10) * 100 + 100
flier_low = rand(10) * -100
d2 = concatenate( (spread, center, flier_high, flier_low), 0 )
data.shape = (-1, 1)
d2.shape = (-1, 1)
data = [data, d2, d2[::2,0]]

# multiple box plots on one figure
fig = plt.figure(1, [5,4])
ax = fig.add_subplot(111)
ax.boxplot(data)
ax.set_xlim(0.5,5)
ax.set_ylim(0,300)

# Create the zoomed axes
axins = zoomed_inset_axes(ax, 3, loc=1) # zoom = 3, location = 1 (upper right)
axins.boxplot(data)

# sub region of the original image
x1, x2, y1, y2 = 0.9, 1.1, 125, 175
axins.set_xlim(x1, x2)
axins.set_ylim(y1, y2)
plt.xticks(visible=False)
plt.yticks(visible=False)

# draw bboxes of the two regions of the inset axes in the parent axes and
# connect lines between the bbox and the inset axes area
mark_inset(ax, axins, loc1=2, loc2=4, fc="none", ec="0.5")

show() 
```

![在此处输入图像描述](../Images/b5f98486ffecb13b8260b155a4739b99.png)

**编辑2**

如果分布是异质的，即大多数值很小而很少有非常大的值，上述缩放过程可能不起作用，因为它会缩放轴`x`和`y`轴。在这种情况下，最好将 的比例更改`y-axis`为`log`。

```
from pylab import *

# fake up some data
spread = rand(50) * 1
center = ones(25) * .5
flier_high = rand(10) * 100 + 100
flier_low = rand(10) * -100
data = concatenate((spread, center, flier_high, flier_low), 0)

# fake up some more data
spread = rand(50) * 1
center = ones(25) * .4
flier_high = rand(10) * 100 + 100
flier_low = rand(10) * -100
d2 = concatenate( (spread, center, flier_high, flier_low), 0 )
data.shape = (-1, 1)
d2.shape = (-1, 1)
data = [data, d2, d2[::2,0]]

# multiple box plots on one figure
fig = plt.figure(1, [5,4]) # Figure Size
ax = fig.add_subplot(111)  # Only 1 subplot 
ax.boxplot(data)
ax.set_xlim(0.5,5)
ax.set_ylim(.1,300)
ax.set_yscale('log')

show() 
```

![在此处输入图像描述](../Images/5e95ecb15b8291e6ae2c808c97d0441e.png)

# google-api - 您可以创建一个向您的用户发送日历事件短信通知的谷歌应用程序吗？

> ID：12091473
> 
> 赞同：-1
> 
> 时间：2012-08-23T12:21:00.570
> 
> 标签：google-api, google-apps-script, google-calendar-api, google-apps

您可以创建一个谷歌应用程序，为使用日历 api 的用户设置短信通知吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T17:09:36.497

在应用程序脚本中，您可以使用编程方式设置短信提醒，

```
CalendarApp.createEvent('Message here',
                            new Date(new Date().getTime()+60000),
                            new Date(new Date().getTime()+60000)).addSmsReminder(0); 
```

有关工作示例，请参见此处，[https://developers.google.com/apps-script/articles/gmail_filter_sms](https://developers.google.com/apps-script/articles/gmail_filter_sms)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:25:07.570

除非您愿意将另一个 api 与日历结合使用，否则这似乎是不可能的（我不明白您为什么不想……）。这可能是开始寻找合适 api 的好地方：[Programmatic SMS](https://stackoverflow.com/questions/4269/programmatic-sms)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T15:19:00.873

如果您的问题是使用 Apps 脚本，这是可能的。请参阅[https://developers.google.com/apps-script/class_calendarevent#addSmsReminder](https://developers.google.com/apps-script/class_calendarevent#addSmsReminder)。

# linux - 带有 tomcat7 的 Arquillian 遇到 Java 堆空间问题，仅在 linux 上

> ID：12091475
> 
> 赞同：4
> 
> 时间：2012-08-23T12:21:07.520
> 
> 标签：linux, testing, tomcat7, heap-memory, jboss-arquillian

我们正在使用 tomcat 7 运行 arquillian ...
使用我同事的 MAC 测试工作正常，但是在我的 linux 计算机上（我们都有 8gb ram）它失败了：

```
FATAL: Error waiting for multi-thread deployment of WAR files to complete
java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: Java heap space 
```

当我开始测试时，我在堆栈中看到这一行：

> 14:05:56.482 信息 - 使用以下命令启动 Tomcat：[java，-Dcom.sun.management.jmxremote.port=8089，-Dcom.sun.management.jmxremote.ssl=false，-Dcom.sun.management.jmxremote.authenticate =false，-Xmx512m，-XX:MaxPermSize=128m，-classpath，/home/user/apache-tomcat-testing/bin/bootstrap.jar:/home/user/apache-tomcat-testing/bin/tomcat-juli。 jar，-Djava.endorsed.dirs=/home/user/apache-tomcat-testing/endorsed，-Dcatalina.base=/home/user/apache-tomcat-testing，-Dcatalina.home=/home/user/apache- tomcat-testing，-Djava.io.tmpdir=/home/user/apache-tomcat-testing/temp，org.apache.catalina.startup.Bootstrap，-config，/home/user/apache-tomcat-testing/conf/ server.xml，开始]

我试图`bin/catalina.sh`用

```
JAVA_OPTS="-Djava.awt.headless=true -Dfile.encoding=UTF-8 -server -Xms2048m -Xmx2048m -XX:NewSize=256m -XX:MaxNewSize=256m -XX:PermSize=256m -XX:MaxPermSize=512m -XX:+DisableExplicitGC" 
```

但它仍然`xmx=512m`在堆栈中。
我还添加`pom.xml`了`<argLine>-Xms2048m -Xmx2048m</argLine>`for`failsafe-maven-plugin`和 for the`maven-surefire-plugin`但仍然是相同的错误...

为 arquillian 测试更改 xmlx 的正确位置在哪里？

谢谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T07:44:20.753

您似乎正在使用 Arquillian 管理的 Tomcat 7 容器。使用`javaVmArguments`arquillian.xml 中的属性来指定`Xmx`值：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<arquillian xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://jboss.org/schema/arquillian"
    xsi:schemaLocation="http://jboss.org/schema/arquillian http://jboss.org/schema/arquillian/arquillian_1_0.xsd">

    <container qualifier="tomcat" default="true">
        <configuration>
            <property name="catalinaHome">${CATALINA_HOME:target/apache-tomcat-7.0.20}</property>
            <property name="javaVmArguments">-Xms2048m -Xmx2048m</property>
            <property name="jmxPort">8089</property>
            <property name="bindHttpPort">8080</property>
            <property name="user">manager</property>
            <property name="pass">password</property>
            <property name="serverConfig">server.xml</property>
        </configuration>
    </container>
</arquillian> 
```

托管 Tomcat 7 容器支持的属性的完整参考位于[Arquillian Confluence wiki](https://docs.jboss.org/author/display/ARQ/Tomcat+7.0+-+Managed)中。

# php - PHP 电子邮件 Cron 作业

> ID：12091481
> 
> 赞同：-1
> 
> 时间：2012-08-23T12:21:31.427
> 
> 标签：php, email, cron

我正在开发一个 php 脚本，我想在其中向用户发送自动邮件。我成功地使用 php 脚本实现了一个 cron 作业，该脚本检查了一个 php 邮件队列表以查找待处理的邮件。该脚本运行良好，但 cron 作业运行异常，它将邮件发送给用户，但一次 3 或 4 个。我只想发送一次邮件。我怎样才能实现它？

我的 cron 作业每 2 分钟检查一次邮件队列表。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:31:28.043

每2分钟？我的猜测是前一个 cron 作业没有完成，第二个作业开始了，这就是它向同一个人或帐户发送多封电子邮件的原因。

尝试将频率降低到每小时左右

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:37:23.990

添加一些类似于 PID 文件工作方式的代码：

```
$path = '/path/to/pid/file';

// Check for PID file's existance, if found exit.
if (file_exists($path))
{
    echo 'PID File Exists';
    exit;
}

file_put_contents($path, '1'); // Create PID file

// Execute your code

unlink($path); // Delete the PID file 
```

几点注意事项：

*   如果您的脚本出现致命错误，那么您的脚本将永远不会再次运行，理想情况下您需要检查文件的[最后修改时间](http://php.net/manual/en/function.filemtime.php)
*   使用 WGET 运行 crons 是不好的，你的脚本仍然会超时，就好像你是通过浏览器运行它一样。改为使用 PHP CLI 运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T12:29:47.340

您需要在表中维护一个字段，例如`sent_status`.

在获取邮件时，使用 sql WHERE 子句 like`sent_status = 0`并在邮件发送给用户时通过电子邮件 id 更新此字段`sent_status = 1`。

所以单个用户无法批量接收邮件。

# sql-server - 使用 SQL Server 登录时 SQL Server 存储过程非常非常慢

> ID：12091482
> 
> 赞同：0
> 
> 时间：2012-08-23T12:21:31.140
> 
> 标签：sql-server, performance, stored-procedures, ssms, database-performance

我在 SQL Server 2005 中有一个存储过程，在使用 Windows 身份验证连接时在 Management Studio 中执行时非常快。该查询处理大量数据，大约需要 2 秒。

但是，当我打开 Management Studio 但作为 SQL Server 登录帐户连接并执行相同的存储过程时，需要将近 15 秒才能完成。

从与数据库在同一台机器上运行的 ASP.net 应用程序连接和运行存储过程时，我也看到了同样缓慢的查询执行。

有谁知道问题可能是什么？

我试过使用`WITH RECOMPILE`and`SET ARITHABORT ON`并`OFF`没有效果。

谢谢，

克里斯

# objective-c - 如何删除在 UIViewController 上某个特定点绘制的 UIImageView？

> ID：12091486
> 
> 赞同：0
> 
> 时间：2012-08-23T12:21:41.567
> 
> 标签：objective-c, ios, uiviewcontroller, uiimageview, uikit

每次我想在视图控制器窗口上的某个特定 xy 坐标处绘制图像（在本例中为“goodCell.png”..）时，我都会调用以下方法，包括适当的参数：

```
-(void)paintGoodCellatX:(int)xAxis andY:(int)yAxis onViewController:(UIViewController*)playingViewController
{
    int x = 32*(xAxis - 1);
    int y = 384 - (32* yAxis);

    UIImage* myImage = [UIImage imageNamed:@"goodCell.png"];
    UIImageView* myImageView = [[UIImageView alloc] initWithImage:myImage];
    myImageView.frame = CGRectMake(x,y, 32, 32);
    [playingViewController.view addSubview:myImageView];

} 
```

如果在我的代码中稍后的某个时间点，我想删除在某个特定 x 和 y 坐标处绘制的上述图像之一，我该怎么做？

鉴于此代码，我没有什么可以保留我绘制的 ImageView（因此我不能使用类似`[myImageView removeFromSuperView];`的东西，因为名称`myImageView`没有定义任何内容），除了它的坐标。那么有没有办法在 View Controller 窗口上的特定 xy 坐标处删除/删除 UIImageView 或其他解决此问题的方法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:26:58.457

将 TAG 添加到您的视图中，为您提供有意义的标识符。使用 myImageView.tag = XXX;

然后使用 [playingViewController viewWithTag:XXX] 获取要移除的视图的 UIImageView 句柄。

标签是一个整数，它可以是存储这些 X/Y 位置的 NSArray 的偏移量，或者是存储这些值的 NSDictionary 的键？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T12:30:42.990

您可以给每个视图一个由点计算的标签，例如 3 位 x 比 3 位 y 轴作为标签

对于 x=312 y=567 它将是

```
myImageView.tag = 312567; 
```

有了这个，你总是可以识别视图

另一种更好的可能性是将所有添加的内容存储在 NSArray 中。如果要删除一个特定的视图，则必须遍历数组并检查该点是否在视图的边界内所以或多或少：

用于创作；

```
NSMutableArray *imageViewArray = [[NSMutableArray alloc] init];
-(void)paintGoodCellatX:(int)xAxis andY:(int)yAxis onViewController:(UIViewController*)playingViewController
{
    int x = 32*(xAxis - 1);
    int y = 384 - (32* yAxis);

    UIImage* myImage = [UIImage imageNamed:@"goodCell.png"];
    UIImageView* myImageView = [[UIImageView alloc] initWithImage:myImage];
    myImageView.frame = CGRectMake(x,y, 32, 32);
    [playingViewController.view addSubview:myImageView];
    [imageViewArray add:myImageView];
} 
```

删除：

```
for(UIImageView *mv in imageViewArray) {
 if(CGRectContainsPoint(mv.bounds, yourCGPoint)) 
  [mv removeFromSuperview];
} 
```

# html - Outlook 2010 中 HTML 电子邮件中图像下的一个像素空间

> ID：12091492
> 
> 赞同：0
> 
> 时间：2012-08-23T12:21:59.333
> 
> 标签：html, email, outlook-2010

我知道这是一直被问到的那种问题，但我已经通过了我能找到的每一个答案，但没有什么能解决这个问题。问题是 Outlook 2010 在表格单元格内的每个图像下方（或上方）添加了一个像素间隙。（是低于还是高于取决于你是使用 valign="top" 还是 valign="bottom"）。设置显示：块；似乎没有帮助。

如果您在 Windows 7 上的 Outlook 2010 中查看此示例，您将在 Google 徽标下方看到一条红线。我所做的一切都不会删除这条线。

```
<table width="275" height="95" border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse;" bgcolor="red">
    <tr>
        <td width="275" height="95" align="left" valign="bottom" style="font-size:0; line-height: 0; border-collapse: collapse;">
            <img src="https://www.google.co.uk/images/srpr/logo3w.png" border="0" style="display: block; vertical-align: top;"></td>
    </tr>
</table> 
```

我得出的结论是不可能删除这条线。有人愿意证明我错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-15T22:16:48.623

试试这个 - 看！

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<table width="275" height="95" border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse;" bgcolor="red;">
<tr>
<td width="275" height="95" align="left" valign="bottom" style="font-size:0; line-height: 0; border-collapse: collapse;"><img src="https://www.google.co.uk/images/srpr/logo3w.png" border="0" style="display: block; vertical-align: top;"></td>
</tr>
</table>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T12:42:54.707

请试试这个并恢复

```
<img src="https://www.google.co.uk/images/srpr/logo3w.png" border="0" style="display: block;" align="top"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-14T14:19:28.613

即使我遇到了同样的问题，但我通过在 div 、 p 标签中插入图像并覆盖邮件客户端生成的外部 css 解决了这个问题。

```
<td colspan="3">
        <div class="override" style="height: 201px !important;">
        <p style="height: 201px !important; ">
            <img src="images/path" width="800" height="201" alt="">
        </p>
        </div>
</td>

<style type="text/css">
p {margin-bottom: 0;}
.ExternalClass p, .ExternalClass span, .ExternalClass font, .ExternalClass td {
line-height: 0%;
}
p, .override{
font-size:0pt ;
line-height:0px;
}
</style> 
```

希望这对任何人都有帮助。一切顺利..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T15:01:33.593

嘿，我知道这是一个旧线程，但我刚刚遇到了这个问题，实际上设法以一种奇怪的方式解决了它。在我的情况下，我的图像下方出现了 1 个像素的间隙。我从表格结构中删除了图像，然后将 html 高度设置为比图像的实际高度小一个像素。以下是我在电子邮件中使用的确切代码（图像 src 已编辑）。

```
</table>

    <img src='http://img1.jpg' height='400' width='552' alt='' border='0' style='display:block;align:bottom;border:none;margin:0;padding:0;height:401px;' />

<table border='0' style='padding:0;margin:0;border-collapse:collapse;' cellpadding="0" cellspacing="0"> 
```

不知何故，这解决了它。我不确定是否真的需要从表结构中删除图像。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-17T10:42:06.353

对我有用的一个技巧：将 align="absbottom texttop" 添加到 img 和 line-height:10px （或更少）到包装图像的 td

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-14T15:28:40.407

删除`align="left"`（或`"right"`）。

# c++ - 从 QML 访问 QStandardItemModel 的项目

> ID：12091495
> 
> 赞同：5
> 
> 时间：2012-08-23T12:22:02.050
> 
> 标签：c++, qt, qml

（已编辑）在原始问题中，我错误地假设 GridView 本身使用二维模型。实际上，它采用与其他 QML 视图类似的元素列表。为了使问题和答案更容易理解，我稍微更改了给定的代码。此外，我根据答案添加了工作解决方案。

在主程序中，我定义了一个 QStandardItemModel 实例：

```
QScopedPointer<QApplication> app(createApplication(argc, argv));
QmlApplicationViewer viewer;

QStandardItemModel* cppmodel = new QStandardItemModel();
for (int i=0; i<100; i++) {
    QStandardItem* item = new QStandardItem(QString("%1").arg(i,2,10,QChar('0')));
    cppmodel->appendRow(item);
} 
```

然后，我将模型注册到 QML：

```
viewer.rootContext()->setContextProperty("cppModel",cppmodel); 
```

QStandardItemModel 是一个表，不是吗？然后，如何编写委托以在简单的 GridView 中显示项目：

```
 GridView {
        model: cppModel
        delegate: Rectangle {
            Text { text: ??? } //WHAT MUST BE USED HERE ???
        }
    } 
```

我必须使用命名角色还是只能使用正确创建的索引？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T13:12:58.633

也许它可以帮助你：
[在 QML 中使用 QStandardItemModel](https://web.archive.org/web/20140809004643/http://developer.nokia.com/community/wiki/Using_QStandardItemModel_in_QML)

您也可以尝试这样的代码：

```
GridView {
   anchors.fill: parent
   model: cppModel
   delegate: Rectangle {
      Text {
         text: display;
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-07T22:24:02.533

由于这个问题已经 3 个月大，您可能已经有了答案，但为了帮助其他人：

简短的回答是使用：

```
datalist.currentIndex = index; 
```

例如，使用 ListView，这对我有用：

```
ListView {
    id: datalist
    model: cppModel
    delegate: Rectangle {
        Text {
             text: display;
        }
    }
} 
```

...

```
MouseArea {
    anchors.fill: parent;
    onClicked: {
        datalist.currentIndex = index;
    }
} 
```

这似乎是每个人都需要的东西，但是我在任何 ListView 示例中都没有找到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T09:22:04.117

这是解决方案的完整且有效的示例。感谢所有帮助。

=== cppmodel.h ===

```
#include <QtDeclarative>

class CppModel : public QStandardItemModel
{
private:
    Q_OBJECT
public:
    explicit CppModel(QObject *parent = 0) : QStandardItemModel(parent) {}
public slots:
    void setDataInModel(const int i, const QString& txt) {
        setItem(i,new QStandardItem(txt));
    }
}; 
```

=== main.cpp ===

```
#include <QtDebug>
#include <QtGui/QApplication>
#include "qmlapplicationviewer.h"
#include "cppmodel.h"

Q_DECL_EXPORT int main(int argc, char *argv[])
{
    QScopedPointer<QApplication> app(createApplication(argc, argv));
    QmlApplicationViewer viewer;

    CppModel* cppmodel = new CppModel();
    for (int i=0; i<100; i++) {
        QStandardItem* item = new QStandardItem(QString("%1").arg(i,2,10,QChar('0')));
        cppmodel->appendRow(item);
    }

    viewer.rootContext()->setContextProperty("cppModel",cppmodel);

    viewer.setOrientation(QmlApplicationViewer::ScreenOrientationAuto);
    viewer.setMainQmlFile(QLatin1String("main.qml"));
    viewer.showExpanded();
    return app->exec();
} 
```

=== main.qml ===

```
import QtQuick 1.1
import com.nokia.meego 1.0

PageStackWindow {
    id: appWindow    
    initialPage: mainPage    
    Page {
        id: mainPage    
        GridView {
           anchors.fill: parent
           model: cppModel
           delegate: Rectangle {
              height: itemText.height;
              width: itemText.width;
              Text {
                 id: itemText
                 text: display;
              }
              MouseArea {
                  anchors.fill: parent;
                  onClicked: {
                      console.log("Clicked: "+index)
                      cppModel.setDataInModel(index,"XX")
                  }
              }
           }
        }
    }
} 
```

# java - JAR：找不到主类

> ID：12091496
> 
> 赞同：0
> 
> 时间：2012-08-23T12:22:05.390
> 
> 标签：java, jar

这是一个典型的错误消息，但没有搜索结果可以帮助我。我正在尝试构建和运行某人编写的 java 工具。

我收到以下错误：

```
Could not find the main class: ConnJKSEngine.  Program will exit. 
```

这是我的清单：

```
Main-Class: ConnJKSEngine 
```

我也将其更改为

```
Main-Class: ConnJKSEngine.ConnJKSEngine 
```

和

```
Main-Class: ConnJKSEngine/ConnJKSEngine 
```

（它最后有一个换行符）。没有任何区别

这就是我构建 jar 的方式：

```
javac -cp ConnJKSEngine/ ConnJKSEngine/ConnJKSEngine.java
jar -cvfm ConnJKSEngine.jar ConnJKSEngine/ConnJKSEngineManifest ConnJKSEngine/*.class
chmod +x ConnJKSEngine.jar 
```

这就是我尝试运行 jar 的方式（尝试了所有这些）：

```
java ConnJKSEngine.jar
java -jar ConnJKSEngine.jar
java -cp ConnJKSEngine.jar ConnJKSEngine 
```

这是由给出的目录`jar -tf ConnJKSEngine.jar`

```
META-INF/
META-INF/MANIFEST.MF
ConnJKSEngine/ConnJKSEngine.class
ConnJKSEngine/ConnJKSEngine_GenKey.class
ConnJKSEngine/ConnJKSEngine_GetPubKey.class
ConnJKSEngine/ConnJKSEngine_Operation.class
ConnJKSEngine/ConnJKSEngine_PrivDec.class
ConnJKSEngine/ConnJKSEngine_Sign.class 
```

我已更改`ConnJKSEngine`目录并执行`java ConnJKSEngine`，它正确打印了使用信息。这使我确保主类存在并且可以执行。所以建造罐子一定有问题，对吧？

所以我继续将 jar 解压到不同的目录 ( `unzip ConnJKSEngine.zip`) 并得到如上所示的目录结构。如果我进入`ConnJKSEngine`目录并执行`java ConnJKSEngine`，它会正确执行。

在这里我被卡住了：该类在那里，它在子目录中并且可以执行。清单似乎是正确的。由于我不是java程序员，所以我现在就来这里。知道会发生什么吗？（注：Linux系统）

**编辑**源代码可以在这里找到：[https ://github.com/Javex/JKSEngine](https://github.com/Javex/JKSEngine)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:26:18.693

我认为您的主类应该具有完全限定的名称`ConnJKSEngine.ConnJKSEngine`，或者您的 jar 内容应该如下所示：

```
META-INF/
META-INF/MANIFEST.MF
ConnJKSEngine.class
ConnJKSEngine_GenKey.class
ConnJKSEngine_GetPubKey.class
ConnJKSEngine_Operation.class
ConnJKSEngine_PrivDec.class
ConnJKSEngine_Sign.class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:26:22.213

如果 ConnJKSEngine 在默认包中（无 package 声明），则 ConnJKSEngine.class 和所有其他类应位于 jar 文件的根目录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T12:27:07.913

# 更新

鉴于这句话

> 我已更改为 ConnJKSEngine 目录并执行了 java ConnJKSEngine，它正确打印了使用信息

我想完整的类名只是ConnJKSEngine，即没有任何包。在这种情况下，清单类需要声明

```
Main-Class: ConnJKSEngine 
```

根据你的第一次尝试，但是你做了一个**错误的包**，即所有类必须直接放在存档中，而不是放在以项目命名的子目录中（似乎为了避免名称冲突，开发人员在每个类的*实际名称*前加上前缀 - 不好的做法）。因此，您需要像这样将所有 *.class 文件放在 JAR 中

```
META-INF/
META-INF/MANIFEST.MF
ConnJKSEngine.class
ConnJKSEngine_GenKey.class
ConnJKSEngine_GetPubKey.class
ConnJKSEngine_Operation.class
ConnJKSEngine_PrivDec.class
ConnJKSEngine_Sign.class 
```

您可以尝试以下命令

```
# change to project directory
cd ConnJKSEngine
# compile every *.java file
javac *.java
# build the final archive
jar cmvf jksengine-1.0.jar ConnJKSEngineManifest *.class 
```

这是[javac](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html) (compiler) 和[jar](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/jar.html) (archiver)的文档

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T15:22:37.247

> 清单文本文件必须以换行符或回车符结尾。如果最后一行没有以新行或回车结束，则不会正确解析。

# vim - 当文件被另一个应用程序更改时如何得到通知？

> ID：12091497
> 
> 赞同：7
> 
> 时间：2012-08-23T12:22:10.350
> 
> 标签：vim

在我听说 vim 之前，我曾经使用过 gedit。我仍然尝试让 vim 的行为与 gedit 相同，这是因为我在 StackOverflow 上提出了许多与 vim 相关的问题。

我缺少的一个功能是，当我在另一个应用程序处理 gedit 上的任何文件时修改了任何文件时，会出现一个弹出窗口，上面写着`The file <file_location> changed on disk. Do you want to reload the file?`并且有两个分别命名为`Reload`和的按钮`Cancel`。

* * *

### *我想要的是：*

*（请注意，我使用的是 vim，而不是 gvim）*我想要 vim 中的类似功能。我希望如果磁盘上的任何文件发生更改，状态栏会出现警告消息：

```
File changed, press F9 to reload. 
```

我会映射我`F9`的事情`:e`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T12:53:56.203

如果`autoread`已设置，vim 在每个 shell 命令 ( `:!`) 之后、写入文件时以及发出`:checktime`. gvim 还会检查您何时将窗口焦点切换到应用程序。

您可以使用[http://vim.wikia.com/wiki/Timer_to_execute_commands_periodically](http://vim.wikia.com/wiki/Timer_to_execute_commands_periodically)`:checktime`的配方定期执行：

```
autocmd CursorHold * call Timer()
function! Timer()
    call feedkeys("f\e")
    checktime
endfunction
set updatetime=5000  " milliseconds 
```

要仅打印警告，请设置[autocmd`FileChangedShell`](http://vimdoc.sourceforge.net/htmldoc/autocmd.html#FileChangedShell)（[检测文件更改，提供重新加载文件](https://stackoverflow.com/questions/923737/detect-file-change-offer-to-reload-file)）：

```
autocmd FileChangedShell * echo "File changed, press F9 to reload." 
```

对于插入模式，使用`CursorHoldI`（不确定这个 feedkeys 序列，但它似乎有效）：

```
autocmd CursorHoldI * call TimerI()
function! TimerI()
    call feedkeys("\<C-R>\e")
    checktime
endfunction 
```

您可能必须将`FileChangedShell`autocmd 从更改`echo`为`echoe`，因为我认为不会`echo`在插入模式下打印。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:29:53.030

试图强迫 Vim 像另一个编辑器一样工作是没有意义的。我对此感到内疚（以 TextMate 为模型），这既是彻底的失败，也是学习曲线上的障碍。

但是，您所要求的 - 外部更改通知 - 是默认行为，可以使用`:set autoread`.

# c# - 为 SharePoint 2010 Webpart 创建图表

> ID：12091502
> 
> 赞同：2
> 
> 时间：2012-08-23T12:22:25.023
> 
> 标签：c#, sharepoint

我创建了一个从我的 webpart 到 Oracle 数据库的连接，其中包含日期和数字。

我想在图表中显示这些数据。

我在互联网上查看了任何示例，但我很难过。

谁能指点我一些简单的说明，详细说明如何在 c sharp 中创建一个可以在 webpart 上工作的图表，好吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-10T15:32:18.627

基本上，Webpart 以普通的 html、css 和 JavaScript 结尾。所以你可以使用任何 js 库来创建图表。（例如：[Chart.js](http://www.chartjs.org/)

您可以重写 RenderWebPart() 方法，以生成自定义 HTML。通过这种方式，您可以创建元素和包含 var data = {} 的自定义元素，可以使用 chart.js 进行绘图

问候

# c++ - 识别 LLVM 中块的封闭循环

> ID：12091503
> 
> 赞同：8
> 
> 时间：2012-08-23T12:22:29.943
> 
> 标签：c++, c, llvm

对于由 class 表示的 LLVM 基本块，`BasicBlock`我如何识别哪个最近的循环（如果有）包含该块。我想在`runOnModule`通行证中识别这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T00:46:36.777

您可以注册 LoopInfo 依赖项并使用 getLoopF​​or(BasicBlock *BB)：

```
Loop* llvm::LoopInfo::getLoopFor(const BasicBlock *BB) const 
```

您可以查看以下文档： http: [//llvm.org/doxygen/classllvm_1_1LoopInfo.html#a4abca289c73cd09487e05d11d9f7d877](http://llvm.org/doxygen/classllvm_1_1LoopInfo.html#a4abca289c73cd09487e05d11d9f7d877)

# c# - 从列表中删除项目时的双向绑定

> ID：12091504
> 
> 赞同：0
> 
> 时间：2012-08-23T12:22:37.370
> 
> 标签：c#, wpf, xaml

从列表数据结构中删除/添加项目时，如何设置双向绑定？
目前，我的列表框中的每个项目都显示字符串值，如果我更新这些值中的任何一个，我将通过 propertyChanged 通知设置双向绑定。虽然如果我从列表中完全删除该项目，我如何更新列表？

这是我想更新

Student.CompSciList.RemoveAt(listBox.SelectedIndex) 的行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T12:25:23.407

您必须使用一个列表来通知您的控件是否发生了变化，例如[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604%28v=vs.100%29.aspx)

# java - 什么是反斜杠字符 (\\)？

> ID：12091506
> 
> 赞同：21
> 
> 时间：2012-08-23T12:22:54.027
> 
> 标签：java, string, string-literals

什么是字符串文字`\\` *反斜杠*？它有什么作用？我想过，但我不明白。我也在[维基百科](http://en.wikipedia.org/wiki/String_literal#Escape_sequences)上阅读过。当我尝试打印以下内容时：

```
System.out.println("Mango \\ Nightangle"); 
```

输出是：`Mango \ Nightangle`

这个字符串文字的意义是什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-23T12:24:13.340

`\`在包括 Java 在内的许多编程语言中用作转义序列。

如果你想

*   转到下一行然后使用`\n`or `\r`,
*   供标签使用`\t`
*   同样要打印一个`\`或`"`在字符串文字中是特殊的，你必须用另一个`\`给我们`\\`和`\"`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-23T12:31:22.827

想象一下，您正在设计一种编程语言。您决定将字符串括在引号中（“Apple”）。然后你遇到了第一个问题：既然你已经使用了引号，如何表示它们？只是出于惯例，您决定使用`\"`引号来表示。那么你有第二个问题：如何表示`\`？同样，您决定改用不符合惯例`\\`。值得庆幸的是，该过程到此结束，这就足够了。您还可以使用所谓的转义序列来表示其他字符，例如回车符 ( `\n`)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-23T12:24:26.370

它用于转义特殊字符并按原样打印它们。例如，要打印用于包含字符串的双引号，您需要使用反斜杠字符对其进行转义。

例如

```
System.out.println("printing \"this\" in quotes"); 
```

输出

```
printing "this" in quotes 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-23T12:26:08.457

`\`用于编程语言中的转义序列。

`\n`打印换行符
`\\`打印反斜杠
`\"`打印 "
`\t`打印制表符
`\b`将光标向后移动

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-23T12:26:24.993

在语句中键入这些特定值时`\`，它本身用于转义特殊字符，例如`\n`（新行）、`\t`（制表）、 （引号）。`\"``System.out.println()`

因此，如果你想打印一个反斜杠，`\`你不能自己拥有它，因为编译器会期待一个特殊字符（例如上面的那些）。因此，要打印反斜杠，您需要对其进行转义，因为它本身也是这些特殊字符之一，因此，`\\`yield `\`。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-08-23T12:28:23.483

如果双反斜杠对您来说很奇怪，C# 还允许[逐字字符串文字](http://msdn.microsoft.com/en-us/library/aa691090%28v=vs.71%29.aspx)，其中不需要转义。

```
Console.WriteLine(@"Mango \ Nightangle"); 
```

你不只是希望Java有这样的东西吗;-)

# oop - 扩展 Backbone.Collection 和 Backbone.Model 以创建新的 Collection/Model 类型

> ID：12091514
> 
> 赞同：0
> 
> 时间：2012-08-23T12:23:17.587
> 
> 标签：oop, backbone.js, mootools, underscore.js, extend

我一直在尝试创建自己的基础模型和集合以在我的应用程序中进行扩展。我的意思是，而不是调用：

```
var MyModel = Backbone.Collection.extend({
    ...
}); 
```

我想用

```
var MyModel = App.Model.extend({
    ...
}); 
```

控制器也是如此。在大多数 OOP 模型中，有一种简单的方法可以做到这一点，例如在 Mootools 中：

```
var MyModel = new Class({
    Extend: App.Model,
    ...
}); 
```

这确实是我想模仿的模式。这样做的原因是我希望在我的所有模型和集合中都可以使用某些属性和方法，而不必每次都重新实现它。

我注意到有一些库（例如[骨干关系](https://github.com/PaulUithol/Backbone-relational)）可以管理这个，但代码似乎有点脏（可能只是因为模式太不熟悉），我不太确定我是否理解它。

所以我的问题是：如何以正常的 OOP 方式扩展 Backbone 的核心类？（*是的，我知道 Javascript 不使用类继承，而是使用原型继承 &c..*）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:44:09.280

```
App.Model = Backbone.Model.extend({
  //do whatever you want to be present in all of your models
}); 
```

然后在您`App`可用的任何地方

```
var MyModel = App.Model.extend({
  // Do whatever you want to do for this particular type of model
}); 
```

因此，您只需`Model`通过扩展 Backbone 来为自己创建一个具有您想要的所有特定属性和方法的新基础，然后像使用 Backbone 一样使用它。

# sql - 如何在另一个表中查找匹配的字段

> ID：12091516
> 
> 赞同：0
> 
> 时间：2012-08-23T12:23:22.330
> 
> 标签：sql, ms-access

我有一个简单的数据库，我用它来尝试让工作变得更容易一些。有 2 个表格，其中一个包含网站 URL 列表和过去 6 个月的访问次数。网址以某种方式构造：

www.domain.com/server/someotherstuff/123456789012345/pageTemplateName

中间的长数字是唯一的页面ID。另一个表是这些 ID 的长列表。我想运行一个查询，显示在另一个表中具有 ID 的所有页面的 URL 和访问次数。所以我在想这样的事情：

```
SELECT *
FROM Stats
WHERE  Stats.url LIKE '%' + Pages.PageId + '%' 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:25:34.920

除非您在 MS Access 之外工作或您更改了选项，否则通配符是 *，而不是 %

```
SELECT *
FROM Stats, Pages
WHERE  Stats.url LIKE '*' & Pages.PageId & '*' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:34:32.003

你可以试试这样

```
SELECT * FROM Stats Inner Join Pages on Stats.url LIKE '%' + Pages.PageId + '%' 
```

# java - 将objective-c编译成java

> ID：12091523
> 
> 赞同：2
> 
> 时间：2012-08-23T12:23:37.237
> 
> 标签：java, objective-c, cross-compiling

我想知道是否有办法将objective-c 代码编译为Java。我完全清楚这两种语言差异很大，是的，但是考虑到可以在 Objective-C 中重用 Java 代码，我想知道您是否可以将 Objective-C 代码导出到 JAR，或者其他可重用的东西Java 应用程序。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-24T15:36:06.227

从评论看来，目标实际上并不是将 Objective-C 编译为 Java，而是将 Objective-C 编译为 Android。

对于编译到 Android，[Apportable](http://www.apportable.com/)是一种解决方案，已用于构建[多个 Objective-C 应用程序](http://www.apportable.com/customers)并将其部署到 Android 市场。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:12:04.567

有一个开源项目 Objc2J，它可以帮助你。

[http://code.google.com/p/objc2j/](http://code.google.com/p/objc2j/)

**免责声明：**我是这个未完成产品的作者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T13:02:33.577

不知道这是否有帮助，但[MonoTouch](http://xamarin.com/monotouch/)可能是您正在寻找的。

它是基于 C# 的，但我相信它可以为 iOS 和 Android 本地编译。

# jakarta-ee - 手动提供 JSESSIONID 并发出请求？

> ID：12091527
> 
> 赞同：0
> 
> 时间：2012-08-23T12:24:02.137
> 
> 标签：jakarta-ee, web-applications, servlets

为了保护对我们的 Restful Web 服务的未经授权的访问（即用户使用 Http Restful 客户端而不登录应用程序），我提供了以下条件。

```
if (sess == null )
{
throw Exception("") 
} 
```

为了测试上述情况，我按下了注销按钮（在代码中进行了 session.invalidate），现在我打开了独立 Rest Clinet，手动输入先前捕获的 Cookie，并在独立 HttpRest 客户端（JSESSIONID=dsadsadsad4342323）的标题部分中提供了它并做了一个测试 。

我观察到它符合这个条件 if (sess == null ) (SESSION is null)

我期待，因为我手动证明 JSESSIONID，它将通过此​​检查。

有人可以让我知道为什么会这样吗？

# mysql - MySQL查询以查找最后一个插入代码

> ID：12091530
> 
> 赞同：1
> 
> 时间：2012-08-23T12:24:13.313
> 
> 标签：mysql, cakephp

我有例如代码：

```
PC_MB_TC_0001
PC_GH_TY_0002
PS_AB_VH_0003
IC_WC_XX_0001
IH_ML_FR_0002 
```

这些代码是系统生成的。我使用的逻辑：首先找到以'P'开头的代码计数。然后将该计数加 1。此逻辑运行良好，但从数据库中删除代码时会失败。那么是否有任何 MySQL 查询可以做到这一点，或者任何人都可以帮助我处理其他一些逻辑。

我正在使用 cakePhP。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:27:38.940

如果您可以使用 MyISAM，您可以创建一个多列自动增量来为您完成工作。您需要将字符串和自动递增的数字存储在单独的列中，才能使此解决方案起作用。

> 对于 MyISAM 表，您可以在多列索引中的辅助列上指定 AUTO_INCREMENT。在这种情况下，AUTO_INCREMENT 列的生成值计算为 MAX(auto_increment_column) + 1 WHERE prefix=given-prefix。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:28:59.523

你可以试试

```
SELECT 1+MAX(CONVERT(RIGHT(your_column_name, 4), SIGNED)) as newindex
FROM your_table
WHERE your_column_name LIKE 'P%'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T16:47:40.043

您可能想尝试查看

```
echo $this->ModelName->getInsertID(); 
```

或者

```
echo $this->ModelName->getLastInsertID(); 
```

这些将为您提供最后插入的 MySQL 记录 ID。然后您可以查找该 id 的代码值是什么。

# java - .xlsm 工作簿的 XSSFWorkbook 构建速度非常慢

> ID：12091532
> 
> 赞同：4
> 
> 时间：2012-08-23T12:24:17.037
> 
> 标签：java, apache-poi

我们有一个预先创建的 Excel 文件，其中包含交叉引用工作表的精美图表和公式。它还包含宏。源数据应该被复制粘贴到一张纸中，工作簿的其余部分从预先存在的接线中填充。

**注意：**我真的不关心阅读/修改此工作簿中的其他工作表，我只需要节省每次将原始数据复制粘贴到此工作簿中的此数据表的痛苦。

我正在使用 Apache POI 并尝试从这个“模板”excel 文件创建一个 XSSFWorkbook 实例。但是，构建此对象需要很长时间（在多次运行中几乎持续一分钟）。excel文件本身只有400KB左右，不是一个大文件。我使用 jconsole 对此进行了分析，它似乎不受 CPU 或堆的限制 - 它仅使用大约 90 MB 堆内存（我用 2GB 提交的堆启动它）和大约 52% 的 CPU。

用原始数据实际填充数据表并写出最终更新的文件需要很短的时间（大约 3-4 秒）。这是我的启动代码：

```
public static void startup() throws FileNotFoundException, IOException {
    long start = System.nanoTime();
    System.out.println("Started...");
    TEMPLATE_WORKBOOK = new XSSFWorkbook(new FileInputStream(new File(TEMPLATE)));
    long end = (System.nanoTime() - start) / NANOS;
    System.out.println("It took " + end + " seconds..");
} 
```

我考虑过一次加载这个 TEMPLATE_WORKBOOK，然后重用相同的句柄为每个后续请求写入新数据——我在我的主类中用睡眠和永远模拟了这个。但我显然不能这样做，我得到了一个异常“线程“主”org.apache.xmlbeans.impl.values.XmlValueDisconnectedException中的异常”。TEMPLATE_WORKBOOK 对象不可重用。

我确实看到有一个基于事件的 API，但在我进入它之前，我想看看我是否在这里遗漏了一些东西！再说一次，内存/CPU 在这里不是问题，我们有足够的可用堆空间。我正在努力减少时间。

PS：我在这里尝试了提示：[XSSFWorkbook 需要很长时间才能加载](https://stackoverflow.com/questions/11154678/xssfworkbook-takes-a-lot-of-time-to-load)——它们对启动时间没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:06:00.627

我认为你在你想做的事情上处于不利地位。我遇到了同样的问题（请参阅[此处](https://stackoverflow.com/questions/11140635/how-to-copy-entire-sheets-from-large-excel-files-without-parsing-them-using-apac)），不幸的是，您的情况没有解决方案。

即使你想在你的数据表中正确，你可以做到的唯一方法是将你的文件打开为`XSSFWorkbook`.，即使在基于事件的 API 中也是如此。

`SXSSFWorkbook`不能从 File、InputStream 或 OPCPackage 构造。您只能从头开始构建它或从`XSSFWorkbook`.

唯一真正非常***耗时***的可能解决方案（我不知道是否可能）是尝试使用读取解析器输入数据，这意味着您应该自己将excel文件解析为xml。

我们最终的解决方案是等待我们的问题的解决方案得到解决。

很抱歉，您无法得到您想要的答案。

# android - 安卓移动应用

> ID：12091533
> 
> 赞同：1
> 
> 时间：2012-08-23T12:24:17.433
> 
> 标签：android

我在 BE IT，我的最后一年项目是文本到语音移动应用程序，但我想添加更多功能，所以我知道如果盲人想要发送消息，那么盲人将如何发送给普通人？

我在谷歌上搜索并得到了一些有用的结果....http://www.bbc.co.uk/news/technology-17105225 ....我想问一下这个想法可以在Android移动应用程序上运行吗？

PS我不知道Android移动应用程序，想知道这个想法可以在Android上实现吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:26:48.853

我认为一个好的开始是检查 Android 上的 TTS 引擎：http: [//developer.android.com/reference/android/speech/tts/TextToSpeech.html](http://developer.android.com/reference/android/speech/tts/TextToSpeech.html)

在我看来，Android 是最开放的移动平台之一。所以我很确定你的想法可以在这个系统上实现！

祝你的项目好运。

# android - 在 Android 市场中以编程方式检查我的应用程序版本

> ID：12091534
> 
> 赞同：25
> 
> 时间：2012-08-23T12:24:17.740
> 
> 标签：android, google-play, auto-update

目前我正在检查应用程序版本代码，并将其与我服务器上的最新版本代码相匹配，并基于此匹配，我发送用户从 Android 市场获取最新更新。

它运行良好，但我的问题是我必须手动更改服务器上的最新版本代码，而且我不知道新版本何时`APK`在市场上激活。

有什么方法可以直接在 Android 市场中检查应用程序的版本代码，以便在激活新的 apk 时直接将用户发送到市场？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-23T12:31:26.447

Google Play 不提供任何用于检索元数据的官方 API。[但是，您可以在http://code.google.com/p/android-market-api/](http://code.google.com/p/android-market-api/)检查非官方 API 。

具体来说，请查看 Wiki 页面[HowToSearchApps](http://code.google.com/p/android-market-api/wiki/HowToSearchApps)。对查询的响应包含版本信息：

```
{
  "app": [
    {
      "rating": "4.642857142857143",
      "title": "Ruboto IRB",
      "ratingsCount": 14,
      "creator": "Jan Berkel",
      "appType": "APPLICATION",
      "id": "9089465703133677000",
      "packageName": "org.jruby.ruboto.irb",
      "version": "0.1",
      "versionCode": 1,
      "creatorId": "\"Jan Berkel\"",
      "ExtendedInfo": {
        "category": "Tools",
        "permissionId": [
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-23T03:36:11.420

我们可以进行模式匹配以从 playStore 获取应用程序版本。

要匹配来自 google playstore 的最新模式，即 `<div class="BgcNfc">Current Version</div><span class="htlgb"><div><span class="htlgb">X.X.X</span></div>` 我们首先必须匹配上面的节点序列，然后从上面的序列中获取版本值。以下是相同的代码片段：

```
 private String getAppVersion(String patternString, String inputString) {
        try{
            //Create a pattern
            Pattern pattern = Pattern.compile(patternString);
            if (null == pattern) {
                return null;
            }

            //Match the pattern string in provided string
            Matcher matcher = pattern.matcher(inputString);
            if (null != matcher && matcher.find()) {
                return matcher.group(1);
            }

        }catch (PatternSyntaxException ex) {

            ex.printStackTrace();
        }

        return null;
    }

    private String getPlayStoreAppVersion(String appUrlString) {
        final String currentVersion_PatternSeq = "<div[^>]*?>Current\\sVersion</div><span[^>]*?>(.*?)><div[^>]*?>(.*?)><span[^>]*?>(.*?)</span>";
        final String appVersion_PatternSeq = "htlgb\">([^<]*)</s";
        String playStoreAppVersion = null;

        BufferedReader inReader = null;
        URLConnection uc = null;
        StringBuilder urlData = new StringBuilder();

        final URL url = new URL(appUrlString);
        uc = url.openConnection();
        if(uc == null) {
           return null;
        }
        uc.setRequestProperty("User-Agent", "Mozilla/5.0 (Windows; U; WindowsNT 5.1; en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6");
        inReader = new BufferedReader(new InputStreamReader(uc.getInputStream()));
        if (null != inReader) {
            String str = "";
            while ((str = inReader.readLine()) != null) {
                           urlData.append(str);
            }
        }

        // Get the current version pattern sequence 
        String versionString = getAppVersion (currentVersion_PatternSeq, urlData.toString());
        if(null == versionString){ 
            return null;
        }else{
            // get version from "htlgb">X.X.X</span>
            playStoreAppVersion = getAppVersion (appVersion_PatternSeq, versionString);
        }

        return playStoreAppVersion;
    } 
```

我通过这个解决了这个问题。希望有帮助。

# javascript - 如何在一行中将孩子追加到 div 中

> ID：12091535
> 
> 赞同：2
> 
> 时间：2012-08-23T12:24:21.310
> 
> 标签：javascript, jquery, html, dom

我希望一个元素首先被一个 div 替换，然后该 div 将通过 append() 生成一些子元素：

```
$(el).html('<div></div>').append('<span></span>').append('<span></span>') 
```

没有给我我想要的东西，因为 div 和 span 是兄弟姐妹。

我也试过：

```
$(el).replaceWith('<div></div>').append('<span></span>').append('<span></span>') 
```

没有成功。此行不适用于 AngularJS（指令）。

有没有一种简单的方法来制作 div 的 spans 子项？

更新：

这就是我最终使用的：

```
$(element)
  .html($('<div class="property-filter"></div>')
  .append(labelElm)
  .append(amountElm)
  .append(sliderElm)); 
```

因为它很容易理解（对我来说）。

感谢所有解决方案！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T12:28:23.203

您的代码不起作用，因为`$(el).html('<div></div>')`返回`$(el)`. 它用于方法链。

```
$(el).html($('<div></div>').append('<span></span>').append('<span></span>'));​ 
```

或者

```
$('<div></div>').append('<span></span>').append('<span></span>').appendTo(el); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T12:30:49.057

为什么不简单地这样做呢？

```
$(el).html('<div><span></span><span></span></div>') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T12:36:44.587

这将替换`$(el)`您询问的内容：

```
$(el).html('<span />').append('<span />').wrapInner('<div />');​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T12:33:37.330

用这个

```
var div = $('<div></div>').append('<span></span>').append('<span></span>');

$(el).parent().html(div);​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-23T12:28:39.000

`$(el).html($('<div />').append('<span></span>').append('<span></span>'))`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-23T12:27:13.003

尝试这个

```
var div= $('<div></div>')
var mm= $('<span>b</span>')
var combnd= div.append(mm)
var fresult=combnd.append(mm)
fresult.appendTo(el)​ 
```

# java - WSDL 服务的身份验证

> ID：12091539
> 
> 赞同：0
> 
> 时间：2012-08-23T12:24:28.930
> 
> 标签：java, soap, wsdl

我有一个 SOAP 网络服务

```
@WebService(serviceName = "VenueList") 
```

以及该服务上获取列表的方法

`@WebMethod(operationName = "getvenuelist")`

如果有人向该服务发出 POST 请求：“http://192.168.29.20/SIP/VenueList?tester”，它将返回数据。我使用 Glassfish 3.1 作为服务器和 Java。

1.  为 SOAP 服务提供身份验证的最佳方式是什么（当前案例）？
2.  为什么说 SOAP 比 REST 更安全？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:10:44.123

将标头（用户名和密码）设置到服务中，并从服务器评估这些标头值将使事情正常进行。

链接在这里

[http://www.java.net/external?url=http://www.mkyong.com/webservices/jax-ws/application-authentication-with-jax-ws/](http://www.java.net/external?url=http://www.mkyong.com/webservices/jax-ws/application-authentication-with-jax-ws/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:30:21.967

`WS-Security`您可以为此目的尝试规范。大多数库和框架都支持它（但实现通常在较小的特定细节上取决于供应商）。

# css - 在html5中使用css居中页脚内容

> ID：12091540
> 
> 赞同：3
> 
> 时间：2012-08-23T12:24:32.417
> 
> 标签：css, html

我正在将一个网站重写为 HTML5，并且在将页脚内容居中时遇到了一些问题。

我的页脚 HTML 非常简单

```
<footer> Copyright </footer> 
```

而CSS是

```
footer {
    margin: auto;
    height: 330px;
    background-color: #1e2127;
    color: #ffffff;
} 
```

但内容不以页面的其余部分为中心。

我错过了什么？

**编辑：**
我不想将页脚内的文本居中，只有页脚本身（因此它将与页面的其余部分对齐），但我希望背景填充整个页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T12:28:27.127

您没有为页脚指定宽度，这意味着它将默认为 100%，文本左对齐。添加 text-align: center 以使文本居中，或添加宽度以使整个页脚居中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T12:26:49.003

希望这是你想要的[演示](http://jsfiddle.net/uttara/E25JV/)

```
footer {
    margin: auto;
    height: 330px;
    background-color: #1e2127;
    color: #ffffff;
    text-align:center; //to align the text in center
}​ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-23T12:26:56.550

我假设您希望页脚水平居中，在这种情况下`margin: auto;`需要指定的*宽度*自动居中：

```
footer {
  margin: auto;
  width: 960px;
  /* other styles */
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T12:27:10.087

您缺少`text-align:center`使内容中心对齐。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-23T12:27:19.600

像这样设置：

```
<footer><span>Copyright<span></footer> 
```

和CSS：

```
footer {
    margin: auto;
    height: 330px;
    width: 100%;
    background-color: #1e2127;
    color: #ffffff;
}

footer span {
    display:block;
    width: 50%;
    margin: 0 auto;
    text-align: center;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-23T12:27:33.013

```
footer {
    margin: 0 auto;
    height: 330px;
    background-color: #1e2127;
    color: #ffffff;
} 
```

如果父容器有一些宽度，margin: 0 auto 将起作用，否则您可以尝试放置`text-align:center;`

# javascript - 剪切/粘贴/移动后如何在 contentEditable DIV 中保留与 XML 关联的数据

> ID：12091542
> 
> 赞同：3
> 
> 时间：2012-08-23T12:24:34.983
> 
> 标签：javascript, xml, html, contenteditable

我想要一个包含用户输入 XML 的 contentEditable div。我将如何在每个节点上存储一组隐藏数据，即使在剪切/粘贴（即移动）之后也会持续存在？

我尝试在 XML 中嵌套一个隐藏元素，假设在剪切/粘贴期间该元素会被浏览器移动，但它会被删除。

可以选择为每个节点生成索引/哈希作为属性并将其与内存中的对象相关联，但出于可用性原因，我想避免这种情况。

这样做的目的是精简 XML 以使其更具可读性，而不是拥有大量属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T11:15:03.713

显然我没有做足够的测试。只要您为元素提供至少一个属性，并且您*不*使用`display:none`. 我现在可以空了`<span>`在每个节点内有一个空元素，该元素可以在属性中存储散列，用于将节点与内存中的对象相关联。

添加到该元素的数据`$('span').data()`在剪切和粘贴后没有保留，但这是意料之中的，因为此时浏览器显然会创建一个新元素。

但是，我遇到了另一个问题。在节点中使用退格/删除有时会删除元素，这并不理想。我通过将元素绝对定位在页面外来解决了这个问题。它现在实际上表现得相当直观。如果您删除了包装它的 XML，该元素将被删除，否则它仍然存在。

请注意，我只在 Chrome (21) 中对此进行了测试，所以我不知道这是否适用于其他浏览器。如果有人可以分享更优雅的解决方案，请这样做。

# objective-c - 更新 NSCursor

> ID：12091547
> 
> 赞同：0
> 
> 时间：2012-08-23T12:25:05.437
> 
> 标签：objective-c, macos, resize, cursor, size

如何在需要时更新 NSCursor？我实现了`resetCursorRects`方法。在`resetCursorRects`我创建具有所需大小的图像（大小取决于我的应用程序中的滑块值）并使用该图像制作光标。因此，如果我的滑块（女巫声明所需的光标大小）正在更改，我需要更新我的光标。因此，如果从逻辑上思考，呼叫`[self resetCursorRects]`应该有效，但事实并非如此。更改滑块值并调整窗口大小后，光标会更新。但是为什么当我尝试调用它时它没有更新？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-11T20:36:19.527

如果您只想要一个更简单的解决方案，仅使用系统游标，您可以这样做：

在视图头文件中声明：

```
NSCursor *currentCursor; 
```

实现这个方法：

```
- (void)resetCursorRects
{
    NSSize clientSize = self.frame.size;
    NSRect clientArea = {0, 0, clientSize.width, clientSize.height};
    [self addCursorRect:clientArea cursor:currentCursor];
} 
```

只需执行此操作即可更改光标：

```
currentCursor = [NSCursor arrowCursor];
[self discardCursorRects];
[currentCursor set]; 
```

或者使用任何其他系统定义的游标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T18:30:26.167

为此，您应该实施

```
@property (nonatomic, retain) NSArray *cursors; 
```

在您的 .h 文件中，例如：

```
- (void)loadCursors
{
    NSCursor *defaultCursor = [[NSCursor alloc] initWithImage:[NSImage imageNamed:DEFAULT_CURSOR] hotSpot:NSMakePoint(2, 0)];
    NSAssert(defaultCursor, @"defaultCursor failed to load");
    NSCursor *clickedCursor = [[NSCursor alloc] initWithImage:[NSImage imageNamed:CLICKED_CURSOR] hotSpot:NSMakePoint(2, 0)];
    NSAssert(clickedCursor, @"clickedCursor failed to load");
    NSCursor *draggingCursor = [[NSCursor alloc] initWithImage:[NSImage imageNamed:DRAGGING_CURSOR] hotSpot:NSMakePoint(17, 2)];
    NSAssert(draggingCursor, @"draggingCursor failed to load");

    self.cursors = [NSArray arrayWithObjects:defaultCursor, clickedCursor, draggingCursor, nil];

    [defaultCursor release];
    [clickedCursor release];
    [draggingCursor release];

    [self resetCursorRects];
}

- (void)setCursor:(NSUInteger)cursorIndex
{
    [self discardCursorRects];

    [self addCursorRect:self.bounds cursor:[self.cursors objectAtIndex:cursorIndex]];
    [(NSCursor *)([self.cursors objectAtIndex:cursorIndex]) set];
}

- (void)resetCursorRects
{
    [self setCursor:CursorTypeDefault];
} 
```

并在以下情况下使用这些方法：

```
- (void)mouseDown:(NSEvent *)theEvent
{    
    [self setCursor:CursorTypeClicked];
} 
```

或任何你想要的地方。

不要忘记使用游标实现 Enum 并在 init 方法中加载游标！

希望这可以帮助。

# javascript - 如何使用 java 脚本或 jquery 发送跨域 SOAP 请求？

> ID：12091551
> 
> 赞同：0
> 
> 时间：2012-08-23T12:25:11.613
> 
> 标签：javascript, jquery, soap

> **可能重复：**
> [是否可以使用 jquery 获取跨域 SOAP 请求](https://stackoverflow.com/questions/12090036/is-it-possible-to-get-cross-domain-soap-request-using-jquery)

请帮助我获取来自不同域的 SOAP 响应并将其解析以在我的网页上显示信息。我无权访问其他域。我想使用 javascript 或 jquery 来做到这一点。如果不可能，有什么办法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:28:06.493

除非其他域通过 JSONP 或 HTML5 CORS 公开其 API，否则不可能将您自己的服务器设置为代理然后调用您的服务器（请记住，其他人理论上也可以访问您的代理，除非它受到访问保护）。

# voicexml - 如何从语音 xml 播放 dtmf

> ID：12091552
> 
> 赞同：2
> 
> 时间：2012-08-23T12:25:14.157
> 
> 标签：voicexml

我有调用桥的应用程序。连接呼叫时，我希望我的语音 xml 输入分机号码播放 dtmf 音 3 次。如果可能的话，请问如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T12:34:05.427

接听电话时，您可以将 dtmf 作为录制的音频播放。一些录音软件，例如[Adob​​e Audition](http://www.adobe.com/products/audition.html)，会为您创建 dtmf 录音，而无需通过电话录音。这提供了更清晰的 dtmf 录音。Voxeo 有一些免费的[dtmf 录音，您可以在这里下载](https://evolution.voxeo.com/library/audio/prompts/dtmf/index.jsp)。

# excel - Microsoft Excel 2010 Autoshape“调整”属性 (msoShapeTrapezoid)

> ID：12091557
> 
> 赞同：1
> 
> 时间：2012-08-23T12:25:31.020
> 
> 标签：excel, excel-2010, vba

是否有任何地方可用的参考资料详细说明每个“ ”对**Excel 2010**中可用`adjustment property`的各种**Autoshape 对象**的作用？

 **我的具体问题是我以编程方式将 msoShapeTrapezoid 自动形状插入到工作表中：

```
.AddShape(msoShapeTrapezoid, Left, Top, Width, Height) 
```

...它定义了梯形的矩形范围。然后我尝试使用：

```
shpTrapezoid.Adjustments(1) = ValueX 
```

设置梯形顶部的大小（我猜这相当于手动调整 autoshape 上的单个手柄），但我无法弄清楚这个调整属性代表什么（尽管我已经弄清楚`0`了梯形一个矩形）。

因此，鉴于我知道梯形底部的大小、梯形顶部的大小和要绘制的梯形高度（并且它是对称的），**ValueX 必须是什么才能正确定义它屏幕？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-24T11:38:51.303

首先，对不起我的英语不好......

我在几个小时内一直在努力解决这个问题，我发现 msoShapeTrapezoid 的调整是一个系数，如果宽度小于高度或表单的高度，则必须乘以表单的宽度如果高度小于宽度。

这也解释了为什么这个调整可以大于 0.5（如果窗体的高度小于它的宽度，调整可以大于 0.5：最大值是宽度除以高度，但在其他情况下最大值是 0.5 ）。

所以如果你想画一个梯形，调整必须这样计算：梯形的顶部减去底部，结果除以2，如果高度小于梯形的高度，则新结果除以梯形的高度。宽度或在另一种情况下按其宽度。

这也适用于 msoShapeParallelogramm；调整必须乘以 Min(Width;Height)。

这些自选图形中有很多小错误...（例如，msoShapeRegularPentagone 不是正五边形...但是底数是通过将表格的宽度乘以黄金比例减去 1 和“高程”来计算的位于表格左右两侧的点数也等于 GoldenRation 减 1 乘以表格的宽度：结果接近正五边形，但不是）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-25T14:13:39.837

我知道这是一个旧线程，但它与我当前的项目相关，我想我会提出我找到的解决方案 - 对于我的项目，我想定义宽度、高度和 TopWidth。这样，传递给调整属性的值是：

```
shpTrapezoid.Adjustments(1) = (Width - TopWidth)/(2 * Height) 
```

无论哪个更大（高度或宽度），这都应该有效，因为您的 TopWidth 可能总是正数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-31T16:03:54.930

缺乏关于这个主题的自选图形特定文档令人失望，对吧？更令人沮丧的是：自选图形的各种值`.Adjustments`不会出现在“局部变量”窗口中；我们能看到的唯一有用的信息是`.Count`.

这导致我编写了以下实用程序子程序，每当我研究另一个自选图形时，我都会不断添加这些子程序。

```
'Usage: select AutoShape in question then run this...
Sub AutoShapeAdjustments()
    Dim ii As Integer
    Dim SHP As Shape
    Set SHP = Selection.ShapeRange(1)

    With SHP
        For ii = 1 To .Adjustments.Count
            Debug.Print "Adj# " & ii & " ="; .Adjustments(ii)
        Next ii

        Stop 'to review IW contents & update/add to `Select Case` block

        Select Case .AutoShapeType

        Case msoShapeArc
            .Adjustments(1) = 135 'tail angle; CW from 0 = east
            .Adjustments(2) = 45 'arrow angle
        Case msoShapeCircularArrow
            .Adjustments(1) = 0.1 'arrow throat thickness (1 & 3 share a handle)
            .Adjustments(2) = 15 'arrow head length
            .Adjustments(3) = 45 'revolution angle, arrow; CW from 0 = east
            .Adjustments(4) = 135 'revolution angle, tail
            .Adjustments(5) = 0.1 'arrow head width excl. throat
        Case msoShapeDownArrow, msoShapeUpArrow, msoShapeRightArrow, msoShapeLeftArrow
            .Adjustments(1) = 0.5 'arrow throat thickness
            .Adjustments(2) = 0.5 'arrow head length

        End Select
    End With

    If MsgBox("Clear Immediate Window?", vbYesNo + vbDefaultButton2) = vbYes Then
        Application.SendKeys "^g ^a {BACKSPACE}"
    Else
        Debug.Print "--------------------"
    End If

End Sub 
```

我运行它几次以弄清楚并记下每个人的`.Adjustment`作用。然后，一旦我微调了一组值，我就会将它们粘贴到我正在处理的代码中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-13T11:52:09.183

以防将来可能对任何人有所帮助，这是我添加梯形的方法

```
Function AddTrapezoid(wks As Worksheet, sglCentre As Single, sglTop As Single, _
        sglWidthTop As Single, sglWidthBottom As Single, sglHeight As Single) As Shape
    Set AddTrapezoid = wks.Shapes.AddShape(msoShapeTrapezoid, sglCentre - sglWidthBottom / 2, _
            sglTop, sglWidthBottom, sglHeight)
    AddTrapezoid.Adjustments.Item(1) = (sglWidthBottom - sglWidthTop) / 2# / _
            IIf(sglHeight < sglWidthBottom, sglHeight, sglWidthBottom)
End Function 
```

无论高度还是宽度最大，这都有效，与@sherco40 提供的答案相匹配**

# php - 如何制作PHP商店信息直到购买完成？

> ID：12091560
> 
> 赞同：0
> 
> 时间：2012-08-23T12:25:35.790
> 
> 标签：php

我正在尝试制作一个用于自定义 YouTube 背景的表单。

无论如何。我用 HTML 对此进行了编码，当您点击提交时，它会将信息发送到 PHP 文件，该文件处理信息并将其作为电子邮件发送。

这很好用，但我需要进行设置，以便在他们购买之前它不会向我发送电子邮件。

我希望它如何工作是这样的。

他们填写表格并单击提交，然后他们被重定向到我在 PayPal 上的项目的 URL。（如果这不起作用，PHP 网站上有一个“立即购买”按钮）无论哪种方式。他们最终在 PayPal 上购买了该商品。一旦他们购买了它，我将收到一封电子邮件，其中包含他们在表格上要求的详细信息。如果他们取消它，我将不会收到电子邮件并将其免费提供给他们。

我想知道 PayPal 提供的在他们完成购买后显示网站的选项是否会有所帮助。它可能链接到另一个 PHP 文件吗？例如，如果第一个 PHP 文件存储信息，而 PayPal 重定向到的第二个 PHP 文件会告诉它释放数据？我不知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:53:07.743

PayPal 有一个称为即时付款通知的回调功能。他们也有很好的使用这个特性的例子。基本上你不会在 sendYT.php 中拥有电子邮件功能，而是将它们放在 PayPal 调用的 php 文件中。以下是有关它的更多信息：[https ://www.paypal.com/ipn](https://www.paypal.com/ipn)

如果您要使用 PayPal 做任何数量的工作，我也建议您加入 PayPal 开发者网络，因为它可能非常复杂

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T15:27:23.210

好的。我想到了。我需要做的就是制作一个 PayPal Buy Now 按钮并从中获取一些代码。然后，您只需将所有已经拥有的表单标签放在它下面。

# android - Mozilla Fennec Android 未在设备上部署

> ID：12091562
> 
> 赞同：0
> 
> 时间：2012-08-23T12:25:36.997
> 
> 标签：android, mozilla, fennec

我目前正在从事 Mozilla Fennec 项目。

访问：[https ://wiki.mozilla.org/Mobile/Fennec/Android](https://wiki.mozilla.org/Mobile/Fennec/Android)

我已经一一完成了所有步骤，但是当我在设备上构建和部署它时，它并没有在设备上部署，尽管在我尝试过的所有时间里构建都是成功的。

访问：[https ://wiki.mozilla.org/Mobile/Fennec/Android#Build](https://wiki.mozilla.org/Mobile/Fennec/Android#Build)

请帮我解决这个问题，控制台上没有错误。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:31:58.510

您是否已经在设备中安装了相同的应用程序？如果是，请先尝试卸载它，然后重试。可能是签名证书不匹配的问题。

# android - 是否可以在网络应用程序中缓存受密码保护的内容以供离线网络应用程序（iOS / Android）使用？

> ID：12091567
> 
> 赞同：1
> 
> 时间：2012-08-23T12:25:44.950
> 
> 标签：android, ios, html, web-applications, mobile

基本上这里是这样的场景：

*   我有一个移动网络应用程序
*   该网络应用程序几乎没有公开可用的内容，但有一个登录系统
*   登录后，用户可以根据自己的喜好访问特定页面

**我想做的事：**

允许 Web 应用程序的离线缓存并根据登录的用户继续提供自定义内容（是的，显然数据将被缓存，并且用户之前需要至少登录一次）。

**问题：**

****已编辑***

基本上，我希望能够在在线、离线登录后访问相同的数据，但是当离线访问 Web 应用程序时，将没有密码保护。我希望/假设通过使用清单文件，我可以让移动浏览器缓存我作为登录用户看到的数据，然后在离线时不需要密码重新向我显示？

提前感谢您的帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:34:54.013

这是不可能的。缓存只能存储 webapp 的客户端部分，但登录机制和验证在服务器端代码中。客户端永远不会记住以前输入的值。

如果您想在离线代码中使用移动设备上的服务，则必须编写一个存储凭据和数据的移动应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-10T16:32:33.917

我只是在写一个答案，因为我发现这是可能的。

本质上，解决方案是不在站点的登录页面（或主页）上包含清单文件。一旦登录（我们称之为登录页面），就会提供一个清单文件，然后允许缓存“受保护”页面。

当用户离线时，webapp 检查它是否在线（客户端），如果它离线，它将绕过登录屏幕并提供缓存内容重定向到网站登录页面（如上所述）。

此外，我提到根据偏好向用户显示特定内容——这是通过使用动态清单文件实现的——因此不同用户的浏览器被告知缓存不同的页面:) 设置起来很痛苦，但似乎现在可以正常工作一段时间了。

由于数据被缓存，它不一定是 100% 安全的，但如上所述，如果用户之前登录过特定设备，那么他们可以离线查看内容而无需再次登录 - 这种安全级别足以满足我的需要。

# html - 在单元格中拉伸嵌套表

> ID：12091570
> 
> 赞同：0
> 
> 时间：2012-08-23T12:26:02.343
> 
> 标签：html, css, html-table

以下是Chrome上[http://jsfiddle.net/mark69_fnd/LftRY/的快照：](http://jsfiddle.net/mark69_fnd/LftRY/)

![在此处输入图像描述](../Images/c407c14fb10a458f50e59cd24804d3b3.png)

请注意，用于地址的内表未正确拉伸 - 它们的右侧短一到两个像素。尽管在 css 中为表格元素提供了 100% 的宽度并且没有填充/边距。

如何使这些表格占据封闭单元格的完整空间？

**编辑**

所有浏览器都表现出某种问题。我的代码在 Chrome、IE9、Firefox 中都没有显示正确的拉伸。

**编辑2**

Firefox - 同样的问题，但在左侧：

![在此处输入图像描述](../Images/4a52599f9084c11b939eeb65ae06d317.png)

IE9 - 同样的问题，但在“Bill To”的右侧和“Ship To”的左侧：

![在此处输入图像描述](../Images/830c9c0d2b928fc351dc6453fb6c1bf3.png)

**编辑3**

我使用了表格，因为我无法让它工作`<div>`并且所有元素都正确对齐和拉伸。如果有人发布解决了所有描述的问题并且行为与基于表格的解决方案相同的回复 - 我将很乐意相信并采用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:50:14.193

我不太喜欢使用表格，尽管在这种情况下，表格是迄今为止最好的解决方案。毕竟，您要显示的是表格数据。

话虽如此，我认为您不应该在这里使用嵌套表，这只会使事情复杂化。只要在哪里继续使用 colspan，您就可以轻松获得相同的结果。它还将消除您现在遇到的边界问题。看看这个：http: [//jsfiddle.net/LftRY/21/](http://jsfiddle.net/LftRY/21/)

`input`请注意，对css也进行了一些更改。我删除了所有边框、填充和边距，因此我可以将它们设置为 100% 宽度，以强制它们采用与父级相同的宽度。我还删除了`<br>`html 中的标签，并将输入设置为显示为块元素。除非绝对需要，否则我不太喜欢使用`<br>`（这种情况很少见）。

我还添加了一个类，`.no-lines`您可以在要显示无边框的单元格或行上使用它。如您所见，我在页眉中两个地址之间的“间隙”以及作为示例添加的页脚上使用了它们。如果需要，您甚至可以在整行上使用它。

此外，我冒昧地将`thead`,`tbody`和`tfoot`标签添加到表格 html 中。这将改善使用屏幕阅读器的人的访问，对 SEO 更好，并且在语义上更正确 imo。

希望这是你之后的地方。如果没有，请随时询问！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:50:51.657

> 如何使这些表格占据封闭单元格的完整空间？

你已经做了。但是，您在脑海中构成的“封闭单元的完整空间”在技术上在您抱怨的浏览器中是错误的。

它是 100% 宽度，完全填满。正如@bažmegakapa 上面评论的那样，您应该重新考虑如何绘制边界，例如，您可能只想不折叠它们，更喜欢内部高于外部边界（或相反但比现在更严格）以更轻松地跨浏览器设置边界。

或者，深入研究细节并学习——即使通过反复试验——如何根据您的需要折叠边界。

[http://jsfiddle.net/LftRY/3/](http://jsfiddle.net/LftRY/3/)

![在此处输入图像描述](../Images/d51f0ac507946cd250cfd44c6dc7f585.png)

# java - JPA，REST，解组元素列表

> ID：12091573
> 
> 赞同：1
> 
> 时间：2012-08-23T12:26:10.723
> 
> 标签：java, rest, jaxb, jax-rs

我的 REST 服务中有一个 GET 函数，它以 XML 格式返回对象列表。

```
@GET
@Path("all")
@Produces({"application/xml", "application/json"})
public List<Customer> findAll() {
    return getJpaController().findCustomerEntities();
} 
```

如何将 XML 列表解组为对象列表？我想将所有这些客户从数据库存储到客户对象的一些列表或向量中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:33:53.657

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Response 
{
   @XmlElement
   private List<Customer> customers = new ArrayList<Customer>();

   public Response(List<Customer> customers)
   {
      this.customers = customers;
   } 

   public getCustomers()
   {
      return customers;
   }
} 
```

解组

```
javax.xml.bind.JAXB.unmarshal(source, Response.class); 
```

`source`任何输入流（文件、流） 在哪里

```
@GET
@Path("all")
@Produces({"application/xml", "application/json"})
public Response findAll() {
    return new Response(getJpaController().findCustomerEntities());
} 
```

# java - 使用 XStream 创建不同对象的列表

> ID：12091574
> 
> 赞同：1
> 
> 时间：2012-08-23T12:26:12.913
> 
> 标签：java, xml, tree, xstream, xml-deserialization

我正在用 Java 创建一个包含对象树结构的程序。所有涉及的类都实现相同的接口，并且每个类都包含一个子列表：

```
public class MyClass1 implements MyInterface {    
    List<MyInterface> children;
}

public class MyClass2 implements MyInterface {    
    List<MyInterface> children;
}

public class MyClass3 implements MyInterface {    
    List<MyInterface> children;
}

.... 
```

现在这三个结构在 XML 文件中定义：

```
<myclass1>
    <myclass2></myclass2>
    <myclass1>
        <myclass3></myclass3>
    </myclass1>
</myclass1> 
```

树结构可以是任何类型，由用户定义。当然，每个类都包含我现在省略的特定于类的变量。

现在我正在尝试使用 XStream 将 XML 文件反序列化为 Java 对象，最好使用注释，但我不知道该怎么做。我不想最终为每个可能的类列出一个列表，例如在 MyClass1 中：

```
@XStreamImplicit(itemFieldName="myclass2")
List<MyClass2> children2;
@XStreamImplicit(itemFieldName="myclass3")
List<MyClass3> children3;
@XStreamImplicit(itemFieldName="myclass4")
List<MyClass4> children4; 
```

关于如何使用 XStream 解决这种情况的任何建议？还是我应该使用其他技术？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:57:42.573

**source.xml**（包含我们要加载的 XML）：

```
<myclass1>
    <myclass2></myclass2>
    <myclass1>
        <myclass3></myclass3>
    </myclass1>
</myclass1> 
```

**接口**：

```
import java.util.List;

public interface Myinterface {
    List<? extends Myinterface> getChildren();
} 
```

**抽象 bean 类**（用 声明孩子`@XStreamImplicit`）：

```
import java.util.ArrayList;
import java.util.List;

import com.thoughtworks.xstream.annotations.XStreamImplicit;

public class MyAbstract implements Myinterface {
    @XStreamImplicit
    private List<? extends Myinterface> children = new ArrayList<Myinterface>();

    public List<? extends Myinterface> getChildren() {
        return children;
    }
} 
```

**Bean 类**（扩展 MyAbstract，`@XStreamAlias`用于使用您需要的 XML 字符串）：

```
import com.thoughtworks.xstream.annotations.XStreamAlias;

@XStreamAlias(value="myclass1")
public class Myclass1 extends MyAbstract {

}

@XStreamAlias(value="myclass2")
public class Myclass2 extends MyAbstract {

}

@XStreamAlias(value="myclass3")
public class Myclass3 extends MyAbstract {

} 
```

**主类**（读取您的 XML 源文件。不要忘记`processAnnotations`从带注释的类加载配置）：

```
import com.thoughtworks.xstream.XStream;

public class XStreamTest {
    public static void main(String[] args) {
        XStream xStream = new XStream();
        xStream.processAnnotations(Myclass1.class);
        xStream.processAnnotations(Myclass2.class);
        xStream.processAnnotations(Myclass3.class);

        Object fromXML = xStream.fromXML(XStreamTest.class.getResourceAsStream("source.xml"));
        System.out.println(fromXML);
    }
} 
```

# jquery - jQuery 自定义内容滚动条滚动

> ID：12091577
> 
> 赞同：0
> 
> 时间：2012-08-23T12:26:21.627
> 
> 标签：jquery, jquery-plugins

我已经很好地完成了滚动条`jQuery custom content scroller`，但是有一些问题。正是我用 div 标签完成了这个滚动条，我在其中从 mysql 检索数据（一些帖子），所以我的问题是我正在使用 ajax 将数据发送到数据库并且它也可以工作，但是当附加数据时在 div 标签上，滚动条的大小是固定的，它不会更新（仅在页面刷新时更新）。如何在使用 ajax 添加数据时更新滚动条大小？而且我不明白如何在最后修复滚动条？请帮助我对这个问题很困惑，谢谢:)

PS。这里也是插件主页[http://manos.malihu.gr/jquery-custom-content-scroller](http://manos.malihu.gr/jquery-custom-content-scroller)

**更新**

```
$.ajax({
                url:  "ajax/posting.php",
                type: "POST",
                data: {send_post: "Send", user_id: "<?php echo $userArr[0]; ?>", user_name: "<?php echo $userArr[2] . " " . $userArr[3]; ?>", msg: $("#post").val()},
                complete: function(){
                    $("#post").val("");
                },
                success: function(result){
                    $.ajax({
                        url:  "ajax/posting.php",
                        type: "POST",
                        data: {renew_posts: "Yes",admin: "<?php echo $userArr[1]; ?>",owner: "<?php echo $userArr[0]; ?>"},
                        success: function(renewed_data){
                            $("#chat_tb").html(renewed_data);
                            (function($){$(window).load(function(){$(".post_container").mCustomScrollbar({
                                scrollButtons:{enable:true,scrollSpeed: 40}
                            });});})(jQuery);
                        }
                    });
                }
            }); 
```

在此代码中，只有在将数据发送到数据库后，如何在回调中更新 mCustomScrollbar() 函数才值得注意

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:28:34.733

看看[流体滚动条演示](http://manos.malihu.gr/tuts/custom-scrollbar-plugin/fluid_scrollbar_example.html)。

**编辑**

如果这不起作用，请尝试`.mCustomScrollbar()`在您的 ajax 请求之后重新初始化 -functon。

**编辑 2**

试一试：

```
$.ajax({
    url: "ajax/posting.php",
    type: "POST",
    data: {
        send_post: "Send",
        user_id: "<?php echo $userArr[0]; ?>",
        user_name: "<?php echo $userArr[2] . "" . $userArr[3]; ?>",
        msg: $("#post").val()
    },
    complete: function() {
        $("#post").val("");
    },
    success: function(result) {
        $.ajax({
            url: "ajax/posting.php",
            type: "POST",
            data: {
                renew_posts: "Yes",
                admin: "<?php echo $userArr[1]; ?>",
                owner: "<?php echo $userArr[0]; ?>"
            },
            success: function(renewed_data) {
                $("#chat_tb").html(renewed_data);
                $(".post_container").mCustomScrollbar({
                    scrollButtons: {
                        enable: true,
                        scrollSpeed: 40
                    }
                });
            }
        });
    }
});​ 
```

# jasper-reports - 如何根据登录用户进行查询

> ID：12091582
> 
> 赞同：1
> 
> 时间：2012-08-23T12:26:46.637
> 
> 标签：jasper-reports, jasperserver

我是*JasperReports Server*的新手。

我的数据库中有不同的活动。以及分配给这些活动的用户。

我希望我的*JR 服务器*用户提供活动 ID 来运行报告。为此，我创建了一个查询和一个输入控件，以在列表中显示活动列表以获取用户的输入。

我创建的查询显示了数据库中的所有活动。

我只想显示分配了登录用户的那些活动。

有没有办法在*JasperReports Server*中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:16:30.783

它应该像这样工作：

```
SELECT campaign_name
FROM some_table
INNER JOIN some_other_table sot ON ( ... )
WHERE sot.username = $P{LoggedInUsername} 
```

在文档中，您将找到更全面的解释和可用参数列表。

# objective-c - 使用 NSObjects 作为 NSDictionary 的键？

> ID：12091590
> 
> 赞同：0
> 
> 时间：2012-08-23T12:26:59.580
> 
> 标签：objective-c, nsdictionary

我有这个扩展 NSObject 的 BasicNode 接口。

在某些时候，我需要使用它的一个实例作为字典的键：

```
BasicNode *node = [BasicNode node];
[aMutableDictionary setObject:@"hello" forKey:node] 
```

这会使程序“signal SIGABRT”崩溃。在 Java 中，hashmap 会调用对象的默认 hash 方法来获取它的键。是否有一种机制可以在 objC 中实现以允许将对象用作 NS(Mutbale)Dictionary 的键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:31:24.860

是的，您可以使用 NSObject 继承作为 Key，但它必须实现

```
 + (id)copyWithZone:(NSZone *)zone 
```

方法，这是作为密钥使用的要求。要实现它，您自己的类是这样的：

```
 - (id)copyWithZone:(NSZone *)zone {
      MyObject *objectCopy = [[MyObject allocWithZone:zone] init];
      // Copy over all instance variables from self to objectCopy.
      // Use deep copies for all strong pointers, shallow copies for weak.
      return objectCopy;
 } 
```

这是来自[这篇](http://bynomial.com/blog/?p=73)博文！

祝你好运！

# javascript - 如何复制数组行为？

> ID：12091595
> 
> 赞同：8
> 
> 时间：2012-08-23T12:27:13.280
> 
> 标签：javascript, arrays, object

我知道 JavaScript 中的数组只不过是一个对象。当我定义这样的数组时：

```
var array;
array = [ "a", "b", "c" ]; 
```

并运行

```
Object.keys(array); 
```

我得到以下数组：`["0", "1", "2"]`. 的数组长度`array`为`3`。

当我添加如下属性时：

```
array["a"] = "d"; 
```

`Object.keys()`正在返回`["0", "1", "2", "a"]`，但数组长度`array`仍然是`3`。

但是当我添加这样的属性时：

```
array["3"] = "d"; 
```

的长度`array`是现在`4`。

**如果`array`只是另一个对象，当我从头开始我的对象时，如何实现这种行为`var myArray = {}`？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:00:52.047

该`.length`属性仅包括具有数字索引的属性，特别是具有大于或等于零的整数值的属性。

如果您询问如何从数组或对象中获取*所有*键的总数，那么您可以这样做：

```
Object.keys(array).length 
```

...因为`Object.keys()`返回一个本身将具有`.length`属性的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:05:00.297

数组的`length`属性是最高数字索引的值 + 1。

因此，`array["3"] = "d";`在最高数字索引之后`3`，长度返回`4`

`Object.keys(array).length`应该给你长度。

# sharepoint - SharePoint 2007，如果使用日期\小时，则将插入项目限制为列表（日历）

> ID：12091599
> 
> 赞同：2
> 
> 时间：2012-08-23T12:27:24.323
> 
> 标签：sharepoint, sharepoint-2007, moss

我正在尝试在 SharePoint 2007 中创建一个列表，在日历视图中允许人们请求约会。有没有一种方法可以让人们只有在有空的情况下才可以预约（之前没有人要求过）？

# hibernate - Spring & Hibernate @Valid 什么都不做

> ID：12091600
> 
> 赞同：0
> 
> 时间：2012-08-23T12:27:26.810
> 
> 标签：hibernate, spring-mvc, bean-validation, thymeleaf

我已经在我的模型中注释了我的字段，并在我的 post 控制器上使用了 @Valid 注释，但它似乎没有执行任何验证（result.errors 为空）

有什么想法可能导致这种情况吗？

基于Java的配置：

```
@FeatureConfiguration
public class MvcFeatures {

    @Feature
    public MvcAnnotationDriven annotationDriven() {
        return new MvcAnnotationDriven();
    }

    @Feature
    public MvcResources css() {
        return new MvcResources("/css/**", "/css/");
    }

    @Feature
    public MvcResources js() {
        return new MvcResources("/js/**", "/js/");
    }

    @Feature
    public MvcViewControllers viewController() {
        return new MvcViewControllers("/", "home");
    }

    @Feature
    public ComponentScanSpec componentScan() {
        return new ComponentScanSpec("com.webapp")
                .excludeFilters(new AnnotationTypeFilter(Configuration.class),
                        new AnnotationTypeFilter(FeatureConfiguration.class));
    }

} 
```

控制器：

```
@Controller
public class UserController extends AppController
{
    static Logger logger = LoggerFactory.getLogger(UserController.class);

    @Autowired
    private IUserService userService;

    @RequestMapping(value = "/registration", method = RequestMethod.GET)
    public ModelAndView get()
    {

        ModelAndView modelAndView = new ModelAndView(Consts.MODEL_RESISTER_PAGE);
        modelAndView.addObject("user", new User());

        return modelAndView;
    }

    @RequestMapping(value = "/registration", method = RequestMethod.POST)
    public ModelAndView post(@Valid User user, BindingResult result)
    {

        if (result.hasErrors())
        {
            ModelAndView modelAndView = new ModelAndView(
                    Consts.MODEL_RESISTER_PAGE);
            modelAndView.addObject("user", result.getModel());
            return modelAndView;
        }
        else
        {
            // SAVE HERE
            ModelAndView modelAndView = new ModelAndView(
                    Consts.MODEL_RESISTER_PAGE);
            return modelAndView;
        }
    }
} 
```

模型：

```
@Entity
public class User implements Serializable
{
    /**
     * 
     */
    private static final long serialVersionUID = -5232533507244034448L;

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    @NotEmpty
    @Size(min=2, max=15)
    private String firstname;

    @NotEmpty
    @Size(min=2, max=15)
    private String surname;

    @NotEmpty
    @Email
    private String email;

    @NotEmpty
    @Size(min=6, max=10)
    private String password;

    public Long getId()
    {
        return id;
    }

    public void setId(Long id)
    {
        this.id = id;
    }

    public String getFirstname()
    {
        return firstname;
    }

    public void setFirstname(String firstname)
    {
        this.firstname = firstname;
    }

    public String getSurname()
    {
        return surname;
    }

    public void setSurname(String surname)
    {
        this.surname = surname;
    }

    public String getEmail()
    {
        return email;
    }

    public void setEmail(String email)
    {
        this.email = email;
    }

    public String getPassword()
    {
        return password;
    }

    public void setPassword(String password)
    {
        this.password = password;
    }
} 
```

add.html（使用 thymeleaf 视图解析器）

```
<form id="registrationForm" action="#"
        th:action="@{/registration}" th:object="${user}" method="post"
        class="clearfix">

         <legend>Registration</legend>

        <div class="input">
          <input type="text" th:field="*{firstname}"
            placeholder="Firstname" th:class="${#fields.hasErrors('firstname')}? 'fieldError'"
             />
        </div>

        <div class="input">
          <input type="text" th:field="*{surname}" placeholder="Surname" />
        </div>

        <div class="input">
          <input type="text" th:field="*{email}" placeholder="Email" />
        </div>

        <div class="input">
          <input type="password" th:field="*{password}"
            placeholder="Password" />
        </div>

        <div class="clearfix">
          <input type="submit" class="btn btn-success btn-large" value="Register" />
        </div>

      </form> 
```

绒球：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>ConsumerApplicaton</groupId>
    <artifactId>ConsumerApplicaton</artifactId>
    <version>0.0.1-SNAPSHOT</version>

    <repositories>
        <repository>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
            <id>springsource-milestone</id>
            <name>Spring Framework Milestone Repository</name>
            <url>http://maven.springframework.org/milestone</url>
        </repository>
    </repositories>

    <dependencies>
        <!-- spring -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${spring.version}</version>
            <exclusions>
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-oxm</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <!-- thymeleaf -->
        <dependency>
            <groupId>org.thymeleaf</groupId>
            <artifactId>thymeleaf</artifactId>
            <version>${thymeleaf.version}</version>
        </dependency>
        <dependency>
            <groupId>org.thymeleaf</groupId>
            <artifactId>thymeleaf-spring3</artifactId>
            <version>${thymeleaf.version}</version>
        </dependency>

        <!-- persistence -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>3.1.0.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>3.6.9.Final</version>
            <scope>runtime</scope>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>4.2.0.Final</version>
        </dependency>

        <!-- json, xml, atom -->
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-mapper-asl</artifactId>
            <version>${jackson-mapper-asl.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>javax.xml.bind</groupId>
            <artifactId>jaxb-api</artifactId>
            <version>${jaxb-api.version}</version>
            <scope>runtime</scope>
        </dependency>

        <!-- DB -->
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.18</version>
            <scope>runtime</scope>
        </dependency>

        <!-- logging -->

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${org.slf4j.version}</version>
        </dependency>
        <dependency>
            <groupId>ch.qos.logback</groupId>
            <artifactId>logback-classic</artifactId>
            <version>1.0.1</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>${org.slf4j.version}</version>
            <scope>runtime</scope>
        </dependency>

        <!-- Various -->
        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib-nodep</artifactId>
            <version>${cglib.version}</version>
            <scope>runtime</scope>
        </dependency>
    </dependencies>

    <build>
        <finalName>ConsumerApplicaton</finalName>

        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <encoding>UTF-8</encoding>
                </configuration>
            </plugin>
        </plugins>
    </build>

    <properties>
        <!-- VERSIONS -->
        <!-- <spring.version>3.1.0.RELEASE</spring.version> -->
        <spring.version>3.1.0.M1</spring.version>
        <cglib.version>2.2.2</cglib.version>

        <thymeleaf.version>2.0.11</thymeleaf.version>

        <jackson-mapper-asl.version>1.9.5</jackson-mapper-asl.version>
        <jaxb-api.version>2.2.6</jaxb-api.version>

        <!-- VERSIONS - persistence -->
        <mysql-connector-java.version>5.1.18</mysql-connector-java.version> <!-- latest version on: 02.10.2011 - http://dev.mysql.com/downloads/connector/j/ -->
        <hibernate.version>4.1.0.Final</hibernate.version>

        <!-- VERSIONS - logging -->
        <org.slf4j.version>1.6.4</org.slf4j.version>
    </properties>

</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T16:55:58.403

`@Feature`不再支持。这是在 Spring 3.1.0.M1 中实现的，然后在 3.1.0.M2 中删除以支持`@Enable`样式注释。

这里最好的方法是移到 3.1.1.RELEASE 并使用`@Configuration`和朋友。

# mysql - Mysql 工作台内存不足错误代码 23 & 24

> ID：12091601
> 
> 赞同：0
> 
> 时间：2012-08-23T12:27:30.347
> 
> 标签：mysql, memory, out-of-memory

我有一个长度为 2.81 亿的转储文件，但只有大约 1900 行。

当我尝试导入此 sql 文件时，出现内存错误。导入时，我看到仍有未使用的内存。我在网上搜索但找不到解决方案。这是我的错误信息：

```
ERROR 23 (HY000) at line 143: Out of resources when opening file '.\mydb\mytable#P#mycolumn#SP#refereesp70.MYD' (Errcode: 24) 
```

**Mysql是我升级的旧版本现在问题已经解决了谢谢大家...**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:35:11.097

更改/升级 mysql 的系统限制。

编辑 /etc/security/limits.conf 文件 -- 在下面添加行，如果 mysql 从 mysql 用户启动 mysql soft nofile 2048 mysql hard nofile 2058

# android - 如何在按钮周围实现圆形进度指示器？

> ID：12091603
> 
> 赞同：5
> 
> 时间：2012-08-23T12:27:36.087
> 
> 标签：android, android-layout, android-progressbar

我尝试了很多方法来实现下面的例子，但我不能让它普遍工作。

我已经完成了以下屏幕的构建。我已经向右对齐并垂直居中。并给予一定的余量。

![在此处输入图像描述](../Images/4f75ed59631dc11d4290d6040d460f88.png)

我的问题是我必须为此添加`onpressed`状态，并且我需要添加一个循环进度，如下图所示。

![在此处输入图像描述](../Images/fefa006e2e1983a3d14df601c1064fa6.png)

我不知道如何在那个特定的地方实施这种循环进展。我尝试从左中心垂直实现进度并给出一些边距并修复它。但是当我将它安装在大屏幕上时，对齐会出错。所以我尝试从右中心垂直实现它，并为那个圆圈留出余量。但即使这样也没有用。

请有人帮助我，如何解决这个问题:(

我被这个震惊了一个多星期:(

**编辑：** XML 代码：

```
<ProgressBar
        android:id="@+id/ProgressBar01"
        android:layout_width="60dp"
        android:layout_height="60dp"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:background="@drawable/circular_progress"
        android:layout_marginRight="185dp"
        android:progress="50" />

    <ImageButton
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:background="@null"
        android:src="@drawable/tap_to_capture" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:text="@string/tap_to_cap"
        android:textSize="12sp"
        android:textColor="#006666"
        android:layout_marginRight="25dp"
        android:textAppearance="?android:attr/textAppearanceSmall" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T14:33:57.250

我已经使用了一个示例 XML 布局来获得您正在寻找的类似效果。看看这个截图和代码。

![布局截图](../Images/eb31a14d04a9737c98815072eaf317f2.png)

下面粘贴实现布局的XML。显然，您可以随意设置它的样式。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <RelativeLayout
        android:id="@+id/RelativeLayoutLeftButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <ProgressBar
            android:id="@+id/progressBar1"
            style="?android:attr/progressBarStyleLarge"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true" />

        <ImageButton
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:background="@android:color/transparent"
            android:src="@drawable/ic_play" />
    </RelativeLayout>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_toRightOf="@+id/RelativeLayoutLeftButton"
        android:text="Click Here"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#006666"
        android:textSize="12sp" />

</RelativeLayout> 
```

# c# - 使用c#使文本框在.net windows应用程序中接受其他语言

> ID：12091606
> 
> 赞同：0
> 
> 时间：2012-08-23T12:27:42.093
> 
> 标签：c#, .net, windows

我已经开始开发泰米尔语和英语的双语 Windows 应用程序。问题是我想在文本框中输入泰米尔语，我什至将文本框的字体更改为泰米尔语，但它只显示空框。我只想知道使文本框接受泰米尔语字体的方法。如何为 .net windows 应用程序执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:43:21.837

您可以尝试更改应用程序中使用的运行时文化：

```
using System.Threading;
using System.Globalization;
// Sets the culture to Tamil (India)
Thread.CurrentThread.CurrentCulture = new CultureInfo("ta-IN");
// Sets the UI culture to Tamil (India)
Thread.CurrentThread.CurrentUICulture = new CultureInfo("ta-IN"); 
```

或（根据此[Microsoft 页面](http://msdn.microsoft.com/en-us/library/system.windows.forms.inputlanguage%28v=vs.100%29.aspx)）您可以设置

```
InputLanguage.CurrentInputLanguage 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-23T12:34:28.127

尝试使用 RichTextBox 控件

# android - 使用 NDK 编译会导致成功包含头文件的错误

> ID：12091607
> 
> 赞同：7
> 
> 时间：2012-08-23T12:27:42.983
> 
> 标签：android, android-ndk, java-native-interface

我的 app.cpp：

```
#include "app.h"

#include <EGL/egl.h>
#include <EGL/eglext.h>

void
Java_com_geek_hello_FilterStack_nativeEglSetFenceAndWait(JNIEnv* env, jobject thiz) {
  EGLDisplay display = eglGetCurrentDisplay();

  // Create a egl fence and wait for egl to return it.
  // Additional reference on egl fence sync can be found in:
  // http://www.khronos.org/registry/vg/extensions/KHR/EGL_KHR_fence_sync.txt
  EGLSyncKHR fence = eglCreateSyncKHR(display, EGL_SYNC_FENCE_KHR, NULL);
  if (fence == EGL_NO_SYNC_KHR) {
    return;
  }
  ... 
```

当我运行 ndk-build 时，它无法找到 egl.h 中存在的方法，并且没有创建 .so。这是日志：

```
app.cpp:31:72: error: 'eglCreateSyncKHR' was not declared in this scope 
```

其次是属于的所有KHR方法

这是Android.mk

```
LOCAL_PATH:= $(call my-dir)

include $(CLEAR_VARS)

#LOCAL_CFLAGS += -DEGL_EGLEXT_PROTOTYPES
LOCAL_CFLAGS = -Wno-psabi

LOCAL_SRC_FILES := app.cpp

#LOCAL_SHARED_LIBRARIES := libcutils libEGL

LOCAL_MODULE_TAGS := optional

LOCAL_MODULE := libapp
LOCAL_LDLIBS := -llog -landroid -lEGL -lGLESv2

include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T09:46:02.730

您需要添加：

```
#define EGL_EGLEXT_PROTOTYPES 
```

在您的`#include`台词之前（嗯，特别是在 include 之前`EGL/eglext.h`）。

此外（看起来您已经在这样做了），您需要至少针对 API 14 进行构建，因为这是在公共 API 中公开此功能的第一个 API 级别。

编辑：或者只是取消注释您的 Android.mk 中的行：

```
#LOCAL_CFLAGS += -DEGL_EGLEXT_PROTOTYPES 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T12:38:58.650

尝试按照以下所有步骤操作：

[http://en.wikibooks.org/wiki/OpenGL_Programming/Android_GLUT_Wrapper](http://en.wikibooks.org/wiki/OpenGL_Programming/Android_GLUT_Wrapper)

从您提供的日志中，构建找不到 EGL 库，所以我认为您需要该行

```
LOCAL_LDLIBS    := -llog -landroid -lEGL -lGLESv2 
```

在你的 Android.mk 中。并确保您的 Application.mk 包括：

```
APP_STL := gnustl_static
APP_PLATFORM := android-9 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T06:56:44.217

我认为您应该按照此步骤进行更多理解 [步骤](http://psrdotcom.blogspot.in/2011/12/android-ndk-jni-windows-xp7-with-3264.html)

在做bulid之前请先做酸

*   项目路径直到 jni 文件夹 > 和 ndk 路径直到 ndk-build ex D:\New_Wok_2\Firstndk\jni>c:\android-ndk-r8\ndk-build 并清理您的项目

# iphone - iPhone应用程序中的内存问题

> ID：12091608
> 
> 赞同：0
> 
> 时间：2012-08-23T12:27:47.287
> 
> 标签：iphone, objective-c, memory-leaks, dealloc

请帮忙，我真的在努力解决内存泄漏问题。这是我的代码

```
+ (void) getInitialDataToDisplay:(NSString *)dbPath {

    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    [appDelegate.itemArray removeAllObjects];  //0.8%
    if (sqlite3_open([dbPath UTF8String], &dataBase) == SQLITE_OK) //18.9%
    {
        NSString *sqlStr = @"select * from ItemTable order by Status_id asc, ReleaseDate desc";
        const char *sql = [sqlStr UTF8String];
        sqlite3_stmt *selectstmt;
        if(sqlite3_prepare_v2(dataBase, sql, -1, &selectstmt, NULL) == SQLITE_OK) { //25%
            while(sqlite3_step(selectstmt) == SQLITE_ROW) { //46.3
                NSInteger primaryKey = sqlite3_column_int(selectstmt, 0);
                DataBaseClass *itemObj = [[DataBaseClass alloc] initWithPrimaryKey:primaryKey];  // 2.6%

                itemObj.itemID = sqlite3_column_int(selectstmt, 0);
                itemObj.itemName = ((char *)sqlite3_column_text(selectstmt,1)) ? [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 1)] : nil;
                itemObj.availableIcon = ((char *)sqlite3_column_text(selectstmt,2)) ? [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 2)] : nil;
                itemObj.notAvialableIcon = ((char *)sqlite3_column_text(selectstmt,3)) ? [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt,3)] : nil;
                itemObj.itemReleaseDate = ((char *)sqlite3_column_text(selectstmt, 4)) ? [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 4)] : nil;
                itemObj.itemStatus = ((char *)sqlite3_column_text(selectstmt,5)) ? [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 5)] : nil;
                itemObj.itemModDate = ((char *)sqlite3_column_text(selectstmt,6)) ? [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 6)] : nil;
                itemObj.status_id = sqlite3_column_int(selectstmt, 7);
                itemObj.availableLocalIconPath = ((char *)sqlite3_column_text(selectstmt,8)) ? [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 8)] : nil;
                itemObj.notAvialableLocalIconPath = ((char *)sqlite3_column_text(selectstmt,9)) ? [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 9)] : nil;

                [appDelegate.itemArray addObject:itemObj];
            }
        }
        sqlite3_finalize(selectstmt);
    }
    else
        sqlite3_close(dataBase); //Even though the open call failed, close the database connection to release all the memory.
} 
```

我在这段代码的某些行中遇到了内存泄漏。不知道如何解决这个问题。我在我的应用程序中使用 ARC。我在启用僵尸模式的 XCode 中使用 Instruments 工具跟踪了这一点。而且我还提到了某些行中发生泄漏的百分比。请检查代码并提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T16:33:38.187

如果成功，将调用 sqlite3_finalize，但您永远不会关闭数据库。由于您也使用此方法打开它，因此您也应该在此处关闭它。删除最后一个'else'，看看会发生什么。

# jquery - jQuery。我的 ajax 注册表单有错误消息；.JSON.parse：意外字符错误

> ID：12091614
> 
> 赞同：0
> 
> 时间：2012-08-23T12:28:15.203
> 
> 标签：jquery

我是 jquery 的新手，但仍然对其概念感到困惑。

我有一个用于注册新成员的 php MySQL 脚本。我刚刚介绍了一个 AJAX 脚本，它可以让我上传完成的表单而无需重新加载页面。

我在下面附上了我的代码。问题是我不断收到这条消息：

```
**> There was an SyntaxError: JSON.parse: unexpected character error due
> to a parsererror condition.** 
```

有人可以告诉我这是什么意思吗，我查看了我的代码，但似乎找不到任何问题。

```
 $('form #response').hide();

$('#submit').click(function(e) {

    // prevent forms default action until
    // error check has been performed
    e.preventDefault();

    // grab form field values
    var valid = '';
    var required = ' is required.';
    var name = $('form #name').val();
    var email = $('form #email').val();
    var cat = $('form #cat option:selected').val();
    var location = $('form #country_loc option:selected').val();
    var honeypot = $('form #honeypot').val();
    var humancheck = $('form #humancheck').val();

    // perform error checking
    if (name = '' || name.length <= 2   ||  name == 'name*'   ) {
        valid = '<p>Your name' + required +'</p>';  
    }

    if (!email.match(/^([a-z0-9._-]+@[a-z0-9._-]+\.[a-z]{2,4}$)/i)) {
        valid += '<p>Your email' + required   +'</p>';                                                
    }

    if (cat = '' || cat.length < 1) {
        valid += '<p>Please tell us whether you are;  seeking work or  looking for a careworker' + required + '</p>';   
    }

if (location = '' || location.length < 1) {
        valid += '<p>Please tell us your current location' + required + '</p>'; 
    }

    if (honeypot != 'http://') {
        valid += '<p>Spambots are not allowed.</p>';    
    }

    if (humancheck != '') {
        valid += '<p>A human user' + required + '</p>'; 
    }

    // let the user know if there are erros with the form
    if (valid != '') {

        $('form #response').removeClass().addClass('error')
            .html('<strong>Please correct the errors below.</strong>' +valid).fadeIn('fast')            

        .html('<strong>the category is '+ cat     +  '.</strong>' +valid).fadeIn('fast');

    }
    // let the user know something is happening behind the scenes
    // serialize the form data and send to our ajax function
    else {

        $('form #response').removeClass().addClass('processing').html('Processing...').fadeIn('fast');                                      

        var formData = $('form').serialize();
        submitForm(formData);           
    }           

});

//END THE FUNCTION FOR THE SUBMISSION OF REGISTATION FORM TO THE DATABASE VIA AJAX 

// make our ajax request to the server
function submitForm(formData) {

    $.ajax({    
        type: 'POST',

        url: 'cms/index.php?view=joint_reg',        
        data: formData,
        dataType: 'json',
        cache: false,
        timeout: 7000,
        success: function(data) {           

            $('form #response').removeClass().addClass((data.error === true) ? 'error' : 'success')
                        .html(data.msg).fadeIn('fast'); 

            if ($('form #response').hasClass('success')) {

                setTimeout("$('form #response').fadeOut('fast')", 5000);
            }

        },
        error: function(XMLHttpRequest, textStatus, errorThrown) {

            $('form #response').removeClass().addClass('error')
                        .html('<p>There was an<strong> ' + errorThrown +
                              '</strong> error due to a<strong> ' + textStatus +
                              '</strong> condition.</p>').fadeIn('fast');           
        },              
        complete: function(XMLHttpRequest, status) {            

            $('form')[0].reset();
        }
    }); 
}; 
```

谢谢大家的帮助。我喜欢 jquery，真的很想学习。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:39:58.113

$('form').serialize() 返回一个字符串（例如：formData 是“name=abc&email=abc@bla.com...”）

数据选项必须是对象，所以它会抛出异常

你可以试试

```
$.ajax({    

     url: 'cms/index.php?view=joint_reg&' + formData,      

}); 
```

希望它有帮助:)

对不起，我的英语不好

# jsf - JSF Liferay 异常

> ID：12091617
> 
> 赞同：-1
> 
> 时间：2012-08-23T12:28:26.280
> 
> 标签：jsf, liferay, liferay-6

我尝试在 6.1.1 上使用来自 liferay 6.0.6 的 portlet 并获取跟踪堆栈跟踪：

```
java.lang.NullPointerException
at com.icesoft.faces.component.menubar.MenuItemRenderer.makeTopLevelAnchor(MenuItemRenderer.java:350)
at com.icesoft.faces.component.menubar.MenuItemRenderer.renderAnchor(MenuItemRenderer.java:705)

org.portletfaces.bridge.BridgeException: javax.faces.FacesException
at org.portletfaces.bridge.BridgeImpl.doFacesRequest(BridgeImpl.java:449)
Caused by: javax.faces.FacesException
    at com.sun.faces.context.ExceptionHandlerImpl.handle(ExceptionHandlerImpl.java:142)
Caused by: java.lang.NullPointerException
    at com.icesoft.faces.component.menubar.MenuItemRenderer.makeTopLevelAnchor(MenuItemRenderer.java:350)
    at com.icesoft.faces.component.menubar.MenuItemRenderer.renderAnchor(MenuItemRenderer.java:705) 
```

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T19:53:22.477

Liferay 刚刚发布了[Liferay Faces 3.1.0](http://www.liferay.com/community/liferay-projects/liferay-faces/overview)，它旨在与 Liferay 6.1.x 一起使用。建议您从 PortletFaces Bridge 升级到[Liferay Faces Bridge](http://www.liferay.com/community/liferay-projects/liferay-faces/bridge)：

# python - python：如何找到不是子字符串而是子图片？

> ID：12091620
> 
> 赞同：1
> 
> 时间：2012-08-23T12:28:31.003
> 
> 标签：python, image, image-processing, imagemagick

如何找到不是子字符串而是子图片？我需要在大图像上找到小图像的位置。任何想法如何做到这一点？

我的意思是：如何比 gtk.gdk.Pixbuf 中的像素的简单循环更快地完成它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:40:17.833

您正在寻找的是[模板匹配](http://en.wikipedia.org/wiki/Template_matching)算法。我简要地研究了图像处理，我学会这样做的唯一方法是使用[广义霍夫变换](http://en.wikipedia.org/wiki/Hough_transform)，它可以用来检测你想要的任何形状。可能还有其他方法，但是这种方法肯定比遍历所有像素要快得多，也更健壮得多。

显然，Python 的[PIL](http://www.pythonware.com/products/pil/)包实现了霍夫变换。示例代码在[这里](http://rosettacode.org/wiki/Hough_transform#Python)。我从未使用过 PIL，但这些链接可能足以让您入门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T23:06:29.023

由于您开始描述与子字符串相关的问题，因此我假设您的子图片存在于更大的图片中（就像子字符串问题中的情况一样）。要执行此任务，您需要在子图片和较大的图片之间进行关联。更具体地说，您需要它们之间的归一化互相关，并且由此产生的全局峰值表示最佳匹配。

这是一个示例图像，从中获取的一些子图片以及生成的相关图像。

![在此处输入图像描述](../Images/b0ff01daf102f3dce511ec7a46aa811b.png) ![在此处输入图像描述](../Images/e7338d91a69ec1c9f064831055bb5c84.png) ![在此处输入图像描述](../Images/82ce911079962d9485407b69776a6638.png)

这是结果相关性中的全局最大值（单个点）：

![在此处输入图像描述](../Images/f3b356ac7d650fa712e0fda48a881837.png)

这是原始图像上方的子图，以全局最大值为中心。

![在此处输入图像描述](../Images/a1459fc47c5234f8a14f595ba0989aaf.png)

在 Matlab 中，这需要一行：

```
h = normxcorr2(g, f); % g is a subpicture from f. 
```

# linux - linux cron作业没有运行

> ID：12091628
> 
> 赞同：1
> 
> 时间：2012-08-23T12:28:53.113
> 
> 标签：linux, cron, ubuntu-server

我有一个 Ubuntu 服务器 10。

在根 cron 中，我有一个脚本可以每天在同一时间运行。

手动运行脚本运行良好，但在 cron 中它不运行。

在系统日志中，我得到了这个：

```
Aug 23 09:22:01 database CRON[6884]: (root) CMD (./bkp.sh >> /tmp/bkp.log)
Aug 23 09:22:01 database CRON[6883]: (CRON) error (grandchild #6884 failed with exit status 2) 
```

* * *

我找到了问题的可能根源，我在脚本中添加了一些日志（回声）......

**在脚本执行期间，它退出“函数”定义......**

看来我无权访问命令“功能”

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:55:29.480

这是我在谷歌搜索“cron 环境变量”时得到的[链接。](http://linuxshellaccount.blogspot.ro/2007/10/crontab-and-your-environment.html)它可能会有所帮助。喜欢的人还有很多：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:27:17.640

将您的脚本放在以下目录中，然后它应该每天运行。

```
/etc/cron.daily/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T12:43:43.257

由 启动的 Shell 脚本`cron`必须仔细指定它们运行的​​环境。在其中运行的 Shell`cron`将是非交互式的，这意味着它们不会读取通常设置的`/etc/profile`位置。`$PATH`这意味着您需要指定脚本中调用的所有可执行文件的路径。

如果您运行大量 cron 脚本，可能值得花时间编写一个小的 shell 脚本，该脚本将定义和导出要在脚本中使用的环境变量，以`$PATH`.

# asp.net - 需要有关绑定问题的帮助

> ID：12091629
> 
> 赞同：0
> 
> 时间：2012-08-23T12:28:58.570
> 
> 标签：asp.net, data-binding, gridview, asprepeater

我在页面中有一个转发器控件，在转发器控件中有一个 gridview。我想绑定gridview。但我不能。当我运行它时，我的页面是空的。并且 viewsource 也是空的。这是我的代码：

```
<asp:Repeater ID="DataRepeater" runat="server" 
        onitemdatabound="DataRepeater_ItemDataBound">
        <ItemTemplate>
            <asp:GridView ID="DataGridView" runat="server" AutoGenerateColumns="false">
                <Columns>
                    <asp:TemplateField>
                        <ItemTemplate>
                            <%#Eval("FirstName") %>
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:TextBox ID="FirstNameTextbox" runat="server"></asp:TextBox>
                        </EditItemTemplate>
                    </asp:TemplateField>
                </Columns>
            </asp:GridView>
        </ItemTemplate>
    </asp:Repeater>

protected void DataRepeater_ItemDataBound(object sender, RepeaterItemEventArgs e)
    {
        DataCodeClass dc = new DataCodeClass();
        if (e.Item.ItemType == ListItemType.Item)
        {
            GridView gvID = e.Item.FindControl("DataGridView") as GridView;
            dc.GetData(gvID);
            gvID.DataBind();
        }
    }
public void GetData(GridView gv)
    {
        var get_data = from a in dataContext.GetTable<PersonalDetailTable>() select a;
        gv.DataSource = get_data;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:50:41.087

使用`Literal`控件显示 FirstName，如下所示：

```
<asp:TemplateField>
    <ItemTemplate>
        <asp:Literal ID="FirstNameLiteral" runat="server" Text='<%# Eval("FirstName") %>'></asp:Literal>
    </ItemTemplate>
    ....
</asp:TemplateField> 
```

# ios - Chartboost 未在 iPad 中显示添加

> ID：12091631
> 
> 赞同：0
> 
> 时间：2012-08-23T12:29:00.340
> 
> 标签：ios

我第一次使用图表提升。我将代码包含在我的 App 中。然后我在chart boost上注册了我的应用程序并得到了一个`appId`和`appSignature`. 我在注册时没有提供`iTunesId`, `iTunesURL`, `View Callbacl URL`, `Click CallbackURL`, `InstallCallBackURL`。我开始了出版和广告活动。我将我的设备添加到这些广告系列中。广告系列显示为活跃。但是我收到一条消息`failure to load Interstitial Adds`，带有我自己的`appId`和`appSignature`. 但是，如果我 在 chartboost 提供的示例代码（此处为[https://github.com/ChartBoost/client-examples](https://github.com/ChartBoost/client-examples)）中使用`appId`和使用，我会看到添加内容。我错过了什么吗？谢谢`appSignature`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T20:24:01.590

似乎我只需要等待更长的时间才能获得大约一个多小时的添加，并且添加开始自行出现。Imp 步骤是开始发布活动。

# c# - 当maxreceivedmessagesize错误时WCF获取数据

> ID：12091632
> 
> 赞同：0
> 
> 时间：2012-08-23T12:29:08.767
> 
> 标签：c#, wcf, maxreceivedmessagesize

我的应用程序中有一个 maxreceivedmessagesize 错误。

发生此错误时，我会向用户显示一条消息，并且我想显示在超过最大大小之前已加载的数据。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:04:20.097

我可以在这里看到 2 个选项：

*   重写整个soap框架以传回部分数据（不推荐）
*   增加数据大小，以便soap 框架将消息传回。然后检查大小并显示适当的消息。

您可以在绑定上增加 web.config 中的大小。您应该将 maxBufferSize 和 maxReceivedMessageSize 设置为相同的值。

# html - django注册：如何验证用户？

> ID：12091634
> 
> 赞同：1
> 
> 时间：2012-08-23T12:29:34.880
> 
> 标签：html, django, templates, registration

我正在使用 Django 注册。我完成了所有步骤以将应用程序包含在我的项目中。

用户成功登录后，我想将他重定向到另一个页面。我做到了，但问题是我想检查用户是否在模板内经过身份验证。

因为任何用户都可以访问此页面，直接在 Web 浏览器上键入它。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T12:35:59.510

你可以[看看文档](https://docs.djangoproject.com/en/dev/topics/auth/)

```
{% if user.is_authenticated %}
    <p>Welcome, {{ user.username }}. Thanks for logging in.</p>
{% else %}
    <p>Welcome, new user. Please log in.</p>
{% endif %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T12:34:59.027

在视图中：

```
if request.user.is_authenticated():
    # User is logged in 
```

在模板内：

```
{% if request.user.is_authenticated %}
    Only rendered for users that are logged in.
{% endif %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T13:14:21.950

为了防止未经身份验证的用户看到该页面，您可以在视图 ( [doc](https://docs.djangoproject.com/en/dev/topics/auth/#the-login-required-decorator)`@login_required` ) 中添加一个装饰器：

```
from django.contrib.auth.decorators import login_required

@login_required
def my_view(request):
    ... 
```

因此，如果用户没有登录，装饰器会将他重定向到 settings.LOGIN_URL

# regex - SQL 迷失在 INSERT 语句的转义字符中

> ID：12091639
> 
> 赞同：0
> 
> 时间：2012-08-23T12:29:48.107
> 
> 标签：regex, sql-server-2005, escaping, quoting

*   我正在使用 Microsoft SQL **2005**。
*   “某人”给了我一个`INSERT`“预定义语句”列表，我**不能在 SQL 之外修改**（例如，使用 Python 等脚本语言）。
*   作为“某人”，我在尝试为type 字段**转义引用字符**`NVARCHAR`时遇到问题。

比如说我需要运行以下 SQL 语句：

```
INSERT INTO TableX VALUES('John Doe's value') -- This is not working because of single quotes... 
```

我需要找到一种方法来将该字符串转换为 insert ( `John Doe's value`)，而无需使用 SQL 语句之外的方法。

我没有成功地尝试过类似以下语句，将一个单引号与一个`REPLACE`函数和另一个单引号连接起来：

```
INSERT INTO TableX VALUES('' + REPLACE('John Doe's value'), ''', '''' + '') 
```

或者

```
INSERT INTO TableX VALUES('''''' + REPLACE(''''''John Doe's value'''''''), '''''', '''''''' + '''''') 
```

为了处理转义字符，但它不起作用。

我更喜欢使用函数或类似的简单东西，而不是使用存储过程或更复杂的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:33:57.940

如果您在 SQL Server 中接受，我强烈建议您停止接受 INSERT 语句并提供具有明确定义的参数和数据类型的存储过程。否则，您将容易受到注入攻击（我同意您的 API 的内部客户端不会这样做，但您的 API 将易受攻击，仅此而已！）。

顺便说一句，函数和存储过程在这种情况下所涉及的复杂性方面都是相似的。

# antlr - ANTLR3，上下文相关的重写规则

> ID：12091642
> 
> 赞同：1
> 
> 时间：2012-08-23T12:29:58.363
> 
> 标签：antlr, antlr3

我已经编写了一个 ANTLR 语法，现在正在从中构建一个 AST。手头的问题是，应该根据上下文从规则生成不同的子树。谷歌给了我这个：

[http://www.antlr.org/wiki/display/~admin/2008/04/11/Rewrite+rules#Rewriterules-Grammaticalcontext](http://www.antlr.org/wiki/display/~admin/2008/04/11/Rewrite+rules#Rewriterules-Grammaticalcontext)

但是我无法从这些示例中获得正确的语法。所以问题是：在 ANTRL3.4 中使用上下文敏感重写的正确语法是什么（使用 C 目标，如果此信息有任何用处）？

一个最小的例子是在这里，我的一个非工作试验让它工作：

```
grammar foo;

tokens {
    A;
    B;
}

start
    :   a
    |   b
    ;

a
    :   foo
    ;

b   :   foo
    ;

foo
    :
    [... a foo]: 'x' -> ^(A 'x')
    [... b foo]: 'x' -> ^(B 'x')
    ; 
```

谢谢，约斯特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T17:41:57.640

从那个 wiki 条目中并不太清楚，但大多数语法都是无效的：它们是一些想法，其中一些进入了 ANTLR，但其中一些没有（`...`没有）。

*要确定调用*了哪个规则`foo`，您可以在重写规则中添加一个参数并检查该参数：*`foo`*

 *```
grammar T;

options {
  // tested with Java, not C, but C should also work "as is"
  //language=C; 
  output=AST;
}

tokens {
  A;
  B;
}

parse
 : (a | b)+ EOF!
 ;

a
 : 'a' foo[1] -> foo
 ;

b
 : 'b' foo[2] -> foo
 ;

foo[int param]
 : 'x' -> {param==1}? ^(A 'x')
       ->             ^(B 'x')
 ;

SPACE : ' ' {$channel=HIDDEN;}; 
```

解析输入`"a x b x"`将产生以下 AST：

![在此处输入图像描述](../Images/32f156cf6205ddff84d706d4560e1f6f.png)*

# objective-c - rootObj replaceObjectAtIndex，我怎样才能得到 valueForKey？

> ID：12091643
> 
> 赞同：0
> 
> 时间：2012-08-23T12:29:57.783
> 
> 标签：objective-c, xcode

我正在尝试替换我的 NSDictionnary 中的一个值，但我无法到达我正在寻找的部分

我想用这种方法，或者那种...

我有一个 NSDictionnary，我想替换它：

> [[rootObj objectAtIndex:0] valueForKey:@"check"]

有这个方法：

> rootObj replaceObjectAtIndex:<#(NSUInteger)#> withObject:<#(id)#>

但我无法访问 valueForKey ......我怎样才能达到它？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:39:47.827

首先得到这样的所有键：

```
 NSArray *arrKeys = [yourDictionary allKeys]; 
```

现在像这样替换说你想替换第二个对象：

```
 if([arrKeys objectAtIndex:1]) //key for second Object
 {
   [yourDictionary setObject:yourNewValueHere forKey:[arrKeys objectAtIndex:1]]; //it overwrites value
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:41:01.067

使用此代码替换代码

**编辑：根据用户的匹配更新答案**

```
NSMutableDictionary *newDict = [[NSMutableDictionary alloc] init]; 
NSDictionary *oldDict = (NSDictionary *)[rootObj objectAtIndex:0]; 
[newDict addEntriesFromDictionary:oldDict];
[newDict setObject:@"1" forKey:@"check"];
[rootObj replaceObjectAtIndex:0 withObject:newDict]; 
```

在上面的示例中，我想替换 @"Sales Qty" 的对象，因此我创建了字典并在这些字典中设置了对象，然后只需设置 @"Sales Qty" 键的值并替换数组中的整个字典

如果您仍有问题，请告诉我

# javascript - 是否可以让我的粒子可点击？

> ID：12091644
> 
> 赞同：2
> 
> 时间：2012-08-23T12:30:03.300
> 
> 标签：javascript, canvas, particles

我有以下粒子脚本（从网上找到并编辑！）：http: [//jsfiddle.net/neuroflux/hSkFX/1/](http://jsfiddle.net/neuroflux/hSkFX/1/)

我想知道使每个粒子“可点击”的最简单方法是什么？

我知道这些不是元素，而是 x/y/radius 点。

你认为最简单的方法是什么？

干杯!

**[编辑]**这个问题是关于点击区域*而不是*点击事件....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T12:33:17.293

没有办法真正知道您单击了画布中的元素。您所知道的是用户在画布对象上单击的 x/y 位置。您可以采用该 x/y 位置并确定是否有东西。另一种选择是检查那里的像素颜色，看看它是否有颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T14:48:14.533

我发现本教程特别有用！ [http://simonsarris.com/blog/510-making-html5-canvas-useful](http://simonsarris.com/blog/510-making-html5-canvas-useful) 这是您需要的相关部分：

```
// Determine if a point is inside the shape's bounds
    Shape.prototype.contains = function(mx, my) {
// All we have to do is make sure the Mouse X,Y fall in the area between
// the shape's X and (X + Height) and its Y and (Y + Height)
    return  (this.x <= mx) && (this.x + this.w >= mx) &&
          (this.y <= my) && (this.y + this.h >= my);
    } 
```

您需要为您的 Circle() 对象实现 .contains 函数，但是您必须通过将光标位置与圆心的距离与圆半径进行比较来更改方法，如果更小则返回一个。

# visual-studio - 如何知道上次发布的时间和人员？

> ID：12091650
> 
> 赞同：2
> 
> 时间：2012-08-23T12:30:26.417
> 
> 标签：visual-studio, tfs, visual-studio-2012

例如，我们有 2 个团队共享一个演示服务器。他们每天发布几次。我如何知道上次发布的时间（日期和时间）以及由谁（会员姓名）发布？可能有一些 Visual Studio 选项或 TFS 设置来获取发布通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T09:23:19.037

您可以使用以下代码获取构建时间戳。

```
 /// <summary>
    /// Read the linker timestamp from an executable.
    /// </summary>
    private DateTime RetrieveLinkerTimestamp(String strFileName)
    {
        try
        {
            //Open file
            string filePath = strFileName;
            const int c_PeHeaderOffset = 60;
            const int c_LinkerTimestampOffset = 8;
            byte[] b = new byte[2048];
            System.IO.Stream s = null;

            try
            {
                s = new System.IO.FileStream(filePath, System.IO.FileMode.Open, System.IO.FileAccess.Read);
                s.Read(b, 0, 2048);
            }
            finally
            {
                if (s != null)
                {
                    s.Close();
                }
            }

            //Get timestamp
            int i = System.BitConverter.ToInt32(b, c_PeHeaderOffset);
            int secondsSince1970 = System.BitConverter.ToInt32(b, i + c_LinkerTimestampOffset);

            //Convert to date/time
            DateTime dt = new DateTime(1970, 1, 1, 0, 0, 0);
            dt = dt.AddSeconds(secondsSince1970);
            dt = dt.AddHours(TimeZone.CurrentTimeZone.GetUtcOffset(dt).Hours);
            return dt;
        }
        catch (Exception ex)
        {
            throw new Exception("Error in RetrieveLinkerTimestamp", ex);
        }
    } 
```

# sql - 匹配 SQL Server 列中的逗号分隔值

> ID：12091652
> 
> 赞同：2
> 
> 时间：2012-08-23T12:30:33.947
> 
> 标签：sql, sql-server

我想在 SQL Server 表格单元格中插入多封电子邮件，在插入它们之前，我需要检查这些值是否已经存在。

如需更多说明

```
Row_id        EMAIL_ID
  1           abc@xyz.com,abcabc@xyz.com, abc2@xyz.com
  2           pqr@xyz.com,pqrabc@xyz.com 
```

现在如果我插入`abcabc@xyz.com,free@xyz.com`，它将显示该值是重复的。

我做了这个

```
select EMAIL_ID
from TR_DEMO
INNER JOIN dbo.split('abcabc@xyz.com,free@xyz.com', ',') s
ON s.items IN (select items from dbo.split(EMAIL_ID, ',') ) 
```

功能

```
CREATE FUNCTION [dbo].[Split]
(
    @String varchar(8000), 
    @Delimiter char(1)
)       
returns @temptable TABLE (items varchar(8000))       
as       
begin       
    declare @idx int       
    declare @slice varchar(8000)       

    select @idx = 1       
        if len(@String)<1 or @String is null  return       

    while @idx!= 0       
    begin       
        set @idx = charindex(@Delimiter,@String)       
        if @idx!=0       
            set @slice = left(@String,@idx - 1)       
        else       
            set @slice = @String       

        if(len(@slice)>0)  
            insert into @temptable(Items) values(rtrim(ltrim(@slice)))       

        set @String = right(@String,len(@String) - @idx)       
        if len(@String) = 0 break       
    end   
return       
end 
```

它工作正常，但是在检查 100000 左右的记录时查询很慢

我们可以通过通配符或其他方式来做同样的事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T12:50:00.413

您可以使用一个技巧来与逗号分隔的列表进行比较。首先，您需要拆分输入列表。然后对于每个项目，您需要检查以下内容：

```
SELECT EMAIL_ID
  FROM TR_DEMO
 WHERE ','+EMAIL_ID+',' LIKE '%,abcabc@xyz.com,%' 
```

演示：[http ://www.sqlfiddle.com/#!3/6dd71/2](http://www.sqlfiddle.com/#!3/6dd71/2)

这是使用您的`SPLIT`方法生成项目的另一个示例：

```
 SELECT EMAIL_ID
      FROM TR_DEMO T
INNER JOIN dbo.split('abcabc@xyz.com,free@xyz.com', ',') s
               ON ','+T.EMAIL_ID+',' LIKE '%,'+s.items+',%' 
```

[http://www.sqlfiddle.com/#!3/a9a7b/1](http://www.sqlfiddle.com/#!3/a9a7b/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:58:05.510

好的，这个怎么样

```
declare @EmailsToInsert varchar(max) = 'abcabc@xyz.com,free@xyz.com'

declare @insertdata table (email varchar(max))
insert into @insertdata select items from dbo.split(@EmailsToInsert, ',')

-- remove any trailing spaces
update tr_demo
set email_id = replace(email_id, ' ', '')

update t
set email_id = t.email_id + ',' + i.email
from tr_demo t
inner join @insertdata i on ',' + t.email_id + ',' not like '%,' + i.email + ',%' 
```

*   拆分字符串以插入临时表（我在这里使用了表变量）。
*   删除 email_id 字段中的所有尾随空格
*   通过假设电子邮件用逗号包装来更新数据表和临时表的基础 - 请注意添加到 email_id 开头和结尾的逗号作为连接的一部分

这是一个使用表变量的工作示例

```
declare @data table (row_id int, email_id varchar(max))
insert into @data values 
(1, 'abc@xyz.com,abcabc@xyz.com, abc2@xyz.com'),
(2, 'pqr@xyz.com,pqrabc@xyz.com')

declare @EmailsToInsert varchar(max) = 'abcabc@xyz.com,free@xyz.com'

declare @insertdata table (email varchar(max))
insert into @insertdata select items from dbo.split(@EmailsToInsert, ',')

update @data
set email_value = replace(email_value, ' ', '')

update t
set email_value = t.email_value + ',' + i.email
from @data t
inner join @insertdata i on ',' + t.email_value + ',' not like '%,' + i.email + ',%' 

select * from @data 
```

# linq - 如何在 LINQ 中使用反射更新单个字段值

> ID：12091660
> 
> 赞同：0
> 
> 时间：2012-08-23T12:30:47.527
> 
> 标签：linq, dynamic, reflection, lambda, insert-update

我收到来自客户端回发的两个变量，它们匹配“字段名”和“值”。字段名可能是我在 db 表列中拥有的 50 个字段之一。

我将如何使用反射来识别哪个回发字段名与表中的字段匹配，然后使用 LINQ 更新传回的值更新该单个字段？

```
(string fieldid, string fieldvalue) 
```

***更新：*** 我查看了[动态选择和更新 LINQ 结果集中的列值](https://stackoverflow.com/questions/5993889/dynamically-select-and-update-a-column-value-in-linq-resultset)

而不是在页面上设置特定的文本框，我需要将反射变量字段的值写回数据库？这是我希望了解更多信息的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T22:06:05.220

如果在编译类型时您的源名称和目标名称都不知道，那么您可以使用反射来读取和设置值，例如类似

```
public void SetField<T1, T2>(T1 destination, string destinationFieldName, 
                             T2 source     , string sourceFieldName)
{  
    FieldInfo destFi    = typeof(T1).GetField(destinationFieldName);
    FieldInfo sourceFi  = typeof(T2).GetField(sourceFieldName);

    if (sourceFi != null && destFi != null)
        destFi.SetValue(destination, sourceFi.GetValue(source));
} 
```

然后，如果您尝试将名为 NewName 的字段从设置（这是一个名为 Settings 的类的实例）复制到类型为 Table1 的记录的列名，那么您可以执行以下操作：

```
SetField<Table1, Settings<(record , "Name" , settings , "NewName"); 
```

如果您使用的是属性而不是字段，那么您需要使用 PropertyInfo 而不是 FieldInfo

```
public void SetProperty<T1, T2>(T1 destination, string destinationFieldName, 
                                T2 source, string sourceFieldName)
{
    PropertyInfo destPi     = typeof(T1).GetProperty(destinationFieldName);
    PropertyInfo sourcePi  = typeof(T2).GetProperty(sourceFieldName);

    if (sourcePi != null && destPi != null)
        destPi.SetValue(destination, sourcePi.GetValue(source , null) , null);
} 
```

显然，使用这样的东西会影响性能。

# jquery-mobile - 如何在下拉列表中添加选项动态保持相同的样式（Jquery Mobile）

> ID：12091668
> 
> 赞同：1
> 
> 时间：2012-08-23T12:31:17.123
> 
> 标签：jquery-mobile

使用 Jquery 移动

我做了两个下拉，在第一个下拉的基础上，第二个下拉值是使用 Ajax 调用从数据库中获取的。

如果我动态添加值，下拉框将失去其 css 样式...

使用 Grid 2 列视图作为下拉菜单....

```
<div data-role="fieldcontain">
      <div class="ui-grid-a">
     <div class="ui-block-a-list">
            <label for="p1" style="width:100%" >Type1:</label>
         </div>
         <div class="ui-block-b-list">
            <select id="partner" name="partner" data-icon="arrow-d" data-native-menu="false">
                <option value="all">All</option>
                <option value="p1">1</option>
                <option value="p2">2</option>
            </select>
     </div>
  </div>
        <div class="ui-grid-a">
            <div class="ui-block-a-list">
                <label for="s2">Type 2:</label>
            </div>
            <div class="ui-block-b-list">
                <select id="specialist" name="specialist" data-icon="arrow-d" data-native-menu="false">
                    /* adding options dynamically using server side and ajax call */
                </select>
            </div>
    </div>
     </div> 
```

值在正确的位置，但无法像以前一样放置相同的 css 样式效果..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:14:43.033

如[jQuery Mobile Doc](http://jquerymobile.com/test/docs/lists/docs-lists.html)中所述：

> 如果将新列表项添加到列表中或从中删除，则分隔符不会自动更新：您应该在列表视图上调用 refresh() 来重绘自动分隔符。

所以尝试添加类似的东西：

```
 $('#mylist').listview('refresh'); 
```

填充列表后。

# php - Ajax 不需要的结果显示

> ID：12091675
> 
> 赞同：0
> 
> 时间：2012-08-23T12:31:45.750
> 
> 标签：php, jquery, ajax

这是来自注册表。此函数验证用户名是否可用。

jQuery：

```
 /* Verifies if the username is available */
    $.post('functions/usernameDisponibility.php',{usernamePHP:username},function(disponibility)
    {
            $('.usernameErrors').text(disponibility);

    if(disponibility==true)
    {
        $('#username').css('border-color','#00ff00');
    }else
        {
            $('#username').css('border-color','red');
            $('.usernameErrors').text('Username unavailable');
        }
    }); 
```

PHP：

```
 if(isset($_POST['usernamePHP'])&&!empty($_POST['usernamePHP']))
{
    $username = $_POST['usernamePHP'];

    $Connect = mysql_connect('localhost','root','');
                mysql_select_db('phplogin');

    $query= mysql_query("SELECT * FROM users WHERE username = '$username'");

    $result= mysql_num_rows($query);

    if($result==1)
    {
        echo false;
    }else
    {
        echo true;
    }
} 
```

问题出在错误显示中。当 disponibility != true 时，它​​显示“用户名不可用”，但当它为 true 时，它​​显示“1”。我的猜测是“1”来自 PHP 脚本，但即使我这样做：

```
 if(disponibility==true)
        {
            $('#username').css('border-color','#00ff00');
            $('.usernameErrors').text('');
        }else 
```

“1”仍然很快出现，然后才被文本（''）替换。根本不显示“1”怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:33:57.403

正因为如此：

```
$('.usernameErrors').text(disponibility); 
```

在进行任何检查之前，您正在输出“disponibility”变量的内容。删除该行

# hashmap - md5 是查找重复文件的好功能吗？

> ID：12091678
> 
> 赞同：1
> 
> 时间：2012-08-23T12:31:54.690
> 
> 标签：hashmap, md5, hashset

我需要检查一张图片是否已经包含在一大组图片中（超过 200 万张图片）。因此，我使用 md5 作为散列函数实现了一个持久散列列表。后来，我读到 md5 有一些问题，并且开发了更好的功能。你认为我的目的有更好的功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:39:32.313

不要将 MD5 用于安全性很重要的任何事情。MD5[坏](http://packetstormsecurity.org/files/41548/md5coll.c.html)了[。](http://www.win.tue.nl/hashclash/rogue-ca/)

对于简单的重复检测，您应该没问题。（您的场景中没有攻击者）

如果您的代码有可能在需要安全的环境中使用，请使用安全的替代方案。**[SHA-265](http://en.wikipedia.org/wiki/SHA-2)**是一个很好的候选者。[Git 使用](http://git-scm.com/book/en/Git-Internals-Git-Objects) [SHA-1](http://en.wikipedia.org/wiki/SHA-1)，但你不应该[将它用于新应用程序](http://csrc.nist.gov/groups/ST/toolkit/documents/shs/hash_standards_comments.pdf)

一个快速的非加密散列函数是[MurmurHash](http://en.wikipedia.org/wiki/MurmurHash)。如果您需要最高性能，请使用此选项。

# android - Android GCM 注册 id

> ID：12091680
> 
> 赞同：0
> 
> 时间：2012-08-23T12:32:03.900
> 
> 标签：android

GCM 中的注册 id 是什么，如何获取推送通知的注册 id？你能解释一下吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:31:17.040

在代码中-

```
GCMRegistrar.checkManifest(this);
GCMRegistrar.checkDevice(this);
GCMRegistrar.register(this, SENDER_ID);//this line just initiates the process of registration and the onRegistered() of GCMBaseIntentService will be called when regId is assigned
String regId = GCMRegistrar.getRegistrationId(this); 
```

在清单中-

```
<receiver
    android:name="com.google.android.gcm.GCMBroadcastReceiver"
    android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <category android:name="package name" />
        </intent-filter>
</receiver> 
```

在应用程序标签中添加上述内容。

也添加一些权限-

```
<permission
android:name="com.vaayoo.android.pushnotify.shail.permission.C2D_MESSAGE"
android:protectionLevel="signature" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="com.vaayoo.android.pushnotify.shail.permission.C2D_MESSAGE"/>
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" /> 
```

此代码适用于我。

# c# - 为什么拖放效果为 DragDropEffects.Link 时不触发 DragLeave？

> ID：12091682
> 
> 赞同：0
> 
> 时间：2012-08-23T12:32:03.677
> 
> 标签：c#, winforms, listview, drag-and-drop

我正在尝试制作一个允许将文件拖放到`ListView`. 我`ListView.InsertionMark`用来确定在哪里插入文件。当我删除文件时，`InsertionMark`它不会消失，因为`DragLeave`事件没有被触发；如果我将拖放效果更改为`DragDropEffects.None`，则`DragLeave`释放鼠标时会触发该事件。为什么会这样？

此外，该文档说“如果键盘或鼠标按钮状态发生变化，`QueryContinueDrag`则引发事件并`Action`根据事件的`QueryContinueDragEventArgs`。” 但是该`QueryContinueDrag`事件也没有被触发。

```
public partial class MainForm : Form
{
    private ListView listView1 = new ListView();

    public MainForm()
    {
        InitializeComponent();

        this.Controls.Add(listView1);

        listView1.Dock = DockStyle.Fill;
        listView1.View = View.Details;
        listView1.Columns.Add("Test");
        listView1.Items.Add("0");
        listView1.AllowDrop = true;

        listView1.DragEnter += listView1_DragEnter;
        listView1.DragOver += listView1_DragOver;
        listView1.DragLeave += listView1_DragLeave;
        listView1.DragDrop += listView1_DragDrop;
        listView1.GiveFeedback += listView1_GiveFeedback;
        listView1.QueryContinueDrag += listView1_QueryContinueDrag;
    }

    private void listView1_DragEnter(object sender, DragEventArgs e)
    {
        if (e.Data.GetDataPresent(DataFormats.FileDrop))
        {
            e.Effect = DragDropEffects.Link | DragDropEffects.Scroll;
        }
        else
        {
            e.Effect = DragDropEffects.None;
        }
    }

    private void listView1_DragOver(object sender, DragEventArgs e)
    {
        // This is not done, only to show this problem.
        listView1.InsertionMark.Index = 0;
        listView1.InsertionMark.AppearsAfterItem = true;
    }

    private void listView1_DragLeave(object sender, EventArgs e)
    {
        listView1.InsertionMark.Index = -1;
    }

    private void listView1_DragDrop(object sender, DragEventArgs e)
    {
        // listView1.InsertionMark.Index = -1; // Is this really necessary?
    }

    private void listView1_QueryContinueDrag(object sender, QueryContinueDragEventArgs e)
    {
        this.Text = "listView1_QueryContinueDrag";
    }

    private void listView1_GiveFeedback(object sender, GiveFeedbackEventArgs e)
    {
        this.Text = "listView1_GiveFeedback";
    }
} 
```

我是否必须`listView1.InsertionMark.Index = -1`手动设置才能隐藏`InsertionMark`？`DragLeave`当拖放效果为时，是否有触发事件`DragDropEffects.Link`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:24:20.753

> 当我删除文件时，`InsertionMark`它不会消失，因为`DragLeave`事件没有被触发；

[`DragLeave`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.dragleave.aspx)：

> **当用户将光标拖出控件**或用户**取消当前的拖放操作**时，将引发该`DragLeave`事件。

 ****（重点补充）

他们都没有 - 他们完成了下降。为什么你对这个事件当时没有触发如此惊讶？

* * *

回复[`QueryContinueDrag`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.querycontinuedrag)：：

> 该`QueryContinueDrag`事件使**拖动源**可以确定是否应取消拖放操作。

（重点补充）

我在这里可能是错的，但在这种情况下，您似乎是拖动目标，而不是源。****

# python - 循环打印两个列表以获得两列，每个列表的每个元素的第一个字母之间具有固定（自定义集）空间

> ID：12091687
> 
> 赞同：9
> 
> 时间：2012-08-23T12:32:08.880
> 
> 标签：python, list, loops, for-loop, pretty-print

假设我有这两个列表：

```
column1 = ["soft","pregnant","tall"]
column2 = ["skin","woman", "man"] 
```

如何在使用自定义的固定空间（例如 10，如示例）从第一个列表的每个元素的第一个字母开始到第二个列表的每个元素的第一个字母的同时循环打印这两个列表？

**设置间距为 10 的示例输出：**

```
soft      skin
pregnant  woman 
tall      man 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T12:41:48.640

轻松完成[字符串格式化](http://docs.python.org/library/stdtypes.html#string-formatting-operations)，

```
column1 = ["soft","pregnant","tall"]
column2 = ["skin","woman", "man"]

for c1, c2 in zip(column1, column2):
    print "%-9s %s" % (c1, c2) 
```

或者你可以使用[`str.ljust`](http://docs.python.org/library/stdtypes.html#str.ljust)，如果你想让填充基于一个变量，它会更整洁：

```
padding = 9
for c1, c2 in zip(column1, column2):
    print "%s %s" % (c1.ljust(padding), c2) 
```

（注意：填充`9`不是`10`因为单词之间的硬编码空格）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-23T12:39:21.573

怎么样：

```
>>> column1 = ["soft","pregnant","tall"]
>>> column2 = ["skin","woman", "man"]
>>> for line in zip(column1, column2):
...     print '{:10}{}'.format(*line)
... 
soft      skin
pregnant  woman
tall      man 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-23T12:36:21.423

```
column1 = ["soft","pregnant","tall"]
column2 = ["skin","woman", "man"]

for row in zip(column1, column2):
    print "%-9s %s" % row # formatted to a width of 9 with one extra space after 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-29T09:54:15.913

使用 Python 3

```
column1 = ["soft","pregnant","tall"]
column2 = ["skin","woman", "man"]

for line in zip(column1, column2):
    print('{:10}{}'.format(*line)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-29T13:55:04.550

使用新样式字符串格式的一个班轮：

```
>>> column1 = ["soft", "pregnant", "tall"]
>>> column2 = ["skin", "woman", "man"]

>>> print "\n".join("{0}\t{1}".format(a, b) for a, b in zip(column1, column2))

soft        skin
pregnant    woman
tall        man 
```

# scala - 为什么在非最终类中使用普通 val

> ID：12091689
> 
> 赞同：3
> 
> 时间：2012-08-23T12:32:15.727
> 
> 标签：scala, lazy-evaluation, final

如果课程不是最终课程，则可以延长课程。

值有两种可能性：它可能被覆盖并且应该是惰性的，它可能不会被覆盖并且应该是最终的。

如果 val 是最终的 - 您可以假设对其进行的所有计算都将通过类层次结构进行。如果 val 可能被覆盖，你应该声明它是惰性的，因为在扩展后不会被破坏。您可以将 val 保留为原样，这不能保证它会以正确的方式扩展。

哪些用例意味着使用纯值？

* * *

没有惰性值的类初始化失败示例

```
abstract class A {
  lazy val x1 : String = throw new Exception()
  val x2 : String = "mom"
  val x3 : String = x1 + ", " + x2
  println("A: " + x3)
}
class B extends A {
  override lazy val x1: String = "hello"
  println("B: " + x3)
}
class C extends B {
  override val x2: String = "dad"
  println("C: " + x3)
} 
```

测试它：

```
scala> new B
A: hello, mom
B: hello, mom
res8: B = B@7e2bd615 
```

它可以工作，但进一步的子类化破坏了已经存在的功能

```
scala> new C
A: hello, null
B: hello, null
C: hello, null
res5: C = C@52a53948 
```

在 x2 上设置惰性可以解决此问题：

```
abstract class A {
  lazy val x1 : String = throw new Exception()
  lazy val x2 : String = "mom"
  val x3 : String = x1 + ", " + x2
  println("A: " + x3)
}
class B extends A {
  override lazy val x1: String = "hello"
  println("B: " + x3)
}
class C extends B {
  override lazy val x2: String = "dad"
  println("C: " + x3)
} 
```

正确的初始化顺序：

```
scala> new C
A: hello, dad
B: hello, dad
C: hello, dad
res6: C = C@5e970110 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T16:12:59.050

基本上，你把它搞砸了。

问题不在于覆盖，问题在于您没有注意初始化事物的顺序。有办法让它起作用，也有办法让它不起作用，你选择了后者。这有效：

```
scala> class C extends { override val x2: String = "dad" } with B {
     |   println("C: " + x3)
     | }
defined class C

scala> new C
A: hello, dad
B: hello, dad
C: hello, dad
res0: C = C@356e3aaf 
```

# c# - 将用户控件从类型名称转换为自定义控件类型？

> ID：12091692
> 
> 赞同：1
> 
> 时间：2012-08-23T12:32:28.747
> 
> 标签：c#, user-controls, casting

我正在将*动态指定*的用户控件加载到父（用户）控件中的占位符中，如下所示：

```
// dynamically load instance of chosen chart control
string chartClassName = ConfigurationManager.AppSettings["ChartControlClass"];
_chartControl = (IOutputChart)LoadControl(chartClassName + ".ascx");
// add to place-holder
if (chartClassName == "OutputChart_Dundas") phChart.Controls.Add((OutputChart_Dundas)_chartControl);
else if (chartClassName == "OutputChart_Microsoft") phChart.Controls.Add((OutputChart_Microsoft)_chartControl);
else if (chartClassName == "OutputChart_Telerik") phChart.Controls.Add((OutputChart_Telerik)_chartControl); 
```

显然，不必`_chartControl`每次都显式地转换变量会更好——有没有更干净的方法？每个用户控件实现`IOutputChart`接口；但是，我不能直接使用它，因为`Controls.Add()`需要一个`Control`对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T12:33:47.307

你能不能把所有这些都转换成`Control`?

```
phChart.Controls.Add((Control)_chartControl); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T12:36:15.923

我假设您的所有控件都派生自`Control`基类。那你为什么不投到`_chartControl`并`Control`添加它。

```
_chartControl = (Control)LoadControl(chartClassName + ".ascx");
phChart.Controls.Add(_chartControl); 
```

# c# - Ajax AutoCompleteExtender OnClientPopulated 事件不会在 Firefox 中触发

> ID：12091694
> 
> 赞同：2
> 
> 时间：2012-08-23T12:32:36.077
> 
> 标签：c#, javascript, asp.net, ajax

在我的应用程序中，我在该扩展器中添加了 ajax 自动完成扩展器，我使用了“OnClientPopulated”事件，对于该事件，我在 javascript 中编写了一个函数，它适用于 IE、Chrome、Safari 但不适用于 firefox，因为该事件无法在 firefox 中触发，以下我在那里写的代码：

```
<ajax:AutoCompleteExtender OnClientPopulated="getSearch_Populated"  ID="AutoCompleteExtenderSearch"
        runat="server" TargetControlID="txtSearchbox" MinimumPrefixLength="1" Enabled="true"
        EnableCaching="true" CompletionSetCount="12" CompletionInterval="1000" ServiceMethod="GetAppNames"
        ServicePath="~/AutoComplete.asmx" DelimiterCharacters="" UseContextKey="true"
        CompletionListCssClass="AutoExtender" CompletionListHighlightedItemCssClass="AutoExtenderHighlight"
        CompletionListItemCssClass=".AutoExtenderList" OnClientItemSelected="selected_Search">
</ajax:AutoCompleteExtender> 
```

JavaScript：

```
function getSearch_Populated(sender, e) {

    var searchList = sender.get_completionList().childNodes;
    var searchText = sender.get_element().value;
    for (var i = 0; i < searchList.length; i++) {
        var search = searchList[i];
        var searchValueArray = (search._value).split("|");
        var searchId = searchValueArray[0];
        var searchUrl = searchValueArray[1];
        var link = document.createElement('a');
        var href = document.createAttribute('href');
        link.setAttribute('href', searchUrl);
        link.innerText = searchId;
        search.appendChild(link);            
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:09:41.817

它在 Firefox 中非常适合我。我是这样做的：

```
<asp:TextBox ID="TBAjaxSzallitasiCim" runat="server" Text="<%$Resources:WLO_Web,lbl_kereso %>"
    Style="font-style: italic" Width="250"></asp:TextBox><cc1:AutoCompleteExtender ID="TextBox1_AutoCompleteExtender"
        runat="server" ServicePath="AutoCompleteFeeder.asmx" ServiceMethod="Cimvalaszto"
        TargetControlID="TBAjaxSzallitasiCim" CompletionListCssClass="autocomplete_completionListElement"
        CompletionListItemCssClass="autocomplete_listItem" CompletionListHighlightedItemCssClass="autocomplete_highlightedListItem"
        CompletionInterval="1000" DelimiterCharacters=";" CompletionSetCount="10" FirstRowSelected="true"
        EnableCaching="true" Enabled="true" OnClientPopulating="ShowImage" OnClientPopulated="HideImage"
        OnClientItemSelected="ace0_itemSelected">
    </cc1:AutoCompleteExtender>
<asp:HiddenField ID="ace0Value" runat="server" /> 
```

Javascript：

```
function ShowImage() {
document.getElementById('ctl00_ContentPlaceHolder1_TBAjaxSzallitasiCim')
  .style.backgroundImage = 'url(Images/circle-ball-dark-antialiased.gif)';

document.getElementById('ctl00_ContentPlaceHolder1_TBAjaxSzallitasiCim')
                .style.backgroundRepeat = 'no-repeat';

document.getElementById('ctl00_ContentPlaceHolder1_TBAjaxSzallitasiCim')
                .style.backgroundPosition = 'right';
}

function HideImage() {
document.getElementById('ctl00_ContentPlaceHolder1_TBAjaxSzallitasiCim')
                  .style.backgroundImage = 'none';
} 
```

我正在使用这个库：

```
<%@ Register TagPrefix="cc1" Namespace="AjaxControlToolkit" Assembly="AjaxControlToolkit, Version=3.5.51116.0, Culture=neutral, PublicKeyToken=28f01b0e84b6d53e" %> 
```

而这个脚本管理器：

```
<cc1:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server" CombineScripts="false"
    AsyncPostBackTimeout="300" EnableHistory="true" EnablePageMethods="true">
</cc1:ToolkitScriptManager> 
```

# assembly - ARM指令含义

> ID：12091697
> 
> 赞同：3
> 
> 时间：2012-08-23T12:32:59.720
> 
> 标签：assembly, arm

```
 sub     lr,lr,#4
 stmfd   sp!,{lr}
 stmfd   sp!,{r0-r14}^
 mrs     r1,spsr
 stmfd   sp!,{r1}
 bl      irqHandler
 ldmfd   sp!,{r1}
 msr     spsr_cxsf,r1
 ldmfd   sp!,{pc}^
 bl      irqHandler 
```

任何人都可以帮我解决这个'^'的意思T_T有什么不同

```
stmfd   sp!,{r0-r14}^ 
```

和

```
stmfd   sp!,{r0-r14} 
```

？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T12:41:29.133

从[ARM 手册](http://infocenter.arm.com/help/topic/com.arm.doc.dui0068b/CIHCADDA.html)：

> **^**
> 
> 是一个可选的后缀。您不得在用户模式或系统模式下使用它。它有两个目的：如果 op 是 LDM 并且 reglist 包含 pc (r15)，除了正常的多寄存器传输之外，SPSR 被复制到 CPSR 中。这是为了从异常处理程序返回。仅在异常模式下使用它。否则，数据将传入或传出用户模式寄存器，而不是当前模式寄存器。

# jsonp - 使用 JSONP 获取数据

> ID：12091698
> 
> 赞同：-1
> 
> 时间：2012-08-23T12:33:04.743
> 
> 标签：jsonp

我正在使用 Jsonp 跨域获取数据。这是json。

```
({"cow": [{"count":"951",
"url":"http://www.google.com/"
},]}) 
```

但问题是我无法在浏览器上显示它。

我正在使用的代码是

```
<script type="text/javascript">
$(function() 
{
$(document).ready(function()
{
var site ='http://somedomain.com/json.php?url=http://www.google.com/';

$.getJSON(site+"&?callback=?",function(data){
$.each(data.cow, function(i,data){

var div_data = "<a href='"+data.url+"'>"+data.count+"</a>";
$(div_data).appendTo("#getlinks");
});
});
return false;
});
});
</script>
<div id="getlinks">

</div> 
```

我哪里错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:56:23.777

对于初学者，您不能将纯 url 作为 GET 中的参数

[http://en.wikipedia.org/wiki/Percent-encoding#Percent-encoding_reserved_characters](http://en.wikipedia.org/wiki/Percent-encoding#Percent-encoding_reserved_characters)

使用 javascript 的`encodeURIComponent`函数对其进行编码[http://www.w3schools.com/jsref/jsref_encodeURIComponent.asp](http://www.w3schools.com/jsref/jsref_encodeURIComponent.asp)

# jquery - jQuery插件中的错误“未终止的字符串文字”

> ID：12091701
> 
> 赞同：0
> 
> 时间：2012-08-23T12:33:20.890
> 
> 标签：jquery

我有一个非常奇怪的错误，多年来一直试图在这个文件中找到它：

[http://4nf.org/js/GA.js](http://4nf.org/js/GA.js)

也许你一眼就能认出来——我现在好像瞎了……

非常感谢任何帮助，因为我遇到了实时麻烦

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:45:31.400

检查您的 ajax 响应和来自它的字符串，您必须使用某种编码来解析 ajax 响应。

还可以尝试通过一次删除一个变量来调试它，例如

```
var v = getFileContents(settings['GACodePath']); 
```

并更改 v 的值。意味着我想说的是找到导致此错误的确切变量

# extjs - 如何在 ExtJs 中查看 Store 中的数据

> ID：12091708
> 
> 赞同：2
> 
> 时间：2012-08-23T12:33:51.500
> 
> 标签：extjs

我是 ExtJs 的新手，我在 extJs 中创建了一个数据模型，然后我创建了该模型的存储，我正在使用 url 在存储中加载数据，现在**我想查看该存储中可用的数据**，我该怎么做？

我的数据模型代码

```
Ext.define('MyModel', {
    extend: 'Ext.data.Model',
    proxy: {
        actionMethods: {create: "POST", read: "POST", update: "POST", destroy: "POST"},
        type: 'ajax'
    }
}); 
```

我的商店代码

```
var MyStore = Ext.create('Ext.data.Store', {
    model: 'MyModel',
    pageSize: 50,
    remoteSort: true,
    remoteFilter: true,
    remoteGroup: true
}); 
```

我如何在商店中加载值

```
MyStore.load({url: 'xyz.json'}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:06:14.880

您可以在初始化商店后触发显式事件。

```
// This will ensure that the store is loaded before you log the records.
MyStore.on('load', function(store) {
    var records = store.getRange();

    console.log(records); // The data you want to see.
}); 
```

您还可以在类中添加加载事件。你可以参考[这里](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.Store-cfg-listeners)。最重要的部分是`getRange()`方法。这将返回存储中的所有数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T11:04:15.393

您可以在调用存储加载时添加回调方法。例如：

```
MyStore.load({
    url: 'xyz.json',
    callback: function(records, operation, success){
        console.log(records);
    }
}); 
```

在这里阅读更多[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-load](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-load)

# windows-ce - 从 .cab 安装后运行应用程序

> ID：12091711
> 
> 赞同：0
> 
> 时间：2012-08-23T12:33:53.677
> 
> 标签：windows-ce, cab, compact-framework2.0

从 .cab 文件安装后，我需要知道一种在 Windows CE 6.0 设备上运行我的应用程序的方法。该应用程序放置在自动启动文件夹中。所以我需要热重启或从 .cab 安装后直接启动

有人可以给我解决这个问题的方法吗？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T12:49:54.813

将[自定义 setup.dll 添加到安装程序包](http://msdn.microsoft.com/en-us/library/aa924308.aspx)中。`Install_Exit`通过调用[`CreateProcess`API](http://msdn.microsoft.com/en-us/library/ee488927%28v=winembedded.60%29.aspx)启动您的应用程序。如果用户可以使用`pszInstallDir`传入的参数更改路径，则可以组装路径。

# python - 文本文件中的 python 和 («») 符号

> ID：12091712
> 
> 赞同：-1
> 
> 时间：2012-08-23T12:33:55.017
> 
> 标签：python, character-encoding

我从数据库加载到文本文件数据。它是 utf-8 格式。现在我如何在 python 中读取这个文本文件，考虑它包含标题符号中的提及？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:42:41.817

使用[`codecs.open`](http://docs.python.org/library/codecs.html#codecs.open)：

```
codecs.open(filename, encoding='utf-8', mode='r') 
```

# android - Mono for Android 对话框

> ID：12091717
> 
> 赞同：0
> 
> 时间：2012-08-23T12:34:04.610
> 
> 标签：android, mono, xamarin.android

我正在为 android 使用单声道，我试图弄清楚如何在每 100 次单击按钮后添加一个对话框，代码看起来像这样，程序已经计算了每次单击按钮。我在想一个if语句？

```
button.Click += delegate { button.Text = string.Format("{0} clicks!", count++); };

if(count >= 5)

            {                
                var builder = new AlertDialog.Builder(this);
                builder.SetMessage("Your On Your Way");
                builder.SetCancelable(false);
                builder.SetPositiveButton("OK", delegate { });
                var dialog = builder.Create();
                dialog.Show();

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T17:53:27.870

您可以将 if 语句放在按钮的委托中：

```
button.Click += delegate
            {
                button.Text = string.Format("{0} clicks!", count++);

                if (count % 100 == 0)
                {
                    var builder = new AlertDialog.Builder(this);
                    builder.SetMessage("Your On Your Way");
                    builder.SetCancelable(false);
                    builder.SetPositiveButton("OK", delegate { });
                    builder.Show();
                }

            }; 
```

# windows - 如何制作找到文件路径并将特定文件复制到其他位置的bat文件

> ID：12091721
> 
> 赞同：0
> 
> 时间：2012-08-23T12:34:30.440
> 
> 标签：windows, batch-file, cmd

我想制作一个 bat 文件，首先将搜索可执行文件“Text.exe”的路径。然后我想从我创建的路径中复制一个 log.log 文件，在 thr 文件夹 LOg 中，并将该文件复制到服务器 \server1\logFiles

你能帮我举个例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T00:26:12.150

`c:\searchlocation`您要搜索的路径在哪里：

```
FOR /F "tokens=*" %%F IN ('dir /b /s C:\searchlocation\Text.exe') do (
    copy "%%~pFLog.log" "\server1\logFiles"
) 
```

# android - Android：为同一个项目启动多个模拟器

> ID：12091723
> 
> 赞同：0
> 
> 时间：2012-08-23T12:34:31.710
> 
> 标签：android, android-emulator

我正在开发一个 Android 项目，该项目设置为在 Android 4.0.3 上运行（支持的最低版本是 2.2）。

每当我运行项目时，即使模拟器正在运行，它也会每次启动一个单独的模拟器。每个设备都需要很长时间才能启动。我尝试将运行配置更改为“始终提示选择设备”，但正在运行的模拟器未在活动设备列表下列出。

在 Windows 7 上使用带有最新 ADT 和 Android SDK 的 Eclipse 3.7。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-11T06:51:55.020

可能有点晚了，但希望它可以帮助到达这里的人。

该问题是由于 ADB 服务器和正在运行的模拟器之间的一些连接问题造成的。重新启动服务器将解决此问题。

```
adb kill-server
adb start-server 
```

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:38:19.027

为每个 2.2 和 4.0.3 配置配置一个模拟器。然后右键项目 --> 运行方式 --> 运行配置 --> 将打开对话框 --> 选择目标选项卡 --> 在部署目标选择模式下勾选手动。

如果您使用手动操作，那么您会知道当前正在运行哪个模拟器，并且可以重新选择该模拟器以针对同一应用程序运行。

# javascript - xp 中的 ie8 崩溃，html5shim 问题

> ID：12091726
> 
> 赞同：0
> 
> 时间：2012-08-23T12:34:49.290
> 
> 标签：javascript, jquery, internet-explorer-8, html5shiv, contao

加载新页面时，站点[http://www.taa.de](http://www.taa.de)在 Windows XP 上的 IE8 中总是崩溃。我一个接一个地删除了一个javascript，发现删除html5shim.js时错误消失了。

IE7（XP+windows7）一个IE8在windows 7上没有问题。

该站点是在 contao 2.11.5 中构建的，并使用 jquery 1.6.2 和 typekit。

感谢您的帮助

编辑：关闭 jQuery 时它可以工作。是否有任何已知的干扰？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T05:50:52.207

我也遇到了 XP/IE8 崩溃问题；我将其缩小到 TypeKit 加载程序，我现在将只为 IE8 关闭它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:09:34.890

尝试使用最新的 jQuery 版本。也许这有帮助。

# .net - 发布项目时无法读取状态文件“obj\Debug\Helpers.csprojResolveAssemblyReference.cache”错误

> ID：12091727
> 
> 赞同：11
> 
> 时间：2012-08-23T12:34:49.990
> 
> 标签：.net, publish, visual-studio-2012

我试图发布一个 ASP.NET 网站并收到以下警告：
`Could not read state file "obj\Debug\Helpers.csprojResolveAssemblyReference.cache"`

这使我无法实际发布该网站。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-23T12:34:49.990

答案其实很简单：先清理整个解决方案，然后再发布。现在一切都应该工作了。

问题是由于状态文件的格式较旧（VS2012 RC 格式），而我试图从 VS2012 RTM 发布。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-31T14:48:26.023

只排除“Obj\Debug”文件夹。重建项目和主机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-18T16:29:43.163

最简单的方法是删除项目并创建一个新项目，然后它就可以工作了。

# jquery - JQuery 令牌输入

> ID：12091735
> 
> 赞同：0
> 
> 时间：2012-08-23T12:35:18.167
> 
> 标签：jquery, jquery-tokeninput

我正在使用 jQuery tokeninput 预填充文本区域。我有一个 JSON 数组来预填充文本区域，文本区域已正确填充，但是当我查看`<li>`此插件创建的 's 时，它只包含每个条目的名称。

如何获取有关每个条目的其余信息？在我的情况下，如描述、订单等。我需要它，因为我需要将所有这些条目插入数据库。

我的 jQuery 是

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#text-area").tokenInput("", {
            theme: "facebook",
            prePopulate: [
                          {"id":"04d0d4b2-ac25-11e1-96a5-9787dec335c2","name":"Group 1","description":"Description of Patent Group 1","order":56250000,"is_deleted":false},
                          {"id":"9d4f6e5c-dd73-11e1-bed3-fbfe082dc‌​761","name":"Group 3","description":"Description of Patent Group 3","order":70312500,"is_deleted":false},
                          {"id":"06d0d4b2-ac25-11e1-96a5-9787dec33‌​5c2","name":"Group 2","description":"Description of Patent Group 2","order":84375000,"is_deleted":false}
                         ]
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:43:21.370

您需要使用以下`tokenFormatter`选项：

> 为每个标记返回一个插入的 HTML 字符串的函数。将此函数与您选择的模板系统一起使用，例如 jresig microtemplates 或 mustache.js。当您想要包含图像或多行格式标记时使用此选项。Quora 的人员邀请令牌字段返回头像令牌是一个很好的例子，说明了这个选项可以做什么。

默认值：（`function(item){ return “&lt;li><p>” + item.propertyToSearch + “&lt;/p></li>” }` [演示）](http://loopj.com/jquery-tokeninput/demo.html#formatting)。

像这样：

```
$(document).ready(function() {
    $("#text-area").tokenInput("", {
        theme: "facebook",
        prePopulate: [
                      {"id":"04d0d4b2-ac25-11e1-96a5-9787dec335c2","name":"Group 1","description":"Description of Patent Group 1","order":56250000,"is_deleted":false},
                      {"id":"9d4f6e5c-dd73-11e1-bed3-fbfe082dc‌​761","name":"Group 3","description":"Description of Patent Group 3","order":70312500,"is_deleted":false},
                      {"id":"06d0d4b2-ac25-11e1-96a5-9787dec33‌​5c2","name":"Group 2","description":"Description of Patent Group 2","order":84375000,"is_deleted":false}
                     ],
        resultsFormatter: function(item){ return "<li>" + "<img src='" + item.url + "' title='" + item.name + "' height='25px' width='25px' />" + "<div style='display: inline-block; padding-left: 10px;'><div class='full_name'>" + item.description + " " + item.order + "</div><div class='email'>" + item.is_deleted + "</div></div></li>" },
        tokenFormatter: function(item) { return "<li><p>" + item.name + " <b style='color: red'>" + item.description + "</b></p></li>" },
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-26T13:01:52.093

您可以使用 onAdd、onDelete 函数将所选项目描述、订单存储到某个变量中。

```
onAdd:function(item)
{
    alert(item.description);
    alert(item.order);
    //push into array
}
onDelete:function(item)
{
    //remove from array
} 
```

# jsf - Primefaces 3.3.1 primefaces 富文本编辑器内联可见性故障： 如果单击命令按钮“打开/清除”（仅用于清除 bean 中的编辑器值），则编辑器将再次可见。 问问题 问问题 2012-08-23T12:35:33.657 3782 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. primefaces 富文本编辑器内联可见性故障： 如果单击命令按钮“打开/清除”（仅用于清除 bean 中的编辑器值），则编辑器将再次可见。<p:inplace styleclass="ui-multilanguage-description" id="ajaxInplace" widgetvar="inplaceeditorWidget" editor="true" toggleable="true" label="Edit" effect="slide" effectspeed="fast"><p:editor widgetvar="editorWidget" rendered="true" id="editor" value="#{editorBean.value}" width="600"><p:commandbutton process="@this" ajax="true" value="Open/Clear" update="editor" id="clearButton" action="#{editorBean.clearValue()}"></p:commandbutton></p:editor></p:inplace>在这种情况下，我很少使用 eclipse 插件，而是选择编写一个小的 main 方法来连接并运行它，或者编写一个可以暂停以检查状态或调试的单元测试。测试用例中嵌入式使用的jetty源码中有很多例子。 http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/example-jetty-embedded/src/main/java/org/eclipse/jetty/embedded 如果您选择研究此选项，这些示例可以帮助您继续前进。 jsfnetbeansprimefacesinlinerich-text-editor 4 1 回答 1 This answer is useful 1 因为我遇到了同样的问题，而且我的一天没有别的事情要做（是的，我花了一整天的时间）我想通了（至少对我来说）。 问题在于正在更新的编辑器的容器（就地元素）。这会导致编辑器元素发生更新。编辑器有一个很大的缺点，那就是它的大小在渲染时是“硬编码”的。由于更新发生时编辑器被隐藏，因此编辑器未正确呈现。 我创建了一个示例来演示该问题： <h:head></h:head><h:form><p:commandbutton onclick="inplace.show()" icon="ui-icon-pencil" value="edit"><p:inplace widgetvar="inplace"><p:editor id="editor"><p:commandbutton onclick="inplace.cancel()" icon="ui-icon-cancel" value="cancel"><p:commandbutton onclick="inplace.save()" icon="ui-icon-disk" value="save"></p:commandbutton></p:commandbutton></p:editor></p:inplace></p:commandbutton></h:form>当您运行此示例时，您可以单击编辑按钮，然后事情会按预期工作。但是，如果您单击取消按钮（发生更新）然后再次单击编辑，则不会显示编辑器。 “解决方案”是强制更新编辑器。在示例中，您可以通过向编辑按钮添加更新来做到这一点： <p:commandbutton onclick="inplace.show()" icon="ui-icon-pencil" value="edit" update="editor">由于更新，显示编辑器时会有一点延迟，但嘿，总比没有编辑器好。 于 2012-08-29T21:25:34.267 回答 Related 5 vim - 删除 VIM 中的最后一列 1 google-maps - 谷歌地图 addListener 如何给我们一个全局点击事件？ 1 sql - 处理复杂查询的构建 5 django - Django allauth 社交登录：使用注册的电子邮件自动链接社交网站配置文件 2 javascript - 如何在文本框上创建验证？ 1 opengl - glDepthTest 的用法不清楚 7 c# - 安装安装程序时出现错误 System.Data.OracleClient 需要 Oracle 客户端软件版本 8.1.7 或更高版本 1 mysql - 具有重复项且没有主键的外键 0 facebook - Facebook 超过 USSD 1 ajax - jQuery ajaxcall - 有没有更好的方法来找到 ajaxcaller..？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</p:commandbutton>

> ID：12091736
> 
> 赞同：2
> 
> 时间：
> 
> 标签：jsf, netbeans, primefaces, inline, rich-text-editor

primefaces 富文本编辑器内联可见性故障：

如果单击命令按钮“打开/清除”（仅用于清除 bean 中的编辑器值），则编辑器将再次可见。

```
 <div id="multilanguage-descriptions">
   <p:inplace  styleClass="ui-multilanguage-description"
       id="ajaxInplace" widgetVar="inplaceeditorWidget" editor="true"
       toggleable="true" label="Edit" effect="slide" effectSpeed="fast">
 <p:editor  widgetVar="editorWidget" rendered="true"
       id="editor"  value="#{editorBean.value}" width="600"/>
  <p:commandButton  process="@this"
       ajax="true" value="Open/Clear" update="editor"
       id="clearButton"  action="#{editorBean.clearValue()}"/>

 </p:inplace>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:25:34.267

因为我遇到了同样的问题，而且我的一天没有别的事情要做（是的，我花了一整天的时间）我想通了（至少对我来说）。

问题在于正在更新的编辑器的容器（就地元素）。这会导致编辑器元素发生更新。编辑器有一个很大的缺点，那就是它的大小在渲染时是“硬编码”的。由于更新发生时编辑器被隐藏，因此编辑器未正确呈现。

我创建了一个示例来演示该问题：

```
<h:head>
</h:head>
<body>
    <h:form>
        <p:commandButton onclick="inplace.show()" icon="ui-icon-pencil" value="edit"/>
        <p:inplace widgetVar="inplace" >
            <p:editor id="editor"/>
            <p:commandButton onclick="inplace.cancel()" icon="ui-icon-cancel"
                value="cancel" />
            <p:commandButton onclick="inplace.save()" icon="ui-icon-disk" value="save" />
        </p:inplace>
    </h:form>
</body> 
```

当您运行此示例时，您可以单击编辑按钮，然后事情会按预期工作。但是，如果您单击取消按钮（发生更新）然后再次单击编辑，则不会显示编辑器。

“解决方案”是强制更新编辑器。在示例中，您可以通过向编辑按钮添加更新来做到这一点：

```
<p:commandButton onclick="inplace.show()" icon="ui-icon-pencil" value="edit" update="editor"/> 
```

由于更新，显示编辑器时会有一点延迟，但嘿，总比没有编辑器好。

# android - 适用于 Ruby on Rails 3 的 Android 谷歌云消息传递 gem

> ID：12091737
> 
> 赞同：2
> 
> 时间：2012-08-23T12:35:39.887
> 
> 标签：android, ruby-on-rails-3, android-c2dm, google-cloud-messaging

是否有一个新的宝石用于 GCM 的轨道上的红宝石，以前称为 C2DM。

[如果不是那么，我们是否应该像github](https://github.com/pimeys/c2dm_on_rails)上的一样继续使用旧的 gem 进行 C2DM

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T03:33:08.360

试试这个[https://github.com/dondeng/gcm_on_rails](https://github.com/dondeng/gcm_on_rails)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T00:52:42.953

你可以试试这个 si [https://github.com/kureikain/sinatra-gcm](https://github.com/kureikain/sinatra-gcm)。它带有一个 WebUI，可让您创建和发送 JSON 格式的通知。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T09:23:50.120

你可以使用我的 gem：[https ://github.com/tompesman/push-core](https://github.com/tompesman/push-core)

这个 gem 允许你向 APNS、GCM 和 C2DM 发送消息。

# actionscript-3 - 如何使用 Flash As3 自动保存数据（文本到 .txt 文件，或图像文件到硬盘上的目录）？

> ID：12091739
> 
> 赞同：1
> 
> 时间：2012-08-23T12:35:45.763
> 
> 标签：actionscript-3, flash, save

我有一个绘图应用程序，它可以让您保存您的绘图，但是当您点击保存时，它会提示系统对话框询问您要将其保存在哪里。我需要的是自动保存到计算机目录中的特定位置。任何想法如何用 Flash 和 As3 做到这一点？我真的需要使用 php 或 xml 来执行此操作（我一直在检查可能的解决方案）吗？任何帮助将不胜感激，我在编程和 as3 方面真的很新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:39:33.630

除非您使用 AIR，否则这是不可能的。出于明显的安全原因，Flash 插件根本不会静默写入文件。保存必须由用户操作触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:07:06.383

不幸的是，在纯 as3.0 中，您无法在没有对话框的情况下直接保存文件。

但是，如果您使用 Air，请遵循它

更多信息，请参阅 Air 文档：[FileStream](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/FileStream.html)，[File](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/com/adobe/livecycle/content/File.html)

```
var fileStream : FileStream = new FileStream();
var file : File = File.desktopDirectory.resolvePath('your_file_name.jpg');
fs.open(file, FileMode.WRITE);
fs.writeBytes(your_byte_array);
fs.close(); 
```

# mysql - SQL Query 根据列条目获取有限数量的结果

> ID：12091741
> 
> 赞同：2
> 
> 时间：2012-08-23T12:35:53.287
> 
> 标签：mysql, sql, database, population

我现在正在努力使用 SQL。

我有一个表城市，其中包含行 ID、名称、国家、人口。

```
ID  |     name     |  country  | population 
1   | Shanghai     | CN        | 14608512
2   | Buenos Aires | AR        | 13076300
3   | Mumbai       | IN        | 12691836
4   | Karachi      | PK        | 11624219
5   | Beijing      | CN        |  7480601
6   | Wuhan        | CN        |  4184206
7   | Berlin       | DE        |  3426354
8   | Puyang       | CN        |  3590000 
```

该数据库包含来自所有人口超过 15000 的城市的全球数据。现在我正在尝试按人口计算世界上最大的 50 个城市。

```
SELECT * FROM cities ORDER BY population DESC LIMIT 0,50 
```

我现在的问题是我在中国有 12 个城市，在印度有 4 个等。但我需要按国家/地区限制我的结果，所以每个国家/地区只返回 2 个城市。

上述示例的结果：

```
ID  |     name     |  country  | population 
1   | Shanghai     | CN        | 14608512
2   | Buenos Aires | AR        | 13076300
3   | Mumbai       | IN        | 12691836
4   | Karachi      | PK        | 11624219
5   | Beijing      | CN        |  7480601
7   | Berlin       | DE        |  3426354 
```

但就像我说的那样，我正在为这种操作使用正确的 sql 查询。我尝试了 GROUP BY ... HAVING 和各种子选择，但似乎没有一个返回正确的结果集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:52:26.887

尝试这个：

```
select * from
    (select t.* from t_population t
    join
        (select  country,MAX(population) as population
         from    t_population
         group by country)a
    on  t.country=a.country
    and t.population=a.population
union all
    select t.* from t_population t
    join
        (select country,MAX(population) as population
         from   t_population t1
         where  population <> (select MAX(population) 
         from  t_population t2 where t1.country=t2.country)
         group  by country)b
    on t.country=b.country
    and t.population=b.population)c
order by  population desc 
```

# [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/dafe0/1)

# eclipse - 在 Aptana 的 Eclipse 插件中编辑键盘快捷键（wrt coffeescript）

> ID：12091747
> 
> 赞同：1
> 
> 时间：2012-08-23T12:36:06.613
> 
> 标签：eclipse, coffeescript, aptana

我最近为 Eclipse 安装了 Aptana 插件，以进行一些 Coffeescript 开发，我很喜欢它，但我似乎无法解决一个烦恼。该`Shift+Enter`快捷方式曾经是“在当前行下方插入一行”，但 Aptana 决定要将该快捷方式用于“新功能”。我希望它消失。

*我试过的*

*   我查看了 Eclipse Keys 首选项页面，但没有提到“插入新功能”。

*   我查看了[Aptana Studio 3 SHIFT+ENTER 选项选择](https://stackoverflow.com/questions/11265092/aptana-studio-3-shiftenter-option-select)，这似乎很有希望，但是当我单击 Commands -> CoffeeScript -> Edit this bundle 时，什么也没有发生。（对于其他命令 -> XXX -> 编辑此捆绑包，我得到一个进度条，最终在 5% 左右失败）

是否有可以手动编辑的配置文件，或者可以通过其他方式编辑 Aptana 的快捷键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T22:50:49.550

在这里找到了一些有用的信息：[Aptana 3 remove bundle (jquery)](https://stackoverflow.com/questions/10131289/aptana-3-remove-bundle-jquery)

按照说明直到找到安装点，然后进入并删除“卢布”中对“新功能”命令的引用。

# sql - 简单的数据库。外键插入

> ID：12091750
> 
> 赞同：0
> 
> 时间：2012-08-23T12:36:15.967
> 
> 标签：sql, database

我有 2 个类别 A 和 B，包含以下列：

**甲类**

```
_id | name 
```

**B类**

```
_id | tableA_id |name 
```

**物品清单**

```
_id | name | tableB_id 
```

`tableA_id`并且`tableB_id`是外键，_id 列是主键。

B 类是 A 的子类。

`name`列是唯一的（每个表中只有 1 个类别）

我想插入 5 个项目，每个项目都有 A 类和 B 类。

**第 1 项：**

```
name: item1
category A: Movie
Category B: Action 
```

**第 2 项：**

```
name: item2
category A: Movie
Category B: Drama 
```

**第 3 项：**

```
name: item3
category A: Movie
Category B: Comedy 
```

**第 4 项：**

```
name: item4
category A: Music
Category B: Pop 
```

**第 5 项：**

```
name: item5
category A: Music
Category B: Rock 
```

如何在不查询其对应主节点的 id 的情况下填充外键？

还是我错过了数据库设计的重要部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:45:07.750

> 如何在不查询其对应主节点的 id 的情况下填充外键？

如果我正确理解了您的问题，则在将新记录插入表时无法填充外键`List`而不查询 Rock 的 id，即没有

```
select _id,  tableA_id
from Category_B
where name = 'Rock' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T12:51:50.523

首先填充 CATEGORY_A 和 CATEGORY_B。

然后在知道 CATEGORY_B.ID 的情况下插入 ITEM_LIST。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T12:44:36.860

如果您的数据库设计是“正确的”，为了防止损坏，您将无法插入没有父键的子记录。

为了获得父键，无需重新查询，请阅读这篇优秀的帖子：

[http://www.mikesdotnetting.com/Article/54/Getting-the-identity-of-the-most-recently-added-record](http://www.mikesdotnetting.com/Article/54/Getting-the-identity-of-the-most-recently-added-record)

# python - 限制向用户显示某些数据

> ID：12091759
> 
> 赞同：2
> 
> 时间：2012-08-23T12:37:07.813
> 
> 标签：python, html, database, django, templates

如何限制用户可以在 Web 浏览器中查看的内容？假设用户想从数据库中检索数据但不是全部，只是少数说如果有4个数据列，用户只能查看3个？我怎样才能做到这一点？

我正在使用 Django 的基于类的视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:56:42.320

在您的视图中添加：

```
is_trusted = request.user.groups.filter(name='Trusted') 
```

将其传递给模板，并在您的模板中：

```
{% if is_trusted %} Show full table {% else %} Show simple table {% endif %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:42:19.773

您可以`defer` 在 django 查询集中使用

```
Entry.objects.defer("headline", "body") 
```

上面的查询将不包含条目表中的标题和正文列

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T12:44:18.063

如果您使用管理界面，您可以使用类的[list_display](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_display)属性`ModelAdmin`来描述要显示的字段。

对象也有类似的属性，`ModelForm`例如[exclude](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.exclude)属性。

# mysql - ORDER BY 在 GROUP BY 之前指定顺序

> ID：12091762
> 
> 赞同：1
> 
> 时间：2012-08-23T12:37:15.490
> 
> 标签：mysql, group-by, sql-order-by

在分组之前，我如何`ap_status`按此顺序对所有行进行排序？`'n', 'p', 'd', 'c', 'b', 'x'``product_id`

当您删除`GROUP BY`

```
SELECT `account_id`, `product_id`, `product_name`, `ap_status`, count(`ap_id`) as `num` 
FROM (accounts_products_view)
WHERE `account_id` = 13
/*GROUP BY `product_id`*/
ORDER BY FIELD(`ap_status`, 'n', 'p', 'd', 'c', 'b', 'x') desc 
```

所以我在查看了一些类似的问题后尝试使用`HAVING`，但是，这在小组之前都不起作用

```
SELECT account_id, product_id, product_name, ap_status, count(ap_id) as num,
CASE
WHEN ap_status = 'n' then 1
WHEN ap_status = 'p' then 2
WHEN ap_status = 'd' then 3
WHEN ap_status = 'c' then 4
WHEN ap_status = 'b' then 5
WHEN ap_status = 'x' then 6
END as `order`

FROM (accounts_products_view)
WHERE `account_id` = 13
GROUP BY product_id
HAVING `order` = MIN(`order`) 
```

非常感谢任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:50:00.640

您可能想尝试：

```
SELECT *, count(`ap_id`) as `num` FROM (
        SELECT `account_id`, `product_id`, `product_name`, `ap_status`, `ap_id`
        FROM (accounts_products_view)
        WHERE `account_id` = 13
        /*GROUP BY `product_id`*/
        ORDER BY FIELD(`ap_status`, 'n', 'p', 'd', 'c', 'b', 'x') desc
    ) as res GROUP BY product_id 
```

但请记住，这是不正确的！如果您使用 group by，那么您需要使用聚合函数，例如 SUM()，或者也指定 group by 中的字段。在您的示例中，您可能正确检索的字段是 product_id，仅此而已。由于 MySQL 错误或其他原因，您不会在此查询中遇到异常，但在 postgresql 中您会遇到异常。如果您有 2 行具有相同的 product_id 和不同的 ap_status，理论上您无法说出查询应该返回哪一行。我猜您已经知道在 MySQL 中将返回第一行，这就是为什么您要在执行 group by 之前对行进行排序的原因。请记住，这是不正确的并且非常骇人听闻。

# android - 如何在 Android 中获取真实设备型号？

> ID：12091767
> 
> 赞同：2
> 
> 时间：2012-08-23T12:37:25.043
> 
> 标签：android, device

例如，在我的 Xperia mini 手机上，

*   [Build.MODEL](http://developer.android.com/reference/android/os/Build.html#MODEL)返回**“st15i”**
*   [Build.MANUFACTURER](http://developer.android.com/reference/android/os/Build.html#MANUFACTURER)返回**“索尼爱立信”**

但我想为这款手机购买**“索尼爱立信 xperia mini” 。**

是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T12:50:07.243

对于那部特定的手机（也许对于许多其他索尼爱立信手机），您只能通过读取您提到的系统属性来获取真实的设备名称：`ro.semc.product.model`

由于`android.os.SystemProperties`类对公共 API 隐藏，因此您需要使用反射（或 exec`getprop ro.semc.product.model`命令并[获取其输出](https://stackoverflow.com/a/3772339/648313)）：

```
public String getSonyEricssonDeviceName() {
  String model = getSystemProperty("ro.semc.product.model");
  return (model == null) ? "" : model;
}

private String getSystemProperty(String propName) {
  Class<?> clsSystemProperties = tryClassForName("android.os.SystemProperties");
  Method mtdGet = tryGetMethod(clsSystemProperties, "get", String.class);
  return tryInvoke(mtdGet, null, propName);
}

private Class<?> tryClassForName(String className) {
  try {
    return Class.forName(className);
  } catch (ClassNotFoundException e) {
    return null;
  }
}

private Method tryGetMethod(Class<?> cls, String name, Class<?>... parameterTypes) {
  try {
    return cls.getDeclaredMethod(name, parameterTypes);
  } catch (Exception e) {
    return null;
  }
}

@SuppressWarnings("unchecked")
private <T> T tryInvoke(Method m, Object object, Object... args) {
  try {
    return (T) m.invoke(object, args);
  } catch (InvocationTargetException e) {
    throw new RuntimeException(e);
  } catch (Exception e) {
    return null;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:41:50.363

ST15I*是*XPeria mini 的型号代码。所以也许你应该使用`Build.DEVICE`, ord 为他们名字的各种代码建立一个对应库。

# blackberry - 如何在黑莓设备菜单项上显示我们的应用程序图标？

> ID：12091768
> 
> 赞同：-1
> 
> 时间：2012-08-23T12:37:27.667
> 
> 标签：blackberry, cordova

我开发了一个 phonegap blackberry 应用程序。

我得到了签名密钥并成功安装到黑莓设备上。

但是当我关闭我的应用程序时，我想再次打开该应用程序意味着，该应用程序图标不在我的黑莓设备中。但它显示在模拟器上。

那么，如何在我的黑莓设备菜单项中显示该图标？

请告诉我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T16:00:44.153

图标文件应在项目的资源文件夹中提供。根据您打包应用程序的方式，如果使用 Webworks SDK，该图标将在您自己创建的 zip 文件中提供，或者该 zip 文件由 Ripple 创建。

这取决于您使用的操作系统以及将应用程序放置在何处、OS 5.0 的下载以及其他操作系统的所有应用程序，您将在此处看到图标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T09:27:40.220

如果您在 Eclipse 中开发应用程序，则需要转到 Blackberry_App_Descriptor.xml 并在该 Blackberry_App_Descriptor.xml 页面中选择，在应用程序图标中添加图像，这将是您的应用程序图标。现在去 BB 设备上的下载并找到您的应用程序图标，单击它以启动您的应用程序

# asp.net-mvc-3 - 如何将参数发送到 MVC3 动作？

> ID：12091770
> 
> 赞同：0
> 
> 时间：2012-08-23T12:37:31.737
> 
> 标签：asp.net-mvc-3, textbox, submit

我`<a>`在并排标签中有 texbox 和按钮（标签）`<li>`：

```
<li>
    @Html.TextBox( "keyword", "", new { @placeholder = "Search", @class = "inputclass" } )
</li>
<li>
  <a href="@Url.Action( "Index", "Home", new { keyword = ?????? } )" >
     <img src="@Url.Content( "~/Content/images/search.png" )"  width = "83px"  height="29px"  />
     <p class="searchClass">Search</p>
  </a>
</li> 
```

索引操作具有关键字参数。何将文本框中的关键字发送到索引操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:05:57.880

```
<li>
    @Html.TextBox( "keyword", "", new { @placeholder = "Search", @class = "inputclass" } )
</li>
<li>
  <a href="javascript:send();" >
     <img src="@Url.Content( "~/Content/images/search.png" )"  width = "83px"  height="29px"  />
     <p class="searchClass">Search</p>
  </a>
</li>

<script type="text/javascript">
function send(){
    var textboxValue = $('input[name=keyword]').val();
    window.location.href = "/Home/Index?keyword=" + textboxValue;
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T12:50:11.823

将文本框放在表单中，并让链接将表单提交给您感兴趣的操作方法。查看@html.BeginForm 以获取指针。

# jquery - Struts 2 / JQuery：在单个复选框上禁用和启用复选框

> ID：12091776
> 
> 赞同：0
> 
> 时间：2012-08-23T12:37:47.660
> 
> 标签：jquery, checkbox, struts2

我在基于一个复选框按钮禁用/启用一组复选框时遇到问题。我正在使用带有 JQuery 的 struts 2。我有 9 个复选框：

```
<tr>
  <td><s:checkbox id="chkMain" name="Anywhere"/><s:property value="getPositionLabel('ANYWHERE')" /></td>
</tr>
<tr>
  <td><s:checkbox name="system"/><s:property value="getPositionLabel('SYSTEM')" /></td>             
  <td><s:checkbox name="author"/><s:property value="getPositionLabel('AUTHER')" /></td>
</tr>
<tr>
  <td><s:checkbox name="function"/><s:property value="getPositionLabel('FONCTION')" /></td>
  <td><s:checkbox name="reference"/><s:property value="getPositionLabel('REFERENCE')" /></td>
</tr>
<tr>
  <td><s:checkbox name="constructor"/><s:property value="getPositionLabel('CONSTRUCTOR')" /></td>                                                     
  <td><s:checkbox name="content"/><s:property value="getPositionLabel('CONTENT')" /></td>
</tr>
<tr>
  <td><s:checkbox name="materiel"/><s:property value="getPositionLabel('MATERIEL')" /></td>
  <td><s:checkbox name="title"/><s:property value="getPositionLabel('TITLE')" /></td> 
  <td>&nbsp;</td>
</tr> 
```

当复选框按钮“任何地方”被选中时，所有其他复选框都被禁用。并且当它被取消选择时，所有其他复选框都被启用。

如何使用 jquery 实现这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:45:09.183

试试这个，虽然没有测试

```
$("#chkMain").click(function()
{
     $('input[type="checkbox"]').not(this).attr("disabled", this.checked);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:43:03.023

像这样的东西：

```
$("#chkMain").click(function() {
    $('input[type="checkbox"]').not(this).prop("disabled", this.checked);
}); 
```

也就是说，当`chkMain`单击 时，选中页面上*除此之外*的所有复选框，并将其禁用属性设置为与 的选中状态匹配`chkMain`。

如果您在页面上有其他不属于此功能的复选框，您需要使选择器更加具体，例如，如果相关的复选框都在某个包含对象（例如该表）中：

```
$('#idOfTable input[type="checkbox"]').not(this).prop("disabled", this.checked); 
```

或者你可以给他们一个共同的类，在这种情况下你可以省略这`.not(this)`部分：

```
$('input.someClass').prop("disabled", this.checked); 
```

# sql - 结合多个计数

> ID：12091779
> 
> 赞同：1
> 
> 时间：2012-08-23T12:38:11.137
> 
> 标签：sql, join, count

我正在尝试将这组`queries`. 我已经完成了搜索，但我`queries`有一些`joins`，它变得越来越复杂，有人可以帮忙吗？

```
select count(DISTINCT p.products_id) as count  from (products p)
                            join (products_to_categories p2c)
                              on (p.products_id = p2c.products_id)
                            left join (specials s)
                              on (p.products_id = s.products_id)
                            left join (products_attributes pa)
                              on (p.products_id = pa.products_id)
                            left join (products_options_values pv)
                              on (pa.options_values_id = pv.products_options_values_id)
                            left join (products_stock ps)
                              on (p.products_id=ps.products_id and pv.products_options_values_id = ps.products_options_values_id2)        
                                                 INNER JOIN products_specifications ps10 ON p.products_id = ps10.products_id  INNER JOIN products_specifications ps17 ON p.products_id = ps17.products_id  where p.products_status = '1' and ps.products_stock_quantity>0   and p2c.categories_id in (72,1,23,47,48,49,74,24,33,34,35,77,25,46,45,44,40,41,42,43,76,78,83,50,52,81,79,2,54,60,82,53,57,58,55,61,62,63,75,56,64,65,66,67,68,69,70,71,84,80)  AND ps10.specification in ('Meisje') AND ps10.specifications_id = '10'
                      AND ps10.language_id = '1'
                       and products_options_values_name in ( 80,"18M/80cm","8-12 mnd","9m","12m","9-12m","9M","12M" )  AND ps17.specification in ('Overhemd', 'Polo') AND ps17.specifications_id = '17'
                      AND ps17.language_id = '1' 
```

* * *

```
select count(DISTINCT p.products_id) as count  from (products p)
                            join (products_to_categories p2c)
                              on (p.products_id = p2c.products_id)
                            left join (specials s)
                              on (p.products_id = s.products_id)
                            left join (products_attributes pa)
                              on (p.products_id = pa.products_id)
                            left join (products_options_values pv)
                              on (pa.options_values_id = pv.products_options_values_id)
                            left join (products_stock ps)
                              on (p.products_id=ps.products_id and pv.products_options_values_id = ps.products_options_values_id2)        
                                                 INNER JOIN products_specifications ps10 ON p.products_id = ps10.products_id  INNER JOIN products_specifications ps17 ON p.products_id = ps17.products_id  where p.products_status = '1' and ps.products_stock_quantity>0   and p2c.categories_id in (72,1,23,47,48,49,74,24,33,34,35,77,25,46,45,44,40,41,42,43,76,78,83,50,52,81,79,2,54,60,82,53,57,58,55,61,62,63,75,56,64,65,66,67,68,69,70,71,84,80)  AND ps10.specification in ('Jongen') AND ps10.specifications_id = '10'
                      AND ps10.language_id = '1'
                       and products_options_values_name in ( 80,"18M/80cm","8-12 mnd","9m","12m","9-12m","9M","12M" )  AND ps17.specification in ('Overhemd', 'Polo') AND ps17.specifications_id = '17'
                      AND ps17.language_id = '1' 
```

* * *

```
select count(DISTINCT p.products_id) as count  from (products p)
                            join (products_to_categories p2c)
                              on (p.products_id = p2c.products_id)
                            left join (specials s)
                              on (p.products_id = s.products_id)
                            left join (products_attributes pa)
                              on (p.products_id = pa.products_id)
                            left join (products_options_values pv)
                              on (pa.options_values_id = pv.products_options_values_id)
                            left join (products_stock ps)
                              on (p.products_id=ps.products_id and pv.products_options_values_id = ps.products_options_values_id2)        
                                                 INNER JOIN products_specifications ps10 ON p.products_id = ps10.products_id  INNER JOIN products_specifications ps17 ON p.products_id = ps17.products_id  where p.products_status = '1' and ps.products_stock_quantity>0   and p2c.categories_id in (72,1,23,47,48,49,74,24,33,34,35,77,25,46,45,44,40,41,42,43,76,78,83,50,52,81,79,2,54,60,82,53,57,58,55,61,62,63,75,56,64,65,66,67,68,69,70,71,84,80)  AND ps10.specification in ('Unisex') AND ps10.specifications_id = '10'
                      AND ps10.language_id = '1'
                       and products_options_values_name in ( 80,"18M/80cm","8-12 mnd","9m","12m","9-12m","9M","12M" )  AND ps17.specification in ('Overhemd', 'Polo') AND ps17.specifications_id = '17'
                      AND ps17.language_id = '1' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T04:49:55.400

好的，您的查询包含一些冗余，因为它们连接了在 select 和 where 子句中都未使用的表。我在下面的解决方案中删除了这些。我还重新组织了剩余的连接，将所有强制连接放在任何可选连接之前。

```
select ps10.specification, count(DISTINCT p.products_id) as [count]
from products p
  join products_to_categories p2c on p.products_id = p2c.products_id
  join products_specifications ps10 ON p.products_id = ps10.products_id  
  join products_specifications ps17 ON p.products_id = ps17.products_id  
  left join products_stock ps on p.products_id=ps.products_id and pv.products_options_values_id = ps.products_options_values_id2
where p.products_status = '1' and ps.products_stock_quantity > 0 
  and p2c.categories_id in (72,1,23,47,48,49,74,24,33,34,35,77,25,46,45,44,40,41,42,43,76,78,83,50,52,81,79,2,54,60,82,53,57,58,55,61,62,63,75,56,64,65,66,67,68,69,70,71,84,80)
  and ps10.specification in ('Meisje', 'Jongen', 'Unisex') 
  and ps10.specifications_id = '10'
  and ps10.language_id = '1'
  and products_options_values_name in ( 80,"18M/80cm","8-12 mnd","9m","12m","9-12m","9M","12M")
  and ps17.specification in ('Overhemd', 'Polo') 
  and ps17.specifications_id = '17'
  and ps17.language_id = '1' 
GROUP BY ps10.specification
ORDER BY ps10.specification 
```

这将产生以下输出：

```
specification | count
Jongen          93
Maisje          245
Unisex          36 
```

（好吧，数字可能有点假）

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:56:25.893

我想出了这个，似乎工作

输出是

```
count1   count2   count3
------------------------
  10        0        2 
```

@john bingham“您的查询包含一些冗余”

你能帮我减少这个查询的冗余吗？

```
select 
    count(DISTINCT if(ps10.specification in ('Meisje'),p.products_id,NULL)) as count1,
    count(DISTINCT if(ps10.specification in ('Jongen'),p.products_id,NULL)) as count2,
    count(DISTINCT if(ps10.specification in ('Unisex'),p.products_id,NULL)) as count3
from 
    (products p)
join 
    (products_to_categories p2c) on (p.products_id = p2c.products_id)
left join 
    (specials s) on (p.products_id = s.products_id)
left join 
    (products_attributes pa) on (p.products_id = pa.products_id)
left join 
    (products_options_values pv) on (pa.options_values_id = pv.products_options_values_id)
left join 
    (products_stock ps) on (p.products_id = ps.products_id 
                        and pv.products_options_values_id = ps.products_options_values_id2)       
inner join
    products_specifications ps10 ON p.products_id = ps10.products_id  
where 
    p.products_status = '1' 
    and ps.products_stock_quantity > 0   
    and p2c.categories_id in (72,1,23,47,48,49,74,24,33,34,35,77,25,46,45,44,40,41,42,43,76,78,83,50,52,81,79,2,54,60,82,53,57,58,55,61,62,63,75,56,64,65,66,67,68,69,70,71,84,80)  
    and ps10.specifications_id = '10'
    and ps10.language_id = '1' 
```

# ios - GridFS 不能很好地配合 AfNetworking 或远程下载图像

> ID：12091785
> 
> 赞同：0
> 
> 时间：2012-08-23T12:38:21.083
> 
> 标签：ios, mongodb, afnetworking, gridfs

我有一个使用 GridFS 存储文档图像（参考）的应用程序。当显示 UITableViewCell 时，我正在尝试使用 AfNetworking 下载图像。然而，AFNetworking 没有处理以二进制形式存储的图像数据的方法，即它要求服务器上的物理 URL。请参阅图像下载下的 (https://github.com/AFNetworking/AFNetworking/wiki/Getting-Started-with-AFNetworking)。我真的需要使用 AFNetworking 方法进行缓存等。

有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T16:48:37.003

GridFS 是一个文件系统。如果您想通过 HTTP 提供图像，这是 AFNetworking 可以处理的，您需要将其设置为 Web 服务器。

Apache 和 Nginx 似乎都有服务器 GridFS 的模块，所以这是一个很好的起点。

# java - Eclipse 找不到 java.rmi.Remote 类

> ID：12091791
> 
> 赞同：2
> 
> 时间：2012-08-23T12:38:48.747
> 
> 标签：java, android, eclipse, rmi, classnotfoundexception

这有点奇怪。

使用最新的 Eclipse Juno 版本，我正在尝试连接到 .NET Web 服务。通过内置向导，我已连接到 WSDL，它在我的项目中生成了一个包含 java 源文件的 java 包。

但是在其中一个中，我得到了错误`java.rmi.Remote cannot be resolved to a type`

示例：向导为我生成了以下行：

```
public java.rmi.Remote getPort(Class serviceEndpointInterface) throws javax.xml.rpc.ServiceException {
    //a bunch of code here...

    return _stub;
} 
```

每当我尝试时`import java.rmi.Remote;`，我都会收到以下错误：

`The import java.rmi.Remote cannot be resolved`

我正在使用 Java v1.6。

哦，我正在开发一个安卓应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:16:52.083

据我所知，Java.rmi 不幸没有随 Android 提供，因此无法使用它。

编辑：可以将所有 rmi 类打包到一个 jar 文件中，并在您的应用程序中使用这个 jar 文件。[这在这里](https://stackoverflow.com/questions/5321906/how-to-find-the-jar-of-java-rmi-package)讨论过

# ruby-on-rails - Capybara：如何使用单元格中包含的标签查找文本

> ID：12091793
> 
> 赞同：1
> 
> 时间：2012-08-23T12:38:52.773
> 
> 标签：ruby-on-rails, cucumber, label, capybara

我有一个像这样的单元格的表格：

```
<td colspan="2">
  <label for="stammdaten_bundesland_id">Bundesland</label>
  Nordrhein-Westfalen
</td> 
```

如何使用标签访问 td 中的文本？

我想迈出一步：

```
I should see "Nordrhein-Westfalen" within cell with label for "stammdaten_bundesland_id" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:56:48.200

我认为应该这样做：

```
Then /^I should see "([^"]*)" within the cell with label for "([^"]*)"$/ do |text, label|
  page.should have_xpath("//td[./label[@for=\"#{label}\"]]", :text => text)
end 
```

# apex-code - Apex:Datalist 显示空结果

> ID：12091794
> 
> 赞同：2
> 
> 时间：2012-08-23T12:38:55.240
> 
> 标签：apex-code, visualforce, force.com

我正在尝试显示来自自定义对象的行列表`datalist`。

当我在常规对象上尝试此操作时，它似乎可以工作，这很奇怪。

**控制器**

```
 List<Account> accounts;
     public List<Account> getAccounts() {
        if(accounts == null) accounts = [select id from Account limit 10];
        return accounts;
     } 
```

**视觉力量**

```
 <apex:dataList value="{!accounts}" var="account" id="theList">
        <apex:outputText value="{!account.id}"/> 
     </apex:dataList> 
```

这就像以前一样工作，它显示所有帐户的 ID。当我使用自定义对象时，我得到一个空的项目符号列表。喜欢：

![空列表](../Images/ee64e242b2667eb0811e5b2321476c67.png)

这有正确数量的子弹（有 3 个项目）。

**我的控制器现在是这个**

```
 List<AttributeMeetingroomAssociation__c> accounts;
     public List<AttributeMeetingroomAssociation__c> getAccounts() {
        if(accounts == null) accounts = [select id from AttributeMeetingroomAssociation__c limit 10];
        return accounts;

     } 
```

`[select id from AttributeMeetingroomAssociation__c limit 10]`当我在 salesforce.schema 中使用它们时给出 3 个正确的结果

有人有解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T20:38:58.870

您将需要使用`<apex:column>`标签来显示结果。例如：

```
<apex:dataTable value="{!opportunities}" var="o">
    <apex:column>
        <apex:outputText value="{!o.Name}"/>
    </apex:column>
</apex:dataTable> 
```

没有`apex:column`显示没有数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-13T06:11:16.873

如果您在开发站点，请在现场检查您的 FLS（现场级别安全）。转到设置 > 开发 > 站点 > 站点标签 > 公共访问设置 > 滚动到自定义字段级别安全性 > 对象名称 [查看] > 编辑。检查他们应该有权访问的所有字段的“可见”标记并保存。

# clone - 三个 js - 克隆着色器并更改统一值

> ID：12091795
> 
> 赞同：11
> 
> 时间：2012-08-23T12:38:55.860
> 
> 标签：clone, shader, textures, webgl, three.js

我正在创建一个着色器来生成带有阴影的地形。

我的出发点是克隆 Lambert 着色器并使用 ShaderMaterial 最终使用我自己的脚本对其进行自定义。

标准方法效果很好：

```
var material = new MeshLambertMaterial({map:THREE.ImageUtils.loadTexture('images/texture.jpg')});

var mesh = new THREE.Mesh(geometry, material);

etc 
```

结果： ![标准朗伯材料的结果](../Images/bc5a0cee510d2770b5c69c21c524fe53.png)

但是我想使用兰伯特材料作为基础并在其上工作，所以我尝试了这个：

```
var lambertShader = THREE.ShaderLib['lambert'];
var uniforms = THREE.UniformsUtils.clone(lambertShader.uniforms);

var texture = THREE.ImageUtils.loadTexture('images/texture.jpg');
uniforms['map'].texture = texture;

var material = new THREE.ShaderMaterial({
    uniforms: uniforms,
    vertexShader: lambertShader.vertexShader,
    fragmentShader: lambertShader.fragmentShader,
    lights:true,
    fog: true
});

var mesh = new THREE.Mesh(geometry, material); 
```

这个结果： ![克隆 Lambert 着色器和更改地图制服的结果](../Images/956db7eae740c798b8b3c51d996f8f3d.png)

看起来着色器没有考虑我添加的新纹理，但是当我记录制服时查看检查器，地图对象具有正确的值。

我对三个人还很陌生，所以我可能会做一些根本错误的事情，如果有人能在这里指出我正确的方向，那就太好了。

如果有帮助，我也可以提供演示链接？

谢谢，威尔

编辑：

这里有一些演示链接。

带有着色器材质的演示：http: [//dev.thinkjam.com/experiments/threejs/terrain/terrain-shader-material.html](http://dev.thinkjam.com/experiments/threejs/terrain/terrain-shader-material.html)

带有工作兰伯特材料的演示：http: [//dev.thinkjam.com/experiments/threejs/terrain/terrain-lambert-material.html](http://dev.thinkjam.com/experiments/threejs/terrain/terrain-lambert-material.html)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T00:28:49.843

这不起作用的原因是默认的 Three.js 兰伯特着色器使用预处理器宏指令`#ifdef`来确定是否使用贴图、环境贴图、光照贴图等。

Three.js WebGLRenderer 设置适当的预处理器指令 ( `#define`) 以根据材质对象上是否存在某些属性来启用这些着色器。

如果您打算采用克隆和修改默认着色器的方法，则必须在材质上设置相关属性。对于纹理贴图，Three.js WebGLRenderer.js 有这一行：

```
parameters.map ? "#define USE_MAP" : "" 
```

所以尝试设置`material.map = true;`你的着色器材质。

当然，如果您知道要编写自己的着色器，并且不需要动态包含各种着色器片段，则可以显式地编写着色器，您无需担心这一点。

# delphi - 如何更改 TComboBox 的下拉列表？

> ID：12091796
> 
> 赞同：1
> 
> 时间：2012-08-23T12:38:56.940
> 
> 标签：delphi, tcombobox

我有一个 TComboBox，我想更改它的下拉列表并将其替换为我自己的控件（TYazTreeList）

最简单的方法是什么？

我想从 TComboBox 继承一个新控件（我们称之为 TYazComboBox）

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:48:11.647

`TComboBox`从 Windows[公共控件库](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773169)中继承 Microsoft Windows 的[`COMOBOX`窗口类](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775791)。提供下拉列表，因此您应该替换它，或者完全编写您的类（某些第 3 方 Delphi 控件供应商所做的）。两种选择都很难。`COMBOBOX``TYazComboBox`

# html - 如何将 AIR 应用程序中的 AS3 字符串传递到在 HTML 组件中打开的 HTML 页面？

> ID：12091803
> 
> 赞同：1
> 
> 时间：2012-08-23T12:39:28.063
> 
> 标签：html, actionscript-3, air, kiosk, virtual-keyboard

我已经构建了一个完整的 AIR 信息亭全屏工作，并包括我自己设计和开发的用于文本输入的虚拟键盘。它找到具有焦点的当前 textInput 并添加字母或从我的键盘组件触发的自定义事件中删除它们。

现在我的客户想要加载一些 html 页面。我使用效果很好的 HTML 组件，除了当用户启用对 html 文本输入的关注（如在 www.google.com 中）时，我的键盘显然无法使用它。

我想除了完整的 AS3 和 MXML 代码之外，我还需要一些 javascript。

任何想法如何将字符串从 AIR 应用程序传递到有焦点的 html 文本输入？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T16:00:30.980

答案在 Html.htmlLoader.window.document.activeElement 中

非常感谢密歇根！

[http://www.indieas.org/2009/11/onscreen-keyboard-with-air/](http://www.indieas.org/2009/11/onscreen-keyboard-with-air/)

# database - 如何找出当前正在使用 ms 访问数据库的用户

> ID：12091812
> 
> 赞同：0
> 
> 时间：2012-08-23T12:40:16.053
> 
> 标签：database, vba, ms-access-2010

我想知道是否有办法找出与我共享数据库的人的用户名。

我知道我可以使用 environ("UserName") 调用来获取我自己的用户名，但我想知道数据库中还有谁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:43:01.103

此示例子程序使用特定于提供程序的模式，将列出用户。您需要传递一个有效的连接，例如：

```
ADOUserList Currentproject.Connection

  Public Sub ADOUserList(oConn As ADODB.Connection)
  Dim rs As ADODB.Recordset
      Set rs = oConn.OpenSchema(adSchemaProviderSpecific, , _
          "{947bb102-5d43-11d1-bdbf-00c04fb92675}")
      Debug.Print rs.GetString
      rs.Close
  End Sub 
```

返回的字段是：

```
COMPUTER_NAME
LOGIN_NAME
CONNECTED
SUSPECT_STATE 
```

# c++ - 受内联构造函数影响的对 vtable 错误的未定义引用

> ID：12091816
> 
> 赞同：5
> 
> 时间：2012-08-23T12:40:29.140
> 
> 标签：c++, constructor, compiler-errors, g++, vtable

虽然还有其他关于堆栈溢出的问题处理“未定义对 vtable 的引用”错误消息。以下代码编译或不编译取决于无参数构造函数 C() 是否内联实现。我知道成员函数 m() 应该是纯虚拟的，这将是为了解决问题而做出的正确更改。令我困惑的是，它可以通过明显不相关的更改进行编译。

以下代码不能使用 g++ 编译（在 ubuntu 64 位上为 4.6.3）并产生预期的“未定义对 C 的 vtable 的引用”消息（考虑到问题出在 m() 上，这仍然是一个可怕的错误消息）

头文件.h

```
#ifndef HEADER_H
#define HEADER_H

class C
{
  public:
    C();
    virtual void m();
};

#endif 
```

实现.cpp

```
#include "Header.h"
C::C() {} 
```

主文件

```
#include "Header.h"
int main()
{
   return 0;
} 
```

**以下不相关的更改允许编译：**

*   从 Implementation.cpp 中删除 C::C() 的非内联实现
*   将 C() 的简单内联实现添加到 Header.h 中的类

为什么这允许编译？这是编译器错误、优化器问题还是标准惊喜的黑暗角落？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T13:34:56.430

> 这是编译器错误、优化器问题还是标准惊喜的黑暗角落？

以上都不是。这不是错误，与优化无关，而且这个特定问题超出了标准的范围，它被相关的[ABI](http://codesourcery.com/cxx-abi/)所涵盖（这只是一个事实上的标准。）

`C::m`是[关键函数](http://gcc.gnu.org/wiki/VerboseDiagnostics#missing_vtable)，您还没有在任何地方定义它，这意味着编译器不会发出 vtable。

代码与这些更改一起编译有很好的（如果复杂的话）原因：

> *   从 Implementation.cpp 中删除 C::C() 的非内联实现

[由于ABI文档2.6](http://mentorembedded.github.com/cxx-abi/abi.html#vtable-ctor)中描述的一些复杂的原因，在构建时需要vtables。因此，构造函数的定义创建了对 vtable 的引用，链接器会告诉您在链接时缺少该引用。如果删除构造函数的定义，则没有对 vtable 的引用。

> *   将 C() 的简单内联实现添加到 Header.h 中的类

未在给定翻译单元中调用的内联函数不会在目标文件中发出，因此使函数内联意味着构造函数不在目标文件中，因此目标文件不引用 vtable，并且链接器不需要在链接时查找它。

如果您更改程序以便实际使用内联构造函数（例如通过创建`C`in `main`），那么您将再次得到相同的链接器错误，因为现在将在 in 中定义内联构造`Main.o`函数，因此需要 vtable。

```
class C
{
  public:
    C() { }  // inline
    virtual void m();
};

int main()
{
    C c;
} 
```

# jquery - WordPress jQuery 附加图片

> ID：12091817
> 
> 赞同：0
> 
> 时间：2012-08-23T12:40:35.163
> 
> 标签：jquery, wordpress

我正在尝试使用 jQuery 附加图像，但遇到了一个奇怪的问题。

（请忽略 '+num+' 因为这是循环的一部分）

```
var image   = jQuery("#Slide_image"+num).val();
jQuery('img[name="image_'+num+'_data"]').attr("src","http://www.prelovac.com/vladimir/wp-content/uploads/2008/03/example.jpg"); 
```

上面的工作正常，下面的不行：

```
var image   = jQuery("#Slide_image"+num).val();
jQuery('img[name="image_'+num+'_data"]').attr("src",image); 
```

HTML

```
<tr>
  <td>Image:</td>
    <td>
        <input type="text" size="36" name="SlideShow_0_image" value="" />
        <input id="upload_image_button" type="button" value="Upload Image" />
        <img style="float:right;" name='image_0_data' src=''  width='70' height='70' />
        <br />Enter an URL or upload an image for the banner.
    </td>
</tr> 
```

即使图像变量包含相同的文本

谁能解释为什么？

谢谢伊莱

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:07:18.170

我不是 100% 确定问题出在哪里，但它现在已修复，它可能与缓存有关。

谢谢你的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T21:28:02.510

可能名为 image 的变量不是 URL ... ID 为 #Slide_image1 的元素在此 HTML 摘录中不可见！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T21:07:53.970

```
var image   = jQuery("#Slide_image"+num).val(); 
```

应该

```
var image   = jQuery('input[name="SlideShow_'+num+'_image"]').val(); 
```

When a selector starts with a `#`it is looking for an ID.

# c# - Winforms，按表单名称创建表单实例

> ID：12091818
> 
> 赞同：3
> 
> 时间：2012-08-23T12:40:38.267
> 
> 标签：c#, winforms

我需要一个通过表单名称返回表单新实例的方法。这是我到目前为止所拥有的：

```
 public Form GetFormByName(string frmname)
    {
        return Assembly.GetExecutingAssembly().GetTypes().Where(a => a.BaseType == typeof(Form) && 
            a.Name == frmname).Cast<Form>().FirstOrDefault();
    } 
```

但是，当我尝试执行此代码时出现以下错误：

**无法将“System.RuntimeType”类型的对象转换为“System.Windows.Forms.Form”类型。**

这个错误是什么意思？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-23T12:42:05.613

您需要[Activator.CreateInstance](http://msdn.microsoft.com/en-us/library/wccyzw83.aspx)方法，该方法创建给定类型的实例`Type`：

```
public Form TryGetFormByName(string frmname)
{
    var formType = Assembly.GetExecutingAssembly().GetTypes()
        .Where(a => a.BaseType == typeof(Form) && a.Name == frmname)
        .FirstOrDefault();

    if (formType == null) // If there is no form with the given frmname
        return null;

    return (Form)Activator.CreateInstance(formType);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:43:02.837

```
Assembly asm = typeof(EnterHereTypeInTheSameAssembly).Assembly;
Type type = asm.GetType(name);
Form form = (Form)Activator.CreateInstance(type); 
```

# php - 如何重新索引多维数组？

> ID：12091824
> 
> 赞同：0
> 
> 时间：2012-08-23T12:41:08.077
> 
> 标签：php, array-difference

我正在使用这个函数来计算 2 个多维数组之间的差异：

```
/**
 * http://www.php.net/manual/en/function.array-diff.php#91756
 * @param $array1
 * @param $array2
 * @return array
 */

function arrayRecursiveDiff($array1, $array2){
    $aReturn = array();

    foreach ($array1 as $mKey => $mValue) {
        if (array_key_exists($mKey, $array2)) {
            if (is_array($mValue)) {
                $aRecursiveDiff = arrayRecursiveDiff($mValue, $array2[$mKey]);
                if (count($aRecursiveDiff)) { $aReturn[$mKey] = $aRecursiveDiff; }
            } else {
                if ($mValue != $array2[$mKey]) {
                    $aReturn[$mKey] = $mValue;
                }
            }
        } else {
            $aReturn[$mKey] = $mValue;
        }
    }
    return $aReturn;
} 
```

它工作得很好，只有一个小问题：

```
array(2) {
  ["installed"]=>
  array(3) {
    [3]=>
    string(9) "somevalue1"
    [4]=>
    string(7) "somevalue2"
    [5]=>
    string(5) "somevalue3"        
  }
  ["backend"]=>
  array(1) {
    ["preload"]=>
    array(2) {
      [0]=>
      string(7) "somevalue4"
      [1]=>
      string(10) "somevalue5"
    }
  }
} 
```

如您所见，必须重新索引“已安装”的子数组。事实上，我需要递归地重新索引这个数组（或者更好的是，我需要 arrayRecursiveDiff 函数来返回一个正确索引的数组）。我尝试了不同的方法，但现在似乎我的大脑被炸了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:12:38.807

也许这个功能会解决你的问题

```
var_dump(array_map("array_values",arrayRecursiveDiff($a,$b))); 
```

编辑：这个保留非数字索引：

```
var_dump(array_map(create_function('$x','$k = key($x); return (is_numeric($k)) ? array_values($x) : $x;'),$aDiff)); 
```

请注意，此函数仅适用于 2 级数组重新索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:51:24.313

试试这个。排序功能将帮助您

```
 $array = array (
  "installed"=>
  array (     
    3 =>     "somevalue1",
    4 =>     "somevalue2",
    5 =>     "somevalue3"
  ),
  "backend"=>
  array (
    "preload"=>
    array(
      0=>
      "somevalue4",
      1=>
      "somevalue5"
    )
  )
);
var_dump($array);
sort($array['installed']);
var_dump($array); 
```

遍历变量并使用排序，这将帮助您递归。

```
foreach($array as $tmparray){
   $newArray = sort($tmparray);
var_dump($newArray);
} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-23T12:46:38.390

您可以像这样重新索引数组：`$arr = array_values($arr);`

我会发布代码以递归地重新索引，但这并不难，您应该自己尝试然后在此处发布代码。

# c# - 在 winforms TextBox 中引发 OnTextChanged 事件

> ID：12091826
> 
> 赞同：0
> 
> 时间：2012-08-23T12:41:10.443
> 
> 标签：c#, winforms

如何引发一个事件，该事件将为我的文本框控件调用 OnTextChanged 重写方法？

编辑：

```
private void thebox_TextChanged(object sender, FastColoredTextBoxNS.TextChangedEventArgs e) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:53:50.063

当您发现需要尝试直接调用事件时，通常表明您正在尝试将大量逻辑填充到事件方法或事件处理程序中。调用 OnTextChanged 或直接调用事件处理程序不是一个好主意。事件被设计为基于用户交互触发，而不是在您想查看其副作用时作为常规方法调用。事实上，从您的事件方法和所有事件处理程序中移除所有重要的副作用并将它们移动到单独的方法中应该是一个设计目标。

您最好的选择是将 OnTextChanged 方法中当前发生的逻辑放在另一个方法中，并正确命名。方法名称“OnTextChanged”意味着它除了通知您文本已更改之外什么都不做。如果您需要做更多工作，请将其放入自己的方法中（例如，UpdateRelatedControls 或任何可能的方法）并从您的 OnTextChanged 事件中调用此新方法。然后，您可以公开此新方法并随时调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T15:45:01.853

`textchanged`在事件中使用逗号将数字格式化为十进制格式。这是c#中的代码

```
private void textBox8_TextChanged(object sender, EventArgs e)

    {

        //Remove previous formatting, or the decimal check will fail 

        string value = String.Format("{0:0,0.00}", double.Parse(textBox8.Text));
 // "12,345.87"

        decimal ul;
        //Check we are indeed handling a number 
        if (decimal.TryParse(value, out ul))
        {
            //Unsub the event so we don't enter a loop 
            textBox8.TextChanged -= textBox8_TextChanged;
            //Format the text as currency 
            textBox8.Text = value.ToString();
            textBox8.TextChanged += textBox8_TextChanged;
        }

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T12:50:25.713

从后面的代码中引发该事件的唯一方法是更改​​ TextBox 的 Text 属性。

请参阅[http://msdn.microsoft.com/en-us/library/aa645739(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa645739(v=vs.71).aspx) ![在此处输入图像描述](../Images/e46f8c86c79f8e95835b634b2821cb85.png)

# javascript - 组合生成器改进

> ID：12091828
> 
> 赞同：0
> 
> 时间：2012-08-23T12:41:25.787
> 
> 标签：javascript, optimization, bit-manipulation, combinations

好的，[CodeReview](https://codereview.stackexchange.com/q/14958/15086)的某个随机家伙让我把这个传到这里，就这样吧。

我有一个基于这个答案的组合生成代码：[StackOverflow answer](https://stackoverflow.com/a/10861679/617822)

基本思想是我有一组球员（总共 6 到 14 名），我需要组建 2 支球队，每支球队有 3 名球员，而其余球员正在为那场比赛休息。该代码生成所有可能的匹配项。当我需要随机选择下一场比赛设置时，问题就来了，这样球员们只会休息，如果可能的话，只有一场比赛。此外，每支球队都应该尽可能地随机化，而不是像迄今为止的任何一场比赛一样让相同的球员作为一个球队参加比赛。

为了澄清这个问题，这是一个很大的禁忌，如果我从数组中选择下一个匹配项，就会发生这种情况：

```
 Team 1 | Team 2 | Resting
Game 1: A B C    D E F    G H I J
Game 2: A B D    C E F    G H I J
Game 3: A B E    C D F    G H I J 
```

...虽然这看起来不错：

```
 Team 1 | Team 2 | Resting
Game 1: A B C    D E F    G H I J
Game 2: C G H    F I J    A B D E
Game 3: A D I    B E J    C F G H 
```

我已经修改了代码，现在我有了：

*   带位掩码的玩家
*   带位掩码的团队
*   将数组与 2 个团队和 1 个休息组匹配（每个都带有位掩码）

**问题**
鉴于这些比赛组成部分，即球员、球队和休息，都有一个掩码值，我应该如何计算下一场比赛？使用按位运算符，如何？将每个休息的球员推入一个数组，并排除那些在下一场比赛中休息的球员。我尝试了一些多阵列的东西，这完全是混乱的，结果并不好。所以，我需要一些帮助。这是我第一次处理位掩码。

**代码**

```
players: [],
teams: [],
matches: [],
Team: function () {
    this.list           = [];
    this.mask           = 0;
    this.count          = 0;
    this.full           = false;
    this.Add            = function (i) {
        this.list.push(GAME.players[i]);
        this.mask       |= GAME.players[i].mask;
        this.full       = ++this.count === 3;
    }
},

Resting: function () {
    this.list           = [];
    this.mask           = 0;
    this.count          = 0;
    this.full           = false;
    this.Add            = function (i) {
        this.list.push(GAME.players[i]);
        this.mask       |= GAME.players[i].mask;
        this.full       = ++this.count === (GAME.players.length - 2*3);
    }
},

addPlayers: function () {
    var indexes         = [],
        p,
        playersPerTeam  = 3,
        l               = playersPerTeam - 1;

    for (var p = 0; p < playersPerTeam; p += 1) {
        indexes[p] = p;
    }

    function addteam() {
        var team = new GAME.Team();

        for (var p = 0; p < playersPerTeam; p++) {
            team.Add(indexes[p]);
        }

        GAME.teams.push(team);
    }

    function addplayer(start, depth) {
        var target = GAME.players.length - playersPerTeam + depth + 1;

        for (var i = start; i < target; i++) {
            indexes[depth] = i;
            if (depth == l) {
                addteam();
            } else {
                addplayer(i + 1, depth + 1);
            }
        }
    }

    addplayer(0, 0);
}

// The code below runs during game initializing,
// before any round has started
var playerCount         = GAME.addedPlayers.length,
    i;

for (i = 0; i < playerCount; i += 1) {
    GAME.players[i] = {
        index: i,
        mask: 1 << i,
        name: GAME.addedPlayers[i].name
    };
}

GAME.addPlayers();

// The matches creation
for (var i = 0; i < GAME.teams.length; i++) {
    for (var j = i + 1; j < GAME.teams.length; j++) {
        var t1      = GAME.teams[i],
            t2      = GAME.teams[j],
            r1      = (GAME.players.length > 2*3) ? new GAME.Resting() : false;

        if ((t1.mask & t2.mask) === 0) { //this is where the masks come in
            if (r1) {
                var resting = t1.mask ^ t2.mask;

                for (var k = 0; k < GAME.players.length; k++) {
                    if ((resting & 1) === 0) {
                        r1.Add(k);
                    }
                    resting >>>= 1;
                }
            }

            GAME.matches.push({
                Team1: t1,
                Team2: t2,
                Resting: r1
            });
        }
    }
}

// The code below start a new round
// This should start a new randomly selected game described in my question
// and not like I'm doing it now
var gamesPlayed         = GAME.gamesPlayed,
    match               = GAME.matches[gamesPlayed]; 
```

# c# - 故事板从和到没有按预期工作

> ID：12091835
> 
> 赞同：0
> 
> 时间：2012-08-23T12:41:59.530
> 
> 标签：c#, wpf

谁能向我解释为什么这不起作用？我希望它从左侧滑入并从右侧滑入。它们似乎都是从左边滑动，而不是从最左边或最右边开始。

前：

```
<Storyboard x:Key="SlideInFromLeft" >
        <ThicknessAnimation Duration="0:0:.75" Storyboard.TargetProperty="Margin" From="500,0,-500,0" To="0" DecelerationRatio=".9" />
    </Storyboard>

<Storyboard x:Key="SlideInFromRight">
    <ThicknessAnimation Duration="0:0:.5" Storyboard.TargetProperty="Margin" From="0" To="-500,0,500,0" AccelerationRatio=".3"/>
</Storyboard> 
```

后：

```
<Storyboard x:Key="SlideInFromLeft" >
        <ThicknessAnimation Duration="0:0:.75" Storyboard.TargetProperty="Margin" From="1000,0,-1000,0" To="0" DecelerationRatio=".9" />
    </Storyboard>

<Storyboard x:Key="SlideInFromRight">
    <ThicknessAnimation Duration="0:0:.5" Storyboard.TargetProperty="Margin" From="0" To="-1000,0,1000,0" AccelerationRatio=".3"/>
</Storyboard> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:12:39.460

在弄乱了from和to之后，我想我已经弄清楚了。看看之前和之后。

# php - 使用 Collection 时如何向 InputFilter 添加条目？

> ID：12091839
> 
> 赞同：1
> 
> 时间：2012-08-23T12:42:17.750
> 
> 标签：php, zend-framework2

我想过滤和验证每个项目并验证整个项目以检查没有重复项。集合中有任意数量的文本输入。

```
 $this->add(array(
        'type' => 'Zend\Form\Element\Collection',
        'name' => 'aliasList',
        'options' => array(
            'label' => 'Alias',
            'count' => 2,
            'allow_add' => true,
            'target_element' => array(
                'type' => 'Zend\Form\Element\Text'
            )
        )
    )); 
```

我尝试添加下面的代码，但我非常努力地交叉手指。它显然没有用。它希望可能有一个选项，例如`'oneach' = true`。

```
 $inputFilter->add($factory->createInput(array(
        'name' => 'aliasList',
        'required' => false,
        'filters' => array(
            array('name' => 'StripTags'),
            array('name' => 'StringTrim'),
        ),
    ))); 
```

我还打算为有效 URI 添加验证器并在重复时失败。不幸的是，当我使用 ZF2 时，我想我要等很长时间才能看到另一个 ZF2 s̶u̶f̶f̶e̶r̶e̶r̶ 开发人员出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T06:15:18.983

这可能无法以 1:1 的比例解决您的问题，但您可能希望尝试通过将集合添加为字段集来解决此问题。在**大多数**情况下，您添加到集合中的任何内容都是不同的类型，因此，仅按逻辑，应该位于单独的字段集上。

因此，您可能想尝试这种方法。我假设你知道那个博客，如果不是这里有一个非常有用的链接[http://www.michaelgallego.fr/blog/?p=190](http://www.michaelgallego.fr/blog/?p=190)

```
 $this->add(array(
    'type' => 'Zend\Form\Element\Collection',
    'name' => 'categories',
    'options' => array(
        'label' => 'Please choose categories for this product',
        'count' => 2,
        'should_create_template' => true,
        'allow_add' => true,
        'target_element' => array(
            'type' => 'Application\Form\CategoryFieldset'
        )
    )
)); 
```

通过这种方式，您可以从 Fieldset 添加 Collection Elements，并且 fieldset inputFilters 和验证器将通过

```
public function getInputFilterSpecification() {} 
```

来自 Fieldset 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-10T09:03:33.677

您可以像这样使用 smt：

```
 $inputFilter = new InputFilter();
 $inputFilter->add($factory->createInput(array(
    'name' => 'aliasList',
    'required' => false,
    'filters' => array(
        array('name' => 'StripTags'),
        array('name' => 'StringTrim'),
    ),
 )));

 $collectionFilter = new CollectionInputFilter();
 $collectionFilter->setInputFilter($inputFilter); 
```

# delphi - 如何确定触发 OnLoadEnd 的加载页面对应于 LoadString 的 HTML？

> ID：12091840
> 
> 赞同：1
> 
> 时间：2012-08-23T12:42:18.280
> 
> 标签：delphi, chromium, onload-event

当我发出

```
Chromium.Browser.MainFrame.LoadString(HTML,'code_url'); 
```

似乎该`OnLoadEnd`事件有时仍会加载我以前的 HTML `LoadString`（可能正在单独加载几个帧）。

我在用

```
if not frame.IsMain then
  Exit; 
```

确保只考虑主框架`OnLoadEnd`，但在某些情况下 a`CefGetBitmap`返回先前加载的页面 (HTML) 的位图。

`OnLoadEnd`我的问题：当 ChromiumFMX 组件已经显示正确的页面时，我怎么知道被触发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T20:43:13.823

如果您对此进行编码 ChromiumFMX.Browser.MainFrame.LoadString(HTML, 'code_url');

在回调过程中 TfrmChromiumThumbnailing.ChromiumLoadEnd(Sender: TObject; const browser: ICefBrowser; const frame: ICefFrame; httpStatusCode: Integer; out Result: Boolean);

frame.url 将是“code_url”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T15:32:13.850

当 HTML 非常简洁（小）时，加载速度非常快，并且`OnLoadEnd`在 ChromiumFMX 组件更新之前触发事件。要处理 ChromiumFMX 内容，请等待该`OnLoadEnd`过程完成。例如，这可以通过等待它在循环中完成来实现。

```
procedure TfrmChromiumThumbnailing.ChromiumLoadEnd(Sender: TObject;
  const browser: ICefBrowser; const frame: ICefFrame;
  httpStatusCode: Integer; out Result: Boolean);
begin
  if (frame <> nil) and frame.IsMain then
    PageLoaded := True;
end; 
```

在其他代码中：

```
PageLoaded := False;
ChromiumFMX.Browser.MainFrame.LoadString(HTML,'code_url');
while not PageLoaded do
  Application.ProcessMessages;
<handle ChromiumFMX content> 
```

# wpf - 根据指针的位置检查单击了哪个控件

> ID：12091843
> 
> 赞同：0
> 
> 时间：2012-08-23T12:42:24.817
> 
> 标签：wpf, xaml, windows-8

我有一个弹出窗口的用户控件（它比用户控件大） 现在我想在用户单击屏幕的另一部分时隐藏弹出窗口。（标准组合框行为）我该怎么做？我试图听事件pointer_click，我可以得到坐标但是很难手动检查用户是否点击了弹出窗口（也许有办法检查那个坐标上的控件是什么？）

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:00:16.300

If this a WinRT app then simply

```
var popup = new Popup();
popup.IsLightDismissEnabled = true; 
```

If normal xaml then why not dismiss as soon as you lose focus?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:11:44.840

您有几种可能性： - 使用 VisualTree.Hittest 方法获取该点的所有控件：如果结果不包含弹出窗口，则隐藏它 - 如果您有发送者对象（或 RoutedEventArgs 对象），您可以使用 VisualTree 进行查找对于弹出窗口。(rekursiv) 如果你没有找到它 -> 隐藏它

# .net - 在标签/文本块中显示和刷新当前日期和时间

> ID：12091844
> 
> 赞同：0
> 
> 时间：2012-08-23T12:42:28.530
> 
> 标签：.net, wpf, datetime, label, textblock

是否可以在 WPF 标签/文本块中显示和刷新当前日期和时间？也许一些示例代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-29T14:55:55.003

对的，这是可能的！[我的解决方案（在自定义 WPF 组件中）与此解决方案](http://www.wpf-tutorial.com/misc/dispatchertimer/)非常相似，仅具有 XAML 中的 DependencyProperty、绑定和时间/日期格式。

CS：

```
//... 
void timer_Tick(object sender, EventArgs e)
{
    Time = DateTime.Now;
}

public DateTime Time
{
    get { return (DateTime)GetValue(TimeProperty); }
    set { SetValue(TimeProperty, value); }
}

public static readonly DependencyProperty TimeProperty = DependencyProperty.Register(nameof(Time), typeof(DateTime), typeof(ChannelOverview), new PropertyMetadata(DateTime.Now)); 
```

xml:

```
<TextBox Text="{Binding Time, StringFormat='{}{0:HH:mm}'}"/> 
```

# zend-framework - Zend 框架。模块化模式。动作不起作用

> ID：12091849
> 
> 赞同：0
> 
> 时间：2012-08-23T12:42:41.143
> 
> 标签：zend-framework, module, action

我使用现成的解决方案模块化方法 - [https://github.com/osebboy/Zend-Framework-Modules](https://github.com/osebboy/Zend-Framework-Modules)

这种方法行不通。在 url 上发布时 - 站点/注册/结果

错误：

```
Uncaught exception 'Zend_Controller_Dispatcher_Exception' with message 'Invalid controller specified (result)' 
```

有人遇到过这个问题吗？请做哪些细节使它们起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T20:27:27.017

您必须通过 /registration/index/result URL 访问该操作。如果要使用 URL，则必须使用路由器。

# bug-tracking - Mantis 已修复错误摘要，每个开发人员修复每个错误所需的时间

> ID：12091858
> 
> 赞同：1
> 
> 时间：2012-08-23T12:43:11.633
> 
> 标签：bug-tracking, mantis

我们使用 Mantis 作为我们公司的错误跟踪系统。我知道螳螂内部的错误生命周期。

我想知道是否有任何方法可以生成错误总结——开发人员已修复——修复每个错误所需的时间——对于一个项目

我有兴趣为自己生成一份报告，看看我们是否可以在项目中冒出任何模式。

谢谢！

# ios - “需要签名密钥” - 是否可以在 Windows 上使用 DreamWeaver CS6 Extended / PhoneGap 创建 iOS 应用程序？

> ID：12091868
> 
> 赞同：2
> 
> 时间：2012-08-23T12:43:45.300
> 
> 标签：ios, windows, cordova, certificate, dreamweaver

我没有 Mac，但刚刚注册了 iOS 开发人员计划，因为我知道可以在 Windows 上使用 DreamWeaver CS6 和 PhoneGap 创建 iOS 原生应用程序。

当我尝试在 DreamWeaver 中使用 PhoneGap 构建服务时，问题是它显示 iOS“需要签名密钥”。

我找到了这个页面 - [http://www.adobe.com/devnet/dreamweaver/articles/phonegap-mobile-app-pt7.html#articlecontentAdobe_numberedheader](http://www.adobe.com/devnet/dreamweaver/articles/phonegap-mobile-app-pt7.html#articlecontentAdobe_numberedheader) - 它概述了如何获取证书等，但它需要Mac .

我可以在 Mac 上使用几个小时，所以应该能够完成这个过程。但是，在那之后，我如何摆脱我的 Windows 机器上的“需要签名密钥”消息 - 或者随着我的在线 Apple iOS 开发人员资料的更新，该消息会消失吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:45:59.453

可以使用 Dreamweaver CS5.5 或 CS6，您不需要 mac book 来创建 ios 应用程序。但是如果你打算在 appstore 中部署你的应用程序，你需要一个 ios 设备或虚拟机（mac book、imac）来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T23:38:38.743

有可能的。请参阅此处的评论 - [http://www.phonegap.com/2012/04/24/adobe-dreamweaver-cs6-supports-phonegap-build/](http://www.phonegap.com/2012/04/24/adobe-dreamweaver-cs6-supports-phonegap-build/) - JustMe。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T03:54:02.857

IMO，您将无法在 Windows 机器上打包应用程序。但是您绝对仍然可以使用名为 PhoneGap Build 的在线服务来打包它，该服务会为您完成打包部分。为此，您将不需要 Mac。

# azure - Windows Azure CDN 和 *.woff 字体

> ID：12091871
> 
> 赞同：3
> 
> 时间：2012-08-23T12:44:00.433
> 
> 标签：azure, azure-cdn

我在 Azure 中将 CDN 用于我的云服务，但字体 (*.woff) 不起作用！

当我只对静态文件使用 iis 时，我解决了这个问题

```
<staticContent>
      <mimeMap fileExtension=".woff" mimeType="application/x-font-woff" />
</staticContent> 
```

（http://stackoverflow.com/questions/3594823/mime-type-for-woff-fonts）

但是我如何在 microsoft azure cdn 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T01:43:59.447

它是跨域的，所以你还需要添加：

```
<system.webServer>
 <httpProtocol>
  <customHeaders>
    <add name="Access-Control-Allow-Origin" value="*" />
    <add name="Access-Control-Allow-Methods" value="HEAD,GET,OPTIONS" />
  </customHeaders>
 </httpProtocol>
</system.webServer> 
```

# android - Android 应用程序的 Twitter 登录

> ID：12091872
> 
> 赞同：3
> 
> 时间：2012-08-23T12:44:02.167
> 
> 标签：android, login, oauth, twitter-oauth

谁能告诉我从我的 Android 应用程序执行 twitter 登录的 Open Auth 的正确步骤？还有一件事是可以在我的应用程序中对 Twitter 登录页面进行 ngng 的情况下执行 Twitter 帐户的登录身份验证吗？

Idea 是使用 twitter 帐户登录我的 android APP（身份验证）吗？

我已经尝试过了，但它是 twitter webview 进行身份验证而无需在我的应用程序中输入用户名和密码？

所以请帮助我！提前致谢 ！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2019-05-23T07:28:36.180

**应用程序设置**

```
Create App here https://developer.twitter.com/en/apps/create

Add Callback URLs to twittersdk:// (For Android SDK)

From App Details goto Keys and tokens and add in res/values/strings.xml

<string name="twitter_api_key">REPLACE_KEY</string>
<string name="twitter_api_secret">REPLACE_SECRET</string>

From App Details goto Permissions -> Edit

Access permission -> Read, write, and Direct Messages
Additional permissions -> Check to true (Request email address from users)
Save 
```

**在 AndroidManifest.xml 中添加 INTERNET 权限**

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

**将 twitter SDK 依赖添加到 build.gradle (Module:app)**

```
dependencies {
    implementation 'com.twitter.sdk.android:twitter:3.1.1'
    //implementation 'com.twitter.sdk.android:twitter-core:3.1.1'
    //implementation 'com.twitter.sdk.android:tweet-ui:3.1.1'
} 
```

**活动中**

```
private TwitterAuthClient twitterAuthClient;

Custom Button Click

TwitterConfig config = new TwitterConfig.Builder(this)
    .logger(new DefaultLogger(Log.DEBUG))
    .twitterAuthConfig(new TwitterAuthConfig(getResources().getString(R.string.twitter_api_key), getResources().getString(R.string.twitter_api_secret)))
    .debug(true)
    .build();
Twitter.initialize(config);

twitterAuthClient = new TwitterAuthClient();

TwitterSession twitterSession = TwitterCore.getInstance().getSessionManager().getActiveSession();

if (twitterSession == null) {
    twitterAuthClient.authorize(this, new Callback<TwitterSession>() {
        @Override
        public void success(Result<TwitterSession> result) {
            TwitterSession twitterSession = result.data;
            getTwitterData(twitterSession);
        }

        @Override
        public void failure(TwitterException e) {
            Log.e("Twitter", "Failed to authenticate user " + e.getMessage());
        }
    });
} else {
    getTwitterData(twitterSession);
}

private void getTwitterData(final TwitterSession twitterSession) {
    TwitterApiClient twitterApiClient = new TwitterApiClient(twitterSession);
    final Call<User> getUserCall = twitterApiClient.getAccountService().verifyCredentials(true, false, true);
    getUserCall.enqueue(new Callback<User>() {
        @Override
        public void success(Result<User> result) {

            String socialId = "", firstName = "", lastName = "", gender = "", birthday = "", email = "", picture = "";

            User user = result.data;
            socialId = user.idStr;
            email = user.email;
            /*picture = user.profileImageUrlHttps.replace("_normal", "");
            firstName = user.name;
            lastName = user.screenName;*/

            try {
                firstName = user.name.split(" ")[0];
                lastName = user.name.split(" ")[1];
            } catch (Exception e) {
                firstName = user.name;
                lastName = "";
            }

            Log.e("Twitter", "SocialId: " + socialId + "\tFirstName: " + firstName + "\tLastName: " + lastName + "\tEmail: " + email);
        }

        @Override
        public void failure(TwitterException exception) {
            Log.e("Twitter", "Failed to get user data " + exception.getMessage());
        }
    });
}

@Override
protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (twitterAuthClient != null) {
        twitterAuthClient.onActivityResult(requestCode, resultCode, data);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:57:00.473

您必须将`Twitter OAuth`用于您的应用程序的身份验证。
示例`twitter OAuth`描述[**`here`**](http://honza.ca/2010/09/how-to-use-twitter-oauth-on-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-14T13:35:20.873

它帮助我将 Twitter 集成到 android 应用程序中。

这是适用于 Android 的官方 Twitter 工具包（Twitter SDK）

检查此链接[https://dev.twitter.com/twitterkit/android/installation](https://dev.twitter.com/twitterkit/android/installation)

```
dependencies {
// Include all the Twitter APIs
compile 'com.twitter.sdk.android:twitter:3.0.0'
// (Optional) Monetize using mopub
compile 'com.twitter.sdk.android:twitter-mopub:3.0.0'
}

repositories {
  jcenter()
 }

public class CustomApplication {
  public void onCreate() {
   TwitterConfig config = new TwitterConfig.Builder(this)
       .logger(new DefaultLogger(Log.DEBUG))
       .twitterAuthConfig(new TwitterAuthConfig("CONSUMER_KEY",   "CONSUMER_SECRET"))
    .debug(true)
 .build();
Twitter.initialize(config);
}
} 
```

在您的布局中，使用以下代码添加一个登录按钮：

```
<com.twitter.sdk.android.core.identity.TwitterLoginButton
 android:id="@+id/login_button"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content" /> 
```

在活动中

```
loginButton = (TwitterLoginButton) findViewById(R.id.login_button);
loginButton.setCallback(new Callback<TwitterSession>() {
 @Override
 public void success(Result<TwitterSession> result) {
    // Do something with result, which provides a TwitterSession for making API calls
 }

 @Override
 public void failure(TwitterException exception) {
     // Do something on failure
  }
 });

@Override
protected void onActivityResult(int requestCode, int resultCode,   Intent data) {
  super.onActivityResult(requestCode, resultCode, data);

  // Pass the activity result to the login button.
  loginButton.onActivityResult(requestCode, resultCode, data);
} 
```

# javascript - 如果输入与其模式属性不匹配，是否可以使用 CSS 或 JavaScript 访问出现的弹出窗口？

> ID：12091873
> 
> 赞同：4
> 
> 时间：2012-08-23T12:44:02.350
> 
> 标签：javascript, html, css

我正在使用模式属性，当然，尝试`form`使用故意与所需模式不匹配的字符串提交，给定 HTML：

```
<form action="#" method="post">
    <input type="text" pattern="[A-Z]{2,3}" />
    <button type="submit">Submit</button>
</form> 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/zbwJP/)。

我尝试使用 提交`1`，这当然会导致浏览器（Chrome 21）进行错误处理：

![](../Images/5ae9ac46400b382777aa3e0e8b5c79bb.png "显示 Chrome 21 中的错误处理/提示弹出窗口的图像")

我试图右键单击弹出窗口并“检查元素”，但就 Web 开发人员工具而言，我似乎正在检查`input`元素（我想这是有道理的），而不是弹出窗口对话。所以，我想知道：是否可以通过 JavaScript（用于响应增强）或 CSS（用于样式）访问/交互此对话？

主要目标是为用户增强提供高对比度的替代方案，或者只是与网站的样式和配色方案一致的弹出窗口。

编辑链接到 MDN 以获取兼容性信息：

*   [HTML 5 表单属性兼容性](https://developer.mozilla.org/en-US/docs/HTML/Element/Input#compat-desktop)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T12:53:14.830

可以对弹出窗口进行样式设置，但支持有限且仅适用于基于 webkit 的浏览器。至于其他浏览器，您可能可以使用类似的伪选择器，但我无法找到它们。

归结为能够找到/了解这些弹出窗口的 DOM 结构，然后添加将修改它们的 CSS。毕竟，它们只是 DOM 元素。

例如：http: [//jsfiddle.net/zbwJP/1/](http://jsfiddle.net/zbwJP/1/)

[文件](http://trac.webkit.org/wiki/Styling%20Form%20Controls#WebKitr82180orlater)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T13:01:31.843

在 Chrome 的最新迭代中，添加了对以下伪选择器的支持

```
::-webkit-validation-bubble{}
::-webkit-validation-bubble-top-outer-arrow{}
::-webkit-validation-bubble-top-inner-arrow{}
::-webkit-validation-bubble-message{} 
```

[在这里](http://trac.webkit.org/wiki/Styling%20Form%20Controls)查看一些信息

Firefox 支持元素属性 x-moz-errormessage，它使您能够更改错误消息的文本。信息[在这里](https://developer.mozilla.org/en/HTML/element/input#section_5)

找不到 Firefox 是否有办法设置错误气泡的样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T12:51:02.817

弹出对话框因浏览器而异。没有办法为这些设置样式（对于跨兄弟）。

一种解决方法是使用 JQuery 的弹出对话框，您可以将其绑定到该事件。

有关此的更多信息，您可以在此处找到：

> [http://jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

# php - 在 php 中检索同一网页上选定下拉项的值，并将其他数据发布到其他表单

> ID：12091875
> 
> 赞同：2
> 
> 时间：2012-08-23T12:44:05.487
> 
> 标签：php, javascript, mysql

我正在创建一个具有许多动态下拉列表的表单。在第一个下拉列表中选择的值被传递给下一个，并基于该值查询被触发到数据库，下一个下拉列表中填充了数据。这个过程在这里进行了四次。 .

为了获取在下拉列表中选择的值，我使用了 javascript 函数来提交表单，保持我的表单操作为空白..

现在，当我获得所有值时，我必须将此信息保存到数据库中，因为我需要将这些值传递给下一个表单，但由于我的表单操作为空白，它只会重新加载页面...

```
<?php
include('config.php');
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Untitled Document</title>
<script language="javascript" type="text/javascript">
function showproduct(product_name)
{
    document.frm.submit();
}
</script>
<script language="javascript" type="text/javascript">
function showpacking(batch_no)
{
    document.frm.submit();
}
</script>
<script language="javascript" type="text/javascript">
function showprice(packing)
{
    document.frm.submit();
}
</script>
</head>

<body>

<form action="" method="post" name="frm" id="frm">
<table width="500" border="0">
  <tr>
    <td width="119">Product Name</td>
    <td width="371">
    <select name="product_name" id="product_name" onChange="showproduct(this.value);">
    <option value="">--Select--</option>
    <?php
     $sql1="select distinct product_name from fertilizer";
    $sql_row1=mysql_query($sql1);
    while($sql_res1=mysql_fetch_assoc($sql_row1))
    {
    ?>
    <option value="<?php echo $sql_res1["product_name"]; ?>" <?php if($sql_res1["product_name"]==$_REQUEST["product_name"]) { echo "Selected"; } ?>><?php echo $sql_res1["product_name"]; ?></option>
     <?php
     }
     ?>
    </select>
    </td>
    </tr>
    <tr>
    <td>Batch No</td>
    <td id="batch">
    <select name="batch_no" id="batch_no" onChange="showpacking(this.value);">
    <option value="">--Select--</option>
    <?php
    $sql="select distinct batch_no from fertilizer where product_name='$_REQUEST[product_name]'";
    $sql_row=mysql_query($sql);
    while($sql_res=mysql_fetch_assoc($sql_row))
    {
    ?>
    <option value="<?php echo $sql_res["batch_no"]; ?>" <?php if($sql_res["batch_no"]==$_REQUEST["batch_no"]) { echo "Selected"; } ?>><?php echo $sql_res["batch_no"]; ?></option>
    <?php
    }
    ?>
    </select>
    </td>
  </tr>

   <tr>
    <td>Packing</td>
    <td id="packing">
    <select name="packing" id="packing" onChange="showprice(this.value);">
    <option value="">--Select--</option>
    <?php
    $sql2="select distinct packing from fertilizer where product_name='$_REQUEST[product_name]' and batch_no='$_REQUEST[batch_no]'";
    $sql_row=mysql_query($sql2);
    while($sql_res2=mysql_fetch_assoc($sql_row))
    {
    ?>
    <option value="<?php echo $sql_res2["packing"]; ?>" <?php if($sql_res2["packing"]==$_REQUEST["packing"]) { echo "Selected"; } ?>><?php echo $sql_res2["packing"]; ?></option>

    <?php
    }
    ?>
    </select>
    </td>
  </tr>

   <tr>
    <td>price per unit</td>
    <td id="price">

    <?php
    $sql3="select distinct rate_per_unit from fertilizer where product_name='$_REQUEST[product_name]' and batch_no='$_REQUEST[batch_no]' and packing=$_REQUEST[packing]";
    $sql_row=mysql_query($sql3);
    while($sql_res3=mysql_fetch_assoc($sql_row))
    {
    ?>
    <input type="text "name="price" id="price" value="<?php echo $sql_res3["rate_per_unit"]; ?>" >
    <?php
    }
    ?>
    </td>
  </tr>

   <tr>
    <td>
    <input type="submit" name="Save" value="save">
    </td>
  </tr>

  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
</table>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:56:24.207

来源：[http ://roshanbh.com.np/2008/01/populate-triple-drop-down-list-change-options-value-from-database-using-ajax-and-php.html](http://roshanbh.com.np/2008/01/populate-triple-drop-down-list-change-options-value-from-database-using-ajax-and-php.html)

此处示例：[http ://roshanbh.com.np/dropdown/](http://roshanbh.com.np/dropdown/)

我的继任者是请在创建帖子之前 使用[Google 。](http://www.google.com)

注意：给定的示例与您的要求相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:15:32.487

代替

```
<input type="submit" name="Save" value="save"> 
```

有类似的东西：

```
<input type="button" name="Save" value="Save" 
onclick="
document.getElementById('frm').action = 'next_form.php' ;
document.getElementById('frm').submit();
"/> 
```

# matlab - 关于时间 MATLAB 的动画 3D 组散点图

> ID：12091876
> 
> 赞同：0
> 
> 时间：2012-08-23T12:44:06.173
> 
> 标签：matlab, animation, user-interface, plot, matlab-figure

您好，提前感谢您的帮助！我使用 MATLAB 制作了具有 4 个颜色组的 3D 散点图（已上传，见下文）。现在我想根据时间为散点图设置动画。因此，如果每个点都有时间戳，我想按顺序显示它们。

例如：如果我有点 A、B、C 在汽车的特定 xyz 位置上悔改错误，并且错误 A 发生在上午 10 点，错误 B 发生在下午 12 点，错误 C 发生在下午 3 点，我想在其中绘制点在动画中排序。

此外，如果可能的话，我想制作一个带有滚动条的 GUI，这样我就可以滚动时间或向后滚动，从而在我前进到时间时添加点，或者在我回到时间时删除点。或至少一个暂停分散过程的选项。

注意：散点图将有大约 2000-3000 个点……我不知道这是否会有所作为。我也是 MATLAB 的新手 :-)

非常感谢您的帮助和时间！亲切的问候

阿尔弗雷多

* * *

```
%Scatterplot data

x = [ 50 55 200 210 350 360 400 450 550 560 600 670 750 850 860];
y = [ 50 -50 100 -100 150 -150 151 -151 150 -150 152 -152 150 -150 150];
z = [ 120 120 100 300 100 300 100 300 100 300 100 300 100 300 100];

% alocates space for the z data by creating a matrix array of all ones
g = [0*ones(3,1);1*ones(3,1); 2*ones(3,1); 3*ones(3,1); 4*ones(3,1); ];

%set specific RGB color value for positions 0-4 and background color
color = [0 0 0; 1 0 0; 0 0 1; 1 1 0; 0 1 0]

whitebg([  0.6758    0.8438    0.8984]) % light blue background

% gscatter creates a 2D matrix with the values from x and y
% and creates groups acording to the 'g' matrix size
% h = gscatter captures output argument and returns an array of handles to the lines on the graph)
h = gscatter(x, y, g, color)

%% for each unique group in 'g', set the ZData property appropriately
gu = unique(g);
for k = 1:numel(gu)
set(h(k), 'ZData', z( g == gu(k) ));
end

%set the aspect ratio, grid lines, and Legend names for the 3D figure 
daspect([4.5 5 5])
grid on
legend('Position 0','Position 1','Position 2','Position 3','Position 4')

% view a 3D grapgh (for 2D set to "2")
view(3) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:13:24.090

如果我理解正确，您只想一个接一个地显示所有不同的散点图。这很容易；只需将其附加到您拥有的代码中：

```
% loop through time
xl = xlim;
yl = ylim;
zl = zlim;
for ii = h(:).'
    % switch all scatter plots off
    set(h, 'visible', 'off')
    % switch only 1 on, for the current time
    set(ii, 'visible', 'on');

    % set original limits
    xlim(xl); ylim(yl); zlim(zl);

    % draw and some delay
    drawnow, pause(1);
end 
```

至于滑块，这里有一个如何做到这一点的例子。将此附加到您拥有的代码中：

```
xl = xlim;
yl = ylim;
zl = zlim;

slider = uicontrol(...
    'parent', gcf,...
    'style', 'slider',...
    'min', 0,...
    'max', 4,...
    'sliderstep', [1/4 1/4],...
    'units', 'normalized',...
    'position', [0.05 0.05 0.90 0.05],...    
    'callback', @SliderCallback);

function SliderCallback(sliderObj, ~)
    set(h, 'visible', 'off')
    set(h(get(sliderObj, 'Value')+1), 'visible', 'on')
    xlim(xl); ylim(yl); zlim(zl);
end 
```

请注意，这使用了嵌套的`function`，这意味着您的整个脚本需要成为一个函数（无论如何，这确实是执行任何可感知大小的事情的正确方法）。

# android - 我可以确定一个活动是否正在运行 AsyncTasks？

> ID：12091878
> 
> 赞同：3
> 
> 时间：2012-08-23T12:44:14.987
> 
> 标签：android, testing, android-asynctask, integration-testing, robotium

在我的许多测试中，我的应用程序正在运行`AsyncTasks`访问数据库并且无法取消。在我的测试结束时，我关闭我的数据库，删除它，然后重新打开它，这样我就有了一个新的数据库装置。

问题是，当`AsyncTasks`测试关闭和删除数据库期间碰巧仍在运行时，我将在代码中得到运行时异常。这在生产代码中永远不会发生，因为数据库在生产中永远不会关闭。

Robotium 有一个测试辅助方法`finishOpenedActivities`，我在我的测试拆解方法中使用它。如果有某种方法可以修改 finishOpenedActivities 以确保所有子线程（特别是 AsyncTasks）也完成，那将非常有帮助。否则，我可能不得不在我的所有 AsyncTasks 中执行取消检查，以支持可靠的测试。

是否有某种方法可以等到所有子线程（特别是 AsyncTasks）完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:12:08.290

`getStatus()`根据[文档](http://developer.android.com/reference/android/os/AsyncTask.html#getStatus%28%29)有一种方法。您只需要引用`AsyncTask`.

```
AsyncTask<Void, Void, Void> yourAsyncTask = new AsyncTask<Void, Void, Void>() {

    @Override
    protected Void doInBackground(Void... arg0) {
        // your async code           

        return null;
    }

};

if (yourAsyncTask.getStatus() == AsyncTask.Status.RUNNING) {
    // What ever you need to do if still running ex.

    yourAxyncTask.cancel();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T15:30:58.517

我最终回避了数据库问题，尽管这对于其他任何人都可能觉得有用的工具非常依赖。我还使用 OrmLite 进行数据库访问，因此我在测试拆卸方法中添加了逻辑，该方法通过 PowerMock 使用反射`Whitebox`来访问 OrmLite 的私有数据库`instanceCount`变量。它跟踪打开了多少数据库句柄。我只是等到句柄计数下降到一，然后我知道没有其他线程访问数据库。

# javascript - Javascript 数组或 Google Charts view.setColumns？

> ID：12091879
> 
> 赞同：0
> 
> 时间：2012-08-23T12:44:17.103
> 
> 标签：javascript, jquery

我不知道主题对不起标题。任何了解我的问题的人都可以编辑我的问题标题。

脚本：

```
// I get checkboxes values with using this function
var myValues = $(".filter:checked").map(function () {
    return this.value;
}).get();

alert("[0," + myValues + "]");
var view = new google.visualization.DataView(new google.visualization.DataTable(evalledData, 0.5));
view.setColumns([0, myValues]); // I pass the checked values. 
```

当我写上面的代码时，我得到了这个错误：`"type" must be specified`

如果我写`view.setColumns([0, 1,2,3,4]);`它有效。

警报输出：`[0,1,2,3,4]`所以两种用法没有区别。

为什么我得到这个错误。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:53:28.893

我解决了。

```
// This function returns string array. 
var myValues = $(".filter:checked").map(function () {
    return this.value;
}).get();

// I converted it an Int array.
$.each(myValues, function (index, value) {
    arrayAll.push(parseInt(value, 10));
    //alert(index + ': ' + value);
}); 
```

# android - 键盘将 tabview 提升到上面

> ID：12091881
> 
> 赞同：0
> 
> 时间：2012-08-23T12:44:18.000
> 
> 标签：android, android-softkeyboard, android-tabactivity

在我的应用程序中，当我点击`EditText`键盘时，`TabView`上面会出现。我`android:windowSoftInputMode="stateVisible|adjustResize"`在 Android 清单文件中使用了它。我正在使用活动组。所以我在活动和活动组中都使用了这个。在活动中，我以编程方式使用了这个

```
this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

但没有成功。

在`TabActivty`课堂上，我有四个标签。我正在使用`ActivityGroup`. 我不知道我在哪里做错了。

在**清单文件**中，我在活动组和活动中使用了它

```
android:windowSoftInputMode="stateVisible|adjustResize" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:49:02.310

添加此权限，您的清单可能有助于“ android:configChanges="orientation|keyboardHidden"”

```
 <activity android:name=".MyActivity"
      android:configChanges="orientation|keyboardHidden"
      android:label="@string/app_name"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:14:58.233

我认为在清单中的活动标签中设置以下值应该可以解决问题：

```
android:windowSoftInputMode="adjustPan" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T09:27:18.663

我通过在 tabactivity 中指定 android:windowSoftInputMode"adjustResize | adjustPan" 解决了这个问题。

# jquery - 当我单击链接时，jQuery fancybox 会改变不透明度并变暗

> ID：12091882
> 
> 赞同：0
> 
> 时间：2012-08-23T12:44:19.577
> 
> 标签：jquery, jquery-plugins, fancybox

```
$(".various").fancybox({
    maxWidth    : 500,
    maxHeight   : 800,
    fitToView   : false,
    width       : '60%',
    height      : '100%',
    autoSize    : false,
    openEffect  : 'none',
    closeEffect : 'none',
});

<table>

<?php
    while( $row = mysql_fetch_array($query))
    {
       echo "<tr><td><a href='edit.php?id=".$row['pat_id']."' class='various fancybox.ajax'>Edit Product</a></td></tr>"
    }

</table> 
```

我已经在这里完成了分页，当我在第一页时，fancybox 工作正常。当我转到其他页面并单击 EditProduct 时，背景变得更暗，在进一步点击时，它继续变暗，需要更多点击才能恢复正常。我搜索了很多，但没有找到任何解决方案。请提供任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T17:16:30.860

在您的“父”页面“A”（包含您提到的代码的页面）中，您已经加载了 fancybox，正如您在“脚本”（我猜您的意思是头部）部分中所说的那样。

到目前为止，没问题，一切看起来都很好。

问题出在您尝试使用 ajax 加载的页面“B”中。**如果我猜对了，那个页面“B”也在它的“脚本”（head）部分加载了fancybox。**

因此，fancybox 通过 ajax 加载的“B”页面重新启动，而父页面“A”启动已经发生了一些魔法，这导致了“嵌套”行为。

**解决方案：不要在你的ajax页面中再次加载fancybox**

*我对您的问题的非常具体的猜测：*

页面“A”和“B”是同一页面（edit.php）吗？

如果页面加载了它自己的另一个实例，假设 edit.php 尝试以不同的“模式”加载 edit.php，您可以像这样加载它：

```
echo "<tr><td><a href='edit.php?id=".$row['pat_id']."&mode=DISABLE_LOADING_OF_SCRIPTS' class='various fancybox.ajax'>Edit Product</a></td></tr>" 
```

...然后当然检查您的 edit.php 头部分...

```
<head>
<?php if($_POST['mode']!='DISABLE_LOADING_OF_SCRIPTS') { ?>
<script type="text/javascript">

......loading/initiation of fancybox here.......

</script>
<?php } ?> 
```

...因此脚本仅在您填充数据的“主”版本的 edit.php 中加载。

如果是这样的话，我也认为使用你的 edit.php 来完成所有工作是个坏主意。很难调试，很难遵循程序的流程。创建一个“producteditor.php”来进行编辑工作，并保留您的 edit.php 仅用于查看您的数据集。

# html - Grumby HTML 框架导航子级别

> ID：12091883
> 
> 赞同：1
> 
> 时间：2012-08-23T12:44:21.923
> 
> 标签：html, css, frameworks, navigation

有人使用[http://gumbyframework.com](http://gumbyframework.com)吗？目前，框架提供的导航菜单只支持一个子级别。任何人都可以帮助我，因为我想添加来自第二级子导航右侧的另一级导航项目。谢谢你的帮助

这是我的标记：

```
 <nav class="navbar">
            <a href="#" class="toggle" data-for=".navbar > ul"><img src="img/icon_nav_toggle.gif" /></a>                                        <ul>
                    <li><a href="#">Home</a></li>
                    <li><a href="#">Solutions</a>
                        <div class="dropdown">
                            <ul>
                                <li><a href="#">Permanent Access</a></li>
                                <li><a href="#">Temporary Access</a></li>
                                <li><a href="#">Industrial Rope Access</a></li>
                                <li><a href="#">Koltek</a></li>
                                <li><a href="#">FallProtec</a></li>
                                <li><a href="#">Consult</a></li>
                                <li><a href="#">Videos</a></li>
                            </ul>
                        </div>
                    </li>
                    <li><a href="#">Projects</a></li>
                    <li><a href="#">News</a></li>
                    <li><a href="#">Company</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </nav> 
```

和CSS：

```
 .navbar {
    width: 100%;
    display: table;
    border: 1px solid #1d692d;
    margin-bottom: 20px;
    background: #5dbb73; /* Change this to suit the color theme of your site */
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    -ms-box-sizing: border-box;
    box-sizing: border-box;
}

.navbar .logo {
    display: table-cell;
    height: 55px;
    margin: 0;
    line-height: 0;
    vertical-align: middle;
}

.navbar .logo a {
    display: block;
    height: 55px;
    line-height: 60px;
    padding: 0 0 0 15px;
    overflow: hidden;
}

.navbar a.toggle {
  display: none;
}

.navbar ul {
    display: table;
    width: 100%;
    float: none;
    vertical-align: middle;
    margin-bottom: 0;
}

.navbar ul li {
    display: table-cell;
    float: none;
    list-style-type: none;
    margin-bottom: 0;
    margin-left: 0;
    text-align: center;
    border-right: 1px solid #114a1e;
}

.navbar > ul > li > a {
    display: block;
    height: 55px;
    line-height: 55px;
    font-size: 16px;
    padding: 0 15px;
    white-space: nowrap;
    color: #fff;
    font-weight: bold;
    text-shadow: 0 1px 2px #114a1e,
                             0 1px 0 #114a1e;
}

.navbar > ul > li .field {
    position: relative;
    display: inline-block;
    text-align: center;
}

.navbar > ul > li .field .search input {
    line-height: 14px;
}

.navbar > ul > li:hover > a {   
    position: relative;
    background: #05390a;
    z-index: 1000;
}

.navbar > ul > li > li > a {
    padding: 0 33px;
}

.navbar > ul > li:last-child, .navbar > ul > li:last-child a:hover {
    border-right: none;
}

/**** Navbar positioning for Microsoft's browser who deserves not to be mentioned ****/
.ie7 .navbar > ul { width: auto; }

.ie7 .navbar, .ie7 .navbar > ul > li > a { display: block; }

.ie7 .navbar .logo, .ie7 .navbar ul, .ie7 .navbar ul li { float: left; display: inline-block; }

.ie7 .navbar .logo a { display: block; overflow: hidden; }

.ie7 .navbar > ul > li .field { display: block; padding: 12px 18px 0; width: 80%; }

/******** CSS3 Dropdown Menu Styles **********/

.navbar li .dropdown {
    width: auto;
    min-width: 0px;
    max-width: 380px;
    height: 0;
    position: absolute;
    background: #fff;
    overflow: hidden;
    z-index: 999;
}

.navbar li:hover .dropdown {
    min-height: 60px;
    max-height: 500px;
    height: auto;
    width: 100%;
    padding: 0;
    border-top: 1px solid #1d692d;

    -webkit-box-shadow: 0px 3px 4px rgba(0,0,0,.3);
    box-shadow: 0px 3px 4px rgba(0,0,0,.3);

    -webkit-transition: ease-in-out .2s;
    -moz-transition: ease-in-out .2s;
    -o-transition: ease-in-out .2s;
    -ms-transition: ease-in-out .2s;
    transition: ease-in-out .2s;
}

.navbar li .dropdown ul {
    margin: 0;
}

.navbar li .dropdown ul > li {
    display: block;
    width: 100%;
    float: left;
    text-align: left;
    height: auto;
    font: 16px "Helvetica Neue", arial, sans-serif;
    border-radius: none;
}

.navbar li .dropdown ul > li a {
    display: block;
    line-height: 26px;
    height: 26px;
    padding: 10px 20px;
    border-bottom: 1px solid #ddd;
}

.navbar ul .dropdown ul li:first-child a {
    border-radius: 0;
}

.navbar li .dropdown li a:hover {
    background: #ebfeee;
}

@media only screen and (max-width: 767px) {

    .navbar, .pretty.navbar {
      position: relative;
    background: transparent;
    border: none;
    text-align: center;
  }

  .navbar .logo {
    float: left;
    display: inline;
  }

  .navbar a.toggle {
    position: relative;
    float: right;
    display: inline-block;
    right: 10px; /* Move me around */
    top: 10px; /* Move me around */
    background: #3c8f4f;
    width: 42px;
    height: 36px;
    line-height: 42px;
    border-radius: 4px;
    -webkit-transition-duration: .1s;  /* Saf3.2+, Chrome */
    -moz-transition-duration: .1s;  /* FF4+ */
    -ms-transition-duration: .1s;  /* IE10 */
    -o-transition-duration: .1s;  /* Opera 10.5+ */
    transition-duration: .1s;
  }

  .pretty.navbar a.toggle {
    border: 1px solid #1d692d;

    background: -moz-linear-gradient(top, #5dbb73 0%, #2d9047 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#5dbb73), color-stop(100%,#2d9047)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #5dbb73 0%,#2d9047 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #5dbb73 0%,#2d9047 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, #5dbb73 0%,#2d9047 100%); /* IE10+ */
    background: linear-gradient(top, #5dbb73 0%,#2d9047 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#5dbb73', endColorstr='#2d9047',GradientType=0 ); /* IE6-9 */

    -webkit-box-shadow: inset 0 1px 1px #94dda6,
        0 1px 1px #94dda6;
    box-shadow: inset 0 1px 1px #94dda6,
      0 1px 1px #94dda6;
  }

  .navbar a.toggle:hover, .navbar a.toggle.active {
    background: #5dbb73;
    -webkit-box-shadow: none;
    box-shadow: none;
    -webkit-transition-duration: .1s;  /* Saf3.2+, Chrome */
    -moz-transition-duration: .1s;  /* FF4+ */
    -ms-transition-duration: .1s;  /* IE10 */
    -o-transition-duration: .1s;  /* Opera 10.5+ */
    transition-duration: .1s;
  }

  .navbar a.toggle.active {
    background: #114a1e;
  }

  .navbar ul {
    position: absolute;
    width: 93.75%;
    height: 0;
    max-height: 0;
    top: 54px;
    right: 3.125%;
    overflow: hidden;
    display: inline-block;

    background: #fff;
    border-radius: 4px;

    -webkit-transition-duration: .2s;  /* Saf3.2+, Chrome */
    -moz-transition-duration: .2s;  /* FF4+ */
    -ms-transition-duration: .2s;  /* IE10 */
    -o-transition-duration: .2s;  /* Opera 10.5+ */
    transition-duration: .2s;

    -webkit-box-shadow: 0px 3px 4px rgba(0,0,0,.3);
    box-shadow: 0px 3px 4px rgba(0,0,0,.3);
  }

  .navbar ul.active {
    width: 93.75%;
    height: auto;
    max-height: 600px;
    z-index: 999;
    -webkit-transition-duration: .5s;  /* Saf3.2+, Chrome */
    -moz-transition-duration: .5s;  /* FF4+ */
    -ms-transition-duration: .5s;  /* IE10 */
    -o-transition-duration: .5s;  /* Opera 10.5+ */
    transition-duration: .5s;
  }

  .navbar ul li {
    display: block;
    width: 100%;
    border-right: 0 !important;
    -webkit-box-shadow: none;
    box-shadow: none;
  }

  .pretty.navbar ul li {
    -webkit-box-shadow: none;
    box-shadow: none;
  }

  .navbar ul li > a {
        font-size: 22px !important;
        border: 1px solid #1d692d;
        background: #5dbb73; /* Old browsers */
  }

  .navbar > ul > li .field {
    padding-top: 10px;
    padding-bottom: 10px;
    width: 90%;
  }

  .navbar > ul > li .search {
    border: 1px solid #bbb;
    -webkit-box-shadow: inset 0 1px 3px #ccc;
    box-shadow: inset 0 1px 3px #ccc;
  }

  .navbar li a:hover, .navbar > ul > li:first-child, .navbar > ul > li:first-child a:hover, .navbar > ul > li:last-child, .navbar > ul > li:last-child a:hover {    
    -webkit-box-shadow: none;
    box-shadow: none;
  }

  .navbar > ul > li:last-child, .navbar > ul > li:last-child a:hover {
    border-right: none;
  }

  .navbar li:first-child a {
    border-radius: 4px 4px 0 0 !important;
  }

  .navbar li:last-child a {
    border-radius: 0 0 4px 4px !important;
  }

  .navbar li:hover .dropdown {
    display: none;
  }

  .navbar ul li > a {
    background: transparent;
    border: none;
    color: #d04526;
    font-size: 16px;
    border-bottom: 1px solid #ccc;
    border-radius: none;
    text-shadow: none;
  }

  .navbar ul li:hover > a {
    background: #f5f5f5;
    border-right: none;
    -webkit-box-shadow: none !important;
    box-shadow: none !important;
  }

  .pretty.navbar {
    border: 1px solid #1d692d;

    background: -moz-linear-gradient(top, #5dbb73 0%, #2d9047 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#5dbb73), color-stop(100%,#2d9047)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #5dbb73 0%,#2d9047 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #5dbb73 0%,#2d9047 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, #5dbb73 0%,#2d9047 100%); /* IE10+ */
    background: linear-gradient(top, #5dbb73 0%,#2d9047 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#5dbb73', endColorstr='#2d9047',GradientType=0 ); /* IE6-9 */

    -webkit-box-shadow: inset 0 1px 1px #94dda6,
        0 1px 2px rgba(0,0,0,0.61) !important; /* Remove this line if you dont want a dropshadow on your buttons*/
    box-shadow: inset 0 1px 1px #94dda6,
                0 1px 2px rgba(0,0,0,0.61) !important; /* Remove this line if you dont want a dropshadow on your buttons*/
    border-radius: 0;
  }

  .pretty.navbar ul li .btn {
    margin-top: 20px;
  }

} 
```

感谢您的任何答案！干杯，保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:29:47.077

我不确定您使用的是 Gumby 1 还是 2。但在 2 中这似乎有效。

 `````
 <div class="navbar" id="nav1">
    <div class="row">
      <a class="toggle" gumby-trigger="#nav1 > .row > ul" href="#"><i class="icon-menu"></i></a>
      <h1 class="four columns logo">
        <a href="#">
          <img src="img/gumby_mainlogo.png" gumby-retina />
        </a>
      </h1>
      <ul class="eight columns">
        <li><a href="#">Features</a></li>
        <li>
          <a href="#">Documentation</a>
          <div class="dropdown">
            <ul>
              <li><a href="#">Item</a></li>
              <li>
                <a href="#">I HAVE STUFF NESTED UNDER ME</a>
                <div class="dropdown">
                  <ul>
                    <li><a href="">nested</a></li>
                   </ul>
                </div>
              </li>

              <li><a href="#">Item</a></li>
            </ul>
          </div>
        </li>
        <li><a href="#">Customize</a></li>
        <li class="field"><input class="search input" type="search" placeholder="Search" /></li>
      </ul>
    </div>
  </div> 
`````

# c++ - 如何查看是否选中了 MFC 复选框

> ID：12091887
> 
> 赞同：7
> 
> 时间：2012-08-23T12:44:35.250
> 
> 标签：c++, mfc, checkbox

我已经检查了很多地方的答案，他们推荐了我这样做的方式，但它似乎对我不起作用，所以任何帮助将不胜感激。

我有一个复选框，我希望它在选中时启用编辑框，并在未选中时禁用它。

以下代码是我创建的：

```
void CMFCApplication1Dlg::OnBnClickedCheck1()
{
    UINT nCheck = CheckBox.GetState();
    if (nCheck == BST_CHECKED)
    {
        EditBox.EnableWindow(TRUE);
    }
    else if (nCheck == BST_UNCHECKED)
    {
        EditBox.EnableWindow(FALSE);
    }
    else
    {
        EditBox.EnableWindow(TRUE);
    } 
```

当我在调试中运行 nCheck 时，它是 520，所以直接进入 else 选项。

非常感谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-23T12:51:06.227

如果您阅读[手册页](http://msdn.microsoft.com/en-us/library/s2z1f288%28v=vs.100%29.aspx)，`GetState`您会看到它返回一个位掩码。

这意味着你不能直接在比较中使用它，你必须像面具一样检查它：

```
if ((nCheck & BST_CHECKED) != 0)
{
    // Button is checked
}
else
{
    // Button is unchecked
} 
```

但是，[`GetCheck`](http://msdn.microsoft.com/en-us/library/8tba1y6f%28v=vs.100%29)可能更适合您的情况。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-23T12:50:57.787

CButton 的 GetState 获取对话框对象的当前状态。您要使用的是 CButton 的 GetCheck。

或者，您可以[按照 MSDN 上的说明](http://msdn.microsoft.com/en-US/library/s2z1f288%28v=vs.80%29)，对返回值进行按位掩码以获取当前的 Check 状态 - 但 GetCheck 就在那里，所以您不妨使用它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-06T11:21:36.300

来自[MSDN 论坛](https://social.msdn.microsoft.com/Forums/en-US/c0f4b88d-748f-4526-9af1-a89c18643904/detecting-if-check-box-is-checked-c?forum=vcmfcatl)：

```
CButton *m_ctlCheck = (CButton*) GetDlgItem(IDC_CHECKBOX);
int ChkBox = m_ctlCheck->GetCheck();
CString str;

if(ChkBox == BST_UNCHECKED)
  str.Format(_T("Un Checked"));
else if(ChkBox == BST_CHECKED)
  str.Format(_T("Checked")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-29T17:59:28.453

要将名为 IDC_CHECK1 的复选框的状态读入变量：

```
bool IsCheck1Checked; 
```

使用以下代码：

```
CButton *m_ctlCheck1 = (CButton*)GetDlgItem(IDC_CHECK1);
IsCheck1Checked = (m_ctlCheck1->GetCheck() == 1) ? true : false; 
```

# .net - 为 Silverlight 中的排序设置默认/初始化列

> ID：12091889
> 
> 赞同：0
> 
> 时间：2012-08-23T12:44:37.120
> 
> 标签：.net, silverlight, xaml, sorting, datagrid

我发现很多带有上述关键字的线程，但大多数人都要求排序。我要求在初始化时刻进行排序。如果加载了表单，则 GridView 应该已经按特定列排序。如果可能在 XAML 中。

现在的默认情况，我不需要： ![当前加载情况](../Images/9edc7a57e5963d106a34ec1c0ff01e48.png)

加载表单时我希望拥有的默认情况： ![Silverlight 中的 XAML 默认排序](../Images/1e12285902cd9bb90b43d635b7ec0f7d.png)

知道怎么做吗？

```
<sdk:DataGrid x:Name="dgv" 
                          ItemsSource="{Binding}"

                          >
            <sdk:DataGrid.Resources>
                <CollectionViewSource x:Key="PrioritySorter" Source="{Binding .}">
                    <CollectionViewSource.SortDescriptions>
                        ????? How to sort by "Active" property ASC?
                    </CollectionViewSource.SortDescriptions>
                </CollectionViewSource>
            </sdk:DataGrid.Resources>

            <sdk:DataGrid.Columns >
                <sdk:DataGridTextColumn         
                    Header="N°"         
                    Binding="{Binding Id}"              
                    IsReadOnly="True"/>

            <sdk:DataGrid.Columns >
                <sdk:DataGridTextColumn         
                    Header="Priority"         
                    Binding="{Binding Priority}"  />

            <sdk:DataGrid.Columns >
                <sdk:DataGridTextColumn         
                    Header="Active"         
                    Binding="{Binding Id}"  /> 
```

*** 解决方案 ***

```
Private Sub Service_GetItemsCompleted(sender As Object, e As ServiceReference1.GetItemsCompletedEventArgs) Handles Service.GetItemsCompleted
    'Me.Items = e.Result
    Dim pageView As New PagedCollectionView(e.Result)
    pageView.SortDescriptions.Add(New SortDescription("Rights", ListSortDirection.Ascending))
    Me.dgv1.DataContext = pageView
End Sub 
```

# java - Jersey Multipart 客户端上传

> ID：12091893
> 
> 赞同：8
> 
> 时间：2012-08-23T12:44:46.510
> 
> 标签：java, rest, jersey

我设计了一个多部分 Jersey REST 服务，用于接收多部分请求（文件上传）并将文件保存在磁盘位置：

```
@POST
    @Path("/Upload")
    @Produces(MediaType.TEXT_HTML)
    @Consumes(MediaType.MULTIPART_FORM_DATA)
    public String uploadFile(@FormDataParam("file") InputStream inputStream,
            @FormDataParam("file") FormDataContentDisposition contentDisposition) {

        System.out.println("Method Entry");
        System.out.println(contentDisposition.getFileName());

        String result = "not Success";
        File file = null;
        if (contentDisposition != null
                && contentDisposition.getFileName() != null
                && contentDisposition.getFileName().trim().length() > 0) {
            try {
                file = new File("xx"
                        + contentDisposition.getFileName());
                new File("yy").mkdirs();
                file.createNewFile();
                OutputStream outputStream = new FileOutputStream(file);
                int read = 0;
                byte[] bytes = new byte[1024];

                while ((read = inputStream.read(bytes)) != -1) {
                    outputStream.write(bytes, 0, read);
                }
                outputStream.flush();
                outputStream.close();
                result = "success";

            } catch (Exception e) {

                System.out.println(e.toString());
            }
        }
        System.out.println("Method Exit");
        return result;

    } 
```

我的测试客户是：

```
 Client client = Client.create();
    WebResource resource = client
            .resource("xyz");
    String conString = "This is the content";

    FormDataMultiPart formDataMultiPart = new FormDataMultiPart();
    formDataMultiPart.field("file", "Testing.txt");

    FormDataBodyPart bodyPart = new FormDataBodyPart("file",
            new ByteArrayInputStream(conString.getBytes()),
            MediaType.APPLICATION_OCTET_STREAM_TYPE);
    formDataMultiPart.bodyPart(bodyPart);

    String reString = resource.type(MediaType.MULTIPART_FORM_DATA)
            .accept(MediaType.TEXT_HTML)
            .post(String.class, formDataMultiPart);
    System.out.println(reString); 
```

但我无法得到回应。

当我使用 HTML 网页作为客户端通过调用 REST 服务上传文件但从 REST 客户端它不工作时，它工作得很好。

客户端有什么需要改变的吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-08-14T21:57:21.850

如果您没有文件，但有一些 String 左右，则对此的解决方案是执行以下操作：

```
final FormDataMultiPart formDataMultiPart = new FormDataMultiPart();
final String value = "Hello World";
final FormDataContentDisposition dispo = FormDataContentDisposition//
        .name("file")//
        .fileName("test.txt")//
        .size(value.getBytes().length)//
        .build();
final FormDataBodyPart bodyPart = new FormDataBodyPart(dispo, value);
formDataMultiPart.bodyPart(bodyPart); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T10:14:29.183

当你说你无法得到回应时，你到底是什么意思？

如果你发送一个文件，你可以试试这个吗？

```
 FileDataBodyPart fdp = new  FileDataBodyPart("file",f,MediaType.APPLICATION_OCTET_STREAM_TYPE); 
```

还，

```
 formDataMultiPart.field("file", "Testing.txt"); 
```

例如，不应命名为“文件”，而应命名为“文件名”。

对于调试，我建议您使用 Wireshark 在您的服务器上进行监听。

# nlp - 查找长名称实体的核心词

> ID：12091894
> 
> 赞同：0
> 
> 时间：2012-08-23T12:44:47.577
> 
> 标签：nlp

每个人。

这是问题及其背景。我从网上收集了很多名字实体。有很多长词。所以我想找到名字实体（或核心词）的俗语。

例如，

我有洛杉矶这个词，我想得到洛杉矶。

或一个非常正式的地名，我想得到它的简称。

OOV 很多，所以查字典是不可能的。

我该如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:30:38.460

如果案例像 THU = Tsinghua University，并且我们希望它尽可能准确，那么我认为我们需要依赖现有的知识源，因为没有算法可以正确猜测所有案例，因为有许多不同的可能性/替代方案给定命名实体（例如，TU）。

您可以尝试以下来源： [http](http://acronyms.thefreedictionary.com) ://acronyms.thefreedictionary.com ，甚至我的维基百科，寻找括号。

如果您不需要 100% 的精确度，那么您可以根据角色的情况从 Los Angeles - LA 等首字母开始。对于清华大学，我相信你需要参考汉字作为指导：清 - 清华 - 华大学 - 大学 -> THU。

但首字母并不总是所有情况的基础。例如，`American Online = AOL`而不仅仅是`AO`. 您可以使用谷歌搜索进行一些验证，查询`"American Online (AO)"`（包括引号，因为介绍首字母缩写词的文本通常是这样写的），只是为了找到没有匹配的链接，但使用查询`"American Online (AOL)"`结果来进行几个完全匹配。

# c# - 直接从全局 asax 重定向到上一页

> ID：12091895
> 
> 赞同：2
> 
> 时间：2012-08-23T12:44:47.540
> 
> 标签：c#, asp.net-mvc

在功能`Global.asax`中，`Application_AcquireRequestState`我有一个更改站点语言的代码。

更改语言后，我想被重定向到上一页。

这该怎么做 ？在里面可以`global.asax`吗？

我提到你在哪个页面上并不重要，用户必须被重定向到上一页，这意味着：

```
page1 -> change language -> page1. 
```

我阅读[了如何重定向到 ASP.NET MVC 中的上一个操作？](https://stackoverflow.com/questions/815229/how-do-i-redirect-to-the-previous-action-in-asp-net-mvc)我想在 Global.asax 中实现它，但我不知道是否可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:55:05.117

**我找到了解决方案**。

在`Application_AcquireRequestState`，在代码末尾，插入：

```
if ( this.Request.UrlReferrer != null ) {
   this.Context.Response.Redirect( this.Request.UrlReferrer.ToString() );
} 
```

# javascript - highcharts IE8重绘图表问题

> ID：12091896
> 
> 赞同：2
> 
> 时间：2012-08-23T12:44:51.493
> 
> 标签：javascript, jquery, highcharts

我在 IE8 中遇到了关于 highcharts 的问题。我有这样简单的（用于演示）代码：

```
$(document).ready(function() {
chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container',
        type: 'area',
    },
    series: [{
        data: [1,2,3]
    }]
});
}); 
```

效果很好。

当我尝试重绘图表时

```
$(document).ready(function() {
chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container',
        type: 'area',
    },
    series: [{
        data: [1,2,3]
    }]
});
chart.redraw();//NEW LINE
}); 
```

我收到错误“未定义为空或不是对象”，文件 - “http://www.highcharts.com/js/testing.js”，第 9495 行。

上面的代码适用于任何浏览器，但 IE8-

在这里 - [http://jsfiddle.net/sUXsu/4/](http://jsfiddle.net/sUXsu/4/)我有在同一个浏览器（IE8）中工作的相同代码。

我使用 jquery-1.7.2.min.js 和 jquery-ui-1.8.16.custom.min.js

感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T07:33:50.063

尝试删除最后一个逗号

```
chart: {
    renderTo: 'container',
    type: 'area', <----
} 
```

IE8 有一些问题。

[另请参阅此问题](https://stackoverflow.com/questions/8790958/highcharts-js-is-not-rendering-chart-under-ie8)

# c# - 如何知道为类型定义的属性？

> ID：12091900
> 
> 赞同：1
> 
> 时间：2012-08-23T12:45:04.647
> 
> 标签：c#, .net, reflection, attributes

我已经定义了一个自定义属性并将其添加到几个类中。知道我正在使用反射来捕获程序集中的所有类型。我只想过滤掉定义了这个属性的类型。

我已经看到`Attributes`了 Type 对象的属性，但它只返回[特定 enum](http://msdn.microsoft.com/en-us/library/system.reflection.typeattributes%28v=vs.100%29.aspx)中包含的值。

如何检索定义了自定义属性的类型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T12:46:56.530

你可以这样做：

```
object[] attributes = typeof(SomeType).GetCustomAttributes(typeof(YourAttribute), true); 
```

但我更喜欢使用自定义扩展方法：

```
public static class ReflectionExtensions
{
    public static TAttribute GetAttribute<TAttribute>(this ICustomAttributeProvider obj, bool inherit)
        where TAttribute : Attribute
    {
        return obj.GetAttributes<TAttribute>(inherit).FirstOrDefault();
    }

    public static IEnumerable<TAttribute> GetAttributes<TAttribute>(this ICustomAttributeProvider obj, bool inherit)
        where TAttribute : Attribute
    {
        return obj.GetCustomAttributes(typeof (TAttribute), inherit).Cast<TAttribute>();
    }

    public static bool HasAttribute<TAttribute>(this ICustomAttributeProvider obj, bool inherit)
        where TAttribute : Attribute
    {
        return obj.GetAttributes<TAttribute>(inherit).Any();
    }
} 
```

（它们也适用于程序集、方法、属性等，而不仅仅是类型）

# svn - svn：E175002：收到致命警报：bad_record_mac netbeans

> ID：12091901
> 
> 赞同：2
> 
> 时间：2012-08-23T12:45:06.263
> 
> 标签：svn, netbeans

我在我的 ubuntu 12.04 系统上安装了 netbeans，用于从 netbeans 网站进行 php 编程。

从 svn 存储库中签出时出现错误

```
svn: E175002: Received fatal alert: bad_record_mac 
```

我检查了这个问题并想出了这个

```
http://issues.tmatesoft.com/issue/SVNKIT-176 
```

但我在我的 netbeans 安装中找不到 eclipse.ini。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T07:33:14.377

```
1\. Add the following line to the eclipse.ini file in your eclipse installation directory.
-Dsvnkit.http.sslProtocols=SSLv3  
2\. Restart eclipse.
3\. Repeat the same operation as before and it should complete without any errrors. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T03:21:41.297

我也在 Netbeans 中遇到过这种情况，以前 svn 工作正常，然后突然出现 bad_record_mac 之类的错误

我可以通过重新启动 Netbeans 然后 svn 再次工作来解决这个问题。

# asp.net - ASP.NET 检测网站首次运行

> ID：12091902
> 
> 赞同：0
> 
> 时间：2012-08-23T12:45:06.577
> 
> 标签：asp.net, session

我使用用户 IP 来查找他的位置，以便在我的 ASP.NET 网站中显示正确的内容。我在我的 default.aspx 页面的开头设置了一个会话来检测它是否是我的用户第一次运行网站，如果是第一次，我的位置检测算法运行并且城市会话也被设置。我的用户可以更改城市，每次更改城市时，城市会话也会更改。此过程运行良好，但是当用户关闭浏览器并再次打开浏览器时，我的城市检测算法不会运行，因为 my`session["firsttime"]`仍处于活动状态且其值为`TRUE`（我的会话生命周期设置为默认 20 分钟）。即使他有一个`session["firsttime"]`设置，我如何才能检测到用户刚刚启动了他的浏览器`TRUE`？

我可以使用 global.asax 文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:08:23.850

尝试使用**cookie**而不是 Session 来**检测“第一次”和“返回用户”**。此外，您可以在 cookie 中设置位置信息。

# node.js - 使用 Mongoose 中的嵌入式文档一次返回所有验证错误

> ID：12091905
> 
> 赞同：0
> 
> 时间：2012-08-23T12:45:13.177
> 
> 标签：node.js, rest, express, mongoose

我正在构建一个 REST API，它使用户能够发布一个可以包含多个嵌入式文档的文档。我已经为主文档和嵌入文档设置了一些验证规则。

当我发出一个包含无效数据的请求时，Mongoose 首先检查嵌入文档是否存在验证错误，每当其中一个失败时，它将返回错误，并忽略文档的其余部分。

从 API 消费者的角度来看，我想我想一次得到所有的错误——包括所有嵌入文档和主文档。

所以我的两个问题是：

1.  Mongoose 的这种设计背后的原因是什么？
2.  有没有办法验证所有文件然后立即返回错误？

# python - haproxy 背后的扭曲应用

> ID：12091911
> 
> 赞同：2
> 
> 时间：2012-08-23T12:45:41.960
> 
> 标签：python, asynchronous, twisted, haproxy

我有一个简单的扭曲应用程序，提供“Hello World！”。通过 HTTP 协议。我正在尝试运行几个实例以利用所有处理器。

但我提到，单个扭曲的应用程序处理的请求甚至比 haproxy 后面的同一应用程序的 1、2 或 5 个实例要多得多。我不知道为什么会这样。

`/`我通过 JMeter运行了 5000 个线程。当我在 127.0.0.1:9001 上运行它时，它会在 500 毫秒内成功处理每个请求。当我在 127.0.0.1:8080 上运行它时，一些响应`503 Service Unavailable`和一些运行超过 500 毫秒。

这是我的配置文件：

```
global
    maxconn 500000
    user german

defaults
    mode http
    retries 0
    timeout connect 5000ms
    timeout client 50000ms
    timeout server 50000ms
    balance roundrobin
    # if something goes wrong with server, redistribute client to a working server
    option redispatch

listen http 127.0.0.1:8080
    mode http
    option httpchk GET / HTTP/1.1

    server prototype-local 127.0.0.1:9001 maxconn 0 weight 1 maxqueue 0 cookie server01 check inter 5000 rise 1 fall 3

    balance roundrobin

    # to see ip's of clients
    option forwardfor
    option http-server-close
    # disable or enable immediate session resource cleaning(useful for chat)
    # option nolinger
    # inserts cookie to each client requet to identify a process
    cookie SWCOMMET insert indirect nocache
    # will be enalbed as soon as main server with process crashed :nice fail resistance
    option allbackups 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T07:53:05.537

> 当我在 127.0.0.1:9001 上运行它时，它会在 500 毫秒内成功处理每个请求

你在开玩笑吗 ？如果像“hello world”这样简单的应用程序在 500 毫秒内响应，那么肯定有什么地方坏了。

您应该检查您的服务器是否没有交换（例如：由于内存泄漏），这可以解释如此巨大的响应时间以及为什么在链中添加 haproxy 时会更糟，因为这两个进程都会受到影响。

您从 haproxy 获得 503 的事实意味着它丢失了未能响应健康检查的服务器。这符合 BTW 巨大的响应时间。

也有可能由于任何原因，应用程序正在占用所有 CPU，并且如果它绑定到同一个 CPU，则会对 haproxy 产生高调度延迟。您应该监控 CPU 使用率并查看每个进程在哪个 CPU 上运行（为此使用“top”）。理想情况下，您应该将 haproxy 强制到特定核心（使用任务集）并将您的应用程序强制到另一个核心。避免跨内核的线程迁移对于实现高负载至关重要，因此每个新实例都必须在专用内核上运行。

如果服务器占用大量内存，您应该使用 haproxy 的服务器 maxconn 参数来序列化请求（并删除 maxqueue）。

在我在您的 haproxy 配置中看到的其他内容中，全局 maxconn 很大并且没有多大意义，因为您需要大约 9 GB 的 RAM 仅用于 haproxy 才能达到此限制。此外，您需要在默认部分设置一个 maxconn 值，因为前端的默认值为 2000，这可能低于您尝试的值。

您应该删除“maxconn 0”、“maxqueue 0”和“weight 1”，因为它们是默认设置，只会使对配置的理解复杂化。

# java - Android 蓝牙连接 - 服务发现失败

> ID：12091913
> 
> 赞同：7
> 
> 时间：2012-08-23T12:45:46.157
> 
> 标签：java, android, sockets, bluetooth, ioexception

我正在尝试创建一个基本的蓝牙应用程序来测试设备。

我从 developer.android 获得了代码。这是链接：http: [//developer.android.com/guide/topics/connectivity/bluetooth.html#ConnectingDevices](http://developer.android.com/guide/topics/connectivity/bluetooth.html#ConnectingDevices)

这是我的线程代码的一部分：

```
 public void run() {

        mBluetoothAdapter.cancelDiscovery();
        Log.i(TAG, "Discovery Cancel!"); 

        try {
            Log.i(TAG, "Connection Started");
            mmSocket.connect();
            Log.i(TAG, "Connection Ended");
        } catch (IOException e) {
            try {
                Log.e(TAG, "Connection Failed", e);
                mmSocket.close();
            } catch (IOException e2) {
                Log.e(TAG, "Connection Close Failed", e2);
            }
            return;
        } 
```

无论我尝试`mmSocket.connect();`过什么都行不通。总是抛出一个 IOException 并且我从我的 logcat 中获取该日志：

`java.io.IOException: Service discovery failed
at android.bluetooth.BluetoothSocket$SdpHelper.doSdp(BluetoothSocket.java:403)
at android.bluetooth.BluetoothSocket.connect(BluetoothSocket.java:213)`

我看过这些文章，并尝试了书面的东西，它们都没有解决我的问题。

[Android 蓝牙：服务发现失败，连接到台式机/笔记本电脑](https://stackoverflow.com/questions/9849852/android-bluetooth-service-discovery-failed-connection-to-desktop-laptop)

[在 Android 上使用蓝牙的服务发现失败异常](https://stackoverflow.com/questions/3397071/service-discovery-failed-exception-using-bluetooth-on-android)

[无法在 Android ICS 上进行蓝牙连接](https://stackoverflow.com/questions/11082819/bluetooth-connection-on-android-ics-not-possible)

[Android蓝牙java.io.IOException：连接被拒绝？](https://stackoverflow.com/questions/5298572/android-bluetooth-java-io-ioexception-connection-refused)

顺便说一句，我正在开发 android ics 4.0.4。

我知道这不是设备问题，因为我已经在不同的设备上尝试过这个应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T09:10:24.407

我不知道，我仍然不明白 UUID 的东西，但问题是 UUID。我正在使用从内核日志中获得的 UUID，它是`00001105-0000-1000-8000-00805F9B34FB`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-05T09:25:09.430

它为我工作

```
BluetoothSocket socket = device.createInsecureRfcommSocketToServiceRecord(MY_UUID);
Method m = device.getClass().getMethod("createInsecureRfcommSocket", new Class[] {int.class});
socket = (BluetoothSocket) m.invoke(device, 1);
bluetoothAdapter.cancelDiscovery();
socket.connect(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-04T17:52:02.223

以下代码片段适用于我。尝试一下...

```
BluetoothDevice mmDevice;
boolean temp = mmDevice.fetchUuidsWithSdp();
UUID uuid = null;
if( temp ){
uuid = mmDevice.getUuids()[0].getUuid();
}
tmp = device.createRfcommSocketToServiceRecord(uuid); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T03:08:50.210

我经历了类似的学习过程。我试图用一系列例子记录我学到的东西。

这可能会有所帮助：

[http://digitalhacksblog.blogspot.com/2012/05/android-example-bluetooth-simple-spp.html](http://digitalhacksblog.blogspot.com/2012/05/android-example-bluetooth-simple-spp.html)

它用于通过蓝牙在 Android 设备和 PC 之间建立简单的连接。这些示例包含 Android 文件以及 java 中的 SPP 服务器和用于 PC 的 perl 中的一个。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-25T23:54:24.907

确保您的应用程序在适配器忙于发现时未尝试连接：问题似乎是在我打电话之前

```
clientSocket.connect() 
```

我需要打电话

```
btAdapter.cancelDiscovery() 
```

这帮助我解决了同样的问题[Matts Reco](https://stackoverflow.com/questions/8515572/service-discovery-failed-from-android-bluetooth-insecure-rfcomm)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-23T18:40:42.573

您必须为服务发现提供有效的 UUID。

```
BluetoothSocket sock = bdevice.createRfcommSocketToServiceRecord(VALID_UUID); 
```

各种标准（默认）蓝牙服务（免提、文件传输等）有几种常见的 UUID。

[看这里](http://www.bluetooth.org/Technical/AssignedNumbers/service_discovery.htm)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-23T18:49:00.317

如果您只是想测试设备，请尝试使用作为 SDK 一部分提供的蓝牙聊天示例项目。您尝试使用的代码以及 developer.android.com 上提供的代码都包含在蓝牙聊天示例中。

# node.js - 错误：ORA-32102：通过 node.js 连接 Oracle 的 OCI 句柄无效

> ID：12091915
> 
> 赞同：3
> 
> 时间：2012-08-23T12:45:52.390
> 
> 标签：node.js

错误：ORA-32102：无效的 OCI 句柄

```
var oracle = require('oracle');

oracle.connect({ "hostname": "hostname", "user": "user", "password": "password" },
  function(err, connection) {

    if(err){ console.log("Connect err:" + err); }
    if(connection){ console.log("Connection:" + connection); }

    console.log(connection);
    console.log("........");

    // selecting rows
    connection.execute("SELECT * FROM AUTOLOAN_MASTER WHERE RELIGION = :1", ['R'], 
      function(err, results) {
    if (err) {
      console.log('Failed to query table in Oracle: '+ err);
     req.results = null;
    }
    console.log(req);
    console.log(req.results);
      });

      connection.close();
   }); 
```

Oracle 软件包已安装在 ubuntu 中。出现以下错误：错误：ORA-32102：无效的 OCI 句柄

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T23:03:34.473

刚遇到同样的问题。将 connection.close 移动到您的执行函数中。因为这是 Node 并且事情是非阻塞运行的，所以它会在结果发回之前关闭您的连接。

```
var oracle = require('oracle');

oracle.connect({ "hostname": "hostname", "user": "user", "password": "password" },
  function(err, connection) {

    if(err){ console.log("Connect err:" + err); }
    if(connection){ console.log("Connection:" + connection); }

    console.log(connection);
    console.log("........");

    // selecting rows
    connection.execute("SELECT * FROM AUTOLOAN_MASTER WHERE RELIGION = :1", ['R'], 
      function(err, results) {
        if (err) {
          console.log('Failed to query table in Oracle: '+ err);
          req.results = null;
        }
        console.log(req);
        console.log(req.results);
        connection.close(); // Moved inside execute callback
   });
}); 
```

# iphone - 带有虚线的 UIView

> ID：12091916
> 
> 赞同：34
> 
> 时间：2012-08-23T12:45:53.327
> 
> 标签：iphone, ios, uiview, calayer, quartz-2d

**是）我有的：**

![在此处输入图像描述](../Images/1e0233246f2be7b65ac209d159da2824.png)

要创建这条线，我基本上有一个`UIView`并且我执行以下操作：

```
void setLayerToLineFromAToB(CALayer *layer, CGPoint a, CGPoint b, CGFloat lineWidth)
{
    CGPoint center = { 0.5 * (a.x + b.x), 0.5 * (a.y + b.y) };
    CGFloat length = sqrt((a.x - b.x) * (a.x - b.x) + (a.y - b.y) * (a.y - b.y));
    CGFloat angle = atan2(a.y - b.y, a.x - b.x);

    layer.position = center;
    layer.bounds = (CGRect) { {0, 0}, { length + lineWidth, lineWidth } };
    layer.transform = CATransform3DMakeRotation(angle, 0, 0, 1);
} 
```

**注意：此代码是在 stackoverflow 上找到的，所以如果有人可以给我参考，我将不胜感激。**

**我想要的是：**

![在此处输入图像描述](../Images/16ed02809a2fe2f52dcb8c930ba0493e.png)

好的，所以我需要的“唯一”事情是在`UIView`. 我知道我可以使用 Quartz2D 来做到这一点（一个简单的方法可以在[这里](http://www.techotopia.com/index.php/An_iOS_4_iPhone_Graphics_Drawing_Tutorial_using_Quartz_2D)找到）。但我想通过操纵`CALayer`而不是使用 draw 方法来做到这一点。为什么？由于我正在对我的 进行转换`UIView`，我无法使用该`draw`方法正确绘制。

**编辑1：**

只是为了说明我的问题：

![在此处输入图像描述](../Images/28bffa66ffb461fff65778474693d960.png)

通常你所拥有的是`UIView`然后你基本上只是在其中画一些东西（在这种情况下是一条简单的线）。我发现摆脱“灰色”区域的解决方案是不要绘制东西，而是改变它`UIView`本身。它工作得很好，如果你想要一条完全填充的线，当你想要一条虚线时问题就来了。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-23T12:50:41.840

检查 UIBezierPath`setLineDash:count:phase:` [方法](https://developer.apple.com/documentation/uikit/uibezierpath/1624373-setlinedash?language=objc)：

```
- (void)setLineDash:(const CGFloat *)pattern count:(NSInteger)count phase:(CGFloat)phase` method. 
```

这允许您绘制虚线。

1.  首先添加一个`CAShapeLayer`. 将其作为子层添加到您的`UIView`. 它有一个`path`属性。
2.  现在制作`UIBezierPath`. 使用 画线`setLineDash`。

**例如：**

```
 UIBezierPath *path = [UIBezierPath bezierPath];
 //draw a line
 [path moveToPoint:yourStartPoint]; //add yourStartPoint here
 [path addLineToPoint:yourEndPoint];// add yourEndPoint here
 [path stroke];

 CGFloat dashPattern[] = {2.0f,6.0f,4.0f,2.0f}; //make your pattern here
 [path setLineDash:dashPattern count:4 phase:3];

 UIColor *fill = [UIColor blueColor];
 shapelayer.strokeStart = 0.0;
 shapelayer.strokeColor = fill.CGColor;
 shapelayer.lineWidth = 5.0;
 shapelayer.lineJoin = kCALineJoinMiter;
 shapelayer.lineDashPattern = [NSArray arrayWithObjects:[NSNumber numberWithInt:10],[NSNumber numberWithInt:7], nil];
 shapelayer.lineDashPhase = 3.0f;
 shapelayer.path = path.CGPath; 
```

**注意：**此答案提供了一个提示，因此您可以根据自己的要求即兴创作。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2018-01-17T06:56:57.623

Swift4中的 Dash Line **• Xcode 9**

创建一个 CAShapeLayer 并使用[lineDashPattern](https://developer.apple.com/documentation/quartzcore/cashapelayer/1521921-linedashpattern)

```
extension UIView {

    func addDashedBorder() {
        //Create a CAShapeLayer
        let shapeLayer = CAShapeLayer()
        shapeLayer.strokeColor = UIColor.red.cgColor
        shapeLayer.lineWidth = 2
        // passing an array with the values [2,3] sets a dash pattern that alternates between a 2-user-space-unit-long painted segment and a 3-user-space-unit-long unpainted segment
        shapeLayer.lineDashPattern = [2,3]

        let path = CGMutablePath()
        path.addLines(between: [CGPoint(x: 0, y: 0),
                                CGPoint(x: self.frame.width, y: 0)])
        shapeLayer.path = path
        layer.addSublayer(shapeLayer)
    }
} 
```

**用法：**

```
dashView.addDashedBorder() 
```

**输出：**

[![在此处输入图像描述](../Images/c8dbd20c9e4726aaf80cabe70875659f.png)](https://i.stack.imgur.com/089PW.png)

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-08-24T08:39:26.710

**注意**：Prince 的代码确实帮助了我，所以我会给他+10 的提示。但最后，我添加了我自己的代码。我还将为其添加一些上下文，以便对未来的读者有用

* * *

最终的代码是这样的：

```
-(void)updateLine{

      // Important, otherwise we will be adding multiple sub layers
      if ([[[self layer] sublayers] objectAtIndex:0])
        {
            self.layer.sublayers = nil;
        }

        CAShapeLayer *shapeLayer = [CAShapeLayer layer];
        [shapeLayer setBounds:self.bounds];
        [shapeLayer setPosition:self.center];
        [shapeLayer setFillColor:[[UIColor clearColor] CGColor]];
        [shapeLayer setStrokeColor:[[UIColor blackColor] CGColor]];
        [shapeLayer setLineWidth:3.0f];
        [shapeLayer setLineJoin:kCALineJoinRound];
        [shapeLayer setLineDashPattern:
        [NSArray arrayWithObjects:[NSNumber numberWithInt:10],
        [NSNumber numberWithInt:5],nil]];

        // Setup the path
        CGMutablePathRef path = CGPathCreateMutable();
        CGPathMoveToPoint(path, NULL, beginPoint.center.x, beginPoint.center.y);
        CGPathAddLineToPoint(path, NULL, endPoint.center.x, endPoint.center.y);

        [shapeLayer setPath:path];
        CGPathRelease(path);

        [[self layer] addSublayer:shapeLayer];
} 
```

在我的例子中，用户可以使用 KVO 移动 beginPoint 和 endPoint。因此，当其中一个移动时：

```
-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    if ([keyPath isEqual:@"position"])
    {
        [self updateLine];
    }
} 
```

我确实玩了很多王子的代码。我尝试了该`draw:`方法，它在虚线之间添加了一条细线（有点奇怪......），我也尝试了`initWithFrame:`. 他的代码本身，未经任何修改，会在控制台上给我这种错误：

```
<Error>: CGContextSaveGState: invalid context 0x0
<Error>: CGContextSetLineWidth: invalid context 0x0
<Error>: CGContextSetLineJoin: invalid context 0x0
<Error>: CGContextSetLineCap: invalid context 0x0
<Error>: CGContextSetMiterLimit: invalid context 0x0
<Error>: CGContextSetFlatness: invalid context 0x0
<Error>: CGContextAddPath: invalid context 0x0
<Error>: CGContextDrawPath: invalid context 0x0
<Error>: CGContextRestoreGState: invalid context 0x0 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2016-07-05T01:54:13.197

**斯威夫特 2.2**

把这个放在这里以节省其他人的时间..

```
extension UIView {
    func addDashedLine(color: UIColor = UIColor.lightGrayColor()) {
        layer.sublayers?.filter({ $0.name == "DashedTopLine" }).map({ $0.removeFromSuperlayer() })
        self.backgroundColor = UIColor.clearColor()
        let cgColor = color.CGColor

        let shapeLayer: CAShapeLayer = CAShapeLayer()
        let frameSize = self.frame.size
        let shapeRect = CGRect(x: 0, y: 0, width: frameSize.width, height: frameSize.height)

        shapeLayer.name = "DashedTopLine"
        shapeLayer.bounds = shapeRect
        shapeLayer.position = CGPoint(x: frameSize.width / 2, y: frameSize.height / 2)
        shapeLayer.fillColor = UIColor.clearColor().CGColor
        shapeLayer.strokeColor = cgColor
        shapeLayer.lineWidth = 1
        shapeLayer.lineJoin = kCALineJoinRound
        shapeLayer.lineDashPattern = [4, 4]

        let path: CGMutablePathRef = CGPathCreateMutable()
        CGPathMoveToPoint(path, nil, 0, 0)
        CGPathAddLineToPoint(path, nil, self.frame.width, 0)
        shapeLayer.path = path

        self.layer.addSublayer(shapeLayer)
    }
} 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2017-02-05T11:11:01.077

这是 Swift 3 版本的**Alexandre G**的答案[https://stackoverflow.com/a/38194152/1800489](https://stackoverflow.com/a/38194152/1800489)

```
extension UIView {

        func addDashedLine(color: UIColor = .lightGray) {
            layer.sublayers?.filter({ $0.name == "DashedTopLine" }).map({ $0.removeFromSuperlayer() })
            backgroundColor = .clear

            let shapeLayer = CAShapeLayer()
            shapeLayer.name = "DashedTopLine"
            shapeLayer.bounds = bounds
            shapeLayer.position = CGPoint(x: frame.width / 2, y: frame.height / 2)
            shapeLayer.fillColor = UIColor.clear.cgColor
            shapeLayer.strokeColor = color.cgColor
            shapeLayer.lineWidth = 1
            shapeLayer.lineJoin = kCALineJoinRound
            shapeLayer.lineDashPattern = [4, 4]

            let path = CGMutablePath()
            path.move(to: CGPoint.zero)
            path.addLine(to: CGPoint(x: frame.width, y: 0))
            shapeLayer.path = path

            layer.addSublayer(shapeLayer)
        }
} 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2015-06-25T03:17:32.740

接受的答案有一个坐标问题。这条线将在下方绘制一段距离。而且我无法弄清楚它在 Y 坐标上增加的原因和距离。

有一种方法可以绘制具有正确坐标的虚线：

```
-(void)drawRect:(CGRect)rect
{
     CGContextBeginPath(cx);
     CGContextRef cx = UIGraphicsGetCurrentContext();
     CGContextSetLineWidth(cx, _thickness);
     CGContextSetStrokeColorWithColor(cx, _color.CGColor);

     CGFloat dash[] = {_dashedLength,_dashedGap};
     CGContextSetLineDash(cx, 0, dash, 2); // nb "2" == ra count
//    CGContextSetLineCap(cx, kCGLineCapRound);

     CGContextMoveToPoint(cx, 0, _thickness);
     CGContextAddLineToPoint(cx, self.bounds.size.width, _thickness);
     CGContextStrokePath(cx);
     CGContextClosePath(cx);
} 
```

这个答案来自[Draw dotted (not dashed!) line, with IBDesignable in 2017](https://stackoverflow.com/questions/26018302/draw-dotted-not-dashed-line)。当你想要黑色虚线时，不要忘记将背景颜色设置为白色！！默认情况下，视图的背景颜色为黑色，线条颜色也是黑色，所以我认为它是实线。我花了半天时间才知道。T_T

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-03-02T00:33:39.223

首先，所有功劳归于 RuiAAPeres 和 Prince，我只是将他们的答案封装到 UIView 对象中，其他人可以将其放入他们的项目中并使用

```
#import <UIKit/UIKit.h>

/**
 *  Simple UIView for a dotted line
 */
@interface H3DottedLine : UIView

/**
 *  Set the line's thickness
 */
@property (nonatomic, assign) CGFloat thickness;

/**
 *  Set the line's color
 */
@property (nonatomic, copy) UIColor *color;

/**
 *  Set the length of the dash
 */
@property (nonatomic, assign) CGFloat dashedLength;

/**
 *  Set the gap between dashes
 */
@property (nonatomic, assign) CGFloat dashedGap;

@end

@implementation H3DottedLine

#pragma mark - Object Lifecycle

- (instancetype)init {
    self = [super init];

    if (self) {
        // Set Default Values
        _thickness = 1.0f;
        _color = [UIColor whiteColor];
        _dashedGap = 1.0f;
        _dashedLength = 5.0f;
    }

    return self;
}

#pragma mark - View Lifecycle

- (void)layoutSubviews {
    // Note, this object draws a straight line. If you wanted the line at an angle you simply need to adjust the start and/or end point here.
    [self updateLineStartingAt:self.frame.origin andEndPoint:CGPointMake(self.frame.origin.x+self.frame.size.width, self.frame.origin.y)];
}

#pragma mark - Setters

- (void)setThickness:(CGFloat)thickness {
    _thickness = thickness;
    [self setNeedsLayout];
}

- (void)setColor:(UIColor *)color {
    _color = [color copy];
    [self setNeedsLayout];
}

- (void)setDashedGap:(CGFloat)dashedGap {
    _dashedGap = dashedGap;
    [self setNeedsLayout];
}

- (void)setDashedLength:(CGFloat)dashedLength {
    _dashedLength = dashedLength;
    [self setNeedsLayout];
}

#pragma mark - Draw Methods

-(void)updateLineStartingAt:(CGPoint)beginPoint andEndPoint:(CGPoint)endPoint {

    // Important, otherwise we will be adding multiple sub layers
    if ([[[self layer] sublayers] objectAtIndex:0]) {
        self.layer.sublayers = nil;
    }

    CAShapeLayer *shapeLayer = [CAShapeLayer layer];
    [shapeLayer setBounds:self.bounds];
    [shapeLayer setPosition:self.center];
    [shapeLayer setFillColor:[UIColor clearColor].CGColor];
    [shapeLayer setStrokeColor:self.color.CGColor];
    [shapeLayer setLineWidth:self.thickness];
    [shapeLayer setLineJoin:kCALineJoinRound];
    [shapeLayer setLineDashPattern:@[@(self.dashedLength), @(self.dashedGap)]];

    // Setup the path
    CGMutablePathRef path = CGPathCreateMutable();
    CGPathMoveToPoint(path, NULL, beginPoint.x, beginPoint.y);
    CGPathAddLineToPoint(path, NULL, endPoint.x, endPoint.y);

    [shapeLayer setPath:path];
    CGPathRelease(path);

    [[self layer] addSublayer:shapeLayer];
}

@end 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2019-06-13T02:17:14.193

**更新 Swift 5**和**UIBezierPath**

对于那些使用`UIBezierPath`而不是 的人`CAShapeLayer`，这里是如何实现它

```
class MyView: UIView {

    override func draw(_ rect: CGRect) {

        let path = UIBezierPath()
        // >> define the pattern & apply it 
        let dashPattern: [CGFloat] = [4.0, 4.0]
        path.setLineDash(dashPattern, count: dashPattern.count, phase: 0)
        // <<
        path.lineWidth = 1
        path.move(to: CGPoint(x: 0, y: 0))
        path.addLine(to: CGPoint(x: 100, y: 100))
        path.stroke()

    }
} 
```

正如该线程中多次所说，您可以使用`pattern`和`phase`来实现复杂的虚线。

希望这可以帮助

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2022-02-05T12:49:15.133

**Swift 5 & 使用扩展：**

使用以下代码，您可以在视图中间绘制一条虚线。

```
extension UIView {
    enum dashedOrientation {
        case horizontal
        case vertical
    }

    func makeDashedBorderLine(color: UIColor, strokeLength: NSNumber, gapLength: NSNumber, width: CGFloat, orientation: dashedOrientation) {
        let path = CGMutablePath()
        let shapeLayer = CAShapeLayer()
        shapeLayer.lineWidth = width
        shapeLayer.strokeColor = color.cgColor
        shapeLayer.lineDashPattern = [strokeLength, gapLength]
        if orientation == .vertical {
            path.addLines(between: [CGPoint(x: bounds.midX, y: bounds.minY),
                                    CGPoint(x: bounds.midX, y: bounds.maxY)])
        } else if orientation == .horizontal {
            path.addLines(between: [CGPoint(x: bounds.minX, y: bounds.midY),
                                    CGPoint(x: bounds.maxX, y: bounds.midY)])
        }
        shapeLayer.path = path
        layer.addSublayer(shapeLayer)
    }
} 
```

调用方法：

```
vu1.makeDashedBorderLine(color: .black, strokeLength: 7, gapLength: 5, width: 2, orientation: .horizontal) 
```

[![水平的](../Images/ec95abe6424066fc67beb7078da3f6aa.png)](https://i.stack.imgur.com/qy13a.png) [![垂直的](../Images/77842aa8ddde4775f693668067172345.png)](https://i.stack.imgur.com/83gWP.png)

# javascript - AngularJS 在不使用变量的情况下将服务注入模块，因此可以将其缩小

> ID：12091920
> 
> 赞同：2
> 
> 时间：2012-08-23T12:46:05.610
> 
> 标签：javascript, dependency-injection, minify, angularjs

我正在尝试缩小我的 AngularJS JavaScript（使用 SquishIt）。

我的模块有一个注入服务作为函数参数，就像这样。

```
var myapp = angular.module('myapp', ['ngSanitize'], function ($routeProvider) {
... 
```

问题是当我开始缩小代码时，`$routeProvider`变成类似的东西`n`，然后 AngularJS 无法理解它。

我用我的控制器做了类似的事情，我认为这很有效

```
myapp.controller('MyAppController', ['$scope', '$routeParams', '$filter', 'storage', function ($scope, $routeParams, $filter, storage) { ... }]); 
```

但似乎无法使其适用于我的模块。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T13:06:11.730

忘了它。弄清楚了！与我实现控制器的方式非常相似，我只是被括号超载了......

```
var myapp = angular.module('myapp', 
                           ['ngSanitize'], 
                           ['$routeProvider', function ($routeProvider) { ... }]); 
```

# wpf - 将网格设置为 ListBoxItem.content

> ID：12091923
> 
> 赞同：0
> 
> 时间：2012-08-23T12:46:09.957
> 
> 标签：wpf, listbox, listboxitem

我正在尝试创建一个网格，并将其设置为`ListBoxItem`. 出于性能原因，我在 C#`PrepareContainerForItemOverride()`的类方法中这样做。`ListBox`

```
protected override void PrepareContainerForItemOverride(DependencyObject element, object item)
{
    base.PrepareContainerForItemOverride(element, object);
    Grid grid = new Grid();
    ... adding stuff to the grid ...
    ListBoxItem lbItem = element as ListBoxItem;
    lbItem.Content = grid;
} 
```

我可以为内容设置一些字符串，但不能为网格设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:15:07.910

您可以将网格设置为内容，也许您只是看不到它？

因为这很好用：

```
 public MainWindow()
        {
            InitializeComponent();

            var grid = new Grid();
            grid.Children.Add(new TextBox { Text = "Test" });
            var lbItem = new ListBoxItem();
            lbItem.Content = grid;

            _myListBox.Items.Add(lbItem);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:19:31.257

我会使用项目的 ContentTemplate。你可以在 xaml 中设置，它更干净。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T08:33:29.617

```
lbItem.Content = grid;
lbItem.ContentTemplate = null; // Added one line to set ContentTemplate to null 
```

这必须完成，即使 xaml 中没有 ContentTemplate 定义。ListBox 有一些默认的内容模板搞砸了。

# javascript - jQuery 逻辑 - 无限滚动 + 调用 javascript

> ID：12091925
> 
> 赞同：0
> 
> 时间：2012-08-23T12:46:10.707
> 
> 标签：javascript, jquery, wordpress, infinite-scroll

我真的很喜欢这个，花了几个小时在不同的解决方案上，但没有一个有效，我真的没有想法。

所以事情就是这样，我使用无限滚动 + scrollToFixed jQuery 插件来实现类似 9gag 的效果，并且我有一个函数（我使用 WordPress）为每个帖子循环调用脚本：

```
$helper = $count - 1;
if ($count !== 1){
    echo '<script type="text/javascript">
        jQuery(document).ready(function(){
            jQuery("#sticky-'.$helper.'").scrollToFixed(
                { marginTop: 70, limit: jQuery("#item-'.$count.'").offset().top - jQuery("#sticky-'.$helper.'").height()
                }
            );
    });</script>';
}; 
```

现在的问题是，无限滚动不支持标签并且它们没有被调用。有没有办法让我把这两件事结合起来，我试着在 9gag 上查找它，但它对我来说太复杂了，我对 js 不是很好。

感谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:10:25.187

ScrolledToFixed 的一位用户提供了如何使用标签完成连续滚动的演示：

[http://jsfiddle.net/ZZYpG/2/](http://jsfiddle.net/ZZYpG/2/)

希望对其他正在寻找的人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:56:51.440

我找到了一个解决方案，我现在正在使用这个插件：[http ://www.andersonferminiano.com/blog/2012/07/jquery-scroll-pagination/comment-page-1/#comment-690](http://www.andersonferminiano.com/blog/2012/07/jquery-scroll-pagination/comment-page-1/#comment-690)

它将在 php 端包含一些额外的编码，但至少它现在可以工作了！

# codeigniter - 标头位置 CodeIgniter

> ID：12091926
> 
> 赞同：1
> 
> 时间：2012-08-23T12:46:11.317
> 
> 标签：codeigniter, redirect

2 场景：

```
header("Location: login/$username"); 
```

给我

```
http://localhost/login/login/mylogin 
```

和

```
header("Location: /$username"); 
```

给我：

```
http://localhost/mylogin 
```

两者都是错误的。我想`http://localhost/login/mylogin`

怎么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T12:50:00.610

利用

```
redirect('login/'.$username); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:49:23.907

您不应该在 CI 中以这种方式操作标头。

对于重定向使用`redirect()`

和标题使用`$this->output->set_header()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-27T08:08:23.583

`redirect(base_url("login/".$username));`将根据您的要求重定向

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-04T14:28:48.160

试试这个。

```
echo '<script>window.location.href = "'.base_url("login/".$username).'";</script>'; 
```

# java - 具有恒定大小操作的线程安全 NavigableSet？

> ID：12091932
> 
> 赞同：2
> 
> 时间：2012-08-23T12:46:41.627
> 
> 标签：java, multithreading, data-structures, collections, thread-safety

我正在寻找一个与线性运算完全相同`ConcurrentSkipListSet`但没有线性`size`运算的特定数据结构，对于较大的集合，它可能经常被调用。

我知道`Collections.synchronizedNavigableSet(new TreeSet())`，但是同步迭代：

```
synchronized (set) {
    Iterator<T> iter = set.iterator();
    while (iter.hasNext())
    iter.next();
} 
```

很慢。

那么，您是否知道一个与线性操作`NavigableSet`完全相同`ConcurrentSkipListSet`但没有线性`size`操作的实现，例如在 Apache Commons、Guava 中？或者我应该对集合进行不同的迭代？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-23T11:29:19.237

他们没有以这种方式实现它是有充分理由的（即使用计数器）。它是关于多处理器编程的语义。并发程序有许多正确性模型，强（称为顺序一致性）和宽松（称为静态一致性）（参见 Maurice Herlihy 和 Nir ​​Shavit 的 The Art of Multiprocessor Programming 或[Quasi-Linearizability](http://mcg.cs.tau.ac.il/papers/opodis2010-quasi.pdf)）。

计数器的实现未能遵守其中任何一个。如果在实际添加和删除操作之前更新大小，它可能会变为负数（假设您在一个空集上删除和添加，删除首先更新大小导致 -1 大小......）。如果之后更新大小也是如此。即使在添加操作之前增加大小并在删除之后减小大小的解决方案也有一个严重的缺点（但不会产生负值）。考虑两个使用参数“x”的添加操作和一个使用相同参数“x”的删除操作（都具有相同的元素）。可能存在大小将设置为 2 的情况（两次添加操作增加了计数器），一种从未存在过的状态（集合从来没有大小为 2，注意我们总是添加相同的元素 'x'

它的实现方式（通过计算元素，具有线性时间复杂度）至少会产生一个在某个时间点存在的值（更准确地说，它是静态一致的）。

# c++ - OpenCV：错误 C3861：“有限”：找不到标识符

> ID：12091936
> 
> 赞同：1
> 
> 时间：2012-08-23T12:47:05.330
> 
> 标签：c++, opencv, error-handling, background, identifier

我正在使用 Julien Pilet 等人编写的开源代码。在“使背景减法对突然的照明变化具有鲁棒性”的标题下。我没有改变任何东西，只是运行它，然后它给了我以下错误：

```
error C3861: 'finite':identifier not found 
```

我检查并在以下行中的“imstat.h”文件中发生了此错误：

```
if (!finite(det) || det<1e-5) {
        sigma_computed=false;
        n=0;
        one_over_sq_det= 1;
        memset(sigma,0,sizeof(sigma));
        sigma[0][0]=1;
        sigma[1][1]=1;
        sigma[2][2]=1;
        two_ln_sq_det = 2;
    } else {
        one_over_sq_det = 1/sqrtf(det);
        assert(finite(one_over_sq_det));
        two_ln_sq_det = 2*log(sqrtf(det));
        sigma_computed=true;
        n = new_n;
    } 
```

“imstat.h”文件包含在“emvisi2.h”文件中的代码中。有人可以帮我理解这个错误吗？似乎某种类定义中有问题，但我找不到。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:04:52.820

`finite()`是一个过时的 BSD 库函数，您可能会在`<cmath>`.

如果您有 的 C++11 版本`<cmath>`或 C99 版本，则应提供`<math.h>`等效版本。`isfinite()`这在旧版本的标准库中可能不可用。

微软似乎[`_finite()`](http://msdn.microsoft.com/en-us/library/sb8es7a8%28v=vs.100%29.aspx)也在`<float.h>`.

# jquery - 使用uploadify后台上传

> ID：12091938
> 
> 赞同：1
> 
> 时间：2012-08-23T12:47:12.253
> 
> 标签：jquery, css, flash, uploadify, usability

我正在使用 Jquery UI 对话框中的 uploadify flash 组件来使用 AJAX 将文件上传到 Web 服务器。但是，在多个文件上传的情况下，用户必须等到所有文件都上传完毕。

在那之前，无法关闭该对话框 - 如果用户关闭对话框，则上传者丢失。

那么，如何使用 uploadify 或任何其他插件在后台上传文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:07:08.757

首先，当用户点击提交按钮上传文件时，您需要禁用关闭对话框按钮。

然后在初始化uploadify的时候，可以使用一些方法。Uploadifu 有一个“ [queueComplete](http://www.uploadify.com/documentation/uploadify/onqueuecomplete/) ”方法，可以让您知道所有文件何时处理完毕。这是该站点提供的示例。

```
$(function() {
    $("#file_upload").uploadify({
        'swf'      : '/uploadify/uploadify.swf',
        'uploader' : '/uploadify/uploadify.php',
        'onQueueComplete' : function(queueData) {
            alert(queueData.uploadsSuccessful + ' files were successfully uploaded.');
        }
    });
}); 
```

上传所有文件后，onQueueComplete 将触发您放在那里的代码。因此，您可以从那里启用关闭对话框按钮。

至于启用/禁用对话框按钮，您需要向我们提供按钮的代码。是简单的链接吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T02:45:05.863

***您可以通过以下步骤实现后台上传：***

1）在灯箱/用户界面对话框上创建上传。

2）在uploadify下方提供一个按钮，例如完成/开始上传，当用户单击此按钮时隐藏弹出框，隐藏覆盖并调用uploadify方法开始上传文件。

**注意：尝试使用 z-index 将弹出框/对话框隐藏在其他元素下方。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T11:42:41.003

只需更改上传对话框的css，以便在开始上传时它变成窗口底部的一个栏，怎么样？完全删除对话框不是一个好主意，用户不知道上传何时完成以及何时可以安全地离开页面。

如果你真的想删除对话框而不删除上传，总是有

```
$(".upload_dialog").css({ 'display':'none' }); 
```

*编辑：*我尝试了uploadify网站，似乎包含上传对话框的div有一个类“uploadify-queue”，里面的项目是“uploadify-queue-item”。如果您使用的是 Chrome 或 Firefox，您可以通过右键单击您感兴趣的元素并选择“检查元素”来解决类似问题。如果您正在使用 Chrome 或 Firefox 以外的任何东西进行开发，请立即切换！

因此，将其添加到您的 CSS 中应该会在屏幕底部为您提供一个栏。

```
.uploadify-queue 
{
  margin: 0;
  position: fixed;
  bottom: 0;
  width: 100%;
  z-index: 1000;
  background: whiteSmoke;
} 
```

# arrays - Zend Framework：在数组中推送值

> ID：12091940
> 
> 赞同：0
> 
> 时间：2012-08-23T12:47:20.990
> 
> 标签：arrays, zend-framework

那是我的数组：

```
$rows = $this->fetchAll($a)->toArray(); 
```

如何推动这个 exp。'type' => 1 在 $rows 的所有数组中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:53:35.037

使用 foreach 在结果的每一行上循环并推送值。这是非常基本的数组操作，您可以在各处找到示例。

或者，跳过代码中的循环，将 type = 1 移植到 SELECT 语句中。

```
$this->select()
     ->from(array(
         't' => 'fooTable'
     ), array(
         'type' => new Zend_Db_Expr($db->quote('1')), 
         'id'   => 't.id'
         'col1'   => 't.someothercolumn'
         'col2'   => 't.someothercolumn2'
     )
); 
```

# c# - MVC 3 中带有 LINQ 表达式的自定义 html 助手

> ID：12091942
> 
> 赞同：5
> 
> 时间：2012-08-23T12:47:29.120
> 
> 标签：c#, asp.net-mvc-3, html-helper

我正在构建一个带有表达式的自定义 HTML 帮助程序来绘制标签云，其中进入标签云的数据来自表达式。我会让代码在这里说话：

**查看模型**

```
public class ViewModel
{
    public IList<MyType> MyTypes { get; set; }
    public IList<MyOtherType> MyOtherTypes { get; set; }
} 
```

**看法**

```
<div>
    @Html.TagCloudFor(m => m.MyTypes)
</div>

<div>
    @Html.TagCloudFor(m => m.MyOtherTypes)
</div> 
```

**帮手**

```
public static MvcHtmlString TagCloudFor<TModel, TProperty>(this HtmlHelper<TModel> helper, Expression<Func<TModel, TProperty>> expression) where TProperty : IList<MyType> where TProperty : IList<MyOtherType>
{
    // So my actual question here is: how do I get my IList<TProperty> collection 
    // so I can iterate through and build my HTML control
} 
```

我快速浏览了一下并完成了通常的谷歌搜索，但我似乎无法找到具体的答案。我假设它在某个区域，`expression.Compile().Invoke()`但我不确定要传递的正确参数是什么。

我还应该提到这一点，`MyType`并且`MyOtherType`具有类似的属性，`Id`但这里没有继承，它们是完全独立的对象，因此我限制了我`TProperty`的 as`IList<MyType>`和`IList<MyOtherType>`. 我是不是走错了路，我**觉得**这应该很明显，但我的大脑没有在玩。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T12:51:47.823

以下应该做到这一点：

```
public static MvcHtmlString TagCloudFor<TModel , TProperty>( this HtmlHelper<TModel> helper , Expression<Func<TModel , TProperty>> expression )
        where TProperty : IList<MyType>, IList<MyOtherType> {

        //grab model from view
        TModel model = (TModel)helper.ViewContext.ViewData.ModelMetadata.Model;
        //invoke model property via expression
        TProperty collection = expression.Compile().Invoke(model);

        //iterate through collection after casting as IEnumerable to remove ambiguousity
        foreach( var item in (System.Collections.IEnumerable)collection ) {
            //do whatever you want
        }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:23:26.793

怎么样....

```
public static MvcHtmlString TagCloudFor<TModel , TItemType>( this HtmlHelper<TModel> helper , Expression<Func<TModel , IEnumerable<TItemType>>> expression ) 
// optional --- Where TItemType : MyCommonInterface
 { 

        TModel model = (TModel)helper.ViewContext.ViewData.ModelMetadata.Model; 
        //invoke model property via expression 
        IEnumerable<TItemType> collection = expression.Compile().Invoke(model); 

        foreach( var item in collection ) { 
            //do whatever you want 
        } 

    } 
```

# reporting-services - SSRS - 堆叠图中的多个组

> ID：12091943
> 
> 赞同：0
> 
> 时间：2012-08-23T12:47:39.667
> 
> 标签：reporting-services, graph, charts, business-intelligence

有没有办法在 100% 堆叠图表中有多个组？

我的数据只是“Site”、“Timer”、“RunDate”和“AvgDailyDuration”

“站点”是主组，“定时器”是子组，因此每个站点有多个定时器。对于每个“站点”，我想要按日期排列的一组计时器持续时间。

在我的图表数据中，我有： 值：“AvgDailyDuration” 类别组：“RunDate” 系列组：“站点”、“计时器”

这只是将所有这些组合成一个堆叠组，而不管系列组如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T06:30:20.293

您可以创建一个参数来控制每个组的切换。示例是创建参数。转到可用的值并将标签放置为 yes，值为 2，另一个标签为 No，值为 1。在默认值选项卡上，您可以指定 wither 使其扩展或不扩展（即 1 将是不展开：

可用值 标签值 是 2 否 1

然后，您可以在 Group 的 Visability 选项卡上插入一个表达式，然后为 Show based on expression 插入第三个选项的表达式（我相信）：

=IIF（字段！Dataset.Value，= 2，假，真）

不要忘记空格！

希望有帮助。

# android - Android：如何在使用 SingleTask 时清除 Intent Stack

> ID：12091945
> 
> 赞同：5
> 
> 时间：2012-08-23T12:47:49.960
> 
> 标签：android

我`oAuth`在我的应用程序中使用 Twitter 库。用户正在使用他们的 Twitter 帐户登录。

在活动 A 中，可以使用 Twitter 登录。当用户登录时，我想开始没有历史记录的活动 B。这是我所有的东西：

首先，`Manifest.xml`所以我设置`launchMode=singleTask`为 Twitter api 请求：

```
<activity
    android:name=".A_Activity"
    android:label="@string/app_name"
    android:launchMode="singleTask"
    android:theme="@android:style/Theme.Black.NoTitleBar">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" /> 
    </intent-filter>
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
        <category android:name="android.intent.category.BROWSABLE" />
        <data android:scheme="my_twitter_scheme" />
    </intent-filter>
</activity> 
```

这是我开始活动 B 的方式：

```
Intent i = new Intent(A.this, B.class);
i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(i); 
```

注意：我通过 BroadcastReceiver 实例调用活动 B。

当我登录时，我的接收器正确启动了活动 B，但不幸的是，当我按下后退按钮时，应用程序返回到活动 A。

我想这是关于`launchMode`，正如我所说，Twitter 需要这个选项。我究竟做错了什么？任何帮助或建议（也许是关于 Twitter）都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:43:03.417

我确信应该有**更有效的方法**来解决这个问题，但是，我建议一些不同的方法。

只需`finish()`在开始活动后调用方法，活动 A 就会完成，并且当用户在活动 B 中按下后退按钮时，应用程序会如您所愿返回主屏幕。

还要**检查两次**对话以避免任何异常，即检查这个[问题](https://stackoverflow.com/questions/2850573/activity-has-leaked-window-that-was-originally-added/2850597#2850597)（以及答案）以理解我的意思。

# android - 解决 NotSerializableException

> ID：12091948
> 
> 赞同：0
> 
> 时间：2012-08-23T12:48:08.383
> 
> 标签：android

我对Java相当陌生，我似乎无法解决`NotSerializableException`我收到的这个问题。我正在向用户的 SD 卡写入一个对象，接下来我需要将其读回。

这是我的代码：

```
@Override
protected void createAndAttachView(int id, FrameLayout frame) {

    //Read the panel from the memory
    PanelWrapper pnl = (PanelWrapper) readObjectFromMemory(B4AHelper.getDirDefaultExternal(), "layout.frame");

    //Add the view
    frame.addView(pnl.getObject());

    //Broadcast an intent to the user.
    intent = new IntentWrapper();
    intent.Initialize("createAndAttachView", "");
    intent.PutExtra("id", id);
    intent.PutExtra("message", "View Attached");
    sendBroadcast(intent.getObject());

    //Log - debugging
    Log.i("B4A", "View attached!");
} 
```

我正在使用`readObjectFromMemory`和`writeObjectFromMemory`从[这里](https://stackoverflow.com/questions/11211262/write-read-any-object-to-from-android-memory)，这是错误：

```
Error Message: anywheresoftware.b4a.BALayout

Error Message: Read an exception; java.io.NotSerializableException: anywheresoftware.b4a.BALayout

Caused by: java.lang.NullPointerException
    at com.rootsoft.standout.MostBasicWindow.createAndAttachView(MostBasicWindow.java:53)
    at com.rootsoft.standout.StandOutWindow$Window.<init>(StandOutWindow.java:2213)
    at com.rootsoft.standout.StandOutWindow.show(StandOutWindow.java:1416)
    at com.rootsoft.standout.StandOutWindow.onStartCommand(StandOutWindow.java:716)
    at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2359)
    ... 10 more 
```

我想是否有可能解释得尽可能好，因为我还很新，这也可能对其他人有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:58:58.077

在这里，您可以阅读有关 java 中常见的序列化的信息。

[http://java.sun.com/developer/technicalArticles/Programming/serialization/](http://java.sun.com/developer/technicalArticles/Programming/serialization/)

简而言之，一个可序列化的对象有一个从类的成员`static long`字段`serialVersionUID`和方法生成的字段。它用于检查类的定义是否匹配。

例如，您有一个`Serializeable`对象，您将其写入文件，`byte[]`并且您想稍后再读回它。如果同时您更改了类中的某些字段或方法（例如，文件中的类定义和当前使用的类定义不再相同），那么 java 可以从无效的 UID 中发现这些差异并且它会知道，尽管它们可能是同一类型，但它们不兼容。

当然，您也可以分配一个默认 UID，或者如果您知道这种情况肯定不会发生，您可以将其留空。

至于摆脱你的异常，你只需要`Serializable`在你的类中实现接口（在你的情况下是anywheresoftware.b4a.BALayout）。

# php - PHP 会话登录记住我

> ID：12091951
> 
> 赞同：26
> 
> 时间：2012-08-23T12:48:21.617
> 
> 标签：php, login

我有一个使用 PHP Sessions 的 PHP 注册/登录系统，它运行良好，我希望用户能够记住我，然后他们永远保持登录状态，或者至少一周或其他时间。

我猜我需要存储一个 cookie 并检查，我对我实际需要存储在 cookie 中的内容感到困惑。如果我存储用户 ID 或用户名，那么就不能有人使用假 cookie 来查看其他用户数据吗？

任何提前表示赞赏。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-12-14T02:03:07.713

您需要做的就是扩展 PHP 会话 cookie。以下示例将 cookie 延长 30 天：

```
$params = session_get_cookie_params();
setcookie(session_name(), $_COOKIE[session_name()], time() + 60*60*24*30, $params["path"], $params["domain"], $params["secure"], $params["httponly"]); 
```

我认为通过您的安全问题，您只关心放置容易被黑客入侵的值。PHP 会话 cookie 具有随机值并将其内容存储在文件系统中，因此您应该没问题。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-23T12:56:52.647

登录成功后执行：

```
$_SESSION['user_is_loggedin'] = 1;

$cookiehash = md5(sha1(username . user_ip));
setcookie("uname",$cookiehash,time()+3600*24*365,'/','.yoursite.com'); 
```

存储在sql中：

```
$sql = "UPDATE `users` SET `login_session`='$cookiehash' WHERE `user_id`='$uid'"; 
```

检查用户是否登录：

```
function CheckCookieLogin() {
    $uname = $_COOKIE['uname']; 
    if (!empty($uname)) {   
        $sql = "SELECT * FROM `users` WHERE `login_session`='$uname'";
        $_SESSION['user_is_loggedin'] = 1;
        $_SESSION['cookie'] = $uname;
        // reset expiry date
        setcookie("uname",$uname,time()+3600*24*365,'/','.yoursite.com');
    }
}

if(!isset($_SESSION['cookie']) && empty($_SESSION['user_is_loggedin'])) {
    CheckCookieLogin();
} 
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-08-23T12:57:00.790

我经常使用的小例子

```
function setSession($username,$password,$cookie=null){
    // Other code for login ($_POST[]....)
    // $row is result of your sql query
    $values = array($username,$this->obscure($password),$row['id']);         
    $session = implode(",",$values);

    // check if cookie is enable for login
    if($cookie=='on'){
        setcookie("your_cookie_name", $session, time()+60*60*24*100,'/');
    } else {
        $_SESSION["your_session_name"] = $session;
    }
} 
```

# html - 如何将值从使用 HtmlService 创建的用户界面发送到谷歌电子表格

> ID：12091954
> 
> 赞同：1
> 
> 时间：2012-08-23T12:48:25.620
> 
> 标签：html, google-apps-script

我有一个使用谷歌脚本 HtmlService 创建的表单。一旦表单提交到谷歌电子表格，我需要发送捕获的数据，所以我需要与服务器端的脚本进行通信。我一直在关注[HtmlService](https://developers.google.com/apps-script/html_service)上的 google 文档，并且从文档中，我得出了这个示例代码，至少是为了测试使用 google.script API 从 html 调用服务器上的函数，但它没有为我工作：

谷歌应用脚​​本：

```
function doGet(e) {
  Logger.log("Creating page...");
  return HtmlService.createTemplateFromFile("myFile").evaluate();
}

function test() {
  return "Testing";
} 
```

和 html 文件：

```
<html>
  <SCRIPT>
    function evaluate(form) {
      var a = google.script.run.test();
      form.fieldName.value = a;
    }
  </SCRIPT>
    <form>
       <INPUT type = text name ="fieldName" class = "input_field" > 
       <INPUT TYPE="button" NAME="buttonSubmit" Value="Guardar"    onClick='evaluate(this.form)' >
  </form>
</html> 
```

¿ 这段代码有什么问题？对此的任何见解将不胜感激，或者替代方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T17:50:47.787

HtmlService 主要用于客户端功能，而不是基于服务器的操作。但是，您可以使用 google.script.run.FunctionName(parameter) 调用服务器函数。

例子

```
<input type='button' value="Click me" onclick='google.script.run.processForm(this.parentNode) 
```

# java - ChannelPipelineCoverage 已弃用。有替代品吗？

> ID：12091957
> 
> 赞同：1
> 
> 时间：2012-08-23T12:48:35.027
> 
> 标签：java, netty

我正在尝试消除我必须使用的库产生的警告。

我已经将库的 netty 版本提升到 3.5.4.Final。但是，ChannelPipelineCoverage 注释似乎已被弃用。

我的问题是：是否有任何简单的替代品，或者这是否需要大量编码？如果是这样，我会喜欢一些关于如何开始的参考！

没有@ChannelHandler.Shareable() 的类是否与具有@ChannelPipelineCoverage("one") 的类相同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T12:19:11.423

不知道你现在是否已经想通了，但是名称已更改为“可共享”，如所述：NETTY-283：

Logged Change Request [here](https://issues.jboss.org/browse/NETTY-283) : and some mailing archive [here](http://mail-archive.ow2.org/accord-commits/2012-03/msg00000.html) : 建议使用：import org.jboss.netty.channel.ChannelHandler.Sharable，在你的 Java 类中设置引用。

# unit-testing - 测量数据映射函数和闭包的圈复杂度

> ID：12091959
> 
> 赞同：4
> 
> 时间：2012-08-23T12:48:36.110
> 
> 标签：unit-testing, complexity-theory, cyclomatic-complexity

根据圈复杂度的基本规则，以下代码的复杂度应为 2（只有一个分支点 - for 循环）。

```
function SumArray(array_to_sum) {
    var sum = 0;
    for (var i = 0; i < array_to_sum.length; i++) {
        sum += array_to_sum[i];
    }
    return sum;
} 
```

很多现代框架等都提供了数据映射功能，比如或者框架`jQuery.each()`中的大部分方法。`Underscore.js`考虑以下代码：

```
function SumArray(array_to_sum) {
    var sum = 0;
    jQuery.each(array_to_sum, function(index, value) {
        sum += value;
    });
    return sum;
} 
```

按照圈复杂度的典型规则，第二个例子的CC度量为1。工作完全相同，函数的人为复杂度根本没有改变。我所做的只是将一种循环数据的方式换成另一种循环数据的方式。

同样考虑这个人为的例子，我们将原始函数的内部包装在一个自调用闭包中，为外部方法生成 1 的圈复杂度，而实际上并未改变方法的工作方式：

```
function SumArray(array_to_sum) {
    return (function() {
        var sum = 0;
        for (var i = 0; i < array_to_sum.length; i++) {
            sum += array_to_sum[i];
        }
        return sum;
    })();
} 
```

**圈复杂度的真正度量是否应该包括对数据映射/减少方法的考虑，例如`jQuery.each()`特别是在使用匿名局部闭包时？**

也许闭包应该将其复杂性导出到关闭的父级。另外，也许一般的方法应该能够定义一个导出复杂度，该复杂度被添加到调用它的任何函数的复杂度中——例如`jQuery.each()`，导出复杂度可能应该为 1，以便使用它代替正常循环计数复杂度相同.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T14:10:06.830

圈复杂度是代码可读性的度量。McCabe 部分描述了测量圈复杂度的前提，“此外，复杂的组件也难以理解、难以测试和难以修改。”

即对读者来说复杂的代码更容易出现错误，因为它更难测试（通过单个代码块的更多路径。它可能会留下错误，因为很难修改，因为他们更难理解，所以人们避免修改它。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-26T04:45:37.727

**圈复杂度的真正度量是否应该包括对数据映射/减少方法的考虑，例如 jQuery.each() 尤其是在使用匿名本地闭包时？**

是的。当然。任何。

但请记住，“圈复杂度”是[人为的](http://en.wikiquote.org/wiki/Leopold_Kronecker)；它只是我们给特定启发式算法家族的一个名称，用于估计特定代码的“复杂性”。如果您碰巧正在为 jQuery（或任何其他支持 lambda 的语言）设计一个圈复杂度审计工具，那么是的，一个特例 for`jQuery.each()`将是一个很好的功能，并让用户定义他们的“导出复杂度”自己的功能将是一个更好的功能。但是，让我们不要被关于这是计算圈复杂度的最真实方法的浮夸语言冲昏了头脑。这只是启发式的改进。我可以再给你十个可能的改进。

# c# - foreach 语句 c#

> ID：12091965
> 
> 赞同：0
> 
> 时间：2012-08-23T12:48:47.390
> 
> 标签：c#, datagrid, foreach

对于每个语句，我需要一些帮助，基本上，当用户编辑单元格中的值时，我的 foreach 会将其应用于数据网格中的所有单元格并更改它们的值，我需要我的 foreach 语句才能工作通过遍历数据网格，但只更改已编辑的选定行，但此刻它似乎正在更新所有行的计数，这应该只是当前行

```
foreach (DataGridViewRow row in dgvDetials.Rows) //loop through each of the results
            {
                string scrapDate, scrapShift, PartCode;
                scrapDate = dtpInspectionDate.Value.ToString("MM/dd/yyyy");
                scrapShift = cbShift.Text;

                PartCode = row.Cells[0].Value.ToString();

                //define each of the counts
                int qtyInspCount = SQLMethods.CountQtyInspTotal(scrapDate, scrapShift, area, PartCode);
                int scrapCount = SQLMethods.CountScrapReworkTotal(scrapDate, scrapShift, area, PartCode, "S");
                int reworkCount = SQLMethods.CountScrapReworkTotal(scrapDate, scrapShift, area, PartCode, "R");

                //populate each of the counts cells
                row.Cells[2].Value = 0;
                row.Cells[5].Value = qtyInspCount;
                row.Cells[3].Value = scrapCount;
                row.Cells[4].Value = reworkCount;
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:52:18.913

您只需更改当前行。
然后，您应该避免对整个数据网格行集合进行冗长的循环。

[CurrentRow](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.currentrow.aspx)属性就是为此而生的。

```
if(dgvDetials.CurrentRow != null)
{
    // Reference the current row 
    DataGridViewRow row = dgvDetials.CurrentRow;

    PartCode = row.Cells[0].Value.ToString(); 
    .....
    row.Cells[2].Value = 0; 
    row.Cells[5].Value = qtyInspCount; 
    row.Cells[3].Value = scrapCount; 
    row.Cells[4].Value = reworkCount; 
    .....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:37:45.860

您需要绑定到[CellValueChanged](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellvaluechanged.aspx)事件或获取选定的 GridViewRow。

```
GridViewRow datRow = SomeGridView.SelectedRow; 
```

# python - 如何在python pandas的多级索引中获取一个系列

> ID：12091967
> 
> 赞同：1
> 
> 时间：2012-08-23T12:48:48.010
> 
> 标签：python, pandas

我有一个数据框'df'，它有一个多级索引（'STK_ID'，'RPT_Date'）：

```
 sales        cogs    net_pft
STK_ID RPT_Date                                   
600809 20120331  2214010000   509940000  492532000
       20111231  4488150000  1077190000  780547000
       20110930  3563660000   850789000  707537000
       20110630  2894820000   703883000  658625000 
```

一些代码：

```
>>> df.index.names
['STK_ID', 'RPT_Date'] 
```

现在我想通过以下方式获取 RPT_Date 列的系列值（20120331,20111231,20110930,20110630）：

```
>>> df['RPT_Date'] # not work 
```

我如何获得这些数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:09:42.480

我修好了它。

```
df.index.get_level_values('RPT_Date')

array([20120331, 20111231, 20110930, 20110630, 20110331, 20101231,
       20100930, 20100630, 20100331, 20091231, 20090930, 20090630,
       20090331, 20081231, 20080930, 20080630, 20080331, 20071231,
       20070930, 20070630, 20070331, 20061231, 20060930, 20060630,
       20060331], dtype=object) 
```

我觉得语法很丑，为什么 Pandas 的开发者不接受直接的方式`df['RPT_Date']`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T21:01:52.270

如果您这样做，那将起作用：

```
df2 = df.reset_index()
df2['RPT_Date'] 
```

# php - 如何在 mysqli 中开始和结束事务？

> ID：12091971
> 
> 赞同：44
> 
> 时间：2012-08-23T12:48:55.743
> 
> 标签：php, transactions, mysqli

据我了解，事务在我们调用`$mysqli->autocommit(FALSE);`语句后开始，并在调用`$mysqli->commit();`命令后结束，如下例所示。

```
<?php
//Start transaction 
$mysqli->autocommit(FALSE);
$mysqli->query('UPDATE `table` SET `col`=2');
$mysqli->query('UPDATE `table1` SET `col1`=3;');
$mysqli->commit();
//End transaction

//Executing other queries without transaction control
$mysqli->query("Select * from table1");
$mysqli->query("Update table1 set col1=2");
//End of executing other queries without transaction control

//Start transaction 
$mysqli->autocommit(FALSE);
$mysqli->query('UPDATE `table` SET `col`=2');
$mysqli->query('UPDATE `table1` SET `col1`=3;');
$mysqli->commit();
//End transaction
?> 
```

我理解正确了吗？如果不是，请纠正我，因为这实际上是我第一次在现实生活中使用交易。

谢谢你。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-23T12:59:12.837

**2020 年 11 月更新**：[@Dharman](https://stackoverflow.com/users/1839439/dharman)给出了更好的答案，提供了有关 mysqli 中事务的更多详细信息，只需检查一下即可：[https ://stackoverflow.com/a/63764001/569101](https://stackoverflow.com/a/63764001/569101)

* * *

那么根据[php doc](http://www.php.net/manual/en/mysqli.commit.php)，你是对的。

```
<?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$mysqli->query("CREATE TABLE Language LIKE CountryLanguage");

/* set autocommit to off */
$mysqli->autocommit(FALSE);

/* Insert some values */
$mysqli->query("INSERT INTO Language VALUES ('DEU', 'Bavarian', 'F', 11.2)");
$mysqli->query("INSERT INTO Language VALUES ('DEU', 'Swabian', 'F', 9.4)");

/* commit transaction */
$mysqli->commit();

/* drop table */
$mysqli->query("DROP TABLE Language");

/* close connection */
$mysqli->close();
?> 
```

在上面的例子中：

*   这`CREATE TABLE`是自动提交的，因为它是默认行为。
*   由于. _ `INSERT INTO` **_**`autocommit(FALSE)`
*   是`DROP TABLE`自动提交的，*因为*`autocommit(FALSE)`被.*`->commit();`*

 ** * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-05-24T09:02:00.757

j0k 主要是正确的，除了在 drop table 中。

没有打开自动提交`->commit()`

相反，DROP TABLE 是一个 DDL 查询，并且 DDL 查询始终是隐式提交的，并将提交您之前未提交的所有工作。

因此，如果您没有提交工作，DDL 查询将强制提交。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2020-09-06T12:09:34.583

# 如何在 mysqli 中使用事务？

## 先决条件

为了使事务正常运行，您应该启用异常错误报告。否则mysqli不会报错，事务也不会正确执行。或者，您可以手动检查每个查询，但不建议这样做。要与 mysqli 正确连接，请使用以下 3 行：

```
mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);
$mysqli = new mysqli('localhost', 'user', 'pass', 'dbname');
$mysqli->set_charset('utf8mb4'); // always set the charset 
```

事务仅适用于事务表。确保您的表存储引擎支持事务。例如，MyISAM 忽略提交/回滚。

## 交易

使用 mysqli 创建事务有两种可能的方法。默认情况下，所有查询/语句在执行后立即提交。您可以关闭自动提交或使用一次性事务。

在以下情况下，事务将提交到数据库：

*   打电话时`commit`
*   设置 autocommit=1 后
*   开始另一笔交易时
*   执行 DDL 查询时
*   在其他一些情况下。有关更多信息，请参阅[导致隐式提交的语句](https://dev.mysql.com/doc/refman/8.0/en/implicit-commit.html)

## 使用自动提交（假）

如果您关闭自动提交，则您决定何时提交，但调用`commit()`不会重新打开自动提交。

```
//Start transaction
$mysqli->autocommit(false);

$mysqli->query('INSERT INTO director(name) VALUE("Steven Spielberg")');

$directorId = $mysqli->insert_id;
$movieTitle = 'Jurassic Park';
$stmt = $mysqli->prepare('INSERT INTO movie(title, directorId) VALUE(?,?)');
$stmt->bind_param('ss', $movieTitle, $directorId);
$stmt->execute();

$mysqli->commit();
// Changes are committed, but autocommit is not switched back on

// Following queries are still transactional.
// They will not be committed unless you call commit or switch autocommit back on
$mysqli->query('INSERT INTO director(name) VALUE("James Cameron")');

$directorId = $mysqli->insert_id;
$movieTitle = 'Titanic';
$stmt = $mysqli->prepare('INSERT INTO movie(title, directorId) VALUE(?,?)');
$stmt->bind_param('ss', $movieTitle, $directorId);
$stmt->execute();

$mysqli->autocommit(true);
// All queries are committed and everything that follows will be immediately committed. 
```

## 使用 begin_transaction()

您可以使用`begin_transaction()`. 这没有设置`autocommit=false`，所以当您调用`commit()`您结束事务而不开始新事务时。

```
//Start transaction 
$mysqli->begin_transaction();

$mysqli->query('INSERT INTO director(name) VALUE("Steven Spielberg")');

$directorId = $mysqli->insert_id;
$movieTitle = 'Jurassic Park';
$stmt = $mysqli->prepare('INSERT INTO movie(title, directorId) VALUE(?,?)');
$stmt->bind_param('ss', $movieTitle, $directorId);
$stmt->execute();

$mysqli->commit();
// Changes are committed and the transaction has ended

// Following queries will be committed one by one as soon as they are peformed.
$mysqli->query('INSERT INTO director(name) VALUE("James Cameron")');

$directorId = $mysqli->insert_id;
$movieTitle = 'Titanic';
$stmt = $mysqli->prepare('INSERT INTO movie(title, directorId) VALUE(?,?)');
$stmt->bind_param('ss', $movieTitle, $directorId);
$stmt->execute(); 
```

## 执行 DDL 语句

一些 SQL 语句会触发显式提交，但不会影响`autocommit`.

```
//Start transaction 
$mysqli->autocommit(false);

$mysqli->query('INSERT INTO director(name) VALUE("Steven Spielberg")');

$directorId = $mysqli->insert_id;
$movieTitle = 'Jurassic Park';
$stmt = $mysqli->prepare('INSERT INTO movie(title, directorId) VALUE(?,?)');
$stmt->bind_param('ss', $movieTitle, $directorId);
$stmt->execute();

// The following will call commit but it will not set autocommit=true
$mysqli->query('TRUNCATE TABLE movie_genre');
// if you want to switch autocommit back on, you have to call: 
$mysqli->autocommit(true); 
```

## 回滚

如果发生异常，则 PHP 将结束脚本的执行，并且代码将永远不会到达`commit`语句。但是，在某些情况下，您可能希望显式回滚事务，例如避免在代码的其他地方意外调用 commit。

以下是此类交易的示例。第二个查询尝试插入到一个不存在的表中，这意味着 mysqli 将抛出异常。我们不是让 PHP 脚本死掉，而是捕获异常并回滚事务。该值`4`将永远不会插入到数据库中，因为这两个查询都已回滚。

```
try {
    // Start transaction
    $mysqli->begin_transaction();

    $mysqli->query('INSERT INTO some_table(col2) VALUE(4)');
    $mysqli->query('INSERT INTO does_not_exist(col2) VALUE(4)');

    // Commit changes
    $mysqli->commit();
} catch (\Throwable $e) {
    // Something went wrong. Rollback
    $mysqli->rollback();
    // Rethrow the exception so that PHP does not continue
    // with the execution and the error can be logged in the error_log
    throw $e;
} 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-07-16T21:08:04.610

准备一次 SQL 语句，然后执行几次：

```
<?php
$Mysqli = new mysqli("host","user","pass","base");

// check connection
if(mysqli_connect_errno())
{
  printf("Connect failed: %s\n",mysqli_connect_error());
  exit();
}

// some data for db insertion
$countries=['Austria','Belgia','Croatia','Denmark','Estonia'];

// explicitly begin DB transaction
$Mysqli->begin_transaction();

// prepare statement (for multiple inserts) only once
$stmt=$Mysqli->prepare("INSERT INTO table(column) VALUES(?)");

// bind (by reference) prepared statement with variable $country
$stmt->bind_param('s',$country);

// load value from array into referenced variable $country
foreach($countries as $country)
{
  //execute prep stat more times with new values
  //$country is binded (referenced) by statement
  //each execute will get new $country value
  if(!$stmt->execute())
  {
    // rollback if prep stat execution fails
    $Mysqli->rollback();
    // exit or throw an exception
    exit();
  }
}

// close prepared statement
$stmt->close();

// commit transaction
$Mysqli->commit();

// close connection
$Mysqli->close();

?> 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-01-04T15:49:14.613

你认为`commit`自动切换`autocommit`回`true`? [PHP Doc](https://www.php.net/manual/en/mysqli.commit.php#89976)中的一条评论说不！*

# python - 在内部函数内部分配外部变量的python闭包

> ID：12091973
> 
> 赞同：18
> 
> 时间：2012-08-23T12:49:05.470
> 
> 标签：python, closures, scope, python-2.x

我有这段代码：

```
#!/usr/bin/env python

def get_match():
  cache=[]
  def match(v):
    if cache:
      return cache
    cache=[v]
    return cache
  return match
m = get_match()
m(1) 
```

如果我运行它，它会说：

```
UnboundLocalError: local variable 'cache' referenced before assignment 
```

但如果我这样做：

```
#!/usr/bin/env python

def get():
  y = 1
  def m(v):
    return y + v
  return m

a=get()
a(1) 
```

它运行。

清单上有东西吗？还是我的代码组织错误？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-23T12:56:24.750

问题是变量`cache`不在函数匹配的范围内。如果您只想像第二个示例中那样读取它，这不是问题，但是如果您正在分配它，python 会将其解释为局部变量。如果你使用的是 python 3，你可以使用`nonlocal`关键字来解决这个问题——不幸的是，对于 python 2，没有简单的解决方法。

```
def f():
    v = 0

    def x():
        return v    #works because v is read from the outer scope

    def y():
        if v == 0:  #fails because the variable v is assigned to below
            v = 1

    #for python3:
    def z():
        nonlocal v  #tell python to search for v in the surrounding scope(s)
        if v == 0:
            v = 1   #works because you declared the variable as nonlocal 
```

`global`全局变量的问题有些相同 -每次分配给全局变量时都需要使用，而不是读取它。

背后原因的简短解释：python解释器将所有函数编译成一个特殊的类型对象`function`。在此编译期间，它检查函数创建的所有局部变量（用于垃圾收集等）。这些变量名保存在函数对象中。由于“隐藏”外部范围变量（创建具有相同名称的变量）是完全合法的，因此任何分配给且未显式声明为`global`（或`nonlocal`在 python3 中）的变量都被假定为局部变量。

当函数执行时，解释器必须查找它遇到的每个变量引用。如果在编译过程中发现该变量是本地变量，则在函数 f_locals 字典中进行搜索。如果尚未分配，则会引发您遇到的异常。如果变量未在函数范围内分配，因此不是其局部变量的一部分，则会在周围的范围内查找它 - 如果在那里找不到，则会引发类似的异常。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-23T13:00:37.580

Accessing a variable is different from assigning it.

You have a similar situation with global variables. You can access them in any function, but if you try to assign to it without the `global` statement, it will redeclare it in the local context.

Unfortunately for local functions there is no equivalent of the `global` statement, but you can bypass the redeclaration by replacing

```
cache=[v] 
```

with:

```
cache[:] = [v] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-23T12:57:57.380

由于 Python 看到`cache=[v]`- 赋值给`cache`，所以它把它当作局部变量。所以这个错误是相当合理的——在声明中`cache`使用它之前没有定义局部变量。`if`

你可能想把它写成：

```
def get_match():
  cache=[]
  def match(v):
    if cache:
      return cache
    cache.append(v)
    return cache
  return match
m = get_match()
m(1) 
```

强烈推荐阅读：[执行模型 - 命名和绑定](http://docs.python.org/reference/executionmodel.html#naming-and-binding)和[PEP 227 - 静态嵌套范围](http://www.python.org/dev/peps/pep-0227/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T13:03:37.880

代替

```
cache=[]
def match(v): 
```

和

```
def match(v,cache=[]) 
```

说明：您的代码声明`cache`为 的变量`get_match`，返回的变量对此`match(v)`一无所知（由于以下分配）。但是，您确实希望`cache`成为`match`' 名称空间的一部分。

我知道这样一个“恶意”用户可以重新定义缓存，但这是他们自己的错误。~~如果这*是*一个问题，替代方案是：~~

 ~~```
def match(v):
     try:
         if cache:
             return cache
     except NameError:
         cache = []
     ... 
```~~ 

~~（见[这里](https://stackoverflow.com/a/1592578/321973)）~~

# android - 无法在安卓手机上运行签名的apk

> ID：12091978
> 
> 赞同：2
> 
> 时间：2012-08-23T12:49:30.227
> 
> 标签：android, apk, signed, runtimeexception, osmdroid

我正在尝试创建一个签名的 android apk 文件，这很好用。我在我的手机（Android 2.2）上安装了该文件，但是当我打开应用程序时，我在我的 Logcat 中得到了这个堆栈跟踪：

```
08-23 13:58:55.271: E/AndroidRuntime(3643): FATAL EXCEPTION: main
08-23 13:58:55.271: E/AndroidRuntime(3643): java.lang.RuntimeException: Unable to create application net.osmand.activities.OsmandApplication: java.lang.UnsupportedOperationException: java.lang.NoSuchMethodException: values
08-23 13:58:55.271: E/AndroidRuntime(3643):     at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4247)
08-23 13:58:55.271: E/AndroidRuntime(3643):     at android.app.ActivityThread.access$3000(ActivityThread.java:125)
08-23 13:58:55.271: E/AndroidRuntime(3643):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2071)
08-23 13:58:55.271: E/AndroidRuntime(3643):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-23 13:58:55.271: E/AndroidRuntime(3643):     at android.os.Looper.loop(Looper.java:123)
08-23 13:58:55.271: E/AndroidRuntime(3643):     at android.app.ActivityThread.main(ActivityThread.java:4627)
08-23 13:58:55.271: E/AndroidRuntime(3643):     at java.lang.reflect.Method.invokeNative(Native Method)
08-23 13:58:55.271: E/AndroidRuntime(3643):     at java.lang.reflect.Method.invoke(Method.java:521)
08-23 13:58:55.271: E/AndroidRuntime(3643):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:871)
08-23 13:58:55.271: E/AndroidRuntime(3643):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:629)
08-23 13:58:55.271: E/AndroidRuntime(3643):     at dalvik.system.NativeStart.main(Native Method)
08-23 13:58:55.271: E/AndroidRuntime(3643): Caused by: java.lang.UnsupportedOperationException: java.lang.NoSuchMethodException: values
08-23 13:58:55.271: E/AndroidRuntime(3643):     at java.lang.ClassCache.callEnumValues(ClassCache.java:637)
08-23 13:58:55.271: E/AndroidRuntime(3643):     at java.lang.ClassCache.getEnumValuesInOrder(ClassCache.java:613)
08-23 13:58:55.271: E/AndroidRuntime(3643):     at java.lang.ClassCache.getEnumValuesByName(ClassCache.java:587)
08-23 13:58:55.271: E/AndroidRuntime(3643):     at java.lang.ClassCache.getEnumValue(ClassCache.java:546)
08-23 13:58:55.271: E/AndroidRuntime(3643):     at java.lang.Enum.valueOf(Enum.java:177)
08-23 13:58:55.271: E/AndroidRuntime(3643):     at aA.a(Unknown Source)
08-23 13:58:55.271: E/AndroidRuntime(3643):     at az.i(Unknown Source)
08-23 13:58:55.271: E/AndroidRuntime(3643):     at net.osmand.activities.OsmandApplication.onCreate(Unknown Source)
08-23 13:58:55.271: E/AndroidRuntime(3643):     at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:969)
08-23 13:58:55.271: E/AndroidRuntime(3643):     at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4244)
08-23 13:58:55.271: E/AndroidRuntime(3643):     ... 10 more
08-23 13:58:55.271: E/AndroidRuntime(3643): Caused by: java.lang.NoSuchMethodException: values
08-23 13:58:55.271: E/AndroidRuntime(3643):     at java.lang.ClassCache.findMethodByName(ClassCache.java:308)
08-23 13:58:55.271: E/AndroidRuntime(3643):     at java.lang.ClassCache.callEnumValues(ClassCache.java:633)
08-23 13:58:55.271: E/AndroidRuntime(3643):     ... 19 more 
```

当我在我的设备上从 Eclipse 运行 apk 时，它运行良好。还将apk发送给朋友，他的apk也运行良好（通过eclipse构建bin目录中的on）。

谁能指出我正确的方向？我相信我可能会丢失一些库，但我会觉得这很奇怪，因为从 Eclipse 运行它时它工作正常。但就像我说的我是菜鸟！

# coldfusion - 如何复制文件？

> ID：12091980
> 
> 赞同：0
> 
> 时间：2012-08-23T12:49:36.290
> 
> 标签：coldfusion, railo

如何在我的服务器上复制文件？我可以阅读它，`<cffile action="read">`但我想以新名称复制它。

我找到`<cffile action="copy">`了，但我只能将它复制到另一个目录。我需要在同一个目录中复制它。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T13:17:45.067

不，`<cffile action="copy">`可以在与现有文件相同的目录中创建副本。只要你使用不同的文件名。因此，如果您无法这样做，则有其他问题。请发布您的代码和任何错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T12:58:40.663

未经测试，但一种选择可能是将文件作为二进制文件读取，然后将其写入新文件。

示例取自 Adob​​e 文档底部：- [http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_f_08.html](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_f_08.html)

```
<cffile action = "readBinary" file = "C:\inetpub\wwwroot\cfdocs\getting_started\photos\somewhere.jpg" variable = "aBinaryObj">

    <!--- Output binary object to JPEG format for viewing. --->
    <cffile action="write" file = "c:\files\updates\somewhereB.jpg" output = "#toBinary(aBinaryObj)#">

    <!--- HTML to view image. --->
    <img src="C:\files\updates\somewhereB.jpg"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T15:55:57.083

接受的答案过于复杂。这就是你所需要的：

```
<cffile action="COPY" source="C:\inetpub\wwwroot\cfdocs\getting_started\photos\somewhere.jpg" destination="C:\inetpub\wwwroot\cfdocs\getting_started\photos\somewhere_Copy.jpg"> 
```

# web-services - 类似于 Dropbox 的服务实现

> ID：12091982
> 
> 赞同：1
> 
> 时间：2012-08-23T12:49:39.673
> 
> 标签：web-services, cloud, sync

我想以更小的规模创建类似于 DropBox 的云服务。

是否有任何开源项目（最好是基于 .NET）可以快速开始创建服务和基于 Windows 的客户端。

普拉提克

# c# - 重新启动后将对象列表存储在 db4o 中

> ID：12091984
> 
> 赞同：1
> 
> 时间：2012-08-23T12:49:44.143
> 
> 标签：c#, arraylist, db4o

我有这个问题，我有一个类的属性，它是一个 ArrayList，然后将这个类存储在 db4o 容器中会在服务器重新启动后清除列表。

具有 ArrayList 属性的类看起来有点像这样：

```
public class Planet
{
    public string Name { get; set; }
    public string Identifier { get; set; }

    // Planet has an ArrayList property called Moons.
    public ArrayList Moons { get; set; }
} 
```

填充类并将其存储到数据库

```
if (planet.Moons == null)
{
    planet.Moons = new ArrayList();
    planet.Moons.Add(new Moon("MoonOne"));
    planet.Moons.Add(new Moon("MoonTwo"));

    Database.Store(planet);
} 
```

只要服务器运行一切正常，列表是正确的并且其中的值是正确的。该类的其他属性也正确无误。

重新启动服务器并清除列表。尽管该课程的其余部分仍然正确，并且数据库中的其他所有内容都很好，但是由于某种原因，只有列表被清除了。

有没有人知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T17:25:53.390

数据库.存储（行星）；

这是商店还是更新？我的意思是，在设置“Moons”成员之前，已经从 db 中检索了“planet”对象，或者它是一个新实例化的 obj？

您是否尝试过使用简单的嵌入式应用程序？

# c# - 文件上传和调整 asp.net 的大小

> ID：12091985
> 
> 赞同：0
> 
> 时间：2012-08-23T12:49:50.670
> 
> 标签：c#, asp.net, image

我正在尝试创建一个画廊，用户在其中使用 fileupload 控件上传图像，然后调整大小然后保存到服务器上的文件系统。他们可以上传 jpg、png 和 gif 文件。

我知道您可以上传然后检查大小的过程，但这似乎效率低下。我听说过 memorystream，但不确定如何使用它。

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:52:45.540

在完整文件位于服务器端之前，您无法调整图片大小。

是的，它效率低下，但这是网络的现实。唯一的选择是使用客户端代码（activex、silverlight、flash），但这可能不是一个好习惯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T12:56:07.233

您可以尝试使用此代码 - 指定的大小以千字节为单位。默认值为 4096 KB (4 MB)。

```
if (FileUpload1.HasFile)
{
if (FileUpload1.PostedFile.ContentLength < yourSize) //Adjust your size 
{
   .........
}
else
{
Label1.Text = "File size exceeds maximum limit 20 MB.";
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T15:22:37.690

默认情况下，最大上传为 4mb（使用 .Net） - 可以使用重置

```
<httpRuntime executionTimeout="sss" maxRequestLength="xxxx" /> 
```

然而，这确实是一种讨厌的方式，因为友好的错误消息很少被接收（即没有好的消息）。如果 HTTPRunTime 也超过了，即使在 Upload 上使用 ContentLength 也会被炸毁。Microsoft 建议使用更大的 httRuntime 值，然后通过 ContentLength 进行限制（打破两者都会导致讨厌的错误 - 通常）。

另一种选择是使用这样的东西 ==> [Ajax Uploader](http://ajaxuploader.com/Demo/Large-File-Upload.aspx)

# c# - 使用 xslt 时，名称不能以 '=' 字符十六进制值 0x3d 开头

> ID：12091993
> 
> 赞同：0
> 
> 时间：2012-08-23T12:50:19.337
> 
> 标签：c#

我有一些html。我尝试用库清理它：http: [//sourceforge.net/projects/tidynet/](http://sourceforge.net/projects/tidynet/)

这是我的代码：

```
//clean up html
            Tidy tidy = new Tidy();

            tidy.Options.DocType = DocType.Omit;
            tidy.Options.DropFontTags = true;
            tidy.Options.LogicalEmphasis = true;
            tidy.Options.Xhtml = true;
            tidy.Options.XmlOut = true;
            tidy.Options.MakeClean = true;
            tidy.Options.TidyMark = false;
            tidy.Options.CharEncoding = CharEncoding.UTF8;

            /* Declare the parameters that is needed */
            TidyMessageCollection tmc = new TidyMessageCollection();
            MemoryStream input = new MemoryStream();
            MemoryStream output = new MemoryStream();

            byte[] byteArray = Encoding.UTF8.GetBytes(report);
            input.Write(byteArray, 0, byteArray.Length);
            input.Position = 0;
            tidy.Parse(input, output, tmc);

            string cleanHtml = Encoding.UTF8.GetString(output.ToArray()); 
```

然后我尝试使用 xslt：

```
try
            {
                StringBuilder res = new StringBuilder();
                XslCompiledTransform xslt = new XslCompiledTransform();
                xslt.Load(XmlReader.Create(new StringReader(stylesheet.Content)));
                xslt.Transform(StringExtensions.ToXmlReader(cleanHtml), null, new StringWriter(res));
                var resultReport = res.ToString();
            }
            catch (Exception e)
            {

            } 
```

我得到一个例外：

'=' 字符，十六进制值 0x3D，不能包含在名称中

**更新** 如何从“=”中自动清除名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:56:21.710

HTML 不是 XML（除非它是 XHTML）。尝试将 XSLT 应用于通用 HTML 文档几乎肯定会给您带来问题。您必须找到一种不同的方法来进行您正在寻找的任何转换。

如果您想以编程方式处理 HTML，那么我建议您使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)。

# programming-languages - 声明变量类型的好处

> ID：12091997
> 
> 赞同：2
> 
> 时间：2012-08-23T12:50:33.970
> 
> 标签：programming-languages

刚开始编程的人问我有关编程语言采用的不同方法的优势。

例如，有些允许程序员省略变量声明而只使用它们（如 PHP）。其他需要声明，但不一定需要类型。而其他人则需要完整声明变量（包括其类型）。

那么每种方法的优势是什么？为什么最好（不）声明一个变量和/或其类型？我认为不需要类型的那些可以提高程序员的效率。您可以只获取一个变量并使用它，而不是在需要它的时候考虑它可能具有什么类型。并且可能您以后可以更改其类型。

但除此之外还有更多吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T12:53:12.073

您感兴趣的是编程语言之间的核心区别。您正在描述静态和动态类型的语言。这方面有大量的资源。 [http://en.wikipedia.org/wiki/Type_system](http://en.wikipedia.org/wiki/Type_system) [http://en.wikipedia.org/wiki/Garbage_collection_(computer_science)](http://en.wikipedia.org/wiki/Garbage_collection_(computer_science))

比你描述的要多得多。两者都有其优点和缺点。两者都不是更好，但每个人都可能擅长某些任务。

# xcode - 如何屏蔽 UIScrollView？

> ID：12091998
> 
> 赞同：5
> 
> 时间：2012-08-23T12:50:35.493
> 
> 标签：xcode, uiscrollview, calayer, mask

我目前有一个图像遮罩，我想用它来遮罩 UIScrollView。滚动视图包含 1 个 UIImageView。

这是我目前在 viewdidload 中所做的：

```
CALayer *mask = [CALayer layer];
mask.contents = (id)[UIImage imageNamed:@"ScrollMask.png"].CGImage;
mask.frame = CGRectMake(0, 0, 512, 384);
[Scroll1.layer setMask:mask]; 
```

这在某种程度上有效。它掩盖了滚动视图内的 ImageView，但不掩盖滚动视图本身。

有没有办法屏蔽滚动视图的 CALayer 而不是 imageview 的图层？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-07T10:03:56.463

您应该将 UIScrollView 放入 UIView，然后将遮罩应用到 UIView 而不是 UIScrollView。

```
CALayer *mask = [CALayer layer];
mask.contents = (id)[UIImage imageNamed:@"ScrollMask.png"].CGImage;
mask.frame = CGRectMake(0, 0, 512, 384);

UIView *containerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 512, 384)];
[containerView.layer setMask:mask];

[containerView addSubview:Scroll1];
[self.view addSubview:containerView]; 
```