# StackOverflow 问答 10203000-10203999

# sql - 一次更新表中的 30 个字段

> ID：10203010
> 
> 赞同：-4
> 
> 时间：2012-04-18T04:55:01.957
> 
> 标签：sql, oracle

我需要将表中的 2 列更新为 30 行。尝试使用 dbms 实用程序 - 数组，但它不接受空格。请建议一种优化的方法来一次更新 30 行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T05:11:55.403

我想这取决于“一次性”的定义，以及您尝试设置的新值，但 oracle 的标准 SQL 更新语法应该让您做您想做的事。

```
UPDATE <table_name>
SET <column1_name> = <value1>, <column2_name> = <value2>
WHERE <column_name> = <value> 
```

如果将 where 子句设置为唯一标识要更新的列，则此语句将仅更新这些行的列。这可以像 WHERE IN [, ] 一样简单。如果您无法唯一标识要更新的行，那么这样做会变得更加困难，您可能需要子选择或临时表来存储您需要更新的记录的键并针对子选择运行更新。

[http://psoug.org/reference/update.html](http://psoug.org/reference/update.html)可能会为您提供更多信息。

空格的问题更容易回答，您需要将字段名称封装在转义序列中，例如，如果表名是 A Table 并且列名是 A Column 那么您将使用

```
Update "A Table"
Set "A Column" = <value>, "Another Column" = <value2>
Where <where_clause> 
```

# asp.net - 如何使用 VB 设计 CSV 文件？

> ID：10203011
> 
> 赞同：-1
> 
> 时间：2012-04-18T04:55:13.427
> 
> 标签：asp.net, vb.net

在我的项目中，我正在创建一个 CSV 文件，但我想更改它的设计。请帮我：

```
 Private Sub ExportDataToCSV()
    Dim fileName As String = "CheckRegistrationStatus_" & Format(Now, "yyyyMMddhhmms") & ".csv"
    HttpContext.Current.Response.Clear()
    ' Set the response headers to fit our CSV file 
    HttpContext.Current.Response.ContentType = "text/plain"
    HttpContext.Current.Response.AddHeader("Content-Disposition", "attachment;filename=" & fileName)
    Using writer As New System.IO.StreamWriter(HttpContext.Current.Response.OutputStream)
        Dim columnHeader As String = String.Empty
        For i As Integer = 0 To grd1.Columns.Count - 1
            columnHeader += grd1.Columns(i).HeaderText & IIf(i < grd1.Columns.Count - 1, ",", "").ToString()
        Next
        writer.WriteLine(columnHeader)
        'writer.WriteLine(AddCSVHeaderRow()) ' Only if you need custom headers to be added
        ' Add all the data rows 
        For Each row As GridViewRow In grd1.Rows
            writer.WriteLine(GetCSVLine(row.Cells))
        Next
    End Using
    ' End the current response. Otherwise, excel will open with the whole page inside.
    HttpContext.Current.Response.End()
End Sub
Private Shared Function GetCSVLine(ByVal cellsToAdd As TableCellCollection) As String
    Dim line As String = String.Empty
    Dim isFirst As Boolean = True
    For Each cell As TableCell In cellsToAdd
        If Not isFirst Then
            line += ","
        End If
        isFirst = False
        line += """" & Replace(cell.Text, "&nbsp;", "") & """"
    Next
    Return line
End Function 
```

正在显示输出，如下图所示。但我想让标题加粗并扩大列宽。请帮我。

![在此处输入图像描述](../Images/36a19ac238635f7723f38bf575127233.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T05:13:02.823

你不能。CSV 文件格式是纯数据格式。它无法设置字体、列宽或与样式相关的任何其他内容。

此外，我认为您的代码无法正确处理所有数据。例如，如果数据中有逗号或双引号，则需要特殊步骤。[这是我发布的一些代码，用于在 C# 中创建 CSV 文件](http://www.blackbeltcoder.com/Articles/files/reading-and-writing-csv-files-in-c)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:46:54.767

如果您想生成格式化的 Excel 文档，除了 CSV 文件之外或代替它，您可以查看 Excel 互操作库。

[http://msdn.microsoft.com/en-us/library/bb386107%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/bb386107%28v=vs.90%29.aspx)

[http://support.microsoft.com/kb/301982](http://support.microsoft.com/kb/301982)

[http://msdn.microsoft.com/en-us/library/aa188489%28office.10%29.aspx](http://msdn.microsoft.com/en-us/library/aa188489%28office.10%29.aspx)

# android - 在我的 Android 应用中验证 Google 帐户的最佳工作流程是什么？

> ID：10203014
> 
> 赞同：1
> 
> 时间：2012-04-18T04:55:25.373
> 
> 标签：android, google-account, google-tasks-api, google-tasks

我正在尝试遵循此示例：[http ://code.google.com/p/google-api-java-client/source/browse/tasks-android-sample/src/main/java/com/google/ api/services/samples/tasks/android/TasksSample.java?repo=samples](http://code.google.com/p/google-api-java-client/source/browse/tasks-android-sample/src/main/java/com/google/api/services/samples/tasks/android/TasksSample.java?repo=samples)。

我的代码写得有点糟糕，但它是在 Google Code 中发布的。我要建立的工作流程在这里：[http ://code.google.com/p/phone-to-desktop/source/browse/src/net/xisberto/phonetodesktop/PhoneToDesktopActivity.java?spec=svnd70158809aeb1ba00e26a33dc7110ade33b76427&name=google -tasks&r=d70158809aeb1ba00e26a33dc7110ade33b76427](http://code.google.com/p/phone-to-desktop/source/browse/src/net/xisberto/phonetodesktop/PhoneToDesktopActivity.java?spec=svnd70158809aeb1ba00e26a33dc7110ade33b76427&name=google-tasks&r=d70158809aeb1ba00e26a33dc7110ade33b76427)

在我最后一次尝试中，当应用程序转到以下方法时：

```
private void chooseAccount() {
    Log.i(getPackageName(), "Starting authenticate");
    AccountManager manager = AccountManager.get(getApplicationContext());
    manager.getAuthTokenByFeatures(
                "google.com",
                "Manage your tasks",
                null, PhoneToDesktopActivity.this, null, null,
                new AccountManagerCallback<Bundle>() {
                        @Override
                        public void run(AccountManagerFuture<Bundle> future) {
                            try {
                                Bundle bundle = future.getResult();
                                //So we save the account and token
                                setAccountName(bundle.getString(PREF_ACCOUNT_NAME));
                                setAuthToken(bundle.getString(PREF_AUTH_TOKEN));
                                Toast.makeText(getApplicationContext(),
                                    "Account authenticated: " +
                                    bundle.getString(PREF_ACCOUNT_NAME) + "\n" +
                                    bundle.getString(PREF_AUTH_TOKEN),
                                    Toast.LENGTH_SHORT).
                                show();
                                //Then we create the list we will use
                                createList();
                            } catch (OperationCanceledException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            } catch (AuthenticatorException e) {
                                Log.e(getApplicationInfo().packageName, e.getMessage(), e);
                            } catch (IOException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }
                        }
                },
                null);
} 
```

我得到的只是没有视觉上的改变和 DDMS 中的这些消息：

```
04-18 00:59:53.187: E/net.xisberto.phonetodesktop(10488): bind failure
04-18 00:59:53.187: E/net.xisberto.phonetodesktop(10488): android.accounts.AuthenticatorException: bind failure
04-18 00:59:53.187: E/net.xisberto.phonetodesktop(10488):   at android.accounts.AccountManager.convertErrorToException(AccountManager.java:1450)
04-18 00:59:53.187: E/net.xisberto.phonetodesktop(10488):   at android.accounts.AccountManager.access$400(AccountManager.java:138)
04-18 00:59:53.187: E/net.xisberto.phonetodesktop(10488):   at android.accounts.AccountManager$AmsTask$Response.onError(AccountManager.java:1296)
04-18 00:59:53.187: E/net.xisberto.phonetodesktop(10488):   at android.accounts.IAccountManagerResponse$Stub.onTransact(IAccountManagerResponse.java:69)
04-18 00:59:53.187: E/net.xisberto.phonetodesktop(10488):   at android.os.Binder.execTransact(Binder.java:339)
04-18 00:59:53.187: E/net.xisberto.phonetodesktop(10488):   at dalvik.system.NativeStart.run(Native Method) 
```

任何可以帮助的帮助/教程/代码示例？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T05:03:23.573

您使用邮件 jar 文件、activation.jar 和其他 jar 文件使用，以下代码用于将电子邮件应用程序连接到服务器电子邮件。

```
 Properties props = System.getProperties();
            props.setProperty("mail.store.protocol", "imaps");
            props.put("mail.smtp.starttls.enable","true");
            Authenticator auth = new Authenticator() {
                protected PasswordAuthentication getPasswordAuthentication(){
                    return new PasswordAuthentication("USEREMAILID","PASSWORD ");
                    }
            };
            sessioned= Session.getDefaultInstance(props, auth);
            store = sessioned.getStore("imaps");
            store.connect("smtp.gmail.com","USEREMAILID","PASSWORD "); 
```

我希望这可以帮助你！

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-27T19:33:56.330

好的，我必须管理身份验证。我无法理解要设置的过程和值。现在我的代码写得更好，效果更好。

# java - 从 onBalloonTap 加载活动

> ID：10203020
> 
> 赞同：1
> 
> 时间：2012-04-18T04:55:51.263
> 
> 标签：java, android, android-intent

我正在使用来自 github 的 mapviewballoons，它正在工作到我试图从 ballonItemizedOverlay 打开另一个活动的地步

```
 private ArrayList<OverlayItem> m_overlays = new ArrayList<OverlayItem>();
private Context c;

public mlgwItemizedOverlay(Drawable defaultMarker,  MapView mapView) {
    super(boundCenter(defaultMarker), mapView);
    c = mapView.getContext();
}

public void addOverlay(OverlayItem overlay) {
    m_overlays.add(overlay);
    populate();
}

@Override
protected OverlayItem createItem(int i) {
    return m_overlays.get(i);
}

@Override
public int size() {
    return m_overlays.size();
}

@Override
protected boolean onBalloonTap(int index, OverlayItem item) {
    Intent Details = new Intent(c, BlogActivity.class); 
    //Details.putExtra("Id", 1327); 
    c.startActivity(Details); 
    return true;
} 
```

}

这是我的主要活动

```
 TapControlledMapView mapView; // use the custom TapControlledMapView
List<Overlay> mapOverlays;
Drawable drawable;
mlgwItemizedOverlay itemizedOverlay;
mlgwItemizedOverlay itemizedOverlay2;

private static final class LatLonPoints extends GeoPoint { 
    public LatLonPoints(double latitude, double longitude) { 
        super((int) (latitude * 1E6), (int) (longitude * 1E6)); 
    } 
} 
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mapView = (TapControlledMapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);

    // dismiss balloon upon single tap of MapView (iOS behavior) 
    mapView.setOnSingleTapListener(new OnSingleTapListener() {      
        @Override
        public boolean onSingleTap(MotionEvent e) {
            itemizedOverlay.hideAllBalloons();
            return true;
        }
    });

    mapOverlays = mapView.getOverlays();

    // first overlay
    drawable = getResources().getDrawable(R.drawable.marker);
    itemizedOverlay = new mlgwItemizedOverlay(drawable,  mapView);
    // set iOS behavior attributes for overlay
    itemizedOverlay.setShowClose(false);
    itemizedOverlay.setShowDisclosure(true);
    itemizedOverlay.setSnapToCenter(false);

     GeoPoint StartPoint = new LatLonPoints(35.149534,-90.04898);   
        // first overlay

    GeoPoint point = new LatLonPoints(35.139646,-90.05521);

    OverlayItem overlayItem = new OverlayItem(point, "Hello", "I'm am the first location");                     
    itemizedOverlay.addOverlay(overlayItem);
    mapOverlays.add(itemizedOverlay);

    GeoPoint point2 = new LatLonPoints(35.020922,-90.027045);
    OverlayItem overlayItem2 = new OverlayItem(point2, "Hello", "I'm am the second location"); 
    itemizedOverlay.addOverlay(overlayItem2);
    mapOverlays.add(itemizedOverlay);

    GeoPoint point3 = new LatLonPoints(35.151009,-89.978281);
    OverlayItem overlayItem3 = new OverlayItem(point3, "Hello", "I'm am the third location");       
    itemizedOverlay.addOverlay(overlayItem3);
    mapOverlays.add(itemizedOverlay);

    GeoPoint point4 = new LatLonPoints(35.088971,-89.965608);
    OverlayItem overlayItem4 = new OverlayItem(point4,  "Hello", "I'm am the fourth location");         
    itemizedOverlay.addOverlay(overlayItem4);       
    mapOverlays.add(itemizedOverlay);

    GeoPoint point5 = new LatLonPoints(35.341282,-89.8922298);
    OverlayItem overlayItem5 = new OverlayItem(point5,  "Hello", "I'm am the fifth location");      
    itemizedOverlay.addOverlay(overlayItem5);       
    mapOverlays.add(itemizedOverlay);

    if (savedInstanceState == null) {

        final MapController mc = mapView.getController();
        mc.animateTo(StartPoint);
        mc.setZoom(11);

    } else {

        // example restoring focused state of overlays
        int focused;
        focused = savedInstanceState.getInt("focused_1", -1);
        if (focused >= 0) {
            itemizedOverlay.setFocus(itemizedOverlay.getItem(focused));
        }
        focused = savedInstanceState.getInt("focused_2", -1);
        if (focused >= 0) {
            itemizedOverlay2.setFocus(itemizedOverlay2.getItem(focused));
        }

    }

}
  public void startCustomActivity(){ 
      Intent Details = new Intent(getBaseContext(), BlogActivity.class); 
      Details.putExtra("Id", 1327); 
      startActivity(Details); 
  } 

@Override
protected boolean isRouteDisplayed() {
    return false;
}

@Override
protected void onSaveInstanceState(Bundle outState) {

    // example saving focused state of overlays
    if (itemizedOverlay.getFocus() != null) outState.putInt("focused_1", itemizedOverlay.getLastFocusedIndex());
    if (itemizedOverlay2.getFocus() != null) outState.putInt("focused_2", itemizedOverlay2.getLastFocusedIndex());
    super.onSaveInstanceState(outState);

} 
```

}

这是我试图打开的博客活动

```
public class BlogActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    TextView textview = new TextView(this);
    textview.setText("This is the Blog tab");
    setContentView(textview);
} 
```

}

一旦我按下覆盖，应用程序就会崩溃，并且返回的错误是：

`04-18 04:39:56.465: E/MapActivity(8938): Couldn't get connection factory client 04-18 04:40:03.075: E/AndroidRuntime(8938): FATAL EXCEPTION: main 04-18 04:40:03.075: E/AndroidRuntime(8938): java.lang.RuntimeException: Unable to pause activity {com.mlgw.MlgwMapView/com.mlgw.MlgwMapView.MlgwMapViewActivity}: java.lang.NullPointerException 04-18 04:40:03.075: E/AndroidRuntime(8938): at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2354) 04-18 04:40:03.075: E/AndroidRuntime(8938): at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2311) 04-18 04:40:03.075: E/AndroidRuntime(8938): at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:2291) 04-18 04:40:03.075: E/AndroidRuntime(8938): at android.app.ActivityThread.access$1700(ActivityThread.java:117) 04-18 04:40:03.075: E/AndroidRuntime(8938): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:938) 04-18 04:40:03.075: E/AndroidRuntime(8938): at android.os.Handler.dispatchMessage(Handler.java:99) 04-18 04:40:03.075: E/AndroidRuntime(8938): at android.os.Looper.loop(Looper.java:130) 04-18 04:40:03.075: E/AndroidRuntime(8938): at android.app.ActivityThread.main(ActivityThread.java:3683) 04-18 04:40:03.075: E/AndroidRuntime(8938): at java.lang.reflect.Method.invokeNative(Native Method) 04-18 04:40:03.075: E/AndroidRuntime(8938): at java.lang.reflect.Method.invoke(Method.java:507) 04-18 04:40:03.075: E/AndroidRuntime(8938): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 04-18 04:40:03.075: E/AndroidRuntime(8938): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 04-18 04:40:03.075: E/AndroidRuntime(8938): at dalvik.system.NativeStart.main(Native Method) 04-18 04:40:03.075: E/AndroidRuntime(8938): Caused by: java.lang.NullPointerException 04-18 04:40:03.075: E/AndroidRuntime(8938): at com.mlgw.MlgwMapView.MlgwMapViewActivity.onSaveInstanceState(MlgwMapViewActivity.java:131) 04-18 04:40:03.075: E/AndroidRuntime(8938): at android.app.Activity.performSaveInstanceState(Activity.java:1037) 04-18 04:40:03.075: E/AndroidRuntime(8938): at android.app.Instrumentation.callActivityOnSaveInstanceState(Instrumentation.java:1181) 04-18 04:40:03.075: E/AndroidRuntime(8938): at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2336) 04-18 04:40:03.075: E/AndroidRuntime(8938): ... 12 more`

我的主要目标是将更多关于他们单击的注释的数据传递给新活动。

你能告诉我我做错了什么或指出我正确的解决方案。我在谷歌上搜索了其他答案，但没有找到任何有用的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T05:57:28.710

您的问题是您正在覆盖`onSaveInstanceState`但没有调用超类方法：执行此操作。

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);

    // example saving focused state of overlays
    if (itemizedOverlay.getFocus() != null) outState.putInt("focused_1", itemizedOverlay.getLastFocusedIndex());
    if (itemizedOverlay2.getFocus() != null) outState.putInt("focused_2", itemizedOverlay2.getLastFocusedIndex());
    super.onSaveInstanceState(outState);

} 
```

看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T05:47:01.377

试试这个 ：

> protected boolean onBalloonTap(int index, OverlayItem item) {
> Intent Details = new Intent(c, BlogActivity.class);
> //Details.putExtra("Id", 1327);
> ((活动) c).startActivity(详情);
> 返回真；
> }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T07:15:02.970

```
 public class BlogActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        TextView textview = new TextView(this);

        Bundle b=getIntent.getExtras();
        if(b!=null)
      {
       String s= b.getString("Id")
      }
        textview.setText("This is the Blog tab");
        setContentView(textview);
    } 
```

# objective-c - ASIHTTPRequest 内置身份验证对话框正在删除我的 MBProgressHUD。我怎样才能再次显示它？

> ID：10203021
> 
> 赞同：0
> 
> 时间：2012-04-18T04:56:11.597
> 
> 标签：objective-c, ios, asihttprequest, mbprogresshud

我正在尝试使用 MBProgressHUD 显示我的下载进度。我正在使用以下代码：

```
[HUD showWhileExecuting:@selector(downloadFile) onTarget:self withObject:nil animated:YES]; 
```

服务器正在进行基本的 http 身份验证。如果我提供用户名和密码，那么它可以正常工作；显示进度指示器。但是，如果密码错误或代码未提供密码，则会出现身份验证对话框并要求用户提供凭据（在此过程中，删除我的 hud）。之后，它会继续下载而不显示 HUD。如何在身份验证提示消失后显示我的 HUD？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T18:22:27.250

首先，如果您正在执行异步请求，请避免使用该`showWhileExecuting: onTarget:withObject:animated:`方法。查看 NSURLRequest 示例（[this](https://github.com/matej/MBProgressHUD/blob/master/Demo/Classes/HudDemoViewController.m#L173)和[this](https://github.com/matej/MBProgressHUD/blob/master/Demo/Classes/HudDemoViewController.m#L249)）并使用 ASIHTTPRequest API 做一些类似的事情。

此外，您应该在身份验证对话框出现时手动隐藏 hud（一个好地方可能是您的控制器`viewWillDisappear:`），并在对话框关闭时再次显示（在您的控制器中`viewWillAppear:`）。

# php - 当文件输入中存在名称字段时，getElementById 不会发布

> ID：10203024
> 
> 赞同：1
> 
> 时间：2012-04-18T04:56:24.927
> 
> 标签：php, javascript, html, forms

我正在编写一个代码来一步浏览和上传文件。我有这个代码：

```
<input type="file" id="image" style="display: none;">
<input type="submit" name="upload" id="upload" value="upload"
  onclick="document.getElementById('image').click();"> 
```

此代码允许我选择文件并提交表单，但我想使用 $_FILE 属性，并且由于文件输入中没有名称字段，我无法访问文件信息。

所以我修改了我的代码以添加名称字段，如下所示

```
<input type="file" name="image" id="image" style="display: none;" />

<input type="submit" name="upload" id="upload" value="upload"
  onclick="document.getElementById('image').click();" /> 
```

现在，使用此代码，我仍然可以浏览文件，但未提交。所以简而言之，我无法使用这两种方法访问 $_FILE 。

任何建议我可以做些什么来继续前进。??

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:10:56.307

要使所选图像在 PHP 中的 $_FILES 数组中可用，您需要为文件字段提供名称属性并将`enctype`表单的属性设置为，`multipart/form-data`以便浏览器正确发布。

```
<form action="some.php" method="post" enctype="multipart/form-data">
 <input type="file" id="image" name="image">
 <input type="button" value="select image" id="button">
</form>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

为了能够仍然`.click()`在文件输入上使用该方法，它必须没有从文档中取出（即：`display: none`不起作用），因此您可以使用：

```
​input[type=file] {
 position: absolute; height: 0; width: 0; /* should be totally squashed */
 visibility: hidden; /* just in case */
}​ 
```

然后您可以使用 JavaScript 打开选择对话框并提交表单

```
$('#button').click(function() {
  $('#image')[0].click();
});​​​​
$('#image').change(function() {
  $('form').submit();
}); 
```

（这里假设您的页面上有 jQuery，这是一个工作示例[http://jsfiddle.net/steveukx/V4yE3/](http://jsfiddle.net/steveukx/V4yE3/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:08:26.383

据我了解，您只想a）隐藏浏览器特定的文件浏览控件并提供您自己的样式按钮，b）同时选择和上传文件（例如，在文件浏览对话框关闭时上传您的照片）。

在这种情况下，您需要这样的东西：

```
<form name="myForm" method="POST">
    <input type="file" name="image" id="image" 
        style="position: absolute; left: -1000px;"
        onchange="myForm.submit();" />
    <input type="button" name="upload" id="upload" value="upload"
        onclick="document.getElementById('image').click();" />
</form> 
```

在 Chrome 中工作（不要隐藏文件输入，而是将其移到页面外）。如果其他浏览器有任何问题，我建议使用 jQuery。

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T09:04:21.103

```
<input type="file" id="image" onchange="yourForm.submit();"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T05:03:48.293

虽然我在这里不支持您的方法（它不会将标记与行为分开），但您可以尝试`return true`在`onclick`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T05:07:31.473

这段代码不能跨浏览器工作。在 chrome 上，您不能调用`click()`隐藏`input[type=file]`元素。

即使您将其切换为可见，将其`click()`放入`onclick`or`onsubmit`处理程序也将不起作用 - 表单将不会与新文件值一起提交。这是一项安全功能。浏览器不希望您这样做。

Flash 可以为所欲为。查看 YUI Uploader 组件：http: [//developer.yahoo.com/yui/uploader/](http://developer.yahoo.com/yui/uploader/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T05:34:33.663

如果您想在不重新加载页面的情况下上传文件，请使用[AJAX 文件上传 jQuery 插件](https://github.com/jfeldstein/jQuery.AjaxFileUpload.js)在某些地方上传文件，并将响应传递给回调，仅此而已。

```
It does not depend on specific HTML, just give it a <input type="file">
It does not require your server to respond in any particular way
It does not matter how many files you use, or where they are on the page 
```

-- 少用 --

```
$('#one-specific-file').ajaxfileupload({
  'action': '/upload.php'
}); 
```

——或多于——

```
$('input[type="file"]').ajaxfileupload({
  'action': '/upload.php',
  'params': {
    'extra': 'info'
  },
  'onComplete': function(response) {
    console.log('custom handler for file:');
    alert(JSON.stringify(response));
  },
  'onStart': function() {
    if(weWantedTo) return false; // cancels upload
  },
  'onCancel': function() {
    console.log('no file selected');
  }
}); 
```

# mysql - MySQL：设置默认排序规则连接和 MySQL 转储

> ID：10203028
> 
> 赞同：0
> 
> 时间：2012-04-18T04:57:02.297
> 
> 标签：mysql, collation

我在 Windows Vista Business 上运行 MySQL 5.5.20。我对 collat​​ion_connection 有点问题。我的默认字符集是 utf8，排序规则是 ut8_unicode_ci。但是，当我在数据库上执行 mysql 转储时，我的函数和过程的 collat​​ion_connection 显示 utf8_general_ci；例如，

```
/*!50003 SET collation_connection  = utf8_general_ci*/ ; 
```

是否可以将 MySQL 指定为默认为 collat​​ion_connection 的 ut8_unicode_ci？我使用 MySQL Workbench 来执行 mysql 转储。

# c++ - 内存泄漏 C++

> ID：10203032
> 
> 赞同：1
> 
> 时间：2012-04-18T04:57:15.793
> 
> 标签：c++, memory, memory-leaks

我有一个用 c++ 编写的代码，它在 Visual Studio 上可以正常工作，但是当我将它传输到 linux（QT Designer）时，我得到一个运行时错误，如下所示：

```
*** glibc detected *** /home/hfarazi/Test/QT/Test-build-desktop/Test: malloc(): memory corruption: 0x082c2c80 ***
======= Backtrace: =========
/lib/i386-linux-gnu/libc.so.6(+0x6ff22)[0x42cf22]
/lib/i386-linux-gnu/libc.so.6(+0x718be)[0x42e8be]
/lib/i386-linux-gnu/libc.so.6(__libc_malloc+0x68)[0x4307f8]
/usr/lib/i386-linux-gnu/libstdc++.so.6(_Znwj+0x27)[0x2c89d7]
/usr/lib/i386-linux-gnu/libstdc++.so.6(_Znaj+0x1b)[0x2c8afb]
/home/hfarazi/Test/QT/Test-build-desktop/Test[0x804abdc]
/home/hfarazi/Test/QT/Test-build-desktop/Test[0x8062860]
/home/hfarazi/Test/QT/Test-build-desktop/Test[0x80644b5]
/home/hfarazi/Test/QT/Test-build-desktop/Test[0x806e449]
/home/hfarazi/Test/QT/Test-build-desktop/Test[0x80604d5]
/home/hfarazi/Test/QT/Test-build-desktop/Test[0x8049205]
/lib/i386-linux-gnu/libc.so.6(__libc_start_main+0xf3)[0x3d6113]
/home/hfarazi/Test/QT/Test-build-desktop/Test[0x8049351]
======= Memory map: ========
00219000-002f7000 r-xp 00000000 07:00 527926     /usr/lib/i386-linux-gnu/libstdc++.so.6.0.16
002f7000-002f8000 ---p 000de000 07:00 527926     /usr/lib/i386-linux-gnu/libstdc++.so.6.0.16
002f8000-002fc000 r--p 000de000 07:00 527926     /usr/lib/i386-linux-gnu/libstdc++.so.6.0.16
002fc000-002fd000 rw-p 000e2000 07:00 527926     /usr/lib/i386-linux-gnu/libstdc++.so.6.0.16
002fd000-00304000 rw-p 00000000 00:00 0 
00339000-00357000 r-xp 00000000 07:00 266017     /lib/i386-linux-gnu/ld-2.13.so
00357000-00358000 r--p 0001d000 07:00 266017     /lib/i386-linux-gnu/ld-2.13.so
00358000-00359000 rw-p 0001e000 07:00 266017     /lib/i386-linux-gnu/ld-2.13.so
003a2000-003b9000 r-xp 00000000 07:00 273114     /lib/i386-linux-gnu/libpthread-2.13.so
003b9000-003ba000 r--p 00016000 07:00 273114     /lib/i386-linux-gnu/libpthread-2.13.so
003ba000-003bb000 rw-p 00017000 07:00 273114     /lib/i386-linux-gnu/libpthread-2.13.so
003bb000-003bd000 rw-p 00000000 00:00 0 
003bd000-00535000 r-xp 00000000 07:00 273100     /lib/i386-linux-gnu/libc-2.13.so
00535000-00537000 r--p 00178000 07:00 273100     /lib/i386-linux-gnu/libc-2.13.so
00537000-00538000 rw-p 0017a000 07:00 273100     /lib/i386-linux-gnu/libc-2.13.so
00538000-0053b000 rw-p 00000000 00:00 0 
00777000-0079f000 r-xp 00000000 07:00 273104     /lib/i386-linux-gnu/libm-2.13.so
0079f000-007a0000 r--p 00028000 07:00 273104     /lib/i386-linux-gnu/libm-2.13.so
007a0000-007a1000 rw-p 00029000 07:00 273104     /lib/i386-linux-gnu/libm-2.13.so
00bf7000-00bf8000 r-xp 00000000 00:00 0          [vdso]
00df3000-00e0f000 r-xp 00000000 07:00 262077     /lib/i386-linux-gnu/libgcc_s.so.1
00e0f000-00e10000 r--p 0001b000 07:00 262077     /lib/i386-linux-gnu/libgcc_s.so.1
00e10000-00e11000 rw-p 0001c000 07:00 262077     /lib/i386-linux-gnu/libgcc_s.so.1
08048000-08075000 r-xp 00000000 07:00 401931     /home/hfarazi/Test/QT/Test-build-desktop/Test
08075000-08076000 r--p 0002c000 07:00 401931     /home/hfarazi/Test/QT/Test-build-desktop/Test
08076000-08077000 rw-p 0002d000 07:00 401931     /home/hfarazi/Test/QT/Test-build-desktop/Test
082ba000-082db000 rw-p 00000000 00:00 0          [heap]
b7600000-b7621000 rw-p 00000000 00:00 0 
b7621000-b7700000 ---p 00000000 00:00 0 
b77f4000-b77f8000 rw-p 00000000 00:00 0 
b780a000-b780d000 rw-p 00000000 00:00 0 
bff44000-bff65000 rw-p 00000000 00:00 0          [stack] 
```

你能帮我找出错误吗！由于这是一个公司项目，我无法轻易发送代码。提前谢谢。

* * *

我认为问题出在这堂课上，一个想法？

```
#define NOT_VALID NULL
#define STACK_INITIAL_ALLOC   10
#define STACK_CHUNK_ALLOC    10
template<class T>
class stack
{
public:
    stack()
        : value(0), length(0), allocated(0)
        { }

    stack(const T &value)
        : value(0), length(0), allocated(0)
        {
            push(value);
        }

    ~stack()
        {
            if (value)
                delete [] value;
        }

    void push(const T &_value)
        {
            if (length == allocated)
                allocate();  // Allocate more memory

            value[length++] = _value;
        }

    T &pop()
        {
            if (length > 0)
            {   
                //shrink();
                length--;
                return value[length];
            }
        }

    T &peak()
        {
            if (length > 0)
                return value[length - 1];
            //else
               // throw runtime_error("stack empty");
        }

    // Return the number of length in the stack
    size_t count() const
        {
            return length;
        }

    size_t get_allocated() const
        {
            return allocated;
        }

private:
    T      *value;      // The actual stack
    size_t  length;   // Number of length in stack
    size_t  allocated; // Allocated length in stack

    void copy(T *from, T *to)
        {
            for (size_t i = 0; i < length; i++)
                *to++ = *from++;
        }

    void allocate()
        {
            if (value == 0)
            {
                allocated = STACK_INITIAL_ALLOC;
                value = new T[allocated];
            }
            else
            {
                // We need to allocate more memory

                size_t new_allocated = allocated + STACK_CHUNK_ALLOC;
                T *new_value = new T[new_allocated];

                // Copy from old stack to new stack
                copy(value, new_value);

                // Delete the old value
                delete [] value;

                allocated = new_allocated;
                value = new_value;
            }
        }

    // Shrink the stack, if lots of it is unused
    void shrink()
        {
            // The limit which the number of length must be lower than
            size_t shrink_limit = allocated - STACK_CHUNK_ALLOC * 2;

            // Do not shrink if we will get lower than the initial allocation (shrink_limit > STACK_INITIAL_ALLOC)
            if (shrink_limit > STACK_INITIAL_ALLOC && length < shrink_limit)
            {
                // We can shrink the allocated memory a little
                size_t new_allocated = allocated - STACK_CHUNK_ALLOC;

                T *new_value = new T[new_allocated];

                copy(value, new_value);

                delete [] value;

                value = new_value;
                allocated = new_allocated;
            }
        }
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T05:23:54.877

如果您不处理线程，那么如果您以某种方式读取/写入超出数组范围，则很可能会出现此类问题。

由于此类操作的结果未定义，因此在某些特定主机/编译器中可能看不到问题，并且仅当您将代码传输到另一台主机时才可能发生。

有时这类问题很难弄清楚你的程序是否庞大。

除了使用调试器之外，还有一个建议是删除部分代码（如果可能）并尝试缩小问题的根源。

# asp.net - 带有 PostBackUrl 的 ImageButton 在第二次单击问题后响应

> ID：10203035
> 
> 赞同：0
> 
> 时间：2012-04-18T04:57:34.960
> 
> 标签：asp.net

您好，我的 Imagebutton 有问题，我必须双击才能发布任何知道如何修复它的人，所以我只需单击一次即可获得回复？

谢谢您的帮助！

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:smokeshopConnectionString %>" 
            ProviderName="<%$ ConnectionStrings:smokeshopConnectionString.ProviderName %>" 
            SelectCommand="SELECT ProductID, Name, Description, Price, ImageUrl FROM products"></asp:SqlDataSource>
        <asp:DataList ID="DataList1" runat="server" DataSourceID="SqlDataSource1"  
        RepeatDirection="Horizontal"         
         DataKeyField="ProductID"   >
        <ItemTemplate>        
                <div style="border-style:dotted; border-color:WhiteSmoke;">                    
                <a onclick="popup('popUpDiv')" href="#" ><asp:ImageButton ID="ImageButton1" runat="server" ImageUrl='<%# Eval("ImageUrl", "Images\\{0}") %>' PostBackUrl='<%# Eval("ProductID", "Default5.aspx?ProductID={0}") %>' /></a><br />       

                <asp:Label ID="NameLabel" runat="server" Text='<%# Eval("Name") %>'></asp:Label><br />               
                </div>
        </ItemTemplate>

    </asp:DataList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:41:47.350

我有来自侧面的测试代码..它工作正常..我单击一下就得到了图像按钮事件。我认为问题在于通过 imagebutton 编写的 javascript 函数，即

```
popup('popUpDiv') 
```

你能解释一下javascript函数“popup('popUpDiv')”吗..或者你可以用从图像按钮中删除锚链接标签来测试它..

# django - 用于 Etsy 类网站的 Python CMS

> ID：10203036
> 
> 赞同：1
> 
> 时间：2012-04-18T04:57:47.487
> 
> 标签：django, content-management-system, python-2.7, django-cms

我是 Python 新手，想建立一个类似于 Etsy 的网站（相同的基本功能，不同的市场）。

功能： -
用户（买家/卖家）资料
-上传图片的能力 -
卖家发布
-用户到用户的消息
-支付平台（直接从买家到卖家）

有人可以推荐一个合适的 Python/Django CMS，它可以提供：（1）上面的功能，（2）新手也很容易使用？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:51:53.613

有一个基于 django 的 CMS 项目，它支持许多 3rd 方插件。但是您需要先学习如何设置 django 项目。

[https://github.com/divio/django-cms](https://github.com/divio/django-cms)

# sockets - 创建实时应用程序的技术是什么？

> ID：10203039
> 
> 赞同：1
> 
> 时间：2012-04-18T04:57:57.920
> 
> 标签：sockets, real-time, server-push

我想知道当我想创建一个应用程序时我必须做什么技术：

1.  实时应用？
2.  多人游戏？

有时我会读到这篇文章[保持活力](http://en.wikipedia.org/wiki/Keepalive)。套接字 TCP 中的支持是什么？，我已经阅读了服务器推送，但是在 HTTP 下有很多示例工作，在 TCP 中如何创建套接字 TCPServer 和 TCPClient。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:10:15.420

制作实时/多人游戏应用程序的“首选”技术不止一种。您必须了解许多不同的编程领域，例如图形操作、线程、网络（TCP 等）。我想说，在你当地的图书馆、书店或网上买一本关于游戏开发和设计的书对你来说是件好事。您还想决定在哪里以及如何运行游戏。如果您打算使用桌面应用程序，您可能会想要使用 Java 或 C++/C# 之类的语言。对于 Web 应用程序，Java 和 Flash 是历史上要走的路，甚至越来越多的游戏主要用 javascript 编写（可能带有 .NET/PHP 后端）。

如果你想直接进入，你可以尝试像[Unity](http://unity3d.com/)这样的框架，我相信它是基于 Microsoft 的 .NET 框架的。这个工具内置了很多东西，可以帮助你入门。

我知道这不是很多具体信息，但希望它能为您指明正确的方向。

# mysql - Using NoSQL on a web application, and not using SQL

> ID：10203041
> 
> 赞同：-2
> 
> 时间：2012-04-18T04:58:25.770
> 
> 标签：mysql, mongodb, nosql

What are the pros and cons of using a NoSQL database (like MongoDb, etc) entirely for a web application which is intended to be a social networking site. I mean, for the User accounts and other credentials to be stored in a NoSQL database, instead of using SQL like MySQL with Hibernate and totally relying on NoSQL, is it a good approach? If not, what are the trends in designing MySQL entities or domain objects (usually User accounts, etc) "bind" to a NoSQL database (which are usually posts, messages, etc.)?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T05:06:48.533

Here are the issues you should consider:

*   Latency

    NoSQL solutions are designed to do well here. They generally write data to memory which is flushed to the disk in batches. If the server crashes before it is written, the data might be lost. MongoDB has [Journaling](http://www.mongodb.org/display/DOCS/Journaling), which will help recovery from crashes. So no issues here

*   Reliability

    NoSQL solutions offer in-built solutions for replicating data. With MySQL, you'll have to do this yourself

For a social network scenario, document stores like MongoDB are a good idea for activity, comments related information. The user data can be stored in a MySQL database

# android - 从 Android 应用中读取其他 Android 包的布局

> ID：10203042
> 
> 赞同：1
> 
> 时间：2012-04-18T04:58:29.100
> 
> 标签：android, android-layout

我想编写一个 Android 应用程序，它能够读取其他 Android 包的布局（这些其他包与我的应用程序无关。它们可能是系统包，也可能是来自其他任何人的包）。

有谁知道我怎么能做到这一点？我查看了 SDK，但找不到任何与如何实现相关的内容。

我的 Android 应用程序可以伪装成系统，并且具有完全的 root 访问权限。注意：这个问题不是关于破解或反汇编其他 Android 应用程序/包。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T05:25:47.130

我不知道具体怎么做，但是尝试布局充气器来充气布局。我认为它应该工作。

```
View headerView = View.inflate(this, package_name.R.layout.layout_id, null); 
```

# asp.net - 如何在 GridView 中为 ItemTemplates 设置边框

> ID：10203046
> 
> 赞同：1
> 
> 时间：2012-04-18T04:58:53.070
> 
> 标签：asp.net, gridview

如何在 GridView 中为 ItemTemplates 设置边框？

以下是 Gridview 代码。

```
<div>
   <asp:GridView ID="GridView1" runat="server" 
    AutoGenerateColumns = "false" Font-Names = "Arial" 
    Font-Size = "11pt" AlternatingRowStyle-BackColor = "#C2D69B"  
    HeaderStyle-BackColor = "green" AllowPaging ="true"   
    OnPageIndexChanging = "OnPaging" OnRowDataBound = "RowDataBound"
    PageSize = "10" >
   <Columns>
    <asp:TemplateField>
        <HeaderTemplate>
            <asp:CheckBox ID="chkAll" runat="server" onclick = "checkAll(this);" />
        </HeaderTemplate> 
        <ItemTemplate>
            <asp:CheckBox ID="CheckBox1" runat="server" onclick = "Check_Click(this)"/>
        </ItemTemplate>
    </asp:TemplateField> 
    <asp:BoundField ItemStyle-Width = "150px" DataField = "CustomerID" HeaderText = "CustomerID" />
    <asp:BoundField ItemStyle-Width = "150px" DataField = "City" HeaderText = "City"/>
    <asp:BoundField ItemStyle-Width = "150px" DataField = "Country" HeaderText = "Country"/>
    <asp:BoundField ItemStyle-Width = "150px" DataField = "PostalCode" HeaderText = "PostalCode"/>
   </Columns> 
   <AlternatingRowStyle BackColor="#C2D69B"  />
</asp:GridView> 
```

所有有界字段都有边框，但没有 ItemTemplated 字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:13:02.887

一种解决方法是通过点击 GridView 的 RowDataBound 事件来做到这一点：

```
protected void MyGrid_RowDataBound(object sender, GridViewRowEventArgs e)
{
     foreach (TableCell tc in e.Row.Cells)
     {
         tc.Attributes["style"] = "border-color: #c3cecc";
     }
} 
```

更多信息在这里：[http ://codersbarn.com/post/2009/05/31/Set-Color-of-GridLines-in-Gridview.aspx](http://codersbarn.com/post/2009/05/31/Set-Color-of-GridLines-in-Gridview.aspx)

请参阅评论部分以获取更好的方法...

```
protected void Page_Load(object sender, EventArgs e)
{
   this.GridView1.Attributes.Add("bordercolor", "c3cecc");
} 
```

“使用 GridView，声明性边框颜色属性添加了一个内联样式声明，该声明仅适用于表格本身，而不适用于单个单元格。

以编程方式添加边框颜色属性不使用内联样式，而是使用 HTML 边框颜色属性，浏览器将其应用于表格内的所有边框。”

还有一件事，如果您使用 Eric Meyer 的重置，它会破坏 GridView 中的表格呈现。该特定问题的解决方案是从重置规则中删除所有表格元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T05:09:18.813

您需要使用[ItemStyle](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datacontrolfield.itemstyle%28v=vs.80%29.aspx)字段。在[TemplateField](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.templatefield%28v=vs.80%29.aspx)文档中找到。

# javascript - 谷歌图表问题

> ID：10203048
> 
> 赞同：0
> 
> 时间：2012-04-18T04:59:08.560
> 
> 标签：javascript, google-visualization

我正在尝试使用 Google 图表，但没有对其进行硬编码。我正在尝试使用 while 循环填充图表。这是我的代码：

```
var drinks = data.split("\n");
    var ii = 0;

    //create chart
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Beer');
    data.addColumn('number', 'Beers');
    var rows = drinks.length / 2;
    data.addRows(76);

    //iprints data
    while(  ii < drinks.length-1 ) {
        data.setValue( ii, drinks[ii], drinks[ii+1]  );

        ii = ii +2;
    }

        // Set chart options
        var options = {'title':'Drinks',
                       'width':400,
                       'height':300};

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.BarChart(document.getElementById('chart_div'));
        chart.draw(data, options); 
```

我的数据来自格式如下的文本文件。

姓名#姓名#姓名#

当我查看 chrome 控制台时，执行制作图表的代码时出现此错误：

> 未捕获的错误：列索引无效 [ii]。应该是 [0-1] 范围内的整数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T05:17:04.613

根据[Google Visualizations API](https://developers.google.com/chart/interactive/docs/reference#DataTable_setValue)，data.setValue() 的第二个参数应该是列索引。您添加了两列（“啤酒”和“啤酒”），因此您只能使用 0 或 1。

我会尝试这样的事情：

```
var drinks = data.split("\n");
var ii = 0;

//create chart
var data = new google.visualization.DataTable();
data.addColumn('string', 'Beer');
data.addColumn('number', 'Beers');
var rows = drinks.length / 2;
data.addRows(76);

//iprints data
for ( ii = 0 ; ii < drinks.length - 1 ; ii++ ) {
    data.setValue( ii, 0, drinks[ii]);
}

// Set chart options
var options = {'title':'Drinks',
               'width':400,
               'height':300};

// Instantiate and draw our chart, passing in some options.
var chart = new google.visualization.BarChart(document.getElementById('chart_div'));
chart.draw(data, options); 
```

这会将啤酒名称添加到每行的第一列。我不知道您在第二列中想要什么，但如果您还想在那里添加一些数据，您可以在 for 循环中包含第二行：

```
data.setValue( ii, 1, 'some other data'); 
```

然而，另一个注意事项 - 您创建了一个变量“行”，但从不使用它。我认为它可能应该立即进入对 addRows() 的调用，以便您将行数基于数据中的名称数。

* * *

**编辑**

回答您关于为什么没有数据显示的问题 - 条形图大小来自 DataTable 中的第二列（即数字列）。在上面的代码中，我只填充了第一列。我现在明白你的数据中的每一行都包含一个整数，所以我稍微修改了代码。你可以在这个[jsFiddle](http://jsfiddle.net/YB3bA/)上试试（也包括在下面）。

```
var beers = 'Budweiser\n50\nTsingdao\n10\nSam Adams\n15';
var drinks = beers.split("\n");

// Create the data table.
var data = new google.visualization.DataTable();
data.addColumn('string', 'Beer');
data.addColumn('number', 'Beers');
data.addRows(drinks.length / 2);

// Set chart options
var options = {'title':'Drinks',
               'width':400,
               'height':300};

//iprints data
for ( var i = 0 ; i < drinks.length - 1 ; i += 2 ) {
    data.setValue(i/2, 0, drinks[i]);
    data.setValue(i/2, 1, parseInt((drinks[i+1])));
}

// Instantiate and draw our chart, passing in some options.
var chart = new google.visualization.BarChart(document.getElementById('chart_div'));
chart.draw(data, options); 
```

# javascript - 如何检查mysql上是否有新数据

> ID：10203050
> 
> 赞同：3
> 
> 时间：2012-04-18T04:59:20.457
> 
> 标签：javascript, php, mysql

我需要编写一个应用程序，每 10 秒检查一次来自外部服务器的数据库，以查看是否有新数据。目前，我有一个 javascript，它通过比较两个 JSON（旧 JSON 和从服务器获取的新 JSON）以及它是否提醒用户来检查数据是否已更改服务器。但这不是我在这个应用程序中需要的。仅当数据是新的而不是更改时才应提醒用户。

我在想也许我可以用一个查询 MYSQL 的 PHP 代码来做到这一点，如果查询 num_results 是 0 循环，直到用户收到通知时 num_results 大于 0。在这个应用程序中，新数据是在 0.1 秒还是 10 秒内可供用户使用并不重要，只要用户得到它。这就是我尝试进行 MYSQL 检查的方式，但它不起作用：

```
<?php
include 'config.php';

if(isset($_GET['ID'])) {
    $maxLoop = 20;    
    while($maxLoop--) {
        $dbh = new PDO("mysql:host=$dbhost;dbname=$dbname", $dbuser, $dbpass); 
        $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        try {
            $sth = $dbh->prepare('select * from testit where id = :id');
            $sth->bindParam(':id',$_GET['ID'],PDO::PARAM_INT);
            $sth->execute();
            if($sth->rowCount()>0) {
                $results = $sth->fetchAll(PDO::FETCH_OBJ);
                echo '{"key":'. json_encode($results) .'}';
                exit; // Found new data, end loop and script
            }
        } catch(PDOException $e) {
            break;   
        }
        sleep(3);    
    } // end while
} // end if 
```

那么如何更改此代码以使其工作，或者我应该尝试编写一些可以做到这一点的javascript？如果是这样，我如何检查数据是否是新的，而不是仅仅检查它是否已更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T05:03:51.833

您如何记录“新”数据？有时间戳吗？auto_increment 主键字段？

最简单的轮询方法是简单地跟踪最后一个已知的 id/时间戳，看看是否有任何具有更高 id/更新时间戳的东西。

照原样，您的方法效率很低。您选择表中的所有记录，强制 mysql/pdo 开始从磁盘等获取该数据......然后在获得行数后将其丢弃。一种更有效的方法是对 a 执行`select count(*) ...`并检查该值。这使 mysql 不必开始从磁盘获取实际的行数据。在某些表类型（尤其是 myisam）上，count(*) 操作非常快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T07:09:16.673

如果您希望您的应用程序每 10 秒检查一次更改，则必须使用`AJAX`向服务器上的 php 文件发出`asyncronous`请求。在 php 文件中，您只需要这样做，`select * from testit where condition=false`您将获得“新数据”。这是一个链接，您可以从中学习基础知识`AJAX`： [http ://www.w3schools.com/ajax/default.asp](http://www.w3schools.com/ajax/default.asp)

# apache-camel - 更新 osgi 包的问题

> ID：10203054
> 
> 赞同：7
> 
> 时间：2012-04-18T04:59:39.077
> 
> 标签：apache-camel, osgi, apache-servicemix, blueprint-osgi

我有一个要求，我需要每天 4 次重新加载我的 osgi 包。重新加载一个包意味着重新创建静态实例 Bean，重新加载骆驼路由，重新创建和注入线程池，数据库连接池 ..etc（其他 spring xml 东西）。我尝试通过 ssh 刷新我的捆绑包，但我需要捆绑包 ID，因为它可以改变超时。所以，我写了一个Manager Bundle，它通过符号名称获取包并每天刷新4次。

```
 osgi impl : felix 

          container : apache-servicemix-4.4.1-fuse-03-06

          Service Dependency spec : Blueprint 
```

有 3 个包和一个帮助包。帮助包包含所有常用的类和服务接口。这 3 个包之间没有代码共享（它们都没有导出任何包）。它们都通过骆驼 vm 端点和服务进行交互。我只刷新了其他 3 个包，而助手包不提供任何服务。

现在，问题是当我对这 3 个捆绑包进行更新时，它们会启动并正常工作，但每次执行此操作时，我都会看到 jconsole 上增加了 800-900 个类。强制 gc 似乎也没有清理这些对象。那么，这些旧的有线物体会是什么呢？服务依赖项应该会自动更新，并且包之间没有代码依赖项。我检查了更新前后类数的差异。

我可以看到某些类的数量翻了一番，例如**org.apache.activemq.camel.component.VmComponent**、 **org.apache.commons.dbcp.BasicDataSource** ..etc 以及我在骆驼路线中定义的一些自定义 bean。我依赖于camel-core、blueprint、quartz...etc 的容器。camel-context 中的bean、VM endpoints..etc 和blueprint-config xml 中定义的组件在更新时会发生什么。我知道它建议在更新 bundle 后调用 FrameworkWiring.refreshBundles() 。但是，我在包之间没有代码共享，我认为任何其他依赖项容器应该处理我认为现在是错误的。而且我不确定 servicemix 中当前的 felix 框架实现是否支持 FrameworkWiring.refreshBundles() （[参考](http://fusesource.com/forums/thread.jspa?threadID=3818&tstart=0)），我无法让它工作。我该如何解决这个问题？

谢谢 sanre6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T22:48:11.340

通常，仅调用捆绑包的更新是不够的。您还必须在某些时候刷新您的包。如果一切正常，这应该足以更新所有包连接，有效地允许旧版本的包被垃圾收集。但是，如果其中一个包中的某些东西表现不佳，并且保持线程运行或缓存中的某些资源或其他东西，您必须开始追踪问题。给自己找一个好的分析器，看看这些“额外”对象属于什么包和类加载器，然后从那里开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T06:11:19.043

我对 Camel 了解不多，但是如果您为平台提供引用捆绑类的可运行文件，那么您需要确保它们在刷新时都被取消或以其他方式销毁，因为它们正在运行的线程将持有引用旧的 Class 实例（它们与新包的 Class 实例不同，即使它们实际上是相同的）。因此，增加班级人数。

# facebook - OG 元标记和 Facebook 的“发送”按钮失败

> ID：10203055
> 
> 赞同：0
> 
> 时间：2012-04-18T04:59:40.660
> 
> 标签：facebook, facebook-graph-api

我很确定元标记和发送按钮代码很好。无论如何，我会在下面显示该代码，但我很确定代码是正确的。

以下是我认为我的问题源于：

**1) 我在我的网站名为landing_page.php**的页面上有一个FB“发送”按钮

 **2）我因此指定

```
 <meta property="og:url" content="http://www.oursite.com/landing_page.php"/> 
```

用于页面的“url”元标记。

3）当我去[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug) - 然后输入我的页面 URL [http://www.oursite.com/landing_page.php](http://www.oursite.com/landing_page.php) --- 我收到一条错误消息.:

***解析 URL 时出错：解析输入 URL 时出错，没有数据被抓取。***

所以我的问题是——我必须把发送按钮只放在 index.php 页面上吗？

我想我可以把发送按钮放在任何页面上，只要我把元标记和发送按钮代码放在那个页面上。但 Facebook 调试器抱怨

***解析 URL 时出错：解析输入 URL 时出错，没有数据被抓取。***

如果我将“发送”按钮和相关代码放在“anypage.php”上并尝试使用它——出现的“发送”框不会选择我的 OG 元标记（见下文），并且 Facebook 调试器无法“抓取”任意页面在我的网站上。

**我必须只将发送按钮放在 index.php 页面上吗？** 或者我需要更改什么才能让landing_page.php 上的发送按钮工作并显示我的OG 元标记设置？

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
 <html
   xmlns="http://www.w3.org/1999/xhtml"
   xmlns:og="http://ogp.me/ns#"
   xmlns:fb="https://www.facebook.com/2008/fbml">

 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

 <head>
 <meta property="og:url" content="http://www.oursite.com/landing_page.php"/>
 <meta property="og:title" content="Wow cool title!"/>
 <meta property="og:image" content="http://www.oursite.com/images/logo.png"/>
 <meta property="og:description" content="Hey -- SUPER-COOL!!"/>
  etc.

  </head>
  <body>
  <div id="fb-root"></div> 
        <script>
        (function(d, s, id) 
        { 
            var js, fjs = d.getElementsByTagName(s)[0]; 
            if (d.getElementById(id)) return; 
            js = d.createElement(s); 
            js.id = id;
            js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
            fjs.parentNode.insertBefore(js, fjs); 
        }
        (document, 'script', 'facebook-jssdk'));
       </script>

      <div class="fb-send" data-href="http://www.oursite.com"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T05:06:06.723

您还需要添加 appid 来报废您的页面

```
<meta property="fb:app_id" content="${fb_app_id}"/> 
```

假设你已经在landing_page.php 中添加了这个标签

您可以在网站的任何位置使用此发送按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T05:06:44.720

您还需要将元标记放在[http://www.oursite.com/landing_page.php](http://www.oursite.com/landing_page.php)中，因为 fb 在提到的 url 上找不到任何元标记

还要检查调试器工具中的 Fetched URL。这将显示他们从您的网址中找到的确切内容**

# php - 创建一个“阶梯式”和“环绕式”的整数 N x N 数组

> ID：10203064
> 
> 赞同：0
> 
> 时间：2012-04-18T05:00:25.790
> 
> 标签：php, arrays, multidimensional-array, for-loop

我在尝试弄清楚如何按如下顺序获取数据时遇到了麻烦。总数无关紧要；它会按照 0、1、2、3、4、5、6 等逻辑顺序的任何数字遵循相同的模式。所以基本上，从 0、2、3、4 等开始，其中 1 将被放置*在*最大数量之后，其中 0 可以是我静态设置的变量。我遇到了一直到最大数量然后继续的问题，*例如*

```
..., 97, 98, 99, 100, 1, 2, ... 
```

然后按照订单进行，

```
..., 98, 99, 100, 1, 2, 3, ... 
```

依此类推，直到 1, 2, 3, 4, 5, 6, ...

并将其全部存储到下面的多维数组中。

```
$set = array(
    array('0','0','0','0','0','0','0','0','0','0','0'),
    array('0','2','3','4','5','6','7','8','9','10','1'),
    array('0','3','4','5','6','7','8','9','10','1','2'),
    array('0','4','5','6','7','8','9','10','1','2','3'),
    array('0','5','6','7','8','9','10','1','2','3','4'),
    array('0','6','7','8','9','10','1','2','3','4','5'),
    array('0','7','8','9','10','1','2','3','4','5','6'),
    array('0','8','9','10','1','2','3','4','5','6','7'),
    array('0','9','10','1','2','3','4','5','6','7','8'),
    array('0','10','1','2','3','4','5','6','7','8','9'),
    array('0','1','2','3','4','5','6','7','8','9','10'),
); 
```

我这样做是因为我无法弄清楚循环模式；如果我能弄清楚我不需要手动输入数据，并且可以按照这种模式创建一个可以选择任何数字的表格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T05:14:41.713

请注意，除了第一行和第一列之外，每一行都只是前一个左移，并添加了下一个值：

```
$max = 10;

// First row (full of 0)
$set = array(array_fill(0, $max + 1, 0));

$row = array();
for($i = 1; $i <= $max; $i++)
    $row[] = $i;
$row[] = 1; // $row  = [2,3,4,...,$max,1]

for($i = 0; $i < $max; $i++){
    $set[] = array_merge(array(0), $row);
    $row = array_map(function($x) use ($max){ // Requires PHP 5.3
        $result = ($x + 1) % $max;
        return 0 === $result ? $max : $result;
    }, $row);
} 
```

[**键盘**](http://codepad.viper-7.com/NszW9n)

如果你需要的话，用这个存储字符串而不是整数当然是相当简单的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T05:27:40.253

```
$array = array();
$max = 10;
for ($i = 0; $i < $max; $i++)
{
    $num = $i + 2;
    $array[$i][] = 0;
    for ($j = 0; $j < $max; $j++)
    {
        if ($num == $max + 1)
            $num = 1;
        $array[$i][] = $num;
        $num++;
    }
}
var_dump($array); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T05:15:44.627

请试试这个.. 这是Java版本。希望这符合您的要求。您可能需要将零设置为数组的第一行。

## 算法

```
int max = 12;
int[][] array = new int[max + 1][max + 1];
int counter = 0;
for(int i = 0; i < max + 1 ; i ++)
{
    array[i][0] = 0;
    counter = i+1;
    for(int j = 1 ; j < max + 1 ; j++)
    {
        int value ;
        if(counter <= max)
            value = max - ( max - counter );
        else
            value = counter - max;
        counter++;
        array[i][j] = value;
        System.out.print(" " + array[i][j]);
    }

    System.out.println("");
} 
```

## 输出

```
1 2 3 4 5 6 7 8 9 10 11 12
 2 3 4 5 6 7 8 9 10 11 12 1
 3 4 5 6 7 8 9 10 11 12 1 2
 4 5 6 7 8 9 10 11 12 1 2 3
 5 6 7 8 9 10 11 12 1 2 3 4
 6 7 8 9 10 11 12 1 2 3 4 5
 7 8 9 10 11 12 1 2 3 4 5 6
 8 9 10 11 12 1 2 3 4 5 6 7
 9 10 11 12 1 2 3 4 5 6 7 8
 10 11 12 1 2 3 4 5 6 7 8 9
 11 12 1 2 3 4 5 6 7 8 9 10
 12 1 2 3 4 5 6 7 8 9 10 11
 1 2 3 4 5 6 7 8 9 10 11 12 
```

# php - 在 PHP 中从 html 内容中提取数据

> ID：10203069
> 
> 赞同：-2
> 
> 时间：2012-04-18T05:01:25.007
> 
> 标签：php, html

我想`<div id="navigation"></div>`使用正则表达式从 html 内容（字符串）中提取标签之间的数据。任何帮助表示赞赏。

`$html = 加载($url);

```
preg_match_all ("/<div>(.+?)<\/div>/is",
            $html, &$matches);

$matches = $matches[1];
$list = array();

foreach($matches as $var)
{  
    print("<br>");  
    print($var."<br>");
}` 
```

在这里，我想从特定的 div 标签中检索数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:08:11.533

我认为最简单的方法是使用 jquery 或者你可以试试这个 html php 短语

[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T05:15:37.970

使用 jQuery

试试这个代码

```
<div id='navigation'>
   <p >
       Navigation div contents
  </p>
</div> 
```

// Javascript

```
var test= $('#navigation').clone();
alert(test.text()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T14:08:19.813

如前所述：[您无法使用正则表达式解析 [X]HTML。](https://stackoverflow.com/a/1732454/118068)

```
$url = "http://yo.ur/url/goes/here";

$dom = new DOMDocument();
$dom->loadHTML(file_get_contents($url));
$dom->preserveWhiteSpace = false;
$element = $dom->getElementById('navigation');
echo $element->nodeValue; 
```

另外，[PHP 加载（）？你在开玩笑吧？](http://php.net/manual/en/function.load.php)

# html - 为什么 漂浮后 从新行开始？

> ID：10203071
> 
> 赞同：0
> 
> 时间：2012-04-18T05:02:16.003
> 
> 标签：html, css

我是 CSS 新手，从 W3Schools (http://www.w3schools.com/css/tryit.asp?filename=trycss_float5) 学习了一个案例。在这种情况下，`<ul>`元素是浮动的，下~~一个`<p>`元素应该像我想的那样围绕它，但它是从新行开始的。为什么`<p>`不包围浮动`<ul>`？而且，~~当我删除 时 `li{display:inline;}`，在 FireFox 和 Chrome 中似乎没有什么不同。你能为我解释一下吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T05:06:05.030

为什么不应该呢？根据`<p>`定义，A 开始一个新段落，这意味着一个新行。你问“为什么我关门后门又关了？”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T05:10:09.453

尝试给你的 p 标签...

```
display:block; //maybe unnecessary
overflow:auto; //very important for containing floats 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T05:11:54.463

这叫做嵌套。标签内的任何内容`<p>`都将......嗯......在它里面。如果你这样写：

```
 <p>
    <ul>
    //content
    </ul>
    </p> 
```

然后你`<ul>`将在段落标签中。就像马克说的那样，段落总是根据定义开始一个新的行。

# android - Android 程序退出尝试显示 jpg 图像

> ID：10203072
> 
> 赞同：1
> 
> 时间：2012-04-18T05:02:21.390
> 
> 标签：android

这是我的程序。

```
public class MathsExplorer extends Activity {
    /** Called when the activity is first created. */

    private GraphicsView view;
    @Override
    public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);

       setContentView(view);

    }
}
public class GraphicsView extends View {

    public GraphicsView(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
    }

    public void onDraw(Canvas canvas)
    {
        super.onDraw(canvas);
        String background = "/Maths Explorer/bin/res/drawable/MC900436279.jpg";
        Bitmap b = BitmapFactory.decodeFile(background);
        canvas.drawBitmap(b, 10, 10, null);
    }
} 
```

它立即退出并显示错误“不幸的是，Maths Explorer 已停止。”

谁能帮我？我不确定，我只是想显示一个图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T05:10:08.923

我认为文件的路径是错误的，你不能这样做。试试[这个](http://developer.android.com/reference/android/graphics/BitmapFactory.html#decodeResource%28android.content.res.Resources,%20int%29)。

# c# - 带有linq表达式的数据表的左外连接？

> ID：10203073
> 
> 赞同：0
> 
> 时间：2012-04-18T05:02:22.327
> 
> 标签：c#, linq, c#-4.0

我有两个`DataTable`：

```
DataTable dtFields = new DataTable("tmpFieldTable");                
dtFields.Columns.Add("FieldID");
dtFields.Columns.Add("CDGroupID");
dtFields.Columns.Add("CDCaption");
dtFields.Columns.Add("fldIndex"); 
```

和

```
DataTable dtCDGroup = new DataTable("tmpCDGroup");               
dtCDGroup.Columns.Add("CDGroupID");
dtCDGroup.Columns.Add("Name");
dtCDGroup.Columns.Add("Priority"); 
```

我正在使用以下 LINQ 表达式来加入这些表：

```
var resultList = dtFields.AsEnumerable()
                         .Join(dtCDGroup.AsEnumerable(),
                               fieldList => fieldList.Field<string>("CDGroupID"),
                               cd => cd.Field<string>("CDGroupID"),
                               (fieldList, cd) => new
                               {
                                   FieldID = fieldList.Field<string>("FieldID"),
                                   CdGroup = cd.Field<string>("Name"),
                                   CDCaption = fieldList.Field<string>("CDCaption"),
                                   Priority = (cd.Field<string>("Priority") ?? "99"),
                                   fldIndex = fieldList.Field<string>("fldIndex").ToString()
                               })
                         .OrderBy(result => result.Priority)
                         .ThenBy(result => result.fldIndex); 
```

如何使用这些`DataTable`s 执行左外连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:15:12.377

只需添加[`DefaultIfEmpty()`](http://msdn.microsoft.com/en-us/library/bb360179%28v=vs.95%29.aspx)到您的表中：

```
resultList = dtFields.AsEnumerable() 
                     .Join(dtCDGroup.AsEnumerable().DefaultIfEmpty(), 
                           fieldList => fieldList.Field<string>("CDGroupID"), 
                           cd => cd.Field<string>("CDGroupID"), 
                           (fieldList, cd) => new 
                           { 
                               FieldID = fieldList.Field<string>("FieldID"), 
                               CdGroup = cd.Field<string>("Name"), 
                               CDCaption = fieldList.Field<string>("CDCaption"), 
                               Priority = (cd.Field<string>("Priority") ?? "99"), 
                               fldIndex = fieldList.Field<string>("fldIndex").ToString() 
                           }) 
                     .OrderBy(result => result.Priority) 
                     .ThenBy(result => result.fldIndex); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T05:17:48.500

使用 lambda 表达式本机不提供左连接。但是您可以使用 GroupJoin 和 SelectMany 方法来实现这一点。

```
var result = new string[] { "A", "B" }.GroupJoin(new string[] { "B" }, l => l, r => r, (l, r) => new { l, r }).ToList();
            Console.WriteLine(result.Count()); 
```

这将导致 result[0].r.Count() = 0 和 result[1].r.Count() = 1。

希望这会有所帮助。

问候。

# ruby-on-rails - 在 Rails 自定义验证中使用范围

> ID：10203078
> 
> 赞同：6
> 
> 时间：2012-04-18T05:03:03.897
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, ruby-on-rails-3.2, rails-3.1

我想在我的自定义验证中应用范围限制器

我有这个产品模型，它有 make,model,serial_number, vin 作为属性

现在我有一个自定义验证来检查 vin 如果 vin 不存在来检查数据库中 make+model+serial_number 唯一性的组合，就像这样

> 验证 :combination_vin,:if => "vin.nil?"

```
def combination_vin 
  if Product.exists?(:make => make,:model => model,:serial_number => serial_number)
      errors.add(:base,"The Combination of 'make+model+serial_number' already present")
  end
end 
```

我想在这个验证器中针对 user_id 引入一个范围

现在我知道我可以很容易地写这个来实现同样的使用

```
 def combination_vin
    if Product.exists?(:make => make,:model => model,:serial_number => serial_number,:user_id => user_id)
      errors.add(:base,"The Combination of 'make+model+serial_number' already present")
    end
 end 
```

但出于好奇，我在想自定义验证是否有一个范围验证器（类似于**{:scope => :user_id}**），这样我就不必在存在时传递那个额外的**user_id了****？哈希**

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T05:17:00.977

尝试 ：

```
validate :combination_vin , :uniqueness => { :scope => :user_id } , :if => "vin.nil?" 
```

# iphone - 动画导航栏按钮

> ID：10203093
> 
> 赞同：0
> 
> 时间：2012-04-18T05:04:20.783
> 
> 标签：iphone, ios, xcode, uinavigationbar

我想知道是否有办法在说 if 语句合格时出现正确的导航栏按钮.. 所以说如果用户正在填写一些详细信息然后 if 语句运行有没有办法按钮从不存在变为淡入并可选择？

目前我只是把它放在那里，但将是一个很好的用户奖励，以表明用户已经满足按下搜索按钮等的需求。

这就是我目前正在做的一切。

```
if (blaa blaa) {
//Add search barbutton
    self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Search" style:UIBarButtonSystemItemDone target:nil action:nil];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:51:30.350

首先，您应该将 rightBarButtonItem 添加到导航栏并将 alpha 设置为 0.0

他们试试这个

```
[UIView animateWithDuration:0.3f
                      delay:0
                    options:UIViewAnimationCurveEaseInOut
                 animations:^{
                     self.navigationItem.rightBarButtonItem.customView.alpha = 1.0f;

                 }
                 completion:^(BOOL finished) {
                 }]; 
```

**更新**

在你的代码中

```
if (blaa blaa) {
    UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
[btn setTitle:@"search" forState:UIControlStateNormal];

    self.navigationItem.rightBarButtonItem = [[[UIBarButtonItem alloc] initWithCustomView: btn] autorelease];

    self.navigationItem.rightBarButtonItem.customView.alpha = 0.0f;

} 
```

那么你可以使用上面的代码

**更新**

抱歉，我检查了代码，UIViewControler 将重置 barButtonItem 属性，因此您必须在视图显示之前设置为 agian

```
- (void)viewDidAppear:(BOOL)animated
{
    self.navigationItem.rightBarButtonItem.customView.alpha = 0.0f;
} 
```

然后当按钮被点击时

```
- (void) buttonTap:(UIButton*)btn
{
    [UIView animateWithDuration:1.0f
                      delay:0
                    options:UIViewAnimationCurveEaseInOut
                 animations:^{
                     self.navigationItem.rightBarButtonItem.customView.alpha = 1.0f;
                 }
                 completion:^(BOOL finished) {
                 }];
} 
```

它应该有效！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T05:07:17.630

使用 -initWithCustomView 在 UIBarbuttonItem 内创建一个 UIButton，该 UIBarbuttonItem 又位于导航栏内，PHEW！然后你就可以完全访问 alpha 的 UIButton，一个奢侈的 UIBarButtonItem 是买不起的。

当然，这都是 iOS 5 之前的内容。使用 +appearance 将视图的 backgroundColor 从 0.0 alpha 设置为 1.0 alpha（注意，在这种情况下 UIColor 不可设置动画，请使用 CGColor 属性）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T05:36:19.090

在某种程度上实现这一点的一种简单方法是修改您的按钮`setEnable`状态。这不会改变按钮是否可见，但会切换用户是否可以与之交互，就像这样。

![在此处输入图像描述](../Images/9a54253d0607f99a8ba78e9e6826bc2c.png)

```
if (blahblah == YES) {
    [myBarButtonItem setEnabled:NO];

}else {
    [myBarButtonItem setEnabled:YES];
} 
```

# c# - 将 Crypto API 调用转换为 .NET

> ID：10203098
> 
> 赞同：1
> 
> 时间：2012-04-18T05:05:04.340
> 
> 标签：c#, .net, cryptography, cryptoapi

我在 C++ 中有这段代码（AnsiString 是 char* 缓冲区的包装器）：

```
BOOL HashIt(AnsiString &pw,BYTE *buf,BYTE &len)
{
   HCRYPTPROV cp;
   CryptAcquireContext(&cp,NULL,NULL,PROV_RSA_AES,CRYPT_VERIFYCONTEXT);

   HCRYPTHASH ch;
   CryptCreateHash(cp,CALG_MD5,0,0,&ch);

   CryptHashData(ch,(BYTE*)pw.c_str(),pw.Length(),0);

   HCRYPTKEY kc;
   CryptDeriveKey(cp,CALG_3DES,ch,CRYPT_EXPORTABLE,&kc);
   CryptExportKey(kc,NULL,PLAINTEXTKEYBLOB,0,buf,&dwLen);

   len = (BYTE) dwLen;
} 
```

到目前为止，我已经将它转换为 .NET：

```
 public static byte[] HashItB(string text)
    {
        byte[] textBytes = System.Text.Encoding.UTF8.GetBytes(text);
        System.Security.Cryptography.MD5CryptoServiceProvider sp = new System.Security.Cryptography.MD5CryptoServiceProvider();

        byte[] hashBytes = sp.ComputeHash(textBytes);
        System.Security.Cryptography.PasswordDeriveBytes pdb = new System.Security.Cryptography.PasswordDeriveBytes(hashBytes, new byte[0]);
        hashBytes = pdb.CryptDeriveKey("TripleDES", "SHA1", 192, hashBytes);

        // Need to export key as plain text blob here, CryptExportKey

        return (hashBytes);
    } 
```

假设上面的代码是正确的，我的最后一步是将 CryptExportKey 函数转换为 .NET。有人可以指点我的功能或样本吗？我无法更改 C++ 方法，我需要我的 .NET 代码来匹配旧版应用程序。或者我应该放弃 .NET 方法并创建一个 C++ DLL 并调用它（由于我的小应用程序附带另一个 DLL 的额外大小，这并不疯狂），或者调用所有 Crypto 函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T05:51:35.923

.NET 方法`PasswordDeriveBytes.CryptDeriveKey()`等价于使用 Win32 CryptoAPI 方法对密码进行哈希处理，调用`CryptDeriveKey`并最终通过调用导出密钥`CryptExportKey`。

您的 C++ 代码相当于：

```
byte[] textBytes = System.Text.Encoding.Default.GetBytes(text); // Default is the ANSI-code-page
System.Security.Cryptography.PasswordDeriveBytes pdb = new System.Security.Cryptography.PasswordDeriveBytes(textBytes, new byte[0]);
byte[] hashBytes = pdb.CryptDeriveKey("TripleDES", "MD5", 0, new byte[8]); 
```

除了 .NET 代码从导出的密钥（一个 PLAINTEXTKEYBLOB 头）中删除一些头数据。对于 192 位 3DES 密钥，这是`"08 02 00 00 03 66 00 00 18 00 00 00"`. 如果需要，您可以将其添加到 .NET 代码中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T05:28:38.657

PasswordDeriveBytes.CryptDeriveKey 方法**已经返回派生密钥**，因此无需像在 C++ 代码中那样导出密钥。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T15:41:12.150

感谢您的帮助，如果以后有人需要阅读这篇文章，这就是我的最终结果。我确信字节数组的构建可能会更好，但在我的情况下，这段代码不需要很快，所以我只选择了我容易阅读的内容：

```
 public static byte[] HashIt(string text)
    {
        byte[] textBytes = System.Text.Encoding.UTF8.GetBytes(text);
        System.Security.Cryptography.PasswordDeriveBytes pdb = new System.Security.Cryptography.PasswordDeriveBytes(textBytes, new byte[0]);
        byte[] hashBytes = pdb.CryptDeriveKey("TripleDES", "MD5", 0, new byte[8]);
        byte[] head = new byte[] { 0x08,0x02, 0x00, 0x00, 0x03, 0x66, 0x00, 0x00, 0x18, 0x00, 0x00, 0x00 };
        byte[] hashBytesWithHead = new byte[hashBytes.Length + head.Length];
        head.CopyTo(hashBytesWithHead,0);
        hashBytes.CopyTo(hashBytesWithHead,head.Length);
        return (hashBytesWithHead);
    } 
```

# javascript - 如何：YouTube API 在开始播放时触发 Javascript 事件

> ID：10203100
> 
> 赞同：-1
> 
> 时间：2012-04-18T05:05:23.760
> 
> 标签：javascript, youtube, youtube-javascript-api

我正在使用方法在我的网站中嵌入 YouTube 视频。

**当访问者看到我的视频时，我需要触发 JavaScript 函数。**

基本上，我的视频是基于教程的。我想在访问者看到视频时触发反馈表单。

我不确定何时以及如何触发事件？？！！在视频的开头或结尾。

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:53:25.797

检查[youtube api 的 javascript](https://developers.google.com/youtube/js_api_reference)：

> 显示无镶边播放器的 HTML 页面必须实现名为 onYouTubePlayerReady 的回调函数。当播放器完全加载并且 API 准备好接收调用时，API 将调用此函数。可能的状态是：
> 
> > onStateChangeThis 事件在玩家状态改变时触发。可能的值是未开始 (-1)、结束 (0)、播放 (1)、暂停 (2)、缓冲 (3)、视频提示 (5)。首次加载 SWF 时，它将广播未启动 (-1) 事件。当视频被提示并准备好播放时，它将广播视频提示事件 (5)。”

```
 function onYouTubePlayerReady(playerId) {
    ytplayer = document.getElementById("myytplayer");
    ytplayer.addEventListener("onStateChange", "onytplayerStateChange");
 }

 function onytplayerStateChange(newState) {
    alert("Player's new state: " + newState);
 } 
```

# c# - 在 C++ 中为 Azure 中的 blobId 将 int 转换为 little-endian 格式的字节

> ID：10203105
> 
> 赞同：0
> 
> 时间：2012-04-18T05:06:12.887
> 
> 标签：c#, c++, qt, qbytearray

使用 Azure 的 base64 编码（http://msdn.microsoft.com/en-us/library/dd135726.aspx），我似乎不知道如何取回所需的字符串。我可以在 C# 中执行以下操作。

```
int blockId = 5000;
var blockIdBytes = BitConverter.GetBytes(blockId);
Console.WriteLine(blockIdBytes);
string blockIdBase64 = Convert.ToBase64String(blockIdBytes);
Console.WriteLine(blockIdBase64); 
```

打印出来（在 LINQPad 中）：

```
Byte[] (4 items)
| 136         |
| 19          |
| 0           |
| 0           |

iBMAAA== 
```

在 Qt/C++ 中，我尝试了一些 aporache，它们都返回了错误的值。

```
const int a = 5000;
QByteArray b;

for(int i = 0; i != sizeof(a); ++i) {
  b.append((char)(a&(0xFF << i) >>i));
}

qDebug() << b.toBase64(); // "iIiIiA==" 
qDebug() << QByteArray::number(a).toBase64(); // "NTAwMA=="
qDebug() << QString::number(a).toUtf8().toBase64(); // "NTAwMA==" 
```

如何获得与 C# 版本相同的结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T05:18:14.690

`for`有关您的循环问题，请参阅我的评论。每次传递都会多移动一位，但实际上应该是 8 位。就个人而言，我更喜欢这个循环：

```
 b.append(static_cast<char>(a >> 24)); 
    b.append(static_cast<char>((a >> 16) & 0xff)); 
    b.append(static_cast<char>((a >> 8) & 0xff)); 
    b.append(static_cast<char>(a & 0xff)); 
```

上面的代码用于网络标准字节顺序（大端）。将四个操作的顺序从最后一个翻转到第一个，以获得 little endian 字节顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T05:24:44.220

我最终做了以下事情：

```
QByteArray temp;
int blockId = 5000;

for(int i = 0; i != sizeof(blockId); i++) {
  temp.append((char)(blockId >> (i * 8)));
}

qDebug() << temp.toBase64(); // "iBMAAA==" which is correct 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-18T05:39:47.730

我认为这会更清楚，尽管可能会声称风格不佳......

```
int i = 0x01020304;
char (&bytes)[4] = (char (&)[4])i; 
```

您可以使用 bytes[0]、bytes[1]、... 直接访问每个字节，然后对它们做任何您想做的事情。

# java - 我在 Blackjack Java 中测试 Player 类有什么问题

> ID：10203111
> 
> 赞同：0
> 
> 时间：2012-04-18T05:06:39.487
> 
> 标签：java, computer-science, blackjack

我正在尝试正确测试我的播放器类，我几乎已经完成了，但是我的**p1.setPlayerHand**方法有问题。这是我用于播放器类的以下代码：

**玩家等级：**

```
 package model;

  public class Player
 {
private String PlayerName;
private Hand PlayerHand;
private boolean Dealer;

public Player(String name)
{
    PlayerName = name;
    PlayerHand = new Hand();
    Dealer = false;
}

public void setName (String name)
{
    this.PlayerName = name;
}

public String getName()
{
    return PlayerName;
}

public void setDealer (Boolean dealer)
{
    this.Dealer = dealer;
}

public boolean getDealer()
{
    return Dealer;
}

public void setPlayerHand (Hand hand)
{
    this.PlayerHand = hand;
}

public void getHand()
{
    PlayerHand.displayCardsinHand();
}

public static void main (String [] args)
{
    Player p1 = new Player("player1");
    Hand h = new Hand();
    //System.out.println(p1);
    p1.setName("BARRY");

    System.out.println(p1.getName());
    p1.setDealer(false);
    System.out.println(p1.getDealer());

            //this is the error that is preventing my program to run
    p1.setPlayerHand(h.addCard(new Card(Suit.CLUBS, CardRank.ACE)));
    p1.getHand();
}
  } 
```

我收到的以下错误（在测试 Player 类之后）是这样的：

**线程“main”java.lang.Error 中的异常：未解决的编译问题：Player 类型中的方法 setPlayerHand(Hand) 不适用于 model.Player.main(Player.java:57) 处的参数 (void)**

这是下面的手类（链接到玩家类）：

**手类：**

```
package model;

import java.util.Vector;
import java.util.Random;

public class Hand

{
private Vector<Card> hand;

public Hand()
{
    hand = new Vector<Card>();
}

public void addCard(Card c)
{

    hand.add(c);
}

public void displayCardsinHand()
{
    for (int card = 0; card < hand.size(); card++)
    {
            System.out.println(hand.elementAt(card));
    }
}

public int getCardsinHand()
{
    return hand.size();
}

  public Card getCard(int position)
  {
    if(position >= 0 && position < hand.size())
        return (Card)hand.elementAt(position);
    else
        return null;
  } 

  public int getScore()
  {
    int value = 0;
    boolean ace = false;

    for (int i = 0; i < hand.size(); i++)
    {
        Card c;
        c = getCard(i);
        value = value + c.getRankValue();

        if(c.getRankValue() == 1)
        {
            ace = true;
        }
    }

    if(ace == true && value + 10 <= 21)
    {
        value = value + 10;
    }

    return value;   
}
public static void main (String [] args)
{
    Hand h = new Hand();
    System.out.println(h);

    h.displayCardsinHand();

    System.out.println(h.getCardsinHand());
    h.addCard(new Card(Suit.HEARTS, CardRank.ACE));
    System.out.println(h.getCardsinHand());
    h.addCard(new Card(Suit.SPADES, CardRank.JACK));
    System.out.println(h.getCardsinHand());
    h.addCard(new Card(Suit.DIAMONDS, CardRank.QUEEN));
    System.out.println(h.getCardsinHand());
    h.addCard(new Card(Suit.CLUBS, CardRank.KING));
    System.out.println(h.getCardsinHand());
    System.out.println(h.getCardsinHand());
    h.displayCardsinHand();
    h.getCard(1);

    System.out.println(h.getScore());
}

  } 
```

我曾多次尝试修改**p1.setPlayerHand**测试。感谢您提供有关如何解决此问题的任何建议和提示，谢谢。如果我的代码对于这篇文章来说太长了，那么我很乐意接受任何关于我应该做些什么来缩短它的建议（以供将来参考）。如果这里有人需要查看我编写的任何其他类（这可能有助于他们帮助我解决此错误），请在此处通知我，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T05:16:29.137

该方法`addCard`不返回任何东西`(void)`。所以你不能将此方法的结果传递给`setPlayerHand(Hand)`. 这就是你正在做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T13:17:41.747

如果您更改，代码应该编译并运行

```
p1.setPlayerHand(h.addCard(new Card(Suit.CLUBS, CardRank.ACE))); 
```

至

```
h.addCard(new Card(Suit.CLUBS, CardRank.ACE));
p1.setPlayerHand(h); 
```

这是因为该`setPlayerHand`方法需要传递一个类型为 的对象`Hand`，但该`addCard`方法不返回任何内容（它被声明为`void`）。

# actionscript-3 - AS3 使用补间缩放 x 和 y 以提供动画剪辑反弹效果

> ID：10203112
> 
> 赞同：0
> 
> 时间：2012-04-18T05:06:39.540
> 
> 标签：actionscript-3, flash, animation, tween

我正在尝试使用补间类使我的“按钮”生效。我还试图通过使用一个函数来处理我所有按钮的这种效果，从而使我的代码更有效。

```
var MusicClip:MovieClip  = new music_mc();
var MoviesClip:MovieClip  = new movie_mc();
var GameClip:MovieClip  = new game_mc();

MusicClip.y = 63;
MusicClip.x = 577;
MoviesClip.y = 87;
MoviesClip.x = 401;
GameClip.y = 75;
GameClip.x = 151;

addChild(MusicClip);
addChild(MoviesClip);
addChild(GameClip); 
```

这是我很难过的地方。我以为我必须对所有三个 MovieClip 的 scaleX 和 scaleY 进行补间，但是该按钮只出现在舞台上并且没有动画。另外，如果我可以将此代码放在一个函数中，那么我就不必编写它了每个按钮（和未来的按钮）都会很棒。

```
var scaleTween:Tween=new Tween(MusicClip,"scaleX",Elastic.easeOut,0,1,1,true);
var scale2Tween:Tween=new Tween(MusicClip,"scaleY",Elastic.easeOut,0,1,1,true); 
```

我没有收到任何错误，但没有弹跳效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:15:25.797

您需要将侦听器分配给您的 MovieClip，以便在您执行某项操作时执行操作。您可以对所有 MovieClip 使用单个事件处理程序：

```
MusicClip.addEventListener(MouseEvent.MOUSE_OVER,bounceButton);
MusicClip.addEventListener(MouseEvent.MOUSE_OVER,bounceButton);
MoviesClip.addEventListener(MouseEvent.MOUSE_OVER,bounceButton);

function bounceButton(event:MouseEvent):void
{
    var scaleTween:Tween=new Tween(event.target,"scaleX",Elastic.easeOut,0,1,1,true);
    var scale2Tween:Tween=new Tween(event.target,"scaleY",Elastic.easeOut,0,1,1,true);
} 
```

请注意，您使用的不是将任何一个 MovieClip 指定为补间目标，而是`event.target`指您翻转的 MovieClip。

在不相关的注释中，以小写字母开头的实例名称是一种很好的做法。这有助于将它们与按照惯例以大写字母开头每个单词的类名区分开来：

```
var myVariable:MyClass; 
```

# internet-explorer - IE6 中重定向操作中止错误

> ID：10203116
> 
> 赞同：0
> 
> 时间：2012-04-18T05:06:53.653
> 
> 标签：internet-explorer, https, internet-explorer-6

我在 IE6 中遇到问题。

我使用 php函数将[http://example.com](http://example.com)重定向到[https://example.com 。](https://example.com)`header()`它在 FF 和 IE > 6 中运行良好，但在 IE6 中的警告框中会出现此错误：

```
The Internet Explorer cannot open https://example.com
Operation abored 
```

为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T04:47:13.027

这是因为一些js脚本。我在标签中添加了' defer="defer" '，问题解决了。希望它可以帮助其他有同样问题的人。

# jquery - jQuery zClip 委托需要点击两次

> ID：10203119
> 
> 赞同：0
> 
> 时间：2012-04-18T05:07:06.383
> 
> 标签：jquery, events, zclip

我想为ajax加载的结果启用zClip（json数据，变成html片段）......但是有一个问题，因为zClip自己附加了`click`事件......

```
 $('ul.detail_list').delegate("a.clipboard", "click", function(e){
                        e.preventDefault();
                        $(this).zclip({
                            path:'images/ZeroClipboard.swf',
                            copy:$(this).text(),
                            afterCopy:function(){
                                window.open('....');
                            },
                            clickAfter: false
                        }); 
```

我必须单击两次才能触发 Zclip。否则，此代码将正常工作（如果我这样做`alert`或`console.log`不是 zClip 它每次都会触发）...

那么我怎样才能附加 Zclip 来防止这种情况呢？

更新：忘了提`ul.detail_list`的是在 json 响应后生成的 html 片段。

html 片段（从 json 响应动态生成）：

```
 <ul class="detail_list">
    <li><a href="#" class="clipboard">text to copy 1</a></li>
<li><a href="#" class="clipboard">text to copy 2</a></li>
    ...
    </ul> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T05:46:33.100

不确定它是否会有所帮助，我会这样尝试：

```
$("body").undelegate('ul.detail_list', "click",  function(eventUndelegated) {
    $('ul.detail_list').delegate("a.clipboard", "click", function(eventDelegated){
        eventDelegated.preventDefault();
        eventDelegated.stopPropagation();
        $(this).zclip({
            path:'images/ZeroClipboard.swf',
            copy:$(this).text(),
            afterCopy:function(){
                window.open('....');
            },
            clickAfter: false
        });
    });

}); 
```

# objective-c - cocoa: popover ,如何隐藏区域？

> ID：10203120
> 
> 赞同：0
> 
> 时间：2012-04-18T05:07:08.470
> 
> 标签：objective-c, xcode, macos, cocoa

```
-(IBAction)showInfoPopover:(id)sender{
    [[self popover] showRelativeToRect:[sender bounds] ofView:sender preferredEdge:NSMaxYEdge];

} 
```

如何隐藏区域？</p>

隐藏popover，什么事件？坦克！</p>

![图片](../Images/5cc395d1f455dd8696812b332067076f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T13:53:36.223

![在此处输入图像描述](../Images/ade35966fdf77a0a370f6183b215b442.png)

# javascript - Node.JS Socket.IO 向特定连接 ID 发送数据包

> ID：10203123
> 
> 赞同：1
> 
> 时间：2012-04-18T05:07:15.467
> 
> 标签：javascript, node.js, socket.io

过去一周我一直在寻找这个特殊的问题，因为我找不到任何关于这个主题的信息（那不是过时的），我只是决定做其他事情。但是现在我需要能够使用他们的 ID 将数据（我构建的）发送到特定的客户端，这些客户端使用 node.js 和 socket.io 连接到我的服务器。我已经将 ID 存储在每个新连接的对象中。我需要知道的是一种将其发送到我选择的连接 ID 的方法。

像：函数发送（数据，client.id）{}；

我使用的是 http 服务器，而不是 TCP。

这可能吗？

编辑：

```
server = http_socket.createServer(function (req, res) {
    res.writeHead(200, {'Content-Type': 'text/html'});
    res.end(respcont);
    client_ip_address = req.header('x-forwarded-for');
    });
socket = io.listen(1337);   // listen
//=============================================
//  Socket event loop
//=============================================
socket.on ('connection', function (client_connect) {
    var client_info = new client_connection_info();     // this just holds information 
    client_info.addNode(client_connect.id, client_connect.remoteAddress, 1); // 1 = trying to connet

    var a = client_info.getNode(client_connect.id,null,null).socket_id; // an object holding the information.  this function just gets the socket_id
    client_connect.socket(a).emit('message', 'hi');

    client_connect.on('message', function (data) {
         });
    client_connect.on ('disconnect', function () {

    );
}); 
```

解决方案：我只是通过实验弄清楚了......你要做的是确保你存储 SOCKET，而不是 socket.id（就像我正在做的那样）并使用它来代替。

```
client_info.addNode(client_connect.id, client_connect.remoteAddress, client_connect, 1)

var a = client_info.getNode(client_connect.id,null,null,null).socket;
    a.emit('message', 'hi'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:52:34.470

如果您需要这样做，最简单的做法是构建和维护一个将 ids 映射到连接的全局关联数组：然后您可以在需要时查找适当的连接，只需使用常规发送函数。您需要一些逻辑来从阵列中删除连接，但这应该不会太痛苦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T06:19:57.447

是的，有可能。

```
io.sockets.socket(id).emit('message', 'data'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T07:54:27.377

您的解决方案有一个主要缺点：缩放。当您的应用程序需要更多的一台机器时，您会怎么做？使用内部 ID 也可能很困难。我建议使用外部 ID（如用户名）。

[与这篇文章](https://stackoverflow.com/questions/9662141/socket-reference-in-socket-io/9663664#9663664)类似，我建议使用房间（与 Redis 一起允许缩放）。为每个新套接字添加私人房间（例如基于用户名）。代码可能如下所示：

```
socket.join('priv/' + name);
io.sockets.in('priv/' + name).emit('message', { msg: 'hello world!' }); 
```

该解决方案允许多台机器向任何用户发出事件。在我看来，它也非常简单和优雅。

# android - 如何在 android 中重置/更新 DHCP？

> ID：10203126
> 
> 赞同：2
> 
> 时间：2012-04-18T05:07:30.030
> 
> 标签：android, android-intent, android-ndk

我想通过代码重置/更新 android 中的 DHCP 那么有什么方法/命令可以实现相同的功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:50:47.700

尝试使用 WifiManager 方法：调用[disconnect](http://developer.android.com/reference/android/net/wifi/WifiManager.html#disconnect%28%29)，然后[reconnect](http://developer.android.com/reference/android/net/wifi/WifiManager.html#reconnect%28%29)。您需要确保您拥有适当的许可：我认为您`ACCESS_WIFI_STATE`至少`CHANGE_WIFI_STATE`需要。

看看这是否适合你。

# android - Android：以编程方式初始化具有参数的 XML 对象

> ID：10203128
> 
> 赞同：1
> 
> 时间：2012-04-18T05:07:38.657
> 
> 标签：android, xml, coverflow, instant

我有一个名为 CoverFlowClass 的课程。我曾经这样做是为了创建一个类，

```
CoverFlowClass coverFlow = new CoverFlowClass(this)
coverFlow.setAdapter(new ImageAdapter(this)); 
```

但现在我想使用 XML 来进行布局。我创建一个这样的 XML 代码：

```
<id.co.ajsmsig.display.CoverFlowClass
    android:id="@+id/coverflow"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
/> 
```

但是当我从这样的代码创建时：

```
CoverFlowClass coverFlow=  (CoverFlowClass) findViewById(R.id.coverflow);
coverFlow.setAdapter(new ImageAdapter(this)); 
```

我的应用程序强制关闭。我发现的 LogCat 中的错误日志是：

> 04-18 07:46:34.804: E/AndroidRuntime(1847): 在 id.co.ajsmsig.display.CoverFlowMain.onCreate(CoverFlowMain.java:76)。

第 76 行是：

```
coverFlow.setAdapter(new ImageAdapter(this)); 
```

我认为是因为该类在其构造函数中使用了一个参数（= new CoverFlowClass(this)），而 findViewById 没有提供任何参数。我仍然不知道，如何使这项工作？任何想法都值得赞赏。

谢谢

Ps 下面是 CoverFlow 类的源码：

* * *

```
package id.co.ajsmsig.display;

import android.content.Context;
import android.graphics.Camera;
import android.graphics.Matrix;
import android.util.AttributeSet;
import android.view.View;
import android.view.animation.Transformation;
import android.widget.Gallery;
import android.widget.ImageView;

public class CoverFlowClass extends Gallery {

    /**
     * Graphics Camera used for transforming the matrix of ImageViews
     */
    private Camera mCamera = new Camera();

    /**
     * The maximum angle the Child ImageView will be rotated by
     */    
    private int mMaxRotationAngle = 60;

    /**
     * The maximum zoom on the centre Child
     */
    private int mMaxZoom = -120;

    /**
     * The Centre of the Coverflow 
     */   
    private int mCoveflowCenter;

    public CoverFlowClass(Context context) {
  super(context);
  this.setStaticTransformationsEnabled(true);
 }

    public CoverFlowClass(Context context, AttributeSet attrs) {
  super(context, attrs);
        this.setStaticTransformationsEnabled(true);
 }

    public CoverFlowClass(Context context, AttributeSet attrs, int defStyle) {
   super(context, attrs, defStyle);
   this.setStaticTransformationsEnabled(true);   
  }

    /**
     * Get the max rotational angle of the image
  * @return the mMaxRotationAngle
  */
    public int getMaxRotationAngle() {
  return mMaxRotationAngle;
 }

 /**
    * Set the max rotational angle of each image
  * @param maxRotationAngle the mMaxRotationAngle to set
  */
    public void setMaxRotationAngle(int maxRotationAngle) {
  mMaxRotationAngle = maxRotationAngle;
 }

 /**
    * Get the Max zoom of the centre image
  * @return the mMaxZoom
  */
    public int getMaxZoom() {
  return mMaxZoom;
 }

 /**
    * Set the max zoom of the centre image
  * @param maxZoom the mMaxZoom to set
  */
    public void setMaxZoom(int maxZoom) {
        mMaxZoom = maxZoom;
    }

 /**
     * Get the Centre of the Coverflow
     * @return The centre of this Coverflow.
     */
    private int getCenterOfCoverflow() {
        return (getWidth() - getPaddingLeft() - getPaddingRight()) / 2 + getPaddingLeft();
    }

    /**
     * Get the Centre of the View
     * @return The centre of the given view.
     */
    private static int getCenterOfView(View view) {
        return view.getLeft() + view.getWidth() / 2;
    }  
    /**
     * {@inheritDoc}
  *
  * @see #setStaticTransformationsEnabled(boolean) 
  */ 
    protected boolean getChildStaticTransformation(View child, Transformation t) {

  final int childCenter = getCenterOfView(child);
  final int childWidth = child.getWidth() ;
  int rotationAngle = 0;

  t.clear();
  t.setTransformationType(Transformation.TYPE_MATRIX);

        if (childCenter == mCoveflowCenter) {
            transformImageBitmap((ImageView) child, t, 0);
        } else {      
            rotationAngle = (int) (((float) (mCoveflowCenter - childCenter)/ childWidth) *  mMaxRotationAngle);
            if (Math.abs(rotationAngle) > mMaxRotationAngle) {
             rotationAngle = (rotationAngle < 0) ? -mMaxRotationAngle : mMaxRotationAngle;   
            }
            transformImageBitmap((ImageView) child, t, rotationAngle);         
        }    

  return true;
 }

 /**
    * This is called during layout when the size of this view has changed. If
  * you were just added to the view hierarchy, you're called with the old
  * values of 0.
  *
  * @param w Current width of this view.
  * @param h Current height of this view.
  * @param oldw Old width of this view.
  * @param oldh Old height of this view.
     */
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        mCoveflowCenter = getCenterOfCoverflow();
        super.onSizeChanged(w, h, oldw, oldh);
     }

    /**
    * Transform the Image Bitmap by the Angle passed 
    * 
    * @param imageView ImageView the ImageView whose bitmap we want to rotate
    * @param t transformation 
    * @param rotationAngle the Angle by which to rotate the Bitmap
    */
    private void transformImageBitmap(View child, Transformation t, int rotationAngle) {            
      mCamera.save();
      final Matrix imageMatrix = t.getMatrix();;
      final int imageHeight = child.getLayoutParams().height;;
      final int imageWidth = child.getLayoutParams().width;
      final int rotation = Math.abs(rotationAngle);

      mCamera.translate(0.0f, 0.0f, 100.0f);

      //As the angle of the view gets less, zoom in     
      if ( rotation < mMaxRotationAngle ) {
       float zoomAmount = (float) (mMaxZoom +  (rotation * 1.5));
       mCamera.translate(0.0f, 0.0f, zoomAmount);          
      } 

      mCamera.rotateY(rotationAngle);
      mCamera.getMatrix(imageMatrix);               
      imageMatrix.preTranslate(-(imageWidth/2), -(imageHeight/2)); 
      imageMatrix.postTranslate((imageWidth/2), (imageHeight/2));
      mCamera.restore();
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T13:49:12.693

抱歉，这个回复有点晚了，但也许它会帮助有类似问题的人。它还认为这听起来像 NullPointerException，因此如果您打算在 XML 布局中使用 Coverflow，请确保在调用任何 findViewById 之前设置内容视图（R.layout.main）。您可以打印coverFlow 的值以确保它不再为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T05:47:04.770

听起来你有一个`NullPointerException`:`findViewById`调用实际上并没有找到视图，因为它从未被实例化。您可能需要实现一个构造函数来`CoverFlowClass`接收 `AttributeSet. 也许像这样：

```
public CoverFlowClass(Context context, AttributeSet attrs) 
{
    super(context, attrs);

        // do whatever other initialization is necessary
} 
```

# php - 使用数组时如何替换php中的位置字符串？

> ID：10203129
> 
> 赞同：2
> 
> 时间：2012-04-18T05:07:44.227
> 
> 标签：php

我有一个字符串 php

```
arr={"one", "one", "one", "one", "one", "one", "one", "one", "one"} 
```

我想将“one”替换为“1”，但我只想替换某个位置 at `0 2 4 6 8`，而 at`1 3 5 7 9`不改变

结果准确：`arr={"1", "one", "1", "one", "1", "one", "1", "one", "1"}`

如果我在 php 中使用 str_replace 结果是替换所有位置，我想要这个工作想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:48:44.660

```
$string = 'arr={"one", "one", "one", "one", "one", "one", "one", "one", "one"}';

$arr = explode(',', $string);

for ($i = 0; $i < count($arr); $i++)
{
    if ($i % 2 == 0)
        $arr[$i] = str_replace('one', '1', $arr[$i]);
}

echo implode(',', $arr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T05:13:07.143

```
for($i=0; $i < count($arr); $i++)
{
   if(($i%2) == 0) $arr[$i] = '1';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T05:13:14.820

```
foreach($arr as $ak => &$av) {

 if($ak % 2 == 0 && $av == 'one') {

  $av = '1';

 }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T05:16:36.557

也许有了这个

```
 for($i = 0; $i < count($arr);$i++){ 
       if($i == 0 || $i%2 != 0){
           $arr[$i] = 1;
       }
    } 
```

# android - 弹出式视觉装饰

> ID：10203130
> 
> 赞同：0
> 
> 时间：2012-04-18T05:07:44.337
> 
> 标签：android, popup

我需要实现用户弹出对话框，但它们看起来不像标准。我想，有一种方法可以通过 Android 的功能（自定义对话框）来实现自定义弹出窗口，但是可以装饰它们吗？然而，它可能不是解决这个问题的最佳解决方案 - 我应该尝试隐藏布局之类的其他方法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T05:16:46.830

是的，您可以根据需要更改对话框。您可以通过创建自定义对话框来做到这一点。第1步。在 res 中的 String 文件中创建样式

```
 <style name="myQuitDialog" parent="android:Theme.Dialog"> 
   <item name="android:gravity">center_horizontal</item>

    </style> 
```

第2步。在布局中创建 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout_quit"
              android:orientation="horizontal"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:background="@drawable/image which u want to show"
 >
</RelativeLayout> 
```

第三步。在src中编写自定义对话框的代码

```
class Custom_Dialog extends Dialog {

    protected Custom_Dialog(Context context, int theme) {
        super(context, theme);
        // TODO Auto-generated constructor stub
    }

    private void show_alert() {
        final Custom_Dialog alertbox = new Custom_Dialog(this, R.style.myQuitDialog);
        Window window = alertbox.getWindow();
        window.setBackgroundDrawableResource(android.R.color.transparent);
        window.requestFeature(window.FEATURE_NO_TITLE);

        alertbox.show(); 
        alertbox.setCancelable(true);
        alertbox.setCanceledOnTouchOutside(true);
        alertbox.dismiss();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T05:27:28.913

您的问题对我来说不是很清楚，因为您没有指定要自定义的天气并使用警报对话框或弹出对话框。在 android 中两者都是不同的。在名为快速操作的 android 弹出对话框中。我在下面发布的链接将给你关于快速行动的简要想法，并精彩地解释如何在你的应用程序中实现它。所以去吧。

[http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/)

# android - 在android中启动屏幕后出现黑屏

> ID：10203136
> 
> 赞同：0
> 
> 时间：2012-04-18T05:08:10.610
> 
> 标签：android, splash-screen

我正在开发一个使用闪屏的应用程序。但是在飞溅消失后，
下一个屏幕在切换到我的主要活动之前变黑，我不想要黑屏。谁能建议我如何做到这一点？这是我的代码。

**启动器活动**

```
public class MainActivity extends Activity{
public static final String TAG = "MainActivity";
protected void onCreate(Bundle savedInstanceState) {
// TODO Auto-generated method stub
super.onCreate(savedInstanceState);
Intent in = new Intent(getApplicationContext(), SplashScreenActivity.class);
synchronized (this) {
try {
wait(50);
} catch (InterruptedException e) {
String str = e.toString();
Log.d(TAG, str);
}//catch
}//synchronized block
startActivity(in);
}//onCreate
}//class 
```

**闪屏活动**

```
public class SplashScreenActivity extends Activity {
private Thread splashThread;
public static final String TAG = "SplashScreenActivity";
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.splash);
final SplashScreenActivity splashScreen = this;

splashThread = new Thread(){
public void run(){
try {
synchronized (this) {
wait(3000);
}
} catch (Exception e) {
String str = e.toString();
Log.d(TAG, str);
}
finish();
Intent in = new Intent();
in.setClass(splashScreen, ProjectActivity.class);
startActivity(in);
stop();
}//run
};
splashThread.start();
}//onCreate

}//class 
```

**项目活动** 这是主要操作将从中开始的类。

```
public class ProjectActivity extends TabActivity {
static int x=0;
static int color;
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
requestWindowFeature(Window.FEATURE_NO_TITLE);
setContentView(R.layout.tabxml);

if(x==1)
{
Dor.c=1;
color = getIntent().getExtras().getInt("color");
//Intent in=new Intent();
//in.putExtra("color",color);
}
Resources res = getResources(); // Resource object to get Drawables
TabHost tabHost = getTabHost();  // The activity TabHost
TabHost.TabSpec spec;  // Resusable TabSpec for each tab
Intent intent;  // Reusable Intent for each tab
// Create an Intent to launch an Activity for the tab (to be reused)
intent = new Intent().setClass(this, Dor.class);
// Initialize a TabSpec for each tab and add it to the TabHost
spec = tabHost.newTabSpec("dor").setIndicator("Dor",
res.getDrawable(R.drawable.ic_tab_artists))
.setContent(intent);
tabHost.addTab(spec);

// Do the same for the other tabs
intent = new Intent().setClass(this, Album.class);
spec = tabHost.newTabSpec("albums").setIndicator("Albums",
res.getDrawable(R.drawable.ic_tab_album)
.setContent(intent);
tabHost.addTab(spec);
intent = new Intent().setClass(this, Forhandler.class);
spec = tabHost.newTabSpec("forhandler").setIndicator("Forhandler",
res.getDrawable(R.drawable.ic_tab_forhandler))
.setContent(intent);
tabHost.addTab(spec);
intent = new Intent().setClass(this, Diplomat.class);
spec = tabHost.newTabSpec("diplomat").setIndicator("Diplomat",
res.getDrawable(R.drawable.ic_tab_diplomat))
.setContent(intent);
tabHost.addTab(spec);
tabHost.setCurrentTab(0);
}
} 
```

我尝试了异步任务，但没有奏效。这是我修改后的代码：

**项目启动**

```
public class ProjectStart extends AsyncTask<Context, Void, Void>{
public static final String TAG = "ProjectStart";
/*public ProjectStart() {
    super("ProjectStart");
    // TODO Auto-generated constructor stub
}*/

Context ctx;
public ProjectStart(Context context){
    this.ctx = context;
}//constructor

@Override
protected Void doInBackground(Context... params) {
    // TODO Auto-generated method stub
    Intent in = new Intent();
    in.setClass(ctx, ProjectActivity.class);
    Log.d(TAG, "doInBackground called");
    return null;
}//doInBackground

/*@Override
protected void onHandleIntent(Intent intent) {
    // TODO Auto-generated method stub
    Intent in = new Intent();
    in.setClass(getApplicationContext(), ProjectActivity.class);
    startActivity(in);
    Log.d("Project Start", "onHandleIntentCalled");
}*/ 
```

}//班级

在 SplashScreen.java 我做了以下修改

```
splashThread = new Thread() {
        public void run(){
            try {                   
                synchronized (this) {
                    wait(3000);
                }//synchronized
            }//try  
            catch(InterruptedException e) {} 
            finally {
                finish();
                new ProjectStart(sPlashScreen).execute();
                /*Intent in = new Intent(getApplicationContext(), ProjectStart.class);
                startService(in);*/
                stop();
            }//finally
            Log.d(TAG, "run method called");
        }//run
    }; 
```

而且，这是堆栈跟踪：

```
 04-19 11:29:02.181: E/AndroidRuntime(341): FATAL EXCEPTION: Thread-8
04-19 11:29:02.181: E/AndroidRuntime(341): java.lang.ExceptionInInitializerError
04-19 11:29:02.181: E/AndroidRuntime(341):  at abc.com.camera.SplashScreen$1.run(SplashScreen.java:32)
04-19 11:29:02.181: E/AndroidRuntime(341): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
04-19 11:29:02.181: E/AndroidRuntime(341):  at android.os.Handler.<init>(Handler.java:121)
04-19 11:29:02.181: E/AndroidRuntime(341):  at android.os.AsyncTask$InternalHandler.<init>(AsyncTask.java:421)
04-19 11:29:02.181: E/AndroidRuntime(341):  at android.os.AsyncTask$InternalHandler.<init>(AsyncTask.java:421)
04-19 11:29:02.181: E/AndroidRuntime(341):  at android.os.AsyncTask.<clinit>(AsyncTask.java:152)
04-19 11:29:02.181: E/AndroidRuntime(341):  ... 1 more

    04-19 11:29:02.181: E/AndroidRuntime(341): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare() 
```

我没有得到什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T05:12:06.130

> 但是在飞溅消失后，在切换到我的主要活动之前屏幕变黑了

似乎您可能正在 MainActivity 的 UI 上执行一些后台进程，这需要时间来执行后台进程。如果是这样使用

*   异步任务
*   服务
*   意向服务

用于后台进程。如果不是显示主要活动它有什么代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T05:11:44.087

您可以在以下链接中找到教程以获得更多帮助：

[http://p-xr.com/android-tutorial-how-to-make-a-basic-splash-screen/](http://p-xr.com/android-tutorial-how-to-make-a-basic-splash-screen/)

[http://www.codeproject.com/Articles/113831/An-Advanced-Splash-Screen-for-Android-App](http://www.codeproject.com/Articles/113831/An-Advanced-Splash-Screen-for-Android-App)

谢谢..！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T05:13:35.863

我认为最适合您的解决方案是[asynctask](http://developer.android.com/reference/android/os/AsyncTask.html)

给出的是来自开发者网站的一个例子。Asynctask 主要有四种方法。

```
onPreExecute()

doInBackground(Params...)

onProgressUpdate(Progress...)

onPostExecute(Result) 
```

这是另一个[示例](http://android10.org/index.php/articlesother/239-android-application-and-asynctask-basics)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T06:02:26.807

为您的活动意图添加一个标志.. setFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION)

# android - JNIEnv->FindClass() 在 JNI_OnLoad 中失败

> ID：10203140
> 
> 赞同：1
> 
> 时间：2012-04-18T05:08:50.063
> 
> 标签：android, java-native-interface

> **可能重复：**
> [如何在 Android 上的 C 中加载我自己的 Java 类？](https://stackoverflow.com/questions/6838397/how-do-i-load-my-own-java-class-in-c-on-android)
> [应用程序在 Eclipse 中调试/运行，但 .APK 在解析包含自定义视图的 XML 布局时会给出 .classNotFoundException](https://stackoverflow.com/questions/10079585/application-works-in-debug-run-from-eclipse-but-apk-gives-classnotfoundexce)

在 Android 中，我通过执行以下操作访问本机 C 库：

```
System.loadLibrary("testlib"); 
```

加载本机库。在 JNI_OnLoad() 函数中，它试图找到一个 Java 胶水代码类：

```
JNIEXPORT jint JNI_OnLoad(JavaVM *vm, void *reserved) {
        JNIEnv *env;
        jclass k;
        jint r;

        r = vm->GetEnv ((void **) &env, JNI_VERSION_1_4);
        k = env->FindClass ("com/test/android/aclass"); 
```

FindClass() 失败，并引发 NoClassDefFoundError 异常。知道为什么我不能从 C 代码中看到我的 Java 类吗？

我在另一个测试应用程序中使用了同一个库，它可以工作（所以我相信这个库可以工作）。我不明白为什么一个应用程序可以找到 java 类，而另一个不能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T02:34:06.790

找到了答案。
我的线索是，如果我通过 eclipse 运行它会运行良好，并且只有在创建 .apk 文件时才会出现这个问题。

我在这里找到了解决方案：[Application works in debug / run from Eclipse, but .APK give .classNotFoundException when parsing XML layout that contains a custom View](https://stackoverflow.com/questions/10079585/application-works-in-debug-run-from-eclipse-but-apk-gives-classnotfoundexce)

# php - 我们如何从 Amazon Dynamodb 中获取字段中的 MAX 值？

> ID：10203151
> 
> 赞同：1
> 
> 时间：2012-04-18T05:10:23.103
> 
> 标签：php, zend-framework, amazon-web-services, amazon-dynamodb

我正在使用亚马逊 Dynamodb。我想知道，我们如何从 Amazon Dynamodb 表中获取字段中的 MAX 值。请告诉我，如果你有解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:45:36.740

这是 Amazon DynamoDB 文档中的第一个示例：

> **查找映射列的最大值 (max)**
> 
> 使用如下 Hive 命令。在第一个命令中，CREATE 语句创建一个 Hive 表，该表引用存储在 Amazon DynamoDB 中的数据。然后 SELECT 语句使用该表来查询存储在 Amazon DynamoDB 中的数据。以下示例查找给定客户下的最大订单。

```
CREATE EXTERNAL TABLE hive_purchases(customerId bigint, total_cost double,
 items_purchased array<String>)

STORED BY 'org.apache.hadoop.hive.dynamodb.DynamoDBStorageHandler'
TBLPROPERTIES ("dynamodb.table.name" = "Purchases",
"dynamodb.column.mapping" = "customerId:CustomerId,total_cost:Cost,items_pur 
chased:Items");

SELECT max(total_cost) from hive_purchases where customerId = 717; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-23T14:38:46.600

每次更新项目时，您都可以将其与最大值进行比较。用较大的项目替换最大项目。

# java - 如何在 Java 应用程序中显示 kannada 文本字符串

> ID：10203153
> 
> 赞同：0
> 
> 时间：2012-04-18T05:10:34.837
> 
> 标签：java, user-interface, text, applet

我在 Java 应用程序中有一个小程序，我想在其中使用文本框在文本区域中显示 kannada 文本。请帮我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T09:06:41.493

您需要使用使用[unicode](http://mindprod.com/jgloss/unicode.html)的字符编码，对于**卡纳达语** *，它的范围从* **0C80 到 0CFF**。
查看此[PDF](http://www.unicode.org/charts/PDF/U0C80.pdf)了解更多详情。
Java unicode 示例小程序可[在此处](http://www.pccl.demon.co.uk/java/unicode.html)
获得 以下**示例**可帮助您更好地理解：
[setting-unicode-characters-in-java-frames](https://stackoverflow.com/questions/340739/setting-unicode-characters-in-java-frames)
[display-the-unicode-value-in-the-java-screen](https://stackoverflow.com/questions/1799458/display-the-unicode-value-in-the-java-screen)

# javascript - 如何列出我域中的所有评论

> ID：10203158
> 
> 赞同：9
> 
> 时间：2012-04-18T05:11:03.650
> 
> 标签：javascript, facebook-graph-api, facebook-fql, facebook-comments

我`Facebook Comment`在我的网站中使用 HTML5 版本。我有自己的 Facebook APP ID。

使用`Graph-API`, 和`FQL`（我认为这是如何做到的），我想列出我网站上发布的所有评论。

例子 -

```
Page Title1
--Comment1
--Comment2
--Comment3

Page Title2
--Comment1
--Comment2
--Comment3

Page Title3
--Comment1
--Comment2
--Comment3

etc. 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T11:21:58.007

只要您有一组**固定**的要从中获取评论的子页面，就可以通过两种不同的方式。

如果您有大量子页面，或者数量不定，那么您就没有一个很好的可扩展解决方案 - 许多人一直在寻找一个：

*   [Facebook fb:comments 图形 API](https://stackoverflow.com/questions/6736210/facebook-fbcomments-graph-api)
*   [如何显示来自 Facebook 评论社交插件的最新评论？](https://stackoverflow.com/questions/6484008/how-to-display-recent-comments-from-facebook-comments-social-plugin#comment7622566_6484116)
*   [Facebook FQL 查询以返回针对应用程序的所有评论](https://stackoverflow.com/questions/9814708/facebook-fql-query-to-return-all-comments-against-an-application)
*   [按应用程序 ID 检索所有带有 FQL 的评论](https://stackoverflow.com/questions/7206372/retrieve-all-comments-with-fql-by-application-id#comment10891998_8739731)
*   [Facebook FQL 查询以返回针对应用程序的所有评论](http://www.messbook.ro/answers.php?question=Facebook-FQL-query-to-return-all-comments-against-an-application-68208O9814708)
*   [获取评论计数的 fql 查询不再起作用](http://fbdevforum.com/facebook-developers/forum.developers.facebook.net/viewtopic99a7b4a65229f5c9624c91b24c7cf4ba.html)
*   [http://facebook.stackoverflow.com/questions/10023179/retrieve-all-the-comments-posted-using-fql](http://facebook.stackoverflow.com/questions/10023179/retrieve-all-the-comments-posted-using-fql)

对于您网站中的一组**固定**子页面，您可以使用批处理请求或 FQL 查询。

**批量请求**

* * *

首先，您需要访问令牌。只需在浏览器中输入以下内容作为 url（归功于[本](http://illuminatikarate.com/blog/facebook-graph-api-requires-access-token-for-feed-access/)网站）：

`[https://graph.facebook.com/oauth/access_token?type=client_cred&client_id=APP_ID&client_secret=APP_SECRET](https://graph.facebook.com/oauth/access_token?type=client_cred&client_id=APP_ID&client_secret=APP_SECRET)`

 ```And this is the javascript jquery code to make a batch request to fetch comments from several urls at once:` 

```
$.ajax({
  url: 'https://graph.facebook.com/',
  type : "POST",
  data: {
    access_token : 'YOUR_APP_ACCESS_TOKEN',
    batch : '[ \
    {"method":"GET","relative_url":"URL1"}, \
    {"method":"GET","relative_url":"URL2"} \
    ]'
  },
  success: function(data) {
    jdata = JSON.parse(data);
    $.each(jdata, function(index,value){
        jdata[index].body = JSON.parse(value.body);
        console.log(value.body);
    });
    // Do whatever you want with jdata
  }
}); 
```

**FQL**

* * *

inspired from [this](https://stackoverflow.com/questions/6484008/how-to-display-recent-comments-from-facebook-comments-social-plugin) post` 

```
FB.api({
    method: 'fql.query',
    query: 'select text from comment where object_id in (select comments_fbid from link_stat where url="URL1" or url="URL2")'
  }, function(response) {
    // Do something with results
  }); 
```

* * *

**结论**

由于Facebook的这个限制，我打算切换到disqus.com，它显然支持这个功能（例如你可以从这个[博客](http://blog.fooducate.com)中看到。（搜索“最近的评论”）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-20T08:48:18.090

Facebook 不是列出您网站上的所有评论，而是希望您实现代码，以便在您网站的任何位置发布新评论时收到通知。

要做到这一点，您必须在发布评论的页面中添加一些 Javascript 以通知您自己：

```
window.fbAsyncInit = function(){
    console.log("subscribing to comment create");
    FB.Event.subscribe('comment.create',function(response){
        console.log("facbeook comment created: " + JSON.stringify(response));
        var commentQuery = FB.Data.query('SELECT fromid, text FROM comment WHERE post_fbid=\'' + response.commentID + '\' AND object_id IN (SELECT comments_fbid FROM link_stat WHERE url=\'' + response.href + '\')');
        FB.Data.waitOn([commentQuery], function () {
            console.log("Facebook comment: " + JSON.stringify(commentQuery));
        }); 
    });
}; 
```

除了将评论记录到控制台之外，您还需要实现一些 AJAX 将评论发送回您的站点，您可以将评论存储在数据库中，或者向自己发送一封电子邮件，通知您评论已发布.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T07:13:08.927

参考：[Facebook 评论插件](https://developers.facebook.com/docs/reference/plugins/comments/)

假设您的网站是`http://mywebsite.com/blog.php?id=3`并且您有一个 facebook 评论插件，您可以通过这种方式访问​​评论

```
 https://graph.facebook.com/comments/?ids={YOUR_URL}. 
```

`{YOUR_URL} becomes http://mywebsite.com/blog.php?id=3`

**示例 1：（**安装在开发者 facebook doc 网站上的评论插件）

网站：http: [//developers.facebook.com/docs/reference/plugins/comments](http://developers.facebook.com/docs/reference/plugins/comments)

获取评论：[https ://graph.facebook.com/comments/?ids=http://developers.facebook.com/docs/reference/plugins/comments](https://graph.facebook.com/comments/?ids=http://developers.facebook.com/docs/reference/plugins/comments)

**示例 2：**

网站：[http ://techcrunch.com/2011/04/08/the-seven-most-interesting-startups-at-500-startups-demo-day/](http://techcrunch.com/2011/04/08/the-seven-most-interesting-startups-at-500-startups-demo-day/)

获取评论：[https ://graph.facebook.com/comments/?ids=http://techcrunch.com/2011/04/08/the-seven-most-interesting-startups-at-500-startups-demo-天/](https://graph.facebook.com/comments/?ids=http://techcrunch.com/2011/04/08/the-seven-most-interesting-startups-at-500-startups-demo-day/)

**也检查一下**

可以在此[博客文章中找到用于拉取评论的示例代码](https://developers.facebook.com/blog/post/490/)`

# iphone - 如何将 sqlite3_stmt 返回给被调用对象

> ID：10203159
> 
> 赞同：0
> 
> 时间：2012-04-18T05:11:28.643
> 
> 标签：iphone, ios, sqlite

我正在开发一个 iPhone 应用程序。我创建了一个可重用的类，其中编写了一个 sqlite getData 方法。我想从我的控制器传递一个 sql 语句，并希望得到一个包含所有行的数组。

我可以将 sqlite3_stmt 对象存储到数组中并返回该数组，所以在调用点我可以转换它并找出每个列的值吗？

我当前的代码是这样的：

```
-(NSMutableArray*)getData:(NSString*) SqlQuery
{    
// The Database is stoed in the application bundle
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"sqliteClasses.sqlite"];

if(sqlite3_open([path UTF8String], &contactDB) == SQLITE_OK)
{
    const char *sql = (const char*)[SqlQuery UTF8String];
    sqlite3_stmt *compiledStatement;

    if(sqlite3_prepare_v2(contactDB, sql, -1, &compiledStatement, NULL) == SQLITE_OK)
    {
        // Loop through the results and add them to the feeds array
        while (sqlite3_step(compiledStatement) == SQLITE_ROW)//(stepResult == SQLITE_ROW) 
        {
          //  [arrayRecords addObject:compiledStatement];                
        }
    }    
    sqlite3_finalize(compiledStatement);        
}
sqlite3_close(contactDB);
return arrayRecords; 
```

}

错误行是：[arrayRecords addObject:compiledStatement];

我怎样才能做到这一点？任何替代实施这个？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:49:55.723

```
- (NSArray *) getActionWithFilters:(NSDictionary *)dictionary ClassName:(NSString *)className Error:(NSError **)error{
    NSString *query = [NSString stringWithFormat:@"SELECT * FROM %@ %@",className,[self getFitlerArrayByDictionary:dictionary]];
    sqlite3_stmt *statement = [self getItemsWithQuery:query];

    NSMutableArray *array = [[NSMutableArray alloc] init];
    while (sqlite3_step(statement) == SQLITE_ROW) {
        NSMutableDictionary *itemDic = [[NSMutableDictionary alloc] init];
        int columns = sqlite3_column_count(statement);
        for (int i=0; i<columns; i++) {
            char *name = (char *)sqlite3_column_name(statement, i);
            NSString *key = [NSString stringWithUTF8String:name];
            switch (sqlite3_column_type(statement, i)) {
                case SQLITE_INTEGER:{
                    int num = sqlite3_column_int(statement, i);
                    [itemDic setValue:[NSNumber numberWithInt:num] forKey:key];
                }
                    break;
                case SQLITE_FLOAT:{
                    float num = sqlite3_column_double(statement, i);
                    [itemDic setValue:[NSNumber numberWithFloat:num] forKey:key];
                }
                    break;
                case SQLITE3_TEXT:{
                    char *text = (char *)sqlite3_column_text(statement, i);
                    [itemDic setValue:[NSString stringWithUTF8String:text] forKey:key];
                }
                    break;
                case SQLITE_BLOB:{
                    //Need to implement
                    [itemDic setValue:@"binary" forKey:key];
                }
                    break;
                case SQLITE_NULL:{
                    [itemDic setValue:[NSNull null] forKey:key];
                }
                default:
                    break;
            }
        }
        [array addObject:itemDic];
        [itemDic release];
    }

    return [array autorelease];
} 
```

# excel - 使用 VBA 删除重复项 - Excel 2003

> ID：10203160
> 
> 赞同：1
> 
> 时间：2012-04-18T05:11:29.547
> 
> 标签：excel, excel-2003, vba

我想知道是否有人会知道任何可以消除重复项的 VBA 代码。例如，在 D 列中，我想保留 ID 的第一个实例，并删除重复项。

![在此处输入图像描述](../Images/4ddded7fcee444a4ca647d9476eedb6a.png)

问候

格雷格

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T09:00:15.397

好的，这应该对你有用。该例程删除了 C 列中的所有双重 ID

```
Option Explicit

Sub DeletDuplicate()
    Dim x As Long
    Dim LastRow As Long
    LastRow = Range("C65536").End(xlUp).Row
    For x = LastRow To 1 Step -1
        If Application.WorksheetFunction.CountIf(Range("C1:C" & x), Range("C" & x).Text) > 1 Then
            Range("C" & x).EntireRow.Delete
        End If
    Next x
End Sub 
```

# graphael - gRaphael-折线图

> ID：10203162
> 
> 赞同：2
> 
> 时间：2012-04-18T05:11:48.970
> 
> 标签：graphael

将第一行数据的单个数据值发送到 graphael 折线图时，图表不显示并且浏览器停止运行，并且当传递“正方形”、“圆盘”等“圆形”以外的符号时，图表也不显示，例如：

```
var line=r.linechart(10,10,300,220,[[5],[1, 2, 3, 4, 5, 6, 7],[0],[3.5, 4.5, 5.5, 6.5, 7, 8]],[[8],[12, 32, 23, 15, 17, 27, 22],[8], [10, 20, 30, 25, 15, 28]],{nostroke:false,axis"0 0 1 1",symbol:["circle","circle","circle","circle"],smooth:true}); 
```

这在任何浏览器中都不起作用，只有在为第一行传递单个值时它才没有运行。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T00:18:22.733

似乎圆形以外的符号已被弃用，并打破了图表。不幸的是，圈或没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:54:59.143

x 值和 y 值的较大数据集需要首先列在多维数组中。

即 [[1,2,3,4,5,6,7],[3.5,4.5,5.5,6.5,7,8],[5],[0]], [[12, 32, 23, 15 , 17, 27, 22],[10, 20, 30, 25, 15, 28],[8],[8]]

只需在此处阅读有关此问题的信息：[http ://www.exratione.com/2011/10/a-few-tips-for-graphael-line-charts.php](http://www.exratione.com/2011/10/a-few-tips-for-graphael-line-charts.php)

# android - 如何限制需要太长时间的方向变化？

> ID：10203168
> 
> 赞同：0
> 
> 时间：2012-04-18T05:12:35.520
> 
> 标签：android

嗨伙计们，我开发了一个应用程序来在地图视图上显示朋友工作正常，但是在改变方向时重新执行它需要时间如何克服这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T05:23:41.537

要停止重新创建 Activity 添加

```
android:configChanges="keyboardHidden|orientation" 
```

在 AndroidManifestFile 的标签中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T05:15:48.910

禁止方向更改，或者您可以只进行一次关键初始化并将应用程序状态保存在捆绑对象中。

# php - 如何使 ajax javascript 在按下回车键时工作

> ID：10203171
> 
> 赞同：2
> 
> 时间：2012-04-18T05:12:44.787
> 
> 标签：php, javascript, forms, jquery, keypress

```
<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
$(document).ready(function() {
    $("input[name='search_user_submit']").click(function() {
        var cv = $('#newInput').val();
        var cvtwo = $('input[name="search_option"]:checked').val();
        var data = { "cv" : cv, "cvtwo" : cvtwo }; // sending two variables
        $("#SR").html('<img src="loading.gif"/>').show();
        var url = "user.php";
        $.post(url, data, function(data) {
            $("#SR").html(data).show();
        });

    });
});
});//]]>  
</script> 
```

当我按下按钮时这很好用，但是当我按下回车键时，所有变量及其值都会显示在地址栏中。

那么我如何为此目的添加按键事件：-

我已经尝试过这个按键代码仍然无法正常工作： -

```
<script type="text/javascript">
$(window).load(function(){
    $(document).ready(function() {
    function Script(e) {
        if (e.keyCode == 13) {
             var cv = $('#newInput').val();
            var cvtwo = $('input[name="search_option"]:checked').val();
            var data = { "cv" : cv, "cvtwo" : cvtwo }; // sending two variables
            $("#SR").html('<img src="loading.gif"/>').show();
            var url = "user.php";
            $.post(url, data, function(data) {
                $("#SR").html(data).show();
            });
        }
    }
    });
});
</script> 
```

同样对于按键，我在单击选项按钮时创建了文本框，并且在我的 javascript 中我已经指定了这个：-

`input.onkeypress = 'return Script(event)';`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T05:20:52.663

您应该使用表单，并且有一个`onsubmit`事件而不是处理回车键。

```
<form id="myform">
    <!-- ... -->
    <input type="submit">
</form>

<script>
document.getElementById("myform").onsubmit = function (ev) {
    ev.preventDefault();
    // ...
}
</script> 
```

没有进行错误检查，但希望你明白这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T05:24:14.190

我觉得你想执行 ajax 调用，然后按 enter 按钮

尝试这个

```
<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
$(document).ready(function() {
    $("input[name='search_user_submit']").keyup(function(event){

    if(event.keyCode == 13)
{

        var cv = $('#newInput').val();
        var cvtwo = $('input[name="search_option"]:checked').val();
        var data = { "cv" : cv, "cvtwo" : cvtwo }; // sending two variables
        $("#SR").html('<img src="loading.gif"/>').show();
        var url = "user.php";
        $.post(url, data, function(data) {
            $("#SR").html(data).show();
}
        });

    });
});
});//]]>  
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T05:22:05.657

要回答您的问题，我认为按 Enter 将表单发送到浏览器，并且它必须是操作设置为 GET 的表单（或没有，默认为 GET）。这会导致浏览器刷新并且表单变量作为查询字符串出现在 URL 中。浏览器刷新会阻止您的脚本真正被执行（或者它在页面重新加载时被执行，所以您看不到它）。

`e.preventDefault()`如果你这样做`Script()`，那将阻止该默认操作发生。

[编辑] Gopal 打败了我，给出了几乎相同的答案。

我确实想补充一点，jQuery 处理事件绑定和东西，也许为了更好的流程，你可以`function Script(e)`用

```
$('input').keypress(function(e) {
    if (e.keyCode == 13) {
        e.preventDefault();
        var cv = $('#newInput').val();
        var cvtwo = $('input[name="search_option"]:checked').val();
        var data = { "cv" : cv, "cvtwo" : cvtwo }; // sending two variables
        $("#SR").html('<img src="loading.gif"/>').show();
        var url = "user.php";
        $.post(url, data, function(data) {
            $("#SR").html(data).show();
        });
    }
}); 
```

然后你就不需要`input.onkeypress = 'return Script(event)';`任何地方了。jQuery对几乎任何事件都有类似的功能`.keypress()`（参见[jQuery 的 keypress](http://api.jquery.com/keypress/)`.bind()` ），您甚至可以使用它来绑定多个事件。请参阅[文档](http://api.jquery.com/bind/)以了解更多信息。

# php - 根据用户提供的信息，使用 php 中的连接从两个表的多个列中检索数据

> ID：10203178
> 
> 赞同：0
> 
> 时间：2012-04-18T05:13:11.043
> 
> 标签：php, mysql, forms, left-join

我正在尝试为我的快递公司创建一个基本的货运跟踪页面。用户将提供参考号，并且需要查询以从两个表中提取不同列中的数据。下面是 HTML 代码，下面是 php 代码。HTML 工作正常，但是当我提交表单时，php 会抛出一个空白页。谁能告诉我我在这里犯了什么错误。在此先感谢您的帮助。

HTML 代码：

```
<form action="tracking.php" method="POST" id="insert">
<table>
<tr>
<td>Please enter your 9 digit Docket No:</td>
<td><input type="text" size=9 name="docketno"></td>
</tr>
<tr>
<td colspan=2 id="sub"><input type="submit"onClick="confSubmit(this.form);" name="submit" value="submit" >&nbsp;&nbsp;<input type="reset" value="Reset!"></td>
</tr></Table></form> 
```

PHP代码：

```
<?php

// contact to database

$connect = mysql_connect('localhost', 'userid', 'password') or die ("Error , check your server connection.");

mysql_select_db("testing", $connect);

//Get data in local variable

$_docketno=$_POST['docketno'];

// check for null values

if ($_docketno=="")

echo "Docket Number must be entered, please hit back button and re-enter Docket Number";

else{

$query = "SELECT shipment_data.docketno, shipment_data.bookingdatetime, shipment_data.customercode, shipment_data.shippername, shipment_data.bookingou, shipment_data.assureddeliverydate, for_delivery_details.deliverydatetime, for_delivery_details.deliverystatus, for_delivery_details.name_and_number_of_the_person_to_whom_del, for_delivery_details.deliveryattemptnumber_1, for_delivery_details.deliveryattemptnumber_2, for_delivery_details.deliveryattemptnumber_3, for_delivery_details.faileddel.attempt,reason_1, for_delivery_details.faileddel.attempt,reason_2, for_delivery_details.faileddel.attempt,reason_3 "
 "FROM shipment_data LEFT JOIN for_delivery_details where docketno=".$_POST['docketno'].
    "ON shipment_data.docketno = for_delivery_details.docketno"; 

$result = mysql_query($query) or die(mysql_error());

// Print out the contents of each row into a table 
while($row = mysql_fetch_array($result)){
    echo Docket Number          " - ". $row[docketno];  
    echo Booking Date Time          " - ". $row[bookingdatetime];
    echo Customer Code          " - ". $row[customercode];
    echo Shipper Name           " - ". $row[shippername];
    echo Booked From            " - ". $row[bookingou];
    echo Assured Delivery Date      " - ". $row[assureddeliverydate];
    echo Delivery Date Time         " - ". $row[deliverydatetime];
    echo Delivery Status            " - ". $row[deliverystatus];
    echo Name Number to whom delivered  " - ". $row[name_and_number_of_the_person_to_whom_del];
    echo First Delivery attempt date    " - ". $row[deliveryattemptnumber_1];
    echo Second Delivery attempt date   " - ". $row[deliveryattemptnumber_2];
    echo Third Delivery attempt date    " - ". $row[deliveryattemptnumber_3];
    echo First delivery, fail reason    " - ". $row[faileddel.attempt,reason_1];
    echo Second delivery, fail reason   " - ". $row[faileddel.attempt,reason_2];
    echo Third delivery, fail reason    " - ". $row[faileddel.attempt,reason_3];

}
?> 
```

MySql 表：

```
create table if not exists `shipment_data` (
  `docketno` int(11) not null,
  `referenceno` int(11) default null,
  `bookingdatetime` datetime not null,
  `customercode` int(11) not null default '9999',
  `shippername` varchar(100) not null,
  `shipperaddress` varchar(255) not null,
  `shipperphone` varchar(12) not null comment 'no special characters like (,),+',
  `shipperemail` varchar(50) null default '@',
  `consigneename` varchar(100) not null,
  `consigneeaddress` varchar(255) not null,
  `consigneephone` varchar(12) not null comment 'no special characters like (,),+',
  `consigneeemail` varchar(50) null default '@',
  `bookingou` varchar(20) not null,
  `deliveryou` varchar(20) not null,
  `assureddeliverydate` date not null,
  `numberofpackages` int(9) not null default '1',
  `firststickernum` int(11) not null,
  `laststickernum` int(11) not null,
  `packagedetails` enum('documents','carton box','gunny bag','wooden box','plastic bag') not null,
  `goodstypecode` int(6) not null,
  `goodsdescription` varchar(255) not null,
  `goodsvalue` decimal(10,0) not null,
  `freestoragedays` smallint(6) not null default '1',
  `customerinvoiceno` varchar(100) default null,
  `waybillnumber` varchar(100) default null,
  `servicecode` varchar(255) not null,
  `servicedetails` varchar(255) not null,
  `riskcoverage` enum('shipper risk','carrier risk') not null,
  `length_inches` decimal(10,2) not null default '1.00',
  `breadth_inches` decimal(10,2) not null default '1.00',
  `height_inches` decimal(10,2) not null default '1.00',
  `volumetricweight` double not null comment '((length x breadth x height)/1728)x10',
  `actualweight_kg` decimal(10,2) not null default '0.10',
  `chargedweight_kg` decimal(10,2) not null default '0.10',
  `totalcharge` decimal(10,2) not null default '1.00',
  `arrivaldateatdel_ou` datetime default null,
  `movementstatus` enum('','in-transit','reached') default null,
  `movementid` varchar(75) default null,
  primary key (`docketno`)
) engine=innodb default charset=utf8;

create table if not exists `for_delivery` (
  `docketno` int(11) not null,
  `assureddeliverydate` date not null,
  `deliverydatetime` datetime null,
  `deliverystatus` enum('','taken for delivery','delivered','undelivered','partial delivery') not null,
  `undeliveredfor18hrs_reason` tinytext null,
  `adicode` varchar(20) not null,
  `adiname` varchar(100) not null,
  `adinumber` int(11) not null,
  `deliveryattemptnumber_1` datetime null,
  `faileddel_attempt_reason_1` varchar(255) null,
  `deliveryattemptnumber_2` datetime null,
  `faileddel_attempt_reason_2` varchar(255) null,
  `deliveryattemptnumber_3` datetime null,
  `faileddel_attempt_reason_3` varchar(255) null,
  `name_and_number_of_the_person_to_whom_del.` varchar(255) null,
  `if_not_the_named_person,_upload_copy_of_identity_proof` blob null,
  `first_noticedate` date null,
  `first_noticenum` int(11) null comment 'after non-delivery 6 days of arrival at ou',
  `second_noticedate` date null,
  `second_noticenum` int(11) null comment 'after non-delivery 15 days of arrival at ou',
  `third_noticedate` date null,
  `third_noticenum` int(11) null comment 'for auction/disposal intimation after non-delivery 30 days of arrival at ou',
  primary key(docketno),
  foreign key (docketno) references shipment_data(docketno) on delete cascade
) engine=innodb default charset=utf8; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T05:26:54.860

尝试这个：

```
if ($_POST['docketno'] == ""){

   echo "Docket Number must be entered, please hit back button and re-enter Docket Number";
}

else{

   $query = "SELECT * FROM shipment_data LEFT JOIN for_delivery_details ON shipment_data.docketno = for_delivery_details.docketno where docketno=".$_POST['docketno']; 

   $result = mysql_query($query) or die(mysql_error());

   // Print out the contents of each row into a table 
   while($row = mysql_fetch_array($result))
   {
       echo "Docket Number           - ". $row[docketno];  
       echo "Booking Date Time           - ". $row[bookingdatetime];
       echo "Customer Code           - ". $row[customercode];
       echo "Shipper Name            - ". $row[shippername];
       echo "Booked From             - ". $row[bookingou];
       echo "Assured Delivery Date       - ". $row[assureddeliverydate];
       echo "Delivery Date Time          - ". $row[deliverydatetime];
       echo "Delivery Status             - ". $row[deliverystatus];
       echo "Name Number to whom delivered   - ". $row[name_and_number_of_the_person_to_whom_del];
       echo "First Delivery attempt date     - ". $row[deliveryattemptnumber_1];
       echo "Second Delivery attempt date    - ". $row[deliveryattemptnumber_2];
       echo "Third Delivery attempt date     - ". $row[deliveryattemptnumber_3];
       echo "First delivery, fail reason     - ". $row[faileddel.attempt,reason_1];
       echo "Second delivery, fail reason    - ". $row[faileddel.attempt,reason_2];
       echo "Third delivery, fail reason     - ". $row[faileddel.attempt,reason_3];

    }
} 
```

***更新：***

方法一

```
echo "Docket Number           - ". $row[docketno] ."</br>"; 
```

在与此相同的所有 echo 语句中使用它。

方法二

使用 HTML [table](http://www.w3schools.com/html/html_tables.asp)标签以表格样式显示。

# java - 清除数据结构/在Android中重新启动应用程序

> ID：10203179
> 
> 赞同：1
> 
> 时间：2012-04-18T05:13:11.513
> 
> 标签：java, android, design-patterns

我有一个名为“重新启动”的菜单按钮，它使用 ArrayLists 重新启动我在屏幕上的一个简单的文本游戏。我不确定如何“重新启动”我的应用程序，所以如果用户想玩新游戏，我可以为他们创建新的随机变量并清除屏幕。

最佳代码是让我在菜单上点击“重新启动”时重新启动应用程序。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T05:31:22.977

这是使用[Memento Pattern](http://en.wikipedia.org/wiki/Memento_pattern)的经典案例。

基本上，当一个阶段开始时，您将数据结构存储到 Originator，当您想要重新启动时，您只需保存先前的备忘录并根据检索到的备忘录恢复当前数据结构。

来自[SimplyVinay.com](http://www.simplyvinay.com/Post/40/Design-Patterns-for-Dummies.-The-Memento-Pattern.aspx)：

> 备忘录模式处理捕获对象的内部状态并将其保存在外部，以便以后可以恢复该对象的内部状态。这种模式通常用于可以保存游戏状态的电脑游戏中，并且可以从同一点开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:35:11.963

1.  让您的活动仅在数组列表实例变量上绘制视图。
2.  它也检查变量`onResume`。
3.  创建一个重新启动方法来部署变量中的更改。带原型

    ```
    public void restart(View v) {
        //your arraylist initialization here.
        // Call the following method on your top view.
        YourTopView.invalidate();
    } 
    ```

4.  在布局文件的按钮声明中`android:onClick="restart"`

# asp.net-mvc - 如何在 mvc3 中重定向 url？

> ID：10203181
> 
> 赞同：0
> 
> 时间：2012-04-18T05:13:17.113
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我在这里有 mvc3 应用程序我的问题在同一页面上，即在`Index.cshtml` 我有两个部分视图`controlpartial.cshtml`和`webgridpartial.cshtml`

现在，当我将数据插入数据库时​​，它工作正常，页面被重定向到`Index.cshtml`并且 URL 也变得清晰。

但是在编辑时，当我单击编辑按钮并更新所有值并提交该值时，它已在数据库中完美更新，但页面无法再次重定向到，`Index.cshtml`也无法清除我的 URL :(

因此，一旦完成编辑，我将无法编辑任何值，需要手动重置索引 URL。

有什么猜测吗？

索引.cshtml

```
@model Mapping.Models.SecurityIdentifierMappingViewModel

@{
    ViewBag.Title = "Index";
} 
```

## 指数

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@*Partial control for all controls*@

<div id="main">
<div style="float:left;width:30%">
@Html.Partial("_ControlsPartial",Model)
</div>

<div style="margin-left:600px;margin-top:-20px">
@Html.Partial("_WebGridPartial",Model.MappingWebGridList)
</div>

</div> 
```

家庭控制器.cs

```
 mydataEntities dbContext = new mydataEntities();
    DataRepository objRepository = new DataRepository();
//GET

public ActionResult Index(string userAction="Create",int id = 0 )
{
    var mappingobj = new SecurityIdentifierMappingViewModel();
    mappingobj.MappingWebGridList = dbContext.SecurityIdentifierMappings.ToList();

    if (id!=null && id > 0)
    {

        mappingobj.MappingControls = dbContext.SecurityIdentifierMappings.Find(id);
        if (userAction == "Delete")
        {
            dbContext.SecurityIdentifierMappings.Remove(mappingobj.MappingControls);
            dbContext.SaveChanges();
        }
    }
    else
    {
        mappingobj.MappingControls = new SecurityIdentifierMapping();
        mappingobj.MappingControls.PricingSecurityID = 0;
        mappingobj.MappingControls.CUSIP = "";
    }
    mappingobj.PricingSecurities = objRepository.GetPricingSecurityID();
    mappingobj.CUSIPs = objRepository.GetCUSIP();

    return View(mappingobj);
}

//POST

[HttpPost]
public ActionResult Index(SecurityIdentifierMappingViewModel objModel)
{
      //edit code
     if (objModel.MappingControls.Id > 0)
        {
            if (ModelState.IsValid)
            {
                dbContext.Entry(objModel.MappingControls).State = EntityState.Modified;
                try
                {
                    dbContext.SaveChanges();
                    return RedirectToAction("Index");
                }
                catch (System.Data.Entity.Validation.DbEntityValidationException ex)
                {
                    throw;
                }
            }

        }

        //insert code
        else
        {
            if (ModelState.IsValid)
            {
                dbContext.SecurityIdentifierMappings.Add(objModel.MappingControls);
                try
                {
                    dbContext.SaveChanges();
                    return RedirectToAction("Index");
                }
                catch (System.Data.Entity.Validation.DbEntityValidationException ex)
                {
                    throw;
                }
            }

        }

        objModel.MappingWebGridList = dbContext.SecurityIdentifierMappings.ToList();
        objModel.PricingSecurities = objRepository.GetPricingSecurityID();
        objModel.CUSIPs = objRepository.GetCUSIP();
        objModel.MappingControls = new SecurityIdentifierMapping();

        return View(objModel);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T05:26:21.097

推荐而不是

```
return View(objModel); 
```

去做

```
return RedirectToAction("Index", new {Id = null}); 
```

这称为后重定向获取模型 (PRG)。

如果你想保留 objModel。将它放在 TempData 和 Index(Get) 上，以检查 TempData 是否存在对象。使用它而不是加载一个新的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T05:36:57.893

您需要在代码中的某处使用 RedirectToAction 才能将其恢复到原始索引。

另外，你做的有点不对。MVC 的全部意义在于您的操作将（大部分）对应于 CRUD。因此，您将有一个编辑操作。您还将拥有创建和删除。显然，你可以有更多或更少甚至不同的动作，但 MVC 的全部意义在于让它更简单，而不是更难。

路由和操作的存在是有原因的，以避免编写单体代码。我强烈建议你看看[http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3)

尽管看起来您知道 ASP.NET 的基础知识，但 ASP.NET MVC 是有点不同的野兽 :)

# html - HTML 如何在 Firefox 浏览器中打开 URL 以呈现 HTML 5 内容

> ID：10203184
> 
> 赞同：-1
> 
> 时间：2012-04-18T05:13:43.210
> 
> 标签：html, firefox, browser

我需要在 Firefox 中打开 HTMLpage 的 URL。原因是不允许安装 Google Chrome Frame，默认浏览器是 IE6，因此试图在 Firefox 中打开 HTML 5 内容。必须首先使用 IE6 加载内容，因为有些组件只有 IE6 才能支持。

当用户单击链接时，是否可以在 firefox 中打开特定的 url？

如果有人可以提供上述帮助，将不胜感激。

试过这个但似乎不起作用：

```
<a href="file:///c:/Program Files (x86)/Mozilla Firefox/firefox.exe http://channel9.msdn.com/">Visit MSDN Channel 9</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T05:38:50.430

使用支持 HTML5 中一些较新功能的浏览器实际上是使用该功能的唯一方法。所以，我明白你为什么要在更现代的浏览器（如 FF）中打开该链接。我不认为您将能够打开特定链接，启动另一个浏览器。

但是，如果您只是想在 IE6 中显示一个优雅降级的网页，那么您可以开始使用 HTML5，而无需在 FF 中打开上述链接。保罗爱尔兰人这么说。签[出 HTML5 样板文件](http://html5boilerplate.com/)。

如果您尝试在页面/链接上使用仅在 HTML5 中可用的某些功能，我建议您检查一下是否可以在 JavaScript 中获得相同的效果/功能。[Modernizr](http://modernizr.com/)或[polyfills](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills)之类的东西可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T05:35:46.033

您是说您希望/需要用户通过 IE6 访问网站以加载一些旧的 ActiveX 内容，然后从那里打开一个包含 HTML5 内容的新窗口，但在 Firefox 中打开它？

我能想到的最接近的方法（这是一个长镜头）是为新窗口分配一个非 http 协议的 href，可能类似于“html5：”甚至“firefox：”。也许 IE6 会询问该协议使用什么程序。但即使在这种情况下，Firefox 也不知道如何处理该协议。它可能只是从 mime 类型中猜测出来的。

但我认为没有一种犹太方式可以强制一个浏览器在另一个浏览器中打开一个窗口（我知道）。

另一件需要考虑的事情：我曾经有过，在可能的其他一次性员工网站中，一个只有 IE 的网站，否则会引导你退出。事实证明，这只是服务器检查它是否是 IE，因为当时他们担心 Netscape 无法正确处理 CSS 和 javascript。

要测试它是否真的是依赖于 IE 的内容（而不仅仅是强制执行的 IE），请尝试使用 Firefox 的[UA 切换器插件](https://addons.mozilla.org/en-US/firefox/addon/user-agent-switcher/)并欺骗您的 UA 字符串说它是 IE6。如果页面在 Firefox 中看起来很棒，那么它并不是真正的 IE 页面，只是一些旧的浏览器嗅探。

# php - 如何在 Red Hat Enterprise Linux 6.2 上安装 LDAP.so

> ID：10203185
> 
> 赞同：0
> 
> 时间：2012-04-18T05:13:56.393
> 
> 标签：php, redhat, sysadmin

我刚刚创建了一个全新的 Red Hat Enterprise Linux 6.2 服务器，我将从旧的 RedHat 5 服务器迁移一些 LAMP 应用程序。

在我的旧服务器上，在 /usr/lib/php/modules 目录中，我有我需要的 ldap.so 模块。

在我的新 RedHat 6 服务器中，在 /usr/lib64/php/modules/ 目录中没有 ldap.so

如何添加 ldap.so ？我正在寻找一个简单的解决方案，比如使用 yum。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T05:20:30.080

假设您*真的*指的是**RHEL** 6.2，该`php-ldap`软件包包含 PHP 的 LDAP 扩展。

# android - Android 没有合适的编码

> ID：10203186
> 
> 赞同：0
> 
> 时间：2012-04-18T05:14:03.833
> 
> 标签：android, browser, httpservice

我在 android 设备上有 httpservice。它形成对某些浏览器的 html 页面的响应。所以它工作正常，但如果我使用其他语言（例如俄语），服务器会返回不可读的文本而不是俄语符号。我知道 Android 上的默认编码是 UTF-8。我已经尝试了 Android 上可用的所有编码（例如 windows-1251、Big5（中文）、UTF-16 等），但它完全返回了错误的结果。这是一些代码，向您展示了我尝试做的事情：

```
@Override
public void handle(HttpRequest request, HttpResponse response, HttpContext httpContext) throws HttpException, IOException {

 HttpEntity entity = new EntityTemplate(new ContentProducer() {
            public void writeTo(final OutputStream outstream) throws IOException {

                OutputStreamWriter writer = new OutputStreamWriter(outstream, "windows-1251");
                String resp = "<html><body>Hello Привет</body></html>";
                StringEntity se = new StringEntity(resp, "windows-1251");
                se.writeTo(outstream);
                //writer.write(resp);
                //writer.flush();
            }
        });
    response.setHeader("Context-Type", "text/html");                    
    response.setEntity(entity);
} 
```

所以在浏览器中我看到下一个：

```
Hello ÐŸÑ€Ð¸Ð²ÐµÑ‚ 
```

我错了什么？请回答我。我会很感激任何建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:31:02.643

您可以尝试使用[java.text.Normalizer](http://docs.oracle.com/javase/6/docs/api/java/text/Normalizer.html)或添加`<meta http-equiv="Content-Type" content="text/html charset=UTF-8" />`到您的回复中。

此外，我建议您不要对字符串进行硬编码，而是将它们放到资源中并加载它们[`Resources.getString(resId)`](http://developer.android.com/reference/android/content/res/Resources.html#getString%28int%29)- 这样您在编码方面可能会遇到更少的问题。

# android - Android API 如何从硬件获取数据？

> ID：10203187
> 
> 赞同：0
> 
> 时间：2012-04-18T05:14:08.967
> 
> 标签：android

Android API 如何从硬件获取数据？例如，`getX()`函数如何从加速度计传感器获取 x 轴值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:41:52.807

有嵌入软件的硬件接口。主题嵌入式系统对所有这些（硬件具有软件）给出了广泛的解释。因此，加速度计传感器是嵌入式系统，其中包含软件，设备可以与之交互以获取值。

不确定你是否相信，因为我没有在嵌入式方面完成我的硕士学位，但对它有相当好的了解，这是帮助你理解的尝试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T05:41:59.670

过于宽泛的问题：它因硬件数据源而异。在您选择的示例中，有一个本机服务处理传感器的 JNI 调用（请参阅[此处](https://github.com/android/platform_frameworks_base/blob/master/native/android/sensor.cpp)）：它从硬件驱动程序提供的文件描述符中获取数据。

# sitecore - “~”在 Sitecore 中变成“%7E”问题？

> ID：10203189
> 
> 赞同：1
> 
> 时间：2012-04-18T05:14:35.237
> 
> 标签：sitecore, sitecore6, page-editor

使用 Sitecore，我正在做一些事情，比如自定义媒体的 URL。
在`PageEditor` mode的时候，你们有遇到过“~”转“%7E”的问题吗？

例如，在 IE（或 chrome、firefox）中检查页面的来源，我期待类似的东西，

```
<img src="~/media/twitter.gif" alt="Twitter" width="100" height="22" /> 
```

但想出了这个，

```
<img src="%7E/media/twitter.gif" alt="Twitter" width="100" height="22" /> 
```

我检查了我的代码，我不认为我做了什么会改变'〜'到'％7E'，曾经遇到过这样的事情，如果你有，请告诉我，以及我如何解决它。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T05:16:18.397

`%7E`是 的URL[编码](http://en.wikipedia.org/wiki/Percent-encoding)。`~`使用编码值的 HTML 完全没问题。

如果您试图用来`~`访问用户的主目录（我怀疑您是），请不要这样做。了解 web docroot，以及相对路径和绝对路径，然后找出您想要使用的实际路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T05:24:34.260

`~`是访问您的主目录的快捷方式（或者，如果传递给在不同用户下运行的应用程序，则为该用户的主目录。所以通常使用`~`.

另一方面，只要不在查询字符串中，浏览器就会将 URL 编码的块解析为等效的块。例如：

[http://en.wikipedia.org/wiki/Sir%20Mix-a-Lot](http://en.wikipedia.org/wiki/Sir%20Mix-a-Lot)

将决定：

[http://en.wikipedia.org/wiki/Sir](http://en.wikipedia.org/wiki/Sir) Mix-a-Lot

（mediawiki 进一步解决：

[http://en.wikipedia.org/wiki/Sir_Mix-a-Lot](http://en.wikipedia.org/wiki/Sir_Mix-a-Lot)

但是，如果您尝试访问 webroot 之外的文件路径，您可能会遇到错误，尤其是客户端。如果你不这样做，如果你被抓住，你很可能会得到谈话。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T10:02:49.627

如前所述，`%7E`是`~`符号的 URL 编码。

在富文本编辑器中复制粘贴链接时，我们遇到了类似的问题。从广义上讲，似乎正在发生的事情是，当复制富文本编辑器的 HTML 输出时，我们已经在浏览器中工作，它正在呈现 HTML 源代码。例如，链接由浏览器解析（因此，如果作者登录到 Sitecore 为一个特定的主机域进行编辑但在不同的主机域上工作，则链接解析到他们登录的域）。

这样做时我们也遇到了特定的`%7E`更换`~`问题。

你没有提供足够的细节让我确定这就是你的情况，但这似乎很有可能。如果您正在复制粘贴浏览器呈现的 HTML，那么您不会访问原始字符串。

编辑：这可能与在复制粘贴时将富文本编辑器的路径信息添加到链接的已知 Sitecore 错误有关。Sitecore 在这里对其进行了修复：

[http://sdn.sitecore.net/Products/Sitecore%20V5/Sitecore%20CMS%206/ReleaseNotes/KnownIssues%20Recommended/Copying%20and%20pasting%20link%20in%20rt%20fields%20may%20break%20the%20link。 aspx](http://sdn.sitecore.net/Products/Sitecore%20V5/Sitecore%20CMS%206/ReleaseNotes/KnownIssues%20Recommended/Copying%20and%20pasting%20link%20in%20rt%20fields%20may%20break%20the%20link.aspx)

# c# - 如何创建将从链接表中分组记录并计算 2 个计数字段的 Linq2Sql 查询

> ID：10203191
> 
> 赞同：0
> 
> 时间：2012-04-18T05:15:04.630
> 
> 标签：c#, mysql, linq-to-sql, bltoolkit

在这里，我找到了如何使用 Linq2Sql 连接表并计算链接记录的数量[LINQ - Left Join、Group By 和 Count](https://stackoverflow.com/questions/695506/linq-left-join-group-by-and-count)

我已经实现了它，它对我来说没问题：以下表达式

```
var v = from c in db.GetTable<Country>()
        join t0 in db.GetTable<Team>() on c.Id equals t0.CountryId into t1
        from team in t1.DefaultIfEmpty()
        group team by c.Id into teamsGrouped
        select new CountryTeamsInfo
            {
                CountryId = teamsGrouped.Key,
                TeamsTotal = teamsGrouped.Count(),
                // TeamsWithoutOwnerFree = teamsGrouped.Count(t => t.OwnerId==0)
            }
            ;
         List<CountryTeamsInfo> res = v.ToList(); 
```

生成以下查询：

```
SELECT c.Id, Count(*) as c1
FROM countries c
LEFT JOIN teams t1 ON c.Id = t1.Country
GROUP BY c.Id 
```

事实上，我还需要计算那些 OwnerId 字段不等于 0 的链接器记录。

看起来我应该在 linq 表达式 (TeamsWithoutOwnerFree = teamsGrouped.Count(t => t.OwnerId==0)) 中取消注释该行，但这不起作用，尝试执行会导致错误：

> 字典中不存在给定的键

查询不会出现在 SQL 日志文件中，我无法在调试器中检查它。

什么应该是从“团队”表中计算符合其他标准的行的正确方法。

PS 如果重要，我使用 C# 4.0、MySql 5.1 和 BLToolkit 4.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:01:37.333

也许尝试使用[`GroupJoin()`](http://msdn.microsoft.com/en-us/library/bb534297%28v=vs.95%29.aspx)您的查询：

```
var result = db.GetTable<Country>()
               .GroupJoin(db.GetTable<Team>(),
                   c => c.Id,
                   t => t.CountryId,
                   (country, teams) => new
                   {
                       CountryId = country.Id,
                       TeamsTotal = teams.Count(),
                       TeamsWithoutOwnerFree = teams.Count(t => t.OwnerId == 0)
                   })
               .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:24:56.410

由于 RePierre 的帮助，我能够找到正确的查询：

```
var v = db.GetTable<Country>().Where(country => country.Allowed)
                    .GroupJoin(
                        db.GetTable<Team>(),
                        country => country.Id,
                        team => team.CountryId,
                        (country, teams) => new CountryTeamsInfo
                                                {
                                                    CountryId = country.Id,
                                                    TeamsTotal = teams.Count(),
                                                    TeamsWithoutOwnerFree = teams.Count(t => t.OwnerId != 0),
                                                }
                    ).GroupJoin(
                        db.GetTable<Team>().Where(te=>te.OwnerId==0),
                        cti => cti.CountryId,
                        team => team.CountryId,
                        (cti, teams) => new CountryTeamsInfo
                        {
                            CountryId = cti.CountryId,
                            TeamsTotal = cti.TeamsTotal,
                            TeamsWithoutOwnerFree = teams.Count(t => t.OwnerId != 0),
                        }
                    )
                    ; 
```

我担心的是它使用了 2 个子查询......将尝试优化它。任何想法都会很棒

PS 实际上，生成的 SQL 查询看起来也很丑：

```
SELECT
cti.Id as Id1,
cti.c1 as c11,
(
    SELECT
        Count(*)
    FROM
        teams te
    WHERE
        cti.Id = te.Country AND te.User = 0
) as c2
FROM
(
    SELECT
        country.Id,
        (
            SELECT
                Count(*)
            FROM
                teams t1
            WHERE
                country.Id = t1.Country
        ) as c1
    FROM
        countries country
    WHERE
        country.allow 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T18:06:01.823

这是在我的环境中工作的查询：

```
from c in db.GetTable<Country>()
where c.Allowed
select new CountryTeamsInfo
{
    CountryId = c.Id,
    TeamsTotal = db.GetTable<Team>().Count(t => t.CountryId == c.Id && t.Allowed),
    TeamsHasOwner = db.GetTable<Team>().Count(t => t.CountryId == c.Id && t.Allowed && t.OwnerId != 0),
} 
```

不是最好的解决方案（我需要在每个子查询中重复团队选择标准 t.Allowed），但仍然可以正常工作并且生成的 SQL 也很好。

# javascript - 在 asp.net 中生成网页的打印预览

> ID：10203199
> 
> 赞同：0
> 
> 时间：2012-04-18T05:15:34.753
> 
> 标签：javascript, jquery, asp.net, print-preview

```
<a href="_javascript:window.print()">
<img class="noPrint" src="Images/Print_icon.png" border="0"></a> 
```

这是我用来实现打印功能的唯一代码。它会生成一个打印对话框。为了使页面打印友好，我使用了样式表并将不需要的 div 隐藏在打印页面中。

我现在需要生成该页面的打印预览。有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:01:18.337

到目前为止，基本上没有可用的功能，但您可以通过`print.htm`使用 Print css 创建具有名称的相同 html 文件的副本并在按钮 Print Preview 上打开此文件单击作为弹出页面并呈现它，这将预览页面：

```
<html> 
<head> 
<title></title> 
//do it in simple way.. 
<script LANGUAGE=”JavaScript”&gt; 
function displayMessage(printContent) { 
var inf = printContent; 
win = window.open(”print.htm”, ‘popup’, ‘toolbar = no, status = no’); 
win.document.write(inf); 
win.document.close(); // new line 
} 
</script> 
</head> 
<body> 
<div id=”printarea”&gt;Print this stuff.</div> 
<a href=”javascript:void(0);” onclick=”displayMessage(printarea.innerHTML)”&gt;Print Preview</a>

</body> 
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T05:44:40.403

一种方法是在您的 css 中使用 mediaType 打印。只有当您以打印模式打开页面时，才会应用此 css。在您的 css 文件中添加以下类：

```
@media print {
// printer friendly page css
} 
```

另一种方法是使用纯 JavaScript。互联网上有很多关于此的[文章：](http://www.google.com/search?q=printer%20friendly%20page%20javascript)

如果您有打印友好页面的通用模板。我建议您为打印版本创建一个单独的页面，当用户单击链接时，将其导航到您的新打印机友好页面。我会推荐这种方法，因为这是万无一失的，你可以完全控制它，其他方法都有一些陷阱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T05:21:06.930

我真的不认为这是实用的。您的网页不知道字体大小（缩放级别）、页边距、方向或构建打印预览图像所需的任何其他信息。

此外，页面可以引用来自其他站点的图像和其他内容。您的代码如何知道这里需要什么？

幸运的是，我使用的浏览器（IE 和 Chrome）提供打印预览，所以无论如何你都可以免费获得它。但是，如果您尝试手动实现打印预览，我只是不认为这是一个实际目标。

# java - 带有表盘外观的 Java 滑块

> ID：10203209
> 
> 赞同：0
> 
> 时间：2012-04-18T05:16:02.197
> 
> 标签：java, swing, jslider

我试图创建一个 JSlider 对象，它的线看起来像一个弧线，有最少数量的刻度线（尽管有些可能没有值），滑块指示器是一条从弧线中心绘制到当前的简单线选定的刻度线。看起来我可能必须扩展 BasicSliderUI 并覆盖各种绘制方法。是否已经有这样的例子，或者我是否已经从头开始创建这个对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T05:40:54.150

这个[例子](https://stackoverflow.com/a/6996263/230513)说明了如何重写`paintTrack()`. `BasicSliderUI`看起来你可以画一个[`Arc2D`](http://docs.oracle.com/javase/6/docs/api/java/awt/geom/Arc2D.html)来得到你想要的效果。

# python - 将 bash 环境变量发送回 python 结构

> ID：10203210
> 
> 赞同：5
> 
> 时间：2012-04-18T05:16:06.737
> 
> 标签：python, bash, fabric

我正在尝试将 bash 环境变量传递回我的结构函数，如下所示：-

```
from fabric.api import env

def env_localhost():
    "All the environment variables relating to your localhost"
    project_home = local('echo $PROJECT_HOME')
    print 111, project_home 
```

但它似乎无法检索标准输出结果并将其分配给我的 python`project_home`变量。正确执行此操作的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T05:24:27.403

像这样做：

```
import os
os.getenv("PATH") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T06:08:06.710

还：

```
import os
os.environ['PROJECT_HOME'] 
```

# iphone - 如何正确处理 UIPickerViewController 中带有图像的 UIImageView 中的内存警告？

> ID：10203211
> 
> 赞同：1
> 
> 时间：2012-04-18T05:16:12.330
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

所以我有`UIImageView`一个看法。该视图上还有一个按钮来弹出一个`UIPickerViewController`或相机控件。当有人选择图像时，它会设置`myImageView.image`属性并在我的视图中显示图像。没有保存图像......它只是显示您选择的内容。

有时，当我进入时`UIPickerViewController`，我会收到内存警告。因为选择器是打开的，所以所有其他不可见的视图，包括 my `UIImageView`，都会被释放，并且 viewDidLoad 会在选择器关闭时再次调用。这正如预期的那样。但在这个过程中，我丢失了我正在显示的图像，因为图像恢复为原来的“选择图像”图像占位符。

但是如何`UIImageView`将内存警告之前的图像加载回`UIImageView`？因为它在记忆中，它现在已经丢失了。而且我不知道它的位置，因为用户从选择器中选择了它，而我只是直接从那里拿走了它：

```
itemImageView.image = [info objectForKey:UIImagePickerControllerOriginalImage]; 
```

关于如何恢复丢失的图像的任何想法？或者如果我应该将它保存在某个变量中或保存到设备中以便在出现内存警告的情况下再次使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:59:27.730

您需要保留对图像的引用并在 UIImageView 中显示它。例如，将其保存在一个名为`selectedImage`：

。H：

```
@property (nonatomic, retain) UIImage* selectedImage; 
```

图像选择器委托：

```
self.selectedImage = [info objectForKey:UIImagePickerControllerOriginalImage];
itemImageView.image = selectedImage; 
```

然后当`itemImageView`由于内存不足而被卸载（连同视图的其余部分）时，您仍然会保留图像。在`viewDidLoad`中，检查您是否有应该显示的图像：

```
if (selectedImage != nil)
    itemImageView.image = selectedImage; 
```

确保在适合您的应用程序时释放`selectedImage`- 例如，当用户超出此屏幕时，或当他们取消选择此图像时，或当您将其保存到文件系统等时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T05:36:33.887

是的，如果你有一个图像变量并保留图像会更好。

# ajax - JQuery UI 选项卡：Ajax 内容加载在 firebug 中自动停止

> ID：10203216
> 
> 赞同：0
> 
> 时间：2012-04-18T05:16:32.883
> 
> 标签：ajax, firebug, jquery-ui-tabs

我有以下html：

```
$(function() {          
    $("#tabs").tabs();                      
});
<div id="tabs">
    <ul>
        <li><a href="content/intro.html">Introduction</a></li>
        <li><a href="content/searching.html">Searching</a></li>
    </ul>
</div> 
```

问题是，当单击选项卡萤火虫（在 Firefox 11 中）时，会在 jquery-ui-min.js javascript 文件的第 181 行打开并停止脚本执行。如果我然后按 F8（继续）内容加载正确并且没有显示错误。（在 IE8 中也没有错误）。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:35:34.307

发生这种情况是因为在该位置捕获了异常。（使用非缩小版本）。评论说这是由于竞争条件造成的。异常被捕获，因此没有进一步的错误并且可以继续执行。但是，只要发生异常，默认情况下的 firebug 似乎就会停止执行。

# ios - 为 UIButton 的不同状态设置不同的 Fonts

> ID：10203218
> 
> 赞同：8
> 
> 时间：2012-04-18T05:16:37.537
> 
> 标签：ios

如何为不同的 UIbutton 状态设置不同的字体？感谢您对此的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-09-20T09:07:16.577

这是一个非常酷的问题，它促使我创建了一个`UIButton`允许设置状态字体的子类！

我还写了一些示例代码来展示如何设置字体。如果您使用的是 Interface Builder，则将按钮的类设置为`ConfigurableButton`. 在代码中，按钮也必须声明为`ConfigurableButton`，因为我添加了新属性和`setFont:forState:`方法。

*如有任何改进，请发表评论！*

**查看控制器实现**

```
#import "ViewController.h"
#import "ConfigurableButton.h"

@interface ViewController ()

@property (weak, nonatomic) IBOutlet ConfigurableButton *toggleButton;

@end

@implementation ViewController

- (void)viewDidLoad {
    [super viewDidLoad];

    //Set the fonts for button's states
    _toggleButton.normalFont        = [UIFont fontWithName:@"BradleyHandITCTT-Bold" size:14];
    _toggleButton.highlightedFont   = [UIFont fontWithName:@"Chalkduster" size:14];
    _toggleButton.selectedFont      = [UIFont fontWithName:@"Zapfino" size:14];
    _toggleButton.disabledFont      = [UIFont fontWithName:@"Arial" size:14];
}

@end 
```

**可配置按钮.h**

```
#import <UIKit/UIKit.h>

IB_DESIGNABLE

/**
 * A button that allows fonts to be assigned to each of the button's states.
 *
 * A state font can be specified using setFont:forState, or through one of the
 * four state Font properties.
 *
 * If a font is not specified for a given state, then
 * the System font will be displayed with a font size of 15.
 */
@interface ConfigurableButton : UIButton

@property (strong, nonatomic) UIFont *normalFont;
@property (strong, nonatomic) UIFont *highlightedFont;
@property (strong, nonatomic) UIFont *selectedFont;
@property (strong, nonatomic) UIFont *disabledFont;

/**
 * Set a font for a button state.
 *
 * @param font  the font
 * @param state a control state -- can be
 *      UIControlStateNormal
 *      UIControlStateHighlighted
 *      UIControlStateDisabled
 *      UIControlStateSelected
 */
- (void) setFont:(UIFont *)font forState:(NSUInteger)state;

@end 
```

**可配置按钮.m**

```
#import "ConfigurableButton.h"

@implementation ConfigurableButton

//Sets one of the font properties, depending on which state was passed
- (void) setFont:(UIFont *)font forState:(NSUInteger)state
{
    switch (state) {
        case UIControlStateNormal:
        {
            self.normalFont = font;
            break;
        }

        case UIControlStateHighlighted:
        {
            self.highlightedFont = font;
            break;
        }

        case UIControlStateDisabled:
        {
            self.disabledFont = font;
            break;
        }

        case UIControlStateSelected:
        {
            self.selectedFont = font;
            break;
        }

        default:
        {
            self.normalFont = font;
            break;
        }
    }
}

/**
 * Overrides layoutSubviews in UIView, to set the font for the button's state,
 * before calling [super layoutSubviews].
 */
- (void) layoutSubviews
{
    NSUInteger state = self.state;

    switch (state) {
        case UIControlStateNormal:
        {
            [self setTitleFont:_normalFont];
            break;
        }

        case UIControlStateHighlighted:
        {
            [self setTitleFont:_highlightedFont];
            break;
        }

        case UIControlStateDisabled:
        {
            [self setTitleFont:_disabledFont];
            break;
        }

        case UIControlStateSelected:
        {
            [self setTitleFont:_selectedFont];
            break;
        }

        default:
        {
            [self setTitleFont:_normalFont];
            break;
        }

    }

    [super layoutSubviews];
}

/**
 * Private
 *
 * Convenience method that falls back to the System font,
 * if no font is configured.
 */
- (void) setTitleFont:(UIFont *)font
{
    if (!font) {
        font = [UIFont systemFontOfSize:15];
    }

    self.titleLabel.font = font;
}

@end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-03-23T14:01:22.147

最简单的解决方案是为每个`UIControl`状态设置一个属性标题：

```
var attributes = [String : AnyObject]()
attributes[NSForegroundColorAttributeName] = UIColor.redColor()
attributes[NSFontAttributeName] = UIFont.systemFontOfSize(15)

let normal = NSAttributedString(string: "normal", attributes: attributes)
button.setAttributedTitle(normal, forState: .Normal)

attributes[NSForegroundColorAttributeName] = UIColor.redColor()
attributes[NSFontAttributeName] = UIFont.boldSystemFontOfSize(15)

let selected = NSAttributedString(string: "selected", attributes: attributes)
button.setAttributedTitle(selected, forState: .Selected) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-01-17T05:57:32.540

通常，我这样编码：

```
itemButton.setAttributedTitle(NSAttributedString(string: "title", attributes: [NSAttributedString.Key.font : UIFont.font(ofSize: 16.0, weight: .medium), NSAttributedString.Key.foregroundColor: UIColor.white.withAlphaComponent(0.5)]), for: .normal)
itemButton.setAttributedTitle(NSAttributedString(string: "title", attributes: [NSAttributedString.Key.font : UIFont.font(ofSize: 20.0, weight: .medium), NSAttributedString.Key.foregroundColor: UIColor.white]), for: .selected) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-14T19:56:53.300

这是我的工作代码块。`IB_DESIGNABLE`只是使结果在 Interface Builder 上可视化的微小改进:-)

```
@interface MyButton : UIButton
@end

IB_DESIGNABLE @implementation MyButton
// Here you can override the look & feel for each state
// Actually not only fontSize, but any writable properties ^_^
- (void)setEnabled:(BOOL)enabled {
    [super setEnabled:enabled];
    self.titleLabel.font = enabled ? [UIFont systemFontOfSize:14] : [UIFont systemFontOfSize:10];
}

- (void)setHighlighted:(BOOL)highlighted {
    [super setHighlighted:highlighted];
    self.titleLabel.font = highlighted ? [UIFont systemFontOfSize:14] : [UIFont systemFontOfSize:12];
}

- (void)setSelected:(BOOL)selected {
    [super setSelected:selected];
    self.titleLabel.font = selected ? [UIFont boldSystemFontOfSize:14] : [UIFont systemFontOfSize:12];
}

@end 
```

您可以像这样在界面生成器中看到 designable `MyButton`s 字体 [![在此处输入图像描述](../Images/55dec349ef14454f971805f85396e59c.png)](https://i.stack.imgur.com/3SvPZ.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-19T12:35:25.967

只需创建您的自定义按钮。覆盖布局子视图。设置所需的字体。

```
// Interface
@interface EezyButton : UIButton

@end
//Implementation
#import "EezyButton.h"

@implementation EezyButton

- (void)layoutSubviews{
    if (self.state == UIControlStateNormal) {
        [self.titleLabel setFont:[UIFont systemFontOfSize:12]];
    }
    else if (self.state == UIControlStateHighlighted){
        [self.titleLabel setFont:[UIFont systemFontOfSize:25]];

    }
    else if (self.state == UIControlStateDisabled){
        [self.titleLabel setFont:[UIFont systemFontOfSize:12]];
    }
    else if (self.state == UIControlStateSelected){
        [self.titleLabel setFont:[UIFont systemFontOfSize:28]];
    }
    [super layoutSubviews];
}

@end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-24T16:04:53.273

带有自定义字体的 Swift 5 版本：

```
todayButton.setAttributedTitle(NSAttributedString(string: "today", attributes: [.font: UIFont(name: "Font-Name", size: 16)!]), for: .normal)

todayButton.setAttributedTitle(NSAttributedString(string: "today", attributes: [.font: UIFont(name: "Font-Name", size: 24!]), for: .selected) 
```

如果您使用它，请不要忘记在 Interface Builder 中设置按钮类型自定义

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-18T05:20:15.907

您可以在设计视图上设置字体以获取更多详细信息：

您可以在 Interface Builder 本身中设置所有这些。除非您有非常严格的理由在代码中执行此操作。以下是在 IB 中的操作方法 -

打开右侧栏，然后单击“状态配置”，您会看到按钮的各种状态，默认、突出显示、选择和禁用。现在您可以为每个状态设置不同的图像，为每个状态设置不同的字体类型和字体颜色。霍普这有帮助...

![在此处输入图像描述](../Images/eda0990aa62e64795284afd4bbd14834.png)

谢谢..！

# java - Java 像图一样遍历一个大的 HashMap

> ID：10203221
> 
> 赞同：1
> 
> 时间：2012-04-18T05:16:48.450
> 
> 标签：java, recursion, graph, hashmap

我有一个大的`HashMap<String,Set<String>>`，这样说：

```
 {INDIANBATSMAN=[INDIAN, CRICKETER], COMPANY=[THING],
 INDIAN=[LIVING], LIVING=[THING], PERSON=[LIVING],
 CRICKETER=[PERSON], CANADIAN=[LIVING], SCANDINAVIAN=[LIVING]} 
```

这实际上对应于图结构，这意味着每个键与其值集之间存在边。我想遍历每个链接并找到从初始节点可到达的所有节点作为我的键的值集。

喜欢，

```
INDIANBATSMAN=[INDIAN,LIVING,THING,CRICKETER,PERSON] 
```

完成这项工作的最有效方法应该是什么？（目前，我正在将其转换为邻接矩阵，因为我的地图很大，所以效率非常低。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T05:21:54.270

您当前的表示 ( `Map<String, Set<String>>`) 称为[邻接表](http://en.wikipedia.org/wiki/Adjacency_list)，非常适合标准遍历算法，例如广度优先或深度优先。

这样的事情应该做：

```
visited = empty set
q = empty list
q.add(startNode)
visited.add(startNode)
while (q is non-empty)
    Node n = q.removeFirst()
    process(n)
    Set<String> children = yourMap.get(n)
    for (Node child : children)
        if (! visited contains child)
            visited.add(n)
            q.add(child) 
```

# regex - 正则表达式删除 HTML 标签

> ID：10203222
> 
> 赞同：0
> 
> 时间：2012-04-18T05:16:57.867
> 
> 标签：regex

输入：

```
<td>
<span>
<span>spanaaa</span>
<span class="1">spanbbb</span>
<span class="" style="">spanccc</span>
<span style="display:none">spanddd</span>

<div>divaaa</div>
<div class="1">divbbb</div>
<div class="" style="">divccc</div>
<div style="display:none">divddd</div>
</span>
</td> 
```

我需要一个正则表达式或一个方法来获取没有属性 style="display:none" 的值

输出：

> spanaaa
> spanbbb
> spanccc
> 
> divaaa
> divbbb
> divccc

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:44:30.633

**模式 [.NET 风格]**

```
(?<=<\w+ [^<>]*?\w+=")(?!display:none)(?<mt>[^"<>]+)(?=")

Options: ^ and $ match at line breaks

Assert that the regex below can be matched, with the match ending at this position (positive lookbehind) «(?<=<\w+ [^<>]*?\w+=")»
   Match the character “&lt;” literally «<»
   Match a single character that is a “word character” (letters, digits, and underscores) «\w+»
      Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
   Match the character “ ” literally « »
   Match a single character NOT present in the list “&lt;>” «[^<>]*?»
      Between zero and unlimited times, as few times as possible, expanding as needed (lazy) «*?»
   Match a single character that is a “word character” (letters, digits, and underscores) «\w+»
      Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
   Match the characters “="” literally «="»
Assert that it is impossible to match the regex below starting at this position (negative lookahead) «(?!display:none)»
   Match the characters “display:none” literally «display:none»
Match the regular expression below and capture its match into backreference with name “mt” «(?<mt>[^"<>]+)»
   Match a single character NOT present in the list “"<>” «[^"<>]+»
      Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
Assert that the regex below can be matched, starting at this position (positive lookahead) «(?=")»
   Match the character “"” literally «"» 
```

**模式 [PCRE]**

```
<!--
(<\w+ [^<>]*?\w+=")(?!display:none)([^"<>]+)(?=")

Options: ^ and $ match at line breaks

Match the regular expression below and capture its match into backreference number 1 «(<\w+ [^<>]*?\w+=")»
   Match the character “&lt;” literally «<»
   Match a single character that is a “word character” (letters, digits, and underscores) «\w+»
      Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
   Match the character “ ” literally « »
   Match a single character NOT present in the list “&lt;>” «[^<>]*?»
      Between zero and unlimited times, as few times as possible, expanding as needed (lazy) «*?»
   Match a single character that is a “word character” (letters, digits, and underscores) «\w+»
      Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
   Match the characters “="” literally «="»
Assert that it is impossible to match the regex below starting at this position (negative lookahead) «(?!display:none)»
   Match the characters “display:none” literally «display:none»
Match the regular expression below and capture its match into backreference number 2 «([^"<>]+)»
   Match a single character NOT present in the list “"<>” «[^"<>]+»
      Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
Assert that the regex below can be matched, starting at this position (positive lookahead) «(?=")»
   Match the character “"” literally «"» 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T05:41:53.517

正则表达式是一个糟糕的选择（因为 HTML 的变幻莫测），但是你可以试试这个：

```
<div(?!\s*style="display:none")[^>]*>(.*?)</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T14:04:01.137

它是 CSharp 版本，比正则表达式解析快 8 倍。您可以轻松转换为您想要的任何语言。

```
public static string StripTagsCharArray(string source)
{
char[] array = new char[source.Length];
int arrayIndex = 0;
bool inside = false;

for (int i = 0; i < source.Length; i++)
{
    char let = source[i];
    if (let == '<')
    {
    inside = true;
    continue;
    }
    if (let == '>')
    {
    inside = false;
    continue;
    }
    if (!inside)
    {
    array[arrayIndex] = let;
    arrayIndex++;
    }
}
return new string(array, 0, arrayIndex);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T07:07:17.373

```
input = Regex.Replace(input, @"<div style=""display:none"">(.|\n)*?</div>", string.Empty, RegexOptions.Singleline); 
```

这里的输入是包含 Html 的字符串。试试这个正则表达式，它会工作！

# html - 混合动态和静态图像时遇到问题

> ID：10203224
> 
> 赞同：1
> 
> 时间：2012-04-18T05:17:04.240
> 
> 标签：html, image-scaling

我正在尝试在具有一组图像的框架内创建一个画廊。画廊中的第一张图像我试图拥有一个动态图像，它具有窗口的高度和不改变图像纵横比的对应宽度。我发现我可以用这段代码做到这一点：

```
<div style="position:absolute; width:100%; height:100%; margin:0px; padding:0px; left:0px; right:0px;z-index:1">
<img src="IMAGENAME.jpg" height="100%"/></div> 
```

接下来我想在这个具有固定大小的动态大小的图像的右侧添加一个图像，然后我想在它的右侧添加另一个具有固定大小的图像等。

由于窗口显示在不同的屏幕上，我希望静态图像始终触及动态图像的边界。

我已经尝试了各种方法来做到这一点，但我几乎被卡住了，有人可以帮忙吗？最简单的方法是获取窗口高度，然后将其乘以固定数量（纵横比），然后将其他图像偏移该数量，但我不知道该怎么做。

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:38:35.790

您可以使用以下代码将所有图像浮动到动态图像旁边：

```
<html>
<head>
<style type="text/css">
.thumbnail 
{
    float:left;
}
</style>
</head>

<body>
<div style="position:absolute; width:100%; height:100%; margin:0px; padding:0px; left:0px; right:0px;z-index:1">
    <img class="thumbnail" src="IMAGENAME.jpg" height="100%">
    <img class="thumbnail" src="img1.jpg">
    <img class="thumbnail" src="img2.jpg">
    <img class="thumbnail" src="img3.jpg">
    <img class="thumbnail" src="img4.jpg">
</div>
</body>
</html> 
```

# c# - 模块化 C# Winform 应用程序

> ID：10203228
> 
> 赞同：4
> 
> 时间：2012-04-18T05:17:34.323
> 
> 标签：c#, winforms, dll, module

我正在使用 C#.NET 2010

我正在为 20 个网点开展 POS 项目，并且它已经在每个网点安装和使用。有一天表单发生变化说支付方式，我必须重新设计UI表单以及修改逻辑代码。然后我重新编译项目并将更新发送到所有网点，这并不容易。然后我有一个想法，我需要将项目中的每个表单作为模块分开（如果可以的话我会使用DLL文件），所以当我修改一个表单时我不需要重新编译所有。我只是修改和编译所需的表格并将其更新到网点。

那么我可以将表单编译为 DLL 吗？如果是这样，如何实现？或者，也许我没有走上正确的道路来理解我的想法？

提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T05:55:44.287

## 更新

正如CP文章的评论所指出的那样，之前的答案有很多缺陷。[本文](http://www.drdobbs.com/cpp/implementing-a-plug-in-architecture-in-c/184403942)在 C# 中更好地实现了插件架构。您也可以参考[此答案](https://stackoverflow.com/a/4748189/1115937)以获取更多选项。

**上一个答案**

您可以使用[插件](http://en.wikipedia.org/wiki/Plug-in_(computing))架构来做到这一点。这是一篇[非常好的文章](http://www.codeproject.com/Articles/4691/Plugin-Architecture-using-C)，可能会对您有所帮助。

> 本文向您展示了如何合并单个模块，作为另一个应用程序的插件或将其用作独立应用程序。本文将演示如何需要进行最小的更改才能获得上述结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T05:24:16.920

您可以在 DLL 中拥有一个表单。表单只是另一个类，实际上通常是多个类（即部分类），就像 DLL 中的任何其他类一样，您将引用相同的类。您只需要确保它是公开的，以便外部程序集可以访问它。

您只需要保持警惕，在同一个程序集中保持紧密合作的表单（即公共引用）可能是一个好主意。您可能会因过度调制而遇到困难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T05:29:02.190

我认为分发 DLL 没有任何问题。确保其已签名对安全性来说是个好主意（这可以在 VS 2010 中通过项目属性完成）。您可能应该为您的支付 UI 功能定义一个接口，然后由您的 DLL 中的类实现。然后，应用程序的调用部分（不变的 UI）可以通过此接口而不是通过实际（具体）表单对象进行调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T05:38:34.917

您可以[发布 ClickOnce 应用程序](http://msdn.microsoft.com/en-us/library/31kztyey.aspx)，它将减少更新应用程序的难度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T05:40:45.380

我对你说“*然后我重新编译项目并将更新发送到所有网点的原因更感兴趣，这并不容易做到*，为什么你认为“将每个表单作为模块/DLL”会解决你的问题..它是因为从所有项目编译的 DLL 的大小太大而无法发送？如果您试图将每个表单分成自己的模块/dll，那么您最终可能会使用一个解决方案来拥有多个项目...

# jquery - HTML5 视频未出现在 FancyBox iFrame 中的 iPod/iPhone 设备上

> ID：10203231
> 
> 赞同：0
> 
> 时间：2012-04-18T05:18:09.763
> 
> 标签：jquery, iphone, iframe, fancybox, html5-video

自从将我的 fancyBox 升级到第 2 版后，我在 iFrame 中的 HTML5 视频已停止在 iPod/iPhone 上运行。我已经在其他移动设备（Blackberry、PlayBook）上对其进行了测试，并且没有问题。我已经在 Firefox、Safari 和 Chrome 上测试了我的代码，也没有任何问题。

fancyBox 的早期版本确实适用于所有这些（包括 iPod/iPhone），但会闪烁白色（iframe 背景），而版本 2 没有这个问题，但显然还有其他问题。有任何想法吗？

这是我的 fancyBox 启动代码：

```
function fancyBox(video) {    
    $.fancybox.open({
        'padding' : 0,
        'overlayColor' : '#000000',
        'openEffect' : 'fade',
        'closeEffect' : 'fade',
        'scrolling' : 'no',
        'closeBtn': false,
        'closeClick': false,
        'width' : 1005,
        'height' : 665,
        'minWidth' : 1005,
        'minHeight' : 665,
        'href' : 'video.php?video='+video,
        'type' : 'iframe'
    });
} 
```

以下是 HTML5 视频播放代码的摘录：

```
<video id="video-window" autoplay="autoplay" autobuffer="autobuffer">
    <source src="videos/<?php echo $video; ?>.mp4" type='video/mp4' />
    <source src="videos/<?php echo $video; ?>.webm" type='video/webm' />
    <source src="videos/<?php echo $video; ?>.ogv" type='video/ogg; codecs="theora, vorbis"' />
    <object type="application/x-shockwave-flash" data="scripts/player.swf" width="947" height="532">
        <param name="allowfullscreen" value="true">
        <param name="allowscriptaccess" value="always">
        <param name="autoplay" value="true">
        <param name="flashvars" value="videos/<?php echo $video; ?>.mp4">
        <!--[if IE]><param name="movie" value="scripts/player.swf"><![endif]-->
        <p>Your browser can’t play HTML5 video.</p>
    </object>
</video> 
```

# javascript - 在 javascript 中为 document.location 创建钩子

> ID：10203234
> 
> 赞同：0
> 
> 时间：2012-04-18T05:18:20.493
> 
> 标签：javascript

我们可以在 javascript 中创建对 document.location 属性的引用吗？从过去几天开始，我们正在研究在 document.createElement 上创建的钩子。在使用它时，我们怀疑是否可以在 document.location、document.scripts 等对象上创建挂钩。

```
var dbi = document.body.innerHTML; 
document.body.innerHTML=function () { 
    var elem = dbi.apply (document, arguments); 
    console.log(arguments); 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T06:15:45.140

在您的代码中：

```
> var dbi = document.body.innerHTML; 
```

`innerHTML`是一个值为字符串的属性，因此分配给 dbi 的值是字符串原语。

```
> document.body.innerHTML=function () { 
```

body 元素是一个**宿主对象**，没有理由相信您可以将函数对象分配给根据相关标准应该是字符串的属性。在某些环境中它可能是可能的，但它不能被依赖并且至少在某些正在使用的浏览器中会失败。

```
>     var elem = dbi.apply (document, arguments); 
```

`dbi`是一个字符串原语，它没有应用方法。

```
>     console.log(arguments);
> } 
```

### 编辑

在 ES5 中，您可以定义一个[getter](https://developer.mozilla.org/en/JavaScript/Reference/Operators/get)，例如

```
var o = {   
  get pageURI () {   
    return document.location.href;   
  }
} 
```

所以你可以这样做：

```
alert(o.pageURI);

document.location = document.location.href + '#foo';

alert(o.pageURI);  // current URI with #foo appended 
```

但是你不应该在一般网络上依赖 ES5，许多浏览器还没有完全支持它。

# objective-c - 保存声明单例的标准方法

> ID：10203235
> 
> 赞同：0
> 
> 时间：2012-04-18T05:18:27.263
> 
> 标签：objective-c, singleton, xcode4.2

```
+ (GrabClass *)grab{
    static GrabClass * ngrab = nil;

        if (ngrab==nil)
        {
            ngrab=[[GrabClass alloc]init];
        }

    return grab;
} 
```

我在我的程序中使用了许多单例。如果我这样做，但是有可能不同的线程同时调用grab方法。

如何避免？

我目前的解决方案是：

```
+ (GrabClass *)grab{
    static GrabClass * ngrab = nil;
    [Tools DoSomethingWithSynchronize:^{
        if (ngrab==nil)
        {
            ngrab=[[GrabClass alloc]init];
        }
    }];

    return grab;
} 
```

在哪里

```
+(void)DoSomethingWithSynchronize:(void (^)())block
{
    @synchronized (self)
    {
        [self singleton].lockToMakeSureThatOnlyOneThreadAccessThis=[NSThread currentThread];
        [self breakIfLock]; //should not be called
        block();
        [self singleton].lockToMakeSureThatOnlyOneThreadAccessThis=nil;
    }
} 
```

好像有点矫枉过正。我想知道是否有更好的标准解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:29:14.590

[你可以在这里](http://iphone.galloway.me.uk/iphone-sdktutorials/singleton-classes/)得到一个很好的例子和文档。

您可以只使用`@synchronized(self)`来同步操作。

# jquery - 无法使用 jQuery 从跨域 JSON 服务 URL 检索数据

> ID：10203238
> 
> 赞同：1
> 
> 时间：2012-04-18T05:18:39.397
> 
> 标签：jquery, ajax, json, jsonp

> **可能重复：**
> [JQuery 不会得到 json？](https://stackoverflow.com/questions/5281039/jquery-wont-get-json)

```
<script type="text/javascript">
    var url = "http://local.yahooapis.com/LocalSearchService/V3/localSearch?appid=YahooDemo&query=pizza&zip=10504&results=2&output=json&callback=?";
    jQuery.getJSON(url, function (data) {
        alert(data);
    });
    var url1 = "http://services.odata.org/OData/OData.svc/Products?$format=json&callback=?";
    jQuery.getJSON(url1, function (data) {
        alert(data);
    });
</script> 
```

通过运行上面的代码，我可以看到第一个警报，但看不到第二个。有人可以让我知道这里的错误吗？我收到的错误是 FF 和预期中的“无效标签”；在 IE 8 中

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T05:36:29.650

该请求实际上使用[JSONP](http://en.wikipedia.org/wiki/JSONP)，这是[jQuery 在](http://api.jquery.com/jQuery.getJSON/)检测到 URL 中名为`callback`.

转到 URL [http://services.odata.org/OData/OData.svc/Products?$format=json&callback=xyzaxa](http://services.odata.org/OData/OData.svc/Products?%24format=json&callback=xyzaxa)并注意内容不包含字符串`xyzaxa`，这意味着永远不会从服务调用回调。

要么您使用了错误的 URL，要么 odata 不支持 JSONP

# java - 循环和不变量？

> ID：10203243
> 
> 赞同：0
> 
> 时间：2012-04-18T05:19:22.030
> 
> 标签：java, loops, invariants

我正在尝试交换数组 b 的值并将一个值存储在 k 中，以便后置条件 b [0...h] <= 9 和 b[k+1..] > 9 为真。

到目前为止我有这个：

```
for ( int b = 0; k!= b.length; k = k+1 ) {
    int p = k+1;
    for ( int h= k+1; h != b.length; h= h+1 ) {
       if ( b[h] < b[p] ){ 
           p= h;
       }
    }

    int t = b[h]; 
    b[h]= b[p]; 
    b[p]= t;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:39:59.257

据我了解，您正在尝试做的是获取一个数组`int`，对其进行排序，然后找到索引 where `n > 9`。

实现这一点的最简单方法是`Arrays.sort`首先对数组进行排序，然后一个简单的 for 循环将显示最后一个索引的位置。然后，您可以将数组一分为二，因此第一个数组包含所有值 <= 9，第二个数组包含所有 >9

这是一个例子：

```
public static void main(String[] args) {

    //Test data
    int[] arrayOfInt = {11, 42, 24, 1, 8, 9, 10, 15, 8, 29, 9, 34 };

    //Sort the array
    Arrays.sort(arrayOfInt);

    int index = 0;

    //This will get you the index where the last number is <= 9
    for (int i = 0; i < arrayOfInt.length; i++) {
        if (arrayOfInt[i] <= 9)
            index = i + 1;
    }

    //Now you know that from arrayOfInt[0] -> arrayOfInt[index] will be <= 9
    //If you want to use them seperately, you can just split the array into two
    int[] lessThanOrEqualToNine = Arrays.copyOfRange(arrayOfInt, 0, index);
    int[] greaterThanNine = Arrays.copyOfRange(arrayOfInt, index, arrayOfInt.length);

    System.out.println(Arrays.toString(lessThanOrEqualToNine));
    System.out.println(Arrays.toString(greaterThanNine));

    /* Prints the output:
     *  [1, 8, 8, 9, 9]
     *  [10, 11, 15, 24, 29, 34, 42]
     */
} 
```

# xslt - 使用没有 EXSLT 函数的派生/计算值进行 XSLT 排序

> ID：10203245
> 
> 赞同：3
> 
> 时间：2012-04-18T05:19:36.837
> 
> 标签：xslt, xslt-1.0

我想根据基于子元素的派生值对元素进行排序。派生值不能使用 XPath（ 、 等）计算`sum`，`concat`但可以使用 XSL（`xsl:choose`、`xsl:if`等）计算。

我会使用 EXSLT 功能扩展，但它不可用。环境是 XSLT 1.0、Xalan-C++ 版本 1.10，带有 EXSLT 通用和集合扩展。

**编辑**更改了示例以强调无法使用`xsl:sort`语句中的简单节点/xpath 函数计算我需要分组的派生值。

我的目标是在非活动药物之前列出当前药物，按开始日期降序排列。确定药物是否为最新的逻辑取决于药物是否已取消、尚未过期以及其他一些业务逻辑。

鉴于此 XML：

```
<?xml version="1.0"?>
<medications>
  <medication>
    <name>med1</name>
    <status>canceled</status>
    <startTime>2012-02-01T00:00:00Z</startTime>
    <endTime>2012-12-31T00:00:00Z</endTime>
    <!-- other elements omitted -->
  </medication>
  <medication>
    <name>med2</name>
    <status />
    <startTime>2012-01-01T00:00:00Z</startTime>
    <endTime>2012-01-07T00:00:00Z</endTime>
    <!-- other elements omitted -->
  </medication>
  <medication>
    <name>med3</name>
    <status />
    <startTime>2012-01-01T00:00:00Z</startTime>
    <!-- other element omitted -->
  </medication>
</medications> 
```

样式表将生成一个排序的药物列表，包括示例数据中省略的信息（订购医生、药房位置等）和来自父节点的数据（患者地址、初级保健医生等）。对于此示例，我将生成一个简单的排序列表，显示可以遍历药物节点：

```
<?xml version="1.0" encoding="utf-8"?>
<medications>
  <medication isCurrent="1" name="med3" />
  <medication isCurrent="0" name="med1" />
  <medication isCurrent="0" name="med2" />
</medications> 
```

我能想到的最好方法是将派生值预先计算到 EXSLT 节点集（以及排序所需的其他值），并使用键通过 generate-id 查找药物元素：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:exsl="http://exslt.org/common"
  exclude-result-prefixes="exsl">
  <xsl:output encoding="utf-8" method="xml" indent="yes" />

  <xsl:key name="medications-by-id" match="medication" use="generate-id()" />
  <xsl:variable name="medication-sorter">
    <xsl:for-each select="//medication">
      <item id="{generate-id(.)}">
        <xsl:attribute name="isCurrent">
          <xsl:apply-templates mode="isCurrentMedication" select="." />
        </xsl:attribute>
        <xsl:attribute name="startTime">
          <xsl:value-of select="startTime/text()" />
        </xsl:attribute>
      </item>
    </xsl:for-each>
  </xsl:variable>

  <xsl:template match="medications">
    <!-- hardcoded key lookup works -->
    <hardcoded><xsl:value-of select="key('medications-by-id',generate-id(medication[2]))/name/text()"/></hardcoded>

    <!-- but key lookup from the sort helper does not -->
    <medications>
      <xsl:for-each select="exsl:node-set($medication-sorter)/item">
        <xsl:sort select="@isCurrent" order="descending" />
        <xsl:sort select="@startTime" order="descending" />
        <medication>
          <xsl:attribute name="isCurrent">
            <xsl:value-of select="@isCurrent" />
          </xsl:attribute>
          <xsl:attribute name="name">
            <xsl:value-of select="key('medications-by-id',@id)/name/text()" />
          </xsl:attribute>
        </medication>
      </xsl:for-each>
    </medications>
  </xsl:template>

  <xsl:template mode="isCurrentMedication" match="medication">
    <xsl:choose>
      <xsl:when test="(status/text()='canceled') or (status/text()='discontinued') or (status/text()='inactive')">0</xsl:when>
      <xsl:otherwise>
        <!-- omitted date checking logic not relevent to this question, so just hardcoded -->
        <xsl:choose>
          <xsl:when test="name/text()='med2'">0</xsl:when>
          <xsl:when test="name/text()='med3'">1</xsl:when>
        </xsl:choose>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>
</xsl:stylesheet> 
```

然而，这并没有按预期工作。使用 generate-id(medication[2]) 查找密钥时，节点有效并且名称被输出，但在使用节点集中的 @id 调用时不起作用，即使值看起来完全相同：

```
<?xml version="1.0" encoding="utf-8"?>
<medications>
  <hardcoded>med2</hardcoded>
  <medication isCurrent="1" name="" />
  <medication isCurrent="0" name="" />
  <medication isCurrent="0" name="" />
</medications> 
```

还使用 Xalan for Java 2.7.1 对此进行了测试，结果相同。

我可以通过`copy-of`在 $medication-sorter 节点集中包含药物元素来解决这个问题，但是父上下文丢失了，有时我的样式表需要它。

是否有另一种方法可以对必须使用 a 计算的值进行排序/分组`xsl:template`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:33:19.933

解决方案可能要简单得多：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output encoding="utf-8" method="xml" indent="yes"/>
<xsl:template match="books">
    <xsl:copy>
        <xsl:for-each select="book">
            <xsl:sort select="status" order="descending"/>
            <xsl:sort select="number(count) &gt; 0" order="descending"/>
            <xsl:copy-of select="."/>
        </xsl:for-each>
    </xsl:copy>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:43:28.833

这一切看起来都太复杂了。仅排序而不分组或忽略重复项时，您不需要密钥。
试试下面的方法，它按状态和计数排序，两者都降序排列，以便在 Published 之后出现 Out of Print，并且在每个状态中最后出现零计数。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

    <xsl:template match="/">
        <output>
            <xsl:for-each select="books/book">
                <xsl:sort select="status" order="descending"/>
                <xsl:sort select="count" order="descending"/>
                <xsl:copy-of select="."/>
            </xsl:for-each>
        </output>
    </xsl:template>

</xsl:stylesheet> 
```

结果与您指定的略有不同；要么你对此感到满意，要么我们需要做一些复杂化。

```
<?xml version="1.0" encoding="UTF-8"?>
<output>
    <book>
        <title>Three</title>
        <price>30</price>
        <count>3</count>
        <status>Published</status>
    </book>
    <book>
        <title>One</title>
        <price>10</price>
        <count>1</count>
        <status>Published</status>
    </book>
    <book>
        <title>Zero</title>
        <price>5</price>
        <count>0</count>
        <status>Published</status>
    </book>
    <book>
        <title>Two</title>
        <price/>
        <count>0</count>
        <status>Out of Print</status>
    </book>
</output> 
```

# python - 在 Python 编程中覆盖同名方法

> ID：10203256
> 
> 赞同：-4
> 
> 时间：2012-04-18T05:21:06.337
> 
> 标签：python

> **可能重复：**
> [如何在 Python 中使用方法重载？](https://stackoverflow.com/questions/10202938/how-do-i-use-method-overloading-in-python)

我是 Python 编程新手，我喜欢编写多个同名的方法，但为什么只打印最近调用的方法？

代码如下：

```
class A:
    def mymethod(self):
        print 'first method'
    def mymethod(self):
        print 'second method'
ob = A()
ob.mymethod() 
```

输出为`second method`.

这个 Python 方法调用背后的机制是什么？我可以同时调用两个同名的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T05:31:09.383

在这里讨论：

[Python函数重载](https://stackoverflow.com/questions/6434482/python-function-overloading)

在 Python 中，函数是按名称查找的。参数的类型不是名称的一部分，也没有在任何地方声明。可以使用任何类型的参数调用该函数。

如果你使用“duck typing”来编写你的函数，你通常可以让一个函数完成你需要它完成的所有不同的工作。也经常使用具有默认值的参数，以允许使用不同数量的参数调用函数。

这是一个简单的例子：

```
class A(object):
    def __init__(self, value=0.0):
        self.value = float(value)

a = A()  # a.value == 0.0
b = A(2)  # b.value == 2.0
c = A('3')  # c.value = 3.0
d = A(None)  # raises TypeError because None does not convert to float 
```

在此示例中，我们需要一个浮点值。但是我们不测试参数的类型；我们只是强迫它浮动，如果它有效，我们很高兴。如果类型错误，Python 会为我们抛出异常。

# qt - 按住 Qml MouseArea 移动窗口

> ID：10203260
> 
> 赞同：5
> 
> 时间：2012-04-18T05:21:51.447
> 
> 标签：qt, qml

我想知道如何通过按住 Qt/QML 中的 MouseArea 来移动窗口。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T16:01:21.263

您可以通过以下方式将视图小部件公开给 QML：

```
QmlApplicationViewer viewer;
QDeclarativeContext *context = viewer.rootContext();
context->setContextProperty("viewerWidget", &viewer); 
```

然后修改它的`pos`属性来移动窗口：

```
MouseArea {        
    anchors.fill: parent
    property variant previousPosition        
    onPressed: {
        previousPosition = Qt.point(mouseX, mouseY)
    }
    onPositionChanged: {
        if (pressedButtons == Qt.LeftButton) {
            var dx = mouseX - previousPosition.x
            var dy = mouseY - previousPosition.y
            viewerWidget.pos = Qt.point(viewerWidget.pos.x + dx, 
                                        viewerWidget.pos.y + dy)
        }
    }
} 
```

# ruby-on-rails - 你在 Rails 中使用什么来进行无休止的分页？

> ID：10203262
> 
> 赞同：0
> 
> 时间：2012-04-18T05:22:02.030
> 
> 标签：ruby-on-rails

出于好奇，您在 Rails 中使用什么进行无休止的分页？我查看了有关该主题的 Rails 演员表，但它使用的是旧版本的原型。如果您使用无限分页，请链接您的网站。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T12:04:49.053

嗨，cantbecool，当我们想要获得更好的用户获取数据的体验时，使用无限分页，例如：我们可以使用 will_paginate 在同一页面上获取数据集，而不是单击分页链接并在新页面上显示数据/ kaminari gem 和 jquery。

有一个关于如何实现无尽页面的好博客，希望能回答你的问题。看看

[http://www.idyllic-software.com/blog/endless-page-using-jquery-and-will_paginate/](http://www.idyllic-software.com/blog/endless-page-using-jquery-and-will_paginate/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:50:03.717

有两种流行的宝石

1.  [will_paginate](https://github.com/mislav/will_paginate/wiki)
2.  [上成](https://github.com/amatsuda/kaminari)

我们在不同的应用程序中都使用了这两种方法。

# ip - 解析ip公网地址为127.0.0.1

> ID：10203268
> 
> 赞同：3
> 
> 时间：2012-04-18T05:22:30.663
> 
> 标签：ip, local, public

大家好，

我正在本地测试一个网站，我需要复制生产环境。该网站可在公共 IP 地址上使用（尚无域），我需要使用已在本地设置虚拟主机的本地 IP 地址“覆盖”公共 IP 地址。

重点是，我不能“覆盖”公共访问权限。我正在使用 Windows，并且尝试过使用 hosts 文件、'route' 和 'arp' 命令，但我不认为这些是正确的工具。主机文件只接受域，我可能不够熟练，无法发出正确的路由或 arp 命令。

示例：ping 85.85.82.83 <= NOT A DOMAIN NAME reply 127.0.0.1

因此，请帮我将公共 IP 地址重定向到本地 IP 地址，以便原始公共 IP 地址的简单“ping”指向分配的本地 IP 地址。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T05:35:24.217

如果我正确地抓住了你，你正在寻找一个将 IP 地址解析为本地地址的方法。不是域。在 Windows 中，这可以通过**设置 ip 安全规则**来完成。请参阅我很久以前制作的[这个 scribd 教程。](http://www.scribd.com/doc/39894749/Block-specific-IP-address-in-windows-using-IP-Security)它用于通过将 IP 地址重定向到 localhost 来阻止它。所以事情对你来说是一样的。

如果你想自动化它，你可以使用[netsh](http://technet.microsoft.com/en-us/library/cc725926%28v=ws.10%29.aspx)或[ipseccmd](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/ipsecmd.mspx?mfr=true)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T05:34:07.180

一种选择是为您的本地网卡分配多个 IP 地址。一个是您的本地 LAN，另一个 IP 地址是您的生产服务器。[在创建别名 IP 地址 (Microsoft Windows)](http://www.ssh.com/manuals/guardian-admin/31/proc-alias-windows.html)网站上给出了步骤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T05:28:46.290

主机文件在 Windows 中工作。每天使用它。你必须使用正确的。在我的 PC（64 位 Windows）上，它位于 C:\Windows\System32\drivers\etc\hosts 中。（没有扩展名，例如，如果您有，请不要使用 hosts.sam）。

格式相当简单：在每一行中，从 IP 地址开始，然后是解析到该 IP 地址的主机列表（用空格字符分隔）。

如果您要测试的站点是 www.my.site.com，而您的本地 IP 是 192.168.0.1，只需插入：

```
192.168.0.1 www.my.site.com 
```

但请注意，如果您已经访问过真正的 www.my.site.com，Windows 会将解析的 IP 保存在缓存中。所以你必须刷新缓存，所以你的解析器会忘记以前的 IP。为此，请从 Windows 提示符调用：

```
ipconfig /flushdns 
```

route 和 arp 不会帮助您解决问题，因为它是您要解决的主机名解析。完成修改后，您可以始终在命令提示符下使用简单的 ping 命令进行测试：

```
ping www.my.site.com 
```

它会给你它试图ping的主机的IP。

# xcode4.3 - xcode 4.3.2 在编辑/保存文件时变得无响应

> ID：10203271
> 
> 赞同：0
> 
> 时间：2012-04-18T05:22:50.553
> 
> 标签：xcode4.3

这简直让我发疯。刚刚从 mac 应用商店下载了 Xcode 4.3.2 应用。现在，有时在编辑然后保存文件时，Xcode 会在 5-10 秒内无响应。旋转轮图标持续显示。

当我保存文件时是否有一些后台任务正在进行，可能是一些构建检查或可以关闭的东西或其他东西，有人可以帮我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:47:50.500

我安装的防病毒软件似乎引起了一些问题。关闭它的实时保护对我有用。我在[这个 stackoverflow 问题中找到了类似的提示](https://stackoverflow.com/a/8160064/206613)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T05:30:12.547

是的，它可能正在下载文档和/或进行一些初始索引。

如果您查看活动监视器（类似 iTunes 的工具栏中心的框），您可能会看到正在发生的事情，或者一个很小的数字标记，当您单击它时，会显示在幕后发生的其他事情Xcode。

如果问题持续很长时间（即超过一个小时左右），也可能与[LLVM 提供的 while-typing 解析有关（查看此网页下的“Apple LLVM 编译器”部分）](https://developer.apple.com/technologies/tools/)。这称为“实时问题”，您可以在 Xcode 的常规首选项中将其关闭。

# cocoa-touch - 窗口不旋转？

> ID：10203272
> 
> 赞同：0
> 
> 时间：2012-04-18T05:22:53.253
> 
> 标签：cocoa-touch, ipad, ios5, rotation, xcode4.3

我正在为 iOS 制作一个程序，但我不知道为什么窗口不会旋转。我已将委托方法 shouldAutorotateToInterfaceOrientation 放在所有视图控制器中。该程序相当大，目前有 6 个不同的视图。什么都不会旋转！我制作了一个带有基本按钮和标签的新应用程序，并且可以很好地旋转，我什至没有更改任何代码。显然我在更大的程序中搞砸了。

有没有人有任何想法？

谢谢！

-碎纸机2794

# facebook - 通过 API 获取 Facebook 用户的所有电子邮件

> ID：10203276
> 
> 赞同：2
> 
> 时间：2012-04-18T05:23:18.603
> 
> 标签：facebook, facebook-graph-api

通过 facebook API 访问 facebook 用户的电子邮件时，我只得到他们的主要电子邮件地址。我想获取他们所有的电子邮件地址。对于大多数人来说，主要电子邮件地址是他们不再使用的大学电子邮件地址。这是 Facebook API 描述的截图：[http](http://screencast.com/t/pZT9xQ7AVEX) ://screencast.com/t/pZT9xQ7AVEX 。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:28:40.997

API 不会为您提供不同的电子邮件地址。

主电子邮件是用户选择作为他们想要使用的电子邮件。所以用那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:23:22.947

API 仅提供您所经历的主要电子邮件地址。我不一定会假设“所有主要电子邮件都是不再使用的大学电子邮件”，除非您的细分范围中有非常具体的人口统计。鉴于 Facebook 是如此“粘人”，而且年轻用户通过 FB 而非电子邮件发送消息，您可能需要重新审视您的假设和需求。

最终，访问当前和有效电子邮件的最有效和最合乎道德的方式是发起一些最终用户参与活动以让他们提供它。

# java - Spring 3.X Java 7 线程安全日期/数字格式注入

> ID：10203280
> 
> 赞同：0
> 
> 时间：2012-04-18T05:23:56.027
> 
> 标签：java, multithreading, spring

大家好，任何人都可以帮助我。我目前有一个可能必须在多线程应用程序中使用的服务类，任何人都可以帮助我使用 Spring IOC 使我使用的格式类成为线程安全的。

这是一个代码片段

```
@Configuration
@EnableTransactionManagement(mode=AdviceMode.ASPECTJ)
public class MyConfig
{
    ...
    @Bean
    public DateFormat dateFormatMMddyyyy()
    {
        return new SimpleDateFormat("MM/dd/yyyy");
    }
   ...
}

@Component("myServiceComponent")
public class MyServiceComponent5
{
   @Autowired 
   private DateFormat dateFormatMMddyyyy; //HEY Fix Me!!

   ...

   public void sampleProcess(Date date)
   {

   String formatedDate = dateFormatMMddyyyy.format(date);

   // do usefull stuffn here

   }
}

@Service("MyService")
{
   @Autowired
   private MyServiceComponent5 myServiceComponent5;

   public doMultiThreadProcess(Date date)
   {
      // not sure how to do this yet and probably gona ask on a different thread. =\
      // Currently more concern on how to set up MyServiceComponent5
      ...
      myServiceComponent5.sampleProcess(date);
      ...
   }

} 
```

如果我做错了什么，任何人都可以发表评论。最近我刚刚读到 Number/DateFormat 类不是线程安全的，所以我必须将它们放在方法中或**使用 threadlocal**。谁能帮我修改我的课程，以便我可以使用第二个选项（**弹簧方式**）。

顺便说一句，如果您需要任何澄清或其他信息，请告诉我。对设计的评论也将不胜感激。

请注意，代码只是一个示例，但它描述了我目前正在做的事情。此外，如果这对当前问题有任何影响，这将用于桌面应用程序。

使用的框架将是 Spring 3.1、Java 7 和 hibernate。

最后，提前感谢您，代码片段将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T05:42:57.183

就您的日期格式化需求而言，[JODA](http://joda-time.sourceforge.net/)具有线程安全的[日期/时间格式化程序。](http://joda-time.sourceforge.net/api-release/org/joda/time/format/DateTimeFormat.html)Spring MVC 默认也支持该库：

> 通过这一行配置，将安装数字和日期类型的默认格式化程序，包括对 @NumberFormat 和 @DateTimeFormat 注释的支持。如果类路径中存在 Joda Time，则还安装了对 Joda Time 格式化库的完全支持。

[来源](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/validation.html#format-annotations-api)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T10:51:25.580

```
I was also able to do this using this snippet. It works hopefully this has no side effects.

@Bean()
public ThreadLocal<DateFormat> dateFormatMMddyyyy()
{
    ThreadLocal<DateFormat> threadLocal = new ThreadLocal<DateFormat>()
    {
        @Override
        protected DateFormat initialValue()
        {
            return new SimpleDateFormat("MM/dd/yyyy");
        }
    };

    return threadLocal;
} 
```

# javascript - 在 jqgrid 中实现 inlinenav 的错误

> ID：10203283
> 
> 赞同：0
> 
> 时间：2012-04-18T05:24:16.250
> 
> 标签：javascript, jqgrid-php

我正在将 jqgrid 与 codeigniter 一起使用。

我正在使用以下代码段实现 inlinenav。

这是我的代码：

```
jQuery("#contactlist").jqGrid('navGrid','#contacttoolbar',{view:false,edit:false,add:false,del:false,search: false});
jQuery("#contactlist").jqGrid('inlineNav',"#contacttoolbar"); 
```

先生。justin ethier 建议我更新缩小的 jqgrid.js 文件

我已经这样做了.....但现在它导致我出现另一个错误，如下所示：

`a.type is not a function`

`uncaught exception: CustomError: Error in protected function: )308`

一个解决方案正在引导我走向另一个问题......

帮助pppppp

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T04:57:44.413

$.type 在 1.4.3 版本中被添加到 jquery 中。我遇到了同样的麻烦——我运行的是 1.4.1。请将您的 jquery 更新到至少 1.4.3 并重试。

# android - 手机旋转时强制android像iphone一样调整文本大小

> ID：10203288
> 
> 赞同：0
> 
> 时间：2012-04-18T05:24:30.270
> 
> 标签：android, css, ios

我看到很多请求询问如何在手机旋转到横向模式时阻止 iphone 调整文本大小，我希望这发生在 android 手机上，但就像在 iphone 上一样。我研究的所有内容都指向我使用 -webkit-text-size-adjust: none; 关闭 iphone 上的功能。

当设备像 iphone 一样旋转时，css 中是否有某种东西会强制 android 浏览器实际上调整此文本的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:40:10.423

媒体查询非常适合这种事情。我见过最多的是`min-width`，`max-width`但您也可以`orientation`用作标志，如此处所述：[http ://www.1stwebdesigner.com/css/how-to-use-css3-orientation-media-queries/](http://www.1stwebdesigner.com/css/how-to-use-css3-orientation-media-queries/)

```
/* Portrait */
@media screen and (orientation:portrait) {
    /* Portrait styles */
}
/* Landscape */
@media screen and (orientation:landscape) {
    /* Landscape styles */
} 
```

这将允许您为网站的纵向和横向视图指定不同的字体大小。

# design-patterns - 从数据库更新后如何使用实体框架实体的更新属性更新视图模型

> ID：10203290
> 
> 赞同：0
> 
> 时间：2012-04-18T05:24:35.123
> 
> 标签：design-patterns, entity-framework-4

作为存储库设计模式的一部分，我有以下实现：

```
public void Update(CustomerViewModel entity)
        {
            var updateCustomer = GetCustById(entity.Id);

            AutoMapper.Mapper.CreateMap<CustomerViewModel, Customer>();

            AutoMapper.Mapper.Map(entity, updateCustomer);
            _Repository.Update(updateCustome );

            // need to update the viewmodel entity
            // what is the best way to return the viewmodel entity with the updated property ?
        } 
```

返回具有更新属性的视图模型实体的最佳方法是什么？我可以遍历所有属性并手动更新它们，但这并不理想，因为如果我有 100 种这样的方法，它会违反 DRY（不要重复自己）。

# magento - Magento Cron 作业：日志清理和重新索引

> ID：10203297
> 
> 赞同：2
> 
> 时间：2012-04-18T05:25:08.737
> 
> 标签：magento, cron

如何在 Magento 中设置 cron 作业以进行日志清理和重新索引？我为 cron.php 设置了 cron 作业并运行它，但似乎没有清除日志，因为当我查看表“log_url”时，它的数据与 cron 运行之前表中的数据相同，即使在“cron_sechedule”表有针对时事通讯和其他一些成功消息，但我看不到“日志清理”和“重新索引”成功消息。[在](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/how_to_setup_a_cron_job)Magento 网站上

他们说日志清理和重新索引在代码中被注释掉了，所以我可以在哪个文件中取消注释以设置 cron 作业以进行日志清理和重新索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T05:28:58.143

我不记得特别清楚，但您应该将 cron.sh 或 cron.php 文件添加到您的操作系统 cronjob。

**更新 1**

所以问题不在于 cron 作业本身，而在于日志清理机制。

至于数据库清理，我有以下可能对您有用的片段：

```
    私有函数 cleanLog(){
        $write = Mage::getSingleton('core/resource')->getConnection('core_write');

        $write->query("TRUNCATE log_customer");
        $write->query("TRUNCATE log_quote");
        $write->query("TRUNCATE log_summary");
        $write->query("TRUNCATE log_summary_type");
        $write->query("TRUNCATE log_url");
        $write->query("TRUNCATE log_url_info");
        $write->query("TRUNCATE log_visitor");
        $write->query("TRUNCATE log_visitor_info");
        $write->query("TRUNCATE report_event");

    }

```

# android - Listview 将新项目添加到适配器并进行设置

> ID：10203299
> 
> 赞同：1
> 
> 时间：2012-04-18T05:25:13.050
> 
> 标签：android

我有一个 Listview，在到达列表末尾时，我将向适配器添加更多项目并调用“notifydatasetchanged”。这些项目已正确添加到列表的末尾，但问题是 Listview 滚动回顶部并指向第一项。顺便说一句，我正在使用自定义适配器。我希望列表保留在我所在的位置，而不是一直滚动到顶部。它应该就像一个普通的列表视图，而用户不知道我正在延迟加载项目。请帮忙。我昨天一整天都在为这件事头疼。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:28:53.437

当您获取项目时，您实际上正在再次创建一个新适配器，这将重新加载列表视图。为避免它，只需尝试更新适配器的内容。

# validation - maven pom验证依赖失败

> ID：10203308
> 
> 赞同：4
> 
> 时间：2012-04-18T05:25:58.620
> 
> 标签：validation, jenkins, maven-3, pom.xml

我的应用程序依赖于 pom，并且该 pom 有一些验证错误，这导致我的 jenkins 构建失败（maven3）。验证错误只是该依赖项的构建配置文件之一无效，但我只是使用二进制文件，因此不应该影响我的项目。

有没有办法忽略这个错误或解决方法（除了修改第 3 方 pom）？

编辑：

实际的错误信息是：

[警告] com.jidesoft:jide-oss:jar:2.10.2 的 POM 无效，传递依赖项（如果有）将不可用：为 com.jidesoft:jide-oss 构建有效模型时遇到了 2 个问题：2.10.2

[错误] aqua_ui:ui:jar 的 'dependencies.dependency.systemPath' 必须指定绝对路径，但为 ${basedir}/libs/ui.jar @

[错误] aqua_ui:jrs:jar 的 'dependencies.dependency.systemPath' 必须指定绝对路径，但为 ${basedir}/libs/JavaRuntimeSupport.jar @

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T07:30:11.813

我试过了，没有这样的问题。构建依赖于`com.jidesoft:jide-oss:2.10.2`. 我刚想到的一件事是您正在使用的 Maven 版本。Maven 3 的第一个版本确实是错误的并且会导致许多奇怪的问题。恕我直言，真正（我的意思是真的）有效的第一个版本是 3.0.4。如果您有以前的 Maven 3 版本之一，请尝试升级并判断它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:09:14.350

我不明白为什么这对你有用，在本地。

你的本地机器上是否有 ${basedir}/libs/ui.jar 存在？如果是，这可用于 Jenkins 服务器吗？Jenkins 是否从 SVN/CVS/GIT 获取项目源？

发生错误是因为您的依赖项具有**系统**依赖项，因此 Maven 不会尝试在存储库中获取它，而是在给定位置获取它。

```
<dependency>
        <groupId>aqua_ui</groupId>
        <artifactId>ui</artifactId>
         <version>5.0</version>
         <scope>system</scope>
         <systemPath>${basedir}/libs/ui.jar</systemPath> 
```

# linux - 尝试删除 sendmail 消息

> ID：10203309
> 
> 赞同：0
> 
> 时间：2012-04-18T05:26:09.693
> 
> 标签：linux, shell

我正在尝试从根我的脚本删除 sendmail 消息，该脚本将要删除的邮件消息删除到具有尊重 id 的文件中，但即使从根目录运行它仍然没有删除它。所有它都说权限被拒绝不能删除文件，甚至从根本上

```
#!/usr/bin/ksh
WORKFILE="/tmp/check.mq"
MAILLIST="emailadress"

mailq|grep -B1 -i temporarily |grep -iv deferred |egrep -i   'jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec' |awk -F" " '{print $1}' |awk '{print  substr($0,10,14)}' |tee -a $WORKFILE |awk '{print "*" $1}' |tee -a mail.mq
mailq|grep -B1 -i unknown|egrep -i 'jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec' |awk -F" " '{print $1}' |awk '{print substr($0,10,14)}' |tee -a $WORKFILE |awk '{print "*" $1}' |tee -a mail.mq
mailq|grep -B1 -i lookup |grep -iv deferred |egrep -i 'jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec' |awk -F" " '{print $1}' |awk '{print substr($0,10,14)}' |tee -a $WORKFILE |awk '{print "*" $1}' |tee -a mail.mq

cat mail.mq | while read file; do rm -rf /var/spool/mqueue/$file;done
find . -type f -name "mail.mq" |rm -rf mail.mq 
```

我正在使用此代码记下 id，然后对 id 的最后 5 个数字进行子串化。

我得到的错误是

```
rm: cannot lstat '/var/spool/mqueue/*11343' :Permission denied 
```

我被拒绝删除这些邮件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:50:36.117

你有几个问题：

1.  该`tee`命令附加到一个名为的文件`mailq`，但稍后您尝试读取一个名为 的文件`mailq.mq`，该文件将不存在
2.  从 sendmail 下删除文件`rm`可能会严重混淆它。我使用 postfix，它具有删除排队消息的命令；如果 sendmail 有类似的功能，请改用它。
3.  决赛`find...rm`根本没有使用查找的结果。你不需要这个`find`命令。

# ios - 什么是“扫描工作副本”

> ID：10203312
> 
> 赞同：5
> 
> 时间：2012-04-18T05:26:50.863
> 
> 标签：ios, xcode

我刚刚“升级”到 Lion 和 Xcode 4.3.2，现在它在项目名称下方标题栏中的状态区域中显示“正在扫描工作副本”。它在自动下载 iOS 5.1 后开始这样做。进度条无休止地坐在那里。它在做什么，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:39:25.957

New Lion 的自动保存和版本功能在后台保存每个文件并为字母更改创建版本，因此遵循此功能，新 Xcode 还可以使用以下方式保存项目的版本

1.  快照保存项目的当前状态。
2.  源代码控制存储库。（直接在xcode中使用）
3.  存档将您的产品打包以供分发。

当 xcode 启动时，它会扫描工作副本或将所有已知版本加载到内存中，以便所有版本都可用于编辑/更新等对于 Lion：[遵循此](http://support.apple.com/kb/HT4753)

对于 xcode：[遵循此](http://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/SCM/SCM.html)

# regex - 我如何在公式中搜索并使用 perl 对字符串部分进行一些更改

> ID：10203324
> 
> 赞同：-5
> 
> 时间：2012-04-18T05:28:10.130
> 
> 标签：regex, perl

嗨，我想从公式中提取子字符串，稍后对它们进行一些更改，然后将它们放回去，如下所示：

```
((dfhkuyhu.hkjgd.hjkh + hgdfjg.uyrepo.uyu + hgdfjg.uyrepo.uyu)/(hgdfjg.uyrepo.uyu))*((khuh.jbmxcn.bnb + hgdfjg.uyrepo.uyu)/(jhxzku.kjkj.jh + hgdfjg.uyrepo.uyu)) 
```

我想在每个部分的开头和结尾添加一些东西，如下所示：

```
((Foo!dfhkuyhu.hkjgd.hjkh![hg] + Foo!hgdfjg.uyrepo.uyu![hg] + Foo!hgdfjg.uyrepo.uyu![hg]).[boo]/(Foo!hgdfjg.uyrepo.uyu![hg]).[boo])*((Foo!khuh.jbmxcn.bnb![hg] + Foo!hgdfjg.uyrepo.uyu![hg]).[boo]/(Foo!jhxzku.kjkj.jh![hg] + Foo!hgdfjg.uyrepo.uyu![hg]).[boo]) 
```

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:27:26.110

规则有点不清楚，但似乎你试图用`Foo!`/包围每一个字母数字字符（加上分隔点） `![hg]`，并用 . 替换每个右括号`).[boo]`。正确的？

然后你可以这样做：

```
$subject =~ s/[\w.]+/Foo!$&![hg]/g;
$subject =~ s/\)/).[boo]/g; 
```

**解释：**

`s/abc/def/`意思是“用替换字符串替换任何正则表达式`abc`匹配`def`”，修改原始`$subject`变量。

`[\w.]+`匹配字符串，如`dfhkuyhu.hkjgd.hjkh`. 在替换字符串中，`$&`指的是匹配的文本。该`/g`标志告诉 Perl 查找并替换字符串中的所有匹配项。

`\)`匹配文字括号。

# c# - 我将如何在弹出窗口中呈现 ms 图表

> ID：10203338
> 
> 赞同：0
> 
> 时间：2012-04-18T05:29:17.120
> 
> 标签：c#, handler, mschart, asp.net-charts

我必须在用户列表悬停时在弹出窗口中显示 ms 饼图控件。现在我不明白该怎么做。因为一个人可以快速移动用户并且每个时间图表都应该重绘所以我不认为这是可能的从cs页面。它可以通过处理程序来完成吗？任何想法请给我建议。谢谢。

# java - 如何将服务器会话变量和属性传递给 GWT 引擎？

> ID：10203340
> 
> 赞同：0
> 
> 时间：2012-04-18T05:29:23.827
> 
> 标签：java, gwt, struts2

我想知道我们是否可以将会话属性和参数从 JSP 传递到 GWT 入口点。

就像我将 Struts2 与 GWT 集成一样。

现在，我的问题是，我们可以将会话属性从 JSP 传递到 GWT 入口点吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:04:00.797

我不明白你为什么要传递会话对象，毕竟你想在里面使用它`GWT Servlet`而不是在里面，`GWT UI`对吗？

您可以通过以下方式获取 GWT Servlet 中的会话对象：

```
 HttpServletRequest request = this.getThreadLocalRequest();
  HTTPSession session = request.getSession(); 
```

之后，您可以使用以下方法来获取和设置会话属性：

```
 session.setAttribute("XXX", object);
  session.getAttribute("XXX") 
```

编辑：

我认为没有直接的解决方案，解决方法如下：

在来自`onModuleLoad`GWT 的调用服务器端代码的入口点中，它将有权访问`session`对象。

```
 HttpServletRequest request = this.getThreadLocalRequest();
  HTTPSession session = request.getSession(); 
```

从 session 对象中获取你想要的属性和参数，并以 bean 的形式返回给客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T01:34:39.523

答案是 JSP + GWT Dictionary 类。

使用 JSP（而不是 html 文件）作为宿主文件，在 GWT 加载模块后随时调用 Dictionary 类。

```
<script>
  var info = {js object structure}; // Use Dictionary class to retrieve info.
</script> 
```

[GWT-平台登录+会话管理](https://stackoverflow.com/questions/9065977/gwt-platform-login-session-menagment/9090460#9090460)

[在哪里存储 GWT 中的配置参数？](https://stackoverflow.com/questions/8954823/where-to-strore-config-parameteres-in-gwt/8967095#8967095)

[GWT 中的半动态常数](https://stackoverflow.com/questions/9425310/semi-dynamic-constants-in-gwt/9459462#9459462)

[可以从服务器使用 GWT 属性吗？](https://stackoverflow.com/questions/9270664/can-gwt-properties-be-used-from-the-server/9287612#9287612)

* * *

但是将会话信息传递到入口点可能并不有利。乞求的问题是，当会话到期而 GWT 客户端仍在浏览器上时会发生什么？

我想您可以检查是否会话过时，您可以调用 window.location 来刷新 GWT 客户端。这不是一个好习惯。使用 AJAX 的原因之一是在进行客户端-服务器数据交换时不必说对不起（我的意思是，不必刷新页面）。

您应该通过JSP+Dictionary 方式将各种**静态信息从服务器传递到客户端，但不能用于会话。**

您的架构应该强制在会话到期时重新进行身份验证，并且会话信息应该作为标头携带（如果您使用 REST 或 RequestBuilder）或作为回调响应数据结构的一部分携带（如果使用 RPC）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T06:46:38.080

在我的应用程序中，我在 jsp 中使用了隐藏框：

> `<input type="hidden" id="dir_lat" value="<%= request.getattribute("foo") %>"/>`

然后获取 gwt.application 中的值：

> `String foo = ((InputElement) doc.getElementById("dir_lat")).getValue() ;`

# ios - iOS - 核心数据 - 表格视图滚动到新添加的记录

> ID：10203341
> 
> 赞同：2
> 
> 时间：2012-04-18T05:29:25.030
> 
> 标签：ios, uitableview, core-data, nsfetchedresultscontroller

**概述：**

我有一个 iOS 项目，其中包含以下内容：

*   核心数据（使用`NSFetchedResultsController`）
*   在表格视图中显示数据 ( `UITableView`)

**我想做的事：**

*   当用户添加记录时，我想滚动到新添加的记录。

**我做了什么**

1.  添加新记录时，在方法内部，当类型为插入/更新/移动时`NSFetchedResultsControllerDelegate`，我将索引路径存储在属性中`lastAddedIndexPath`
2.  调用保存后，我滚动到“lastAddedIndexPath”

**代码（NSFetchedResultsControllerDelegate）**

```
- (void)controller:(NSFetchedResultsController *)controller
   didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath
     forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath
{       
    if (!self.suspendAutomaticTrackingOfChangesInManagedObjectContext)
    {
        switch(type)
        {
            case NSFetchedResultsChangeInsert:
                [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
                NSLog(@"going to store insert - scroll");
                self.lastAddedIndexPath = newIndexPath;
                break;

            case NSFetchedResultsChangeDelete:
                [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
                break;

            case NSFetchedResultsChangeUpdate:
                [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
                NSLog(@"going to store update - scroll");
                self.lastAddedIndexPath = newIndexPath;
                break;

            case NSFetchedResultsChangeMove:
                [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
                [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
                NSLog(@"going to store move - scroll");
                self.lastAddedIndexPath = newIndexPath;
                break;
        }
    }
} 
```

**滚动代码**

```
- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
{
    if (self.beganUpdates) //already [self.tableView beginUpdates] invoked
    {
        [self scrollToLastAddedIndexPath];  //contains the logic to scroll
        [self.tableView endUpdates];   
    }
} 
```

**问题**

*   我认为记录是在不同的线程中异步添加到表视图中的。
*   所以即使在保存数据库之后，当我滚动到`lastAddedIndexPath`表中的记录还不存在时。

**问题**

1.  将记录添加到表视图后，如何滚动到新添加的记录路径？
2.  我应该使用通知来了解数据库何时保存吗？
3.  还有其他替代方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T07:44:02.467

您的滚动必须在之后发生，`[self.tableView endUpdates]`因为直到那时新行才添加到表中。所以切换这两个语句：

```
- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller 
{ 
    if (self.beganUpdates) //already [self.tableView beginUpdates] invoked 
    { 
        [self.tableView endUpdates]; 
        [self scrollToLastAddedIndexPath];  //contains the logic to scroll 

    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T05:45:25.537

您应该执行滚动：

```
- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller { 
```

或者，您可以使用 KVO 在添加新记录时收到通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T06:10:57.000

在我的场景中，我需要在表格视图顶部显示最后添加的对象，因此我使用了不同的方法，我使用 NSSortDescriptor 对数组进行排序，然后在每次添加/删除任何记录时重新加载表格视图。像这样

```
NSSortDescriptor * sortDescriptor = [[[NSSortDescriptor alloc] initWithKey:@"date" ascending:NO]autorelease];
NSArray * sortDescriptorArray = [[[NSArray alloc] initWithObjects:sortDescriptor,nil]autorelease];

self.commitsList =  [[self.listItem.itemCommit allObjects] sortedArrayUsingDescriptors:sortDescriptorArray];

[tblView reloadData]; 
```

然后您可以使用与您的数据相关的任何键`initWithKey`并对数组进行排序以解决此问题。在`CellForRowIndex`表格视图的方法中，您可以使用此数组来填充表格视图。

# excel - 使用 VBA 清除即时窗口？

> ID：10203349
> 
> 赞同：71
> 
> 时间：2012-04-18T05:30:30.543
> 
> 标签：excel, vba, immediate-window

有谁知道如何使用 VBA 清除即时窗口？

虽然我总是可以自己手动清除它，但我很好奇是否有办法以编程方式执行此操作。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-20T11:52:01.090

以下是来自[这里的解决方案](http://social.msdn.microsoft.com/Forums/sk/exceldev/thread/da87e63f-676b-4505-adeb-564257a56cfe)

```
Sub stance()
Dim x As Long

For x = 1 To 10    
    Debug.Print x
Next

Debug.Print Now
Application.SendKeys "^g ^a {DEL}"    
End Sub 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-06-16T09:46:33.463

甚至更简单

```
Sub clearDebugConsole()
    For i = 0 To 100
        Debug.Print ""
    Next i
End Sub 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-11-23T07:50:51.003

SendKeys 是直接的，但您可能不喜欢它（例如，如果它关闭，它会打开立即窗口，并移动焦点）。

WinAPI + VBE 的方式非常精细，但您可能不希望授予 VBA 对 VBE 的访问权限（甚至可能是您的公司组策略不允许）。

您可以用空白将其内容*（或其中的一部分......）*清除，而不是清除：

```
Debug.Print String(65535, vbCr) 
```

不幸的是，这仅在插入符号位置位于立即窗口的末尾时才有效（插入字符串，未附加）。如果您只通过 Debug.Print 发布内容并且不以交互方式使用该窗口，这将完成这项工作。如果您积极使用窗口并偶尔导航到内容中，这并没有太大帮助。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2012-04-18T05:43:17.937

要做到我所设想的要困难得多。我在[这里](http://www.excel-answers.com/microsoft/Excel-Programming/31899691/clearing-immediate-window-in-vba-by-code.aspx)找到了keepitcool 的版本，可以避免可怕的`Sendkeys`

从常规模块运行它。

*更新为初始帖子错过了私有函数声明 - 你的复制和粘贴工作真的很糟糕*

```
Private Declare Function GetWindow _
Lib "user32" ( _
ByVal hWnd As Long, _
ByVal wCmd As Long) As Long
Private Declare Function FindWindow _
Lib "user32" Alias "FindWindowA" ( _
ByVal lpClassName As String, _
ByVal lpWindowName As String) As Long
Private Declare Function FindWindowEx _
Lib "user32" Alias "FindWindowExA" _
(ByVal hWnd1 As Long, ByVal hWnd2 As Long, _
ByVal lpsz1 As String, _
ByVal lpsz2 As String) As Long
Private Declare Function GetKeyboardState _
Lib "user32" (pbKeyState As Byte) As Long
Private Declare Function SetKeyboardState _
Lib "user32" (lppbKeyState As Byte) As Long
Private Declare Function PostMessage _
Lib "user32" Alias "PostMessageA" ( _
ByVal hWnd As Long, ByVal wMsg As Long, _
ByVal wParam As Long, ByVal lParam As Long _
) As Long

Private Const WM_KEYDOWN As Long = &H100
Private Const KEYSTATE_KEYDOWN As Long = &H80

Private savState(0 To 255) As Byte

Sub ClearImmediateWindow()
'Adapted  by   keepITcool
'Original from Jamie Collins fka "OneDayWhen"
'http://www.dicks-blog.com/excel/2004/06/clear_the_immed.html

Dim hPane As Long
Dim tmpState(0 To 255) As Byte

hPane = GetImmHandle
If hPane = 0 Then MsgBox "Immediate Window not found."
If hPane < 1 Then Exit Sub

'Save the keyboardstate
GetKeyboardState savState(0)

'Sink the CTRL (note we work with the empty tmpState)
tmpState(vbKeyControl) = KEYSTATE_KEYDOWN
SetKeyboardState tmpState(0)
'Send CTRL+End
PostMessage hPane, WM_KEYDOWN, vbKeyEnd, 0&
'Sink the SHIFT
tmpState(vbKeyShift) = KEYSTATE_KEYDOWN
SetKeyboardState tmpState(0)
'Send CTRLSHIFT+Home and CTRLSHIFT+BackSpace
PostMessage hPane, WM_KEYDOWN, vbKeyHome, 0&
PostMessage hPane, WM_KEYDOWN, vbKeyBack, 0&

'Schedule cleanup code to run
Application.OnTime Now + TimeSerial(0, 0, 0), "DoCleanUp"

End Sub

Sub DoCleanUp()
' Restore keyboard state
SetKeyboardState savState(0)
End Sub

Function GetImmHandle() As Long
'This function finds the Immediate Pane and returns a handle.
'Docked or MDI, Desked or Floating, Visible or Hidden

Dim oWnd As Object, bDock As Boolean, bShow As Boolean
Dim sMain$, sDock$, sPane$
Dim lMain&, lDock&, lPane&

On Error Resume Next
sMain = Application.VBE.MainWindow.Caption
If Err <> 0 Then
MsgBox "No Access to Visual Basic Project"
GetImmHandle = -1
Exit Function
' Excel2003: Registry Editor (Regedit.exe)
'    HKLM\SOFTWARE\Microsoft\Office\11.0\Excel\Security
'    Change or add a DWORD called 'AccessVBOM', set to 1
' Excel2002: Tools/Macro/Security
'    Tab 'Trusted Sources', Check 'Trust access..'
End If

For Each oWnd In Application.VBE.Windows
If oWnd.Type = 5 Then
bShow = oWnd.Visible
sPane = oWnd.Caption
If Not oWnd.LinkedWindowFrame Is Nothing Then
bDock = True
sDock = oWnd.LinkedWindowFrame.Caption
End If
Exit For
End If
Next
lMain = FindWindow("wndclass_desked_gsk", sMain)
If bDock Then
'Docked within the VBE
lPane = FindWindowEx(lMain, 0&, "VbaWindow", sPane)
If lPane = 0 Then
'Floating Pane.. which MAY have it's own frame
lDock = FindWindow("VbFloatingPalette", vbNullString)
lPane = FindWindowEx(lDock, 0&, "VbaWindow", sPane)
While lDock > 0 And lPane = 0
lDock = GetWindow(lDock, 2) 'GW_HWNDNEXT = 2
lPane = FindWindowEx(lDock, 0&, "VbaWindow", sPane)
Wend
End If
ElseIf bShow Then
lDock = FindWindowEx(lMain, 0&, "MDIClient", _
vbNullString)
lDock = FindWindowEx(lDock, 0&, "DockingView", _
vbNullString)
lPane = FindWindowEx(lDock, 0&, "VbaWindow", sPane)
Else
lPane = FindWindowEx(lMain, 0&, "VbaWindow", sPane)
End If

GetImmHandle = lPane

End Function 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-02-07T05:47:38.453

这是一个想法的组合（使用 excel vba 2007 测试）：

' *（这可以代替您日常的调试电话）

```
Public Sub MyDebug(sPrintStr As String, Optional bClear As Boolean = False)
   If bClear = True Then
      Application.SendKeys "^g^{END}", True

      DoEvents '  !!! DoEvents is VERY IMPORTANT here !!!

      Debug.Print String(30, vbCrLf)
   End If

   Debug.Print sPrintStr
End Sub 
```

我不喜欢删除即时内容（害怕不小心删除代码，所以上面是对你们都写的一些代码的破解。

这解决了 Akos Groller 上面写的问题： *“不幸的是，这仅在插入符号位置位于即时窗口**末尾时才有效”***

代码打开即时窗口（或将焦点放在它上面），发送一个 CTRL+END，然后是大量的换行符，因此看不到之前的调试内容。

请注意， **DoEvents 是至关重要**的，否则逻辑将失败（插入符号位置不会及时移动到即时窗口的末尾）。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-04-12T11:42:43.177

如果通过工作表中的按钮触发，标记的答案将不起作用。它打开转到 excel 对话框，因为 CTRL+G 是快捷方式。您必须先在即时窗口上设置焦点。`DoEvent`如果您想`Debug.Print`在清除后立即进行操作，您可能还需要。

```
Application.VBE.Windows("Immediate").SetFocus
Application.SendKeys "^g ^a {DEL}"
DoEvents 
```

为了完整起见，正如@Austin D 注意到的那样：

> 对于那些想知道的人，快捷键是 Ctrl+G（激活立即窗口），然后是 Ctrl+A（选择所有内容），然后是 Del（清除它）。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-05-02T21:15:22.363

我有同样的问题。以下是我在 Microsoft 链接的帮助下解决问题的方法：[https ://msdn.microsoft.com/en-us/library/office/gg278655.aspx](https://msdn.microsoft.com/en-us/library/office/gg278655.aspx)

```
Sub clearOutputWindow()
  Application.SendKeys "^g ^a"
  Application.SendKeys "^g ^x"
End Sub 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-07-04T20:59:52.587

*   没有发送密钥？
*   没有 VBA 可扩展性？
*   没有第 3 方可执行文件？
*   没问题！

# Windows API 解决方案

```
Option Explicit

Private Declare PtrSafe _
            Function FindWindowA Lib "user32" ( _
                            ByVal lpClassName As String, _
                            ByVal lpWindowName As String _
                            ) As LongPtr
Private Declare PtrSafe _
            Function FindWindowExA Lib "user32" ( _
                            ByVal hWnd1 As LongPtr, _
                            ByVal hWnd2 As LongPtr, _
                            ByVal lpsz1 As String, _
                            ByVal lpsz2 As String _
                            ) As LongPtr
Private Declare PtrSafe _
            Function PostMessageA Lib "user32" ( _
                            ByVal hwnd As LongPtr, _
                            ByVal wMsg As Long, _
                            ByVal wParam As LongPtr, _
                            ByVal lParam As LongPtr _
                            ) As Long
Private Declare PtrSafe _
            Sub keybd_event Lib "user32" ( _
                            ByVal bVk As Byte, _
                            ByVal bScan As Byte, _
                            ByVal dwFlags As Long, _
                            ByVal dwExtraInfo As LongPtr)

Private Const WM_ACTIVATE As Long = &H6
Private Const KEYEVENTF_KEYUP = &H2
Private Const VK_CONTROL = &H11

Sub ClearImmediateWindow()

    Dim hwndVBE As LongPtr
    Dim hwndImmediate As LongPtr

    hwndVBE = FindWindowA("wndclass_desked_gsk", vbNullString)
    hwndImmediate = FindWindowExA(hwndVBE, ByVal 0&, "VbaWindow", "Immediate")
    PostMessageA hwndImmediate, WM_ACTIVATE, 1, 0&

    keybd_event VK_CONTROL, 0, 0, 0
    keybd_event vbKeyA, 0, 0, 0
    keybd_event vbKeyA, 0, KEYEVENTF_KEYUP, 0
    keybd_event VK_CONTROL, 0, KEYEVENTF_KEYUP, 0

    keybd_event vbKeyDelete, 0, 0, 0
    keybd_event vbKeyDelete, 0, KEYEVENTF_KEYUP, 0

End Sub 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-03-03T21:11:52.783

经过一些实验，我对mehow的代码做了一些修改，如下所示：

1.  陷阱错误（原始代码由于未设置对“VBE”的引用而失败，为了清楚起见，我也将其更改为 myVBE）
2.  将立即窗口设置为可见（以防万一！）
3.  注释掉该行以将焦点返回到原始窗口，因为正是这一行导致代码窗口内容在发生计时问题的机器上被删除（我在 Win 7 x64 上使用 PowerPoint 2013 x32 验证了这一点）。似乎焦点在 SendKeys 完成之前切换回来，即使 Wait 设置为 True！
4.  更改 SendKeys 上的等待状态，因为我的测试环境似乎没有遵守它。

我还注意到该项目必须信任启用的 VBA 项目对象模型。

```
' DEPENDENCIES
' 1\. Add reference:
' Tools > References > Microsoft Visual Basic for Applications Extensibility 5.3
' 2\. Enable VBA project access:
' Backstage / Options / Trust Centre / Trust Center Settings / Trust access to the VBA project object model

Public Function ClearImmediateWindow()
  On Error GoTo ErrorHandler
  Dim myVBE As VBE
  Dim winImm As VBIDE.Window
  Dim winActive As VBIDE.Window

  Set myVBE = Application.VBE
  Set winActive = myVBE.ActiveWindow
  Set winImm = myVBE.Windows("Immediate")

  ' Make sure the Immediate window is visible
  winImm.Visible = True

  ' Switch the focus to the Immediate window
  winImm.SetFocus

  ' Send the key sequence to select the window contents and delete it:
  ' Ctrl+Home to move cursor to the top then Ctrl+Shift+End to move while
  ' selecting to the end then Delete
  SendKeys "^{Home}", False
  SendKeys "^+{End}", False
  SendKeys "{Del}", False

  ' Return the focus to the user's original window
  ' (comment out next line if your code disappears instead!)
  'winActive.SetFocus

  ' Release object variables memory
  Set myVBE = Nothing
  Set winImm = Nothing
  Set winActive = Nothing

  ' Avoid the error handler and exit this procedure
  Exit Function

ErrorHandler:
   MsgBox "Error " & Err.Number & vbCrLf & vbCrLf & Err.Description, _
      vbCritical + vbOKOnly, "There was an unexpected error."
  Resume Next
End Function 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-12-04T22:44:10.887

为了清理*即时*窗口，我使用（VBA Excel 2016）下一个功能：

```
Private Sub ClrImmediate()
   With Application.VBE.Windows("Immediate")
       .SetFocus
       Application.SendKeys "^g", True
       Application.SendKeys "^a", True
       Application.SendKeys "{DEL}", True
   End With
End Sub 
```

`ClrImmediate()`但是像这样直接调用：

```
Sub ShowCommandBarNames()
    ClrImmediate
 '--   DoEvents    
    Debug.Print "next..."
End Sub 
```

仅当我将断点打开时才有效`Debug.Print`，否则将在执行-NOT`ShowCommandBarNames()` 之前*Debug.Print*之后完成清除。不幸的是，调用 of`DoEvents()`并没有帮助我......而且无论：为*SendKeys设置了**TRUE*或*FALSE*。

 *为了解决这个问题，我使用了接下来的几个电话：

```
Sub ShowCommandBarNames()
 '--    ClrImmediate
    Debug.Print "next..."
End Sub

Sub start_ShowCommandBarNames()
   ClrImmediate
   Application.OnTime Now + TimeSerial(0, 0, 1), "ShowCommandBarNames"
End Sub 
```

在我看来，使用*Application.OnTime*在 VBA IDE 编程中可能非常有用。在这种情况下，它甚至可以使用*TimeSerial(0, 0, **0** )*。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-10-25T14:08:12.900

谢谢 ProfoundlyOblivious，

没有 SendKeys，检查
没有 VBA 可扩展性，检查
没有 3rd Party Executables，检查
一个小问题：

本地化 Office 版本为即时窗口使用另一个标题。在荷兰语中，它被命名为“直接”。
我添加了一行来获取本地化的标题，以防 FindWindowExA 失败。对于同时使用英语和荷兰语版本的 MS-Office 的用户。

+1 为您完成大部分工作！

```
Option Explicit

Private Declare PtrSafe Function FindWindowA Lib "user32" (ByVal lpClassName As String, ByVal lpWindowName As String) As LongPtr
Private Declare PtrSafe Function FindWindowExA Lib "user32" (ByVal hWnd1 As LongPtr, ByVal hWnd2 As LongPtr, ByVal lpsz1 As String, ByVal lpsz2 As String) As LongPtr
Private Declare PtrSafe Function PostMessageA Lib "user32" (ByVal hwnd As LongPtr, ByVal wMsg As Long, ByVal wParam As LongPtr, ByVal lParam As LongPtr) As Long
Private Declare PtrSafe Sub keybd_event Lib "user32" (ByVal bVk As Byte, ByVal bScan As Byte, ByVal dwFlags As Long, ByVal dwExtraInfo As LongPtr)

Private Const WM_ACTIVATE As Long = &H6
Private Const KEYEVENTF_KEYUP = &H2
Private Const VK_CONTROL = &H11

Public Sub ClearImmediateWindow()
    Dim hwndVBE As LongPtr
    Dim hwndImmediate As LongPtr

    hwndVBE = FindWindowA("wndclass_desked_gsk", vbNullString)
    hwndImmediate = FindWindowExA(hwndVBE, ByVal 0&, "VbaWindow", "Immediate") ' English caption
    If hwndImmediate = 0 Then hwndImmediate = FindWindowExA(hwndVBE, ByVal 0&, "VbaWindow", "Direct") ' Dutch caption
    PostMessageA hwndImmediate, WM_ACTIVATE, 1, 0&

    keybd_event VK_CONTROL, 0, 0, 0
    keybd_event vbKeyA, 0, 0, 0
    keybd_event vbKeyA, 0, KEYEVENTF_KEYUP, 0
    keybd_event VK_CONTROL, 0, KEYEVENTF_KEYUP, 0

    keybd_event vbKeyDelete, 0, 0, 0
    keybd_event vbKeyDelete, 0, KEYEVENTF_KEYUP, 0
End Sub 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-11-28T23:48:09.087

我 2021 年 11 月 17 日的回答使用了 vbscript，而且相当复杂。
以下更简单，完全是 VBA。95% 的时间 ClearStop 是最好的解决方案，但是如果您使用 debug.print 来帮助测量长时间运行的程序中的资源消耗，ClearGo 会很有用。

```
Declare Function GetKeyState Lib "user32" (ByVal nVirtKey As Long) As Integer
Sub ClearStop()
    Application.SendKeys "^g^a^{DEL}"
    Stop
End Sub
Sub ClearGo()
    Application.SendKeys "^g^a^{DEL}" & IIf(GetKeyState(&H10) < 0, "", "{F5}")   'Shift key: see https://www.experts-exchange.com/questions/29228246/Vba-subroutines-to-clear-the-IDE-immediate-window-do-not-always-work.html
    Stop
End Sub 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-11-08T18:12:35.227

我赞成永远不要依赖快捷键，因为它可能适用于某些语言，但并非全部适用......这是我的谦虚贡献：

```
Public Sub CLEAR_IMMEDIATE_WINDOW()
'by Fernando Fernandes
'YouTube: Expresso Excel
'Language: Portuguese/Brazil
    Debug.Print VBA.String(200, vbNewLine)
End Sub 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-10-08T19:15:02.927

刚刚签入 Excel 2016，这段代码对我有用：

```
Sub ImmediateClear()
   Application.VBE.Windows("Immediate").SetFocus
   Application.SendKeys "^{END} ^+{HOME}{DEL}"
End Sub 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-03-06T02:13:15.667

如果您碰巧使用 Autohotkey，这是我使用的脚本。

关键命令是`Ctrl+Delete`。它仅在 VBE 处于活动状态时才有效。
按下时，它将清除即时窗口，然后通过 激活代码编辑器`F7`。

我倾向于在编码时立即清除，所以现在我可以点击`Ctrl-Delete`并继续编码。

```
#IfWinActive, ahk_class wndclass_desked_gsk

^Delete:: clearImmediateWindow()

#If

clearImmediateWindow() {
    Send, ^g
    Send, ^a
    Send, {Delete}
    Send, {F7}
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-11-17T12:47:33.630

当从更高级别的子例程调用 ClearImmediate 函数时，上面发布的所有解决方案都存在问题。例如，以下通常会以一个 EMPTY 即时窗口结束！

```
sub HigherLevel
   debug.print "this message should disappear in 1 second"
   call AnyOfAboveSolutions
   debug.print "This message should appear in the immediate window"
End sub 
```

但多年后，我终于找到了一个可行的解决方案。首先将以下内容安装到您的 VBA 项目中。

```
 Option Explicit
Const Source = "c:\users\rdbmdl\"
Declare Function GetCurrentProcessId Lib "kernel32" () As Long
Private Declare Sub Sleep Lib "kernel32" (ByVal dwMilliseconds As Long)

Sub cls() ' also known as ClearScreen and ClearImmediateWindow
' see https://www.experts-exchange.com/questions/29228246/Vba-subroutines-to-clear-the-IDE-immediate-window-do-not-always-work.html

  ' the Cls routine Clears the immediate window during debugging.
  ' To install it you must create c:\users\rdbmdl\Vbaf5.vbs.
  ' if invoked from a runtime environment  ClearScreen will become disabled.

Dim safe As Single, ap As Object
Static Initialized As Boolean, Disabled As Boolean
    If Not Initialized Then
        Initialized = True
        If Dir(Source & "vbaf5.vbs") = "" Then
            MsgBox "Please install VbaF5.vbs"
            Disabled = True
        End If
    End If
    If Disabled Then Exit Sub
    safe = VBA.DateTime.Timer
    Shell Replace("wscript c:\users\rdbMdl\vbaf5.vbs ""%1""", "%1", GetCurrentProcessId), 1
Stop ' in a runtime environment Stop is ignored and ClearScreen gets disabled
      ' the Stop CANNOT be replaced with a Sleep. Things get very weird vba code that calls Cls gets a few bytes deleted.
    If VBA.DateTime.Timer - safe < 0.01 Then
       Disabled = True
    End If
End Sub 
```

然后将以下内容安装到 C:\users\rdbmdl\vbaF5.vbs

```
' see https://www.experts-exchange.com/questions/29228246/Vba-subroutines-to-clear-the-IDE-immediate-window-do-not-always-work.html
Dim objServices, objProcessSet, process, desired
    desired = "^g^a {DEL} {HOME}"
    desired = desired & "{F7}^+{F2}{RIGHT}+{RIGHT}"
    desired = desired & "{F5}"

    Set objShell = wscript.CreateObject("WScript.Shell")
    Set objargsinall = wscript.Arguments'
    Set objServices = GetObject("winmgmts:\\.\root\CIMV2")
    Set objProcessSet = objServices.ExecQuery("SELECT ProcessID FROM Win32_Process WHERE ProcessID =" & objargsinall(0), , 48)

    For Each process In objProcessSet
    objShell.AppActivate (process.ProcessID)
    objShell.SendKeys desired   
    Next
' see https://www.experts-exchange.com/questions/29228246/Vba-subroutines-to-clear-the-IDE-immediate-window-do-not-always-work.html 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2022-01-20T15:44:59.627

*我正在使用这个短代码：*

```
Sub clearDebug()
    SendKeys "^g^a{DEL}"
End Sub 
```

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2016-09-15T02:25:39.050

```
Sub ClearImmediateWindow()
    SendKeys "^{g}", False
    DoEvents
    SendKeys "^{Home}", False
      SendKeys "^+{End}", False
      SendKeys "{Del}", False
        SendKeys "{F7}", False
End Sub 
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2018-10-05T11:47:37.770

我根据上面的所有评论测试了这段代码。似乎完美无缺。评论？

```
Sub ResetImmediate()  
        Debug.Print String(5, "*") & " Hi there mom. " & String(5, "*") & vbTab & "Smile"  
        Application.VBE.Windows("Immediate").SetFocus  
        Application.SendKeys "^g ^a {DEL} {HOME}"  
        DoEvents  
        Debug.Print "Bye Mom!"  
End Sub 
```

以前使用的`Debug.Print String(200, chr(10))`是利用 200 行的 Buffer 溢出限制。不太喜欢这种方法，但它确实有效。*

# ruby - POST json 数据和自定义标头

> ID：10203352
> 
> 赞同：3
> 
> 时间：2012-04-18T05:30:53.127
> 
> 标签：ruby, curl

我有以下 ruby​​ 代码，我正在尝试以与此相同的方式实现`curl`。

```
curl -X POST \
  -H "X-Parse-Application-Id: $APP_ID" \
  -H "X-Parse-REST-API-Key: $KEY" \
  -H "Content-Type: application/json" \
  -d '{"score": 1337, "playerName": "Sean Plott", "cheatMode": false }' \
  https://api.parse.com/1/classes/GameScore 
```

这是红宝石代码：

```
def execute_post
  puts "executing post script.."
  payload ={
    "score" => "1337",
    "playerName" => "Sean Plott", 
    "cheatMode" => "false"

  }.to_json
  headers = {
    'X-Parse-Application-Id' => $APP_ID, 
    'X-Parse-REST-API-KEY' => $KEY,
    'Content-Type' => 'application/json'
  }
  url = "https://" + $DOMAIN + $BASE_URL + $LIST_CLASS
  uri = URI.parse(url)
  puts uri
  puts payload

  puts "***************"
  req = Net::HTTP::Post.new(uri.host, initheader = headers)
  req.body = payload
  response = Net::HTTP.new(uri.host, uri.port).start{|http| http.request(req)}

  puts "Response #{response.code} #{response.message}: #{response.body}"

end 
```

出于某种原因，我遇到了错误。关于出了什么问题的任何想法？

```
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/net/protocol.rb:135:in `sysread': end of file reached (EOFError)
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/net/protocol.rb:135:in `rbuf_fill'
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/timeout.rb:62:in `timeout'
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/timeout.rb:93:in `timeout'
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/net/protocol.rb:134:in `rbuf_fill'
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/net/protocol.rb:116:in `readuntil'
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/net/protocol.rb:126:in `readline'
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/net/http.rb:2024:in `read_status_line'
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/net/http.rb:2013:in `read_new'
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/net/http.rb:1050:in `request'
    from parse_connect.rb:33:in `execute_post'
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/net/http.rb:543:in `start'
    from parse_connect.rb:33:in `execute_post'
    from parse_connect.rb:42 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T02:39:26.653

试试这样：

```
require 'mechanize'
Mechanize.new.post url, data.to_json, headers 
```

如果这不起作用，请运行 fiddler 并像这样尝试：

```
Mechanize.new{|a| a.set_proxy 'localhost', 8888}.post url, data.to_json, headers 
```

然后检查提琴手中的请求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T02:48:54.997

在您的 curl 示例中，您使用的是 HTTPS。

使用 Net::HTTP 时需要专门启用 HTTPS（仅将 https:// 放在 URL 中是不够的）。

```
http =  Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true
response = http.start{|http| http.request(req)} 
```

# asp.net - 不使用 HttpContext 请求获取绝对网站 URL

> ID：10203354
> 
> 赞同：2
> 
> 时间：2012-04-18T05:31:06.013
> 
> 标签：asp.net, iis-7.5

我需要在 Application_Start 事件中访问网站 url。由于上下文中的 HttpRequest 无效，我无法检索 URL。有没有其他方法可以检索应用程序的 URL？

例如，我需要获取[https://somehost/root/](https://somehost/root/)，假设应用程序托管在 IIS 的根目录下。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:35:26.040

尝试 Application_AcquireRequestState：

```
 void Application_AcquireRequestState(object sender, EventArgs e)
  {
      string url = Request.Url.ToString();
  } 
```

# html - 在 Xcode 中找不到头文件

> ID：10203360
> 
> 赞同：0
> 
> 时间：2012-04-18T05:31:38.193
> 
> 标签：html, objective-c, parsing

我正在尝试使用objective-c-html-parser 来解析Xcode 4.3.2 中的html 字符串。以下网址是有关如何配置它的说明。但我仍然收到错误“libxml/HTMLparser.h”文件未找到。有人可以知道如何解决这个问题吗？

Objective-c-html-parser 指令：[https ://github.com/zootreeves/Objective-C-HMTL-Parser](https://github.com/zootreeves/Objective-C-HMTL-Parser)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T04:31:19.553

您需要将其添加`"$(SDKROOT)/usr/include/libxml2"`到您的中`header search paths`，它将解决您的问题！

# mysql - 错误 1054：列不存在……它存在吗？

> ID：10203363
> 
> 赞同：3
> 
> 时间：2012-04-18T05:31:46.430
> 
> 标签：mysql, mysql-error-1054

以下是我的表结构和外键：

```
SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL';

CREATE SCHEMA IF NOT EXISTS `homework9` DEFAULT CHARACTER SET latin1 COLLATE latin1_swedish_ci ;
USE `homework9` ;

-- -----------------------------------------------------
-- Table `homework9`.`employee`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `homework9`.`employee` ;

CREATE  TABLE IF NOT EXISTS `homework9`.`employee` (
  `EmployeeNumber` INT NOT NULL ,
  `FirstName` VARCHAR(15) NULL ,
  `LastName` VARCHAR(15) NULL ,
  `Department` VARCHAR(15) NULL ,
  `Phone` VARCHAR(15) NULL ,
  `Email` VARCHAR(25) NULL ,
  PRIMARY KEY (`EmployeeNumber`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `homework9`.`computer`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `homework9`.`computer` ;

CREATE  TABLE IF NOT EXISTS `homework9`.`computer` (
  `SerialNumber` INT NOT NULL ,
  `Make` VARCHAR(12) NOT NULL ,
  `Model` VARCHAR(24) NOT NULL ,
  `ProcessorType` VARCHAR(24) NULL ,
  `ProcessorSpeed` DECIMAL(3,2) NOT NULL ,
  `MainMemory` VARCHAR(15) NOT NULL ,
  `DiskSize` VARCHAR(15) NOT NULL ,
  PRIMARY KEY (`SerialNumber`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `homework9`.`computer_assignment`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `homework9`.`computer_assignment` ;

CREATE  TABLE IF NOT EXISTS `homework9`.`computer_assignment` (
  `EmployeeNumber` INT NOT NULL ,
  `SerialNumber` INT NOT NULL ,
  `DateAssigned` DATETIME NOT NULL ,
  `DateReassigned` DATETIME NULL ,
  PRIMARY KEY (`EmployeeNumber`, `SerialNumber`) ,
  INDEX `fk_computer_assignment_computer1` (`SerialNumber` ASC) ,
  CONSTRAINT `fk_computer_assignment_employee`
    FOREIGN KEY (`EmployeeNumber` )
    REFERENCES `homework9`.`employee` (`EmployeeNumber` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_computer_assignment_computer1`
    FOREIGN KEY (`SerialNumber` )
    REFERENCES `homework9`.`computer` (`SerialNumber` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS; 
```

我尝试运行的更新导致我遇到的错误...

```
USE homework9;
set sql_safe_updates=0; 

UPDATE employee SET Department = 'marketing' WHERE EmployeeNumber = 9;
UPDATE employee SET phone = '315-999-3344' WHERE LastName = 'rubble';
UPDATE computer SET make = 'Dell', model = 'OptiPlex 980', processortype = 'Intel i3-650',
    processorspeed = 3.20, mainmemory = '4.0 GBytyes', DiskSize = '1.0 TBytes' 
    WHERE SerialNumber = 9871278;
UPDATE computer SET processorspeed = processorspeed + 0.50;
DELETE FROM computer_assignment WHERE EmployeeNumber = 11;
DELETE FROM employee WHERE EmployeeNumber = 11;
DELETE FROM computer_assignment WHERE computer_assignment.EmployeeNumber = employee.EmployeeNumber AND employee.LastName = 'rubble';

set sql_safe_updates=1; 

select * from employee;
select * from computer;
select * from computer_assignment; 
```

导致此错误：where 子句中的未知列employee.EmployeeNumber。

这是怎么回事？任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T05:38:10.573

```
DELETE FROM computer_assignment 
WHERE computer_assignment.EmployeeNumber = employee.EmployeeNumber 
AND employee.LastName = 'rubble'; 
```

您没有`employee`在`FROM`子句中提到表，所以它是未知的。

也许你的意思是

```
DELETE FROM computer_assignment 
WHERE computer_assignment.EmployeeNumber in 
  (select employee.EmployeeNumber from employee WHERE
   employee.LastName = 'rubble') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T05:36:51.657

```
DELETE FROM computer_assignment 
WHERE computer_assignment.EmployeeNumber = employee.EmployeeNumber
  AND employee.LastName = 'rubble' 
```

问题是`employee`在此查询中的任何地方都没有定义。

```
DELETE FROM computer_assignment
INNER JOIN employee ON computer_assignment.EmployeeNumber = employee.EmployeeNumber
WHERE computer_assignment.EmployeeNumber = employee.EmployeeNumber
  AND employee.LastName = 'rubble' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T05:45:55.347

您仅引用 FROM 中的 computer_assignment 表，因此此处不提供员工表。

```
DELETE FROM computer_assignment WHERE computer_assignment.EmployeeNumber = employee.EmployeeNumber AND employee.LastName = 'rubble'; 
```

试试这个：

```
DELETE FROM computer_assignment WHERE computer_assignment.EmployeeNumber IN (SELECT EmployeeNumber FROM employee WHERE LastName = "Rubble") 
```

# ruby-on-rails - 使用 has_one 关联的 Rails 方法中的 NoMethodError

> ID：10203365
> 
> 赞同：1
> 
> 时间：2012-04-18T05:32:01.673
> 
> 标签：ruby-on-rails, associations, models, has-one

这是我的代码：

// 在swimmer.rb（模型）中：

```
 belongs_to :user 
```

// 在 user.rb (model) 中：

```
 has_one :swimmer, :dependent => :destroy
    accepts_nested_attributes_for :swimmer, :allow_destroy => true   
    attr_accessible :swimmer_attributes 
```

// 在游泳者控制器.rb 中：

```
 def profile
    @swimmer = Swimmer.find_by_user_id(current_user)
    @swimmer_nickname = @swimmer.nickname
    @swimmer_gender = @swimmer.gender
    @title = "Swimmer Profile for #{@current_user.email}"
  end 
```

// 在 profile.html.erb 中（在游泳者视图文件夹中）

```
 <% if @swimmer %>
     <h3><%= @title %></h3>
     <p>Nickname: <%= @swimmer_nickname %></p>
     <p>Gender: <%= @swimmer_gender %></p>
   <% else %>
     <h3>No Swimmer Profile for<%= current_user.email %></h3>
   <% end %> 
```

如果游泳者对象的 user_id 与游泳者#controller 方法中的 @swimmer 实例变量匹配，因为有一个登录用户（使用 Devise gem）并且已经为该用户创建了一个游泳者，那么配置文件视图的工作方式为故意的。如果没有，页面会显示错误：

```
 NoMethodError (undefined method `nickname' for nil:NilClass):
     app/controllers/swimmers_controller.rb:66:in `profile' 
```

但由于配置文件视图具有 if/else 条件，我希望缺少与登录用户关联的游泳者对象以强制视图显示 else 内容。显然，“Swimmer.find_by_user_id(current_user)”方法是在 NilClass 中创建一个 nil 对象。我如何得到它以使其不产生任何东西，从而产生 else 条件？

回购位于[https://github.com/drollwit/vst2/tree/ver2](https://github.com/drollwit/vst2/tree/ver2)。这是一个练习，而不是一个真正的项目。这里可能有一个简单的答案，但我想不通（仍在学习 Rails 基础知识）。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:44:28.377

问题不在于视图，而在于您的配置文件方法：

```
def profile
  @swimmer = Swimmer.find_by_user_id(current_user)
  @swimmer_nickname = @swimmer.nickname
  @swimmer_gender = @swimmer.gender
  @title = "Swimmer Profile for #{@current_user.email}"
end 
```

如果找不到游泳者，则 @swimmer 为 nil，并且以下行失败，因为您在 nil 上调用方法“昵称”。

一个简单的修复如下：

```
def profile
  @swimmer = Swimmer.find_by_user_id(current_user)
  @swimmer_nickname = @swimmer.try(:nickname)
  @swimmer_gender = @swimmer.try(:gender)
  @title = "Swimmer Profile for #{@current_user.email}"
end 
```

现在，如果 @swimmer 不存在，@simmwer_nickname 和 @swimmer_gender 将被设置为 nil。请参阅[http://api.rubyonrails.org/classes/NilClass.html#method-i-try](http://api.rubyonrails.org/classes/NilClass.html#method-i-try)。

就个人而言，我不会像这样在控制器中分配这些额外的实例变量。我会将其移至视图或助手。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T07:16:20.640

错误的原因存在于下面的代码行中。

```
@swimmer = Swimmer.find_by_user_id(current_user) 
```

它永远不会根据 user_id 找到 Swimmer。因为

```
find_by_user_id 
```

需要一个 ID。试试

```
@swimmer = Swimmer.find_by_user_id(current_user.id) 
```

您将获得游泳者对象，然后将不会发生错误。

您可以通过以下方式改进查看文件

```
<% if @swimmer %>
 <h3><%= "Swimmer Profile for #{@current_user.email}" %></h3>
 <p>Nickname: <%= @swimmer.nickname %></p>
 <p>Gender: <%= @swimmer.gender %></p>
<% else %>
 <h3>No Swimmer Profile for<%= current_user.email %></h3>
<% end %> 
```

这将减少来自控制器的以下代码行。

```
@swimmer_nickname = @swimmer.nickname
@swimmer_gender = @swimmer.gender
@title = "Swimmer Profile for #{@current_user.email}" 
```

# video - 不错的游戏编程书籍

> ID：10203367
> 
> 赞同：-1
> 
> 时间：2012-04-18T05:32:04.670
> 
> 标签：video

有谁知道任何关于视频游戏编程的好书？我不在乎什么编程语言，但我更喜欢 C++。如果可能的话，我希望它不是特定于 DirectX 或 openGL。如果它解释了 2D 游戏的编程，那就太好了。我也想要 3D 设计书籍的建议。

编辑：通过谷歌搜索，一些人建议“游戏宝石”书籍。有谁知道这些好不好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T13:32:06.877

虽然它可能有点过时了游戏制作者手册。它是免费软件，但它有助于基本概念。

我的大部分游戏都使用 Game Maker 作为框架，它是我遇到过的最有用/最容易使用的工具。

# android - android中的自定义按钮

> ID：10203369
> 
> 赞同：0
> 
> 时间：2012-04-18T05:32:33.983
> 
> 标签：android

我无法在我的 android 应用程序中添加自定义按钮。当我在控制台中运行它时，它一直在 Logcat 中显示以下错误，并强制关闭。有人可以帮助解决这个问题吗？

04-18 10:59:00.785: E/AndroidRuntime(368): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.bsm.rssreader/com.bsm.rssreader.headlines}: android.view.InflateException: Binary XML 文件第 75 行：膨胀类时出错

这是我的 XML 文件，

```
 <?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
         >
        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="match_parent"
            android:layout_height="50dp"
            android:layout_weight="14.08"
            android:scaleType="fitXY"
            android:src="@drawable/logo" />

 <HorizontalScrollView 
       android:id="@+id/horizontalScrollView1" 
       android:layout_width="fill_parent" 
       android:layout_height="wrap_content"
       android:fillViewport="true"
       android:scrollbars="none" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

 </HorizontalScrollView>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="246dp"
            android:layout_weight="26.53" >

          <ListView
        android:id="@+id/listView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:divider="#b5b5b5"
        android:dividerHeight="1dp"
        android:listSelector="@drawable/list_selector" />
        </FrameLayout>

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="30dp" >

            <ImageView
                android:id="@+id/imageView2"
                android:layout_width="match_parent"
                android:layout_height="30dp"
                android:layout_alignParentLeft="true"
                android:layout_alignParentTop="true"
                android:scaleType="fitXY"
                android:src="@drawable/foot" />

            <Button
                android:id="@+id/about"
                android:layout_width="50dp"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_alignParentTop="true"
                android:background="@drawable/aboutbutton" />

            <Button
                android:id="@+id/button1"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="50dp"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:layout_toLeftOf="@+id/about"
                android:background="@drawable/ratebtn" />

        </RelativeLayout>

    </LinearLayout>

</TabHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T05:35:40.867

你有没有从你的 logcat 中检查过这一行？

**第 34 行：04-18 10:59:00.785：E/AndroidRuntime(368)：原因：java.lang.OutOfMemoryError：位图大小超出 VM 预算**

可能是因为 button1 的图像导致内存泄漏的问题。

[这篇文章](https://stackoverflow.com/questions/1949066/java-lang-outofmemoryerror-bitmap-size-exceeds-vm-budget-android)或[这篇文章](https://stackoverflow.com/questions/2928002/outofmemoryerror-bitmap-size-exceeds-vm-budget-android)可以提供帮助

# android - 如何自定义可扩展列表的边框

> ID：10203375
> 
> 赞同：0
> 
> 时间：2012-04-18T05:34:05.883
> 
> 标签：android

我需要在可扩展列表的 ParentList 之间留一些间距，以显示框架布局的背景图像。请任何人都可以帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:19:04.920

尝试在框架布局中使用填充来保持一些间隙......

# android - 如何在像素级操作图像并从图像中提取信息？

> ID：10203380
> 
> 赞同：1
> 
> 时间：2012-04-18T05:34:19.940
> 
> 标签：android

如何在像素级别操作图像。我想通过重新排列其像素来从图像中提取信息。感谢您为解决此问题提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:24:49.170

要从图像中提取信息，您需要以下代码

```
import android.graphics.Color;

    int[] pixels = new int[myBitmap.getHeight()*myBitmap.getWidth()];
    myBitmap.getPixels(pixels, 0, myBitmap.getWidth(), 0, 0, myBitmap.getWidth(), myBitmap.getHeight());
    for (int i=0; i<myBitmap.getWidth()*5; i++)
        pixels[i] = Color.BLUE;
    myBitmap.setPixels(pixels, 0, myBitmap.getWidth(), 0, 0, myBitmap.getWidth(), myBitmap.getHeight()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:12:52.950

将图像加载到位图。然后有类似的功能

```
Bitmap b = ...
int color = b.getPixel(x,y);
b.setPixel(x, y, color); 
```

# testing - 如何将 Sikuli 脚本导出到 java？

> ID：10203381
> 
> 赞同：0
> 
> 时间：2012-04-18T05:34:29.393
> 
> 标签：testing, selenium, automation, automated-tests, sikuli

我是自动化新手，必须使用 Sikuli，你们能告诉我如何在 Java 中导出 Sikuli 脚本吗？是否可以将这些脚本与 Selenium 集成......

提前致谢.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:04:27.327

从这个意义上说，将脚本“导出”到 Java 是不可能的，因为 Sikuli 脚本是用 Python 脚本语言编写的，并且脚本本身是使用 Jython 解释器（Python 语言的 Java 基础实现）运行的。

但是由于基本的 Sikuli 功能是使用 Java 实现的，因此您可以将脚本转录/翻译为 Java 代码，因为 Sikuli 功能在 Python API 级别和 Java API 级别几乎相同。

但是，如果您有更复杂的 Sikuli 脚本，想要从 Java 代码运行，则可以选择：

*   像从命令行一样运行脚本，但在子进程中
*   使用 Sikuli 的 ScriptRunner 运行脚本

# php - 如何将多个 HTML 表单字段作为日期插入单个 MySQL 列

> ID：10203383
> 
> 赞同：0
> 
> 时间：2012-04-18T05:34:35.987
> 
> 标签：php, mysql, forms

### 问题：

我无法找到与我的情况相关的文档或相关答案和已回答的答案。

基本上，我想通过使用多个 html 表单下拉字段来生成准备好插入的 MySQL 就绪日期。

目前我的插入代码使用单个字段作为日期，我在 MySQL 格式的文本字段中手动输入：

```
$sql=
    " INSERT INTO events (e_date, e_time, e_ampm, e_type, e_name) " .
    " VALUES ('{$form_e_date}','{$form_e_time}', '{$form_e_ampm}', '{$form_e_type}','{$form_e_name}')"; 
```

而不是 $form_e_date（我目前使用格式 YYYY-MM-DD 在文本字段中输入），我想使用 3 个单独的表单字段（例如 $month、$day、$year），并从下拉选择框中选择值。

### 问题：

有没有办法连接 3 个变量（$year、$month、$day，在 MySQL 中用“-”表示）代替 $form_e_date，如果是这样，你将如何构造这个语法？

我也愿意以更好的方式来解决这个问题（仍然使用 MySQL/PHP）；我只需要帮助或指导资源。

任何帮助是极大的赞赏！

### 附加信息：

PS当前的语法是

```
VALUES ('{$form_e_date}','{$form_e_time}', ... etc. 
```

代替

```
VALUES ('$_POST[form_e_date]','$_POST[form_e_time]', ... etc. 
```

作为我收到的未定义索引通知的 PHP 修复的一部分。

另外，解决方案

```
$form_e_date= $_POST['year'] . "-" . $_POST['month'] . "-" . $_POST['day']; 
```

对我来说并不可取，因为它会在新的年、月和日变量上导致未定义的索引通知，即使它们是使用一种可以消除未定义索引通知的技术预先定义的，例如：

```
if (array_key_exists("year", $_POST))
                $year = mysql_real_escape_string($_POST["year"]);
            else
                $year = null; 
```

代码#abc（对 JT Smith 的回答发表评论）：

```
$month = $_POST['month'];
$day = $_POST['day'];
$year = $_POST['year'];

$whole_date = array($year, $month, $day);
$mysql_formatted_date = implode("-", $whole_date);

$sql=
" INSERT INTO events (e_date, e_time, e_ampm, e_type, e_name) " .
" VALUES ('{$mysql_formatted_date}','{$form_e_time}', '{$form_e_ampm}', '{$form_e_type}','{$form_e_name}')"; 
```

代码#fgh：

```
<select name="month">
    <option value="01">Jan</option>
<option value="02">Feb</option>
<option value="03">Mar</option>
<option value="04">Apr</option>
<option value="05">May</option>
<option value="06">Jun</option>
<option value="07">Jul</option>
<option value="08">Aug</option>
<option value="09">Sep</option>
<option value="10">Oct</option>
<option value="11">Nov</option>
<option value="12">Dec</option>
</select>

<select name="day">
    <?php
    for ($i = 1; $i <=31; $i++) {
        echo "<option value=\"$i\">$i</option>";
    }
?>
</select>

<select name="year">
    <option value="2012">2012</option>
    <option value="2013">2013</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T05:39:04.183

根据您的要求将它们连接到 php 中，或者您也可以使用 mysql concat 函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T05:40:36.530

为什么需要在 mysql 查询中连接它？为什么不将它连接成一个变量并将该变量（就像您现在所做的那样）用于查询？

```
$new_date = $_POST['year'] . "-" . $_POST['month'] . "-" . $_POST['day'];

$query = " INSERT INTO events (e_date, e_time, e_ampm, e_type, e_name) " .
" VALUES ('{$new_date}','{$form_e_time}', '{$form_e_ampm}', '{$form_e_type}','{$form_e_name}')"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T05:40:40.897

PHP 中的连接运算符是点`.`语法如下所示：

```
$date = $year . '-' . $month . '-' . $day; 
```

无论如何，更好的方法是将日期/时间存储在 datetime 类型的单个 db 字段中。检查[date() 函数](http://php.net/manual/en/function.date.php)和可用格式的文档。

# java - 获取对象的类及其构造函数，Android中的反射

> ID：10203384
> 
> 赞同：0
> 
> 时间：2012-04-18T05:34:57.523
> 
> 标签：java, android, class, object, reflection

假设我有 classA 和 classB(generic)，参考[http://www.exampledepot.com/egs/java.lang.reflect/Constructors.html](http://www.exampledepot.com/egs/java.lang.reflect/Constructors.html)

我将一个自定义对象从classA传递给classB，现在我想要classB中customobject的构造函数并调用它

A类

```
customclass objCustomclass;

classB mClassB;

mClassB.getConstructorAndCall(objCustomclass); 
```

B类

```
public void getConstructorAndCall(Object objCustomclass);

try {
    Object filledObject = objCustomclass.getClass().newInstance();
        // here i need to call  filledObject's contructor
} catch (Exception e) { } 
```

我能够创建对象作为自定义对象的实例，但是构造函数呢？

注意：`getConstructorAndCall()`是一个通用方法，并且该对象的类型未知，这意味着任何类都可以传递其对象。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:44:16.730

好吧，如果构造函数为空，那么我认为您应该运行构造函数。任何更复杂的事情，比如将参数传递给函数，都可以通过以下方式完成：

```
Constructor[] constructors = objCustomClass.getClass().getConstructors()
for (int i = 0; i < constructors.length; i++) {
  Constructor c = constructors[i];
  Class[] paramTypes = c.getParameterTypes();
  Object[] params;
  // do fancy stuff here - it helps if you know what the constructors take beforehand
  Object filledObject = c.newInstance(params);
} 
```

[带参数的构造函数](http://developer.android.com/reference/java/lang/reflect/Constructor.html#newInstance(java.lang.Object...))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T05:42:25.657

来自 java.lang.Class 的 JavaDoc ( [http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#newInstance](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#newInstance) () )：

> 创建由此 Class 对象表示的类的新实例。该类被实例化为一个带有**空****参数列表的****新**表达式。如果尚未初始化该类，则将其初始化。

 ****IE newInstance() 方法总是使用默认构造函数。

大多数时候，我看到人们使用新实例并需要特定的构造函数或签名，这恰好是由于缺乏解决方案设计。您可能需要仔细检查某个模式是否适用于您需要的解决方案。****

# sql-server - 我的参数 SSRS 2008 的动态选项

> ID：10203396
> 
> 赞同：1
> 
> 时间：2012-04-18T05:36:04.543
> 
> 标签：sql-server, ssrs-2008

我想知道，如果我有 10 个参数，当我在报告中使用它们时它们看起来真的很糟糕，因为它们完全隐藏了我的报告。那么有没有什么选项可以让我保留两个参数并放置一个高级搜索链接，当任何人点击它时，就会出现一个单独的浏览器窗口，其余的参数应该出现在其中。当用户选择那些窗口应该关闭的选项然后查询在我的报告中运行并显示我需要的结果时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:42:34.210

您的报告 URL 应如下所示：

```
http://<server_name>/ReportServer/Pages/ReportViewer.aspx?%2f<Folder>%2f<ReportName>&rs:Command=Render 
```

如果您有 10 个参数`par1`, `par2`,...`par10`并在报告 URL 的末尾添加`&par1=10`，您会将值传递给第一个参数，另一个将为空但 SSRS 不会运行报告，因此您的用户可以通知另一个那些，然后运行报告

或者您可以为参数设置默认值并将其设置为内部

如果您使用应用程序来显示报告，您还有另一个选项是在前一个屏幕上获取所有参数并将所有参数传递到报告 URL 添加`&rc:Parameters=false`以隐藏参数或 &rc:toolbar=false 以隐藏所有工具栏

# netty - 从客户端为服务器生成测试负载

> ID：10203400
> 
> 赞同：0
> 
> 时间：2012-04-18T05:36:21.057
> 
> 标签：netty

问题一：

我在我的工作负载生成器客户端中使用计时器将消息流式传输到服务器。使用多个 timertasks 对创建的线程数或 Channel 的共享有什么影响吗？

我想了解这是否是生成负载的首选方法。以这种方式，我可能会遇到其他指数延迟或其他类型的延迟。

```
public class TestClientHandler extends SimpleChannelHandler {

private Timer timer = new HashedWheelTimer();

Channel channel;

public TestClientHandler() {
    timer.newTimeout( new DataStreamer( this ),
                      1000, 
                      TimeUnit.MILLISECONDS );
}

@Override
public void exceptionCaught(ChannelHandlerContext ctx, ExceptionEvent e) {
        e.getCause().printStackTrace();

        org.jboss.netty.channel.Channel ch = e.getChannel();
        ch.close();
}

  @Override
  public void channelConnected( ChannelHandlerContext ctx,
                                ChannelStateEvent e) {

      this.channel = e.getChannel();

      ChannelFuture future = e.getChannel().write( "SOMETHING" );

  } 
```

}

问题2：

如何为不同类型的请求维护不同的渠道？是否有基于优先级的想法？OrderAwareMemoryHandler 是推荐的插入 PriorityBlockingQueue 的方法吗，就像在另一个线程中讨论的那样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:53:25.963

q1：我不确定我是否正确理解了 Q1。只是，我可以说 HashedWeelTimer 是一个单线程定时器任务管理器 -> 你传入的所有任务都由一个线程执行。

q2：我不清楚

# objective-c - 拖放 - 是否可以获取 URL？

> ID：10203402
> 
> 赞同：5
> 
> 时间：2012-04-18T05:36:25.133
> 
> 标签：objective-c, macos, cocoa, drag-and-drop

我实现了一个简单的拖放。主要目的是让用户从浏览器拖放图像。我是否有可能获得从该图像中拖动的 URL？

所以可以说，我在 SO 上，我拖放徽标。有没有办法让我知道这是来自[http://stackoverflow.com](http://stackoverflow.com)？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T07:59:50.670

对于不是链接的图像，以下代码将记录拖动图像的来源 URL。这适用于我在 Safari 和 Firefox 中。

```
@implementation DragView

- (void)awakeFromNib {
    [self registerForDraggedTypes:[NSArray arrayWithObject:NSURLPboardType]];
}

- (NSDragOperation)draggingEntered:(id <NSDraggingInfo>)sender {
    return NSDragOperationCopy;
}

- (BOOL)performDragOperation:(id <NSDraggingInfo>)sender {
    NSPasteboard *pboard;    
    pboard = [sender draggingPasteboard];

    NSLog(@"types: %@", [pboard types]);
    NSLog(@"url: %@", [NSURL URLFromPasteboard:pboard]);

    return YES;
}

@end 
```

如果图像也是链接，则记录的 URL 是该链接的 href。也可以使用扩展属性的 kMDItemWhereFroms 键从文件中获取“从哪里来”URL（如 Finder 的获取信息面板中所示）。

# php - 读取 XML 文件时出错

> ID：10203403
> 
> 赞同：-1
> 
> 时间：2012-04-18T05:36:25.430
> 
> 标签：php, xml, domdocument

我正在使用以下代码...

//定义我们想要写入的文件名和我们想要下载的url

```
 $filename = 'capital_one.xml';
    $url = "http://feeds.perfb.com/index.php/download?OEMAIL=chirag_gir@visitwembley.co.uk&PX=e90daba5ee2c6fd4d0c344fd61911f33&DISPLAYFORMAT=HEAD&REVERSEMAPXML=yes&PRODUCTDB_ID=294";

 //this creates the file "feed download".xml and takes he contents from the URL and stores them into the file
file_put_contents($filename,file_get_contents($url));

//create instance of XMLReader
    $xmlReader = new XMLReader();

//read in xml file
$xmlReader->open($filename);

//loop to read in data
while($xmlReader->read())
{
         //this initialises the xml parser
         $dom = new DOMDocument();
         $domNode = $xmlReader->expand();
         $element = $dom->appendChild($domNode);
         $domString = utf8_encode($dom->saveXML($element));
         $product = new SimpleXMLElement($domString);

         //read in data
         echo $product_code = $product->product_code;

} 
```

我收到以下错误

可捕获的致命错误：传递给 DOMNode::appendChild() 的参数 1 必须是 DOMNode 的实例

你能帮我么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:11:49.390

如果`expand()`不返回 a `DOMNode`，则发生错误并`FALSE`返回。

# asp.net - 如何在没有表格的情况下获取相对于asp.net中App_Data文件夹的路径

> ID：10203405
> 
> 赞同：2
> 
> 时间：2012-04-18T05:36:30.637
> 
> 标签：asp.net

在我的 asp.net Web 应用程序中，我必须读取 App_Data 文件夹中的 somef 文件，但我不知道如何设置路径。

如果在网络表单中，我知道我可以使用：

```
Sever.mapPath("~/App_Data"); 
```

但现在我想在 App_code 中检索 .cs 文件中的路径。

所以那里没有 HttpServer 上下文。

任何的想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-18T06:17:38.470

请改用[HostingEnvironment.MapPath](http://msdn.microsoft.com/en-us/library/system.web.hosting.hostingenvironment.mappath.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T06:55:34.537

在 asp.net 中有 System.IO 命名空间，其中包含许多与文件相关的功能。

您可以在下面的命名空间中获得与路径和文件相关的功能

```
System.IO.Path
System.IO.File 
```

您可以在 .cs 文件中获取完整的文件路径，如下所示

```
string strFullPath = System.IO.Path.GetFullPath(Server.MapPath("~/App_Code/Class1.cs")); 
```

希望这会帮助你...

# php - foreach 数组错误

> ID：10203406
> 
> 赞同：1
> 
> 时间：2012-04-18T05:36:33.447
> 
> 标签：php, mysql

我已经编码

```
foreach($DB->query($query) as $row){
print_r($row); 
```

结果为

```
 stdClass Object ( [follow_date] => 2012-04-17 [status] => 1 [user_id] => 8 ) stdClass Object ( [follow_date] => 2012-04-17 [status] => 2 [user_id] => 9 ) 
```

但是当我打电话时 `print_r($row[follow_date]);`，它给出错误

**致命错误：不能在第 34 行的 /homereports/bespoke_dialing_status.php 中使用 stdClass 类型的对象作为数组**

有人可以告诉你有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T05:39:34.893

用途：`$row->follow_date`访问内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T05:42:12.350

答案在错误中，您试图将[stdClass](https://stackoverflow.com/q/931407/3287)用作数组，这是不可能的。

由于`$row`是[stdClass](https://stackoverflow.com/q/931407/3287)，您需要使用另一种语法来检索日期。

```
$date = $row->follow_date; 
```

那应该会给您想要的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T05:41:20.217

我没有办法检查但我记得`$row->follow_date`在类似的事情上使用过like。

# c# - 重命名 Telerik 报告图例项

> ID：10203410
> 
> 赞同：1
> 
> 时间：2012-04-18T05:36:49.337
> 
> 标签：c#, telerik, reporting, legend

我在 Visual Studio 中使用 Telerik Reporting 2010。我试图重命名饼图中图例的标签。我认为我的问题出在代码中，但我的知识有限，所以我看不出有什么问题。谁能帮我找出问题所在？我得到的错误在底部。

```
namespace Reports
{
using System;
using System.ComponentModel;
using System.Drawing;
using System.Windows.Forms;
using Telerik.Reporting;
using Telerik.Reporting.Drawing;

/// <summary>
/// Summary description for DeliveryStatus___Client.
/// </summary>
public partial class DeliveryStatus___Client : Telerik.Reporting.Report
{
    public DeliveryStatus___Client()
    {
        //
        // Required for telerik Reporting designer support
        //
        InitializeComponent();}

        //
        // TODO: Add any constructor code after InitializeComponent call
        //
    private void chart1_ItemDataBinding(object sender, EventArgs e)
{
        var procChart = ((Telerik.Reporting.Processing.Chart)sender);

        Telerik.Reporting.Charting.LabelItem labelItem1 = new       Telerik.Reporting.Charting.LabelItem();
        Telerik.Reporting.Charting.LabelItem labelItem2 = new   Telerik.Reporting.Charting.LabelItem();

            labelItem1.Marker.Visible = true;
            labelItem1.Name = "LegendItem1";
            labelItem1.TextBlock.Text = procChart.Report.Parameters["Due Beyond"].Value.ToString;
            labelItem2.Marker.Visible = true;
            labelItem2.Name = "LegendItem2";
            labelItem2.TextBlock.Text = procChart.Report.Parameters["Due Monday"].Value.ToString;
            this.chart1.Legend.Items.AddRange(new Telerik.Reporting.Charting.LabelItem[] {
            labelItem1,
            labelItem2});
        this.chart1.Legend.Items.AddRange(new Telerik.Reporting.Charting.LabelItem[] {labelItem1,});
}

     Error  2   Cannot implicitly convert type 'object' to 'string'. An explicit      conversion exists (are you missing a cast?)   C:\Users\wondergoat77\Documents\VS -     Projects\Reports\Reports\DeliveryStatus - Client.cs    34  45  
     Error  3   Type or namespace definition, or end-of-file expected       C:\Users\wondergoat77\Documents\VS - Projects\\Reports\DeliveryStatus - Client.cs   52      1   
      Error 4   Cannot convert method group 'ToString' to non-delegate type     'string'. Did you intend to invoke the method?  C:\Users\wondergoat77\Documents\VS -     Projects\Reports\Reports\DeliveryStatus - Client.cs    34  45  
      Error 5   Cannot convert method group 'ToString' to non-delegate type     'string'. Did you intend to invoke the method?  C:\Users\wondergoat77\Documents\VS -     Projects\Reports\Reports\DeliveryStatus - Client.cs    37  45  

     }
         }
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:16:48.017

您忘记了 ToString 是一种方法，因此您必须调用它（添加括号）：

```
labelItem1.TextBlock.Text = procChart.Report.Parameters["Due Beyond"].Value.ToString();//here
labelItem2.TextBlock.Text = procChart.Report.Parameters["DueMonday"].Value.ToString();//here 
```

# wordpress - 如何将默认小部件添加到自定义动态侧边栏

> ID：10203413
> 
> 赞同：2
> 
> 时间：2012-04-18T05:37:02.213
> 
> 标签：wordpress

我在 WordPress 中使用此代码添加了我的自定义动态侧边栏

```
register_sidebar
(array(
'name' => __( 'My widget' ),
'id' => 'right-sidebar',
'description' => __( 'Widgets in this area will be shown on the right-hand side.' ),
'before_title' => '<h1>',
'after_title' => '</h1>'
)); 
```

现在我可以通过 Dashboard -> Appearance -> Widgets 在 WordPress 管理员中看到这个动态侧边栏。

当我激活主题时，默认情况下，这个动态侧边栏不显示任何内容；要显示小部件（例如最近的帖子、页面、类别），我必须将它们拖到我的小部件动态侧边栏中。

但我希望 My Widget 动态侧边栏默认显示三个 Widget（Recent Posts、Pages、Category），类似于二十一或二十一中的动态侧边栏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T16:39:41.573

这很容易做到，使用[`dynamic_sidebar()`](http://codex.wordpress.org/Function_Reference/dynamic_sidebar)and [`the_widget()`](http://codex.wordpress.org/Function_Reference/the_widget)。

这是用于显示默认内容的构造，如果没有 Widget 被添加到动态侧边栏：

```
<?php
if ( ! dynamic_sidebar( 'My_Widget' ) ) {
    // default content goes here
}
?> 
```

因此，要将特定的*Widget*输出为默认内容，只需调用`the_widget($widget, $instance, $args)`. 例如，要显示[“最近的帖子”小部件](http://codex.wordpress.org/Function_Reference/the_widget#Recent_Posts_widget)：

```
<?php
if ( ! dynamic_sidebar( 'My_Widget' ) ) {
    the_widget( 'WP_Widget_Recent_Posts' );
}
?> 
```

（有关每个小部件的其他用法示例和`$instance`/`$args`值，请参阅链接的 Codex 参考资料。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T08:10:07.480

Well, it is a normal behavior, you just have to set default content for this sidebar in your theme. Take a look at twentyeleven/sidebar.php, you can do the same thing :

```
<?php if ( ! dynamic_sidebar( 'right-sidebar' ) ) : ?>
  Default content
<?php endif; ?> 
```

And don't mistake, a sidebar is not a widget, it is a widget area.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T06:45:29.563

它是可能的，但不是在自动激活方面。您需要在需要小部件（假设侧边栏）侧边栏的地方做的事情是真正的小部件就绪，并且管理员将新的侧边栏小部件弹出到阵容中，事情将自动切换到使用管理员指定的设置。

所以是的，您可以将其作为默认设置。而不是自动激活...

有关更多信息[https://stackoverflow.com/a/3057665/716492](https://stackoverflow.com/a/3057665/716492)

# internet-explorer - IE 8 不渲染 SoundCloud Flash Player

> ID：10203414
> 
> 赞同：2
> 
> 时间：2012-04-18T05:37:10.313
> 
> 标签：internet-explorer, soundcloud

**目标：**使用 SoundCloud (http://developers.soundcloud.com/docs/custom-player) 中的自定义播放器文件创建自定义音频播放器。

**问题：** IE 无法在 IE8（及更低版本）中呈现“备份”Flash 播放器。我想避免一起闪光。播放器位于：[http ://ryanwieseler.com/tpmwordpress](http://ryanwieseler.com/tpmwordpress)

IE 8 由于在 sc-player.js 中使用“addEventListener”而不是“attachEvent”而出现错误。我对 JavaScript 的了解有限，所以这里还有**一个问题**：是否可以通过修改 sc-player.js 并在此线程的答案中找到一个函数来解决这个问题：http: [//goo.gl/bYFge](http://goo.gl/bYFge)？确定浏览器可以使用哪种方法并实现它？sc-player.js 通过 github (https://github.com/soundcloud/soundcloud-custom-player/blob/master/js/sc-player.js)

任何建议都非常感谢。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T22:01:08.793

如果您在 sc-player.js 之前执行此操作，它可能会起作用：

```
if (!soundcloud.addEventListener) {
    soundcloud.addEventListener = function(eventName, eventHandler) {
      this.attachEvent('on' + eventName, eventHandler);
    }
} 
```

# sysadmin - 无法使用 yum 更新，看到错误 PYCURL ERROR 7 - “couldn't connect to host” 替代方案？

> ID：10203416
> 
> 赞同：0
> 
> 时间：2012-04-18T05:37:25.417
> 
> 标签：sysadmin, yum, rhel, rhel5

我正在尝试使用 yum 更新 PHP 模块，但出现错误。

这是我正在尝试和看到的：

```
 yum install php-ldap 
```

结果 ：

```
Loaded plugins: product-id, refresh-packagekit, rhnplugin, security,
          : subscription-manager
Updating certificate-based repositories.
Setting up Install Process
Resolving Dependencies
--> Running transaction check
---> Package php-ldap.x86_64 0:5.3.3-3.el6_2.6 will be installed
--> Finished Dependency Resolution

Dependencies Resolved

================================================================================
 Package       Arch        Version              Repository                 Size
================================================================================
Installing:
 php-ldap      x86_64      5.3.3-3.el6_2.6      rhel-x86_64-server-6       36 k

Transaction Summary
================================================================================
Install       1 Package(s)

Total download size: 36 k
Installed size: 0
Is this ok [y/N]: y
Downloading Packages:

Error Downloading Packages:
  php-ldap-5.3.3-3.el6_2.6.x86_64: failed to retrieve getPackage/php-ldap-5.3.3-          3.el6_2.6.x86_64.rpm from rhel-x86_64-server-6
error was [Errno 14] PYCURL ERROR 7 - "couldn't connect to host" 
```

我今晚真的需要安装这个模块。我的选择是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:47:46.467

问题是我们的网络管理员阻止了从那台机器访问互联网。Yum 只是超时了。

# jquery - 在 aspx 表单中使用 jquery 禁用 gridview 控件

> ID：10203419
> 
> 赞同：0
> 
> 时间：2012-04-18T05:37:43.317
> 
> 标签：jquery, asp.net

我有一个表单，其中有一个 CheckBox 和一个 gridview。当我取消选中复选框时，我希望禁用 Gridview 中的控件。这是我的gridview aspx：

```
 <div id="gridVersion" runat="server">
                                <ac:GridViewWithPager ID="gdvwAllowedVersion" runat="server" UseCustomPager="True"
                                    AllowPaging="True" AutoGenerateColumns="False" Width="50%">
                                    <Columns>
                                        <asp:TemplateField ItemStyle-CssClass="centerdata">
                                            <ItemTemplate>
                                                <asp:RadioButton ID="rdblSelectedVersionList" runat="server" AutoPostBack="true" Checked='<%#Eval("IsSelected") %>'
                                                    EnableViewState="true" OnCheckedChanged="rdblSelectedVersionList_CheckedChanged" />
                                            </ItemTemplate>
                                            <HeaderStyle HorizontalAlign="Center" Width="2%"></HeaderStyle>
                                        </asp:TemplateField>
                                        <asp:TemplateField HeaderText="IDEAlliance Version" HeaderStyle-Width="11%" HeaderStyle-HorizontalAlign="Left">
                                            <ItemTemplate>
                                                <asp:Label ID="lblVersion" runat="server" Text='<%# Eval("IdeAllianceVersion") %>' />
                                            </ItemTemplate>
                                            <HeaderStyle HorizontalAlign="Left" Width="11%"></HeaderStyle>
                                        </asp:TemplateField>
                                        <asp:TemplateField HeaderText="Restrict Import Of" ItemStyle-CssClass="centerdata"
                                            HeaderStyle-Width="2%" ItemStyle-HorizontalAlign="Center" ItemStyle-Width="2%">
                                            <ItemTemplate>
                                                <asp:CheckBox ID="chkCheckRestrictImport" runat="server" Checked='<%# Eval("RestrictedForImport")%>' />
                                            </ItemTemplate>
                                            <HeaderStyle HorizontalAlign="Center" Width="2%"></HeaderStyle>
                                            <ItemStyle HorizontalAlign="Center" Width="2%"></ItemStyle>
                                        </asp:TemplateField>
                                        <asp:TemplateField HeaderText="Restrict Upgrade To" ItemStyle-CssClass="centerdata"
                                            HeaderStyle-Width="2%" ItemStyle-HorizontalAlign="Left" ItemStyle-Width="2%">
                                            <ItemTemplate>
                                                <asp:CheckBox ID="chkCheckRestrictUpgrade" runat="server" Checked='<%# Eval("RestrictedForUpgrade")%>' />
                                            </ItemTemplate>
                                            <HeaderStyle HorizontalAlign="Center" Width="2%"></HeaderStyle>
                                            <ItemStyle HorizontalAlign="Center" Width="2%"></ItemStyle>
                                        </asp:TemplateField>
                                    </Columns>
                                </ac:GridViewWithPager>
                            </div> 
```

我的 CheckBox 控件是这样的：

```
<asp:CheckBox ID="chkActivateSettings" runat="server" Text="Activate Restriction Settings.">
                                    </asp:CheckBox> 
```

我已经编写了一个隐藏和显示此网格的 Jquery 代码。但现在我想要的是在取消选中复选框后禁用此网格中的控制。所以我想修改这段代码：

```
$(document).ready(function () {

    if ($('#<%=chkActivateSettings.ClientID %>').is(":checked")) {
        //show the hidden div
        $('#<%=gridVersion.ClientID %>').show("fast");
    }
    else {
        //otherwise, hide it
        $('#<%=gridVersion.ClientID %>').hide("fast");
    }
    // Add onclick handler to checkbox w/id checkme
    $('#<%=chkActivateSettings.ClientID %>').click(function () {

        // If checked
        if ($('#<%=chkActivateSettings.ClientID %>').is(":checked")) {
            //show the hidden div
            $('#<%=gridVersion.ClientID %>').Ena("fast");
        }
        else {
            //otherwise, hide it
            $('#<%=gridVersion.ClientID %>').hide("fast");
        }
    });

}); 
```

期待您平时的合作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:33:49.690

尝试这个：

1) 添加 Enabled="True" 到 gridview 标记：

```
<ac:GridViewWithPager ID="gdvwAllowedVersion" runat="server" Enabled="True" UseCustomPager="True" AllowPaging="True" AutoGenerateColumns="False" Width="50%"> 
```

2）使用Jquery的DOM操作方法`attr(key, value)`来启用/禁用gridview：

```
$(document).ready(function () {

    // Add onclick handler to checkbox w/id checkme
    $('#<%=chkActivateSettings.ClientID %>').click(function () {

        // If checked
        if ($('#<%=chkActivateSettings.ClientID %>').is(":checked")) {
            //show the hidden div
            $('#<%=gdvwAllowedVersion.ClientID %>').attr("disabled", false);
        }
        else {
            //otherwise, hide it
            $('#<%=gdvwAllowedVersion.ClientID %>').attr("disabled", true);
        }
    });

}); 
```

# php - 一个简单的php逻辑

> ID：10203421
> 
> 赞同：0
> 
> 时间：2012-04-18T05:37:56.687
> 
> 标签：php

刚刚在一个网站上看到了这个源代码，但是不知道是什么意思，谁能告诉我是什么意思？太感谢了。

```
private function buildCache()
{
    !empty($this->cache_list) && $this->cache->loadCache($this->cache_list);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T05:41:31.397

这是很难支持的糟糕代码的例子。

该`!empty($this->cache_list) && $this->cache->loadCache($this->cache_list);`语句等价于`$dummy = !empty($this->cache_list) && $this->cache->loadCache($this->cache_list);`。

有惰性求值之类的东西，因此`A && B`,`B`将只求值为`A`真（否则`A && B`是故意为假，无需求值`B`）。基本上`$x = a() && b()`是一样的

```
$x = true;
if(!a()) {
    $x = false;
} else {
    $x = b();
} 
```

因此，我们可以将原始语句扩展为

```
$dummy = true;
if(empty($this->cache_list)) {
    $dummy = false;
} else {
    $dummy = $this->cache->loadCache($this->cache_list);
} 
```

其中，记住我们不需要`$dummy`变量，与

```
if(!empty($this->cache_list)) {
    $this->cache->loadCache($this->cache_list);
} 
```

尽管此代码比原始代码长 2 行，但它更易于理解和维护。您应该编写类似于此最终版本的代码，并避免编写类似于原始单行的任何内容。

您可以自己看到：虽然您很难说出原始单行中发生了什么（如此之难，以至于您不得不在 SO 上提出问题），但很容易看到发生了什么最终版本：如果 the`cache_list`不为空，我们将调用作为参数`loadCache`传递`cache_list`给它（否则，如果 the为空，则调用将空值作为参数传递给它`cache_list`可能毫无意义）。`loadCache`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T05:41:21.310

这意味着 if`$this->cache_list`不为空并且`$this->cache->loadCache()`函数返回 true

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T05:43:11.130

我想这是一个捷径：

```
private function buildCache()
{
    if( ! empty($this->cache_list)){
        $this->cache->loadCache($this->cache_list);
    }
} 
```

如果有一个'cache_list'，它会加载它。您必须查看类或框架文档以获取有关这些操作的更多信息。

# java - JPanel 中奇怪的上边距，在 JLabel 中添加了图像

> ID：10203422
> 
> 赞同：0
> 
> 时间：2012-04-18T05:38:06.383
> 
> 标签：java, image, swing, jlabel, jai

我将一些图像添加到`JPanel`. 因此，我将单个图像添加到 a `JLabel`as an`ImageIcon`并将其添加到 main `JPanel`。虽然我将边界 (setBounds) 设置为图像大小，但在下图所示的图像顶部有几个像素的边距。

[图片 http://w752749.open.ge.tt/1/files/64dsvTG/0/blob/x675](http://w752749.open.ge.tt/1/files/64dsvTG/0/blob/x675)

我还尝试将图像添加为`DisplayJai()`，但没有成功（使用`DisplayJai`，图像也被以一种奇怪的方式裁剪）。

代码的重要部分是

```
 JPanel srcJPanel = new JPanel();
    srcJPanel.setBounds(posW, posH, width, height);
    srcJPanel.setBorder(new LineBorder(Color.GREEN.darker(), 2));

    Image image = newImage.getScaledImg().getAsBufferedImage();
    JLabel l = new JLabel(new ImageIcon(image));
    l.setBorder(new LineBorder(Color.RED.darker(), 2));
    srcJPanel.add(l, BorderLayout.CENTER);

    MainPanel.add(srcJPanel);
    this.validate(); 
```

谁能帮我解决这个问题？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:11:29.723

仅当 MainPanel 上有“null”布局时才应使用 setBounds 方法，否则每次验证时，您的边界都将重置为默认布局边界。要设置“null”布局 - 只需将 null 传递给 MainPanel 的 setLayout 方法。

在大多数情况下，也不需要使用“null”布局。您可以简单地使用现有布局或编写自己的布局，以避免使用“空”布局时可能遇到的问题。

无论如何，您提供的代码不足以查看实际问题 - 最好发布[SSCCE](http://sscce.org/)。

# c - 最大的 3 个数字代码让我感到困惑

> ID：10203425
> 
> 赞同：0
> 
> 时间：2012-04-18T05:38:13.263
> 
> 标签：c, algorithm, if-statement, numbers

我写了一段代码，试图判断三个用户输入的数字中哪一个是最大的。但是，我无法理解为什么我的代码会中断 input`3, 1, 2`并适用于 input `55, 54, 56`。

我的代码：

```
main()
{
    int a,b,c;
    printf("enter three numbers");
    scanf("%d %d %d",&a,&b,&c);
    if(a>b && a>c)
        printf("%d is greatest",a);
    if(b>a && b>c)
        printf("%d is greatest",b);
    else printf("%d is greatest",c);
    getch();
} 
```

我在做什么导致这个错误，我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:44:03.710

你错过了“else if”，这是肯定的。

```
main()
{
    int a,b,c;
    printf("enter three numbers: ");
    scanf("%d %d %d",&a,&b,&c);

    if(a>b && a>c)
        printf("%d is greatest",a);
    else if(b>a && b>c)
        printf("%d is greatest",b);
    else 
        printf("%d is greatest",c);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T05:45:27.400

您需要`else`在该行之前添加一个`if(b>a && b>c)`。

IE

```
if(b>a && b>c) 
```

应该

```
else if(b>a && b>c) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T05:58:49.407

人们在这里说的是真的，但为了最佳实践，我会减少 ifs 中的检查：

```
main()
{
    int a,b,c;
    printf("enter three numbers: ");
    scanf("%d %d %d",&a,&b,&c);

    if(a>=b) //it's not b.
    {
        if(a>=c)
        {
            printf("%d is greatest",a);
        }
        else
        {
            printf("%d is greatest",c);
        }
    }
    else // here you know that b > a, then it's not a.
    {
        if(b>=c)
        {
            printf("%d is greatest",b);
        }
        else
        {
            printf("%d is greatest",c);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T06:43:42.913

试试这个

**健康）状况？exp1：exp2；**

评估为

**如果*条件*为真则返回*exp1*否则返回*exp2***

```
int main(){

    int a,b,c;
    printf("enter three numbers");
    scanf("%d %d %d",&a,&b,&c);

    int d = (a >= b)? a: b;
    d = (d >= c)? d: c;

    printf("%d is greatest", d);

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T05:45:08.480

你的第二个 if 语句应该是 else if

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T06:11:25.837

只需在您的代码中添加一个简单的 else if 语句，它应该可以正常工作，如下所示：

主要的（） {

```
 int a,b,c;

    printf("enter three numbers");

    scanf("%d %d %d",&a,&b,&c);

    if(a>b && a>c)

    printf("%d is greatest\n",a);

    else if(b>a && b>c)

    printf("%d is greatest\n",b);

    else printf("%d is greatest\n",c);

    //getch(); 
```

}

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-18T06:48:40.137

你为什么不试试这个。它更整洁。您的代码的问题是您缺少一个可以与 if 一起放置的 else。

```
main() {

    int a,b,c;

    printf("enter three numbers");

    scanf("%d %d %d",&a,&b,&c);

    if(a>b && a>c)

       printf("%d is greatest\n",a);

    else if(b>c)

      printf("%d is greatest\n",b);

    else printf("%d is greatest\n",c);

    //getch();
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-20T22:56:51.353

```
#define MAX(a,b) (((a)>=(b))?(a):(b))
#define MAX3(a,b,c) MAX(MAX(a,b),c) 
```

# apache - htaccess 重写规则失败

> ID：10203428
> 
> 赞同：0
> 
> 时间：2012-04-18T05:38:43.870
> 
> 标签：apache, .htaccess

我正在尝试将未`http://www` 写入的 url 重定向到完整的 url/域..我也尝试将所有字母小写..但我有一个不起作用的错误..请帮助：

```
#RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
#RewriteCond %{REQUEST_URI} [A-Z]
#RewriteMap  lc int:tolower
#RewriteRule ^(.*)$ http://%1/$1 [R=301,L]
#RewriteRule (.*) ${lc:$1} [R=301,L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T05:43:44.383

我认为你走错路了。尝试这个：

```
RewriteCond %{HTTP_HOST} ^example.com [NC]    
RewriteRule ^(.*)$ http://www.example.com/$1 [R=301,L] 
```

# html - Safari 中非常滞后的 HTML5 视频

> ID：10203429
> 
> 赞同：6
> 
> 时间：2012-04-18T05:38:45.493
> 
> 标签：html, video, safari, mp4

我在试图找出导致 HTML5 视频在 Safari 中加载/播放速度极慢的原因时遇到了一些麻烦。我已经在 Chrome、Firefox、IE 上测试了相同的以下代码（与它使用闪存无关）并且加载/播放时间几乎是即时的。但在 Safari 上，我需要等待整整一分钟才能开始播放。我曾尝试删除视频的“自动缓冲”参数，但没有任何区别。有任何想法吗？

```
<video id="video-window" autoplay="autoplay" autobuffer="autobuffer">
    <source src="testvideo.mp4" type='video/mp4' />
    <source src="testvideo.webm" type='video/webm' />
    <source src="testvideo.ogv" type='video/ogg; codecs="theora, vorbis"' />
    <object type="application/x-shockwave-flash" data="player.swf" width="640" height="480">
        <param name="allowfullscreen" value="true">
        <param name="allowscriptaccess" value="always">
        <param name="autoplay" value="true">
        <param name="flashvars" value="testvideo.mp4">
        <!--[if IE]><param name="movie" value="player.swf"><![endif]-->
        <p>Your browser can’t play HTML5 video.</p>
    </object>
</video> 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2016-01-11T13:58:21.437

您需要在编码时使用`Handbrake`并检查该选项。`Web optimized`我不知道为什么，但这大大减少了`Safari`延迟。仍然没有其他浏览器那么快，但要好得多。

# android - 在android框架中显示谷歌地图中的多个位置时出错

> ID：10203432
> 
> 赞同：1
> 
> 时间：2012-04-18T05:39:12.030
> 
> 标签：android, cordova, cross-platform, android-maps

大家好，我正在开发一个 android phonegap 应用程序，我必须在 android 模拟器的 Google 地图中显示多个位置，我正在尝试显示的示例代码

[http://docs.phonegap.com/en/1.6.0/cordova_geolocation_geolocation.md.html#geolocation.getCurrentPosition](http://docs.phonegap.com/en/1.6.0/cordova_geolocation_geolocation.md.html#geolocation.getCurrentPosition)

获取当前位置。但它不显示当前位置。任何人都可以指导我吗？

提前感谢图沙尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T05:55:25.533

您需要在设备上检查您的应用程序。将其部署在您的设备上并启动 GPS，它将直接显示当前位置。模拟器不会显示当前位置，直到您使用 DDMS 工具提供它，这是检查设备中地图的最佳方式。

# ios - 关于 MPMoviePlayer 控件样式

> ID：10203433
> 
> 赞同：-1
> 
> 时间：2012-04-18T05:39:12.333
> 
> 标签：ios, ipad, mpmovieplayercontroller

哪种风格的 MPMovie 控件有 DONE 按钮？

我想在玩的时候退出电影。

MPMovieControlStyleEmbedded 没有 [完成按钮]。

我必须制作一个自定义控制栏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:15:38.927

`MPMovieControlStyleFullscreen`如果您需要完成按钮，您可以使用：

来自[苹果文档](http://developer.apple.com/library/ios/documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html#//apple_ref/c/tdef/MPMovieControlStyle)：

> MPMovieControlStyle全屏
> 
> 显示全屏播放控件。控件包括开始/暂停按钮、滑动条、正向和反向搜索按钮、用于在全屏和嵌入式显示模式之间切换的按钮、用于切换纵横比填充模式的按钮和完成按钮。点击完成按钮会暂停视频并退出全屏模式。

# mongodb - MongoDB——大量文档

> ID：10203435
> 
> 赞同：1
> 
> 时间：2012-04-18T05:39:28.690
> 
> 标签：mongodb

这与我的[最后一个问题有关](https://stackoverflow.com/questions/10191077/mongodb-large-number-of-databases)。

我们有一个应用程序，我们在其中为每个用户存储大量数据。由于数据的性质，之前我们决定为每个用户创建一个新数据库。这将需要一个很大的数字。数据库（可能数百万） - 正如有人[在评论中指出的那样](https://stackoverflow.com/questions/10191077/mongodb-large-number-of-databases#comment13082493_10191077)，这表明设计错误。

所以我们改变了设计，现在我们正在考虑将每个用户的全部信息存储在一个集合中。这意味着一个集合完全映射到一个用户。由于每个数据库有 12,000 个可用的集合，我们可以在每个数据库中存储 12,000 个用户（这个限制可以增加）。

但是，现在我的问题是 - 是否有任何限制。集合可以拥有的文档数。由于我们需要为每个用户存储数据的方式，我们预计会有一个巨大的（在极端情况下为数千万）没有。每个文件的文件。这对 MongoDB 和设计来说可以吗？

编辑

感谢您的回答。我想那么每个集合使用大量文档是可以的。

该应用程序是一个专门的库存控制系统。每个用户都有一个很大的编号。与他们相关的小信息。每条信息都有一个类别和该类别下的一些相关内容。此外，没有两个集合需要查看彼此的数据——因此不需要涉及多个集合的索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T05:56:57.607

要调整您可以拥有的集合/索引的数量（~24k 是限制——~12k 是他们所说的集合，因为默认情况下您有 _id 索引，但请记住，如果您在集合上有更多索引，也将使用命名空间），您可以在启动 mongod 时使用 --nssize 选项。

在一个集合中有数十亿个文档的很多实现（我敢肯定有几个有数万亿个），所以“数千万”应该没问题。有一些数字（例如返回的计数）具有 64 位的约束，因此在您点击 2^64 个文档后，您可能会发现一些问题。

您要查看什么样的查询和更新负载？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T05:56:46.570

你的设计仍然没有多大意义。为什么将每个用户存储在单独的集合中？

您对数据有哪些索引？如果您按某个字段进行索引，该字段的内容在所有用户中都是通用的，那么您将通过使用一个索引的单个集合来显着节省总索引大小。

就性能而言，索引大小通常不是总数据库大小的限制因素。

为什么每个用户有这么多文档？它们有多大？

Craigslist 在 MongoDB 中放置了超过 2 亿个文档，因此如果您有硬件支持它并且索引效率不低，那么这应该不是问题。

如果您在此处发布更多架构，您可能会得到更好的建议。

# css - IE9 中的 HTML5 视频在其两侧显示黑色边框

> ID：10203437
> 
> 赞同：7
> 
> 时间：2012-04-18T05:39:34.953
> 
> 标签：css, html

我在我的网站中使用 HTML5 视频标签。该视频在所有浏览器中都能完美播放，但在 IE9 中显示黑色边框（黑色扩展名）。就像通常视频播放器在播放器尺寸大于视频尺寸时会在其两侧显示一些黑色扩展一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:40:35.670

这是我们使用的解决方案。

对于视频，我们默认显示支持 CDN 存储的 HTML5。我们也有 Flash 的后备方案，然后非 Flash 方案的后备方案。所以它首先检查 HTML5，然后 flash 失败，然后没有非 flash 支持的内容，表明一些关于用户升级他们的 Fred Flintstones 机器的消息，我们还提供了一个替代方案，这样他们就可以搬出 BedRock！

# 代码

```
<style type="text/css">
.videobox{position:relative;width:300px;500px}
#video_box_id_css, .video_box_class{border:0px !important}
/* BACKGROUND SHOULD BE PAGE BACKGROUND */
.left{position:absolute;width:3px;height:500px;left:1px;z-index:10;background:#fff}
.right{position:absolute;width:3px;height:500px;right:1px;z-index:10;background:#fff}
</style>

<div class="videobox">

    <video id="video_box_id_css" class="video_box_class" autoplay loop width="300" height="500">
        <source src="http://video.cdn.com/xxxxxxxxxx/704_black_VP8.webm" type='video/webm'/>
        <source src="http://video.cdn.com/xxxxxxxxxx/704_black_libtheora.ogv" type='video/ogg'/>
        <source src="http://video.cdn.com/xxxxxxxxxx/704_black_x264.mp4" type='video/mp4'/>
        <!--
                ALTERNATIVE CONTENT LIKE SWF
                VIDEOS FOR NON HTML5 BROWSER
        //-->
    </video>

    <div class="left"></div>
    <div class="right"></div>

</div> 
```

# 代码信息

我们的代码在上面（删除了闪存，因此更具可读性）。需要注意的一点是我们添加了一个左右 div 列，该列越过视频黑色边框。如果需要，您可以调整这些，甚至添加底部和顶部。

# 照片

![在此处输入图像描述](../Images/77913be2a596d89d1e514a684272c54b.png)

绿色边框实际上是不透明的白色 div，因此您可以坐下效果。它可能很老套，但它是我们找到的最佳解决方案。

# 最后

结果要好得多，如下所示：

![在此处输入图像描述](../Images/5d00fd00ec6abe0bafc5132d79edb82c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:00:36.313

我以前遇到过这个问题，通常问题出在视频本身。当您对视频进行编码时，请尽量使设置与您将在标签中使用的设置相匹配。它不应该成为您的障碍，一旦您仔细检查视频，您应该会看到差异。

# haskell - Haskell：尝试并行`atomicModifyIORef`实现

> ID：10203446
> 
> 赞同：3
> 
> 时间：2012-04-18T05:40:42.897
> 
> 标签：haskell, concurrency, ioref

据我了解，对`IORef`s 的修改非常快，它们所涉及的只是更新一个 thunk 指针。当然，读者（即想要在他们的网页上看到价值的人）将需要花时间来评估这些 thunk（如果作者没有回读结果，这可能会增加）。

我认为最好开始`IORef`并行地实际评估修改 thunk，因为在许多情况下，它们可能无论如何都必须在某个时候进行评估（显然，这将破坏无限的数据结构）。

因此，我编写了以下函数，其签名类似于`atomicModifyIORef`：

```
atomicModifyIORefPar :: (NFData a) => IORef a -> (a -> (a, b)) -> IO b
atomicModifyIORefPar ioref f =
  let 
    g olddata = 
      let (newdata, result) = f olddata in (newdata, (result, newdata))
  in do
    (result, newdata) <- atomicModifyIORef ioref g
    force newdata `par` return result 
```

这似乎有效（[测试代码here](http://pastebin.com/zVeWsKUM)）。我在这里做错了什么吗？还是有更好的方法来做到这一点？

* * *

**编辑：第二次尝试**

受以下[卡尔回答的](https://stackoverflow.com/a/10213089/525980)启发。我们实际上存储`force newdata`到`IORef`. 这和反正是一样`newdata`的，但是显示了我们想要`force newdata`稍后保留的运行时，所以它不会垃圾收集火花。

```
atomicModifyIORefPar :: (NFData a) => IORef a -> (a -> (a, b)) -> IO b
atomicModifyIORefPar ioref f =
  let 
    g olddata = 
      let 
        (newdata, result) = f olddata
        newdata_forced = force newdata
      in 
        (newdata_forced, (result, newdata_forced))
  in do
    (result, newdata_forced) <- atomicModifyIORef ioref g
    newdata_forced `par` return result 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T15:47:08.993

这可能会也可能不会起作用，具体取决于 GHC 的版本。火花池与 GC 的交互在历史上一直是可变的。在某些版本中，表达式在返回`force newdata`后没有被范围内的任何东西引用这一事实`atomicModifyIORefPar`意味着它很可能在`par`ever创建的火花被转换之前被垃圾收集，这意味着火花也将被收集。

其他版本的 GHC 将火花池视为 GC 分析的根源，但这也存在问题。我不记得当前状态是什么，但我怀疑火花池不算作 GC 根。它引发的问题（当返回的表达式不引用并行计算的表达式时失去并行性）比将火花池视为 GC 根（保留不需要的内存）所产生的问题要好。

* * *

**编辑 - 第二次尝试回答**

由于您给出的原因，这个新的实现看起来是正确的。并行计算的表达式也可以从 GC 根中访问。

# magento - 需要在magento后端添加客户中添加上传文件字段

> ID：10203450
> 
> 赞同：0
> 
> 时间：2012-04-18T05:41:07.170
> 
> 标签：magento

我需要在 magento db 中提取文件，因为我在 Mage/Adminhtml/Block/Customer/Edit/Tab/Account.php 中使用以下代码

```
$fieldset->addField('customer_entity.Upload_Logo_Cst', 'File', array(
            'label' => Mage::helper('customer')->__('Upload Logo'),
            'name'  => 'uploadlogo',
            'id'    => 'uploadlogo',

        )); 
```

它在后端很好，但还需要上传的文件应该在 db 中（在 customer_entity 表中创建了一个名称为 Upload_Logo_Cst 的字段）--仍然失败--任何想法，请与我分享。

我从最后一天开始等待。任何评论将不胜感激

谢谢你

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-19T11:12:04.630

[http://www.excellencemagentoblog.com/customer-registration-fields-magento1-6](http://www.excellencemagentoblog.com/customer-registration-fields-magento1-6)

# backbone.js - 主干 - 获取模型，设置属性（修改），然后保存模型，它应该更新但发送 POST 请求

> ID：10203452
> 
> 赞同：0
> 
> 时间：2012-04-18T05:41:17.160
> 
> 标签：backbone.js

我创建了具有 2 类用户 admin,user 的 mywebsite。所以，我创建了 3pages mainpag.html, admin.html,user.html。并为它们中的每一个单独的模型、视图、集合、routers.js 文件。因此，登录后，当我发送到具有不同模型的单独 html 页面时，我无法自动获取用户模型。所以我确实喜欢这样：

首先，我对服务器进行了ajax调用，询问_id（会话中的用户名，所以我可以获得id）

从 id 中，我通过 model.fetch() 获取了模型，然后我得到了具有所有属性的用户模型。

然后在 fetch 的成功回调中，我做了 model.save({weight : "somevalue"}) 。根据我的说法，它应该正确更新，因为模型已经可用，该属性权重也可以使用一些旧值，但它正在发送 POST 请求，当我尝试 model.isNew() 时，它也返回了 true 。我哪里错了？我怎样才能更新我的模型？如果需要，我会发布更多详细信息。

更多细节 ：

如果我删除该保存方法，那么我将在模型中获得正确的属性。

如果我不删除该保存方法，则成功和错误回调也将作为模型中的属性出现。

代码 ：

```
 addWeight : (e)->
    arr=new Array()
    arr['_id']=app._id
    console.log "asdasd"
    console.log arr
    console.log arr['_id']
    @user_model =new UserModel(arr)
    @user_model.fetch({
      success : (model,res,options) =>
        console.log model
        console.log res
        arr=new Array()
        arr['_id']=e.target.id
        #arr['action']='weight' #means , update weight
        #@user_model.setArr(arr)  
        #@user_model.set({weight : arr['_id']}) 
        console.log "new  : "+@user_model.isNew()
        @user_model.save({weight : e.target.id})
        #@user_model.save({
        #  success : (model,res,options) =>
        #    console.log "model updated: "+JSON.stringify(model)
        #    console.log "Res : "+JSON.stringify(res)
        #  error : (model,res,options) =>
        #    console.log "Error : "+JSON.stringify(res)
        #})

      error : (model,res,options) =>
        console.log "Error "  

    }) 
```

上面的代码是用coffeescript编写的，所以即使你不懂coffeescript，也不要着急，你可以很容易理解，那些#的意思是注释。这里我们使用缩进而不是大括号。

还有一个疑问，模型的 url 必须根据需求动态更改，对吗？实现这一目标的最佳方法是什么？我这样做：

我正在填充“数组”，其中包含应该出现在 url 中的必填字段。在模型的 init func 中，我使用 @arr=arr,thenin url 的函数，我像这样检查。

```
 url : -> 
     if @arr['id'] 
     "/user/#{@id}" 
```

我的方法是正确的，还是有更好的方法来动态设置 url 的 . 或者我可以像这样直接设置网址：

```
 @user_model.setUrl "/someurl/someid"  //this setUrl method is available in model's definition
    @user_model.fetch() or save() or watever that needs url 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T06:19:54.803

只是一种预感，但您提到您调用`model.fetch()`以检索该`_id`字段。请务必改为返回一个`id`字段`_id`（注意下划线）。

`model.isNew()`对返回的调用`true`表明该`id`属性从未从`model.fetch()`调用中设置。

我期待对您的代码进行进一步的解释......查看您的代码：

```
/* The model needs an 'id' attribute in order to marked as not new */ 
@user_model = new UserModel(id: arr['_id']) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T06:07:40.580

其实如果你打电话

```
model.set({weight: "somevalue"}); 
```

它将更新模型中的值，但不会发送 POST 请求

```
model.save(attribute); 
```

正如您可能知道的那样，实际上调用 Backbone.sync。

编辑 ：

你可能想要设置

```
m = Backbone.Model.extend({
    idAttribute: '_id'
}); 
```

到每个模型，因为 isNew 方法实际上检查模型是否具有 id 属性

关于这一点，你可以在这里看到 .set 在这里没有调用backbone.sync：http: [//jsfiddle.net/5M9HH/1/](http://jsfiddle.net/5M9HH/1/)

# gwt - 当我在 Eclipse 中将 PlayN 核心代码编译为 HTML 时，我在哪里可以找到 JS/HTML 文件？

> ID：10203455
> 
> 赞同：0
> 
> 时间：2012-04-18T05:41:29.447
> 
> 标签：gwt, playn

我想获取这些文件并将它们上传到一个公共托管的站点。

这是我按照 Eclipse 输出中列出的路径找到的文档树：

```
/home/.../playndev/html/target/playndev-html-0.0.1-SNAPSHOT/playndev
├── clear.cache.gif
├── F23CD74BBFAF29D08D2B82AA57A90407.cache.html
├── gwt-voices.swf
├── hosted.html
├── images
│   └── bg.png
└── playndev.nocache.js 
```

我希望能够将根`playndev`目录移动到另一个公共服务器文件夹并独立运行我的脚本，但是当我将它们移动到`/var/www/playndev`我的机器上时，`F23CD...cache.html`文件或`hosted.html`加载都没有。

我误解了文档布局还是更基本的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:25:19.500

只要主机页面具有 nocache.js 文件的正确位置，您可以在主机页面的脚本标记中验证，更改 GWT 生成文件的位置应该没有任何问题。[有关更多信息](https://developers.google.com/web-toolkit/doc/latest/FAQ_DebuggingAndCompiling#How_do_I_change_the_location_of_my_cache/nocache_HTML_files?)，请参阅此链接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T10:17:46.137

GWT 只生成一个脚本（一组脚本和资源），您负责提供一个*HTML 主机页面*来加载生成的`playndev/playndev.nocache.js`脚本。

您应该将该 HTML 页面放在您的项目中`src/main/webapp`，它会被 Maven 复制到该`target/playndev-html-0.0.1-SNAPSHOT`文件夹​​中。然后，您可以将该文件夹的全部内容复制到`/var/www`（或子文件夹）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T01:54:49.263

感谢[Ganesh](https://stackoverflow.com/a/10206528/1093087)和[Thomas](https://stackoverflow.com/a/10207355/1093087)的有益回复。应用他们的建议，我刚刚`playndev.html`在我的站点目录中添加了一个包含以下代码的文件（这类似于 GWT 自动生成的内容）：

```
<!DOCTYPE html>
<html>
  <head>
    <title>PlaynDev</title>
  </head>
  <body bgcolor="white">
    <h2>PlaynDev HTML</h2>
    <script src="playndev.nocache.js"></script>
  </body>
</html> 
```

更新的目录树：

```
/var/www/playndev/
├── clear.cache.gif
├── F23CD74BBFAF29D08D2B82AA57A90407.cache.html
├── gwt-voices.swf
├── hosted.html
├── images
│   └── bg.png
├── playdev.html        <--- added host page
└── playndev.nocache.js 
```

在我的机器上，我访问[http://localhost/playndev/playndev.html的页面](http://localhost/playndev/playndev.html)

# jaxb - JAXB - 从 XML 文档创建动态对象

> ID：10203462
> 
> 赞同：1
> 
> 时间：2012-04-18T05:42:00.313
> 
> 标签：jaxb

我有供用户发送请求的 XML 文件列表。只有在运行时我才知道 JAXB 将创建什么类型的对象。例如，如果用户发送请求，例如

```
<books>
<name>Java</name>
</books> 
```

然后我想创建一个 Book 对象。如果用户发送请求，例如

```
<Customer>
<id>1</id>
</Customer> 
```

然后我想创建一个客户对象。但是当我使用 JAXB 解组 XML 时，我需要指定对象类型，例如

```
Person person= (Person) jaxbUnmarshaller.unmarshal(file); 
```

无论如何这是动态创建这些对象吗？

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:09:40.990

如果没有显式强制转换，下面的代码`object`可以保存 XML 文件内容的实例`Book`或`Person`基于 XML 文件的内容。

```
JAXBContext jc = JAXBContext.newInstance(Book.class, Person.class);
Unmarshaller unmarshaller = jc.createUnmarshaller();
Object object = unmarshaller.unmarshal(file) ; 
```

# ios - 如何在 ios SDK 中将语音转换为文本

> ID：10203464
> 
> 赞同：2
> 
> 时间：2012-04-18T05:42:17.293
> 
> 标签：ios

我正在进行项目，它的要求是将人声转换为文本，但我听说在 ios 5.1 中他们添加了这个新功能。

任何人都可以通过一个小例子帮助我如何将这个新功能集成到我的应用程序中。

提前致谢。萨罗杰。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T09:44:54.013

您无需执行任何操作即可将其集成到您的应用程序中 - 用户点击的任何 UITextField 或 UITextView 都会调出键盘，并且在空格键的左侧有一个麦克风图标。用户点击它，说话，然后再次点击。语音到文本是由 Apple 的服务器完成的，因此需要几秒钟，如果连接速度较慢，可能会更长。发生这种情况时，文本字段中将显示三个紫色圆圈，表示正在发生语音转文本。然后将这些替换为从 Apple 返回的文本。请注意，如果您没有网络连接（例如 wifi 关闭、飞行模式或没有可用的移动信号），则该按钮将从键盘上移除。所以请注意，您在离线时无法访问文本转语音。

# iphone - 我可以更快地提出请求吗？（脸书图 api）

> ID：10203474
> 
> 赞同：2
> 
> 时间：2012-04-18T05:42:51.993
> 
> 标签：iphone, ios, facebook, facebook-graph-api, ios5

我制作了以下代码来获取我的异性朋友的信息。
首先，我发送了获取所有朋友 ID 的请求。我再次发送请求以获取朋友的信息（姓名、照片等）。
但我有 350 个朋友，我发送了 350 个请求。1分钟真的很慢。
我可以让这个过程更快吗？

```
- (void)request:(FBRequest *)request didLoad:(id)result
{
if (request == requestFriends) {
    NSMutableArray *tempKeys = [NSMutableArray array];

    for (NSDictionary *dic in [result objectForKey:@"data"]) {
        [tempKeys addObject:[dic objectForKey:@"id"]];
    }

    NSMutableDictionary *params = [NSMutableDictionary dictionary];

    if ([self.myGender isEqualToString:@"male"]) {
        params = [NSMutableDictionary dictionaryWithObjectsAndKeys:@"id,name,gender,age,location", @"field", nil];
    } else if ([self.myGender isEqualToString:@"female"]) {
        params =[NSMutableDictionary dictionaryWithObjectsAndKeys:@"id,name,age,gender,work,school", @"field", nil];
    }

    for (NSString *key in tempKeys) {
        [requestArray addObject: [delegate.facebook requestWithGraphPath:key andParams:params andDelegate:self]];
    }

    i = tempKeys.count;
} else if (request == self.myPicRequest) { //고화질 프로필 사진 받아오는 부분
    NSArray *arr = [result objectForKey:@"data"];
    for (NSDictionary *result in arr) {
        if([[result objectForKey:@"type"]isEqualToString:@"profile"]) {
            profileRequest = [delegate.facebook requestWithGraphPath:[result objectForKey:@"cover_photo"] andDelegate:self]; //프로필의 아이디로 다시 리퀘스트
        }
    }
} else if (request == self.profileRequest) {
    NSURL *url = [NSURL URLWithString:[[[result objectForKey:@"images"] objectAtIndex:3] objectForKey:@"source"]];
    UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:url]];
    CGRect rect = CGRectMake(0, 60, 360, 360); //중간부분을 크롭
    [self.candidatePicArray addObject:[self imageByCropping:image toRect:rect]];
    NSLog(@"이미지들어간다");
} else {         
    for (FBRequest *req in requestArray) {
        if (request == req) {
            if (![[result objectForKey:@"gender"]isEqual:myGender]) {
                [candidateIdArray addObject:[result objectForKey:@"id"]];
                [candidateNameArray addObject:[result objectForKey:@"name"]];

                myPicRequest = [delegate.facebook requestWithGraphPath:[NSString stringWithFormat:@"%@/albums", [result objectForKey:@"id"]] andDelegate:self];

                if ([result objectForKey:@"birth"]) {
                [candidateAgeArray addObject:[result objectForKey:@"birth"]];
                }

                if ([result objectForKey:@"Location"]) {
                [candidateLocationArray addObject:[[result objectForKey:@"Location"] objectForKey:@"name"]]; 
                }

                if ([[result objectForKey:@"work"] objectAtIndex:0]) {
                [candidateWorkArray addObject:[[[[result objectForKey:@"work"] objectAtIndex:0] objectForKey:@"employer"] objectForKey:@"name"]];
                }
                NSLog(@"girl!");
            }
            j++;
//                NSLog(@"candidateNameArray : %@", [result objectForKey:@"name"]);
        }
    }
}

NSLog(@"i = %d, j = %d", i , j);
[progressView setProgress:(float)(j/i) animated:YES]; 

if(i == j) {
    [self performSegueWithIdentifier:@"SEGUE_START" sender:nil];
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:59:08.190

You don't have to send a request for every friend, you can do it all at once.

Try making the request like:

```
https://graph.facebook.com?ids=iduser1,iduser2,iduser3,iduser4&fields=email,gender,age,name 
```

This way is a lot faster. Regards

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T05:47:29.170

在另一个关于 SO 的问题中有一些关于批处理请求的线索：

[使用 Facebook Graph API 和 PHP 进行批量调用](https://stackoverflow.com/questions/4107587/batch-calls-with-facebook-graph-api-php)

虽然它使用 php，但您可能会得到一些线索。

# vb.net - 字符串到双数组

> ID：10203482
> 
> 赞同：0
> 
> 时间：2012-04-18T05:43:43.010
> 
> 标签：vb.net, arrays, string, double, paramarray

我需要接受这个字符串：

```
Dim tmpTry As String = "10, 20, 30, 40, 50, 52, 20, 20, 10, 35, 3, 8, 47, 7, 2, 5, 55, 8, 0, 0, 6, 55, 0, 2, 12, 0, 0, 21, 14, 0, 3" 
```

并将其转换为双数组：

```
Dim arrNumOfVisits As Double() = New Double(tmpTry) {} 
```

我该怎么做呢？

仅供参考 arrNumOfVisits 进入**ParamArray System.Collections.IEnumerable()**

大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:09:24.247

```
Dim arrString As String() = tmpTry.Split(New Char() {" "C})
Dim arrNumOfVisits As Double() = New Double(arrString.Length) {}
Dim i As Integer = 0
While i < arrString.Length
    arrNumOfVisits(i) = Double.Parse(arrString(i))
    i += 1
End While 
```

上面的代码可以解决问题，在此使用 regEx 将是矫枉过正。

尽量学习基本的 RegEx 操作，这里是我最喜欢的备忘单： [http ://regexlib.com/CheatSheet.aspx?AspxAutoDetectCookieSupport=1](http://regexlib.com/CheatSheet.aspx?AspxAutoDetectCookieSupport=1)
[http://www.cheatography.com/davechild/cheat-sheets/常用表达/](http://www.cheatography.com/davechild/cheat-sheets/regular-expressions/)

# facebook - fql 多查询

> ID：10203484
> 
> 赞同：0
> 
> 时间：2012-04-18T05:43:55.607
> 
> 标签：facebook, facebook-graph-api, facebook-fql, fql.multiquery

`FB.api(
{
method: 'fql.query',
query: 'select uid,name from user where uid in (select uid2 from friend where uid1 ='+me.id+') AND current_location='+me.location.name
},function(data) { alert(data);` 

`}`

我正在尝试根据当前用户位置获取朋友。但是此查询不起作用？有没有办法把它写成一个查询？我需要循环所有数据以检查当前位置，但检查它需要时间。所以我正在寻找单个查询来获取数据？有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:55:26.597

这只是一个想法，首先您的应用程序需要`user_location`并`friends_location`作为权限。

你为什么不把你的查询修改成这样

```
FB.api(
{
   method: 'fql.query',
   query: 'select uid,name,current_location from user where uid in (select uid2 from friend where uid1 ='+me.id+')
   },function(data) { alert(data);
} 
```

这个想法是获取用户和用户朋友的 current_location，然后进行过滤。

希望这可以帮助

# java - java中的字符串到字节，反之亦然

> ID：10203495
> 
> 赞同：0
> 
> 时间：2012-04-18T05:44:54.597
> 
> 标签：java, string, byte

我正在将 byte[] 数组转换为 string 。然后将字符串转换回 byte[] 数组。然后检查两个数组是否相等 - 我知道它们不相等：

```
 byte[] ciphertext2=c.doFinal(username.getBytes("utf-8"));
          //JUST CHECKING IGNORE
          String qaz=new String(ciphertext2,"utf-8");
          //qaz=qaz+"1";
          System.out.println("just chekcing------------------------"+qaz);
          byte[] ciphertext3=qaz.getBytes("utf-8");
          if(Arrays.equals(ciphertext2,ciphertext3))
          {
           System.out.println("just chekcing they are equal------------------------");
          }
          else
          System.out.println("just chekcing they are not equal------------------------");<br> 
```

**输出 ：**

```
just chekcing they are not equal-------------------- 
```

为什么它不起作用？
**编辑**
它在使用 Java 的 Base64 时工作得很好。但是为什么直接将字节转换为字符串时它不起作用？当您将字符串转换为字节数组时实际发生了什么，反之亦然？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T05:52:18.647

如果这是加密的结果，则不应*使用*字符串构造函数。您没有编码文本 - 您有任意二进制数据。您需要了解本质上是文本且需要以二进制形式表示的数据（例如将文本文件写入磁盘）与本质上是二进制且需要以文本形式表示的数据（例如包括加密数据XML 文档）。

您应该使用 base64（例如，使用[这个公共域库](http://iharder.net/base64)）或可能是十六进制。这将产生保证往返原始二进制数据的 ASCII 数据。

# android - mDPM.lockNow() 会发生什么；如果安卓设备上没有安全密码？

> ID：10203496
> 
> 赞同：0
> 
> 时间：2012-04-18T05:44:56.440
> 
> 标签：android, device-admin

如果用户没有在她的设备上放置安全密码，并且我的应用即使具有设备管理员权限也会发送 mDPM.lockNow(); 远程锁定手机，会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:46:35.753

它只会锁定设备！用户可以简单的正常解锁。

> mDPM.lockNow()

仅用于锁定设备（无论 PIN 是否存在）

# php - php bool 回显输出

> ID：10203497
> 
> 赞同：1
> 
> 时间：2012-04-18T05:45:02.783
> 
> 标签：php

我有一个奇怪的问题。

如果有执行此操作的函数返回值，

```
public function isVipCustomer($customer_id){
        $cus_vip_id=FALSE;
        $sql="SELECT customerid FROM customers WHERE is_vip='1' 
                AND customerid='".$customer_id."' LIMIT 0,1 ";  
        $result= $this->db->query($sql);

        while($row=mysqli_fetch_assoc($result)){
            $cus_vip_id=(int)$row['customerid'];    
        }

        if($cus_vip_id!=0)
            return TRUE;
        else
            return FALSE;

    } 
```

当我打电话时

```
$customer_id=13;
echo $collection->isVipCustomer($customer_id); 
```

当它为真时，它输出 1，但当它为假时，它为空，期望输出 0

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T05:49:55.503

来自 PHP 文档：

> 布尔 TRUE 值转换为字符串“1”。Boolean FALSE 被转换为“”（空字符串）。这允许在布尔值和字符串值之间来回转换。

[http://www.php.net/manual/en/language.types.string.php](http://www.php.net/manual/en/language.types.string.php)

要使用类型打印返回值，请尝试使用`var_dump($myVar)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T05:47:33.780

将布尔值转换为字符串时，`true`转换为`"1"`和转换`false`为`""`（空字符串）。

[http://php.net/manual/en/language.types.string.php#language.types.string.casting](http://php.net/manual/en/language.types.string.php#language.types.string.casting)

你的期望是不正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T05:48:11.620

这就是 PHP 在将 bool 转换为字符串时所做的。
尝试这个：

```
echo $collection->isVipCustomer($customer_id) ? 1 : 0; 
```

或者，如果您只是想输出一些用于调试目的的内容，并且想要明确表示错误，请使用以下命令：

```
var_dump($collection->isVipCustomer($customer_id)); 
```

这将输出`bool(true)`或`bool(false)`

# java - Java - 获取服务器绝对路径

> ID：10203500
> 
> 赞同：5
> 
> 时间：2012-04-18T05:45:21.553
> 
> 标签：java, file, tomcat, glassfish

如何在我的机器中获取服务器位置的绝对路径？

假设我使用的是 glassfish 服务器，那么我需要获取 glassfish docroot 位置的绝对路径，如下所示：

```
C:\glassfish3\glassfish\domains\domain1\docroot 
```

在运行时，我需要使用 java io 包在该位置创建文件，例如：

```
C:\glassfish3\glassfish\domains\domain1\docroot\myfile.txt 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T21:32:48.320

如果您使用 GlassFish 启动 GlassFish，即使用，`asadmin start-domain|start-instance`那么我们提供以下铁定保证：

JVM 的当前工作目录绝对肯定是域或服务器的配置目录。在默认情况下，这将是：

```
c:/glassfish3/glassfish/domains/domain1/config 
```

如果你想写一些东西到（默认的）docroot，你可以这样做：

```
File f = new File("../docroot/yourfile"); 
```

* * *

即使您直接使用 java 启动服务器（例如`java -jar glassfish.jar`），也可以保证在每种情况下始终有效的另一个选项是使用 System Property 的值，如下所示：

```
File f = new File(System.getProperty("com.sun.aas.instanceRoot") + "/docroot/yourfile"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T06:20:20.183

我有一个类似的问题，最终使用

```
path = getClass().getProtectionDomain().getCodeSource().getLocation() 
```

因为我需要静态函数的路径。这指向 WEB-INF/classes 目录。有了这个，你可以指向类似的东西`path.subString(0,path.indexOf("WEB-INF"))`。

我遇到的一个问题：从 Eclipse 运行测试时，它指向项目的“构建”目录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-03T11:50:11.627

您可以尝试以下操作：

```
System.getProperty("catalina.base"); 
```

您可以通过在调试模式下查看以下变量来找到其他属性。

```
Properties properties = System.getProperties(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T14:57:14.863

我不知道这是否是最好的方法，但它对我有用:)

```
String path = new File("").getAbsolutePath() + File.separator + "docroot"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T06:39:16.200

这是一个非常糟糕的主意。如果您在 WAR 或 EAR 文件中运行，则 docroot 将不在可写文件系统上。假设是这种情况可能会导致以后头痛。

使用不同的方法（例如 servlet 初始化参数）来指定可写文件系统位置。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-18T05:51:21.397

为此，您无需走完整的道路，因为

当您创建文件时，默认情况下它将在`ROOT`您的服务器上创建

这是`C:\glassfish3\glassfish\`在这里。

希望这会帮助你。

# cocoa-touch - 如何在 iOS/核心图形中构建撤消堆栈

> ID：10203504
> 
> 赞同：1
> 
> 时间：2012-04-18T05:45:36.283
> 
> 标签：cocoa-touch, ios5, core-graphics

我正在尝试为一组触摸添加撤消/重做功能..

我有 touchesBegan 和移动的这段代码：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    NSLog(@"%s", __FUNCTION__);
    mouseSwiped = NO;
    UITouch *touch = [touches anyObject];

    if ([touch tapCount] == 2) {
        [self eraseButtonTapped:self];
        return;
    }

    lastPoint = [touch locationInView:self.view];
    lastPoint.y -= 20;

    [self.undoPath addObject:WHATGOESHERE];
    // Remove all paths from redo stack
    [self.redoStack removeAllObjects];

}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    //NSLog(@"%s", __FUNCTION__);
    mouseSwiped = YES;

    UITouch *touch = [touches anyObject];   
    CGPoint currentPoint = [touch locationInView:self.view];
    currentPoint.y -= 20;

    UIGraphicsBeginImageContext(self.view.frame.size);
    [drawImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetLineCap(context, kCGLineCapRound);
    CGContextSetLineWidth(context, brush);
    CGContextSetRGBStrokeColor(context, red, green, blue, 1.0);
    CGContextBeginPath(context);
    CGContextMoveToPoint(context, lastPoint.x, lastPoint.y);
    CGContextAddLineToPoint(context, currentPoint.x, currentPoint.y);
    CGContextStrokePath(context);
    drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
    [self.undoPath addObject:WHATGOESHERE];
    UIGraphicsEndImageContext();

    NSLog(@"Touches Moved undoPath contains %i objects", [self.undoPath count]);
    // Remove all paths from redo stack
    [self.redoPath removeAllObjects];
    lastPoint = currentPoint;

} 
```

我认为，如果我能弄清楚如何填充撤消堆栈，我就可以遍历堆栈以撤消重做触摸。也许我都湿透了。我当然会感谢一些帮助...

谢谢

..我之前也问过类似的问题，但我以不同的形式重新启动了项目，因为最后一种方式并不令人满意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:42:07.743

我终于通过管理数组解决了这个问题。

对于每个笔划，都有一个缓冲区数组：

```
[self.currentColoredPath.path moveToPoint:[touch locationInView:self]];
[self.currentArray addObject:self.currentColoredPath];
// Remove all paths from redo stack
[self.redoStack removeAllObjects]; 
```

然后 Undo 和 Redo 方法如下所示：

```
-(void)undoButtonClicked
{
    //NSLog(@"%s", __FUNCTION__);
    if ([self.currentArray count] == 0) {
        //nothing to undo
        return;
    }

    DrawingPath *undonePath = [self.currentArray lastObject];
    [self.currentArray removeLastObject];
    [self.redoStack addObject:undonePath];
    [self setNeedsDisplay];

}

-(void)redoButtonClicked
{
    //NSLog(@"%s", __FUNCTION__);

    if ([self.redoStack count] == 0) {
        // nothing to redo
        return;
    }

    DrawingPath *redonePath = [self.redoStack lastObject];
    [self.redoStack removeLastObject];
    [self.currentArray addObject:redonePath];
    [self setNeedsDisplay];

} 
```

我希望这对其他人有帮助。

更新 - 这是对以下问题的回应：“什么是 currentColoredPath？”

1.  `@property (strong,nonatomic) DrawingPath *currentColoredPath;`

2.  这里指的是一个DrawingPath类，我写的如下：

。H

```
#import <Foundation/Foundation.h>

@interface DrawingPath : NSObject {
    NSString *brushSize;
}
@property (strong, nonatomic) NSString *brushSize;
@property (strong,nonatomic) UIColor *color;
@property (strong,nonatomic) UIBezierPath *path;

- (void)draw;
- (void)brushChange; 
```

.m

```
#import "DrawingPath.h"

@implementation DrawingPath

@synthesize path = _path;
@synthesize color = _color;
@synthesize brushSize = _brushSize;
float brush = 12;

- (id)init {
    //NSLog(@"%s", __FUNCTION__);
    if (!(self = [super init] ))
        return nil;
    brushSize = [[NSUserDefaults standardUserDefaults] objectForKey:@"brushKey"];
    [self brushChange];

    _path = [[UIBezierPath alloc] init];
    _path.lineCapStyle=kCGLineCapRound;
    _path.lineJoinStyle=kCGLineJoinRound;

    [_path setLineWidth:brush];

    return self;
}

- (void)draw {
    //NSLog(@"%s", __FUNCTION__);

    [self.color setStroke];
    [self.path stroke];
}

- (void)brushChange { //from notification
    //NSLog(@"%s", __FUNCTION__);

    brushSize = [[NSUserDefaults standardUserDefaults] objectForKey:@"brushKey"];
    //NSLog(@"DrawingPath - brushSize is %@: ", brushSize );

    //NSLog(@"DrawingPath - brush is %f: ", brush );

} 
```

# mysql - 服务器快照可能会损坏 MySQL 事务吗？

> ID：10203509
> 
> 赞同：0
> 
> 时间：2012-04-18T05:46:30.737
> 
> 标签：mysql, backup, innodb, snapshot, database-restore

假设您每天拍摄整个服务器的快照（public_html、sql 文件等），以便以后在系统故障时恢复。

如果在发生未提交事务时拍摄快照，是否可以恢复损坏的 MySQL InnoDB？还是 InnoDB 会做得很好并在恢复时丢弃“不完整”的事务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:03:21.253

从数据库的角度来看，我们正在处理不干净的关闭（即电源关闭）和丢失的连接，因此它将丢弃所有未提交的事务。

如果您正在拍摄服务器的快照，就像在低温睡眠中冻结所有内容一样，那么在恢复后数据库将醒来并期待与不存在的应用程序对话。

我能看到的唯一问题不是来自事务本身，而是来自数据库本身驻留在文件中的事实。如果您冻结了一半写入磁盘的文件怎么办。我可以看到这可能是一个问题。另一方面，可能有一些架构设计可以防止这种情况发生，因为停电也是如此，数据库也应该能够承受这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T05:56:51.660

据我所知，在事务期间，在提交发生之前没有任何内容保存到数据库中。这就是 ACID 合规性。因此，只有在事务之后才写入数据库文件。

另外，在我看来，数据库“快照”应该通过转储来完成。我不是服务器管理员，所以我不知道事实，但以这种方式恢复数据会更安全。

虽然 MySQL 对我来说是一个灰色地带，但我对 SQL Server 更有信心，所以不要把这当作事实，因为 SQL Server 有自己的备份方式。

# android - 在 ListView 中按字母顺序排列查询的音乐文件

> ID：10203515
> 
> 赞同：0
> 
> 时间：2012-04-18T05:47:00.893
> 
> 标签：android, android-listview, alphabetical

好的，我正在为 android 制作一个媒体播放器应用程序。直到现在一切都很好。到目前为止，我有一个列表视图，显示你的 sdcard（内部和外部）上的所有 .mp3 文件，并且在播放时显示音乐可视化器。但我不能为我的生活按字母顺序排列列表。一切都是动态的，所以 xml 在这里不起作用。

```
 public class MusicPlayerActivity extends Activity {
  ListView musiclist;
  Cursor musiccursor;
  int music_column_index;
  int count;
  private Intent aIntent;
  public static String filename;
  private RelativeLayout mRelativeLayout;

  @Override
  public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        init_phone_music_grid();
        mRelativeLayout = new RelativeLayout(this);
        setContentView(mRelativeLayout);
        mRelativeLayout.addView(musiclist);

  }

  public void init_phone_music_grid() {
        System.gc();

        String[] projection = {
                MediaStore.Audio.Media._ID,
                MediaStore.Audio.Media.ARTIST,
                MediaStore.Audio.Media.TITLE,
                MediaStore.Audio.Media.DATA,
                MediaStore.Audio.Media.DISPLAY_NAME,
                MediaStore.Audio.Media.DURATION,
                MediaStore.Audio.Media.ALBUM
        };

        Uri allsongsuri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;
        String selection = MediaStore.Audio.Media.IS_MUSIC + " != 0";

        musiccursor = managedQuery(allsongsuri, projection , selection, null, null);

        count = musiccursor.getCount();
        musiclist = (ListView) findViewById(R.id.PhoneMusicList);
        musiclist.setAdapter(new EfficientAdapter(getApplicationContext()));
        musiclist.setOnItemClickListener(musicgridlistener);

  }
  private OnItemClickListener musicgridlistener = new OnItemClickListener() {
        public void onItemClick(AdapterView parent, View v, int position,long id) {
              System.gc();
              music_column_index = musiccursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DATA);
              musiccursor.moveToPosition(position);
              filename = musiccursor.getString(music_column_index);
              aIntent = new Intent(v.getContext(), AudioFX.class);
              aIntent.getStringExtra(filename);
              startActivity(aIntent);
        }
      };

     class EfficientAdapter extends BaseAdapter {
      private Context mContext;

      public EfficientAdapter(Context c) {
          mContext = c;
      }
          public int getCount() {
                return count;
          }

          public Object getItem(int position) {
                return position;
          }

          public long getItemId(int position) {
                return position;
          }

          public View getView(int position, View convertView, ViewGroup parent) {
              System.gc();
              String id = null;
              TextView tv;
              if (convertView == null) {
              tv = new TextView(mContext.getApplicationContext());
              } else{
              tv = (TextView) convertView;
              }
              musiccursor.moveToPosition(position);
              music_column_index = musiccursor
              .getColumnIndexOrThrow(MediaStore.Audio.Media.TITLE);
              id = musiccursor.getString(music_column_index);
              tv.setText(id);
              tv.setTextSize(20);
              return tv;
              }}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:07:53.670

你只需要使用`DEFAULT_SORT_ORDER`，像这样：

```
String sortOrder = MediaStore.Audio.Media.DEFAULT_SORT_ORDER;
musiccursor = managedQuery(allsongsuri, projection , selection, null, sortOrder); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-18T06:03:51.810

在 getView 方法中显示标题不会得到按字母顺序排列的列表。

为了将列表按字母顺序排列，请将**所有音乐标题**放入字符串数组或 ArrayList **中，手动将它们按字母顺序排列，然后将该字符串数组传递给 EfficientAdapters 构造函数**并将其存储在本地并根据列表位置使用它们。

像

```
 class EfficientAdapter extends BaseAdapter {
  private Context mContext;
  private String values[];

  public EfficientAdapter(Context c, String[] a) {
      mContext = c;
      values = a;
  }
      public int getCount() {
            return count;
      }

      public Object getItem(int position) {
            return position;
      }

      public long getItemId(int position) {
            return position;
      }

      public View getView(int position, View convertView, ViewGroup parent) {
          System.gc();
          String id = null;
          TextView tv;
          if (convertView == null) {
          tv = new TextView(mContext.getApplicationContext());
          } else{
          tv = (TextView) convertView;
          }

          id = values[position];

          tv.setText(id);
          tv.setTextSize(20);
          return tv;
          }}} 
```

希望这可以帮助.....

# android - 在 Android Eclipse 中解决此错误

> ID：10203516
> 
> 赞同：0
> 
> 时间：2012-04-18T05:47:03.623
> 
> 标签：android

当我执行我的项目时，它给了我和错误

> ## 转换为 Dalvik 格式失败，错误 1

我找不到什么是错误以及如何解决它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:17:06.253

从项目中的 libs> jars 中删除...它将解决...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T05:50:32.243

这意味着您有冲突的类/方法名称。尝试找出您的哪些库/.jar 文件可能具有相同的方法名称/类，并确保您在项目范围内没有重复项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T06:02:29.240

删除您添加的所有外部 JAR，然后只添加需要的那些。这将解决问题！

# jakarta-ee - 如何使用 jsoup 删除 html 文档中的所有非标记？

> ID：10203518
> 
> 赞同：0
> 
> 时间：2012-04-18T05:47:16.390
> 
> 标签：jakarta-ee, html-parsing, jsoup

我可以看到很多类似的问题，但不完全是。我只想使用 Jsoup 从 DOM 中删除所有非 html 标记数据（纯文本）。结果应该只是没有纯文本的标记。

它是内置的 jsoup 还是我应该编写自己的 regExp ？解析整个 DOM 而不是 RegExp 并删除标签内的内容会更好吗？

如果我必须连续不断地解析大量文档/页面，哪个会更有效？

**[已解决]** - 请参阅下面的代码（对于我的要求）

```
public void getNodesHtml(Elements children, Element parent) throws Exception {
    for(Element e : children) {
        String nodeName = e.nodeName();
        String id = e.id().isEmpty() ? "" : e.id();
        parent.append("<" + nodeName + " id=\"" + id + "\"> </" + nodeName + ">");

        Elements subchildren = e.children();
        getNodesHtml(subchildren, e);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T05:58:36.193

```
removeText(Element node){

    List<TextNode> textNodes = node.textNodes();

    for(TextNode tn : textNode){
        tn.remove();
    }

    Elements children = node.children();
    for(Element e : Elements)
        removeText(e);
} 
```

# linux - linux中的可靠写入

> ID：10203521
> 
> 赞同：0
> 
> 时间：2012-04-18T05:47:28.903
> 
> 标签：linux, io, storage

我的要求是将输入可变大小的二进制消息的永无止境的流写入文件系统。平均大小为 2KB 的消息以 1000 条消息/秒的速度到达。因此，在一小时内，消息总数将为 3600*1000*2 = 6.8 GB。消息的主要目的如下 1\. 存档以供审核 2\. 提供搜索界面

我的问题是

1.  有没有解决这个问题的开源软件
2.  如果进程写入块大小的倍数并且进程在写入块的过程中崩溃会发生什么样的错误
3.  可能会发生什么样的错误，应用程序已写入块大小，但文件系统尚未将数据刷新到磁盘。
4.  inode 在任何情况下都会损坏吗
5.  linux中有文件大小限制吗？
6.  是否有理想的文件大小？大文件（以 GB 为单位）与中文件（以 MB 为单位）的优缺点是什么
7.  还有什么要注意的吗？
8.  我的偏好是使用 C++，但如果需要，我可以切换到 C。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:30:44.743

Once `write` or `writev` returns (i.e. the OS has accepted it), the operating system is responsible for writing data to disk. It's not your problem any more, and it's happening irrespectively of your process crashing. Note that you have **no control** over the exact amount of data accepted or actually written at a time, nor whether it happens in multiples of filesystem blocks or whether it's any particular size at all. You send a *request* to `write` and it tells you how much it actually accepted, and it will write that to disk, at its own discretion.
Probably this will happen in multiples of the block size because it makes sense for the OS to do that, but this is *not guaranteed in any way* (on many systems, Linux included, reading and writing is implemented via or tightly coupled with file mapping).

The same "don't have to care" guarantee holds for file mapping (with the theoretical exception that a crashing application could in principle still write into a still mapped area, but once you've unmapped an area, that cannot happen even theoretically). Unless you pull the plug (or the kernel crashes), data will be written, and consistently.
Data will only ever be written in multiples of filesystem blocks, because memory pages are multiples of device blocks, and file mapping does not know anything else, it just works that way.

You can *kind of* (neglecting any possible unbuffered on-disk write cache) get some control over what's on the disk with `fdatasync`. When that function returns, what has been in the buffers before has been sent to the disk.
However, that still doesn't prevent your process from crashing in another thread in the mean time, and it doesn't prevent someone from pulling the plug. `fdatasync` is preferrable over `fsync` since it doesn't touch anything near the inode, meaning it's faster and safer (you may lose the last data written in a subsequent crash since the length has not been updated yet, but you should never destroy/corrupt the whole file).

C library functions (`fwrite`) do their own buffering and give you control over the amount of data you write, but having "written" data only means it is stored in a buffer owned by the C library (in your process). If the process dies, the data is gone. No control over how the data hits the disk, or if ever. (N.b.: You do have *some* control insofar as you can `fflush`, this will immediately pass the contents of the buffers to the underlying write function, most likely `writev`, before returning. With that, you're back at the first paragraph.)

Asynchronous IO (*kernel* aio) will bypass kernel buffers and usually pull the data directly from your process. Your process dies, your data is gone. *Glibc* aio uses threads that block on `write`, the same as in paragraph 1 applies.

What happens if you pull the plug or hit the "off" switch at any time? Nobody knows.
Usually some data will be lost, an operating system can give many guarantees, but it can't do magic. Though in theory, you might have a system that buffers RAM with a battery or a system that has a huge dedicated disk cache which is also battery powered. Nobody can tell. In any case, plan for losing data.
That said, what's once written should not normally get corrupted if you keep appending to a file (though, really anything can happen, and "should not" does not mean a lot).

All in all, using either `write` in append mode or file mapping should be good enough, they're as good as you can get anyway. Other than sudden power loss, they're reliable and efficient.
If power failure is an issue, an UPS will give better guarantees than any software solution can provide.

As for file sizes, I don't see any reason to artificially limit file sizes (assuming a reasonably new filesystem). Usual file size limits for "standard" Linux filesystems (if there is any such thing) are in the terabyte range.
Either way, if you feel uneasy with the idea that corrupting one file for whatever reason could destroy 30 days worth of data, start a new file once every day. It doesn't cost extra.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:27:54.987

这里的问题是，场景描述不准确。因此，一些答案是猜测：

1.  是的 - 它被称为“g++”。;-)
2.  很多不同。恕我直言，通过为您的程序编写好的和许多测试用例来避免这种情况。
3.  根据您的系统和程序，“仅”写入内存缓冲区是正常的处理方式。应该没有问题。
4.  这取决于故障场景和使用的文件系统。（也有没有 inode 的文件系统。）
5.  每个文件系统都有其文件大小限制。正确的答案（可能对你没用）是：是的。
6.  否 - 这在很大程度上取决于您的应用程序和您的环境（如硬盘、备份系统、IO 系统……）
7.  需要更多信息来回答这个问题。
8.  不是一个问题。

希望这有助于第一步。如果您决定要朝哪个方向发展，请在问题中添加信息 - 您给出的要求越多，答案就越好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T06:53:35.470

你手头有一个有趣的问题。我不是这些领域的专家，但有足够的知识来评论这些。

如果你还没有读过这篇文章，你可以阅读这篇文章，以获得关于各种文件系统 linux 的一般概述，它们的优缺点、限制等 [。 Linux 中文件系统的比较](http://en.wikipedia.org/wiki/Comparison_of_file_systems)

1) 我在 Python/Perl 中遇到过自动轮换日志文件库，在 C/c++ 中也可以使用。2/3/4) 日志文件系统在更大程度上防止文件系统崩溃。他们也支持记录数据，但并没有使用太多。

[检查此以获取有关日记的更多信息](https://unix.stackexchange.com/questions/12699/do-journaling-filesystems-guarantee-against-corruption-after-a-power-failure)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-23T20:55:38.420

你应该使用 SQLite。它解决了您需要的一切。如果您正确使用该数据库，包括速度。

# c# - 从 HTTPModule 访问会话变量

> ID：10203523
> 
> 赞同：7
> 
> 时间：2012-04-18T05:47:30.947
> 
> 标签：c#, asp.net, httpmodule

如何从 中访问会话变量`HttpModule`？

我在 .cs 页面中设置了以下会话变量，我希望在该页面中访问`HttpModule`：

> 会话["用户名"] = "BLAH"

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-02-18T10:36:25.947

我建议采用侵入性较小的方法。只需使用 SetSessionStateBehavior() 强制 ASP.NET 运行时向您的模块公开会话（仅针对 IHttpHandlers 考虑 IRequiresSessionState 的实现）。

```
public void Init(HttpApplication httpApp)
{
   //SESSION WILL BE AVAILABLE IN ALL EVENTS FROM PreRequestHandlerExecute TO PostRequestHandlerExecute
   httpApp.PostRequestHandlerExecute += OnPostRequestHandlerExecute;
   //THIS IS THE IMPORTANT LINE
   httpApp.Context.SetSessionStateBehavior(SessionStateBehavior.ReadOnly);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T05:51:22.037

这是在 HttpModule 中使用会话的示例，可在[此处](https://stackoverflow.com/a/276373/754042)找到：

```
using System;
using System.Web;
using System.Web.Security;
using System.Web.SessionState;
using System.Diagnostics;

// This code demonstrates how to make session state available in HttpModule,
// regradless of requested resource.
// author: Tomasz Jastrzebski

public class MyHttpModule : IHttpModule
{
   public void Init(HttpApplication application)
   {
      application.PostAcquireRequestState += new EventHandler(Application_PostAcquireRequestState);
      application.PostMapRequestHandler += new EventHandler(Application_PostMapRequestHandler);
   }

   void Application_PostMapRequestHandler(object source, EventArgs e)
   {
      HttpApplication app = (HttpApplication)source;

      if (app.Context.Handler is IReadOnlySessionState || app.Context.Handler is IRequiresSessionState) {
         // no need to replace the current handler
         return;
      }

      // swap the current handler
      app.Context.Handler = new MyHttpHandler(app.Context.Handler);
   }

   void Application_PostAcquireRequestState(object source, EventArgs e)
   {
      HttpApplication app = (HttpApplication)source;

      MyHttpHandler resourceHttpHandler = HttpContext.Current.Handler as MyHttpHandler;

      if (resourceHttpHandler != null) {
         // set the original handler back
         HttpContext.Current.Handler = resourceHttpHandler.OriginalHandler;
      }

      // -> at this point session state should be available

      Debug.Assert(app.Session != null, "it did not work :(");
   }

   public void Dispose()
   {

   }

   // a temp handler used to force the SessionStateModule to load session state
   public class MyHttpHandler : IHttpHandler, IRequiresSessionState
   {
      internal readonly IHttpHandler OriginalHandler;

      public MyHttpHandler(IHttpHandler originalHandler)
      {
         OriginalHandler = originalHandler;
      }

      public void ProcessRequest(HttpContext context)
      {
         // do not worry, ProcessRequest() will not be called, but let's be safe
         throw new InvalidOperationException("MyHttpHandler cannot process requests.");
      }

      public bool IsReusable
      {
         // IsReusable must be set to false since class has a member!
         get { return false; }
      }
   }
} 
```

# json - sql查询速度问题这个正常吗

> ID：10203525
> 
> 赞同：1
> 
> 时间：2012-04-18T05:47:35.043
> 
> 标签：json, sql-server-2008, linq-to-sql, subsonic3

带有 sql server express 数据库的 net mvc 2 应用程序。

我的应用程序用于估算围栏安装项目。用户在输出 xml 文件的 flash 绘图中绘制所有围栏项目。

使用此数据，用户可以将项目添加到他们制作的图像中的每个元素。基本上，他们使用 Posts、Fence 和 Gate 项目绘制任何类型的配置。

添加绘图元素后。每个元素都有一个“项目价格”

可以添加到每个栅栏或大门的物品类型有：

```
- Labor
- Material
- Equipment 
- Subcontracts 
```

每个都有一个计算其价格的公式。每个项目的最终价格来自应用程序预算中添加的定价值。这是如何计算每个的示例

```
Labour1 = qty(user enters this) * unit cost * profit (comes from budget)

unit cost = hour rate(from budget) - discount % (user enters it) * labor burden %(user enters it) * Shipping %(User enters it) * Tax (comes from main application tax setup)
* overhead markup % ( from budget) * profit (from budget) = item price 
```

这是一种仅计算 1 个劳动力的公式。材料、设备和分包等其他要素的公式非常相似。

所以估计看起来像这样：

在这个例子中，我画了一块栅栏，中间有一个门。从此图表创建的数据如下所示：

```
Fence = F1 
Gate= G1
Post= P1
Post = P2
Post = P3
Post = P4 
```

为了找到这项工作的最终价格（小计），我添加了所有围栏、大门并发布最终价格。

```
**Fence F1**

Material = $120
Material 2= 115
Labor 1= $134
Labor 2= $100
Equipment 1= $100
Equipment 2 = $150
Subcontract 1 = $120
Subcontract 2 = $100

**TOTAL FENCE ITEMS= $939** 
```

**G1登机口**

```
Mat 1= $100
Labor 1= $200
Equip 1= $400
Subcontract 1= $250

**TOTAL GATES= $950** 
```

那么下一篇文章每个都有这个元素

```
**P1, P2 P3 P4**

Material 1 = 250 (x4)
equipment 1= $250 (x4)
labor 1 = $100 (x4)
subcontract 1= $200 (x4)

**Total POSTS = $3200**

Total Estimate Price = 939 + 950 +3200 = $5,089 
```

* * *

任何估计都可以有不止一个栅栏门或柱子。但基本上对于任何栅栏门或柱子，您都可以添加尽可能多的材料、设备、劳动力和分包合同

前面的示例只是一个典型示例，但其他一些估计总共可以包括多达 30 或 40 个项目。

我有一个加载客户信息和其他常规列的 jqgrid，最后一列是价格：

现在，如果我有大约 50 个估计值，看起来像上面的示例，我的网格将需要大约 45 秒才能加载。

每年将有超过 500 个估计值显示在该网格中。

所以在这个数字上，用 500 一次加载这个网格需要 5 分钟以上。

根据这些信息，你能告诉我这是否是处理这些数据的正常时间吗？

如果您需要任何其他详细信息给我建议，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:53:41.547

> 根据这些信息，你能告诉我这是否是处理这些数据的正常时间吗？

如果没有您的代码、环境、数据库大小等的更多详细信息，这是不可能回答的。

然而，对我来说，这似乎是很多时间。

您需要开始**分析**以找出导致问题的部分。是数据库，是数据的处理，是网格的创建还是全部。

因此，分解整个过程并检查导致延迟的原因。

现在如果是数据库： Profile 发送到数据库的 sql。也许您可以创建更高效​​的查询（一步加载所有数据而不是一个一个，也许您需要查看索引？也许您的数据库对于 sql server express 来说太大了（它有内存限制，只会使用一个核心，无论物理服务器有多大）。

既然你提到了linq-to-sql，那么请密切注意延迟加载数据引起的n+1问题。`DbLoadOptions` `LoadWith`在这种情况下继续阅读。

在找到导致问题的原因之前，您需要对代码执行类似的步骤

# java - 黑莓是否可以自动捕获图像

> ID：10203531
> 
> 赞同：0
> 
> 时间：2012-04-18T05:48:24.320
> 
> 标签：java, blackberry, blackberry-simulator, blackberry-eclipse-plugin

我是黑莓新手。我现在创建应用程序我的要求是当相机被自动调用时，图片被捕获。在黑莓中是否可能。我正在使用此代码，但不能自动捕获图片，请建议我对我的代码所做的更改，它适用于我的应用程序。

```
 public class Test extends MainScreen  implements FileSystemJournalListener {
    long _lastUSN;
    ButtonField btnTakePhoto;
    String capturedImgPath = "";
    VideoControl videoControl;
    Timer objTimer;
    Player player;

    public Test()
    {
        super();
        btnTakePhoto    =   new ButtonField("Take Picture",ButtonField.VCENTER|ButtonField.BOTTOM);
        btnTakePhoto.setChangeListener(TakePictureListener);
        HorizontalFieldManager hfm=new HorizontalFieldManager();    
        hfm.add(btnTakePhoto);
        add(hfm);

        System.out.println("Inside Construct");
        UiApplication.getUiApplication().addFileSystemJournalListener(this);
        _lastUSN = FileSystemJournal.getNextUSN();
        this.setTitle("Camera Class");
    }

    FieldChangeListener TakePictureListener = new FieldChangeListener(){

        public void fieldChanged(Field field, int context) {
            System.out.println("Inside fieldChanged");
            doTakePicture();
        }
    };
    public void doTakePicture(){
        try
        {

            System.out.println("Inside doTakePicture");
          Invoke.invokeApplication(Invoke.APP_TYPE_CAMERA,new CameraArguments());
          player = javax.microedition.media.Manager.createPlayer("capture://video");
          player.realize();

          videoControl = (VideoControl) player.getControl("VideoControl");
          player.start();
          if(videoControl!=null)
          {
              Field videoField = (Field) videoControl.initDisplayMode (VideoControl.USE_GUI_PRIMITIVE, "net.rim.device.api.ui.Field");

              videoControl.setDisplayFullScreen(true);
              videoControl.setVisible(true);
               add(videoField);
//            System.out.println("videoControl=="+videoControl);
//            String imagetype = "encoding=jpeg&width=1024&height=768&quality=fine";    
//           
//            byte[] snapshot = videoControl.getSnapshot(imagetype);
//            Bitmap image = Bitmap.createBitmapFromBytes(snapshot, 0, snapshot.length, 5);
//            System.out.println("snapshot=="+snapshot);
//            System.out.println("image=="+image);
//            BitmapField bitmapField = new BitmapField();
//            bitmapField.setBitmap(image);
//            this.add(bitmapField);
//            if(videoField != null)
//              {
//                  add(videoField);
//                 
//              }

          }

        }

    catch(Exception ex)
     {
        System.out.println(ex);

     }
    }

    public boolean invokeAction(int action)
    {
        System.out.println("Action=="+action);
    boolean handled = super.invokeAction(action); 
    //handled=true;
    System.out.println("handled=="+handled);
    System.out.println("Inside Invoke Camera");

    if(!handled)
    {    
        System.out.println("Inside First If Blog"); 
        if(action == ACTION_INVOKE)
        {   
            System.out.println("Inside Second If Blog");
           try
            {    
                System.out.println("If Blog of invoke Action");

                System.out.println("videoControl11=="+videoControl);
              String imagetype = "encoding=jpeg&width=1024&height=768&quality=fine";    
              byte[] snapshot = videoControl.getSnapshot(imagetype);
              Bitmap image = Bitmap.createBitmapFromBytes(snapshot, 0, snapshot.length, 5);
              System.out.println("snapshot=="+snapshot);
              System.out.println("image=="+image);
              BitmapField bitmapField = new BitmapField();
              bitmapField.setBitmap(image);
              this.add(bitmapField);

           }
            catch(Exception e)
            {
                Dialog.alert(e.toString());
            }
     } 

    }
    return handled;                
}  

    public void fileJournalChanged() 
    {
        System.out.println("Inside fileJournalChanged");
        long nextUSN = FileSystemJournal.getNextUSN();
        String msg = null;
        String path = null;
        for (long lookUSN = nextUSN - 1; lookUSN >= _lastUSN && msg == null; --lookUSN) 
        {
            FileSystemJournalEntry entry = FileSystemJournal.getEntry(lookUSN);

            if (entry == null) 
            { 
                break;
            }

             path = entry.getPath();
             System.out.println("Path=="+path);

            if (path != null)               
            {
             if (path.endsWith("png") || path.endsWith("jpg") || path.endsWith("bmp") || path.endsWith("gif") ){    
                switch (entry.getEvent()) 
                {

                    case FileSystemJournalEntry.FILE_ADDED:
                        System.out.println("Inside FILE_ADDED");
                        msg = "File was added.";
                        break;

                    case FileSystemJournalEntry.FILE_DELETED:
                        System.out.println("Inside FILE_DELETED");
                        msg = "File was deleted.";
                        break;
                }
             } 
            }
        }
        _lastUSN = nextUSN;

        if ( msg != null ) 
        {
            Dialog.alert(msg);
            capturedImgPath =   path;
            closeCamera();
        }
    }
   private void closeCamera()
    {
        int menuOrder =6;
        System.out.println("Inside Close Camera");
        EventInjector.invokeEvent(new EventInjector.KeyCodeEvent(EventInjector.KeyCodeEvent.KEY_DOWN, (char)Keypad.KEY_MENU, KeypadListener.STATUS_NOT_FROM_KEYPAD, 0));
        EventInjector.invokeEvent(new EventInjector.TrackwheelEvent(EventInjector.TrackwheelEvent.THUMB_ROLL_DOWN, menuOrder, KeypadListener.STATUS_NOT_FROM_KEYPAD));
        EventInjector.invokeEvent(new EventInjector.TrackwheelEvent(EventInjector.TrackwheelEvent.THUMB_CLICK, 1, KeypadListener.STATUS_NOT_FROM_KEYPAD));
        Dialog.alert("The captured Image path is "+capturedImgPath);
   }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T07:33:43.210

您正在使用传统方法拍照。这就是为什么你不应该使用它：

*   因为您正在退出应用程序以调用外部应用程序（相机应用程序）。
*   因为您无法控制相机设置。
*   因为您发布的 FileJournalListener 代码（即 RIM 在其教程中发布的代码）在某些操作系统和模拟器上会出现问题（事件以不同的顺序到达或根本没有到达，图像保存时的多个事件等）。
*   因为没有办法关闭相机应用程序，你不得不求助于破解密钥注入方法。

所以现在，对于操作系统 > 4.6，您可以使用 MMAPI 在您的应用程序内拍摄快照。这是推荐的方法，除非您正在为遗留操作系统编程，否则不应使用您发布的方法。检查[本教程](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/1089414/How_To_-_Take_a_snapshot_using_the_built-in_camera_of_a_BlackBerry_smartphone.html?nodeid=1443849&vernum=0)。此外，从 5.0 开始，您可以使用 AMMAPI 来控制一些相机设置。[并非所有控件都已实现](http://supportforums.blackberry.com/t5/Java-Development/Advanced-Multimedia-Supplement-API-What-s-Supported/ta-p/770659)，但最新的操作系统支持大多数基本控件（缩放、聚焦、闪光等）。查看最新 BlackBerry JDE 中包含的~~CameraDemo VideoRecordingDemo 示例。~~

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T07:22:04.953

试试这个代码，它会自动拍照。

```
import java.io.OutputStream;
import java.util.Timer;
import java.util.TimerTask;

import javax.microedition.io.Connector;
import javax.microedition.io.file.FileConnection;
import javax.microedition.media.Player;
import javax.microedition.media.control.VideoControl;

import net.rim.device.api.system.Bitmap;
import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.BitmapField;
import net.rim.device.api.ui.component.Dialog;
import net.rim.device.api.ui.container.MainScreen;

public class ImageCaptureDemo extends UiApplication
{
public static void main(String[] args)
{
    ImageCaptureDemo app = new ImageCaptureDemo();
    app.enterEventDispatcher();
}

public ImageCaptureDemo()
{
    pushScreen(new ImageCaptureDemoScreen());
}   

class ImageCaptureDemoScreen extends MainScreen
{   
    Timer timer ;
    Player _p;
    VideoControl _videoControl;    

    public ImageCaptureDemoScreen()
    {
        try 
        {
            _p = javax.microedition.media.Manager.createPlayer("capture://video?encoding=jpeg&width=320&height=240");
            _p.realize();
            _videoControl = (VideoControl) _p.getControl("VideoControl");

            if (_videoControl != null)
            {
                Field videoField = (Field) _videoControl.initDisplayMode (VideoControl.USE_GUI_PRIMITIVE, "net.rim.device.api.ui.Field");
                _videoControl.setDisplayFullScreen(true);
                _videoControl.setVisible(true);
                _p.start();

                /*EnhancedFocusControl efc = (EnhancedFocusControl)p.getControl("net.rim.device.api.amms.control.camera.EnhancedFocusControl");
                efc.startAutoFocus();*/

                if(videoField != null)
                {
                    add(videoField);
                }
            } 
        }
        catch(Exception e)
        {
            Dialog.alert(e.toString());
        }

        timer = new Timer();
        timer.schedule(new CountDown(), 3000);

    }

    public class CountDown extends TimerTask {
      public void run() {
         DismissThread dThread = new DismissThread();
         invokeLater(dThread);
      }
   }
 public void dismiss() {
      timer.cancel();
     invokeAction(ACTION_INVOKE);
    _videoControl.setVisible(false);

   }
   public class DismissThread implements Runnable {
          public void run() {
             dismiss();
          }
       }

    protected boolean invokeAction(int action)
    {
        boolean handled = super.invokeAction(action); 

        if(!handled)
        {
            if(action == ACTION_INVOKE)
            {   
                try
                {                      
                    byte[] rawImage = _videoControl.getSnapshot(null);  

                    FileConnection conn = (FileConnection)Connector.open("file:///SDCard/BlackBerry/pictures/"+System.currentTimeMillis()+".jpeg", Connector.READ_WRITE);
                    conn.create();
                    OutputStream out = conn.openOutputStream();
                    out.write(rawImage);
                    out.flush();
                    out.close();
                    conn.close();

                    /*

                    Bitmap image = Bitmap.createBitmapFromBytes(rawImage, 0, rawImage.length, 5);
                    BitmapField bitmapField = new BitmapField();
                    bitmapField.setBitmap(image);
                    this.add(bitmapField);
              */

                }
                catch(Exception e)
                {
                    Dialog.alert(e.toString());
                }
            }
        }           
        return handled;                
    }  
}   
} 
```

# eclipse - MyEclipse 中 IntelliJ 想法等效的 Ctrl + W 快捷方式

> ID：10203534
> 
> 赞同：1
> 
> 时间：2012-04-18T05:48:46.210
> 
> 标签：eclipse, intellij-idea, myeclipse

我`IntelliJ IDEA`过去和现在都将其用作我的环境`MyEclipse`。您可以使用`Ctrl + W`快捷方式选择（并突出显示）中的单词`IntelliJ`。我在 中找到`Ctrl + W`了等效的快捷方式`MyEclipse`，它是`Alt + Shift + Up/Down Arrow key`。当您在代码中使用字符串时，这些等价物（In`IntelliJ`和）会有所不同。对于示例字符串，例如：“HelloWorld”。在一次使用中，仅突出显示但在所有字符串中使用包括突出显示的字符。`MyEclipse``""``IntellJ``Ctrl + W``IntelliJ``HelloWorld``Alt + Shift + Up/Down Arrow key``MyEclipse``""`

我的问题是：我想要`MyEclipse`与 完全等效的快捷方式`IntelliJ`。这个请求有解决方案吗？

（对不起，如果我使用了错误的术语或语法，我正在学习英语。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:18:09.820

据我所知，恐怕 Eclipse 不支持这种行为。Intellij 实现更智能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:26:14.000

我不确定这是否是您想要的，但是如果您在左引号和第一个字符之间双击，则只会选择字符。即使字符串中有空格，这也有效，但有趣的是，同样的技术适用于大括号和圆括号的内容——可能还有其他构造。

# sql - 关于 MIN() 并从行返回另一个值的 SQL 查询

> ID：10203535
> 
> 赞同：0
> 
> 时间：2012-04-18T05:48:53.020
> 
> 标签：sql, ms-access

我有一个名为 BCS 的表，以及我需要使用的两列，名为 HPTS 和 Team。我需要列出 HPTS 中值最低的团队的团队名称。

（如果这很重要，我会在 Access 中执行此操作）

目前我拥有的是以下内容：

```
SELECT TEAM, MIN(HPTS)
FROM BCS
GROUP BY Team 
```

这给了我 HTPS 列中每个团队的最小值，但这对我来说是无用的信息，因为无论如何每个团队在该列中只有一个值。

我可以通过使用以下方法在没有相应团队的情况下获得最小值：

```
SELECT MIN(HPTS)
FROM BCS 
```

但我也需要有团队名称。对此的任何帮助将不胜感激。我认为这可能与使用 JOIN 函数有关，但我不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:02:56.527

在 TSQL 中，我也相信 Access/Jet，只要您还使用 ORDER BY 来确定“顶部”上的实际内容，就可以使用 TOP N 子句。它可能比其他人提到的子查询更有效：

```
SELECT TOP 1 Team, HPTS FROM BCS ORDER BY HPTS ASCENDING 
```

ASCENDING 是默认设置，因此您可以忽略它，但在使用 TOP 时它非常重要，我通常将其放入。欢迎来到 SQL 的精彩世界！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T05:53:30.123

您需要在这里使用子查询。

```
SELECT * FROM BCS WHERE HPTS IN (SELECT MIN(HPTS) FROM BCS) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T05:52:25.483

仅通过 HPTS 从最低点订购并将其限制为 1 行怎么样？

```
SELECT TEAM, HPTS FROM BCS order by HPTS LIMIT 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T05:53:28.357

我还没有尝试过，但请尝试以下

```
SELECT TEAM FROM BCS where HPTS = (SELECT MIN(HPTS) FROM BCS) 
```

# java - 不被认可！. JSP中的ArrayList迭代

> ID：10203536
> 
> 赞同：0
> 
> 时间：2012-04-18T05:49:14.427
> 
> 标签：java, jsp, arraylist, jstl, taglib

我浏览了所有与 JSTL 和 arrayList 相关的帖子，仍然找不到解决方案。

我一直在尝试使用 taglib 在 jsp 文件上迭代 ArrayList。我在构建路径中包含了最新的 jstl 1.2 jar。已正确配置 taglib。

但仍然在使用的行前面出现错误

```
 <c:forEach> 
```

标签。它说

```
 <c:foreach>not recognized!, 
```

是的，它在 forEach 中显示“e”错误！

请在下面找到我的代码。

控制器代码：

```
 List<String> rolesList = new ArrayList<String>();
   rolesList.add(ga.getAuthority()); 
```

JSP 代码：

```
 <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>

   <select>
      <c:forEach items="${rolesList}" var="role">
             <option>${role}</option>
        </c:forEach>
    </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:52:10.067

> *我在构建路径中包含了最新的 jstl 1.2 jar。*

这不是完全正确的方法。

假设您使用的是 Eclipse，则 JAR 文件应该放在项目的`/WEB-INF/lib`文件夹中。真的没有什么需要做的了。您不需要摆弄项目的*Build Path*属性。您应该撤消您在那里所做的一切以试图“解决”问题。

如果您`/WEB-INF/lib`出于某种原因确实坚持将 JAR 放在项目文件夹之外，那么您不应该编辑*Build Path*属性，而是编辑*Deployment Assembly*属性。这将注意 JAR*实际上*也最终出现在`/WEB-INF/lib`构建和部署的 WAR 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:45:18.690

你的 RUNTIME 类路径中有 jstl 1.2 jar 吗？这才是最重要的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T09:52:41.640

当我在 jsp 中包含 jsf 时，我也面临同样的问题

然后我下载最新的 jstl jar 并包含在项目库中，

然后在标题中添加以下代码

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %> 
```

并将 $ 更改为 # 因为它在运行时不可见的数组列表，我更改了您的代码它对我有用

你的代码

```
<select>
      <c:forEach items="${rolesList}" var="role">
             <option>${role}</option>
        </c:forEach>
</select> 
```

我变成了

```
 <select>
      <c:forEach var="list" items="#{Test.rolesList}" var="role">
             <option>${list.role}</option>
        </c:forEach>
</select> 
```

**注意：**`@ManagedBean(name="Test")` Test是后台bean代码 中的Managedbean

谢谢

# python - Python - 首先使用类 - 这是一种合适的方法吗？

> ID：10203537
> 
> 赞同：0
> 
> 时间：2012-04-18T05:49:14.940
> 
> 标签：python, class, mysql-python

我想从一堆 XML 文件中提取一些数据。我有一个可以工作的解析器/提取器，但我无法让它很好地放在数据库中。

我正在尝试一个非常扁平的简单表格来保存我的所有数据，但将我的元素重新组合在一起太复杂了。

回顾我正在尝试做的事情后，我构建了一个似乎符合要求的 MySQL 数据模型。它包含几个表，因此下一个任务是构建一个方法，将提取的数据放入适当的表中（检查 dup 值等）

我计划为每个数据块编写一个通用类，它将获取我提供的数据对象，转到相应的表，检查它是否已经存在，如果不存在，它应该将它添加到表中，然后写第二个表中的键值。如果它确实存在，它必须简单地拉回键值，并将其写入第二个表。

我不确定如何用伪符号来描述这一点，但这看起来是一种明智的方法吗？另一种方法似乎是为每个数据块编写一个特定的连接器/检查器/更新器（我所说的块是指一个或 n 个特定标记数据，它们在一个表中具有适当的主页）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:04:25.757

你使用任何 ORM 吗？如果没有，这是个好主意。

通用方法是可以的，但尝试使用一些通用类来实现它。IE。您的实现可能类似于：

```
class NodeSaver(object):
    def __init__(self, node):
        self.node = node

    def save(self, connection=default_connection):
        object = self.get_or_insert_to_first_table()
        self.insert_to_second_table(object)

    def get_or_insert_to_first_table(self):
        search_values = self.get_search_values()
        main_table = self.get_main_table()
        objects = main_table.objects.filter(**search_values) # notation from Django ORM
        if objects.exists():
            return objects[0]
        else:
            insert_values = {}
            insert_values.update(search_valuse)
            insert_values.update(self.get_insert_values())
            return main_table.objects.create(**insert_values)

    def get_or_insert_to_second_table(self):
        ...

    def get_main_table(self):
        return self.main_table

    def get_second_table(self):
        return self.second_table

class MyDataLumpSaver(NodeSaver):
    main_table = models.MyData
    second_table = models.OtherData

    def get_search_values(self):
        #

    def get_insert_values(self):
        # 
```

拥有这样的类你可以通过覆盖一些方法来扩展你的数据块。如果您喜欢这个想法，请查看 Django Class Based Views。它们是用这种方法编写的。

# java - 如何在保留格式良好的 CData 部分的同时使用 LSSerializer？

> ID：10203538
> 
> 赞同：0
> 
> 时间：2012-04-18T05:49:27.140
> 
> 标签：java, xml, serialization

我正在使用 Java 从 URL 读取 RSS 提要，使用 解析 DOM 树`javax.xml.parsers.DocumentBuilder.parse(InputStream)`，对其进行一些更改，然后使用`org.w3c.dom.ls.LSSerializer.write(Node,LSOutput)`.

我正在阅读的提要是[http://www.collaborationblueprint.com.au/blog/rss.xml](http://www.collaborationblueprint.com.au/blog/rss.xml)。

提要是格式正确的 XML，但序列化结果不是。
到目前为止，在每次尝试中，CData 部分都因删除一对方括号而被破坏。
例如，如果源包含以下元素：

```
    <description><![CDATA[<p>一些文本</p>]]></description>
```

序列化的结果如下所示，并且格式不正确：

```
    <description><![CDATA<p>一些文本</p>]></description>
```

我的代码如下。它包含在 Lotus Domino 代理中。
我该如何解决这个问题？

```
import java.io.InputStream;
import java.io.PrintWriter;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLDecoder;
import java.util.HashMap;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;

import org.w3c.dom.bootstrap.DOMImplementationRegistry;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.ls.DOMImplementationLS;
import org.w3c.dom.ls.LSOutput;
import org.w3c.dom.ls.LSSerializer;

import lotus.domino.*;

public class JavaAgent extends AgentBase {
    public void NotesMain() {
        try {
            org.w3c.dom.Document newDoc;
            DocumentBuilderFactory builderFactory;
            DocumentBuilder builder;
            Element docElem,tmpElem;
            Node tmpNode;

            Session session=getSession();
            AgentContext agentContext=session.getAgentContext();

            // Put URL arguments into a HashMap.
            Document doc=agentContext.getDocumentContext();
            String[] query=doc.getItemValueString("Query_String").split("&");

            HashMap<String,String> queryMap=new HashMap<String,String>(query.length);
            for (int i=0; i<query.length; i++) {
                int j=query[i].indexOf('=');
                if (j<0) queryMap.put(query[i],"");
                else queryMap.put(query[i].substring(0,j),URLDecoder.decode(query[i].substring(j+1),"UTF-8"));
            }

            // Get the "src" URL argument - this is the URL we're reading the feed from.
            String urlStr=queryMap.get("src");
            if (urlStr==null || urlStr.length()==0) {
                System.err.println("Error: source URL not specified.");
                return;
            }
            URL url;
            try {
                url=new URL(urlStr);
            } catch (Exception e) {
                System.err.println("Error: invalid source URL.");
                return;
            }

            HttpURLConnection conn=(HttpURLConnection)url.openConnection();
            InputStream is=conn.getInputStream();

            builderFactory=DocumentBuilderFactory.newInstance();
            builder=builderFactory.newDocumentBuilder();

            // Create a DocumentBuilder and parse the XML.
            builder=builderFactory.newDocumentBuilder();
            try {
                newDoc=builder.parse(is);
                is.close();
                conn.disconnect();
            } catch (Exception e) {
                is.close();
                conn.disconnect();
                System.err.println("XML parse exception: "+e.toString());
                return;
            }

            docElem=newDoc.getDocumentElement();
            docElem.setAttribute("xmlns:ibmwcm","http://purl.org/net/ibmfeedsvc/wcm/1.0");

            PrintWriter pw=getAgentOutput();
            pw.println("Content-type: text/xml");

            DOMImplementationRegistry registry=DOMImplementationRegistry
                .newInstance();
            DOMImplementationLS impl=(DOMImplementationLS)registry
                .getDOMImplementation("LS");
            LSOutput lso=impl.createLSOutput();
            lso.setCharacterStream(pw);
            LSSerializer writer=impl.createLSSerializer();
            writer.write(newDoc,lso);

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:20:09.080

我已经确定问题与序列化程序无关。

即使我做一些简单的事情：

```
    pw.print("<description><![CDATA[<p>一些文字</p>]]></description>");

```

内部的一对方括号被剥离。

但是，如果我在 CData 中编码小于号，问题就会消失。例如：

```
    pw.print("<description><![CDATA[<p>一些文本</p>]]></description>");
```

我尚未确定原因是 PrintWriter 类还是 Lotus Domino，但无论如何我应该能够在解析和序列化之间修改 XML 以修复它。

# ubuntu - 当有可用空间时，为什么 ubuntu 10.04 上的 dpkg 配置空间不足？

> ID：10203554
> 
> 赞同：2
> 
> 时间：2012-04-18T05:50:52.773
> 
> 标签：ubuntu, dpkg

有 7Gb 可用，但...

```
~ # dpkg --configure -a
Setting up linux-image-2.6.32-31-generic-pae (2.6.32-31.61) ...
Running depmod.
update-initramfs: Generating /boot/initrd.img-2.6.32-31-generic-pae

gzip: stdout: No space left on device
update-initramfs: failed for /boot/initrd.img-2.6.32-31-generic-pae
Failed to create initrd image.
dpkg: error processing linux-image-2.6.32-31-generic-pae (--configure):
 subprocess installed post-installation script returned error exit status 2
dpkg: dependency problems prevent configuration of linux-image-generic-pae:
 linux-image-generic-pae depends on linux-image-2.6.32-31-generic-pae; however:
  Package linux-image-2.6.32-31-generic-pae is not configured yet.
dpkg: error processing linux-image-generic-pae (--configure):
 dependency problems - leaving unconfigured
dpkg: dependency problems prevent configuration of linux-generic-pae:
 linux-generic-pae depends on linux-image-generic-pae (= 2.6.32.31.37); however:
  Package linux-image-generic-pae is not configured yet.
dpkg: error processing linux-generic-pae (--configure):
 dependency problems - leaving unconfigured
Errors were encountered while processing:
 linux-image-2.6.32-31-generic-pae
 linux-image-generic-pae
 linux-generic-pae
~ # df
Filesystem           1K-blocks Used Available Use% Mounted on
/dev/sda3             18577148  10255512   7377972  59% /
none                   1026416       164   1026252   1% /dev
none                   1030624         0   1030624   0% /dev/shm
none                   1030624       100   1030524   1% /var/run
none                   1030624         4   1030620   1% /var/lock
none                   1030624         0   1030624   0% /lib/init/rw
/dev/sda1                93207     87960       435 100% /boot
~ # cat /etc/redhat-release
cat: /etc/redhat-release: No such file or directory
~ # cat /proc/version
Linux version 2.6.32-30-generic-pae (buildd@vernadsky) (gcc version 4.4.3 (Ubuntu 4.4.3-4ubuntu5) ) #59-Ubuntu SMP Tue Mar 1 23:01:33 UTC 2011
~ # uname -a
Linux ws1.naturapet.com.au 2.6.32-30-generic-pae #59-Ubuntu SMP Tue Mar 1 23:01:33 UTC 2011 i686 GNU/Linux
~ # lsb_release -a
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 10.04.2 LTS
Release:    10.04
Codename:   lucid 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T06:01:01.537

问题是您的 /boot 分区已 100% 满。新的 linux 内核将安装在那里，但如果该分区已满，它们显然不能安装。

检查您是否安装了旧内核并卸载它们。

```
dpkg -l | grep linux-image 
```

会告诉你你安装了哪些 linux 内核。

```
uname -a 
```

会告诉你当前使用的是什么内核。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T06:02:08.510

因为 /boot 上没有剩余空间

# vb.net - 将当前约会项目中的信息获取到插件

> ID：10203559
> 
> 赞同：0
> 
> 时间：2012-04-18T05:51:20.000
> 
> 标签：vb.net, outlook-addin, office-addins, comaddin

我对在 VB.Net 中编写 Outlook 插件非常陌生。当 ItemSend 事件被触发时，我想向收件人和会议项目的正文发送一封电子邮件。我应该如何参考我刚刚发送的约会项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:06:33.420

如果您将 mailItem 声明为 Private 变量，您应该可以轻松地从 ItemSent 事件访问/引用它。

请参阅本文以获取更多信息并作为示例：[http ://codeidol.com/csharp/c-sharp-in-office/Working-with-Outlook-Events/Outlook-Item-Events/](http://codeidol.com/csharp/c-sharp-in-office/Working-with-Outlook-Events/Outlook-Item-Events/)

# javascript - Javascript 模块模式和新关键字

> ID：10203560
> 
> 赞同：8
> 
> 时间：2012-04-18T05:51:20.060
> 
> 标签：javascript, closures, new-operator, module-pattern

我了解了模块模式的基础知识以及它使用闭包来允许私有成员，但我不能完全理解为什么下面的代码会这样做：

```
var Calculator = function() {
    var priv = 0;

    return {
        changePriv: function() { priv++;},
        printPriv: function() { console.log(priv);}
    }
}

var myCalc = Calculator();
myCalc.printPriv();
myCalc.changePriv();
myCalc.printPriv();

var myOtherCalc = Calculator();
myCalc.printPriv(); 
```

控制台输出是

```
0
1
1 
```

因此，这里故意省略了`new`关键字，第一次调用设置`myCalc`为 Calculator 对象。它从`priv`值 0 开始，递增，然后打印出它的新`priv`值 1。

但是a）为什么下一个调用`Calculator()`最终返回对SAME对象的引用（如第二个'1'所示）？我知道我可以`new`在这里使用并避免这种情况，但不明白为什么我必须这样做。这个函数不是使用对象字面量语法来本质上创建一个新对象然后返回它吗？b) 既然它似乎确实使用了相同的函数堆栈空间（在 JS 中这是正确的思考方式吗？），为什么`priv`在返回对同一对象的引用之前不将进程中的变量清零?

编辑：更正了草率/愚蠢的错误（感谢 scessor），即使不使用`new`关键字，它现在也会输出一个新的/不同的计算器对象。这样就清除了a）和b）。我产生的问题将是“在调用模块模式构造函数时是否使用是否重要`new`。答案是，我想这并不重要（？）。（约瑟夫：见[http://jsfiddle。 net/MvMvy/5/](http://jsfiddle.net/MvMvy/5/) ... instanceof 运算符根本不适用于模块模式。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T05:54:49.893

您不输出其他计算器`myOtherCalc`：如果您想比较它们，请将第三个替换为`myCalc.printPriv();`：

```
myOtherCalc.printPriv(); 
```

然后输出是：

```
0
1
0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T06:27:50.257

[你不需要`new`](https://stackoverflow.com/q/9304473/575527)在你的情况下使用。

通常，如果您使用`new`，您期望得到的是您调用的构造函数的实例。在您的情况下，这不会是因为您手动返回了一个对象。这没有任何意义，并且会在您以后混淆使用时引起问题。很快你可能会“实例测试”你的对象，并且会遇到这种“不匹配”。

你的代码中有一个错字：

```
var myCalc = Calculator();       //create calculator
myCalc.printPriv();              //"myCalc" private is 0
myCalc.changePriv();             //increment
myCalc.printPriv();              //"myCalc" private is 1

var myOtherCalc = Calculator();  //another calculator
myCalc.printPriv();              ///but you printed "myCalc" again 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T07:05:50.730

与“新”运算符无关......在这里你得到一个关于 proto/constructor 的很好解释的主题： [http ://en.wikibooks.org/wiki/JavaScript/Access_Control](http://en.wikibooks.org/wiki/JavaScript/Access_Control)

但是这是一个无意义的示例，您可以这样做，因此您只能通过 getter 和 setter 方法访问 priv：

```
function Calculator2() {
var priv = 0;
this.public = 0;
this.getPriv = function(){
    return  priv;
}
this.setPriv = function(val){
    priv = val;
}
}
Calculator2.prototype.changePriv = function(){
this.setPriv(this.getPriv()+1);
}
Calculator2.prototype.printPriv = function(){
    console.log("priv = " + this.getPriv());
}
Calculator2.prototype.changePublic = function(){
    this.public++;
}
Calculator2.prototype.printPublic = function(){
    console.log(this.public);
} 
```

在这种情况下，始终可以通过 getter 和 setter 方法访问 var priv，

在下一个示例中，您有一个 private var **className**和另一个 public var __className ：

```
<div id = "outputDiv" style="width:600px;height:400px;border:solid 1px #000"></div>
<script type="text/javascript">
    //<![CDATA[ 
```

//脚本 : var SomeClass = function(className) {

```
 var __className__ = className;
    this.__className__ = "\"public default className\"";
    var someString = new String("");

    this.setScopeText = function() { // void
        someString = "A new instance of \"private [__classname__] : " +
        __className__ + "\"" +
        " has been created. Refering to [__className__]<br />" +
        "A new instance of " +
        this.__className__ +
        " has been created. Refering to [this.__className__]";
        return someString;
    };

    this.getScopeText= function (){
        return someString;
    }

    this.setOutput = function(elementId, someString){
        var outputPane = this.getSomePane(elementId);
        outputPane.innerHTML += "<p>" + someString + "</p>";
    }

    this.getSomePane = function(elementId){
        var outputP = document.getElementById(elementId);
        return outputP;
    }

}

SomeClass.prototype.changeClassNameVariable = function( str ){
    this.__className__  = str;
} 
```

// 结束声明。

//测试：

```
var sc = new SomeClass("foo");

sc.setOutput("outputDiv",sc.__className__);
sc.setOutput("outputDiv",sc.setScopeText());
sc.setOutput("outputDiv",sc.getSomePane("outputDiv"));

sc.__className__ = "\"Some name\"";
sc.setOutput("outputDiv",sc.__className__);
sc.setOutput("outputDiv",sc.setScopeText());

sc.changeClassNameVariable("bar");
sc.setOutput("outputDiv",sc.__className__);
sc.setOutput("outputDiv",sc.setScopeText()); 
```

// 结束 javascript 和 CDATA 部分

```
//]]>
</script> 
```

在 "div:outputDiv" 中输出：

“公共默认类名”

**“private [ classname** ] : foo”的新实例已创建。参考 [ **className** ] 已创建“public default className”的新实例。参考[这个。**类名**]

[对象 HTMLDivElement]

“某个名字”

**“private [ classname** ] : foo”的新实例已创建。参考 [ **className** ] 已创建“某个名称”的新实例。参考[这个。**类名**]

酒吧

**“private [ classname** ] : foo”的新实例已创建。参考 [ **className** ] 创建了一个新的 bar 实例。参考[这个。**类名**]

->在**构造**函数中声明的类名永远不会改变！-> 这个。**className**或 SomeClass.prototype。**className**是公开的，可以更改。

我希望这可能有助于更清楚地理解链条和我的评论......

# paypal - 如何以稳健的方式实现贝宝代码

> ID：10203563
> 
> 赞同：0
> 
> 时间：2012-04-18T05:51:23.007
> 
> 标签：paypal

嗨，我有以下贝宝付款代码。在这里，我将其重定向到贝宝沙箱进行测试。我对此有以下疑问

1）如何识别付款意味着如果任何用户付款，它将如何将钱转移到特定帐户（商户）

2）在paypal网站，支付金额后，用户可以选择返回网站，如果他点击了，他会重定向到我的网站[http://Myrurl/Payments.aspx?cc=success](http://Myrurl/Payments.aspx?cc=success)。根据查询字符串，我将在我的数据库中更新他的付款。

问题是用户支付保险箱后，如果他没有点击返回站点，那么他的付款将不会在我的数据库中更新。

请给我任何解决方案或如何实施贝宝代码。

```
 <div style="display: block;" align="center">
    <form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">
    <input type="hidden" name="cmd" value="_xclick" />
    <input type="hidden" name="business" value="solly.tamari@gmail.com" />
    <input type="hidden" name="lc" value="US" />
    <input type="hidden" name="item_name" value="" />
    <input type="hidden" name="item_number" value="" />
    <input type="hidden" name="amount" value="" />
    <input type="hidden" name="currency_code" value="USD" />
    <input type="hidden" name="button_subtype" value="services" />
    <input type="hidden" name="notify_url" value=" " />
    <input type="hidden" name="return" value="http://localhost:17743/payments.aspx?cc=success" />
    <input type="hidden" name="cancel_return" value="http://localhost:17743/payments.aspx?cc=cancel" />
    <input type="hidden" name="bn" value="PP-BuyNowBF:btn_paynowCC_LG.gif:NonHostedGuest" />
    <input name="imgCreditcard" style="text-align: center;" type="image" src="images/pay.jpg"
        border="0" alt="PayPal - The safer, easierway to pay online!" /><!-- paypal1  ~/images/paypal1.jpg-->
    <img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1"
        height="1" />
    <div id="divBack" runat="server" style="margin-left: -625px;" onclick="document.location.href=('../Home.aspx')">
    </div>
    </form>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:56:18.613

PayPal 有一个 IPN 回调选项。这是您可以在您的贝宝设置中设置的回调网址。它可能是这样的：

[http://Myrurl/paypal-ipn.aspx](http://Myrurl/paypal-ipn.aspx)

这个 url，一旦设置，将由 paypal 在支付事件中调用。该页面上的 POST 变量将包含不同的值，这些值将告诉您付款的情况。您还可以发回帖子以验证此电话是合法的，而不是其他人进行的欺诈。

请参阅此页面上的贝宝 ipn 详细信息： [https ://www.paypal.com/ipn](https://www.paypal.com/ipn)

# javascript - ajax请求页面是否需要写title,html,head标签

> ID：10203567
> 
> 赞同：1
> 
> 时间：2012-04-18T05:51:55.770
> 
> 标签：javascript, ajax

我有一个页面welcome.htm，它通过ajax加载到另一个页面中

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head><title>Welcome</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />

</head>

<body>
Welcome
</body>
</html> 
```

告诉我在这个页面中包含的非常必要的标签，这样我就可以缩短我的代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:53:08.090

如果它使用相同的样式表和脚本，您可以只传输正文并通过 ajax 调用替换它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T05:56:51.823

通常，如果您只是获取一些数据，则不需要任何 Headerfiles。看看这个链接：[http](http://www.w3schools.com/ajax/ajax_xmlhttprequest_response.asp) ://www.w3schools.com/ajax/ajax_xmlhttprequest_response.asp 所以你只需用“纯文本”响应，格式就在你之后的脚本中。我总是喜欢这种方式，因为您可以尽可能缩短流量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T06:03:08.850

获取执行 ajax 调用的页面中的 Html、head、title、scripts ... 标签。你只需要正文内容，在你的情况下，文本“欢迎”只是你需要的 ajax 调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T07:08:38.007

请注意，如果您`html,body,head`的响应中有标签，并且当您在请求来自的页面上的任何元素 (div) 中附加响应时。它会自动被删除。您可以通过获取刚刚在 div 标记中加载的内容来测试此场景。

因此，最好将必要的 css 文件、脚本放入您的父页面。

# iphone - 如何在 iPhone 上的 touchesMoved 方法中将控制从一个 uiview 转移到另一个

> ID：10203570
> 
> 赞同：1
> 
> 时间：2012-04-18T05:52:14.150
> 
> 标签：iphone, cocoa-touch, uiview

嗨，我是 iPhone 开发的新手。请任何人告诉我，如果我有两个视图，我希望当我单击超级视图时它会拖动，当我单击子视图时它会拖动。有谁能够帮助我？

这是我的代码：

```
-(void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *aTouch = [touches anyObject];
    //UITouch *aTouchSuper = [touches anyObject];
    CGPoint location = [aTouch locationInView:self.view];

    //CGPoint locationSuper=[aTouchSuper locationInView:viewForTouch];

  [UIView beginAnimations:@"Dragging A DraggableView" context:nil];

    ////////////////////////
    //if(location.x>50 &&location.x<300 ){
//      viewForTouch.frame = CGRectMake(location.x,0, 
//                                      viewForTouch.frame.size.width, viewForTouch.frame.size.height);
//    
//
//
//  }
    UIView *subview = [self.view hitTest:[[touches anyObject] locationInView:self.view] withEvent:nil];

    NSLog(@"%i",subview.tag);
    if (location.x <= 50) 
    {
        location.x = 50;
    }
    if (location.x >= 300) 
    {
        location.x = 300;
    }
    if(subview.tag==12){

        viewForTouchInner.frame = CGRectMake(location.x,0, 

                                             viewForTouchInner.frame.size.width, viewForTouchInner.frame.size.height);
    }
    if(subview.tag==11) 
    {
        viewForTouch.frame = CGRectMake(location.x,0, 
                                        viewForTouch.frame.size.width, viewForTouch.frame.size.height);
    }

    ///////////////////////
    //if(viewForTouchInner.hidden=FALSE){
//  
//      
//      
//      
//      location.x=0;
//      NSLog(@"%f",location.x);
//      viewForTouchInner.frame = CGRectMake(location.x,0, 
//          
//                                      viewForTouch.frame.size.width, viewForTouch.frame.size.height);
//      
//  
//  }
        [UIView commitAnimations];
    [buttonForMove addTarget:self action:@selector(Show) forControlEvents:UIControlEventTouchUpInside];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T07:47:49.763

这是我在 ios 中的 superview 上拖动视图的代码。假设我在子视图上有一个按钮。当这个按钮点击这个动作时。它检查子视图是否放置在 x==0 它动画它到 x=260，反之亦然注意你必须添加框架 QuartzCore/QuartzCore 和#import你的 action.setAnimationDuration 的 .m 文件中的 QuartzCore/QuartzCore.h 显示拖动的持续时间 -(IBAction)listButtonTapped{

```
 // [self.navigationController popViewControllerAnimated:YES];
    //[self.profileTableView reloadData];
    NSLog(@"ButtonTapped");
    if(profileView.frame.origin.x == 0){
        [UIView beginAnimations:@"advancedAnimations" context:nil];
        [UIView setAnimationDuration:3.0];
        CGRect aFrame = profileView.frame;
        aFrame.origin.x = 260;
        profileView.frame = aFrame;

        [UIView commitAnimations];
    }
    else{

        [UIView beginAnimations:@"advancedAnimations" context:nil];
        [UIView setAnimationDuration:3.0];
        CGRect aFrame = profileView.frame;
        aFrame.origin.x = 0;
        profileView.frame = aFrame;

        [UIView commitAnimations];

    }

} 
```

![在此处输入图像描述](../Images/a03f3a01e4d6c1be5c26bf3214d2e65d.png)
这里按钮按下和视图正在向增加 x 位置拖动 ![在此处输入图像描述](../Images/3da854afe710caa8b385036eef6e2b4b.png)

这里图像结束拖动过程现在，如果您再次按下白色子视图左侧上方的按钮，它将再次出现在 x=0 位置。我希望它会帮助你！

# c# - 在 C# 中获取程序集描述的简化方法？

> ID：10203575
> 
> 赞同：15
> 
> 时间：2012-04-18T05:52:40.280
> 
> 标签：c#, linq, reflection, .net-4.0, lambda

我正在阅读一本 .NET 2.0 的书，并遇到了这个获取应用程序程序集描述的示例代码：

```
static void Main(string[] args)
{
    Assembly assembly = Assembly.GetExecutingAssembly();
    object[] attributes = 
        assembly.GetCustomAttributes(typeof(AssemblyDescriptionAttribute), false);
    if (attributes.Length > 0)
    {
        AssemblyDescriptionAttribute descriptionAttribute =
            (AssemblyDescriptionAttribute)attributes[0];
        Console.WriteLine(descriptionAttribute.Description);
    }
    Console.ReadKey();
} 
```

简单地获取程序集描述需要大量代码，我想知道在 .NET 3.5+ 中使用 LINQ 或 lambda 表达式是否有更简单的方法？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-18T06:00:44.063

没有，真的。你可以像这样让它“更流利”一点：

```
 var descriptionAttribute = assembly
         .GetCustomAttributes(typeof(AssemblyDescriptionAttribute), false)
         .OfType<AssemblyDescriptionAttribute>()
         .FirstOrDefault();

 if (descriptionAttribute != null) 
     Console.WriteLine(descriptionAttribute.Description); 
```

[编辑将程序集更改为 ICustomAttributeProvider，参见。西蒙斯文森的回答）

如果你需要这种代码很多，在 ICustomAttributeProvider 上做一个扩展方法：

```
 public static T GetAttribute<T>(this ICustomAttributeProvider assembly, bool inherit = false) 
 where T : Attribute 
 {
     return assembly
         .GetCustomAttributes(typeof(T), inherit)
         .OfType<T>()
         .FirstOrDefault();
} 
```

正如 Yuriy 解释的那样，从 .Net 4.5 开始，框架中提供了一种扩展方法：

```
var descriptionAttribute = 
    assembly.GetCustomAttribute<AssemblyDescriptionAttribute>(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-18T06:02:12.067

```
var attribute = Assembly.GetExecutingAssembly()
                    .GetCustomAttributes(typeof(AssemblyDescriptionAttribute), false)
                    .Cast<AssemblyDescriptionAttribute>().FirstOrDefault();
if (attribute != null)
{
    Console.WriteLine(attribute.Description);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-18T06:01:33.953

我会使用[ICustomAttributeProvider](http://msdn.microsoft.com/en-us/library/system.reflection.icustomattributeprovider.getcustomattributes.aspx)的扩展方法来提供一个强类型`GetCustomAttributes`，它返回一个强类型的枚举。唯一的 linq 用法是调用`FirstOrDefault`和`OfType`

```
public static void Main() {
    Assembly assembly = Assembly.GetExecutingAssembly();
    var descriptionAttribute = assembly
        .GetCustomAttributes<AssemblyDescriptionAttribute>(inherit: false)
        .FirstOrDefault();

    if (descriptionAttribute != null) {
        Console.WriteLine(descriptionAttribute.Description);
    }

    Console.ReadKey();
}

public static IEnumerable<T> GetCustomAttributes<T>(this ICustomAttributeProvider provider, bool inherit) where T : Attribute {
    return provider.GetCustomAttributes(typeof(T), inherit).OfType<T>();
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-03-10T15:18:26.633

按照@ab-kolan 的回答，它可能会更简单：

```
 var description = Assembly
            .GetExecutingAssembly()
            .GetCustomAttributes(typeof(AssemblyDescriptionAttribute), false)
            .OfType<AssemblyDescriptionAttribute>()
            .FirstOrDefault()?
            .Description ?? ""; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-03-31T18:38:50.477

在这种情况下，您不需要 LINQ 或 lambda 表达式。

从 .NET 4.5 开始，您可以享受[扩展方法](https://docs.microsoft.com/en-us/dotnet/api/system.reflection.customattributeextensions.getcustomattribute?view=netframework-4.5#System_Reflection_CustomAttributeExtensions_GetCustomAttribute__1_System_Reflection_Assembly_)来反映属性：

```
var descriptionAttribute = assembly.GetCustomAttribute<AssemblyDescriptionAttribute>();

if (descriptionAttribute != null)
    Console.WriteLine(descriptionAttribute.Description); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-02-19T06:46:15.107

如果您只对当前的执行过程感兴趣（而不是根据原始帖子进行组装），那么它就是一个简单的衬线..

```
Console.WriteLine(Process.GetCurrentProcess().MainModule.FileVersionInfo.Comments); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-18T06:01:28.787

虽然这段代码已经相对简洁，但您*可以*利用一点 LINQ 对其进行清理。

```
AssemblyDescriptionAttribute attribute = assembly
    .GetCustomAttributes(typeof(AssemblyDescriptionAttribute), false)
    .OfType<AssemblyDescriptionAttribute>()
    .SingleOrDefault();

if(attribute != null)
{
    Console.WriteLine(attribute.Description);
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-04-18T06:03:27.473

我会做这样的事情：

```
public static class AssemblyExtensions
{
    public static string GetDescription(this Assembly assembly)
    {
        var attribute = assembly.GetCustomAttributes(typeof (AssemblyDescriptionAttribute), false)
            .Select(a => a as AssemblyDescriptionAttribute).FirstOrDefault();

        if (attribute == null)
        {
            return String.Empty;
        }

        return attribute.Description;
    }
}

class Program
{
    static void Main(string[] args)
    {
        var assembly = Assembly.GetExecutingAssembly();
        Console.WriteLine(assembly.GetDescription());
        Console.ReadKey();
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-01T02:43:48.477

给你——它很容易压缩成两行代码——如果它太大了，你可以把它转储到一个扩展方法中：

```
public static string GetAssemblyDescription(this Assembly assembly)
{
    return assembly.GetCustomAttributes(typeof(AssemblyDescriptionAttribute), false)
        .OfType<AssemblyDescriptionAttribute>().SingleOrDefault()?.Description;
} 
```

然后你只需像这样使用扩展方法：

```
Console.WriteLine(typeof(Program).Assembly.GetAssemblyDescription()); 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2020-06-23T09:45:24.780

如果您指的是组装信息中的描述： ![项目的装配信息窗口](../Images/d076339e91ed21050d447cd88d3ef8ca.png)

[右键单击一个项目->应用程序->组装信息]

我建议使用[AssemblyInfo类，您可以](https://docs.microsoft.com/en-us/dotnet/api/microsoft.visualbasic.applicationservices.assemblyinfo?view=netframework-4.8)[在此处](https://www.codeproject.com/Tips/353819/Get-all-Assembly-Information)查看示例：

当我使用它时，我`Type type`通过使用反射来掌握它，我做到了：

```
using Microsoft.VisualBasic.ApplicationServices;

AssemblyInfo info = new AssemblyInfo(type.Assembly);
string description = info.Description; 
```

# android - Android：旋转动画完成动画后恢复到真实状态？

> ID：10203577
> 
> 赞同：17
> 
> 时间：2012-04-18T05:52:45.823
> 
> 标签：android, android-layout, animation, android-animation

我将在我的应用程序中旋转图像。旋转一切正常。但是，当我旋转动画完成时，图像将返回到之前的位置。我想要的是将图像保持在旋转状态，而不是让它恢复到真实状态。

那么如何让它成为可能呢？要旋转图像，我使用以下代码：

```
 <?xml version="1.0" encoding="utf-8"?>

<rotate xmlns:android="http://schemas.android.com/apk/res/android"
    android:pivotX="50%" 
    android:pivotY="50%" 
    android:fromDegrees="0"
    android:toDegrees="30"
    android:duration="2000">

</rotate> 
```

并将其应用于 ImgeView，如：

```
myImageView.startAnimation(rotateRight); 
```

所以，请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-18T06:04:20.097

请参阅[如何在 Android 中为视图设置动画并使其保持在新的位置/大小？](https://stackoverflow.com/questions/3345084/how-can-i-animate-a-view-in-android-and-have-it-stay-in-the-new-position-size)

在`<set`标签内，使用

```
android:fillAfter="true"
android:fillEnabled="true" 
```

一般来说，Animation 不会改变 View 的实际属性，它只会对其进行动画处理。如果要更改实际属性，请使用 AnimationListener 并监听 onAnimationEnd 并自己进行更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T06:06:19.443

首先使用获取动画实例

```
Animation anim = AnimationUtils.loadAnimation(context, R.anim.animation); 
```

“R.anim.animation”指的是你的动画。

使用此动画在此动画上放置一个动画侦听器。

```
anim.setAnimationListener 
```

使视图在 AnimationListener 的 onAnimationCompleted() 方法中可见。

这应该有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T06:16:09.537

setFillAfter 和 setFillEnable 是您需要的答案。

# jquery - JQUERY 循环数组

> ID：10203584
> 
> 赞同：0
> 
> 时间：2012-04-18T05:53:40.383
> 
> 标签：jquery

我有一个返回 JQUERY 的 AJAX 数组，如下所示：

![在此处输入图像描述](../Images/22ca9aa415a95723b7dc255d42a88d7a.png)

如果我这样做，我可以看到数组：

```
 alert(data); 
```

然后我通过 JSON 解码运行数组，如下所示：

```
 var obj = JSON.parse(data); 
```

现在我需要能够查看数组并访问元素。我已经尝试了几种方法，但我看不到要挂钩元素 - 例如：jquery error as page doesn't show。

这是我尝试过的方法之一：

```
obj.each(function(key, value) {
    alert(key + ": " + value);
} 
```

缺少一些东西 - 任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:28:18.230

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var data = '[{ "metatype": "descriptions", "pagename": "index", "metacontent": "testing1" }, { "metatype": "keywords", "pagename": "index", "metacontent": "testing2" }, { "metatype": "title", "pagename": "index", "metacontent": "testing3"}]';
            var obj = JSON.parse(data);

            $.each(obj, function (i, entity) {
                $('#result').append('<div>' + i + ": " + entity.metatype + ' ' + entity.pagename + ' ' + entity.metacontent + '</div>');
            });
        }); 
    </script>
</head>
<body>
    <div id="result">
    </div>
</body>
</html>

    enter code here 
```

# java - 从arraylist创建一个3列的html表？

> ID：10203585
> 
> 赞同：1
> 
> 时间：2012-04-18T05:53:43.023
> 
> 标签：java, html, jsp

如何在 HTML 中创建一个 3 列的表格`ArrayList`？

我当前的代码如下所示：

```
<table border="0">

        <%
            for (int i = 1; i < states.size(); i++) {
        %>
        <TR>
            <%
                for (int col = 1; col <= 3; col++) {
            %>
            <TD>
                <%
                    out.println(states.get(i));}
                %>
            </TD>

        </TR>
        <%
            }
        %>
    </table> 
```

我得到一个 3 列格式表，但每行中有 3 倍相同的条目...... ![](../Images/8f71296f39aac587778a950a95299fcc.png)

## 预期产出

```
Albania | Algeria   | American Samoa
Andorra | Angola    | Anguilla
.. 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:30:22.800

如果我正确理解了要求（不确定是这种情况），那么这样的事情会给你一个开始。

```
<table border="0">
    <tr>
    <%
        for (int i = 1; i < states.size(); i++) {
            out.println("<td>" + states.get(i) + "</td>");
            if (i>0 && i%3==0) {
                out.println("</tr><tr>");
            }
        }
    %>
    </tr>
</table> 
```

它将按照这些思路产生输出。

```
Albania | Algeria   | American Samoa
Andorra | Angola    | Anguilla
.. 
```

请注意，它仍然存在问题。如果有“3 的倍数”国家，则表格末尾将有一个完全空的行。如果没有，最后一行将没有正确的列数。BNI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:19:44.020

请像这样尝试。只需添加另一个变量，该变量将在从数组列表中检索信息时使用。

```
<table border="0">

    <%

        for (int i = 1, index = 0; i < states.size(); i++) {
    %>
    <TR>
        <%
            for (int col = 1; col <= 3; col++) {
        %>
        <TD>
            <%
                out.println(states.get(index++));}
            %>
        </TD>

    </TR>
    <%
        }
    %>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T05:56:14.877

这只是一个小错字。您正在使用“i”进行索引，但您的内部变量是 col。

将其更改为：

```
...
out.println(states.get(3*col + i));
... 
```

试试那个，你现在可能需要对你的列进行零索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T06:06:28.997

笔记 ：

*   List 中的索引从 0 开始
*   您需要在检索之前计算索引。

    ```
     <%
            for (int i = 0; i < states.size(); i++) {
        %>
        <TR>
            <%
                for (int col = 0; col < 3; col++) {
            %>
            <TD>
                <%  
                    int index= (i*3)+col;
                    if(states.size()>index+1)
                    {    
                     out.println(states.get(index));
                    }
                    i = i+1;  
                %>
            </TD>

        </TR>
        <%
            }
        %>
    </table> 
    ```

# macos - 无法使用 mongo 命令，显示在 mac 上找不到命令

> ID：10203589
> 
> 赞同：27
> 
> 时间：2012-04-18T05:54:18.483
> 
> 标签：macos, mongodb

我正在使用 Mac Lion。我使用的是 mongodb 1.4 版。我想升级到 1.8.5，然后我按照[http://shiftcommathree.com/articles/how-to-install-mongodb-on-os-x](http://shiftcommathree.com/articles/how-to-install-mongodb-on-os-x)逐步将每个 mongodb-osx-x86_64-1.4.0 替换为 mongodb- osx-x86_64-1.8.5。一切都很顺利。我试过了：

```
mongod 
```

没关系。我可以访问 localhost:28017 但是，

```
mongo 
```

显示找不到命令

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-18T06:44:08.690

您需要将“mongo”的路径添加到终端外壳。

```
export PATH=$PATH:/usr/local/mongodb/bin 
```

你用paths.d做了最后一步吗？如果是这样，请尝试重新启动终端。

您有使用 1.8.5 的充分理由吗？当前的稳定版是 2.0.4，它从 1.8.x 有许多有用的升级

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2021-06-16T02:00:16.553

## 对于 2021 年的读者：

```
export PATH="$PATH:/usr/local/opt/mongodb-community@3.6/bin" 
```

[![在此处输入图像描述](../Images/625832e3c407489a76f276573491c55b.png)](https://i.stack.imgur.com/KdnxB.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-04-11T15:37:12.207

You'll have to add the location of the Mongo binary to PATH.

Follow the steps below in order to make the PATH variable permanent:

1.  Open Terminal and navigate to your user directory.
2.  Run `touch ~/.bash_profile` and then `open ~/.bash_profile`.
3.  In TextEdit, add `export PATH="<mongo-directory>/bin:$PATH"` (Keep the quote marks - related to white spaces).
4.  Save the `.bash_profile` file and Quit (Command + Q) Text Edit.
5.  Run `source ~/.bash_profile`.
6.  Run `echo $PATH` and check if the you see that the *Mongo binary* was added.

(*) Notice that the PATH variable is now available only for the current terminal and not to processes that were already started in the session.
In order to make it available outside the current terminal - you'll have to logout and login.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-07-20T10:22:17.597

1.转到您的[mongodb安装目录]：

```
cd <mongodb installation dir> 
```

2.键入./bin/mongo启动mongo：

```
./bin/mongo 
```

[阅读更多](https://docs.mongodb.com/v3.0/tutorial/getting-started-with-the-mongo-shell/)

**笔记 ：**

如果上面的命令给出错误

*全局初始化失败：BadValue 无效或未设置用户区域设置。请确保正确设置 LANG 和/或 LC_*环境变量。*

运行以下命令：[阅读更多](https://stackoverflow.com/questions/26337557/badvalue-invalid-or-no-user-locale-set-please-ensure-lang-and-or-lc-environme)

```
export LC_ALL=C 
```

如何找到安装目录

```
find / -name "mongodb" 
```

**还可以设置路径**

```
export PATH=$PATH:<mongodb installation dir>/bin 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-03-12T04:20:51.110

[文件](https://docs.mongodb.com/manual/tutorial/install-mongodb-on-os-x/#ensure-the-location-of-the-binaries-is-in-the-path-variable)

```
export PATH={mongodb-install-directory}/bin:$PATH 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-06-25T19:07:11.680

我没有安装正确的 mongo 命令行工具。不过，Brew 的这个对我有用。

`brew install mongodb-community`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-07-30T13:20:00.680

在 Mac 中：

进入 Bash 配置文件：

```
vi ~/.bash_profile 
```

添加MongoDB安装路径：

```
export PATH=$PATH:/usr/local/opt/mongodb-community@4.2/bin 
```

重新加载 Bash 配置文件：

```
source ~/.bash_profile 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-05-20T16:43:27.607

您需要安装 mongodb shell 才能使 mongo 命令正常工作。

下载[链接](https://www.mongodb.com/try/download/shell)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-08-22T18:56:13.333

您可以使用命令行导航到 mongo 目录，然后使用以下命令启动 MongoDB

```
./mongodb 
```

我面临同样的问题，这对我有用。

# mysql - 用作学说对象的 Doctrine_RawSql 查询的聚合值

> ID：10203606
> 
> 赞同：2
> 
> 时间：2012-04-18T05:56:47.333
> 
> 标签：mysql, symfony1, doctrine, aggregate-functions

我正在 Symfony 1.4/Doctrine 1.2 ORM 上构建一个应用程序，并且在我看来无法实现 MYSQL 查询以用作学说对象

这是我需要水合到一个学说对象中的工作 MYSQL 查询：

```
SELECT u.id, u.username, p.picture AS picture, p.fb_user_id AS fb_user_id, p.fb_access_token AS fb_access_token, hot_scores.hot_user_score, SUM(b.incremental_points) as total_points
FROM sf_guard_user u
LEFT JOIN sf_guard_user_profile p ON p.user_id = u.id
LEFT JOIN mb_stats_bosspoints b ON b.user_id = u.id AND b.date >= '2012-03-20' AND b.date <= '2012-03-30' AND b.parent_genre_id = 10
LEFT JOIN (SELECT SUM(g.score) AS hot_user_score, g.user_id AS user_id
  FROM mb_score_by_genre g
  WHERE g.parent_genre_id = 10
  GROUP BY g.user_id
  ) hot_scores ON hot_scores.user_id = u.id
GROUP BY u.id
HAVING total_points >= 0
ORDER BY total_points DESC
LIMIT 10; 
```

由于最终左连接中的复杂 SELECT 子查询，我无法弄清楚如何使用 DQL 来为此创建查询。所以我决定使用学说 raw sql。但是我在另一篇文章 [Here][1] 中发现，其他人在使用原始 sql 查询中的聚合值时遇到了问题。我还是决定试一试。

这是我在返回查询或执行查询的函数中的原则原始 sql 查询：

```
$q = new Doctrine_RawSql();
$q->select('{u.id}, {u.username}, {p.picture} AS {picture}, {p.fb_user_id} AS {fb_user_id}, {p.fb_access_token} AS {fb_access_token}, {hot_scores.hot_user_score}, {SUM(b.incremental_points)} AS {total_points}');
$q->from("sf_guard_user u
LEFT JOIN sf_guard_user_profile p ON p.user_id = u.id
LEFT JOIN mb_stats_bosspoints b ON b.user_id = u.id AND b.date >= '".$start_date."' AND b.date <= '".$end_date."' AND b.parent_genre_id = ".$parent_genre_id."
LEFT JOIN (SELECT SUM(g.score) AS hot_user_score, g.user_id AS user_id
  FROM mb_score_by_genre g
  WHERE g.parent_genre_id = ".$parent_genre_id."
  GROUP BY g.user_id
  ) hot_scores ON hot_scores.user_id = u.id
GROUP BY u.id
HAVING total_points >= 0
ORDER BY total_points DESC
LIMIT ".$max);

$q->addComponent('u', 'sfGuardUser u');
$q->addComponent('p', 'sfGuardUserProfile p');
$q->addComponent('b', 'mbStatsBosspoints b');
$q->addComponent('g', 'mbScoreByGenre g');

if ($execute)
{
   return $q->execute();
}
else // just return query for pager to setQuery
{
   return $q;
} 
```

但是，当我运行此程序时，出现以下错误：

SQLSTATE [42S22]：未找到列：1054 'order 子句'中的未知列 'total_points'。查询失败：“

```
SELECT COUNT(*) as num_results FROM (SELECT DISTINCT u.id FROM sf_guard_user u
LEFT JOIN sf_guard_user_profile p ON p.user_id = u.id
LEFT JOIN mb_stats_bosspoints b ON b.user_id = u.id AND b.date >= '2012-04-12' AND b.date <= '2012-04-18' AND b.parent_genre_id = 10
LEFT JOIN (SELECT SUM(g.score) AS hot_user_score, g.user_id AS user_id
FROM mb_score_by_genre g
WHERE g.parent_genre_id = 10
GROUP BY g.user_id
) hot_scores ON hot_scores.user_id = u.id
GROUP BY u.id
HAVING total_points >= 0
ORDER BY total_points DESC
LIMIT 10) as results"` 
```

有什么方法可以解决这个问题，同时仍然使用学说原始 sql 查询？

我尝试了使用建议的替代方法来执行原始 mysql 代码：

```
$doctrine = Doctrine_Manager::getInstance()->getCurrentConnection()->getDbh();
$q = $doctrine->query(".......");
if ($execute)
{
   return $q->execute();
}
else // just return query for pager to setQuery
{
   return $q;
} 
```

但是我收到以下错误，因为我不知道如何使用该方法来返回一个学说查询对象：

> 致命错误：调用未定义的方法 PDOStatement::offset()

我不知道如何只创建一个查询，以便我可以执行或返回查询。

所以这两个问题是： 1\. 我可以修改我的学说原始 sql 调用以使用聚合函数吗？2\. 如果没有，我怎样才能创建一个使用纯 mysql 的学说查询并且仍然会水合学说对象？

我迷路了，我希望能朝着正确的方向前进。非常感谢。

# css - 如何在 mvc3 中给出视图特定的样式表

> ID：10203613
> 
> 赞同：1
> 
> 时间：2012-04-18T05:57:31.880
> 
> 标签：css, asp.net-mvc-3, jqgrid

我正在使用具有“SUBGRID”和“模态对话框”功能的 JQGrid。功能工作正常，但 CSS 没有得到应用。

我有多个样式表要引用，我指的是几乎 6 个样式表引用，但它没有得到应用。相反，它说“链接元素不能嵌套在元素链接中”

即使我在 Layout.cshtml 中给出样式表的参考。样式仍然没有得到应用。

请帮忙

```
<link href="@Url.Content("~/Content/css/ui.jqgrid.css")" rel="stylesheet" type="text/css" /> 
```

# jmeter - Jmeter中.csv的单个单元格中的多个值

> ID：10203614
> 
> 赞同：0
> 
> 时间：2012-04-18T05:57:48.183
> 
> 标签：jmeter

我有一个 .csv 文件，其中有 4 个值。姓名、年龄、主题、性别。如果我为所有人提供单个值，那么使用 JMeter 非常容易，例如：

> 约翰，23，数学，男

但是，如果我必须为许多主题付出，例如：

> 约翰，23 岁，数学：科学：历史，男

我如何使用 JMeter 实现这一点？

我必须在 XML 请求中传递它。

```
<name>John</name>
<age>23</age>
<subject>Maths:Science:History</subject>
<gender>Male</gender> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:22:31.983

您是否已经尝试使用[CSV Data Set Config](http://jmeter.apache.org/usermanual/component_reference.html#CSV_Data_Set_Config)来执行此操作？

也许我在你的问题中遗漏了一些东西，但由于你没有单独操作每个主题，你可以将所有主题列表读入单个变量，然后通过这个变量引用它们。

即，如果您必须从列表中读取条目，例如

```
...
John,23,Maths:Science:History,Male 
... 
```

您可以通过以下方式设置 CSV 数据集配置：

```
Filename = YOUR_CSV_FILE
File Encoding = 
Variable Names = vName,vAge,vSubjects,vGender
Delimiter = ,        // this is to delimit entries in list, not variables 
```

然后通过变量使用提取的值：

```
<name>${vName}</name>
<age>${vAge}</age>
<subject>${vSubjects}</subject>
<gender>${vGender}</gender> 
```

（由于主题通过“：”分隔，并且变量 - 通过“，” - 完整的主题列表将被提取为一个值）。

[此处](http://community.blazemeter.com/knowledgebase/articles/65138-using-csv-data-set-config)和[此处](http://ivetetecedor.com/192/how-to-use-a-csv-file-with-jmeter)的 CSV 数据集配置使用小指南。

**更新 2012-04-19：**
快速示例，以避免不必要的解释和误解。

![在此处输入图像描述](../Images/d0f3792bf50610bb04bc5b105258b0d7.png)

*   而控制器条件是`${__javaScript("${vName}"!="<EOF>",)}`。

*   每个条目的所有以“：”分隔的主题都被提取并存储为单个变量 - 这对于 CSV 数据集配置来说不是问题。

# iphone - 自定义 UITableViewCell 未显示时始终为 null

> ID：10203616
> 
> 赞同：1
> 
> 时间：2012-04-18T05:57:51.367
> 
> 标签：iphone, objective-c, ios, uitableview

我有一个`UITableView`高度为 180px 的，一次只能显示 5 行，表格视图包含自定义单元格。但是，我有 6 个单元格，这意味着只有在使用滚动时才会显示第六个单元格，当我尝试像这样遍历所有单元格时：

```
 for (int row = 0; row < [self.autoTableView numberOfRowsInSection:0]; row++)  {

    NSIndexPath* cellPath = [NSIndexPath indexPathForRow:row inSection:0];
    UITableViewCell *cell = [self.autoTableView cellForRowAtIndexPath:cellPath];

    if(!cell)
        NSLog(@"NULL %i", row);

 } 
```

在运行时，如果我没有滚动，我会`NSLog`在控制台窗口中看到一条语句：`NULL 5`，当我向下滚动以显示最后一个单元格时，我会得到一条语句`NSLog`：上下滚动，为什么会发生这种情况，尽管所有单元格都已经创建？`NULL 0``NSLog`

`cellForRowAtIndexPath`代码是：

```
static NSString *customCellIdentifier = @"customCell";
EditableTableDataRow *cell = nil;

cell = (EditableTableDataRow *)[tableView dequeueReusableCellWithIdentifier:customCellIdentifier];
if (cell == nil)
{
    cell = [[[EditableTableDataRow alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:customCellIdentifier itemPadding:0 scaleToFill:NO] autorelease];
} 
```

然后我在这个自定义单元格内的标签和文本字段上做各种事情，最后：

```
...

 return cell; 
```

非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T06:17:08.257

这是默认行为。当未显示单元格时，它们会从内存中释放。你对它们所做的每一次修改都应该在`cellForRowAtIndexPath:`方法中完成，也就是它们被创建的时候。将您的数据加载到内存中，以便在创建单元格时，它可以很快被填满。这就是您获得平滑滚动的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:07:13.700

将创建的单元格数量取决于视图上显示的单元格数量。在您的情况下，仅创建了 5 个单元格。

单元格 = (EditableTableDataRow *)[tableView dequeueReusableCellWithIdentifier:customCellIdentifier];

此行将使 tableview 重用创建的单元格。因此，当您向下滚动时，您的第一个单元格将消失，以便在您的情况下为第一行创建的单元格用于第 6 行。

希望能帮助到你。

# c# - xml 模式查看器上的 C# windows 应用程序

> ID：10203620
> 
> 赞同：0
> 
> 时间：2012-04-18T05:58:08.487
> 
> 标签：c#, xml, visual-studio-2008, xsd

我对 Windows 应用程序开发非常陌生。我正计划开发一个应用程序，它将采用 xml 模式文件并创建一个树视图控件。

有人可以指导我阅读哪些文章以及如何在 C# 中构建软件吗？我知道这是一个无关紧要的问题，但仍然期待一些帮助。

（我有 2008 版）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:36:36.393

由于您是新手，我建议您从两个方面着手：.NET 平台如何支持 XSD，尤其是[System.Xml.Schema](http://msdn.microsoft.com/en-us/library/system.xml.schema.aspx)包，以及如何使用 Winform 控件。

首先，XSD 只是 XML。简单的 XSD，特别容易上手。将 XML 文件绑定到树形视图控件可能会被打死。看看 Codeproject，也许从这篇[文章](http://www.codeproject.com/Articles/13099/Loading-and-Saving-a-TreeView-control-to-an-XML-fi)开始。了解 XSD，也许是我上面提到的 XSD API，将帮助您了解您希望在树中看到什么，以及基于您的需要的最佳表达方法是什么。例如，您想如何组织节点？你想如何解析 XSD 文件？作为 XML 还是作为已编译且有效的 XSD 文件？您想显示在​​源代码中创作的布局，还是显示编译后的信息集？

也许你可以看看现有的已经这样做的软件。例如，[QTAssistant XSR](http://paschidev.com)使用树有不同的 XSD 内容视图。

![过滤器中 XSD 内容的 QTAssistant 树视图](../Images/4c9bf02df36fa5c6181afce610e936fc.png)

如果您熟悉 XSD，您可能已经知道答案。否则，请学习足够的 XSD 来自己回答上述问题，因为它将推动您的设计。祝你好运！

# facebook - 如何在我的 Facebook 个人资料上找到用户喜欢的帖子（不是页面）

> ID：10203621
> 
> 赞同：0
> 
> 时间：2012-04-18T05:58:13.517
> 
> 标签：facebook, facebook-like

有没有办法找出（或生成计数）用户在我的 Facebook 个人资料上“喜欢”了多少帖子？

例如，如果我提供了一个用户 ID，我是否可以查询该用户喜欢了多少帖子（在特定的 Facebook 个人资料页面上）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:45:29.003

您应该能够为此使用[FQL](http://developers.facebook.com/docs/reference/fql/)。

这里感兴趣的两个 FQL 表是：

*   [like](http://developers.facebook.com/docs/reference/fql/like/) - “返回喜欢给定对象（视频、笔记、链接、照片或相册）的用户的 ID”
*   [流](http://developers.facebook.com/docs/reference/fql/stream/) - “用于返回流帖子列表”

然后，您可以像这样使用它们：

```
SELECT 
    object_id 
FROM 
    like 
WHERE 
    user_id = USER_ID 
    AND 
    post_id IN (SELECT 
                    post_id 
                FROM 
                    stream 
                WHERE 
                    source_id = PAGE_ID) 
```

尝试此操作时，您需要对登录用户拥有两个权限：read_stream 和 read_insights。

您可以在[Graph Api Explorer](http://developers.facebook.com/tools/explorer?method=GET&path=fql?q=SELECT%20object_id%20FROM%20like%20WHERE%20user_id%20=%20USER_ID%20AND%20post_id%20IN%20%28SELECT%20post_id%20FROM%20stream%20WHERE%20source_id%20=%20PAGE_ID%29)中尝试（只需将 USER_ID 和 PAGE_ID 替换为真实 ID）

# cocoa - NSOpenGLContext + YUV 到 RGB 着色器 + 不正确的渲染

> ID：10203625
> 
> 赞同：0
> 
> 时间：2012-04-18T05:58:39.187
> 
> 标签：cocoa, opengl, core-video

我正在使用 NSOpenGLContext、OpenGL 和 Shader 渲染 YUV 帧，以在 GPU 上执行 YUV 到 RGB 的转换。

输出不是预期的。从下图看可能是什么问题？

![渲染问题](../Images/c85fdbe400bcc9753e50d232c4cde8e2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:48:20.427

在我看来，您上传的 YUV 纹理数据格式错误……至少偏移了大约 16 个字节（您是否不小心在原始 YUV 数据之前上传了标头？）。

看起来亮度本身的格式可能没问题，但是色度被解码错误。

希望这会有所帮助！

# c# - ASP.NET 通知

> ID：10203628
> 
> 赞同：1
> 
> 时间：2012-04-18T05:58:53.673
> 
> 标签：c#, asp.net, postgresql

我正在**ASP.NET**和**Postgresql(9.0)**中开发应用程序。该系统将有两个用户。每当第一个用户将记录输入数据库时​​，其他用户必须收到有关数据库更改的通知，反之亦然。AJAX 或 ASP.NET 中是否有任何控件可以持续监视数据库的变化？或建议任何其他方式来实施此类通知系统。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:30:49.370

我不确定你如何从 C# 中使用它，但 LISTEN/NOTIFY 可能是解决方案。

[http://www.postgresql.org/docs/9.1/interactive/sql-listen.html](http://www.postgresql.org/docs/9.1/interactive/sql-listen.html)

[http://www.postgresql.org/docs/9.1/interactive/sql-notify.html](http://www.postgresql.org/docs/9.1/interactive/sql-notify.html)

# .net - 使用 .NET 在 Sqlite 中附加数据库不起作用

> ID：10203633
> 
> 赞同：0
> 
> 时间：2012-04-18T05:59:11.707
> 
> 标签：.net, sqlite, system.data.sqlite

我在 C# 中为 Sqlite 创建了一个帮助器类（使用 Data.SQLite），我在其中放置了 GetTables、GetColumnNames 等方法。

现在我添加了 AttachDatabase 方法来附加数据库，但它似乎不起作用。

该方法的代码如下

```
 public void AttachDatabase(string path)
    {
        string db_name = "attdb";
        sqlConnection.Open();

        SQLiteCommand scom = new SQLiteCommand(sqlConnection);
        scom.CommandText = "ATTACH '"+path+"' AS " + db_name;

        scom.ExecuteNonQuery();

        sqlConnection.Close();
    } 
```

当我提供数据库文件的路径时，该方法不会引发任何异常。

* * *

为了测试它，我在辅助类中添加了另一个方法，就像这样

```
 public List<string> GetAllDatabases()
    {
        List<string> mylist = new List<string>();

        sqlConnection.Open();
        SQLiteCommand scom = new SQLiteCommand("PRAGMA database_list", sqlConnection);
        SQLiteDataReader sreader = scom.ExecuteReader();

        while (sreader.Read())
        {
            string name = (sreader.GetValue(1)).ToString();
            mylist.Add(name);
        }
        sqlConnection.Close();

        return mylist;
    } 
```

附加数据库后，此方法返回一个列表，其中仅包含主表。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T06:55:28.243

Sqlite 不会持久化附加的数据库。每次打开和关闭连接时，附加的数据库都会被遗忘。

# c# - 被动视图方法中的数据绑定

> ID：10203634
> 
> 赞同：2
> 
> 时间：2012-04-18T05:59:14.290
> 
> 标签：c#, .net, design-patterns, passive-view, supervisingcontroller

正如在“构建自己的 CAB”博客文章系列中提到的那样，当您使用被动视图设计模式时，不可能利用数据绑定。对我来说并没有我想要的那么清楚。那么，你们中的任何人都可以展示在监督控制器模式中可以进行数据绑定的任何示例以及在被动视图中该示例的模拟吗？假设它是 .NET 4 WinForms 应用程序。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:36:59.430

看看反应式用户界面。不是特别是 WPF/Silverlight，应该可以很好地移植到 Winforms 世界。

[http://blog.paulbetts.org/index.php/2012/04/23/announcing-reactiveui-3-1/](http://blog.paulbetts.org/index.php/2012/04/23/announcing-reactiveui-3-1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:28:53.227

试试.NET 4/WPF/ [Caliburn.Micro](http://caliburnmicro.codeplex.com/)组合...

项目页面上的示例应该首先让您很好地介绍视图模型和基于约定的绑定。简而言之，它是这样的：

*   在名为 MyViewModel 的 ViewModel 类中定义一个公共属性：
    `public string FirstName {get;set;}`
*   在名为 MyView.xaml 的 xaml 视图中定义一个文本框：
    `<TextBox x:Name="FirstName" />`

这就是真正需要的一切。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T13:26:34.553

这是反对投票的另一个答案:)

MVC 就是解耦，当通过 View 更新时，Controller 会更新 Model

数据绑定通常与此紧密耦合，通过视图更新将更新绑定的模型

因此，如果您想完全遵循 MVC 模式，则不能使用正常的数据绑定。也许有一些混合方法可以做到这一点，但它可能会增加更多的复杂性，然后只做数据绑定或 MVC，并且只能在学术层面上使用，然后用于现实世界的编程

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-18T09:20:11.167

你为什么要阅读一个 5 年前的博客文章系列？你为什么使用监督控制器和被动视图之类的词？

只需为 winforms 和 .NET 3.5/4.0 寻找 MVC/MVP 模式的简单示例

我重复“简单”（而不是让我们创建一个通用的过度设计框架）

# oracle - 在 DDL 语句期间是否触发了触发器？

> ID：10203635
> 
> 赞同：1
> 
> 时间：2012-04-18T05:59:15.280
> 
> 标签：oracle, triggers

假设您有一个“删除时”触发器

1 当你触发删除时会发生什么？

> 触发器将被触发，触发器主体将被执行

1.  当你触发截断时会发生什么？

    > 我的猜测 - 因为 truncate(DDL) 和 delete(DML) 是完全不同的命令，所以什么都不会发生

还有一个问题：触发器不会在 DDL 语句上触发，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:19:24.513

正如@Eggi 所说，您在问题中的断言是正确的。

除了他的答案和他的链接中给出的详细信息之外，`TRUNCATE`将重置您表中的高水位标记，而`DELETE`不会。

如果您的表格大小发生很大变化，那么这可能非常相关。

来自 AskTom：

> HWM 是相关的，因为 Oracle 将在完全扫描期间扫描 HWM 下的所有块，即使它们不包含数据。这将影响完整扫描的性能，尤其是在 HWM 下的大多数块为空的情况下。要看到这一点，只需创建一个包含 1,000,000 行的表（或创建任何包含大量行的表），然后*从该表中执行 SELECT COUNT( )。现在，删除其中的每一行，您会发现 SELECT COUNT(*) 与计算 1,000,000 行一样长（或更长，如果您需要清理块！请参阅第 9 章的“块清理”部分）计算 0 行。这是因为 Oracle 正忙于读取 HWM 下的所有块以查看它们是否包含数据。您应该将此与在表上使用 TRUNCATE 而不是删除每一行时发生的情况进行比较。TRUNCATE 会将表的 HWM 重置回“零”，并将截断表上的关联索引。如果您计划删除表中的每一行，则 TRUNCATE（如果可以使用）将是出于此原因选择的方法。

[http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:492636200346818072](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:492636200346818072)

希望能帮助到你...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T06:07:31.440

1.  正确的
2.  触发器不会触发，你是对的，没有 DML 触发器应该在 DDL 语句上触发。

更多信息：[http ://www.orafaq.com/faq/difference_between_truncate_delete_and_drop_commands](http://www.orafaq.com/faq/difference_between_truncate_delete_and_drop_commands)

# sql-server-2008 - 我们如何在sql的自动生成列中重新生成顺序用户ID

> ID：10203638
> 
> 赞同：1
> 
> 时间：2012-04-18T05:59:58.133
> 
> 标签：sql-server-2008

我们如何在 SQL Server 的自动生成列中重新生成顺序用户 ID？

我有一个数据库，其中`Emp_id`是一个自动生成的列。我已经删除了这么多数据，以便`Emp_id`以非序列顺序出现，即

```
12
14
21
22
23
56... 
```

所以现在我想`Emp_id`重新编号并变成一个序列，即

```
1
2
3
4
5
6..... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:06:20.893

当该列`INT IDENTITY`在 SQL Server 中时，您**无法**更新表中包含的值。

如果这些值已通过其他方式“自动生成”，那么您可以执行以下操作：

```
;WITH RegeneratedValues AS
(
   SELECT 
      Emp_ID,
      NewID = ROW_NUMBER() OVER (ORDER BY Emp_ID)
   FROM
      dbo.YourTable
)
UPDATE dbo.YourTable
SET Emp_ID = regen.NewID
FROM RegeneratedValues regen
WHERE dbo.YourTable.Emp_ID = regen.Emp_ID 
```

CTE（公用表表达式）选择“旧”值并使用排序函数按该列`Emp_ID`生成新的连续数字。然后，该语句采用这两个值并根据这些值更新您的表 - 将新的、重新生成的、连续的、无间隙的数字分配给`Emp_ID``ROW_NUMBER()``UPDATE``Emp_ID`

# mod-rewrite - vhost 设置将多个域名和 www 版本重定向到单个非 www 域

> ID：10203639
> 
> 赞同：0
> 
> 时间：2012-04-18T06:00:12.330
> 
> 标签：mod-rewrite, vhosts

我拥有两个域名：

*   域名.com
*   域名.net

…而且我无法确定如何最好地设置虚拟主机代码以实现一些目标：

1.  如果访问者输入这两个域名中的任何一个，他们会转到`domain.net`
2.  如果访问者在前面带有 www 的这两个域名中输入任何一个，他们*仍然*会转到`domain.net`（*不带 www*）
3.  保留文件路径，因此：
    *   `domain.com/file.php`最终去`domain.net/file.php`
    *   `www.domain.com/deeper/path/`最终去`domain.net/deeper/path/`
    *   `www.domain.net`最终去`domain.net`
    *   …等等

我在[这个 Q/A 条目](https://stackoverflow.com/questions/529334/how-to-dynamically-redirect-www-based-urls-to-non-www-urls-with-multiple-domains)中看到了我*认为*我需要的东西，但我不是 100% 确定的。有人可以确认（或更正）这将完全满足我的需要：

```
<VirtualHost *:80>
    ServerName  domain.net
    ServerAlias www.domain.net domain.com www.domain.com
    (the rest of the settings here)
</VirtualHost> 
```

……就这么简单吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T08:44:21.503

照原样，您的虚拟主机将接受您的别名并使用正确的文件进行响应，但不会重定向请求。如果您想要一个规范的子域，您可能需要添加一些重写规则：

```
<VirtualHost *:80>
    ServerName  domain.net
    ServerAlias www.domain.net domain.com www.domain.com

    RewriteEngine On
    RewriteCond %{HTTP_HOST}    !^domain\.net [NC]
    RewriteCond %{HTTP_HOST}    !^$
    RewriteRule ^/(.*)  http://domain.net/$1 [L,R=301]

    (the rest of the settings here)
</VirtualHost> 
```

检查[http://httpd.apache.org/docs/2.0/rewrite/rewrite_guide.html#canonicalhost](http://httpd.apache.org/docs/2.0/rewrite/rewrite_guide.html#canonicalhost)以获得进一步的解释

# android - 取消Android通知时执行代码

> ID：10203644
> 
> 赞同：5
> 
> 时间：2012-04-18T06:00:46.340
> 
> 标签：android, notifications

我已经进行了一些搜索，但无法找到任何密切相关的内容。

当用户在 Android 中取消通知时（通过将通知滑动到屏幕的一侧），有没有人知道检测这种情况的干净方法？我认为在应用程序中能够取消通知并让应用程序识别并在应用程序中将某些内容标记为已读，而不是单击通知并打开应用程序以将某些内容标记为已读，这将是一个相当方便的功能。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T16:01:17.300

今天遇到了[这个](https://stackoverflow.com/questions/3630733/how-to-check-which-notifications-are-active-in-status-bar-in-android-dev)问题。看起来第二个答案有一个有趣的解决方案来检测通知是否仍然显示。这适用于 API 11 之前的设备。任何运行 API 11 或更新版本的设备都可以在清除通知时使用[setDeleteIntent()](http://developer.android.com/reference/android/app/Notification.Builder.html#setDeleteIntent%28android.app.PendingIntent%29)来触发 PendingIntent。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-16T11:14:53.590

卢克的回答帮助了我。谢谢！

我也找到了这个`setDeleteIntent()`例子，分享给大家参考。

[如何使用删除意图对清除通知执行一些操作？](https://stackoverflow.com/questions/13028122/how-to-use-delete-intent-to-perform-some-action-on-clear-notification)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T06:03:51.610

如果你的意思是，如何检测通知栏中使用的滑动抽屉的滑动动作，这是不可能的伙计......

# android - 从 Android 中的特殊字符中解析文本

> ID：10203647
> 
> 赞同：0
> 
> 时间：2012-04-18T06:01:09.130
> 
> 标签：android, parsing, text, special-characters

我从数据库中获取必须在视图中显示的文本。我得到的文本是这样的：

外科 - 圣保罗联邦大学，04-18 11:18:30.092：E/AdapterSpeakers(576)：健康科学中的光疗 � Nupen。

现在我需要从上面的文本中删除特殊字符“ �”。我已经尝试了 HTML.from HTML 以及 URLDecoder.decode("My Text", HTTP.UTF_8)。但它不起作用。

任何人都可以请在这里帮助我。

谢谢，大卫布朗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:10:50.857

您在 Text 中获得的特殊字符并不是真正的特殊字符 (�)，它是一种不可读的格式。你不能解析这样的字符......

# .net - 如何使用 C# 获取 RAM 的完整内存转储

> ID：10203653
> 
> 赞同：3
> 
> 时间：2012-04-18T06:01:24.883
> 
> 标签：.net, c#-4.0, memory

如何使用 C#.NET 获得完整的内存转储？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T12:14:53.433

唯一安全的方法是导致蓝屏并让 Windows 自己获取转储。导致蓝屏是通过`KeBugCheckEx`内核函数发生的，您需要一个定制的设备驱动程序以编程方式调用它。或者您可以使用[`CrashOnCtrlScroll`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff545499%28v=vs.85%29.aspx)注册表技巧并自己触发它。

[`.crash`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff545491%28v=vs.85%29.aspx)或者，您可以使用两台计算机将内核调试器连接到系统，并使用调试器命令触发内存转储。

SysInternals 的 LiveKD 之类的方法可以在同一台计算机上进行部分内核检查，但它们并不“准确”，因为内存不断变化。使用这些方法不可能获得健康的转储。

使用 C# 做所有这些是毫无意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:41:52.393

使用 MiniDumpWriteDump，您可以通过将 DumpType 指定为 MiniDumpWithFullMemory 来获得完整的进程转储。

您可以尝试通过获取进程句柄列表并使用 MiniDumpWriteDump 对其进行迭代来为系统中的所有进程获取此信息。我不知道您是否会遇到与安全相关的问题。

至于从用户模式进程中获取内核内存转储，据我所知，这应该是不可能的。

# c++ - 从循环比特集中分割子串

> ID：10203655
> 
> 赞同：3
> 
> 时间：2012-04-18T06:01:33.157
> 
> 标签：c++, bit-manipulation, bitset

我有一个（循环的）`bitset<N>`并且想检索子字符串`i...i+K-1`（它可能发生的地方`i = N - 1; K = 5`，所以它必须环绕并获取`N-1; 0; 1; 2; 3`），作为另一个`bitset<K>`（K当然在编译时已知）

显而易见的事情不起作用，因为`operator &`不允许不同大小的操作数（尽管这很简单？）

```
bitset<N> data = ...;
bitset<K> mask; mask = ~mask;
bitset<K> rotated = in << i | in >> (K - i);
bitset<K> slice = rotated & mask; 
```

下一个最好的东西不适用于大型`N`

```
bitset<K> slice( rotated.to_ullong() & mask.to_ullong() ); 
```

不执行怎么办`bitset<min<N,K>::value> operator &(bitset<N>,bitset<K>)`？（也许效率不那么低，这种方法复制了 3 次）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T20:01:09.750

正如您所见，没有一个 bitset 公共成员函数支持在不同大小的 bitset 之间进行复制。如果您有不适合 ulong 的集合，则转换为 ulong 函数没有用。我不明白为什么标准至少不能有一个支持不同大小的复制构造函数和赋值运算符。也就是说，考虑到标准课程，我看不到一次复制一个位的任何方法。

我建议如下：

```
模板⟨size_t D_SZ,size_t S_SZ⟩
void CopyBitset(std::bitset⟨D_SZ⟩ &dest, const std::bitset⟨S_SZ⟩ &source,size_t idx,
    size_t 计数，size_t destidx=0)
{
        for(size_t i = 0; i != count;++i){
                dest.set((i + destidx) % D_SZ, 源[(i + idx) % S_SZ]);      
        }
}

```

至少将移位和复制操作结合起来。您还可以查看 boost 的动态位集，看看它是否更符合您的使用情况。

# android - Android Activity 在后台显示警报对话框导致崩溃

> ID：10203658
> 
> 赞同：0
> 
> 时间：2012-04-18T06:01:37.697
> 
> 标签：android

我打开了一个应用程序活动A。现在我通过网络服务调用一段时间后按下主页按钮我尝试在活动A的alertdialog中显示消息。然后我尝试通过单击应用程序图标打开应用程序强制关闭.我在这里注意到的一件事是它调用了活动 onCreate()。有人可以给我建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:18:43.150

你不能`AlertDialog`没有任何显示`UserInterface`，相反，你可以尝试在里面显示 AlertDialog ，`onResume()`这样它就会在你的 Activity 时弹出`restarts/resumes`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:14:04.447

为什么不点击返回按钮（然后应用程序退出），当你再次打开时，看看它是否仍然强制关闭。然后你就可以找到原因了。除非我们看到代码，否则有点难以分辨

# jquery - 通过绝对位置的动画在点击时隐藏和显示 div，并在隐藏时将其删除

> ID：10203662
> 
> 赞同：0
> 
> 时间：2012-04-18T06:01:44.390
> 
> 标签：jquery, css, position, jquery-animate, css-position

我想要：

1.  单击“NEW”按钮将新 DIV 添加到“CONTAINER”中 - 这很好用

2.  单击“移动”按钮 - 获取 $array - 然后将容器移动到合适的位置 - 然后为 $array 中的每个项目在“CONTAINER”中附加新的“DIV” - 然后将“CONTAINER”动画到“left：0” - 这不会不行

3.  单击“REMOVE”按钮 - 将“CONTAINER”动画到屏幕外，并从“CONTAINER”中删除所有 DIV

4.  [JsFiddle 示例](http://jsfiddle.net/ynternet/vykV9/)

5.  [为什么它在网络](http://ynternet.sk/test2/4/)上不起作用？

HTML

```
<div class="panel">
    <button class='new'> + </button>
    <button class='move'> &gt; </button>
    <button class='remove'> &lt; </button>
</div>
<div class="container">
</div> 
```

CSS

```
.block {
   margin       : 0px;
   width        : 200px;
   display      : inline-block;
   border-right : thin dashed #aaa;
   opacity      : 0;
}
.head {
   margin : 0px;
   padding: 5px;
   height : 30px;
   background-color: red;
   color  : white;
}
.body {
   margin : 0px;
   padding: 5px;
   height : 190px;
   background-color: #ddd;
   color  : black;
}
.panel {
   position  : absolute;
   top       : 50px;
   padding   : 5px;
   color     : #FFF;
   font-size : 15px;
   background: #d30;
   height    : 25px;
   -webkit-border-radius: 4px;
   -moz-border-radius: 4px;
   border-radius: 4px;
   cursor    : pointer;
}
.container {
   position: absolute;
   top  : 90px;
   left : 0px;
}
button{
   width   : 25px;
   background  : none;
   cursor      : pointer;
   font-family : 'voltaeftu-regular',Times New Roman;
   font-size   : 18px;
   color   : #fff;
   border  : none;
   margin  : 0px;
   padding : 0px;
} 
```

jQuery：

```
$(".remove").click(function(){
    var x_width = $('.container').find('.block').width();
    var x_all = $('.container').find('.block').size();
    var all_width = -10 - ( x_width * x_all ) ;
    $(".container").animate({
        left: all_width
    }, 500 );
 });

$(".new").click(function()  {
       $('.container').append( $('<div class="block" id="new"><div class="head">HEADER</div><div class="body">text text text</div></div>', {
           css: {
               display: 'inline-block',
               opacity: 0
           }
       }).animate({ opacity: 1  }) );
});

// array
var $array = [ '001', '002', '003', '004', '005' ];

$(".move").click(function(){
   var array_length = $array.length;
   var array_width = 0 - array_length * 200;
   $('.container').css ({ left: array_width});
   $.each( $array , function(item, value){
               $('.container').apped('<div class="block" id="'+value+'"><div  class="head">HEADER '+value+'</div><div class="body">text text  text</div></div>', {
                       css: {
                           display: 'inline-block',
                           opacity: 0
                           }
                   }).animate({ opacity: 1  });
           });
    $('.container').animate({ left: 0});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:22:53.483

您遇到的一个问题是您在将原始块移动到时没有计算原始块的宽度`left:0`，这是一个修复：

```
var block_width = $(".block").width();
var array_width = (array_length * block_width) - block_width;
$('.container').css ({ left: array_width}); 
```

之前，您将它移动到其自身的宽度 * 数组的长度上，这意味着它被推离了屏幕，因为它已经存在的宽度没有被计算在内。

但是在我解决了这个问题之后，div 就有点堆积起来了。我假设您希望它们水平排列？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T06:23:32.533

每当我完成 javascript 时，声明 DOM 对象和事件处理程序的顺序很重要。在您的网络示例（第 5 号）中，您的 jquery 事件处理（单击等）是在使用 HTML 创建这些 DOM 对象之前设置的。尝试将您的 js 脚本移动到页面底部的 end body 标记之前。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T06:28:34.813

您应该在 $(document).ready() 函数中包含所有这些 javascript：

```
$(document).ready(function() {
   // put all your jQuery goodness in here.
 }); 
```

# php - Symfony 1.4 - 无法加载 cacheHelper.php

> ID：10203669
> 
> 赞同：1
> 
> 时间：2012-04-18T06:02:12.253
> 
> 标签：php, amazon-ec2, symfony-1.4, unauthorized, invalidargumentexception

我刚刚在 Amazon EC2 AMI Linux 上设置了 symfony 1.4。

每件事似乎都配置得很好，但是当我打开默认的 h*tp://ec2-xxxxxxx-.amazonaws.com/ URL 时，它显示给我`401 | Unauthorized | InvalidArgumentException`，错误是：

```
Unable to load "cacheHelper.php" helper in: SF_ROOT_DIR/apps/frontend/lib/helper, SF_ROOT_DIR/lib/helper, SF_ROOT_DIR/lib/vendor/symfony/lib/helper. 
```

任何帮助表示赞赏。

```
<VirtualHost *:80>
  ServerName ec2-184-73-90-216.compute-1.amazonaws.com
  DocumentRoot "/var/www/html/project/web"
  DirectoryIndex index.php
  <Directory "/var/www/html/project/web">
    AllowOverride All
    Allow from All
  </Directory>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:16:47.920

好吧，这里的配置更错误。在您的数据库连接中添加密码或至少“：” `i18n.yml`：

```
database: mysql://user:pass@localhost/db
database: mysql://user:@localhost/db 
```

顺便说一句，您的索引也有问题：

```
Fatal error: Call to a member function getId() on a non-object in /var/www/html/project/apps/frontend/modules/user/actions/actions.class.php on line 41 
```

另外，不要忘记添加别名以`/sf`在工具栏中显示图标：

```
Alias /sf /var/www/html/project/lib/vendor/symfony/data/web/sf
<Directory "/var/www/html/project/lib/vendor/symfony/data/web/sf">
  AllowOverride All
  Allow from All
</Directory> 
```

# .htaccess - 重写搜索结果

> ID：10203674
> 
> 赞同：2
> 
> 时间：2012-04-18T06:02:28.057
> 
> 标签：.htaccess, mod-rewrite

我已经阅读了有关 mod_rewrite 的每一个教程，但我无法弄清楚这一点。

我想将搜索网址从 重写`www.domain.com/?s=query`为`www.domain.com/search/query`。到目前为止，我设法使用此规则实现了这一点：

```
RewriteCond %{THE_REQUEST} ^[A-Z]+\ /(#[^?&\ ]*)?\?([^&\ ]*&)?s=([^&\ ]+)[^\ ]*\ HTTP/
RewriteRule ^$ http://www.domain.com/search/%3? [R=301,L] 
```

问题是某些查询会导致有几个搜索结果页面可以通过`www.domain.com/?s=query&nggpage=n`（其中 n 优于 2）访问。

在这种情况下，我想重写它并最终得到如下网址：`www.domain.com/search/query/nggpage-n`。

不太确定如何实现。我正在寻求帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:56:46.743

我认为您将不得不分多个步骤分解重写。像这样的东西可以完成这项工作，我简化了你的条件：

1.  检查是否存在搜索参数，重写目标路径并设置`env`标志以供以后测试

    ```
    RewriteCond %{QUERY_STRING} s=([^&\ ]+)
    RewriteRule ^/?$ /search/%1 [E=redirect:true] 
    ```

2.  如果设置了重定向并找到了分页参数，则附加分页路径

    ```
    RewriteCond %{ENV:redirect} true
    RewriteCond %{QUERY_STRING} nggpage=(\d+)
    RewriteRule ^/(.*)$ /$1/nggpage-%1 
    ```

3.  删除第 1 页的分页

    ```
    RewriteCond %{ENV:redirect} true
    RewriteRule ^/(.*)/nggpage-1$ /$1 
    ```

4.  如果设置了重定向，让我们重定向

    ```
    RewriteCond %{ENV:redirect} true
    RewriteRule ^/(.*)$ http://www.domain.com/$1? [R=301,L] 
    ```

# c++ - 如何调试“C++ 函数不接受 0 个参数”错误？

> ID：10203684
> 
> 赞同：-1
> 
> 时间：2012-04-18T06:03:11.840
> 
> 标签：c++, parameters, pass-by-reference, local-variables, function-prototypes

在我的 C++ 编程课程中，我的任务是为 5 名员工创建工资单记录器。要求之一是没有全局变量，因此我认为这需要我在每个单独的函数中本地声明变量并传递它们。

我知道错误的含义，但我不知道如何实施解决方案。我什至不确定按引用传递/按值传递是否对参数有意义，我无法编译，因为关于 doCalculations()、displayPayrollSummaryResults() 和 displayEmployeeResults() 的 3 个错误在主中有 0 个参数()。这是我拥有的 doCalculations() 。

在此之前还有另一个函数称为 getInput，我在其中获取 empID、payrollType.... 的用户输入并将它们放入 payrollArray。数组的其余部分用于存储来自该函数的计算数据。之后还有几个函数来显示结果（参见最后的完整代码）。

```
void doCalculations(
        double payrollArray[12][5], 
        int &empID, 
        char &payrollType, 
        double &hoursWorked, 
        double &payRate, 
        int &unionCode
        )
    {
        // Defeind Variables - Calculations
        int totalEmployee;
        double totalGrossPay;
        double totalNetPay;
        double highestGrossPay;
        double lowestGrossPay;
        double idHighestGrossPay;
        double idLowestGrossPay;
        double averageGrossPay;
        double averageNetPay;

        // - Pay Calucations
        double regularPay;
        double overtimePay;
        double grossPay;
        // - Tax Calculations
        double stateTax;
        double federalTax;
        double totalTax;
        // - Union Dues
        double unionDues;
        // - Net Pay
        double netPay;

        //Pay Calucations - Work more than 40 hours
        if( hoursWorked > 40 ){
            regularPay = payRate * 40;
            overtimePay = ( 1.5 * payRate ) * ( hoursWorked - 40 );
            grossPay = regularPay + overtimePay;
        }
        //Pay Calucations - Work less than 40 hours
        else{
            regularPay = payRate * hoursWorked;
            overtimePay = 0;
            grossPay = regularPay;
        }
        //Put pay calcuations into array
        payrollArray[4][totalEmployee] = regularPay;
        payrollArray[5][totalEmployee] = overtimePay;
        payrollArray[6][totalEmployee] = grossPay;

        //Taxes Calculations
            // State Tax Calculations
            if( grossPay < 500)
                stateTax = 0;
            else if ( grossPay >= 500 && grossPay <= 1000 )
                stateTax = grossPay * 0.03;
            else if ( grossPay > 1000)
                stateTax = grossPay * 0.05;
            // Federal Tax Calculations
            if( grossPay < 500)
                federalTax = 0;
            else if ( grossPay >= 500 && grossPay <= 1000 )
                federalTax = grossPay * 0.05;
            else if ( grossPay > 1000)
                federalTax = grossPay * 0.07;
            totalTax = stateTax + federalTax;
        // Put Taxes into array
        payrollArray[7][totalEmployee] = stateTax;
        payrollArray[8][totalEmployee] = federalTax;
        payrollArray[9][totalEmployee] = totalTax;

        // Define Variables - Union dues
        if (unionCode = 1)
            unionDues = 15.00;
        else if (unionCode = 2)
            unionDues = 25.00;
        else if (unionCode = 3)
            unionDues = 35.00;

        // Net Pay Calculation
        netPay = grossPay - totalTax - unionDues;

        // Put unionDues & netPay into array
        payrollArray[10][totalEmployee] = unionDues;
        payrollArray[11][totalEmployee] = netPay;

        // Add 1 to totalEmployee per calculation
        totalEmployee += 1;

        // Perpetual Summary Data Calculation

        // Total Gross Pay (Category 6)
        for ( int i = 0; i < totalEmployee; ++i) 
        totalGrossPay += payrollArray[6][i];

        // Total Net Pay (Category 11)
        for ( int i = 0; i < totalEmployee; ++i) 
        totalNetPay += payrollArray[11][i];

        // Find Employee ID number of highest gross pay
            // Compare and Find higest gross pay
            highestGrossPay = 0; // assume highest gross pay is 0 for now
            for (int grossPay = 0; grossPay < totalEmployee; ++grossPay)
            {
                if ( payrollArray[6][grossPay] > highestGrossPay )
                    highestGrossPay = payrollArray[6][grossPay]; // new highestGrossPay, gross pay field is at 6.
            }
            // Using highest gross pay to find corresponding employee ID
            for (int id = 0; id < totalEmployee; ++ id)
            {
                if ( payrollArray[6][id] == highestGrossPay)
                    idHighestGrossPay = payrollArray[0][id]; // the empID field is at 0,
            }

        // Find Employee ID number of lowest gross pay
            // Compare and Find lowest gross pay
            lowestGrossPay = 3150; // assume lowest gross pay is maximum of 3150 for now
            for (int grossPay = 0; grossPay < totalEmployee; ++grossPay)
            {
                if ( payrollArray[6][grossPay] < lowestGrossPay )
                    lowestGrossPay = payrollArray[6][grossPay]; // new lowestGrossPay, gross pay field is at 6.
            }
            // Using highest gross pay to find corresponding employee ID
            for (int id = 0; id < totalEmployee; ++ id)
            {
                if ( payrollArray[6][id] == lowestGrossPay)
                    idLowestGrossPay = payrollArray[0][id]; // the empID field is at 0,
            }

        // Average Gross Pay
        averageGrossPay = totalGrossPay / totalEmployee;
        // Average Net Pay
        averageNetPay = totalNetPay / totalEmployee;
    } 
```

在 main() what to do with newPayroll.doCalculations("what to put here?") 中，我只是通过试验和错误放置 (double payrollArray[12][5], int &empID....)，而不是相当保留 C++ 课程的构造函数或函数原型，也许我缺少一些代码块？

```
int main()
{
    // Introduction Message
    cout << "WELCOME - EMPLOYEE PAYROLL RECORDER" << endl;
    cout << endl;
    Payroll newPayroll;
    int employeeLimit = 0; // Employee limit counter
    char addEmployee = 'y';// Initial Yes on Add Employee 

    do{
        newPayroll.getInput();
        newPayroll.doCalculations();
        cout << "Would you want to continue adding employees? Enter [Y] or [y] for Yes." << endl;
        cout << "Otherwise Press Any Other Character to Stop adding more Records" << endl;
        cin >> addEmployee;
        ++employeeLimit;
    }while((addEmployee == 'y' || addEmployee == 'Y') && employeeLimit < 5);

    cout << endl; // blank line separator

    newPayroll.displayEmployeeResults();

    cout << endl; // blank line separator

    newPayroll.displayPayrollSummaryResults();

    cout << endl; // blank line separator

    system("PAUSE");
    return 0;
} 
```

下面是程序的完整代码：

```
#include "stdafx.h"
#include <iostream>
#include <iomanip>

using namespace std;

// Payroll class definition
class Payroll
{

public:
    /* getInput(), Function to accept and validates data, stores valid input data in arrays */
    void getInput()
    {   
        int empID;
        char payrollType;
        double hoursWorked;
        double payRate;
        int unionCode;
        int totalEmployee;

        double payrollArray[12][5]; // Initialize a 12 rows 5 coloums array for storing payroll data.
        char payrollTypeArray[1][5]; // Initialize a separate array for storing payrollType char data.

        cout << "Please Enter Employee ID: " << endl;
        cin >> empID;
        while( empID < 100 || empID > 800 ){
        cout << "The Employee ID Entered is Invalid, Please Enter Employee ID (100 - 800): " << endl;
        cin >> empID;
        }
        //put employee id into array
        payrollArray[0][totalEmployee] = empID;

        cout << "Please Enter payroll type: " << endl;
        cin >> payrollType;
        while( payrollType != 'H' && payrollType != 'h' ){
        cout << "The Payroll Type Entered is Invalid, Please Enter Payroll Type (H or h): " << endl;
        cin >> payrollType; 
        }
        //put payrollType into array
        payrollTypeArray[1][totalEmployee] = payrollType;

        cout << "Please Enter Hours Worked: " << endl;
        cin >> hoursWorked;
        while( hoursWorked < 0 || hoursWorked > 60.0 ){
        cout << "The Hours Worked Entered is Invalid, Please Enter Hours Worked (0 - 60): " << endl;
        cin >> hoursWorked;
        }
        //put hoursWorked into array
        payrollArray[2][totalEmployee] = hoursWorked;

        cout << "Please Enter Pay Rate: " << endl;
        cin >> payRate;
        while( payRate < 8.50 || payRate > 45.00 ){
        cout << "The Hourly Pay Rate Entered is Invalid, Please Enter Pay Rate (8.50 - 45.00): " << endl;
        cin >> payRate;
        }
        //put payRate into array
        payrollArray[3][totalEmployee] = payRate;

        cout << "Please Enter Union Code: " << endl;
        cin >> unionCode;
        while( unionCode !=1 && unionCode !=2 && unionCode !=3 ){
        cout << "The Union Code Entered is Invalid, Please Enter Union Code (1, 2 or 3): " << endl;
        cin >> unionCode;
        }
    }

    /* doCalculations(), performs calculations using data sotred in input arrays, store
       calculation results in arrays, and accumulates totals */
    void doCalculations(
        double payrollArray[12][5], 
        int &empID, 
        char &payrollType, 
        double &hoursWorked, 
        double &payRate, 
        int &unionCode
        )
    {
        // Defeind Variables - Calculations
        int totalEmployee;
        double totalGrossPay;
        double totalNetPay;
        double highestGrossPay;
        double lowestGrossPay;
        double idHighestGrossPay;
        double idLowestGrossPay;
        double averageGrossPay;
        double averageNetPay;

        // - Pay Calucations
        double regularPay;
        double overtimePay;
        double grossPay;
        // - Tax Calculations
        double stateTax;
        double federalTax;
        double totalTax;
        // - Union Dues
        double unionDues;
        // - Net Pay
        double netPay;

        //Pay Calucations - Work more than 40 hours
        if( hoursWorked > 40 ){
            regularPay = payRate * 40;
            overtimePay = ( 1.5 * payRate ) * ( hoursWorked - 40 );
            grossPay = regularPay + overtimePay;
        }
        //Pay Calucations - Work less than 40 hours
        else{
            regularPay = payRate * hoursWorked;
            overtimePay = 0;
            grossPay = regularPay;
        }
        //Put pay calcuations into array
        payrollArray[4][totalEmployee] = regularPay;
        payrollArray[5][totalEmployee] = overtimePay;
        payrollArray[6][totalEmployee] = grossPay;

        //Taxes Calculations
            // State Tax Calculations
            if( grossPay < 500)
                stateTax = 0;
            else if ( grossPay >= 500 && grossPay <= 1000 )
                stateTax = grossPay * 0.03;
            else if ( grossPay > 1000)
                stateTax = grossPay * 0.05;
            // Federal Tax Calculations
            if( grossPay < 500)
                federalTax = 0;
            else if ( grossPay >= 500 && grossPay <= 1000 )
                federalTax = grossPay * 0.05;
            else if ( grossPay > 1000)
                federalTax = grossPay * 0.07;
            totalTax = stateTax + federalTax;
        // Put Taxes into array
        payrollArray[7][totalEmployee] = stateTax;
        payrollArray[8][totalEmployee] = federalTax;
        payrollArray[9][totalEmployee] = totalTax;

        // Define Variables - Union dues
        if (unionCode = 1)
            unionDues = 15.00;
        else if (unionCode = 2)
            unionDues = 25.00;
        else if (unionCode = 3)
            unionDues = 35.00;

        // Net Pay Calculation
        netPay = grossPay - totalTax - unionDues;

        // Put unionDues & netPay into array
        payrollArray[10][totalEmployee] = unionDues;
        payrollArray[11][totalEmployee] = netPay;

        // Add 1 to totalEmployee per calculation
        totalEmployee += 1;

        // Perpetual Summary Data Calculation

        // Total Gross Pay (Category 6)
        for ( int i = 0; i < totalEmployee; ++i) 
        totalGrossPay += payrollArray[6][i];

        // Total Net Pay (Category 11)
        for ( int i = 0; i < totalEmployee; ++i) 
        totalNetPay += payrollArray[11][i];

        // Find Employee ID number of highest gross pay
            // Compare and Find higest gross pay
            highestGrossPay = 0; // assume highest gross pay is 0 for now
            for (int grossPay = 0; grossPay < totalEmployee; ++grossPay)
            {
                if ( payrollArray[6][grossPay] > highestGrossPay )
                    highestGrossPay = payrollArray[6][grossPay]; // new highestGrossPay, gross pay field is at 6.
            }
            // Using highest gross pay to find corresponding employee ID
            for (int id = 0; id < totalEmployee; ++ id)
            {
                if ( payrollArray[6][id] == highestGrossPay)
                    idHighestGrossPay = payrollArray[0][id]; // the empID field is at 0,
            }

        // Find Employee ID number of lowest gross pay
            // Compare and Find lowest gross pay
            lowestGrossPay = 3150; // assume lowest gross pay is maximum of 3150 for now
            for (int grossPay = 0; grossPay < totalEmployee; ++grossPay)
            {
                if ( payrollArray[6][grossPay] < lowestGrossPay )
                    lowestGrossPay = payrollArray[6][grossPay]; // new lowestGrossPay, gross pay field is at 6.
            }
            // Using highest gross pay to find corresponding employee ID
            for (int id = 0; id < totalEmployee; ++ id)
            {
                if ( payrollArray[6][id] == lowestGrossPay)
                    idLowestGrossPay = payrollArray[0][id]; // the empID field is at 0,
            }

        // Average Gross Pay
        averageGrossPay = totalGrossPay / totalEmployee;
        // Average Net Pay
        averageNetPay = totalNetPay / totalEmployee;
    }

    /* displayEmployeeResults(), displays employee IDs and calculations results that are stored in arrays.*/
    void displayEmployeeResults(
        double payrollArray[12][5], 
        char payrollTypeArray[1][5], 
        int &totalEmployee
        ) 
    {
        int employeeCount;
        int arrayDataSetw = 5;
        int arrayTitleSetw = 12;

        //Display Data Array
            cout << setw(50) <<"Individual Employee Payroll Record" << endl;
            cout << endl;
            // Employee ID title
            cout << setw(arrayTitleSetw) << "Employee ID";
                for (employeeCount = 0; employeeCount < totalEmployee; ++employeeCount)
                cout << setw(arrayDataSetw) << payrollArray[0][employeeCount] << setw(arrayDataSetw);
                cout << endl;
            // Payroll Type title
            cout << setw(arrayTitleSetw) << "Payroll Type";
                for (employeeCount = 0; employeeCount < totalEmployee; ++employeeCount)
                cout << setw(arrayDataSetw) << payrollTypeArray[1][employeeCount] << setw(arrayDataSetw);
                cout << endl;
            // Hours Worked title
            cout << setw(arrayTitleSetw) << "Hours Worked";
                for (employeeCount = 0; employeeCount < totalEmployee; ++employeeCount)
                cout << setw(arrayDataSetw) << payrollArray[2][employeeCount] << setw(arrayDataSetw);
                cout << endl;
            // Pay Rate title
            cout << setw(arrayTitleSetw) << "Pay Rate";
                for (employeeCount = 0; employeeCount < totalEmployee; ++employeeCount)
                cout << setw(arrayDataSetw) << "$" << payrollArray[3][employeeCount] << setw(arrayDataSetw);
                cout << endl;
            // Regular Pay title
            cout << setw(arrayTitleSetw) << "Regular Pay";
                for (employeeCount = 0; employeeCount < totalEmployee; ++employeeCount)
                cout << setw(arrayDataSetw) << "$" << payrollArray[4][employeeCount] << setw(arrayDataSetw);
                cout << endl;
            // Overtime Pay title
            cout << setw(arrayTitleSetw) << "Overtime Pay";
                for (employeeCount = 0; employeeCount < totalEmployee; ++employeeCount)
                cout << setw(arrayDataSetw) << "$" << payrollArray[5][employeeCount] << setw(arrayDataSetw);
                cout << endl;
            // Gross Pay title
            cout << setw(arrayTitleSetw) << "Gross Pay";
                for (employeeCount = 0; employeeCount < totalEmployee; ++employeeCount)
                cout << setw(arrayDataSetw) << "$" << payrollArray[6][employeeCount] << setw(arrayDataSetw);
                cout << endl;
            // State Tax title
            cout << setw(arrayTitleSetw) << "State Tax";
                for (employeeCount = 0; employeeCount < totalEmployee; ++employeeCount)
                cout << setw(arrayDataSetw) << "$" << payrollArray[7][employeeCount] << setw(arrayDataSetw);
                cout << endl;
            // Federal Tax title
            cout << setw(arrayTitleSetw) << "Federal Tax";
                for (employeeCount = 0; employeeCount < totalEmployee; ++employeeCount)
                cout << setw(arrayDataSetw) << "$" << payrollArray[8][employeeCount] << setw(arrayDataSetw);
                cout << endl;
            // Total Tax title
            cout << setw(arrayTitleSetw) << "Total Tax";
                for (employeeCount = 0; employeeCount < totalEmployee; ++employeeCount)
                cout << setw(arrayDataSetw) << "$" << payrollArray[9][employeeCount] << setw(arrayDataSetw);
                cout << endl;
            // Union Dues title
            cout << setw(arrayTitleSetw) << "Union Dues";
                for (employeeCount = 0; employeeCount < totalEmployee; ++employeeCount)
                cout << setw(arrayDataSetw) << "$" << payrollArray[10][employeeCount] << setw(arrayDataSetw);
                cout << endl;
            // Net Pay title
            cout << setw(arrayTitleSetw) << "Net Pay";
                for (employeeCount = 0; employeeCount < totalEmployee; ++employeeCount)
                cout << setw(arrayDataSetw) << "$" << payrollArray[11][employeeCount] << setw(arrayDataSetw);
                cout << endl;
    }

    /* displayPayrollSummaryResults(), displays summary totals and averages */
    void displayPayrollSummaryResults(
        int &totalEmployee, 
        double &totalGrossPay, 
        double &totalNetPay, 
        double &idHighestGrossPay, 
        double &highestGrossPay, 
        double &idLowestGrossPay, 
        double &lowestGrossPay, 
        double &averageGrossPay, 
        double &averageNetPay
        ) 
    {
        int summaryDataSetw = 47;
        // Display Summary Data
        cout << setw(50) <<"Employee Payroll Summary" << endl;
        cout << endl;
        cout << setw(summaryDataSetw) << "Total Number of Employees on record is: " << totalEmployee << endl;
        cout << setw(summaryDataSetw) << "Total Gross Pay is: $"  << totalGrossPay << endl;
        cout << setw(summaryDataSetw) << "Total Net Pay is: $"  << totalNetPay << endl;
        cout << setw(summaryDataSetw) << "Employee with the highest gross pay: Employee #" << idHighestGrossPay << " earned $" << highestGrossPay << endl;
        cout << setw(summaryDataSetw) << "Employee with the lowest gross pay: Employee #" << idLowestGrossPay << " earned $" << lowestGrossPay << endl;
        cout << setw(summaryDataSetw) << "Average gross pay is: $"  << averageGrossPay << endl;
        cout << setw(summaryDataSetw) << "Average net pay is: $"  << averageNetPay << endl;

    }
};

int main()
{
    // Introduction Message
    cout << "WELCOME - EMPLOYEE PAYROLL RECORDER" << endl;
    cout << endl;
    Payroll newPayroll;
    int employeeLimit = 0; // Employee limit counter
    char addEmployee = 'y';// Initial Yes on Add Employee 

    do{
        newPayroll.getInput();
        newPayroll.doCalculations();
        cout << "Would you want to continue adding employees? Enter [Y] or [y] for Yes." << endl;
        cout << "Otherwise Press Any Other Character to Stop adding more Records" << endl;
        cin >> addEmployee;
        ++employeeLimit;
    }while((addEmployee == 'y' || addEmployee == 'Y') && employeeLimit < 5);

    cout << endl; // blank line separator

    newPayroll.displayEmployeeResults();

    cout << endl; // blank line separator

    newPayroll.displayPayrollSummaryResults();

    cout << endl; // blank line separator

    system("PAUSE");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:07:05.680

这是因为您的函数调用参数与您的函数定义不匹配。例如：

```
void doCalculations(
        double payrollArray[12][5], 
        int &empID, 
        char &payrollType, 
        double &hoursWorked, 
        double &payRate, 
        int &unionCode
        ) 
```

是你的定义，有 6 个参数。您需要参数来调用此函数。但是你用 0 个参数调用它

```
newPayroll.doCalculations(); 
```

你 `displayEmployeeResults`还需要3个参数：

```
void displayEmployeeResults(
        double payrollArray[12][5], 
        char payrollTypeArray[1][5], 
        int &totalEmployee
        ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-23T02:50:36.693

在世界上几乎所有的编程语言中，当一个函数需要参数时，每次要调用它时都需要全部编写。

通俗地说，当一个函数看起来像这样 -> `hello(int t)`<- 时，你想调用它，你使用 -> `hello([number here])`<-。

我总是把这想象成你要去商店，你要买东西。

想象：

你去找铁匠，请他为你制作一把铁剑。

这是要求：`makeIronSword(int lenght, int money, bool handle)` 这是你对他说的：`makeIronSword(5, 250, true);`

# cloud - 为什么centos6.0去掉了对xen的支持

> ID：10203687
> 
> 赞同：0
> 
> 时间：2012-04-18T06:03:25.137
> 
> 标签：cloud, centos, virtualization, xen

在centos5.x 中，你可以简单地通过yum 安装xen，但是在centos6.0 上不能这样做。

那么为什么centos6.0去掉了对xen的支持呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T22:23:34.850

CentOS 是从 RHEL 衍生而来的，通过重新编译源材料和删除版权作品等。因此，CentOS 完全依赖于 RedHat 的工作。RedHat 决定它作为一个商业实体准备支持哪些技术，以及最终在 RHEL 中最终在 CentOS 中的结果。

Xen 已从 CentOS 中删除，因为 RedHat 选择将其从 RHEL 中删除。

RedHat 做出商业决定，选择将其支持和资源用于 KVM 项目，而不是 Xen。这种选择的原因是有争议的，但可能包括有关项目治理的技术和政治推理。

XenSource 作为 2006 年左右为 Xen 项目做出贡献的主要实体，决定将其商业支持的 Xen 版本作为设备（即整个操作系统）而不是作为可以安装在用户现有 Linux 上的软件来提供发行版，例如 RHEL 或 SLES。它采用这种方法是为了控制自己的命运——另一种方法是采用发行版软件方法，这将对 XenSource 对软件进行 QA 的能力产生严重后果，并对其软件发布周期施加严格的外部约束。

思杰随后收购了 XenSource，并继续采用设备策略，直到今天它对 XenServer 所做的那样。

在 Citrix 收购 XenSource 后一段时间，RedHat 收购了 Qumranet，这是一个商业实体，其工程师为 KVM 做出了贡献。此时，RedHat 从 Xen 转向 KVM。

仍然可以将 Xen 与 CentOS 一起使用，既可以通过使用 Citrix XenServer 以商业支持的方式使用，也可以通过 xen.org 和 Xen Cloud Project 以发烧友自制方式使用。请参阅[http://xen.org/download/xcp/index_1.5.0.html](http://xen.org/download/xcp/index_1.5.0.html)或尝试在 xen-users 邮件列表中四处询问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T04:37:57.097

因为它已经被[KVM](http://en.wikipedia.org/wiki/Kernel-based_Virtual_Machine)取代了。

# css - 如何将多个“相对”的 div 与堆叠的图像居中？

> ID：10203695
> 
> 赞同：3
> 
> 时间：2012-04-18T06:04:20.300
> 
> 标签：css, html

我想要一组横向堆叠的 div，如下所示：

```
D0
---------------------------------------
|     ------ ------ ------ ------     |
|     |    | |    | |    | |    |     |
|     | D1 | | D2 | | D3 | | D4 |     |
|     |    | |    | |    | |    |     |
|     ------ ------ ------ ------     |
--------------------------------------- 
```

以 D1 为中心。我可以通过将 D0 设置为`text-align:center`. （我不能使用边距：自动，因为我不知道 D1 - D4 组合的宽度）。

但是，D1 到 D4 包含一堆我想要叠加的图像。我可以通过设置`position: relative`D1 和`position:absolute`img 标签来做到这一点。

问题是这会导致 D1-D4 看起来好像没有内容，并且他们失去了使用 text-align:center 居中的能力！还有其他方法可以实现我想要的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T06:07:13.037

使用`display : inline-block`for`d1, d2 d3`和`d4`（与 a 一起`vertical-align`）并`text-align: center`在父级上使用

这些元素不需要相对定位

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T06:25:50.527

嘿，我想你现在可能像这样

***CSS***

```
.d0{
    width:70%;
    background:green;
    text-align:center;
    margin:0 auto;
}

.d0 div{
    display:inline-block;
    margin:10px 0;
}

 .d1{
    background:yellow;
    position:relative;
}

 .d2{
    background:pink;
}

 .d3{
    background:darkred;
}

 .d4{
    background:lightblue;
} 
```

**HTML**

```
<div class="d0">

    <div class="d1">D1</div>
    <div class="d2">D2</div>
    <div class="d3">D3</div>
    <div class="d4">D4</div>

</div>
​ 
```

现场演示[http://jsfiddle.net/rohitazad/qCtwp/](http://jsfiddle.net/rohitazad/qCtwp/)

## --------------------------------------------------

或者如果您使用的表比[http://jsfiddle.net/rohitazad/qCtwp/1/](http://jsfiddle.net/rohitazad/qCtwp/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T06:11:39.660

可能你正在使用`flot:left`div 的属性，删除它，你可以使用`display:inline`div 然后它将位于 D0 的中心

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-18T06:30:27.153

```
<div id=d0 style="">
    <center><div id="dgroup" style="padding-top:10%;">
        <div id=d1 style="float:left;width=100px;height:180px">
              this is d1
        </div>

        <div id=d2 style="float:left;width=100px;height:180px">
              this is d2
        </div>

        <div id=d3 style="float:left;width=100px;height:180px">
              this is d3
        </div>

    </div></center>
</div> 
```

# php - 自动在php中重新缩放图像

> ID：10203699
> 
> 赞同：1
> 
> 时间：2012-04-18T06:04:35.130
> 
> 标签：php

我以谷歌页面速度测试了我的网站，他们建议我提供重新缩放的图像。

现在对于缩略图我正在使用这个 php

```
<?php 
if($ad_thumbnails) 
{ 
    if ($row['picfile']) $picfile = "{$datadir[adpics]}/{$row[picfile]}";

    else $picfile = "images/noimage2.png";

    $imgsize = GetThumbnailSize($picfile, $tinythumb_max_width, $tinythumb_max_height);
?> 
```

通过修改上述代码自动重新缩放图像的最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:54:36.403

有大量关于如何在 php 中调整图像大小的完整示例。本质上，您需要在 Web 服务器上启用[GD2 图像处理库](http://php.net/manual/en/book.image.php)，并且您需要使用

1.  [imagecreatefromjpeg](http://www.php.net/manual/en/function.imagecreatefromjpeg.php)（或 imagecreatefrompng 或 imagecreatefromgif）从原始文件创建图像资源

2.  [imagecreatetruecolor](http://www.php.net/manual/en/function.imagecreatetruecolor.php)为您的缩略图创建一个新画布（具有所需的缩略图尺寸）

3.  [imagecopyresampled](http://www.php.net/manual/en/function.imagecopyresampled.php)在新画布上创建原始图像的调整大小版本

这是一个完整的工作[示例](http://www.white-hat-web-design.co.uk/blog/resizing-images-with-php/)。或者，如果你很懒 :) 看看这个拖放[解决方案](http://shiftingpixel.com/2008/03/03/smart-image-resizer/)，它将仅通过 URL 解析进行智能图像大小调整和缓存。

# image - Qml Image fillMode需要抗锯齿

> ID：10203700
> 
> 赞同：3
> 
> 时间：2012-04-18T06:04:42.203
> 
> 标签：image, qt, qml, antialiasing

我在 QML 中有一段代码：

```
Image {
    anchors.rightMargin: 10
    anchors.leftMargin: 10
    anchors.bottomMargin: 10
    anchors.topMargin: 10
    anchors.fill: parent
    source: "Google Chrome Icon.png"
    fillMode: Image.PreserveAspectFit
    } 
```

图像随窗口自动拉伸。但是拉伸方法没有抗锯齿，因此结果很丑：

[![铬图像](../Images/20b3e8986070d590b8b97c7430be9ec5.png)](https://i.stack.imgur.com/vxbvu.png)

有什么方法可以使结果很好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T06:10:35.783

您可以通过启用它来启用抗锯齿`QDeclarativeView`，

```
QDeclarativeView view;
view.setRenderHints(QPainter::Antialiasing | QPainter::SmoothPixmapTransform);
view.setResizeMode( QDeclarativeView::SizeRootObjectToView );
view.setSource(QUrl("qrc:/main.qml"));
view.show(); 
```

如何在拉伸时使图像看起来不错，我建议您使用 svg 图像而不是 png 图像。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T09:59:35.057

作为纯 QML 解决方案，您可以简单地将元素的属性设置[`smooth`为](http://qt-project.org/doc/qt-4.8/qml-image.html#smooth-prop)：`Image``true`

```
import QtQuick 1.0

Image {
    smooth: true  // smoother image
    anchors.rightMargin: 10
    anchors.leftMargin: 10
    anchors.bottomMargin: 10
    anchors.topMargin: 10
    anchors.fill: parent
    source: "Google Chrome Icon.png"
    fillMode: Image.PreserveAspectFit
} 
```

# java - 如何获取已转发并扩展 140 个字符的推文的所有文本？

> ID：10203702
> 
> 赞同：8
> 
> 时间：2012-04-18T06:05:21.830
> 
> 标签：java, twitter, twitter4j, tweets

我已经开始学习`Twitter4j`API，并且已经从 Twitter 获得了使用它的所有凭据和令牌。我正在使用 twitter4j API 版本 2.2.5。

我可以`timeline`使用一个简单的 java 程序获得我自己的程序并将其打印在`console`. 我可以使用下面的代码获得我完成的所有推文和转推。

```
List<Status> statuses;
statuses = twitter.getUserTimeline();
for (Status status1 : statuses){
   System.out.println(status1.getText());
} 
```

问题是我转发了一条由 140 个字符组成的推文，所以转发后它变成了 140 多个字符。它不是在控制台中打印整个推文，而是`...`在最后打印。

```
 RT @xxxxxx: The ************************************ , but the pai..... 
```

我怎样才能得到整个推文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T03:11:13.170

基于[Twitter4J 的 Status Javadoc](http://twitter4j.org/en/javadoc/twitter4j/Status.html)，我会试试这个：

```
status1.getRetweetedStatus().getText() 
```

# php - 不确定如何使用 MySQL DB 处理从服务器 PHP 获取数据到 Android

> ID：10203703
> 
> 赞同：0
> 
> 时间：2012-04-18T06:05:33.703
> 
> 标签：php, android, mysql

我对这个示例应用程序的工作方式有一个简单的了解。我的服务器上有一个 MySQL DB 一个 PHP 脚本，我的 Android 应用程序中有一些代码。从我从 StackOverflow 和其他来源收集的信息来看，从我的数据库中获取数据的最佳方法似乎是向我的 PHP 脚本发送一些我想要的数据的参数（来自我的应用程序），然后将这些信息传递回来到应用程序。

截至目前，我的 android 应用程序只是使用 httppost 方法连接到 PHP 页面的 URI。它只是读取纯文本的网页并将其吐回屏幕上。我的问题是，如何将某种格式化的输出发送回我的应用程序，以便我可以对其进行排序，并将响应的不同部分放入我的应用程序的不同部分。

**例子：**

D B：

菜单编号| 晚餐 | 沙漠|

```
 1 | Chicken| Jello |
 2 | Steak  | Fruit |
 3 | Ham    | Cake  | 
```

PHP：获取参数（[http://website.com/script.php?param=1](http://website.com/script.php?param=1)）在数据库中查找并回显该行。

Android：将 httppost 发送到 URI 接受输入并将其显示在屏幕上

那么我可以分离传入数据的最佳方法是什么？

示例：这是来自菜单：1 您的晚餐将是：鸡肉您的甜点将是：果冻

基本上我怎样才能“解析”数据？我觉得应该有一个标准的方式（但我还不确定）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:08:20.563

也许在两端都使用 JSON。处理数据结构的最简单方法，PHP 和 Android 都有非常好的 API 供使用：

[http://php.net/manual/en/book.json.php](http://php.net/manual/en/book.json.php)

[http://developer.android.com/reference/org/json/package-summary.html](http://developer.android.com/reference/org/json/package-summary.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:15:10.293

使用Phonegap jquery mobile，处理php-mysql页面会非常轻松。您也可以使用 JSONP。

脚步：

1.  启动从 html 页面到 php 服务器页面的 JSONP 或 Ajax 请求，并处理 mysql db 数据并将响应返回给 html 页面。

# android - 只有当它已通过设备管理员远程锁定时，是否有办法强制解锁？

> ID：10203705
> 
> 赞同：1
> 
> 时间：2012-04-18T06:06:01.173
> 
> 标签：android, device-admin

如果用户没有设置设备解锁密码，那么我假设她不想在每次屏幕进入睡眠状态时都解锁它的痛苦（即使它存在安全风险）。在这里，可用性胜过安全性，我相信可能有很多人这样做。

但是，我正在尝试编写一个应用程序，以便万一手机丢失，它可以被远程锁定，并且只能通过用户密码解锁。现在这是第 22 条问题。

我想知道是否有一种方法，用户（小偷）只有在通过设备管理员远程锁定手机时才必须通过输入密码来解锁手机？如果它在安装过程中通过我的应用程序从用户侧一次性手动设置该 PIN，我可以。

是否有可能以某种方式使用android SDK？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:23:16.860

是的，我想你可以使用[这个包来做到这一点](http://developer.android.com/reference/android/app/admin/package-summary.html)

抱歉，我没有机会用它来进一步指导您。

# android - 如何向 Android 设备发送推送通知？

> ID：10203706
> 
> 赞同：0
> 
> 时间：2012-04-18T06:06:03.327
> 
> 标签：android

如何向 Android 设备发送推送通知？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:13:17.250

有一个服务叫做**Android C2DM** ( *Cloud-to-Device-Messaging* )。它将允许您在请求时向您的设备发送消息/警报。有关更多信息，请阅读[此](http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html?utm_source=twitterfeed&utm_medium=twitter)内容并进行注册，请单击[此](http://code.google.com/android/c2dm/)内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:12:59.003

[http://souravtechdiary.blogspot.in/2012/03/implementing-push-notifications-for.html](http://souravtechdiary.blogspot.in/2012/03/implementing-push-notifications-for.html)

希望它有所帮助，因为工作是

# php - 如何在php中显示上传过程栏？

> ID：10203718
> 
> 赞同：0
> 
> 时间：2012-04-18T06:07:09.240
> 
> 标签：php, file-upload, ftp, progress-bar

您好我正在尝试学习 php 中的 ftp 文件传输。我已经完成了所有上传部分。但我想在文件传输过程中显示上传过程栏。

```
if file size 5MB
then a process-bar display uploading process as

523KB...uploaded...4min remaining
1.2MB...uploaded...3.5min remaining
2.5MB...uploaded...2.3min remaining
3.9MB...uploaded...1.4min remaining
4.4MB...uploaded...30sec remaining
Done... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:11:03.607

为此，您需要 javascript。检查这里[https://jqueryui.com/progressbar/](https://jqueryui.com/progressbar/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T06:10:11.953

这不是一件容易的事。由于服务器仅在上传完成 100% 时才调用脚本。

您将需要使用 flash-uploader 或一些特殊的 apache mods 来获取有关正在进行的发布请求的信息。

闪存上传器：http: [//www.solmetra.com/en/disp.php/en_products/flash_uploader/uploader_intro](http://www.solmetra.com/en/disp.php/en_products/flash_uploader/uploader_intro)

或者在您的服务器上搜索`libapache2-mod-upload-progress`并安装该模块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T06:10:15.337

有一个可用的类[http://pear.php.net/reference/HTML_Progress-0.6.2/HTML_Progress/HTML_Progress_Bar_Horizo​​ntal.html](http://pear.php.net/reference/HTML_Progress-0.6.2/HTML_Progress/HTML_Progress_Bar_Horizontal.html) ！注意：您应该有一个接受 DHTML 功能的浏览器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T06:11:13.277

请参阅此进度条[http://progphp.com/progress.php](http://progphp.com/progress.php)。它是由 Rasmus 本人（PHP 的创建者）创建的。源代码可以在[http://progphp.com/progress.phps](http://progphp.com/progress.phps)看到。此示例使用 APC 模块。

要显示上传进度，您将需要[APC 模块](http://php.net/manual/en/book.apc.php)或[uploadprogress](http://pecl.php.net/package/uploadprogress) PECL 扩展之类的东西。PECL 扩展似乎受到某些人的青睐。

# sql - 如何在 varchar 中找到所有特殊符号的位置？

> ID：10203733
> 
> 赞同：2
> 
> 时间：2012-04-18T06:08:17.053
> 
> 标签：sql, sql-server-2008

我尝试过使用 patindex 和 charindex，但似乎它们都不会轻易地做我想做的事。Charindex 一次只想搜索一个符号，而 patindex 不允许“搜索自”索引，不允许我循环查找符号的所有索引。我有哪些选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T10:21:23.347

由于没有关于您的“特殊符号”是什么、如何存储以及您期望的输出的具体细节，这涉及到一些猜测工作，但我认为无论如何都可以应用我的回答的基本原则。获得所有事件的关键是使用递归 CTE 和`OUTER APPLY`. 每次 CTE 循环时，它都会用空格替换一个特殊字符，直到没有特殊字符为止，同时存储字符的位置。

**样本数据：**

```
DECLARE @SpecialSymbols TABLE (Symbol CHAR(1) NOT NULL PRIMARY KEY)
INSERT @SpecialSymbols VALUES ('@'), ('.'), ('['), (']')

DECLARE @TestData TABLE (StringToTest VARCHAR(100))
INSERT @TestData VALUES 
    ('test 1 [Using Square Brackets]'), 
    ('[Test2@EmailAddress.com]'), 
    ('No Special Symbols') 
```

**实际查询**

```
;WITH CTE AS
(   SELECT  *, STUFF(StringToTest, Position, 1, ' ') [ReworkedString]
    FROM    @TestData
            OUTER APPLY
            (   SELECT  CHARINDEX(Symbol, StringToTest) [Position], Symbol
                FROM    @SpecialSymbols
            ) Symbols
    WHERE   Position > 0
    UNION ALL
    SELECT  StringToTest, Symbols.Position, Symbols.Symbol, STUFF(ReworkedString, Symbols.Position, 1, ' ') [ReworkedString]
    FROM    CTE
            OUTER APPLY
            (   SELECT  CHARINDEX(Symbol, ReworkedString) [Position], Symbol
                FROM    @SpecialSymbols
                WHERE   Symbol = CTE.Symbol
            ) Symbols
    WHERE   Symbols.Position > 0
)

-- CTE NOW LOOKS LIKE:
--  | test 1 [[Using Square Brackets]   |   8   |   [   | test 1  [Using Square Brackets]
--  | test 1 [[Using Square Brackets]   |   30  |   ]   | test 1 [[Using Square Brackets 
--  | [Test2@EmailAddress.com]          |   20  |   .   | [Test2@EmailAddress com]
--  | [Test2@EmailAddress.com]          |   7   |   @   | [Test2 EmailAddress.com]
--  | [Test2@EmailAddress.com]          |   1   |   [   |  Test2@EmailAddress.com]
--  | [Test2@EmailAddress.com]          |   24  |   ]   | [Test2@EmailAddress.com 
--  | test 1 [[Using Square Brackets]   |   9   |   [   | test 1   Using Square Brackets]

SELECT  a.StringToTest, COALESCE(Location, '') [SpecialSymbolLocations]
FROM    @TestData a
        LEFT JOIN
        (   SELECT  DISTINCT
                    StringToTest,
                    -- THIS MERELY CONCATENATES ROWS INTO COLUMNS TO GET COMMA SEPARATED LIST
                    STUFF(( SELECT  ', ' + CONVERT(VARCHAR, Position)
                            FROM    CTE b
                            WHERE   a.StringToTest = b.StringToTest
                            ORDER BY Position
                            FOR XML PATH('')
                    ), 1, 2, '') [Location] 
            FROM    CTE a
        ) b
            ON a.StringToTest = b.StringToTest 
```

CTE 可以随心所欲地进行操作，但是为了完整起见，我添加了一个使用[SQL 服务器 XML 扩展](https://stackoverflow.com/questions/9666159/sql-concat-if-statement/9666296#9666296)的最终查询，将特殊符号的位置连接到一个逗号分隔的列表中，并将它们放在每个原始的旁边字符串。所以最终输出如下：

```
| StringToTest                      | SpecialSymbolLocations    |
|-----------------------------------|---------------------------|
| test 1 [[Using Square Brackets]   | 8, 9, 31                  |
| [Test2@EmailAddress.com]          | 1, 7, 20, 24              |
| No Special Symbols                |                           | 
```

# python - 多数据库帮助？(django)

> ID：10203737
> 
> 赞同：0
> 
> 时间：2012-04-18T06:08:45.073
> 
> 标签：python, database, django

所以我阅读了[https://docs.djangoproject.com/en/dev/topics/db/multi-db/](https://docs.djangoproject.com/en/dev/topics/db/multi-db/)上的多个数据库文档，它很有帮助。我知道了如何在 setting.py 中显示第二个数据库以及如何通过命令提示符同步它。但我不知道如何指定如何使某个模型同步到/保存在第二个数据库中。特别是如果我没有明确说明。

喜欢用户。

如果我使用 django 的用户类来创建用户，那么如何将其保存到第二个数据库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T20:00:42.387

（直接来自 Django DOCS 的代码：[https ://docs.djangoproject.com/en/dev/topics/db/multi-db/#automatic-database-routing](https://docs.djangoproject.com/en/dev/topics/db/multi-db/#automatic-database-routing%29)

路由器处理应该在哪个数据库中获取或设置数据。

如果您想要一个用于您的应用程序的路由器（名为“myapp”）

```
class MyAppRouter(object):
        """A router to control all database operations on models in
        the myapp application"""

        def db_for_read(self, model, **hints):
            "Point all operations on myapp models to 'other'"
            if model._meta.app_label == 'myapp':
                return 'other'
            return None

        def db_for_write(self, model, **hints):
            "Point all operations on myapp models to 'other'"
            if model._meta.app_label == 'myapp':
                return 'other'
            return None

        def allow_relation(self, obj1, obj2, **hints):
            "Allow any relation if a model in myapp is involved"
            if obj1._meta.app_label == 'myapp' or obj2._meta.app_label == 'myapp':
                return True
            return None

        def allow_syncdb(self, db, model):
            "Make sure the myapp app only appears on the 'other' db"
            if db == 'other':
                return model._meta.app_label == 'myapp'
            elif model._meta.app_label == 'myapp':
                return False
            return None 
```

通过向 settings.py 添加下一行，所有“myapp”应用程序数据都将在其自己的数据库（名为“其他”）中创建/保存/处理。所有其余的应用程序都使用默认数据库。

```
DATABASE_ROUTERS = ['path.to.MyAppRouter'] 
```

路由器可以保存在您想要的任何地方。只需修复 settings.DATABASE_ROUTERS 的路径即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T07:57:27.837

请再次仔细阅读您提供的文档。文档的[自动数据库路由](https://docs.djangoproject.com/en/dev/topics/db/multi-db/#automatic-database-routing)部分准确地回答了您的问题。
User DB的路由取决于你的实际使用情况和分区策略，没有一句回答。用户文档中有示例，您可以阅读并检查本地计算机。

# html - 灵活或居中页面 HTML CSS

> ID：10203738
> 
> 赞同：-1
> 
> 时间：2012-04-18T06:08:52.543
> 
> 标签：html, css

我必须使用灵活或居中的页面设计，即使用户屏幕分辨率为 800*600 也能正常工作。当我缩小页面时，元素会移动并改变它们的位置。灵活或居中页面是否正常？如果不是应该怎么做？

页面的 CSS 代码；

```
body {
             margin-left: auto;
             margin-right: auto;
             text-align:center;}

 div.header {
     padding-top: 1pc;
     text-align:center;
     width:100%;
     color: #000000;}

 div.header h1 {
color: #493831;
padding-bottom: 30px;
margin: 0;}

 div.menu { 
    list-style:none; 
    margin:0; 
    padding:0; 
    width:100%;
    text-align:center;
    background:#FBB117;} 
 div.menu ul{ 
    font-size:14px;
    margin-left: auto;
    margin-right: auto; 
    margin-top: 3px;
    margin-bottom: 3px;
    width: 100px 
    padding:0;
    display:inline-block;} 
 div.menu li{ 
    display:inline; } 
 div.menu li a{ 
    text-decoration:none; 
    padding:7px 0; 
    width:100px; 
    background:#FBB117; 
    color:#4C4646; 
    float:left; 
    text-align:center; 
    border-left:1px solid #fff;}  
 div.menu li a:hover{ 
    background:#a2b3a1; 
    color:#000 } 

 div.sidebar {
     padding-top: 2pc;
     margin-right: 15%;
     margin-left: 15px;
     text-align:center;
     float: right;
     width: 200px;
     color: #000000;
     list-style:none; }
 div.sidebar ul{
     font-size:14px;
     margin-left: auto;
     margin-right: auto; 
     margin-top: 3px;
     margin-bottom: 3px;
     padding:0;
     list-style: none;
     display:inline-block;  }
 div.sidebar li{
     display:inline; }
 div.sidebar li a{ 
    text-decoration:none; 
    padding:10px 0; 
    width:100%; 
    background:#FBB117; 
    color:#4C4646; 
    float:right; 
    text-align:center; 
    border-bottom:1px solid #fff;}  
 div.sidebar li a:hover{ 
    background:#a2b3a1; 
    color:#000 } 

 div.content {
     width:80%;
     padding-top: 2pc;
     text-align:left;
     margin-left: 15%;
     margin-right: 300px;
     color: #000000 }
 div.content p {
font-weight: lighter;
color: #493831;
padding-bottom: 30px;
margin: 0;}

 div img.bw {
     float:left;
     margin-right:15px;
     width:200px;
     height:200px; }

 div img.map {
     float:right;
     margin-right:15px;
     width:300px;
     height:100px; }

 div.footer {
     padding: 100px;
     text-align:center;
     height: 100px;
     color: #000000 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:21:40.813

当试图限制大小限制时，控制页面发生的最佳方法是分配不同的样式表来更改站点以进行解析。这些将适用于使用不同分辨率访问您的站点的用户。

[http://css-tricks.com/resolution-specific-stylesheets/](http://css-tricks.com/resolution-specific-stylesheets/)：提供的链接

这个问题长期以来一直困扰着许多设计师，早在 90 年代流体布局风靡一时，这个问题就必须解决。

请记住，随着移动设备查看网页的发展和日益增长的使用，制作您网站的移动版本，那么这也是采用的方法。

在这样做时，您正在应用全新的网页布局，以充分利用可用空间。此外，如果用户浏览器不支持此声明，那么他们仍然可以查看您的网站.... 每个人都是赢家。

# css - div 标签中的图片

> ID：10203739
> 
> 赞同：0
> 
> 时间：2012-04-18T06:09:07.363
> 
> 标签：css, image, html, background-image

它们之间有什么区别。图像只出现在第一种情况下。为什么没有出现在第二种情况下？

```
<div id='" + this.panelId + "Icon-1" + "'  style='width:34px;align:center;' class='iconDiv'><img id="+"Img"+ this.panelId+"  src="+"Images/i24_grey-info.png"+" /></div>

<div id='" + this.panelId + "Icon-1" + "'  style='width:34px;align:center; background-image:Images/i24_grey-info.png' class='iconDiv'></div> 
```

谢谢大家 。这行得通！但是我得到了 4 张图片...我的意思是图片重复了 4 次 :( 为什么会这样？

```
this.iconDiv = "<div id='" + this.panelId + "Icon-1" + "'  style='width:34px;height:34px; align:center;background-image: url(Images/i24x24_info.png);' class='iconDiv'></div>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:18:41.597

你的 CSS 不正确。没有`align`风格，使用`text-align`. `background-image`在图片 URL 之后和`url()`周围使用冒号：

```
style='width:34px; text-align:center; background-image:url(Images/i24_grey-info.png)' 
```

您可能还必须将 的高度设置`div`为图像的高度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T06:27:29.167

代替

```
background-image:Images/i24_grey-info.png; 
```

经过

```
background:url('Images/i24_grey-info.png') no-repeat; 
```

我以前也有过类似的情况。尽量使用速记代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T06:11:53.697

在第一行中，您将 gray-info.png 传递给 img 标签，但是在第二行中，您将其传递给 background-img

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-18T06:11:26.880

使用背景图像时也为 div 设置高度：

```
<div id='" + this.panelId + "Icon-1" + "'  style='width:34px;height:34px;align:center; background-image='Images/i24_grey-info.png' class='iconDiv'></div>" 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-18T06:14:18.677

您的 css 语法错误。应该：

```
style='width:34px; align:center; background-image: (Images/i24_grey-info.png)' 
```

另一个问题与 div 高度有关，当其中没有内容时，默认设置为 0。您必须设置高度才能看到图像：

```
style='width:34px; height: 50px; align:center; background-image: (Images/i24_grey-info.png)' 
```

# ruby - 通过 Vikas 的脚本从 wallpaperswide.com 下载

> ID：10203742
> 
> 赞同：0
> 
> 时间：2012-04-18T06:09:23.917
> 
> 标签：ruby

我是个菜鸟，但我试图使用在以下页面找到的 Vikas 的 Ruby 脚本从 wallpaperswide.com 下载壁纸：http: [//vikas-reddy.blogspot.in/search/label/download](http://vikas-reddy.blogspot.in/search/label/download)

我正在运行 Windows 7 64 位，并在运行脚本之前下载并安装了以下内容：

rubyinstaller-1.9.3-p125.exe

wget-1.11.4-1-setup.exe

[如何在 Windows 上使用来自 Jruby 的 nokogiri](https://stackoverflow.com/questions/1448512/how-to-use-nokogiri-from-jruby-on-windows)？

我没有安装“open-uri”，因为我不知道该怎么做。

我复制了脚本并将其保存为 txt 文件并将扩展名更改为 .rb 并运行该文件，但命令提示符窗口中出现以下错误消息：命令的语法不正确。

请提供详细帮助。谢谢。

脚本如下：

```
#!/usr/bin/env ruby
#
#  Vikas Reddy
#
#  A little script to download ALL the wallpapers of a given
#  resolution from http://www.wallpaperswide.com/
#
#  Requirements
#  ============
#  Ruby Version: 1.9.2
#  Gems: nokogiri, open-uri
#  Other programs: wget
#
#
#  Available Resolutions
#  =====================
#
#  Wide
#  
#  * 16:10 960x600
#  * 16:10 1152x720
#  * 16:10 1280x800
#  * 16:10 1440x900
#  * 16:10 1680x1050
#  * 16:10 1920x1200
#  * 16:10 2560x1600
#  * 16:10 3840x2400
#  * 16:10 5120x3200
#  * 5:3 800x480
#  * 5:3 1280x768
#  
#  HD
#  
#  * 16:9 960x540
#  * 16:9 1024x576
#  * 16:9 1280x720
#  * 16:9 1366x768
#  * 16:9 1600x900
#  * 16:9 1920x1080
#  * 16:9 2048x1152
#  * 16:9 2400x1350
#  * 16:9 2560x1440
#  * 16:9 3554x1999
#  * 16:9 3840x2160
#  
#  Standard
#  
#  * 4:3 800x600
#  * 4:3 1024x768
#  * 4:3 1152x864
#  * 4:3 1280x960
#  * 4:3 1400x1050
#  * 4:3 1440x1080
#  * 4:3 1600x1200
#  * 4:3 1680x1260
#  * 4:3 1920x1440
#  * 4:3 2048x1536
#  * 4:3 2560x1920
#  * 4:3 2800x2100
#  * 4:3 3200x2400
#  * 4:3 4096x3072
#  * 5:4 1280x1024
#  * 5:4 2560x2048
#  * 5:4 3750x3000
#  
#  Mobile Ratio
#  
#  * VGA 240x320
#  * VGA 480x640
#  * VGA 320x240
#  * VGA 640x480
#  * WVGA 240x400
#  * WVGA 480x800
#  * WVGA 400x240
#  * WVGA 800x480
#  * HVGA 320x480
#  * HVGA 480x320
#  * HVGA 640x960
#  * HVGA 960x640
#  * iPad 1024x768
#  * iPad 768x1024
#  * HD 16:9 480x272
#  * HD 16:9 272x480
#  * Phone 176x220
#  * Phone 220x176
#  
#  Dual
#  
#  * 4:3 1600x600
#  * 4:3 2048x768
#  * 4:3 2304x864
#  * 4:3 2560x960
#  * 4:3 2800x1050
#  * 4:3 2880x1080
#  * 4:3 3200x1200
#  * 4:3 3360x1260
#  * 4:3 3840x1440
#  * 4:3 4096x1536
#  * 4:3 5120x1920
#  * 4:3 5600x2100
#  * 4:3 6400x2400
#  * 4:3 8192x3072
#  * 5:4 2560x1024
#  * 5:4 5120x2048
#  * 5:4 7500x3000
#  * 5:4 10240x4096
#  * 16:10 1920x600
#  * 16:10 2304x720
#  * 16:10 2560x800
#  * 16:10 2880x900
#  * 16:10 3360x1050
#  * 16:10 3840x1200
#  * 16:10 5120x1600
#  * 16:10 7680x2400
#  * 16:10 10240x3200
#  * 5:3 1600x480
#  * 5:3 2560x768
#  * 16:9 1920x540
#  * 16:9 2048x576
#  * 16:9 2560x720
#  * 16:9 3200x900
#  * 16:9 3840x1080
#  * 16:9 4096x1152
#  * 16:9 4800x1350
#  * 16:9 5120x1440
#  * 16:9 7108x2000
#  * 16:9 7680x2160
#  * 3:2 2880x960
#  * 3:2 4000x1333
#  * 3:2 2304x768
#  
#  Other
#  
#  * 3:2 1152x768
#  * 3:2 1440x960
#  * 3:2 2000x1333

require 'open-uri'
require 'nokogiri'

Resolution = "1600x900"
Base_URL   = "http://wallpaperswide.com/#{Resolution}-wallpapers-r/page/"
Output_Directory = "/home/vikas/Wallpapers/"

# Create the Output_Directory if needed
`mkdir -p "#{Output_Directory}"`

(1..2492).each do |page_num|

# Go page by page
url = Base_URL + page_num.to_s

# Parse html
f = open(url)
doc = Nokogiri::HTML(f)

# Loop over image-boxes
doc.css("div.thumb").each do |wallp|

# Extract wallpaper subpage url
wallp.css("div[onclick]").attr("onclick").value =~ /prevframe_show\('(.*)'\)/
subpage_url = $1
subpage_url =~ %r|http://wallpaperswide\.com/[^/]+/([\w\d]+)\.html|

# Generate url of the required wallpaper
wallp_url = %|http://wallpaperswide.com/download/#{$1}-#{Resolution}.jpg|

# Download... with a user-agent parameter just in case...
# use '--limit-rate=100k' to limit download speed
`wget -c -U "Firefox/4.5.6" -P "#{Output_Directory}" "#{wallp_url}"`
end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:26:42.733

您需要两个所需的宝石。open-uri 是标准库的一部分，因此您不需要安装它，但 nokogiri 不需要。安装如下

```
gem install nokogiri 
```

创建地图和使用 wget 进行下载的炮击最好用 ruby​​ 代码代替，如果您搜索一些示例应该不难，但它们应该在 Windows 中工作。您需要确保 wget 在路径中或使用命令提供路径，例如

```
`"c:/program files/wget/wget.exe" -c -U "Firefox/4.5.6" -P "#{Output_Directory}" "#{wallp_url}"` 
```

编辑：首先试试这个

```
Output_Directory = "c:\temp"
Resolution = "1600x900" 
wallp_url = %|http://wallpaperswide.com/download/#{$1}-#{Resolution}.jpg| 
command = %|"C:/Program Files (x86)/GnuWin32/bin/wget.exe" -c -U "Firefox/4.5.6" -P "#{Output_Directory}" "#{wallp_url}"|
puts command

#=> "C:/Program Files (x86)/GnuWin32/bin/wget.exe" -c -U "Firefox/4.5.6" -P "c:  emp" "http://wallpaperswide.com/download/-1600x900.jpg" 
```

你不应该得到错误。注意正斜杠。然后，通过将其粘贴到命令行来运行放置在控制台中的命令。如果您收到错误，则说明您的路径或 firefox 参数有问题。只有当 wget 有效（您在 c:\temp 映射中有图像）时，您的脚本才能工作。然后在您的 scipt 中，您可以像这样运行命令：

```
`command` 
```

如果脚本中仍然存在错误，请在此处发布错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T14:40:56.887

您能否注释掉代码中的“wget”行并在其位置放置一个像这样的 puts 语句：

```
# `wget -c -U "Firefox/4.5.6" -P "#{Output_Directory}" "#{wallp_url}"`
puts "#{wallp_url}" 
```

这将输出生成的 url。理想情况下，这应该一次连续吐出十个网址。如果发生这种情况，问题肯定是因为您在 Windows 中安装了 wget 或其使用。

这段代码中唯一依赖于平台的代码就是this。我已经在我的最新博客文章中编写了 Windows 系统中要遵循的详细程序，网址为[http://vikas-reddy.blogspot.in/2012/06/wallpaperswide-download-script-in.html](http://vikas-reddy.blogspot.in/2012/06/wallpaperswide-download-script-in.html)

# c# - 服务器上出现错误“此命令不可用，因为没有打开文档”

> ID：10203747
> 
> 赞同：2
> 
> 时间：2012-04-18T06:10:10.657
> 
> 标签：c#, asp.net, office-automation, word-automation

我使用此代码将数据发送到 Word 模板并发送到客户端。

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        object missing = System.Reflection.Missing.Value;
        Microsoft.Office.Interop.Word.Application WordApp = new Microsoft.Office.Interop.Word.Application();

        string DocFilePath = "";
        //string FilePath = System.Windows.Forms.Application.StartupPath;
        object fileName = Server.MapPath(@"~\asset\wordtemplates\Estelam.dot");
        DocFilePath = fileName.ToString();

        FileInfo fi = new FileInfo(DocFilePath);
        if (fi.Exists)
        {
            object readOnly = false;
            object isVisible = true;

            object LetterNo = "LetterNo";
            object LetterDate = "LetterDate";
            object Attachment = "Attachment";

            object To = "To";
            object From = "From";

            object Fname = "Fname";
            object Lname = "Lname";
            object FatherName = "FatherName";
            object IDNumber = "IDNumber";
            object BirthDate = "BirthDate";
            object BirthLocation = "BirthLocation";
            object PersonelID = "PersonelID";
            object MembershipDate = "MembershipDate";
            object Membership = "Membership";

            object Degree = "Degree";
            object Level = "Level";
            object Guild = "Guild";
            object Janbazi = "Janbazi";
            object Esarat = "Esarat";
            object Education = "Education";
            object Field = "Field";
            object Education2 = "Education2";
            object DocLocation = "DocLocation";

            Microsoft.Office.Interop.Word.Document aDoc = WordApp.Documents.Open(ref fileName, ref missing, ref readOnly,
               ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing,
               ref isVisible, ref isVisible, ref missing, ref missing, ref missing);

            //Microsoft.Office.Interop.Word.Document aDoc = WordApp.Documents.Open(ref fileName);

            WordApp.ActiveDocument.FormFields.get_Item(ref LetterNo).Result = TextBox_LetterNo.Text; 
```

此代码在本地运行良好且正确，但是当我发布此站点并将其放到我的服务器上时，运行时出现此错误。

> 此命令不可用，因为没有打开文档。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。异常详细信息：System.Runtime.InteropServices.COMException：此命令不可用，因为没有打开文档。
> 
> 源错误：在执行当前 Web 请求期间产生了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

为什么服务器打不开？如何解决此错误？

我使用 Windows7、VS2010、SQLServer2008、office2010，在服务器中使用 Windows Server 2008、IIS7、office2010。

我应该为服务器上的这个错误做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T21:50:47.807

您缺少 OfficeAutomation 的桌面文件夹，请[在此处查看](http://social.msdn.microsoft.com/Forums/en-US/innovateonoffice/thread/b81a3c4e-62db-488b-af06-44421818ef91)

您还应该需要配置 OfficeAutomationUser 帐户（如果您还没有完成）以自动化 Office 应用程序，请选中[此](http://theether.net/download/Microsoft/kb/288367.html)

注意：不建议在您的服务器上安装 Office 自动化。尝试使用 Open Xml sdk 自动化办公应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:20:59.723

[在 asp](http://msdn.microsoft.com/en-us/library/aa701256%28v=office.11%29.aspx)中阅读这个词你会看到示例 VB，但我认为你会得到所需的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T16:40:09.370

您是否尝试将模板路径放在服务器上的配置文件中？服务器路径不是相对的“D：//项目文件夹/模板文件夹”。然后读取应用程序中的路径，将其放入配置文件中，以后无需重新发布站点即可更轻松地进行更改

# wireshark - 从wireshark pcap文件中获取日志

> ID：10203751
> 
> 赞同：0
> 
> 时间：2012-04-18T06:10:35.900
> 
> 标签：wireshark, logging, pcap

我使用 TShark 的命令 tshark -V -r {file} 将wireshark pcap 文件转换为windows txt 文件 包含在windows txt 文件中的数据是从wireshark 的pcap 文件转换而来的日志数据吗？或者有没有更好的方法从wireshark pcap文件中获取日志？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:57:23.560

这取决于日志文件的用途。例如，如果您打算将其交给[Splunk](http://www.splunk.com/)（并且，不，[我没有随机选择 Splunk :-)），您可能想](http://ask.wireshark.org/questions/10234/getting-logs-out-from-the-wiresharks-capture-pcap-file)[在 Splunk Q&A 网站](http://splunk-base.splunk.com/)上询问这个问题，而不是在通用 Q&A 网站上或Wireshark 问答网站，因为大多数问题可能是 Splunk 问题，您更有可能在那里找到熟悉 Splunk 的人。

# c++ - 为什么数据类型 long 支持等于 long long 的最大数？

> ID：10203755
> 
> 赞同：2
> 
> 时间：2012-04-18T06:10:41.080
> 
> 标签：c++

因此，当我偶然发现一个小“问题”（示例来自 C++ Primer 第 6 版）时，我正在用新的数据类型**long long进行一些测试。**我正在使用 climits 库来告诉我**long**和**long long**支持的最大数量，结果都是 9223372036854775807。这怎么可能？

```
#include <iostream> 
#include <climits>

int main()
{
    std::cout << "int size is " << sizeof(int) << " bytes." << std::endl;
    std::cout << "short size is " << sizeof(short) << " bytes." << std::endl;
    std::cout << "long size is " << sizeof(long) << " bytes." << std::endl;
    std::cout << "long long size is " << sizeof(long long) << " bytes." << std::endl;

    std::cout << "Maximum values: " << std::endl;
    std::cout << "int: " << INT_MAX << std::endl;
    std::cout << "short: " << SHRT_MAX << std::endl;
    std::cout << "long: " << LONG_MAX << std::endl;
    std::cout << "long long: " << LLONG_MAX << std::endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T06:13:42.503

这是可能的，因为标准要求`long`必须*至少*`int`和*至少*一样大（**并且**`long long`在C++11*中至少*为64 位）。所以没有矛盾。*`long`*

 ****关于`long long`C++11，请参阅[这个相关问题](https://stackoverflow.com/questions/10053113/is-c11s-long-long-really-at-least-64-bits)。

由于您标记了问题 C++，请记住，给定类型的数字限制在`limits`标题中给出，并且 C99 中的*标准*（即 in 中的内容`<climits>`）在 C++ 中不一定是标准的，即它可能是实现定义的. （或更明确地说，它的值范围）中的位数`long long`是标准的一个例子`C`，它只在 C++11 中成为标准。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-18T06:15:36.223

因为您在 64 位机器上运行，编译器将 'long' 和 'long long' 实现为 64 位整数。

如果您要在 32 位机器上编译它，您会看到不同之处。例如：

```
$ g++ -m32 size.cpp
$ ./a.out 
int size is 4 bytes.
short size is 2 bytes.
long size is 4 bytes.
long long size is 8 bytes.
Maximum values: 
int: 2147483647
short: 32767
long: 2147483647
long long: 9223372036854775807 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T06:17:27.410

C99 标准规定了每种类型必须能够表示的值的范围（第 5.2.4.2.1 节）。指定的值是*最小幅度*，所以没有什么可以阻止更大的范围。我将此值转换为在数字计算机上表示这些范围内的数字所需的最少位数。

*   `int`应至少为 16 位（范围从 –32,768 到 32,767）
*   `long`应至少为 32 位（范围从 –2,147,483,648 到 2,147,483,647）
*   `long` `long`应至少为 64 位（范围从 –9,223,372,036,854,775,808 到 9,223,372,036,854,775,807）****

# php - 数组转字符串注意事项

> ID：10203766
> 
> 赞同：0
> 
> 时间：2012-04-18T06:11:27.910
> 
> 标签：php, arrays, phpexcel

我在以下代码行中得到了这个神秘的 nbotice：

```
$this->$aStyles = $aStyles; 
```

这行代码存在于这个函数中：

```
private function cleanStyles()
{
    if ((isset($this->sValue))&&($this->sValue))
    {
        $this->aStyles = array();
        return true;
    }
    $aStyles = array();
    foreach ($this->aStyles as $oStyle)
        if ($oStyle->cleanStyles())
            $aStyles[] = $oStyle;
    $this->$aStyles = $aStyles;
    return (count($this->$aStyles)>0);
} 
```

知道为什么会出现此通知吗？

这里有一些关于我正在尝试做的事情的背景知识：我有一个代表 excel 报告的对象层次结构。层次结构与 phpExcel 对话以实际绘制报告。准备绘制层次结构时采取的步骤之一是清理样式数组。

样式对象可以包含样式对象的数组，也可以包含一个值。

cleanStyles 应该递归地清理样式，因此可以通过确保存在的所有样式具有值或有效样式数组来将它们转换为有效的 phpExcel 样式数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:14:17.087

`$`从您的属性取消引用中删除标志：

```
$this->aStyles = $aStyles;
------^ 
```

您的代码不起作用，因为 php`$aStyles`在尝试访问对象值之前尝试进行评估。`aStyles`在这种情况下，aStyles 是一个数组，因此您会收到通知，因为该语法仅在为 String时才有效

# objective-c - 如何在代码创建的文本框中支持旋转？

> ID：10203769
> 
> 赞同：0
> 
> 时间：2012-04-18T06:11:33.230
> 
> 标签：objective-c, ios, xcode

我在 Xcode 中通过代码创建了一个文本框，通过给出

```
if (isLandScape) {
    textFieldRounded = [[UITextField alloc] initWithFrame:CGRectMake(800, 10, 200, 30)];
}
else {
    textFieldRounded = [[UITextField alloc] initWithFrame:CGRectMake(550, 10, 200, 30)];
} 
```

但是当旋转时，会创建两个框，我不想要这个，我的代码有什么处理方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:14:56.467

1.  看看 autoresizingMask 属性。
2.  你用什么方法创建这个视图？

# objective-c - 有哪些解决方案可以表明 iPhone 应用程序当前正在获取数据？

> ID：10203770
> 
> 赞同：0
> 
> 时间：2012-04-18T06:11:38.223
> 
> 标签：objective-c, user-interface, notifications

我现在正在构建一个可以访问 Web API 的应用程序，有时会有一点延迟，目前什么都没有发生。有哪些选项可以向用户显示应用正在考虑某事？有关如何实现和呈现旋转轮的任何示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:19:40.927

一个流行（且简单）的解决方案是使用[MBProgressHUD 库](https://github.com/matej/MBProgressHUD)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:24:01.843

最简单的是 UIActivityIndi​​cator

[https://developer.apple.com/documentation/uikit/uiactivityindicatorview](https://developer.apple.com/documentation/uikit/uiactivityindicatorview)

为了以更优雅的方式显示进度，您可以使用抬头显示器，

[https://github.com/matej/MBProgressHUD](https://github.com/matej/MBProgressHUD)

[http://iosdevelopertips.com/open-source/ios-open-source-svprogresshud-heads-up-display.html](http://iosdevelopertips.com/open-source/ios-open-source-svprogresshud-heads-up-display.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:51:53.713

进度条或活动指示器，取决于可用状态（可以计算剩余时间）。

# php - 如何在 Ubuntu 上设置 CodeIgniter

> ID：10203775
> 
> 赞同：1
> 
> 时间：2012-04-18T06:11:58.253
> 
> 标签：php, codeigniter

自从我在 Windows 上开发 CodeIgniter 项目以来，我无法在 Ubuntu 中运行它。我的主要问题是我什至没有看到任何可以帮助我确定问题所在的错误或警告。如您所见，它只是一个空白屏幕。我在 index.php 文件中声明的环境是开发环境，我还通过将其设置为 On 来启用 display_errors。

![在此处输入图像描述](../Images/74818d197dca5da8a994d8028f28eed8.png)

PHP 似乎也可以正常工作，因为调用 php_info() 会显示一些内容。我相信我也正确配置了mysql。我还在 php.ini 中声明了默认值（主机、用户、密码、端口）。你能给我一些关于如何显示某些东西的想法吗？或者可以让我检查我是否正确配置了一些东西。请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T14:27:32.993

如果您像我一样，并且已经分别安装了 Apache、PHP 和 MySQL，`sudo apt-get` 那么您很可能会遇到同样的错误，即使您已经安装了`set display_errors to on`. 我所做的是从左边开始一个一个地禁用自动加载的库。我的问题出在数据库类上。事实证明，当您安装 php 时，不会自动安装用于 php 的 mysqli 和 mysql 驱动程序。您所要做的就是输入以下命令：

```
sudo apt-get install php5-mysql 
```

如果你已经安装了 php 也没关系。

CodeIgniter 的一点帮助可以为我节省几个小时尝试调试它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T07:43:21.153

从 Windows 转向 Linux 开发的主要问题是命名。Linux 发行版对几乎所有内容都严格区分大小写，这与 windows 允许文件索引不同，无论大小写如何。

首先要展示一些东西。在文档的第一行`index.php`

```
die("Showing Something"); 
```

如果正在显示消息，则删除上一行并添加一个片段以显示错误

```
error_reporting(E_ALL); 
```

# javascript - iPad Web 的 HTML 文本效果动画

> ID：10203776
> 
> 赞同：-1
> 
> 时间：2012-04-18T06:11:59.343
> 
> 标签：javascript, html

我有网络应用程序我想执行文本效果，就像我们在电源点中的线条来自左侧一样，我尝试了很多链接但没有得到

```
<HTML>
<Body>

 <p>This is the First Ans Last Game Of
 <p>The Tournament
</Body>
<HTML> 
```

Javascript

```
function lib_bwcheck() {
    this.ver = navigator.appVersion;
    this.agent = navigator.userAgent;
    this.dom = document.getElementById ? 1 : 0;
    this.opera5 = this.agent.indexOf("Opera 5") > -1;
    this.ie5 = (this.ver.indexOf("MSIE 5") > -1 && this.dom && !this.opera5) ? 1 : 0;
    this.ie6 = (this.ver.indexOf("MSIE 6") > -1 && this.dom && !this.opera5) ? 1 : 0;
    this.ie4 = (document.all && !this.dom && !this.opera5) ? 1 : 0;
    this.ie = this.ie4 || this.ie5 || this.ie6;
    this.mac = this.agent.indexOf("Mac") > -1;
    this.ns6 = (this.dom && parseInt(this.ver) >= 5) ? 1 : 0;
    this.ns4 = (document.layers && !this.dom) ? 1 : 0;
    this.bw = (this.ie6 || this.ie5 || this.ie4 || this.ns4 || this.ns6 || this.opera5);
    return this;
}
var bw = new lib_bwcheck()
var px = bw.ns4 || window.opera ? "" : "px";

function run() {
    var cx, cy, a, css, obj, nest, ooo;
    if ((document.all) && (!bw.opera5)) {
        movy = document.body.clientHeight - 64;
        movx = document.body.clientWidth - 50;
    } else {
        movx = window.innerWidth - 50;
        movy = window.innerHeight - 64;
    }
    for (var i = 0; i < maxitems; i++) {
        cx = Math.round(ox + i * syto / (maxitems - 1));
        if (ys[i] == 0) ys[i] = Math.round(Math.random() * syto + syto);
        //  if (ys[i]==0)    ys[i] = Math.round(Math.random()*100);
        if (cx > sxto || cx < sxfrom) {
            if (cx > sxto) cy = syfrom + (ys[i] - syfrom) * (cx - sxto) / (110 - sxto);
            else cy = syfrom + (ys[i] - syfrom) * (sxfrom - cx) / (sxfrom);
        } else {
            ys[i] = 0;
            cy = syfrom + Math.sin((cx - sxfrom) * Math.PI * yspeed / (sxto - sxfrom)) * ((cx - sxfrom) * (sdto - sdfrom) / (sxto - sxfrom) + sdfrom);
        }
        cx = Math.round(cx * movx / 100);
        cy = Math.round(cy * movy / 100);
        if (bw.ns4) {
            ooo = eval("document.s" + i);
            if (cx >= movx || cx <= 0) {
                ooo.visibility = "hidden";
                cx = 0;
            } else ooo.visibility = "visible";
            ooo.moveTo(cx, cy);
        } else {
            obj = "s" + i;
            nest = "";
            css = bw.dom ? document.getElementById(obj).style : bw.ie4 ? document.all[obj].style : bw.ns4 ? eval(nest + "document.layers." + obj) : 0;
            if (cx >= movx || cx <= 0) {
                css.visibility = "hidden";
                cx = 0;
            } else css.visibility = "visible";
            css.left = cx;
            css.top = cy;
        }
    }
    ox -= xspeed;
    if (ox < -syto) ox = 100;
    setTimeout("run()", tpause, "JavaScript");
}

var sxfrom = 20;
var sxto = 80;
var syfrom = 50;
var syto = 30;
var sdfrom = 20;
var sdto = 30;
var yspeed = 3;
var xspeed = 1;
var pcol = Number(255).toString(16);
var tpause = 20;
var schar = "JavaScriptSource";

var fontface = 0;
var fontsize = "6";
if (fontface == 0) fontface = 'Arial, Helvetica, sans-serif';
else if (fontface == 1) fontface = 'Times New Roman, serif';
else if (fontface == 2) fontface = 'Courier New, Courier, mono';
else if (fontface == 3) fontface = 'Georgia, Times New Roman, Times, serif';
else fontface = 'Verdana, Arial, Helvetica, sans-serif';

var maxitems = schar.length;
var t = 0;
t = pcol.length;
for (var i = 0; i < 6 - t; i++) pcol = '0' + pcol;

if ((document.all) && (!bw.opera5)) {
    movy = document.body.clientHeight - 64;
    movx = document.body.clientWidth - 50;
} else {
    movx = window.innerWidth - 50;
    movy = window.innerHeight - 64;
}

var ox = 100;
ys = new Array();
for (var i = 0; i < maxitems; i++) {
    if (bw.ns4) document.writeln("<layer id='s" + i + "'>");
    else document.writeln("<div id='s" + i + "' style='position:absolute; z-index:3;'>");
    document.writeln('<font color=#' + pcol + ' face="' + fontface + '" size="' + fontsize + '">' + schar.substr(i, 1) + '</font>');
    if (bw.ns4) document.writeln("</layer>");
    else document.writeln("</div>");
    ys[i] = 0;
}

setTimeout("run()", tpause, "JavaScript");​

//DO NOT MODIFY
 /*
 <APPLETINFO>
 appletname=jswavetext
 applettype=JAVASCRIPT
 created=1049050369870
 appletfilename=jswavetext1.js
 </APPLETINFO>
 <JAVASCRIPT>
  fontsize=6
  sxfrom=20
  sxto=80
  syfrom=50
  syto=30
  sdfrom=20
  sdto=30
  yspeed=3
  xspeed=1
  tpause=20
  schar=JSWaveText
  fontface=0
  pcol=255
  </JAVASCRIPT>
  <HTMLGENERATOR>
null</HTMLGENERATOR>
 */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:42:31.713

您复制的代码很古老。我会看看[CSS 过渡](http://Css3.bradshawenterprises.com/transitions/)来帮助你做到这一点。如果您在动画上使用延迟选项，您可以通过添加一个具有新位置的类来触发它，

# javascript - 基于滚动条位置的 Div 不透明度

> ID：10203777
> 
> 赞同：14
> 
> 时间：2012-04-18T06:12:07.903
> 
> 标签：javascript, jquery, scrollbar, opacity, fade

[在此处](http://jsfiddle.net/xXxXR/)`div`查找滚动条到达某个位置时如何淡出 a 的示例。但这不是平滑的油门式淡入淡出。这是该jsfiddle的代码：

```
var divs = $('.social, .title');
$(window).scroll(function(){
   if($(window).scrollTop()<10){
         divs.fadeIn("fast");
   } else {
         divs.fadeOut("fast");
   }
});​ 
```

我希望不透明度百分比反映滚动条的位置。例如，当滚动条位于最高位置时，div 不透明度为 100%。当我向下滚动 35px 时，我希望 div 的不透明度淡化到 0%

当 div A 距顶部 35px 时，可能有一种技术，div B = 100% 不透明度。当 div A 距离顶部 0px 时，div B = 0% 不透明度。并让它在其间的所有阶段顺利褪色。

谢谢！

更新：感谢所有帮助，他们中的大多数都工作得很好，但我真的需要它在 35px 范围内工作。因此，我创建了一个新示例，它将非常清楚它应该如何工作。
[http://jsfiddle.net/J8XaX/1/](http://jsfiddle.net/J8XaX/1/)

更新 2：移动设备：我在我的 iPhone 上尝试了这个，但褪色效果并不顺利。它的工作方式是，如果您滑动到一半并松开手指，那么不透明度就会下降。但是，如果您尝试平滑滚动，它会从 100% 不透明度直接变为 0% 不透明度。想知道有没有办法解决这个问题？？

谢谢！！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-18T06:21:09.397

尝试类似的东西

```
var divs = $('.social, .title'),
    limit = 35;  /* scrolltop value when opacity should be 0 */

$(window).on('scroll', function() {
   var st = $(this).scrollTop();

   /* avoid unnecessary call to jQuery function */
   if (st <= limit) {
      divs.css({ 'opacity' : (1 - st/limit) });
   }
}); 
```

当 scrolltop 达到时`35px`，div 的不透明度为`1 - 35/35 = 0`

小提琴示例：http: [//jsfiddle.net/wSkmL/1/](http://jsfiddle.net/wSkmL/1/)
您的小提琴已更新： http: [//jsfiddle.net/J8XaX/2/](http://jsfiddle.net/J8XaX/2/)（我已将 35 更改为 130px 以实现您在橙色 div 中编写的效果）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-18T06:27:29.957

```
var divs = $('.social, .title');
$(window).scroll(function(){
   var percent = $(document).scrollTop() / ($(document).height() - $(window).height());
   divs.css('opacity', 1 - percent);
}); 
```

> `$(document).height() - $(window).height()`: 滚动区域
> `$(document).scrollTop()`: 当前滚动位置
> `percent`: 当前滚动位置 (百分比)
> `divs.css('opacity', 1 - percent);`: 设置 div 的不透明度

另请参阅[此示例](http://jsfiddle.net/xXxXR/7/)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-18T06:28:26.227

```
var divs = $('.social, .title');
$(window).scroll(function(){
    var fadeval = 1 - ($(window).scrollTop()) / ($(window).height());       
    divs.css({opacity: fadeval});
});​ 
```

[小提琴演示](http://jsfiddle.net/Ghokun/eMP7w/)

编辑：哇，我发帖时有这么多答案打败了我

编辑：2

```
 var divs = $('.fademe');
$(document).ready(function(){divs.css('opacity', 0);}); //can be done using CSS also
$(window).scroll(function(){

    var percent = $(document).scrollTop() / (35);
    divs.css('opacity', percent);       
});​ 
```

[更新了 JsFiddle](http://jsfiddle.net/Ghokun/5LVhk/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T06:27:49.027

```
var divs = $('.social, .title'); 
$(window).scroll(function(){
    var p = $(window).scrollTop()/ $(window).height();
    divs.stop().fadeTo("fast",p);
}); 
```

# google-maps - 用例。谷歌地图是外部参与者？

> ID：10203778
> 
> 赞同：1
> 
> 时间：2012-04-18T06:12:11.157
> 
> 标签：google-maps, use-case

我正在编写一个用例，用户单击地图以选择他/她的位置并在地图中绘制标记。

在这个用例中，谷歌地图是一个外部参与者吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T19:47:08.273

> 在这个用例中，谷歌地图是一个外部参与者吗？

这取决于用例是什么。但不太可能。

用例旨在描述用户想要实现的目标。您如何实现该目标是“实施细节”。重点是帮助您专注于了解用户的需求和目标，而不是过分沉迷于技术。

那么首先，您将如何命名用例？我猜它会类似于“标记当前位置”。假设是这样，谷歌地图是您解决方案的一部分 - 而不是它的外部。所以它不应该作为外部参与者存在。

hth。

# c++ - 如果一个程序在另一个实例已经在运行时编译会发生什么？

> ID：10203785
> 
> 赞同：4
> 
> 时间：2012-04-18T06:13:00.137
> 
> 标签：c++

`$ g++ program.cpp`

`$ ./a.out &`

（program.cpp 已修改。）

`$ g++ program.cpp`

如果可执行文件被覆盖，运行过程如何仍能产生准确的结果？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T06:15:39.860

因为旧文件仍然存在。目录条目将指向一个新文件，但只要旧文件保持打开状态，它就会存在。一旦关闭，它最终将被删除。也就是说，在 Unix 上。在 Windows 上，您可能无法执行此操作，因为文件已打开且无法覆盖。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-18T08:09:12.703

这实际上取决于`ld`（由 调用`g++`）如何创建新的可执行文件。如果它只是做了一个`open`（如果文件不存在，则使用适当的标志进行创建），那么正在运行的进程会发生什么取决于分页，但很有可能发生崩溃。如果它是`unlink`第一个，在创建新文件之前，正在运行的进程将继续使用旧图像，只有在进程结束时才会释放旧图像。

传统上，最初的 Unix 链接器使用第一种策略，其优点是保留对现有可执行文件的访问权限。然而，这是在虚拟内存时代之前，当一个可执行文件被一次性加载时，在对 的调用中`exec`，之后文件发生的事情是无关紧要的。今天，如果我正在编写一个链接器，我会使用第二个，但首先读取原始文件的模式，然后以相同的模式创建新文件。

`ls -il`您可以通过创建可执行文件、然后更改模式、对其执行、然后重新编译并再次执行来轻松查看正在使用的策略`ls -il`。如果 inode 编号已更改，则链接器会`unlink`在打开输出之前执行操作。如果模式已经改变（回到你的环境中的任何默认值），链接器在执行 `unlink`.

以 Linux 下的 g++ 为例，inode 编号和模式都发生了变化。（我会考虑模式改变了一个错误的事实。）另一方面，IIRC`ld`在 Solaris 下没有删除文件——我不记得做过上述测试，但我确实对程序崩溃时有模糊的记忆我们重新编译了他们正在使用的 DLL 之一。

最后，FWIW，为什么删除文件不会导致应用程序崩溃：Unix下的文件（由inode表示）是引用计数的，当引用计数变为0时会自动删除。（非常像`shared_ptr`。）有一个引用计数对于指向文件的每个目录条目（每个硬链接），以及引用该文件的每个打开文件描述符。在 Unix 下“删除”文件实际上并没有触及文件，它只是删除指向它的目录条目（这会减少使用计数，这可能会导致文件被删除）。已加载的可执行文件包含其可执行文件及其已加载的所有 s 的打开文件描述符`.so`，这被视为对该文件的引用，因此删除指向它的最后一个目录条目仍会使引用计数大于 0。

编辑：我可能会补充说，取消链接也会破坏硬链接（它将继续指向旧版本）。今天这可能不是问题，因为每个人都只使用软链接（它是对文件名的引用，而不是对文件本身的引用），但我记得在早期，在软链接存在之前，我们煞费苦心地避免断开链接：在我使用的编辑器中，我们将输出写入一个全新的文件，然后将其移动到原始文件（如果 inode 计数为 1），或复制它（如果 inode 计数大于 1 ; 即如果有其他我们不知道的文件的硬链接）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T06:18:15.153

没有。

前面的`./a.out`过程将 的内容映射`a.out`到内存中（在各个部分，您可以在 中看到它们`/proc/$PID/smaps`）。

后者`g++ program.cpp` *取消链接*现有`a.out`文件并创建一个具有相同名称的新文件。早期的可执行文件仍然映射到内存中的早期文件没有被修改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T06:17:59.200

在 Unix 上，一旦旧文件关闭，它将被删除，而在 Windows 上，它会抛出一个错误，指出无法将可执行文件复制到所需位置

# android - iPhone 邮件应用程序，如 android 上的搜索

> ID：10203790
> 
> 赞同：0
> 
> 时间：2012-04-18T06:13:34.083
> 
> 标签：android, android-layout, android-widget

我的要求是根据选项标准搜索列表。当用户点击搜索字段时，将出现一个视图，搜索框下方有一些选项，类似于 iphone 邮件应用程序。我主要关注 UI 部分。有人可以帮我解决这个问题吗？

在专注于搜索框之前 ![在专注于搜索框之前](../Images/bf20eab1ae08a8aad351b0dae8007e77.png)

关注搜索框后 ![关注搜索框后](../Images/74f5ff364eeb76772f71f6bd1d7427d5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:21:35.347

是的，它很容易根据按钮单击来实现“搜索”文本框。

**第 1 步：**使用 EditText 并将提示设置为“搜索所有邮件”，并最初将可见性设置为“已删除”。放在ListView上面。

```
<EditText
  android:id="@+id/txtSearch"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:hint="Search All mail"
  android:visibility="gone"/> 
```

**第 2 步：**在单击按钮时使 EditText 的可见性为可见。

# ios - IOS 测试：KIF 与仪器/自动化

> ID：10203791
> 
> 赞同：2
> 
> 时间：2012-04-18T06:13:35.587
> 
> 标签：ios, testing

您会推荐哪一个进行功能测试？我熟悉两者的规格。我想听听您对这些测试套件的意见和经验。现在我倾向于使用仪器/自动化，因为它是苹果自己的。在 js 中编写它似乎比在 obj-c 中更轻量级。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T05:06:14.997

除非您是开发人员，否则我建议您使用 Instruments 自动化。KIF 很好，但是编写一个简单的测试用例可能需要很多时间。此外，Xcode 附带 Instruments/UI 自动化，因此它非常简单，不需要对您的项目进行修改。

# php - iphone应用客户端——服务器用户认证实践

> ID：10203792
> 
> 赞同：0
> 
> 时间：2012-04-18T06:13:42.713
> 
> 标签：php, iphone

我将创建一个具有用户登录（用户名/密码）机制的 iPhone 应用程序。在服务器端我使用 PHP。

我想知道这种客户端/服务器身份验证和会话管理的最佳实践。

寻找答复。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:27:01.357

一旦服务器接收到正确的用户名和密码，您就可以使用服务器提供的令牌，因此设备对 Web 服务的每次调用都使用收到的令牌进行“身份验证”。

1.  所以你将用户名和密码从设备发送到服务器
2.  服务器将令牌返回给设备
3.  设备使用令牌发出每个请求，即：URL/webSERvice/token

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:15:45.797

最简单的方法是传递明文的用户名和编码密码

并使用 json 有效载荷，php 很容易进行 json ：

数据格式可能是这样的：

```
{
   "action" : "login",
   "data" :{
        "usr" : "somebody",
        "pwd" : "1f3870be274f6c49b3e31a0c6728957f"
    }
} 
```

通常是散列到 MD5 代码的密码

然后服务器将返回 auth 的结果

```
{
    "success" : "true",
    "data" :{
        //some data
    }
} 
```

当然，使用**HTTPS**连接更安全

# objective-c - 我可以本地化可可中动态变化的字符串/文本吗

> ID：10203794
> 
> 赞同：0
> 
> 时间：2012-04-18T06:13:58.110
> 
> 标签：objective-c, macos, cocoa, localization

我在 XCode4 中稍微了解了国际化的概念。步骤是

1.将字符串文件添加到项目中

2.在此字符串文件的检查器面板中，在本地化部分下，从列表中选择所需的本地化语言。

3.考虑我添加了英语和法语。

4.如果我想本地化字符串Hello，我需要在相关的字符串文件中添加键值对，如Localizable.Sring中的“Title”=“Hello”和Localizable.Sring中的“Title”=“Bonjour” （法语）

5.然后，我们可以使用 NSLocalizedString(@"Title", nil); 读取英文和法文的本地化文本。

这工作正常。

这是我的要求，我正在从Web服务读取一个字符串，我不知道字符串和字符串的长度，它可能是一个段落。每次发送请求时它可能会有所不同。

我需要阅读在运行时更改并转换为所需的本地化字符串的文本，让我们考虑一下法语。我该怎么做。任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:26:39.400

我猜你知道所有可能的字符串。为什么不使用：

```
NSString *myDynamicString = ...
NSLocalizedString(myDynamicString, "dynamic string"); 
```

# c# - 我可以将条件作为 C# 中的参数传递给方法吗

> ID：10203806
> 
> 赞同：5
> 
> 时间：2012-04-18T06:14:50.093
> 
> 标签：c#, c#-4.0

我有 2 个按钮执行相同的功能但处于不同的状态。那里的代码是这样的。

```
private void button1_Click(){
// do function1

if(condition){
    ...decrement an integer
    //do function2
}
}

private void button2_Click(){
// do function1

if(another condition){
    ...increment an integer

    //do function2
}
} 
```

我可以将条件 1 和条件 2 以及递增、递减传递给方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T06:26:53.253

是的你可以。但是你能做的仍然有限。考虑这个

```
public void Foo(Action action, Func<Boolean> someCondition) {
    if (someCondition() == true) action();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T06:23:22.047

你可以尝试这样的事情：

```
 private void buttonClick()
    {
        DoSomething(condition ? true : false);
    }
    private void DoSomething(bool increment)
    {
        // do stuff

        if (increment)
            ++index;
        else
            --index;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T06:26:12.070

为什么不将重复的代码提取到方法中？

```
private void Function1() 
{ 
   // do function1
}

private void Function2()
{
   // do function2
}

private void button1_Click()
{
   Function1() ;

   if(condition)
   {
       //...decrement an integer
       Function2();
   }
}

private void button2_Click()
{
  Function1();

  if(another condition)
  {
    //...increment an integer
    Function2();
  }
} 
```

如果您有许多具有相同结构的类似方法，请考虑创建

```
private void DoSomething(Func<bool> condition, Action action)
{
    Function1();
    if (condition())
    {
        action();
        Function2();
    }
} 
```

并以这种方式调用它：

```
private int value;

private void button2_Click()
{
    DoSomething(() => value < 5, () => value++);
} 
```

当然，如果您需要将一些参数传递给条件或操作，您应该更改`Func`或`Action`键入。如果您需要从操作中返回一些值，也可以使用`Func`而不是。`Action`

```
private int value;

private void button2_Click()
{
    DoSomething((x) => x % 2 == 0, (x) =>  x.ToString());
}

private void DoSomething(Func<int, bool> condition, Func<int, string> action)
{
    Function1();
    if (condition(value))
    {
        string result = action(value);
        Function2();
    }
} 
```

如果您的条件和操作不是那么简单，请使用命名方法而不是 lambda：

```
private bool FooCondition(int x)
{
   // complex condition here
}

private string BarAction(int x)
{
    // complex action here
}

private void button2_Click()
{
    DoSomething(FooCondition, BarAction);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T06:17:03.773

您可以通过将条件 1 和条件 2 包装在方法中并将它们用作委托来实现此目的，这允许将它们传递到方法中。

例如，您可以让带有委托签名的消息期望采用 x 个输入并返回布尔值的方法。然后为条件 1 和 2 创建与该签名匹配的方法，并将适当的方法传递给该方法。

在方法内部，您只需将委托称为方法（实际上就是方法）。

查看 Microsoft 围绕代表的文档：http: [//msdn.microsoft.com/en-us/library/ms173171 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms173171(v=vs.80).aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T06:26:34.603

如果您使用的是 .NET 3.0，则可以将[Func](http://msdn.microsoft.com/en-us/library/bb549151.aspx)传递给该方法。带参数和不带参数的两个类都存在。返回一个`Func`布尔值和一个参数，可以用这样的 lambda 来编写：

```
condition => {
  if (condition)
    index++;
  else
    index--;
} 
```

`Func`可以保存到变量中并根据需要传递。

# xml - xml文件节点值没有进入iE？

> ID：10203807
> 
> 赞同：1
> 
> 时间：2012-04-18T06:14:50.137
> 
> 标签：xml

我有这个 xml 文件

```
<form> <age>18 To 25~18-25</age><religion>No Religious Belief~8</religion><mothertongue>Any~1</mothertongue><countries>Any~0</countries><work_status>Any~2</work_status><photo>Any~0</photo> </form> 
```

我想获取节点国家的节点值（按名称，而不是按位置，因为位置可能会有所不同）。

解析后，我在我的javascript代码中使用它

xmlDoc.getElementsByTagName("countries")[0].childNodes[0].nodeValue

它在 Mozilla 中给了我正确的值，但在 ie 中却没有，出现需要对象的错误

请帮忙

# iphone - iphone sdk：如何使用 CoreAnimation 为 UIImageView 中的一组图像设置动画？

> ID：10203809
> 
> 赞同：0
> 
> 时间：2012-04-18T06:14:56.787
> 
> 标签：iphone

我已经在 UIImageView 中加载了一组图像。如何使用 CoreAnimation 为 UIImageView 中的图像设置动画？请给我建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T06:34:45.980

如果您设置计时器以根据计时器的剩余秒数为动画中的图像设置警报，那么这是一个非常好的动画图像代码，我已经使用图像来制作花

{

//-----------------图像动画-------------------//

```
-(void)imageAnimationMethod

   {

 imageAnimation=[[UIImageView alloc]initWithFrame:CGRectMake(20, 150, 135, 135)];

  [ self.view addSubview:imageAnimation];

 imageAnimation.animationImages=[NSArray arrayWithObjects:
                                [UIImage imageNamed:@"101.png"],
                                [UIImage imageNamed:@"102.png"],
                                [UIImage imageNamed:@"103.png"],
                                [UIImage imageNamed:@"104.png"],
                                [UIImage imageNamed:@"105.png"],
                                [UIImage imageNamed:@"106.png"],
                                [UIImage imageNamed:@"107.png"],
                                [UIImage imageNamed:@"108.png"],
                                [UIImage imageNamed:@"109.png"],
                                [UIImage imageNamed:@"110.png"],
                                [UIImage imageNamed:@"111.png"],
                                [UIImage imageNamed:@"112.png"],
                                [UIImage imageNamed:@"113.png"],
                                [UIImage imageNamed:@"114.png"],
                                [UIImage imageNamed:@"115.png"],
                                [UIImage imageNamed:@"116.png"],

                             nil]; 
```

//-----remaining 是计时器的第二个剩余时间---------//

```
 int i=remaining*16/16;

  imageAnimation.animationDuration=i;

  imageAnimation.animationRepeatCount=0;

 }
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T06:27:15.173

如果您只想为 imageView 中的一组图像设置动画，下面的代码将有所帮助

```
UIImageView* animatedImageView = [[UIImageView alloc]init];
animatedImageView.animationImages = [NSArray arrayWithObjects:    
                                     [UIImage imageNamed:@"1.gif"],
                                     [UIImage imageNamed:@"2.gif"],
                                     [UIImage imageNamed:@"3.gif"],
                                     [UIImage imageNamed:@"4.gif"], nil];
animatedImageView.animationDuration = 1.0f;
animatedImageView.animationRepeatCount = 0;
[animatedImageView startAnimating];
[self.view addSubview: animatedImageView]; 
```

# jsf-2 - 在jsf2.0托管bean中设置请求参数

> ID：10203812
> 
> 赞同：-1
> 
> 时间：2012-04-18T06:15:11.717
> 
> 标签：jsf-2

我正在使用 JSF2.0，我想在托管 bean 类中设置请求参数值，并希望进入第二个托管 bean 类。那我该怎么做，请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:36:00.603

使用“视图参数”（f:viewParam）。

您在 Facelet 上为您希望接收的每个请求参数声明这些，并将它们绑定到支持 bean 中的属性。如果您愿意，您可以将转换器和验证器附加到它们。

或者，您可以通过可以从 FacesContext 获取的 ExternalContext 访问原始参数映射。

# vb.net - 如何在此 linq 查询中放置 Sum()？

> ID：10203813
> 
> 赞同：1
> 
> 时间：2012-04-18T06:15:20.233
> 
> 标签：vb.net, linq, linq-to-dataset

我正在寻找总结“状态”字段。

```
 Dim _detailRecords As New DataTable
    _detailRecords.Columns.Add("y")
    _detailRecords.Columns.Add("z")
    _detailRecords.Columns.Add("A", GetType(Int32))

    Dim workRow As DataRow
    Dim i As Integer

    For i = 1 To 3
        workRow = _detailRecords.NewRow()
        workRow(0) = i.ToString()
        workRow(1) = "CustName" & i.ToString()
        workRow(2) = i + 1
        _detailRecords.Rows.Add(workRow)
    Next

    For i = 1 To 3
        workRow = _detailRecords.NewRow()
        workRow(0) = i.ToString()
        workRow(1) = "CustName" & i.ToString()
        workRow(2) = i + 1
        _detailRecords.Rows.Add(workRow)
    Next

Dim query8 As IEnumerable(Of DataRow) = (From record As DataRow In _detailRecords _
    Group record By y = record.Field(Of String)("y"), _
                   z = record.Field(Of String)("z"), _
                   Status = record.Field(Of Int32)("Status") Into groupedRecords = Group _
Select groupedRecords.FirstOrDefault()) 
```

我还想将其保留为 DataRow 的 IEnumerable，因为我将使用它创建一个数据表

```
Dim yyyyy As DataTable = query8.CopyToDataTable 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:43:20.570

只需添加对所需聚合方法的调用，并可选择为结果添加别名。

```
Dim query =
    From record In _detailRecords
    Group record
        By Y = record.Field(Of String)("y"),
           Z = record.Field(Of String)("z"),
           Status = record.Field(Of Int32)("Status")
        Into groupedRecords = Group,
             Sum(record.Field(Of Int32)("Status")) ' Get the sum of the Status values
    Select FirstRecord = groupedRecords.FirstOrDefault,
           Sum 
```

请注意，这可以写成多种方式，这只是一种方式。

# xml - Group By XSLT 1.0，组组

> ID：10203814
> 
> 赞同：0
> 
> 时间：2012-04-18T06:15:22.883
> 
> 标签：xml, xslt, xslt-1.0

我有点需要使用 XSLT 创建“组组”。

下面是我的 XML 和 XSL 文件。我使用这个 SO[链接](https://stackoverflow.com/questions/1903906/xslt-1-0-group-by)来应用 Muenchian 分组。我试图缩短文件并仅显示代表问题的必需元素。

**文件**

```
<IO_SearchShoppingFilesResult xmlns="http://schemas.datacontract.org/2004/07/Trevoo.WS.IO.Shopping" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
<ShoppingFiles
 xmlns:a="http://schemas.datacontract.org/2004/07/Trevoo.WS.Entities.Shopping"
 xmlns:b="http://schemas.datacontract.org/2004/07/Trevoo.WS.Entities.Air">
    <a:T_ShoppingFile>
        ....
        <b:T_AirBookingItem>
            ...
            <a:LocalPaxType>ADT</a:LocalPaxType>
            ...
        </b:T_AirBookingItem>
        <b:T_AirBookingItem>
            ...
            <a:LocalPaxType>CHD</a:LocalPaxType>
            ...
        </b:T_AirBookingItem>
        <b:T_AirBookingItem>
            ...
            <a:LocalPaxType>INF</a:LocalPaxType>
            ...
        </b:T_AirBookingItem>
        ...
    </a:T_ShoppingFile>

    <a:T_ShoppingFile>
        ....
        <b:T_AirBookingItem>
            ...
            <a:LocalPaxType>ADT</a:LocalPaxType>
            ...
        </b:T_AirBookingItem>
        ...
    </a:T_ShoppingFile>
</ShoppingFiles>
</IO_SearchShoppingFilesResult> 
```

**XSL 文件**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:res="http://schemas.datacontract.org/2004/07/Trevoo.WS.IO.Shopping"
xmlns:a="http://schemas.datacontract.org/2004/07/Trevoo.WS.Entities.Shopping"
xmlns:b="http://schemas.datacontract.org/2004/07/Trevoo.WS.Entities.Air"
xmlns:c="http://schemas.microsoft.com/2003/10/Serialization/Arrays"
xmlns:bb="http://schemas.datacontract.org/2004/07/Trevoo.WS.Entities.Shopping.Views">
<xsl:output method="xml" indent="yes" />

<xsl:key name="travelerGroup"
    match="res:IO_SearchShoppingFilesResult/res:ShoppingFiles/a:T_ShoppingFile[position()=1]/a:AirBookings/b:T_AirBooking/b:BookingItems/b:T_AirBookingItem"
    use="b:PaxReference/a:LocalPaxType" />

<xsl:template match="/">
    <xsl:element name="PNRViewRS">
        <xsl:apply-templates
            select="res:IO_SearchShoppingFilesResult/res:ShoppingFiles" />
    </xsl:element>      
</xsl:template>

<xsl:template match="res:ShoppingFiles">
    <!-- For FareGroup, Traveler, Telephone, EmailAddress -->
    <xsl:apply-templates select="a:T_ShoppingFile" />
    ...
</xsl:template>

<xsl:template match="a:T_ShoppingFile">
    ...
    <xsl:apply-templates
            select="a:AirBookings/b:T_AirBooking/b:BookingItems/b:T_AirBookingItem[generate-id() = generate-id(key('travelerGroup', b:PaxReference/a:LocalPaxType)[1])]" />
    ...
</xsl:template>
...
<xsl:template match="b:T_AirBookingItem">
    ...
                    <!-- Line 1 -->
        <xsl:value-of
            select="count(key('travelerGroup', b:PaxReference/a:LocalPaxType))" />  
    ...

</xsl:template> 
```

可以看到，我已经申请`key`了`<b:T_AirBookingItem>`。并且 multiple`<b:T_AirBookingItem>`存在于 multiple 中`<a:T_ShoppingFile>`。

现在，我想分别处理每个`<a:T_ShoppingFile>`，然后对其中的所有`<b:T_AirBookingItem>`内容应用分组。在这段代码中发生的事情是`<b:T_AirBookingItem>`所有的`<a:T_ShoppingFile>`都一次组合在一起。

第 1 行显示了这种转换的结果之一。`<b:T_AirBookingItem>`它应该显示一个特定的`<a:LocalPaxType>`（比如 ADT）**的`<a:T_ShoppingFile>`**总数。但是，它反而考虑`<b:T_AirBookingItem>`了整个 XML 中的所有内容。

所以我应该得到“1”个ADT，我得到“2”。

我该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:50:27.923

听起来您想使用由多个元素组成的复合键。在这种情况下，您正在使用**a:T_ShoppingFile**和**a:LocalPaxType**，所以您可能需要这样的东西

```
<xsl:key 
   name="item" 
   match="b:T_AirBookingItem" 
   use="concat(generate-id(..) , '|', a:LocalPaxType)" /> 
```

然后，为每个**a:T_ShoppingFile**获取唯一**的 a:LocalPaxType**记录，您只需执行此操作

```
<xsl:apply-templates 
  select="b:T_AirBookingItem[generate-id() 
    = generate-id(key('item', concat(generate-id(..) , '|', a:LocalPaxType))[1])]" /> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:res="http://schemas.datacontract.org/2004/07/Trevoo.WS.IO.Shopping" xmlns:a="http://schemas.datacontract.org/2004/07/Trevoo.WS.Entities.Shopping" xmlns:b="http://schemas.datacontract.org/2004/07/Trevoo.WS.Entities.Air" xmlns:c="http://schemas.microsoft.com/2003/10/Serialization/Arrays" xmlns:bb="http://schemas.datacontract.org/2004/07/Trevoo.WS.Entities.Shopping.Views" exclude-result-prefixes="res a b c bb">
   <xsl:output method="xml" indent="yes"/>

   <xsl:key name="item" match="b:T_AirBookingItem" use="concat(generate-id(..) , '|', a:LocalPaxType)"/>

   <xsl:template match="/">
      <xsl:apply-templates select="//a:T_ShoppingFile"/>
   </xsl:template>

   <xsl:template match="a:T_ShoppingFile">
      <file number="{position()}">
         <xsl:apply-templates select="b:T_AirBookingItem[generate-id() = generate-id(key('item', concat(generate-id(..) , '|', a:LocalPaxType))[1])]"/>
      </file>
   </xsl:template>

   <xsl:template match="b:T_AirBookingItem">
      <result>
         <xsl:value-of select="concat(a:LocalPaxType, ' * ', count(key('item', concat(generate-id(..) , '|', a:LocalPaxType))), '&#13;')"/>
      </result>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
<file number="1">
   <result>ADT * 1</result>
   <result>CHD * 1</result>
   <result>INF * 1</result>
</file>
<file number="2">
   <result>ADT * 1</result>
</file> 
```

显然，这显示了所有**a:T_ShoppingFile**和**a:LocalPaxType 的结果**。如果你想限制到一个特定**的 a:LocalPaxType**你可以做这样的事情（尽管你可能想要参数化这个值，而不是硬编码**ADT**

```
 <xsl:template match="a:T_ShoppingFile">
      <file number="{position()}">
         <xsl:value-of select="count(key('item', concat(generate-id() , '|', 'ADT')))" />
      </file>
   </xsl:template> 
```

# ruby-on-rails - 更改模型对象的 ID

> ID：10203815
> 
> 赞同：0
> 
> 时间：2012-04-18T06:15:26.250
> 
> 标签：ruby-on-rails

我目前有一个名为`Album`which的模型`has_many :songs`。我希望用户能够将歌曲从一张专辑移动到另一张专辑。在 Rails 控制台中乱搞，我发现

```
song.album_id=2
song.save 
```

工作正常，但是，我怀疑这是在实际应用程序中应用它的正确方法。有没有合适的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:38:38.040

这里没有什么不寻常的：

```
song.album_id=2
# or
song.album = @album 
```

两者都做他们的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T06:41:42.123

通过拥有这些：

```
album has_many :songs
song belongs_to :album 
```

你可以这样做：

```
#find your album, by params[:id] or any other means you wish

album = Album.find(params[:id])

#assign it to the song

song.album = album 
```

这样，您就可以在为其分配歌曲之前确保专辑确实存在

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T06:41:55.023

```
@album = Album.find_by_id(10)
#This is the album to move song
@song = Song.find_by_id(100)
#This is the song to be moved
@song.album = @album
@song.save 
```

# javascript - 为什么 Google Analytics 不跟踪任何事件？

> ID：10203819
> 
> 赞同：3
> 
> 时间：2012-04-18T06:15:42.070
> 
> 标签：javascript, google-analytics

我已经实现了几乎标准的例子：

```
 <script>

            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-mycode']);
            _gaq.push(['_trackPageview']);

            (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();

        </script>

        <script>

            function recordOutboundLink(link, category, action) {
                try {
                    var myTracker=_gat._getTrackerByName();
                    _gaq.push(['myTracker._trackEvent', category ,  action ]);
                    setTimeout('document.location = "' + link.href + '"', 100)
                }catch(err){}
            }

        </script> 
```

并且链接有这个 onclick 事件：

```
<a id="latestDownload" href="https://example.com" onClick="recordOutboundLink(this, 'newDownloads', 'latest');return false;">Download latest version</a> 
```

过去 3 天没有跟踪任何事件，这对我来说听起来是错误的。我已经使用 chrome 的 GA 调试插件测试了该页面，它显示事件已发送。

我在这里犯了一些错误吗？

Google GA 调试插件显示（字面意思，未混淆）：

```
Account ID : UA-XXXXX-X

&utmac=UA-XXXXX-X 
```

我需要再次推送“_setAccount”吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T16:27:10.537

tl;博士...不要`_getTrackerByName()`打电话，只需使用

```
_gaq.push(['myTracker._trackEvent', category ,  action ]); 
```

更长的解释：异步跟踪允许使用类似的语法将命令推送到多个跟踪器（请参阅[跟踪基础）](http://code.google.com/apis/analytics/docs/tracking/asyncUsageGuide.html#MultipleCommands)

```
_gaq.push(['_setAccount', 'UA-XXXXX-1']);
_gaq.push(['_trackPageview']);
_gaq.push(['b._setAccount', 'UA-XXXXX-2']);
_gaq.push(['b._trackPageview']); 
```

该`_gaq.push(['myTracker._trackEvent', category , action ]);`代码假定您已经`myTracker`像`b`上面的跟踪器一样进行了初始化。

由于`myTracker`从未设置过 accountId，因此`UA-XXXXX-X`在调试时会显示 accountId。

[Specialized Tracking/Outbound Links](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1136920)上的分析代码是错误的，或者只有在名为`myTracker`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T07:15:30.493

`myTracker`是一个变量，所以你不能真正在字符串中引用它。以下应该工作：

```
_gaq.push(['_trackEvent', category ,  action ]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-25T08:56:02.110

setTimeout 对我来说似乎有点冒险——它假设 Google Analytics 调用是在 100 毫秒内完成的。

我更喜欢这个：

```
function trackOutboundLink(url) {
    _gaq.push(['_trackEvent', 'outbound', 'click']);

    _gaq.push(function() {
        window.location = url;
    });
} 
```

这会将重定向排队，直到 Google Analytics 异步调用完成。

连接：

```
<a href="#" onclick="trackOutboundLink('your-url');return false;">Link</a> 
```

# repeater - 在 cognos Report Studio 中替代使用中继器

> ID：10203824
> 
> 赞同：1
> 
> 时间：2012-04-18T06:16:10.180
> 
> 标签：repeater, cognos-8

我正在使用 Cognos 8.4 Report Studio 创建一个包含多个列表的报告。我需要使用转发器，以便可以为多个成员而不是单个成员显示数据。我被告知在大型报告中使用中继器会影响性能。那么，是否有另一种方法可以在 cognos report studio 中使用中继器并获得相同的结果？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T06:05:01.387

如果您解锁报表布局，您可以使用列表来执行布局操作，就像使用转发器一样（如果您没有水平跨越转发器单元格）。

有关报表对象的更多详细信息，请参阅 IBM Cognos Infocenter。 [http://publib.boulder.ibm.com/infocenter/c8bi/v8r4m0/index.jsp](http://publib.boulder.ibm.com/infocenter/c8bi/v8r4m0/index.jsp)

# xpages - xhr 在 xp 的 onclick 中取消了错误：带有 xe:tooltipDialog 和 xe:djContentPane 的链接带有部分刷新

> ID：10203830
> 
> 赞同：1
> 
> 时间：2012-04-18T06:16:43.120
> 
> 标签：xpages, xpages-extlib

我在 xp:link 上使用 onclick 事件时遇到问题，鼠标悬停会弹出一个工具提示对话框，该对话框执行部分刷新以获取其内容。每当用户想要单击链接时，工具提示可能已经弹出并加载其内容。因为链接会重定向到另一个页面，所以内容窗格中的部分刷新事件正在被切断。这几乎每次都会导致错误“xhr cancelled”（您可以在浏览器的控制台中看到它，例如 Firebug）。

我已经尝试了几件事，比如在重定向到另一个页面之前尝试 .cancel() 内容窗格，但它不起作用可能是因为它在 tooltipDialog 中，所以我无法处理它。

下面是代码示例，您可以通过将其放入 Xpages 扩展库演示 nsf（填充数据）内的新 xpage 中来测试它。只需将链接悬停在工具提示完成加载其内容之前，单击该链接。

```
 <?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core"
    xmlns:xe="http://www.ibm.com/xsp/coreex">
    <xp:this.data>
        <xp:dominoView var="view1" viewName="AllContacts"></xp:dominoView>
    </xp:this.data>
    <xp:br></xp:br>
    <xp:br></xp:br>
    <xp:link escape="true" text="Hover me" id="link1" style="margin-left:50px;"
        value="/Core_DojoLayout.xsp">
        <xp:this.onmouseover><![CDATA[tooltipTimerId = setTimeout ( "XSP.openTooltipDialog('#{id:tooltipDialog1}','#{id:link1}');", 500 );
                    ]]></xp:this.onmouseover>
        <xp:this.onmouseout><![CDATA[if (tooltipTimerId){
                clearTimeout (tooltipTimerId);
            }]]></xp:this.onmouseout>
    </xp:link>
    <xp:br></xp:br>
    <xp:br></xp:br>
    <xe:tooltipDialog id="tooltipDialog1">
        <xe:djContentPane id="djContentPane1" refreshOnShow="false"
            partialRefresh="true" preload="true">
            <xp:repeat id="repeat1" rows="1000" value="#{view1}"
                var="row">
                <xp:text escape="true" id="computedField1"
                    value="#{row.FirstName}">
                </xp:text>
                &#160;&#160;
                <xp:text escape="true" id="computedField2"
                    value="#{row.LastName}">
                </xp:text>
                <xp:br></xp:br>
            </xp:repeat>
        </xe:djContentPane>
    </xe:tooltipDialog>
</xp:view> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:08:09.987

我修好了它！问题是出现问题时会调用 XSP.error。因为我不想要任何丑陋的警报框，所以我将使用此代码重新定义该函数。XSP 消息（在我的情况下为错误）记录到控制台。

```
 <xp:scriptBlock id="scriptBlock1"
    value="XSP.error = function(err){
            console.error('XSP error : ' + err);
        };">
</xp:scriptBlock> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T20:55:31.170

渡轮——你必须把它们结合起来吗？另一种方法是在链接旁边放置一个图标并将鼠标悬停添加到图标上（可能是一个小人物图标） - 然后您可以将鼠标悬停和单击而不是尝试组合。

另一种选择是将链接和 div（并排）放置在父级（表格或 div 或其他东西）内，并使用 CSS 将 div 放置在链接的顶部。然后将鼠标悬停在 DIV 上，然后它会刷新工具提示，使您的链接保持完整且可点击。

让我知道这是否有帮助:)

# php - 如何改进这个 php 数组数据检索？

> ID：10203832
> 
> 赞同：0
> 
> 时间：2012-04-18T06:16:50.427
> 
> 标签：php, arrays, loops

想知道是否可以做任何改进来加速这个数组？

测试数组行数为 40,000 条记录。

循环完成需要很长时间。

样本值：

```
$test[] = array(
    'products_id' => $data['products_id'],
    'products_extra_fields_id' => $data['products_extra_fields_id'],
    'products_extra_fields_name' => $data['products_extra_fields_name'],
    'products_extra_fields_value' => $data['products_extra_fields_value']
    );

foreach productid
{

  $colname="column name";

    //this inside for loop making thing very slow
    foreach ($test as $key1 => $row1)
    {
        $w= $row1['products_id'];
        $x= $row1['products_extra_fields_id'];
        $y= $row1['products_extra_fields_name'];
        $z= $row1['products_extra_fields_value'];

        if( ($w==$products_id) && ($y== $colname) )
        {
            $wantedvalue=$z;
            break;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:22:33.380

我认为这不是您需要编辑的数组。如果要从数据库中检索这些数据，则必须加快 sql 查询速度。此外，您可以将索引添加到您的字段。这是您可以参考的链接。 [http://www.catswhocode.com/blog/10-sql-tips-to-speed-up-your-database](http://www.catswhocode.com/blog/10-sql-tips-to-speed-up-your-database)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:23:33.763

1.  您可以将数组 $test[] 构建为字典（用户 products_id . "_" . products_extra_fields_name 作为键）

    $test[$data['products_id'] ."_".$data['products_extra_fields_name']] = array('products_id' => $data['products_id'], 'products_extra_fields_id' => $data['products_extra_fields_id' ], 'products_extra_fields_name' => $data['products_extra_fields_name'], 'products_extra_fields_value' => $data['products_extra_fields_value'] );

一旦你这样做了，你可以直接索引数组，因为你已经有了列名和 products_id

# python - 在同一个 apache 上同时使用基于 django 的 mod_wsgi 和基于原始 python 的 mod_python

> ID：10203839
> 
> 赞同：1
> 
> 时间：2012-04-18T06:17:25.390
> 
> 标签：python, django, apache, mod-wsgi, mod-python

我正在 django 1.4 中构建一个 Web 应用程序，我必须使用 mod_wsgi 在 apache 上部署它。问题是已经有一个使用 mod_python 运行的原始 python web 应用程序。在通过互联网学习时，我发现可以同时使用这两个应用程序。我的问题是 python、mod_python、mod_wsgi、apache 和 django 的版本组合（当然更喜欢更新的版本）是兼容的？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:30:01.833

信不信由你，我有完全相同的设置。

处理它的最简单方法是在 VirtualHosts 下对应用程序进行分区。如果你能做到这一点，那么这一切都超级简单。每个应用程序只有一个 VirtualHost 条目。

如果您需要在 HTTP/S 下运行它们，那么您可能会遇到问题。Apache 只能为同一服务器上的所有 HTTP/S 站点拥有一个 VirtualHost。

我们在我们的主要生产机器上运行以下版本：

*   Apache/2.2.14 (Ubuntu)
*   mod_python/3.3.1
*   Python/2.6.5
*   mod_ssl/2.2.14
*   OpenSSL/0.9.8k
*   mod_wsgi/2.8

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:30:49.120

Django 运行最好，如果您使用的是 apache，建议使用 mod_wsgi 在生产环境中运行。如果你使用 nginx，uwsgi 会更好（我个人觉得 nginx 比 apache 好得多）

你可以以任何你想要的方式运行它，但这是最好的方式。

您可以与其他 mod_wsgi 应用程序同时运行 mod_python fcgi 或 cgi 进程，并使用 apache 作为反向代理（或将 nginx 放在 apache 前面作为反向代理）。您可以通过这种方式将流量引流到相关应用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T08:24:06.513

mod_python 没有首选版本。它已被弃用。不要使用它。

# ibm-mq - IBM.WMQ.MQQueueManager 的类型初始化程序引发异常

> ID：10203841
> 
> 赞同：6
> 
> 时间：2012-04-18T06:17:32.307
> 
> 标签：ibm-mq

当我使用 C# 连接 WebSphere MQ 而不安装 MQ 服务器和客户端时，我得到了异常`The type initializer for 'IBM.WMQ.MQQueueManager' threw an exception`。我从 MQ 服务器添加了两个 MQ dll 的引用`amqmdnet.dll`，`amqmdxcs.dll`但它不起作用。如何在不安装 MQ 服务器或客户端的情况下连接到 MQ？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T06:30:38.720

我不建议在不安装 MQ 客户端库的情况下使用它们。安装确保所有必需的二进制文件都已安装并在 GAC 中注册。不需要添加对 amqmdxcs 的引用。只需参考 amqmdnet 就足够了。

因此最好安装 MQ 客户端并运行您的应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-27T11:55:03.883

是的，您可以，您将需要以下 2 个 DLL：“amqmdnet.dll”和“amqmdxcs.dll”

然后，您可以：

1.  在全局程序集缓存 (GAC) 中注册这 2 个 DLL
2.  您可以将它们添加为对您的项目的引用

**但是请注意**：对于选项 2，您需要确保注册表路径“HKEY_LOCAL_MACHINE\SOFTWARE\IBM\WebSphere MQ\Installation”存在。

如果它不存在并且 DLL 不在 GAC 中，您将收到以下异常：

System.TypeInitializationException：“IBM.WMQ.MQQueueManager”的类型初始化程序引发了异常。--> System.TypeInitializationException：“IBM.WMQ.CommonServices”的类型初始化程序引发了异常。--> System.NullReferenceException：对象引用未设置为对象的实例。

这是因为，当不在 GAC 中时，包含“IBM.WMQ.CommonServices”的“amqmdxcs.dll”会尝试从注册表路径中读取子键以填充一些变量，但由于它不存在，它会失败。

对我来说，这种方法不需要“安装”键中的任何值即可工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-08T10:19:48.317

另请参阅： [.net 使用 IBM MQ 没有完整的 MQ 客户端安装](https://stackoverflow.com/questions/5419978/net-using-ibm-mq-without-full-mq-client-install/25201159#25201159)

基本上从 WMQ bin 文件夹中获取 2 个 dll：amqmdnet.dll & amqmdxcs.dll

我发现对于 WMQ 7.5，您需要在 GAC 中注册 2 个 dll 才能正常工作。您需要管理员权限才能注册它们。

引用项目中的库以使用本机 WMQ 对象

# asp.net - 我应该选择创建新网站，还是在 Visual Studio 中创建新项目？

> ID：10203849
> 
> 赞同：0
> 
> 时间：2012-04-18T06:18:23.617
> 
> 标签：asp.net, visual-studio, visual-studio-2010, visual-studio-templates

> **可能重复：**
> [ASP.NET：网站还是 Web 应用程序？](https://stackoverflow.com/questions/398037/asp-net-web-site-or-web-application)

我之前用VS 2010自带的模板在VS中创建了一个47页的网站。我即将创建一个新网站。这将是一个产生潜在客户的网站，所以它最多不应该超过 7 或 8 页。

我想用**一个Visual Studio自带的在线模板**，虽然我对AJAX、MVC等一无所知。我真的只是想要一个与VS自带的模板不同的外观。

当我打开 Visual Studio 2010 时，应该点击**new project**还是**new website**？或者我应该点击**新网站**，然后**添加新项目**？

我对 VB 也比对 C# 更熟悉。我必须添加一个表单，客户可以在其中提交信息。对于像我这样的半补救程序员来说，最好的途径是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:50:27.030

我认为您实际上可以从一种类型更改为另一种类型，因此这不是一个大决定。

如果我是您，我会选择新网站，因为听起来您不会添加其他程序集。

# c# - nhibernate fluent映射延迟加载派生类

> ID：10203854
> 
> 赞同：1
> 
> 时间：2012-04-18T06:18:57.387
> 
> 标签：c#, nhibernate, fluent, table-per-subclass

是否可以在 nhibernate/fluent 中为每个具体映射获取一个表来发出数据库语句以确定类的类型，然后发出另一个语句来获取详细信息，而不是在一个巨大的左连接 uber 语句中加入所有子类表。

*换句话说，子类详细信息可以“延迟”加载。*

我有一个使用流利的 nhibernate 和 ClassMap/SubClassMap 映射类映射的类层次结构。每个派生类（无论如何大多数）都有自己的表。所以这是每个具体类的表。

我没有指定鉴别器值，因为它们在所有子类都包含在同一个表中时使用。然而，我在基类表中有一个整数值，指示它是哪种类型。nhibernate 是否能够使用此数据并为派生类数据发出延迟加载。鉴别器值是数据库中的整数，对应于基类中的枚举。

### 例子。

```
public sealed class PartyMap : ClassMap<Party>
{
  public PartyMap()
  {
     Table("Party");
     // I thought this might do it, but it doesn't :-(
     Polymorphism.Explicit();
     Id(x => x.Id).Column("PartyId");
     Map(x => x.PartyType).CustomType<PartyType>().Column("PartyTypeId");
     Map( ...
     // if I specify this, nhibernate expects all the fields
     // to be in the base class table, above Table(...) is the only one used.
     // DiscriminateSubClassesOnColumn<int>("PartyTypeId", 0).AlwaysSelectWithValue();
   }
}

public class PersonMap : SubclassMap<Person>
{
    public PersonMap()
    {
        Table("Person");
        KeyColumn("PartyId");   
        // if I specify this, nhibernate expects all the fields
        // to be in the base class table, above Table(...) is ignored.      
        // DiscriminatorValue((int) PartyType.Person);
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T13:57:10.217

简短的回答：不，这是不可能的。IIRC，即使您使用鉴别器，行为也是完全相同的。

如果需要考虑太多连接（因为您有很多继承类），您应该考虑使用[Table per class hierarchy](http://www.nhforge.org/doc/nh/en/index.html#inheritance-tableperclass)或[Table per sublass with discriminator](http://www.nhforge.org/doc/nh/en/index.html#inheritance-tablepersubclass-discriminator)（如果大多数类具有相似的属性集，其中只有少数完全不同的）

# testing - Grails：我如何模拟被测类的其他方法，这些方法可能在测试期间被内部调用

> ID：10203856
> 
> 赞同：20
> 
> 时间：2012-04-18T06:19:02.960
> 
> 标签：testing, grails, groovy, mocking, tdd

我正在为类似于下面给出的服务类中的 methodA() 编写测试。

```
Class SampleService {
  def methodA(){
     methodB()
  }

  def methodB(){
  }
} 
```

当我测试 methodA() 时，我需要能够在测试 methodA() 时模拟对 methodB() 的调用。我正在使用 2.0.x 版的 grails。在 1.3.x 发行版中，我会像这样编写一个自我模拟

```
def sampleServiceMock = mockFor(SampleService) 
sampleServiceMock.demand.methodB { -> } 
```

但这在 2.0.x 版本中不起作用。我想知道在测试 methodA() 时模拟 methodB() 的其他方法是什么

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-18T13:52:52.043

对于这类问题，我实际上避免使用模拟并使用内置的 groovyProxy 功能将闭包映射转换为代理对象。这为您提供了一个实例，其中一些方法被覆盖，但其他方法被传递给了真正的类：

```
class SampleService {
    def methodA() {
        methodB()
    }

    def methodB() {
        return "real method"
    }
}

def mock = [methodB: {-> return "mock!" }] as SampleService

assert "mock!" == mock.methodA()
assert "real method" == new SampleService().methodA() 
```

我喜欢只更改一个实例，可以在一行中完成，并且不会弄乱该实例之外需要清理的任何东西的元类。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-18T08:25:40.063

Groovy 有很多模拟替代方案。[您可以查看Groovy](http://groovy.codehaus.org/Groovy+Mocks) Mocks 的一些文档，[使用 Maps 和 Expandos 代替 Mocks](http://groovy.codehaus.org/Developer+Testing+using+Maps+and+Expandos+instead+of+Mocks)或[使用 Closures 代替 Mocks](http://groovy.codehaus.org/Developer+Testing+using+Closures+instead+of+Mocks)。

在您的示例中，我将使用 Groovy 的元编程功能。

```
void testMethodA() {
    service = new SampleService()
    service.metaClass.methodB = { -> return "what you want" }
    service.methodA()
    assert "your condition"
} 
```

# android - Android 应用启动图标大小

> ID：10203862
> 
> 赞同：6
> 
> 时间：2012-04-18T06:19:27.447
> 
> 标签：android, icons, size

按照 Google 的指南，我在我的项目中为 mdpi 和 hdpi 屏幕添加了 48x48 和 72x72 启动器图标。

但在某些情况下，图标会调整大小。例如，在我的 Acer Iconia A200 平板电脑 (mdpi) 上，应用程序启动器菜单使用 64x64 图标（或多或少，我从屏幕截图中测量了这一点）。实际使用的资源是我的 48x48 图标，拉伸。

有没有办法可以将启动器图标的版本添加到我的项目中，其大小选项比 hdpi/mdpi/ldpi 更多？

提前致谢。

编辑：今天针对 Acer Iconia Tab A200 的软件更新为我解决了这个问题；启动器现在使用 72x72 图标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:27:42.143

您可以使用 xlarge 限定符，但我怀疑平板电脑使用的尺寸不是 48x48，我使用的是 48x48 图标，它在 Galaxy 10.1 平板电脑上运行良好。

# java - 德比：CONCAT等效

> ID：10203863
> 
> 赞同：16
> 
> 时间：2012-04-18T06:19:33.400
> 
> 标签：java, derby, javadb

再会！

Derby/Java DB 与 MySQL 的 CONCAT 功能等价的功能是什么？
我尝试将 CONCAT 用于 Derby，但它会出错。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-18T06:25:10.500

我相信您可以将两个字符串与`||`

[Derby 内置函数参考 - 连接](http://db.apache.org/derby/docs/10.2/ref/rrefsqlj40899.html)

# json - 无法将 jSon 数据存储到 ExtJS (Sencha Touch) 图表中：显示错误“无法读取未定义的属性‘长度’”

> ID：10203872
> 
> 赞同：1
> 
> 时间：2012-04-18T06:20:01.417
> 
> 标签：json, extjs, charts, sencha-touch

**已编辑** 我正在使用为柱形图提供的 Sencha 触摸图表示例。代码如下

```
new Ext.chart.Panel({
    fullscreen: true,
    title: 'Column Chart',
    dockedItems: [{
        xtype: 'button',
            iconCls: 'help',
            iconMask: true,
            ui: 'plain',
            handler: onHelpTap
        }, {
            xtype: 'button',
            iconCls: 'shuffle',
            iconMask: true,
            ui: 'plain',
            handler: onRefreshTap
        }],
        items: {
            cls: 'column1',
            animate: {
                easing: 'bounceOut',
                duration: 750
            },
            store: window.store1,
            shadow: false,
            gradients: [{
                'id': 'v-1',
                'angle': 0,
                stops: {
                    0: {
                        color: 'rgb(212, 40, 40)'
                    },
                    100: {
                        color: 'rgb(117, 14, 14)'
                    }
                }
            },
            {
                'id': 'v-2',
                'angle': 0,
                stops: {
                    0: {
                        color: 'rgb(180, 216, 42)'
                    },
                    100: {
                        color: 'rgb(94, 114, 13)'
                    }
                }
            },
            {
                'id': 'v-3',
                'angle': 0,
                stops: {
                    0: {
                        color: 'rgb(43, 221, 115)'
                    },
                    100: {
                        color: 'rgb(14, 117, 56)'
                    }
                }
            },
            {
                'id': 'v-4',
                'angle': 0,
                stops: {
                    0: {
                        color: 'rgb(45, 117, 226)'
                    },
                    100: {
                        color: 'rgb(14, 56, 117)'
                    }
                }
            },
            {
                'id': 'v-5',
                'angle': 0,
                stops: {
                    0: {
                        color: 'rgb(187, 45, 222)'
                    },
                    100: {
                        color: 'rgb(85, 10, 103)'
                    }
                }
            }],
            axes: [{
                type: 'Numeric',
                position: 'left',
                fields: ['wins'],
                minimum: 0,
                maximum: 10,
                label: {
                    renderer: function (v) {
                        return v.toFixed(0);
                    }
                },
                title: 'Wins'
            },
            {
                type: 'Category',
                position: 'bottom',
                fields: ['School'],
                title: 'School'
            }],
            series: [{
                type: 'column',
                axis: 'left',
                highlight: true,
                renderer: function (sprite, storeItem, barAttr, i, store) {
                    barAttr.fill = colors[i % colors.length];
                    return barAttr;
                },
                label: {
                    field: 'wins'
                },
                xField: 'School',
                yField: 'wins'
            }],
            interactions: [{
                type: 'panzoom',
                axes: ['bottom']
            }]
        }
    });

} 
```

**编辑：** 当我在调试器中检查它时，我现在可以加载 json 数据，但我的图表仍然没有显示。这是我更新的代码

```
Ext.regModel('Details', { fields: [{ name: 'School' }, { name: 'wins'}] });

// create the Data Store
window.store1 = new Ext.data.Store({
    model: 'Details',
    proxy: {
        type: 'scripttag',
        url: 'http://localhost:2650/AjaxWCFService.svc/GetDataset',
        reader: {
            root: 'data',
            type: 'json'
        }
    },
    autoLoad: true
}); 
```

如果有人可以让我知道我做错了什么，我将不胜感激。

**旧帖子：** 我正在使用 json 输出绑定到我的 Sencha 柱形图。我的代码如下 -

```
Ext.regModel('details', { idProperty: 'name', fields: ['School', 'wins'] });
// create the Data Store
window.store1 = new Ext.data.Store({
    model: 'details',
    autoLoad: true,
    proxy: {
        type: 'ajax',
        method: 'POST',
        url: 'http://localhost:2650/AjaxWCFService.svc/GetDataset',
        reader: {
            type: 'json',
            root: 'data'
        }
    },
    listeners: {
        load: function (obj, records) {
            Ext.each(records, function (rec) {
                console.log(rec.get('name'));
            });
        }
    } 
}); 
```

这是从 url 返回的 json 数据

```
{
   data: [
       {School:'Dukes',wins:'3'},
       {School:'Emmaus',wins:'10'},
       {School:'Maryland',wins:'5'},
       {School:'Virginia',wins:'2'}
   ]
} 
```

但这不会显示图表，而是在 sencha-touch.js 文件中收到 javascript 错误“未捕获的类型错误：无法读取未定义的属性长度”。

如果我直接对来自 json 输出的数据进行硬编码，那么它可以工作

```
window.store1 = new Ext.data.JsonStore({
    root: 'data',
    fields: ['School', 'wins'],
    autoLoad: true,
    data: [
        {School:'Dukes',wins:'3'},
        {School:'Emmaus',wins:'10'},
        {School:'Maryland',wins:'5'},
        {School:'Virginia',wins:'2'}
    ]
}); 
```

此外，当我从 ExtDesigner 加载 jsonStore 时，它​​工作正常。当我在我的 Secha 图表 index.js 文件中复制相同的代码时，它不起作用。

有人可以让我知道我在代码中做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:18:29.987

我在 Sencha 人的帮助下解决了这个问题。谢谢丹。这是解决方案：

1.  在 Web 服务器上运行示例，因为从文件系统加载 JSON 文件有时会导致问题。
2.  如下构造json数据

    ```
    {
        "data": [
            {
                "School": "Dukes",
                "wins": "3"
            },
            {
                "School": "Emmaus",
                "wins": "10"
            },
            {
                "School": "Maryland",
                "wins": "5"
            },
            {
                "School": "Virginia",
                "wins": "2"
            }
        ]
    } 
    ```

3.  使用以下数据存储

    ```
    window.store1 = new Ext.data.Store({
        model: 'Details',
        proxy: {
            type: 'ajax',
            url: 'GetDataset.json',
            reader: {
                root: 'data',
                type: 'json'
            }
        },
        autoLoad: true
    }); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T01:37:00.723

我在这里猜测，但这似乎是我以前遇到的问题。我相信问题出在代理上。尝试：

```
proxy: {
    type: 'rest',
    url: 'http://localhost:2650/AjaxWCFService.svc/GetDataset', 
    reader: {
        root: 'data'
    }

}, 
```

现在，您需要为代理定义回调函数。有一些配置的优雅方式，但老实说我不知道​​该怎么做，所以我当时发现了一个不同的解决方案，困难的方式，就是包装你的服务返回的 JSON（就像他们在[这里](https://stackoverflow.com/questions/9739745/sencha-touch-2-jsonp-proxy-help-template-always-has-null-for-values)做）：

```
Ext.data.JsonP.callback1(); 
```

如果这些都不起作用，还可以考虑将以下内容添加到您的代理中，并发出“总计”作为 JSON 响应的一部分。

```
totalProperty: 'total' 
```

但请记住，我真的认为这根本不会有太大帮助，而且我只是根据我拥有的工作样本提出这些想法。

尝试阅读[这个](http://www.sencha.com/forum/archive/index.php/t-178871.html?s=af58ba21b6fd04058d861125a7a56609)和[这个](https://stackoverflow.com/questions/7150660/uncaught-syntaxerror-with-extjs-4)。最重要的是祝你好运，这就是我的首要伙伴。也看看[这个](https://stackoverflow.com/questions/7494450/jsonp-not-working-on-extjs-4-uncaught-typeerror-cannot-call-method-substring)帖子。

我希望这能为您指明正确的方向。就像我说的，我不确定，这是我最好的猜测。我可能是错的。

干杯里瓦诺夫

# c# - 如何在 windows phone 'mango' 中查找通话记录（历史）信息？

> ID：10203873
> 
> 赞同：0
> 
> 时间：2012-04-18T06:20:05.410
> 
> 标签：c#, windows-phone-7, calllog

我无法在 windows phone 'mango' 中找到通话记录。

当我搜索这个时，我在下面的链接中找到了 [- Windows Phone 7 通话记录 - Mango API](https://stackoverflow.com/questions/6882990/windows-phone-7-call-history-mango-api)

有没有其他方法可以在 windows phone 'mango' 中找到通话记录？

任何帮助，将不胜感激...

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:53:11.230

正如该链接正确表明的那样，这对于今天的 API 是不可能的。

# google-app-engine - NDB 中 Entity.all(keys_only=True).fetch(20) 的等价物是什么？

> ID：10203874
> 
> 赞同：10
> 
> 时间：2012-04-18T06:20:08.750
> 
> 标签：google-app-engine, google-cloud-datastore, app-engine-ndb

如何在 NDB 中获得以下查询的等效结果？

```
Entity.all(keys_only=True).fetch(20) 
```

我知道你可以传递`'keys_only=True'`给`iter()`方法。但是如果我只想执行一个键获取，我该如何在 NDB 中执行呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-18T06:32:34.377

[在GAE NDB Docs](https://developers.google.com/appengine/docs/python/ndb/queryclass)中找到它。答案是`Entity.query().fetch(20,keys_only=True)`。

# c# - 对象是否为全局 null？

> ID：10203875
> 
> 赞同：2
> 
> 时间：2012-04-18T06:20:11.520
> 
> 标签：c#, java, asp.net, .net

我有一个代码，如下所示。我在一次采访中被问到

```
object global;
void f()
{
  object local=new object();
  global=local;
} 
```

他问，“全局`null`在函数之外吗？”。由于变量在函数之外失去了它的作用域，并且它的引用也应该`local`是给它的，但这不是为什么？`global``null`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T06:25:23.813

您必须区分变量和值。

局部变量只存在于函数内部，但这并不意味着该变量所包含的值不存在于函数外部。

当您分配 to 的值时`local`，`global`您正在复制对该对象的引用，以便有两个对同一对象的引用。当您离开函数时，局部变量会消失，但您复制到全局变量的值仍然存在，并且对象仍然存在，因为仍然存在对它的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T04:34:55.833

我对这个问题进行了大量研究，发现这种行为的唯一原因是由于 .Net 垃圾收集。

> GC 根本身不是对象，而是对对象的引用。GC 根引用的任何对象都将自动在下一次垃圾回收中存活。

由于 local 是一个局部变量，它将保留在 GC 根中，并且由于它被 global 引用，因此它在 GC 中仍然存在。您可以在

[http://www.simple-talk.com/dotnet/.net-framework/understanding-garbage-collection-in-.net/](http://www.simple-talk.com/dotnet/.net-framework/understanding-garbage-collection-in-.net/)

# android - 如何在 Android 应用程序中下载和安装 .apk 文件？

> ID：10203884
> 
> 赞同：1
> 
> 时间：2012-04-18T06:20:57.093
> 
> 标签：android

我通过这个应用程序有一个 java Web 应用程序我正在发送下载 .apk 文件的 URL。现在我必须在我的 Android 模拟器浏览器中使用这个 URL 来下载 .apk 文件并自动安装。那么任何人都可以给我解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T09:33:29.267

只需执行以下步骤：

1、下载文件使用Asynctask或Service。解决方案[**在这里**](https://stackoverflow.com/a/3028660/1050058)

2，将下载的文件传递给包安装程序。

```
Intent intent = new Intent(Intent.ACTION_VIEW);

intent.setDataAndType(Uri.fromFile(new File(Environment.getExternalStorageDirectory() + "/download/" + "app.apk")), "application/vnd.android.package-archive");

startActivity(intent); 
```

这是下载文件和 mime 类型的简单设置路径。更多细节**[在这里](https://stackoverflow.com/questions/4967669/android-install-apk-programmatically)**。您也可以向右看。有一个像你这样的相关问题的列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:34:08.667

在浏览器中输入 url 并回车，它会要求安装。但是文件自动安装过程是基于设备的。如果您选择 Htc 手机，它将自动安装，但不适用于三星手机

# iphone - 了解 iPhone 项目的 Entitlements.plist

> ID：10203886
> 
> 赞同：1
> 
> 时间：2012-04-18T06:21:02.283
> 
> 标签：iphone, debugging, plist, entitlements

我对 Entitlements.plist 有一些疑问。根据苹果文档

我们可以通过 Entitlements.plist 使用 iOS 功能。只有一个名为“Can be Debugged”/get-task-allow 的公共授权密钥可以添加调试功能。

我没有将 Entitlements.plist 添加到我的应用程序项目中，并且我能够调试在设备上运行的应用程序。

有人可以帮助理解

a) 什么是 Entitlements.plist 和
b) 为什么需要它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:21:42.087

“Can be Debugged”/get-task-allow 是在开发/调试过程中需要设置为“NO”的标志，当我们需要 adHoc/distribution 构建时需要设置为“YES”。默认情况下 - 它是“否”，这就是为什么您可以在调试设备上运行您的应用程序（使用“开发”配置文件）。但是如果没有 Entitlements.plist，您将无法为 ad Hoc 或 Distribution 构建您的应用程序。

# haskell - 一旦在 lambda 演算中找到了解决方案，将其转换为代码有多容易？

> ID：10203889
> 
> 赞同：1
> 
> 时间：2012-04-18T06:21:16.930
> 
> 标签：haskell, functional-programming, lisp, lambda-calculus

如果您要阅读问题陈述，例如在 TopCoder 上找到的内容，并将其转换为 lambda 演算表示，那么将其“转换”为 Haskell 或 Lisp 代码是否是一个简单的练习？

换句话说，是否可以使用 lambda 演算形式系统解决问题，然后用函数式编程语言轻松实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T09:59:05.903

Haskell 的语法与 lambda 演算非常相似。您的问题将是 Haskell 的类型检查器不会接受无类型 lambda 演算中的某些术语。

出于好奇，到底是谁*用*lambda 演算解决了 TopCoder 问题？*这*听起来很不平凡。o_O

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:28:36.833

这是一个很难的问题。理论上，是的。在实践中，有点。一般来说，我会说定义的可计算函数可以有效地实现（在程序员努力的时间空间内），是的，但这实际上取决于对编程语言和所讨论数学的熟悉程度，而不是这样做的可能性. 例如，我想可以实现一个 lambda 演算解释器，然后我将您引导至 ['Visual Automata Simulator]' [1](http://www.cs.usfca.edu/~jbovet/vas.html)以获取包含在平凡包装器中的图灵模型示例。

# php - 如何在javascript中修改php字符串变量

> ID：10203895
> 
> 赞同：0
> 
> 时间：2012-04-18T06:21:47.033
> 
> 标签：php, javascript, jquery

我正在使用 php4 和 jquery，我有一个 php 字符串变量 $content ，它存储一个字符串，如下所示。

```
<html>
  <head></head>
    <table>
      <tr>
        <td>comments:</td>
        <td>Good</td>
         .....
         ...n rows
     </table>
  </html> 
```

所以，现在我想将**所有出现的文本“Good”**的颜色更改为红色。那么如何编写一个 jquery 函数，它接受一个 php 字符串 $content 变量并更改每个“Good”单词的颜色（添加样式颜色：红色）并返回它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T06:31:50.380

您不能在 Javascript 中访问 PHP 变量。此外，javascript 在客户端工作，PHP 在服务器端工作。

我不确定它的确切用法，但是，这是我对此的看法：

```
// in javascript code
var x = "<?php echo $content; ?>"; // do take care of stripping quotes (")
x.replace("Good", "<span style='color:red'>Good</span>"); 
```

我想应该这样做。

稍微解释一下，在服务器上，PHP 会将变量的内容转储到JS`$content`中的变量中。`x`在客户端，当 JS 执行时，它会拾取它并进行替换。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T06:33:32.237

纯PHP解决方案：

```
echo str_replace('Good', '<span style="color:red">Good</span>', $content); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T07:47:30.983

```
$("td").each(function(){
    $(this).html($(this).html().replace(/Good/, '<span style="color:#f00">Good</span>')); 
}); 
```

这将查看每个单元格并查找是否有“好”的文本值并在其周围环绕一个跨度

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T06:27:15.000

```
$content .= '<span class="red">';
$content .= {your existing code here}
$content .= '</span>'; 
```

在它之后创建一个 CSS 规则：

```
.red{ color:red; } 
```

如您所见，您根本不需要 jQuery。

# android - 防止服务强制停止

> ID：10203896
> 
> 赞同：0
> 
> 时间：2012-04-18T06:21:51.070
> 
> 标签：android, android-service

我的应用程序具有检查和从服务器下载数据的服务。我在启动服务后退出了应用程序。现在应用程序和服务都在内存中。我已经从内存中强制停止了应用程序（而不是服务）。然后我的服务也停止了。如何防止停止我的服务。如果应用程序被操作系统停止，我的服务会在那里吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:25:54.557

如果服务和 UI 共享同一个进程，那么任何部分的 FC 都会导致两者都被杀死。但是，您的第一种方法应该是避免出现 FC 错误。追查这个问题的原因，如果可能的话，用 in`try/catch`块封装代码的关键部分。

此外，您应该返回服务`Service.START_STICKY`的**onStartCommand**以重新创建它，以防它被杀死。

# android - Android WifiManager.enableNetwork 耗时 10 秒

> ID：10203899
> 
> 赞同：1
> 
> 时间：2012-04-18T06:22:13.860
> 
> 标签：android, android-wifi, wifimanager

我们正在使用 Android API WifiManager.enableNetwork(netid, true) 在所需的 wifi 网络之间切换。切换工作正常，但禁用当前网络并连接到新网络大约需要 10-11 秒。为什么会出现这种延迟？是否有任何解决方法可以使其快速切换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T16:45:10.227

AFAIK, there's no way to speed that process up. It's just the nature of WiFi -- connecting to a network can take a long time.

If your problem is that the `enableNetwork` call "freezes" your UI, just create another thread.

# c# - 获取 HTML 代码中的彩色文本

> ID：10203900
> 
> 赞同：0
> 
> 时间：2012-04-18T06:22:14.597
> 
> 标签：c#, html, html-parsing

我有一个 Html 代码，我想将其转换为纯文本，但只保留彩色文本标签。例如：当我有以下 Html 时：

```
<body>

This is a <b>sample</b> html text.
<p align="center" style="color:#ff9999">this is only a sample<p>
....
and some other tags...
</body>
</html> 
```

我想要输出：

```
this is a sample html text.
<#ff9999>this is only a sample<>
....
and some other tags... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:27:32.587

可以使用正则表达式来做到这一点，但是......[您不应该使用正则表达式解析 (X)HTML。](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)

我用来解决问题的第一个正则表达式是：

```
<p(\w|\s|[="])+color:(#([0-9a-f]{6}|[0-9a-f]{3}))">(\w|\s)+</p> 
```

第 5 组将是十六进制（3 或 6 个十六进制）颜色，第 6 组将是标签内的文本。

显然，这不是最好的解决方案，因为我不是正则表达式大师，显然它需要一些测试和可能的概括......但它仍然是一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:02:59.197

我会使用解析器来解析 HTML，如[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)，并使用正则表达式来查找`color`属性中的值。

首先，使用 xpath查找包含`style`其中定义的属性的所有节点：`color`

```
var doc = new HtmlDocument();
doc.LoadHtml(html);
var nodes = doc.DocumentNode
    .SelectNodes("//*[contains(@style, 'color')]")
    .ToArray(); 
```

然后是匹配颜色值的最简单的正则表达式：`(?<=color:\s*)#?\w+`.

```
var colorRegex = new Regex(@"(?<=color:\s*)#?\w+", RegexOptions.IgnoreCase); 
```

然后遍历这些节点，如果存在正则表达式匹配，则将节点的内部 html 替换为 html 编码的标签（稍后您会明白为什么）：

```
foreach (var node in nodes)
{
    var style = node.Attributes["style"].Value;
    if (colorRegex.IsMatch(style))
    {
        var color = colorRegex.Match(style).Value;
        node.InnerHtml =
            HttpUtility.HtmlEncode("<" + color + ">") +
            node.InnerHtml +
            HttpUtility.HtmlEncode("</" + color + ">");
    }
} 
```

最后获取文档的内部文本并对其进行html解码（这是因为内部文本剥离了所有标签）：

```
var txt = HttpUtility.HtmlDecode(doc.DocumentNode.InnerText); 
```

这应该返回如下内容：

```
This is a sample html text.
<#ff9999>this is only a sample</#ff9999>
....
and some other tags... 
```

当然，您可以根据自己的需要对其进行改进。

# c++ - 为什么 OpenMP 程序只在一个线程中运行

> ID：10203902
> 
> 赞同：7
> 
> 时间：2012-04-18T06:22:25.950
> 
> 标签：c++, multithreading, openmp

我刚刚用一个简单的 c 程序尝试了 OpenMP

```
test() {
   for(int i=0;i<100000000;i++);
}
main() {
    printf("Num of CPU: %d\n", omp_get_num_procs());
    #pragma omp parallel for num_threads(4)
    for(int i=0;i<100;i++) test();
} 
```

编译`g++ -fopenmp`。它可以正确打印出我有 4 个 CPU，但所有测试功能都在`thread 0`.

我试图修改`OMP_NUM_THREADS`. 但它也没有效果。

我的一切都与在线示例相同，但为什么我不能让它工作呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T19:27:00.190

你的问题在这里：

```
#pragma omp parallel for num_thread(4) <--- 
```

正确的从句是`num_threads(4)`，不是`num_thread(4)`。不正确的 openmp 编译指示将被忽略，因此您最终得到了一个顺序程序。:)

我很惊讶您没有收到编译器警告，因为我收到了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-02T14:10:49.210

我在 Visual Studio 中遇到了这个问题，最后我明白我忘记在 Visual Studio 中启用 Open MP 支持。它没有给我任何错误，而是只为一个线程执行了程序

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-21T12:11:19.980

首先选择项目_>属性-> c/c++->语言->打开mp支持->选择yes然后你会发现上面的一致性模式（设为no）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T06:43:59.843

在调用 omp 并行部分之前使用函数 omp_set_num_threads(4)。

另外，您如何确定线程数？将您的 printfs 嵌入关键部分，以确保打印所有内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-06T19:13:47.040

当我用 C 代码扩展 numpy 模块时，我在 ubuntu 桌面上遇到了同样的情况。openmp 只运行一个线程。我碰巧删除了libopenblas-base并安装了libatlas-base-dev。（处理numpy安装问题）然后多线程openmp回来了：）

我已经在 64 核的 ubuntu 服务器上对其进行了测试，它就像我的桌面一样工作！我认为这是因为 libopenblas 与 atlas 之类的库发生冲突。

# javascript - 如何在 Windows 7 上进行 Internet Explorer 7 测试和 javascript 调试？

> ID：10203903
> 
> 赞同：1
> 
> 时间：2012-04-18T06:22:26.510
> 
> 标签：javascript, debugging, windows-7, internet-explorer-7, javascript-debugger

我有 Windows 7 平台，我想在 Internet Explorer 7 上测试我的 Web 应用程序。我该怎么做？

为此，我尝试了各种解决方案。我也安装了ieTester。这是一个很好的工具，**但我无法调试 ieTester 中的 javascript 部分**。

[IE Tester Mark 中只有 Alert Box](https://stackoverflow.com/questions/5986209/alert-box-in-ie-tester)的 stackoverflow 帖子之一 提到要在 ieTester 中使用 Firebug，但我也无法这样做。

我也尝试过 Microsoft 表达式 superview，我也没有找到任何调试 javascript 的方法。

请帮助解决这个问题。我的目标是在 Windows 7 平台上的 Internet Explorer 7 上调试 javascript。

*任何成功的解决方案将不胜感激。提前致谢。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:49:02.450

如上所述，ie9 将模仿 ie7 - 但它并不完全是 ie7，我已经看到许多真实 ie7 的行为与 ie9 不同的实例。我为此做的是有一个带有 ie7 的 vista 的虚拟 pc 图像。

看[这里](http://www.microsoft.com/download/en/details.aspx?id=11575)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T06:47:45.583

Internet Explorer 9 具有以 IE7 模式查看网站的选项，并具有一系列调试工具。只需按 F12 即可打开开发者工具。

# javascript - 如何检查变量是否未定义

> ID：10203906
> 
> 赞同：0
> 
> 时间：2012-04-18T06:22:44.177
> 
> 标签：javascript, jquery, backbone.js, haml, undefined

我正在使用 HAML 和 jquery 来编写我的应用程序。我有一个用于显示 URL 链接的“共享”模板。我希望它灵活，以便根据传递给它的变量显示不同的 URL。

```
//Code to trigger view and populate template -> Note I only pass in the thread vara here
share_view = new Onethingaday.Views.Threads.ShareView
  thread: new Onethingaday.Models.Thread(@options.thread_muses.first().get('question'))

//snippet from share view to pass the variables to the template
render: ->
  $(@el).html @template
    nickname: @options.nickname
    thread_slug: @options.thread.get('slug')
    thread_text: @options.thread.get('text')
  @

//Snippet of share view's template. Added if-else statement to check if nickname is defined
.sidebar_text Link:
  <% if (typeof <%= nickname %> !== "undefined") { %>
  %input.detail_text{value: "<%= 'http://dailymus.es/' + nickname + '/threads/' + thread_slug %>"}
  <% } else { %>
  %input.detail_text{value: "<%= 'http://dailymus.es/' + '/threads/' + thread_slug %>"}
  <% } %> 
```

在上面的例子中，我没有定义“昵称”变量。我希望 else 部分会被触发并且显示的 URL 是“ [http://dailymus.es/threads/some-slug-text](http://dailymus.es/threads/some-slug-text) ”

但是我仍然得到以下

![在此处输入图像描述](../Images/3c7c7041608cde1048d988c560a48f20.png)

如您所见，它仍在触发“if”部分并将“未定义”显示为 URL 的一部分。

在我的情况下，如何正确检查“未定义”变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:00:48.557

当昵称已经合二为一时，您还需要将昵称包装在 <%=%> 中吗？

# java - Android 应用中密钥的反黑客解决方案？

> ID：10203910
> 
> 赞同：9
> 
> 时间：2012-04-18T06:22:59.403
> 
> 标签：java, android, reverse-engineering, secret-key

我需要在应用程序内存储一个私有字符串密钥。它的值永远不会改变，并在代码中手动设置。我显然不能将它存储`String`为逆向工程方法会揭示它，即使应用了混淆。

你建议我如何保护这个私钥？

我虽然将它保存到数据库中，但也可以从手机中提取数据库。

PS。这个键是一个特殊的参数，所以是一个重要的方法，它对任何人都不知道是至关重要的！它不是解密密钥。此字符串将用作加密方法（md5 或类似）的参数，然后将结果发送到我们的 Internet 服务。

**编辑**

对不起，弄得这么复杂。我想我可以用尽可能少的信息得到答案。

此应用程序将允许用户将一些文本发送到 Internet 服务，然后该服务将该文本发布到网站。我们需要确保文本是通过 Android 手机发送的，因为任何网络机器人脚本都可以模仿 Android 手机并发布垃圾邮件。由于手机不欢迎类似验证码的方法，因此会有一个密钥，将通过 md5（与其他一些东西）生成一个哈希码。此哈希将被发送到 Internet 服务。互联网服务将使用相同的密钥得到一个 md5 结果，然后比较它来查看发送者是手机还是某个机器人。

这真的是我可以说的最大值。我希望这已经足够了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T06:36:18.090

我建议您重新考虑您的安全架构。该应用程序附带的任何内容都是可发现的。（例如，Android 的许可证验证库被设计为应用程序附带一个公钥。）

一种可能性是应用程序从服务器检索密钥（通过安全套接字或 https 连接）。这显然需要应用程序向服务器提交某种标识/验证（可能基于用户输入）。

如果您使用密钥进行加密，那么再看看公钥加密应该如何工作。你的应用应该有*公钥*；然后互联网服务可以使用匹配的私钥解密。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T06:45:00.560

如果您可以接受@Adam 的评论，那么我知道至少有一个解决方案可以在手机上以......好吧......持久的方式持久保存字符串值，这意味着该值将在卸载/重新安装后继续存在您的应用程序（恢复出厂设置会删除它），但对用户仍然“隐藏”（即存储在系统私有存储中，而不是存储在 SD 卡上）。

您可以使用系统设置内容提供程序来存储值，如下所示：

```
final String myKey = "verySecretKey";
final String myValue = "verySecretValue";
final boolean isSuccess = System.putString(getContentResolver(), myKey, myValue); 
```

要检索它，您可以执行以下操作：

```
myValue = System.getString(getContentResolver(), myKey); 
```

是的，在有根手机上，方便的用户可能会获得持久值，但在这种情况下，没有什么是神圣的，@Adam 的评论将变得有效：您不应该将数据存储在设备上。

# facebook - Insights 中“Canvas 访问者”和“已安装的 Canvas 访问者”之间的区别

> ID：10203911
> 
> 赞同：1
> 
> 时间：2012-04-18T06:23:02.053
> 
> 标签：facebook, canvas, visitors

Facebook Insights 中的“画布访问者”和“已安装的画布访问者”有什么区别？

根据我的理解，后者给了我“回访用户”（某种意义上）的数量，而前者应该给了我“新用户”的数量。但是，新用户应该等于新安装，事实并非如此。另一种解释是“画布访问者”-“已安装的画布访问者”提供了新用户（在这种情况下，我的应用程序的反弹率非常高）。

请帮助我理解这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T11:09:16.453

您可以通过以下链接

[http://www.fenixapps.com/blog/facebook-apps-insights-take-a-tour-part-1/](http://www.fenixapps.com/blog/facebook-apps-insights-take-a-tour-part-1/)

# redis - 在 Redis 中存储地理空间数据的方法

> ID：10203913
> 
> 赞同：9
> 
> 时间：2012-04-18T06:23:07.793
> 
> 标签：redis

我有一个 MySQL 表，由大约 100 万个纬度和经度组成，每行都有一个主键值。

我想通过 Geohashing 或 lat 和 lon 排序集将此表迁移到 Redis。

有人做过吗？您用于存储和查询数据的方法是什么（例如：查询谷歌地图的纬度/经度范围内的数据）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T09:49:26.560

是的，它已经完成了（使用 geohashing ...）

例如，您可以检查 Geodis 包背后的数据结构（来自 Dvir Volk 和朋友）：

[https://github.com/doat/geodis](https://github.com/doat/geodis)

Redis 邮件列表上有一些关于它的讨论：

[https://groups.google.com/d/topic/redis-db/Mw0lRzutnkE/discussion](https://groups.google.com/d/topic/redis-db/Mw0lRzutnkE/discussion) [https://groups.google.com/d/topic/redis-db/6M-aAPA-iXc/discussion](https://groups.google.com/d/topic/redis-db/6M-aAPA-iXc/discussion) [https:// groups.google.com/d/topic/redis-db/Bps95jeRgr8/discussion](https://groups.google.com/d/topic/redis-db/Bps95jeRgr8/discussion)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-22T12:37:42.720

您可能想要查看的另一个项目是[Tile38](https://github.com/tidwall/tile38)。

> Tile38 是一个地理定位数据存储、空间索引和实时地理围栏。它支持多种对象类型，包括纬度/经度点、边界框、XYZ 瓦片、Geohashes 和 GeoJSON。

特别是查询似乎真的很好用。例如，您可以设置触发 webhook 的栅栏。

我不知道迁移数据。

# tsql - 同一行上的 TSQL 逗号分隔字段

> ID：10203916
> 
> 赞同：0
> 
> 时间：2012-04-18T06:23:21.063
> 
> 标签：tsql

假设您有一个包含 FirstName、MiddleName、LastName 的 User 表。
就本示例而言，只有 FirstName 是强制性的。

当它们的值不为空时，连接这三个字段并用“，”分隔它们的最快方法是什么，所以：

如果只有 FirstName 不为空，我们应该得到“John”作为结果。
如果只有 FirstName 和 LastName 不为空，我们应该得到“John,Wayne”作为结果。
如果 FirstName、MiddleName 和 LastName 不为空，我们应该得到“John,M,Wayne”作为结果。

先谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:28:04.647

也许是这样的：

```
FirstName +(CASE WHEN MiddleName IS NULL THEN '' ELSE ','+MiddleName END)
+(CASE WHEN LastName IS NULL THEN '' ELSE ','+LastName END) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:18:17.293

2种不同的方法

```
--syntax
select Firstname + isnull(',' +Middlename, '') + coalesce(',' +LastName, '')
from 
--testdata
(select 'John' firstname, 'W' middlename, 'Wayne' lastname
union all select 'John' firstname, null middlename, 'Wayne' lastname
union all select 'John' firstname, 'W' middlename, null lastname) a 
```

# java - Hibernate org.hibernate.hql.ast.QuerySyntaxException 错误

> ID：10203918
> 
> 赞同：0
> 
> 时间：2012-04-18T06:23:26.820
> 
> 标签：java, hibernate

我已经看到了一些关于此的问题，但我无法为我的问题找到解决方案。

我`PositionHistory`声明了以下实体...

```
@Entity
@Table(name = "position_history")
@Cache (usage=CacheConcurrencyStrategy.READ_WRITE)
@AttributeOverride (name="id", column = @Column(name=PositionHistory.PRIMARY_KEY))
public class PositionHistory extends AbstractPersistable {

    public static final String PRIMARY_KEY = "s_posn_history_id";
    public static final String KEY = "positionHistory";
    public static final String KEY_DATE = "date";
    public static final String KEY_COMMENT = "comment";

    // String field length definitions
    public static final int LENGTH_COMMENTS = 1000;

    // Instance Variables
    private Date date;
    private String comment;

    @Column(name = "d_date", nullable = false)
    public Date getDate() {
    return date;
    }

    public void setDate(Date date) {
    this.date = date;
    }

    @Column(name = "t_comment", length = LENGTH_COMMENTS)
    public String getComment() {
    return comment;
    }

    public void setComment(String comment) {
    this.comment = comment;
    }

    // hashCode()
    // equals()
    // toString()
} 
```

在`PositionHistoryDaoImp`我试图删除一些行......

```
public void deletePositionHistory(Long positionId) {
    getSession().createQuery("delete from position_history a where a.position_id=:id")
        .setParameter("id", positionId).executeUpdate();
} 
```

当我打电话时，`deletePositionHistory`我收到以下错误...

```
ERROR a.g.q.d.v.s.c.CommandProcessorImpl:75 - org.hibernate.hql.ast.QuerySyntaxException: position_history is not mapped 
```

如您所见，该表已映射到`PositionHisotry`实体中并`PositionHistoryDaoImp`扩展了实体。

我错过了什么或做错了什么？

非常感激你的帮助。

谢谢你。

* * *

`Position`实体...

```
@Entity
@Table(name = "position")
@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)
@AttributeOverride(name = "id", column = @Column(name = Position.PRIMARY_KEY))
public class Position extends AbstractPersistableEffective {
    ...
    public static final String PRIMARY_KEY = "s_posn_id";
    public static final String KEY_ID = "positionId";
    private List<PositionHistory> history = new ArrayList<PositionHistory>();

    ...

    @OneToMany(fetch = FetchType.LAZY)
    @Cascade({CascadeType.ALL, CascadeType.DELETE_ORPHAN})
    @JoinColumn(name = Position.PRIMARY_KEY)
    @IndexColumn(name = AbstractPersistable.INDEX_COLUMN)
    public List<PositionHistory> getHistory() {
        return history;
    }

    public void setHistory(List<PositionHistory> history) {
        this.history = history;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:34:20.200

您在查询中使用表名，而不是实体名。改变这个：

```
getSession().createQuery("delete from position_history a where a.position_id=:id") 
```

至：

```
getSession().createQuery("delete from PositionHistory a where a.id =:id") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T09:25:12.057

更改`hibernate.cfg.xml`文件中的 hibernate.query.factory_class 属性，如下所示..希望对您有所帮助..

```
<property name="hibernate.query.factory_class">org.hibernate.hql.ast.ASTQueryTranslatorFactory</property> 
```

# windbg - 在windbg中如何将字节数组保存到文件中

> ID：10203921
> 
> 赞同：6
> 
> 时间：2012-04-18T06:23:52.920
> 
> 标签：windbg, sos

在我看到这个问题和答案之前：[Use WinDbg to Write Contents of Managed Byte[] to File](https://stackoverflow.com/questions/4036575/use-windbg-to-write-contents-of-managed-byte-to-file)，但我有一个问题是提到将所有字节写入文件的答案（方法表指针、数组长度和数组内容） ，我只想将数组内容写入文件。

例如，我创建了一个长度为 8192 的字节数组。

```
var bytes=new Byte[8192] 
```

并使用 windbg 并使其崩溃。

```
0:034> !do 0x0143fd1c
Name:        System.Byte[]
MethodTable: 5ce54944
EEClass:     5cb8af1c
Size:        8204(0x200c) bytes
Array:       Rank 1, Number of elements 8192, Type Byte
Element Type:System.Byte
Content:     .0.................:.i......$...,x"!.a_.h#......66..vx.4...P.R?...M
Fields:
None
0:034> dd 0x0143fd1c
0143fd1c  5ce54944 00002000 0a0d300a 16460a0d
0143fd2c  957bd993 1f92335c 79a2d058 72455ef6
0143fd3c  cc16c7b1 05b18e14 5b1df595 0fb5dbd8
0143fd4c  629a16c6 0edb5c9a 6ede4110 5d5da54e
0143fd5c  4638143a efcad6db 060935f1 a9a48285
0143fd6c  e414cff0 8aeaae92 f169b93a f80bd6de
0143fd7c  9a9824d1 22782ccd 5f610c21 0f2368b4
0143fd8c  ae09d410 083636c3 0b787616 101ab234

0:034> !da 0143fd1c
Name:        System.Byte[]
MethodTable: 5ce54944
EEClass:     5cb8af1c
Size:        8204(0x200c) bytes
Array:       Rank 1, Number of elements 8192, Type Byte
Element Methodtable: 5ce525ec
[0] 0143fd24
[1] 0143fd25
....... 
```

那么，如何在`.writemem`命令中定位起始偏移和输出长度？谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-18T11:58:07.183

!da 给你答案。[0] 0143fd24<-- 这里第一个字节的地址。

获取第一个字节的地址并将其与文件名一起传递给 .writemem。

.writemem C:\somefile 143fd24 L0n8192

该命令表示写入 C:\somefile，数据从 143fd24 开始，持续到十进制 8192 字节。

# java - 以两位数格式显示日期

> ID：10203924
> 
> 赞同：24
> 
> 时间：2012-04-18T06:24:06.750
> 
> 标签：java, android, date, calendar

我无法以两位数格式显示日期。我希望它是这样，当日期或月份是一位数时，例如：4 它会显示 04。我无法想出它的逻辑，如果有人可以帮助我，我将非常感激。

```
Calendar c = Calendar.getInstance();
        int year = c.get(Calendar.YEAR);
        int day = c.get(Calendar.DAY_OF_MONTH);
        int month = c.get(Calendar.MONTH);

        if (month % 10 == 0) {

            Place = 0 + month;
        }
        String Dates = year + "-" + Place + "-" + day;
        Date.setText((Dates)); 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-04-18T06:26:48.857

```
DecimalFormat mFormat= new DecimalFormat("00");
mFormat.format(Double.valueOf(year)); 
```

在你的情况下：

```
 mFormat.setRoundingMode(RoundingMode.DOWN);
 String Dates =  mFormat.format(Double.valueOf(year)) + "-" +  mFormat.format(Double.valueOf(Place)) + "-" +  mFormat.format(Double.valueOf(day)); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-18T06:30:13.687

请使用 SimpleDateFormat

```
SimpleDateFormat sd1 = new SimpleDateFormat("dd-MMM-yyyy");
System.out.println("Date : " + sd1.format(new Date(c.getTimeInMillis())); 
```

输出

```
Date : 18-Apr-2012 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-04-18T06:31:03.090

```
Calendar c = Calendar.getInstance();
int year = c.get(Calendar.YEAR);
int day = c.get(Calendar.DAY_OF_MONTH);
int month = c.get(Calendar.MONTH)+1;

String Dates = year + "-" +(month<10?("0"+month):(month)) + "-" + day;
Date.setText((Dates)); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-05-06T07:42:26.143

```
if (dayOfMonth < 10) {
    NumberFormat f = new DecimalFormat("00");
    Sting date = String.valueOf(f.format(dayOfMonth));
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-05-06T18:53:01.423

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-03-28T13:44:18.647

纯粹使用 Java 8 Time 库：

```
String date = LocalDate.now().format(DateTimeFormatter.ofPattern("yyyy-MM-dd")); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-04-18T06:27:31.590

```
if ((month+1)<10){
    place = "0"+(String) (month+1)
} 
```

每天做同样的事情，你就可以走了。

月份 +1，因为它以 0 开头。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-11-30T18:05:40.093

您可以使用 String.format() 方法。

例子 ：

```
String.format("%02d", month); 
```

因此，如果所选月份小于 10，他们会在月份前添加“0”。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-04-18T06:27:43.067

使用[SimpleDateFormat](http://developer.android.com/reference/java/text/SimpleDateFormat.html)类.. 有很多方法可以做到这一点..

像这样的东西..

```
 SimpleDateFormat sdfSource = new SimpleDateFormat("dd/MM/yy"); // you can add any format..

      Date date = sdfSource.parse(strDate); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-06-12T08:24:19.063

您可以使用 SimpleDateFormat 类

```
String dates = new java.text.SimpleDateFormat("dd-MM-YYYY").format(new Date()) 
```

有关更多信息 [https://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html](https://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-03-01T20:07:11.750

# 乔达时间

使用[Joda-Time](http://www.joda.org/joda-time/)库，特别是[`org.joda.time.DateTime`](http://www.joda.org/joda-time/apidocs/org/joda/time/DateTime.html)类。

```
DateTime datetime = new DateTime(new Date());
String month = datetime.toString("MM"); 
```

结果将是 2 位数

如果您需要例如一年，您可以使用：

```
String year = datetime.toString("YYYY"); 
```

结果将是一年的 4 位数字。

# android - 如何实现 Google Play 之类的截图库？

> ID：10203926
> 
> 赞同：2
> 
> 时间：2012-04-18T06:24:33.723
> 
> 标签：android, gallery, google-play, horizontalscrollview

我想知道如何实现像 Google Play（Android Market）这样的截图库。如果我使用典型的画廊，问题是画廊的第一个项目在中心（它在开头有很大的空间，在结尾处相同）。我尝试了一些水平的，但是当我在另一个[链接](https://stackoverflow.com/a/6606840/1050058)`listview`中推送我的水平列表视图时，滚动似乎有问题。在 Google Play 中，“图库”一开始没有空间。提前致谢。`scrollview`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T01:27:09.243

使用[`ViewPager`](http://developer.android.com/reference/android/support/v4/view/ViewPager.html). 它在 Google 的内部应用程序中广泛使用，并且非常适合水平分页。它也是一个非常好的替代品[`TabHost`](http://developer.android.com/reference/android/widget/TabHost.html)。

[`Gallery`](http://developer.android.com/reference/android/widget/Gallery.html)实际上不赞成使用`ViewPager`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T01:00:57.473

实际上我很久以前就完成了我的项目并忘记了关闭的问题。使用这个[Android：使用 ViewPager 创建一个图像查看器。](http://life-optimized.blogspot.com/2012/04/android-create-image-viewer-using.html)

对于未来的客人，您可以在此处查看 Android 开发人员关于 ViewPager 的另一项培训： [在您的 UI 中显示位图](http://developer.android.com/training/displaying-bitmaps/display-bitmap.html)

# android - 授予应用程序 root 权限

> ID：10203927
> 
> 赞同：3
> 
> 时间：2012-04-18T06:24:36.110
> 
> 标签：android, bluetooth, android-ndk, sdp

我有一个由本机部分和更高层组成的应用程序。

因此，需要授予它 root 权限才能运行一些本机功能。

正如我之前发布的文章，我添加了一段取自 Bluez Utils(hidd.c) 的代码。

```
if (bind(sk, (struct sockaddr *) &addr, sizeof(addr)) < 0) {
    close(sk);
    return -1;
   } 
```

该代码已由 NDK 构建为 .so。

不幸的是，它一直返回 -1 并且 errno 是 13，这意味着 Permission Denied。

一些经验丰富的开发人员（在此感谢您）提到该错误的发生是因为此应用程序没有足够的权限。

它“不应该”类似于

进程进程 = Runtime.getRuntime().exec("su");

我认为这意味着您拥有系统权限，但您的应用程序没有。（如果我错了，请告诉我）

有什么方法可以授予应用程序具有 root 权限？

任何回复/线索/提示将不胜感激。

问候-

山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:16:28.523

我想我可以帮你解决这个问题。

在这里，我们咕...

```
void gainRoot()
{
    Process chperm;
    try {
        chperm=Runtime.getRuntime().exec("su");
          DataOutputStream os = 
              new DataOutputStream(chperm.getOutputStream());
            os.writeBytes("chmod 777 /dev/video0\n");
            os.flush();

            os.writeBytes("exit\n");
            os.flush();

            chperm.waitFor();

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

这是我通常用来更改根文件权限的功能。

当您执行 su 时，将使用 root 权限创建一个新进程。因此，使用此 Process 您可以执行任何 root 操作。有一些特定的语法需要遵循。如上例所示。

因此，您可以做的一件事是将代码的绑定部分构建为单独的可执行文件，并将其放在 system/bin 或通常保存可执行文件的地方。假设可执行文件的名称是 bind123 那么而不是

```
 os.writeBytes("chmod 777 /dev/video0\n");
            os.flush(); 
```

将其替换为

```
 os.writeBytes("bind123\n");
            os.flush(); 
```

在上面的代码中。

这应该有效。可能一旦它工作了，我们可以尝试将它与应用程序集成，而不依赖于可执行文件。我希望我没有让你感到困惑。如果需要明确一点，请告诉我ww .... 一切顺利...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:39:03.193

您不需要 root 绑定到端口 >=1024。您只需要[ApplicationManifest.xml](http://developer.android.com/guide/topics/manifest/manifest-intro.html)文件中的[INTERNET](http://developer.android.com/reference/android/Manifest.permission.html#INTERNET)权限。

# javascript - 如何使表格的一列根据请求动态显示jsp？

> ID：10203928
> 
> 赞同：0
> 
> 时间：2012-04-18T06:24:40.777
> 
> 标签：javascript, jsp, jspinclude

我有一个 index.jsp 页面，例如，

```
<%@ include file="header.jsp" %>

<table id="" width="100%" height="100%">
    <tr>
        <td align="left" width="30%">
            <table>
                <tr><td><a href="EmployeePage.jsp">Register employee</a></td></tr>
                <tr><td><a href="empSearch.jsp">Search employee</a></td></tr>
                <tr><td><a href="empDelete.jsp">Delete employee</a></td></tr>
            </table>
        </td>
        <td align="left" width="70%">
            <%@ include file="EmployeePage.jsp" %>
        </td>
    </tr>
</table>
<%@ include file="Footer.jsp" %> 
```

我为员工准备了这 3 个功能的所有页面。

现在我只想知道我可以将页面加载到最右边的 td，`(where i had given as <%@ include file="EmployeePage.jsp" %> now)`.. 当用户单击左侧 td 中的链接（注册、搜索和删除）时，我希望将相应的页面加载到最右边的 td 中。 .

IE .. 我希望我的索引页面中的所有内容都是静态的，除了最右边的 td 是动态的。

我真正想要的是让我的页面像[这个页面](http://publib.boulder.ibm.com/infocenter/rfthelp/v7r0m0/index.jsp?topic=/com.rational.test.ft.api.help/ApiReference/com/rational/test/ft/object/interfaces/IFrame.html)

我是jsp的新手..所以示例代码将是可观的..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:42:22.647

我可以想到两种方法：

1.  您可以使用`iFrames`.
2.  您不使用锚元素，而是使用`jquery`or显示和隐藏不同的页面，并在需要时进行`javascript`一些`ajax`点击。

如果你只是谷歌，他们都有很多例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:01:59.593

这个示例 jQuery 代码应该可以帮助你

```
<a href="#" onclick="loadjsp()">Register employee</a>
<div id="divId"></div>

function loadjsp(){
    $.ajaxSetup ({
        cache: false
    });
    $("#divId").load("EmployeePage.jsp");   
} 
```

当您单击时`Register employee`，将调用该函数，该`loadjsp()`函数将加载您的`jsp`.

# android - 如何从 ArrayList 中获取 DetailView 的值？

> ID：10203929
> 
> 赞同：1
> 
> 时间：2012-04-18T06:24:42.600
> 
> 标签：android, android-intent, android-listview

我是android开发的新手。我正在开发使用 SAX 解析器解析 XML 文件的应用程序，我正在获取结果并将它们显示在 ListView 上，但我无法获得详细视图的价值。就像我想当用户单击特定行然后该特定行显示DetailActivity。

我在用这个

> onItemClick()

在我的代码中，我从 XML 获取值并将它们保存在 ArrayList

> ArrayList 标题 = new ArrayList();

能够在 ListView 中显示此标题，但如何在 DetailView 中显示相同的标题。

下面是我的代码：-

MainActivity.java

```
public class MainActivity extends Activity {
    /** Called when the activity is first created. */

    static final String URL = "http://www.xyz.com/api.php?page_id=1";

    ItemList itemList;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        XMLParser parser = new XMLParser();
        String XML = parser.getXmlFromUrl(URL);

        System.out.println("This XML is ========>"+XML);

       try
       {
           SAXParserFactory spf = SAXParserFactory.newInstance();
           SAXParser sp = spf.newSAXParser();
           XMLReader xr = sp.getXMLReader();

           /** Create handler to handle XML Tags ( extends DefaultHandler ) */
           MyXMLHandler myXMLHandler = new MyXMLHandler();
           xr.setContentHandler(myXMLHandler);

           ByteArrayInputStream is = new ByteArrayInputStream(XML.getBytes());
           xr.parse(new InputSource(is));
      }
      catch(Exception e)
      {

      }

      itemList = MyXMLHandler.itemList;

       ArrayList<String> listItem= itemList.getTitle();

    System.out.println("(ListItem)=======>"+listItem);

     ListView lview = (ListView) findViewById(R.id.listview1);
     myAdapter adapter = new myAdapter(this, listItem);
     lview.setAdapter(adapter);

     lview.setOnItemClickListener(new OnItemClickListener()
     {
         public void onItemClick(AdapterView<?> parent, View view, int position, long id)
         {

            // Starting new intent
             Intent in = new Intent(MainActivity.this, DetailClassJI.class);

             myAdapter ma = (myAdapter)parent.getAdapter();

         startActivity(in);
         }
    });
    }
} 
```

项目列表.java

```
public class ItemList 
{
    ArrayList<String> title = new ArrayList<String>();

    public ArrayList<String> getTitle() {
        return title;
    }
    public void setTitle(String title) {
        this.title.add(title);
    }

} 
```

XMLParser.java（我只在其中进行了 HTTPRequest）

```
public class XMLParser {

    // constructor
    public XMLParser() {

    }

    /**
     * Getting XML from URL making HTTP request
     * @param url string
     * */
    public String getXmlFromUrl(String url) {
        String xml = null;

        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            xml = EntityUtils.toString(httpEntity);

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        // return XML
        return xml;
    }
} 
```

XMLHandler.java

```
public class MyXMLHandler extends DefaultHandler
{
    public static ItemList itemList;
    public boolean current = false;
    public String currentValue = null;

    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {
        // TODO Auto-generated method stub

        current = true;

        if (localName.equals("posts"))
        {
            /** Start */ 
            itemList = new ItemList();

        } 
    }

    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {
        // TODO Auto-generated method stub
        current = false;

        if(localName.equals("title"))
        {
            itemList.setTitle(currentValue);
        }
    }

    @Override
    public void characters(char[] ch, int start, int length)
            throws SAXException {
        // TODO Auto-generated method stub

        if(current)
        {
            currentValue = new String(ch, start, length);
            current=false;
        }
    }
} 
```

我的适配器.java

```
public class myAdapter extends BaseAdapter 
{
    ArrayList<String> listTitle;

    Activity activity;

    public myAdapter(Activity activity, ArrayList<String> listTitle) {
        super();
        this.listTitle = listTitle;

        this.activity = activity;
    }

    public int getCount() {
        // TODO Auto-generated method stub
        return listTitle.size();
    }

    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return null;
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    private class ViewHolder
    {
        TextView txtViewTitle;

    }

    public View getView(int position, View view, ViewGroup parent) {
        // TODO Auto-generated method stub

        ViewHolder title;
        LayoutInflater inflater = activity.getLayoutInflater();

        if(view==null)
        {
            view = inflater.inflate(R.layout.lview_row, null);
            title = new ViewHolder();

            title.txtViewTitle = (TextView) view.findViewById(R.id.txtItem);

            view.setTag(title);
        }
        else
        {
            title = (ViewHolder) view.getTag();
        }

        title.txtViewTitle.setText(listTitle.get(position));

        return view;
    }
} 
```

DetailClassJi.java

```
public class DetailClassJI extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.detail);

     // getting intent data
        Intent in = getIntent();

     // Displaying all values on the screen
        TextView lblName = (TextView) findViewById(R.id.txtItem);

    }
} 
```

谁能建议我如何在详细视图上显示标题。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:43:35.383

做以下更改，我希望它会起作用..

在 getView(...) 中添加以下语句

```
title.txtViewTitle.setText(listTitle.get(position));
title.setTxtViewTitle(listTitle.get(position)); 
```

更改 OnItemClickListener

```
lview.setOnItemClickListener(new OnItemClickListener()
     {
         public void onItemClick(AdapterView<?> parent, View view, int position, long id)
         {

             ViewHolder holder = (ViewHolder) view.getTag();

            // Starting new intent
             Intent in = new Intent(MainActivity.this, DetailClassJI.class);
             in.putExtra("title", holder.getTxtViewTitle());
                startActivity(intent);

             myAdapter ma = (myAdapter)parent.getAdapter();

         startActivity(in);
         }
    }); 
```

在 View holder 中添加 get 方法

```
 class ViewHolder
        {
            TextView txtViewTitle;

               public String getTxtViewTitle(){
                   return txtViewTitle;
           }
           public void setTxtViewTitle(String txtViewTitle){
                   this.txtViewTitle = txtViewTitle;
           }

        } 
```

最终在 DetailsActivity 中获得价值，例如

```
getIntent().getExtras().getString("title") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:31:29.400

[http://www.java2s.com/Open-Source/Android/UnTagged/feemaster/com/fee/master/ui/DetailView.java.htm](http://www.java2s.com/Open-Source/Android/UnTagged/feemaster/com/fee/master/ui/DetailView.java.htm)

希望这可以帮助...

# html - 带有浮动图像的段落、列表、块引用

> ID：10203932
> 
> 赞同：0
> 
> 时间：2012-04-18T06:24:51.287
> 
> 标签：html, css

我有一个简单的例子：

```
<html>
<head>
    <style type="text/css">
        img {
            float: left;
            padding-left: 50px;
        }
        blockquote {
            background-color: #FF0;
        } 
    </style>
</head>
<body>
    <div>
        <img src="http://upload.wikimedia.org/wikipedia/commons/thumb/8/84/HTML.svg/200px-HTML.svg.png" />
        <p>
            paragraph
        </p>
        <ul>
            <li>one</li>
            <li>two</li>
            <li>three</li>
        </ul>
        <ol>
            <li>one</li>
            <li>two</li>
            <li>three</li>
        </ol>
        <blockquote>
            <p>
                blockquoted paragraph 
            </p>
        </blockquote>
    </div>
</body>
</html> 
```

所以，页面的外观是：

![有图片的页面](../Images/14effa908ec4f2c6ca2ee7b2d0431094.png)

没有图像的同一页面：

![没有图片的页面](../Images/46e3944fb4a090057ac83d196174b451.png)

我必须将第二个示例中的文本对齐方式和浮动到左侧的图像组合起来（对齐线标记为红色）：

![理想的页面](../Images/b0964c1f50a6fd0ae620e8c6feee310d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:34:21.813

将左浮动 div 添加到图像和其他部分。

```
<html><head>
<style type="text/css">
    img {
        float: left;
        padding-left: 50px;
    }
    blockquote {
        background-color: #FF0;
    } 
div {
float: left;
}
</style>
</head>
<body>
<div>
    <img src="http://upload.wikimedia.org/wikipedia/commons/thumb/8/84/HTML.svg/200px-HTML.svg.png"></div><div>
    <p>
        paragraph
    </p>
    <ul>
        <li>one</li>
        <li>two</li>
        <li>three</li>
    </ul>
    <ol>
        <li>one</li>
        <li>two</li>
        <li>three</li>
    </ol>
    <blockquote>
        <p>
            blockquoted paragraph 
        </p>
    </blockquote>
</div>

</body></html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T06:35:39.647

您可以像这样使用 display:inline

```
<div>
        <img src="http://upload.wikimedia.org/wikipedia/commons/thumb/8/84/HTML.svg/200px-HTML.svg.png" />

     <div style="display:inline-block;">
     <p>
            paragraph
        </p>
        <ul>
            <li>one</li>
            <li>two</li>
            <li>three</li>
        </ul>
        <ol>
            <li>one</li>
            <li>two</li>
            <li>three</li>
        </ol>
        <blockquote>
            <p>
                blockquoted paragraph 
            </p>

        </blockquote>
</div>    
</div>​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T06:32:07.013

为文本添加一个新`DIV`的 with `float:left`。[在 JSFiddle 上](http://jsfiddle.net/ZzWum/)查看演示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T07:36:04.983

我只想添加`margin-right: 50px;`到 img 样式...

# c++ - 是否可以为 ARM 和 THUMB 生成单独的 .exe 文件？

> ID：10203934
> 
> 赞同：1
> 
> 时间：2012-04-18T06:24:55.047
> 
> 标签：c++, windows-mobile, embedded, arm, thumb

我有一个用于 WM6 的嵌入式 c++ 项目。在某些设备中，我使用与链接器设置“MACHINE:ARM”不兼容的打印机库。所以我必须构建 2 个 .exe 文件。一个用于 THUMB 机器，另一个用于 ARM 机器，必须注释某些代码行以避免编译错误。是否可以生成 2 个 .exe 文件并将它们构建在 2 个单独的文件夹中，一个用于 ARM，另一个用于 THUMB？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:01:45.330

可以使用配置管理器添加其他配置。

然后，您可以在 ARM 配置的构建选项卡中定义一个编译常量。[在如何根据“配置管理器”创建自己定义的常量](https://stackoverflow.com/questions/3981170/visual-studio-how-do-i-create-my-own-defined-constants-based-on-the-configurat)的答案中进行了解释？

# android - Android：手机进入睡眠状态时互联网（移动数据连接）是否会关闭？

> ID：10203935
> 
> 赞同：1
> 
> 时间：2012-04-18T06:25:01.270
> 
> 标签：android, service

我正在运行一个远程服务，它有一个处理程序，它每 15 分钟执行一次操作（handler.postDelayed()），其中涉及发出 Internet 请求。有时我注意到它没有发生。互联网（移动数据连接在手机睡眠或处理器睡眠时关闭）。这段时间会发生什么？

我猜当屏幕进入睡眠状态时互联网会关闭。确保在所需的时间间隔（半小时）内唤醒（打开互联网）并在远程服务中完成工作的有效方法是什么？该服务应该始终在后台运行。我可以使用 AlarmManager 执行此操作吗（它可以触发远程服务中发生的某些工作）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:39:02.693

如相关问题的[回答](https://stackoverflow.com/a/2487132/1012381)中所述，如果您仅使用 Wi-Fi 进行此服务，则可以尝试使用[WifiLock 。](http://developer.android.com/reference/android/net/wifi/WifiManager.WifiLock.html)
另一个原因可能是您的服务在发现无用时被 Android 破坏了。如果是这种情况，您可以尝试[前台服务](http://developer.android.com/reference/android/app/Service.html#startForeground%28int,%20android.app.Notification%29)选项。请注意，这并不能保证服务不会被破坏，但与其他服务相比的优先级会降低，从而为您的服务提供更多生存机会。

# javascript - HTML5 样板构建脚本不会替换 index.html 中的脚本标签

> ID：10203945
> 
> 赞同：0
> 
> 时间：2012-04-18T06:25:48.403
> 
> 标签：javascript, ant, html5boilerplate

我刚刚开始使用 HTML5 样板构建脚本，但遇到了一些问题。基本上我所有的脚本都像我希望的那样被缩小和压缩，但是所有原始`<script>`标签都留在了 output 中`index.html`。我需要的是用对缩小的 js 文件的引用替换这些标签。我认为这应该默认发生。也许我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-18T06:29:55.427

我猜负责替换的代码在`build.xml`文件目标中，`-usemin`尤其是 [这段代码](https://github.com/h5bp/ant-build-script/blob/master/build.xml#L665-L670)。

1.  如果是这样，那么它会搜索标记为`//-beg- concat_js`和的注释区域，如[快速入门部分](https://github.com/h5bp/ant-build-script#quick-start)`//-end- concat_js`中所描述的那样。

2.  还要确保您已将文件中的`file.root.script`属性设置为`project.properties`您真正使用的脚本（默认值期望`main.js`）

跑步`ant -debug >log.txt`对我帮助很大。

[您可以通过在 GitHub 上搜索现有问题](https://github.com/h5bp/ant-build-script/search?q=how-to-bypass-the-automatic-script-concatenation&type=Issues)找到有用的答案，尤其是文章[https://github.com/h5bp/ant-build-script/wiki/How-to-bypass-the-automatic-script-concatenation](https://github.com/h5bp/ant-build-script/wiki/How-to-bypass-the-automatic-script-concatenation)似乎是roblarsen 对脚本连接问题的最终回答。

我最终得到了我的自定义[Node.js](https://stackoverflow.com/questions/2353818/how-do-i-get-started-with-node-js)构建脚本，该脚本运行[Wintersmith](https://github.com/jnordberg/wintersmith)和 HTML5 Boilerplate 构建脚本，对这些工具进行了一些配置并且它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T03:02:35.260

我最终用[rake](https://rubygems.org/gems/rake)和[javascript 闭包编译器](https://developers.google.com/closure/compiler/)滚动了我自己的构建脚本。实际上这很容易。

# store - 我是否有同一商店的两个实例？

> ID：10203948
> 
> 赞同：0
> 
> 时间：2012-04-18T06:26:04.793
> 
> 标签：store, sencha-touch-2

我使用带有 jsonp 代理的商店填充列表视图，该代理向我的服务器发送 GET 请求。当应用程序启动时，请求被发送，并且列表项按照应有的响应呈现。现在，当我在我的数据库服务器中手动添加一个新项目并使用下面控制器中显示的代码刷新列表并检查控制台中的存储对象时，我可以看到新创建的项目在存储数据中。到目前为止一切顺利，一切都符合预期。但是，新项目不在刷新的列表中。奇怪的是，当我检查列表对象及其包含的存储对象时，不包括新创建的项目。但是，当我重新启动应用程序（而不是重新加载商店并刷新列表）时，新创建的项目会出现在列表中。在我看来，不知何故我有 2 个商店实例，一个带有新数据（我用 Ext.getStore 检索）和一个没有（列表视图内的那个），我认为这实际上应该是相同的。这怎么可能？下面我告诉你我是怎么做的。任何帮助是极大的赞赏。

控制器

```
Ext.define('VB1.controller.ListController', {
    extend: 'Ext.app.Controller',
    config: {
        refs: {
            listView: 'listview',
            refreshButtonTap: '#refreshbutton',
        },
        control: {
            refreshButtonTap: {
                onRefreshList: 'refreshList',
            },
        }    
    },
    launch: function () {
        this.callParent(arguments);
        Ext.getStore('MyStore').addListener('load', 'recordLoaded', this);
    },
    refreshList: function () {
        var loadedStore = Ext.getStore('MyStore').load();
        console.log(loadedStore) //here the new item is included
    },
    recordLoaded: function () {
        var list = this.getListView();
        list.refresh();
        console.log(list) //here the new item is not included in the store object inside   
                                  //listobject
    }
}); 
```

商店

```
Ext.define('VB1.store.MyStore', {
    extend: 'Ext.data.Store',
    alias: 'widget.mystore',
    config: {
        model: 'VB1.model.MyModel',
        autoLoad: true,
        proxy: {
            type: 'jsonp',
            url : 'myUrl.js',
            enablePagingParams: false,
            reader: {
                type: 'json',
                rootProperty: 'array.resources'
            },
        },
    },
}); 
```

列表视图

```
Ext.define('VB1.view.ListView', {
    extend: 'Ext.dataview.List',
    alias: 'widget.listview',        
    requires: [
        'Ext.dataview.List',
    ],
    scrollable: 'vertical',
    config: {
        loadingText: "loading...",
        emptyText: '</pre><div class="notes-list-empty-text">No notes found.</div><pre>',
        itemTpl: '</pre><div class="list-item-title">{title}</div><div class="list-item-narrative"><img src="{listlogo}"/></div><pre>',
    },
    listeners: {
        itemtap: function(list, index, item, record) {
            this.fireEvent('showDetails', record, this);
        }
    },
}); 
```

这就是我在应用启动时将包括商店在内的列表添加到视口的方式

```
var listView = {
    xtype: 'listview',
    store: {xtype: 'mystore'},
}
Ext.Viewport.add(listView); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:01:18.730

我刚刚发现问题出在哪里。首先，正如我所怀疑的那样，商店被实例化了 2 次。显然一次是应用程序，另一次是视图。因此我最终拥有了两家商店。由于我没有设置 storeID，因此根据我在商店的别名配置中给出的 xtype 名称，商店由两个唯一的 id 标识。

我解析并登录控制器的商店的 ID 为 ex-mystore-1

```
var loadedStore = Ext.getStore('MyStore').load();
      console.log(loadedStore) //here the new item was included 
```

并且列表视图对象内的商店获得了 id ext-mystore-2

```
var list = this.getListView();
    console.log(list._store); //here the new item was not included 
```

当我向商店添加 storeId 时，对我有利的漏洞问题发生了变化。在那之后，我仍然有两家商店，但是，具有相同的 storeIds（但具有不同的唯一或可观察的 id）。好消息是现在新项目包含在两个商店实例中。我还能够通过不在列表视图中实例化商店的 xtype 而是通过 storeID 引用它来摆脱第二个商店实例。现在一切正常。感谢任何看过这个的人。我希望这可以帮助遇到类似问题的人。

# extjs - 如何根据另一个文本框更改事件更改文本框值

> ID：10203955
> 
> 赞同：0
> 
> 时间：2012-04-18T06:26:11.383
> 
> 标签：extjs, extjs4

我需要一些帮助来根据另一个文本框值更改事件更新文本框值。我需要两个文本框值相同。这是我使用的代码。在第一个文本框的更改事件中使用此代码。

```
var formpanel = Ext.widget('Form');
var copy = formpanel.down('[name=billingCity]').getValue();

formpanel.down('[name=mailingCity]').setValue(copy); 
```

使用警报显示第二个文本框值，它显示正确的值。但在设计部分，该值保持不变。

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:19:08.153

Ext.widget('Form') 的意思是“创建一个新的 Form 组件”，而不是“取回当前的 Form”。所以我认为应该是：

```
change: function() {
   var formpanel = Ext.ComponentQuery.query('Form')[0];
   var copy = formpanel.down('[name=billingCity]').getValue();
   formpanel.down('[name=mailingCity]').setValue(copy);
} 
```

# mysql - 如果一切都已设置并连接，为什么 Coldfusion-MySQL-Apache 不在 localhost 上运行？

> ID：10203957
> 
> 赞同：0
> 
> 时间：2012-04-18T06:26:25.383
> 
> 标签：mysql, apache, configuration, coldfusion, localhost

新手问题 - 我第一次尝试 Coldfusion/MySQL 并让它在本地运行。

我正在运行 Apache Webserver (2.2)，我已将两个 .sql 文件导入 MySQL (5.2.) 工作台，从这些文件中转发设计了一个数据库，设置了工作数据库连接和 MySQL 服务器。这也在运行。在 Coldfusion8 Admin 中，我将我的数据库添加为数据源。

我认为这就足够了:-)

尽管如此，在[http://localhost](http://localhost)上，我仍然只能获得 Apache htdocs 文件夹中所有文件的索引。如果我打开其中一个文件，它只会显示 Coldfusion 标记/HTML 源代码。什么都没有解析。

感谢您对我可能遗漏的任何提示？

**编辑：**
*试图实现的三个问题：*
1\. 我可以使用绝对路径加载模块，例如 D:/Coldfusion8/lib...？
2\. 我的 lib/wsconfig 文件夹只包含一个名为 jrunwin32.dll 的 dll 文件。试图使用这个？
3\. lib/wsconfig 文件夹不包含 jrunserver.store 文件。不知道在这里做什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:38:58.123

听起来好像您的 Apache 配置不正确，因为它听起来好像没有正确处理 cfm 文件。

首先，使用CF8有什么具体原因吗？CF9 已经有一段时间了，所以如果从头开始，那么我建议你看一下。

除此之外，我会在您的 httpd.conf 中检查以下内容（或您的 apache 配置文件的名称）

首先， .cfm 作为 DirectoryIndex 是可以接受的（也可以有其他索引）

```
DirectoryIndex index.cfm 
```

其次，JRUN 处理程序配置正确（同样，在 httpd.conf 中）

```
LoadModule jrun_module /opt/coldfusion8/runtime/lib/wsconfig/1/mod_jrun22.so
<IfModule mod_jrun22.c>
    JRunConfig Verbose false
    JRunConfig Apialloc false
    JRunConfig Ignoresuffixmap false
    JRunConfig Serverstore /opt/coldfusion8/runtime/lib/wsconfig/1/jrunserver.store
    JRunConfig Bootstrap 127.0.0.1:51801
    AddHandler jrun-handler .jsp .jws .cfm .cfml .cfc .cfr .cfswf
</IfModule> 
```

这取自我的开发虚拟机，我将 CF8 作为单服务器安装在`/opt/coldfusion8/`

一旦你有这些行（使用适合你环境的路径/端口等）重新启动 apache，它应该可以正常工作。

如果您在多服务器等安装中安装了 CF8，请指定并相应调整我的建议

# c# - 为什么 DataPager.GetVisualDescendants() 不返回结果？

> ID：10203961
> 
> 赞同：0
> 
> 时间：2012-04-18T06:26:44.577
> 
> 标签：c#, silverlight

我有一个 DataPager，一旦它填充了页面，它就会抛出一个 nullreferenceexception。这有点奇怪，因为当我只有很少或没有数据时，它不会抛出任何东西。我的代码在这里：

```
 private void dataPager_PageIndexChanged(object sender, System.EventArgs e)
    {
        if ((sender as DataPager).Visibility == System.Windows.Visibility.Visible)
        {
            if ((sender as DataPager).PageIndex == (sender as DataPager).PageCount - 1)
            {
                (sender as DataPager).GetVisualDescendants().OfType<Button>().Where(b => b.Name == "NextPageButton").SingleOrDefault().IsEnabled = false;
            }
            else
                (sender as DataPager).GetVisualDescendants().OfType<Button>().Where(b => b.Name == "NextPageButton").SingleOrDefault().IsEnabled = true;
        }
    } 
```

我不明白为什么 (sender as DataPager).GetVisualDescendants() 的结果视图在 dataPager 达到 4 页时没有产生任何结果？正如你所看到的，我已经检查了它是否是 Visible 用于获取视觉后代，并且此代码在 pageindexchanged 事件上，因此它会在加载数据分页器时立即触发。对这个有什么想法吗？任何帮助将非常感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T00:32:16.400

答案是它会触发 pageindexchanged 两次。不知道为什么，但是当数据分页器正在加载和加载时，Silverlight 似乎触发了 pageindexchanged。所以它会触发这段代码两次，我所做的只是添加了一行来检查 GetVisualDescendants().Count != 0 是否一切顺利，至少，我希望如此。

```
private void dataPager_PageIndexChanged(object sender, System.EventArgs e)
{

    if ((sender as DataPager).Visibility == System.Windows.Visibility.Visible)
    {
      if((sender as DataPager).GetVisualDescendants().Count != 0)
       {
           if ((sender as DataPager).PageIndex == (sender as DataPager).PageCount - 1)
           {
            (sender as DataPager).GetVisualDescendants().OfType<Button>().Where(b => b.Name == "NextPageButton").SingleOrDefault().IsEnabled = false;
           }
           else
            (sender as DataPager).GetVisualDescendants().OfType<Button>().Where(b => b.Name == "NextPageButton").SingleOrDefault().IsEnabled = true;
       }
   }
} 
```

# javascript - 使数组包含 10 个最新条目

> ID：10203967
> 
> 赞同：1
> 
> 时间：2012-04-18T06:26:58.263
> 
> 标签：javascript, jquery

我正在尝试获取一个数组来保存 10 个最新值，但到目前为止它无法正常工作。

```
var messages = new Array(10);

function addmessage(message) {
    messages.unshift(message);
    messages.length = 10;
} 
```

但是当我尝试显示数组时，我无法让它按顺序显示消息......

我用

```
$.each(messages, function(key, value) {
    if(value != null) {
        $("#messages").append(value + "<br>");
    }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T06:33:46.370

```
var messages = []; //use an array literal instead.

function addmessage(message) {  

    //unshift loads the new value into the beginning
    messages.unshift(message);

    //if you want to place it in the end, you can use push()
    //messages.push(message);

    //if you really want it to remain 10,  pop off the last
    if(messages.length > 10){
        messages.pop();
        //and if push()
        //messages.shift()
    }              
}

//loop through and append, "latest" first
$.each(messages, function(key, value) {

    if(value != null) {
        $("#messages").append(value + "<br>");
    }

}); 
```

如果您随后使用最新的实时/动态加载消息，[您可以使用`.prepend()`](http://jsfiddle.net/qYsXn/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T07:11:49.480

以最简单的形式，您可以拥有：

```
messages.push(message);
messages.length > 9 && messages.shift(); 
```

这将在末尾添加新消息，并在长度达到 10 后从前面删除一条。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T06:42:21.470

你期待什么样的订单？您将条目放在数组的开头，因此顺序是相反的。

例如：

```
addmessage('test'); addmessage('test2'); addmessage('test4');
addmessage('test6'); addmessage('test23'); addmessage('test34');
addmessage('test32'); addmessage('test3'); addmessage('test45');
addmessage('test7'); addmessage('test8'); 
```

结果是这样的数组：

```
["test8", "test7", "test45", "test3", "test32", "test34", "test23", "test6", "test4", "test2"] 
```

如果您想以另一种方式使用它，则函数应如下所示：

```
function addmessage(message){
  messages.push(message);
  messages.shift();
} 
```

结果是相反的：

```
["test2", "test4", "test6", "test23", "test34", "test32", "test3", "test45", "test7", "test8"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T06:38:34.590

[试试这个解决方案](http://fiddle.jshell.net/erDS3/2/)，也许你想要你的项目以相反的顺序？

# mysql - Sql 查询优化 - 移除 Not In 运算符

> ID：10203979
> 
> 赞同：1
> 
> 时间：2012-04-18T06:27:45.133
> 
> 标签：mysql, sql

我将员工出勤情况存储在具有以下结构的表“出勤率”上：

```
EmpID, CDate 
```

考勤系统每天都会插入此表，其中包含当天在场的所有员工的员工 ID。

我需要找出特定员工的缺勤陈述。我可以通过选择所有不在员工所在日期的不同日期轻松地做到这一点。

有什么方法可以删除该 sql 语句中的 not in 运算符。请帮忙

这是对 EmpId 01 的员工的 sql 查询：

```
select distinct CDate 
  from attendance 
  where CDate not in (
      Select CDate from attendance where EmpID='01') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:00:44.690

您可以更改您的机制以每天为每位员工存储数据。是的，它会添加很多行，但是你怎么能确定你会从记录的数据中获取所有日期呢？如果今天没人上班怎么办？没有人会缺席吗？

如果你会去：

```
EmpID, CDate, Present
1, {date}, 0|1 
```

那么您将获得更简单、更快速的查询来换取表大小：

```
select CDate from attendance where EmpID = 1 and status = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T07:01:53.143

问题不在于 NOT IN 子句，而在于子查询。

你想要更多类似的东西：

```
SELECT DISTINCT a1.CDate, if (EmpID=NULL, false,true) as Present
FROM attendance as a1
LEFT JOIN attendance as a2 USING (CDate) 
WHERE a2.EmpID='01' 
```

这是一个笛卡尔连接，它提取所有日期，然后加入员工的出勤状态。应该比您的子查询快得多。

* * *

更新，测试代码：

```
SELECT DISTINCT a1.CDate, IF (a2.EmpID IS NULL, false,true) as Present
FROM attendance AS a1
LEFT JOIN attendance AS a2 ON (a1.CDate = a2.CDate AND a2.EmpID='01') 
```

我对前面的答案不好。我应该将子选择放入 ON 而不是聚合。

# javascript - 检查某些东西是否是主干js中的模型或集合

> ID：10203982
> 
> 赞同：27
> 
> 时间：2012-04-18T06:27:50.890
> 
> 标签：javascript, backbone.js

当您覆盖主干同步时，模型/集合 .save()/fetch() 都使用相同的主干同步方法，那么检查 Backbone.sync 接收的是模型还是模型集合的最佳方法是什么？

举个例子：

```
Backbone.sync = function(method, model, options){
  //Model here can be both a collection or a single model so
 if(model.isModel()) // there is no isModel or isCollection method
} 
```

我想我正在寻找一个“安全”的最佳实践，我当然可以检查只有模型或集合具有的某些属性或方法，但它看起来很hackish，难道不应该有更好的明显方法吗？我可能只是找不到它。

谢谢！

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-06-20T17:40:08.247

You could also try `instanceof` like so:

```
Backbone.sync = function(method, model, options) {
  if (model instanceof Backbone.Model) {
    ...
  } else if (model instanceof Backbone.Collection) {
    ...
  }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-10T10:37:57.833

@fiskers7's answer works with deep extension :

```
 var Item = Backbone.Model.extend({
            className : 'Item',
            size :10
        });

        var VerySmallItem = Item.extend({
            size :0.1
        });

        var item = new Item();
        var verySmall = new VerySmallItem();

        alert("item is Model ?" + (item instanceof Backbone.Model)); //true
        alert("verySmall is Model ?" + (verySmall instanceof Backbone.Model)); //true 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T07:21:06.037

这同样是骇人听闻的，但是 Backbone 集合具有模型属性，而模型没有——它本身就是模型。

也许更安全的方法是 model.toJSON() 并查看结果是对象还是数组。无论如何，您可能会在自定义 Backbone.sync 中使用 model.toJSON() ，因此尽管这在计算上非常昂贵，但无论如何都会发生。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-27T00:01:13.893

我不完全确定我对此的感受，因为它似乎有点骇人听闻，但我无法完全想到为什么现在它会非常糟糕。

绝对简单，并且比“instanceof”检查更快（我假设您不会在您的对象上命名任何其他函数“isBBModel/Collection”？）

```
Backbone.Model.prototype.isBBCollection = function() { return false; }
Backbone.Model.prototype.isBBModel = function() { return true; }
Backbone.Collection.prototype.isBBCollection = function() { return true; }
Backbone.Collection.prototype.isBBModel = function() { return false; } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T07:27:41.353

你可以做这样的事情。

```
Backbone.Model.prototype.getType = function() {
    return "Model";
}

Backbone.Collection.prototype.getType = function() {
    return "Collection";
}

if(model.getType() == "Model") {}
if(model.getType() == "Collection"){} 
```

# jquery - 在 MVC 3 应用程序中单击 ASP.NET 图表图像时打开新窗口

> ID：10203987
> 
> 赞同：0
> 
> 时间：2012-04-18T06:28:04.907
> 
> 标签：jquery, asp.net-mvc-3, mschart

我在 MVC 3 应用程序中有一个带有向下钻取的 ASP.NET 图表。

向下钻取 url 在控制器中构建并分配给图表数据点。现在，当我单击图表上的此数据点时，会在显示向下钻取数据的位置呈现不同的视图。此视图在同一窗口中打开。

我希望在新窗口中显示向下钻取数据。我使用了 Point.MapareaAttributes （[如此处所示](https://stackoverflow.com/questions/7554933/open-a-new-window-using-mapareaattributes-in-microsoft-chart-control)），但它似乎不起作用。

URL 必须仅在业务逻辑层中构建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:26:37.887

我能够用我的队友提供的以下代码解决这个问题

point.Url = "javascript:void window.showModalDialog('" + url.Action("ABC", "BCD", new { segment = point.AxisLabel, severity = sev }) + "','Defect Drill down', 'dialogHeight:380px;dialogWidth:720px;朴素:是;滚动:自动');";

# iphone - 我什么时候使用 CFRelease？

> ID：10203990
> 
> 赞同：13
> 
> 时间：2012-04-18T06:28:16.730
> 
> 标签：iphone, objective-c, ios, xcode

我正在学习iOS编程。

我编写了关联地址的代码。

有很多方法。喜欢

我正在分组。

这里是组 1

```
ABAddressBookCreate();
ABRecordCopyCompositeName(argument);
ABRecordCopyValue(argument1, argument2);
ABRecordCopyValue(argument1, argument2);
ABMultiValueCopyLabelAtIndex(argument1, argument2);
ABMultiValueCopyValueAtIndex(argument1, argument2); 
```

另一个就在这里，group2

```
CFArrayGetCount(argument);
CFArrayGetValueAtIndex(argument1, argument2);
ABMultiValueGetCount(argument); 
```

我知道还有很多其他方法。

但我想知道我什么时候使用 CFRelease 方法。

我认为 group2 的所有方法都不做 CFRelease

因为它包含单词“Get”，未分配。

我认为 group1 的所有方法都必须使用 CFRelease

因为有一个字符串“copy”。

我有一本书。

但有两次使用 CFRelease。

一种是释放ABAddressBookCreate()

另一个是 ABAddressBookCopyPeopleWithName。

所有其他的东西都不使用 CFRelease。

所以我想知道我什么时候使用 CFRelease。

请告诉我何时使用 CFRelease。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-18T06:34:47.873

如果函数名称包含“复制”或“创建”，那么您拥有该对象，因此您必须在完成工作后释放它。这被称为“创建规则”。关于 Core Foundation 的内存管理的更多信息，可以参考 Core Foundation 的[内存管理编程指南](http://developer.apple.com/library/ios/#documentation/CoreFoundation/Conceptual/CFMemoryMgmt/Concepts/Ownership.html#//apple_ref/doc/uid/20001148-CJBEJBHH)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T06:33:06.170

当你创建一个核心基础对象或成为它的所有者时，你会调用`CFRelease`.

查看[CFMemory 管理](https://developer.apple.com/library/ios/#documentation/CoreFOundation/Conceptual/CFMemoryMgmt/Concepts/Ownership.html)文档

# gradle - Gradle：已更改文件列表作为任务的输入

> ID：10203998
> 
> 赞同：2
> 
> 时间：2012-04-18T06:28:54.330
> 
> 标签：gradle

此任务成功检查它是否是最新的，但我如何才能访问 doLast 块中更改的文件？输入目录包含大量文件，inputs.files 返回该目录中的每个文件。

```
task foo {
  inputs.dir new File("path/to/files")
  doLast {
    // do stuff with changed files
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:17:52.597

从 Gradle 1.0 开始，此信息尚未公开。Gradle 的未来版本将为此提供一个公共 API。