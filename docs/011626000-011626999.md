# StackOverflow 问答 11626000-11626999

# .htaccess - 如何使用 mod_rewrite 并仍然显示请求的 URL？

> ID：11626001
> 
> 赞同：1
> 
> 时间：2012-07-24T07:23:15.230
> 
> 标签：.htaccess, mod-rewrite

我希望请求[http://user1.domain.com](http://user1.domain.com)：

*   [从http://www.domain.com/site-client/site.php?site=user1](http://www.domain.com/site-client/site.php?site=user1)返回输出
*   并且用户仍然在浏览器中看到 URL 'http://user1.domain.com'

现在我有以下.htaccess：

```
RewriteEngine On
RewriteBase /

# Protect the htaccess file
<Files .htaccess>
Order Allow,Deny
Deny from all
</Files>

# Disable directory browsing
Options All -Indexes

RewriteCond %{HTTP_HOST} !^www.domain.com
RewriteCond %{HTTP_HOST} !^admin.domain.com
RewriteCond %{HTTP_HOST} ([^.]+).domain.com [NC]
RewriteRule ^(.*)$ http://www.domain.com/site-client/site.php?site=%1 [L] 
```

成功调用[http://www.domain.com/site-client/site.php?site=user1](http://www.domain.com/site-client/site.php?site=user1) URL，但它显示给用户。我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:43:29.120

您需要摆脱`http://www.domain.com`yor`RewriteRule`目标的一部分。它告诉 mod_rewrite 你想要一个 302 重定向。所以你的规则应该是这样的：

```
RewriteCond %{HTTP_HOST} !^www.domain.com
RewriteCond %{HTTP_HOST} !^admin.domain.com
RewriteCond %{HTTP_HOST} ([^.]+).domain.com [NC]
RewriteCond %{REQUEST_URI} !^/site-client/site.php
RewriteRule ^(.*)$ /site-client/site.php?site=%1 [L] 
```

编辑：您还需要检查以防止规则循环

# playframework - 如何避免使用 PlayFramework 创建架构

> ID：11626004
> 
> 赞同：1
> 
> 时间：2012-07-24T07:23:29.760
> 
> 标签：playframework, playframework-1.x

我有一个由另一个 webapp 管理的现有数据库模式。我正在创建的 playframework 需要读取/写入此现有模式，但它会在播放启动时删除并重新创建表。

如何关闭表创建？

更新：

*   玩1.2.5
*   mysql

更新2：

```
@Entity(name="mytable_name")
public class Sample extends Model {    
   public Integer some_value;
   public String fullname;
} 
```

在 Controller 方法中...

```
List<Sample> list = Sample.findAll(); 
```

该表与数据一起存在，我运行“播放测试”，点击调用 findAll 的控制器方法，该表被删除，重新创建，现在为空。

这些模式在文本字段大小不同的数据类型中并不完全匹配。我期待查询错误，但不是这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T07:38:42.690

如果你在 JPA 中使用 Play 1.x，你可以把这一行放在你的 application.conf

```
jpa.ddl=none 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T07:40:22.210

来自官方[演变的文档](http://www.playframework.org/documentation/1.2.5/evolutions)：

> 如果在 application.conf 中配置了数据库并且存在进化脚本，则会自动激活进化。[您可以通过将evolutions.enabled](http://www.playframework.org/documentation/1.2.5/configuration#evolutions.enabled)设置为 false来禁用它们。例如，当测试建立自己的数据库时，您可以禁用测试环境的演变。

# ios - 使用 NSOperation 和 NSOperationQueue 的好习惯是什么？

> ID：11626025
> 
> 赞同：2
> 
> 时间：2012-07-24T07:25:32.070
> 
> 标签：ios, multithreading, nsoperation, nsoperationqueue

我刚开始使用`NSOperation`and `NSOperationQueue`。我真的很想知道使用它们应该是更好的做法。

我应该为整个应用程序只创建一个队列，还是应该为每种特定类型的任务创建一个队列？如果我创建这么多队列有什么影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:01:54.140

阅读 Apple 并发指南的[执行操作](http://developer.apple.com/library/ios/documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationObjects/OperationObjects.html#//apple_ref/doc/uid/TP40008091-CH101-SW37)部分。这当然取决于您的实现和应用程序，但总而言之，只能同时运行一定数量的 NSOperations 并且增加 NSOperationQueues 的数量对您没有任何好处。因此，如果您的设计允许，我的建议是选择 1 个或更少的队列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:15:50.967

这取决于您使用它们的目的。如果您将它们用于性能，最大限度地利用 CPU，那么除了您期望拥有的内核数量之外，没有什么意义。

如果您只是为了保持 UI 响应而卸载处理，但您并不特别关心最大化性能，为了简单起见，我只使用默认后台队列。

如果您使用顺序后台队列来触发外部事件的操作（例如，网络请求完成），那么使用一堆没有任何害处，因为它们不会导致很多线程尝试运行同时。

在许多情况下，您可以使用操作队列来简化设计。

NSOperationQueues 建立在 GCD 和 AFAIK 之上，只要它们不尝试同时执行，加载队列就不会影响性能。

# ios - iphone中的可扩展tableView

> ID：11626028
> 
> 赞同：20
> 
> 时间：2012-07-24T07:25:41.307
> 
> 标签：ios, iphone, xcode, uitableview

![在此处输入图像描述](../Images/63b815c045c84e08ffaf309c07bcc3bf.png)

我想制作这种**可扩展/可折叠**的表格视图。如图所示，有类别和子类别。例如，“健康与美容”是一个类别，当我单击此单元格时，其打开的子类别如下图所示。那么如何制作这种类型的表格视图呢？请建议我。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-09-16T12:38:09.673

Finally i get two very useful helping link below which describes exact what the requirement is here [Expanding/Collapsing TableView Sections](http://www.cocoanetics.com/2011/03/expandingcollapsing-tableview-sections/)
[Collapsable Table View for iOS](http://www.codeproject.com/Articles/240435/Collapsable-Table-View-for-iOS)

Really, good articles for such kind of expanding/collapsing tableview sections

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-09-16T06:15:07.547

使用以下代码将可扩展单元格放入 UITableView

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";   
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }
    cell.textLabel.text=[[self.arForTable objectAtIndex:indexPath.row] valueForKey:@"name"];
    [cell setIndentationLevel:[[[self.arForTable objectAtIndex:indexPath.row] valueForKey:@"level"] intValue]];    
    return cell;
} 
```

展开和折叠行的代码 – TableView DidSelectRow 方法

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
    NSDictionary *d=[self.arForTable objectAtIndex:indexPath.row];
    if([d valueForKey:@"Objects"]) {
        NSArray *ar=[d valueForKey:@"Objects"];
        BOOL isAlreadyInserted=NO;
        for(NSDictionary *dInner in ar ){
            NSInteger index=[self.arForTable indexOfObjectIdenticalTo:dInner];
            isAlreadyInserted=(index>0 && index!=NSIntegerMax);
            if(isAlreadyInserted) break; 
        }
        if(isAlreadyInserted) {
            [self miniMizeThisRows:ar];
        } else {        
            NSUInteger count=indexPath.row+1;
            NSMutableArray *arCells=[NSMutableArray array];
            for(NSDictionary *dInner in ar ) {
                [arCells addObject:[NSIndexPath indexPathForRow:count inSection:0]];
                [self.arForTable insertObject:dInner atIndex:count++];
            }
            [tableView insertRowsAtIndexPaths:arCells withRowAnimation:UITableViewRowAnimationLeft];
        }
    }
} 
```

一种有助于最小化和最大化/展开折叠行的方法。

```
-(void)miniMizeThisRows:(NSArray*)ar{
    for(NSDictionary *dInner in ar ) {
        NSUInteger indexToRemove=[self.arForTable indexOfObjectIdenticalTo:dInner];        
        NSArray *arInner=[dInner valueForKey:@"Objects"];
        if(arInner && [arInner count]>0){
            [self miniMizeThisRows:arInner];
        }
        if([self.arForTable indexOfObjectIdenticalTo:dInner]!=NSNotFound) {
            [self.arForTable removeObjectIdenticalTo:dInner];
            [self.tableView deleteRowsAtIndexPaths:
              [NSArray arrayWithObject:[NSIndexPath indexPathForRow:indexToRemove inSection:0]]
                      withRowAnimation:UITableViewRowAnimationRight];
        }
    }
} 
```

您可以[从我的教程站点下载源代码](http://sugartin.info/2011/07/20/447/)。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-24T07:55:49.920

如果这有帮助：[访问 uitableview 的可展开和可折叠部分] [https://github.com/OliverLetterer/UIExpandableTableView](https://github.com/OliverLetterer/UIExpandableTableView)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-07-31T13:21:59.320

对于可扩展的表格视图，我有一些不同的方法——一种与这些表格视图的通常构建方式一致的方法。

有**标题**，也有**单元格**。**标题**应该是可*点击*的，然后标题下方的**单元格会***显示或隐藏*。这可以通过向标题添加手势识别器来实现，当点击时，您只需删除该标题下方的所有单元格（该部分），反之亦然（添加单元格）。当然，您必须维护哪些标头“打开”以及哪些标头“关闭”的状态。

这很好，有几个原因：

1.  标题和单元格的工作是分开的，这使得代码更干净。
2.  此方法与表格视图的构建方式（标题和单元格）很好地融合在一起，因此没有什么神奇之处 - 代码只是删除或添加单元格，并且应该与更高版本的 iOS 兼容。

我制作了一个非常简单的库来实现这一点。只要您的表格视图设置了 UITableView 部分标题和单元格，您所要做的就是子类化表格视图和标题。试试看 ：）

链接：[https ://github.com/fuzz-productions/FZAccordionTableView](https://github.com/fuzz-productions/FZAccordionTableView)

[![在此处输入图像描述](../Images/994b4d2e0d55def8cd9ad6e0333aa6da.png)](https://i.stack.imgur.com/qk12s.gif)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-09-16T06:44:02.250

尝试使用此代码...可能会有所帮助..并随时根据您的要求编辑代码...

```
#import "ViewController.h"
#import <QuartzCore/QuartzCore.h>
@interface ViewController ()

@end

@implementation ViewController
@synthesize myTable;
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    //myTable.backgroundColor=[UIColor clearColor];
   // self.view.backgroundColor=[UIColor colorWithPatternImage:[UIImage imageNamed:@"wood.png"]];
    muArr= [[NSMutableArray alloc]initWithObjects:@"Vinay",@"Anmol",@"Jagriti", nil];
    ExpArr=[[NSMutableArray alloc]initWithObjects:@"Useeee",@"Thissss",@"Codeee", nil];
    otherExpand=100;
    checker=100;

}

-(NSInteger) numberOfSectionsInTableView:(UITableView *)tableView
{
    return muArr.count;
}

-(NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if(otherExpand==section)
    return ExpArr.count;

    return  0;

}

-(BOOL)tableView:(UITableView *)table canCollapse:(NSIndexPath *)indexPath
{

    return NO;
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *Identifier=@"Cell";
    UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:Identifier];
    if (cell==nil)
    {
        cell=[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:Identifier];

    }
    cell.textLabel.text=[ExpArr objectAtIndex:indexPath.row];
    cell.textLabel.backgroundColor=[UIColor clearColor];
    UIView *viewww=[[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
    viewww.backgroundColor=[UIColor colorWithPatternImage:[UIImage imageNamed:@"wood.png"]];
    cell.backgroundView=viewww;

   // cell.backgroundColor=[UIColor colorWithPatternImage:[UIImage imageNamed:@"wood.png"]];
    [tableView setSeparatorStyle:UITableViewCellSeparatorStyleSingleLineEtched];
    [tableView setSeparatorColor:[UIColor purpleColor]];

    return cell;

}

-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{

    UIView *view1=[[UIView alloc]initWithFrame:CGRectMake(0, 0, 320, 44)];
    [view1.layer setCornerRadius:20];
    view1.layer.borderWidth=2;
    view1.layer.borderColor=[UIColor brownColor].CGColor;
    UILabel *label=[[UILabel alloc]initWithFrame:CGRectMake(10, 0, 295, 44)];
    label.backgroundColor=[UIColor clearColor];

    label.text=[muArr objectAtIndex:section];
    UIButton *btn=[UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    btn.frame=CGRectMake(280, -5, 50, 50);
    btn.backgroundColor=[UIColor clearColor];
    btn.tag=section;

    view1.backgroundColor=[UIColor colorWithPatternImage:[UIImage imageNamed:@"wood.png"]];
    label.textColor=[UIColor blackColor];
    label.font=[UIFont fontWithName:@"American TypeWriter" size:18];
    //btn.backgroundColor=[UIColor blackColor];
    [view1 addSubview:btn];
    [view1 addSubview:label];

    [btn addTarget:self action:@selector(Btntap:) forControlEvents:UIControlEventTouchUpInside];

    return view1;
}

-(void)Btntap : (UIButton *)btn
{
    if(otherExpand!=100)
    {
        if (otherExpand==btn.tag)
        {
            NSMutableArray *tempArr2=[[NSMutableArray alloc]init];
            for(int j=0;j<ExpArr.count;j++)
            {
                NSIndexPath *indexx1=[NSIndexPath indexPathForRow:j inSection:otherExpand];
                [tempArr2 addObject:indexx1];
            }
            checker=0;
            otherExpand=100;
            [myTable deleteRowsAtIndexPaths:tempArr2 withRowAnimation:UITableViewRowAnimationAutomatic];
        }

        else
        {
            NSMutableArray *tempArr2=[[NSMutableArray alloc]init];
            for(int j=0;j<ExpArr.count;j++)
            {
                NSIndexPath *indexx1=[NSIndexPath indexPathForRow:j inSection:otherExpand];
                [tempArr2 addObject:indexx1];
            }
            checker=1;
            otherExpand=100;
            [myTable deleteRowsAtIndexPaths:tempArr2 withRowAnimation:UITableViewRowAnimationAutomatic];
        }
    }

    if(checker!=0)
    {
        otherExpand=btn.tag;
        //checker=
        NSMutableArray *tempArr=[[NSMutableArray alloc]init];
        for(int i=0;i<ExpArr.count;i++)
        {
            NSIndexPath *indexx=[NSIndexPath indexPathForRow:i inSection:btn.tag];
            [tempArr addObject:indexx];
        }
        [myTable insertRowsAtIndexPaths:tempArr withRowAnimation:UITableViewRowAnimationAutomatic];

        checker=1;
    }
    checker=100;
}

-(CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    return 44;
}

@end 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-07-24T07:50:01.710

WWDC 2011 中有一个很棒的视频，名为[UITableView Changes, Tips and Tricks - session 125](https://developer.apple.com/videos/wwdc/2011/)，展示了如何做这样的事情。
另请查看示例代码[TVAnimationsGestures](http://developer.apple.com/library/ios/#samplecode/TableViewUpdates/Introduction/Intro.html)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-06-27T02:37:28.730

您可以在 Swift 中查看这个手风琴示例：[https ://github.com/tadija/AEAccordion](https://github.com/tadija/AEAccordion)

![在此处输入图像描述](../Images/e574c65d93ae09f8bc8d395d0142659d.png)

创建手风琴效果的代码很少（不是通过使用部分，而是通过单元格），作为奖励，还有一个在其他 XIB 文件中使用 XIB 文件的解决方案（对于使用自定义视图的自定义单元格很有用）。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-09-19T05:18:25.963

请试试这个例子：

可扩展表视图的最佳示例

[https://github.com/OliverLetterer/UIExpandableTableView](https://github.com/OliverLetterer/UIExpandableTableView)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-09-18T17:16:59.577

[TLIndexPathTools](http://tlindexpathtools.com)可以自然地做这种事情。事实上，可扩展部分和可扩展树结构都有扩展。尝试为可展开部分运行[Collapse示例项目，为可展开树运行](https://github.com/wtmoose/TLIndexPathTools/blob/master/Examples/Collapse/Collapse/CollapseTableViewController.m)[Outline 示例项目](https://github.com/wtmoose/TLIndexPathTools/blob/master/Examples/Outline/Outline/OutlineTableViewController.m)。

使用 TLIndexPathTools 的一个优点是，作为一个简单的低级 API，它可以使用通用方法解决各种动态表视图和集合视图问题。它可以与 Core Data 和普通数组互换使用。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-01-07T11:08:42.250

创建一个可扩展的表格视图非常容易，这是我如何做到这一点的一个例子，

我用于这个的数据

```
struct ItemList {
var name: String
var items: [String]
var collapsed: Bool

init(name: String, items: [String], collapsed: Bool = false) {
   self.name = name
   self.items = items
   self.collapsed = collapsed
   }
}

var sections = [ItemList]()

var items: [ItemList] = [
 ItemList(name: "Mac", items: ["MacBook", "MacBook Air"]),
 ItemList(name: "iPad", items: ["iPad Pro", "iPad Air 2"]),
 ItemList(name: "iPhone", items: ["iPhone 7", "iPhone 6"])
] 
```

现在只需添加这段代码并相应地使用

```
extension ViewController:UITableViewDelegate,UITableViewDataSource{

func tableView(_ tableView: UITableView, heightForHeaderInSection section: Int) -> CGFloat {
    return 60
}

func tableView(_ tableView: UITableView, viewForHeaderInSection section: Int) -> UIView? {
    let headerHeading = UILabel(frame: CGRect(x: 5, y: 10, width: self.view.frame.width, height: 40))
    let imageView = UIImageView(frame: CGRect(x: self.view.frame.width - 30, y: 20, width: 20, height: 20))
    if items[section].collapsed{
        imageView.image = UIImage(named: "collapsed")
    }else{
        imageView.image = UIImage(named: "expand")
    }
    let headerView = UIView(frame: CGRect(x: 0, y: 0, width: self.view.frame.width, height: 60))
    let tapGuesture = UITapGestureRecognizer(target: self, action: #selector(headerViewTapped))
    tapGuesture.numberOfTapsRequired = 1
    headerView.addGestureRecognizer(tapGuesture)
    headerView.backgroundColor = UIColor.red
    headerView.tag = section
    headerHeading.text = items[section].name
    headerHeading.textColor = .white
    headerView.addSubview(headerHeading)
    headerView.addSubview(imageView)
    return headerView
 }
func numberOfSections(in tableView: UITableView) -> Int {
    return items.count
}
func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
    let itms = items[section]
    return !itms.collapsed ? 0 : itms.items.count
}

func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
    let cell = tableView.dequeueReusableCell(withIdentifier: "cell") as! UITableViewCell
    cell.textLabel?.text = items[indexPath.section].items[indexPath.row]
    return cell
}
@objc func headerViewTapped(tapped:UITapGestureRecognizer){
    print(tapped.view?.tag)
    if items[tapped.view!.tag].collapsed == true{
        items[tapped.view!.tag].collapsed = false
    }else{
        items[tapped.view!.tag].collapsed = true
    }
    if let imView = tapped.view?.subviews[1] as? UIImageView{
        if imView.isKind(of: UIImageView.self){
            if items[tapped.view!.tag].collapsed{
                imView.image = UIImage(named: "collapsed")
            }else{
                imView.image = UIImage(named: "expand")
            }
        }
    }
    tableView.reloadData()
}

} 
```

结果是宾果游戏:)

[![在此处输入图像描述](../Images/8eaae3ad181505b9bb7e426a2bc7773d.png)](https://i.stack.imgur.com/3VPuf.gif)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-02-28T06:02:22.737

我需要将单个单元格扩展到更完整的视图并将其折叠回汇总视图。

所以我所做的就是使用`UIStackView`. 我将不想在折叠状态下显示的视图保持隐藏，然后在点击单元格时显示它。

这里的技巧是在`tableView.beginUpdates()`and`tableView.endUpdates()`语句中显示和隐藏视图。通过这种方式，表格视图会自动调整单元格高度并以动画方式进行。

以下是基本单元格在 IB 中的外观： [![在此处输入图像描述](../Images/24fc773cb5a71dc58d8dc209f3b26740.png)](https://i.stack.imgur.com/uquXw.png)

单元格自定义类：

```
 class AccordionCell: UITableViewCell {
    @IBOutlet weak var stackView: UIStackView!

    @IBOutlet weak var titleLabel: UILabel!
    @IBOutlet weak var descriptionLabel: UILabel!
    @IBOutlet weak var extendedDescriptionLabel: UILabel!

    var expanded: Bool = false {
        didSet {
            if let extended = self.extendedDescriptionLabel {
                extended.isHidden = !expanded
            }
        }
    }

    override func awakeFromNib() {
        super.awakeFromNib()
        // Initialization code
        self.expanded = false
    }

    override func setSelected(_ selected: Bool, animated: Bool) {
        super.setSelected(selected, animated: animated)

        // Configure the view for the selected state
    }    
} 
```

UITableView 委托实现：

```
extension ViewController: UITableViewDataSource, UITableViewDelegate {
    func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
        return 100
    }

    func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
        let cell = tableView.dequeueReusableCell(withIdentifier: CellIdentifier) as! AccordionCell
        cell.titleLabel.text = "Row: \(indexPath.row)"
        cell.expanded = indexPath.row == expanded
        return cell
    }

    func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) {
        if let cell = tableView.cellForRow(at: indexPath) as? AccordionCell {
            tableView.beginUpdates()
            if expanded == indexPath.row {
                cell.expanded = false
                expanded = -1
            }
            else {
                cell.expanded = true
                expanded = indexPath.row
            }

            tableView.endUpdates()
            tableView.selectRow(at: indexPath, animated: true, scrollPosition: .none)
        }
    }

    func tableView(_ tableView: UITableView, didDeselectRowAt indexPath: IndexPath) {
        if let cell = tableView.cellForRow(at: indexPath) as? AccordionCell {
            tableView.beginUpdates()
            cell.expanded = false
            tableView.endUpdates()
        }
    }
} 
```

为了跟踪哪个单元格被展开，我引入了`indexpath`当前展开单元格的变量保存，以便在滚动表格视图时展开右侧单元格。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-09-24T09:20:55.357

检查此链接：

[http://iostechnotips.blogspot.in/2014/05/expandable-uitableview.html](http://iostechnotips.blogspot.in/2014/05/expandable-uitableview.html)

```
-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
```

*使用`UITableView`委托方法`viewForHeaderInSection`并返回自定义 UIView。

*添加一个`UIButton`带有动作“可扩展：（id）发件人”的子视图，检查发件人ID作为部分编号并重新加载表格视图。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-06-18T15:44:15.627

您可以使用[ExpyTableView](https://github.com/okhanokbay/ExpyTableView)

这会从您的给定单元格中生成一个可扩展的部分。兼容至 iOS 8.0。通过生成具有多个表视图单元格的可扩展表视图，您将获得灵活性。只需操纵状态的分隔符，然后没人会知道您正在使用多个单元格进行扩展。

*   **其他解决方案：**您操纵高度来扩展单元格，当单元格设计需要更新时，您必须在代码中重新构建所有自动布局约束或逻辑。

*   **ExpyTableView：**您通过使用多个单元格并插入和删除它们（这可能意味着展开和折叠）来制作可展开的表格视图，您将有很大的机会在未来的设计请求中。您所要做的就是添加一个新的 UITableViewCell 并为其编写代码。您将轻松拥有新设计。

您所要做的就是`import ExpyTableView`然后：

```
class ViewController: ExpyTableViewDataSource, ExpyTableViewDelegate {

  @IBOutlet weak var expandableTableView: ExpyTableView!

  // First, set data source and delegate for your table view.
  override func viewDidLoad() {
    super.viewDidLoad() 
    expandableTableView.dataSource = self
    expandableTableView.delegate = self
  }

  // Then return your expandable cell instance from expandingCell data source method.
  func expandableCell(forSection section: Int, inTableView tableView: ExpyTableView) -> UITableViewCell {
    // this cell will be displayed at IndexPath with section: section and row 0
  }
} 
```

您可以看到以前的表格视图部分现在是可扩展的表格视图部分。您还可以下载[示例项目](https://github.com/okhanokbay/ExpyTableView)并查看更详细的示例。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-01-30T06:54:10.897

在您的 .h 文件中

```
LoadCustomCell *cell1;
NSMutableArray  *arrayForBool;
NSMutableArray  *questionArray;
NSMutableArray  *answerArray; 
```

在您的 .m 文件中

```
 viewDidLoadMethod {
 _faqTblView.estimatedRowHeight = 30;
 _faqTblView.rowHeight = UITableViewAutomaticDimension;
 arrayForBool = [[NSMutableArray alloc]init];

 _questionArray = [[NSMutableArray alloc]init];
 _answerArray = [[NSMutableArray alloc]init];
 for (int i = 0; i < _questionArray.count; i++) {
        [arrayForBool addObject:@"0"];
    }
    self.faqTblView.dataSource = self;
    self.faqTblView .delegate = self;
    [self.faqTblView reloadData];
 } 
```

在那之后

```
 #pragma mark - TableView Datasource & Delegate Method.
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
  return [_questionArray count];
 }
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section {

    UILabel *lblText = [[UILabel alloc]initWithFrame:CGRectMake(0, 0, 260, 100)];
    lblText.text = [_questionArray objectAtIndex:section];
    return [lblText getLabelHeight] + 20;(created custom class)
 }
-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {

UITapGestureRecognizer  *headerTapped   = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(sectionHeaderTapped:)];
cell1 = [[[NSBundle mainBundle] loadNibNamed:@"LoadCustomCell" owner:self options:nil] objectAtIndex:0];
[cell1 setFrame:CGRectMake(0, 0, cell1.frame.size.width, cell1.frame.size.height)];
NSString *numStr = [NSString stringWithFormat:@"%ld. ",section + 1];
[cell1.sideMenuUserNameLabel setText:[numStr stringByAppendingString:[_questionArray objectAtIndex:section]]];
[cell1 setBackgroundColor:[UIColor lightGrayColor]];
cell1.tag = section;
[cell1 addGestureRecognizer:headerTapped];

return cell1;
}

- (void)sectionHeaderTapped:(UITapGestureRecognizer *)gestureRecognizer {

NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:gestureRecognizer.view.tag];
if (indexPath.row == 0) {
    BOOL collapsed  = [[arrayForBool objectAtIndex:indexPath.section] boolValue];
    for (int i = 0; i < [_questionArray count]; i++) {
        if (indexPath.section==i) {
            [arrayForBool removeObjectAtIndex:i];
            [arrayForBool insertObject:[NSString stringWithFormat:@"%d", !collapsed] atIndex:i];
        }
    }
    NSLog(@"%@", arrayForBool);
    [self.faqTblView reloadSections:[NSIndexSet indexSetWithIndex:gestureRecognizer.view.tag] withRowAnimation:UITableViewRowAnimationAutomatic];
    for (NSIndexPath *indexPath in self.faqTblView.indexPathsForSelectedRows) {
        [self.faqTblView deselectRowAtIndexPath:indexPath animated:NO];
         }
    cell1.imageView.transform = CGAffineTransformMakeRotation(M_PI);
     }
}

-(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *questionCellIdentifier = @"questionCellIdentifier";
QuestionCustomCell *cell = [tableView dequeueReusableCellWithIdentifier:questionCellIdentifier];
if (cell == nil) {
    NSArray * myNib;
    myNib =[[NSBundle mainBundle]loadNibNamed:@"QuestionCustomCell" owner:self options:nil];
    cell = (QuestionCustomCell *)[myNib lastObject];
}

BOOL manyCells  = [[arrayForBool objectAtIndex:indexPath.section] boolValue];
if(manyCells){
    cell.questionNameLbl.text = [_answerArray objectAtIndex:indexPath.section];
}
return cell;
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-09-17T09:55:45.160

**UITableView with Collapsible (expand and collapse) Cells swift 5**

*   非常易于与自定义单元一起使用

*   消耗品

*   动态内容

**检查 Github 链接：** [https ://github.com/Murteza12/ExpandableTablew/wiki/UITableView-with-Collapsible-(expand-and-collapse)-Cells](https://github.com/Murteza12/ExpandableTablew/wiki/UITableView-with-Collapsible-(expand-and-collapse)-Cells)

[![在此处输入图像描述](../Images/c306d6f7c9705e241a25b006d1697f4d.png)](https://i.stack.imgur.com/bQE72.png)

# iphone - 我想翻转我的应用程序的启动画面 - 如何模仿翻动动画，例如打开书的封面？

> ID：11626031
> 
> 赞同：1
> 
> 时间：2012-07-24T07:26:01.923
> 
> 标签：iphone, ios, ipad

我有一个 Iphone 应用程序，我想在我的 splashview 中实现一个翻转动画，就像在 PATH 应用程序中一样。我正在使用一个单独的视图控制器来展示我的 splashview。我想用这个动画从窗口中删除它。任何人都可以关于如何实现这一点的想法。这就是我添加视图的方法。我如何从窗口中删除这个视图并添加带有类似动画的新视图

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    self.startupController = [[StartupViewController alloc] initWithNibName:@"StartupViewController" bundle:nil];
    [window addSubview:self.startupController.view];
    [self.startupController.activityIndicator setHidden:NO];
    [self.startupController.activityIndicator startAnimating];
    [window makeKeyAndVisible];

    timer = [NSTimer scheduledTimerWithTimeInterval: 2.0
                                                 target: self
                                               selector: @selector(handleTimer:)
                                               userInfo: nil
                                                repeats: NO];

    // [window addSubview:navigationController.view];
    //  [window makeKeyAndVisible];

    return YES;
}

-(void)handleTimer:(NSTimer*)timer {

    [self.startupController.activityIndicator stopAnimating];
    [self.startupController.activityIndicator setHidden:YES];

    self.startupController.view.layer.anchorPoint=CGPointMake(0, .5);
    self.startupController.view.center = CGPointMake(self.startupController.view.center.x - self.startupController.view.bounds.size.width/2.0f, self.startupController.view.center.y);
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:5];
    [UIView setAnimationDelay:1];
    self.startupController.view.transform = CGAffineTransformMakeTranslation(0,0);
    CATransform3D _3Dt = CATransform3DIdentity;
    _3Dt =CATransform3DMakeRotation(3.141f/2.0f,0.0f,-1.0f,0.0f);
    _3Dt.m34 = 0.001f;
    _3Dt.m14 = -0.0015f;
    self.startupController.view.layer.transform =_3Dt;
    [UIView commitAnimations];  
    //[window addSubview:navigationController.view];
     //[window makeKeyAndVisible];      
}

`when i am doing like this i can have that flip animation.but when the view is flipping i need to have my home view there.But when i am uncomenting the last two lines that functionality is working but there is no animation.Can anybody help me? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:06:00.137

这是我已经在我的一个项目中使用的代码。

我需要像垫子一样打开封面。

```
#pragma mark Open Book Animation

- (void)pageOpenView:(UIView *)viewToOpen duration:(NSTimeInterval)duration {

  // first add next view below current view
  [self.view.window insertSubview:navigationController.view 
                     belowSubview:self.view];

  // set anchor point for the view animation
  viewToOpen.layer.anchorPoint = CGPointMake(0.0f, 0.0f);

  viewToOpen.center = CGPointMake(0, 
                                  (viewToOpen.center.y - 
                                   (viewToOpen.bounds.size.height/2.0f)));

  // start the Page Open
  [UIView beginAnimations:@"Page Open" context:nil];
  [UIView setAnimationDuration:2.0];
  [UIView setAnimationDelegate:self];
  [UIView setAnimationDidStopSelector:@selector(didEndAnimation)];

  [viewToOpen.layer setValue:[NSNumber numberWithInt:180] 
                  forKeyPath:@"transform.rotation.x"];

  [splashImageView setHidden:YES];

  [UIView commitAnimations];

} 
```

这里viewToOpen是需要动画的UIView，duration是动画的时间线。

希望这是您所需要的。

享受编码:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:08:54.030

我喜欢[这篇文章](http://spvarma.blogspot.no/2011/06/splash-screen-with-animation-for-iphone.html)中使用的方法。虽然那里使用的动画是褪色的，但它是动画的一个很好的容器。

如果你还设置了animationTransition，你应该可以得到你想要的动画。像这样的东西。。

`[UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:splashView cache:YES];`

这至少应该让你开始。:-)

# sql - SQL - 基于off值集的条件虚拟列

> ID：11626033
> 
> 赞同：1
> 
> 时间：2012-07-24T07:26:03.567
> 
> 标签：sql

表名：**简单表**

```
| A | B | C | D | E | F | 
+----------------------+ 
| 5 | 3 | 5 | 9 | 6 | 3 | 
| 7 | 5 | 0 | 0 | 9 | 2 | 
| 1 | 6 | 1 | 2 | 4 | 5 | 
| 2 | 9 | 4 | 4 | 9 | 0 | 
| 9 | 2 | 3 | 5 | 2 | 8 | 
```

我有一个看起来像这样的简单表，我基本上想做的是在这个简单的表上进行选择，但结果中有一个额外的虚拟列（为简单起见，称为“虚拟”）。这个虚拟列是使用其他列的值构建的，如果整数是 7 或更大，它包含列的标题。例如，第一行的假人将显示“D”，但第二行将显示“A/E”。我无法弄清楚这种逻辑是如何在 SQL 中实现的，但非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T07:44:01.647

如果这是 Sql Server，那么

```
select *,
       stuff (case when a >= 7 then '/A' else '' end
            + case when b >= 7 then '/B' else '' end
            + case when c >= 7 then '/C' else '' end
            + case when d >= 7 then '/D' else '' end
            + case when e >= 7 then '/E' else '' end
            + case when f >= 7 then '/F' else '' end,
         1, 1, '') dummy
  from SimpleTable 
```

如果没有一列大于或等于 7，则 dummy 将为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:40:26.093

```
SELECT A, B, C, D, E, F,
CASE 
 WHEN A >= 7 THEN 'A/' 
 ELSE '' END
+
 CASE 
 WHEN B >= 7 THEN 'B/' 
 ELSE '' END
+
CASE 
 WHEN C >= 7 THEN 'C/' 
 ELSE '' END
+
CASE 
 WHEN D >= 7 THEN 'D/' 
 ELSE '' END
+
CASE 
 WHEN E >= 7 THEN 'E/' 
 ELSE '' END
+
CASE 
 WHEN F >= 7 THEN 'F' 
 ELSE '' END

AS Dummy
FROM SimpleTable 
```

# git - 从 git config --edit 更改行后如何保存配置

> ID：11626035
> 
> 赞同：12
> 
> 时间：2012-07-24T07:26:07.300
> 
> 标签：git

请允许我在这里解释我的查询。

我正在尝试重置所有作者，包括我的 git 对

`git pair --reset`不再工作了。文档建议我使用`git config --edit`

我输入了命令`git config --edit`

并删除了

`[user]`和`[git-pair]`价值观...

之后如何保存配置？我应该从键盘上敲什么东西还是什么。

我只知道如何通过按键盘上的“插入”按钮在其中插入东西，但我不知道如何保存配置并更早地返回命令提示符。

我想保存新的配置文件，它是：

```
[core]
        repositoryformatversion = 0
        filemode = false
        bare = false
        logallrefupdates = true
        symlinks = false
        ignorecase = true
        hideDotFiles = dotGitOnly
~ 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-24T07:45:02.973

假设使用的编辑器是VI(M)：点击`esc`退出插入模式，然后`:wq`保存退出

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T07:49:08.560

您编辑它的方式与编辑提交消息的方式相同。如果您对默认编辑器不满意，请使用`EDITOR`环境变量对其进行更改。此外，您可以使用您选择的编辑器直接编辑配置文件。

# oracle - 使用触发器存储已删除记录的数据

> ID：11626036
> 
> 赞同：1
> 
> 时间：2012-07-24T07:26:12.213
> 
> 标签：oracle, triggers, oracle10g

我想编写一个触发器，它在从表中删除记录时触发，并在另一个表中插入一条记录并使用已删除记录的详细信息。

> 数据库：Oracle 10g

我的触发器看起来像这样

```
CREATE or REPLACE TRIGGER myTrigger
AFTER DELETE
    ON myTable
    REFERENCING NEW AS old_tab
    FOR EACH ROW
BEGIN
    INSERT INTO ACTIVITYLOG values ('ADMIN',:old_tab.tabletID,'MIGRATION','ERROR','TEST','T','NIL',sysdate)
END; 
```

这里`:old_tab.tabletID`是删除完成`tabletID`的表的列。`myTable`我想保存我和它被删除的日志。

但是当我尝试删除记录时，出现以下错误

> 错误代码 4098，SQL 状态 42000：ORA-04098：触发器 'DB.MYTRIGGER' 无效并且重新验证失败
> 
> **PS 在 NetBeans SQL 编辑器中创建触发器。**

这里是，

> **编辑**

**STRUCTURE OF** `myTable` **（发生表删除）**

```
tabletID varchar2(15) PRIMARY KEY
tabletName varchar2(100) 
```

**结构** `ACTIVITYLOG`

```
username varchar2(15)
tabletKey varchar2(15)
page_ref varchar2(100)
errors varchar2(100)
remarks varchar2(100)
operationcode char(2)
lastupdateip varchar2(20)
lastupdatedate date 
```

抱歉，无法访问 SQL PLUS EDITOR。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:01:37.370

您应该使用 :OLD 值而不是 :NEW 值。DELETE 触发器（无论是 BEFORE 还是 AFTER）中的 :NEW 值为空白。这是有道理的，因为如果您考虑一下，此时该记录在逻辑上已不复存在。

但是，这不是编译错误的来源。

> “删除时仍然出现相同的错误。”

我想我们可以花一整天的时间来猜测出了什么问题，所以让我们现在停下来。您可以通过这个简单的查询发现编译错误：

```
select * from user_errors
where name = 'MYTRIGGER'
and type = 'TRIGGER' 
```

* * *

> “我将 :NEW 更改为 :OLD，并添加了一个分号并在 SQL PLUS 上运行它，这就成功了”

为了将来的利益，这里有一个触发器版本，它将编译并正确写入所需的值：

```
CREATE or REPLACE TRIGGER myTrigger 
AFTER DELETE 
    ON myTable 
    REFERENCING OLD AS old_tab 
    FOR EACH ROW 
BEGIN 
    INSERT INTO ACTIVITYLOG values ('ADMIN',:old_tab.tabletID,'MIGRATION','ERROR','TEST','T','NIL',sysdate); 
END; 
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:21:57.230

问题是这样的：

```
REFERENCING NEW AS old_tab 
```

您已使用标签“old_tab”重新定义了新值。这有点像添加`#define FALSE TRUE`到程序的顶部。

`semicolon`在插入语句之后添加

因为您使用的是 AFTER DELETE 触发器，所以您只需要访问 :OLD 值，例如：

```
CREATE or REPLACE TRIGGER myTrigger
AFTER DELETE
    ON myTable
    FOR EACH ROW
BEGIN
    INSERT INTO ACTIVITYLOG values ('ADMIN',:OLD.tabletID,'MIGRATION','ERROR','TEST','T','NIL',sysdate);
END; 
```

# android - 如何在 Android 中打开加密的 sqlite 数据库？

> ID：11626037
> 
> 赞同：0
> 
> 时间：2012-07-24T07:26:13.293
> 
> 标签：android, eclipse, sqlite

我们已经从 .NET 创建了带有加密的 SQLite 数据库。像这样：

```
con.ConnectionString = "Data source = " & DB_NAME
con.Open()
con.ChangePassword(DB_PWD)
cmd = con.CreateCommand 
```

现在如何在我的 android 应用程序中打开这个数据库？在加密之前它工作正常。我在android中尝试的代码是：

```
db = SQLiteDatabase.openDatabase(ImisData.db3;Password=myPassword",null, SQLiteDatabase.OPEN_READONLY); 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:18:34.593

您必须准确了解您的 .NET 驱动程序是如何进行加密的，并找到或实现与 android 兼容的东西。标准的是[sqlicpher](http://sqlcipher.net/)，也许你的数据库文件是兼容的。

# javascript - javaScript初学者：将数据从java脚本发送到servlet？

> ID：11626039
> 
> 赞同：0
> 
> 时间：2012-07-24T07:26:37.870
> 
> 标签：javascript

我正在用 JavaScript 创建动态表单。我想将数据从 JavaScript 发送到 servlet。我不在我的 Form.Using 按钮中使用任何提交按钮，我只想发送数据。请任何人帮助我。

这是我的代码：

```
var myform=document.createElement("form");
myform.setAttribute("id", "myform");

var tname=document.createElement('input');
tname.setAttribute('type','text');
tname.setAttribute('name', "name");

var leaveMessage=document.createElement('input');
leaveMessage.setAttribute('type','button');
leaveMessage.setAttribute('name', "msgButton");
leaveMessage.setAttribute('value', "Leave Message");

myform.appendChild(tname);
myform.appendChild(leaveMessage);

document.body.appendChild(myform); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:30:53.750

还添加一些语句

```
var myform=document.createElement("form");
myform.setAttribute("id", "myform");
myform.setAttribute('action', "/mypage");
myform.setAttribute('method', "post");

var tname=document.createElement('input');
tname.setAttribute('type','text');
tname.setAttribute('name', "name");
var leaveMessage=document.createElement('input');
leaveMessage.setAttribute('type','button');
leaveMessage.setAttribute('name', "msgButton");
leaveMessage.setAttribute('value', "Leave Message");

myform.appendChild(tname);
myform.appendChild(leaveMessage);

document.body.appendChild(myform);

document.forms["myform"].submit(); 
```

# java-me - 如何在 j2me(java) 中进行解析

> ID：11626040
> 
> 赞同：1
> 
> 时间：2012-07-24T07:26:41.087
> 
> 标签：java-me, midp-2.0

我想提取

来自以下网址的 iframe 标签“src”值 [http://www.teluguone.com/videos/single/comedy/Comedy-Express-464---Back-to-Back---Comedy-Scenes-14727.html](http://www.teluguone.com/videos/single/comedy/Comedy-Express-464---Back-to-Back---Comedy-Scenes-14727.html)

iframe 宽度="640" 高度="380" src="http://www.youtube.com/embed/XJDw2T1nGJQ"frameborder="0"

允许全屏/iframe

我如何在 j2me 中实现它？ j2me 不支持 htmlparser、Jericho、Jsoup 解析器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:44:09.227

假设您已经将 html 源代码存储在`String`名为 htmlPage 的变量中。

```
int iFrameIndex = htmlPage.indexOf("iframe");
int srcIndex = htmlPage.indexOf("src", iFrameIndex);
int httpIndex = htmlPage.indexOf("http", srcIndex);
int quotesIndex = htmlPage.indexOf("\"", httpIndex);
String srcUrl = htmlPage.substring(httpIndex, quotesIndex); 
```

# svn - svn 提交更改 ip

> ID：11626044
> 
> 赞同：1
> 
> 时间：2012-07-24T07:26:57.500
> 
> 标签：svn, ip, external

我已经设置了一个 svn 服务器，可以在我们的网络中的“svn.mydomain.at”下访问。svn 也被我们网络之外的一位用户使用，可通过其公共 IP 访问。

问题：当外部用户向 svn 提交新文件时，我尝试更新我的解决方案，svn 尝试从公共地址更新，而不是使用 svn.mydomain.at

任何提示我做错了什么？

提前致谢！

# iphone - 如何解决 NSDictionary 中的 NSInvalidArgumentException

> ID：11626047
> 
> 赞同：0
> 
> 时间：2012-07-24T07:27:08.057
> 
> 标签：iphone, nsdictionary

我的代码有问题，应用程序因错误而崩溃

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFDictionary setObject:forKey:]：尝试插入零值（键：app_ver）” ***第一次抛出调用堆栈：（0x874022 0x257acd6 0x81ca48 0x81c9b9 0x8732da 0x8c473 0x750419 0x750477 4c7x08d8 0x82670 0x13eda49 0x13ebe84 0x13ecea7 0x13ebe3f 0x13ebfc5 0x1330f5a 0x2f1ca39 0x2fe9596 0x2f13120 0x2fe9117 0x2f12fbf 0x84894f 0x7abb43 0x7ab424 0x7aad84 0x7aac9b 0x133040f 0x82a35 0x12fc4d6 0x12fc447 0x99595ed9 0x995996de) terminate called throwing an exception

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:31:49.967

You are trying to set a dictionary object without any key (nil).

Check this for more details: [setObject:ForKey: crash?](https://stackoverflow.com/questions/7218927/setobjectforkey-crash)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:34:37.437

您尝试插入一个 nil 对象。先测试一下。

```
if(anObject){
    [myDictionary setValue:anObject forKey:kAnKey];
} 
```

# java - 不兼容类型双字符串

> ID：11626048
> 
> 赞同：0
> 
> 时间：2012-07-24T07:27:12.847
> 
> 标签：java, string, types, double

为什么购买是不兼容的类型`scan.next()`？（我试图让用户输入购买和投标，然后使用一种方法来计算变化）。

```
public static void makeChange() //one method of a class
{       
    double purchase;
    double tendered;

    Scanner scan = new Scanner (System.in);

    System.out.println ("How much was the Purchase?");
    purchase = scan.next(); //why would this be an incompatible type?
    System.out.println ("Amount Tendered"); 
    tendered = scan.next();      

    System.out.println("Processing Transaction");
    int ch[] = cd.makeChange(purchase, tendered);

    .... continued 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T07:36:14.423

因为[scanner.next()](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#next())返回一个字符串，如javadoc 中所述。这是检查方法何时没有按照您认为的方式执行的第一个地方。您可能打算使用`scanner.nextDouble()`.

正如评论中所指出的，如果您的代码不仅仅是一个练习，您应该使用 BigDecimal 作为货币金额以避免四舍五入问题（双精度数不准确）。

# dos - 用 DOS32/A 替换平面内存模式下的硬件中断

> ID：11626049
> 
> 赞同：0
> 
> 时间：2012-07-24T07:27:16.113
> 
> 标签：dos, interrupt, isr, watcom

我有一个关于如何在平面内存模式下替换硬件中断的问题......

1.  关于我的申请...
    *   通过结合**Watcom C**和**DOS32/A**创建。
    *   为在 DOS 模式下运行而编写（不在 OS 模式下）
    *   使用 DOS32/A 现在我可以访问 >1M 内存并分配大内存以使用...（以**平面内存模式运行**！！！）
2.  目前的问题...
    *   我想为一张 PCI 卡写一个 ISR（中断服务程序）。因此我需要“替换”硬件中断。
    *   前任。PCI 卡的中断线 = DOS 中的 0xE。这意味着该设备将通过 8259 的 IRQ 14 发出中断。

*但是我没有如何实现我的目标，在平面模式下**替换**这个中断？*

@resource 我发现... - 在 watcom C 的库中，有一个示例使用 _dos_getvect、_dos_setvect 和 _chain_intr 来挂钩 INT 0x1C...我测试了这段代码，发现没问题。但是当我将它应用于我的案例时：INT76（其中 IRQ 14 是 "INT 0x76" <- (14-8) + 0x70 ）然后什么也没发生......

*   我检查了硬件中断是否生成，但我自己的 ISR 没有被调用......

我会失去什么吗？或者我可以使用任何功能来实现我的目标？

==================================================== ==============

*[20120809]* 我尝试使用**DPMI**调用**0x204 和 0x205**并发现**MyISR()**仍未被调用。我描述了我所做的如下，也许你们都可以给我一些建议！

**1）**使用内联汇编实现DPMI调用0x204和0x205并测试OK...

前任。使用 DPMI **0x204**显示 16 个 IRQ 的中断向量，我得到 ( *selector:offset* ) 以下结果：**8:1540** (INT8), **8:1544** (INT9),....., **8:1560** (INT70), **8 :1564** (INT71),..., **8:** 157C (INT77)

前任。使用DPMI **0x205**设置**IRQ14**（INT76）的中断向量，返回CF=0，表示成功

**2)**创建我自己的 ISR MyISR() 如下：

```
volatile int tick=0;  // global and volatile...
void MyISR(void)
{
  tick = 5;  // simple code to change the value of tick...
} 
```

**3)**通过 DPMI 调用 0x205设置**新的中断向量：**

```
selector = FP_SEG(MyISR);  // selector = 0x838 here
offset = FP_OFF(MyISR);    // offset   = 0x30100963 here
sts = DPMI_SetIntVector(0x76, selector, offset, &out_ax); 
```

然后 sts = 0(CF=0) 表示成功！

*   这里有一件奇怪的事情是：我的应用程序在**平面内存模型**中运行，我认为 MyISR() 的选择器应该为 0...但是如果 DPMI 调用 0x205 的选择器 = 0，那么我得到 CF=1 和 AX = 0x8022，表示“无效的选择器”！

**4）**让硬件中断产生，证据是：

*   PCI 设备配置寄存器 0x​​5 bit2（中断禁用）= 0
*   PCI 设备配置寄存器 0x​​6 bit3(中断状态) = 1
*   PCI 设备配置寄存器 0x​​3C/0x3D（中断线）= 0xE/0x2
*   在 DOS 中，中断模式是 PIC 模式（8259 模式）和基于引脚的（MSIE=0）

**5）**显示tick的值，发现还是**“0”** ...

因此我认为 MyISR() 没有被正确调用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:36:14.793

自从我摆弄中断以来已经有一段时间了，但是该表是一个指针，用于设置处理器应该去哪里处理中断。我可以给你过程，但不能给你代码，因为我只用过 8086 代码。

伪代码：

```
Initialize:
    Get current vector - store value
    Set vector to point to the entry point of your routine 
```

下一个：

```
Process Interrupt:
    Your code decides what to do with data
    If it's your data:
        process it, and return
    If not:
        jump to the stored vector that we got during initialize, 
        and let the chain of interrupts continue as they normally would 
```

最后：

```
Program End:
    check to see if interrupt still points to your code
        if yes, set vector back to the saved value
        if no, set beginning of your code to long jump to vector address you saved, 
            or set a flag that lets your program not process anything 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T05:02:01.427

尝试分别使用[DPMI 函数 0204h](http://dos32a.narechk.net/manual/html/prog/int31h/0204.htm)和[0205h](http://dos32a.narechk.net/manual/html/prog/int31h/0205.htm)而不是 '_dos_getvect' 和 '_dos_setvect'。

程序的运行环境是 DOS32A 或 DPMI 服务器/主机。所以使用他们提供的 api 而不是使用 DOS int21h 设施。但是 DOS32A 确实会拦截 int21h 中断，因此就实模式而言，您的代码应该可以正常工作。

实际上，您所做的只是使用“_dos_getvect”和“_dos_setvect”函数为 IRQ14安装*实模式中断处理程序。*

通过使用 DPMI 函数，您可以为 IRQ14 安装*保护模式*中断处理程序，并且 DOS32a 将自动将 IRQ14 中断传递给此保护模式处理程序。

回想一下：当 IRQ 被断言时，dos 扩展器/DPMI 服务器可以处于保护模式或实模式。

这是因为您的应用程序使用了一些 DOS 或 BIOS API，因此扩展程序需要切换到实模式来执行它们并返回到保护模式以将控制权转移给您的保护模式应用程序。

DOS32a 通过分配一个实模式回调（至少对于硬件中断）来做到这一点，如果在扩展器处于实模式时断言 IRQ14，它将调用您的保护模式处理程序。

如果扩展器处于保护模式，而 IRQ14 被断言，它将自动将控制权转移到您的 IRQ14 处理程序。

但是如果你没有为你的 IRQ 安装保护模式处理程序，那么 DOS32a 将不会分配任何实模式回调，并且你的实模式 irq 处理程序可能无法获得控制。但它应该接收控制 AFAIK。

无论如何试试上面的两个功能。正如肖恩所说，并*链接*到以前的 int76h 中断处理程序。

简而言之：

对于 DOS32a，您不需要使用 '_dos_getvect' 和 '_dos_setvect' 函数。而是使用 DPMI 函数 0204h 和 0205h 来安装您的保护模式 IRQ 处理程序。

一个建议：在您的中断处理程序中，第一步应该是检查*您的设备是否实际产生了中断*，或者它是共享此 irq 的其他设备（在您的情况下为 IRQ14）。您可以通过检查设备中的*“中断挂起位”*来执行此操作，如果已设置，请服务您的设备并链接到下一个处理程序。如果未设置为 1，则只需链接到下一个处理程序。

**已编辑：** 使用[最新](http://dos32a.narechk.net/content/download.html)版本的 DOS32a，而不是 OW 附带的版本。

**2012-08-14 更新：**

是的，您可以使用 FP_SEG 和 FP_OFF 宏来分别获取选择器和偏移量，就像在实模式下使用这些宏来获取段和偏移量一样。

您还可以使用 MK_FP 宏从选择器和偏移量创建远指针。例如。MK_FP（选择器，偏移量）。

在 C 中编写处理程序时，您应该使用“__interrupt”关键字声明您的中断处理程序。

这是一个片段：

```
 #include <i86.h>  /* for FP_OFF, FP_SEG, and MK_FP in OW */

             /* C  Prototype for your IRQ handler */
             void   __interrupt    __far irqHandler(void);
                        .
                        . 
                        .
          irq_selector = (unsigned short)FP_SEG( &irqHandler );
          irq_offset = (unsigned long)FP_OFF( &irqHandler );

          __dpmi_SetVect( intNum, irq_selector, irq_offset );
                        .
                        . 
                        . 
```

或者，试试这个：

```
 extern void sendEOItoMaster(void);  
          # pragma aux sendEOItoMaster = \                         
                "mov  al,    0x20"  \       
                "out  0x20,  al"    \       
                modify [eax] ;

          extern void sendEOItoSlave(void);  
          # pragma aux sendEOItoSlave = \                           
              "mov  al,    0x20"  \       
              "out  0xA0,  al"    \       
              modify [eax] ;

      unsigned int   old76_selector, new76_selector;
      unsigned long  old76_offset, new76_offset;

      volatile int chain = 1; /* Chain to the old handler */
      volatile int tick=0;  // global and volatile...

     void (__interrupt __far *old76Handler)(void) = NULL;      // function pointer declaration

     void __interrupt __far new76Handler(void) {

            tick = 5;  // simple code to change the value of tick...

               .
               .
               .

           if( chain ){

                 // disable irqs if enabled above.

                 _chain_intr( old76Handler );  // 'jumping' to the old handler

                //  ( *old76Handler )();          // 'calling' the old handler 

           }else{

               sendEOItoMaster();
               sendEOItoSlave();
           }

      }

      __dpmi_GetVect( 0x76, &old76_selector, &old76_offset );

      old76Handler = ( void (__interrupt __far *)(void) ) MK_FP (old76_selector, old76_offset)

      new76_selector = (unsigned int)FP_SEG( &new76Handler );
      new76_offset = (unsigned long)FP_OFF( &new76Handler );

      __dpmi_SetVect( 0x76, new76_selector, new76_offset );

                    .
                    . 
```

笔记：

您应该首先仔细检查您要挂接的 IRQ# 是否*真的*分配/映射到相关 PCI 设备的中断引脚。IOWs，首先从 PCI 配置空间读取*“中断线寄存器”*（不是中断引脚寄存器），然后只钩住那个 irq#。在您的情况下，此寄存器的有效值是：0x00 到 0x0F（含），0x00 表示 IRQ0，0x01 表示 IRQ1，依此类推。

POST/BIOS 代码在启动时在“中断线路寄存器”中写入一个值，并且您不得不惜一切代价修改此寄存器。（当然，除非您正在处理 OS 编写器将处理的中断路由问题）

您还应该使用 DPMI 调用 0204h 获取并保存旧处理程序的选择器和偏移量，以防您链接到旧处理程序。如果没有，请不要忘记将 EOI（中断结束）发送到主 PIC 和从 PIC，以防您连接了属于从 PIC（即 INT 70h 到 77h，包括 INT 0Ah）的 IRQ，并且只发送到主 PIC万一你挂了一个属于主 PIC 的 IRQ。

在平面模型中，BASE 地址为 0，Limit 为 0xFFFFF，其中 G 位（即粒度位）=1。

基数和限制（连同段的属性位（例如G位））驻留在对应于特定段的描述符中。描述符本身位于描述符表中。

描述符表是一个数组，每个条目为 8 个字节。

选择器只是描述符表（GDT 或 LDT）中 8 字节描述符条目的指针（或索引）。所以选择器不能为 0。

请注意，16 位选择器的最低 3 位具有特殊含义，只有高 13 位用于索引描述符表中的描述符条目。

GDT = 全局描述符表

LDT = 本地描述符表

一个系统只能有一个 GDT，但可以有多个 LDT。

作为 GDT 中的条目号 0，是保留的，不能使用。AFAIK，DOS32A 不会为其应用程序创建任何 LDT，而是在 GDT 本身中简单地分配和初始化与应用程序相对应的描述符条目。

选择器不得为 0，因为当您尝试使用该选择器访问内存时，x86 架构认为 0 选择器无效；尽管您可以成功地将 0 放在任何段寄存器中，但只有当您尝试访问（读/写/执行）该段时，cpu 才会生成异常。

在中断处理程序的情况下，基地址不必为 0，即使在平面模式下也是如此。DPMI 环境必须有这样做的正当理由。毕竟，您仍然需要在 x86 架构中的某个级别解决分段问题。

```
 PCI device config register 0x5 bit2(Interrupt Disabled) = 0

                  PCI device config register 0x6 bit3(Interrupt status) = 1 
```

我认为，您的意思分别是总线主命令和状态寄存器。它们实际上驻留在 I/O 空间或内存空间中，但不在 PCI 配置空间中。因此，您可以通过 IN/OUT 或 MOV 指令直接读取/写入它们。

对于读/写，PCI 配置寄存器必须使用配置红/写方法或 PCI BIOS 例程。

笔记：

许多 PCI 磁盘控制器都有一个称为“中断启用/禁用”位的位。包含该位的寄存器通常位于 PCI 配置空间中，可以从数据表中找到。

实际上，此设置是为了将连接到 PCI 控制器的设备产生的中断“转发”到 PCI 总线。

如果通过该位禁用中断，那么即使您的设备（连接到 PCI 控制器）正在生成中断，中断也不会转发到 PCI 总线（因此 cpu 永远不会知道是否发生了中断），但是中断PCI控制器中的位（该位与'中断启用/禁用'位不同）仍然设置为通知设备（连接到PCI控制器，例如硬盘）产生了中断，以便程序可以读取该位并采取适当的行动。从编程的角度来看，它类似于轮询。

这通常只适用于非总线主机传输。

但是，您似乎正在使用总线主机传输（即 DMA），所以它不应该适用于您的情况。

但无论如何，我建议你仔细阅读 PCI 控制器的数据表，特别是寻找与中断处理相关的位/寄存器

**编辑：**

好吧，就应用程序级编程而言，您不需要遇到/使用 _far 指针，因为您的程序不会访问代码之外的任何内容。

但这并不完全正确，当你进行系统级编程时，你需要访问内存映射的设备寄存器、外部 ROM，或者实现中断处理程序等。

故事在这里发生了变化。段的创建，即分配描述符并获取其关联的选择器，确保即使代码中存在错误，它也不会令人讨厌地更改当前代码正在执行的特定段之外的任何内容。如果它试图这样做，cpu 将产生一个故障。因此，当访问外部设备（尤其是内存映射设备的寄存器），或访问一些 rom 数据，例如 BIOS 等时，分配一个描述符并根据您需要执行的区域设置基数和段限制是个好主意/读/写并继续。但你不一定要这样做。

一些驻留在例如 rom 中的外部代码假定它们将通过远调用调用。

正如我之前所说，在 x86 架构中，在某个级别（越往下）你需要处理分段，因为没有办法完全禁用它。但是在平面模型中，正如我上面所说，在访问外部（对您的程序）事物时，分段是作为程序员的一种帮助而存在的。但是，如果您不想这样做，则无需使用。

当调用中断处理程序时，它不知道被中断程序的基本和限制。它不知道被中断程序的段属性、限制等，我们说除了 CS 和 EIP 之外的所有寄存器都处于未定义状态 wrt 中断处理程序。因此需要将其声明为 far 函数，以表明它位于当前正在执行的程序之外的某个地方。

# java - 在 ColdFusion 中规范化字符串

> ID：11626050
> 
> 赞同：4
> 
> 时间：2012-07-24T07:27:18.847
> 
> 标签：java, string, class, coldfusion, normalization

我正在尝试规范化 ColdFusion 中的字符串。

我想为此使用 Java 类`java.text.Normalizer`，因为据我所知，CF 没有任何类似的功能。

这是我当前的代码：

```
<cfset normalizer = createObject( "java", "java.text.Normalizer" ) />
<cfset string = "äéöè" />
<cfset string = normalizer.normalize(string, createObject( "java", "java.text.Normalizer$Form" ).NFD) />
<cfset string = ReReplace(string, "\\p{InCombiningDiacriticalMarks}+", "") />
<cfoutput>#string#</cfoutput> 
```

任何想法为什么它总是输出`äéöè`而不是标准化字符串？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T10:36:14.880

在 ColdFusion 中，与 Java 不同，您不需要在字符串文字中转义反斜杠。您当前的正则表达式不会匹配不以反斜杠开头的任何内容，因此不会发生替换。

除此之外，您的代码完全正确，您可以看到输出时字符串的长度是 8，而不是 4。这是`normalize`调用的效果。

但是，请记住，它仍然是原始字符串的等效表示，因此您无法从视觉上区分差异也就不足为奇了。这是正确的 Unicode 渲染。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T03:20:37.277

你`"\\p"`应该只是`"\p"`. Cf 的 ReReplace() 会自动为您转义反斜杠，因此您`"\\p"`的 java 端被解释为`"\\\\p"`

一个班轮：

```
<cfscript>
var k = "mike's café";
k = createObject( 'java', 'java.text.Normalizer' ).normalize( k, createObject( 'java', 'java.text.Normalizer$Form' ).valueOf('NFD') ).replaceAll('\p{InCombiningDiacriticalMarks}+','').replaceAll('[^\p{ASCII}]+','');
// k is now "mike's cafe"
</cfscript> 
```

[http://www.cfquickdocs.com/cf9/#rereplace](http://www.cfquickdocs.com/cf9/#rereplace)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-14T14:58:40.423

我推荐使用像 Junidecode 这样的 Java 库。 [https://github.com/gcardone/junidecode](https://github.com/gcardone/junidecode)

它将 UTF8 和 UTF16 字符串转换为 ASCII7。例子：

*   äéöè = aeoe
*   迈克的咖啡馆 = 迈克的咖啡馆
*   ℡ = 电话
*   北亰 = 北京
*   まさゆき たけだ 先生 = 武田正之先生
*   ⠏⠗⠑⠍⠊⠑⠗ = 总理
*   ราชอาณาจักรไทย = raach`aanaacchakraithy
*   Ελληνικά = Ellenika
*   Москвa = 莫斯科
*   Հայաստան = 哈亚斯坦
*   ℰℳℒℰ = 例子

我分享了一个完整的基于 ColdFusion 的演示（需要 Junidecode JAR 文件）： [https ://dev.to/gamesover/convert-unicode-strings-to-ascii-with-coldfusion-junidecode-lhf](https://dev.to/gamesover/convert-unicode-strings-to-ascii-with-coldfusion-junidecode-lhf)

这是代码功能：

```
<cfscript>
function JUnidecode(inputString){
    var JUnidecodeLib = "";
    var response = "";
    var temp = {};
    temp.encoder = createObject("java", "java.nio.charset.Charset").forName("utf-8").newEncoder();
    temp.isUTF = temp.encoder.canEncode(arguments.inputString);
    if (temp.isUTF){
        /* NFKC: UTF Compatibility Decomposition, followed by Canonical Composition */
        temp.normalizer = createObject( "java", "java.text.Normalizer" );
        temp.normalizerForm = createObject( "java", "java.text.Normalizer$Form" );
        arguments.inputString = temp.normalizer.normalize( javaCast( "string", arguments.inputString ), temp.normalizerForm.NFKC );
    }
    try {
        JUnidecodeLib = createObject("java", "net.gcardone.junidecode.Junidecode");
        response = JUnidecodeLib.unidecode( javacast("string", arguments.inputString) );
    } catch (any e) {
        response = "ERROR: JUnidecode is not installed";
    }
    return trim(Response.replaceAll("\[\?\]", ""));
}
function isDiff(compareArr, val, pos){
    return (pos GT arrayLen(comparearr) OR comparearr[pos] neq val);
}
</cfscript> 
```

# asp.net-mvc - 使用 Linq-To-Sql 计算用户的书籍

> ID：11626055
> 
> 赞同：-1
> 
> 时间：2012-07-24T07:27:47.763
> 
> 标签：asp.net-mvc, linq, linq-to-sql

我是 linq 的新手，我有一个简单的问题。我必须计算有多少本书有用户。我知道这很容易，但我做不到。

//数据库

![在此处输入图像描述](../Images/67fddbb4779c56ad821e717dcb7ad57e.png)

```
public List<UserViewModel> GetAllUsers()
{
    var result = from u in databaseContext.User
                    select new UserViewModel
                    {
                        UserId = u.UserId,
                        LastName = u.LastName,
                        FirstName = u.FirstName,
                        BirthDate = u.BirthDate,
                        Email = u.Email,
                        Phone = u.Phone,
                        AddDate = u.AddDate,
                        ModifiedDate = u.ModifiedDate,
                        IsActive = u.IsActive,  

                    };
    return result.ToList();
} 
```

这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:14:04.737

在您的模型中，似乎每个 Borrow 都有一本书与之关联。如果是这种情况并且书籍不能多次使用（这也应该是正确的），那么您需要做的就是：

```
int count = context.Users.First(x=>x.UserId = 1).Borrow.Count(); 
```

这样，您可以计算给定用户的所有借阅，假设它们都与一本书相关联。

如果两次借阅可以有同一本书，那么您应该将此查询稍微重写为：

```
int count = db.Borrow.Where(x => x.UserID== 1).Select(x => x.BookId).Distinct().Count(); 
```

这样，您将仅获得从 id 为 1 的用户借来的唯一书籍。

要仅计算未归还的唯一书籍，请使用以下命令：

```
int count = db.Borrow.Where(x => x.UserID== 1 && x.IsReturned == false).Select(x => x.BookId).Distinct().Count(); 
```

# android - setRetainInstance(true) 是处理在配置更改（屏幕翻转）时丢失显示/隐藏的片段的最佳方法吗？

> ID：11626058
> 
> 赞同：2
> 
> 时间：2012-07-24T07:27:59.747
> 
> 标签：android, android-fragments

当活动重新启动时，隐藏的所有片段再次显示。通过将此属性设置为 true，片段将保留其实例。这对我来说看起来很奇怪，我不明白为什么默认情况下没有设置这种行为。这是最好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:33:05.920

不确定您的“什么是最好的方法”的问题是否有一个单一的答案，但我已经评论了类似的“这是如何工作的”问题。[此讨论](https://stackoverflow.com/questions/11595030/is-it-a-good-practice-to-user-fragment-setretaininstance-to-not-handle-recreatio/11628850#11628850)可能会帮助您决定是申请`setRetainInstance(true)`还是申请`setRetainInstance(false)`。`v4.support*`请注意，在使用库时，此方法存在兼容性问题。我同意保留实例并不是很多情况下的最佳前进方式。

# html - 如何将页面向下移动 50px，而不会产生副作用

> ID：11626067
> 
> 赞同：0
> 
> 时间：2012-07-24T07:28:19.277
> 
> 标签：html

我正在开发某种网站构建器项目，我可以将页面置于编辑模式。然后内容向下移动 50px 并显示“编辑栏”。听起来很容易但是

*   背景没有向下移动（用 background-position-y: 550px 固定）；
*   绝对位置错误

这就是为什么我越来越害怕将网站向下移动 50px 会破坏整个布局。这真的会发生还是我只是反应过度？

将页面放入iFrame可能会更好，但是我遇到了跨框架通信的问题......

BR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:36:01.537

将背景和除编辑栏之外的所有内容放在容器 div 中然后移动该 div 怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:57:34.100

I'm not sure these will help, but just try to gather more ideas for you:

*   you can use the method `Ken` mentioned.
*   preserve the 50px space on top, and hide the editbar, when it is in edit mode, show the edit bar,
*   place the edit bar on the bottom.

# hbm2ddl - hibernate3:hbm2ddl 目标没有 jdbc 连接

> ID：11626073
> 
> 赞同：0
> 
> 时间：2012-07-24T07:28:32.153
> 
> 标签：hbm2ddl, hibernate3, hibernate3-maven-plugin

我正在尝试为使用 hibernate-3.4.0.GA 的应用程序创建 ddl 脚本。这是我的 pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.apprick.webservice</groupId>
<artifactId>apprickwebapp</artifactId>
<packaging>war</packaging>
<version>1.0-SNAPSHOT</version>
<name>webapp Maven Webapp</name>
<url>http://maven.apache.org</url>

<dependencies>

    <!-- MySQL database driver -->
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.21</version>
    </dependency>

    <!-- Hibernate framework -->
    <dependency>
        <groupId>hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>3.4.0.GA</version>
    </dependency>

    <!-- Hibernate library dependecy start -->
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.6.6</version>
    </dependency>

    <dependency>
        <groupId>dom4j</groupId>
        <artifactId>dom4j</artifactId>
        <version>1.6.1</version>
    </dependency>

    <dependency>
        <groupId>commons-logging</groupId>
        <artifactId>commons-logging</artifactId>
        <version>1.1.1</version>
    </dependency>

    <dependency>
        <groupId>commons-collections</groupId>
        <artifactId>commons-collections</artifactId>
        <version>3.2.1</version>
    </dependency>

    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib</artifactId>
        <version>2.2</version>
    </dependency>
    <!-- Hibernate library dependecy end -->

    <dependency>
        <groupId>javax.transaction</groupId>
        <artifactId>jta</artifactId>
        <version>1.1</version>
    </dependency>

    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
    </dependency>

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.1</version>
        <scope>test</scope>
    </dependency>
</dependencies>

<build>
    <plugins>

        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>

        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>hibernate3-maven-plugin</artifactId>
            <version>2.2</version>
            <configuration>
                <components>
                    <component>
                        <name>hbm2ddl</name>
                        <implementation>annotationconfiguration</implementation>
                    </component>
                </components>
                <componentProperties>
                    <drop>true</drop>
                    <configurationfile>src/main/resources/hibernate.cfg.xml</configurationfile>
                </componentProperties>
            </configuration>
            <dependencies>
                <dependency>
                    <groupId>mysql</groupId>
                    <artifactId>mysql-connector-java</artifactId>
                    <version>5.1.8</version>
                </dependency>
            </dependencies>
        </plugin>

    </plugins>
    <finalName>webapp</finalName>
</build>
</project> 
```

由于我使用的是hibernate 3.4.0-GA，整个项目都是基于注释的，所以我的项目中没有persistence.xml。hibernate.cfg.xml文件是这样的

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
  <session-factory>
    <property name="hibernate.bytecode.use_reflection_optimizer">false</property>
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.connection.password">password</property>
    <!-- <property name="hibernate.connection.url">jdbc:mysql://localhost/apprick_db</property> -->
    <property name="hibernate.connection.username">rsingh</property>
    <property name="hibernate.connection.password">welcome</property>
    <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="show_sql">true</property>
    <!-- <property name="hbm2ddl.auto">create</property> -->
    <mapping class="com.apprick.common.User"></mapping>
    <mapping class="com.apprick.common.Customer"></mapping>
    <mapping class="com.apprick.common.ApprickAdmin"></mapping>
  </session-factory>
</hibernate-configuration> 
```

现在当我运行 mvn hibernate3:hbm2ddl 我得到以下异常

```
java.lang.UnsupportedOperationException: The user must supply a JDBC connection
at org.hibernate.connection.UserSuppliedConnectionProvider.getConnection(UserSuppliedConnectionProvider.java:54)
at org.hibernate.tool.hbm2ddl.ManagedProviderConnectionHelper.prepare(ManagedProviderConnectionHelper.java:52)
at org.hibernate.tool.hbm2ddl.SchemaExport.execute(SchemaExport.java:252)
at org.hibernate.tool.hbm2ddl.SchemaExport.create(SchemaExport.java:211)
at org.codehaus.mojo.hibernate3.exporter.Hbm2DDLExporterMojo.doExecute(Hbm2DDLExporterMojo.java:112)
at org.codehaus.mojo.hibernate3.HibernateExporterMojo.execute(HibernateExporterMojo.java:152)
at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352) 
```

谁能给我建议一个解决方案。自从过去两天以来，我一直在努力完成这项工作，这完全让我发疯。

感谢您阅读这篇文章，我感谢您的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T12:10:25.497

我希望你现在明白了。但如果你没有这里是一个提示：

那个部分

```
<componentProperties>
   <drop>true</drop>
   <configurationfile>src/main/resources/hibernate.cfg.xml</configurationfile>
</componentProperties> 
```

是错误的，因为您指定了完整路径

```
<configurationfile>hibernate.cfg.xml</configurationfile> 
```

就足够了，只要文件 hibernate.cfg.xml 位于你的根 Classpath 中（即 WEB-INF/classes）

# javascript - 如何检测 tumblr 用户是否登录？

> ID：11626074
> 
> 赞同：4
> 
> 时间：2012-07-24T07:28:34.030
> 
> 标签：javascript, login, tumblr

我正在写一个主题，只想向博客的管理员显示内容，但我不知道如何检测管理员是否已登录。

我确实注意到在 HTML 的底部，就在结束 body 标记之前有以下代码：

```
<iframe src="http://assets.tumblr.com/iframe.html?10&src=http%3A%2F%2Fstaff.tumblr.com%2F&amp;lang=en_US&amp;name=staff" scrolling="no" width="330" height="25" frameborder="0" style="position:absolute; z-index:1337; top:0px; right:0px; border:0px; background-color:transparent; overflow:hidden;" id="tumblr_controls"></iframe>
<!--[if IE]>
<script type="text/javascript">document.getElementById('tumblr_controls').allowTransparency=true;</script>
<![endif]-->
<script type="text/javascript">_qoptions={qacct:"p-19UtqE8ngoZbM"};</script>
<script type="text/javascript" src="http://edge.quantserve.com/quant.js"></script>     
<noscript><img src="http://pixel.quantserve.com/pixel/p-19UtqE8ngoZbM.gif" style="display:none; border-width:0px; height:1px; width:1px;" alt=""/></noscript> 
```

(http://assets.tumblr.com/iframe.html?10&src=http%3A%2F%2Fstaff.tumblr.com%2F&lang=en_US&name=staff)中的 URL`iframe`会指向一个页面，该页面会自行检查用户已登录。我只是无法弄清楚它是如何工作的。

因为这个检查需要嵌入到主题的代码中，所以它必须在 JavaScript 中。

谢谢，斯宾塞

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T10:03:40.613

我认为问题无法解决，因为必须在服务器上进行此检查，并且由于**[Tumblr 主题](http://www.tumblr.com/docs/ru/custom_themes)**引擎的限制无法进行检查。

**更新：返回 JS 版本**

## iframe 列表：

*   [未登录用户的 Tumblr iframe](http://pastebin.com/KM4CV1z4)
*   [登录用户的 Tumblr iframe [所有者]](http://pastebin.com/JwgCyKvW)
*   [登录用户的 Tumblr iframe [非所有者]](http://pastebin.com/kemFJpdD)

## 这些 iframe 的不同代码块：

### 未登录用户的 Tumblr iframe：

```
<script type="text/javascript">
        var logged_in = (document.cookie.indexOf('logged_in=1') != -1);
</script>
…
<div style="position:absolute; top:3px; right:3px; white-space:nowrap; height:20px;">
    <span id="logged_out_controls" style="display:none;">
        <a href="https://www.tumblr.com/register" target="_top" id="follow_link">
                <img id="follow_image" alt="Follow" style="width:58px;"/>
        </a>
        <a href="https://www.tumblr.com/register/join_tumblr" target="_blank"
        id="join_link">
                <img id="join_image" alt="Join Tumblr" style="width:105px;"/>
        </a>
    </span>
</div> 
```

### 登录用户的 Tumblr iframe [所有者]：

```
<div style="position:absolute; top:3px; right:3px; white-space:nowrap; height:20px;">
    <a target="_top" href="http://www.tumblr.com/customize?redirect_to=http%3A%2F%2Fexample.com%2F">
        <img src="http://assets.tumblr.com/images/iframe_customize_alpha.png?1016" alt="Customize" style="height:20px;width:80px; border-width:0px; display:block; float:left; cursor:pointer;" />
    </a>
    <a target="_top" href="http://www.tumblr.com/dashboard">
        <img src="http://assets.tumblr.com/images/iframe_dashboard_alpha.png?1016" alt="Dashboard" style="height:20px; width:81px; border-width:0px; display:block; float:left; cursor:pointer;" />
    </a>
</div> 
```

### 登录用户的 Tumblr iframe [非所有者]：

```
<div style="position:absolute; top:3px; right:3px; white-space:nowrap; height:20px;">
    <form action="/follow" method="post" style="display:block; float:left;"onsubmit="_gaq.push(['_trackEvent', 'Iframe', 'Follow', 'example-com');">
        <input type="hidden" name="form_key" value="83jbGySgEVpQGOoZALqqoSaKfjs"/>
        <input type="hidden" name="id" value="example-com"/>
        <input type="image" src="http://assets.tumblr.com/images/iframe_follow_alpha.png?1016"style="width:58px; height:20px; border-width:0px; display:block;margin-left:3px; cursor:pointer;"alt="Follow"/>
    </form>
    <a target="_top" href="http://www.tumblr.com/dashboard">
        <imgsrc="http://assets.tumblr.com/images/iframe_dashboard_alpha.png?1016" alt="Dashboard" style="height:20px; width:81px; border-width:0px; display:block; float:left; cursor:pointer;"/>
    </a>
</div> 
```

## 可以检测到的差异：

### **未记录的**iframe有奇怪的脚本行：

*   var logged_in = (document.cookie.indexOf('logged_in=1') != -1);

*   没有包含“自定义”模式的**属性**链接`href`（CSS 方式：）`a[href*='customize']`；

*   没有包含“仪表板”模式的**属性**链接`href`（CSS 方式：）`a[href*='dashboard']`；

### **登录**用户的 iframe **[所有者]**：

*   属性链接`href`包含“仪表板”模式（CSS方式：）`a[href*='dashboard']`；
*   与`href`属性的链接包含“自定义”模式（CSS 方式：）`a[href*='customize']`；

*   没有“**跟随** *”*形式；

### **登录**用户的iframe **[非所有者]**：

*   属性链接`href`包含“仪表板”模式（CSS方式：）`a[href*='dashboard']`；
*   有*“跟随”*形式；

*   没有包含“自定义”模式的**属性**链接`href`（CSS 方式：）`a[href*='customize']`；

## 结论

但是我发现这个解决方案非常脆弱，我认为可以根据上面列出的**差异****检测**当前博客的用户所有者。

# asp.net - aspx 页面“Eval”语法中的资源文件

> ID：11626080
> 
> 赞同：0
> 
> 时间：2012-07-24T07:28:41.480
> 
> 标签：asp.net, syntax, localization, globalization

```
<asp:TemplateField>
    <ItemTemplate>
        <a id="btnShowPopup" runat="server" class="thickbox" title='<%# Eval("DB_TRAK_NO", "Details for Trak No.  {0}") %>>
            View
        </a>
    </ItemTemplate>
    <HeaderStyle VerticalAlign="Middle" />
</asp:TemplateField> 
```

我的全局资源文件名为 Resource.resx 和 Resource.zh-CN.resx，资源文件中“Trak No 的详细信息”的键是“DetailsforTrakNo”。当文化是中国的时候，我怎么能推动汉字。我不知道在锚标签中写标题的语法。你能帮我吗？

问候， 阿比

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T07:33:22.973

您应该尝试[<%$ Resources:YourResourceTypeName, Key %>](http://msdn.microsoft.com/en-us/library/ms227427.aspx)语法来添加全局资源表达式。

```
title='<%$ Resources:Resource, DetailsforTrakNo %>' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T08:05:24.213

你也可以使用

```
Text='<%#Eval(GetLocalResourceObject("gvstrCompanyName").ToString())%>' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-13T17:04:04.747

```
<a id="btnShowPopup" runat="server" class="thickbox" title='<%$ Resource:Resources, DetailsforTrakNo %>'>
    View
</a> 
```

# jquery - 触发子控件的单击事件

> ID：11626083
> 
> 赞同：0
> 
> 时间：2012-07-24T07:28:47.240
> 
> 标签：jquery

我的标记如下：

```
<li><span>..</span>
   <input type="button" id="clickme" Value="click ME" />
</li> 
```

我的问题是如何使用 jquery 自动触发 li 的输入子项（按钮）的单击事件

我不想通过它的 id 访问按钮我想通过 .children() 方法访问它。我试图这样做，但没有奏效：

```
<li id="liID"><span>...</span><input type="button" id="clickme" value="click ME" />

$("#liID").children("input").trigger('click'); 
```

但这没有用：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:31:01.403

您可以使用

```
$('#clickme').trigger('click'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:31:13.817

您可以使用`trigger()`方法：

> 执行所有附加到给定事件类型的匹配元素的处理程序和行为。

```
$('li input').trigger('click'); 
```

或者：

```
$('#clickme').click() 
```

关闭`li`标签并尝试使用`find()`方法：

```
<li id="liID"><span>...</span><input type="button" id="clickme" value="click ME" /></li> 
```

```
$("#liID").find("input").trigger('click'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T07:32:08.130

你可以说：

```
$('#clickme').click(); 
```

这是一个快捷方式：

```
$('#clickme').trigger('click'); 
```

有关更多信息，请参阅 jQuery API 文档[`.click()`](http://api.jquery.com/click/)和[`.trigger()`](http://api.jquery.com/trigger/).

**编辑：**您似乎是说您想通过父 li 元素的 id 选择输入。如果是这样，如果您不想依赖输入作为直接子项，请执行以下操作：

```
$("#liID").find("input").click();
// OR
$("#liID input").click(); 
```

或者，如果您只想选择直接子项的输入，您的代码应该可以工作：

```
$("#liID").children("input").trigger('click'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T08:11:56.143

您实际上是在尝试以编程方式单击按钮，还是只是触发一些附加到其单击事件的 Javascript？两者不同：

要触发附加到点击事件的一些 JS，您可以简单地执行类似的操作

```
$('input', '#liID').click();
$('#liID').children('input').trigger('click');
etc 
```

但是，据我所知，实际上不可能用 JS 伪造点击事件。您可以触发附加到事件处理程序的 JS，但是如果您正在寻找默认功能，我认为没有任何可靠的方法可以做到这一点，因此您最好创建一个 JS 函数并将其附加到点击输入事件。然后你可以以编程方式触发它。

# php - 在处理会话时我们必须使用 mysql_real_escape_string() 吗？

> ID：11626084
> 
> 赞同：1
> 
> 时间：2012-07-24T07:28:48.023
> 
> 标签：php, mysql, session, mysql-real-escape-string

请看下面的代码：

```
$username = $_POST['username'];
$_SESSION['user_name'] = $username; 
```

`mysql_real_escape_string()`我在设置`$username`值时也必须使用函数吗？如果我不这样做，这里有什么威胁吗？

**注意：**当我想使用 MySQL 时，我使用了 PDO。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T07:31:27.717

不，你不需要在那里以任何方式逃避它。仅当您将文本与某些字符可能具有特殊含义的其他文本连接时，才需要对文本进行转义。请参阅[伟大的逃避现实（或：使用文本中的文本需要知道的内容）](http://kunststube.net/escapism/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T07:30:46.730

您不必这样做，仅当您想转义字符以将其输入数据库时​​才使用它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-24T07:31:04.800

mysql_real_escape_string() 用于安全目的，因此用户无法进行 SQL 注入。如果您不使用`$_SESSION['user_name']`或`$username`用于数据库，则不需要使用它。你可以在这里阅读更多 - [http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

mysql_real_escpae_string() 为每个特殊字符添加反斜杠。

此外，您应该检查一些 SQL 注入示例，以便了解它是如何完成的，以及 mysql_real_escape_string() 究竟阻止了什么 - [http://www.unixwiz.net/techtips/sql-injection.html](http://www.unixwiz.net/techtips/sql-injection.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T07:34:05.570

您不必这样做，因为会话数据只能在服务器上进行操作。

如果您**知道**那里有要在查询中使用的数据并且有需要转义的字符，那么显然您应该确保发生这种情况。

您在包含任何 qry 语言（如“OR 1 = 1”）的会话中存储的任何值基本上都归结为糟糕的应用程序设计 IMO - 会话中任何可能使您面临安全漏洞的值都是您自己的错 - 只要确保它可以完成不了。

# c# - 创建用于监视数据库连接 reg 的库文件

> ID：11626086
> 
> 赞同：1
> 
> 时间：2012-07-24T07:28:59.943
> 
> 标签：c#, .net

我需要创建一个库文件，该库文件将与预编译文件的 bin 文件夹一起放置。

因此，当在该预编译文件中打开任何数据库连接时，数据库连接必须到达该库文件并遵循我的某些规则并返回它。

例如：让我们考虑一个使用发布网站部署的 Web 项目。现在我需要将自己的项目`dll`放入该 bin 文件夹中，只要在该项目中打开连接时，传递的连接字符串必须由我的库读取文件，即在那里我可以更改连接字符串中的一些值（即数据库名称等......）是否可以这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:06:03.473

因此，您想将 .dll 放入项目的 bin 文件夹中，然后使该 dll “拾取”与项目内部建立的数据库的任何连接，对吗？那么您希望能够操纵所使用的连接字符串吗？

你也可以编辑主项目吗？即进行主项目调用并使用.dll 文件？如果是这样，您可以将整个连接逻辑封装到 .dll 中。否则，这听起来相当困难。

如果您无法更改主项目中的任何内容，则至少需要一个完全独立的程序来坐下来“监听”连接。然后，您将需要一些方法来拦截来自主项目的连接，但即便如此，获取连接字符串、操作它并更改主项目使用它的方式听起来……具有挑战性。

你到底想在这里做什么？我建议尝试将所有 DB 连接内容放在单独的 .dll 中，并将其用作库，或者寻找其他形式的配置解决方案来解决您的问题（即在用于不同情况的通用配置文件...？）

# objective-c - 使用 NSArray 时出现 NSInvalidArgumentException

> ID：11626094
> 
> 赞同：0
> 
> 时间：2012-07-24T07:29:58.280
> 
> 标签：objective-c, ios, xcode, ios5

我正在为 iOS 5 开发 iPhone 应用程序，但遇到了数组问题。我有一个自定义类，我称之为 Persons。Persons 由两个数组组成。一个给男孩，一个给女孩。首先，我想使用另一个类的方法来填充 Persons 对象，我很确定这可以正常工作。但是，当我要在代码中将数组从 Persons 对象拆分为单个数组时，它不起作用。感觉就像 Persons 对象，或者它的数组以某种方式被卡住了。请帮忙。这段代码向我抛出了一个错误，如下所示：`2012-07-24 09:29:03.073 PersonApp[4375:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFDictionary Boys]: unrecognized selector sent to instance 0x6ac0fe0'`

**人员.h**

```
#import <Foundation/Foundation.h>

@interface Persons : NSObject {
    NSArray *Boys;
    NSArray *Girls;
}

@property (nonatomic, copy) NSArray *Boys;
@property (nonatomic, copy) NSArray *Girls;

@end 
```

**PersonsViewController.h**

```
#import <UIKit/UIKit.h>
#import "Persons.h"

@interface PersonsViewController : UITableViewController

@property (nonatomic, strong) Persons *persons;

@end 
```

**PersonsViewController.m**

```
#import "PersonsViewController.h"

NSArray *boys;
NSArray *girls;
...................
@synthesize persons;     
...................
Communication *comm = [[Communication alloc] init];    
self.persons = [comm getPersons];
boys = [self.persons Boys];
girls = [self.persons Girls]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:34:30.097

[comm getPersons] 返回的是什么？我认为它不是“人”对象。试试这个代码。

```
if ([[comm getPersons] isKindOfClass:[Persons class]])
{
   NSLog(@"Not returning Persons object. So this is the error!");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:19:46.710

........我在这里可能是错的，

但是你有没有尝试过类似的东西

```
NSArray *boys = [[[NSArray alloc] initWithArray[[comm getPersons]boys]autorelease]; 
```

很抱歉，距离我上次打开 Xcode 已经过去了几个星期，所以对于任何代码错误，我们深表歉意，

您是否正在为 NSArray 初始化/分配内存，执行类似的操作

```
NSLog(@"count %d",[[[comm getPersons]boys]count]); 
```

那至少应该向您表明男孩数组的存在，（假设它已创建）...

NSLog 是你最好的朋友，我也建议学习如何使用调试器。

# android - 将gradle中的外部jar添加到Android项目

> ID：11626096
> 
> 赞同：2
> 
> 时间：2012-07-24T07:30:03.233
> 
> 标签：android, jar, gradle

我正在尝试将 jar 添加到 Android 上的项目中。我用 maps.jar 库做了一个测试。当我导入该类时，它有一个名为 com.google.android.maps.MapView 的类。我收到错误包 com.google.android.maps 不存在 import com.google.android.maps.MapView;

我尝试以多种方式将此 jar 文件包含到我的 gradle.build 中：

```
dependencies {
 runtime files('/Users/user/Documents/workspace/MyAndroidApp/libs/maps.jar')  
 //runtime fileTree(dir: '/Users/user/Documents/workspace/MyAndroidApp/libs', include: '*.jar')
 //classpath fileTree(dir: '/Users/user/Documents/workspace/MyAndroidApp/libs', include: 'maps.jar')        
} 
```

到目前为止还没有运气。

任何的想法？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-04T15:44:41.790

以下是我的做法：

1.  将您的 jar 文件拖到 libs 文件夹中。
2.  右键单击 jar 文件并选择“添加库”现在 jar 文件是一个库。
3.  打开`build.gradle`文件（注意至少有两个`build.gradle`文件，不要使用根文件，使用项目范围内的文件）。
4.  找到依赖项部分（对我来说，我正在尝试使用 admob -GoogleAdMobAdsSdk jar 文件）

    `dependencies { compile files('libs/android-support-v4.jar','libs/GoogleAdMobAdsSdk-6.3.1.jar') }`

5.  最后进入`settings.gradle`并确保它看起来像这样：

    `include ':yourproject', ':yourproject:libs:GoogleAdMobAdsSdk-6.3.1'`

6.  最后，转到构建--->重建项目

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T07:53:03.090

必须将编译依赖项添加到`compile`配置中（不是`runtime`或`class path`）。

# c# - 使用 Linq 的外键约束非常慢

> ID：11626099
> 
> 赞同：0
> 
> 时间：2012-07-24T07:30:26.580
> 
> 标签：c#, linq, ado.net, foreign-keys

我有一个 SQL Server 数据库，我正在尝试为其构建一个 RESTful API。我正在使用 ADO.Net 和 Linq 从这样的表中检索单行：

```
[HttpGet]
public tTrip getTripById(Guid id)
{
    var _trip = (from trips in db.tTrip
                 where trips.ID == id
                 select trips).FirstOrDefault();
    return _trip;
} 
```

当我调试代码时，会检索到正确的对象。但是，如果我继续运行，将没有响应。我猜这是因为对于返回行中存在的每个外键，ADO 都会通过其他映射表进行另一次查找，这会大大减慢一切。

如果我只选择一个不包含任何 FKC 的列，那么一切正常。

有什么想法可以关闭该获取对象的 FKC 查找吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:15:58.403

我发现了问题 - 在 ObjectContext 类中（顺便说一句，“db”变量来自哪里），我将 ContextOptions.LazyLoadingEnabled 变量设置为 true。

将其设置为 false 并且应用程序仅返回每个条目的 Guid，而不是从数据库中加载条目详细信息。

# java - GWT - 使用 Eclipse 的谷歌插件部署时传递参数

> ID：11626101
> 
> 赞同：0
> 
> 时间：2012-07-24T07:30:31.920
> 
> 标签：java, google-app-engine, gwt, deployment, compiler-construction

我在 Eclipse 中使用 GWT + GAE，并使用 Google Plugin for Eclipse (GPE) 将我的应用程序部署到我的服务器。虽然我可以在 DevMode 中启动我的应用程序时修改我的编译器参数（在“运行配置”菜单中），但当使用 GPE 部署应用程序时，我找不到将其他参数（如 -deploy）传递给 GWT 编译器的方法。

这里有什么解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:51:40.500

我找到了解决方案：它接缝，即GWT编译器使用在“高级”面板中传递的参数（选择“GWT编译项目...”，这在与部署到App Engine选项相同的菜单中）。这既适用于本地编译，也适用于部署 gwt 编译。

# android - 如何让谷歌日历android代码在eclipse上运行

> ID：11626112
> 
> 赞同：3
> 
> 时间：2012-07-24T07:31:09.807
> 
> 标签：android, calendar, google-calendar-api

[我从这里](https://github.com/android/platform_packages_apps_calendar/downloads)下载了 Google 日历 android 代码，我想运行该代码，以便我可以从中获得一些关于我自己的日历的帮助。但是在eclipse中导入后，我在包和Manifest中遇到了几个错误。错误是：错误：在包'android'中找不到属性'parentActivityName'的资源标识符

```
 <?xml version="1.0" encoding="utf-8"?>
<!--
/* //device/apps/Calendar/AndroidManifest.xml
**
** Copyright 2006, The Android Open Source Project
**
** Licensed under the Apache 
License, Version 2.0 (the "License");
** you may not use this file except in compliance with the License.
** You may obtain a copy of the License at
**
**     http://www.apache.org/licenses/LICENSE-2.0
**
** Unless required by applicable law or agreed to in writing, software
** distributed under the License is distributed on an "AS IS" BASIS,
** WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
** See the License for the specific language governing permissions and
** limitations under the License.
*/
-->
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.android.calendar"
        android:sharedUserLabel="@string/app_label">

    <!--
       NOTE: and original-package cannot be used, since the Eclair
       version was using a shared user ID with the provider.
    -->

    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.MANAGE_ACCOUNTS"/>
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.VIBRATE"/>
    <uses-permission android:name="android.permission.READ_CONTACTS"/>
    <uses-permission android:name="android.permission.READ_CALENDAR" />
    <uses-permission android:name="android.permission.WRITE_CALENDAR" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.USE_CREDENTIALS" />
    <uses-permission android:name="android.permission.READ_SYNC_SETTINGS" />
    <uses-permission          android:name="com.google.android.googleapps.permission.GOOGLE_AUTH.mail" />
    <uses-sdk android:minSdkVersion="15"></uses-sdk>

    <application android:name="CalendarApplication"
            android:label="@string/app_label" android:icon="@mipmap/ic_launcher_calendar"
            android:taskAffinity="android.task.calendar"
            android:hardwareAccelerated="true"
            android:backupAgent="com.android.calendar.CalendarBackupAgent" >

        <meta-data android:name="com.google.android.backup.api_key"
                android:value="AEdPqrEAAAAIM256oVOGnuSel5QKDpL8je_T65ZI8rFnDinssA" />

        <activity
            android:name="AllInOneActivity"
            android:theme="@style/CalendarTheme.WithActionBar"
            android:launchMode="singleTask"
            android:windowSoftInputMode="adjustPan"
            android:exported="true">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.LAUNCHER" />
                <category android:name="android.intent.category.APP_CALENDAR" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="time/epoch" />
                <data android:host="com.android.calendar" />
                <data android:scheme="content"/>
            </intent-filter>
        </activity>

        <activity-alias android:name="LaunchActivity"
            android:targetActivity=".AllInOneActivity"
            android:exported="true">
        </activity-alias>

        <activity android:name="EventInfoActivity"
            android:parentActivityName="com.android.calendar.AllInOneActivity"
            android:theme="@style/CalendarTheme.WithActionBar">
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="vnd.android.cursor.item/event" />
            </intent-filter>
        </activity>

        <activity android:name=".event.EditEventActivity"
            android:theme="@style/CalendarTheme.WithActionBar">
        </activity>

        <activity-alias android:name="EditEventActivity"
            android:targetActivity=".event.EditEventActivity"
            android:exported="true">
            <intent-filter>
                <action android:name="android.intent.action.EDIT" />
                <action android:name="android.intent.action.INSERT" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="vnd.android.cursor.item/event" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.EDIT" />
                <action android:name="android.intent.action.INSERT" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="vnd.android.cursor.dir/event" />
            </intent-filter>
        </activity-alias>

        <activity android:name="GoogleCalendarUriIntentFilter" android:label="@string/app_label"
            android:theme="@android:style/Theme.NoDisplay"
            android:configChanges="orientation|keyboardHidden">

            <intent-filter
               android:priority="50">
               <action android:name="android.intent.action.VIEW" />
               <category android:name="android.intent.category.DEFAULT" />
               <category android:name="android.intent.category.BROWSABLE" />
               <data android:scheme="http" android:host="www.google.com" android:pathPrefix="/calendar/event" />
               <data android:scheme="https" android:host="www.google.com" android:pathPrefix="/calendar/event" />
               <data android:scheme="http" android:host="www.google.com" android:pathPattern="/calendar/hosted/.*/event" />
               <data android:scheme="https" android:host="www.google.com" android:pathPattern="/calendar/hosted/.*/event" />
            </intent-filter>
        </activity>

        <activity android:name=".selectcalendars.SelectVisibleCalendarsActivity"
            android:label="@string/select_visible_calendars_title"
            android:theme="@android:style/Theme.Holo.Light"/>

        <activity android:name=".selectcalendars.SelectSyncedCalendarsMultiAccountActivity"
            android:label="@string/select_synced_calendars_title"
            android:theme="@android:style/Theme.Holo.Light"/>

        <activity android:name="CalendarSettingsActivity" android:label="@string/preferences_title"
            android:theme="@android:style/Theme.Holo.Light"/>

        <!-- Declarations for search -->
        <!-- Make all activities a searchable context -->
        <meta-data android:name="android.app.default_searchable"
            android:value="com.android.calendar.SearchActivity"/>

        <activity android:name="SearchActivity" android:label="@string/search_title"
            android:launchMode="singleTop" android:theme="@style/CalendarTheme.WithActionBar"
            android:windowSoftInputMode="stateAlwaysHidden"
            android:exported="true">
            <intent-filter>
                <action android:name="android.intent.action.SEARCH"/>
            </intent-filter>
            <meta-data android:name="android.app.searchable" android:resource="@xml/searchable"/>
        </activity>

        <provider android:name=".CalendarRecentSuggestionsProvider"
            android:authorities="com.android.calendar.CalendarRecentSuggestionsProvider" />

        <!-- Declarations for alerts/reminders -->
        <activity android:name=".alerts.AlertActivity" android:launchMode="singleInstance"
             android:theme="@android:style/Theme.Holo.Dialog" android:excludeFromRecents="true" />

        <activity android:name=".alerts.QuickResponseActivity" android:launchMode="singleInstance"
             android:theme="@android:style/Theme.Holo.Dialog" android:excludeFromRecents="true"
             android:label="@string/quick_response_dialog_title" />

        <receiver android:name=".alerts.AlertReceiver">
            <intent-filter>
                <action android:name="android.intent.action.EVENT_REMINDER" />
                <action android:name="android.intent.action.BOOT_COMPLETED" />
                <action android:name="android.intent.action.TIME_SET" />
                <data android:scheme="content" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.LOCALE_CHANGED" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.PROVIDER_CHANGED"/>
                <data android:scheme="content"/>
                <data android:host="com.android.calendar"/>
            </intent-filter>
        </receiver>

        <service android:name=".alerts.AlertService" />

        <service android:name=".alerts.DismissAlarmsService" />

        <service android:name=".alerts.SnoozeAlarmsService" />

        <!-- Declarations for the widget -->
        <receiver android:name=".widget.CalendarAppWidgetProvider" android:label="@string/gadget_title">
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
                <action android:name="com.android.calendar.APPWIDGET_UPDATE" />
            </intent-filter>
            <meta-data android:name="android.appwidget.provider" android:resource="@xml/appwidget_info" />
        </receiver>

        <receiver android:name=".widget.CalendarAppWidgetService$CalendarFactory">
            <intent-filter>
                <action android:name="android.intent.action.TIMEZONE_CHANGED"/>
                <action android:name="android.intent.action.DATE_CHANGED"/>
                <action android:name="android.intent.action.TIME_SET"/>
                <action android:name="android.intent.action.LOCALE_CHANGED"/>
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.PROVIDER_CHANGED"/>
                <data android:scheme="content"/>
                <data android:host="com.android.calendar"/>
            </intent-filter>
            <intent-filter>
                <action android:name="com.android.calendar.APPWIDGET_SCHEDULED_UPDATE"/>
                <data android:scheme="content"/>
                <data android:host="com.android.calendar"/>
                <data android:mimeType="vnd.android.data/update" />
            </intent-filter>
        </receiver>

        <service android:name=".widget.CalendarAppWidgetService"
            android:permission="android.permission.BIND_REMOTEVIEWS"
            android:exported="false">
        </service>

        <service android:name=".AsyncQueryServiceHelper" />

    </application>
   </manifest> 
```

请帮我解决这个错误。提前致谢...

# wpf - WPF在CompositeCollection中绑定MenuItem不起作用

> ID：11626114
> 
> 赞同：3
> 
> 时间：2012-07-24T07:31:16.413
> 
> 标签：wpf, xaml, binding, compositecollection

我在将命令绑定到复合集合中的菜单项时遇到问题。`MenuItem`是`ContextMenu`其中定义的一部分`UserControl.Resources`。

问题是新标签的绑定不起作用。当我将 MenuItem 放在复合集合之外时，它将起作用。有任何想法吗？

```
<UserControl.Resources>
    <ContextMenu x:Key="DataGridRowContextMenu">
        <MenuItem Header=" Set label"/>
            <MenuItem.ItemsSource>
                    <CompositeCollection>
                            <CollectionContainer Collection="{Binding Source={StaticResource labelsSelectSource}}" />
                    <MenuItem Header=" New label..." 
                          Command="{Binding DataContext.NewLabel,
                                RelativeSource={RelativeSource Mode=FindAncestor,
                                AncestorType={x:Type UserControl}}}"/>

                        </CompositeCollection>
                 </MenuItem.ItemsSource>
            </MenuItem>
<UserControl.Resources/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:10:17.230

发生这种情况是因为`ContextMenu`它`visual tree`与其包含的父级不同，从而导致数据绑定问题。由于`ContextMenu`不在同一个可视化树中，`ElementName`、`RelativeSouce`( `FindAncestor`) 等绑定将不起作用。

你可以解决这个问题

1.  在 UserControl 后面的代码中：

    ```
    NameScope.SetNameScope(DataGridRowContextMenu, NameScope.GetNameScope(this)); 
    ```

2.  使用这样的`PlacementTarget`属性 -

    ```
    <ContextMenu 
        x:Key="DataGridRowContextMenu">   
        DataContext="{Binding PlacementTarget, RelativeSource={RelativeSource Self}}">
        .
        .  
        .
        <MenuItem 
            Header=" New label..."     
            Command="{Binding DataContext.NewLabel}"/> 
    ```

或使用其他解决方案 -

[ContextMenu 中 MenuItem 的 ElementName 绑定](https://stackoverflow.com/questions/1013558/elementname-binding-from-menuitem-in-contextmenu)

[WPF：上下文菜单的数据上下文](http://coderelief.net/2011/04/20/contextmenuserviceextensions-datacontext-attached-property/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-20T07:45:34.113

我一直在为这个疯狂的 ContextMenu 及其 MenuItems 苦苦挣扎。但是我找到了一个解决方案来使用它创建一个自定义行为“BindingProxyBehaviour”，它的依赖属性名为“Data”。此属性包含一个对象，例如您的 DataContext（如果您使用 MVVM 模式，可能是您的 ViewModel）。

```
public class BindingProxyDataBehavior : Freezable
{
    public static readonly DependencyProperty DataProperty =
        DependencyProperty.Register("Data", typeof(object), typeof(BindingProxyDataBehavior), new UIPropertyMetadata(null));

    protected override Freezable CreateInstanceCore()
    {
        return new BindingProxyDataBehavior();
    }

    public object Data
    {
        get { return (object)GetValue(DataProperty); }
        set { SetValue(DataProperty, value); }
    }
} 
```

只需像这样将 BindingProxy 作为资源添加到您的 xaml 文件中。

```
<UserControl.Resources>
    <ResourceDictionary>
        <behaviors:BindingProxyDataBehavior x:Key="BindingProxyViewModel" Data="{Binding}"/>
        <behaviors:BindingProxyDataBehavior x:Key="BindingProxyViewModelDynamicDataList" Data="{Binding DynamicDataListObject}"/>
    </ResourceDictionary>
</UserControl.Resources> 
```

在我的情况下，我使用 CompositeCollection 来混合静态和动态 MenuItems。因此，具有键“BindingProxyViewModelDynamicDataList”的第二个资源。

现在，无论您的 ContextMenu 位于何处，您都可以轻松访问您的数据。我在 xaml 树中的 ContexMenu 位置是 UserControl->Grid->DataGrid->DataGridTemplateColumn->CellTemplate->DataTemplate->TextBox.Template->Grid->TextBlock->controls:IconButton(simple customButton control derived from button) 在这里我们位于 IconButton 内：

```
<controls:IconButton.ContextMenu>
<ContextMenu x:Name="AnyContextMenuName">
    <ContextMenu.Resources>
        <HierarchicalDataTemplate DataType="{x:Type DynamicDataListItemType}">
            <TextBlock Text="{Binding DynamicDataListItemProperty}"/>
        </HierarchicalDataTemplate>
    </ContextMenu.Resources>
    <ContextMenu.ItemsSource>
        <CompositeCollection>
            <CollectionContainer Collection="{Binding Source={StaticResource BindingProxyViewModelDynamicDataList}, Path=Data}"/>
            <Separator/>
            <MenuItem Header="Your static header" Command="{Binding Source={StaticResource BindingProxyViewModel}, Path=Data.ViewModelCommandForYourStaticMenuItem}"/>
        </CompositeCollection>
    </ContextMenu.ItemsSource>
    <ContextMenu.ItemContainerStyle>
        <Style>
            <Setter Property="MenuItem.Foreground" Value="{DynamicResource DefaultForegroundBrush}"/>
            <Setter Property="MenuItem.Command" Value="{Binding Source={StaticResource BindingProxyViewModel}, Path=Data.ViewModelCommandForDynamicMenuItems}"/>
            <Setter Property="MenuItem.CommandParameter" Value="{Binding}"/>
        </Style>
    </ContextMenu.ItemContainerStyle>
</ContextMenu>
</controls:IconButton.ContextMenu> 
```

我希望我可以通过这篇短文帮助某人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T16:57:37.553

使用`CommandTarget`属性或为您的数据上下文创建一个 staticRessource，例如

```
<MenuItem Header=" New label..." 
          Command="{Binding Path=NewLabel,Source={StaticResource viewModel}}"/> 
```

# android - Android 中的 Robolectric：测试事件？

> ID：11626120
> 
> 赞同：8
> 
> 时间：2012-07-24T07:31:27.920
> 
> 标签：android, robolectric

我已经使用 robolectric 编写了一些测试，现在我想做一些真正的测试类。

我注意到的一件事是我无法测试 onCreate、onLocationChanged 等事件。

测试事件的标准做法是什么？

我应该提取事件内部的代码并将它们放在一个方法中，事件将调用该方法，robolectro 也可以调用该方法，当然该方法需要是公共的，对吗？

另外，如果我想在我的方法中测试通常是私有变量的东西，那么我需要添加一个公共 getter，对吗？我可以从 robolectric 检查这个吗？

有没有更好的方法向 robolectric 公开数据？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T15:42:16.217

在测试 onCreate 时，我让 robolectric 调用 onCreate，然后在 onCreate 之后测试活动是否处于正确状态。这是一个例子：

```
@RunWith(RoboTestRunner.class)
public class DashboardActivityTest {

    private DashboardActivity activity;

    @Before
    public void setUp() throws Exception {
        activity = new DashboardActivity();
    }

    @After
    public void tearDown() throws Exception {
    }

    @Test
    public void testDashboardHasButtons() {
        activity.onCreate(null);
        Button btn1= (Button) activity.findViewById(R.id.btn1);
        assertNotNull(btn1);
        Button btn2= (Button) activity.findViewById(R.id.btn2);
        assertNotNull(btn2);
    }
} 
```

测试私有方法通常表明您的设计可以改进，而不是 Robolectric 特定的问题。

请参阅此问题进行大量讨论： [如何测试具有私有方法、字段或内部类的类？](https://stackoverflow.com/questions/34571/whats-the-proper-way-to-test-a-class-with-private-methods-using-junit)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-17T15:51:42.480

从 Robolectric v2 开始，这不是现在开始活动的正确方式：

```
MyActivity testActivity = new MyActivity();
testActivity.onCreate(null); 
```

现在正确的方法是使用它：

```
MyActivity testActivity = Robolectric.buildActivity(MyActivity.class).create().get(); 
```

这将在调用 onCreate 后为您提供一个活动实例。
如果要测试onStart、onResume、onPause等，方法一样，只是方法多了。

```
MyActivity testActivity = Robolectric.buildActivity(MyActivity.class).create().start().resume().pause().stop().destroy().get(); 
```

（添加或删除上述代码行中的方法以测试您想要的活动的确切实例）

只是想澄清一下 Robolectric 真正的新特性。

# android - 在android中的imageview上拖放textview

> ID：11626121
> 
> 赞同：2
> 
> 时间：2012-07-24T07:31:45.220
> 
> 标签：android

我尽力了，任何人都可以帮助在android中的imageview上**拖放textview**

我的带有框架布局的 xml

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent">

<ImageView  
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 

    android:scaleType="center"
    android:src="@drawable/golden_gate" />

<TextView
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:layout_marginBottom="20dip"
    android:layout_gravity="center_horizontal|bottom"

    android:padding="12dip"

    android:background="#AA000000"
    android:textColor="#ffffffff"

    android:text="Golden Gate" />

</FrameLayout> 
```

我尝试如下拖放文本，因为我在这里使用了线性布局文本在某些部分拖动，而不是在图像上

```
import android.app.Activity;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.View;
import android.view.ViewGroup;
import android.widget.LinearLayout;
import android.widget.TextView;
public class DragNDropActivity extends Activity {
        private View selected_item = null;
        private int offset_x = 0;
        private int offset_y = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ViewGroup vg = (ViewGroup)findViewById(R.id.vg);
        vg.setOnTouchListener(new View.OnTouchListener() {

                        @Override
                        public boolean onTouch(View v, MotionEvent event) {
                                switch(event.getActionMasked())
                                {
                                        case MotionEvent.ACTION_MOVE:
                                                int x = (int)event.getX() - offset_x;
                                                int y = (int)event.getY() - offset_y;
                        int w = getWindowManager().getDefaultDisplay().getWidth() - 100;
                        int h = getWindowManager().getDefaultDisplay().getHeight() - 100;
                        if(x > w)
                            x = w;
                        if(y > h)
                            y = h;
                                         LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(
                                        new ViewGroup.MarginLayoutParams(
                                                        LinearLayout.LayoutParams.WRAP_CONTENT,
                                                        LinearLayout.LayoutParams.WRAP_CONTENT));
                                         lp.setMargins(x, y, 0, 0);
                                                selected_item.setLayoutParams(lp);
                                                break;
                                        default:
                                                break;
                                }
                                return true;
                        }
   });
      TextView img = (TextView)findViewById(R.id.img);
        img.setOnTouchListener(new View.OnTouchListener() {

                        @Override
                        public boolean onTouch(View v, MotionEvent event) {
                                switch(event.getActionMasked())
                                {
                                        case MotionEvent.ACTION_DOWN:
                                                offset_x = (int)event.getX();
                                                offset_y = (int)event.getY();
                                                selected_item = v;
                                                break;
                                        default:
                                                break;
                                }

                                return false;
                        }
                });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:38:51.180

请试试这个....

```
 <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent">        
    <ImageView android:id="@+id/imageView1" android:layout_width="match_parent" android:layout_height="match_parent" android:src="@drawable/ic_launcher" android:scaleType="center" />
    <TextView android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_gravity="center" android:background="#AA000000" android:textColor="#ffffffff" android:text="Golden Gate"/>
</FrameLayout> 
```

我用我的日食检查了它。让我知道它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:34:34.860

尝试使用**框架布局**它应该弄清楚你想要什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T07:37:16.997

像这样使用**RelativeLayout**。注意：你可以把它放在你的 ParentView

```
<RelativeLayout android:layout_width="100dp" android:id="@+id/photoframe" android:layout_height="320dp" android:layout_weight="1.0">
        <ImageView android:layout_height="fill_parent" android:scaleType="fitXY" android:id="@+id/framephoto" android:src="@drawable/icon" android:layout_width="fill_parent"></ImageView>
        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="TextView" android:id="@+id/textView1" android:layout_alignParentTop="true" android:layout_centerHorizontal="true" android:layout_marginTop="188dp"></TextView>
    </RelativeLayout> 
```

在您的 layout.xml 中。通过使用**相对**，您可以**将您的文本视图拖到您的图像上。**

# bash - Bash shell 从文本文件中删除行

> ID：11626124
> 
> 赞同：1
> 
> 时间：2012-07-24T07:31:55.740
> 
> 标签：bash, text, sed

我有一个用于代理过滤器的大域列表文件。在另一个文件中，我有一些例外情况，我想从过滤器文件中删除所有异常文件行。是否可以进行一些“sed”操作？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T07:35:16.437

您通常可以为此使用`grep`和`-v`选项`-f`。事实上，您可能还想使用`fgrep`or`-F`标志来确保字符串被视为固定字符串而不是正则表达式。如果没有它，例如，`infile`尽管实际上与固定字符串不匹配，但下面文件的第一行将被删除。

`-v`颠倒了匹配行被丢弃而不是保留的感觉，并且`-f`将从文件而不是命令行中获取模式。

例如：

```
pax> cat infile
http://wwwxdodgy.com/rest-of-url
http://www.dodgy.com/rest-of-url
ftp://this/one/is/good
https://www.bad.org/rest-of-url

pax> cat exceptions 
http://www.dodgy.com
https://www.bad.org

pax> fgrep -v -f exceptions infile 
ftp://this/one/is/good 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T07:35:29.617

使用 grep 更容易做到这一点：

```
grep -v -x -F -f /path/to/exclude /path/to/file 
```

# wpf - 在 xaml 中更改默认绑定/文本框 StringFormat

> ID：11626131
> 
> 赞同：0
> 
> 时间：2012-07-24T07:32:19.063
> 
> 标签：wpf, xaml, data-binding

我正在创建一个包含许多文本框的表单，这些文本框具有如下声明的文本属性：

```
Text="{Binding Path=SomeField, StringFormat='\{0:#,##0.##\}', Mode=TwoWay, ValidatesOnExceptions=true, NotifyOnValidationError=true, Source={StaticResource statementsMainsViewSource}}" 
```

为了节省大量空间和击键，我想知道是否有一种方法可以使用样式在每个窗口中设置默认文本框（例如，有点类似于下面的错误代码）：

```
<Style TargetType="{x:Type TextBox}">
        <Setter Property="StringFormat" Value="\{0:#,##0.##\}" />
</Style> 
```

不幸的是，具有属性的是绑定的东西，而不是文本框，而且我不知道如何设置绑定样式。

谁能指出我更改默认绑定 StringFormats 的正确语法 - 或者任何人都可以建议我如何做我正在尝试的事情？

欢呼和蒂亚

麦克莱克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:08:01.930

试试这个

```
public class TextBinding:Binding
{
    public TextBinding()
    {
        Mode = BindingMode.TwoWay;
        StringFormat = @"\{0:#,##0.##\}";
        ValidatesOnExceptions = true;
        NotifyOnValidationError = true;
    }
}

   xmlns:myBinding="clr-namespace:WpfApplication2">
<Grid>
    <TextBox Text="{myBinding:TextBinding Path=SomeProperty}"/>
</Grid> 
```

现在您可以以这种方式绑定到所有文本框，而无需设置上述 4 个绑定属性，它们将自动应用。我希望这会帮助你得到一个想法。

# jquery - jQuery 选择框插件冲突

> ID：11626132
> 
> 赞同：1
> 
> 时间：2012-07-24T07:32:26.267
> 
> 标签：jquery, magento, conflict

嗨，我在我的 magento 网站上使用**jQuery Selectbox 插件**（从[http://code.google.com/p/select-box/ 获得](http://code.google.com/p/select-box/)）

添加此插件后，我的菜单下拉菜单和事件计时器无法正常工作。为了消除这种冲突，我尝试通过更改

```
<script type="text/javascript">
$(function () {
    $("#language").selectbox();
});
</script> 
```

至

```
<script type="text/javascript">
jQuery.noConflict();

(function($) {

$(document).ready(function() {
$("#language").selectbox();
});

})(jQuery);  </script> 
```

但到目前为止还没有运气。请给我你的想法来解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:57:53.960

I just added jQuery.noConflict(); at the end of my js files. Original source : [http://blog.ecommercesoftwaresolutionsonline.com/archives/174/how-to-avoid-the-conflict-while-using-jquery-functionality-in-magento.html](http://blog.ecommercesoftwaresolutionsonline.com/archives/174/how-to-avoid-the-conflict-while-using-jquery-functionality-in-magento.html)

Thanks a ton.

# javascript - 刷新父页面

> ID：11626134
> 
> 赞同：1
> 
> 时间：2012-07-24T07:32:35.207
> 
> 标签：javascript, redirect

我有一段简单的代码，如果用户单击取消，那么他们将使用附加的代码返回到上一页。我想做的是，如果用户单击取消按钮，则刷新他们来自的页面。这可能吗？非常感谢

```
<input type="button" value="Cancel" onclick="history.go(-1);return false;" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:40:37.670

window.parent.document.location.reload(); 我认为可以与 jQuery 一起使用。为后退按钮设置绑定。

或扔这个

```
<meta http-equiv="pragma" content="no-cache">
<meta http-equiv="cache-control" content="no-cache">
<meta http-equiv="expires" content="0"> 
```

在第一页的头部，所以它会过期并自动刷新

但是我不能 100% 确定它可以与 Firefox 一起使用。它似乎适用于 IE。

我认为您也可以通过设置 rel = external 打开没有 AJAX 的页面

```
<a href="../index.html" data-icon="grid"
class="ui-btn-right" rel="external">Home</a> 
```

这是一种老派的做法。

也 [`This is a very useful link explaining how jquery can accomplish this in most browsers`](https://stackoverflow.com/a/201406/1255713)。可能是一个更优化的解决方案，而不是我的黑客。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T07:42:54.283

您可以使用`meta`先前答案中建议的标签，也可以`document.referrer`根据特定 URL 检查属性，然后通过 javascript 手动刷新它。

**编辑**

在 1.html 中，您将拥有：

```
$(document).ready(function(){
    if(document.referrer.indexOf("files.php") != -1) {
        window.location.reload(true); // passing true as an argument causes page to being force loaded from the server
    }
}); 
```

在 2.html 中你只需要这个：

```
<input type="button" value="Cancel" onclick="history.go(-1);return false;" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T07:49:57.917

另一种可能性是，如果您只关心从您的网站重新加载页面，您可以强制不进行缓存。如果你有兴趣[看这里](https://stackoverflow.com/questions/6208715/pragma-no-cache-and-javascript)。

# jquery - 确认框jquery

> ID：11626139
> 
> 赞同：1
> 
> 时间：2012-07-24T07:33:09.323
> 
> 标签：jquery, confirm

我正在使用预定义的 jquery css 表单模板。

```
<asp:Button ID="btndeleteselected" runat="server" Text="Delete" 
     CssClass="basicBtn mr10 ml10 bConfirm"  OnClick="btndeleteselected_Click"  /> 
```

当我单击按钮时，我需要显示确认框以删除。但是当我点击按钮时

事件在没有得到确认框的情况下触发。我需要做什么？

我的jQuery函数是

```
$(".bConfirm").click( function() {
    jConfirm('Can you confirm this?', 'Confirmation Dialog', function(r) {
        jAlert('Confirmed: ' + r, 'Confirmation Results');
    });
}); 
```

它在 custom.js 预定义的 jquery 文件中受到挑战

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T07:37:11.943

您需要通过调用`preventDefault()`传递给单击处理程序的事件来告诉单击事件不要处理：

```
$(".bConfirm").click( function(e) {
    jConfirm('Can you confirm this?', 'Confirmation Dialog', function(r) {
        jAlert('Confirmed: ' + r, 'Confirmation Results');
    });
    e.preventDefault();
    return false
}); 
```

# opencv - 使用 OpenCV 提取 HoG 特征

> ID：11626140
> 
> 赞同：38
> 
> 时间：2012-07-24T07:33:09.713
> 
> 标签：opencv, computer-vision, feature-detection, object-recognition, feature-extraction

我正在尝试使用 OpenCV 的 HoG API 提取特征，但是我似乎找不到允许我这样做的 API。

我想要做的是使用 HoG 从我的所有数据集（一组正负图像）中提取特征，然后训练我自己的 SVM。

我在 OpenCV 下查看了 HoG.cpp，但没有帮助。所有代码都隐藏在复杂性和迎合不同硬件的需要中（例如英特尔的 IPP）

我的问题是：

1.  是否有任何来自 OpenCV 的 API 可用于提取所有这些特征/描述符以输入到 SVM 中？如果有我如何使用它来训练我自己的 SVM ？
2.  如果没有，是否有任何现有的库可以完成同样的事情？

到目前为止，我实际上正在将现有库 (http://hogprocessing.altervista.org/) 从 Processing (Java) 移植到 C++，但它仍然非常慢，检测至少需要 16 秒

有没有其他人成功地提取了 HoG 特征，你是怎么解决的？你有任何我可以使用的开源代码吗？

提前致谢

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-07-26T05:41:53.267

您可以在 opencv 中使用 hog 类，如下所示

```
HOGDescriptor hog;
vector<float> ders;
vector<Point> locs; 
```

此函数为您计算 hog 特征

```
hog.compute(grayImg, ders, Size(32, 32), Size(0, 0), locs); 
```

计算出来的 HOG 特征`grayImg`存储在`ders`向量中，形成一个矩阵，以后可以用于训练。

```
Mat Hogfeat(ders.size(), 1, CV_32FC1);

for(int i=0;i<ders.size();i++)
    Hogfeat.at<float>(i,0)=ders.at(i); 
```

现在您的 HOG 特征存储在 Hogfeat 矩阵中。

您还可以使用 object 设置窗口大小、单元格大小和块大小，`hog`如下所示：

```
hog.blockSize = 16;
hog.cellSize = 4;
hog.blockStride = 8;

// This is for comparing the HOG features of two images without using any SVM 
// (It is not an efficient way but useful when you want to compare only few or two images)
// Simple distance
// Consider you have two HOG feature vectors for two images Hogfeat1 and Hogfeat2 and those are same size.

double distance = 0;
for(int i = 0; i < Hogfeat.rows; i++)
    distance += abs(Hogfeat.at<float>(i, 0) - Hogfeat.at<float>(i, 0));

if (distance < Threshold)
    cout<<"Two images are of same class"<<endl;
else
    cout<<"Two images are of different class"<<endl; 
```

希望它有用:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-27T04:39:14.670

在上面的文章的帮助下，我还编写了 2 hog feature 的程序。我应用这种方法来检查 ROI 区域是否发生变化。请参阅此处的页面。 [源码及简单介绍](http://feelmare.blogspot.kr/2015/02/extracting-two-hog-feature-and.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-26T20:20:50.493

这里也是 GPU 版本。

```
cv::Mat temp;
gpu::GpuMat gpu_img, descriptors;

cv::gpu::HOGDescriptor gpu_hog(win_size, Size(16, 16), Size(8, 8), Size(8, 8), 9,
                               cv::gpu::HOGDescriptor::DEFAULT_WIN_SIGMA, 0.2, gamma_corr,
                               cv::gpu::HOGDescriptor::DEFAULT_NLEVELS);
gpu_img.upload(img);
gpu_hog.getDescriptors(gpu_img, win_stride, descriptors, cv::gpu::HOGDescriptor::DESCR_FORMAT_ROW_BY_ROW);
            descriptors.download(temp); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-22T22:40:23.160

OpenCV 3 对用户使用 GPU 算法（即 CUDA）的方式进行了一些更改，请参阅[过渡指南 - CUDA](http://docs.opencv.org/3.2.0/db/dfa/tutorial_transition_guide.html#tutorial_transition_hints_cuda)。

要将答案从 user3398689 更新到 OpenCV 3，这里是一段代码：

```
#include <opencv2/core/cuda.hpp>
#include <opencv2/cudaimgproc.hpp>

[...]

/* Suppose you load an image in a cv::Mat variable called 'src' */

int img_width  = 320;
int img_height = 240;
int block_size = 16;
int bin_number = 9;

cv::Ptr<cv::cuda::HOG> cuda_hog = cuda::HOG::create(Size(img_width, img_height),
                                                    Size(block_size, block_size),
                                                    Size(block_size/2, block_size/2),
                                                    Size(block_size/2, block_size/2),
                                                    bin_number);

/* The following commands are optional: default values applies */
cuda_hog->setDescriptorFormat(cuda::HOG::DESCR_FORMAT_COL_BY_COL);
cuda_hog->setGammaCorrection(true);
cuda_hog->setWinStride(Size(img_width_, img_height_));

cv::cuda::GpuMat image;
cv::cuda::GpuMat descriptor;

image.upload(src);

/* May not apply to you */
/* CUDA HOG works with intensity (1 channel) or BGRA (4 channels) images */
/* The next function call convert a standard BGR image to BGRA using the GPU */
cv::cuda::GpuMat image_alpha;
cuda::cvtColor(image, image_alpha, COLOR_BGR2BGRA, 4);

cuda_hog->compute(image_alpha, descriptor);

cv::Mat dst;
image_alpha.download(dst); 
```

然后，您可以根据自己的喜好使用“dst”变量中的描述符，例如，按照 G453 的建议。

# c# - XML 读取抛出“设备未准备好”

> ID：11626142
> 
> 赞同：0
> 
> 时间：2012-07-24T07:33:20.257
> 
> 标签：c#, asp.net, .net, xml, iis

我正在尝试读取一个 xml 文件，但每次代码到达 load() 函数时，它都会抛出异常“设备尚未准备好”。这是代码：

```
const string filepath = @"E:\xml\somefile.xml";
XmlDocument fileDoc = new XmlDocument();
fileDoc.Load(filepath); 
```

驱动器“E:\”是一个物理 HDD，Web 应用程序保存在一个名为“app”的文件夹中。所以文件夹 xml 完全独立于 web 应用程序和 iis。我也尝试在应用程序文件夹中找到 xml，但发生了同样的错误。

有人知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:42:13.457

当您尝试读取 xml 时，检查文件“E:\xml\somefile.xml”是否未锁定在您的进程中。在写入文件的对象上正确使用调用 Dispose()。

# xslt - 元素上的 XSLT 联合

> ID：11626147
> 
> 赞同：0
> 
> 时间：2012-07-24T07:33:36.343
> 
> 标签：xslt, join, union

我是新手。需要 XSLT 帮助：Employer 可以是 n 号。员工可以是 n 号。无需查找重复项。这是源xml。来源：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <employer name="one">
        <employee name="1"/>
        <employee name="2"/>
    </employee>
    <employer name="one">
        <employee name="1"/>
        <employee name="2"/>
    </employee>
    <employer name="two">
        <employee name="1"/>
        <employee name="2"/>
    </employee>
    <employer name="three">
        <employee name="1"/>
        <employee name="2"/>
    </employee> 
</root> 
```

所需输出

```
<root>
    <employer name="one">
        <employee name="1"/>
        <employee name="2"/>
        <employee name="1"/>
        <employee name="2"/>
    </employee>
    <employer name="two">
        <employee name="1"/>
        <employee name="2"/>
    </employee>
    <employer name="three">
        <employee name="1"/>
        <employee name="2"/>
    </employee> 
</root> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:26:15.513

使用固定的 XML 源文件，这：

```
<xsl:template match="/root">
    <root>
        <xsl:for-each select="employer">
            <xsl:variable name="name" select="@name"/>
            <xsl:if test="not(preceding-sibling::employer[@name=$name])">
                <employer name="{@name}">
                    <xsl:for-each select="/root/employer[@name=$name]/employee">
                        <employee name="{@name}"/>
                    </xsl:for-each>
                </employer>
            </xsl:if>
        </xsl:for-each>            
    </root>
</xsl:template> 
```

给你你想要的。或者我假设是您想要的 - 您实际想要的输出不是有效的 XML，所以我假设您并不是想让开放的雇主匹配关闭的员工？

```
<?xml version="1.0" encoding="utf-8"?>
<root>
    <employer name="one">
        <employee name="1"/>
        <employee name="2"/>
        <employee name="1"/>
        <employee name="2"/>
    </employer>
    <employer name="two">
        <employee name="1"/>
        <employee name="2"/>
    </employer>
    <employer name="three">
        <employee name="1"/>
        <employee name="2"/>
    </employer>
</root> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:52:16.087

要获得更简单、更有效的解决方案，请使用 Muenchian 分组和推送样式。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>

<xsl:key name="emp" match="employer" use="@name" />

<xsl:template match="/">
 <root>
   <xsl:apply-templates select="/*/employer[
   generate-id(.) = generate-id( key('emp',@name)[1])]"/>
 </root>
</xsl:template>

<xsl:template match="employer">
 <xsl:copy>
   <xsl:copy-of select="@* | key('emp',@name)/*" />
 </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

# c# - 未插入数据：EF Code First

> ID：11626148
> 
> 赞同：0
> 
> 时间：2012-07-24T07:33:42.303
> 
> 标签：c#, .net, entity-framework, ef-code-first

我有以下代码将数据插入到 GiftCouponPayment 表和 Payment 表中。这段代码成功地创建了一个数据库和这两个表。但是，在一张表中没有插入数据 - GiftCouponPayment 表。需要进行哪些更改才能使其正常工作？

![在此处输入图像描述](../Images/57ffa9386d02fdf8e95e0535338547b2.png)

代码

```
static void Main(string[] args)
{

        string connectionstring = "Data Source=.;Initial Catalog=NerdDinners;Integrated Security=True;Connect Timeout=30";

        using (var db = new NerdDinners(connectionstring))
        {
            var giftCouponPayment = new GiftCouponPayment();
            giftCouponPayment.MyID=1;
            giftCouponPayment.MyValue=250;

            List<IPaymentComponent> comps = new List<IPaymentComponent>();
            comps.Add(giftCouponPayment);
            var payment = new Payment { PaymentComponents = comps, PaymentID = 1, PayedTime=DateTime.Now };
            db.Payments.Add(payment);

            int recordsAffected = db.SaveChanges();

        }

} 
```

领域类

```
namespace LijosEF
{

public interface IPaymentComponent
{
    int MyID { get; set; }
    int MyValue { get; set; }
    int GetEffectiveValue();
}

public partial class GiftCouponPayment : IPaymentComponent
{

    private int CouponValue;
    public int MyID
    {
        get
        {
            return this.GiftCouponPaymentID;
        }
        set
        {
            this.GiftCouponPaymentID = value;
        }
    }

    public int MyValue
    {
        get
        {
            return this.CouponValue;
        }
        set
        {
            this.CouponValue = value;
        }
    }

    public int GetEffectiveValue()
    {
        if (this.GiftCouponPaymentID < 2000)
        {
            return 0;
        }
        return this.CouponValue;
    }

    public int GiftCouponPaymentID { get; set; }

}

public partial class Payment
{
    public int PaymentID { get; set; }
    public List<IPaymentComponent> PaymentComponents { get; set; }
    public DateTime PayedTime { get; set; }

}

//System.Data.Entity.DbContext is from EntityFramework.dll
public class NerdDinners : System.Data.Entity.DbContext
{

    public NerdDinners(string connString): base(connString)
    { 

    }

    protected override void OnModelCreating(DbModelBuilder modelbuilder)
    {
        modelbuilder.Conventions.Remove<PluralizingTableNameConvention>();
    }

    public DbSet<GiftCouponPayment> GiftCouponPayments { get; set; }
    public DbSet<Payment> Payments { get; set; }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:41:48.560

您不能在导航属性中使用界面 - EF 不支持它。您必须直接向班级申报您的付款：

```
public partial class Payment {
    public int PaymentID { get; set; }
    public List<GiftPaymentComponent> PaymentComponents { get; set; }
    public DateTime PayedTime { get; set; } 
} 
```

如果您的付款可以有不同的`PaymentComponents`，您必须使用带有抽象基类而不是接口的映射继承。

# android - AlertDialog OnCLickListener 需要按下后退按钮才能激活

> ID：11626156
> 
> 赞同：1
> 
> 时间：2012-07-24T07:34:06.153
> 
> 标签：android

我一直试图让它工作几个小时，但我找不到任何合适的解决方案。

事情是这样的：我创建了一个带有 2 个按钮的 AlertDialog，并在每个按钮上设置了一个 OnClickListener。

问题是我必须按下后退按钮才能“单击”警报按钮之一。

```
Context myActivity = getContext();
OnClickListener posClickListener = new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int id) {
        Log.d("AlertBuilder", "positive button");
        dialog.cancel();
        dialog.dismiss();

        Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=com.facebook.katana"));
        getContext().startActivity(intent);
    }
};
OnClickListener negClickListener = new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int id) {
        Log.d("AlertBuilder", "negative button");
        dialog.cancel();
        dialog.dismiss();
    }
};

AlertDialog.Builder builder = new AlertDialog.Builder(myActivity);
builder.setMessage("Impossible de lancer l'application Facebook.\r\nVeuillez vérifier que vous avez installé et mis à jour l'application Facebook.")
        .setCancelable(false)
        .setNegativeButton("Retour", negClickListener)
        .setPositiveButton("Télécharger", posClickListener);
AlertDialog alert = builder.create();
alert.show();

alert.dispatchKeyEvent(new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_BACK)); // I tried this to simulate the back button action, but it doesn't work 
```

你看到这里有什么不好的地方吗？

/* ============= 编辑 ============= */

好的，我想我已经弄清楚发生了什么。

事实上，我尝试在扩展对话框类的 FbDialog 中创建此对话框。

也许Android不喜欢盗梦空间......

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:48:21.927

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK)
        showDialog(getApplicationContext());

    return true;
    // use this instead if you want to preserve onKeyDown() behavior
    // return super.onKeyDown(keyCode, event);
}
public void showDialog(Context mContext) {
    AlertDialog.Builder builder = new AlertDialog.Builder(mContext);
    builder.setMessage("Impossible de lancer l'application Facebook.\r\nVeuillez vérifier que vous avez installé et mis à jour l'application Facebook.")
                .setCancelable(false)
                .setNegativeButton("Retour", negClickListener)
                .setPositiveButton("Télécharger", posClickListener);
    AlertDialog alert = builder.create();
    alert.show();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T07:41:09.837

使用简单的内部类并检查它是否有效......在“this”中传递你的活动上下文......

```
AlertDialog.Builder dialog = new AlertDialog.Builder(this); 
dialog.setMessage(message);   
dialog.setPositiveButton("TeleCharger", new DialogInterface.OnClickListener() 
{       
    public void onClick(DialogInterface dialog, int id) 
    {  
        //put positive code here
    }   
});    
dialog.setNegativeButton("Retour", new DialogInterface.OnClickListener() 
{        
    public void onClick(DialogInterface dialog, int which)
    {
        //put negative code here
    }     
});    
dialog.create().show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T07:42:35.860

查看是否要取消或关闭对话框（后按），您可以将对话框设置为可取消的 true。例如：

```
// it will not allow to cancel on back press
dlgAlert.setCancelable(false); 
```

# multithreading - NIO Server：是否使用工作线程？

> ID：11626164
> 
> 赞同：0
> 
> 时间：2012-07-24T07:34:38.300
> 
> 标签：multithreading, nio

我正在使用*NIO*构建服务器，我有两个问题。

1.  我是否必须使用工作线程或线程池来处理收到的消息，或者让主线程完成所有这些事情（我有性能需求）。

2.  我有两种*发送*方式，以 .. 结尾的*sendNow*方法`selector.selectNow()`和以 .. 结尾的简单发送方法，`selector.wakeup()`这些方法会丢失数据吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T00:56:19.647

如果可能，请尝试在一个线程中完成所有操作。否则它会很快变得非常复杂。

我不知道为什么您认为 sendNow() 方法需要以任何一个结尾，或者`selectNow()`它们`wakeup(),`都不会导致数据丢失。

# java - Surefire 插件中的 Maven 多个测试套件

> ID：11626171
> 
> 赞同：4
> 
> 时间：2012-07-24T07:35:05.390
> 
> 标签：java, maven, testng, maven-surefire-plugin

我正在使用带有 surefire 插件的 TestNg 和 Maven 来运行我的测试。我有几个不同的测试，我想在同一个 pom 中运行。目前要做到这一点，我定义了两个不同的 XML 文件，并且我定义了两个配置文件来运行不同的 xml 文件，但这一直抛出错误！

我不知道我应该如何解决这个问题。任何帮助将不胜感激！

```
 <profile>
    <id>run</id>
     <activation>
        <property>
            <name>start</name>
            <value>true</value>
        </property>
     </activation>
     <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                 <configuration>
                  <skip>true</skip>
                  <suiteXmlFiles>
                    <suiteXmlFile>${project.build.directory}/resources/testng.xml</suiteXmlFile>
                  </suiteXmlFiles>

                </configuration>
                 <executions>
                  <execution>
                    <id>test</id>
                    <phase>integration-test</phase>
                    <goals>
                      <goal>test</goal>
                    </goals>
                    <configuration>
                      <skip>false</skip>
                    </configuration>
                  </execution>
                </executions>
            </plugin>
        </plugins>
     </build>
</profile> 
```

想象配置文件 2 几乎相同，但 xml 套件文件不同

我收到一个解析错误：在 suiteXmlFile 中找不到测试类。但是，如果我只使用一个配置文件只有一个 xml 文件，这是可以接受的。失败的那个也有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T14:27:50.987

尝试将 suiteXmlFiles 移动到执行配置并使用`maven-failsafe-plugin`更适合集成测试

# css - 将css媒体查询分组在一起有优势吗？

> ID：11626174
> 
> 赞同：34
> 
> 时间：2012-07-24T07:35:17.457
> 
> 标签：css, sass, media-queries

（这可能已经回答了 - 虽然找不到答案）

传统的@media 查询覆盖倾向于将一种尺寸/中等的所有覆盖分组在同一个括号组下。

例如

```
.profile-pic {
    width:600px;
}
.biography {
    font-size: 2em;
}

@media screen and (max-width: 320px) {
    .profile-pic {
        width: 100px;
        float: none;
    }
    .biography {
        font-size: 1.5em;
    }
} 
```

在 Sass 中，有一种非常好的方法可以在嵌套声明中编写 @media 查询覆盖，如下所示：

```
.profile-pic {
width:600px;
  @media screen and (max-width: 320px) {
    width: 100px;
    float: none;
  }
}

.biography {
    font-size: 2em;
  @media screen and (max-width: 320px) {
    font-size: 1.5em;
  }
} 
```

现在，在编译时，sass 不会将 @media 查询块组合在一起，因此输出最终会是这样的：

```
.profile-pic {
    width:600px;
}
@media screen and (max-width: 320px) {
  .profile-pic {
    width: 100px;
    float: none;
  }
}

.biography {
    font-size: 2em;
}
@media screen and (max-width: 320px) {
  .biography {
    font-size: 1.5em;
  }
} 
```

我在最近的一个项目中使用了这种技术，当你将这个原则应用到一个更大的项目中时，你最终会在整个 css 中传播多个 @media 查询部分（到目前为止我有大约 20 个）。

我非常喜欢 sass 技术，因为它可以更轻松地跟踪覆盖的流程（并且也可以更轻松地移动事物）。

但是，我想知道通过 CSS 设置多个 @media 部分是否有任何缺点，尤其是在性能方面？

我已经尝试过 chrome css 分析器，但我看不到任何特定于 @media 查询的内容。

（[此页面上有关@media in sass 的更多信息](http://thesassway.com/intermediate/responsive-web-design-in-sass-using-media-queries-in-sass-32)）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-26T17:35:24.763

聚会有点晚了，但根据下面的测试，性能影响似乎很小。该测试分别显示了具有 2000 个单独和组合媒体查询的示例页面的呈现时间。

[http://aaronjensen.github.com/media_query_test/](http://aaronjensen.github.com/media_query_test/)

主要的好处似乎是文件大小比其他任何东西都重要——如果你压缩你的 CSS 用于生产，无论如何都会大大减少。

但最终，正如下面链接的帖子所说：

> “如果您的 CSS 中有 2000 多个媒体查询，我认为您可能需要重新考虑您的 UI 开发策略，而不是使用 gem 来重新处理您的 CSS。”

详细说明该问题的博文：[https ://web.archive.org/web/20140802125307/https://sasscast.tumblr.com/post/38673939456/sass-and-media-queries](https://web.archive.org/web/20140802125307/https://sasscast.tumblr.com/post/38673939456/sass-and-media-queries)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:16:20.623

我会假设只需要运行一次媒体查询检查（然后在其中加载所有样式）会比检查每个选择器要少，但我没有确凿的证据。如果您获得了[Chrome 的 Canary 版本，](https://tools.google.com/dlpage/chromesxs/)则其中包含媒体查询工具。

当您使用 SASS 时，这篇文章可能会引起您的兴趣 - [http://css-tricks.com/media-queries-sass-3-2-and-codekit/](http://css-tricks.com/media-queries-sass-3-2-and-codekit/)

# c++ - XPCOM CPP 代码无法在注册表中找到现有密钥

> ID：11626175
> 
> 赞同：0
> 
> 时间：2012-07-24T07:35:23.913
> 
> 标签：c++, firefox, registry, xpcom

这是我在 XPCOM CPP DLL 中使用的代码的简化示例，用于检查注册表中是否存在密钥。它检查是否存在 2 个键：`HKLM\SOFTWARE\Microsoft`并且`HKLM\SOFTWARE\Microso`两者都具有相同的权限，但是此代码找到了第一个，而第二个则没有……知道为什么吗？

```
nsCOMPtr<nsIWindowsRegKey> regKey = 
    do_CreateInstance("@mozilla.org/windows-registry-key;1");
if (!regKey) {
    log("can't create @mozilla.org/windows-registry-key;1");
    return -1;
}
NS_NAMED_LITERAL_STRING(key2,
   "SOFTWARE\\Microsoft");
if (NS_FAILED(regKey->Open(nsIWindowsRegKey::ROOT_KEY_CLASSES_ROOT,
                          key2, nsIWindowsRegKey::ACCESS_QUERY_VALUE))) {

     // FAILED
    LOG("regKey:: no such key");

}

NS_NAMED_LITERAL_STRING(key1,
   "SOFTWARE\\Microso");
if (NS_FAILED(regKey->Open(nsIWindowsRegKey::ROOT_KEY_CLASSES_ROOT,
                          key1, nsIWindowsRegKey::ACCESS_QUERY_VALUE))) {

    // FAILED
    LOG("regKey:: no such key");

} 
```

*编辑：*为了清楚起见，我自己创建了一个注册表项，称为`HKLM\SOFTWARE\Microso`，我可以通过`regedit`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:56:57.520

nsIWindowsRegKey.Open 通过 RegOpenKeyEx WinAPI 函数实现。此函数需要作为参数传递的现有相对路径，并且不支持模板。如果注册表中没有完全相同的路径，它就会下降。**SOFTWARE\Microsoft**存在于 HKLM 根空间中，**HKLM\SOFTWARE\Microso**不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T22:56:22.757

问题很可能是您正在使用 x64 regedit 查看注册表，然后期望 Firefox 具有相同的视图。但是，regedit 是一个 x64 应用程序，而通常的 Firefox 构建是 x86 并在 32 位子系统中运行（通过[WoW64](http://en.wikipedia.org/wiki/WoW64)）。当 x86 应用程序访问`HKLM\Software`密钥时，它会被重定向到`HKLM\Software\Wow6432Node`. 您可以运行`c:\Windows\SysWOW64\regedit.exe`而不是`c:\Windows\regedit.exe`查看 x86 应用程序获取的注册表视图。

因此，您的 XPCOM 组件实际上是在尝试访问`HKLM\Software\Wow6432Node\Microsoft`和`HKLM\Software\Wow6432Node\Microso`- 前者存在而后者不存在。如果您想访问“真实”的注册表项，则必须在的第三个参数中传递[`WOW64_64`标志](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIWindowsRegKey#Access_constants)`nsIWindowsRegKey.open()`（它对应于可以传递给[WinAPI 函数的](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724897%28v=vs.85%29.aspx)[`KEY_WOW64_64KEY`标志](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724878%28v=vs.85%29.aspx)）：[`RegOpenKeyEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724897%28v=vs.85%29.aspx)

```
NS_NAMED_LITERAL_STRING(key1,
   "SOFTWARE\\Microso");
if (NS_FAILED(regKey->Open(nsIWindowsRegKey::ROOT_KEY_CLASSES_ROOT, key1,
                          nsIWindowsRegKey::ACCESS_QUERY_VALUE | nsIWindowsRegKey::WOW64_64))) {

    // FAILED
    LOG("regKey:: no such key");

} 
```

# tsql - 直接通过 T-SQL 将日期时间 YYYYMMDD 转换为 DDMMYYYY

> ID：11626176
> 
> 赞同：3
> 
> 时间：2012-07-24T07:35:24.597
> 
> 标签：tsql, datetime

我可以将我的日期时间填充为 2012-07-24 15:31:21

但是，它不是我想要的格式。这是我当前的查询

```
SELECT CONVERT(datetime2(0), convert(varchar(20),GETDATE() , 120)) 
```

我需要上面显示的日期时间，格式为 DD/MM/YYYY HH:MM:SS。

我到处找遍了。在 T-SQL 中转换日期格式通常可用于数据类型 Varchar。有人可以建议我直接通过 SQL 格式化日期时间吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T07:39:17.263

要么这样，要么您可以直接将日期/时间格式指定为 ToString 方法的参数：

```
string dateTime = DateTime.Now.ToString("dd-MM-yyyy hh:mm:ss"); 
```

或第二个答案是

您可以使用任何支持 dd-mm-yyyy 格式的文化，例如法语文化。

例如，现在以 dd-mm-yyyy 格式格式化日期时间，您可以执行以下操作：

```
cultureInfo culture = new cultureinfo("fr-FR");
string oFormatedDate = dtNow.ToString("d", culture); 
```

# java - 如何在地图视图上放置一个透明按钮？

> ID：11626182
> 
> 赞同：0
> 
> 时间：2012-07-24T07:35:43.770
> 
> 标签：java, android, button, android-mapview

我想在地图视图上放置透明（地图可见）按钮？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:56:50.123

尝试在按钮 android:background="@null" 或 android:background="@android:color/transparent" 上使用它 编辑：放置使用相对布局：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent">
<com.google.android.maps.MapView android:id="@+id/google_maps"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:apiKey="@string/maps_key"/>
<Button android:id="@+id/googlemaps_select_location"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:text="Select"/>
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:11:27.210

您可以将地图包装在 FrameLayout 或其他东西中。然后将一个按钮添加到 FrameLayout 并`android:layout_alignParentRight="true"`用于 Right、Left、Top 和 Bottom。然后，该按钮会将其边缘与 FrameLayout 的边缘对齐，后者应该包裹地图。

# asp.net - ASP.NET ScriptControl & ASP.NET MVC 3

> ID：11626183
> 
> 赞同：1
> 
> 时间：2012-07-24T07:35:50.337
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我不熟悉 ASP.NET MVC 3（更一般的是 ASP.NET MVC）。我找不到任何信息是否可以在 ASP.NET MVC 3 项目中使用我的 ScriptControl。ScriptControl 是为我以前在 ASP.NET WebForms 中的项目实现的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:43:05.097

是的，你可以使用它。不要使用 Razor 在 MVC 3 中创建新页面，而是使用 asp.net 网页作为您的视图。

虽然不推荐。去做吧，如果你太绝望了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:54:26.440

更常见的是使用 jquery.unobtrusive-ajax.js 而不是 ScriptManager 脚本来使用 ajax，并且使用 bundle（仅适用于 Mvc4）而不是 ScriptManager 来管理不同配置的脚本链接以及缩小组合、控制缓存等更强大

# android - 使用 Intent 在 android 中启动 CallLog 活动

> ID：11626184
> 
> 赞同：2
> 
> 时间：2012-07-24T07:35:58.900
> 
> 标签：android

我可以使用意图启动呼叫日志活动

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setData(android.provider.CallLog.Calls.CONTENT_URI);
startActivity(intent); 
```

但是在从呼叫日志活动中选择任何日志（传入、传出或未接）时，它将发起呼叫。

但根据我的要求，我想使用上述意图使用 action`Intent.ACTION_PICK`和`startActivityForResult(intent)`.

请分享任何想法来做同样的事情。

# javascript - 如何在 jQuery 中构建一个可关闭的面板？

> ID：11626189
> 
> 赞同：0
> 
> 时间：2012-07-24T07:36:05.547
> 
> 标签：javascript, jquery-ui, google-maps, user-interface

我正在尝试模拟 maps.google.com 页面左侧的滑动面板：

![谷歌地图用户界面](../Images/15a7fb3c18be8d71e68996a75280a5ef.png)

[在MapQuest](http://open.mapquest.com/)页面上可以找到一个类似的面板。

我需要面板与页面重叠（这样关闭面板不会导致重新绘制地图）并且在页面加载时默认打开。

我喜欢这个[滑动的 jQuery 登录面板](http://web-kreation.com/demos/Sliding_login_panel_jquery/#)，但我看不到如何修改它以从左侧而不是顶部工作。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:51:18.783

在这两页上，你所说的元素都有

```
position: absolute; 
```

如果要给出相对于其父级的绝对位置，则将父级的位置设置为相对。

如果您想将其定位在左侧，只需将其 left 属性设置为：

```
left: 0; 
```

因此，就像在您链接到的 jQuery 滑动面板中一样，您可以在不影响页面布局的情况下扩展和收缩面板。

希望有帮助。

# android - Roboguice 和模拟：如何让 roboguice 在测试时注入模拟服务，否则使用 REAL？

> ID：11626191
> 
> 赞同：4
> 
> 时间：2012-07-24T07:36:08.933
> 
> 标签：android, dependency-injection, mocking, mockito, roboguice

刚刚被roboguice弄湿了，我喜欢它！

我有很多依赖于数据库和 LocationManger 等的方法，因此当我测试它们时，它使用真实的对象，我想模拟这些对象，以便在测试时我不必依赖任何东西。

我也一直在使用 mockito，但我不确定我该怎么做？

我知道 android 系统带有各种模拟，但我认为用 mockito 滚动我自己会更好？

无论哪种情况，我都需要在测试时注入它们。

有人对此有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T18:15:54.727

看看[https://github.com/roboguice/roboguice/blob/master/astroboy/src/test/java/org/roboguice/astroboy/controller/Astroboy2Test.java](https://github.com/roboguice/roboguice/blob/master/astroboy/src/test/java/org/roboguice/astroboy/controller/Astroboy2Test.java)使用`Modules.override()`一些测试覆盖默认模块 -具体配置。

```
@Before
public void setup() {
    // Override the default RoboGuice module
    RoboGuice.setBaseApplicationInjector(Robolectric.application, RoboGuice.DEFAULT_STAGE, Modules.override(RoboGuice.newDefaultRoboModule(Robolectric.application)).with(new MyTestModule()));
    // For roboguice 4.0 and robolectric 3.1.2
    RoboGuice.getOrCreateBaseApplicationInjector(RuntimeEnvironment.application, RoboGuice.DEFAULT_STAGE, Modules.override(RoboGuice.newDefaultRoboModule(RuntimeEnvironment.application)).with(new MyTestModule()));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T13:33:18.760

只是为了扩展这一点，因为它是我在寻找它时最热门的......

一旦您将测试类（或测试运行程序）设置为覆盖默认 RoboGuice 模块，然后将覆盖的 RoboGuice 模块设置为（在本例中）

```
public class TestModule extends AbstractModule {
    @Override
    protected void configure() {
        bind(LocationManager.class).toInstance((LocationManager) Robolectric.application.getSystemService(Context.LOCATION_SERVICE));
    }
} 
```

然后 RoboGuice 将在您的测试中注入与您的应用程序中相同的位置管理器。您可以实例化它的影子并设置预期位置、提供者状态等。

```
@Test
public void mapLoadsCenteredOnPhoneLocationWhenNoTargetIntent() {
    Location l = new Location("test");
    l.setLatitude(Double.parseDouble("52.222"));
    l.setLongitude(Double.parseDouble("-2.222"));
    shadowLocationManager.setLastKnownLocation(GPS_PROVIDER, l);
    shadowLocationManager.setProviderEnabled(GPS_PROVIDER, true);
    shadowLocationManager.setProviderEnabled(NETWORK_PROVIDER, false);
            //snip
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-29T10:17:27.667

@Martin：正如保罗所说，您可以为您的测试位置管理器注入 Robolectric 和 Roboguice。但是我认为用 Mockito 模拟会更好，这篇[文章](http://hintdesk.com/android-basic-testing-with-unit-test-android-test-and-roboguice-robolectric-mockito/)很适合开始。您创建一个模拟对象并将其绑定到您的界面。您还可以找到模拟和注入的示例。

# javascript - 登录 AJAX 调用或 URL 更改

> ID：11626195
> 
> 赞同：0
> 
> 时间：2012-07-24T07:36:31.507
> 
> 标签：javascript, ajax

我可以添加每次用户执行 AJAX 调用或更改 URL（退出我的页面）时记录的 javascript 代码吗？我希望这段代码自动识别 ajax 调用，我不想在任何地方手动进行一个ajax调用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:03:13.330

如果你愿意使用 jQuery 而不是试试这个：

为所有 ajax 请求创建一个通用函数

```
function ajxCall(url,data,method)
{
  $('#logDiv').html(url+'<br>'); // Placing all request URLs in a debug div
  $.ajax({url : url,
          method : method ,
          data : data ,  // data will be a jason object or you can set it by changing dataType
          dataType:'JSON'})
} 

function someEvent() // assign this handler to your event
{
  ajaxCall('http::localhost/login.php',            
           {username:'my_user',password:my_password,
           'POST'});
} 
```

您也可以使用 jQuery 创建它。我刚刚描述了这个想法。希望它有所帮助:) 问候。

# erlang - erlang:start_timer/3 与 timer:send_after/3

> ID：11626199
> 
> 赞同：6
> 
> 时间：2012-07-24T07:37:11.163
> 
> 标签：erlang

我应该更喜欢什么：

```
erlang:start_timer(Ttl, self(), time_to_die) 
```

或者

```
timer:send_after(Ttl, self(), {timeout, time_to_die}) 
```

如果我的用例是将单个原子消息发送到 gen_server？我预计会有数十万个 gen_servers，其中每一个都需要有一个关联的 TTL 计时器事件。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-24T11:17:51.817

Erlang Efficiency Guide的[Common Caveats 部分](http://www.erlang.org/doc/efficiency_guide/commoncaveats.html#id60818)说：

> `erlang:send_after/3`使用和创建定时器比使用模块`erlang:start_timer/3`提供的定时器更有效。`timer`该`timer`模块使用单独的进程来管理计时器，如果许多进程频繁创建和取消计时器（尤其是在使用 SMP 仿真器时），该进程很容易过载。
> 
> `timer`模块中不管理定时器的函数（如`timer:tc/3`or `timer:sleep/1`），不调用 timer-server 进程，因此是无害的。

# python - 依次遍历两个文件中的行

> ID：11626201
> 
> 赞同：3
> 
> 时间：2012-07-24T07:37:13.680
> 
> 标签：python

我有两个文件，我想对它们执行一些逐行操作（一个接一个）。我现在使用两个循环来实现这一点。有没有办法在一个循环中做到这一点（在 python 2.7 中）：

```
for fileName in [fileNam1,fileName2]:
    for line in open(fileName):
        do something 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T07:48:02.103

正如已经指出的那样，`itertools.chain`这是一个选项，但是还有另一个有用的标准模块，它避免了显式使用`open`...

```
import fileinput
for line in fileinput.input(['file1.txt', 'file2.txt']):
    print line 
```

这也有一些方便的功能，用于行号和文件名等...查看[http://docs.python.org/library/fileinput.html上的文档](http://docs.python.org/library/fileinput.html)

**回复评论 - 与上下文管理器一起使用**

```
from contextlib import closing

with closing(fileinput.input(['file1.txt', 'file2.txt'])) as infiles:
    for line in infiles:
        pass # stuff 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T07:40:43.023

该[`itertools`](http://docs.python.org/library/itertools.html?highlight=chain#itertools.chain)模块为此提供了一个工具。试试这个：

```
import itertools

for line in itertools.chain(open(file_name1), open(file_name2)):
    # do something 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-24T07:46:34.623

不完全是您所要求的，但 fileinput 模块可能很有用。

```
"""帮助类快速编写所有标准输入文件的循环。

典型用途是：

    导入文件输入
    对于 fileinput.input() 中的行：
        流程（线）

这会遍历 sys.argv[1:] 中列出的所有文件的行，
如果列表为空，则默认为 sys.stdin。如果文件名是 '-' 它
也被 sys.stdin 取代。指定一个替代列表
文件名，将其作为参数传递给 input()。单个文件名是
也允许。

函数 filename(), lineno() 返回文件名和累积行
刚刚读取的行号；filelineno() 返回其
当前文件中的行号；isfirstline() 返回真当且仅当
刚刚读取的行是其文件的第一行；isstdin() 返回真
如果该行是从 sys.stdin 中读取的。函数 nextfile() 关闭
当前文件，以便下一次迭代将读取第一行
下一个文件（如果有）；未从文件中读取的行将不计入
朝向累积行数；文件名直到
在读取下一个文件的第一行之后。函数关闭（）
关闭序列。
...

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T07:44:21.603

也许您可以使用列表理解或 map、reduce、filter 等来避免内部循环。这完全取决于您的需要。你想做什么？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T08:05:59.720

这是我的第一个回答，如有错误请见谅

```
>>> file1 = open('H:\\file-1.txt')
>>> file2 = open('H:\\file-2.txt')
>>> for i, j in map(None, file1.readlines(), file2.readlines()):
        print i,j 
```

# objective-c - NSOutlineview 自定义

> ID：11626205
> 
> 赞同：0
> 
> 时间：2012-07-24T07:37:36.030
> 
> 标签：objective-c, macos, cocoa, nsoutlineview

我需要更改 NSOutlineview 中分组项目标题的字体颜色，并在将鼠标悬停在分组项目的右侧时隐藏显示/隐藏按钮。

我在任何 Apple 文档中都找不到如何执行此操作。谁能指出我正确的方向...

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T11:05:55.283

我推荐使用基于视图的 NSOutlineView。因为 NSView 继承自 NSResponder，你可以使用这些事件来做你需要的事情：

```
- (void)mouseEntered:(NSEvent *)theEvent
- (void)mouseExited:(NSEvent *)theEvent 
```

[NSResponder 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nsresponder_Class/Reference/Reference.html)中的更多信息。

# jquery - Jquery 测试 $(this) 是否没有特定的类

> ID：11626209
> 
> 赞同：4
> 
> 时间：2012-07-24T07:38:00.837
> 
> 标签：jquery

```
if ($(this).hasClass('white')) {console.log('white');}; 
```

等于 true 并打印到控制台。我如何测试它是否`white`在 $(this) 选择器上没有类？我有

```
if ($('this:not(.white)')) {console.log('not white');};
and
if ($(this).not('.white')) {console.log('not white');};
and
several other combinations? 
```

我知道我可能应该使用 .not() 方法，但不知道如何将 :not 选择器与`$(this)`选择器结合使用。

我希望当元素被点击时，我可以看到一个正确和一个错误的陈述。（它有或没有“白色”类）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-24T07:39:57.153

你可以使用`not logical operator`，试试这个：

```
if (!$(this).hasClass('white')) {console.log('not white');}; 
```

> 如果其单个操作数可以转换为 true，则返回 false；否则，返回真。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-24T21:52:52.563

我认为这可能对您了解您在这两个陈述中跨越的领域有所帮助。

```
if ($('this:not(.white)')) {console.log('not white');}; 
```

该语句将不起作用，因为选择器 -`this:not(.white)`将查找这种类型的元素：`<this class="white"></this>`. 换句话说，您的选择器正在寻找一个`this`不属于 class的 type 的 HTML 元素`white`。

```
if ($(this).not('.white')) {console.log('not white');}; 
```

在这种情况下，您正在使用`$(this)`，它将`this`关键字引用的 JavaScript 对象包装在 jQuery 对象中，从而允许您针对该 DOM 元素使用 jQuery 方法。

为了获得您正在寻找的效果，您必须了解您传递给 a 的任何 STRING 选择器`$(selector)`都受限于 CSS 可以匹配的选择器。因此 - 你不能那样使用你的“this”关键字。

但是，您可以执行以下操作来检查您的效果：

```
if ($(this).is(':not(.white)')) {
    console.log('Not White! :(');
} else {
    console.log('White! :D');
} 
```

因为您将`this`其放入`$()`块内，所以结果是应用的任何进一步的 jQuery 链式方法都将针对`this`您当前上下文中引用的 DOM 元素进行解析。然后，您将使用 CSS`:not()`选择器检查类。

但是请注意，这种方法的局限性在于，如果出于某种原因`this`引用了多个 DOM 元素，则仅当所有此类元素都与选择器匹配`.is()`时才会返回结果。`true`所以 - 考虑这个例子：

```
<div class="one white element"></div>
<div class="one black element"></div>
<div class="one green element"></div>

$('.one.element').bind('click', function () {
    // In this context, 'this' refers to the element which was clicked.
    console.log( $(this).is(':not(.white)') );

    // If you click either the black or green element, you will get a 'true',
    // because those elements are not .white.
    // If you click the white element, you will get a 'false',
    // because that element does have the .white class
}); 
```

问题是`this`大多数 JavaScript 应用程序中的上下文经常发生变化，因此我认识的大多数程序员尽可能避免使用它。比上面更安全的是：

```
$('.one.element').bind('click', function (ev) {
    var $el = $(ev.target);
    console.log( $el.is(':not(.white)') );

    // In this case, you avoid 'this' entirely, and target the actual element
    // from which the event originated.
}); 
```

但是，在这种情况下，您会遇到嵌套项引发错误目标的问题。考虑这种情况：

```
<div class="parent">
    <div class="child">
        text
    </div>
</div>

$('.parent').bind('click', function (ev) {
    var $el = $(ev.target);
    console.log( $el.attr('class') );
}); 
```

在这种情况下，如果您单击`parent`自身，您将得到`parent`结果。但是，如果单击子元素，即使事件绑定到父元素，也会`child`因为事件冒泡而得到。实际事件是由子元素引发的，因此您定位错误。

所以 - 通常当你在构建插件时，小心控制你的引用是明智的。

*例子*

```
<div class="parent">
    <div class="child">
        text
    </div>
</div>

var $parent = $('.parent').bind('click', function () {
    console.log( $parent.attr('class') );
}); 
```

现在，无论您单击父项还是子项都没有关系，您会得到正确的结果，并且您知道所引用的内容。不会混淆`this`上下文变化，也不会使用从属节点的属性。

顺便说一句-此处其他答案中发布的任何方法也是有效的。

```
// The following will all tell you if the node HAS the class:
$(selector).hasClass('white')
$(selector).is('.white')
$(selector).is('[class*=white]')

// The following will all tell you if the node DOES NOT have the class:
!$(selector).hasClass('white')
$(selector).not('.white')
$(selector).is(':not(.white)') 
```

并且 - 还有其他方法可以做到这一点，但其中任何一种都应该适用于您的目的。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T07:40:46.137

使用逻辑非运算符

```
if (!$(this).hasClass('white')) {console.log('not white');}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T07:39:58.210

```
!$(this).hasClass('white') 
```

使用纯 JavaScript

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-24T07:50:39.370

不使用`!`，例如：

```
if (!$(this).hasClass('white'))
  ... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-24T08:15:25.377

或者：

```
<div class="vvvv vvvvv white nnnnnn" id="test"></div>

if($("#test[class*=white]").length > 0){
    console.log('white');
}else{
    console.log('no white');
} 
```

# sql - 参数化的 java 持久性查询是否容易受到 sql 注入的影响？

> ID：11626217
> 
> 赞同：1
> 
> 时间：2012-07-24T07:38:41.270
> 
> 标签：sql, sql-injection, hsqldb, jpql

例如。我有：

```
Input:
ArrayList<Integer> idlist
String nameText

    String q = "DELETE FROM myTable AS a WHERE a.name LIKE '%' || :name || '%' OR a.id IN (:idlist)";

    Query query = entityManager.createQuery(q);
    query.setParameter("name", nameText);
    query.setParameter("idlist", idlist);

query.executeUpdate(); 
```

上面的代码片段是否容易受到 sql 注入的影响？我还有一个问题是上述查询的构建方式与我们是否按标准形成查询之间存在差异：

```
CriteriaBuilder cb = em.getCriteriaBuilder();

  CriteriaQuery<Country> q = cb.createQuery(Country.class);
  Root<Country> c = q.from(Country.class);
  q.select(c); 
```

一个比另一个有优势吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T07:44:09.167

不，它不会。这就是参数化查询的全部意义所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-12T14:18:17.053

没有准备好的语句进行 SQL 注入的机会。

但是如果参数的值是由用户输入的，则表达式`LIKE % || :name || %`可能会被误用，即只输入一个字母并删除 a.name 列中任何位置包含该字母的所有记录

# xml - 使用 XSLT 转换 XML 异常：“System.Text.StringBuilder.ToString() 处的 System.OutOfMemoryException”

> ID：11626218
> 
> 赞同：0
> 
> 时间：2012-07-24T07:38:41.617
> 
> 标签：xml, xslt, out-of-memory, stringbuilder, stringwriter

嗨，我在使用**XSLT转换****XML**时遇到了一个严重的问题：

 **```
System.Xml.Xsl.XslTransform XSLTR = new System.Xml.Xsl.XslTransform();
XSLTR.Transform(XPathNavigator input, XsltArgumentList args, TextWriter output); 
```

我输入了有 20.000 行的 XML。它抛出以下错误：

> System.OutOfMemoryException：引发了“System.OutOfMemoryException”类型的异常。在 System.Text.StringBuilder.ToString() 在 System.IO.StringWriter.ToString()

任何人都可以提供一些解决此问题的建议吗？提前非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T12:10:45.763

尽量避免将转换结果存储在字符串中，如果您想要一个文件作为转换结果，那么`Transform`方法的重载允许您写入`FileStream`：

```
XslCompiledTransform proc = new XslCompiledTransform(); 

proc.Load("sheet.xsl"); 

using (FileStream fs = File.OpenWrite("result.xml")) 
{ 
  proc.Transform(xmlDocumentInstance, null, fs);
} 
```

如果你想要一个`XmlDocument`结果，你可以实现如下：

```
XmlDocument resultDoc = new XmlDocument();

using (XmlWriter xw = resultDocument.CreateNavigator().AppendChild()) 
{ 
  proc.Transform(xmlInputDocumentInstance, null, xw); 
  xw.Close();
} 
```**

# ruby-on-rails - 在方法之间传递数据时的正确技术

> ID：11626220
> 
> 赞同：3
> 
> 时间：2012-07-24T07:38:42.130
> 
> 标签：ruby-on-rails, ruby

如果您在模型或控制器中有两个方法，并且您想在方法之间传递一个变量，例如

```
def foo
  @param = 2
  @test = 1
  callee
  #do something with @test
end

def callee
  @test += @param
end 
```

使用实例变量来执行此操作还是像这样的常规变量更好

```
def foo
  param = 2
  test = 1
  test = callee(param, test)
  #do something with test
end

def callee(param, test)
  test += param
  test
end 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:10:43.313

这个问题没有明确的答案，它在很大程度上取决于上下文 - 你需要问的是“哪种方法最能展示代码的意图”。您绝对应该对您正在谈论的模型/控制器类进行测试。

作为一个非常粗略的指导方针：

当方法是类的公共 API 的一部分并且它改变了类实例的内部状态时，第一种方法很常见（尽管如果您像示例中那样链接公共方法，这可能是代码异味的迹象。）这可能会在模型对象中更常见。

第二种方法通常出现在您调用的方法是一个私有的便利方法时，它会排除一些代码重复，或者是一个对参数执行非常特殊的操作并返回一些结果的方法（在这种情况下，它可能应该被分解为实用程序类。）这可以在模型或控制器对象中看到。

如果您的目标是可维护的 OO 代码，那么 SOLID 设计的原则是非常好的指导方针 - 请在此处查看 Bob 大叔关于它们的文章：

[http://blog.objectmentor.com/articles/2009/02/12/getting-a-solid-start](http://blog.objectmentor.com/articles/2009/02/12/getting-a-solid-start)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T07:47:02.813

这取决于您的需求。此外，您传递变量的函数的原型也很重要。如果您希望该方法在未经您许可的情况下不更改任何参数，则应使用您的第二个实现。但是，如果您信任该功能，则可以使用第一种方法。这是一个被称为“引用调用”和“值调用”的大话题。您可以查看以下链接；

[http://www.exforsys.com/tutorials/c-language/call-by-value-and-call-by-reference.html](http://www.exforsys.com/tutorials/c-language/call-by-value-and-call-by-reference.html)

# android - android 位图大小超出 vm 预算

> ID：11626222
> 
> 赞同：0
> 
> 时间：2012-07-24T07:38:47.170
> 
> 标签：android, bitmap

> **可能重复：**
> [Android：将图像加载到位图对象时出现奇怪的内存不足问题](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object)

```
Bitmap bitmap = Bitmap.createBitmap(view.getWidth(),view.getHeight(),Bitmap.Config.ARGB_8888); 
```

为什么这段代码抛出异常：java.lang.OutOfMemoryError:bitmap size超出VM预算？我只是得到屏幕上显示的视图的宽度和高度。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:45:12.080

参考这篇文章

[https://stackoverflow.com/a/823966/1441666](https://stackoverflow.com/a/823966/1441666)

要修复 OutOfMemory，您应该执行以下操作：

```
BitmapFactory.Options options=new BitmapFactory.Options();
options.inSampleSize = 8;
Bitmap preview_bitmap=BitmapFactory.decodeStream(is,null,options); 
```

这个 inSampleSize 选项减少了内存消耗。

# zend-framework - 在 MAMP 2.1 上安装 Zend Optimizer

> ID：11626224
> 
> 赞同：0
> 
> 时间：2012-07-24T07:39:05.687
> 
> 标签：zend-framework, mamp, zend-optimizer

我刚刚升级到 MAMP Pro 2，并注意到由于 Apache 64bit 或类似的东西，他们不再支持 Zend Optimizer。

无论如何，我有一个需要它的网站，但我不知道如何在 MAMP 2 上安装 Zend Optimizer，只是做了一个教程，在我在终端中运行了一些命令后，Apache 崩溃并停止工作，所以我不得不重新安装我的MAMP 设置。

我目前正在运行 PHP 5.2.17。

任何帮助都会很棒:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T12:46:17.107

由于您的应用程序还需要旧版本的 PHP，因此最简单的解决方案是安装以前版本的[MAMP 1.9](http://www.mamp.info/downloads/releases/MAMP_MAMP_PRO_1.9.6.1.dmg.zip)，其中包括 PHP 5.2.17 和 Zend Optimizer 3.3.9。

旧版本的 MAMP 仅为 32 位，但在 Lion/Mountain Lion 下仍可正常运行（或者至少我不知道除了在应用程序包中不包含 64 位之外的任何明显问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-26T22:55:11.837

它正在工作！还有在 OS X Mountain Lion 上！需要 PHP 5.2.17

[适用于 Mac OS X 的 Zend 优化器](http://www.joomla-show.ru/item/34-ustanavlivaem-zend-optimizer-v-mamp-mac-osx-lion-1072)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-26T08:21:33.803

在这里，我逐步帮助自己安装 Zend Guard Loader。我也为 Zend Optimizer 做同样的过程。我希望你觉得这对你有帮助。

[我写的解决方案](http://www.quora.com/How-do-you-install-Zend-Guard-Zend-Optimizer-on-MAMP-so-that-you-can-locally-host-Zend-encrypted-files/answer/Anh-Ho)

# android - 意图动画

> ID：11626229
> 
> 赞同：1
> 
> 时间：2012-07-24T07:39:26.363
> 
> 标签：android, android-animation

请选择以下设置->显示->动画并选择“所有动画”！然后你可以按应用程序图标，意图将作为 BlowUp 动画出现，为此你可以发送任何样本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:47:46.033

请参考SO的这个[答案](https://stackoverflow.com/a/6056067/964707)。也参考[这个](http://blog.stylingandroid.com/archives/129)

底部动画：

```
 <?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/accelerate_decelerate_interpolator"
    android:fromYDelta="100%p"
    android:toYDelta="50%p" 
    android:duration="300"
/> 
```

# asp.net - 在 ASP.NET 中搜索类似 CRM 2011 的 Ui 控件

> ID：11626239
> 
> 赞同：1
> 
> 时间：2012-07-24T07:40:04.833
> 
> 标签：asp.net, user-interface, dynamics-crm, dynamics-crm-2011

我刚接到一个分析任务，为我们的产品提供一个替代的 Web UI。我的老板喜欢 CRM 2011，所以他想获得一些外观相似的东西，甚至 CRM 自己控制（如果有的话）。不幸的是，我们无法建立在 CRM 之上，因为我们有非常复杂的需求和非常古老的遗留代码库。

我的问题：鉴于此屏幕截图![在此处输入图像描述](../Images/95cf26b14507c28577f544e1b3787ac0.png) ，Web 开发人员已经可以使用多少，因为他们以 WebForms 或 MVC 为目标。它似乎在 MS 世界中使用了一些“标准”UI 方法（非常类似于 Office/桌面），例如功能区，它在 .NET 4.5 中使用 WPF“对所有人免费”，所以 Web 控件可能也是如此？但是，通过快速搜索无法找到它。

如果这是一条死胡同，那么第三方供应商呢？有没有人让你有机会使用功能区和类似桌面的 web 控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:57:28.857

Telerik 为 dotNet 提供了一些非常好的控件。这是您正在寻找的功能区：http: [//demos.telerik.com/aspnet-ajax/ribbonbar/examples/overview/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/ribbonbar/examples/overview/defaultcs.aspx)

# android - Android 多屏幕尺寸支持

> ID：11626241
> 
> 赞同：0
> 
> 时间：2012-07-24T07:40:09.213
> 
> 标签：android, android-layout, screen, android-screen-support

我为以下屏幕制作了布局：

> 2.7' QVGA
> 
> 3.2' HVGA
> 
> 5.1' WVGA
> 
> 3.7' 连结一号

现在我想为 540 像素 X 960 像素、720 像素 X 1280 像素、480 X 854 制作布局屏幕，但我找不到任何方法。支持所有尺寸的手机和平板电脑的确切方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T10:20:27.137

您可以动态计算出屏幕的尺寸

```
Display mDisplay= activity.getWindowManager().getDefaultDisplay();
int width= mDisplay.getWidth();
int Height= mDisplay.getHeight(); 
```

可以使用通过此方法获得的宽度和高度来设置布局。

# cuda - CUDA sincospi 函数精度

> ID：11626247
> 
> 赞同：3
> 
> 时间：2012-07-24T07:40:35.550
> 
> 标签：cuda

我四处寻找，但找不到该函数如何计算或使用它的 PI 部分。对于我的项目，我使用了一个定义的常量，它的 PI 精度为小数点后 34 位。但是，这远远超过了为 PI 定义的正常 math.h 常量（小数点后 16 位）。

我的问题是 sincospi 用于计算其答案的 PI 有多精确？它只是使用 math.h 中的 PI 常数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T01:29:22.350

sincospi() 的最大 ulp 误差与 sincos() 的最大 ulp 误差相同：结果与正确舍入的参考值相差最多 1 ulp，或者换句话说，结果与无穷大的参考值相差不到 1.5 ulp精确的数学结果。平均而言，超过 90% 以上的结果是正确四舍五入的。所有 CUDA 数学函数的最大观察误差记录在 CUDA C 编程指南的附录中。sincospi(x) 的精度优于 sincos(M_PI*x) 实现的精度，因为后者由于函数参数的相乘而产生额外的舍入误差。

# android - 相同的布局在三星 Galaxy Tab 上看起来不同

> ID：11626248
> 
> 赞同：1
> 
> 时间：2012-07-24T07:40:36.187
> 
> 标签：android, android-layout

我正在开发一个 Android 2.2.2 应用程序，它将支持多种屏幕尺寸并且所有屏幕都是纵向的。我不支持横向。

我在 HTC Desire 和三星 Galaxy Tab 7.7 上测试了以下布局。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/no_conectado"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/labelSelGateName"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal"
        android:layout_marginTop="80dp" />

    <TextView
        android:id="@+id/labelSelOpened"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal" />

    <ProgressBar
        android:id="@+id/indicatorActivityView"
        android:layout_width="20dp"
        android:layout_height="20dp"
        android:layout_marginTop="22dp"
        android:layout_gravity="center_horizontal" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="110dp"
        android:layout_marginTop="60dp"
        android:orientation="horizontal" >

        <ImageButton
            android:id="@+id/btnMyGates"
            android:layout_width="50dp"
            android:layout_height="110dp"
            android:layout_marginLeft="20dp"
            android:layout_weight=".33"
            android:background="@null"
            android:contentDescription="@string/layout_empty"
            android:onClick="onGateClick" />

        <LinearLayout
            android:layout_width="90dp"
            android:layout_height="110dp"
            android:layout_weight=".33"
            android:orientation="vertical" >

            <ImageButton
                android:id="@+id/btnOpen"
                android:layout_width="90dp"
                android:layout_height="55dp"
                android:layout_gravity="center_horizontal"
                android:layout_marginLeft="10dp"
                android:layout_marginRight="10dp"
                android:background="@null"
                android:contentDescription="@string/layout_empty"
                android:onClick="onOpenDoorClick" />

            <ImageButton
                android:id="@+id/btnClose"
                android:layout_width="90dp"
                android:layout_height="50dp"
                android:layout_gravity="center_horizontal"
                android:layout_marginTop="10dp"
                android:layout_marginLeft="10dp"
                android:layout_marginRight="10dp"
                android:background="@null"
                android:contentDescription="@string/layout_empty"
                android:onClick="onCloseDoorClick" />

        </LinearLayout>

        <ImageButton
            android:id="@+id/btnOptions"
            android:layout_width="50dp"
            android:layout_height="110dp"
            android:layout_marginRight="20dp"
            android:layout_weight=".33"
            android:background="@null"
            android:contentDescription="@string/layout_empty"
            android:onClick="onOptionClick" />

    </LinearLayout>

    <ImageButton
        android:id="@+id/btnFaqs"
        android:layout_width="110dp"
        android:layout_height="60dp"
        android:layout_gravity="center_horizontal"
        android:layout_marginTop="10dp"
        android:background="@null"
        android:contentDescription="@string/layout_empty"
        android:onClick="onFAQClick" />

    <ImageButton
        android:id="@+id/btnInfo"
        android:layout_width="110dp"
        android:layout_height="60dp"
        android:layout_gravity="right"
        android:layout_marginTop="20dp"
        android:background="@null"
        android:contentDescription="@string/layout_empty"
        android:onClick="onInfoClick" />

</LinearLayout> 
```

我有 ldpi、mdpi、hdpi 和 x-hdpi 的图像。

背景图像看起来很棒，但是当我在三星 Galaxy Tab 上测试它时，所有小部件（`TextView`、`ProgressBar`、`ImageButton`等）都不在正确的位置。

我使用“Nexus One”作为模型在 Eclipse 上设计了这个布局。

[在这里](https://stackoverflow.com/questions/11625378/create-a-multiple-screen-android-application/11625622#comment15396479_11625622)，人们建议我为每种屏幕尺寸和密度仅使用一种布局，但这不起作用。我正在使用`dp`单位和`fill_parent`等，但它在 Galaxy Tab 上有所不同。

我需要`x-large`屏幕尺寸的布局吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T08:49:16.783

确实，您收到的建议很好：可能只有一个布局文件，但正如评论中已经建议的那样，即使您使用or ，***硬编码尺寸也不好***，特别是当您针对所有屏幕尺寸和可用的密度。 `dp``dip`

相反，您应该***将这些值替换为维度值的链接***。

例如，而不是 `android:layout_marginLeft="10dp"`，你会有类似的东西

```
android:layout_marginLeft="@dimen/textview_margin_left" 
```

其中**textview_margin_left**是在dimens.xml中定义的，在不同的文件夹中有不同的值；
可能在文件夹中***values*** : `<dimen name="textview_margin_left">10dp</dimen>`，
在文件夹中**values-large** : `<dimen name="textview_margin_left">20dp</dimen>`中，
而在**values-xlarge 中**：`<dimen name="textview_margin_left">30dp</dimen>`

但这只是一个示例，您必须测试所有尺寸和分辨率并为您的布局找到最佳值。在**Eclipse**模式下，`Graphical Layout`您可以轻松了解您的布局在各种设备上的外观，只需单击*Nexus One*并从列表中选择另一个模型，布局将自动更新。

此外，您可以移动`dimens.xml`所有文本大小，这对于 x-large 设备非常有用。

只使用一个`RelativeLayout`而不是多个叠瓦`LinearLayouts`可能也是一个好主意，并为您的对象使用相对定位，而不是一些硬编码的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T07:45:04.830

问题在于您在布局中使用静态值（100dp，60dp）。现在问题出在更高的分辨率上，这个 dp 不一样。

这意味着您应该为超大屏幕创建布局。我也不会使用那些静态值。比您的应用程序在许多不同的屏幕尺寸上表现良好！

祝你有美好的一天

苹果浏览器

# android - Android为什么在关闭手机飞行模式后要求输入SIM卡的密码

> ID：11626250
> 
> 赞同：0
> 
> 时间：2012-07-24T07:40:39.193
> 
> 标签：android, mode, airplane

正如我通过互联网阅读的那样，一些手机在飞行模式后再次要求输入密码，就像打开手机时一样。这跟手机品牌还是安卓版本有关？例如，有没有办法通过设置绕过它？

以及我如何以编程方式自动将我的密码提供给设备（我的意思是将我的密码保存在手机的应用程序中，这样当我关闭飞行模式时，设备不会询问我的密码，但它会从应用程序中检索它）和手机会恢复正常的！

对不起我的英语，但我一直在努力找出答案，但没有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:55:40.937

关于 PIN 请求，它肯定与手机的调制解调器以及它如何在电源方面进入和退出飞行模式有关。有些设备“优雅”地执行此操作（仅在启动时使用 PIN），而其他设备在飞行模式后需要它。

对于程序化方面，我没有答案，我认为这是不可能的。为什么不完全禁用 PIN，并选择输入一个好的密码来解锁您的手机呢？如今，手机比 SIM 卡更值钱，而 SIM 卡很容易被禁用。

# javascript - 本地数据库 sql 循环查询

> ID：11626257
> 
> 赞同：0
> 
> 时间：2012-07-24T07:41:03.320
> 
> 标签：javascript, database, html, external, local

我创建了一个 html5 本地数据库，我想循环查询并在查询回调中使用外部变量。

下面的例子不是我想做的，但它解释了我的问题：

**代码：**

```
db.transaction(function (tx)
{
  for (var i = 1; i < 4; i++)
   {
     tx.executeSql('SELECT title FROM podcast WHERE given_id = ' + i, undefined, function (tx, result)
      {
        console.log(result.rows.item(0).title);
        console.log(i);
      });
   }
}); 
```

**日志：**

```
episode1
4
episode2
4
episode3
4 
```

结果是完美的，但我不能在回调中使用“i”，该值始终是循环结束时的值。如何在回调中使用外部变量？感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:57:47.930

Try this:

```
db.transaction(function (tx) {
   for (var i = 1; i < 4; i++) {
      tx.executeSql('SELECT title,given_id FROM podcast WHERE given_id = ' + i, undefined, function (tx, result) {
         console.log(result.rows.item(0).title);
         console.log(result.rows.item(0).given_id);
      });
   }
}); 
```

# ios - 向 NSOperationQueue 添加内容时如何获取索引？

> ID：11626259
> 
> 赞同：0
> 
> 时间：2012-07-24T07:41:10.777
> 
> 标签：ios, nsoperationqueue

我需要将我的操作的索引添加到 NSOperationQueue，并希望它像这样工作：

```
 @interface MyOperation : NSObject {
        NSInteger index;
        /* Do Something */
} 
```

下面将设置 myOperation 的索引成员作为它在 operationQueue 中的位置。

```
[operationQueue addOperation:myOperation] 
```

编辑：实际上我使用 NSMutableDictionary 将操作的索引存储为对象，并将操作的名称存储为键。像这样：

```
 NSNumber* indexOfOperationInQueue;
    NSMutableDictionary *dictionary;
    ...
    -(void) AddOperation {
        indexOfOperationInQueue = [NSNumber numberWithInt:value + 1];
        [dictionary setObject:indexOfOperationInQueue forKey:@"operation0"];
    } 
```

操作被取消，crosspond 键和对象被删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:14:25.077

您可以将使用 NSOperationQueue 创建的每个操作添加到 NSMutableArray，然后访问该数组中的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:59:37.210

您为队列中的操作分配索引的问题是，当队列被清除时，它们的索引会改变。为什么不给它们分配序数值。

为您的操作添加一个超类，为下一个索引添加一个类变量，以及一个类似的方法

```
- (void) addToOperationQueue:(NSOperationQueue)queue; 
```

它从类变量中设置索引值。

# c++ - 赋值后清除 C++ 中固定字符数组的内容

> ID：11626262
> 
> 赞同：2
> 
> 时间：2012-07-24T07:41:17.977
> 
> 标签：c++, arrays, char

嗨，我有以下代码：

```
char msg[10000];
string mystr = "hello";
// stores mystr into msg
copy(mystr.begin(), mystr.end(), msg); 
```

代码复制后，我想清除 char msg[10000] 的内容。我怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T07:47:56.293

使用现代设施

```
std::array<char, 10000> msg;

string mystr = "hello";
// stores mystr into msg
copy(mystr.begin(), mystr.end(), msg.begin());

// then clear it again
msg = {{}}; 
```

不知道你为什么要先复制它然后清除它，但这就是你可以做到的。如果没有 C++11 通用初始值设定项，您可以说

```
msg = std::array<char, 10000>(); 
```

当然，你可以随时使用`boost::array`，`std::array`它的工作原理是一样的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T07:48:47.610

如果您真的想清除整个数组，那么`memset`按照 Andrew 的建议使用就是这样做的方法。但是，如果您只是想确保它作为字符串的长度为零，则仅清除第一个条目就足够了：

```
msg[0] = '\0'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T07:42:22.030

```
char msg[10000];
memset(msg, 0, 10000); 
```

如果您知道填充数据的大小：

```
memset(msg, 0, SizeOfFilledData); 
```

# php - 从另一个函数中的一个函数获取计算值

> ID：11626263
> 
> 赞同：0
> 
> 时间：2012-07-24T07:41:17.310
> 
> 标签：php, class, function, this, return-value

我遇到了一个小问题，我似乎无法弄清楚。我有一个计算类，可以根据各种值计算 som 数量，并且我需要将这些计算值放在另一个函数中，该函数将输出包含数量、价格等的列表。

但我无法获得价值。我只是得到：

```
Fatal error: Using $this when not in object context in 
```

打印列表的函数在一个名为 Matliste 的类中

```
function PrintList($rid, $fields_to_select = array()) {
        $matliste = new Matliste;
        $matliste->GetCalculation($_GET["house"]);

        $types = join(",", $fields_to_select);

        $sql = "SELECT * FROM nt_stentyper INNER JOIN nt_tunliste ON nt_stentyper.varenr_tilb = nt_tunliste.varenummer INNER JOIN nt_priser ON nt_stentyper.varenr_tilb = nt_priser.varenummer WHERE nt_stentyper.tagsten = $rid AND nt_stentyper.prod_type IN ($types) ORDER BY nt_stentyper.prod_type ASC";
        $result = mysql_query($sql);

        $markers = array();

        $markers["###TABLEROWS###"] = "";

        $prodTypes = array("1" => $this->roofTiles, "2" => $this->roofBinders);

        while($row = mysql_fetch_array($result)) {

            $markers["###TABLEROWS###"] .= '<tr>';
            $markers["###TABLEROWS###"] .= "<td>". $row["varenummer"] ."</td>";
            $markers["###TABLEROWS###"] .= "<td>". $row["tunnummer"] ."</td>";
            $markers["###TABLEROWS###"] .= "<td>". $row["beskrivelse"] ."</td>";
            $markers["###TABLEROWS###"] .= "<td>". $prodTypes[$row["prod_type"]] ."</td>";
            $markers["###TABLEROWS###"] .= "<td>stk</td>";
            $markers["###TABLEROWS###"] .= "<td>". str_replace(".", ",", $row["pris_dk"]) ." kr.</td>";
        } 

        $finalPrice = mysql_fetch_array(mysql_query("SELECT *, SUM(pris_dk) AS pris FROM nt_stentyper INNER JOIN nt_tunliste ON nt_stentyper.varenr_tilb = nt_tunliste.varenummer INNER JOIN nt_priser ON nt_stentyper.varenr_tilb = nt_priser.varenummer WHERE nt_stentyper.tagsten = $rid AND nt_stentyper.prod_type IN ($types)"));
        $markers["###FINALPRICE###"] =  str_replace(".", ",", $finalPrice["pris"]);
        $markers["###LIST_FOR###"] = ($finalPrice["prod_type"] == 1) ? $finalPrice["beskrivelse"] : "";
        $markers["###PERCENTAGE###"] = $_GET["spild"];
        Main::GetMarkers($markers);
    } 
```

$this->roofTiles 和 $this->roofBinders 给了我上面提到的致命错误。

$this->roofTiles 是在 Calculation 类的函数中计算出来的，是这样的：

```
$this->Rooftiles = ceil((($areal_tagflade*$forbrug-$antaldblvinge*$daekbredde_dv_venstre_2-$antal_topsten-2))*$perc / 2) * 2; 
```

但在 PrintList 函数中我无法获得该值。

$matliste->GetCalculation 是这样的：

```
function GetCalculation($house) {          

        $calculations = new HouseCalculations;

        switch($house) {
            case 1:
                $calculations->calc_normal($_GET["rid"], $_GET["rooftiletype"], $_GET["afslutning_sten"], (isset($_GET["wa"])) ? $_GET["wa"] : 0, (isset($_GET["kviste_1"])), (isset($_GET["kviste_2"])));                      
              break;
        }
    } 
```

# android - 如何在列表视图中添加更多项目而不刷新上一个项目

> ID：11626266
> 
> 赞同：8
> 
> 时间：2012-07-24T07:41:29.810
> 
> 标签：android

我有一个列表视图，我在固定间隔后添加一些数据。但我不想再次设置适配器，因为它会刷新完整列表。是否有任何方法可以在不刷新完整列表的情况下添加项目。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-25T21:07:26.357

您可能想要使用以下内容（在`RecycleView`not中`ListView`）：

```
notifyItemInserted(0);//NOT notifyDataChanged()
recyclerViewSource.scrollToPosition(0);
//Scroll up, to use this you'll need an instance of the adapter's RecycleView 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-24T07:48:28.167

你可以用这个。[notifyDataSetChanged()](http://developer.android.com/reference/android/widget/ArrayAdapter.html#notifyDataSetChanged())

但是 notifyDataSetChanged() 仅适用于 ArrayAdapter，如果您在 Adapter 上使用 add、insert、remove 和 clear 函数。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-24T07:43:52.117

你可以打电话`adapter.notifyDataSetChanged()`来更新列表。

适配器的`getView()`调用时间不同，没有特定的模式。因此，您的视图会在需要更新时`ListView`更新。

但据我所知，您正在寻找`adapter.notifyDataSetChanged`. 工作流程应该是这样的。

```
Set adapter to ListView
Add data to adapter`
Call notifyDataSetChanged() on adapter. 
```

它至少会阻止您的列表反弹到列表中的第一个项目。希望有帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-24T07:46:16.270

您可以使用

```
adapter.add(<new data item>); // to add data to your adapter
adapter.notifyDatasetChanged();  // to refresh 
```

例如。

```
ArrayAdapter<String> adapter;

public void onCreate() {
   ....
   ....

   ArryList<String> data = new ArrayList<String>();
   for(int i=0; i<10; i++) {
     data.add("Item " + (i+1));
   }

   adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, data);
   setListAdapter(adapter);
} 
```

现在，每当您有新数据要添加到列表中时，您都可以执行以下操作

```
private void appendToList(ArrayList<String> newData) {
    for(String data : newData)
        adapter.add(data);

    adapter.notifyDatasetChanged();
} 
```

# javascript - 如何使用此 JS 函数删除类

> ID：11626267
> 
> 赞同：0
> 
> 时间：2012-07-24T07:41:33.003
> 
> 标签：javascript, jquery

设置此功能，因此它只需在 menu-option-set 类中找到 -a's-，并说，单击时，添加“selected”类并从该列表中的所有其他类中删除“selected”类。

我想要做的只是拥有它，所以如果您单击已经具有“选定”类的项目，那么它会删除“选定”类。我知道它不应该是“return false”；我只是将其作为占位符，因为我无法弄清楚正确的编码。

多谢你们！:)

```
var $optionSets = $('.menu-option-set'),
    $optionLinks = $optionSets.find('a');

$optionLinks.click(function() {
    var $this = $(this);

    // Remove Class if already selected --> this is the part that I need help with
    if ($this.hasClass('selected')) {
        return false;
    }

    var $optionSet = $this.parents('.menu-option-set');
    $optionSet.find('.selected').removeClass('selected');
    $this.addClass('selected');
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:43:53.707

你应该可以使用`$().removeClass('selected')`ie

```
 if ( $this.hasClass('selected') ) {
      $this.removeClass('selected');
  } 
```

但是，您稍后还会再次添加该类，因此这实际上不是必需的。

您可以通过选择所有`.selected`元素、删除`this`和删除类来内联它。

```
$this
  .parents('.menu-option-set')
  .find('.selected')
  .not(this)
  .removeClass('selected');

$(this).addClass('selected'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T07:47:05.380

```
$('.menu-option-set a').click(function()
{
    // if clicked item is selected then deselect it
    if ($(this).hasClass('selected'))
    {
        $(this).removeClass('selected');
    }

    // otherwise deselect all and select just this one
    else
    {
        $('.menu-option-set a').removeClass('selected');
        $(this).addClass('selected');
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T07:45:08.947

或者，使用[`toggleClass()`](http://api.jquery.com/toggleClass/)如下方法：

```
var $optionSets = $('.menu-option-set'),
    $optionLinks = $optionSets.find('a');

$optionLinks.click(function() {
    var $this = $(this);

    var $optionSet = $this.parents('.menu-option-set');
    $optionSet.find('.selected').not(this).removeClass('selected');
    $this.toggleClass('selected');
});​ 
```

**编辑：**添加了`.not(this)`以排除单击`<li>`的类在它应该被删除之前。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T08:11:10.263

如果你想简洁：

```
$('.menu-option-set a').click(function() {
    $(this).toggleClass('selected').siblings().removeClass('selected')​​;
}); 
```

# r - R 小部件中的参数名称

> ID：11626269
> 
> 赞同：0
> 
> 时间：2012-07-24T07:41:40.637
> 
> 标签：r, gwidgets

下面是一个 R 小部件的人工示例

```
library(gWidgets)
options("guiToolkit"="RGtk2")

f <- function(file, max.rows){
    dat <- read.table(file, nrows=max.rows)
return(max(dat[,]))
}

lst <- list() 
    lst$action <- list(beginning="f(",ending=")")
    lst$arguments$file <- list(type="gfilebrowse")
    lst$arguments$max.rows <- list(type="gedit", text=-1)

ggenericwidget(lst, container=gwindow("Example")) 
```

![小部件](../Images/a5199cbcd569602ebcc10f1a35f4e191.png)

R 小部件中每个参数的名称与其在 R 函数中的名称相同。是否可以只更改出现在 R 小部件中的名称？例如，我想在 R 小部件中写*“最大行数”*而不是“max.rows”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:46:13.307

我能想到的只有以下内容，从[这篇文章](http://4dpiecharts.com/2010/10/06/creating-guis-in-r-with-gwidgets/)开始。我不确定您是否愿意从头开始创建小部件，但在我看来，这是为您的参数手动选择标签的唯一方法。

```
library(gWidgets)
options("guiToolkit"="RGtk2")

f <- function(file, max.rows){
   dat <- read.table(file, nrows=max.rows)
   return(max(dat[,]))
}

win <- gwindow("Example")

grp.text <- ggroup(horizontal=FALSE, container = win)
lbl.text <- glabel("Maximum Lines: ", container = grp.text)
insert.text <- gedit(-1, container = grp.text)

grp.file <- ggroup(horizontal=FALSE, container = win)
lbl.file <- glabel("File: ", container = grp.file)
browse.file <- gfilebrowse(container = grp.file)

read <- gbutton(text="Go", container = grp.file, 
    handler = function(h, ...) {
            cat(f(svalue(browse.file), 
                as.numeric(svalue(insert.text))));
    }
) 
```

这是一个最小的例子；在此过程中必须进行一些错误检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:35:14.410

为了充实我对爱德华的回答的评论，这就是`gformlayout`from`gWidgets2`可以使用的方法，尽管`gtable`直接使用也可能是要走的路。

```
library(gWidgets2)
options("guiToolkit"="RGtk2")

f <- function(file, max.rows){
    dat <- read.table(file, nrows=max.rows)
    message("Calling max")
    print(max(dat[,]))
}

## containers
w <- gwindow("Example", visible=FALSE)
fr <- gframe("Arguments", horizontal=FALSE, cont=w)       # optional frame
fl <- gformlayout(cont=fr)
## widgets
select_file <- gfilebrowse(cont=fl, label="File")
max_rows <- gedit(-1, cont=fl, label="maximum number of rows", coerce.with=as.numeric)
## button
bg <- ggroup(cont=fr)
addSpring(bg)
btn <- gbutton("ok", cont=bg)

addHandlerClicked(btn, function(h,...) {
  l <- svalue(fl) ## a named list by the labels,
  do.call(f, setNames(l, c("file", "max.rows"))) ## change names for do.call
})
visible(w) <- TRUE 
```

我还没有戴上`gWidgets2`CRAN（仍在 github 上），但会在某个时候。在这里，任何新功能都`gWidgets`将向前发展。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-24T15:53:59.687

@user1546302 的大解决方案的替代方案使用反引号：（请注意，您的原始帖子中有几个不匹配的括号。我试图纠正这个问题，但 SO 拒绝了，因为它没有足够的字符更改）。

```
library(gWidgets)
options(guiToolkit="RGtk2")

f <- function(file, max.rows){
  dat <- read.table(file, nrows=max.rows)
  max(dat[,])
}

lst <- list() 
lst$action <- list(beginning="f(",ending=")")
lst$arguments$file <- list(type="gfilebrowse")
lst$arguments$`max rows` <- list(type="gedit",text=-1)

ggenericwidget(lst, container=gwindow("Example")) 
```

# linq - join 子句中的表达式之一的类型不正确。对“组加入”的调用中的类型推断失败

> ID：11626271
> 
> 赞同：-2
> 
> 时间：2012-07-24T07:41:45.173
> 
> 标签：linq, c#-4.0

```
var val1 =
                (from main in
                     (from irac in objIRAC
                      join iip in objIIP on irac.InvoiceItemID equals iip.InvoiceItemID
                      join oritc in
                          (from ritc in objRITC
                           join iips in objIIP on ritc.InvoiceItemPremiumID equals iips.InvoiceItemPremiumID
                           where ritc.ReconID == ReconId 
                                 && ritc.BookOfBusinessInvoiceItemPremiumID == BookOfBusinessInvoiceItemPremiumID 
                                 && ritc.InvoiceID == InvoiceId 
                           group new { ritc, iips } by new { ritc.ReconID, iips.InvoiceItemID }
                               into ritcs
                               select new
                               {
                                   ritcs.Key.ReconID,
                                   ritcs.Key.InvoiceItemID
                               }) on ReconId equals oritc.ReconID into oritcs // ReconId
                      from oritc in oritcs.DefaultIfEmpty()
                      where iip.InvoiceItemPremiumID == BookOfBusinessInvoiceItemPremiumID 
                      select new
                      {
                          oritc.InvoiceItemID,
                          irac.CommissionOnTypeID,
                          irac.BOBFamilyID,
                          irac.RateTypeID,
                          irac.Rate,
                          irac.CommissionAdjustmentFlag
                      })
                 join sub in objIRAC // Here getting the error
                 on new { main.InvoiceItemID, main.CommissionOnTypeID, main.BOBFamilyID, main.RateTypeID, main.Rate, main.CommissionAdjustmentFlag }
                 equals new { sub.InvoiceItemID, sub.CommissionOnTypeID, sub.BOBFamilyID, sub.RateTypeID, sub.Rate, sub.CommissionAdjustmentFlag }
                 into subs
                 from osub in subs.DefaultIfEmpty()
                 select new { osub.InvoiceItemID }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:29:28.677

检查类型

> main.InvoiceItemID, main.CommissionOnTypeID, main.BOBFamilyID, main.RateTypeID, main.Rate, main.CommissionAdjustmentFlag

和

> sub.InvoiceItemID, sub.CommissionOnTypeID, sub.BOBFamilyID, sub.RateTypeID, sub.Rate, sub.CommissionAdjustmentFlag

它们应该完全匹配。即：如果一个属性是 a`Nullable<int>`而对应的属性是`int`它不匹配。由于所有属性但`InvoiceItemID`都来自同一个实体 InvoiceItemID 可能是罪魁祸首。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T16:57:23.140

赔率是您的外键引用之一是可以为空的，您需要进行显式转换才能使联接（假定内部联接）起作用。

```
var result =
  from a in context.T1
  join b in context.T2
    on new { s.Field1, s.Field2 }
    equals new { 
      Field1 = (int)b.T3.Field1 /* Join via sub-table, explicit conversion from int? to int  */
      ,Field2 = (int)b.Field2 /* explicit conversion from int? to int  */
    }
  where 
    b.T3.Field1 != null /* Specify no nulls allowed for inner-join fields */
    && b.Field2 != null
    && b.Field3 == InputVar1 /* Input Search Variables */
    && b.Field4 == InputVar2
  select a;
```

上面的示例是从我正在使用的实际查询中重命名的。

# html - 右侧边栏作为joomla中的模板

> ID：11626272
> 
> 赞同：0
> 
> 时间：2012-07-24T07:41:45.700
> 
> 标签：html, joomla-extensions, joomla2.5

我正在使用 joomla 2.5 中的两列模板。我想将其设为三列，仅在首页添加右侧边栏，其余页面仅添加两列（左侧和内容区域）。

我对 index.php、css、xml 文件进行了必要的更改，并创建了一个右侧边栏。但它影响了所有页面。我应该为右侧边栏创建一个单独的模板还是下载任何扩展？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:32:21.657

You can do this in this way

```
<?php $menu = JSite::getMenu();
if ($menu->getActive() == $menu->getDefault()) 
{
?>
    <div class="frontend_container">
    <div class="column1"><jdoc:include type="modules" name="module1"/></div>
    <div class="column2"><jdoc:include type="modules" name="module2"/></div>
    <div class="column3"><jdoc:include type="modules" name="module3"/></div>
   </div>
<?php } 
else {
?><div class="frontend_container">
    <div class="column1"><jdoc:include type="modules" name="module4"/></div>
    <div class="column2"><jdoc:include type="modules" name="module5"/></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:14:49.887

您也可以通过管理面板执行此操作。

转到扩展 - >模块管理器

选择一种菜单模块类型（我选择“菜单示例”）

启用它

选择职位

向下滚动，实际上是第二页，选择位置 6，即 Beez5 或 Beez_20 右上角。

确保为您想要的所有页面启用菜单。

保存并关闭。

# c++ - 在发送信号的终端中显示一条消息

> ID：11626280
> 
> 赞同：4
> 
> 时间：2012-07-24T07:42:31.197
> 
> 标签：c++, linux, tty

我的进程作为守护进程运行。我想使用信号重新加载配置。问题是，如果配置错误，它应该以 tty 形式发出错误消息，发送信号。

1.  有没有办法做到这一点？
2.  是推荐的方式吗？

如果不是推荐的方式。检查它是否成功的更合适的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T10:26:06.973

要获取信号源的 pid，您需要在设置信号处理程序时使用`sa_sigaction`，而不是：`sa_handler`

```
static pid_t g_killer_pid = 0;

static void signal_handler( int num, siginfo_t *info, void* blabla )
{
    g_killer_pid = info->si_pid;
}

int main(void)
{    
    struct sigaction sa;

    memset( &sa, 0, sizeof(sa) );
    sa.sa_sigaction = &signal_handler;
    sa.sa_flags = SA_SIGINFO;
    sigaction( SIGTERM, &sa, NULL );
    sigaction( SIGINT,  &sa, NULL );

    pause();
    hello_killer( g_killer_pid );

    return 0;
} 
```

现在你有了源进程的 pid。

获取源进程的终端ID并不是那么简单。一种方法是从`proc/<pid>/stat`文件中读取它。文件中的一个数字是`tty_nr`. `tty_nr`对我来说有点奇怪，所以我不知道这甚至是便携式的东西。但它包含次要编号，可用于打开正确的终端进行写入：

```
static void hello_killer( pid_t killer )
{
    char filename[200];
    FILE* fil;
    FILE* out;
    int tty_nr;

    sprintf( filename, "/proc/%ld/stat", (long int)killer );
    fil = fopen( filename, "r" );
    if( fil )
    {
        if( fscanf( fil, "%*s %*s %*s %*s %*s %*s %d ", &tty_nr ) == 1 )
        {
            sprintf( filename, "/dev/pts/%d", (tty_nr & 0xF) | ((tty_nr >> 20) & 0xFFF) );

            out = fopen( filename, "a" );
            if( out )
            {
                fprintf( out, "Hello!\n" );
                fclose( out );
            }
        }
        fclose( fil );
    }
} 
```

我不确定这个`/dev/pts`技巧是否正确/最好的方法。但它似乎适用于我的 Linux 机器：

```
~ # killall temp_test
Hello!
~ # 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T07:46:53.493

我猜你喜欢捕捉`SIGUSR1`然后重新加载配置？

你应该记住，信号处理程序应该尽可能的小而快，而不是做一些可能导致另一个信号的事情。所以基本上你应该尽可能地避免 I/O。最好的方法可能是有一个非常简单的信号处理程序，它只设置一个标志，然后在你的主循环中检查这个标志，然后在你的主线程的上下文中重新加载你的配置。在那里，您可以随心所欲地输出到控制台。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T07:47:22.083

你可以做到这一点，但没有简单的方法可以做到这一点。您需要为守护进程安排一种机制来反馈给发送信号的进程。

一些可能的方法包括：

*   将（带时间戳的）结果写入预定位置的文件。
*   让守护进程维护一个共享内存段，其中包含已知结构中的信息。
*   让守护进程监听某种命名管道/套接字并以这种方式给出反馈。（您也可以通过该通道发送重新加载命令）。
*   让发送信号的东西和守护进程链接到一个共享库，这样两者都能够验证配置文件。在发出信号之前验证文件。

在那些命名管道中，我认为我的第一选择是 - 您可以使用正常权限限制对它的访问，并且它最容易变得健壮和正确。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T07:48:13.783

我怀疑您是否可以确定信号的来源，即使可以，也不必是终端。使用简单的 tcp/ip 协议怎么样？接受特殊端口上的 tcp/ip 连接。读取命令直到第一个新行。如果该命令是“重新配置”，请进行重新配置并通过已建立的 TCP/IP 连接发送消息。

# javascript - 刷新页面后使用变量

> ID：11626283
> 
> 赞同：1
> 
> 时间：2012-07-24T07:42:45.480
> 
> 标签：javascript, jquery, html

我想知道即使刷新页面后是否可以保留一些数据。例如，我的数组中有值，我不想在刷新页面后丢失它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T07:48:08.600

在 javascript 或 HTML5 localStorage,sessionStorage 变量中使用 Cookie。

要使用 HTML5 LocalStorage，只需像使用 localStorage 之前的变量一样使用它。

```
localStorage.variable=['wrg','wg','wg']; 
```

要使用 HTML5 sessionStorage，只需像使用 sessionStorage 前面的变量一样使用它。

```
sessionStorage.variable=['wrg','wg','wg']; 
```

有关更多信息，**[请参见此处](https://stackoverflow.com/questions/7684299/how-to-stop-a-variable-from-being-destroyed-on-pressing-f5-in-javascript)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T07:49:16.507

我过去曾使用[jStorage](https://github.com/andris9/jStorage)来存储数据，它在可用的情况下使用 HTML 5 本地存储，并在需要时回退到其他方法。

```
$.jStorage.set(key, value, options)

value = $.jStorage.get(key)
value = $.jStorage.get(key, "default value") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T07:48:13.960

在某些浏览器中有一个带有 window.name 的技巧，即使在刷新后也可以保留数据。窗口名称可以存储数组的 json。

```
window.name = "[JSON]"; 
```

顺便说一句，Dojo 实现了 window.name 的包装器 [Dojo WindowName](http://www.sitepen.com/blog/2008/07/22/windowname-transport/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T07:48:04.283

一种方法是创建 Cookie 并将其存储在其中 $.cookie("SomeKey", 1);

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T07:47:29.807

使用您的值设置 cookie 并请求 cookie。

# php - 如何清除表单数据，以便刷新不会在不转发的情况下复制数据？

> ID：11626286
> 
> 赞同：1
> 
> 时间：2012-07-24T07:42:55.123
> 
> 标签：php, html, browser, refresh

我创建了一个留言簿，用户可以在其中通过 HTML 表单添加条目。向留言簿提交数据后，部分用户刷新页面。我知道的所有浏览器都会重新提交数据。然后。有没有办法告诉浏览器，数据不应该重新提交？

在成功将数据存储到数据库后，我曾经进行过重定向。但是，现在我想向用户提示一些附加信息，例如“感谢您输入标题为'...'。”或“条目的腼腆已发送到您的电子邮件地址...”。我真的很想避免将所有值添加到 GET-Parameters 以便能够在转发后使用信息。

在用户单击“刷新”按钮后，是否有另一种方法（没有转发！）防止浏览器再次提交数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T07:51:09.523

也许您可以使用已发布数据的哈希值设置会话变量，并在每次加载页面时检查它。如果哈希值相同，则数据已经提交：

```
<?php
session_start(); //Start the session

$dataHash = md5($_POST['name'].$_POST['comment'].$_POST['whatever']); //Get a hash of the submitted data

if(isset($_SESSION['gbHash']) && $_SESSION['gbHash'] == $dataHash) { //Check if the data has been submitted before
    //Do not save the data/show a warning message
} else {
    //Save the data/show a thank you message
}

$_SESSION['gbHash'] = $dataHash;
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T08:11:36.253

> 在用户单击“刷新”按钮后，是否有另一种方法（没有转发！）防止浏览器再次提交数据？

是的 - Ajax - 你仍然可以显示所有成功/失败消息甚至验证......

阅读这个 - [http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/](http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/)

例子：

```
var dataString = 'name='+ name + '&email=' + email + '&phone=' + phone;  
//alert (dataString);return false;  
$.ajax({  
  type: "POST",  
  url: "bin/process.php",  
  data: dataString,  
  success: function() {  
    $('#contact_form').html("<div id='message'></div>");  
    $('#message').html("<h2>Contact Form Submitted!</h2>")  
    .append("<p>We will be in touch soon.</p>")  
    .hide()  
    .fadeIn(1500, function() {  
      $('#message').append("<img id='checkmark' src='images/check.png' />");  
    });  
  }  
});  
return false; 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T07:57:34.427

redirect the user with a custom message attached to the redirect location after POST action performed, for example

```
header("location: http://www.website.com/thankyou.php?msg=email_sent"); 
```

or

```
header("location: http://www.website.com/thankyou.php?msg=email_not_sent"); 
```

or

```
header("location: http://www.website.com/thankyou.php?success=0"); 
```

and then switch GET parameters to show corresponding message type. or user AJAX POSTING :)

# vb6 - 在 Windows 7 上安装 VB 6.0 时出错

> ID：11626289
> 
> 赞同：0
> 
> 时间：2012-07-24T07:43:09.787
> 
> 标签：vb6, installation

我正在尝试在 Windows 7 上安装 VB 6.0。但显示错误“访问 STF 文件时出错：\Visual Studio 6.0\setup\vs98ent.stf”

请提供任何解决方案。

# maven - 来自 test-jat 工件的参考资源

> ID：11626290
> 
> 赞同：0
> 
> 时间：2012-07-24T07:43:10.260
> 
> 标签：maven, maven-2

我有两个神器：

*   **artifact-A** : 包含 src/test/resources/ 中的资源

> ```
> <plugins>
>   <plugin>
>     <groupId>org.apache.maven.plugins</groupId>
>     <artifactId>maven-jar-plugin</artifactId>
>     <version>2.2</version>
>     <executions>
>       <execution>
>         <goals>
>           <goal>test-jar</goal>
>         </goals>
>       </execution>
>     </executions>
>   </plugin>
> </plugins> 
> ```

*   **artifact B**：使用来自 artifact A 的资源

> ```
> <dependency>
>   <groupId>com.xxxx.yyy</groupId>
>   <artifactId>artifact-A</artifactId>
>   <version>3.0-SNAPSHOT</version>
>   <type>test-jar</type>
>   <scope>test</scope>
> </dependency> 
> ```

问题是资源从未在项目工件-B 中提取。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:49:53.357

如果您定义这样的依赖项，则永远不会提取使用的 jar，因为它将在编译等过程中放在类路径中。这意味着要从工件-A 访问资源，您需要通过类路径访问它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T08:13:58.850

在 artifact-B 中，我使用了 maven-dependency-plugin 从 test-jar 中提取资源

> ```
> <plugin> 
>             <groupId>org.apache.maven.plugins</groupId> 
>             <artifactId>maven-dependency-plugin</artifactId> 
>             <version>2.4</version> 
>             <executions> 
>                 <execution> 
>                     <id>resource-dependencies</id> 
>                     <phase>process-test-resources</phase> 
>                     <goals> 
>                         <goal>unpack-dependencies</goal> 
>                     </goals> 
>                     <configuration> 
>                         <includeArtifactIds>artifact-A</includeArtifactIds> 
>                         <includes>**/db-test/*</includes>  
>                         <outputDirectory>${project.build.testOutputDirectory}</outputDirectory> 
>                     </configuration> 
>                 </execution> 
>             </executions> 
>         </plugin> 
> ```

# android - android中的动态ImageView

> ID：11626291
> 
> 赞同：-1
> 
> 时间：2012-07-24T07:43:11.307
> 
> 标签：android, imageview

我是android的新手，所以请不要评判我。
我正在尝试创建一个具有两个区域的屏幕，一个图像区域和一个文本区域。
在图像区域中，应在 3-4 秒的周期时间内更改几幅图像。（请看图片![在此处输入图像描述](../Images/1041ad684ece12b6c4ad635611eaaec8.png)：）

你能给我一个例子我怎么能做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T07:51:47.480

您可以为此使用[CountDownTimer](http://developer.android.com/reference/android/os/CountDownTimer.html)类。

或者您可以使用带有 Thread 和 Handler 的 Gallery 来实现此目的。

这是一个名为 AutoSlideGallery 的项目的链接，

[https://github.com/nixit28/AutoSlideGallery](https://github.com/nixit28/AutoSlideGallery)

核心逻辑在这里，

```
(new Thread() {

        public void run() {

            myslideshow();
            handler.postDelayed(this, 2000); // execute every two second.
        }
    }
    ).start(); 
```

以及执行动作的方法，

```
private void myslideshow() {
    PicPosition = gallery.getSelectedItemPosition() + 1;
    if (PicPosition >= pics.length)
        gallery.setSelection(0); // stop
    else
        gallery.setSelection(PicPosition);// move to the next gallery
                                            // element.
} 
```

# javascript - Javascript (jQuery) / HTML：设置或者启用，不工作？我目前正在使用 Mozilla Firefox 14.0.1 和 Google Chrome 20.0.1132.57（我认为是最新的）。我的代码是这样的：http://jsfiddle.net/SVtDj/ 这就是我想要发生的事情：在 input1 上输入一些内容 单击禁用的输入（触发 onchange 功能...参见 jQuery） 注意：在输入内容后input1，我们点击禁用的输入，没有别的。现

> ID：11626293
> 
> 赞同：0
> 
> 时间：2012-07-24T07:43:16.790
> 
> 标签：javascript, jquery, html

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T07:49:25.623

`Disabled`输入不会在 FireFox 上触发`change`和`click`事件。

```
$('li:eq(1)').click(function(e){
    if($.trim($('#input1').val()).length != 0){
        $('#input2').prop('disabled', false);
    }
}); 
```

[http://jsfiddle.net/SVtDj/10/](http://jsfiddle.net/SVtDj/10/)

而不是`trim()`你可以使用`$.trim()`跨浏览器的jQuery函数：

```
$('#input1').change(function(){
    if($.trim($(this).val()).length != 0){
        $('#input2').prop('disabled', false);
    }
}); 
```

[演示](http://jsfiddle.net/SVtDj/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T07:52:16.713

你的代码很好。问题是 .change() 在触发之前需要失去焦点（模糊）。尝试将其更改为 .keyup()

[http://jsfiddle.net/SVtDj/6/](http://jsfiddle.net/SVtDj/6/)

**附加：**这可能是你想要的效果

```
$('#input1').keyup(function(){
     $('#input2').prop('disabled', $(this).val().trim().length == 0);
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T07:52:50.797

扩展[拉米森的答案](https://stackoverflow.com/a/11626404/887539)

如果你想切换残疾，`#input2`你可以简单：

```
$('#input1').change(function(){
    var isDisabled = !$.trim($(this).val()).length;
    $('#input2').prop('disabled', isDisabled );
}); 
```

和演示：http: [//jsfiddle.net/SVtDj/7/](http://jsfiddle.net/SVtDj/7/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T07:56:13.970

The issue is Firefox needs you type 'enter' or do something else so input1 looses the focus after having wrote in input1 to cast the "onchange" event I think. Maybe [this question](https://stackoverflow.com/questions/865490/firefox-capture-autocomplete-input-change-event) is linked to yours, and it made me try the following that works with Firefox. (I didn't try it on other browsers)

```
$('#input1').bind('input',function(){
  if($(this).val().trim().length != 0){
    $('#input2').removeAttr('disabled');
  }
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T08:10:20.960

请参阅@Andy E 在此帖子[Jquery event on a disabled input](https://stackoverflow.com/questions/3100319/jquery-event-on-a-disabled-input)中的答案，我认为这是解决您的问题的最佳解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-24T07:59:30.277

那是因为在 FF 中，当一个输入被禁用时，它实际上是被禁用的（它不接收鼠标点击）。

单击禁用的元素不会在 input1 上产生模糊事件（焦点丢失），因此不会触发 onchange。

您可以使用一些类和 jQuery 轻松解决此问题。例如：

```
<input class=disabled id=input2> 
```

一些CSS：

```
.disabled { background: #888; } 
```

接着...

```
$(function(){
  // disable keypresses on "disabled" input
  $('.disabled').keypress(function(e){
    e.preventDefault;
    e.stopPropagation;
    return false;
  });
  // doesn't allow to focus
  $('.disabled').focus(function(e){
    $(this).blur();
  });
}); 
```

激活“禁用”元素：

```
$('#input2').removeClass('disabled'); 
```

在这里检查：http: [//jsfiddle.net/SVtDj/11/](http://jsfiddle.net/SVtDj/11/)

# https - 带有 https 的 Google Play 徽章

> ID：11626294
> 
> 赞同：1
> 
> 时间：2012-07-24T07:43:19.537
> 
> 标签：https, google-play, badge

我需要在我的网站上集成一个 Google Play 徽章，以使用 https 链接到 Google Play 上的 Android 应用程序。

徽章生成器提供 http 版本的徽章：http: [//developer.android.com/distribute/googleplay/promote/badges.html](http://developer.android.com/distribute/googleplay/promote/badges.html)。

另一方面，[此页面](http://developer.android.com/distribute/googleplay/promote/brand.html)提供了下载所需徽章的可能性。

谷歌似乎没有为这些图片提供“https”网址，如果用户使用 https 访问网站，则会在浏览器上发出警告。

我想知道是否允许我在使用它的网站上托管 Google 徽章的图像，因此能够在需要时通过 https 连接访问图像。

# c++ - 如何使用分配器精确模拟 new T[n]？

> ID：11626299
> 
> 赞同：1
> 
> 时间：2012-07-24T07:43:38.417
> 
> 标签：c++, initialization, allocator

表达式`new T[n]` *可能会或可能不会*初始化数组中的每个对象，具体取决于是什么`T`。

如何使用 复制此初始化行为`allocator`？

```
struct Foo
{
    int x;
    Foo() : x(1)
        { }
};

Foo *p = new Foo[1];
assert(p[0].x == 1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T08:28:04.997

在 C++03 中，分配器接口只知道一种初始化对象的方法，那就是从另一个对象复制。C++11 有更多。

您要求进行默认初始化，这意味着（大约）“要么什么都不做，要么调用默认构造函数”。分配器接口在 C++03 中不能做后者。

我想你可以写这样的东西：

```
T *ra = allocator.allocate(1);
if (!is_pod<T>::value) {
    // in C++03
    allocator.construct(ra, T());
    // in C++11
    allocator.construct(ra);
} 
```

不过，那个`is_pod`测试可能是错误的。检查标准以了解默认初始化什么都不做的条件。显然`is_pod`在 C++03 中不存在，但我隐约记得 Boost 具有适用于大多数实现的那种东西。

我认为你在这里与设计作斗争。分配器接口是为容器设计的。容器被设计为不包含未初始化的元素，因此它们没有用于默认初始化。

# c++ - 是否可以将 std::accumulate 与 std::min 一起使用？

> ID：11626304
> 
> 赞同：21
> 
> 时间：2012-07-24T07:43:59.037
> 
> 标签：c++, stl, accumulate

我正在尝试`std::accumulate`与`std::min`. 像这样的东西（不会编译）：

```
vector<int> V{2,1,3};   
cout << accumulate(V.begin()+1, V.end(), V.front(), std::min<int>); 
```

是否可以？是否可以不为 编写包装函子`std::min`？
我知道我可以用 lambdas 做到这一点：

```
vector<int> V{2,1,3};   
cout << std::accumulate(
    V.begin()+1, V.end(),
    V.front(), 
    [](int a,int b){ return min(a,b);}
); 
```

我知道有`std::min_element`。我不是想找到最小元素，我需要`std::accumulate`与`std::min`（或`::min`）结合用于我的库，它允许像 C++ 中的表达式一样进行函数编程。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-24T07:59:23.573

[问题是函数](http://en.cppreference.com/w/cpp/algorithm/min)有[几个重载`min`](http://en.cppreference.com/w/cpp/algorithm/min)：

```
template <class T> const T& min(const T& a, const T& b);

template <class T, class BinaryPredicate>
const T& min(const T& a, const T& b, BinaryPredicate comp); 
```

因此，您的代码是模棱两可的，编译器不知道选择哪个重载。您可以通过使用中间函数指针来说明您想要哪一个：

```
#include <algorithm>
#include <iostream>
#include <vector>

int main()
{
  std::vector<int> V{2,1,3};
  int const & (*min) (int const &, int const &) = std::min<int>;
  std::cout << std::accumulate(V.begin() + 1, V.end(), V.front(), min);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-15T16:01:24.167

从 C++20 开始，您可以使用 std::**范围**::min

```
#include <algorithm>
#include <iostream>
#include <vector>
#include <numeric>
#include <climits>

int main() {
    std::vector<int> v{1,2,3,47,5};
    std::cout << std::accumulate(v.begin(), v.end(), INT_MAX, std::ranges::min) << std::endl; 
    std::cout << std::accumulate(v.begin(), v.end(), INT_MIN, std::ranges::max) << std::endl; 
} 
```

> 1
> 47

请注意，没有`std::ranges::accumulate`，因为它不是为 C++20 完成的。

# loops - 遍历 clojure 映射对（循环）

> ID：11626305
> 
> 赞同：7
> 
> 时间：2012-07-24T07:43:59.963
> 
> 标签：loops, dictionary, clojure

我有一系列这样的地图对（目前大约 17000 对）

```
(def myseq '({:name "Peter" :rank 2222} {:name "Anna" :rank 111})) 
```

我想将特定对过滤成一个新序列

```
(filter (fn [x] (> x 222)) (:rank (first myseq))) 
```

我一直在尝试使用这样的循环进行迭代，但不断遇到线程死亡。此外，如果我在单个地图集合上使用过滤器，它只会返回一个新序列，不确定我是否需要自己在这里创建一个？

```
(defn remove-lower [number myseq]
    (loop [i 0]
        (if (= i (count file))
            (println "done")
            (filter [x] (> x number))
                (:rank (first myseq))))
    (recur (rest myseq)))) 
```

最后是循环获得新的对序列的最有效方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T08:14:33.460

这里不需要循环/重复。filter 已经为您遍历了一个序列：

```
(filter (fn [entry] (> (:rank entry) 220)) myseq) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-24T08:19:54.513

首先要知道的是，clojure 中的（大部分）数据结构是不可变的，并且大多数函数都是*函数*式的。这意味着，它们没有副作用。在您的情况下`filter`，不会以任何方式更改序列，它会返回一个新序列，仅包含未过滤的项目。

因此，要过滤，`myseq`您需要执行以下操作：

```
(def filtered-seq (filter (fn [x] ...) myseq)) 
```

过滤器会重复调用该函数，绑定`x`到当前过滤的项目`myseq`。也就是说，第一次将绑定到`{:name "Peter" :rank 2222}`，然后绑定到`{:name "Anna" :rank 111}`。将`filtered-seq`仅包含函数返回 true 的元素。`myseq`不会*被*修改！

因此，您只想留下`:rank`高于 222 的元素：

```
(filter (fn [x] (> (:rank x) 222)) myseq) 
```

而已。关于过滤器的另一件事是，它很懒惰。也就是说，返回集合中的项目仅在需要时才“实现”（或计算）。

你不需要使用`loop`这个，因为`filter`工作很好，而且`loop`并不懒惰。

也就是说，你的`loop`不起作用，因为它有几个问题：

1.  `recur`在外面`loop`。在这种情况下，clojure 将循环回到函数的开头。
2.  您需要构造一个返回值并且需要维护“当前”元素
3.  您需要正确检查结束条件

代码可能看起来像这样（未经测试）：

```
(defn remove-lower [number myseq]
  (loop [sq myseq res []]
     (if (empty? sq)
         res
         (let [current (first sq)]
           (if (> (:rank current) number)
              (recur (rest sq) (conj res current))
              (recur (rest sq) res)))))) 
```

注意如何：

1.  `recur`现在在里面`loop`
2.  `res`包含返回值并`sq`包含当前左序列
3.  each`recur`传递 和 的新值，`sq`用于`res`下一次迭代
4.  `sq`每次迭代都会“缩小”，因此循环最终将退出，除非`myseq`是无限的。将此与 进行对比`filter`，后者可以很好地处理无限序列。

正如你所看到的，这比而且更难读，更不通用`filter`，也很渴望（不是懒惰）。

# java - 如何将 java swing ImageIcon 图像保存到文件？

> ID：11626307
> 
> 赞同：1
> 
> 时间：2012-07-24T07:44:02.527
> 
> 标签：java, swing

我正在使用以下代码在摆动框架上显示图像。

```
ImageIcon icon = new ImageIcon("image.jpeg");
icon.getImage().flush();
jLabel3.setIcon( icon ); 
```

我需要一个按钮，单击该按钮将保存带有 jpeg/png 扩展名的图像。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T08:00:52.967

I usually do something like this

```
Image img = icon.getImage();

BufferedImage bi = new BufferedImage(img.getWidth(null),img.getHeight(null),BufferedImage.TYPE_BYTE_ARGB);

Graphics2D g2 = bi.createGraphics();
g2.drawImage(img, 0, 0, null);
g2.dispose();
ImageIO.write(bi, "jpg", new File("img.jpg")); 
```

also try other image types like BufferedImage.TYPE_INT_RGB, checkout [BufferedImage](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/image/BufferedImage.html)

you may also want to read this [Writing/Saving an Image](http://docs.oracle.com/javase/tutorial/2d/images/saveimage.html)

hope it works for you

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T08:00:54.647

consider useing [ImageIO.write(Image img, String type, File file)](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html#write%28java.awt.image.RenderedImage,%20java.lang.String,%20java.io.File%29) for writeing a Image to the filesystem.

You get an Image object from the ImageIcon with `getImage()`

You have to Implement a ActionListener for the Button, and then you are ready to go

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-24T08:05:32.097

So the first part is implementing actionlistener so the button works when you click it. The JButton.

The second part is saving the image which i use ImageIo.write

See code below

```
public class MyFrame extends JFrame implements ActionListener {
  private JButton button1 = new JButton("Click me!");

  public MyFrame() {
    button1.addActionListener(this);

    //... add buttons to frame ...
  }

  public void actionPerformed(ActionEvent evt) {
    Object src = evt.getSource();
    if (src == button1) {
      string imagename = icon.getDescription;

         try {
    // retrieve image
    BufferedImage bi = icon.getImage();
    File outputfile = new File("saved.png");
    ImageIO.write(bi, "png", outputfile);
} catch (IOException e)

{
        //catch the exception here
    }
    } 
  }
} 
```

# jquery - HTML 永久占位符解决方法

> ID：11626315
> 
> 赞同：0
> 
> 时间：2012-07-24T07:44:29.350
> 
> 标签：jquery, html

我在我的应用程序中为输入框使用占位符，并为不支持占位符的浏览器使用 jquery 解决方法。然而，在大多数浏览器中，即使输入为空，占位符也会在输入处于焦点时消失。一种解决方法是在输入字段上使用透明背景，并在输入字段后面直接放置一个带有文本的跨度，并在输入内容后将背景更改为不透明。问题是我的应用程序现在有超过 3000 个输入字段。这是否可以通过运行时的 jquery 插件来做到这一点？或者我愿意接受更好的建议。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:49:36.347

您是否在同一页面上有 3000 个输入字段？在这种情况下，您需要以某种方式重新设计您的应用程序。

如果您在多个页面上有不同的输入，并且希望插件在需要时自动生成占位符，那么有许多不错的插件。这是一个全面的 polyfill 列表 - 只需查找“Web 表单：输入占位符”标题即可。[https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)

它们中的大多数不需要为每个实例专门调用，因此您应该避免修改 3000 行代码。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:06:02.313

这是我写的和正在使用的：

```
 <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<style>
body{
    background-color:#DDD;
}

span.placeholder
{
    background-color:#FFF;
    color:#777;
    border-radius: 4px 4px 4px 4px;
    margin: 5px 0;
    padding: 9px 0 8px 13px;
    width: 297px;

}
input
{
    border: 1px solid #707A68;
    border-radius: 4px 4px 4px 4px;
    margin: 5px 0;
    padding: 10px;
    width: 310px;
    background:transparent;
}

</style>

<body>
<div>
    <input type="text" placeholder="hello" name="hh"/>
</div>
</body>

<script>
$('input').each(function(){

    var txt = $(this).attr('placeholder');
    var name = $(this).attr('name');
    var node = $("<span class='placeholder'>"+txt+"</span>").appendTo($(this).parent());
    $(this).before(node);
    node.css('position','absolute');
    node.css('z-index','-1');
    node.css('display','block');
    $(this).attr('placeholder','');
});
$('input').bind('keyup',function(){
    if($(this).val()=="")
        $(this).css('background','transparent');
    else
        $(this).css('background','#FFF');
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T15:27:25.700

我会使用 value attr 而不是逻辑将如下所示。

```
var input = document.createElement('input');
if(! ('placeholder' in input))
{
    $("input[placeholder]").focus(/* clear value if it is equals placeholder */);
    $("input[placeholder]").blur(/* assign placeholder if it is "" */);
    $("input[placeholder]").each(/* assign placeholder if value equals "" */)
} 
```

您还可以更改焦点和模糊输入的样式（或类），使其看起来更像占位符。

# php - 比较mysql中的同一列时出错

> ID：11626316
> 
> 赞同：0
> 
> 时间：2012-07-24T07:44:31.023
> 
> 标签：php, mysql

我从列中获取值作为整数值并为两个用户执行此操作，因此我尝试从表中获取值并进行比较，但不幸的是，对于更大和更小的比较，我得到的结果相同，没有任何改变。

如何比较列值？

我的代码如下--

```
$sqlres="select membership from register where mid='".$_SESSION['mid']."' ";
$pres=mysql_query($sqlres); 
$prest=mysql_fetch_array($pres);
$sqlres1="select membership from register where matri_id='".$row['mtr_id']."' ";
$pres1=mysql_query($sqlres);    
$prest1=mysql_fetch_array($pres);

if($pres<$pres1)
{
//somethiung   enter code here
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:10:01.883

您将结果保存在 $pres 和 $pres1（带有“t”）中，而不是保存在 $pres 和 $pres1 中。我建议始终将变量 $query 用于查询字符串，将 $result 用于结果表。只有当您获取结果时，您才应该使用自定义变量名称以免混淆。

你可以使用类似的东西

```
if($prest['membership']<$prest1['membership']){//do stuff here} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:06:47.990

首先不要使用 mysql_* 它已被弃用，使用 mysqli_* 或 PDO 代替。

至于你的问题，`mysql_fetch_array`顾名思义，返回一个数组，而不是单个值，所以你需要获取数组中的第一个值：

```
if($pres[0]<$pres1[0])
{
//somethiung   enter code here
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-24T08:07:47.670

在您提供的这段代码中，您正在比较 mysql_query 返回的资源而不是列的值。你必须这样做：

```
if( $prest['membership'] < $prest1['membership'] ){
  //Some stuff going here
} 
```

**建议：**正确命名变量。使用更多描述性名称。`$prest`2个月后，您将不记得和之间的区别`$prest1`

# php - 剥离 html 以删除所有 js/css/html 标签以提供实际文本（显示在浏览器上）以将其用于索引和搜索

> ID：11626319
> 
> 赞同：2
> 
> 时间：2012-07-24T07:44:48.000
> 
> 标签：php, indexing, full-text-search, search-engine

我试过 strip_tag 但它仍然留下内联 js : (function(){..}) 和内联 css #button{}

我需要从没有任何 JS 函数或样式或标签的 html 中提取纯文本，以便我可以索引它并用于我的搜索功能。

html2text 似乎也没有解决问题！

**编辑**

PHP代码：

```
$url = "http://blog.everymansoftware.com/2011/11/development-setup-for-neo4j-and-php_05.html";

$fileHeaders = @get_headers($url);
if( $fileHeaders[0] == "HTTP/1.1 200 OK" || $fileHeaders[0] == "HTTP/1.0 200 OK")
        {
            $content = strip_tags(file_get_contents($url));
        } 
```

输出 ：

$内容=

```
(function() { var a=window,c="jstiming",d="tick";var e=function(b){this.t={};this.tick=function(b,o,f){f=void 0!=f?f:(new Date).getTime();this.t[b]=[f,o]};this[d]("start",null,b)},h=new e;a.jstiming={Timer:e,load:h};if(a.performance&&a.performance.timing){var i=a.performance.timing,j=a[c].load,k=i.navigationStart,l=i.responseStart;0=k&&(j[d]("_wtsrt",void 0,k),j[d]("wtsrt_","_wtsrt",l))}
try{var m=null;a.chrome&&a.chrome.csi&&(m=Math.floor(a.chrome.csi().pageT));null==m&&a.gtbExternal&&(m=a.gtbExternal.pageT());null==m&&a.external&&(m=a.external.pageT);m&&(a[c].pt=m)}catch(n){};a.tickAboveFold=function(b){var g=0;if(b.offsetParent){do g+=b.offsetTop;while(b=b.offsetParent)}b=g;750>=b&&a[c].load[d]("aft")};var p=!1;function q(){p||(p=!0,a[c].load[d]("firstScrollTime"))}a.addEventListener?a.addEventListener("scroll",q,!1):a.attachEvent("onscroll",q);
 })();

Everyman Software: Development Setup for Neo4j and PHP: Part 2

#navbar-iframe { display:block }

if(window.addEventListener) {
    window.addEventListener('load', prettyPrint, false);
  } else {
    window.attachEvent('onload', prettyPrint);
  }
var a=navigator,b="userAgent",c="indexOf",f="&m=1",g="(^|&)m=",h="?",i="?m=1";function j(){var d=window.location.href,e=d.split(h);switch(e.length){case 1:return d+i;case 2:return 0

2011-11-05

Development Setup for Neo4j and PHP: Part 2

This is Part 2 of a series on setting up a development environment for building projects using the graph database Neo4j and PHP. In Part 1 of this series, we set up unit test and development databases.  In this part, we'll build a skeleton project that includes unit tests, and a minimalistic user interface.

All the files will live under a directory on our web server. In a real project, you'll probably want only the user interface files under the web server directory and your testing and library files somewhere more protected.

Also, I won't be using any specific PHP framework.  The principles in t 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T08:36:33.293

这是一个小片段，我总是用来从网页中删除所有隐藏的文本，包括`<script>, <style>, <head>`等标签之间的所有内容。它还将用单个空格替换所有多次出现的任何类型的空格。

```
<?php
$url = "http://blog.everymansoftware.com/2011/11/development-setup-for-neo4j-and-php_05.html";
    $fileHeaders = @get_headers($url);
    if( $fileHeaders[0] == "HTTP/1.1 200 OK" || $fileHeaders[0] == "HTTP/1.0 200 OK")
    {
            $content = strip_html_tags(file_url_contents($url));
    }

############################################
//To fetch the $url by using cURL
function file_url_contents($url){
    $crl = curl_init();
    $timeout = 30;
    curl_setopt ($crl, CURLOPT_URL,$url);
    curl_setopt ($crl, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt ($crl, CURLOPT_CONNECTTIMEOUT, $timeout);
    $ret = curl_exec($crl);
    curl_close($crl);
    return $ret;
} //file_url_contents ENDS

//To remove all the hidden text not displayed on a webpage
function strip_html_tags($str){
    $str = preg_replace('/(<|>)\1{2}/is', '', $str);
    $str = preg_replace(
        array(// Remove invisible content
            '@<head[^>]*?>.*?</head>@siu',
            '@<style[^>]*?>.*?</style>@siu',
            '@<script[^>]*?.*?</script>@siu',
            '@<noscript[^>]*?.*?</noscript>@siu',
            ),
        "", //replace above with nothing
        $str );
    $str = replaceWhitespace($str);
    $str = strip_tags($str);
    return $str;
} //function strip_html_tags ENDS

//To replace all types of whitespace with a single space
function replaceWhitespace($str) {
    $result = $str;
    foreach (array(
    "  ", " \t",  " \r",  " \n",
    "\t\t", "\t ", "\t\r", "\t\n",
    "\r\r", "\r ", "\r\t", "\r\n",
    "\n\n", "\n ", "\n\t", "\n\r",
    ) as $replacement) {
    $result = str_replace($replacement, $replacement[0], $result);
    }
    return $str !== $result ? replaceWhitespace($result) : $result;
}
############################
?> 
```

在此处查看实际操作[http://codepad.viper-7.com/txIxfE](http://codepad.viper-7.com/txIxfE)
并输出： http: [//pastebin.com/a86jd17s](http://pastebin.com/a86jd17s)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:57:21.247

[strip_tags()](http://us.php.net/manual/de/function.strip-tags.php) will remove everything that is inside < and >. So, e.g., if you have something like

```
<script type="text/javascript">alert('hello world');</script> 
```

It will be reduced to

```
alert('hello world'); 
```

This will not be executed but just displayed on your site.

Alternatively, try [htmlentities()](http://us.php.net/manual/de/function.htmlentities.php) to convert "<" to "&lt" and > to "&gt" so it can be displayed safely without executing anything.

If, instead, your question is about extracting data from tags, better use regular expressions. E.g., if you have something like

```
<a href="http://www.google.com">Google</a> 
```

you can simply use [preg_match()](http://us.php.net/manual/de/function.preg-match.php) to get the word "Google" from the whole link:

```
$content='<a href="http://www.google.com">Google</a>';
$regex="#<a href=".*?">(.+?)</a>#";
preg_match($regex,$content,$match);
echo $match[1]; 
```

By the way - $match[1] will have the match cleared from any tags anyways, while $match[0] won't. To get more than one match, use [preg_match_all()](http://us.php.net/manual/de/function.preg-match-all.php).

# gcc - 联合中的匿名结构问题

> ID：11626320
> 
> 赞同：1
> 
> 时间：2012-07-24T07:44:52.770
> 
> 标签：gcc, struct, union

我有这样的事情：

```
union MyBBox3D
{
    struct
    {
        float  m_fBox[6]; 
        float  m_fCenter[3];
        float  m_fDiagonalLen;
        float  m_fNormalizeFactor;
        float  m_fScaling[3];
    };
    struct
    {
        float  m_fMin[3];
        float  m_fMax[3];
        float  m_fCenter[3]; 
        float  m_fDiagonalLen;
        float  m_fNormalizeFactor;
        float  m_fScaling[3];
    };
    struct
    {
        float  m_fMinX, m_fMinY, m_fMinZ;
        float  m_fMaxX, m_fMaxY, m_fMaxZ;
        float  m_fCenterX, m_fCenterY, m_fCenterZ;
        float  m_fDiagonalLen;
        float  m_fNormalizeFactor;
        float  m_fScalingX, m_fScalingY, m_fScalingZ;
    };
}; 
```

它用vs2008和intel编译器12.0编译得很好，但不能用gcc4.6.3编译，它给出了以下错误：

```
In file included from Mesh/MyMeshTool.cpp:17:0:
Mesh/MyMeshTool.h:68:28: error: declaration of ‘float                   nsMeshLib::MyBBox3D::<anonymous struct>::m_fCenter [3]’
Mesh/MyMeshTool.h:59:28: error: conflicts with previous declaration ‘float nsMeshLib::MyBBox3D::<anonymous struct>::m_fCenter [3]’
Mesh/MyMeshTool.h:69:17: error: declaration of ‘float nsMeshLib::MyBBox3D::<anonymous struct>::m_fDiagonalLen’
Mesh/MyMeshTool.h:60:17: error: conflicts with previous declaration ‘float nsMeshLib::MyBBox3D::<anonymous struct>::m_fDiagonalLen’
Mesh/MyMeshTool.h:70:20: error: declaration of ‘float nsMeshLib::MyBBox3D::<anonymous struct>::m_fNormalizeFactor’
Mesh/MyMeshTool.h:61:20: error: conflicts with previous declaration ‘float nsMeshLib::MyBBox3D::<anonymous struct>::m_fNormalizeFactor’
Mesh/MyMeshTool.h:71:32: error: declaration of ‘float nsMeshLib::MyBBox3D::<anonymous struct>::m_fScaling [3]’
Mesh/MyMeshTool.h:62:32: error: conflicts with previous declaration ‘float nsMeshLib::MyBBox3D::<anonymous struct>::m_fScaling [3]’
Mesh/MyMeshTool.h:78:17: error: declaration of ‘float nsMeshLib::MyBBox3D::<anonymous struct>::m_fDiagonalLen’
Mesh/MyMeshTool.h:60:17: error: conflicts with previous declaration ‘float nsMeshLib::MyBBox3D::<anonymous struct>::m_fDiagonalLen’
Mesh/MyMeshTool.h:79:20: error: declaration of ‘float nsMeshLib::MyBBox3D::<anonymous struct>::m_fNormalizeFactor’
Mesh/MyMeshTool.h:61:20: error: conflicts with previous declaration ‘float nsMeshLib::MyBBox3D::<anonymous struct>::m_fNormalizeFactor’ 
```

我怎么解决这个问题？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:49:21.090

我认为在这种情况下（组成联合共享标识符名称的单独结构），最好*不要*使用匿名结构。

要么使名称在*整个*工会中独一无二。

其他任何事情都是自找麻烦:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T00:07:50.737

如果您将程序选项传递给调用，最近的 GCC 确实接受未命名的[字段](http://gcc.gnu.org/onlinedocs/gcc-4.7.1/gcc/Unnamed-Fields.html)，但这是标准 C99 规范的扩展。`-fms-extensions``gcc`

您还可以小心使用预处理器技巧，例如

```
union myunion {
  struct {
     int fa_u1;
     int fb_u1;
  } u1;
#define fa u1.fa_u1
#define fb u1.fb_u1
  struct {
     double fc_u2;
     char fd_u2[8];
  } u2;
#define fc u2.fc_u2
#define fd u2.fd_u2
} 
```

然后你可以编码`x.fa`而不是`x.u1.fa_u1` 等。小心谨慎地使用预处理器技巧（记住 a`#define`具有完整的翻译单元范围）。在实践中，您会希望`fa`, `u1`,`fa_u1` 名称长且唯一。

# iphone - 在 iphone 4/4s 上显示网页

> ID：11626326
> 
> 赞同：0
> 
> 时间：2012-07-24T07:45:09.813
> 
> 标签：iphone, html, css, media-queries, viewport

我有一个网页，我创建了一个分辨率为 480 像素的媒体查询。

iphone 4 正确选择了这个版本，但由于某种原因，它悬在页面上，它没有使用 iphone 4 的实际分辨率，即 640px 的宽度，它使用 320px 的宽度。（我在某处读到它这样做是为了向后兼容为 iphone 3 开发的应用程序）

有没有办法使用视口或媒体查询来纠正这个问题？或者有人有一个如何实现iphone媒体查询的例子，我试过这个没有运气。

有没有办法拉伸 480px 媒体查询以适应 iphone？

这是我当前的视口：

```
<meta name="viewport" content="width=device-width; initial-scale=1; maximum-scale=5.0; minimum-scale=0.5;" /> 
```

`-webkit-device-pixel-ratio: 2`媒体查询 - 这没有任何作用，我只尝试过

```
@media screen  and (max-width: 480px) and (-webkit-device-pixel-ratio: 2) {} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T23:54:21.130

css3 中的这个媒体查询应该检测到任何 iphone 或 ipod

```
@media only screen and (max-device-width: 480px), only screen and (min-device-width: 640px) and (max-device-width: 1136px) and (-webkit-min-device-pixel-ratio: 2) 
```

我的理解是视网膜屏幕仍然会像普通的旧屏幕一样工作。你表现得好像东西仍然是 320px 是宽度。如果你想让某些东西在纵向上占据 iPhone 的整个宽度，那么你会使用 320 像素而不是 640 像素。确实，您应该使用百分比和 em，尽管不是精确的 px 大小。

不确定这是否回答了任何问题，但我想你想知道为什么如果你将某些东西设置为 640 像素，它会挂在边缘，而不仅仅是占据视网膜屏幕的宽度。

# hadoop - Hadoop 新 API - 设置 OutputFormat

> ID：11626328
> 
> 赞同：0
> 
> 时间：2012-07-24T07:45:15.683
> 
> 标签：hadoop

我正在尝试使用以下方法将我的工作的 OutputFormat 设置为 MapFileOutputFormat：

```
jobConf.setOutputFormat(MapFileOutputFormat.class); 
```

我收到此错误：mapred.output.format.class 与新的 reduce API 模式不兼容

我想我应该使用`setOutputFormatClass()`新 Job 类的集合，但问题是当我尝试这样做时：

```
job.setOutputFormatClass(MapFileOutputFormat.class); 
```

它希望我使用这个类：`org.apache.hadoop.mapreduce.lib.output.MapFileOutputFormat`. 在 hadoop 1.0.X 中没有这样的类。它只存在于早期版本中（例如 0.x）

我怎么解决这个问题 ？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T18:47:14.513

这个问题没有相当容易实现的解决方案。

我放弃并使用了符合我要求的序列文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T01:29:31.617

您是否尝试过以下操作？

```
import org.apache.hadoop.mapreduce.lib.output;
...
LazyOutputFormat.setOutputFormatClass(job, MapFileOutputFormat.class); 
```

# opencl - OpenCL SDK 找不到 Ivy 桥的 IGP

> ID：11626331
> 
> 赞同：3
> 
> 时间：2012-07-24T07:45:36.423
> 
> 标签：opencl, gpu, intel

我已经建立了一个用于编写 OpenCL 程序的 IvyBridge 平台。我的系统是win7 64位，VS2010作为开发工具。我的电脑上有一个带有 nVidia GTX560 的 i7-3770k。当我查询我系统的设备时，我找不到HD4000。我已使用以下网页检查了 HD4000 的系统驱动程序：http: [//www.intel.com/p/en_US/support/detect/graphics](http://www.intel.com/p/en_US/support/detect/graphics)。该报告称“当前驱动程序已安装 8.15.10.2696”。OpenCL SDK 是用于 OpenCL Application 2012 windows 64 位的最新英特尔 SDK，从[http://software.intel.com/en-us/articles/vcsource-tools-opencl-sdk/](http://software.intel.com/en-us/articles/vcsource-tools-opencl-sdk/)下载。以下是我的代码和输出。

我还注意到CPU的设备名称很奇怪。顺便说一句，我已经将 HD4000 设备连接到显示器，因为我发现有人遇到了无法创建 CL 上下文的问题。现在我发现在我们将显示器连接到 HD4000 后，GPU-Z 工具可以检测到 HD4000。所以有人可以帮我解决这个问题吗？

```
#include "stdafx.h"
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <CL/cl.h>

int _tmain(int argc, _TCHAR* argv[])
{
    cl_platform_id *platforms;
    cl_uint num_platforms;
    cl_device_id *devices_cpu, *devices_gpu;
    cl_uint num_devices;

    char dev_name[40], dev_vendor[40], dev_version[40], dev_profile[40];
    char plt_name[40], plt_vendor[40], plt_version[40], plt_profile[40];

    clGetPlatformIDs(1, NULL, &num_platforms);
    platforms = (cl_platform_id*) malloc(sizeof(cl_platform_id) * num_platforms);
    clGetPlatformIDs(num_platforms, platforms, NULL);
    for(int i = num_platforms - 1; i >= 0; i--)
    {
        clGetPlatformInfo(platforms[i], CL_PLATFORM_NAME, sizeof(plt_name),&plt_name,NULL);
        clGetPlatformInfo(platforms[i], CL_PLATFORM_VENDOR, sizeof(plt_vendor),&plt_vendor,NULL);
        clGetPlatformInfo(platforms[i], CL_PLATFORM_VERSION, sizeof(plt_version),&plt_version,NULL);
        clGetPlatformInfo(platforms[i], CL_PLATFORM_PROFILE, sizeof(plt_profile),&plt_profile,NULL);
        printf("\n\n\nPlatform #%d Info: \n\n", i);
        printf("Platform: %s \n", plt_name);
        printf("Vendor: %s \n", plt_vendor);
        printf("Version: %s \n", plt_version);
        printf("Profile: %s \n", plt_profile);

        clGetDeviceIDs(platforms[i],CL_DEVICE_TYPE_CPU, 1, NULL, &num_devices);
        devices_cpu = (cl_device_id *)malloc(sizeof(cl_device_id) * num_devices);
        clGetDeviceIDs(platforms[i], CL_DEVICE_TYPE_CPU, num_devices, devices_cpu, NULL);
       for(int j = 0 ; j < num_devices; j++)
       {
           clGetDeviceInfo(devices_cpu[j], CL_DEVICE_NAME, sizeof(dev_name), &dev_name, NULL);
           clGetDeviceInfo(devices_cpu[j], CL_DEVICE_VENDOR, sizeof(dev_vendor), &dev_vendor, NULL);
           clGetDeviceInfo(devices_cpu[j], CL_DEVICE_VERSION, sizeof(dev_version), &dev_version, NULL);
           clGetDeviceInfo(devices_cpu[j], CL_DEVICE_PROFILE, sizeof(dev_profile), &dev_profile, NULL);
           printf("\n\n\nCPU Device Info: \n\n");
           printf("Name: %s \n", dev_name);
           printf("Vendor: %s \n", dev_vendor);
           printf("Version: %s \n", dev_version);
           printf("Profile: %s \n", dev_profile);
       }
       clGetDeviceIDs(platforms[i],CL_DEVICE_TYPE_GPU, 1, NULL, &num_devices);
       devices_gpu = (cl_device_id *)malloc(sizeof(cl_device_id) * num_devices);
       clGetDeviceIDs(platforms[i],CL_DEVICE_TYPE_GPU, num_devices, devices_gpu, NULL);
       for(int j = 0; j < num_devices; j++)
       {
           clGetDeviceInfo(devices_gpu[j], CL_DEVICE_NAME, sizeof(dev_name), &dev_name, NULL);
           clGetDeviceInfo(devices_gpu[j], CL_DEVICE_VENDOR, sizeof(dev_vendor), &dev_vendor, NULL);
           clGetDeviceInfo(devices_gpu[j], CL_DEVICE_VERSION, sizeof(dev_version), &dev_version, NULL);
           clGetDeviceInfo(devices_gpu[j], CL_DEVICE_PROFILE, sizeof(dev_profile), &dev_profile, NULL);
           printf("\n\n\nGPU Device Info: \n\n");
           printf("Platform: %s \n", dev_name);
           printf("Vendor: %s \n", dev_vendor);
           printf("Version: %s \n", dev_version);
           printf("Profile: %s \n", dev_profile);
       }
       free((void*)devices_cpu);
       free((void*)devices_gpu);
    }
    return 0;
} 
```

输出：

> ```
> 平台 #1 信息：
> 平台：英特尔(R) OpenCL
> 供应商：英特尔(R) Corporation
> 版本：OpenCL 1.1
> 个人资料：FULL_PROFILE
> CPU设备信息：
> 名称: ÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌ
> 供应商：英特尔(R) Corporation
> 版本：OpenCL 1.1（内部版本 31360.31441）
> 个人资料：FULL_PROFILE
> 平台 #0 信息：
> 平台：NVIDIA CUDA
> 供应商：英伟达公司
> 版本：OpenCL 1.1 CUDA 4.2.1
> 个人资料：FULL_PROFILE
> GPU设备信息：
> 平台：GeForce GTX 560 Ti
> 供应商：英伟达公司
> 版本：OpenCL 1.1 CUDA
> 个人资料：FULL_PROFILE
> 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T21:43:02.123

如果卡上没有连接显示器，OpenCL 将无法在 HD4000 上运行。这是来自我自己在英特尔论坛中的测试和答案。

请参阅英特尔论坛上的这些主题：[1](http://software.intel.com/en-us/forums/topic/278555) [2](http://software.intel.com/en-us/forums/topic/277886) [3](http://software.intel.com/en-us/forums/topic/277261)。

# linux - 阻止用户访问网站

> ID：11626337
> 
> 赞同：0
> 
> 时间：2012-07-24T07:46:00.913
> 
> 标签：linux, apache, block

我想阻止特定用户访问我的网站。我知道动态 IP 是不可能的。是否有其他替代方法可以阻止特定用户访问网站？我目前在基于 APACHE LINUX 的服务器上。用户在我的网站上管理网络帐户。我正在使用 $_SESSION 变量管理 PHP 上的用户帐户。用户使用登录名和密码进行身份验证，就像任何购物车网站一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:49:36.673

除非用户必须登录，否则如果他使用动态 IP 地址，您将无法知道谁在访问您的站点。我能想到的唯一机制是检查任何识别您已经放置在他系统上的用户的 cookie。这当然不会阻止他们从不同的机器访问您的站点。

长话短说-除非用户必须首先登录，或者您有其他方式（cookie？）来识别用户，否则我不知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:51:43.420

可以通过.htaccess来阻止特定的ip，

order allow,deny deny from 127.0.0.1 allow from all

或者用这个来屏蔽完整范围的ip，

从 127.0.0 拒绝

# jasper-reports - JasperReports：动态报告生成

> ID：11626343
> 
> 赞同：1
> 
> 时间：2012-07-24T07:46:18.797
> 
> 标签：jasper-reports

我是*JasperReports*的新手。我需要设计一个报告，其中某些列和行是动态的。为此，我必须如何设计报告，并且在设计后我想与我的应用程序集成以从操作类和 dto 中获取数据。如何为其映射数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:54:23.360

我不知道它会有多动态，但它可以帮助你：[http ://dynamicjasper.com/](http://dynamicjasper.com/)

它使用 JasperReports 生成您的报告，它还允许您即时创建报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-14T07:07:23.273

有 2 个选项可以将数据与列映射。第一个选项是你可以将你的数据传递到数据源绑定中，列名作为键值对。第二个选项是您可以直接以列表形式将您的 dto 的 obj 传递给数据源。使用 report.setDataSource() 设置数据。在第一个选项中，确保您的数据类型与列名匹配。

# tsql - 如何过滤 sql 重复项？

> ID：11626345
> 
> 赞同：0
> 
> 时间：2012-07-24T07:46:23.503
> 
> 标签：tsql, sql-server-2008-r2

我的问题：我想要在同一个表和多个表中没有重复的记录？如何在 SQL 中继续执行此操作？

让我解释一下我的尝试：

```
Select distinct Col1, col2
from Table
where order id = 143 
```

**输出**

```
VolumeAnswer1    AreaAnswer1    heightAnswer1
VolumeAnswer2    AreaAnswer1    heightAnswer2
VolumeAnswer3    AreaAnswer1    heightAnswer2 
```

**预期输出**
它显示了第二个表的副本，但我需要输出如下：

```
VolumeAnswer1    AreaAnswer1    heightAnswer1
VolumeAnswer2                   heightAnswer2
VolumeAnswer3 
```

对于多个表，我需要相同的场景，也需要为连接找到相同的重复项。如果不能在 SQL Server 中处理，我们如何在 .Net 中处理呢？我使用了多项选择，但他们过去常常在单选中更改它。每一列都应该绑定在下拉列表中......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:05:11.117

这样的事情可能是一个很好的起点：

```
;with cte1 as (
Select col1, cnt1
From (
  Select
    col1
    ,row_number() over(Partition by col1 Order by col1) as cnt1
  From tbltest) as tbl_sub1
Where cnt1 = 1
), cte2 as (
Select col2, cnt2
From (
  Select
    col2
    ,row_number() over(Partition by col2 Order by col2) as cnt2
  From tbltest) as tbl_sub2
Where cnt2 = 1
), cte3 as (
Select col3, cnt3
From (
  Select
    col3
    ,row_number() over(Partition by col3 Order by col3) as cnt3
  From tbltest) as tbl_sub3
Where cnt3 = 1
)
Select
col1, col2, col3
From cte1
full join cte2 on col1 = col2
full join cte3 on col1 = col3 
```

Sql Fiddle 展示示例：[http ://sqlfiddle.com/#!3/c9127/1](http://sqlfiddle.com/#!3/c9127/1)

# powershell - PowerShell $PSVersionTable

> ID：11626347
> 
> 赞同：3
> 
> 时间：2012-07-24T07:46:35.340
> 
> 标签：powershell, powershell-2.0, powershell-1.0, powershell-3.0

我安装了 PowerShell 3.0，我希望模拟 v1.0

当我使用 -Version 1 $PSVersionTable 报告启动 PowerShell 3.0 时：

名称 值
---- -----
CLRVersion 2.0.50727.5456
BuildVersion 6.1.7601.17514
PSVersion 2.0
WSManStackVersion 2.0
PSCompatibleVersions {1.0, 2.0}
SerializationVersion 1.1.0.1
PSRemotingProtocolVersion 2.1

如果我使用 -Version 2 参数，我会得到相同的结果
如果我使用 -Version 3 参数，我会得到版本 3。

问题，为什么我不能模拟版本 1？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T12:58:57.100

看看[这个答案](https://stackoverflow.com/questions/1992196/what-exactly-does-powershells-version-parameter-do)，我不认为你可以在没有对 GAC 进行一些手术的情况下并排运行 1 和 2（因此它会遵循 1、2 和 3 也不会全部共存 - 只有 2 和3，因为 2 和 3*被*设计为并排运行）。第 2 版旨在完全取代第 1 版 AFAICT。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:06:10.073

您不能使用并排的东西运行 V1。那从来没有得到支持。您可以从 V3 运行 V2，但不能从 V1 运行。

# wordpress - 致命错误：调用成员函数 the_meta() wpalchemy

> ID：11626350
> 
> 赞同：0
> 
> 时间：2012-07-24T07:46:55.907
> 
> 标签：wordpress, meta-boxes

当我从 single.php 调用 the_meta() 时出现错误，我使用 wordpress 3.4.1 和 WordPress Alchemy Metabox Class 1.4.17，我的 functions.php

```
include_once ( get_template_directory() .'/metaboxes/setup.php');
include_once( get_template_directory() .'/metaboxes/custom-spec.php'); 
```

我的 setup.php

```
 include_once WP_CONTENT_DIR . '/wpalchemy/MetaBox.php';
    include_once WP_CONTENT_DIR . '/wpalchemy/MediaAccess.php';

// include css to help style our custom meta boxes
add_action( 'init', 'my_metabox_styles' );

function my_metabox_styles()
{
    if ( is_admin() ) 
    { 
        wp_enqueue_style( 'wpalchemy-metabox', get_stylesheet_directory_uri() . '/metaboxes/meta.css' );
    }
}

$wpalchemy_media_access = new WPAlchemy_MediaAccess(); 
```

自定义规范.php

```
<?php
$custom_mb = new WPAlchemy_MetaBox(array
(
    'id' => '_custom_meta',
    'title' => 'My Custom Meta',
    'template' => get_stylesheet_directory() . '/metaboxes/custom-meta.php',
)); 
```

和single.php

```
<?php //inside loop.......... ?>
<?php global $custom_mb ?>
<?php echo $custom_mb->the_meta();?> 
```

错误是：致命错误：在第 19 行的 C:\wamp\www\wp\wp-content\themes\twentyeleven\single.php 中的非对象上调用成员函数 the_meta()

请帮我找出错误的原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:51:04.587

这里的主要问题是全局 $custom_mb 很可能什么都不是。所以要求它有一个值是导致错误的原因。

看起来你有正确的代码，如这里的示例：http: [//www.farinspace.com/wpalchemy-metabox/](http://www.farinspace.com/wpalchemy-metabox/)

在全局之后使用`print_r($custom_mb);`以查看它的内容。如果没什么，你就知道有问题了。

Also, the code you say is inside the loop should be just outside of it.

(Update) **FIX:** Add `global $custom_mb;` to the top of the new php page.

# apache - 如何在 Apache Ace 中启用日志记录？

> ID：11626351
> 
> 赞同：1
> 
> 时间：2012-07-24T07:47:00.180
> 
> 标签：apache, logging, apache-ace

是否可以在 Apache Ace 中启用日志记录？如果是，如何？在源代码中，我可以看到 LogService 用于将消息写入日志。但是当我启动 ace devserver 时，我无法找到日志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:13:27.923

LogService 是一个标准的概要服务，您可以使用任何实现来实际记录日志语句。我们使用来自 Apache Felix 的那个，并且有一些 shell 命令可以实际检索日志语句（提示，该命令称为“日志”）。但是，此实现不会将它们写入磁盘。不过，根据规范，您自己也很容易做到这一点。存在可供读取的 LogReader，您可以将自己注册为 LogListener。

# mysql - 如何使存储过程中的查询知道 Spring Transaction？

> ID：11626353
> 
> 赞同：2
> 
> 时间：2012-07-24T07:47:02.707
> 
> 标签：mysql, spring, transactions, spring-transactions

在数据库上执行了一堆查询之后，我从 Spring Transaction（一个标有 @Transactional 的 Spring Service）调用了一个存储过程。

```
entityManager.createNativeQuery("call stored_procedure()");
query.executeUpdate(); 
```

为了在java代码抛出异常时使存储过程的查询回滚（或者由于存储过程中抛出异常而回滚javacode中对数据库的修改），我设置了自动提交mysql服务器的变量为false。这解决了我的部分问题。我现在拥有数据库事务的所有代码。我的问题是存储过程的查询不知道在 java 代码中所做的修改（对 DB）。即存储过程中的选择读取在 Spring 事务开始之前数据库中的值。

我的问题是（标题中所述的问题）如何使存储过程中的查询知道在调用存储过程（从该事务）之前对 Spring Transaction 中的数据库所做的修改？

不幸的是，现在将数据库设置为脏读不是我的选择。是否可以获取 Spring 在 mysql 上打开的事务的 ID，并在该事务中运行存储过程的查询？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:03:21.713

结果我需要在实体管理器上调用flush，以便将持久性上下文同步到底层数据库。我还从 SP 中删除了任何事务管理指令，它按预期工作；存储过程中的查询现在是 Spring 管理的事务的一部分。

# debugging - 劳特巴赫调试

> ID：11626357
> 
> 赞同：0
> 
> 时间：2012-07-24T07:47:24.360
> 
> 标签：debugging, assembly, arm, lauterbach

我在使用*劳特巴赫*调试工具时遇到了一些问题。我想创建练习脚本并与现有脚本集成。

例如，我正在测试板*ARM*。我有一个脚本`arm.cmm`，但是当我运行它时，寄存器的值发生了变化。我可以使用调试并手动检测它，但我希望它通过全自动完成。

所以我使用*练习脚本*语言来检查寄存器的值，但我不知道有什么方法可以将新脚本集成`.cmm`到现有脚本中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-03T12:03:06.897

```
DO <filename.cmm> [<paramaters>]
ENDDO 
```

**DO**命令启动一个 PRACTICE 程序。**DO**命令可用于在命令级别启动 PRACTICE 程序或在程序内运行另一个文件，如子程序。**由DO**命令启动的 PRACTICE 文件应由**ENDDO**指令终止。可以定义传递给子例程的附加参数。**子程序通过ENTRY**命令读取参数列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T01:48:49.063

我不确定我是否完全理解......当你调试时，一个寄存器正在从你下面改变？您只是想打印出寄存器的内容还是想对其进行逻辑比较？

无论哪种方式，我都建议给他们打电话或给他们发电子邮件。Lauterbach 是一个很棒的调试器，但它可能很复杂。我认识质量部门的人，他们非常乐于助人，可以立即回答这样的问题。

# r - 为什么 rollapply 内部的 range(index(x)) 与外部的行为不同（仅针对我的人工数据！）

> ID：11626358
> 
> 赞同：2
> 
> 时间：2012-07-24T07:47:25.160
> 
> 标签：r, xts

我正要写一篇关于我制作的有用 R 函数的博客，去创建一些虚拟数据，但虚拟数据的行为不同！帮助！

```
 library(xts)
 data=xts(1:139,Sys.Date()-139:1) 
```

看着它，一切看起来都很好：

```
> head(data)
           [,1]
2012-03-07    1
2012-03-08    2
2012-03-09    3
2012-03-10    4
2012-03-11    5
2012-03-12    6
> tail(data)
           [,1]
2012-07-18  134
2012-07-19  135
2012-07-20  136
2012-07-21  137
2012-07-22  138
2012-07-23  139
> head(index(data))
[1] "2012-03-07" "2012-03-08" "2012-03-09" "2012-03-10" "2012-03-11" "2012-03-12"
> tail(index(data))
[1] "2012-07-18" "2012-07-19" "2012-07-20" "2012-07-21" "2012-07-22" "2012-07-23"
> range(index(data))
[1] "2012-03-07" "2012-07-23" 
```

但是，rollapply 很奇怪。给出“ `range(index())`1 40”而不是字符串。

```
> rollapply(data,width=40,by=30,FUN=function(x){print(range(index(x)));length(x)})
[1]  1 40
[1]  1 40
[1]  1 40
[1]  1 40

2012-03-26 40
2012-04-25 40
2012-05-25 40
2012-06-24 40 
```

这很*奇怪*，因为在我*的真实*数据中，rollapply 将日期范围输出为字符串。对比`str`我的真实数据和上面的人工数据，它们是相同的。特别是他们都说'*由类对象索引：[Date] TZ：* '并且他们都说：' *tclass：chr“Date”* '

好吧，不，我夸大了；以下人工数据与我的真实数据具有相同的结构：

```
data=xts(data.frame(a=1:139,b=seq(3.14,by=0.01,length.out=139)),Sys.Date()-139:1) 
```

它具有完全相同的奇怪 rollapply 问题。

PS我提到的有用的功能是rollapply wrapper；我没有在上面显示它，因为我不需要：核心 xts rollapply 也显示了问题。但是当我最终写博客时，我会在评论中发布它的链接:-)

* * *

**更新**

这是一些带有 xts 对象的输出：

```
> rollapply(data,width=40,by=30,FUN=function(x){print(class(x));print(range(index(x)));length(x)})
[1] "xts" "zoo"
[1] "2012-01-02" "2012-02-24"
...
> class(data)
[1] "xts" "zoo"
> str(data)
An ‘xts’ object from 2012-01-02 to 2012-07-18 containing:
  Data: num [1:139, 1] 76.9 76.7 76.7 77.1 76.9 ...
 - attr(*, "dimnames")=List of 2
  ..$ : NULL
  ..$ : chr "Close"
  Indexed by objects of class: [Date] TZ: 
  xts Attributes:  
List of 2
 $ tclass: chr "Date"
 $ tzone : chr "" 
```

这是我的人造 xts 对象的一些输出（除了我添加了`colnames(data)=c("Close")`：）

```
> rollapply(data,width=40,by=30,FUN=function(x){print(class(x));print(range(index(x)));length(x)})
[1] "integer"
[1]  1 40
...
> class(data)
[1] "xts" "zoo"
> str(data)
An ‘xts’ object from 2012-03-07 to 2012-07-23 containing:
  Data: int [1:139, 1] 1 2 3 4 5 6 7 8 9 10 ...
 - attr(*, "dimnames")=List of 2
  ..$ : NULL
  ..$ : chr "Close"
  Indexed by objects of class: [Date] TZ: 
  xts Attributes:  
List of 2
 $ tclass: chr "Date"
 $ tzone : chr "" 
```

即相同的str/class，相同的函数调用，但不同的结果。使用以下代码从 csv 文件中读取其工作的 xts 对象：

```
d=read.table(fname,sep=',',header=T,stringsAsFactors=F)
x=as.xts(subset(d,select=-datestamp),order.by=as.Date(d$datestamp)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:55:19.557

请注意以下事项：

```
rollapply(data,width=40,by=30,FUN=function(x){class(x)}) 

2012-03-26 integer
2012-04-25 integer
2012-05-25 integer
2012-06-24 integer 
```

`rollapply`将数据子集作为`integer`而不是`xts`对象传递。

的代码`zoo:::rollapply.zoo`似乎只使用标准`[`子集，所以不清楚为什么类信息会丢失。

**编辑**

实际上有一行：

```
dat <- mapply(f, seq_along(time(data)), width, MoreArgs = list(data = coredata(data), 
    ...), SIMPLIFY = FALSE) 
```

所以只有`coredata`被传递给最终函数。这意味着您不能使用`rollapply`来获取这些部分范围。

# android - 在应用程序之间共享绘图

> ID：11626359
> 
> 赞同：1
> 
> 时间：2012-07-24T07:47:29.723
> 
> 标签：android, android-resources

我在我的应用程序中实现了插件系统。插件作为独立应用程序存在。

从主应用程序中的插件访问可绘制对象的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T08:44:22.190

你有几个选择：

*   [ContentProvider](http://developer.android.com/reference/android/content/ContentProvider.html) - 不一定需要基于`SQLite`数据库。

*   清单属性`android:sharedUserId`

    来自文档：

    > 将与其他应用程序共享的 Linux 用户 ID 的名称。默认情况下，Android 会为每个应用程序分配其自己的唯一用户 ID。但是，如果两个或多个应用程序的此属性设置为相同的值，则它们都将共享相同的 ID — 前提是它们也由相同的证书签名。具有相同用户 ID 的应用程序可以访问彼此的数据，并且如果需要，可以在同一进程中运行。

    见[http://developer.android.com/guide/topics/manifest/manifest-element.html#uid](http://developer.android.com/guide/topics/manifest/manifest-element.html#uid)

*   [PackageManager.getResourcesForApplication()](http://developer.android.com/reference/android/content/pm/PackageManager.html#getResourcesForApplication%28java.lang.String%29)检索与应用程序关联的资源。

    用法：

    > ```
    > PackageManager pm = getPackageManager();
    > try {
    >     Resources resources = pm.getResourcesForApplication("com.example.app");
    >     int id = resources.getIdentifier("ic_launcher", "drawable", "com.example.app");
    >     Drawable d = resources.getDrawable(id)
    > } catch (NameNotFoundException e) {
    >     e.printStackTrace();
    > } 
    > ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:53:38.283

我认为 ContentProvider 是您的最佳选择。它们专门设计用于“在多个应用程序之间共享数据”。这是来自 developer.android 的参考：http: [//developer.android.com/reference/android/content/ContentProvider.html](http://developer.android.com/reference/android/content/ContentProvider.html) 这里是详细指南： [http ://www.vogella.com/articles/AndroidSQLite/article .html](http://www.vogella.com/articles/AndroidSQLite/article.html)

# mvvm-light - 绑定 ICommand 进入按下

> ID：11626361
> 
> 赞同：2
> 
> 时间：2012-07-24T07:47:33.240
> 
> 标签：mvvm-light, windows-runtime, icommand

所以我有一个带有基本视图的 Windows 8 应用程序： 示例：

```
 <TextBox Text="{Binding UserName}"/>
 <PasswordBox Text="{Binding Password}"/>
 <Button Content="Sign In" Command="{Binding Login}"/> 
```

并实现了 ICommand 的视图模型。

```
 public class LoginViewModel : ViewModelBase
{
    public ICommand Login { get; set; }
    //Other properties

    public LoginViewModel()
    {
       Login = ExecuteLogin;
    }

    public void ExecuteLogin()
    {
         //Logic
    }
} 
```

一切正常。但是现在我想在用户在密码框中按 enter 时触发 ICommand，只是为了更好的用户体验。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T12:06:15.520

是的，你需要的是这个类：

```
namespace SL
{
    public sealed class EnterKeyDown
    {
        #region Properties

        #region Command

        /// <summary>
        /// GetCommand
        /// </summary>
        /// <param name="obj"></param>
        /// <returns></returns>
        public static ICommand GetCommand(DependencyObject obj)
        {
            return (ICommand)obj.GetValue(CommandProperty);
        }

        /// <summary>
        /// SetCommand
        /// </summary>
        /// <param name="obj"></param>
        /// <param name="value"></param>
        public static void SetCommand(DependencyObject obj, ICommand value)
        {
            obj.SetValue(CommandProperty, value);
        }

        /// <summary>
        /// DependencyProperty CommandProperty
        /// </summary>
        public static readonly DependencyProperty CommandProperty =
            DependencyProperty.RegisterAttached("Command", typeof(ICommand), typeof(EnterKeyDown), new PropertyMetadata(null, OnCommandChanged));

        #endregion Command

        #region CommandParameter

        /// <summary>
        /// GetCommandParameter
        /// </summary>
        /// <param name="obj"></param>
        /// <returns></returns>
        public static object GetCommandParameter(DependencyObject obj)
        {
            return (object)obj.GetValue(CommandParameterProperty);
        }

        /// <summary>
        /// SetCommandParameter
        /// </summary>
        /// <param name="obj"></param>
        /// <param name="value"></param>
        public static void SetCommandParameter(DependencyObject obj, object value)
        {
            obj.SetValue(CommandParameterProperty, value);
        }

        /// <summary>
        /// DependencyProperty CommandParameterProperty
        /// </summary>
        public static readonly DependencyProperty CommandParameterProperty =
            DependencyProperty.RegisterAttached("CommandParameter", typeof(object), typeof(EnterKeyDown), new PropertyMetadata(null, OnCommandParameterChanged));

        #endregion CommandParameter

        #region HasCommandParameter

        private static bool GetHasCommandParameter(DependencyObject obj)
        {
            return (bool)obj.GetValue(HasCommandParameterProperty);
        }

        private static void SetHasCommandParameter(DependencyObject obj, bool value)
        {
            obj.SetValue(HasCommandParameterProperty, value);
        }

        private static readonly DependencyProperty HasCommandParameterProperty =
            DependencyProperty.RegisterAttached("HasCommandParameter", typeof(bool), typeof(EnterKeyDown), new PropertyMetadata(false));

        #endregion HasCommandParameter

        #endregion Propreties

        #region Event Handling

        private static void OnCommandParameterChanged(DependencyObject o, DependencyPropertyChangedEventArgs e)
        {
            SetHasCommandParameter(o, true);
        }

        private static void OnCommandChanged(DependencyObject o, DependencyPropertyChangedEventArgs e)
        {
            FrameworkElement element = o as FrameworkElement;
            if (element != null)
            {
                if (e.NewValue == null)
                {
                    element.KeyUp -= FrameworkElementKeyUp;
                }
                else if (e.OldValue == null)
                {
                    element.KeyUp += FrameworkElementKeyUp;
                }
            }
        }

        private static void FrameworkElementKeyUp(object sender, KeyRoutedEventArgs e)
        {
            if (e.Key == VirtualKey.Enter)
            {
                var o = sender as DependencyObject;
                var command = GetCommand(sender as DependencyObject);

                var element = e.OriginalSource as FrameworkElement;
                if (element != null)
                {
                    // If the command argument has been explicitly set (even to NULL) 
                    if (GetHasCommandParameter(o))
                    {
                        var commandParameter = GetCommandParameter(o);

                        // Execute the command 
                        if (command.CanExecute(commandParameter))
                        {
                            command.Execute(commandParameter);
                        }
                    }
                    else if (command.CanExecute(element.DataContext))
                    {
                        command.Execute(element.DataContext);
                    }
                }
            }
        }

        #endregion
    }
} 
```

XAML 命名空间：

```
xmlns:sl="clr-namespace:SL;" 
```

XAML 代码：

```
<TextBox sl:EnterKeyDown.Command="{Binding SearchClickCommand}"                              
          Text="{Binding Input, Mode=TwoWay, 
             NotifyOnValidationError=True, ValidatesOnDataErrors=True, 
             ValidatesOnExceptions=True, ValidatesOnNotifyDataErrors=True}" />

<Button Content="Search"
        Command="{Binding SearchClickCommand}" /> 
```

# jquery - 我可以让切换淡入慢和淡出快吗？

> ID：11626362
> 
> 赞同：2
> 
> 时间：2012-07-24T07:47:33.897
> 
> 标签：jquery

我希望切换以这样一种方式工作，当它淡入时，它以慢速出现，而淡出时速度很快......

`$('#target').fadeToggle("fast");`

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T08:02:58.503

```
$('#click-me').click(function(){
    if($('#target').is(':visible')){
       $('#target').fadeOut('fast');
    }
    else{
       $('#target').fadeIn('slow');
    }
}); 
```

那应该做的工作。我曾经`if($('#target').is(':visible'))`检查它是可见还是隐藏（切换）。显然，当您单击某些内容时它会触发`id="click-me"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T08:12:59.283

如果你想切换另一个元素的淡入淡出，那么你可以使用这个函数：

HTML：

```
<button id="but" target="#content">Toggle content</button> 
```

JS：

```
function fadeToggle() {
    var target = $(this).attr('target');

    if(!$(target).hasClass('hide')) {
        $(target).fadeOut(100).addClass('hide');
    } else {
        $(target).fadeIn(2000).removeClass('hide');            
    }
}

$('#but').click(fadeToggle); 
```

示例：[JsFiddle](http://jsfiddle.net/Gqhgf/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T08:05:36.520

如果您试图以`#target`不同的速度立即淡入和淡出，那么您可以使用这样的东西（正如其他人所建议的那样）：

```
$("#target").click(function() {
    $(this).fadeOut('fast').fadeIn('slow');
}); 
```

这将调用 上的`fadeOut()`方法`#target`，然后在`fadeIn()`第一个完成后调用该方法，因此您的 div 将消失然后重新出现。

相反，如果您想将切换绑定到另一个相关项目，您可以这样做：

```
$("#clickme").toggle(function() {
    $("#target").fadeOut('fast');
}, function () {
    $("#target").fadeIn('slow');
});​ 
```

`#clickme`页面上的另一个元素在哪里。请参阅[此小提琴](http://jsfiddle.net/raHwU/)以获取工作示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T10:04:49.740

你可以做这样的事情

HTML

```
<button id="but" target="#content">Toggle content</button> 
```

JS代码

```
function fadeToggle() {
    var target = $(this).attr('target');

    $(target).fadeOut(1000,function(){
      $(target).fadeIn(2000);  
    });
}

$('#but').click(fadeToggle); 
```

# emacs - 可用于 emacs 的交互式拼写检查程序

> ID：11626363
> 
> 赞同：4
> 
> 时间：2012-07-24T07:47:36.760
> 
> 标签：emacs, elisp, aspell, hunspell, emacs24

我最近切换到 emacs24 并升级到 Ubuntu 12.04。我似乎无法让 hunspell 再次正常工作。我发现 hunspell 通常比 aspell 好。Hunspell 只想使用澳大利亚词典而不是美国英语词典或冻结我的系统。使用 aspell，我可以毫无问题地切换字典或运行 flyspell 模式。

我的问题是人们如何在 emacs24 中设置交互式拼写？仍然使用 ispell 和 flyspell 或任何其他首选设置。你在使用 hunspell 和 emacs24 吗？我可能会继续尝试让这个工作，但想确认其他地方的人没有任何问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T11:36:09.083

我在 OS X（通过自制软件安装）上使用 hunspell 和从 bzr 构建的 Emacs 24。我的 .emacs 的相关部分如下。但是我没有切换字典，所以我无能为力。我花了一段时间才把事情做好，而且那是不久前的事了，所以我不记得为什么一切都是这样的。

```
(setq-default ispell-program-name "hunspell")
(setq ispell-dictionary "american"
  ispell-extra-args '() ;; TeX mode "-t"
  ispell-silently-savep t
  )

(setq flyspell-mode-map nil)

(add-hook 'ispell-initialize-spellchecker-hook
      (lambda ()
    (setq ispell-base-dicts-override-alist
          '((nil ; default
         "[A-Za-z]" "[^A-Za-z]" "[']" t
         ("-d" "en_US" "-i" "utf-8") nil utf-8)
        ("american" ; Yankee English
         "[A-Za-z]" "[^A-Za-z]" "[']" t
         ("-d" "en_US" "-i" "utf-8") nil utf-8)
        ("british" ; British English
         "[A-Za-z]" "[^A-Za-z]" "[']" t
         ("-d" "en_GB" "-i" "utf-8") nil utf-8))))) 
```

# ios - 如何根据 x ， y ( touchesMoved ) 在视图中获取对象

> ID：11626365
> 
> 赞同：1
> 
> 时间：2012-07-24T07:47:41.777
> 
> 标签：ios, xcode, touchesmoved, uievent

我想`UIImageView`使用这种方法根据 xPos 和 yPos 在视图中获取（或我拥有的任何东西）：

```
- (void) touchesMoved: (NSSet *)touches withEvent:(UIEvent *)event {
  CGPoint tappedPt = [[touches anyObject] locationInView:viewIndex];
  int     xPos = tappedPt.x;
  int     yPos = tappedPt.y;

  NSLog(@"xPos %i yPos %i ", xPos, yPos);

  // do something with xPos and yPos like add them to an array
} 
```

非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:27:01.143

只要您知道 UIImageView 对象的框架，检查一个点是否位于某个矩形中应该不难。

但是您是否尝试过创建 UIView 的子类，向其中添加图像。而你的那个类对象而不是在它上面添加一个 UIImageView 对象，并在这个 UIView 的子类而不是你的 UIViewController 类中实现触摸方法？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:49:59.130

我认为没有任何东西可以穿过子层次结构。您可以使用 UIView 方法减少一些工作：-

```
- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event 
```

其中 event 可以为零，但您仍然必须对每个孩子进行该测试，并且可能是后代。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-24T08:37:11.160

您可以获得主视图的所有子视图。然后判断子视图中是否有触摸点。

```
for(UIView *aView in [self subviews])
{
    if(CGRectContainsPoint(aView.frame, tappedPt))
    {
        return aView;
    }
} 
```

但它有一个问题。如果许多子视图重叠，你只能得到一个视图。您可以修改代码以获取视图数组。

# java - 休眠列表 Java 持久性 1.0

> ID：11626367
> 
> 赞同：1
> 
> 时间：2012-07-24T07:47:46.280
> 
> 标签：java, hibernate, persistence, jpa-1.0

*在Hibernate*中映射 List 似乎有问题。在我们的项目中有一个类`Profile`，它包含一个`List<String>`.

*Hibernate*是否可以使用注解，使用*Java Persistence 1.0*（否！）进行`List<String>`映射？（注解如）**`ElementCollection``@Entity`**

 **我知道*Java Persistence 2.0*由.0 组成`ElementCollection`，但在我们的项目中，我们只有*Java Persistence 1.0*。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T07:52:42.450

JPA 1 中没有类似的东西。您必须回退到 Hibernate 特定的注释并使用[CollectionOfElements](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/annotations/CollectionOfElements.html)代替：

```
@org.hibernate.annotations.CollectionOfElements 
List<String> myElements; 
```**

# qt - dpkg-shlibdeps: 失败: 没有找到动态库的依赖信息

> ID：11626370
> 
> 赞同：1
> 
> 时间：2012-07-24T07:47:58.897
> 
> 标签：qt, package, meego

[我有一个使用 quazip（ http://sourceforge.net/projects/quazip/](http://sourceforge.net/projects/quazip/)中的开源库）在 Meego 上运行的 qt 应用程序项目 MyAppSetting，

当我尝试运行它时，出现以下警告和错误：

```
dpkg-shlibdeps：警告：在任何库中都找不到 debian/myappsetting/usr/lib/libquazip.so.1.0.0 使用的符号 crc32。

dpkg-shlibdeps：警告：debian/myappsetting/usr/lib/libquazip.so.1.0.0 使用的符号 __aeabi_unwind_cpp_pr1@GCC_3.5 在任何库中都找不到。

dpkg-shlibdeps：警告：debian/myappsetting/usr/lib/libquazip.so.1.0.0 使用的符号 deflateInit2_ 在任何库中都找不到。

dpkg-shlibdeps：警告：debian/myappsetting/usr/lib/libquazip.so.1.0.0 使用的符号 adler32 在任何库中都找不到。

dpkg-shlibdeps：警告：debian/myappsetting/usr/lib/libquazip.so.1.0.0 使用的符号 inflateEnd 在任何库中都找不到。

dpkg-shlibdeps：警告：debian/myappsetting/usr/lib/libquazip.so.1.0.0 使用的符号 deflate 在任何库中都找不到。

dpkg-shlibdeps：警告：debian/myappsetting/usr/lib/libquazip.so.1.0.0 使用的符号 deflateEnd 在任何库中都找不到。

dpkg-shlibdeps：警告：debian/myappsetting/usr/lib/libquazip.so.1.0.0 使用的符号 inflateInit2_ 在任何库中都找不到。

dpkg-shlibdeps：警告：debian/myappsetting/usr/lib/libquazip.so.1.0.0 使用的符号膨胀在任何库中都找不到。

dpkg-shlibdeps：警告：在任何库中都找不到 debian/myappsetting/usr/lib/libquazip.so.1.0.0 使用的符号 get_crc_table。

dpkg-shlibdeps: warning: 1 其他类似的警告已被跳过（使用 -v 查看全部）。

**dpkg-shlibdeps: 失败: 找不到/opt/QtSDK/Madde/sysroots/harmattan_sysroot_10.2011.34-1_slim/usr/lib/libquazip.so.1 的依赖信息（debian/myappsetting/opt/MyAppSetting/bin/ 使用）我的应用程序设置）。

打包错误：命令“/opt/QtSDK/Madde/bin/mad dpkg-buildpackage -nc -uc -us”失败。退出代码：2

构建项目 MyAppSetting 时出错（目标：Harmattan）**

执行构建步骤“创建 Debian 包”时

```

我已经将 Harmatton 的 quazip 构建到一个动态库 libquazip.so.1 中，由 MyAppSetting 在 pro 文件中使用，如下所示：

```
LIBS += -L/usr/lib -L./ -lquazip 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:04:30.913

猜测一下，libquazip 似乎使用了 zlib 中的符号，但没有链接到 zlib 本身。

__aeabi_unwind_cpp_pr1@GCC_3.5 警告是一个单独的问题，但我发现可以忽略的材料：http: [//lists.debian.org/debian-arm/2012/06/msg00040.html](http://lists.debian.org/debian-arm/2012/06/msg00040.html)

# php - 在zend中执行查询返回null

> ID：11626378
> 
> 赞同：0
> 
> 时间：2012-07-24T07:48:12.157
> 
> 标签：php, mysql, zend-framework

我直接在 phpmyadmin 中运行这个查询，它完美地返回了结果！！但是当我在我的 php 脚本中运行这个查询时，它返回**NULL**

这是我的数据库类：

```
class Product extends Places_Db_Table_Row_Observable  {
    protected $_name = 'product';
    PUBLIC function getMaxSubcatProduct()
    {

        $query = $this->getAdapter()->query("select  max( c ) AS maxcount,id from ( select COUNT(*) as c 
                    ,product_sub_category_id as id  from product group by product_sub_category_id ) as max ");
        $res = $query->fetchAll();
        return $res;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:31:40.950

这是我的错！我在我的脚本中显示了这样的结果：

```
echo $this->masterMenu["id"]; 
```

但正确的方法是：

```
foreach ($this->masterMenu as $key => $value)
                    {
                        $masterMenu =    $value['id'];
                    } 
```

# android - Robolectric：ShadowApplication？

> ID：11626380
> 
> 赞同：2
> 
> 时间：2012-07-24T07:48:13.777
> 
> 标签：android, robolectric

我通过stackoverflow和google在一些代码中看到很多对ShadowApplication的引用，但我不知道它的作用。

我不知道我是否缺少一些文档资源，但我无法提供任何好的资源，javadoc api 也没有解释太多。

谁能提供有关 ShadowApplication 的更多信息，是否有更多资源，即培训、教程？

我敢肯定，除了 ShadowApplication 之外，我还缺少很多东西

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T10:33:13.407

为了禁止在 JVM 而不是 Dalvik VM 中运行 android 代码，Google 剥离了 android.jar 文件中的类，并将其所有方法体替换为：

> 抛出新的 RuntimeException("Stub!");

一般来说，Robolectric 使用带有视图和资源加载的阴影对象来解决这个问题。

### 阴影对象如何工作？

*   Robolectric 拦截被测 Android 类的加载。
*   重写 Android 类的方法体（使用 javassist）。
*   将阴影对象绑定到新的 Android 对象。
*   修改后的 Android 对象代理方法调用影子对象。
*   阴影支持 Android 类。即 ShadowImageView 支持 ImageView 类。
*   对 Android 对象的方法调用被代理到具有相同签名的影子对象的方法（如果存在）。
*   提供基本行为的简单实现。
*   状态被记录下来，因此可以在测试中进行验证。

查看[此处](http://pivotal.github.com/robolectric/resources.html)的主题演讲和[此 youtube 会话](http://www.youtube.com/watch?v=T6FWL877txw)以了解更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:01:20.253

我认为您应该查看[Roboelectric](http://pivotal.github.com/robolectric/user-guide.html)的文档，看看它们是否解释了您不理解的概念。

从手册：

> 有时 Android 类不提供访问被测 Android 对象状态的方法。Robolectric.shadowOf() 方法提供对表示 Android 对象的影子实例的引用，允许测试断言在其他情况下不可用的状态。

当我查看 Roboelectric 的源代码并看到许多（如果不是全部）android 类的影子实现时，这对我来说很有意义，例如 Application（请参阅[ShadowApplication](http://www.jarvana.com/jarvana/view/com/pivotallabs/robolectric/0.9.5/robolectric-0.9.5-sources.jar!/com/xtremelabs/robolectric/shadows/ShadowApplication.java?format=ok)）。

# android - 在 ActionBar 中设置 Item 位置

> ID：11626383
> 
> 赞同：18
> 
> 时间：2012-07-24T07:48:16.190
> 
> 标签：android

我有这个布局，可以在 ActionBar中添加**1 个或多个项目**

```
<?xml version="1.0" encoding="utf-8"?> 
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
        <item
           android:id="@+id/item_test"                
           android:showAsAction="always|withText"
           android:title="SearchIcon"/> 
</menu> 
```

然后我将从另一个 Fragment 或 Activity 动态添加另一个项目到 ActionBar

```
MenuItem populateItem = menu.add("My New Item - Reload Icon"); 
```

但是我希望我刚刚添加的项目**保持在**我之前的项目之前，就像图片一样：

![在此处输入图像描述](../Images/f0d3d9cfeeb9f0f81ede243cc412c854.png)

如果我像我一样添加它，图标将显示为最后一张图片，我怎样才能获得第二张图片中的对齐方式？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-24T07:54:47.263

您可以使用 android:orderInCategory 属性对每个需要移动的菜单项重新排序。您必须使用 menuCategory 来使用该选项。

例如，分配给所有项目：

```
android:menuCategory="system" 
```

然后，只需将较低的 orderInCategory 值设置为要保留在左侧的项目。

类别中的订单决定了订单的外观，从低到高。

# objective-c - 如果一个属性是通过引用调用 C 方法返回的，那么该属性是否应该被归为保留

> ID：11626386
> 
> 赞同：0
> 
> 时间：2012-07-24T07:48:29.427
> 
> 标签：objective-c, properties, return-by-reference

对于以下代码（不使用 ARC 构建）

在.h

```
@interface VideoFrameExtractor : NSObject {
AVFormatContext *pFormatCtx;
AVCodecContext *pCodecCtx;
} 
```

米

```
int av_open_input_file(AVFormatContext **ic_ptr, const char *filename,
                       AVInputFormat *fmt,
                       int buf_size,
                       AVFormatParameters *ap);

    // Open video file
    if(av_open_input_file(&pFormatCtx, [moviePath  cStringUsingEncoding:NSASCIIStringEncoding], NULL, 0, NULL)!=0)
        goto initError; // Couldn't open file

    // Retrieve stream information
    if(av_find_stream_info(pFormatCtx)<0)
        goto initError; // Couldn't find stream information 
```

我们应该将 pFormatCtx 属性的属性设置为保留还是其他？提出这个问题的原因是我们在 av_find_stream_info 调用中引用属性时遇到了 EXC_BAD_ACCESS 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:59:29.640

> 我们应该将 pFormatCtx 属性的属性设置为 strong 还是其他？

`av_open_input_file`不是Objective C方法，它直接在ARC之外分配内存，没有任何类型的引用计数。因此，您绝对不需要通过强属性处理这些引用。

`av_find_stream_info`您绝对应该以可能失败的方式寻找它。

实际上，我看到的是您应该按照一些步骤正确设置您的库以使其正常工作：

```
AVFormatContext* pFormatCtx = avformat_alloc_context();
avformat_open_input(&pFormatCtx, filename, NULL, NULL);
int64_t duration = pFormatCtx->duration;
// etc
avformat_free_context(pFormatCtx); 
```

无论如何，请检查文档并查看[本教程](http://www.inb.uni-luebeck.de/~boehme/using_libavcodec.html)。

# android - BroadcastReceiver java文件的位置应该是什么？

> ID：11626410
> 
> 赞同：2
> 
> 时间：2012-07-24T07:49:52.770
> 
> 标签：android, broadcastreceiver

这是一个非常愚蠢的问题。
我正在尝试创建一个需要在每次启动手机时自动启动的应用程序。我用谷歌搜索了太多的stackoverflow，并开始明白我需要做这两件事

首先是必须放入 AndroidMainfest.xml 的这段代码

```
<receiver android:name=".receivers.onRestartReciever">
        <intent-filter>
            <action android:name="android.intent.action.PACKAGE_REPLACED" />
            <action android:name="android.intent.action.PACKAGE_RESTARTED" />
            <data android:scheme="package" android:path="my.Package.Path" />
        </intent-filter> 
```

其次是我需要用这样的代码制作一个 .java 文件

```
public class BootReceiver extends BroadcastReceiver
{
  /* 
   * after reboot widget appears to stop working and becomes unresponsive to clicks
   * this broadcast receiver will create new alarm and refresh pending intents
   */

  @Override
  public void onReceive(Context context, Intent intent)
  {
    /* do your stuff here, mostly just copy&paste from other places */
  }
} 
```

问题是我无法弥补这个 java 文件的放置位置。我的意思是哪个文件夹？我是否必须将它包含在某个地方才能使用它？我真的很抱歉要求直接回答，但我对此一无所知，并且从过去三天开始我就一直被这个问题困扰。请帮帮我。

与同一主题相关的教程也将非常有帮助（我找不到任何）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:52:46.070

**您项目的src**文件夹！

下面是一些使用 BR 的示例

[广播接收器教程](http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html)

[教程 2](http://androidword.blogspot.in/2010/10/how-to-use-broadcast-receiver.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:55:08.550

将您的 BootReceiver 放在您的源代码（src 文件夹中的新 Java 类）中任何您想要的地方。当设备重新启动时，您的 onReceive 方法将被调用。然后你可以开始活动/服务等......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T07:59:12.450

如果该名称正是您使用的名称，则将您的 java 类放在 src 包中名为 recievers 的文件夹中。在接收者文件夹中，添加名为 onRestartReciever 的 .java 文件...将您的 java 文件名从 BootReciever 更改为 onRestartReciever ..

# jquery - jQuery .attr() 方法返回未定义

> ID：11626411
> 
> 赞同：4
> 
> 时间：2012-07-24T07:49:55.500
> 
> 标签：jquery, undefined, attr

```
<ul id="footernav">
    <li><a href="javascript:void(0);" id="chat" data-icon="custom" data-transition="none">Tools</a></li>
    <li><a href="javascript:void(0);" id="email" data-icon="custom" data-transition="none">My Ride</a></li>
    <li><a href="javascript:void(0);" id="login" data-icon="custom" data-transition="none">News</a></li>
    <li><a href="javascript:void(0);" id="skull" data-icon="custom" data-transition="none">Cool</a></li>
    <li><a href="javascript:void(0);" id="coffee" data-icon="custom" data-transition="none" class"ui-btn-active ui-state-persist">Contact</a></li>
</ul> 
```

现在我正在使用这个 jQuery 函数来获取我点击`id`的那个：`li`

```
$('#footernav li').click(function(){                     
    alert($(this).attr('id'));                    
}); 
```

但它返回`undefined`。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-24T07:51:50.210

那是因为你`li`没有身份证

请改用此选择器：`$('#footernav li a')`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-24T07:51:42.170

因为您在 li 元素上而不是在 a 标签上。

你应该听

```
$('#footernav li a').click(function(){
     alert($(this).attr('id'));

}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-24T07:55:11.573

这将帮助你

```
$('#footernav li').click(function(){                     
     alert($('a',this).attr('id'));                    
}); 
```

# c# - 在第一个 ListView 中选择一行后，如何使第二个 ListView 显示（可见）？

> ID：11626416
> 
> 赞同：1
> 
> 时间：2012-07-24T07:50:12.467
> 
> 标签：c#, asp.net, listview, sql-server-2008-r2

我是一名新的 ASP.NET 开发人员，我必须创建一个测验引擎应用程序。我正在使用三个 LiveView 控件来显示： 1\. 测验信息 2\. 问题信息（基于第一个 ListView 上选择的测验） 3\. 答案信息（基于第二个 ListView 上选择的问题）

我有以下数据库设计：

```
QuizContent Table: ID, QuizID, QuestionID, AnswerID, isCorrect
Quiz Table: QuizID, Title, Description, isSent
Question Table: QuestionID, Question, QuestionOrder, AnswerExplanation
Answers Table: AnswerID, Answer 
```

**我现在想要的是：**当用户（管理员）来到测验引擎页面时，他应该只看到第一个 ListView，主要是关于测验信息。当他选择其中一个测验时，第二个 ListView 将显示该所选测验的问题信息。当他选择其中一个问题时，第三个 ListView 将显示该问题的答案信息。

**那么该怎么做呢？**

我知道我不应该发布太多的代码或信息，但我必须这样做才能明确：

```
<div align="center">
            <asp:ListView ID="ListView1" runat="server" DataKeyNames="QuizID" 
                DataSourceID="SqlDataSource1" InsertItemPosition="LastItem" >

                <EditItemTemplate>
                    <tr style="">
                        <td>
                            <asp:ImageButton ID="UpdateButton" ImageUrl="Images/icons/update24.png" ToolTip="Update"  runat="server" CommandName="Update" />

                            <asp:ImageButton ID="CancelButton" ImageUrl="Images/icons/cancel324.png" ToolTip="Cancel" runat="server" CommandName="Cancel" />
                        </td>
                        <td>
                            <asp:TextBox ID="TitleTextBox" runat="server" Text='<%# Bind("Title") %>' />
                        </td>
                        <td>
                            <asp:TextBox ID="DescriptionTextBox" runat="server" 
                                Text='<%# Bind("Description") %>' />
                        </td>
                    </tr>
                </EditItemTemplate>
                <EmptyDataTemplate>
                    <table id="Table1" runat="server" style="">
                        <tr>
                            <td>
                                No data was returned.</td>
                        </tr>
                    </table>
                </EmptyDataTemplate>
                <InsertItemTemplate>
                    <tr style="">
                        <td>
                            <asp:ImageButton ID="InsertButton" ImageUrl="Images/icons/add24.png" ToolTip="Add"  runat="server" CommandName="Insert" />

                            <asp:ImageButton ID="CancelButton" ImageUrl="Images/icons/clear24.png" ToolTip="Cancel"  runat="server" CommandName="Cancel" />
                        </td>

                        <%--<td>
                            &nbsp;</td>--%>
                        <td>
                            <asp:TextBox ID="TitleTextBox" runat="server" Text='<%# Bind("Title") %>' />
                        </td>
                        <td>
                            <asp:TextBox ID="DescriptionTextBox" runat="server" 
                                Text='<%# Bind("Description") %>' />
                        </td>
                    </tr>
                </InsertItemTemplate>
                <ItemTemplate>
                    <tr style="">
                        <td>
                            <asp:ImageButton ID="DeleteButton" ImageUrl="Images/icons/delete24.png" ToolTip="Delete"  runat="server" CommandName="Delete" />

                            <asp:ImageButton ID="EditButton" ImageUrl="Images/icons/edit24.png" ToolTip="Edit"  runat="server" CommandName="Edit" />

                            <asp:ImageButton ID="SelectButton" ImageUrl="Images/icons/select.png" ToolTip="Select"  runat="server" CommandName="Select" />
                            <%--<asp:Button ID="SelectButton" runat="server" CommandName="Select" Text="Select" />--%>
                        </td>
                        <%--<td>
                            <asp:Label ID="QuizIDLabel" runat="server" 
                                Text='<%# Eval("QuizID") %>' />
                        </td>--%>
                        <td>
                            <asp:Label ID="TitleLabel" runat="server" Text='<%# Eval("Title") %>' />
                        </td>
                        <td>
                            <asp:Label ID="DescriptionLabel" runat="server" 
                                Text='<%# Eval("Description") %>' />
                        </td>
                    </tr>
                </ItemTemplate>
                <LayoutTemplate>
                    <div ><table id="thetable" width="97%" cellpadding="0px" cellspacing="0px" style="margin:0px 0px 0px 0px; border:2px solid #003366; font-size:13px; font-weight:bold;">
                        <thead>
                            <tr style="background-color:#C6D7B5;">
                                <th style="border-bottom:2px solid #003366; ">...</th>
                                <th style="border-bottom:2px solid #003366; ">Title</th>
                                <th style="border-bottom:2px solid #003366; ">Description</th>
                            </tr>
                       </thead>
                       <tbody><tr id="itemPlaceholder" runat="server"></tr></tbody>
                    </table></div>
                </LayoutTemplate>
                <SelectedItemTemplate>
                    <tr style="">
                        <td>
                            <asp:ImageButton ID="DeleteButton" ImageUrl="Images/icons/delete24.png" ToolTip="Delete" runat="server" CommandName="Delete" />

                            <asp:ImageButton ID="EditButton" ImageUrl="Images/icons/edit24.png" ToolTip="Edit" runat="server" CommandName="Edit" />
                        </td>
                        <%--<td>
                            <asp:Label ID="QuizIDLabel" runat="server" 
                                Text='<%# Eval("QuizID") %>' />
                        </td>--%>
                        <td>
                            <asp:Label ID="TitleLabel" runat="server" Text='<%# Eval("Title") %>' />
                        </td>
                        <td>
                            <asp:Label ID="DescriptionLabel" runat="server" 
                                Text='<%# Eval("Description") %>' />
                        </td>
                    </tr>
                </SelectedItemTemplate>
            </asp:ListView>
            <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
                ConnectionString="<%$ ConnectionStrings:QuizSysDBConnectionString %>" 

                SelectCommand="SELECT * FROM [Quiz]" 
                DeleteCommand="DELETE FROM [Quiz] WHERE [QuizID] = @QuizID" 
                InsertCommand="INSERT INTO [Quiz] ([Title], [Description]) VALUES (@Title, @Description)" 

                UpdateCommand="UPDATE [Quiz] SET [Title] = @Title, [Description] = @Description WHERE [QuizID] = @QuizID">
                <DeleteParameters>
                    <asp:Parameter Name="QuizID" Type="Int32" />
                </DeleteParameters>
                <InsertParameters>
                    <asp:Parameter Name="Title" Type="String" />
                    <asp:Parameter Name="Description" Type="String" />
                </InsertParameters>
                <UpdateParameters>
                    <asp:Parameter Name="Title" Type="String" />
                    <asp:Parameter Name="Description" Type="String" />
                    <asp:Parameter Name="QuizID" Type="Int32" />
                </UpdateParameters>
            </asp:SqlDataSource>
    </div>

    <br /><br />

    <%--Second ListView that will contain the content of the quiz--%>
    <div align="center">
        <asp:ListView ID="ListView2" runat="server" DataSourceID="SqlDataSource2" 
            DataKeyNames="QuestionID" InsertItemPosition="LastItem">

            <EditItemTemplate>

                <tr style="">
                    <td>
                        <asp:ImageButton ID="UpdateButton" ImageUrl="Images/icons/update24.png" ToolTip="Update" runat="server" CommandName="Update" />

                        <asp:ImageButton ID="CancelButton" ImageUrl="Images/icons/cancel324.png" ToolTip="Cancel" runat="server" CommandName="Cancel" />
                    </td>
                    <%--<td>
                        <asp:Label ID="QuestionIDLabel1" runat="server" 
                            Text='<%# Eval("QuestionID") %>' />
                    </td>--%>
                    <td>
                        <asp:TextBox ID="QuestionTextBox" runat="server" 
                            Text='<%# Bind("Question") %>' />
                    </td>
                    <td>
                        <asp:TextBox ID="QuestionOrderTextBox" runat="server" 
                            Text='<%# Bind("QuestionOrder") %>' />
                    </td>
                    <td>
                        <asp:TextBox ID="AnswerExplanationTextBox" runat="server" 
                            Text='<%# Bind("AnswerExplanation") %>' />
                    </td>
                </tr>
            </EditItemTemplate>

            <EmptyDataTemplate>
                <table runat="server" 
                    style="">
                    <tr>
                        <td>
                            No data was returned.</td>
                    </tr>
                </table>
            </EmptyDataTemplate>

            <InsertItemTemplate>
                <tr style="">
                    <td>
                        <asp:ImageButton ID="InsertButton" ImageUrl="Images/icons/add24.png" ToolTip="Add" runat="server" CommandName="Insert" />

                        <asp:ImageButton ID="CancelButton" ImageUrl="Images/icons/clear24.png" ToolTip="Cancel"  runat="server" CommandName="Cancel" />
                    </td>
                    <%--<td>
                        &nbsp;</td>--%>
                    <td>
                        <asp:TextBox ID="QuestionTextBox" runat="server" 
                            Text='<%# Bind("Question") %>' />
                    </td>
                    <td>
                        <asp:TextBox ID="QuestionOrderTextBox" runat="server" 
                            Text='<%# Bind("QuestionOrder") %>'/>
                    </td>
                    <td>
                        <asp:TextBox ID="AnswerExplanationTextBox" runat="server" 
                            Text='<%# Bind("AnswerExplanation") %>' />
                    </td>
                </tr>

            </InsertItemTemplate>

            <ItemTemplate>
                <tr style="">
                    <td>
                        <asp:ImageButton ID="DeleteButton" ImageUrl="Images/icons/delete24.png" ToolTip="delete" runat="server" CommandName="Delete" />

                        <asp:ImageButton ID="EditButton" ImageUrl="Images/icons/edit24.png" ToolTip="Edit" runat="server" CommandName="Edit" />

                        <asp:ImageButton ID="SelectButton" ImageUrl="Images/icons/select.png" ToolTip="Select" runat="server" CommandName="Select" />
                            <%--<asp:Button ID="SelectButton" runat="server" CommandName="Select" Text="Select" />--%>
                    </td>
                    <td>
                        <asp:Label ID="QuestionLabel" runat="server" Text='<%# Eval("Question") %>' />
                    </td>
                    <td>
                        <asp:Label ID="QuestionOrderLabel" runat="server" 
                            Text='<%# Eval("QuestionOrder") %>' />
                    </td>
                    <td>
                        <asp:Label ID="AnswerExplanationLabel" runat="server" 
                            Text='<%# Eval("AnswerExplanation") %>' />
                    </td>
                </tr>
            </ItemTemplate>

            <LayoutTemplate>
                <div ><table id="thetable" width="97%" cellpadding="0px" cellspacing="0px" style="margin:0px 0px 0px 0px; border:2px solid #003366; font-size:13px; font-weight:bold;">
                        <thead>
                            <tr style="background-color:#C6D7B5;">
                                <th style="border-bottom:2px solid #003366; ">...</th>
                                <th style="border-bottom:2px solid #003366; ">Question</th>
                                <th style="border-bottom:2px solid #003366; ">Question Order</th>
                                <th style="border-bottom:2px solid #003366; ">Answer Explanation</th>
                            </tr>
                       </thead>
                       <tbody><tr id="itemPlaceholder" runat="server"></tr></tbody>
                    </table></div>     
            </LayoutTemplate>
            <SelectedItemTemplate>
                <tr style="">
                    <td>
                        <asp:ImageButton ID="DeleteButton" ImageUrl="Images/icons/delete24.png" ToolTip="Delete" runat="server" CommandName="Delete" />

                        <asp:ImageButton ID="EditButton" ImageUrl="Images/icons/edit24.png" ToolTip="Edit" runat="server" CommandName="Edit" />
                    </td>
                    <td>
                        <asp:Label ID="QuestionLabel" runat="server" Text='<%# Eval("Question") %>' />
                    </td>
                    <td>
                        <asp:Label ID="QuestionOrderLabel" runat="server" 
                            Text='<%# Eval("QuestionOrder") %>' />
                    </td>
                    <td>
                        <asp:Label ID="AnswerExplanationLabel" runat="server" 
                            Text='<%# Eval("AnswerExplanation") %>' />
                    </td>
                </tr>
            </SelectedItemTemplate>
        </asp:ListView>
        </div>

        <asp:SqlDataSource ID="SqlDataSource2" runat="server" 
            ConnectionString="<%$ ConnectionStrings:QuizSysDBConnectionString %>" 
            SelectCommand="SELECT [Question].* FROM [Question] INNER JOIN [QuizContent] ON [QuizContent].[QuizID] = @QuizID"

            DeleteCommand="DELETE FROM [Question] WHERE [QuestionID] = @QuestionID" 
            InsertCommand="INSERT INTO [Question] ([Question], [QuestionOrder], [AnswerExplanation]) VALUES (@Question, @QuestionOrder, @AnswerExplanation)" 

            UpdateCommand="UPDATE [Question] SET [Question] = @Question, [QuestionOrder] = @QuestionOrder, [AnswerExplanation] = @AnswerExplanation WHERE [QuestionID] = @QuestionID">

                <DeleteParameters>
                    <asp:Parameter Name="QuestionID" Type="Int32" />
                </DeleteParameters>
                <InsertParameters>
                    <asp:Parameter Name="Question" Type="String" />
                    <asp:Parameter Name="QuestionOrder" Type="Int32" />
                    <asp:Parameter Name="AnswerExplanation" Type="String" />
                    <asp:ControlParameter ControlID="ListView1" Name="QuizID" PropertyName="SelectedValue" Type="Int32" />
                </InsertParameters>
                <UpdateParameters>
                    <asp:Parameter Name="Question" Type="String" />
                    <asp:Parameter Name="QuestionOrder" Type="Int32" />
                    <asp:Parameter Name="AnswerExplanation" Type="String" />
                </UpdateParameters>

            <SelectParameters>
                <asp:ControlParameter ControlID="ListView1" Name="QuizID" 
                    PropertyName="SelectedValue" Type="Int32" />
            </SelectParameters>
        </asp:SqlDataSource>

        <br /><br />

    <%--Third ListView that will contain the content of the quiz--%>
    <div align="center">
        <asp:ListView ID="ListView3" runat="server" DataSourceID="SqlDataSource3" 
            DataKeyNames="AnswerID" InsertItemPosition="LastItem">

            <EditItemTemplate>

                <tr style="">
                    <td>
                        <asp:ImageButton ID="UpdateButton" ImageUrl="Images/icons/update24.png" ToolTip="Update" runat="server" CommandName="Update" />

                        <asp:ImageButton ID="CancelButton" ImageUrl="Images/icons/cancel324.png" ToolTip="Cancel" runat="server" CommandName="Cancel" />
                    </td>
                    <%--<td>
                        <asp:Label ID="AnswerIDLabel1" runat="server" Text='<%# Eval("AnswerID") %>' />
                    </td>--%>
                    <td>
                        <asp:TextBox ID="AnswerTextBox" runat="server" 
                            Text='<%# Bind("Answer") %>' />
                    </td>
                </tr>
            </EditItemTemplate>

            <EmptyDataTemplate>
                <table runat="server" 
                    style="">
                    <tr>
                        <td>
                            No data was returned.</td>
                    </tr>
                </table>
            </EmptyDataTemplate>

            <InsertItemTemplate>
                <tr style="">
                    <td>
                        <asp:ImageButton ID="InsertButton" ImageUrl="Images/icons/add24.png" ToolTip="Add" runat="server" CommandName="Insert" />

                        <asp:ImageButton ID="CancelButton" ImageUrl="Images/icons/clear24.png" ToolTip="Cancel" runat="server" CommandName="Cancel" />
                    </td>
                    <%--<td>
                        &nbsp;</td>--%>
                    <td>
                        <asp:TextBox ID="AnswerTextBox" runat="server" 
                            Text='<%# Bind("Answer") %>'/>
                    </td>
                </tr>

            </InsertItemTemplate>

            <ItemTemplate>
                <tr style="">
                    <td>
                        <asp:ImageButton ID="DeleteButton" ImageUrl="Images/icons/delete24.png" ToolTip="Delete" runat="server" CommandName="Delete" />

                        <asp:ImageButton ID="EditButton" ImageUrl="Images/icons/edit24.png" ToolTip="Edit" runat="server" CommandName="Edit" />
                    </td>
                    <%--<td>
                        <asp:Label ID="AnswerIDLabel" runat="server" Text='<%# Eval("AnswerID") %>' />
                    </td>--%>
                    <td>
                        <asp:Label ID="AnswerLabel" runat="server" Text='<%# Eval("Answer") %>' />
                    </td>
                </tr>
            </ItemTemplate>

            <LayoutTemplate>
                <div ><table id="thetable" width="97%" cellpadding="0px" cellspacing="0px" style="margin:0px 0px 0px 0px; border:2px solid #003366; font-size:13px; font-weight:bold;">
                    <thead>
                        <tr style="background-color:#C6D7B5;">
                            <th style="border-bottom:2px solid #003366; ">...</th>
                            <th style="border-bottom:2px solid #003366; ">Answer</th>
                        </tr>
                    </thead>
                    <tbody><tr id="itemPlaceholder" runat="server"></tr></tbody>
                </table></div>
            </LayoutTemplate>
            <SelectedItemTemplate>
                <tr style="">
                    <td>
                        <asp:ImageButton ID="DeleteButton" ImageUrl="Images/icons/delete24.png" ToolTip="Delete" runat="server" CommandName="Delete" />

                        <asp:ImageButton ID="EditButton" ImageUrl="Images/icons/edit24.png" ToolTip="Edit" runat="server" CommandName="Edit" />
                    </td>
                    <td>
                        <asp:Label ID="AnswerLabel" runat="server" 
                            Text='<%# Eval("Answer") %>' />
                    </td>
                </tr>
            </SelectedItemTemplate>
        </asp:ListView>
        </div>

        <asp:SqlDataSource ID="SqlDataSource3" runat="server" 
            ConnectionString="<%$ ConnectionStrings:QuizSysDBConnectionString %>" 
            SelectCommand="SELECT [Answers].* FROM [Answers] INNER JOIN [QuizContent] ON [QuizContent].QuestionID = @QuestionID"

            DeleteCommand="DELETE FROM [Answers] WHERE [AnswerID] = @AnswerID" 
            InsertCommand="INSERT INTO [Answers] ([Answer]) VALUES (@Answer)" 

            UpdateCommand="UPDATE [Answers] SET [Answer] = @Answer WHERE [AnswerID] = @AnswerID">
                <DeleteParameters>
                    <asp:Parameter Name="AnswerID" Type="Int32" />
                </DeleteParameters>
                <InsertParameters>
                    <asp:Parameter Name="Answer" Type="String" />
                    <asp:ControlParameter ControlID="ListView2" Name="QuestionID" PropertyName="SelectedValue" Type="Int32" />
                </InsertParameters>
                <UpdateParameters>
                    <asp:Parameter Name="Answer" Type="String" />
                </UpdateParameters>

            <SelectParameters>
                <asp:ControlParameter ControlID="ListView2" Name="QuestionID" 
                    PropertyName="SelectedValue" Type="Int32" />
            </SelectParameters>
        </asp:SqlDataSource> 
```

**注意：** 我没有任何代码隐藏。问题再次如下：当我运行代码时，我会看到三个 ListView 控件。它应该只显示其中之一。当用户选择其中一行时，将显示第二个 ListView，以此类推第三个 ListView。

**更新：**

我尝试了以下方式，但它对我不起作用：

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            ListView1.SelectedIndex = -1;
        }
    }
    protected void ListView1_SelectedIndexChanged(object sender, EventArgs e)
    {
        ListView2.DataBind();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:34:52.283

像这样添加 DataKey

```
 <asp:ListView ID="ListView1" runat="server" DataKeyNames="QuizID"  
    DataSourceID="SqlDataSource1" InsertItemPosition="LastItem" DataKeyNames="ID" > 
```

并确保在 SQLDataSource 中获取 ID

然后在 Itemcommand 中试试这个：

```
ListViewDataItem dataItem = (ListViewDataItem)e.Item;
 int ID = Convert.toInt32(ListView1.DataKeys[dataItem.DisplayIndex].Values[0]); 
```

这是您的 ID 现在您可以使第二个列表视图可见并使用此 ID 填充第二个列表视图

希望我有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:09:43.907

试试这个：首先将 ID 放入第一个列表视图中的数据键中，然后在项目命令中从数据键中获取所选行的 ID，然后您可以使第二个列表视图可见并使用此 ID 填充它，您可以这样做最后一个列表视图

不要忘记使第二个和最后一个列表视图可见为假，这样除非他在第一个列表视图中首先选择行，否则不会看到它们

# weka - Weka.classifiers.meta.vote 中的多数投票算法

> ID：11626417
> 
> 赞同：6
> 
> 时间：2012-07-24T07:50:17.823
> 
> 标签：weka

Weka 中使用的多数投票算法是什么。我试图弄清楚它的代码，但无法理解。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-24T09:25:50.260

在 Weka 中，您可以选择多个分类器用于`Weka.classifiers.meta.vote`. 如果您选择`Majority Voting`as `combinationRule`（仅适用于`nominal`类），则这些分类器中的每一个都将预测测试样本的名义类标签。然后将选择预测最多的标签作为`vote`分类器的输出。

例如。您选择要使用的以下分类器：`trees.J48`和`bayes.NaiveBayes`预测`functions.LibSVM`天气，可以标记为`bad`，`normal`或`good`。给定一个新的测试样本，这些是他们的预测：

```
J48        - bad
NaiveBayes - good
LibSVM     - good 
```

每个可能的标签的*投票*结果如下：

```
bad    - 1
normal - 0
good   - 2 
```

所以 Weka 的`vote`分类器将选择`good`作为测试样本的标签，因为它在所有三个分类器中拥有最多的选票。

**- 编辑 -**

Weka类`distributionForInstanceMajorityVoting`的[源码](https://svn.scms.waikato.ac.nz/svn/weka/trunk/weka/src/main/java/weka/classifiers/meta/Vote.java)中的函数`Vote`向你展示了多数投票是如何实现的。我添加了下面的功能。以下是它的作用的描述：

代码的工作原理与我上面解释的差不多。测试实例的所有名义类都加载到`votes`. 每个分类器对实例进行分类，概率最高的标签获得*投票*。如果多个标签具有相同的概率，则所有这些标签都会获得投票。一旦所有分类器都投了票，投票最多的标签将被选为测试实例*的*标签。如果多个标签的票数相同，则将随机选择其中一个标签。

```
protected double[] distributionForInstanceMajorityVoting(Instance instance) throws Exception {

  double[] probs = new double[instance.classAttribute().numValues()];
  double[] votes = new double[probs.length];

  for (int i = 0; i < m_Classifiers.length; i++) {
    probs = getClassifier(i).distributionForInstance(instance);
    int maxIndex = 0;
    for(int j = 0; j<probs.length; j++) {
      if(probs[j] > probs[maxIndex])
        maxIndex = j;
    }

    // Consider the cases when multiple classes happen to have the same probability
    for (int j=0; j<probs.length; j++) {
      if (probs[j] == probs[maxIndex])
        votes[j]++;
    }
  }

  for (int i = 0; i < m_preBuiltClassifiers.size(); i++) {
    probs = m_preBuiltClassifiers.get(i).distributionForInstance(instance);
    int maxIndex = 0;

    for(int j = 0; j<probs.length; j++) {
      if(probs[j] > probs[maxIndex])
        maxIndex = j;
    }

    // Consider the cases when multiple classes happen to have the same probability
    for (int j=0; j<probs.length; j++) {
      if (probs[j] == probs[maxIndex])
        votes[j]++;
    }
  }

  int tmpMajorityIndex = 0;
  for (int k = 1; k < votes.length; k++) {
    if (votes[k] > votes[tmpMajorityIndex])
      tmpMajorityIndex = k;
  }

  // Consider the cases when multiple classes receive the same amount of votes
  Vector<Integer> majorityIndexes = new Vector<Integer>();
  for (int k = 0; k < votes.length; k++) {
    if (votes[k] == votes[tmpMajorityIndex])
      majorityIndexes.add(k);
   }

  // Resolve the ties according to a uniform random distribution
  int majorityIndex = majorityIndexes.get(m_Random.nextInt(majorityIndexes.size()));

  //set probs to 0
  probs = new double[probs.length];

  probs[majorityIndex] = 1; //the class that have been voted the most receives 1

  return probs;
} 
```

# cocos2d-iphone - 任何 CCLabelBMFont 后面的黑色背景

> ID：11626418
> 
> 赞同：1
> 
> 时间：2012-07-24T07:50:31.240
> 
> 标签：cocos2d-iphone, cocos2d-x

我正在尝试使用 CCLabelBMFont 类呈现 fnt 字体。fnt 具有关联的 PNG，具有透明背景。

问题是当我尝试渲染任何文本时，它总是包含黑色背景，这种黑色不在 PNG 中，我找不到删除它的方法。

任何的想法？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:05:06.327

那是我确实在前一行代码中设置了默认的 alpha 像素格式...

```
CCTexture2D::setDefaultAlphaPixelFormat(<#CCTexture2DPixelFormat format#>); 
```

# sql-server - 存储过程，并从两个几乎相同的视图中选择

> ID：11626419
> 
> 赞同：2
> 
> 时间：2012-07-24T07:50:31.787
> 
> 标签：sql-server, stored-procedures, view

我有两个视图返回相同的列，但不同的行。

我正在创建一个使用这些视图的存储过程。存储过程很大，并且跨列搜索匹配的行。

现在，我的愿望是：如果我收到一个值为 0 的位参数，那么我应该从一个视图中获取信息，如果参数为 1，那么我应该从另一个视图中获取信息。

我知道动态 SQL 是个坏主意，而且我正在使用的存储过程已经相当复杂。将其重新创建为动态不是一种选择。

我还读到了不可能做到这一点：

```
select * from @table 
```

因为表名应该是静态的，而不是传递给 ex。通过代码存储过程。

我想要完成的是这样的：

```
SELECT TOP(@top) subtaskid,activityid FROM 
(CASE WHEN @allProjects=1 THEN view_project_all ELSE view_project_mine) v 
```

但是我收到错误消息说“关键字'CASE'附近的语法不正确。我意识到这个问题与动态sql密切相关，并且stackoverflow中的变量views\tables问题，但是我认为因为我的两个表实际上是在存储的程序这比黑客更具功能性......

问题是这样的：有没有办法设置静态变量，所以这个选择可以根据给定的参数提出不同的意见？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T07:54:31.210

简单的方法：

```
IF @allProjects = 1
BEGIN
    SELECT TOP(@top) subtaskid,activityid FROM view_project_all v;
END
ELSE
    SELECT TOP(@top) subtaskid,activityid FROM view_project_mine v;
BEGIN
END 
```

如果您愿意，您可以创建一个合并这些表的视图，然后针对该视图执行查询：

```
SELECT subtaskid, activityid, 1 as allProjects FROM view_project_all
UNION ALL
SELECT subtaskid, activityid, 0 as allProjects FROM view_project_mine 
```

查询它：

```
SELECT TOP(@top) subtaskid,activityid FROM view_project_mine_all_union v WHERE allProjects = @allProjects; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T07:55:13.010

你可以使用 if

```
 if @allProjects = 1
       SELECT subtaskid,activityid FROM view_all_projects
 else
       SELECT subtaskid,activityid FROM view_project_mine 
```

如果这是对您的问题的严重过度简化，那么您可以将结果放入临时表中。

或者也许您可以优化您的项目视图，使其包含项目所有者并尝试

```
 SELECT subtaskid, activityId FROM view_projects
 WHERE (projectowner = USER) OR (@allprojects=1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:05:47.773

你可以放一个简单的 if else 循环

```
If @allProjects = 1
begin 
SELECT TOP(@top) subtaskid,activityid from view_project_all
end
else
begin 
SELECT TOP(@top) subtaskid,activityid from view_project_mine
end 
```

# iphone - 如何将事件添加到 Tapku 日历？

> ID：11626422
> 
> 赞同：1
> 
> 时间：2012-07-24T07:50:37.553
> 
> 标签：iphone, ios, events, calendar, tapku

我已将 Tapku 日历附加到我的项目中。它工作得很好。但是我必须将事件从 RSS 或 JSON 数据添加到我的日历中。我在 Tabku Lib 中没有看到任何关于这个问题的方法。

如何将事件添加到 Tapku 日历？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T08:03:50.033

我曾与 TapKu 和[Kal](https://github.com/klazuka/Kal)合作过。老实说，我建议使用 Kal 而不是 TapKu，因为[Kal](https://github.com/klazuka/Kal)提供了旨在处理从 Web 加载数据的回调方法。我不能对 TapKu 说同样的话。

TapKu 文档在[这里](http://tapku.com/documentation/Protocols/TKCalendarMonthViewDataSource.html)，但正如您所说，没有特定的方法来添加数据。使用 TapKu，您基本上可以指定在日历上显示标记的日期，并处理所选日期的更改。

[您可以在 GitHub 上](https://github.com/klazuka/Kal/wiki/_pages)的 Wiki 上找到有关 Kal 的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T00:07:11.270

您可以使用此委托方法：

```
-(NSArray *)calendarMonthView:(TKCalendarMonthView *)monthView marksFromDate:(NSDate *)startDate toDate:(NSDate *)lastDate
{
    // adds marks to the individual dates
    // return an array containing boolean values (YES/NO)
    // whether to mark the date[index];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T22:55:47.230

我目前将所有当前事件添加到 KAL 日历的数据源中没有问题，并且更改标记也非常简单。虽然它可能很简单，但必须对您应该已导入项目/框架的 KAL.bundle 文件进行一些更改。它包含用于创建 KAL 视图的所有照片。

无论如何，你会想要去 KAL 的目录和 KalTileView.m 下，你会在那里找到

```
} else { 
textColor = ........
shadowColor = .......
markerImage = [UIImage imageNamed:@"Kal.bundle/kal_marker.png"];
} 
```

上面的代码在 drawRect 方法中。

修改标记很好....但是我发现导入几个标记有些困难，所以我可以从标记中随机选择显示....使应用程序更加丰富多彩：P。但是不，没有用。

不过，如果您愿意，您可以将标记更改为另一种颜色。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-06-21T17:29:23.100

[http://developinginthedark.com/posts/iphone-tapku-calendar-markers](http://developinginthedark.com/posts/iphone-tapku-calendar-markers)

到本站下载demo代码，还有加标记方法的详细说明

# c++ - Vector & Stack Overflow - Part Deux

> ID：11626424
> 
> 赞同：0
> 
> 时间：2012-07-24T07:50:46.347
> 
> 标签：c++, animation, vector

这与我之前的问题有关； [向量和堆栈溢出](https://stackoverflow.com/questions/11597980/vector-stack-overflow)

但希望能解释新情况（和我的新问题）。所以昨天我以为我在这个堆栈溢出异常中有一个突破，我以为我已经解决了。虽然那时我很累，并且注释掉了很多代码。

今天早上，重新开始我的游戏，我首先让一切恢复运行。就在大约半小时前，我绝望地看到了我以为我昨天已经克服的血腥错误消息：/。

唉，我回到了第一方，但继续回答我之前的问题，我再次试图找到我认为是敌人动画的根本原因。下面是我的敌人和动画类的头文件：

动画 - [http://pastebin.com/uKQB1RVq](http://pastebin.com/uKQB1RVq)

敌人 - [http://pastebin.com/pktA1vXi](http://pastebin.com/pktA1vXi)

正如您在我的敌人课程中看到的那样，除了动画之外，没有什么值得谈论的，我觉得会导致这个异常。（唯一的另一件事是我的 Timer 类，它只是一些 int 和 bool，同样没有什么我可以认为是内存广泛的。）

所以我的问题是这样的；

1.  我怎么能对此百分百肯定呢？我的 IDE (Visual C++ 2010) 中有没有办法查看正在使用多少堆栈内存？
2.  从 q 开始。1，这个问题的解决方案是什么，例如，即使我不能 100% 确定动画是异常的实际原因，但将动画注释掉并说创建动画矢量编译没有问题。那是要走的路吗？

*我已经设置了测试场景，我知道如果我将 Vector2 和 RectArray 的数组减少到 15 而不是 20 则使用普通的旧 4 动画调用（*只是说这些是简单的结构，包含普通旧 x 的整数& y，然后对于 x、y、宽度和高度*）游戏编译得很好（这很可能是我倾向于 Animation 类的主要原因），如果我可以测量它有多少堆栈内存正在使用，然后将其与创建动画矢量数组所使用的进行比较，那么我希望能够很好地判断这是否是更重要的真正问题，或者它是否实际上是其他问题。

编辑：所以进一步研究我的溢出，我正在研究我的游戏的反汇编信息。堆栈溢出特定指向发生溢出的特定地址； ***0xC0000005***。

搜索那个地址，我看到我来到了这个视图； ![在此处输入图像描述](../Images/737627cb2bc52a0867b2b2c572a8a799.png)

我真的不知道如何处理这些地址中的内容，当我将鼠标悬停在它上面时，我得到的只是一个非常大的数字。我只能说有很多这样的“？？？” 但我想这些可能意味着什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:19:38.480

正如您在上一篇文章的回答中提到的，基本上有三种方法可以得到 Stack Overflow 错误。

1.  无限递归。这很容易确定 - 只需检查所有递归函数，它们是否正常工作并且在某些情况下总是会终止。

2.  在堆栈上分配巨大的变量。这实际上与第一个问题有关 - 递归堆栈溢出发生，因为堆栈上没有空间用于另一个递归调用的局部变量。这也很容易确定 - 您必须使用许多（或很少，但很大）静态分配的数组（在编译时已知大小）或结构来导致问题。

3.  缓冲区溢出。这是要追查的最糟糕的噩梦，因为实际问题可能在其原因发生很久之后才发生。

我建议尝试通过以下方式确定问题。

*   在问题仍然存在时，尽可能多地注释掉代码。如果幸运的话，您将注释掉实际上导致问题的地方。否则你将有更少的代码来分析。
*   使用 WinDbg（在平台 SDK 中提供）获取崩溃时的详细调用堆栈。您可以在系统注册表中添加以下条目，以强制操作系统将部分或全部进程内存转储收集到文件中，以便您可以尝试执行事后分析：

```
`Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps\YourAppName.exe]
"DumpFolder"=hex(2):63,00,3a,00,5c,00,44,00,75,00,6d,00,70,00,73,00,00,00
"DumpType"=dword:00000002
"DumpCount"=dword:0000000F` 
```

`每次应用程序崩溃时，此更改都会将完整转储到 ac:\dumps 文件夹。`

 ````
`Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps\YourAppName.exe]
"DumpFolder"=hex(2):63,00,3a,00,5c,00,44,00,75,00,6d,00,70,00,73,00,00,00
"DumpType"=dword:00000001
"DumpCount"=dword:000000FF` 
```

`每次应用程序崩溃时，此更改都会将小转储 (~40 Mb) 转储到 ac:\dumps 文件夹。`

 `*   使用 Application Verifier 工具来跟踪潜在的缓冲区溢出，这可能会损坏存储在堆栈中的返回地址。

*   为你的结构和类的一些重要领域添加警卫，即：

```
`const char * sentry1 = "0123456789";
void * vitalField;
const char * sentry2 = "0123456789";` 
```

`尤其是在类、结构和方法的开头和结尾处使用它们。使用调试模式确保优化器不会优化它们（因为未使用）。`

 `崩溃后，收集内存转储并尝试检查，如果你所有的守卫都保持不变（这可能很困难，但并非不可能）。

*   最后，您可以进行非常详细的代码审查，以确保不会发生缓冲区溢出。

* * *

**编辑：**

您可以通过以下方式使 WinDbg 转储测试更加自动化：

*   设置以下环境变量：

```
`_NT_SYMBOL_PATH=symsrv*symsrv.dll*c:\symbols*http://msdl.microsoft.com/download/symbols`
```

`它将被 WinDbg、Visual Studio 和 Process Explorer 使用`

 `*   在 WinDbg 目录中创建以下文件：

命令.txt

```
`.sympath+.
.reload
kb`
```

`*   将以下条目添加到您的注册表中（检查您的系统是 32 位还是 64 位，并在必要时进行更改）：`

 ````
`Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT.dmp]
@="Debugger.Dump"

[HKEY_CLASSES_ROOT\Debugger.Dump]

[HKEY_CLASSES_ROOT\Debugger.Dump\Shell]

[HKEY_CLASSES_ROOT\Debugger.Dump\Shell\Debug_Without_Remote]
@="WinDbg This Dump"` 

`[HKEY_CLASSES_ROOT\Debugger.Dump\Shell\Debug_Without_Remote\Command]
@="\"C:\Program Files\Debugging Tools for Windows (x64)\windbg\" -z \"%1\" -QY -c \"$<C:\Program Files\Debugging Tools for Windows (x64)\commands.txt\""` 
```

`祝你好运 ：）``````

# zend-framework - 添加资源参数以连接到数据库时出错

> ID：11626426
> 
> 赞同：0
> 
> 时间：2012-07-24T07:50:49.900
> 
> 标签：zend-framework, zend-server-ce

我将此添加到 application.ini 到部分生产中

```
resources.db.adapter           = "pdo_mysql"
resources.db.params.dbname     = "rzeki"
resources.db.params.host       = "localhost"
resources.db.params.username   = "root"
resources.db.params.password   = ""
resources.db.params.charset    = "utf8" 
```

但是当我运行应用程序时，我遇到了这个错误：

```
 Stack trace:
#0 C:\Program Files\Zend\ZendServer\share\ZendFramework\library\Zend\Config\Ini.php(296): Zend_Config_Ini->_processKey(Array, 'params.dbname', 'rzeki')
#1 C:\Program Files\Zend\ZendServer\share\ZendFramework\library\Zend\Config\Ini.php(296): Zend_Config_Ini->_processKey(Array, 'db.params.dbnam...', 'rzeki')
#2 C:\Program Files\Zend\ZendServer\share\ZendFramework\library\Zend\Config\Ini.php(261): Zend_Config_Ini->_processKey(Array, 'resources.db.pa...', 'rzeki')
#3 C:\Program Files\Zend\ZendServer\share\ZendFramework\library\Zend\Config\Ini.php(153): Zend_Config_Ini->_processSection(Array, 'production')
#4 C:\Program Files\Zend\ZendServer\share\ZendFramework\library\Zend\Application.php(386): Zend_Config_Ini->__construct('C:\Program File...', 'production') 
#5 C:\Program Files\Zend\ZendServer\share\ in C:\Program Files\Zend\ZendServer\share\ZendFramework\library\Zend\Config\Ini.php on line 294 
```

我正在使用 Netbeans + ZendServer CE

编辑：

当我在安装文件夹中安装 digitalous 时，主 index.php ：

> > 警告：include_once(Digitalus\Installer.php) [function.include-once]：无法打开流：C:\Program Files\Zend\ZendServer\share\ZendFramework\library\Zend\Loader.php 中没有这样的文件或目录在第 146 行
> 
> 警告：include_once() [function.include]: 未能打开 'Digitalus\Installer.php' 以包含 (include_path='.;./library;.;C:\Program Files\Zend\ZendServer\share\ZendFramework\library' ) 在第 146 行的 C:\Program Files\Zend\ZendServer\share\ZendFramework\library\Zend\Loader.php
> 
> 致命错误：第 19 行的 C:\Program Files\Zend\Apache2\htdocs\digitalus\install\install.php 中找不到类“Digitalus_Installer”

# extjs4.1 - extjs4 全局网络异常监听器

> ID：11626428
> 
> 赞同：3
> 
> 时间：2012-07-24T07:50:55.097
> 
> 标签：extjs4.1, extjs-mvc

我想写一个`listener`会监听所有网络请求错误的东西，像这样：

```
Ext.Ajax.on('requestexception', function(conn, response, options) {
    if (response.status === 555) {
        Ext.Msg.alert('test', 'test');
    }
}); 
```

上面的代码仅适用于通过的请求`Ext.Ajax.request()`，如何重写它以便它也适用于表单提交、url not found 错误等。

在服务器端，我有调度所有请求的 Spring MVC，如果有，则返回`error`的响应状态。`555`

```
form.submit({
     url: dispatcher.getUrl('savePlanRequest'),
     //headers: {'Content-Type':'multipart/form-data; accept-charset=utf-8'},
     scope: this,
     method: 'GET',
     params: {
         scan: scan_id,
         attachments: attachments_id,
         parcels: parcels_id
     },
     success: function(form, action) {
         this.fireEvent('plansaved', this);
         Ext.Msg.alert(i18n.getMsg('success'), i18n.getMsg('gsip.view.plans.NewPlanForm.success_info'))
     },
     failure: function(form, action) {
         console.log('failure');
         //Ext.Msg.alert(i18n.getMsg('failure'), action.result.msg);
     }
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:23:58.800

这应该有效：

```
Ext.override( Ext.form.action.Submit, { 
    handleResponse : function( response ) {

        var form = this.form,
            errorReader = form.errorReader,
            rs, errors, i, len, records;

        if (errorReader) {
             rs = errorReader.read(response);
             success = rs.success;
             // Do something if success is false
        }

        this.callParent ( arguments ); 
    }
}); 
```

查看[源代码](http://docs.sencha.com/ext-js/4-1/source/Submit.html#Ext-form-action-Submit)`handleResponse()`，了解我复制上述大部分代码的确切方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T16:01:36.833

恕我直言，您不需要覆盖任何内容。您可以在 Ext.Ajax 单例上放置一个侦听器，如下所述：

[覆盖 Ext.data.Connection - 最佳实践](https://stackoverflow.com/questions/9682249/override-ext-data-connection-best-practice)

另一种选择是使用 Ext.util.Observable.observe() 函数，如下所述：

[http://www.sencha.com/forum/showthread.php?172269-Global-connection-handler-for-500-404-403-response-codes](http://www.sencha.com/forum/showthread.php?172269-Global-connection-handler-for-500-404-403-response-codes)

```
Ext.util.Observable.observe(Ext.data.Connection);

Ext.data.Connection.on('requestexception', function(conn, response, options, eOpts) {
    //...handle it
}); 
```

# python - 我在 PySide 1.1.0 中找不到 QString

> ID：11626430
> 
> 赞同：14
> 
> 时间：2012-07-24T07:51:02.180
> 
> 标签：python, qt, pyside, qstring

我想使用 QString 和 QStringList，但是在 PySide 1.1.0 中，它们不在模块中，不在文档中。所以，我该怎么做才能使用它们。谢谢。不仅仅是 QString 和 QStringList，我找不到 QTableModel , QListModel 等等。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-24T07:52:03.467

您不需要 QString 或 QStringList：您可以在 C++/Qt 中需要的任何地方使用 Python 的本机类型。

有关这方面的更多详细信息，请参阅[PSEP 101](https://github.com/techtonik/pseps/blob/cf7430368098e1b9c87c2233dff8a00ef7059ad2/psep-0101.txt#L51)。

例如，

*   `QString`→ `str`（`unicode`在 Python 2 中）
*   `QVariant`→ 任何类型
*   `QByteArray`→`bytes`或`bytearray`

并且在 Qt中从来没有像和这样的类`QTableModel`。 您可能正在寻找and 。`QListModel`
[`QAbstractTableModel`](http://www.pyside.org/docs/pyside/PySide/QtCore/QAbstractTableModel.html)[`QAbstractListModel`](http://www.pyside.org/docs/pyside/PySide/QtCore/QAbstractListModel.html)

# c++ - 转换为短类型指针？

> ID：11626432
> 
> 赞同：-2
> 
> 时间：2012-07-24T07:51:06.490
> 
> 标签：c++, inline-assembly

我最近从内联汇编迁移到高级语言 (C++)，我想将结果从 a 设置`value^0x1A3C`为短类型指针 (WORD PTR)，但出现以下错误：

> int 类型的值不能用于初始化 short* 类型的实体

将 int 类型传递给 short* 时出现问题：

```
void PacketEncrypt(Packet* packet, int sizeofpacket)
{
    char* pointer;
    pointer = ((char*)packet+sizeofpacket) -2;
    short *pointer = packet->PacketSize^0x1A3C;
    packet->Type += 0x0FFF7;
} 
```

我希望编译器做什么：

```
0041585E   8B45 0C          MOV EAX,DWORD PTR SS:[EBP+C]
00415861   8B4D 08          MOV ECX,DWORD PTR SS:[EBP+8]
00415864   8D5401 FE        LEA EDX,DWORD PTR DS:[ECX+EAX-2]
00415868   8955 F8          MOV DWORD PTR SS:[EBP-8],EDX
0041586B   8B45 08          MOV EAX,DWORD PTR SS:[EBP+8]
0041586E   0FBF08           MOVSX ECX,WORD PTR DS:[EAX]
00415871   81F1 3C1A0000    XOR ECX,1A3C
00415877   8B55 F8          MOV EDX,DWORD PTR SS:[EBP-8]
0041587A   880A             MOV WORD PTR DS:[EDX],CX 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:10:59.097

假设您要将计算值写入指向的位置`pointer`：

```
*reinterpret_cast<short*>(pointer) = packet->PacketSize^0x1A3C; 
```

`reinterpret_cast`意思是“将一个类型的对象强制转换为另一种类型”，是用于在指向不相关类型的指针之间进行转换的转换；该值被分配，就好像`pointer`指向一样`short`。请注意，如果指针没有正确对齐`short`. 通常，`reinterpret_cast`删除编译时类型检查，让程序员有责任确保正确使用结果。

# iphone - 为 IOS 4.3 集成 Twitter SDK

> ID：11626443
> 
> 赞同：0
> 
> 时间：2012-07-24T07:51:51.057
> 
> 标签：iphone, xcode, twitter

我正在尝试在我的应用程序中集成“通过 twitter 帐户登录”。我一直在尝试很多外部 SDK，但无济于事。(TwitterAgent / Sharekit) 我不能使用官方的 twitter 框架，因为我在 xcode 3.2.6 上使用 IOS 4.3。我想要在我的应用程序中使用他/她的 Twitter 帐户登录并获取已登录的 Twitter 帐户的用户名或用户 ID。

有什么教程可以引导我吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:04:19.330

检查这篇文章可能会有所帮助，因为现在几乎每个人都在 iOS 5 中开发

[连接推特](https://stackoverflow.com/questions/2645755/connecting-twitter)

n 如果您添加了共享工具包，请将共享工具包文件导入您需要 twitter 的视图控制器并导入它们

# 导入“SHKTwitter.h”

# 导入“推特/推特.h”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:42:38.687

如前所述，Sharekit 是在 iOS4 及更高版本上执行此操作的最佳方式。

但是：您是否已阅读说明并严格遵守？
如果没有，请阅读：[Sharekit 安装和使用](http://getsharekit.com/install/)

简直太简单了！！！

顺便说一句：你为​​什么要开发 Xcode 3？有必要吗？

编辑：

请提供您的编译器错误的屏幕截图，如下所示：
![gcc 编译器错误](../Images/ba3b1da69b989346bb55ede2980df57b.png)

# asp.net - 如何使用 asp.net Web API 开发 RESTfull Web 服务

> ID：11626450
> 
> 赞同：0
> 
> 时间：2012-07-24T07:52:22.430
> 
> 标签：asp.net, asp.net-web-api

我已经阅读了有关 asp.net Web API 的信息，但我不确定我是否理解 Web API 工具背后的概念。现在假设我已经定义了一个从 APIController 派生的控制器，我可以使用 URL 调用这个控制器，然后控制器会将 JSON 结果返回给客户端，，，

**那么这是否意味着我的 asp.net MVC Web 应用程序中的 APIController 被公开为 RESTfull Web 服务？** BR

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T07:56:28.507

Whether or not your API is considered 'RESTfull' is a question of design, not a question of which libraries/project templates are used. Remember that the whole point of an API is to expose a simple programming interface - how it's implemented behind the scenes isn't important in that regard.

**However**, the WebAPI project template does lend itself well to designing a restfull service due to its built in design principles.

The basic idea behind a REST API is:

*   Use HTTP protocol (which WebAPI does, so check)
*   Expose a simple API for handling data, usually with POST/GET/PUT/DELETE methods tied to data handling (this is what the WebAPI design lends itself well to)
*   Transfer data in an interoperable format (JSON, XML, also easily doable in WebAPI)

It's not much different from designing a REST API using basic MVC Controller/Actions, WebAPI just makes it a bit easier.

Here's a nice video series: [http://www.asp.net/web-api/videos/getting-started/your-first-web-api](http://www.asp.net/web-api/videos/getting-started/your-first-web-api)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T08:32:17.633

i just want to add to Anders

REST stands for [Representational state transfer](http://en.wikipedia.org/wiki/Representational_state_transfer)
so basically in architecture you choose a `resource` like `http://www.example.com/USER`
and you instruct the server to do operations on the resource. Specified by the type of `HTTP` request being sent
going by what web api comes out of the box
`POST` - add a new user
`PUT` - edits an existing users info
`GET` - simply retrives user(s) info
`DELETE` - deletes users info
and this is `REST`

The type of data being sent or recived (`JSON` or `XML`). isnt a part of rest specifications. also you can decide incase of asp.net web api data is returned and sent in what format by using `Accept` and `Content-Type` headers with your request

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T07:59:22.807

Apicontroller 与 mvc Controller 完全不同，它来自 Wcf WebApi，但对开发人员来说与经典的 asp.net 控制器非常相似。重点是加快提供restfull服务。

因此，您只需像往常一样多分配一个路由，制作一些控制器，而不是采用 querystring 和 body json（默认）并自动转换为 Poco 类，并自动返回另一个 Poco 类，序列化为 jsion。

# php - 分页器，如何使第一页和最后一页静态并在之间放置点

> ID：11626452
> 
> 赞同：0
> 
> 时间：2012-07-24T07:52:26.773
> 
> 标签：php, html, css, zend-framework, pagination

所以我需要这样的东西：

上一页 1 ... 5 6 7 8 ... 56 下一页

这就是我的观点：

```
<?php if ($this->pageCount>1):?>
<div class="paginator">

<!-- Ссылка на предыдущую страницу -->
<?php if (isset($this->previous)): ?>
  <a class="next" href="<?php echo $this->url(array( 'id' => $this->element_id,'sortby'=>$this->sortby,'page' => $this->previous), $this->route.'_pagination'); ?>">
     <?=$this->translator()->_('previous');?>
  </a>
<?php endif; ?>
<!-- Нумерованные ссылки на страницы -->
<?php foreach ($this->pagesInRange as $page): ?>
  <?php if ($page != $this->current): ?>
    <a class="numbers" href="<?php echo $this->url(array( 'id' => $this->element_id,'sortby'=>$this->sortby, 'page' => $page), $this->route.'_pagination'); ?>">
        <?php echo $page; ?>
    </a>
  <?php else: ?>
        <a class="active" href="#"><?php echo $page; ?></a>
  <?php endif; ?>
<?php endforeach; ?>

<!-- Ссылка на следующую страницу -->
<?php if (isset($this->next)): ?>
  <a class="prev" href="<?php echo $this->url(array( 'id' => $this->element_id,'sortby'=>$this->sortby,'page' => $this->next), $this->route.'_pagination'); ?>">
    <?=$this->translator()->_('next');?>
  </a>
<?php endif; ?>

</div>
<?php endif; ?> 
```

这是我的控制器，功能索引：

```
public function indexAction()
{
        if ($this->getRequest()->isXmlHttpRequest()) $this->_helper->layout->disableLayout();
    $mapper = new Album_Model_Mapper_Album();
    $user_id = $this->_request->getParam('id');

        $adapter = new Zend_Paginator_Adapter_DbSelect($mapper->getUserAlbums($user_id));

        $paginator = new Zend_Paginator($adapter);
        $settings = $this->getFrontController()->getParam('bootstrap')->getOption('settings');
        $paginator->setCurrentPageNumber($this->_getParam('page'));
        $paginator->setItemCountPerPage($settings['albums_per_page_profile']);
        $paginator->setPageRange(4);
        $this->view->route = 'albums';
        $this->view->paginator = $paginator;
    $this->view->user_id = $user_id;
    $this->view->current_page = $this->_getParam('page') ? $this->_request->getParam('page') : 1;
    if((!isset($this->view->current_page) or $this->view->current_page==1) and $user_id==$this->getStorage()->read()->id){
        $mapperFilters = new Filters_Model_Mapper_PhotoFilters();
        $this->view->filter = $mapperFilters->fetchBySql($mapperFilters->getUserPhotos($this->getStorage()->read()->id)->limit(1), true, true);
    }
    echo $this->view->render('albums.phtml');

} 
```

现在我有这样的东西：

上一页 2 3 4 5 下一页

我不知道如何将其更改为：

上一页 1 ... 5 6 7 8 ... 56 下一页

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:02:01.100

如果你愿意更换你的分页类并使用一个新的，这个将完全符合你的要求：

[http://www.catchmyfame.com/2007/07/28/finally-the-simple-pagination-class/](http://www.catchmyfame.com/2007/07/28/finally-the-simple-pagination-class/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:00:26.227

您可以使用我自己创建的分页类，其中只更改第一个和最后一个更改的名称，您可以只更改一些模式。另外，如果您对如何使用课程有疑问，请与我联系。 [http://danielspitkevics.id.lv/index.php?r=site/viewscripts&id=10](http://danielspitkevics.id.lv/index.php?r=site/viewscripts&id=10)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T18:59:04.083

您可以从以下脚本中获取帮助，我主要用于分页工作。

页面.php

```
<?php
   include('db_connect.php');   // include your code to connect to DB.
   $page_id = isset($_GET['page_id']) ? $_GET['page_id'] : 1;
   $tbl_name="city";        //your table name
   $records_per_page = 5;

   /* Pagination Starts here */
   $query = "SELECT * FROM $tbl_name";
   $result= mysql_query($query);

   if($page_id==1)
   {
    $start_id=0;
    $end_id=$records_per_page;
   }
   else
   {
    $start_id=$records_per_page*($page_id-1);
    $end_id=$records_per_page*$page_id;
   }

   $start_limit = mysql_num_rows($result)-1 - $start_id;
   if($end_id>mysql_num_rows($result))
    $end_limit = 0;
   else
    $end_limit = mysql_num_rows($result)-$end_id;

   $select_limit=$start_limit-$end_limit+1;

   for ($i = $start_limit,$j=0; $i >= $end_limit; $i--,$j++) 
   {
    if(!mysql_data_seek($result, $i)) 
    {
    echo "Cannot seek to row $i: " . mysql_error() . "\n";
    continue;
    }

    if (!($row = mysql_fetch_assoc($result))) 
    {
    continue;
    }

   // your code to print data, i have echo city name from city table.
    echo $row['city_name'].'<br>';
   }

   if(mysql_num_rows($result))
   {
$temp=(int)(mysql_num_rows($result)/$records_per_page);

if($temp< (ceil((mysql_num_rows($result)/$records_per_page))))
    $total_pages=ceil((mysql_num_rows($result)/$records_per_page));
else if($temp==floor((mysql_num_rows($result)/$records_per_page)))
    $total_pages=floor((mysql_num_rows($result)/$records_per_page));

echo '<div class="pagination">';
if($page_id==1)
{
    echo '<span class="disabled" title="First Page"><<</span>';
    echo '<span class="disabled" title="Previous Page"><</span>';                   
}
else
{
        echo '<a href="page.php?page_id=1" title="First Page"><<</a>';
        echo '<a href="page.php?page_id='.($page_id-1).'" title="Previous Page"><</a>';             
}

if($page_id<=5)
    $min = $page_id;
else
    $min = $page_id-5;
if($total_pages<($page_id+5))
    $max = $total_pages;
else
    $max = $page_id+5;
while($min<=$page_id)
{
    if($min==$page_id)
        echo '<span class="current" title="Current Page">'.$page_id.'</span>';
    else
    {
        echo '<a href="page.php?page_id='.$min.'" title="Page '.$min.'">'.$min.'</a>';
    }
    $min++;
}

    $i = $page_id +1;
while($i<=$max)
{
    echo '<a href="page.php?page_id='.$i.'" title="Page '.$i.'">'.$i.'</a>';
    $i++;
}

if($page_id==$total_pages)
{
    echo '<span class="disabled" title="Next Page">></span>';
    echo '<span class="disabled" title="Last Page">>></span>';                  
}
else
{
    echo '<a href="page.php?page_id='.($page_id+1).'" title="Next Page">></a>';
    echo '<a href="page.php?page_id='.$total_pages.'" title="Last Page">>></a>';
}
echo '</div>';
}

?> 
```

样式.css

```
 div.pagination {
    padding: 3px;
    margin: 3px;
}

div.pagination a {
    padding: 2px 5px 2px 5px;
    margin: 2px;
    border: 1px solid #AAAADD;

    text-decoration: none; /* no underline */
    color: #000099;
}

div.pagination a:hover, div.pagination a:active {
    border: 1px solid #000099;
    color: #000;
}

div.pagination span.current {
    padding: 2px 5px 2px 5px;
    margin: 2px;
        border: 1px solid #000099;

        font-weight: bold;
        background-color: #000099;
        color: #FFF;
    }
div.pagination span.disabled {
    padding: 2px 5px 2px 5px;
    margin: 2px;
    border: 1px solid #EEE;

    color: #DDD;
} 
```

# javascript - 使用 JS 热键提交表单？

> ID：11626460
> 
> 赞同：0
> 
> 时间：2012-07-24T07:53:08.387
> 
> 标签：javascript, html, css, forms

这是我当前的代码：

```
<select tabindex="2" id="resolvedformsel" name="resolved">
     <option selected="selected" value="yes">resolved</option>
     <option value="no">not resolved</option>
     <option value="mu">not a support question</option>
</select>
<input type="submit" value="Change" id="resolvedformsub" name="submit"> 
```

我想使用组合键（如 Ctrl+Alt+1）来选择“已解决”并立即执行“提交”。我正在为支持论坛进行此修改，并且使用热键来标记已解决的线程会很方便。

我不包括 jQuery！它必须是纯 JS 解决方案。有任何想法吗？

换句话说：什么是 JS 相当于 jQuery 的 keypress/keydown？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:05:54.740

It would be better if you had a form, but you still can use:

```
window.addEventListener('keypress', function (event) {
    if (event.which == 13 && event.ctrlKey) { // Ctrl + Enter
        document.getElementById('resolvedformsel').options[0].selectected = true;
        document.getElementById('resolvedformsub').click();
    }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:04:11.560

Key combinations are not easy and some keys are reserved. So it might not work. I would try it that way: Check in the jQuery source how they are catching the metaKey property of the event object. Take a look at some plugins handling events with key combinations. Hopefully this gives you some "inspiration".

# log4j - 在 build.sbt/build.scala 之外为 SBT 设置 ClassPath

> ID：11626466
> 
> 赞同：2
> 
> 时间：2012-07-24T07:53:48.837
> 
> 标签：log4j, classpath, sbt, slf4j

我正在制作一个使用 SLF4J 的基本程序。使用 SLF4J 的要点是使用 java 类路径为您正在使用的日志记录后端手动指定 .jar 文件（以及该记录器的属性文件）。这意味着与 slf4j（基本 slf4j 之外）相关的 .jar 未在您的 SBT 项目中指定为依赖项。

问题是当你在 sbt 中执行运行命令时，它会将类路径设置为`/usr/local/Cellar/sbt/0.11.3-2/libexec/sbt-launch.jar`（我在 mac 上通过 homebrew 安装了 sbt）

我的问题是，当我使用 sbt 命令时，有没有办法将 SBT 的类路径目录（在 scala 应用程序上运行时）设置为特定目录，而无需修改实际的 SBT 项目（可能使用属性文件之类的东西？）跑？。目前为了使用日志记录测试我的应用程序，我必须使用 SBT 的 proguard 插件制作一个 min.jar 并手动运行这样的命令（这非常乏味）

```
java -Djava.ext.dirs=<some_path> -Dlog4j.configuration=<some_path> -jar scheduler_2.9.1-1.0.min.jar 
```

这没有问题，它是如何在生产中使用该应用程序的。但是，我不想在使用 sbt run 命令时测试我的应用程序（查看日志记录是否有效），而且我不知道如何在不更改 build.sbt/Build.scala 文件的情况下配置 SBT 来执行此操作（其中在生产中使用它显然会导致问题）

请注意，`-Dlog4j.configuration`如果我可以根据需要指定类路径，则不需要。我已经尝试过`-DJava.ext.dirs=<some_path>`使用启动 sbt 的命令，但不出所料，它对运行命令没有影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-24T22:49:29.713

我不知道这对您来说是否是一个好的解决方案，但您可以`user.sbt`使用添加的设置添加到工作目录中`fullClasspath in Runtime`。

# uml - 自我消息（非递归）与自我递归消息

> ID：11626473
> 
> 赞同：24
> 
> 时间：2012-07-24T07:54:28.550
> 
> 标签：uml, sequence-diagram

这两条消息有什么区别？我在网上搜索了一下，我能找到的大部分是

> 自我消息是对象发送给自身的消息。它是一条消息，表示调用同一生命线的消息。一个自身消息可以表示一个操作的递归调用，或者一个方法调用属于同一对象的另一个方法。

递归消息带来的附加激活栏有什么好处？

在图形符号中：

非递归自我消息：

![在此处输入图像描述](../Images/7b6f074721378eebc158d090b6e21b16.png)

递归自我消息

![在此处输入图像描述](../Images/7f937283395fc7a628ea0b85f9ee3d8c.png)

有什么不同？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-24T18:53:50.280

当您调用类中的函数时，您应该使用 self 消息，这些函数要么不调用其他函数，不发送任何消息（或者它们发送但您不想按顺序显示）。

如果您还想模拟类的内部函数如何与其他生命线交互，则必须使用递归调用来显示这一点，否则读者无法知道消息是从内部函数发送/接收的。

# javascript - 为什么我的按钮会这样？

> ID：11626474
> 
> 赞同：-2
> 
> 时间：2012-07-24T07:54:29.063
> 
> 标签：javascript, html, function, popup

它转到未定义，然后转到 test.com。

我怎样才能让它去[http://url.com](http://url.com)然后[http://test.com](http://test.com) 然后[http://anotherdesiredurl.com](http://anotherdesiredurl.com)

```
<head>

<script type="text/javascript">
        <!--
        function popup(url) {

            var width = 300;
            var height = 200;
            var left = (screen.width - width) / 2;
            var top = (screen.height - height) / 2;
            var params = 'width=' + width + ', height=' + height;
            params += ', top=' + top + ', left=' + left;
            params += ', directories=no';
            params += ', location=no';
            params += ', menubar=no';
            params += ', resizable=no';
            params += ', scrollbars=no';
            params += ', status=no';
            params += ', toolbar=no';
            newwin = window.open(url, 'popup', 'params');
            if (window.focus) {
                newwin.focus()
            }

            return false;

        }
setTimeout(function() {popup('http://www.test.com/'); }, 8000)

        //-->
        //]]>
    </script>

<head>
<body>
<input type="button" value="Click Blitch" onclick="popup();"/>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:59:45.680

你写了

```
newwin = window.open(url, 'popup', 'params'); 
```

我本来期望：

```
newwin = window.open(url, 'popup', params); 
```

但我不确定这与你的铅有关

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:57:32.940

because you use haven't passed an argument to `popup` function here:

```
<input type="button" value="Click Blitch" onclick="popup();"/> 
```

you should either pass an argument, or check in the function if it is undefined, then assign some URL

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T08:01:32.857

尝试这个：

**JavaScript**

```
function popup(url) {

    var width = 300;
    var height = 200;
    var left = (screen.width - width) / 2;
    var top = (screen.height - height) / 2;
    var params = 'width=' + width + ', height=' + height;          
    params += ', top=' + top + ', left=' + left;
    params += ', directories=no';
    params += ', location=no';
    params += ', menubar=no';
    params += ', resizable=no';
    params += ', scrollbars=no';
    params += ', status=no';
    params += ', toolbar=no';
    newwin = window.open(url, 'popup', 'params');
    if (window.focus) {
      newwin.focus()
    }

    return false;

  }

  function openWindows() {
    popup('http://url.com');
    popup('http://text.com');
    popup('http://http://anotherdesiredurl.com');
  } 
```

**HTML**

```
<input type="button" value="Click here" onclick="openWindows();"/> 
```

如果要在超时后更改同一弹出窗口的位置，可以将 JavaScript 更改为此：

```
 function popup(url, win) {

    var width = 300;
    var height = 200;
    var left = (screen.width - width) / 2;
    var top = (screen.height - height) / 2;
    var params = 'width=' + width + ', height=' + height;
    var newwin = win;
    params += ', top=' + top + ', left=' + left;
    params += ', directories=no';
    params += ', location=no';
    params += ', menubar=no';
    params += ', resizable=no';
    params += ', scrollbars=no';
    params += ', status=no';
    params += ', toolbar=no';
    if (newwin) {
      newwin.location = url;
    } else {
        newwin = window.open(url, 'popup', 'params');
    }
    if (window.focus) {
      newwin.focus()
    }

    return newwin;

  }

  function openWindows() {
    var win = popup('http://url.com');
    setTimeout(function () {
        popup('http://text.com', win);
    }, 2000);
    setTimeout(function () {
        popup('http://http://anotherdesiredurl.com', win);
    }, 4000);
  } 
```

# search - awk 搜索值并获取列

> ID：11626476
> 
> 赞同：0
> 
> 时间：2012-07-24T07:54:46.270
> 
> 标签：search, awk

使用 awk 我想获取以`/acq/old/*`.

**文件 1**

```
z y x / ACQ / old / a.zip y
z y t / ACQ / old / a.zip x 
```

第四栏

**文件2**

```
z y / ACQ / old / a.zip 10
z y / ACQ / old / a.zip 20 
```

第三栏

...

**文件 n**

```
z y w t / ACQ / old / x.zip 100
z y f r / ACQ / old / w.zip 200 
```

第五栏

我想做以下手术。

```
for myfile in ls *. txt
do
  awk '??' $ myfile
  other processes
done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:01:19.947

您可以使用`sed`摆脱前导列：

```
sed 's@^[^/]*@@' input 
```

这是`awk`解决方案：

```
awk -F/ -vOFS=/ '{$1=""}1' input 
```

# c# - 使用 Group by 的 LInq to Sql 查询

> ID：11626485
> 
> 赞同：0
> 
> 时间：2012-07-24T07:55:14.563
> 
> 标签：c#, sql, linq, linq-to-sql

我正在尝试编写与以下 sql 查询等效的 linq to sql 查询：

```
select * from [TableA]
INNER JOIN (select C1, COUNT(*) C2 FROM [Table2] GROUP BY C1) av ON [TableA].C1 = av.C1
WHERE av.C2 > 10 
```

任何人都可以帮助我如何编写等效链接查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:05:05.283

```
var query = from b in context.TableB
             group new { c1 } by new
             {
                b.c1
             } into GroupByC1
             select new 
             {
                c1 = GroupByC1.Key.C1,
                count1 = GroupByC1.count()
             } 

var result = from a in tableA
             join b in query on a.c1 equals b.c1
             where b.count1 > 10 
```

# android - 表格布局中的单元格单击事件..

> ID：11626487
> 
> 赞同：0
> 
> 时间：2012-07-24T07:55:16.447
> 
> 标签：android, android-tablelayout

我想知道如何在动态表格视图中获取单元格点击（例如：我想点击第二行的第三列，即 2x3 单元格）事件。我知道行点击。但我想要特定的单元格点击。如果列表视图包含行和列，是否可以在列表视图中？

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:23:46.787

动态使用 TableLayout 你可以做到这一点。

```
 TableLayout table = new TableLayout(getApplicationContext());
   TableLayout.LayoutParams tab_lp = new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
   table.setLayoutParams(tab_lp);

  TableRow row = new TableRow(this);

  final TextView tvProduct = new TextView(getApplicationContext());

  LinearLayout.LayoutParams lp_l3 = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, (LayoutParams.WRAP_CONTENT));
    tvProduct.setLayoutParams(lp_l3);
    tvProduct.setText(product);
    tvProduct.setClickable(true);   

    row.addView(tvProduct,  new TableRow.LayoutParams(1));
    table.addView(row, new TableLayout.LayoutParams());     

    tvProduct.setOnClickListener(new OnClickListener(){
        public void onClick(View v) {
            Intent i = new Intent(Beers.this,BeerDetails.class);
            i.putExtra("Product_Name",tvProduct.getText().toString());
            startActivity(i);
         }
    });

    LinearLayout linearMain = (LinearLayout) findViewById(R.id.linearmainLayout);
    linearMain.addView(table);      
    linearMain.postInvalidate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:01:31.547

您可以使用`GridView`这种 UI 而不是`TableLayout`或`ListView`。在 GridView 中，您可以设置`OnItemClickListener`. [在此处](http://developer.android.com/guide/topics/ui/layout/gridview.html)阅读有关 GridView的更多信息。

# sql - 从数据库中获取模式（用户）名称

> ID：11626489
> 
> 赞同：1
> 
> 时间：2012-07-24T07:55:22.573
> 
> 标签：sql, database, oracle10g

如何使用 select 语句从数据库中查找模式（用户）名称，或者是否有任何可用的内置函数？

我正在使用以下包来编译架构中的所有无效对象，因此我想使用返回架构名称的 select 语句或函数，而不是硬编码架构名称。

```
DBMS_UTILITY.compile_schema('SCOTT'); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T07:59:00.747

我想，[`USER`](http://docs.oracle.com/cd/E21764_01/bi.1111/e10540/variables.htm#r2c1-t4)系统变量将对应于您需要的，如果“我的模式”对应于“我的用户”，[它通常会做什么](https://stackoverflow.com/questions/880230/difference-between-a-user-and-a-schema-in-oracle)：

```
declare
  u varchar2(100);
begin
  select user into u from dual;
  DBMS_UTILITY.compile_schema(u);
end; 
```

或者没有 PL/SQL 块

```
DBMS_UTILITY.compile_schema(user); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:00:47.863

Oracle DB 中的模式是用户，因此如果要获取所有模式，则需要使用 dba_users 表：

```
SELECT USERNAME
FROM DBA_USERS; 
```

请记住，这是一个系统表，因此需要适当的用户授权。

如果需要当前用户，可以使用 USER_USERS 视图。请参阅[此处](http://docs.oracle.com/cd/B19306_01/server.102/b14237/statviews_4174.htm)了解更多信息。

希望这可以帮助！

# sql-server - 使用 SQL Server 身份验证的文件流

> ID：11626490
> 
> 赞同：1
> 
> 时间：2012-07-24T07:55:23.853
> 
> 标签：sql-server, asp.net-mvc-3

我想知道 C# 中的文件流是否使用 SQL Server 身份验证。

是否可以使用用户名和密码在 Windows 身份验证中使用文件流连接到数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T08:47:37.457

是的，必须使用 Windows 身份验证文件流。处理它的最好办法是模仿它。

在类中声明以下方法

```
[DllImport("advapi32.dll", SetLastError = true, CharSet = CharSet.Unicode)]
        public static extern bool LogonUser(string lpszUsername, string lpszDomain, string lpszPassword, int dwlogonType, int dwlogonProvider, out SafeTokenHandle phtoken);

[DllImport("kernel32.dll", CharSet = CharSet.Auto)]
        public static extern bool CloseHandle(IntPtr handle); 
```

然后在方法中：

```
public void method()
{

   WindowsImpersonationContext context = null;
   SafeTokenHandle safeTokenHandle;

    bool returnValue = LogonUser(connString[0], connString[1], connString[2], Convert.ToInt32(connString[3]), Convert.ToInt32(connString[4]), out safeTokenHandle);

    WindowsIdentity windowsIdentity = new WindowsIdentity(safeTokenHandle.DangerousGetHandle());

    context = windowsIdentity.Impersonate();

    //Make some operations

    context.undo();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:25:10.907

> 我想知道 C# 中的文件流是否使用 SQL Server 身份验证。

取决于您认为 FileStream 是什么。通过 SQL 访问 FileStream 使用 SQL 连接使用的任何内容。FileStream via windows - 显然 - 必须使用 windows 身份验证。

> 是否可以使用用户名和密码在 Windows 身份验证中使用文件流连接到数据库？

是否可以使用用户名和密码连接到 Windows 共享？是的。只要这些 ae 是 windows 用户的用户名和密码。

# c# - 中止无限 DoString 调用

> ID：11626491
> 
> 赞同：0
> 
> 时间：2012-07-24T07:55:25.007
> 
> 标签：c#, lua

> **可能重复：**
> [防止 Lua 无限循环](https://stackoverflow.com/questions/10352092/prevent-lua-infinite-loop)

**这是一个针对 C#（Lua 接口）的 Lua 特定问题，它不像在原生 C Lua 中那样工作，所以如果您没有 Lua C# 的经验，请三思而后行，如果您的回答对我有帮助，谢谢**

所以问题是如果用户提供这样的脚本

```
while (true) do end 
```

我怎么在没有 Lua 死在我身上的情况下干净地中止它？我尝试了很多方法，仅从单独的线程调用**lua.Close()只会****在调用 Lua API（尝试索引 nil 值）**错误时给您一个不受保护的错误，问题的根源是 Lua 不是线程安全，并且由于我必须从一个单独的线程调用 close（主线程正忙于为 DoString 调用提供服务），所以它有点 22 问题。我尝试添加一个调试钩子，并检查 DoString 线程和钩子之间的线程 ID 是否相同，它们是相同的，因此钩子中执行的任何内容都在 DoString 线程上执行。这无济于事，仍然出现异常。你是如何在 Lua C# 中中止 DoString 的！？

谢谢

**编辑**

更进一步，如果我处理 lua 类，我会在运行无限**DoString**的线程中得到一个异常，在 VStudio 的调试中，我可以抓住它并恢复。但是，如果我在调试或发布中运行 exe，我有时无法恢复并崩溃！？我从 DoString 线程得到的错误是

**尝试读取或写入受保护的内存。这通常表明其他内存已损坏。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:05:30.403

> How the ... do you abort a DoString in Lua C#!?

It doesn't matter if it's from C#, C, C++, or whatever. Lua doesn't simply stop just because you want it to. It is inherently single-threaded, which means that the execution of a Lua script will stop when it returns. And since it's not legal to call into a Lua state from one thread while one thread is active, there's not much you can do directly.

Lua simply isn't intended to be used in that way.

> if I dispose the lua class

You can't dispose of the Lua state *while it's running*. If throwing an exception from a debug hook doesn't work, then there is simply nothing you can do.

# jqplot - 如何为 jqplot -option 创建新插件？

> ID：11626493
> 
> 赞同：0
> 
> 时间：2012-07-24T07:55:30.367
> 
> 标签：jqplot, labels, series, gantt-chart

我只在 jqplot.pointlabels.js 文件中添加了几行，所以我在 jqplot pointlabels 选项中获得了一个额外的选项。我该如何为此制作一个新插件？

当然，如果我需要更新，我喜欢保留这些更改。我不知道该怎么做。我正在尝试制作时间线/甘特图。每个项目或线段是一个只有两个点的系列。因此，我不是在每一端都有点标签，而是计算中心并只放置一个标签。

所以在 jqplot.pointlabels.js 中，第 322 行将是：

```
 if (p.centerLabel) {
                var ell =  xax.u2p(pd[i][0]) + ((xax.u2p(pd[1][0]) - xax.u2p(pd[0][0])) / 2) +p.xOffset(elem, location);
            } else {
                var ell = xax.u2p(pd[i][0]) + p.xOffset(elem, location);    
            } 
```

在 jqplot 的选项中，我会写如下内容：

```
 pointLabels:{
              show:true,
              location:'s',
              fontSize: '1em',
              centerLabel: true, // extra option, see code
              labelsFromSeries: true,
              formatter: $.jqplot.DefaultTickFormatter,
          } 
```

我可以将所有代码复制到一个名为 jqplot.singleSeriesLabels.js 的新插件中，但是如何让 jqplot 将该插件用于“pointLabels”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:24:50.340

我找到了一个简单的解决方案：我将完整的插件复制到一个新文件中，然后像这样更改了插件名称

```
$.jqplot.newPluginName = function(options) { 
```

在我用来设置 pointLabels 插件选项的网站上，我现在做同样的事情，但使用了新名称：

```
newPluginName:{
          show:true,
          location:'s',
          fontSize: '1em',
          centerLabel: true, // extra option, see code
          labelsFromSeries: true,
          formatter: $.jqplot.DefaultTickFormatter,
      } 
```

不要忘记在您的网站上包含新的插件文件

# c# - 电子邮件地址编码问题

> ID：11626496
> 
> 赞同：4
> 
> 时间：2012-07-24T07:55:44.547
> 
> 标签：c#, asp.net, .net

我有以下字符串需要用于确认电子邮件“发件人”地址。这是在 Web 客户端中查看时导致问题的西班牙语翻译。如下图所示。

```
model.FromAddresses = new EmailAddress
{
  Address = fromAddressComponents[0],
  DisplayName = fromAddressComponents[1]
}; 
```

取自资源字符串的值，如下所示

```
 <data name="BookingConfirmation_FromAddress" xml:space="preserve">
    <value>Confirmación@test.com</value>
  </data> 
```

在电子邮件客户端中，值变为（应为 Confirmación@test.com）

```
=?utf-8?Q?Confirmaci=C3=B3n 
```

你能看到如何避免这种情况吗？我知道这是因为 ó 但我不知道如何避免这个问题！

谢谢，詹姆斯

**更新**

完整代码如下：

```
public void Send(MailAddress to, MailAddress from, string subject, string body)
    {
        var message = new MailMessage
                          {
                              BodyEncoding = new System.Text.UTF8Encoding(true),
                              From = from,
                              Subject = subject,
                              Body = body,
                              IsBodyHtml = true
                          };

        message.To.Add(to.Address);

        var smtp = new SmtpClient() { Timeout = 100000 };
        try
        {
            smtp.Send(message);
        }
        finally
        {
            if (smtp.DeliveryMethod == SmtpDeliveryMethod.Network)
                smtp.Dispose();
        }

    }

// New Version
// --------------------------

    public override void Handle(SendEmailEmailCommand emailCommand)
    {
        if(!_config.SendEmail)
        {
            return;
        }

        var to = new MailAddress(emailCommand.To.Address, emailCommand.To.DisplayName);
        var from = new MailAddress(emailCommand.From.Address, Uri.UnescapeDataString(emailCommand.From.DisplayName));

        try
        {
            var msgBody = _compressor.Decompress(emailCommand.Body);
            _emailClient.Send(to, from, emailCommand.Subject, msgBody);
        }       
        catch (Exception ex)
        {
            _logger.Error("An error occurred when trying to send an email", ex);
            throw;
        }
    }

    public void Send(MailAddress to, MailAddress from, string subject, string body)
    {
        var message = new MailMessage
                          {
                              BodyEncoding = new System.Text.UTF8Encoding(true),
                              From = from,
                              Subject = subject,
                              Body = body,
                              IsBodyHtml = true
                          };

        message.To.Add(to.Address);

        if (!string.IsNullOrWhiteSpace(_config.BccEmailRecipents))
        {
            message.Bcc.Add(_config.BccEmailRecipents);
        }

        SendEmail(message);

        if (_config.BackupEmailsEnabled)
        {
            SendBackupEmail(message);
        }
    }

    private void SendEmail(MailMessage message)
    {
        var smtp = new SmtpClient() { Timeout = 100000 };
        try
        {
            smtp.Send(message);
        }
        finally
        {
            if (smtp.DeliveryMethod == SmtpDeliveryMethod.Network)
                smtp.Dispose();
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T08:09:30.513

请看下面这个使用[System.Uri](http://msdn.microsoft.com/en-us/library/system.uri.aspx)类方法的例子，希望对你有帮助

```
string email = "Confirmación@test.com";

string escaped = 
       System.Uri.EscapeDataString(email); // Confirmaci%C3%B3n%40test.com
string unescaped = 
       System.Uri.UnescapeDataString(email); //Confirmación@test.com 
```

# sockets - unsigned short vector socket from vc++ to matlab

> ID：11626499
> 
> 赞同：0
> 
> 时间：2012-07-24T07:55:56.417
> 
> 标签：sockets, matlab, fread

I want to send unsigned short vector in visual c++ to matlab using socket communication.

I have an unsigned short vector std::vector test that has

```
//test[0]-test[3]  short values comverted from longlong (64bits/16bits=4 elements)    
//test[4]-         short values. 
```

Now I want to socket this vector to matlab.

In VC++,

```
send(socket, (char *) &test[0], test.size()* sizeof(unsigned short), 0); 
```

In matlab m-file, I tried

```
//t=tcpip(----);    
//fread(t, 4, 'uint64');    
//fread(t, the rest of bytes, 'ushort'); 
```

but values I got on matlab looks wrong.

```
"fread(t, 4, 'uint64')" shows invalid precision and
"uint64(fread(t,4,'uint64'))" does also the same error. 
```

How can we receive and convert data on matlab?

Thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:14:19.323

查看此页面上的信息[http://www.mathworks.co.uk/help/techdoc/ref/fread.html](http://www.mathworks.co.uk/help/techdoc/ref/fread.html)似乎当您指定它时，将期望 64 位数据读入每个`'int64'`值`fread`. 因此，您的 4 个元素被读取为单个 64 位模式。我认为，如果您要发送 16 位短整数，则需要使用`fread`与发送相同的数据类型`'uint16'`，然后将它们“转换”为 64 位。没有转换，例如无符号短裤的范围在 64 位整数范围内。如果你*真的*想要按照自己的方式进行操作并读入 64 位整数值，我认为您需要将数据作为 64 位整数数组发送到套接字发送函数中。这样至少 Matlab 将从另一端的套接字读取正确的字节数。目前，从外观上看，您发送的每 4 个无符号短值都会合并为一个 64 位整数。

# javascript - 如何更改表单字段标签的样式？

> ID：11626501
> 
> 赞同：0
> 
> 时间：2012-07-24T07:56:01.777
> 
> 标签：javascript, extjs

我正在使用 sencha 编写一个表单，该表单应该根据已填写的字段更改必填字段。

我在这些领域有一个听众，但我无法改变他们的风格。

有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:01:26.860

谢谢你们！它与`addClass("myClass")`. 抱歉，我没有显示任何代码，但它是一个非常大的应用程序的一部分，它不会有太大帮助。

# ext.net - Dynamically set height of a panel which contains store in Ext.Net

> ID：11626502
> 
> 赞同：0
> 
> 时间：2012-07-24T07:56:05.817
> 
> 标签：ext.net

I want to set the height of a panel which contains store in Ext.Net dynamically based on the number of rows.

I am having the following code:-

```
 <ext:Panel 
                                                    ID="PanelOp12" 
                                                    runat="server" 
                                                    Layout="FitLayout"
                                                    AutoHeight="true"
                                                    Title="Business Report for the previous week" >
                                                    <AutoLoad Url="BusinessReport2.aspx" Mode="IFrame" ShowMask="true" Cls="abc" />

                                                </ext:Panel> 
```

Where my businessReport2.aspx page has the follwing code

```
<ext:GridPanel ID="GridPanel1" 
        runat="server" 
        StripeRows="true"
        AutoHeight="true" 
        AutoWidth="true"
        TitleCollapse="True">
        <Store>
            <ext:Store ID="Store1" runat="server">
                <Reader>
                    <ext:JsonReader>
                        <Fields>
                            <ext:RecordField Name="s_artistname" />
                            <ext:RecordField Name="s_daysCover" />
                            <ext:RecordField Name="s_target"/>
                            <ext:RecordField Name="s_sales"/>
                            <ext:RecordField Name="s_variance"/>
                            <ext:RecordField Name="s_cust"/>
                            <ext:RecordField Name="s_unit"/>
                            <ext:RecordField Name="s_avgcustperday"/>
                            <ext:RecordField Name="s_aus"/>
                            <ext:RecordField Name="s_ipt"/>
                            <ext:RecordField Name="s_s_care"/>
                            <ext:RecordField Name="s_scare_percent"/>
                            <ext:RecordField Name="s_face"/>
                            <ext:RecordField Name="s_face_percent"/>
                            <ext:RecordField Name="s_t_hrs"/>
                            <ext:RecordField Name="s_t_prod"/>
                        </Fields>
                    </ext:JsonReader>
                </Reader>
            </ext:Store>
        </Store>
        <ColumnModel ID="ColumnModel1" runat="server">
            <Columns>
                <ext:RowNumbererColumn />
                <ext:Column DataIndex="s_artistname" Header="Operator" Width="120px" Sortable="False" />
                <ext:Column DataIndex="s_daysCover" Header="Days"  Width="40px" Sortable="False"/>
                <ext:Column DataIndex="s_target" Header="Target" Width="60px" Sortable="False">
                    <Renderer Fn="MyMoney" />
                </ext:Column>
                <ext:Column DataIndex="s_sales" Header="Sales" Width="60px" Sortable="False">
                    <Renderer Fn="MyMoney" />
                </ext:Column>
                <ext:Column DataIndex="s_variance" Header="Variance" Width="60px" Sortable="False">
                    <Renderer Fn="variance" />
                </ext:Column>
                <ext:Column DataIndex="s_cust" Header="Customers" Width="60px" Sortable="False" />
                <ext:Column DataIndex="s_unit" Header="Units" Width="50px" Sortable="False" />
                <ext:Column DataIndex="s_aus" Header="AUS" Width="60px" Sortable="False">
                    <Renderer Fn="AUS" />
                </ext:Column>
                <ext:Column DataIndex="s_ipt" Header="IPT" Width="60px" Sortable="False">
                    <Renderer Fn="IPT" />
                </ext:Column>
                <ext:Column DataIndex="s_s_care" Header="Skin$" Width="60px" Sortable="False">
                    <Renderer Fn="MyMoney" />
                </ext:Column>
                <ext:Column DataIndex="s_scare_percent" Header="Skin%" Width="60px" Sortable="False">
                    <Renderer Fn="skinPercentage" />
                </ext:Column>
                <ext:Column DataIndex="s_face" Header="Face$" Width="60px" Sortable="False" >
                    <Renderer Fn="MyMoney" />
                </ext:Column>
                <ext:Column DataIndex="s_face_percent" Header="Face%" Width="60px" Sortable="False">
                    <Renderer Fn="facePercentage" />
                </ext:Column>
                <ext:Column DataIndex="s_t_hrs" Header="Hours" Width="60px" Sortable="False"/>
                <ext:Column DataIndex="s_t_prod" Header="Avg p/h" Width="60px" Sortable="False">
                    <Renderer Fn="HourlyProd" />
                </ext:Column>
            </Columns>
        </ColumnModel>
        <SelectionModel>
            <ext:RowSelectionModel ID="RowSelectionModel1" runat="server" />
        </SelectionModel>
        <LoadMask ShowMask="true" />
    </ext:GridPanel> 
```

But it is not taking the height as auto or 100%. I don't want a scroll in the panel. Please help me.

Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T08:41:16.523

尝试使用视口

```
<ext:Viewport runat="server" Layout="Border">
            <Items>
                <ext:Panel 
                    ID="Panel1" 
                    runat="server" 
                    Layout="FitLayout"
                    Region="Center"
                    Title="Business Report for the previous week" >
                    <AutoLoad Url="CopyExt.NET.Default.aspx" Mode="IFrame" ShowMask="true" />

                </ext:Panel>
            </Items>
        </ext:Viewport> 
```

# android - List selector android

> ID：11626514
> 
> 赞同：0
> 
> 时间：2012-07-24T07:56:58.673
> 
> 标签：android

I've got two shapes like this:

**List_selector_focused.xml**

```
<gradient
    android:startColor="#f5c98c"
    android:endColor="#f7ddb8"
    android:angle="90" />

</shape> 
```

and **list_selector_pressed.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
   android:shape="rectangle">

<gradient
    android:startColor="#fb9d23"
    android:endColor="#ffc579"
    android:angle="90" />

</shape> 
```

and my list_selector.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector
xmlns:android="http://schemas.android.com/apk/res/android">

<item
    android:state_pressed="true"
    android:drawable="@drawable/list_selector_pressed" />

<item
    android:state_focused="true"
    android:drawable="@drawable/list_selector_focused" />

<item
    android:drawable="@android:color/transparent" />

</selector> 
```

And to my listview, I add the `list_selector.xml`

```
 <ListView
    android:id="@+id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#000000"
    android:cacheColorHint="#0A3A5C"
    android:scrollbars="none"
    android:listSelector="@drawable/list_selector"> 
```

But there is no color appearing when i press one of the items in the listview, any suggestions?

**EDIT**

The list I try to apply this to, is a custom list. The layout for each of the items in the list:

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:paddingBottom="10dip"
android:paddingLeft="10dip"
android:paddingTop="10dip" >

<TextView
    android:id="@+id/idNumber"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="First"
    android:textColor="#11629F"
    android:textSize="17sp"
    android:textStyle="bold" />

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

</LinearLayout>

<TextView
    android:id="@+id/date"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/idNumber"
    android:layout_below="@+id/idNumber"
    android:text="Second"
    android:textSize="15sp" />
 </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:01:57.947

您的项目是否具有恒定的背景颜色？如果是这样，则不会显示您的选择器，因为此选择器设置在项目的背面。确保您的项目的背景在选择时是透明的，以使您的选择器可见。

# ios - PhoneGap 2.0 iOS getting started guide buggy?

> ID：11626517
> 
> 赞同：15
> 
> 时间：2012-07-24T07:57:11.223
> 
> 标签：ios, cordova, cordova-2.0.0

I followed the instructions in the PhoneGap 2.0.0 getting started with iOS guide. It seems not update to date, because some files in the created project have other names than in the guide. Apart from this, a warning and error occures while building.

> 1.  Warning: Check dependencies: Missing dependency target "CordovaLib (from CordovaLib.xcodeproj)"
> 2.  Error: CpResource /VERSION /<...>/Test.app/VERSION cd /<...>/test-phonegap setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin" builtin-copy -exclude .DS_Store -exclude CVS -exclude .svn -exclude .git -exclude .hg -resolve-src-symlinks -strip-tool /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/strip /VERSION /<...>/Build/Products/Debug-iphonesimulator/Test.app
> 
> error: /VERSION: No such file or directory

Do you have any ideas how get it working? Thanks and best regards.

-- Guide: [http://docs.phonegap.com/en/2.0.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS](http://docs.phonegap.com/en/2.0.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-24T18:44:59.177

下载并解压PhoneGap 2.0.0后，打开“phonegap-phonegap-ff91e6e/lib/ios/Cordova-2.0.0.dmg”，然后安装“Cordova-2.0.0.pkg”。关闭并重新打开您的项目。它应该工作。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-06T09:08:06.500

You need to manually set the CORDOVALIB setting:

Open XCode -> Preferences, go to Locations -> Source Trees

If you don't have a CORDOVALIB entry there, create one:

Click "+" at the bottom, enter:

*   Setting Name: CORDOVALIB
*   Display Name: CORDOVALIB
*   Path: /Users/[your_user_name]/Documents/CordovaLib

The "Path" should point to the folder created by the Cordova Installer (Cordova-2.0.0.pkg).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-26T14:18:32.690

为我找到解决方案：将 CordovaLib.xcodeproj 导入项目的工作区。如果您同时打开了 2 个打开的 PhoneGap 项目，则 CordovaLib 将仅可用于这两个项目中的一个...关闭所有 phonegap 项目并一次只打开一个。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-17T10:27:48.963

我刚刚清理了项目并且它工作了：产品 - >清洁

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T13:58:05.550

将 CordovaLib.xcodeproj（在我的 Documents/CordovaLib 目录中 - 安装程序至少完成了该部分...）拖放到我的项目中（将其创建为子项目）为我消除了这些错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-06T21:48:56.237

我发现我正在使用 Mountain Lion 并且遇到了同样的问题。我必须转到系统偏好设置>安全和隐私>“允许从以下位置下载应用程序”

...然后检查“任何地方”的选项。默认情况下，它们会锁定外部应用程序以仅从 Mac App Store 加载。

# php - pass the value of get_insert_id

> ID：11626518
> 
> 赞同：0
> 
> 时间：2012-07-24T07:57:14.350
> 
> 标签：php

Can you please help me here. I am trying to save the last id inserted, but it keeps on saving 0, which I don't understand why. Sorry noob here :( Here are my codes

the index

```
<form action="save_member.php" method="POST">
            Enter your username: <input type="text" name="member"/>
            <input type="submit" value="Submit"/>
        </form> 
```

the save_member

```
include 'connect.php';
session_start();
$_SESSION['member_id'] = $_POST[member];
$sql = mysql_query("insert into users (idusers, member) values ('', '$_POST[member]')");
$_SESSION['last_id'] = mysql_insert_id();
header("Location: chat.php"); 
```

the chat

```
 <?php
    session_start();
    echo "hello" . " " . $_SESSION['member_id'];
    echo "<br/>";
    ?>
    <?php
    include 'connect.php';
    $q = mysql_query("select * from messages order by time_sent desc");
    while ($w = mysql_fetch_array($q)) {
        ?>
        <div id="show_messages" style="">
            <span id="wrap_messages" style="">
                <span id="message" style=""><?php echo $w['message']; ?> </span> :
                <span id="member_id" style=""><?php echo $w['member_id']; ?></span>
            </span>
        </div>
    <?php } ?>
    <br/>
    <div style="margin-right: 450px !important; width: 300px; float: right;">
        <form action="sent_chat_message.php" method="POST">
            <input type="hidden" name="member_id"/>
            <input type="text" name="chat"/>
            <input type="submit" value="Submit"/>
        </form>
    </div> 
```

and the sent_chat_message

```
include 'connect.php';
session_start();
$_SESSION['last_id'] = $last_id;
$r = mysql_query("insert into messages (idmessages, message, member_id) values ('', '$_POST[chat]', '.$last_id.')");
header("Location: chat.php") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:02:19.823

您确定插入查询已成功执行吗？

因为'这一定是你得到`0`作为`mysql_insert_id`aster 插入查询结果的原因

如果 idusers 是主键，我建议传递 NULL 值而不是空字符串

```
$sql = mysql_query("insert into users (idusers, member) values ('', '$_POST[member]')"); 
```

您的查询应该是

```
$sql = mysql_query("insert into users (idusers, member) values (NULL, '".mysql_real_escape_string($_POST[member])."')"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T08:06:46.610

来自[php.net](http://php.net/manual/en/function.mysql-insert-id.php)：

检索上一个查询（通常是 INSERT）为 AUTO_INCREMENT 列生成的 ID。

您的 id 字段是否设置为 AUTO_INCREMENT？

另外，使用 PDO 或 mysqli。mysql_* 已弃用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T09:26:37.307

这个线程解决了。我所做的是

```
if (isset($_SESSION['last_id']))
    $_SESSION['last_id'] = $_SESSION['last_id'];
else
    $_SESSION['last_id']; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-24T08:00:44.307

You might want to add the ID tag just in-case your browser does not support the NAME tag Try this

```
<form action="save_member.php" method="POST">
            Enter your username: <input type="text" name="member" id="member"/>
            <input type="submit" value="Submit"/>
        </form> 
```

# objective-c - 使用 CHCSVWriter 保存 CSV 文件

> ID：11626528
> 
> 赞同：4
> 
> 时间：2012-07-24T07:57:58.517
> 
> 标签：objective-c, ios, csv, nsfilemanager

我正在尝试使用 CHCSVWriter 编写一个大型 CSV 文件，从核心数据托管对象到应用程序文档目录。

虽然看起来运行良好，但 cvs 文件在完成后似乎不存在。

```
 NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *filename = @"productFileExport.csv";
    NSURL *fileURL = [NSURL fileURLWithPathComponents:[NSArray arrayWithObjects:documentsDirectory, filename, nil]];    

    CHCSVWriter *cvsExport = [[CHCSVWriter alloc] initWithCSVFile:[fileURL absoluteString] atomic:NO];

    for (Product *prod in fetchedObjects) {
        [cvsExport writeLineOfFields:prod.code, prod.barcode, prod.name, prod.size, prod.casesize, nil];
    }
    [cvsExport closeFile]; 
```

我认为这是我尝试将 initWithCVSFile: 从 [fileURL absoluteString] 更改为 [fileURL path] 和 [fileURL description] 的文件名问题，但没有成功。此外，如果我将 atomic 更改为 YES ，则会出现以下错误：

> *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“*** -[NSFileManager moveItemAtPath:toPath:error:]:destination path is nil”

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:25:54.340

问题`cvsExport writeLineOfFields`在于传递的第一个对象为 nil，因此没有任何内容写入文件。

也`initWithCVSFile:`需要`[fileURL path]`传递给它。

# java - Java Substituting Variables

> ID：11626531
> 
> 赞同：0
> 
> 时间：2012-07-24T07:58:03.833
> 
> 标签：java, string, variables, double

If the variables are entered directly (i.e (5.00, 20.00) it calculates the change perfectly, but if I substitute the values with purchase and amount it doesn't calculate the change?

```
public static void makeChange()
   {

       double purchase;
       double tendered;

       Scanner scan = new Scanner (System.in);

       System.out.println ("How much was the Purchase?");
       purchase = scan.nextDouble(); 
       System.out.println ("Amount Tendered"); 
       tendered = scan.nextDouble();

       System.out.println("Processing Transaction");
       int ch[] = cd.makeChange(purchase, tendered); // does not calculate change correctly

           ...continued 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T08:15:17.623

您正在使用算术和比较 using `double`，一旦任何中间值是不能由 a 精确表示的数字，就会产生不可预测的结果`double`。例如，考虑这个看似无辜的循环：

```
double value = 1.0;
double dime = 0.1;
while (value > 0) {
   value -= dime;
   System.out.println(value);
} 
```

这打印：

```
0.9
0.8
0.7000000000000001
0.6000000000000001
0.5000000000000001
0.40000000000000013
0.30000000000000016
0.20000000000000015
0.10000000000000014
1.3877787807814457E-16
-0.09999999999999987 
```

关于为什么会这样的进一步阅读可以在这里找到：[What Every Computer Scientist Should Know About Floating-Point Arithmetic](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

正如您在上一个问题中所建议的，将您的`double`变量更改为`BigDecimal`s ，我认为您的问题将会消失。

# c++ - 需要有关在 C++/CLI 中通过串行端口进行通信的建议

> ID：11626532
> 
> 赞同：2
> 
> 时间：2012-07-24T07:58:08.017
> 
> 标签：c++, multithreading, c++-cli, serial-port

我正在研究必须*通过串行端口进行通信*的项目。**我将通过 RS232（大约 6KB/10 毫秒）从 UART**接收相当“大量”的数据，我必须**收集并解码它**。解码后的数据将**存储到文件**中，其中一些将**显示在 GUI 中**。

由于托管数据工作和大量库，我将使用**C++/CLI**（在**Visual Studio 2010**中使用**.NET v4.0） 。**

我的**主要问题是：**你会**推荐我**什么：

**A）不使用线程并通过计时器每5ms查找一次数据......**

**B）不使用线程并根据传入数据的事件查找数据......**

**C) 使用线程...**

你会推荐我什么？我没有太多的经验来告诉什么是最好的解决方案。

感谢您以后的回复...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T08:07:30.980

如果您需要 gui，则需要一个单独的线程来获取数据。没有办法可靠地获取每个 x mSec 的数据并在 ui 线程中处理它。

除此之外，您似乎对线程的作用有些困惑：A 和 B 可以与 C 结合使用。我建议使用单独的线程轮询端口以获取数据或使用事件来检查新数据何时到达。计时器可能不准确，毕竟它是端口指示数据进入的速率，因此最好听它而不是使用单独的时基。将处理后的数据存储在队列（又名*生产者*）中，并让另一个线程（又名*消费者*）从队列中获取大块以将它们刷新到文件中（您不想每 5 毫秒写入一个文件，而是写入大量数据每 100 毫秒左右一次）。然后，ui 线程也可以从该队列中预览并显示数据片段。

# c++ - 为什么我释放最后一个 COM 接口后 MS Word 没有关闭？

> ID：11626533
> 
> 赞同：1
> 
> 时间：2012-07-24T07:58:16.990
> 
> 标签：c++, com, word-automation

我认为 COM 自动化对象在释放最后一个接口时会自行关闭。

但是，此代码打开然后释放 MS Word 的接口使 WINWORD.EXE 进程运行。我已经追踪了它，我知道它`iUnkn->Release()`正在被调用。

我在这里做错了什么？

```
if (SUCCEEDED(CoInitialize(NULL)))
{
    CLSID clsid;
    if (SUCCEEDED(CLSIDFromProgID(OLESTR("Word.Application"), &clsid)))
    {
        IUnknown* iUnkn = NULL;
        if (SUCCEEDED(CoCreateInstance(clsid, NULL, CLSCTX_SERVER, Word::IID__Application, (void**) &iUnkn)) && iUnkn)
        {
            iUnkn->Release();
        }
    }

    CoUninitialize();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:04:09.417

这是设计使然。

当释放对它的 COM 接口的最后一个引用时，没有什么会强制 Word 退出`Application`（假设您的代码实际上持有的引用是最后一个）。该应用程序可以并且将继续为未来的请求提供服务。

如果您希望进程退出，则必须查询其`IDispatch`接口`Word.Application`并调用其[Quit()](http://msdn.microsoft.com/en-us/library/ff844895.aspx)方法。

# button - 动态添加按钮到面板

> ID：11626536
> 
> 赞同：1
> 
> 时间：2012-07-24T07:58:27.770
> 
> 标签：button, extjs4, panel

ExtJS 4

如何像在按钮属性中一样（动态地）将按钮添加到面板？在 ExtJS 3 中，我们有`panel.addButton()`但在 ExtJS 4 中没有找到任何这样的功能。我也尝试`panel.addDocked()`过，但没有成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T08:09:09.933

```
Ext.onReady(function() {

    var p = Ext.create('Ext.panel.Panel', {
        width: 200,
        height: 200,
        renderTo: document.body,
        title: 'A Panel',
        buttons: [{
            text: 'B1'
        }]
    });

    setTimeout(function(){
        p.down('toolbar').add({
            text: 'B2'
        });
    }, 1000);

}); 
```

# xamarin.ios - Monotouch 谷歌分析所有页面浏览量均失败

> ID：11626537
> 
> 赞同：0
> 
> 时间：2012-07-24T07:58:34.933
> 
> 标签：xamarin.ios, google-analytics-api

我正在尝试在单点触控应用程序上启动并运行谷歌分析，但没有任何事件成功发送，NSError 对象始终为空。委托上的 DispatchCompleted 方法始终打印“成功：0 - 失败：n”，n = 队列中的页面浏览量。

我从这个 url 运行了 makefile： [https](https://github.com/mono/monotouch-bindings/tree/master/GoogleAnalytics) ://github.com/mono/monotouch-bindings/tree/master/GoogleAnalytics 它生成了一个 GoogleAnalytics.dll 文件，我试图用它来跟踪。

这是测试应用程序的代码示例：

```
public partial class TestAnalyticsViewController : UIViewController
{
    private GanDelegate _delegate;
    public override void ViewDidLoad ()
    {
        _delegate = new GanDelegate();

        GoogleAnalytics.GANTracker.SharedTracker.StartTracker("our_id", 0, _delegate);

        NSError error;

        GoogleAnalytics.GANTracker.SharedTracker.TrackPageView("/Home", out error);
        GoogleAnalytics.GANTracker.SharedTracker.Dispatch();

        base.ViewDidLoad ();

    }

}

public class GanDelegate: GoogleAnalytics.GANTrackerDelegate
{
    public override void DispatchCompleted (GoogleAnalytics.GANTracker tracker, int eventsDispatched, int eventsFailedDispatch)
    {
        Console.WriteLine("Successful: {0} - Failed: {1}", eventsDispatched.ToString(), eventsFailedDispatch.ToString());
    }
} 
```

我也尝试从设备上卸载应用程序并从头开始，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:34:38.680

我发现问题出在哪里......分析内容没有使用设备上设置的任何代理服务器，因此所有呼叫都被防火墙阻止

# javascript - 在 Backbone 中共享相同功能的最佳方式

> ID：11626543
> 
> 赞同：0
> 
> 时间：2012-07-24T07:59:06.613
> 
> 标签：javascript, backbone.js, mixins

我目前的情况：对于 a `Backbone.Collection`（但也应该是 a `Backbone.Model`），我以这种方式扩展类（1）。
我想分享的功能如下：
1)`startPolling`并且`stopPolling`应该是可从所有 Backbone.Collections 以及最终 Backbone.Models 访问的公共方法
2)`executePolling`并且`onFetch`应该是私有方法。

在所有保留 和私有方法之间共享`startPolling`和共享的最佳方式是什么？`stopPolling``Backbone.Collection/Backbone.Model``executePolling``onFetch`

我的想法是创建一个新文件`utils/backbone.polling.js`(2)。是很好的解决方案吗？

* * *

(1)

```
define([
    'backbone',
    'models/myModel'
], function (Backbone, MyModel) {
    'use strict';

    var MyCollection = Backbone.Collection.extend({

        model: MyModel,

        url: 'some_url'

        initialize : function () {
            _.bindAll(this);
        },

        startPolling: function () {
            this.polling = true;
            this.minutes = 2;
            this.executePolling();
        },

        stopPolling: function () {
            this.polling = false;
        },

        executePolling: function () { 
            this.fetch({success : this.onFetch});
        },

        onFetch: function () {
            if (this.polling) {
                setTimeout(this.executePolling, 1000 * 60 * this.minutes);
            }
        }
    });

}); 
```

* * *

(2)

```
utils/backbone.polling.js

Backbone.Collections.startPolling = function () {
    // code here
};

Backbone.Collections.stopPolling = function () {
    // code here
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:59:43.337

尽管@Flops 和@jakee 的方法非常优雅，但一个非常简单的方法可能是拥有一个纯JS utils 库，例如：

```
// code simplified and no tested
App = {};
App.Utils = {};
App.Utils.startPolling: function () {
  this.polling = true;
  this.minutes = 2;
  this.executePolling();
},

var MyCollection = Backbone.Collection.extend({
  startPolling: App.Utils.startPolling;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T08:48:26.247

您可以扩展 Collection 原型以将公共方法添加到您拥有的每个集合中（如果您真的在任何地方都需要它）。在其他情况下，您可以使用此方法（第一种方式）创建自己的构造函数。

```
_.extend(Backbone.Collection.prototype, {
    startPolling: function() {},
    stopPolling: function() {}
}); 
```

对于 provate 方法，您可以执行相同的操作，只需开始它们是带有下划线的名称：

```
_.extend(Backbone.Collection.prototype, {
    _executePolling: function() {},
    _onFetch: function() {}
}); 
```

这种命名方法的方式表明这是一个私有方法。

如果您希望它们在模型中，您可以扩展模型原型或创建模型的新构造函数，如上例所示。如果这个函数是相同的（希望不是），你可以给一个函数的链接，而不是它自己的函数。

```
var bar = function() {};

_.extend(Backbone.Model.prototype, {
   foo: bar
});

_.extend(Backbone.Collection.prototype, {
   foo: bar
}); 
```

因此，当您更改栏功能时，它将在模型和集合中更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T08:49:03.670

对于私有方法，据我所知，我不记得 javascript 提供了一种在对象“私有”中创建属性的方法。我能想到的唯一方法是使“私有”方法仅在它们所使用的方法中可用。

```
startPolling: function () {
  this.polling = true;
  this.minutes = 2;

  var self = this;
  var executePolling = function() {
    // Do something
  };

  var onFetch = function() {
    // Do something
  }; 

  executePolling();
}, 
```

但是这样你就不会从函数中的函数动态访问对象属性（它们只是在创建它们时保存状态中的值）（链接到[fiddle](http://jsfiddle.net/SBbh9/)展示这种现象）。如果您想访问最新的对象属性值，那么您必须公开这些函数。我认为一个好的约定就是用一个前导下划线来命名“私有”函数，以表示它们是私有的（比如这个`_executePolling`和`_onFetch`）。

至于最好的分享方式。一个好看的解决方案可能是这样的：

```
 var WestCoastCustoms= {
   // Declare your stuff here
 };

 var Collection = Backbone.Collection.extend(WestCoastCustoms);
 var Model = Backbone.Model.extend(WestCoastCustoms); 
```

一个工作小提琴的例子[在这里](http://jsfiddle.net/SBbh9/1/)

希望这有帮助！

# android - android: Project.Properties - 不要编辑，你的修改会被抹掉吗？

> ID：11626545
> 
> 赞同：3
> 
> 时间：2012-07-24T07:59:11.107
> 
> 标签：android, project-properties

我好像有问题。

我想在 android 项目的 project.properties 中添加一些额外的配置信息，但我注意到当我打开它时，有评论告诉我不要编辑它

编辑是否安全

它会在某个时候重新生成，所以我会丢失我的更改吗？

有替代方案吗？

**编辑**

有人建议看这里[https://developer.android.com/tools/projects/index.html](https://developer.android.com/tools/projects/index.html)

哪个国家

> project.properties 该文件包含项目设置，例如构建目标。该文件是项目的组成部分，因此请将其保存在源代码修订控制系统中。要在 Eclipse 中编辑项目属性，请右键单击项目文件夹并选择 Properties。

但我发现没有关于在 eclipse 中编辑属性的参考

有任何想法吗？

谷歌似乎认为你应该能够做到

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T08:04:17.410

请查看[此](https://developer.android.com/tools/projects/index.html)信息。应该使用 eclipse 编辑 project.properties 文件。选择项目-> 属性-> Android。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T08:09:55.417

您可以**继续将内容保存在您****PC**上的`project.properties`某个位置，然后随意使用它。 如果您在**编辑**后发现问题，您总是可以继续用保存的文件**重新放置**它并清理一次项目。 它总会解决你的问题。

# iphone - UIBarButtonItem - 无效的点击发光大小

> ID：11626547
> 
> 赞同：1
> 
> 时间：2012-07-24T07:59:15.127
> 
> 标签：iphone, ios, uitoolbar, tap

当按下 UIToolbar 控件中的 UIBarButtonItem 时，我遇到了一个奇怪的发光问题。当我将`ImageInsets`属性设置`4,0,0,0`为发光时，每次点击它都会变小。这是一个插图：

![点击发光问题](../Images/4a588d502bb9e2cdd49e34672d0d5632.png)

如果我不设置 imageInsets，问题就不会出现。UIToolbar 中的所有按钮都会出现问题。我没有水龙头处理程序。制作更大的插图（例如 8,0,0,0）更快地产生相同的结果。

我很感激有关如何解决问题的任何建议。

编辑：将代码更改为 Objective-C，因为在没有 MonoTouch 的情况下也会重现问题。

这是默认的单视图项目。我使用情节提要设计器在其中添加了一个工具栏和一个 UIBarButtonItem。为按钮创建了一个出口。

```
#import "ViewController.h"

@implementation ViewController
@synthesize testBtn;

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];

    UIEdgeInsets insets = UIEdgeInsetsMake(8, 0, 0, 0);
    [testBtn setImageInsets:insets];
}

- (void)viewDidUnload
{
    [self setTestBtn:nil];
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:06:19.647

It is hard to see what the problem is without code. Would you mind posting the relevant parts of your code up? I am thinking it has something to do with you repeatedly incrementing the top inset by 4... I will edit my answer once I see the relevant code.

EDIT: So I am not familiar with Monotouch... and from the code you pasted I am assuming the constructor does indeed get called once. I am thinking there may be a bug in the Monotouch framework which is causing the imageinsets to be shifted by the specified amount (down 4) every time the button is tapped. I would check in the following order:

1.  That the delegate method tied to the button is not pointing to the constructor.
2.  Change the inset to (8,0,0,0) and in 5 taps do you see the same image as above (10x). If so it may be an issue with the monotouch framework or with how you hooked up your delegate method.

Sorry but I am unfamiliar with monotouch so I can't provide much more assistance. Unless you are locked into using Monotouch, I would strongly recommend you learn native Objective-C and program natively to avoid small pitfalls and headaches such as this. Objective-C and the iOS SDK is pretty elegant.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T06:53:47.247

最后，我要求设计师调整图像大小，从而摆脱 imageSize 属性的使用。

# php - Doctrine2 简单关系

> ID：11626553
> 
> 赞同：0
> 
> 时间：2012-07-24T07:59:29.830
> 
> 标签：php, doctrine, doctrine-orm, associations, fixtures

我认为我在教义关系映射方面遗漏了一些明显的东西。

我有两个模型，Microsite 和 Page（一对多，页面只属于一个站点）。

```
/*
 ...

 * @ORM\Table()
 * @ORM\Entity(repositoryClass="EP\PreReg\DataBundle\Entity\MicrositeRepository")
 */
class Microsite
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    ...

    /**
     * @ORM\OneToMany(targetEntity="Page", mappedBy="site")
     */
    private $pages;

    public function __construct() {
        $this->pages = new \Doctrine\Common\Collections\ArrayCollection();
    }

    public function getPages() {
        return $this->pages;
    }

    public function addPage($page) {
        $this->pages[] = $page;
    } 
```

```
/*
 * @ORM\Table()
 * @ORM\Entity
 */
class Page
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string $title
     *
     * @ORM\Column(name="title", type="string", length=255)
     */
    private $title;

    /**
     * @var string $slug
     *
     * @ORM\Column(name="slug", type="string", length=100)
     */
    private $slug;

    /**
     * @ORM\ManyToOne(targetEntity="Microsite", inversedBy="pages")
     */
    private $site; 
```

架构看起来不错：

```
CREATE TABLE Page (id INT AUTO_INCREMENT NOT NULL, site_id INT DEFAULT NULL, title VARCHAR(255) NOT NULL, slug VARCHAR(100) NOT NULL, INDEX IDX_B438191EF6BD1646 (site_id), PRIMARY KEY(id)) ENGINE = InnoDB;

CREATE TABLE Microsite (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(255) NOT NULL, shortCode VARCHAR(20) NOT NULL, subdomain VARCHAR(100) NOT NULL, PRIMARY KEY(id)) ENGINE = InnoDB;

ALTER TABLE Page ADD CONSTRAINT FK_B438191EF6BD1646 FOREIGN KEY (site_id) REFERENCES Microsite(id) 
```

但我无法正确加载固定装置（我让它们工作，但即使那样我也无法获得每个站点的相关页面。

我的问题是：这些注释是否正确，如何正确添加数据并从给定站点检索页面？

固定装置是：

```
class LoadMicrositeData implements FixtureInterface
{
    public function load(ObjectManager $manager)
    {

        $site = new Microsite();
        $site->setName('Microsite Name');
        $site->setShortCode('MIC');
        $site->setSubdomain('micro');

        $homepage = new Page();
        $homepage->setSlug('/');
        $homepage->setTitle('Welcome');

        $site->addPage($homepage);

        $manager->persist($site);
        $manager->persist($homepage);

        $manager->flush();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:34:48.467

您需要`$site`在`Page`. 我建议您将页面的创建委托给微型站点：

```
class Microsite
{
    // ...

    public function addPage() {
        $page = new Page($this);
        $this->pages->add($page);
        return $page;
    }
}

class Page
{
    // ...

    public function __construct(Microsite $site) {
        $this->site = $site;
    }
} 
```

然后你可以这样使用它：

```
$site = new Microsite();
$site->setName('Microsite Name');
$site->setShortCode('MIC');
$site->setSubdomain('micro');

$homepage = $site->addPage();
$homepage->setSlug('/');
$homepage->setTitle('Welcome'); 
```

# zend-framework - Zend_Locale 之谜

> ID：11626555
> 
> 赞同：0
> 
> 时间：2012-07-24T07:59:33.103
> 
> 标签：zend-framework, zend-locale

在我的 application.ini

```
resources.locale.default = "en_EN" 
```

在我的 Bootrstrap.php

```
protected function _initLocaleRegistry()
{
    $locale = new Zend_Locale('en_EN');
    Zend_Locale::setDefault('en_EN');
    Zend_Registry::set('Zend_Locale', $locale);
} 
```

但是如果在我的简单视图中插入此代码：

```
/**@var $locale Zend_Locale **/
$locale = Zend_Registry::get('Zend_Locale');
echo $locale->getLanguage(); 
```

输出是：**它**

怎么可能？它关了？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:12:42.747

我通过插入更改所以 application.ini 解决了它

```
; locale stuff
resources.locale.default = "en_US"
resources.locale.force = true 
```

# c# - 在 linq 中选择、分组以及最大查询

> ID：11626557
> 
> 赞同：-2
> 
> 时间：2012-07-24T07:59:38.803
> 
> 标签：c#, linq, datatable

我不太了解 linq，你能帮我解决这个问题吗？

```
 SELECT   *
  FROM   attachment
 WHERE   create_date IN (  SELECT   MAX (create_date)
                             FROM   attachment
                         GROUP BY   document_id, attachment_type) 
```

如何将其更改为 linq 语句。我正在使用数据表。

抱歉，我的 DataTable 具有字段 attachment_id、document_id、attachment_type 和 create_date。而且我真的不能使用 dt.Select() :(

而且我还需要将其更改回 DataTable 或 Datarow

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:17:07.383

尽管您的问题不是很清楚，但我认为这就是您要查找的内容：

```
var orderedDocGroups = tbl.AsEnumerable()
.GroupBy(r => new
{
    DocID = r.Field<int>("document_id"),
    AttID = r.Field<int>("attachment_type"),
})
.Select(group => new{
    DocID = group.Key.DocID,
    AttID = group.Key.AttID,
    MaxCreationDateRow = group
        .OrderByDescending(r => r.Field<DateTime>("create_date"))
        .First()
}).OrderByDescending(x => x.MaxCreationDateRow.Field<DateTime>("create_date"));

foreach(var docGroup in orderedDocGroups)
{
    var docInfo = string.Join(", ", string.Format("document_id:{0} attachment_type:{1} create_date:{2}",
                    docGroup.DocID, docGroup.AttID, docGroup.MaxCreationDateRow.Field<DateTime>("create_date")));
    Console.WriteLine(docInfo);
} 
```

> 如何将其更改回数据行？

```
// convert back to a DataTable only with the rows with max creationdate per group:
DataTable tblMaxCreationDate = orderedDocGroups
    .Select(g => g.MaxCreationDateRow)
    .CopyToDataTable(); 
```

这是测试上述内容的示例代码：

```
var tbl = new DataTable();
tbl.Columns.Add("attachment_id",typeof(Int32));
tbl.Columns.Add("document_id",typeof(Int32));
tbl.Columns.Add("attachment_type",typeof(Int32));
tbl.Columns.Add("create_date",typeof(DateTime));

var rnd = new Random();
for(int i=0; i < 10; i++)
{
    tbl.Rows.Add(i, rnd.Next(1, 5), rnd.Next(1, 3), new DateTime(2012, 07, 24, rnd.Next(1, 24), 0, 0));
} 
```

# jquery - jQuery 更改事件

> ID：11626563
> 
> 赞同：1
> 
> 时间：2012-07-24T08:00:08.097
> 
> 标签：jquery, onchange

我有一系列输入字段，并且只要当前字段的文本发生更改，我希望焦点跳转到下一个字段。我的代码如下所示：

```
inputs.change(function(){
            $(this).nextAll('input:first').focus();
        }) 
```

jsfiddle：http: [//jsfiddle.net/x6aqt/1/](http://jsfiddle.net/x6aqt/1/)

问题是脚本似乎触发了 on blur 事件而不是 on change 事件，这违背了目的。有没有按预期工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:06:48.383

```
$("input").keyup(function(){
          if(this.defaultValue!=$(this).val()&&$(this).val()!='')
            $(this).nextAll('input:first').focus();
        }) 
```

**[工作演示](http://jsfiddle.net/x6aqt/5/)**

# php - How to display the stored image data(mediumblob) along with other data in a .php page

> ID：11626571
> 
> 赞同：0
> 
> 时间：2012-07-24T08:00:50.133
> 
> 标签：php, mysql

I have some data stored in a MySQL database. How to display the stored image data(mediumblob) along with other data in a .php page.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:17:29.677

```
<?php
$db = new mysqli('host', 'user', 'pass', 'db'); //Connect to the DB
$res = $db->query('SELECT * FROM `table`'); //Query the DB

while($i = $res->fetch_object()) { //Loop through the images in the DB
    echo '<img src="data:image/jpeg;base64,',base64_encode($i->image),'" /><br />'; //Print out each image in the DB  as a base64 encoded string
}
?> 
```

您需要将`image/jpeg`部件更改为图像的任何格式。此外，最好将图像存储在数据库之外，并将图像的路径存储在数据库中（如 asprin 所说）。

# objective-c - UIWebView as view for footer in section for tableview. Strange Crash - crash log attached

> ID：11626572
> 
> 赞同：3
> 
> 时间：2012-07-24T08:00:51.437
> 
> 标签：objective-c, ios, uiwebview, uitableview

I have a uitableviewcontroller and im loading a uiwebview as viewForFooterInSection for the tableview

This webview has some html content being loaded. The app crashes whenever I try to do

```
[self.tableView beginUpdates];
    [self.tableView reloadSections:[NSIndexSet indexSetWithIndex:indexPath.section] withRowAnimation:UITableViewRowAnimationTop];
    [self.tableView endUpdates]; 
```

Crash log attached

```
Incident Identifier: DA08DEDA-3566-4A56-938A-57F4BCDF64F1
CrashReporter Key:   ef8a5122f6b5431e4b29802596ec279644f97bd4
Hardware Model:      iPod4,1
Process:         sample [955]
Path:            /var/mobile/Applications/A0B6D2C6-AA93-4D24-9C7F-666B8C7F94B4/sample.app/sample
Identifier:      sample
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-07-24 13:07:10.396 +0530
OS Version:      iPhone OS 4.3.5 (8L1)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGBUS)
Exception Codes: KERN_PROTECTION_FAILURE at 0x0000000c
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   WebCore                         0x35fbc900 WebCore::TileCache::doLayoutTiles() + 24
1   WebCore                         0x3609bed8 -[TileHostLayer renderInContext:] + 28
2   QuartzCore                      0x336cc948 -[CALayer _renderSublayersInContext:] + 220
3   QuartzCore                      0x336cbada -[CALayer renderInContext:] + 1086
4   QuartzCore                      0x336cc948 -[CALayer _renderSublayersInContext:] + 220
5   QuartzCore                      0x336cbada -[CALayer renderInContext:] + 1086
6   QuartzCore                      0x336cc948 -[CALayer _renderSublayersInContext:] + 220
7   QuartzCore                      0x336cbada -[CALayer renderInContext:] + 1086
8   QuartzCore                      0x336cc948 -[CALayer _renderSublayersInContext:] + 220
9   QuartzCore                      0x336cbada -[CALayer renderInContext:] + 1086
10  QuartzCore                      0x336cc948 -[CALayer _renderSublayersInContext:] + 220
11  QuartzCore                      0x336cbada -[CALayer renderInContext:] + 1086
12  UIKit                           0x35b6b2dc -[_UITableViewUpdateSupport(Private) _imageViewForView:] + 68
13  UIKit                           0x35b6a66a -[_UITableViewUpdateSupport(Private) _setupDeleteAnimationForFooterInSection:withTargetRect:forUpdateItem:] + 370
14  UIKit                           0x35a7f91a -[_UITableViewUpdateSupport(Private) _setupAnimationsForDeletedHeadersAndFooters] + 1862
15  UIKit                           0x35a78be6 -[_UITableViewUpdateSupport initWithTableView:updateItems:oldRowData:newRowData:oldRowRange:newRowRange:context:] + 398
16  UIKit                           0x35a77dba -[UITableView(_UITableViewPrivate) _updateWithItems:withOldRowData:oldRowRange:newRowRange:context:] + 966
17  UIKit                           0x35a7746c -[UITableView(_UITableViewPrivate) _endCellAnimationsWithContext:] + 4744
18  UIKit                           0x35a812f2 -[UITableView endUpdatesWithContext:] + 22
19  UIKit                           0x35a812ce -[UITableView endUpdates] + 10
20  sample                      0x00007574 -[TableViewController tableView:didSelectRowAtIndexPath:] (TableViewController.m:188)
21  UIKit                           0x3599c514 -[UITableView _selectRowAtIndexPath:animated:scrollPosition:notifyDelegate:] + 656
22  UIKit                           0x35a000e4 -[UITableView _userSelectRowAtPendingSelectionIndexPath:] + 124
23  Foundation                      0x307ee6ce __NSFireDelayedPerform + 362
24  CoreFoundation                  0x34e69a40 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 8
25  CoreFoundation                  0x34e6bec4 __CFRunLoopDoTimer + 844
26  CoreFoundation                  0x34e6c83e __CFRunLoopRun + 1082
27  CoreFoundation                  0x34dfcebc CFRunLoopRunSpecific + 224
28  CoreFoundation                  0x34dfcdc4 CFRunLoopRunInMode + 52
29  GraphicsServices                0x30de0418 GSEventRunModal + 108
30  GraphicsServices                0x30de04c4 GSEventRun + 56
31  UIKit                           0x35976d62 -[UIApplication _run] + 398
32  UIKit                           0x35974800 UIApplicationMain + 664
33  sample                      0x000024ac main (main.m:16)
34  sample                      0x00002440 start + 32

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x36906fbc kevent + 24
1   libdispatch.dylib               0x36aa5032 _dispatch_mgr_invoke + 706
2   libdispatch.dylib               0x36aa603a _dispatch_queue_invoke + 86
3   libdispatch.dylib               0x36aa55ea _dispatch_worker_thread2 + 186
4   libsystem_c.dylib               0x3663558a _pthread_wqthread + 258
5   libsystem_c.dylib               0x36635bbc start_wqthread + 0

Thread 2 name:  WebThread
Thread 2:
0   libsystem_kernel.dylib          0x36903c00 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x36903758 mach_msg + 44
2   CoreFoundation                  0x34e6a2b8 __CFRunLoopServiceMachPort + 88
3   CoreFoundation                  0x34e6c562 __CFRunLoopRun + 350
4   CoreFoundation                  0x34dfcebc CFRunLoopRunSpecific + 224
5   CoreFoundation                  0x34dfcdc4 CFRunLoopRunInMode + 52
6   WebCore                         0x35f1a27e _ZL12RunWebThreadPv + 382
7   libsystem_c.dylib               0x3663430a _pthread_start + 242
8   libsystem_c.dylib               0x36635bb4 thread_start + 0

Thread 3:
0   libsystem_kernel.dylib          0x36903c00 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x36903758 mach_msg + 44
2   CoreFoundation                  0x34e6a2b8 __CFRunLoopServiceMachPort + 88
3   CoreFoundation                  0x34e6c562 __CFRunLoopRun + 350
4   CoreFoundation                  0x34dfcebc CFRunLoopRunSpecific + 224
5   CoreFoundation                  0x34dfcdc4 CFRunLoopRunInMode + 52
6   Foundation                      0x307937f6 +[NSURLConnection(NSURLConnectionReallyInternal) _resourceLoadLoop:] + 206
7   Foundation                      0x30786382 -[NSThread main] + 38
8   Foundation                      0x307f85c6 __NSThread__main__ + 966
9   libsystem_c.dylib               0x3663430a _pthread_start + 242
10  libsystem_c.dylib               0x36635bb4 thread_start + 0

Thread 4 name:  com.apple.CFSocket.private
Thread 4:
0   libsystem_kernel.dylib          0x36905c60 __select + 20
1   CoreFoundation                  0x34e6f8f2 __CFSocketManager + 582
2   libsystem_c.dylib               0x3663430a _pthread_start + 242
3   libsystem_c.dylib               0x36635bb4 thread_start + 0

Thread 5:
0   libsystem_kernel.dylib          0x369063ec __workq_kernreturn + 8
1   libsystem_c.dylib               0x366356d8 _pthread_wqthread + 592
2   libsystem_c.dylib               0x36635bbc start_wqthread + 0

Thread 0 crashed with ARM Thread State:
    r0: 0x00000000    r1: 0x3ef7c298      r2: 0x00562ab2      r3: 0x00000000
    r4: 0x001f8c70    r5: 0x00164f80      r6: 0x2fdfd718      r7: 0x2fdfd68c
    r8: 0x2fdfd6e8    r9: 0x001fc0a0     r10: 0x001f8c70     r11: 0x00164f80
    ip: 0x3f05e428    sp: 0x2fdfd5f4      lr: 0x3609bedf      pc: 0x35fbc900
  cpsr: 0x60000030 
```

# **UPDATE 1:**

Ive digged deeper into this and it seems to be some bug with apple unless I've missed something obvious

I tried creating a fresh Master Detail iphone app and added a UIWebView property in the MasterViewController(UITableViewController) and initialized it

```
@interface MasterViewController () {
    NSMutableArray *_objects;
}

@property(nonatomic, strong) UIWebView *webView;

@end

@implementation MasterViewController

@synthesize detailViewController = _detailViewController;
@synthesize webView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = NSLocalizedString(@"Master", @"Master");
        webView = [[UIWebView alloc] initWithFrame:CGRectMake(0.0, 0.0, 320.0, 50.0)];
    }
    return self;
} 
```

now I have set this webview as the view for footer for the section in the tableview

```
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section {
    return webView;
}

- (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section {
    return 50.0;
} 
```

and in the didSelectRowAtIndexPath I have done the following

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self.tableView beginUpdates];
    [self.tableView reloadSections:[NSIndexSet indexSetWithIndex:indexPath.section] withRowAnimation:UITableViewRowAnimationTop];
    [self.tableView endUpdates];
} 
```

Now whenever I touch a row I get the same crash and I have no Idea why this is happening.

This is a totally fresh app with default code in it. I have only added the webView as the footer for the tableview.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:03:52.443

这很令人费解。你会尝试删除开始/结束更新：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
   [self.tableView reloadSections:[NSIndexSet indexSetWithIndex:indexPath.section] withRowAnimation:UITableViewRowAnimationTop];
} 
```

我看到崩溃发生在`endUpdates`，所以到目前为止执行的所有其余部分都完美无缺。

您可能会尝试的另一件事是通过调用重新加载整个表，`reloadData`而不是仅通过`reloadSections`. 这没有优化，但是由于您的行数很少，因此实际上并不重要（如果效果更好）...

旧答案：

似乎您的表视图中的一个对象正在被释放，然后再次被访问。这是一个典型的“僵尸”问题。

您可以通过在 Xcode 中启用僵尸检测来了解正在发生的事情。

[在这里您可以了解如何启用僵尸](https://stackoverflow.com/questions/5386160/how-to-enable-nszombie-in-xcode)。

如果您这样做了，那么您在控制台日志中收到的错误消息将提供更多关于哪个对象被过早释放的信息。

我了解到您附上了崩溃日志，因为崩溃发生在现场。在这种情况下，你有两个选择：要么在你身边重现问题（并在僵尸检测的帮助下修复它）；要么 或仔细检查您的内存管理以找出表格视图中显示的对象的任何问题。

# c++ - Linderdaum 引擎中奇怪的多个类名

> ID：11626575
> 
> 赞同：3
> 
> 时间：2012-07-24T08:00:57.450
> 
> 标签：c++, class, linderdaum

我正在尝试使用 Linderdaum 引擎，发现有许多奇怪的声明，例如：

类 scriptfinal netexportable ClassName: public iObject

这些奇怪的名字`scriptfinal`和`netexportable`宏。但是它们被定义为空的。为什么有人需要这种定义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T09:46:37.453

它们是空的，因此 C++ 编译器不会关心它们。

Linderdaum 引擎对 C++ 源进行预处理，以生成有关类的元信息。

这些宏最有可能被它们的预处理器用来为它们的脚本语言 ( `scriptfinal`) 和 .NET 序列化代码 ( `netexportable`) 生成信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T08:04:46.910

例如，有人可能将 scriptfinal 宏设置为：

```
#define scriptfinal __declspec(dllimport) 
```

要得到：

```
class __declspec(dllimport) ClassName: public iObject {}; 
```

由于 __declspec 是 Microsoft 特定的扩展，因此它通常用于可移植代码中的宏扩展。在为 Linux 环境编译时，宏是空的，因此`__declspec`对编译器不可见，在 Windows 下它们将按上述定义。

# jasper-reports - 汇总带子报表仅显示最后一个值

> ID：11626577
> 
> 赞同：2
> 
> 时间：2012-07-24T08:01:07.147
> 
> 标签：jasper-reports, ireport, subreport

我正在报告的详细信息带中显示字符串值列表，它工作正常。我想**在摘要带中绘制 5 个图表**。我尝试在汇总带中获取所有值并生成报告，但**汇总带高度有限**。所以我在那个空间里只画了三张图。**我移至子报告以绘制所有 5 个图表**。我通过参数映射将值传递给子报表。我得到了所有 5 个图表，但**图表是使用传递给 subreport 的最后一个值绘制的**。我想用传递给它的所有值来绘制图表。这个怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:49:34.607

尝试使用与您在主报告中使用的数据源相同的数据源。应该可以正常工作。

您可以使用子报表数据源表达式中的属性 $P{REPORT_DATA_SOURCE} 来实现此目的，但也不要忘记设置连接类型。

# entity - 自定义实体的动态 crm 联系人全名

> ID：11626581
> 
> 赞同：0
> 
> 时间：2012-07-24T08:01:24.120
> 
> 标签：entity, crm, contact, microsoft-dynamics

我使用动态 CRM 2011。

我看了一下名为contact的实体。

该实体有一个自动填充的全名主字段。在创建新联系人时，该字段对 crm 用户不可见。

我想知道如何使用自定义实体实现相同的目标？

我是否使用工作流来更新主键字段并向 crm 用户隐藏该字段？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:01:41.450

这将是一种（也是最简单的）方法，在相关字段的创建和更新上坚持一个工作流程——尽管用户必须等待几分钟才能看到更改。

如果您希望字段同步更新，其他选项可以是插件，或者您可以使用 JavaScript 在保存记录之前显示字段。

您可以在这里使用 AutoNumber 插件，CodePlex 上有一个（我自己没有使用过）：[http ://crm2011autonumber.codeplex.com/](http://crm2011autonumber.codeplex.com/)

# java - 全天 9 位唯一 ID

> ID：11626582
> 
> 赞同：3
> 
> 时间：2012-07-24T08:01:26.197
> 
> 标签：java, uniqueidentifier

有一个令人费解的要求。

基本上我需要用这些标准创建唯一的 id

*   9位数字，当天唯一（表示第二天再次出现该数字即可）
*   实时生成；仅限 java （意味着没有从数据库生成序列号 - 实际上根本没有数据库访问权限）
*   生成该数字以填充 requestID，每天将生成大约 1.000.000 个 id。
*   不应使用 UUID 或 UID（超过 9 位）

这是我的考虑：

*   使用序列号听起来不错，但万一 JVM 重启，requestId 可能会重新生成。
*   使用时间 HHmmssSSS（时分秒毫秒）有 2 个问题：

> 一种。服务器管理员可能会更改系统时间。
> 湾。如果在同一毫秒内询问 2 个请求，可能会导致问题。

任何的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T08:09:56.300

> 没有从数据库生成序列号

我讨厌这样愚蠢的要求。[我说你作弊并使用像H2](http://www.h2database.com/html/main.html)或[HSQLDB](http://hsqldb.org)这样的嵌入式数据库，并通过序列生成标识符。

**编辑：**让我扩展一下为什么我提出这个“作弊”：我对“无数据库”要求的理解是不应该安装任何数据库软件来处理这个要求，或者现有的数据库模式不能改变。使用嵌入式数据库与将新的 jar 文件添加到项目中是一样的。为什么你不应该这样做？当关系数据库已经为您解决了这个问题时，为什么还要自己实现一些东西呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T08:18:06.230

处理 1,000,000 个 ID 的九位数字为我们提供了三位数字（我们需要其他六位数字作为 0-999999 的 ID）。

我假设您有一个多服务器设置。为每个服务器分配一个三位数的服务器 ID，然后您可以在每个服务器内分配唯一的 ID 值，而不必担心它们之间的重叠。它可以只是内存中不断增加的值，除了在 JVM 重新启动后仍然存在，我们需要将最近分配的值回显到磁盘（嗯，到任何你想要存储它的地方——本地磁盘、内存缓存等等）。

为了确保您不会在每个请求上遇到文件/任何 I/O 的开销，您在块中分配 ID，将块的端点回显到存储。

所以它最终是：

*   给每个服务器一个 ID
*   在服务器上存储当天最后分配的值（例如文件）
*   让 ID 分配器在块中工作（一次 10 个 ID，100 个，等等）
*   分配块：
    *   读取文件，写回一个由你的块大小增加的数字
*   使用块中的 ID
*   ID 将是，例如 12000000027 表示服务器 #12 分配的第 28 个 ID
*   当一天改变时（例如，午夜），扔掉你当前的块并为新的一天分配一个新的块

在**伪代码**中：

```
class IDAllocator {
    Storage storage;
    int     nextId;
    int     idCount;
    int     blockSize;
    long    lastIdTime;

    /**
     * Creates an IDAllocator with the given server ID, backing storage,
     * and block size.
     *
     * @param   serverId        the ID of the server (e.g., 12)
     * @param   s               the backing storage to use
     * @param   size            the block size to use
     * @throws  SomeException   if something goes wrong
     */
    IDAllocator(int serverId, Storage s, int size)
    throws SomeException {

        // Remember our info
        this.serverId = serverId * 1000000; // Add a million to make life easy
        this.storage = s;
        this.nextId = 0;
        this.idCount = 0;
        this.blockSize = bs;
        this.lastIdTime = this.getDayMilliseconds();

        // Get the first block. If you like and depending on
        // what container this code is running in, you could
        // spin this out to a separate thread.
        this.getBlock();
    }

    public synchronized int getNextId()
    throws SomeException {
        int id;

        // If we're out of IDs, or if the day has changed, get a new block
        if (idCount == 0 || this.lastIdTime < this.getDayMilliseconds()) {
            this.getBlock();
        }

        // Alloc from the block    
        id = this.nextId;
        --this.idCount;
        ++this.nextId;

        // If you wanted (and depending on what container this
        // code is running in), you could proactively retrieve
        // the next block here if you were getting low...

        // Return the ID
        return id + this.serverId;
    }

    protected long getDayMilliseconds() {
        return System.currentTimeMillis() % 86400000;
    }

    protected void getBlock()
    throws SomeException {
        int id;

        synchronized (this) {
            synchronized (this.storage.syncRoot()) {
                id = this.storage.readIntFromStorage();
                this.storage.writeIntToStroage(id + blocksize);
            }

            this.nextId = id;
            this.idCount = blocksize;
        }
    }
} 
```

...但同样，这是伪代码，您可能希望在其中投入一些主动的东西，这样您就不会在需要 ID 时阻塞 I/O 等待 ID。

以上是假设您已经拥有某种应用程序范围的单例，并且该`IDAllocator`实例只是该单个实例中的数据成员。如果没有，您可以轻松地将上述设置为单例，方法是为其提供经典`getInstance`方法并让它从环境中读取其配置，而不是将其作为构造函数的参数接收。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T10:25:35.970

服务器 1 从 1 计数到 999.999.999 怎么样？服务器 2 从 -999.999.999 计数到 -1 怎么样。

我猜由于负载平衡，平衡将是大约 50:50。因此，您为每个服务器获得了相同的 id 范围。此外，您将最后生成的 id 存储在文件系统上。由于性能问题，只需存储每 1000 个值（或 10000 个，这并不重要）。重新启动您的应用程序后，读取最后生成的值并添加 1000。我想这会起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T08:13:15.670

您可以尝试 Apache 的[RandomStringUtils](http://commons.apache.org/lang/api-2.3/org/apache/commons/lang/RandomStringUtils.html) [String random(int count, boolean letters, boolean numbers)](http://commons.apache.org/lang/api-2.3/org/apache/commons/lang/RandomStringUtils.html#random%28int,%20boolean,%20boolean%29)或尝试使用[Java TRNG 客户端库](http://sourceforge.net/projects/trng-random-org/)，该库又使用 RANDOM.ORG：

> 该库提供与 Java 安全 API 集成的 SecureRandom 服务，用于访问 random.org 和 random.irb.hr（通过大气噪​​声或光子发射产生随机性的真正随机数生成器）。

我认为，如果您获得其中之一并将其与时间戳相结合，您应该得到您所追求的。

# javascript - 不透明度：0 和开始动画到不透明度之间的延迟：Raphael JS 中的 1

> ID：11626589
> 
> 赞同：1
> 
> 时间：2012-07-24T08:01:46.793
> 
> 标签：javascript, raphael

我正在使用 Raphael JS 库，这是我的代码：

```
 var rectangle = paper.rect(0, 0, 5, 5);                        
    rectangle.attr({opacity: 0});
    // I need here a 5 seconds delay, before starting an animation
    rectangle.animate({opacity: 1}, 2000); 
```

我也试过 `rectangle.attr({opacity: 0}).delay(5000);`这个：`rectangle.attr({opacity: 0}, 5000);`，但这些似乎都不起作用。

在执行其他代码之前等待一段时间的最简单方法是什么。如果可能的话，我根本不想使用嵌套函数或 for 循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:12:55.310

使用[Raphael.animation](http://raphaeljs.com/reference.html#Raphael.animation)和[Animation.delay](http://raphaeljs.com/reference.html#Animation.delay)。

```
var anim = Raphael.animation({opacity: 0, opacity: 1}, 1000);
rectangle.animate(anim.delay(5000 /* the delay (ms) */)); 
```

# ajax - Shopify API：通过私有应用导入 JSON 格式的产品列表

> ID：11626592
> 
> 赞同：1
> 
> 时间：2012-07-24T08:01:51.303
> 
> 标签：ajax, json, api, rest, shopify

本质上，我有一个文件，其中包含我想添加到我的 shopify 商店的产品列表，我相当确定它的格式正确，但如果不是，请告诉我要修复什么。我想知道如何通过私人应用程序使用 POST 请求，我可以将这些放到我的商店中。该文件如下所示：

```
{
"product": {
    "title": "TITLE HERE",
    "body_html": "DESCRIPTION HERE",
    "vendor": "VENDOR HERE",
    "product_type": "PRODUCT TYPE HERE",
    "variants": {
        "option1": "Default",
        "price": "PRICE HERE"
    },
    "images": {
        "src": "LINK TO IMAGE HERE"
    }
},
"product": {
    "title": "TITLE HERE",
    "body_html": "DESCRIPTION HERE",
    "vendor": "VENDOR HERE",
    "product_type": "PRODUCT TYPE HERE",
    "variants": {
        "option1": "Default",
        "price": "PRICE HERE"
    },
    "images": {
        "src": "LINK TO IMAGE HERE"
    }
},
"product": {
    "title": "TITLE HERE",
    "body_html": "DESCRIPTION HERE",
    "vendor": "VENDOR HERE",
    "product_type": "PRODUCT TYPE HERE",
    "variants": {
        "option1": "Default",
        "price": "PRICE HERE"
    },
    "images": {
        "src": "LINK TO IMAGE HERE"
    }
}, 
```

等等...这个文件被命名为“products.json”。是否有任何 POST 请求允许我提交此文件，或者我必须以某种方式处理和分解它并使用 PHP 或 Ruby 将其提供给 API ...我花了一天的大部分时间提取所有 500 + 从损坏的 MySQL CMS 备份中取出产品，并在 JSON 中清理它们（使用 PHP 和一些正则表达式），因此非常感谢一个无痛的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:08:58.407

您不能一次提交要创建的多个产品，它们需要单独提交。您已经链接的文档解释了所有可用的 API 端点和数据格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:07:02.400

您可以将这些产品存储在数据库中，并通过从数据库创建连接，您可以通过定义一个数组一次添加多个产品，其值将从数据库中获取。

# sql - Ms-Access GROUP BY、TOP查询

> ID：11626599
> 
> 赞同：1
> 
> 时间：2012-07-24T08:02:15.237
> 
> 标签：sql, group-by, ms-access-2007, limit

我在 .mdb 文件上使用以下查询，结果如下。

```
SELECT tableA.id, tableA.type, tableA.date, SUM(tableA.val) AS total, tableB.SumB
FROM tableA LEFT JOIN tableB ON tableB.id = tableA.id
GROUP BY tableA.id, tableA.type, tableA.date, tableB.SumB ; 
```

结果：

![在此处输入图像描述](../Images/65ded6562ad69b541c1c3e2c9e049ed8.png)

`type`我只需要具有相同和的记录组中的第一条记录`date`。

我会使用`DISTINCT`，但问题是我有一个不同的字段（在这个例子中`id`）。

有什么建议么？

谢谢

PS案例2：

红色记录的 ID 相同，但我们有一个具有不同字符串值的附加列“名称”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T08:04:35.720

使用 id 的 min 并将其从 Group by 子句中删除

```
SELECT min(tableA.id) as id, tableA.type, tableA.date, 
SUM(tableA.val) AS total, tableB.SumB 
FROM tableA LEFT JOIN tableB ON tableB.id = tableA.id 
GROUP BY tableA.type, tableA.date, tableB.SumB ; 
```

# c# - 从类中获取数据后使用枚举

> ID：11626600
> 
> 赞同：1
> 
> 时间：2012-07-24T08:02:15.127
> 
> 标签：c#, class, enums

我是 C# 的初学者，当我遇到这个问题时，我目前正在尝试使用类和数据结构。我想使用提供 char 输入的等级 char 从它的枚举描述中获取 int 输出。欢迎任何帮助。谢谢

```
using System;
namespace dataStorageOfFiveStudents
{
     public class StudentData
     {
          public string name;
          public int rollNo;
          public char grade;
          public float gpa;
     }
    public class Program
    {
        enum grading { A=4, B=3, C=2, D=2, F=0};
        static void Main(string[] args)
        {
            //Data Entry
            StudentData student1 = new StudentData();
            Console.WriteLine("name?");
            student1.name = Console.ReadLine();
            Console.WriteLine("Roll Number?");
            student1.rollNo = Convert.ToInt32(Console.ReadLine());
            Console.WriteLine("Grade");
            student1.grade = Convert.ToChar(Console.ReadLine());
            student1.gpa = (int)grading.student1.grade;
            //Output
            Console.WriteLine("Name =\t" + student1.name);
            Console.WriteLine("Roll No =\t" + student1.rollNo);
            Console.WriteLine("Grade =\t" + student1.grade);
            Console.WriteLine("GPA =\t" + student1.gpa);
            Console.ReadKey();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:06:11.903

You should use [Enum.Parse](http://msdn.microsoft.com/en-us/library/essfb559.aspx) or [Enum.TryParse](http://msdn.microsoft.com/en-us/library/system.enum.tryparse).

```
grading gpa;
if (Enum.TryParse(student1.grade.ToString(), true, out gpa))
{
    student1.gpa = (float)(int)gpa;
    Console.WriteLine("Name =\t" + student1.name);
    Console.WriteLine("Roll No =\t" + student1.rollNo);
    Console.WriteLine("Grade =\t" + student1.grade);
    Console.WriteLine("GPA =\t" + student1.gpa);
}
else
{
    Console.WriteLine("You entered an invalid letter grade");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:32:16.630

You can do it easily with this code

```
student1.gpa = (int)(Enum.Parse(typeof(grading), student1.grade.ToString().ToUpper())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T08:09:34.347

利用`Enum.Parse`

假设：

```
 public class StudenData {
     public string name { get;set; }
     public int rollNo {get;set; }
     public string grade { 
         get { return gpaEnum.ToString(); }
         set { gpaEnum = (grading)Enum.Parse(typeof(grading),value); }
     public gpaEnum { get;set; }
     public int gpa {
         get { return (int)gpaEnum; }
         set { gpaEnum=(grading)value; }
     }
 } 
```

然后

```
 //Data Entry   
    StudentData student1 = new StudentData();   
    Console.WriteLine("name?");   
    student1.name = Console.ReadLine();   
    Console.WriteLine("Roll Number?");   
    student1.rollNo = Convert.ToInt32(Console.ReadLine());   
    Console.WriteLine("Grade");   
    student1.grade = Console.ReadLine();
    //Output   
    Console.WriteLine("Name =\t" + student1.name);   
    Console.WriteLine("Roll No =\t" + student1.rollNo);   
    Console.WriteLine("Grade =\t" + student1.grade);   
    Console.WriteLine("GPA =\t" + student1.gpa); 
    Console.ReadKey(); 
```

编辑---因为数据结构似乎固定为

```
public class StudenData {
     public string name { get;set; }
     public int rollNo {get;set; }
     public char grade { get;set; }
     public float gpa { get;set; }
 } 
```

然后

```
 //Data Entry   
    StudentData student1 = new StudentData();   
    Console.WriteLine("name?");   
    student1.name = Console.ReadLine();   
    Console.WriteLine("Roll Number?");   
    student1.rollNo = Convert.ToInt32(Console.ReadLine());   
    Console.WriteLine("Grade");   
    grading grade = (grading)Enum.Parse(typeof(grading),Console.ReadLine());
    student1.grade = grade.ToString()[0]; // Grab first char of grade.
    student1.gpa = (float)(int)grade;
    //Output   
    Console.WriteLine("Name =\t" + student1.name);   
    Console.WriteLine("Roll No =\t" + student1.rollNo);   
    Console.WriteLine("Grade =\t" + student1.grade);   
    Console.WriteLine("GPA =\t" + student1.gpa); 
    Console.ReadKey(); 
```

此代码没有错误检查，如果您想添加验证检查而不是解析失败的异常，您可以使用 Enum.TryParse

# ruby - 对二维数组进行排序以获得不同的结果，而不会在 ruby 中重复

> ID：11626603
> 
> 赞同：1
> 
> 时间：2012-07-24T08:02:27.583
> 
> 标签：ruby, arrays, distinct, sorting

我有一个二维数组：

```
arr = [
  ["John", 17],
  ["John", 17],
  ["Abe", 14],
  ["Kobian", 18],
  ["Hony", 16],
  ["Mony", 19],
  ["John", 18],
  ["Hari", 15],
] 
```

我想查看独特的结果并按字母顺序排序，以免重复相同的名称。如果名称不同且年龄相同，则选择一个不重复且年龄较小的。

我工作了很多，但没有找到如何解决它...提前感谢您的答案...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T08:05:17.013

```
arr.group_by {|e| e[0] }.map {|k,v| v.min}.sort

=> [["Abe", 14], ["Hari", 15], ["Hony", 16], ["John", 17], ["Kobian", 18], ["Mony", 19]] 
```

并保持不同的年龄：

```
require 'set'
Set.new(arr).sort

=> [["Abe", 14], ["Hari", 15], ["Hony", 16], ["John", 17], ["John", 18], ["Kobian", 18], ["Mony", 19]] 
```

# wpf - 在wpf中绘制多个网格正方形

> ID：11626605
> 
> 赞同：0
> 
> 时间：2012-07-24T08:02:37.013
> 
> 标签：wpf, grid

我有一个网格（30 列和 20 行）。每个正方形里面都有一个画布，例如：

画布名称="canvas1" Grid.Column="1" Grid.Row="1" Style="{StaticResource ResourceKey=ImagePlacement}

我必须复制并粘贴 30x20 的正方形。我怎样才能找到更好的方法？请帮我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:40:21.277

如果需要命名但没有特定顺序，您可以使用`UniformGrid`：

```
<UniformGrid Columns="30" Rows="20">
    <UniformGrid.Resources>
        <Style TargetType="Canvas">
            <Setter Property="Style" Value="{StaticResource ResourceKey=ImagePlacement}" />
        </Style>
    </UniformGrid.Resources>
    <Canvas Name="canvas1" />
    <Canvas Name="canvas2" />
    ...
</UniformGrid> 
```

如果您有物品清单，请使用`ItemsControl`：

```
<ItemsControl ItemsSource="{Binding YourItemsList}">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <UniformGrid Columns="30" Rows="20" />
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <Canvas Style="{StaticResource ResourceKey=ImagePlacement}">
                ... your bounded Content ...
            </Canvas>               
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

# java - Java NIO：从不包含任何数据的 Channel 读取数据。我该如何处理这种情况？

> ID：11626606
> 
> 赞同：0
> 
> 时间：2012-07-24T08:02:39.463
> 
> 标签：java, sockets, nio, socketchannel

Java 代码如下：

```
import java.io.IOException;
import java.net.InetSocketAddress;
import java.nio.ByteBuffer;

import java.nio.channels.SocketChannel;

public class Test {

    public static void main(String[] args) throws IOException {

        SocketChannel channel = SocketChannel.open(new InetSocketAddress(
                "google.com", 80));

        ByteBuffer buffer = ByteBuffer.allocate(1024);

        while ((channel.read(buffer)) != -1) {

            buffer.clear();
        }

        channel.close();
    }
} 
```

这段代码很简单。

但是我没有向 Channel 写入任何数据，因此它不包含任何要读取的数据。

在这种情况下，方法`channel.read()`执行**时间过长**并且不返回任何数据。

我该如何处理这种情况？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T08:13:01.267

***更新：****查看您的示例，您正在连接到 Web 服务器。在你告诉它你想做什么之前，Web 服务器不会响应。例如做一个`GET`请求。*

示例（没有正确的字符编码）：

```
public static void main(String args[]) throws IOException {

    SocketChannel channel = SocketChannel.open(
            new InetSocketAddress("google.com", 80));

    channel.write(ByteBuffer.wrap("GET / HTTP/1.1\r\n\r\n".getBytes()));

    ByteBuffer buffer = ByteBuffer.allocate(1024);
    while ((channel.read(buffer)) != -1) {

        buffer.flip();

        byte[] bytes = new byte[buffer.limit()];
        buffer.get(bytes);
        System.out.print(new String(bytes));

        buffer.clear();
    }

    channel.close();
} 
```

* * *

如果您不希望您`read`的 s 被阻止，则需要将[您的频道配置为 non-blocking](http://docs.oracle.com/javase/6/docs/api/java/nio/channels/spi/AbstractSelectableChannel.html#configureBlocking%28boolean%29)。否则它将坐下来等待数据可用。[您可以在此处](http://onjava.com/pub/a/onjava/2002/10/02/javanio.html?page=4)阅读有关非阻塞 NIO 的更多信息。

```
channel.configureBlocking(false); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T00:52:57.823

这是一种阻塞方法。你期待什么？

您可以在底层套接字上设置读取超时，或者您可以将通道置于非阻塞模式，可能与选择器一起使用。

# linux - How can I write a bash script that pulls all of the http://whatever.com/something out of a file

> ID：11626610
> 
> 赞同：1
> 
> 时间：2012-07-24T08:02:51.233
> 
> 标签：linux, bash, gnu, wget

I am migrating a site in PHP and someone has hardcoded all the links into a function call display image('http://whatever.com/images/xyz.jpg').

I can easily use text mate to convert all of these to [http://whatever.com/images/xyz.jpg](http://whatever.com/images/xyz.jpg).

But what I also need to do is bring the images down with it so for example `wget -i images.txt`.

But I need to write a bash script to compile images.txt with all the links to save me doing this manually because there are a lot!

Any help you can give on this is greatly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:21:03.903

I found a one-liner on [that website](http://scripts-n-codes.blogspot.com/2010/01/bash-extract-links-from-file-and.html) that should work: (replace index.php by your source)

```
wget `cat index.php | grep -P -o 'http:(\.|-|\/|\w)*\.(gif|jpg|png|bmp)'` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:11:52.763

If you `wget` the file via. a web server, will you not get the output from the PHP script? That will contain `img` tags which you can extract using `xml_grep` or some such tool.

# vb.net - 根据名称从 Access 数据库中删除一条记录

> ID：11626612
> 
> 赞同：0
> 
> 时间：2012-07-24T08:02:58.477
> 
> 标签：vb.net, ms-access-2007

带有 VB.net 的数据库访问 2007：

我有数据库名称：示例

表名：测试

列：

```
empname[Primary Key], 
id,
sal 
```

我想根据名称删除记录。例如：我的名字 col 包含 james、rocky、g​​ates 等名字。我想要做的是，如果我按下删除按钮，我应该会弹出消息框要求输入员工姓名，然后输入是否存在 emp 姓名它应该删除它并更新访问数据库，如果找不到 emp 名称，它应该说“不存在此名称的记录”。

第二个问题是：我在 DataGridview 中显示记录，我想修改来自 datagridview 的特定记录，这应该反过来更新访问数据库。

如果我得到这个工作，我会对我有很大的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:39:17.037

在 Access 中创建查询或使用 sql 字符串，如“从测试中删除其中 empname = @p1”。

向用户显示一个表单（或使用 InputBox）以获取名称。

将您从表单/InputBox 中获得的名称放入您的查询/sql 字符串中。

运行查询。

如果您的 DataGridView 绑定到您的表，那么您肯定会免费获得所有这些吗？

# java - 如何自定义 TableComparatorChooser 以响应单击鼠标？

> ID：11626613
> 
> 赞同：0
> 
> 时间：2012-07-24T08:03:03.220
> 
> 标签：java, clickonce, glazedlists

我有一个 GlazedList 表，当我想对列进行排序时，我应该双击。我想将其更改为单击。

**有谁知道该怎么做？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:18:37.667

只需更改`TableComparatorChooser.MULTIPLE_COLUMN_MOUSE`为`TableComparatorChooser.SINGLE_COLUMN`

# c# - 无论屏幕大小或分辨率如何，都将加载指示器 div 定位在位置

> ID：11626614
> 
> 赞同：0
> 
> 时间：2012-07-24T08:03:10.477
> 
> 标签：c#, javascript, html, css, loading

在我的 aspx 页面中，我在一个表格中有 3 个 td，我在其中放置了 div 以显示我的内容。我正在使用 ajax 将数据加载到每个 div.in 中，我在其中显示我的内容 div 我还放置了一个 div 以在数据 div 加载时显示加载指示器。我的问题是在通过具有不同分辨率或屏幕尺寸的不同机器看到加载指示器 div 时定位它。目前我的加载指示器 div 是绝对类型。任何人都可以提出一种优雅的方法来将我的加载指示器 div 定位在三个 td 中，以便无论屏幕尺寸或分辨率如何，它都能正确居中。我正在使用 C# Web 应用程序。

下面是其中一个 td 的标记，

```
<table width="100%" border="0" cellpadding="0" cellspacing="0" class="Box">
                    <tr>
                        <td class="Box_TopLeftCurve">
                            &nbsp;
                        </td>
                        <td valign="top" class="Box_TopRep">
                        </td>
                        <td class="Box_TopRightCurve">
                            &nbsp;
                        </td>
                    </tr>
                    <tr>
                        <td class="Box_LeftRep">
                            &nbsp;
                        </td>
                        <td align="left" valign="top">
                            <div class="Box_GridArea">
                               Data Here
                            </div>
                            <div style="position: absolute; top: 347px; left: 207px; width: 134px;display:none;">
                                Loading Indicator
                            </div>
                        </td>
                        <td class="Box_RightRep">
                            &nbsp;
                        </td>
                    </tr>
                    <tr>
                        <td class="Box_BaseLeftCurve">
                            &nbsp;
                        </td>
                        <td class="Box_BaseRep">
                            &nbsp;
                        </td>
                        <td class="Box_BaseRightCurve">
                            &nbsp;
                        </td>
                    </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:33:44.233

将指示器显示为背景图像，以便轻松以任何分辨率为中心。

```
.loader { background: url('/images/loader.gif') center center no-repeat; } 
```

您可以将背景图像分配给应该出现的表格或 td。

加载后，您可以使用 jQuery 删除加载器类，例如：

```
if (is_loaded) {
  $('table td').removeClass('loader')
} 
```

# android - 果冻豆上没有出现自定义警报对话框

> ID：11626617
> 
> 赞同：0
> 
> 时间：2012-07-24T08:03:14.360
> 
> 标签：android, android-alertdialog, android-4.2-jelly-bean

我在我的应用程序中包含了一个自定义的 AlertDialog。将我的 Galaxy Nexus 更新为 Jelly Bean 后，不再显示对话框。只有屏幕变暗。对话框周围的过程（如加载数据）运行良好。在较旧的操作系统版本上，代码有效（包括 ICS 4.0.4）。

无论对话框是在 AsyncTask 中还是在外部创建和显示，都会出现问题。

有没有人有类似的问题？

这是代码：

```
public class TLProgressDialog extends AlertDialog{

/*Log tag */
@SuppressWarnings("unused")
private static final String TAG = "TLProgressDialog";

@SuppressWarnings("unused")
private Context context;
private AnimationDrawable animation;

protected TLProgressDialog(Context context) {
    super(context);
    this.context = context;
}

public TLProgressDialog(Context context, boolean cancelable,
        OnCancelListener cancelListener) {
    super(context, cancelable, cancelListener);
    this.context = context;
}

public TLProgressDialog(Context context, int theme) {
    super(context, theme);
    this.context = context;
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tlprogressdialog);
    ImageView img = (ImageView)findViewById(R.id.dialog_img);
    img.setBackgroundResource(R.drawable.tlprogress_animation);
    animation = (AnimationDrawable) img.getBackground();
    img.post(new Starter());
}

public static TLProgressDialog show(Context context){
    TLProgressDialog dlg = new TLProgressDialog(context);
    dlg.setCanceledOnTouchOutside(false);
    dlg.setCancelable(false);
    dlg.show();
    return dlg;
}

private class Starter implements Runnable {
    public void run() {
        animation.start();
    }
}
} 
```

xml 布局只是一个承载动画图像的 ImageView：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<ImageView
    android:id="@+id/dialog_img"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"/>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T22:49:19.260

您是否为您的应用取消选中“显示通知”？（在设置/应用程序/和“显示通知”中检查它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T06:42:32.117

我的错，刚刚发现我已经为动画添加了 GIF。这似乎不再起作用了。转换为PNG后，它再次工作。

# php - 使用php解析json之类的数据

> ID：11626619
> 
> 赞同：0
> 
> 时间：2012-07-24T08:03:25.690
> 
> 标签：php, javascript, json, web-crawler

我有一些像数据爬取 URL 的 Json

```
[[["oppl.lr",[,,,,,,,,,,,[[[[[,"A Google User"]
,,,,1]
,3000,,,"Double tree was ok, it wasnt super fancy or anything. Its good for families and  just relaxing by the pool. Service was good, and rooms were kept neat.","a year ago",["http://www.ma..",,1],,"","",""]
]
,["Rooms","Service","Location","Value"]
,[] 
```

使用 php json_decode() 函数是不可能解析的。是否有任何库或其他东西可以让我将其转换为常规 json 以便我的任务更容易？否则我知道我必须写正则表达式。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:25:07.833

根据您的评论。如果您的数据是

`[["oppl.lr",[,,,,,,,,,,,[[,"A Google User"],"",""],""]]]`

如果你能以某种方式将数据发送到客户端。然后它是一个有效的 javascript 数组。您可以处理数据@client 端或使用

`JSON.stringify([["oppl.lr",[,,,,,,,,,,,[[,"A Google User"],"",""],""]]]);`

并将数据发送回服务器

`"[["oppl.lr",[null,null,null,null,null,null,null,null,null,null,null,[[null,"A Google User"],"",""],""]]]"`

否则通过 php 你可以使用这个函数

```
function getValidArray($input) {
   $input = str_replace(",,", ',"",', $input);
   $input = str_replace(",,", ',"",', $input);
   $input = str_replace("[,", '["",', $input);
   return eval("return $input;");
} 
```

您可以根据需要优化上述功能。

# r - 使用 par() 和 text() 将文本添加到空图表

> ID：11626620
> 
> 赞同：0
> 
> 时间：2012-07-24T08:03:27.513
> 
> 标签：r

我想要一个小函数显示给定数据集中每个数字变量的基本数据统计信息。到目前为止，我有以下内容：

```
AnalyzeNumericData <- function(x,GroupVar=NA) {

VarList <- names(x)  
NumVars <- length(VarList)  

for (i in (1:NumVars)) {
     if (is.numeric(x[,VarList[i]])) {
       par(mfrow=c(2,2))
         hist(x[,VarList[i]],main=paste("Histogram of ",VarList[i]),xlab=NA)
         boxplot(x[,VarList[i]],main=paste("Boxplot of ",VarList[i]))
      if (!is.na(GroupVar)) {
        boxplot(x[,VarList[i]]~x[,GroupVar],main=paste("Boxplot of ",VarList[i]," by ", GroupVar))
      }   
        # Add some text to bottom right
        # I've tried plot(1)
        # and then text(1,"MyText"), but this only alows me to put text on one place (in the middle of the plot)
    }
  }
}

AnalyzeNumericData(mtcars,"cyl") 
```

该函数将为每个数值变量创建三个图表。我想在右下角区域添加一些文本而不是第四个图表。我知道 text()，但是我必须先创建类似空图表的东西才能使用它。

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:15:43.687

您可以通过调用获得一个空的绘图区域`plot(..., type="n")`：

```
plot(1:100, type="n", xaxt="n", yaxt="n", bty="n", xlab="", ylab="")
text(x=10, y=10, "foobar") 
```

也许您想调整绘图的不同边距。因此，您也可以使用`par`（例如`par("mar") <- c(0, 0, 0, 0)`，请参阅`?par`详细信息）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T08:24:02.220

```
AnalyzeNumericData <- function(x,GroupVar=NA) {
    VarList <- names(x)
    NumVars <- length(VarList)

    for (i in 1) {
        if (is.numeric(x[,VarList[i]])) {
            par(mfrow=c(2,2))
            hist(x[,VarList[i]],main=paste("Histogram of ",VarList[i]),xlab=NA)
            boxplot(x[,VarList[i]],main=paste("Boxplot of ",VarList[i]))
            if (!is.na(GroupVar)) {
                boxplot(x[,VarList[i]]~x[,GroupVar],main=paste("Boxplot of ",VarList[i]," by ", GroupVar))
            }
            plot(NA,NA,axes=F,xlim=c(0,10),ylim=c(0,10),xlab="",ylab="")
            text(5,5,labels="MyText")
        }
    }
}

AnalyzeNumericData(mtcars,"cyl") 
```

您可以根据 和 更改和`x`来`y`调整`text(x,y,labels="MyText")`文本的位置。`xlim``ylim`

# javascript - 网站主页重定向到空白页面

> ID：11626624
> 
> 赞同：-2
> 
> 时间：2012-07-24T08:03:58.890
> 
> 标签：javascript, html, redirect

我已经开发了一个网站，但是当我通过键入[http://phalkefmcg.com](http://phalkefmcg.com)访问它时，它会重定向到一个空白页面。[但是，如果我访问像http://phalkefmcg.com/about.html](http://phalkefmcg.com/about.html)这样的另一个页面，它就会正常显示。我使用过 Jquery 和 Javascript 代码，但它们都没有任何重定向代码。这是对我网站的攻击吗？我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T08:10:15.470

我已经把问题挖出来了`http://remysharp.com/downloads/jquery.marquee.js`。它说：

```
// you're seeing this because you're hot-link a script that can be pulled from an 
// alternative source.  This script is only activated after a few months of trying
// to get in touch and requesting that you stop hot linking
setTimeout(function () {
  document.open();
  document.write('');
  document.close();
}, 2000);
console.log('Sorry, but you should not hot link files from regular blogs in case they do something like this. Best remove the hot linked files and you will be sorted again.'); 
```

因此，删除链接的 JavaScript 文件。（在第 118 行`index.html`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T08:09:35.877

您的 JS 中有错误。它似乎正在从您的页面中删除所有标记。打开浏览器的开发工具控制台以查看错误。在 Chrome 中看到：

> 抱歉，您不应该从普通博客中热链接文件，以防他们做这样的事情。最好删除热链接文件，您将再次排序。jquery.marquee.js:9
> 
> Uncaught TypeError: Object # has no method 'infiniteCarousel' [http://phalkefmcg.com/:20](http://phalkefmcg.com/:20)
> 
> 未捕获的类型错误：对象 # 没有方法“覆盖”

**注意：**您确实应该在此处发布代码而不是链接。一旦你的页面被修复，这个问题对社区没有任何价值。

# nhibernate - 从NHibernate的一级缓存中删除已删除的项目？或者：如何检查缓存的项目是否已被删除？

> ID：11626635
> 
> 赞同：2
> 
> 时间：2012-07-24T08:04:48.593
> 
> 标签：nhibernate, concurrency, multi-user, first-level-cache

我们有一个棕地多用户应用程序（99% Delphi，1% .net），它使用 NHibernate 来保持 .net 模块的持久性。在我的应用程序中，我可以向某个实体添加类别。如果我选择一个并决定不使用它（从而再次删除类别），我已被 NHibernate 加载，并将留在会话的第一级缓存中。现在，如果其他用户删除此类别并且我尝试保存我的实体，我的应用程序将引发异常，因为加载的对象不再存在。

我的问题：有没有办法检查我的缓存是否加载了不再存在的项目？如果是这样，有没有办法从我的缓存中删除不存在的实体？

那么会发生什么： 我加载了一个实体（添加到会话缓存中） 我添加了一个类别（添加到会话缓存中） 其他人从数据库中删除了该类别。我保存了我的实体并发生异常，因为该类别不再存在。

它仍在会话缓存中。如果我可以（自动）从我的会话缓存中删除它会很好吗？有没有办法清理缓存并删除不再存在的对象？

问候，特德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:00:42.497

NHibernate 中没有自动执行此操作的选项，至少不能使用`ISession`. 您可以`IStatelessSession`用于加载，因为它没有一级缓存，但您将失去许多[其他提供](https://stackoverflow.com/questions/2679636/nhibernate-isession-vs-istatelesssession)的功能`ISession`。

您还可以调用`ISession.Clear()`以清除会话（一级）缓存，或`ISession.Evict()`从会话中逐出某些实体，但这不是自动的。

您将会话对象保留多长时间？也许您需要不同的会话管理[上下文](http://www.nhforge.org/doc/nh/en/index.html#architecture-current-session)。

如果会话的生命周期较短，您仍然可以实现实体缓存，但使用[二级缓存](http://www.nhforge.org/doc/nh/en/index.html#performance-cache)。[SysCache2](http://www.nhforge.org/doc/nh/en/index.html#NHibernate.Caches.SysCache2)是支持. [_](http://www.nhforge.org/doc/nh/en/index.html#caches) [`SqlCacheDependency`](http://msdn.microsoft.com/en-us/library/system.web.caching.sqlcachedependency.aspx)这意味着您可以在数据库中的某些对象更改时设置缓存过期。

# android - AndEngine onCreateScene failed

> ID：11626637
> 
> 赞同：0
> 
> 时间：2012-07-24T08:04:59.060
> 
> 标签：android, andengine

I keep getting errors with andengine. Here is log. Below is the code from the tutorial that gives me errors.

```
E/AndEngine(28075): BaseActivity.onCreateScene failed. @(Thread: 'GLThread 1450')
E/AndEngine(28075): java.lang.NullPointerException
E/AndEngine(28075):     at com.tegracode.prvaigra.BaseActivity.onCreateScene(BaseActivity.java:61)
E/AndEngine(28075):     at org.andengine.ui.activity.SimpleBaseGameActivity.onCreateScene(SimpleBaseGameActivity.java:48)
E/AndEngine(28075):     at org.andengine.ui.activity.BaseGameActivity$3.onCreateResourcesFinished(BaseGameActivity.java:169)
E/AndEngine(28075):     at org.andengine.ui.activity.SimpleBaseGameActivity.onCreateResources(SimpleBaseGameActivity.java:43)
E/AndEngine(28075):     at org.andengine.ui.activity.BaseGameActivity.onCreateGame(BaseGameActivity.java:181)
E/AndEngine(28075):     at org.andengine.ui.activity.BaseGameActivity.onSurfaceCreated(BaseGameActivity.java:110)
E/AndEngine(28075):     at org.andengine.opengl.view.EngineRenderer.onSurfaceCreated(EngineRenderer.java:80)
E/AndEngine(28075):     at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1446)
E/AndEngine(28075):     at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1216)
D/AndEngine(28075): BaseActivity.onSurfaceChanged(Width=800,  Height=480) @(Thread: 'GLThread 1450') 
```

Here is the Code:

```
public class BaseActivity extends SimpleBaseGameActivity  {
    static final int CAMERA_WIDTH = 800;
    static final int CAMERA_HEIGHT = 480;
    public Font mFont;
    public Camera mCamera;
    public Scene mCurrentScene;
    public static BaseActivity instance;

    public EngineOptions onCreateEngineOptions() {
        instance = this;
        mCamera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);

        return new EngineOptions(true, ScreenOrientation.LANDSCAPE_SENSOR, new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), mCamera);
    }

    protected void onCreateResources() {
        mFont = FontFactory.create(this.getFontManager(),this.getTextureManager(), 256, 256,Typeface.create(Typeface.DEFAULT, Typeface.BOLD), 32);
        mFont.load();
    }

    protected Scene onCreateScene() {
        mEngine.registerUpdateHandler(new FPSLogger());

        this.mCurrentScene = new Scene();
        this.mCurrentScene.setBackground(new Background(3f, 6f, 2f));

        return this.mCurrentScene;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:28:47.443

移动这一行：

this.mCurrentScene.setBackground(新背景(3f, 6f, 2f));

到 onPopulateScene 方法。那里的场景应该是非空的。

# asp.net-mvc-3 - ServiceStack：从 ResponseStatus 中删除 StackTrace

> ID：11626640
> 
> 赞同：2
> 
> 时间：2012-07-24T08:05:05.330
> 
> 标签：asp.net-mvc-3, c#-4.0, stack-trace, servicestack

我知道这里也问过同样的问题：[How to remove the stacktrace from the standard ServiceStack error respose](https://stackoverflow.com/questions/8453034/how-to-remove-the-stacktrace-from-the-standard-servicestack-error-respose)

但无论我尝试什么都没关系，即使在远程请求中，我也无法从 ResponseStatus 中删除 StackTrace。

```
SetConfig(new EndpointHostConfig { DebugMode = false, }); 
```

不工作或我无法使其工作。任何建议都可能非常有帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:04:23.390

这确实按预期工作。[这是使它如此的LOC](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/ServiceBase.cs#L228)：

```
if (EndpointHost.UserConfig.DebugMode)
{
    // View stack trace in tests and on the client
    responseStatus.StackTrace = GetRequestErrorBody() + ex;
} 
```

# ruby - MongoDB地理空间查询

> ID：11626644
> 
> 赞同：0
> 
> 时间：2012-07-24T08:05:25.437
> 
> 标签：ruby, mongodb, mongoid

我使用 mongo 的“$near”查询，它按预期工作，为我节省了大量时间。

现在我需要执行一些更复杂的事情。想象一下，我们有一个“签到”集合（让我们使用四方符号），其中包含地理空间信息（没有什么不寻常的：只有纬度和经度）和时间。鉴于两个人的签到，我如何找到他们的“彼此靠近”签到？我的意思是，例如：“1/23/12 你已经离开了 100 米”

最简单的解决方案是选择第一个用户的所有签入，并在框架端为每个第一个用户签入找到最近的签入（我使用 ruby​​）。但它是最有效的解决方案吗？你有更好的想法吗？可能我需要某种特殊的索引吗？

最佳，罗马

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:37:02.463

MongoDB GeoSpatial 索引提供两种类型的查询：$near 和 $within。$near 查询返回数据库中位于请求点特定范围内的所有点，而 $within 查询列出数据库中特定区域（框、圆或任意多边形）内的所有点。

MongoDB 目前不提供一个查询，该查询将返回与另一组点的任何成员在一定距离内的所有点，这似乎是您想要的。

您可以想象使用来自 user1 的点数据来构建描述“感兴趣区域”的多边形，然后使用 $within 查询来查看该区域内是否有其他人签到。如果您在位置和日期上使用复合索引，您甚至可以将查询限制为特定日期在该区域内的人。

参考：

*   [http://docs.mongodb.org/manual/core/indexes/#geospatial-indexes](http://docs.mongodb.org/manual/core/indexes/#geospatial-indexes)
*   [http://docs.mongodb.org/manual/reference/operators/#geospatial](http://docs.mongodb.org/manual/reference/operators/#geospatial)

# ios - iOS - Why is my UIImageView moving?

> ID：11626650
> 
> 赞同：1
> 
> 时间：2012-07-24T08:05:40.947
> 
> 标签：ios, uiimageview

Here is my function for which I draw a metronome image within my iOS program. When I load it, the metronome image is loaded, but "flies" down from the top left of the screen to the desired position. This is not the behavior I wanted - I simply want the image to appear at the desired position. Could someone enlighten me why this happens, and how to fix it? Many thanks in advance.

Pier.

```
- (void) drawMetronomeForBeat: (int) beatNumber withNumberOfBeats:(int) noBeats
{

// remove any previous instances first
if (metronomeImageView) 
{
    [metronomeImageView removeFromSuperview];
}

NSString * imageName = @"metronome";
NSString * noBeatsStr = [NSString stringWithFormat:@"%d", noBeats];
NSString * beatNumberStr = [NSString stringWithFormat:@"%d", beatNumber];
imageName = [imageName stringByAppendingString:noBeatsStr]; 
imageName = [imageName stringByAppendingString:@"b"]; 
imageName = [imageName stringByAppendingString:beatNumberStr]; 

UIImage* image = [UIImage imageNamed: imageName];
UIImageView * symbolImageView = [[UIImageView alloc] initWithImage:image]; 

[symbolImageView setFrame:CGRectMake(410.0f, 215.0f, symbolImageView.frame.size.width, symbolImageView.frame.size.height)];
metronomeImageView = symbolImageView; 
[self.view addSubview:symbolImageView];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:31:57.257

Replace this line

```
[symbolImageView setFrame:CGRectMake(410.0f, 215.0f, symbolImageView.frame.size.width, symbolImageView.frame.size.height)]; 
```

with

```
[symbolImageView setFrame:CGRectMake(410.0f, 215.0f, 22, 22)];  //Change 22, 22 according to size that you need. 
```

The image view will become larger or smaller according to the size of "real image" you are displaying. So it will move some where so that `imageview` will stay center aligned.

**EDIT:**

I think you are setting different frame for symbolImageView.

Try this

```
symbolImageView.frame = metronomeImageView.frame; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T02:40:45.350

我正在使用控制器来显示图像。我重组了我的代码，以便图像总是在视图代码的 drawRect 中“绘制”，就像这样..

```
- (void)drawRect:(CGRect)rect
{  

if (metronomeImage)
{
    [metronomeImage drawInRect:CGRectMake(410.0f, 215.0f, metronomeImage.size.width, metronomeImage.size.height)];
}
} 
```

这没有问题 - 请注意，我只使用了 drawInRect 和 UIImage 而不是 setFrame 和 UIImageView。我想我会遵循约定，任何图形都应该在视图代码中完成，而不是在控制器中完成。

# javascript - IE - "Error: Object doesn't support this action"

> ID：11626653
> 
> 赞同：0
> 
> 时间：2012-07-24T08:05:56.880
> 
> 标签：javascript

I'm getting a frustrating javascript error in IE7 that I can't get around. It is working fine in Chrome and Firefox, but not in IE..

The line I am getting the error in is: `item = listGetAt(list,'1','-');`

This is calling the following custom method:

```
function listGetAt(list,position,delimiter) {   
if(delimiter == null) { delimiter = '-'; }
list = list.split(delimiter);
if(list.length > position) {
    return list[position];
} else {
    return list.length;
}
} 
```

Can anyone see something I can't?

Many thanks in advance for any help.

Jason

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:17:27.040

糟糕的代码

为什么将字符串作为数字参数传递？

我会考虑

```
function listGetAt(list,position,delimiter) {   
  delimiter = delimiter || '-';
  if (list.indexOf(delimiter) ==-1) return -1;
  list = list.split(delimiter);
  return list.length>=position?list[position]:null;
} 
```

# java - How to create XML dynamically (java)?

> ID：11626654
> 
> 赞同：2
> 
> 时间：2012-07-24T08:05:56.697
> 
> 标签：java, xml, list

I'm getting a list in java that contains name of variables and their types. I want to generate xsd from this list, but I understand that I have to create xml before.

so how do I create xml from list in Java?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:11:16.497

关键是将您的列表分成一个类来保存它。完成后，您可以将其转换为 XML 或从 XML 转换。[您可以在此处](http://www.w3schools.com/xml/)阅读有关 XML的更多信息

一个很好的工具是[xstream](https://stackoverflow.com/a/4077731/1255713)：

这是一篇很好的文章，向您展示如何在[此处使用 Xstream](https://stackoverflow.com/a/4077731/1255713)

# php - Average query count for expression engine site

> ID：11626657
> 
> 赞同：0
> 
> 时间：2012-07-24T08:06:09.163
> 
> 标签：php, expressionengine

I just took over development of an existing EE website and am new to the cms and to blog development as well. First thing I noticed was that the site performed really poorly, so I just started doing some profiling using XDebug. I noticed that the query count is around 550\. Is this normal? I know that it all comes down to what kind of queries are being run etc.. but I’m used to much lower numbers using other frameworks, but like I said: I’m new to blog development.

TLDR: What is the average ballpark query count for an EE homepage?

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:35:51.663

在我的 EE2 测试安装中，一个空模板提取了 13 个查询（这些与会话、跟踪、抓取模板等有关）。除此之外，没有“平均”，因为内容的数量可能因站点而异。

550 个查询肯定是古怪的。我的猜测是有多个[embeds](http://expressionengine.com/user_guide/templates/embedding.html)，几个[Channel Entries](http://expressionengine.com/user_guide/modules/channel/channel_entries.html)循环，以及其中的一些[Playa 字段](http://pixelandtonic.com/playa)（Playa 有点像查询怪物）。

我建议打开输出探查器以查看负载来自哪里（*管理 → 系统管理 → 输出和调试*）。

然后，确保您在频道条目和其他标签上使用[标签缓存](http://expressionengine.com/user_guide/general/caching.html#tag_caching)，并考虑查看第三方缓存解决方案，例如[CE Cache](http://www.causingeffect.com/software/expressionengine/ce-cache)。

您还可以禁用一些默认跟踪以保存查询（*管理 → 安全和隐私 → 跟踪首选项*）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T16:35:26.037

我已经建立了大量的 EE 网站，其中 500 个非常疯狂，非常高。使用 Structure/Matrix/Playa/ 的复杂构建，即使非常复杂的页面也只能运行 200-300。当我说“只有”时，我的意思是这仍然太高了。

我确实认为重要的是要在为您的客户使用令人愉快的东西和仍然不是处理器密集型之间找到平衡。如果您为此页面使用单个模板（即该模板不会用于一堆其他条目），您可以打开缓存，这将有很大帮助。

最大的问题是——你在这个页面上做什么？什么样的标签/插件等...可以帮助我们追踪它。

# tfs - Connecting to TFSPreview Programmatically

> ID：11626661
> 
> 赞同：5
> 
> 时间：2012-07-24T08:06:26.517
> 
> 标签：tfs, azure-devops, tfs-sdk

I'm attempting to connect to [TFS Preview](http://tfspreview.com/) from a C# application.

At the moment, I'm stuck trying to authenticate. I've added a reference to the TFS 2010 DLLs (I believe that these will enable me to connect, please correct me if I am wrong!) and my test case is as simple as. The URL I am trying to connect to is in the form `https://MYSERVERNAME.tfspreview.com/DefaultCollection`

```
var teamProjectCollection = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(workPath, new UICredentialsProvider());
teamProjectCollection.EnsureAuthenticated(); 
```

This fails with the following exception.

> Team Foundation services are not available from server [https://MYSERVER.tfspreview.com/](https://MYSERVER.tfspreview.com/)$/defaultcollection. Technical information (for administrator): TF400813: Resource not available for anonymous access. Client authentication required.

I had hoped that providing a `UICredentialsProvider` in the factory method creating the team project collection that it'd use this to provide authentication. The TFS Preview service uses Windows Live authentication, but I had hoped that this would be covered.

Pointers in the right direction greatly appreciated!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:36:56.017

我发现您无法使用 TFS2010 DLL 连接到 TFSPreview，这很可能是因为需要提供 Web 凭据才能访问该站点。

通过添加对 TFS2012 DLL（随 Visual Studio 2012 RC 一起提供`%PROGRAMFILESX86\Microsoft Visual Studio 11.0\Common7\IDE\ReferenceAssemblies\v2.0`）的引用，我能够成功连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T19:18:48.177

下载并安装[Team Foundation Server 2010SP1 的对象模型](http://visualstudiogallery.msdn.microsoft.com/a37e19fb-3052-4fc9-bef7-4a4682069a75)，然后安装[Visual Studio 2010 SP1 Forward Compatibility GDR](http://www.microsoft.com/en-us/download/details.aspx?id=29082)。尽管此安装程序可能看起来仅适用于 Visual Studio 2010，但如果它是独立安装的，它会很高兴地更新您的对象模型安装。

# objective-c - 无法让 UIImagePickerController 工作？

> ID：11626663
> 
> 赞同：0
> 
> 时间：2012-07-24T08:06:30.917
> 
> 标签：objective-c, ios5, uiimagepickercontroller

```
-(void) openPhotoLib:(id)sender {
    [self dismissModalViewControllerAnimated:YES];
    UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
    [imagePicker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
    [imagePicker setDelegate:self];
    [self presentModalViewController:imagePicker animated:YES];
    NSLog(@"openPhotoLib called");
} 
```

尽管我的视图控制器是 UINavigationController 和 UIImagePickerDelegate 的子类，但除了 NSLog 之外什么都没有发生。有没有人对 UIImagePickerController 有任何见解或经验？

我应该注意，我主要使用 iPhone 进行测试。

**解决方案：创建一个仅继承 UINavigationBarDelegate 和 UIImagePickerDelegate 的新类。在该类的 viewDidAppear 中，放置代码以模态显示 imagePicker。在方法中创建此类的实例（在另一个类中，导入 .h 文件和所有文件）并以模态方式呈现该类。**

^ 我收回。模态动画是真正的问题。尝试为此使用另一个类实例会弄乱 UIImagePicker 的方法实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:24:37.327

问题是由于一个接一个地`dismissModalViewControllerAnimated`被`presentModalViewController`调用。

解除操作需要一些时间，因为它必须为被解除的视图设置动画。在动画期间，它仍然是顶部的 Modal View。因此，您不能在此期间呈现另一个模型视图。如果您尝试，则呼叫失败并且什么也不做。

要修复，请使用`[self dismissModalViewControllerAnimated:NO];`ie 无动画。

如果您仍然想要动画，请遵循以下解决方案之一：

[在 UIImagePickerController 之后打开新 ViewController 的问题](https://stackoverflow.com/questions/5004104/problem-opening-new-viewcontroller-after-uiimagepickercontroller)

[显示连续模态视图的正确方法](https://stackoverflow.com/questions/2679910/correct-way-of-showing-consecutive-modalviews)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:28:07.970

编辑：

如果使用故事板，您应该`prepareFroSegue`在您的委托中定义：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if ([segue.identifier isEqualToString:@"AddPlayer"])
{
    PlayerDetailsViewController 
      *playerDetailsViewController = 
        (PlayerDetailsViewController *) segue.destinationViewController;

    playerDetailsViewController.delegate = self;
}
} 
```

（[来源](http://www.raywenderlich.com/5191/beginning-storyboards-in-ios-5-part-2)）

我不确定，但我认为这个电话：

```
[self dismissModalViewControllerAnimated:YES]; 
```

可能会干扰以下通话

```
[self presentModalViewController:imagePicker animated:YES]; 
```

因为两者都是在同一个运行循环中完成的。

我建议这样做：

1.  定义一个方法来封装对presentModal的调用...

    ```
    - (void)presentPicker:(...)picker {
        [self presentModalViewController:imagePicker animated:YES];
    } 
    ```

2.  将对 presentModal... 的原始调用替换为：

    ```
     [self performSelector:@selector(presentPicker:) withObject:picker afterDelay:0.0]; 
    ```

说明：通过使用`performSelector`我建议的方式，我们只是在运行循环中对 presentPicker 的调用排队（实际上没有任何延迟，因为我们将 0.0 指定为延迟值）。通过这种方式，我们让 UIKit 有机会关闭模态视图并在我们尝试呈现下一个模态视图*之前*进行所有必要的清理。

定义`presentPicker`为方法的原因是`performSelector`只允许指定一个参数（而不是`presentModal...`需要的两个）。

希望这可以帮助。

# spring - 没有 Hibernate Session 绑定到线程，并且配置不允许在此处创建非事务性会话

> ID：11626665
> 
> 赞同：2
> 
> 时间：2012-07-24T08:06:34.157
> 
> 标签：spring, hibernate, transactions

我有问题：

> 没有 Hibernate Session 绑定到线程，并且配置不允许在此处创建非事务性会话

在测试我的项目时。

我使用 Spring 2.0.7（这是该项目中必须的）和 Hibernate 3。我有

*   SessionFactory 定义

*   定义事务管理器（注入会话工厂）

*   `<tx:annotation-driven transaction-manager="transactionManager"/>`- 开启交易的注释

我用以下注释注释了我的测试：

@测试

@Transactional

并继承 AbstractAnnotationAwareTransactionalTests

=> 我得到了这个错误：No Hibernate Session bound to thread，并且配置不允许在这里创建非事务性会话

我可以克服它的唯一方法是使用：`TransactionStatus transaction = transactionManager.getTransaction(transactionDefinition);`

在我打电话之前进行测试

```
sessionFactory.getCurrentSession().save(myObject); 
```

有什么建议么？或者更好：它是如何工作的？为什么它不能创建事务会话？为什么没有绑定休眠会话？我读过一些关于它的东西，但我仍然不清楚。我认为我尽了一切努力让它发挥作用，但显然这还不够。

提前谢谢，

斯蒂克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:57:27.410

我认为问题在于你从 AbstractAnnotationAwareTransactionalTests 扩展你的类。尝试删除继承（没有它应该可以工作）。或者尝试从 AbstractTransactionalJUnit4SpringContextTests 类扩展您的类。

你可以[在这里查看类似的帖子](https://stackoverflow.com/questions/11608518/transactional-annotation-required-due-to-org-hibernate-hibernateexception-no/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-23T13:14:06.163

在我的情况下`base-package`，错过了。一个喜欢：

```
<context:component-scan base-package="com.companyname" /> 
```

# netbeans - 如何在 netbeans 中使用 Groovy 2.0

> ID：11626666
> 
> 赞同：0
> 
> 时间：2012-07-24T08:06:37.743
> 
> 标签：netbeans, groovy

我想使用`groovy 2.0 in Netbeans 7.1.2`是因为我想使用静态类型检查。

默认情况下，Netbeans 使用库 Groovy 1.6.4 - groovy-all.jar

***如何让 Netbeans 使用 Groovy 2.0。***

我试图只删除 groovy 1.6.4-groovy-all.jar 库并添加 groovy2.0-groovy-all.jar。

我试图去那里`tools -> libraries -> groovy 1.6.4`更换罐子`groovy 2.0 jar`。

两者都导致相同的错误：

```
The includeAntRuntime=false option is not compatible with fork=false
/root/NetBeansProjects/myProject/nbproject/build-impl.xml:606: The following error occurred while executing this line:
/root/NetBeansProjects/myProject/nbproject/groovy-build.xml:23: Compilation Failed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:03:56.193

NetBeans 7.2 今天发布了，内部 Groovy 支持升级到 v1.8.6

我不认为您可以将 Groovy 2.0 放入 NetBeans 并期望它支持它（发生了很大变化）

但是，这不会阻止您使用自己的 Ant/Gradle（这里有一个正在进行的[Gradle 插件](https://blogs.oracle.com/geertjan/entry/more_serious_attempt_at_a)）构建脚本并使用它来管理您的依赖项。但是 NetBeans 对类型检查一无所知，因此您可能不得不忽略一些它说是错误的东西（但事实并非如此）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:23:22.793

只需将 替换`netbeans-7.2.1/groovy/modules/ext/groovy-all.jar`为新的，但尊重 name `groovy-all.jar`，编译将使用 groovy 2 完成。

测试它执行：

```
println GroovySystem.getVersion() 
```

# jquery - jQuery - 无法识别的表达式：li:nth-child?

> ID：11626676
> 
> 赞同：0
> 
> 时间：2012-07-24T08:07:22.410
> 
> 标签：jquery, css-selectors

```
(function (){

    var num = parseInt($('body').attr('data-site')) + 1,
        theul = $(".submenu li:nth-child(" + num + ") a"),
        newNum = num - 1,
        theNewUl = $(".submenu li:nth-child(" + newNum + ") a");

        console.log(theul);
        theul.addClass('activex');
        console.log(theNewUl);
        theNewUl.addClass('lastsl');

})(); 
```

你好，当我尝试运行这个脚本控制台时说：

“未捕获的语法错误，无法识别的表达式：li:nth-child”

虽然我在这个脚本之前链接了 jQuery 源代码，

感谢回答者

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T08:18:31.523

1.  您可以使用`.data("foo")`赞成`.attr("data-foo")`.
2.  您可以使用[选择`:eq()`器](http://api.jquery.com/eq-selector/)。它是从零开始的，这似乎是您想要的。
3.  您不需要`.addClass()`在单独的线路上呼叫。
4.  *使用时必须*使用`10`基数，`parseInt()`否则类似的数字`08`将被解释为八进制。
5.  您需要确保它`num`实际上包含一个数字，或者`parseInt()`将返回`NaN`，这将破坏您的以下代码。
6.  包含带有 jQ​​uery 对象的变量的前缀`$`。这是一个有用的约定。

尝试：

```
var num = parseInt($('body').data("site"), 10),
    $theul = $(".submenu li:eq(" + num + ") a").addClass('activex'),
    $theNewUl = $(".submenu li:eq(" + (num-1) + ") a").addClass('lastsl'); 
```

# c# - WPF 字符串长度转换器

> ID：11626683
> 
> 赞同：1
> 
> 时间：2012-07-24T08:07:55.460
> 
> 标签：c#, .net, wpf, ivalueconverter, string-length

我正在使用转换器来检查字符串长度是否大于 0。如果它更大，我会返回 true，否则返回 false。

一切正常。但我想知道这是否是转换器的正确方法？

```
 public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        bool error = false;
        if (value != null)
        {
            if (value.ToString().Length > 0)
            {
                error = true;
            }
            else
            {
                error = false;
            }
        }
        return error;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new InvalidOperationException("IsNullConverter can only be used OneWay.");
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T08:20:46.743

```
public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
{
    string str = value as string;
    return !String.IsNullOrEmpty(str);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T08:12:25.297

这是使用转换器的正确方法，是的。但我可能会使用这样的东西：

```
public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
{
    return (value != null && value.ToString().Length > 0);
} 
```

**编辑**：

根据其他回复，您还可以使用以下方法：

```
public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
{
    return !string.IsNullOrEmpty(value as string);
} 
```

如果您不希望非字符串对象返回，这将执行此操作`true`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T08:28:33.393

所有其他解决方案的问题在于它们正在调用`ToString()`所有对象都支持的方法。但是我相信他/她不希望非字符串对象返回 true。如果是这种情况，那么这将做到：

```
public object Convert(object value, Type targetType, object parameter, CultureInfo culture) 
{ 
    return !string.IsNullOrEmpty(value as string);
} 

public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture) 
{ 
    throw new InvalidOperationException("IsNullConverter can only be used OneWay."); 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T08:21:45.807

这种方法怎么样：

```
public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
{
    return (!string.IsNullOrEmpty(value as string));
} 
```

# android - JPG 文件选择器 (Android) 不起作用

> ID：11626684
> 
> 赞同：0
> 
> 时间：2012-07-24T08:07:58.687
> 
> 标签：android, file

我有来自[android-coding.blogspot的 JPG 文件选择器](http://android-coding.blogspot.com/2012/05/jpg-file-chooser.html)

Java - 1.7；安卓 - 2.2；蚀。

```
package com.androidcustomdialog;

 import java.io.File;

public class AndroidCustomDialogActivity extends Activity {

 Button buttonOpenDialog;
 Button buttonUp;
 TextView textFolder;
 ImageView image;

 String KEY_TEXTPSS = "TEXTPSS";
 static final int CUSTOM_DIALOG_ID = 0;

 ListView dialog_ListView;

 File root;
 File curFolder;

 private List<String> fileList = new ArrayList<String>();

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        image = (ImageView)findViewById(R.id.image);

        buttonOpenDialog = (Button)findViewById(R.id.opendialog);
        buttonOpenDialog.setOnClickListener(new Button.OnClickListener(){
            public void onClick(View arg0) {
                showDialog(CUSTOM_DIALOG_ID);
            }});

        root = new File(Environment.getExternalStorageDirectory().getAbsolutePath());
        curFolder = root;
    }

 @Override
 protected Dialog onCreateDialog(int id) {

  Dialog dialog = null;

  switch(id) {
     case CUSTOM_DIALOG_ID:
      dialog = new Dialog(AndroidCustomDialogActivity.this);
      dialog.setContentView(R.layout.dialoglayout);
      dialog.setTitle("Select JPG");

      dialog.setCancelable(true);
      dialog.setCanceledOnTouchOutside(true);

      textFolder = (TextView)dialog.findViewById(R.id.folder);

      buttonUp = (Button)dialog.findViewById(R.id.up);
      buttonUp.setOnClickListener(new OnClickListener(){
          public void onClick(View v) {
              ListDir(curFolder.getParentFile());
          }});

      //Prepare ListView in dialog
      dialog_ListView = (ListView)dialog.findViewById(R.id.dialoglist);
      dialog_ListView.setOnItemClickListener(new OnItemClickListener(){
          public void onItemClick(AdapterView<?> parent, View view,
                  int position, long id) {
              File selected = new File(fileList.get(position));
              if(selected.isDirectory()){
                  ListDir(selected); 
              }else {
                  Toast.makeText(AndroidCustomDialogActivity.this,
                          selected.toString() + " selected",
                          Toast.LENGTH_LONG).show();
                  dismissDialog(CUSTOM_DIALOG_ID);

                  Bitmap bm = BitmapFactory.decodeFile(selected.getAbsolutePath());
                  image.setImageBitmap(bm);
        }}});
         break;
     }
  return dialog;
 }

 @Override
 protected void onPrepareDialog(int id, Dialog dialog, Bundle bundle) 
 {
  super.onPrepareDialog(id, dialog, bundle);
  switch(id) {
     case CUSTOM_DIALOG_ID:
      ListDir(curFolder);
         break;
     } 
 }

 void ListDir(File f)
 {
  if(f.equals(root)){
   buttonUp.setEnabled(false);
  }else{                            //115 134 54
   buttonUp.setEnabled(true);
  }

  curFolder = f;
  textFolder.setText(f.getPath());

  File[] files = f.listFiles();
  fileList.clear();
  for (File file : files)
  {  
       if(file.isDirectory()){
        fileList.add(file.getPath());
       }else{
        Uri selectedUri = Uri.fromFile(file);
        String fileExtension
         = MimeTypeMap.getFileExtensionFromUrl(selectedUri.toString());
        if(fileExtension.equalsIgnoreCase("jpg")){
         fileList.add(file.getPath());
        }
       }
  }

  ArrayAdapter<String> directoryList
   = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, fileList);
  dialog_ListView.setAdapter(directoryList);
 } 
```

启动前没有错误，但按“加载JPG”后却“意外停止”。日志是：

```
07-24 07:43:10.328: E/AndroidRuntime(5634): FATAL EXCEPTION: main 
07-24 07:43:10.328: E/AndroidRuntime(5634): java.lang.NullPointerException 
07-24 07:43:10.328: E/AndroidRuntime(5634): at com.androidcustomdialog.AndroidCustomDialogActivity.ListDir(AndroidCustomDialogActivity.java:129) 
07-24 07:43:10.328: E/AndroidRuntime(5634): at com.androidcustomdialog.AndroidCustomDialogActivity.onPrepareDialog(AndroidCustomDialogActivity.java:111) 
07-24 07:43:10.328: E/AndroidRuntime(5634): at android.app.Activity.showDialog(Activity.java:2555) 
07-24 07:43:10.328: E/AndroidRuntime(5634): at android.app.Activity.showDialog(Activity.java:2514) 
07-24 07:43:10.328: E/AndroidRuntime(5634): at com.androidcustomdialog.AndroidCustomDialogActivity$1.onClick(AndroidCustomDialogActivity.java:54) 
07-24 07:43:10.328: E/AndroidRuntime(5634): at android.view.View.performClick(View.java:2408) 
07-24 07:43:10.328: E/AndroidRuntime(5634): at android.view.View$PerformClick.run(View.java:8816) 
07-24 07:43:10.328: E/AndroidRuntime(5634): at android.os.Handler.handleCallback(Handler.java:587) 
07-24 07:43:10.328: E/AndroidRuntime(5634): at android.os.Handler.dispatchMessage(Handler.java:92) 
07-24 07:43:10.328: E/AndroidRuntime(5634): at android.os.Looper.loop(Looper.java:123) 
07-24 07:43:10.328: E/AndroidRuntime(5634): at android.app.ActivityThread.main(ActivityThread.java:4627) 
07-24 07:43:10.328: E/AndroidRuntime(5634): at java.lang.reflect.Method.invokeNative(Native Method) 
07-24 07:43:10.328: E/AndroidRuntime(5634): at java.lang.reflect.Method.invoke(Method.java:521) 
07-24 07:43:10.328: E/AndroidRuntime(5634): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 
07-24 07:43:10.328: E/AndroidRuntime(5634): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 
07-24 07:43:10.328: E/AndroidRuntime(5634): at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:18:16.073

错误清楚地打印在日志中 - 您`NullPointerException`在第 129 行发生了错误。

但是，这些行与您打印的源不匹配，因此很难准确识别错误。我的猜测是`f`in`ListDir`为空，或者因为不是有效目录`f.listFiles()`而返回。`null``curFile`

# c# - WPF 数据网格 .NET 框架 4

> ID：11626686
> 
> 赞同：1
> 
> 时间：2012-07-24T08:08:15.360
> 
> 标签：c#, wpf, wpfdatagrid

我在使用 DataGrid 的 WPF 中遇到问题，我正在使用 SQLDataReader，当我将记录从 Datatable 填充到 Datagrid 时，没有记录，但它 hasRows 我的代码是这样的。

```
try
{
    string commandText = "dbo.sp_select_survey";
    SqlConnection conn = new SqlConnection("Data Source=IT-PC1;Initial Catalog=gcserp;User ID=test;Password=test;Initial Catalog=gcserp;Integrated Security=True");

    SqlCommand cmd = new SqlCommand(commandText, conn);
    cmd.CommandType = System.Data.CommandType.StoredProcedure;
    cmd.CommandTimeout = 600;

    conn.Open();

    SqlDataReader objRDR = cmd.ExecuteReader((CommandBehavior.CloseConnection));

    DataTable dt = new DataTable();
    dt.Load(objRDR);

    dataGrid1.ItemsSource=dt.DefaultView;            
}
catch
{           
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:30:27.367

不确定您的 aspx 页面是什么样的以及您在 datagrid 中有什么设置，但我会首先测试 datagrid 而不定义任何 boundcolumns 或 customtemplate 列，并确保 autogeneratecolumns 设置为 true。只是一些基本的东西，比如看看你的数据是否会绑定到网格：

```
<asp:datagrid id="dataGrid1" runat="server" /> 
```

还要确保您没有返回任何空值并在查询中包含 ISNULL(field,'')。

最后在 .net framework 4 中，您应该使用 gridview 而不是 datagrid ...不确定这是否是一个错字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:14:52.983

我认为你应该放一个：
`Integrated Security = true`**或者** `User ID = "" and Password = "" '`

# javascript - javascript定时器事件

> ID：11626688
> 
> 赞同：0
> 
> 时间：2012-07-24T08:08:20.180
> 
> 标签：javascript, html

我在程序开始时使用 setInterval 函数，但我的问题是我不想在开始代码时等待。我希望它在应用此时间间隔后立即启动。这是我的代码：

```
 function initialize() {
setInterval(function(){myFunc()},5000);
}
google.setOnLoadCallback(initialize); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T08:11:31.310

`myfunc()`在 DOM 加载后调用

```
function initialize() {
    myFunc();//it will run without waiting for 5 seconds
    setInterval(myFunc,5000);
}
google.setOnLoadCallback(initialize); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T08:34:04.020

try this:

```
function initialize() {
    myFunc();
    setInterval(function(){myFunc()},5000);
}
google.setOnLoadCallback(initialize); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-24T08:19:34.080

您可以像这样创建一个自调用函数：

```
(function(){
    myFunc();
    setInterval(function(){myFunc();},5000)
})();
function myFunc(){
    alert('works?');
} 
```

这个函数将在浏览器读取它时立即运行，无需运行它（如 Ankit 建议的那样）。

# jquery - 每次单击“页面”按钮链接时防止页面向下滚动？

> ID：11626689
> 
> 赞同：1
> 
> 时间：2012-07-24T08:08:21.327
> 
> 标签：jquery, wordpress

我在 wordpress 页面上使用 scrollTo jQuery 插件，想知道是否有办法防止每次单击“页面”按钮链接时页面向下滚动？

[http://www.missbee.se/missBeev1/?page_id=5#page1](http://www.missbee.se/missBeev1/?page_id=5#page1)

这是我的代码，

```
$(function() {

var $target = $('#mask');
    $('#btn1').click(function() {
        $target.scrollTo($('#page1'),500);
        });
        $('#btn2').click(function() {
        $target.scrollTo($('#page2'),500);
        });
        $('#btn3').click(function() {
        $target.scrollTo($('#page3'),500);
        });
        $('#btn4').click(function() {
        $target.scrollTo($('#page4'),500);
        });
        $('#btn5').click(function() {
        $target.scrollTo($('#page5'),500);
        });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:21:10.147

页面“跳”下来的原因是您的链接实际上正在导航到单击时使用的 ID。

要解决此问题，只需按如下方式更改每个调用：

```
$('#btn1').click(function(e){
    e.preventDefault();
    $target.scrollTo($('#page1'),500);
}); 
```

传递给匿名函数的“e”是点击事件本身。e.preventDefault() 完全按照它在锡上所说的... 防止触发默认操作 - 在这种情况下，导航到链接上指定的 href。

顺便说一句，您可以将脚本压缩为一个函数，而不是为每个链接使用单独的函数，如下所示：

```
$('#nav a').click(function(e){
    e.preventDefault();
    var href = $(this).attr('href');
    $target.scrollTo($(href),500);
}); 
```

这一个函数可以同时处理所有链接，因为它从单击的链接中获取目标 href，而不必为每个链接编写单独的函数。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:17:14.903

我建议您使用 jQuery UI 选项卡来达到您想要达到的目的。有关示例和信息，请参见[http://jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/)。

# php - PHP URL 目录

> ID：11626690
> 
> 赞同：0
> 
> 时间：2012-07-24T08:08:22.613
> 
> 标签：php, url

如果 URL 如下：

如果： `http://www.imvu-e.com/products/dnr/`
那么： `http://www.imvu-e.com/products/dnr/`

如果： `http://www.imvu-e.com/products/dnr/?`
那么： `http://www.imvu-e.com/products/dnr/`

如果： `http://www.imvu-e.com/products/dnr/index.php`
那么： `http://www.imvu-e.com/products/dnr/`

如果： `http://www.imvu-e.com/products/dnr/page.php?var=2`
那么： `http://www.imvu-e.com/products/dnr/`

如果： `http://www.imvu-e.com/products/dnr`
那么： `http://www.imvu-e.com/products/`

我怎样才能做到这一点？

我的尝试：

```
print "http://".$_SERVER['HTTP_HOST'].dirname($_SERVER['REQUEST_URI'])."/"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:15:40.310

您的“尝试”的问题是 $_SERVER['REQUEST_URI'] 将包含用户传递的所有内容，包括 index.php 和问号，可能还有更多。为了得到你所追求的，你需要解析`$_SERVER['REQUEST_URI']`：

*   如果它以斜线结尾`/`，请保持原样
*   否则，找到字符串中的最后一个斜杠，并将子字符串从头到尾取到并包括这个斜杠
*   最后将结果附加到`http://`（或`https://`带有域名）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T08:16:23.750

看看 parse_url() 函数。

它返回你需要的任何东西。

只需 print_r() 来自 parse_url 的结果，看看你得到了什么。你可能想要这样的东西：

```
$ARRurlParts = parse_url($orgurl);

$newURL = $ARRelem["scheme"].
"://".$ARRelem["host"].
((isset($ARRelem["port"]))?":".$ARRelem["port"]:"").
$ARRelem["path"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T19:00:44.067

结束了这个

```
$s = empty($_SERVER["HTTPS"]) ? '' : ($_SERVER["HTTPS"] == "on") ? "s" : "";
$protocol = substr(strtolower($_SERVER["SERVER_PROTOCOL"]), 0, strpos(strtolower($_SERVER["SERVER_PROTOCOL"]), "/")) . $s;
$port = ($_SERVER["SERVER_PORT"] == "80") ? "" : (":".$_SERVER["SERVER_PORT"]);
$address = $protocol . "://" . $_SERVER['SERVER_NAME'] . $port . $_SERVER['REQUEST_URI'];
$parseUrl = parse_url(trim($address));
$parent = (substr($parseUrl['path'], -1) == '/') ? $parseUrl['path'] : dirname($parseUrl['path']) . "/";
return $parseUrl['scheme'] . '://' . $parseUrl['host'] . $parseUrl['port'] . $parent; 
```

部分灵感来自 Erwin Moller 的回答（我为什么投票）和网络上的片段。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-24T08:15:18.103

您可以删除从最后一个反斜杠到字符串末尾的所有内容。我很确定这`dirname($_SERVER['REQUEST_URI'])`不会完成这项工作。您也可以尝试使用`dirname($_SERVER['SCRIPT_FILENAME'])`. 如果您没有一些花哨的 .htaccess 重写规则，最后一个应该工作。

# ruby-on-rails - rake 规范 - 先决条件似乎毫无意义

> ID：11626691
> 
> 赞同：1
> 
> 时间：2012-07-24T08:08:27.623
> 
> 标签：ruby-on-rails, rake

我正在尝试建立一个运行 rspec 的可靠的持续集成服务器。我已经阅读[了这个答案](https://stackoverflow.com/questions/4116067/how-to-recreate-the-database)，并且确实如果我运行 db:reset 似乎让我处于运行测试的良好状态。事实上，如果我运行 db:reset 然后在它之后，在 cli 上运行 rake spec - 我的测试运行。

但是，如果我做一个 rake 任务，两者都做，像这样：

```
desc 'Run all tests, used by Jenkins CI'
  task :run => [ 'db:reset' ] do
  Rake::Task["spec"].invoke
end 
```

到测试运行时，数据库是空的。这似乎是因为 rake:spec 调用以下内容：

```
** Invoke db:test:prepare (first_time)
** Invoke db:abort_if_pending_migrations (first_time)
** Invoke environment 
** Execute db:abort_if_pending_migrations
** Execute db:test:prepare
** Invoke db:test:load (first_time)
** Invoke db:test:purge (first_time)
** Invoke environment 
** Execute db:test:purge
** Execute db:test:load
** Invoke db:schema:load 
** Execute spec 
```

如果我没看错，如果有待处理的迁移，它将（第 2 行）中止。然后，最终 db:schema:load 再次，它从模式 rb 加载数据库......我已经完成了。而且，这让我特别不清楚为什么如果它要重新擦除数据库，如果没有应用迁移，它会中止。

更糟糕的是，在我的情况下，spec 任务所做的第一件事是保释，因为 users 表不存在......并且这是在 schema.rb 中定义的（此时已加载两次）。

我有什么误解吗？

# vb.net - 对象引用铸造 vb.net

> ID：11626694
> 
> 赞同：0
> 
> 时间：2012-07-24T08:08:31.333
> 
> 标签：vb.net, object, reference, casting, instance

我不知道如何将类型为“对象”的对象转换为用户定义的类类型。

我有一个私有实例变量：

```
Private studyType as Object 
```

我需要做的是从事件处理方法中实例化这个对象。不，不举例`new Object()`。

基本上它看起来像这样：

```
studyType = new VCEOnly() 
```

但是，我只被允许使用`Object`类 subs 和函数，因为类型被定义为`Object`. 所以我需要将它转换为`VCEOnly`类类型，以便我可以访问它的子类和函数。

基本上，`studyType`需要从`Object`to铸造`VCEOnly`。我不允许在声明时预先`studyType`定义`VCEOnly`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:43:23.523

您还可以使用：

```
dim studyType as Object = new VCEOnly()    

...

dim studyTypeVCE as VCEOnly = nothing
if trycast(studytype,VCEOnly) IsNot Nothing then
   studyTypeVCE = DirectCast(studytype,VCEOnly)
   '... do your thing
end if 
```

if 语句检查对象是否可以转换为想要的类型，如果可以，VCEOnly 类型的变量将用 studytype 的转换填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T08:09:12.383

[使用 CType 将对象从一种类型转换为另一种类型](http://msdn.microsoft.com/en-us/library/4x2877xb%28v=vs.100%29.aspx)

这样的事情应该这样做：

```
Dim studyType as Object
Dim studyTypeVCE as New VCEOnly
studyTypeVCE = Ctype(studyType,VCEOnly) 
```

或者你可以这样做：

```
With CType(studyType, VCEOnly)
    .SomeVCEOnlyProperty = "SomeValue"
End With 
```

# java - 问题：Jersey umashalls 参数 QueryParam/PathParam 为 null

> ID：11626695
> 
> 赞同：0
> 
> 时间：2012-07-24T08:08:41.193
> 
> 标签：java, jersey

我无法通过`@FormParam`Jersey 传递我自己的对象。它始终为空。我有这样的方法：

```
@POST
@Path("search")
@Consumes({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
@Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
public SearchResult search(
        @FormParam("record") MyObject record,
        @FormParam("offset") Integer offset,
        ...) {
    ...
} 
```

当我尝试传递 MyObject 时，它始终为空。参数偏移量传递正确。

JavaScript 中的客户端用于说明：

```
$.ajax({
    'url': url,
    'type': 'POST',
    'dataType': 'json', 'contentType': 'application/json',
    'data': {'record': record, 'offset': 123}
}) 
```

我认为这可能是 jQuery 的问题，所以我尝试将参数更改为一些废话`'data': {'record': 'string instead of json', 'offset': 123}`，我得到 400 (Bad Request)。我还检查了请求的正文，看起来还不错。

但是当我将方法更改为如下所示时：

```
public SearchResult search(MyObject record) { ... } 
```

以及相应的客户端脚本：

```
$.ajax({
    'url': url,
    'type': 'POST',
    'dataType': 'json', 'contentType': 'application/json',
    'data': JSON.stringify(record)
}) 
```

MyObject 正确获取。

我尝试使用具有相同结果的 GET 方法。

这可能是泽西岛的一个错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:25:07.787

@FormParam 仅适用于 application/x-www-form-urlencoded 媒体类型。因此，第二种方法（适合您的方法）是接收 JSON 消息实体的正确方法。

# android - Android ListView - 调用 onItemClickListener 后无法返回 ListView

> ID：11626696
> 
> 赞同：0
> 
> 时间：2012-07-24T08:08:47.600
> 
> 标签：android, listview

这个问题实际上是一个 3 部分问题。请为我的问题提出有效的解决方案。

**应用概述**

我正在创建一个具有初始屏幕和 ListView 的应用程序。单击启动器图标时，首先显示初始屏幕，然后在 3-4 秒后，初始屏幕调用 ListView 活动，用户在手机屏幕上留下 ListView 项目。单击每个项目时，用户将可以看到相应的文本内容。阅读内容后，用户将单击“返回”按钮并再次返回到列表视图项目部分。如果他/她想阅读任何其他项目内容，点击该项目将被带到该页面。如果不愿意，则单击手机上的“返回”按钮，应用程序将关闭。

**第 1 部分 - 我真正想做的事**

我想在单击不同的 listView 项目时显示不同的文本内容（不是普通文本，而是样式（粗体/斜体/包含图像等）。我可以创建 html 页面并将它们存储在本地的资源文件夹中但不知道如何在调用 onItemClickListener 时调用这些页面。我不确定这是否是执行此类工作的有效方法。请建议。**到目前为止它还没有工作**

**第 2 部分 - 我现在正在做的事情**

由于我无法调用文本内容，所以我在一些文本编辑器上编写了内容，在编辑器上完成了所有花哨的工作，当内容准备就绪时，我截取了屏幕截图，然后在调用 onItemClickListener 时调用了该图像。**它工作正常，我可以在单击我的 ListView 项目时看到图像。**

**第 3 部分 - 我面临的问题**

当图像显示给用户时，单击“返回”按钮，应用程序将关闭，而不是返回到 ListView 部分。显然，单击列表视图项时打开的图像与 ListView 本身处于相同的活动中。**我想要的是**用户在阅读完文本内容后应该能够返回 ListView 部分。

**下面是 ListView Activity 的代码：** public class MainActivity extends Activity {

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ListView listView = (ListView) findViewById(R.id.menulist);
    String[] values = new String[] { "1\. First Article Here", "2\. Second Article Here", "3\. Third Article Here"};

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
        R.layout.custom_listview, R.id.text1, values);

    // Assign adapter to ListView
    listView.setAdapter(adapter);

    listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, android.view.View view, int position, long id){
            //
            if(0==position)
            {
                setContentView(R.layout.image0); 

             }
            else if (1==position)
            {

            }
        }        

    }); 
```

} **代码可以正常工作到 setContentView(R.layout.image0); **但在此之后，我希望应用程序在单击“返回”按钮时返回到 ListView 部分，但它会关闭。请指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:13:25.760

可能会解决，

在另一个活动中使用 layout.image0 并在单击列表项时按意图调用。

通过使用它，当您单击后退按钮时，您可以查看以前的活动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:18:42.453

当您按下后退按钮时，当前活动将关闭，您将返回到堆栈上的前一个活动。假设您没有通过按下列表元素来更改活动，而只是更改布局，按下后退按钮会清空堆栈并关闭您的应用程序。

最干净的方法是在另一个活动中启动启动画面。

解决它的其他几种方法是： - 添加一堆片段

或者（最肮脏的方式），覆盖 onBackPressed()，当你的应用程序显示启动屏幕时拦截它并将布局更改回列表视图。

我更喜欢其他方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T08:19:12.207

如果您使用`setContentView()`方法，后退按钮功能将不起作用，因为没有`Activity`创建新的，您可以从中返回`listView`. 我宁愿把被点击的项目的有用信息，放在一个`Intent`（[链接](http://developer.android.com/guide/components/intents-filters.html)）中，然后调用`startActivity()`方法，开始一个新的活动，向用户展示内容。然后，如果用户单击后退按钮，“详细信息”活动将消失，用户再次看到`listView`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T08:23:10.367

您正在使用 setContentView，因此它在 OnItem Click 中使用您的新视图覆盖当前视图...而是将视图组添加到您的活动中，如相对布局...当您单击 Itme 时，将新布局添加到您现有的布局和在背面删除布局。

或者您可以使用 DialogView 动态添加视图..见下文：

```
 Dialog dialog = new Dialog(this, android.R.style.Theme_Dialog);
    dialog.getWindow().setFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL, 0xff000000);
    dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    dialog.setContentView(Your VIew);
    dialog.show(); 
```

或者最后你可以使用你当前的活动开始另一个意图..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T08:43:54.403

**第 1 部分和第 2 部分**

您可以使用 XML 文件创建复杂且样式化的布局。

如果你真的想使用 HTML，我建议你使用`WebView`. 您可以将纯 html 字符串存储在资源中的某个位置，并用于`Webview.loadDataWithBaseUrl()`在`WebView`.

您可以根据自己的功能做出选择。如果您有很多不同的事件要处理（例如单击 a `View`），我会选择 XML 文件。因为您可以将不同的侦听器分配给单独`Views`的 . 当您的功能没有像现在这样更进一步时，只需单击整个视图。您也可以使用 a `WebView`。

**第 3 部分** 问题是您在滥用*-*`setContentView`方法。`setContentView`告诉`Activity`它必须使用哪个 XML 文件。在您的情况下，`Activity`创建时，它将使用`R.layout.activity_main`.

当您单击您的项目时，您告诉`Activity`.. 不要再使用`R.layout.activity_main`了，而是使用`R.layout.image0`. 将`Activity`执行此操作并显示您的图像。

不过，这不是更改布局的好方法，并且会打乱您的工作流程。显示图像时，您的应用程序关闭的原因`Back`是只启动了 1 个 Activity。（您的堆栈仅包含 1 `Activity`）您刚刚切换了布局，但没有`Activity`开始新的布局。

**解决方案**

创建 2 个活动：

1.  创建一个主要`Activity`显示您的列表并设置布局`setContentView(R.layout.activity_main)`。当您的点击事件被触发时，您将开始第二个`Activity`. [`Intent i = new Intent(...)`](https://stackoverflow.com/a/4186097/1479570). 您还可以`Intent`在第二个 Activity 中添加一些参数并访问它们，以了解单击了哪个项目以及要显示哪个图像。
2.  显示您的内容或在您的情况下为图像的详细活动。`setContentView(R.layout.image0)`.

**解决方案 2**

创建一个弹出窗口以显示您的内容。您可以为此使用[对话框](http://developer.android.com/reference/android/app/Dialog.html)。

# git - 向提交添加细微更改？

> ID：11626716
> 
> 赞同：6
> 
> 时间：2012-07-24T08:10:16.923
> 
> 标签：git

我只是做了一个提交并将其推送给master。有一个小错字，我想在这次提交中修复它，而不是另一个。是否可以将此更改附加到当前和推送的提交中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T08:14:07.773

你可以

```
git commit --amend
git push -f 
```

但你不应该。一旦推送到*任何*远程服务器，您就不应更改历史记录。您应该在下一次提交中修复错字，或者自行提交，这是我更喜欢的。提交没有任何问题，它包含一个更改，另一方面，提交通常应该只涵盖一个“主题”。你可以建立一个“许多错别字” - 提交;）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-24T08:17:10.923

### 重写公共历史是个坏主意

请注意，重写历史可能会导致很多问题。如果有可能其他开发人员/结帐已经取消了您的错字提交，那么请**不要**按照您的要求进行操作。问题是，如果我现在从你的主人那里拉出来 - 我有你的提交。如果您重写历史记录并且我再次尝试提取 - 我的结帐不再出现在您的主分支的时间线上。至少这是令人困惑的。如果我以正常方式（变基）并推送到 master - borked commit 将被放回 master 分支的历史记录，并且在你的下一次 pull 时 - 它也会回到你的历史记录。

### 提交修改

注意事项...

要更新最后一次提交，请执行以下操作：

```
git checkout master
git pull

hack hack hack

git commit -va --amend
#................^ 
```

这将更新您上次提交的内容。

更新您的遥控器，使其与您的本地主分支匹配

```
git push
# READ THE WARNING

git push -f 
```

这将强制更新遥控器的历史记录以包含您更新的提交 - 并删除旧版本的“相同”提交。就是这样，在这种情况下，你输了，git 会警告你。

# python - 在 Python 刮板中使用 etree 的问题

> ID：11626720
> 
> 赞同：0
> 
> 时间：2012-07-24T08:10:37.400
> 
> 标签：python, screen-scraping, lxml

我是 Python 的新手，希望在 Scraperwiki 中构建屏幕抓取工具，但我正在努力解决一个我无法解决的错误。本质上，我想解析一个 xml 文件，但不知道如何让我的 gp_indicators_scrape 函数访问 getroot() 方法。

任何人都可以解决它，更重要的是，指出我的解释，以便我将来避免这个问题？

这是刮板：[https ://scraperwiki.com/scrapers/choiceshu1](https://scraperwiki.com/scrapers/choiceshu1)

代码的关键位：

```
import lxml.html
import urlparse
from urlparse import urlparse
from lxml.etree import etree

def gp_indicators_scrape(org_URL):

     indicator_xml = etree.parse(org_URL)
     root = lxml.etree.getroot(indicator_XML)
     print root 

html = scraperwiki.scrape(combined_URL_for_first_scrape)
print html
root = lxml.html.fromstring(html)
links = root.cssselect("dd a") 
```

这是运行时的错误

```
Line 5 - from lxml.etree import etree
ImportError: cannot import name etree 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:27:38.853

`from lxml.etree import etree`应该`from lxml import etree`

另外，刚刚注意到 -如果您使用上面的导入，`lxml.etree.getroot(...)`您可以删除，通常您调用通过（或类似）返回的对象。`lxml.``getroot()``etree.parse`

注意：我没有查看提供的链接中的代码......

# php - 请求 html 或 php 页面时如何安装 dll

> ID：11626724
> 
> 赞同：-5
> 
> 时间：2012-07-24T08:10:54.073
> 
> 标签：php, html, dll

我的网页有问题。问题是当我请求一个页面时，例如 index.html 然后我想在发生请求的那台机器上安装一个 dll。

**编辑：**我能理解你们都是正确的，但我需要它。例如，当我们打开大部分 adobe 站点时，会出现一条消息提示，告诉我们请添加此插件。所以我也有这种要求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T08:25:30.317

简短的回答：你不能。

长答案：你不能。

这是在 PC 上安装病毒/恶意软件的方法之一。现代浏览器有广泛的保护来防止这种情况。

如果您仍想这样做，您将需要：

1.  在浏览器中查找漏洞。

2.  如果存在，则退出沙箱。

3.  找到一种在主机上运行任意命令的方法，该命令将获取并安装您的 dll。

    当你在它的时候，

4.  在[Pwn2Own注册](http://en.wikipedia.org/wiki/Pwn2Own)

5.  展示剥削并赢得大量现金。

编辑：在发布者的评论之后，您最多可以做的是要求用户下载您创建的程序，该程序会将 dll 添加到他们的 PC，以及所有浏览器查找和加载所需的必要更改/文件dll 作为插件。这样做会严重限制观众，因为很少有人愿意这样做。每个人都会认为这是不安全的，这是理所当然的。

我的建议是尽可能使用可用的软件/插件（如 flash/java 小程序）来实现它。它们可以很好地镜像原生应用程序。如果您绝对必须，您还可以在 chrome 上使用[NaCl](http://en.wikipedia.org/wiki/Google_Native_Client)来获得更多本机客户端功能。

# c++ - 制表符分隔的文件数据存储到数据结构中

> ID：11626726
> 
> 赞同：1
> 
> 时间：2012-07-24T08:10:57.063
> 
> 标签：c++, data-structures, csv

我正在将制表符分隔文件读入 c++，我想操作数据。我想知道什么是存储它的好数据结构。

这是我的制表符分隔文件：

```
Account No.  Name  Address      Available Balance
15           Ted   20 John St.  100
30           John  30 Ted St.   200
50           Roy   55 Roy St.   520 
```

我想根据我执行的命令修改文本文件中的字段。假设我想从 Ted 提取 50，我需要找到 Ted 的帐户，查看可用余额并从中减去 50，然后将其保存回文本文件中。

有没有一种有效的方法来做到这一点？我能想到的只是一个漫长而复杂的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:16:39.583

而是将您的数据作为`vector`Account`struct`实例存储在内存中。然后在此容器上进行修改。仅在需要时读取和写入制表符分隔的文件，例如在启动和结束程序时。

# sqlite - Phonegap“附近”的Sqlite错误。“：语法错误”

> ID：11626728
> 
> 赞同：1
> 
> 时间：2012-07-24T08:10:59.513
> 
> 标签：sqlite, cordova

我正在使用cordova 1.9 开发一个phonegap 应用程序。
我对此语句有语法错误：

```
db.executeSql('UPDATE Reminder SET Reminder.reminderName ="'+ reminder_name + '", Reminder.reminderDescription = "' + description +'", Reminder.cellId='+ 1 +',  Reminder.timetableId ='+1+', Reminder.reminderDeadline ="' + deadline +'" WHERE Reminder.RminId = "'+reminderId+'" '); 
```

所以，我想知道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:21:07.337

看起来您的单引号和双引号错误且混乱。
试试这个：

```
 db.executeSql("UPDATE Reminder SET Reminder.reminderName = "
            + reminder_name + ", Reminder.reminderDescription = "
            + description + ", Reminder.cellId = " + 1
            + ",  Reminder.timetableId = " + 1
            + ", Reminder.reminderDeadline = " + deadline
            + " WHERE Reminder.RminId = " + reminderId + " "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:38:08.393

可能是你的 1 的问题。

在你输入 1 的地方，你应该把它放在一个变量中，或者把引号去掉：

```
db.executeSql('UPDATE Reminder SET Reminder.reminderName ="'+ reminder_name + '", Reminder.reminderDescription = "' + description +'", Reminder.cellId=1,  Reminder.timetableId =1, Reminder.reminderDeadline ="' + deadline +'" WHERE Reminder.RminId = "'+reminderId+'" '); 
```

或者

```
var cellID = 1;
var timetableID = 1;
db.executeSql('UPDATE Reminder SET Reminder.reminderName ="'+ reminder_name + '", Reminder.reminderDescription = "' + description +'", Reminder.cellId='+ cellID +',  Reminder.timetableId ='+timetableID+', Reminder.reminderDeadline ="' + deadline +'" WHERE Reminder.RminId = "'+reminderId+'" '); 
```

# c# - OrmLite 传递数据做 SP 之类的对象

> ID：11626736
> 
> 赞同：1
> 
> 时间：2012-07-24T08:11:33.647
> 
> 标签：c#, asp.net, ormlite-servicestack

是否可以使用 ormLite 来使用存储过程，只需购买传递对象，而不使用 Parameters.Add。像这样的东西。但是这个trow错误过程或函数'SuspendUser'需要参数'@ID'，但没有提供。

```
db.Query<User>("SuspendUser", new { ID = 21 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:32:22.257

这里有一个[讨论](https://groups.google.com/d/msg/servicestack/4LumYfvaNxU/GpTY76hjCncJ)（除非它已经改变）可能很有趣。特别要注意他提到的“dapper”语法，它可以翻译为：

```
var data = db.Query<User>("SuspendUser", new { ID = 21 },
   commandType: CommandType.StoredProcedure); 
```

# cakephp - cakephp auth->loginRedirect 用于管理员

> ID：11626741
> 
> 赞同：0
> 
> 时间：2012-07-24T08:11:49.107
> 
> 标签：cakephp, cakephp-2.0, admin

我对 cakePHP 还很陌生，并且已经阅读了 cake 网站上的所有教程。我正在使用 cake 2.1 构建一个小型示例应用程序并遇到了问题。基本上，我希望管理员用户在登录时重定向到与普通用户重定向到不同的页面。我敢肯定有一个简单的方法可以做到这一点，但我正在努力！

我启用了管理路由并正在使用身份验证组件（以及 ACL 组件，尽管这不会影响我的问题）。我有 2 个登录，一个用于 admin - admin_login() 和一个用于普通用户的登录 - login() - 正常的非管理员登录工作正常。

在我的 AppController.php 我有这个：

```
class AppController extends Controller {

public $components = array(
    'Acl',
    'Auth' => array(
        'authorize' => array(
            'Actions' => array('actionPath' => 'controllers')
        )
    ),
    'Session'
);
public $helpers = array('Html', 'Form', 'Session');

public function beforeFilter() {
    //Configure AuthComponent
    $this->Auth->allow('display'); // Allows access to the homepage of the app
    $this->Auth->loginAction = array('controller' => 'users', 'action' => 'login');
    $this->Auth->logoutRedirect = array('controller' => 'users', 'action' => 'login');
    $this->Auth->loginRedirect = array('controller' => 'posts', 'action' => 'add');
} 
```

}

因此，您可以看到默认设置是用户在登录时被重定向到帖子控制器的 add() 函数，该函数工作正常。但是，如何为我的 admin_login() 函数设置不同的登录重定向？

我在这里阅读了许多帖子，但大多数与蛋糕的旧版本有关，而不是蛋糕 2。

如果有帮助，这是我在 UsersController.php 中的 admin_login 函数

```
public function beforeFilter() {
    parent::beforeFilter();
    $this->Auth->allow('logout');
}

public function admin_login() {
    if ($this->request->is('post')) {
        if ($this->Auth->login()) {
            if ($this->Session->read('Auth.User')) {
                $this->Session->setFlash('You are logged in!');
                //$this->redirect($this->Auth->redirect());

                // This doesnt work! Grrrrrr
                //$this->redirect(array('controller'=>'pages', 'action'=>'admin_index'));

                // This nearly works...
                if($this->Auth->user())$this->redirect(array('controller' => 'pages', 'action' => 'admin_index'));
            }            
        }
        else {
            $this->Session->setFlash('Your username or password was incorrect.');
        }
    } 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:23:49.310

如果您的数据库中有角色->“管理员，用户”，请放入您的 AppController - beforeFilter()：

```
if($this->Auth->user('role') == 'admin'){
     $this->Auth->loginRedirect = array('controller' => 'controller1', 'action' => 'action1');
}else{
     $this->Auth->loginRedirect = array('controller' => 'controller2', 'action' => 'action2');
} 
```

如果您想知道 $this->Auth->user() 中的内容，只需输入：

```
debug($this->Auth->user()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:08:02.980

也许这有效：

```
if($this->request->params['admin']) {
    $this->Auth->loginRedirect = array('controller' => 'pages', 'action' => 'index', 'admin' => true);
}
else {
    $this->Auth->loginRedirect = array('controller' => 'posts', 'action' => 'add');
} 
```

用这些行替换 beforeFilter() 中的 loginRedirect 设置

# php - PHP ISSET 函数未执行

> ID：11626743
> 
> 赞同：0
> 
> 时间：2012-07-24T08:11:52.357
> 
> 标签：php

在我的源代码中当我按下删除按钮时，内部 isset 代码未执行。任何人都可以帮助我，

```
<body>
<form method="post" action="<?php  echo $_SERVER['PHP_SELF'];?>">

<?php

$dbc=mysqli_connect("localhost","root","","elvis_store") or die("Error Connecting to Mysql Database");

if(isset($_POST['submit'])){

echo "Hello";
foreach($_POST['todelete'] as $delete_id){

$query="DELETE FROM email_list WHERE id=$delete_id";
mysqli_query($dbc,$query) or die("Error Querying Database");

}

echo "Customer(s) Removed";

}

$query="SELECT * FROM email_list";
$result=mysqli_query($dbc,$query)or die("Query Syntaxt is Incorrect");

while($row=mysqli_fetch_array($result)){

echo '<input type="checkbox" value="' . $row['id'] . '" name="todelete[]" />';
echo $row['first_name']." ".$row['last_name']." ".$row['email'];
echo "<br/>";

}

mysqli_close($dbc);

?>

<input type="submit" name"submit" value="Remove"/>
</form>

</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T08:15:22.383

也许这

```
 name"submit" 
```

是问题吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T08:19:49.643

尝试：

```
if(isset($_POST) && !empty($_POST))  {

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T08:17:17.633

首先 html 不正确 -> name"submit" 必须是 name="submit"

其次，我建议您首先检查是否设置了 $_POST['submit'] 以及是否设置了 php else 显示表单。

# android - 我在结束活动之前得到 RESULT_OK

> ID：11626746
> 
> 赞同：0
> 
> 时间：2012-07-24T08:12:01.473
> 
> 标签：android

我有任何活动开始其他活动以获得一些物品，

我已经开始了

```
Intent inte = new Intent(actMain.this,actResults.class);
inte.setAction("calllog");
startActivityForResult(inte, CALL_LOG_REQ); 
```

但启动后，actResults 自动返回 Action_OK，当我发送 ACTION_OK 时，它不起作用。为什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:22:16.373

启动活动是一个异步过程。当您调用 时`startActivityForResult`，将启动另一个活动，并且控制立即进行到代码的下一行。

为了检查此调用的结果，您需要覆盖：

```
@Override
public void onActivityResult(int reqCode, int resCode, Intent intent) 
```

方法。在该方法中，检查`reqCode`- 如果它是您的`CALL_LOG_REQ`，然后检查`resCode`实际结果。如果传回了额外的数据，那么您可以从`intent`参数中获取它。

# mediawiki - 'mywikiLoggedOut=12345678' cookie 有什么用？

> ID：11626747
> 
> 赞同：0
> 
> 时间：2012-07-24T08:12:08.067
> 
> 标签：mediawiki, wikipedia-api, mediawiki-api

通过 API 登录时，我从 Wikimedia 框架中取回了一些 cookie：

> 我的维基用户名=我的用户名；
> mywiki_session=a27c625a1babc58ad7cc11e317c9eed2;
> mywikiLoggedOut=20120723255540";

我想知道这`mywikiLoggedOut=20120723211540`是关于什么的？

我还没有找到有关此的文档，因此不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:53:23.263

在 MediaWiki 存储库上做一个简单`git grep`的操作会将您指向[以下`doLogout()`函数`includes/User.php`](https://gerrit.wikimedia.org/r/gitweb?p=mediawiki/core.git;a=blob;f=includes/User.php;h=ca8ce8f15a06b881dd4c77706570a0ed0dfc361f;hb=HEAD#l2854)：

```
/**
 * Clear the user's cookies and session, and reset the instance cache.
 * @see logout()
 */
public function doLogout() {
    $this->clearInstanceCache( 'defaults' );

    $this->getRequest()->setSessionData( 'wsUserID', 0 );

    $this->clearCookie( 'UserID' );
    $this->clearCookie( 'Token' );

    # Remember when user logged out, to prevent seeing cached pages
    $this->setCookie( 'LoggedOut', wfTimestampNow(), time() + 86400 );
} 
```

该函数的代码和注释清楚地表明，此 cookie 指示您上次注销的时间，并用于控制页面的缓存（大概是为了让页面看起来不像您在注销后仍然登录）。

# git - 带有 Github 的 Git windows 服务器

> ID：11626750
> 
> 赞同：1
> 
> 时间：2012-07-24T08:12:32.587
> 
> 标签：git, github

我对 Git 还很陌生，希望有人能帮助我。我们正在与外部供应商合作，代码在 github 上，它有几个分支（比如 branch1 和 branch2）。我们计划只使用一个裸仓库就拥有一个本地 Windows git 服务器，开发人员现在可以通过文件共享来访问它，他们将在其中克隆、推送、拉取。本地服务器背后的原因是由于大小。

使用它来实施的最佳方法是什么？例如： 1\. 在我们的服务器上创建一个裸仓库 - git init --bare 2\. 添加一个远程到 github 名称 github 3\. 获取远程仓库（来自 github） 4\. 用户克隆我们的本地仓库... 5\. push/拉到我们本地... 6\. 你现在如何将我们的代码合并到 github 上的一个分支中？

更新：对不起，我忘了提到的另一件事是，我们只被授予对 github 的拉取访问权限，由于第三方，我们无法更改。我们只有在一切都完成后才能获得推送访问权限

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:25:41.243

您可以设置一个脚本以将更改出现在存储库中时推送到 Github，或者您可以让某人决定何时需要，并手动将更改从他们自己的 repo 克隆推送到 Github。请记住，在分布式环境中，没有任何特定的存储库有任何与其他存储库不同的技术原因：这都是约定俗成的。

但是，您应该注意一件事：使用文件共享，服务器上的 repo 中的所有更改都将由执行推送的用户直接进行。即使通过 LAN，这也可能比通过 Internet 与智能服务器通信要慢。过去，我在通过 SMB 推送到远程 Git 存储库时也遇到了困难。如果可能，请设置服务器，而不仅仅是使用文件共享。如果这不可行，请好好测试并验证您是否确实获得了更好的性能。

如评论中所述，没有理由为人们设置同步镜像来进行初始获取：请记住，所有存储库都将具有相同的数据。不是每次都下载整个历史记录，没有什么能阻止新人从他们旁边的同事那里获取所有历史记录，然后拉动并推送到 Github。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:40:37.713

每当大小成为问题时，请不要忘记 Git 不是集中式 VCS，您可以将*所有内容*放入其中。

您应该将大量文件分解为多个 Git 存储库，允许开发人员仅在其中一些存储库上克隆/工作。

应该避免使用 Git 进行任何文件共享工作：它会*降低*性能......

# node.js - 实践中的 Socket.io 应用

> ID：11626751
> 
> 赞同：0
> 
> 时间：2012-07-24T08:12:36.187
> 
> 标签：node.js, socket.io

生产中是否使用了任何 socket.io 项目/应用程序？

我只是想知道，因为我想将它用于一个巨大的项目，并且我没有找到任何关于使用 socket.io 的公司/项目的文章。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:53:57.367

我们已经使用 socket.io 在生产中使用（财务）价格信息进行更快的 UI 更新。它在客户端完成其工作。服务器端有更多负载（与可以理解的 AJAX 不同）——如果您希望将其用作后备，则需要设置/配置闪存套接字。大多数浏览器会退回并且不使用 Web 套接字（除非它们使用 chrome）。

# wpf - 在 TreeView 中的对象上处理 IsSelected 和 IsExpanded 的策略

> ID：11626757
> 
> 赞同：0
> 
> 时间：2012-07-24T08:13:05.057
> 
> 标签：wpf, listview, treeview, selection

想象一组要在列表和树中显示的联系人和联系人组。最初，我只是将 IsSelected 和 IsExpanded 属性添加到公共基类中，这在 TreeView 中运行良好。

我遇到的问题是对象可以出现在树中的不同位置（想象分配给多个组的人）。结果是，当我选择一个人时，该人在任何地方都被选中 - 在每个组中。这看起来有点不寻常，但工作正常。当此人出现在单独的列表中并被选中时，它会变得很棘手。由于对象相同，因此选择出现在所有列表中的任何位置。

你如何管理选择？将对象放在临时选择容器中更好吗？有什么好的策略吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:26:50.110

您的人员类可能有多个 IsSelected 属性，例如：

IsSelectedInTree

IsSelectedInList

.

.

.

然后使您的绑定更具体：

```
<... IsSelected={Binding IsSelectedInTree}... > 
```

# android - 无法启动调试，找不到 App Engine 项目

> ID：11626759
> 
> 赞同：1
> 
> 时间：2012-07-24T08:13:12.230
> 
> 标签：android, google-app-engine

我使用 App Engine 连接 Android 向导在 Eclipse 中创建链接的 GAE 和 Android 项目。我已经重新安装了 Eclipse 并设法断开 AppEngine 和 Android 项目之间的链接，这样当我尝试将 Android 项目作为“Llocal App Engine 连接的 Android 应用程序”进行调试时，我收到消息“无法启动调试，找不到 App Engine 项目”。

由于我的安装不再具有创建 App Engine/Android 连接项目的向导（感谢 Google），我无法重新开始。所以我的问题是如何重新创建链接？

谢谢蒂姆

# java - 休眠条件查询以获取特定列

> ID：11626761
> 
> 赞同：56
> 
> 时间：2012-07-24T08:13:16.997
> 
> 标签：java, mysql, hibernate, hibernate-criteria

我在我的代码中使用标准查询。总是火`select * from ...`

相反，我想忽略查询中的一列（字段），因为该字段有大量以字节为单位的数据。这会导致性能问题。

任何人都可以给出一个想法吗？

* * *

**一些更新**

我在查询中添加了一个投影，它创建了一个查询，例如...

```
select
    this_.TEMPLATE_ID as y0_,
    this_.TEMPLATE_NAME as y1_,
    this_.CREATE_DATE as y2_,
    this_.UPDATE_DATE as y3_,
    this_.STATUS_CODE as y4_,
    this_.USER_ID as y5_,
    this_.UPDATED_BY as y6_,
    this_.CATEGORY_ID as y7_,
    this_.PRACTICE_ID as y8_ 
from
    templates this_ 
inner join
    user user1_ 
        on this_.USER_ID=user1_.USER_ID 
inner join
    template_categories category2_ 
        on this_.CATEGORY_ID=category2_.CATEGORY_ID 
where
    y4_=? 
    and y8_=? 
    and y5_ in (
        ?, ?
    ) 
order by
    y1_ asc limit ? 
```

现在的问题就像.. `Unknown column 'y4_' in 'where clause'` y8_ 的错误相同，y5_ 意味着所有关闭的地方都会出错。

我将其修改为 Query like ...

```
select
    this_.TEMPLATE_ID as y0_,
    this_.TEMPLATE_NAME as y1_,
    this_.CREATE_DATE as y2_,
    this_.UPDATE_DATE as y3_,
    this_.STATUS_CODE as y4_,
    this_.USER_ID as y5_,
    this_.UPDATED_BY as y6_,
    this_.CATEGORY_ID as y7_,
    this_.PRACTICE_ID as y8_ 
from
    templates this_ 
inner join
    user user1_ 
        on this_.USER_ID=user1_.USER_ID 
inner join
    template_categories category2_ 
        on this_.CATEGORY_ID=category2_.CATEGORY_ID 
where
    this_.STATUS_CODE=1
    and this_.PRACTICE_ID=1 
    and this_.USER_ID in (
        1, 2
    ) 
order by
    y1_ asc limit ? 
```

它奏效了。但我不知道如何在 HQL 中修改它？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-07-24T08:20:36.687

使用[Projections](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/criterion/Projections.html)指定要返回的列。

**例子**

*SQL 查询*

```
SELECT user.id, user.name FROM user; 
```

*休眠替代方案*

```
Criteria cr = session.createCriteria(User.class)
    .setProjection(Projections.projectionList()
      .add(Projections.property("id"), "id")
      .add(Projections.property("Name"), "Name"))
    .setResultTransformer(Transformers.aliasToBean(User.class));

  List<User> list = cr.list(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-01-25T08:37:00.473

您可以将 JPQL 以及 JPA Criteria API 用于任何类型的 DTO 投影（仅将选定的列映射到 DTO 类）。查看下面的代码片段，展示如何选择性地选择各种列而不是选择所有列。这些示例还显示了如何从连接多个列中选择不同的列。我希望这有帮助 。

JPQL 代码：

```
String dtoProjection = "new com.katariasoft.technologies.jpaHibernate.college.data.dto.InstructorDto"
                + "(i.id, i.name, i.fatherName, i.address, id.proofNo, "
                + " v.vehicleNumber, v.vechicleType, s.name, s.fatherName, "
                + " si.name, sv.vehicleNumber , svd.name) ";

        List<InstructorDto> instructors = queryExecutor.fetchListForJpqlQuery(
                "select " + dtoProjection + " from Instructor i " + " join i.idProof id " + " join i.vehicles v "
                        + " join i.students s " + " join s.instructors si " + " join s.vehicles sv "
                        + " join sv.documents svd " + " where i.id > :id and svd.name in (:names) "
                        + " order by i.id , id.proofNo , v.vehicleNumber , si.name , sv.vehicleNumber , svd.name ",
                CollectionUtils.mapOf("id", 2, "names", Arrays.asList("1", "2")), InstructorDto.class);

        if (Objects.nonNull(instructors))
            instructors.forEach(i -> i.setName("Latest Update"));

        DataPrinters.listDataPrinter.accept(instructors); 
```

JPA 标准 API 代码：

```
@Test
    public void fetchFullDataWithCriteria() {
        CriteriaBuilder cb = criteriaUtils.criteriaBuilder();
        CriteriaQuery<InstructorDto> cq = cb.createQuery(InstructorDto.class);

        // prepare from expressions
        Root<Instructor> root = cq.from(Instructor.class);
        Join<Instructor, IdProof> insIdProofJoin = root.join(Instructor_.idProof);
        Join<Instructor, Vehicle> insVehicleJoin = root.join(Instructor_.vehicles);
        Join<Instructor, Student> insStudentJoin = root.join(Instructor_.students);
        Join<Student, Instructor> studentInsJoin = insStudentJoin.join(Student_.instructors);
        Join<Student, Vehicle> studentVehicleJoin = insStudentJoin.join(Student_.vehicles);
        Join<Vehicle, Document> vehicleDocumentJoin = studentVehicleJoin.join(Vehicle_.documents);

        // prepare select expressions.
        CompoundSelection<InstructorDto> selection = cb.construct(InstructorDto.class, root.get(Instructor_.id),
                root.get(Instructor_.name), root.get(Instructor_.fatherName), root.get(Instructor_.address),
                insIdProofJoin.get(IdProof_.proofNo), insVehicleJoin.get(Vehicle_.vehicleNumber),
                insVehicleJoin.get(Vehicle_.vechicleType), insStudentJoin.get(Student_.name),
                insStudentJoin.get(Student_.fatherName), studentInsJoin.get(Instructor_.name),
                studentVehicleJoin.get(Vehicle_.vehicleNumber), vehicleDocumentJoin.get(Document_.name));

        // prepare where expressions.
        Predicate instructorIdGreaterThan = cb.greaterThan(root.get(Instructor_.id), 2);
        Predicate documentNameIn = cb.in(vehicleDocumentJoin.get(Document_.name)).value("1").value("2");
        Predicate where = cb.and(instructorIdGreaterThan, documentNameIn);

        // prepare orderBy expressions.
        List<Order> orderBy = Arrays.asList(cb.asc(root.get(Instructor_.id)),
                cb.asc(insIdProofJoin.get(IdProof_.proofNo)), cb.asc(insVehicleJoin.get(Vehicle_.vehicleNumber)),
                cb.asc(studentInsJoin.get(Instructor_.name)), cb.asc(studentVehicleJoin.get(Vehicle_.vehicleNumber)),
                cb.asc(vehicleDocumentJoin.get(Document_.name)));

        // prepare query
        cq.select(selection).where(where).orderBy(orderBy);
        DataPrinters.listDataPrinter.accept(queryExecutor.fetchListForCriteriaQuery(cq));

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-28T14:44:39.407

我喜欢这种方法，因为它简单干净：

```
 String getCompaniesIdAndName = " select "
            + " c.id as id, "
            + " c.name as name "
            + " from Company c ";

    @Query(value = getCompaniesWithoutAccount)
    Set<CompanyIdAndName> findAllIdAndName();

    public static interface CompanyIdAndName extends DTO {
        Integer getId();

        String getName();

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T08:20:02.847

您可以基于此类映射另一个实体（您应该使用实体名称来区分两者），而第二个实体将是一种 dto（不要忘记[dto 有设计问题](http://avihai-java.blogspot.co.il/2010/11/single-model-no-to-presentation-model.html)）。您应该将第二个定义为只读并给它起一个好名字，以明确这不是一个常规实体。顺便说一下，只选择几列称为投影，所以用它google会更容易。

替代方案 - 您可以使用您需要的字段列表创建命名查询（您将它们放在 select 中）或使用带有投影的条件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-04T10:12:39.367

您可以`multiselect`为此使用功能。

```
 CriteriaBuilder cb=session.getCriteriaBuilder();
            CriteriaQuery<Object[]> cquery=cb.createQuery(Object[].class);
            Root<Car> root=cquery.from(User.class);
            cquery.multiselect(root.get("id"),root.get("Name"));
            Query<Object[]> q=session.createQuery(cquery);
            List<Object[]> list=q.getResultList();
            System.out.println("id        Name");
            for (Object[] objects : list) {
                System.out.println(objects[0]+"        "+objects[1]);
             } 
```

这是由 hibernate 5 支持的。在 hibernate`createCriteria`的进一步版本中已弃用。所以你可以`criteria builder`改用。

# mysql - 在查询中检查不同表中的相同条件

> ID：11626762
> 
> 赞同：0
> 
> 时间：2012-07-24T08:13:19.383
> 
> 标签：mysql, sql

我想将在按产品分组的日期之前进行的库存变动相加。我必须根据文档类型检查不同表格中的日期。

基本上我有 3 种类型的动作：发票、无效发票和其他类型的文件。这些文件的信息在 3 个表格中：

*   **发票：** `DOC` , `DATE`, ....
*   **NULLED_INV:** `DOC` , `DATE`, ....
*   **其他人：** `DOC` , `DATE`, ....

然后我将所有动作放在另一张桌子上：

*   **运动**( `PRODUCT_ID`, `DOC`, `DOC_TYPE`, `QUANTITY`...)

所以我需要检查相应表格中的日期，`DOC_TYPE`以便将运动加起来`QUANTITY`。例如，如果`DOC_TYPE = 1`然后检查日期`DOC`，`INVOICES`如果`DOC_TYPE = 2`然后检查日期，`NULLED_INV`如果`DOC_TYPE = 3`然后检查日期`OTHERS`，然后将按产品分组的所有动作加起来：

```
PRODUCT_ID TOTAL_MOVEMENTS_BEFORE_XXXX
1001       10
1002       25
... 
```

关于如何进行此类查询的任何想法？

我尝试在子句中使用 IF`WHERE`但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:24:05.323

最简单的解决方案应该是`UNION`：

```
SELECT product_id, count(*) total_movements_before
FROM movements m
LEFT JOIN (
  SELECT doc, date
  FROM invoices
  UNION ALL
  SELECT doc, date
  FROM nulled
  UNION ALL
  SELECT doc, date
  FROM others
) sub
ON m.doc = sub.doc
WHERE sub.date < :beforedate
GROUP BY m.product_id 
```

不过，我必须补充一点，你为什么不在表格中添加一列`invoices`来指示类型？`UNION`这样，您可以将三个表合并为一个，并且当您想从所有三个中进行选择时不需要s（例如`SELECT * FROM movements m LEFT JOIN invoices i ON m.doc = i.doc AND m.doc_type = i.doc_type`）

# php - 必须生成什么查询，以便所有评论与其子评论一起排序

> ID：11626766
> 
> 赞同：-1
> 
> 时间：2012-07-24T08:13:41.720
> 
> 标签：php, mysql, sql-order-by

我有一个评论发布系统，不同的用户可以在其中发布他们的评论。还有一个子评论功能，用户也可以在其中给出他们的子评论，就像他们一样，也可以删除它们。

我将所有评论和子评论存储在一个名为 main_reviews 的表中，该表有一个父 id 字段，通过它我可以检测哪个是评论，哪个是子评论。主评论的父 id 值为 0，而子评论的父 id 值为 id，它们是子评论。

因此，当我使用 php 函数 mysql_fetch_array() 在页面上显示所有评论和子评论时，我想使用一个查询来整理所有评论和子评论。我使用了以下查询：

mysql_query("select * from main_reviews where p_id=0 order by id desc");

这将显示所有正确的数据。但转折就在这里：我想对所有评论及其子评论进行排序，这意味着当用户发布子评论时，该特定子评论及其主要评论应该像 facebook 一样显示在顶部。

因此，无论是使用“union”还是“in”子句或其他任何内容，都必须生成什么查询，以便所有评论与其子评论一起排序，即使它们的子评论稍后发布。

很抱歉，如果有任何语法错误，因为我来自非英语国家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:23:27.073

从结构的角度来看，最好不要在同一个表中包含注释和子注释。我会把它们分成两张桌子，所以你有类似的东西

```
Table comments
id (int,primary,auto increment)
body (text)
date (datetime) 
```

和

```
Table subcomments
id (int,primary,auto increment)
comment_id (int,foreign key)
body (text)
date (datetime) 
```

使用这种结构，您可以简单地触发查询以获取评论和相应的子评论。想象一下，您有一条 id 为 1 的评论，只需使用

```
$query="SELECT * FROM subcomments WHERE comment_id=1 ORDER BY date DESC";
$result=mysql_query($query); 
```

将`ORDER BY date DESC`首先为您提供最新的子评论。

要一次获取所有评论和子评论，请使用类似

```
SELECT * FROM comments,subcomments WHERE comments.id=subcomments.comment_id ORDER BY comments.date,subcomments.date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:30:46.217

我能想到在一个查询中执行此操作的唯一方法是让所有评论的 parent_id 都有自己的 id 而不是 0（可能将其重命名为 comment_id 或其他东西），然后按 parent_id 排序，然后按日期。它不是很规范化，但这样你就可以在一个查询中做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T08:35:06.307

我相信您最好的选择是两个查询（假设您只能回复顶级评论）。

获取评论

```
SELECT * FROM comments WHERE parent_id = 0 ORDER BY date DESC 
```

获取子评论：

```
SELECT * FROM WHERE parent_id <> 0 ORDER BY parent_id ASC, DATE DESC 
```

然后，您可以在 PHP 中轻松关联子注释。

另一方面，我会用它`NULL`来表示没有父帖子，而不是`0`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T08:35:39.473

如果我理解正确，您会遇到这样的情况：您有许多带有发布日期的子评论，您需要这些子评论来订购您的数据。您需要某些订单的最新发布日期（无论是主发布还是子发布的发布日期）。

（简写：maincomment = mc，subcomment = sc，mcid=is of mc，scid=id of sc）

现在像这样重组你的结果集：

```
$mc = array();
// Loop over resultset here
foreach ($resultset as $onecomment){
 $mcid = ..(fetch from id or parentid from $onecomment)..
 if (..is_subcomment..){
   // put in subcomment of the right mc
   $mc[$mcid]["subcomment"][] = $onecomment;
 } else {
   // this is a maincommant
   $mc[$mcid] = $onecomment;
 }
 // And ALWAYS store the postdate, be it from the subcomment, of maincomment,
 // but only if it is later than the current
 if (!isset($mc[$mcid]["lastpostdate"])){
    // first, always store
    $mc[$mcid]["lastpostdate"] =  $onecomment["postdate"];
 } else {
    // Only store if this one is bigger
    if (strtotime($onecomment["postdate"]) > strtotime($mc[$mcid]["lastpostdate"])){
         // overwrite
         $mc[$mcid]["lastpostdate"] =  $onecomment["postdate"];
    }
 }
} 
```

现在您已经存储了每个发布的最后一个发布日期。现在您可以使用 $mc[$mcid]["lastpostdate"] 在 lastpostdate 对您的数组进行排序。这种重组的总体思路是将基本信息（后日期）链接到数组的主条目。

# php - 在不带参数的 PayPal 中返回 url

> ID：11626767
> 
> 赞同：2
> 
> 时间：2012-07-24T08:13:43.203
> 
> 标签：php, symfony, paypal

我已将 PayPal 与我的 eshop 连接，并且我想在成功付款后重定向回我的 eshop 到没有付款变量的特定页面。在手册中写入使用参数

```
rm=1 
```

我的架构如下所示：

```
 $this->form = array('cmd' => '_xclick',
        'business' => 'bis@email.tld',
        'cert_id' => 'ABCDEFGDe',
        'lc' => 'EN',
        'custom' => 'test',
        'invoice' => $orderId,
        'currency_code' => 'EUR',
        'no_shipping' => '1',
        'no_note'=>'1',
        'item_name' => 'bought item',
        'item_number' => '1',
        'rm'=>'1',
        'amount' => $price,
        'return'=> $returnURL,
        'notify_url'=>$notifyURL,

    ); 
```

但即使 rm 设置为 1 并设置了 return，PayPal 仍然使用 GET 方法（如 rm=0）重定向回我的页面，并使用所有参数

有没有办法正确设置 rm=1 ？我也试过不带引号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:57:21.087

根据 PayPal，您需要将`rm`参数设置为`2`以 POST 参数而不是 GET 参数（`rm`设置为`1`）的形式获取付款详细信息。

另请看：[Paypal 返回 URL - 使用 GET 参数？](https://stackoverflow.com/questions/3094426/paypal-return-url-using-get-parameters)

希望这会有所帮助 - 约翰

**更新：**设置使 PayPal 通过 GET 方法调用返回页面的参数
是正确的，但没有 GET 参数（很抱歉一开始就不太正确，也没有双关语的意思）。 不过，我可能找到了正确的解决方案：在您的 PayPal 个人资料中，禁用付款详细信息的传输（在您可以设置默认返回 URL 的页面上）。如果启用此选项似乎会覆盖参数，无论后者设置为哪个值。`rm``1`
`rm`

约翰

# r - 在 R 的 ggmaps 上加载地图 PNG 的栅格数据

> ID：11626778
> 
> 赞同：1
> 
> 时间：2012-07-24T08:14:30.073
> 
> 标签：r, linux, ggplot2, png, ggimage

*这将在 R 的邮件列表中交叉发布。*

我将地图作为 png 格式，所以我不会使用该`get_map`功能。我已经从 png 中提取了栅格数据，我希望将地图加载到 R 的显示上，然后我想在其上绘制一个点。

所以，这就是我尝试过的方式`ggmaps`。该程序正在编译。这里的问题是没有显示任何输出。

```
library (png)
library (ggmap)

latitude  = c(40.702147,40.718217,40.711614)
longitude = c(-74.012318,-74.015794,-73.998284)

# Reads a PNG and outputs a raster array.
img <- readPNG (system.file ("img", "My.png", package="png"))

df <- data.frame (latitude, longitude)

# img: raster array read from the map png.
ggimage (img, fullpage = TRUE) + geom_point (data = df, aes_auto (df), size = 2)

qplot (latitude, longitude, data = df, colour = I("red"), size = I(3)) 
```

**当然，我做错了什么。请指出。**

```
> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: x86_64-unknown-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=C                 LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] ggmap_2.1     ggplot2_0.9.1 png_0.1-4    

loaded via a namespace (and not attached):
 [1] colorspace_1.1-1   dichromat_1.2-4    digest_0.5.2       grid_2.15.1       
 [5] labeling_0.1       MASS_7.3-18        memoise_0.1        munsell_0.3       
 [9] plyr_1.7.1         proto_0.3-9.2      RColorBrewer_1.0-5 reshape2_1.2.1    
[13] RgoogleMaps_1.2.0  rjson_0.2.8        scales_0.2.1       stringr_0.6       
[17] tools_2.15.1      
> 
```

* * *

**编辑：我发现了一个错误。** 其实我是第一次用 运行它`source (uff.R)`，这个命令没有显示任何错误。然后我尝试了`Rscript`。

```
anisha@linux-y3pi:~> Rscript uff.R
Loading required package: ggplot2
Loading required package: methods
Error in eval(expr, envir, enclos) : object 'x' not found
Calls: print ... sapply -> lapply -> eval.quoted -> lapply -> FUN -> eval
Execution halted 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T09:37:24.350

你`ggimage`失败了，因为里面没有`x`和`y`。将您的经纬度坐标重命名为 x 和 y。这是一个完全可重现的示例。这是基本的 ggplot 东西：

```
> library(png)
> library(ggplot2)
> img <- readPNG(system.file("img", "Rlogo.png", package="png"))
> latitude  = c(40.702147,40.718217,40.711614)
> longitude = c(-74.012318,-74.015794,-73.998284)
> df <- data.frame (x=longitude,y=latitude)
> qplot(x,y,data = df, colour = I("red"), size = I(3)) 
```

在命令行上运行这些命令，您应该会看到一个绘图。失败的可能原因是：

*   您的 R 没有与显示器的 X11 连接。这一切都在本地 Linux 机器上运行吗？你还没有连接到服务器？如果 R 不能弹出图形窗口，它可能会尝试创建一个 Rplots.pdf 文件。
*   您正在运行未打印的脚本。将所有要在 print() 函数调用中生成输出的 ggplot、grid 和 lattice 图形函数包装起来。这是一个常见问题解答，我想。Paul Hiemstra 将此作为答案，但随后将其删除...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T08:46:50.680

调用`grid`基于绘图的库（`lattice`和`ggplot2`）时，您需要显式地`print`绘制绘图，以便在交互式会话之外使用它时获得任何输出：

```
bla = ggplot(...)
print(bla) 
```

或更短：

```
print(ggplot(...)) 
```

# windows-phone-7 - 在 facebook 上发布位置，仅使用纬度和经度坐标

> ID：11626783
> 
> 赞同：0
> 
> 时间：2012-07-24T08:14:55.403
> 
> 标签：windows-phone-7, facebook-graph-api, geolocation

我正在创建一个本地 Windows Phone 应用程序，并且我希望有一个功能，可以在地图上显示位置的 facebook 墙贴（比如当你标记某个地方时）。

这似乎是一个重复的问题，但我还没有找到 C# 代码。

所以我需要发布地点，但我只有纬度和经度，**没有 facebook placeId**

这是不起作用的示例代码：

```
 var parameters = new Dictionary<string, object>();

        parameters["message"] = txtMessage.Text;

        var place = new Dictionary<string, object>();
        place["location"] = new GeoCoordinate { Latitude = 60.1654712,
                                                     Longitude = 24.9220499 };
        parameters["place"]=place;
        fb.PostAsync("me/feed", parameters); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-24T11:35:17.117

您可以尝试搜索距离您的纬度/经度坐标一定距离内的地点，然后让用户选择其中一个结果。

有关详细信息，请参阅[https://developers.facebook.com/docs/reference/api/#searching](https://developers.facebook.com/docs/reference/api/#searching)。

# c - void* 是什么意思以及如何使用它？

> ID：11626786
> 
> 赞同：179
> 
> 时间：2012-07-24T08:15:02.087
> 
> 标签：c

今天在阅读别人的代码时，我看到了类似的东西`void *func(void* i);`，`void*`这里的函数名和变量类型分别是什么意思？

另外，我们什么时候需要使用这种指针以及如何使用呢？

* * *

## 回答 #1

> 赞同：211
> 
> 时间：2012-07-24T11:15:36.317

指向的指针`void`是“通用”指针类型。A`void *`可以在没有显式转换的情况下转换为任何其他指针类型。您不能取消引用 a`void *`或对其进行指针运算；您必须首先将其转换为指向完整数据类型的指针。

`void *`通常用于需要能够在同一代码中使用不同指针类型的地方。一个经常被引用的例子是库函数`qsort`：

```
void qsort(void *base, size_t nmemb, size_t size, 
           int (*compar)(const void *, const void *)); 
```

`base`是数组的地址，是数组`nmemb`中元素的数量，`size`是每个元素的大小，`compar`是指向比较数组中两个元素的函数的指针。它被这样调用：

```
int iArr[10];
double dArr[30];
long lArr[50];
...
qsort(iArr, sizeof iArr/sizeof iArr[0], sizeof iArr[0], compareInt);
qsort(dArr, sizeof dArr/sizeof dArr[0], sizeof dArr[0], compareDouble);
qsort(lArr, sizeof lArr/sizeof lArr[0], sizeof lArr[0], compareLong); 
```

数组表达式`iArr`, `dArr`, 和`lArr`在函数调用中从数组类型隐式转换为指针类型，并且每个表达式都从“指向`int`/ `double`/ `long`”的指针隐式转换为“指向`void`”。

比较函数看起来像：

```
int compareInt(const void *lhs, const void *rhs)
{
  const int *x = lhs;  // convert void * to int * by assignment
  const int *y = rhs;

  if (*x > *y) return 1;
  if (*x == *y) return 0;
  return -1;
} 
```

通过接受`void *`,`qsort`可以处理任何类型的数组。

使用的缺点`void *`是您将类型安全扔出窗外并进入迎面而来的交通。没有什么可以保护您免于使用错误的比较例程：

```
qsort(dArr, sizeof dArr/sizeof dArr[0], sizeof dArr[0], compareInt); 
```

`compareInt`期望它的参数指向`int`s，但实际上是在使用`double`s。没有办法在编译时发现这个问题；你只会得到一个错误的数组。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-07-24T08:20:26.167

使用 void * 意味着该函数可以采用不需要是特定类型的指针。例如，在套接字函数中，您有

```
send(void * pData, int nLength) 
```

这意味着您可以通过多种方式调用它，例如

```
char * data = "blah";
send(data, strlen(data));

POINT p;
p.x = 1;
p.y = 2;
send(&p, sizeof(POINT)); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-07-24T08:23:40.310

C在这方面表现出色。可以说`void`是虚无`void*`就是一切（可以是一切）。

正是这个微小`*`的差异。

雷内指出了这一点。A`void *`是指向某个位置的指针。如何“解释”的内容留给用户。

这是在 C 中拥有不透明类型的唯一方法。非常突出的示例可以在例如 glib 或通用数据结构库中找到。在“C 接口和实现”中对其进行了非常详细的处理。

我建议您阅读完整的章节并尝试理解“get it”指针的概念。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-07-24T08:17:05.323

```
void* 
```

是一个“指向内存的指针，不假设存储的是什么类型”。例如，您可以使用，如果您想将参数传递给函数，并且该参数可以是多种类型，并且在函数中您将处理每种类型。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-24T08:19:34.933

您可以查看这篇关于指针的文章[http://www.cplusplus.com/doc/tutorial/pointers/](http://www.cplusplus.com/doc/tutorial/pointers/)并阅读章节：**void pointers**。

这也适用于 C 语言。

> void 类型的指针是一种特殊类型的指针。在 C++ 中，void 表示没有类型，因此 void 指针是指向没有类型的值的指针（因此也是未确定的长度和未确定的取消引用属性）。
> 
> 这允许 void 指针指向任何数据类型，从整数值或浮点数到字符串。但是作为交换，它们有一个很大的限制：它们指向的数据不能直接取消引用（这是合乎逻辑的，因为我们没有要取消引用的类型），因此我们总是必须将 void 指针中的地址转换为在取消引用之前指向具体数据类型的其他指针类型。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-24T08:38:23.303

空指针称为通用指针。我想用一个示例 pthread 场景来解释。

线程函数的原型为

```
void *(*start_routine)(void*) 
```

pthread API 设计者考虑了线程函数的参数和返回值。如果这些东西是通用的，我们可以在作为参数发送时将类型转换为 void*。类似地，可以从 void* 中检索返回值（但我从未使用过线程函数的返回值）。

```
void *PrintHello(void *threadid)
{
   long tid;

   // ***Arg sent in main is retrieved   ***
   tid = (long)threadid;
   printf("Hello World! It's me, thread #%ld!\n", tid);
   pthread_exit(NULL);
}

int main (int argc, char *argv[])
{
   pthread_t threads[NUM_THREADS];
   int rc;
   long t;
   for(t=0; t<NUM_THREADS; t++){
      //*** t will be type cast to void* and send as argument.
      rc = pthread_create(&threads[t], NULL, PrintHello, (void *)t);   
      if (rc){
         printf("ERROR; return code from pthread_create() is %d\n", rc);
         exit(-1);
      }
   }    
   /* Last thing that main() should do */
   pthread_exit(NULL);
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-24T08:21:42.533

C11 标准 (n1570) §6.2.2.3 al1 p55 说：

> 指向的指针`void`可以转换为指向任何对象类型的指针或从指向任何对象类型的指针转​​换。指向任何对象类型的指针都可以转换为指向 void 的指针并再次返回；结果应与原始指针比较。

您可以使用此通用指针来存储指向任何对象类型的指针，但您不能对它使用通常的算术运算，也不能尊重它。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-24T08:21:42.503

a`void*`是一个指针，但它指向的类型是未指定的。当您将 void 指针传递给函数时，您需要知道它的类型，以便稍后在函数中将其转换回正确的类型以使用它。您将看到`pthreads`使用与您的示例中的原型完全相同的函数的示例，这些原型用作线程函数。然后，您可以将该`void*`参数用作指向您选择的通用数据类型的指针，然后将其转换回该类型以在您的线程函数中使用。使用 void 指针时需要小心，因为除非您返回到其真实类型的指针，否则您最终可能会遇到各种问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-24T08:18:29.197

该函数接受一个指向任意类型的指针并返回一个这样的类型。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2012-07-24T08:21:57.713

这意味着指针，您可以使用此链接获取有关指针的更多信息 [http://www.cprogramming.com/tutorial/c/lesson6.html](http://www.cprogramming.com/tutorial/c/lesson6.html)

# google-sheets - Google 表格中的公式错误

> ID：11626789
> 
> 赞同：1
> 
> 时间：2012-07-24T08:15:21.393
> 
> 标签：google-sheets, google-sheets-formula

我有一个带有以下公式的 Google 表格：

```
=IFERROR(IF(AA3="","",MID((LEFT(AA3,LEN(AA3)-1)),FIND("|",AA3)+1,30))) 
```

现在这返回一个数字。

奇怪的是它在 100% 的情况下都有效并返回适当的数字，但是如果我在一些奇怪的情况下尝试使用这个数字进行计算，那么新公式会失败，告诉我“数字”不是数字。

例子：

```
(-121|102)  -121    102  -->the first is a combination which I then break apart into -121 and 102 
```

把公式复制下来，所有的工作都 100%。

然后我继续处理这些数字，在奇怪的情况下，公式告诉我“102”不是数字。

在示例输出下方：

```
    (-121|102) -121 102 76.00
    (-238|139‎) -238 139‎ #价值！
    (-297|52) -297 52 395.73
    (-127|201) -127 201 186.81
    (-186|149) -186 149 336.89
    (-141|120) -141 120 290.08
    (-106|97‎) -106 97‎ #价值！
    (-238|139‎) -238 139‎ #价值！
    (-297|52‎) -297 52‎ #价值！
    (-160|221) -160 221 290.06
    (-197|200) -197 200 294.55
    (-238|139‎) -238 139‎ #价值！
     (-19|10) -19 10 #价值！
     (-21|22) -21 22 323.83
```

有什么我可以在公式中放入强制输出为数字的吗？

```
=IFERROR(IF(AA3="","",MID((LEFT(AA3,LEN(AA3)-1)),FIND("|",AA3)+1,30))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:38:26.740

该问题是由某些单元格中的“不可见”非数字字符引起的。如果您列出其中一个无效数字的字符代码，例如示例输出中的第 2 行，您将看到在文本末尾有第四个代码为*8206的不可见字符。*您可以使用此公式来验证这一事实（假设单元格位于 position `AA2`）：

```
=CODE(MID(AA2,FIND("|",AA2)+4,1)) 
```

您应该能够使用正则表达式替换来摆脱非数字字符，如下所示：

```
=REGEXREPLACE(/* some text */,"[^0-9]","") 
```

因此，根据您的原始公式从一个文本单元格中提取第二个数值的有效公式将是：

```
=IF(AA2="","",REGEXREPLACE(MID(LEFT(AA2,LEN(AA2)-1),
                               FIND("|",AA2)+1,30),"[^0-9]","")) 
```

但是，我会推荐一个更稳定的公式来识别第二个值，基于 和 的`|`位置`)`：

```
MID(AA2,FIND("|",AA2)+1,FIND(")",AA2)-FIND("|",AA2)-1) 
```

产生以下结果公式，用于从文本单元格中充分提取第二个数值：

```
=IF(AA2="","",REGEXREPLACE(MID(AA2,FIND("|",AA2)+1,
                               FIND(")",AA2)-FIND("|",AA2)-1),"[^0-9]","")) 
```

# python - 通过 BeautifulSoup 提取后如何通过正则表达式运行属性值？

> ID：11626793
> 
> 赞同：0
> 
> 时间：2012-07-24T08:15:27.993
> 
> 标签：python, regex, url, unicode, beautifulsoup

我有一个要解析的 URL，尤其是 widgetid：

```
<a href="http://www.somesite.com/process.asp?widgetid=4530">Widgets Rock!</a> 
```

我已经编写了这个 Python（我是 Python 的一个新手——版本是 2.7）：

```
import re
from bs4 import BeautifulSoup

doc = open('c:\Python27\some_xml_file.txt')
soup = BeautifulSoup(doc)

links = soup.findAll('a')

# debugging statements

print type(links[7])
# output: <class 'bs4.element.Tag'>

print links[7]
# output: <a href="http://www.somesite.com/process.asp?widgetid=4530">Widgets Rock!</a>

theURL = links[7].attrs['href']
print theURL
# output: http://www.somesite.com/process.asp?widgetid=4530

print type(theURL)
# output: <type 'unicode'>

is_widget_url = re.compile('[0-9]')
print is_widget_url.match(theURL)
# output: None (I know this isn't the correct regex but I'd think it
#         would match if there's any number in there!) 
```

我想我错过了正则表达式的一些东西（或者我对如何使用它们的理解），但我无法弄清楚。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T08:21:24.400

这个问题与 BeautifulSoup 没有任何关系。

问题在于，正如[文档所解释的](http://docs.python.org/library/re.html#re.match)那样，`match`仅匹配字符串的开头。由于您要查找的数字位于字符串的末尾，因此它不返回任何内容。

要在任何地方匹配数字，请使用`search`- 并且您可能希望将`\d`实体用于数字。

```
matches = re.search(r'\d+', theURL) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T08:23:53.453

我不认为你想要重新 - 你可能想要：

```
from urlparse import urlparse, parse_qs
s = 'http://www.somesite.com/process.asp?widgetid=4530'
qs = parse_qs(urlparse(s).query)
if 'widgetid' in qs:
   # it's got a widget, a widget it has got... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T08:20:36.213

使用[urlparse](http://docs.python.org/library/urlparse.html#urlparse.urlparse)：

```
from urlparse import urlparse, parse_qs
o = urlparse("http://www.somesite.com/process.asp?widgetid=4530")
if "widgetId" in parse_qs(o.query):
    # this is a 'widget URL' 
```

# mysql - MySQL：获取指定名称的最大值

> ID：11626794
> 
> 赞同：0
> 
> 时间：2012-07-24T08:15:33.407
> 
> 标签：mysql

我有一张桌子：

```
name | math   | history  | status  
-----------------------------
jon  |   80   |   90     | 1  
alex |   90   |   70     | 1  
alex |   87   |   80     | 1  
jon  |   78   |   80     | 0  
alex |   90   |   60     | 1  
jon  |   30   |   100    | 0  
emile|   99   |   89     | 0 
```

我想要做的是得到一个 name=alex, status=1 并且具有数学最大值的行，然后是满足的行的历史记录。所以结果将是

```
alex |   90   |   70     | 1 
```

我尝试如下代码：

```
select * from sometable where (name=$name and status=1) order by math DESC, history DESC 
```

我得到了我的期望，因为我只能得到 mysql_fetch_array 的第一行。但是想象一下 mysql_fetch 数组中有多少行。

是的，我的代码不是假的，但它不够“复杂”，因为它获取很多行，有人可以给出解决方案吗？谢谢。^^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:17:26.260

只要您只需要一行 - use`LIMIT 1`子句：

```
 SELECT *
    FROM tblname
   WHERE name = 'alex'
     AND status = 1
ORDER BY math DESC
   LIMIT 1 
```

# extjs - IE8 上的 ExtJS 图表字体错误

> ID：11626803
> 
> 赞同：1
> 
> 时间：2012-07-24T08:16:11.010
> 
> 标签：extjs, internet-explorer-8, charts

您好，我在 IE8 上的图表有问题 这是每个浏览器上的外观![在此处输入图像描述](../Images/3ae76eea6976d8f11106aa17036f2059.png)

这就是它在 IE8 上的样子，![在此处输入图像描述](../Images/fa3d4d96f7b95774f8e5cde6f4fe0ab1.png) 我将感谢一些解决此问题的帮助。
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:41:53.747

您使用的是 Windows 7（并且此应用程序是否通过 Intranet 访问）？

*   如果是这样 - 转到工具 -> 兼容性视图设置，然后取消选中“在兼容性视图中显示 Intranet 站点”。
*   此外，通过您的 Web 应用程序添加标题，或在页面部分中使用 a`<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">`来 `<head>`强制 IE=Edge。

我唯一一次看到这个问题是 Windows 7 上的 IE < 10 版本被扔进“IE8/9 兼容性视图”，文档模式被自动设置为 IE 7 标准。

> 另外：图表主题或样式的更改不会解决此问题。我尝试了所有更改样式和创建要应用的新主题的方法，只要浏览器模式错误，IE 就决定使用任何脚本字体。
> 
> 在我的情况下 - 它并没有说明为什么这会发生在我们的销售人员的笔记本电脑上，因为我们的网站强制要求 `http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"`，但不知何故他的浏览器设置为`Browser Mode: IE 9 Compatibility Mode - Document Mode: Internet Explorer 7 Standards`.

*   在 IE 中打开开发人员工具并将他的浏览器改回标准后 - 一切正常。

# html - 更改 css 以扩展内容

> ID：11626805
> 
> 赞同：0
> 
> 时间：2012-07-24T08:16:13.677
> 
> 标签：html, css

Int他跟随css如何使div包装器占据全屏而不仅仅是在中心

```
body {
   margin:0px;
   padding:0px;
   background:#71726e;
   }
div, p, span, a, h1, h2, h3, h4, h5, h6, form {
   margin:0px;
   padding:0px;
   }

.wrapper {
   margin:0px auto;
   padding:0px;
   overflow:hidden;
   width:951px;
   background:url(../images/mid-shadow.jpg) repeat left top;
   }
 left-gap1 {
   margin:    0px ;
   padding:0px;
   font-size:0px;
   line-height:0px;
   width:6px;
   float:left;
   }
.right-gap1 {
   margin:0px;
   padding:0px;
   font-size:0px;
   line-height:0px;
   width:6px;
   float:left;
   }
.main {
   margin:0px;
   padding:0px;
   width:939px;
   float:left;
   }
.header {
   margin:0px;
   padding:0px;
   width:939px;
   float:left;    
   }
.nav-area {
   margin:0px;
   padding:0px;
   width:939px;
   height:54px;
   float:left;
   background:#000000;
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:17:54.497

将包装宽度更改为 100%

```
.wrapper {
   margin:0px auto; /* I guess you wont need this here */
   padding:0px;
   overflow:hidden;
   width:100%;   /* Change This */
   background:url(../images/mid-shadow.jpg) repeat left top;
   } 
```

注意：这只会使用 100% 的屏幕宽度而不是高度，如果您在网站中使用图像作为背景，那么我建议您在`<body>`标签上使用 background-image 属性。

根据您的新要求进行编辑

你想要这样的东西[吗](http://jsfiddle.net/jxFQx/)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:22:34.937

```
.wrapper {
   padding:0px;
   overflow:hidden;
   width: 100%;
   background:url(../images/mid-shadow.jpg) repeat left top;
   } 
```

使用边距：0px 自动；连同宽度：951px；将使您的内容居中，宽度仅为 951 像素。内容不会比这更广泛。如上所示，将其设置为 100%。

# java - 拥有全局事件总线的注意事项是什么？

> ID：11626806
> 
> 赞同：3
> 
> 时间：2012-07-24T08:16:15.777
> 
> 标签：java, events

在您的应用程序中使用全局事件总线是一个糟糕的设计吗？
如何确保您最终不会在整个应用程序中出现一组紧密耦合的组件相互通信？
你能想到 Java 世界中的机制/工具/库来对其执行一些纪律吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T09:17:13.267

全局事件总线（即应用程序中的每个组件（类或对象）都可以访问的事件总线）的问题在于，您无法控制谁将使用该事件总线。

如果您是唯一的开发人员或正在与紧密的团队合作，则可以就组件可以使用事件总线的条件达成一致。否则所有条都关闭。

话虽如此，应该有可能与事件总线进行通信，否则没有意义。通过为负责事件实际触发的事件总线引入代理，您可以控制谁依赖于代理。

通过使用依赖注入（通过[guice](http://code.google.com/p/google-guice/)或 hand-rolled 之类的框架），您可以自动提供代理状态，从而显式地显示对事件总线的依赖。

# logging - 日志没有发生？

> ID：11626807
> 
> 赞同：1
> 
> 时间：2012-07-24T08:16:18.287
> 
> 标签：logging, log4j

我正在使用 struts1.3.8 和日志记录，使用 log4j。它是在 Windows 上写入日志，而不是在 Unix 上。
经过分析，我知道 lib 中有 commons-logging 和 log4j jar。我认为发生了冲突。当我删除 commons-logging 并执行它时，`ClassNotFoundException:org.apache.commons.logging.LogFactory`
我正在使用 log4j.properties 文件作为附加程序和写入日志的位置。我尝试通过删除 log4j 来使用 commons-logging，此时如何配置属性？

我的代码是

```
log4j.rootLogger = INFO,CA, FA

#Console Appender
log4j.appender.CA = org.apache.log4j.ConsoleAppender
log4j.appender.CA.layout = org.apache.log4j.PatternLayout
log4j.appender.CA.layout.ConversionPattern =  %d  %5p %c{1}:%L - %m%n

#File Appender
log4j.appender.FA = org.apache.log4j.FileAppender
log4j.appender.FA.File =/usr/mylogs.log
log4j.appender.FA.layout = org.apache.log4j.PatternLayout
log4j.appender.FA.layout.ConversionPattern = %d  %5p [%t] - %m%n 
```

任何想法都是值得赞赏的。

拉克斯曼杂烩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:23:36.607

如果日志记录在 Windows 上而不是在 unix 上工作，则表示 log4j 属性文件中指定的路径可能有问题。确保 log4j 属性中的路径正确，文件分隔符应为“/”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-09T08:03:20.217

这是访问权限的问题。没有创建和写入文件的写权限。

# javascript - Three.js 自动旋转相机以聚焦对象

> ID：11626808
> 
> 赞同：5
> 
> 时间：2012-07-24T08:16:18.007
> 
> 标签：javascript, three.js

在 three.js 3D 空间中，我有一些位置已知的 MESH 对象和一个相机对象。

我想要实现的是：当我点击一个按钮时，相机会自动旋转和缩放（改变它的位置），这样用户的视图就会聚焦在选定的对象上。选定对象的位置是已知的。

请给我一些建议如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:59:12.990

尝试`camera.lookAt( object.position );`

你不需要使用四元数。

然后，您可以根据需要将相机移近一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T14:41:56.157

Quaternion slerp 是您平滑旋转到目标位置的朋友。您需要使用四元数（camera.useQuaternion = true）。

```
var newQuaternion = new THREE.Quaternion();
THREE.Quaternion.slerp(camera.quaternion, destinationQuaternion, newQuaternion, 0.07);
camera.quaternion = newQuaternion; 
```

这应该平滑地旋转到目标旋转。也许您需要使用最后一个参数。我不确定缩放。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-01T15:12:39.550

这是使用 slerp 和四元数旋转对象的片段：

```
//Initial and final quaternions
var startQ = new THREE.Quaternion(0,0,0,1);
var endQ = new THREE.Quaternion(0,1,0,0);

//Number of animation frames
var animFrames = 100;
//Pause between two consecutive animation frames
var deltaT = 1;
function goSlerping(acc) {
      if(acc>=1) return;

      //Let's assume that you want to rotate a 3D object named 'mesh'. So:
      THREE.Quaternion.slerp(startQ, endQ, mesh.quaternion, acc);
      setTimeout(function() {
          goSlerping(acc + (1/animFrames));
      }, deltaT);
}
goSlerping(1/animFrames); 
```

所以使用上面的脚本来旋转相机是完全一样的：你只需要改变`mesh.quaternion`.`camera.quaternion`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-11T11:08:17.357

您可能想访问这里... [https://threejsfundamentals.org/threejs/lessons/threejs-cameras.html](https://threejsfundamentals.org/threejs/lessons/threejs-cameras.html) 我做了以下工作并为我工作以专注于用户定义的坐标...

```
camera.lookAt(0, 10, 0);
-----
-----
-----
controls.target.set(0, 10, 0);
controls.update(); 
```

# openssl - 如何在 OpenSSL 中将 hexBinary 数据插入 subjectAltName

> ID：11626812
> 
> 赞同：0
> 
> 时间：2012-07-24T08:16:39.163
> 
> 标签：openssl, x509certificate

我需要我的 X.509 版本 3 证书的 subjectAltName 具有 hexBinary 数据（以十六进制编码的二进制内容）。

示例（UUID？）：25289a27a9ad4510ab20135a96050d09。

使用时

```
subjectAltName = otherName:2.25;FORMAT:HEX,OCTETSTRING:25289a27a9ad4510ab20135a96050d09 
```

出于某种原因，OpenSSL 显示 CSR 或证书的 X509V3 主题备用名称具有其他名称：<不支持>

hxtools 显示未知：

```
subjectAltName otherName 2.25 unknown 
```

有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:52:53.617

这可能与您预期的差不多。尝试通过 ans1parse 输出它，然后使用 -strparse 重新运行命令到您的 SubjectAlternative 名称。如果一切顺利，您应该会看到八进制字符串。

# php - 自动单击网页上的按钮

> ID：11626827
> 
> 赞同：0
> 
> 时间：2012-07-24T08:17:27.210
> 
> 标签：php, javascript

我需要自动单击网页上的按钮。基本上我有一个用户界面来查看网络打印机的日志。此页面已经有一个选项“以 CSV 格式保存”。当我单击此选项时，我会看到一个弹出框，询问您是否要运行或保存该文件。

问题是：我正在创建另一个网页，如果用户单击“Clickme”按钮，他会自动获取该弹出框，当我单击该用户界面中的“以 CSV 格式保存”时，会出现该弹出框。使用 HTTPFOX，我发现“以 CSV 格式保存”具有以下详细信息：

```
<td bgcolor="#333333" height="27" align="right"><input type="button" value="Save in CSV Format... " onClick="get_loglist()"></td> 
```

有什么办法我可以做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:57:02.003

该弹出窗口来自浏览器。您所要做的就是重定向到 CSV 文件，然后就可以了。在 PHP 中，您必须执行类似的操作，

```
<?php
    header('Location: http://yourwebsite.com/path/to/csv')
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:53:28.093

我了解您希望通过按下自定义按钮来执行相同的脚本。

乍一看，您会认为可以按如下方式制作自己的按钮：

```
<input type="button" value="ClickMe" OnClick="get_loglist()"/> 
```

但是在添加事件监听器的情况下，单击时您没有相同的功能（如果有一个 addEventListener 触发了另一个执行）。但是，对我来说，执行 SaveButton.click() 甚至创建一个事件对象并在 SaveButton 处触发它似乎更安全。

要使用 JS 获取元素，您可以使用[JQuery JS 选择器](http://api.jquery.com/category/selectors/)

```
var saveButton = jQuery('[attribute="value"]') 
```

IE

```
var saveButton = jQuery('[value="Save in CSV Format... "]') 
```

和类似的东西（或addEventListener）

```
myCustomButton.onclick = function() { saveButton.click(); } 
```

或者甚至更好的创建和启动事件，如前所述。那个怎么样？

# javascript - img src 代码不从 javascript 呈现

> ID：11626829
> 
> 赞同：-1
> 
> 时间：2012-07-24T08:17:31.173
> 
> 标签：javascript

我正在使用 ajax json 返回一些数据。使用 json 返回的对象具有我需要渲染的图像路径。这是我的 js 函数中的代码

```
data = '<div class="articleWrapper"><div class="articleImgThumb">' + '<img src="'+item.ImagePath;'" />' + '</div></div>'; 
```

我做错了什么，因为我认为这段代码呈现为

```
<div class="articleWrapper">
  <div class="articleImgThumb"> // here should be img src code </div>
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T08:19:56.697

尽量省略分号：

```
item.ImagePath 
```

代替：

```
item.ImagePath; 
```

并添加一个 + ：

```
item.ImagePath + 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T08:22:09.273

试试这个：

```
data = '<div class="articleWrapper"><div class="articleImgThumb"><img src="' + item.ImagePath + '" /></div></div>'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T08:22:00.297

此外，在 item.ImagePath 之后缺少连接“+”运算符

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T08:23:18.633

```
data = '<div class="articleWrapper"><div class="articleImgThumb">' + '<img src="' + item.ImagePath + '" />' + '</div></div>'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T08:24:06.573

你用过**；**而不是**+**之后`item.ImagePath`。试试这个：

```
data = '<div class="articleWrapper"><div class="articleImgThumb">' + '<img src="'+item.ImagePath+'" />' + '</div></div>'; 
```

# javascript - 无法在单个页面上显示多个 Highcharts

> ID：11626830
> 
> 赞同：3
> 
> 时间：2012-07-24T08:17:39.887
> 
> 标签：javascript, charts, highcharts

我正在尝试在一页上显示 3 个 Highcharts 生成的图表。我已经加载了前两个就好了，但是当我为第三个添加 Javascript 时，它们都没有显示。我在这个 JSFiddle 中复制了我的代码：

[http://jsfiddle.net/ricburton/bCU2E/](http://jsfiddle.net/ricburton/bCU2E/)

任何帮助或指导将不胜感激。

我已经检查了这个答案：[在单个网页中管理多个高图表](https://stackoverflow.com/questions/8253590/manage-multiple-highchart-charts-in-a-single-webpage?rq=1)

并用谷歌搜索了很多。我确信这是我对 Javascript 的有限理解阻碍了我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T08:20:34.670

你在某处错过了}，这是我在萤火虫中看到的：

> 函数体后缺少 }

**编辑**

你还没有关闭最后一个闭包，`});`在代码末尾添加

我还删除了 2 个闭包，只有一个，请参阅更新的代码：http: [//jsfiddle.net/bCU2E/2/](http://jsfiddle.net/bCU2E/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T08:24:16.260

您的语法错误，已更新；这是正确的[小提琴](http://jsfiddle.net/epoch/bCU2E/1/)

# amazon-ec2 - 在 URL 交换期间如何处理挂载的 EBS 卷？

> ID：11626831
> 
> 赞同：0
> 
> 时间：2012-07-24T08:17:42.973
> 
> 标签：amazon-ec2, amazon-web-services, amazon-elastic-beanstalk

我使用 EBS 卷作为数据存储（在我的例子中是 Lucene 索引）。我在初始化后立即将这个 50Gb 卷从 Java 应用程序挂载到一个实例。每次启动环境时，我的 Web 应用程序都会将 EBS 卷附加到它正在运行的 EC2 实例上，安装磁盘，并开始使用那里的数据（用于读取**和**写入）。一切正常。

现在我正在尝试实现 URL 交换机制，这意味着我每次想要重新部署应用程序时都会启动一个新环境。但 EBS 卷仍将附加到旧环境。冲突很明显。

我不知道这怎么可能解决。有任何想法吗？

（我已经在[AWS 论坛上](https://forums.aws.amazon.com/thread.jspa?threadID=99408)发布了这个问题，但没有得到任何合理的答案）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T18:03:47.493

我不完全确定这会回答它：

您可以对卷进行快照并从中创建新卷并将新卷（基于快照）附加到新服务器。

或者，您可以通过网络将数据重新同步到新卷。

但是通过使用 AWS API，您可以对旧卷进行快照、创建新卷、挂载到新服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:08:38.540

到目前为止，我发现的唯一解决方案是有一个附加的 EBS 卷的额外 EC2 实例，并通过 NFS 在运行的 EBT 节点之间共享。

# knockout.js - Knockout.js 相当于 Kendo MVVM 嵌套绑定

> ID：11626832
> 
> 赞同：1
> 
> 时间：2012-07-24T08:17:46.213
> 
> 标签：knockout.js, kendo-ui

我们目前正在使用 Kendo UI 及其集成的 MVVM 框架来控制客户端应用程序中的表单（例如，输入验证、根据条件禁用/启用表单字段）。由于我们遇到了 Kendo MVVM 框架的一些限制，我们计划切换到 Knockout/Knockout-Kendo.js。

由于我们的表单是高度动态的，对我们来说一个关键特性是 Kendo MVVM 的嵌套绑定。它们允许我们监视预先不知道的动态组合表单的字段：

[http://docs.kendoui.c​​om/getting-started/framework/mvvm/overview#bindings](http://docs.kendoui.com/getting-started/framework/mvvm/overview#bindings)

查看 knockout.js 文档，我在那里找不到等价物。如何在 knockout.js 中模拟类似的 api？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:19:16.800

通常，您将使用[with](http://knockoutjs.com/documentation/with-binding.html)或[if](http://knockoutjs.com/documentation/if-binding.html)绑定来处理嵌套结构。这也可以通过[模板](http://knockoutjs.com/documentation/template-binding.html)绑定来完成。事实上，您甚至可以通过执行类似的操作来动态选择要使用的[模板](http://knockoutjs.com/documentation/template-binding.html#note_4_dynamically_choosing_which_template_is_used)。

对于您的情况，使用动态模板名称似乎是合适的。您将为正在处理的各种“类型”表单创建模板，然后使用项目的“类型”来确定要使用的模板。这是我在首次将功能添加到 KO 时写的一篇文章的链接：[http](http://www.knockmeout.net/2011/03/quick-tip-dynamically-changing.html) ://www.knockmeout.net/2011/03/quick-tip-dynamically-changing.html 。

# objective-c - 如果计数器达到 3，则停止触摸移动

> ID：11626849
> 
> 赞同：1
> 
> 时间：2012-07-24T08:18:57.670
> 
> 标签：objective-c, ios, drag-and-drop

我有一个具有拖放`UIView`功能的应用程序。我应该只拖 3 次，不能超过。如何跟踪拖动次数？我尝试在 中增加一个计数器`touchesBegan()`，但是在点击视图时计数器也增加了。我希望仅在拖动视图时才增加它。您还可以提供一个片段，用于将一个小的拖放`UIView`到顶部的另一个视图中。我不知道我是否使用了正确的方法。

我的代码：

```
(void) touchesMoved:(NSSet*)touches withEvent:(UIEvent*)event {
    [self.view setMultipleTouchEnabled:NO]; 
    UITouch *touch = [touches anyObject]; 
    if ([touch view] == option1View || [touch view] == option2View ||
        [touch view] == option3View ||[touch view] == option4View) { 
            CGRect frame = [[touch view] frame];
            if(counter == 1){
                frame.origin.x = 10;
                frame.origin.y = 90; 
            }
            [[touch view] setFrame:frame]; 
```

我在触摸开始时增加了我的计数器。我检查了 3 个计数器的 if 条件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:36:57.047

Apple 有一个专门用于拖动的*手势识别器。*它是`UIPangestureRecognizer`。它只识别平移手势，而不识别点击或其他东西。

这是文档[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIPanGestureRecognizer_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIPanGestureRecognizer_Class/Reference/Reference.html)

您可以更轻松地管理平移/拖动手势，然后使用`touchesBegan()`等...

来自 Doc： `UIGestureRecognizerStateEnded`当所有手指都抬起时结束。

您可以检查状态并增加您的计数器。

# wordpress - 使用 index.php 将 URL 重定向到 wordpress 默认 URL 不起作用

> ID：11626851
> 
> 赞同：0
> 
> 时间：2012-07-24T08:19:11.397
> 
> 标签：wordpress, .htaccess, redirect

我有问题。

我从基于 php 的网站迁移到 wordpress 系统。旧链接是 domain.com/index.php?Subject={Value} 例如：domains.com/index.php?Subject=Mistake-19、domains.com/index.php?Subject=Mistake domain.com/index。 php?Subject=Home_Content-31 新链接是常规的wordpress urls domain.com/?p={value}

我试图创建 htaccess，但它不起作用。例如

```
Redirect 301 /index.php?Subject=Mistake-19 http://www.domain.com/?p=51 
```

将我转移到 domain.com/?Subject=Mistake-19

也试过这个：

```
rewriterule ^index.php?Subject=Mistake-19(.*)$ http://www.domain.com/?p=51$1 [r=301,nc] 
```

仍然转移到 domain.com/?Subject=Mistake-19

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T00:25:30.043

您必须为查询创建一个条件 (?Subject=Mistake-19) 并转义“。” （使用斜线）。

```
RewriteCond %{QUERY_STRING} ^Subject=Mistake-19$
RewriteRule ^index\.php?$ http://www.domain.com/?p=51? [R=301] 
```

# database - Zend Framework 具有特殊权限的动态 ACL，具体取决于 DB 条目

> ID：11626857
> 
> 赞同：3
> 
> 时间：2012-07-24T08:19:35.073
> 
> 标签：database, zend-framework, doctrine-orm, acl, privileges

我需要在 ZF 应用程序中实现 ACL（使用 Doctrine 2）。

目标是：当用户登录时，应确定他的所有权限并保存到内存缓存中，以便在整个会话期间快速访问。

问题是存在无法通过模块>控制器>操作描述的特殊权限。

例如

表'用户'

身份证名称

1 名管理员

2彼得

…</p>

表“角色”

身份证名称

1 名管理员

2个用户

…

表“用户角色”

id user_id role_id

1 1 1

2 2 2

…

表“项目”

身份证所有者

1 1

2 4

…</p>

我们有项目，只能由管理员或创建项目的用户（所有者）编辑。这怎么能在特权表中描述呢？

表“特权”

id role_id …

1 2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:47:45.320

断言： http: [//framework.zend.com/manual/en/zend.acl.advanced.html](http://framework.zend.com/manual/en/zend.acl.advanced.html)

# java - 如何有效地嵌套 GridbagLayout 托管窗格，并使其正确调整大小？

> ID：11626860
> 
> 赞同：2
> 
> 时间：2012-07-24T08:19:43.457
> 
> 标签：java, swing, gridbaglayout

我正在尝试在我的程序中设置我的面板，但我没有得到我认为的 GridBagLayout 的预期行为（当然*它是*正确的，GIGO）。我想调整页面上的一些组件的大小。

我设置它的方式分为两部分：

### 1\. 管理器窗格内的内容窗格：

```
 myPlayerContentPane = 
            new PlayerContentPane(myEventListener);
    c.gridx = 0;
    c.gridy = 0;
    c.fill = GridBagConstraints.BOTH;
    c.weightx = 1;
    c.weighty =1;
    this.add(myPlayerContentPane,c);
    myPlayerContentPane.setBorder(BorderFactory.createLineBorder(Color.black)); 
```

当我调整框架大小时，这个子窗格应该会扩展，对吗？这是因为 weight 和 fill 命令。

### 2.内容窗格的内容：

```
 setLayout(new GridBagLayout());
    c.insets = new Insets(1, 1, 1, 1);

    c.gridx = 0;
    c.gridy = 0;
    c.fill = GridBagConstraints.HORIZONTAL;
    this.add(newCharacterButton,c);
    newCharacterButton.addActionListener(new ActionListener(){
    ...
    });

    c.gridx = 1;
    c.gridy = 0;
    c.gridheight = 1;
    c.fill = GridBagConstraints.HORIZONTAL;
    this.add(newCharacterName,c);

    c.gridx = 0;
    c.gridy = 1;
    c.fill = GridBagConstraints.HORIZONTAL;
    this.add(loadCharacterButton,c);
    loadCharacterButton.addActionListener(new ActionListener() {
    ...
    });

    c.gridx = 2;
    c.gridy = 0;
    c.fill = GridBagConstraints.HORIZONTAL;
    this.add(editCharacterButton,c);

    c.gridx = 2;
    c.gridy = 1;
    c.fill = GridBagConstraints.HORIZONTAL;
    this.add(deleteCharacterButton,c);
    deleteCharacterButton.addActionListener(new ActionListener(){
    ...
    });

    c.gridx = 2;
    c.gridy = 2;
    c.fill = GridBagConstraints.BOTH;
    c.gridheight = 3;
    c.ipady = 200;
    c.weighty = 1;
    this.add(characterListScroller,c);

    c.gridx = 0;
    c.gridy = 4;
    c.fill = GridBagConstraints.BOTH;
    c.gridwidth = 2;
    c.ipady = 200;
    c.weighty =1;
    this.add(characterSummaryScroller,c); 
```

现在，当程序加载时它看起来很好，我希望调整两个 JScrollPanes 的大小。但是，即使我在我的代码中删除了所有设置首选大小的实例（即使是框架本身），我也看不到*任何*调整大小的行为。

这是程序第一次加载时的设置，捕捉到最小尺寸：

![在此处输入图像描述](../Images/89d26bf4cd053f3d62d1ed002e8ce558.png)

这是我调整框架大小的时候，面板没有效仿。

![在此处输入图像描述](../Images/0ab3e58e96c68829be0e67f6bfe9285a.png)

现在我的管理器窗格*位于*带有 CardLayout 的框架内，我刚刚检查过它并没有随框架调整大小。这就是顶层窗格（我设置的）。我怎样才能让它全部调整大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:27:32.947

如果您将顶部面板包装在另一个带有 BorderLayout 的 JPanel 中（假设您将面板放在 CENTER 中），您应该获得所需的行为。BorderLayout 自动调整到框架大小并强制其中心面板占据整个可用区域。

# php - PHP MVC - 模板/加载变量问题

> ID：11626863
> 
> 赞同：0
> 
> 时间：2012-07-24T08:19:50.723
> 
> 标签：php, oop, model-view-controller, variables

我正在 PHP 中创建一个基本的 MVC 结构化 CMS，作为了解 MVC 工作原理的一种方式（因此我没有使用真正的预构建引擎）。[我有一个基本版本，其结构与本教程](http://www.markisgood.com/blog/php/create-your-own-lightweight-php-mvc-framework)非常相似。但是，我希望自动加载视图，绕过对模板类的需求。如果强烈建议这样做，我会坚持使用模板概念（如果有人能解释为什么它如此必要，我将不胜感激。）无论如何，下面是我的路由器类，我已经修改它以自动加载控制器中的视图文件。

```
 public function loader() {
        /*** check the route ***/
        $this->getPath();

        /*** if the file is not there diaf ***/
        if (is_readable($this->controller_path) == false) {
            $this->controller_path = $this->path.'/controller/error404.php';
            $this->action_path = $this->path.'/view/error404.php';
        }

        /*** include the path files ***/
        include $this->controller_path;
        include $this->action_path;

        /*** a new controller class instance ***/
        $class = $this->controller . 'Controller';
        $controller = new $class($this->registry);

        /*** check if the action is callable ***/
        if (is_callable(array($controller, $this->action)) == false) {
            $action = 'index';
        } else {
            $action = $this->action;
        }
        $controller->$action();
    }

    /**
    *
    * @get the controller
    *
    * @access private
    *
    * @return void
    *
    */
    private function getPath() {

        /*** get the route from the url ***/
        $route = (empty($_GET['rt'])) ? '' : $_GET['rt'];

        if (empty($route)) {
            $route = 'index';
        } else {
            /*** get the parts of the route ***/
            // mywebsite.com/controller/action
            // mywebsite.com/blog/hello
            $parts = explode('/', $route);
            $this->controller = $parts[0];
            if(isset( $parts[1])) {
                $this->action = $parts[1];
            }
        }
        if( ! $this->controller ) { $this->controller = 'index'; }
        if( ! $this->action ) { $this->action = 'index'; }

        /*** set the file path ***/
        $this->controller_path = $this->path .'/controller/'. $this->controller . '.php';
        $this->action_path = $this->path .'/view/'. $this->controller . '/'. $this->action . '.php';
    } 
```

这会阻止我的视图文件加载控制器给出的变量（教程网站对此有更好的演示）但是在设置`$this->registry->template->blog_heading = 'This is the blog Index';`视图时不会加载它，因为 template.class 被绕过了。基本上我要问的是如何将 template.class 转移到加载函数中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T10:56:52.957

*“视图只是一个愚蠢的模板”*这一相当普遍的误解主要是由 Ruby-on-Rails 和遵循其损坏的 ORM-Template-Adapter 的那些长期存在的。我不能直截了当地将它们实现为模型-视图-控制器...

视图应该处理 MVC 和受 MVC 启发的设计模式模式中的表示逻辑。这使它们成为对象，具有处理多个模板的能力。

根据您在 Web 应用程序中使用的受 MVC 启发的模式（使用 PHP 实现经典 MVC 是不可能的），您的视图要么从类似控制器的结构（在 MVP 和 MVVM 模式中）接收数据，要么能够直接请求信息来自模型层（Model2 MVC 和 HMVC 模式）。我个人更喜欢从模型层获取数据的活动视图。

像这样的 PS 代码`$this->registry->template->blog_heading`让[Demeter](http://c2.com/cgi/wiki?LawOfDemeter)流血了。

PPS 关于如何实现纯 php 模板，请阅读[这篇文章](http://codeangel.org/articles/simple-php-template-engine.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T08:40:58.627

在我自己开发的 MVC 中，加载视图的工作方式与您所拥有的类似，但比您链接到的示例提供的方式要简单得多。（当我第一次决定尝试学习 MVC 时，我看了那个例子，我记得它把我弄糊涂了 x;。

本质上，在您确定该文件存在之后，您只需要求（是的要求，我觉得找不到文件是在这种情况下停止执行脚本的一个很好的理由）该文件。

所以..而不是整个模板类的东西（我希望我不会回避你的问题并且离基础太远，这是一个让控制器打开视图文件的简单示例。

```
<?php
class Pizza_Shop_Controller extends Base_Controller
{
    public function index()
    {
        $data['users'] = array('bob','lisa','bertha');
        $data['some_string'] = "Whoa I'm a string!";

        $this->render_view('index',$data);
    }

    public function contact()
    {
        if($_POST)
        {
            Contact::process($_POST);
            return $this->render_view('contact_success');
        }
        else
        {
            return $this->render_view('contact_form');
        }
    }

}

class Base_Controller
{

    protected function render_view($view_name,$data = array())
    {
        /*
         * I also think render_view should take care of loading the layout, and then inject the content into the middle of the layout file,
         * so that you aren't trapping yourself to a specific layout, and repeating the header and footer inside of every view file
        */

        extract($data); //places all $data variables into the local scope.. very clean and ezy ;].
        require($this->root_directory.DS."$view_name.php");
    }

    /**********************************/
    public function _no_action($view_name) //Called if there is no corresponding action
    {
        /* You can use method_exists to test if a method exists within the controller, if it does not exist,
         * you can then call this function, and pass it the name of the view that is attempting to be opened
         */
         if($this->view_exists($view_name))
         {
            $this->render_view($view_name,$data);
         }
         else
         {
            $this->render404();
         }
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T08:54:05.023

我知道这对你现在没有多大帮助，但几个月前我遇到了同样的问题。这是基于我构建的框架：

[https://github.com/andyhmltn/Cherry-Framework-Blog-Example/](https://github.com/andyhmltn/Cherry-Framework-Blog-Example/)

我不确定它在哪里或如何做，因为我已经有一段时间没有真正看过它了，但是四处看看，加载控制器、设置变量然后加载视图的代码可能在库文件夹。它允许您这样做：

```
/** Controller **/
class ExampleController extends Controller {
    public function index() {
        $helloworld = 'Hello world';
        $this->set('hello_world', $helloworld);
        #Renders view automatically
    }
}

/** View **/
echo $hello_world; 
```

# android - 如何在相机预览“Goggles 风格”中裁剪图像 - Android

> ID：11626869
> 
> 赞同：1
> 
> 时间：2012-07-24T08:20:07.023
> 
> 标签：android, camera, customization, crop, preview

我正在尝试制作一个从图片中读取文本的小型 Android 应用程序。我已经为 Android 实现了 Tesseract 工具，并且能够识别用相机拍摄的照片中的文本。我现在的问题是拍照距离真的很严格。如果用户必须与他试图阅读的文本保持非常精确的距离，这并不是真正的用户友好。

我在想最好的方法就像在谷歌护目镜中那样，用户可以裁剪他喜欢扫描的图像的特定部分（在相机预览上）。有没有现成的定制相机（找不到）或者你们中的任何一个人做过吗？

谢谢， 拉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:16:11.817

Android 相机应用程序有裁剪代码，它没有很多依赖项，并且很容易集成到您的应用程序中。签出 AOSP 代码并尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:37:03.863

我认为查看 ZXing 源代码可能是您的最佳选择。它有一个特定的焦点，专注于条形码的主要区域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-23T12:01:57.487

我的应用程序中有同样的问题。

在这里（[裁剪图像ala Google Goggles](https://stackoverflow.com/questions/5365308/crop-image-ala-google-goggles)）你可以找到一个解决方案，但它不像我想的那么“干净”，所以我仍在寻找更好的东西。

编辑：找到了！[http://adblogcat.com/a-camera-preview-with-a-bounding-box-like-google-goggles/](http://adblogcat.com/a-camera-preview-with-a-bounding-box-like-google-goggles/)

# java - 在 java 代码中创建 postgresql 表

> ID：11626870
> 
> 赞同：3
> 
> 时间：2012-07-24T08:20:11.580
> 
> 标签：java, postgresql

我有一个与 postgreSQL 数据库连接的 java 代码。

现在，我希望当它连接到数据库时，我也会创建数据库表。

但我的问题是，它不会创建数据库，我不知道是什么问题。

这是我的代码：

```
Statement st = null;
        ResultSet rs = null;
        try{
            Class.forName("org.postgresql.Driver");
            System.out.println("connect");
            } catch (ClassNotFoundException cnfe){
              System.out.println("Could not find the JDBC driver!");
              System.exit(1);
            }
        Connection conn = null;
        try {
            //database location, database user, database password
            conn = DriverManager.getConnection
                           ("jdbc:postgresql:"POS_DB","postgres", "123456");
            st = conn.createStatement();
            String qs = "CREATE TABLE IF NOT EXISTS user(user_id SERIAL NOT NULL PRIMARY KEY,username varchar(225) NOT NULL UNIQUE,password varchar(225),islogged varchar(10))";
            String qs1 = "SELECT * FROM test";
        rs = st.executeQuery(qs);

            System.out.println("connect");
             } catch (SQLException sqle) {
               System.out.println("Could not connect");
               System.exit(1);
             } 
```

我确信我在创建表时的 sql 语句是正确的。但是当我运行它时，它不会创建表。如果我把字符串替换成`select`sql，就没有问题了。

有人知道我的案子吗？

提前致谢 ..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T08:26:33.600

您可能想像这样使用[PreparedStatement](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html)：

```
PreparedStatement ps = connection.prepareStatement("CREATE TABLE IF NOT EXISTS user(user_id SERIAL NOT NULL PRIMARY KEY,username varchar(225) NOT NULL UNIQUE,password varchar(225),islogged varchar(10))");
ps.executeUpdate();
ps.close(); 
```

您需要为*DML*和 DDL 语句执行更新。

另外，请确保您的 DDL 语句是正确的，我不知道 PostgreSQL 的确切“如果不存在”语法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T08:33:32.937

这一行：

```
conn = DriverManager.getConnection
                       ("jdbc:postgresql:"POS_DB","postgres", "123456"); 
```

是无效的。

你有一个`"`不应该在这里的之前的 POS_DB。

也请查看一些示例检查[文档](http://jdbc.postgresql.org/documentation/80/connect.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-26T07:20:59.317

postgresql 10 - 'user' 是一个关键字，因此对于表来说不是一个好的选择。您将需要一个不是保留字的名称。

# java - Java 编译器 run() 方法

> ID：11626873
> 
> 赞同：2
> 
> 时间：2012-07-24T08:20:31.083
> 
> 标签：java, api, compiler-construction, compilation, java-compiler-api

我在网上找到了有关 JavaCompiler 的代码

```
JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
int result = compiler.run(null, null, null,
             "src/org/kodejava/example/tools/Hello.java"); 
```

它说`compiler.run(null, null, null`这三个空值分别是默认`System.in`值`System.out`和`System.err`。但是这些值实际上是做什么的，因为我找不到这些值的 API？有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T08:24:26.800

Javadoc 在[这里](http://docs.oracle.com/javase/6/docs/api/javax/tools/Tool.html#run%28java.io.InputStream,%20java.io.OutputStream,%20java.io.OutputStream,%20java.lang.String...%29)。

> int run(InputStream in, OutputStream out, OutputStream err, String... arguments)
> 
> 使用给定的 I/O 通道和参数运行该工具。按照惯例，工具返回 0 表示成功，返回非零表示错误。生成的任何诊断都将以某种未指定的格式写入 out 或 err。
> 
> ```
> Parameters:
>     in - "standard" input; use System.in if null
>     out - "standard" output; use System.out if null
>     err - "standard" error; use System.err if null
>     arguments - arguments to pass to the tool 
> Returns:
>     0 for success; nonzero otherwise 
> ```

至于 System.in、System.out 和 System.err，它们是（默认情况下）连接到 STDIN、STDERR 和 STDOUT 的全局流。这三个是在 JVM 启动时由操作系统设置的。您可以将它们通过管道传输到文件，或者它们只是写入（读取）控制台。

在这种情况下，您将使用参数来检查程序的编译器输出（而不仅仅是将其发送给用户）。这就是“以某种未指定格式写出的诊断”的用武之地。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T08:26:18.397

您可以指定自己的流，而不是依赖标准系统流。例如，如果您想将输出重定向到某个文件，您可以创建文件输出流，并传递给#run 调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T08:31:53.190

JavaCompiler 是**javax.tools.JavaCompiler**并且它实现了**javax.tools.Tool**接口，参见**javax.tools.Tool#run**方法的 javadoc。

# android - 如何从第三个活动回到第一个活动？

> ID：11626876
> 
> 赞同：5
> 
> 时间：2012-07-24T08:20:35.123
> 
> 标签：android

我有三个活动A，B和C。现在任务我有这个表格A，B和C，在默认的android“标准”模式下活动导航发生这样的A->B->C->B->A .现在我想要的是当我从 B 进入活动 C 时，当我在活动中返回时，我去了以前的活动，即 B 但我想从 C 回到 A。如何实现这一点有人能告诉我吗？ ?

，我想通过意图标志来做，或者如果可能的话想为活动应用启动模式，但我很困惑我应该使用哪种启动模式来实现这一点？-有人可以帮我吗

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-24T08:24:01.097

只需启动一个新意图并清除堆栈中的活动。

```
 Intent intent = new Intent(this, A.class);
 intent.addFlags(IntentCompat.FLAG_ACTIVITY_CLEAR_TASK);
 intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)
 startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T08:23:12.720

`finish()`启动Activity C时使用方法。即

```
Intent i = new Intent(ActivityB.this, ActivityC.class);
startActivity(i);
finish(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T08:26:18.930

您可以`finish()`在启动 Activity C 时使用 Activity B。所以您的堆栈将只是 A->C。在启动 Activity C 之前使用`ActivityB.finish()`方法。其他方法可能是覆盖按下的后退按钮键。

```
@Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            //do your process here
        }
        return super.onKeyDown(keyCode, event);
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T09:32:40.403

另一种方法：

使用`Fragments`. 片段被添加到容器中，并在你喜欢的时候被其他人替换。被替换的 Fragment 可以添加到堆栈中，也可以不添加。你可以自己决定。在这种情况下，流程如下：

*   MainActivity 将 Fragment A 添加到容器中。
*   按钮被按下
*   片段 A 被片段 B 替换。片段 A 被添加到
    堆栈中`.addToBackStack(..)`
*   显示片段 B
*   按钮被按下
*   片段 B 被片段 C 替换。片段 B 未添加到堆栈中。
*   显示片段 C
*   后退被按下
*   显示片段 A

**更新**

您可以从阅读Android 提供的[文档开始。](http://developer.android.com/guide/components/fragments.html)

一个简单的例子，让你开始并解释基础知识。我正在使用 Android 支持库 v4 来支持比 HoneyComb 更旧的版本：

**main_activiy - XML**

```
<LinearLayout>
   <FrameLayout id:content_container/>
<LinearLayout> 
```

**主要活动**

```
public class MainActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_activiy ); 
        FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
        transaction.add(R.id.content_container, new FragmentA());
        transaction.commit();
    }
} 
```

**Fragment A**（类似你可以创建 Fragment B 和 C）

```
public class Fragment A extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragmentA, container, false); 
        return view;
    }
} 
```

您可以在您的内部实现逻辑`Fragment`并捕获例如点击事件。这是您可以从 OnClickListener 在片段之间切换的方式：

```
private class mClickListener implements OnClickListener {

        public void onClick(View v) {
            FragmentTransaction transaction = getFragmentManager().beginTransaction();
            transaction.replace(R.id.content_container, new FragmentB);
            transaction.addToBackStack(...); // Remove this when you don't want it to be stacked
            transaction.commit();
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T08:23:11.567

您可以覆盖活动中的 onBackPressed 方法来启动 A 活动，而不是回溯历史树。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-24T08:25:34.583

你应该调用finish(); 在 B 活动中，当您移动到

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-29T12:28:15.480

我有更好的解决方案，不需要： 1-在 Activity C 中覆盖 onBackPressed() 2-从 C 调用 startActivity(A)，因此无需创建额外的意图。3-无需在活动 B 中调用 finish()。

只需在您开始 B 的活动 A 中添加意图标志，如下所示：

```
Intent intent = new Intent(A.this, B.class);
intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);// Only need this line in A.java
startActivity(intent); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-04T12:39:36.270

**如果您想从C**返回**A** Activity 类而不重新加载第一个 Activity 类，请尝试以下代码

 **这也将从 backstack 中删除中间活动。

```
Intent intent = new Intent(this, A.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
startActivity(intent);
finish(); 
```**

# jquery - 顶部和左侧不反映给定的负边距

> ID：11626882
> 
> 赞同：0
> 
> 时间：2012-07-24T08:20:51.910
> 
> 标签：jquery, css

我在 div 元素中有两个元素。一个样式为向左浮动，另一个样式为向右浮动。我给了它们负边距，但是当我尝试找到顶部和左侧（使用`.position()`jQuery 的函数）时，因为我必须对它们应用一些翻译，左侧元素的左侧位置显示不正确。右元素给出正确的顶部和左侧。

这是代码：

### HTML

```
<hmtl>
<head></head>
<body>
    <div class = "rotate">
    <div class = "figure1"></div>
    <div class = "figure2"></div>
    </div>

</body>
</html> 
```

### CSS

```
.rotate{
    width: 300px;
    height: 70px;
    border:2px solid black;
    margin: auto;
}
.figure1{ 
position: relative;    
float: left;
margin-left: -80px;
display: inline-block;    
width: 70px;
 height: 70px;  
 background:url("http://www.northareadevonfootball.co.uk/Images/football.jpg");
 background-size: 100% 100%;          
);
}
.figure2{
position: relative;
float: right;
display: inline-block;
margin-right: -80px;   
width: 70px;
 height: 70px;
  background:url("http://www.northareadevonfootball.co.uk/Images/football.jpg");
 background-size: 100% 100%;      
} 
```

### Javascript (jQuery)

```
var a = $(".figure1").position();
var b = $(".figure2").position();
console.log(a,b); 
```

[Jsfiddle 上的演示](http://jsfiddle.net/eD4Ws/21/)。

查看`margin-left`for 类`figure1`和`margin-right`for 类，请注意，当我们在控制台中`figure2`看到 的输出时，-80px 的边距反映在其中一个而不是另一个。`console.log`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:27:22.460

尝试使用`offset()`而不是`position()`：

```
var a = $(".figure1").offset();
var b = $(".figure2").offset();
console.log(a.top + '|' + a.left + ' ' + b.top + '|' + b.left); 
```

[演示](http://jsfiddle.net/9LwFk/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T08:34:22.577

尝试`offset()`代替`position()`

# java - 哪个应用程序在前台？

> ID：11626891
> 
> 赞同：0
> 
> 时间：2012-07-24T08:21:36.247
> 
> 标签：java, android

如果我正在使用后台服务或广播接收器，我可以通过它的包名称以某种方式知道当前哪个应用程序在前台吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:22:17.520

使用[ActivityManager](http://developer.android.com/reference/android/app/ActivityManager.html)。

```
ActivityManager mManager = (ActivityManager)getSystemService(UpdateService.ACTIVITY_SERVICE);
List<ActivityManager.RunningTaskInfo> myTasks = activityManager.getRunningTasks(1);

ForegroundActivity => myTasks.get(0).topActivity.getPackageName(); 
```

# c# - 用于轻松构建 CI 的 C# 项目/解决方案结构

> ID：11626895
> 
> 赞同：0
> 
> 时间：2012-07-24T08:21:48.273
> 
> 标签：c#, .net, msbuild, continuous-integration, teamcity

我们在一个 Git 存储库中有大约 80 个 C# 项目。我们的 CI 服务器是 TeamCity，我们使用它来构建对 git 主存储库的每次提交。

我正在尝试想出在服务器上构建所有项目的最佳方法。

这些项目目前在几个 .sln 文件中组合在一起（每个大约 20 个项目），创建一个包含所有项目的“主”解决方案文件是否是一种常见的做法，以便构建服务器只需要构建这个解决方案？

还是最好保留一些 MSBuild 或其他脚本文件，这些文件本身将执行每个解决方案/项目的构建，无论它认为合适吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:43:06.027

我们还在一个解决方案中使用包含大约 130 个项目的 TeamCity。没有适合所有的答案。对于 CI，我认为关键问题是构建和运行测试需要多长时间。无论是在你的构建农场还是在开发者盒子上。为高效的软件开发做最简单的事情。

请注意，棘手的是什么是快速的？速度是相对的，不同的开发人员可以工作非常不同。例如，有些人喜欢每天只提交一次。所以它需要有上下文。

让您的 TeamCity 构建与您在开发人员框上的构建相同。层数越少越好。把事情简单化。

请参阅类似的答案：[Visual Studio 大型解决方案](https://stackoverflow.com/questions/11187985/visual-studio-large-solution/11188120#11188120)。

# windows-server-2008 - 使用 plesk 在 windows server 2008 上安装 ioncube

> ID：11626900
> 
> 赞同：0
> 
> 时间：2012-07-24T08:21:57.743
> 
> 标签：windows-server-2008, iis-7.5, plesk, ioncube

我在 Windows plesk 控制面板上安装 ioncube 时遇到问题。我使用了 PHP 的线程安全版本并下载了 Windows VC9 (x86) ioncube。我将加载程序文件放入`C:\Program Files (x86)\Parallels\Plesk\Additional\PleskPHP5\ext`

我确实编辑文件`C:\Program Files (x86)\Parallels\Plesk\Additional\PleskPHP5\php.ini`并在任何其他`zend_extension_ts`行之前确保包含以下内容：

> zend_extension_ts = "C:\Program Files (x86)\Parallels\Plesk\Additional\PleskPHP5\ext\ioncube_loader_win_5.2.dll"

并重新启动 IIS 服务器软件。

但不运行 ioncube。:(

附加信息：

> 加载程序位于：C:\Program Files (x86)\Parallels\Plesk\Additional\PleskPHP5\ext\ioncube_loader_win_5.2.dll
> 
> 加载器操作系统代码：win
> 
> 加载器架构：x86
> 
> 加载器字长：32
> 
> 加载器 PHP 版本：5.2
> 
> 加载程序线程安全：是
> 
> 加载器编译器：VC6
> 
> 加载器版本：4.0r7
> 
> 文件大小为：475136 字节。
> 
> MD5总和为：a82aa4dc4ce18ff62ea8faaca97a31be
> 
> 加载器文件：下载加载器文件
> 
> 在 ini 文件中找到加载程序：是
> 
> 操作系统额外安全性：无
> 
> PHPRC 是：空的
> 
> INI 目录为：空
> 
> 其他 INI 文件：（无）
> 
> 服务器类型是：本地
> 
> PHP unname：Windows NT EASYSOFT 6.1 build 7600
> 
> 服务器字长为：32
> 
> 禁用功能：EMPTY
> 
> 可写加载器位置：C:\inetpub\vhosts\E-touch.ir\httpdocs, C:\inetpub\vhosts\E-touch.ir\cgi-bin

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:24:42.240

Find Solve 我确实升级了 Plesk 并在命令行模式下运行 php

php -c "C:\Program Files (x86)\Parallels\Plesk\Additional\PleskPHP5\php.ini" -v

我使用 cammand 在 php.ini 中发现了问题。当问题解决时。ioncube 运行。:D

# android - 如何在滚动中禁用蓝色阴影（Android 应用程序）。

> ID：11626902
> 
> 赞同：7
> 
> 时间：2012-07-24T08:22:04.367
> 
> 标签：android, shadow

我尝试了以下方法来禁用滚动时的蓝色阴影

所有这些都不起作用：

```
android:fadingEdge="none"
android:background="@null"
android:cacheColorHint="@null" 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-26T14:18:24.570

在您的 XML 中使用它`ScrollView`：

```
android:overScrollMode="never" 
```

您可以设置为“始终”、“从不”或“ifContentScrolls”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:45:36.050

use below attribute for `ListView` to stop scrolling shadow

```
android:scrollingCache="false" 
```

`android:fadingEdge="none"` is used to stop black background on scrolling

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T09:50:00.083

尝试如下使用

```
android:cacheColorHint="@android:color/transparent" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T09:29:25.747

我怀疑 @null 和什么都没有一样。尝试将值设置为完全透明：像这样：

```
android:background="#00000000"
android:cacheColorHint="#00000000" 
```

# javascript - 事件在周视图中垂直组织，在月视图中水平组织

> ID：11626910
> 
> 赞同：0
> 
> 时间：2012-07-24T08:23:00.250
> 
> 标签：javascript, jquery, fullcalendar

在玩了一个大型项目的 fullcalendar 之后，我发现 fullCal 在周视图中垂直排序事件（检查附加图像的底部视图）和月视图中水平排序（附加图像顶部）。

它们都应该在周视图中水平排序。我们怎样才能让它们在周视图中水平排序呢？

谢谢

![事件在周视图中垂直组织，在月视图中水平组织](../Images/76abede09ca7b9fe5ac6ac731f79b7cc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:08:07.473

如果你希望它们都是水平的，而不是使用 basicWeek 视图而不是议程周视图

# android - 使用 CursorAdapter 增加 ListView 的行数？

> ID：11626911
> 
> 赞同：0
> 
> 时间：2012-07-24T08:23:06.263
> 
> 标签：android, listview, android-layout

我正在使用由自定义 CursorAdapter 填充的 ListView，它根据特定行的游标中数据的值返回两个不同的视图。

**一种视图类型**包含一个 TextView，称为 TextView1。
**第二个视图**包含 TextView1 和 TextView2。

问题是我希望将第二个视图视为 ListView 中的两行。所以 Text1 将成为一行，Text2 将成为另一行。

显然，使用 Layouts 我可以让它看起来像是不同的行，但实际上并不是不同的行。我不能独立选择它们，所以当我连接到 ListView 的 OnListItemClick 事件时，我得到一个用于单击 TextView1 和 TextView2 的事件，它们并不明显。有没有办法告诉 ListView 这里有两行而不是一个，或者有没有办法伪造它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:07:53.520

> 有没有办法告诉 ListView 这里有两行而不是一个，或者有没有办法伪造它？

您可以通过两种方式解决此问题。首先，您可以制作自己的自定义`Adapter`来打破`Cursor`正确的行数，然后简单地使用`TextView`每行一个`OnItemClickListener`. 根据`Cursor`'s 数据的大小，这可能很容易或可以避免。

第二种方法是使用您当前的自定义`CursorAdapter`并实现两种类型的行（实现`getViewTypeCount()`和`getItemViewType()`方法），一种是简单`TextView`的，一种是带有两个的`TextViews`。诀窍是您不能使用`OnItemClickListener`on the `ListView`，而是将您的 on 设置`OnCLickListeners`在`TextViews`from the rows 上。如果您使`TextViews`占据整行的宽度和高度，则效果将是被选中的行。在`OnClickListener`for 中，`TextViews`您可以传递 the`Cursor`或`id`for 该行的当前位置来做任何您想做的事情。

# javascript - HTML 5 文件 API 0x80004003

> ID：11626916
> 
> 赞同：0
> 
> 时间：2012-07-24T08:23:14.293
> 
> 标签：javascript, html, file

您好我正在使用 JS HTML5 File API 来处理文件上传到我的服务器。

我在 Aurora 中收到以下错误（Fire Fox Bleeding edge builds）

`NS_ERROR_INVALID_POINTER: Component returned failure code: 0x80004003 (NS_ERROR_INVALID_POINTER) [nsIDOMFileReader.readAsBinaryString]`

```
function readBlob(opt_startByte, opt_stopByte,file,partNo) {

    var start = parseInt(opt_startByte);
    var stop = parseInt(opt_stopByte);
    var reader = new FileReader();

    var totalParts = parseInt(file.size/MAX_READ);
    if((file.size % MAX_READ) !== 0){
        totalParts++;
    }
    // If we use onloadend, we need to check the readyState.
    reader.onloadend = function(evt) {
        if (evt.target.readyState == FileReader.DONE) {
            //var contents =  reader.result;
            postFilePart(partNo,contents,totalParts,escape(file.name))// DONE == 2
        }
    };
    if (file.webkitSlice) {
        var blob = file.webkitSlice(start, stop);
    } else if (file.mozSlice) {
        var blob = file.mozSlice(start, stop);
    }
    reader.readAsBinaryString(blob);
} 
```

错误发生在这一行

```
reader.readAsBinaryString(blob); 
```

我试过 mozSlice 和 Slice

`if (file.mozSlice) { var blob = file.mozSlice(start, stop); }`

它给了我同样的结果。使用 HTML 5 API 可能不是最好的主意，因为这也可能导致其他浏览器出现问题。

有没有人有办法获得相同的功能或者我如何解决这个特定的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:59:17.570

解决了由于调用方法错误导致读取器代码参数错误而重新运行的问题

[https://bugzilla.mozilla.org/show_bug.cgi?id=725289](https://bugzilla.mozilla.org/show_bug.cgi?id=725289)

宁可使用 slice 与 mozSlice

# php - 输入字段的限制范围

> ID：11626917
> 
> 赞同：0
> 
> 时间：2012-07-24T08:23:16.637
> 
> 标签：php, jquery

虽然这是一个很常见的问题。我有一个输入字段，其中输入的数据必须在 1 到 150 之间。

问题是我已经在使用一些验证。许多其他输入字段正在使用该验证。所以我无法改变这一点。它是`num()`功能。

在一个领域`mesure`，我想添加额外的功能。我用验证试了一下。我不知道如何使用`document.ready`.

我可以用 jQuery 或 PHP 来完成。

```
<input type="text" name='mesure' class="numbersonly" maxlength="3" onblur =" validate()"/>

function num() {

    $(".numbersonly").bind('keypress', function(e) {

        if (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57)) {

            $("#errmsg").html("numbers please");

            return false;
        }
    });

}

function validate()
{
   if( document.form.mesure.value >150 )
   {
       alert( "out of range!" );
       document.form.mesure.focus() ;
       return false;
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:25:29.867

为什么不使用onkeypress/onkeyup，使用验证功能检查。但请记住，javascript 并不是真正的限制解决方案——人们可以打开或更改 javascript。还使用 php 检查值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:30:57.850

例如，如果您要限制的输入字段的 ID 为 #text，则可以使用

```
if($('#text').val().length>150){
    //do stuff here
} 
```

由于您可能会将输入的值发布到后端的某个位置，因此真正的验证必须在 php.ini 中进行。在那里，你可以做类似的事情

```
<?php
    if(strlen($_POST['text'])>150){
        echo "too long";
        exit;
    }

    //do other backend stuff here
?> 
```

使用 javascript 进行验证只有在它给用户立即反馈他是否做错的情况下才是好的。然而，客户端总是可以看到像 jQuery/Javascript 这样的客户端代码，所以最终验证使用 php。

# android - 针对不同屏幕的Android开发

> ID：11626921
> 
> 赞同：-2
> 
> 时间：2012-07-24T08:23:28.430
> 
> 标签：android, screen

我需要为不同密度（mdpi、ldpi、hdpi）创建程序中的每张图片吗？如果是，hdpi 的密度必须是多少？哪个适合ldpi？

还有第二个问题。我不明白，屏幕尺寸呢？人们通常会做什么来支持平板电脑？他们对图像不做任何事情，他们只是创建不同的布局（更方便）？我是对的还是我不明白？

除了官方文档之外，阅读一些东西会很好。用更人性化的语言写的东西。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:34:59.427

你可以为你们中的一些人使用 9-patch。例如 - 背景。但实际上 - 是的，您需要 4 尺寸的图像

比例为：

```
mdpi= *4; 
ldpi= *3; 
hdpi= *6; 
xhdpi= *8. 
```

因此，如果您有图像 mdpi 24*24 px，则必须将其设为 36*36 px 以用于 hdpi

还有一些很好的资源[http://www.androidguys.com/2010/02/18/handling-multiple-screen-sizes-part-2/](http://www.androidguys.com/2010/02/18/handling-multiple-screen-sizes-part-2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T08:35:34.193

通常只使用 hdip 图像。（或 xhdip）

但如果您需要正确的尺寸，请制作其他密度的图像

对于平板电脑，需要高分辨率图像。

# ios - 有现成的解决方案还是我需要自定义 UIView？

> ID：11626925
> 
> 赞同：0
> 
> 时间：2012-07-24T08:23:36.713
> 
> 标签：ios, user-interface, uiview

我正在为 iOS 开发时间管理器，需要创建如下图所示的内容。这是一周的任务列表。

![周/日任务列表](../Images/79a189297566bed036f2b0987b259789.png)

*   绿框代表哪一天（周一、周日等...）
*   黑框代表单个任务
*   蓝色框代表添加新任务的按钮

据我了解，我需要创建自定义 UIView 来实现这个设计，对吗？也许有我可以使用的现成库？

先感谢您。阿纳托利。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:32:51.097

I've not really looked at the collections view stuff in iOS 6 yet, but I would think that might be a good match. ( I think that it's existence is not NDA, but further details would be).

I don't think there is anything to directly support this kind of layout in iOS 5, maybe you could use 6 UITableViews for the central section.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T08:26:29.037

你只需要在 UIView 上添加一些 UIImageview 和 UIButtons。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T08:28:39.707

去定制。那是最好的！

同时看看这里，如果你能找到有用的东西。可可也有一些带有源代码的自定义控件。

```
http://www.cocoacontrols.com/controls 
```

# c - 彼得森算法对各种优化标志的行为

> ID：11626928
> 
> 赞同：2
> 
> 时间：2012-07-24T08:23:40.007
> 
> 标签：c, multithreading, algorithm, compiler-construction, parallel-processing

我想检查 gcc 和 icc 的各种优化选项的行为。采用了 Peterson 的 2 Thread mutex 算法。如果 lock 方法中 line a 和 line b（在注释中）的执行顺序被交换，则该算法可能会失败。使用带有 -O0 标志的 icc 或 gcc 进行编译会产生正确的结果。使用带有 -O3 标志的 icc 进行编译会产生不正确的结果。使用带有 -O3 标志的 gcc 进行编译不会产生任何结果。程序挂起。所以我的猜测是 gcc 和 icc 都使用 -O3 标志优化了锁定方法，并假设 a 行和 b 行之间没有依赖关系。因此，两者都产生了错误的结果。编译器很难找到这种依赖关系，所以有没有办法（如 ivdep 这样的编译指示）告诉编译器特定代码块中的依赖关系，这样我们仍然可以对代码的其他部分使用 -O3 标志

锁定方法：

```
void lock(int me)
{
    int other;
    other = 1-me;
    flag[me] = 1; //Line a
    victim = me;  //Line b
    while(flag[other]==1 && victim == me)
    {
    }
} 
```

如果交换行 a 和行 b 的执行顺序，则违反 MUTEX 的示例：

```
T0 0 sets victim=0
T1 1 sets victim=1
T2 1 sets flag[1]=1
T3 1 checks flag[0]. flag[0] not yet set.
T4 1 enters CS
T5 0 sets flag[0]=1 and checks flag[1]. It is set but victim=1.
T6 0 also enters cs 
```

完整代码：

```
#include<stdio.h>
#include<pthread.h>
#include<stdlib.h>
#include<time.h>
#include<stdint.h>
int flag[2];
int victim;
int sharedCounter=0;

void lock(int me)
{
    int other;
    other = 1-me;
    flag[me] = 1;
    victim = me;
    while(flag[other]==1 && victim == me)
    {
    }
}

void unlock(int me)
{
    flag[me]=0;
}

void *peterson(void *ptr)
{
    int tId,i;
    tId = (int ) (intptr_t) ptr;
    for(i=0;i<200;i++)
    {
        lock(tId);
        sharedCounter++;
        printf("%d\t",sharedCounter);
        sleep(1/10);
        unlock(tId);
    }
}

main()
{
    int i;
    for(i=0;i<2;i++)
    {
        flag[i]= 0;
    }
    pthread_t t[2];
    for(i=0;i<2;i++)
    {
        pthread_create(&t[i],NULL,peterson,(void *) (intptr_t) i);
    }

    for(i=0;i<2;i++)
    {
        pthread_join(t[i],NULL);
    }
    printf("shared Counter:%d\n",sharedCounter);
    exit(0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:18:37.457

将变量声明为“易失性”将仅防止对这些变量的读取或写入重新排序。

# php - 在 html2pdf 库中显示图像

> ID：11626933
> 
> 赞同：0
> 
> 时间：2012-07-24T08:23:54.287
> 
> 标签：php, html2pdf

我有一个包含多行的表，每行都有一个图像。

```
<table>
   <tr>
       <td style="">
          <img src="<?php echo $img_path; ?>" />
              <?php echo ucwords($name); ?>
       </td>
       <td style="">
          <span style="border-bottom: 1px solid;margin-left: 98px;">
              <?php echo $date; ?></span>
       </td>
   </tr>
   <tr>
       <td>
          <?php echo $role; ?> 
            Signature
       </td>
       <td style="">
          Date
       </td>
   </tr>
</table> 
```

是否可以在 HTML2PDF 中显示 html 中显示的图像而不是使用他的内置函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T08:46:36.450

```
<?php
require('html2fpdf.php');
$pdf=new HTML2FPDF();
$pdf->AddPage();
$fp = fopen("sample.html","r");
$strContent = fread($fp, filesize("sample.html"));
fclose($fp);
$pdf->WriteHTML($strContent);
$pdf->Output("sample.pdf");
echo "PDF file is generated successfully!";
?> 
```

或者，您可以使用 TCPDF 并可以[像这样尝试](http://www.tcpdf.org/examples/example_006.phps)

```
$content='<img src="sample.jpg">';
$html = <<<EOD
$content
EOD;
$pdf->writeHTMLCell($w=0, $h=0, $x='', $y='', $html, $border=0, $ln=1, $fill=0, $reseth=true, $align='', $autopadding=true);
$pdf->Output("sample.pdf", 'F'); 
```

# java - jfreechart - 将总计标签添加到堆叠条

> ID：11626934
> 
> 赞同：1
> 
> 时间：2012-07-24T08:24:00.460
> 
> 标签：java, jfreechart

是否有可能在标签中显示 stcaked bar 总量。
我正在添加一个示例，它为每个系列添加一个标签

![在此处输入图像描述](../Images/6fcf75cbc805e90ea94f988955f5a7b0.png)

```
stackedxybarrenderer.setSeriesItemLabelGenerator(index, new MyItemLabelGenerator()); 
```

不太行。它在系列中绘制标签（在小方块内）。有什么建议么？

我正在使用这个（来自 omnline 示例）

```
private JFreeChart createChart(TableXYDataset tablexydataset) {
    DateAxis dateaxis = new DateAxis("Date");
    dateaxis.setTickMarkPosition(DateTickMarkPosition.MIDDLE);
    NumberAxis numberaxis = new NumberAxis("Y");
    StackedXYBarRenderer stackedxybarrenderer = new StackedXYBarRenderer(0.10000000000000001D);

    stackedxybarrenderer.setBaseItemLabelGenerator(new StandardXYItemLabelGenerator());
    stackedxybarrenderer.setBasePositiveItemLabelPosition(new ItemLabelPosition(
            ItemLabelAnchor.OUTSIDE12, TextAnchor.BOTTOM_CENTER));
    stackedxybarrenderer.setBaseItemLabelsVisible(true);
    stackedxybarrenderer.setDrawBarOutline(false);
    XYPlot xyplot = new XYPlot(tablexydataset, dateaxis, numberaxis, stackedxybarrenderer);
    JFreeChart jfreechart = new JFreeChart("Stacked XY Bar Chart demo 2", xyplot);
    return jfreechart;
} 
```

和

```
 private TableXYDataset createDataset() {
    TimeTableXYDataset timetablexydataset = new TimeTableXYDataset();
    Day day = new Day(1, 3, 2005);
    Day day1 = new Day(2, 3, 2005);
    Day day2 = new Day(3, 3, 2005);
    Day day3 = new Day(4, 3, 2005);
    Day day4 = new Day(5, 3, 2005);
    timetablexydataset.add(day, 1.0D, "Series 1");
    timetablexydataset.add(day1, 1.7D, "Series 1");
    timetablexydataset.add(day2, 2.2999999999999998D, "Series 1");
    timetablexydataset.add(day3, 3.7000000000000002D, "Series 1");
    timetablexydataset.add(day4, 2.6000000000000001D, "Series 1");
    timetablexydataset.add(day, 3.2000000000000002D, "Series 2");
    timetablexydataset.add(day1, 1.1000000000000001D, "Series 2");
    timetablexydataset.add(day2, 1.3999999999999999D, "Series 2");
    timetablexydataset.add(day3, 2.8999999999999999D, "Series 2");
    timetablexydataset.add(day4, 0.59999999999999998D, "Series 2");
    return timetablexydataset;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:59:56.353

请试试这个： -

```
StackedBarRenderer barrenderer = (StackedBarRenderer)categoryplot.getRenderer();
barrenderer.setBaseItemLabelGenerator(new StandardCategoryItemLabelGenerator());
barrenderer.setBasePositiveItemLabelPosition(new ItemLabelPosition(
            ItemLabelAnchor.OUTSIDE12, TextAnchor.BOTTOM_CENTER)); 
```

对于类别轴，您可以通过以下方式实现相同的目标：-

```
CategoryAxis axis = new CategoryAxis();
axis.setLabel("Date");
axis.setLabelFont(new Font("Courier", Font.BOLD, 16));
axis.setTickLabelFont(new Font("Courier", Font.BOLD, 11));
categoryplot.setDomainAxis(axis); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T08:40:00.393

也许试试这个：

```
 renderer.setBaseItemLabelGenerator(new StandardXYItemLabelGenerator());
 renderer.setBasePositiveItemLabelPosition(new ItemLabelPosition(
            ItemLabelAnchor.OUTSIDE12, TextAnchor.BOTTOM_CENTER));
 renderer.setBaseItemLabelsVisible(true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-14T10:36:09.457

为什么不简单地使用注释：

```
 // First calculate the max y vale (used for positioning the label)
    double maxy = 0;
    for (int col=0; col<dataset.getColumnCount(); col++) {
        double colTotal = 0;
        for (int row=0; row<dataset.getRowCount(); row++) {
            if (dataset.getValue(row, col) != null) {
                colTotal += dataset.getValue(row, col).doubleValue();
            }
        }
        maxy = Math.max(maxy,  colTotal);
    }
    // Calculate the offset - 2% of the max y value worked for me
    double offset = maxy *0.02;

    // calculate the column total for each column
    for (int col=0; col<dataset.getColumnCount(); col++) {
        double colTotal = 0;
        for (int row=0; row<dataset.getRowCount(); row++) {
            if (dataset.getValue(row, col) != null) {
                colTotal += dataset.getValue(row, col).doubleValue();
            }
        }
        //  display as decimal integer
        NumberFormat nf = DecimalFormat.getIntegerInstance();
        // Create the annotation
        CategoryTextAnnotation cta = new CategoryTextAnnotation(nf.format(Math.round(colTotal)),dataset.getColumnKey(col), colTotal+offset);
        cta.setFont(fLabel);
        // Add to the plot
        plot.addAnnotation(cta);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-26T17:42:10.430

也许试试这个 ;) ...我知道这有点像衬衫袖子，但我认为 jfreechart 中没有自动总机制。

```
import java.text.DecimalFormat;
import java.text.NumberFormat;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.axis.DateAxis;
import org.jfree.chart.axis.DateTickMarkPosition;
import org.jfree.chart.axis.NumberAxis;
import org.jfree.chart.labels.ItemLabelAnchor;
import org.jfree.chart.labels.ItemLabelPosition;
import org.jfree.chart.labels.XYItemLabelGenerator;
import org.jfree.chart.plot.XYPlot;
import org.jfree.chart.renderer.xy.StackedXYBarRenderer;
import org.jfree.data.time.Day;
import org.jfree.data.time.TimeTableXYDataset;
import org.jfree.data.xy.TableXYDataset;
import org.jfree.data.xy.XYDataset;
import org.jfree.ui.ApplicationFrame;
import org.jfree.ui.RefineryUtilities;
import org.jfree.ui.TextAnchor;

public class GroupLabels extends ApplicationFrame {
    public GroupLabels(final String title) {
        super(title);

        final JFreeChart chart = createChart(createDataset());
        final ChartPanel panel = new ChartPanel(chart);
        setContentPane(panel);
    }

    public static class MyXYItemLabelGenerator implements XYItemLabelGenerator {
        Map<Number,List<Double>> totals = new HashMap<Number,List<Double>>();
        NumberFormat df = DecimalFormat.getNumberInstance();
        protected void init(XYDataset dataset) {
            if (!totals.isEmpty()) return;

            int seriesCnt = dataset.getSeriesCount();
            for (int series=0; series<seriesCnt; series++) {
                for (int item=0; item<dataset.getItemCount(series); item++) {
                    Number key = dataset.getX(series, item);
                    List<Double> vals = totals.get(key);
                    if (!totals.containsKey(key)) {
                        vals = new ArrayList<Double>(seriesCnt);
                        for (int i=0;i<seriesCnt;i++) vals.add(0d);
                        totals.put(key, vals);
                    }
                    double val = dataset.getYValue(series, item);
                    for (int i=series-1; i>=0; i--) {
                        val += Double.isNaN(vals.get(i)) ? 0d : vals.get(i);
                    }
                    vals.set(series, val);
                }
            }
        }

        public String generateLabel(XYDataset dataset, int series, int item) {
            init(dataset);
            Number key = dataset.getX(series, item);
            return df.format(totals.get(key).get(series));
        }
    }

    private JFreeChart createChart(TableXYDataset tablexydataset) {
        DateAxis dateaxis = new DateAxis("Date");
        dateaxis.setTickMarkPosition(DateTickMarkPosition.MIDDLE);
        NumberAxis numberaxis = new NumberAxis("Y");
        StackedXYBarRenderer stackedxybarrenderer = new StackedXYBarRenderer(0.10000000000000001D);

        stackedxybarrenderer.setBaseItemLabelGenerator(new MyXYItemLabelGenerator());
        stackedxybarrenderer.setBasePositiveItemLabelPosition(new ItemLabelPosition(
                ItemLabelAnchor.OUTSIDE12, TextAnchor.BOTTOM_CENTER));
        stackedxybarrenderer.setBaseItemLabelsVisible(true);
        stackedxybarrenderer.setDrawBarOutline(false);
        XYPlot xyplot = new XYPlot(tablexydataset, dateaxis, numberaxis, stackedxybarrenderer);
        JFreeChart jfreechart = new JFreeChart("Stacked XY Bar Chart demo 2", xyplot);
        return jfreechart;
    }

    private TableXYDataset createDataset() {
        TimeTableXYDataset timetablexydataset = new TimeTableXYDataset();
        Day day = new Day(1, 3, 2005);
        Day day1 = new Day(2, 3, 2005);
        Day day2 = new Day(3, 3, 2005);
        Day day3 = new Day(4, 3, 2005);
        Day day4 = new Day(5, 3, 2005);
        timetablexydataset.add(day, 1.0D, "Series 1");
        timetablexydataset.add(day1, 1.7D, "Series 1");
//        timetablexydataset.add(day2, 2.2999999999999998D, "Series 1");
        timetablexydataset.add(day3, 3.7000000000000002D, "Series 1");
        timetablexydataset.add(day4, 2.6000000000000001D, "Series 1");
        timetablexydataset.add(day, 3.2000000000000002D, "Series 2");
        timetablexydataset.add(day1, 1.1000000000000001D, "Series 2");
        timetablexydataset.add(day2, 1.3999999999999999D, "Series 2");
        timetablexydataset.add(day3, 2.8999999999999999D, "Series 2");
        timetablexydataset.add(day4, 0.59999999999999998D, "Series 2");
        return timetablexydataset;
    }

    public static void main(String[] args) {
        GroupLabels demo = new GroupLabels("11626934 example");
        demo.pack();
        RefineryUtilities.centerFrameOnScreen(demo);
        demo.setVisible(true);
    }
} 
```

# image - 多个背景图像在 Y 左和 Y 右重复

> ID：11626942
> 
> 赞同：1
> 
> 时间：2012-07-24T08:24:22.627
> 
> 标签：image, css, background

我试图让两个图像在背景中重复（一个在右边，另一个在左边），就像这个网站一样。

到目前为止，我无法正确获取 CSS 代码：

[http://www.elegantthemes.com/preview/Modest/](http://www.elegantthemes.com/preview/Modest/)

我检查了该站点的代码并获得了我希望使用的阴影图像。我试图复制优雅主题在运行 Headway 的 WordPress 网站上使用的代码：

```
.right-shadow { background: #ffffff url(images/right-shadow.png) repeat-y top right; }
.left-shadow { background:url(images/left-shadow.png) repeat-y top left; } 
```

但它没有用。

然后我尝试了：

```
body {background:#ffffff url(http://website.com/wp-content/uploads/2012/07/right-shadow.png) repeat-y right top;} 
```

这适用于正确的阴影图像 - 它显示正确

然后我尝试了

```
body {background:#ffffff url(http://websitebuddha.com/wp-content/uploads/2012/07/left-shadow.png) repeat-y left top;} 
```

这适用于左阴影图像 - 它显示正确

现在，当我尝试合并代码以显示沿 Y 左侧和 Y 右侧的阴影图像时：

```
body {background:#ffffff url(http://website.com/wp-content/uploads/2012/07/right-shadow.png) repeat-y right top, url(http://website.com/wp-content/uploads/2012/07/left-shadow.png) repeat-y left top;} 
```

它不起作用 - 两个图像都没有出现

我也试过这个：

```
body {
    background-image: url(http://website.com/wp-content/uploads/2012/07/right-shadow.png), (http://website.com/wp-content/uploads/2012/07/left-shadow.png);
    background-repeat: repeat-y right top, repeat-y left top;
} 
```

这也不起作用 - 两个图像都没有出现

我怎样才能让它与优雅主题的谦虚主题完全一样？

谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:04:10.597

我认为您可以使用`Multiple Backgrounds`您的解决方案。

背景属性已经过大修以允许`multiple backgrounds in CSS3`.

**CSS**

```
body {
background: url(http://www.elegantthemes.com/preview/Modest/wp-content/themes/Modest/images/left-shadow.png) 0 0 repeat-y,  
 url(http://www.elegantthemes.com/preview/Modest/wp-content/themes/Modest/images/left-shadow.png)center right repeat-y;  
} 
```

我希望这会对你有所帮助：- [http://tinkerbin.com/Iw4yJ1H3](http://tinkerbin.com/Iw4yJ1H3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:07:02.203

这是您可以做到的一种方法。不使用这样的背景。尽管您可以将图像作为背景放置在 div 上，或者只是将它们作为图像添加到 div 中。您甚至可以取消 div 并简单地使用图像而不是 div。

[http://jsfiddle.net/6UEXc/](http://jsfiddle.net/6UEXc/)

希望有帮助。

# asp.net - 无法使用 NPOI 库保存 Excel 文件

> ID：11626945
> 
> 赞同：0
> 
> 时间：2012-07-24T08:24:30.497
> 
> 标签：asp.net, npoi

我在通过 ASP.NET 页面使用 NPOI dll 导出 excel 文件时遇到了一些困难。

基本上，我可以毫无例外地填充单元格，但是在我需要导出 excel 的最后几个步骤中，它在尝试运行 Response.End 时会引发异常。

```
Dim ms As New MemoryStream
xlWorkbook.Write(ms)
Response.ContentType = "application/vnd.ms-excel"
Response.AddHeader("content-disposition", "attachment;filename=M4_Control_Chart.xls")
Response.Clear()
Response.BinaryWrite(ms.GetBuffer())
Response.End() 
```

我没有从异常中得到很多信息，它只是说“无法评估表达式”

有谁知道如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-24T14:24:31.347

在读取缓冲区之前刷新流：ms.Flush()

# javascript - 在更改 div 背景中结合 mouseenter、mouseleave 和 click 事件

> ID：11626947
> 
> 赞同：1
> 
> 时间：2012-07-24T08:24:46.137
> 
> 标签：javascript, jquery

这是我当前的代码，我已经尝试了一个多小时：

```
$('#menu_list').bind('mouseenter mouseleave click', function(event){
    if(event.type == 'click') {
        $('#list_img').css('background-image', 'url(<?=base_url()?>/assets/css/images/list_active.png)');
        $('#add_img').css('background-image', 'url(<?=base_url()?>/assets/css/images/add_inactive.png)');
        $('#search_img').css('background-image', 'url(<?=base_url()?>/assets/css/images/search_inactive.png)');
        $('#list_text').css('color', 'black');
        $('#add_text').css('color', '#C0C0C0');
        $('#search_text').css('color', '#C0C0C0');
    } else if(event.type == 'mouseenter') {
        $('#list_text').css('color', 'black');
        $('#list_img').css('background-image', 'url(<?=base_url()?>/assets/css/images/list_active.png)');
    } else if(event.type == 'mouseleave') {
        $('#list_img').css('background-image', 'url(<?=base_url()?>/assets/css/images/list_inactive.png)');
    }
}); 
```

它应该做的是当我悬停时，图标会发生变化。但是当我单击时，该图标会保持活动状态，直到我单击另一个项目。mouseenter/mouseleave 没有问题。问题从点击开始。单击时，它会完成这项工作，但在移动鼠标时，mouseleave 功能会激活。意味着图标再次变为非活动状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:34:53.693

首先，你为什么要在你的 jQuery 中把它弄得这么复杂？为什么不使用基于 CSS 类的系统。

让你的css像这样（显然根据需要改变它;）

```
.normal { color:#000; background-image: url(foo.jpg) }
.click { color:#2B2B2B; background-image: url(foo.jpg) }
.mouseIn { color:#F00; background-image: url(foo.jpg) }
.mouseOut { color:#FFF; background-image: url(foo.jpg) } 
```

然后使用 jQuery

```
$('#menu_list').click(function() {

   $('#list_img').addClass("click");
   $('#add_text').addClass("example");
});

$('#menu_list').mouseenter(function() {

   $('#list_img').addClass("mouseIn");

});

$('#menu_list').mouseleave(function() {

   $('#list_img').addClass("mouseOut");

}); 
```

我想您还需要删除课程吗？您可以使用相反的`addClass`被调用`removeClass`。您可以将它们放在上面显示的函数中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T08:36:16.570

首先，为了可维护性，我建议您将这些事件分开并编写 3 个单独的事件处理程序。

二、什么是`list_clicked`？该变量似乎超出范围，因此未定义并且始终为真。而是检查元素上的类，这更容易......

第三：将所有这些样式放入一些 css 类中（例如`active`，`clicked`在我的示例中），这使整个事情变得非常简单。像这样的东西应该工作：

```
$('#menu_list').click(function() {
   /* alternate the classes by clicking - the class "clicked" is there to indicate 
     that it has been activated by click and won't be removed by mouseout*/
   $(this).toggleClass("active clicked");
});

$('#menu_list').mouseenter(function() {
   /* Just add the "active" class */
   $(this).addClass("active");
});

$('#menu_list').mouseleave(function() {
   /* If the element has not been clicked...*/
   if (!$(this).hasClass("clicked")){
      /*...remove the "active" class */
      $(this).removeClass("active");
   }
}); 
```

CSS 类看起来像这样：

```
.active #list_img{
    background-image:url(<?=base_url()?>/assets/css/images/list_active.png);
}
.active #list_text{
    color:black;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T08:34:58.970

对于初学者来说，您正在检查一个变量 list_clicked，它似乎没有在您的点击处理程序中设置 - 这意味着！list_clicked 将始终返回 true...所以这可能无济于事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T08:37:35.540

```
var activeItem;
$('#menu_list').bind('mouseenter mouseleave click', function(event){ 
    if(event.type == 'click') { 
        $('#list_img').css('background-image', 'url(<?=base_url()?>/assets/css/images/list_active.png)'); 
        $('#add_img').css('background-image', 'url(<?=base_url()?>/assets/css/images/add_inactive.png)'); 
        $('#search_img').css('background-image', 'url(<?=base_url()?>/assets/css/images/search_inactive.png)'); 
        $('#list_text').css('color', 'black'); 
        $('#add_text').css('color', '#C0C0C0'); 
        $('#search_text').css('color', '#C0C0C0');
        activeItem = this;          
    } else if(event.type == 'mouseenter') { 
        $('#list_text').css('color', 'black'); 
        $('#list_img').css('background-image', 'url(<?=base_url()?>/assets/css/images/list_active.png)'); 
    } else if(event.type == 'mouseleave' && !list_clicked) {
        if(activeItem != this) {        
            $('#list_img').css('background-image', 'url(<?=base_url()?>/assets/css/images/list_inactive.png)'); 
        }
    } 
}); 
```

您只需要跟踪您的活动项目。

# mediawiki - MediaWiki - 哪些文件呈现 html？

> ID：11626948
> 
> 赞同：-1
> 
> 时间：2012-07-24T08:24:47.603
> 
> 标签：mediawiki

我正在尝试将 PHP 函数直接添加到“主页”中，而不是通过编辑。

Windows 搜索是 fubar 所以我问我要编辑什么 .php 文件以便能够插入我自己的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:36:55.693

这取决于您希望内容显示在页面上的哪个位置...

如果您只是想打印出调试信息，您可以将 print 或 echo 语句放在 LocalSettings.php 文件的末尾，它将被添加到 wiki 中所有页面的顶部。

如果您想将内容放入特定页面中的特定位置，您可能需要[编写一个扩展](http://www.mediawiki.org/wiki/Manual%3aExtensions)，该扩展使用诸如[ArticleViewHeader之类的](http://www.mediawiki.org/wiki/Manual%3aHooks/ArticleViewHeader)[页面呈现钩子](http://www.mediawiki.org/wiki/Manual%3aHooks#Hooks_grouped_by_function)之一。

如果您可以细化您的问题，使其更具体地了解您想要添加的内容类型以及您想要添加的位置，我可以为您提供更好的建议，以使用特定的钩子。

# joomla - 复制 Joomla 设置时出错

> ID：11626952
> 
> 赞同：0
> 
> 时间：2012-07-24T08:25:33.437
> 
> 标签：joomla, joomla2.5

我在本地服务器上安装了 Joomla。我用新名称复制了顶级 Joomla 文件夹，这样我已经放入数据库的所有信息都可以稍微编辑，同时仍保持原始信息完整。

我已将数据库文件复制到一个新数据库并在 Joomla 管理员中进行了相关更改。我打开了 configuration.php 并将所有文件路径更改为新路径。

但是，现在我在尝试访问网页和管理区域时遇到服务器错误。我是否需要使用新路径编辑任何其他文件以使其能够在新的父文件夹下工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T06:21:44.830

如果您打开了 SEF URL，则除了 tmp 和 log 文件夹以及 htaccess 中的根文件夹行之外，您不必编辑具有任何路径的任何文件以使其工作。关闭 SEF URL 并查看站点是否开始工作，如果可以，则需要编辑 htaccess。由于您的管理员无法正常工作，我猜您弄乱了您的 configuration.php。将未经编辑的原始版本复制到复制站点，它应该可以工作。然后，您可以在全局配置的管理员中调整 tmp 和日志路径。

# ant - 找不到语言环境“en_US”的已编译资源包“组件”

> ID：11626959
> 
> 赞同：0
> 
> 时间：2012-07-24T08:25:49.593
> 
> 标签：ant, flex4

我正在使用 ant 构建我的 Flex 4.6 项目。Ant 脚本还将一个 css 文件编译为 swf，但是当我运行该应用程序时，它给出了一个错误：找不到语言环境“en_US”的已编译资源包“组件”。这是构建样式文件的我的 ant 脚本：

```
<mxmlc
  incremental="true"
  fork="true" 
  optimize="true"
  debug="false" 
  file="${app.dir}/src/main/resources/stylepacks/${stylepack}/styles.css"
  output="${output.dir}/stylepacks/${stylepack}/styles.swf">
    <source-path path-element="${app.dir}/src/main/flex" />
</mxmlc> 
```

我尝试了许多可能的解决方案，例如包括资源包：

```
<include-resource-bundles>components</include-resource-bundles> 
```

或者

```
<include-resource-bundles bundle="components" /> 
```

并引用 Flex 资源包：

```
<source-path path-element="${FLEX_HOME}/framework/locale/en_US" /> 
```

但这一切似乎都不起作用。应用程序和样式表同时使用了 HALO 和 Spark 元素，因此我尝试了这两个主题，但随后构建失败：

```
<compiler.theme file="${theme}" /> 
```

有没有人有更多的建议？？

# scorm - 全球目标的生命周期

> ID：11626961
> 
> 赞同：2
> 
> 时间：2012-07-24T08:25:56.480
> 
> 标签：scorm, scorm2004

假设学习者学习课程 A。该课程创建了一个全局目标 (g-obj-1)。学习者触发全部退出或暂停所有导航请求并返回到 LMS。学习者被 LMS 的管理员删除。现在，全局目标 (g-obj-1) 应该发生什么？它应该被删除还是应该设置为默认值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:32:10.847

所有跟踪数据都保存在每个学习者登录系统时使用其用户名和密码的数据库中。如果学习者从 LMS 中删除，则与他相关的所有内容都将消失，包括全局目标或任何其他数据。

# awk - awk - 再次使用特定的行来匹配模式

> ID：11626963
> 
> 赞同：2
> 
> 时间：2012-07-24T08:25:59.383
> 
> 标签：awk

假设我有文件：

```
1Alorem
2ipsuml
3oremip
4sumZAl
5oremip
6sumlor
7emZips 
```

我想将文本从包含 A 的行拆分为包含 Z 与范围匹配的行：

```
/A/,/Z/ {
print > "rangeX.txt"
} 
```

我希望这个特定的输入给我 2 个文件：

```
1Alorem
2ipsuml
3oremip
4sumZAl 
```

和

```
4sumZAl
5oremip
6sumlor
7emZips 
```

问题是第 4 行仅在 ad 匹配为范围结束时才被采用，但第 2 范围永远不会开始，因为其他行中没有 A。

有没有办法尝试再次将第 4 行与所有模式匹配或告诉 awk 它必须开始新的范围？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:12:10.187

正如 Arne 指出的，第二部分不会被捕捉到，而是当前的模式。这是没有范围的替代方案。

```
awk 'p==0 {p= (~/A/)>0;filenr++} p==1 {print > "range"filenr".txt"; p= (~/Z/)==0; if(!p && ~/A/){filenr++;;p=1; print > "range"filenr".txt"}}' test.txt 
```

它还处理两个以上的部分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T08:29:13.120

您需要做的就是将第一个范围的最后一行保存到一个变量中，然后为第二个文件重新打印该变量以及以下范围。

换句话说，由于您只是遍历每一行，因此在 BEGIN 中定义一个空变量，然后每次更新它。当您的范围结束时，您会将变量保存为最后一行。在重新开始之前将该行写到下一个文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T09:06:16.713

无法重新匹配记录，但可以选择编写模式的变体。这里第二个范围模式从包含 A 和 Z 的行匹配到包含 Z 但不包含 A 的行：

```
awk "/A/,/Z/ {print 1, $0} (/A/ && /Z/),(/Z/ && !/A/) {print 2, $0}" 
```

印刷：

```
1 1Alorem
1 2ipsuml
1 3oremip
1 4sumZAl
2 4sumZAl
2 5oremip
2 6sumlor
2 7emZips 
```

由于您的样本有点合成，我不知道该解决方案是否适合您的实际问题。

# javascript - 生产中的异常记录

> ID：11626972
> 
> 赞同：0
> 
> 时间：2012-07-24T08:26:34.280
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在使用 Exceptional 来跟踪生产中的 Google Chrome 扩展程序的异常和错误。该扩展目前正在连接和压缩所有 javascript 文件，然后再发布。此发布流程的一个副作用是您最终会收到相当模糊的错误消息。请参见下面的示例：

`"Uncaught TypeError: Cannot read property 'target' of undefined" On line 2 of chrome-extension://[extension-id]/app.js`

由于文件仅包含两行，因此很难发现导致错误的列。

可以使用 JavaScript 源映射功能解决此问题吗？还是在 Google Chrome 扩展程序中压缩 javascripts 甚至值得，因为无论如何您都会在本地加载？

谢谢你的优势！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:39:30.867

看看 Chrome 中的这个按钮（美化）：

![默认](../Images/de61d9087253808a9024e706afce2e93.png)

![美化](../Images/bd06b1475014e48c7b91362a11baba04.png)

只需输入脚本即可修改。但是，它确实偶尔会给我带来问题.. 不知道为什么，但是。 ![修改的](../Images/fdcdac873147400e4af5e6c856b1921f.png)

# excel - 如果在 excel 文件上禁用宏，则无法将工作表从一个工作簿复制到另一个工作簿

> ID：11626973
> 
> 赞同：0
> 
> 时间：2012-07-24T08:26:41.703
> 
> 标签：excel, vba, copy

我正在使用此功能将工作簿中的工作表复制到另一个工作簿。我工作，但似乎如果我禁用工作簿中的宏，它就不能再复制工作表了。

如果我改变这条线： `m_objExcel.AutomationSecurity = msoAutomationSecurityForceDisable`

对此 `m_objExcel.AutomationSecurity = msoAutomationSecurityByUI`

它可以工作，但会收到警告消息。此外，如果我评论该行，它可以完美运行，但使用宏。

```
Private Sub CopyFunction() 
    Set m_objExcel = New Excel.Application 'creare obiect
    m_objExcel.DisplayAlerts = False 

    g_secAutomation = m_objExcel.AutomationSecurity
    m_objExcel.AutomationSecurity = msoAutomationSecurityForceDisable
    m_objExcel.Visible = True

    Dim CopyFrom As Workbook
    Dim CopyTo As Workbook
    Dim CopyThis As Object

    Set CopyFrom = m_objExcel.Workbooks.Open("D:\FromFile.xls")
    Set CopyTo = m_objExcel.Workbooks.Open("D:\ToFile.xls")

      Set CopyThis = CopyFrom.Sheets(1) ''Sheet number 1
      CopyThis.Copy After:=CopyTo.Sheets(1)

    m_objExcel.Workbooks(CopyTo.FullName).Save
    CopyFrom.Close
    CopyTo.Close
    m_objExcel.Workbooks.Close
    MsgBox "ok"
    End Sub 
```

我在 Access 中使用它并使用 Excel 文件。问题是什么？有没有办法仍然能够将工作簿中的工作表复制到另一个工作簿并禁用宏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:37:42.453

这就是禁用宏通常用于：安全性。
这是为了保护您自己；如果您收到来自未知作者的工作簿，此人可能想向您发送有害软件。
例如，想象一下，一旦您打开工作簿，代码就会开始删除文件。
禁用宏可以防止这种情况发生，并允许您在决定执行代码之前查看代码。

作为一种解决方案，当您以开发人员身份签署项目时，用户可以信任您作为作者。
我建议您查看此链接： http: [//msdn.microsoft.com/en-us/library/aa190098](http://msdn.microsoft.com/en-us/library/aa190098(v=office.10) (v=office.10 )

（您可以决定完全关闭安全性（启用宏），但通常不建议这样做。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:24:25.623

我发现问题出在这里：

```
 m_objExcel.Workbooks(CopyTo.Name).Save 
```

# android - 如何找到手机从互联网下载文件所需的时间

> ID：11626976
> 
> 赞同：0
> 
> 时间：2012-07-24T08:26:54.183
> 
> 标签：android

我想编写代码，让我有时间从 Internet 下载文件（特别是应用程序）。更具体地说，我想知道上次下载的应用程序的下载速度。

所以我想找到下载的时间，然后将文件大小除以时间，我会得到速度。

谁能帮我找出从互联网下载文件所需的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:57:02.140

I think you should have a look at [`TrafficStats`](http://developer.android.com/reference/android/net/TrafficStats.html) class in `Android` which :

> Class that provides network traffic statistics. These statistics include bytes transmitted and received and network packets transmitted and received, over all interfaces, over the mobile interface, and on a per-UID basis.

I did not used this class, but I think it can do what you are trying to achieve.

# html - 如何在 Windows 上设置 Dave Raggett 的 HTML Tidy？

> ID：11626979
> 
> 赞同：4
> 
> 时间：2012-07-24T08:27:15.760
> 
> 标签：html, tidy

我很难找到易于理解的说明来下载、设置和使用[Dave Raggett](http://www.w3.org/People/Raggett/tidy/)的 HTML Tidy 。
请帮忙，我需要这种几乎可以完美扫描html错误的工具。
如果有最新的 GUI 版本，请分享链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T08:39:18.137

1.  点击下载链接
2.  选择二进制可执行文件
3.  [选择适合您的 Windows 版本的版本](http://tidy.sourceforge.net/#binaries)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-28T09:34:34.310

可以在[http://tidybatchfiles.info/找到用于](http://tidybatchfiles.info/)[实验性 HTML5-fork](http://w3c.github.com/tidy-html5/)的预编译 Windows 二进制文件。

# grails - 如何在grail中重命名包

> ID：11626985
> 
> 赞同：0
> 
> 时间：2012-07-24T08:27:42.647
> 
> 标签：grails, sts-springsourcetoolsuite, grails-2.0

我已经在 STS 中安装了 grails 支持。我有一个 grails 应用程序，我在域、控制器和测试中获得了包 com.mycompany.myapp。我想将它们重命名为 mycompany.myapp，这样它应该会影响应用程序的功能。有没有办法在 Grails 中做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:35:15.493

您可以使用普通的 Eclipse 重构工具 ie ++`ALT`来移动包。`SHIFT``V`

如果您在域类中使用任何继承，则需要升级`class`这些表列中的类名。

# actionscript-3 - Flash AS3 在 for 循环中调用 WSDL

> ID：11626986
> 
> 赞同：0
> 
> 时间：2012-07-24T08:27:44.093
> 
> 标签：actionscript-3, flash, soap, wsdl

我正在使用 Flex SOAP Web 服务，连接到我们的 WSDL，一切都很好。但是，我是网络服务的新手，而网络人正在度假，所以我有点困惑。我要做的第一件事是运行检查连接：

```
private function configXMLHandler(event:LoaderEvent):void {
        fws.wsdl = checkWSDL;
        fws.loadWSDL();
        fws.addEventListener(LoadEvent.LOAD, wsdlLoaded);
    }

    private function wsdlLoaded(event:LoadEvent):void {
        checkAbstract = fws.getOperation("retrieveAssetIdbyLabel");
        checkAbstract.arguments = ["poll-asset-do-not-remove"];
        var token:AsyncToken = checkAbstract.send();
        token.addResponder(new Responder(checkAbstractResult, checkAbstractError));
    }

    private function checkAbstractError(event:FaultEvent):void {
        trace('Error in the WSDL');
    }

    private function checkAbstractResult(event:ResultEvent):void {

        if (event.result.returnCode == 0) {
            trace('Web service check ok');

            initContentLoader();

        } else {
            trace('Error in the WSDL');
            )

        }

    } 
```

这很好，我得到了我期望的结果，所以我继续前进。然后我需要遍历一个 XML 列表并为该 XML 中的每个资产调用相同的 Web 服务函数，我的想法是使用循环：

```
private function initContent(event:LoaderEvent):void {
        assetList = event.target.content.asset;

        for (var i:int = 0; i < assetList.length(); i++) {
            assetAbstract = fws.getOperation("retrieveAssetIdbyLabel");
            assetAbstract.arguments = [assetList[i + assetCount].assetLabel];  //get the current index in the xmllist + the assetCount, grab the corresponding assetLabel from the XML and pass that to the web service
            trace(assetAbstract.arguments);
            var assetToken:AsyncToken = assetAbstract.send();
            assetToken.addResponder(new Responder(getAssetResult, getAssetError));
        }
    }

    private function getAssetResult(event:ResultEvent):void {
        var treasuresAsset:TreasuresAsset = new TreasuresAsset(event.result.returnCode, assetList[assetCount].asset.assetLabel, assetList[assetCount].asset.assetImage, assetList[assetCount].asset.assetDescription);
        addChild(treasuresAsset);

        assetCount++;  //increase the asset count
    }

    private function getAssetError(event:FaultEvent):void {
        trace(event.fault);
        trace('An error occured when we tried to get an asset id in the loop');
    } 
```

我现在收到一个错误：

> 打开 URL 'http://www.nhm.ac.uk/web-services/VisitorService/' 时出错 SOAPFault (Server): org.apache.axis2.databinding.ADBException: Unexpected subelement RetrieveAssetIdbyLabel

我的直接想法是我需要为 xml 中的每个资产创建一个新的 Web 服务实例，并一遍又一遍地重复我的第一个代码。我可以只使用一次网络服务吗，您需要重新创建整个过程吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:20:21.123

好的，所以我想通了，这是一个简单的 XML 命名空间问题。

我更换了：

```
assetAbstract.arguments = [assetList[i + assetCount].assetLabel]; 
```

和：

```
var sender:String = assetList[i + assetCount].assetLabel;
            assetAbstract.arguments = [sender]; 
```

一切正常。

# ruby-on-rails - 调用函数直到（有调用限制）

> ID：11626990
> 
> 赞同：1
> 
> 时间：2012-07-24T08:27:56.527
> 
> 标签：ruby-on-rails, ruby

我有一个生成随机输出（字符串）的函数。

我需要调用该函数，直到获得 3 个不同的输出（字符串）。

通过调用函数生成具有 3 个唯一字符串的数组的最优雅方法是什么，如果在指定的尝试次数内未生成输出，则该函数可以调用多少次？

这是我目前拥有的：

```
output = []
limit_calls = 5
limit_calls.times do |i|
  str = generate_output_function
  output.push str
  break if output.uniq.size > 2
end 
```

这可以美化/缩短到 1 行吗？我很确定红宝石.. :)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T08:43:46.293

使用集合使它（有点）更容易：

```
require 'set'
output = Set.new
limit_calls = 5
call_count = 0
while output.size < 3 and call_count < limit_calls
  output << generate_output_function 
  call_count += 1
end
output 
```

或使用数组

```
output = []
limit_calls = 5
while output.size < limit_calls and output.uniq.size < 3
  output << generate_output_function 
end
output.uniq 
```

更新通话限制。似乎阵列版本获胜！谢谢伊恩！

还将考虑使用注入的版本。

更新 2 - 注入：

```
5.times.inject([]) { |a, el| a.uniq.size < 3 ? a << generate_output_function : a } 
```

有你的oneliner。我不确定我是否喜欢它，因为它有点难以理解......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:00:17.990

弗罗德里克的回答错过了 call_limit 要求。像这样的功能呢...

```
def unique_string_array(call_limit)
  output = []
  calls = 0
  until (output.size == 3 || calls == call_limit) do
    (output << generate_output_function).uniq! && calls+=1
  end
  output
end 
```

它不是单行的，但它是可读的……使用此实现，您最终可能会得到小于 3 大小的数组。最重要的是，您有一个断言您想要的行为的测试！（为了彻底测试这一点，您必须取消对 generate_output_function 的调用）

# android - 如何将参数从android传递到HTML文件

> ID：11626991
> 
> 赞同：7
> 
> 时间：2012-07-24T08:28:00.880
> 
> 标签：android

我可以很好地在 android webview 中显示 HTML 文件内容。现在我如何将参数传递到 HTML 文件中。例如，我的 HTML 内容有一个视频播放器，我需要将动态值（URL）传递到 HTML 文件中以播放动态视频。我的HTML 文件位于资产文件夹中。我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-26T08:44:08.970

我今天遇到了这个问题，但是我需要它来使用 UTF-8 编码，所以这是我的方法，希望它可以帮助某人并澄清这个问题的一些先前答案。

HTML：

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    </head>
    <body>
        <h1>%ERR_TITLE%</h1>
        <h2>%ERR_DESC%</h2>
    </body>
</html> 
```

爪哇：

```
String content = IOUtils.toString(getAssets().open("error.html"))
    .replaceAll("%ERR_TITLE%", getString(R.string.error_title))
    .replaceAll("%ERR_DESC%", getString(R.string.error_desc))

mWebView.loadDataWithBaseURL("file:///android_asset/error.html", content, "text/html", "UTF-8", null); 
```

至于 IOUtils： [http ://commons.apache.org/proper/commons-io/download_io.cgi](http://commons.apache.org/proper/commons-io/download_io.cgi)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T08:40:13.100

而不是直接传递视频 URL（按照你的例子），我会在 Html 文件中使用令牌。例如：

```
<embed src="$VIDEO_URL$" autostart="false" /> 
```

将`$VIDEO_URL$`在运行时将令牌替换为真实视频的位置`URL`。

此外，由于您无法在运行时更改资产文件夹的内容，您应该将 html 文件内容加载到 String 变量中，并使用该`replace`方法将令牌替换为真实的`URL`，最后将该字符串传递给您的 webview。像这样的东西：

```
//The html variable has the html contents of the file stored in the assets folder
//and real_video_url string variable has the correct video url
html = html.replace("$VIDEO_URL$", real_video_url);
webview.loadData(html, "text/html", "utf-8"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-24T08:38:37.810

如果我想在我的 HTML 中有一些动态的东西，我会有一个带有动态部分的 html，如下所示：

```
<B>%NAME%</B> 
```

然后我会加载我的 HTML：

```
String template = Utils.inputStreamToString(assets.open("html/template.html")); 
```

然后我会用我想要的东西替换所有动态部分：

```
String data = template.replaceAll("%NAME%", "Alice McGee"); 
```

然后我会将它传递给我的 webView！

```
WebView webView = new WebView(this);
webView.loadDataWithBaseURL("file:///android_asset/html/", data, "text/html", "utf-8", null); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-15T09:12:19.167

我设法以不同的方式传递变量。

我的问题是每次我切换到另一个应用程序时，当进入 webapp 时，webview 会不断重新加载。我想这是因为我的方法中有以下一行`onCreate()`：`myWebView.loadUrl(url);`我有在 url 中传递这些状态变量的想法，但你知道这还不可能。我所做的是使用 保存一些变量的状态`onSaveInstanceState(Bundle outState) {...}`并使用`onRestoreInstanceState(Bundle savedInstanceState){...}`.

在设置 myWebView 后的 onCreate 方法中，我执行了以下操作：

```
myWebView.setWebViewClient(new WebViewClient() {
@Override
public void onPageFinished(WebView view, String urlString)
{
     Log.i("onPageFinished", "loadVariables("+newURL+")");
     if(newURL!="")
         myWebView.loadUrl("javascript:loadVariables("+"\""+newURL+"\")");
}

@Override
public boolean shouldOverrideUrlLoading(WebView view, String url) {
    view.loadUrl(url);
    return true;
}
});

jsInterface = new JSInterface(this,myWebView);
myWebView.addJavascriptInterface(jsInterface, "Android");

if (savedInstanceState != null)
{
// retrieve saved variables and build a new URL
newURL = "www.yoururl.com";
newURL +="?var1=" + savedInstanceState.getInt("key1");
newURL +="?var2=" + savedInstanceState.getInt("key2");
Log.i("myWebApp","NEW URL = " + newURL);
}
myWebView.loadUrl("www.yoururl.com"); 
```

因此，首先我使用默认 URL (www.yoururl.com) 加载页面，然后在 onPageFinished 上调用一个新的 javascript 方法，在其中传递变量。在 javascript`loadVariables`函数中看起来像这样：

```
function loadVariables(urlString){
    // if it is not the default URL
    if(urlString!="www.yoururl.com")
    {
        console.log("loadVariables: " + urlString);
        // parse the URL using a javascript url parser (here I use purl.js)
        var source = $.url(urlString).attr('source');
        var query = $.url(urlString).attr('query');  
        console.log("URL SOURCE = "+source + " URL QUERY = "+query);
        //do something with the variables 
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-15T11:20:59.653

这里的资产是什么意思？

字符串模板 = Utils.inputStreamToString(assets.open("html/template.html"));

# java - 我怎样才能使这个正则表达式更短？

> ID：11626994
> 
> 赞同：1
> 
> 时间：2012-07-24T08:28:10.753
> 
> 标签：java, regex

我写了这个正则表达式：

```
\\s+(?:([^:]+):)(?:([^:]+):)(?:([^:]+):)(?:([^:]+):) 
```

解析这样的事情：

lvt:vgt:mwi-ao:44.00m::::lvt_mlog:100.00: lvt2:vgt2:-wi-a-:908.00m::::::

和

1 组将是：lvt 2 组：vgt ... 4 组：44.00m

我想让它更短。

我尝试这样做：`\\s+(?:([^:]+):)+`

但在这种情况下，它只捕获最后一组。

结果将是：1组：44.00m

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:55:44.580

您可以删除许多不必要的非捕获括号：

```
\\s+([^:]+):([^:]+):([^:]+):([^:]+): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:07:03.787

如果您正在寻找 ':' 之间的值，您可以使用 String.split(regex)

```
String[] result = 
   "lvt:vgt:mwi-ao:44.00m::::lvt_mlog:100.00: lvt2:vgt2:-wi-a-:908.00m::::::".split(":"); 
```

如果对您方便，它会比组正则表达式更快......而且它是您可以找到*的更短的正则表达式*

*EDIT 错误注释被抑制
添加组*

如果常规 ' ' ，则可以像这样找到组`::::`：

```
for(int i = 0, n = result.length; i < n; i+= 6) {
    final String group1 = result[i];
    final String group2  =result[i+1];
    ...
} 
```

否则`while`在最后一个空字段后使用并重新启动到 group1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T10:17:55.710

```
import java.util.regex.Pattern;
import java.util.regex.Matcher;

class RegexTest{
    public static void main(String[] args){
        Pattern pat= Pattern.compile("\\s(([^:]+):){3}([^:]+)");
        Matcher mat= pat.matcher(" lvt:vgt:mwi-ao:44.00m::::lvt_mlog:100.00: lvt2:vgt2:-wi-a-:908.00m::::::");
        while(mat.find()){
            System.console().format("group: %s , start: %d , end: %d\\n",
            mat.group(), mat.start(), mat.end());
        }
    }
} 
```

> 组：lvt:vgt:mwi-ao:44.00m，开始：0，结束：22
> 
> 组：lvt2:vgt2:-wi-a-:908.00m，开始：42，结束：67

然后，您可以按“：”拆分组

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T08:43:43.873

在Java 中，您不能将多个匹配项捕获到一个组中，即不能使用`(?:([^:]+):)+`to collect`lvt`等一次将多个匹配项放入一个`vgt`组中。

您可以做的是将文本分成单独的行，如果您知道总是有 4 个组，请使用如下表达式连续调用`find()`4`group(0)`次`[^:]+`：这应该在 4 个调用中捕获、`lvt`和`vgt`。`mwi-ao``44.00m`

一些伪代码（未经测试，因此可能包含拼写错误:)）：

```
Pattern p = Pattern.compile("[^:]+");

String input = ...;
String[] lines = input.split("\\s");

for( String line : lines ) {
  //note that for simple cases like above you could also just split by ":"

  Matcher m = p.matcher(line);
  List<String> elements = new LinkedList<String>();
  while( m.find() ) {
    elements.add( m.group(0) );
  }

  //get the first 4 elements from the list
  //if there are less then 4 in the list, the line didn't match
} 
```

**编辑**：我更新了答案以匹配已编辑的问题，该问题似乎用冒号（`:`）分隔“行”我的空格和字段。

# tsql - 如何从仓库中挑选物品以最小化 TSQL 中的旅行？

> ID：11626995
> 
> 赞同：1
> 
> 时间：2012-07-24T08:28:13.657
> 
> 标签：tsql, combinations, combinatorics, picking

我从 TSQL 的角度来看这个问题，但是任何建议都将不胜感激。

**设想**

我有 2 组标准来识别要选择的仓库中的项目。

查询 1 返回 100 项
查询 2 返回 100 项

我需要选择查询 1 中返回的 100 项中的任意 25 项。
我需要选择查询 2 中返回的 100 项中的任意 25 项。
- 查询 1/2 中的项目永远不会相同。

每个项目都存储在仓库的一个部分中。
仓库的一部分可能包含许多物品。

我希望选择 50 个项目（每个查询 25 个）以减少我必须访问以选择项目的段数。

**建议的方法**

我最初的想法是结合两个结果集并生成一个列表

分段 ID，NumberOfItemsRequiredInSegment

然后，我将从每个查询中选择 25 个项目，优先选择 NumberOfItemsRequiredInSegment 最多的段中的那些。

我知道这不是最优的，但很容易实现启发式。

**问题**

1）我怀疑这是一个标准的组合问题，但我不认识它..也许是多个背包，有人认识吗？

2) 是否有更好的（容易实现的）启发式或解决方案——最好是在 TSQL 中？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:50:20.483

这也可能不是最佳的，但我认为至少会表现得相当好。

为查询 1 计算该集合。

```
Segment ID, NumberOfItemsRequiredInSegment 
```

只需按 NumberOfItemsRequiredInSegment 排序即可进入前 25 名。将此子集称为 A。

通过加入 A 并按“A.segmentID 不为空时为 1，否则为 0，NumberOfItemsRequiredInSegmentFromQuery2 的情况”排序，从查询 2 中获取前 25 名。

重复此操作，但首先从查询 2 中获取前 25 个。返回 2 组中表现较好的。

我认为失败的一种情况是，如果你得到这样的东西。

```
Segment   Count Query 1    Count Query 2
A         10               1
B         5                1
C         5                1
D         5                4
E         5                4
F         4                4
G         4                5
H         1                5
J         1                5
K         1                10 
```

在从查询 1 中选择最佳段时，您需要确保选择 A、D、E。要解决此问题，您几乎仍然需要加入查询 2，因此您可以从那里获取计数以用作决胜局。

# java - 同一类的不同实例的单独日志文件

> ID：11626997
> 
> 赞同：0
> 
> 时间：2012-07-24T08:28:23.807
> 
> 标签：java, log4j

我有一个客户端和服务器类。在同一个 JVM 中同时运行 1 个 Client 实例和 8 个 Server 实例。

我现在希望（以编程方式或通过属性文件）设置 log4j，以便每个类实例都有一个日志文件。对于上面的示例，我想要 9 个单独的日志文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:38:02.807

如果您对所有实例（vg, ）使用相同的 Logger `private static final Logger log = Logger.getLogger(MyClass.class)`，则所有日志都将遵循相同的过程。

您应该将记录器定义为实例属性，并在 log4j.properties, vg 中为每个属性设置不同的行为

```
private final Logger log;

public MyClass(String instanceID) {
  this.log = Logger.getLogger(MyClass.class.toString() + "_" + instanceID);
} 
```

# ajax - 使用 django-ajax-uploader 上传大文件失败

> ID：11626998
> 
> 赞同：0
> 
> 时间：2012-07-24T08:28:26.740
> 
> 标签：ajax, django, uploader, ajaxuploader

我正在尝试`django-ajax-uploader`在我的网站中使用，它在局域网中运行良好，但是当我通过互联网上传文件时，它只上传不超过 2MB 的文件，任何大于 2MB 的文件都会失败。
我将默认的**BUFFER_SIZE**更改为 64MB，但仍然无法正常工作。而且我测试过 Chrome、Safari 和 Firefox，都失败了。

你们中有人遇到过这个问题吗？谢谢 ：）

ps：我看过[这个提示](https://stackoverflow.com/questions/7501213/cant-upload-5mb-file-using-ajax-file-uploader)，但我很确定这是一个不同的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:33:32.337

What frontend server do you use (Apache, nginx)? You need to check it settings.

**EDIT**: If you're using nginx you need something like this:

```
server {
        listen   80;
        server_name example.com;

        client_max_body_size    64m;
} 
```

For apache something like so:

```
upload_max_filesize = 64M
post_max_size = 64M 
```

You could check that the problem is with the frontend server by:

1.  run `./manage.py runserver 0.0.0.0:8000` on production server - this runs 'developer' server on port 8000 and allows to connect from your computer
2.  go to `yourdoamin.com:8000` and try to upload a large file. It should work fine.