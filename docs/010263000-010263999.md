# StackOverflow 问答 10263000-10263999

# javascript - 使用组的jQuery表单验证

> ID：10263001
> 
> 赞同：0
> 
> 时间：2012-04-21T21:04:16.830
> 
> 标签：javascript, jquery, validation

我有一张订单，其中一部分是地址。它包含 Company、Street-Address、ZIP、Town、Country，带有一个简单的 jquery 表单验证，每个字段都需要，ZIP 验证数字。现在我想要对它们进行分组，并且只有一个字段在成功时显示“有效地址”，或者在错误时显示“地址错误”。

这是我的 js 代码的一部分：

```
$("#pageform").validate(
{
   messages: {
      company_from:     addressError, //addressError is a JS var for the error message
      street_from:      addressError,
      zip_from:         addressError,
      town_from:        addressError,
      country_from:     addressError
   },
   groups: {
      from:    "company_from  street_from  zip_from  town_from  country_from"
   },
   errorPlacement: function(error, element) {
      if (element.attr("name") == "company_from"
         || element.attr("name") == "street_from"
         || element.attr("name") == "zip_from"
         || element.attr("name") == "town_from"
         || element.attr("name") == "country_from"
         )
      {
         $("#error_from").append(error);
      }
   },
   success: function(label) {
      var attribute = $(label[0]).attr("for");
      $(".err-ok-" + attribute + " .ok").css("display", "block").css("visibility", "visible");
   }
}
); 
```

这是相应 HTML 代码的一部分：

```
<input type="text" name="company_from" id="company_from" class="required default input-s8" maxlength="255" />
<input type="text" name="street_from" id="street_from" class="required default input-s8" maxlength="255" />
<input type="text" name="zip_from" id="zip_from" class="required digits default input-s8" maxlength="5" onblur="checkCalculation()" />
<input type="text" name="town_from" id="town_from" class="required default input-s8" maxlength="255" />
<!-- and a select list for the country --> 
```

您无需仔细查看我如何显示错误等，我的问题是，**我不知道何时显示错误标签以及何时显示成功标签**。当我为邮政编码输入一个字母时，我的 errorPlacement 函数和成功函数被调用（首先是 errorPlacement），所以我猜如果至少有一个字段正确，它总是调用成功。

请询问是否有任何问题，我很确定有... :-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:41:53.090

添加规则

```
 rules: {
     company_from: "required",
     company_from: "required",
     zip_from: "required",
     town_from:"required",
     country_from:"required"
    }, 
```

# android - SoapFault - faultcode: 'S:Client' faultstring: '在调用 JAX-WS 的 Android 中找不到调度方法

> ID：10263002
> 
> 赞同：2
> 
> 时间：2012-04-21T21:04:20.620
> 
> 标签：android, web-services, soap, jax-ws

我正在尝试使用 KSoap2 API 从 Android 调用 Glassfish 服务器的本地主机中部署的 java web 服务。我在 logcat 中收到以下异常：

**04-22 02:24:53.251: W/System.err(251): SoapFault - 故障代码: 'S:Client' 故障字符串: '找不到 {http://abc/}ResponseFromDB 的调度方法' 故障因素: 'null'详细信息：空** 请帮助。我正在使用以下代码：

```
public class TestLocalWebserviceActivity extends Activity {
    /** Called when the activity is first created. */
    private static final String SOAP_ACTION = "http://abc/ResponseFromDB";

    private static final String OPERATION_NAME = "ResponseFromDB";

    private static final String WSDL_TARGET_NAMESPACE = "http://abc/";

    private static final String SOAP_ADDRESS = "http://116.202.210.193:8086/CalculatorWS/ResponseFromDB?wsdl";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        class fetchprojectdetails extends AsyncTask<String, Void, String> {

            ProgressDialog dialog;
            String SOAPresponse;

            @Override
            protected void onPreExecute() {
                // progress.show();

                dialog = ProgressDialog.show(TestLocalWebserviceActivity.this, "",
                        "Retrieving Data....", true);
                // progressDialog.setCancelable(true);
                dialog.show();
                dialog.setCancelable(true);
            }

            @Override
            protected String doInBackground(String... params) {

                // setContentView(textView);
                SoapObject result;

                SoapObject request = new SoapObject(WSDL_TARGET_NAMESPACE,
                        OPERATION_NAME);

                PropertyInfo propInfo=new PropertyInfo();
                  propInfo.name="name";
                  propInfo.type=PropertyInfo.STRING_CLASS;

                  request.addProperty("name", "John Smith");
                //request.addProperty("name", "ggg");

                SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                        SoapEnvelope.VER11);
                //envelope.dotNet = true;
                //envelope.encodingStyle = SoapSerializationEnvelope.XSD;
                envelope.setOutputSoapObject(request);

                HttpTransportSE httpTransport = new HttpTransportSE(
                        SOAP_ADDRESS);

                try {
                    httpTransport.call(SOAP_ACTION, envelope);
                } catch (IOException e1) {
                    Log.d("io", ""+e1.getMessage());
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                } catch (XmlPullParserException e1) {
                    // TODO Auto-generated catch block
                    Log.d("xmlpullparser", ""+e1.getMessage());
                    e1.printStackTrace();
                }

                try {
                    SoapPrimitive  resultsRequestSOAP = (SoapPrimitive) envelope.getResponse();
                } catch (SoapFault e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    Log.d("ee", ""+e.getMessage());
                }
                //httpTransport.debug = true;
                try

                {

                    //List<HeaderProperty> headerList = new ArrayList<HeaderProperty>();
                //  headerList.add(new HeaderProperty("Authorization", "Basic "+ org.kobjects.base64.Base64.encode(raw)));
                //  httpTransport.call(SOAP_ACTION, envelope, headerList);

                    //String gr = httpTransport.requestDump;
                    // Object response = envelope.getResponse();
                    //SOAPresponse = httpTransport.responseDump;

                    String resultsString = (String) envelope.getResponse();
                    String gg = resultsString;

                    // i = obj.execute(LearningScore.this);
                    // i.putExtra("LearningCredit", LearningCredit);

                    // startActivity(i);

                }

                catch (Exception exception)

                {
                    System.out.print(exception.getLocalizedMessage());
Log.d("eeeeee",""+exception.getLocalizedMessage()+exception.getMessage());
                    // Toast.makeText(LearningScore.this,"Successfully Authenticated",
                    // Toast.LENGTH_LONG).show();

                }
                return SOAPresponse;
            }

            @Override
            protected void onPostExecute(String result) {
                String gg = result;
                Log.d("message:  ", result+"");
                //Intent i = new Intent(ViewPHSActivity.this, ViewProjects.class);

                //projectxml = result;
                // .putExtra("response", result);
                //startActivity(i);

                dialog.dismiss();
                finish();
            }

        }
        new fetchprojectdetails().execute();
    }
} 
```

WSDL：

```
 <?xml version="1.0" encoding="UTF-8" ?> 
- <!--  Published by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is Metro/2.1.1-b09 (branches/2.1-6834; 2011-07-16T17:14:48+0000) JAXWS-RI/2.2.5-promoted-b04 JAXWS/2.2\. 
  --> 
- <!--  Generated by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is Metro/2.1.1-b09 (branches/2.1-6834; 2011-07-16T17:14:48+0000) JAXWS-RI/2.2.5-promoted-b04 JAXWS/2.2\. 
  --> 
- <definitions xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:wsp="http://www.w3.org/ns/ws-policy" xmlns:wsp1_2="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://abc/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.xmlsoap.org/wsdl/" targetNamespace="http://abc/" name="ResponseFromDB">
- <types>
- <xsd:schema>
  <xsd:import namespace="http://responseFromDb/" schemaLocation="http://localhost:8086/CalculatorWS/ResponseFromDB?xsd=1" /> 
  </xsd:schema>
- <xsd:schema>
  <xsd:import namespace="http://abc/" schemaLocation="http://localhost:8086/CalculatorWS/ResponseFromDB?xsd=2" /> 
  </xsd:schema>
  </types>
- <message name="hello">
  <part name="parameters" element="tns:hello" /> 
  </message>
- <message name="helloResponse">
  <part name="parameters" element="tns:helloResponse" /> 
  </message>
- <portType name="ResponseFromDB">
- <operation name="hello">
  <input wsam:Action="http://abc/ResponseFromDB/helloRequest" message="tns:hello" /> 
  <output wsam:Action="http://abc/ResponseFromDB/helloResponse" message="tns:helloResponse" /> 
  </operation>
  </portType>
- <binding name="ResponseFromDBPortBinding" type="tns:ResponseFromDB">
  <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document" /> 
- <operation name="hello">
  <soap:operation soapAction="" /> 
- <input>
  <soap:body use="literal" /> 
  </input>
- <output>
  <soap:body use="literal" /> 
  </output>
  </operation>
  </binding>
- <service name="ResponseFromDB">
- <port name="ResponseFromDBPort" binding="tns:ResponseFromDBPortBinding">
  <soap:address location="http://localhost:8086/CalculatorWS/ResponseFromDB" /> 
  </port>
  </service>
  </definitions> 
```

# ruby - 正则表达式删除空格和括号？

> ID：10263005
> 
> 赞同：-2
> 
> 时间：2012-04-21T21:04:35.403
> 
> 标签：ruby, regex

我正在尝试删除以下内容：`" (23wr)"`

要删除我使用过的空格`.gsub(/\s+/, "")`，但如何删除`'('`and`')'`来获取`"23wr"`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T21:10:55.027

试试这个代码：

```
gsub(/[\s+)(]/,"") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T21:15:09.313

No regex:

```
p " (23wr)".delete("( )\t") #=> "23wr" 
```

# oracle - SQL查询即使没有找到也返回一行，至少在参数中

> ID：10263006
> 
> 赞同：0
> 
> 时间：2012-04-21T21:04:37.790
> 
> 标签：oracle

我想编写一个 SQL 查询（oracle）来了解一个操作（由 ope.ope_operationid 标识）是否至少具有某种类型的操作（opt.opt_id），如果没有，则表明它没有t 在结果中。

例如，我有这个操作 LAA351BP（我知道这个存在于 base 中），我想知道它是否至少有一个 id 为 3781 的操作类型。如果有，打印所有内容，如果没有，打印操作 ID 以及旁边的“未找到”之类的内容

nvl 是要使用的功能吗？看来我无法让它正常工作。

```
SELECT  DISTINCT ope.ope_operationid,
ser.ser_code,
opt.opt_code,
ost.ost_code
FROM    od_operation ope, 
od_service_type ser,
od_operation_type opt,
od_status_type ost,
od_equipment_type eqt,
WHERE   ope.ser_id = ser.ser_id
AND     opt.opt_id = ope.opt_id
AND     ost.ost_id = ope.ost_id
AND     ope.opt_id = 3781
AND     ope.ope_operationid = 'LAA351BP' 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T21:27:11.353

您应该开始使用标准的 JOIN 语法。除了更具可读性（至少在我看来）之外，如果您忘记 WHERE 子句中的实际连接条件，它还可以保护您免受意外的笛卡尔连接。此外，它几乎可以在所有 DBMS 中移植，而不是`(+)`Oracle 使用的笨拙语法（它也有一些 JOIN 语法没有的限制）

这是使用显式（而不是隐式）连接重写的查询：

```
SELECT DISTINCT ope.ope_operationid,
       ser.ser_code,
       opt.opt_code,
       ost.ost_code
FROM od_operation ope, 
   LEFT JOIN od_service_type ser ON ope.ser_id = ser.ser_id
   LEFT JOIN od_operation_type opt ON opt.opt_id = ope.opt_id
   LEFT JOIN od_status_type ost ON ost.ost_id = ope.ost_id
   LEFT JOIN od_equipment_type eqt ON ????????
WHERE ope.opt_id = 3781
AND   ope.ope_operationid = 'LAA351BP' 
```

**编辑**

缺少连接条件`od_equipment_type`正是首选 JOIN 语法的原因。如果删除原始 SQL 中的尾随逗号，则该语句将创建一个不需要的笛卡尔连接，如果涉及的表很大，这可能会对服务器产生严重影响。

使用 JOIN 语法，您总是会收到一个语法错误，它会阻止您出现此类拼写错误。使用隐式连接只会在您在 FROM 列表中留下逗号时给您一个错误，但如果您错过了`WHERE`

# java - 修复 Java 中的“发现未经检查的转换”警告？

> ID：10263009
> 
> 赞同：3
> 
> 时间：2012-04-21T21:05:09.090
> 
> 标签：java, compiler-warnings, comparator, unchecked, unchecked-conversion

作为一个大学项目，我正在编写一个 Java 程序，该程序采用派生自 Player 类的类并将它们存储在 Club 类中。俱乐部是一个板球俱乐部（因此变量/类名）。下面的类仍然只是部分构建，但它可以编译并且对于我需要解决的问题来说足够完整。编译以下类时，我收到两个“未经检查”的警告：

```
import java.util.*;

public class Club{
    private String name;
    private List<Player> players;
    private Set<Player> playersAverage;
    private int regID;

    @SuppressWarnings(value = {"unchecked"})
    public Club(){
        this.name = "";
        this.players = new ArrayList<Player>();
        this.playersAverage = new TreeSet<Player>(new BattingAverageComparator());
        this.regID = 1;
    }

    @SuppressWarnings(value = {"unchecked"})
    public Club(String name){
        this.name = name;
        this.players = new ArrayList<Player>();
        this.playersAverage = new TreeSet<Player>(new BattingAverageComparator());
        this.regID = 1;
    }

    public void setName(String name){
        this.name = name;
    }

    public String getName(){
        return this.name;
    }

    public boolean registerPlayer(Player player) throws UninitialisedObjectException, NullPointerException{
        if(!(validPlayer(player))){
            throw new UninitialisedObjectException("attempted to add an uninitialised player object to Club.players");
        }
        if(!(this.players.contains(player))){
            player.setRegID(this.regID);
            this.regID++;
            for(int i = 0; i < this.players.size(); i++){
                if(player.compareTo(this.players.get(i)) > 0){
                    this.players.add(i,player);
                    return true;
                }
            }
        }
        return false;
    }

    public boolean removePlayer(Player player) throws NullPointerException{
        return this.players.remove(player);
    }

    public String getPlayerDetails(int regID) throws InvalidRegistrationIDException{
        String s = "";
        for (int i=0; i < this.players.size(); i++){
            if (this.players.get(i).getRegID() == regID){
                s = this.players.get(i).toString();
                break;
            }
        }
        if(s == ""){
            throw new InvalidRegistrationIDException("getPlayerDetails() attempted on invalid regID");
        }
        return s;
    }

    private boolean validPlayer(Player player){
        return player.getFirstName()!="" || player.getLastName()!="" || player.getAge()>0 || player.getHeight()>0 || player.getWeight()>0;
    }

    public void averages(BattingAverageComparator compareAveragesOf){
    }
} 
```

使用以下比较器：

```
import java.util.*;

public class BattingAverageComparator implements Comparator{
    public int compare(Object obj1,Object obj2) throws IllegalArgumentException{
        if(!(obj1 instanceof Player) || !(obj2 instanceof Player)){
            throw new IllegalArgumentException("BattingAverageComparator cannot compare objects that are not of, or do not extend, the Player class.");
        }
        Player thisPlayer = (Player) obj1;
        Player thatPlayer = (Player) obj2;
        if(thisPlayer.getDismissals() == 0 && thatPlayer.getDismissals() == 0){
            if(thisPlayer.getRuns() > thatPlayer.getRuns()){
                return 1;
            }
            else if (thisPlayer.getRuns() < thatPlayer.getRuns()){
                return -1;
            }
            else{
                return thisPlayer.compareTo(thatPlayer);
            }
        }
        else if(thisPlayer.getDismissals() == 0 && thatPlayer.getDismissals() > 0){
            return -1;
        }
        else if(thisPlayer.getDismissals() > 0 && thatPlayer.getDismissals() == 0){
            return 1;
        }
        else{
            double thisAverage = thisPlayer.getRuns()/thisPlayer.getDismissals();
            double thatAverage = thatPlayer.getRuns()/thatPlayer.getDismissals();
            if(thisAverage > thatAverage){
                return 1;
            }
            else if(thisAverage == thatAverage){//need to make a double threshold
                return 0;
            }
            else{
                return -1;
            }
        }
    }

    public boolean equals(Object obj){
        return obj instanceof BattingAverageComparator;
    }
} 
```

两个构造函数都会出现以下警告：

```
Club.java:13: warning: [unchecked] unchecked conversion found : BattingAverageComparator
required: java.util.Comparator<? super Player>
this.playersAverage = new TreeSet<Player>(new BattingAverageComparator()); 
```

除了抑制警告之外，还有什么方法可以解决这个问题吗？

*如果您需要更多信息，我会发布它。该程序中有很多课程，我认为目前没有必要将它们全部发布。*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T21:10:33.297

问题在这里：

```
public class BattingAverageComparator implements Comparator{ 
```

您将其声明为原始比较器，但您输入的是通用类型`<Player>`

所以改成

```
public class BattingAverageComparator implements Comparator<Player>{ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T21:08:50.000

是的，使用泛型类型：

```
public class BattingAverageComparator implements Comparator<Player>{
  public int compare(Player obj1,Player obj2){
    //etc.
  }
} 
```

# c++ - “在没有模板参数的情况下使用”

> ID：10263017
> 
> 赞同：34
> 
> 时间：2012-04-21T21:05:59.243
> 
> 标签：c++, class, templates

我意识到以前有人问过类似的问题，但我读了其中的几个，但仍然看不出我哪里出错了。当我简单地编写我的类而不将原型与定义分开时，一切正常。当我将原型和定义分开时会出现问题，如下所示：

```
template<class T> class VisitedSet { 
public:
    VisitedSet(); 
    int getSize(); 
    void addSolution(const T& soln); 
    void evaluate(); 
private:
    vector<T> vec;
    int iteration;
}; 
```

作为给我这个错误的定义的一个例子：

```
int VisitedSet::getSize() {
    return vec.size(); 
```

我以前从未做过模板类，所以如果这里的问题是微不足道的，请原谅我。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-04-21T21:25:26.357

`VisitedSet`是模板，而不是类，因此您不能`VisitedSet`在嵌套名称说明符中使用，例如`VisitedSet::getSize()`. 正如您指定`class VisitedSet<T>`for all的声明一样`class T`，您必须指定`VisitedSet<T>::getSize()`for all的定义`class T`：

```
template<class T>
int VisitedSet<T>::getSize() {
//            ^^^
    return vec.size();
} 
```

但是，模板的名称可以像模板定义*中的类一样使用：*

```
template<class T>
struct Example {
    Example* parent;
    T x, y;
}; 
```

在这种情况下，`Example`是 的缩写`Example<T>`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T21:10:43.590

你要这个：

```
template <class T>
int VisitedSet<T>::getSize() {
    return vec.size();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T21:10:55.823

您还必须在定义中声明模板参数

```
template<class T>
int VisitedSet<T>::getSize() {
    return vec.size();
} 
```

否则编译器无法将其与声明匹配。例如，某些参数类型可能有特化。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-21T21:11:05.447

您需要让编译器知道您正在模板函数中实现一个方法：

```
 template<typename T>
 int VisitedSet<T>::getSize() {
    return vec.size();
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-21T21:09:44.590

试着放

```
template <typename T> 
```

在 VisitedSet::getSize() 的实现之上——但要注意，一般来说，模板化的类和函数都应该被内联。[有关更多信息，请参阅此处](http://www.parashift.com/c++-faq-lite/templates.html)的 c++ 常见问题解答。

# internet-explorer - 下载开始时 IE 立即关闭窗口

> ID：10263019
> 
> 赞同：0
> 
> 时间：2012-04-21T21:06:06.533
> 
> 标签：internet-explorer, header, window, content-disposition

我有一个 PHP 脚本，可以在新窗口中将文件下载到客户端。它在 Firefox 中运行良好，但在 IE8 中，窗口打开然后立即关闭。请注意，这只发生在某些文件（如 text/plain 类型）中，但对于其他文件（例如：application/pdf），它可以正常工作。

我的 PHP 脚本添加了如下所示的 http 标头（显示了我的代理服务器添加的一些标头）。我不知道出了什么问题。在 php 中使用 headers 后，我发现删除 Content-Type 和 Content-Disposition 似乎会产生影响，但我只是在乱搞，无法真正理解出了什么问题。

我从 Firefox 中获取了标题，如下所示。任何人都可以看到会导致 IE 立即关闭的东西我尝试将 mime 类型设置为 application/text 但没有区别。

```
HTTP/1.0 200 OK
Date: Sat, 21 Apr 2012 21:02:13 GMT
Server: Apache
Pragma: public
Expires: 0
Cache-Control: public
Content-Description: File Transfer
Content-Disposition: attachment; filename="Sample_Text_File.txt"
Content-Transfer-Encoding: binary
Vary: Accept-Encoding
Content-Encoding: gzip
Content-Length: 47
Content-Type: text/plain
X-Cache: MISS from firewall.mydomain.ca
X-Cache-Lookup: MISS from firewall.mydomain.ca:3128
Via: 1.0 firewall.mydomain.ca (squid/3.0.STABLE7)
Proxy-Connection: close 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:59:42.230

这似乎是 IE 的防弹窗技术。即使我在 IE 的设置中将该站点标记为 sage，它仍然会阻止..

解决方案是在同一个窗口（不是_blank）中开始下载，IE 很高兴。您可以在新窗口中打开的所有其他浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T09:22:31.533

我将首先删除所有不需要的响应标头，特别是无意义的标头，例如 Content-Transfer-Encoding 和 Content-Description。

一个潜在的原因可能是缓存信息损坏，或者 IE 无法正确处理多种类型的 Vary 响应标头。

# jquery - JqG rid 列重新排序不适用于分组标题

> ID：10263025
> 
> 赞同：1
> 
> 时间：2012-04-21T21:07:05.370
> 
> 标签：jquery, jqgrid

使用 sortable: true 的 JQGrid 可以很好地进行列重新排序。现在我已经对标题进行了分组，它已经停止工作。如何使列重新排序与分组标题一起工作。这是示例代码

```
<script>
var mydata = [
    { id: "1", invdate: "2007-10-01", name: "test", note: "note", amount: "200.00", tax: "10.00", total: "210.00" },
    { id: "2", invdate: "2007-10-02", name: "test2", note: "note2", amount: "300.00", tax: "20.00", total: "320.00" },
    { id: "3", invdate: "2007-09-01", name: "test3", note: "note3", amount: "400.00", tax: "30.00", total: "430.00" },
    { id: "4", invdate: "2007-10-04", name: "test", note: "note", amount: "200.00", tax: "10.00", total: "210.00" }

    ];
function drawGrid() {
    jQuery("#list4").jqGrid({
        sortable: true,
        datatype: "local",
        colNames: ['Inv No', 'Date', 'Client', 'Amount', 'Tax', 'Total', 'Notes'],
        colModel: [
                    { name: 'id', index: 'id', width: 55 },
                    { name: 'invdate', index: 'invdate', width: 90 },
                    { name: 'name', index: 'name asc, invdate', width: 100 },
                    { name: 'amount', index: 'amount', width: 80, align: "right" },
                    { name: 'tax', index: 'tax', width: 80, align: "right" },
                    { name: 'total', index: 'total', width: 80, align: "right" },
                    { name: 'note', index: 'note', width: 150, sortable: false }
                ],

        sortname: 'invdate',
        viewrecords: true,
        sortorder: "desc",
        caption: "Column Reordering Example"

    });
}
$(document).ready(function () {
    drawGrid();
    jQuery("#list4").jqGrid('setGroupHeaders', {
        useColSpanStyle: false,
        groupHeaders: [
                        { startColumnName: 'amount', numberOfColumns: 2, titleText: '<em>Financial</em>' },
                      ]
    });
    for (var i = 0; i <= mydata.length; i++)
        jQuery("#list4").jqGrid('addRowData', i + 1, mydata[i]);

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T22:32:29.243

抱歉，jqGrid 的很多特性都有相应的限制。您不能将`sortable: true`或[columnsChooser](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ajquery_ui_methods#column_chooser)与[Header 分组](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ajqgriddocs#header_grouping)一起使用（请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3agroupingheadar#limitations)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T21:46:31.140

嗨**演示** [http://jsfiddle.net/yNw3C/620/](http://jsfiddle.net/yNw3C/620/)

请看一下代码确实可以正常工作：即设置组发生得很好，排序也很好。

希望这会有所帮助，如果我错过了什么，请告诉我！

**代码**

```
$(document).ready(function() {
    drawGrid();
    jQuery("#grid").jqGrid('setGroupHeaders', {
        useColSpanStyle: false,
        groupHeaders: [
            {
            startColumnName: 'amount',
            numberOfColumns: 2,
            titleText: '<em>Financial</em>'},
            ]
    });
    for (var i = 0; i <= mydata.length; i++)
    jQuery("#grid").jqGrid('addRowData', i + 1, mydata[i]);

}); 
```

**图片**

![在此处输入图像描述](../Images/ed4039cdac7157956d98bb5304049308.png)

# c++ - 保持按值排序并操作FIFO的c ++数据结构

> ID：10263026
> 
> 赞同：3
> 
> 时间：2012-04-21T21:07:08.617
> 
> 标签：c++, data-structures, stack, heap, priority-queue

我正在寻找一种执行快速排序插入并基于 FIFO 操作的数据结构。

我想要实现的是一个固定大小的数据结构来保存一系列值。在迭代的每个新步骤中，我希望能够有效地找到最小值或最大值（因此我希望始终对数据结构进行排序），并且在请求插入新元素时，自动将最旧的元素（或至少能够有效地）弹出/丢弃。

所以我想我正在寻找某种 FIFO 优先级队列。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T21:40:21.633

为什么不同时拥有一个 std::set 或 multiset，以及一个像 std::queue 这样的常规 FIFO 队列？每次插入时，检查队列是否大于最大大小，然后从队列和集合中删除最前面的元素。

# android - Sqlite 数据库在 Android 应用程序中更改 TextView

> ID：10263029
> 
> 赞同：0
> 
> 时间：2012-04-21T21:07:54.233
> 
> 标签：android, android-layout, android-intent, mobile-application

我正在使用 sqlite 数据库文件中的列设置我的 textview。问题是当我来回更改视图时，从数据库中检索时存在非常明显的滞后。这是代码：

```
public class Flipcard extends Activity implements OnClickListener {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    LinearLayout layMain = (LinearLayout) findViewById(R.id.FlashCardFront);
    layMain.setOnClickListener(this);
    Cursor cur;
    DbH db = null;
    TextView tv=(TextView) findViewById(R.id.TV_Word);
    TextView txtView=(TextView) findViewById(R.id.TV_CardNo);
    try {
        db=new DbH(this);
    } catch (IOException e2) {

        e2.printStackTrace();
    }
    try {
        db.createdatabase();
    } catch (IOException e) {

        e.printStackTrace();
    }
    db.opendatabase();
    cur=db.data();
    cur.moveToFirst();
    tv.setText(cur.getString(0));
    cur.close();
}
public void onClick(View v) {
Intent i=new Intent(this,Flipcard_back.class);
startActivity(i);
}

} 
```

单击时调用的另一个java文件是：

```
 public class Flipcard_back extends Activity implements OnClickListener{
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_back);
    LinearLayout layMain = (LinearLayout) findViewById(R.id.FlashCardRear);
    layMain.setOnClickListener(this);
}
public void onClick(View v) {
Intent i=new Intent(this,Flipcard.class);
startActivity(i);
}
} 
```

这实际上是在调用前一个。问题是我是我的应用程序开发的一个非常初始阶段。现在我只是尝试使用我的数据库更改第一个 java 文件中的两个文本视图。当我来回切换时有一个大约一秒钟的延迟。我该如何纠正？难道我做错了什么。此外，我无法使用 getstring(1) 等检索所有行。为什么会这样？如何一一获取列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T21:15:16.553

The lag is caused by accessing your database in your main thread, you want to have it run in its own thread. Here is a the Developer's Guide on [Processes and Thread](http://developer.android.com/guide/topics/fundamentals/processes-and-threads.html#Threads) which will give you the grand overview. Look into something like AsyncTask next, for one approach to accessing databases.

As for not getting results from your database, I cannot tell without seeing the class associated with `db`. Include that code and any logcat errors in your question if you want more help.

**EDIT**

With the error code you provided I found this link to a [similar question and detailed answer.](https://stackoverflow.com/questions/1407442/android-sqlite-and-huge-data-sets)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T22:53:47.760

我从 sqlite + android 的经验是，它最初在查询数据库时非常慢，但之后它可以非常快速地检索大量数据。如果要避免延迟，请改用文件。我的小经验来自开发词典应用程序 Wordlist Pro，因为它太慢（而且体积很大），我不得不放弃数据库以获取文本文件。

# c - 缓存多条路径的链接

> ID：10263032
> 
> 赞同：2
> 
> 时间：2012-04-21T21:08:01.877
> 
> 标签：c, dijkstra

我正在为一种算法编写代码，该算法在源和目标之间找到多条路径。在每次迭代中存储从修改后的 Dijkstra 获得的路径以便以后删除隔行扫描的路径的最佳方法是什么？我从一个名为 previous 的向量中获取路径，从目的地开始，直到我到达源。矩阵似乎不适用于每条路径。

```
int l[SDIM][SDIM];
int d[SDIM], s[SDIM], p[SDIM];
int i,j,a,z,prev,minD,minJ,count;
for (i=0;i<SDIM;i++)
{
    d[i]=l[a][i];
    s[i]=1;
    p[i]=a;
}
s[a] = 0;
prev=a;
do
{
    minD=MAX;
    for (j=0;j<SDIM;j++)
    {
        if ((s[j]==1) && (d[j]<minD))
        {
            minD=d[j];
            minJ=j;
        }
    }
    s[minJ] = 0;
    prev=minJ;
    if (prev==z) break;
    for (i=0;i<SDIM;i++)
    {
        if ((l[prev][i]!=MAX) && (d[i]>(d[prev]+l[prev][i])))
        {
            d[i]=d[prev]+l[prev][i];
            p[i]=prev;
            s[i]=1;
        }
    }
}while(1); 
```

# java - 如何在 Maven 3 插件中获取依赖树？

> ID：10263033
> 
> 赞同：6
> 
> 时间：2012-04-21T21:08:01.923
> 
> 标签：java, maven, maven-3, aether

在 Maven 2 mojo 中，您可以使用类似这样的方法来获取依赖关系树：

```
DependencyNode rootNode;
try {
  rootNode = treeBuilder.buildDependencyTree(project, localRepository,
      artifactFactory, artifactMetadataSource, null, artifactCollector);
} catch (DependencyTreeBuilderException e) {
  throw new MojoExecutionException("Failed to create dependency tree.", e);
}
final CollectingDependencyNodeVisitor visitor = new CollectingDependencyNodeVisitor();
rootNode.accept(visitor);
final List<DependencyNode> nodes = visitor.getNodes(); 
```

什么是 Maven 3 等价物？与此同时，许多相关类已被弃用（`ArtifactCollector`、`ArtifactMetadataSource`等）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T07:55:17.423

您需要使用[Aether](https://docs.sonatype.org/display/AETHER/Home)（这是 Maven 3 正在使用的）。我建议在它周围使用一个简单的包装器，称为[jcabi-aether](http://aether.jcabi.com/)（我是它的开发人员）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T01:34:05.803

Maven 3 使用[Aether](https://docs.sonatype.org/display/AETHER/Home)进行依赖解析。文档底部附近是另一个在 Maven 插件中使用 Aether 的链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-30T09:32:29.427

我没有在网上找到任何可行的解决方案，所以我查看了 Maven 源代码并自己制定了一个解决方案。以下大部分代码都是从 Maven 源代码中复制的，我已经使用 Maven 3.5.4 对其进行了测试，并且运行良好。

```
import org.apache.maven.artifact.Artifact;
import org.apache.maven.artifact.ArtifactUtils;
import org.apache.maven.execution.MavenSession;
import org.apache.maven.plugin.AbstractMojo;
import org.apache.maven.plugin.MojoExecutionException;
import org.apache.maven.plugins.annotations.Mojo;
import org.apache.maven.plugins.annotations.Parameter;
import org.apache.maven.plugins.annotations.ResolutionScope;
import org.apache.maven.project.DefaultDependencyResolutionRequest;
import org.apache.maven.project.DependencyResolutionResult;
import org.apache.maven.project.MavenProject;
import org.apache.maven.project.ProjectDependenciesResolver;
import org.eclipse.aether.graph.DependencyFilter;
import org.eclipse.aether.graph.DependencyNode;
import org.eclipse.aether.util.filter.AndDependencyFilter;
import org.eclipse.aether.util.filter.ScopeDependencyFilter;

import javax.inject.Inject;
import java.util.*;

@Mojo( name = "test-mojo", requiresDependencyResolution = ResolutionScope.RUNTIME)
public class TestMojo extends AbstractMojo {

    @Parameter(defaultValue = "${project}", readonly = true, required = true)
    private MavenProject project;
    @Parameter(defaultValue = "${session}", readonly = true, required = true)
    private MavenSession session;
    @Inject
    private ProjectDependenciesResolver dependenciesResolver;

    public void execute() throws MojoExecutionException {
        try {
            Collection<String> scopesToResolve = new HashSet<>();
            scopesToResolve.add("compile");
            scopesToResolve.add("provided");
            scopesToResolve.add("runtime");
            scopesToResolve.add("system");
            scopesToResolve.add("test");
            Collection<String> scopesToCollect = new HashSet<>();
            scopesToCollect.add("compile");
            scopesToCollect.add("provided");
            scopesToCollect.add("runtime");
            scopesToCollect.add("system");
            scopesToCollect.add("test");
            Collection<Artifact> projectArtifacts = new HashSet<>();
            projectArtifacts.add(project.getArtifact());
            DependencyFilter collectionFilter = new ScopeDependencyFilter( null, negate( scopesToCollect ) );
            DependencyFilter resolutionFilter = new ScopeDependencyFilter( null, negate( scopesToResolve ) );
            resolutionFilter = AndDependencyFilter.newInstance( collectionFilter, resolutionFilter );
            resolutionFilter = AndDependencyFilter.newInstance( resolutionFilter, new ReactorDependencyFilter( projectArtifacts ) );
            DefaultDependencyResolutionRequest request =
                    new DefaultDependencyResolutionRequest( project, session.getRepositorySession() );
            request.setResolutionFilter( resolutionFilter );
            DependencyResolutionResult result = dependenciesResolver.resolve( request );

            // Here is your dependency gragh, you can do whatever you want with it.
            List<DependencyNode> children = result.getDependencyGraph().getChildren();
            List<DependencyNode> grandChildren = children.get(0).getChildren();
        } catch (Exception e) {
            e.printStackTrace();
            throw new MojoExecutionException(e.getMessage());
        }
    }

    private Collection<String> negate( Collection<String> scopes )
    {
        Collection<String> result = new HashSet<>();
        Collections.addAll( result, "system", "compile", "provided", "runtime", "test" );

        for ( String scope : scopes )
        {
            if ( "compile".equals( scope ) )
            {
                result.remove( "compile" );
                result.remove( "system" );
                result.remove( "provided" );
            }
            else if ( "runtime".equals( scope ) )
            {
                result.remove( "compile" );
                result.remove( "runtime" );
            }
            else if ( "compile+runtime".equals( scope ) )
            {
                result.remove( "compile" );
                result.remove( "system" );
                result.remove( "provided" );
                result.remove( "runtime" );
            }
            else if ( "runtime+system".equals( scope ) )
            {
                result.remove( "compile" );
                result.remove( "system" );
                result.remove( "runtime" );
            }
            else if ( "test".equals( scope ) )
            {
                result.clear();
            }
        }

        return result;
    }
    private static class ReactorDependencyFilter
            implements DependencyFilter
    {

        private Set<String> keys = new HashSet<>();

        ReactorDependencyFilter( Collection<Artifact> artifacts )
        {
            for ( Artifact artifact : artifacts )
            {
                String key = ArtifactUtils.key( artifact );
                keys.add( key );
            }
        }

        public boolean accept(DependencyNode node, List<DependencyNode> parents )
        {
            org.eclipse.aether.graph.Dependency dependency = node.getDependency();
            if ( dependency != null )
            {
                org.eclipse.aether.artifact.Artifact a = dependency.getArtifact();
                String key = ArtifactUtils.key( a.getGroupId(), a.getArtifactId(), a.getVersion() );
                return !keys.contains( key );
            }
            return false;
        }

    }
} 
```

另外，请注意您需要添加一些依赖项才能使其正常工作。这是我的。

```
<dependencies>
    <dependency>
        <groupId>org.apache.maven</groupId>
        <artifactId>maven-plugin-api</artifactId>
        <version>3.6.0</version>
    </dependency>
    <dependency>
        <groupId>org.apache.maven.plugin-tools</groupId>
        <artifactId>maven-plugin-annotations</artifactId>
        <version>3.6.0</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.apache.maven</groupId>
        <artifactId>maven-project</artifactId>
        <version>2.2.1</version>
    </dependency>
    <dependency>
        <groupId>org.apache.maven.shared</groupId>
        <artifactId>maven-common-artifact-filters</artifactId>
        <version>3.0.1</version>
    </dependency>
    <dependency>
        <groupId>org.projectlombok</groupId>
        <artifactId>lombok</artifactId>
        <version>1.18.2</version>
    </dependency>
    <dependency>
        <groupId>org.apache.maven</groupId>
        <artifactId>maven-core</artifactId>
        <version>3.5.4</version>
    </dependency>
</dependencies> 
```

# objective-c - 旋转一个 NSImageCell

> ID：10263034
> 
> 赞同：1
> 
> 时间：2012-04-21T21:08:11.377
> 
> 标签：objective-c, nsmatrix, applescript-objc, nsimagecell

我正在做一个有大量`NSMatrix`. `NSImageCells`我需要`Images`在他们的单元格中旋转特定的个人（或者甚至只是旋转单元格本身，因为它看起来相同）。每个单元格和图像都是 40x40 的正方形，因此不必调整大小，因为我将坚持 90 度增量。问题是因为我使用`NSImageCells`而不是`NSImageViews`，所以我不能`setFrameCenterRotation:`轻松地旋转图像。有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T18:02:15.177

对于仍在寻找方法的任何人，因为我是在 ASOC 中编写的，所以我最终使用了以下代码：

```
on rotateImage_byAngle_(startingImage, angle)
    set rotated to current application's NSImage's alloc()'s initWithSize_({startingImage's |size|()'s height(), startingImage's |size|()'s |width|()})
    rotated's lockFocus()
    set transform to current application's NSAffineTransform's transform()
    transform's translateXBy_yBy_((rotated's |size|()'s |width|()) / 2, (rotated's |size|()'s height()) / 2)
    transform's rotateByDegrees_(angle)
    transform's translateXBy_yBy_(-(rotated's |size|()'s height()) / 2, -(rotated's |size|()'s |width|()) / 2)
    transform's concat()
    startingImage's drawAtPoint_fromRect_operation_fraction_({0, 0}, {{0, 0}, {0, 0}}, current application's NSCompositeCopy, 1)
    rotated's unlockFocus()
    return rotated
end rotateImage_byAngle_ 
```

# jquery - 数据戳不与以前的画廊按钮同步

> ID：10263036
> 
> 赞同：1
> 
> 时间：2012-04-21T21:08:20.813
> 
> 标签：jquery, html, css, fancybox, buzz.js

我正在开发一个个人 HTML 5/CSS3 项目，该项目采用旧的 1970 年代超级英雄阅读书籍并记录并在兼容的浏览器（Safari/Chrome/FireFox）中播放它们。漫画面板会自动与音轨保持同步，同时允许观众按一个按钮来跳过或返回。

为此，我使用 FancyBox2 来处理图像，使用 Buzz Javascript 音频库来处理 HTML 5 音频功能，并使用一些自定义 jQuery 和 Javascript 来处理逻辑。

Buzz JavaScript 库允许我在播放音频时监控它，并为 FancyBox 库中的每个图像分配一个标签。当音频播放时，每次到达与适当时间相对应的标签时，图像库都会向前移动。

播放音频并让漫画自动跟上它的节奏可以正常工作。使用图库中的 FancyBox 下一步按钮跳过也很有效。我遇到的问题是，当我点击上一个按钮在音频和图库中跳回时，当前数据戳不会向后移动，Fancybox 不会在图库中向前移动，直到它赶上跨度数据戳尚未触发的时间码。

我的注释代码如下，您可以在[http://powerrecords.pixelwhip.com/story_manWolf_finalCode.html](http://powerrecords.pixelwhip.com/story_manWolf_finalCode.html)上查看此代码。我已启用控制台消息，以便您可以在 firebug 或开发人员窗口中跟踪变量和时间戳，或者您有什么。我已经坚持了几个星期，所以任何帮助将不胜感激。

```
<!DOCTYPE HTML>
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>The Power Records Project</title>

<!-- Import the latest jQuery library from Google-->
<script type="text/javascript"
 src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>

<!-- Import the Buzz Javascript Audio library -->
<script type="text/javascript"
 src="scripts/buzz.js" language="javascript"></script>

<!-- Import the FancyBox Gallery library -->
<script type="text/javascript"
 src="scripts/jquery.fancybox.js"></script>

<!-- Import the jQuery Data Selector Extension-->
<script src="scripts/jquery.dataSelector.js"></script>

<!-- Initialize FancyBox2 -->
<script type="text/javascript">
    $(document).ready(function() {
        $(".fancybox").fancybox();
    });
</script>

<script language="javascript" type="text/javascript">

// Check to make sure that the browser supports HTML5, and therefore, 
// the Buzz javascript library (imported above)
if (!buzz.isSupported()) {
    alert("The Power Records Project relies on Javascript, 
           HTML5 and CSS3 to work. Please update your browser 
           and come back!");
}

// Create the new Sound object - Spider-Man: Mark of the Man-Wolf
var smManWolf = new buzz.sound("audio/sm_MarkManWolf", {
    formats: [ "ogg", "mp3" ],
    preload: true,
    autoload: true,
    loop: false
});

// Create an array that holds the time marks, in seconds, that queues
// new panel rows in the gallery
var audioMarks = new Array();
audioMarks[0] = 0;
audioMarks[1] = 30;
audioMarks[2] = 49;
audioMarks[3] = 66;
audioMarks[4] = 88;
audioMarks[5] = 103;

// Declare a variable that gets the length of the audioMarks array 
// (just in case I need it)
var lengthOfArray = audioMarks.length;

// Declare a variable called currentMark and set to 0 -- the beginning 
// of the audio program. This var will be used to update the timecode 
// each time the user skips forward and backward
var currentMark = audioMarks[0] ;
var i = 0;
var nextAudioButtonHit = false;
var prevAudioButtonHit = false;

// Function that tells Fancybox to go to the next panel set in the gallery
var nextPanel = function () {
    $.fancybox.next();
};

// Function that tells Fancybox to go to the previous panel set in the gallery
var prevPanel = function () {
    $.fancybox.prev();
};

// When the FancyBox forward gallery button is pressed, tell the audio 
// to go to the next audioMark in the array
var nextAudio = function() {
    nextAudioButtonHit = true;
    i++;
    currentMark = audioMarks[i];
    smManWolf.setTime(currentMark);

    console.log("NEXT NAV BUTTON HIT! i is now equal to " + i);
    console.log("The nextAudioButtonHit value is "+ nextAudioButtonHit);
    console.log("The next audio button currentMark is "+ currentMark);
};

// When the FancyBox backward gallery button is pressed, tell the audio
// to go to the previous audioMark in the array
var previousAudio = function() {
    prevAudioButtonHit = true;
    i--;
    currentMark = audioMarks[i];
    smManWolf.setTime(currentMark);

    console.log("PREV NAV BUTTON HIT! i is now equal to " + i);
    console.log("The prevAudioButtonHit value is "+ prevAudioButtonHit);
    console.log("The previous audio button currentMark is "+ currentMark);
};

// Autoplay function - the images in the gallery will keep up with the audio 
// automatically once the user starts the story.
var autoPlay = function() {
    // Begin playing the audio file
    smManWolf.play(); 
    // The Buzz Audio Library repeating timer function that monitors 
    // the audio file, tracks the time and handles the artwork upkeep
    smManWolf.bind('timeupdate', function(e) {
        var theTime = buzz.toTimer(this.getTime());
        $('.timer').html(theTime);
        $('span:data("stamp='+theTime+'")').each(function() {

        // only do the animation once
        if (theTime=="00:00") {
            i=0;
            currentMark=audioMarks[0];

            console.log("The timer just hit "+ theTime);
            console.log("The currentMark is "+ currentMark);
            console.log("i is equal to " + i); 
        }

    // If the <span data-stamp> time has
        else if ( !$(this).data('triggered') && nextAudioButtonHit == false ) {
            $(this).data('triggered', true);
            nextPanel();
            i++;
            currentMark = audioMarks[i];

            console.log("The nextAudioButtonHit value is "
                        + nextAudioButtonHit);
            console.log("The timer just hit "+ theTime);
            console.log("The currentMark is "+ currentMark);
            console.log("i is equal to " + i); 
        }
        else if ( !$(this).data('triggered') && nextAudioButtonHit == true ) {
            $(this).data('triggered', true);
            nextPanel();
            currentMark = audioMarks[i];
            nextAudioButtonHit = false;

            console.log("The nextAudioButtonHit value is "
                        + nextAudioButtonHit);
            console.log("The timer just hit "+ theTime);
            console.log("The currentMark is "+ currentMark);
            console.log("i is equal to " + i); 
        }

// HERE IS THE PROBLEM: Whenever the Previous Gallery button is hit, 
// the current data stamp does not move backward with the vars i and 
// currentMark. Fancybox will not move forward in the gallery until it 
// catches up to a span data-stamp timecode that has not been triggered.

// REVERSING THE Not (!) and TRUE/FALSE CONDITIONS DOES NOT WORK:
        /*
            if ( $(this).data('triggered') && nextAudioButtonHit == false ) {
                $(this).data('triggered', false);
        */
            else if (prevAudioButtonHit == true) {
                currentMark = audioMarks[i];
                prevAudioButtonHit = false;

                console.log("THE PREVIOUS BUTTON TIMER FUNCTION IS FIRING");
                console.log("The prevAudioButtonHit value is "
                             + prevAudioButtonHit);
                console.log("The timer just hit "+ theTime);
                console.log("The currentMark is "+ currentMark);
                console.log("i is equal to " + i); 
            }
        });
    });
};

$(document).ready(function() {
    $(".controlButtons").fancybox({
        autoPlay        : false,
        closeBtn        : false,
        helpers         : {
            title       : { type : 'inside' },
            buttons     : {}
        }
    });
});

</script>

<script type="text/javascript"
 src="scripts/jquery.fancybox-buttons.js?v=2.0.5"></script>

<!-- Link to the style sheets -->
<link rel="stylesheet" href="jquery.fancybox.css?v=2.0.5" 
 type="text/css" media="screen" />

<link rel="stylesheet" href="jquery.fancybox-buttons.css?v=2.0.5"
 type="text/css" media="screen" />

<link href="styles.css" rel="stylesheet"
 type="text/css" charset="utf-8">

</head>

<body>
<div id="container">
<li>PLEASE WAIT SEVERAL SECONDS FOR IMAGES TO PRELOAD then <a class="fancybox" 
href="#inline1" title="Lorem ipsum dolor sit amet">click here to Open the 
Book</a></li>

<div id="inline1" style="width:700px;display: none;">

<a class="controlButtons" href="images/smManWolf/0.jpg" 
   data-fancybox-group="gallery" title="Lorem ipsum dolor sit amet" 
   onclick = "autoPlay();"><span data-stamp="00:00">BEGIN THE STORY</span></a>

<a class="controlButtons" href="images/smManWolf/1.jpg"
   data-fancybox-group="gallery" title="Lorem ipsum dolor sit amet">
   <span data-stamp="00:30">&nbsp;</span></a>

<a class="controlButtons" href="images/smManWolf/2.jpg"
   data-fancybox-group="gallery" title="Lorem ipsum dolor sit amet">
   <span data-stamp="00:49">&nbsp;</span></a>

<a class="controlButtons" href="images/smManWolf/3.jpg"
   data-fancybox-group="gallery" title="Lorem ipsum dolor sit amet">
   <span data-stamp="01:06">&nbsp;</span></a>

<a class="controlButtons" href="images/smManWolf/4.jpg"
   data-fancybox-group="gallery" title="Lorem ipsum dolor sit amet">
   <span data-stamp="01:28">&nbsp;</span></a>

<a class="controlButtons" href="images/smManWolf/5.jpg"
   data-fancybox-group="gallery" title="Lorem ipsum dolor sit amet">
   <span data-stamp="01:43">&nbsp;</span></a>

<a class="controlButtons" href="images/smManWolf/6.jpg"
   data-fancybox-group="gallery" title="Lorem ipsum dolor sit amet">
   <span data-stamp="02:02">&nbsp;</span></a>

<!--END inline div --></div>
<!--END container div --></div>

</body>
</html> 
```

# jquery - Bootstrap Datepicker 从属性开始日期

> ID：10263038
> 
> 赞同：3
> 
> 时间：2012-04-21T21:08:27.580
> 
> 标签：jquery, asp.net-mvc-3, twitter-bootstrap, datepicker

我知道您可以在配置设置中初始化日期选择器时设置 startdate。我还没有找到在 html 输入中添加属性来执行此操作的方法。

我解决这个问题的方式是这样的。

```
$('.date-picker').each(function () {
    if($(this).attr("startdate") !== undefined) {
        $(this).datepicker({ format: "dd/mm/yyyy", weekStart: 0, autoclose: true, startDate: $(this).attr("startdate") });
    }
    else {
        $(this).datepicker({ format: "dd/mm/yyyy", weekStart: 0, autoclose: true });
    }
}); 
```

我用 Razor 写了以下内容

```
@Html.TextBoxFor(model => model.SomeDate, new { @class = "date-picker", @data_date = "12-02-2012", @startdate = "12-04-2012" }) 
```

有人可以提出正确的方法吗？

这对我有用，现在很酷，它在 2012 年 4 月 12 日之前的任何内容上添加了一个禁用的 css 类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T20:36:21.917

您需要使用 .data() 而不是 .attr()

```
<input type="text" class="date_picker" data-start-date="2012-01-01"> 
```

接着

```
$('.date-picker').each(function () {
  var config = { format: "dd/mm/yyyy", weekStart: 0, autoclose: true  };
  if ($(this).data("startDate") != undefined) {
    config.startDate = $(this).data("startDate");
  }
  $(this).datepicker(config);  
}); 
```

# c++ - c ++分配对象？

> ID：10263043
> 
> 赞同：-1
> 
> 时间：2012-04-21T21:09:38.147
> 
> 标签：c++

在 C++ 中，如果我通过堆创建对象，则意味着它是在运行时创建的。如果我创建的对象不是使用 new 关键字，它是在编译时创建的。

如果我听到堆这个词意味着运行时可以吗？

第二个问题

在java中，如果一个对象的引用引用了一个不同的对象，那么它首先引用的对象将被垃圾收集器自动销毁，因为没有人引用它。在 c++ 中也会发生同样的事情，就像你沿着堆创建一个对象，然后创建一个指向它的指针，然后分配一个指向该对象的指针。如果该指针指向不同的对象，堆中的对象会发生什么情况，该对象将通过自动执行析构函数来销毁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T21:12:31.923

本地对象在运行时在栈上创建，不涉及使用new

使用 new 创建的对象在有人调用 delete 之前不会被销毁

静态对象是在程序启动时创建的。

# objective-c - 使用 Array 观察键值不做任何事情

> ID：10263048
> 
> 赞同：1
> 
> 时间：2012-04-21T21:10:02.390
> 
> 标签：objective-c, ios, xcode, key-value-observing

我有两个视图，我的第一个视图是 class1.m，第二个视图是 class2.m。当在第一个视图的工具栏上按下按钮时，我的第二个视图被初始化为弹出框。我的第二个视图中有一个数组，如果按下任何行，就会在其中添加对象。我试图在我的第一个视图中设置一个 KVO，以便我可以在我的第一个视图中从第二个视图访问 allSelectedFocus 数组，但它不起作用。我意识到我没有调用 removeObserver，但我不知道在哪里调用它，而不是在使用之前删除观察者。如果有人知道任何更好的方法来做到这一点，我愿意接受建议，但如果有人能让这个工作，那也太棒了。

//class2.m

```
#import "class2.h"
#import "class1.h"

@implementation class2

@synthesize selectedFocus = _selectedFocus;
@synthesize focusArray = _focusArray;
@synthesize allSelectedFocus = _allSelectedFocus;

- (void)viewDidLoad
{
_focusArray = [[NSArray alloc]initWithObjects:@"Balance",@"Bevægelse",@"Elementskift",@"Vejrtrækning",@"Alle",nil];

[super viewDidLoad];

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
// Return YES for supported orientations
return YES;
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
// Return the number of sections.
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
// Return the number of rows in the section.
return _focusArray.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

NSString *cellValue = [_focusArray objectAtIndex:indexPath.row];
cell.textLabel.text = cellValue;

return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
_selectedFocus = [[_focusArray objectAtIndex:indexPath.row] stringByAppendingString:@","];
if(![[self mutableAllSelectedFocus] containsObject:_selectedFocus])
   {
       //add object to array, if it's not already there
       [[self mutableAllSelectedFocus] addObject:_selectedFocus];
   }
else
    {
        //remove object from array, if it's already there
        [[self mutableAllSelectedFocus] removeObject:_selectedFocus];   
    }
 }

-(NSMutableArray *)allSelectedFocus
{
if(_allSelectedFocus == nil)
{
    _allSelectedFocus = [[NSMutableArray alloc]init];
}
return _allSelectedFocus;
}

-(NSMutableArray *)mutableAllSelectedFocus
{
return [self mutableArrayValueForKey:@"allSelectedFocus"];
}
@end 
```

//class1.m

```
#import "class1.h"
#import "class2.h"

@implementation class1
- (void)viewDidLoad
{
[super viewDidLoad];

 if(_focusTag == nil)
{
    _focusTag = [[class2 alloc]init];
}

[_focusTag addObserver:self forKeyPath:@"selectedFocus" options:NSKeyValueObservingOptionNew context:NULL];
}

-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
if([keyPath isEqualToString:@"allSelectedFocus"])
{
NSLog(@"%@", [object valueForKeyPath:keyPath]);
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T03:11:00.090

我怀疑这要么是[NSArray 对象不可观察](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/doc/uid/20000137-SW6)的事实，要么是更广泛地违反了[KVC 合规性](https://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/KeyValueCoding/Articles/Compliant.html#//apple_ref/doc/uid/20002172)。无论如何，只需为 NSArray 对象实现[手动更改通知就可以了。](https://developer.apple.com/library/mac/documentation/cocoa/Conceptual/KeyValueObserving/Articles/KVOCompliance.html#//apple_ref/doc/uid/20002178-SW3)我刚刚测试了对 NSArray 对象的更改（添加对象）并且没有发生自动通知，但是当我添加手动通知时，它工作正常。（尽管奇怪的是，NSKeyValueObservingOptionOld 没有按预期工作，显示新值而不是旧值。）仅供参考，这是使用手动通知向我的对象 NSMutableArray 添加一些内容的更新方法的示例：

```
- (void)addToMyArray:(id)obj
{
    [self willChangeValueForKey:@"myArray"];
    [_myArray addObject:obj];
    [self didChangeValueForKey:@"myArray"];
} 
```

**更新：**

顺便说一句，如果您需要 NSKeyValueObservingOptionOld，您可以执行以下操作：

```
- (void)addToMyArray:(id)obj
{
    NSMutableArray *tempArray = [NSMutableArray arrayWithArray:_myArray];
    [tempArray addObject:obj];
    [self setMyArray:tempArray];
} 
```

这样一来，就不需要手动通知了，新旧值都可以检索，但也显得内存使用效率低下，所以有利有弊。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T06:31:04.057

请注意，您绝不会使用访问器方法来设置/获取您的属性。这意味着 KVO 将不起作用。我相信 KVO 依赖于通过访问器获取/设置属性。

我不确定您要使用该应用程序完成什么，但我整理了一些可能有帮助的代码。我在代码中发表了评论，所以我不会在整个答案中解释它。

我会像你一样从 class2 开始：

```
#import <UIKit/UIKit.h>

@interface Class2ViewController : UITableViewController

@property (nonatomic, strong) NSArray *focusArray;
@property (nonatomic, strong) NSMutableArray *allSelectedFocus;

// This is a readonly property that will return a mutable array of the allSelectedFocus      property
// This gives you the ability to have automatic KVO if you add/remove using this property
// You won't have to wrap your calls to will/didChangeValueForKey:
@property (nonatomic, readonly, strong) NSMutableArray *mutableAllSelectedFocus;

@end

#import "Class2ViewController.h"
#import "Class1ViewController.h"

@implementation Class2ViewController

@synthesize focusArray = _focusArray;
@synthesize allSelectedFocus = _allSelectedFocus;

- (void)viewDidLoad
{
    [super viewDidLoad];

    // This is what you have 
    // FYI you are accessing the iVar directly, not sure if that matters in your app or not
    _focusArray = [[NSArray alloc] initWithObjects:@"Balance",@"Bevægelse",@"Elementskift",@"Vejrtrækning",@"Alle",nil];
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Grab the string of interest from the _focusArray --> this is direct access again which I imagine is fine
    NSString *selectedFocus = [[_focusArray objectAtIndex:indexPath.row] stringByAppendingString:@","];

    // Use the new mutableAllSelectedFocus property to check if the array doesn't contain the string of interest
    if (![[self mutableAllSelectedFocus] containsObject:selectedFocus]) {

        // If it doesn't contain it, add it using the mutableAllSelectedFocus property
        [[self mutableAllSelectedFocus] addObject:selectedFocus];
    }

}

// This is getter that lazily instantiates your _allSelectedFocus array
- (NSMutableArray *)allSelectedFocus
{
    // Check to see if the backing iVar is nil
    if (_allSelectedFocus == nil) {

        // If it is, create an empty mutable array
        _allSelectedFocus = [[NSMutableArray alloc] init];
    }

    // return the array
    return _allSelectedFocus;
}

// This is our new property
- (NSMutableArray *)mutableAllSelectedFocus
{
    // mutableArrayValueForKey: returns a mutable array for the given key (property)
    // Allows us better KVO and efficiency with changing properties
    return [self mutableArrayValueForKey:@"allSelectedFocus"];
} 
```

现在第 1 课：

```
#import "Class1ViewController.h"
#import "Class2ViewController.h"

@implementation Class1ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    // If you are using ARC, this instance will be deallocated after -viewDidLoad
    // You will want to store this in an instance variable if you need to keep it around
    Class2ViewController *class2ViewController = [[Class2ViewController alloc] init];

    [class2ViewController addObserver:self
                           forKeyPath:@"allSelectedFocus"
                              options:NSKeyValueObservingOptionNew
                              context:NULL];
}

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    if ([keyPath isEqualToString:@"allSelectedFocus"]) {

        NSLog(@"%@", [object valueForKeyPath:keyPath]);
    }
} 
```

我不确定这种代码更改是否会对您的应用程序有所帮​​助。如果您还没有阅读 Key-Value Coding 和 Key-Value Observing Guides，我会做两件事，并阅读这篇关于多关系和属性的[文章。](http://eschatologist.net/blog/?p=189)

如果我有什么问题，请发表评论。

祝你好运。

# iphone - 将嵌套 Plist 转换为 NSDictionaries 和数组的问题

> ID：10263061
> 
> 赞同：1
> 
> 时间：2012-04-21T21:12:25.917
> 
> 标签：iphone, nested, nsdictionary, property-list

鉴于此 P-List 字典：

![在此处输入图像描述](../Images/790d33aeca4a201fc995492294a49e98.png)

怎么才能到3楼。关键 - “晚餐” - 它本身也是一个字典，并正确解析其值？

或者，我应该以不同的方式开始构建这个 P-List，以便我可以更轻松地了解所有内容吗？

这是我得到的，首先从我的“MenuDictionary”中获取所有键并将它们存储在一个数组中：

```
// Load the Property-List file into the Dictionary:
MenuDictionary = [[NSDictionary alloc] initWithContentsOfFile:menuPath];

// Get all the Keys from the Dictionary, put 'em into a 'mealTimesArray':
mealTimesArray = [[MenuDictionary allKeys] sortedArrayUsingSelector:@selector(compare:)];

// For each meal-type KEY, grab all the Values (dishes) in it and store them in a 'mealDishesArray':
for (NSString *mealTime in mealTimesArray) {
    NSArray *mealDishesArray = [MenuDictionary valueForKey:mealTime];

    // Now I can iterate through the 'mealDishesArray' to access each dish at
    // a time, so I can print them out or do whatever else:
    for (NSString *dish in mealDishesArray) {
        NSLog(@"Iterating through 'mealDishesArray' now...");
        NSLog(@"Current 'dish' is: %@", dish); 
```

当我到达“晚餐”键时出现问题：它是一个字典，包含 2 个键和 2 个数组值。那么如何将其内容加载到 Dictionary 对象中呢？更具体地说，我应该使用什么“init”方法将“Dinner”内容加载到我的新 Dictionary 对象中？

我试过这个 - 不起作用：

```
// I put this inside the first fast-enum loop:

if ([mealTime isEqualToString: @"Dinner"]) {
   // init new Dictionary object (declared previously):
   dinnerDictionary = [[NSDictionary alloc] initWith ???]; 
```

我想用“晚餐”键的内容来初始化它，但它显然不是 P-List 文件，所以我不能使用

```
 initWithContentsOfFile: pathName 
```

我不明白其他哪个 init 方法可以让我访问“Dinner”的键和值。因为即使“晚餐”的结构是字典，它目前位于一个数组中，它并不认为它是字典（我认为......）

我对此显然有点不清楚。

或者，我应该以不同的方式开始构建我的 P-List 以便我可以获取这个嵌套的晚餐字典吗？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T21:51:10.593

我认为 plist 结构是有意义的，并且基于类有条件地处理内容也完全可以。我会在合理的期望范围内对 plist 中的内容做出反应，所以......

```
// for each meal...
for (NSString *mealTime in mealTimesArray) {
    // we're not sure what kind of meal we have
    id mealInfo = [MenuDictionary valueForKey:mealTime];

    if ([id isKindOfClass:[NSArray self]]) {
        // it's an array? cast as an array and deal with the array
        NSArray *mealDishesArray = (NSArray *)mealInfo;
        [self handleMealArray:mealDishesArray];
    } else if ([id isKindOfClass:[NSDictionary self]]) {
        // it's a dictionary?  that's cool, too. cast as a dictionary and deal with it
        NSDictionary *mealDictionary = (NSDictionary *)mealInfo;
        [self handleMealDictionary:mealDictionary];
    }
}

// you've worked out to handle the array
- (void)handleMealArray:(NSArray *)mealDishesArray {
    for (NSString *dish in mealDishesArray) {
        NSLog(@"Iterating through 'mealDishesArray' now...");
        NSLog(@"Current 'dish' is: %@", dish);
    }
}

// handle the dictionary like a dictionary, realizing that it contains
// arrays, which you've already worked out how to handle
- (void)handleMealDictionary:(NSDictionary *)mealDictionary {
    for (NSString *dishType in [mealDictionary allKeys]) {
        NSArray *mealDishesArray = [mealDictionary valueForKey:dishType];
        [self handleMealArray:mealDishesArray];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T21:34:14.920

“问题”出在这一行：

```
NSArray *mealDishesArray = [MenuDictionary valueForKey:mealTime]; 
```

当mealTime 为'Dinner' 时，您正在为mealDishesArray 分配一个NSDictionary 值。认为您有一个数组，然后使用：

```
for (NSString *dish in mealDishesArray) 
```

迭代数组中的元素，这不会给你你对“晚餐”的期望。您可以考虑添加如下内容：

```
NSAssert ([mailDishesArray isKindOfClass: [NSArray class]], @"Expecting an array"); 
```

在你分配到 mealDishesArray 之后。

解决办法是什么？您的 PLIST 在“早餐”、“午餐”和“晚餐”之间具有完全不同的结构。为什么 'Dinner' 是 NSDictionary 而其他的是 NSArray？使它们都具有相同的类型。如果不能，那么您*必须*根据以下条件对代码进行条件化：

```
if ([mealTime isEqualToString: @"Dinner"]) {
   NSDictionary *dinnerDictionary = (NSDictionary *) [MenuDictionary valueForKey:mealTime];
   /* ... */ } 
```

您不需要分配任何内容或从文件中读取任何内容；您已经有一个用于“晚餐”数据的字典。

# php - 如何在下面设置 if isset 语句

> ID：10263062
> 
> 赞同：2
> 
> 时间：2012-04-21T21:12:28.020
> 
> 标签：php, javascript, jquery, ajax

我在下面有一个 javascript 函数，当文件完成上传时，它将显示必要的消息：

```
function stopImageUpload(success){

      var imagename = <?php echo json_encode($imagename); ?>;   
      var result = '';
      if (success == 1){
         result = '<span class="msg">The file was uploaded successfully!</span><br/><br/>';
         $('.listImage').append(imagename + '<br/>');
      }
      else {
         result = '<span class="emsg">There was an error during file upload!</span><br/><br/>';
      }

return true;
} 
```

现在我正在尝试检索下面的 $_SESSION 变量，然后使用上面的 javascript 函数（位于单独的页面上）将 $_SESSION 称为“$imagename”，然后将其附加到 .list 中。

但我的问题是如何编写上面的 if issett 语句，以便它可以判断下面的 $_SESSION 变量是否已设置，然后我可以使用 $imagename 来检索会话？

下面是包含 $_SESSION 和上传文件的 php 脚本：

```
 if (isset($_POST['fileImage'])) {
      $_SESSION['imagename'] =  $_FILES['fileImage']['name'];

    if( file_exists("ImageFiles/".$_FILES['fileImage']['name'])) {  
        $_SESSION['fileImage']['name'] = $_FILES['fileImage']['name'];
        $parts = explode(".",$_FILES['fileImage']['name']);
        $ext = array_pop($parts);
        $base = implode(".",$parts);
        $n = 2;

        while( file_exists("ImageFiles/".$base."_".$n.".".$ext)) $n++;
        $_FILES['fileImage']['name'] = $base."_".$n.".".$ext;

        move_uploaded_file($_FILES["fileImage"]["tmp_name"], 
        "ImageFiles/" . $_FILES["fileImage"]["name"]);
        $result = 1;

    }
        else
          {
          move_uploaded_file($_FILES["fileImage"]["tmp_name"],
          "ImageFiles/" . $_FILES["fileImage"]["name"]);
          $result = 1;

          }
      }

    ?>

    <script language="javascript" type="text/javascript">
window.top.stopImageUpload(<?php echo "'$result'";?>);</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T21:17:08.503

尝试

```
var imagename = <?php if (isset($_SESSION['imagename'])) echo json_encode($_SESSION['imagename']); ?>; 
```

# ember.js - Ember.js 和 jsfiddle 问题

> ID：10263067
> 
> 赞同：2
> 
> 时间：2012-04-21T21:13:39.860
> 
> 标签：ember.js, jsfiddle

我是 javascript 世界的新手，所以请毫不犹豫地指出显而易见的事情。我试图创建一个 jsfiddle 来询问有关如何在 App.Column 视图创建的 div 元素中插入一些内容的问题。

但是我没有让小提琴工作，谁能指出我的错误原因？

控制台记录以下内容：未捕获的类型错误：无法调用未定义的方法“扩展”

这是小提琴：http: [//jsfiddle.net/Aqrrj/2/](http://jsfiddle.net/Aqrrj/2/)

JQueryUI-widget 取自[https://github.com/lukemelia/jquery-ui-ember](https://github.com/lukemelia/jquery-ui-ember)，还有一个我从它开始的工作示例。

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T21:49:19.317

有2个问题：

通过创建应用程序并将其分配给`var App = Ember.Application.create()`您并不能使其在全局对象上可用。删除`var`使`App`全局变量，因此可在您的 Handlebars 模板中使用。

其次，您指的是一个视图类`App.Column`，但它从未在您的 JavaScript 代码中声明。

因此，您的示例可以通过以下几行来修复，请参阅[http://jsfiddle.net/pangratz666/pSKgV/](http://jsfiddle.net/pangratz666/pSKgV/)：

```
App = Ember.Application.create();
...
App.Column = Ember.View.extend(); 
```

# php - Google Voice PHP API 直接连接

> ID：10263069
> 
> 赞同：2
> 
> 时间：2012-04-21T21:14:16.413
> 
> 标签：php, google-voice

有没有人找到一种方法来使用谷歌语音发送电话而无需先打电话给你。我需要电话响铃，但没有必要发送任何特定消息或任何东西。这是我一直在查看的 API。[https://github.com/aaronpk/Google-Voice-PHP-API](https://github.com/aaronpk/Google-Voice-PHP-API)在 API 中，您指定您的谷歌语音号码和收件人的号码，然后它会呼叫您的电话并将您连接到收件人。我正在寻找一种方法来连接到收件人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:37:23.967

这就是 Google Voice 的工作方式……呼叫您 a) 使用网络界面，该界面呼叫您的一部手机然后拨打另一个人，或者 b) 您呼叫您自己的 GV 号码并使用菜单拨出。我看过的 API 包都使用 GV 移动站点来拨号或发送短信（方法 a）。

对于您的情况，我能想到的唯一方法是在某处获得一个带有号码的免费 VoIP 帐户，并设置一个自动应答的软电话。

但这引出了一个问题……你的目的是什么……？网络驱动的恶作剧电话？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T16:52:34.640

当我创建的计算机系统需要注意时，我将其用于系统以提醒人们。短信提醒很好......除非你睡着了并且听不到它们。所以，我所做的是创建一个谷歌语音号码，然后删除其中所有的电话，并记录一个长语音邮件。这样，它会呼叫并直接发送一条消息，告诉他们系统需要注意，然后他们就可以挂断电话并做出回应。

轻微的工作，但它似乎工作正常。

# c++ - C++ cli access Form variables from class

> ID：10263070
> 
> 赞同：0
> 
> 时间：2012-04-21T21:14:17.207
> 
> 标签：c++, variables, command-line-interface

There is a form Form1 which contains int x; and a class MyClass with .h and .cpp files. How can I access the Form1 variable x from MyClass, without passing it using a method? I think something like Form1.x Maybe is it a bad style of programming? I am just learning..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T21:22:21.760

好吧，它打破了封装，你真的应该有你想要公开的数据的公共 getter 和 setter，允许像你建议的那样访问允许调用者损坏、重新分配等。基本上做他们喜欢的任何事情。您应该添加一种方法`getX()`以获取更好的名称。

C++/CLI 支持的属性可能是您所追求的，请参阅 msdn 文章：http: [//msdn.microsoft.com/en-us/library/ms379617%28v=vs.80%29.aspx#vs05cplus_topic10](http://msdn.microsoft.com/en-us/library/ms379617%28v=vs.80%29.aspx#vs05cplus_topic10)和代码项目帖子：[http://www.codeproject.com/Articles/10352/C-CLI-Properties-Syntactic-sugar-for-accessor-meth](http://www.codeproject.com/Articles/10352/C-CLI-Properties-Syntactic-sugar-for-accessor-meth)

# c++ - Making an OpenGL app without Windows.h

> ID：10263071
> 
> 赞同：0
> 
> 时间：2012-04-21T21:14:48.910
> 
> 标签：c++, visual-studio, visual-studio-2010, opengl

I've set the linker to additional dependencies opengl32.lib;glu32.lib;sfml-main-d.lib;

When I run it, I get loads of errors about APIEntry or something in one of the OpenGL files. SFML is also set up fine.

Here is my code:

```
#include <iostream>
//#include <Windows.h>
#include <gl/gl.h>
#include <gl/glu.h>

using namespace std;

void main()
{

} 
```

It works fine if I include Windows.h, but I really don't want to make it windows-specific (Since the only reason I switched to C++ from C# is for cross platform and I'm not too fussed on Java)

![Image of my errors](../Images/12ffa86d24f9a2580f9bc79510d50a23.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T21:22:36.983

如果你打算使用 OpenGL，那么你应该使用适当的[OpenGL 加载库](http://www.opengl.org/wiki/OpenGL_Loading_Library)来获取你的函数指针。这些库的标头将包含使标头工作所需的任何特定于平台的内容，使用适当的#defines 等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T21:24:50.757

如果您刚开始，您可能对设置自己的 OpenGL 上下文等较低级别的东西不感兴趣。我建议您在[http://www.glfw.org/](http://www.glfw.org/)上查看 GLFW - 这是我更喜欢 OpenGL 的内容。它是适用于 Windows、linux 和 MAC 的开源和跨平台的。

祝你好运！

# python - List assignment to other list

> ID：10263072
> 
> 赞同：3
> 
> 时间：2012-04-21T21:14:50.143
> 
> 标签：python

Is there a reason that assigning a list to another list and changing an item in one reflects the change in both, but changing the entire list of one does not reflect the change in both?

```
a=5
b=a
a=3
print b #this prints 5

spy = [0,0,7]
agent = spy
spy[2]=8
print agent #this prints [0,0,8]

spy = [0,0,7]
agent = spy
spy = "hello"
print agent #this prints [0,0,7] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T21:16:17.943

Your first **mutates** the *object*, your second **rebinds** the *name*.

(`list` that `spy` contains)`[2]=8`

(name called "spy")`= "hello"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T21:30:42.360

如果您忘记了有关指针、地址、值传递和引用传递的所有知识，而将其视为标签和对象，或者名称和对象，那么 Python 中的引用会更容易理解。

按照这个：

```
a=5
b=a
a=3
print b #this prints 5 
```

你有标签'a'放在5上，然后'b'放在同一个对象'a'上，因此是5。然后'a'被移除并放在3上。'b'仍然在5上并移动'a'到别的东西不影响它。

```
spy = [0,0,7] 
```

您将名称“间谍”放在列表中 [0, 0, 7]

```
agent = spy 
```

您将名称“代理”放在**同一个**列表中 [0, 0, 7]

```
spy[2]=8
print agent #this prints [0,0,8] 
```

您将列表中的索引 2 标签放在 8 上。由于 agent 和 spy 都是同一个列表的名称，因此当您打印它时，您会看到两者的变化。

```
spy = [0,0,7] 
```

您在列表 [0, 0, 7] 上有名称“间谍”

```
agent = spy 
```

**您在同一个**列表 [0, 0, 7]上有名称“代理”

```
spy = "hello" 
```

现在你已经从列表中删除了名字'spy'并放入了一个字符串“hello”。该列表仍然具有分配给它的标签“代理”。

```
print agent #this prints [0,0,7] 
```

知道了？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T11:21:34.257

当您将一个列表分配给一个变量到另一个变量时，它们都属于同一个列表。

```
spy = [0,0,7]
agent = spy
spy[2]=8 
```

所以这就是为什么你改变 spy 所以代理也改变了，因为它们都属于同一个内存位置上的同一个列表。你可以检查一下

```
id(spy)
id(agent) 
```

这是通过引用调用。

但是如果在代理初始化后将新列表分配给 spy，则 spy 属于另一个内存位置上的另一个列表。

```
id(spy)
id(agent) 
```

您还可以使用 id() 函数检查这一点，该函数提供内存中变量的引用 ID。

# c# - Datgridview cell validation

> ID：10263081
> 
> 赞同：0
> 
> 时间：2012-04-21T21:16:05.087
> 
> 标签：c#

I have a datagridview with 3 columns and 19 rows.first two columns are read-only. The last column has values already set to 0\. User has to input integer values in the last one and I need to validate if it is an integer.if not display message "Enter Integer". I came across the cellleave event and i was thinking it might be the right one to use to perform the check but i don't know how to call that event automatically.

To summarise

-- Values in 3rd column of datagridview already set to zero.

--user inputs value in 3rd column.

--if value is not integer display message "Please enter integer"

I am a beginner in c# and would really appreciate any help on that matter.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T21:52:12.390

```
 private void dataGridView1_CellValidating(object sender, DataGridViewCellValidatingEventArgs e)
        {
            DataGridViewTextBoxCell cell = dataGridView1[e.ColumnIndex, e.RowIndex] as DataGridViewTextBoxCell;

            if (cell != null)
            {
                char[] chars = e.FormattedValue.ToString().ToCharArray();
                foreach (char c in chars)
                {
                    if (char.IsDigit(c) == false)
                    {
                        MessageBox.Show("You have to enter digits only");

                        e.Cancel = true;
                        break;
                    }
                }
            }
        } 
```

> [http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/6fc564f9-e154-4be1-8d2c-9988a81e2be7](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/6fc564f9-e154-4be1-8d2c-9988a81e2be7)

# asp.net - How to pass POST parameters to ASP.Net web request?

> ID：10263082
> 
> 赞同：22
> 
> 时间：2012-04-21T21:16:11.733
> 
> 标签：asp.net, httpwebrequest

I'm trying to make web requests programmatically in ASP.NET, using the POST method.
I'd like to send POST parameters with the web request as well. Something like this:

```
WebRequest req = WebRequest.Create("accounts.craigslist.org/login/pstrdr");
    req.Method = "POST";
    req.Headers.Add("Content-Type", "application/x-www-form-urlencoded");
    //WebRequest.Parameters.add("areaabb","hou"); 
```

obviously the commented line does not work. How do I achieve this?

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-04-21T21:38:09.870

试试这样...

```
 string email = "YOUR EMAIL";
  string password = "YOUR PASSWORD";

  string URLAuth = "https://accounts.craigslist.org/login";
  string postString = string.Format("inputEmailHandle={0}&name={1}&inputPassword={2}", email, password);

  const string contentType = "application/x-www-form-urlencoded";
  System.Net.ServicePointManager.Expect100Continue = false;

  CookieContainer cookies = new CookieContainer();
  HttpWebRequest webRequest = WebRequest.Create(URLAuth) as HttpWebRequest;
  webRequest.Method = "POST";
  webRequest.ContentType = contentType;
  webRequest.CookieContainer = cookies;
  webRequest.ContentLength = postString.Length;
  webRequest.UserAgent = "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.1) Gecko/2008070208 Firefox/3.0.1";
  webRequest.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
  webRequest.Referer = "https://accounts.craigslist.org";

  StreamWriter requestWriter = new StreamWriter(webRequest.GetRequestStream());
  requestWriter.Write(postString);
  requestWriter.Close();

  StreamReader responseReader = new StreamReader(webRequest.GetResponse().GetResponseStream());
  string responseData = responseReader.ReadToEnd();

  responseReader.Close();
  webRequest.GetResponse().Close(); 
```

# iphone - Killing iOS app upon user request

> ID：10263083
> 
> 赞同：2
> 
> 时间：2012-04-21T21:16:15.837
> 
> 标签：iphone, objective-c, ios, user-controls

So here is the issue I am facing. Certain portions of the application I am building open some c network sockets that allow connections to various servers/services. However, if the application goes to sleep, these socket connections are lost, and error out when trying to reload them. So what I want to do is basically notify the user when the app launches again, that the application needs to be restarted. The main question is, can I present them with a button that will kill the app by using exit(0) without my app getting rejected?

Apple says that the user should be in control of when the app is killed, and in this case I see that they are, but I am not sure of Apple's opinion on this. Has anyone else used this? Have you been rejected for this? Thanks in advance for any advice!

**EDIT:**

Thank you everyone for your advice. I am trying to take everything into consideration, but because the app needs to be submitted ASAP, I just need to know, if we can not get another solution, if the above proposed solution, will get rejected or not.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T21:29:35.013

当重大事件影响应用程序的生命周期时，您的应用程序委托会收到通知。与其要求您的用户重新创建会话，不如尝试停止网络操作，然后在应用程序生命周期中的适当时间自动恢复它们。

当应用程序准备退出或通过应用程序委托中的回调进入后台时，您可以在任意数量的地方优雅地终止网络套接字（除其他外）：

```
applicationWillResignActive:
applicationWillEnterBackground:
applicationWillTerminate: 
```

可能在以下位置重建套接字：

```
applicationDidBecomeActive
applicationWillEnterForeground 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T21:26:10.210

您是否尝试过不允许应用在后台运行？然后，只要用户退出主屏幕，它就会被杀死。这可能有点激进，但可以解决问题。从 Apple 选择退出后台执行：

> “如果您不希望应用程序在退出时保留在后台，您可以通过将 UIApplicationExitsOnSuspend 键添加到应用程序的 Info.plist 文件并将其值设置为 YES 来明确选择退出后台执行模型。
> 
> 当应用程序选择退出时，它会在未运行、非活动和活动状态之间循环，并且永远不会进入后台或挂起状态。
> 
> 当用户点击 Home 按钮退出应用程序时，应用程序委托的 applicationWillTerminate: 方法被调用，应用程序有大约 5 秒的时间清理并退出，然后终止并移回未运行状态。”

另请参阅：[如何防止我的应用在 iPhone 的后台运行](https://stackoverflow.com/questions/3222463/how-to-prevent-my-app-from-running-in-the-background-on-the-iphone)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T00:04:23.533

文档对此非常明确，“没有提供用于优雅终止 iOS 应用程序的 API。” 请参阅[技术问答 QA1561 如何以编程方式退出我的 iOS 应用程序？](https://developer.apple.com/library/ios/qa/qa1561/).

坦率地说，终止应用程序以清理套接字就像通过强制应用程序退出而不是调用来处理内存管理一样`release`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T21:25:12.447

调出一个模态视图控制器告诉用户退出应用程序怎么样？你可以在没有任何关闭按钮的情况下制作这个视图控制器，因此用户有义务终止应用程序。

# ajax - Wicket AbstractAjaxTimerBehavior and performance

> ID：10263089
> 
> 赞同：0
> 
> 时间：2012-04-21T21:17:20.357
> 
> 标签：ajax, wicket

I'm using AbstractAjaxWicketBehavior in my Wicket application and it seems to have a descending performance over time when more AJAX calls appear. When a page is refreshed without AJAX, the performance is fine again. I would like to know if this is a normal thing or can be a memory leak of some kind present? I can't simply attach the code as it's spread over more classes and it would require too much effort to understand, but in short I want to do this:

1.  create and start the timer
2.  repeat some code 10x
3.  stop the timer
4.  set some values to attributes
5.  ajax refresh (causes show/hide of some components)

and do the same again (hypotetically infinite times).

Every repetition of this flow is slower even though I use constant updating interval of 100ms.

As the timer is a behavior and does not allow to be restarted or reused, it is created every time as a new instance and attached to the Form component.

The timer looks like this:

```
static int count = 0
new AbstractAjaxTimerBehavior(Duration.milliseconds(100)) {
 // do some code
 count++
 if(count == 10) {
  stop();
  // do some code
 } 
} 
```

This behavior is attached to a Form inside a Panel and upon a click on an AjaxLink the Form is refreshed (added to AjaxRequestTarget). Every time I remove the old timer from the Form component before adding the new behavior.

Everything works fine, but every repetition of this procedure runs slower (The first one is perfect, the second one is also around 100ms, but then it gets slower (after 10 or 15 repetitions, the refresh interval is about 1 second) and all other AJAX calls in the app also go significantly slower), so I suspect there is a memory leak... any obvious reasons? Or any ways how to make a wicket timer better for my purpose? Any advice appreciated. Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T08:29:43.697

我们的 wicket 应用程序也往往会随着每个 AJAX 请求而变慢。我不确定这是否是完全相同的问题，或者它是否与 AjaxTimerBehavior 特别相关，但是：

我们发现造成这种情况的一个原因是由于 HTML 替换而发生的浏览器中的伪泄漏。显然，浏览器在重新加载页面之前无法释放内存。

您可以使用任务管理器（或其他工具）监控浏览器内存，并观察每个 AJAX 请求的内存增加以及它如何在整个页面重新加载 (F5) 时缓解。尤其是在 IE 中。

不过，我们用 AJAX 请求替换了很多 HTML。

# javascript - jQuery：$(element).text() 不起作用

> ID：10263090
> 
> 赞同：4
> 
> 时间：2012-04-21T21:17:19.967
> 
> 标签：javascript, jquery, html

我正在动态生成内容 - 带有链接的 div。链接应在单击时弹出一个包含链接文本的弹出窗口（showMyText 函数）。相反，我得到一个空字符串:(

为什么这不起作用？我搜索了 Stackoverflow 和 jQuery API，它应该可以工作。

```
function a(){
    var div=document.createElement("div");
    div.innerHTML='<a class="aClass" href="javascript:showMyText(this)">Link Text</a>';

    var parent_div=document.getElementById('dinamicni_div');
    parent_div.appendChild(div);    
}

function showMyText(link){
    var txt=$(link).text();
    alert(txt);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T21:25:54.473

如果您使用 jQuery 来获取`text()`为什么不将它用于其他所有内容呢？

```
function a() {
    var $div = $("<div></div>");
    var $a = $("<a></a>")
        .attr("href", "#")
        .addClass("aClass")
        .text("Link text")
        .appendTo($div);

    $div.appendTo("#dinamicni_div");
}

$("#dinamicni_div").on('click', '.aClass', function() {
    alert($(this).text());
}); 
```

[**示例小提琴**](http://jsfiddle.net/UN9wx/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T21:23:52.957

将您的代码更改为：

```
div.innerHTML='<a class="aClass" onclick="showMyText(this)">Link Text</a>'; 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/8U7ZE/)**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T21:30:34.483

我会采用稍微不同的方法并使用“live”方法，一旦将它插入 DOM，您就可以将点击事件绑定到动态创建的元素

```
$(document).ready(function(){
  $('#dinamicni_div').html('<a class="aClass" href="#">Link Text</a>');
  $(".aClass").live('click',function(){
    alert($(this).text());
  });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-03T15:09:22.483

我发现`text()`在用户手动编辑文本区域后停止工作。`val()`继续按预期工作。

# php - PHP, implicit_flush: enable to run two instances of the same script in the same browser

> ID：10263091
> 
> 赞同：1
> 
> 时间：2012-04-21T21:17:24.787
> 
> 标签：php, browser, flush, autoflush

I have a PHP script that uses implicit_flush() to output data when it's ready, the problem is that when I start two instances from Google chrome or Firefox the seconde instance remains loading without outputing anything!

To prevent locking issues with session files, I have turned Off `session.auto_start` in the php.ini file, and I added a `session_write_close()` at the begining of the script to be sure.

But if run the two instances on two differente browsers, the two work perfectly. If I run the second instance on an incognito mode in Chrome, it doesn't work.

Is the problem relative to the browser, the server, or router? Is there any solution to bypass this restriction?

Edit: because two instances run on two browser I think the only possibility is a browser problem.

# c# - ExecuteNonQuery: Connection property has not been initialized.

> ID：10263094
> 
> 赞同：18
> 
> 时间：2012-04-21T21:17:41.093
> 
> 标签：c#, sql-server, insert

Afternoon, So I have been at this one issue for hours and can't really get past this last hump. Below is the code for this program that I am writing:

```
using System;  
using System.Collections.Generic;  
using System.Linq;  
using System.Text;  
using System.Diagnostics;  
using System.Data;  
using System.Data.SqlClient;  
using System.Configuration;  

namespace Test  
{  
  class Program  
  {  
    static void Main()  
    {  
      EventLog alog = new EventLog();  
      alog.Log = "Application";  
      alog.MachineName = ".";  
      foreach (EventLogEntry entry in alog.Entries)  
      {  
       SqlConnection connection1 = new SqlConnection(@"Data Source=.\sqlexpress;Initial Catalog=syslog2;Integrated Security=True");  
       SqlDataAdapter cmd = new SqlDataAdapter();  
       cmd.InsertCommand = new SqlCommand("INSERT INTO Application VALUES (@EventLog, @TimeGenerated, @EventType, @SourceName, @ComputerName, @InstanceId, @Message) ");  
       cmd.InsertCommand.Parameters.Add("@EventLog",SqlDbType.VarChar).Value = alog.Log;  
       cmd.InsertCommand.Parameters.Add("@TimeGenerated", SqlDbType.DateTime).Value = entry.TimeGenerated;  
       cmd.InsertCommand.Parameters.Add("@EventType", SqlDbType.VarChar).Value = entry.EntryType;  
       cmd.InsertCommand.Parameters.Add("@SourceName", SqlDbType.VarChar).Value = entry.Source;  
       cmd.InsertCommand.Parameters.Add("@ComputerName", SqlDbType.VarChar).Value = entry.MachineName;  
       cmd.InsertCommand.Parameters.Add("@InstanceId", SqlDbType.VarChar).Value = entry.InstanceId;  
       cmd.InsertCommand.Parameters.Add("@Message", SqlDbType.VarChar).Value = entry.Message;  
       connection1.Open();  
       cmd.InsertCommand.ExecuteNonQuery();  
       connection1.Close();  
      }   
    }  
  }  
} 
```

The Code compiles fine without error or warning but when i go to run it, as soon as it gets to cmd.InsertCommand.ExecuteNonQuery(); I get the following error:

> ExecuteNonQuery: Connection property has not been initialized.

Any ideas on what I missed?

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-21T21:24:15.057

您需要将连接分配给`SqlCommand`，您可以使用[构造函数](http://msdn.microsoft.com/en-us/library/877h0y3a.aspx)或[属性](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.connection.aspx)：

```
cmd.InsertCommand = new SqlCommand("INSERT INTO Application VALUES (@EventLog, @TimeGenerated, @EventType, @SourceName, @ComputerName, @InstanceId, @Message) ");
cmd.InsertCommand.Connection = connection1; 
```

我强烈建议将[`using-statement`](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)用于实现`IDisposable`like的任何类型`SqlConnection`，它也会关闭连接：

```
using(var connection1 = new SqlConnection(@"Data Source=.\sqlexpress;Initial Catalog=syslog2;Integrated Security=True"))
using(var cmd = new SqlDataAdapter())
using(var insertCommand = new SqlCommand("INSERT INTO Application VALUES (@EventLog, @TimeGenerated, @EventType, @SourceName, @ComputerName, @InstanceId, @Message) "))
{
    insertCommand.Connection = connection1;
    cmd.InsertCommand = insertCommand;
    //.....
    connection1.Open();
    // .... you don't need to close the connection explicitely
} 
```

除此之外，您不需要`DataAdapter`为 中的每个条目创建新连接`foreach`，即使创建、打开和关闭连接并不**意味着**ADO.NET 将创建、打开和关闭**物理**连接，而只是查看可用连接的[连接池](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)。然而，这是不必要的开销。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-07-27T11:38:15.583

您没有初始化连接。这就是为什么会出现这种错误的原因。

你的代码：

```
cmd.InsertCommand = new SqlCommand("INSERT INTO Application VALUES (@EventLog, @TimeGenerated, @EventType, @SourceName, @ComputerName, @InstanceId, @Message) "); 
```

更正的代码：

```
cmd.InsertCommand = new SqlCommand("INSERT INTO Application VALUES (@EventLog, @TimeGenerated, @EventType, @SourceName, @ComputerName, @InstanceId, @Message) ",connection1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T21:25:14.003

这里有几件事不对。

1.  您真的要为每个日志条目打开和关闭连接吗？

2.  你不应该使用`SqlCommand`而不是`SqlDataAdapter`吗？

3.  数据适配器（或`SqlCommand`）需要的正是错误消息告诉您它丢失的内容：活动连接。仅仅因为您创建了一个连接对象并不会神奇地告诉 C# 它是您要使用的对象（尤其是在您尚未打开连接的情况下）。

我强烈推荐 C#/SQL Server 教程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-16T13:23:58.133

实际上，当服务器建立连接但由于识别连接功能标识符失败而无法构建时会发生此错误。这个问题可以通过在代码中输入连接函数来解决。为此，我举一个简单的例子。在这种情况下，功能是 con 你可能会有所不同。

```
SqlCommand cmd = new SqlCommand("insert into ptb(pword,rpword) values(@a,@b)",con); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-19T10:56:43.187

打开和关闭连接需要很长时间。并按照另一位成员的建议使用“使用”。我稍微更改了您的代码，但将 SQL 创建和打开和关闭放在您的循环之外。这应该会加快执行速度。

```
 static void Main()
        {
            EventLog alog = new EventLog();
            alog.Log = "Application";
            alog.MachineName = ".";
            /*  ALSO: USE the USING Statement as another member suggested
            using (SqlConnection connection1 = new SqlConnection(@"Data Source=.\sqlexpress;Initial Catalog=syslog2;Integrated Security=True")
            {

                using (SqlCommand comm = new SqlCommand("INSERT INTO Application VALUES (@EventLog, @TimeGenerated, @EventType, @SourceName, @ComputerName, @InstanceId, @Message) ", connection1))
                {
                    // add the code in here
                    // AND REMEMBER: connection1.Open();

                }
            }*/
            SqlConnection connection1 = new SqlConnection(@"Data Source=.\sqlexpress;Initial Catalog=syslog2;Integrated Security=True");
            SqlDataAdapter cmd = new SqlDataAdapter();
            // Do it one line
            cmd.InsertCommand = new SqlCommand("INSERT INTO Application VALUES (@EventLog, @TimeGenerated, @EventType, @SourceName, @ComputerName, @InstanceId, @Message) ", connection1);
            // OR YOU CAN DO IN SEPARATE LINE :
            // cmd.InsertCommand.Connection = connection1;
            connection1.Open();

            // CREATE YOUR SQLCONNECTION ETC OUTSIDE YOUR FOREACH LOOP
            foreach (EventLogEntry entry in alog.Entries)
            {
                cmd.InsertCommand.Parameters.Add("@EventLog", SqlDbType.VarChar).Value = alog.Log;
                cmd.InsertCommand.Parameters.Add("@TimeGenerated", SqlDbType.DateTime).Value = entry.TimeGenerated;
                cmd.InsertCommand.Parameters.Add("@EventType", SqlDbType.VarChar).Value = entry.EntryType;
                cmd.InsertCommand.Parameters.Add("@SourceName", SqlDbType.VarChar).Value = entry.Source;
                cmd.InsertCommand.Parameters.Add("@ComputerName", SqlDbType.VarChar).Value = entry.MachineName;
                cmd.InsertCommand.Parameters.Add("@InstanceId", SqlDbType.VarChar).Value = entry.InstanceId;
                cmd.InsertCommand.Parameters.Add("@Message", SqlDbType.VarChar).Value = entry.Message;
                int rowsAffected = cmd.InsertCommand.ExecuteNonQuery();
            }
            connection1.Close(); // AND CLOSE IT ONCE, AFTER THE LOOP
        } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-10T06:15:44.627

试试这个..

您需要在执行之前`connection.open()`在`SqlCommand.Connection`对象上使用打开连接`ExecuteNonQuery()`

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-03-06T11:37:29.933

双击您的表单以创建 form_load 事件。然后在该事件中写入 command.connection = "your connection name";

# android - 使用 ContentProvider 在 Android 中升级 SQLite DB

> ID：10263099
> 
> 赞同：1
> 
> 时间：2012-04-21T21:18:25.820
> 
> 标签：android, sqlite, android-contentprovider, android-contentresolver, sqliteopenhelper

我正在开发一个应用程序并使用 SQLite、contentResolver 和 contentProvider。

**应用程序描述** 我的应用程序在内部 SQLite DB 中搜索联系人。数据来自在第一次午餐或用户按下菜单中的更新选项时选择的外部文件。

对数据库的所有访问都是使用 getContentResolver() 完成的。

**ContentProvider** 我有一个*ContactsContentProvider*类，它扩展*ContentProvider*并保存对*ContactsDBAdapter*的引用，这是我扩展*SQLiteOpenHelper*的数据库适配器。（我希望你们都和我在一起直到现在）。

**问题描述** 当用户按下更新按钮时，我希望数据库删除所有表并加载新数据（这是由我的文件选择器完成的，效果很好）。为了使我的*ContactsDBAdapter中的**onUpgrade()*工作，内容提供程序 onCreate() 必须使用比以前更高的版本调用

 *```
@Override
public boolean onCreate() {
      context = getContext();
      pref = PreferenceManager.getDefaultSharedPreferences(context);
      int dbVersion = pref.getInt(Settings.DB_VERSION, 1);
      mDb = new ContactsDBAdapter(context,dbVersion);
      return (mDb == null)? false : true;
} 
```

但是我从我的*contentResolver中获取了**contentProvider* ，所以它不会被创建两次。

 *虽然有很多关于如何使用*contentProvider*和*contentResolver*的解释，但我没有找到任何好的升级进度。

我知道 onUpgrade 是如何工作的，并且在*getReadableDatabase()*和*getWritableDatabase()*调用期间对其进行检查，但事实是版本不会不同，因为*ContactsDBAdapter*与以前的实例相同。

我想过一些变通办法，但根本不喜欢它们。我可以在 insert() 期间手动检查版本是否更高（但这会很昂贵，因为每次调用都会完成），如果答案为真，则手动调用 onUpgrade。

或尝试以某种方式注销提供程序，但到目前为止没有找到任何有效且良好的解决方案。

**升级数据库的最佳做法是什么？**

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T21:38:55.700

我建议您更新共享首选项以更改数据库版本并添加它：

```
SharedPreferences.Editor ed = pref.edit();
ed.putInt(Settings.DB_VERSION, dbVersion + 1);
ed.commit(); 
```

希望它可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T17:44:56.480

我找到了一个不错的解决方案。在扩展*ContentProvider的**ContactsContentProvider*中，我添加了一个*sharedPrefencesListener*

 **```
 @Override
public boolean onCreate() {
      context = getContext();
      pref = PreferenceManager.getDefaultSharedPreferences(context);
      int dbVersion = pref.getInt(Settings.DB_VERSION, 1);
      mDb = new ContactsDBAdapter(context,dbVersion);
      pref.registerOnSharedPreferenceChangeListener(sharedPrefListener) ;
      return (mDb == null)? false : true;
}
SharedPreferences.OnSharedPreferenceChangeListener sharedPrefListener = 
  new SharedPreferences.OnSharedPreferenceChangeListener() {

    @Override
public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, 
     String key) {
   if(key.equals(Settings.DB_VERSION)){
    int dbVersion = sharedPreferences.getInt(Settings.DB_VERSION, 1);
    synchronized (mDb) {
            mDb.close();//Not sure this is the right behavior
        mDb = new ContactsDBAdapter(context,dbVersion);
    }
   }
}
}; 
```

现在，当用户在我的主要活动中更改版本号时，我会设置版本号。这将调用一个新的 ContactsDBAdapter，然后在下次有人需要 getReadableDatabase() 或 getWriteableDatabase() 时调用 onUpgrade。****

# c# - Socket vs Wcf communication

> ID：10263102
> 
> 赞同：3
> 
> 时间：2012-04-21T21:18:55.070
> 
> 标签：c#, .net, wcf, sockets

Did Wcf replace socket? for client server application i need that client send some messages to server and the server can do the same thing without waiting request from any client. So can i do this or wcf can only expose many services that client need and the communication can't be interactif and bidirectionnal? thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T21:31:31.507

你希望连接是持久的吗？如果是这样，那么这听起来对 WCF 来说不是一个好案例。也许可以看看[ZeroMQ](http://zeromq.org)之类的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T21:33:38.540

Wcf 永远不会替换套接字。WCF 只是在 TCP 上实现了一些具体的协议，所以如果你需要其他的东西，比如 IP 甚至 UDP，你仍然需要使用套接字。

如果你需要一个稳定的 TCP 连接，你仍然需要一个套接字。此讨论也可能对您有所帮助。 [http://forums.silverlight.net/t/17502.aspx/2/10](http://forums.silverlight.net/t/17502.aspx/2/10)

# javascript - 这是在 JavaScript 中检查有效日期的好方法吗？

> ID：10263103
> 
> 赞同：2
> 
> 时间：2012-04-21T21:19:13.340
> 
> 标签：javascript, validation

请更正或解释我的过度简化是如何不正确的，因为我不是 JavaScript 专家。

但我只需要知道一个对象是否是有效日期。这只会来自用户输入（即文本框）。

```
var is_valid_date = function(date) {
    try {
        var d = new Date(date);
        return true;
    }
    catch(e) {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-21T21:43:51.013

您必须决定要接受哪种形式的约会。

然后，一旦你知道你想接受什么形式，你就可以检查MDN`new Date(str)`或`date.parse()` [MDN 上](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/parse)的规范，看看它是否完全支持你想要的，以及它是否在错误条件下做正确的事情（它可能不会）。如果没有，那么您将不得不进行一些手动解析。

如果您需要我们的进一步帮助，您需要指定您希望接受的日期形式。

还有一些浏览器差异，因为 javascript 已经开始支持其他日期格式，并且早期的浏览器之间存在一些不一致，这意味着您需要自己构建一个简单的测试脚本，其中包含一堆合法和非法的日期格式字符串，看看是否您的有效性检测可以在多个浏览器中执行您想要的操作。这不是火箭科学，但它也不是微不足道的，需要一些工作，除非您只想接受原始日期对象支持的内容（这不太可能）。

如果这是我的代码，我可能会认为手动解析所需输入格式的工作要少得多，因为它是您自己的手动解析，因此您知道 100% 肯定会在所有浏览器中工作。我可能会使用正则表达式来解析日期，然后将每个组件转换为数字并检查每个组件的有效性。然后，您可以将这些数字组件提供给 Date 构造函数以创建 Date 对象。

如果您现在可以看出，内置日期类对于用户输入的输入并不是很有用。如果你愿意为此使用库，[date.js 库](http://www.datejs.com/)在这方面有很多有用的功能。

这是一个接受这些美国格式的手动解析函数的示例：

```
mm-dd-yyyy
mm dd yyyy
mm/dd/yyyy 
```

JS代码：

```
function checkDate(str) {
    var matches = str.match(/(\d{1,2})[- \/](\d{1,2})[- \/](\d{4})/);
    if (!matches) return;

    // parse each piece and see if it makes a valid date object
    var month = parseInt(matches[1], 10);
    var day = parseInt(matches[2], 10);
    var year = parseInt(matches[3], 10);
    var date = new Date(year, month - 1, day);
    if (!date || !date.getTime()) return;

    // make sure we have no funny rollovers that the date object sometimes accepts
    // month > 12, day > what's allowed for the month
    if (date.getMonth() + 1 != month ||
        date.getFullYear() != year ||
        date.getDate() != day) {
            return;
        }
    return(date);
} 
```

还有一个带有一些测试用例的演示：http: [//jsfiddle.net/jfriend00/xZmBY/](http://jsfiddle.net/jfriend00/xZmBY/)

如果您想要欧元格式，将代码切换到该格式是一件小事。无论哪种情况，您都必须决定接受哪种格式，为其编码，然后与用户沟通需要哪种格式。如果您认为这很混乱，那么也许您会明白为什么这么多网站使用没有这种复杂性的日期日历选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T21:09:10.527

> 请更正或解释我的过度简化是如何不正确的，因为我不是 JavaScript 专家。
> 
> 但我只需要知道一个对象是否是有效日期。这只会来自用户输入（即文本框）。

这就是为什么它过于简单化的原因。

首先，听起来您确实想检查Date 对象的*字符串表示形式的有效性。*这本身并不是特别有用，因为您将希望将日期用于脚本中的某些内容，将其发送到服务器等。

如果您想在脚本中使用日期，有一些[警告](https://stackoverflow.com/questions/10269513/)。

```
new Date('2020-10-10') // Fri Oct 09 2020 20:00:00 GMT-0400 (EDT) 
```

如果你想将它传递给服务器，你需要做的不仅仅是检查有效性——你需要使用你的服务器端代码可以解释的格式。

如果是这种情况，您可以考虑将字符串*规范化*为您选择的格式。您希望能够从客户端和服务器端代码中的规范化字符串创建等效日期。为简单起见，格式可以是人类可读的（不是时间戳），您可以将文本输入的值替换为规范化字符串。

检查字符串的有效性可以简单地成为规范化的一部分...`false`如果输入错误，则返回函数或空字符串，不要更改文本输入的值，而是显示一条消息，指示该值无效：

```
// assume `birthday` is a text input.

birthday.onblur = function() {

    var dateString = normalizeDate(birthday.value);

    if (dateString) {
        validator.style.display = 'none';
        birthday.value = dateString;
    } else {
        validator.style.display = 'block';
    }

}; 
```

`normalizeDate`这是该函数可能看起来的示例。此示例使用格式“yyyy-mm-dd”，您可以根据需要进行更改。

```
function normalizeDate(dateString) {

    // If it's not at least 6 characters long (8/8/88), give up.
    if (dateString.length && dateString.length < 6) {
        return '';
    }

    var date = new Date(dateString), 
        month, day;

    // If input format was in UTC time, adjust it to local.
    if (date.getHours() || date.getMinutes()) {
        date.setMinutes(date.getTimezoneOffset());
    }

    month = date.getMonth() + 1;
    day = date.getDate();

    // Return empty string for invalid dates
    if (!day) {
        return '';
    }

    // Return the normalized string.
    return date.getFullYear() + '-' +
        (month > 9 ? '' : '0') + month + '-' + 
        (day > 9 ? '' : '0') + day;
} 
```

这是强制性的[现场演示](http://jsfiddle.net/K7p9B/1/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T21:28:06.527

`new Date()`例如，如果 month>12 则不会引发异常，您可以使用`Date.parse()`并测试返回的值`isNaN()`

# php - The Connection is Successful but nogetting the data into website mysql

> ID：10263105
> 
> 赞同：1
> 
> 时间：2012-04-21T21:19:16.330
> 
> 标签：php, mysql

We are Trying to Connect php & mysql we got connection successful but we are not receiving the data any ideas please guide

Also we are using mysql and php

```
The Connection is Successful but nogetting the data into website

enter code here`Please let me know who to correct it<html>
<head>
<title> Welcome to PDM</title>
</head>
<body>
<div>
<centre>
Good For Checking The Prices
</centre>
<?php>` 

    $db_host = "localhost";
    $db_username = "wikiacwj_price";
    $db_pass = "";
    $db_name = "wikiacwj_price";

    mysql_connect("$db_host","$db_username","$db_pass") or die ("Please Try Again");
    mysql_select_db("wikiacwj_price") or die ("no data");

    $sql = mysql_query("SELECT * FROM price_comparsion where product_name='ok'");

    //write the results

    while ($row = mysql_fetch_array($sql)); {
    echo $row['product_name'];}

    ?>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T21:22:06.783

紧跟在您的 while 语句之后的分号告诉 while 循环执行...什么也不做 :)

```
...
while ($row = mysql_fetch_array($sql)) {
  echo $row['product_name'];
}
... 
```

应该做的伎俩。

# python - Draw transparent rectangle on YUV-overlay

> ID：10263106
> 
> 赞同：2
> 
> 时间：2012-04-21T21:19:35.160
> 
> 标签：python, pygame

Working on a YUV-viewer in python using `pygame`.

The code below displays one frame of YUV 4:2:0

```
#!/usr/bin/env python

import pygame

W = 352
H = 288
WH = (W, H)

pygame.init()
screen = pygame.display.set_mode(WH)

overlay = pygame.Overlay(pygame.YV12_OVERLAY, WH)

fd = open('foreman.yuv', 'rb')
y = fd.read(W * H)
u = fd.read(W * H / 4)
v = fd.read(W * H / 4)

overlay = pygame.Overlay(pygame.YV12_OVERLAY, WH)

overlay.display((y, u, v)) 
```

This code displays a 16x16 semi-transparent rectangle in position (0,0)

```
pygame.init()
screen = pygame.display.set_mode(WH)

s = pygame.Surface((16,16))
s.set_alpha(128)
s.fill((255,255,255))
screen.blit(s, (0,0))
pygame.display.flip() 
```

But, how do I combine them? I.e. how do I display a semi-transparent rectangle in position (0,0) on top of the YUV-data so that the YUV-data can be seen through the rectangle?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T00:42:40.627

这是一个叠加层。你不能把其他东西“放在上面”：来自[文档](http://www.pygame.org/docs/ref/overlay.html)：

> 叠加对象始终可见，并且始终显示在常规显示内容**之上。**

YUV 覆盖利用媒体播放器通常用于显示视频的硬件。内容通常不会像这样写入“帧缓冲区”（导致屏幕截图/屏幕捕获软件等的空白区域无休止的悲伤）。

因此，您必须将要添加的内容直接“绘制”到 y,u,v 数据中。（或将 y,u,v 数据转换为 RGB 数据并以更常规的方式显示）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:36:05.157

以为我会发布我是如何在 pygame 中从 YCbCr 进行转换的，因为我无法使用谷歌找到任何解决方案。

```
#!/usr/bin/env python

import pygame
import Image
import sys

W = 352
H = 288
WH = (W, H)

pygame.init()
screen = pygame.display.set_mode(WH)

fd = open('foreman.yuv', 'rb')
y = fd.read(W * H)
u = fd.read(W * H / 4)
v = fd.read(W * H / 4)
fd.close()

# Use PIL to get a black-n-white version of the YCbCr
# and convert it to RGB
im = Image.fromstring('L', WH, y)
rgb = im.convert('RGB')

s = pygame.image.frombuffer(rgb.tostring(), rgb.size, rgb.mode)

screen.blit(s, (0,0))
pygame.display.flip() 
```

# ios - iOS 5 块仅与 Release Build 一起崩溃

> ID：10263110
> 
> 赞同：1
> 
> 时间：2012-04-21T21:21:15.487
> 
> 标签：ios, automatic-ref-counting, objective-c-blocks

我使用了块和 ARC，发现在某些情况下，iOS 仅在发布版本中崩溃。像这样写代码是错误的。

```
-(IBAction)clickedButtonA:(UIBarButtonItem*)sender event:(UIEvent*)event {
  NSMutableArray *arrRows = [NSMutableArray arrayWithCapacity:0];
  #warning this code only crash on Release Build.... Don't use this
  NSMutableDictionary * dicRow = [NSMutableDictionary dictionaryWithCapacity:0];
  [arrRows addObject:dicRow];
  dispatch_block_t block = ^{
    NSString *str = [NSString stringWithFormat:@"%@",[_tweet valueForKey:@"text"]];
    [[UIPasteboard generalPasteboard] setString:str];
  };
  [dicRow setValue:block forKey:kDicKeyLinkPopBlock];

  NSMutableArray *sections = [NSMutableArray arrayWithObject:arrRows];
  TOVLinkPopoverViewController *controller= [[TOVLinkPopoverViewController alloc] init];
  controller.arrayLink = sections;
} 
```

而从其他控制器，当我访问该块时，它只会在我发布版本时崩溃。我知道你需要复制块

```
[dicRow setValue:[block copy] forKey:kDicKeyLinkPopBlock]; 
```

对于像 NSMutableDictionary 这样的非块感知类。

问题是“为什么它只在发布版本时崩溃？” 我知道这个“应该崩溃”，这是使用块的错误方式，但希望它在 Debug 构建时崩溃，这样我们就可以更早地找到这种错误。

还有一个问题是“是否有任何构建设置使此代码在调试构建时崩溃？”

您可以从 gitHub 运行示例代码， [https://github.com/tomohisa/iOS_PopoverMenu_Notification](https://github.com/tomohisa/iOS_PopoverMenu_Notification)

See ViewController.m and find commented out code (only crash on release).

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T20:56:16.560

You're right that you need to add `[block copy]`. This is because that block is created in the current stack frame (i.e. within `clickedButtonA:event:`) but then you add it to a dictionary and presumably pull it out later. When you pull it out later and use it, that original stack frame has gone and you will have a pointer to some random memory that might not (most likely won't) actually be the block any more.

When you copy the block, if it's on the stack currently then it gets copied to the heap and if it's already on the heap then it just retains it. This means that you now have a block which can be passed around between contexts and will be valid.

The reason that you are only seeing it crash in release mode is because release mode will be turning on compiler optimisation that is completely changing how the stack is handled. Probably you were very lucky in debug mode not to see the problem and was simply a quirk of how your app is designed.

# zend-framework - 关于存储库的领域驱动设计问题

> ID：10263111
> 
> 赞同：2
> 
> 时间：2012-04-21T21:21:20.387
> 
> 标签：zend-framework, dependency-injection, singleton, domain-driven-design

我正在尝试实现 DDD，因此我创建了以下类
- User [域模型]
- UserRepository [管理对象的中央工厂]
- UserMapper + UserDbTable [映射应用程序功能并提供 CRUD 的映射器执行]

我的第一个问题是，当模型需要与持久层通信时，它应该联系存储库还是映射器？我个人认为它应该询问将联系映射器并提供所需功能的存储库。

现在我关心的第二个问题是同一个类的所有对象应该只有一个存储库，这意味着我将创建一个单例。但是如果我的应用程序有很多领域模型（比如说 20 个），那么就会有 20 个单例。而且感觉不对。另一种选择是使用 DI（依赖注入），但我使用的框架（Zend Framework 1.11）不支持 DIC。

我的第三个

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T02:17:48.613

> *   UserRepository [管理对象的中央工厂]

在 DDD 存储库中不是[工厂](http://domaindrivendesign.org/node/110)。存储库负责域对象的中间和结束生命周期。工厂负责开始。从概念上讲，持久化和恢复发生在域对象的中年。

> *   UserMapper + UserDbTable [映射应用程序功能并提供 CRUD 实现的映射器]

这些类不属于域层，这是数据访问。它们都将被存储库实现封装（或者如果您使用 ORM，则根本不存在）。

> 我的第一个问题是，当模型需要与持久层通信时，它应该联系存储库还是映射器？我个人认为它应该询问将联系映射器并提供所需功能的存储库。

模型不需要与持久层通信。实际上，您应该尝试使您的模型尽可能与持久性无关。从您的领域模型的角度来看，Repository 只是一个接口。这个接口的实现属于不同的层——数据访问。稍后在您的应用程序层中的某个位置注入该实现。应用层知道持久性和事务。这是您可以实现[工作单元](http://martinfowler.com/eaaCatalog/unitOfWork.html)模式（也不属于域层）的地方。

> 现在我关心的第二个问题是同一个类的所有对象应该只有一个存储库，这意味着我将创建一个单例。但是如果我的应用程序有很多领域模型（比如说 20 个），那么就会有 20 个单例。

首先，对于给定的域对象，您可以拥有[多个存储库。](https://stackoverflow.com/a/9303754/625332)无论如何，这在大多数情况下都会发生，因为您想避免存储库界面上的“方法爆炸”。其次，单例存储库是一个坏主意，因为它将所有消费者耦合到一个实现中，除其他外，这会使单元测试变得困难。第三，拥有 20 个或更多存储库并没有错，事实上，你拥有的课程越集中越好，请参阅[SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle)。

更新：

我认为您混淆了常规工厂模式和 DDD 工厂。在 DDD 术语中，当对象从数据库中恢复时，它在概念上已经存在（即使它是内存中的新对象）。因此，存储库的责任是持久化和恢复它。当复杂的域对象开始生命时，DDD 工厂开始发挥作用——无论它是否是一个长期存在的对象（保存在数据库中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T21:29:25.860

回答你的第二个问题。ZF1 方法是为每个对象类创建一个单例。您可以有一个工厂/注册表为您创建这些，并在您要求已创建的时返回先前创建的。或者，如果您使用的是 PHP 5.3，请使用 DI 容器，例如[Pimple](http://pimple.sensiolabs.org/)或[Zend\Di](http://packages.zendframework.com/#pyrus)。

# c# - 如何在嵌套元素上设置视觉状态？

> ID：10263112
> 
> 赞同：4
> 
> 时间：2012-04-21T21:21:39.483
> 
> 标签：c#, wpf, xaml, microsoft-metro

我正在尝试使用 VisualStateManager 为属性设置一个值。问题是我需要在嵌套元素（称为 variableSizedWrapGrid）上设置此值，但它不响应相应的状态。这个想法是当用户改变平板电脑的方向（横向到纵向）并且应该改变这个元素的方向。

```
<GroupStyle.Panel>
    <ItemsPanelTemplate>
        <VariableSizedWrapGrid x:Name="variableSizedWrapGrid" Orientation="Vertical" Background="Blue" Width="660" ItemHeight="120" ItemWidth="220" Margin="0,0,80,0">

            <VisualStateManager.VisualStateGroups>
                <VisualStateGroup>
                    <VisualState x:Name="FullScreenPortrait">
                        <Storyboard>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Orientation)">
                                <DiscreteObjectKeyFrame KeyTime="0" Value="Horizontal" />
                            </ObjectAnimationUsingKeyFrames>
                        </Storyboard>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>

        </VariableSizedWrapGrid>

    </ItemsPanelTemplate>
</GroupStyle.Panel> 
```

我正在为 Windows 8 开发一个 Windows Metro 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:14:05.443

我相信这就是 LayoutAwarePage 的用途。如果您有一个 LayoutAwarePage 作为基类，并且您希望控件在平板电脑旋转时切换 VisualStates，那么您将控件的 Loaded 事件挂钩到 LayoutAwarePage 上的 StartLayoutUpdates 方法。

如您所见，每当状态发生变化时，它都会运行“InvalidateVisualState”，它将遍历所有接收 LayoutUpdates 的控件，并手动将其 VisualStateManager 设置为适当的状态。

因此，在您拥有的代码中，您需要为景观设置一个 VisualState——我相信它会被称为 FullScreenLandscape，但我不记得了——然后将 StartLayoutUpdates 添加到 VariableSizedWrapGrid 控件的 Loaded 事件中。这是假设您的页面是 LayoutAwarePage。老实说，如果你想这样做，你应该这样做。出于这个原因，他们已经包含了所有样板代码。

希望有帮助。

# sql - 创建与外部 SQL Server 数据库的关系

> ID：10263119
> 
> 赞同：0
> 
> 时间：2012-04-21T21:22:25.283
> 
> 标签：sql, sql-server

我有一个公司表，其中包含与我的公司有业务往来的所有公司，并且它驻留在公司数据库中。

我想在该表和另一个完全不同的数据库（人事数据库）中的表（人事表）之间建立关系。

两个数据库都在同一台服务器上。

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T21:24:29.457

“尽管在这种情况下您不能使用外键，但有一些变通方法——您可以使用包含在检查约束中的触发器或 UDF。无论哪种方式，您的数据完整性都不是完全无懈可击的：如果您的父表所在的数据库崩溃并且您恢复它来自备份，您可能很容易以孤儿告终。”

[来自不同数据库的表上的外键](https://stackoverflow.com/questions/1424327/foreign-keys-on-table-from-different-database)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T22:12:14.363

要使用公共键选择数据，您可以创建一个包含三部分限定符的视图：database-schema-table。下面我假设每个人员条目都有一个将它们联系在一起的 CompanyID 字段，并且 dbo 是模式。如果这样的字段不存在，您将需要创建并填充一个：

`CREATE VIEW vCompanyPersonnel AS SELECT * FROM tblCompany t1 JOIN dbPersonnel.dbo.tblPersonnel t2 ON t1.ID = t2.CompanyID`

同样，为了对任一表进行更新并保持引用完整性，您将需要创建存储过程并且只允许应用程序使用这些过程更新数据（无论如何这是最佳实践）。您还应该确保personal 表中的CompanyID 字段不允许空值。需要考虑的一些过程：

*   添加人员：需要一个 CustomerID 输入参数并确保它存在于 Company 表中。如果没有，RAISERROR。
*   删除/停用客户：还删除/停用所有相关人员，最好将整个过程包含在交易中（全部或全部）。

# php - PHP PDO bindParam 返回 NULL

> ID：10263122
> 
> 赞同：1
> 
> 时间：2012-04-21T21:23:45.020
> 
> 标签：php, mysql, pdo

我对 PDO 绑定参数有疑问，设置的参数在数据库上执行时没有被推送到查询中。我通过让 MySQL 将查询记录到文件中来见证这一点。

如果我对服务器执行 - 我会在日志文件中看到这一点。

```
SELECT sg.locID, ( 3959 * acos( cos( radians(53.21333) ) * cos( radians( latitude ) ) * cos( radians( longitude ) - radians(-2.4354014) ) + sin( radians(53.21333) ) * sin( radians( latitude ) ) ) ) AS distance FROM location_geo sg HAVING distance < 1000 ORDER BY distance LIMIT 0 , 20 
```

从 PHP/PDO 中执行时

```
SELECT
  sg.locID,
  ( 3959 * acos( cos( radians(NULL) ) * cos( radians( latitude ) ) * cos( radians( longitude ) - radians(NULL) ) + sin( radians(NULL) ) * sin( radians( latitude ) ) ) ) AS distance
FROM
  location_geo sg
HAVING
  distance < 1000
ORDER BY distance LIMIT 0, 20 
```

这是PHP执行的代码

```
$lat = 53.21333;
$lng = -2.4354014;
$limit = 10;
$start = 0;

$query = "
    SELECT
      sg.locID,
      ( 3959 * acos( cos( radians(:latitude) ) * cos( radians( latitude ) ) * cos( radians( longitude ) - radians(:longitude) ) + sin( radians(:latitude) ) * sin( radians( latitude ) ) ) ) AS distance
    FROM
      location_geo sg
    HAVING
      distance < :radius
    ORDER BY distance LIMIT :start, :limit
";

$stm = Modules::db()->prepare($query);
$stm->bindValue(":radius", 1000, PDO::PARAM_INT);
$stm->bindParam(":latitude", $lat, PDO::PARAM_INT);
$stm->bindParam(":longitude", $lng, PDO::PARAM_INT);
$stm->bindParam(":start", $start, PDO::PARAM_INT);
$stm->bindParam(":limit", $limit, PDO::PARAM_INT);
$stm->execute(); 
```

这是我的桌子

```
CREATE TABLE `location_geo` (
  `locID` int(11) unsigned NOT NULL,
  `latitude` double DEFAULT NULL,
  `longitude` double DEFAULT NULL,
  PRIMARY KEY (`locID`)
) 
```

虚拟数据 -

```
INSERT INTO `location_geo` (`locID`, `latitude`, `longitude`)
VALUES
    (1, 53.21333, -2.4354014),
    (2, 53.213435, -2.4345214); 
```

我尝试替换 bindParams 并将数据放入执行调用中的数组中，但结果是相同的。

如果您错过了它，纬度和经度的值将保持为空。PDO 没有错误。

奇怪的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T21:32:37.840

好的，我以前从未使用过原始 PDO，但我认为错误在这里：

```
$stm->bindParam(":latitude", $lat, PDO::PARAM_INT);
$stm->bindParam(":longitude", $lng, PDO::PARAM_INT); 
```

如果你传递一个 FLOAT，你为什么说它是一个 INT（我想这`PDO::PARAM_INT`说明正在传递什么类型的值）？可能这就是它被转换为 NULL 的原因，因为浮点值不是整数......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T21:36:49.700

出于调试目的，我使用 setAttribute()。像这样的例子：

```
setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING); 
```

这样，它会告诉您是否犯了任何错误以及它们是什么。

# c# - 将纵向子元素添加到横向页面

> ID：10263127
> 
> 赞同：0
> 
> 时间：2012-04-21T21:24:24.177
> 
> 标签：c#, silverlight, windows-phone-7, xaml, landscape-portrait

我正在 Silverlight 中开发一个 WP7 应用程序。我几乎完成了，但我需要在纵向视图中插入新的用户控件作为横向根页面的子元素。每个子元素（不包括这个）都处于横向模式，无法更改。

当我在 RootPage 中将 SupportedOrientation 更改为 PortrailorLandscape 并将模拟器中的方向切换为纵向时，横向中的每个子元素都会被剪切。

这就是我所做的：

页面根代码：

```
<phone:PhoneApplicationPage 
    x:Class="app.Root"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Landscape" Orientation="LandscapeLeft"
    mc:Ignorable="d" d:DesignHeight="480" d:DesignWidth="800" shell:SystemTray.IsVisible="False">
    <Grid  Width="800" Height="480" Loaded="RootGrid_Loaded">
        <Popup x:Name="myPopup">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="480"/>
                </Grid.RowDefinitions>
                <Border x:Name="popupBorder"/>
            </Grid>
        </Popup>
        <Canvas x:Name="ScreenRoot"
                      Visibility="Visible"
                      Width="800" Height="480">
<Canvas.Children/>
        </Canvas>
    </Grid>
</phone:PhoneApplicationPage> 
```

然后将用户控件作为 ScreenRoot 的子项：

```
<UserControl 
    x:Class="app.Settings"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    FontFamily="{StaticResource OCRAExt}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="WhiteSmoke" 
    mc:Ignorable="d" d:DesignHeight="800" d:DesignWidth="480"
    shell:SystemTray.IsVisible="False">
<Grid x:Name="SettingsRoot" Background="Black" Width="480" Height="800">
...
...
</Grid>
</UserControl> 
```

用户控件在状态机中侦听他的状态，然后将自己作为 Child 添加到 RootPage 的 Canvas 中。

请帮我：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T15:58:36.310

我不确定您真正想要做什么，但是您可以尝试将 RenderTransform 应用于您的 UserControl，以使其保持纵向模式。

[http://msdn.microsoft.com/en-us/library/ms754009.aspx](http://msdn.microsoft.com/en-us/library/ms754009.aspx)

# php - 使用 Google Analytics API 的 OAuth 报告无效令牌

> ID：10263132
> 
> 赞同：2
> 
> 时间：2012-04-21T21:24:39.607
> 
> 标签：php, oauth-2.0, google-analytics-api

以下代码运行良好，但有时会报告“无效令牌”。当我的 ID 列表中有外国网站时，就会发生这种情况。但是当我使用电子邮件/密码对登录时，它一直运行良好。知道有什么问题吗？

干杯：

## 鲍勃

```
<?php  
/*  
API ACCESS PANEL:  
https://code.google.com/apis/console/  
*/  
session_start();  #the includes are as follows, using also gapi.class.php  
require_once 'src/apiClient.php';  
require_once 'src/contrib/apiAnalyticsService.php';  
ini_set('display_errors', '1');  
$client = new apiClient();  
$client->setApplicationName("Google Analytics PHP Starter Application");  
/*  
Visit https://code.google.com/apis/console?api=analytics to generate your client id, client secret, and to register your redirect uri.  
*/  
$client->setClientId('');# MUST SET UP!  
$client->setClientSecret('');# MUST SET UP!  
$client->setRedirectUri('http://localhost/analytics/chart_server.php');# MUST SET UP!  
$client->setDeveloperKey('');# MUST SET UP!  

 // requestReportData first parameter, an Analytics Profil ID must defined here:  
$ga_profile_id='';# MUST SET UP!  
//////////////////////////////////////////////////////////////////////////////  

$service = new apiAnalyticsService($client);  

// logout  
if (isset($_GET['logout'])) {  
    unset($_SESSION['token']);  
    exit;  
}  

// get the tooken from Google, store into the session, call back this script with header-location  
if (isset($_GET['code'])) {  
    $client->authenticate();  
    $_SESSION['token'] = $client->getAccessToken();  
    header('Location: http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF']);  
    exit;  
}  

// if we got token in the session-ben, passing to $client (this is the OAuth client)  
if (isset($_SESSION['token'])) {  
    $client->setAccessToken($_SESSION['token']);  
}  

// if the token valid, then we have access:  
if ($client->getAccessToken()){  
    #$props = $service->management_webproperties->listManagementWebproperties("~all");  
    /*  
    print "Web Properties " . print_r($props, true);  
    */  
    print("auth OK");//ok  
    print_r($client->getAccessToken()); // print out for test  
    $_SESSION['token'] = $client->getAccessToken();// stor eback to the session  
} else { // Authorize with OAuth cause we have no valid access token  
    #https://www.google.com/analytics/feeds/  
    #https://www.googleapis.com/auth/analytics.readonly  
    $scope="https://www.google.com/analytics/feeds/"; // we'd like to access this  
    $authUrl = $client->createAuthUrl($scope);  
    header("Location: ".$authUrl); /* Redirect browser */  
    #  print "<a class='login' href='$authUrl'>Connect Me!</a>";  
    exit;  
}  

// test printout, OAuth account object:  
$accounts = $service->management_accounts->listManagementAccounts();  
print "List of accounts" . print_r($accounts, true) .;  

//////////////////////////////////////////////////////////////////////////////////////////////  
// Here is the Google Analytics API call, and the "TOKEN INVALID 401" error message         //  
//////////////////////////////////////////////////////////////////////////////////////////////  

require 'gapi.class.php';  
$ga = new gapi(null,null,$_SESSION['token']); // access token instead of mail, password pair  
#$token=$ga->getAuthToken();# $_SESSION['token']  

// http://code.google.com/p/gapi-google-analytics-php-interface/wiki/GAPIDocumentation  
// requestReportData($report_id, $dimensions, $metrics, $sort_metric=null, $filter=null, $start_date=null, $end_date=null, $start_index=1, $max_results=30)  
$dimensions=array('browser','date');// x coord  
$metrics=array('visits','pageLoadTime','uniquePageviews'); // y coord  
$sort_metric="-date"; #descending order  
$filter = '';  
$startDate = '2012-04-01';  
$endDate = '2012-04-12';  
$start_index=1;  
$max_results=50;  

#$ga->requestReportData($accProfiles[$profileNum]->getProfileId(),$dimensions,$metrics,$sort_metric,$filter, $start_date, $end_date, $start_index, $max_results );  
$ga->requestReportData($ga_profile_id, $dimensions, $metrics, $sort_metric, $filter, $startDate, $endDate, $start_index, $max_results );  

$results=$ga->getResults();  
// test:  
echo "Google Analytics data ";print_r($results);  
#echo "#####".$ga->getMetrics();  

// Set the JSON header  
//header("Content-type: text/json");  
#echo json_encode( array($dim, $met1, $met2, $met3 ) );  

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:21:40.917

只需忘记 gapi.class.php。它很慢，并且仅适用于 USR/PSW。apiAnalyticsService 也很慢，但可以很好地处理令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T14:59:29.033

尝试从这里更改您的范围：

```
$scope="https://www.google.com/analytics/feeds/"; 
```

对此：

```
$scope="https://www.googleapis.com/auth/analytics.readonly"; 
```

# android - 使布局宽度等于高度？

> ID：10263134
> 
> 赞同：10
> 
> 时间：2012-04-21T21:24:47.960
> 
> 标签：android

我想要一个宽度=fill_parent 的 ImageView，高度应该是宽度。我不确定是否有办法在 xml 中指定它，是创建我自己的 ImageView 派生类的唯一选择吗？：

```
public class MyImageView extends ImageView {

    // Just return whatever the current width is?
    private int measureHeight(int measureSpec) {
        return getWidth();
    }
} 
```

这是要走的路，还有其他选择吗？（我不确定上述是否正确，例如不确定宽度测量是否发生在高度测量之前）

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-21T21:45:30.303

您可以使用方法获取宽度

```
imageView.getMeasuredWidth(); 
```

所以，你可以设置它的高度

```
imageView.setLayoutParams(new LayoutParams(imageView.getMeasuredWidth(), imageView.getMeasuredWidth())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-30T14:59:04.383

## 使布局高度等于宽度：

digulino[的答案](https://stackoverflow.com/a/10263269/1533054)（至少在我的情况下）的问题是，如果您想在开始时更改尺寸，`getMeasuredWidth()`将返回`0`，因为尚未绘制视图。

你仍然可以通过使用这样的`Runnable()`线程来做到这一点：

```
FrameLayout frame = (FrameLayout)findViewById(R.id.myFrame);
frame.post(new Runnable() {
    @Override
    public void run() {
        RelativeLayout.LayoutParams lparams;
        lparams = (RelativeLayout.LayoutParams) frame.getLayoutParams();
        lparams.height = frame.getWidth();
        frame.setLayoutParams(lparams);
        frame.postInvalidate();
    }
}); 
```

***重要提示：*** *此示例假设您的视图是一个`FrameLayout`内部的`RelativeLayout`. 为其他布局相应地更改它。*

# jquery - jQuery 生成手风琴菜单的 JQuery 绑定问题

> ID：10263138
> 
> 赞同：0
> 
> 时间：2012-04-21T21:25:22.910
> 
> 标签：jquery, ajax, dom, bind, accordion

我使用脚本创建手风琴菜单，它可以很好地与 html 中的菜单配合使用，如[test1所示](http://www.ab-mobile-apps.com/app/hapman/test1/index.html#build)

我在另一个目录中使用相同的手风琴脚本，该脚本调用 jquery ajax 调用以从数据库中检索列表信息。 [测试2](http://www.ab-mobile-apps.com/app/hapman/test2/index.html#build)

问题是在 test2 中填充了列表，但手风琴脚本没有打开菜单。就好像子列表甚至不存在一样。从源代码查看时，子列表在代码中具有隐藏元素，但手风琴永远不会打开并显示可见。

由于某种原因，该函数未绑定到从 jQuery 脚本生成的菜单。

在 test2 中，脚本是 call > body onload="loadData();"。在 test1 中没有调用 is。

可以在两个链接上查看差异。

任何建议和帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T21:33:50.677

我可以看到您的 DOM 结构中的一些差异：工作菜单在 li 元素上有一些类（class="ui-link active" ），而损坏的菜单没有。也许这就是问题所在。看到您将类添加到第二个示例。

# web-services - 从 .NET 客户端调用 Web 服务时出现 HTTP/1.1 500 内部服务器错误

> ID：10263156
> 
> 赞同：1
> 
> 时间：2012-04-21T21:29:07.467
> 
> 标签：web-services, c#-4.0, web-reference

我正在尝试连接到 https 网络服务（据我所知不是 .NET）。我无法以任何方式控制对方，我只是得到了一些标准和一个 wsdl 来操作它。

我首先使用添加服务引用创建了客户端，尝试了一些事情，直到解决了一些问题，其中最严重的是我无法将身份验证标头添加到导致失败的消息中。

使用旧的 Add Web Reference 添加了服务，似乎更容易管理和适当，使用部分类并覆盖 GetWebRequest，我添加了此代码，以便我可以对服务进行预身份验证并添加安全标头，他们在wsdl 链接。我知道服务不是必须告诉这一点的，但我的 Web 服务创建者伙伴开发人员会很好。

```
protected override WebRequest GetWebRequest(Uri uri)
{
    HttpWebRequest request = (HttpWebRequest)base.GetWebRequest(uri);

    if (PreAuthenticate)
    {
        NetworkCredential networkCredentials = Credentials.GetCredential(uri, "Basic");
        if (networkCredentials != null)
        {
            byte[] credentialBuffer = new UTF8Encoding()
                .GetBytes(networkCredentials.UserName + ":" + networkCredentials.Password);

            request.Headers["Authorization"] = "Basic" + Convert.ToBase64String(credentialBuffer);
        }
        else
        {
            throw new ApplicationException("No network credentials");
        }
    }

    return request;
} 
```

要调用该服务，我添加了以下代码：

```
using (Service client = new Service()) // autogenerated Service class
        {
        client.EnableDecompression = true;

        // Create the network credentials and assign
        // them to the service credentials
        NetworkCredential netCredential = new                             NetworkCredential("test1", "test1");
        Uri uri = new Uri(client.Url);

        ICredentials credentials = netCredential.GetCredential(uri, "Basic");
        client.Credentials = credentials;

        // Be sure to set PreAuthenticate to true or else
        // authentication will not be sent.
        client.PreAuthenticate = true;

        // Make the web service call.

        Request req = new Request { UserName = "test2", Password = "test2"; // an object created from autogenerated code

        RequestResult result = client.processMessage(req); // autogenerated code

    } 
```

在测试此呼叫并与提琴手一起检查我的请求时。我看到 2 个调用带有这些标头的保持活动调用，没什么特别的。

```
CONNECT server:443 HTTP/1.1
Host: server
Connection: Keep-Alive 
```

发送 570 返回 200 结果。

```
HTTP/1.1 200 Connection Established
FiddlerGateway: Direct
StartTime: 00:05:13.743
Connection: close 
```

并且调用数据发送 571 结果 500 错误：

```
POST /host/Service HTTP/1.1
User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; MS Web Services Client Protocol 2.0.50727.5448)
Authorization: BasicdXNlcOTc3MzQyMGTDFTR4dftfrdg5 // changed this hash for security reasons
VsDebuggerCausalityData: // Removed this hash for security reasons
Content-Type: text/xml; charset=utf-8
SOAPAction: ""
Host: server-host-url
Content-Length: 7238
Expect: 100-continue
Accept-Encoding: gzip
Connection: Keep-Alive 
```

.NET 客户端中的错误异常：

```
Error on verifying message against security policy Error code:1000 
```

如您所见，授权标头存在。我还尝试在 Basic 之后添加一个空格，您可以在上面看到覆盖方法的确切位置，并且似乎提琴手更好地识别它并且还解码了 username:password 标头。

这导致该响应：

```
HTTP/1.1 500 Internal Server Error
Date: Sat, 21 Apr 2012 21:05:22 GMT
Server: Oracle-Application-Server-11g
X-Powered-By: Servlet/2.5 JSP/2.1
X-Cnection: close
Transfer-Encoding: chunked
Content-Type: text/xml;charset="utf-8"
Content-Language: en
X-Pad: avoid browser bug
Set-Cookie: BIGipServerpoolXoas243_254_9999=437682499.99988.0000; path=/ 
```

我首先想知道的奇怪的事情是，如果第一个呼叫应该预先认证，握手保持活动状态？我知道这个 500 错误是在身份验证标头不存在时导致的，但我的却是。Preauthentication 是我需要知道它应该如何发生的事情，我想如果它应该出现在第一条消息中它就不起作用。

另一个奇怪的事情是，如果我更改相反的 2 对密码，我在提琴手上看到我收到 3 条消息，其中 1 条是握手，结果是 200 条，另外“两条”需要 401 授权。

这让我发疯。任何帮助都可以拯救我的灵魂。

谢谢！

# django - django Piston：如何在处理程序中定义自定义方法？

> ID：10263165
> 
> 赞同：2
> 
> 时间：2012-04-21T21:29:55.343
> 
> 标签：django, django-piston

我创建了一个 handler.py 并想编写一个方法：getBooksForUser()。此方法将返回用户发行的所有书籍。文档说：

> 除了这些，您还可以定义您想要的任何其他方法。您可以通过将它们的名称包含在 fields 指令中来使用它们，并且这样做，将使用单个参数调用该函数：模型的实例。然后它可以返回任何东西，并且返回值将用作该键的值。

在字段中，我已经写了我想要返回的书籍的属性。我应该只在此处包含方法名称（getBooksForUser）吗？

如果可能的话，请给我一个代码示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:58:14.003

我知道这不能回答有关自定义方法的问题，但可能有助于解决您的问题。

网址：

```
(r'^books\.json$', Resource(BookHandler)),
(r'^books/(?P<user_id>[0-9]+)\.json$', Resource(BookHandler)), 
```

处理程序：

```
 from piston.handler import BaseHandler
   from myapp.models import Book

   class BookHandler(BaseHandler):
      allowed_methods = ('GET',)
      model = Book   

      def read(self, request, user_id=None):
          base = Book.objects
          if user_id:
              return base.filter(user_id=user_id)
          return base.all() 
```

我从[这里](https://bitbucket.org/jespern/django-piston/wiki/Documentation#!resources)的文档中得到了例子：

# ios - 具有多个 Nib 的 ViewController 和子类 ViewController

> ID：10263170
> 
> 赞同：0
> 
> 时间：2012-04-21T21:30:57.013
> 
> 标签：ios, uiviewcontroller, nib

是否可以让 ViewController 使用一个笔尖，而我的 ViewController 的子类指向另一个？

我正在尝试做的事情：

我有一个应用程序，它有一个主菜单，可以带你到任何部分。在您所在的版块中，您可以下拉不同的子版块菜单，将您带到不同的页面。

我希望所有子部分菜单的内容都由每个子部分页面将继承的基本 ViewController 类处理。这样我只需要编写代码来处理在基类中显示子部分菜单，所有子部分页面都会自动拥有它。

虽然我不知道是否可以用一个 nib 实例化一个 ViewController，并告诉它的基类连接到另一个。

任何帮助或提示表示赞赏:)

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T23:13:24.943

在 iPhone 世界中，UIViewController 或 UIViewController 子类通常负责控制整个视图层次结构。这显然在 iPad 世界中使用 UISplitViewController 之类的控制器崩溃了。

因此，我将根据您上面给出的描述对您的应用程序设置做出一些假设：您可能会考虑拥有一个 MainMenuViewController。当然，如果您需要，这可以从某些 BaseViewController 继承，但 MainMenuViewController 的 nib 将允许您导航到各个部分。也许这个笔尖只包含一堆 UIButton。您点击一个按钮，然后将您带到与该部分对应的 UIViewController 子类。例如，如果该部分是 Sports Teams，那么 View Controller 的 nib 可能只包含一个列出本地运动队的 UITableView。这个 View Controller 可以有一种方式来访问这个子部分菜单，它可能会列出特定运动队的详细信息。这个“细节”

如果从一个子菜单到另一个子菜单的视图层次结构相同，则可以重用视图控制器并仅更新其视图层次结构的内容。如果视图层次结构从子菜单到子菜单截然不同，您可能需要考虑使用不同的 UIViewController 子类来管理每个子部分的视图层次结构。

# php - 调整 png/jpeg 图像的大小

> ID：10263171
> 
> 赞同：3
> 
> 时间：2012-04-21T21:31:03.223
> 
> 标签：php

```
<?php

header('Content-type:image/gif');
header('Content-Disposition: attachment; filename="animated.gif"');

require_once('GIFEncoder.class.php');

$image = imagecreatefrompng('source01.png');

$width = 50;
$height = 50;
$new_image = imagecreatetruecolor($width, $height);
imagecopyresampled($new_image, $image, 0, 0, 0, 0, $width, $height, 200, 115); 

$text_color = imagecolorallocate($image, 50, 50, 50);
imagestring($image, 5, 5, 5,  '', $text_color);

/* $imageMagick = new Imagick($image);
$imageMagick->adaptiveResizeImage(50,50); */

ob_start();
imagegif($image);
$frames[]=ob_get_contents();
$framed[]=40; 
ob_end_clean();

$gif = new GIFEncoder($frames,$framed,0,2,0,0,0,'bin');
echo $gif->GetAnimation();

//$fp = fopen('animegif.gif', 'w');
//fwrite($fp, $gif->GetAnimation());
//fclose($fp);

?> 
```

有没有办法通过代码将 .png 图像的大小调整为静态 50x50px 值？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T21:34:15.147

我会使用[imagecopyresampled](http://php.net/manual/en/function.imagecopyresampled.php)

它可以这样使用：

```
$width = 50;
$height = 50;
$new_image = imagecreatetruecolor($width, $height);
imagecopyresampled($new_image, $image, 0, 0, 0, 0, $width, $height, $image.getWidth)=(), $image.getHeight()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T21:35:16.810

您可以为此使用 imagemagic

[http://www.php.net/manual/en/imagick.resizeimage.php](http://www.php.net/manual/en/imagick.resizeimage.php)

[http://www.php.net/manual/en/imagick.adaptiveresizeimage.php](http://www.php.net/manual/en/imagick.adaptiveresizeimage.php)

# ios - 是否可以使用 Phonegap 在 iOS 上实现视频自动播放？

> ID：10263172
> 
> 赞同：0
> 
> 时间：2012-04-21T21:31:08.823
> 
> 标签：ios, cordova, html5-video, html5-audio

我通知 iOS 阻止所有视频自动播放，包括 html5 视频自动播放属性以及任何类型的 javascript 启动的自动播放。

但是，我想知道如果我用 Phonegap 包装我的网络应用程序是否有可能克服这个限制。我希望由于 Phonegap 可以访问一些本机功能，它可能能够触发点击或播放事件。有没有人能够做到这一点？

我已经[在 PhoneGap 中阅读了这个问题 Autoplay video，](https://stackoverflow.com/questions/9078098/autoplay-video-in-phonegap)其中有人说您可以通过 javascript 调用来做到这一点，但我很难相信这一点，因为人们说这是不可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-19T08:04:21.763

我发现 mediaelement.js 在 phonegap 中运行良好，我发现使自动播放工作的技巧是在 mejs 成功回调中设置一个小的超时，以便播放器仅在播放器完全设置后调用。

当然，您还需要在 video 标签中添加 webkit-playsinline，在 phonegap config.xml 中添加 MediaPlaybackRequiresUserAction = false 和 AllowInlineMediPlayback = true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T09:14:47.810

苹果已经阻止了它，我找不到解决方法。你几乎必须使用这样的东西来达到你所追求的效果：[https ://github.com/eiffelqiu/phonegap-videoplayer-plugin](https://github.com/eiffelqiu/phonegap-videoplayer-plugin)

# objective-c - 表格视图单元格 Segues 不起作用

> ID：10263173
> 
> 赞同：9
> 
> 时间：2012-04-21T21:31:21.520
> 
> 标签：objective-c, xcode, uitableview

我正在尝试做一些非常简单的事情：设置一个segue，以便当您单击表格中的一个单元格时，它会将您带到另一个视图控制器。我认为，问题源于这些单元格所在的 TableView 嵌入在常规 ViewController（而不是 TableViewController）中，并且是此 ViewController 中的两个子视图之一。

据我所知，我已经正确设置了所有内容：我在导航控制器中嵌入了带有两个子视图的 ViewController，将其设置为 TableView 的数据源和委托，并创建了一个从 TableViewCell 到我的推送序列故事板中的第二个视图控制器。但是，当应用程序运行并且用户单击表中的一行时，它只是选择了该行并且 segue 根本不会触发（我已经对其进行了调试，甚至没有调用 prepareForSegue 函数）。

我在这里缺少什么吗？或者如果 TableView 不是其视图控制器中的唯一视图，由于某种原因这是不可能的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-22T05:35:26.170

我发现如果我最近从单元格的附件视图中连接了 segue，然后删除了 segue 并尝试直接将新的 segue 连接到单元格，它不起作用*（*使用 Xcode 4.6.2）——Xcode 继续连接 segue到附件视图（即使没有）！我修复它的方法是通过选择 IB 中的单元格并使用连接检查器来 (1) 删除原始的“附件操作”segue 和 (2) 通过从下图中的实心圆圈中拖动来直接连接“选择”segue到适当的目标视图控制器。

![在此处输入图像描述](../Images/d4cd57b896c1ed212517fbbe49a78c8a.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T20:06:00.113

如果您自定义了单元格渲染，例如：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

然后确保您使用的单元标识符与为 ste 故事中的原型单元指定的单元标识符相同。

因此，在这种情况下，连接 segue 的单元格的“标识符”应设置为“**单元格**”。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-17T00:29:02.887

这可能对您有帮助，也可能无济于事，但我遇到了这个问题，因为我定义了两种不同的单元格类型，并提供了`didSelectRowAtIndexPath`实现。我不得不添加`[self performSegueWithIdentifier:@"Whatever" sender:self]`其中的一部分，`didSelectRowAtIndexPath`问题得到了解决。

如果您至少能够检测到行选择，则可以利用此方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-21T21:50:13.727

如果您在 Xcode 中创建 StoryBoard，请执行以下操作：

1.  创建一个 UITableViewController
2.  添加原型 UITableViewCell
3.  创建将成为您的 segue 目标的 UIViewController。
4.  Control-单击原型 UITableViewCell 并拖动到 segue 目标。

而已。例如，您可能希望将 UITableViewCell 的特征编辑为您的 UITableViewCell 的子类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-01T17:24:33.643

我有类似的问题。修复是 1\. 为 Storyboard 中的 segue 编写 SegueIdentifier 2\. 添加以下行 [self performSegueWithIdentifier:@"SegueIdentifier" sender:nil]; 在 didSelectRowAtIndexPath 中。

我希望这会有所帮助。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-04-07T09:18:36.787

Had the same problem. Segue from a prototype table view cell inside a regular View Controller would make the app crash. In case someone have the same problem.

My solution:

If you are using a push segue make sure your first View Controller with the table view is embedded in a Navigation Controller otherwise "push segues" wont work. Also point the segue at the destination View Controller, not its Navigation Controller!

And as mentioned earlier, make sure your "segue identifiers" are correct.

at "didSelectRowAtIndexPath" I call "[self performSegueWithIdentifier:@"Your_destination_View_Controller" sender:self];

# hibernate - 运行 mysql 时无法获得 JPA

> ID：10263175
> 
> 赞同：0
> 
> 时间：2012-04-21T21:31:31.460
> 
> 标签：hibernate, tomcat, jpa, maven, jsf-2

我正在尝试使用 CDI-weld、JSF 2-mojarra、RichFaces 4、JPA-hibernate、Bean-Validation-hibernate、maven 2、Tomcat 7 和 Eclipse Juno 设置项目。

我认为感受最新东西的协同作用会很有趣（除了maven，懒得进入maven 3）

除了拼图中的最后一块，我让一切都像魅力一样工作，添加了 JPA。有很多关于如何设置的信息，经过一段时间的尝试，我感到非常困惑。我基本上把它缩小到这个范围：

（来自这篇文章：[如果我在 Hibernate 中使用 JPA，我的项目应该有哪些依赖项？](https://stackoverflow.com/questions/3814761/what-dependencies-my-project-should-have-if-im-using-jpa-in-hibernate)）

您需要： slf4j-jdk14 和 hibernate-entitymanager 作为工件，仅此而已？我尝试了一堆不同的设置，但没有任何效果。它只是不会生成表格。

（现在我正在尝试使用这些工件，我想我以后会担心版本）

```
 <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>3.5.1-Final</version>
    </dependency>

    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-jdk14</artifactId>
        <!-- version 1.5.8 is the latest version that will work with the slf4j-api 
            that's currently bundled with hibernate-parent -->
        <version>1.5.8</version>
    </dependency> 
```

**persistance.xml**位于：src - main - wewbapp - WEB-INF - 类 - META-INF - persistance.xml。

尝试了一堆没有运气的地方。

内容如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://svn.apache.org/repos/asf/geronimo/components/geronimo-schema-javaee_6/trunk/src/main/xsd/persistence_2_0.xsd"
    version="2.0">
    <persistence-unit name="pu">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <class>com.test.User</class>
        <properties>
            <!-- Auto detect annotation model classes -->
            <property name="hibernate.archive.autodetection" value="class" />
            <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect" />
            <property name="hibernate.hbm2ddl.auto" value="update" />
            <property name="hibernate.show_sql" value="false" />
            <property name="hibernate.format_sql" value="true" />
            <property name="hibernate.connection.username" value="root" />
            <property name="hibernate.connection.password" value="1111" />
            <property name="hibernate.connection.url" value="jdbc:mysql://localhost/woot" />
        </properties>

    </persistence-unit>
</persistence> 
```

借用测试类：

```
/**
 * User account that is required for logging in and posting bookmarks.
 * 
 * @author Andy Gibson
 *
 */
@Entity
@Table(name = "USERS")
public class User {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    @Column(length = 24)
    private String username;

    @Column(length = 24,name="userPassword")
    private String password;

    @Column(length = 24)
    private String firstName;

    @Column(length = 24)
    private String lastName;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

} 
```

Tomcat日志：

```
apr 21, 2012 10:58:54 EM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: E:\Programming\Setup\Glassfish\jdk7\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;E:\Programming\Setup\Glassfish\jdk7\jre\bin;C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\Program Files (x86)\AMD APP\bin\x86_64;C:\Program Files (x86)\AMD APP\bin\x86;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\ATI Technologies\ATI.ACE\Core-Static;C:\Program Files (x86)\Windows Live\Shared;C:\Program Files\Microsoft Windows Performance Toolkit\;E:\Programming\Setup\Glassfish\jdk7\bin;C:\Program Files (x86)\Groovy\Groovy-1.8.0\bin;C:\Program Files (x86)\Calibre2\;E:\Programming\Setup\apache-maven-2.2.1\bin;E:\Program\SVN\bin;E:\Programming\grails-2.0.0\\bin;.
apr 21, 2012 10:58:54 EM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.j2ee.server:woot' did not find a matching property.
apr 21, 2012 10:58:54 EM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
apr 21, 2012 10:58:54 EM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
apr 21, 2012 10:58:54 EM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 900 ms
apr 21, 2012 10:58:54 EM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
apr 21, 2012 10:58:54 EM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.22
apr 21, 2012 10:58:55 EM org.apache.catalina.core.StandardContext addApplicationListener
INFO: The listener "com.sun.faces.config.ConfigureListener" is already configured for this context. The duplicate definition has been ignored.
apr 21, 2012 10:58:55 EM org.jboss.weld.bootstrap.WeldBootstrap <clinit>
INFO: WELD-000900 1.1.5 (Final)
apr 21, 2012 10:58:55 EM org.jboss.weld.bootstrap.WeldBootstrap startContainer
INFO: WELD-000101 Transactional services not available. Injection of @Inject UserTransaction not available. Transactional observers will be invoked synchronously.
apr 21, 2012 10:58:56 EM org.jboss.weld.environment.tomcat7.Tomcat7Container initialize
INFO: Tomcat 7 detected, CDI injection will be available in Servlets and Filters. Injection into Listeners is not supported
apr 21, 2012 10:58:56 EM org.jboss.interceptor.util.InterceptionTypeRegistry <clinit>
WARNING: Class 'javax.ejb.PostActivate' not found, interception based on it is not enabled
apr 21, 2012 10:58:56 EM org.jboss.interceptor.util.InterceptionTypeRegistry <clinit>
WARNING: Class 'javax.ejb.PrePassivate' not found, interception based on it is not enabled
apr 21, 2012 10:58:56 EM com.sun.faces.config.ConfigureListener contextInitialized
INFO: Initializing Mojarra 2.1.7 (SNAPSHOT 20120206) for context '/rdwebref'
apr 21, 2012 10:58:58 EM com.sun.faces.spi.InjectionProviderFactory createInstance
INFO: JSF1048: PostConstruct/PreDestroy annotations present.  ManagedBeans methods marked with these annotations will have said annotations processed.
apr 21, 2012 10:58:59 EM org.hibernate.validator.util.Version <clinit>
INFO: Hibernate Validator 4.0.2.GA
apr 21, 2012 10:58:59 EM org.hibernate.validator.engine.resolver.DefaultTraversableResolver detectJPA
INFO: Instantiated an instance of org.hibernate.validator.engine.resolver.JPATraversableResolver.
apr 21, 2012 10:59:00 EM org.hibernate.validator.engine.resolver.DefaultTraversableResolver detectJPA
INFO: Instantiated an instance of org.hibernate.validator.engine.resolver.JPATraversableResolver.
apr 21, 2012 10:59:00 EM org.richfaces.cache.CacheManager getCacheFactory
INFO: Selected fallback cache factory
apr 21, 2012 10:59:00 EM org.richfaces.cache.lru.LRUMapCacheFactory createCache
INFO: Creating LRUMap cache instance using parameters: {javax.servlet.jsp.jstl.fmt.localizationContext=resources.application, javax.faces.STATE_SAVING_METHOD=client, javax.faces.DEFAULT_SUFFIX=.xhtml}
apr 21, 2012 10:59:00 EM org.richfaces.cache.lru.LRUMapCacheFactory createCache
INFO: Creating LRUMap cache instance of 512 items capacity
apr 21, 2012 10:59:00 EM org.richfaces.application.InitializationListener onStart
INFO: RichFaces Core Implementation by JBoss by Red Hat, version v.4.2.0.Final
apr 21, 2012 10:59:00 EM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
apr 21, 2012 10:59:00 EM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
apr 21, 2012 10:59:00 EM org.apache.catalina.startup.Catalina start
INFO: Server startup in 6130 ms 
```

我确实创建了名为“woot”的数据库，并且密码和用户名是正确的。我之前已经让 mysql 与 Grails 2 一起工作。

希望有人可以在这里帮助我！干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T21:56:21.893

基本上，有两种使用 JPA 的方法：

*   在 EJB3 Container 中，例如 Apache Geronimo、JBoss AS、Glassfish 等。Tomcat 只是一个 Web Container，因此该选项不可用。

在这种模式下使用有两个优点：

一个。如果使用 Session Beans，Entity Manager 可以由 EJB 框架注入，无需 Weld；

湾。事务控制由 EJB 容器 (JTA) 自动完成。

*   所谓的“资源本地”模式。在这种模式下，您必须自己创建 EntityManagerFactory，并处理所有资源，包括：
    *   实体管理器
    *   交易

如果您不处理 EJB 容器，这是使用 JPA 的最常见方式。为了避免样板代码并使事情变得更容易，建议使用注入管理器。Spring、Guice、Pico 是不错的选择，但 Weld 也不错，而且稍微好一点，因为它实现了 Java 的注入标准 CDI。

我最好的选择是查找有关如何使用 Weld 在 Tomcat 应用程序中注入 EntityManager 的更多信息。我找到了这个链接，并对此进行了长时间的讨论：

[https://community.jboss.org/thread/179355](https://community.jboss.org/thread/179355)

简而言之：使用Seam 3。

祝你好运

# c# - 有人可以解释这个 System.ArgumentException 错误是什么意思吗？

> ID：10263177
> 
> 赞同：1
> 
> 时间：2012-04-21T21:31:52.630
> 
> 标签：c#, database, razor, webmatrix

我有这个代码：

```
//check if the user have any previous medical record.
var firstMedical = false;
    var sql="SELECT * FROM Medical WHERE CDSID = @0";
    var myMedical = db.QuerySingle(sql1, myCDSID);
    if (myMedical ==null){

                //if all the medical data is filled in, run sql1 to store all the answer into a database.
                var sql10 = "INSERT INTO Medical (Q1, Q2, Q3, Q4, Q5, Q6, Q7, Q8, Q9, Q10, Q11, Q12, Q13, Q14, Q15, Q16, Q17, Q18, Q19, Q20, Alcohol, Medication, Details, CDSID) VALUES (@0, @1, @2, @3, @4, @5, @6, @7, @8, @9, @10, @11, @12, @13, @14, @15, @16, @17, @18, @19, @20, @21, @22, @23)";
                var medquestionnaire = new{q1, q2, q3, q4, q5, q6, q7, q8, q9, q10, q11, q12, q13, q14, q15, q16, q17, q18, q19, q20, alcohol, medication, details, myCDSID};
                db.Execute(sql10, medquestionnaire);

    } else {

                var sql2 = "UPDATE Medical SET Q1=@0, Q2=@1, Q3=@2, Q4=@3, Q5=@4, Q6=@5, Q7=@6, Q8=@7, Q9=@8, Q10=@9, Q11=@10, Q12=@11, Q13=@12, Q14=@13, Q15=@14, Q16=@15, Q17=@16, Q18=@17, Q19=@18, Q20=@19, Alcohol=@20, Medication=@21, Details=@22 WHERE CDSID=@23";
                var updquestionnaire = new{q1, q2, q3, q4, q5, q6, q7, q8, q9, q10, q11, q12, q13, q14, q15, q16, q17, q18, q19, q20, alcohol, medication, details, myCDSID};
                db.Execute(sql2,updquestionnaire); //error is highlighted on this line.

     } 
```

错误在 上突出显示`db.Execute(sql2,updquestionnaire);`。

错误是：

```
Exception Details: System.ArgumentException
 : No mapping exists from DbType <>f__AnonymousType0`24[System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.Object]
   to a known SqlCeType. 
```

我不明白这个错误是什么意思，Webmatrix 根本没有真正清楚地解释这个错误。我应该如何解释该错误并修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T22:02:26.900

由于 db.Execute 需要一个对象数组作为第二个参数，请尝试更改您的`new`语句以显式创建一个对象数组。例如像这样的东西......

```
var updquestionnaire = new object[] {q1, q2, q3, q4, q5, q6, q7, q8, q9, q10, q11, q12, q13, q14, q15, q16, q17, q18, q19, q20, alcohol, medication, details, myCDSID}; 
```

# javascript - 如何使用正则表达式提取以下标记？

> ID：10263182
> 
> 赞同：2
> 
> 时间：2012-04-21T21:32:16.777
> 
> 标签：javascript, regex

例如假设#表示一个特殊的词如下

我今天去#zoo 进行了#lovely 之旅。我们有一个美好的时光。使用 RegEx 是否可以提取类似

```
#lovely#zoo#wonderful 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T21:35:58.640

采用`string.match`

```
var str = "I took a #lovely trip to the #zoo today. We had a #wonderful time"
str.match(/#\w+/g); // #lovely,#zoo,#wonderful 
```

可能需要根据您的需要调整正则表达式以包含数字和符号。

`/#[\w\d]+/g`对于字母和数字，`/#\S+/g`对于任何不是空格的东西。

编辑：我会`g`在最后补充一点，这意味着它将找到所有匹配项，而不仅仅是第一个匹配项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T21:45:39.567

有正则表达式的答案。然后，就有了`split`答案。以下作品：

```
var s = 'I took a #lovely trip to the #zoo today. We had a #wonderful time.'
var tags = s.split( '#' ).map( function ( str ) {
    return str.split( ' ' )[ 0 ]
} )

// Now, tags[0] is not good, so let's splice it
tags.splice( 0, 1 )

console.log( tags ) // ['lovely', 'zoo', 'wonderful'] 
```

所以，是的，它比正则表达式解决方案更冗长。不过我觉得它更优雅。

PS：你猜对了，我不喜欢正则表达式！

# macos - 添加为子视图的 NSView 不显示

> ID：10263183
> 
> 赞同：3
> 
> 时间：2012-04-21T21:32:20.580
> 
> 标签：macos, cocoa, nib, viewcontroller, nssplitview

我有一个令人费解的问题。在 mac os x 10.7 中开发可可应用程序。

我的应用程序主窗口包含一个拆分视图。在拆分视图的其中一个子视图中的某个使用上下文中，加载了一个带有一些标签（nstextfield）的自定义视图和一个拆分视图（实例化了一个加载 nib 并从该控制器获取视图的视图控制器）。自定义视图的框架设置为拆分视图子视图边界，一切正常。问题是应该加载第二个拆分视图的子视图之一（相同的方法：视图控制器-nib-view-frame/bounds），其中包含一个包含表格视图和一个按钮的自定义视图，但在这种情况下没有任何显示。一切都以相同的方式完成，但最后一个自定义视图不可见。任何想法？

谢谢

（编辑）

这是我用来为要添加的视图实例化控制器、获取视图并将其作为子视图添加到拆分视图的子视图的代码

```
- (void)loadSubview {

    self.subviewToAddController = [[viewController alloc] initWithNibName:nil bundle:nil];
    //nib name is coded in the controller class definition

    [[self.subviewToAddController view] setFrame:[self.splitViewContainerSubView bounds]];
    //container subView is an outlet

    [self.splitViewContainerSubView addSubview:[self.subviewToAddController view]];

} 
```

但是我不认为问题出在这段代码中，因为如果我向容器子视图询问它自己的子视图，我可以看到新的子视图出现在列表中。它只是没有显示。如果我将它添加为拆分视图的子视图（刚刚进行的测试）或作为最外部拆分视图的子视图的子视图，它也会正确显示（抱歉解释混乱，我需要一个图表，但在这个那一刻我做不到）

详细说明我的疑问（我不想误导，所以我之前没有提到）不能是坐标问题，所以视图被正确加载并添加为子视图但不可见，因为被某些东西隐藏或显示超出可见区域？

（更新）

抱歉花了这么长时间才发布更新。经过更多测试，我发现问题与自动布局有关。不知道确切的问题是什么以及如何解决它。我最终为遇到麻烦的笔尖关闭了它，并使用旧方法设置界面对象的位置和大小/调整大小。不是最好的方法，但现在我可以继续。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:42:47.607

我最好的猜测是您没有正确设置视图的自动调整大小掩码。

# java - Postgres 和 GWT 的密钥提供程序

> ID：10263184
> 
> 赞同：0
> 
> 时间：2012-04-21T21:32:20.617
> 
> 标签：java, postgresql, gwt, gwt2, postgresql-9.1

对于我的 GWT 项目，

我最初构建了一个 List 和一个 *KEY_PROVIDER* 来唯一标识我在 List 中的记录。现在我连接到 Postgres 数据库而不是 List，我想知道是否需要将*ProvidesKey*的对象传递给数据库，或者在使用数据库时将其完全删除。

**较早**-

```
// Make a provider, connect the List with the provider!
final ListDataProvider<Contact> sortProvider = new ListDataProvider<Contact>(KEY_PROVIDER);
sortProvider.setList(CONTACTS); 
```

**现在**-

```
// Create a data provider.
MyDataProvider sortProvider = new MyDataProvider();
sortProvider.addDataDisplay(table); 
```

我不确定现在需要怎么做？

我需要通过吗-

```
MyDataProvider sortProvider = new MyDataProvider(KEY_PROVIDER); 
```

反而？

最佳实践应该是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T17:16:34.777

那么该`ProvidesKey`接口仅用于客户端（GWT）来识别您的对象。这对于了解选择列表中的哪个对象以及手动选择`CellTable`/中的另一行非常重要`CellList`。

如果您没有指定`ProvidesKey`实现，CellWidgets 将使用 DTO 的 equals 函数来检查它们是否相等。如果对象本身发生变化，您可能会遇到问题。因此，指定`ProvidesKey`实现始终是一种好习惯，而不取决于您使用的是 a `ListDataProvider`、 a`AsyncDataProvider`还是自定义数据提供者。

顺便说一句`MyDataProvider`，你的例子是什么？它是 的子类`AsyncDataProvider`吗？

# python - MySQLdb 结果

> ID：10263185
> 
> 赞同：0
> 
> 时间：2012-04-21T21:32:20.740
> 
> 标签：python, mysql, mysql-python

我希望能够使用 SELECT * FROM 查询从 MySQLdb 获取所有信息。我有以下代码：

```
 database = MySQLdb.connect("127.0.0.1", "root", "pswd", "Kazzah")
            cursor = database.cursor()
            cursor.execute("SELECT * FROM Accounts WHERE Email=%s AND Password=%s", (_Email, _Password)) 
            database.commit()
            numrows = cursor.rowcount
            results = cursor.fetchall()

            print numrows

            for result in results:
                print result 
```

如何创建变量来保存结果中的每条信息。如果结果返回：

```
(28L, 'Name', 'Last', 'email@email.com', 'pswd', '10000') 
```

我想创建一个名为 ID 的变量，并获得结果的第一部分，即 28L，以此类推。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T21:34:52.207

**编辑**

要设置完整的数据集，请使用：

```
id, fname, lname, email, pswd, whatever = result 
```

对于特定值，请尝试[索引](http://docs.python.org/tutorial/introduction.html#lists)。

# python - 重新生成所有 ComputedProperty 字段

> ID：10263187
> 
> 赞同：0
> 
> 时间：2012-04-21T21:32:59.023
> 
> 标签：python, google-app-engine

我想将 ComputedProperty 字段添加到数据存储区中有许多现有实体的模型中。

要查询这个新的 ComputedProperty 上的现有实体，我需要先生成计算属性。

触发计算并将计算值放回数据存储区的最有效方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T08:14:31.097

取决于您真正拥有多少数据。这是一个任务队列解决方案，但它会消耗你的配额......

```
class StampValue(webapp.RequestHandler):
    _task_url = '/tasks/stamp'
    _page_size = 100

    @classmethod
    def fire(cls, **params):
        taskqueue.add(url=cls._task_url, params=params)

    def get(self):
        self.fire()

    def post(self):
        key = self.request.get('key')
        if key:
            entities = MyModel.gql('WHERE __key__ >= :1 ORDER BY __key__ ASC', db.Key(key)).fetch(self._page_size+1)
        else:
            entities = MyModel.gql('ORDER BY __key__ ASC').fetch(self._page_size+1)

        key = None
        if len(entities) == self._page_size+1:
            key = str(entities[-1].key())
            self.fire(key=key)
            entities = entities[:self._page_size]

        for entity in entities:
            # update your field here
        db.put(entities) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T07:44:12.593

取决于您在谈论多少实体。使用[MapReduce](https://developers.google.com/appengine/docs/python/dataprocessing/overview)或简单的远程 API（启动控制台并手动执行）

# asp.net-mvc-3 - 如何在托管多个网站的系统上查找 localhost 地址

> ID：10263188
> 
> 赞同：0
> 
> 时间：2012-04-21T21:33:05.197
> 
> 标签：asp.net-mvc-3, localhost, scheduled-tasks

我正在制作一个 ASP.NET 应用程序，它需要每 30 分钟运行一次操作，并在满足某些条件时发送电子邮件。我在托管站点的系统上安排了 Windows 任务，以运行一个程序，该程序将使用 [LocalOnly] 属性发布到该操作。当我在开发期间进行测试时，这很棒，因为我可以将请求发送到 http://localhost:[Port]/[Controller]/[Action]。但是，一旦我部署了站点，使用公共域名的请求会导致它通过 Internet 路由，这意味着 IP 不再是本地的，这会导致操作失败。

有没有办法在本地提交这个请求？我希望有某种方法可以找出我可以使用的本地主机地址，而不是网站的公共域名或 IP。

...或者有没有更好的方法每 30 分钟发送一次电子邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T03:17:18.103

您可以通过在 IIS 中的部署服务器上创建唯一的端口绑定来完成此操作。

将此端口号存储在您正在运行的服务的某种配置中（或将其作为命令行参数传递给您的计划任务）。

更新您对 http://127.0.0.1:[PortThatWasPassedIn]/[Controller]/[Action] 的调用。

希望这会有所帮助，干杯。

# javascript - 为什么此 JavaScript 代码在控制台上打印“未定义”？

> ID：10263190
> 
> 赞同：6
> 
> 时间：2012-04-21T21:33:37.900
> 
> 标签：javascript, undefined, read-eval-print-loop

我有以下 JavaScript 代码：

```
var counter = 0;
function printCounter(){
   console.log("counter=" + ++counter);
   setTimeout(printCounter, 1000);
}
printCounter(); 
```

我希望它应该打印这个输出：

```
counter=1
counter=2
counter=3
... 
```

但相反，它打印以下内容：

```
counter=1
undefined  // <-- Notice this "undefined"
counter=2
counter=3
... 
```

为什么它在第一次迭代后打印“未定义”？

重要提示：只有在 JavaScript 控制台中执行代码时，我*才会*看到这种行为。如果它是页面的一部分，它可以正常工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T21:34:48.167

这是因为“printCounter()”函数本身返回`undefined`. 那是控制台告诉你表达式的结果。

`return "Hello Anton!";`通过添加到末尾来更改“printCounter()” :-)

说它“返回`undefined`”有点令人困惑；真的，它没有明确的回报，但它的效果是一样的。

# list - Python 2.5 列表选择简单

> ID：10263194
> 
> 赞同：-3
> 
> 时间：2012-04-21T21:34:07.067
> 
> 标签：list, python-2.5

你将如何从这个列表中删除“meh”这个词？我对索引有点困惑。我知道它对大多数人来说很简单，但我是编程新手。

```
x=["spam", "eggs", "ham"] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T22:01:55.540

该列表是零索引的，这意味着第一个单词在索引 0 处，第二个单词在索引 1 处，等等。您只能获取您输入的单词。有关更多信息，请阅读[Python 列表](http://docs.python.org/tutorial/datastructures.html)。

```
> x=["spam", "eggs", "ham"] # <-- make list
> x[0] # get each element one at a time
'spam'
> x[1]
'eggs'
> x[2]
'ham'
> x.append("meh") # <-- add "meh"
> x
['spam', 'eggs', 'ham', 'meh']
> x[3] # <-- now we can get "meh" out
'meh' 
```

如果您想要每个单词的第一个字母组成单词“seh”，请参阅marcog的答案。如果你真的想要“meh”，你可以这样做。

```
# 1st word, 4th letter    ("m") 
#  + 2nd word, 1st letter ("e") 
#  + 3rd word, 1st letter ("h")

print(x[0][3] + x[1][0] + x[2][0]) 
```

# php - 有没有办法隐藏所有数据库信息，如密码、用户名等？

> ID：10263202
> 
> 赞同：0
> 
> 时间：2012-04-21T21:34:42.587
> 
> 标签：php, mysql, passwords, host

我正在创建几个 php 脚本。我必须始终为同一个数据库和表的每个脚本插入主机、用户名、密码等吗？有没有办法只用一行或其他方式进行参考？无论如何要隐藏此信息吗？

```
$host="XXXXXXXXX";
$username="XXXXX";
$password="XXXXX";
$db_name="XXXXXX";
$tbl_name="XXXXX";
mysql_connect("$host", "$username", "$password") or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T21:47:12.033

虽然 PHP 文件被执行，因此源代码在网络上是不可见的，但意外的错误配置可能会改变这一点。您可以将数据库配置放在*wbeserver 文档根目录之外的*单独文件中，并使用 PHP 的`require`命令将其包含在其他脚本中。

但是，根据 PHP 配置，PHP 脚本可能无法访问 docroot 之外的文件，但有一些方法可以解决这个问题。[这个 SO question](https://stackoverflow.com/questions/2370053/how-to-include-file-outside-document-root)详细讨论了这些问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T23:02:35.957

如果您不想将凭据放在 php 文件中，则可以将它们放在 php.ini 配置文件中。

```
mysql.default_host = "localhost"
mysql.default_user = "user"
mysql.default_password = "pass" 
```

然后在php源代码中：

```
<?php

$connect_db = mysql_connect();
$err = mysql_error();
if ($err != "")
{
        echo "Error connecting to database: $err";
        die;
}

if (!mysql_select_db("mydomain_com_test", $connect_db))
{
        echo mysql_error()."<br/>";
        die;
}

$sql = "SELECT NOW()";
$rows = mysql_query( $sql );

?> 
```

# mysql - 外键和基本关系表

> ID：10263210
> 
> 赞同：0
> 
> 时间：2012-04-21T21:35:21.300
> 
> 标签：mysql, database, orm, foreign-keys, sqlalchemy

我有一个要在 MySQL 中实现的基本数据模型。我将使用 mysqldb 和 SQLalchemy 来做数据部分，从一些 XML 中获取一些数据。

我不太确定如何实现我想做的事情，我想知道是否有人能指出我正确的方向。

我有几个表，每个表都包含一部分数据。

```
Table 1 - recordTitle, recordID, recordDate
Table 2 - recordProp1, recordProp2, recordProp3
Table 3 - recordPropA, recordPropB, recordPropC 
```

所有的表在自己的空间中都是唯一的，但是T1可以有很多T2和T3，T2/T3可以属于很多T1。有道理？

我想解决这个问题的方法是有一个第四张桌子：-

表 4 - T1ref、T2ref、T3ref

并在 T1-3 中有一个名为 TnRef 的新列，基本上是该表的主键。

1.  这听起来像一个明智的方法吗？
2.  我想在填充数据时，我需要检查每个表条目的唯一性，如果是，我捕获 TnRef 值，如果不是，我插入新行并在之后收集 TnRef 值。一旦我有了这个值，我就可以填充将所有内容链接在一起的 T4 行。
3.  ORM 是执行此操作的正确工具吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T21:52:06.333

1.  对于您描述的多对多关系，是的，我认为有第四个表将 T1 记录与 T2(s) 和 T3(s) 链接起来是有意义的。不过，我认为您需要向 T2 和 T3 添加一个键列，以使 T4 能够正确存储链接。

2.  我假设您的意思是 T2 和 T3 将扩展，并且您的应用程序将请求（例如）将 { recordProp1= someval, recordProp2= someotherval } 添加到 T1 中的给定记录。如果是这样，那么是的，您需要先在 T2 上进行查找，然后根据 T1 和 T2 的键将其插入到 T4 中。

3.  我认为 ORM 绝对是做到这一点的正确工具。当然，您首先要确保 MySQL 中的所有外键关系都是正确的。但是 SqlAlchemy 可以处理多对多关系。看看： [http ://docs.sqlalchemy.org/en/latest/orm/relationships.html#many-to-many](http://docs.sqlalchemy.org/en/latest/orm/relationships.html#many-to-many)

# ruby-on-rails - 我可以从模型中获取表、列和类型信息吗？

> ID：10263214
> 
> 赞同：10
> 
> 时间：2012-04-21T21:35:52.353
> 
> 标签：ruby-on-rails, ruby, activerecord

我正在使用 ruby​​ 和 activerecord 来获取有关 mysql 表的信息。

我希望我可以直接从我的模型类中获取这些信息，这可能吗？

说我有我的模型：

```
class Product < ActiveRecord::Base
end 
```

我现在是否可以获得以下信息：

```
1\. mysql table
2\. columns
3\. column types 
```

还是我必须深入了解 ActiveRecord 模块才能得到这个？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-21T22:00:58.137

1.  `Product.table_name`
2.  `Product.column_names`
3.  `Product.columns_hash['title'].type`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T21:47:39.007

看看[ActiveRecord::ModelSchema::ClassMethods](http://api.rubyonrails.org/classes/ActiveRecord/ModelSchema/ClassMethods.html)：

```
class Product < ActiveRecord::Base
  self.table_name # 1
  self.columns # 2
  self.columns_hash['name'].type # 3
end 
```

# python - 将数组对象更改为字符串... TypeError：列表索引必须是整数，而不是 str

> ID：10263216
> 
> 赞同：1
> 
> 时间：2012-04-21T21:36:27.633
> 
> 标签：python, arrays, loops, 2d, ascii

所以，我正在制作一个有点像矮人要塞的小游戏......但现在我正在努力让屏幕随机变化。我有 t 被分配给一个字符串，而 g 被分配给另一个。当我预定义它时它工作正常，但是当我改变它时......

这是它应该做的，并且通常输出（不改变动态改变任何东西）：

```
# # # # # # 
# ^ # # ^ # 
# # ^ # # # 
# # # # # # 
# # # # # # 
# # # ^ # # 
```

（它以颜色输出）

但是当我尝试动态更改数组时，它搞砸了。这是代码：

```
import os
import time
import random
clear = lambda: os.system('clear')

g = '\033[32m' + '# '
t = '\033[31m' + '^ '
l = [g, g, g, g, g, g,
     g, t, g, g, t, g,
     g, g, t, g, g, g,
     g, g, g, g, g, g,
     g, g, g, g, g, g,
     g, g, g, t, g, g]

def level():
    i = 0
    while i < 50:
        print l[0] + l[1] + l[2] + l[3] + l[4] + l[5]
        print l[6] + l[7] + l[8] + l[9] + l[10] + l[11]
        print l[12] + l[13] + l[14] + l[15] + l[16] + l[17]
        print l[18] + l[19] + l[20] + l[21] + l[22] + l[23]
        print l[24] + l[25] + l[26] + l[27] + l[28] + l[29]
        print l[30] + l[31] + l[32] + l[33] + l[34] + l[35]
        time.sleep(0.2)
        i += 1
        for b in l:
            ch = round(random.random())
            if ch:
                l[b] = t
            else:
                l[b] = g
        clear()
level() 
```

这是错误：

```
Traceback (most recent call last):
  File "DF.py", line 33, in <module>
    level()
  File "DF.py", line 29, in level
    l[b] = t
TypeError: list indices must be integers, not str 
```

我该如何解决这个问题？此外，任何与此问题无关的提示或建议也将不胜感激，我是 Python 的新手，所以我需要一些专业提示：P

另外，我确信有一种方法可以以正确的格式打印出来，而无需扔掉数组并打印它。可能有一个循环，但如果我只是做标准

```
for i in l:
    print l[i] 
```

不起作用，因为它不会以 6x6 打印。它会以 1x36 格式打印出来 :P 所以请帮我玩这个小游戏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T21:44:30.367

你的主要问题在这里：

```
 for b in l:
        ch = round(random.random())
        if ch:
            l[b] = t
        else:
            l[b] = g 
```

在 Python 中，`for`循环不会生成索引。它实际上为您提供了对被迭代对象中每个项目的直接引用。例如，如果你这样做：

```
for c in ['a', 'b', 'c']:
    print c 
```

你不会得到

```
1
2
3 
```

你会得到

```
a
b
c 
```

所以当你这样做时: `l[b]`，你试图使用列表中的项目，就好像它是它自己的索引一样。另请注意，您将无法以这种方式修改列表，这似乎是您想要做的。有关更多信息，请参见下文。

要回答您的第二个问题，一种迭代分段列表的方法是这样的；还有很多其他的，但这可能是您刚开始时最容易理解的：

```
for i in range(0, len(l), 6):
    print ' '.join(l[i:i + 6]) 
```

第二行中的冒号对列表进行*切片*，返回列表中`i`和之间部分的副本`i + 6`。该函数`' '.join(...)`采用字符串列表并将字符串连接在一起，并在它们之间使用空格。

最后，我看到您也在尝试*修改*列表。你需要做更多的事情。*最好*的方法（恕我直言）如下（这只是一个例子）：

```
a = [1, 2, 3]:
for i, n in enumerate(a):
    a[i] = n * 2 
```

`enumerate`是一个允许您迭代列表中的索引*和*项目的函数。所以`i`这里是 的索引`a`，`n`是 的值`a[i]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T21:45:51.410

对于第一个问题，错误是：

```
for b in l:
    ch = round(random.random())
    if ch:
        l[b] = t
    else:
        l[b] = g 
```

您正在尝试按字符本身进行索引。你应该做：

```
for i, b in enumerate(l):
    ch = round(random.random())
    if ch:
        l[i] = t
    else:
        l[i] = g 
```

enumerate() 将在您迭代它时为每个字符提供索引。

关于打印问题，下面的循环应该这样做：

```
for i in xrange(0, 36, 6):
    print ''.join(l[i:i+6]) 
```

或者这个，如果你想要一个衬里：

```
print '\n'.join(''.join(l[i:i+6]) for i in xrange(0, 36, 6)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T21:44:19.527

问题是您直接使用 b，这将取消对 b 指向的字符串的引用（因此它会导致 'l[#]'，而不是 'l[4] 左右），而不是 b 的索引。使用 list.index() 函数获取 b 的索引并基于该索引分配给 l，而不是 b 的值

```
if ch:
    l[l.index(b)] = t
else:
    l[l.index(b)] = g 
```

# python - 在 Python xlib 中绘制窗口边框

> ID：10263217
> 
> 赞同：5
> 
> 时间：2012-04-21T21:36:34.127
> 
> 标签：python, xlib

我正在开发一个使用 python 的 xlib 绑定​​编写的窗口管理器，并且我（最初）试图以更 Pythonic 的方式模仿 dwm 的行为。我已经得到了很多我需要的东西，但是我在使用 X 的内置窗口边框功能来指示窗口焦点时遇到了麻烦。

假设我有一个 Xlib 窗口类的实例并且我正在正确阅读文档，这应该做我想做的事情（至少现在） - 将预先存在的窗口的窗口边框设置为花哨的颜色并设置边框宽度为 2px。

```
def set_active_border(self, window):
    border_color = self.colormap.alloc_named_color(\
        "#ff00ff").pixel
    window.change_attributes(None,border_pixel=border_color,
           border_width = 2 )
    self.dpy.sync() 
```

但是，我没有得到任何结果——我可以添加打印语句来证明我的程序确实在运行与事件关联的回调函数，但我在边框上绝对没有颜色变化。谁能确定我在这里缺少什么？如果有帮助，我可以粘贴一个更完整的示例。我不确定它会不会，因为这是处理边界的唯一位。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T13:27:15.243

看起来这是完整的 PEBKAC。我找到了答案。基本上，我是这样做的：

```
def set_active_border(self, window):
    border_color = self.colormap.alloc_named_color(
        "#ff00ff"
    ).pixel
    window.configure(border_width=2)
    window.change_attributes(
         None,
         border_pixel=border_color,
         border_width=2)
    self.dpy.sync() 
```

显然，这让 X 感到困惑，以至于它什么也没做。我偶然发现的解决方案是从 window.change_attributes() 调用中删除 border_width 部分，如下所示：

```
def set_active_border(self, window):
    border_color = self.colormap.alloc_named_color(
        "#ff00ff"
    ).pixel
    window.configure(border_width=2)
    window.change_attributes(
        None,
        border_pixel=border_color
    )
    self.dpy.sync() 
```

我希望这对以后的人有所帮助！

# javascript - 尝试添加 jQuery 和引导程序时出现 jQuery 非法字符

> ID：10263219
> 
> 赞同：-1
> 
> 时间：2012-04-21T21:36:41.907
> 
> 标签：javascript, jquery, unicode

非法字符似乎是日语？这怎么发生的？这是我的包含 jQuery/bootstrap[的空白 html ，萤火虫给了我：](http://tomgolan.com/Toms/index.html)

> 非法字符行 1 jQuery..min.js
> 
> ……潽琨扥牳猼猬挫扸⥥瑵笰⤻牒瑵瑵崩⬢灸晵湣潮⬢潽晵湣潮⬢潽晵湣潮⬢潽晵湣潮⬢潽晵湣潮⬢潽晵湣潮⬢潽晵湣潮⬢潽琨湣慉慉莹莹㵣⹣牥祛病⥢汥愉扮⠢摩扨愉扴⠢摩扨扉扉剨剨敼牰扉桩汤⡢⤬杀楮湥版呍䰽愮潵瑥版呍䰻牥瑵牮⁢⹦楲獴䍨楬摽晵湣莹潮⁢渨愩...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T21:59:54.897

服务器响应以 DOCTYPE 声明之前的 2 个“奇怪”字符开始（[U+02C7](http://en.wikipedia.org/wiki/Caron)和[U+02DB](http://en.wikipedia.org/wiki/Ogonek)）

# bash - 通过 SSH 的 sbt (Scala) 导致找不到命令，但如果我自己做就可以了

> ID：10263224
> 
> 赞同：2
> 
> 时间：2012-04-21T21:37:28.257
> 
> 标签：bash, scala, ssh, sbt

所以我正在尝试做一些涉及`sbt`通过 SSH 命令运行的事情，这就是我正在尝试的：

```
ssh my_username@<server ip> "cd <project folder>; sbt 'run-main Foo' " 
```

但是，当我这样做时，我收到一条错误消息：`bash: sbt: command not found`

然后我自己通过 SSH 进入服务器，`cd`进入项目文件夹，然后运行`sbt 'run-main Foo'`，一切正常。我已经检查以确保它在远程服务器`sbt`上的变量上，并且它显示了正确的值。`$PATH``ssh my_username@<server ip> "echo $PATH"`

我觉得这是一个简单的修复，但无法弄清楚......帮助？谢谢！-kstruct

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T21:47:51.410

当您登录时，`bash`它作为交互式 shell 运行。当您直接通过 运行命令时`ssh`，bash 将作为非交互式 shell 运行，因此需要获取不同的初始化文件（具体参见 bash 手册页）。有很多方法可以解决这个问题，例如：

*   `sbt`直接调用时使用完整路径`ssh`
*   编辑`.bashrc`缺失的目录并将其添加到`PATH`环境变量中

请注意，由于双引号，您的测试实际上是在您的客户端而不是您的服务器上`ssh my_username@<server ip> "echo $PATH"`打印的。`PATH`使用`ssh my_username@<server ip> 'echo $PATH'`或从服务器环境`ssh my_username@<server ip> env`打印。`PATH`检查 using`env`时，您会看到`PS1`仅在交互式 shell 中设置。

# delphi - 动态 TImage 在动态 TPanel 中？

> ID：10263225
> 
> 赞同：0
> 
> 时间：2012-04-21T21:37:39.770
> 
> 标签：delphi, runtime, delphi-7, dynamicobject

好的，我正在尝试在运行时在 TScrollBox 表面上创建一些自定义数量的 TPanel，如下图所示。

![在此处输入图像描述](../Images/5fcb860c6d550a6681a9692e21184245.png)

为此，我正在使用以下代码，并且效果很好。

```
var
  pan: array of TPanel;
  maxp, i, x, y: Integer;

...

maxp := 10;
SetLength(pan, maxp);

for i := 1 to maxp do begin
  // x is correct value; doesn't cause problem
  // y is correct value; doesn't cause problem
  pan[i-1] := TPanel.Create(form1);
  with pan[i-1] do begin
    Width := 100;
    Height := 150;
    Top := x * 151;
    Left := y * 101;
    Parent := ScrollBox1;
    end;
  end; 
```

现在，我无法将 TImage 对象放在每个具有相同索引的 TPanel 中（img[0] -> pan[0]、img[1] -> pan[1] 等）。看下图：

![在此处输入图像描述](../Images/8dfb9eff626e5050439de5aeb3644b8f.png)

使用相同的逻辑，我尝试创建 TImage，但没有成功。

我正在使用此代码，但无法弄清楚出了什么问题。它对我来说看起来很简单，但不知何故它并没有提供预期的效果。

```
var
  pan: array of TPanel;
  img: array of TImage;
  maxp, i, x, y: Integer;

...

maxp := 10;
SetLength(pan, maxp);
SetLength(img, maxp);

for i := 1 to maxp do begin
  // x is correct value; doesn't cause problem
  // y is correct value; doesn't cause problem
  pan[i-1] := TPanel.Create(form1);
  with pan[i-1] do begin
    Width := 100;
    Height := 150;
    Top := x * 151;
    Left := y * 101;
    Parent := ScrollBox1;
    end;
  img[i-1] := TImage.Create(form1);
  with img[i-1] do begin
    Width := 98;
    Left := 1;
    Height := 148;
    Top := 1;
    // in original code next line had img[0]. which caused problem
    Picture.LoadFromFile('some_image_file');
    Parent := pan[i-1];
    end;
  end; 
```

不知何故，它将所有 TImage 对象放在第一个 TPanel (pan[0]) 中的同一位置。这让我感到困惑，因为它说`Parent := pan[i-1];`但由于某种原因它总是将 TImage 放在 pan[0] 中。我尝试使用断点来查看每个 for 循环循环之后发生的情况（最后添加了 Application.ProcessMessages），它确实创建了 10 个不同的图像，但将它们放在 pan[0] 上。当然，最后它只显示加载到 pan[0] 中的最后一张图像。

我的问题是如何为每个动态 TPanel 制作一个动态 TImage（具有相同的数组索引）？

**解决了！**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T04:38:30.157

和忠告 - 摆脱`with`障碍。起初它们可能看起来很天真和简单，但从长远来看，它们只会用于编写难以排除故障的草率代码。如果您一直使用显式变量引用，那么这个问题一开始就不会发生。

```
var
  Panels: array of TPanel;
  Panel: TPanel;
  Images: array of TImage;
  Image: TImage;
  maxp, i, x, y: Integer;

...

maxp := 10;
SetLength(Panels, maxp);
SetLength(Images, maxp);

for i := 1 to maxp do begin
  Panel := TPanel.Create(form1);
  Panels[i-1] := Panel;
  Panel.Parent := ScrollBox1;
  Panel.SetBounds(...);
  Image := TImage.Create(form1);
  Images[i-1] := Image;
  Image.Parent := Panel;
  Image.SetBounds(...);
  Image.Picture.LoadFromFile('some_image_file');
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T22:17:25.920

你设置`Height`了两次，没有`Left`，所以看起来。

```
with pan[i-1] do begin
  Width := 100;
  Height := 150;
  Top := x * 151;
  Height := y * 101;
  Parent := ScrollBox1;
end; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T22:20:39.553

啊，我发现了……我真是瞎了眼……

为了在 delphi 中自动完成，我`img[0]`在`Picture.LoadFromFile()`. 然后，显然我忘了从代码中删除它，并且从一小时前开始，“前缀”一直留在那里，使所有图像都加载到同一个 img[0] 中。我确信 Parent 或 Pos/Size 属性有问题，并且一直专注于这些事情，并不太关心这个。

我其实有

```
 with img[i-1] do begin
    Width := 98;
    Left := 1;
    Height := 148;
    Top := 1;
    img[0].Picture.LoadFromFile('some_image_file');
    Parent := pan[i-1];
    end; 
```

但不知何故，我在发布此问题时删除了 img[0] 部分，并且在我的 Delphi 代码中没有将其视为问题。显然，当我格式化这段代码时，我删除了一些部分，这使得在这里回答我的问题变得不可能:(

真的很抱歉打扰你们，那是我的错。

# c++ - 用新的小部件替换 QTabWidget 的页面

> ID：10263229
> 
> 赞同：1
> 
> 时间：2012-04-21T21:38:39.407
> 
> 标签：c++, qt, tabs, widget, qtabwidget

基本上我有一个 QTabWidget。起初它有一个表单小部件，widget1。在完成与该表单的交互后，新的 widget2 表单应该接管同一个选项卡。

我认为`tabWidget->setCurrentWidget(new widget2());`会起作用，但它基本上是`setCurrentIndex(int)`.

有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T21:54:05.377

您可以[`QStackedWidget`](http://qt-project.org/doc/qt-4.8/qstackedwidget.html)在选项卡或其他地方使用这种类型的东西。

将您要在该选项卡中显示的所有小部件放在一个 中`QStackedWidget`，然后将该堆叠的小部件放在一个选项卡中。

这是一个快速的演示：

```
#include <QtGui>

class W: public QWidget
{
    Q_OBJECT

    public:
    W(QWidget *parent=0): QWidget(parent)
    {
        // stacked widget displays one of its "children" at a time
        QStackedWidget *sw = new QStackedWidget;
        QPushButton *b1 = new QPushButton("hello");
        sw->addWidget(b1);
        QPushButton *b2 = new QPushButton("world");
        sw->addWidget(b2);

        // tab widget and simplistic layout
        QTabWidget *tw = new QTabWidget(this);
        tw->addTab(sw, "tab");
        QHBoxLayout *l = new QHBoxLayout;
        l->addWidget(tw);
        setLayout(l);

        // signal mapper to demo the widget switching
        QSignalMapper *m = new QSignalMapper(this);
        connect(b1, SIGNAL(clicked()), m, SLOT(map()));
        m->setMapping(b1, 1);
        connect(b2, SIGNAL(clicked()), m, SLOT(map()));
        m->setMapping(b2, 0);
        connect(m, SIGNAL(mapped(int)), sw, SLOT(setCurrentIndex(int)));
    }
}; 
```

# javascript - 为什么 Chrome 扩展图像添加到 DOM 时显示为损坏？

> ID：10263230
> 
> 赞同：2
> 
> 时间：2012-04-21T21:38:41.337
> 
> 标签：javascript, jquery, html, css, google-chrome-extension

我正在构建一个 Chrome 扩展程序，并试图通过内容脚本向 DOM 添加一个带有背景图像的 div。CSS 正确加载，并且通过开发人员工具检查器查看图像 URL 似乎是正确的。

```
$('.close-button').css('background', 'url('+chrome.extension.getURL('img/btn_close.png')+')'); 
```

URL 在检查器中显示为

```
chrome-extension://fdghianmcdbcgihapgdbjkdoaaocmoco/img/btn_close.png 
```

但是图像不会在后台加载。如果我做同样的事情，但将图像加载为 img 标签的 src，则图像在浏览器中明显显示为损坏。

但是，当我将此 URL 粘贴到浏览器 URL 栏中并加载它时，它显示得很好。将它加载到 DOM 有什么问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-22T03:04:46.327

我在 chrome 扩展文档中找到了答案。默认情况下，无法在网页 DOM 中访问扩展根目录中的文件。开发人员可以使用 manifest.json 文件中的“web_accessible_resources”设置覆盖它：

[http://code.google.com/chrome/extensions/manifest.html#web_accessible_resources](http://code.google.com/chrome/extensions/manifest.html#web_accessible_resources)

```
{
  ...
  "web_accessible_resources": [
    "images/my-awesome-image1.png",
    "images/my-amazing-icon1.png",
    "style/double-rainbow.css",
    "script/double-rainbow.js"
  ],
  ...
} 
```

对 Matt Greer 建议使用数据 url 的评论也特别大声疾呼，我相信这也有效。

# syntax - “：=”在伪代码中是什么意思？

> ID：10263234
> 
> 赞同：9
> 
> 时间：2012-04-21T21:39:08.727
> 
> 标签：syntax, pseudocode, colon-equals

伪代码中真正的基本语法问题。伪代码中的含义是什么`:=`？
例子

```
a := 1 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-21T21:42:06.437

维基百科上的伪代码示例通常`:=`用作赋值运算符，就像 Pascal 一样（我还没有找到任何反例）。

您不能直接在 Python 中使用它，因为它会是`SyntaxError`：

```
>>> a := 1
  File "<stdin>", line 1
    a := 1
      ^
SyntaxError: invalid syntax 
```

利用

```
a = 1 
```

反而。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-21T21:53:18.723

在伪代码`:= means assignment`中`= means equality`

`a:=1 in pseudo code means a=1 in most languages`而 a=1 通常用于伪代码中的条件检查，即`if(a=1) in pseudocode means if (a==1) in most languages`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-21T21:44:36.867

如果您正在谈论从另一种语言进行翻译，则 := 运算符在类似帕斯卡的语言中用于分配变量。

在 python 中，等价的只是 =。

帕斯卡：

```
a := 1 
```

Python：

```
a = 1 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-21T22:08:47.113

帕斯卡：

```
a := 1 
```

Python：

```
a = 1 
```

:)

# android - 如何在 android 中对 AsyncTask 进行单元测试？

> ID：10263235
> 
> 赞同：1
> 
> 时间：2012-04-21T21:39:14.317
> 
> 标签：android, unit-testing, testing, android-asynctask

我有一个简单的 AsyncTask 执行一些计算。我该如何对其进行单元测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T22:31:16.697

我不明白你为什么需要异步测试它。如果您的代码在 doInBackground 方法中，您可以从您的测试类中调用该方法，并在它返回时对结果进行断言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:38:52.913

我找到了以下示例，我认为您应该检查一下： [https ://github.com/pivotal/RobolectricSample](https://github.com/pivotal/RobolectricSample)

# apache - 将多个 URL 重定向到一个 SSL URL

> ID：10263236
> 
> 赞同：0
> 
> 时间：2012-04-21T21:39:21.823
> 
> 标签：apache, .htaccess, mod-rewrite

我有两个指向一个应用程序的 URL，我希望它们都被重定向到带有 www 的 SSL 地址（即`https://www.example1.com`）

我目前在我的 .htaccess 文件中有以下内容：

```
RewriteCond %{HTTP_HOST} ^example1.com [nc,or]
RewriteCond %{HTTP_HOST} ^www.example1.com [nc,or]  # Causes problems
RewriteCond %{HTTP_HOST} ^example2.com [nc,or]
RewriteCond %{HTTP_HOST} ^www.example2.com [nc]     # Causes problems
RewriteRule ^(.*) https://www.example1.com$1 [R=301,nc] 
```

www URL 的条件似乎没有正确重定向，浏览器也抱怨很多。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T21:47:31.107

在大多数 Apache SSL 设置中，最好的办法是将 443 (SSL) 以外的端口上的 Apache 流量重定向到 SSL URL：

```
RewriteCond %{SERVER_PORT} !443
RewriteRule ^(.*) https://www.example1.com$1 [R=301,NC] 
```

或者，您可以通过以下方式检查 HTTPS：

```
RewriteCond %{HTTPS} off
RewriteRule ^(.*) https://www.example1.com$1 [R=301,NC] 
```

# ruby - 用户间非二分非加权最大匹配

> ID：10263244
> 
> 赞同：1
> 
> 时间：2012-04-21T21:40:52.093
> 
> 标签：ruby, algorithm, matching, weighted, bipartite

情况：用户选择多个其他用户作为项目的可能合作伙伴。用户对他选择的一个用户没有偏好（即，他列表中的任何用户都足以成为合作伙伴）。例子：

```
| user_id | preferred_partners |
| 1       | 2 4                |
| 2       | 3 1                |
| 3       | 4 2 1              |
| 4       | 1                  | 
```

真正的清单会大得多。

我的问题：给定一组用户及其首选合作伙伴（如上面的列表），我想生成一组最终合作对。最终合作对的数量必须最大化（我希望尽可能多的人成对）。

这是我*认为*我需要的算法：[Edmonds's matching algorithm](http://en.wikipedia.org/wiki/Edmonds%27s_matching_algorithm)，但由于我不是数学背景，我在解释和实现它时遇到了麻烦。

任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T23:26:08.200

Edmonds 的算法可能是您想要的，但话又说回来，它可能不是。你会寻找三重奏吗？你会想要偏好的强度吗？您是否曾经想要一些关于您的机制的保证，例如，如果有人提出更多偏好，他们就不能从匹配变为不匹配？合作伙伴必须相互优先吗？如果不是，是否对共同偏好的合作伙伴有更多的重视？

其中一些变体可以通过 Edmonds 算法或其加权表亲来解决，该算法使用 Edmonds 来解决“受限原始”，其方式与匈牙利算法使用二分匹配算法的方式非常相似，但有些，特别是 3D 匹配，很难并且不适合可爱的组合算法。通过从 Ruby 中调用整数规划求解器，您可能会发现甚至可以更轻松地求解多时间情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T22:51:06.357

Edmonds 的匹配算法确实是你想要的。这是一个[很好的链接](http://www.cs.berkeley.edu/~karp/greatalgo/lecture05.pdf)，提供了详细的解释

# iphone - 故事板完成，我需要为每个创建的视图创建 .h 和 .m 视图控制器文件吗？

> ID：10263245
> 
> 赞同：2
> 
> 时间：2012-04-21T21:40:58.923
> 
> 标签：iphone, ios, xcode

我已经创建了几个视图相互调用的故事板，现在我需要创建代码

我注意到 XCode 没有为情节提要中的每个视图创建 .h 和 .m 控制器文件。

我应该手动创建它们吗？我应该只保留一个控制器吗？（或很少取决于对 MVC 的关注点分离）是否有开发这种模式的模式？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T22:14:38.733

通常的方法是一个视图控制器 pr。满屏的内容。您可以想象有一个用于 tableview 的视图控制器，具有任何类型的内容，然后如果按下一行，另一个视图控制器会在一个充满内容的新屏幕中呈现该内容。

通常，当您在视图控制器中有子视图时，您可以在 interfacebuilder 中将它们连接起来。然后，例如，如果您想填充其中包含 uiimageview 和 uiactivityindicatorview 的视图，您可以控制它们的行为以及它们如何从视图控制器代码中填充。如果你想要一些非常通用的东西并且你觉得一个视图可能会在你的视图控制器中占用大量代码，你也可以为它创建一个 uiview 子类，然后在界面生成器中设置该类。

这有帮助吗？如果您需要更多说明，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:43:46.103

是否为每个视图设置一个 ViewController 完全取决于您。如果你有很多意见，我会推荐它。即使您有 2 或 3 个视图，您可能仍然应该这样做。当每个视图都有不同的任务但都有相似的 IBOutlets 时，事情会变得非常混乱。

**TLDR；***就个人而言，如果*每个视图都有一个单独的任务，我会说每个视图都有一个 ViewController 是一个很好的做法。

# java - android - 无法实例化活动 - ClassNotFound - 在一次日食上失败，但在其他日食上失败

> ID：10263248
> 
> 赞同：4
> 
> 时间：2012-04-21T21:41:38.153
> 
> 标签：java, android, eclipse, manifest, classnotfoundexception

我在尝试加载程序时收到“无法实例化活动”错误。让我感到困惑的一件事是完全相同的代码在我的旧 PC 上运行。我刚刚用新的 eclipse / android SDK / 等构建了一个新的。我有两台机器运行相同的代码，一台工作正常，另一台给出这个错误。

有什么想法吗？

编辑：我在堆栈中注意到的一件事是

引起：java.lang.ClassNotFoundException: com.voldaran.puzzle.graBLOX.PopActivity in loader dalvik.system.PathClassLoader[/data/app/com.voldaran.puzzle.graBLOX-2.apk]

它列出了 graBLOX-2.apk 。为什么使用'-2.apk'？

当我在工作机器上手动重现此错误时，它不会显示最后一个 [] 部分。

安卓清单

```
<application android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name=".PopActivity"
              android:label="@string/app_name"
              android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
              android:finishOnTaskLaunch="true"
              android:configChanges="orientation|keyboardHidden"
              android:screenOrientation="portrait"
              >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

堆

```
 04-21 17:33:42.284: E/AndroidRuntime(4045): FATAL EXCEPTION: main
04-21 17:33:42.284: E/AndroidRuntime(4045): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.voldaran.puzzle.graBLOX/com.voldaran.puzzle.graBLOX.PopActivity}: java.lang.ClassNotFoundException: com.voldaran.puzzle.graBLOX.PopActivity in loader dalvik.system.PathClassLoader[/data/app/com.voldaran.puzzle.graBLOX-2.apk]
04-21 17:33:42.284: E/AndroidRuntime(4045):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
04-21 17:33:42.284: E/AndroidRuntime(4045):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-21 17:33:42.284: E/AndroidRuntime(4045):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-21 17:33:42.284: E/AndroidRuntime(4045):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-21 17:33:42.284: E/AndroidRuntime(4045):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-21 17:33:42.284: E/AndroidRuntime(4045):     at android.os.Looper.loop(Looper.java:130)
04-21 17:33:42.284: E/AndroidRuntime(4045):     at android.app.ActivityThread.main(ActivityThread.java:3683)
04-21 17:33:42.284: E/AndroidRuntime(4045):     at java.lang.reflect.Method.invokeNative(Native Method)
04-21 17:33:42.284: E/AndroidRuntime(4045):     at java.lang.reflect.Method.invoke(Method.java:507)
04-21 17:33:42.284: E/AndroidRuntime(4045):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-21 17:33:42.284: E/AndroidRuntime(4045):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-21 17:33:42.284: E/AndroidRuntime(4045):     at dalvik.system.NativeStart.main(Native Method)
04-21 17:33:42.284: E/AndroidRuntime(4045): Caused by: java.lang.ClassNotFoundException: com.voldaran.puzzle.graBLOX.PopActivity in loader dalvik.system.PathClassLoader[/data/app/com.voldaran.puzzle.graBLOX-2.apk]
04-21 17:33:42.284: E/AndroidRuntime(4045):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
04-21 17:33:42.284: E/AndroidRuntime(4045):     at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
04-21 17:33:42.284: E/AndroidRuntime(4045):     at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
04-21 17:33:42.284: E/AndroidRuntime(4045):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
04-21 17:33:42.284: E/AndroidRuntime(4045):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-20T05:04:35.203

我发生了几乎相同的情况（项目最初是在 32 位机器上制作的，然后在另一台 64 位机器上导入）。

在 Eclipse Juno（64 位）下的 Android 项目中：

*   在“Project Explorer”中的项目上单击鼠标右键，然后选择“Properties”
*   在左侧列表中选择“Java Build Path”。
*   单击“订购和导出”选项卡。
*   分别标记“Android Private Libraries”和“Android Dependencies”两个复选框，然后单击“确定”按钮。
*   清理项目并运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T23:04:23.853

试试这个。在您的内部添加这段代码，`PopActivity` 并从其默认构造函数中调用此函数。

```
private static void fixClassLoaderIssue()
{
ClassLoader myClassLoader = MyClass.class.getClassLoader();
Thread.currentThread().setContextClassLoader(myClassLoader);
} 
```

我有一个类似的问题，这解决了它。现在这个解决方案并没有真正回答问题存在的原因，但我真的找不到。
作为参考，请检查[此](https://stackoverflow.com/questions/3090009/classnotfoundexception-android)答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T23:37:24.747

您是否尝试过清理项目？这通常可以解决我的类加载器问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-03T07:34:56.977

就我而言，AndroidManifest 文件中的包名称错误。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"

    *package="com.app"*
    android:versionCode="1"
    android:versionName="1.0" > 
```

# c# - 水平位置时尝试创建新页面。的 i 超出右边距

> ID：10263250
> 
> 赞同：0
> 
> 时间：2012-04-21T21:42:17.633
> 
> 标签：c#, winforms, printing

我正在尝试在水平或 x 位置大于计数器时添加页面以保持右侧边距。当我运行代码时，我最终陷入了数百个页面的无限循环，所有页面都显示相同的第一页图形。认为这可能与我对 HasMorePages 缺乏了解有关。我可以使用一些帮助。谢谢。

```
 public static class PrintWave
{
    public static void PrintPreWave()
    {

        PrintDocument pd = new PrintDocument();

        if (WaveTools.MySettings == null)
        {
            pd.DefaultPageSettings.Landscape = true;
        }
        else
        {
            pd.DefaultPageSettings = WaveTools.MySettings;
        }
        pd.OriginAtMargins = true;

        pd.PrintPage += new PrintPageEventHandler(OnPrintPage);
        PrintDialog dlg = new PrintDialog();
        PrintPreviewDialog printPreviewDlg = new PrintPreviewDialog();
        printPreviewDlg.Document = pd;

        Form p = (Form)printPreviewDlg;
        p.WindowState = FormWindowState.Maximized;
        printPreviewDlg.ShowDialog();

    }

    private static void OnPrintPage(object sender, PrintPageEventArgs e)
    {
        string MyTag = string.Empty;
        MyTag = WaveActions.ActiveId;
        Wave MyWave = WaveHolder.FindWave(MyTag);
        int MyCount = 0;

        int xOffset = e.MarginBounds.Location.X;

        int yOffset = e.MarginBounds.Location.Y;

        if (MyWave != null)
        {
            Graphics g = e.Graphics;
            g.SetClip(e.PageBounds);

            Pen MyPen = new Pen(WaveTools.WaveColor, WaveTools.PenWidth);

            float dx = (float)e.PageBounds.Width / MyWave.NumSamples;
            float dy = (float)e.PageBounds.Height / 255;

            if (MyWave.Normal == false)
             {
               g.ScaleTransform(dx, dy);

            }

            for (int i = 0; i < MyWave.NumSamples - 1; i++)
            {

                g.DrawLine(MyPen, i, MyWave.Data[i], i + 1, MyWave.Data[i + 1]);
                MyCount = MyCount + 1;

                if (MyCount > e.MarginBounds.Width)
                {

                    e.HasMorePages = true;
                    MyCount = 0; 
                    return;
                }
                else
                {

                    e.HasMorePages = false;
                    return;

                }

            }

        }

    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T21:50:16.800

```
 for (int i = 0; i < MyWave.NumSamples - 1; i++) 
```

这是核心问题陈述，每次调用 PrintPage 时都从 0 开始。您需要从上一页中断的地方*继续。*使`i`变量成为类的字段而不是局部变量。实现 BeginPrint 事件以将其设置为零。

需要删除循环内的 else 子句。

# java - 即使我 100% 确定图像 100% 有效，ImageIO.read 有时也会返回 null

> ID：10263253
> 
> 赞同：0
> 
> 时间：2012-04-21T21:43:09.797
> 
> 标签：java, javax.imageio, javacv

我知道图像是有效的，因为我可以将 IplImage 转换为图像，甚至可以在 JPanel 上绘制它。但是，当我将字节数组转换为图像时，大多数时候我都会得到对图像的空引用。查看下面的代码以了解我所面临的情况，欢迎评论、问题、答案，甚至欢迎提示。

```
 Image i = Convert.getImage(image);
            byte[] buffer  = Convert.getBytes(image);
            Image  i2 = Convert.getImage(buffer); 
            //i2 is a null reference and i is a valid image. i can be drawn but i2 is useless. 
```

**转换类：**

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package Security;

import com.googlecode.javacv.cpp.opencv_core.IplImage;
import java.awt.Image;
import java.awt.image.BufferedImage;
import java.awt.image.DataBufferByte;
import java.io.ByteArrayInputStream;
import javax.imageio.ImageIO;
import javax.imageio.ImageReader;

/**
 *
 * @author danny
 */
public final class Convert
{

        public static Image getImage(IplImage image)
        {
                return image.getBufferedImage();
        }

        public static byte[] getBytes(IplImage image)
        {
                byte[] buffer;
                BufferedImage bI = image.getBufferedImage();
                buffer = ((DataBufferByte) (bI).getRaster().getDataBuffer()).getData();
                return buffer;
        }

        public static String getString(byte[] buffer)
        {
                return new String(buffer);
        }
        public static Image getImage(byte[] buffer)
        {
                try
                {

                        Image i = ImageIO.read(new ByteArrayInputStream(buffer));
                        return i;
                }
                catch (Exception e)
                {
                        System.out.printf("Exception Message:\n%s", e.getMessage() );
                        return null;
                }

        }
} 
```

现在你们中的一些人可能会问为什么我需要一个字节数组。好吧，因为我需要通过网络发送。

**需要注意的额外事项：**

1.  没有抛出异常
2.  IplImage 是一个有效的对象

**更新：**

我尝试使用 ToolKit 类从字节数组创建图像。但它失败可能是因为它不是 JPEG 或 GIF。尽管它确实返回了一个有效的 Image 对象，但 Image 对象指向的是一个空白的图像。这是我试图使用但未能这样做的代码。

```
public static Image getImage(byte[] buffer)
{
        try
        {
                Toolkit  toolkit = Toolkit.getDefaultToolkit();
                Image i =  toolkit.createImage(buffer);
                return i;
        }
        catch (Exception e)
        {
                System.out.printf("Exception Message:\n%s", e.getMessage() );
                return null;
        }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T02:10:22.123

DataBufferByte.getData 将：“返回默认（第一个）字节数据数组。” 第一*家银行*。这似乎是一种不确定的、不完整的获取字节的方法；尤其是在回来的路上。此外，还有从 DataBuffer 到 DataBufferByte 的依赖于实现的转换。

ImageIO 可以写入 OutputStream，例如写入 ByteArrayOutputStream，您可以从中获取字节。另一方面，ImageIO 可以再次读取它。这不是您想到的纯像素数据，而是万无一失的。

# php - 解析出除以特殊字符的文本？

> ID：10263254
> 
> 赞同：0
> 
> 时间：2012-04-21T21:43:12.630
> 
> 标签：php

我有一个字段，允许用户在一个字符串中输入不同的选项。所以，13123123|540|450

我如何将这三个值解析为三个变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T21:46:10.313

您可以使用[list](http://php.net/list)将它们放入三个不同的变量中：

```
$str = '13123123|540|450';
list($one, $two, $three) = explode('|', $str); 
```

或者，如果您愿意，您可以通过数组索引访问它们：

```
$str = '13123123|540|450';
$split = explode('|', $str);
// $split[0] == 13123123 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T21:49:31.700

您可以尝试以下方法：

```
$input = @$_POST["field"];

//  Method 1: An array

$options = explode ("|", $input);

/*
    The $options variable will now have the following:
    $options[0] = "13123123";
    $options[1] = "540";
    $options[2] = "450";
*/

// Method 2: Assign to different variables:

list($opt1, $opt2, $opt3) = explode ("|", $input);

/*
    The variables will now have the following:
    $opt1 = "13123123";
    $opt2 = "540";
    $opt3 = "450";
*/

// Method 3: Regular expression:

preg_match ("/(\w*)|(\w*)|(\w*)/i", $string, $matches);

/*
    The $options variable will now have the following:
    $matches[0] = "13123123";
    $matches[1] = "540";
    $matches[2] = "450";
*/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T21:46:39.193

根据每个`|`. 所以类似于`[\d{8}]^\|]`第一个，依此类推。

# ruby-on-rails - Ohm，从 ids 数组中查找所有记录

> ID：10263259
> 
> 赞同：2
> 
> 时间：2012-04-21T21:43:50.737
> 
> 标签：ruby-on-rails, ruby, ohm

我正在寻找一种方法来通过一个查询找到所有 Ohm 附属对象，方法是为其提供一组索引的属性。在 Mongoid 中，这是通过以下方式完成的：

```
Foo.any_in(:some_id => [list_of_ids]) 
```

ActiveRecord 有`find_all`一系列方法。

我本质上希望能够从数据存储中提取 N 条记录，而无需单独调用 find() 30 次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T22:07:50.077

您可以通过 find 数组或 ID 列表：

```
Foo.find(1,2,3) or Foo.find([1,2,3]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T03:38:02.757

这似乎不适用于最新的 Ohm (1.1.1)。我查看了源代码，看来您需要执行类似`Model.all.send(:fetch, [1,2,3])`. 问题是......你必须调用一个私有方法。

我创建了一个[问题](https://github.com/soveran/ohm/issues/69)，看看这是否是正确的方法。

更新：[刚刚](https://github.com/soveran/ohm/issues/69)公开！

# css - 如何在 Nokogiri 中找到 ComputedStyle 元素？

> ID：10263261
> 
> 赞同：0
> 
> 时间：2012-04-21T21:43:59.820
> 
> 标签：css, ruby, nokogiri

我正在使用 Ruby 和 Nokogiri 来解析 HTML 文档，并且我想选择与 CSS 类匹配的所有节点，我事先并不知道，但有`display: none`style 属性。

**例子：**

```
<html>
  <body>
    <p class="visibleTopics">Visible Topic Content</p>
    <p class="invisibleTopics">Invisible Topic Content</p>    
  </body
</html> 
```

在其他文件中定义：

```
.invisibleTopic {
    display: none
} 
```

我想`invisibleTopics`按其样式选择具有内容的节点`display: none`。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T05:11:19.920

Nokogiri doesn't compute styles. You need a browser for that. With Watir-Webdriver you would do:

```
browser.ps.reject{|p| p.visible?} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T21:56:42.030

不要寻找 CSS 属性，而是寻找标签内的 CSS 类：

```
require 'nokogiri'

html = <<EOT
<html>
  <body>
    <p class="visibleTopics">Visible Topic Content</p>
    <p class="invisibleTopics">Invisible Topic Content</p>    
  </body
</html>
EOT

doc = Nokogiri::HTML(html)

doc.search('.invisibleTopics').each do |n|
  puts n.text
end 
```

其中，运行时，输出：

```
Invisible Topic Content 
```

# php - 为什么这个 rememberUser() 函数不起作用？

> ID：10263262
> 
> 赞同：0
> 
> 时间：2012-04-21T21:44:01.420
> 
> 标签：php, cookies

我编写了一个函数来记住刚刚登录的用户。在我看来它应该可以工作，但不知道为什么它不工作。问题是当我查看浏览器存储的 cookie 时没有生成 cookie。

这是我正在谈论的功能：

```
function rememberUser($id) {

    $mysqli = new mysqli('bla', 'blabla', 'blablablaa', 'blaaaaa');
    if(mysqli_connect_errno()) {
        echo "Connection Failed: " . mysqli_connect_errno();
        exit();
    }
    $remember = md5(uniqid(mt_rand(),true));
    $stmt = $mysqli->prepare("UPDATE USERS SET USER_REMEMBER_KEY = ?    WHERE USER_ID = ?");
    $stmt->bind_param('si', $remember, $id);
    $stmt->execute();
    setcookie("remember", $remember, time()+60*60*24*30, "/", "www.someSite.com", false, true);
} 
```

我应该提到，查询工作正常，并且`USER_REMEMBER_KEY`存储在数据库中。所以问题真的出在饼干上，我想。

有人看到这里的问题吗？提前致谢。

**更新：**我使用的是 Google Chrome BETA 版本 19.xx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T22:07:25.210

你是在本地运行吗？Chrome 不支持本地 cookie。

# php - 我如何获取数据以显示在其他页面上？

> ID：10263264
> 
> 赞同：0
> 
> 时间：2012-04-21T21:44:25.480
> 
> 标签：php, mysql, phpmyadmin

> 我对 Get & Post 进行了更改，但它什么也没做，我认为它的形式使这变得困难，这个部分下面的表格，我做错了什么吗？当我对 GET 和 POST 使用“名称”而不是“提交”和“开始”时，我不能说但肯定知道一件事，我收到错误提示未定义索引：“名称”，这是怎么回事，我照你说的做了，但什么也没做！

/////////////表格/////////////////////

```
<form method="post" action="search_govern.php?go" id="searchform">
  <input type="text" name="name">
  <input type="submit" name="submit" value="Yell">
</form> 
```

//////////表格结束//////////////////

```
<?php   

//if(isset($_POST['submit'])){
//if(isset($_GET['go'])){
//if(preg_match("/[A-Z | a-z]+/", $_POST['name'])){
//$name=$_POST['name'];
//////////////////////////////////////// 
```

> 我认为问题就在这里，但我不确定我做错了什么，你能指出我的错误或给我看一个例子吗！

```
if(isset($_POST['submit'])){
if(isset($_GET['go'])){
$raw_name = $_GET['name'] ;

if(preg_match("/[A-Z | a-z]+/", $raw_name )){
$name=$raw_name;
////////////////////////////////////////

include "connect/connect.php";

//-query the database table
$sql="SELECT userId, Attribute, Name FROM government  WHERE Name LIKE '%$name%' OR   Attribute LIKE '%$name%' ORDER BY userid ASC";

///////////////////////// PAGINATION CLASS////////////////////////////////////

class Pagination {

public $current_page;
public $per_page;
public $total_count;

public function __construct($page=1, $per_page=20, $total_count=0){
 $this->current_page = (int)$page;
 $this->per_page = (int)$per_page;
 $this->total_count = (int)$total_count;
}

   public function offset() {

   return ($this->current_page - 1) * $this->per_page;
}

  public function total_pages() {
   return ceil($this->total_count/$this->per_page);
}

  public function previous_page() {
  return $this->current_page - 1;
}

  public function next_page() {
  return $this->current_page + 1;
}

   public function has_previous_page() {
    return $this->previous_page() >= 1 ? true : false;
}

    public function has_next_page() {
        return $this->next_page() <= $this->total_pages() ? true : false;
    }
}

///////////////////////////END OF PAGINATION CLASS///////////////////////////////

$curent_page   = isset($_GET['page'])&&(int)$_GET['page'] !=0 ? (int)$_GET['page'] : 1 ;
$per_page = 7 ;

$sql = "SELECT COUNT(*) FROM government ";
$result = mysql_query($sql);
$total = mysql_result($result , 0);

$pagination    = new Pagination($curent_page , $per_page , $total);

///////////////////////////////////////////////////////////////////////

         //echo 'perpage      : '.$pagination->per_page.'<br />';
         //echo 'offset       : '.$pagination->offset().'<br />';

///////////////////////////////////////////////////////////////////////

$rows_to_show = "SELECT userId, Attribute, Name FROM government WHERE Name LIKE '%$name%' OR Attribute LIKE '%$name%' LIMIT {$pagination->per_page} OFFSET   {$pagination->offset()}";

if($pagination->total_pages() > 1 ){
         echo '<div id="pagination_div">';
          if($pagination->has_next_page()){

          echo '<span><a href="search_govern.php?page='.$pagination->next_page();
          echo '&name='.$name;
          echo'" >> </a></span>' ;

          }
          for($i=1 ; $i <= $pagination->total_pages() ; $i++ ){
             if($i == $pagination->current_page ){
             echo  '&nbsp;<strong>'.$i.'&nbsp;</strong>';
             }
             else   {                 
             echo '<span><a href="search_govern.php?page='.$i;
             echo '&name='.$name;
             echo'"> '.$i.' </a></span>';  
             }
          }
          if($pagination->has_previous_page()){

            echo'<span><a href="search_govern.php?page='.$pagination->previous_page();
            echo '&name='.$name;
            echo'" >  < </a></span>';
          } 

        echo ' </div> ';

         }

$dtotal = mysql_query($rows_to_show);

    echo "$dtotal";

if ( $dtotal === FALSE ){ //////////// check to see if the query fails
       die(mysql_error());
    }
    else{

//-create while loop and loop through result set
while($row=mysql_fetch_array($dtotal)){
$userId=$row['userId'];
$Attribute=$row['Attribute'];
$Name=$row['Name'];

//-display the result of the array
echo "<p style=\"margin:2px 0px 5px 0px;\" >"; 
echo "<p>" ."<a href=\"search_govern.php?id=$userId\"> "  . $Name . "</a></p>";
echo "</p>";
}
}
}
else{
echo "<p>&nbsp;&nbsp;&nbsp;Please enter a search query</p>";
}
}
} 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T22:21:16.260

我建议一个更简单、更干净的代码

这是一个简单的分页类：

```
class Pagination {

  public $current_page;
  public $per_page;
  public $total_count;

  public function __construct($page=1, $per_page=20, $total_count=0){
    $this->current_page = (int)$page;
    $this->per_page = (int)$per_page;
    $this->total_count = (int)$total_count;
  }

  public function offset() {

    return ($this->current_page - 1) * $this->per_page;
  }

  public function total_pages() {
    return ceil($this->total_count/$this->per_page);
    }

  public function previous_page() {
    return $this->current_page - 1;
  }

  public function next_page() {
    return $this->current_page + 1;
  }

    public function has_previous_page() {
        return $this->previous_page() >= 1 ? true : false;
    }

        public function has_next_page() {
            return $this->next_page() <= $this->total_pages() ? true : false;
        }
} 
```

将其保存在 .php 文件中并将其包含在您的页面中，这是您使用它的方式：

$分页=新分页（$curent_page，$per_page，$total）；

```
 $curent_page   // get it from url with GET method
e.g 
$curent_page   = isset($_GET['page'])&&(int)$_GET['page'] !=0 ? (int)$_GET['page'] : 1 ; 
```

-

```
$per_page // you have to define how many rows do you want to show in the page
e.g
 $per_page = 20 ; 
```

-

```
 $total // you have to  count all of the rows in your table 

e.g
    $sql = "SELECT COUNT(*) FROM `$tbl` ";
    $result = mysql_query($sql , $db_connection);
    $total = mysql_result($result , 0);

now you can create a pagination obj
 $pagination    = new Pagination($curent_page , $per_page , $total); 
```

-

```
 $pagination->offset() // use this as offset in your query in each
     page 

 $pagination->per_page // use this as LIMIT in your query

        e.g
        $rows_to_show = "SELECT * FROM `$tbl` LIMIT {$pagination->per_page} OFFSET {$pagination->offset()}"; 
```

最后在页面底部创建html分页

```
 if($pagination->total_pages() > 1 ){
             echo '<div id="pagination_div">';
              if($pagination->has_next_page()){

              echo '<span><a href="index.php?page='.$pagination->next_page();
              echo'" >> </a></span>' ;

              }
              for($i=1 ; $i <= $pagination->total_pages() ; $i++ ){
                 if($i == $pagination->current_page ){
                 echo  '&nbsp;<strong>'.$i.'&nbsp;</strong>';
                 }
                 else   {                 
                 echo '<span><a href="index.php?page='.$i;
                 echo'"> '.$i.' </a></span>';  
                 }
              }
              if($pagination->has_previous_page()){

                echo'<span><a href="index.php?page='.$pagination->previous_page();
                echo'" >  < </a></span>';
              } 

            echo ' </div> ';

             } 
```

//////////////////////////////////// 编辑2 ///// //////////////////////////////

```
 /// $name may be sent to the page via post/form   OR via get/url so you have to be prepare for both , so this is how you get $name at the top of page 

 if(isset($_POST['name']))
 $raw_name = $_POST['name'] ;
 if(isset($_GET['name']))
 $raw_name = $_GET['name'] ;

if(preg_match("/[A-Z | a-z]+/", $raw_name )){
$name=$raw_name;
///// do other stuff 
```

//////// 至于分页，你必须将 $name 发送到每一页

```
 if($pagination->total_pages() > 1 ){
             echo '<div id="pagination_div">';
              if($pagination->has_next_page()){

              echo '<span><a href="index.php?page='.$pagination->next_page();
              echo '&name='.$name;
              echo'" >> </a></span>' ;

              }
              for($i=1 ; $i <= $pagination->total_pages() ; $i++ ){
                 if($i == $pagination->current_page ){
                 echo  '&nbsp;<strong>'.$i.'&nbsp;</strong>';
                 }
                 else   {                 
                 echo '<span><a href="index.php?page='.$i;
                 echo '&name='.$name;
                 echo'"> '.$i.' </a></span>';  
                 }
              }
              if($pagination->has_previous_page()){

                echo'<span><a href="index.php?page='.$pagination->previous_page();
                echo '&name='.$name;
                echo'" >  < </a></span>';
              } 

            echo ' </div> ';

             } 
```

# javascript - 将 jQuery 与“use strict”结合使用的正确方法是什么？

> ID：10263280
> 
> 赞同：9
> 
> 时间：2012-04-21T21:46:36.017
> 
> 标签：javascript, jquery, use-strict

如果我有类似以下的东西

```
"use strict";

$(document).ready(function () {

}); 
```

我收到警告

```
'$'is not defined 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-21T21:50:59.960

```
( function ( $ ) {
    'use strict';
    $( document ).ready( function () {
        console.log( 'working!' )
    })
} ( jQuery ) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T21:50:34.163

您是否将 jQuery 添加到您的网站？

在 tinker.io 上尝试相同的代码会产生错误，但随后添加 jQuery 库，错误就会消失。

CDN：[http ://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js)

使用此代码段添加它

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

# ruby-on-rails-3 - 如何在 Rails 中使用 HAML 视图作为 javascript 模板？

> ID：10263283
> 
> 赞同：1
> 
> 时间：2012-04-21T21:46:39.527
> 
> 标签：ruby-on-rails-3, haml

我正在使用 haml 在 Rails 中创建视图。我希望其中一些视图也可用作 javascript 模板。在不重复自己的情况下做到这一点的最佳方法是什么？

我希望我能做这样的事情：

创建一个haml视图，例如

`app/views/my_view.html.haml`

并创建一个 js 模板：

`app/assets/templates/my_view.js`

在 js 模板中，有如下内容：

```
//= Rails.views.render('my_view') 
```

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T22:59:21.770

如果您愿意，可以通过将 haml 放在 some_file.js.haml 文件中来在 javascript 中使用它。

例如，您可以使用 .js.haml 文件作为 js.erb 文件的替代品，这些文件可能会在 javascript 回调中用于弄乱页面。

# c++ - Core Foundation 每次调用 CFSTR() 都会造成内存泄漏

> ID：10263285
> 
> 赞同：0
> 
> 时间：2012-04-21T21:46:49.340
> 
> 标签：c++, objective-c, memory-leaks, core-foundation, cfstring

我通常使用 CFSTR() 宏从标准 c 字符串创建 CFString 对象，直到经过多次测试和更好地检查文档后，我意识到每次调用此函数都会自动产生内存泄漏，该内存泄漏一直持续到程序终止。即使在应用程序关闭后，视觉泄漏检测器仍会报告内存未释放。任何对 CFRetain、CFRelease 的调用都不会影响内存。由于我进行了很多调用，我想知道是否应该使用 CFStringCreateWithCString ，与 CFSTR 不同，在调用 CFRelease 后内存被完全释放（正如内存泄漏检测工具所报告的那样）。

谢谢

更新（回复评论）：我在 Windows 上，我直接从我的 c++ 应用程序中使用官方 CoreFoundation 库。为了识别内存泄漏，我使用了 OpenCfLite，因为源代码是相同的，但允许我还包含 Visual Leak Detector 标头，或者仅使用内置的 Visual Studio 泄漏检测器。当我关闭应用程序时，我会得到一份完整的报告，我可以清楚地看到内存地址及其内容。我可以从报告中看到传递给 CFSTR(=__CFStringMakeConstantString) 的相同字符串仍然位于内存地址。这似乎不是错误或我做错了什么，而只是正常行为，因为正如 Apple 所说：“CFSTR 不会释放从 CFSTR 返回的值，并且它们保证在程序终止之前有效。”

示例调用：CFSTR( **"该字符串是从 __CFStringMakeConstantString 函数创建的"** )

***---------------这是来自 Microsoft 内置泄漏检测器的转储：--------***

检测到内存泄漏！

倾倒对象 ->

c:\projects\cftest\cftest\cfbase.c(277) : {61} 位于 0x00A01648 的普通块，96 字节长。

数据：< **GThis st** > 00 00 00 00 8C 07 00 00 47 54 68 69 73 20 73 74

对象转储完成。

***---------------这是来自 VLD 工具的转储：----------------***

---------- 0x04AD2FE8 处的块 1：4096 字节 ----------

调用堆栈：

```
0x77D89950 (File and line number not available): ntdll.dll!RtlQueryEnvironmentVariable + 0x241 bytes
0x77D8D8C9 (File and line number not available): ntdll.dll!LdrResSearchResource + 0xB4D bytes
0x77D8D78C (File and line number not available): ntdll.dll!LdrResSearchResource + 0xA10 bytes
0x77D8C4D5 (File and line number not available): ntdll.dll!LdrLoadDll + 0x7B bytes
0x772A2288 (File and line number not available): KERNELBASE.dll!LoadLibraryExW + 0x1F1 bytes
0x6FA4DF32 (File and line number not available): clr.dll!GetCLRFunction + 0x895F bytes
0x6FA4DFAD (File and line number not available): clr.dll!GetCLRFunction + 0x89DA bytes
0x6FC4ECF0 (File and line number not available): clr.dll!CorLaunchApplication + 0x17DB0 bytes
0x6F9F421B (File and line number not available): clr.dll!StrongNameSignatureVerification + 0x524C bytes
0x6F9F42E2 (File and line number not available): clr.dll!StrongNameSignatureVerification + 0x5313 bytes
0x6F9F3FE4 (File and line number not available): clr.dll!StrongNameSignatureVerification + 0x5015 bytes
0x6F9AD323 (File and line number not available): clr.dll!LogHelp_NoGuiOnAssert + 0x17457 bytes
0x6FA57D55 (File and line number not available): clr.dll!GetCLRFunction + 0x12782 bytes
0x6F9C52D5 (File and line number not available): clr.dll!LogHelp_TerminateOnAssert + 0x16F1D bytes
0x023D0882 (File and line number not available): (Module name unavailable)!(Function name unavailable)
0x00370AF3 (File and line number not available): (Module name unavailable)!(Function name unavailable)
0x6CC8CEA3 (File and line number not available): System.Windows.Forms.ni.dll!(Function name unavailable)
0x6C3A4D34 (File and line number not available): System.Windows.Forms.ni.dll!(Function name unavailable)
0x6C397BBB (File and line number not available): System.Windows.Forms.ni.dll!(Function name unavailable)
0x6C3979B8 (File and line number not available): System.Windows.Forms.ni.dll!(Function name unavailable)
0x6C3A3B37 (File and line number not available): System.Windows.Forms.ni.dll!(Function name unavailable)
0x6C399828 (File and line number not available): System.Windows.Forms.ni.dll!(Function name unavailable)
0x6C3A285A (File and line number not available): System.Windows.Forms.ni.dll!(Function name unavailable)
0x6C3A3A60 (File and line number not available): System.Windows.Forms.ni.dll!(Function name unavailable)
0x6C3A26D9 (File and line number not available): System.Windows.Forms.ni.dll!(Function name unavailable)
0x6C399513 (File and line number not available): System.Windows.Forms.ni.dll!(Function name unavailable)
0x6C399491 (File and line number not available): System.Windows.Forms.ni.dll!(Function name unavailable)
0x6C8F9B34 (File and line number not available): System.Windows.Forms.ni.dll!(Function name unavailable)
0x023D0E7B (File and line number not available): (Module name unavailable)!(Function name unavailable)
0x767262FA (File and line number not available): USER32.dll!gapfnScSendMessage + 0x332 bytes
0x76726D3A (File and line number not available): USER32.dll!GetThreadDesktop + 0xD7 bytes
0x76726DE8 (File and line number not available): USER32.dll!GetThreadDesktop + 0x185 bytes 
```

........ **GThis.st**

72 69 6E 67 20 68 61 73 20 62 65 65 6E 20 63 72 **ring.has.been.cr**

65 61 74 65 64 20 66 72 6F 6D 20 5F 5F 43 46 53 **吃过。来自 .__CFS**

74 72 69 6E 67 4D 61 6B 65 43 6F 6E 73 74 61 6E **tringMak eConstan**

74 53 74 72 69 6E 67 20 66 75 6E 63 74 69 6F 6E **tString。功能**

00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ..........

现在，我可以通过用 CFStringCreateWithCString 替换对 CFSTR 的任何调用来轻松避免上述所有问题，我确信没有内存泄漏（至少只要我记得调用 CFRelease），但我想知道为什么如果每次调用此函数都将字符串存储在内存中，那么大量代码示例显示了对 CFSTR 的大量使用，只有在程序终止时才可以释放该字符串。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:40:15.480

我想你的问题也在[这里得到了回答。](https://stackoverflow.com/questions/9263842/cfstr-memory-management)如果要创建大量唯一字符串，则应使用`CFStringCreateWithCString`and `CFRelease`。另一方面，如果唯一字符串的数量很少（比如 100 左右），则使用`CFSTR`.

# eclipse - Egit ssh 问题

> ID：10263287
> 
> 赞同：7
> 
> 时间：2012-04-21T21:47:05.153
> 
> 标签：eclipse, git, github, egit

我一直试图让 gitHub 和 Egit 合作，但没有成功。我安装了 github 的软件包并以这种方式制作了一个 SSH 密钥，但 Egit 没有提示我输入密码，它给了我这个错误：

```
Cannot get remote repository refs.
Reason: ssh://git@github.com:22: passphrase for C:\Documents and Settings\User\.ssh\id_rsa 
```

我在推送菜单中有这些设置：

```
URI: ssh://git@github.com/YoungMaker/<projectName>.git
host: github.com
Repository path: /YoungMaker/<projectName>.git
protocol: SSH
port <BLANK>
User: git
password <blank> 
```

我还尝试了 GIT_SSH 环境变量，并将其设置为 C:\Documents and Settings\User.ssh，以及 plink.exe（我不知道那是什么（显然是一些 .exe））

尝试从 gitHub GUI 推送后，出现此错误。这很奇怪，因为我有 C:\Documents and Settings\User.ssh 目录，其中包含一个配置文件和一个 id_rsa 键。

```
Pushing to git@github.com:YoungMaker/GitTester.git
error: cannot spawn C:\Documents and Settings\User\.ssh: No such file or directory
fatal: unable to fork 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-01T20:55:39.530

Old question, but for future reference:

Make sure you did **setup a push remote**. It worked for me when I got both the *Cannot get remote repository refs*-problems ("... Passphrase for..." and "Auth fail" in the "Push..." dialog).

Provided that you already:

1.  Setup your SSH keys with Github (Window > Preferences > General > Network Connections > SSH2)

2.  Setup your local repository (you can follow [this guide](http://wiki.eclipse.org/EGit/User_Guide) for that)

3.  Created a Github repository ([same guide](http://wiki.eclipse.org/EGit/User_Guide#Github_Tutorial))

... here's how you do it:

*   Go to the **Git Repositories view** (Window > Show View > Other > Git Repositories)
*   Expand your Repository and **right click Remotes** --> **"Create Remote"**
*   "Remote Name": origin, "Configure push": checked --> **click "OK"**
*   Click the **"Change..."** button
*   **Paste your git URI** and select protocol **ssh** --> **click "Finish"**
*   Now, **click "Save and Push"** and NOW you should get a password prompt --> **enter the public key passphrase** here (provided that you DID (and you should) setup a passphrase to your public key) --> **click "OK"**
*   Now you should get a confirmation window saying "Pushed to *YourRepository* - origin" --> **click "OK"**
*   **[Push to upstream](http://wiki.eclipse.org/EGit/User_Guide#Push_Upstream)**, but this time **use "Configured remote repository"** as your Destination Git repository
*   Go get yourself a well earned cup of coffee!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T01:01:36.050

如果您创建了一个受其保护的私钥，则需要该密码，如“ [GitHub：SSH 密钥密码](http://help.github.com/ssh-key-passphrases/)”中所述。
但这意味着您需要一个 SSH 代理来为您提供该密码。

如果 Egit 在推送时没有提示输入，这可能意味着：

*   您的 SSH 密钥未受密码保护
*   您的 SSH 密钥无法以某种方式访问​​（路径错误，或该路径上的保护错误）

另请参阅[Vogella 的教程](http://www.vogella.com/articles/EGit/article.html#github_push)：

![egit ssh uri](../Images/11b02d3e33c9f695ff61ba95ae9eb7d7.png)

# css - 浮动元素，全宽

> ID：10263293
> 
> 赞同：0
> 
> 时间：2012-04-21T21:47:37.030
> 
> 标签：css, css-float

我有一个固定大小的布局，我将内容容器居中。

我希望菜单（主页、关于、联系人、登录）覆盖 100% 的屏幕。

看看这个jsfiddle：http: [//jsfiddle.net/Hxhc5/1/](http://jsfiddle.net/Hxhc5/1/)

![在此处输入图像描述](../Images/56c06e4e570bbbd6db5bc28d89b8d6f0.png)

我想要的结果是这样的： ![在此处输入图像描述](../Images/f071c7733518223cba570fa49b92dc5c.png)

我尝试用菜单制作一个 100% 宽度的容器，我会在里面有一个容器来使菜单居中，但效果不佳，因为布局是相对的，随窗口大小而变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T21:55:07.407

在菜单周围包裹一个额外的 div，给它灰色背景，删除额外的填充，使菜单背景为白色：

[http://jsfiddle.net/sg3s/Hxhc5/3/](http://jsfiddle.net/sg3s/Hxhc5/3/)

但是，当我们想要保持菜单和正确的 col 'open' 之间的空间时，这是有问题的。

最简单也可能是最好的方法是制作一个中间“打开”的模拟图像并将其用作背景。由于这种类型的 png 图像非常小，它比更多的标记、css 或 js 解决方案要好，而且如果使用得当，它也没有怪癖：

[http://jsfiddle.net/sg3s/Hxhc5/10/](http://jsfiddle.net/sg3s/Hxhc5/10/)

您还展示了您的实际开发站点；如果您想为菜单实现此功能，则必须使菜单固定高度（其他所有内容及其宽度仍然可以是流动的），因为您在图层中使用的不透明度类型。可以使用相同的背景技巧来使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T21:52:35.870

为什么不使用跨越整个页面的背景图像呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T21:52:59.867

只需将菜单的内容添加到另一个 div 中，`width: 500px, margin: auto;`并将菜单宽度设置为 100%。这里更新了 jsFiddle：http: [//jsfiddle.net/Hxhc5/2/](http://jsfiddle.net/Hxhc5/2/)

# button - 将类悬停状态导入 .LESS 中的其他类

> ID：10263296
> 
> 赞同：3
> 
> 时间：2012-04-21T21:47:54.373
> 
> 标签：button, twitter-bootstrap, less

只是在我的项目中学习 .less 并使用 twitters bootstrap。

如果我想要一个绿色按钮来提交表单，我必须写：

```
<input type="submit" value="submit" class="btn btn-success" /> 
```

但我将能够跳过输入标签中的类属性。

我不会更改 twitter 引导文件。我将在我的 default.less 文件中重载它们，如下所示：

```
button, input[type="submit"]{ .btn; .btn-success; } 
```

但是然后我没有获得按钮的悬停状态和活动状态，如果我尝试像这样，我会得到错误：

```
button, input[type="submit"]{/* previus code... */ &:hover{ .btn:hover; }} 
```

你可能会注意到我试图完成的事情。我知道我可以在 jquery 或 javascript 中执行此操作，但我将能够在我的 .less-file 中执行此操作，而无需触及原始 bootsrap 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:24:58.793

如果不修改 Bootstrap CSS，我不确定这是否可行。

你能修改引导 CSS 吗？如果是这样，您可以添加一个`.btn-hover`类`.btn:hover`，然后在`button, input[type="submit"]`：

```
&:hover {
    .btn-hover;
    .btn-success-hover;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T21:00:23.317

.btn 和 .btn-success 是类。这些类在buttons.less 中定义。他们从 mixins.less 调用 mixin，称为 .buttonBackground。你可以为你的按钮调用这个 mixin：

```
button, input[type="submit"]{
     .buttonBackground(@startColor,@endColor);
} 
```

@startColor 和@endColor 用于按钮渐变，悬停状态使用@endColor。或者您可以将 variables.less (btnInfoBackgroundHighlight) 中的颜色更改为您自己的颜色。或者你可以使用

```
.btn-success{
      &:hover{
           background-color: @yourOwnColor;
      }
} 
```

# java - 检查下一个字符串标记器是否为空

> ID：10263298
> 
> 赞同：1
> 
> 时间：2012-04-21T21:48:18.657
> 
> 标签：java, string, stringtokenizer

我遇到了问题，我正在使用一个包含超过一百万行数字的文本文件。数据格式如下，有些行有 3 条数据，而另一些只有 2 条数据。每次文件获取只有 2 位的数据时，似乎都会抛出空错误（我正在使用 Try/catch读取输入流）

如果我删除值 3 标记器，那么程序将运行到最后。我是否需要添加一个 if 语句来检查第二行之后是否还有另一个标记？如果是这样 - 怎么样？

```
 while ((getLine = br.readLine()) != null)   {
              StringTokenizer tokenizer = new StringTokenizer(getLine);
              String Value1 = tokenizer.nextToken();
              String Value2 = tokenizer.nextToken();
              String Value3 = tokenizer.nextToken();
            //Does some more things
            } 
```

数据

```
 11      22      33
    44      55      
    77      88      99
    10      11
    13      14
    16      17      18 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T21:53:45.003

您必须检查标记器中是否仍有标记。你可以这样做：

```
String Value3 = tokenizer.hasMoreTokens() ? tokenizer.nextToken() : null; 
```

如果没有第三个令牌，它将设置`Value3`为。`null`您可能希望将其设置为空字符串。

另一种方法是使用`getLine.split("\\s+")`，它将返回一个标记数组。如果只有 2 个值，则数组的长度为 2。因此，尝试读取可能不存在的第三个值时要小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T21:52:43.483

如果您尝试`nextToken`第三次调用，则当不存在令牌时，它会返回 null。更好的做法是使用`String.split`，您可以在其中检查令牌的数量。`StringTokenizer`无论如何都是遗产。

```
String[] tokens = getLine.split("\\s+"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T21:58:43.977

那么，如何使用这样的 try catch 块..？

```
String Value1 = null, Value2 = null, Value3 = null;

try {
    Value1 = null;
    Value2 = null;
    Value3 = null;

    Value1 = tokenizer.nextToken();
    Value2 = tokenizer.nextToken();
    Value3 = tokenizer.nextToken();
} catch (NoSuchElementException nse) {
    // Do Nothing. Just continue..
}
// Does some more things

System.out.println(Value1 + Value2 + Value3); 
```

如果根本没有读取任何标记，您将拥有一个空的“值”。

# ruby-on-rails - 在 rails 中找不到 pg_dump

> ID：10263299
> 
> 赞同：1
> 
> 时间：2012-04-21T21:48:27.153
> 
> 标签：ruby-on-rails, postgresql

我安装了 postgres，但是当我尝试在 rails 项目中转储我的数据库模式（sql）时，我不断在控制台中收到此错误消息**pg_dump not found in rails**。任何人都可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T19:00:51.987

你可以这样想办法：

```
find / -name pg_dump
dirname ${OUTPUT_FROM_ABOVE_COMMAND}

PATH=${PATH}:/path/to/dir/from/above/dirname/call; export PATH 
```

你应该很高兴。

# javascript - Jquery - 等到一个动作完成直到下一个动作完成？

> ID：10263309
> 
> 赞同：0
> 
> 时间：2012-04-21T21:50:04.193
> 
> 标签：javascript, jquery

希望你一切都好......另一个问题：/

这是我正在处理的页面：

[http://beelinetest.site50.net/uw_virtual_tour.html#](http://beelinetest.site50.net/uw_virtual_tour.html#)

这不是一个大问题，但如果你快速按下标签 - 两个会弹出 - 我该怎么办？所以它等待第一个选项卡完成移动？

另外，当我在这里时，注意到我添加到选项卡中的轻微悬停在移动上吗？当悬停在上方时，它们向上移动 7px，然后在未悬停时向下移动。但是当点击标签时，它仍然认为我的鼠标处于悬停状态......直到我移动鼠标，直到它向下移动 7px......

在此先感谢，汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T21:57:21.187

每个选项卡的单击处理程序应禁用其他选项卡上的单击，直到“滑入”功能完成。查看您的代码，如果您有一个通用选择器而不是通过 id 选择每个单独的选择器，则可能更容易完成。也许您可以为每个要用作选项卡的 div 添加一个类，然后您可以将它们作为一个组进行操作。

# php - php - include_once 似乎将所需的页面打印到 html 中

> ID：10263312
> 
> 赞同：2
> 
> 时间：2012-04-21T21:50:26.773
> 
> 标签：php, html, include

我的问题是我尝试包含一个类，`include_once();`但不是包含所需的文件，而是将文件中的代码直接打印到源 html 中，以便代码出现在我的网页上。

这是代码：

```
<?
include_once('php/class.loadClients.php');
$client = new loadClient();
$client->connect();
?> 
```

我不确定它为什么这样做，因为我`include_once();`在此页面的其他地方使用过它并且它工作正常：

```
include_once('php/class.register.php'); 
```

* * *

**提前致谢！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T21:51:30.107

打开`php/class.loadClients.php`，并添加`<?`到它的开头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-15T15:16:47.980

添加到 Paulpro 的答案：如果他的解决方案不起作用，您的服务器可能没有启用短标签（`<?`vs `<?php`）。使用完整的`<?php`标签。

# vhdl - 警告“没有负载”，但我不明白为什么

> ID：10263316
> 
> 赞同：0
> 
> 时间：2012-04-21T21:51:08.083
> 
> 标签：vhdl, fpga, lattice-diamond

对于任何 uart 的每个实例（当前为 11 个），我都从 Lattice Diamond 收到了这些警告

```
WARNING - ngdbuild: logical net 'UartGenerator_0_Uart_i/Uart/rxCounter_cry_14' has no load
WARNING - ngdbuild: logical net 'UartGenerator_0_Uart_i/Uart/rxCounter_cry_0_COUT1_9_14' has no load
WARNING - ngdbuild: logical net 'UartGenerator_0_Uart_i/Uart/rxCounter_cry_12' has no load
WARNING - ngdbuild: logical net 'UartGenerator_0_Uart_i/Uart/rxCounter_cry_10' has no load
WARNING - ngdbuild: logical net 'UartGenerator_0_Uart_i/Uart/rxCounter_cry_8' has no load
WARNING - ngdbuild: logical net 'UartGenerator_0_Uart_i/Uart/rxCounter_cry_6' has no load
WARNING - ngdbuild: logical net 'UartGenerator_0_Uart_i/Uart/rxCounter_cry_4' has no load
WARNING - ngdbuild: logical net 'UartGenerator_0_Uart_i/Uart/rxCounter_cry_2' has no load
WARNING - ngdbuild: logical net 'UartGenerator_0_Uart_i/Uart/rxCounter_cry_0' has no load 
```

VHDL代码是

```
entity UART is 
    generic (
        dividerCounterBits: integer := 16
    );
    port (
        Clk         : in  std_logic;                        -- Clock signal
        Reset       : in  std_logic;                        -- Reset input
        ClockDivider: in  std_logic_vector(15 downto 0);

        ParityMode  : in std_logic_vector(1 downto 0);      -- b00=No, b01=Even, b10=Odd, b11=UserBit
    [...]

architecture Behaviour of UART is
    constant oversampleExponent : integer := 4;

    subtype TxCounterType is integer range 0 to (2**(dividerCounterBits+oversampleExponent))-1;
    subtype RxCounterType is integer range 0 to (2**dividerCounterBits)-1;
    signal rxCounter: RxCounterType;
    signal txCounter: TxCounterType;
    signal rxClockEn: std_logic; -- clock enable signal for receiver
    signal txClockEn: std_logic; -- clock enable signal for transmitter
begin
    rxClockdivider:process (Clk, Reset)
    begin
        if Reset='1' then
        rxCounter <= 0;
        rxClockEn <= '0';
    elsif Rising_Edge(Clk) then
        -- RX counter (oversampled)
        if rxCounter = 0 then
            rxClockEn <= '1';
            rxCounter <= to_integer(unsigned(ClockDivider));
        else
            rxClockEn <= '0';
            rxCounter <= rxCounter - 1;
        end if;
    end if;
    end process;

    txClockDivider: process (Clk, Reset)
    [...]

    rx: entity work.RxUnit
    generic map (oversampleFactor=>2**oversampleExponent)
    port map (Clk=>Clk, Reset=>Reset, ClockEnable=>rxClockEn, ParityMode=>ParityMode,
            ReadA=>ReadA, DataO=>DataO, RxD=>RxD, RxAv=>RxAv, ParityBit=>ParityBit,
            debugout=>debugout
             );

end Behaviour; 
```

这是一个单一的 uart，要创建它们（目前是 11 个 uart）我用这个

```
-- UARTs

    UartGenerator: For i IN 0 to uarts-1 generate
    begin
        Uart_i : entity work.UartBusInterface 
            port map (Clk=>r_qclk, Reset=>r_reset, 
                cs=>uartChipSelect(i), nWriteStrobe=>wr_strobe, nReadStrobe=>rd_strobe,
                address=>AdrBus(1 downto 0), Databus=>DataBus,
                TxD=>TxD_PAD_O(i), RxD=>RxD_PAD_I(i),
                txInterrupt=>TxIRQ(i), rxInterrupt=>RxIRQ(i), debugout=>rxdebug(i));

        uartChipSelect(i) <= '1' when to_integer(unsigned(adrbus(5 downto 2)))=i+4 and r_cs0='0' else '0';
    end generate; 
```

我可以合成它并且UART工作，但为什么我收到警告？

恕我直言，rxCounter 应该使用每个可能的值，但是为什么每一秒都会产生警告**“没有负载”**？

我在某处读到这意味着这些网络没有被使用并且将被移除。
但是要从 0 数到 2^n-1，我需要不少于 n 位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T15:36:25.070

这个警告意味着没有人在“听”这些网络。

可以在合成中去除信号。警告不是错误！你只需要了解它们。

我们无法从您的部分代码中评估正在发生的事情。

*   是否有一个名为 的信号`rxCounter_cry`？
*   的数据类型是`ClockDivider`什么？
*   的价值是`dividerCounterBits`多少？
*   在另一个过程中会发生什么？如果不相关，请尝试在没有该过程的情况下运行您的综合。如果它*是*相关的，我们需要看到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T10:44:59.013

Lattice`ngdbuild`对于它正在做的工作特别垃圾邮件，我通过我的 makefile 中的 grep 管道 ngdbuild 输出以准确删除这些消息：

```
ngdbuild ... | grep -v "ngdbuild: logical net '.*' has no load" 
```

否则，其中有 2500 多个，消除它们有助于专注于实际问题。

第二个最糟糕的工具链垃圾邮件发送者`edif2ngd`抱怨它没有明确处理的 Verilog 参数。这是一条两行消息（其中超过 300 条），因此我将其删除：

```
edif2ngd ... | sed '/Unsupported property/{N;d;}' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-06T19:51:29.390

请注意，有时它会使用加法器来实现。最高位不会使用该加法器的进位输出，最低位不会使用符号输入。因此，您会收到如下警告：

警告 - 综合：逻辑网络 'clock_chain/dcmachine/count_171_add_4_1/S0' 没有负载 警告 - 综合：逻辑网络 'clock_chain/dcmachine/count_171_add_4_19/CO' 没有负载

没问题，第 19 位是最高的，所以它不会在任何地方进位，而第 1 位是最低的，所以它不会从任何地方得到符号位。但是，如果您在最高和最低之间的任何位上收到此警告，这通常意味着有问题，但不是错误，因此它会在您测试时构建“有效”的东西，但不会出错案子。如果您使用错误情况对其进行模拟，通常会显示出不希望的结果。

# sql - 将行折叠成一列

> ID：10263321
> 
> 赞同：3
> 
> 时间：2012-04-21T21:51:31.793
> 
> 标签：sql, postgresql, pivot, crosstab

我有一个具有以下布局的表格：

```
 ID   Label   Value
 --   -----   -----
 1    Lab1    Value1-1
 1    Lab2    Value1-2
 1    Lab3    Value1-3
 1    Lab4    Value1-4
 1    Lab5    Value1-5
 1    Lab6    Value1-6
 2    Lab1    Value2-1
 2    Lab2    Value2-2
 2    Lab3    Value2-3
 2    Lab4    Value2-4
 2    Lab5    Value2-5
 2    Lab6    Value2-6
 ... 
```

我想将表格转换为如下布局：

```
 ID   Lab1      Lab2       Lab3       Lab4       Lab5       Lab6
 1    Value1-1  Value1-2   Value1-3   Value1-4   Value1-5   Value1-6
 2    Value2-1  Value2-2   Value2-3   Value2-4   Value2-5   Value2-6
 ... 
```

我在 PostgreSQL 中使用 SQL。有没有一种简单（且内存高效）的方法来做到这一点？我看过一些提到使用枢轴的帖子，但我不确定这是否可行，而且我看到的描述似乎是针对 Oracle 的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T22:37:24.187

首先安装扩展[tablefunc](http://www.postgresql.org/docs/current/interactive/tablefunc.html)，如果你还没有。每个数据库需要执行一次。

```
CREATE EXTENSION tablefunc; 
```

您需要 PostgreSQL **9.1**用于`CREATE EXTENSION`. 在旧版本中，您必须使用以下命令从 shell 运行安装脚本：

```
psql -d dbname -f SHAREDIR/contrib/tablefunc.sql 
```

[详细手册中有关 Postgres 9.0 的](http://www.postgresql.org/docs/9.0/interactive/contrib.html)更多信息。

然后你可以使用这样的查询：

```
SELECT *
FROM   crosstab (
    'SELECT id
           ,label
           ,value
     FROM   t
     ORDER  BY 1, 2',

    'SELECT DISTINCT label
     FROM   t
     ORDER  BY 1')
AS tbl (
 id   int
,lab1 text
,lab2 text
,lab3 text
,lab4 text
,lab5 text
,lab6 text
); 
```

准确返回您要求的内容。
您也可以为此创建一个函数。我在这个[密切相关的答案](https://stackoverflow.com/a/9592419/939860)中添加了更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T22:22:03.807

如果您的 SQL 实现缺少转置/交叉表功能，您还可以通过以下方式展开/非规范化 EAV：

```
SET search_path='tnp';

-- create some data ...
CREATE TABLE value
        ( id INTEGER NOT NULL
        , attribute varchar
        , value varchar
        , PRIMARY KEY (id,attribute)
        );
INSERT INTO value(id,attribute,value) VALUES
 (1    ,'Lab1', 'Value1-1' )
 , (1    ,'Lab2', 'Value1-2' )
 , (1    ,'Lab3', 'Value1-3' )
 , (1    ,'Lab4', 'Value1-4' )
 , (1    ,'Lab5', 'Value1-5' )
 , (1    ,'Lab6', 'Value1-6' )
 , (2    ,'Lab1', 'Value2-1' )
 , (2    ,'Lab2', 'Value2-2' )
 , (2    ,'Lab3', 'Value2-3' )
 , (2    ,'Lab4', 'Value2-4' )
 , (2    ,'Lab5', 'Value2-5' )
 , (2    ,'Lab6', 'Value2-6' )
        ;

SELECT v.id
        , l1.value AS lab1
        , l2.value AS lab2
        , l3.value AS lab3
        , l4.value AS lab4
        , l5.value AS lab5
        , l6.value AS lab6
FROM value v
LEFT JOIN value l1 ON l1.id = v.id AND l1.attribute = 'Lab1'
LEFT JOIN value l2 ON l2.id = v.id AND l2.attribute = 'Lab2'
LEFT JOIN value l3 ON l3.id = v.id AND l3.attribute = 'Lab3'
LEFT JOIN value l4 ON l4.id = v.id AND l4.attribute = 'Lab4'
LEFT JOIN value l5 ON l5.id = v.id AND l5.attribute = 'Lab5'
LEFT JOIN value l6 ON l6.id = v.id AND l6.attribute = 'Lab6'
        ; 
```

我同意：这不是很优雅。但它有效。

# sockets - 网络游戏 - 作为一个单独的应用程序工作，但从另一个应用程序启动时挂起

> ID：10263325
> 
> 赞同：2
> 
> 时间：2012-04-21T21:51:50.143
> 
> 标签：sockets, main, freeze

我有一个简单的网络象棋游戏，当我将它作为一个单独的应用程序启动时它运行良好。但是当我从另一个应用程序的按钮启动它时，当国际象棋服务器的客户端尝试连接到国际象棋服务器时，游戏会挂起。当在 main(...) 方法中创建 ChessStart 对象时，程序似乎可以工作。但是当它在 actionPerformed() 中进行时，会发生一些事情。

这是从按钮启动的方式

```
 chessButton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            EventQueue.invokeLater(new Runnable() {
                public void run() {
                    try {
                        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());    
                        ChessStart frame = new ChessStart();
                        frame.setVisible(true);
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                }
            });
        }
    }); 
```

这是作为一个单独的应用程序启动的类（我使用与上面完全相同的代码，但这里是在 main 方法中。

```
public class ChessStart extends JFrame implements Runnable {

  private static final long serialVersionUID = 7926472295620076147L;

private JPanel contentPane;
static Socket s;
  ObjectOutputStream oops;
  ObjectInputStream oips;
  ChessGameDemo1 chess;
  Thread tred, serThread;
  boolean title;
  private JTextField serversIPField;
  ServerSocket serSocket;

/**
 * Launch the application.
 */
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());    
                ChessStart frame = new ChessStart();
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

/**
 * Create the frame.
 */
public ChessStart() {
    addWindowListener(new WindowAdapter() {
        @Override
        public void windowClosing(WindowEvent arg0) {
            try {
                oops.close();
                oips.close();
                s.close();
                serSocket.close();
                System.exit(0);
            } catch (Exception e) {System.exit(1);}
        }
    });

     chess=new ChessGameDemo1();    
     chess.setTitle("Click one of the buttons!");    
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setTitle(" NikiFin Chess");
    setBounds(100, 100, 497, 196);
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    setContentPane(contentPane);
    contentPane.setLayout(null);    
    tred=new Thread(this);

    JButton startServerButton = new JButton("Start server");
    startServerButton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {

              chess.setTitle("Waiting for connection....");             
              title=true;
                  try { 

                      serThread=new Thread(new ServerThread(chess, tred));
                      serThread.start();                  
                  } catch (Exception e) {
                      JOptionPane.showMessageDialog(null, "Exception from accept socket: " + e); 
                      System.exit(1);
                  }
        }
    });
    startServerButton.setBackground(SystemColor.menu);
    startServerButton.setForeground(Color.BLACK);
    startServerButton.setFont(new Font("Tahoma", Font.PLAIN, 12));
    startServerButton.setBounds(10, 5, 143, 29);
    contentPane.add(startServerButton);

    JButton connectToServerButton = new JButton("Connect to server");

    connectToServerButton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            try {
                title=true;
                String ip1=serversIPField.getText();
                String ip=removeIntervals(ip1);
                s = new Socket(ip,7777);
                ChessGameDemo1.color="black";
                oips = new ObjectInputStream(s.getInputStream());
                chess.myFigures = ((ArrayList<Figure>)oips.readObject()); 
                chess.changePosition();
                chess.repaint();
                oops = new ObjectOutputStream(s.getOutputStream());
                oops.writeObject(chess.myFigures);    
                chess.setTitle("The other part's turn");

            } catch (Exception ex) {
                JOptionPane.showMessageDialog(null, "Exception from connect to server socket: " + ex); 
                System.exit(1);
            }
                chess.ready=true;
                dispose();
                tred.start();

        }
    });

    connectToServerButton.setFont(new Font("Tahoma", Font.PLAIN, 12));
    connectToServerButton.setBounds(10, 40, 143, 29);
    contentPane.add(connectToServerButton);

    serversIPField = new JTextField();
    serversIPField.setBounds(360, 43, 113, 24);
    contentPane.add(serversIPField);
    serversIPField.setColumns(10);

    JLabel lblNewLabel = new JLabel("To join a game, play black.    Server IP:");
    lblNewLabel.setBounds(161, 45, 195, 21);
    contentPane.add(lblNewLabel);

    JLabel lblNewLabel_1 = new JLabel("To start a new game wainting for a partner, play white.");
    lblNewLabel_1.setBounds(161, 8, 310, 22);
    contentPane.add(lblNewLabel_1);

    JTextArea txtrToPlayThe = new JTextArea();
    txtrToPlayThe.setFont(new Font("Tahoma", Font.PLAIN, 13));
    txtrToPlayThe.setText("To play the server must be started first. The other part must know the server's \r\nIP address. To get it can be used the button Whois. Mark the name of the \r\nuser started the  server and klick Whois button. This will give you the server's \r\nIP address. Enter it in the blank field and click Connect to server. Have fun!");
    txtrToPlayThe.setBackground(SystemColor.control);
    txtrToPlayThe.setBounds(5, 80, 475, 69);
    contentPane.add(txtrToPlayThe);

    BufferedImage img = null;
    try {
    img = ImageIO.read(getClass().getResource("/chess.png"));
} catch (Exception e) {
    e.printStackTrace();
     try {
         e.printStackTrace();
        } catch (Exception ex) {}
    }
setIconImage(img);

}
public void run() {
    while(true) {
        try {
            oips = new ObjectInputStream(s.getInputStream());
            chess.myFigures = ((ArrayList<Figure>)oips.readObject());    
            chess.changePosition();
            chess.setTitle("Now is your turn!");
            chess.ready = true;
            if(title)   {
                chess.setTitle("Ready!"); 
                title=false; 
            } 

            chess.repaint();

        } catch (Exception ex) {                
            JOptionPane.showMessageDialog(null, "Exception in input stream: " + ex);
            ex.printStackTrace();
            System.exit(1);
        }

      try {

           while (chess.ready) 
               Thread.sleep(100); 

        oops = new ObjectOutputStream(s.getOutputStream());

        oops.writeObject(chess.myFigures);    
        chess.setTitle("The other part's turn");

        } catch (Exception ex) {                
            JOptionPane.showMessageDialog(null, "Exception in output stream: " + ex);
            System.exit(1);
        }
    }         
} 
```

这是套接字线程

```
public class ServerThread implements Runnable {

ChessGameDemo1 chess;
ServerSocket serSocket;
Socket s;
Thread tread;
ObjectOutputStream oops;
ObjectInputStream oips;

public ServerThread(ChessGameDemo1 ches, Thread tred) {
    chess=ches;
    tread=tred;
}

public void run() { 
    try {   
      serSocket=new ServerSocket(7777);
      ChessStart.s = serSocket.accept();        
      ChessGameDemo1.color="white";
      chess.setTitle("White to play!");  
      oops = new ObjectOutputStream(ChessStart.s.getOutputStream());
      oops.writeObject(chess.myFigures);
      tread.start();    
    } catch (Exception e) {
         e.printStackTrace();
         System.exit(1);
    }

} 
```

}

问题是否可能来自

静态套接字；

如果是的话，我该如何解决最无痛的问题？

在主要方法和另一种方法中制作对象有什么区别吗？

# php - 带有RSA算法的PHP登录系统

> ID：10263326
> 
> 赞同：3
> 
> 时间：2012-04-21T21:51:57.770
> 
> 标签：php, security, login

目前我正在将我的登录系统与 RSA 类（在 PHP 中实现 RSA 算法的类）连接起来。我已经阅读了一些关于这个算法的信息，虽然我对它有一些疑问，希望有人能澄清它们。

RSA 在两个密钥上运行 - 公钥和私钥，两者都是使用算法生成的。这些密钥是否只生成一次，然后包含在站点代码中（一个在管理员站点上，一个在用户站点上）？

实现它的主要思想是将带有登录表单的 login.php 放到网站上，将其转换为公钥代码，并在发送登录名和密码进行验证时使用公钥对其进行加密。在服务器端，此消息将使用私钥解密并检查信息是否正确并发回真/假信息。你能告诉我它是否安全和正确使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T22:18:12.677

只需使用`HTTPS`而不是在这些算法的实现中迷失方向。我敢打赌，Javascript 实现将意味着客户端的大量开销。当你想加密你的口袋时，让传输层或应用层 (HTTPS) 来做——它已经过测试，速度很快，它正在工作，设置需要几分钟。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T22:21:20.413

请不要实现这一点 - 改用 HTTPS。你提出的根本不安全。如果您在客户端使用 JavaScript 对其进行加密，表单数据将不安全。JavaScript 不适合加密。

基本规则是在客户端执行的任何操作都是恶意的。在客户端上运行加密是一个非常糟糕的主意。

再次 - 使用 HTTPS 或不这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T22:11:57.043

如果您希望传输安全，则不能使用服务器端脚本语言。当明文密码到达服务器时，加密和解密将首先发生，给监听器很好的拦截时间。您可以使用 RSA 的 javascript 实现在客户端加密密码，然后在服务器端使用 php 对其进行解密。

您将拥有用于加密的公钥和用于解密的服务器上的私钥。

# php - 访问来自不同 php 块的变量

> ID：10263331
> 
> 赞同：0
> 
> 时间：2012-04-21T21:52:24.370
> 
> 标签：php, html, variables

我需要从 php 文件中编写一大块 html。为此，我将关闭一个初始 php 块（使用'?>'），然后编写 html，然后是新的 php 块。

我需要从第二个 php 块中的第一个 php 块访问变量。

谁能解释最有效的方法来做到这一点？

现在，当我在第二个块中引用在第一个块中分配有非零值的变量时，我只得到一个返回值 0。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T21:55:23.157

您应该研究类似 MVC 开发模式的东西。

最简单的方法不是在许多块中输出所有内容，而是附加到最后回显的某个变量。

```
// code block
$html .= '<strong>Some html</strong>';

// other code block
$html .= '...';

// Other code

// At last, at the end
echo $html; 
```

# android - java.lang.ClassCastException：org.postgresql.util.PGobject

> ID：10263336
> 
> 赞同：0
> 
> 时间：2012-04-21T21:52:52.050
> 
> 标签：android, postgresql-9.1

先上代码：

```
PGpoint coordinates = (PGpoint) rs.getObject(4); 
```

导致 ClassCastException。

在项目中引用 postgresql-9.1-901.jdbc3.jar。

返回 Android 应用程序上的记录集。有什么办法可以规避这个？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T05:34:28.117

[这看起来与问题org.postgresql.util.PGobject cannot be cast to org.postgis.PGgeometry](https://stackoverflow.com/questions/3698622/org-postgresql-util-pgobject-cannot-be-cast-to-org-postgis-pggeometry)非常相似。下面引用的那里提供的答案提到 postgis.jar 没有安装属性。这可能也适用于您的情况吗？*你是*如何安装postgis的？

> 如果在 web 容器中使用 Hibernate Spatial，并且容器通过 JNDI 提供 JDBC，那么 postgis.jar 也应该与 JDBC 驱动程序一起安装，并且不应包含在 WEB-INF/lib 目录中

# android - 如何在 Linux 上使用 x86 Android 模拟器？

> ID：10263340
> 
> 赞同：6
> 
> 时间：2012-04-21T21:53:39.277
> 
> 标签：android, android-emulator, android-sdk-2.3, android-sdk-tools

最新的 Android sdk 有一个 x86 模拟器，它应该有助于提高性能。如何为它创建图像？当我去制作一个新的 avd 时，我看到了 CPU/ABI 的下拉菜单，但它被设置为“ARM”并被禁用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T23:10:53.053

第 1 步：通过 SDK 管理器下载 Intel Atom x86 系统映像 - API 级别 10。

第 2 步：创建 AVD 时，选择 Intel Atom x86 System Image - API Level 10 作为目标。

目前，唯一的官方 x86 系统映像适用于 Android 2.3.3（又名 API 级别 10）。AOSP提供[了一个第三方构建的 Android 4.0.3 系统映像](http://blog.testobject.org/2012/04/giving-your-android-emulator-boost.html)，您也可以安装和使用它，尽管它是非官方的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T22:37:55.453

下载并安装英特尔凌动 x86 系统映像。如果需要，您可以使用最新版本。现在按照[http://developer.android.com/guide/developing/devices/emulator.html#accel-vm上的说明进行操作](http://developer.android.com/guide/developing/devices/emulator.html#accel-vm)

# php - 使用视图中的参数链接到控制器函数 (CodeIgniter)

> ID：10263341
> 
> 赞同：1
> 
> 时间：2012-04-21T21:53:40.937
> 
> 标签：php, asp.net-mvc, codeigniter

使用 CodeIgniter 我正在尝试创建一个链接，用户可以在视图中单击该链接以向他们显示我的数据库中记录的详细信息。

在带有 C# 的 ASP.NET MVC3 中，我会使用`@Html.ActionLink("Controller", "Action", new { id = item.Id})`

这是我的会话控制器 index() 函数

```
public function index()
{
        $data['sessions'] = $this->session_model->get_sessions();

        $this->load->view('_header');
        $this->load->view('session/index', $data);
        $this->load->view('_footer');
} 
```

这是它加载的索引视图，我希望能够单击链接转到 enter() 函数

```
<table>

<th>Session Name</th>
<th>Description</th>
<th>Host</th>
<th></th>

<?php foreach ($sessions as $session_item): ?>
    <tr>
        <td> <?php echo $session_item['sessionName'] ?> </td>
        <td> <?php echo $session_item['sessionDesc'] ?> </td>
        <td> <?php echo $session_item['adminName'] ?> </td>
        <td> <a id="enterSession" href=<?php echo site_url("session/enter" + $session_item['id']) ?> >Enter</a></td>

    </tr>
<?php endforeach ?> 
```

输入会话将我指向 URL“http://192.168.1.36/index.php/1”（如果我的项目的 id 是 1）而我期望“http://192.168.1.36/index.php/session /输入/1"

关于如何让它在会话控制器中调用 enter() 函数的任何想法（如下所示）

```
 public function enter($id) {

        $this->load->view('_header');
        $this->load->view('session/enter');
        $this->load->view('_footer');
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T22:15:28.150

您的 PHP 代码中的字符串连接似乎有错字。也许它可以使用：

```
site_url("session/enter" . $session_item['id']) 
```

...而不是`+`两个字符串之间的符号。

关于第二个问题 - 它看起来是正确的。是否未能调用`session`控制器的`enter()`函数传递`$id`作为参数（假设 URL 是正确的）？

# php - CakePHP 中的个人资料/用户页面

> ID：10263346
> 
> 赞同：0
> 
> 时间：2012-04-21T21:54:37.053
> 
> 标签：php, cakephp, social-networking

我正在使用 cakePHP 构建一个 webapp，一旦用户注册，他们将拥有自己的个人资料页面，其他成员可以看到。理想情况下，我想要一个不错的 url，例如 www.website.com/davejones，但我可以接受类似 www.website.com/uid=235325 的东西。

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T22:19:59.677

基本上，您只需`profile`向您添加一个`UsersController`将用户 ID/用户名作为参数的方法，然后只提供该页面。

```
class UsersController extends AppController {

    public function profile($uid) {
        $data = $this->User->findById($uid);
        $this->set(compact('data'));
    }

} 
```

将使该用户的所有数据（包括相关数据，如果您的模型设置正确）进入您可以从视图中调用的 $data 变量。用它做你想做的事。

# python - 需要帮助将这些 sql “翻译”成 django 模型

> ID：10263348
> 
> 赞同：-1
> 
> 时间：2012-04-21T21:55:04.043
> 
> 标签：python, google-app-engine, django-models

我对 gae 很陌生，我还没有找到一个易于遵循的例子。

这是我的sql：

```
CREATE TABLE Company
(
    name varchar(100),
    address varchar(100),
    lat double(20, 10),
    long double(20, 10),
    phone varchar(15),
    website varchar(50),
    email varchar(50),
    hiring boolean not null default 0 ,
    about_us varchar(500),
    approved boolean not null default 0
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T23:36:08.007

如果您只是问 django 模型应该是什么样子。然后我认为您想要这样的课程：

```
class Company(models.Model):
  name = models.CharField(max_length=100, null=True)
  address = models.CharField(max_length=100, null=True)
  lat = models.DecimalField(max_digits=20, decimal_places=10, null=True)
  long = models.DecimalField(max_digits=20, decimal_places=10, null=True)
  phone = models.CharField(max_length=15, null=True)
  website = models.UrlField(max_length=50, null=True)
  email = models.EmailField(max_length=50, null=True)
  hiring = models.BooleanField(default=False)
  about_us = models.CharField(max_length=500, null=True)
  approved = models.BooleanField(default=False) 
```

# ssl - 将数据发布到 HTTPS 页面

> ID：10263350
> 
> 赞同：0
> 
> 时间：2012-04-21T21:55:07.687
> 
> 标签：ssl, https, http-post

如果我在我的站点之外有一个页面，并且它发布到我站点上的 HTTPS 页面（设置了 SSL），服务器和客户端是否会在发布数据之前交换密钥然后加密数据，或者是否会发布数据以纯文本从客户端到服务器，然后获得加密密钥？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T22:08:20.273

数据将被加密。如需解释，请查看重复帖子中提供的答案。

# c# - 尝试将网格的高度/宽度绑定到 ViewModel

> ID：10263352
> 
> 赞同：0
> 
> 时间：2012-04-21T21:55:33.600
> 
> 标签：c#, wpf, xaml, data-binding

所以我在视图框中有一个网格。现在网格与视图框一起缩放。但是，我需要知道 ViewModel 中网格的高度和宽度。然而，它似乎并没有将高度设置为任何东西？

```
<Viewbox VerticalAlignment="Top" Margin="5,20,5,0">
            <Border BorderThickness="6" BorderBrush="Black" CornerRadius="2">

                <Grid MinHeight="300" MinWidth="400" Height="{Binding Height, Mode=TwoWay}" Width="{Binding Width, Mode=TwoWay}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Grid.Column="0" >
                    <ItemsControl ItemsSource="{Binding Viewers}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <Canvas />
                            </ItemsPanelTemplate>
                             </ItemsControl.ItemsPanel>
                             <ItemsControl.ItemContainerStyle>
                            <Style>
                                <Setter Property="Canvas.Left" Value="{Binding X}" />
                                <Setter Property="Canvas.Top" Value="{Binding Y}"/>
                            </Style>
                        </ItemsControl.ItemContainerStyle>
                    </ItemsControl>
                </Grid>
            </Border>
        </Viewbox> 
```

在我的 ViewModel 中：

```
 private int _height;
    public int Height
    {
        get
        {
            return _height;
        }

        set
        {
            _height = value;
            OnPropertyChanged("Height");
        }
    }

    private int _width;
    public int Width
    {
        get
        {
            return _width;
        }

        set
        {
            _width = value;
            OnPropertyChanged("Width");
        }
    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T22:27:36.757

您需要在/上进行`OneWayToSource`绑定，因为这些属性是只读的，到目前为止，我已经看到了任何好的解决方案，因为如果在只读依赖项属性上设置，WPF 会直接拒绝绑定。`ActualWidth``Height`

# python - .save() 什么时候创建一个对象？

> ID：10263354
> 
> 赞同：0
> 
> 时间：2012-04-21T21:56:12.223
> 
> 标签：python, database, django

我有代码：

```
name = MakesiteNameForm(datdict)
if name.is_valid:
    name.save()

datsite = Makesite.objects.get(sitename=request.POST['sitename'])
datsite.ref_id.add(RefID.objects.create(url=request.POST['url'],description=request.POST['description']))
datsite.save() 
```

所以我有这段代码，我想用它来创建和保存一些多元素项目，但是当我尝试使用这种方法时，就是这样`Makesite matching query does not exist`。我认为这意味着它没有保存，但后来我打电话`site = Makesite.objects.all()`，我可以清楚地看到查询字典中的值`request.POST['sitename']`。那么有没有更好的查询呢？或者我缺少关于 save() 的东西？

编辑：该表单将值站点名称值保存到 Makesite 表中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T22:32:26.687

save() 调用不创建对象，它只是将对象保存到数据库中，插入一个新行以防它是一个新对象，或者更新它。

首先， form.is_valid() 是一个方法，但你没有调用它，所以你总是试图保存名称。这可能与您的错误有关，也可能不相关，但无论如何它都是错误的，也许这就是查询错误的来源，而不是下面的 get() 调用。修复它，看看会发生什么。

# iphone - 在 UITableView 中添加新单元格“上方”现有单元格（而不是“下方”）

> ID：10263355
> 
> 赞同：0
> 
> 时间：2012-04-21T21:56:14.917
> 
> 标签：iphone, cocoa-touch

我是 iOS 编程的新手。这就是我想要做的：

1.  用户在屏幕上输入一些文本，它不断被添加到 UITableView。

2.  像往常一样，它是从顶部添加的。

3.  但我想从底部添加它，即添加的每条新消息都添加到其余/现有消息的上方，而不是下方。

有人可以提供一些指示吗？

谢谢普里亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T23:39:06.380

NSMutableArray 的 -addObject 方法将对象附加到数组的末尾。如果您想将其放在开头，请改用此方法：

```
[inputArray insertObject:userInput atIndex:0]; 
```

还有其他方法可以将对象放入数组中并移动它们。看一下文档：

[NSMutableArray 文档](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T22:02:15.027

你在使用 CoreData 吗？如果是这样，也许您可​​以设置创建时间并将其降序排序？

如果您不使用 CoreData 而是将数据存储在某种数组中，只需将新对象添加到数组的开头，然后重新加载数据。

```
[array insertObject:data atIndex:0]; 
```

# php - AJAX 返回，更新页面上的表格

> ID：10263362
> 
> 赞同：0
> 
> 时间：2012-04-21T21:56:55.050
> 
> 标签：php, javascript, jquery, ajax

我为数据库中的每条记录生成以下内容

```
$allbills = mysql_query("SELECT * FROM outgoings WHERE outgoings.user_id = '$uid'") or die(mysql_error()); 

        echo "<table>";
        while($info = mysql_fetch_array( $allbills )) 
         { 
         echo "<tr>"; 
         echo "<th>bill id:</th> <td>".$info['id'] . "</td> ";
         echo "<th>total:</th> <td>".$info['bill'] . "</td> ";
         echo "<th>bill name:</th> <td>".$info['bill_name'] . "</td> ";
         echo "<th>bill deposit:</th> <td>".$info['bill_description'] . "</td> "; 
         echo "<th>colour:</th> <td>".$info['bill_colour'] . " </td>"; 
         echo "<th>edit:</th> <td>

         <form class='bill-upd'>
             <input type='hidden' value='".$info['rand']."' name='rand2' id='rand2'>
             <input type='hidden' value='".$info['id']."' name='billid' id='billid'>
            Total <input type='text' id='total' name='total' /><br />
            Bill name<input type='text' id='bill-name' name='bill-name' /><br />
           bill descriptiion <input type='text' id='bill-description' name='bill-description' /><br />
            bill colour<input type='text' id='bill-colour' name='bill-colour' />
        <input type='button' value='submit' class='bill-upd-submit' />
        </form>   

         </td>"; 
         echo "</tr>";
         }
         echo "</table>"; 
```

这会使用 AJAX 更新我的用户在表中的记录

```
$(document).ready(function(){   
    $(".bill-upd-submit").click(function() {
        var elem = $(this);
        $.post('update_bill.php', elem.parent('.bill-upd').serialize(), function(data) {
            elem.append(data);
        });
    });
}); 
```

但是，一旦完成，用户需要刷新页面以查看结果，有没有办法可以在更新查询发生后使用最新数据填充用户编辑的表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T22:12:02.460

我会尝试不同的方法：

1）在按钮之后添加一个不可见的 div。您可以动态执行此操作：

```
$(document).ready(function() {
   $(".bill-upd-submit").after("<div style='display:none'></div>");
    // ...
}); 
```

2）现在您的发布事件如下：

```
 $(".bill-upd-submit").click(function() {
      var elem = $(this);
      $.post("update_bill.php", elem.parent(".bill-upd").serialize(), function(data) {
            elem.next("div").html(data);
      });
}); 
```

顺便说一句，我假设同一页面中还有其他按钮，这就是使用 class (bill-upd-submit) 而不是 id 的原因。如果只有一个按钮，则 id 更快。另外，我认为 bill-upd-submit 是按钮类型。如果是提交类型，我会将其更改为按钮或将以下内容添加到单击事件中：

```
function() {
    // ... the code shown above
    return false;
}); 
```

这将阻止表单的提交发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T22:41:11.123

在我看来，您当前的 javascript 正在尝试附加表单，而不是表格。如果您尝试在底部的表格中添加一行并保留所有其他行，那么这可能会起作用。在 html 标记中为您的表指定一个 ID（这里我使用“table_id”）：

```
 $(".bill-upd-submit").click(function() {
         $.post("update_bill.php", elem.parent(".bill-upd").serialize(), function(data){
         $("#table_id tr:last").after(data);             
         });
     }); 
```

并且只需确保您的 php 文件 (update_bill.php) 内置了适当的 html 来为您回显适当的 tr。

# java - 如何重新定位 Netbeans 的 %USERPROFILE%\.m2 目录？

> ID：10263364
> 
> 赞同：5
> 
> 时间：2012-04-21T21:57:06.793
> 
> 标签：java, maven, netbeans, directory

我可以`.netbeans`从我的用户目录中移动目录，但我找不到如何移动`.m2`目录。
更改 Netbeans 的用户主目录在 7.0.1 上工作，但现在我升级到 7.1.1，并且与以前相同的配置更改并没有削减它。

有什么特殊的方法可以移动`.m2`文件夹吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-26T15:54:21.213

C:\Program Files\NetBeans 7.1.1\java\maven\conf\settings.xml

Changed localRepository in this file and it finally worked. Can't tell you how frustrating this has been.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T09:45:45.567

考虑到[Maven 指南](http://maven.apache.org/guides/mini/guide-configuring-maven.html)指的是一切（设置，存储库，...），如“ `${user.home}/.../`”，这`user.home`是 Maven 的新方式。

```
MAVEN_OPTS=-Duser.home=/new/user/home 
```

如果由于某种原因无法在 NetBeans 7.1.1 中使用，临时解决方法是使用[联结 (Windows Xp)](http://technet.microsoft.com/en-us/sysinternals/bb896768.aspx)或[`mklink`（Windows Vista 或 7）](https://superuser.com/questions/124679/how-do-i-create-an-mklink-in-windows-7-home-premium-as-a-regular-user)将 .m2 目录重定向到另一个路径。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-23T10:32:58.697

我对这个主题的一点看法（NetBeans 版本 8.0.2）：

服务 -> Maven -> 本地 -> 属性 -> “本地存储库路径”

![带有设置的屏幕截图](../Images/ddd746744f6484ac513c5257c0299f92.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-17T19:44:33.387

只需在您的 Maven 主页的 setting.xml 文件中添加本地存储库浴，如果是 NetBeans，您需要在 java 文件夹中编辑 Netbeans 主文件夹

```
d:\netbeans-8.2\java\maven\conf\settings.xml

<localRepository>d:\moh\.m2\repository</localRepository> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-27T02:44:54.747

我在运行 Netbeans 时设置了正确的环境变量。重要的是变量**HOME**。

测试版本：Windows 10、Netbeans 8.1、Maven 3.3.9

```
set JAVA_HOME=X:\apps\jdk1.7.0_79
set HOME=X:\userhome
set MAVEN_OPTS=-Xms256m -Xmx512m
start X:\apps\netbeans\bin\netbeans64.exe -J-Djava.net.preferIPv4Stack=true -J-Duser.home="%HOME%" --userdir "%HOME%\nbsettings" --cachedir "%HOME%\nbcache" --jdkhome "%JAVA_HOME%" --locale en 
```

# multithreading - WindowFreeze VCL

> ID：10263374
> 
> 赞同：0
> 
> 时间：2012-04-21T21:58:16.443
> 
> 标签：multithreading, delphi, delphi-7, vcl, indy

我有一个大约有 10 个窗口的 Delphi7 项目。MainWindow 在程序启动时被加载。一段时间后，MainWindow 访问项目的另一个窗口以添加 listview 项目并大约每 1-2 秒更新它们。然而，这个窗口似乎冻结了，并且在我打开它之后根本不显示列表视图。

如果我在 MainWindow 的 OnShow 过程中有以下命令，它就可以工作：

```
SecondWindow.Show;
SecondWindow.Close; 
```

它可以正常工作，但似乎不专业。有什么想法可以在不显示的情况下绘制窗口吗？

编辑：代码（我使用 Indy9）

```
procedure TMainWindow.ServerSocketExecute(AThread: TIdPeerThread);
begin
 /....
 if Buffer = 'additem' then begin
    Window2.ListView1.Items.Add;
    Exit;
    // .....
 end;
end; 
```

而已。我删除了 Window2 上的所有计时器，它似乎仍然冻结。如果添加了项目，或者当我第一次尝试打开第二个窗口时，主窗口会立即冻结。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T23:22:38.950

您的问题是您正在从主 GUI 线程之外调用 VCL 方法，即在 TMainWindow.ServerSocketExecute 中。此事件在工作线程中执行。从工作线程调用 VCL/GUI 代码完全违反游戏规则。所有 VCL 代码都**必须**在主 GUI 线程中执行。

因此，通过确保所有 VCL/GUI 代码在 GUI 线程中执行来解决问题。使用 TIdPeerThread.Synchronize() 方法或 TIdSync 或 TIdNotify 类来实现此目的。

[感谢@Remy 提供了我不知道的细节。]

# javascript - 如何在 jQuery 的另一个元素中选择第三个与其他元素相同的元素？

> ID：10263377
> 
> 赞同：0
> 
> 时间：2012-04-21T21:58:57.517
> 
> 标签：javascript, jquery

我有这段代码，我不想选择其中的第三个元素：

```
<body>
    <div>First element</div>
    <div>Second element</div>
    <div>Third element</div>
</body> 
```

我如何在 jQuery 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T22:03:46.060

干得好。这是做到这一点的方法之一。

```
 $(document).ready(function(){
   var thirdDiv = $("div").eq(2);
   console.log(thirdDiv);    
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T22:03:35.070

看看这里：[http ://api.jquery.com/nth-child-selector/](http://api.jquery.com/nth-child-selector/)

基本上，如果您执行以下操作： $("div:nth-child(3)").append(" - 3nd!");

# cakephp - CakePHP 中的数据验证不起作用

> ID：10263379
> 
> 赞同：0
> 
> 时间：2012-04-21T21:59:17.363
> 
> 标签：cakephp, cakephp-2.1, cakephp-model

我不知道为什么这不起作用（我使用的是 CakePHP 2.1 并且还尝试了 2.0）：

这是模型

```
class User extends AppModel
    {
        public $validate = array('username' => array('rule' => 'email'));
    } 
```

这是控制器

```
class UsersController extends AppController
    {
        function index()
        {
            $this->set('users', $this->User->find('all') );
        }

        function add()
        {
             if (!empty($this->request->data)) 
             {            
                if ($this->User->save($this->request->data)) 
                {                
                    $this->Session->setFlash('User has been registered.');
                    $this->redirect(array('action' => 'index'));            
                }        
             }
        }
    } 
```

这是添加视图

```
<h1>Add Post</h1>
<?php
    echo $this->Form->create('User');
    echo $this->Form->input('username');
    echo $this->Form->input('password');
    echo $this->Form->end('Register');
?> 
```

它验证我写的任何东西......它应该检查用户名是否是电子邮件......

不可能！它必须工作！- 但它不...

我还用 cake php 2.0 检查了它，但它仍然无法正常工作 - 请帮助，它是如此简单，我必须工作......

也许我的数据库表有问题？？？

```
CREATE TABLE `users` (
   `id` int(10) unsigned not null auto_increment,
   `username` varchar(50),
   `password` varchar(50),
   `created` datetime,
   `modified` datetime,
   PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=9; 
```

这很奇怪——在我的应用程序文件夹中，我只添加了“UserModel.php”、“UserController.php”和“add.ctp”，以及一个数据库配置——我在上面写的所有内容——验证不起作用！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T09:48:33.647

我认为`$validate`数组没有正确声明。

尝试这个：

```
$validate = array('username' => array(
                        'email' => array(
                            'rule' => array('email')
                        ))); 
```

或这个：

```
$validate = array('username' => 'email'); 
```

见[http://book.cakephp.org/2.0/en/models/data-validation.html](http://book.cakephp.org/2.0/en/models/data-validation.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-26T21:18:12.507

你应该写在你的控制器（ UserController ）

```
($this-User->set($this->request->data) 
```

在函数验证之前就像你看到的那样；

```
 function add()
    {
         if (!empty($this->request->data)) 
         {     $this->User->set($this->request->data);
            if ($this->User->validates()) 
            {   $this->User->save($this->request->data)
                $this->Session->setFlash('User has been registered.');
                $this->redirect(array('action' => 'index'));            
            }        
         }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T11:59:50.210

好的，我知道出了什么问题：

1.  我的模型文件名为“UserModel.php”，应该是“User.php”
2.  在文件 'User.php' 的开头，我必须输入 'App::uses('AppModel', 'Model');'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T07:26:45.600

好的..这就是我所做的（还将用户名更改为电子邮件）

```
$components = array('Auth' => array('authenticate' => array('Form' => array('fields' => array('username' => 'email', 'password' => 'password')))), 'Email'); 
```

这行得通。在 CakePHP 1.3 中，您必须同时指定用户名（电子邮件）和密码。因此，当我迁移到 CakePHP 2.1 时，我继续做同样的事情并且验证没有问题。

你可以在这里看到你需要的一切：[食谱](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html)

# entity-framework - EF 从 4.0.0 升级到 4.3.1 导致奇怪的错误

> ID：10263380
> 
> 赞同：1
> 
> 时间：2012-04-21T21:59:24.340
> 
> 标签：entity-framework

我刚刚从 EF 4.0.0 升级到 EF 4.3.1。我在更新到最新版本的 Windows XP 上使用 Visual Studio 2010 Ultimate，并应用了所有 Windows 更新/补丁。我使用的数据库引擎是 SQL Server 2008 R2 Developers Edition。以下代码在 EF 4.0.0 下完美运行，但在 EF 4.3.1 下无法正常运行。

```
public class ItemBase
{
    public DateTime Created { get; set; }
    public int CreatedByUserID { get; set; }
    public DateTime LastModified { get; set; }
    public int LastModifiedByUserID { get; set; }

    public User CreatedBy { get; set; }
    public User LastModifiedBy { get; set; }

    public ItemBase()
    {
        CreatedByUserID = -1;
        LastModifiedByUserID = -1;
        CreatedBy = null;
        LastModifiedBy = null;
    }
}

public class User : ItemBase
{
    public int UserID { get; set; }
    public string LoginName { get; set; }
    public string Password { get; set; }
    public string EmailAddress { get; set; }
    public string Firstname { get; set; }
    public string Lastname { get; set; }
    public string DisplayName { get; set; }

    public User() : base()
    {
        UserID = -1;
        LoginName = String.Empty;
        Password = String.Empty;
        EmailAddress = String.Empty;
        Firstname = String.Empty;
        Lastname = String.Empty;
        DisplayName = String.Empty;
    }
}

protected override void OnModelCreating(System.Data.Entity.ModelConfiguration.ModelBuilder modelBuilder)
{
    base.OnModelCreating(modelBuilder);
    modelBuilder.Entity<User>().Property(u => u.UserID).HasDatabaseGenerationOption(DatabaseGenerationOption.Identity);
} 
```

唯一改变的是我正在使用的实体框架的版本。我已经检查了参考资料等，一切都符合预期。

从上面的代码可以看出，User 类继承自 ItemBase，而 ItemBase 又引用了一个 User 实例。底层 User 表包含来自 User 类和 ItemBase 类的所有属性（除了两个导航属性 public User CreatedBy { get; set; } 和 public User LastModifiedBy { get; set; }）在 4.0.0 下运行此代码一切都按预期工作，没有任何问题或问题。

但是，当我在 4.3.1 下运行相同的代码（没有对其他任何内容进行任何更改，包括我正在使用的数据库）时，我收到以下错误：

“**无法确定“用户”和“用户”类型之间关联的主体端。必须使用关系流式 API 或数据注释显式配置此关联的主体端。** “

因此，我在 OnModelCreating 方法中添加了以下两行：

```
modelBuilder.Entity<User>().HasRequired(u => u.CreatedBy).WithMany().HasForeignKey(k => k.CreatedByUserID);
modelBuilder.Entity<User>().HasRequired(u => u.LastModifiedBy).WithMany().HasForeignKey(k => k.LastModifiedByUserID); 
```

然后我得到这些奇怪的错误：

"**提供者没有返回 ProviderManifestToken 字符串。** "

"**建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。未找到服务器或无法访问服务器。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者： SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）** “

我还注意到在输出窗口中加载和加载这些错误：“ **System.Data.dll 中发生了‘System.Data.SqlClient.SqlException’类型的第一次机会异常**”

但是，这些错误似乎有点牵强，因为数据库很好，可用，并且连接字符串也很完美。如果我随后撤消对 OnModelCreating 方法的更改，我会再次收到原始错误，因此我不相信我收到的错误消息实际上反映了这里发生的潜在问题。

因此，基于所有这些，我得出以下结论：

1.  Entity Framework 4.3.1 版本有bug？
2.  我的代码在 4.0.0 下工作而在 OnModelCreating 方法中没有额外两行的事实可能是由于在 4.0.0 中没有进行检查，而现在在 4.3.1 中进行了检查？
3.  我需要在我的配置/代码中添加一些额外的东西，或者我缺少其他东西来使这项工作在 4.3.1 下再次工作？

任何人都可以为我阐明这一点吗？它让我发疯！非常感谢您在这方面的时间。亲切的问候史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T16:19:10.250

您似乎一直在使用 EF 4.1 的预发布版本。可能是 CTP4 或 CTP5。这很明显，因为：

*   ModelBuilder 在 4.1 RTM 之前重命名为 DbModelBuilder
*   DatabaseGenerationOption 重命名为 DatabaseGeneratedOption
*   您看到的异常是在 EF 4.1 被 RTM 之前引入的

鉴于此，我不能 100% 确定您使用的预发布版本正在创建什么模型。在 4.1 及更高版本中，两个导航属性被检测为彼此相反，Code First 尝试在用户和用户之间建立 1:1 的关系。Code First 无法确定这种关系的主体，因此与其猜测它会抛出要求您提供它。

然而，看看你的模型，很明显这不是你想要的。您似乎更有可能需要两个 1:* 单向导航道具——一个用于 CreatedBy，一个用于 LastModifiedBy。这是您在 OnModelCreating 调用中设置的内容。

通过更改类名称以匹配 4.1/4.3 并将代码添加到 OnModelCreating，您的代码在 EF 4.3.1 上对我来说可以正常工作。

关于不能建立连接，你说连接字符串是正确的，这种情况一定是EF没有找到。假设它在您的 app.config 中，那么您需要将它的名称传递给 DbContext 构造函数。例如：

```
public class MyContext : DbContext
{
    public MyContext()
     : base("name=MyConnectionStringName")
    {
    }
} 
```

如果您以其他方式使用连接字符串，那么我们将需要更多详细信息。

# ios - iOS 上的增强现实？

> ID：10263381
> 
> 赞同：0
> 
> 时间：2012-04-21T21:59:31.453
> 
> 标签：ios, ios5, sdk, augmented-reality

我想在 iOS 5 上编写一个增强现实应用程序。但我有一个问题。我找不到增强现实的简单实现代码。我任何人都可以分享链接，请这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T22:04:17.443

[http://www.musicalgeometry.com/?p=1273](http://www.musicalgeometry.com/?p=1273)

有一个使用相机覆盖的示例。但是我不确定你在期待什么，这个问题有点含糊。

# javascript - 替代 Uniformjs 的样式选择和复选框？

> ID：10263383
> 
> 赞同：0
> 
> 时间：2012-04-21T21:59:39.810
> 
> 标签：javascript, jquery, checkbox, widget, drop-down-menu

Uniformjs 现在似乎没有维护（最后一次提交是在 2 年前）。是否有另一个**可靠**的 javascript 库允许您设置选择、单选和复选框的样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T21:52:16.983

Twitter Bootstrap 有自定义按钮、选择下拉菜单等等：http: [//twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T03:11:21.807

Uniformjs 仍在 github 分叉上积极编码。此分支最近已更新，并包含大多数其他最近的贡献 [https://github.com/fidian/uniform](https://github.com/fidian/uniform)

# android - android：如何从触摸事件中获取文本位置

> ID：10263384
> 
> 赞同：9
> 
> 时间：2012-04-21T21:59:42.850
> 
> 标签：android, android-edittext, selection

我想实现一个自定义文本界面，触摸+拖动选择文本并且键盘没有被抬起，这与长按打开 CCP 菜单和键盘的默认行为形成对比。我的理解表明我需要这种方法：

```
onTouchEvent(event){
  case touch_down:
    get START text position

  case drag
    get END text position
    set selection range from START to END
} 
```

我已经了解了所有关于 getSelectStart() 和设置范围等的各种方法，但我找不到如何根据触摸事件 getX() 和 getY() 获取文本位置。有没有办法做到这一点？我已经在其他办公应用程序中看到了我想要的行为。

另外，在手动请求之前，我将如何阻止键盘出现？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-06T18:09:50.843

"mText.setInputType(InputType.TYPE_NULL)" 将抑制软键盘，但它也会在 Android 3.0 及更高版本下禁用 EditText 框中的闪烁光标。我编写了一个 onTouchListener 并返回 true 以禁用键盘，然后必须从运动事件中获取触摸位置以将光标设置到正确的位置。您可以在 ACTION_MOVE 运动事件上​​使用它来选择要拖动的文本。

这是我使用的代码：

```
 mText = (EditText) findViewById(R.id.editText1);
  OnTouchListener otl = new OnTouchListener() {
  @Override
  public boolean onTouch(View v, MotionEvent event) {
      switch (event.getAction()) {
      case MotionEvent.ACTION_DOWN:
          Layout layout = ((EditText) v).getLayout();
          float x = event.getX() + mText.getScrollX();
          int offset = layout.getOffsetForHorizontal(0, x);
          if(offset>0)
              if(x>layout.getLineMax(0))
                  mText.setSelection(offset);     // touch was at end of text
              else
                  mText.setSelection(offset - 1);
          break;
          }
      return true;
      }
  };
  mText.setOnTouchListener(otl); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-24T04:44:10.330

感谢 Waine Kail 分享开始代码，但它只处理了事件的“x”轴。对于**多行**EditText，您还必须：

1- 计算垂直位置 (y)：
2- 通过垂直位置获取行偏移
3- 使用行和水平位置获取文本偏移

```
EditText et = (EditText) findViewById(R.id.editText1);

long offset = -1; //text position will be corrected when touching.

et.setOnTouchListener(new OnTouchListener() {

@Override
public boolean onTouch(View v, MotionEvent event) {
    switch (event.getAction()) {
      case MotionEvent.ACTION_UP:
          Layout layout = ((EditText) v).getLayout();
          float x = event.getX() + et.getScrollX();
          float y = event.getY() + et.getScrollY();            
          int line = layout.getLineForVertical((int) y);                      

 // Here is what you wanted:

          offset = layout.getOffsetForHorizontal( line,  x);

          break;
        }
    return false;
}
}); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-09-10T08:30:51.763

I'm facing the same issue too. And when I tried to use "int offset = layout.getOffsetForHorizontal(0, x);" like [Wayne Kail](https://stackoverflow.com/a/14185131/709390) said, also got NPE in this line. So I tried and in the end write like this:

```
mText = (EditText) findViewById(R.id.editText1);
OnTouchListener otl = new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
      EditText editText = (EditText) v;
      float x = event.getX();
      float y = event.getY();
      int touchPosition = editText.getOffsetForPosition(x, y);
      if (touchPosition>0){
          editText.setSelection(touchPosition);
      }
      return true;
    }
};
mText.setOnTouchListener(otl); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-20T14:32:00.087

对于我的应用程序，我需要在 touchlistener 中获取位置，但上述解决方案似乎没有给出精确的位置。对我来说，它通常相对于文本光标偏离 1-2 个字符。下面的代码解决了这个问题。让它工作的关键是使用 post() 将代码推迟到光标位置更新之后。这样我得到的位置保证和EditText的一致，代码也更简单。

```
setOnTouchListener(new OnTouchListener()
    {
    @Override
    public boolean onTouch(View view, MotionEvent event)
        {
        if(event.getAction()==MotionEvent.ACTION_UP)
            {
            //At this point the selection has not been updated. So post an
            //event at the end of the event queue to check where cursor
            //has been moved
            post(new Runnable()
                {
                public void run()
                    {
                    Editable sb=getText();
                    int currentPos=getSelectionStart();
                    //TODO
                    }
                });
            }
        return false;
        }
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-02T19:14:28.247

在 EditText 中，onTouch 事件调用了两次：对于 ACTION_DOWN 和 ACTION_UP。这就是 getLayout 导致 null 的原因。我将在这里发布有效的代码，需要验证和对待

```
@Override
@SuppressLint("ClickableViewAccessibility")
public boolean onTouch(View view, MotionEvent motionEvent) {
    final EditText editText = (EditText) view;
    final int editTextSelectionStart = editText.getSelectionStart();
    final int editTextSelectionEnd = editText.getSelectionEnd();
    final Layout layout = editText.getLayout();
    final int inType = editText.getInputType(); // Backup the input type.
    editText.setInputType(InputType.TYPE_NULL); // Disable standard keyboard.
    editText.onTouchEvent(motionEvent); // Call native handler.
    editText.setInputType(inType);// Restore input type.

    switch (motionEvent.getAction()) {
        case MotionEvent.ACTION_DOWN:
            float x = motionEvent.getX() + editText.getScrollX();
            if (layout != null) {
                int offset = layout.getOffsetForHorizontal(0, x);
                if (offset > 0) {
                    if (x > layout.getLineMax(0)) {
                        editText.setSelection(offset);
                    } else {
                        editText.setSelection(offset - 1);
                    }
                }
            }
            break;
        case MotionEvent.ACTION_UP:
            editText.setSelection(editTextSelectionStart, editTextSelectionEnd);
        break;
    }

    return true; // Consume touch event.
} 
```

# django - Django 1.4+ 的项目模板未创建 manage.py

> ID：10263386
> 
> 赞同：0
> 
> 时间：2012-04-21T22:00:01.157
> 
> 标签：django

我正在使用以下项目模板生成 django 项目， [https: //bitbucket.org/danjac/django-bootstrap-template](https://bitbucket.org/danjac/django-bootstrap-template)

运行以下命令 django-admin.py startproject myproject --template=/path/to/django-bootstrap-template/template 后创建项目布局

但我没有看到创建的 manage.py 脚本。任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T19:33:32.030

您不需要使用 manage.py，只需使用目录“bin”中的...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T22:02:57.757

您的模板中没有“manage.py”。

# android - 大屏幕尺寸的较大图像视图

> ID：10263389
> 
> 赞同：0
> 
> 时间：2012-04-21T22:00:20.017
> 
> 标签：android, android-layout

如果我有一个图像，我希望它在 android 中屏幕上是中等的，在大屏幕上是大的。我知道我必须将布局放在 2 个不同的文件夹中：中型和大型布局。但我的问题是，我是否应该使用一张图像（比如中等尺寸）并通过放置最小宽度、最小高度和 fitscaleXY 将其拉伸到 alrge 屏幕。或者我应该创建 2 个图像，一个用于中型屏幕，一个用于大屏幕吗？谢谢

编辑：

真的没有答案吗？我相信这是人们一直都会做的事情。您希望图像在大屏幕上更大，我该怎么做？我正在考虑为每个屏幕布局大小指定宽度和高度，而不是包装内容。你同意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T18:17:40.677

您不必为每个屏幕尺寸制作不同的布局 xml 文件，除非它们确实需要不同的布局，例如事物的组织方式。

在 Android 中，您必须在 中指定尺寸，在 中指定`dp`文本大小，`sp`相当于像素，只有它们会根据屏幕密度自动缩放。

[计量单位](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)。

如果您在 dp 中指定某个大小，它可能会在大型设备上显示为例如 300 像素，而在较小的设备上显示为 200 像素（仅作为示例）。

我绝对不会硬编码每个屏幕的大小，因为周围有很多不同的屏幕。

# facebook - Facebook API - 致命错误：未捕获的异常：601：解析器错误：第 37 位的意外“）”

> ID：10263391
> 
> 赞同：1
> 
> 时间：2012-04-21T22:00:38.087
> 
> 标签：facebook, facebook-apps

我有一个 FB 应用程序脚本，我试图让它工作，但我收到了这个错误：

> 致命错误：未捕获的异常：601：解析器错误：第 37 位的意外')'。在第 658 行的 /home/altin/public_html/apps/empower/empowermix/base_facebook.php 中抛出

这是我收到错误的脚本部分：

```
$friendsLists = $facebook->api('/me/friends');
  foreach ($friendsLists as $friends) 
  {
   $ile=count($friends);
  }

$zapytanie=" (uid=".$friends[0]['id'].") ";
  for($i=1;$i<$ile;$i++)
  {
    $zapytanie.=" or (uid=".$friends[$i]['id'].") ";
  }

**$znajomi = $facebook->api(array("method"=> "fql.query", "query"=> "SELECT uid FROM page_fan WHERE ".$zapytanie." AND page_id='".$page_id."'")); //friends w fanpage**

$sql=mysql_query("SELECT * FROM '".$przedrostek_tab."ludzie' WHERE 'uid'=".$user_info['id']);
$czy_jest=mysql_fetch_array($sql);
foreach($znajomi as $k => $w)
      {$znajomi_weryfikacja[$k]=$w['uid'];}
if($znajomi_weryfikacja)
  {$znajomi_weryfikacja=( array_diff($znajomi_weryfikacja, explode("|",$czy_jest['znajomi_start'])));
  if($czy_jest[0])
    {foreach($znajomi_weryfikacja as $k => $w)
      {$zaproszeni_znajomi.=$w.'|';}
    mysql_query("UPDATE '".$przedrostek_tab."ludzie' SET 'zaproszeni_znajomi' = '$zaproszeni_znajomi' WHERE 'uid' =".$user_info['id']);}
  } 
```

任何人都可以帮助提出解决方案吗？也许你们中的一些人以前可能遇到过类似的问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T23:55:23.130

您的代码处理 Graph API 响应和 FQL 查询的构造存在严重问题：

1.  `$facebook->api('/me/friends')``data`返回由（包含朋友详细信息）和组成的关联数组`paging`。（为了明确命名这不是朋友列表，而是用户朋友列表）。
2.  您从 API 中获得的错误与您的查询包含`(uid=)`in`WHERE`子句有关。

您可以简单地修复循环：

```
$friendsList = $facebook->api('/me/friends');
$friends = $friendsList['data'];
$ile=count($friends);

$zapytanie=" (uid=".$friends[0]['id'].") ";
for($i=1;$i<$ile;$i++){
  $zapytanie.=" or (uid=".$friends[$i]['id'].") ";
}
// ... 
```

实际上，您应该了解有关 FQL 和 Graph API 的几件事：

**您最好只检索需要的数据并使用`IN`而不是多个`OR`**

```
$response = $facebook->api('/me/friends?fields=id');
$friends = $response['data'];
$uids = array();

foreach ($friends as $friend)
  $uids[] = $friend['id'];

$zapytanie = 'uid IN ('. implode(',', $uids) .')';
// ... 
```

**您也可以在单个 FQL 查询中完成这一切**

```
$fql = <<FQL
SELECT uid FROM page_fan WHERE page_id = {$page_id} AND uid IN (
  SELECT uid2 FROM friend WHERE uid1 = me()
)
FQL; 
```

# c++ - 错误：“{”标记之前的预期类名错误

> ID：10263396
> 
> 赞同：0
> 
> 时间：2012-04-21T22:01:00.417
> 
> 标签：c++

我的程序中有这个烦人的错误。

“车辆”是基类。“自行车”扩展了这个类。

```
#ifndef BICYCLE_H
#define BICYCLE_H

#include "Vehicle.h"

#include <string>
#include <iostream>
using namespace std;

//Template class which is derived from Vehicle
template<typename T>
class Bicycle: public Vehicle
{
public:
    Bicycle();
    Bicycle(int, int, string, int); 
    ~Bicycle();

    //Redefined functions inherited from Vehicle
    void move(int, int); // move to the requested x, y location divided by 2
    void set_capacity(int); // set the capacity value; can't be larger than 2

}; 
```

以上是 Bicycle.h 文件（我没有此类的 .cpp 文件）

```
#ifndef VEHICLE_H
#define VEHICLE_H

#include "PassengerException.h"

#include <string>
#include <iostream>
using namespace std;

//ADD LINE HERE TO MAKE IT A TEMPLATE CLASS
template<typename T>
class Vehicle
{
public:
    Vehicle(); //default contstructor
    Vehicle(int, int, string, int); // set the x, y, name, and capacity
    virtual ~Vehicle(); //destructor; should this be virtual or not???

    //Inheritance - question #1; create these functions here and in Bicycle     class
    string get_name(); // get the name of the vehicle
    void set_name(string); //set the name of the vehicle
    void print(); // std print function (GIVEN TO YOU)

    //Polymorphism - question #2
    virtual void move(int, int); // move to the requested x, y location
    virtual void set_capacity(int); // set the capacity value

    //Operator overloading - question #3
    Vehicle<T> operator+(Vehicle<T> &secondVehicle) const;

    //Exceptions - question #4
    T get_passenger(int) throw(PassengerException); // get the passenger at the specified index
    void add_passenger(T) throw(PassengerException); // add passenger and the current passenger index
    void remove_passenger() throw(PassengerException); // remove a passenger using current passenger index

protected:
    int x_pos;
    int y_pos;
    string name;
    int capacity;
    T *passengers;
    int current_passenger;
}; 
```

上面是 Vehicle.h 文件。我也没有 .cpp 。

另外， ifndef 定义 endif 是什么意思？我必须使用那些吗？他们是必需的吗？

而且，他们的名字必须这样格式化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T22:05:23.027

```
class Bicycle: public Vehicle 
```

Vehicle 是一个模板，所以你需要这个：

```
class Bicycle: public Vehicle<T> 
```

#ifndef 和 #define 和 #endif 被称为标头保护，用于防止您的头文件被包含多次，从而导致事物（类）被多次声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T22:04:05.733

ifndef define 和 endif 对于实际的基本文件（即 c++ 文件本身）是必需的。是的，如果您计划相应地使用这些函数和变量，它们是必需的。是的，它们的名称必须以这种方式格式化，这就是指令或在某些情况下必须格式化标志的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T22:04:22.987

您必须放在`#endif`头文件的末尾。这些被称为定义保护以防止头文件的多次包含。[在包括警卫](http://en.wikipedia.org/wiki/Include_guard)处查看更多信息。

# jquery - Jquery 类更改停止处理第二个函数调用

> ID：10263406
> 
> 赞同：0
> 
> 时间：2012-04-21T22:02:09.270
> 
> 标签：jquery, image, carousel

我正在创建一个 jquery 轮播。此功能将图像向左滑动并根据它们移动到的位置更改它们的类。（在您单击一个名为“增加”的按钮后）。它第一次按原样工作，删除左侧图像，将中间类更改为左侧，将右侧更改为中间，同时在右侧添加新图像并为其赋予正确的位置类。如果您想看到它的实际效果，这里是小提琴：http: [//jsfiddle.net/6fwbS/25/](http://jsfiddle.net/6fwbS/25/)

第二次调用该函数时，一切都搞砸了。附加了一个新图像，但它的不透明度为 0，并且类是 .right_slot。知道我在这里做错了什么吗？提前致谢。

```
function slide_img_left() {

        var imgs = imgArr.length;
        a++;
        if (a >= imgs) {
            a = 0;
        }

        b = a - 1;
        c = a + 1;

        if (b < 0) {
            b = imgs - 1;
        }
        if (c >= imgs) {
            c = 0;
        }

        var left = $('.left_slot'); var middle = $('.middle_slot'); var right = $('.right_slot');
        var newImg = imgArr[c][0];
        left.animate({
            opacity: 0,
            left: '-=50px'
        }, 300, function() {
            left.remove();
        });

        middle.animate({
            left: '-=50px'
        }, 300, function() {
            middle.attr('class', 'left_slot');
            right.attr('class', 'middle_slot');
        });

        right.animate({
            left: '-=50px'
        }, 300, function(){
            $("#basic_div").append(newImg);
            newImg.attr('class', 'right_slot'); 
        });

        $("#varsDiv").html(" var b = " + b + " var a = " + a + " var c = " + c);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T22:48:34.547

*   您应该`.clone()`使用您的图像或恢复您对其样式所做的更改。

    ```
    $("#basic_div").append(imgArr[b].clone());
    $("#basic_div").append(imgArr[a].clone());
    $("#basic_div").append(imgArr[c].clone());
    ...
    function slide_img_left() {
      ...
      var newImg = imgArr[c].clone();
      ...
    } 
    ```

*   `left_slot`向左移动并隐藏它只会破坏您的布局。`middle_slot`看不见了。

这是一个具有略微不同淡出效果的增加功能[的工作示例。](http://jsfiddle.net/2C8fy/)

# java - 什么是程序到接口而不是程序到实现

> ID：10263413
> 
> 赞同：2
> 
> 时间：2012-04-21T22:02:46.117
> 
> 标签：java, design-patterns

> **可能重复：**
> [“编程到接口”是什么意思？](https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface)

首先，我认为java中的interface和interface这个术语是有区别的，我不太明白有什么区别。

当它说“编程到接口而不是实现”时，我的第一个问题是指接口还是 java 接口？

我正在阅读 headfirst 设计模式，我对程序到接口而不是程序到实现感到困惑。我的理解是子类是具体的实现，接口是超类（接口或抽象类或简单类）。

我的第二个问题是，当他们对接口说程序时，这意味着代码在接口（超类）中，然后子类只是继承了它？如果他们说实现（子类）的程序代码在子类中？我之所以考虑这一点是因为“重用”一词，因为如果您更改代码并且您的代码在子类（具体实现）中，那么您需要更改所有子类代码，然后如果您将代码放在接口中，您只需要更改该界面中的代码。

接口和实现的程序示例（请使其简单）也会有所帮助。

第三个问题如果我们编写一个接口比编写具体类有什么优势？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T22:31:15.360

首先我必须说我没有读过那本书，所以我不能肯定这就是作者的意思，但这就是我对这句话的理解。

我对这意味着什么的理解是，您应该以一种将类和方法视为黑匣子的方式进行编程，您不依赖于某些内部机制及其工作方式，而是依赖于您或某人的规范else 在接口、超类、文档等中定义。这样，您可以轻松更改实现，而不会影响代码库的其余部分。

一个很好的例子可能是存储一些数据的序列，比如说名字。您可以定义函数来添加新名称、删除它们并打印它们。如果您在如下面的接口中定义这些函数，则可以使用它们，而不必担心实现它们的类是使用数组还是列表来存储它们。

```
interface Sequence {
    void add(String s);
    void delete(String s);
    void print();
} 
```

现在您可以创建一个实现接口的类 SequenceAsList 并在您的应用程序中使用它。假设一切正常，但您现在决定可能在某些地方您提前知道序列中的项目数并且您需要更好的性能，因此您想使用数组而不是列表。因此，您可以创建另一个同样实现 Sequence 接口的类 SequnceAsArray。现在您需要在代码中更改的所有内容都是

```
Sequence someSequence = new SequenceAsArray(); 
```

代替

```
Sequence someSequence = new SequenceAsList(); 
```

因为他们遵循相同的界面，所以很容易做到这一点。因此我认为作者主要建议的是采取这种将类和方法视为黑匣子的方法。

# c# - 带有按钮事件的 Visual Studio 2010 TableLayoutPanel

> ID：10263414
> 
> 赞同：0
> 
> 时间：2012-04-21T22:02:53.750
> 
> 标签：c#, visual-studio-2010, events, button, tablelayoutpanel

我在 Visual Studio 2010 中以设计器模式制作了一个 TableLayoutPanel（例如 8x8 rowsxcolumns），然后我在这个“矩阵”的每个字段中都放置了一个按钮。有什么办法可以集中处理事件吗？我发现 TableLayoutPanel 有 TabIndexChanged，但我不知道这是否对我有用。
我只是想知道这是否可能：
我单击第二个按钮并获取有关我单击的按钮的信息，并且能够更改他的某些属性-例如图标或文本。
让我们想象一个想法，我将 tablelayoutpanel 理解为“矩阵”或“数组”，我想使用它是这样的：

```
1)I'll click on button on possition i (or i,j)
2)I'll change the Icon of button on possition i (or i,j) 
```

那可能吗？如果是，如何？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T01:27:22.120

您可以让一个方法处理所有按钮单击事件，然后使用 sender 参数修改按钮上的图像。

例如

```
private void CreateButtons(object sender, EventArgs e)
    {
        for (int i = 0; 8 < length; i++)
        {

            for (int j = 0; 8 < length; i++)
            {
                var btn = new Button() { Text = "Something" };
                btn.Click += new EventHandler(btn_Click);
                this.tableLayoutPanel1.Controls.Add(btn, i, j);
            }
        }

    }

    void btn_Click(object sender, EventArgs e)
    {
         ((Button)sender).Image= SomeMethodThatReturnsAnImage();
    } 
```

顺便[`TabIndexChanged`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.tabindexchanged.aspx)说一句，这对您来说完全没用，因为它仅在控件的 TabIndex 属性发生更改时才会引发，这通常非常罕见。您会记得 TabIndex 属性用于控制用户 `Tab`按键时的控件顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T22:17:04.233

听起来您只需要将所有按钮的单击事件与单个事件处理程序相关联，然后在事件处理程序内操作单击的按钮等

# objective-c - IOS - NSMutableString：附加和初始化属性

> ID：10263416
> 
> 赞同：0
> 
> 时间：2012-04-21T22:03:06.987
> 
> 标签：objective-c, ios, nsxmlparser, nsmutablestring

我显然没有得到什么。

我正在解析一个 XML 文档，所以我有一个 NSMutableString 可以附加到其中一个元素，因为 foundCharacters 被截断并分段执行。我可以让这一切正常工作，但我不明白为什么以某种方式这样做是行不通的。

```
@property (copy, nonatomic) NSMutableString *currentFoundCharacter; 
```

这就是我为 ViewController 声明属性的方式。

然后我有：

```
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
  {
    if (!currentFoundCharacter) {
      currentFoundCharacter = [[NSMutableString alloc] init]; // Have to do this or new strings never append to it.
    }
    if ([currentAttribute compare:@"description"] == NSOrderedSame && currentAttribute.length > 1) {
    [currentFoundCharacter appendString:[string copy]];
  } 
```

现在这在这里有效。它将在一个元素中组合我想要的所有内容。但是如果我尝试使用合成方法，我会收到关于变异不可变对象的错误，所以基本上用 self.currentFoundCharacters 替换所有 currentFoundCharacters。

也许我误解了何时以及为什么使用属性与实例变量，但在 init 方法之外，因此我的印象是使用 setter / getter 更好。最后，我只想确保编写可维护的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T22:18:46.827

在您的财产中使用保留而不是复制。Copy 给你一个不可变的副本。

# hibernate - 关于 Hibernate 和 Java Persistence API 的建议

> ID：10263422
> 
> 赞同：0
> 
> 时间：2012-04-21T22:03:42.157
> 
> 标签：hibernate

我使用过 Enterprise JavaBeans 3.0。我是休眠的新手。

我了解每个供应商都必须实现 Java Persistence API。

当您编写一个项目并且您可以选择 Hibernate 时，应该只使用 Hibernate 还是使用 Java Persistence API 或两者都使用？

我想听听你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T22:19:49.573

我会使用 Hibernate 的 JPA 实现。通过这种方式，您可以更改 JPA 实现并避免陷入 Hibernate。正如您在问题中所述，JPA 只是一个规范，您必须选择一个实现，因此如果您想使用 JPA，您别无选择，只能选择 Hibernate 和 JPA，除非您选择另一个实现。使用 JPA 而不是直接使用 Hibernate 的好处是您可以切换实现，因为您遵循规范。过去，我成功地将 HibernateEntity Manager 与 JPA 和 Spring 结合使用，并且一旦建立了配置，我觉得它非常简单。教程和参考资料等资源可广泛用于此技术堆栈。

```
 <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>3.6.0.Final</version>
    </dependency> 
```

还可以在堆栈中搜索更多有用的帖子，包括这个：

[Hibernate 和 JPA 有什么区别？](https://stackoverflow.com/questions/5678883/what-are-the-differences-between-hibernate-and-jpa)

# jquery - 在特定位置滚动移动 div

> ID：10263424
> 
> 赞同：1
> 
> 时间：2012-04-21T22:03:50.917
> 
> 标签：jquery, scroll, parallax

当用户到达页面的特定点时，我尝试做一个小动画：

当用户滚动到 1000px（例如）时，我有一个名为“clouds”的 div，它需要根据用户的滚动来移动。

如果用户向下滚动，云向左移动，如果用户向上滚动，云向右移动。

我已经尝试过这段代码，但不幸的是它不起作用（问题是 div 在开始时没有保持其位置）

```
$(window).bind('scroll',function(e){
    parallaxScroll();
});

function parallaxScroll(){
    var scrolled = $(window).scrollTop();
    $('#cloud_left').css('left', parseInt(-scrolled / 5) + 'px');
} 
```

任何帮助将不胜感激！谢谢！

# android - 使用 SimpleXML，如何在反序列化时忽略我的对象类中没有的 xml 元素

> ID：10263429
> 
> 赞同：16
> 
> 时间：2012-04-21T22:04:54.323
> 
> 标签：android, simple-framework

我在 Android 上使用 SimpleXml 来反序列化我无法控制的 xml。现在，每次 xml 更改时，它都会阻止我的应用程序，因为我的对象类中没有定义新元素。有没有一种方法可以指定 SimpleXML 来忽略这些错误映射？查看了文档，找不到任何可以帮助我解决的问题。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-22T11:42:20.483

我很确定您可以通过将常规`@Root`声明替换为 来绕过严格映射[`@Root(strict=false)`](http://simple.sourceforge.net/download/stream/doc/javadoc/org/simpleframework/xml/Root.html#strict%28%29)，这将消除每个元素都应与类定义中的字段匹配的要求。更准确地说，来自文档：

> 这用于确定是否应以严格的方式解析表示的对象。严格的解析要求 XML 文档中的每个元素和属性都与类模式中的一个字段相匹配。如果元素或属性与字段不匹配，则解析失败并出现异常。将严格解析设置为 false 允许在反序列化期间跳过源 XML 文档中的详细信息。

Simple XML 项目站点上的教程列表中还[提供了一个示例。](http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php#loosemap)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-24T20:33:47.803

`read`您可以通过添加“false”作为最后一个参数来为特定的所有标签指定要禁用的严格模式。也来自[他们的文档](http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php#loosemap)：

> 如果有多个对象需要松散映射，那么使用 Root 注释可能不是理想的解决方案。在这种情况下，可以要求持久化器本身执行松散映射。只需将布尔值传递给 read 方法，指示所需的映射类型。默认情况下，持久化器使用严格映射，可以使用 Root 注释逐个对象覆盖，如上例所示。但是，可以覆盖此默认值，如下面的代码片段所示。

```
Contact contact = serializer.read(Contact.class, source, false); 
```

# java - Java Swing：如何从事件调度线程中唤醒主线程？

> ID：10263430
> 
> 赞同：3
> 
> 时间：2012-04-21T22:05:05.587
> 
> 标签：java, multithreading, swing, events, event-dispatch-thread

我想通过按钮的 ActionListener`main()`的方法使“主线程”（运行的线程启动）做一些工作`actionPerformed()`，但我不知道如何实现这一点。

更多上下文：

我目前正在使用 Swing（俄罗斯方块的一种风格）编写 2D 游戏。
当应用程序启动时，会打开一个显示游戏主菜单的窗口。向用户展示了几种可能性，其中之一是通过按下“开始”按钮来开始游戏，这会导致显示游戏面板并触发游戏的主循环。

为了能够在两个面板（主菜单和游戏面板）之间切换，我使用的是 CardLayout 管理器，然后我可以通过调用来显示一个面板[`show()`](http://docs.oracle.com/javase/6/docs/api/java/awt/CardLayout.html#show%28java.awt.Container,%20java.lang.String%29)。
我的想法是我希望我的开始按钮有一个如下所示的侦听器：

```
public class StartListener implements ActionListener {
    StartListener() {}
    public void actionPerformed(ActionEvent e) {
        displayGamePanel();
        startGame();
    }
} 
```

但这不起作用，因为`actionPerformed()`是从事件调度线程调用的，所以调用`startGame()`（触发主循环：游戏逻辑更新+`repaint()`每帧调用）阻塞了整个线程。

我现在处理这个的方式是`actionPerformed()`只改变一个布尔标志值：`public void actionPerformed(ActionEvent e) { startPushed = true; }`
然后最终由主线程检查：

```
while (true) {
    while (!g.startPushed) {
        try { 
            Thread.sleep(100); 
        } catch (Exception e) {}
    }
    g.startPushed = false;
    g.startGame();
} 
```

但我发现这个解决方案非常不雅。

我已经阅读了[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)课程，但我仍然感到困惑（我应该实现一个工作线程——这不是有点矫枉过正吗？）。我还没有完成任何实际的多线程工作，所以我有点迷茫。

有没有办法告诉主线程（它将无限期地休眠，等待用户操作）“好的，现在醒来并执行此操作（显示游戏面板并开始游戏）”？

谢谢你的帮助。

**编辑：** 为了清楚起见，这就是我的游戏循环的样子：

```
long lastLoopTime = System.currentTimeMillis();
long dTime;
int delay = 10;
while (running) {
    // compute the time that has gone since the last frame
    dTime = System.currentTimeMillis() - lastLoopTime;
lastLoopTime = System.currentTimeMillis();

    // UPDATE STATE
    updateState(dTime);
    //...

    // UPDATE GRAPHICS
    // thread-safe: repaint() will run on the EDT
    frame.repaint()

    // Pause for a bit
    try { 
    Thread.sleep(delay); 
    } catch (Exception e) {}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T22:10:32.663

这没有意义：

> 但这不起作用，因为 actionPerformed() 是从事件调度线程调用的，所以对 startGame() 的调用（触发主循环：游戏逻辑更新 + 在每一帧调用 repaint()）阻塞了整个线程。

因为你的游戏循环不应该阻塞 EDT。您是否在游戏循环中使用 Swing Timer 或后台线程？如果没有，请这样做。

关于：

```
while (true) {
    while (!g.startPushed) {
        try { 
            Thread.sleep(100); 
        } catch (Exception e) {}
    }
    g.startPushed = false;
    g.startGame();
} 
```

也不要这样做，而是使用侦听器来处理这类事情。

例如，

```
import java.awt.CardLayout;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.*;

public class GameState extends JPanel {
   private CardLayout cardlayout = new CardLayout();
   private GamePanel gamePanel = new GamePanel();
   private StartPanel startpanel = new StartPanel(this, gamePanel);

   public GameState() {
      setLayout(cardlayout);
      add(startpanel, StartPanel.DISPLAY_STRING);
      add(gamePanel, GamePanel.DISPLAY_STRING);
   }

   public void showComponent(String displayString) {
      cardlayout.show(this, displayString);
   }

   private static void createAndShowGui() {
      GameState mainPanel = new GameState();

      JFrame frame = new JFrame("GameState");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}

class StartPanel extends JPanel {
   public static final String DISPLAY_STRING = "Start Panel";

   public StartPanel(final GameState gameState, final GamePanel gamePanel) {
      add(new JButton(new AbstractAction("Start") {

         @Override
         public void actionPerformed(ActionEvent e) {
            gameState.showComponent(GamePanel.DISPLAY_STRING);
            gamePanel.startAnimation();
         }
      }));
   }
}

class GamePanel extends JPanel {
   public static final String DISPLAY_STRING = "Game Panel";
   private static final int PREF_W = 500;
   private static final int PREF_H = 400;
   private static final int RECT_WIDTH = 10;
   private int x;
   private int y;

   public void startAnimation() {
      x = 0;
      y = 0;
      int timerDelay = 10;
      new Timer(timerDelay , new ActionListener() {

         @Override
         public void actionPerformed(ActionEvent e) {
            x++;
            y++;
            repaint();
         }
      }).start();
   }

   @Override
   protected void paintComponent(Graphics g) {
      super.paintComponent(g);
      g.fillRect(x, y, RECT_WIDTH, RECT_WIDTH);
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(PREF_W, PREF_H);
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T22:15:25.310

您应该使用[SwingWorker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)这将`doInBackground()`在后台线程中执行代码，并在停止`done()`后执行 EDT 中的代码`doInBackground()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T22:06:34.940

最简单的方法：使用[`CountDownLatch`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html). 您将其设置为 1，以任何适当的方式使其在 Swing 代码中可用，并在主线程中为您提供`await`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T22:15:03.953

您可以考虑使用 SwingUtilities.invokeAndWait() 显示带有游戏面板的模式对话框，以便在关闭对话框时控件返回主线程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-21T22:20:40.507

您可以使除 EDT 之外的所有代码在单线程执行服务上运行，然后在需要执行某些代码时发布可运行文件。

# google-visualization - 谷歌图表传奇不会消失

> ID：10263434
> 
> 赞同：0
> 
> 时间：2012-04-21T22:05:31.833
> 
> 标签：google-visualization

对于我的生活，我无法让 Google Chart Legend 不显示，即使我指定“NONE”。（此处也注明：[在 Google Chart 中隐藏图例](https://stackoverflow.com/questions/5202029/hiding-the-legend-in-google-chart)）。

```
$options = array(   'title' => 'Average Load Summary', 
            'titlePosition' => 'in', 
            'legend.position' => 'none',
            'width' => 1100, 
            'height' => 700, 
            'hAxis.slantedTextAngle' => 90, 
            'hAxis.position' => 'out', 
            'pointSize' => 5, 
            'hAxis.title' => 'Stops'); 
```

此外，我无法让倾斜的文本角度变为水平（90 度），这样我的整个标签就会显示出来。现在谷歌在我的标签上添加了“...”，它们的角度约为 45 度。最后，无论如何，我也无法显示`hAxis.title`or ......`vAxis.title`

感谢任何人可能有的任何帮助。顺便说一下，这是一个**折线图**...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T21:33:32.120

你有这个：

```
'legend.position' => 'none', 
```

尝试这样做：

```
'legend' => array('position' => 'none'), 
```

对于另一个：

```
'hAxis' => array('title' => 'Stops', 'position' => 'out', 'slantedTextAngle' => 90), 
```

基本上，legend 和 hAxis 接受多个参数，因此它们每个都有自己的选项数组。宽度和高度之类的参数只有一个。

在 javascript 中，它看起来像这样：

```
var options = {
   title: 'Average Load Summary'
   ,legend: {position: 'none'}
}; 
```

# python - Python 中更好、更准确的 MIME 类型检测

> ID：10263436
> 
> 赞同：5
> 
> 时间：2012-04-21T22:06:30.070
> 
> 标签：python, mime-types, python-2.7

Python 的 mimetypes 模块不是特别准确，它的结果基于文件扩展名。我能想到的获得更准确结果的唯一方法是这样调用 Unix`file`命令`subprocess.Popen`：

```
import subprocess
mimetype = subprocess.Popen(['file', '/path/to/file', '--mime-type', '-b'], 
    stdout=subprocess.PIPE).stdout.read().strip() 
```

这感觉很不雅。有没有更好的方法来做到这一点*而*不必打电话`file`但仍能达到同样的准确度？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T22:08:53.700

你可以试试：[magic's mimetype](https://github.com/ahupp/python-magic)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T15:04:24.953

我使用类似但稍微缩写的东西：

```
import subprocess
mimeType = subprocess.check_output(['file', '-ib', '/path/to/file']).strip() 
```

它可能不会更优雅，但它更短，更容易阅读，我总是更喜欢这样。

# ios - 使用 MPMoviePlayerController 在两部电影之间转换

> ID：10263438
> 
> 赞同：1
> 
> 时间：2012-04-21T22:06:47.247
> 
> 标签：ios, cocoa-touch, mpmovieplayercontroller

我正在尝试在我的 iPad 应用程序中的两部电影之间进行平滑的淡入淡出。在一个按钮上点击视觉随机化和正在播放的电影淡入下一部电影。

由于不能同时播放 2 部电影（来自文档），因此不可能直接进行交叉淡入淡出。为了解决这个问题，我使用了新电影初始帧的静止图像（要淡入）。我用两个播放器来处理电影的交换。

原始电影暂停，然后我过渡到图像。现在我添加我的第二部电影（alpha = 0.0）然后转换，使其 alpha = 1。然后我播放新电影。这一切正常，除了随着新电影在图像上的过渡而明显变暗。

我在没有静止图像的情况下对其进行了测试，并且在所述过渡期间似乎没有发生变暗。

我的开关代码如下（if 语句的前半部分）。看着它看起来很奇怪，但它是让我最接近我需要的方法。

也许有更好的方法来完成这项任务？提前致谢 ：）

```
- (void) switchMovie;
{

NSURL *movieImageUrl = [movieImageUrlArray objectAtIndex:index];
NSData *data = [NSData dataWithContentsOfURL:movieImageUrl];
UIImage *movieImage = [[UIImage alloc] initWithData:data];
UIImageView *image = [[UIImageView alloc] initWithImage:movieImage];

image.alpha = 0.0f;
[self addSubview:image];

if (moviePlayer1Playing) {

moviePlayer1Playing = NO;
moviePlayer2Playing = NO;

[moviePlayer1 pause]; //pausing later in the method caused a crash, stopping causes a crash.

[UIView animateWithDuration:1.0
                      delay:0.0
                    options:UIViewAnimationCurveEaseIn
                 animations:^{

                     image.alpha = 1.0f;             //fade in still of first frame of new movie

                 } completion:^(BOOL finished) {

                     [moviePlayer1 release];   //release original movie.

                     moviePlayer2 = [[MPMoviePlayerController alloc] initWithContentURL:[movieUrlArray objectAtIndex:index]]; 

                     moviePlayer2.shouldAutoplay = NO;
                     [moviePlayer2 prepareToPlay];
                     [moviePlayer2 setControlStyle:MPMovieControlStyleNone];
                     moviePlayer2.scalingMode = MPMovieScalingModeAspectFill;
                     [moviePlayer2.view setFrame:CGRectMake(0, 0, 1024 , 768)];
                     moviePlayer2.view.backgroundColor = [UIColor clearColor];
                     moviePlayer2.view.alpha = 0.0;
                     [self addSubview:moviePlayer2.view];

                     [UIView animateWithDuration: 3.0 
                                           delay: 0.0 
                                         options: UIViewAnimationCurveLinear  
                                      animations:^(void){ 

                                         moviePlayer2.view.alpha = 1.0f;
                                         //During this transition the view goes dark half-way through, before lightening again.

                                      } completion:^ (BOOL finished) {

                                          [moviePlayer2 play];
                                          moviePlayer2Playing = YES;  
                                          moviePlayer1Playing = NO;

                                      }];

                 }]; 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T01:29:42.773

您看到的黑色是电影播放器​​的背景，因此您应该将电影播放器​​的背景设置为所需的静止图像，而不是使用 UIImageView。

```
UIImageView *stillImageView = [UIImageView alloc]initWithImage:stillImage];
stillImageView.frame = self.moviePlayer.backgroundView.frame;

[self.moviePlayer.backgroundView addSubview:stillImageView];
[stillImageView release]; 
```

# android - 无法使用 AsyncTask 填充 ListView

> ID：10263440
> 
> 赞同：0
> 
> 时间：2012-04-21T22:06:56.890
> 
> 标签：android, android-listview, android-asynctask

试图让这个工作......它加载正常，甚至告诉应用程序它已完成获取所有数据。但它不会填充列表视图。

mArrayList.toString() 内部的数据响应：[A, B, C, D]

```
public class MainActivity extends ActionBarActivity {
private static final String DEBUG_TAG = "MainActivity";
private boolean mAlternateTitle = false;
ListView lv;
private ArrayList<Show> mArrayList;
ShowsAdapter adapter;
AlertDialog mAlertDialog;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    mArrayList = new ArrayList<Show>();
    lv = (ListView) findViewById(R.id.list);
    adapter = new ShowsAdapter(MainActivity.this, android.R.layout.simple_list_item_1, mArrayList);

    ShowsList show_list = new ShowsList();
    show_list.execute();

    lv.setAdapter(adapter);
    lv.setOnItemClickListener(new ListClickListener());
}

private class ShowsList extends AsyncTask<Void, Void, List<Show>> {
    @Override
    protected void onPreExecute() {
        mAlertDialog = new AlertDialog.Builder(MainActivity.this).setIcon(R.drawable.ic_action_refresh).setTitle(R.string.fetching_new).show();
    }

    @Override
    protected List<Show> doInBackground(Void... voids) {
        final String DEBUG_TAG = "MainActivity$ShowList$doInBackground";
        try {
            for (Show show : Show.getShows()) {
                Log.d(DEBUG_TAG, show.toString());
                mArrayList.add(show);
            };
            return mArrayList;
        } catch (Exception e) {
            new AlertDialog.Builder(MainActivity.this.getApplicationContext()).setIcon(android.R.drawable.ic_dialog_alert).setTitle(R.string.server_down_title).setMessage(R.string.server_down_message).setPositiveButton(R.string.app_quit, new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialogInterface, int i) {
                    MainActivity.this.finish();
                }
            }).show();
            return null;
        }
    }

    @Override
    protected void onPostExecute(final List<Show> show_list) {
        if (mAlertDialog.isShowing()) {
            mAlertDialog.dismiss();
        }
        adapter.notifyDataSetChanged();
    }
}

private class ListClickListener implements AdapterView.OnItemClickListener {
    public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {
        Show show = mArrayList.get(i);
        Toast.makeText(MainActivity.this, "Clicked on a list item: " + show.title, Toast.LENGTH_LONG).show();
    }
}

private class ShowsAdapter extends ArrayAdapter<Show> {
    final String DEBUG_TAG = "MainActivity$ShowsAdapter";
    public ShowsAdapter(Context context, int textViewResourceId, List<Show> shows) {
        super(context, textViewResourceId, shows);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        Show show = this.getItem(position);

        if (convertView == null) {
            convertView = getLayoutInflater().inflate(R.layout.list_row_show, parent, false);
        }
        ((TextView) convertView.findViewById(R.id.show_title)).setText(show.title);
        //Log.d(DEBUG_TAG, (String)((TextView) convertView.findViewById(R.id.show_title)).getText());
        //((TextView) convertView.findViewById(R.id.episode_number)).setText(episode.getGrayLine());
        return convertView;
    }
} 
```

以防万一布局[main.xml]有问题：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
    </ListView>

</FrameLayout> 
```

list_show_row.xml：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent">

    <TextView
            android:textSize="17.0dip"
            android:textStyle="bold"
            android:textColor="#ff000000"
            android:gravity="center_vertical"
            android:id="@+id/show_title"
            android:layout_width="fill_parent"
            android:layout_height="0.0dip"
            android:text="Show Title"
            android:layout_weight="1.0"
            />

    <TextView
            android:textStyle="italic" android:textColor="#ff666666"
            android:id="@+id/episode_number"
            android:layout_width="fill_parent" android:layout_height="0.0dip" android:text="Episode Number" android:layout_weight="1.0" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T01:03:53.987

不要在 list_row_show.xml 布局的根元素的 layout_height 上设置 fill_parent。

# cuda - CUDA：共享内存的性能不佳且没有并行性

> ID：10263446
> 
> 赞同：1
> 
> 时间：2012-04-21T22:07:54.617
> 
> 标签：cuda, parallel-processing, shared-memory

我试图在这个内核函数中利用共享内存，但性能不如我预期的那么好。这个函数在我的应用程序中被调用了很多次（大约 1000 次或更多），所以我想利用共享内存来避免内存延迟。但显然有些问题是因为我的应用程序变得非常慢，因为我正在使用共享内存。
这是内核：

```
__global__ void AndBitwiseOperation(int* _memory_device, int b1_size, int* b1_memory, int* b2_memory){
int j = 0;

// index GPU - Transaction-wise
unsigned int i = blockIdx.x * blockDim.x + threadIdx.x;
unsigned int tid = threadIdx.x;

// shared variable
extern __shared__ int shared_memory_data[];
extern __shared__ int shared_b1_data[];
extern __shared__ int shared_b2_data[];

// copy from global memory into shared memory and sync threads
shared_b1_data[tid] = b1_memory[tid];
shared_b2_data[tid] = b2_memory[tid];
__syncthreads();

// AND each int bitwise
for(j = 0; j < b1_size; j++)
    shared_memory_data[tid] = (shared_b1_data[tid] & shared_b2_data[tid]);

// write result for this block to global memory
_memory_device[i] = shared_memory_data[i];
} 
```

共享变量被声明为*extern*因为我不知道 b1 和 b2 的大小，因为它们取决于我只能在运行时知道的客户数量（但两者始终具有相同的大小）。
这就是我调用内核的方式：

```
void Bitmap::And(const Bitmap &b1, const Bitmap &b2)
{

int* _memory_device;
int* b1_memory;
int* b2_memory;

int b1_size = b1.getIntSize();

// allocate memory on GPU
(cudaMalloc((void **)&b1_memory,  _memSizeInt * SIZE_UINT));
(cudaMalloc((void **)&b2_memory,  _memSizeInt * SIZE_UINT));
(cudaMalloc((void **)&_memory_device,  _memSizeInt * SIZE_UINT));

// copy values on GPU
(cudaMemcpy(b1_memory, b1._memory, _memSizeInt * SIZE_UINT, cudaMemcpyHostToDevice ));
(cudaMemcpy(b2_memory, b2._memory, _memSizeInt * SIZE_UINT, cudaMemcpyHostToDevice ));
(cudaMemcpy(_memory_device, _memory, _memSizeInt * SIZE_UINT, cudaMemcpyHostToDevice ));

dim3 dimBlock(1, 1);
dim3 dimGrid(1, 1);

AndBitwiseOperation<<<dimGrid, dimBlock>>>(_memory_device, b1_size, b1_memory, b2_memory);

// return values
(cudaMemcpy(_memory, _memory_device, _memSizeInt * SIZE_UINT, cudaMemcpyDeviceToHost ));

// Free Memory
(cudaFree(b1_memory));
(cudaFree(b2_memory));
(cudaFree(_memory_device));
} 
```

b1 和 b2 是每个元素 4 位的位图。元素的数量取决于客户的数量。另外，我对内核的参数有疑问，因为如果我添加一些块或线程，AndBitwiseOperation() 不会给我正确的结果。每个块只有 1 个块和 1 个线程，结果是正确的，但内核不是并行的。
欢迎每一个建议:)
谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T23:32:07.057

当你声明一个`extern __shared__`数组时，你还必须在内核调用中指定它的大小。

内核配置为：

<<< **Dg** , **Db** , **Ns** , **S** >>>

**Ns**是`extern __shared__`数组的大小，默认为 0。

我认为您不能在内核中定义多个`extern __shared__`数组。编程指南中的一个示例定义了一个`extern __shared__`数组并手动设置其中包含偏移量的数组：

```
extern __shared__ float array[]; 
__device__ void func()      // __device__ or __global__ function 
{ 
    short* array0 = (short*)array;  
    float* array1 = (float*)&array0[128]; 
    int*   array2 =   (int*)&array1[64]; 
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-22T02:52:20.330

我真的不明白你的内核想要做什么。

**您应该阅读有关 CUDA 和 GPU 编程的更多信息。**

我试图指出一些错误。

1.  共享内存 (sm) 应减少全局内存读取。分析每个线程的全局内存 (gm) 读写操作。

    一种。你读了两次全局内存，写了两次 sm
    b. （废话循环被忽略，不使用索引）你读了两次sn，写了一次sm
    c。你读一次 sm 写一次 gm

    所以总的来说，你没有任何收获。您可以直接使用全局内存。

2.  您使用所有线程在块索引“i”处写出一个值。您应该只使用一个线程来写出这些数据。
    由多个将被序列化的线程输出相同的数据是没有意义的。

3.  您使用循环并且根本不使用循环计数器。

4.  你在“tid”写，在“i”随机读。

5.  此分配是开销。

    ```
    unsigned int tid = threadIdx.x; 
    ```

6.  结果不能超过一个块是正确的，因为一个块 tid = i!
    所有错误的索引都会导致使用多于一个块的错误计算

7.  “i”处的共享内存从未被写入！

    ```
    _memory_device[i] = shared_memory_data[i]; 
    ```

**我的假设你的内核应该做什么**

```
/*
 * Call kernel with x-block usage and up to 3D Grid
 */
__global__ void bitwiseAnd(int* outData_g, 
    const long long int inSize_s, 
    const int* inData1_g, 
    const int* inData2_g)
{
    //get unique block index
    const unsigned long long int blockId = blockIdx.x //1D
        + blockIdx.y * gridDim.x //2D
        + gridDim.x * gridDim.y * blockIdx.z; //3D

    //get unique thread index
    const unsigned long long int threadId = blockId * blockDim.x + threadIdx.x; 

    //check global unique thread range
    if(threadId >= inSize_s)
        return;

    //output bitwise and
    outData_g[thread] = inData1_g[thread] & inData2_g[thread];
} 
```

# c# - 更新在中继器中生成的 DropDownList 的值

> ID：10263456
> 
> 赞同：2
> 
> 时间：2012-04-21T22:09:14.450
> 
> 标签：c#, asp.net, drop-down-menu, repeater, itemdatabound

我已经对此进行了搜索，但似乎没有一个符合我需要的确切要求。这是场景：

1.  我有一个包含以下内容的列表：File1、File2、File3 和 File4。此列表绑定到中继器。
2.  每个转发器项都包含一个 DropDownList。
3.  我使用转发器的 ItemDataBound 事件来遍历列表，并为存储在我的列表中的所有项目创建和填充下拉列表。
4.  最终结果是它将为我生成一堆下拉列表，其中包含特定于页面中该列表项的值。

但是，要求发生了变化，变化涉及以下内容：

1.  如果列表的当前迭代是 File1，它将仅为 File1 创建一个下拉列表。然后对于 File2 和 File3，它不会创建新的下拉菜单，而是将值添加到 File1 的下拉按钮。
2.  如果列表的当前迭代是 File4，它会再次创建一个新的下拉列表。

那么有没有办法获取 File1 的 ID，这样当 File2 和 File3 的 ItemDataBound 事件触发时，它只会更新 File1 的 DropDownList？或者我必须寻找另一种方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T04:45:25.083

在 ItemDataBound 事件处理程序中，您可以获得对 DropDownList 的引用并存储在成员变量中。您可以使用该变量来保留对后续 ItemDataBound 事件的 DropDownList 的访问。

听起来你需要做这样的事情：

```
public partial class _Default : System.Web.UI.Page
{
    // Dummy data class. We'll bind a list of these to the repeater.
    class File
    {
        public string Name { get; set; }
        public int ID { get; set; }
        public List<string> AListOfStrings { get; set; }
    }

    protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);
        rptrTest.ItemDataBound +=
            new RepeaterItemEventHandler(rptrTest_ItemDataBound);
    }

    private DropDownList file1DropDown;

    void rptrTest_ItemDataBound(object sender, RepeaterItemEventArgs e)
    {
        // Find the DropDownList in the repeater's ItemTemplate
        // so we can manipulate it.
        DropDownList ddlSelect =
            e.Item.FindControl("ddlSelect") as DropDownList;
        File dataItem = (File)e.Item.DataItem;

        DropDownList currentDropDownList;
        switch (dataItem.ID)
        {
            case 1:
                // Store the current item's DropDownList for later...
                file1DropDown = ddlSelect;
                currentDropDownList = file1DropDown;
                break;
            case 2:
            case 3:
                currentDropDownList = file1DropDown;
                break;
            default:
                currentDropDownList = ddlSelect;
                break;
        }

        // Get all of the strings starting with the current ID and
        // add them to whichever DropDownList we need to modify.
        currentDropDownList.Items.AddRange((
            from s
            in dataItem.AListOfStrings
            where s.StartsWith(dataItem.ID.ToString())
            select new ListItem(s)).ToArray());
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        // Just build up a list of strings which we can filter later.
        List<string> stringList = new List<string>();
        foreach (string number in (new[] { "1", "2", "3", "4" }))
        {
            foreach (string letter in (new[] { "a", "b", "c", "d", "e" }))
            {
                stringList.Add(number + " " + letter);
            }
        }

        List<File> myObjects = new List<File>(new[]
        {
            new File { ID = 1, Name = "Foo", AListOfStrings = stringList },
            new File { ID = 2, Name = "Bar", AListOfStrings = stringList },
            new File { ID = 3, Name = "Baz", AListOfStrings = stringList },
            new File { ID = 4, Name = "Quux", AListOfStrings = stringList }
        });

        rptrTest.DataSource = myObjects;
        rptrTest.DataBind();
    }
} 
```

...您的 ASPX 页面将包含一个看起来像这样的转发器：

```
<asp:Repeater runat="server" ID="rptrTest">
    <ItemTemplate>
        ID: <%#DataBinder.Eval(Container.DataItem, "ID")%>
        <br />
        Name: <%#DataBinder.Eval(Container.DataItem, "Name")%>
        <br />
        Select: <asp:DropDownList runat="server" ID="ddlSelect" />
        <br /><br />
    </ItemTemplate>
</asp:Repeater> 
```

So in the `rptrTest_ItemDataBound` event handler in the code-behind file, there's a switch statement that checks `File.ID` to see which file instance it's binding to. If the ID is 1, the DropDownList gets assigned to `file1DropDown`. Then on subsequent events, the logic inside the rest of the switch block decides which DropDownList we need to modify.

# assembly - 汇编和逻辑分析仪 - 执行顺序

> ID：10263457
> 
> 赞同：1
> 
> 时间：2012-04-21T22:09:48.380
> 
> 标签：assembly

我有一个关于非常低级的事情的问题。我们正在分析微处理器如何执行简单的汇编程序，我们正在使用逻辑分析仪，所以我有 .law 文件。这是我们使用的代码（在我放置操作码的注释中）：

```
mov ax, 1000
mov ds, ax
mov bx, 2000
mov ax, 0aa

mov cx, 100

petla
    push cx ;51
    mov [bx],al ;8807
    mov ax,[bx] ;8B07
    inc al;FEc0
    pop cx;59
loop ;here goes address 
```

我们在调试程序中编写它，组装并观察输出。这是图像：

[http://img805.imageshack.us/img805/241/mikro.png](http://img805.imageshack.us/img805/241/mikro.png)

现在，这是奇怪的（至少对我而言）事情：

```
Data bus:51 - push cx
Data bus:8807 - mov [bx],al
Data bus:0001 - writing to 1EF6A
Data bus:8B07 - mov ax,[bx]
Data bus AA, address bus:12000 - that is writing al to [bx] (ds - 1000, bx - 2000) 
```

突然间，他将 CX 寄存器中的值写入内存中的某个位置（我怀疑 1EF6A 是 SS:SP 的物理地址）。是不是因为

```
push CX? 
```

如果是，他为什么在

```
mov [bx],al 
```

为什么写给 [bx] 的时间这么晚？

我在想应该在推送指令之后立即将值推送到堆栈。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T23:45:46.333

（对不起，我还没有足够的代表发表评论，所以我求助于写这个答案。）

@Andna：这是一个 8088，对吧？这就是分析器跟踪中的内存访问是一次一个字节的原因。所以你看到的是 8088 的预取单元的结果，它盲目地从内存中读取指令字节并将它们保存在一个短的（4 字节）预取队列中，希望执行单元以后要使用它们。

由执行单元实际执行的指令产生的数据操作将在一段时间后出现在总线上。这就是为什么写入内存的 CX 值不会在`push CX`读取指令后立即显示，以及为什么 AL 写入直到读取指令后才会出现在总线上`MOV AX,[BX]`。这也是为什么在循环结束时（不幸的是，此跟踪快照中没有显示），您会看到循环指令之后的预取单元读取指令。然而，执行单元不会执行那些指令。

您担心预取单元的预读可能产生不良副作用是正确的，但是只有当您处理在预取单元已经从该位置收集先前值之后写入的内存位置时才会出现危险，并且仅当您处理程序执行当前点上方的内存位置时才会发生。如果您曾经处于这种情况，那么您必须在尝试读取新写入的位置之前执行一些操作以使预取队列的内容无效。执行一个`JMP`将做到这一点。

@Zack：这里没有乱序执行，没有多核或多线程，甚至没有任何缓存。只是少量的盲目的、投机的预取。是的，预取确实使跟踪跟踪比 8085 稍微复杂一些。

# android - Webview 与 Google Play 网站冻结

> ID：10263459
> 
> 赞同：0
> 
> 时间：2012-04-21T22:09:52.950
> 
> 标签：android, webview, freeze

我整个晚上都被这个问题困住了。我有一个打开 google play 发布站点的 webview。我登录，它加载框架，然后卡在“加载”文本和进度圈图像（冻结）。它可以保持这种状态 2 分钟，然后显示一切正常。这是我的 HTC Desire 与 Oxygene 2.3.2 (Android 2.3.7)。**同样在内置浏览器中也会发生同样的事情。我在大约 6 小时后发现了这一点。** 当我在我的 Asus Transformaer Prime 上运行它时，它需要 1-2 秒才能显示，完全正常，2.2 的模拟器运行它就好了。我已经尝试改变很多东西，但我的欲望仍然停滞不前。我不知道 google play 网站有什么特别之处，以至于我的 android 版本无法处理。有类似经历的吗？？？

我的测试活动（为这篇文章弥补了这一点）。

```
public class HelloWorldActivity extends Activity {

public final static boolean debug = true;
public final static String TAG    = "HELLOWORLD";

private WebView mWebView;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    String mURL = "https://play.google.com/apps/publish/Home";
    mWebView = (WebView) findViewById(R.id.mywebview);
    mWebView.setWebViewClient( new MyWebViewClient() );
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.getSettings().setDomStorageEnabled(true);
    mWebView.getSettings().setSupportZoom(true);
    mWebView.getSettings().setBuiltInZoomControls(true); 
    mWebView.loadUrl(mURL);

}

private class MyWebViewClient extends WebViewClient {

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url);
        return true;
    }

    @Override
    public void onPageStarted(WebView view, String url, Bitmap favicon) {
        if(debug)
            Log.i(TAG,"onPageStarted("+url+")");
    }

    @Override
    public void onPageFinished(WebView view, String url) {
        if(debug)
            Log.i(TAG,"onPageFinished("+url+")");
    }

}
} 
```

**在 main.xml**

```
<WebView
    android:id="@+id/mywebview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
</WebView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T05:17:41.447

我对 4.0.4 版本也有类似的情况。感觉是网络接口或网络接口驱动程序的问题。我尝试在不同的模拟器上运行它，一个运行良好，而另一个......不是。我认为这是特定机器/电话的特定事物。

# sencha-touch - 引用 NestedList 中的容器

> ID：10263460
> 
> 赞同：2
> 
> 时间：2012-04-21T22:09:56.410
> 
> 标签：sencha-touch, extjs, sencha-touch-2, sencha-architect

我正在尝试在此页面中执行最后一个示例

[http://docs.sencha.com/touch/2-0/#!/guide/nested_list](http://docs.sencha.com/touch/2-0/#!/guide/nested_list)

我正在使用 sencha 架构师，但在示例中，我必须引用嵌套列表才能使用容器的详细信息卡，但我不能这样做，因为我无法在 sencha 架构师中编辑代码。我应该怎么做才能在嵌套列表中提供参考以使用容器和详细信息卡？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:54:39.877

您可以创建自定义视图来显示记录详细信息并将其显示在嵌套列表的 Leafitemtap 事件中。例如，您可以编写一个事件处理程序，包括：

```
var details = Ext.create('App.view.RecordDetail');
//lets say txtRecord is a text field in RecordDetail view
Ext.getCmp('txtRecord').setValue(record.get('text')); 
Ext.Viewport.setActiveItem(details); 
```

您还可以在详细信息视图中使用包含后退按钮的工具栏，用于导航回嵌套列表。或者，您可以查看`Ext.navigation.View`自动导航。

# c# - WCF/REST 哈希/盐数据成员字段

> ID：10263464
> 
> 赞同：0
> 
> 时间：2012-04-21T22:10:26.860
> 
> 标签：c#, wcf, linq, rest, authentication

我有一个数据合同，在我的服务中，我正在尝试对密码数据成员进行哈希/加盐：

```
 public void AddStudent(Student student)
    {
        student.StudentID = (++eCount).ToString();
        byte[] passwordHash = Hash(student.Password, _passwordSalt); //invalid expression? _passwordSalt?
        student.TimeAdded = DateTime.Now;
        students.Add(student);
    } 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T22:26:16.387

尝试用我的一个项目中的`_passwordSalt`此功能替换`GenerateSalt()`：

```
protected RNGCryptoServiceProvider random = new RNGCryptoServiceProvider();

public byte[] GenerateSalt() {
    byte[] salt = new byte[10];
    random.GetNonZeroBytes(salt);
    return salt;
} 
```

顺便说一句，你必须保存这个生成的盐。每次检查密码都需要相同的盐。

# python - 在不清除屏幕的情况下将 2d 水平打印到屏幕，高效

> ID：10263465
> 
> 赞同：0
> 
> 时间：2012-04-21T22:10:32.343
> 
> 标签：python, 2d, ascii

好吧，我正在用 Python 做一个项目，这是我的第一个真正的 Python 项目。现在，我的问题：图形。我认为最简单的方法是矮人堡垒风格的图形，每个图块都是一个 ASCII 颜色字母。现在，我有办法做到这一点，但我认为它不会很有效。这是我的代码：

```
import os
import time
import random
clear = lambda: os.system('clear')

g = '\033[32m' + '# '
t = '\033[31m' + '^ '
l = [g, g, g, g, g, g,
     g, g, g, g, g, g,
     g, g, g, g, g, g,
     g, g, g, g, g, g,
     g, g, g, g, g, g,
     g, g, g, g, g, g]

def level():
    i = 0
    while i < 1000:
        print l[0] + l[1] + l[2] + l[3] + l[4] + l[5]
        print l[6] + l[7] + l[8] + l[9] + l[10] + l[11]
        print l[12] + l[13] + l[14] + l[15] + l[16] + l[17]
        print l[18] + l[19] + l[20] + l[21] + l[22] + l[23]
        print l[24] + l[25] + l[26] + l[27] + l[28] + l[29]
        print l[30] + l[31] + l[32] + l[33] + l[34] + l[35]
        i += 1

        for b in l:
            ch = round(random.random())
            if ch:
                l[l.index(b)] = g
            else:
                l[l.index(b)] = t       
        clear()
level() 
```

我从堆栈溢出的某个地方得到了清晰的东西，但它不应该在 Windows 上工作，考虑到在 Windows 上的 clear 命令是“clr”，而在 Mac 和 Linux 上，它是“clear”。帮助？

编辑-'问题不在于颜色，而在于印刷。基本上，我怎样才能打印它，这样我就不必清除屏幕，我怎样才能打印它，然后改变它，或者什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T22:22:44.827

据我所知，所有这种基于 ASCII 的终端图形操作通常都是使用[Curses 库](http://docs.python.org/library/curses.html)完成的，所以我建议你尝试一下。

文档指出“ *curses 库保留两个数据结构，一个代表当前物理屏幕内容，一个虚拟屏幕代表所需的下一个状态。doupdate() 地面更新物理屏幕以匹配虚拟屏幕。* ”这似乎是正是你想要的。您只需在虚拟屏幕中绘制您想要的任何内容，一旦您准备好，您就调用`curses.doupdate()`更新物理屏幕以匹配虚拟屏幕的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T22:19:16.403

ANSI Escape 代码在 Windows 上不起作用，除非您安装一些工具来启用它。

由于您使用的是 Python，因此我在 SO 找到了您的解决方案（问题[Print in terminal with colours using Python?](https://stackoverflow.com/questions/287871/print-in-terminal-with-colors-using-python)）

转到 colorama：[http://pypi.python.org/pypi/colorama](http://pypi.python.org/pypi/colorama)。只需安装它（非常简单），您就可以开始使用了。

# java - 相互客户端身份验证在 Servlet 中获取证书

> ID：10263472
> 
> 赞同：9
> 
> 时间：2012-04-21T22:11:48.873
> 
> 标签：java, ssl, tomcat6

我已经设置了一个 Tomcat 7.0 应用程序服务器，通过 SSL 进行相互（客户端/服务器）身份验证。要设置此配置，我需要为服务器创建一个 .jks 文件，并在我的 Web 浏览器中创建一个 .pks 证书。在 Tomcat 中配置 server.xml 文件后，我进行了相互身份验证和 SSL 工作。现在我试图在 servlet 中获取证书，但是我似乎无法从 servlet 中的请求中获取证书。我可以设置一个过滤器，成功地从请求中提取证书。谁能给我提供一个配置/代码，让我从 servlet 中获取证书？我也会接受为什么我无法在 servlet 中获得证书的原因。

服务器.xml

```
<Connector
 clientAuth="true" port="8443" protocol="HTTP/1.1" SSLEnabled="true"
 scheme="https" secure="true"
 keystoreFile="C:/Users/Kevin Bowersox/Desktop/Development/My Certs/server.jks"
 keystoreType="JKS" keystorePass="notmypassword"
 truststoreFile="C:/Users/Kevin Bowersox/Desktop/Development/My Certs/server.jks"
 truststoreType="JKS" truststorePass="notmypassword"
 SSLVerifyClient="require" SSLVerifyDepth="2" sslProtocol="TLS"
/> 
```

MyServlet.java - 这会引发 RuntimeException，因为在点击 url 时找不到证书：[https://localhost:8443/Sample_Application/MyServlet](https://localhost:8443/Sample_Application/MyServlet)

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
          X509Certificate[] certs = (X509Certificate[]) request.getAttribute("javax.servlet.request.X509Certificate");
            if (null != certs && certs.length > 0) {
                System.out.println("cert found");
            }
            throw new RuntimeException("No X.509 client certificate found in request");
    } 
```

MyServlet 映射

```
<servlet>
    <description>
    </description>
    <display-name>MyServlet</display-name>
    <servlet-name>MyServlet</servlet-name>
    <servlet-class>MyServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>MyServlet</servlet-name>
    <url-pattern>/MyServlet</url-pattern>
</servlet-mapping> 
```

MyFilter.java - 点击 url 时返回“找到证书”：[https://localhost:8443/Sample_Application/test.jsp](https://localhost:8443/Sample_Application/test.jsp)

```
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
     X509Certificate[] certs = (X509Certificate[]) request.getAttribute("javax.servlet.request.X509Certificate");
        if (null != certs && certs.length > 0) {
            System.out.println("cert found");
        }
        //throw new RuntimeException("No X.509 client certificate found in request");
    chain.doFilter(request, response);
} 
```

我的过滤器映射

```
<filter>
    <description>
    </description>
    <display-name>MyFilter</display-name>
    <filter-name>MyFilter</filter-name>
    <filter-class>MyFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>MyFilter</filter-name>
    <url-pattern>*.jsp</url-pattern>
</filter-mapping> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T10:06:04.767

这是工作。但是，Servlet 被编码为总是抛出 RuntimeException，所以看起来它不起作用。

# apache - 如何使用 Apache 将目录重定向到另一个域？

> ID：10263476
> 
> 赞同：3
> 
> 时间：2012-04-21T22:12:16.933
> 
> 标签：apache, redirect

我有一个 Apache 服务器，上面有两个域（通过 VirtualHost）。
文件设置是这样的：`/example1/example2/`
`example1`是根`www.example1.com`
`example2`是`www.example2.com`
我想`www.example1.com/example2/<whatever else>`重定向到的根`www.example2.com/<whatever else>`
我可以访问主 Apache 配置文件。关于如何做到这一点的任何提示？我对配置 Apache 不是很熟悉，因此非常感谢任何解释。

与此相关的其他问题缺乏解释，所以我觉得我必须发布自己的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T22:21:32.677

您可以使用 .htaccess 文件快速完成此操作。在`www.example1.com/example2/`中，您将创建此 .htaccess 文件。

```
<VirtualHost *:80>
    ...
    <Directory /path/to/vhost/>
      RewriteEngine on
      RewriteBase /example2/
      RewriteRule ^(.*)$ http://www.example2.com/$1 [R=301]
    </Directory>
</VirtualHost> 
```

这确实假设您希望重定向为 301，并且该`example2`文件夹已`AllowOverride All`设置。

此规则使用正则表达式来捕获传入的 URL，删除该`example2`位，然后将其附加到重写的 URL。方`R`括号中的 告诉 Apache 对重写的 URL 使用 Location 标头。`=301`告诉 Apache 使用 301 永久重定向标头。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-28T17:46:24.580

如果你有`mod_alias`活动，你可以使用[重定向](http://httpd.apache.org/docs/current/mod/mod_alias.html#redirect)指令：

```
<VirtualHost *:80>
    ServerName example1.com
    Redirect 301 /example2 http://www.example2.com
</VirtualHost> 
```

# xml - 是否可以在具有可变元素顺序的 xsd 中使用继承？

> ID：10263478
> 
> 赞同：2
> 
> 时间：2012-04-21T22:12:42.517
> 
> 标签：xml, xsd

是否可以在具有可变元素顺序的 xsd 中使用继承？

基本上，这样的事情是行不通的，因为“扩展”中不允许“全部”：

```
<xs:complexType name="root">
    <xs:complexContent>
          <xs:all>
              <xs:element name="A" type="xs:string"/>
              <xs:element name="B" type="xs:string"/>
          </xs:all>
    </xs:complexContent>
</xs:complexType>

<xs:complexType name="extended">
    <xs:complexContent>
        <xs:extension base="root"> 
            <xs:all>
              <xs:element name="C" type="xs:string"/>
              <xs:element name="D" type="xs:string"/>
            </xs:all>
        </xs:extension>
    </xs:complexContent>
</xs:complexType> 
```

最简单的解决方案就是使用“sequence”而不是“all”，但在我的情况下，这不是一个选项，因为不能保证元素顺序，所以像这样：

```
<obj>
  <B/>
  <C/>
  <D/>
  <A/>
</obj> 
```

由于错误的元素顺序，将是无效的，但不应该是因为所有元素都存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T23:07:58.047

您的示例在 XSD 1.1 中是合法的，上周成为推荐。XSD 1.1 在 Xerces 和 Saxon 中实现。

# python - 将 request.path 与 Django 模板中的反向 url 进行比较

> ID：10263482
> 
> 赞同：8
> 
> 时间：2012-04-21T22:13:59.677
> 
> 标签：python, django, django-templates

我知道这`request.path`会给我当前的 URL。

我目前正在`base.html`使用 CSS 选项卡处理我的模板，我希望模板知道哪个选项卡当前处于“活动状态”并传递`class="active-tab"`给`<a>`标签。

所以我想做类似的事情

```
<a href="{% url orders_list %}"
    {% if request.path = reverse('orders_list') %}
        class="active-tab"
    {$ endif %}
>Orders</a> 
```

但我敢肯定你不能做这样的`if`比较。我也只想要忽略任何 GET 参数的基本 (?) URL。

任何建议或提示也欢迎。提前致谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-06-26T04:21:22.247

基于 Josh 的回答，您可以使用一个简单的“if”标签：

```
{% url 'orders_list' as orders_list_url %}
<a{% if request.path == orders_list_url %} class="active"{% endif %}
  href="{{ orders_list_url }}">Orders</a> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-04T08:05:31.030

最佳答案的更好版本是反转视图名称：

```
{% url_active 'reverse_viewname' %} 
```

这个版本不需要你传入`request`. 相反，我们指出标签需要上下文，然后从中获取请求。

```
from django import template
from django.core.urlresolvers import reverse

register = template.Library()

@register.simple_tag(takes_context=True)
def url_active(context, viewname):
    request = context['request']
    current_path = request.path
    compare_path = reverse(viewname)
    if current_path == compare_path:
        return 'active'
    else:
        return '' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T00:28:12.187

您可以使用[自定义模板标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)

```
from django import template

register = template.Library()

@register.simple_tag
def active(request, pattern):
    path = request.path
    if path == pattern:
        return 'active'
    return '' 
```

然后在您的模板中使用有点像这样：

```
{% load my_tags %}

{% url orders_list as orders %}
<li class="{% active request orders %}"> 
    <a href="{{ orders }}"> Orders </a> 
</li> 
```

您可以根据需要修改模板标签。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-14T21:51:50.030

灵感来自美洲狮的回答：

```
$("ul.nav [href='"+window.location.pathname+"']").parents("li").addClass('active'); 
```

这个解决方案是纯 JS，适用于 Bootstrap 的导航栏。对于 OP 的场景，可以使用：

```
$("[href='"+window.location.pathname+"']").addClass('active-tab'); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-11-10T21:22:00.800

带有 if-then-else 选项的解决方案：

```
from django import template
from django.template.base import Node, NodeList, TemplateSyntaxError

register = template.Library()

class IfCurrentViewNode(Node):
    child_nodelists = ('nodelist_true', 'nodelist_false')

    def __init__(self, view_name, nodelist_true, nodelist_false):
        self.view_name = view_name
        self.nodelist_true, self.nodelist_false = nodelist_true, nodelist_false

    def __repr__(self):
        return "<IfCurrentViewNode>"

    def render(self, context):
        view_name = self.view_name.resolve(context, True)
        request = context['request']
        if request.resolver_match.url_name == view_name:
            return self.nodelist_true.render(context)
        return self.nodelist_false.render(context)

def do_ifcurrentview(parser, token):
    bits = token.split_contents()
    if len(bits) < 2:
        raise TemplateSyntaxError("'%s' takes at least one argument"
                                  " (path to a view)" % bits[0])
    view_name = parser.compile_filter(bits[1])
    nodelist_true = parser.parse(('else', 'endifcurrentview'))
    token = parser.next_token()
    if token.contents == 'else':
        nodelist_false = parser.parse(('endifcurrentview',))
        parser.delete_first_token()
    else:
        nodelist_false = NodeList()
    return IfCurrentViewNode(view_name, nodelist_true, nodelist_false)

@register.tag
def ifcurrentview(parser, token):
    """
    Outputs the contents of the block if the current view match the argument.

    Examples::

        {% ifcurrentview 'path.to.some_view' %}
            ...
        {% endifcurrentview %}

        {% ifcurrentview 'path.to.some_view' %}
            ...
        {% else %}
            ...
        {% endifcurrentview %}
    """
    return do_ifcurrentview(parser, token) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-21T22:32:38.050

您可以`request.path = reverse('orders_list')`在视图中计算您需要的任何内容（例如）并将结果传递给模板。在视图（python 代码）中，您可以随心所欲地操纵路径。

您可以检查一个 URL 是否是另一个 URL 的前缀。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-24T12:44:45.327

试试这个 jQuery 语句：

```
$("[href='{{ request.path }}']").parents("li").addClass('active'); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-08-22T20:48:17.337

用法：`{% url_active "home" "other-view" "and-so-on" success="active-specific-class" %}`

```
from django import template

register = template.Library()

@register.simple_tag(takes_context=True)
def url_active(context, *args, **kwargs):
    if 'request' not in context:
        return ''

    request = context['request']
    if request.resolver_match.url_name in args:
        return kwargs['success'] if 'success' in kwargs else 'active'
    else:
        return '' 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-22T22:50:25.377

我想出了一种在 jQuery 中做这件事的黑客方法......但我仍然愿意寻求更好的解决方案。

jQuery：

```
var tab_list = {
    'orders-tab' : '{% url orders_list %}',
    'users-tab'  : '{% url users_list %}',
    'vendors-tab': '{% url vendors_list %}',
    'places-tab' : '{% url places_list %}'
}

$(document).ready(function() {
    for(var property in tab_list) {
        if('{{ request.path }}' == tab_list[property]) {
            $('#' + property).addClass('active-tab')
            break
        }
    }
}) 
```

HTML：

```
<ul id="tabs" class="fl">
    <li><a href="#" id="dashboard-tab" class="dashboard-tab">Dashboard</a></li>
    <li><a href="{% url orders_list %}" id="orders-tab">Orders</a></li>
    <li><a href="{% url users_list %}" id="users-tab">Users</a></li>
    <li><a href="{% url vendors_list %}" id="vendors-tab">Vendors</a></li>
    <li><a href="{% url places_list %}" id="places-tab">Places</a></li>
</ul> 
```

# javascript - Pinterest (PinIt) 按钮不起作用

> ID：10263485
> 
> 赞同：2
> 
> 时间：2012-04-21T22:14:31.540
> 
> 标签：javascript, social, pinterest

我网站上的 PinIt 按钮不起作用。我在按钮出现的地方有这个：

```
 <a href="http://pinterest.com/pin/create/button/?url=www.kitchenprague.com/works.php?id=3" class="pin-it-button" count-layout="horizontal"><img border="0" src="//assets.pinterest.com/images/PinExt.png" title="Pin It" /></a> 
```

这只是在关闭body标签之前：

```
<script type="text/javascript" src="http://assets.pinterest.com/js/pinit.js"></script> 
```

单击按钮打开 pinterest 窗口，但当我实际尝试固定该项目时没有任何反应。该代码是从 pinterest 粘贴的。[您可以在kitchenprague.com](http://www.kitchenprague.com)上我们的作品和新闻部分或此页面上看到我的示例和问题，[只需一个按钮](http://kitchenprague.com/pinterest.html)，我在 url 中没有任何参数。

任何想法我可能做错了什么？提前感谢您的回答...

# jquery - 使用jquery搜索字符串以查看它是否包含数组中的值

> ID：10263493
> 
> 赞同：0
> 
> 时间：2012-04-21T22:15:39.403
> 
> 标签：jquery, arrays, search, indexof

我正在尝试查看字符串是否包含关键字以确定它是城镇还是道路。由于值的数量不同，而不是写成：

```
(Road.search("Way") != -1) || (Road.search("Road") != -1) || (Road.search("Ave") != -1) 
```

对于每个值，我想知道是否有更简单的方法？

值为

Cl, 关闭κλείσιμο, Rd, 道路, 博士, 驱动器, Sq, 广场, 方式, Ave, 大道, 花园, 洛克, Ct, 法院, 露台

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T22:18:39.680

使用一些正则表达式快速简单：

```
if (/\b(road|rd|ave|avenue|cl|close)\b/i.test(string)) {
    // It's a road
} 
```

# python - Django 无效的块标签：'endfor'，预期的'endblock'

> ID：10263495
> 
> 赞同：6
> 
> 时间：2012-04-21T22:16:26.463
> 
> 标签：python, django, django-templates, render, syntax-error

`TemplateSyntaxError`Django中这个的原因可能是什么？

```
Invalid block tag: 'endfor', expected 'endblock' 
```

到目前为止，我的模板非常简单：

```
{% extends 'base.html' %}
{% block content %}
    <div id='beerslist'>
        {$ for beer in beers %}
        {{ beer }}
        {% endfor %}
    </div>
{% endblock %} 
```

查看回溯列表后，“啤酒”变量存在并且正在返回一个数组。如何修复此语法错误？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-21T22:20:41.257

```
{$ for beer in beers %} 
```

您输入了 a`$`而不是`%`. 这就是为什么它无法识别`for`并抱怨当它看到 时没有`for`阻止它关闭`endfor`。

# opengl - 加载并绑定纹理，但片段着色器不渲染它

> ID：10263496
> 
> 赞同：7
> 
> 时间：2012-04-21T22:16:33.520
> 
> 标签：opengl, glsl

我正在尝试用 FBO 纹理绘制一个立方体。纹理被正确渲染（我可以在 gDebugger 中看到），但它不会在立方体上渲染。我认为这可能是 FBO 纹理的问题，所以我加载了一个普通纹理并尝试了它，但我遇到了同样的问题，只是一个黑色立方体。

单步执行 gDebugger 中的程序，我可以看到纹理已正确加载和绑定，但没有绘制任何内容。texcoords似乎也没有任何问题。请注意，我还尝试在片段着色器中输出一个可以正常工作的纯色。

这是我的顶点着色器：

```
#version 420

uniform mat4 projection;
uniform mat4 view;
uniform mat4 model;

layout(location = 0) in vec3 vertex;
layout(location = 1) in vec2 texcoord;

out vec2 f_texcoord;

void main() {
    gl_Position = projection * view * model * vec4(vertex, 1.0);
    f_texcoord = texcoord;
} 
```

这是我的片段着色器：

```
#version 420

uniform sampler2D tex;

in vec2 f_texcoord;

out vec4 gl_FragColor;

void main() {
    gl_FragColor = texture2D(tex, f_texcoord);
} 
```

这就是我绘制立方体的地方：

```
ShaderManager::Get("world")->Use();
glBindVertexArray(cube_vao);
glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, tex);
glDrawArrays(GL_TRIANGLES, 0, 36);
glBindTexture(GL_TEXTURE_2D, 0);
glBindVertexArray(0); 
```

我一定是盲目的，因为我看不到任何错误。

（另外，请注意我使用 SFML 和 GLEW 来创建和扩展上下文。）

**编辑：**

我不知道这是否会有所帮助，但这就是我设置立方体 VBO、制服等的方式：

```
glClearColor(1.0, 0.0, 0.0, 1.0);

glEnable(GL_DEPTH_TEST);

glGenTextures(1, &tex);
glBindTexture(GL_TEXTURE_2D, tex);
sf::Image img;
img.LoadFromFile("test.png");
img.FlipVertically();
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, img.GetWidth(), img.GetHeight(), 0, GL_RGBA, GL_UNSIGNED_BYTE, img.GetPixelsPtr());
glBindTexture(GL_TEXTURE_2D, 0);

ShaderTime = 0.0;
camz = -4.0f;
rotation_y = 0.0f;

Shader* shader = ShaderManager::Load("shader", "fx.vert", "fx.frag");
Shader* world = ShaderManager::Load("world", "world.vert", "world.frag");
shader->Use();
glUniform1f(glGetUniformLocation(shader->GetId(), "time"), ShaderTime);
world->Use();
glm::mat4 proj = glm::perspective(60.0f, (float)WINDOW_WIDTH / (float)WINDOW_HEIGHT, 0.1f, 1000.0f);
glm::mat4 view = glm::translate(glm::mat4(1.0f), glm::vec3(0.0f, 0.0f, camz));
glm::mat4 model;
glUniformMatrix4fv(glGetUniformLocation(world->GetId(), "projection"), 1, GL_FALSE, glm::value_ptr(proj));
glUniformMatrix4fv(glGetUniformLocation(world->GetId(), "view"), 1, GL_FALSE, glm::value_ptr(view));
glUniformMatrix4fv(glGetUniformLocation(world->GetId(), "model"), 1, GL_FALSE, glm::value_ptr(model));
glUniform1i(glGetUniformLocation(world->GetId(), "tex"), 0);

glGenVertexArrays(1, &cube_vao);
glBindVertexArray(cube_vao);
glGenBuffers(1, &cube_vbo);
glBindBuffer(GL_ARRAY_BUFFER, cube_vbo);

GLfloat* data = new GLfloat[5 * 36] {
    // Front
    -1.0f, -1.0f, 1.0f, 0.0f, 0.0f,     -1.0f, 1.0f, 1.0f, 0.0f, 1.0f,      1.0f, 1.0f, 1.0f, 1.0f, 1.0f,
    1.0f, 1.0f, 1.0f, 1.0f, 1.0f,       1.0f, -1.0f, 1.0f, 1.0f, 0.0f,      -1.0f, -1.0f, 1.0f, 0.0f, 0.0f,

    // Back
    -1.0f, -1.0f, -1.0f, 0.0f, 0.0f,    -1.0f, 1.0f, -1.0f, 0.0f, 1.0f,     1.0f, 1.0f, -1.0f, 1.0f, 1.0f,
    1.0f, 1.0f, -1.0f, 1.0f, 1.0f,      1.0f, -1.0f, -1.0f, 1.0f, 0.0f,     -1.0f, -1.0f, -1.0f, 0.0f, 0.0f,

    // Top
    -1.0f, 1.0f, 1.0f, 0.0f, 1.0f,      -1.0f, 1.0f, -1.0f, 0.0f, 1.0f,     1.0f, 1.0f, -1.0f, 1.0f, 1.0f,
    1.0f, 1.0f, -1.0f, 1.0f, 1.0f,      1.0f, 1.0f, 1.0f, 1.0f, 1.0f,       -1.0f, 1.0f, 1.0f, 0.0f, 1.0f,

    // Bottom
    -1.0f, -1.0f, 1.0f, 0.0f, 1.0f,     -1.0f, -1.0f, -1.0f, 0.0f, 1.0f,        1.0f, -1.0f, -1.0f, 1.0f, 1.0f,
    1.0f, -1.0f, -1.0f, 1.0f, 1.0f,     1.0f, -1.0f, 1.0f, 1.0f, 1.0f,      -1.0f, -1.0f, 1.0f, 0.0f, 1.0f,

    // Left
    -1.0f, -1.0f, -1.0f, 0.0f, 0.0f,    -1.0f, 1.0f, -1.0f, 0.0f, 1.0f,     -1.0f, 1.0f, 1.0f, 0.0f, 1.0f,
    -1.0f, 1.0f, 1.0f, 0.0f, 1.0f,      -1.0f, -1.0f, 1.0f, 0.0f, 0.0f,     -1.0f, -1.0f, -1.0f, 0.0f, 0.0f,

    // Right
    1.0f, -1.0f, -1.0f, 0.0f, 0.0f,     1.0f, 1.0f, -1.0f, 0.0f, 1.0f,      1.0f, 1.0f, 1.0f, 0.0f, 1.0f,
    1.0f, 1.0f, 1.0f, 0.0f, 1.0f,       1.0f, -1.0f, 1.0f, 0.0f, 0.0f,      1.0f, -1.0f, -1.0f, 0.0f, 0.0f
};

glBufferData(GL_ARRAY_BUFFER, (5 * 36) * sizeof(GLfloat), data, GL_STATIC_DRAW);
glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, sizeof(GLfloat) * 5, (GLvoid*)(0));
glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, sizeof(GLfloat) * 5, (GLvoid*)(sizeof(GLfloat) * 3));

glEnableVertexAttribArray(0);
glEnableVertexAttribArray(1);

glBindBuffer(GL_ARRAY_BUFFER, 0);
glBindVertexArray(0); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T22:40:54.443

===编辑===

看起来您缺少缩小过滤器的纹理设置，如果您不使用 mipmapped 纹理，这是一个问题。见这里：[http ://www.opengl.org/wiki/Common_Mistakes#Creating_a_complete_texture](http://www.opengl.org/wiki/Common_Mistakes#Creating_a_complete_texture)

# ruby - 停止线程，确保运行某些最终代码

> ID：10263497
> 
> 赞同：5
> 
> 时间：2012-04-21T22:16:41.023
> 
> 标签：ruby, multithreading, console

对于[这个答案](https://stackoverflow.com/questions/10262235/printing-an-ascii-spinning-cursor-in-the-console/10263337#10263337)，我编写了如下代码：

```
def show_wait_spinner
  dirty = false
  spinner = Thread.new{
    loop{
      print "*"
      dirty = true
      sleep 0.1
      print "\b"  
      dirty = false
    }    
  }
  yield
  spinner.kill
  print "\b" if dirty
end

print "A"
show_wait_spinner{ sleep rand }
puts "B" 
```

目标是确保最终输出是`"AB"`-`"\b"`如果线程尚未打印最终结果，则打印它。在存在的 Ruby 中，该代码对我来说似乎很乱`begin/rescue/ensure`。所以我尝试了一些其他的实现`show_wait_spinner`；他们都无法确保`"AB"`始终是输出，并且永远不会`"A*B"`or `"AB*"`。

**有没有更干净、更 Ruby 风格的方式来实现这个逻辑？**

## 通过 Mutex 在循环结束时停止

```
def show_wait_spinner
  stop = false
  stopm = Mutex.new
  spinner = Thread.new{
    loop{
      print "*"
      sleep 0.1
      print "\b"
      stopm.synchronize{ break if stop }
    }    
  }
  yield
  stopm.synchronize{ stop = true }
  STDOUT.flush
end 
```

......但我的逻辑必须是关闭的，因为这总是导致“A * B”。

## 通过线程局部变量在循环结束时停止

第二次尝试导致有时打印“A*B”，有时打印“AB”：

```
def show_wait_spinner
  stop = false
  spinner = Thread.new{
    Thread.current[:stop] = false
    loop{
      print "*"
      sleep 0.1
      print "\b"
      stopm.synchronize{ break if Thread.current[:stop] }
    }    
  }
  yield
  spinner[:stop] = true
  STDOUT.flush
end 
```

## 杀死并确保线程

```
def show_wait_spinner
  spinner = Thread.new{
    dirty = false
    begin
      loop{
        print "*"
        dirty = true
        sleep 0.1
        print "\b"
        dirty = false
      }    
    ensure
      print "\b" if dirty
    end
  }
  yield
  spinner.kill
  STDOUT.flush
end 
```

## 提高和拯救线程

```
def show_wait_spinner
  spinner = Thread.new{
    dirty = false
    begin
      loop{
        print "*"
        dirty = true
        sleep 0.1
        print "\b"
        dirty = false
      }    
    rescue
      puts "YAY"
      print "\b" if dirty
    end
  }
  yield
  spinner.raise
  STDOUT.flush
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T23:23:12.630

与其杀死你的线程，不如翻转一个变量，让它在预定义的点停止？如果您让它循环并在循环结束时退出，您将不会遇到太多麻烦。

例如：

```
def show_wait_spinner
  running = true

  spinner = Thread.new do
    while (running) do
      print "*"
      sleep 0.1
      print "\b"  
    end
  end

  yield
  running = false
  spinner.join
end

print "A"
show_wait_spinner{ sleep rand }
puts "B" 
```

当您打电话时，`Thread#kill`您不知道线程在哪里，并且线程没有机会清理它正在做的事情。如果您礼貌的“停止运行”请求不被尊重，您可以随时终止线程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T23:36:22.577

我更喜欢您的同步停止条件方法，但您有几个错误：

1.  设置停止变量后，您几乎立即结束程序，因此停止线程的是程序退出，而不是循环中的条件测试；使用 Thread#join 等待线程正常退出，您将获得所需的一致输出。
2.  `break`在同步块中打破块，而不是循环。

    ```
    def show_wait_spinner
      stop = false
      stopm = Mutex.new
      spinner = Thread.new{
        loop{
          print "*"
          sleep 0.1
          print "\b"
          break if stopm.synchronize{ stop }
        }
      }
      yield
      stopm.synchronize{ stop = true }
      spinner.join
      STDOUT.flush
    end

    print "A"
    show_wait_spinner{ sleep rand }
    puts "B" 
    ```

我会避免任何涉及 Thread#raise 和 Thread#kill 的解决方案，因为它们的行为永远无法预测和正确，请参阅[Charles Nutter 关于这些方法的破坏性的咆哮](http://headius.blogspot.com/2008/02/rubys-threadraise-threadkill-timeoutrb.html)。

Mutex#synchronize 仅对于这种简单的布尔翻转是必需的，如果您真的非常关心父线程设置 var 时竞争条件周围的精确时间，在本示例中这不太可能，因此您可以避免开销和只需正常设置和读取`stop`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T23:27:52.300

在您的互斥锁示例中，您需要等待线程完成才能退出该方法。当前您设置`stop`为 true，然后退出该方法，打印`B`并在微调器线程能够唤醒并打印最后一个退格键以删除`*`字符之前结束您的脚本。

此外，`break`in`stopm.synchronize{ break if stop }`仅退出内部块，而不是循环，因此您需要使用 catch/throw 或其他东西。

但是，您不需要互斥锁。这在 1.9.3 中对我有用：

```
def show_wait_spinner
  exit = false
  spinner = Thread.new{
    loop{
      print "*"
      sleep 0.1
      print "\b" 
      break if exit
    }    
  }
  yield
  exit = true
  spinner.join
end 
```

在顶部添加`$stdout.sync = true`使其在 1.8.7 中工作。

# search - J2ME 登录和搜索记录存储

> ID：10263499
> 
> 赞同：1
> 
> 时间：2012-04-21T22:17:12.850
> 
> 标签：search, java-me, login

我是 J2ME 的新手，我正在学习我们使用它的课程。我使用选择组文本字段等创建了一个简单的旅行预订 MIDlet。然后我添加了一个记录存储来捕获此信息。我现在有一个只需要用户名的用户登录，但我不知道如何验证用户名是否在记录存储中，所以只要用户名的文本字段不为空，我就接受任何一个. 我的第一个问题是如何验证用户是否存在，我已经可以创建一个帐户。第二个问题是如何不按 id 搜索记录存储，而是说为记录存储的每一行使用一定范围内的字符串。

到目前为止，这是我的代码：

```
$import java.io.ByteArrayInputStream;
import java.io.DataInputStream;
import java.util.Date;
import javax.microedition.lcdui.*;
import javax.microedition.midlet.MIDlet;
import javax.microedition.rms.*;

/**
* @author XayBlu
*/
public class tripMe extends MIDlet implements CommandListener {
Form startForm, airForm, trainForm, cruiseForm, autoForm, Ext, Pass,home,login, create; 
Command Exit, Trip, Cinfo, AutC,AiC,CrC, info,Tme,trainC, logC,signC, createC, prev, newTrip, Home;
ChoiceGroup trans,hCAP, passCNT,airT,airC,AuC,AuT,CrL,CcabT,Tseat,TOP;
Display Xdisplay;
TextField Eneed, uName, uName2; 
Alert Final, FinalT, Sucess, nope;
DateField dDate, rDate;
Date d,r;
Image [] image;
String details =" ",tt="", Trav, Rdate, Ddate, extraA, Pcount,specialA, TT,AIR2, AIR,AUTO,AUTO2,CRUISE,CRUISE2,TRAIN,TRAIN2, USERS="USERS";
String op[] = {"Air","Auto","Cruise","Train"}; //Array Items for Choice Groups
String ep[] = {"Wheel Chair","Baby Seat","Extended Seatbelt","Extra Pillows","Oxygen Tank","GPS"};
String count[] = {"1","2","3","4","5","6","7","8"};
String AL []= {"American Airlines","Delta","US Airways","South West Airlines","United Airlines"};
String Rental [] = {"Alamo","Avis","Budget","Enteprise","Dollar","Hertz"};
String CL [] = {"Carnival","Norwegian","Royal Caribbean","Celebrity X","MSC"};
String CT [] = {"Compact","Standard","Full","SUV","Luxury","Sports"};
String Cabin [] = {"Suite","Ocean Balcony","Standard","Economy"};
String tCAB[] = {"Standard Seat","Sleeper Cart"};
String Toptions[] ={"Extra Luggage room","Salad Buffet","Wifi Access","Extra Blanket"};
RecordStore usr,itt;
RecordEnumeration recEnum = null;
RecordFilter filter = null;
int Umax=5;
int tran1 =6;
String last;
Byte [] data = new Byte[Umax];

 /* NEW COMMANDS FOR FLEXIBLE USER INPUT TO RECORD STORES */

public void writeRecord(String str){ // User to insert user input to record stores
byte[] rec = str.getBytes();
try{
usr.addRecord(rec, 0, rec.length);
}catch (Exception e){}
}

public void writeInfo(String str){ // User to insert user input to record stores
byte[] rec = str.getBytes();
try{
usr.addRecord(rec, tran1, rec.length);
}catch (Exception e){}
}

public void updateRecord(String str){
try{
usr.setRecord(1, str.getBytes(), 0, str.length());
}catch (Exception e){}
}

public void deleteRecord(){
try{
usr.deleteRecord(1);
}catch (Exception e){}
}

public void closeRecord(){
try{
usr.closeRecordStore();
}catch (Exception e){}
}

public void deleteRecStore(){
if (RecordStore.listRecordStores() != null){
try{
RecordStore.deleteRecordStore(USERS);
}catch (Exception e){}
}  
}

public void openRecStore()
{
try
{
  // The second parameter indicates that the record store
  // should be created if it does not exist
  usr = RecordStore.openRecordStore(USERS, true );
}
catch (Exception e)
{
  System.out.print("Could not open record store");
}
}

   public void readRecords()
{
try
{
  // Intentionally make this too small to test code below
  byte[] recData = new byte[5]; 
  int len;

  for (int i = 1; i <= usr.getNumRecords(); i++)      
  {
    if (usr.getRecordSize(i) > recData.length)
      recData = new byte[usr.getRecordSize(i)];

    len = usr.getRecord(i, recData, 0);
    home.append(new String(recData,0,len));
   // System.out.println("Record #" + i + ": " + new String(recData, 0, len));
   // System.out.println("------------------------------");                        
  }
}
catch (Exception e)
{
  nope = new Alert("Sorry no match!",null,null,AlertType.INFO);
  nope.setTimeout(Alert.FOREVER); //Append string for FinalT Alert
  Xdisplay.setCurrent(nope, login);
}
}

}

class Filter implements RecordFilter {
private String search = null;

private ByteArrayInputStream inputstream = null;

private DataInputStream datainputstream = null;

public Filter(String search) {
this.search = search.toLowerCase();
}

  public void filterClose() {
try {
  if (inputstream != null) {
    inputstream.close();
  }
  if (datainputstream != null) {
    datainputstream.close();
  }
} catch (Exception error) {
}
}
}

public tripMe (){

    try{ //Initializing individual images for Choice Group Icons
        Image car = Image.createImage("/car2.png");
        Image plane = Image.createImage("/plane2.png");
        Image train = Image.createImage("/train2.png");
        Image cruise = Image.createImage("/cruise2.png");

       image = new Image[] {plane,car,cruise,train}; //Initializing Image array for ChoiceGroup
    }
    catch (java.io.IOException err) {System.out.print("Could not load pics"); } //Throws exception if pic cannot be found

    startForm = new Form("Get Away Today"); //Initialization of forms
    Pass = new Form ("Passenger Information");
    airForm = new Form("Low Prices!");
    autoForm = new Form("Find the best car for you");
    Ext = new Form("Itinerary Details");
    Ext.setTicker(new Ticker("Enjoy Your Vacation"));
    cruiseForm = new Form("Sail Away Today");
    trainForm = new Form("Chuuu- Chuuu");

    login = new Form("Sign up Today");
    home = new Form("Welcome Back");
    create = new Form("Create an account");

    trans = new ChoiceGroup("Select travel type",ChoiceGroup.EXCLUSIVE,op,image); //Transport tation choice group initialized with corresponding string and image array
    Exit = new Command("Exit", Command.EXIT,1);//Adding necessary commands
    Trip = new Command("Go", Command.SCREEN,2);//Adding go command which allows you to select travel type

    signC = new Command("Sign up",Command.SCREEN,2);
    logC = new Command("Log in",Command.SCREEN,2);
    createC = new Command("OK",Command.SCREEN,2);
    prev = new Command("History",Command.SCREEN,2);
    newTrip = new Command("Reservations",Command.SCREEN,2);
    Home = new Command("Log out",Command.SCREEN,1);

    hCAP = new ChoiceGroup("Extra Assistance", ChoiceGroup.MULTIPLE,ep,null);//Passenger Info items
    passCNT = new ChoiceGroup("Number of Passengers:",ChoiceGroup.POPUP,count,null);
    rDate = new DateField("Return Date",DateField.DATE_TIME);//Could not get the DateField to return string date value
    dDate = new DateField("Departure Date",DateField.DATE_TIME);
    Eneed = new TextField("Special Needs","",50,TextField.ANY);

    uName = new TextField("User Name","",5,TextField.ANY);
    uName2 = new TextField("User Name","",5,TextField.ANY);

    info = new Command("Next",Command.SCREEN,2);
    AiC = new Command("Complete",Command.SCREEN,2);//Air travel option items
    airT = new ChoiceGroup("Choose Airline", ChoiceGroup.POPUP,AL,null);//Airline selection
    airC = new ChoiceGroup("Select Class",ChoiceGroup.EXCLUSIVE);//Economy or first cass?
    airC.append("First Class", null);//Adding elements to Choice Group
    airC.append("Economy", null);

    AuC = new ChoiceGroup("Choose rental company", ChoiceGroup.POPUP,Rental,null);//Auto travel option items
    AuT = new ChoiceGroup("Select Vehicle Type", ChoiceGroup.EXCLUSIVE, CT,null);//Choicegroup for Vehicle type
    AutC = new Command("Drive away", Command.SCREEN,2);//Adding drive away command to form

    CrL = new ChoiceGroup("Select Cruise Line Comp.", ChoiceGroup.POPUP,CL,null);//Cruise option Items, Cruise line choicegroup
    CcabT = new ChoiceGroup("Select Cabin Type", ChoiceGroup.EXCLUSIVE,Cabin,null);//Cabin type choice group
    CrC = new Command("Cruise", Command.SCREEN,2);//Cruise form command being added

    trainC = new Command("Track!", Command.SCREEN,2);//Train option items, Train form command
    Tseat = new ChoiceGroup("Seat Type", ChoiceGroup.EXCLUSIVE,tCAB,null);//Choicegroup for train seat type
    TOP = new ChoiceGroup("Extra Options", ChoiceGroup.POPUP,Toptions,null);//Train extra options choice group

    /* Appending Items to necessary Forms*/

    create.append(uName2);
    create.addCommand(createC);
    create.setCommandListener(this);

    home.addCommand(prev);
    home.addCommand(newTrip);
    home.setCommandListener(this);

    login.append(uName);
    login.addCommand(logC);
    login.addCommand(signC);
    login.setCommandListener(this);

    startForm.append(trans);
    startForm.addCommand(Exit);
    startForm.addCommand(Trip);
    startForm.setCommandListener(this);

    Pass.append(dDate);
    Pass.append(rDate);
    Pass.append(hCAP);
    Pass.append(passCNT);
    Pass.append(Eneed);
    Pass.addCommand(info);
    Pass.setCommandListener(this);

    airForm.append(airT);
    airForm.append(airC);
    airForm.addCommand(AiC);
    airForm.setCommandListener(this);

    autoForm.addCommand(AutC);
    autoForm.append(AuC);
    autoForm.append(AuT);
    autoForm.setCommandListener(this);

    cruiseForm.addCommand(CrC);
    cruiseForm.append(CrL);
    cruiseForm.append(CcabT);
    cruiseForm.setCommandListener(this);

    trainForm.addCommand(trainC);
    trainForm.append(Tseat);
    trainForm.append(TOP);
    trainForm.setCommandListener(this);

    Ext.addCommand(Exit);
    Ext.addCommand(Home);
    Ext.setCommandListener(this);
    }

    public void startApp() {
    Xdisplay= Display.getDisplay(this);
    Xdisplay.setCurrent(login);
      }

    public void pauseApp() {
      }

    public void destroyApp(boolean unconditional) {
    notifyDestroyed();
       }

    public void commandAction(Command c, Displayable displayable){

     try {
          usr = RecordStore.openRecordStore(USERS, false);
        } catch (Exception e) {

        Sucess = new Alert("Error","Could not open Record Strore",null,AlertType.INFO);
        Sucess.setTimeout(Alert.FOREVER); //Append string for FinalT Alert
        Xdisplay.setCurrent(Sucess, login);

                }
    if(c==signC)
     {
       Xdisplay.setCurrent(create);
      }
      else if(c == newTrip)
      {
       Xdisplay.setCurrent(startForm);
       }
      else if(c == prev)
      {

     try {
     String record = "";
     for (int i = 1; i < usr.getNextRecordID(); i++) {
    record = new String(usr.getRecord(i));
       }
   home.append(record);
   } catch (Exception e) {
    home.append("Could not retrieve data");
    try {
    usr.closeRecordStore();
    RecordStore.deleteRecordStore(USERS);
    } catch (Exception x) {
     }
    }

   try {
  usr.closeRecordStore();
  } catch (Exception e) {
  }
   }

   else if(c==createC)
   {
        try {
            usr = RecordStore.openRecordStore(USERS, true);

        } catch (RecordStoreException ex) {
            ex.printStackTrace();
        }

         if(!"".equals(uName2.getString()))
      {

        writeRecord(uName2.getString());

      }

        Sucess = new Alert("Welcome to the mile high club","Hello:"+uName2.getString(),null,AlertType.INFO);
        Sucess.setTimeout(Alert.FOREVER); //Append string for FinalT Alert
        Xdisplay.setCurrent(Sucess, login);
    }
     else if (c == logC)
     { 
      if(!"".equals(uName.getString()))
      {
        String name = uName.getString();
        byte[]  data = name.getBytes();

        Xdisplay.setCurrent(home);

      }
      else 
              {
         Sucess = new Alert("Please enter user name!","Invalid user name",null,AlertType.INFO);
        Sucess.setTimeout(Alert.FOREVER); //Append string for FinalT Alert
        Xdisplay.setCurrent(Sucess, login);
              }
      }

   else  if(c==Trip)
      {
        tt +="Travel Mode: "+ trans.getString(trans.getSelectedIndex())+"\n";

       if(trans.isSelected(0))
       {
           TT="A"; //Sets the type of travel based on choicegroup user selection
           Xdisplay.setCurrent(Pass);   
       }
       else if(trans.isSelected(1))
               {
                   TT="B";
                   Xdisplay.setCurrent(Pass);
               }
       else if(trans.isSelected(2))
               {
                   TT="C";
                   Xdisplay.setCurrent(Pass);
               }
       else if(trans.isSelected(3))
       {
           TT="D";
           Xdisplay.setCurrent(Pass);
         }
       }
      else if (c == info)
      {

     for(int i = 0; i < hCAP.size(); i++) //Checks to see what items are selected in a ChoiceGrou
       {
           if(hCAP.isSelected(i))
           {
               details += hCAP.getString(i)+","; //If item is selected then it is appended to the string details
           }
       }
       Rdate = rDate.getDate().toString();
       Ddate = dDate.getDate().toString();
       tt+= "Departure Date: "+ Ddate.substring(0, 10)+"\n";
       tt+= "Return Date:  "+ Rdate.substring(0, 10)+"\n";
       Pcount = passCNT.getString(passCNT.getSelectedIndex()); //Gets passenger count from choicegroup of integers
       specialA = Eneed.getString();
       Final = new Alert("Your travel details: \n","Requested Devices:"+details+"\nPassenger Count: "+Pcount+
             "\nSpecific Request: "+specialA,null,AlertType.INFO); //Appends string for alert 
       Final.setTimeout(Alert.FOREVER); 
       if("A".equals(TT)){ //Directs user to form based on travel type choice
           Xdisplay.setCurrent(Final,airForm);
       }
       else if("B".equals(TT)){//Directs user to form based on travel type choice
           Xdisplay.setCurrent(Final, autoForm);
       }
       else if ("C".equals(TT)){//Directs user to form based on travel type choice
           Xdisplay.setCurrent(Final, cruiseForm);
       }
       else if ("D".equals(TT)){//Directs user to form based on travel type choice
           Xdisplay.setCurrent(Final, trainForm);
       }
   }
  else if(c==AiC)
  {
      AIR = airT.getString(airT.getSelectedIndex());//Retrieves selected item from choicegroup
      tt+="Company: "+AIR+"\n";
      AIR2 = airC.getString(airC.getSelectedIndex());//Retrieves selected item from choicegroup

        FinalT = new Alert("Flight Details: \n","Airline Company:"+AIR+"\nSeat Class: "+AIR2,null,AlertType.INFO);
        FinalT.setTimeout(Alert.FOREVER); //Append string for FinalT Alert

         Trav ="Customer Details \nRequested Devices:\n"+details+"\n# of Passengers:\n "+Pcount+"\nSpecific customer request:\n "+specialA+
              "\nDeparture Date: "+Ddate+"\nReturn Date: "+Rdate;
      Ext.append(Trav);

        extraA ="Carrier Details\n"+"Airline Carrier: "+AIR+"\nSeat Type: "+AIR2; //Append string for final display of info to user
        Ext.append(extraA);

        try {
            usr = RecordStore.openRecordStore(USERS, true);

        } catch (RecordStoreException ex) {
        }
         writeRecord("\n"+tt);
        Xdisplay.setCurrent(FinalT,Ext);

  }
  else if (c == AutC)
  {
      AUTO = AuC.getString(AuC.getSelectedIndex());//Retrieves selected item from choicegroup
      tt += "Company: "+AUTO+"\n";
      AUTO2 = AuT.getString(AuT.getSelectedIndex());//Retrieves selected item from choicegroup

      FinalT = new Alert("Auto Details: \n","Car Rental Company:"+AUTO+"\nVehicle Class: "+AUTO2,null,AlertType.INFO);
      FinalT.setTimeout(Alert.FOREVER); 

     Trav ="Customer Details \nRequested Devices:\n"+details+"\n# of Passengers:\n "+Pcount+"\nSpecific customer request:\n "+specialA+
              "\nDeparture Date: "+Ddate+"\nReturn Date: "+Rdate;
      Ext.append(Trav);

       extraA ="Carrier Details\n"+"Rental Company: "+AUTO+"\nVehicle Class: "+AUTO2; //Append string for final display of info to user
       Ext.append(extraA);

       try {
            usr = RecordStore.openRecordStore(USERS, true);

        } catch (RecordStoreException ex) {
        }
       writeRecord("\n"+tt);
      Xdisplay.setCurrent(FinalT, Ext);
  }
  else if (c == CrC)
  {
      CRUISE = CrL.getString(CrL.getSelectedIndex());
      tt += "Company: "+CRUISE+"\n";
      CRUISE2 = CcabT.getString(CcabT.getSelectedIndex());

      FinalT = new Alert("Cruise Details: \n","Cruise Line Company:"+CRUISE+"\nCabin Type:"+CRUISE2,null,AlertType.INFO);
      FinalT.setTimeout(Alert.FOREVER); 

      Trav ="Customer Details \nRequested Devices:\n"+details+"\n# of Passengers:\n "+Pcount+"\nSpecific customer request:\n "+specialA+
              "\nDeparture Date: "+Ddate+"\nReturn Date: "+Rdate;
      Ext.append(Trav);

      extraA ="Carrier Details\n"+"Cruise Line Company: "+CRUISE+"\nCabin Type: "+CRUISE2; //Append string for final display of info to user
      Ext.append(extraA);
      try {
            usr = RecordStore.openRecordStore(USERS, true);

        } catch (RecordStoreException ex) {
        }
       writeRecord("\n"+tt);
      Xdisplay.setCurrent(FinalT, Ext);

      }
     else if (c == trainC)
     {
       TRAIN = Tseat.getString(Tseat.getSelectedIndex());
       TRAIN2 = TOP.getString(TOP.getSelectedIndex());

       FinalT = new Alert("Train Details: \n","Train Seat Type:"+TRAIN+"\nExtra Amenities:"+TRAIN2,null,AlertType.INFO);
      FinalT.setTimeout(Alert.FOREVER); 

      Trav ="Customer Details \nRequested Devices:\n"+details+"\n# of Passengers:\n "+Pcount+"\nSpecific customer request:\n "+specialA+
              "\nDeparture Date: "+Ddate+"\nReturn Date: "+Rdate;
      Ext.append(Trav);

       extraA ="Carrier Details\n"+"Train Seat Type: "+TRAIN+"\nExtra Amenities: "+TRAIN2; //Append string for final display of info to user
        Ext.append(extraA);

         try {
            usr = RecordStore.openRecordStore(USERS, true);

         } catch (RecordStoreException ex) {
          }

        writeRecord("\n"+tt);
         Xdisplay.setCurrent(FinalT, Ext);

     }
    else if(c == Home)
    {
     home.deleteAll();

      Xdisplay.setCurrent(login);

     }
     else  if(c==Exit)
    {
     destroyApp(false);
     notifyDestroyed();
    }

    }

   } 
```

# macos - launchd 执行 python 脚本的困难

> ID：10263501
> 
> 赞同：1
> 
> 时间：2012-04-21T22:17:35.153
> 
> 标签：macos, launchd

我正在尝试使用 launchd 每 10 分钟运行一次 python 脚本。使用 cron 这很容易，但我已经尝试了几个小时来了解如何操作 launchd，但我没有成功。我正在使用位于`/Users/turtle/bin/`. 这是我的启动文件 ( `com.foobar`) 的样子：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
    <dict>
        <key>Label</key>
        <string>com.foobar</string>
        <key>ProgramArguments</key>
        <array>
            <string>/Users/turtle/bin/python</string>
            <string>/Users/turtle/code/baz.py</string>
        </array>
        <key>StartCalendarInterval</key>
        <dict>
            <key>Minute</key>
            <integer>10</integer>
        </dict>
    </dict>
</plist> 
```

当我运行时：

`launchctl load /Library/LaunchAgents/com.foobar`

我得到：

`launchctl: Couldn't stat("/Library/LaunchAgents/com.foobar"): No such file or directory nothing found to load`

谁能帮我？谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:51:31.560

**StartCalendarInterval**键为**Minute**：脚本在每小时的第 10 分钟运行。

您必须使用**StartInterval**：作业每 N**秒启动一次**

```
<key>StartInterval</key>
<integer>600</integer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T22:25:44.243

```
launchctl load -w /Library/LaunchAgents/com.foobar 
```

那样有用吗？

# haskell - Haskell 调试

> ID：10263505
> 
> 赞同：6
> 
> 时间：2012-04-21T22:18:16.590
> 
> 标签：haskell, functional-programming

如何在每次通话时打印列表或 haskell 中的内容，例如：

```
funct a list = funct (a + 1) (a : list) 
               print list here ??????? but how ? 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-21T22:23:03.593

对于调试，有

```
import Debug.Trace

funct :: Integer -> [Integer] -> Bool 
funct a list = trace (show list) $ funct (a + 1) (a : list) 
```

哪里`trace :: String -> a -> a`。它`unsafePerformIO`在引擎盖下使用，所以它是邪恶的，*仅*用于调试。

请注意，由于延迟评估，调试输出可能会以令人惊讶的顺序出现，并与程序通常生成的输出交错。

和

```
module TraceIt where

import Debug.Trace

funct :: Integer -> [Integer] -> Bool
funct 10 list = null list
funct a list = trace (show list) $ funct (a + 1) (a : list) 
```

我明白了

```
*TraceIt> funct 1 []
[]
[1]
[2,1]
[3,2,1]
[4,3,2,1]
[5,4,3,2,1]
[6,5,4,3,2,1]
[7,6,5,4,3,2,1]
[8,7,6,5,4,3,2,1]
False 
```

正如预期的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T22:27:11.863

与 Daniel Fisher 建议的相同，但`unsafePerformIO`只有。

```
> import System.IO.Unsafe
> let funct a list = unsafePerformIO $ do { print list; return $ funct (a + 1) (a : list) } 
```

看看[类似的问题](https://stackoverflow.com/questions/3546592/how-to-debug-haskell-with-printfs)描述了你使用`unsafePerformIO`.

# content-management-system - 我需要使用 PAPI 将带有链接的页面从 MCSC 2002 复制到 Umbraco 的代码示例

> ID：10263506
> 
> 赞同：0
> 
> 时间：2012-04-21T22:18:28.543
> 
> 标签：content-management-system, umbraco, papi

我需要 .NET 中使用 PAPI 将带有链接的页面从 MCSC 2002 复制到使用 Umbraco 对象模型的 Umbraco CMS 的示例。该站点的另一个用户已经完成了它（Andy Rose - [https://stackoverflow.com/a/3678533](https://stackoverflow.com/a/3678533)）。但我不知道如何联系他，所以任何其他帮助将不胜感激。

谢谢，伊戈尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T00:00:51.493

在将内容从站点传输到新的 Umbraco 安装时，我使用 CMSImport 包。也许这对你有用？

[http://our.umbraco.org/projects/developer-tools/cmsimport/](http://our.umbraco.org/projects/developer-tools/cmsimport/)

# gwt - GWT - Log4j - 开发和生产

> ID：10263507
> 
> 赞同：2
> 
> 时间：2012-04-21T22:18:30.067
> 
> 标签：gwt, log4j, datanucleus

我将 log4j 用于我的 GWT 应用程序。

我在 WEB-INF/classes 中有我的 log4j.properties，内容如下：

```
log4j.rootLogger=WARN, console
log4j.appender.console=org.apache.log4j.ConsoleAppender
log4j.appender.console.layout=org.apache.log4j.PatternLayout
log4j.appender.console.layout.conversionPattern=%5p [%t] (%F:%L) - %m%n

# Configure the console as our one appender
log4j.appender.A1=org.apache.log4j.ConsoleAppender
log4j.appender.A1.layout=org.apache.log4j.PatternLayout
log4j.appender.A1.layout.ConversionPattern=%d{HH:mm:ss,SSS} %-5p [%c] - %m%n

# tighten logging on the DataNucleus Categories
log4j.category.DataNucleus.JDO=WARN, A1
log4j.category.DataNucleus.Persistence=WARN, A1
log4j.category.DataNucleus.Cache=WARN, A1
log4j.category.DataNucleus.MetaData=WARN, A1
log4j.category.DataNucleus.General=WARN, A1
.. 
```

我的问题是：

*   我应该如何修改我的 log4j.properties，以在开发模式下使用它（在控制台中输出）以及在我的 tomcat 上运行的生产（在文件中输出）？这是可能的还是将我的ant脚本中的log4j.properties修改为生产模式更好？也许最好有两个不同的文件？
*   默认 GWT 项目在 log4j.properties 中生成 DataNucleus 条目。这是干什么用的？DataNucleus 的优势是什么？如果我只想使用 log4j，这有什么意义吗？
*   在我的 WEB-INF 文件夹中还有一个默认的 logging.properties。这个文件是做什么用的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T17:31:24.380

DataNucleus 用于使用 JDO 或 JPA API 将对象持久化到数据存储区，通过简单的 Web 搜索进行验证。既然它是你的项目，你真的应该知道你是否在使用它。

# php - 将类添加到这一行... php/css

> ID：10263509
> 
> 赞同：0
> 
> 时间：2012-04-21T22:18:38.663
> 
> 标签：php, css

我在php中有这一行

```
<a title="'.htmlspecialchars($User->Name).'" href="'.$Href.'"'.$LinkClass.'> 
```

我需要添加另一个名为tip的类

上面的代码生成如下内容：

```
<a class="ProfileLink" href="/respond/profile/2/422" title="422"> 
```

如您所见，$LinkClass 为我提供了很棒的类“ProfileLink”

但我需要像“ProfileLink 提示”那样解析类

所以只是不确定如何将上面的 $LinkClass 修改为 $LinkClass 提示

这可能太基本了，我只是看不到树木的树木

//

编辑：添加

最终的 html 输出需要是：

```
<a class="ProfileLink tip" href="/respond/profile/2/422" title="422"> 
```

//

添加：

这个函数的整个 php 输出是：

```
 if (!function_exists('UserPhoto')) {
   function UserPhoto($User, $Options = array()) {
    $User = (object)$User;
  if (is_string($Options))
     $Options = array('LinkClass' => $Options);

  $LinkClass = GetValue('LinkClass', $Options, 'ProfileLink');
  $ImgClass = GetValue('ImageClass', $Options, 'ProfilePhotoMedium');

  $LinkClass = $LinkClass == '' ? '' : ' class="'.$LinkClass.'"';

  $Photo = $User->Photo;
  if (!$Photo && function_exists('UserPhotoDefaultUrl'))
     $Photo = UserPhotoDefaultUrl($User);

  if ($Photo) {
     if (!preg_match('`^https?://`i', $Photo)) {
        $PhotoUrl = Gdn_Upload::Url(ChangeBasename($Photo, 'n%s'));
     } else {
        $PhotoUrl = $Photo;
     }
     $Href = Url(UserUrl($User));
     return '<a title="'.htmlspecialchars($User->Name).'" href="'.$Href.'"'.$LinkClass.'>'
        .Img($PhotoUrl, array('alt' => htmlspecialchars($User->Name), 'class' => $ImgClass))
        .'</a>';
  } else {
     return '';
  } 
```

} }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T22:48:37.417

使用数组作为类属性怎么样？像这样：

```
$LinkClass= array();
$LinkClassVal = GetValue('LinkClass', $Options, 'ProfileLink'); 

if($LinkClassVal){
    $LinkClass[] = $LinkClassVal;
}

$LinkClass[] = "tip"; 
```

然后返回：

```
return '<a title="'.htmlspecialchars($User->Name).'" href="'.$Href.'"'.implode(" ",$LinkClass).'>'
    .Img($PhotoUrl, array('alt' => htmlspecialchars($User->Name), 'class' => $ImgClass))
    .'</a>'; 
```

# c# - 当我将二进制 blob 作为 .xlsx 发送时，IE9 随机弹出 Windows 安全对话框

> ID：10263515
> 
> 赞同：0
> 
> 时间：2012-04-21T22:19:18.350
> 
> 标签：c#, asp.net-3.5

所以在我们的网站上，我们有多个可以下载为 Excel 电子表格的报告，我们通过从硬盘读取空白模板文件，将其复制到 MemoryStream 中，然后使用 DocumentFormat.OpenXml.Spreadsheet 将数据推送到模板中来完成此操作; 然后我们将 MemoryStream 传递给一个函数，该函数设置标头并将流复制到响应中。

在 FF 和 Chrome 中运行良好，但 IE9（和 8，所以我的 QA 告诉我）随机弹出一个 Windows 安全登录对话框，要求您登录远程服务器。我可以取消对话框，或者点击确定（凭据似乎被忽略），然后按预期获取 Excel 文件。查看查询（使用 CharlesProxy）我无法弹出登录对话框，直到我再次禁用 CharlesProxy，所以我看不到我的开发机器和服务器之间的流量是否有任何差异。从我的本地主机（仅从开发/测试服务器）运行调试时也不会发生这种情况。

任何帮助都会很有用，有问题的代码如下。这是从后面代码中的服务器端函数调用的，因此 RespondAsExcel 会清除响应并改为放入 xlsx。

```
 using (MemoryStream excelStream = new MemoryStream())
    {
        using (FileStream template = new FileStream(Server.MapPath(@"Reports\AlignedTemplateRII.xlsx"), FileMode.Open, FileAccess.Read))
        {
            Master.CopyStream(template, excelStream);
        }

    //Logic here to push data into the Memory stream using DocumentFormat.OpenXml.Spreadsheet;

        Master.RespondAsExcel(excelStream, pgmName);
    }

        public void RespondAsExcel(MemoryStream excelStream, string fileName)
{
    var contenttype = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
    Response.Clear();
    Response.ContentType = contenttype;
    fileName = Utils.ReplaceWhiteSpaceWithUnderScores(fileName);
    Response.AddHeader("content-disposition", "inline;filename=" + fileName);
    Response.Cache.SetCacheability(HttpCacheability.NoCache);

    Response.BinaryWrite(excelStream.ToArray());
    //If that doesn't work, can try this way:
    //excelStream.WriteTo(Response.OutputStream);

    Response.End();
}

        public void CopyStream(Stream source, Stream destination)
{
    byte[] buffer = new byte[32768];
    int bytesRead;
    do
    {
        bytesRead = source.Read(buffer, 0, buffer.Length);
        destination.Write(buffer, 0, bytesRead);
    } while (bytesRead != 0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T22:42:42.657

关于总是可以忽略的“额外身份验证对话框”的一些想法浮现在脑海中......不会保证这是你的问题，但它确实闻起来像它的堂兄。

Office 2007 和更高版本的文档使用 WebClient 库打开基于 HTTP 的存储库，这些库在发出请求时不支持任何 IE 的安全区域过滤器。如果文件由 IE 请求，并且主机 URL 包含点（暗示 FQDN），即使该站点是匿名身份验证的（不需要凭据），您也会得到可以取消或只需单击三下的“凭据”对话框并丢弃。昨天我正在处理这个问题，据我所知，如果文件是随 IE 一起交付的，则没有解决方法。IE 传递文件的方式有些怪异，这使得 Office 应用程序认为它必须在打开请求之前对其进行身份验证，即使文件已经传递给客户端！

如果文档是从与请求服务器在同一域中的主机服务器传送的，例如 some-server.a.domain.com 到 my-machine.a.domain.com，则可以克服对话问题。

第二个想法完全源于我自己的经验——openoffice 供应商格式类型有时会在文档流情况下引入它们自己的一套奇怪的东西。我们刚刚使用了一种类型的 application/vnd.ms-excel，虽然它似乎应该映射到相同的应用程序，但问题似乎并不普遍。

也许这可以给你一些关于前进的想法。最终，现在，我认为您遇到的情况没有理想的解决方案。我们在同一条船上，不得不告诉我们获得对话框的内部客户只需点击“取消”，他们就会得到他们想要的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-08T17:21:05.433

在您的 RespondAsExcel() 方法中，将您的`content-dispositon`响应标头从更改`inline`为`attachment`。这将强制浏览器以只读方式打开文件。请参阅[KB899927](http://support.microsoft.com/kb/899927)。

```
Response.AddHeader("content-disposition", "attachment;filename=" + fileName); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-04T03:31:14.877

使用“Response.ContentType="application/vnd.ms-excel"时，我与 VBScript 有类似的情况。我只是添加了以下代码，Windows 安全弹出窗口不再出现：

```
Response.AddHeader "content-disposition","attachment; filename=your_file_name_here.xls" 
```

# javascript - 如何从 Rails 应用程序中的 assets/images 文件夹中获取图像

> ID：10263518
> 
> 赞同：11
> 
> 时间：2012-04-21T22:19:33.040
> 
> 标签：javascript, ruby-on-rails, ruby, infowindow

我一直在寻找和寻找这个答案。但我似乎无法完成这项工作，现在几个小时。请帮帮我。

我是我的 rails 应用程序的网页，我正在尝试显示保存在我的资产文件夹中的图像 `@app/assets/images/rails.png.`

我有一个带有以下构造 html 的函数的 javascript 文件。在这个函数中，我想将链接传递给图像。这是我目前拥有的代码。

```
function addToInfoWindow(infoWindowContent)
{

infoWindowString = '<div class="infoWindow">'+
**'<img src="/assets/images/rails.png" />'+**
'<p>'+infoWindowContent+'</p>'+
'<p><a href="http://www.google.com">See here</a></p>'+
'<p><a href="http://www.google.com">Upload a photo</a></p>'+
'</div>';
infoWindow.setContent(infoWindowString);

} 
```

正如您在上面的代码中看到的，粗体部分是问题所在。我尝试了几种不同的 url 字符串组合来访问该图像文件，但图像没有显示在 html 元素中。

我看了又看，尝试了 rails 辅助功能，例如`image_url('rails.png')`. 但我一定是把它们放在了错误的地方。有人可以帮帮我吗。请告诉我在哪里，我需要在上面的代码中添加什么函数来获取图像，`/assets/images/rails.png`以便它的 url 放置在上面突出显示的部分并显示在我的视图中。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-21T22:36:45.557

如果你想使用 Rails 助手，你需要将你的 javascript 文件“升级”到 erb。

只需将它们从 重命名`whatever.js`为`whatever.js.erb`。现在，rails 将在交付文件之前执行所有 erb 代码（<%= 和 %> 之间的内容）。

所以你可以这样做：

```
<img src="<%= asset_path( 'rails.png' ) %>" /> 
```

[更多信息](http://guides.rubyonrails.org/asset_pipeline.html)，请参见 2.2.3。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T22:23:22.237

您将无法在纯 javascript 中使用诸如 image_tag 之类的 rails 助手 - 附加 .erb 并使用asset_path（请参阅 klump 的回答）

# c - 使用标准库写入文件

> ID：10263531
> 
> 赞同：1
> 
> 时间：2012-04-21T22:21:15.577
> 
> 标签：c, fopen, fwrite, fread, printf

我从来没有遇到过将数据写入文件的麻烦！我正在从 MinGW 运行 GCC，因为我习惯于在 Linux 中使用 GCC。我通常使用 Linux 系统调用 open()、write() 和 read()，但是我现在正在编写一个 Windows 程序，在 Windows 中使用 read()/write() 时遇到了麻烦，所以我只是使用标准库。无论如何，我遇到的问题是我不知道如何写入文件！我已经定义了“FILE *”变量，使用了 fopen()，以及“r+b”、“wb”和“w+b”，但我仍然无法使用 fwrite() 或 fprintf() 写入我的输出文件. 我什至不知道我做错了什么！这是我的来源：

```
#include <limits.h>
#include <math.h>
#include <stdio.h>
#include <stdlib.h>
#include <strings.h>

#define DEBUG   1

/*** Global functions ***/
double  highfreq(double deg);

/*** Global variables ***/
double  sin_now;

unsigned int    *ptr;
unsigned char   *key,   *infilename,    *outfilename;
FILE    *infile,    *outfile,   *keyfile;

const char  *pipe_name="[pipe]";

int main(int argc, char *argv[]) {
    unsigned int    x,  y,  z;

    if(argc!=3) {
        fprintf(stderr, "Syntax error: %s <infile.txt> <outfile.wav>", argv[0]);
        return 1;
    }
    if(argv[1][0]=='-') {
        infile=stdin;
        infilename=(unsigned char *)pipe_name;
    }
    else {
        infilename=argv[1];
        if((infile=fopen(infilename, "rb"))==NULL) {
            fprintf(stderr, "Could not open input file for modulation.\n", infile);
            return 2;
        }
    }
    if(argv[2][0]=='-') {
        outfile=stdout;
        outfilename=(unsigned char *)pipe_name;
    }
    else {
        outfilename=argv[2];
        if((infile=fopen(outfilename, "wb"))==NULL) {
            fprintf(stderr, "Could not open/create output file for modulation.\n", outfile);
            return 3;
        }
    }
    if(DEBUG) printf("Input file:\t%s\nOutput file:\t%s\n", infilename, outfilename);

    fprintf(outfile, "Why won't this work!?\n");

    fclose(infile);
    fclose(outfile);
    return 0;
}

double highfreq(double deg) {
    double  conv,   rad;

    conv=M_PI/180;
    rad=deg*conv;
    return sin(rad);
} 
```

我最终将制作一个 WAV 文件作为输出，因此是“highfreq()”函数，但现在我什至无法将它写入文件！如果对任何人有帮助，fprintf() 会返回错误值 -1。我真的不明白，虽然因为从我读到的内容，这只是表明有一个错误，但仅此而已。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T22:23:48.430

```
 outfilename=argv[2];
    if((infile=fopen(outfilename, "wb"))==NULL) { 
```

这是您在代码中第二次将结果分配给`fopen`to `infile`。你可能想要`outfile`那里。

# java - 哪个接口是 Java 中 Iterator 接口的直接前身？

> ID：10263537
> 
> 赞同：1
> 
> 时间：2012-04-21T22:22:12.123
> 
> 标签：java, interface, iterator

我正在寻找一个被*Iterator*取代的接口，显然它自 Java 1.2 以来就一直存在。我在作业中使用这个前身界面，我似乎找不到任何实际的线索。我找不到任何具体的东西，所以我希望这里有人能帮助我。

*BinarySearchTree*、*AbstractGraph*和*DelegatingGraph*是我在寻找*Iterator*的前身时发现的，它们都有实现*Iterator*的方法，因此在这种情况下它们对我来说毫无用处。

感谢您阅读这篇文章。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T22:24:35.903

也许您指的是枚举？[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Enumeration.html)说：

*“这个接口的功能是由 Iterator 接口复制的。此外，Iterator 添加了一个可选的删除操作，并且具有更短的方法名称。新的实现应该考虑使用 Iterator 而不是 Enumeration。”*

# php - php日期格式输出错误的日期

> ID：10263538
> 
> 赞同：0
> 
> 时间：2012-04-21T22:22:21.613
> 
> 标签：php, mysql, html

我在数据库中分别设置了日期和时间。`start`格式为 YYYY-MM-DD，格式`time`为 HH:MM:SS。我正在尝试修改开始日期以以可读格式显示日期。

我尝试使用 php 输出，我得到“1969 年 12 月 31 日，星期三”，这与我想要的完全不同。（正确的格式，但日期不是我在数据库中的任何内容）。

而且我已经使用过 `DATE_FORMAT('start','%W, %M %d %Y') AS start`，但我的选择函数有它的顺序`start`，它没有给我正确的顺序和指定的值。但格式是正确的。

我的 php 代码是

```
$sql = "SELECT `title`, `time`, `start`, `showFeed` FROM calender WHERE length('column') > '0' and showFeed=1 ORDER BY `start` ASC LIMIT 0,4";

/*  DATE_FORMAT(`start`,'%W, %M %d %Y') AS start   */

    $result = $dbh->query($sql)->fetchAll(PDO::FETCH_ASSOC);

echo "<div class=\"eventfeed\">";
echo "<ul>";

foreach ($result as $row){
$dt = $row['start'];
$ts = $row['time'];

$date = strtotime( $dateout );
$dateout = date( 'l, M j Y', $phpdate );

    echo "<dl>";
    echo "<dt>". $row['title']. "</dt>";
    echo "<dd>".  $dateout;
    echo "</dl>";

}

echo "</ul>";
echo "</div>";

$dbh = null; 
```

我不知道我做错了什么。我以前做过，由于某种原因，这次格式化日期不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T22:25:38.300

试试这个：

```
<?php
$dt = $row['start'] . ' ' . $row['time'];
echo date('l, M j Y', strtotime($dt)); 
```

我不确定这是否只是一个错字，或者它是否是您的代码，但是 - 您在`$dateout`设置之前引用它，并且`$phpdate`永远不会设置。

# php - 使用正则表达式获取php标签之间的代码

> ID：10263543
> 
> 赞同：1
> 
> 时间：2012-04-21T22:23:17.340
> 
> 标签：php, regex

我正在尝试从 HTML 模板文件中获取 php 代码以执行它并将结果放回原处。我可以使用什么正则表达式代码？是否有一种方法也可以返回找到的第一个标签的位置？

```
<p>some html</p>

<?php $some = "php code"; ?>

<p>some <em>more</em> html</p>

<?php $some = "more php code"; ?> 
```

我想要从 html 中过滤的 php 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T22:34:03.700

您应该将变量传递给模板文件，而不是“取出 PHP 并将其放回原处”。

**像这样的东西：**

```
<?php 
function loadTemplate($path,$data=array()){
    if (file_exists($path) === false){
        throw new Exception('Template not found:'.$path);
        return false;
    }

    extract($data);
    ob_start();
    require($path);
    $return = ob_get_contents();
    ob_end_clean();
    return $return;
}

$vars = array('var1'=>$value,
              'var2'=>$somevalue,
              'var3'=>$someothervalue,
              'var4'=>$blab);

$template = loadTemplate('path/to/thefile.php',$vars);
?> 
```

然后像 ect一样`$vars`从**thefile.php中访问数组值**`echo $var1` `echo $var2`

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T23:20:48.050

```
preg_match("/<\?.*?\?>/m",$output,$matches) 
```

或者

```
preg_match("/<\?.*?\?>/s",$output,$matches) 
```

应该匹配所有行。

# android - 我应该使用什么 Android 设备来开发我的 Android 应用程序？

> ID：10263557
> 
> 赞同：2
> 
> 时间：2012-04-21T22:25:51.177
> 
> 标签：android, android-emulator, android-2.2-froyo

我将很快编写我的 Android 应用程序，并考虑购买一个可靠的 Android 设备来开发和使用。我的问题是给你们的，假设您想在 Adroid 设备上开发和测试您的应用程序，您会推荐什么？

三星 Galaxy 看起来很有希望，但我知道选择一款好的开发手机是您绝对需要明智地选择的事情之一。Android 设备的格局似乎每天都在扩大，因此很高兴了解最新的开发设备。也许我可以买一个便宜的旧车，它不会有什么不同？

我有点书呆子，所以如果设备价格昂贵，但有一些其他人没有的很酷的功能，那么我仍然会考虑它。但是，我不想在我可能不需要的功能上浪费太多钱（或者这可能会分散我的注意力；）），比如高清视频，尽管看起来很多手机无论如何都支持高清。

平板电脑似乎有点多，但我仍然对此持开放态度……如果您喜欢您的 Android 平板电脑*进行开发*，请告诉我。我可以看到一些好处，例如确保我的应用程序可以在 Android 平板电脑和不同的分辨率上运行。

我应该担心的任何警告？我有一个朋友在 Android 刚问世时正在开发它，我记得他抱怨说他永远无法更新他的设备，因为出于某种原因，更新总是受到限制。还是这样吗？

如果你能谈谈这些观点中的任何一点，我很乐意听到它们。

还担心使用基于位置的东西，比如 gps，我需要合同吗？

我将在我的 Macbook Air OSX 上进行开发，如果您在设备方面有任何额外的输入，并且使用 Mac，那也很棒。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T19:39:39.293

您应该针对 Android 4 平台进行开发，但是在开发过程中，您会弄清楚您正在使用哪些 API。您使用的 API 级别决定了您将支持的最小操作系统。这里有 2 个清单设置：目标 API（15 又名 ICS）和最小 API（取决于您使用的内容）。

为了在消费市场中获得 API 支持和广泛覆盖的良好组合（使用 @Basic 指出的仪表板），我倾向于将人们指向 API 级别 8，即 Android 2.2（又名 Froyo）。您将接触到大约 93% 的人，并且您将获得大多数开发所需的 API。如果您知道需要更新的 API，请务必使用它们。世界将迎头赶上，可能只需要一些时间。

我通常会让人们购买 Nexus 手机或 XOOM 平板电脑。您需要参考设计，这样您就可以在 Google 的官方版本发布后尽快了解它们。AOSP 构建很重要，但它们并不是镇上唯一的游戏。在那之后，如果你想认真对待它，你应该从主要 OEM 那里各拿一部手机，这样你就可以处理定制平台（Sense、Blur、Touchwiz 等）的差异。

免责声明：我为摩托罗拉工作。MOTODEV Studio 是我团队的产品（感谢 Basic！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T22:41:26.253

三星 Galaxy Nexus，很好，因为它是一款由 Google 直接支持的手机。

三星 Galaxy S2，它拥有您需要的所有功能

这两款手机中的一款适用于规格重型手机，但您还需要一款更便宜但不太好的手机，这样您就可以获得设备范围的两端，所以也需要像 IDEOS 这样的东西。

您需要记住的是，永远不会只使用一种类型的设备，有数百种，如果您有一部靠近底部的手机，并且您的应用程序几乎与顶部的手机一样好用做得好，因为您将能够抓住所有客户。

同样对于基于位置的事情，您需要做的就是在 android 清单中添加权限，这应该很好，用户在下载应用程序时会收到有关这些的通知

Mac 可以很好地进行开发，它也被 Android 支持，所以我认为你不会有问题，当我去 Android 开发实验室时，似乎所有的谷歌人都有 mac

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T22:44:59.850

这取决于你想支持什么。从 HTC Wildfire 到 Galaxy S2 / HTC One，有一个完整的系列。

您打算针对哪些版本的 Android？[有些人*还在*1.5](http://developer.android.com/resources/dashboard/platform-versions.html)！

关于更新：谷歌以自己的速度发布更新。问题是，在更新到达给定设备之前，运营商通常会对其进行定制，以包括品牌、强制性 aspps 等……这可能需要一段不确定的时间，或者根本不会发生。这是 Nexus One 的一大优势——它没有品牌化，因此更新一经发布就可以使用。

关于开发：[eclipse](http://www.eclipse.org/)几乎适用于每个平台，是一个很好的起点。[MOTODev Studio](http://developer.motorola.com/tools/motodevstudio/)是基于 eclipse 的，非常棒，它带有模板、预配置的模拟器等......

定位服务：Android 使用 3 种方法来获取您的位置：GPS（在室内效果不佳，修复速度可能很慢，非常耗电），Wifi（谷歌已经绘制了很多 wifi 网络的位置 - 因此如果可以的话查看已知的 wifi 网络，它大致知道它在哪里），最后是网络（它知道您的手机正在与之通话的手机信号塔的位置）。

以上都不需要合同，但 Wifi 需要互联网连接（执行查找），而网络显然需要您的手机在手机信号塔的范围内并允许与手机信号塔通话 - 这通常只是意味着为网络获取 sim 卡覆盖您的区域。

请注意，在设备上获取位置时，您可以选择粗略的细粒度位置信息。粗略不会启动 GPS（它们还需要不同的权限）

有关位置的更多信息，请参阅[此页面](http://developer.android.com/guide/topics/location/obtaining-user-location.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-22T18:28:28.863

就个人而言，我会推荐东芝 Thrive 10.1 英寸安卓平板电脑。

它有：

1 GHz 英伟达 Tegra

1 GB 内存

全尺寸 USB 端口

全尺寸 SD 卡插槽

全尺寸 HDMI 端口

迷你 USB 端口

可以从 Android 3.1 升级到 3.2 或 4.0

而且它通常只需要大约 200-250 美元，具体取决于您想要多少内存。

# python - 在 web2py 的“图像博客”上使用简单的选择语句出错

> ID：10263559
> 
> 赞同：1
> 
> 时间：2012-04-21T22:26:08.460
> 
> 标签：python, orm, frameworks, data-access-layer, web2py

对于我的项目，我需要连接到多个数据库并从中获取信息。我不认为这会是 web2py 的问题，但确实如此。我想也许我需要从头开始重建数据库，但仍然有问题。最后，我浏览了介绍性的“图像”教程并将其更改为使用备用 mysql 数据库。我仍然遇到同样的错误，下面是代码：

**数据库.py**

```
db = DAL("mysql://root:@localhost/web2py")
images_db = DAL("mysql://root:@localhost/images_test")

images_db.define_table('image',
   Field('title', unique=True),
   Field('file', 'upload'),
   format = '%(title)s')

images_db.define_table('comment',
   Field('image_id', images_db.image),
   Field('author'),
   Field('email'),
   Field('body', 'text')) 
```

然后我转到“图像”的管理页面并单击“控制器”下的“外壳”链接并执行以下操作：（在我转到索引页面生成“图像”之后：

**壳牌**：

```
In [1] : print db(images_db.image).select()
Traceback (most recent call last):
  File "/home/cody/Downloads/web2py/gluon/contrib/shell.py", line 233, in run
    exec compiled in statement_module.__dict__
  File "<string>", line 1, in <module>
  File "/home/cody/Downloads/web2py/gluon/dal.py", line 7577, in select
    fields = adapter.expand_all(fields, adapter.tables(self.query))
  File "/home/cody/Downloads/web2py/gluon/dal.py", line 1172, in expand_all
    for field in self.db[table]:
  File "/home/cody/Downloads/web2py/gluon/dal.py", line 6337, in __getitem__
    return dict.__getitem__(self, str(key))
KeyError: 'image'

In [2] : print images_db.has_key('image')
True

In [3] : print images_db
<DAL {'_migrate_enabled': True, '_lastsql': "SET sql_mode='NO_BACKSLASH_ESCAPES';", '_db_codec': 'UTF-8', '_timings': [('SET FOREIGN_KEY_CHECKS=1;', 0.00017380714416503906), ("SET sql_mode='NO_BACKSLASH_ESCAPES';", 0.00016808509826660156)], '_fake_migrate': False, '_dbname': 'mysql', '_request_tenant': 'request_tenant', '_adapter': <gluon.dal.MySQLAdapter object at 0x2b84750>, '_tables': ['image', 'comment'], '_pending_references': {}, '_fake_migrate_all': False, 'check_reserved': None, '_uri': 'mysql://root:@localhost/images_test', 'comment': <Table {'body': <gluon.dal.Field object at 0x2b844d0>, 'ALL': <gluon.dal.SQLALL object at 0x2b84090>, '_fields': ['id', 'image_id', 'author', 'email', 'body'], '_sequence_name': 'comment_sequence', '_plural': 'Comments', 'author': <gluon.dal.Field object at 0x2b84e10>, '_referenced_by': [], '_format': None, '_db': <DAL {...}>, '_dbt': 'applications/images/databases/e1e448013737cddc822e303fe20f8bec_comment.table', 'email': <gluon.dal.Field object at 0x2b84490>, '_trigger_name': 'comment_sequence', 'image_id': <gluon.dal.Field object at 0x2b84050>, '_actual': True, '_singular': 'Comment', '_tablename': 'comment', '_common_filter': None, 'virtualfields': [], '_id': <gluon.dal.Field object at 0x2b84110>, 'id': <gluon.dal.Field object at 0x2b84110>, '_loggername': 'applications/images/databases/sql.log'}>, 'image': <Table {'ALL': <gluon.dal.SQLALL object at 0x2b84850>, '_fields': ['id', 'title', 'file'], '_sequence_name': 'image_sequence', 'file': <gluon.dal.Field object at 0x2b847d0>, '_plural': 'Images', 'title': <gluon.dal.Field object at 0x2b84610>, '_referenced_by': [('comment', 'image_id')], '_format': '%(title)s', '_db': <DAL {...}>, '_dbt': 'applications/images/databases/e1e448013737cddc822e303fe20f8bec_image.table', '_trigger_name': 'image_sequence', '_loggername': 'applications/images/databases/sql.log', '_actual': True, '_tablename': 'image', '_common_filter': None, 'virtualfields': [], '_id': <gluon.dal.Field object at 0x2b848d0>, 'id': <gluon.dal.Field object at 0x2b848d0>, '_singular': 'Image'}>, '_referee_name': '%(table)s', '_migrate': True, '_pool_size': 0, '_common_fields': [], '_uri_hash': 'e1e448013737cddc822e303fe20f8bec'}> 
```

现在我不太明白为什么我在这里遇到错误，一切似乎都井井有条。我以为 web2py 支持多个数据库？我做错了吗？appadmin 工作正常，也许我会编辑它并让它在它生成的代码中引发错误......任何帮助将不胜感激。

*   科迪

更新：

我刚试过这个：

**模型/数据库.PY**

```
db = DAL("mysql://root:@localhost/web2py")

images_db = DAL("mysql://root:@localhost/images_test")

images_db.define_table('image',
   Field('title', unique=True),
   Field('file', 'upload'),
   format = '%(title)s')

images_db.define_table('comment',
   Field('image_id', images_db.image),
   Field('author'),
   Field('email'),
   Field('body', 'text')) 
```

**控制器/默认值.PY**

```
def index():
    """
    example action using the internationalization operator T and flash
    rendered by views/default/index.html or views/generic.html
    """
    if images_db.has_key('image'):
        rows = db(images_db.image).select()
    else:
        rows = 'nope'
    #rows = dir(images_db)
    return dict(rows=rows) 
```

**视图/默认值/索引.HTML**

```
{{left_sidebar_enabled,right_sidebar_enabled=False,True}}
{{extend 'layout.html'}}

these are the rows:
{{=rows }} 
```

再次，对这一切感到非常困惑。感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T00:12:17.770

如果要查询 images_db 连接，则必须调用`images_db()`，而不是`db()`。所以，它会是：

```
images_db(images_db.image).select() 
```

# java - 找不到分析器在 elasticsearch couchdb 河上执行查询字符串

> ID：10263560
> 
> 赞同：3
> 
> 时间：2012-04-21T22:26:09.053
> 
> 标签：java, couchdb, elasticsearch, query-analyzer

很确定我犯了一些巨大的错误，但我不知道如何对其进行排序。

我的 couchdb 河和我的索引定义如下：

```
curl -XPUT 'localhost:9200/_river/my_index/_meta' -d '{
"type" : "couchdb",
"couchdb" : {
    "host" : "localhost",
    "port" : 5984,
    "db" : "my_db",
    "filter" : null
},
"index" : {
    "index" : "my_index",
    "type" : "my_index_type",
    "bulk_size" : "100",
    "bulk_timeout" : "10ms",
    "analysis": {
        "analyzer": {
            "tags_analyzer": {
                "type" : "custom",
                "tokenizer": "lowercase",
                "filter": ["lowercase", "asciifolding"]
            }
        }
    }
},
"mappings": {
    "tags": {
        "properties": {
            "tags": {
                "type": "string",
                "analyzer": "tags_analyzer",
                "boost": 10
            }
        }
    }
}}' 
```

查询是通过 JAVA 应用程序执行的：

```
 QueryStringQueryBuilder queryBuilder = QueryBuilders.queryString(req.getParameter("tags"));
        queryBuilder.defaultField("tags");
        queryBuilder.analyzer("tags_analyzer");
        queryBuilder.analyzeWildcard(true);
        queryBuilder.lowercaseExpandedTerms(true);
        queryBuilder.defaultOperator(QueryStringQueryBuilder.Operator.AND);

        SearchResponse response = client.prepareSearch("idxscopus").setSearchType(SearchType.QUERY_THEN_FETCH).setQuery(queryBuilder)
                .addHighlightedField("tags", 0, 0)
                .setFrom(0).setExplain(true).execute().actionGet(); 
```

在查询阶段，我面临一个 QueryParsingException，告诉我我的自定义分析器丢失了：

```
omqueryery_stringb*default_fieldCtagsdefault_operatorBandanalyzerLtags_analyzerlowercase_expanded_terms#analyze_wildcard#xplain#highlighteldsgsagment_sizenumber_of_fragments;]]]; nested: QueryParsingException[[idxscopus] [query_string] analyzer [tags_analyzer] not found]; }{[BtMQ0EBJQVmFKyJTJMVhSA][idxscopus][1]: RemoteTransportException[[Aardwolf][inet[/10.1.1.2:9300]][search/phase/query]]; nested: SearchParseException[[idxscopus][1]: from[0],size[-1]: Parse Failure [Failed to parse source [:) 
```

我做错了什么？我真的需要索引和搜索阶段的 asciifolding 功能。

谢谢！

# python - Python酸洗字典EOFError

> ID：10263564
> 
> 赞同：5
> 
> 时间：2012-04-21T22:26:47.977
> 
> 标签：python, dictionary, pickle, eoferror

我在服务器上运行了几个脚本，这些脚本可以腌制和解开各种字典。它们都使用相同的基本代码进行酸洗，如下所示：

```
SellerDict=open('/home/hostadl/SellerDictkm','rb')
SellerDictionarykm=pickle.load(SellerDict)
SellerDict.close()

SellerDict=open('/home/hostadl/SellerDictkm','wb')
pickle.dump(SellerDictionarykm,SellerDict)
SellerDict.close() 
```

除了其中一个之外，所有脚本都运行良好。有问题的人会去各种网站并抓取数据并将其存储在字典中。此代码整天运行酸洗和解酸字典，并在午夜停止。一个 cronjob 然后在第二天早上再次启动它。该脚本可以运行数周而不会出现问题，但大约每月一次，该脚本在尝试打开字典时由于 EOFError 而死。字典的大小通常约为 80 MB。我什至尝试在提取数据时在 SellerDict.close() 之前添加 SellerDict.flush() 以确保晚上被刷新。

有什么想法可能导致这种情况吗？Python 非常可靠，所以我认为这不是文件大小的原因。代码在死前运行了很长时间，这让我相信，也许字典中保存了一些导致这个问题的东西，但我不知道。

此外，如果您知道除了 pickle 之外还有更好的方法来保存字典，我愿意接受选择。就像我之前说的，字典不断地被打开和关闭。只是为了澄清，只有一个程序会使用同一个字典，所以这个问题不是由几个程序试图访问同一个字典引起的。

更新：

这是我从日志文件中获得的回溯。

```
Traceback (most recent call last):
  File "/home/hostadl/CompileRecentPosts.py", line 782, in <module>
    main()
  File "/home/hostadl/CompileRecentPosts.py", line 585, in main
    SellerDictionarykm=pickle.load(SellerDict)
EOFError 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-08T06:24:54.980

所以这实际上是一个内存问题。当计算机用完 RAM 并尝试 unpickle 或加载数据时，该进程将失败并声明此 EOFError。我增加了计算机上的 RAM，这再也不是问题了。

感谢所有的评论和帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-21T22:47:59.963

以下是不使用锁定时会发生的情况：

```
import pickle

# define initial dict
orig_dict={'foo':'one'}

# write dict to file
writedict_file=open('./mydict','wb')
pickle.dump(orig_dict,writedict_file)
writedict_file.close()

# read the dict from file
readdict_file=open('./mydict','rb')
mydict=pickle.load(readdict_file)
readdict_file.close()

# now we have new data to save
new_dict={'foo':'one','bar':'two'}
writedict_file=open('./mydict','wb')
#pickle.dump(orig_dict,writedict_file)
#writedict_file.close()

# but...whoops!  before we could save the data
# some other reader tried opening the file
# now they are having a problem
readdict_file=open('./mydict','rb')
mydict=pickle.load(readdict_file) # errors out here
readdict_file.close() 
```

这是输出：

```
python pickletest.py
Traceback (most recent call last):
  File "pickletest.py", line 26, in <module>
    mydict=pickle.load(readdict_file) # errors out here
  File "/usr/lib/python2.6/pickle.py", line 1370, in load
    return Unpickler(file).load()
  File "/usr/lib/python2.6/pickle.py", line 858, in load
    dispatch[key](self)
  File "/usr/lib/python2.6/pickle.py", line 880, in load_eof
    raise EOFError
EOFError 
```

最终，一些读取进程将尝试读取腌制文件，而写入进程已经将其打开以进行写入。在尝试读取之前，您需要确保有某种方法可以判断另一个进程是否已经打开了要写入的文件。

对于一个非常简单的解决方案，请查看[讨论使用 Filelock 的这个线程](https://stackoverflow.com/questions/489861/locking-a-file-in-python)。

# php - 上传错误生成

> ID：10263567
> 
> 赞同：3
> 
> 时间：2012-04-21T22:27:17.587
> 
> 标签：php, plupload

我正在尝试解决 plupload 的问题，我在上传窗口中显示由 upload.php 生成的错误。无论我做什么，我都无法在窗口中创建错误图标。尽管警报工作正常，但该文件始终标记为成功。有人可以告诉我我在这里做错了什么吗？

我的 upload.php 的错误是`die('{"jsonrpc" : "2.0", "error" : {"code": 500, "message": "File upload failed."}, "id" : "id"}');`

这是javascript：

```
// Convert divs to queue widgets when the DOM is ready
$(function() {
    // Setup html5 version
    $("#html5_uploader").pluploadQueue({
        // General settings
        runtimes : 'html5',
        url : 'upload.php',
        max_file_size : '2000mb',
        chunk_size : '1mb',
        unique_names : false,

        // Specify what files to browse for
        filters : [
            {title : "Video Clips", extensions : "mov,avi,mpg,flv,mp4"},
            {title : "Audio Files", extensions : "mp3,wav"},
            {title : "Executable Files", extensions : "exe"},
            {title : "Zip Files", extensions : "zip,rar"}
        ],
        preinit: attachCallbacks
    });

    // attach callbacks for FileUploaded and Error
    function attachCallbacks(uploader) {
        uploader.bind('FileUploaded', function(up, file, response) {
            response = jQuery.parseJSON( response.response );

            alert(response.error.code);

            if (response.error.code == '500') {
                alert (response.error.message); 
                //alert (file.id);          
                $('#' + file.id).attr('class', 'plupload_failed').find('a').css('display', 'none').attr('title', response.error.message);
                file.status = plupload.FAILED;
            } else {
                alert("yoohoo");
                $('#' + file.id).attr('class', 'plupload_done').find('a').css('display', 'none').attr('title', 'Success');
                file.status = plupload.DONE;
            }
        });
    } 
}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T10:11:35.303

如果其他人正在寻找解决方案，它就在这里：[http ://www.plupload.com/punbb/viewtopic.php?id=1710](http://www.plupload.com/punbb/viewtopic.php?id=1710)

> 问题是您在 preinit 部分中使用了 FileUploaded 事件。您应该在 init 部分绑定您的事件。

（LeandroJF 的回答）

# java - 从 Java Servlet 将数据插入 PostgreSQL

> ID：10263568
> 
> 赞同：-2
> 
> 时间：2012-04-21T22:27:36.353
> 
> 标签：java, postgresql, servlets

我正在尝试使用 java servlet 将数据输入数据库。

```
package new;

import java.io.*;
import java.sql.*;

import javax.servlet.*;
import javax.servlet.http.*;

public class display extends HttpServlet{
  public void init(ServletConfig config) throws ServletException{
  super.init(config);
  }

  protected void doGet(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
        System.out.println("command: " + request.getParameter("command"));
        response.setContentType("text/html");
        java.io.PrintWriter out = response.getWriter();
            out.println("<title>Reg</title></head><body>");
        out.println("<h2>REG Form</h2><tr>");

        // HTMl Customer Input
        out.println("<form method=\"post\" action =\""
                + request.getContextPath() + "/display\" >");
        out.println("<table width=\"440\" border=\"0\">");
        out.println("<tr><th width=\"124\" scope=\"row\">Artist Info</th>");
        out.println("<td width=\"150\">Details</td>");
        // First input box: DOB
        out.println("<tr><th scope=\"row\">DOB:</th>");
        out.println("<td><input type=\"text\" name=\"dob\" size=\"20\" ></td>");
        out.println("</tr>");
        // Second input box: First Name
        out.println("<tr><th scope=\"row\">Firts name:</th>");
        out.println("<td><input type=\"text\" name=\"firtsname\" size=\"20\" ></td>");
        out.println("</tr>");
        // Third input box: Last name
        out.println("<tr><th scope=\"row\">Last name:</th>");
        out.println("<td><input type=\"text\" name=\"lastname\" size=\"20\" ></td>");
        out.println("</tr>");
        // Submit button
        out.println("</td></tr><tr><td valign=\"top\">");
        out.println("<input type=\"submit\" value=\"Register\"></td></tr>");
        out.println("</table></form>");
        out.println("</body></html>");
    }

  /**Process the HTTP Get request*/

  protected void doPost(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
        // Establish variables

        // HTML results
        response.setContentType("text/html");
        java.io.PrintWriter out = response.getWriter();
            out.println("<title>Result</title></head><body>");
        out.println("<h2>Welcome.</h2></br>");

        //Establish Variables for percentages of user input for each state and for each party
        int birthyear=0;
        String familyname = null, givenname = null;

        //DOB
        if (request.getParameter("birthyear").equals(""))   {
            out.println("Input date of birth");
        //otherwise, get the input
    }   else    {
        birthyear = Integer.parseInt(request.getParameter("birthyear"));
    }

        if (request.getParameter("familyname").equals(""))  {
            out.println("Input first name");

    }   else    {
        familyname = request.getParameter("familyname");
    }

        if (request.getParameter("givenname").equals(""))   {
            out.println("Input last name");

    }   else    {
        givenname = request.getParameter("givenname");
    }

  Connection connection=null;

  int id = 0;
  int agentid = id++;

  try {
  // Load the database driver
        Class.forName("org.postgresql.Driver");
        connection = DriverManager.getConnection(
                "jdbc:postgresql://localhost:5432/caglar", "postgres",
                "6666yyy");
   //Add the data into the database
  String sql = "insert into agent values (?,?,?,?)";
  PreparedStatement pst = 
  connection.prepareStatement(sql);
  pst.setInt(1, agentid);
  pst.setInt(2, birthyear);
  pst.setString(3, familyname);
  pst.setString(4, givenname);

   }
  catch(ClassNotFoundException e){
  out.println("Couldn't load database driver: " 
  + e.getMessage());
  }
  catch(SQLException e){
  out.println("SQLException caught: " 
  + e.getMessage());
  }
  catch (Exception e){
  out.println(e);
  }
  finally {
  // Always close the database connection.
  try {
  if (connection != null) connection.close();
  }
  catch (SQLException ignored){
  out.println(ignored);
  }
  }
  }
} 
```

我在 doPost 中收到以下错误：

```
java.lang.NullPointerException
    S517.display.doPost(display.java:73)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

有人知道为什么吗？？我只是想使用 servlet 将数据添加到数据库中。驱动程序存在于库中。

第 73 和 74 行

```
 if (request.getParameter("birthyear").equals(""))   {
        out.println("Input date of birth"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T22:40:46.663

您的错误在第 73 行：

```
birthyear = Integer.parseInt(request.getParameter("birthyear")); 
```

我通过您的代码猜测 doGet 函数中的表单是发布您想要存储在数据库中的数据的表单。您的表单不包含出生年份字段。它的缺失使 request.getParameter("birthyear") 返回 null，这会在尝试从中解析 int 时导致 NullPointerException。

此外，您不仅应该准备语句，还应该执行它：

```
PreparedStatement pst = connection.prepareStatement(sql);
pst.setInt(1, agentid);
pst.setInt(2, birthyear);
pst.setString(3, familyname);
pst.setString(4, givenname);

// add this line
pst.executeUpdate(); 
```

# c# - 双舍入查询

> ID：10263570
> 
> 赞同：0
> 
> 时间：2012-04-21T22:27:46.073
> 
> 标签：c#, double, rounding

尽管有很多非常相似的问题，但没有一个能真正完全回答我的问题，所以请多多包涵。

给定两个双精度数，我需要将它们四舍五入到小数点后两位，然后检查差异是否正好是 0.01。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T23:04:14.380

其他人指出了比较浮点数的问题。最好的办法是将每个乘以 100，然后将整数部分作为整数进行比较：

```
static bool ExactlyPennyDifference(double d1, double d2)
{
    return Math.Abs((int)Math.Round(d1 * 100) - (int)Math.Round(d2 * 100)) == 1;
} 
```

# html - 当我从外部文件导入 CSS 样式时，它们不适用

> ID：10263573
> 
> 赞同：0
> 
> 时间：2012-04-21T22:28:45.863
> 
> 标签：html, css, debugging

我有以下页面：

```
<html>
<head>
<title>Kahil</title>
<link rel="stylesheet" type="text/css" href="csshorizontalmenu1.css" />
</head>
<body bgcolor="#FFFFFF" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" dir="RTL">
<center>
<div class='horizontalcssmenu'>
  <ul  id='cssmenu1'>
    <li><a href=''>Menu1</a></li>
    <li><a href='/pages/F4F8E5F4E9EC.php'>Menu2</a></li>
    <li><a href='http://kahil.bizclick.co.il/pages/F2E1E5E3E5FA.php'>Menu3</a></li>
    <li><a href='/pages/E2ECF8E9E4.php'>Menu4</a>
      <ul class='box'>
        <li><a href='/pages/E2ECF8E9E4/EEE3E1F7E5FA.php'>Menu4.1</a></li>
        <li><a href='/pages/E2ECF8E9E4/EEE5F6F8E9-F4F8F1E5ED.php'>Menu4.2</a></li>
        <li><a href='http://kahil.bizclick.co.il/pages/E2ECF8E9E4/E4E3F4F1E4-F2EC-E7E5ECF6E5FA.php'>Menu4.3</a></li>
      </ul>
    </li>
    <li><a href='/pages/F6E5F8-F7F9F8.php'>Menu5</a></li>
  </ul></div>

</body>
</html> 
```

以及我想应用于它们的以下 CSS 样式：

```
.horizontalcssmenu ul{
margin: 0;
padding: 0;
list-style-type: none;
}

/*Top level list items*/
.horizontalcssmenu ul li{
position: relative;
display: inline;
float: right;

}

/*Top level menu link items style*/
.horizontalcssmenu ul li a{
display: block;
width: 60px; /*Width of top level menu link items*/
padding: 2px 8px;
text-decoration: none;
/*background-color: #1C3702;*/
color: #7E4732;
font: bold 12px Arial, Helvetica, sans-serif;
}

/*Sub level menu*/
.horizontalcssmenu ul li ul{
left: 0;
top: 0;
position: absolute;
display: block;
visibility: hidden;
z-index: 100;
} 
```

连线的事情是，如果它在示例中的文件中，则不会应用任何样式，但是当我将它们内联时`<style> ... </style>`它突然起作用了。我已经检查了`link`标签 100 次，但我找不到什么问题。

**编辑：** 根据要求，我将其上传到[此处](http://www.cs.bgu.ac.il/~kahilm/StackoverflowTest/index.html)整个文件夹现在包含 2 个文件，`index.html`并且`c1.css`. 格式应该是纯文本，因为我使用 Notepad++ 编辑它们，但 CSS 文件最初是下载的。为了调试方便，我已经把`style`标签放在那里并注释掉了。您可以`>`在第 5 行末尾添加 a 以查看它是否正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T07:58:32.277

您的 HTML 文件是 UTF-16 格式，而 CSS 文件不是。这对浏览器来说非常令人困惑。

保存时，请确保它们具有相同的编码，或者，在其 HTTP 标头中明确指定 CSS 文件的编码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T22:33:48.190

它只能是路径。我注意到您显示的路径不是根路径（以 / 开头），因此将取决于页面在站点中的位置。我会使用 firebug 的 net 选项卡来查看发生了什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T18:05:28.307

我只是按照 Chrome 检查器中的 css 链接（而不仅仅是输入路径）并得到了一组“中文类型”字符 - 显然是一些 unicode 错误

```
栮牯稳汤氍獳敭畮甠筬洊牡楧甠筬洊牡楧甮〠਻慰摤湩㩧〠਻楬瑳猭祴祴敬琭瑳猭祴汤㭥ਊ⨯洁⁰敬敶⁬楬瑳椠整獭⼪⸊潨カ楲楲瑮污獣浳湥⁵汵氠筩獯潩㩮莹爠汥瑡癞㭥搊獩汰祡›湩楬敮਻湥慯㩠爠杩瑨ਰ氠筊⁩⁕洁⁰敬敶⁩⁩敭畮浥⁳瑳猛⩥ਯ栮牯稳汤防止捬獳敭畮甠⁬楬愠੻楤灳慬㩹戠潬正਻楷瑶㩨㘠弥㭸⼠圪摩桴漠潴⁰敬敶⁬敭畮氠湩⁬浥⩳ਯ慰摤湩㩧㈠硰㠠硰਻整瑸捥牯瑡潩㩮渠汤㭥导入截取杫潲湵ⵤ潣潬㩲⌠䌱㜳㈰⌻ਯ榷瑬㩲ਯ榷箴㈴敬 › 敬滭潕核畑ㄠㄠ氠氠氠楲敥敥牥晩晩੽ਉ⁬氕氭畮⼪⸬氽氠楲楲瑮污祬浠栣浳湑カ›グり獩汢捯㭫瑬瑊獩扩幅莹㩹祬搊獩摩敤㐮稊动作摮硥硥稊ググ愠獢汯瑊獩獩獩瑊瑊獩扩幅莹㩹祬氠愠摩敤㐮稊动作摮硥稊稊动作摮硥硥稊

```

这很奇怪 - 但显然导致了问题（而不是我之前建议的路径）

# c# - 隐藏托盘窗口中的图标

> ID：10263574
> 
> 赞同：-2
> 
> 时间：2012-04-21T22:28:57.913
> 
> 标签：c#, windows, system-tray, trayicon, tray

我在我的 C# 应用程序中使用了一个组件，它加载了 DLL，一个图标出现在 Windows 托盘中，有没有办法使用命令行或任何带参数的 exe 隐藏托盘中的图标？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T23:42:05.097

从命令行恕我直言，除非exe支持它，否则它是不可能的，例如：

```
static void Main(string[] args)
{
if (args.Length > 0)
{
 if (args[0] == "HideFromWindowsTray") 
 { 
  this.ShowInTaskBar = false;
 }
} 
```

您可以使用其他技术来执行此操作，例如，拥有一个启动 exe 并将其 ShowInTaskBar 表单属性设置为 False 的包装 exe。要获得有关如何执行此操作[的灵感，请参阅 HawkEye - .Net 运行时对象编辑器](http://hawkeye.codeplex.com/)

*ps 每个答案旁边是一个全息复选框，勾选它以接受答案，您也将获得积分。*

# symfony - Symfony2：无状态身份验证设置为真，会话仍在创建中

> ID：10263575
> 
> 赞同：2
> 
> 时间：2012-04-21T22:29:02.953
> 
> 标签：symfony

我关注了[http://symfony.com/doc/current/book/security.html#stateless-authentication](http://symfony.com/doc/current/book/security.html#stateless-authentication)并将标志设置为 true。但是，仍在创建会话。我目前正在使用 PdoSessionStorage 来存储会话，如果这有什么不同的话。

```
firewalls:           
    api_area:
        pattern:  ^/api/
        stateless:  true
        http_basic:
            realm: "RESTful API" 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T22:32:14.403

更新：[#2200](https://github.com/symfony/symfony-docs/issues/1640) (Symfony 2.1) 配置选项`framework.session.auto_start`不再存在。只要设置合适，会话现在总是按需启动`php-ini`。

“无状态身份验证”意味着它不使用会话进行身份验证，但这并不意味着根本不会有会话。特别是与

```
framework:
    session:
        auto_start: true 
```

总会有一个活跃的会话

另请注意您链接的页面上的通知

> 如果你使用表单登录，即使你将 stateless 设置为 true，Symfony2 也会创建一个 cookie。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-08T07:06:03.153

以防万一它可以帮助其他正在努力解决这个问题的人“Symfony2 似乎总是开始一个会话，即使 PHP 将自动启动设置为 0 并且显然 Symfony2 配置为不自动启动会话”......

我发现我用于显示 Flash 消息（如果它们存在）的代码实际上是在启动一个会话（如果它不存在） - 在每个页面上。

我有：

```
{% for type, flashMessages in app.session.flashbag.all() %}
   {% for flashMessage in flashMessages %}
     <div class="alert alert-{{ type }}">
       {{ flashMessage }}
     </div>
   {% endfor %}
{% endfor %} 
```

以及在会话对象上请求 flashbag 的过程，如果会话尚不存在，则自动启动会话。

如果我将上面的代码块包装在：

```
{% if app.session.started %}
   ...
{%endif%} 
```

问题消失了。

这导致了很多不必要的性能开销——因为 PHP 会话 cookie 的不必要设置意味着我对未登录页面的缓存策略被破坏了。

希望这可以帮助

# java - 什么是一类一责任原则？

> ID：10263577
> 
> 赞同：6
> 
> 时间：2012-04-21T22:29:17.803
> 
> 标签：java, design-patterns, solid-principles

我想了解*一个班级，一个责任*的原则。我找到了一些关于它的文章，但没有例子。如果你能给我一个违反原则的类的例子，那将对我有所帮助。

我熟悉一个方法应该只做一件事的想法，例如 get 和 set 方法。它不能与*One Class, One Responsibility*相同，因为 set 和 get 方法都是在一个类中实现的。那么这是否意味着该类违反了规则，因为该类有设置和获取的责任？

什么是*一类一责任原则*？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T22:56:18.340

*我不是这个设计模式的 100% 专家，但我是这样*认为的——如果我创建一个对象，它只负责一件事。如果它需要做其他事情，但与另一个对象相关，根据情况，我会使用继承或接口。

这是一个看起来相当简单的概念。确保特定对象（或方法，就此而言）处理一个逻辑。如果它处理更多，您需要另一个对象（或方法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T23:07:27.303

关于不混合职责的原则方面。

如果您有一个处理发票的 InvoiceProcessor 类，根据业务规则进行计算，生成带有发票的 PDF，处理数据库并向卖方注册额外的奖励积分，那么您就有一个明确的需要分离关注点的案例。在这种情况下，应该明确分离甚至委托给其他类。

但是一个类 - 一个责任更加微妙和可怕。如果您必须为发票处理提供解决方案，并且像那些奖励积分一样有几个目标要实现，那么您可以有一个违反多个目标的功能：计算卖家的奖励积分和客户的折扣。

在较小的范围内：如果您有一个具有其数据结构的类，例如优先级队列或其他任何东西，同时将其与用于缓存部分的数据结构混合使用，例如使用 List 和 Map，那么您在某些情况下针对不同的关注点处理数据，甚至可能在缓存列表中寻址，从而使数据结构交织在一起。如果您随后有一个更改优先级并更改缓存状态的功能，那么将来将很难理解这些过程。

我经常遇到需要实现一些不同方面的违规行为，并且它们是在一个类中完成的。然后，API 具有不同抽象级别或困难语义的调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-06T16:03:02.723

这是您不知道自己需要它的事情之一，直到您尝试不使用它并查看它是如何变成一团糟的：

假设您编写了自己的 Logger 实用程序，并且因为它一开始很简单（带有写入标准输出的方法的单例），您决定将其所有功能放入一个类中。当您使用它时，您会想到要添加的更多功能：

*   登录到的不同目的地（stderr、文件、队列等）

*   更改消息格式的能力

*   为不同类别提供单独的记录器

*   按日志级别过滤类别消息的能力

*   您希望能够在程序运行时更改日志记录级别

*   新的日志记录级别（ERROR、WARN、INFO、DEBUG 等）

等等，然后您将每个功能的实现添加到您开始使用的同一个类中。你所做的每一次改变都意味着回到同一个班级，对它进行分类以查看相关内容，然后进行更改。该类将具有不同的生命周期事件，其中每个功能都被初始化，因此所有功能代码都不在一个地方，而是分布在类中的不同方法中。

因为所有代码都挤在一个类中，并且方法包含实现不同功能的代码，所以跟踪更改的所有相关部分变得具有挑战性，并且总是有可能更改可能会无意中影响其他一些功能，因此之前的一些- 现有功能现在可能在某些情况下停止工作。因此，您必须测试类中的所有特征，更糟糕的是，测试所有特征的所有组合，以便捕获这些错误。这意味着测试将不完整，错误可能会潜入。

现在看看像 log4j 这样的真实项目是如何处理这些东西的。不同的类处理格式化、处理输出的写入方式、为类别提供记录器以及所有这些部分之间的交互是明确定义的，结果是当你修补或替换它的一个部分时，关注点是分离的不影响其他部分。用户可以创建自己的类来添加他们需要的功能（他们不需要了解有关日志框架的所有内容，他们只需要知道他们想要添加的特定类型的合同）并将其插入，用户可以混合搭配不同的插件。如果一个插件坏了，这个坏点不会超出插件的范围，对单个部分的更改不会威胁到整个项目的完整性。就合同控制各个部分的交互而言，您无需测试特定功能的所有不同组合。它之所以如此工作，是因为它由各个部分组成，每个部分都有一个单一的职责。

使用单类方法你永远无法做到这一点，有人添加的每一个新功能都将成为项目的一个分支，并且将每个重新合并将是一项越来越大的任务。单一职责原则和其他 SOLID 规则的要点是提供一种整体策略，使软件能够以受控方式更改而不破坏事物。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T23:04:37.380

原理正是它所说的，仅此而已。一个班级应该只有一个职责。但是，定义责任可能很困难。一个示例可以是处理应用程序中所有数据库请求的“DatabaseHandler”类。

延伸阅读：[凝聚力](http://en.wikipedia.org/wiki/Cohesion_%28computer_science%29)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-28T15:57:56.533

类中的每一件事都应该与类应该负责的内容相关。

如果它是一个名为 MailSender 的类，它应该只知道如何发送邮件。创建邮件内容的代码不应包含在其中。

# php - PHP 准备好的语句失败

> ID：10263580
> 
> 赞同：0
> 
> 时间：2012-04-21T22:29:33.537
> 
> 标签：php, mysql, prepared-statement

我将准备好的 sql 插入语句（使用占位符？，？）传递到 mysql 数据库中。然后我使用 ->execute($array) 并传入一个值数组。当表单的每个字段都输入数据（数组完整）时，它工作得很好（即插入），但是完全失败如果只有一个元素没有完成。

对于较旧的 mysql_query，如果缺少某个值，它根本不会将该值插入到数据库中。

我们如何在准备好的语句中处理这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:17:48.953

我没有看到比较，因为 mysql_query 不带参数？

PDO 对象要求您将元素绑定到参数。这是漫长的道路：

```
$stmt->bindParam(":namedParam", 1, PDO::PARAM_INT); 
```

这是简写​​的，所以在内部 PDO 仍然应该为自己做一些额外的工作：

```
$stmt->execute(array($value1, $value2, $etc)); 
```

如果您的查询如下所示：

```
INSET INTO mytbl VALUES (?, ?, ?, ?, ?) 
```

你的 $data 数组看起来像这样：

```
$data = array($val1, $val2, $val3); 
```

您认为这两个`NULL`值应该插入到哪里？
第 1 次和第 3 次`?`? PDO 应该如何知道这一点？

此外，如果您确实知道该问题的答案，您仍然可以在 PHP 中处理它：

```
function queryMyTable($val1, $val2, $val3, $val4 = null, $val5 = null) {
    ...
    $stmt->execute(array($val1, $val2, $val3, $val4, $val5));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T22:43:22.570

他们处理它的方式是正确确保您已为查询输入所有相关值。mysql_query() 可以随心所欲，因为归根结底，它只需要支持 MySQL，但 PDO 是关系数据存储的通用接口，它不会确保你输入了所有你的数据。

# c# - C#：保护级别错误

> ID：10263581
> 
> 赞同：2
> 
> 时间：2012-04-21T20:15:07.810
> 
> 标签：c#, unit-testing

```
//Page 40: Unit Test for Player class
//Player must have a health that is greater than 0
//When the character is created.

namespace UnitTestingSample
{

    class PlayerTests
    {
        public bool TestPlayerIsAliveWhenBorn()
        {
            Player p = new Player(); //ERROR: 'UnitTestingSample.Player.Player()' is inaccessible due to its protection level

            if (p.Health > 0)
            {
                return true; //pass test
            }

            return false; //fail test

        }//end function

    }//end class

}//end namespace

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

//Page 41
//Player class has default health which is 10
//when his character is created
namespace UnitTestingSample
{

    class Player
    {
        public int Health { get; set; }

        Player() //constructor
        {
            Health = 10;
        }
    }
} 
```

================

你看，这就是让我难过的地方。

此代码来自名为“C# Game Programming: For Serious Game Creation”的书。

我从本书的 CD-ROM 中得到了完全相同的代码。该示例代码很好，而我的有错误。

这是我第一次使用 C# 编写游戏编码。但是，据我了解，我的应该可以工作。但是，看起来编译器不这么认为。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-01-01T21:00:58.747

我有一个类似的问题，发现这篇博客文章很有帮助 [http://softwareonastring.com/316/why-cant-my-test-access-a-public-constructor](http://softwareonastring.com/316/why-cant-my-test-access-a-public-constructor)

它建议的具体解决方案是将以下行添加到您要测试 AssemblyInfo.cs 文件的项目中

```
[assembly: InternalsVisibleTo("TestProject")] 
```

（其中TestProject更改为您的测试项目程序集的名称）

以及右键单击单元测试项目中的引用并添加对您正在测试的项目的引用。

这仅推荐用于单元测试，因为它将两个项目紧密耦合在一起，并且会违背正常的面向对象的最佳实践。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T20:20:21.757

```
class Player
{
    public int Health { get; set; }

    public Player() //constructor
    {
        Health = 10;
    }
} 
```

默认情况下，类成员是私有的，您的构造函数也是如此 - 这导致您的测试代码无法访问。如果您想从类本身以外的其他地方访问它，请将构造函数设为公开。

# javascript - 奇怪的 JavaScript 函数绑定。这个控制流程正确吗？

> ID：10263583
> 
> 赞同：0
> 
> 时间：2012-04-21T22:29:49.687
> 
> 标签：javascript

我在同一个 .js 文件中有以下函数定义（称为 A.js）

```
function PParser() {
....
makeExpression = function (lexemes, index) {

    return makeNumber(lexemes, index);
}

makeDeclaration = function(lexemes, index)
{
    if (lexemes[index].TokenType != LALLPLexer.VAR) {
        throw "Expected VAR at index " + index;
    }

    if (lexemes[index + 1].TokenType != LALLPLexer.ID) {
        throw "Expected ID at index " + index + 1;
    }

    if (lexemes[index + 2].TokenType != LALLPLexer.ASSIGN) {
        throw "Expected ASSIGN at index " + index + 2;
    }

    var expressionNodeResult = makeExpression(lexemes, index + 3);

... 
```

当达到“makeExpression”调用时，我期待控制流移动到上面定义的函数。但是，相反，另一个名为“makeExpression”的函数在完全不同的 .js 文件 (B.js) 中被调用。

```
 function Controller()
{
...

this.parseToStatement = function(statementText)
{
    makeExpression = function(expressionNode)
    {
        return new IntLiteral(expressionNode.Content);
    }

    try {
        statement = parser.parseStatement(new LALLPLexer().lex(statementText));

        if (statement.NodeType == LALLPParser.DECLARATION) {

            return new Declaration(statement.Id, makeExpression(statement.Expression));
        }
    }
    catch (exception) {
        statement = new UnknownStatement(statementText);
    }

    return statement;
}
} 
```

我不确定为什么。有趣的是，上面显示的“parseStatement”行是“makeExpression”调用的调用链。这是正确的 javascript 行为吗？如果是，我为什么要期待这种行为？我怎样才能得到预期的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T22:42:08.380

我对此并不完全确定，但我认为 js 并没有按照标准将变量设为本地变量，因此所有这些函数都可能全局附加（到`window`变量），因此可能会相互覆盖。

尝试添加`var`所有这些定义（或`this.`在适当的情况下）。也许这会有所帮助。

# lua - 如何执行 lua_pushstring 并避免内存不足 setjmp 异常

> ID：10263585
> 
> 赞同：4
> 
> 时间：2012-04-21T22:30:15.180
> 
> 标签：lua, out-of-memory, setjmp

有时，在分配了一些资源后，我想在某些地方使用 lua_pushstring，以防万一失败。但是，正如文档似乎暗示的那样，lua_push* 函数总是会以内存不足异常结束。但是该异常会立即退出我的 C 范围，并且不允许我清理我可能临时分配的任何内容，这些内容可能必须在出现错误时释放。

示例代码来说明情况：

```
void* blubb = malloc(20);
...some other things happening here...
lua_pushstring(L, "test"); //how to do this call safely so I can still take care of blubb?
...possibly more things going on here...
free(blubb); 
```

有没有一种方法可以预先检查是否会发生这种异常，然后在我安全地清理自己的资源后避免推送和执行我自己的错误触发？或者我可以以某种方式简单地停用 setjmp，然后在推送后检查一些“魔术变量”以查看它是否真的有效或触发了错误？

我考虑过 pcall'ing 我自己的函数，但即使只是将我想通过 pcall 安全调用的函数推入堆栈也可能让我内存不足，不是吗？

为了澄清问题，我特别要求将其与自定义内存分配器结合使用，以防止 Lua 分配过多内存，因此假设这不是整个系统内存不足的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T23:12:08.180

除非您在创建 Lua 状态时向 Lua 注册了用户定义的内存处理程序，否则出现内存不足错误意味着您的整个应用程序内存不足。从这种状态恢复*通常*是不可能的。或者至少，在很多情况下是不可行的。这可能取决于您的应用程序，但可能不是。

简而言之，如果它出现了，你有*更大的*事情需要担心；）

唯一会影响您的清理方式是针对应用程序外部的内容。如果您有一些需要释放或设置某些状态的进程全局内存。您正在进行进程间通信并且您有一些您正在谈论的内存映射文件。或类似的东西。

否则，最好只杀死你的进程。

* * *

您可以将 Lua 构建为 C++ 库。当您这样做时，错误将成为实际的异常，您可以捕获或仅使用 RAII 对象来处理。

如果你被 C 困住了……好吧，你无能为力。

> 我对一个自定义分配器特别感兴趣，它会更早地耗尽内存，以避免 Lua 吃太多内存。

那么你应该以另一种方式处理它。发出内存不足错误的信号基本上是说“我希望 Lua 立即终止”。

阻止 Lua 吃掉内存的方法是定期检查 Lua 状态的内存，如果它使用过多，则进行垃圾回收。如果这不能释放足够的内存，那么你应该手动终止 Lua 状态，但前提是这样做是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T23:01:25.750

[lua_atpanic()](http://www.lua.org/manual/5.1/manual.html#lua_atpanic)可能是您的一种解决方案，具体取决于您需要进行的清理类型。它永远不会抛出错误。

在您的具体示例中，您还可以将 blubb 创建为[userdata](http://www.lua.org/manual/5.1/manual.html#lua_newuserdata)。然后 Lua 会在它离开堆栈时自动释放它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-08T02:02:42.670

我最近再次进入了一些 Lua 沙盒，现在我认为我之前接受的答案是一个坏主意。我对此进行了更多思考：

**为什么定期检查是不够的**

定期检查大量内存消耗并“仅在安全的情况下”终止 Lua 似乎是个坏主意，如果您认为单个巨大的表可以用*一条*您将要处理的 VM 指令占用大量内存只有在它发生之后才发现——你的程序可能已经死了，然后你确实有*更大的*问题，如果你一开始就及时停止了分配，你可以*完全避免这些问题。*

由于 Lua 已经内置了一个很好的内存不足异常，我只想使用它，因为这允许我做最少需要的事情（防止脚本分配更多的东西，同时可能允许它恢复）没有我C 代码从中中断。

因此，我目前对带有内存限制的 Lua 沙盒的计划是：

*   使用返回 NULL 且有限制的自定义分配器

*   设计所有 C 函数，使其能够在没有内存泄漏或其他损坏的情况下处理此问题

**但是如何安全地设计 C 函数呢？**

如何做到这一点，因为 lua_pushstring 和其他人总是可以在我不知道这是否会提前发生的情况下将 jmp 设置为错误？（这原本是我的问题）

我想我找到了一种可行的方法：

我添加了一个工具来在分配指针时注册它们，并在我完成它们后取消注册它们。这意味着如果 Lua 在我没有机会清理的情况下突然将我从我的 C 代码中设置出来，我将在全局列表中拥有所有内容，我需要稍后在我重新控制时清理这些混乱。

**是丑还是什么？**

是的，这很 hack。但是，它很可能会起作用，并且与“定期检查”不同，它实际上可以让我拥有真正的硬限制，并避免由于攻击性攻击而使应用程序本身陷入困境。

# objective-c - 目标c：使用局部变量释放内存后是否需要将其设置为nil？

> ID：10263589
> 
> 赞同：2
> 
> 时间：2012-04-21T22:30:36.620
> 
> 标签：objective-c, variables, memory, allocation

我想知道，局部变量是否需要设置为 nil 才能在使用后释放变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T22:34:54.917

不会。内存根据其保留计数被释放。一旦它变为零，无论用于指向它的变量的值如何，它都会被释放。将变量设置为 nil 是一种很好的做法，因此您不要尝试访问已释放的内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T22:37:13.917

不。

如果您使用 ARC，则当变量超出范围（您的方法返回或块关闭）时，将释放任何强变量。将变量设置为`nil`最后将无效。

如果你不使用 ARC，那么一定要调用你拥有的对象`release`。`autorelease`完成后，您已经删除了对该对象的声明，并且可以将其释放。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T22:38:36.723

设置为 nil 的唯一时间是使用 setFoo: 方法或点记法来设置属性时。如果您只是将实例变量设置为 nil 而不是使用点表示法或方法，您实际上会泄漏内存。记住这一点，您就会明白为什么，不，将局部变量设置为 nil 根本没有任何效果。

您应该查看[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html)以更好地了解引用计数的工作原理。基本上，如果你对它调用 alloc，你也必须释放它。

# c# - 试图获取我的 Facebook 专辑 ID

> ID：10263590
> 
> 赞同：0
> 
> 时间：2012-04-21T22:30:42.563
> 
> 标签：c#, facebook, facebook-graph-api

我在没有任何帮助的情况下搜索并搜索了论坛。我知道这是微不足道的，我只是错过了一些东西。专辑不断回来，里面什么都没有。我已经验证我的 accessToken 是有效的。

```
 string folderName = string.Empty;

        var accessToken = Session["AccessToken"].ToString();
        var client = new FacebookClient(accessToken);

        dynamic albums = client.Get("/me/albums");

        foreach (dynamic album in albums)
        {
            folderName = album.name;

            //dynamic albumsPhotos = client.Get("me/" + album.id + "/photos");

            //foreach (dynamic photo in albumsPhotos)
            //{

            //}
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T23:32:18.193

参考：[https ://developers.facebook.com/docs/reference/api/album/](https://developers.facebook.com/docs/reference/api/album/)

要阅读专辑，您需要：

*   任何有效的访问令牌（如果它是公开的并且属于页面）
*   user_photos 权限（如果属于用户）
*   属于用户朋友的friend_photos权限

要检查的另一件事是动态对象，请参见此处：[Cannot get no。Facebook 相册中的照片](https://stackoverflow.com/questions/5992104/cannot-get-no-of-photos-in-a-facebook-album)

# html - 如何使用 div 制作多行和多列？

> ID：10263593
> 
> 赞同：0
> 
> 时间：2012-04-21T22:31:16.320
> 
> 标签：html, row

全部！我感谢您今天的时间和关注:)。我目前使用 Dreamweaver 并做一些设计工作，但是我一直无法找到这个问题的答案。我很乐意追求任何必要的知识来实现​​这一点（例如学习 php 或 javascript 等）......这是我的问题......我想让网页具有这种类型的布局 - （这将是主页，分成三列的组件（上面会有一个标题，我在插图中省略了，因为那将是网站的全宽并且不会产生问题，我不认为）......左边是完整的高度。中心将有三行，右侧将有三行 - 从中​​心列偏移） -

[http://i.stack.imgur.com/KkEiR.jpg](http://i.stack.imgur.com/KkEiR.jpg)

我可以放置一个 div 作为整个事物的包装器（就像我通常在制作三列宽的部分时需要做的那样），并使用 css... 使左列浮动。在中间添加一个左边距（无论左边 div 的宽度是多少）。并浮动右边的，正确的......但是，虽然这确实允许我有三列，但我不能在中心或右列中向下多行（因为它在最大列的高度输出裹）。在这些较小的部分中，我想使用一些 php 脚本（我有一个 php 新闻脚本和一个喊话框脚本），所以它不像是静态图片或文本，我可以仔细切片，在其中制作大量 div 换行和 div这页纸...

在我的研究中，我看到了诸如 php 包含和需要之类的东西（我不确定这是否允许在中心和右列中使用多行），我只知道它可以用于插入 php 脚本或将文档放入 div。我还读到这不是最佳实践，应该考虑 Ajax/jquery 以获得更好的安全性。但是，我仍然不确定其中任何一个是否允许我创建此布局。我确信 joomla 或 drupal 或任何数量的其他 CMS 可能允许这样做，但我想知道“动手”的方式来做到这一点（我一直发现这使得配置、故障排除和设计变得更加容易和质量更好）。

我恭敬地要求答案尽可能保持在主题上，而不要问诸如您为什么通常这样做或使用它？等等...我将非常感谢有关我可以做些什么来完成此任务的建设性信息：D...我再次感谢大家的时间和关注！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T22:31:40.763

好的，我至少找到了一种方法来实现这一点：D ...我仍然在 Divs 中使用 Divs（向左或向右浮动）并将它们放在包裹中（也可以向左和向右浮动）以获得尽可能多的根据我的需要划分。然后，当我需要多个垂直 Div 时，我只需创建一个新的 *.php 文件，其中包含我需要的所有垂直 Div，并使用 php include_once 行将该 *.php 文件（以及所有垂直 Div）调用到 Div 上原始页面，瞧！

```
 My first page (in shorthand) may look something like this - 

<div id="content_wrap">
     <div id="a"></div> (floated left in css)
     <div id="b">
          <?php include_once ('vertical_divs.php'); ?>
     </div> (floated left with lefthand margin in css)
     <div id="c"></div> (floated right in css)
</div>

 My vertical_divs.php may look like this -

<div id="vert_a"></div>
<div id="vert_b"></div>
<div id="vert_c"></div>
<div id="vert_d"></div>
<div id="vert_e"></div> 
```

同样，这会将所有这些垂直 Div 拉入 Div“B”，从而允许该列具有多个垂直 Div，而不会干扰其左侧或右侧的 Div。

# javascript - 流式传输 WAV 文件。（不录音）

> ID：10263600
> 
> 赞同：2
> 
> 时间：2012-04-21T22:32:31.267
> 
> 标签：javascript, audio, wav

我正在尝试播放 .wav 作为背景音乐（这是匹配氛围），但我无法让它流式传输，它是 20 兆，所以我真的不想让人们等待它下载......可能是等待30秒！

我让它在 IE 中运行良好，但 FF 似乎不喜欢在 IE 中运行的任何代码 :)

我正在使用一个对象来保存在 IE 中工作的声音。当我想要的时候，我也有一些 javascript 淡入淡出声音。

任何人都可以为我提供跨浏览器兼容性的代码片段，以播放 wav 文件，而不需要额外的插件（如果可能的话），也不需要使用 jquery 或原型或类似的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T22:38:13.557

尝试这个：

```
<!DOCTYPE html>
<html>
<body>
<audio controls="controls">
  <source src="song.ogg" type="audio/ogg" />
  <source src="song.mp3" type="audio/mp3" />
  Your browser does not support the audio element.
</audio>
</body>
</html> 
```

但是您应该将[wav 文件压缩为 mp3](https://www.google.com/search?q=wav%20to%20mp3)。[你可以在这里](http://www.w3schools.com/html5/tryit.asp?filename=tryhtml5_audio)看到一个现场演示。

# jquery - 如何优化 click() 的 jQuery 代码

> ID：10263604
> 
> 赞同：1
> 
> 时间：2012-04-21T22:33:01.983
> 
> 标签：jquery

我如何优化以下 jQuery 代码？

```
var $open = $('#open'),
        $panel = $('div#panel'),
        $close = $('#close'),
        $switch = $('#toggle');
$open.click(function(){
    $panel.slideDown('slow');
});
$close.click(function(){
    $panel.slideUp('slow');
});
$switch.children('p').click(function(){
    $switch.children('p').toggle();
});
$close.css({'display':'none'}); 
```

我认为有一个更好的方法来写这个。

这是它所属的 HTML 代码。

```
<div class="tab">
  <ul class="login">
    <li class="left">&nbsp;</li>
    <li>&nbsp;</li>
    <li id="toggle">
      {if $smarty.session.customer_id}
      <a id="open" class="open" href="{$logoff}" title="{#link_logoff#}">{#link_logoff#}</a>{else}<p id="open" class="open">{#link_login#}</p>
      {/if}
      <p id="close" class="close">Schließen</p>         
    </li>
    <li class="right">&nbsp;</li>
  </ul> 
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T23:04:34.993

我可能会这样写：

```
 var $open = $('#open'),
        $panel = $('div#panel'),
        $close = $('#close')

    $open.click(function(){
        $panel.slideDown('slow');
    });

    $close.click(function(){
        $panel.slideUp('slow');
    });

    $('#toggle p').click(function(){
        $('#toggle p').toggle();
    });

    $close.hide() 
```

并没有太大的不同，我不知道是什么给你带来了问题以及你真正想要实现的目标。

# android - Android imageview边框填充

> ID：10263605
> 
> 赞同：0
> 
> 时间：2012-04-21T22:33:08.317
> 
> 标签：android, background, imageview, padding

我有一个自定义图像视图，我想在它周围创建一个白色边框。在进行一些研究时，如果得到建议以创建这样的代码但我不工作，则 imageview 是来自 youtube 视频的缩略图，并显示在 listview 中。

```
 mImage = new ImageView(mContext);
    mImage.setLayoutParams(new LayoutParams(100, 100));
    mImage.setVisibility(View.GONE);
    mImage.setBackgroundColor(Color.WHITE);
    mImage.setPadding(1, 1, 1, 1); 
```

这不是代码的完整部分，请告诉我是否需要发布更多内容。它不会在图片周围进行 1dp/px 填充。它使上下大约 20dp 左右，左右可能 1。我希望它在图像周围创建一个小边框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:29:57.383

> image_background 在下面

```
LinearLayout _imageViewFriendLayout = new LinearLayout(this);
                _imageViewFriendLayout.setBackgroundResource(R.drawable.image_background);
                _imageViewFriendLayout.setPadding(2, 2, 2, 2);

                WebView _imageViewFriend = new WebView(this);
                LayoutParams _imageViewFriendParam = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
                _imageViewFriendParam.width = convertDipToPx(65);
                _imageViewFriendParam.height = convertDipToPx(65); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:33:07.320

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
<solid android:color="#FFFFFF" />

<stroke android:width=".5dp"
        android:color="#808080" />

<corners 
        android:bottomRightRadius="0dp"
        android:bottomLeftRadius="0dip"
        android:topLeftRadius="0dip"
        android:topRightRadius="0dp"/> 
```

# iteration - 如何遍历 TreeMap 的一部分？

> ID：10263610
> 
> 赞同：0
> 
> 时间：2012-04-21T22:33:46.180
> 
> 标签：iteration, treemap, alphabetical

我正在做一个作业，我必须搜索 TreeMap 中的键（映射到它们所在的文件。基本上，这个 TreeMap 是一个倒排索引），它以我们在程序中指定的查询词开头一个查询文件。但是，为了提高效率，我的教授不希望在我们查找以查询词开头的键时遍历 TreeMap 中的所有键，而是希望我们只遍历需要遍历的键。例如，如果查询词以 C 开头，那么我们应该只遍历以 C 开头的键。关于如何处理这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T00:49:55.710

使用 TreeMap 的`subMap()`方法获得一个 SortedMap，它只包含您要检查的键范围。然后迭代该 SortedMap。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-03T10:14:38.010

这是@ottomeister 建议的基本实现：

```
public class Tester{
    public static void main(String a[]){
        TreeMap<CustomObject,String> tm = new TreeMap<CustomObject,String>();
        tm.put(new CustomObject(4,"abc"),"abc");
        tm.put(new CustomObject(7,"bcd"),"bcd");
        tm.put(new CustomObject(25,"cde"),"cde");
        tm.put(new CustomObject(18,"def"),"def");
        tm.put(new CustomObject(2,"efg"),"efg");
        tm.put(new CustomObject(8,"fgh"),"fgh");
        tm.put(new CustomObject(3,"aab"),"aab");
        tm.put(new CustomObject(13,"aab"),"abb");

        Map<CustomObject, String> sub = tm.subMap(new CustomObject(9,""),new CustomObject(20,""));

        for(Map.Entry<CustomObject,String> entry : sub.entrySet()) {
            CustomObject key = entry.getKey();
            String value = entry.getValue();

            System.out.println(key.getId() + " => " + value);
        }
    }
}

class CustomObject implements Comparable<CustomObject>{
    private int id;
    private String Name;
    CustomObject(int id, String Name){
        this.id = id;
        this.Name = Name;
    }
    @Override
    public int compareTo(@NotNull CustomObject o) {
        return this.id - o.id;
    }
    public int getId(){
        return this.id;
    }
} 
```

输出：13 => abb 18 => def

# ruby - 是否有预先构建的函数来添加两个数组中的元素？

> ID：10263614
> 
> 赞同：2
> 
> 时间：2012-04-21T22:33:54.760
> 
> 标签：ruby

如果我有两个数组：

```
a = [1,2,3]
b = [2,3,4] 
```

是否有一个预先构建的函数来添加两个数组来给出

```
c = a + b = [3,5,7] 
```

即添加数组中每个元素的值？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-21T22:43:35.787

不，没有一种方法可以解决这个问题。但是你可以结合起来`zip`像`map`这样：

```
c = a.zip(b).map {|a,b| a+b} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-21T22:46:36.080

我认为与您所问的最接近的是：

```
[1,2,3].zip([2,3,4]).map{|x| x.reduce(:+)} 
```

它甚至适用于更多数组

```
[1,2,3].zip([2,3,4], [3,4,5], [4,5,6]).map{|x| x.reduce(:+)} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-21T23:17:58.250

这看起来很像向量加法。这是实现这一目标的一种方法：

```
require 'matrix'

a = Vector[1,2,3]
b = Vector[2,3,4]

puts a+b
#=> Vector[3,5,7] 
```

只需`to_a`在 Vector 上使用即可获取数组。

# iphone - 如何获得 UITableViewCell 的浮雕外观

> ID：10263617
> 
> 赞同：0
> 
> 时间：2012-04-21T22:34:11.063
> 
> 标签：iphone, cocoa-touch, uitableview

我是 iOS 编程的新手。在我正在编写的应用程序中，我以动态/编程方式将用户输入添加到 UITableView。对于每个用户输入，我将其放在 UITableViewCell 中并将其添加到 UITableView。我希望表格单元格看起来像 iPhone 的“消息”屏幕（像气泡或“整个”单元格的一些浮雕外观）。这怎么可能？请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T05:35:50.907

使用此参考...

[气泡文本 TableView](http://mobiforge.com/developing/story/sms-bubble-ui-iphone-apps)

希望，这将帮助您享受...

# php - 我正在尝试从输入框中获取数据并将其传递给数据库需要帮助无法获得结果

> ID：10263620
> 
> 赞同：-1
> 
> 时间：2012-04-21T22:35:30.427
> 
> 标签：php, mysql

我正在尝试从输入框中获取数据并将其传递到数据库以显示适当的记录和结果，但需要帮助无法获得结果

```
<html>
<body>
</body>
</html>

<?php>
$prod_name = $_POST["name_of_the_product"];
echo [$prod_name];
$db_host = "localhost";
$db_username = "acwj_price";
$db_pass = "";
$db_name = "acwj_price";

mysql_connect("$db_host","$db_username","$db_pass") or die ("Please Try Again");
mysql_select_db("wikiacwj_price") or die ("no data");

$sql = mysql_query("SELECT * FROM price_comparsion where product_name="prod_name"");

//write the results

while ($row = mysql_fetch_array($sql)) {
echo $row['product_name'];}

?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T22:40:44.277

警告：检测到货物崇拜计划！你有大量的语法错误，你有 SQL 注入漏洞，你有无用的错误处理，等等等等。换句话说，代码是一团糟。

1）这里`echo [$prod_name];`有什么用`[]`？这是一个明显的语法错误

2) mysql_connect("$db_host" 等... - 为什么是`""`周围的变量？你正在创建一个新的空字符串，在其中嵌入另一个字符串 - 完全浪费了 CPU 周期。

3) `or die ("Please Try Again");` - 告诉您网站的用户再试一次有什么用？如果您的代码无法登录 mysql，用户应该如何解决这个问题？重新加载时锤击不会使无效的 mysql 登录神奇地重新开始工作。如果您是代码的唯一用户，至少有一个有用的错误消息输出，解释为什么脚本会死掉，例如`or die(mysql_error())`.

4) `... where product_name="prod_name"")`。您在这里遇到了另一个可怕的语法错误 - 您不能在使用您尝试嵌入的相同类型的引号构建的字符串中嵌入引号。

4a）应该是`... product_name='$prod_name'"`，也许，所以你实际上嵌入了传入的表单值？

4b)`$prod_name`现在是您的 SQL 注入源，您应该拥有 AT MINIMUIM `$prod_name = mysql_real_escape_string($_POST['name_of_product'])`，并在连接到数据库后将其放在某个地方，因为 m_r_e_s() 仅在您有活动的数据库连接时才有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T22:48:11.957

我们需要更多的上下文来给你一个可靠的答案，但是查看你的代码我发现了以下导致问题的事情：

`echo [$prod_name];`不正确 - 应该是`echo $prod_name;`

此外， mysql_connect 不正确 - 应该是：（ `mysql_connect($db_host,$db_username,$db_pass) or die ("Please Try Again");`
*你不应该在变量周围加上引号）*

并且sql语句不正确-应该是：（
`$sql = mysql_query("SELECT * FROM price_comparsion where product_name='" . mysql_real_escape_string($prod_name) . "'");`
*更正了引用，更改为传入变量，并添加`mysql_real_escape_string`为最小的sql错误预防）*

注意：这并不反映 SQL 的最佳实践——原始代码中存在各种 SQL 注入攻击漏洞——此代码仅经过修改才能正常工作。如果您要编写这样的代码，您应该阅读有关 SQL 注入预防的内容。StackOverflow 上有很多很好的信息——这里只是一个例子：[SQL Injection, Quotes and PHP](https://stackoverflow.com/questions/7030428/sql-injection-quotes-and-php)

# java - 我怎样才能获得适用于 Windows XP 的 Xuggler 罐子？

> ID：10263621
> 
> 赞同：0
> 
> 时间：2012-04-21T22:35:35.450
> 
> 标签：java, video, mpeg, xuggler

我找不到 Xuggler 的 jar 文件。我怎样才能得到它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T23:35:47.630

请参阅[下载和安装](http://www.xuggle.com/downloads)。它描述了如何使用 Maven 或 Ivy 获取依赖项。但是你也可以[直接](http://xuggle.googlecode.com/svn/trunk/repo/share/java/xuggle/xuggle-xuggler/)下载这些，链接在下面提到`Using Xuggler WITHOUT Apache Maven or Apache Ivy`。该部分下方还有一个表格，可以帮助您选择特定架构所需的文件。

# php - 将 mysql 转换为 mysqli 检查查询

> ID：10263624
> 
> 赞同：1
> 
> 时间：2012-04-21T22:35:47.783
> 
> 标签：php, mysql, mysqli

我有一个选择查询。另一个简短的 if-form 检查此选择查询是否返回某些内容。

所以我有：

```
$query = "SELECT `a` FROM `b` WHERE c='$c'";
$test = ($query = mysql_query($query)) ? $mysql_num_rows($query) : 0; 
```

所以我想转换成 mysqli 但下面的代码似乎是错误的（$db = mysqli）：

```
$query = "SELECT `a` FROM `b` WHERE c='$c'";
$test = ($query = $db->query($query)) ? $db->num_rows($query) : 0; 
```

使用时：

```
$test = ($query = mysqli_query($query)) ? mysqli_num_rows($query) : 0; 
```

它将回显错误消息：

```
Warning: mysqli_query() expects at least 2 parameters, 1 given... 
```

所以如果有人会那么友好并且可以给我一个解决这个问题的建议，我真的很感激。多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T23:03:21.637

程序模式下的 mysqli 不像 mysql 库那样默认使用最后建立的连接。您必须每次都明确包含连接：

```
$test = ($query = mysqli_query($conn, $query)) ? mysqli_num_rows($query) : 0;
                               ^^^^^^ 
```

同样，对于 num_rows，它是`mysqli_stmt_num_rows($result)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T23:05:33.030

如果您使用的是过程样式（即 mysqli_query 而不是 OO 方法），那么您应该将 $link var 添加到[mysqli_query的参数中](http://php.net/manual/en/mysqli.query.php)

# c# - 返回一个列表

> ID：10263631
> 
> 赞同：1
> 
> 时间：2012-04-21T22:36:46.740
> 
> 标签：c#, asp.net-mvc-3, list

我有一个返回类型列表的函数： List< Id:Name, Name:string > 你如何在 C# 中指定返回这个 List Type ？

这是代码：

```
 public ?????? GetDepartements( int idRegion )
    {
        var a = (from o in _meilleurPrestaEntities.Departements
                where o.de_id_region == idRegion
                select new {Id = o.id_departement, Name = o.nom}).ToList();

        return a;
    } 
```

返回用作 Json 结果。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T22:38:14.590

我建议使用键值对

```
return List<KeyValuePair<int,string>>() 
```

[编辑] 你需要稍微修改你的代码 - 它应该看起来像这样：

```
 var a = (from o in _meilleurPrestaEntities.Departements
                where o.de_id_region == idRegion
                select new KeyValuePair<int,string>(o.id_departement,o.nom}).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T22:41:27.050

你不能。您有一个匿名类型列表，并且您不能将匿名类型指定为方法返回类型的一部分（或几乎其他任何地方，除非您可以使用`var`）。

要解决此问题，您有多种选择：

*   创建普通类来表示返回类型并在您的返回类型中使用它。
*   使用类似的东西`List<Tuple<int, string>>`。
*   返回`List<dynamic>`。这样，您将能够像往常一样处理返回的值，但不会获得编译时检查或 IntelliSense。
*   返回`List<object>`。如果您不需要以通常的方式访问属性，这可能很有用，但您只会将结果传递给使用反射的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T23:16:42.993

我没有打开 VisualStudio 来尝试它，但我认为`dynamic`在这种情况下你实际上可以返回。或者你可以使用`ExpandoObject`.

但是，正如其他人所提到的，“更好”的方法是使用类似的东西`Tuple`or `KeyValuePair`，或者不要偷懒，只需为您将返回视图的内容制作一个实际模型（换句话说，一个“视图模型”） .

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T22:38:51.107

我认为您必须指定一个类型，然后将该类型用于您的返回值和您的 select 语句。

# java - 为什么实体 bean 被认为是贫血的？

> ID：10263632
> 
> 赞同：2
> 
> 时间：2012-04-21T22:36:58.393
> 
> 标签：java, entity, anemic-domain-model

我阅读了几篇文章，告知 Java EE 环境中的实体 bean 被认为是贫血的（意味着只包含 getter 和 setter 而没有实现行为）。

是什么阻止我将行为放入实体 bean 中？因此，会话 bean（无状态或有状态）可以将所有业务逻辑委托给它们（对于由实体拥有的逻辑有意义）。

我不明白为什么实体 bean 一定是贫血的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T22:51:23.237

在实体 bean 上实现功能没有任何限制，但它们并不打算在整个应用程序中使用，因此大多数时候您将添加修改会话 Bean 上的实体的行为，只是因为会话 Bean 应该从以前端为例。

如果我们更深入一点，会话 bean 方法通常带有事务性和安全性方面，而实体 bean 则没有，因此如果您将代码添加到实体中，您的应用程序可能不会以预期的方式运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T22:49:03.443

从纯语义的角度来看，您会期望 ENTITY bean 是实体及其属性的表示。如果您将此与一些逻辑结合起来，那么您将为您的实体类添加额外的责任。正如我们从 Curly 定律或单一责任原则中知道的那样，每个类应该做一件事，而且只做一件事：

[http://www.codinghorror.com/blog/2007/03/curlys-law-do-one-thing.html](http://www.codinghorror.com/blog/2007/03/curlys-law-do-one-thing.html)

[http://en.wikipedia.org/wiki/Single_responsibility_principle](http://en.wikipedia.org/wiki/Single_responsibility_principle)

如果你认为你有足够的理由违反这个原则，你可以，但根据我的经验，没有理由足以违反标准的软件工程实践，特别是如果你像我一样相信软件的质量最好的体现是其代码的质量。

# java - 在字符串中查找 int

> ID：10263634
> 
> 赞同：1
> 
> 时间：2012-04-21T22:37:15.990
> 
> 标签：java, arrays, string, input, int

好的，如果我有一个“3 6”的字符串输入

如何将这两个 int 放入数组中？如果它们之间有多个空格怎么办？

假设我希望这些数字位于 {3, 6} 之类的数组中，这可能吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T00:58:46.593

试试这个，只要找到一个或多个空格的序列，就使用正则表达式拆分输入字符串，然后将结果转换`String[]`为`int[]`：

```
String numberString = "  1   2 34    7 ";
String[] numbers = numberString.split("\\s+");
int[] ints = new int[numbers.length];
for (int i = 0; i < ints.length; i++)
    ints[i] = Integer.parseInt(numbers[i]); 
```

现在`ints`数组包含预期值：

```
System.out.println(Arrays.toString(ints));
> [1, 2, 34, 7] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T01:00:46.797

```
Scanner sc = new Scanner(mString);
while (sc.hasNextInt()){
    mArrayList.add(sc.nextInt())
} 
```

然后只需将 ArrayList 转换回数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T22:42:10.550

```
$string = "3 6 4 879";
preg_match_all('/\d+(?=\s*)/', $string, $arr); 
```

这是一种 PHP 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T22:43:26.317

您可以使用 split 来解决您的问题，例如：

按空格分割的程序 [C#]

```
static void Main()

{
string s = "1 3 2 7";
//
// Split string on spaces.
// ... This will separate all the words.
//
string[] words = s.Split(' ');
foreach (string word in words)
{
    Console.WriteLine(word);
}
} 
```

输出

1 3 2 7

# jquery - jQuery：如何在第一个事件完成之前停止用户触发相同的事件

> ID：10263635
> 
> 赞同：2
> 
> 时间：2012-04-21T22:37:17.207
> 
> 标签：jquery

我正在为一个朋友制作一个投资组合网站，当我使用 jQuery 为元素制作动画时遇到了一个小问题。

这是我的开发站点[http://dotlinesquare.phpfogapp.com/portfolio/gaze](http://dotlinesquare.phpfogapp.com/portfolio/gaze)控制按钮位于黑色标题处。

问题是如果我在事件发生时单击按钮，它会弄乱位置编号。

这是代码希望它可以帮助您理解我的问题

```
$('#next').click(function() {
    var currentMargin = $('#slider').attr('style');

    var number = currentMargin.match(/-?[0-9]+/);
    var position = number - 993;

    $('#slider').animate({ 
        marginLeft: position,
    }, 1000, 'easeInQuad', function() {
        console.log('done');
    });
});
$('#back').click(function() {
    var currentMargin = $('#slider').attr('style');

    var number = currentMargin.match(/-?[0-9]+/);
    var num = new Number(number)
    var position = num + 993;
    console.log(position);
    $('#slider').animate({ 
        marginLeft: position,
    }, 500, 'easeInQuad', function() {
        console.log('done');
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T22:45:32.023

您可以使用[.data()](http://api.jquery.com/jQuery.data/)绑定 2 click 函数的状态，并在运行操作之前先检查它是否正在进行中。像这样：

```
 $('#next').click(function() {
    if ( $("#slider").data('inprogress') != true ) {

        $("#slider").data('inprogress',true);

        var currentMargin = $('#slider').attr('style');

        var number = currentMargin.match(/-?[0-9]+/);
        var position = number - 993;

        $('#slider').animate({ 
            marginLeft: position,
        }, 1000, 'easeInQuad', function() {
            console.log('done');
            $("#slider").data('inprogress',false);
        });

      }
  });
  $('#back').click(function() {
    if ( $("#slider").data('inprogress') != true ) {

        $("#slider").data('inprogress',true);

        var currentMargin = $('#slider').attr('style');

        var number = currentMargin.match(/-?[0-9]+/);
        var num = new Number(number)
        var position = num + 993;
        console.log(position);
        $('#slider').animate({ 
            marginLeft: position,
        }, 500, 'easeInQuad', function() {
            console.log('done');
            $("#slider").data('inprogress',false);
        });
    }

  }); 
```

# javascript - 更新 MongoDB

> ID：10263636
> 
> 赞同：0
> 
> 时间：2012-04-21T22:37:19.627
> 
> 标签：javascript, mongodb

有谁知道我如何在 MongoDB 中更新。

我想用 timesvisted 更新 totalVisits

```
// Test data
var currentUser = "John"
var currentPage = "pageName"
var timesvisited = 59

Page.find({"_id" : currentUser}, [], {},function(err, pages) {
            pages = pages.map(function(ud) {
              return { userDetails: ud};
            });

//database structure example
{ "_id" : "John",
  "pageName" : { "totalVisits" : 58,
                 "timeOnPage" : 2432,
                 "lastVisitDate" : "10/11/2011",
                 "clickNoOnPage" : "5"
               },
  "anotherPageName" : { "totalVisits" : 18,
                 "timeOnPage" : 5362,
                 "lastVisitDate" : "01/10/2011",
                 "clickNoOnPage" : "15" 
```

我正在尝试更新 totalVisits 值并尝试过类似

```
{$set : { pages[0].userDetails[currentPage].totalVisits : timesvisted}} 
```

但是我收到“SyntaxError: Unexpected token [”消息

我遇到的问题之一是 [currentPage] 部分，因为 currentPage 可以更改，因此我无法对 pageName 进行硬编码。

**编辑***** ******

 **我已经修改了这一行

```
lastVisitedSiteDate = {$set : { "pageName.totalVisits" : timesvist}}; 
```

这很好用。但是，我需要不要硬编码 pageName，它需要类似于 currentPage，以便可以将不同的页面名称传递给它，例如 anotherPageName。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T22:45:49.280

Mongo 函数的第二个参数`find`指定要拉回哪些字段。它需要是一个文档，例如`{}`，而不是一个数组。**

# android - 将 Android OpenGL ES 1.0 SurfaceView 渲染为 JPEG

> ID：10263639
> 
> 赞同：0
> 
> 时间：2012-04-21T22:37:24.403
> 
> 标签：android, opengl-es, bitmap, render, surfaceview

我正在尝试使用以下代码将 GLSurfaceView 渲染为 JPEG：

```
FileOutputStream image = FileIO.getInstance().writeFile("racesow/test" + this.frameNum +" .jpg"); // creates an ouputstream in external storage directory
Bitmap bitmap = Bitmap.createBitmap(640, 480, Bitmap.Config.ARGB_8888); 
Canvas canvas = new Canvas(bitmap);
this.game.glView.draw(canvas); // glView is the GLSurfaceView
bitmap.compress(Bitmap.CompressFormat.JPEG, 85, image);
image.flush();
image.close(); 
```

在将完整场景渲染到表面视图后，我正在执行此代码。正在创建图像，但它们都是黑色的。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T04:39:02.737

这只是没有实现（[`SurfaceView.draw'1`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/view/SurfaceView.java#SurfaceView.draw%28android.graphics.Canvas%29)，[`GLSurfaceView`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/opengl/GLSurfaceView.java#GLSurfaceView)）。在使用 OpenGL 时截取屏幕截图需要特殊处理，但该`draw`方法在`GLSurfaceView`.

但是，由于它是一个开放类，您可以从它派生并添加您自己的`draw`自[定义代码实现来截取屏幕截图](https://stackoverflow.com/questions/3310990/taking-screenshot-of-android-opengl)；或者任何最适合你的。

# c - 递归函数中的 GCC 编译器行为

> ID：10263640
> 
> 赞同：1
> 
> 时间：2012-04-21T22:37:55.370
> 
> 标签：c, gcc, recursion

前几天，我的教授说：

> 当使用相同的值调用函数两次时，函数会重用结果（先前计算的值）。

但是，结果（先前计算的值）在堆内存中分配。

他举了一些例子，例如：斐波那契递归函数。

他犯错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T22:44:09.700

> 当使用相同的值调用函数两次时，函数会重用结果（先前计算的值）。

默认情况下，没有。您可以*记忆*一个函数，以便它重用已经计算的结果，但这需要程序员（或者可能是编译器，但我不知道有任何 C 编译器这样做）的特殊干预。

缓存所有计算值会非常昂贵和浪费，因为大多数函数不会使用相同的参数重复调用。并且很难找到值得缓存的调用的良好启发式方法。因此，这些事情留给了程序员，他们希望对哪些函数值得缓存有更多的了解。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T22:48:29.413

实际上，记忆化已经（在某种程度上）成为 C++11 的 C++ 标准的一部分。您可以查看使用新 C++11 功能[自动记忆递归函数的介绍。](http://cpptruths.blogspot.com/2012/01/general-purpose-automatic-memoization.html)

编辑：

这个问题是针对 C 而不是 C++。我错过了。这个答案不适用；我会删除它，但这里没有很多其他的记忆问题，而且很有可能它会帮助某人。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T22:43:30.670

`gcc`本身不会缓存任何以前的结果，但当然，对于许多递归函数，*实现*对以前计算的值的缓存是非常有意义的。

所以，如果他声称自己`gcc`负责这个缓存，他就犯了一个错误。我想，他宁愿提到一些特定的实现，例如斐波那契函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T23:07:38.347

不太一样，但我看到了 gcc 执行递归函数内联的报告。以斐波那契函数为例`f(x) = f(x - 1) + f(x - 2)`，显然 gcc 可以内联对 f(x - 1) 的调用，从而导致`f(x) = 2f(x - 2) + f(x - 3)`然后使用尾递归优化将其变成一个循环：`f(x) = 2f(x - 2) + 2f(x - 5) + ... + f(x % 3)`. 当然，那里仍然有一些递归，但要少得多。

# assembly - 我应该如何表示要在彩色计算机程序中使用的霍夫曼树？

> ID：10263641
> 
> 赞同：2
> 
> 时间：2012-04-21T22:38:10.967
> 
> 标签：assembly, tree, compression, huffman-code

我在 Python 中创建了一个愚蠢的 Huffman 压缩器，因此我可以压缩图像/声音数据以应用于我的 Tandy Color Computer Projects。解压器是用 6809 汇编编写的。我找不到存储霍夫曼树的方法，所以我生成了进入树并获取正确的未压缩数据的汇编代码。这是一个例子：

```
DECOMP_HUFFMAN:        PSHS    A,B,X,Y,U
                       LDB     #8
                       STB     $2100
                       pshs    x
                       ldx     $2102
                       stx     $2106
                       puls    x                       
                       LDB     ,X+
                       JMP     inicio
prox_bit:              LSLB
                       PSHS    CC
                       DEC     $2100
                       BNE     S_P_B
                       LDB     #8
                       STB     $2100
                       LDB       ,X+
S_P_B:                 PULS    CC
                       RTS
armazena:              STA       ,U+
                       LEAY    -1,Y
                       BNE      inicio
                       PULS   U,Y,X,B,A
                       RTS

inicio:     jsr prox_bit
            tfr  cc,a
            anda #1
            sta  $2104
            lda ($2102)
            bne  n1
            lda $2104
n0:         pshs x
            ldx  $2102
            leax 1,x
            lda  a,x            
            puls x
            bsr  armazena
            pshs x
            ldx  $2106
            stx  $2102
            puls x
            bra inicio

n1:         cmpa #1
            bne  n2
            lda  $2104
            bne  n0
            bra  n4

n2:         cmpa #2
            bne  n3
            lda  $2104
            beq  n0

n3:         lda  $2104
n4:         pshs x
            ldx   $2102
            leax  1,x
            lda   a,x
            leax  a,x            
            stx   $2102
            puls x
            bra   inicio 
```

我想使用真正的霍夫曼树，而不是创建汇编代码来做到这一点。

感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T01:50:14.347

您只需发送每个符号的代码长度即可传输 Huffman 代码。您不需要发送一棵树。代码长度为零表示该符号不出现。

您发送的内容可能类似于：

```
A: 2
B: 0
C: 0
D: 3
E: 1
F: 0
G: 0
H: 0
I: 3
J: 0 
```

您只发送数字的地方 - 对符号的分配是按符号顺序排列的。

两端将假定一个规范的霍夫曼码，其中代码值按从最短代码长度到最长代码长度的顺序分配。在一个位长度内，代码按其顺序递增地分配给符号。例如（符号：码长-码）：

```
E: 1 - 0
A: 2 - 10
D: 3 - 110
I: 3 - 111 
```

现在解码器只需将低位与每个位长度之间的截止点处的整数值进行比较（将上面的位反转存储），从最短的开始。在每个位长度内，从开始的索引为符号提供到查找表的偏移量。

# excel - 使用 VBA 检查下面的单元格是否为空

> ID：10263644
> 
> 赞同：12
> 
> 时间：2012-04-21T22:38:33.870
> 
> 标签：excel, vba

如何在 Excel 中使用 VBA 检查下面的单元格是否为空？我想对特定范围内的所有值求和，但前提是下面的单元格不为空。

VBA或任何其他方式有可能吗？

例子：

```
4 2 3 2 1
2   3 1 
```

总和为：4 + 3 + 2 = 9。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-22T17:52:33.340

试试这个简单的代码

```
If IsEmpty(ActiveCell.Offset(1, 0)) Then
'your code here
End If 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T22:45:38.920

我会为此推荐一个公式

**公式**

```
=SUMPRODUCT((A1:E1)*(A2:E2<>"")) 
```

快照

![在此处输入图像描述](../Images/a147e13231104dfe24ba0baeda115608.png)

如果您仍然想要 VBA，那么

**VBA**

```
Option Explicit

Sub Sample()
    Dim rng As Range
    Dim Cl As Range
    Dim tot As Long

    Set rng = Range("A1:F1")

    For Each Cl In rng
        If Len(Trim(Cl.Offset(1))) <> 0 Then tot = tot + Cl.Value
    Next

    Debug.Print tot
End Sub 
```

事实上，您可以在 VBA 中拥有许多版本。您也可以评估上述公式。例如

```
Option Explicit

Sub Sample()
    Debug.Print Evaluate("=SUMPRODUCT((A1:E1)*(A2:E2<>""""))")
End Sub 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-14T02:19:47.970

当从其他数据库导出数据时，我只使用“IsEmpty”时遇到了一些问题。这是我开发的功能：

```
Function IsVacant(TheVar As Variant) As Boolean
  'LeandraG 2010

  IsVacant = False

  If IsEmpty(TheVar) Then IsVacant = True
  If Trim(TheVar) = "" Then IsVacant = True
  If Trim(TheVar) = "'" Then IsVacant = True

End Function 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-15T13:58:19.603

对于那些绝望的人：有时 Excel 单元格看起来是空的，但经过检查可能包含一些不可见的东西，例如空格字符。然后所有这些 IsEmpty 和 IsNull 函数都对您没有帮助。

# objective-c - 如何在ios3.2中做多线程出现一些问题

> ID：10263661
> 
> 赞同：0
> 
> 时间：2012-04-21T22:41:18.767
> 
> 标签：objective-c, xcode

我有疑问我正在为 iPad 使用 ios 3.2 .. 它可以在 iphone 4.1 上运行，但不能在 iPad ios 3.2 上运行

这是我的代码：

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);
    dispatch_async(queue, ^{
        dispatch_sync(dispatch_get_main_queue(), ^{
            [self myPrivateFunction];
        });
    }); 
```

请告诉我我能为此做些什么..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T22:47:13.990

好吧，如果您花时间查看文档，您会看到 Grand Central Dispatch 已被引入 iOS 4.0 版。所以他们不可能在 iOS 3.2 上工作。

替代方案：使用一些异步方法，例如使用[pthreads](https://computing.llnl.gov/tutorials/pthreads/)`performSelectorInBackground:withObject:`推出您自己的线程方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T22:45:28.060

GCD 和块在 iOS 3.2 中不可用。对于简单的多线程，您可以使用`performSelectorInBackground:withObject:`and`performSelectorOnMainThread:withObject:waitUntilDone:`代替。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T22:47:10.160

在 iOS 4.0 之前，Grand Central 调度不可用。您可以使用 NSInvocationOperation 进行异步操作。

# ruby-on-rails - 自定义验证方法中的虚拟属性始终为零

> ID：10263665
> 
> 赞同：3
> 
> 时间：2012-04-21T22:41:33.540
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, validation

因为我对 Ruby on Rails 还很陌生，所以我将解释我做了什么。我的模型中有一个名为**testing**的虚拟属性。我这样定义它：

```
class Comment < ActiveRecord::Base
    attr_accessor :testing
    attr_accessible :user_name, :comment, :user, :testing 
```

然后我为自定义验证添加了自定义方法，如下所示：

```
validate :custom_validation 
```

当然，我还添加了方法：

```
def custom_validation
   # a bit of custom_validation
end 
```

然后我在表单中添加了一个字段：

```
<%= form_for(@comment) do |f| %>
    <%= render 'shared/error_messages', :object => f.object %>
    <%= f.hidden_field :post_id, :value => @post.id %>
    <% if !signed_in? %>
            <div class="field">
                    <%= f.label :user_name %>
                    <%= f.text_field :user_name, :class => "user_field" %>
            </div>
    <% else %>
            <%= f.hidden_field :user_id, :value => current_user.id %>
    <% end %>
            <div class="field">
                    <%= f.label :comment %>
                    <%= f.text_area :comment, :style => "height: 50px; width: 80%;" %>
            </div>
            <div class="field pin">
                    <%= f.label :testint %>
                    <%= f.text_field :testing, :class => "user_field" %>
            </div>
    <div class="buttons">
            <%= f.submit "Speichern" %>
    </div>
<% end %> 
```

这就是我所做的。所以请不要假设我做了其他我没有在这里描述的事情，因为我没有;）

我的问题是，在我的 custom_validation 方法中，我的虚拟现场**测试**始终为零。除非我在控制台中运行验证：

```
co = Comment.new
co.testing = "Hello"
co.valid? 
```

我已经使用记录器进行了检查。如果我通过控制台运行，则**测试**字段不是零。如果我通过浏览器运行它，它是。似乎该参数未正确传递给模型。我希望我只是错过了一些非常明显的东西。希望您能够帮助我。

干杯，迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T22:45:35.090

添加`attr_reader :testing`到您的模型！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T23:00:34.373

它与您的创建或更新操作中的内容有关。脚手架生成器将放入代码来设置真实属性，但不会从 attr_accessor 调用 setter 方法。

# class - 未定义对另一个类文件中的方法的引用，如何解决？

> ID：10263666
> 
> 赞同：0
> 
> 时间：2012-04-21T22:41:43.013
> 
> 标签：class, undefined

我一直在研究一个程序，它将对音频、SPL 等进行一些方程式。

我决定让主类文件向用户提供一个选项来选择他想要做的方程，而方程则存放在另一个类文件中。

Atm，设置主类文件只是为了测试 maxPeakSPL()，但我无法让它运行。

主文件

```
//Kh[a]os
#include "equations.h"
#include <iostream>

void mainLoop();

int maxSPL = 0;

int main()
{
std::cout << "Created by Kh[a]os" << std::endl << std::endl;
mainLoop();

return 0;
}

void mainLoop()
{

std::cout << "hi";
maxSPL = equations::maxPeakSPL();
std::cout << std::endl << maxSPL << "db" << std::endl << std::endl;

    } 
```

方程.h

```
#ifndef EQUATIONS_H
#define EQUATIONS_H

#include <string>

class equations
{
    public:
        equations();
        static int maxPeakSPL();
    protected:
    private:
};

#endif // EQUATIONS_H 
```

方程.cpp

```
#include "equations.h"
#include <iostream>
#include <string>

equations::equations()
{

}

static int maxPeakSPL()
{

    int Sens = 0;
    double Distance = 0;
    int Watts = 0;
    int sWatts = 2;
    int eWatts = 0;
    double maxSPL = 0;
    double counter = 0;
    double wall = 0;
    std::string corner = "";

bool v = true;

    std::cout << "Sensitivity (db): " << std::endl;
    std::cin >> Sens;
    std::cout << "Amplification (watts): " << std::endl;
    std::cin >> Watts;
    std::cout << "Listening Distance (meters): " << std::endl;
    std::cin >> Distance;
    std::cout << "Distance from Wall (ft): " << std::endl;
    std::cin >> wall;
    std::cout << "Are you they in a corner? (y/n): " << std::endl;
    std::cin >> corner;

    maxSPL = Sens - (Distance*3 - 3);

while(v == true)
{
if (sWatts > Watts)
        {
            v = false;
            eWatts = sWatts;
            sWatts = sWatts/2;
            Watts = Watts-sWatts;
            counter = (double)Watts/(double)eWatts;
            counter = counter*3;
            maxSPL = maxSPL + counter;

        }

     if (v == true)
     {
        maxSPL = maxSPL + 3;
        sWatts = sWatts*2;
     }

    }
    if (wall <= 4)
    maxSPL = maxSPL + 3;

    if (corner == "Y" || corner == "YES" || corner == "y" || corner == "yes")
    maxSPL = maxSPL + 3;

    return maxSPL;

} 
```

我运行它时遇到的错误是：未定义对 `equations::maxPeakSPL()' 的引用

我不知道如何解决这个问题，任何帮助都会很棒。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T22:59:51.017

在您的 main 中，尝试将函数放在 main 块之前。在指令/标志的名称前包含下划线。

# javascript - 谷歌浏览器扩展输入 type="radio"

> ID：10263667
> 
> 赞同：0
> 
> 时间：2012-04-21T22:41:51.557
> 
> 标签：javascript, google-chrome, google-chrome-extension

我做了扩展，可以打开/关闭谷歌浏览器中的图像和插件。看起来像这样：

[截图 http://les.by/images/Grado/ext.jpg](http://les.by/images/Grado/ext.jpg)

我知道如何使用 JavaScript 设置图像和插件的设置。而且我认为我知道如何获取设置。我希望在打开或关闭图像时检查“收音机”。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T00:14:44.033

您可以使用 JavaScript 在页面呈现时动态设置选中的值。

```
<label for=foo>foo</label>
<input id=foo name=foobar type=radio>
<label for=bar>bar</label>
<input id=bar name=foobar type=radio>​

<script>
var foo = document.getElementById('foo');
foo.checked = true;
</script> 
```

[http://jsfiddle.net/GgJP9/](http://jsfiddle.net/GgJP9/)

# c# - 如何将这 4 个 SQL 表转换为 OO 类（Java 或 C#），但不使用 NHibernate/LINQ？

> ID：10263674
> 
> 赞同：1
> 
> 时间：2012-04-21T22:42:16.503
> 
> 标签：c#, java, sql, vb.net, oop

**新手**在这里。我正在尝试学习 OOD/OOP 并在网上阅读我不应该将 SQL 表转换为类。但我找不到解释为什么不这样做或跳过哪些表格。所以我根据下图制作了一个 Web 应用程序。它工作得很好。但我不使用OO。有人可以简单解释一下哪个表不应该映射到一个类中，为什么不。感谢您的时间。PS 请不要使用 LINQ 或 NHibernate 等，因为我不了解它们。我只需要了解OOD。

![SQL 表图](../Images/35a929321e99cb68ad6da93c2529775d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T23:42:20.967

当使用 .NET（可能还有大多数其他语言）设计应用程序时，应用程序所需的每个表都成为其自己的类，但您当然可以拥有更多未映射到表的类。

掌握了程序的要求后，您需要设计数据库层（即您的表）来持久保存您希望保存在数据库中的任何数据。然后 - 对于一个小项目 - 每个表自动成为一个类，您可以开始构建更多类来管理这些“模型”或“实体”类。映射到表的类通常称为实体或模型。未映射的类仅称为类。

因此，在您的示例中，您有四个表，因此您将至少有四个模型类。然后，您将设计额外的非模型类（根据需要并且有意义），以通过您的程序适当地管理您的模型类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T07:11:27.800

如果您想了解 OOP，请不要从数据库开始。您到处都可以看到将表“转换”为类的事实只是演示某个 ORM（对象关系映射器）（如实体框架）的一个不幸的副作用。这些是某个库的演示，而不是面向 OOP 的演示。

所以，首先，忽略数据库。所有的。不幸的是，MS 将那个该死的 EF 推到了任何地方，因为“看看你做 Web 应用程序有多容易”。ORM 是一个高级主题。您应该学习 OOP 的基础知识（使用 C#），即了解对象与类的比较，什么是封装、继承、多态以及关于 SOLID 原则（谷歌关于它们，你会发现很多文章和视频演示）。

只有在你理解了这些之后，尝试一个数据库并从基本的 ado.net 开始。并且只有在你对它有清楚的了解之后，才去阅读有关 ORM 的知识。事实上，在此之前，您应该阅读一下设计模式。

你真的必须对所有这些概念有一个清晰的理解。现在，我认为一切都让您感到非常困惑，因为大多数教程都针对特定的功能，而不考虑适当的应用程序分层或职责。一切都混合在一起，作为初学者，您会留下这样的印象，那就是您必须这样做。

# html - 关于将参数传递给 flex 应用程序的一般安全问题

> ID：10263675
> 
> 赞同：-2
> 
> 时间：2012-04-21T22:42:18.593
> 
> 标签：html, actionscript-3, apache-flex, flex3, red5

首先 - 我的英语不好，所以我希望你能理解我的问题:)

我对使用 flex 开发 Web 应用程序的概念不熟悉，我需要您就如何保证它的安全以及最好的方法提供建议。

我正在使用 red5 记录器 ( [http://www.red5-recorder.com/](http://www.red5-recorder.com/) ) 使用户能够录制关于自己的短视频。我的应用程序将保存**单个视频**，并且仅适用于**注册用户** - 用户可以覆盖预览录制的视频（如果存在）。

**我的问题**- 我将一个变量传递给 html 中的 swf 对象（使用 php 生成），并带有当前登录用户 ID 的加密值（存储在会话中）。应用程序使用 ID 创建视频文件并将其与当前用户关联（video_10 **.flv**、video_193 **.flv**、...）。这是一个简单而基本的验证，但我不知道可能的风险是什么。有没有其他方法来实现和验证当前​​登录用户的 flex 像对服务器的 Ajax 请求？

**编辑 - 问题解决了。谢谢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T01:11:03.967

我用这段代码找到了我的问题的答案：

```
private function completeHandler(evt:Event):void {

 var username:String = evt.target.data.username;
 var email:String = evt.target.data.email;

 trace ('username is ' + username);

 trace ('email is ' + email);

}

var request:URLRequest = new URLRequest();
var data:URLVariables = new URLVariables();
var loader:URLLoader = new URLLoader();

request.url = "http://example.com/page.php";
request.method = URLRequestMethod.POST;

data.ACTION = "VIDEO"
request.data = data;

loader.dataFormat = URLLoaderDataFormat.VARIABLES;
loader.addEventListener(Event.COMPLETE, completeHandler);
loader.load(request); 
```

# jquery - 如何使用 jquery 在水平导航菜单上滑动这些按钮？

> ID：10263677
> 
> 赞同：2
> 
> 时间：2012-04-21T22:42:39.177
> 
> 标签：jquery

![在此处输入图像描述](../Images/e46e89ee2f9c14e22e08e88b0a503bfe.png)

我有这个带有 ul li 结构的菜单。它在溢出中有隐藏按钮：隐藏；我希望能够通过隐藏的内容使用下一个上一个按钮滑动。但是由于按钮的大小不同，我想不出一种安全的方法来解决这个问题。

任何帮助表示赞赏。

一些指向 jquery 插件的指针。

谢谢。

html 在这里：http: [//jsfiddle.net/utKqe/2/](http://jsfiddle.net/utKqe/2/)

我设法得到了理想的效果（但仍然不能让它停止无穷大）：

```
 //other category page, navigate through cats
$(document).ready(function() {

    $('#otherleftarrow').click(function() {
        $('#othermenu ul').animate({marginLeft: '-=100px'}, 200);
        return false; // prevent default click action from happening!
    });

    $('#otherrighttarrow').click(function() {
        $('#othermenu ul').animate({marginLeft: '+=100px'}, 200);
        return false;
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T22:47:13.000

保留一个包含每个 li 元素的 offsetX 的列表，并始终记住您所在的当前偏移量（最初为 0）。当你按下“next”时，你将整个 ul 结构滑到 -offsetXArray[nextElement]，类似地，当你按下“prev”时，你将它滑到 -offsetXArray[prevElement]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T22:48:09.443

jQuery 让您访问计算的（如实际显示的）元素的宽度，因此您可以使用它来更改导航 ul 的左侧偏移量，从而显示先前隐藏的按钮。

我会尽快获得文档的链接。

编辑：它是`width()`：[http ://api.jquery.com/width/](http://api.jquery.com/width/)

编辑：也许这可以让您了解如何使用它：

```
$('#otherleftarrow').click(function() {
    var menu = $('#othermenu ul');
    menu.css(
        'marginLeft', 
        (menu.offset().left + $('.catotherselected').parent().prev().width()) + 'px'
    );
}); 
```

防止无限滚动：添加`if`s 以测试 menu.offset>=0（右箭头）。对于左箭头，您需要针对 menu.offset < 0-(menu.width - [可见位的宽度，应为 #othermenu - 箭头宽度]) 进行测试

# python - 从“mysite.app”中的 INSTALLED_APPS 中删除 mysite 前缀可以防止双重导入，为什么？

> ID：10263686
> 
> 赞同：4
> 
> 时间：2012-04-21T22:43:50.793
> 
> 标签：python, django

我遇到了`post_save`无缘无故被调用两次的问题。现在看来，原因是这里描述的双重导入：[为什么在保存 Django 模型期间 post_save 被提升两次？](https://stackoverflow.com/questions/2345400/why-is-post-save-being-raised-twice-during-the-save-of-a-django-model)接受答案建议删除其中有效的`mysite`部分`mysite.foo`，但为什么要进行双重导入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T04:14:07.463

[该问题](https://code.djangoproject.com/ticket/3951)是由在 Python 中混合导入路径引起的。以下面的结构 w/ `proj`findable in`sys.path`为例。

```
proj/
   __init__.py
   app/
       __init__.py
       foo.py

# In proj directory, enter Python shell
>>> import sys

>>> before = set(sys.modules)
>>> import app.foo
>>> set(sys.modules) - before
set(['app', 'app.foo'])

>>> before = set(sys.modules)
>>> from proj.app import foo
>>> set(sys.modules) - before
set(['proj.app.foo', 'proj', 'proj.app']) 
```

Python 实际上将`proj.app.foo`和`app.foo`视为不同的模块。您可以找到它`app/__init__.py`并`app/foo.py`导入两次，因此其中的任何内容实际上都会执行两次。为了解决这个问题，我们应该使用一致的导入路径：从`proj`级别或从`../proj`级别。在您发布的链接中，只要项目或 Django 文件中`'mysite.blog'`没有*其他*导入就可以了。`import blog`

在 Django 1.4 中，该问题主要通过[将 manage.py 一个目录从项目目录向上移动到其不再是包的父目录来解决，从而将导入限制为`proj`level](https://docs.djangoproject.com/en/dev/releases/1.4/#updated-default-project-layout-and-manage-py)。

您也可以[通过使用来防止重复信号`dispatch_uid`](https://docs.djangoproject.com/en/dev/topics/signals/#preventing-duplicate-signals)

# xna - 使对象看起来在屏幕上随机移动

> ID：10263687
> 
> 赞同：0
> 
> 时间：2012-04-21T22:43:51.933
> 
> 标签：xna

我目前正在做一个任务，其中一个要求是随机对象出现在屏幕上并移动。作为 XNA 的新手，我什至不知道从哪里开始在游戏中实施此类行为，因此如果有人能帮我推动正确的方向，我将不胜感激。

我只是真的习惯于在按下键时调用某些东西，但是对于完全随机的东西，这是无法做到的。据我所知。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T00:07:16.180

您需要首先为 UFO 创建和设置精灵。在受保护的覆盖无效更新（GameTime gameTime）代码中，您只需要获取当前时间并将其与您希望应用的规则进行比较。如果您想绘制和“移动”精灵，请更新。这是一个例子：

```
#region Using Statements
using System;
using System.Collections.Generic;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Storage;
#endregion
 public class Game : Microsoft.Xna.Framework.Game {
        #region Game Settings
        GraphicsDeviceManager graphics;
        SpriteBatch spriteBatch;
        GraphicsDevice device;
        int screenWidth         = 800;
        int screenHeight        = 600;
        bool fullscreen         = false;
        string title            = "MyGame";
        string origionaltitle;
        float frames            = 0;
        float framesPerSecond   = 0;
        int startTime;
        int currentTime;
        int nextTime;
        #endregion
        struct sprite {

            public string TextureName;
            public Texture2D Texture;
            public Vector2 Position;
            public Vector2 Speed;
            public Color[] TextureData;
        };
        bool DrawUFO = false;
        sprite ufo = new sprite();
        public Game() {
            graphics = new GraphicsDeviceManager(this);
            Content.RootDirectory = "Content";
        }
        protected override void LoadContent() {
            // Create a new SpriteBatch, which can be used to draw textures.
            spriteBatch = new SpriteBatch(GraphicsDevice);
            device = graphics.GraphicsDevice;
            // TODO: use this.Content to load your game content here
            ufo.TextureName = "ufo";
            ufo.Texture = Content.Load<Texture2D>(ball.TextureName);
            ufo.TextureData = new Color[ufo.Texture.Width *ufo.Texture.Height];
            ufo.Texture.GetData(ball.TextureData); 
        }
         protected override void Initialize() {
            // TODO: Add your initialization logic here
            ufo.Position = new Vector2(10f, 10.0f);
            ufo.Speed = new Vector2(0.0f, 10.0f);
            //
            // Set up game window
            graphics.PreferredBackBufferWidth = screenWidth;
            graphics.PreferredBackBufferHeight = screenHeight;
            graphics.IsFullScreen = fullscreen;
            graphics.ApplyChanges();
            origionaltitle = title;
            Window.Title = title;
            //
            // Set the initial time
            startTime = DateTime.Now.Second;
            //
            // Set "random"/next time for ufo to be rendered
            nextTime = startTime + rand.Next(2);
            //
            base.Initialize();
        }
        protected override void Update(GameTime gameTime) {
            //
            // Set the current time
            currentTime = DateTime.Now.Second;
            //
            // if not drawing ufo then
            if(!DrawURO) {
                // 
                // check current time and compare it with the next time
                if( currentTime == nextTime ) {
                    DrawURO = true;
                }
            } else {
                //
                // Update UFO position (aka move it)
                ufo.Posistion += ball.Speed *(float)gameTime.ElapsedGameTime.TotalSeconds;
                //
                // if ufo goes of the screen then
                if(ufo.Position.Y > screenHeight) {
                    //
                    // Reset ufo
                    DrawURO = false;
                    ufo.Position.X = 10.0f;
                    ufo.Position.Y = 10.0f;
                    //
                    // set next time to render
                    nextTime = currentTime + rand.Next(2);
                }

            }
        }
        protected override void Draw(GameTime gameTime) {
            graphics.GraphicsDevice.Clear(Color.Black);
            // TODO: Add your drawing code here
            spriteBatch.Begin(SpriteBlendMode.AlphaBlend);
            if(DrawUFO == true) {
                spriteBatch.Draw(ufo.Texture, ufo.Position, Color.White);
            }
            spriteBatch.End();
            //
            base.Draw(gameTime);
        }
 } 
```

我从几年前在大学做的一些代码中复制了这个，所以对任何错误表示歉意。

# java - mstor 读取 mbox 文件，但返回 null

> ID：10263692
> 
> 赞同：0
> 
> 时间：2012-04-21T22:44:50.853
> 
> 标签：java, mstor

使用带 Windows 的 mstor，我能够连接到 mbox 商店（感谢 SO）。看来我可以阅读消息指针；我知道这一点，因为每当我遍历存储时，它都会遍历正确数量的消息。问题是没有标题和内容正在加载！任何想法？

是的，我在类路径中有 JavaMail 的东西（这些天它在 mstor 的库中）。我什至在 mstor 的一个示例文件 (imagined.mbox) 上使用它。

提前致谢。

我的代码：

```
public static void main(String[] args) throws Exception {

  Properties props = new Properties();
  props.setProperty("mstor.mbox.metadataStrategy", "xml");
  Session session1 = Session.getDefaultInstance(props);

  Session session = Session.getDefaultInstance(new Properties());

  Store store = session.getStore(new URLName("mstor:C:/tmp/imagined.mbox"));
  store.connect();

  System.out.println(store.isConnected());

  Folder inbox = store.getDefaultFolder();  // no subfolder here; even if there is an Inbox, I get the same thing...
  inbox.open(Folder.READ_ONLY);

  Message[] messages = inbox.getMessages();
  for (Message m : messages) {
    System.out.println(m.getSubject());
  } 
```

}

我的典型结果：

```
true (i.e., yes, I'm connected...)
null
null
null
null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T21:29:05.533

我看到这是一个月大的，但我遇到了同样的问题。尝试添加`m.saveChanges()`为 for 循环的第一行。这会强制 mstor 创建消息头的缓存。

从逻辑上讲，您上面的代码是正确的。很奇怪，我们必须添加这一行，但它是解决我们问题的一种功能性解决方法。

如果您已经找到其他解决方案，请不要忘记分享。仅仅因为没有人有答案并不意味着没有人有同样的问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-28T17:04:23.020

创建`Properties`被调用的实例后`properties`，使用以下命令禁用缓存：

```
properties.setProperty("mstor.mbox.metadataStrategy", "none"); 
```

如果你这样做并再试一次，你应该会发现你可以调用主题、从、到等的访问器方法，而无需求助于`m.saveChanges()`黑客。

# objective-c - 如何将 iOS“打开方式...”功能添加到应用程序

> ID：10263693
> 
> 赞同：1
> 
> 时间：2012-04-21T22:44:52.220
> 
> 标签：objective-c, ios

我想知道如何从我的应用程序中呈现“打开方式...”操作表（iPhone）/弹出框（iPad），最好是 IBAction

我希望它类似于声明文件类型然后创建视图并打开用户选择的应用程序，但我知道它更复杂。

我意识到在 StackOverflow 上提出了类似的问题，但我无法理解被接受的答案：[How to use "open in..." feature to iOS app?](https://stackoverflow.com/questions/9513783/how-to-use-open-in-feature-to-ios-app) ，并且我找到了一些关于文档交互编程的 Apple 文档。但是，我真的无法理解这些。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-21T23:06:18.723

`UIDocumentInteractionController`使用类方法创建一个`interactionControllerWithURL:`（传递您要在另一个应用程序中打开的文件的 URL）。

然后调用`presentOpenInMenuFromRect:inView:animated:`或`presentOpenInMenuFromBarButtonItem:animated:`。控制器负责向弹出窗口显示该文件类型的可用应用程序并打开选定的应用程序。

如果您想知道菜单何时关闭以及选择了哪个应用程序，则需要实现该`UIDocumentInteractionControllerDelegate`协议。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-08T23:12:56.347

**[omz](https://stackoverflow.com/a/10263836/814730)**在他的回答中对如何做到这一点提出了一些要点，但是随着 iOS 6 中新 API 的引入，此过程要容易得多。这是在 iOS 6 及更高版本中显示 UIActionSheet Open-In-Menu 的简单有效方法：

```
NSArray *dataToShare = @[contentData];  //Or whatever data you want to share - does not need to be an NSArray
UIActivityViewController *activityViewController = [[UIActivityViewController alloc] initWithActivityItems:dataToShare applicationActivities:nil];
[self presentViewController:activityViewController animated:YES completion:nil]; 
```

此外，如果您的应用与低于 6.0 的 iOS 版本兼容，您可能需要检查共享服务是否存在：

```
if ([UIActivityViewController class]) 
```

提交表格后，iOS 将自动为您处理其余部分。它将显示一个漂亮的[uiactionsheet](/questions/tagged/uiactionsheet "显示标记为“uiactionsheet”的问题")图标，显示用户可以打开/共享您的数据的每个应用程序或服务：

![iOS 6 共享表](../Images/7c73feee549c009633ac4bf3c93f44bc.png)

注意，根据数据的内容，iOS 会在 Share Sheet 中显示不同的服务

编辑：上面的方法共享文件**内容**，但不共享文件本身。有关更多信息，请参阅**[omz](https://stackoverflow.com/a/10263836/814730)**的答案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T23:03:19.967

我个人从来没有这样做过，但您的答案肯定可以在此 Apple 文档中找到：http: [//developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/PreviewingandOpeningItems。 html#//apple_ref/doc/uid/TP40010410-SW1](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/PreviewingandOpeningItems.html#//apple_ref/doc/uid/TP40010410-SW1)。

# jquery - jquery id vs. class麻烦

> ID：10263695
> 
> 赞同：1
> 
> 时间：2012-04-21T22:45:13.053
> 
> 标签：jquery, class

现在我有一堆图像存储在一个数组中。我希望这些图像具有“left_slot”、“middle_slot”和“right_slot”的 ID。以下代码可以为它们提供这些类名而不是 id：

```
 function popArr() {
        $("#thumb_slider").children().each(function (index, element) {
            var newImg = $("<img />").attr({
                src: this.src,
                alt: 'space'
            }).addClass(index == 0 ? "left_slot" : (index == 1 ? "middle_slot" : "right_slot"));
            imgArr.push(newImg);
        });
        return imgArr;
    } 
```

我的问题是，我将如何更改此函数以根据它们的索引而不是类为它们提供 id？我认为这些类与我在页面其他地方的其他一些代码部分混淆了。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T22:49:44.420

使用 attr 而不是 addClass：

```
function popArr() {
    $("#thumb_slider").children().each(function (index, element) {
        var newImg = $("<img />").attr({
            src: this.src,
            alt: 'space',
            id: index == 0 ? "left_slot" : (index == 1 ? "middle_slot" : "right_slot")
        })
        imgArr.push(newImg);
    });
    return imgArr;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T22:48:13.613

看看[这个](https://stackoverflow.com/questions/2176986/jquery-add-id-instead-of-class)。所以使用“id”属性而不是 addClass 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T22:48:25.940

而不是`.addClass()`，使用`.prop( "id", ..... )`

# iphone - iphone控制PIC单片机

> ID：10263706
> 
> 赞同：3
> 
> 时间：2012-04-21T22:46:08.680
> 
> 标签：iphone, ios, tcp, pic

我有兴趣编写一个应用程序，通过 IP（使用 3g，不一定在与接收端相同的 WiFi 网络上）向连接到路由器（通过以太网或 wifi）的 PI​​C 微控制器发送消息

我看到了一些关于如何在同一个网络上发送消息的描述和示例，不确定是否只是通过提供不同的 IP 它可以在它自己的网络之外工作。我想知道PIC如何接收它（仍然没有决定哪个PIC，取决于执行此操作的可能性），反过来，取决于收到的消息，PIC将执行一个动作，例如，点亮一个LED 阵列中的某些 LED。

我有发送端（通过 IP 发送的应用程序）和接收端（点亮 LED 的 PIC）我只是不太确定要发送什么，或者这种“翻译”是否可能。

我已经在网上搜索过，但除了制造的套件（例如用于遥控车）之外找不到任何这样的东西。谢谢。卡梅尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T00:32:19.370

好吧，如果 PIC 可以运行 TCP 服务器，或者可能只是 UDP，那么确保您可以通过发送适当的消息来控制 LED。通过适当的静态 IP 地址和路由，您可以使用 iPhone 从任何可以连接的地方打开 LED。

PIC 并不以具有高性能和大量 RAM 而闻名。如果您确实设法让服务器正常工作，请尽量不要使用 XML/SOAP

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T09:35:57.203

这看起来更像是[http://electronics.stackexchange.com](http://electronics.stackexchange.com)的问题。

如果您熟悉 SPI，您可以考虑 Microchip 的[MRF24WB0MA/RM](http://ww1.microchip.com/downloads/en/DeviceDoc/70632A.pdf)模块，该模块使 PIC 能够连接到无线网络（连接到无线基础设施或 AdHoc，或者它可以创建自己的 AdHoc）。

如果您使用的是 MCC 编译器，那么您还可以在[Microchip 应用程序库中为该模块提供库](http://www.microchip.com/stellent/idcplg?IdcService=SS_GET_PAGE&nodeId=2680&dDocName=en547784)。

TCP 堆栈虽然占用了一些内存空间。PIC18F 可以，但您最好使用 PIC24F（它们往往比 18F 便宜）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T14:20:16.590

这是我为 Mac/iOS 构建的 UDP 库，用简单的 Cocoa 封装，可将 UDP 数据包发送到您选择的 IP 地址。附带示例服务器客户端应用程序。

这是通用的 UDP 数据包，因此您只需在另一端（无论该平台是什么）收听它们并读取内容。如果您需要帮助，请告诉我

[https://github.com/Shein/Mac-UDP-Client-Server](https://github.com/Shein/Mac-UDP-Client-Server)

# web-services - 如何添加 标签？WSDL 未与这些信息一起出现

> ID：10263708
> 
> 赞同：3
> 
> 时间：2012-04-21T22:46:38.500
> 
> 标签：web-services, c#-4.0, ws-security, soapheader, web-reference

我需要在我的消息中添加如下内容：

```
 <soap:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" soap:mustUnderstand="1">
      <wsse:UsernameToken xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="unt_Z1k4LnxEmBzzKuPP">
        <wsse:Username>user</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">password</wsse:Password>
        <wsse:Nonce EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary">iNs+LF1iwwPU2AMer8uU6NKY9tfzgYqMTaP3mIEgoK0=</wsse:Nonce>
        <wsu:Created>2012-04-22T11:57:30Z</wsu:Created>
      </wsse:UsernameToken>
      <wsu:Timestamp xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
        <wsu:Created>2012-04-22T11:57:30Z</wsu:Created>
        <wsu:Expires>2012-04-22T11:58:30Z</wsu:Expires>
      </wsu:Timestamp>
    </wsse:Security>
  </soap:Header> 
```

我正在调用一个返回 500 错误响应的 Web 服务，这基本上意味着它无法进行身份验证我猜是因为我从消息中丢失了这些信息，即使我在消息上有一个身份验证标头。这会发生吗？

如何在消息中添加 WS-Security 标头并在代码中添加所有这些信息？我在 Visual Studio 中使用 Add Web Reference 添加了该服务。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:25:32.647

最优雅的解决方案是一个过时的解决方案，涉及制作我用来从 .NET 3.5 调用到 .NET 2.0 的类库、安装 WSE 3.0、侵入一些 VS 配置文件以使加载项工作并启用类库项目作为启用 WSE 的项目。

Update Web Reference 制作了两个代理类（例如 Myservice 和 MyServiceWse）。一个继承自 SoapHttpClient，这是 WCF 代理生成的默认设置，最新继承自 WebServicesClientProtocol。

最新的是您需要使用 WS-Security 标头调用旧的 ASMX Web 服务。

剩下的就这么简单：

```
MyServiceWse client = new MyServiceWse();

        UsernameToken token = new UsernameToken(userName, password, PasswordOption.SendPlainText); // or what service specs rquired, other than plaintext.

        client.RequestSoapContext.Security.Tokens.Add(token);
        client.RequestSoapContext.Security.Timestamp.TtlInSeconds = 60;

        client.YourMethod(); 
```

对于 VS 2005 之后不包含 Microsoft 的过时 API 来说非常简单，您需要在序列化之前、序列化之后、使用扩展和其他东西之前使用 Stream 和字符串操作来捕获消息……

如果您对此有解决方案，使用 Add Reference 而不是旧的 Add Web Reference 和 WSE 使用 WS-Security 标头、UsernameToken、TimeStamp Created、Expired 等进行简单调用。

请告诉我。

PS找到这个问题的解决方案并通过一些有用的链接回答。

[在 C# 中使用具有标头安全性的非 asmx SOAP 1.1 Web 服务](https://stackoverflow.com/questions/7606380/consuming-non-asmx-soap-1-1-web-service-in-c-sharp-with-header-security)

# c# - Azure 存储模拟器突然停止工作

> ID：10263709
> 
> 赞同：0
> 
> 时间：2012-04-21T22:46:39.150
> 
> 标签：c#, windows, azure, azure-storage

几个月来，我一直在使用 Azure 存储模拟器。但是我今天尝试启动它，它一直在崩溃。它告诉我运行一个名为 DSInit.exe 的 exe。这应该初始化存储模拟器，但它失败了。我收到以下消息

“无法创建数据库‘DevelopmentStorageDb20110816’：在建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。找不到服务器或无法访问服务器。验证实例名称是否正确并且 SQL Server 配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定实例）

一项或多项初始化操作失败。在尝试再次运行存储模拟器之前解决这些错误。如果 SQL Server 是由当前用户以外的其他人安装的，则可能会出现这些错误。有关详细信息，请参阅[http://go.microsoft.com/fwlink/?LinkID=205140 。”](http://go.microsoft.com/fwlink/?LinkID=205140)

有没有人遇到过这种情况。我无法弄清楚为什么它不会突然工作。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T04:29:31.020

奇怪，听起来模拟器失去了与 SQL 实例对话的能力，也许你可以再次运行 DSInit 来初始化本地 SQL Server 上的另一个实例？

[http://kristofmattei.be/2010/01/28/windows-azure-sdk-connecting-to-non-sqlexpress-instance/](http://kristofmattei.be/2010/01/28/windows-azure-sdk-connecting-to-non-sqlexpress-instance/)

在过去的几个月里，您的开发机器使用 SQL Server 或 Azure SDK 是否发生了一些变化？您正在运行什么版本的 SDK？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T09:30:46.687

StevenR 和 Kenneth 是正确的。请检查 SQL Server 实例上是否发生了某些变化。即使我们没有对 SQL Server 做任何事情，如果我们可以检查它会更好，例如，可能 SQL Server 实例已经崩溃，需要重新启动。

此致，

明旭。

# actionscript-3 - 基于打包器的资产嵌入

> ID：10263710
> 
> 赞同：0
> 
> 时间：2012-04-21T22:46:48.027
> 
> 标签：actionscript-3, air, compilation, assets

情况如下。目前我正在开发一个包含大量位图资源的 AIR 游戏。我想针对几款平板电脑（iPad、Xoom 等），因此，我正在考虑在不同的 ppi 中完成资产，以便在设备之间获得更多的视觉一致性。我不太关心分辨率，因为我会使用滚动显示不适合屏幕的资产；但是无论使用何种设备，单位、建筑物、敌人看起来都应该差不多。

问题是：

*   这可以做到吗？如何（基于打包器？）
*   这样做的最好方法是什么
*   我应该打扰吗？

到目前为止，我想到的唯一想法是为每个目标设备（实际上是 ppi）创建一个应用程序文件，该文件会拉出一个对应于设备 ppi 的大位图注册表。对于所有这些应用程序，静态注册表类本质上是相同的，不同之处仅在于`[Embed]`指向的文件名（显然还有类名）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T03:05:32.117

如果您想为每种设备类型提供特定的资产集，我认为您走在正确的轨道上。我过去这样做的方式是使用`rake`脚本，但任何你符合的`make`-like/ -like 实用程序都可以。`ant`本质上，在项目编译之前运行的任务之一是挖掘文件结构并以编程方式构建这些帮助类；它有助于避免手工构建这些映射的单调性。一旦您获得了一组重要的资产，这可能会让人感到麻木。

在我的项目中，我会有这样的结构：

```
/ProjectRoot
    /src

    /imgs
        /132dpi
            /unit1.jpg
            /unit2.jpg
            .
        /160dpi
            /unit1.jpg
            /unit2.jpg
            .
        /264dpi
            /unit1.jpg
            /unit2.jpg
            .
        /326dpi
            /unit1.jpg
            /unit2.jpg
            . 
```

我通常会有一些我的所有资产都会遵守的界面，比如

```
public interface IAssetSet {
     function get DPI():uint;
     function get Unit1():BitmapData;
     function get Unit2():BitmapData;
} 
```

该脚本将运行抓取文件夹/文件并在文件夹中生成 actionscript 类，如`/src/assets`. 像这样的东西

```
public class AssetSet132dpi implements IAssetSet {

    public function get DPI():uint { return 132; }

    [Embed("img/132dpi/unit1.jpg")]
    private var _unit1Class:Class;
    private var _unit1:BitmapData;
    public function get Unit1():BitmapData { return _unit1; }

    [Embed("img/132dpi/unit2.jpg")]
    private var _unit2Class:Class;
    private var _unit2:BitmapData;
    public function get Unit2():BitmapData { return _unit2; }

    ...

    public function AssetSet132dpi() {
        _unit1 = BitmapData(new _unit1Class()).bitmapData;
        _unit2 = BitmapData(new _unit2Class()).bitmapData;
        ....
    } 
} 
```

在您的初始化代码中，您确定您正在运行的设备，或者您只为特定设备预编译，并实例化您想要的 dpi。在代码中的其他任何地方，您只需传递对 IAssetSet 的引用，然后根据 IAssetSet.DPI 确定要做什么。

这是一种方法，但还有其他方法。

另一种方法是以最高 DPI 存储嵌入源图像，然后在应用程序加载时，将它们在内存中缩小到所需的 DPI 和`dispose()`原始图像。

另一种方法，现在使用 Stage3D 和 Starling 和 nd2d 等框架更可行，您可以让 GPU（非常擅长进行这种缩放）完成传统合成真正可行的大部分繁重工作.

我认为，如果您使用的是传统合成，那么您可能会使用专门针对您需要的资产进行一些性能提升，而不是一直尝试动态调整它们的大小。Flash 有时会有点奇怪，因为它会在奇怪的时间重新生成这些资产的内部表示并降低性能。可能最好的方法是利用 Stage3D/Starling/nd3d，但是如果您构建了一个非平凡的代码库，那么在游戏的这个阶段切换渲染引擎可能是一项不平凡的任务......

至少，那是我的两分钱。也许其他人有不同的经历。

# c# - 数据成员密码没有散列？

> ID：10263714
> 
> 赞同：3
> 
> 时间：2012-04-21T22:47:21.473
> 
> 标签：c#, wcf, linq, web-services, hash

我正在尝试在我的数据合同中对我的数据成员密码进行散列/加盐，但是当我添加一个新学生然后获取该学生集合时，密码字段尚未经过散列/加盐，它会在我输入的内容中返回？

```
 public void AddStudent(Student student)
    {

        student.StudentID = (++eCount).ToString();
        byte[] passwordHash = Hash(student.Password, GenerateSalt());

        student.TimeAdded = DateTime.Now;
        students.Add(student);
    } 
```

任何人都可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T22:51:47.793

您应该将散列密码分配给学生密码，然后添加学生。

```
public void AddStudent(Student student)
{
    student.StudentID = (++eCount).ToString();
    byte[] passwordHash = Hash(student.Password, GenerateSalt());

    StringBuilder stringBuilder = new StringBuilder();

    foreach(byte b in passwordHash){
        stringBuilder.AppendFormat("{0:X2}", b);
    }

    student.TimeAdded = DateTime.Now;
    student.Password= stringBuilder.ToString();;
    students.Add(student);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T22:55:40.817

您可以简单地将其添加到您的[原始问题](https://stackoverflow.com/questions/10263464/wcf-rest-hash-salt-datamember-field/10263563#10263563)中，但这里有更多代码：

```
[DataContract(Name="Student")]
public class Student
{
    [DataMember(Name = "StudentID")]
    public string StudentID { get; set; }
    [DataMember(Name = "FirstName")]
    public string FirstName { get; set; }
    [DataMember(Name = "LastName")]
    public string LastName { get; set; }
    // local non public cache
    private byte[] _password;
    [DataMember(Name = "Password")]
    public byte[] Password {
        get { return _password; }
        set {
            this.Salt = GenerateSalt();
            this._password = Hash(value, this.Salt);
        }
    };
    [DataMember(Name = "Salt")]
    public byte[] Salt;

    // ... 
```

# vb.net - 我需要帮助将伪代码中的想法转化为 vb.net 代码

> ID：10263715
> 
> 赞同：0
> 
> 时间：2012-04-21T22:47:54.613
> 
> 标签：vb.net, webbrowser-control, pseudocode, vb.net-2010

我正在尝试使用 webbrowser 控件与网页交互，我需要与一个特定的元素进行交互，但是对于我的生活我不能，尝试通过 id、href、src、元素图像、电影和地狱甚至 bgcolor 但无济于事。所以后来我想到了这个想法，我把它构造成一种伪代码，现在需要帮助在代码中实现它。

*   创建变量类型点。
*   将点设置为我在浏览器中单击的位置（有点像 getelementfrompoint，但我无法让它工作）
*   msgbox = 指向字符串
*   将html元素设置为指向
*   调用 html 元素（“点击”）`

有人可以帮我吗？编辑：感谢您的回答，但是如前所述，我尝试通过元素 id 调用，但是有几个 id 标签，我不知道哪一个是正确的（我对 HTML 的了解有限）但是我尝试了所有我可以找到相关对象的属性，但没有一个有效，这里是对象的 HTML

```
 <div id="button">
            <script type="text/javascript">                                         function disableButton() {                          btn = document.getElementById('sbutton');                           btn.style.display = 'none';                         btn_clicked = document.getElementById('sbutton_clicked');                           btn.style.display = 'block';                        }                                       </script>
                <div id="sbutton" style="z-index:1">                        
                <script language="javascript">
                        AC_FL_RunContent(
                            'codebase', 'http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0',
                            'width', '373',
                            'height', '373',
                            'src', '/images/buttons/',
                            'quality', 'high',
                            'pluginspage', 'http://www.macromedia.com/go/getflashplayer',
                            'align', 'middle',
                            'play', 'false',
                            'loop', 'true',
                            'scale', 'showall',
                            'wmode', 'transparent',
                            'devicefont', 'false',
                            'id', '',
                            'bgcolor', '#ddeef6',
                            'name', '',
                            'menu', 'true',
                            'allowFullScreen', 'false',
                            'allowScriptAccess','sameDomain',
                            'movie', '/images/buttons/button_2',
                            'salign', ''
); //end AC code
                    </script><embed style="z-index:1;position:relative" width="373" height="373" src="/images/buttons/button_2.swf" quality="high" pluginspage="http://www.macromedia.com/go/getflashplayer" align="middle" play="false" loop="true" scale="showall" wmode="transparent" devicefont="false" bgcolor="#ddeef6" name="" menu="true" allowfullscreen="false" allowscriptaccess="sameDomain" salign="" type="application/x-shockwave-flash">
                    <noscript>
                        &lt;object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="373" height="373" id="" align="middle" style="z-index:1"&gt;
                            &lt;param name="allowScriptAccess" value="sameDomain" /&gt;
                            &lt;param name="allowFullScreen" value="false" /&gt;
                            &lt;param name="movie" value="/images/buttons/button_2.swf" /&gt;&lt;param name="quality" value="high"    /&gt;&lt;param name="bgcolor" value="#ddeef6" /&gt;   &lt;embed src="/images/buttons/.swf" quality="high" bgcolor="#ddeef6" width="373" height="373" name="" align="middle" allowScriptAccess="sameDomain" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" /&gt;
&lt;!-- no_flash content --&gt;
                            &lt;a href="/button/push_the_button" data-method="post" onmousedown="disableButton();return false;" rel="nofollow"&gt;&lt;img alt="sbutton" src="/images/sb/sbutton.jpg?1331667296" /&gt;&lt;/a&gt;
                            &lt;!-- end no_flash content --&gt;
                        &lt;/object&gt;
                    </noscript>
                </div>
                <div id="sbutton_clicked" style="display:none">
                    <img alt="sbutton" src="/images/sb/sbutton.jpg?1331667296">
                </div>
        </div> 
```

我已经尝试过调用 .swf 的按钮 sbutton （我确实玩过，但我认为我没有点击所以我现在就去尝试）也尝试过 sbutton_clicked 等无法找到一个可以激活它的按钮。我现在完全迷路了，只是吐口水。任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T00:30:38.503

欢迎来到 Stackoverflow。*请注意，这个问题过于宽泛。请先阅读[http://https:](http://https://stackoverflow.com/FAQ) //stackoverflow.com/FAQ、http : [//whathaveyoutried.com](http://whathaveyoutried.com)和[https://meta.stackexchange.com/questions/128548/what-stack-overflow-is-not](https://meta.stackexchange.com/questions/128548/what-stack-overflow-is-not)发布您的下一个问题，谢谢。*

1,2 & 3)

[http://homepage.ntlworld.com/kayseycarvey/jss3p2.html](http://homepage.ntlworld.com/kayseycarvey/jss3p2.html)

```
<HEAD>
<TITLE>XY Coordinates</TITLE>

<SCRIPT Language = javascript>

function XYpos() {
xPos = event.screenX
yPos = event.screenY
alert(xPos + " left " + yPos + " down")
}

</Script>

</HEAD>

<BODY onMouseDown = XYpos()> 
```

或者试试这个例子：[http ://www.brenz.net/snippets/xy.asp](http://www.brenz.net/snippets/xy.asp)

4) [https://www.google.com.au/search?q=set+html+element+to+point](https://www.google.com.au/search?q=set+html+element+to+point)

5) 您可以通过 Javascript 或 VB.Net 调用点击：

```
Private Function ClickSubmitButton()
    Dim theButton As HtmlElement

    Try

        ' Link the ID from the web form to the Button var
        theButton = webbrowser1.Document.GetElementById("htmlElementId")

        ' Now do the actual click.
        theButton.InvokeMember("click")
        Return True

    Catch ex As Exception

        Return False

    End Try

End Function 
```

如果您想在 VB.Net 代码而不是 javascript 中更多地控制这一点（如第 5 点所示），您可以尝试以下技术：[如何在网页中打开 Windows 窗体控件？](https://stackoverflow.com/questions/9157352/how-to-open-windows-form-control-in-a-web-page/9170914#9170914)

# java - CellEditorListener 不会检测单元格何时被编辑

> ID：10263717
> 
> 赞同：5
> 
> 时间：2012-04-21T22:48:03.130
> 
> 标签：java, swing, jtable

我正在开展我的 CapStone 项目，以便本学期毕业，并且在我正在从事的项目中遇到了一些问题。该代码适用于 Serendipity Booksellers Program。我要为一家虚构的书店设计一个销售点系统。

目前，当用户编辑给定行的“数量”单元格时，我试图让“总计”列（第 5 列）更新。“数量”字段还需要验证其单元格中的值不大于库存数量（第 1 列）。

我还阅读了 Java 教程中的[How to Use Tables](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)，昨晚在 Google 上搜索了几个小时，试图找到一些关于如何让 CellEditorListener 工作的有用代码。

我之前也尝试过让 CashierPanel 类实现 CellEditorListener，并通过以下方式注册它：

```
CellEditorListener listener = null;
table.getDefaultEditor(String.class).addCellEditorListener(listener); 
```

这种方法也不起作用。

这是我现在拥有的代码（217 行）：

```
/* Imported Dependencies */

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.math.BigDecimal;
import java.math.RoundingMode;
import java.util.ArrayList;

import javax.swing.DefaultCellEditor;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.event.CellEditorListener;
import javax.swing.event.ChangeEvent;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.TableColumn;

import net.miginfocom.swing.MigLayout;

public class CashierPanel extends JFrame {

    /**
    * Serial Version UID
    */
    private static final long serialVersionUID = 6922826100788686147L;

    /* Private Fields */
    private JPanel searchPanel;
    private JLabel isbn_lbl;
    private JLabel title_lbl;
    private JTextField isbn_tf;
    private JTextField title_tf;
    private JTextField currentCell;
    private BookCollection myCollection;
    private CashierTableModel tableData;

    private CellEditorListener listener;

    /**
    * Constructor
    */
    public CashierPanel() {

        // Set window properties
        setTitle("Testing this table");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(585, 300);
        setLayout(new BorderLayout());

        tableData = new CashierTableModel();
        final JTable table = new JTable(tableData);
        table.setRowHeight(25);
        table.getTableHeader().setReorderingAllowed(false);
        table.setCellSelectionEnabled(true);
        table.putClientProperty("terminateEditOnFocusLost", Boolean.TRUE);
        add(new JScrollPane(table), BorderLayout.CENTER);

        // Define a cell renderer to render text to center of cell
        DefaultTableCellRenderer centerRenderer = new DefaultTableCellRenderer();
        centerRenderer.setHorizontalAlignment(JLabel.CENTER);

        // Set column properties
        int[] sizes = new int[] { 50, 50, 87, 275, 50, 50 };
        String[] columnNames = new String[] { "Qty", "Stock", "ISBN", "Title",
                "Price", "Total" };
        TableColumn[] column = new TableColumn[columnNames.length];
        for (byte i = 0; i < columnNames.length; i++) {
            column[i] = table.getColumnModel().getColumn(i);
            column[i].setMinWidth(sizes[i]);
            column[i].setHeaderValue(columnNames[i]);
            if (i != 3) {
                column[i].setMaxWidth(sizes[i]);
                column[i].setCellRenderer(centerRenderer);
            }
        }

        /* Make the quantity field only display digits */
        currentCell = new JTextField();
        column[0].setCellEditor(new DefaultCellEditor(currentCell));
        // Add a key listener to the current cell
        currentCell.addKeyListener(new KeyAdapter() {
            public void keyTyped(KeyEvent e) {
                // if the key typed is not a digit or backspace
                if (!Character.isDigit(e.getKeyChar())
                        && e.getKeyChar() != KeyEvent.VK_BACK_SPACE) {
                    currentCell.setEditable(false);
                    currentCell.setBackground(Color.WHITE);
                } else {
                    currentCell.setEditable(true);
                }
            }
        });

        /* Search panel */
        searchPanel = new JPanel();
        myCollection = new BookCollection();

        isbn_lbl = new JLabel("Search by ISBN:");
        isbn_tf = new JTextField();
        isbn_tf.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent event) {
                ArrayList<BookData> data = myCollection.select(isbn_tf.getText(), BookCollection.FIELD_ISBN);
                tableData.addNewRow();
                table.setValueAt((new BigDecimal("1").toString()), tableData.getRowCount() - 1, 0);
                table.setValueAt(Integer.toString(data.get(0).getQtyOnHand()), tableData.getRowCount() - 1, 1);
                table.setValueAt(data.get(0).getIsbn(),tableData.getRowCount() - 1, 2);
                table.setValueAt(data.get(0).getTitle(),tableData.getRowCount() - 1, 3);
                table.setValueAt(data.get(0).getRetail().setScale(2, RoundingMode.HALF_UP).toString(), tableData.getRowCount() - 1, 4);
                table.setValueAt(table.getValueAt(tableData.getRowCount() - 1, 4), tableData.getRowCount() - 1, 5);
                isbn_tf.setText("");
            }
        });

        title_lbl = new JLabel("Search by Title:");
        title_tf = new JTextField();
        title_tf.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent event) {
                ArrayList<BookData> data = myCollection.select(title_tf.getText(), BookCollection.FIELD_TITLE);
                tableData.addNewRow();
                table.setValueAt((new BigDecimal("1").toString()), tableData.getRowCount(), 0);
                table.setValueAt(Integer.toString(data.get(0).getQtyOnHand()), tableData.getRowCount() - 1, 1);
                table.setValueAt(data.get(0).getIsbn(), tableData.getRowCount(), 2);
                table.setValueAt(data.get(0).getTitle(), tableData.getRowCount(), 3);
                table.setValueAt(data.get(0).getRetail().setScale(2, RoundingMode.HALF_UP).toString(), tableData.getRowCount(), 4);
                table.setValueAt(data.get(0).getRetail().setScale(2, RoundingMode.HALF_UP).toString(), tableData.getRowCount(), 5);
                title_tf.setText("");
            }
        });

        searchPanel.setLayout(new MigLayout("", "[78px][202px,grow]", "[24px][29px]"));
        searchPanel.add(isbn_lbl, "cell 0 0, alignx left, aligny center");
        searchPanel.add(isbn_tf, "cell 1 0,growx, aligny center");
        searchPanel.add(title_lbl, "cell 0 1, alignx left, aligny center");
        searchPanel.add(title_tf, "cell 1 1, growx, aligny center");

        add(searchPanel, BorderLayout.SOUTH);

    };

    public static void main(String[] args) {
        CashierPanel myCashierPanel = new CashierPanel();
        myCashierPanel.setVisible(true);
    }
}

class CashierTableModel extends AbstractTableModel implements CellEditorListener{

    /**
     * 
     */
    private static final long serialVersionUID = -1500952132717353189L;
    private ArrayList<Object[]> data = new ArrayList<Object[]>();

    public void addNewRow() {
        data.add(new String[] { null, null, null, null, null, null });
        fireTableDataChanged();
    }

    public int getRowCount() {
        return data.size();
    }

    public int getColumnCount() {
        return 6;
    }

    public Object getValueAt(int row, int col) {
        return data.get(row)[col];
    }

    public void setValueAt(Object value, int row, int col) {
        data.get(row)[col] = value;
        fireTableCellUpdated(row, col);
    }

    public boolean isCellEditable(int row, int col) {
        if (col > 0) {
            return false;
        } else {
            return true;
        }
    }

    public void editingCanceled(ChangeEvent e) {
        for (int i = 0; i <= getRowCount() - 1; i++) {
            BigDecimal[] data = new BigDecimal[3];
            data[0] = data[0].add((BigDecimal) getValueAt(i, 1));
            data[1] = data[1].add((BigDecimal) getValueAt(i, 4));
            data[2] = data[2].add(calculateTotal(data[0], data[1]));
            setValueAt(data[2], i, 5);
        }
    }

    public void editingStopped(ChangeEvent e) {
        for (int i = 0; i <= getRowCount() - 1; i++) {
            BigDecimal[] data = new BigDecimal[3];
            data[0] = data[0].add((BigDecimal) getValueAt(i, 1));
            data[1] = data[1].add((BigDecimal) getValueAt(i, 4));
            data[2] = data[2].add(calculateTotal(data[0], data[1]));
            setValueAt(data[2], i, 5);
        }
    }

    public BigDecimal calculateTotal(BigDecimal qty, BigDecimal retail) {
        BigDecimal total = new BigDecimal("0.00");
        total = total.add(qty.multiply(retail));
        return total;
    }
} 
```

由于这是家庭作业，我不想收到我的代码的工作版本，并解决了错误。我只是想要一些关于我做错了什么来让编辑器监听器被实际调用的指导。

如果我可以提供任何其他信息来帮助指导我找到解决方案，请告诉我。

感谢您花时间看这个！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T02:31:36.143

扩展@AKJ 的有用[答案](https://stackoverflow.com/a/10263756/230513)，此[示例](https://stackoverflow.com/a/10067560/230513)讨论了单元格编辑器的正常操作，并且此[示例](https://stackoverflow.com/a/7356518/230513)说明了更新编辑器相关数据的一种方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-21T22:54:54.140

您不应该自己向单元格编辑器添加显式键侦听器并处理这些事件。

默认情况下，基于列类型（如果模型返回单元格为可编辑），jtable 将自动选择适当的编辑器。如果您需要自己的自定义编辑器（用于着色等），那么您还需要将其实现为单元格编辑器，然后将其设置在列模型中。

一旦你在 jtable 中安装了编辑器，每当值被修改（可能在焦点丢失时触发），jtable 将自动调用模型的 setValueAt()。您更新另一个依赖列的所有逻辑都应该属于这里。

# c++ - 架构 x86_64 错误的未定义符号

> ID：10263721
> 
> 赞同：3
> 
> 时间：2012-04-21T22:48:14.550
> 
> 标签：c++, linker

我有这个错误：

```
Undefined symbols for architecture x86_64:
  "my::Queue<int>::Queue()", referenced from:
      _main in ccdwI88X.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

对于此代码“main.cpp”：

```
#include "Queue.hpp"

int main()
{
  my::Queue<int> myqueue;
  return 0;
} 
```

'队列.hpp'：

```
#ifndef QUEUE_HH__
#define QUEUE_HH__

namespace my
{
  template <typename T>
  class Queue
  {
  public:
    Queue();     
  };
}

#endif 
```

和“队列.cpp”：

```
#include "Queue.hpp"

template <typename T>
my::Queue<T>::Queue() 
{
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T23:06:59.527

此处发布的答案：[https](https://stackoverflow.com/a/312402/700926) ://stackoverflow.com/a/312402/700926是我认为您需要的。

如果我将您的`Queue.cpp`文件编辑为此：

```
#include "Queue.hpp"

template <typename T>
my::Queue<T>::Queue() 
{

}

template class my::Queue<int>; 
```

..它编译得很好。

详细解释请参考我最开始提到的网址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T23:27:33.860

使用模板时最简单和最安全的做法是始终将类函数定义（实现）放在`.hpp`文件中，而不是放在单独的`.cpp`文件中。

所有细节也在这里： http: [//www.parashift.com/c++-faq-lite/templates.html#faq-35.12](http://www.parashift.com/c++-faq-lite/templates.html#faq-35.12)

# message-queue - 通过python监听所有新贵的工作和事件

> ID：10263722
> 
> 赞同：2
> 
> 时间：2012-04-21T22:48:16.377
> 
> 标签：message-queue, dbus, upstart

我想通过 Python 监听 Linux 主机（Amazon EC2 Linux AMI）上的所有 Upstart 作业/事件，以便将所有作业/事件桥接到 RabbitMQ 服务器，以便工作主机可以记录它并在某些作业中执行某些操作/事件。

Upstart 的版本是 0.6.5。

我找到了“dbus-python”模块（已经安装在系统中）。但我无法理解。

我怎样才能做到这一点 ？

# android - 谷歌地图上的准确路径

> ID：10263724
> 
> 赞同：1
> 
> 时间：2012-04-21T22:48:28.093
> 
> 标签：android, google-maps

我对谷歌地图有一个复杂的问题。我正在使用 android，我在 2 个特定点之间绘制了一条路径，但问题是路径不准确，因为它绘制在可逆的街道上，所以现在的路径不正确，任何人都可以知道如何忽略错误的街道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T22:54:34.577

这是工作示例[链接](https://stackoverflow.com/questions/2023669/j2me-android-blackberry-driving-directions-route-between-two-locations/2023685#2023685)。一探究竟。它有助于在地图上创建路线覆盖。这是[完整的源代码](http://code.google.com/p/j2memaprouteprovider/source/browse/#svn/trunk/J2MEMapRouteAndroidEx/src/org/ci/geo/route)。

**编辑：** 正如亚历克斯安德罗在下面提到的：“这种方法，使用 kml 似乎不再可用，最近几天在 Stackoverflow 上讨论了这个问题。[谷歌地图输出=kml 坏了？](https://stackoverflow.com/questions/11680872/google-maps-output-kml-broken) ”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T12:56:40.793

使用下面的类代码::

```
import java.io.IOException;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import java.util.List;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.SAXException;

import android.graphics.Color;
import android.graphics.drawable.Drawable;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.OverlayItem;

public class RoutePath extends MapActivity { 
    /** Called when the activity is first created. */ 

    MapView mapView;
    private RoutePath _activity;

    GeoPoint srcGeoPoint,destGeoPoint;
    private static List<Overlay> mOverlays;

    @Override 
    public void onCreate(Bundle savedInstanceState) { 
        super.onCreate(savedInstanceState); 
        setContentView(R.layout.main); 
        _activity = this;

        MapView mapView = (MapView) findViewById(R.id.mapview); 

        double src_lat = SRCLAT;
        double src_long = SRCLNG;
        double dest_lat = DESTLAT;
        double dest_long = DESTLNG;
        srcGeoPoint = new GeoPoint((int) (src_lat * 1E6),(int) (src_long * 1E6)); 
        destGeoPoint = new GeoPoint((int) (dest_lat * 1E6),(int) (dest_long * 1E6)); 

        List<Overlay> mapOverlays = mapView.getOverlays();
        Drawable srcdrawable = this.getResources().getDrawable(R.drawable.pin_green);
        CustomItemizedOverlay srcitemizedOverlay = new CustomItemizedOverlay(srcdrawable, this);
        OverlayItem srcoverlayitem = new OverlayItem(srcGeoPoint, "Hello!", "This is your Location.");

        Drawable destdrawable = this.getResources().getDrawable(R.drawable.pin_red);
        CustomItemizedOverlay destitemizedOverlay = new CustomItemizedOverlay(destdrawable, this);
        OverlayItem destoverlayitem = new OverlayItem(destGeoPoint, "Hello!", "This is dest Location.");

        srcitemizedOverlay.addOverlay(srcoverlayitem);
        destitemizedOverlay.addOverlay(destoverlayitem);

        mapOverlays.add(srcitemizedOverlay);
        mapOverlays.add(destitemizedOverlay);

        connectAsyncTask _connectAsyncTask = new connectAsyncTask();
        _connectAsyncTask.execute();         
        mapView.setBuiltInZoomControls(true);
        mapView.displayZoomControls(true);
        mOverlays = mapView.getOverlays();
        mapView.getController().animateTo(srcGeoPoint); 
        mapView.getController().setZoom(12); 
    } 

    @Override 
    protected boolean isRouteDisplayed() { 
        // TODO Auto-generated method stub 
        return false; 
    } 

    private class connectAsyncTask extends AsyncTask<Void, Void, Void>{
        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            SHOW YOU PROGRESS BAR HERE
        }
        @Override
        protected Void doInBackground(Void... params) {
            // TODO Auto-generated method stub
            fetchData();
            return null;
        }
        @Override
        protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);            
            if(doc!=null){
                Overlay ol = new MyOverLay(_activity,srcGeoPoint,srcGeoPoint,1);
                mOverlays.add(ol);
                NodeList _nodelist = doc.getElementsByTagName("status");
                Node node1 = _nodelist.item(0);
                String _status1  = node1.getChildNodes().item(0).getNodeValue();
                if(_status1.equalsIgnoreCase("OK")){
                    NodeList _nodelist_path = doc.getElementsByTagName("overview_polyline");
                    Node node_path = _nodelist_path.item(0);
                    Element _status_path = (Element)node_path;
                    NodeList _nodelist_destination_path = _status_path.getElementsByTagName("points");
                    Node _nodelist_dest = _nodelist_destination_path.item(0);
                    String _path  = _nodelist_dest.getChildNodes().item(0).getNodeValue();
                    List<GeoPoint> _geopoints = decodePoly(_path);
                    GeoPoint gp1; 
                    GeoPoint gp2; 
                    gp2 = _geopoints.get(0);
                    for(int i=1;i<_geopoints.size();i++) // the last one would be crash 
                    { 

                        gp1 = gp2;
                        gp2 = _geopoints.get(i);
                        Overlay ol1 = new MyOverLay(gp1,gp2,2,Color.BLUE);
                        mOverlays.add(ol1);
                    } 
                    Overlay ol2 = new MyOverLay(_activity,destGeoPoint,destGeoPoint,3);
                    mOverlays.add(ol2);

                    DISMISS PROGRESS BAR HERE

                }else{
                     showAlert AS "Unable to find the route"
                }

                Overlay ol2 = new MyOverLay(_activity,destGeoPoint,destGeoPoint,3);
                mOverlays.add(ol2);
                DISMISS PROGRESS BAR HERE
            }else{
                showAlert AS "Unable to find the route"
            }

        }

    }
    Document doc = null;
    private void fetchData()
    {
        StringBuilder urlString = new StringBuilder();
        urlString.append("http://maps.google.com/maps/api/directions/xml?origin=");
        urlString.append( Double.toString((double)srcGeoPoint.getLatitudeE6()/1.0E6 )); 
        urlString.append(","); 
        urlString.append( Double.toString((double)srcGeoPoint.getLongitudeE6()/1.0E6 )); 
        urlString.append("&destination=");//to 
        urlString.append( Double.toString((double)destGeoPoint.getLatitudeE6()/1.0E6 )); 
        urlString.append(","); 
        urlString.append( Double.toString((double)destGeoPoint.getLongitudeE6()/1.0E6 )); 
        urlString.append("&sensor=true&mode=driving"); 
        if(Constants.LOG)Log.d("xxx","URL="+urlString.toString());          
        HttpURLConnection urlConnection= null; 
        URL url = null; 
        try 
        { 
            url = new URL(urlString.toString()); 
            urlConnection=(HttpURLConnection)url.openConnection(); 
            urlConnection.setRequestMethod("GET"); 
            urlConnection.setDoOutput(true); 
            urlConnection.setDoInput(true); 
            urlConnection.connect(); 
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance(); 
            DocumentBuilder db = dbf.newDocumentBuilder();
            doc = (Document) db.parse(urlConnection.getInputStream());//Util.XMLfromString(response);
        }catch (MalformedURLException e){ 
            e.printStackTrace(); 
        }catch (IOException e){ 
            e.printStackTrace(); 
        }catch (ParserConfigurationException e){ 
            e.printStackTrace(); 
        }
        catch (SAXException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    private List<GeoPoint> decodePoly(String encoded) {

        List<GeoPoint> poly = new ArrayList<GeoPoint>();
        int index = 0, len = encoded.length();
        int lat = 0, lng = 0;

        while (index < len) {
            int b, shift = 0, result = 0;
            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lat += dlat;

            shift = 0;
            result = 0;
            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lng += dlng;

            GeoPoint p = new GeoPoint((int) (((double) lat / 1E5) * 1E6),
                    (int) (((double) lng / 1E5) * 1E6));
            poly.add(p);
        }

        return poly;
    }
} 
```

CustomItemizedOverlay.java

```
import java.util.ArrayList;

import android.content.Context;
import android.graphics.drawable.Drawable;

import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.OverlayItem;

public class CustomItemizedOverlay extends ItemizedOverlay<OverlayItem> {

    private final ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();

    private Context context;

    public CustomItemizedOverlay(Drawable defaultMarker) {
        super(boundCenterBottom(defaultMarker));
    }

    public CustomItemizedOverlay(Drawable defaultMarker, Context context) {
        this(defaultMarker);
        this.context = context;
    }

    @Override
    protected OverlayItem createItem(int i) {
        return mapOverlays.get(i);
    }

    @Override
    public int size() {
        return mapOverlays.size();
    }

    public void addOverlay(OverlayItem overlay) {
        mapOverlays.add(overlay);
        this.populate();
    }

} 
```

MyOverLay.java

```
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Point;
import android.graphics.RectF;
import android.graphics.drawable.BitmapDrawable;
import android.graphics.drawable.Drawable;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.Projection;

public class MyOverLay extends Overlay 
{ 
    private GeoPoint gp1; 
    private GeoPoint gp2; 
    //private int mRadius=6; 
    private int mode=0; 
    private int defaultColor; 
    private String text=""; 
    private Bitmap img = null; 
    Context mContext;

    public MyOverLay(Context context,GeoPoint gp1,GeoPoint gp2,int mode) // GeoPoint is a int. (6E) 
    { 
        this.gp1 = gp1; 
        this.gp2 = gp2; 
        this.mode = mode; 
        this.mContext = context;
        defaultColor = 999; // no defaultColor 

    } 

    public MyOverLay(GeoPoint gp1,GeoPoint gp2,int mode, int defaultColor) 
    { 
        this.gp1 = gp1; 
        this.gp2 = gp2; 
        this.mode = mode; 
        this.defaultColor = defaultColor; 
    } 
    public void setText(String t) 
    { 
        this.text = t; 
    } 
    public void setBitmap(Bitmap bitmap) 
    { 
        this.img = bitmap; 
    } 
    public int getMode() 
    { 
        return mode; 
    } 

    @Override 
    public boolean draw 
    (Canvas canvas, MapView mapView, boolean shadow, long when) 
    { 
        Projection projection = mapView.getProjection(); 
        if (shadow == false) 
        { 
            Paint paint = new Paint(); 
            paint.setAntiAlias(true); 
            Point point = new Point(); 
            projection.toPixels(gp1, point); 
            // mode=1&#65306;start 
            if(mode==1) 
            { 
                if(defaultColor==999) 
                    paint.setColor(Color.BLUE); 
                else 
                    paint.setColor(defaultColor);                
                // start point
            } 
            // mode=2&#65306;path 
            else if(mode==2) 
            { 
                if(defaultColor==999) 
                    paint.setColor(Color.RED); 
                else 
                    paint.setColor(defaultColor); 
                Point point2 = new Point(); 
                projection.toPixels(gp2, point2); 
                paint.setStrokeWidth(5); 
                paint.setAlpha(120); 
                canvas.drawLine(point.x, point.y, point2.x,point2.y, paint); 

            } 
            /* mode=3&#65306;end */ 
            else if(mode==3) 
            { 
                /* the last path */ 

                if(defaultColor==999) 
                    paint.setColor(Color.GREEN); 
                else 
                    paint.setColor(defaultColor); 
                Point point2 = new Point(); 
                projection.toPixels(gp2, point2); 
                paint.setStrokeWidth(5); 
                paint.setAlpha(120); 
                canvas.drawLine(point.x, point.y, point2.x,point2.y, paint); 
                /* end point */

            } 
        } 
        return super.draw(canvas, mapView, shadow, when); 
    } 

} 
```

# xcode - 使用 XCODE 4.2 构建 FireBReath 插件的内部错误

> ID：10263728
> 
> 赞同：2
> 
> 时间：2012-04-21T22:48:41.133
> 
> 标签：xcode, macos, npapi, firebreath

您好最近我重新安装了我的 mac os x 机器我有以下配置： 1\. Mac Os x Snow Leopard 10.6.8 2\. Xcode 4.2 (4C199) for snow leopard with sdk 10.6 3\. Firebreath project 1.6 4\. CMAKE 2.8-8

我创建了一个插件测试项目，运行 prepmac.sh 命令后一切正常。最后我用 XCODE 打开它并开始构建过程。

10 分钟后，在此过程中会生成崩溃错误。

出现一条消息：内部错误，XCODE 遇到内部逻辑错误。

```
ASSERTION FAILURE in /SourceCache/IDEXcode3ProjectSupport/IDEXcode3ProjectSupport-   928/Xcode3Sources/XcodeIDE/Frameworks/DevToolsBase/pbxcore/Target.subproj/PBXTarget.m:4146
Details:  target 'azTest' has been asked for its build context but it does not belong to a project
Object:   <PBXNativeTarget: 0x200f62f00>
Method:   -targetBuildContext
Thread:   <NSThread: 0x2019f6fa0>{name = (null), num = 25}
Hints:   None

    Backtrace:
  0  0x00000001009e6646 -[IDEAssertionHandler handleFailureInMethod:object:fileName:lineNumber:messageFormat:arguments:] (in IDEKit)
  1  0x000000010006aaa4 _DVTAssertionFailureHandler (in DVTFoundation)
  2  0x0000000116655973 -[PBXTarget targetBuildContext] (in DevToolsCore)
  3  0x000000011665908d -[PBXTarget(XCBuildables) buildDidFinishWithBuildLogRecorder:] (in DevToolsCore)
  4  0x00000001167e0222 -[Xcode3TargetBuildableSnapshot buildForBuilderDidFinish:] (in DevToolsCore)
  5  0x000000010068997a -[IDEBuildableSnapshot performBuildForBuilder:buildCommand:buildOnlyTheseFiles:] (in IDEFoundation)
  6  0x00000001005c3753 -[IDEBuilder main] (in IDEFoundation)
  7  0x00007fff83a75dd0 -[__NSOperationInternal start] (in Foundation)
  8  0x00007fff83b53bd5 ____NSOQSchedule_block_invoke_2 (in Foundation)
  9  0x00007fff81d47d64 _dispatch_call_block_and_release (in libSystem.B.dylib)
 10  0x00007fff81d262d1 _dispatch_worker_thread2 (in libSystem.B.dylib)
 11  0x00007fff81d25c08 _pthread_wqthread (in libSystem.B.dylib)
 12  0x00007fff81d25aa5 start_wqthread (in libSystem.B.dylib)

 if  I choose continue XCODE Finally crash with this detail:

objc[2341]: garbage collection is ON
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSCFArray initWithObjects:count:]: attempt to insert nil object at objects[0]'
*** Call stack at first throw:
(
    0   CoreFoundation                      0x00007fff8628a784 __exceptionPreprocess + 180
    1   libobjc.A.dylib                     0x00007fff80bd1f03 objc_exception_throw + 45
    2   CoreFoundation                      0x00007fff862344d7 -[__NSPlaceholderArray initWithObjects:count:] + 407
    3   CoreFoundation                      0x00007fff862408e1 +[NSArray arrayWithObject:] + 49
    4   DevToolsCore                        0x000000011663a72e -[PBXTarget filePathForBuildableProductFileMapForWorkspaceArenaSnapshot:] + 79
    5   DevToolsCore                        0x000000011664f0b7 -[PBXTarget(XCBuildables) buildDidFinishWithBuildLogRecorder:] + 79
    6   DevToolsCore                        0x00000001167d6222 -[Xcode3TargetBuildableSnapshot buildForBuilderDidFinish:] + 99
    7   IDEFoundation                       0x000000010068997a -[IDEBuildableSnapshot performBuildForBuilder:buildCommand:buildOnlyTheseFiles:] + 1397
    8   IDEFoundation                       0x00000001005c3753 -[IDEBuilder main] + 1136
    9   Foundation                          0x00007fff83a75dd0 -[__NSOperationInternal start] + 681
    10  Foundation                          0x00007fff83b53bd5 ____NSOQSchedule_block_invoke_2 + 129
    11  libSystem.B.dylib                   0x00007fff81d47d64 _dispatch_call_block_and_release + 15
    12  libSystem.B.dylib                   0x00007fff81d262d1 _dispatch_worker_thread2 + 239
    13  libSystem.B.dylib                   0x00007fff81d25c08 _pthread_wqthread + 353
    14  libSystem.B.dylib                   0x00007fff81d25aa5 start_wqthread + 13
) 
```

我无法理解构建过程可以正常工作。所以我决定在这里发帖寻求帮助。我不得不提到，我在另一台机器上用 MAC OS X Lion 测试了同一个项目，它运行完美。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T02:55:39.597

这不是一个答案，而是一个解决方法；XCode 4 似乎在任何使用 boost 的项目（包括 FireBreath 项目）上使用了大量的内存。尝试从命令行构建：

```
cmake --build path/to/build/ 
```

看看这是否有效。

# activerecord - rails belongs_to 通过关联

> ID：10263731
> 
> 赞同：2
> 
> 时间：2012-04-21T22:49:14.453
> 
> 标签：activerecord, associations, rails-activerecord, has-many, belongs-to

我在 Rails 3.0 上，并试图弄清楚什么是正确的方法来设置一个 belongs_to :through 关系（我知道这是不可能的）。这是一个例子：

```
class ParentCompany < ActiveRecord::Base
  has_many :subsidiaries
  has_many :employees, :through => :subsidiaries
end

class Subsidiary < ActiveRecord::Base
  belongs_to :parent_company
  has_many :employees
end

class Employee < ActiveRecord::Base
  belongs_to :subsidiary
  belongs_to :parent_company, :through :subsidiary # <-- I know this is invalid
end 
```

我知道我可以通过以下方式解决它：

```
class Employee < ActiveRecord::Base
  def parent_company
    subsidiary.parent_company
  end
end 
```

但是，我想知道我是否可以通过关联进行上述操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-28T05:22:19.867

您可以`delegate`在不使用关联的情况下使用它来完成此操作

```
class Employee < ActiveRecord::Base
  belongs_to :subsidiary
  delegate :parent_company, to: :subsidiary
end 
```

# c++ - 如何创建大地形/景观

> ID：10263732
> 
> 赞同：2
> 
> 时间：2012-04-21T22:49:20.630
> 
> 标签：c++, opengl, blender

我在徘徊如何在opengl中创建一个大地形。我的第一个想法是使用搅拌机并创建一个平面，对其进行细分，创建地形并将其导出为 .obj。在查看搅拌机后，我认为这应该是可能的，但很快我意识到我的 hexacore + 8GB RAM 无法跟上细分以支持非常大的地形所需的精度。

所以我的问题是，最好的方法是什么？

*   也许尝试其他 3D 渲染软件，如cinema4d？
*   在搅拌机中逐步创建地形并稍后将其组合在一起？（可能难以保持段之间的比例）
*   一些我不知道的方法？

我可以使用随机生成算法创建一个大景观，但我不想要一个随机景观，我需要一个包含许多细节的定制景观。（高度、深度、路径）

**编辑**

我要做的是：

*   创建 3 个不同的高度图（1\. 洞穴地面（可能是墙高的一半），2\. 洞穴天花板的倒置高度图，3\. 标准表面高度图）
*   结合所有三个高度图
*   将它们保存在 obj 文件或所需的任何格式中
*   在 3D 编辑工具中进行一些微调（如果它太大而无法处理，我将使用 LOD 算法创建一个应用程序，我可以在其中编辑一些小东西）
*   根据需要再次保存（也许做一些优化）
*   要开心

**Edit2** 我正在创建的地图太大了，以至于 Photoshop 使用了我所有的 8GB 内存，所以我必须将所有 3 个高度图拆分成更小的部分，并在移动地图时即时组装它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T23:12:21.643

我相信您只想制作高度图。您制作的图像越大，它可以拉伸得越远。也许如果你让接缝匹配，你可以平铺它，但如果你想要一个无尽的地形，那么生成一个地形可能是值得的。

要制作高度图，您将制作一个图像，其中每个像素代表一个设定的高度（您实际上不必将其表示为图像，但它可以很容易地可视化），该高度变成灰度颜色。然后，您可以将此值缩放到所需的最大高度（精度由图像的位深度决定）。

如果您想使用 OpenGL 执行此操作，您可以创建一个界面，您可以在其中单击点以提高特定点或区域的高度。

一旦你有了这个图像，渲染它就不会太难，因为 X 和 Y 坐标是为你的空间设置的，图像会给你 Z 坐标。

这样做的缺点是不允许洞穴和类似的特征（因为一个点只有一个高度）。如果您需要这些功能，可能会添加网格或第二个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T00:29:30.930

如果您尝试存储的数据多于内存，则需要将大部分数据保存在磁盘上。将地图划分为段，根据需要加载较近的段，是一种技术。许多组通过四叉树访问地图段，通常不需要太多遍历即可到达“附近”部分。

变化包括创建较大地图块的低分辨率版本以用于渲染长视图，因此您保留了整个地图的真正低分辨率版本、This Valley Here 的中等分辨率版本和高分辨率我正在看的这片树林的副本。

这是复杂的东西，这就是为什么直到 GTA:San Andreas 或 Oblivion 之前没有人真正把整个事情放在一起。

# c# - 如何对齐 SpriteBatch.DrawString 绘制的文本？

> ID：10263734
> 
> 赞同：15
> 
> 时间：2012-04-21T22:49:48.810
> 
> 标签：c#, text, xna, alignment, drawstring

有没有一种简单的方法可以将文本右对齐和居中（而不是默认左对齐）？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-21T23:17:13.443

我使用这段代码：

```
 [Flags]
 public enum Alignment { Center=0, Left=1, Right=2, Top=4, Bottom = 8 }

 public void DrawString(SpriteFont font, string text, Rectangle bounds, Alignment align, Color color )
    {
        Vector2 size = font.MeasureString( text );
        Vector2 pos = bounds.GetCenter( );
        Vector2 origin = size*0.5f;

        if ( align.HasFlag( Alignment.Left ) )
            origin.X += bounds.Width/2 - size.X/2;

        if ( align.HasFlag( Alignment.Right ) )
            origin.X -= bounds.Width/2 - size.X/2;

        if ( align.HasFlag( Alignment.Top ) )
            origin.Y += bounds.Height/2 - size.Y/2;

        if ( align.HasFlag( Alignment.Bottom ) )
            origin.Y -= bounds.Height/2 - size.Y/2;

        DrawString( font, text, pos, color, 0, origin, 1, SpriteEffects.None, 0 );
    } 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-21T23:00:55.463

第一步是使用 测量字符串[`SpriteFont.MeasureString()`](http://msdn.microsoft.com/en-us/library/bb464128%28v=xnagamestudio.30%29.aspx)。

然后，例如，如果您想将其绘制到某个点的左侧，而不是默认的右侧，那么您需要从文本绘制原点中减去测量的 X 宽度。如果你想让它居中，那么你可以使用一半的测量值，等等。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-07-20T20:34:14.457

```
SpriteFont mFont;
SpriteBatch mSprite;

mSprite.Begin();
mSprite.DrawString(mFont, "YourText", new Vector2(graphicsDevice.Viewport.Width / 2 - mFont.MeasureString("YourText").Length() / 2, 0), Color.White, 0, new Vector2(0, 0), 1f, SpriteEffects.None, 0f);
mSprite.End(); 
```

# php - foreach 麻烦

> ID：10263744
> 
> 赞同：0
> 
> 时间：2012-04-21T22:51:51.787
> 
> 标签：php, html, ajax

我想为每个唯一 ID 显示来自 XML 请求的图像。应该显示总共三张图像，但我得到了三次相同的图像。

ID 在此处正确存储：

```
 $simIds = array(
    "id1" => $similarObject->place[0]['place_id'],
    "id2" => $similarObject->place[1]['place_id'],
    "id3" => $similarObject->place[2]['place_id'],
); 
```

这是我的 foreach 循环：

```
foreach ($simIds as $foo) {
    $simPhotoFile = $photoUrl.$foo;
    $simPhotoObject = simplexml_load_file($simPhotoFile);
    $simPhotoSrc = array (
        'src1' => $simPhotoObject->photos->photo_set->square,
        'src2' => $simPhotoObject->photos->photo_set->square,
        'src3' => $simPhotoObject->photos->photo_set->square,       
    );  
} 
```

相关的 HTML：

```
<p><img src="<?= $simPhotoSrc['src1'] ?>" alt="Image load failed" /><img src="<?= $simPhotoSrc['src2'] ?>" alt="Image load failed" /><img src="<?= $simPhotoSrc['src3'] ?>" alt="Image load failed" /></p> 
```

我现在不确定我做错了什么，或者是否有更好的方法来解决这个问题。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T22:58:25.717

```
$simPhotoSrc = array();
foreach ($simIds as $foo) {
    $simPhotoFile = $photoUrl.$foo;
    $simPhotoObject = simplexml_load_file($simPhotoFile);
    $simPhotoSrc[] = $simPhotoObject->photos->photo_set->square
} 
```

html:

```
<p><img src="<?= $simPhotoSrc[0] ?>"/><img src="<?= $simPhotoSrc[1] ?>" /><img src="<?= $simPhotoSrc[2] ?>" /></p> 
```

# facebook - Facebook API 重定向到错误的地方

> ID：10263745
> 
> 赞同：2
> 
> 时间：2012-04-21T22:52:07.447
> 
> 标签：facebook, facebook-graph-api

```
$facebook = new Facebook($configs);
$uid = $facebook->getUser();

if($uid) {
    // Do stuffs
} else {
    $loginUrl = $facebook->getLoginUrl();

    echo('<script> top.location.href = "' . $loginUrl . '";</script>');
}
?> 
```

一切正常，但是，如果用户没有登录，脚本会重定向到要求登录的 Facebook。登录时，脚本重定向到我的应用程序外部 url`http://mywebsite.com/facebook-app`而不是我的`apps.facebook.com/myappid`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T23:01:13.277

尝试将此添加到您的`$loginUrl`：

```
$loginUrl = $facebook->getLoginUrl(array(
    'next'=>'http://apps.facebook/myappid'
)); 
```

特别没有遇到这个问题，但这可能有用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T23:58:49.103

检查 Facebook Developer 应用程序设置页面上的 URL 是否正确。如果您的应用属于“Facebook 上的应用”类型，请检查

```
Canvas URL
Secure Canvas URL 
```

是正确的。

如果它是“移动网络”应用，请检查

```
Mobile Web URL 
```

依此类推，具体取决于应用程序的类型。

# python - 递归定义列表类的反向方法

> ID：10263748
> 
> 赞同：1
> 
> 时间：2012-04-21T22:53:04.250
> 
> 标签：python, list, recursion, reverse

我一直在研究 Python 中递归定义的列表类，并且在编写`reverse()`递归函数的方法时遇到了麻烦。这是课程的基础。

```
class RecList:
  def __init__(self):
    self._head = None
    self._rest = None 
```

基本情况是 self._head，它是列表中的第一个条目，然后是递归情况，它本质上是另一个列表，包含自己`self._head`的开始，然后递归定义。这一直持续到底层`self._head`和`self._rest = None`。有没有一种简单的方法来为这样定义的列表编写反向方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T23:13:25.097

尝试这个：

```
class RecList:
  def __init__(self, head=None, rest=None):
    self._head = head
    self._rest = rest
  def __str__(self):
    if self._rest is None:
        return str(self._head)
    return str(self._head) + ' ' + self._rest.__str__()
  def reverse(self):
    return self._reverse_aux(None)
  def _reverse_aux(self, acc):
    if self._rest is None:
        return RecList(self._head, acc)
    return self._rest._reverse_aux(RecList(self._head, acc))

lst = RecList(1, RecList(2, RecList(3, None)))
print lst
> 1 2 3
print lst.reverse()
> 3 2 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T23:14:02.663

```
class RecList:
  def __init__(self, head, tail):
    self.head = head
    self.tail = tail

def foldr(f, acc, xs):
    head = xs.head
    tail = xs.tail

    if tail:
        return foldr(f, f(head, acc), tail)
    else:
        return f(head, acc)

testList = RecList(1, RecList(2, RecList(3, None)))
test = foldr(lambda x, a: RecList(x, a), RecList(None, None), testList)

print test.head
print test.tail.head 
```

# ruby-on-rails-3 - Rails 3 创建嵌套资源“无路由匹配”错误

> ID：10263749
> 
> 赞同：1
> 
> 时间：2012-04-21T22:53:18.760
> 
> 标签：ruby-on-rails-3, routes, oncreate, nested-resources

我是 Rails 新手，正在尝试在嵌套资源中创建子记录。我的 routes.rb 文件包含以下内容：

```
resources :sports do
  resources :teams
end 
```

我的 teams_controller.rb 文件包含用于创建 def 的内容：

```
def create
@sport = Sport.find(params[:sport_id])
@team = @sport.teams.build(params[:team_id])

respond_to do |format|
  if @team.save
    format.html { redirect_to @team, notice: 'Team was successfully created.' }
    format.json { render json: @team, status: :created, location: @team }
  else
    format.html { render action: "new" }
    format.json { render json: @team.errors, status: :unprocessable_entity }
  end
end 
```

结尾

而我的 _form.html.erb 部分（在我的 app/views/teams 文件夹代码中的 new.html.erb 中是：

```
<%= form_for(@team) do |f| %>
<% if @team.errors.any? %>
<div id="error_explanation">
  <h2><%= pluralize(@team.errors.count, "error") %> prohibited this team from being saved:</h2>
  <ul>
  <% @team.errors.full_messages.each do |msg| %>
    <li><%= msg %></li>
  <% end %>
  </ul>
</div> 
```

```
 <div class="field">
 <%= f.label :city %><br />
 <%= f.text_field :city %>
  </div>
  <div class="actions">
    <%= f.submit %>
</div>
<% end %> 
```

当我尝试在表单上提交时，我收到以下错误：

```
"No route matches [POST] "/teams" " 
```

最后，当我 rake 路线时，我得到了这个：

```
sport_teams GET    /sports/:sport_id/teams(.:format)          teams#index
            POST   /sports/:sport_id/teams(.:format)          teams#create
new_sport_team GET    /sports/:sport_id/teams/new(.:format)      teams#new
edit_sport_team GET    /sports/:sport_id/teams/:id/edit(.:format) teams#edit
 sport_team GET    /sports/:sport_id/teams/:id(.:format)      teams#show
            PUT    /sports/:sport_id/teams/:id(.:format)      teams#update
            DELETE /sports/:sport_id/teams/:id(.:format)      teams#destroy
     sports GET    /sports(.:format)                          sports#index
            POST   /sports(.:format)                          sports#create
  new_sport GET    /sports/new(.:format)                      sports#new
 edit_sport GET    /sports/:id/edit(.:format)                 sports#edit
      sport GET    /sports/:id(.:format)                      sports#show
            PUT    /sports/:id(.:format)                      sports#update
            DELETE /sports/:id(.:format)                      sports#destroy 
```

我希望团队从构建团队中保存并将我引导到展示团队页面。有人知道/看到我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T22:57:46.620

您需要传递`form_for`运动和团队的数组：

```
<%= form_for([@sport, @team]) do |f| %> 
```

与`redirect_to`：

```
format.html { redirect_to [@sport, @team], notice: 'Team was successfully created.' } 
```

* * *

来自[Rails API](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_for-label-Resource-oriented+style)：

```
If your resource has associations defined, for example, 
you want to add comments to the document given that the routes
are set correctly:

<%= form_for([@document, @comment]) do |f| %>
 ...
<% end %>

Where 
  @document = Document.find(params[:id]) 
and 
  @comment = Comment.new. 
```

# javascript - 这些 Javascript 函数声明的差异

> ID：10263751
> 
> 赞同：0
> 
> 时间：2012-04-21T22:54:10.660
> 
> 标签：javascript

今天看到了两种不同类型的 Javascript 函数声明，我想对这两者有更深入的了解：

```
function Car( model, year, miles ){
   this.model = model;
   this.year    = year;
   this.miles  = miles;
}

/*
 Note here that we are using Object.prototype.newMethod rather than 
 Object.prototype so as to avoid redefining the prototype object
*/
Car.prototype.toString = function(){
    return this.model + " has done " + this.miles + " miles";
};

var civic = new Car( "Honda Civic", 2009, 20000);
var mondeo = new Car( "Ford Mondeo", 2010, 5000);

console.log(civic.toString()); 
```

和类型 2：

```
function Car( model, year, miles ){
   this.model = model;
   this.year    = year;
   this.miles  = miles;
   this.toString = function(){
       return this.model + " has done " + this.miles + " miles";
   };
}

var civic = new Car( "Honda Civic", 2009, 20000);
var mondeo = new Car( "Ford Mondeo", 2010, 5000);

console.log(civic.toString()); 
```

特别是“原型”和“this.toString”。

任何人都可以传授一些 JS 智慧的珍珠吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T23:06:01.297

这里的主要区别在于，在方法 2 中，您将使用您创建的每个新 Car 实例重新定义该方法，这在技术上性能较低。

然而，方法 2 为您提供的一件好事是您可以创建真正私有的实例变量，如下所示：

```
function Person( _age ){
    var age = _age;
    this.canDrink = function(){
        return age >= 21;
    }
}

var p = new Person(25);
p.canDrink() // true
p.age // undefined, because age is not exposed directly 
```

方法 1 的另一个优点（除了性能之外）是您现在可以更改 on object 的所有实例的功能。例如：

```
function Person( _age ){
    this.age = _age;
}
Person.prototype.canDrink = function(){
    return this.age >= 21;
}

var a = new Person(15),
    b = new Person(25);
a.canDrink() // false
b.canDrink() // true

Person.prototype.canDrink = function(){ return true }
a.canDrink() // true
b.canDrink() // true 
```

这对于方法 2 是不可能的（不为每个实例更改它）。然而，年龄现在暴露了：

```
a.age // 15
b.age // 25 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T22:56:02.517

`this.toString`必须在构造函数中定义，并且只能在 Car 类中找到，而不是从它继承的任何东西（除非特别包含在子类中）。

`Car.prototype.toString`可以在构造函数之外定义，并且可以在从 Car 类继承的任何类的原型中找到。

# java - Java奇怪的IndexOutOfBoundsException错误

> ID：10263757
> 
> 赞同：-1
> 
> 时间：2012-04-21T22:55:14.217
> 
> 标签：java, loops, indexoutofboundsexception

这是发生问题的代码，我已将第 90 行加粗（错误消息表明问题源于此）[编辑：我无法弄清楚如何在代码块内加粗，我用箭头标记了它]：

```
while ((l<=list_L.size())&&(i<=list_I.size())) {
    if (list_I.get(i).url.compareTo(list_L.get(l).src) == 0) {   //<--- LINE 90
        int firstmatch = l;
        int outgoing = 1;
        l++;

        while (list_I.get(i).url.compareTo(list_L.get(l).src) == 0) {
            outgoing++;
            l++;
        }

        l = firstmatch;
        for (int k=0; k<outgoing; k++) {
            list_R.add(new Triplet(list_L.get(l).src, list_L.get(l).dest, list_I.get(i).rank / outgoing));
            l++;
        }
    }
    else {
        sum_T += list_I.get(i).rank; //This shouldn't happen in this case...
    }

    i++;
} 
```

这是错误消息：

> java.util.ArrayList.RangeCheck( Unknown
> Source)
> at java.util.ArrayList.get(Unknown Source)
> at PageRank.main(PageRank.爪哇：90）

我不知道出了什么问题，因为它不是空指针异常，就像我所期望的那样，如果出现问题...

**更新：** 好的，我在初始位置解决了问题，但现在发生在这里：

```
for (int p=0; p<list_I2.size(); p++) {
    L2_norm += Math.pow((list_I.get(p).rank - list_I2.get(p).rank), 2); // <-- LINE 146
} 
```

错误信息：

> 线程“主”java.lang.IndexOutOfBoundsException 中的异常：索引：118981，大小：118981
> 在 java.util.ArrayList.RangeCheck(Unknown Source)
> at java.util.ArrayList.get(Unknown Source)
> at PageRank.main(PageRank.爪哇：146）

list_I 和 list_I2 的大小相同，我在调试中已确认。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T22:57:35.873

```
while ((l<=list_L.size())&&(i<=list_I.size())) { 
```

应该是

```
while ((l<list_L.size())&&(i<list_I.size())) { 
```

特别是，`list_I.get(list_I.size())`抛出一个`IndexOutOfBoundsException`, 因为 Java 中的列表（和数组）是*零索引的*——基本上，它们的索引从`0`to 开始`n-1`，而不是`1`to `n`。

更新：

```
for (int p=0; p<list_I2.size(); p++) {
   L2_norm += Math.pow((list_I.get(p).rank - list_I2.get(p).rank), 2);
} 
```

如果您在此处收到 IndexOutOfBoundsException，则 list_I 和 list_I2*必须*具有不同的大小，或者代码中的其他地方必须有错字。这真的是唯一的可能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T22:57:14.250

条件应该是：

```
while ((l<list_L.size())&&(i<list_I.size())) 
```

不是

```
while ((l<=list_L.size())&&(i<=list_I.size())) 
```

如果列表的大小为**X**，则列表的最后一个索引是**X-1**。

# sql - SQL Server 2008 上的唯一键与唯一索引

> ID：10263760
> 
> 赞同：57
> 
> 时间：2012-04-21T22:55:56.107
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2008-r2

我有一个名为的表，我通过在 SQL Server 2008 R2 上创建类型为“唯一键”的“索引/键”来`countries`定义该列是唯一的。`country_name`

但我有以下问题：

1.  创建“唯一键”类型的“索引/键”会自动在该列上创建非聚集索引吗？
2.  如果我将类型从“唯一键”更改为“索引”，并将`IsUnique`值保持为“是”，那么会有什么不同吗？
3.  那么为什么有两个选项“唯一键”和“索引”我认为两者是一样的？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-04-21T23:00:08.943

唯一约束在幕后实现为唯一索引，因此如何指定它并不重要。我倾向于简单地实现它：

```
ALTER TABLE dbo.foo ADD CONSTRAINT UQ_bar UNIQUE(bar); 
```

有些人改为创建唯一索引，例如

```
CREATE UNIQUE INDEX IX_UQ_Bar ON dbo.foo(bar); 
```

不同之处在于意图 - 如果您创建约束以强制执行唯一性/业务规则，则创建约束，如果这样做是为了提高查询性能，则创建唯一索引可能更合乎逻辑。同样，在幕后它是相同的实现，但你到达那里的道路可能有助于记录你的意图。

我认为有多个选项可以同时遵守以前的 Sybase 功能以及遵守 ANSI 标准（即使唯一约束不遵守标准 100%，因为它们只允许一个 NULL 值 - 唯一索引，另一方面，可以通过在 SQL Server 2008 及更高版本上添加`WHERE`子句 ( `WHERE col IS NOT NULL`) 来解决此问题。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-10-28T09:25:21.380

另外要提到的一件事是，如果您创建索引，则可以指定包含的列，如果按国家/地区名称进行搜索，这可以帮助您的 sql 代码更快地工作。

```
CREATE UNIQUE NONCLUSTERED INDEX IX_UQ_Bar
ON dbo.foo (
    bar
)
INCLUDE (foo_other_column)
GO

SELECT foo_other_column FROM Foo WHERE bar = 'test' 
```

SQL 服务器会将“foo_other_column”存储在索引本身中。在唯一约束的情况下，它将首先找到“test”的索引，然后在 foo 表中搜索行，只有在那里才会采用“foo_other_column”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-05-29T18:05:42.480

除了上面的出色答案外，我还要在这里加 2 美分。

唯一键是一个约束，它使用唯一索引来强制执行。正如主键通常由聚集唯一索引强制执行一样。从逻辑上讲，约束和索引是两个不同的东西。但在 RDBMS 中，约束可以通过索引物理实现。

如果在 sql server 中使用唯一约束创建表，您将看到约束对象**和**唯一索引

```
create table dbo.t (id  int constraint my_unique_constraint unique (id));

select [Constraint]=name from sys.key_constraints 
where parent_object_id = object_id('dbo.t');

select name, index_id, type_desc from sys.indexes
where object_id = object_id('dbo.t')
and index_id > 0; 
```

我们将得到以下内容（约束和索引）

[![在此处输入图像描述](../Images/69ece78d75f16716af7959be36ed16d1.png)](https://i.stack.imgur.com/8SpUM.jpg)

但是，如果我们不创建约束而只创建唯一索引，如下所示

```
create table dbo.t2 (id int );
create unique index my_unique_constraint on dbo.t2 (id);

select [Constraint]=name from sys.key_constraints 
where parent_object_id = object_id('dbo.t2');

select name, index_id, type_desc from sys.indexes
where object_id = object_id('dbo.t2')
and index_id > 0 
```

您将看到没有创建约束对象（仅创建了一个索引）。

[![在此处输入图像描述](../Images/22e04fe0004812487b322048aaefcb3b.png)](https://i.stack.imgur.com/zh5B9.jpg)

从“理论上”的角度来看，在 SQL Server 中，约束是具有 object_id 值的对象并且是模式绑定的，而索引不是对象并且没有 object_id 值并且与模式无关。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-30T06:42:59.547

唯一索引或唯一约束之间没有区别，也没有性能差异。但是，创建时存在一些差异，其中某些索引创建选项不适用于唯一约束。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-18T09:12:49.697

如果您使用 SqlMetal.exe 输出 DBML 或 LinqToSql 实体：

*   如果外键使用唯一键，那么您将按预期获得关联。
*   如果外键使用唯一索引，则不会显示。

原因在于SqlMetal 的实现。它查询数据库信息架构，特别是关键列的使用情况。那里表示唯一键，但没有唯一索引。

```
SELECT TABLE_NAME, CONSTRAINT_NAME, COLUMN_NAME, ORDINAL_POSITION
FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-22T09:41:24.500

最重要的一点是假设您希望通过保持唯一性来保持列值为空，而唯一键约束无法做到这一点，但是使用唯一键索引，您可以在保持唯一性的情况下保持列值空。因此，如果您需要具有可空类型的唯一列，则需要唯一索引，否则如果您需要不可为空的列，则需要唯一键约束。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-05T09:01:45.187

强制唯一性的第三个选项是使用**过滤的唯一索引**来允许为空的唯一索引。
这*不适*用于唯一约束。
例如，假设您有一列只想允许唯一值，但在多个值不存在时
   仍希望支持它们。 只有**过滤的唯一索引**才能工作：`NULL`

 **```
CREATE UNIQUE NONCLUSTERED INDEX [UF_Employee_UserID] ON [dbo].[Employee]
(
    [UserID] ASC--Not all Employees have a UserID to log into the System.
)
WHERE ([UserID] IS NOT NULL)--Enforce Uniqueness when not null. 
```

现在，在使用 GUI 编辑表时，您仍然无法在 SSMS 中创建过滤索引。
但是，如果您想通过 GUI 而不是手动创建索引（如上），您可以关闭所有打开的表设计器，然后在对象资源管理器中打开索引本身的属性。**

# javascript - 无法从 json-p 调用访问数据

> ID：10263763
> 
> 赞同：0
> 
> 时间：2012-04-21T22:56:25.513
> 
> 标签：javascript, jquery, cross-domain, jsonp, getjson

我正在尝试从另一个域内的服务器访问一些数据。

所以我有这个php代码：

```
header('Content-type: application/json');
$callback = $_GET[callback];
echo $callback . '(' . $CIPHERDATA . ')'; 
```

在客户端运行的 javascript 是这个

```
$.getJSON("http://mydomain.gr/zerobin-015/?24c3285?callback=?",function(jsondata){
    alert(jsondata.data);
    alert("hi");
}); 
```

警报不显示。唯一发生的事情是创建一个包含我需要的所有信息但我无法访问的脚本标签。

```
<script src="http://mydomain.gr/zerobin-015/?24c3285?callback=jsonp1335048265855&_=1335048265874">
({"data":"{\"iv\":\"smDkNQMt0MIbPABPbAb+xQ\",\"salt\":\"aoFfKV+jHhs\",\"ct\":\"Ns17UQZQN\/ktO2hUW+dPug\"}","meta":{"expire_date":1337635538,"postdate":1335043538}})
</script> 
```

我的 json-p 格式有问题吗？这些数据的正确格式是什么，以便它们可以访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T00:36:01.837

你做得对。这只是 PHP 中的运行时错误。
在您的 PHP 脚本中，替换`$GET[callback]`为`$GET['callback']`. 注意单引号。

**编辑**

查看您的网址，我会说您还需要替换它：

```
http://mydomain.gr/zerobin-015/?24c3285?callback=? 
```

有了这个：

```
http://mydomain.gr/zerobin-015/?24c3285&callback=? 
```

注意：第二个？被 & 取代。根据[RFC3986](https://www.rfc-editor.org/rfc/rfc3986)，HTTP URL 的格式最多需要一个 ? 在任何网址中。这种情况可能会因为尾随 ? . `$.getJSON()`那个在运行时在调用中被 jQuery 取代。那场决赛？不会出现在最终到达网址中。所以最后你应该只有一个吗？.

* * *

**编辑 2**

我刚刚在您的 jsonp 端点上尝试了 HTTP GET。这是我使用的网址：

```
http://kasem.gr/vasilis-dev/zerobin-015/?xxxxxBigStringHerexxxx=&callback=foo 
```

`xxxxBigStringHerexxx`替换为由 40 个明显随机字符和数字组成的字符串。我得到的结果：

```
jsonCallback({"data":"{\"iv\":\"smDkNQMt0MIbPABPbAb+xQ\",
                       \"salt\":\"aoFfKV+jHhs\",\"ct\":\"Ns17UQZQN\/ktO2hUW+dPug\"}",
              "meta":{"expire_date":1337635538,"postdate":1335043538}}) 
```

这告诉我你的 PHP 不正确。`jsonCallback`当我传递“foo”时，它用作回调函数名称。此外，由于某种原因，“数据”是一个序列化的 json 字符串。这似乎是一个不必要的步骤。但是功能不匹配是最重要的。

如果不清楚，我建议您[阅读更多关于 JSONP 的内容](http://en.wikipedia.org/wiki/JSONP)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T23:04:22.913

可能是服务器获取了错误的请求标头，因此未将 JSON 响应作为成功语句的一部分返回。我敢打赌，如果您为 AJAX 调用中的错误添加一个捕获，您将在那里看到 JSONP 响应。解决此问题的正确方法是确保将正确的 mimetype 标头发送到服务器，以便在正确的上下文中调用返回的 JSONP 回调。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T23:31:44.823

问题出在数据格式上。应该由 php 提供的 json 字符串是：{"data":"{"iv":"smDkNQMt0MIbPABPbAb+xQ","salt":"aoFfKV+jHhs","ct": "Ns17UQZQNktO2hUW+dPug"}","meta":{"expire_date":1337635538​​,"postdate":1335043538}}

我在同一字符串上使用 json_encode 两次的 php 代码错误。

# shell - Linux shell 脚本：grep 在 for 循环中不起作用

> ID：10263769
> 
> 赞同：0
> 
> 时间：2012-04-21T22:57:39.103
> 
> 标签：shell, for-loop, grep

当我在 TEST（第 18 行）中使用 grep 时，它可以完美运行。当我执行完全相同的命令，但在 for 循环内（第 40 行）时，它不起作用。为什么？我已经在这个问题上绞尽脑汁太久了。

```
#!/bin/bash
clear           

sourcelist=`ls *.c`
headerlist=`ls *.h`
FILE="headers.txt"

TEST="receive_elevator_data" #this is one typical entry in headers.tex
echo "TEST"
grep $TEST *.c -n

MODE="h"

if [ "$MODE" = "h" ]
then
echo "Searching.."
#for entry in $(cut -f 1 $FILE)
for entry in `cat $FILE`
    do
    echo "Looking at entry in $FILE: "
    echo $entry
    echo "Press any button to search, <s> for skip, <e> to exit"
    read -e INPUT2
    if [ "$INPUT2" = "s" ]
    then
        continue
    fi
    if [ "$INPUT2" = "n" ]
    then
        exit 1 #exit shell script
    else
        grep -n "${entry}" ${sourcelist}
    fi
done
fi 
```

澄清一下：headers.txt 中的每一行都有类似“test”的字符串，即行中没有空格。headers.txt 真正包含的是从 C 项目中的所有头文件中提取的函数名称列表 :) 在我之前的代码中没有返回错误，只是循环中的 grep 命令无法运行。我想要做的是在headers.txt中搜索每个函数的所有C文件，并在每次搜索前提示我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T23:11:38.873

`grep`可能会失败，因为文件名包含空格。

不要使用大写字母 vars。这些更适合环境使用。
永远不要尝试解析`ls`输出。改用通配符。
如果您正在编写 bash，则更`[[`喜欢`[`.
不要`cat file`阅读它。而是`read`在一个while循环中。
总是引用你的变量。如果分组，它们也更容易找到。
将文件列表视为数组。
如果您必须使用可以嵌套的````prefer ，并且还引用它（ ）`$()``foo="$(cmd ..)"`

```
#!/bin/bash
clear           

sourcelist=(*.c)
headerlist=(*.h)
file="headers.txt"
test="receive_elevator_data" # this is one typical entry in headers.tex
mode="h"

echo "searching test"
grep -n "$test" "${sourcelist[@]}"

if [[ "$mode" == "h" ]]; then
    echo "Searching.."
    while read -r entry; do
        printf "Looking at entry in %s: %s\n" "$file" "$entry"
        read -p "Press any button to search, <s> for skip, <e> to exit" -e answer
        [[ "$answer" = "s" ]] && continue
        [[ "$answer" = "e" ]] && exit 1 # exit shell script
        grep -n "$entry" "${sourcelist[@]}"
    done < "$file"
fi 
```

# mysql - 计算至少有一个关联项的行数

> ID：10263771
> 
> 赞同：0
> 
> 时间：2012-04-21T22:57:50.447
> 
> 标签：mysql, sql

我有三张桌子：

*   `sales`，这是从商店购买的
*   `items`，这是商店携带的所有物品
*   `sale_items`，与该销售`sales`中的`items`购买相关联。所以一行 in`sale_items`有 a`sale_id`和 a `item_id`。

`sales`找到所有包含`sale_item`与给定对应的所有内容的最有效方法是`item`什么？

我的第一个猜测是

```
select sale_id, item_id, count(*)
from sales as s
join sale_items as si on si.sale_id=s.id
group by item_id
order by count(*) desc 
```

但是，如果一个给定的`sale`有多个`sale_items`相同的`item`，那就`sale`被计算多次。那不是我想要的——我只想数`sales`自己。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T23:07:12.980

听起来您想查找包含特定商品的销售数量：

```
SELECT count(distinct(sale_id)) FROM sale_items
WHERE item_id='<your_item_id>' 
```

# php - 如何将 PHP 表达式分配给 JavaScript 变量？

> ID：10263775
> 
> 赞同：1
> 
> 时间：2012-04-21T22:58:10.597
> 
> 标签：php, javascript, jquery

我知道这似乎是一个愚蠢的问题，但我收到了 synatx 错误`var imagename = ;`。在下面的代码中。

```
 var imagename = <?php if (isset($_SESSION['imagename'])) echo json_encode($_SESSION['imagename']); ?>; 
```

var imagename 是一个 javascript 变量，但为什么会出现此错误？是不是因为；是在错误的地方还是我搞砸了；还是我添加了很多；。我似乎无法弄清楚。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T23:00:40.500

您没有 else 子句，因此如果未设置该会话变量，您最终会生成空分配。

```
var imagename = <?php if (isset($_SESSION['imagename'])) { echo json_encode($_SESSION['imagename']); } else { echo "''"; } ?>; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T23:02:48.657

也许您正在寻找这样的东西：

```
var imagename = <?php echo json_encode(isset($_SESSION['imagename']) ? $_SESSION['imagename'] : null); ?> 
```

有关三元运算符如何工作的更多信息，请参阅[http://php.net/ternary#language.operators.comparison.ternary](http://php.net/ternary#language.operators.comparison.ternary)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T23:01:00.467

错误可能在`$_SESSION['imagename']`不存在时发生。当发生这种情况时，您应该添加一个 else 子句。

# android - RadioGroup 调用 onCheckChanged() 三次

> ID：10263778
> 
> 赞同：25
> 
> 时间：2012-04-21T22:58:37.257
> 
> 标签：android, radio-button, radio-group

我一直在努力解决位于 RadioGroup 中的 RadioButton 的编程检查问题。似乎一次`check()`调用会引发三个事件 - 第一个 RadioButton 一次，第二个 RadioButton 两次，这是我的目标。同时点击界面中的第二个 RadioButton 只会出现一个事件，这是正确的。

那么，有没有办法避免多个事件引发？

```
public class RadiogroupActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        RadioGroup r = (RadioGroup) findViewById(R.id.radioGroup1);
        RadioButton b = (RadioButton) findViewById(R.id.radio1);
        r.setOnCheckedChangeListener(onPromobuttonsClick);
        r.check(R.id.radio1);

    }

    private OnCheckedChangeListener onPromobuttonsClick = new OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(RadioGroup group, int checkedId) {
            Log.d("x", "x");
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-04-21T23:45:23.977

> 那么，有没有办法避免多个事件引发？

`b.setChecked(true);`改为打电话。

* * *

快速浏览[源代码](http://www.grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/widget/RadioGroup.java#RadioGroup.check%28int%29)确认`RadioGroup#check()`确实确实调用了 OnCheckChangedListener 三次......

1.  当前选择未选中时，
2.  当新的 RadioButton 被选中时，并且
3.  当 RadioGroup 保存现在检查哪个 RadioButton 时。

*奇怪的怪癖。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-05T06:45:13.623

只需在方法中发布您的`r.setOnCheckedChangeListener(onPromobuttonsClick);`线路。`onResume()`它对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-13T19:07:19.793

当我想记录单选按钮按下的分析时，我遇到了这个问题，但是处理单选组呼叫的方式`.check()`导致`onCheckedChangeListener`被多次调用（发送了太多事件）。

我通过以下方式处理它，每次点击只获得一个事件：

```
// create listeners so we don't duplicate the creation in for loop
View.OnClickListener onClickListener = new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        // whatever you want to do here
    }
};

// add on click listener to all radio buttons
int buttonCount = buttonGroup.getChildCount();
for (int i = 0; i < buttonCount; i++) {
    if (buttonGroup.getChildAt(i) instanceof RadioButton) {
        buttonGroup.getChildAt(i).setOnClickListener(onClickListener);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-13T18:10:07.783

所以这是一个旧的，但我也有类似的行为。我发现的一种解决方法是调用`toggle()`方法`RadioButton`而不是`check()`方法`RadioGroup`。

所以在这个例子中，你只需要交换

```
r.check(R.id.radio1); 
```

和

```
b.toggle(); 
```

因为`b`已经是 id 的视图`R.id.radio1`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-05T19:20:37.767

这是一个老问题，但我还没有找到涵盖我的问题的完整答案。但是感谢#Hellojeffy 的建议，我想出了一种方法来处理 RadioButton 在使用`setOnCheckedChangeListener()`. 这个想法是在每个视图上添加一个点击`RadioGroup`并在点击时触发一个事件，而不是在检查更改时触发一个事件。

```
for (child in radioButtonGroup.children) {
            if (child is RadioButton) {
                when (child.id) {
                    R.id.rb1 -> child.setOnClickListener { onRb1Click(...) }
                    R.id.rb2 -> child.setOnClickListener { onRb1Click(...) }
                    R.id.rb3 -> child.setOnClickListener { onRb1Click(...) }
                        ...
                }
            }
        } 
```

# c# - 在不同的内容控件中查找 ListView、DataPager、ObjectDataSource

> ID：10263779
> 
> 赞同：1
> 
> 时间：2012-04-21T22:58:37.900
> 
> 标签：c#, asp.net, listview, objectdatasource, findcontrol

我发现很少有事情像试图在不同的内容控件中找到我的 ASP .NET 控件一样令人沮丧。对于布局，我需要将 ListView 放置在一个内容控件中，将 DataPager 和 ObjectDataSource 放置在不同的内容控件中。

```
<asp:Content ID="cPagedContent" ContentPlaceHolderID="cphPagedContent" runat="Server">
<asp:MultiView ID="mvPagedContent" runat="server">
    <asp:View ID="mvPagedContentDefault" runat="server">
        <asp:ListView ID="lvPagedContent" runat="server" ItemPlaceholderID="itemPlaceholder">
            <LayoutTemplate>
                <asp:PlaceHolder ID="itemPlaceholder" runat="server" />
            </LayoutTemplate>
            <ItemTemplate>
                <div class="hp-post-even">
                    <h2>
                        <a href="<%# Eval("QuickLink") %>">
                            <%# Eval("Title") %></a></h2>
                    <p>
                        <%# Eval("Html") %></p>
                </div>
            </ItemTemplate>
            <AlternatingItemTemplate>
                <div class="hp-post">
                    <h2>
                        <a href="<%# Eval("QuickLink") %>">
                            <%# Eval("Title") %></a></h2>
                    <p>
                        <%# Eval("Html") %></p>
                </div>
            </AlternatingItemTemplate>
        </asp:ListView>
    </asp:View>
    <asp:View ID="mvPagedContentTaxonomy" runat="server">
    </asp:View>
    <asp:View ID="mvPagedContentSearch" runat="server">
    </asp:View>
</asp:MultiView>
</asp:Content>
<asp:Content ID="cAboveFooter" ContentPlaceHolderID="cphAboveFooter" runat="Server">
<asp:MultiView ID="mvPager" runat="server">
    <asp:View ID="mvPagerDefault" runat="server">
        <asp:DataPager ID="dpContentPager" runat="server"
            PageSize="6">
            <Fields>
                <asp:NextPreviousPagerField ButtonType="Link" FirstPageText="[First]" PreviousPageText="[Prev]"
                    ShowNextPageButton="false" ShowLastPageButton="false" RenderDisabledButtonsAsLabels="true"
                    ShowFirstPageButton="true" />
                <asp:NumericPagerField ButtonCount="4" />
                <asp:NextPreviousPagerField ButtonType="Link" ShowFirstPageButton="false" ShowPreviousPageButton="false"
                    NextPageText="[Next]" LastPageText="[Last]" RenderDisabledButtonsAsLabels="true"
                    ShowLastPageButton="true" />
            </Fields>
        </asp:DataPager>
        <asp:ObjectDataSource ID="odsContent" runat="server" EnablePaging="true" MaximumRowsParameterName="maximumRows"
            SelectCountMethod="GetContentCount" SelectMethod="GetContent" StartRowIndexParameterName="startRowIndex" />
    </asp:View>
    <asp:View ID="mvPagerTaxonomy" runat="server">
    </asp:View>
</asp:MultiView>
</asp:Content> 
```

在我的 C# 文件中，我可以找到 ListView 控件。但我似乎找不到与 ListView 关联的 DataPager 和 ObjectDataSource。

这是 Page_Load 的一个片段。

```
 ListView listView;
    ObjectDataSource objectDataSource;
    DataPager dataPager;

    listView = mvPagedContentDefault.Controls[0].FindControl("lvPagedContent") as  ListView;

    objectDataSource = mvPagerDefault.Controls[0].FindControl("odsContent") as ObjectDataSource;
    objectDataSource.TypeName = this.GetType().AssemblyQualifiedName;
    listView.DataSourceID = objectDataSource.ID;

    dataPager = mvPagerDefault.Controls[0].FindControl("dpContentPager") as DataPager;
    dataPager.PagedControlID = listView.ID; 
```

关于如何找到这些吸盘的任何想法？这让我有点发疯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T23:13:39.233

我不明白问题出在哪里。你有对`MultiView`控件的引用，不是吗？它有一个属性，它返回MultiView 控件中的控件[`Views`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.multiview.views.aspx)集合。和都在第一个视图中`View`。`DataPager``ObjectDataSource`

```
var dpContentPager = (DataPager)mvPager.Views[0].FindControl("dpContentPager");
var odsContent = (ObjectDataSource)mvPager.Views[0].FindControl("odsContent"); 
```

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datapager.pagedcontrolid.aspx)：

> 使用 PagedControlID 属性指定包含将由 DataPager 控件分页的数据的控件的 ID。**指定的控件**必须实现 IPageableItemContainer 接口，并且**必须使用与 DataPager 控件相同的命名容器**。您可以指定的控件示例是 ListView 控件。

您可以尝试创建一个自定义寻呼机，该寻呼机继承自`DataPager`which overrides`FindPageableItemContainer`以查找 ListView，即使它位于不同的 NamingContainer 中。

看看这里：[http ://forums.asp.net/t/1458342.aspx/1](http://forums.asp.net/t/1458342.aspx/1)

# c# - C#中的可变长度数组

> ID：10263780
> 
> 赞同：1
> 
> 时间：2012-04-21T22:58:38.057
> 
> 标签：c#, arrays

我有一个类，它定义了几个全局变量，如下所示：

```
namespace Algo
{
    public static class AlgorithmParameters
    {
        public int pop_size = 100;

    }
} 
```

在我的另一个 csharp 文件中，它也包含 main()，并且在 main() 中，我将类型结构的数组和数组大小声明为 pop_size，但我在`"chromo_typ Population[AlgorithmParameters.pop_size];"`. 请在下面找到代码。我是否对可变长度大小的数组声明使用了不正确的语法？

```
namespace Algo
{
    class Program
    {
        struct chromo_typ
        {
            string   bits;  
            float    fitness;

            chromo_typ() {
                bits = "";
                fitness = 0.0f;
            }

            chromo_typ(string bts, float ftns)
            {
                bits = bts;
                fitness = ftns;
            }
        };

        static void Main(string[] args)
        {

            while (true)
            {
                chromo_typ Population[AlgorithmParameters.pop_size];
            }
        }
    }
} 
```

错误是：

```
Bad array declarator: To declare a managed array the rank specifier precedes the variable's identifier. To declare a fixed size buffer field, use the fixed keyword before the field type.

Array size cannot be specified in a variable declaration (try initializing with a 'new' expression) 
```

请帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T23:04:04.917

声明变量时不指定大小，而是在创建数组实例时指定它：

```
chromo_typ[] Population = new chromo_typ[AlgorithmParameters.pop_size]; 
```

或者，如果您将声明和创建分开：

```
chromo_typ[] Population;
Population = new chromo_typ[AlgorithmParameters.pop_size]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T23:05:10.487

以这种方式更改初始化：

```
 //while (true) ///??? what is the reason for this infinite loop ???
        //{ 
            chromo_typ[] Population = new chrom_typ[AlgorithmParameters.pop_size] ; 
        //} 
```

您还需要将 pop_size 更改为静态，因为在静态类中声明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T23:16:17.017

不知道为什么你必须使用一段时间（真）

但无论如何，要声明数组，您必须这样做：

```
chromo_typ[] Population = new chromo_typ[AlgorithmParameters.pop_size]; 
```

而且您还必须在 AlgorithmParameters 中将成员 pop_size 声明为静态

```
public static class AlgorithmParameters
{
     public static int pop_size = 100;
} 
```

# java - 解释字节码与编译字节码？

> ID：10263782
> 
> 赞同：8
> 
> 时间：2012-04-21T22:58:58.613
> 
> 标签：java, jvm, jit, jvm-hotspot

我遇到了一些关于 JVM/JIT 活动的参考资料，其中编译字节码和解释字节码之间似乎存在区别。特定注释说明的字节码在前 10000 次运行中被解释，然后被编译。

“编译”和“解释”字节码有什么区别？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-21T23:01:44.340

解释字节码基本上是逐行读取字节码，不做优化什么的，实时解析执行。由于多种原因，这明显是低效的，包括 Java 字节码不是为快速解释而设计的问题。

编译方法时，JIT 会加载整个方法并生成本机代码以直接在 CPU 上运行，而不是逐行读取和解释字节码。方法编译一次后，每次调用该方法时直接使用生成的原生代码。这在天文数字上更快，但在编译方法时会产生一些开销；除其他外，JVM 只负责编译频繁调用的方法，以最大限度地减少开销，同时最大限度地提高被极其频繁地调用的“紧密内循环”代码的性能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T23:01:00.067

当字节码被插入时，它是通过 JVM 解释器执行的，而不是直接在处理器上执行，当它被编译时，它被编译成本地机器语言并直接在 CPU 上执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T23:01:53.000

JVM 有 Just In Time（JIT 编译器）；重复的部分代码可能会被编译成本地汇编代码以加快速度。

请注意，更改仅在 JVM 中完成，类​​（jar/war）文件不会更改并保留为字节码。

# coldfusion - 如何编写检查某个页面的 Coldfusion if 子句？

> ID：10263783
> 
> 赞同：0
> 
> 时间：2012-04-21T22:59:08.753
> 
> 标签：coldfusion, if-statement

我正在尝试编写一个通用的 COLDFUSION 页眉模板，我想将其包含在每个页面上

```
 <CFINCLUDE TEMPLATE="pageheader.cfm"> 
```

在模板中，我需要根据我所在的页面进行一些切换。例如，我只想在*product.cfm*页面上使用**products.css 。**

 *由于这是我使用 Coldfusion 的第一天，并且我正在从一个没有任何页面依赖开关的演示中工作，有人可以告诉我如何设置这样的东西：

```
<CFIF I'm on page products.html>
      <link rel="stylesheet" type="text/css" src="products.css" />
</CFIF> 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T23:16:30.153

尝试这个

```
<cfif listlast(cgi.script_name,"/") EQ "product.cfm">
    <link rel="stylesheet" type="text/css" src="products.css" />
</cfif> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T23:28:15.983

更好的选择是在 products.cfm 页面上使用[cfhtmlhead](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7ae9.html)。

```
<cfhtmlhead text='<link rel="stylesheet" type="text/css" src="products.css" />'> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T18:51:13.780

这也很好用......

```
 <cfif #cgi.PATH_INFO# CONTAINS 'products.html'>
 <link rel="stylesheet" type="text/css" src="products.css"> 
 </cfif> 
```*

# django - 为什么编写我自己的 MiddleWare 会使我的 Django 应用程序崩溃？

> ID：10263784
> 
> 赞同：0
> 
> 时间：2012-04-21T22:59:12.910
> 
> 标签：django, django-middleware

我想在我的应用程序中的任何视图加载之前运行一个函数，所以我编写了自己的中间件。它位于文件夹“my_app_name”中一个名为“DoBeforeMiddleWare.py”的文件中，现在看起来像

```
class DoBeforeMiddleWare:
    def process_request(self, request):
        return None
    def process_view(self, request, view_func, view_args, view_kwargs):
        return None 
```

我尝试将此函数放在 settings.py 中的中间件列表中：

```
MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'my_project_name.my_app_name.DoBeforeMiddleWare',
) 
```

但是，我重新启动乘客后，我的应用程序永远不会加载。为什么？如果我注释掉 |MIDDLEWARE_CLASSES| 的最后一行，我的应用程序就会加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T23:45:18.290

`process_request`并且`process_view`必须返回`None`一个`HttpResponse`对象（[reference](https://docs.djangoproject.com/en/dev/topics/http/middleware/?from=olddocs#writing-your-own-middleware)）。如果你想要一个 no-op 中间件，你应该将它们更改为返回 None，如下所示：

```
class DoBeforeMiddleWare:
    def process_request(self, request):
        return None
    def process_view(self, request, view_func, view_args, view_kwargs)
        return None 
```

# php - 修改了 Wordpress 功能以在标题的第一个单词周围放置一个 Span？

> ID：10263792
> 
> 赞同：1
> 
> 时间：2012-04-21T23:00:45.620
> 
> 标签：php, wordpress, preg-replace

我正在尝试使用在 Wordpress 网站中每个帖子标题的第一个单词周围添加“跨度”的功能，并发现[了这个非常相似](https://stackoverflow.com/questions/3507003/how-do-you-write-a-wordpress-function-to-put-a-span-around-the-first-word-of-the)的问题。当 H2 元素中有链接时，第二个答案中的函数可以正常工作。

但是在我的网站中，我没有使用帖子标题作为链接，因此找到的解决方案不起作用。我试图想出一个新的 preg-replace 模式，以跳过对链接部分的检测，但一直没能得到它。

基本上，我想要这个：

```
<h2><?php the_title(); ?></h2> or <h2>Converted post title</h2> 
```

...变成这样：

```
<h2><span>Converted</span> post title</h2> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T23:09:17.140

你可以使用这样的东西：

```
<?php
$title = get_the_title();
if(substr($title,0)>-1){
    $first_word = substr($title,0,strpos($title," "));
    $after_that = substr($title,strpos($title," ")+1);
}else{
    $first_word = $title;
    $after_that = "";
}
echo "<span>".$first_word."</span> " . $after_that;
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T00:04:14.140

使用木压钩和过滤器的最佳方法。这样您就可以使用 the_title() 函数而无需额外的代码。

将此代码放入主题文件夹中的functions.php 中。就这样。

```
 function add_label_to_post_title( $title = '' ) {
       if(trim($title) != "")
       {
      $ARR_title = explode(" ", $title);

      if(sizeof($ARR_title) > 1 )
          {
             $first_word = "<span>".$ARR_title['0']."</span>";
             unset($ARR_title['0']);
             return $first_word. implode(" ", $ARR_title);
          }
          else
          {
              return "<span>{$title}</span>";
          }
       }
       return $title;
}
add_filter( 'the_title', 'add_label_to_post_title' ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T23:48:03.563

我建议你在 javascript 中这样做，这样你就可以减少服务器的处理/cpu 使用。你仍然会得到相同的结果。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js" type="text/javascript"></script>

<script type="text/javascript">
    $(function() {
        $('h2.title').each( function (){
            var obj_h2 = $(this);
            var h2_title = obj_h2.html();
            var words = h2_title.split(' ');
            words[0] = '<span>' + words[0] + '</span>'

            obj_h2.html( words.join( ' ' ) );
        } );
    });
</script> 
```

[https://gist.github.com/2440296#file_h2_span1stw_2.htm](https://gist.github.com/2440296#file_h2_span1stw_2.htm)

*以前的代码版本.. [https://gist.github.com/2440296#file_h2_span1stw.htm](https://gist.github.com/2440296#file_h2_span1stw.htm) http://jsbin.com/uguhel/edit#html,live

# windows - 阿帕奇端口问题

> ID：10263793
> 
> 赞同：1
> 
> 时间：2012-04-21T23:00:45.883
> 
> 标签：windows, apache, xampp, port

我已经为 Windows 7 安装了 XAMPP 并收到此错误：

*端口 80 或 443 (ssl) 已在使用中安装 apache2.2 服务失败*

我在哪里可以看到哪些程序使用这些端口？

我已经检查了我的 Skype 设置并禁用了端口 80 和 443 的使用作为替代，但这些端口仍在使用中。

我也安装了：

*   微软视觉工作室 2010
*   MS SQL 管理工作室

可能是由于这些问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T23:05:32.180

您可以使用该`netstat`命令来找出答案。

BSD netstat 作为 Windows 的一部分提供。打开`cmd.exe`并输入`netstat -an`。

可从此页面获得命令帮助：http: [//www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/netstat.mspx?mfr=true](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/netstat.mspx?mfr=true)

HTH。

# iphone - 在运行时重新加载自定义 UITableViewCell 的 Nib

> ID：10263797
> 
> 赞同：0
> 
> 时间：2012-04-21T23:01:08.303
> 
> 标签：iphone, ios, uitableview, xib, nib

您好，我有两个自定义 UITableViewCell 笔尖，我让用户可以选择在设置中选择什么类型的笔尖，我以这种方式初始化自定义视图单元：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier = @"MasterViewCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    [[NSBundle mainBundle] loadNibNamed:[[NSUserDefaults standardUserDefaults] valueForKey:@"CustomCellViewKey"] owner:self options:nil];

    cell = customCell;
    self.customCell = nil;

}

 return cell;
} 
```

如您所见，我将用户的选择保存在作为 xib 名称的 NSUserDefaults 中，但是当我返回视图时，单元格视图没有更改，我必须退出应用程序，关闭应用程序背景，然后重新打开它，以及它加载的新视图，所以有一种方法可以在不退出应用程序的情况下重新加载我的视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T23:18:12.523

因此，NSUserDefaults 的工作方式是，即使您使用 setValue:forKey: （或其他 setter 便利方法之一），它实际上也不会立即被写出。操作系统尝试通过仅在一段时间后、应用程序退出等时才这样做来优化该 plist 的保存。在此之前，您设置的值只是被缓存以防止操作系统必须打开和关闭数据库无数次。因此，当您尝试获取单元格的值时，它会进入数据库并检索可能是旧值的值。当你退出应用程序时，NSUserDefaults 会写出你设置的新值，当你回来时，你会得到正确的值。

要“强制” NSUserDefaults 立即写入数据库，请尝试`synchronize`在根据用户输入设置值后立即调用。这将写入数据库，所以当你调用你的 valueForKey: 方法时，你应该得到正确的东西。

***更新：***我还将重组此方法的逻辑流程。首先，如果您从两个不同的 nib 中卸载两个单元，它们需要两个不同的重用标识符。否则，您的 tableview 会在真正需要 cell2 时寻找 cell1 以重用。尝试这样的事情：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSString *nibName = [[NSUserDefaults standardUserDefaults] valueForKey:@"CustomCellViewKey"];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:nibName];

    if (!cell) {
        NSArray *nibArray = [[NSBundle mainBundle] loadNibNamed:nibName owner:self options:nil];
        for (id obj in nibArray) {
            if ([obj isKindOfClass:[UITableViewCell class]]) {
                cell = obj;
                break;
            }
        }
    }
} 
```

# perl - Net::FTP 无法连接到某些主机

> ID：10263802
> 
> 赞同：0
> 
> 时间：2012-04-21T23:01:49.130
> 
> 标签：perl

我不确定这里有什么问题，因为在 10 台服务器中，有 2 台给了我错误：

> 无法连接到 sun09 : Net::FTP: Bad hostname 'sun09:' at deploy_update.pl 第 204 行。

奇怪的是，以下代码提取在循环内工作，适用于某些服务器，但对于`sun09`我无法连接的服务器。

```
$ftp = Net::FTP->new("$hostname:$ftp_port",  Debug => 0)
or die "Cannot connect to $hostname : $@";
$ftp->login($iLogin,$iPass)
or die "failed ", $ftp->message;
$ftp->binary()
or die "Cannot set to Binary";
$ftp->delete("/admin/replicate/inbound/$file");
#or warn $ftp->message;
$ftp->cwd("/admin/replicate/inbound")
or die "Cannot change working directory ", $ftp->message;
$ftp->put("$file")
or die "Upload Failed ", $ftp->message;
$ftp->quit; 
```

这适用于 10 台服务器中的 8 台，但不适用于`sun08`and `sun09`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T23:09:05.100

这些主机看起来`$ftp_port`是空的；如果要使用默认端口，则应完全省略冒号。

# c - C：结构中的动态 int 数组 - 内存释放

> ID：10263804
> 
> 赞同：0
> 
> 时间：2012-04-21T23:02:01.000
> 
> 标签：c, arrays, dynamic, struct

我正在研究一个涉及动态分配的二维结构数组的项目。在这些结构中的每一个内部都是一个动态分配的整数数组。该程序执行得很好，但是当我的数组的第二维有多个成员时需要清理时，我收到此错误：

```
*** glibc detected *** cache: double free or corruption (out): 0x0000000009f172f0 *** 
```

后面有一个冗长的回溯和内存映射，如果有帮助，我很乐意提供。这是我的分配和释放代码的样子： 这是块结构中的内容：

```
typedef struct blockStruct {
  int valid;
  int tag;
  int dirty;
  int mru;
  int* data;
} block; 
```

分配：当 blocksPerSet 大于 1 时，解除分配失败。

```
 /* Make cache */
  block** cache;
  cache = malloc(numberOfSets * sizeof(block*));
  for (i = 0; i < numberOfSets; i++) {
    cache[i] = malloc(blocksPerSet * sizeof(block));
  }
  int j = 0;
  for (i = 0; i < numberOfSets; i++) {
    for (j = 0; j < blocksPerSet; j++) {
      cache[i][j].valid = 0;
      cache[i][j].data = malloc(blockSizeInWords*sizeof(int));
      cache[i][j].mru = 0;
    }
  } 
```

重新分配：

```
 for (i = 0; i < numberOfSets; i++) {
    for (j = 0; j < blocksPerSet; j++) {
      free(cache[i][j].data);
    }
    free(cache[i]);
  }
  free(cache); 
```

提前致谢。

编辑：我将问题缩小到两个功能之一。它们是 saveToCache 和 loadToCache，在功能上非常相似。主函数是一个循环，它总是先调用 loadToCache，然后可能调用 saveToCache 或调用 loadToCache。如果我注释掉这两个调用之一，无论是哪一个，我都不会收到任何错误。

EDIT2：我还意识到，只有在使用 loadToCache 之前使用 saveToCache 才会发生错误。

```
int saveToCache(block** cache, int blockSizeInWords, int numberOfSets,
            int blocksPerSet, stateType* statePtr, int address,
            int saveData)

  int setNumber = (address / blockSizeInWords) % numberOfSets;
  int targetTag = address / blockSizeInWords / numberOfSets;
  int offset = address % blockSizeInWords;
  int blockStart = address / blockSizeInWords * blockSizeInWords;
  int i = 0;
  /* If a hit is found, set MRU and return */
  for (i; i < blocksPerSet; i++) {
    if (cache[setNumber][i].valid == 1) {
      if (cache[setNumber][i].tag == targetTag) {
        cache[setNumber][i].mru = 1;
        cache[setNumber][i].data[offset] = saveData;
        cache[setNumber][i].dirty = 1;
        printAction(address, 1, processorToCache);
        return cache[setNumber][i].data[offset];
      }
    }
  }
  int j;
  /* Find out if there is an empty space.  If so, allocate and return */
  for (i = 0; i < blocksPerSet; i++) {
    if (cache[setNumber][i].valid == 0) {
      cache[setNumber][i].valid = 1;
 cache[setNumber][i].tag = targetTag;
      cache[setNumber][i].dirty = 1;
      cache[setNumber][i].mru = 1;
      for (j = 0; j < blockSizeInWords; j++) {
         cache[setNumber][i].data[j] = (*statePtr).mem[blockStart + j];
      }
      printAction(blockStart, blockSizeInWords, memoryToCache);
      cache[setNumber][i].data[offset] = saveData;
      printAction(address, 1, processorToCache);
      return cache[setNumber][i].data[offset];
    }
  }
  int allMRUSet = 1;
  /* Find LRU and replace */
  int evictedAddress;
  for (i = 0; i < blocksPerSet; i++) {
    /* Save back to memory if block is dirty */
    if (cache[setNumber][i].mru == 0) {
      evictedAddress = blockSizeInWords * (setNumber + cache[setNumber][i].tag
                                       * numberOfSets);
      if (cache[setNumber][i].dirty == 1) {
        for (j = 0; j < blockSizeInWords; j++)
          (*statePtr).mem[blockStart + j] = cache[setNumber][i].data[j];
         printAction(evictedAddress, 1, cacheToMemory);
      }
      else
        printAction(evictedAddress, 1, cacheToNowhere);
      cache[setNumber][i].valid = 1;
      cache[setNumber][i].tag = targetTag;
      cache[setNumber][i].dirty = 1;
      cache[setNumber][i].mru = 1;
      for (j = 0; j < blockSizeInWords; j++) {
        cache[setNumber][i].data[j] = (*statePtr).mem[blockStart + j];
      }
      printAction(blockStart, blockSizeInWords, memoryToCache);
      cache[setNumber][i].data[offset] = saveData;
      /* Check if all MRU blocks are set.  If yes, unset all. */
      for (j = 0; j < blocksPerSet; j++) {
        if (cache[setNumber][j].mru == 0)
          allMRUSet = 0;
      }
      if (allMRUSet == 1) {
        for (j = 0; j < blocksPerSet; j++) {
          cache[setNumber][j].mru = 0;
          }
        /* Re-set most recently used block */
        cache[setNumber][i].mru = 1;
      }
      printAction(address, 1, processorToCache);
      return cache[setNumber][i].data[offset];
    }
  }
  /* If we get this far, all MRU bits are set.  Un-set all of them. */
  for (i = 0; i < blocksPerSet; i++) {
    cache[setNumber][i].mru = 0;
  }
  /* Place data in item 0 of set and set MRU */
  /* Save back to memory if block is dirty */
  evictedAddress = blockSizeInWords * (setNumber + cache[setNumber][0].tag
                                           * numberOfSets);
  if (cache[setNumber][0].dirty == 1) {
        for (j = 0; j < blockSizeInWords; j++)
          (*statePtr).mem[blockStart + j] = cache[setNumber][0].data[j];
        printAction(evictedAddress, 1, cacheToMemory);
      }
  else
    printAction(evictedAddress, 1, cacheToNowhere);
  cache[setNumber][0].valid = 1;
  cache[setNumber][0].tag = targetTag;
  cache[setNumber][0].dirty = 1;
  cache[setNumber][0].mru = 1;
  for (i = 0; i < blockSizeInWords; i++) {
    cache[setNumber][0].data[i] = (*statePtr).mem[blockStart + j];
  }
  printAction(blockStart, blockSizeInWords, memoryToCache);
  cache[setNumber][0].data[offset] = saveData;
  printAction(address, 1, processorToCache);
  return cache[setNumber][0].data[offset];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T02:43:18.913

一般来说，一个好的防御性编程技术是在指针不指向任何有效值时将其设置为 0；在分配之前或释放之后。然后，当您希望能够释放它们时，您可以首先检查指针是否非零，或者在您的发布版本中一直检查，或者仅用于开发/调试，例如`assert()`可以将其设置为编译为空。

如果您的程序逻辑不依赖于在释放之前检查指针是否非零，您可以将归零包装在宏或常量变量检查中，以便您可以在发布构建时将其关闭，作为优化。

例如

```
#define DEBUG_FREE 1

assert(ptr);
free(ptr);
if (DEBUG_FREE)
  ptr = 0; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-22T02:23:48.560

您发布的代码中没有错误立即跳出我，但您没有显示 a`stateType`是什么，所以这让我想知道通过检查 to/from 的副本是否可以找到一些东西`(*statePtr).mem[]`。用完 malloc 的空间确实会导致在释放空间时出现故障。

无论如何，如果您仍然没有发现问题，这里有三种简单的方法：

1.  使用[valgrind](http://valgrind.org/gallery/linux_mag.html)。它的安装和使用非常快速和容易，非常适合内存泄漏、双重释放等。
2.  在函数中添加断言，例如`saveToCache()`确认您计算到缓存中的索引是否在预期范围内。
3.  如果上面没有找到问题，请打破其他内存调试工具，如设置`MALLOC_CHECK_=1`或使用`libsafe`，如[这篇好文章](http://www.linuxjournal.com/article/4681)中所述。

（我在某种程度上假设了 Linux 环境，但我上面写的大部分内容都适用于其他环境。）

# php - 使用 Javascript 添加选择框；到由 PHP 填充的 html 表单

> ID：10263807
> 
> 赞同：1
> 
> 时间：2012-04-21T23:03:10.207
> 
> 标签：php, javascript, mysql, html, drop-down-menu

一个写得不好的问题，但基本上我有一个表格供用户将他们的值添加到数据库中。其中一个字段需要一个下拉框，其中填充了我的数据库字段中的值。然而，用户可能希望拥有多个选择框（所有下拉选择都需要发布到同一个数据库字段）。

```
<form method="POST" action="addcocktail.php" >
                    <tr><td>Cocktail Name: </td><td><input type="text" name="cocktailname" /> </td></tr>
                    <tr><td>Ingredients: </td><td><input type="text" name="ingredients" /> </td></tr>
                    <select name="ingredientselect"> 
                    <option value="" selected="selected">Ingredient</option>
                    <option value="" selected="selected">Ingredient</option>
                    </select>
                    <input type="button" id="addingred" onclick="addTextboxes();" value="Add Ingredient">
                    <tr><td>How To: </td><td><input type="text" name="howto" /> </td></tr>
                <input type="submit" value="add" />
                </form> 
```

**我需要一个 Javascript 函数，它基本上会复制我的选择选项之一，因此用户可以选择他们想要多少“成分”；点击按钮。（我一直在玩 addElement 但无济于事）**

**而且我还想知道如何将数据库值直接拉入选择框选项。**

感谢您提供任何帮助，谢谢-Matt

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T23:36:11.767

您的 HTML 代码有一个错误：有`tr`和`td`标签，但没有`table`标签。以下是如何获得所需内容的示例：

```
<script type="text/javascript">

function addTextboxes() {
  var cont = document.getElementById("selects_container");
  cont.innerHTML += document.getElementById("first_select").innerHTML;
}
</script>
...
<div id="selects_container">
  <div id="first_select">
    <select name="ingredientselect[]"> 
      <option value="" selected="selected">Ingredient</option>
      <option value="" selected="selected">Ingredient</option>
    </select>
  </div>
</div>
<input type="button" id="addingred" onclick="addTextboxes();" value="Add Ingredient"> 
```

这种方式并不完美并且存在性能问题，但它很简单。

您应该添加`[]`到选择的名称，然后您可以检索 PHP 中所有选择的值。

另外，我可以建议您不要将选择或选项相乘，而是将选定的值作为文本添加到页面。选择的值可以存储在隐藏`input`标签中并传递给服务器：

```
<script type="text/javascript">
function addTextboxes() {
  var new_value = document.getElementById("the_select").value;
  document.getElementById("selected_values").value += new_value + ",";
  document.getElementById("selected_text").innerHTML += new_value + "<br>";
}
</script>
...
<input id="selected_values" name="selected_values" type="hidden">
<div id="selected_text"></div>
<select name="ingredientselect[]" id="the_select"> 
  <option value="" selected="selected">Ingredient</option>
  <option value="" selected="selected">Ingredient</option>
</select>
<input type="button" id="addingred" onclick="addTextboxes();" value="Add Ingredient"> 
```

在服务器端：

```
$selected_values_array = explode(",", $_POST["selected_values"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T23:16:23.497

您可以使用 Ajax 将数据从服务器拉到客户端并从 JavaScript 创建 SELECT。

在 JavaScript 中有多种方式来构造 SELECT：

*   使用 DOM 方法，比如`document.createElement`与其他选择相比更慢
*   将 SELECT 和 OPTIONS 构造为字符串，然后使用 innerHTML 注入父容器。这在性能上比 DOM 方式更快。

HTH。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T23:26:48.760

要复制一个选项：

> var opt_val = $("select[name=ingredient_select] :selected").val();
> 
> $("select[name=ingredient_select]").append(" `<option value='" + opt_val + "' selected='selected'>Ingredient</option>`")

# ruby-on-rails-3 - 在 mongoid 中设置属性

> ID：10263810
> 
> 赞同：1
> 
> 时间：2012-04-21T23:03:25.230
> 
> 标签：ruby-on-rails-3, mongoid

我正在尝试将属性标志设置为 false，如下所示：

```
Model.where(:s_id => s_id).flag = false 
```

（我有 s_id）但它没有用，这个也没有用：

```
Model.find(s_id).flag = false 
```

有什么帮助吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T23:27:57.980

您的代码的问题是您更改了`flag`属性，但之后没有保存文档。有很多不同的方法可以处理这个问题，其中大部分[在文档的持久性部分中](http://mongoid.org/docs/persistence.html)有详细说明。

如果您只更新一个模型，并且您有 ID，则可以使用以下`update_attribute`方法：

```
Model.find(id).update_attribute(:flag, false) 
```

该`update_attribute`方法更新属性（显然），但随后也调用`save`文档，将更改保存在数据库中。您可以通过以下方式长期实现这一目标：

```
m = Model.find(id)
m.flag = false
m.save 
```

或者，如果您想从标准（如`where`方法）更新一组模型，您可以使用`update_all`：

```
Model.where(:flag => true).update_all(:flag => false) 
```

# asp.net-mvc-3 - AutoMapper 能否通过 BootStrapper(.AutoMapper) 在 Windows Azure 上的 MVC3 应用程序中使用？

> ID：10263811
> 
> 赞同：0
> 
> 时间：2012-04-21T23:03:43.803
> 
> 标签：asp.net-mvc-3, azure, automapper, bootstrapper

我正在尝试将一个相当简单的 MVC3 应用程序部署到 Windows Azure。无论我看起来做什么，我都不会以“健康”的部署结束。所以我安装 VS Ultimate 只是为了尝试访问 InteliTrace，发现找不到 AutoMapper：由于以下异常，无法加载角色入口点：--System.IO.FileLoadException：无法加载文件或程序集'AutoMapper，版本2.0.0.232 ...

现在，我已经绝对确定 AutoMapper 引用设置为复制本地（以及我需要的其他引用）......但仍然没有乐趣。我还下载了部署的网站（从我的 Azure VM）并将其加载到 IIS 中。部署的版本运行良好，包括所有 DLL（AutoMapper、Bootstrapper、Bootstrapper.AutoMapper）。最后，如果我登录到 VM，我实际上可以使用 IE7 浏览器访问在 localhost 上运行的应用程序。

为了让 Azure 认为部署正常，我可能缺少什么？BootStrapper 应用程序是否通过反射加载 AutoMapper 并且找不到 AutoMapper dll？还有其他建议吗？（我计划下载 BootStrapper 代码，看看明天是否会出现问题，但我认为其他人可能会有建议！）

在此先感谢您的任何指示！

阿隆

更新：已解决

# jquery - jquery 仅加载 innerHtml 而不是包装器本身

> ID：10263813
> 
> 赞同：9
> 
> 时间：2012-04-21T23:04:05.237
> 
> 标签：jquery, html, ajax

让我澄清一下我的需求，从标题中可能并不完全清楚。

我在用：

```
$("#content").load("http://example.com/page1.html #content"); 
```

当我查看萤火虫时，我在发生 Ajax 调用的页面上的 #content 中看到了 #content。
所以很明显，我只需要 #content 的内部 html 来加载。用 Jquery 实现这一目标的最优雅的方法是什么。

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-09-13T10:35:28.850

使用#content 上的子选择器( [http://api.jquery.com/child-selector/](http://api.jquery.com/child-selector/) ) 选择#content 的所有(*) 子项。

```
$("#content").load("http://example.com/page1.html #content > *"); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-21T23:06:31.033

可以使用`$.get`

```
$.get('http://example.com/page1.html', function (data) {
    data = $(data).find('#content').html();
    $("#content").empty().append(data);
}); 
```

# ruby-on-rails - 欧姆表和唯一不工作

> ID：10263817
> 
> 赞同：1
> 
> 时间：2012-04-21T23:04:28.287
> 
> 标签：ruby-on-rails, ruby, ohm

文档说欧姆列表被视为 Ruby 数组，但我看到以下问题：

`MyModel.new`在 rails 控制台中产生：

`ArgumentError: wrong number of arguments (1 for 2)`

那是在我有`list :foo`foo 应该是整数数组的地方。

然后，为了跟进，我想创建一个唯一索引，`attribute :bar`当我注释掉 list 方法并添加唯一时，我得到以下信息：

`NoMethodError: undefined method `unique' for MyModel:Class`

这是课程：

```
class MyModel < Ohm::Model
  attribute :email
  list :foo
  unique :email
end 
```

除非我将列表和唯一指令都注释掉，否则整个事情都会崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T00:53:13.367

你在找`assert_unique`吗？

```
class MyModel < Ohm::Model
  attribute :email
  index :email

  def validate
    assert_unique :email
  end
end 
```

# ruby-on-rails - Rails：rake db:create:all 无法连接到 PostgreSQL 数据库

> ID：10263821
> 
> 赞同：6
> 
> 时间：2012-04-21T23:04:48.640
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, postgresql-9.1, rails-postgresql

我正在尝试创建一个使用 PostgreSQL 的 Rails 应用程序。这是我所做的事情的描述。

* * *

**PostgreSQL 设置：**我通过 Martin Pitt 维护的[ppa:pitti/postgresql](https://launchpad.net/~pitti/+archive/postgresql)
安装了 PostgreSQL 9.1.3 。之前安装了 PostgreSQL 8.4；我不确定它是否仍然安装或消失。

*   我向与我的 Ubuntu 帐户同名的数据库添加了一个具有超级用户权限的数据库用户。
*   我用`sudo service postgresql start`.
*   我通过 Gerfried Fuchs 维护的 ppa:rhonda/pgadmin3 安装了pgadmin3 ，[版本](https://launchpad.net/~rhonda/+archive/pgadmin3)[1.14.0 Beta 1 。](http://pgadmin.org)
*   我可以使用我的用户帐户和密码以及端口 5433 通过 pgadmin3 进行连接。

我在*pg_hba.conf*中的 postgres 配置如下（为了便于阅读，删除了注释）。

```
[...]
local   all             postgres                                peer
local   all             all                                     peer
host    all             all             127.0.0.1/32            md5
host    all             all             ::1/128                 md5 
```

* * *

**Rails 设置：**
现在我想创建一个使用 PostgreSQL 的 Rails 应用程序。

*   我通过 RVM 安装了 Ruby 1.9.3-p125。
*   我将 Rails 3.2.3 安装到 Gemset ruby​​-1.9.3-p125@global。
*   我为应用程序创建了一个 .rvmrc 和 Gemset。
*   我通过`rails new my_test_app -d postgresql`.
*   我在*config/database.yml*`user`中配置了名称和用于*development*和*test*并删除了*production*。`password`
****   我在config `host: localhost`/ *database.yml*中进行了配置。`port: 5433`***

 ***这是我的*config/database.yml*的内容（为了便于阅读，删除了注释）。

```
development:
  adapter: postgresql
  encoding: unicode
  database: my_test_app_development
  pool: 5
  username: johndoe
  password: password    
  host: localhost
  port: 5433

test:
  adapter: postgresql
  encoding: unicode
  database: my_test_app_test
  pool: 5
  username: johndoe
  password: password 
```

* * *

**问题：**
但是，当我运行时，`bundle exec rake db:create:all`我收到以下错误消息。

```
could not connect to server: No such file or directory
Is the server running locally and accepting connections on Unix domain socket
"/var/run/postgresql/.s.PGSQL.5432"?
[...]
Couldn't create database for {"adapter"=>"postgresql", "encoding"=>"unicode",
"database"=>"my_test_app_test", "pool"=>5, "username"=>"johndoe",
"password"=>"password"} 
```

* * *

**问题：**
为什么我通过 pgadmin3 成功连接时使用的端口与我使用的端口不同？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-21T23:57:00.247

@Riateche：最后，我看到*测试环境的数据库配置缺少***host**和**port**的显式设置。将设置添加到*测试*环境后，我能够`bundle exec rake db:create:all`成功运行命令。
我必须说，我不喜欢他们为*开发*环境建议这些设置，但没有为其他环境添加它们。正如我所证明的那样，这很可能会错过它们。

```
test:
  adapter: postgresql
  encoding: unicode
  database: my_test_app_test
  pool: 5
  username: johndoe
  password: password
  host: localhost
  port: 5433 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T18:01:44.453

如果任何*psql*客户端会话正在访问 *template1* （例如*psql*或*pgAdmin*）， 则`rake db:migrate` 失败。在执行之前关闭所有会话 `rake db:migrate`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-21T04:44:56.420

您可以将 pg_hba.conf 中的 postgresql 配置更改为信任。

```
[...]
local   all             postgres                                peer
local   all             all                                     trust
host    all             all             127.0.0.1/32            md5
host    all             all             ::1/128                 md5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-20T21:32:01.627

我有同样的问题，我通过运行这个解决方案来解决它

```
pg_ctl -D /usr/local/var/postgres -l /usr/local/var/postgres/server.log start 
```***

# maven - 基于 maven 的多模块 web 应用分发

> ID：10263822
> 
> 赞同：0
> 
> 时间：2012-04-21T23:04:57.873
> 
> 标签：maven, distribution, web-applications

我正在尝试为具有基于 Web 的前端的复杂模拟器开发分发包（请参阅 www.powertac.org）。该模拟器是一个基于 Spring 的应用程序，具有 11 个独立的模块。我们已经[分发了一个“无头”版本](https://github.com/downloads/powertac/powertac-server/powertac-server-0.2.0.tgz)（没有 Web 前端），它允许用户简单地下载 pom.xml 并直接运行服务器 - 如果需要，maven 会下载所有部分，并使用命令调用主类 -行参数。

现在我想分发一个包含模拟器和 Web 应用程序的版本，并且我希望用户拥有相同的体验 - 只需发出一个 maven 命令并让它在 Web 容器中启动和运行。不应该要求用户拥有现有的 jetty 或 tomcat 安装。我试图配置 cargo 插件来做到这一点；它正确下载了 jetty，war 文件似乎包含所有依赖项（在 WEB-INF/lib 下），但它的行为就像依赖项不在类路径中一样。如果有办法让模拟器和war文件的所有依赖项进入码头类路径，我还没有找到。

这有什么诀窍吗？甚至可能吗？

提前致谢！

# php - 极慢的 MySQL 查询

> ID：10263824
> 
> 赞同：3
> 
> 时间：2012-04-21T23:05:05.603
> 
> 标签：php, mysql, performance, optimization

我在 MySQL 中有两个表，table1 有 1,013,347 个实体和 38 个属性，table2 有 7,343,905 个实体和 10 个属性。在下面的查询中（它应该获取分页的行数），table1.ID 是一个 PK，table2.ID 是它的 FK（两者都被索引），如果 HAVING 子句超过一定百分比，则获取该值, 在这种情况下 50%

```
SELECT SQL_CALC_FOUND_ROWS * 
FROM table1 INNER JOIN table2 ON table1.ID = table2.ID 
WHERE table1.attribute1 LIKE 'D%' 
GROUP BY table2.ID 
HAVING (COUNT(table2.ID) * (100/18)) >= '50' 
```

即使在我在这里发布的简化状态下，通过命令行运行此查询也需要不少于 5 分钟。我知道我必须对查询、PHP 代码（通过 PHP 变量分配值“50”和“D”）和/或我的 MySQL 配置进行更改以加快速度（我正在使用具有默认配置的最新 XAMPP）。任何帮助将不胜感激。

EDIT1：所有属性都是 TINYTEXT，除了 ID 属性是 VARCHAR(9)。

EDIT2：解释选择...返回：

```
+----+-------------+--------+------+---------------+-------------+---------+------+---------+---------------------------------+
| id | select_type | table  | type | possible_keys | key         | key_len | ref  | rows    | Extra                           |
+----+-------------+--------+------+---------------+-------------+---------+------+---------+---------------------------------+
|  1 | SIMPLE      | table2 | ALL  | NULL          | NULL        | NULL    | NULL | 7343905 | Using temporary; Using filesort |
|  1 | SIMPLE      | table1 | ref  | ID            | ID          | 29      | func |       1 | Using where                     |
+----+-------------+--------+------+---------------+-------------+---------+------+---------+---------------------------------+
2 rows in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T23:47:02.923

以下是一些潜在的改进：

*   您正在使用 VARCHAR(9) 类型的 ID，并且您正在使用这些字段执行连接。引入整数代理键而不是 varchars 来加速连接可能是个好主意。请参阅[此讨论](https://stackoverflow.com/questions/332300/is-there-a-real-performance-difference-between-int-and-varchar-primary-keys)。
*   LIKE 运算符通常很昂贵。考虑您的使用情况；就像 Marc 建议的那样，您应该索引 table1.attribute1。
*   也许您可以通过完全省略 LIKE 来加快查询速度：例如，您可以使用[RIGHT()](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_right)而不是使用 'D%' ，尽管我不确定它是否会更快。如果表中的数据不经常更改，您可以创建一个新的索引列，其中 table1.attribute1 值的开头是预先切割的；但是，它取决于 php 脚本在 LIKE 之后插入的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T04:17:21.210

提高性能的一些想法

1.  索引 table2.ID（必须）和 table1.ID
2.  如果可能，将 id 列 bigint 和 table1.attribute1 设为 varchar。请注意根据列的假定数据长度为 varchar 列定义适当的大小
3.  而不是在 SQL (100/18) 中进行计算，而是像这样替换它

    HAVING (COUNT(table2.ID) * (5.5555)) >= 50

（由于 table2.ID 现在是一个 bigint，数学比较必须稍微快一些）

如我所见，like 子句在此查询中至关重要，即使 like 很昂贵，如果您也索引 table1.attribute1 会更好。

希望这可以帮助

# php - 使用字符串时，第二个参数的数据类型错误的 in_array() 警告

> ID：10263826
> 
> 赞同：1
> 
> 时间：2012-04-21T23:05:23.933
> 
> 标签：php, arrays, debugging

我使用此代码读取文件，我在 in_array() 上收到错误警告，因为第二个参数的数据类型错误。

```
if (isset($_POST['submit'])) {
  $SongToAdd = stripslashes($_POST['SongName']) . "\n";
  $ExistingSongs = array();

  if (file_exists("SongOrganizer/songs.txt") && filesize("SongOrganizer/songs.txt") > 0) {
    $ExistingSongs = file("SongOrganizer/songs.txt");
  }
}

if (in_array($SongToAdd, $ExistingSongs)) {
  echo "<p>The song you entered already exists!<br />\n";
  echo "Your song was not added to the list.</p>"; 
```

文本文件包含：

```
Bang Bang
Doctor
Hello
Ice Cream Man
Show Me
Doctor 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T23:07:40.610

那么，您的页面第一次加载时呢？如果`$_POST['submit']`未设置，`$ExistingSongs`则为`null`。`in_array`对此抱怨是正确的。

如果您在启用所有错误的情况下进行开发（使用`error_reporting(E_ALL | E_STRICT)`或通过完成），`php.ini`那么您还会收到关于`$ExistingSongs`未定义变量的通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T23:08:23.027

如果`$_POST['submit']`未设置变量，`$ExistingSongs`变量保持未定义，这可能会导致警告。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-21T23:08:14.847

stripslashes 需要一个字符串作为输入，并输出一个字符串： http: [//php.net/stripslashes](http://php.net/stripslashes)

$SongToAdd 在您调用时是一个字符串`in_array()`，因此您的错误。

# javascript - Javascript 表单输入 - GPS - 地理位置

> ID：10263828
> 
> 赞同：6
> 
> 时间：2012-04-21T23:05:26.423
> 
> 标签：javascript, forms, geolocation

我想从用户的设备中获取当前的 GPS 位置，并且基本上将 Lat 和 Long 放入表单字段中。然后我可以在插入位置后做任何事情。

下面的代码适用于弹出警报位置，这是我开始使用的。我希望能够单击一个按钮并将其填充长/纬度到表单字段中。

```
<html> 
<head> 

<script type="text/javascript"> 
function getLocationConstant()
{
  if(navigator.geolocation)
  {
    navigator.geolocation.getCurrentPosition(onGeoSuccess,onGeoFormLat,on GeoFormLong,onGeoError); 
  } else {
    alert("Your browser or device doesn't support Geolocation");
  }
}

// If we have a successful location update
function onGeoSuccess(event)
{
  alert(event.coords.latitude + ', ' + event.coords.longitude);
}

function onGeoFormLat(event)
{
  var myVal;
  myVal = document.getElementById(event.coords.latitude).value;
}

function onGeoFormLong(event)
{
  var myVal;
  myVal = document.getElementById(event.coords.longitude).value;
}

// If something has gone wrong with the geolocation request
function onGeoError(event)
{
  alert("Error code " + event.code + ". " + event.message);
}

// Called when we want to stop getting location updates
function stopGetLocation(event)
{
  navigator.geolocation.clearWatch(watchID); 
}

</script>

</head>
<body>
  <br><br>
  Latitude: <input type="text" id="Latitude" name="onGeoFormLat" value="">
  <br><br>
  Longitude: <input type="text" id="Longitude" name="onGeoFormLong" value="">
  <br>

  <br><br><br>
  <input type="button" value="Get Location" onclick="getLocationConstant()" />
  <br><br>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T15:14:33.337

我的朋友帮了我...这工作 gr8

```
 <script type="text/javascript"> 
 function getLocationConstant()
{
    if(navigator.geolocation)
    {
        navigator.geolocation.getCurrentPosition(onGeoSuccess,onGeoError);  
    } else {
        alert("Your browser or device doesn't support Geolocation");
    }
}

// If we have a successful location update
function onGeoSuccess(event)
{
    document.getElementById("Latitude").value =  event.coords.latitude; 
    document.getElementById("Longitude").value = event.coords.longitude;

}

// If something has gone wrong with the geolocation request
function onGeoError(event)
{
    alert("Error code " + event.code + ". " + event.message);
}
 </script>

 <br><br>
 <cfform action="gps2.cfm" method="post">
 Latitude: <input type="text" id="Latitude" name="Latitude" value="">
 <br><br>
 Longitude: <input type="text" id="Longitude" name="Longitude" value="">
 <br><br>
 <input type="button" value="Get Location" onclick="getLocationConstant()"/>
 <br><br>
 <input type="submit" value="Add GPS Location" class=small>
 </cfform> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-08T05:02:25.880

@Merle_The_Pearl 提供的代码也适用于 OSX 上的 Safari 和 Firefox，但值得注意的例外是，如果用户决定不提供其位置，Firefox 不会调用“onGeoError”。这似乎是 Mozilla 人忽略 W3C 规范的一个不幸的政策决定[https://bugzilla.mozilla.org/show_bug.cgi?id=675533](https://bugzilla.mozilla.org/show_bug.cgi?id=675533)

# c# - 我应该在 SharpZipLib 中选择哪种压缩类型？

> ID：10263829
> 
> 赞同：5
> 
> 时间：2012-04-21T23:05:28.740
> 
> 标签：c#, compression, file-transfer, sharpziplib

我有一个发送文件和文件夹的文件传输应用程序。（服务器 - 客户端）
我正在尝试通过 TCP（套接字）发送数据，我已经为传输数据的方式制定了一些规则，所以如果它发送一个包含许多文件的大文件夹，它应该将它们压缩成一个首先是 zip 文件，然后在发送该 zip 文件时，接收方必须对其进行解压缩。所以我决定使用**SharpZibLib**，我对此有疑问。

*   **我应该为我的应用程序选择哪种类型的压缩？**
    我阅读了 ZIP 和 GZIP 之间的区别，发现 GZIP 具有更好的压缩以减小大小，并且由于我以后不需要从 GZIP 文件中提取特殊文件，因此无需使用 ZIP 代替 GZIP！
    但是在那个库中有很多我仍然不知道的类型，所以我应该使用 GZIP 还是其他类型更适合我的应用程序？

    ![在此处输入图像描述](../Images/084b89a25b14c08f2053a88d783efe17.png)

    **PS：** *时间优先，使用SharpZipLib的重点是将（太多文件）放在一个文件中，这样发送速度会比一个一个发送（太多文件）快得多。*
    [更多细节在这里](https://stackoverflow.com/questions/10174379/file-transfer-with-maximum-speed-on-lan#comment13056012_10174379)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T01:39:33.093

为了速度，您应该使用 gzip / zip。我认为该库允许您选择压缩级别。您应该尝试使用较低的级别，例如 1 到 4，以查看哪种速度和压缩程度最适合您的应用程序。

gzip / zip 在相同的压缩效率下将在速度上优于 LZW。我发现压缩级别 3 比 LZW 更快并且压缩得更好。

bzip2 将比 gzip / zip 压缩得更好，但需要更长的时间。

其他选择不是压缩器。

# linux - 在 Linux 上获取多播源 IP 地址

> ID：10263830
> 
> 赞同：2
> 
> 时间：2012-04-21T23:05:29.097
> 
> 标签：linux, networking, network-programming, multicast

我使用 at struct sockaddr_in 接收从另一台机器发出的多播数据。当我使用 inet_ntop 打印出源地址时，它给了我发送数据的 PC 的源地址。

我想知道是否有办法获取数据“发送到”的多播地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T00:27:59.060

用于在接收套接字上`setsockopt(2)`设置`IP_PKTINFO`选项（参见）。`ip(7)`然后用于`recvmsg(2)`收集传入的数据报，其参数的`msg_control`and`msg_controllen`字段`msg`引用可以捕获数据报目标地址的缓冲区。

Linux 以外的系统可能会通过 BSD`IP_RECVDSTADDR`选项提供此功能。

# html - 试图在 zurb 基础中居中嵌套列

> ID：10263835
> 
> 赞同：2
> 
> 时间：2012-04-21T23:06:12.123
> 
> 标签：html, css, grid, responsive-design, zurb-foundation

我正在使用 Zurb 基础，我试图将嵌套列居中，但由于某种原因我无法理解，它没有居中。任何人都可以对此有所了解吗？

```
<div class="container"> 
    <div class="row">
        <div class="12 columns">
            <div class="row">
                <div class="4 centered columns">
                    <h1>My Content</h1>
                </div>
            </div>
        </div>
    </div>
</div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T01:06:21.950

可能`4`是不正确的，你应该尝试`four`十二点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T03:49:07.147

如果您使用的是 Foundation 3，请尝试

```
<div class="container">
  <div class="row">
    <div class="12 columns">
      <div class="row">
        <div class="4 centered columns">
          <h1>My Content</h1>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> 
```

我发现结束`<div>`标签不平衡。

如果您使用的是 Foundation 4，请使用

```
<div class="container">
  <div class="row">
    <div class="large-12 columns">
      <div class="row">
        <div class="large-4 large-centered columns">
          <h1>My Content</h1>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> 
```

# java - 如何使绳子保持笔直？

> ID：10263839
> 
> 赞同：1
> 
> 时间：2012-04-21T23:06:54.277
> 
> 标签：java, android

```
 Button hoursButton = (Button) findViewById(R.id.hours);
    final AlertDialog.Builder openinghours = new AlertDialog.Builder(this);

    hoursButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            openinghours.setTitle("Opening Hours");
            openinghours.setMessage(
                      "\nMonday:         CLOSED"
                    + "\nTuesday:        CLOSED"
                    + "\nWednesday:   22:00 - 3:00"
                    + "\nThursday:       CLOSED"
                    + "\nFriday:             22:00 - 3:00"
                    + "\nSaturday:        22:00 - 3:00"
                    + "\nSunday:           CLOSED");
            openinghours.setPositiveButton("OK", 
                    new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                                dialog.dismiss();
                            }

                    }); 
```

显示营业时间。我希望实际的营业时间以整齐的直线显示，它是这样显示的：

![在此处输入图像描述](../Images/bd484897b639fd51e1d9fb752bd8e7d0.png)

我正在尝试将字符串隔开，以便它看起来完全是笔直的、形成的线条。

必须有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T23:11:18.953

如果您有对话框的 xml 文档，则可以使用重力对齐文本。

进一步阅读：[警报对话框对齐](https://stackoverflow.com/questions/6450699/android-alert-dialog-text-align)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T23:12:39.047

您将需要创建一个 XML 布局并创建一个表。

我知道这不是代码，但我没有打开我的 ide

```
<table>

<row><row>Monday</row><row>CLOSED</row></row>
<row><row>Tuesday</row><row>CLOSED</row></row>

</table> 
```

然后您需要在创建警报时设置布局。

# python - 没有链接表/模型的多对多关系

> ID：10263849
> 
> 赞同：0
> 
> 时间：2012-04-21T23:08:10.953
> 
> 标签：python, sqlalchemy, flask, flask-sqlalchemy

我有一个模型`User`和一个模型`Thing`。A`User`可以拥有零个或多个`Thing`s。A`Thing`可能由零个或多个`User`s 拥有。通常我会添加第三个将 s`Thing_Ownership`链接`User`到`Thing`s 的表，但我想利用 SQLAlchemy 的 backref 功能，这样如果我有一个`User`实例`george`，我可以调用`george.inventory`以获取`Thing`属于 s 的 s列表`george`。

解决此问题的最佳方法是什么，或者我应该添加第三个模型并实现`User.inventory`为通过第三个`Thing_Ownership`模型搜索相关关系？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T02:17:34.000

查看 SQLAlchemy 关于[多对多](http://docs.sqlalchemy.org/en/latest/orm/relationships.html#many-to-many)关系的文档——它应该完全符合您的要求。

因此，如果您有 和 的模型`User`，`Thing`您可以在关系中设置辅助参数：

```
from sqlalchemy import Table, Integer, Column, ForeignKey
from sqlalchemy.orm import relationship, backref
from sqlalchemy.ext.declarative import declarative_base

Base = declarative_base()

association_table = Table('association', Base.metadata,
    Column('user_id', Integer, ForeignKey('user.id')),
    Column('thing_id', Integer, ForeignKey('thing.id'))
)

class User(Base):
    __tablename__ = 'user'
    # Whatever you need in this model
    inventory = relationship('Thing', secondary = association_table, backref = 'users')

class Thing(Base):
    __tablename__ = 'thing'
    # Whatever you need in this model 
```

然后，您可以通过调用访问`Thing`属于`User`实例化 as的 s 列表。`george``george.inventory`

希望这可以帮助。

编辑：重新阅读您的问题并看到您想使用`backref`- 添加代码来做到这一点。
编辑2：遗漏了一个非常重要的部分。

# c++ - mutex cond 等待类错误或错误

> ID：10263852
> 
> 赞同：2
> 
> 时间：2012-04-21T23:08:36.897
> 
> 标签：c++, multithreading, pthreads

我对 mutex / cond 等待类的这个简单包装器有疑问。我用它来保护已连接客户端的队列，并通知处于等待状态的线程有新的客户端连接，但应用程序因分段失败而崩溃

```
client_socket_fd = clients_for_threads_q.front(); 
```

仅在进行压力测试时（许多客户端已连接）

等待线程：

```
 MUTEXCONDSIGNAL_for_workers.lock();
    if ( clients_for_threads_q.empty() )
    {
        MUTEXCONDSIGNAL_for_workers.wait_signal();
    }

    client_socket_fd = clients_for_threads_q.front(); // CRASHED !!!!
    clients_for_threads_q.pop();
    MUTEXCONDSIGNAL_for_workers.unlock(); 
```

当然，clients_for_threads_q 在写作时受到保护

```
 MUTEXCONDSIGNAL_for_workers.lock();
    clients_for_threads_q.push (client_socket_fd);
    MUTEXCONDSIGNAL_for_workers.send_signal();
    MUTEXCONDSIGNAL_for_workers.unlock(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T23:19:30.807

[`pthread_cond_wait`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_cond_wait.html)可以有虚假的唤醒。

> 当使用条件变量时，总是有一个布尔谓词涉及与每个条件相关联的共享变量等待如果线程应该继续，则该条件等待为真。**可能会发生来自 pthread_cond_wait() 或 pthread_cond_timedwait() 函数的虚假唤醒**。由于 pthread_cond_wait() 或 pthread_cond_timedwait() 的返回并不暗示该谓词的值，因此应在此类返回时重新评估谓词。

您需要将服务员`if`条件更改为循环：

```
while ( clients_for_threads_q.empty() )
{
    MUTEXCONDSIGNAL_for_workers.wait_signal();
} 
```

# java - Java HttpClient 更改内容类型？

> ID：10263854
> 
> 赞同：5
> 
> 时间：2012-04-21T23:08:58.097
> 
> 标签：java, android, django, http-post

我正在为我的 Android 手机构建一个小应用程序，以使用非常基本的 REST 接口将文本消息转发到网络服务器。

我正在使用 android 4.0.3 SDK。我使用 Django 和 Django restframework 包在 python 中开发了 web 服务。设置完全开箱即用。基本上有一个端点接收包含消息信息（发件人、正文、日期）的 JSON 对象的 POST。我已经通过以下命令使用 cURL 测试了该服务：

`curl -X POST -H 'Content-Type: application/json' --data '{"sender":"+xxxxxxxx", "body": "test", "send_date":"2011-03-20 16:32:02"}' http://[...]/messages.json`

这一切都很好，我得到了预期的回应：

`{"body": "test", "send_date": "2011-03-20T16:32:02", "id": 25, "sender": "+xxxxxxxxxx"}`

现在我设置了android应用程序。它是一个简单的 BroadcastReceiver 子类，包含一个私有 AsyncTask 类：

```
private class httpPost extends AsyncTask<String, Void, JSONObject> {
    protected JSONObject doInBackground(String... args) {
        // Create a new HttpClient and Post Header
        HttpClient httpclient = new DefaultHttpClient();
        HttpParams myParams = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(myParams, 10000);
        HttpConnectionParams.setSoTimeout(myParams, 10000);

        String url = args[0];
        String json=args[1];            
        JSONObject JSONResponse = null;
        InputStream contentStream = null;
        String resultString = "";

        try {
            HttpPost httppost = new HttpPost(url);
            httppost.setHeader("Content-Type", "application/json");
            httppost.setHeader("Accept", "application/json");

            StringEntity se = new StringEntity(json); 
            se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
            httppost.setEntity(se);

            for (int i=0;i<httppost.getAllHeaders().length;i++) {
                Log.v("set header", httppost.getAllHeaders()[i].getValue());
            }

            HttpResponse response = httpclient.execute(httppost);

            // Do some checks to make sure that the request was processed properly
            Header[] headers = response.getAllHeaders();
            HttpEntity entity = response.getEntity();
            contentStream = entity.getContent();

        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        //convert response to string
        try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(contentStream,"iso-8859-1"),8);
            StringBuilder sb = new StringBuilder();
            String line;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            contentStream.close();
            resultString = sb.toString();
        }catch(Exception e){
            e.printStackTrace();
        }

        Log.v("log", resultString);
        return new JSONObject();
    }

} 
```

如您所见，我刚刚开始熟悉 Java 和 android SDK，所以请多多包涵。这个设置实际上在我构建的另一个应用程序中运行良好，用于将 JSON 字符串发送到 Neo4J Web 服务。

问题是，当我通过 Android 将消息发布到我的网络服务时，内容类型有时会从“应用程序/json”更改为“应用程序/json，应用程序/json”。标头循环中的日志条目仍会为每个标头输出正确的值，但是，Web 服务会返回以下错误消息：

`{"error": "Unsupported media type in request 'application/json, application/json'."}`

我很困惑，欢迎任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T23:33:16.320

改变这个：

```
StringEntity se = new StringEntity(json); 
se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
httppost.setEntity(se); 
```

仅限于此：

```
httppost.setEntity(new StringEntity(json.toString(), HTTP.UTF_8)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-03T10:52:38.310

简单的 ：

```
import org.apache.http.client.methods.HttpPost;

httppost.setEntity(new StringEntity(json.toString(), org.apache.http.entity.ContentType.APPLICATION_JSON)); 
```

# c - 如何在 OS XC 代码中创建异步计时器？

> ID：10263856
> 
> 赞同：5
> 
> 时间：2012-04-21T23:09:16.253
> 
> 标签：c, macos, system, distributed-computing

所以这个问题真的是“为什么 time.h 在 OS X 和 Linux 上不一样？” 但是，我已经接受了这些差异。

要在“Unix”系统上创建计时器，我按照本教程[http://www.helsinki.fi/atk/unix/dec_manuals/DOC_40D/APS33DTE/DOCU_007.HTM#timer-type-sec](http://www.helsinki.fi/atk/unix/dec_manuals/DOC_40D/APS33DTE/DOCU_007.HTM#timer-type-sec)

这需要使用`<sys/time.h>`和调用`timer_create()`，然后为信号类型设置信号处理程序。这个我知道该怎么做。问题是，同样的事情是如何在 OS X 上实现的？

需要注意的关键是这些计时器需要是实时的，即异步排队并且必须使用`sa_sigaction`a 的字段`struct sigaction`，以便可以将与计时器警报关联的元数据传递给信号处理程序。这在[http://www.helsinki.fi/atk/unix/dec_manuals/DOC_40D/APS33DTE/DOCU_006.HTM#sigevent-sec](http://www.helsinki.fi/atk/unix/dec_manuals/DOC_40D/APS33DTE/DOCU_006.HTM#sigevent-sec)有更详细的描述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:57:13.623

你调查过[`setitimer()`](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man2/setitimer.2.html)吗？

# java - 用Maven目录结构的Maven项目的源代码生成jar？

> ID：10263859
> 
> 赞同：3
> 
> 时间：2012-04-21T23:09:54.553
> 
> 标签：java, maven, maven-2, build

我有一个使用 Maven 构建的 Web 应用程序。但我想用正确的maven目录结构生成一个带有maven项目的JAR。我试过[了，](http://www.sonatype.com/people/2010/01/how-to-create-two-jars-from-one-project-and-why-you-shouldnt/)但它抛弃了 Maven 目录结构（src/main/java 等）。我的目标是将这个 jar 分发给其他人，以便他们可以解压缩并运行 mvn eclipse:eclipse 并开始处理他们的新 Web 项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T09:44:16.020

为什么不使用[maven-assembly-plugin](http://maven.apache.org/plugins/maven-assembly-plugin/descriptor-refs.html#src)的现有描述符..

```
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-assembly-plugin</artifactId>
<version>2.3</version>
<configuration>
  <descriptorRefs>
    <descriptorRef>src</descriptorRef>
  </descriptorRefs>
</configuratio 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T02:37:49.930

使用 maven-assembly-plugin。做你想做的事非常简单。

这是您对插件的定义：

```
 <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-assembly-plugin</artifactId>
                    <version>2.2.1</version>
                    <executions>
                        <execution>
                            <id>make-distribution</id>
                            <phase>package</phase>
                            <goals>
                                <goal>single</goal>
                            </goals>
                            <configuration>
                                <descriptors>
<descriptor>src/main/assembly/assembly.xml</descriptor>
                                </descriptors>
                            </configuration>
                        </execution>
                    </executions>
                </plugin> 
```

这是您的 src/main/assembly/assembly.xml：

```
<assembly>

        <id>my-project</id>

        <formats>
                <format>zip</format>
        </formats>

        <includeBaseDirectory>true</includeBaseDirectory>

        <fileSets>
                <fileSet>
                        <directory>${basedir}</directory>
                        <includes>
                                <include>**/**</include>
                        </includes>
                        <excludes>
                                <exclude>**/**</exclude>
                        </excludes>
                </fileSet>
        </fileSets>

</assembly> 
```

我还没有测试它，但它大致是你应该设置它的方式。

# javascript - 使用 JavaScript 复制模型的输入文本不起作用

> ID：10263860
> 
> 赞同：0
> 
> 时间：2012-04-21T23:10:12.177
> 
> 标签：javascript, jquery, model-view-controller, view, model

我正在努力`CakePHP` `view`添加多个`model`数据，我会让用户选择他想要保存的行数。

如果我通过 CakePHP 视图创建行，则该过程有效，但如果我使用 jQuery，则不会保存数据，我检查了通过 CakePHP 生成的代码和通过 jQuery 复制的代码之间的差异，但没有看到重要的东西：

CakePHP 生成的表格：

```
<div class="location-row">
    <div class="field wrp">
        <input name="data[Location][0][name]" value="Location name" maxlength="50" type="text" id="Location0Name">
    </div>
    <div class="value wrp">
        <input name="data[Location][0][value]" value="Location value" maxlength="50" type="text" id="Location0Value">
    </div>
</div>
<div class="location-row">
    <div class="field wrp">
        <input name="data[Location][1][name]" value="Location name" maxlength="50" type="text" id="Location1Name">
    </div>
    <div class="value wrp">
        <input name="data[Location][1][value]" value="Location value" maxlength="50" type="text" id="Location1Value">
    </div>
    <div class="btn remove-location-row bad">delete</div>
</div>
<div class="location-row">
    <div class="field wrp">
        <input name="data[Location][2][name]" value="Location name" maxlength="50" type="text" id="Location2Name">
    </div>
    <div class="value wrp">
        <input name="data[Location][2][value]" value="Location value" maxlength="50" type="text" id="Location2Value">
    </div>
    <div class="btn remove-location-row bad">delete</div>
</div> 
```

保存过程与 CakePHP 生成的表单完美配合：

```
echo $this->Form->input('Comparison.0.name', array ('div' => array ('class' => 'field wrp'), 'label' => false, 'value' => $name_text));
echo $this->Form->input('Comparison.0.value', array ('div' => array ('class' => 'value wrp'), 'label' => false, 'value' => $value_text));
echo $this->Form->input('Comparison.1.name', array ('div' => array ('class' => 'field wrp'), 'label' => false, 'value' => $name_text));
echo $this->Form->input('Comparison.1.value', array ('div' => array ('class' => 'value wrp'), 'label' => false, 'value' => $value_text));
echo $this->Form->input('Comparison.2.name', array ('div' => array ('class' => 'field wrp'), 'label' => false, 'value' => $name_text));
echo $this->Form->input('Comparison.2.value', array ('div' => array ('class' => 'value wrp'), 'label' => false, 'value' => $value_text)); 
```

`CakePHP`使用 Chrome 调试器，我以完全烘焙的形式发送所有数据：

```
 _method:POST
 data[Location][0][name]:Location name
 data[Location][0][value]:Location value
 data[Location][1][name]:Location name
 data[Location][1][value]:Location value
 data[Location][2][name]:Location name
 data[Location][2][value]:Location value 
```

jQuery重复行

```
<div class="location-row">
    <div class="field wrp">
        <input name="data[Location][0][name]" value="Location name" maxlength="50" type="text" id="Location0Name">
    </div>
    <div class="value wrp">
        <input name="data[Location][0][value]" value="Location value" maxlength="50" type="text" id="Location0Value">
    </div>
</div>
<!-- FROM HERE THE ROWS ARE DUPLICATED with jQuery -->
<div class="location-row">
    <div class="field wrp">
        <input name="data[Location][1][name]" value="Location name" maxlength="50" type="text" id="Location1Name">
    </div>
    <div class="value wrp">
        <input name="data[Location][1][value]" value="Location value" maxlength="50" type="text" id="Location1Value">
    </div>
</div>
<div class="location-row">
    <div class="field wrp">
        <input name="data[Location][2][name]" value="Location name" maxlength="50" type="text" id="Location2Name">
    </div>
    <div class="value wrp">
        <input name="data[Location][2][value]" value="Location value" maxlength="50" type="text" id="Location2Value">
    </div>
</div> 
```

如果我复制`jQuery`仅`CakePHP`发送烘焙输入文本的行，但 html 似乎没问题：

```
 _method:POST
 data[Location][0][name]:Location name
 data[Location][0][value]:Location value 
```

这是我用来克隆输入字段的 jQuery 代码：

```
var comparison_id = 1;

$('.add-location-row').click(function () {

    if ($(this).siblings('.location-row').length > 1) {
        $(this).siblings('.location-row').last().clone().insertAfter($('.location-row').last());
    } else {
        $(this).siblings('.location-row').last().clone().append('<div class="btn remove-location-row bad">delete</div>').insertAfter($('.location-row').last());
    }

    var element_1 = $(this).prev().find('div:nth-child(1) input');
    var element_2 = $(this).prev().find('div:nth-child(2) input');

    var id_att_1 = element_1.attr('id');
    var id_att_2 = element_2.attr('id');

    id_att_1 = id_att_1.replace((comparison_id-1).toString(), comparison_id.toString());
    id_att_2 = id_att_2.replace((comparison_id-1).toString(), comparison_id.toString());

    var name_att_1 = element_1.attr('name');
    var name_att_2 = element_2.attr('name');

    name_att_1 = name_att_1.replace((comparison_id-1).toString(), comparison_id.toString());
    name_att_2 = name_att_2.replace((comparison_id-1).toString(), comparison_id.toString());
    comparison_id ++;

    element_1.attr('id', id_att_1);
    element_2.attr('id', id_att_2);

    element_1.attr('name', name_att_1);
    element_2.attr('name', name_att_2);

    $(this).prev().find('.remove-location-row').bind('click', function () {
        $(this).parent().remove('.location-row');
    });
}); 
```

使用jQuery对 没有影响`CakePHP`，只保存了第一行，我错在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:30:20.047

我编写了一个测试脚本来重现这种情况，但在我的情况下它可以工作。这是测试代码，您可能会知道您在代码中做错了什么。

***测试.php***

```
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
</head>
<body>
<form id="myform" method="post" action="test2.php">
<input type="submit" value="submit" />
<div class="input-collection">
<div class="input-collection-val"><input type="text" name="val-1-1" value="val-1-1" /></div>
<div class="input-collection-val"><input type="text" name="val-1-2" value="val-1-2" /></div>
</div>
</form>
<input type="button" value="add row" onclick="addRow();" />
<script type="text/javascript">
    function addRow(){
        var myform = $("#myform");
        myform.append($(".input-collection",myform).first().clone());
        var index = $(".input-collection",myform).length;
        $(".input-collection:last .input-collection-val input").each(function(){
            $(this).attr("name",$(this).attr("name").replace(/val-(\d)-(\d)/ig, "val-" + index + "-$2"));
            $(this).attr("value",$(this).attr("value").replace(/val-(\d)-(\d)/ig, "val-" + index + "-$2"));
        });
        $(".input-collection:last").append("<div class='remove-collection'>Delete</div>");
        $(".input-collection:last .remove-collection").unbind("click").bind("click",function(){
            $(this).closest(".input-collection").detach().remove();
            fixIndexes();
        });
    }

    function fixIndexes(){
        var myform = $("#myform");
        $(".input-collection",myform).each(function(){
            var index = $(".input-collection",myform).index(this)+1;
            $("input",this).each(function(){
                $(this).attr("name",$(this).attr("name").replace(/val-(\d)-(\d)/ig, "val-" + index + "-$2"));
                $(this).attr("value",$(this).attr("value").replace(/val-(\d)-(\d)/ig, "val-" + index + "-$2"));
            });
        });
    }

</script>
</body>
</html> 
```

***test2.php***

```
<?php print_r($_POST);?> 
```

# java - 导入图像文件，将其添加到 ArrayList，然后按顺序显示图像

> ID：10263861
> 
> 赞同：-1
> 
> 时间：2012-04-21T23:10:26.800
> 
> 标签：java

我正在尝试使用`JFileChooser`将图像添加到`ArrayList`. `JPanel`然后最后在按下按钮时按顺序显示图像。有谁知道我该怎么做？我是java新手。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T23:15:30.123

把它分解成几个步骤。

任务 1：使用 JFileChooser 导入图像文件。获取选择的文件对象 使用[ImageIO.read](http://docs.oracle.com/javase/1.4.2/docs/api/javax/imageio/ImageIO.html#read%28java.io.File%29) (file) 获取缓冲图像。

任务 2：将图像添加到数组列表

```
List<BufferedImage> images = new ArrayList<BufferedImage>()
images.add(image); 
```

任务 3：在 JPanel 中显示图像

```
JPanel p = new JPanel();
JButton button = new JButton();
ImageIcon icon = new ImageIcon(images.get(0));
button.setIcon(icon);

p.add(button); 
```

任务 4：添加在图像中前进的按钮

```
JButton advance = new JButton();
advance.addActionListener(new ActionListener() {
  public void actionPerformed(ActionEvent e) {
    advanceImage();
  }
}; 
```

# linux - sendEmail：Linux 脚本和数组

> ID：10263863
> 
> 赞同：0
> 
> 时间：2012-04-21T23:11:02.900
> 
> 标签：linux, bash, sendmail

我有一个使用 sendEmail （CentOS shell）脚本发送电子邮件的脚本是：

```
sendEmail -vvv -u "TestCompany, Inc.: USB Added" -f user@domain.com -t To@domain.com -s ASPMX.L.GOOGLE.com -m "USB Activity" -o tls=aut
o username=user3@domain.com password=password 
```

到目前为止，这工作正常。

现在我创建一个配置文件如下：

```
Company=TestCompany, Inc.
FromEmail=user@domain.com
Password=password
ToEmail=To@domain.com
Smtp=ASPMX.L.GOOGLE.com 
```

现在我修改我的脚本如下：

```
#!/bin/sh
i=1;
while IFS="=" read VAR VALUE
do
        VAR="${VAR// }"
        Values[$i]=${VALUE}
        let i++;
done <  ConfigFile

sendEmail -vvv -u "${Values[1]}: USB Added" -f ${Values[2]} -t ${Values[4]} -s ${Values[5]} -m "Test Email" -o tls=auto username=${Values[2
]} password=${Values[3]} 
```

我收到以下错误：

```
'25 failed: IO::Socket::INET: Bad hostname 'ASPMX.L.GOOGLE.comempt to ASPMX.L.GOOGLE.com
Apr 21 12:11:35 box2 sendEmail[26378]: HINT => Try specifying a different mail relay with the -s option. 
```

现在我无法理解为什么我会收到这个错误。即使我尝试回显 Values，它也会向我显示正确的值。那我在哪里做错了。？请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T23:17:15.550

注意到日志消息中浮动到行首的单引号了吗？您的数据文件可能包含`\r\n`换行符，这在 Unix 上效果不佳；回车被读取为主机名的一部分。运行`dos2unix`它。

# ios - 在物理设备上测试时图像的白条和黑条

> ID：10263869
> 
> 赞同：1
> 
> 时间：2012-04-21T23:12:00.933
> 
> 标签：ios, image, runtime-error

我正在测试我的 iOS 应用程序，在 iOS 模拟器上一切顺利（当然），但是当我在物理设备上测试时，一些奇怪的事情开始发生。

我在 UIImageView 中有一个图像，我将它用作弹出背景。当我在设备上运行应用程序时，它显示为黑白条纹图像。

没有错误，没有警告，没有内存问题（据我所知），调试窗口中也没有出现任何内容。

这是出现的图像： ![白色/黑色条纹弹出框](../Images/d4c2203d46b268b08f2c4616d0321dff.png)

我的原始图像主要是带有图案的深灰色调。它保存为 PNG 并复制到我的项目中。它甚至处于源代码控制之下。更奇怪的是，当我将图像更改为完全不同的图像时，它会起作用。

我已重命名、重新导入等。似乎没有任何效果。

有任何想法吗？这个白色/黑色图像来自哪里？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T23:37:52.360

您的应用程序加载的 PNG 不是您添加到应用程序包中的 PNG 的逐字节副本。XCode 对其进行了一些更改，将通道按 BGR 顺序排列并弄乱了 alpha。请参阅[iPhone“优化”PNG 上的这篇文章](http://iphonedevelopment.blogspot.com.au/2008/10/iphone-optimized-pngs.html)。

这是推测，但您的图像的某些属性——通道顺序、位深度、alpha 或类似属性——可能不是 XCode 所假设的。然后它最终会交换它不应该的通道值，从而破坏图像。（但是，如果您的图像是灰度的，只有一个通道，那应该不是问题。）

尝试创建一个与原始图像大小相同的新空白图像，然后将背景图像的内容复制到新图像中。如果您的图像不透明，请确保它没有 Alpha 通道。

您可能还想在预览中打开您的问题图像，然后选择“查看”->“显示检查器”。我已经附上了我在有效的图像上看到的那种信息。

![显示常规选项卡的预览检查器](../Images/ed3581d17d6276a27f86453d23f53e98.png)

![显示 PNG 选项卡的预览检查器](../Images/6dcad9efeb170022beae274939cfa96b.png)

**编辑**：可以防止 XCode 更改您的文件。在“构建设置”中的“打包”下，有“压缩 PNG 文件”选项。如果您需要完全复制项目中的 PNG 文件，请将其关闭。您的应用将需要更多时间来加载图像，但您可以将 PNG 文件压缩成更小的尺寸。请参阅[Xcode 的内置（反）优化](http://imageoptim.com/xcode.html)。

![在此处输入图像描述](../Images/e76b8cf026c6ccaf93802030d5d8afb4.png)

# python - 将 Python 长整数转换为 C 字符数组

> ID：10263871
> 
> 赞同：1
> 
> 时间：2012-04-21T23:12:09.047
> 
> 标签：python, c, python-c-api, python-c-extension

我正在使用 Python/C API，并且希望 C 函数采用 Python 长整数参数，`nPyLong`并将其转换为 char 数组，`nString`以 10 为底。这是我想做的一个片段。

```
PyObject *nPyLong;
PyArg_ParseTuple(args, "O", nPyLong);

PyLong_Check(nPyLong) // returns true

const char *nString;
// This function doesn't exist but demonstrates the functionality
PyLong_AsCharArray(&nString, nPyLong, 10); 
```

API 参考中提到了一个函数[`PyObject* PyLong_FromString(char *str, char **pend, int base)`](http://docs.python.org/c-api/long.html#PyLong_FromString)，该函数将 C char 数组转换为 Python 长整数，给定任意基数，但我找不到执行相反操作的函数。

这可能吗？一种想法是将 Python 长整数转换为 Python 字符串对象，然后转换为 C 字符数组，但也没有字符串函数可以处理长整数。似乎 C 处理 Python long int 的唯一方法是转换为 C int 类型，所有这些都会在我的应用程序中溢出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T23:21:58.543

使用[`PyObject_Str()`](http://docs.python.org/c-api/object.html#PyObject_Str)（或`PyObject_Bytes()`）并将结果对象转换为`char*`.

# javascript - 丰富的片段和 javascript 生成的标记

> ID：10263876
> 
> 赞同：1
> 
> 时间：2012-04-21T23:12:34.977
> 
> 标签：javascript, html, search-engine, microformats

使用 javascript 生成的微格式丰富片段标记被搜索引擎索引？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:30:14.857

经过大量测试和研究，答案是：截至当天没有:(

既不是 javascript 生成的 html 形式，也不是通过 iframe 标记。

# objective-c - 为什么 NSDateFormatter 返回一个相差一小时的日期？

> ID：10263886
> 
> 赞同：2
> 
> 时间：2012-04-21T23:15:20.860
> 
> 标签：objective-c, ios, nsdateformatter

我在 PDT（太平洋夏令时间），比 UTC 晚 -0700 小时。我`NSDateFormatter`用来解析时间字符串，下午 4:00，然后创建一个日期：

```
NSDateFormatter *df = [[NSDateFormatter alloc] init];
NSDate *aDate = [[NSDate alloc] init];
[df setDateFormat:@"h:mm a"];
aDate = [df dateFromString:@"4:00 PM"]; 
```

`aDate`返回为：1970-01-02 00:00:00 +0000。但是，我希望它会返回：1970-01-01 23:00:00 +0000，因为下午 4 点应该是 23:00 UTC。

检查日期格式化程序时区会返回正确的 (PDT) 时区，即：America/xxx (PDT) offset -25200 (Daylight)

有人知道这里发生了什么吗？在此先感谢您的帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T00:21:29.807

如果不指定日期，您将处于 PST，而不是 PDT。再试一次：

```
NSDateFormatter *df = [[NSDateFormatter alloc] init];
[df setDateFormat:@"EEE, d LLL yyyy hh:mm a"];
NSDate *aDate = [df dateFromString:@"Sat, 21 Apr 2012 04:00 PM"];
NSLog(@"date=%@", aDate); 
```

# java - Javacc 包问题

> ID：10263887
> 
> 赞同：1
> 
> 时间：2012-04-21T23:15:20.970
> 
> 标签：java, package, abstract-syntax-tree, javacc

我们正在使用 javacc 实现一个胡言乱语版本来构建我们的抽象语法树。我们有许多用 java 实现的类，由 Parser.jj 程序调用。但是，Parser.jj 无法识别任何已实现的类，即使它们位于同一文件夹/包中（例如错误：找不到符号：类变量节点）。有没有办法让 Parser.jj 识别这些文件？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:28:08.220

将您的 jj 文件放在 src/a/b/c/jj 下

```
PARSER_BEGIN( MyParserGenerator )

package a.b.c.jj;

import java.io.*;
import java.util.*;

public class MyParserGenerator
{
   // Your attributes and methods here       
}
PARSER_END( MyParserGenerator ) 
```

在 Eclipse 中，右键单击，选择 Compile and chazam! 7个来源在这里。

# c++ - VS2010 的“正确”文件管理

> ID：10263890
> 
> 赞同：0
> 
> 时间：2012-04-21T23:15:37.773
> 
> 标签：c++, visual-studio

所以，我在 VS2010 中开始了我的第一个项目，我看到我可以将文件拖放到项目树中，可爱。但是，这并不能解决缺少的包含？我假设将所有头文件与源代码文件放在同一个文件夹中并不是一种好的形式。是的，我知道有一个包含环境变量之类的东西，但是我肯定不会将我曾经在那里做过的每个项目的所有标题都存储在其中，直到时间结束？

显然我误解了一些东西。请温柔一点，对 C++ 也很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T23:31:39.023

您是否使用尖括号而不是引号？

> VS 2010 中的预处理器仅在使用引用的包含语法时才查看当前目录（例如#include "whatever.h"）。使用尖括号（例如 #include ）会省略当前目录。

[从这里](https://stackoverflow.com/a/335426/901059)引用。

如果您需要当前目录的子目录，您可以在 include 语句中指定它们。即`#include "subfolder/header.h`。

见[这里](http://msdn.microsoft.com/en-us/library/36k2cdd4%28v=VS.100%29.aspx)。

# java - JMock 无法模拟私有方法

> ID：10263891
> 
> 赞同：1
> 
> 时间：2012-04-21T23:15:43.727
> 
> 标签：java, unit-testing, testing, jmock

我正在尝试通过模拟 JMock 中的类来编写代码来测试方法，该方法在内部调用了三种不同的方法（其中一个是私有方法）。我为所有三种内部方法设置了期望值。然后我调用方法，它正在测试中。测试用例失败，说它期望调用私有方法并且没有调用它。发生的事情是两个内部方法（使用默认访问说明符）被成功模拟，但私有方法没有被模拟，实际上控制到达导致问题的实际私有方法内部。当我将私有方法的访问说明符更改为默认访问时，一切正常，但我不想这样做。有人可以解释一下这种行为并让我知道如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T00:01:29.587

JMock 不能模拟私有方法，简单明了。[Mockito 也不能模拟私有方法](http://code.google.com/p/mockito/wiki/MockitoAndPrivateMethods)。如果你真的想模拟私有方法，你需要使用[PowerMock](http://code.google.com/p/powermock/)框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-29T12:30:30.860

您也可以使用 Jmockit。这是一个可以用于这个用例的优秀库。您可以使用的关键字：“去封装”。

# android - 从外部停止服务

> ID：10263894
> 
> 赞同：0
> 
> 时间：2012-04-21T23:16:13.910
> 
> 标签：android, service

我在我的应用程序中创建了自己的服务。它工作正常...当有人更改首选项时启动该服务。现在我想在首选项更改回另一个值时停止服务。实现这一点的最佳方法是什么？该服务可以在设备上激活几天......所以我不知道如何访问服务中的方法来停止它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T23:19:46.047

只需在 Preference 更改其值时使用[stopService 。](http://developer.android.com/reference/android/content/Context.html#stopService%28android.content.Intent%29)

# java - JNLP 类路径嵌套文件夹

> ID：10263895
> 
> 赞同：2
> 
> 时间：2012-04-21T23:16:16.877
> 
> 标签：java, applet, jnlp, next-generation-plugin, unsatisfiedlinkerror

我在部署 JNLP 小程序时遇到了一些问题。

出于某种原因，如果我没有将所有必要的文件与 JNLP 文件放在同一目录中，Java 会抱怨它找不到它。

示例 jnlp 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<jnlp spec="1.0+" codebase="file:/C:/temp/lwjgl_test/" href="LWJGLTest.jnlp">
<information>
    <title>LWJGL Test</title>
    <vendor>helloworld</vendor>
</information>
<resources>
    <!-- Application Resources -->
    <j2se version="1.7+"
        href="http://java.sun.com/products/autodl/j2se" />
    <jar href="LWJGLTest.jar" main="true" />
<jar href="lib/lwjgl.jar"/>
<jar href="lib/windows.jar"/>

</resources>
<applet-desc 
     name="LWJGL Test"
     main-class="LWJGLTest"
     width="640"
     height="480">
 </applet-desc>
 <update check="background"/>
</jnlp> 
```

我已经将文件夹移出`lwjgl.jar`并`windows.jar`移出`lib`到与其他所有文件夹相同的文件夹中并且它可以工作，但是我不明白为什么如果我不这样做会出现类路径异常。我还需要更改其他内容才能使其正常工作吗？

堆栈跟踪：

```
Exception in thread "Thread-9" java.lang.UnsatisfiedLinkError: no lwjgl in java.library.path
    at java.lang.ClassLoader.loadLibrary(Unknown Source)
    at java.lang.Runtime.loadLibrary0(Unknown Source)
    at java.lang.System.loadLibrary(Unknown Source)
    at org.lwjgl.Sys$1.run(Sys.java:73)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.lwjgl.Sys.doLoadLibrary(Sys.java:66)
    at org.lwjgl.Sys.loadLibrary(Sys.java:95)
    at org.lwjgl.Sys.<clinit>(Sys.java:112)
    at org.lwjgl.opengl.Display.<clinit>(Display.java:135)
    at LWJGLTest$2.run(LWJGLTest.java:67)
    at java.lang.Thread.run(Unknown Source) 
```

# c++ - 智能指针和 dynamic_cast

> ID：10263902
> 
> 赞同：13
> 
> 时间：2012-04-21T23:16:55.940
> 
> 标签：c++, polymorphism, smart-pointers, dynamic-cast

如果在我查看时已经回答了这个问题并且找不到答案，我会提前道歉。

注意：这**是**一个家庭作业，所以如果你觉得回答不舒服，我完全理解。

我有以下内容：

ptr.h：

```
template<typename T>
class Ptr {
    T* address;
    size_t* counter;
    Ptr(T* address) : address(address), counter(new size_t(1)) { }
    Ptr(const Ptr& other) : address(other.address), counter(other.counter) 
    { 
        ++(*counter); 
    }
    virtual ~Ptr() { 
        if (0 == --(*counter)) { delete address; delete counter; } 
    }
    Ptr& operator=(const Ptr& right) {
        if (address != right.address) {
            if (0 == --(*counter)) { delete address; delete counter; }
            address = right.address;
            counter = right.counter;
            ++(*counter);
        }
        return *this;
    }
    T& operator*()  const { TRACE(address); return *address; }
    T* operator->() const { TRACE(address); return address;  }
    T* raw()        const { TRACE(addr); return addr;  }
}; 
```

主.cc：

```
#include <iostream>
#include "ptr.h"

using std::cout;
using std::endl;

class Base {
public:
    Base()  { std::cout << "Base()" << std::endl; }
    virtual ~Base() { std::cout << "~Base()" << std::endl; }
    virtual std::string str() { return "In Base::str()"; }
};

class Derived: public Base {
public:
    Derived()  { std::cout << "Derived()" << std::endl; }
    ~Derived() { std::cout << "~Derived()" << std::endl; }
    std::string str() { return "In Derived::str()"; }
};

int main() {
Ptr<Base> base(new Base());
Ptr<Derived> derived(new Derived());

Ptr<Base> pbase(0);
Ptr<Derived> pderived(0);

    // upcasting can be done like this, but is it the best way?
    pbase = *((Ptr<Base>*)(&derived));
    cout << pbase->str() << endl;   // outputs: "In Derived::str()"

    /* 
     * downcasting should be done using dynamic_casts
     * but how can I downcast here? 
     * what do I know so far:
     * 1\. just because Derived is a subclass of Base does not mean Ptr<Derived> is a 
     * subclass of Ptr<Base> so there is no hierarchy between the two so I cannot 
     * really use dynamic_casts here
     * 2\. The dynamic_cast I do use is sort of useless no? since pbase is a Ptr<Base>
     */
    pderived = *((Ptr<Derived>*)(dynamic_cast<Ptr<Base>*>(&pbase)));
    cout << pderived->str() << endl;

return 0;
} 
```

现在，我们的目标是使用 dynamic_cast 来回切换，虽然我发现了许多关于智能指针的有趣花絮，但并没有真正解释它是*如何*实现的。

我尝试只获取 pbase 的地址字段，然后将 pderived 初始化为具有该地址的新 Ptr，但当然我的引用计数都搞砸了。

我尝试创建一个新的 Ptr 来引用 pderived 的计数器，但后来我无法设置 pderived 的地址字段，所以我也被困在那里。

我告诉你们这些信息是因为： 1\. 在在线寻求帮助之前，我想说明我已经为此工作了很长一段时间； 2\. 我想让你们知道我已经尝试过什么。

我真的可以在这里使用一些建议。只是如何获得：

```
pderived = <SOMETHINGSOMETHING>pbase<SOMETHINGSOMETHING> 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T23:23:07.763

通常，智能指针类将公开一个动态转换包装器，以正确处理底层智能指针对象。例如，C++0x 有[dynamic_pointer_cast](http://msdn.microsoft.com/en-us/library/bb982967.aspx)函数。请注意，您`*((Ptr<Derived>*)(dynamic_cast<Ptr<Base>*>(&pbase)));`可以并且将会中断，特别是如果您有多重继承，因为它不会将内部指针调整`address`到子类中的正确偏移量以获取所需的任何超类。

在实现层面，一个引用计数的智能指针类通常会在每个智能指针中携带两个指针；一个直接指向对象（正确转换为指针的任何类型），一个指向包含引用计数、指向原始对象*的指针和指向删除例程的指针的*结构。这允许指针的任何转换变体正确地取回原始对象并调用其析构函数。目前，您直接指向 a `size_t`，它不会为您提供此信息。

在任何情况下，一旦你对析构函数进行了这种间接转换，当需要转换这些智能指针时，你就可以只转换*外部*指针；当销毁时间到来时，不理会这个内部引用计数结构。

当然，实际上把这一切都变成了代码，留给读者作为练习:)

# java - Ardor3D 透明四边形

> ID：10263907
> 
> 赞同：0
> 
> 时间：2012-04-21T23:18:45.953
> 
> 标签：java, 3d, transparent, ardor3d

我正在将 Ardor3D 用于 Java 中的 3D 应用程序。我可以在屏幕上绘制一个带有纹理的四边形。纹理图像的一部分是透明的，四边形背景从那里显示出来。

你如何使四边形本身透明，这样渲染的场景就会显示出来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T00:11:10.503

如果您的纹理格式支持 alpha 通道（png、tga、dds 等，但不支持 jpg），那么您只需要一个 BlendState。就像是：

```
 BlendState blend = new BlendState();
    blend.setBlendEnabled(true);
    myQuad.setRenderState(blend); 
```

如果您的四边形是部分透明的（alpha 在 0% 和 100% 之间），您可能还希望将您的四边形放入透明渲染队列中以获得正确的排序：

```
 myQuad.getSceneHints().setRenderBucketType(RenderBucketType.Transparent); 
```

还有其他非基于 alpha 的混合方式，但以上通常是您想要的。

# java - 同一节点上的两个同时 RotationTransitions

> ID：10263910
> 
> 赞同：1
> 
> 时间：2012-04-21T23:19:46.940
> 
> 标签：java, animation, javafx-2

在熟悉 JavaFX 2.0 时，我一直在玩动画，我编写了一个小测试程序，旨在沿 X 轴和 Y 轴旋转一个矩形。这是测试程序：

```
import javafx.animation.Animation;
import javafx.animation.FadeTransition;
import javafx.animation.ParallelTransition;
import javafx.animation.RotateTransition;
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.layout.BorderPane;
import javafx.scene.paint.Color;
import javafx.scene.shape.Rectangle;
import javafx.scene.shape.RectangleBuilder;
import javafx.scene.transform.Rotate;
import javafx.stage.Stage;
import javafx.util.Duration;

public class ParallelTransitionTest extends Application
{
    public static void main( String[] args )
    {
        launch( args );
    }

    @Override
    public void start( Stage primaryStage ) throws Exception
    {
        init( primaryStage );
        primaryStage.show();
    }

    private void init( Stage primaryStage )
    {
        primaryStage.setTitle( "Parallel Transition" );
        primaryStage.setResizable( true );

        // Create the scene
        BorderPane root = new BorderPane();
        Scene scene = new Scene( root, 800, 600, true );
        scene.setFill( Color.BLACK );
        primaryStage.setScene( scene );

        Rectangle rect = RectangleBuilder.create()
                .width( 100 ).height( 100 )
                .x( 350 ).y( 250 )
                .fill( Color.BLUE )
                .build();

        RotateTransition rotationY = new RotateTransition();
        rotationY.setAxis( Rotate.Y_AXIS );
        rotationY.setDuration( Duration.seconds( 5 ) );
        rotationY.setByAngle( 360 );
        rotationY.setNode( rect );
        rotationY.setAutoReverse( true );
        rotationY.setCycleCount( Animation.INDEFINITE );

        RotateTransition rotationX = new RotateTransition();
        rotationX.setAxis( Rotate.X_AXIS );
        rotationX.setDuration( Duration.seconds( 5 ) );
        rotationX.setByAngle( 360 );
        rotationX.setNode( rect );
        rotationX.setAutoReverse( true );
        rotationX.setCycleCount( Animation.INDEFINITE );

        FadeTransition fade = new FadeTransition();
        fade.setDuration( Duration.seconds( 5 ) );
        fade.setToValue( 0.2 );
        fade.setNode( rect );
        fade.setAutoReverse( true );
        fade.setCycleCount( Animation.INDEFINITE );

        ParallelTransition transition = new ParallelTransition( rect,
                rotationX, rotationY, fade );
        transition.setAutoReverse( true );
        transition.play();

        root.getChildren().add( rect );
    }
} 
```

不幸的是，旋转只发生在其中一个轴上。我的假设是两个`RotationTransition`s 都在运行，但是一个正在覆盖另一个应用的旋转。这是 的预期行为`RotationTransition`吗？

此外，如果注释以下三行：

```
 rotationY.setNode( rect );
        ...
        rotationX.setNode( rect );
        ...
        fade.setNode( rect ); 
```

我得到一个`NullPointerException`. 文档建议您不需要在`ParallelTransition`. 这是一个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:10:43.447

您应该创建另一个节点，将您的矩形添加到该节点，然后：

```
RotateTransition rotationY = new RotateTransition();
        rotationY.setAxis( Rotate.Y_AXIS );
        rotationY.setDuration( Duration.seconds( 5 ) );
        rotationY.setByAngle( 360 );
        rotationY.setNode( rect );
        rotationY.setAutoReverse( true );
        rotationY.setCycleCount( Animation.INDEFINITE );

        RotateTransition rotationX = new RotateTransition();
        rotationX.setAxis( Rotate.X_AXIS );
        rotationX.setDuration( Duration.seconds( 5 ) );
        rotationX.setByAngle( 360 );
        rotationX.setNode( NEWNODE );
        rotationX.setAutoReverse( true );
        rotationX.setCycleCount( Animation.INDEFINITE ); 
```

# jquery - 为什么 Web 服务返回数据为 msg.d

> ID：10263916
> 
> 赞同：6
> 
> 时间：2012-04-21T23:20:57.653
> 
> 标签：jquery, asp.net, json, web-services, javascriptserializer

我发现我的 webmethod 将数据返回为

```
{ "d":
 [
   {"id":"1","itemtxt":"Masters"},
   {"id":"2","itemtxt":"Transactions"},
   {"id":"3","itemtxt":"Misch. Reports"}
 ]
} 
```

如果您注意到，该数组被命名为“ **d** ”。这是为什么 ？有什么规则吗？

为了您的信息，我将返回一个对象列表 ( `List<webitem>`)

```
public class webitem
{
    public webitem(string kid, string kval)
    {
        this.id = kid;
        this.itemtxt = kval;
    }

    public string id { get; set;  }
    public string itemtxt { get; set; }
} 
```

这个“ **d** ”是什么意思？对于我从网络方法发送的任何数据，它是否总是相同的？还是会根据我的数据类型/类类型而改变？

**编辑**

这是网络方法

```
[WebMethod]
public  List<webitem> GetSubModules(string key)
{
    string s = " order by smid";
    if (key != null)
        s = " where moduleid=" + key + s;
    return Utility.GetDDLVal("Select smid id,smname itemtxt from m_submodules "+s, null, null);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T23:44:29.400

作为 ASP.NET 的一部分，它是一种安全功能。只要您不更改序列化程序，它就会一直存在。David Ward 的博客（现已不复存在）说它是什么：

> 通过 ASP.NET 3.5 中的 ASP.NET AJAX 扩展序列化的所有 ASMX 服务 JSON 都是这种情况。即使您只返回一个标量返回值，例如字符串、int 或布尔值，结果也将始终包含在“d”中。

以及为什么：

> {"d": 1 }
> 
> 不是有效的 JavaScript 语句，如下所示：
> 
> [1]
> 
> 是。
> 
> 因此，“d”参数的包装阻止了将字符串作为脚本直接执行。无需担心 Object 或 Array 构造函数。

# ios - iOS：将不可编辑的字符串附加到 UITextView 的末尾

> ID：10263919
> 
> 赞同：2
> 
> 时间：2012-04-21T23:21:23.457
> 
> 标签：ios, uitextfield, uitextview

我想重现一个类似于 iOS 中 Facebook“更新状态”视图的屏幕。

![在此处输入图像描述](../Images/801139a1c0b8ec420002e0e43fd660e2.png) ![在此处输入图像描述](../Images/a70e59d873feeb0e20140bd4c6bf9703.png)

（此文本应可编辑）步行（此处过去的任何内容均不可编辑）- 在南纳拉宾海滩

用户应该能够在附加字符串的左侧输入/编辑文本。附加的字符串需要包裹在其父级中并且可以点击。

有谁知道这是怎么做到的？（我最近也在 Viddy 应用程序中看到了它）。

会不会是一个不断增长的 UITextField，其 UIAttributedString 分成两行，在输入文本时更新其框架？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T01:14:42.623

**更新：** 看起来你想要的是让用户将光标放在签名中，但不要让她输入
在这种情况下，你会想要使用它

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text{
   NSInteger signatureLength=20;
   if(range.location>self.textView.text.length-signatureLength){
       return false;
   }
   else{
       return true;
   }
} 
```

**原来的：**

您需要使用 UITextViewDelegate

实现 - (void)textViewDidChangeSelection:(UITextView *)textView 方法，类似于：

对于这个例子，我们假设签名长度是 20，这看起来像这样：

```
-(void)textViewDidChangeSelection:(UITextView *)textView{
       NSInteger signatureLength=20;
       NSRange newSelection=self.textView.selectedRange;
       if(newSelection.location>self.textView.text.length-signatureLength){
           [self.textView setSelectedRange:NSMakeRange(self.textView.text.length-signatureLength, 0)];
       }
 } 
```

因此，基本上每次选择（在这种情况下为 == 光标）更改时都会拦截，如果光标将位于签名的中间，则在之前重新定位它。设置长度为 0 的选择只会更改光标位置。

# javascript - 为什么控制台会注意到我先更改了原型？

> ID：10263920
> 
> 赞同：7
> 
> 时间：2012-04-21T23:21:38.907
> 
> 标签：javascript

我正在学习 Javascript 原型并用这个 javascript 制作了一个小提琴（[http://jsfiddle.net/3MuZa/1/](http://jsfiddle.net/3MuZa/1/)）：

```
function Animal(name, sound) {
    this.name = name;
    this.sound = sound;
}

var dog = new Animal("Dog", "Bark");
console.debug(dog.__proto__);

Animal.prototype.makeSound = function() {console.log(this.sound);}; 
```

有趣的是，<code>console.debug(dog.__proto__); 揭示了这`makeSound`是Animal类原型的一个方法。

但是，我在后面的一行中将该方法添加到原型中。`makeSound`如果控制流在我的代码中还没有得到它，为什么控制台会注意到原型有一个方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T23:23:14.970

控制台是“活的”。即使您先记录它，它也会反映以后的更改。

据我所知，它在对象、函数、数组上的行为是这样的。但是，如果您记录字符串、布尔值和数字，它们会打印出它们在记录时的含义。

# css - Internet Explorer 中的对齐混乱（这是浮动问题吗？）

> ID：10263925
> 
> 赞同：0
> 
> 时间：2012-04-21T23:23:06.973
> 
> 标签：css, alignment, css-float

我正在使用 wordpress 模板，在 FireFox 中一切看起来都很好。

但是 - 惊喜，惊喜 - 在 Internet Explorer 8 中看起来不对

在这个页面上有两个问题：

[http://www.thebuddhagarden.com/blog/](http://www.thebuddhagarden.com/blog/)

1) 搜索框（应该在导航菜单的右侧）被向下推，使其隐藏在单词 Categories 后面。

2) 并且（可能相关）导航菜单（以博客主页、购买我们的商店等开始）应该与 LEFT 对齐。在 FireFox 中看起来很棒，但在 IE8 中它是居中对齐的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T23:40:41.483

Internet Explorer 不喜欢在向左浮动的元素之后向右浮动的元素。我不确定为什么会这样，但由于某种原因，它认为右浮动是新行右浮动。您在这里有两个选择。

将 box-search div 放在代码中导航菜单的上方。这对其他浏览器应该没有任何影响——FF、Chrome、Safari、Opera——它们都会像现在一样显示它。但是，IE 将允许您的右浮动与您的左浮动在同一行，从而解决问题。

或者，给你的导航菜单一个特定的宽度，这样它就可以使用除了搜索所需的空间之外的所有空间，并将两者都向左浮动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T00:08:02.110

你的问题是因为这个属性：

```
#navmenu ul {
   margin:0 auto;
} 
```

在您的 styles.css 样式表的第 656 行。当您想将列表浮动到左侧时，您正在尝试将其居中，因此只需更改它`margin:0`，您就应该一切就绪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T06:11:24.213

不，这不是浮动问题。

我在 IE-7 中发现了 2 个问题，它在 IE-8 中运行良好。

执行以下操作

1.从你的h1中删除行高：18px，这将显示你的标题，它与ie7中的导航混合在一起。

2.把宽度：690px（或你想要的，obv它应该小于695px）放在你的身上`<div id="navmenu-wrapper">`，一切都会好起来的。

![在此处输入图像描述](../Images/f15822dcad37c4ad35e1190d160ed60e.png)

# applescript - 如何在 AppleScript 中等待退出操作？

> ID：10263930
> 
> 赞同：1
> 
> 时间：2012-04-21T23:23:29.573
> 
> 标签：applescript

我正在尝试将 URL 发送到 chrome 以查看 flash，同时退出 Safari，以免耗尽内存，然后在我退出 Chrome 后立即返回 Safari。在我退出 Chrome 后，无法预料会返回 Safari，因此我需要有关重复循环的帮助。我想将其作为服务运行。谢谢！

```
property theURL : ""

on run {input, parameters}

tell application "Google Chrome"
    activate
end tell

tell application "Safari"
    activate
end tell

tell application "System Events"
    keystroke "j" using {command down} -- Highlight the URL field.
    keystroke "c" using {command down}
    keystroke "w" using {command down}
end tell

delay 0.1

tell application "Safari"
    quit
end tell

tell application "Google Chrome"
    if (count of (every window where visible is true)) is greater than 0 then
        tell front window
            make new tab
        end tell
    else
        make new window
    end if
    set URL of active tab of front window to the clipboard
    activate
end tell

repeat
    if application "Google Chrome" is not running then exit repeat
    delay 5
end repeat

tell application "Safari"
    activate
end tell

return input
 end run 
```

**更新！这是工作脚本：**

```
 property theURL : ""

 on run

tell application "Safari"
    activate
    set theURL to URL of document 1
    quit
end tell

tell application "Google Chrome"
    activate
    if (count of (every window where visible is true)) is greater than 0 then
        tell front window
            make new tab
        end tell
    else
        make new window
    end if
    set URL of active tab of window 1 to theURL
    activate tab 1
end tell

repeat
    tell application "System Events"
    if "Google Chrome" is not in (name of application processes) then exit repeat
    end tell
    delay 5
end repeat

tell application "Safari"
    activate
end tell

end run 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T02:23:00.380

你可以试试这个...

```
repeat
    tell application "System Events"
        if "Google Chrome" is not in (name of application processes) then exit repeat
    end tell
    delay 5
end repeat 
```

此外，如果可以避免的话，我总是避免使用击键和其他 gui 脚本。它们不是 100% 可靠的。因此，我建议您像这样转移网址...

```
tell application "Safari" to set theURL to URL of document 1 
```

和...

```
tell application "Google Chrome" to set URL of active tab of window 1 to theURL 
```

# java - 禁用 JPanel 上的绘画

> ID：10263931
> 
> 赞同：0
> 
> 时间：2012-04-21T23:24:24.360
> 
> 标签：java, swing, jpanel, paint, jcomponent

我正在尝试完全禁用 JFrame 的一部分上的所有绘画和刷新。`public void paint(Graphics)`通过像这样简单地覆盖，我在整个 JFrame 上获得了预期的效果：

```
import javax.swing.*;

class Test extends JFrame {

  Test () {
    setBounds(20,20, 100,100);
    setVisible(true);
    }

  //This disables all painting and refreshing ON A JFRAME.
  //Just doing this on a JPanel doesn't work.
  public void paint (Graphics g) {}

  public static void main (String[] args)
    { new Test(); }

  } 
```

我想要同样的效果，但仅限于 JFrame 的特定区域。我希望能够像往常一样将 GUI 组件添加到框架的其余部分。我尝试禁用双缓冲（使用 JPanel 的构造函数）并覆盖以下方法（扩展 JPanel 和 JComponent），如下所示：

```
public class DontRefresh extends JComponent/JPanel {
  public void paint (Graphics g) {}
  public void paintComponent (Graphics g) {}
  public void repaint () {}
  public void update (Graphics g) {}
  public void updateUI () {}
  } 
```

我还尝试通过以下方式禁用刷新：

```
DontRefresh component = new DontRefresh();
RepaintManager.currentManager(component).markCompletelyClean(component); 
```

但没有任何效果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T01:27:34.833

好吧，在不确切知道您在做什么的情况下，我建议您在您不希望出现任何内容的空间中使用“填充面板”（只是您不做任何事情的 JPanel），然后为所有内容使用其他面板别的。

所以说你有一个JFrame。如果您希望右上角从不显示任何内容，您可以用 4 个 JPanel 填充 JFrame，每个角落一个（或 3 个，左侧一个，右上角一个，右下角一个）。然后将所有摆动组件放在其他面板中。我不知道这是否会达到你的目的，但我不完全确定你的目的是什么，所以这是我能做的最好的：）我希望它有所帮助！

# javascript - Meteor.http 方法在服务器上未定义？

> ID：10263933
> 
> 赞同：24
> 
> 时间：2012-04-21T23:25:44.063
> 
> 标签：javascript, http, meteor

所以，我正在尝试编写一个进行 http 调用的方法。当我运行该方法时，我收到以下错误：

> 调用方法“上传”类型错误时出现异常：无法调用未定义的方法“调用”

代码如下所示：

客户：

```
console.log(Meteor.call('upload', f, content)); 
```

服务器：

```
Meteor.methods({
  upload: function(file, content) {
    this.unblock();
    Meteor.http.call("PUT", "http://blah");
  }
}); 
```

更新：问题解决了，原来我必须启用包：`meteor add http`

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-22T01:06:22.893

您只需要通过在项目的命令行上运行它来添加 HTTP 包：

流星添加http

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T06:54:35.443

您还需要使用 Meteor.call 客户端进行回调。

从文档中：

> 在客户端，如果你不传递回调并且你不在存根中，调用将返回 undefined，你将无法获取方法的返回值。那是因为客户端没有纤程，所以实际上没有任何方法可以阻止方法的远程执行。

所以你应该改变这个

```
console.log(Meteor.call('upload', f, content)); 
```

对此

```
Meteor.call('upload', f, content, function(error, result){console.log(result);}); 
```

# java - Maven 找不到本地依赖

> ID：10263935
> 
> 赞同：2
> 
> 时间：2012-04-21T23:26:00.477
> 
> 标签：java, maven, build, maven-scm, warp

我正在尝试按照此站点上的说明进行操作：

[http://trac.erichseifert.de/warp/wiki/DeveloperGuide](http://trac.erichseifert.de/warp/wiki/DeveloperGuide)

我已经获得了所有源代码 - 并且在 mpqparser 和 vectorgraphics2d 上都完成了 mvn install - 然后我进入 gral 文件夹 - 并尝试运行它，我遇到了这个错误：

```
> $ mvn install
[INFO] Scanning for projects...
[WARNING]
[WARNING] Some problems were encountered while building the effective model for
de.erichseifert.gral:GRAL:jar:0.8
[WARNING] 'reporting.plugins.plugin.version' for org.apache.maven.plugins:maven-
changelog-plugin is missing. @ line 143, column 17
[WARNING]
[WARNING] It is highly recommended to fix these problems because they threaten t
he stability of your build.
[WARNING]
[WARNING] For this reason, future Maven versions might no longer support buildin
g such malformed projects.
[WARNING]
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building GRAL Graphing Library 0.8
[INFO] ------------------------------------------------------------------------
[WARNING] The POM for de.erichseifert.vectorgraphics2d:VectorGraphics2D:jar:0.6
is missing, no dependency information available
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0.329s
[INFO] Finished at: Sun Apr 22 00:18:13 BST 2012
[INFO] Final Memory: 3M/122M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project GRAL: Could not resolve dependencies f
or project de.erichseifert.gral:GRAL:jar:0.8: Failure to find de.erichseifert.ve
ctorgraphics2d:VectorGraphics2D:jar:0.6 in http://repo.maven.apache.org/maven2 w
as cached in the local repository, resolution will not be reattempted until the
update interval of central has elapsed or updates are forced -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e swit
ch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please rea
d the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyReso
lutionException 
```

我认为它正在尝试加载刚刚在 vectorgraphics2D 文件夹中构建的 jar - 但我不确定 wiki 说明是否缺少步骤，或者是否需要设置某些内容。

gral 的 pom.xml 具有以下作为其依赖关系的声明：

```
<dependencies>
        <dependency>
                <groupId>junit</groupId>
                <artifactId>junit</artifactId>
                <version>4.8.1</version>
                <scope>test</scope>
                <optional>true</optional>
        </dependency>
        <dependency>
                <groupId>de.erichseifert.vectorgraphics2d</groupId>
                <artifactId>VectorGraphics2D</artifactId>
                <version>0.6</version>
        <optional>true</optional>
        </dependency>
  </dependencies> 
```

请有人可以帮助我解决这个问题 - 这是我第一次体验 Maven！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T11:39:53.647

正如 siegl 在评论中所说，听起来您没有安装 VectorGraphics2D 0.6 版 - 如果您安装了，该 jar 应该已经出现在目录中`~/.m2/repository/de/erichseifert/vectorgraphics2d/VectorGraphics2D/0.6`。您也有一个目录的事实`~/.m2/repository/de/erichseifert/vectorgraphics2d/VectorGraphics2D/0.9-SNAPSHOT`听起来很可疑，这就是您构建和安装的目录。

maven 的 repo 很容易理解 - 目录只是由组和工件 ID 和版本组成。

以上是有道理的——你给出的指令告诉你构建 VectorGraphics2D 的主干，它可能不再是 0.6。

所以你有两个选择——要么在 gral pom 中将依赖项更改为 0.9-SNAPSHOT 并尝试链接到它，要么查看并构建 VectorGraphics2D 的 0.6 版本。我建议做后者，因为它更有可能按预期工作（0.9 中的 API 可能已经改变）。

从[http://trac.erichseifert.de/vectorgraphics2d/browser#tags](http://trac.erichseifert.de/vectorgraphics2d/browser#tags)看起来你想要：

```
rm vectorgraphics2d
svn co svn://erichseifert.de/vectorgraphics2d/tags/0.6 vectorgraphics2d 
```

然后像以前一样继续。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T09:39:23.070

关键是 GRAL 来自一个标签，这意味着它是一个稳定的版本。这意味着您需要将 mpqparser 和 vectorgraphics2d 的依赖关系更改为适当的版本（...-SNAPSHOT）并再次尝试...但在您需要先删除 .m2/repository/erichseifert/... 文件夹之前...

# android - 应用程序在 Intent 上崩溃

> ID：10263938
> 
> 赞同：0
> 
> 时间：2012-04-21T23:26:47.823
> 
> 标签：android, android-intent

我正在尝试从 ShoutActivity 做一个意图，将活动扩展到 MyListActivity，在 Click 上扩展 ListActivity

应用程序到达意图时

代码：

第一项活动：

```
public class ShoutActivity extends Activity implements View.OnClickListener{
    /** Called when the activity is first created. */

private Button b1;
private Button b2;
private EditText text_box;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    b1 = (Button) this.findViewById(R.id.button1);
    b1.setOnClickListener(this);

    b2 = (Button) this.findViewById(R.id.button04);
    b2.setOnClickListener(this);
            //.....other stuff

}

public void onClick(View v) {
    if (v==b1)
    {   
        //not important
    }
        if(v==b2){

                Intent intent = new Intent();               

intent.setClass(ShoutActivity.this,MyListActivity.class);
);
                        Bundle myBundle = new Bundle();
                        myBundle.putStringArray("List", s1);
                        intent.putExtras(myBundle);
                        startActivity(intent);

        }
    } 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:weightSum="1">

    <EditText android:layout_width="match_parent" android:id="@+id/editText1" android:layout_height="wrap_content">
        <requestFocus></requestFocus>
    </EditText>
    <Button android:text="Shout !" android:id="@+id/button1" android:layout_width="wrap_content" android:layout_height="wrap_content"></Button>
    <Button android:text="View Shouts" android:id="@+id/button04" android:layout_width="wrap_content" android:layout_height="wrap_content"></Button>

</LinearLayout> 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="karim.mobi"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-sdk android:minSdkVersion="8" />
    <uses-permission android:name="android.permission.INTERNET"/>
    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".ShoutActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".MyListActivity" android:label="@string/app_name"
          android:theme="@android:style/Theme.NoTitleBar"/>

    </application>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission>
</manifest> 
```

第二次活动

```
package karim.mobi;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.view.View;
import android.widget.*;
import android.app.*;

public class MyListActivity extends ListActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub

        super.onCreate(savedInstanceState);
        String s[];
        s= savedInstanceState.getStringArray("List");
        setListAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,s));
        getListView().setTextFilterEnabled(true);
    }

} 
```

错误日志：

```
04-21 21:29:31.177: ERROR/AndroidRuntime(789): FATAL EXCEPTION: main
04-21 21:29:31.177: ERROR/AndroidRuntime(789): java.lang.RuntimeException: Unable to start activity ComponentInfo{karim.mobi/karim.mobi.MyListActivity}: java.lang.NullPointerException
04-21 21:29:31.177: ERROR/AndroidRuntime(789):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
04-21 21:29:31.177: ERROR/AndroidRuntime(789):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-21 21:29:31.177: ERROR/AndroidRuntime(789):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-21 21:29:31.177: ERROR/AndroidRuntime(789):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-21 21:29:31.177: ERROR/AndroidRuntime(789):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-21 21:29:31.177: ERROR/AndroidRuntime(789):     at android.os.Looper.loop(Looper.java:123)
04-21 21:29:31.177: ERROR/AndroidRuntime(789):     at android.app.ActivityThread.main(ActivityThread.java:4627)
04-21 21:29:31.177: ERROR/AndroidRuntime(789):     at java.lang.reflect.Method.invokeNative(Native Method)
04-21 21:29:31.177: ERROR/AndroidRuntime(789):     at java.lang.reflect.Method.invoke(Method.java:521)
04-21 21:29:31.177: ERROR/AndroidRuntime(789):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-21 21:29:31.177: ERROR/AndroidRuntime(789):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-21 21:29:31.177: ERROR/AndroidRuntime(789):     at dalvik.system.NativeStart.main(Native Method)
04-21 21:29:31.177: ERROR/AndroidRuntime(789): Caused by: java.lang.NullPointerException
04-21 21:29:31.177: ERROR/AndroidRuntime(789):     at karim.mobi.MyListActivity.onCreate(MyListActivity.java:21)
04-21 21:29:31.177: ERROR/AndroidRuntime(789):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-21 21:29:31.177: ERROR/AndroidRuntime(789):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

**你能告诉我有什么问题吗？**

**请具体**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T23:38:02.877

首先，您必须为您的 MyListActivity 设置内容视图。因此，您需要在**super.onCreate**之后立即调用以下内容：

```
setContentView(R.layout.your_layout_name); 
```

其次，您在同一活动中错误地读取了数组。

改变这个：

```
s= savedInstanceState.getStringArray("List"); 
```

对此：

```
s= getIntent().getExtras().getStringArray("List"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T23:38:14.947

用这个 ：

```
Resources res = getResources () ;
String [] s1 = res . getStringArray ( R . array . strs_array ); 
Intent intent = new Intent();               
intent.setClass(ShoutActivity.this,MyListActivity.class);
);
Bundle myBundle = new Bundle();
myBundle.putStringArray("List", s1);
intent.putExtras(myBundle);
ShoutActivity.this.startActivity(intent); 
```

并在活动 MyListActivity ：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
// TODO Auto-generated method stub
super.onCreate(savedInstanceState);
Bundle callerBundle = getIntent().getExtras();
String s[];
if(callerBundle !=null)
{
s=callerBundle.getStringArray("List");
setListAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,s));
getListView().setTextFilterEnabled(true);
} 
```

# ruby - 红宝石：打印浅色、中色和深色字符

> ID：10263941
> 
> 赞同：0
> 
> 时间：2012-04-21T23:27:05.153
> 
> 标签：ruby, windows, console

'嗨，我想在 Windows 控制台上打印旧的 DOS 字符 176 到 178（填充有渐变的光标），unicode 2591、2592 和 2593，浅色、中色和深色阴影，请问该怎么做？

试过这个

```
p "\u2592" #=> "\u2592"
p [176].pack('U*') => ° 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T00:00:26.017

不要使用`p`; 使用`print`（或者`puts`如果你想要一个尾随换行符）。 `p`使用 显示内容`#inspect`，它为您提供可以复制并粘贴到源代码中的内容，包括引号等`print`，并且`puts`是输出文本的正常方式。

假设您在程序和控制台中正确设置了编码，那么`print "\u2592"`类似的应该可以正常工作。尽管为 Unicode 设置 Windows 控制台可能很棘手，但您可能希望查看一些第三方控制台应用程序。

# python - 是否保证 False“为 0”和 True“为 1”？

> ID：10263942
> 
> 赞同：9
> 
> 时间：2012-04-21T23:27:18.010
> 
> 标签：python, boolean

> **可能的重复：**
> [Python 中的 False == 0 和 True == 1 是实现细节还是由语言保证？](https://stackoverflow.com/questions/2764017/is-false-0-and-true-1-in-python-an-implementation-detail-or-is-it-guarante)

我今天注意到以下使用python 2.6（Cpython）的作品......

```
>>> a=[100,200]
>>> a[True]
200
>>> a[False]
100 
```

这是否可移植到其他 python 实现（例如`True`/`False`保证从 int 继承？`True`保证评估为 1 而不是其他非零数？）有什么情况可以使用？好像可以用作另一种形式的三元算子，不过不知道能得到多少……

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-21T23:35:28.367

它是[语言规范的一部分](http://docs.python.org/reference/datamodel.html#the-standard-type-hierarchy)，因此任何 Python 实现*都应该*将布尔值实现为等效于整数。

> 布尔值
> 
> > 这些代表真值 False 和 True。表示值 False 和 True 的两个对象是唯一的布尔对象。Boolean 类型是纯整数的子类型，在几乎所有上下文中，Boolean 值的行为分别类似于值 0 和 1，例外情况是当转换为字符串时，分别返回字符串`"False"`或。`"True"`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-21T23:36:42.573

是的——这是有保证的——但需要注意的是`True`，`False`可能会被重新分配；但这不会影响布尔运算的结果。（感谢[Ignacio](https://stackoverflow.com/a/10263976/577088)提供的文件证明。）事实上，在没有三元运算符的时候，这是用来模拟它的方法之一。如今，如果您想要一个三元运算符，请使用三元运算符。但有时这种结构仍然有用。例如：

```
>>> even_odd = [[], []]
>>> for i in range(10):
...     even_odd[i % 2 == 1].append(i)
... 
>>> print even_odd
[[0, 2, 4, 6, 8], [1, 3, 5, 7, 9]] 
```

你也可以用字典来做到这一点。它具有等效的三元运算符...

```
>>> even, odd = [], []
>>> for i in range(10):
...     (even if i % 2 == 1 else odd).append(i)
... 
>>> even, odd
([1, 3, 5, 7, 9], [0, 2, 4, 6, 8]) 
```

但我实际上发现列表索引版本更容易阅读，至少在这种情况下是这样。YYMV。

# apache - 本地 Windows 7 开发机器上的 XAMPP 和 Node.js

> ID：10263947
> 
> 赞同：1
> 
> 时间：2012-04-21T23:28:41.020
> 
> 标签：apache, node.js, xampp

我一直在阅读有关如何使用 node.js 向 Web 应用程序添加实时功能的大量内容。我是一名 PHP 开发人员，但我对 javascript 有很好的掌握。我已经安装了 XAMPP 用于开发的 windows 7 机器，我刚刚使用 node.js 站点上的 windows 安装程序安装了 node.js。如何让应用程序与 node.js 服务器通信？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T20:31:25.553

我在 OSX 上，我基本上走的是同样的道路。

首先，不要像 PHP 那样考虑 node.js，并认为你正在 XAMPP 中设置虚拟主机。

您需要考虑让 node.js 作为服务器进行侦听。有几个教程可以解决这个问题，但是这个可以帮助您入门：

[http://www.albatrossrevue.com/2012/01/31/an-introduction-to-node-js/2000](http://www.albatrossrevue.com/2012/01/31/an-introduction-to-node-js/2000)

# facebook - 为 facebook 网站应用程序设置强制权限

> ID：10263948
> 
> 赞同：1
> 
> 时间：2012-04-21T23:29:07.540
> 
> 标签：facebook, authentication, permissions, web, facebook-javascript-sdk

你好 Facebook 开发者社区，

我目前正在使用 HTML/JS 开发多人在线游戏。我只想允许用户注册游戏，我决定允许他们使用他们的 Facebook 帐户登录。我为此创建了一个 Facebook 网站应用程序。

但是当我`fb:login`在我的页面上设置一个按钮时，对话框不会询问我设置的权限（仅供参考：我只是在 Authenticated Referrals 部分配置它们）。

也许我需要在其他地方配置权限，但是使用新的身份验证对话框，我不确定我需要去哪里..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T00:16:07.300

[经过身份验证的推荐](https://developers.facebook.com/docs/opengraph/authentication/#referrals)对 的使用没有影响`fb:login-button`，它们旨在链接到您在 Facebook 本身上的应用程序。

要向用户请求权限，您应该使用[Login Button](http://developers.facebook.com/docs/reference/plugins/login/)`scope`的参数，这是请求和权限的简单示例（HTML5 和 XFBML）：`email``user_location`

```
<div class="fb-login-button" data-scope="email,user_location"></div>

<fb:login-button scope="email,user_location"></fb:login-button> 
```

**更新：**
如评论中所述，这些属性可能很容易被“高级”用户操纵，以避免授予权限。无法指定将要求用户从应用程序设置授予哪些权限。这本身并不是一个真正的问题，因为经过身份验证的推荐人会遇到同样的问题，一旦用户看到身份验证步骤，他可能会将`scope`参数更改为他想要的任何内容。

实际上，您永远不应该信任来自用户的任何内容，因此您最好在他登录后通过查询 Graph API 检查授予的权限：

```
https://graph.facebook.com/me/permissions 
```

如果缺少某些内容，这将返回用户授予您的应用程序的权限列表。

# symfony - sonataadminbundle DateTime::__construct() 期望参数 1 是一个字符串，给定对象

> ID：10263950
> 
> 赞同：0
> 
> 时间：2012-04-21T23:30:30.943
> 
> 标签：symfony, entity, symfony-sonata

当我用奏鸣曲更改数据时间时，它返回错误：

```
DateTime::__construct() expects parameter 1 to be string, object given 
```

这是我的实体：

```
public function setExpiry($dateAsString = null) {
   $this->expiry = new \DateTime($dateAsString);         
} 
```

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:09:12.203

像这样更改设置器，因为奏鸣曲使用 DateTime 对象参数调用它

```
public function setExpiry(\DateTime $datetime){
    $this->expiry = $datetime;
} 
```

# java - 说不是所有的超类都是子类的高级组件对吗？

> ID：10263951
> 
> 赞同：1
> 
> 时间：2012-04-21T23:30:31.987
> 
> 标签：java, design-patterns

“高级”组件是具有根据其他“低级”组件定义的行为的类。例如 Bulb 类需要 Socket 类来实现其 LightOn() 行为。

并非所有超类都是高级组件，也并非所有子类都是低级组件。因为下面的例子。

来自头部优先设计模式的模板方法模式。

```
public abstract class CaffeineBeverage {

    final void prepareRecipe() {
        boilWater();
        brew();
        pourInCup();
        addCondiments();
    }

    abstract void brew();

    abstract void addCondiments();

    void boilWater() {
        System.out.println("Boiling water");
    }

    void pourInCup() {
        System.out.println("Pouring int cup");
    }
}

public class Coffee extends CaffeineBeverage {

    public void brew() {
        System.out.println("Dripping Coffee through filter");
    }

    public void addCondiments() {
        System.out.println("Adding Sugar and Milk");
    }
} 
```

在这个例子`CaffeineBeverage`中类有一个行为`prepareRecipe()`。`brew()`这种行为需要和的子类实现`addCondiments()`。

所以...这意味着这里`CaffeineBeverage`的（超类）是高级组件，`Coffee`（子类）是低级组件。

```
public class superClass {
    public go() {
        //super class implementation
    }
}

public class subClass extends superClass {
    public go() {
        //sub class implementation
    }
} 
```

在这种情况下，`superClass`不需要`subclass`实现它的`go()`方法。

即使一个类具有需要子类实现它的抽象方法，也不意味着超类是高级组件。请参见下面的示例。

```
public abstract class superClass {
    public abstract go();
}

public class subClass extends superClass {
    public go() {
        //subclass implementation;
    }
}

main() {
    superClass s = new subClass();
    s.go();
} 
```

这里 s 不是 superClass 对象...这里是 subClass 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T00:11:51.110

> 说不是所有的超类都是子类的高级组件对吗？

是的，这样说是对的……假设您以正确的方式使用“组件”一词。事实上，作为一般规则，继承不会为组件建模。

例如：

```
 public abstract class Mammal extends Animal {
      ....
  }

  public class Cat extends Mammal {
      ....
  } 
```

猫不是哺乳动物的“组成部分”，哺乳动物也不是动物的“组成部分”。这不是对“组合”或“容器”关系建模。它是对分类关系进行建模；即猫“是”哺乳动物，而哺乳动物“是”动物。

* * *

您的第一个示例有点令人困惑/困惑，因为类名和方法具有矛盾的含义（在我看来）。但看起来您正在为饮料制造设备建模。如果这是正确的，那么您真正建模的关系是“is-a”而不是“component-of”/“part-of”。

* * *

最后，不要纠结于类和继承对于现实世界的“意义”。在实践中，Java 类*很少*用于直接建模现实世界的事物。（您不太可能在真实程序中看到模拟猫和咖啡机的类。）继承的真正用途在于它能够为*代码*提供结构......而不是它能够（粗略地）模拟现实世界。

# c# - 使用 SharpZipLib 并获得进度状态？

> ID：10263952
> 
> 赞同：0
> 
> 时间：2012-04-21T23:30:39.023
> 
> 标签：c#, sharpziplib

**我将如何显示 SharpZipLib 中的压缩进度？**
我正在开发一个将许多文件压缩到单个 zip 文件的小型应用程序。它可能需要一段时间才能完成，可能会有一个显示压缩进度的进度条，那么有没有办法知道**SharpZipLib**中压缩了多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T00:09:17.303

如果您使用 DotNetZip，则会有一个 SaveProgress 事件告诉您它已压缩了多少字节。

DotNetZip SDK 中有代码示例展示了如何使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T00:02:45.310

是的，您可以通过输出流的大小看到压缩了多少，但这不足以显示进度条，您还应该知道最后的输出流有多大，当然您不知道提前。

您可以在压缩单个文件时测量进度，并按文件大小按比例执行此操作，一个文件将进度百分比移动`(size_of_file / total_size_of_all_files) * 100`

例如，假设您有 3 个文件：

```
file1.bin 1000 kb
file2.bin 500 kb
file3.bin 200 kb 
```

第一个文件压缩后移动进度为 59%，第二个文件后移动 29% 到 88%，第三个文件移动到 100%。

# python - 在 1900 年之前的年份使用 datetime.strftime()？("要求年份 >= 1900")

> ID：10263956
> 
> 赞同：35
> 
> 时间：2012-04-21T23:32:13.810
> 
> 标签：python, datetime, strftime

我用了 ： `utctime = datetime.datetime(1601,1,1) + datetime.timedelta(microseconds = tup[5]) last_visit_time = "Last visit time:"+ utctime.strftime('%Y-%m-%d %H:%M:%S')`

但是我的时间是1601，所以报错显示： `ValueError: year=1601 is before 1900; the datetime strftime() methods require year >= 1900`

我用的是python2.7，怎么弄？非常感谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-21T23:53:14.287

您可以执行以下操作：

```
>>> utctime.isoformat()
'1601-01-01T00:00:00.000050' 
```

现在，如果您想要与上面完全相同的格式：

```
iso = utctime.isoformat()
tokens = iso.strip().split("T")
last_visit_time = "Last visit time: %s %s" % (tokens[0], tokens[1].strip().split(".")[0]) 
```

[并不是说这里](http://bugs.python.org/file10253/strftime-pre-1900.patch)似乎有`strftime`修复此行为的补丁（未测试）

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-01T17:18:26.107

该`isoformat`方法接受一个参数，该参数指定在其表示中将日期部分与日期时间 obj 的时间部分分开的字符。所以：

```
>>> utctime.isoformat(" ")
'1601-01-01 00:00:00.000050' 
```

应该这样做。此外，如果您想删除微秒，您可以进行拆分。

```
>>> utctime.isoformat(" ").split(".")[0]
'1601-01-01 00:00:00' 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-08-25T14:24:21.190

有多种更改方法`strftime`可以处理 1900 年之前的日期：

*   ASPN有一个[秘诀，](http://code.activestate.com/recipes/306860-proleptic-gregorian-dates-and-strftime-before-1900/)它为您提供了一个单独的`strftime`方法，您可以使用日期对象调用该方法：`aspn_recipe.strftime(dt, fmt)`如果您自己在模块中设置它
*   正如[@stephen-rumbalski 所说](https://stackoverflow.com/questions/10263956/use-datetime-strftime-on-years-before-1900-require-year-1900/32206673#comment13197466_10263956)，外部[mxDateTime](http://www.egenix.com/products/python/mxBase/mxDateTime/doc/)包支持这一点；但这是使用完全不同的日期对象系统
*   从 version开始`1.5`，[virtualtime](https://pypi.python.org/pypi/virtualtime)包将同时修补`time.strftime`和`datetime.datetime.strftime`在 Python `3.3`+ 中的行为。您可以在不启用其他虚拟时间功能​​的情况下利用这一点。（*免责声明：我在这个包上工作*）

请注意 Python `2.7`，`3.0`并且`3.1`在 1900 年之前`3.2`有错误，Python 在 1000 年之前有错误。此外，预`3.2`版本将介于和之间的年份解释为介于`0`和之间。以后的 Python 版本支持 中的所有正年份（以及 中的负年份），并且不会在和之间进行任何年份映射。`99``1969``2068``3.3``datetime``time.strftime``time.strftime``0``99`

最初的[Python 错误](http://bugs.python.org/issue1777412)解释说，他们认为这是 Python 2.7 中的一个特性（大概是因为它避免了`strftime`对这些日期缺乏系统支持），然后通过重新实现功能逐渐在 Python 3 系列中对其进行处理。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-02-24T16:43:05.770

我建议使用[箭头](https://arrow.readthedocs.org/en/latest/)（它是 datetime 和 dateutil 的抽象包），它非常容易处理各种 datetime 对象，即使在 Python 2.6/7.x 和 1900 年之前的日期中也是如此。

例如：

```
>>> import arrow

>>> in_date_str = "1853-10-30T13:36:41.942623+00:00"
>>> in_date_obj = arrow.get(crea)
>>> print(in_date_obj)
arrow[1853-10-30T13:36:41.942623+00:00]>

# basic formatting
>>> in_date_obj.format()
u'1853-10-30 13:36:41-00:00'

# advanced formatting
>>> in_date_obj.format("dddd D MMMM YYYY", "fr_FR")
u'Dimanche 30 Octobre 1853'

# humanized delta
>>> in_date_obj.humanize()
u'162 years ago'
# easy localization handling
>>> in_date_obj.humanize(locale="fr_FR")
u'il y a 162 ans' 
```

# jquery - Django jquery .load 函数

> ID：10263960
> 
> 赞同：1
> 
> 时间：2012-04-21T23:33:03.077
> 
> 标签：jquery, django, load

我正在尝试使用 jquery .load() 函数将 django url 加载到 div 中，并且 div 中没有出现任何内容。我很确定它根本没有加载，因为如果我使用萤火虫它不会显示任何内容。

这是被调用的加载函数：

```
$(document).ready(function(){
    $("#create").click(function(){
        $("#popupContact").load("/cookbook/createrecipe");
    });
}); 
```

这是我的模板：

```
//snip
    <div id="popupContact" class="popup">
        <a id="popupContactClose" style="cursor:pointer;float:right;">x</a>                        
    </div>
    <div id="backgroundPopup">
    </div>  
//snip 
```

这是具有创建 ID 的元素：

```
{% block footer %}
        <div id="create" style="cursor:pointer" >Create New Recipe</div>
{% endblock %} 
```

链接 /coookbook/createrecipe 在“a”链接标签中使用时工作正常，但是当我尝试切换到加载内容时它不再工作

谢谢你的帮助

零食鱼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:43:16.827

我将 javascript 代码从我的模板移动到我的 base.html 模板，它似乎工作正常

谢谢你

零食鱼

# c# - 查找 ToolStripMenuItem 的父控件

> ID：10263962
> 
> 赞同：6
> 
> 时间：2012-04-21T23:33:16.617
> 
> 标签：c#, winforms, c#-4.0

我有一个附加到多个控件的 ContextMenuStrip。它有项目{添加、删除、编辑}。当用户右键单击我的一个列表框控件（弹出此上下文菜单）并选择“添加”时，如何从传入的 ToolStripMenuItem 引用派生列表框控件？

```
 private void OnAddEntry(object sender, EventArgs e)
    {
        // Example: ?????
        ListBox lb = sender.Parent;
    } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-22T01:00:42.300

马克，试试这个：

```
((ContextMenuStrip)(((ToolStripMenuItem)sender).Owner)).SourceControl 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T23:54:04.533

我猜你可以沿着父母链向上走，直到找到列表框。

您可以使用 OwnerItem 属性来加速此操作以直接进入工具条。

您始终可以将项目的标签设置为列表框，然后根据需要使用它。

# wpf - WPF，为什么字体的绑定现在失败了？

> ID：10263963
> 
> 赞同：0
> 
> 时间：2012-04-21T23:33:28.583
> 
> 标签：wpf, binding, listbox

我玩弄了这段代码，改变了一些对齐问题。现在与字体的绑定失败了。为什么。需要帮助谢谢。

```
<Window x:Class="FontViewer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Font Viewer" Height="480" Width="600">
    <DockPanel Margin="8" LastChildFill="False">     
        <Border DockPanel.Dock="Top"
                CornerRadius="6"
                BorderThickness="1"
                BorderBrush="Gray"
                Background="LightGray"
                Padding="8"
                Margin="0 0 0 8">
            <TextBlock FontSize="14"
                       TextWrapping="Wrap">
                Select a font to view from the list below.
                You can change the text by typing in the region at the bottom.
            </TextBlock>
        </Border>
        <ListBox x:Name="FontList"
                 DockPanel.Dock="Left"
                 ItemsSource="{x:Static Fonts.SystemFontFamilies}"
                 Width="160"/>
        <StackPanel Margin="8 0 8 8" DockPanel.Dock="Bottom">
            <TextBlock Text="{Binding ElementName=SampleText, Path=Text}"
                       FontFamily="{Binding ElementName=Fontlist, Path=SelectedItem}"
                       FontSize="10"
                       TextWrapping="Wrap"
                       Margin="0 0 0 4"
                       HorizontalAlignment="right"
                       VerticalAlignment="Bottom"/>
            <TextBlock Text="{Binding ElementName=SampleText, Path=Text}"
                       FontFamily="{Binding ElementName=Fontlist, Path=SelectedItem}"
                       FontSize="16"
                       TextWrapping="Wrap"
                       Margin="0 0 0 4"/>
            <TextBlock Text="{Binding ElementName=SampleText, Path=Text}"
                       FontFamily="{Binding ElementName=Fontlist, Path=SelectedItem}"
                       FontSize="24"
                       TextWrapping="Wrap"
                       Margin="0 0 0 4"
                       HorizontalAlignment="right"/>
            <TextBlock Text="{Binding ElementName=SampleText, Path=Text}"
                       FontFamily="{Binding ElementName=Fontlist, Path=SelectedItem}"
                       FontSize="32"
                       TextWrapping="Wrap"/>
        </StackPanel>
        <TextBox x:Name="SampleText"
                 VerticalAlignment="Top"
                 MinLines="2"
                 Margin="8 0 0 0"
                 TextWrapping="Wrap"
                 ToolTip="Type here to change the priview text.">
            The quick brown fox jumps over the lazy dog.
        </TextBox>
    </DockPanel>

</Window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T00:52:35.473

你不小心变成`<ListBox x:Name="Fontlist"`了`<ListBox x:Name="FontList"`.

# php - 从 MySQL 查询中删除 PHP 数组中的重复结果

> ID：10263964
> 
> 赞同：0
> 
> 时间：2012-04-21T23:33:31.610
> 
> 标签：php, mysql, arrays, duplicate-removal

我正在寻找一种方法，可以从生成的 MySQL 查询中删除 PHP 数组中的重复值。到目前为止，我得到了我想要的查询，但一致地显示了任何重复项。我需要为导航菜单删除它们。任何帮助，将不胜感激。

这是我目前所拥有的......

```
$c_search = mysql_query("SELECT * FROM members WHERE interest1 LIKE '%$input%' or interest2 LIKE '%$input%' or interest3 LIKE '%$input%'");
$array = Array();
while($rows = mysql_fetch_assoc($c_search)) {
array_push($array, $rows['interest1']);
array_push($array, $rows['interest2']);
array_push($array, $rows['interest3']);
for($i=0; $i<count($array); $i++) {
echo $array[$i] . "\n";
}
} 
```

我尝试将 MySQL 查询更改为使用 DISTINCT，但不走运。我尝试使用 array_unique($array, SORT_STRING)，没有运气。不知道还有什么可以尝试的。请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T23:49:22.930

选项之一：手动创建阵列，执行检查`if (!in_array($array))`

# list - Haskell - 从列表列表中获取 n 个列表

> ID：10263965
> 
> 赞同：0
> 
> 时间：2012-04-21T23:33:34.730
> 
> 标签：list, haskell, functional-programming

嘿伙计们，所以我正在尝试从列表列表中获取 n 个列表。我想知道haskell中是否有一种类似于“take”和“drop”方法的方法，但是否适用于我的情况。例如：

`Input = [ [1,2,3,4], [5,6,7,8], [9,1,2,3], [4,5,6,7], [8,9,1,2], [3,4,5,6] ]`

我希望能够从这个列表列表中获取前 3 个元素，并最终得到如下内容：

`Output = [ [1,2,3,4], [5,6,7,8], [9,1,2,3]]`

我还希望能够从这个列表列表中删除前 3 个元素，并最终得到如下内容：

`Output = [[4,5,6,7], [8,9,1,2], [3,4,5,6]]`

有没有可能在haskell中做这样的事情。？谁能指出我如何解决这个问题的正确方向。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T23:35:36.993

`take`并`drop`做到这一点。它们对所有元素类型都一样，即使元素类型是列表类型。

```
Prelude> take 3 [[1,2,3,4],[5,6,7,8],[9,10,11,12],[13,14,15,16],[17,18,19,20]]
[[1,2,3,4],[5,6,7,8],[9,10,11,12]]
Prelude> drop 3 [[1,2,3,4],[5,6,7,8],[9,10,11,12],[13,14,15,16],[17,18,19,20]]
[[13,14,15,16],[17,18,19,20]] 
```

# java - 不应将Set作为对象声明

> ID：10263966
> 
> 赞同：0
> 
> 时间：2012-04-21T23:33:53.153
> 
> 标签：java, generics, extends

编码

```
Set<? extends MyClass> mySet = new HashSet<>();
mySet.add(new MyClass()); 
```

产生错误信息。原因是编译器不知道*mySet 的类型。*它只知道*mySet*的类型是*Set<SomeType>*，其中*SomeType*是*MyType 的子类型。* 由于编译器不知道 *Set<? **extends** MyClass>*指的是它允许插入到该类型*集合中的唯一内容是***null。**

由于这非常令人困惑，并且由于唯一可能元素为**null**的集合很少使用，因此禁止使用*<? **extends** SomeClass>*声明对象时，即如上例所示。这种形式应该*只*用于声明稍后将具体化的抽象（例如参数或泛型类或方法）。

我意识到这不是一个问题，但我想知道对这个想法的反应是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T23:36:30.067

我不确定我是否买了它。我可以想象的情况

```
Set<? extends MyClass> mySet = getOtherSet(); 
```

where`getOtherSet`的返回类型可能是`Set<MySubClass>`，甚至是`Set<? extends MyClass>`. 也就是说，并且应该是对泛型的合法使用。

将上述合法使用与您描述的有问题的情况区分开来的唯一方法正是 Java 已经做的——它在编译时产生错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T05:13:11.087

`Set<? extends MyClass>` is a perfectly useful type in general. You can have a method argument that is `Set<? extends MyClass>`, that allows you to call it with `Set<OneClass>` or `Set<AnotherClass>`. If all the method needs to do is get `MyClass` elements out of it, it's fine. Or, you can have a statement like

```
Set<? extends MyClass> mySet = someObject.someMethod(); 
```

where the method could return sets of different types (some instances might return `Set<OneClass>`, while others might return `Set<AnotherClass>`), and all you need to do with it now is get `MyClass` things out of it.

The example you are showing specifically deals with initializing `Set<? extends MyClass>` with a new empty set. I agree that this case is not that useful. However, if we need to make a rule to disallow this case, it would have to make assigning an object creation expression different from assigning other expressions (like a method call), even if they are equivalent (the method call could also be just returning a new empty set). I think that it would be unreasonable to explicitly exclude such a case when it does not do any harm. You could similarly argue that being able to create arrays of length 0 is a pretty useless, and should be disallowed; however, it makes the language more general to be able to handle edge cases.

# macos - 在哪里找不到命令 os x

> ID：10263967
> 
> 赞同：7
> 
> 时间：2012-04-21T23:34:02.407
> 
> 标签：macos, unix, terminal

好的，所以标题很容易解释，当我输入`where ...`命令时它会返回

```
-bash: where: command not found 
```

我目前的 bash 个人资料包括：

```
export PATH="/usr/local/lib:$PATH"
export PATH="/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/lib/node_modules/bin:$PATH" 
```

我用谷歌搜索了一段时间，发现大多数人都需要`/usr/bin`，`/usr/sbin`而我两者都有。

有任何想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-21T23:42:19.517

"where" 是 csh 的内置 shell。那是你真正想要的吗？

"which" 和 "whereis" 在 /usr/bin 下，告诉你在哪里可以找到给定的命令。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-22T00:58:33.773

正如 Stuart 所说，`where`是一个 tcsh 内置命令。这是命令的扩展版本`which`；`which`告诉您命令名称解析为什么，并显示可能找到命令`where`的所有位置（包括别名、内置命令和可执行文件）的列表。`$PATH`

bash 等价物是`type -a`.

如果您愿意，可以将此函数定义添加到您的`.bashrc`or中`.bash_profile`：

```
where() { type -a "$@" ; } 
```

输出的格式并不完全相同，但它为您提供了相同的信息。

（或者您可能会考虑只是重新训练自己使用`type -a`而不是`where`。）

# xcode - 如何从 didSelectRowAtIndexPath 访问 UITableView 部分标签

> ID：10263968
> 
> 赞同：1
> 
> 时间：2012-04-21T23:34:03.000
> 
> 标签：xcode, tableview, sections

在我的 tableView didSelectRowAtIndexPath 中，我可以访问单元格 textLabel。如何访问部分标签？

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    topPlacesAppDelegate *appDelegate = (topPlacesAppDelegate *) [[UIApplication sharedApplication] delegate];  
    appDelegate.chosenPhoto = [self.topPlaces objectAtIndex:indexPath.row];  
. . . 
    UITableViewCell *mycell = [tableView cellForRowAtIndexPath:indexPath];
    NSLog(@"   indexPath.section / Row = %i / %i", indexPath.section, indexPath.row);
    NSLog(@"   textLabel.text          = %@", mycell.textLabel.text);
    NSLog(@"   detailTextLabel.text    = %@", mycell.detailTextLabel.text);

    [self performSegueWithIdentifier:@"Show Site Table" sender:nil];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:44:44.097

听起来您正在寻找表格部分标题。我认为您无法读取或以其他方式访问该数据。但是您可以使用 UITableViewDataSource 上的方法进行*设置：*

```
-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section 
```

此处描述了详细信息：

[在运行应用程序时更改 UITableView 部分页眉/页脚？](https://stackoverflow.com/questions/1547497/change-uitableview-section-header-footer-while-running-the-app)

# prolog - 遍历/记录匹配的谓词

> ID：10263970
> 
> 赞同：2
> 
> 时间：2012-04-21T23:34:24.433
> 
> 标签：prolog

我有一系列关系，我想通过记录匹配来像图表一样遍历它们。例如，在支持以下库函数进行图形操作的系统中，我们有以下奇怪的情况：

```
image(raw).
image(png).
image(bitmap).
image(tiff).
conversion(tiff2bitmap, tiff, bitmap).
conversion(bitmap2png, bitmap, png).
conversion(png2raw, png, raw).
conversion(raw2bitmap, raw, bitmap).
conversion(png2tiff, png, tiff).

operation(crop, raw, raw). 
```

因此，在上面的示例中，如果我们想要**裁剪****tiff**，您必须执行以下操作：

*   将 tiff 转换为位图
*   将位图转换为 png
*   将 png 转换为 raw
*   使用裁剪操作
*   将原始数据转换为位图
*   将位图转换为 png
*   将 png 转换为 tiff

例如，我可以坐在 Prolog REPL 上，首先询问将 tiff 转换为位图的操作：

```
?- conversion(OP1, tiff, F1).
OP1 = tiff2bitmap,
F1 = bitmap .
?- conversion(OP2, F1, F2).
OP2 = tiff2bitmap,
F1 = tiff,
F2 = bitmap ;
OP2 = bitmap2png,
F1 = bitmap,
F2 = png 
... and so on 
```

我希望能够在 Prolog 中遵循以下逻辑，但我不知道如何处理。我想我需要使用递归规则和累加器。我们可以使用以下方法来解决如何裁剪 tiff。我可以像这样手动解决上述问题：

```
/* the op is op in operation(op, x, x) */
conversions(Op, In, Steps) :-
  operation(Op, In, Out); /* no conversions necessary */
  conversion(C1, O1, O2),/* switch the incoming/outgoing to */
  conversion(C2, O2, O3), /* match successive conversions */
  conversion(C3, O3, O4), /* A->B, B->C, C->D */

  /* adding the matches C1-C3 to steps */ 
```

我更喜欢使用累加器和递归规则自动处理这个问题，但我不知道如何处理这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T12:28:25.330

在larsmans提到“路径搜索”之后，我搜索并发现了一个“ [TekTips问题](http://www.tek-tips.com/viewthread.cfm?qid=1607508)”。由此看来，以下似乎有效：

```
image(raw).
image(png).
image(bitmap).
image(tiff).
conversion(tiff2bitmap, tiff, bitmap).
conversion(bitmap2png, bitmap, png).
conversion(png2raw, png, raw).
conversion(raw2bitmap, raw, bitmap).
conversion(png2tiff, png, tiff).

operation(crop, raw, raw).

sconversions(End, A, End, [Conv]) :-
    conversion(Conv, A, End).

sconversions(End, A, B, Ops) :-
    conversion(X, A, C),
    sconversions(End, C, B, TailOps),
    Ops = [X|TailOps].

convert(Op, A, Path) :-
    operation(Op, In, _),
    sconversions(In, A, In, Path).

convertKeep(Op, A, Path) :-
    operation(Op, In, Out),
    sconversions(In, A, In, CPath),
    sconversions(A, Out, A, RPath), /* backward */
    append(CPath, RPath, Path). 
```

不考虑输出格式的转换：

```
?- convert(crop, tiff, Ops).
Ops = [tiff2bitmap, bitmap2png, png2raw, crop] 
```

下面显示了转换： ?- convertKeep(crop, tiff, Ops)。操作 = [tiff2bitmap, bitmap2png, png2raw, 裁剪, raw2bitmap, bitmap2png, png2tiff]

我是 Prolog 的新手，访问者最好学习 larsmans 的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-21T21:26:25.377

在描述列表时，请始终考虑使用 DCG。在您的情况下，您只需要以下内容：

```
conversions(S, S) --> [].
conversions(S0, S) -->
        { conversion(Op, S0, S1) },
        [Op],
        conversions(S1, S). 
```

您现在可以使用迭代深化来详尽地尝试越来越长的操作列表，直到达到所需的目标状态。例如，要从`tiff`到`raw`：

```
?- length(Ops, _), phrase(conversions(tiff, raw), Ops).
Ops = [tiff2bitmap, bitmap2png, png2raw] . 
```

# asp.net-mvc-3 - EF4.3 知道上下文是否已成功插入实体

> ID：10263973
> 
> 赞同：2
> 
> 时间：2012-04-21T23:35:15.090
> 
> 标签：asp.net-mvc-3, entity-framework, dbcontext

我在通用基类中有以下方法：

```
 public virtual void Insert(TEntity entity) {
        dbSet.Add(entity);
    } 
```

我的服务层使用该`Insert`方法添加新记录。现在我希望能够返回一个布尔值，以确保它正确插入。类似于以下内容：

```
 public virtual int Count {
        get {
            return dbSet.Count();
        }
    }

    public virtual bool Insert(TEntity entity) {
        int count = this.Count;
        dbSet.Add(entity);

        return this.Count == count + 1;
    } 
```

有没有更优雅的方法呢？我是否完全错误地接近它？我可以对 Delete 方法执行类似的操作，但是如何检查是否`Update`已成功执行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T04:37:01.637

你不需要这样做。Add 要么成功，要么抛出异常。它不能不添加和返回而不抛出。

更重要的是，查询不会立即执行。它只是排队，直到调用 Commit (context.SaveChanges())。所以你直到稍后才知道实际的 SQL 是否失败。

# garbage-collection - 在 RAD 中运行垃圾收集器

> ID：10263979
> 
> 赞同：0
> 
> 时间：2012-04-21T23:35:38.130
> 
> 标签：garbage-collection, rad

在 RAD 中，有没有办法在运行 RAD 本身的 jvm 上强制运行垃圾收集器？如果没有，我可以运行一个将连接到 RAD jvm 并触发其垃圾收集器的 java 程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T03:53:08.917

考希克，

Eclipse 现在允许查看运行它的 JVM 的堆状态已经有一段时间了。它适用于基于它构建的所有产品。

转到 Preferences -> General 并检查 Show Heap Status。

在屏幕的右下方，您应该找到堆信息，然后是垃圾桶。

您可以单击垃圾桶以请求 eclipse/RAD 运行 GC。我相信这就是你要找的！

高温高压

芒鲁

# php - 从字符串中删除@hotmail.com

> ID：10263983
> 
> 赞同：-6
> 
> 时间：2012-04-21T23:36:12.390
> 
> 标签：php

我想知道你将如何`@hotmail.com`删除`example@hotmail.com`？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T23:42:44.370

```
function remove_domain($email) {
  $v = explode("@", $email);
  return $v[0];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T00:10:38.427

## Preg的方法：

这将从任何电子邮件 中删除**任何域名：**

```
// Sample email address for testing:
$email = "example@anything.tld";
// Now let's remove @anything.tld:
$email = preg_replace('/@.+/','',$email);
// And then echo results out to see what we got:
echo $email; 
```

所以这里最**重要的是**这一行，重点关注它：

```
echo preg_replace('/@.+/', '', 'example@deleteme.com'); 
```

它使用正则表达式匹配删除`@`以至少一个任意字符开头的任何内容。之后它会打印出结果。因此，所有这些都可以通过单行来完成，并且每个域都得到平等的支持（丢弃）。

之后`$email`只包含`"example"`删除`@anything.tld`。

这种方式`$email`可以`"my.mail.box@hotmail.com"`，`"somebody@mail.ex-ample.com"`或者任何你能想象到的方式。

您可以在此处阅读有关正则表达式的更多信息：[function.preg-](http://php.net/manual/en/function.preg-replace.php) replace.php ，此处：[pcre.org](http://www.pcre.org/)或此处：[wikipedia/Regular_expression](http://en.wikipedia.org/wiki/Regular_expression)。

## 如果您想使用 str_replace：

```
$domain = 'gmail.com';
$email = str_replace('@'.$domain, '', $email); 
```

PHP手册页在这里：[function.str-replace.php](http://php.net/manual/en/function.str-replace.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T23:39:06.927

你可以使用`str_replace`，

```
$email = 'example@hotmail.com';
echo str_replace('@hotmail.com', '', $email); // example 
```

在此处查看文档：http: [//php.net/manual/en/function.str-replace.php](http://php.net/manual/en/function.str-replace.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T23:41:54.693

我不确定这是否是最好的方法，但您可以尝试以下方法：

```
$string = "email@hotmail.com";
$new_string = explode("@", $string);
print $new_string[0] // will print 'email' 
```

希望能帮助到你！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-21T23:47:54.413

或者简单地使用[strstr(string $haystack ,mixed $needle [,bool $before_needle = false ])](http://php.net/manual/en/function.strstr.php)，那么您不需要检查特定域：

```
$email = 'blabla@hotmail.com';

echo strstr($email, '@', true); 
```

# php - cURL - 当我知道我应该得到 302 时，为什么我得到 200 OK？

> ID：10263989
> 
> 赞同：0
> 
> 时间：2012-04-21T23:37:17.850
> 
> 标签：php, curl

我正在我的网站上测试 cURL，以更好地学习 cURL。
我注意到，即使我正确设置了参数，当我应该得到 302 并重定向到 login.php 时，我得到 200 OK...

这无论如何都与cookie有关吗？

```
$cookiefilename="c://xampp/htdocs/Mysite/cookie.txt";
$curl = curl_init();
$theUrl = "http://localhost/Mysite/index.php";
curl_setopt ($curl, CURLOPT_URL, $theUrl);
curl_setopt($curl, CURLOPT_TIMEOUT, 10);
curl_setopt ($curl, CURLOPT_USERAGENT, "User-Agent  Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0; MAAU)");

curl_setopt($curl, CURLOPT_COOKIESESSION, true);
curl_setopt($curl, CURLOPT_COOKIEFILE, $cookiefilename);
curl_setopt($curl, CURLOPT_COOKIEJAR, $cookiefilename); 
curl_setopt($curl, CURLOPT_FRESH_CONNECT , 1);
curl_setopt($curl, CURLOPT_FOLLOWLOCATION  ,0);
curl_setopt($curl, CURLOPT_HEADER      ,1);  
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);

curl_setopt($curl, CURLOPT_POST      ,1);
$fields_string = "username=*******&password=******&submit=login";
curl_setopt($curl, CURLOPT_POSTFIELDS, $fields_string);
curl_setopt($curl, CURLOPT_HTTPGET , 1);
$html=curl_exec($curl);
curl_close($curl); 
```

# c++ - 将 char 数组分配给文字字符串 - C++

> ID：10263992
> 
> 赞同：5
> 
> 时间：2012-04-21T23:37:56.600
> 
> 标签：c++, arrays, string, char

```
char arr[3];
arr="hi";// ERROR
cin>>arr;// and at runtime I type hi, which works fine. 
```

1）有人可以向我解释为什么吗？

2）究竟什么是“hi”的类型，我知道它被称为文字字符串。但它也只是一个字符数组吗？

3) 不是 cin>>arr；就像将 arr 分配给您在运行时键入的内容一样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T23:39:54.073

C++ 中的数组不是实际类型，只是一系列值的结构化表示，如果您应该在任何地方找到它（它们衰减为指针），它也不是指针。你不能像使用其他类型一样使用它们，包括赋值。选择是增加对数组的大量支持，或者使它们尽可能简单和快速。选择了后者，这是 C++ 与其他一些语言的区别之一。

要复制数组，请一次复制每个元素。

在 C++11 中，有一个 STL 容器`std::array`。它被设计为适合作为具有运算符重载的普通数组，以及与 STL 的其余部分相关联。

更好的选择是`std::string`. 它包含了您想要的行为以及更多，并且专为保存字符数组而设计。

正如 Konrad Rudolph 指出的那样，“hi”是一个`const char [3]`.

至于`cin`原始数组，通过标准方法是不可能的，因为`cin`数组没有提供重载。不过，可以创建自己的重载。但是，我不确定您将如何解释传递的数组的不同大小，除非您为知道其大小而不是原始数组的容器定义它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-22T00:05:55.527

如果你愿意，你可以声明：

```
char array[] = "hi!"; 
```

创建一个数组并将其“初始化”为 4 个字节长，“嗨！”

```
char const *array2 = "hey!"; 
```

创建一个指向只读内存的指针，一个字符串字面量

```
array2 = array; 
```

您现在可以使用 array2 指针访问数组 1。这称为指针衰减；array 和 array2 不是同一类型，即使它们在这里可以合作。char 类型的*数组*“衰减”为 char 类型的*指针*。

```
array = array2; // ERROR 
```

数组不是指针。您认为数组是指针，实际上，它是预先分配的。您正在尝试分配一个地址，但 array[] 在创建时已经有一个“硬编码”，并且无法更改。

# javascript - socketstream 和 3rd 方回购

> ID：10263995
> 
> 赞同：1
> 
> 时间：2012-04-21T23:38:12.620
> 
> 标签：javascript, node.js, socketstream

如何添加一堆 js 文件但只包含其中一个用于客户端代码？例如，我需要使用[hammer.js](https://github.com/EightMedia/hammer.)并希望将其添加为子模块。我不能简单地将它添加到客户端/代码/应用程序中，因为`SS`它将尝试加载 repo 的所有内容（包括 README.md）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T12:10:40.553

您可以修改您的`code`部分，`ss.client.define`以便 Socketstream 仅加载您指定的文件（而不是驻留在 client/code/app 文件夹中的每个文件 - 这是默认行为）。

例如改变这个：

```
ss.client.define('main', {
  view: 'app.jade',
  css:  ['libs', 'app.styl'],
  code: ['app'], // This is loading every file within the client/code/app/ folder
  tmpl: '*'
}); 
```

对此：

```
ss.client.define('main', {
  view: 'app.jade',
  css:  ['libs', 'app.styl'],
  code: ['app/file1.js', 'app/file2.js', 'app/file4.js'], // SS will only load these files.
  tmpl: '*'
}); 
```

# linux - 是否使用缓冲在 linux ext4 文件系统上写入数据？

> ID：10263998
> 
> 赞同：2
> 
> 时间：2012-04-21T23:38:57.880
> 
> 标签：linux, ext4

1.  我在 linux 2.6 内核上使用 ext4。我有字节数组的记录，范围从几百到 16MB。在应用程序中对每条记录使用 write() 而不是说缓冲 X MB 然后在 X MB 上使用 write() 有什么好处吗？

2.  如果缓冲有好处，那么 ext4 的价值是多少。这个问题是针对那些在 ext4 中分析了多块分配器行为的人。

3.  我的理解是文件系统将以页面大小的倍数缓冲并尝试将它们刷新到磁盘上。如果提供给 write() 的缓冲区大于文件系统缓冲区会怎样？这是强制文件系统刷新到磁盘（）的粗略方法吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:17:26.377

“正确”的答案取决于您真正想对数据做什么。

**write(2)**被设计为单次进入内核空间，并提供对 I/O 的良好控制。但是，除非使用 O_SYNC 打开文件，否则数据只会进入内核缓存，而不是磁盘。O_SYNC 更改以确保文件同步到磁盘。实际写入磁盘是由内核缓存发出的，ext4 将尝试分配大缓冲区来写入以最小化碎片，iirc。通常，使用缓冲文件或 O_SYNC 文件的**write(2)**是控制数据是否进入内核或是否仍在应用程序缓存中的好方法。

但是，对于写入大量记录，您可能对**writev(2)**感兴趣，它从缓冲区列表中写入数据。**与write(2)**类似，它是一个原子调用（当然，这只是在操作系统语义中，而不是实际上在磁盘上，除非再次使用 Direct I/O）。