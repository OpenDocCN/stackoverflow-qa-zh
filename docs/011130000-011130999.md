# StackOverflow 问答 11130000-11130999

# javascript - 从 onclick 事件中打开 YUI 面板

> ID：11130002
> 
> 赞同：0
> 
> 时间：2012-06-21T00:23:52.703
> 
> 标签：javascript, dom-events, yui

我想知道是否可以使用这样的 onclick 事件设置和打开 YUI 面板：

```
<a href="#" onclick="myPanel = new YAHOO.widget.Panel("myPanel"); 
myPanel.setHeader('Header'); myPanel.setBody('Body'); 
myPanel.setFooter('Footer'); myPanel.render('document.body'); 
myPanel.show();"></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T22:54:56.490

要从另一个元素的单击事件中显示面板，您需要：创建面板，将其隐藏（使用`visible: false`），然后`show()`从单击事件处理程序中显示。这是一个例子：

```
var panel = new Y.Panel({
    bodyContent: 'foo',
    centered: true,
    width: 200,
    height: 100,
    visible: false //render the panel, but keep it hidden
});
panel.render();

// show the panel with a click
Y.one('#foo').on('click', function () {
    panel.show();
}); 
```

# scala - Akka actor、Futures 和闭包

> ID：11130003
> 
> 赞同：12
> 
> 时间：2012-06-21T00:23:58.787
> 
> 标签：scala, closures, actor, akka, future

我在[Akka 文档](http://doc.akka.io/docs/akka/2.0.2/scala/actors.html#Creating_Actors_using_anonymous_classes)中读到，关闭来自封闭参与者的变量是危险的。

> **警告**
> 
> 在这种情况下，您需要小心避免关闭包含 Actor 的引用，即不要从匿名 Actor 类中调用封闭 Actor 的方法。这会破坏参与者封装，并可能引入同步错误和竞争条件，因为其他参与者的代码将同时调度到封闭参与者。

现在，我有两个演员，其中一个向第二个请求一些东西，并对结果做一些事情。在下面我整理的这个示例中，actor *Accumulator*从actor *NumberGenerator 中*检索数字并将它们相加，同时报告总和。

这可以通过至少两种不同的方式完成，如本例所示，使用两个不同的*接收*函数（*A*与*B*）。两者的区别在于*A*不关闭*counter*变量；相反，它等待一个整数并将其相加，而*B*创建一个*Future*关闭*计数器*并进行求和。如果我正确理解它是如何工作的，这发生在一个仅为处理 onSuccess 而创建的匿名参与者中。

```
import com.esotericsoftware.minlog.Log

import akka.actor.{Actor, Props}
import akka.pattern.{ask, pipe}
import akka.util.Timeout
import akka.util.duration._

case object Start
case object Request

object ActorTest {
  var wake = 0

  val accRef = Main.actorSystem.actorOf(Props[Accumulator], name = "accumulator")
  val genRef = Main.actorSystem.actorOf(Props[NumberGenerator], name = "generator")

  Log.info("ActorTest", "Starting !")

  accRef ! Start
}

class Accumulator extends Actor {
  var counter = 0

  implicit val timeout = Timeout(5 seconds)

  // A: WITHOUT CLOSURE
  def receive = {
    case Start => ask(ActorTest.genRef, Request).mapTo[Int] pipeTo self
    case x: Int => counter += x; Log.info("Accumulator", "counter = " + counter); self ! Start
  }
  // B: WITH CLOSURE
  def receive = {
    case Start => ask(ActorTest.genRef, Request).mapTo[Int] onSuccess {
      case x: Int => counter += x; Log.info("Accumulator", "counter = " + counter); self ! Start
    }
  }
}

class NumberGenerator extends Actor {
  val rand = new java.util.Random()

  def receive = {
    case Request => sender ! rand.nextInt(11)-5
  }
} 
```

在这种情况下使用闭包绝对是邪恶的吗？当然，我可以使用 AtomicInteger 而不是 Int，或者在某些网络场景中使用[netty ，在](http://netty.io/)[线程安全](http://lists.jboss.org/pipermail/netty-users/2009-October/001453.html)通道上发出写入操作，但这不是我的意思。

冒着问可笑的风险：Future 的 onSuccess 有没有办法在**这个**演员而不是匿名的中间演员中执行，**而不在***接收*函数中定义一个案例？

**编辑**

更清楚地说，我的问题是：有没有办法强制一系列 Futures 与给定的 Actor 在同一个线程中运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T02:04:13.097

问题是 将在`onSuccess`与参与者将要运行的线程不同的线程`receive`中运行。您可以使用该`pipeTo`方法，或使用[Agent](http://doc.akka.io/docs/akka/2.0.2/scala/agents.html)。制作`counter`an`AtomicInteger`可以解决问题，但它并不那么干净——也就是说，它破坏了 Actor 模型。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T05:31:56.180

实现这种设计的最简单方法是使用“即发即弃”语义：

```
class Accumulator extends Actor {
  private[this] var counter = 0

  def receive = {
    case Start => ActorTest.genRef ! Request
    case x: Int => {
      counter += x
      Log.info("Accumulator", "counter = " + counter)
      self ! Start
    }
  }
} 
```

此解决方案是完全异步的，您不需要任何超时。

# javascript - 使用相同的按钮在 html 中触发事件

> ID：11130004
> 
> 赞同：0
> 
> 时间：2012-06-21T00:24:14.043
> 
> 标签：javascript, html

我想用一个按钮触发一个事件，该按钮将一组元素（文本和按钮类型的输入）的可见性从隐藏更改为可见。现在每次单击触发按钮时，我都希望一组新的相同元素出现在新行上。怎么可能呢？这是代码片段：

```
<script type="text/javascript">
function generatenew()
{
    document.add.property1.style.visibility="visible";
    document.add.button2.style.visibility="visible";
    document.add.button3.style.visibility="visible";
    document.add.button4.style.visibility="visible";
}
</script>
</head>
<body>
    <form name='add' method="post" action="">
    <div id="div"></div>
    <input type="button"  value="+Add" onclick="generatenew();"> 
    <input type="button" value="Edit" name="button2" style="visibility:hidden">
    <input type="text" style="visibility:hidden" size="50" name="property1" placeholder="<street> <city> <ZIP> <country> <lockunitID>">
    <input type="button" style="visibility:hidden" name="button3" value="open main door">
    <input type="button" style="visibility:hidden" name="button4" value="open apartment door">
    <div id="abc"><input type="button" value="save"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T00:31:23.727

如果我很好地理解了您的问题，您所要做的就是放置一个由 onClick 事件触发的函数，（`element.onClick=function();`）您将所有输入类型标签放入函数中，然后结束您的函数托架调用 appendChild 方法，以便每个单击触发元素的显示。

# emacs - 如何让 Emacs 在保存文件之前查询用户（如果用户回答“否”则中止）？

> ID：11130006
> 
> 赞同：2
> 
> 时间：2012-06-21T00:24:38.330
> 
> 标签：emacs, elisp, save, savefiledialog

我想添加一个额外的提示，询问用户是否确定要保存文件，但仅限于某些“受保护”目录中的文件。假设我有一个函数`file-needs-protection-p`，它接受一个文件名并返回 t 如果在保存该文件之前应该查询用户。如何让 Emacs 询问`"This file is protected. Are you sure you want to modify it?"`用户尝试保存此类文件时的问题，然后如果用户回答“否”则让 Emacs 中止保存？

希望在某个地方有一些特殊的钩子，我可以在其中添加一个使用的函数，`yes-or-no-p`如果该函数返回 false，Emacs 将中止保存？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T01:34:39.900

未经测试，但我认为您应该能够使用它`before-save-hook`来执行您的测试并提出您的问题，如果他们回答否，只需提出一个错误：

```
(error "Save aborted by user") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T01:18:35.650

如果你已经有了`file-needs-protection-p`，我认为剩下的很简单：

```
(defun save-buffer-check 
  "If the current buffer is a protected file, query the user before saving."
  (if (file-needs-protection-p (buffer-file-name))
      (if (y-or-n-p 
           "This file is protected. Are you sure you want to modify it?")
          (save-buffer))
    (save-buffer))) 
```

重新绑定它`C-x C-s`，看看它是否满足您的需求。我认为您不需要任何特殊的钩子或建议，只需要一个在调用之前插入对谓词的调用的函数，`save-buffer`或者只是返回而不做任何事情。

# jquery - 用 jQuery 动态替换图像源

> ID：11130008
> 
> 赞同：7
> 
> 时间：2012-06-21T00:24:52.203
> 
> 标签：jquery, replace, image, src, yelp

我正在尝试用我自己的一张图片替换默认的 Yelp 星级图片。为此，我需要为可能已加载的 5 个图像中的每一个找到相应的图像源。然后，基于此，我需要加载我创建的正确图像。

```
<div id="starRating">
    <img src="http://yelp-star-1.png"/>
</div> 
```

因此，yelp-star-1.png 将被替换为 my-star-1.png。等等等等。这可能很简单，但我是 jQuery 新手，我发现的所有东西都不能正常工作。非常感谢您的专业知识！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-21T00:27:42.760

```
$("#starRating img").attr("src", "http://pathto/my-star-1.png") 
```

编辑

我认为您是在询问如何根据当前的内容动态替换 src 。所以如果字符串有一些直接的区别，也许试试

```
var img = $("#starRating img");
img.attr("src", img.attr("src").replace("yelp", "my")); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T00:41:38.833

如果您只是尝试在没有任何模式的情况下进行基本替换：

```
$('img[src="http://website.com/images/yelp-star-1.png"]').attr('src','http://website.com/images/my-star-1.png'); 
```

这可以用于具有 src 属性以开头的图像`http://website.com/images/yelp-star-`

```
$('img[src^="http://website.com/images/yelp-star-"]').each(function() {
   $(this).attr('src', $(this).attr('src').replace("yelp", "my"));
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-12T15:32:25.183

@GrayB 给了我一个很好的解决方案——这不需要你知道绝对的 img src：

```
jQuery('.element img').each(function() {
    jQuery(this).attr('src', jQuery(this).attr('src').replace("find_", "replace_"));
}); 
```

# java - 编程java以确定对称词

> ID：11130012
> 
> 赞同：-5
> 
> 时间：2012-06-21T00:25:28.367
> 
> 标签：java, math, integer, symmetry

我是新来的，但是我很难弄清楚如何编写代码来确定单词的输入并查看第一个是否与单词的结尾匹配。您可以输入 abba 并得到答案，它是均匀对称的，而 aba 是奇怪对称的。

请告诉我如何:(

主要有两点。

**首先** 我想知道它是奇数还是偶数的字母（字母数除以2，如果它以0.5结尾，它是奇怪对称的，如果是一个整数它是均匀对称的。

**第二个** 我想得到（即1=n,2=n-1,3=n-2...）字母在单词中的位置作为执行的主要思想。如果在最后一个字母奇怪的对称词，忽略最后一个字母。

我感谢任何先机或想法：）谢谢！

感谢 KDiTraglia，我编写了代码并编译了，这就是我放的。我没有更进一步。

报告的问题：

线程“main” java.lang.Error 中的异常：未解决的编译问题：reverse 无法解析或不是字段 reverse 无法解析或不是字段 语法错误，插入“）语句”完成 IfStatement

这就是我得到的，KDiTraglia 的帮助

```
public class WordSymmetric {
public static void main(String[] args) {
 String word = "abccdccba";

if ( (word.length() % 2) == 1 ) {
    System.out.println("They are oddly symmetric");
    //odd
}
else {
    System.out.println("They are evenly symmetric");
    //even
}

int halfLength = word.length() / 2;
String firstHalf = word.substring(0, halfLength);
String secondHalf = word.substring(halfLength, word.length());

System.out.println(secondHalf.reverse());

if (firstHalf.equals(secondHalf.reverse()) {
    System.out.println("They match");
    //they match
} 
```

} }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T00:32:30.250

您可以使用模运算符来确定单词是否具有偶数或奇数个字母（java中的％）

```
if ( (word.length % 2) == 1 ) {
    //odd
}
else {
    //even
} 
```

然后只需将字符串分成两半并将末端的反面与前面进行比较

```
int halfLength = word.length / 2;
String firstHalf = word.substring(0, halfLength);
String secondHalf = word.substring(halfLength, word.length);
if (firstHalf.equals(secondHalf.reverse()) {
    //they match
} 
```

像这样的东西应该可以工作，我只是很快就写好了，可能需要进行一些更改以匹配 java 语法。

# jquery - 删除：单击时的悬停样式

> ID：11130014
> 
> 赞同：0
> 
> 时间：2012-06-21T00:25:43.327
> 
> 标签：jquery, css, removeclass

我有一个正在使用的 jsFiddle：http: [//jsfiddle.net/aL7Xe/77/](http://jsfiddle.net/aL7Xe/77/)

这一切都很好，我只需要在单击箭头时蓝色悬停消失，然后在您单击它后返回。

试图通过以下方式实现它：

```
$(this).removeClass('a:hover'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T00:38:23.463

`:hover`你可以通过设置一个伪类来获得你想要的效果`.menutoggle`。尝试这个：

```
.menutoggle, .menutoggle:hover {
    background: grey;
    } 
```

[例子](http://jsfiddle.net/aL7Xe/79/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T00:45:53.123

```
a:active{
    background:transparent;
} 
```

在你的 CSS 中？

# android - 将 FOV 角度转换为透视投影参数

> ID：11130020
> 
> 赞同：3
> 
> 时间：2012-06-21T00:26:22.607
> 
> 标签：android, opengl-es, camera, opengl-es-2.0, perspective

我有一个程序可以获取设备后置摄像头的 FOV 角度，它以度数返回水平和垂直角度，如下所示：

```
54.8
42.5 
```

是否有一个简单的转换可以应用来获得正确的“左、右、下、上”参数以传递到 OpenGL 的 Matrix.frustrumM()？

```
Matrix.frustumM(mProjectionMatrix, 0, left, right, bottom, top, near, far); 
```

我将 OpenGL 形状叠加到 CameraView 上，并希望确保它们相对于相机馈送中的真实世界对象正确绘制，适用于所有设备，无论相机的 FOV 是什么。

非常感谢！

* * *

编辑：这是一个解决方案，以防有人遇到这个问题：

```
private float[] perspectiveM(float fovY, float fovX, float zNear, float zFar)
{
    float[] projMatrix = new float[16];
    float aspect = fovX / fovY;
    fovY = (float) ((fovY /180.0) * Math.PI); // degrees to radians
    float g = (float) (1 / Math.tan(fovY / 2));

    for(int i=0; i<16; i++) {
        switch (i) {

        case 0:
            projMatrix[i] = g / aspect;
            break;
        case 5:
            projMatrix[i] = g;
            break;
        case 10:
            projMatrix[i] = (zFar + zNear)/(zNear - zFar);
            break;
        case 11:
            projMatrix[i] = -1.0f;
            break;
        case 14:
            projMatrix[i] = (2 * zFar * zNear)/(zNear - zFar);
            break;
        default:
            projMatrix[i] = 0.0f;
        }
    }

    return projMatrix;
} 
```

然后将返回结果分配给您的投影矩阵。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T00:43:24.427

我没有意识到 perspectiveM 仅限于某个 API 级别，但您可以轻松地自己重新创建该函数。这些公式位于 gluPerspective 的手册页上，其工作方式相同。

您可以使用以下等式自己构建浮点矩阵：

[http://www.opengl.org/sdk/docs/man/xhtml/gluPerspective.xml](https://web.archive.org/web/20080112123526/http://www.opengl.org/sdk/docs/man/xhtml/gluPerspective.xml)

# php - 使用 AJAX 更新 DOM 以反映数据库中的更改的最佳方法是什么？

> ID：11130021
> 
> 赞同：0
> 
> 时间：2012-06-21T00:26:26.643
> 
> 标签：php, javascript, jquery, mysql, ajax

我正在使用 PHP、MySQL 和 jQuery 构建这个应用程序。本质上，它是一个清单管理应用程序。

我有这些可以异步编辑的清单（以表格形式排列，很像电子表格）；每次发生变化时，都会通过对 PHP 的 AJAX 调用来报告，从而更新 MySQL。

棘手的部分是其他人可能同时编辑同一个清单，如果 jQuery 注意到 JSON 对象之间的更改，清单的内容会更新（它会定期触发 HTTP 请求以 ping 数据库）以及 HTML 表格行中的内容。

这适用于我的清单中的有限数量的项目，但是当我的清单编号相当多的行时，它有点废话和滞后。我知道效率低下的原因在于，每次对清单中的最新项目发出 HTTP 请求时，我都会遍历 HTML 表中的每一行，并将该行的内容与 JSON 中相应的清单项目进行比较反对，看看是否有变化。

我想知道是否有一种更有效的方法来检测我的 JSON 对象与我在屏幕上的内容之间的变化，而无需遍历 DOM？

本质上，如何以最少的 DOM 操作保持大型数据集异步同步？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T00:32:20.773

不是循环遍历 DOM，而是根据用户输入更新本地数据结构。然后将该本地数据结构与从 Web 服务返回的新数据结构进行比较。然后只更新 DOM 中需要通过 ID 更新的节点应该很容易。

# android - Android 广播接收器未启动以更新 AppWidget

> ID：11130023
> 
> 赞同：0
> 
> 时间：2012-06-21T00:26:33.123
> 
> 标签：android, android-intent, android-widget

我正在尝试测试我的应用小部件并已在清单中注册接收器，如下所示：

```
 <receiver android:name=".MyUtilityWidget" android:label="@string/widget_name">
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            </intent-filter>
        <meta-data android:name="android.appwidget.provider" android:resource="@xml/widget_config" />
    </receiver> 
```

MyUtility 代码：

```
 public class MyUtilityWidget extends AppWidgetProvider {

      @Override
      public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {

           my Main Code here.... (widget stuff)
   } 
```

我的小部件启动并执行一次很好（因此我将代码放在此处）。但是广播接收器不工作，我没有收到任何广播。事实上，LogCat 显示意图从未被执行。因此，我的代码块仅在 apk 部署时执行一次，并且不再执行（小部件文本显示，但从不按照我的设置每 30m 更新一次）。

在这里配置...

```
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
android:minWidth="146dip"
android:minHeight="72dip"
android:updatePeriodMillis="1800000"
android:initialLayout="@layout/widget_message"
/> 
```

还 updatePeriodMillis 不能少于 30 分钟？这是调试时非常烦人的问题，因为每次运行我必须等待大约 30 分钟才能检查意图是否触发！

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T01:51:56.497

您需要通过 RemoteViews 抓住您的小部件并相应地更新它。它不只是自动更新。

尝试这样的事情：

```
AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(this
                .getApplicationContext());
        ComponentName thisWidget = new ComponentName(getApplicationContext(),
                MyWidgetProvider.class);
        int[] allWidgetIds2 = appWidgetManager.getAppWidgetIds(thisWidget);
        final int N =allWidgetIds2.length;
        // Perform this loop procedure for each App Widget that belongs to this provider
        for (int i=0; i<N; i++) {
            int appWidgetId = allWidgetIds2[i];
            RemoteViews widgetView = new RemoteViews(getPackageName(), R.layout.widget_layout);
            widgetView.setTextViewText(R.id.some_text_view, "some text"); 
```

# c - 从 C 中执行程序的标准输出中读取的更好方法

> ID：11130029
> 
> 赞同：1
> 
> 时间：2012-06-21T00:27:19.887
> 
> 标签：c, memory-management

我使用管道读取了执行程序的标准输出：

```
int pipes[2];
pipe(pipes);
if (fork() == 0) {
    dup2(pipes[1], 1);
    close(pipes[1]);
    execlp("some_prog", "");
} else {
    char* buf = auto_read(pipes[0]);
} 
```

要从标准输出读取，我有一个函数`auto_read`可以根据需要自动分配更多内存。

```
char* auto_read(int fp) {
    int bytes = 1000;
    char* buf = (char*)malloc(bytes+1);
    int bytes_read = read(fp, buf, bytes);
    int total_reads = 1;
    while (bytes_read != 0) {
        realloc(buf, total_reads * bytes + 1);
        bytes_read = read(fp, buf + total_reads * bytes, bytes);
        total_reads++;
    }
    buf[(total_reads - 1) * bytes + bytes_read] = 0;
    return buf;
} 
```

我这样做的原因是我不知道程序会提前吐出多少文本，而且我不想创建一个过大的缓冲区并成为内存占用者。我想知道是否有：

1.  一种更简洁的方式来写这个。
2.  执行此操作的内存或速度效率更高的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T00:32:03.663

如果[`popen`](http://pubs.opengroup.org/onlinepubs/009696799/functions/popen.html)您只需要从进程中读取并且在 *NIX 平台上，请使用：

```
FILE *programStdout = popen("command", "r");

// read from programStdout (fread(), fgets(), etc.)
char buffer[1024];

while (fgets(buffer, 1024, programStdout))
{
    puts(buffer);
} 
```

编辑：您要求一种将程序输出映射到文件的方法，所以在这里：

```
#import <stdio.h>
#import <unistd.h>
#import <sys/mman.h>

void *dataWithContentsOfMappedProgram(const char *command,  size_t *len)
{
    // read the data
    char template[] = "/tmp/tmpfile_XXXXXX";
    int fd = mkstemp(template);

    FILE *output = fdopen(fd, "w+");
    FILE *input = popen(command, "r");

#define BUF_SIZ 1024
    char buffer[BUF_SIZ];
    size_t readSize = 0;
    while ((readSize = fread(buffer, 1, BUF_SIZ, input)))
    {
        fwrite(buffer, 1, readSize, output);
    }
    fclose(input);

    input = NULL;
#undef BUF_SIZ

    // now we map the file
    long fileLength = ftell(output);
    fseek(output, 0, SEEK_SET);

    void *data = mmap(NULL, fileLength, PROT_READ | PROT_WRITE, MAP_FILE | MAP_PRIVATE, fd, 0);

    close(fd);

    if (data == MAP_FAILED)
        return NULL;

    return data;
}

int main()
{
    size_t fileLen = 0;
    char *mapped = dataWithContentsOfMappedProgram("echo Hello World!", &fileLen);

    puts(mapped);

    munmap(mapped, fileLen);
} 
```

# rest - 是否可以将不同的 url 参数传递给 Camel Multicast EIP 中的各个端点？

> ID：11130033
> 
> 赞同：1
> 
> 时间：2012-06-21T00:27:47.580
> 
> 标签：rest, apache-camel

这是我正在尝试解决的用例 - 所以这是我之前的线程[Apache camel 的扩展，用于聚合多个 REST 服务响应](https://stackoverflow.com/questions/10610820/apache-camel-to-aggregate-multiple-rest-service-responses)

我使用了具有自定义聚合策略的多播组件将传入请求分叉到子请求并聚合它们的响应。在此之前一切正常。

现在对于一个用例，我希望将传入的 URL 参数有选择地传递给某些子服务。前任：

传入请求 - [http://[host]/my-service/scan?foo=a&bar=b&baz=c](http://[host]/my-service/scan?foo=a&bar=b&baz=c)

我的多播组件看起来像这样 -

```
<multicast strategyRef="myAggregationStrategy" parallelProcessing="true">
     <to REST_service_1"/>
     <to REST_service_2"/>
</multicast> 
```

我只想将 foo=a 传递给 service_1 端点，并将 bar=b&baz=c 传递给 service_2 端点。

现在，使用多播，同一组请求查询参数将同时传递给 service_1 和 service_2。即 service_1 和 service_2 都将收到 foo=a&bar=b&baz=c （整个查询参数）

我正在考虑的选项（高级别） -
打破传入的 url 参数并将它们作为标头粘贴，然后我可以有选择地使用这些标头为每个“to service_call”构建 CamelHttpQuery 标头

-但最后，Exchange 将在所有多播端点之间共享，那么这种方法是否可行？

- 或者我应该退后一步，为这个特定的用例考虑完全不同的 EIP？

- 或者我在想一个错误的方向:)

感谢输入！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:22:09.007

您可以改用收件人列表 EIP，然后您可以有 2 个不同的 uri 供 REST 服务调用，但发送与多播相同的消息。

收件人列表还支持并行和聚合。

[http://camel.apache.org/recipient-list.html](http://camel.apache.org/recipient-list.html)

要计算其余服务的 2 个 uri，您可以使用 java bean 并执行方法调用表达式，然后只返回一个字符串，其中 2 个端点用逗号分隔（或字符串 [] 或列表等）

```
<recipientList strategyRef="myAggregationStrategy" parallelProcessing="true">
     <method ref="myBean" method="whereToSend"/>
</recipientList> 
```

# c# - 将 DockPanel 存储在设置文件中

> ID：11130035
> 
> 赞同：0
> 
> 时间：2012-06-21T00:28:43.353
> 
> 标签：c#, visual-studio-2010, devexpress, settings, dockpanel

我正在尝试将 DevExpress DockPanel 存储在设置文件中。一切似乎都在保存功能中工作，但是当我在启动应用程序时加载它时，Settings.Default.WebLayoutPanel 变量为空：这是保存：

![在此处输入图像描述](../Images/484d3b57f98f2233b79f96681eec9a21.png)

> Settings.Default.VisibilitySwitchesPanel = _visibilitySwitchesPanel;

这是负载

> if (Settings.Default.WebLayoutPanel != null)
> 
> { _webLayoutPanel = Settings.Default.WebLayoutPanel; }

关于为什么它为空的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:25:44.283

您不应将`Control`实例直接保存到应用程序设置中。这是错误的方式。您应该使用自定义可序列化包装器保存这些控件的特定设置，然后恢复这些设置。这是一个有用的链接：

1.  [Windows 窗体 - 在 C# 中创建和保留自定义用户设置](http://www.codeproject.com/Articles/29130/Windows-Forms-Creating-and-Persisting-Custom-User)
2.  [使用应用程序设置和用户设置](http://msdn.microsoft.com/en-us/library/bb397750)

至于 DevExpress DockPanels，当您想要保存/恢复停靠布局时，您应该使用嵌入式保存/恢复功能：[保存和恢复 Dock Panels 的布局](http://help.devexpress.com/#WindowsForms/CustomDocument1433)

# r - 从值列表向数据框添加列

> ID：11130037
> 
> 赞同：1
> 
> 时间：2012-06-21T00:29:16.807
> 
> 标签：r

从一个空数据框开始，我需要按如下方式填充数据框： for 循环在每次迭代中生成固定数量的值，我需要添加一个包含该列表中值的新列，并为该列指定一个唯一名称, col_i （其中 i 是循环的第 i 次迭代）。

这（看似简单的任务）如何完成？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T00:49:53.070

分段构建数据框的最有效方法是将您的部分存储在预先分配的列表中，然后将它们放在一起。

例如：

```
num.iters <- 10
l <- vector('list', num.iters) 
for (i in 1:num.iters) {
     l[[i]] <- rnorm(3)                       # the column data
     names(l)[i] <- paste('Col', i, sep='.')  # the column name 
} 
do.call(cbind, l)  # ... if your cols are the same datatype and you want a matrix
data.frame(l)      # otherwise 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T00:33:35.283

有什么问题`?cbind`？

```
The functions cbind and rbind are S3 generic, with methods for data frames. 
The data frame method will be used if at least one argument is a data frame 
and the rest are vectors or matrices. 
```

`?colnames`也可以应用于 data.frames

# xcode - OS X 中全局快捷方式的位置

> ID：11130043
> 
> 赞同：0
> 
> 时间：2012-06-21T00:30:52.110
> 
> 标签：xcode, macos, shortcut

Xcode 4' 默认快捷方式`FindTab`is`Cmd+3`和默认快捷方式`Issue Navigator`is `Cmd+4`。

我的问题是，`Cmd+1`工作`Cmd+2`正常，但`Cmd+3`并`Cmd+4`没有。

所有其他应用程序都有相同的问题。例如，在 Finder 中，`Cmd+1`and`Cmd+2`有效，但`Cmd+3`and无效`Cmd+4`。

似乎`Cmd+3`,`Cmd+4`在某处被定义为全局快捷方式，但我找不到它们。

我在“系统偏好设置”中寻找“键盘”并安装并查看了“Macbook 的 KeyRemap”，但我找不到键。

谁能告诉我在哪里可以找到这些钥匙？

我的操作系统版本是 10.7.4。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T01:06:36.843

您可能在使用 Cmd-Shift-3 和 Cmd-Shift-4（在系统偏好设置 > 键盘 > 键盘快捷键 > 屏幕截图中定义）时遇到问题。

Cmd-3 和 Cmd-4 通常是特定于应用程序的（例如，在 Chrome 中选择选项卡 3 或 4）。

**更新：**

*   检查您是否正在使用捕获这些密钥的第三方应用程序。我曾经在使用 Skitch 时遇到过类似的问题：它会捕获 Cmd-Shift-7，禁用多个编辑器上的切换评论功能。
*   还要检查服务菜单（XCode > 服务），这些绑定甚至可以在其中公开。

# python - 如何在 Makefile 中写入内联文件

> ID：11130046
> 
> 赞同：1
> 
> 时间：2012-06-21T00:31:25.813
> 
> 标签：python, makefile, response, inline

我见过一些 shell 脚本，它们通过在同一个 shell 脚本中写入文件的内容来传递文件。例如：

```
if [[ $uponly -eq 1 ]]; then
    mysql $tabular -h database1 -u usertrack -pabulafia usertrack << END                                                                                           

    select host from host_status where host like 'ld%' and status = 'up';                                                                                          

END
     exit 0
fi 
```

我已经能够做类似的事情：

```
python << END
print 'hello world'
END 
```

如果说脚本的名称，`myscript.sh`那么我可以通过执行来运行它`sh myscript.sh`。我得到了我想要的输出。

问题是，我们可以在 Makefile 中做类似的事情吗？我一直在环顾四周，他们都说我做了类似的事情：

```
target:
        python @<<
print 'hello world'
<< 
```

但这不起作用。

以下是我一直在寻找的链接：

[http://www.opussoftware.com/tutorial/TutMakefile.htm#Response%20Files](http://www.opussoftware.com/tutorial/TutMakefile.htm#Response%20Files)

[http://www.scribd.com/doc/2369245/Makefile-Memo](http://www.scribd.com/doc/2369245/Makefile-Memo)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T00:45:33.807

你可以这样做：

```
define TMP_PYTHON_PROG
print 'hello'
print 'world'
endef

export TMP_PYTHON_PROG
target:
    @python -c "$$TMP_PYTHON_PROG" 
```

首先，您使用`define`and定义一个多行变量`endef`。然后你需要把`export`它放到 shell 中，否则它会将每个新行视为一个新命令。然后使用 .重新插入 shell 变量`$$`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T12:35:03.323

您`@<<`的事情不起作用的原因是它似乎是非标准制作变体的功能。同样，`define`mVChr 提到的命令是特定于 GNU Make 的（据我所知）。虽然 GNU Make 分布非常广泛，但这个技巧在 BSD make 和 POSIX-only make 中都行不通。

作为一般原则，我觉得尽可能保持 makefile 的可移植性是很好的；如果您在自动配置系统的上下文中编写 Makefile，它仍然更重要。

一种完全可移植的技术来做你正在寻找的事情是：

```
target:
    { echo "print 'First line'"; echo "print 'second'"; } | python 
```

或者等价地，如果你想把事情整理得更整齐一点：

```
target:
    { echo "print 'First line'"; \
      echo "print 'second'"; \
    } | python 
```

# gradle - 我如何才能覆盖 gradle 中的源目录但仅针对这个烦人的子项目

> ID：11130055
> 
> 赞同：3
> 
> 时间：2012-06-21T00:32:40.650
> 
> 标签：gradle

我们有一个主项目和两个子项目。其中一个子项目是具有“独特”构建结构的游戏框架。我如何才能覆盖源目录但仅针对该一个子项目，以便所有其他项目都使用源目录 src/main/java 等的标准布局。

我尝试了第一个不起作用的答案以及我的目录结构

```
 stserver
     build.gradle (1)
     project1
     webserver
         build.gradle (2) 
```

第二个gradle文件是这个

```
sourceSets.main{
  java.srcDirs = ['app']
}

task build << {
  println "source sets=$sourceSets.main.java.srcDirs"
} 
```

当我运行它时，它会打印出 stserver/app 作为我的 srcDir 而不是 stserver/webserver/app???? 我在这里做错了什么？

谢谢，院长

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T04:08:03.737

请查看 Peter 建议的文档。我已经准备好`build.gradle`使用 Play Framework 2.0~，所以我会在这里分享它，希望你能找到一些有用的设置技巧。

我的项目结构：

```
+- master/
  +- build.gradle  <-- contains common setup, 
                       and applies 'java' plugin to all subprojects
+- ui/             <-- project using Play framework
  +- build.gradle  <-- excerpt from this file is posted below 
```

摘自`build.gradle`

```
repositories{
  maven{
    //Play dependencies will be downloaded from here
    url " http://repo.typesafe.com/typesafe/releases"
  }
}

//Optional but useful. Finds 'play' executable from user's PATH
def findPlay20(){
  def pathEnvName = ['PATH', 'Path'].find{ System.getenv()[it] != null }
  for(path in System.getenv()[pathEnvName].split(File.pathSeparator)){
    for(playExec in ['play.bat', 'play', 'play.sh']){
      if(new File(path, playExec).exists()){
        project.ext.playHome = path
        project.ext.playExec = new File(path, playExec)
        return
      }
    }
  }
  throw new RuntimeException("""'play' command was not found in PATH.
Make sure you have Play Framework 2.0 installed and in your path""")
}

findPlay20()

configurations{
  //Configuration to hold all Play dependencies
  providedPlay
}

dependencies{
  providedPlay "play:play_2.9.1:2.0+"
  //Eclipse cannot compile Play template, so you have to tell it to
  //look for play-compiled classes
  providedPlay files('target/scala-2.9.1/classes_managed')

  //other dependencies
}

sourceSets.main{
  java.srcDirs = ['app', 'target/scala-2.9.1/src_managed/main']
  //Make sure Play libraries are visible during compilation
  compileClasspath += configurations.providedPlay
}

//This task will copy your project dependencies (if any) to 'lib'
//folder, which Play automatically includes in its compilation classpath
task copyPlayLibs(type: Copy){
  doFirst { delete 'lib' }
  from configurations.compile
  into 'lib'
}

//Sets up common play tasks to be accessible from gradle.
//Can be useful if you use gradle in a continuous integration 
//environment like Jenkins.
//
//'play compile' becomes 'gradle playCompile'
//'play run' becomes 'gradle playRun', and so on.
[ ['run',     [copyPlayLibs]],
  ['compile', [copyPlayLibs]],
  ['clean',   []],
  ['test',    []],
  ['doc',     [copyPlayLibs]],
  ['stage',   [copyPlayLibs]] ].each { cmdSpec ->
    def playCommand = cmdSpec[0]
    def depTasks = cmdSpec[1]
    task "play${playCommand.capitalize()}" (type: Exec,
                                            dependsOn: depTasks,
                                            description: "Execute 'play ${playCommand}'") {
     commandLine playExec, playCommand
    }
}

//Interate playClean and playCompile task into standard
//gradle build cycle
clean.dependsOn "playClean"
[compileScala, compileJava]*.dependsOn "playCompile"

//Include Play libraries in Eclipse classpath
eclipse {
  classpath {
    plusConfigurations += configurations.providedPlay
  }
} 
```

*注意：*我刚刚从现有的更大的 gradle 文件中提取了上面的内容，所以它可能会丢失一些东西，所以不能保证:) 无论如何希望它是有用的。祝你好运。

# html - 当我将文档类型添加到我的网页时，图像不会加载

> ID：11130057
> 
> 赞同：0
> 
> 时间：2012-06-21T00:32:54.027
> 
> 标签：html, css, image, doctype

我需要在`doctype`我的 html 网页中添加一个，因为如果我这样做，IE 只会正确格式化它。但是当我添加它时，页面上的一些图像没有加载。图像嵌入了 CSS 背景属性，并以`div`s 的形式显示在屏幕上。它不会在所有常见的浏览器中加载图像。

可能是什么问题呢？我真的需要`doctype`up。

CSS：

```
.blue {
    position: absolute;
    background: url(blue.png) no-repeat center center;
    top: 163;
    width: 228;
    height: 434;
}

.green {
    position: absolute;
    background: url(green.png) no-repeat center center;
    top: 120;
    width: 266;
    height: 209;
}

.orange {
    position: absolute;
    background: url(orange.png) no-repeat center center;
    top: 183;
    width: 165;
    height: 291;
} 
```

HTML：

```
<div class="blue"> </div>
<div class="green"> </div>
<div class="orange"> </div> 
```

顶部的文档类型：

```
<!DOCTYPE html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T00:51:59.087

我认为这与您的 CSS 宽度和高度声明的末尾没有“px”有关。

您能否检查`<div>`元素是否以宽度和高度呈现以显示背景图像？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T01:02:18.827

问题在于 HTML5，它和 HTML4 一样严格要求值单位，否则它们会被忽略。您需要添加`px`到所有位置高度和宽度数字的末尾。Alexei 指出您的网址也需要在它们周围加上引号，这也是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T00:43:12.777

不是必需的，但很高兴拥有：您缺少 Url 周围的引号：http: [//www.w3.org/TR/CSS2/colors.html#propdef-background-image](http://www.w3.org/TR/CSS2/colors.html#propdef-background-image)

```
background: url("orange.png") no-repeat center center; 
```

# drupal - Drupal 中的主要 PHP 错误

> ID：11130065
> 
> 赞同：0
> 
> 时间：2012-06-21T00:33:57.207
> 
> 标签：drupal

试图解释此错误及其发生原因：

```
Call to undefined function fivestar_widget_form() in 
/home/readyby2/public_html/sites
/all/themes/readyby21/templates/page--resource.tpl.php on line 73 
```

该目录在那里，从drupal主站点下载，位于模块目录中。

会不会有些冲突？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:40:26.677

如果你使用的是 Drupal 6 的模块版本，那么[Fivestar_widget_form()](http://drupalcontrib.org/api/drupal/contributions!fivestar!fivestar.module/function/fivestar_widget_form/6)是在 Fivestar.module 中定义的；如果您收到该错误，则表示该模块未启用，或者在使用模板文件时尚未加载。这也可能意味着该模块不在 Drupal 查找要加载的模块的目录中，这意味着您可以在您的站点上看到它，但 Drupal 并没有在它所在的位置查找它。

如果您使用的是 Drupal 7 版本的模块，则[Fivestar_widget_form()](http://drupalcontrib.org/api/search/7/fivestar_widget_form)不是已定义的函数。

# android - 如何在 Android 应用中创建专栏讲座

> ID：11130070
> 
> 赞同：2
> 
> 时间：2012-06-21T00:34:33.473
> 
> 标签：android, webview, android-webview

我正在考虑创建一个应用程序来阅读新闻，在 Google Currents 或 Android 中的 Poket 等列中进行讲座，并带有翻转文本。我怎么能这样想？在 javascript 中使用带有翻转逻辑的 webview？具有 N 个 css 列的 webview 和自定义 webview 中的翻转逻辑？一个大的文本视图并动态地更改文本？另外的选择？

# windows-8 - 为 Windows 8 编写的 WinJS/Javascript + Html5 应用程序是否与 Windows phone 8 兼容？

> ID：11130073
> 
> 赞同：3
> 
> 时间：2012-06-21T00:35:00.873
> 
> 标签：windows-8, windows-phone, windows-phone-8

用 javascript 为 Windows 8 编写的 WinJS/Javascript + Html5 应用程序是否与 Windows phone 8 兼容？从今天的演示来看，推荐的方式是 C#/XAML。这让我想知道我的 Windows 8 js 应用程序是否与 WP8 兼容（当然有微小的变化）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T02:29:32.373

根据[2012 年 6 月 Windows Phone 峰会](http://channel9.msdn.com/Events/Windows-Phone/Summit)发布的信息，Windows Phone 8 的开发选择似乎是：

> *   XAML 与 C#/VB 代码
> *   本机 C++/C 代码
> *   HTML 5 浏览器控件

根据他们选择的措辞，我推断 C++/XAML 和 WinRT/HTML5 开发模型都将不可用。

一旦“今年夏天晚些时候”发布了 WP8 SDK 的预览版，我们就会知道更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T16:00:44.590

> 用 javascript 编写的 WinJS/Javascript + Html5 应用程序适用于 Windows 8 与 Windows phone 8 兼容？

不。应用程序（不是游戏）仍然是用 C#/VB.NET 和 XAML 编写的。

如果您的应用在浏览器中运行，IE10 能够呈现 HTML5，但您不会获得任何平台互操作功能。

# html - DIV 之间的差距

> ID：11130074
> 
> 赞同：-3
> 
> 时间：2012-06-21T00:35:03.300
> 
> 标签：html, css

我有一个包含我所有内容的内容 div，一个导航 div，我为 nivo 滑块制作了一个 div，但是，nivo 滑块之后的 div 之间有一个间隙，我想知道这里是否有人可以帮助我？该网站是：[http](http://alumnistatus.cloudapp.net/) ://alumnistatus.cloudapp.net/ 。

[![](../Images/bc542391d4f7b20adeb87ef4fabec867.png)](https://i.stack.imgur.com/zYEcj.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T02:52:36.300

段落“test nivo content”正在添加`margin-bottom`到绿色框中。如果您添加`margin-bottom:0`到该段落，它会删除 Chrome 中的该空间。

# javascript - 如何在 box2D javascript 中手动定义顶点？

> ID：11130075
> 
> 赞同：1
> 
> 时间：2012-06-21T00:35:04.103
> 
> 标签：javascript, box2d, vertices

我正在尝试在 box2D 中为 javascript 手动定义多边形的顶点。我最终想手动调整盒子的每一边，但我需要能够先用顶点绘制它（我已经有一个调整大小的机制）。我查看了手册中的示例，但它们是针对 ActionScript 的，它似乎不适用于 javascript。我尝试以不同的方式定义多边形（例如独立多边形 = new b2Polygon;），但没有区别。

无论我如何定义一个新的多边形，box2D 源都会在创建夹具的调用中引发错误。错误提示“tVec 未定义”，它是 box2D 函数中的一个变量：b2PolygonShape.prototype.ComputeAABB = function (aabb, xf)

以下是代码的相关部分（fixDef 和 bodyDef 是在代码前面创建的）：

```
 var vertices = []; 

        vertices[0] = new b2Vec2()
        vertices[0].Set(1,1); 
        vertices[1] = new b2Vec2(); 
        vertices[1].Set(1, 6);
        vertices[2] = new b2Vec2(); 
        vertices[2].Set(6, 6);
        vertices[3] = new b2Vec2(); 
        vertices[3].Set(6, 1);

        fixDef.shape = new b2PolygonShape; 
        fixDef.shape.Set(vertices, 4);  
        world.CreateBody(bodyDef).CreateFixture(fixDef); 
```

任何帮助将不胜感激，因为这已经给我带来了一段时间的麻烦。

# mysql - 导入完整的 MySQL 转储

> ID：11130082
> 
> 赞同：1
> 
> 时间：2012-06-21T00:36:28.193
> 
> 标签：mysql, sql, import

我已经使用 HeidiSQL 7 导出了数据库的完整备份。

现在，当通过 PHPMyAdmin 导入它时，我注意到我必须选择数据库`information_schema`，因为这就是数据库的导出方式（或者这就是 HeidiSQL 7 将数据库作为对象导出到 SQL 文件的方式？）。

但是，这是一个问题，因为当我使用 HeidiSQL 7（而不是 PHPMyAdmin）导入（导出的文件）时，在选择`information_schema`数据库并单击导入 SQL 文件（从工具菜单中）时，它说访问被拒绝根用户。

在 PHPMyAdmin 中，选择数据库时导入选项不可用`information_schema`。

如何导入完整的数据库转储？（这就是我导出它的方式：HeidiSQL > 导出数据库**对象**导出到 SQL 文件）

编辑：我用命令行尝试过，但没有运气：

```
C:\Programs\XAMPP\mysql\bin>mysql --verbose --user=root Information_schema < DT.
sql
--------------
/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */
--------------

--------------
/*!40101 SET NAMES utf8 */
--------------

--------------
/*!40014 SET FOREIGN_KEY_CHECKS=0 */
--------------

--------------
/*!40000 ALTER TABLE `CHARACTER_SETS` DISABLE KEYS */
--------------

ERROR 1044 (42000) at line 13: Access denied for user 'root'@'localhost' to data
base 'information_schema'

C:\Programs\XAMPP\mysql\bin> 
```

这是 SQL 文件的片段： [//pastebin.com/6hwhK2CJ](http://pastebin.com/6hwhK2CJ)

注意：我的 root 用户的密码是空白的。

也许我的问题的另一种解决方案：如何从 SQL 文件中只导入我想要的数据库？例如名称为“Employees”的数据库？因为那个 SQL 文件应该包含一些数据库。

Edit2：（对第一条评论的回答）我下载了 MySQL Workbench，设置了连接......

```
03:23:08 Restoring C:\Files\DB.sql

Running: mysql.exe --defaults-extra-file="c:\files\temp\tmplnjwd6.cnf"  --host=localhost --user=root --port=3306 --default-character-set=utf8 --comments < "C:\\Files\\DB.sql"

ERROR 1046 (3D000) at line 13: No database selected

Operation failed with exitcode 1

03:23:08 Import of C:\Files\DB.sql has finished with 1 errors 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:58:29.147

`INFORMATION_SCHEMA`是一个伪只读数据库（实际上，它是一个“ [ANSI 标准的只读视图集](http://en.wikipedia.org/wiki/Information_schema)”）。

您需要删除与此伪数据库相关的所有转储数据，因为绝对无法导入它。

[Notepad++](http://notepad-plus-plus.org/download/v6.1.3.html)能够轻松处理 9 MB 文件，并且还提供了很好的语法高亮显示。

# c# - 摆脱 Outlook 插件 Microsoft.Office.Interop.Outlook 上的警告

> ID：11130088
> 
> 赞同：2
> 
> 时间：2012-06-21T00:37:04.073
> 
> 标签：c#, visual-studio-2010, outlook-addin

我正在用 C#/VS 2010 编写一个 Outlook 插件，即使我的应用程序运行良好，我想摆脱这个警告：

'Microsoft.Office.Interop.Outlook._MailItem.Close(Microsoft.Office.Interop.Outlook.OlInspectorClose)' 和非方法 'Microsoft.Office.Interop.Outlook.ItemEvents_10_Event.Close'。使用方法组。

但我不明白为什么会这样。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T00:47:34.240

如果完整的错误看起来像

> 方法“Microsoft.Office.Interop.Outlook._MailItem.Close(Microsoft.Office.Interop.Outlook.OlInspectorClose)”和非方法“Microsoft.Office.Interop.Outlook.ItemEvents_10_Event.Close”之间存在歧义。使用方法组。

那么您很可能会遇到类似于[此处](http://social.msdn.microsoft.com/Forums/en/vsto/thread/c998e245-80db-4ef4-9225-cc85d1cd64d8)描述的铸造问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T14:46:35.627

尝试这样调用：

(oMsg as _MailItem).Close();

# ruby - 是什么导致这个 Ruby “无法将 Mongo::Cursor 转换为整数”错误？

> ID：11130093
> 
> 赞同：1
> 
> 时间：2012-06-21T00:38:11.340
> 
> 标签：ruby, mongodb

我正在使用 Mongo Ruby 驱动程序，并且`line 171`在我的代码之前和之后都有这段 Ruby 代码，这显然是它下面的错误的来源（该`query.each`行是第 171 行）：

```
 query = get_callback.call( "databases", id )
    if query.count > 0
      puts query.count.inspect + " results: " + query.inspect
      res = {}
      query.each do |result|
        puts result.inspect
      end
    else
      puts "No results" + res.inspect
      res = {}
    end 
```

错误：

```
1 results: <Mongo::Cursor:0x3fc15642c154 namespace='myproj.databases' @selector={"_id"=>BSON::ObjectId('4fe120e4a2f9a386ed000001')} @cursor_id=>
TypeError - can't convert Mongo::Cursor into Integer:
        /Users/myuser/.rvm/gems/ruby-1.9.3-p194/gems/bson-1.6.4/lib/bson/byte_buffer.rb:156:in `pack'
        /Users/myuser/.rvm/gems/ruby-1.9.3-p194/gems/bson-1.6.4/lib/bson/byte_buffer.rb:156:in `put_int'
        /Users/myuser/.rvm/gems/ruby-1.9.3-p194/gems/mongo-1.6.4/lib/mongo/cursor.rb:603:in `construct_query_message'
        /Users/myuser/.rvm/gems/ruby-1.9.3-p194/gems/mongo-1.6.4/lib/mongo/cursor.rb:466:in `send_initial_query'
        /Users/myuser/.rvm/gems/ruby-1.9.3-p194/gems/mongo-1.6.4/lib/mongo/cursor.rb:459:in `refresh'
        /Users/myuser/.rvm/gems/ruby-1.9.3-p194/gems/mongo-1.6.4/lib/mongo/cursor.rb:128:in `next'
        /Users/myuser/.rvm/gems/ruby-1.9.3-p194/gems/mongo-1.6.4/lib/mongo/cursor.rb:291:in `each'
        /Users/myuser/Code/myproj/my_file.rb:171:in `block in initialize' 
```

我的查询对象：`{"_id"=>BSON::ObjectId('4fe120e4a2f9a386ed000001')}`

我一点也不知道是什么原因造成的。我已经验证了我发现的对象存在，并且`query.count`表明我的`Mongo::Cursor`.

我在谷歌上没有找到任何关于这个问题的例子，我发现网络上的每个 Mongo/Ruby 都`each`像我一样使用迭代器。有谁知道这个错误的原因是什么？我注意到我在尝试使用`to_a`将集合转换为 JSON 可用对象时也得到了它。

* * *

对于它的价值，下面是 byte_buffer.rb 的相关部分。与`<<`是`line 156`。

```
def put_int(i, offset=nil)
  @cursor = offset if offset
  if more?
    @str[@cursor, 4] = [i].pack(@int_pack_order)
  else
    ensure_length(@cursor)
    @str << [i].pack(@int_pack_order)
  end
  @cursor += 4
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:57:40.353

当您将 nil 传递给 Ruby Mongo 驱动程序`limit()`方法时，就会发生这种情况。

# javascript - Javascript - 更改事件对象兄弟上的文本

> ID：11130099
> 
> 赞同：1
> 
> 时间：2012-06-21T00:39:06.377
> 
> 标签：javascript, ruby-on-rails, coffeescript, haml

我试图让我的 js 为我的网站工作，这样当用户选择一个文件来上传按钮上的文本时，事件调用者的兄弟会改变。不幸的是，我无法让它工作，并且由于我在 js 方面的经验不足，我无法想出更好的方法。我最好的方法使它起作用，但是每个具有文件输入的按钮上的文本都发生了变化。有人可以帮我吗？这是我的设置和我的咖啡代码：

编辑修复：

在视图中：

```
.assets-fields.pull-left.span3
  - count=0
  = f.simple_fields_for :assets do |builder|
    - if builder.object.new_record?
      .file-wrapper.pull-left
        .btn.btn-warning
          %span.icon-camera
          .photo-text{:id => "asset_#{count}"} Choose a Photo
          - count = count + 1
          = builder.file_field :photo 
```

在我的 js.coffee 中：

```
$ ->
  $("input:file").change (event) ->
    idOfInput = event.target.id
    console.log idOfInput
    idOfSibling = $('#' + idOfInput).prev().attr('id')
    console.log idOfSibling
    $('div#' + idOfSibling).text("Photo Selected!") 
```

先谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T01:02:58.783

`idOfButtonSibling.text`是一个函数

```
$(idOfButtonSibling).text("Photo Selected!") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T01:03:58.547

idOfButtonSibling 是 idOfInput 的所有兄弟元素的数组。在更改文本之前，您必须选择一个元素。

我建议您为每个按钮分配唯一的 ID，并使用它们来引用特定的按钮。

试试这个，但这不是一个好习惯：

```
$(idOfButtonSibling[0]).text = "Photo Selected!" 
```

或者，

```
$(idOfButtonSibling[1]).text = "Photo Selected!" 
```

或者

```
$(idOfButtonSibling[2]).text = "Photo Selected!" 
```

等等...

# git - 在保持之前提交的所有更改的同时将分支更新到最新的 master 的最佳方法是什么？

> ID：11130101
> 
> 赞同：3
> 
> 时间：2012-06-21T00:39:21.360
> 
> 标签：git, git-rebase

我有一个基于旧大师的 git 分支。这个分支上有 master 没有的提交。我想用 master 的代码更新分支，但保留分支上的提交。最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T00:41:32.203

```
git fetch --all
git checkout your_branch
git merge someremote/master 
```

基本上，您首先下载遥控器的所有更新（不合并它们），然后签出到您的分支并将更新的主节点合并到您的分支中。如果您正在谈论的主分支在本地存储库中并且已更新，那么简单`git checkout your_branch; git merge master`会解决问题（将来自主分支的更改合并到您的分支中）。

# node.js - 快递和上传文件

> ID：11130104
> 
> 赞同：1
> 
> 时间：2012-06-21T00:39:45.773
> 
> 标签：node.js, express

我正在尝试使用快速和强大的上传文件（最终转发到 MongoDB 和 GridFS）。我首先创建一个带有文件类型字段的表单。在该领域的行动中，我使用以下路线....

```
exports.addItem = function(req, res, next){
  var form = new formidable.IncomingForm(),
    files = [],
    fields = [];
  form
    .on('file', function(field, file) {
      console.log(field, file);
     })
    .on('end', function() {
      console.log('-> upload done');
    });
} 
```

一切运行良好，但是当我发布时，我在控制台中看不到任何内容并且它挂起。

路线如下所示...

```
app.post('/item/add', routes.addItem, routes.getPlaylist, routes.index) 
```

有任何想法吗？

更新

这是抓取文件的示例，但是，这仍然不包括强大的...

[https://gist.github.com/2963261](https://gist.github.com/2963261)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T01:33:05.187

它挂起的原因是你需要调用 next() 来告诉 Express 继续。

还可以使用 express 中的 bodyParser() 中间件（默认包含）来获取文件。像这样的东西：

```
exports.addItem = function(req, res, next){
  if(req.files.length > 0)
  {
     // process upload
     console.log(req.files);
  }
  next();
} 
```

# vb.net - 我如何知道目录中是否至少存在一种类型的文件？

> ID：11130106
> 
> 赞同：1
> 
> 时间：2012-06-21T00:39:52.133
> 
> 标签：vb.net, visual-studio-2010

例如：我想知道一个目录中是否有图像（例如“.jpg”）我想返回一个布尔值来确认是否存在具有该扩展名的文件。

起初，我从以下代码开始：

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim Path1 As String
    FolderBrowserDialog1.ShowDialog()
    Path1 = FolderBrowserDialog1.SelectedPath
    TextBox1.Text = FolderBrowserDialog1.SelectedPath 'ignore this
    If System.IO.File.Exists(Path1 + "\*.jpg") = True Then
        Label1.Text = "At least there is a .jpg"
    End If
End Sub 
```

它没有用，我想使用 System.IO.Directory.GetFiles。问题是我如何使用它来给我一个值真/假，或者更确切地说，看看是否有这样的文件类型

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T00:57:24.920

您可以将[Directory.EnumerateFiles](http://msdn.microsoft.com/en-us/library/dd413233.aspx%27)与[Enumerable.Any](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.any.aspx)一起使用：

```
Dim exists As Boolean = Directory.EnumerateFiles(folderName, "*.jpg").Any() 
```

`GetFiles`也应该可以工作（如果您使用的是 .NET 3.5），但效率会降低：

```
Dim exists As Boolean = Directory.GetFiles(folderName, "*.jpg").Any() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T01:16:23.010

```
Private Function FileExists(folderPath As String, extension As String) As Boolean
    Return (Directory.GetFiles(folderPath, "*." + extension).Length <> 0)
End Function 
```

# xcode4.3 - 设置调试标志时执行一些操作

> ID：11130108
> 
> 赞同：1
> 
> 时间：2012-06-21T00:40:18.370
> 
> 标签：xcode4.3, ios5.1

当我处于调试模式时，我需要执行一些操作，确切地说，当我处于调试模式时，我想在我的界面中添加一个按钮：

```
#ifdef DEBUG
NSLog(@"Some actions, add button and assign an action, etc.");

#else
//Do another operations

#endif 
```

`NSLog`但是，即使我只是简单地测试我的调试模式，这似乎也不起作用。

我错过了什么吗？提前谢谢。

# c - C 结构体大小对齐

> ID：11130109
> 
> 赞同：13
> 
> 时间：2012-06-21T00:40:19.903
> 
> 标签：c, struct, alignment

我希望 C 结构的大小是 16 个字节（16B/32B/48B/..）的倍数。它的大小无关紧要。它只需要是 16 个字节的倍数。

我怎么能强制编译器这样做呢？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-21T00:53:52.013

对于 Microsoft Visual C++：

```
#pragma pack(push, 16)

struct _some_struct
{
     ...
}

#pragma pack(pop) 
```

对于海湾合作委员会：

```
struct _some_struct { ... } __attribute__ ((aligned (16))); 
```

例子：

```
#include <stdio.h>

struct test_t {
    int x;
    int y;
} __attribute__((aligned(16)));

int main()
{
    printf("%lu\n", sizeof(struct test_t));
    return 0;
} 
```

`gcc -o main main.c`用将输出编译`16`。其他编译器也是如此。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-21T01:05:15.430

C 结构的大小取决于结构的成员、它们的类型以及它们的数量。实际上没有标准的方法来强制编译器使结构成为某个大小的倍数。一些编译器提供了一个编译指示，允许您设置对齐边界，但这确实是另一回事。并且可能有一些会有这样的设置或提供这样的 pragma。

但是，如果您坚持使用这种方法，那就是对结构进行内存分配并强制内存分配向上舍入到下一个 16 字节大小。

因此，如果您有这样的结构。

```
struct _simpleStruct {
   int iValueA;
   int iValueB;
}; 
```

然后，您可以执行以下操作。

```
{
    struct _simpleStruct *pStruct = 0;
    pStruct = malloc ((sizeof(*pStruct)/16 + 1)*16);
    // use the pStruct for whatever
    free(pStruct);
} 
```

就您而言，这将把大小推高到下一个 16 字节大小。然而，内存分配器所做的可能是也可能不是给你一个实际上是那个大小的块。内存块实际上可能比您的请求大。

如果您要对此做一些特殊的事情，例如，假设您要将此结构写入文件并且您想知道块大小，那么您将不得不进行与 malloc() 中使用的相同的计算，而不是而不是使用 sizeof() 运算符来计算结构的大小。

所以接下来的事情是使用宏编写自己的 sizeof() 运算符，例如。

```
#define SIZEOF16(x) ((sizeof(x)/16 + 1) * 16) 
```

据我所知，没有可靠的方法可以从指针中提取已分配块的大小。通常，指针将有一个内存分配块，由内存堆管理函数使用，该函数将包含各种内存管理信息，例如分配的块大小实际上可能大于请求的内存量。然而，这个块的格式以及它相对于提供的实际内存地址的位置将取决于 C 编译器的运行时间。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-21T00:51:50.247

这完全取决于编译器和其他工具，因为在 ISO C 标准中没有详细说明对齐（它指定对齐可能在编译器的要求下发生，但没有详细说明如何强制执行它）。

您需要查看编译器工具链的特定于实现的东西。它可能会提供一个`#pragma pack`（或`align`其他一些东西），您可以将其添加到您的结构定义中。

它也可以将其作为语言扩展提供。例如，gcc 允许您向定义添加属性，其中之一控制对齐：

```
struct mystruct { int val[7]; } __attribute__ ((aligned (16))); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-21T10:00:21.760

您也许可以做一个双重结构，将您的实际结构包装在第二个可以添加填充的结构中：

```
struct payload {
  int a;    /*Your actual fields. */
  float b;
  char c;
  double d;
};

struct payload_padded {
  struct payload p;
  char   padding[16 * ((sizeof (struct payload) + 15) / 16)];
}; 
```

然后你可以使用填充结构：

```
struct payload_padded a;

a.p.d = 43.3; 
```

当然，您可以利用结构的第一个成员从结构开始的 0 字节开始这一事实，并将指针`struct payload_padded`视为指向 a 的指针`struct payload`（因为它是）：

```
float d_plus_2(const struct payload *p)
{
  return p->d + 2;
}

/* ... */

struct payload_padded b;
const double dp2 = d_plus_2((struct payload *) &b); 
```

# javascript - 如何从带有 Javascript 前端的 url 获取数据？

> ID：11130112
> 
> 赞同：-1
> 
> 时间：2012-06-21T00:40:36.627
> 
> 标签：javascript

我想写一个基于javascript的前端，它可以从外部url获取数据并显示在页面中。有没有示例代码？谢谢你。

服务器端有一个python脚本，可以生成一些数据结果。我需要获取数据并显示它们。我可能需要 jQuery 来查询服务器，但我不知道该怎么做。

我想要一个按钮，点击按钮后，它可以生成查询，该查询可以从服务器获取数据并显示在页面中。

简而言之，前面是javascript，后面是python。我需要从前到后进行查询并运行python，然后我可以得到一些数据。然后我需要在页面上显示数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T00:50:14.177

你可能会谷歌`XMLHttpRequest`。 [维基百科](http://en.wikipedia.org/wiki/XMLHttpRequest)有一个非常漂亮的条目，描述了一般技术、注意事项和限制。

改编自 Wikipedia，您可以从这个开始（假设您没有使用一些古老版本的 Internet Exploder）：

```
<html>
<head></head>
<body>
    <script language="JavaScript">
        xmlhttp=new XMLHttpRequest();
        xmlhttp.onreadystatechange = function() {
                if(xmlhttp.readyState == 4){
                    alert(xmlhttp.responseText);                
                }
        };
        xmlhttp.open("GET","somepage.xml",true);
        xmlhttp.send(null);
    </script>
</body>
</html> 
```

或者，可以使用 jQuery 等通用库来简化远程请求的代码。

# php - 如何使用 jQuery 打开一个新页面

> ID：11130117
> 
> 赞同：0
> 
> 时间：2012-06-21T00:41:22.243
> 
> 标签：php, jquery

```
//activate selected row in table
jQuery('.activatebutton').click(function(){
  var tb = jQuery(this).attr('title');
  //initialize to false as no selected row
  var sel = false;
  //get each checkbox in a table
  var ch = jQuery('#'+tb).find('tbody input[type=checkbox]');

  //check if there is/are selected row in table
  ch.each(function(){
    if(jQuery(this).is(':checked')) {
      //set to true if there is/are selected row
      sel = true;
     jQuery(this).parents('tr').fadeOut(function(){
       /*
       THIS IS THE LINE THAT IS NOT WORKING BELOW!!!! I want to send VALUE ID to delete.php
       */
       jQuery.get('delete.php', { id:this.id });
       //remove row when animation is finished
       jQuery(this).remove();   
     });
   }
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T00:47:24.487

目前尚不清楚您要发送什么属性，但看起来它是元素的 id。如果是这样，这里是更正的地方：

```
jQuery.get('delete.php', { id:this.id }); 
```

应该

```
jQuery.get('delete.php', { id:jQuery(this).attr('id') }); 
```

因此，您将发送元素的 id 属性。

如果这仍然不起作用，则可能是删除脚本的路径不正确...chrome 开发工具或萤火虫会告诉您这一点。

# csv - 在 tsv 和 csv 之间进行选择

> ID：11130120
> 
> 赞同：44
> 
> 时间：2012-06-21T00:41:55.997
> 
> 标签：csv, tsv

我有一个输出表格的程序，我想知道 csv 和 tsv 格式之间是否有任何优点/缺点。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-21T00:49:59.850

TSV 是一种非常高效的 Javascript/Perl/Python 处理方式，不会丢失任何输入信息，也易于人类阅读。

自公开发布以来，4store 已支持该格式，并且被广泛使用。

我的看法是：CSV 用于加载到电子表格中，TSV 用于由定制软件进行处理。

[您可以在此处查看每个此处的技术规格。](http://www.w3.org/2009/sparql/docs/csv-tsv-results/results-csv-tsv.html)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-05-12T22:15:55.747

选择取决于应用程序。简而言之，如果您的字段不包含逗号，请使用 CSV；否则 TSV 是要走的路。

**TL;博士**

在这两种格式中，当分隔符出现在字段中时就会出现问题，因此有必要指出分隔符不是作为字段分隔符而是作为字段内的值，这可能会有些痛苦。

例如，使用 CSV: `Kalman, Rudolf`, `von Neumann, John`,`Gabor, Dennis`

一些[基本的方法](https://softwareengineering.stackexchange.com/questions/26284/best-way-to-handle-delimited-files)是：

*   删除字段中出现的所有分隔符。

    例如`Kalman Rudolf`, `von Neumann John`,`Gabor Dennis`

*   转义字符（通常预先附加一个反斜杠`\`）。

    例如`Kalman\, Rudolf`, `von Neumann\, John`,`Gabor\, Dennis`

*   用其他字符（通常是双引号`"`）将每个字段括起来。

    例如`"Kalman, Rudolf"`, `"von Neumann, John"`,`"Gabor, Dennis"`

## [CSV](https://www.rfc-editor.org/rfc/rfc4180)

字段用逗号分隔`,`。

例如：

```
Name,Score,Country
Peter,156,GB
Piero,89,IT
Pedro,31415,ES 
```

好处：

*   与非技术人员共享时，它更加通用和有用，因为大多数软件包无需玩设置即可阅读。

缺点：

*   在字段中转义逗号可能会令人沮丧，因为并非每个人都遵循标准。
*   所有额外的转义字符和引号都会增加最终文件大小的权重。

## [硅通孔](https://www.iana.org/assignments/media-types/text/tab-separated-values)

字段由表格分隔`<TAB>`或`\t`

例如：

```
Name<TAB>Score<TAB>Country
Peter<TAB>156<TAB>GB
Piero<TAB>89<TAB>IT
Pedro<TAB>31415<TAB>ES 
```

好处：

*   不必转义分隔符，因为在字段中通常不包含制表符。否则，应将其删除。

缺点：

*   它不太普遍。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-09-04T11:40:33.687

你可以使用任何你想要的分隔符，但是许多应用程序都支持制表符和逗号，包括 Excel、MySQL、PostgreSQL。逗号在文本字段中很常见，因此如果您对它们进行转义，则需要对它们中的更多进行转义。如果您不转义它们并且您的字段可能包含逗号，那么您就不能自信地在您的文件上运行“sort -k2,4”。无论如何，您可能需要转义字段中的某些字符（空字节、换行符等）。由于这些原因以及更多原因，我更喜欢使用 TSV，并在字段中转义制表符、空字节和换行符。此外，使用 TSV 通常更容易。只需用制表符分隔每一行。对于 CSV，有带引号的字段，可能是带有换行符的字段等。我只在被迫时才使用 CSV。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-21T00:49:59.507

我认为通常 csv 比 tsv 格式更受支持。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-02-01T15:15:49.310

[TSV-utils](https://github.com/eBay/tsv-utils/blob/master/docs/comparing-tsv-and-csv.md)做了一个有趣的比较，之后复制到这里。简而言之，使用 TSV。

# 比较 TSV 和 CSV 格式

TSV 和 CSV 格式之间的差异可能令人困惑。明显的区别是默认字段分隔符：TSV 使用 TAB，CSV 使用逗号。两者都使用换行符作为记录分隔符。

就其本身而言，使用不同的字段分隔符并不是特别重要。更重要的是数据中出现的分隔符的方法。CSV 使用转义语法来表示数据中的逗号和换行符。TSV 采用不同的方法，不允许在数据中使用 TAB 和换行符。

转义语法使 CSV 能够完全表示常见的书面文本。这非常适合人工编辑的文档，尤其是电子表格。这种普遍性是有代价的：阅读它需要程序来解析转义语法。虽然不是太难，但仍然很容易做错，尤其是在编写一次性程序时。在处理 CSV 文件时，最好使用 CSV 解析器。传统的 Unix 工具（如`cut`, `sort`, `awk`, ）`diff`不处理 CSV 转义，需要其他工具。

相比之下，解析 TSV 数据很简单。`readline`可以使用大多数编程语言中的典型例程来读取记录。可以使用`split`例程找到每条记录中的字段。可以通过提供正确的字段分隔符来调用 Unix 实用程序，`awk -F "\t"`例如`sort -t $'\t'`. 不需要特殊的解析器。这要可靠得多。它也更快，解析转义语法不使用 CPU 时间。

速度优势对于面向记录的操作尤其明显。记录计数 ( `wc -l`)、重复数据删除 ( `uniq`, tsv-uniq)、文件分割 ( `head`, `tail`, `split`)、洗牌 (GNU `shuf`, tsv-sample) 等。TSV 更快，因为可以使用高度优化的换行搜索例程 (例如`memchr`) 找到记录边界。识别 CSV 记录边界需要完全解析每条记录。

这些特性使 TSV 格式非常适合数据挖掘和机器学习环境中常见的大型表格数据集。这些数据集在字段中很少需要制表符和换行符。

最常见的 CSV 转义格式使用引号来分隔包含分隔符的字段。引号也必须被转义，这是通过使用一对引号来表示单引号来完成的。考虑下表中的数据：

| 字段 1 | 字段 2 | 字段 3 |
| --- | --- | --- |
| 美国广播公司 | 你好世界！ | 定义 |
| 吉 | 说“你好，世界！” | jkl |

在 Field-2 中，第一个值包含逗号，第二个值包含引号和逗号。这是 CSV 表示，使用转义来表示数据中的逗号和引号。

```
Field-1,Field-2,Field-3
abc,"hello, world!",def
ghi,"Say ""hello, world!""",jkl 
```

在上面的示例中，仅引用了带分隔符的字段。引用所有字段也很常见，无论它们是否包含分隔符。以下 CSV 文件是等效的：

```
"Field-1","Field-2","Field-3"
"abc","hello, world!","def"
"ghi","Say ""hello, world!""","jkl" 
```

这是 TSV 中的相同数据。它更简单，因为不涉及转义：

```
Field-1 Field-2 Field-3
abc hello, world!   def
ghi Say "hello, world!" jkl 
```

TSV 和 CSV 之间的相似性可能会导致混淆哪些工具是合适的。进一步加深这种混淆，使用逗号作为字段分隔符的数据文件有些常见，但在数据中没有逗号、引号或换行符。这些文件中不需要 CSV 转义，这意味着传统的 Unix 工具喜欢`cut`并且`awk`可以用来处理这些文件。此类文件有时称为“简单 CSV”。它们等效于以逗号作为字段分隔符的 TSV 文件。传统的 Unix 工具和 tsv-utils 工具可以通过指定字段分隔符来正确处理这些文件。但是，“简单 csv”是一个非常临时且定义不明确的概念。处理这些文件时的一个简单预防措施是在其他处理步骤之前运行 CSV 到 TSV 转换器，如 csv2tsv。

请注意，许多 CSV 到 TSV 的转换工具实际上并没有删除 CSV 转义。相反，许多工具将逗号替换为 TAB 作为记录分隔符，但仍使用 CSV 转义来表示数据中的 TAB、换行符和引号字符。此类数据无法由 Unix 工具（如`sort`、`awk`和`cut`. tsv-utils 中的 csv2tsv 工具通过将 TAB 和换行符替换为空格（可自定义）来避免转义。这适用于绝大多数数据挖掘场景。

要查看特定的 CSV 到 TSV 转换工具的作用，请转换包含引号、逗号、制表符、换行符和双引号字段的 CSV 数据。例如：

```
$ echo $'Line,Field1,Field2\n1,"Comma: |,|","Quote: |""|"\n"2","TAB: |\t|","Newline: |\n|"' | <csv-to-tsv-converter> 
```

生成 CSV 转义的方法会将许多输出字段括在双引号中。

参考：

*   [维基百科：制表符分隔值](https://en.wikipedia.org/wiki/Tab-separated_values)- TSV 格式的有用描述。
*   [IANA TSV 规范](https://www.iana.org/assignments/media-types/text/tab-separated-values)- 制表符分隔值 mime 类型的正式定义。
*   [Wikipedia: Comma-separated-values](https://en.wikipedia.org/wiki/Comma-separated_values) - 描述 CSV 和相关格式。
*   [RFC 4180](https://www.rfc-editor.org/rfc/rfc4180) - IETF CSV 格式描述，最接近 CSV 的实际标准。
*   [brendano/tsvutils：tsvutils 的哲学](https://github.com/brendano/tsvutils#the-philosophy-of-tsvutils)- Brendan O'Connor 关于在他的开源工具包中使用 TSV 格式的基本原理的讨论。
*   [那么您想编写自己的 CSV 代码吗？](http://thomasburette.com/blog/2014/05/25/so-you-want-to-write-your-own-CSV-code/)- Thomas Burette 的幽默而准确的博客文章描述了临时 CSV 解析的问题。当然，您可以使用 TSV 并避免这些问题！

# backbone.js - 你可以在 Backbone.js Collections 上设置属性吗？如果是这样，怎么做？

> ID：11130124
> 
> 赞同：6
> 
> 时间：2012-06-21T00:42:06.030
> 
> 标签：backbone.js

我刚刚进入backbone.js，我认为进入它的最好方法是实际构建一个待办事项列表（是的......非常原始）。撇开幽默不谈，我当然搜索了 google 和 docs 和 stackoverflow，寻找一种将属性添加到集合的方法。所以，就我而言，待办事项列表是列表项的集合。但是，根据我的设计，待办事项列表可以有一个标题，我希望能够创建多个列表。

```
var TodoList = Backbone.Collection.extend({
    model: ListItem
});

//is this possible for collections?
var newTodoList = new TodoList({name: "My first list"}); 
```

非常感谢您的帮助！欣赏它！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T01:23:06.967

是的，这是可能的。查看`Collection`构造函数的签名：

> 新集合（[模型]，[选项]）

所以你可以这样写：

```
var ListItem = Backbone.Model.extend({});
var TodoList = Backbone.Collection.extend({
    model: ListItem,
    initialize: function(models, options) {
        options || (options = {});
        if (options.title) {
            this.title = options.title;
        };
    }
})

var iPromise = new TodoList([], {
    title: 'NY Resolutions'
})

console.log(iPromise.title); 
```

# c# - 如何在 Windows Phone 上异步加载数据

> ID：11130126
> 
> 赞同：0
> 
> 时间：2012-06-21T00:42:23.317
> 
> 标签：c#, .net, multithreading, windows-phone-7

我正在尝试异步加载数据，但第一次没有显示进度条，就像 UI 线程忙于调用 BackgroundWork 并且不呈现控件一样。我做错了什么？

这是异步代码，灵感来自这个问题[windows phone 7 progress bar for a listbox loading data](https://stackoverflow.com/questions/6346203/windows-phone-7-progress-bar-for-a-listbox-loading-data)

```
private void Embarques_Loaded(object sender, RoutedEventArgs e)
{

    progressBar.Visibility = System.Windows.Visibility.Visible;

    BackgroundWorker bw = new BackgroundWorker();

    bw.RunWorkerCompleted += (s, ea) =>
        Deployment.Current.Dispatcher.BeginInvoke(() =>
        {
            progressBar.Visibility = System.Windows.Visibility.Collapsed;
            txtUltimaAtualizacao.Text = DateTime.Now.ToString();
        });

    bw.DoWork += (s, ea) =>
        Deployment.Current.Dispatcher.BeginInvoke(CarregaItens);

    bw.RunWorkerAsync();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T00:46:11.177

假设`CarregaItens()`是你的加载过程，你不应该调用`Deployment.Current.Dispatcher.BeginInvoke`它，因为它只是将它从后台线程提升到 UI 线程，从而在它运行时冻结你的应用程序。只需致电：

`bw.DoWork += (s, ea) => CarregaItens();`

# c - 字符串如何在c中的内存中表示

> ID：11130130
> 
> 赞同：2
> 
> 时间：2012-06-21T00:42:41.060
> 
> 标签：c, string, pointers, klocwork

```
char imei_temp[14] = {0, };

strcpy(imei_temp, "00000000000000"); 
```

根据我的理解，这是有效的代码。

但是 Klocwork 说缓冲区溢出，' `imei_temp`' 的数组索引可能超出范围。大小为 14 的数组 ' `imei_temp`' 可以使用索引值 0..14

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-21T00:44:15.153

这是一个缓冲区溢出，因为您的缓冲区是 14 个字节，但您正在向它写入 15 个字节：14 个 ascii“0”，最后是一个空字节。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T00:44:46.140

当您使用`"`s 指定一个字符串时，它会在字符串的末尾添加一个隐式`\0`，您正在尝试将 15 个字节复制到 14 个字节的缓冲区中。

`'`请注意，当您使用s指定字符时，不会发生这种情况。

# c++ - 解密未找到函数重载错误消息

> ID：11130139
> 
> 赞同：0
> 
> 时间：2012-06-21T00:44:30.007
> 
> 标签：c++, linux, icc

我有以下代码：-

```
class A : public B {
  public:
    _container (B* b) { 
      container_ = b;
    }
  private:
    B* container_;
};

void foo(const A& a, const B& b) {
  A new_a (a);
  new_a._container(&b);
} 
```

如果我尝试使用 icpc12 编译它，我会得到：-

```
error: no instance of overloaded function "A::_container" matches the argument list
            argument types are: (const B *)
            object type is: A
      new_a._container (&b); 
```

现在，我知道错误的第一行意味着被调用的函数和可用的函数定义之间存在某种类型的不匹配，我正在尝试使用错误消息的其他两行来缩小问题的范围。

第二行和第三行是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T00:48:49.903

该函数将非常量指针作为参数，并且您正在传递一个 const 指针。

# javascript - Android WebView：database.readTransaction 导致 TypeError 异常

> ID：11130141
> 
> 赞同：1
> 
> 时间：2012-06-21T00:44:36.427
> 
> 标签：javascript, android, database, html, webview

我有一个 HTML5 数据库`App.val.DB`，我想在使用`App.val.DB.readTransaction`. 这在 BlackBerry/PlayBook/Chrome 上运行良好，但在 Android 上（在 WebView 内）会导致以下 TypeError 异常。

```
06-21 00:36:07.276: D/NotepadActivity(387): TypeError: Result of expression 'App.val.DB.readTransaction' [undefined] is not a function. -- From line 271 of file:///android_asset/script/main.js 
```

以下是相关的 JavaScript：

```
 if(App.val.DB != null) {
            App.val.DB.readTransaction(
                function (t) {t.executeSql("SELECT * FROM " + App.schema.tableName + " ORDER BY "+App.schema.date+" DESC, "+App.schema.ID+" DESC", 
                        [], 
                        function (t, res) { /* Success */
                            App.log("Success");
                        },  
                        function (t, err) { /* Error */
                            App.log("Fail");
                        }
                    );
                }
            );
        } else {
            App.log("Database was NULL");
        } 
```

# python - Gtk 对象没有属性“ICON_SIZE_BUTTON”

> ID：11130142
> 
> 赞同：3
> 
> 时间：2012-06-21T00:44:37.383
> 
> 标签：python, gtk, icons, pygtk

我对 python 和 gtk 几乎是新手。

我只是想不通，为什么我会收到此错误消息：

```
self.builder.get_object("checkstatus").set_from_stock("gtk-yes", Gtk.ICON_SIZE_BUTTON)
.......
AttributeError: 'gi.repository.Gtk' object has no attribute 'ICON_SIZE_BUTTON' 
```

一开始我正在导入：

```
import pygtk
pygtk.require('2.0')
from gi.repository import Gtk 
```

所以问题是gtk没有名为'ICON_SIZE_BUTTON'的属性？但是当我查看文档时，它是这么说的......

[http://developer.gnome.org/pygtk/2.22/class-gtkimage.html#method-gtkimage--set-from-stock](http://developer.gnome.org/pygtk/2.22/class-gtkimage.html#method-gtkimage--set-from-stock)

我将不胜感激任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T02:34:47.063

嗯，有几件事正在发生。

对于使用 PyGObject 的 GTK+ 3，您使用`from gi.repository import Gtk`然后使用`Gtk.IconSize.BUTTON`.

对于使用 PyGTK 的 GTK+ 2，您使用`import pygtk`，`import gtk`然后使用`gtk.ICON_SIZE_BUTTON`.

换句话说，您正在混淆版本。PyGTK (GTK 2) 被 PyGObject 和 GTK 3 中称为“gobject introspection”的东西所取代。查看本教程：[http://python-gtk-3-tutorial.readthedocs.org/en/latest/index.html](http://python-gtk-3-tutorial.readthedocs.org/en/latest/index.html)

# hadoop - hadoop MultipleInputs 失败并出现 ClassCastException

> ID：11130145
> 
> 赞同：18
> 
> 时间：2012-06-21T00:44:55.907
> 
> 标签：hadoop, classcastexception

我的 hadoop 版本是 1.0.3，当我使用多个输入时，我得到了这个错误。

```
java.lang.ClassCastException: org.apache.hadoop.mapreduce.lib.input.TaggedInputSplit cannot be cast to org.apache.hadoop.mapreduce.lib.input.FileSplit
at org.myorg.textimage$ImageMapper.setup(textimage.java:80)
at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:142)
at org.apache.hadoop.mapreduce.lib.input.DelegatingMapper.run(DelegatingMapper.java:55)
at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764)
at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:416)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
at org.apache.hadoop.mapred.Child.main(Child.java:249) 
```

我测试了单输入路径，没问题。只有当我使用

```
MultipleInputs.addInputPath(job, TextInputpath, TextInputFormat.class,
            TextMapper.class);
    MultipleInputs.addInputPath(job, ImageInputpath,
            WholeFileInputFormat.class, ImageMapper.class); 
```

我用谷歌搜索，发现这个链接[https://issues.apache.org/jira/browse/MAPREDUCE-1178](https://issues.apache.org/jira/browse/MAPREDUCE-1178)说 0.21 有这个错误。但是我使用的是 1.0.3，这个 bug 又回来了。任何人有同样的问题或任何人都可以告诉我如何解决它？谢谢

这是图像映射器的设置代码，第 4 行是发生错误的地方：

```
protected void setup(Context context) throws IOException,
            InterruptedException {
        InputSplit split = context.getInputSplit();
        Path path = ((FileSplit) split).getPath();
        try {
            pa = new Text(path.toString());
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-21T01:30:23.240

跟进我的评论，Javadocs`TaggedInputSplit`确认您可能错误地将输入拆分转换为 FileSplit：

```
/**
 * An {@link InputSplit} that tags another InputSplit with extra data for use
 * by {@link DelegatingInputFormat}s and {@link DelegatingMapper}s.
 */ 
```

我的猜测是您的设置方法如下所示：

```
@Override
protected void setup(Context context) throws IOException,
        InterruptedException {
    FileSplit split = (FileSplit) context.getInputSplit();
} 
```

不幸`TaggedInputSplit`的是，它不公开可见，因此您不能轻松地进行`instanceof`样式检查，然后进行强制转换，然后调用以`TaggedInputSplit.getInputSplit()`获取实际的底层 FileSplit。因此，要么您需要自己更新源并重新编译和部署，发布 JIRA 票以要求在未来版本中修复此问题（如果它尚未在 2+ 中执行）或执行一些令人讨厌*的*反射骇客获取底层 InputSplit

这是完全未经测试的：

```
@Override
protected void setup(Context context) throws IOException,
        InterruptedException {
    InputSplit split = context.getInputSplit();
    Class<? extends InputSplit> splitClass = split.getClass();

    FileSplit fileSplit = null;
    if (splitClass.equals(FileSplit.class)) {
        fileSplit = (FileSplit) split;
    } else if (splitClass.getName().equals(
            "org.apache.hadoop.mapreduce.lib.input.TaggedInputSplit")) {
        // begin reflection hackery...

        try {
            Method getInputSplitMethod = splitClass
                    .getDeclaredMethod("getInputSplit");
            getInputSplitMethod.setAccessible(true);
            fileSplit = (FileSplit) getInputSplitMethod.invoke(split);
        } catch (Exception e) {
            // wrap and re-throw error
            throw new IOException(e);
        }

        // end reflection hackery
    }
} 
```

**反射黑客解释：**

随着 TaggedInputSplit 被声明为受保护范围，它对`org.apache.hadoop.mapreduce.lib.input`包外的类不可见，因此您不能在 setup 方法中引用该类。为了解决这个问题，我们执行了一些基于反射的操作：

1.  检查类名，我们可以使用它的完全限定名来测试类型 TaggedInputSplit

    `splitClass.getName().equals("org.apache.hadoop.mapreduce.lib.input.TaggedInputSplit")`

2.  我们知道我们要调用该`TaggedInputSplit.getInputSplit()`方法来恢复包装的输入拆分，因此我们利用`Class.getMethod(..)`反射方法来获取对该方法的引用：

    `Method getInputSplitMethod = splitClass.getDeclaredMethod("getInputSplit");`

3.  该类仍然不是公共可见的，因此我们使用 setAccessible(..) 方法来覆盖它，阻止安全管理器抛出异常

    `getInputSplitMethod.setAccessible(true);`

4.  最后，我们在对输入拆分的引用上调用该方法并将结果转换为 FileSplit（乐观地希望它是这种类型的实例！）：

    `fileSplit = (FileSplit) getInputSplitMethod.invoke(split);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T16:02:45.827

我遇到了同样的问题，但实际问题是我在设置 MultipleInputs 后仍在设置 InputFormat：

```
job.setInputFormatClass(SequenceFileInputFormat.class); 
```

一旦我删除了这条线，一切都很好。

# jfreechart - 如何在 JFreeChart TaskSeriesCollection 中使用多个 TaskSeries

> ID：11130146
> 
> 赞同：1
> 
> 时间：2012-06-21T00:45:08.563
> 
> 标签：jfreechart, gantt-chart

如果我将所有任务放在一个`TaskSeries`中，我会得到正常大小的甘特图条，但是当我执行相同的任务时，将它们放入多个`TaskSeries`中，它会变成非常细的条。这是一个错误，还是我做错了？

![在此处输入图像描述](../Images/62465039b98251761173d355a0d63fbd.png) 右键单击并“查看图像”，您可以阅读代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T14:07:15.583

我没有解决方案，但这可能会帮助您找到解决方案。

在您的第二个示例中，`JFreeChart`为每个任务系列在每个任务（y 轴）中留出空间；条形宽度是可用空间/任务系列数。希望这个插图有助于：

![在此处输入图像描述](../Images/15d3cde6e23b5349249af01d004ffeac.png)

在 (A) 中，我创建了 6 个任务，但只有一个工作；在 (B) 中，我创建了第二份工作并附加了 3 个任务。在 (B) 中，条形大约是一半宽，因此所有任务中的两个工作都有空间。在 (D) 中，您可以看到，因为我已经移动了其中一项任务。您可以使用以下代码尽可能地加厚条：

```
 plot.getDomainAxis().setCategoryMargin(0.05);
  plot.getDomainAxis().setLowerMargin(0.05);
  plot.getDomainAxis().setUpperMargin(0.05);
  GanttRenderer renderer = (GanttRenderer) plot.getRenderer();
  renderer.setItemMargin(0); 
```

[板上的这个](http://www.jfree.org/phpBB2/viewtopic.php?f=3&t=29782)线程`JFreeChart`可能会进一步阐明这个问题。

# sql - HTML5 web sql：向每一行添加按钮

> ID：11130147
> 
> 赞同：0
> 
> 时间：2012-06-21T00:45:11.473
> 
> 标签：sql, html, row

我有一些脚本从 SQL 数据库传递一系列行。

我想在每一行附加一个按钮。（）。我目前的代码是：

```
tx.executeSql('SELECT * FROM myprogram', [], function (tx, results) {
                   var len = results.rows.length, i;
                    for (i = 0; i < len; i++) {

                        $('#myprog').append(results.rows.item(i).event)
                               $('.event').append('<button class="save_event">Remove</button>');

                        }
                }); 
```

但是按钮会加倍。例如，如果我得到 3 行，第一行将有 3 个按钮，第二行将有 2 个，最后一行将有 1 个按钮。

谁能帮我让按钮每行只显示一次？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T00:51:06.780

我找到了答案，很简单：

```
var len = results.rows.length, i;
                    for (i = 0; i < len; i++) {

                        $('#myprog').append(results.rows.item(i).event).append('<button class="remove_event">Remove</button>');

                    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T00:54:52.620

```
$('#myprog').append(results.rows.item(i).event).append('<button class="remove_event">Remove</button>'); 
```

您需要附加到`$('#myprog')`选择器。

# facebook - 如何以编程方式在 Facebook 墙上发帖？

> ID：11130149
> 
> 赞同：3
> 
> 时间：2012-06-21T00:45:39.767
> 
> 标签：facebook, facebook-graph-api

我对 Facebook 很陌生（是的，我是唯一一个），但我想使用 Python 以编程方式在墙上发布消息。

我需要做什么才能实现这一目标？我很困惑。我已经看到有关此的大多数问题都集中在如何让应用程序以某种方式与 Facebook 交互，但我想像一个简单的用户一样发布（碰巧“拥有”那个特定 Facebook 页面的用户）。我真的需要去创建一个应用程序吗？（顺便说一句，即使这样我也遇到了问题......它告诉我，即使我通过短信验证了我的帐户，我的帐户似乎也是假的或无效的）。我想有一种更简单的方法，使用`POST`请求介绍我的凭据，但我还没有读过类似的东西。

我原以为[这](http://developers.facebook.com/docs/reference/api/#publishing)是我需要的，但它会导致创建应用程序的页面。

一些指针？

顺便说一句，我通过 Graph API Explorer 中的 publish_stream 权限获得了一个令牌（使用扩展权限选项卡）。似乎此权限没有到期日期，但不建议这样做。令牌有更好的选择吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T01:39:20.890

Facebook 比它出现的其他网站要复杂一些。

在 Firebug 中查看 NET 下的 POST 选项卡时，在登录时，我看到以下 POST 参数：

```
charset_test    €,´,€,´,水,Д,Є
default_persistent  1
email   myusername
lgnjs   1340241652
lgnrnd  182050_CuPx
locale  en_US
lsd AVqwALVx
pass    mypassword
persistent  1
timezone    240 
```

我还不知道`lsd`参数是什么，但我确实通过在登录之前查看登录页面的源代码找到了 lgnrnd 是什么。它似乎使自动化身份验证变得更加困难。

您首先希望您的脚本为该值抓取该登录页面，并将其存储在一个变量中。然后，一个 cURL 示例将类似于：

```
curl -L "https://www.facebook.com/login.php?login_attempt=1" \
  --cookie-jar /tmp/cookies.txt \
  --data-urlencode "email=myusername" \
  --data-urlencode "lgnrnd=$lgnrnd" \
  --data-urlencode "pass=mypassword"
  and so forth, with all the parameters... 
```

当然，这是未经测试的，我还不知道其中一些参数值是什么，但你应该从中得到想法。您可能可以使用像 Beautiful Soup 这样的 python 模块或其他东西来应用上述基本概念。

然后你会做同样的事情，查看 NET 选项卡以找到当你发布到你的 facebook 墙时发送的参数，并将它们放在一起。

请注意，我使用 curl 的 --cookie-jar 选项存储和使用 cookie。您还需要一种方法来保存和使用请求的 cookie，这就是我展示的原因。

希望对您入门有所帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T02:21:24.500

那这个呢？。

```
import urllib2, urllib
parameters = {}
parameters['access_token'] = MY_TOKEN
parameters['message'] = 'Hello world'
target = 'https://graph.facebook.com/MY_ID/feed'

parameters = urllib.urlencode(parameters)
handler = urllib2.urlopen(target, parameters)
while True:
    if handler.code < 400:
        print handler.read() # Gets post_id
        break
    elif handler.code >= 400:
        print 'Error' # :-(
        break 
```

这有问题吗？也许更好的方法？注释？

谢谢

# c# - TransactionScope 跨多个方法不是 ACID？

> ID：11130155
> 
> 赞同：4
> 
> 时间：2012-06-21T00:46:36.333
> 
> 标签：c#, transactions, transactionscope

我有这样的代码：

```
using (TransactionScope transactionScope = new TransactionScope())
        {
            SetDefaults(products);

            // Map the SizeCollectionIds of the products
            _dataAccess.MapProductSizes(products);

            // Mass update and insert missing parent records to the database
            _dataAccess.UpdateParents(products);

            // Get ids of parent products that were newly inserted
            _dataAccess.PopulateParentProductByParentSku(products);

            // Insert children into database
            _dataAccess.InsertProducts(products);

            // Insert the UPCs into the database
            _dataAccess.InsertUPCs(products);

            // Get Product Ids of newly inserted records
            _dataAccess.PopulateProductIds(products);

            // Get just the parent products to insert the brands
            List<ParentProduct> parents = (from prod in products
                                           select prod.ParentProduct).Distinct().ToList();

            // Insert ParentProductBrand record
            _dataAccess.InsertParentProductBrands(parents);

            // Insert the custom attribute records
            _dataAccess.InsertProductCustomAttributes(products);

            transactionScope.Complete();
        } 
```

我的意图是，如果在事务范围内调用的方法中的任何地方发生错误，则事务将回滚，但经过一些测试，似乎情况并非如此，我的数据最终还是半成品。有什么我想念的吗？我是否必须在自己的 TransactionScope 中将数据访问调用包装在方法本身中才能使其正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T01:37:26.327

看起来在您的 DataAccess 层中创建了几个数据库连接实例。尝试在 DataAccess 类构造函数中实例化您的数据库连接，并在您的 DataAccess 方法中使用它。您可能想阅读[这篇博文](http://pieterderycke.wordpress.com/2012/01/22/transactionscope-transaction-escalation-behavior/)

# python - 抑制 Python 函数的 stdout / stderr 打印

> ID：11130156
> 
> 赞同：48
> 
> 时间：2012-06-21T00:46:40.117
> 
> 标签：python, stdout

我有一个 Python 脚本，它使用了我的雇主提供的一些封闭式 Python 函数（即我无法编辑这些函数）。当我调用这些函数时，它们会将输出打印到我想要​​抑制的 linux 终端。我尝试通过重定向标准输出/标准错误；

```
orig_out = sys.stdout
sys.stdout = StringIO()
rogue_function()
sys.stdout = orig_out 
```

但这无法捕捉输出。我认为我通过 Python 调用的函数（上面的 rogue_function()）实际上是编译后的 C 代码的包装器，它们实际上是在进行打印。

有谁知道我可以通过函数（以及函数调用的任何子函数）对传递给 stdout / stderr 的任何打印进行“深度捕获”？

**更新**：

我最终采用了下面所选答案中概述的方法并编写了一个上下文管理器来抑制 stdout 和 stderr：

```
# Define a context manager to suppress stdout and stderr.
class suppress_stdout_stderr(object):
    '''
    A context manager for doing a "deep suppression" of stdout and stderr in 
    Python, i.e. will suppress all print, even if the print originates in a 
    compiled C/Fortran sub-function.
       This will not suppress raised exceptions, since exceptions are printed
    to stderr just before a script exits, and after the context manager has
    exited (at least, I think that is why it lets exceptions through).      

    '''
    def __init__(self):
        # Open a pair of null files
        self.null_fds =  [os.open(os.devnull,os.O_RDWR) for x in range(2)]
        # Save the actual stdout (1) and stderr (2) file descriptors.
        self.save_fds = [os.dup(1), os.dup(2)]

    def __enter__(self):
        # Assign the null pointers to stdout and stderr.
        os.dup2(self.null_fds[0],1)
        os.dup2(self.null_fds[1],2)

    def __exit__(self, *_):
        # Re-assign the real stdout/stderr back to (1) and (2)
        os.dup2(self.save_fds[0],1)
        os.dup2(self.save_fds[1],2)
        # Close all file descriptors
        for fd in self.null_fds + self.save_fds:
            os.close(fd) 
```

要使用它，您只需：

```
with suppress_stdout_stderr():
    rogue_function() 
```

这工作“相当不错”。它确实抑制了使我的脚本混乱的流氓函数的打印输出。我在测试它时注意到它允许通过引发的异常以及一些记录器打印，我并不完全清楚为什么。我认为这与这些消息*何时*发送到 stdout / stderr 有关（我认为它发生在我的上下文管理器退出之后）。如果有人能证实这一点，我很想听听细节......

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2018-09-21T11:02:34.363

从 python 3.5 开始，我们可以使用内置的.[`contextlib`](https://docs.python.org/3/library/contextlib.html)即[`redirect_stdout`](https://docs.python.org/3/library/contextlib.html#contextlib.redirect_stdout)和[`redirect_stderr`](https://docs.python.org/3/library/contextlib.html#contextlib.redirect_stderr). 我们只需要将这两个内置的上下文管理器组合在我们的自定义上下文管理器中，这可以使用[Martijn 的答案中的 nice 模式](https://stackoverflow.com/a/45681273/5067311)轻松完成。将两个输出重定向到[`os.devnull`](https://docs.python.org/3/library/os.html#os.devnull)应该足够安全和​​便携。

```
from contextlib import contextmanager,redirect_stderr,redirect_stdout
from os import devnull

@contextmanager
def suppress_stdout_stderr():
    """A context manager that redirects stdout and stderr to devnull"""
    with open(devnull, 'w') as fnull:
        with redirect_stderr(fnull) as err, redirect_stdout(fnull) as out:
            yield (err, out) 
```

* * *

请注意，`stderr`当某些东西中断时，抑制仍然会给您完整的回溯，这是一件好事：

```
import sys

def rogue_function():
    print('spam to stdout')
    print('important warning', file=sys.stderr)
    1 + 'a'
    return 42

with suppress_stdout_stderr():
    rogue_function() 
```

当运行上述仅打印

```
Traceback (most recent call last):
  File "tmp.py", line 20, in <module>
    rogue_function()
  File "foo.py", line 16, in rogue_function
    1 + 'a'
TypeError: unsupported operand type(s) for +: 'int' and 'str' 
```

到终端。未处理的异常不应该被忽视。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-21T22:00:12.967

[这种方法](https://stackoverflow.com/a/978264/344821)（通过相关的侧边栏找到）可能有效。它重新分配文件描述符，而不仅仅是 sys.stdout 等中的包装器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T03:02:51.640

您是否也尝试重定向 stderr ？例如

```
sys.stdout = StringIO()
sys.stderr = StringIO()
foo(bar)
sys.stdout = sys.__stdout__ # These are provided by python
sys.stderr = sys.__stderr__ 
```

也使用 StringIO 可能会使用额外的内存。您可以改用虚拟设备（例如[http://coreygoldberg.blogspot.com/2009/05/python-redirect-or-turn-off-stdout-and.html](http://coreygoldberg.blogspot.com/2009/05/python-redirect-or-turn-off-stdout-and.html)）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-05-20T18:32:24.197

python 3.6 工作版，经过百万次抑制测试，没有任何错误

```
import os
import sys

class suppress_stdout_stderr(object):
    def __enter__(self):
        self.outnull_file = open(os.devnull, 'w')
        self.errnull_file = open(os.devnull, 'w')

        self.old_stdout_fileno_undup    = sys.stdout.fileno()
        self.old_stderr_fileno_undup    = sys.stderr.fileno()

        self.old_stdout_fileno = os.dup ( sys.stdout.fileno() )
        self.old_stderr_fileno = os.dup ( sys.stderr.fileno() )

        self.old_stdout = sys.stdout
        self.old_stderr = sys.stderr

        os.dup2 ( self.outnull_file.fileno(), self.old_stdout_fileno_undup )
        os.dup2 ( self.errnull_file.fileno(), self.old_stderr_fileno_undup )

        sys.stdout = self.outnull_file        
        sys.stderr = self.errnull_file
        return self

    def __exit__(self, *_):        
        sys.stdout = self.old_stdout
        sys.stderr = self.old_stderr

        os.dup2 ( self.old_stdout_fileno, self.old_stdout_fileno_undup )
        os.dup2 ( self.old_stderr_fileno, self.old_stderr_fileno_undup )

        os.close ( self.old_stdout_fileno )
        os.close ( self.old_stderr_fileno )

        self.outnull_file.close()
        self.errnull_file.close() 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-19T19:01:46.240

我的解决方案与您的类似，但使用`contextlib`并且更短且更易于理解（恕我直言）。

```
import contextlib

@contextlib.contextmanager
def stdchannel_redirected(stdchannel, dest_filename):
    """
    A context manager to temporarily redirect stdout or stderr

    e.g.:

    with stdchannel_redirected(sys.stderr, os.devnull):
        if compiler.has_function('clock_gettime', libraries=['rt']):
            libraries.append('rt')
    """

    try:
        oldstdchannel = os.dup(stdchannel.fileno())
        dest_file = open(dest_filename, 'w')
        os.dup2(dest_file.fileno(), stdchannel.fileno())

        yield
    finally:
        if oldstdchannel is not None:
            os.dup2(oldstdchannel, stdchannel.fileno())
        if dest_file is not None:
            dest_file.close() 
```

我创建它的原因在[此博客文章](http://marc-abramowitz.com/archives/2013/07/19/python-context-manager-for-redirected-stdout-and-stderr/)中。我觉得和你的差不多。

我在 a 中这样使用它`setup.py`：

```
with stdchannel_redirected(sys.stderr, os.devnull):
    if compiler.has_function('clock_gettime', libraries=['rt']):
        libraries.append('rt') 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-06-10T10:58:47.757

OP 并没有真正要求，但我需要隐藏*和存储*输出，并且执行如下操作：

```
from io import StringIO
import sys

class Hider:
    def __init__(self, channels=('stdout',)):
        self._stomach = StringIO()
        self._orig = {ch : None for ch in channels}

    def __enter__(self):
        for ch in self._orig:
            self._orig[ch] = getattr(sys, ch)
            setattr(sys, ch, self)
        return self

    def write(self, string):
        self._stomach.write(string)

    def flush(self):
        pass

    def autopsy(self):
        return self._stomach.getvalue()

    def __exit__(self, *args):
        for ch in self._orig:
            setattr(sys, ch, self._orig[ch]) 
```

用法：

```
with Hider() as h:
    spammy_function()
    result = h.autopsy() 
```

（仅使用 Python 3 测试）

**编辑：**现在允许选择`stderr`，`stdout`或两者，如`Hider([stdout, stderr])`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-03-18T18:27:16.240

我为此使用了装饰器。它保存`sys.stdout`和`sys.stderr`引用并使这些变量指向空值。然后，在函数执行后检索原始引用。重要的是要注意 try/except 块，即使函数引发异常，它也允许检索原始引用。

```
def suppress_std(func):
    def wrapper(*args, **kwargs):
        stderr_tmp = sys.stderr
        stdout_tmp = sys.stdout
        null = open(os.devnull, 'w')
        sys.stdout = null
        sys.stderr = null
        try:
            result = func(*args, **kwargs)
            sys.stderr = stderr_tmp
            sys.stdout = stdout_tmp
            return result
        except:
            sys.stderr = stderr_tmp
            sys.stdout = stdout_tmp
            raise
    return wrapper 
```

要使用：

```
@suppress_std
def function_std_suppressed():
    # code here 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-10T23:24:55.540

只需使用 Linux/Unix：

```
./myscript.py 2>/dev/null # gets rid of stderr
./myscript.py 2>/somewhere/myerror.log 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-06-21T02:45:25.387

如果您在基于 linux 的机器上运行此脚本，您应该能够：

```
$> ./runscript.py > output.txt 
```

# objective-c - 是否需要使用 ARC 来保留 UIView 属性的属性？

> ID：11130157
> 
> 赞同：0
> 
> 时间：2012-06-21T00:46:41.073
> 
> 标签：objective-c, automatic-ref-counting

在 ARC 之前，您可以将 .h 文件中的属性声明为：

```
@property (nonatomic,retain) UIView *someUIView; 
```

使用 ARC，我还需要使用`retain`还是可以只写这个？

```
@property (nonatomic) UIView *someUIView; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T01:39:37.260

在 LLVM 3.1 及更高版本中，您可以执行任何一项，因为它们是相同的。在 ARC 下，`strong`（与 相同`retain`）是可保留对象指针的默认值（如果未指定）。

引用[LLVM ARC 文档](http://clang.llvm.org/docs/AutomaticReferenceCounting.html)：

> 在没有所有权来源的情况下合成的可保留对象指针类型的属性具有其关联实例变量的所有权，如果它已经存在的话；否则，[从 Apple 3.1，LLVM 3.1 开始] 它的所有权隐含地很强。在此修订版之前，合成这样的属性是不正确的。

无论如何，我通常会发现自己键入“strong”，我认为因为`assign`以前是默认设置，所以每当我看到一个没有指定所有权的可保留对象属性时，它只会让我害怕一瞬间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T00:54:27.543

`strong`关键字已在 的位置上做广告，`retain`但它们实际上是一回事。所以你可以使用`strong`or `retain`。

您的视图将需要被至少一个对象保留。如果您的视图已被另一个对象保留，您可以将其`assign`设为（又名弱）属性。否则，您可以保留`retain`or`strong`关键字。

# c++ - 如何使用需要指向 C++ 中的 void 函数的指针的 Functor 调用 C 函数？

> ID：11130158
> 
> 赞同：2
> 
> 时间：2012-06-21T00:46:43.397
> 
> 标签：c++, c, function-pointers, allegro

我想包装（`Facade Pattern`）Allegro 对线程的使用，即我`install_int_ex(void (__cdecl*)(void), int tick);`编写`remove_int(void (__cdecl*)(void))`的​​一个使用模板`user-defined Functor Objects`的类，并在创建和销毁类时安装中断和删除中断。

我不断收到编译器错误：`error C2664: 'install_int_ex' : cannot convert parameter 1 from 'void (__thiscall [User-defined FunctorName Here]::* )(void)' to 'void (__cdecl *)(void)'`和类似的`remove_int(void (__cdecl*)(void))`

[*如果被调用的函数接受指向**用户数据*的指针，这似乎可行*`void*`*](https://stackoverflow.com/questions/7140042/c-functor-as-a-function-pointer)

不幸的是，Allegro 没有这么灵活。有没有办法绕过这个限制，或者我将不得不使用 Windows `CreateThread`（并在这个过程中学习线程“真正的方式”）？

另请参阅：[使用 C++ 成员函数作为线程的入口点函数](http://www.computersciencelab.com/MultithreadingTut1.htm)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T01:11:35.540

这是不可能的。这是预期的函数类型（忽略`__cdecl`）：

```
void (*)(void); 
```

它不带任何参数。如果这是 C++ 中的非静态成员函数，那么会有一个隐式`this`参数，但这是 C。如果你想将参数传递给你的函数（包括隐式`this`参数），你不能这样做。

您可以使用全局变量来传递函子（错误），或者只使用线程。

## 然而，

请注意`install_int_ex`( [source](http://www.allegro.cc/manual/4/api/timer-routines/install_int_ex) ) 的 allegro 文档：

> 但是，您应该知道，它将在中断上下文中调用，这对您可以在其中执行的操作施加了很多限制。它不应该使用大量的堆栈，它不能对操作系统进行任何调用，不能使用 C 库函数，或者包含任何浮点代码，并且它必须非常快速地执行。

**中断上下文是一件危险的事情，**它与线程不同，你不应该**将****C** ++ 代码放在中断上下文中，除非你非常擅长弄清楚你的 C++ 代码做了什么。

**不要将 C++ 函数传递给`install_int_ex`.** （同样，除非您*确切地*知道什么库调用了您的 C++ 代码，或者没有。）

一般来说，学习如何编写在中断中运行的代码比学习如何编写多线程代码更难。中断以线程不会的方式对库函数造成严重破坏，并且在众所周知的程序中存在许多由信号处理程序中的细微错误引起的安全漏洞和错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T00:54:43.307

您正在传递类 AlarmFunctionObject 的非静态成员函数。尝试将成员函数声明为静态。如果您需要访问实际的 AlarmFunctionObject，则必须传递一个静态函数，该函数在该范围内可以访问的某个对象上调用其中的非静态成员函数

```
class AlarmFunctionObject
{
public:
    static void func()
    {
        someInstanceOfAlarmFunctionObject->myMemberAFunc();
    }
    void myMmberFunc()
    {
        // do stuff
    }
}; 
```

并通过 AlarmFunctionObject::func 而不是 myMemberFunc

# javascript - Javascript返回奇怪的值

> ID：11130162
> 
> 赞同：3
> 
> 时间：2012-06-21T00:47:30.097
> 
> 标签：javascript

我正在测试一个函数，看看当它的参数是什么时会发生什么，`null`并决定用它加上一个 else 语句。令我惊讶的是，它没有记录我传递的参数，它完全记录了其他东西。也许有人可以对此有所了解，这是代码：

```
function testing(o) {
    if (!o) {
        return "Sorry, looks like you need to pass an argument.."
    } else {
        return o;
    }
}

console.log(testing(02034));
//logs 1052 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T00:48:56.040

在 Javascript 中，与其他语言一样，以 0 开头的数字表示它的基数为 8（八进制）。

因此，`02034`以 8 为底 = 以 10 为底的 1052（十进制）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T00:53:03.833

前导“0”导致 JavaScript 将该值读取为[八进制](http://en.wikipedia.org/wiki/Octal)数。当您将它打印到控制台时，它会被转换回它的十进制表示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T00:51:36.893

该符号称为[八进制整数文字](https://www.google.com/search?q=octal%20integer%20literal)

# sql-server - 在 SQL Server SELECT 语句中查询聚合列

> ID：11130164
> 
> 赞同：0
> 
> 时间：2012-06-21T00:47:34.440
> 
> 标签：sql-server, aggregate

我有一个运行良好的 SQL Server 查询——直到我将一个计算列添加到 SELECT 语句。然后我得到一个奇怪的 SQL Server 错误。

这是SQL：

```
SELECT
    outmail_.MessageID_, 
    CONVERT(VARCHAR(10),outmail_.Created_,120) AS 'Issue', 
    lyrReportSummaryData.mailed, 
    lyrReportSummaryData.successes, 
    COUNT(*) AS 'opens',
    COUNT(DISTINCT clicktracking_.MemberID_) AS 'unique_opens', 
    convert(decimal(3,1),((convert(float,[unique_opens]))/[successes]) * 100) AS 'Rate'
FROM 
    outmail_ 
RIGHT JOIN 
    clicktracking_ ON clicktracking_.MessageID_ = outmail_.MessageID_
RIGHT JOIN 
    lyrReportSummaryData ON lyrReportSummaryData.id = clicktracking_.MessageID_ 
GROUP BY  
    outmail_.MessageID_, CONVERT(VARCHAR(10), outmail_.Created_,120), 
    lyrReportSummaryData.mailed, lyrReportSummaryData.successes 
```

问题是以包含时开头的行`convert(decimal ...` ，我收到以下错误：

> 错误 8120：列 'lyrReportSummaryData.unique_opens' 在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中。

我不确定如何解决该错误，因为我不知道如何在`GROUP BY`子句中使用它（而且我似乎不需要这样做）。

有关如何进行的任何建议？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T00:57:46.927

我敢肯定，比我有更好的 DBA 技能的人可以指出一种更有效的方法，但是......

如果您将大部分查询作为子查询执行，则可以对子查询的结果进行计算：

```
 SELECT 
    MessageID_, 
    Issue, 
    mailed, 
    successes, 
    opens, 
    unique_opens, 
    convert(decimal(3,1),((convert(float,[unique_opens]))/[successes]) * 100) AS 'Rate'

 FROM 
 (SELECT
      outmail_.MessageID_, 
      CONVERT(VARCHAR(10),outmail_.Created_,120) AS 'Issue', 
      lyrReportSummaryData.mailed, 
      lyrReportSummaryData.successes, 
      COUNT(*) AS 'opens',
      COUNT(DISTINCT clicktracking_.MemberID_) AS 'unique_opens'

    FROM outmail_ 
    RIGHT JOIN clicktracking_ ON clicktracking_.MessageID_ = outmail_.MessageID_
    RIGHT JOIN lyrReportSummaryData ON lyrReportSummaryData.id = clicktracking_.MessageID_ 

    GROUP BY  outmail_.MessageID_, CONVERT(VARCHAR(10), outmail_.Created_,120), lyrReportSummaryData.mailed, lyrReportSummaryData.successes
   ) subquery /* was 'g' */ 
```

实际上，它所做的是运行分组，然后在此基础上进行计算。

必须给子查询一个别名（在本例中为“子查询”）——即使您不使用该别名。

# iphone - iOS4 到 iOS5，tabBar 应用程序的第一个视图没有响应触摸

> ID：11130165
> 
> 赞同：0
> 
> 时间：2012-06-21T00:47:43.153
> 
> 标签：iphone, ios5

我有一个 tabBar 应用程序，有 5 个选项卡。该应用程序是在以前版本的 Xcode for iOS4.3 中构建的。当我从 Xcode 4.3 运行这个应用程序时（在将基本 SDK 更改为“最新 iOS”之后），在 iPhone4.3 模拟器中，应用程序运行良好。但是当我在 iPhone 5.0 模拟器中运行这个应用程序时

应用程序加载正常，即我的第一个视图控制器的第一个屏幕已正确加载。但屏幕无法识别触摸（在 tableView、navigationBar 和 toolBar 上）

如果我选择另一个“选项卡”，则触摸会被识别，并且从其他选项卡加载的其他视图中的触摸工作正常。现在，如果我回到第一个视图，它工作正常。

我在 Interface Builder 中创建的 tabBarControllers、navigationControllers 和 viewControllers 中包含以下代码

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions

[self.window addSubview:self.tabBarController.view];
[self.window addSubview:[self.navigationController view]];
[self.window addSubview:self.toolBar];
[self.window makeKeyAndVisible];

return YES;
} 
```

我错过了 iOS5 需要的东西，但我就是想不通。如果其他人有类似的问题，如果你能分享它，如果你有解决方案，那就太好了……那太棒了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:12:14.910

才发现我的错...

我在应用程序中有更多代码：DidFinishLaunchingWithOptions 我正在初始化应用程序的其他属性，并且在代码的更下方，我重复了代码

```
[self.window addSubview:self.tabBarController.view]; 
```

这一定是在我的视图之上创建另一个层并导致视图没有响应。

（知道我会在堆栈溢出中找到答案 :).... 所以我一在这里发布问题，我就看到了我的错误）

# html - 锚点自动随背景图像改变宽度

> ID：11130167
> 
> 赞同：1
> 
> 时间：2012-06-21T00:48:05.690
> 
> 标签：html, css

当我在我的锚中放置背景图像时，我的锚正在改变它的宽度。看看background()之前和插入背景图片之后的结果

[http://s17.postimage.org/6xn7qci2l/tela.png](http://s17.postimage.org/6xn7qci2l/tela.png)

之前：http: [//jsfiddle.net/jvN7z/8/](http://jsfiddle.net/jvN7z/8/)

之后：http: [//jsfiddle.net/jvN7z/7/](http://jsfiddle.net/jvN7z/7/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T03:47:20.383

我认为这是您试图向所有人展示的问题：
[**jsFiddle 问题**](http://jsfiddle.net/jvN7z/9/)

如果是这样，解决方案是更改`width`为`auto`箭头图像，或者只是`width`从该样式中删除。
[**jsFiddle 已修复**](http://jsfiddle.net/jvN7z/10/)

# c++ - 如何在 lambda 中使用模板类型参数？

> ID：11130168
> 
> 赞同：6
> 
> 时间：2012-06-21T00:48:22.103
> 
> 标签：c++, templates, lambda, c++11

是否可以在本地匿名函数中使用来自周围模板函数的模板类型参数？我很确定我不能声明模板 lambda ...

例如，我将如何去做这样的事情：

```
template <typename T>
void TrimString(std::basic_string<T>& str, const std::locale& loc = std::locale())
{
    // std::isspace as lambda unary predicate?
    auto fn = [&loc](T c){ return std::use_facet<std::ctype<T>>(loc).is(std::ctype_base::space, c); };
    // trim right
    str.erase(std::find_if(str.rbegin(), str.rend(), std::not1(fn)).base(), str.end());
    // trim left
    str.erase(str.begin(), std::find_if(str.begin(), str.end(), std::not1(fn)));
} 
```

目前这会产生以下错误：

```
error C2039: 'argument_type' : is not a member of '`anonymous-namespace'::<lambda0>' 
```

`T`这是有道理的，因为 lambda 对来自周围模板函数的参数一无所知。

我使用 VS2010 和 gcc 4.7，但我不想使用 boost。

有任何想法吗？

**编辑：**我认为问题出在模板参数本身的假设似乎是错误的。相反，它是使用`std::not1`lambda 函数编译的。这是更详细的错误输出：

```
error C2039: 'argument_type' : is not a member of '`anonymous-namespace'::<lambda0>'
 : see declaration of '`anonymous-namespace'::<lambda0>'
 : see reference to class template instantiation 'std::unary_negate<_Fn1>' being compiled
          with
          [
              _Fn1=`anonymous-namespace'::<lambda0>
          ]
 : see reference to function template instantiation 'void TrimString<char>(std::basic_string<_Elem,_Traits,_Ax> &,const std::locale &)' being compiled
          with
          [
              _Elem=char,
              _Traits=std::char_traits<char>,
              _Ax=std::allocator<char>
          ] 
```

如果是函数类型，是否需要显式声明参数的类型？我不确定我做错了什么...

**答案：**

选项 1：如果我不使用`std::not1`而是否定 lambda 中的返回值，我会得到相同的行为而不会出现问题。

```
auto fn = [&loc](T c){ return !std::use_facet<std::ctype<T>>(loc).is(std::ctype_base::space, c); }; 
```

选项 2：由于 lambda 不再等同于`std::isspace`作为一元谓词的行为方式，因此函数对象构造函数强制转换也可以解决问题。

```
str.erase(std::find_if(str.rbegin(), str.rend(), std::not1(std::function<bool(T)>(fn))).base(), str.end()); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T01:36:51.223

该问题不是由在 lambda 中使用模板参数引起的，因为在构造 lambda 时该参数已被解析为一个类型。

问题是您定义的 lambda 不能与 结合`std::not1`，这需要 a 作为参数`std::unary_function<argument_type,return_type>`。

解决问题的最简单方法是不使用`std::not1`，而是在 lambda 表达式中否定谓词：

```
auto fn = [&loc](T c){ return !std::use_facet<std::ctype<T>>(loc).is(std::ctype_base::space,c); }; 
```

编译和使用 GCC 4.7.0 的完整代码变成：

```
#include <string>
#include <algorithm>
#include <locale>
#include <iostream>

template <typename T>
void TrimString(std::basic_string<T>& str, const std::locale& loc = std::locale())
{
  auto fn = [&loc](T c){ return !std::use_facet<std::ctype<T>>(loc).is(std::ctype_base::space,c); };

  str.erase(std::find_if(str.rbegin(), str.rend(),fn).base(), str.end());
  str.erase(str.begin(), std::find_if(str.begin(), str.end(), fn));
}

int main() {
  std::basic_string<char> s("  hello  ");
  TrimString(s);
  std::cout << s << std::endl;
  return 0;
} 
```

这输出

```
hello 
```

正如预期的那样。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-21T01:20:41.260

您当然可以`T`用作 lambda 表达式的参数类型。以下程序编译罚款`GCC 4.5.1`：

```
include <iostream>

template<typename T>
void f(T arg)
{
   auto print = [](T a) { std::cout << a << std::endl; };
   print(arg);
}

int main() {
        f(8899);
        f("Nawaz");
        return 0;
} 
```

看看你自己：http: [//ideone.com/l32Z6](http://ideone.com/l32Z6)

顺便说一句，错误消息似乎表明问题出在其他地方，特别是在*命名空间*范围内声明了 lambda：

> 错误 C2039：“argument_type”：不是**“匿名命名空间”**的成员::<lambda0>

* * *

在您编辑之后，我只能说不要使用`std::not1`。事实上，你甚至不需要它。您可以`return !whatever-expression`在 lambda 本身中使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T01:15:43.990

***编辑**：正如@Nawaz 指出的那样，您的错误一定来自其他地方......我在下面描述的是矫枉过正......*

使用`decltype`，您可以执行以下操作：

```
template <typename T>
void TrimString(std::basic_string<T>& str, 
                const std::locale& loc = std::locale(), 
                T arg = T())
{
    auto fn = [&loc](decltype(arg) c){ return std::use_facet<std::ctype<T>>(loc).is(std::ctype_base::space, c); };

    //...rest of your code
} 
```

`decltype(arg)`这是使用（或滥用）表达式计算为 的类型的事实，`arg`在本例中为 的类型`T`。

# html - 将图片存储在 cookie 中

> ID：11130171
> 
> 赞同：11
> 
> 时间：2012-06-21T00:48:55.103
> 
> 标签：html

我想在他们的浏览器中存储我的用户的小型个人资料图片，以便他们每次登录时都可以看到他们的个人资料图片（在登录表单中）（例如，当他们勾选记住我时）。我认为hotmail正在做类似的事情。

**是否可以将图像存储在用户计算机上并将路径存储在 cookie 中？**似乎 cookie 的最大大小为[4096 字节](https://stackoverflow.com/questions/640938/what-is-the-maximum-size-of-a-web-browsers-cookies-key)，因此可能很难将图像本身存储在 cookie 中。你有什么想法我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-21T00:55:07.390

当然，将指向在线图像的链接存储在 cookie 中并改用它会更有效吗？

每次浏览网页时，都会传输 cookie - 存储图像会增加不必要的带宽。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-21T00:51:10.160

使用 JavaScript 将其存储在 localStorage 中。

[https://web.archive.org/web/20160313121817/https://www.ibm.com/developerworks/mydeveloperworks/blogs/bobleah/entry/html5_code_example_store_images_using_localstorage57?lang=en](https://web.archive.org/web/20160313121817/https://www.ibm.com/developerworks/mydeveloperworks/blogs/bobleah/entry/html5_code_example_store_images_using_localstorage57?lang=en)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-21T00:53:56.507

您可以将图像的路径存储在 cookie 中并使用该值在登录屏幕中呈现它吗？

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-21T00:54:30.507

为什么您不想将图片存储在服务器上并将路径存储在 cookie 中？

这看起来更合适，然后在用户计算机上写入额外的数据......

# iphone - dismissModalViewController 隐藏状态栏后面的父视图

> ID：11130176
> 
> 赞同：13
> 
> 时间：2012-06-21T00:49:34.453
> 
> 标签：iphone, ios, xcode, ipad, mfmailcomposeviewcontroller

我在这里有一个非常奇怪的问题。我正在使用当前的模态视图控制器将我的 MFMailComposer ViewController 显示在放置在导航栏中的 ViewController 的顶部。

`[self presentModalViewController:emailviewController animated:YES];`

为了隐藏，我使用...

```
-(void) mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error
{

    [self dismissModalViewControllerAnimated:YES];
} 
```

一切正常，但是当我关闭 MailComposer 时，原始视图控制器隐藏在状态栏后面。

我尝试使用 setFrame 方法将视图偏移量修改为 10，但它不起作用。（这在模态视图控制器呈现和关闭之前和之后很累）

我曾尝试暂时隐藏状态栏，但没有奏效。

我已经尝试过 self.navigationcontroller presentmodalviewcontrolle 但这也没有用......

任何想法或建议将不胜感激

![调用dismissmodalviewcontroller后](../Images/e3407846746b2ed5f9945a782b663935.png)

编辑：大多数人给我建议手动修改偏移量。好吧，那是行不通的。因为如果我在原始 viewcontroller 方法的 viewDidLoad/viewWillapper 中这样做，那么它会在当前模态视图控制器之前移动我的视图，而在我加载模态视图控制器之后它会变得正常。

*   (void) viewDidAppear: (BOOL) 动画 { CGRect frame = self.navigationController.view.frame; frame.origin.y = 20; self.navigationController.view.frame = 框架；}

![改变偏移量会导致这个](../Images/bbbd00718d50b7fdd13f3aa90e0b2694.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T06:31:51.253

尝试将其放入 ViewDidAppear：

```
[[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleDefault]; 
```

最坏的情况，如果它总是在模态视图控制器被关闭后发生，请在 .h 中为 afterFirstLaunch 声明一个布尔值并将其放入 viewDidAppear：

```
if(afterFirstLaunch){
      CGRect frame = self.navigationController.view.frame;
      frame.origin.y = 20;
      self.navigationController.view.frame = frame;
}
else {
      afterFirstLaunch = true;
 } 
```

# python - urllib2 不会使用我的代理

> ID：11130184
> 
> 赞同：2
> 
> 时间：2012-06-21T00:50:26.143
> 
> 标签：python, proxy, urllib2

我正在尝试`urllib2`使用我用 HTTPS 代理构建的开启程序打开一个 URL，但是它使用我的普通 IP 请求它，而不是我给它的代理。

```
import urllib2

proxy  = urllib2.ProxyHandler({'https': 'IP:PORT'})
opener = urllib2.build_opener(proxy)

my_ip = opener.open('http://whatthehellismyip.com/?ipraw').read()
print my_ip 
```

谁能告诉我我在这里做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T01:07:48.567

你忘了安装开瓶器。这应该有效：

```
import urllib2

proxy  = urllib2.ProxyHandler({'https': 'IP:PORT'})
opener = urllib2.build_opener(proxy)
urllib2.install_opener(opener)

my_ip = urllib2.urlopen('http://whatthehellismyip.com/?ipraw').read()
print my_ip 
```

# android - Android - 应用程序徽标活动

> ID：11130190
> 
> 赞同：4
> 
> 时间：2012-06-21T00:51:05.363
> 
> 标签：android, android-intent, android-activity

我有一个似乎很简单的问题，但对于我的生活来说，我无法弄清楚......

我有一个显示公司徽标的主要活动，本质上是一个启动屏幕。我希望它显示 2 秒左右并淡出到实际的应用程序主要活动。我尝试使用睡眠来实现，但是这样做会给我一个用于徽标活动的空白屏幕。似乎直到睡眠完成后才加载图像。所以基本上应用程序启动，显示黑屏 2 秒，然后转换到我的应用程序。如果我点击返回，我会看到徽标。我在这里做错了什么？这是我的标志代码。logo.xml 有一个带有可绘制资源的 ImageView：

```
public class Logo extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.logo);

        // Intent to jump to the next activity
        Intent intent= new Intent(this, NextActivity.class);
        this.startActivity(intent);

        SystemClock.sleep(2000);
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T00:57:47.920

您正在阻塞 UI 线程，这是一个很大的禁忌。`onCreate`在您的方法返回之前，系统无法绘制屏幕。做你想做的事的一种常见方法是启动一个单独的线程等待，然后将 Runnable 发布到 UI 线程：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.logo);
    final Handler handler = new Handler();
    final Runnable doNextActivity = new Runnable() {
        @Override
        public void run() {
            // Intent to jump to the next activity
            Intent intent= new Intent(this, NextActivity.class);
            startActivity(intent);
            finish(); // so the splash activity goes away
        }
    };

    new Thread() {
        @Override
        public void run() {
            SystemClock.sleep(2000);
            handler.post(doNextActivity);
        }
    }.start();
} 
```

一种更简单的方法（正如 Athmos 在他的回答中建议的那样）是让处理程序为您进行倒计时：

```
Handler mHandler;
Runnable mNextActivityCallback;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.logo);
    mHandler = new Handler();
    mNextActivityCallback = new Runnable() {
        @Override
        public void run() {
            // Intent to jump to the next activity
            Intent intent= new Intent(this, NextActivity.class);
            startActivity(intent);
            finish(); // so the splash activity goes away
        }
    };
    mHandler.postDelayed(mNextActivityCallback, 2000L);
} 
```

这样做的好处是您可以取消继续进行下一个活动（例如，如果用户按下后退按钮，或者您在这 2 秒内检测到错误情况或其他情况）：

```
@Override
protected void onPause() {
    if (isFinishing()) {
        mHandler.removeCallbacks(mNextActivityCallback);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T00:58:03.897

不要在构造函数中使用 sleep ，这会将视图的构建延迟 2 秒，这就是为什么它只在 2 秒后显示图片，请尝试遵循此处的建议

[http://androidforums.com/40306-post4.html](http://androidforums.com/40306-post4.html) 另外对于后退按钮问题添加

```
android:noHistory="true" 
```

到 Logo Activity 的清单

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T01:06:51.360

## 使用 onResume() 和 Handler，简单干净的方式

你试过把这个...

```
// Intent to jump to the next activity
Intent intent= new Intent(this, NextActivity.class);
SystemClock.sleep(2000); //NOTE before the start of the next activity
this.startActivity(intent); 
```

...在 onResume();

据我所知，并不是在调用 onCreate() 时正确显示 Activity 的想法。但是 onResume() 总是被调用，据我所知，到那时应该显示一切。如果您只想展示一次，请为它制作旗帜。请参阅：[活动生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)

但无论如何，你做错了什么；）为此使用处理程序、线程或类似的

其他解决方案：

*   为什么不在所有内容前面显示一个 ImageView 并在 2 秒后将其隐藏？您可以只使用 a`Handler`来延迟。或者甚至使用透明度来制作精美的淡出效果。看`ImageView setAlpha(...)`。
*   为什么不使用 a`Handler`而不是`sleep(...)`. 恕我直言`sleep(...)`，可能会导致“应用程序无响应”

这段代码应该适用于工作：

```
Handler mHandler = new Handler();

class MyTask implements Runnable{
    public void run(){
        //start next activity or fadeout ImageView or ...
    }
} 
```

现在调用 onResume：

```
mHandler.postDelayed(new MyTask(), 100); //or any other Runnable 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-07T13:30:49.750

您应该在新线程中使用 sleep ，因为它会停止执行 oncreate 方法，您可以在设置 setcontentview 后使用它

# mysql - 根据今天的日期选择行

> ID：11130192
> 
> 赞同：0
> 
> 时间：2012-06-21T00:51:09.557
> 
> 标签：mysql

只有当它们与今天的日期匹配时，我才尝试从数据库中选择记录。数据库中日期的格式是`2012-06-20 9:30:00`我正在使用语句`SELECT id FROM`newsreports`WHERE DATE(newsdate) = CURDATE()`但它没有返回今天的任何记录？

带有日期的列的屏幕截图

[http://img135.imageshack.us/img135/8399/2347f03df0394cd898c7fc5.png](http://img135.imageshack.us/img135/8399/2347f03df0394cd898c7fc5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T00:59:48.840

```
DATE_FORMAT(NOW(),'%Y-%m-%d') = FORMAT_DATE(NOW(newsdate), '%Y-%m-%d') 
```

或更好：

```
DATE(newsdate) = DATE(NOW()) 
```

**最好的方法是使用2001-09-11**日期格式存储附加列并比较这个

[示例](http://sqlfiddle.com/#!2/98c94/1)，感谢@Conrad Frix

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T00:59:33.007

看起来 curdate 函数将为您提供与您在数据库中获得的日期格式不同的东西。

看看这里的文档

[MySQL 日期和时间函数](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_curdate)

它应该以这种格式返回日期：

```
2008-11-11 
```

因此，您可以搜索 curdate() 和 curdate() + INTERVAL 1 DAY（未经测试）之间的日期范围，或者以 curdate() 格式存储日期。

# regex - 用字符串替换所有打开的标签

> ID：11130197
> 
> 赞同：1
> 
> 时间：2012-06-21T00:51:25.933
> 
> 标签：regex

在有人向我指出这个问题之前，我知道无法使用正则表达式解析 html :) 这不是我想要做的。

我需要的是：

输入：一个包含 html 的字符串。输出：替换所有**开始**标签

```
***<tag> 
```

所以如果我得到

```
<a><b><c></a></b></c>, I want

***<a>***<b>***<c></a></b></c> 
```

作为输出。

我试过类似的东西：

```
(<[~/].+>) 
```

并将其替换为

```
***$1 
```

但似乎并没有按照我想要的方式工作。任何指针？

**澄清**：保证输入中没有自闭标签或注释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T01:01:21.517

您只有两个问题：`^`是从字符类中排除项目的字符，而不是`~`；并且`.+`是贪婪的，所以会在 final 之前匹配尽可能多的字符`>`。将其更改为：

```
(<[^/].+?>) 
```

您也可以删除括号并替换为`$0`or `$&`，具体取决于语言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T00:56:55.227

尝试使用：`(<[^/].*?>)`并将其替换为`***$1`

# javascript - 将变量数据从动作脚本 3 发送到 JavaScript

> ID：11130200
> 
> 赞同：0
> 
> 时间：2012-06-21T00:51:31.243
> 
> 标签：javascript, actionscript-3

由于我的 AS3 和 Php/Java 知识不好，我被困在这个问题上。

我有一个 AS3 函数，它将位图数据发送到 PHP 文件以保存一些图像，在这个函数中我还添加了一些其他参数，并且新参数应该给我一个我需要的字符串值。

```
private function saveImageForFacebook(evt:MouseEvent)

 // Sends the Bitmap data to php    

{
        var bitmapData:BitmapData=new BitmapData(wheelCanvas.width, wheelCanvas.height);
        bitmapData.draw(wheelCanvas); 
        var jpgEncoder:JPGEncoder = new JPGEncoder(80);
        var byteArray:ByteArray = jpgEncoder.encode(bitmapData);
        var header:URLRequestHeader = new URLRequestHeader ("Content-type", "application/octet-stream");
        var jpgURLRequest:URLRequest = new URLRequest ("http://www.someurl.com/flash-test/saveimg.php");
        jpgURLRequest.requestHeaders.push(header);
        jpgURLRequest.method = URLRequestMethod.POST;
        jpgURLRequest.data = byteArray;
        navigateToURL(jpgURLRequest, "_blank");

 // Creates the string value that I need to use in saveimg.php

        var suffixUrl:String = "";
        for(var i:int=0; i < customizedColorArr.length; i++)
        {
             if(customizedColorArr[i] != "")
             {
                 suffixUrl += "&" + customizedPartValueArr[i] + "=" + customizedColorArr[i];
             }
        }
        suffixUrl = wheelName + "&variant_name=" + variantName + suffixUrl;
        trace(suffixUrl);

    } 
```

不知何故，我需要在我的 saveimg.php 文件中跟踪“suffixUrl”值，但我不知道如何。

这就是我的 php 文件的外观以及 suffixUrl 需要去哪里。

```
 <?php
    if ( isset ( $GLOBALS["HTTP_RAW_POST_DATA"] )) {
    $uniqueStamp = date(U);
    //$filename = "temp_image.jpg";
    $filename = $uniqueStamp . ".jpg";
    $fp = fopen( $filename,"wb");
    $result = fwrite( $fp, $GLOBALS[ 'HTTP_RAW_POST_DATA' ] );
    fclose( $fp );

    }
    ?>
    <meta property="og:image" content="http://www.someurl.com/flash-test/src_server/<?php echo $filename ; ?>" /> 
 <SCRIPT LANGUAGE="JavaScript">
     function redirect () {
     window.location.href = "http://www.facebook.com/sharer.php?u=http://www.someurl/flash-test/Main3D.html?"+suffixUrl, '_self';
}
 </SCRIPT>
   <BODY onload="redirect()"> 
```

您将在我的 javascript 函数中看到“suffixUrl”。这就是我试图追踪这个价值的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T01:19:15.487

假设您的“php 文件”是嵌入 Flash 的文件，您可以使用 ExternalInterface`redirect`从 Flash 调用您的函数。

闪光 ：

```
ExternalInterface.call("redirect", suffixUrl); 
```

注意：您需要导入`flash.external.ExternalInterface;`

JavaScript：

```
function redirect (suffixUrl) {
     window.location.href = "http://www.facebook.com/sharer.php?u=http://www.someurl/flash-test/Main3D.html?" + suffixUrl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:01:23.707

您不想向**Javascript**发送变量；你想向**PHP**发送一个变量。

将后缀生成代码块移到Bitmap发送部分的上方，然后改变这一行。

```
var jpgURLRequest:URLRequest = new URLRequest ("http://www.someurl.com/flash-test/saveimg.php?suffixUrl=" + suffixUrl); 
```

然后，在**PHP**

```
window.location.href = "http://www.facebook.com/sharer.php?u=http://www.someurl/flash-test/Main3D.html?" + <?php echo $_GET['suffixUrl'] ?>, '_self'; 
```

这将起作用，但您还必须**清理**输入以**确保安全**。

# svn - jenkins/svn 外部问题 - 身份验证错误

> ID：11130201
> 
> 赞同：3
> 
> 时间：2012-06-21T00:51:34.600
> 
> 标签：svn, jenkins

我正在设置一个新的 jenkins 服务器并且遇到了问题。同步我的 svn 存储库时，我在外部得到这个错误：

```
Caused by: org.tmatesoft.svn.core.SVNCancelException: svn: E200015: No
credential to try. Authentication failed
       at org.tmatesoft.svn.core.internal.wc.SVNErrorManager.cancel(SVNErrorManager.java:37)
       at org.tmatesoft.svn.core.internal.wc.SVNErrorManager.cancel(SVNErrorManager.java:32)
       at org.tmatesoft.svn.core.internal.wc.DefaultSVNAuthenticationManager.getFirstAuthentication(DefaultSVNAuthenticationManager.java:185)
       at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection._request(HTTPConnection.java:598)
       at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection.request(HTTPConnection.java:298)
       ... 40 more
Caused by: svn: E200015: No credential to try. Authentication failed
       at org.tmatesoft.svn.core.SVNErrorMessage.create(SVNErrorMessage.java:208)
       at org.tmatesoft.svn.core.SVNErrorMessage.create(SVNErrorMessage.java:154)
       at org.tmatesoft.svn.core.SVNErrorMessage.create(SVNErrorMessage.java:97)
       ... 45 more 
```

用于主 repo 的凭据应该在任何地方都可以使用（它们在其他 Jenkins 实例上也可以使用）。

有任何想法吗？

更新凭据的正确程序是什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T19:45:29.180

我想到了。外部在不同的服务器上。显然，jenkins 使用的 svn 客户端不够聪明，无法将凭据应用到不同的服务器。svn 本地客户端/乌龟确实处理这种情况。

我必须在 jenkins 作业中为外部输入第二个 svn url，然后输入升级的凭据。然后凭据被存储在詹金斯服务器上。然后我可以从作业中删除第二个 svn url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T14:57:13.077

另一种方法是编辑存储在 Jenkins 主目录的作业定义中的 subversion.credentials 文件。密码是散列的，但如果您在多个存储库中使用相同的凭据，您可以从另一个条目中复制它，您将全部设置好。

我发现这种技术在 repo 的明显 URL 看起来与 Jenkins 盒子不同的时候很有用，而不是在构建从站中。我能够复制整个凭据条目并根据需要更改 url。

# c# - 如何使用 C# 从文本文件中正确显示 HTML 标签？

> ID：11130215
> 
> 赞同：1
> 
> 时间：2012-06-21T00:53:32.107
> 
> 标签：c#, asp.net, html

所以现在我在 C# 中使用这样的东西：

```
Response.Write(Server.HtmlEncode(line)); 
```

这将从文本文件中抓取一行并在屏幕上显示内容 - 它可以工作。我的目标是让文本文件中的行显示如下（文本文件行中的 HTML 格式）：

```
<a href='http://www.url.com' target='_blank'>Link</a><br><br><!--info--> 
```

不幸的是，由于某种原因，`<`and`>`被转换为 HTML 之前`&lt;`，`&gt;`它会将所有 HTML 代码公开为文本并且根本不起作用。我曾尝试查看 WebBrowser 控件和其他东西，但我不明白我应该做什么。例如，我从一个站点尝试过这个：

```
WebBrowser browser = new WebBrowser();
browser.Navigate("about:blank");
browser.Document.Write(Server.HtmlEncode(line)); 
```

......但它没有工作。我正在寻找一些非常简单的东西，如果可能的话，我可以通过一个清晰的例子来模仿。谢谢！我也会确保选择一个答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T00:59:20.420

除了您将`<`和`>`括号显式编码到`&lt;`它的对应部分之外，我没有看到任何错误。

放下`Server.HtmlEncode()`零件，它应该可以工作。

```
Response.Write(line); 
```

`Server.HtmlEncode()`会将所有内容显式编码为所谓的“实体”，即那些`&lt;`代码。它通常用于保护自己免受用户输入的不应修改站点行为的原始字符串的影响。

# linux - 使用名称启动进程

> ID：11130229
> 
> 赞同：20
> 
> 时间：2012-06-21T00:55:22.773
> 
> 标签：linux, process, kill-process

基本上我想动态启动一些可能创建自己的子进程的进程，我也想随时杀死我刚刚创建的某个进程组。我能想到的一种方法是使用名称启动进程（以区分为一个组），然后使用 pkill 按名称杀死它们。问题是如何使用名称启动进程，以便我可以使用 pkill 按名称杀死它们？我也对其他解决方案持开放态度。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-04-30T01:56:53.480

[如何使用不同的名称启动进程？](https://askubuntu.com/questions/153900/how-can-i-start-a-process-with-a-different-name)

> `bash -c "exec -a <MyProcessName> <Command>"`
> 
> 然后您可以使用以下命令终止该进程：
> 
> `pkill -f MyProcessName`

# sql - NHibernate：按子级（子级...）属性对结果进行排序

> ID：11130230
> 
> 赞同：0
> 
> 时间：2012-06-21T00:55:38.410
> 
> 标签：sql, hibernate, nhibernate

我正在尝试为可能比我意识到的要复杂得多的问题构建通用解决方案。

为简单起见，考虑我有以下界面：

```
PagedResult<T> ToPagedResult<T>(this ICriteria, criteria, string sortName); 
```

sortName 理想情况下是 json 样式的访问路径。例如：Registration.Class.Curriculum.Description，其中 description 是我们想要排序的属性。

在我想对 Class 的属性进行排序的情况下，我已经成功完成了以下操作：

```
ICriteria pageCriteria = criteria.CreateCriteria("Class", "Class").AddOrder(Order.Desc(sortName)); 
```

在这种情况下，sortName 可能等于“Class.Name”。

现在，有没有一种方法可以任意允许对更深的孩子进行排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:36:01.033

```
ICriteria pageCriteria = criteria
    .CreateCriteria("Class", "Class")
    .CreateCriteria("Class.Foo", "Foo")
    .AddOrder(Order.Desc("Foo.Bar")); 
```

# vb.net - 使 ListView FindItemWithText 匹配整个文本

> ID：11130231
> 
> 赞同：3
> 
> 时间：2012-06-21T00:55:47.610
> 
> 标签：vb.net, listview

我有`ListView`两列，在列表视图中输入新项目之前，我想防止输入重复值，所以我发现`ListView.FindItemWithText`可以做到这一点。

但我意识到，如果我先输入`232323`，然后再输入`2323`，这是不同的，但以与第一个条目相同的数字开头，该函数会将该项目作为匹配项返回。

我想知道是否有任何方法可以匹配整个文本（精确文本）以避免上述情况。

这是我的代码：

```
Dim ChkSIM As New ListViewItem
ChkSIM = lvItems.FindItemWithText("2323")
If Not ChkSIM Is Nothing Then
     lblErrorSIM.Text = "Already in list"
End If 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T01:06:41.767

`ListView.FindItemWithText`有一个重载，只能找到完全匹配：

```
Dim ChkSIM As ListViewItem = lvItems.FindItemWithText("2323", True, 0, False) 
```

有关详细信息，请参阅[文档](http://msdn.microsoft.com/en-us/library/x03e4732.aspx)。

# c++ - （词袋）中的分段错误

> ID：11130234
> 
> 赞同：0
> 
> 时间：2012-06-21T00:56:05.773
> 
> 标签：c++, opencv, computer-vision

我正在尝试在 OpenCV 中实现词袋。基本上现在只是为了测试，我只使用了 4 张图像（您将在下面的代码中看到）。一切似乎都很酷，但当我到达

`BOWImgDescriptorExtractor bowide(&extractor, &matcher);`

我的编译成功但是当我运行测试时我得到了`Segmentation Fault`，我认为这可能是插入图像或其他东西的问题..

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T01:26:36.800

从[文档来看，`BOWImgDescriptorExtractor`](http://opencv.willowgarage.com/documentation/cpp/features2d_object_categorization.html#bowimgdescriptorextractor)`extractor`它看起来`matcher`应该保存在[`Ptr`s](http://opencv.willowgarage.com/documentation/cpp/basic_structures.html?highlight=ptr#ptr)中，类似于（未经测试）：

```
Ptr<DescriptorExtractor> extractor(new SurfDescriptorExtractor);
...
Ptr<DescriptorMatcher> matcher(new BruteForceMatcher<L2<float> >);
BOWImgDescriptorExtractor bowide(extractor, matcher); 
```

# c++ - remove_if 字符串匹配集合中的给定字符串

> ID：11130243
> 
> 赞同：2
> 
> 时间：2012-06-21T00:57:27.157
> 
> 标签：c++, string, stl, remove-if

我正在考虑`remove_if`在下面的伪代码中使用字符串向量，如下所示：

```
for(some strings in a given set) {
  remove_if(myvec.begin(), myvec.end(), string_matches_current_string);
} 
```

现在，我知道我可以定义谓词并轻松完成这项工作。但我想知道是否有一个标准模板函数可以用来代替上面的谓词来完成这项工作。我环顾四周，找不到一个。通过示例欣赏任何想法。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T01:05:09.530

我很确定没有标准函数，但您可以使用 C++11 lambda 轻松编写整个表达式：

```
std::remove_if(myvec.begin(), myvec.end(),
              [&compare_me](std::string const& cmp) -> bool
              {
                return compare_me == cmp;
              }); 
```

compare_me 是外部循环设置的“当前”字符串。

请记住，remove_if 返回一个迭代器到最后一个有效元素之后的位置，因此为了获得正确的 myvec，您必须擦除 remove_if 返回的迭代器和 myvec.end() 之间的元素。

对于非 C++11 实现，您必须将 lambda 转换为函数或仿函数。如果你把它变成一个函子，你可以直接传递函子，如果你把它变成一个函数，你必须使用类似 boost::bind 的东西来提供必要的胶水。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T01:15:49.237

`std::remove_if`如果您已经知道要删除的值，为什么还要使用？使用`std::remove`，它会删除提供范围内与给定值匹配的项目：

```
std::vector<std::string>::iterator new_end = my_vec.end();
for(const auto &current_set_string : some_set)
    new_end = std::remove(myvec.begin(), new_end, current_set_string);
my_vec.erase(new_end, my_vec.end()); // effectively remove them from the vector. 
```

请注意，我使用基于范围的 for 循环只是为了缩短它，但如果您不能使用 C++11，则应该使用常规循环。

# php - mySQL 复杂的 SELECT 查询？

> ID：11130249
> 
> 赞同：5
> 
> 时间：2012-06-21T00:57:53.417
> 
> 标签：php, mysql

这是我的表结构：

```
users:

id | email

emails:

id | subject | body

user_emails:

user_id | email_id 
```

这是非常简单的设计。但是，我需要为所有未在 user_emails 中关联的 users.id 选择第一个（最低）emails.id。

为了显示：

```
users:

id | email
1 | email@domain.com
2 | test@lol.com
3 | user@test.com

emails:

id | subject | body
1 | sub1 | body1
2 | sub2 | body2

user_emails:

user_id | email_id
1 | 1
1 | 2
2 | 1 
```

如数据所示：

*   用户 1 已收到电子邮件 1 和 2，因此选择应排除该用户。
*   用户 2 只收到了电子邮件 1，所以它应该选择用户 2 和电子邮件 2。
*   用户 3 没有收到任何电子邮件，所以它应该选择用户 3 和电子邮件 1。

我将在 PHP 中执行此操作，因此如果无法单独使用 mySQL 完成任何逻辑，则应使用 PHP 编写。

提前致谢

**编辑：**我可能应该提到会有数千个用户 ID 和数百个电子邮件 ID。发送所有这些电子邮件的脚本将每天运行一次。因此，这应该尽可能优化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T01:23:52.897

可以试试下面的：

```
SELECT * from users u 
LEFT JOIN users_emails e ON u.id=e.user_id 
LEFT OUTER JOIN emails m on m.id=1 
WHERE e.user_id is NULL 
```

或者，如果电子邮件中的 id 不必为 1，则使用以下查询。

```
SELECT * from users u 
LEFT JOIN users_emails e ON u.id=e.user_id 
LEFT OUTER join emails m on m.id=(SELECT id from emails order by id limit 1)   
WHERE e.user_id is NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T21:43:32.860

我想到了一个更简单的解决方案来解决这一切。我在 users 表中添加了 lastSent 列。

```
// Load all emails into an array. Use the id as the key.
$sql = "SELECT * FROM emails";
$query = mysql_query( $sql );
while( $row = mysql_fetch_assoc( $query ) ) {
    $emails[ $row['id'] ] = $row;
}

// Load all users into an array.
$sql = "SELECT id, email, lastSent FROM users";
$query = mysql_query( $sql );
while( $row = mysql_fetch_assoc( $query ) ) {
    $users = $row;
}

// Loop through each user and send next email from the list based on lastSent value.
foreach ( $users as $user ) {
    $id = $user['lastSent'] + 1;
    $email = $user['email'];
    $subject = $emails[$id]['subject'];
    $body = $emails[$id]['body'];
    $send = mail($email, $subject, $body);
    if ( $send ) {
            // Update lastSent value.
        $sql = "UPDATE users SET lastSent='$id' WHERE id='" . $user['id'] . "'";
        mysql_query( $sql );
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-16T05:45:02.213

试试下面的查询

select t.id, min(t.q_id) from (SELECT u.id, e.id as q_id FROM users u CROSS JOIN emails e) as t where (t.id, t.q_id) not in (select * from user_emails ) 按 t.id 分组

# php - 获取基于 MySQL 和 PHP 的复选框“选中”状态

> ID：11130250
> 
> 赞同：1
> 
> 时间：2012-06-21T00:57:56.050
> 
> 标签：php, mysql

我有一个文章字段，其中包含与每条记录关联的标签。当用户编辑文章时，如何在复选框列表中显示标签，为适用的标签预先选择？

到目前为止我尝试使用的复选框：

```
Tetradic Color<input type="checkbox" <?php if(isset($_POST[articletags_78])) echo 'checked="checked" ' ?>name="articletags[]" value="checkbox" id="articletags_78" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T01:12:39.530

改变这个开始：

```
<p>Tetradic Color<input type="checkbox" <?php if(isset($_POST[articletags_78])) echo 'checked="checked" ' ?>name="articletags[]" value="checkbox" id="articletags_78" /></p> 
```

对此：

```
<p>Tetradic Color<input type="checkbox" <?php if(isset($_POST["articletags_78"])) { echo 'checked="checked" '; } ?>name="articletags[]" value="checkbox" id="articletags_78" /></p> 
```

# workflow - 工作流程和 sagas 之间的区别

> ID：11130253
> 
> 赞同：4
> 
> 时间：2012-06-21T00:58:31.837
> 
> 标签：workflow, workflow-foundation, nservicebus, saga

工作流和 sagas 之间到底有什么区别？各自的优缺点是什么？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T06:32:23.053

在最高级别，工作流往往被建模为以某种顺序调用的一组活动，其中一个活动的完成直接流入下一个活动的开始。

Sagas 倾向于被建模为一个有状态的“对象”，其中对该状态的更改是由离散消息触发的——处理一条消息的完成不会直接流入另一条消息的处理中。

虽然 sagas 和工作流都可以用于对各种类型的流程进行建模，但当涉及到长时间运行的流程以及那些需要高度一致性的流程（例如在协作环境中）时，sagas 往往会大放异彩。

# button - 如何使用我自己的自定义按钮并使用 wxpython 进行设计

> ID：11130255
> 
> 赞同：2
> 
> 时间：2012-06-21T00:58:56.723
> 
> 标签：button, wxpython, setbackground

就 GUI 而言，我一直在寻找 wxpython 的一些灵感。演示中的所有内容看起来都很无聊且没有灵感，所以我想朝着自己的方向前进，但我不知道如何使用我在 Photoshop 中制作的自己的按钮或我自己的背景图像。

我对 GUI 编程有点陌生，所以我问你是否可以清楚我应该采取哪些步骤。初始化框架后...如何加载自定义按钮或设置面板背景？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T14:06:21.720

正如 acattle 指出的那样，我已经写过如何更改面板的[背景](http://www.blog.pythonlibrary.org/2010/03/18/wxpython-putting-a-background-image-on-a-panel/)。你应该注意到 wxPython 不是一个主题化的 GUI 工具包。它尽可能地使用操作系统的原生小部件，而且大多数时候，这些小部件并不是很适合主题化。如果您需要，那么您应该查看 Tkinter（尤其是 ttk）或 pyside/pyQt。

如果您需要位图按钮，有几个选项：

*   位图按钮
*   渐变按钮
*   水键
*   板钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:00:00.033

我做了一些谷歌搜索，发现[了这个设置面板背景的教程](http://www.blog.pythonlibrary.org/2010/03/18/wxpython-putting-a-background-image-on-a-panel/)。

多用谷歌搜索，我发现[这篇文章](http://www.daniweb.com/software-development/python/code/216743/wxpython-bitmap-button)谈论 wxPython 的[位图按钮类](http://wxpython.org/docs/api/wx.BitmapButton-class.html)并展示了一些代码示例。

如果您要使用自定义图像，我建议您非常小心地设计您的 GUI。您需要特别注意您的间距和文本大小，否则您的 GUI 可能看起来像废话。

# python - 使用 psycopg2 从 csv 文件动态创建表

> ID：11130261
> 
> 赞同：3
> 
> 时间：2012-06-21T00:59:58.860
> 
> 标签：python, postgresql, psycopg2

我想对我很确定对我来说很清楚的问题有所了解。有没有办法使用 psycopg2 或任何其他 python Postgres 数据库适配器创建表，其名称对应于 .csv 文件并且（可能是最重要的）具有 .csv 文件中指定的列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T01:55:18.890

我会让你好好看看 psycopg2 库——这不是我的想法（暂时不必使用它，但 IIRC 的文档很充足）。

步骤是：

*   从 CSV 文件中读取列名
*   创建“创建表”（...）
*   也许插入数据

    导入 os.path my_csv_file = '/home/somewhere/file.csv' table_name = os.path.splitext(os.path.split(my_csv_file)[1])[0] cols = next(csv.reader(open(my_csv_file )))

你可以从那里去...

创建 SQL 查询（可能对字段使用模板引擎，然后在需要时发出插入）

# java - 如何在javacv中提取轮廓的宽度和高度？

> ID：11130262
> 
> 赞同：5
> 
> 时间：2012-06-21T01:00:08.160
> 
> 标签：java, opencv, contour, javacv

我正在使用 javacv 包（Opencv）开发组件识别项目。我使用一种方法将图像上的一组矩形返回为“CvSeq”我需要知道的是如何做以下事情

*   如何从方法输出（来自 CvSeq）中获取每个矩形？
*   如何访问矩形的长度和宽度？

这是返回矩形的方法

```
public static CvSeq findSquares( final IplImage src,  CvMemStorage storage)
{

CvSeq squares = new CvContour();
squares = cvCreateSeq(0, sizeof(CvContour.class), sizeof(CvSeq.class), storage);

IplImage pyr = null, timg = null, gray = null, tgray;
timg = cvCloneImage(src);

CvSize sz = cvSize(src.width() & -2, src.height() & -2);
tgray = cvCreateImage(sz, src.depth(), 1);
gray = cvCreateImage(sz, src.depth(), 1);
pyr = cvCreateImage(cvSize(sz.width()/2, sz.height()/2), src.depth(), src.nChannels());

// down-scale and upscale the image to filter out the noise
cvPyrDown(timg, pyr, CV_GAUSSIAN_5x5);
cvPyrUp(pyr, timg, CV_GAUSSIAN_5x5);
cvSaveImage("ha.jpg",   timg);
CvSeq contours = new CvContour();
// request closing of the application when the image window is closed
// show image on window
// find squares in every color plane of the image
for( int c = 0; c < 3; c++ )
{
    IplImage channels[] = {cvCreateImage(sz, 8, 1), cvCreateImage(sz, 8, 1), cvCreateImage(sz, 8, 1)};
    channels[c] = cvCreateImage(sz, 8, 1);
    if(src.nChannels() > 1){
        cvSplit(timg, channels[0], channels[1], channels[2], null);
    }else{
        tgray = cvCloneImage(timg);
    }
    tgray = channels[c]; // try several threshold levels
    for( int l = 0; l < N; l++ )
    {
    //             hack: use Canny instead of zero threshold level.
    //             Canny helps to catch squares with gradient shading
                   if( l == 0 )
                {
    //                apply Canny. Take the upper threshold from slider
    //                and set the lower to 0 (which forces edges merging)
                      cvCanny(tgray, gray, 0, thresh, 5);
   //                 dilate canny output to remove potential
   //                // holes between edge segments
                      cvDilate(gray, gray, null, 1);
                 }
                 else
                 {
    //                apply threshold if l!=0:
                      cvThreshold(tgray, gray, (l+1)*255/N, 255, CV_THRESH_BINARY);
                 }
    //            find contours and store them all as a list
                cvFindContours(gray, storage, contours, sizeof(CvContour.class), CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE);

                CvSeq approx;

  //            test each contour
                while (contours != null && !contours.isNull()) {
                       if (contours.elem_size() > 0) {
                            approx = cvApproxPoly(contours, Loader.sizeof(CvContour.class),storage, CV_POLY_APPROX_DP, cvContourPerimeter(contours)*0.02, 0);
                    if( approx.total() == 4
                            &&
                            Math.abs(cvContourArea(approx, CV_WHOLE_SEQ, 0)) > 1000 &&
                        cvCheckContourConvexity(approx) != 0
                        ){
                        double maxCosine = 0;
                        //
                        for( int j = 2; j < 5; j++ )
                        {
           //         find the maximum cosine of the angle between joint edges
                      double cosine = Math.abs(angle(new CvPoint(cvGetSeqElem(approx, j%4)), new CvPoint(cvGetSeqElem(approx, j-2)), new CvPoint(cvGetSeqElem(approx, j-1))));
                       maxCosine = Math.max(maxCosine, cosine);
                         }
                         if( maxCosine < 0.2 ){
                             cvSeqPush(squares, approx);
                         }
                    }
                }
                contours = contours.h_next();
            }
        contours = new CvContour();
    }
}
return squares;
} 
```

这是我使用的示例原始图像

![在此处输入图像描述](../Images/6d9532c26c34655303b7d21c87d778fa.png)

这是我在匹配的矩形周围画线后得到的图像

![在此处输入图像描述](../Images/4ce99c9c54196b5ee292b0a546ffa452.png)

实际上，在上面的图像中，我想删除那些大矩形，只需要识别其他矩形，所以我需要一些代码示例来了解如何归档上述目标。请善待与我分享您的经验。谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T06:44:41.220

OpenCV 在黑色背景中找到白色物体的轮廓。在您的情况下，它是相反的，物体是黑色的。这样一来，即使是图像边框也是一个对象。所以为避免这种情况，只需反转图像，使背景为黑色。

下面我演示了它（使用 OpenCV-Python）：

```
import numpy as np
import cv2

im = cv2.imread('sofsqr.png')
img = cv2.cvtColor(im,cv2.COLOR_BGR2GRAY)

ret,thresh = cv2.threshold(img,127,255,1) 
```

请记住，我没有使用单独的函数进行反转，而是在阈值中使用了它。只需将阈值类型转换为 BINARY_INV（即“1”）。

现在您有如下图像：

![在此处输入图像描述](../Images/5d1ab2fba6f64d1f7d42132dbd0ed3d6.png)

现在我们找到轮廓。然后对于每个轮廓，我们对其进行近似，并通过查看近似轮廓的长度来检查它是否为矩形，对于一个矩形，该长度应该是四个。

如果绘制，你会得到这样的：

![在此处输入图像描述](../Images/bbbfa077b41fc8c70d68b1f3c0f5e294.png)

同时，我们还找到了每个轮廓的边界矩形。边界矩形具有如下形状：[初始点 x，初始点 y，矩形宽度，矩形高度]

所以你得到宽度和高度。

下面是代码：

```
contours,hierarchy = cv2.findContours(thresh,cv2.RETR_LIST,cv2.CHAIN_APPROX_SIMPLE)

for cnt in contours:
    approx = cv2.approxPolyDP(cnt,cv2.arcLength(cnt,True)*0.02,True)
    if len(approx)==4:
        cv2.drawContours(im,[approx],0,(0,0,255),2)
        x,y,w,h = cv2.boundingRect(cnt) 
```

**编辑 ：**

经过一些评论，我明白，这个问题的真正目的是避免大矩形并只选择较小的矩形。

可以使用我们获得的边界矩形值来完成。即，仅选择那些长度小于阈值、宽度或面积的矩形。例如，在这张图片中，我取的面积应该小于 10000。（粗略估计）。如果小于 10000，则应该选择它，我们用红色表示它，否则，错误的候选者，用蓝色表示（仅用于可视化）。

```
for cnt in contours:
    approx = cv2.approxPolyDP(cnt,cv2.arcLength(cnt,True)*0.02,True)
    if len(approx)==4:
        x,y,w,h = cv2.boundingRect(approx)
        if w*h < 10000:
            cv2.drawContours(im,[approx],0,(0,0,255),-1)
        else:
            cv2.drawContours(im,[approx],0,(255,0,0),-1) 
```

下面是我得到的输出：

![在此处输入图像描述](../Images/a7d1d340641df7b78fea7a18594d4d4d.png)

**如何获得该阈值？：**

这完全取决于您和您的应用程序。或者你可以通过试错法找到它。（我这样做了）。

希望能解决您的问题。所有函数都是标准的 opencv 函数。所以我认为转换为 JavaCV 不会有任何问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T07:29:36.110

刚刚注意到问题中提供的代码中有一个错误：

```
IplImage channels[] = {cvCreateImage(sz, 8, 1), cvCreateImage(sz, 8, 1), cvCreateImage(sz, 8, 1)};
channels[c] = cvCreateImage(sz, 8, 1);
if(src.nChannels() > 1){
    cvSplit(timg, channels[0], channels[1], channels[2], null);
}else{
    tgray = cvCloneImage(timg);
}
tgray = channels[c]; 
```

这意味着如果只有一个通道，tgray 将是一个空图像。它应该是：

```
IplImage channels[] = {cvCreateImage(sz, 8, 1), cvCreateImage(sz, 8, 1), cvCreateImage(sz, 8, 1)};
channels[c] = cvCreateImage(sz, 8, 1);
if(src.nChannels() > 1){
    cvSplit(timg, channels[0], channels[1], channels[2], null);
    tgray = channels[c];
}else{
    tgray = cvCloneImage(timg);
} 
```

# mysql - 等价于连接查询 WHERE 中的 Max()

> ID：11130263
> 
> 赞同：0
> 
> 时间：2012-06-21T01:00:19.037
> 
> 标签：mysql, max

我希望能够写出`ORDER BY revision_id DESC LIMIT 1`类似于`Having Max(revision_id)`，尽管这不像我想把它放在`WHERE`子句附近那样。放入`Max(revision_id)`选择，返回修订 ID 的最大值，但其余字段不应该与它一起使用（它是连接中的一个）。

询问：

```
SELECT * FROM field_data_field_city
LEFT JOIN profile on(field_data_field_city.entity_id = profile.pid)
LEFT JOIN users on(profile.uid = users.uid)
WHERE users.uid = 1 
ORDER BY revision_id DESC
LIMIT 1` 
```

想要摆脱限制，以便我可以一次为多个用户执行此操作

我试过了

```
GROUP BY users.uid
ORDER BY revision_id DESC 
```

但我得到最低的`revision_id`，我想要最高的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T03:29:08.580

你可以试试下面：

```
WHERE revision_id=(SELECT MAX(revision_id) FROM table) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:45:08.350

假设字段 revision_id 在您的表配置文件中，您可以使用：

```
SELECT *
FROM field_data_field_city
LEFT JOIN profile ON field_data_field_city.entity_id = profile.pid
LEFT JOIN users ON profile.uid = users.uid
WHERE profile.revision_id IN (
    SELECT MAX(p.revision_id)
    FROM profile p
    GROUP BY p.uid) T; 
```

# ruby-on-rails - ElasticSearch geo_bounding_box 坐标格式

> ID：11130266
> 
> 赞同：1
> 
> 时间：2012-06-21T01:01:14.023
> 
> 标签：ruby-on-rails, elasticsearch, tire

我在网上按照 ElasticSearch 指南将坐标表示为“lat，lng”，但它似乎不起作用，直到我将所有内容都翻转为“lng，lat”。我什至必须翻转 top_left 和 bottom_right 才能使查询正常工作。

有没有人遇到同样的问题？显然这不是文档所说的使用它的方式，但只有当我以这种方式格式化时它才有效。

导轨格式

```
def self.search(params)
      tire.search( page: params[:page], per_page: 2 ) do
           query { all }
           filter :geo_bounding_box, location: { top_left: " -121.88596979687497, 37.33588487375733", bottom_right: " -122.43528620312497, 37.553946238118264" }
      end
end 
```

卷曲格式

```
curl -X GET "http://localhost:9200/articles/article/_search?page=&per_page=2&size=2&pretty=true" -d '{"query":{"match_all":{}},"facets":{"condition":{"terms":{"field":"condition","size":10,"all_terms":false}}},"filter":{"geo_bounding_box":{"location":{"top_left":" -121.88596979687497, 37.33588487375733","bottom_right":" -122.43528620312497, 37.553946238118264"}}},"size":2}' 
```

控制台响应

```
{
  "took" : 1,
  "timed_out" : false,
  "_shards" : {
    "total" : 5,
    "successful" : 5,
    "failed" : 0
  },
  "hits" : {
    "total" : 169,
    "max_score" : 1.0,
    "hits" : [ {
      "_index" : "articles",
      "_type" : "article",
      "_id" : "4f72bc7d0bdb820f02000002",
      "_score" : 1.0, "_source" : {"content":"words here!","location":[37.444995,-122.160628],"name":"harro"}
    }, {
      "_index" : "articles",
      "_type" : "article",
      "_id" : "4fdf0cf20bdb82336c000002",
      "_score" : 1.0, "_source" : {"content":"Run of the mill","location":[37.33588487375733,-121.88596979687497],"name":"Billy Bob"}
    } ]
  },
  "facets" : {
    "condition" : {
      "_type" : "terms",
      "missing" : 5597,
      "total" : 0,
      "other" : 0,
      "terms" : [ ]
    }
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T01:46:35.083

当地理点指定为字符串时，它应该是`"lat,lon"`格式。当它被指定为一个数组时，它应该是`[lon, lat]`格式的。

# mysql - 在 MySQL 中使用 HAVING

> ID：11130274
> 
> 赞同：5
> 
> 时间：2012-06-21T01:01:43.070
> 
> 标签：mysql, sql

我有一个表，我需要从中选择所有名字不是唯一的人，并且只有在具有相似名字的人中都具有不同的姓氏时才应该选择该集合。

例子：

```
FirstN    LastN
Bill      Clinton
Bill      Cosby
Bill      Maher
Elvis     Presley
Elvis     Presley
Largo     Winch 
```

我想获得

```
FirstN    LastN
Bill      Clinton 
```

或者

```
FirstN    LastN
Bill      Clinton
Bill      Cosby
Bill      Maher 
```

我试过了，但它没有返回我想要的。

```
SELECT * FROM Ids
GROUP BY FirstN, LastN
HAVING (COUNT(FirstN)>1 AND COUNT(LastN)=1)) 
```

[在 Aleandre P. Lavasseur 发表评论后编辑了我的帖子]

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T01:15:43.333

```
WITH duplicates AS (
  SELECT firstn --, COUNT(*), COUNT(DISTINCT lastn)
    FROM ids
    GROUP BY firstn
    HAVING COUNT(*) = COUNT(DISTINCT lastn)
       AND COUNT(*) > 1
)
SELECT a.firstn, a.lastn
  FROM ids a INNER JOIN duplicates b ON (a.firstn = b.firstn)
  ORDER BY a.firstn, a.lastn 
```

如果mysql不支持WITH，则内部查询：

```
SELECT a.firstn, a.lastn
  FROM ids a
      ,(SELECT firstn --, COUNT(*), COUNT(DISTINCT lastn)
          FROM ids
          GROUP BY firstn
          HAVING COUNT(*) = COUNT(DISTINCT lastn)
             AND COUNT(*) > 1
        ) b
  WHERE a.firstn = b.firstn
  ORDER BY a.firstn, a.lastn 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T01:25:05.330

你能试试这个：

```
SELECT A.FirstN, B.LastN
FROM (
SELECT FirstN
FROM Ids
GROUP BY FirstN
HAVING (COUNT(FirstN)>1)
) AS A
INNER JOIN Ids B ON (A.FirstN = B.FirstN)
GROUP BY A.FirstN, B.LastN
HAVING COUNT(B.LastN)=1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T01:48:11.223

你可能可以这样做...

```
SELECT FirstN + LastN as FullName, COUNT(*)
FROM Ids
GROUP BY FirstN + LastN
HAVING COUNT(*) > 1 
```

一定要检查空值，因为这会使连接无效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T03:12:40.587

与答案 2 类似，但只在名称重复的地方先注册（您说要获得的第一个结果）

```
select T.FirstN, T.LastN from  (
      select FirstN, LastN  from Ids
    group by FirstN, LastN
      having count(1) = 1) T
group by FirstN
having count(1) > 1; 
```

# ruby-on-rails - Cucumber：创建一个比较两个类别的步骤定义

> ID：11130280
> 
> 赞同：0
> 
> 时间：2012-06-21T01:02:29.033
> 
> 标签：ruby-on-rails, testing, ruby-on-rails-3.1, cucumber

我的黄瓜功能之一称为

`Then the director of "Alien" should be "Ridley Scott"`

我创建了我的步骤定义如下

```
Then /^the director of "([^"]*)" should be "([^"]*)"$/ do |arg1, arg2|
  Movie.find_by_title(arg1) == Movie.find_by_director(arg2)
end 
```

它通过了测试，但我不相信它是真正正确的。关于实现适当功能的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T01:29:45.670

怎么样

```
Movie.find_by_title(arg1).director == arg2 
```

# maven - intellij/maven (/checkstyle)

> ID：11130283
> 
> 赞同：1
> 
> 时间：2012-06-21T01:03:05.973
> 
> 标签：maven, intellij-idea

坐在 intellij 社区版 11 中，我想使用 maven 运行它的选项来运行 checkstyle。事实上，我很乐意只运行模块的 maven 构建并得到任何 checkstyle（或 PMD（或其他））错误。我没有看到如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:23:22.343

您可以按照[本文档](http://www.jetbrains.com/idea/webhelp/creating-maven-run-debug-configuration.html)中的步骤，为 Maven 目标创建新配置并指定`checkstyle:checkstyle`. 然后可以从运行菜单运行。

可能还有其他（更好的）方法，但这是基于我对 IDEA 的有限（第一次）经验。

# java - JasperException 上的重定向页面

> ID：11130286
> 
> 赞同：2
> 
> 时间：2012-06-21T01:03:40.593
> 
> 标签：java, jsp, exception, servlets, redirect

**主.jsp**

```
String name = session.getAttribute("name").toString();
if (name == "" || name == null) {

    response.sendRedirect("index.jsp");

} 
```

当用户通过登录访问该页面时，主页面没有问题。但是当用户想尝试在没有登录的情况下访问页面时，我想将页面重定向到 index.jsp，但是

```
org.apache.jasper.JasperException: An exception occurred processing JSP page /main.jsp 
```

如何重定向到 index.jsp

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T01:12:54.197

**改变**

```
String name = session.getAttribute("name").toString(); 
```

**至**

```
String name = (String)session.getAttribute("name"); 
```

# git - git merge origin/master 做什么？

> ID：11130292
> 
> 赞同：28
> 
> 时间：2012-06-21T01:04:18.717
> 
> 标签：git, git-merge

从远程使用获取后`git fetch`，我们需要使用类似的东西

```
git merge origin/master 
```

我想知道这个命令是否也`git commit`同时执行？顺序`origin/master`重要吗？我可以写`master/original`吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-21T01:25:42.207

`git merge origin/master`可以做两件事之一（或错误）。

在第一种情况下，它创建一个具有两个父级的新提交： current`HEAD`和 ref 指向的提交`origin/master`（除非你在做一些有趣的事情，这很可能是（本地指针）命名的`master`分支一个名为 的遥控器`origin`，尽管这完全是传统的）。

在第二种情况下，不需要树级合并，而不是创建一个新的提交，它更新当前签出的 ref 以指向与 . 所指向的相同的提交`origin/master`。（这称为*快进*合并——当您通过命令行标志合并时，git 可以被定向到总是或从不这样做）。

它不直接调用，这是一个针对用户`git commit`的更高级别（ git-parlance 中的*瓷器）命令。*

调用`git merge master/original`将尝试解决`master/original`提交，这几乎可以肯定（同样，除非你已经做了一些深思熟虑的事情）**与**`origin/master`. 如果你碰巧有一个名为 的远程分支，它`master`有一个名为 的分支`original`，它将创建一个新的提交，并将其作为第二个父级。

您可能会发现`git help rev-parse`有助于破译 git 如何尝试将 ref 名称或其他符号解析为提交。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-21T01:08:59.037

这样做是将称为 origin/master 的分支合并到您当前的分支中。顺序**非常**重要。*origin*这个词是指你克隆你的仓库的地方，即仓库的起源，*master*这个词只是一个分支名称，但是master通常用作主分支，或者其他一些系统称之为*主干*分支.

根据您的开发状态，合并可能需要进行提交。如果你的历史没有偏离原点，它可以做所谓的*快进*——所有需要做的就是把新的历史放在你的上面。如果您的开发与原点不同，那么如果可以在没有冲突的情况下完成合并，则合并完成并在 HEAD 记录新的提交以指定合并和两个父级。

此外，如果由于冲突而无法完成合并，则会更新您的工作副本以反映存在冲突的事实，然后当您修复它们时，您手动进行记录合并的提交。

# ruby - 不能用 pry 发布要点

> ID：11130293
> 
> 赞同：1
> 
> 时间：2012-06-21T01:04:32.513
> 
> 标签：ruby, ubuntu, pry

`pry`在介绍性截屏视频[http://pry.github.com/](http://pry.github.com/)的第4 分钟，Josh Cheek 说要运行`gist -m #String.each_line`（实际上他说的是其他内容，但这是今年的命令版本）。当我这样做时，我得到：

```
OpenSSL::SSL::SSLError: SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed from /usr/lib/ruby/1.8/net/http.rb:586:in `connect' 
```

我做错了什么或者我还需要做什么？

我在用着

```
[40] pry(main)> pry-version
Pry version: 0.9.9.6 on Ruby 1.8.7. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T06:41:39.807

This is not directly a pry problem but a problem in the `gist` gem, see here, for more information: [https://github.com/defunkt/gist/issues/98](https://github.com/defunkt/gist/issues/98)

# asp.net - 在网站项目中使用 SignalR

> ID：11130296
> 
> 赞同：4
> 
> 时间：2012-06-21T01:04:55.907
> 
> 标签：asp.net, signalr

我正在尝试一个非常简单的 SignalR 演示，但在我的 javascript 中的以下行中出现臭名昭著的“未定义”错误：

```
var myHub = $.connection.myHub; 
```

MyHub.cs 如下：

```
public class MyHub : Hub
{
    ...
} 
```

到目前为止，我看到的大多数示例都是 MVC 或 Web 应用程序项目。有了这些，MyHub.cs 将被放置在 App_Code 文件夹中。但是，我们的项目是一个网站项目，我们无法将其更改为 Web 应用程序。

我该怎么做才能让它发挥作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T17:00:54.250

原来我在 web.config 中遗漏了以下内容：

```
<modules runAllManagedModulesForAllRequests="true"> 
```

是的，您绝对可以在网站项目中使用 SignalR。

# javascript - 当用户离开页面时调用 JavaScript 函数

> ID：11130299
> 
> 赞同：0
> 
> 时间：2012-06-21T01:05:31.763
> 
> 标签：javascript

我希望在`pageleave()`用户退出页面之前调用该函数。但我似乎无法让它正常工作，我在网上搜索了几个小时，但找不到解决方案。这是我想出的代码。它在页面加载时运行，而不是在页面卸载时运行。

```
window.onbeforeunload = pageleave;

        function pageleave() {
            $.post("<?php echo dirname( get_bloginfo('stylesheet_url') ); ?>/ajax/videocanle.php", { videoID: "<?php echo $videoID; ?>" },
                function(data) {
                    if ( data != "\nsuccess"){
                        alert ("Sorry but there was an unexpected error, please try again");
                    }

                });

        } 
```

那是当前版本，在页面卸载之前它仍然没有运行该功能。该功能确实有效，我用一个简单的输入按钮对其进行了测试。

```
<input type="button" value="test function" onclick="pageleave()" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T01:07:47.117

您需要分配对函数的引用，而不是调用函数的结果（这就是函数的`()`作用）。删除`()`：

```
window.onunload = pageleave~~()~~;
```

（您可能还想使用`onbeforeunload`事件而不是`onunload`，并返回某种确认消息，以便您的 Ajax 请求有机会完成。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T01:07:56.013

```
window.onunload=pageleave;

        function pageleave() {
            $.post("<?php echo dirname( get_bloginfo('stylesheet_url') ); ?>/ajax/videocanle.php", { videoID: "<?php echo $videoID; ?>" } );    
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T01:11:06.250

您想传递对该函数的引用。在您的示例中，您在赋值语句中调用了该函数。尝试这个：

```
window.onunload = function() {
  $.post("<?php echo dirname( get_bloginfo('stylesheet_url') ); ?>/ajax/videocanle.php", { 
    videoID: "<?php echo $videoID; ?>"
  });    
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-03-02T18:28:50.943

尝试这个：

```
window.onbeforeunload = function()  {
  $.post("<?php echo dirname( get_bloginfo('stylesheet_url') ); ?>/ajax/videocanle.php", { 
    videoID: "<?php echo $videoID; ?>"
  });    
}; 
```

# ruby-on-rails - factory_girl 单例依赖

> ID：11130301
> 
> 赞同：0
> 
> 时间：2012-06-21T01:06:28.550
> 
> 标签：ruby-on-rails, ruby, rspec, factory-bot

我有一个有趣的场景。

我有一个具有**任务状态的****任务**模型：

 **```
class Task < ActiveRecord::Base
 belongs_to :task_status
end

class TaskStatus < ActiveRecord::Base
 has_many :tasks
end 
```

我为这两个模型定义了工厂以进行测试：

```
FactoryGirl.define do
  factory :task do
    title  'sample task'
    task_status { |task| task.association(:actvice_status) }
  end
end

FactoryGirl.define do
  factory :active_status do
    status_value "ACTIVE"
  end
end 
```

创建测试实例时会出现问题：

```
10.times do
  task = FactoryGirl.create(:task)
end 
```

这将创建 10 个任务以及 10 个“活动”任务状态。实际上，我只需要任务可以引用的 1 个任务状态。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T01:14:36.020

最简单的事情：

```
active = create(:active_status)
tasks = []
10.times do
    tasks << create(:task, task_status: active)
end 
```**

# c# - 使用组合框向 datagridview 添加行

> ID：11130309
> 
> 赞同：0
> 
> 时间：2012-06-21T01:07:56.910
> 
> 标签：c#, datagridview, combobox

我有一个`DataGridView`我正在以编程方式添加行的。

共有三列：一`TextBox`列和两`ComboBox`列。因为我知道要添加的文本，所以我将第 1 列和第 3 列记下来。对于第 3 列 ( `ComboBox`)，每一行都有相同的 3 个`ComboBox`项目选项。

这是我遇到问题的第二列，我需要`ComboBox`为每一行设置一组不同的项目。这可能吗？

我将在下面添加我的代码，如果有任何不清楚的地方请告诉我。我正在遍历文件夹列表，将当前名称与数据集值进行比较，如果它们“匹配”，则需要将数据集名称添加到该行的组合框项目中。

```
//Loop through each local folder
string thisLocalFolder = Path.GetFileName(localFoldersArray[j].ToString());

//helpdeskCompanyNameMatchColumn.Items.Clear();
for (int i = 0; i < companyDataSet.Tables[0].Rows.Count; i++)
{
      //Loop through each downloaded company name to compare
      string dataComapanyToCompany = companyDataSet.Tables[0].Rows[i]["Company"].ToString();
      if (dataComapanyToCompany.Contains(thisLocalFolder))
      {
           Console.WriteLine("Match: " + thisLocalFolder + " is close enough to " + dataComapanyToCompany);

           //Add the possible match to the combobox item options, for this row
                                helpdeskCompanyNameMatchColumn.Items.Add(dataComapanyToCompany);
      }
 } 
```

# python - 逐行文件处理，for-loop vs with

> ID：11130312
> 
> 赞同：15
> 
> 时间：2012-06-21T01:08:36.883
> 
> 标签：python, file-io, for-loop, with-statement

我试图了解这些与打开文件以进行逐行处理的方式之间的权衡/差异

```
with open('data.txt') as inf:
    for line in inf:
       #etc 
```

对比

```
for line in open('data.txt'):
   # etc 
```

我了解 using`with`可确保在退出“with-block”（套件？）时关闭文件（或反击异常）。`with`所以自从我在这里了解到它以来，我一直在使用它。

重新`for`循环：通过搜索网络和SO，似乎`for`退出循环时文件是否关闭取决于实现？而且我找不到有关此构造如何处理异常的任何信息。有人知道吗？

如果我对上述任何内容有误，我将不胜感激，否则有理由`for`在 `with`? （假设你有选择，即不受Python版本限制）

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-21T02:32:06.963

这个问题

```
for line in open('data.txt'):
   # etc 
```

是您没有明确引用打开的文件，那么您如何关闭它？懒惰的方法是等待垃圾收集器清理它，但这可能意味着资源没有及时释放。

所以你可以说

```
inf = open('data.txt')
for line in inf:
   # etc
inf.close() 
```

现在如果在 for 循环中出现异常会发生什么？该文件不会被明确关闭。

添加一个`try/finally`

```
inf = open('data.txt')
try:
    for line in inf:
       # etc
finally:
    inf.close() 
```

这是很多代码来做一些非常简单的事情，因此添加了 Python`with`以使这些代码能够以更易读的方式编写。这让我们到了这里

```
with open('data.txt') as inf:
    for line in inf:
       #etc 
```

因此，这是打开文件的首选方式。如果你的 Python 对于 with 语句来说太旧了，你应该使用`try/finally`生产代码的版本

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T01:12:24.980

with 语句仅在 Python 2.5 中引入 - 只有当您对早期版本有向后兼容性要求时，您才应该使用后者。

**更清晰一点**

引入了 with 语句（如您所知）以包含 try/except/finally 系统 - 这不是很好理解，但没关系。在 Python（C 中的 Python）中，它的实现将关闭打开的文件。语言本身的规范并没有说......所以IPython，JPython等......可以选择保持文件打开，内存打开等等，而不是在下一个GC周期之前释放资源（或者根本没有，但是CPython GC 不同于 .NET 或 Java 的...）。

我认为我听到的唯一反对它的是它增加了另一个缩进级别。

所以总结一下：在 2.5 中不起作用，引入了 'as' 关键字并添加了缩进级别。

否则，您可以正常控制异常处理，并且 finally 块会在发生异常时关闭资源。

为我工作！

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2018-04-11T02:46:46.770

```
import os

path = "c:\\fio"
longer_path = "c:\\fio\\"
# Read every file in directory
for filename in os.listdir(path):
    print()
    print("Here is the file name",filename)
    inf = open(longer_path+filename)
    try:
        for line in inf:
            print(line,end='')
    finally:
        inf.close()

#output
Here is the file name a.txt
mouse
apple
Here is the file name New Text Document - Copy.txt
cat
Here is the file name New Text Document.txt
dog 
```

# java - 尝试在 Android 中使用全息主题不起作用

> ID：11130313
> 
> 赞同：14
> 
> 时间：2012-06-21T01:08:38.003
> 
> 标签：java, android, android-layout, android-manifest

我一直在尝试在 Android 中设置一个全息主题，但我无法让它识别它。有任何想法吗？

发布的是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.test.test"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="7" android:targetSdkVersion="15"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" android:theme="@android:style/Theme.Holo">
        <activity
            android:name=".TestActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

`@android:style/Theme.Holo`即使我将 minSdkVersion 更改为 11 ，它也会给我下面的红线。有什么想法吗？

## 更新：

我将行更改`<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="15"/>`为`<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="15"/>`，但仍然遇到相同的错误。

# 更新 2：

这最终是在清单中正确指定了我的目标 api，但在项目属性中没有正确指定。很奇怪，但现在也一样。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-21T01:40:26.590

Eclipse 给你一个错误，因为 SDK 版本 7-10 不知道是什么`Theme.Holo`。您需要为两个平台提供单独的样式，以确保在运行时找到正确的样式。

1.  在您的`res/values/styles.xml`文件中，创建以下样式：

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <resources>
        <style name="Theme.MyTheme" parent="@android:style/Theme.Black" />
    </resources> 
    ```

2.  在您的`res/values-v11/styles.xml`文件中，创建以下样式：

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <resources>
        <style name="Theme.MyTheme" parent="@android:style/Theme.Holo" />
    </resources> 
    ```

3.  在您的`AndroidManifest.xml`文件中，使用以下行作为应用程序的主题：

    ```
    android:theme="@style/Theme.MyTheme" 
    ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T01:33:17.867

您正在尝试使用低于 Android 4.0 的 API 的 Holo 主题，这就是您获得红线的原因：

1.  使用[HoloEverywhere](https://github.com/Prototik/HoloEverywhere)项目
2.  从 ICS 源中为您最想要的 Holo 主题选择必要的资源，并创建您自己的自定义主题/样式 [https://github.com/android/platform_frameworks_base/tree/master/core/res](https://github.com/android/platform_frameworks_base/tree/master/core/res)
3.  您还可以尝试使用 Android Api 7 到 10 的自定义主题和 Api 11 及更高版本的全息主题，请参阅@Alex Lockwood 的回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T16:37:36.423

Holo 主题需要在所有样式文件夹中更新。检查 values 文件夹下的 values-sw600dp、values-sw720dp-land、values-v11 和 values-v14。values-v14 上的主题覆盖了更高 API 上的所有其他主题。

# php - timthumb 缓存图片路径

> ID：11130317
> 
> 赞同：0
> 
> 时间：2012-06-21T01:09:21.000
> 
> 标签：php, caching, thumbnails

我将缓存设置为 TRUE，我的缓存文件夹现在甚至设置为 777。

但是当我查看图像路径时，它仍然显示原始文件名和路径？

它不应该向我显示缓存图像的路径吗？

Timthumb 设置：

```
define ('CACHE_SIZE', 100);             // number of files to store before clearing cache
define ('CACHE_CLEAR', 20);                 // maximum number of files to delete on each cache clear
define ('CACHE_USE', TRUE);                 // use the cache files? (mostly for testing)
define ('VERSION', '1.25');                 // version number (to force a cache refresh)
define ('DIRECTORY_CACHE', '../cache');     // cache directory
define ('MAX_WIDTH', 5000);                 // maximum image width
define ('MAX_HEIGHT', 3000);                // maximum image height
define ('ALLOW_EXTERNAL', FALSE);           // allow external website (override security precaution - not advised!)
define ('MEMORY_LIMIT', '128M');                // set PHP memory limit
define ('MAX_FILE_SIZE', 12582912);         // file size limit to prevent possible DOS attacks (roughly 12 megabytes)
define ('CURL_TIMEOUT', 10);                    // timeout duration. Tweak as you require (lower = better) 
```

我遇到的问题是 url 图像路径是这样的：

```
http://mydomain.com/includes/crop.php?src=images/art/urban/alleyway.jpg&h=250&w=958&q=95 
```

我认为启用缓存会是这样的：

```
http://mydomain.com/cache/a051f7c9e5d039708ac92dece9a07901.jpg 
```

如果我做错了什么，请告诉我。

干杯约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:24:35.423

据我所知，TimThumb 仍将运行 PHP 处理以至少评估是否存在拇指。所以不，它应该在你的 img 上仍然有相同的 src。

# java - 如何在 Eclipse 中更改“已安装项目方面”的 Java 版本？

> ID：11130320
> 
> 赞同：11
> 
> 时间：2012-06-21T01:10:01.977
> 
> 标签：java, eclipse, google-app-engine

我刚刚安装了 Eclipse 3.7 和 Google Plugin for Eclipse，因为我想自学如何使用 Google App Engine。

当我创建一个新的 Web 应用程序并运行时，我收到一个错误，指出我的 JRE 版本 (1.4) 中不允许使用注释。因此，我将 JRE 设置为 1.6，将编译器合规级别设置为 1.6。

但是，我现在得到了这个新错误。

```
Description Resource    Path    Location    Type
Java compiler level does not match the version of the installed Java project facet.
Myprojectname       Unknown Faceted Project Problem (Java Version Mismatch) 
```

如何更改“已安装 Java 项目方面的版本”？

我的项目属性菜单左侧没有名为“Project Facet”的项目。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-21T01:18:46.020

如果您收到该验证消息，您应该能够在项目的属性下找到“Project Facets”。您应该会看到类似这样的屏幕，您可以在其中更改 Java 构面版本：

![在此处输入图像描述](../Images/18a2bfae62abb31727ea56530857fc59.png)

如果您没有看到此页面，那么您创建的项目可能以某种方式损坏。你是如何创建它的？您是否使用了 Google Plugin for Eclipse 提供的向导？如果是这样，您将需要向 Google 提交错误报告，因为他们没有创建有效的项目。

不管上述情况如何，您应该能够通过右键单击问题视图中的问题并选择“快速修复”来解决此问题，您将在此指导您调整 Java 方面和 Java 合规性设置。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-05T09:11:51.730

如果您尚未找到解决方案或其他人面临此问题：

从 1.7 切换到 1.6 时，我遇到了与“项目方面”相同的问题，并且在项目属性中没有“项目方面”页面。我可以通过编辑项目文件夹*.settings中的文件**org.eclipse.wst.common.project.facet.core.xml*来修复它。

 *在这个文件中，我有以下代码，其中 1.7 被 1.6 替换并且错误消失了：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <faceted-project>
    <installed facet="java" version="1.7"/>
    </faceted-project> 
```

编辑：我忘了提到您必须编辑“包资源管理器”上的过滤器以显示 .* 资源：选择“查看菜单”（向下箭头）-> 过滤器... -> 取消选中“.* 资源" -> 单击“确定”，您应该会看到 .settings 文件夹。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-09T21:52:36.060

如果您正在使用`Eclipse IDE for Java EE Developers`，则应该有`Project Facets`属性部分。

您的 Eclipse 3.7 可能是`Eclipse IDE for Java Developers`. 在这种情况下，您需要通过安装 EE 好东西来添加具有构面的能力......

使用帮助 -> 安装新软件... -> 使用：（选择 Indigo）然后关闭“Web、XML、Java EE 和 OSGi 企业开发”并检查`Eclipse Java EE Developer Tools`

允许 Eclipse 重新启动现在应该添加 Project Facets 属性部分的可见性。*

# javascript - Google Map API v3 遮蔽所有东西，除了多边形

> ID：11130323
> 
> 赞同：4
> 
> 时间：2012-06-21T01:10:16.127
> 
> 标签：javascript, google-maps, google-maps-api-3

所以现在我们已经熟悉了使用 v3 API 向 Google 地图添加形状：

```
$j('#map').gmap('addShape', 'Circle', { 
    'strokeWeight': 0, 
    'fillColor': "#008595", 
    'fillOpacity': 0.25, 
    'center': result[0].geometry.location, 
    'radius': 1500, 
    'clickable': false 
}); 
```

上面的代码将创建一个圆圈并用填充#008595 对其进行着色。有没有办法对地图进行反向着色？我希望整个世界都以半透明度着色/填充，除了我的标记所在的洞。可能的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T02:48:43.610

您需要定义一个覆盖整个世界并在其中有一个洞的多边形，您不能使用“圆形”或“矩形”形状来做到这一点，它必须是一个具有（至少）两条路径的多边形。

[这](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_nosidebar.html?lat=37.155939&lng=-79.497071&zoom=6&type=m&filename=http://www.geocodezip.com/geoxml3_test/virginia_inverted_kml.xml)是一个例子

[![截屏](../Images/935aa459713f2f50bec9ef59fd3b7942.png)](https://i.stack.imgur.com/4WM4I.jpg)

相关问题：

*   [更改 Google Maps JavaScript API v3 圆圈外的地图不透明度](https://stackoverflow.com/questions/19736418/change-map-opacity-outside-circle-of-google-maps-javascript-api-v3)
*   [使用 Google 地图突出显示多边形并为地图的其余部分着色](https://stackoverflow.com/questions/2956355/highlight-polygon-and-tint-rest-of-map-using-google-maps)

代码片段：

```
// This example creates circles on the map, representing
// populations in the United States.

// First, create an object containing LatLng and population for each city.
var citymap = {};
citymap['chicago'] = {
  center: new google.maps.LatLng(41.878113, -87.629798),
  population: 2842518
};
citymap['newyork'] = {
  center: new google.maps.LatLng(40.714352, -74.005973),
  population: 8143197
};
citymap['losangeles'] = {
  center: new google.maps.LatLng(34.052234, -118.243684),
  population: 3844829
};
var cityCircle;
var bounds = new google.maps.LatLngBounds();

function drawCircle(point, radius, dir) {
  var d2r = Math.PI / 180; // degrees to radians 
  var r2d = 180 / Math.PI; // radians to degrees 
  var earthsradius = 3963; // 3963 is the radius of the earth in miles
  var points = 32;

  // find the raidus in lat/lon 
  var rlat = (radius / earthsradius) * r2d;
  var rlng = rlat / Math.cos(point.lat() * d2r);

  var extp = new Array();
  if (dir == 1) {
    var start = 0;
    var end = points + 1
  } // one extra here makes sure we connect the ends
  else {
    var start = points + 1;
    var end = 0
  }
  for (var i = start;
    (dir == 1 ? i < end : i > end); i = i + dir) {
    var theta = Math.PI * (i / (points / 2));
    ey = point.lng() + (rlng * Math.cos(theta)); // center a + radius x * cos(theta) 
    ex = point.lat() + (rlat * Math.sin(theta)); // center b + radius y * sin(theta) 
    extp.push(new google.maps.LatLng(ex, ey));
    bounds.extend(extp[extp.length - 1]);
  }
  return extp;
}

function initialize() {
  // Create the map.
  var mapOptions = {
    zoom: 4,
    center: new google.maps.LatLng(37.09024, -95.712891),
    mapTypeId: google.maps.MapTypeId.TERRAIN
  };

  var map = new google.maps.Map(document.getElementById('map-canvas'),
    mapOptions);

  var outerbounds = [
    new google.maps.LatLng(85, 180),
    new google.maps.LatLng(85, 90),
    new google.maps.LatLng(85, 0),
    new google.maps.LatLng(85, -90),
    new google.maps.LatLng(85, -180),
    new google.maps.LatLng(0, -180),
    new google.maps.LatLng(-85, -180),
    new google.maps.LatLng(-85, -90),
    new google.maps.LatLng(-85, 0),
    new google.maps.LatLng(-85, 90),
    new google.maps.LatLng(-85, 180),
    new google.maps.LatLng(0, 180),
    new google.maps.LatLng(85, 180)
  ];
  var populationOptions = {
    strokeColor: '#FF0000',
    strokeOpacity: 0.8,
    strokeWeight: 2,
    fillColor: '#FF0000',
    fillOpacity: 0.35,
    map: map,
    paths: [outerbounds, drawCircle(citymap['newyork'].center, 10, -1)]
  };
  // Add the circle for this city to the map.
  cityCircle = new google.maps.Polygon(populationOptions);
  map.fitBounds(bounds);
}

google.maps.event.addDomListener(window, 'load', initialize);
```

```
html,
body,
#map-canvas {
  height: 100%;
  margin: 0px;
  padding: 0px
}
```

```
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<div id="map-canvas"></div>
```

# powershell - 使用 powershell 运行 mstsc.exe

> ID：11130336
> 
> 赞同：0
> 
> 时间：2012-06-21T01:12:55.957
> 
> 标签：powershell, cmd, command-line-interface, rdp, mstsc

我想要做的似乎很简单，但我无法弄清楚。我正在寻找运行 Powershell 脚本来启动 RDP 会话，将文件复制到 c:\ 目录，然后从命令行运行该文件。我希望它循环，从 csv 文件中获取参数，例如服务器 IP、用户名和密码。所以本质上，步骤如下......

```
 1.import infor from the csv file to define variables 
2.copy specefied file (then loop)
 3.launch mstsc.exe
 4.enter server IP, username, password
 5.paste copied file into the c:\ directory 
6.launch cmd.exe
 7.Run the file that was copied to the c:\ directory 
8.log off server 
```

我想看看是否有人可以帮助我解决这个问题。我是 power shell 的新手，并且已经能够完成很多工作。如果有人能指出我正确的方向，或者甚至提供我填补空白的代码，我将不胜感激。

对于我想要做的更具体的事情是将代理安装到机器上。该过程需要通过 rdp 登录到服务器，从命令行运行静默安装 (msi) 包，仅此而已。我想做的是向我的客户提供一个电子表格，让他填写详细信息，例如服务器地址、用户名和密码。然后转到 csv，运行 powershell，并通过该脚本安装许多代理，本质上是一个自动化过程。希望能更好地解释它。

这是我到目前为止...

视窗....

```
$computers= gc "C:\Users\Desktop\Powershell\DeviceList.txt"
foreach ($computername in $computers) 
{
mstsc
Start-Sleep -s 2 
[System.Windows.Forms.SendKeys]::SendWait("$computername{ENTER}") 
```

那只会启动 mstsc 会话，所以它只是一个难题，我需要做的就是将文件复制到该设备，然后运行 ​​cmd.exe 和一个命令并注销。

对于 UNIX>>>

```
$computers= gc "C:\Users\Desktop\Powershell\DeviceList.txt"
foreach ($computername in $computers) 
{
c:\putty.exe
Start-Sleep -s 2
[System.Windows.Forms.SendKeys]::SendWait("$computername{ENTER}")
} 
```

几乎相同的东西，但我可以直接从 putty 运行命令来完成这项工作，而不必复制文件，因为我可以通过运行一些命令以另一种方式获得它。

对此有任何帮助或想法，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-30T17:42:01.593

来自 Putty 下载页面的 PSSession 和（可能）Plink.exe 的组合应该可以帮助您实现目标。

New-PSSession 和 Enter-PSSession cmdlet 将允许您对 Windows 目标使用远程 PowerShell 会话（假设 WinRM 已启用）。从那里你可以在你的目标上执行 PShell 命令。

```
$session - New-PSSession -computerName [targetName/ip] -Credential (get-credential)
$session | Enter-PSSession
{ Execute Silent install }
Exit-PSSession
$session | Disconnect-PSSession 
```

或者你可以使用 Invoke-Command

```
Invoke-Command -ScriptBlock { install.exe /s } -computerName [target] -credential (Get-Credential) 
```

对于 Linux 机器，您可以利用 PLink.exe 通过 SSH 运行远程脚本。不是我以前尝试过的东西，但它应该可以正常工作。

此链接可能会有所帮助：[http ://the.earth.li/~sgtatham/putty/0.53b/htmldoc/Chapter7.html](http://the.earth.li/~sgtatham/putty/0.53b/htmldoc/Chapter7.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-30T11:56:45.640

mstsc 将 $Computer 作为参数使用 mstsc -v $Computer 添加用户可以通过 cmdkey 完成，您可以保存远程计算机的凭据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T07:49:00.783

我看起来像你选择了错误的方式。PowerShell 具有强大的远程功能，因此如果您的所有客户端都有 Windows 管理（包含在 Vista、7 和 8 中的默认软件包中），您可以尝试以下操作：

```
# Comma separated list:
$listRaw = @"
Computer,User,Password
computer1,"Domain\user1","passw1"
computer2,"Domain\user2","passw2 with spaces"
"@

# Parse CSV list
$list = $listRaw | ConvertFrom-CSV -Delimiter ','

# Iterate targets
foreach ($target in $list) {
    Write-Host "Connecting to $($target.Computer) as $($target.User)"

    # Creating credential from username and password
    $SecurePassword = $target.Password | ConvertTo-SecureString -AsPlainText -Force
    $Credentials = New-Object System.Management.Automation.PSCredential -ArgumentList $target.User, $SecurePassword

    # Creating remote session to that computer
    # Using given credentials
    $session = New-PSSession -ComputerName $target.Computer -Credential $Credentials

    # Invoking actions on that remote session
    Invoke-Command -Session $session -ArgumentList $target.Computer -ScriptBlock {
        Param($computerName)

        # this code executes on remote computer
        "Hello from $computerName"
    }
} 
```

如果它适用于您的环境，请告诉我们。

# c# - 在进行主动身份验证时转换 ADFS 中的传入用户名声明

> ID：11130338
> 
> 赞同：0
> 
> 时间：2012-06-21T01:13:35.650
> 
> 标签：c#, active-directory, adfs2.0, adfs

我正在尝试通过活动联合对 ADFS 服务器进行身份验证，但在尝试对用户进行身份验证之前，需要通过 AD/LDAP 查询转换传入的用户名。

我正在使用带有 UserNameWSTrustBinding 的 UsernameMixed 端点：

```
WSTrustChannelFactory factory = new WSTrustChannelFactory(new UserNameWSTrustBinding(SecurityMode.TransportWithMessageCredential), "https://nobody.com/adfs/services/trust/13/UsernameMixed");          

factory.TrustVersion = TrustVersion.WSTrust13;
factory.Credentials.UserName.UserName = userName;
factory.Credentials.UserName.Password = password;

IWSTrustChannelContract channel = factory.CreateChannel();
RequestSecurityToken rst = new RequestSecurityToken(RequestTypes.Issue, WSTrust13Constants.KeyTypes.Bearer);
SecurityToken token = channel.Issue(rst); 
```

我的问题是，我想在运行身份验证之前将传递给端点的“用户名”转换为 ADFS 服务器上的用户电子邮件地址（通过 AD 或 LDAP）。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:33:44.030

据我所知，AD FS 服务器上没有简单的方法可以在进行身份验证之前转换传入的用户名。在身份验证已经发生后，对传出声明进行转换。

您可能需要在您的依赖方应用程序中查询 AD/LDAP 以获取此信息。做这样的事情（取自[这里](https://stackoverflow.com/questions/1609353/c-sharp-find-all-email-addresses-for-an-active-directory-user)）：

```
string domain = "YourDomain";

List<string> emailAddresses = new List<string>();

PrincipalContext domainContext = new PrincipalContext(ContextType.Domain, domain);
UserPrincipal user = UserPrincipal.FindByIdentity(domainContext, userName);

// Add the "mail" entry
emailAddresses.Add(user.EmailAddress);

// Add the "proxyaddresses" entries.
PropertyCollection properties = ((DirectoryEntry)user.GetUnderlyingObject()).Properties;
foreach (object property in properties["proxyaddresses"])
{
   emailAddresses.Add(property.ToString());
} 
```

# python - 如何设置 PYTHONPATH 和项目布局

> ID：11130339
> 
> 赞同：4
> 
> 时间：2012-06-21T01:14:01.017
> 
> 标签：python, pythonpath

所以我一直在努力[学习 Python](http://learnpythonthehardway.org/book/ex52.html)的最后一个练习，它指出在我运行我一直在研究的程序之前，你必须像这样设置 Pythonpath 环境变量：

```
export PYTHONPATH=$PYTHONPATH:. 
```

我已经这样做了，在它不起作用之后（我假设这就是为什么当我尝试运行我的程序时，我得到一个 ImportError），我对 pythonpath 做了一些研究。它本质上是说 Pythonpath 是在哪里寻找要导入的模块。所以我将 Pythonpath 设置为我要导入的模块的实际位置，但仍然无济于事。

这是我的目录：

```
- User/_myname_/python_stuff/projects/GothonWeb
    - bin/
        - __init__.py
        - app.py
    - gothonweb/
        - __init__.py
        - maps.py
    - templates (web.py)
        - game.html
        - index.html
        - layout.html
    - so forth and so on. 
```

我试图运行 app.py，它试图导入 main.py 模块：

```
from gothonweb import maps 
```

但我仍然收到此错误：

```
Traceback (most recent call last):
File "python_stuff/projects/GothonWeb/bin/app.py", line 2, in <module>
from gothonweb import maps
ImportError: No module named gothonweb 
```

有谁知道怎么回事？哦，还有一些其他的细节。在 Mac Os X Lion 上运行 Python 2.7，如果有帮助的话。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T01:25:29.057

像这样运行应用程序：

```
$ cd ~/path/to/gothonweb/
python bin/app.py 
```

但是，如果您这样做：

```
$ cd bin/   # WRONG! WRONG! WRONG!
$ python app.py  # WRONG! WRONG! WRONG! 
```

很多用户倾向于犯这个错误，[这里](http://learnpythonthehardway.org/book/ex50.html)是 Zed Shaw 的一个很好的解释，关于为什么不这样运行你的应用程序！

那么你做错了。在所有 python 项目中，您不会 cd 进入较低的目录来运行东西。您留在顶部并从那里运行所有内容，以便所有系统都可以访问所有模块和文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T02:35:15.783

可以在 python 中添加到您的 python 路径，最简单的方法是在模块的顶部。

```
import sys
sys.path.append(stringofpath) 
```

您可以回忆一下要添加的每个路径。

`stringofpath`是您的*项目*`/path/to/dir/`所在的目录。*不是*您的项目目录。然后使用从项目目录开始的普通点符号​​继续下降到所有子目录。`dir`

 **在你的情况下你`stringofpath`是`'User/myname/python_stuff'`

随着你的进步，你将不得不花一些认真的时间来学习你的 python 路径，有很多东西很难找到。并且环境变量——至少在 linux 中——被永久设置在`/etc/environment`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-26T03:48:34.553

你必须告诉 python 在哪里加载你的包（即带有`__init__.py`文件的文件夹）。

为了避免上面提到的错误，你可以设置`PYTHONPATH`你的包文件夹的绝对路径，然后无论你在哪个文件夹，python都会找到你的包。

Or you can use a virtual environment tool to help you manage these.**

# java - 使用 Java AWT 为 BIRT 图表动态设置逻辑字体

> ID：11130343
> 
> 赞同：2
> 
> 时间：2012-06-21T01:14:39.910
> 
> 标签：java, birt

我正在使用 BIRT (v3.7.2) 作为报告工具，并且最近将其迁移到了 linux 服务器。

BIRT 使用 Java AWT 生成图表，根据我在网上阅读的内容，Java AWT 仅支持 jre/lib 文件夹中的 fontconfig.properties 文件定义的 5 种逻辑字体。我使用 Arial 字体设计了我的图表，Lucida 似乎是 linux 上的默认字体。

我无法在此 linux 服务器上使用 sudo 登录（无法编辑 fontconfig.properties 文件），并且我不希望制作 java 实例的本地副本只是为了编辑 fontconfig.properties。（最后一招...）

我尝试使用 JAVA_FONTS env 变量指向包含 Arial 的字体目录，但它似乎不起作用......（似乎 AWT 真的很顽固）

想知道是否有任何其他方法可以动态设置 Java 的逻辑字体？

# c++ - C++ - ifstream 不喜欢相对路径

> ID：11130346
> 
> 赞同：1
> 
> 时间：2012-06-21T01:15:14.927
> 
> 标签：c++, ifstream

我在使用 ifstream 打开文件时遇到问题

如果我做：

```
ifstream myfile;
    myfile.open("C:/Users/build/windows/Debug/map1.xml"); 
```

它工作正常，但如果我做一个相对路径（可执行文件在 Debug/ 中）

```
ifstream myfile;
    myfile.open("map1.xml"); 
```

它不会找到该文件。有什么帮助吗？我错过了什么愚蠢的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T01:17:35.100

最有可能的是，您的 IDE 在启动程序时会更改程序的工作目录。尝试`map1.xml`投入`c:\users\build\windows`

# php - MySQL REGEXP 仅匹配边界词，但不包括 html 标签中的匹配

> ID：11130353
> 
> 赞同：0
> 
> 时间：2012-06-21T01:16:23.087
> 
> 标签：php, mysql, sql, regex, word-boundary

按照这个[问答](https://stackoverflow.com/questions/11125464/mysql-regexp-to-match-the-whole-word-only)，我得到的结果还是有点麻烦，

例如，

`REGEXP '>[^<]*lau[[:>:]]'`将仅匹配“ *lau* ”，但不匹配正确的“ *lauren* ”。

`REGEXP '>[^<]*men[[:>:]]'`将匹配'*赋权*'和'*女性*'，这**不是**我所追求的。

`REGEXP '( |>|$)home( |<|$)'`将只匹配 ' *home* ' 而不是 ' *home!* ' 它**应该**。

如何正确匹配这些？

例如，

```
Home - match
HOME - match
welcome home! - match
home is far! - match
hometown - not match
xxhomexx - not match
<a href="home.html">Hello</a> - not match
<p class="home">a box</p> - not match 
```

它不应**与**html 标记中的任何出现匹配。家乡 - 不匹配

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T01:42:40.847

REGEXP '>[^<]*[[:<:]]home[[:>:]]' 怎么样？

此外，我对您的解决方案的性能真的很感兴趣...为什么不在您的表中有另一列，其中包含去除了 html 标记的文本。然后，您可以充分利用全文搜索，而不是使用复杂的正则表达式。

# bash - bash：如何确保终止与 exec 一起使用的进程替换？

> ID：11130354
> 
> 赞同：5
> 
> 时间：2012-06-21T01:16:37.013
> 
> 标签：bash, process-substitution

如果我跑

```
$#/bin/bash
for i in `seq 5`; do
    exec 3> >(sed -e "s/^/$i: /"; echo "$i-")
    echo foo >&3
    echo bar >&3
    exec 3>&-
done 
```

那么结果不是同步的；它可能是这样的：

```
1: foo
1: bar
2: foo
2: bar
1-
3: foo
3: bar
2-
3-
4: foo
5: foo
4: bar
5: bar
4-
5- 
```

如何确保`>(...)`在进行下一次迭代之前完成流程替换？

`sleep 0.1`在帮助之后插入`exec 3>&-`，但它不优雅，效率低下，并且不能保证始终有效。

编辑：这个例子可能看起来很傻，但这只是为了说明。我正在做的是在循环中读取输入流，将每一行馈送到一个在循环期间偶尔会发生变化的进程。在代码中更容易解释：

```
# again, simplified for illustration
while IFS= read line; do
    case $line in
    @*)
        exec 3>&-
        filename=${line:1}
        echo "starting $filename"
        exec 3> >(sort >"$filename"; echo "finished $filename")
        ;;
    *)
        echo "$line" >&3
        ;;
    esac
done
exec 3>&- 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T03:09:12.440

以下工作在 bash 4 中，使用[coprocesses](http://www.gnu.org/software/bash/manual/html_node/Coprocesses.html)：

```
#!/bin/bash
fd_re='^[0-9]+$'
cleanup_and_wait() {
    if [[ ${COPROC[1]} =~ $fd_re ]] ; then
        eval "exec ${COPROC[1]}<&-"
        echo "waiting for $filename to finish" >&2
        wait $COPROC_PID
    fi
}

while IFS= read -r line; do
    case $line in
    @*)
        cleanup_and_wait
        filename=${line:1}
        echo "starting $filename" >&2
        coproc { sort >"$filename"; echo "Finished with $filename" >&2; }
        ;;
    *)
        printf '%s\n' "$line" >&${COPROC[1]}
        ;;
    esac
done
cleanup_and_wait 
```

对于以前的 bash 版本，可以使用命名管道：

```
cleanup_and_wait() {
    if [[ $child_pid ]] ; then
      exec 4<&-
      echo "waiting for $filename to finish" >&2
      wait $child_pid
    fi
}

# this is a bit racy; without a force option to mkfifo,
# however, the race is unavoidable
fifo_name=$(mktemp -u -t fifo.XXXXXX)
if ! mkfifo "$fifo_name" ; then
  echo "Someone else may have created our temporary FIFO before we did!" >&2
  echo "This can indicate an attempt to exploit a race condition as a" >&2
  echo "security vulnarability and should always be tested for." >&2
  exit 1
fi

# ensure that we clean up even on unexpected exits
trap 'rm -f "$fifo_name"' EXIT

while IFS= read -r line; do
    case $line in
    @*)
        cleanup_and_wait
        filename=${line:1}
        echo "starting $filename" >&2
        { sort >"$filename"; echo "finished with $filename" >&2; } <"$fifo_name" &
        child_pid=$!
        exec 4>"$fifo_name"
        ;;
    *)
        printf '%s\n' "$line" >&4
        ;;
    esac
done
cleanup_and_wait 
```

几点注意事项：

*   使用起来`printf '%s\n' "$line"`比`echo "$line"`; 例如，如果一行仅包含，则`-e`某些版本的`echo`不会对其执行任何操作。
*   使用 EXIT 陷阱进行清理可确保意外的 SIGTERM 或其他错误不会留下陈旧的 fifo。
*   如果您的平台提供了一种在单个原子操作中创建具有未知名称的 FIFO 的方法，请使用它；这将避免要求我们始终测试 mkfifo 是否成功的情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-12T04:40:08.820

很简单，只需将所有内容都通过管道传输到 cat 中。

```
#!/bin/bash
for i in `seq 5`; do
  {
  exec 3> >(sed -e "s/^/$i: /"; echo "$i-")
  echo foo >&3
  echo bar >&3
  exec 3<&-
  }|cat
done 
```

这是输出：

```
1: foo
1: bar
1-
2: foo
2: bar
2-
3: foo
3: bar
3-
4: foo
4: bar
4-
5: foo
5: bar
5- 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T09:37:57.483

```
mkfifo tmpfifo
for i in `seq 5`; do
  { sed -e "s/^/$i: /"; echo "$i-";} <tmpfifo &
  PID=$!
  exec 3> tmpfifo
  echo foo >&3
  echo bar >&3
  exec 3>&-
  wait $PID
done
rm tmpfifo 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T01:32:53.210

“显而易见”的答案是摆脱进程替换。

```
for i in `seq 5`; do
    echo foo | sed -e "s/^/$i: /"; echo "$i-"
    echo bar | sed -e "s/^/$i: /"; echo "$i-"
done 
```

那么问题就变成了，你真的需要使用进程替换来构造你的代码吗？以上比尝试同步异步构造要简单得多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-11T20:32:39.050

[另一个用户提出了同样的问题，并在此处](https://unix.stackexchange.com/a/388530/32078)收到了详尽的答案。

# opencl - OpenCL - 主内核填充缓冲区并在子内核上运行

> ID：11130357
> 
> 赞同：0
> 
> 时间：2012-06-21T01:17:43.510
> 
> 标签：opencl, kernel

作为 OpenCL 的新手，我想知道以下情况是否可行。

在内存中创建了 10 个长度为 10000 的缓冲区，或者一个 10xN 的图像缓冲区用作缓存。

第一个内核将在缓存中填充一行并查询另一个内核以对该行进行一些工作。当第二个内核完成后，第一个内核可以计算一个新行并替换旧行，并且相同的过程继续进行，直到第一个内核没有更多任务为止。

该场景是否有意义，在 GPU 编程中是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T01:30:28.340

OpenCL 不允许内核调用其他内核。但是你有一些选择。

1.  让第一个内核调用另一个非内核函数。工作项之间的工作分配在这里不会改变 - 因此，如果您有 10 个并行工作项（线程）正在执行，每行一个，那么每个线程将在非内核函数中对相同的数据进行操作。

2.  多个内核可以一个接一个地加入队列，但这是由主机协调的。这确实允许在线程之间重新分配工作，但可能比选项 1 更复杂。

创建快速 OpenCL 代码的关键之一是将工作拆分为工作项，通常越多越好。如果填充该行的第一个内核只能拆分为 10 个工作项，但在该行上进行处理的第二个内核可以拆分为 1000 个工作项，那么您肯定希望使用选项 2，因为第二部分可以在具有大量内核的设备（例如现代 GPU）上更有效地拆分。少数工作项目（例如 10 个）将只能使用该可用处理能力的一小部分。

（补充）

在 GPU 上执行的 OpenCL 内核是数据并行的，这意味着一次只能执行一个内核，但每个线程处理不同的数据。可能值得重新考虑您的算法以适应此模型。

从您在评论中写的内容看来，由于内存限制，您想一次运行 10 个项目。但请注意，OpenCL 中没有动态内存分配。所有缓冲区都是预先声明的。因此，主机应该确定有多少任务可以放入可用内存并运行成批的工作项（通过适当的缓冲区传输）。

另外缓冲区是如何填充的？从文件？OpenCL 内核无法读取文件、网络等，因此如果这是加载原始数据的方式，则必须在主机上完成。但是，如果这些图像缓冲区是从其他源创建的（例如，通过算法或从另一个内存源），那么应该可以正常工作（尽管您还需要将任何其他内存源复制到 GPU） .

# .net - Visual Studio 中每个项目的用户设置

> ID：11130362
> 
> 赞同：1
> 
> 时间：2012-06-21T01:18:03.477
> 
> 标签：.net, visual-studio

是否可以为每个开发人员指定项目设置（不将其签入源代码管理）？

例如，一个用例是一些开发人员更喜欢使用 IIS Express 而其他人则不喜欢。出版也可能不同。

# php - PHP/ORACLE oci_bind_by_name 和 RETURNING INTO 获取 PK

> ID：11130363
> 
> 赞同：1
> 
> 时间：2012-06-21T01:18:06.190
> 
> 标签：php, oracle, sql-returning

我正在对 Oracle DB 进行非常基本的插入，并使用 RETURNING INTO 子句来获取主键。不过，我经常得到一个空返回，而且我一生都无法弄清楚问题可能是什么。除了这个问题，行插入非常好。下面的代码：

```
$requestParentSQL = "INSERT INTO 
            KRANE_REQUEST (
                DATE_REQUESTED, 
                DATE_EMAILED, 
                PERSON_ID, 
                AUTHORISER_ID
                ) 
            VALUES (
                SYSDATE, 
                SYSDATE, 
                '$theUser', 
                '$theAuthoriser'
                )
            RETURNING 
                KRANE_REQUEST_ID 
            INTO 
                :NEW_KRID";

$oracleConnection = oci_connect(_DATABASEUSERNAME, _DATABASEPASSWORD, _DATABASE);
$oracleStatement = oci_parse($oracleConnection, $requestParentSQL);
oci_bind_by_name($oracleStatement, ':NEW_KRID', $theNewKRID, 8);
oci_execute($oracleStatement, OCI_DEFAULT);
oci_commit($oracleConnection);
oci_free_statement($oracleStatement);
oci_close($oracleConnection); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T05:44:49.240

发现问题。我打电话给 $theNEWKRID 而不是 $theNewKRID。我的错。

# facebook - 未捕获的 OAuth 异常 - api('/me','GET') 在 Safari 中不起作用

> ID：11130365
> 
> 赞同：0
> 
> 时间：2012-06-21T01:18:37.877
> 
> 标签：facebook, facebook-graph-api

我有一个从页面选项卡运行的应用程序。登录到应用程序是通过 Javascript 完成的。

```
function facebooklogin() {
   FB.getLoginStatus(function (response) {
      if (response.status === 'connected') {
         //user authorized
         //SubmitLogin(response);
         fbid = response.authResponse.userID; //valid response returned
         token = response.authResponse.accessToken; //valid response returned
         SubmitLogin();
      }
      else if (response.status === 'not_authorized') {
         FB.login(function (response) {
            if (response.authResponse) {
               // user authorized
               //SubmitLogin(response);
               fbid = response.authResponse.userID; //valid response returned
               token = response.authResponse.accessToken; //valid response returned
               SubmitLogin();
            } else {
               // user cancelled
               alert("User authorization is required for taking part in this promo.");
            }
         }, {
            scope: 'user_about_me,user_birthday,user_checkins,user_hometown,user_location,publish_stream,email'
         });
      } else {
      // the user isn't logged in to Facebook.
      }
   });
}

function SubmitLogin() {
   //$("#token").val(response.authResponse.accessToken);
   //$("#fbid").val(response.authResponse.userID);
   //$("#login_form").submit();
   $("#print_me").prop("href", "printable.php?fbid=" + fbid);
   if (fbid != "") {
      $.post("submit_user.php", "fbid=" + fbid + "&token=" + token, function(msg) {
         var spl = msg.split("|");

         if (spl.length == 3) {
            //this part isn't an issue since the code never reaches it
            post_wall();
            $("#share_section").css({display: "none"});
            $("#reward_section").css({display: "block"});
            FB.Canvas.setSize();

            $("#coupon_printout").html(spl[0]);
            $("#qr_holder").html(spl[1]);
            $("#expiration").html(spl[2]);
         }
         else {
            //code always lands here because of the error in the php script
            alert(msg);
         }
      });
   }
   else {
      alert("You have not signed in to this app. If you did not see a sign in request, you may need to disable your pop-up blocker.");
   }
} 
```

当我回显返回值时，用户的 FacebookID 和访问令牌恢复正确。然后我将这些传递给登录到应用程序的 PHP 脚本。到目前为止一切正常。

```
require 'facebook.php';
$facebook = new Facebook(array(
'appId' => /*my app ID*/,
'secret' => /*my app secret*/,
'cookie' => true
));

$signedRequest = $facebook->getSignedRequest(); //is blank

$user_id = $facebook->getUser(); //user's FacebookID gets returned
$user_profile = $facebook->api('/me','GET'); //OAuth error gets thrown 
```

这是我的全部 PHP 代码，直到在 Safari 上引发 OAuth 错误的部分。我尝试打印出我通过 post 传递的访问令牌，它出现了。但是，getAccessToken() 会打印出不同的值。

该区域的其他浏览器未出现错误。

编辑：将文件移动到不同的服务器，它开始适用于某些浏览器，而在其他浏览器中没有区别。

# c# - 失败的操作是：LinkDemand 第一个权限的类型

> ID：11130370
> 
> 赞同：2
> 
> 时间：2012-06-21T01:19:19.657
> 
> 标签：c#, networking, permissions, securityexception

我正在开发一个可以从网络驱动器执行的小型 exe csharp windows 窗体程序。我了解使用网络驱动器路径会导致安全问题。因此，我修改了我的代码，但是，当我尝试运行“Form.Show()”时，这样一个简单的代码也遇到了麻烦：

> 失败的操作是：LinkDemand 失败的第一个权限类型是：System.Security.PermissionSet 失败的程序集区域是 Intranet

我希望通过我的应用程序中的任何编码方法来解决这个问题，因为它将部署在 .NET 框架不确定的数百台计算机上。（可能低于 .NET framework 3.5 SP1）

# grep - xargs 字符串用作 agrep 的输入

> ID：11130374
> 
> 赞同：0
> 
> 时间：2012-06-21T01:21:22.947
> 
> 标签：grep, xargs, zcat, agrep

伙计们，我正在使用 xargs 传递 agrep 的输入。我正在使用如下所示的 xargs

```
Script:    
xargs -L 1 -I string echo "RequestId="string | xargs -L 1 -I string zcat FILEB | agrep -dEOE string

Output till "RequestId="string
RequestID=543214324
RequestID=512121221
RequestID=521212121 
```

我的目标是将这个请求 ID 放在另一个文件“文件 B”中。由于这个文件是压缩的，我需要在执行 agrep 之前使用 zcat ......但是如果我这样做，我会得到不正确的结果.. 我在 agrep 中使用的最终“字符串”不正确.. 任何关于此的建议都将是高度有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:52:50.607

你想要什么并不完全清楚。我假设你有一个文件 FILEA 包含：

```
543214324
512121221
521212121 
```

并且您想将 FILEB.gz 用于：

```
RequestID=543214324
RequestID=512121221
RequestID=521212121 
```

FILEBB.gz 是 gzip 压缩的，因此您需要`zcat`对其进行解压缩，并且您不能使用 zgrep，因为您依赖于仅在`agrep`.

使用 GNU Parallel 你可以：

```
cat FILEA | parallel zcat FILEB.gz \| agrep -dEOE RequestID={} 
```

并行执行的优点之一是，如果 FILEB.gz 太大而无法放入内存，那么这将确保并行搜索，从而避免每次搜索都从磁盘读取 FILEB.gz。另一个优点是您可以使用现在几乎可以保证您的计算机拥有的多个 CPU 内核。

您可以通过以下方式安装 GNU Parallel：

```
wget http://git.savannah.gnu.org/cgit/parallel.git/plain/src/parallel
chmod 755 parallel
cp parallel sem 
```

观看 GNU Parallel 的介绍视频以了解更多信息：[https ://www.youtube.com/playlist?list=PL284C9FF2488BC6D1](https://www.youtube.com/playlist?list=PL284C9FF2488BC6D1)

# heroku - Heroku：管理/在个人和工作帐户之间切换

> ID：11130378
> 
> 赞同：1
> 
> 时间：2012-06-21T01:22:00.123
> 
> 标签：heroku

当我只将它用于一些宠物项目时，使用 heroku 很容易。现在我想使用多个帐户（专业帐户与个人帐户）并且很难使其正常工作（登录名、ssh 密钥等）。我找不到任何文档或推荐的工作流程，那么您如何管理切换帐户以在 heroku 上创建/推送应用程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T00:23:17.230

我之前安装了这个插件并与 heroku gem 一起使用。

今天，我 - 卸载了 gem - 安装了 heroku-toolbelt - 再次安装了 heroku-accounts 插件

但是每次我尝试使用该`heroku`命令时，都会出现错误：

```
 'No such account: personal' 
```

问题是我`.gitconfig`仍然有一个设置说：

```
[heroku]
account = personal 
```

一旦删除，一切都很好。

我也在此过程中删除了对 heroku 的任何引用`.ssh/config`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T01:41:39.007

[heroku-accounts](https://github.com/ddollar/heroku-accounts)插件解决了这个问题。

但是，即使它是一个可靠的插件，请注意它会在幕后操纵您的 git 配置设置，这有时会导致一些问题或不直观的错误。如果您对 Heroku 与 git config/remotes 相关的工作方式有很好的了解，那么这是一个不错的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-04T19:30:16.330

我遇到过同样的问题。它对我有用，但我只是在同一行替换了“个人”：

```
[heroku] 
```

帐户=个人

使用我之前使用的原始工作名称（在我的情况下是“工作”）。

```
[heroku] 
```

帐户=工作

之后，我可以再次使用 heroku 帐户并登录，而无需进行任何其他更改。

# install4j - Install4j 创建的 windows 安装程序

> ID：11130379
> 
> 赞同：0
> 
> 时间：2012-06-21T01:22:27.170
> 
> 标签：install4j

我正在评估 install4j 以创建适用于 Linux (rpm) 和 Windows (exe) 平台的 Java 应用程序安装程序。在安装快结束时，我想修改一个文本文件的内容。

将 install4j 用于 Linux 媒体，它允许“安装后”脚本，我可以在其中定义 bash shell 脚本来修改文本文件。

但是，对于 Windows 媒体使用 install4j，没有任何“安装后”脚本可以在其中定义批处理脚本。

有没有人有使用 install4j for Windows media 的经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:06:15.467

在“安装程序->屏幕和操作”选项卡上添加“运行可执行文件或批处理文件”操作以执行批处理文件。还有用于修改文本文件的操作。

Unix 档案的安装后脚本也适用于 DEB 和 RPM 等档案，Windows 档案没有可比的脚本，您必须在那里使用安装程序。

# c# - C# Cleaner 方法来检查复选框状态？

> ID：11130381
> 
> 赞同：3
> 
> 时间：2012-06-21T01:22:36.983
> 
> 标签：c#, .net, winforms, checkbox

我有以下代码，它将布尔列表作为参数，然后通过单独验证列表来设置每个检查列表的检查状态。

有没有更有效的方法来编写以下代码？例如，通过使用循环？

```
public PointCtrlRowSelectionForm(List<Boolean> checkList, PointCtrlForm form, string title)
            {
                InitializeComponent();
                this.form = form;
                this.Text = title;
                if (checkList[0] == true)      
                {
                    checkBox1.Checked = true;
                    checkBox1.CheckState = CheckState.Checked;
                }
                if (checkList[1] == true)
                {
                    checkBox2.Checked = true;
                    checkBox3.CheckState = CheckState.Checked;
                }
                if (checkList[2] == true)
                {
                    checkBox3.Checked = true;
                    checkBox3.CheckState = CheckState.Checked;
                }
                if (checkList[3] == true)
                {
                    checkBox4.Checked = true;
                    checkBox4.CheckState = CheckState.Checked;
                }
                if (checkList[4] == true)
                {
                    checkBox5.Checked = true;
                    checkBox5.CheckState = CheckState.Checked;
                }
                if (checkList[5] == true)
                {
                    checkBox6.Checked = true;
                    checkBox6.CheckState = CheckState.Checked;
                }           
            } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T01:28:13.723

制作这些复选框的数组。你可以把这一切变成一个 for 循环。

```
for(int i = 0; i < checklist.Length; i++)
{
    if (checklist[i].Checked == true)
    {
        arrayOfCheckboxes[i].Checked = true;
        arrayOfCheckboxes[i].CheckState = CheckState.Checked;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T01:29:38.273

您可以将 List 更改为 Dictionary 并进行简单的枚举，尽管它们如下所示：

```
public PointCtrlRowSelectionForm(Dictionary<CheckBox, Boolean> checkList, PointCtrlForm form, string title)
        {
            InitializeComponent();
            this.form = form;
            this.Text = title;

            foreach<KeyValuePair<CheckBox, Boolean> kvp in checklist)
            {
                if (kvp.Value == true)      
                {
                    kvp.Key.Checked = true;
                    kvp.Key.CheckState = CheckState.Checked;
                }
            }
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T01:38:15.390

不幸的是，IDE 表单设计器不支持*控制分组功能。*根据您设计表单的方式，我可以想到 4 种方法：

1.  更改自动生成的代码并将`CheckBox`实例添加到数组中（不推荐）。
2.  保持自动生成的代码不变，但创建第二个数组引用每个`CheckBox`.

    ```
    CheckBox[] checkboxes = new CheckBox[]{checkBox1, checkBox2, checkBox3}; 
    ```

3.  将所有`Checkbox`实例放入组控件中。然后，您可以循环浏览`Controls`该组的属性。使用`Tag`each 的属性`CheckBox`来选择一个索引（替代方法可能是使用 the`TabIndex`或依赖于`CheckBox`找到实例的顺序）。

    ```
    bool[] check_list = new bool[] { true, true, false };
    private void button3_Click(object sender, EventArgs e)
    {
      foreach (Control c in groupBox1.Controls)
      {
        if (c is CheckBox)
        {
          CheckBox current = c as CheckBox;
          current.Checked = check_list[int.Parse(current.Tag.ToString())];
        }
      }
    } 
    ```

4.  执行与之前的解决方案相同的操作，但在您的主窗体上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T01:38:14.563

假设您的复选框实际上是以这样的可重复模式命名的，那么您可以进行一些反射，例如：

```
Type myType = this.GetType();
for(int i=0; i < checkList.Length; i++)
{
    string fieldName = String.Format("checkBox{0}", i);
    FieldInfo info = myType.GetField(fieldName);
    CheckBox cb = (CheckBox)info.GetValue(this);
    if(checkList[i] == true)
    {
        cb.Checked = true;
        cb.CheckState = CheckState.Checked;
    }
} 
```

这有点冗长，但更灵活，您可以添加或多或少的复选框而无需修改此代码（假设您坚持命名模式）。

# javascript - 正确有效地实现后台加载

> ID：11130382
> 
> 赞同：1
> 
> 时间：2012-06-21T01:22:49.453
> 
> 标签：javascript, jquery

下面的代码是对我正在尝试做的事情的总结，即开发一个允许用户左右滚动图像的界面。图像从屏幕开始，然后到中心，它还将前一个图像推回屏幕。

我会喜欢一些关于我拥有的代码的建议或关于如何做得更好的建议。显然，如果用户快速点击箭头，无疑会破坏脚本，所以我需要帮助。也许在“加载”状态下阻止箭头被点击？

我还应该提到 backgroundLoad 预加载下一个和上一个图像。当我说“屏幕外”时，它将动画到中心。我不是在寻找图片库/灯箱解决方案。这个问题更多的是关于预加载过程。

```
var imgArray=[];
    var b = 0;

    function loadImage(ini){
        b = ini;

        //preload image
        var num_loaded = 0;
    imgArray[ini] = new Array();;

    for(var i=0;i<2;i++){
        imgArray[ini][i] = new Image();

        imgArray[ini][i].onload = function(){
            num_loaded++;

            if(num_loaded == 1){

            }

            if(num_loaded == 2){
                //do something

               backgroundLoad(ini+1);

            }

        }

        imgArray[ini][i].src = ArrayOfFiles[ini][i];

    }

}

function backgroundLoad(ini){
    var num_loaded = 0;
    imgArray[ini] = new Array();;

    for(var i=0;i<2;i++){
        imgArray[ini][i] = new Image();

        imgArray[ini][i].onload = function(){
            num_loaded++;

            if(num_loaded == 2){

                // loaded

            }

        }

        imgArray[ini][i].src = ArrayOfFiles[ini][i];

    }

}

$("div#arrow-left").click(function(){

    loadImage(b+1);
});

$("div#arrow-right").click(function(){

    loadImage(b-1);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T01:26:55.203

您是否尝试过以下预先编写的工具之一？那些已经具有您需要的所有（以及更多）功能。

*   [http://lytebox.com/](http://lytebox.com/)
*   [http://www.shadowbox-js.com/](http://www.shadowbox-js.com/)
*   [http://leandrovieira.com/projects/jquery/lightbox/](http://leandrovieira.com/projects/jquery/lightbox/)

# workflow-foundation-4 - 在 WF4 活动设计器上显示动态参数

> ID：11130384
> 
> 赞同：2
> 
> 时间：2012-06-21T01:23:07.577
> 
> 标签：workflow-foundation-4, workflow-activity, workflow-rehosting

我创建了一个自定义活动，其中包含在设计时创建的参数，并且在将它们与设计器中的 ExpressionTextBox 关联时遇到问题。

ExpressionTextBox 显示在设计器中，它们反映了它所绑定的 Argument 的值，但是在 ExpressionTextBox 中输入表达式不会被路由回参数。示例/代码是有序的。

它不会让我发布图片，所以必须做一个链接。 [设计器示例](http://social.msdn.microsoft.com/Forums/getfile/120930)

在上图中，我在第二个 ETB 中输入了“param2”，然后单击了“编辑参数”按钮。（编辑参数按钮显示一个 DynamicArgumentDialog）。如果我在 DyanmicArgumentDialog 中输入一个值，那么当我单击“确定”时，它确实会显示在设计器上。

这是我的设计师的 xaml（我可能遗漏了一些东西）

```
<ItemsControl Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="2" ItemsSource="{Binding ModelItem.Arguments}">
  <ItemsControl.ItemTemplate>
    <DataTemplate>
      <Grid>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="70" SharedSizeGroup="nameColumn" />
          <ColumnDefinition Width="200" />
        </Grid.ColumnDefinitions>

        <sapv:ExpressionTextBox Grid.Column="1"
                                Expression="{Binding Path=., Mode=TwoWay, Converter={StaticResource expressionConverter}, ConverterParameter=Out}"
                                OwnerActivity="{Binding DataContext.ModelItem, ElementName=layoutRoot}"
                                ExpressionType="s:String"
                                UseLocationExpression="True"
                                MaxLines="1"
                                AcceptsReturn="False" />

      </Grid>
    </DataTemplate>
  </ItemsControl.ItemTemplate>
</ItemsControl> 
```

（layoutRoot 是我的设计器的根元素的名称，这样我就可以从 ItemTemplate 内部访问 ModelItem）（我的 Activity 上的 Arguments 属性定义为 Collection 并且当前在列表中有两个项目）

虽然我可以只使用 DynamicArgumentDialog 来设置我的论点，但我希望让它们显示在设计器中。任何人都可以看到这有什么问题，也许为什么它不起作用？

如果有人想看一下，我也有一个样本。 [动态参数测试](https://rapidshare.com/files/4256637158/DynamicArgumentTest.zip)

有没有人幸运地让 ExpressionTextBoxes 与动态参数一起正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:49:09.887

在代码中设置绑定

```
var bind = new Binding();
bind.Mode = BindingMode.TwoWay;
bind.Converter = new ArgumentToExpressionConverter();
bind.ConverterParameter = direction;
bind.Path = new PropertyPath(
String.Format("ModelItem.Arguments[{0}]", argumentName));

//Out arguments require L-Value expression
if (direction == "out")
    expressionTbx.UseLocationExpression = true;

//Set the binding and Add the expression block to the grid
expressionTbx.SetBinding(ExpressionTextBox.ExpressionProperty, bind); 
```

[http://blogs.microsoft.co.il/blogs/applisec/archive/2010/06/14/how-to-bind-wf-4-0-arguments-to-expressiontextbox-in-code.aspx](http://blogs.microsoft.co.il/blogs/applisec/archive/2010/06/14/how-to-bind-wf-4-0-arguments-to-expressiontextbox-in-code.aspx)

# php - PHP根据工作日的函数计算日期

> ID：11130390
> 
> 赞同：4
> 
> 时间：2012-06-21T01:24:32.183
> 
> 标签：php, function, date

我正在使用这个函数（我在这个论坛上找到）来计算一个范围之间的工作日数：

```
<?php
//The function returns the no. of business days between two dates and it skips the holidays
function getWorkingDays($startDate,$endDate,$holidays){
// do strtotime calculations just once
$endDate = strtotime($endDate);
$startDate = strtotime($startDate);

//The total number of days between the two dates. We compute the no. of seconds and divide it to 60*60*24
//We add one to inlude both dates in the interval.
$days = ($endDate - $startDate) / 86400 + 1;

$no_full_weeks = floor($days / 7);
$no_remaining_days = fmod($days, 7);

//It will return 1 if it's Monday,.. ,7 for Sunday
$the_first_day_of_week = date("N", $startDate);
$the_last_day_of_week = date("N", $endDate);

//---->The two can be equal in leap years when february has 29 days, the equal sign is added here
//In the first case the whole interval is within a week, in the second case the interval falls in two weeks.
if ($the_first_day_of_week <= $the_last_day_of_week) {
    if ($the_first_day_of_week <= 6 && 6 <= $the_last_day_of_week) $no_remaining_days--;
    if ($the_first_day_of_week <= 7 && 7 <= $the_last_day_of_week) $no_remaining_days--;
}
else {
    // (edit by Tokes to fix an edge case where the start day was a Sunday
    // and the end day was NOT a Saturday)

    // the day of the week for start is later than the day of the week for end
    if ($the_first_day_of_week == 7) {
        // if the start date is a Sunday, then we definitely subtract 1 day
        $no_remaining_days--;

        if ($the_last_day_of_week == 6) {
            // if the end date is a Saturday, then we subtract another day
            $no_remaining_days--;
        }
    }
    else {
        // the start date was a Saturday (or earlier), and the end date was (Mon..Fri)
        // so we skip an entire weekend and subtract 2 days
        $no_remaining_days -= 2;
    }
}

//The no. of business days is: (number of weeks between the two dates) * (5 working days) + the remainder
//---->february in none leap years gave a remainder of 0 but still calculated weekends between first and last day, this is one way to fix it
$workingDays = $no_full_weeks * 5;
if ($no_remaining_days > 0 )
{
  $workingDays += $no_remaining_days;
}

//We subtract the holidays
foreach($holidays as $holiday){
    $time_stamp=strtotime($holiday);
    //If the holiday doesn't fall in weekend
    if ($startDate <= $time_stamp && $time_stamp <= $endDate && date("N",$time_stamp) != 6 && date("N",$time_stamp) != 7)
        $workingDays--;
}

return $workingDays;
}

//Example:

$holidays=array("2008-12-25","2008-12-26","2009-01-01");

echo getWorkingDays("$startdate","$enddate",$holidays)
?> 
```

现在我想稍微扩展一下这个功能。如果我从开始日期添加 X 个工作日，我想生成什么日期。比如说我有一个变量，它的值是**20**

```
$workingdays = "20"; 
```

我想让这个函数计算出 startdate + 20 个工作日将是 2012-06-28 `$startdate`。`2012-06-01`这可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T01:33:54.390

不久前我使用以下功能做了类似的事情。这里的关键是跳过周末，您也可以将其扩展到跳过假期。

例子：

调用函数->`addDays(strtotime($startDate), 20, $skipdays,$skipdates = array())`

```
 <?php
    function addDays($timestamp, $days, $skipdays = array("Saturday", "Sunday"), $skipdates = NULL) {
        // $skipdays: array (Monday-Sunday) eg. array("Saturday","Sunday")
        // $skipdates: array (YYYY-mm-dd) eg. array("2012-05-02","2015-08-01");
       //timestamp is strtotime of ur $startDate
        $i = 1;

        while ($days >= $i) {
            $timestamp = strtotime("+1 day", $timestamp);
            if ( (in_array(date("l", $timestamp), $skipdays)) || (in_array(date("Y-m-d", $timestamp), $skipdates)) )
            {
                $days++;
            }
            $i++;
        }

        return $timestamp;
        //return date("m/d/Y",$timestamp);
    }
    ?> 
```

[编辑]：刚刚阅读了一篇关于 nettuts 的精彩文章，希望对[http://net.tutsplus.com/tutorials/php/dates-and-time-the-oop-way/有所帮助](http://net.tutsplus.com/tutorials/php/dates-and-time-the-oop-way/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-20T20:36:06.483

如果有人感兴趣，我正在使用此功能将 X 个工作日添加到日期。该函数接受一个时间戳并返回一个时间戳。可以通过数组指定假期（如果在美国，您可以使用`usBankHolidays()`）。

目前，假设周六和周日不是工作日，但可以轻松更改。

**代码**：

```
function addBusinessDays($date, $days, $holidays = array()) {
    $output = new DateTime();
    $output->setTimestamp($date);
    while ($days > 0) {
        $weekDay = $output->format('N');

        // Skip Saturday and Sunday
        if ($weekDay == 6 || $weekDay == 7) {
            $output = $output->add(new DateInterval('P1D'));
            continue;
        }

        // Skip holidays
        $strDate = $output->format('Y-m-d');
        foreach ($holidays as $s) {
            if ($s == $strDate) {
                $output = $output->add(new DateInterval('P1D'));
                continue 2;
            }
        }

        $days--;
        $output = $output->add(new DateInterval('P1D'));
    }
    return $output->getTimestamp();
}

function usBankHolidays($format = 'datesonly') {
    $output = array(
        array('2015-05-25', 'Memorial Day'),
        array('2015-07-03', 'Independence Day'),
        array('2015-09-07', 'Labor Day'),
        array('2015-10-12', 'Columbus Day'),
        array('2015-11-11', 'Veterans Day'),
        array('2015-11-26', 'Thanksgiving Day'),
        array('2015-12-25', 'Christmas Day'),
        array('2016-01-01', 'New Year Day'),
        array('2016-01-18', 'Martin Luther King Jr. Day'),
        array('2016-02-15', 'Presidents Day (Washingtons Birthday)'),
        array('2016-05-30', 'Memorial Day'),
        array('2016-07-04', 'Independence Day'),
        array('2016-09-05', 'Labor Day'),
        array('2016-10-10', 'Columbus Day'),
        array('2016-11-11', 'Veterans Day'),
        array('2016-11-24', 'Thanksgiving Day'),
        array('2016-12-25', 'Christmas Day'),
        array('2017-01-02', 'New Year Day'),
        array('2017-01-16', 'Martin Luther King Jr. Day'),
        array('2017-02-20', 'Presidents Day (Washingtons Birthday)'),
        array('2017-05-29', 'Memorial Day'),
        array('2017-07-04', 'Independence Day'),
        array('2017-09-04', 'Labor Day'),
        array('2017-10-09', 'Columbus Day'),
        array('2017-11-10', 'Veterans Day'),
        array('2017-11-23', 'Thanksgiving Day'),
        array('2017-12-25', 'Christmas Day'),
        array('2018-01-01', 'New Year Day'),
        array('2018-01-15', 'Martin Luther King Jr. Day'),
        array('2018-02-19', 'Presidents Day (Washingtons Birthday)'),
        array('2018-05-28', 'Memorial Day'),
        array('2018-07-04', 'Independence Day'),
        array('2018-09-03', 'Labor Day'),
        array('2018-10-08', 'Columbus Day'),
        array('2018-11-12', 'Veterans Day'),
        array('2018-11-22', 'Thanksgiving Day'),
        array('2018-12-25', 'Christmas Day'),
        array('2019-01-01', 'New Year Day'),
        array('2019-01-21', 'Martin Luther King Jr. Day'),
        array('2019-02-18', 'Presidents Day (Washingtons Birthday)'),
        array('2019-05-27', 'Memorial Day'),
        array('2019-07-04', 'Independence Day'),
        array('2019-09-02', 'Labor Day'),
        array('2019-10-14', 'Columbus Day'),
        array('2019-11-11', 'Veterans Day'),
        array('2019-11-28', 'Thanksgiving Day'),
        array('2019-12-25', 'Christmas Day'),
        array('2020-01-01', 'New Year Day'),
        array('2020-01-20', 'Martin Luther King Jr. Day'),
        array('2020-02-17', 'Presidents Day (Washingtons Birthday)'),
        array('2020-05-25', 'Memorial Day'),
        array('2020-07-03', 'Independence Day'),
        array('2020-09-07', 'Labor Day'),
        array('2020-10-12', 'Columbus Day'),
        array('2020-11-11', 'Veterans Day'),
        array('2020-11-26', 'Thanksgiving Day'),
        array('2020-12-25', 'Christmas Day '),
    );

    if ($format == 'datesonly') {
        $temp = array();
        foreach ($output as $item) {
            $temp[] = $item[0];
        }
        $output = $temp;
    }

    return $output;
} 
```

**用法：**

```
$deliveryDate = addBusinessDays(time(), 7, usBankHolidays()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-04T08:35:09.860

来自@this.lau_ 用动态（固定）的holydays 回答了一个更简单、更合乎逻辑的算法

```
public function addBusinessDays($date, $days) {

    $output = new DateTime();
    $output->setTimestamp($date);

    while ($days > 0) {

        $output = $output->add(new DateInterval('P1D'));
        $weekDay = $output->format('N');
        $strDate = $output->format('Y-m-d');

        // Skip Saturday and Sunday
        if ($weekDay == 6 || $weekDay == 7) {

            continue;

        }

        // Skip holidays
        $holidays = $this->_getHolidays();            

        foreach ($holidays as $holiday_date => $holiday_name) {

            if ($holiday_date == $strDate) {

                continue 2;

            }

        }

        $days--;

    }

    return $output->getTimestamp();

}

public function _getHolidays() {

    $feste = array(
        date("Y") . "-01-01" => "Capodanno", 
        date("Y") . "-01-06" => "Epifania", 
        date("Y") . "-04-25" => "Liberazione", 
        date("Y") . "-05-01" => "Festa Lavoratori", 
        date("Y") . "-06-02" => "Festa della Repubblica", 
        date("Y") . "-08-15" => "Ferragosto", 
        date("Y") . "-11-01" => "Tutti Santi", 
        date("Y") . "-12-08" => "Immacolata", 
        date("Y") . "-12-25" => "Natale", 
        date("Y") . "-12-26" => "St. Stefano"
    );

    return $feste;

} 
```

调用函数

```
$deliveryDate = addBusinessDays(time(), 7); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-08T18:59:01.767

使用 this.lau_[函数](https://stackoverflow.com/a/29175410/3298263)，我可以反转它，用于减法日期，使用到期日期。希望这可以帮助某人：

```
function subBusinessDays( $date, $days, $holidays = array() ) {
            $output = new DateTime();
            $output->setTimestamp( $date );

            while ( $days > 0 ) {

                $output = $output->sub( new DateInterval( 'P1D' ) );

                // Skip holidays
                $strDate = $output->format( 'Y-m-d' );
                if ( in_array( $strDate, $holidays ) ) {
                    // Skip Saturday and Sunday
                    $output = $output->sub( new DateInterval( 'P1D' ) );
                    continue;
                }

                $weekDay = $output->format( 'N' );
                if ($weekDay <= 5 ) {
                    $days --;
                }

            }

            return $output->getTimestamp();
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-03T17:45:24.927

我有一个更好的解决方案，函数上只有两个参数。

只需调用函数

```
addDays($currentdate, $WordkingDatestoadd); 
```

然后，使用下面的函数

```
function addDays($timestamp, $days) {

$workingDays = [1, 2, 3, 4, 5]; # date format = N (1 = Monday, ...)
$holidayDays = ['*-12-25', '*-01-01']; # variable and fixed holidays

$timestamp = new DateTime($timestamp);
$days = $days;

for($i=1 ; $i <= $days; $i++){
    $timestamp = $timestamp->modify('+1 day');
    if ((!in_array($timestamp->format('N'), $workingDays)) && (!in_array($timestamp->format('*-m-d'), $holidayDays))){
        $i--;
    }
}

$timestamp = $timestamp->format('Y-m-d');
return $timestamp;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-26T04:42:31.130

这里我动态使用HolidayAPI作为假期列表。HolidayAPI是免费实现的。我是孟加拉国人，所以我使用国家代码 BD。API 链接 - [https://holidayapi.com/v1/holidays?pretty&key=your_key&country=your_country_code&year=2020](https://holidayapi.com/v1/holidays?pretty&key=your_key&country=your_country_code&year=2020)

```
// cURL start
$cURLConnection = curl_init();
curl_setopt($cURLConnection, CURLOPT_URL, 'your api');
curl_setopt($cURLConnection, CURLOPT_RETURNTRANSFER, true);
$phoneList = curl_exec($cURLConnection);
curl_close($cURLConnection);
$dateResponse = json_decode($phoneList);
// cURL end

$holidays = array(); //declear holidays array`enter code here`
for ($i=0;$i<count($dateResponse->holidays);$i++){
    $holidays[] = $dateResponse->holidays[$i]->date;  //inserting holidays in array from api
}

$startDate = "2020-02-26";  //insert value thats you prefer
$timestamp  = strtotime($startDate);  // convert date to time
$weekends = array("Friday", "Saturday");
$days = 0;  //initialization days counter

while (1){  //
    $timestamp = strtotime("+1 day", $timestamp); //day increment
    if ( (in_array(date("l", $timestamp), $weekends)) || (in_array(date("Y-m-d", $timestamp), $holidays)) ) //checking weekends and holidays
    {
        continue;
    }else{
        $days++;``
        if($days >= 5){  //interval - What will be the working days after 5 days
            echo date("Y-m-d", $timestamp); // print expected output
            break;
        }
    }
} 
```

输入：2020-02-26 输出：2020-03-05

# sql-server - 如何使用两个主键将行插入表中？

> ID：11130391
> 
> 赞同：1
> 
> 时间：2012-06-21T01:25:05.240
> 
> 标签：sql-server

我创建了下表：

```
CREATE TABLE [dbo].[tblArchLogDetail](
    [RecordID] [numeric](18, 0) NOT NULL,
    [TableName] [varchar](30) NOT NULL,
    [TotalRecords] [int] NULL,
    [ArchivedRecords] [int] NULL,
 CONSTRAINT [PK_tblArchLogDetail] PRIMARY KEY CLUSTERED 
(
    [RecordID] ASC,
    [TableName] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

那么，如何在该表中插入行呢？我不断收到错误“违反主键约束”。这是我的示例代码：

```
Insert into tblArchLogDetail values(54,'tblAuditLogin',13128,0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T19:25:31.843

您在这里拥有的是所谓的“复合”主键。

这意味着您选择组成复合主键的任何值组合都必须是唯一的**。**

您收到的错误仅意味着您已经在该表中有一条记录，其 RecordId 为 54，TableName 为“tblAuditLogin”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T18:26:37.323

我*认为*您要做的是在`RecordID`字段中添加一个自动递增的整数。如果是这样，请将其设为身份字段：

```
CREATE TABLE [dbo].[tblArchLogDetail](
    [RecordID] [numeric](18, 0) IDENTITY NOT NULL,
    [TableName] [varchar](30) NOT NULL,
    [TotalRecords] [int] NULL,
    [ArchivedRecords] [int] NULL,
 CONSTRAINT [PK_tblArchLogDetail] PRIMARY KEY CLUSTERED 
(
    [RecordID] ASC,
    [TableName] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

如果这不是您的意图，并且您确实希望在`RecordID`and`TableName`中重复记录，请在 RecordID 之前放置一个标识字段并将其添加到 PRIMARY KEY 约束：

```
CREATE TABLE [dbo].[tblArchLogDetail](
    [ID] [bigint] IDENTITY NOT NULL
    [RecordID] [numeric](18, 0) NOT NULL,
    [TableName] [varchar](30) NOT NULL,
    [TotalRecords] [int] NULL,
    [ArchivedRecords] [int] NULL,
 CONSTRAINT [PK_tblArchLogDetail] PRIMARY KEY CLUSTERED 
(
    [ID] ASC,
    [RecordID] ASC,
    [TableName] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

如果这两种解决方案都不能解决问题，那么您需要回答此问题的其他详细信息。

# android - 使用 Uri.parse 将字符串转换为 android.net.Uri 是否有效？

> ID：11130393
> 
> 赞同：3
> 
> 时间：2012-06-21T01:25:06.577
> 
> 标签：android, string, uri

我有一个字符串形式的 uri，我需要从中正确获取路径。因为我有一个函数可以正确地从 android.net.Uri 对象中删除查询参数，所以我想简单地将我的字符串路径转换为 ​​uri。

Uri.parse 是将字符串转换为 uri 的有效方法吗？我看过一些例子，但没有一个真正解释这是否是一种有效的方法，或者是否必须进行任何额外的解析。

我已经看过这个链接[How to convert a String to an android.net.Uri](https://stackoverflow.com/questions/3885152/how-to-convert-a-string-to-an-android-net-uri)但它并没有真正回答我的问题。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T01:28:29.540

是的，你想使用`Uri.parse(String)`. 例如，

```
Uri uri = Uri.parse("content://com.example.provider.NotePad/notes/10"); 
```

要获得最后一段，您可以使用

```
// id == "10"
String id = uri.getLastPathSegment(); 
```

要获得倒数第二个段，您可以使用

```
// notes == "notes"
String notes = uri.getPathSegments().get(0); 
```

# android - 某个国家/地区的 Android 应用本地化

> ID：11130399
> 
> 赞同：0
> 
> 时间：2012-06-21T01:26:26.763
> 
> 标签：android, google-play

android 市场允许开发人员自定义标题、大约十几种语言的描述。现在，Google 如何决定为哪个国家/地区显示哪些语言？

其中一些是直截了当的——比如在美国或澳大利亚使用英语。但是法国的法语和英语选项怎么样？还是西班牙的西班牙语或英语？使用的默认语言是什么？

我不知道它是在哪里指定的，如果是这样的话。任何线索表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T01:32:59.010

它使用设置=>语言和键盘中指定的操作系统语言。例如，我在日本有一部手机，可以同时使用英语和日语。我可以看到不同的描述。当我切换语言时，Google Play 中的标题等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T02:48:20.360

![在此处输入图像描述](../Images/ab1f9381456d76ee07014fe891211dda.png)

有关更多信息，请参阅此[链接中](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)**的 Android 如何找到最佳匹配资源部分**

# javascript - 动画方法在 Chrome 中不起作用

> ID：11130403
> 
> 赞同：0
> 
> 时间：2012-06-21T01:27:09.087
> 
> 标签：javascript, google-chrome, animation, raphael, jquery-animate

```
function swap(fromTo, toFrom)
{
    var temp = blocks[fromTo];
    var templabel = BlockLabels[fromTo];

    blocks[fromTo].animate({ x: blocks[toFrom].X }, 1500, ">");
    BlockLabels[fromTo].animate({ x: BlockLabels[toFrom].X }, 1500, ">");

    blocks[toFrom].animate({ x: temp.X }, 1500, ">");
    BlockLabels[toFrom].animate({ x: templabel.X }, 1500, ">"); 
} 
```

此交换功能在 IE9 中有效，但在 Chrome 中无效。我正在使用 Raphael2.0

更新： http: [//jsfiddle.net/ZgEty/](http://jsfiddle.net/ZgEty/) chrome 和 safari 无法正常工作，但 IE9 可以

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:36:36.890

啊...这是您访问 x 的方式，就好像它是一个对象属性一样。试试这个：

```
blocks[fromTo].animate({ x: blocks[toFrom].attr( 'x' ) }, 1500, ">");
BlockLabels[fromTo].animate({ x: BlockLabels[toFrom].attr( 'x' ) }, 1500, ">");

blocks[toFrom].animate({ x: temp.attr( 'x' ) }, 1500, ">");
BlockLabels[toFrom].animate({ x: templabel.attr( 'x' ) }, 1500, ">"); 
```

我也[叉了你的小提琴](http://jsfiddle.net/kevindivdbyzero/95tmh/)。

# php - 通过PHP获取核心文件的GDB回溯

> ID：11130408
> 
> 赞同：1
> 
> 时间：2012-06-21T01:28:32.613
> 
> 标签：php, gdb

我正在尝试通过 PHP 从 GDB 获取 GDB 回溯输出。我想使用 system() 来调用“gdb /path/to/application /path/to/corefile”，但是我需要在 GDB 中运行“backtrace”。

有没有办法通过 PHP 执行程序，然后在该程序运行时在该程序中运行命令？我愿意接受其他方式来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T02:04:16.120

我还没有尝试过，但是您可以为此使用 tty 功能。

gdb 有一个 -tty 参数，它接受标准输入的输入 - 所以棘手的部分是让 PHP 编写。PHP手册中的某个人提供了一个可以满足您需要的功能：[http ://www.php.net/manual/en/ref.readline.php#38022](http://www.php.net/manual/en/ref.readline.php#38022)

抱歉，如果它不正确，但鉴于没有任何其他答案，这就是我要尝试的。

* * *

编辑：另一个想法。proc_open 应该做你想做的事：[http ://www.php.net/manual/en/function.proc-open.php](http://www.php.net/manual/en/function.proc-open.php)

# asp.net - 返回 false 不会取消 asp.net 回发

> ID：11130410
> 
> 赞同：1
> 
> 时间：2012-06-21T01:28:47.313
> 
> 标签：asp.net

我很困惑为什么这个 return false 不会取消回发。

```
 function validate() {
         return false;
        }

 <asp:Button ID="Button1" type="submit" OnClientClick="validate();" runat="server" Text="send"  /> 
```

最疯狂的部分是下面的代码确实取消了回发，但我需要在上面的函数中发生这种情况：

```
 <asp:Button ID="Button1" type="submit" OnClientClick="return false;" runat="server" Text="send" style="margin-right:150px;" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T01:38:32.930

尝试从你的函数返回值，像这样

```
<asp:Button ID="Button1" type="submit" OnClientClick="return validate();" runat="server" Text="send"  /> 
```

否则，您只是在执行一个返回布尔值的 javascript 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T01:37:25.543

尝试使用这个

```
 <input type"button" id="Button1" onclick="validate();"> 
```

如果您不需要回发，则不需要 asp:Button

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T06:18:43.123

对于那些在AJAX PostBack中使用其内部的人来说*，Jonas Persson*的答案有一点额外：当 a被渲染时，onclick 属性看起来像`Button``UpdatePanel``Button`

```
<input ...  onclick="OnClientClick_property; generated_ajax_postback();" /> 
```

为确保`generated_ajax_postback();`执行，您必须执行`OnClientClick_property`以下操作：`if (!validate) return false;`

否则它将返回`true`，并且根本不回发。

# sql - 不存在的地方不工作 SQL Server 2008

> ID：11130419
> 
> 赞同：0
> 
> 时间：2012-06-21T01:30:07.400
> 
> 标签：sql, sql-server-2008

![在此处输入图像描述](../Images/b65cef6bd6e09ffb3ef4ec035c8aa78e.png)

这是与此相关的问题，[但](https://stackoverflow.com/questions/11127684/not-in-query-not-working-sql-server-2008)使用 EXISTS 而不是 IN

```
SELECT distinct  Patient.patientid
FROM Patient P
JOIN patientICD pICD 
  ON P.patientid = pICD.patientid
  AND P.admissiondate = pICD.admissiondate
  AND P.dischargedate = pICD.dischargedate
JOIN tblICD 
  ON pICD.primarycode = tblICD.ICD_ID
WHERE  tblICD.descrip LIKE N'%diabetes%'
  AND patient.patientID not in (
         SELECT distinct Patient.patientid
         FROM Patient P
         JOIN patientICD pICD 
           ON P.patientid = pICD.patientid
           AND P.admissiondate = pICD.admissiondate
           AND P.dischargedate = pICD.dischargedate
         JOIN tblICD ON pICD.primarycode = tblICD.ICD_ID
         WHERE tblICD.icd_id =N'25000'
  ) 
```

此查询工作正常，但是当我尝试将另一个字段添加到我必须使用的选择表达式时`WHERE EXISTS`，以下查询返回 0 结果，而上述查询返回 130。我正在尝试将 tblicd.icd_id 字段添加到结果中从第一个查询设置，我做错了什么。

```
SELECT DISTINCT  Patient.patientid, tblicd.icd_id
FROM Patient
INNER JOIN patientICD 
  ON Patient.patientid = patientICD.patientid 
  AND Patient.admissiondate = patientICD.admissiondate 
  AND Patient.dischargedate = patientICD.dischargedate 
INNER JOIN tblICD 
  ON patientICD.primarycode = tblICD.ICD_ID
WHERE tblICD.descrip LIKE N'%TextOfNote%'
  and not exists (
      SELECT DISTINCT Patient.patientid, tblicd.icd_id
      FROM Patient
      INNER JOIN patientICD
        ON Patient.patientid = patientICD.patientid 
        AND Patient.admissiondate = patientICD.admissiondate 
        AND Patient.dischargedate = patientICD.dischargedate 
      INNER JOIN tblICD 
        ON patientICD.primarycode = tblICD.ICD_ID
      WHERE tblICD.icd_id = N'25000'
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T01:52:50.600

我没有针对你的架构运行这个，但试试这个

**编辑...**

```
SELECT DISTINCT  Patient.patientid, tblicd.icd_id
FROM Patient 
    INNER JOIN patientICD 
        ON Patient.patientid = patientICD.patientid 
        AND Patient.admissiondate = patientICD.admissiondate 
        AND Patient.dischargedate = patientICD.dischargedate 
    INNER JOIN tblICD 
        ON patientICD.primarycode = tblICD.ICD_ID
WHERE tblICD.descrip LIKE N'%TextOfNote%'
    AND tblICD.icd_id <> N'25000' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T01:55:25.380

您有两个患者，patentICD，tblICD 在这里发挥作用.. 一个在主查询中，另一个在“不存在”中。尝试使用表别名。

```
SELECT X FROM TABLEA A
INNER JOIN TABLEB B
  ON A.ID = B.ID 
```

您必须在“不存在”中引用主查询...密切注意“ON”连接条件和 where 子句。

```
WHERE     (tblICD.descrip LIKE N'%TextOfNote%') and not exists
(
SELECT    DISTINCT Patient.patientid, tblicd.icd_id
FROM         Patient INNER JOIN
 patientICD ON Patient.patientid = patientICD.patientid AND Patient.admissiondate = patientICD.admissiondate AND 
                      Patient.dischargedate = patientICD.dischargedate INNER JOIN
                      tblICD ON patientICD.primarycode = tblICD.ICD_ID
WHERE     (tblICD.icd_id = N'25000')
) 
```

# java - Java子字符串不起作用

> ID：11130422
> 
> 赞同：2
> 
> 时间：2012-06-21T01:30:46.843
> 
> 标签：java, string

原谅我，我是 Java 新手，有一个非常基本的问题。我有一个字符串并想要它的子字符串，例如：

```
String str = "hello";
str.substring(1);
System.out.println(str); 
```

而不是让`"ello"`我得到原件`"hello"`，知道为什么会这样吗？谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-21T01:32:15.843

Java 中的字符串是不可变的。我相信你想这样做：

```
String str = "hello";
str = str.substring(1);
System.out.println(str); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-21T01:33:36.000

字符串不能在 Java 中更改，因此您需要重新分配子字符串：

```
str = str.substring(1) 
```

而不是自己调用方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T01:32:18.607

您没有保存对字符串所做的更改。

```
str=str.substring(1); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T01:33:41.177

您需要将子字符串保存到一个新变量中（如果您愿意，也可以是旧变量）。这样的事情应该可以解决问题：

```
String str = "hello";
String strSub = str.substring(1);
System.out.println(strSub); 
```

对于阅读这篇文章的人，请记住 substring(1) 表示从 char 1 开始获取子字符串，一直到字符串的末尾。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-21T06:23:44.363

可以直接放在*.println(..)*

```
String str = "hello";
System.out.println(str.substring(1)); 
```

但*str*将保持不变。

# c# - 请求速度

> ID：11130423
> 
> 赞同：0
> 
> 时间：2012-06-21T01:30:57.357
> 
> 标签：c#, multithreading, task, parallel.foreach

我有代码通过两个并行为每个循环发送 Web 请求。在此方法发生之前添加线程会导致这些任务的执行延迟，还是会实现更多的 Web 请求？

```
 for (int i = 0; i < threads; i++)
            {
                populateClient(ServerID, debugLog, type, mC);
                tasks[i] = Task.Factory.StartNew(() =>
                {
                   testMaps(ServerID, DebugLog, Type, mC.cl, mC.keywords, mC.locations);
                });
            }
            while (tasks.Any(t => !t.IsCompleted)) { } //spin wait 
```

//...

```
 static void testMaps(Int64 serverID, String debugLog, String type, ClientInfo cl,
        List<Keyword> keywords,
        List<String> locations)
    {
        Parallel.ForEach(keywords, keyword =>  
        {
            Parallel.ForEach(locations, location =>
           {
           strFileName = file.DownloadString(query); 
```

//..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:31:34.567

你的程序很好。像这样的 I/O 可以以较高的并行度并行运行，因此启动许多任务，无论是显式的还是直通`Parallel.ForEach`的都不是问题。该实现通常会很好地管理它们并且不会导致不必要的开销，因为它基于底层线程池。

# sql - 如何在 Visual Studio 2010 > SQL 2012 数据库项目中保存比较选项

> ID：11130424
> 
> 赞同：0
> 
> 时间：2012-06-21T01:31:00.680
> 
> 标签：sql, compare, schema, project

一直在 VS 2010 中使用新的 SQL 2012 数据工具 > SQL Server 数据库项目。每次我们进行模式比较时，我们都必须设置当前比较的选项。这似乎与您可以在“工具”>“选项”中设置的全局比较选项无关。有谁知道在哪里设置“新”全局比较选项。

注意：这是来自 Data Tools 的*新*SQL 2012 比较，而不是Studio 2010 标配的*旧2005/2008 比较。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T23:01:17.937

如果不保存模式比较本身，这似乎是不可能的，即它不能在全局/模板级别上设置。我通常只是手动打开比较选项并取消选中“阻止可能的数据丢失”和“忽略文件组放置”。

# file - Ubuntu中的分布式文件系统

> ID：11130432
> 
> 赞同：1
> 
> 时间：2012-06-21T01:32:23.623
> 
> 标签：file, ubuntu, system, distributed

我将解释我想要实现的目标。我想要的可能没有被正确地描述为分布式文件系统。

我们有 5 个人在运行 Ubuntu 12.04。我们每个人都有大约 200-500GB 的文件要不时共享。每个工作站都拥有文件的所有权。有时我们想共享文件。我还希望一个工作站能够在另一个工作站上编辑文件。

我想做的是拥有一个统一的分布式文件系统，这样如果我们转到统一的文件系统路径，它将列出来自每个工作站的所有文件。

我知道可以创建网络共享来实现类似的结果。这有一个问题，它要求用户检查每个共享是否有适当的文件。

我宁愿创建一个显示所有共享文件的统一共享，然后重定向到适当的计算机。

例如 cd /unifiedshare ls 会将用户带到最高级别的目录并显示来自 5 台不同计算机的所有共享文件

cd /unifiedshare/comp1 ls 将列出 comp1 共享的所有文件

我查看了一些分布式文件系统，例如 Chirp，它似乎不是我想要的。我不希望跨服务器/计算机保存文件。我宁愿让 comp1 拥有的文件留在 comp1 上。

我不太担心访问控制或限制。我们都在同一栋楼里。建议？

我确实通过类似的问题找到了这一点，但还没有机会阅读它。[http://www.openafs.org/main.html](http://www.openafs.org/main.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T01:48:36.697

还有[Unionfs](http://www.filesystems.org/project-unionfs.html)。每个人都会提供他们文件的 NFS 导出。然后，您将使用 Unionfs 加入它们，然后像​​任何[其他文件系统](http://www.linuxjournal.com/article/7714)一样挂载它：

```
mount -t unionfs -o dirs=/Mine:/His:/Yours:/Theirs none /mnt/everyones 
```

在前面提到的多个 README 的情况下，/Mine/README 将是存在的，因为 /Mine 是第一个列出的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T01:42:53.047

我建议寻找其中一台机器的 NFS 共享。

或者，使用诸如[unison](http://www.cis.upenn.edu/~bcpierce/unison/)之类的软件，您可以设置一个类似于 Dropbox 的客户端-服务器系统，其中每个文件都有共享文件的副本同步到一个中心位置并返回到每个客户端。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T01:43:17.360

如果最大的问题是知道五个工作站中的哪一个具有您有兴趣编辑的文件，那么解决该问题的最简单方法可能是巧妙地使用`locate(1)`和`updatedb(8)`程序。

让每台机器`updatedb(8)`在自己的一组导出文件上运行；使用该`-U`选项构建仅包含导出文件`-o`的数据库并将数据库输出到顶级导出目录。例如`cron`，通过 重建这些。`/etc/cron.daily/`

让每台机器上的每个用户`LOCATE_PATH`在他们的 shell 中设置环境变量，以引用所有五台机器导出的*每个数据库。*然后每个用户可以简单地运行`locate README`以查找`README`所有五台机器上命名的每个文件。

# php - jQuery 执行 PHP MySQL 查询

> ID：11130433
> 
> 赞同：2
> 
> 时间：2012-06-21T01:32:31.757
> 
> 标签：php, jquery, mysql, ajax

这就是我所拥有的。我正在尝试让 jquery 运行 mysql 查询。

这是我的PHP：

```
<select name="kingdom" id="kingdom" >
    <option value="standard">-- Kingdom --</option>
        <?php
            $the_d = $_POST['d'];
            $filter = mysql_query("SELECT DISTINCT sci_kingdom FROM tbl_lifedata WHERE sci_domain = '$the_d'");
                while($row = mysql_fetch_array($filter, MYSQL_NUM))
                    {
                        $row['name'];
                        //echo "<option value='$row[0]'>$row[0]</option>";
                    }
        ?>
</select> 
```

还有我的 jQuery：

```
$('#domain').change(function () {

    var selectval = $('#domain').val();

    $.post("search.php", {
        d: selectval
    }, function (data) {
        $('.result').html(data);
    });
}); 
```

现在我只想让 jQuery 吐出 mysql 结果的值。当我有这个工作时，我可以让他们填充一个选择框。我现在得到的是 search.php 的 html，但与 mysql 查询无关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T01:36:36.700

您实际上应该打印从数据库中检索的内容。

```
<select name="kingdom" id="kingdom" >
                <option value="standard">-- Kingdom --</option>
                <?php 
                $the_d = mysql_real_escape_string($_POST['d']);//thanks to @Mansfield
                $filter = mysql_query("SELECT DISTINCT sci_kingdom FROM tbl_lifedata WHERE sci_domain = '".$the_d."'");
                while($row = mysql_fetch_array($filter, MYSQL_NUM))
                {
                    echo "<option value='$row[0]'>$row[0]</option>";

                }

                ?>
            </select>

 //or you can also use mysql_fetch_array($filter, MYSQL_ASSOC) if you want to print $row['name'] 
```

更新的答案：

```
<script src="jquery.min.js"></script>
<input type='text' class="domain" id="domain"/>
<div class="result" id="result"></div>
<script>
$('#domain').change(function() {

            var selectval = $('#domain').val();

            $.post(
                "test.php", 
                { d : selectval },
                function(data) {
                    $('.result').html(data);//my bad should be displaying data retrenched
                }
                );
});
</script>

///test.php contents:

<?php
print $the_d = mysql_real_escape_string($_POST['d']);// see if the scripts are working fine until here, if so, then see below.
//test your mysql result by doing a print_r($row.)    
?> 
```

**发布 print_r($row) 的结果；**

# python - 谷歌应用引擎的顶级用户认证方法

> ID：11130434
> 
> 赞同：1
> 
> 时间：2012-06-21T01:32:33.530
> 
> 标签：python, google-app-engine, jinja2, authentication

易于实施是一个重要因素，但安全性也是一个问题谷歌应用引擎的最佳用户身份验证方法是什么？我的目标是拥有一个非常具体的小型社交网络。我知道如何自己做，但现在让它防黑客有点不合我意。我看过 OpenID 和其他一些。

我使用 Jinja2 作为我的模板系统并用 python 编写我所有的网络应用程序代码。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T06:03:08.630

您的选择是 Google 自己的身份验证、OpenID、一些第三方解决方案或您自己的解决方案。除非您*真的*知道自己在做什么，否则不要选择选项 4！身份验证非常复杂，如果您犯了一个错误或遗漏，您就会面临很多痛苦。选项 3 不是很好，因为你必须确保作者真的知道他们在做什么，这要么意味着信任他们，要么......真的知道你在做什么！

所以我建议您在 Google 的身份验证和 OpenID 之间进行选择。两者都值得信赖；Google 将更容易实施，因为您必须针对多个 OpenID 帐户提供程序进行测试；但是谷歌认证可能会拒绝一些拒绝拥有谷歌账户的用户。

# sql - SQL 计数 (*) 性能

> ID：11130448
> 
> 赞同：43
> 
> 时间：2012-06-21T01:33:36.397
> 
> 标签：sql, sql-server, performance, count

我有一个超过 2000 万行的 SQL 表 BookChapters。它有一个聚集的主键 (bookChapterID)，没有任何其他键或索引。运行以下查询需要几毫秒

```
if (select count(*) from BookChapters) = 0
... 
```

但是，像这样更改它需要10多分钟

```
if (select count(*) from BookChapters) = 1
... 
```

或者

```
if (select count(*) from BookChapters) > 1
... 
```

这是为什么？我怎样才能`select count(*)`更快地执行？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-06-21T02:01:12.267

Mikael Eriksson 很好地解释了为什么第一个查询很快：

SQL server 将其优化为： `if exists(select * from BookChapters)`. 所以它会寻找一行的存在，而不是计算表中的所有行。

对于其他两个查询，SQL Server 将使用以下规则。要执行类似的查询`SELECT COUNT(*)`，SQL Server 将使用最窄的 **非聚集**索引来计算行数。如果表没有任何非聚集索引，则必须扫描表。

此外，如果您的表具有**聚集**索引，您可以使用以下查询更快地获得计数（借自此站点[Get Row Counts Fast！](http://dbatipster.blogspot.com/2009/08/get-row-counts-fast.html)）

```
--SQL Server 2005/2008
SELECT OBJECT_NAME(i.id) [Table_Name], i.rowcnt [Row_Count]
FROM sys.sysindexes i WITH (NOLOCK)
WHERE i.indid in (0,1)
ORDER BY i.rowcnt desc

--SQL Server 2000
SELECT OBJECT_NAME(i.id) [Table_Name], i.rows [Row_Count]
FROM sysindexes i (NOLOCK)
WHERE i.indid in (0,1)
ORDER BY i.rows desc 
```

它使用 sysindexes 系统表。您可以在此处找到更多信息[SQL Server 2000](http://msdn.microsoft.com/en-us/library/aa260413%28v=sql.80%29.aspx)、[SQL Server 2005](http://msdn.microsoft.com/en-us/library/ms173760%28v=sql.90%29.aspx)、[SQL Server 2008](http://msdn.microsoft.com/en-us/library/ms173760%28v=sql.100%29.aspx)、[SQL Server 2012](http://msdn.microsoft.com/en-us/library/ms173760.aspx)

这是另一个链接[为什么我的 SELECT COUNT(*) 运行这么慢？](http://itknowledgeexchange.techtarget.com/sql-server/why-is-my-select-count-running-so-slow/)用另一种解决方案。它显示了 Microsoft 用来在您右键单击表格并选择属性时快速显示行数的技术。

```
select sum (spart.rows)
from sys.partitions spart
where spart.object_id = object_id(’YourTable’)
and spart.index_id < 2 
```

您应该会发现无论您有多少张桌子，它都会很快返回。

如果您使用的是 SQL 2000，您仍然可以使用 sysindexes 表来获取数字。

```
select max(ROWS)
from sysindexes
where id = object_id(’YourTable’) 
```

根据 SQL 更新 sysindexes 表的频率，这个数字可能略有偏差，但它通常是正确的（或至少足够接近）。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-08-01T06:16:18.100

如果你只想知道行数，试试这个：

```
exec sp_spaceused [TABLE_NAME] 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-21T06:00:30.347

如果您查看查询的执行计划，您会看到发生了什么。

查询优化器将您的第一个查询`if (select count(*) from BookChapters) = 0`识别为与`if exists(select * from BookChapters)`. SQL Server 知道如果至少存在一行，则表达式为真，因此它会查找是否存在一行，而不是计算表中的所有行。

对于您的其他查询，它不可能那么聪明，并且必须先计算表中的行数，然后才能确定表达式的计算结果是真还是假。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-21T01:39:11.637

你考虑过查询`select count(BookChapterId) from BookChapterTable` 吗？- 其中 `BookChapterId**是非聚集索引**。这应该使它运行得更快。

根据表的使用方式和行的访问方式，查询非聚集索引可能是关键点：我只是从 MDSN 中获取了一些要点：

*   在创建非聚集索引之前，了解您的数据将如何被访问。考虑将非聚集索引用于：
*   包含大量不同值的列，例如
    姓氏和名字的组合（如果聚集索引用于其他列）。如果只有很少的不同值，例如
    只有 1 和 0，大多数查询将不会使用索引，因为表
    扫描通常更有效。
*   不返回大型结果集的查询。
*   返回完全匹配的查询（WHERE 子句）的搜索条件中经常涉及的列。
*   经常需要连接和分组的决策支持系统应用程序。在涉及连接和分组操作的列上创建多个非聚集索引，并在任何外键列上创建一个聚集索引。
*   覆盖给定查询中一个表的所有列。这完全消除了对表或聚集索引的访问。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-01-14T09:57:30.787

试试这个，如果你需要检测，如果表的行多于一个：

```
if (SELECT COUNT(*) FROM (SELECT TOP 2 * FROM BookChapters) AS b) > 1 
```

# java - 方法 java.util.ArrayList.add(int,java.lang.Float) 不适用

> ID：11130454
> 
> 赞同：0
> 
> 时间：2012-06-21T01:34:25.237
> 
> 标签：java, floating-point, arraylist

我想通过该方法`float`为 a 添加一个值。但是，我收到此错误...`float` `ArrayList``.add()`

```
no suitable method found for add(double)
method java.util.ArrayList.add(int,java.lang.Float) is not applicable
  (actual and formal argument lists differ in length)
method java.util.ArrayList.add(java.lang.Float) is not applicable
  (actual argument double cannot be converted to java.lang.Float by method invocation conversion) 
```

这是我的代码...

```
class Exercise {
    public static void main(String[] args) {
        ArrayList<Float> floatList = new ArrayList<Float>();
        floatList.add(10.0);
        floatList.add(15.5);
        floatList.add(18.0);
        floatList.add(29.5);
        floatList.add(45.5);

        for(Float num : floatList){
            System.out.println("\n"+ num);
        }
    }
} 
```

有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T01:36:38.443

默认情况下，java 将使用`double`精度，如果你想提供浮点数，你必须这样做：

```
ArrayList<Float> floatList = new ArrayList<Float>();
floatList.add(10.0f);
floatList.add(15.5f);
floatList.add(18.0f);
floatList.add(29.5f);
floatList.add(45.5f); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T01:38:06.633

这是因为 ArrayList 只能保存 Objects 而不是原语。请记住，诸如 int、float、boolean 等之类的东西被称为原语，它们与对象不同。为了让它工作，把你的浮动放入一个浮动包装器中：

浮动 myFloat = new Float(15.0f);

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-21T01:40:02.223

```
 import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;
import java.util.ArrayList;
import java.util.logging.Level;
import java.util.logging.Logger;
import org.apache.commons.lang.math.NumberUtils;

/**
 *
 * @author electric grasshoper
 */
public class qweqweqweqwe {

    public static void main(String[] args) {
        //Float floatList;
        ArrayList<Float> floatList = new ArrayList<Float>();
        floatList.add(10.0f);
        floatList.add(15.5f);
        floatList.add(18.0f);
        floatList.add(29.5f);
        floatList.add(45.5f);

        for(Float num : floatList){
            System.out.println("\n"+ num);
        }
  }
} 
```

# c# - MS Access 更新记录

> ID：11130457
> 
> 赞同：0
> 
> 时间：2012-06-21T01:34:57.780
> 
> 标签：c#, database, ms-access-2007

我正在尝试更新“组”列与参数匹配的 Access 数据库中的记录。

我目前使用的方法如下：

```
public void RenameGroup(string oldName, string newName)
{
    OpenConnection();
    command.Connection = con;
    command.CommandText = "Update [Data] SET [Group] = ? WHERE [Group] = ?";
    command.Parameters.Add("@oldName", OleDbType.Char).Value = oldName;
    command.Parameters.Add("@newName", OleDbType.Char).Value = newName;
    command.ExecuteNonQuery();
    CloseConnection();
} 
```

在这种情况下，我假设我正在尝试更新我正在迭代的同一列，并且我需要首先使用 Select 查询，只是不确定什么是正确的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T01:36:42.113

您没有在查询中提供参数。

尝试：

```
command.CommandText = "Update [Data] SET [Group] = @newName WHERE [Group] = @oldName"; 
```

# android - 从多个活动（Android）中调用信息的最佳方法是什么？

> ID：11130458
> 
> 赞同：0
> 
> 时间：2012-06-21T01:35:12.247
> 
> 标签：android, database, variables, android-activity

我正在为 Android 平台制作游戏，我需要从多个活动（成就、声音开/关等）中访问一些信息。我知道我可以将单个值从一个活动传递到另一个活动，但是有没有一种方法可以像数据库一样设置，或者我可以从任何活动中访问变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T01:44:37.853

是的，您可以使用 SQLite 来持久化数据。还有其他选择：http: [//developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)这真的取决于数据的复杂程度。另一种方法是在活动之间以 Serializable 或 Parcelable 对象的形式传递数据，但如果您希望能够从任何活动中重新查询数据，您将需要一个 sqlite db 或某种机制来序列化数据并将其写入磁盘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T01:46:38.057

这取决于您的应用程序要求。通常，数据通过“作为意图的一部分发送的额外内容”在 2 个活动之间共享

如果您想在多个活动之间共享数据，那么您可以使用，1\. 首选项 - 使用应用程序首选项（存储在应用程序目录中的 XML 文件） 2\. 数据库 - 使用 Android 内容提供程序/解析器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T03:55:58.207

有很多方法可以实现这一目标。您可以设置 SQLite 数据库、使用 SharedPreferences 或结合使用 startActivityForResult() 和 Intent。如果您想研究它们，所有这些都在开发者网站中有详细记录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-08T15:48:29.047

您可以使用共享偏好作为简单的方法来执行此操作。

文档说：

> SharedPreferences 类提供了一个通用框架，允许您保存和检索原始数据类型的持久键值对。您可以使用 SharedPreferences 保存任何原始数据：布尔值、浮点数、整数、长整数和字符串。此数据将在用户会话中持续存在（即使您的应用程序被终止）。

以下是文档中的代码：

```
public class Calc extends Activity {
    public static final String PREFS_NAME = "MyPrefsFile";

    @Override
    protected void onCreate(Bundle state){
       super.onCreate(state);
       . . .

       // Restore preferences
       SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
       boolean silent = settings.getBoolean("silentMode", false);
       setSilent(silent);
    }

    @Override
    protected void onStop(){
       super.onStop();

      // We need an Editor object to make preference changes.
      // All objects are from android.context.Context
      SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
      SharedPreferences.Editor editor = settings.edit();
      editor.putBoolean("silentMode", mSilentMode);

      // Commit the edits!
      editor.commit();
    }
} 
```

对于其他存储数据的方法，在 android 网站上有非常好的教程 - [http://developer.android.com/guide/topics/data/index.html](http://developer.android.com/guide/topics/data/index.html)

# casting - 将保留关联映射顺序的 Clojure 宏

> ID：11130460
> 
> 赞同：6
> 
> 时间：2012-06-21T01:35:39.380
> 
> 标签：casting, macros, clojure, hashmap, associative-array

作为序言，我在 Windows 7（64 位）上，使用[clooj](https://github.com/arthuredelstein/clooj)作为我的 IDE 运行 Java 版本 6（更新 33）。我没有尝试在任何其他系统中重现我的问题。我对 Clojure 有经验，但对 Java 完全没有。

我试图解决的整个问题描述起来很长，但归结为：假设我想做一个宏，它接受一个参数，一个关联映射，并返回一个元素的向量保留其顺序的地图。

```
=>(defmacro vectorize-a-map
    [associative-map]
    (vec associative-map))
=>#'ns/vectorize-a-map
=>(vectorize-a-map {:a 1 :b 2 :c 3 :d 4 :e 5 :f 6 :g 7 :h 8}
=>[[:a 1] [:b 2] [:c 3] [:d 4] [:e 5] [:f 6] [:g 7] [:h 8]] 
```

那行得通，但是向地图添加另一个元素并且顺序混乱了...

```
=>(vectorize-a-map {:a 1 :b 2 :c 3 :d 4 :e 5 :f 6 :g 7 :h 8 :i 9}
=>[[:a 1] [:c 3] [:b 2] [:f 6] [:g 7] [:d 4] [:e 5] [:i 9] [:h 8]] 
```

我相信我已经发现了为什么会发生这种情况。似乎任何具有 8 个或更少元素的东西都被实例化为 PersistentArrayMap，这正是我想要的，因为据我所知，这个类保留了顺序。但是，任何具有 9 个或更多元素的东西都会被实例化为不保留顺序的 PersistentHashMap。

```
=>(type {:a 1 :b 2 :c 3 :d 4 :e 5 :f 6 :g 7 :h 8}
=>clojure.lang.PersistentArrayMap
=>(type {:a 1 :b 2 :c 3 :d 4 :e 5 :f 6 :g 7 :h 8 :i 9}
=>clojure.lang.PersistentHashMap 
```

我希望我的宏能够获取任何大小的关联地图，所以这是一个问题。我尝试过类型提示、解构绑定、**列表**理解和取消引用拼接，但都没有成功。要画出来，以下任何方法都不起作用：

```
(defmacro vectorize-a-map
  [^clojure.lang.PersistentArrayMap associative-map]
  (vec associative-map))

(defmacro vectorize-a-map
  [[& associative-map]]
  (vec associative-map))

(defmacro vectorize-a-map
  [associative-map]
  (vec
    (for [x associative-map]
      x)))

(defmacro vectorize-a-map
  [associative-map]
  `(vector ~@associative-map)) 
```

对于我提出的这个玩具问题，我意识到我可以像这样简单地编写我的宏，并完全避免这个问题：

```
=>(defmacro vectorize-kvs
    [& elements]
    (vec (map vec (partition 2 elements))))
=>#'ns/vectorize-kvs
=>(vectorize-kvs :a 1 :b 2 :c 3 :d 4 :e 5 :f 6 :g 7 :h 8 :i 9)
=>[[:a 1] [:b 2] [:c 3] [:d 4] [:e 5] [:f 6] [:g 7] [:h 8] [:i 9]] 
```

然而，对于我试图解决的*实际*问题（我还没有涉及），宏能够采用关联映射是很重要的（尽管不是 100% 必要）。似乎我正在寻找如何在任何事情发生之前将参数转换为 PersistentArrayMap 。可能还有其他一些我根本没有考虑或不知道的解决方案的途径。

我已经研究了我所知道的最好的方法，但还没有发现任何有用的东西。有人有什么想法/建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T01:44:48.180

你可以用array-map制作你的地图

```
user> (map vec (array-map 1 2 3 4 5 6))
([1 2] [3 4] [5 6]) 
```

或使用更大的地图

```
user> (map vec (apply array-map (range 50)))
([0 1] [2 3] [4 5] [6 7] [8 9] [10 11] [12 13] [14 15] [16 17] [18 19] [20 21] [22 23] [24 25] [26 27] [28 29] [30 31] [32 33] [34 35] [36 37] [38 39] [40 41] [42 43] [44 45] [46 47] [48 49]) 
```

作为奖励，您可以避免使用宏，这很有用，因为宏不是一流的并且组合不好*

* * *

关于[数组映射文档中您的第一条评论的注释](http://clojure.org/data_structures#Data%20Structures-ArrayMaps)

```
请注意，数组映射仅在未“修改”时才会保持排序顺序。
 随后的关联最终将导致它“成为”哈希映射。
```

如果您发现自己取决于地图中键的顺序，您可能需要考虑是否`sorted-map`可以满足您的需求。它将比`array-map`. 在上面的示例中，输出是相同的：

```
(map vec (apply sorted-map (range 5000)))
[0 1] [2 3] ... [4998 4999] 
```

*这是我的意见

* * *

编辑：

`sorted-map`vs的时间比较`array-map`

```
user> (time (dorun (map vec (apply sorted-map (range 500000)))))
"Elapsed time: 391.520491 msecs"
nil
user> (time (dorun (map vec (apply array-map (range 500000)))))
"Elapsed time: 674517.821669 msecs" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T09:17:39.087

上述问题无法解决。地图被定义为没有顺序；您看到的任何顺序`array-map`都是巧合。如果您要求您的宏接收地图，那么您已经丢失了您想要的信息。

# wordpress - 为所有类型的帖子添加 wordpress 元框

> ID：11130461
> 
> 赞同：0
> 
> 时间：2012-06-21T01:35:44.540
> 
> 标签：wordpress

我正在编写一个 wordpress 插件，并想为所有类型的帖子（'page'、'post'、'custom_post_type'）添加一个 meta_box。通过引用 wordpress [add_meta_box()](http://codex.wordpress.org/Function_Reference/add_meta_box)我发现它只接受单一类型的帖子。有人知道如何做我想做的事吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T02:31:48.593

```
foreach ( array( 'post', 'page', 'custom_whatever', 'whatever2' ) as $page )
    add_meta_box( 'id', 'whatever', $callback, $page, $context, $priority, $callback_args ); 
```

请注意，现在 $page 变成了一个数组，并且遍历它，将获得所有帖子类型。

**更新一**

[您可以使用get_post_types](http://codex.wordpress.org/Function_Reference/get_post_types)获取所有已注册的帖子类型，并使用它来填充上述数组。

（注意：您可能需要过滤并从数组中获取附件..）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-26T12:06:54.643

这是一个完整的工作代码。

```
<?php

    function my_meta_box() {

        $my_post_types = get_post_types();

        foreach ( $my_post_types as $my_post_type ) {
            add_meta_box( 
                'Meta_box_ID', __( 'Title of the meta box', 'textdomain' ), 'callback_function', $my_post_type
            );
        }
    }

    function callback_function(){

        // Your metabox code goes here :)

        }

    add_action( 'add_meta_boxes', 'my_meta_box' );

?> 
```

参考：[https ://developer.wordpress.org/reference/functions/add_meta_box/](https://developer.wordpress.org/reference/functions/add_meta_box/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-05T08:38:12.070

为何如此精细？
每个请求都会调用操作，并且`$post`对象是全局的，因此我们可以使用它：

```
function my_meta_box() {
    global $post;

    add_meta_box(
        "box-id",
        __("Title"), function () {},
        $post->post_type,
        "context");
}

add_action("add_meta_boxes", "my_add_meta_box"); 
```

# java - Htmlparser 无法解析 Java 中的“tbody”

> ID：11130462
> 
> 赞同：0
> 
> 时间：2012-06-21T01:35:46.323
> 
> 标签：java, html-parser

在`org.htmlparser`我想`tbody`通过`id`

```
Parser htmlParser =  Parser.createParser("<table id='_table' border='0' cellspacing='0' cellpadding='0' class='tableRegion' width='100%' ><thead><tr><td>1</td><td>2</td></tr></thead><tbody id='_table_body' ><tr><td>4</td><td>5</td></tr></tbody></table>","gbk"); 
NodeFilter filter = new HasAttributeFilter("id", "_table_body"); 
NodeFilter f = new AndFilter(new TagNameFilter("tr"), new HasParentFilter(filter)); 
NodeList nodelist1 = htmlParser.parse(filter); //Tag (144[0,144],173[0,173]): tbody id='_table_body' 
NodeList nodelist2 = htmlParser.parse(f); // 
```

为什么不`nodelist1`读书`<tr><td>4</td><td>5</td></tr>`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T02:48:28.987

如果您获得该`<tbody>`节点，您应该期望拥有：

```
<tbody id='_table_body' ><tr><td>4</td><td>5</td></tr></tbody> 
```

而不是

```
<tr><td>4</td><td>5</td> 
```

后者是元素的子节点`<tbody>`......不是元素本身。基本上，您的代码（使用`filter`）看起来像是在为您提供正确的东西。

# mysql - 使用水龙头从heroku导出数据库时出现分段错误

> ID：11130470
> 
> 赞同：3
> 
> 时间：2012-06-21T01:37:39.493
> 
> 标签：mysql, postgresql, heroku, segmentation-fault, taps

当我在终端中运行以下命令时，我正在使用水龙头将 PostgreSql 数据库从 Heroku 导出到我的本地 Mysql2 数据库，

```
heroku db:pull mysql2://root:@127.0.0.1/spendon_dev --app huanarle 
```

它说

```
/Users/huangjin/.rvm/gems/ruby-1.9.3-p125/gems/sqlite3-1.3.6/lib/sqlite3/sqlite3_native.bundle: [BUG] Segmentation fault
ruby 1.8.7 (2010-01-10 patchlevel 249) [universal-darwin11.0] 
```

有什么问题？请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:47:33.043

我找到了类似问题的答案：[Heroku db:push failed with segfault](https://stackoverflow.com/questions/9389832/heroku-dbpush-fails-with-segfault)

您需要重新安装 heroku gem 和 taps gem

```
gem install heroku
sudo gem install taps 
```

祝你好运！

# openid - OpenID 和桌面应用程序

> ID：11130476
> 
> 赞同：0
> 
> 时间：2012-06-21T01:38:59.430
> 
> 标签：openid, desktop

查看[https://developers.google.com/accounts/docs/OpenID?hl=zh-TW#AuthProcess](https://developers.google.com/accounts/docs/OpenID?hl=zh-TW#AuthProcess)它使用 Web 应用程序。对于可以进行 http(s) 调用以执行相同操作的桌面应用程序，相同的过程是否有效？我看到的一个障碍是用户被重定向到该站点进行登录，例如谷歌。我如何将此过程用于桌面应用程序而不是网站？如果某人已经拥有 FB 或 google ID，我希望他们能够使用它来登录我的应用程序。因此，我的应用程序的服务器部分也需要获取此身份验证值来验证登录。

您看到的每个示例都适用于网络应用程序，但如果桌面应用程序也可以使用它（例如具有多人游戏的视频游戏），那就太好了，这就是我正在尝试做的事情。如果我只能使用 OpenID，我不想跟踪和存储用户名/密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:35:03.497

OpenID 不能解决您的问题。这两个浏览器重定向（RP 到 OP 和 OP 到 RP）对于 OpenID 协议是强制性的，它们在规范本身中定义。但 OAuth 是您的完美解决方案。

*   您不必存储用户名/密码
*   您可以避免浏览器重定向
*   FB、Google、Twitter 等支持 OAuth
*   您还有许多其他优势，例如，您可以在他的 Facebook 个人资料上发布用户的游戏结果 :)

所以去OAuth。

# javascript - 实现这种过滤的好方法是什么？

> ID：11130478
> 
> 赞同：0
> 
> 时间：2012-06-21T01:39:07.110
> 
> 标签：javascript, jquery

我有如下数据：

```
var data = [{
   id: 1,
   date: new Date("2010-01-01"),
   value: 10
}, {
   id: 2,
   date: new Date("2010-01-01"),
   value: 11
}, {
   id: 3,
   date: new Date("2010-01-01"),
   value: 12
}, {
   id: 4,
   date: new Date("2010-01-02"),
   value: 10
}, {
   id: 5,
   date: new Date("2010-01-03"),
   value: 10
}, {
   id: 6,
   date: new Date("2010-01-03"),
   value: 21
}, {
   id: 7,
   date: new Date("2010-01-03"),
   value: 22
}, {
   id: 8,
   date: new Date("2010-01-03"),
   value: 23
}]; 
```

我正在尝试应用两种过滤器：

*   `Filter1`应该只给我那些在他们的领域中相差 1`value`但具有相同`date`领域的点。因此，这应该返回一个新数据集，其中包含 id 为 1、2、3、6、7、8 的数据记录（前三个是因为值为 10、11、12，后三个是因为值为 21、22、23）
*   `Filter2`应该只给我那些在他们的领域相差 1 天`date`但具有相同`value`领域的点。因此，这应该返回一个包含 id 为 1、4、5 的数据记录的新数据集

我目前正在服务器端的 C# 中执行此操作，但我希望看看是否有一种有效的方法可以在 Javascript 中执行此操作。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T02:07:45.343

为什么，当然是自定义排序功能！

```
function filter1(arr) {
    // Clone the array:
    arr = arr.slice();

    // Sort the array by value:
    arr.sort(function(a, b) {
        return a.date - b.date || a.value - b.value;
    });

    // Look for consecutive elements with the same date:
    var r = [];

    for(var i = 1; i < arr.length; i++) {
        if(+arr[i - 1].date === +arr[i].date && arr[i - 1].value === arr[i].value - 1) {
            if(r.indexOf(arr[i - 1]) === -1) r.push(arr[i - 1]);
            r.push(arr[i]);
        }
    }

    // Return the result
    return r;
}

function filter2(arr) {
    // Clone the array:
    arr = arr.slice();

    // Sort the array by date:
    arr.sort(function(a, b) {
        return a.value - b.value || a.date - b.date;
    });

    // Look for consecutive elements with the same value:
    var r = [];

    for(var i = 1; i < arr.length; i++) {
        if(arr[i - 1].value === arr[i].value && arr[i].date - arr[i - 1].date <= 24 * 60 * 60 * 1000) {
            if(r.indexOf(arr[i - 1]) === -1) r.push(arr[i - 1]);
            r.push(arr[i]);
        }
    }

    // Return the result
    return r;
} 
```

# python - Python 图像库和 Gtk.FontSelectionDialog

> ID：11130483
> 
> 赞同：0
> 
> 时间：2012-06-21T01:39:41.710
> 
> 标签：python, fonts, gtk, python-imaging-library, pango

我想让 PIL 使用他们的字体来绘制文本来获取它们，我使用以下代码：

```
fdia = Gtk.FontSelectionDialog("Font")
response = fdia.run()
if response == Gtk.ResponseType.OK:
    self.ui.eFont.set_text(fdia.get_font_name())
fdia.destroy() 
```

（例如，它返回“Impact 14”）

但是PIL需要完整的路径，如何获取呢？我尝试 pango：

```
draw.text((5, 5), "exm", font=pango.FontDescription("Impact 10"),\
                                            fill="#FFFFFF") 
```

但 PIL 说：

```
AttributeError: 'pango.FontDescription' object has no attribute 'getmask' 
```

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T02:30:04.773

我不知道您是否可以轻松地使 Pango 字体和 PIL 字体描述类发挥得很好。`Pango.FontDescription`对象与对象不同`ImageFont`。您可能希望使用`Cairo`而不是 PIL 来呈现您的字体和图形。

我见过一些人用 PIL 写入 PNG，然后用 Cairo 打开它以进行字体渲染——但我只会选择其中一个。

# iphone - 在 Xcode 中制作浏览器？

> ID：11130485
> 
> 赞同：0
> 
> 时间：2012-06-21T01:39:48.153
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我对 Xcode 和一般的 iOS 开发完全陌生。

基本上我的任务是为 iPad/iPhone/iPod 制作一个简单的浏览器应用程序。此浏览器应用程序将只能访问单个特定网站。

我找到了很多在 Xcode 中制作浏览器的教程。比如这个：[http ://www.youtube.com/watch?v=Vpq8r-HHwZA](http://www.youtube.com/watch?v=Vpq8r-HHwZA)

但是，我需要一些未包含在教程中的要求：

1.  浏览器需要有一个唯一的标识符。我需要一种方法让该特定网站检测到该浏览器本身是独一无二的（而不是 Firefox、Safari 等）。有没有办法为我要制作的浏览器设置一个唯一的 ID？

2.  浏览器需要在某个 URL 处自动打开。

这两个功能可能吗？有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T03:20:34.247

1.  在覆盖 Web 浏览器的标识符方面，我尝试更改 NSUrlRequest 的“User-Agent”标头字段，但 UIWebView`loadRequest`替换了它（这对他们来说是合理的做法，恕我直言）。因此，我不确定您是否可以更改浏览器标识符，但我原以为您可以（a）设置网站可以检查的 cookie；(b) 设置一些不同的 HTTP 标头（您只需与您的网站管理员协调...我什至不知道这是否合适）；或者 (c) 你可以做一些低技术的事情，比如在来自应用程序的 URL 中添加一个参数？我不知道。希望其他人可以在这一点上为您提供更好的建议。

2.  在加载某个 URL 方面，只需使用您的首选 URL`viewDidLoad`调用 UIWebView 。`loadRequest`

3.  如果您的目标是将他们留在该网站上，您就不能向他们展示可编辑的地址栏，在这种情况下，他们只能跟随网站上可用的链接。或者实现 UIWebViewDelegate`webView:shouldStartLoadWithRequest:navigationType:`以确保任何 Web 请求都保留在首选网站内。

# python - 在非空格上测试字符串内容

> ID：11130488
> 
> 赞同：4
> 
> 时间：2012-06-21T01:40:36.060
> 
> 标签：python, whitespace

我想测试一个句子是否包含除空白字符之外的任何其他内容。这是我目前使用的：

```
if len(teststring.split()) > 0:
    # contains something else than white space
else:
   # only white space 
```

这够好吗？有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-21T01:43:58.020

[`str.isspace`](http://docs.python.org/library/stdtypes.html#str.isspace)根据文档，字符串有一个称为该方法的方法：

> 如果字符串中只有空白字符并且至少有一个字符，则返回 [s] true，否则返回 false。

所以，这意味着：

```
if teststring.isspace():
    # contains only whitespace 
```

会做你想做的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-21T01:42:02.783

为此，我将使用[strip()](http://docs.python.org/library/stdtypes.html?highlight=strip#str.strip)函数。

```
 if teststring.strip():
      # non blank line
  else:
      # blank line 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T01:43:14.313

您可以只使用 .strip()。

如果它只是空格，则结果字符串将为空。

```
if teststring.strip():
    # has something other than whitespace.
else:
    # only whitespace 
```

或者更明确地说，正如 JBernardo 指出的那样：

```
if not teststring.isspace():
    # has something other than whitespace

else:
    # only whitespace. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T01:43:10.620

```
 if teststring.split():
      print "not only whitespace!" 
 else:
     print ":(" 
```

# ruby - 为什么 Ruby /[[:punct:]]/ 会漏掉一些标点符号？

> ID：11130490
> 
> 赞同：13
> 
> 时间：2012-06-21T01:41:01.417
> 
> 标签：ruby, regex, posix

Ruby`/[[:punct:]]/`应该匹配所有“标点符号”。根据[Wikipedia](https://secure.wikimedia.org/wikipedia/en/wiki/Regular_expressions#POSIX_character_classes)，这意味着`/[\]\[!"#$%&'()*+,./:;<=>?@\^_`{|}~-]/`每个 POSIX 标准。

它匹配：`-[]\;',./!@#%&*()_{}::"?`.

但是，它不*匹配*：（`=`~$^+|<>`至少在 ruby​​ 1.9.3p194 中）。

是什么赋予了？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T01:53:48.620

标点符号类由语言环境定义。punct的 Open Group [LC_TYPE 定义](http://pubs.opengroup.org/onlinepubs/007904875/basedefs/xbd_chap07.html#tag_07_03_01)说：

> 定义要分类为标点字符的字符。在 POSIX 语言环境中，`<space>`不应包含 alpha、digit 或 cntrl 类中的 the 或任何字符。在语言环境定义文件中，不应为关键字upper、lower、alpha、digit、cntrl、xdigit 或as 指定任何字符。

基本上，它定义了如何通过排除其他字符类来定义*punct ，但它实际上并没有直接定义标点符号——这是语言环境的工作。*

我找不到每个语言环境中内容的规范参考。也许别人知道。同时，您可以找到与您想要的点字符类匹配的 LC_TYPE *，*或者直接指定类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-17T12:39:58.317

大于符号属于[“符号，数学”类别](http://www.fileformat.info/info/unicode/char/3e/index.htm)，而不是标点符号类别。如果您将正则表达式的编码强制为 UTF-8（它默认为源编码，并且可能您的源是 UTF-8 编码，而我的默认源是其他东西），您可以看到这一点：

```
2.1.2 :004 > /[[:punct:]]/u =~ '<'
 => nil 
2.1.2 :005 > /[[:punct:]]/ =~ '<'
 => 0 
```

如果您将正则表达式强制为 ASCII 编码（/n -[此处](https://ruby-doc.org/core-1.9.3/Regexp.html#class-Regexp-label-Options)有更多选项），您会看到它在 punct 中对 '<' 进行分类，我认为这正是您想要的。但是，如果您的源包含 UTF-8 的 ASCII 子集之外的字符，这可能会导致问题。

```
2.1.2 :009 > /[[:punct:]]/n =~ '<'
 => 0 
```

更好的解决方案是在您的正则表达式中使用“符号”类别而不是“punct”类别，它与 UTF-8 编码中的“<”匹配：

```
2.1.2 :012 > /\p{S}/u =~ '<'
 => 0 
```

[这里](https://www.ruby-doc.org/core-1.9.3/Regexp.html#class-Regexp-label-Character+Properties)有更长的类别列表。

# actionscript-3 - 组织、加密、压缩外部资产并在运行时加载它们

> ID：11130497
> 
> 赞同：1
> 
> 时间：2012-06-21T01:42:26.553
> 
> 标签：actionscript-3, flash, air, flash-cs5

好的，我不确定主题是否足够清楚。我正在制作基于 Flash 的单人游戏。它是一个可执行文件（AIR 应用程序），可以直接安装和运行，而不是在浏览器上播放。所以，我有大量的图像、视频和东西，最近我开始使用 Loader 类从外部加载它们。已发布的 AIR 安装程序不介意外部内容，因此我在安装后手动复制它们。这可能从一开始就是错误的，但我不知道如何合并它们。稍后我可能会以某种方式弄清楚，这不是主要问题，但如果您回答这个问题，我将不胜感激。

无论如何，真正的问题是，我不希望玩家看到存储在资源文件夹中的游戏中使用的图像和视频。有没有办法让它们加密或隐藏在一些类似包的文件中（比如许多大型游戏中的 .DAT 文件）？因此，普通玩家无法访问或弄乱它们。当然，我仍然应该能够在运行时加载它们。

我仰望这种 .SWC 格式。但是，我认为这不是我要找的。任何人都可以轻松地将该文件导入 Flash 项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T02:42:44.217

您甚至可以在 Flash 中使用 [嵌入] 元标记。如果您不想从 Flex SDK 中引入一些小类，可以使用多种技术，例如您在此处看到的[http://nascode.com/2010/02/01/embedding-asset-at -compile-time-in-pure-as3-project/](http://nascode.com/2010/02/01/embedding-asset-at-compile-time-in-pure-as3-project/)。

请注意，以这种方式嵌入的资产必须嵌入帧 N（取决于您的 fla/xfl 设置）。您无法在您的 swf 的整个生命周期中分摊它们的负载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:50:35.083

您可以使用 [Embed] 将小资源放入您的应用程序中。但对于大型资产，我会使用带有加密资产的 zip 文件。（不是加密的 zip，因为它们会占用大量内存来解密，而是加密单个文件。）我使用**airxzip**进行压缩（支持处理存档中的单个文件）和**as3crypto**作为 ActionScript 中唯一的加密库。使用像 RC4 这样的对称算法，它足够快（每秒解密 10-20 MB。）
您需要一个密钥来加密资产。如果您使用它们进行激活，它可以硬编码到应用程序中或从序列号中解码。
此外，档案可以命名为 .DAT 或以某种方式更神秘以吓跑 WinZip 用户 :)

# php - php中的json解析

> ID：11130500
> 
> 赞同：0
> 
> 时间：2012-06-21T01:42:51.017
> 
> 标签：php, python

我有以下 JSON 字符串

```
{
        "name":"Product",
        "properties":
        {
                "id":
                {
                        "type":"number",
                        "description":"Product identifier",
                        "required":true
                },
                "name":
                {
                        "type":"string",
                        "description":"Name of the product",
                        "required":true
                },
                "price":
                {
                        "type":"number",
                        "minimum":0,
                        "required":true
                },
                "tags":
                {
                        "type":"array",
                        "items":
                        {
                                "type":"string"
                        }
                },
                "stock":
                {
                        "type":"object",
                        "properties":
                        {
                                "warehouse":
                                {
                                        "type":"number"
                                },
                                "retail":
                                {
                                        "type":"number"
                                }
                        }
                }
        }
} 
```

我想访问

```
properties - > stock - > properties - > warehouse. 
```

在 python 中，我可以执行以下操作。

```
f = open("c:/dir/jsondec.json")
data = json.load(f)
node = data['properties']['stock']['properties']['warehouse']
print str(node) 
```

我正在尝试在 PHP 中做同样的事情。我知道我可以使用`json_decode()`，但正确的语法应该是什么。另外，如果我在里面有一个数组，`properties-> ID`我可以`['properties'][0]['id']`访问它。php中的等价物是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T01:48:06.447

## Python中的版本

这是在 Python 中：

```
f = open("c:/dir/jsondec.json")
data = json.load(f)
node = data['properties']['stock']['properties']['warehouse']
print str(node) 
```

## PHP 版本

这是它在 PHP 中的等价物：

```
$f = file_get_contents('c:/dir/jsondec.json');
$data = json_decode($f, true);
$node = $data['properties']['stock']['properties']['warehouse'];
echo $node; 
```

## “陷阱”（或“细微差别”）

但是有一个区别：`f`在 Python 版本中是打开的文件，而`$f`在 PHP 版本中已经是一个字符串。

正如 RPM 正确指出的那样，还有另一个区别：PHP 中的数组在`Array`字符串上下文中使用时会转换为字符串“”（请参阅​​此处：http: [//ideone.com/XJfSP](http://ideone.com/XJfSP)），因此您可能希望使用：

```
print_r($node); 
```

或者

```
var_dump($node); 
```

代替

```
echo $node; 
```

查看数组的实际内容。

**编辑**：将结果更改`json_decode()`为数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T01:46:27.940

尝试使用 json_decode 并将结果转换为对象。

```
$r = file_get_contents('json.json');

$jsonObj = (json_decode($r));

$warehouseObj = $jsonObj->properties->stock->properties->warehouse->type;

d($warehouseObj);//to view warehouse node
d($jsonObj);// toview complete object

function d($l){
print "<pre>";
print_r($l);
print "</pre>";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T01:47:43.977

在 PHP 中，您可以使用[json_decode](http://php.net/manual/en/function.json-decode.php)将对象转换为关联数组。只要确保您`TRUE`作为函数中的第二个参数传递`json_decode`。

```
 <?php
       $data = @file_get_contents('c:/xampp/htdocs/json.json');

      if(!$data)
      {
       echo "My bad";
      }
      $newData = json_decode($data,true);

      $a = $newData['properties']['stock']['properties']['warehouse'];

      print_r($a);
      echo $a['type'];

   ?> 
```

# url - IIS 将 queryString 中的双斜杠修改为单斜杠

> ID：11130512
> 
> 赞同：3
> 
> 时间：2012-06-21T01:45:21.037
> 
> 标签：url, iis-7, http-status-code-404, httphandler

我的问题如下：我有一段代码充当网关，将请求路由到一个后端服务器或另一个。这段代码实际上是在一个 IHttpHandler 中实现的，它是在 404 上触发的；

伪代码如下：

```
 public void ProcessRequest(HttpContext context)
    {
        try
        {
            var absoluteUri = context.Request.Url.AbsoluteUri;

            //... clean URL to get the part that we need 

            string RedirectTo = ...;

            context.Response.Redirect(RedirectTo, false);                
        }
        catch (Exception ex)
        {
            ...
        }
    } 
```

我的问题是，在到达此代码的 queryString 中有一些已加密（和编码）的参数。不幸的是，对值的加密方式没有太多控制，并且一些加密的值包含连续的正斜杠。例如：网站/12345?params=o//go4lia0%3d

当 IIS 获得请求时，双斜杠最初被编码 (%3d%3d)。

从逻辑上讲，IIS 没有找到相应的文档（这是预期的）并调用上面的处理程序。问题是在这个阶段，查询字符串已经被IIS解码，连续的2个斜杠变成了一个。这会导致解密查询字符串失败。

有什么方法可以告诉 IIS：请不要放双斜线？

一些澄清： - 此功能是生成发送给最终用户的链接，因此它会自动填充屏幕上的某些字段。我知道在 MVC 控制器中处理它可能更容易......也许我最终会这样做而不是触发 404。

*   可以更改生成加密值的代码，使其不生成斜杠（这本来是个好主意，但是已经发送了带有错误链接的电子邮件，所以为时已晚......

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T14:31:51.300

你解决了这个问题吗？我不知道您是否可以告诉 IIS 不使用双斜杠，但您可以通过访问此服务器变量来解析原始未触及的 URL 以获取未修改的查询字符串值：

```
HttpContext.Current.Request.ServerVariables["UNENCODED_URL"] 
```

我试过了，虽然双斜杠在 HttpContext.Current.Request.RawUrl 中消失了，但它们仍然存在于 HttpContext.Current.Request.ServerVariables["UNENCODED_URL"] 中。

# jquery - 如何在jQuery中操作表格行

> ID：11130522
> 
> 赞同：0
> 
> 时间：2012-06-21T01:46:41.610
> 
> 标签：jquery, css, html-table, css-selectors, alternating

我在一个页面上有几个表格。

我正在突出显示所有其他行以及来自 CSS 的禁用输入不可编辑数据的样式。

下面是我目前使用的代码。效果是具有可编辑数据的列是交替的白色和金色。具有不可编辑数据的列是交替的灰色和金色。（关于您可以在此网格中编辑哪些列的视觉指示已经足够了。）

```
$(document).ready(function()
{
  $("tr:even").css("background-color", "#DEDEBC");
  $("tr:even input").css("background-color", "#DEDEBC");
}); 
```

css

```
input[disabled='disabled'] {
   text-decoration:none; 
   text-indent:5px; 
   color:#006;
   border:none;
   -webkit-box-shadow:0 0 0 #666 inset; 
   -moz-box-shadow:0 0 0 #666 inset; 
   box-shadow:0 0 0 #666 inset;
} 
```

我真的只希望我正在处理的当前页面上的一个表（第二个表）上出现这种行为，但我对 jquery 并不熟悉。在其他页面上，我需要在几张桌子中的 2 或 3 张桌子上使用它。

另一个问题是此代码继续跨表进行奇偶确定。如果前一个表中的最后一行是偶数，则下一个表中的第一行被认为是奇数，反之亦然。

如何修改 jQuery 以选择特定表？我怎样才能让它从一个新表重新开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T01:51:26.980

只给出你想为班级着色的表格`colorize`。
用这个替换你的 jQuery 代码：

```
$(function(){
    $('table.colorize').each(function(){
        $('tr:even, tr:even input', this).css("background-color", "#DEDEBC");
    });
}); 
```

这只会为您使用类定义的表着色，并将重置每个表的偶数。

# hibernate - Jpa vs Hibernate - 标准还是功能？

> ID：11130524
> 
> 赞同：3
> 
> 时间：2012-06-21T01:46:42.910
> 
> 标签：hibernate, jpa-2.0

我们正在启动一个项目，我们的架构师希望使用标准上的所有内容（日历而不是 JodaTime - JPA2 与 Hibernate 4）。我正在使用 JPA2，我意识到以“标准”和可移植性为借口丢失了很多功能。

所以我问这个问题：是否值得因为标准而失去一些功能？为什么？

改变 ORM 以考虑可移植性是常见的吗？

他们有一个项目已经 7 年了，仍然使用 OJB 作为他们的 ORM ......你能给我一个启示吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T02:51:29.303

根据我的经验，使用 Hibernate 4。您永远不会在应用程序中更改您的 ORM 框架。与非标准相比，标准的发布周期非常长。这使得很难获得新功能或错误修复。此外，我会说 Hibernate 是一个准标准。Hibernate 提供了比 JPA 更多的功能。我不会放弃他们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T07:07:03.860

标准解决方案的优势在于每个人都在使用它们。这表示：

1.  雇用熟悉技术的人会更容易，培训人会更容易
2.  图书馆被遗弃或变得不适合使用的可能性较小（例如，由于供应商锁定，提供者可以逃避过高的许可费用）——即使是这样，其他一些用户图书馆可能开创了迁移路径
3.  如果需要，切换到标准的不同实现会更容易（谁能确定在可能维护该软件的许多年内不会出现这种需要？）

例如，如果 Red Hat 陷入困境，停止免费提供新版本的 hibernate，但现在要求支付许可费怎么办？或者如果 Joda time 的制造商停止开发怎么办？

因此，在存在标准的地方使用标准是有意义的。牺牲一些开发的便利性来限制依赖关系也是有意义的——牺牲多少是值得的，这是一个判断（当然可以将库拖到类路径中而没有真正的好处。另一个极端是重新发明轮子，只是因为轮子还没有标准化。）

> 他们有一个项目已经 7 年了，仍然使用 OJB 作为他们的 ORM ......你能给我一个启示吗？

可能是因为代码使用没有现代实现的 API 与 OJB 通信，因此切换提供程序非常（禁止？）昂贵。也许这正是您的架构师试图通过限制您使用标准 api 来防止的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T02:08:24.377

选择 JPA 可能是个好主意——它将涵盖您需要的大部分内容。不过，我不会根据切换 ORM 的难易程度来做出决定——它可能永远不会发生，即使发生了，首先要担心的还有很多其他事情。

如果你使用 Hibernate 作为你的 JPA 提供者，你总是可以在你需要的地方回退到 Hibernate 特定的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-19T10:16:50.820

快速一班轮：

**JPA** - 用于将对象（在 JPA 中称为实体）持久化/访问/更新到数据库的 Java 规范（Java EE 的一部分）。

**Hibernate** - JPA 提供者（即开源 JPA 规范实现之一）。另请**注意**，您也可以在不使用 JPA 的情况下使用 Hibernate。

在我的博客上有更多详细信息，请[点击此处](http://geekrai.blogspot.in/2015/06/brief-overview-of-jpa.html)。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-03T03:25:00.447

Hibernate 具有附加功能，例如 Hibernate-Search 和 Envers。

# facebook-graph-api - 格式错误的 Facebook 访问令牌

> ID：11130528
> 
> 赞同：24
> 
> 时间：2012-06-21T01:47:42.087
> 
> 标签：facebook-graph-api

我正在尝试使用 Facebook Graph API 从 Facebook 获取相册并将它们放在我正在开发的网站上。我在 Codeigniter 框架中使用 PHP 作为我的语言，并重定向到 Facebook URL 以获取用户的访问令牌。Facebook 向我返回了一个访问令牌，我将其抓取并插入到我的数据库中。

话虽如此，当我尝试通过转到图形 URL 来获取相册的 JSON 数据时，它会返回一个错误。图 URL 和错误是：

```
https://graph.facebook.com/1298926000574/photos?access_token=[MY ACCESS TOKEN]

My access token: AQBxqdB64GHNTGY5Yp_IOuMY7NerwNtXVVrp2HwT1qXj02zqU-63KJDyB2jzqurlJ4M0vd7TAu7upA6T7ZYQzIChr2PgD1dpu-6Iebi0WVILbBSBOu-yj7sgcHSGS-Ew4Yio0I9In-1O5jOxbYLDMbI0Zmwk-F1-u-7a8iVvTJram8PvpmdRt5eg

Returned error:

{
"error": {
  "message": "Malformed access token [MY ACCESS TOKEN]",
  "type": "OAuthException",
  "code": 190
}
} 
```

我真的不确定为什么 Facebook 不断将这个错误返回给我。访问令牌很长，我将它作为“文本”字段存储在我的数据库中。我听从了他们的指示，现在他们正朝我的脚开枪。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-06-22T09:41:15.043

我遇到了同样的问题，我发现这篇文章正在寻找解决方案。我注意到“我们的”访问令牌有很多奇怪的符号，而其他的只是一个字母数字字符串。

我相信您（和我）犯的错误是将**代码**与**access_token混合**

在将 facebook 用户发送到您的 api 以确认访问后，他们将返回到您的网站，并带有`$_GET['code']`. 此代码需要通过 Facebook 验证，成功后将返回*access_token*。

```
$app_id = [YOUR_APP_ID];
$app_secret = [YOUR_APP_SECRET];
$my_url = [THE_SAME_AS_THE_POST_BEFORE];
$code = $_GET['code'];

$token_url = "https://graph.facebook.com/oauth/access_token?"
. "client_id=" . $app_id . "&redirect_uri=" . urlencode($my_url)
. "&client_secret=" . $app_secret . "&code=" . $code;

$response = file_get_contents($token_url);
$params = null;
json_decode($response, $params);
$access_token = $params['access_token']; 
```

[有关使用 PHP 获取 access_token 的更多信息](https://developers.facebook.com/docs/authentication/server-side/)

[有关使用正确的 redirect_uri 的更多信息](https://stackoverflow.com/questions/4386691/facebook-error-error-validating-verification-code)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-29T15:43:54.347

一个 wp 插件返回相同的错误，这是解决方案，它可能与您的问题有关：

php 请求 access_token，facebook 服务器返回它。

返回的包含 access_token USED 的消息类似于：

```
access_token=....... 
```

但是对于新创建的应用程序（2012 年），facebook 服务器返回：

```
access_token=.....&expires=..... 
```

如果您的代码解析错误，如

```
$access_token=str_replace('access_token=','',$message); 
```

那么你的 $access_token 错误地包含了额外的 &expires 等。

它应该被解析为：

```
parse_str($message,$ar); $access_token=$ar['access_token']; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T05:00:51.237

我有同样的问题。想通了它是如何工作的，这里适用于任何陷入同样泥泞的人。

```
require 'facebook-php-sdk/facebook.php';
$facebook = new Facebook(array(
  'appId'  => 'APP ID',
  'secret' => 'SECRET KEY',
));

// Get User ID
$user = $facebook->getUser();  
if ($user) {
    $accessToken = $facebook->getAccessToken();
        try {
            $url = "https://graph.facebook.com/1298926000574/photos?access_token=".$accessToken;

            $photos = $facebook->api($url);
            var_dump($photos);
        } catch (FacebookApiException $e) {
            $user = null;
        }
    }   
} else {
    //echo "You need to login";
    header("Location:".$facebook->getLoginUrl());
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-16T17:22:26.840

## tl;博士

访问令牌应该由您的应用程序 ID 和您的访问令牌组成，`|`它们之间有一个竖线 ( ) 字符：`123456789012345|AbCDefGHijKLMNOpqRSTUVwxYZ`。

## 创建和使用访问令牌

> **注意：**在本教程中，我只使用虚拟凭据。它们的*风格*与真实的风格相同，但它们的确切值只是一系列递增的数字或字符。**切勿在线发布您的实际凭据！**

### 创建访问令牌

要求：

*   应用编号：`123456789012345`
*   应用秘籍：`ZYxwVUTSRqpONMLKjiHGfeDCbA`

如果您按照[访问令牌创建指南](https://developers.facebook.com/docs/facebook-login/access-tokens/#apptokens)进行操作，您将找到可以创建的 URL：

```
GET /oauth/access_token?client_id={app-id}&client_secret={app-secret}&grant_type=client_credentials 
```

如果我们在我们的虚拟凭证中插入 GET 请求的 URI 应该如下所示：

```
 http://graph.facebook.com/oauth/access_token?client_id=123456789012345&client_secret=ZYxwVUTSRqpONMLKjiHGfeDCbA&grant_type=client_credentials 
```

响应将是：

```
{
  "access_token": "123456789012345|AbCDefGHijKLMNOpqRSTUVwxYZ",
  "token_type": "bearer"
} 
```

访问令牌包含您的应用程序 ID，后跟一个管道 ( `|`)，然后是可以称为实际访问令牌的字符串。

### 使用访问令牌

要求：

*   访问令牌：`123456789012345|AbCDefGHijKLMNOpqRSTUVwxYZ`
*   无论您需要什么其他凭证。本例中的用户 ID：`1234567890`

在这个例子中，我将按照[官方 facebook 指南发送通知](https://developers.facebook.com/docs/games/services/appnotifications#implementation)。他们展示了这个模板：

```
POST /{recipient_userid}/notifications?access_token=... &template=...&href=... 
```

这意味着，在您填写凭据后，示例 POST 请求应如下所示：

```
http://graph.facebook.com/1234567890/notifications?access_token=123456789012345|AbCDefGHijKLMNOpqRSTUVwxYZ&template=Test&ref=notif_test 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-17T14:49:45.387

您正在发送`code`而不是`access_token`在您的请求中。

**Laravel Socialite**用户的解决方案：

利用：

```
$response = Socialite::driver($provider)->getAccessTokenResponse($request['code']);
$user = Socialite::driver($provider)->userFromToken($response['access_token']); 
```

代替：

```
$user = Socialite::driver($provider)->user(); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-27T19:43:36.937

正如错误所说，它是格式错误的异常意味着格式化`request`.

```
https://graph.facebook.com/me/photos/?access_token=[your_accesstoken] 
```

所以它会像

```
https://graph.facebook.com/me/photos/?access_token=AQBxqdB64GHNTGY5Yp_IOuMY7NerwNtXVVrp2HwT1qXj02zqU-63KJDyB2jzqurlJ4M0vd7TAu7upA6T7ZYQzIChr2PgD1dpu-6Iebi0WVILbBSBOu-yj7sgcHSGS-Ew4Yio0I9In-1O5jOxbYLDMbI0Zmwk-F1-u-7a8iVvTJram8PvpmdRt5eg 
```

# c# - Emgu.CV 制作 .avi

> ID：11130530
> 
> 赞同：1
> 
> 时间：2012-06-21T01:47:56.613
> 
> 标签：c#, emgucv, avi

我正在使用**Emgu.CV**库进行对象检测，并担心是否可以使用该库将我的**.bmp**图像作为帧保存到**.AVI**中。我找到了 VideoWriter 类，但请提供一些示例或链接。

我很欣赏任何想法并给予标记^^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T02:12:25.507

你试过把它们放在一起吗？这是我对 VideoWriter 的看法：

```
//VideoWriter vw = new public VideoWriter(string fileName, int fps, int width, int height, bool isColor);
VideoWriter vw = new VideoWriter("test.avi", 30, 500, 500, true);
//Then write your frame
vw.WriteFrame(frame); 
```

我还不确定 WriteFrame() 方法。查看它的[链接](http://www.emgu.com/wiki/files/2.0.0.0/html/fc05f588-4769-c79d-ef5b-cfe9926701ea.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T11:50:29.867

Emgu CV 是 OpenCV 图像处理库的跨平台 .Net 包装器。如果您想处理图像或创建视频，这是一个非常强大且简单的工具。
以下是更多详细信息的链接： [http ://www.emgu.com/wiki/index.php/Setting_up_EMGU_C_Sharp](http://www.emgu.com/wiki/index.php/Setting_up_EMGU_C_Sharp)

使用此工具，您可以创建一个 avi 视频，提供来自 Kinect RGB 相机的帧。

# javascript - Javascript不透明度悬停和无限滚动

> ID：11130531
> 
> 赞同：0
> 
> 时间：2012-06-21T01:48:03.377
> 
> 标签：javascript, scroll, hover, opacity

我的图像有这段代码，因此当不将鼠标悬停在它们上方时，不透明度会降低。

```
$(document).ready(function () {
    $("img").css("opacity", 0.8);
    $("img").hover(function () {
        $(this).animate({
            opacity: 1.0
        }, 500);
    }, function () {
        $(this).animate({
            opacity: 0.8
        }, 500);
    });
}); 
```

除了，我也在使用这个无限滚动代码

```
<script type="text/javascript" src="http://codysherman.com/tools/infinite-scrolling/code"></script> 
```

一起，我只会让第一张照片变得不透明，正如页面最初加载时所定义的那样。一旦我向下滚动并使用无限滚动脚本加载新图像，不透明度对它们没有影响。

我怎样才能让它与无限滚动脚本一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T01:52:13.253

使用 jQuery 事件委托而不是`hover`：

```
$(document).ready(function () {
    $("body").on('mouseenter', 'img', function () {
        $(this).animate({
            opacity: 1.0
        }, 500);
    }).on('mouseleave', 'img', function () {
        $(this).animate({
            opacity: 0.8
        }, 500);
    });
}); 
```

图像不透明度不应通过 JavaScript 设置，而应作为真正的 CSS 规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T01:51:53.237

您需要将事件绑定到动态生成的元素：

```
$("body").on('hover', 'img', function () {
    $(this).animate({
        opacity: 1.0
    }, 500);
}, function () {
    $(this).animate({
        opacity: 0.8
    }, 500);
}); 
```

替换`body`为包含所有`<img />`标签的元素。

# php - 有没有类似 jLinq for PHP 的东西？

> ID：11130534
> 
> 赞同：0
> 
> 时间：2012-06-21T01:48:19.757
> 
> 标签：php, database

我刚刚遇到[jLinq](http://hugoware.net/Projects/jlinq)，这是一个 JS 库，用于以与关系数据库类似的方式查询数据（例如数组），我突然想到，在 PHP 中查询这样的数据的库使用起来非常方便RDBMS 的缓存子集，其中缓存本身没有查询功能，例如 APC 或 memcached。

我知道库背后没有魔法，“查询”数据在技术上可以使用原始 PHP 完成，但使用类似 jLinq 的语法查询数据似乎更自然。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T01:53:28.970

看看 Yii 框架（基于 PHP）——它有非常复杂的工具来处理数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T02:01:55.517

有几种。看一下：

[PHPLinq](http://phplinq.codeplex.com/)

[LinqForPHP](http://linqforphp.codeplex.com/)

[芬克](http://code.google.com/p/phinq/)

# python - 如何不在子流程中引用参数？

> ID：11130538
> 
> 赞同：2
> 
> 时间：2012-06-21T01:48:50.073
> 
> 标签：python, command-line, command, imagemagick, subprocess

我正在尝试使用 subprocess.call 从 Python 2.7 调用 ImageMagick 命令。我的问题是子进程中的参数解析器在每个参数周围都放了一个双引号，而 ImageMagick 似乎对非文件参数周围的引号有问题。

我想要的是这样的

```
"imagemagick.exe" "im1.png" "im2.png" -alpha off ( ... ) -composite "im3.png" 
```

到目前为止，除了手动构造带有丑陋`+ " " +`元素的字符串并使用`shell=True`.

这是我的代码：

```
args = [    imagemagick,
            filename + "_b.bmp",
            filename + "_w.bmp",
            "-alpha off ( -clone 0,1 -compose difference -composite -negate ) ( -clone 0,2 +swap -compose divide -composite ) -delete 0,1 +swap -compose Copy_Opacity -composite",
            filename + ".png" ]   

subprocess.call( args ) 
```

有没有办法使用子进程调用不带双引号的正确命令？

**更新**：插入了完整的命令行。我想把那部分放在一起，而不是“alpha”，“-off”，......一个接一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T01:51:41.387

使用 调用外部程序时`subprocess`，*每个*参数必须是 的不同元素`args`。所以试试：

```
args = [    imagemagick,
            filename + "_b.bmp",
            filename + "_w.bmp",
            "-alpha", "off", "( ... )", "-composite",
            filename + ".png" ] 
```

我不确定它`( ... )`代表什么，但如果你在命令行中放了不带引号的空格，它们也应该是单独的元素`args`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T02:05:43.580

感谢格雷格的回答，我想出了这个解决方案。我的观点是使代码在 Python 中易于阅读。我的意思是复杂的部分应该保存为一个字符串，因为保持它完整很重要（如果需要，复制粘贴到命令行/批处理文件等）

```
imarg = "-alpha off ( -clone 0,1 -compose difference -composite -negate ) ( -clone 0,2 +swap -compose divide -composite ) -delete 0,1 +swap -compose Copy_Opacity -composite"
args = [ imagemagick, filename + "_b.bmp", filename + "_w.bmp" ] + imarg.split() + [ filename + ".png" ]
subprocess.call( args ) 
```

它似乎工作正常！你看到这个有什么问题吗？

# clojure - 递归调用导致溢出

> ID：11130540
> 
> 赞同：2
> 
> 时间：2012-06-21T01:49:35.517
> 
> 标签：clojure

我正在尝试解决项目欧拉第二个问题。为什么下面的代码会导致堆栈溢出？我正在使用 recur 所以它不应该将所有递归调用存储在堆栈上。

```
(defn sum
  [[a b]]
  [b (+ a b)])

(defn fib-r
  ([n] (fib-r n 0 [0 1]))
  ([n s [a b]]
     (if (= n 0)
       s
       (let [[c d] (sum [a b])
             e (if (even? c) c 0)
             f (+ s e)]
         (recur (dec n) f [c d])))))

(fib-r 4000000) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T02:17:45.777

你得到一个整数溢出（而不是堆栈溢出）如果你使用 BigInts（BigInt 文字以 N 结尾），那么 Clojure 会很高兴地计算出正确的结果：

```
(defn fib-r                                                                                          
  ([n] (fib-r n 0N [0N 1N]))                                                                     
  ([n s [a b]]                                                                                     
     (if (= n 0N)                                                                            
       s                                                                            
       (let [[c d] (sum [a b])                                               
             e (if (even? c) c 0N)                               
             f (+ s e)]                             
         (recur (dec n) f [c d])))))
#'autotestbed.core/fib-r                                                                                               
autotestbed.core> (fib-r 40000)
1158997879999727672946417013062336891791160667328280503727448.... big number 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T17:31:35.710

这是 Clojure 1.3 中的一个重大变化（有关详细信息，请参见[http://dev.clojure.org/display/doc/Enhanced+Primitive+Support](http://dev.clojure.org/display/doc/Enhanced+Primitive+Support)）原始类型的自动提升不会自动发生。

您不必像 Arthur Ulfeldt 建议的那样在任何地方都使用 BigInts，您可以改为使用 auto-promoting plus 操作`+'`：

```
(defn sum [[a b]] [b (+' a b)]) 
```

这会做。

关于 400 万个案例 - 是的，这个计算量很大。您可以`fib-r`像这样修改您的功能：

```
(defn fib-r
  ([n] (fib-r n 0 [0 1]))
  ([n s [a b]]
     (if (and (< 0 n) (zero? (mod n 100000)))
       (println n))
     (if (= n 0) s
       (let [[c d] (sum [a b])
             e (if (even? c) c 0)
             f (+ s e)]
         (recur (dec n) f [c d]))))) 
```

看看这进展得有多快。

# javascript - IE7/8 中的 $(window) 和 $(document) 有什么区别？

> ID：11130543
> 
> 赞同：0
> 
> 时间：2012-06-21T01:50:24.493
> 
> 标签：javascript, internet-explorer

```
doc = $(document),
win = $(window);

doc.on("click",function(){
    alert("test") //working in all browser
})

//but..

win.on("click",function(){
    alert("test") //not working in ie7 ie8
}) 
```

我想知道为什么`document`在所有浏览器中都能正常工作，但`$(window)`在 IE7 或 IE8 中都不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T02:49:47.447

只是一个评论......</p>

早在浏览器大战时期，微软和网景就为他们的浏览器开发了截然不同的事件模型。W3C 在一定程度上对这些进行了标准化，但该标准是两者之间的一种折衷方案，许多东西仍然是双方专有的。

Netscape 死后，Mozilla.org 从灰烬中重生，催生了一堆浏览器（Mozilla、Firefox、Camino 等）。Mozilla 很好地实现了 W3C 标准，因此 Web 开发人员在必要时支持 W3C 标准和 IE 专有的东西。NN 的专有方法很快就被淘汰了，因此迅速减少的 Netscape Navigator (NN) 用户群变得焦躁不安，不得不购买新的浏览器。

另一方面，IE 拥有大约 95% 的用户份额，因此微软决定保留其大部分专有行为，同时支持它认为必要的标准。顺便说一句，为了生存，Opera 在这个时候非常像 IE，Mozilla 实现了许多不与标准冲突的 IE 东西（以及一些与标准冲突的东西），出于同样的原因。

因此，虽然大多数专有的 NN 东西消失了，但 IE 的东西一直存在，直到 MS 认为他们可以丢弃它。即使在最新版本中，仍然存在一些旧的 IE 专有内容，但其中一些仍然存在。

为了达到今天的水平，每个人都需要为标准而共同努力。请注意，当 IE 6 发布时，它很容易成为最符合标准的浏览器（但它固步自封的时间太长了，这是垄断力量的不利一面）。

也许 MS 有这个权利，在文档上设置的点击事件不应该冒泡到窗口。但很明显，大多数编写标准的人并不是这么想的，所以他们以不同的方式编写了它（请注意，MS 为 Web 标准机构做出了贡献，因此它有机会发表意见）。

无论如何，从版本 9 开始，IE 似乎和其他版本一样。据我所知，这种行为直到 HTML5（[第 6.1.6.4 节事件和 Window 对象](http://www.w3.org/TR/html5/webappapis.html#events-and-the-window-object)）才标准化，但很高兴被证明是错误的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T01:53:20.467

`$(window)`并且`$(document)`是围绕*完全不同对象*的 jQuery 包装器。功能上的差异仅仅是由于 Internet Explorer 中的兼容性问题；有些事件处理程序`window`不起作用，所以你把它们放在上面`document`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T01:54:25.987

该窗口与实际程序窗口有关，而文档与加载的页面的 html 页面和内容区域有关。

# facebook-graph-api - 如何通过 fql 流表获取持续 15 个用户墙的帖子？

> ID：11130545
> 
> 赞同：1
> 
> 时间：2012-06-21T01:51:19.567
> 
> 标签：facebook-graph-api, facebook-fql

我对这个 FQL 查询感到困惑：

```
SELECT type,attachment,message,permalink,created_time
FROM stream
WHERE
  source_id = xxxxxx and
  actor_id= xxxxxx and
  type = 247
ORDER BY created_time DESC
LIMIT 46 
```

它返回空。但是当我尝试这个时：

```
SELECT type,attachment,message,permalink,created_time
FROM stream
WHERE
  source_id = xxxxxx and
  actor_id= xxxxxx and
  type = 247
ORDER BY created_time DESC
LIMIT 50 
```

正如我所料，它返回 1 条记录。

是因为这个`LIMIT`还是别的什么？如何显示用户的 15 个帖子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T04:11:22.550

这是 facebook 的一个怪癖：一些帖子从回复中“隐藏”了。因此，前 45 个帖子全部隐藏（鉴于您用于获取帖子的凭据），接下来 5 个中的 1 个（一个）是可见的。所以它只返回可见的。增加限额，您可能会得到更多。

除了不包括限制，然后手动计算和使用前 15 个之外，没有真正的解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T21:25:10.467

```
List<WallPosts> posts = facebookClient.executeQuery("select strip_tags(message),type from stream where filter_key = 'others'",WallPosts.class);
Iterator<WallPosts> postIterator = posts.iterator();
int wallCount = 0;
while (postIterator.hasNext()) {
  if (wallCount == 15) break;
  WallPosts post = postIterator.next();
  if (post.message != null) { // if message is not blank
    wallCount ++;
    System.err.println(post.message);
} 
```

将从其他人那里获得经过身份验证的用户墙上的最后 15 条消息。有些消息是空白的，这就是我进行空检查的原因。

# search - 在emacs中的矩形内搜索和替换

> ID：11130546
> 
> 赞同：31
> 
> 时间：2012-06-21T01:51:19.767
> 
> 标签：search, emacs, replace

`replace-string`是否可以在 emacs 中的矩形区域内执行操作？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-21T02:18:38.037

如果启用 CUA 选择模式：

`M-x` `cua-selection-mode` `RET`

或永久保存在您的初始化文件中：

```
(cua-selection-mode 1) 
```

然后，您可以使用其高级矩形编辑工具。

（或者如果你是`cua-mode`用户，那么你不需要这样做。）

*   `C-RET`标记一个角落。
*   将点移动到对角。
*   `M-r`在标记的矩形内进行正则*表达式替换。*
*   `C-RET`取消标记/退出矩形编辑。

有关文档，请在注释中查找“CUA 矩形支持”标题`M-x` `find-library` `RET` `cua-base` `RET`

如果您出于某种原因不想使用 cua 矩形工具（也许如果您真的`replace-string`特别需要），那么使用自定义函数`apply-on-rectangle`将非常简单地放在一起。

**编辑**：实际上，比我预期的要复杂一些，但大部分代码是交互式规范和对“分隔”前缀参数行为的支持（都基于`replace-string`）。

**编辑 2**：我认为这值得以更全面的方式进行：

以下提供`C-x``r``M-%`和`C-x``r``C-M-%`，它（希望）按照您期望的方式运行。

```
(require 'rect)

(defun my-search-replace-in-rectangle
  (start end search-pattern replacement search-function literal)
  "Replace all instances of SEARCH-PATTERN (as found by SEARCH-FUNCTION)
with REPLACEMENT, in each line of the rectangle established by the START
and END buffer positions.

SEARCH-FUNCTION should take the same BOUND and NOERROR arguments as
`search-forward' and `re-search-forward'.

The LITERAL argument is passed to `replace-match' during replacement.

If `case-replace' is nil, do not alter case of replacement text."
  (apply-on-rectangle
   (lambda (start-col end-col search-function search-pattern replacement)
     (move-to-column start-col)
     (let ((bound (min (+ (point) (- end-col start-col))
                       (line-end-position)))
           (fixedcase (not case-replace)))
       (while (funcall search-function search-pattern bound t)
         (replace-match replacement fixedcase literal))))
   start end search-function search-pattern replacement))

(defun my-replace-regexp-rectangle-read-args (regexp-flag)
  "Interactively read arguments for `my-replace-regexp-rectangle'
or `my-replace-string-rectangle' (depending upon REGEXP-FLAG)."
  (let ((args (query-replace-read-args
               (concat "Replace"
                       (if current-prefix-arg " word" "")
                       (if regexp-flag " regexp" " string"))
               regexp-flag)))
    (list (region-beginning) (region-end)
          (nth 0 args) (nth 1 args) (nth 2 args))))

(defun my-replace-regexp-rectangle
  (start end regexp to-string &optional delimited)
  "Perform a regexp search and replace on each line of a rectangle
established by START and END (interactively, the marked region),
similar to `replace-regexp'.

Optional arg DELIMITED (prefix arg if interactive), if non-nil, means
replace only matches surrounded by word boundaries.

If `case-replace' is nil, do not alter case of replacement text."
  (interactive (my-replace-regexp-rectangle-read-args t))
  (when delimited
    (setq regexp (concat "\\b" regexp "\\b")))
  (my-search-replace-in-rectangle
   start end regexp to-string 're-search-forward nil))

(defun my-replace-string-rectangle
  (start end from-string to-string &optional delimited)
  "Perform a string search and replace on each line of a rectangle
established by START and END (interactively, the marked region),
similar to `replace-string'.

Optional arg DELIMITED (prefix arg if interactive), if non-nil, means
replace only matches surrounded by word boundaries.

If `case-replace' is nil, do not alter case of replacement text."
  (interactive (my-replace-regexp-rectangle-read-args nil))
  (let ((search-function 'search-forward))
    (when delimited
      (setq search-function 're-search-forward
            from-string (concat "\\b" (regexp-quote from-string) "\\b")))
    (my-search-replace-in-rectangle
     start end from-string to-string search-function t)))

(global-set-key (kbd "C-x r M-%") 'my-replace-string-rectangle)
(global-set-key (kbd "C-x r C-M-%") 'my-replace-regexp-rectangle) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-07-23T21:59:12.073

`M-%`在最近的 Emacs（例如 Emacs 25）中，您可以使用( `query-replace`) 或`C-M-%`( )开箱即用地执行此操作`query-replace-regexp`。

用于`M-x rectangle-mark-mode`创建矩形区域。`C-x C-x`必要时使用，将点放在标记之前。然后只需查询替换。

然而，他们并没有在 Emacs 25 for `replace-string`. 如果你愿意，你可以做到这一点，只需像`region-noncontiguous-p`在`query-replace`. 代码很简单：

```
(defun replace-string (from-string to-string &optional delimited start end backward
                       region-noncontiguous-p)
  "..."
  (declare (interactive-only
            "use `search-forward' and `replace-match' instead."))
  (interactive
   (let ((common
          (query-replace-read-args
           (concat "Replace"
                   (if current-prefix-arg
                       (if (eq current-prefix-arg '-) " backward" " word")
                     "")
                   " string"
                   (if (use-region-p) " in region" ""))
           nil)))
     (list (nth 0 common) (nth 1 common) (nth 2 common)
           (if (use-region-p) (region-beginning))
           (if (use-region-p) (region-end))
           (nth 3 common)
           (if (use-region-p) (region-noncontiguous-p)))))
  (perform-replace
    from-string to-string nil nil delimited nil nil start end backward region-noncontiguous-p)) 
```

或者，您可以只下载库[`replace+.el`](https://www.emacswiki.org/emacs/download/replace%2b.el)并使用`replace-string`那里的版本。它做你想做的事。

FWIW，我刚刚提交了 Emacs [bug#27897](https://debbugs.gnu.org/cgi/bugreport.cgi?bug=27897)以将此功能添加到`replace-string`同一库中的其他几个命令中，`replace.el`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-11T21:18:40.247

对于邪恶的用户，你可以使用我的包[evil-visual-replace](https://github.com/troyp/evil-visual-replace)来获取`query-replace`并`replace-regexp`进入邪恶的视觉块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-07T23:23:56.447

如果您处于 CUA 模式，则可以使用绑定到“先生”的 cua-replace-in-rectangle。

# c# - 将项目的多个副本添加到列表

> ID：11130549
> 
> 赞同：0
> 
> 时间：2012-06-21T01:51:38.750
> 
> 标签：c#, asp.net, .net, c#-4.0

我有一个 POCO 对象，根据输入的数字，我想将此对象复制到此对象类型的列表中。除了使用循环之外，还有其他优雅的方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T01:59:07.670

**简短的回答：**

```
list.AddRange(Enumerable.Repeat(item, count)); 
```

**例子：**

```
var list = new List<int>();

list.Add(0); // 0
list.Add(1); // 0, 1
list.Add(2); // 0, 1, 2

var item = 5;
var count = 3;

list.AddRange(Enumerable.Repeat(item, count)); // 0, 1, 2, 5, 5, 5 
```

**笔记：**

对于参考对象，这将添加相同的对象 x 次。如果要创建 x 次新对象并添加，可以执行以下操作：

```
list.AddRange(Enumerable.Repeat(0, count).Select(x => new MyObject())); 
```

# javascript - JavaScript：是否可以动态更改到一个元素又回来了？我正在使用“Zen Cart”购物车。默认设置是让访问者选择国家和动态填充“州”。如果他们选择了一个没有定义州的国家，下拉菜单会显示“在下面输入您的州”，并且会动态出现一个输入框。如果为该国家/地区定义了州，则当前的方式很好，但如果没有，那么将下拉菜单显示为文本输入而不是出现新的文本输入会更好。那么如果没有选择，我可以动态地将下拉列表更改为文本输入吗？而且，如果没有启用 JavaScript，它可以默认为文本输入吗？我

> ID：11130552
> 
> 赞同：3
> 
> 时间：2012-06-21T01:51:51.157
> 
> 标签：javascript, html-select, html-input

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T02:03:07.417

还有另一种可能的实现：

在 HTML 中添加**INPUT**和 SELECT 元素。

如果您已经定义了 STATES，您可以进行 INPUT`display: none;`并添加变体以选择到您的 SELECT 中；否则，您制作 SELECT `display: none;`，以便用户看到输入。

它易于实施和使用，并且对用户来说很清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T02:10:39.900

将*文本输入*放在 HTML 中。如果选择了具有州的国家/地区，请将*输入*替换为具有州（或地区或省或其他）的*选择*元素。如果 JavaScript 未启用或不可用，则用户手动进入状态。

就像是：

```
<select name="country" onchange="updateState(this);">
  <option value="country0">country0
  <option vlaue="country1">country1
  <option>country...
</select>
...
<input type="text" name="state">

<script>
  function updateState(element) {
    if ( /* element.value has states */) {
      // replace ths.form.state with a select
      // of appropriate states
    } else {
      // replace this.form.state with a text input
    }
  }
</script> 
```

*else*块是必需的，因为用户可以选择一个有州的国家，然后选择一个没有州的国家。上面有一些变化（例如切换显示而不是替换），选择任何适合的。

# facebook - Facebook APP授权空白页

> ID：11130556
> 
> 赞同：0
> 
> 时间：2012-06-21T01:52:28.253
> 
> 标签：facebook, authorization

我正在尝试为 Facebook auth 配置我的应用程序，但是当 Facebook 授权弹出窗口打开并引入凭据时，它简单地保持空白。我配置了站点 URL，类似于“http://abcd/app”，并且已经将应用程序域配置为“abcd”。这个配置不正确吗？为什么这个空白页？

谢谢！

# c# - 过滤 Lists 和 Union（或 Concat）中的重复项

> ID：11130557
> 
> 赞同：0
> 
> 时间：2012-06-21T01:52:33.190
> 
> 标签：c#, linq

```
 var testfilter = ( from p in test1  where !(from Q in test2 select new {Q.Website,Q.SSN,Q.Class})
                       Contains(new {p.Website,P.SSN,P.Class}) Select P).ToList();

    List<testResults> ResultList = (from R in testfilter  
                                    select new testResults  
                                    {  
                                       Website = R.Website,
                                        SSN = R.SSN,
                                        class = R.class, List1 = 'Yes'  
                                    }.ToList()  
                                   .Union (from Q in test2 
                                    select new testResults    
                                    {   
                                      Website = Q.Website,
                                      SSN = Q.SSN,class = Q.class, Status = Q.Status,
                                      List2 = 'Yes'   
                                   }.ToList(); 
```

我必须在以下列表中检查以下条件

1) 很少有记录只存在于**test1**列表中

2) Fever Records 仅存在于**test2**列表中

3）两个列表中都存在很少的记录，如果两个列表中都存在，则过滤它们并显示为一条记录。

上面的查询适用于少于 50k 的记录，但我有超过 200k 的记录要显示在 grid 中。如何使用`Except`或其他方法改进查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T04:45:00.333

你可以尝试使用不同的东西，不确定这是否是解决问题的最佳方法，只是一个建议

```
 List<testResults> distinctResultList = ResultList.Distinct().ToList(); 
```

# objective-c - 如何在 Core Data 中按星期几选择

> ID：11130566
> 
> 赞同：0
> 
> 时间：2012-06-21T01:55:07.980
> 
> 标签：objective-c, ios, core-data

是否可以在 Core Data 中使用 Date 属性上的星期几来使用谓词？

例如，在 SQL 中有 DAYOFWEEK() 函数。

我要做的是获取按星期几分组的平均分数，其中每个对象都有一个分数属性和一个日期属性。

我已经了解了分组部分，我只是找不到关于星期几部分的任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T03:00:00.633

您需要向核心数据实体添加一个瞬态属性。然后在实体 (NSManagedObject) 的实现文件中编写自定义代码。

在头文件中：

```
@property (readonly) NSString *weekDayText;
@property (readonly) NSInteger *weekDay; // use the number for sorting 
```

在实现文件中：

```
- (NSInteger)weekDay {
    // get the date from attribute
    // you declared in the header file also
    NSDate *event = self.scoreDate;

    // do some kind of test to make sure it's not null

    NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

    NSDateComponents *weekdayComponents =[gregorian components:NSWeekdayCalendarUnit fromDate:event];

    NSInteger day = [weekdayComponents weekday];
    // weekday 1 = Sunday for Gregorian calendar

    [gregorian release];

    return day;
}

- (NSString *)weekDayText {
    NSInteger day = self.weekDay;
    // now you would use some kind of locale to return the proper string
    // for each language 
    NSString *text = .... // need to implement

    return text;
} 
```

# bash - 使用 bash 脚本重命名文件

> ID：11130570
> 
> 赞同：1
> 
> 时间：2012-06-21T01:55:37.607
> 
> 标签：bash, shell, file-rename

我有一个 bash 脚本集，它在包含许多照片的文件夹中执行，并根据用户输入将它们按顺序拼接成全景图。生成完成后，将输出文件重命名为`$x-pano.jpg`并向上移动一个文件夹。

我的问题是数字前缀基于脚本的顺序执行，这意味着所有文件都会`1-pano.jpg`根据`n-pano.jpg`脚本执行期间生成的全景图数量重命名。

如何修改重命名过程以查看存储文件夹并获得最大的`$x`？我想将该数字增加 1 并用作文件的数字前缀。我目前的代码是

```
//get the list of files in directory and sort in increasing order
$filelist=$(find ../ -maxdepth 1 -type f | sort -n)

//get number of files
$length=${filelist[@]}

//get the last file
$lastFile=${fileList[$((length-1))]} 
```

将获取文件列表，按升序排序并从列表中获取最后一个文件。这就是我卡住的地方。用作`-`分隔符，如何捕获当前值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T02:41:27.353

您可能正在寻找构造，它[从变量的末尾](http://tldp.org/LDP/abs/html/refcards.html)[`${var%%foo}`剥离最长`foo`](http://tldp.org/LDP/abs/html/refcards.html)：

```
$ F=1-pano.jpg
$ echo ${F%%-pano.jpg}
1
$ F=1222-pano.jpg
$ echo ${F%%-pano.jpg}
1222 
```

试试`lastNum=${lastFile%%-pano.jpg}`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T04:14:26.173

假设这只是一个重命名任务：

```
$ find jason-pics/ -type f
jason-pics/other.jpg
jason-pics/somefile.jpg
jason-pics/mountain.jpg
jason-pics/car.jpg 
```

重命名：

```
i=0 
for jfile in $(find jason-pics/ -type f)
    do 
        echo "Renaming $jfile to jason-pics-rename/$i-pano-$(basename $jfile)" 
        ((i+=1)) 
        cp -v $jfile jason-pics-rename/$i-pano-$(basename $jfile)
done 
```

jason-pics-rename 目录的内容：

```
$ find jason-pics-rename/ -type f 
jason-pics-rename/4-pano-car.jpg
jason-pics-rename/1-pano-other.jpg
jason-pics-rename/3-pano-mountain.jpg
jason-pics-rename/2-pano-somefile.jpg 
```

删除 basename 以将文件重命名为 1-pano.jpg 到 n-pano.jpg

```
$ i=0; for jfile in $(find jason-pics/ -type f); do echo "Renaming $jfile to jason-pics-rename/$i-pano-$(basename $jfile)" ;((i+=1)); cp -v $jfile jason-pics-rename/$i-pano.jpg; done 
```

内容是：

```
$ find jason-pics-rename/ -type f 
jason-pics-rename/3-pano.jpg
jason-pics-rename/2-pano.jpg
jason-pics-rename/1-pano.jpg
jason-pics-rename/4-pano.jpg 
```

# tivoli - ITCAM for Application Diagnostic 和 ITCAM for Websphere Application Server 有什么区别？

> ID：11130571
> 
> 赞同：1
> 
> 时间：2012-06-21T01:55:59.217
> 
> 标签：tivoli

就像时间一样，ITCAM for Application Diagnostic 和 ITCAM for Websphere Application Server 有什么区别？

`ITCAM for Websphere Application Server just one part of`ITCAM for Application Dianostic是什么？

请帮忙详细解释一下。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:27:40.487

没错，ITCAM for Websphere Application Server 是 ITCAM for Application Diagnostics 产品中的代理之一。ITCAM for AD 还包括用于 J2EE、J2EE 数据收集器和 HTTP 服务器的代理。

您可以在此处找到更多详细信息：http: [//publib.boulder.ibm.com/infocenter/tivihelp/v24r1/index.jsp](http://publib.boulder.ibm.com/infocenter/tivihelp/v24r1/index.jsp)

# javascript - 保存和恢复 Firefox 扩展的价值

> ID：11130573
> 
> 赞同：0
> 
> 时间：2012-06-21T01:56:09.417
> 
> 标签：javascript, firefox, firefox-addon

我在使用由函数设置的状态栏标签值时遇到问题。我必须在用户关闭浏览器之前保存这个值，恢复它并再次运行该功能。我认为可能的唯一方法是使用cookies。我在 MDN 中发现了 2 个有趣的代码： 用于设置 cookie：

```
var ios = Components.classes["@mozilla.org/network/io-service;1"].getService(Components.interfaces.nsIIOService); 
    var cookieUri = ios.newURI("http://www.yourplacewhereyouwanttosetthecookie.com/", null, null); 
    var cookieSvc = Components.classes["@mozilla.org/cookieService;1"].getService(Components.interfaces.nsICookieService); 

    cookieSvc.setCookieString(cookieUri, null, "your_key=your_value;", null); 
```

并阅读它们：

```
var ios = Components.classes["@mozilla.org/network/io-service;1"] 
                .getService(Components.interfaces.nsIIOService); 
    var uri = ios.newURI("http://www.google.com/", null, null); 
    var cookieSvc = Components.classes["@mozilla.org/cookieService;1"] 
                      .getService(Components.interfaces.nsICookieService); 
    var cookie = cookieSvc.getCookieString(uri, null); 
```

问题是我无法理解这一点。我可以在哪里放置状态栏的标签？“your_key=your_value”是什么意思？我如何使用阅读代码恢复这个值？为什么我必须在“newURI”设置一个互联网地址？对不起，但我还在学习它:)。如果我得到一些帮助会很高兴。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:54:48.583

使用首选项保存该信息可能会更好。向您的默认首选项 js 文件添加首选项，例如`pref("extensions.myextension.thelabelvalue", "whatever");` [https://developer.mozilla.org/en/Building_an_Extension#Defaults_Files](https://developer.mozilla.org/en/Building_an_Extension#Defaults_Files)

然后添加`Components.utils.import("resource://gre/modules/Services.jsm");`到您的主要 javscript 文件的顶部[https://developer.mozilla.org/en/JavaScript_code_modules/Services.jsm](https://developer.mozilla.org/en/JavaScript_code_modules/Services.jsm)

然后您可以使用此处列出的设置/获取首选项方法：[https ://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIPrefBranch](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIPrefBranch)

例如

```
let myPrefs=Services.prefs.getBranch("extensions.myextension.")
myPrefs.setCharPref('thelabelvalue', text_value_from_label);
myPrefs.getCharPref('thelabelvalue'); 
```

# java - 为什么我得到这个 NoSuchProviderException

> ID：11130574
> 
> 赞同：2
> 
> 时间：2012-06-21T01:56:20.513
> 
> 标签：java, maven, rsa, bouncycastle, sha

我正在尝试将 Bouncy Castle 用作 Maven 项目中的安全提供程序。它似乎在代码库的某些地方运行良好，对某些人来说在任何地方都运行良好。但是，如果我尝试类似：

```
public class Foo {
    public static void main(String[] args) throws Exception {
        Signature signature = Signature.getInstance("SHA256withRSA", "BC");
    }
} 
```

然后我得到一个`NoSuchProviderException`例外。

在 pom 中，我将 Bouncy Castle 作为依赖项

```
<dependency>
          <groupId>bouncycastle</groupId>
          <artifactId>bcprov-jdk16</artifactId>
          <version>140</version>
          <scope>compile</scope>
</dependency> 
```

我尝试了几种不同的 JDK，并且都给出了相同的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T04:34:23.867

正如在[这个相关的 SO question 中](https://stackoverflow.com/questions/3711754/why-java-security-nosuchproviderexception-no-such-provider-bc)[回答](https://stackoverflow.com/a/3711786/254643)的那样，添加以下行应该可以解决您的问题。

```
Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider()); 
```

# java - 数据库插入语句的 Java NullPointerException

> ID：11130576
> 
> 赞同：-3
> 
> 时间：2012-06-21T01:56:34.580
> 
> 标签：java, nullpointerexception, sql-update

为什么这段代码会导致 NullPointerException？

```
ArrayList<OrdersAttr> ls = new ArrayList<OrdersAttr>();
OrdersAttr myOrder = null;
String connString = ConnStr.connString;
String connString2 = ConnStr.connString2;

Connection conn = null;
Connection conn2 = null;
Statement stmnt = null;
Statement stmnt2 = null;
String selectString = null;
String insertString = null;
String insertString2 = null;
String updateString = null;
int orderId = 0;

conn = DriverManager.getConnection(connString);
stmnt = conn.createStatement();

selectString = "SELECT A.ORDERID AS ORDERID FROM APP.ORDERS a, APP.CUSTOMER b WHERE ORDERSTATUS = 'NEW ORDER' AND " + " branchid=" + branchid + "and a.CUSTEMAIL = b.EMAIL";

ResultSet rs = stmnt.executeQuery(selectString);
while (rs.next()) {
    orderId = rs.getInt("ORDERID");
    myOrder = new OrdersAttr();
    myOrder.id = rs.getInt("ORDERID");
    myOrder.date = rs.getString("datetime");
    myOrder.orderitems = rs.getString("orderitems");
    myOrder.orderquantity = rs.getString("orderquantity");
    myOrder.ordersizes = rs.getString("ordersizes");
    myOrder.address = rs.getString("floor_f") + " "
        + rs.getString("building_f") + " "
        + rs.getString("street_f") + " "
        + rs.getString("area_subdivision_district_f") + " "
        + rs.getString("city_f");
    myOrder.name = rs.getString("firstname") + " " + rs.getString("lastname");
    myOrder.status = rs.getString("ORDERSTATUS");
    myOrder.contact = rs.getString("CONTACT");

    conn2 = DriverManager.getConnection(connString2);
    stmnt2 = conn2.createStatement();

    insertString = "INSERT INTO APP.ORDERS VALUES ('" + myOrder.id + "','" + myOrder.date + "','" + myOrder.orderitems + "','" + myOrder.orderquantity + "','" + myOrder.ordersizes + "','" + myOrder.status + "')";
    insertString2 = "INSERT INTO APP.CUSTOMER VALUES ('" + myOrder.id + "','" + myOrder.name + "','" + myOrder.address + "','" + myOrder.contact + "')";

    stmnt2.executeUpdate(insertString);
    stmnt2.executeUpdate(insertString2);

    updateString = "UPDATE APP.ORDERS SET ORDERSTATUS = 'SENT TO LOCAL BRANCH'";
    stmnt.executeUpdate(updateString);
} 
```

UPDATE String 被执行并更新数据库，但为什么它返回 NullPointerException 并且不执行 INSERT 语句？有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T02:12:50.013

由于您无法获得堆栈跟踪（无法访问服务器日志？）您所能做的就是对每个可能的项目进行空检查。

例如

```
conn = DriverManager.getConnection(connString);
stmnt = conn.createStatement();
// Without having DriveManager source, how do you know conn can't be null?
// This is potentially unsafe.

ResultSet rs = stmnt.executeQuery(selectString);
while (rs.next()) {
// Could rs be null (e.g. if the select string had an SQL syntax problem) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T02:11:37.557

如果没有堆栈跟踪或可编译代码，或者至少告诉我们崩溃发生在哪一行，您将无法获得直接答案。

但是，如果您这样做，您可能会弄清楚：

1.  摆脱所有的= null。
2.  将所有变量更改为最终变量。

这两件事将迫使您在使用它们之前分配变量，这意味着您不会意外忘记分配一个并将其与您现在提供的空值一起使用。

这可能意味着您需要添加一些新变量，最终变量只能分配一次。这通常是一件明智的事情——一个变量，一个目的。不要仅仅因为它们相似就重用变量。

此外，请确保您不要在 catch 中没有任何内容的情况下执行 try/catch，然后在 catch 之后有代码（您的代码看起来不是这种情况）。

这样做应该可以帮助您缩小问题范围，甚至可以解决它。

# objective-c - 在窗口中切换自定义视图

> ID：11130580
> 
> 赞同：0
> 
> 时间：2012-06-21T01:57:31.370
> 
> 标签：objective-c, macos, cocoa

我有一个 .xib，它有 1 个窗口，`NSToolbar`并且有多个自定义视图，它们都是同一个 xib 的一部分。当我单击工具栏图标时，它会切换视图，但不会显示该视图上的任何按钮或其他对象。

我知道视图正在切换，因为两个视图的大小不同，并且窗口正在调整

切换视图的代码：

```
NSInteger tag = [sender tag];

NSView *view = [self viewForTag:tag];
NSView *previousView = [self viewForTag: currentViewTag];
currentViewTag = tag;
NSRect newFrame = [self newFrameForNewContentView:view];

[NSAnimationContext beginGrouping];
[[NSAnimationContext currentContext] setDuration:0.1];

if ([[NSApp currentEvent] modifierFlags] & NSShiftKeyMask)
[[NSAnimationContext currentContext] setDuration:1.0];

[[[self.window contentView] animator] replaceSubview:previousView with:view];
[[self.window animator] setFrame:newFrame display:YES];

[NSAnimationContext endGrouping]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:22:24.173

这可能不是最好的方法，我不确定，但我切换视图的方式是这样的：

```
#import "AppDelegate.h"

@implementation AppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    self.firstSubView = [[FirstViewController alloc]initWithNibName:@"FirstViewController" bundle:nil];
    self.secondSubView = [[SecondViewController alloc]initWithNibName:@"SecondViewController" bundle:nil];

    [self.customView addSubview: self.firstSubView.view];
    self.firstSubView.view.frame = self.customView.bounds;

    self.firstViewIsSelected = YES;
}

- (IBAction)viewSwitched:(id)sender {
    if (self.firstViewIsSelected) {
        [self.firstSubView.view removeFromSuperview];
        [self.customView addSubview: self.secondSubView.view];
        self.secondSubView.view.frame = self.customView.bounds;
    }
    else{
        [self.secondSubView.view removeFromSuperview];
        [self.customView addSubview: self.firstSubView.view];
        self.firstSubView.view.frame = self.customView.bounds;
    }
    self.firstViewIsSelected = !self.firstViewIsSelected;
} 
```

# php - 在 PHP 的 mcrypt 扩展的文档中，“$td”代表什么？

> ID：11130582
> 
> 赞同：1
> 
> 时间：2012-06-21T01:58:18.127
> 
> 标签：php, coding-style, mcrypt

[http://php.net/manual/en/function.mcrypt-module-open.php](http://php.net/manual/en/function.mcrypt-module-open.php)

```
<?php
    $td = mcrypt_module_open(MCRYPT_DES, '',
        MCRYPT_MODE_ECB, '/usr/lib/mcrypt-modes');

    $td = mcrypt_module_open('rijndael-256', '', 'ofb', '');
?> 
```

在文档中，它在 's page 中被描述为“加密描述符” `mcrypt_enc_get_iv_size()`，但据我所知。

这让我很烦，它不是`$ed`:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T02:02:13.970

“双鱼描述符”？

描述

> 该函数打开算法模块和要使用的模式。算法的名称在算法中指定，例如“ **twofish** ”或者是 MCRYPT_ciphername 常量之一。通过调用 mcrypt_module_close() 关闭模块。

返回值

> 通常它返回一个加密**描述符**，或者错误时返回 FALSE。

# mysql - 希望 SELECT 在一行中返回多个值

> ID：11130585
> 
> 赞同：1
> 
> 时间：2012-06-21T01:58:27.607
> 
> 标签：mysql, sql

我有一个这样的mysql表结构：

```
id     int     primary key
name   varchar 
start_time float 
```

数据可能是这样的：

```
id    name      start_time
1     tt1          20.3
2     tt3          19.5
3     tt1          23.1
4     tt1          40.1
5     tt4          20.5
6     tt3          44.2 
```

我想要按名称分组的结果集，并像这样列出每个组中的所有 start_time：

```
name       start_times
tt1      (20.3,23.1,40.1)
tt3      (19.5,44.2)
tt4      (20.5) 
```

并且结果集的顺序是每组的start_time个数。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T02:12:26.943

您可以使用[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html#function_group-concat) FUNCTION。

```
SELECT name, GROUP_CONCAT(start_time ORDER BY start_time) AS start_times
FROM your_table GROUP BY name
ORDER BY COUNT(start_time) 
```

# jquery - jQuery 将 HTML 加载到

> ID：11130586
> 
> 赞同：3
> 
> 时间：2012-06-21T01:58:37.107
> 
> 标签：jquery, url, html

jQuery 有没有办法从 url 加载 Html 内容？

例如：

```
<div class="MyContent">

<html>
<head>
<title>Hello World Page</title>
</head>
<body>
Hello World
</body>
</html>

</div> 
```

我可以将 div 中的所有 HTML 替换为 URL 中的内容吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-21T02:01:57.827

您正在寻找[`.load()`](http://api.jquery.com/load/)

> 从服务器加载数据并将返回的 HTML 放入匹配的元素中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T02:05:02.877

首先，使用此代码创建一个 HTML 页面

```
<html>
<head>
<title>Hello World Page</title>
</head>
<body>
Hello World
</body>
</html> 
```

在 DIV 中有一个 iFrame（可选）并使用 jQuery 将 iFrame 的源更改为 URL。该 url 应指向您在上面创建的页面。

```
function loadIframe(iframeName, url) {
    var $iframe = $('#' + iframeName);
    if ( $iframe.length ) {
        $iframe.attr('src',url);   
        return false;
    }
    return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T02:04:10.147

在 jQuery 中使用`.get()`和。`.html()`前任，

```
$.get(url, function (data) {
   $('.MyContent').html(data);
}); 
```

# windows-phone-7 - StackPanel 中的 WP7 文本块宽度

> ID：11130587
> 
> 赞同：1
> 
> 时间：2012-06-21T01:58:40.497
> 
> 标签：windows-phone-7, xaml

我在水平堆栈面板内的垂直堆栈面板内有一个文本块（想想 Facebook - Horz 堆栈面板左侧有一张图片，右侧有一个垂直堆栈面板，带有名称和消息）。

除非我在其上设置宽度，否则消息的文本块不会换行（否则我猜它没有意识到它位于页面的边缘并且文本只是一直在页面的右侧）。如果我在文本块上设置静态宽度，则文本会正确换行。

我的问题是我不想要静态宽度，因为我相信不同的手机会有不同的像素宽度，并且因为我想稍后添加对横向和纵向方向的支持。

我如何告诉我的文本块只适合页面，但不给它一个静态宽度，因为 width=Auto 不起作用？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:01:44.070

您的担忧（以及对您问题的需要）是没有根据的。

Windows Phone 7 设备都具有相同的屏幕宽度（480 像素），并且不会发布具有不同屏幕分辨率的 WP7 设备。

如果您的页面支持旋转（横向和水平方向），那么您可以使用方向更改事件在 480 和 800 像素之间进行适当调整。

# pointers - golang 指针上的指针作为函数参数

> ID：11130592
> 
> 赞同：21
> 
> 时间：2012-06-21T01:59:32.213
> 
> 标签：pointers, go

我有以下功能：

```
func addCatsToMap(m map[string][]CatHouse, meowId int, treats Set, dog *Dog) {

//if (complicated thing) add Cat to m

} 
```

其中`Set`, 的类型`treats`, 是具有以下定义的接口：

```
type Set interface {
  Add(value string)
  Contains(value string) (bool)
  Length() (int)
  RemoveDuplicates()
} 
```

**问题：**

, `m`,`treats`和`dog`是*通过引用传递的*，并且`meowId`它的值是否被复制？

我假设：

*   `m`是按引用传递，因为它是一张地图
*   `dog`是一个结构。所以，我应该传递指针以避免复制数据

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-21T04:06:16.863

接口类型只是一组方法。请注意，接口定义的成员不指定接收器类型是否为指针。这是因为*值类型的方法集是其关联指针类型的方法集的子集*。那是一口。我的意思是，如果您有以下情况：

```
type Whatever struct {
    Name string
} 
```

并且您定义了以下两种方法：

```
func (w *Whatever) Foo() {
    ...
}

func (w Whatever) Bar() {
    ...
} 
```

那么类型`Whatever`只有方法`Bar()`，而类型`*Whatever`有方法`Foo()`和`Bar()`。这意味着如果您有以下界面：

```
type Grits interface {
    Foo()
    Bar()
} 
```

然后`*Whatever`实现`Grits`而不实现`Whatever`，因为`Whatever`缺少方法`Foo()`。当您将函数的输入定义为接口类型时，您不知道它是指针类型还是值类型。

以下示例说明了一个以两种方式采用接口类型的函数：

```
package main

import "fmt"

type Fruit struct {
    Name string
}

func (f Fruit) Rename(name string) {
    f.Name = name
}

type Candy struct {
    Name string
}

func (c *Candy) Rename(name string) {
    c.Name = name
}

type Renamable interface {
    Rename(string)
}

func Rename(v Renamable, name string) {
    v.Rename(name)
    // at this point, we don't know if v is a pointer type or not.
}

func main() {
    c := Candy{Name: "Snickers"}
    f := Fruit{Name: "Apple"}
    fmt.Println(f)
    fmt.Println(c)
    Rename(f, "Zemo Fruit")
    Rename(&c, "Zemo Bar")
    fmt.Println(f)
    fmt.Println(c)
} 
```

你可以打电话`Raname(&f, "Jorelli Fruit")`但不打电话`Rename(c, "Jorelli Bar")`，因为两者都`Fruit`实现`*Fruit`，`Renamable`而`*Candy`实现`Renable`和`Candy`不实现。

[http://play.golang.org/p/Fb-L8Bvuwj](http://play.golang.org/p/Fb-L8Bvuwj)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-21T03:30:23.043

引用传递是一种语言的东西，Go 中没有什么是“引用传递”。通过引用传递意味着赋值运算符在单独使用时可以更改原始值。但是，有一些引用类型，例如指向某处的映射和指针。对它们使用赋值运算符不会修改原来的，除非你使用其他运算符，例如地图索引和`*`运算符。

你是正确的，你的地图`m`是一个引用类型，因此就像一个指针。除替换地图外，对地图的任何更改都会修改原始地图。

```
m["whatever"] = 2           // Modifies the original map
m = anothermap              // Does not modify the original map 
```

如果存在真正的“通过引用”，则第二个示例将修改原始地图。

传递一个指针，就像你做的那样，`dog`你可以修改原始文件。如果你调用任何指针方法或使用`*`操作符，原来的都会改变。在您的示例中，可能不需要指针。如果`Dog`很小，则仅传递一个副本可能会更容易。由程序员决定何时是使用指针的好时机。

`Set`不是通过引用传递的。**接口不是引用。**虽然在 6g 编译器内部，接口确实使用指针，但接口本身并不像一个。传递一个接口，不管它包含的对象的大小，与使用 6g 编译器传递一个指针一样便宜。但是，无法像使用指针和映射那样修改接口的原始值。

虽然不能修改原来传递的接口，但是接口可以包含指针类型。在这种情况下，它就像狗指针一样，调用某些方法可以修改原始指针。对于您的特定`Set`接口，我猜它包含基于方法名称的指针类型。所以当你调用时`set.Add(whatever)`，它会改变原来的内部数据。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T17:28:00.140

> [调用，Go 编程语言规范](http://golang.org/ref/spec#Calls)
> 
> 在函数调用中，函数值和参数按通常的顺序计算。在它们被评估之后，调用的参数按值传递给函数，被调用的函数开始执行。函数的返回参数在函数返回时按值传回调用函数。
> 
> [函数参数什么时候传值？FAQ - Go 编程语言。](http://golang.org/doc/go_faq.html#pass_by_value)
> 
> 与 C 家族中的所有语言一样，Go 中的所有内容都是按值传递的。也就是说，一个函数总是得到一个被传递的东西的副本，就好像有一个赋值语句将值分配给参数一样。例如，将 int 值传递给函数会生成 int 的副本，传递指针值会生成指针的副本，但不会复制它指向的数据。（有关这如何影响方法接收器的讨论，请参阅下一节。）
> 
> 映射和切片值的行为类似于指针：它们是包含指向底层映射或切片数据的指针的描述符。复制地图或切片值不会复制它指向的数据。复制接口值会复制存储在接口值中的事物。如果接口值包含一个结构，则复制接口值会复制该结构。如果接口值包含一个指针，则复制接口值会复制指针，但不会复制它指向的数据。

# c# - GetXml 方法时DataSet 是否支持复杂类型？

> ID：11130594
> 
> 赞同：2
> 
> 时间：2012-06-21T01:59:38.997
> 
> 标签：c#, xml, dataset, strongly-typed-dataset

我有以下架构：

```
<?xml version="1.0" encoding="utf-8" ?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" attributeFormDefault="unqualified">
    <xs:element name="WSParam">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="domain" type="xs:string"/>
                <xs:element name="userName" type="xs:string"/>
                <xs:element name="Cases">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="caseName" type="xs:string"/>
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

我期望 DataSet.GetXml() 的输出如下：

```
<NewDataSet>
    <WSParam>
        <domain>ad</domain>
        <userName>admin</userName>
        <Cases>
            <caseName>case 1</caseName>
        </Cases>
    </WSParam>
</NewDataSet> 
```

但输出是：

```
<NewDataSet>
    <WSParam>
        <domain>ad</domain>
        <userName>admin</userName>
    </WSParam>
    <Cases>
        <caseName>case 1</caseName>
    </Cases>
</NewDataSet> 
```

任何人都向我确认具有复杂类型的 DataSet.GetXml() 的正确行为，否则我会错过一些东西。

非常感谢任何指导。

**更新1：**

我正在使用 DataSet.ReadXmlSchema("...xsd")。由此，我使用 DataSet.Tables[..] 创建 DataTable 来放置数据。然后调用 DataSet.GetXml() 来获取字符串 XML 表示。

**更新2：**

**代码：**

```
private void button2_Click(object sender, EventArgs e)
{
    String sXSD = @"C:\WindowsFormsApplication1\WindowsFormsApplication1\XMLFile1.xsd";
    DataSet dsXSD = new DataSet();
    dsXSD.ReadXmlSchema(sXSD);
    int k = 0;
    do
    {
        DataRow d;
        d = dsXSD.Tables["tblUser"].NewRow();
        int i = 0;
        do
        {
            d[i] = k;
            i = (i + 1);
        } while (i < dsXSD.Tables["tblUser"].Columns.Count);
        dsXSD.Tables["tblUser"].Rows.Add(d);
        d = dsXSD.Tables["tblUserRole"].NewRow();
        i = 0;
        do
        {
            d[i] = k;
            i = (i + 1);
        } while (i < dsXSD.Tables["tblUserRole"].Columns.Count);
        dsXSD.Tables["tblUserRole"].Rows.Add(d);
        k = (k + 1);
    } while (k < 3);
    dsXSD.WriteXml("c:\\test.xml");

} 
```

**XSD：**

```
<?xml version="1.0" encoding="utf-16" ?>
<xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" version="1.0"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
  <xsd:element name="tblUser">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="UserID" type="xsd:int" />
        <xsd:element name="FullName" type="xsd:string" nillable="true" />
        <xsd:element name="tblUserRole">
          <xsd:complexType>
            <xsd:sequence>
              <xsd:element name="UserID" type="xsd:int" />
              <xsd:element name="RoleID" type="xsd:int" />
            </xsd:sequence>
          </xsd:complexType>
        </xsd:element>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
</xsd:schema> 
```

**输出：**

```
<?xml version="1.0" standalone="yes"?>
<NewDataSet>
  <tblUser>
    <UserID>0</UserID>
    <FullName>0</FullName>
    <tblUserRole>
      <UserID>0</UserID>
      <RoleID>0</RoleID>
    </tblUserRole>
  </tblUser>
  <tblUser>
    <UserID>1</UserID>
    <FullName>1</FullName>
    <tblUserRole>
      <UserID>1</UserID>
      <RoleID>1</RoleID>
    </tblUserRole>
  </tblUser>
  <tblUser>
    <UserID>2</UserID>
    <FullName>2</FullName>
    <tblUserRole>
      <UserID>2</UserID>
      <RoleID>2</RoleID>
    </tblUserRole>
  </tblUser>
</NewDataSet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T06:46:47.597

我不确定是否可以使用数据集。

但是你可以通过创建一个非标准的微软数据集 xsd 来自己做。它需要一些工作，但您可以随后根据需要对其进行调整。

**关键是使用 xs:group。**

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" attributeFormDefault="unqualified">
  <xs:element name="NewDataSet">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="WSParam">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="domain" type="xs:string" minOccurs="0" />
              <xs:element name="userName" type="xs:string" minOccurs="0" />
              <xs:group ref="CasesGroup" minOccurs="0"/>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>

    <xs:group name="CasesGroup">
    <xs:sequence>
      <xs:element name="Cases">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="CaseName" minOccurs="1" maxOccurs="unbounded">
              <xs:complexType>
                <xs:simpleContent>
                  <xs:extension base="xs:string">
                  </xs:extension>
                </xs:simpleContent>
              </xs:complexType>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:group>
</xs:schema> 
```

对于上述 xsd（我将其命名为 wsparam.xsd）运行“xsd.exe wsparam.xsd /classes /n:Yournamespace”

现在您可以从代码中填充数据

```
 NewDataSetWSParam p = new NewDataSetWSParam();
    p.domain = "ad";
    p.userName = "admin";
    p.Cases = new NewDataSetWSParamCaseName[] {  
            new NewDataSetWSParamCaseName () { Value ="case 1" }
    }; 
```

现在是棘手的部分在序列化以从 XML 文件中剥离命名空间属性时使用非标准 XmlTextWriter

```
public class NoNamespaceXmlWriter : XmlTextWriter
{
            public NoNamespaceXmlWriter(System.IO.TextWriter output)
                : base(output)
            {
                Formatting = System.Xml.Formatting.None;
            }

            public override void WriteStartDocument() { }
            public override void WriteStartElement(string prefix, string localName, string ns)
            {
                base.WriteStartElement("", localName, "");
            }
        } 
```

使用下面的代码序列化您的对象

```
string serialXML = string.Empty;
        XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
        ns.Add("", "");

        XmlSerializer serializer = new XmlSerializer(p.GetType());
        StringBuilder sb = new StringBuilder();
        StringWriter sw = new StringWriter(sb);
        using (XmlWriter writer = new RDECommon.Xml.NoNamespaceXmlWriter(sw))
        {
            serializer.Serialize(writer, p, ns);
            serialXML = sb.ToString();
        } 
```

serialXML 包含您的 xml

```
<NewDataSet>
    <WSParam>
        <domain>ad</domain>
        <userName>admin</userName>
        <Cases>
            <caseName>case 1</caseName>
        </Cases>
    </WSParam>
</NewDataSet> 
```

# javascript - 使用 jquery 选择文本和元素

> ID：11130595
> 
> 赞同：0
> 
> 时间：2012-06-21T01:59:55.827
> 
> 标签：javascript, jquery, html

以下是我正在尝试做的事情：

我找到了下面的 js 函数，它在 textarea 中显示选定的文本

```
function getSelected() {
  var txt = '';
  if (window.getSelection) {
    txt = window.getSelection();
  } else if (document.getSelection) {
    txt = document.getSelection();
  } else if (document.selection) {
    txt = document.selection.createRange().text;
  } else return;
  document.selectedtext.value =  txt;
}

<textarea name="selectedtext" rows="5" cols="20"></textarea> 
```

但我想要实现的是在复制的同时获取 HTML 元素。例如：

```
<div>some text is entered here</div>
<div>line2</div> 
```

使用上面的 JS，textarea 中的内容是：

```
some text is entered here
line2 
```

我期待的是：

```
<div>some text is entered here</div>
<div>line2</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T02:13:20.757

这是一个比乍一看有点复杂的问题，因为存在各种边缘情况，即用户选择容器中的某些内容而不是其全部内容。在这种情况下，它应该用父 div 智能地包装片段吗？您是在尝试继承样式还是多于一层的 DOM 层次结构？我强烈推荐[Rangy Library](http://code.google.com/p/rangy/)，它处理了许多这些陷阱。特别是我会从选择对象中检查[toHtml()方法。](http://code.google.com/p/rangy/wiki/RangySelection#toHtml%28%29)

# c# - 在使用之前确保 App.config 存在

> ID：11130602
> 
> 赞同：1
> 
> 时间：2012-06-21T02:00:58.103
> 
> 标签：c#, .net

> **可能重复：**
> [如何判断app.config文件是否存在](https://stackoverflow.com/questions/5297170/how-to-determine-whether-app-config-file-exists)

有没有办法在尝试访问值之前确保 App.config 存在？当我这样做时，我不想遇到“对象引用未设置为对象错误的实例”的情况：

`machineName = appConfig.AppSettings.Settings["MachineName"].Value;`

如果找不到我的 App.config，我不确定如何知道它是否存在或 appConfig 对象是否已正确填充。我努力了

`if (appConfig.AppSettings.Settings.Count == 0) { // do something }`

但我不确定这是否是最好的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T02:05:53.597

与其检查 App.config 是否存在，为什么不对值执行空检查？当您在空值上调用该方法时会发生错误。

```
if (appConfig.AppSettings.Settings["MachineName"] != null)
{
    machineName = appConfig.AppSettings.Settings["MachineName"].Value;
} 
```

# html - 将来自相同结构的不同 JSON 对象的两个数据列对齐

> ID：11130603
> 
> 赞同：0
> 
> 时间：2012-06-21T02:01:02.367
> 
> 标签：html, json, jsrender

我有两个结构相同的 JSON 对象，我想在我的 html 页面上并排显示它们。由于我正在构建排序比较，因此我希望在同一行上查看匹配的数据元素。仅左或仅右数据元素需要在对面的列中显示，旁边有空格。

我正在尝试使用 JsRender/JsViews 来执行此操作，但一次处理多个数据源很困难。或者将每一面作为单独的模板，每一面都不知道在哪里加载数据，因为它需要知道是否存在相反的情况。

只要它有效，我就可以使用任何其他机制。

谢谢，格雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:05:42.393

您可以通过上下文帮助器将其他数据对象传递给 JsRender 模板，或者通过在渲染调用中作为上下文传递：

```
render(dataOne, {data2: dataTwo}) 
```

或通过注册为助手：

```
$.views.helpers({
    data2: dataTwo
}) 
```

无论哪种方式，您都可以访问帮助器对象`~data2`，例如通过编写`{{:~data2.prop}}`或`{{for ~data2}}...{{/for}}`。

当然，dataOne 或 dataTwo 可以是对象或数组。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-27T01:50:23.463

为什么不在 notepad++ 中使用比较插件？

# python - ImportError：在使用 cx_Freeze 冻结的应用程序中导入 win32clipboard 时，DLL 加载失败

> ID：11130605
> 
> 赞同：3
> 
> 时间：2012-06-21T02:01:15.360
> 
> 标签：python, windows, pywin32, cx-freeze

我有一个 Python 2.7 程序可以导入`win32clipboard`. 我尝试在 Windows XP SP3 32 位上使用 cx_Freeze 4.2.3 冻结它，以创建安装 MSI。我`setup.py`根据 cx_Freeze 文档做了一个，并使用了以下命令：

```
c:\python27\python.exe setup.py bdist_msi 
```

当我在另一台没有安装 Python 2.7 的 PC 上运行它时，在导入的行上出现异常`win32clipboard`：

```
ImportError: DLL load failed: The specified module could not be found. 
```

我可以看到它`win32clipboard.pyd` *已*包含在构建中。

缺少什么依赖项，我如何确保它被包含在内？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T02:02:23.783

我最终认为它`win32clipboard.pyd` *被*包括在内，但是，`win32clipboard.pyd`取决于`pywintypes27.dll`cx_Freeze*没有*从 .cx_Freeze 复制`c:\windows\system32`。

短期破解是手动复制`c:\windows\system32\pywintypes27.dll`到`build\exe.win32-2.7`，然后`setup.py bdist_msi`再次运行。

改进的 hack 是在 setup.py 中使用以下内容：

```
import os
import sys
import win32api
...
pywintypes_dll = 'pywintypes{0}{1}.dll'.format(*sys.version_info[0:2])      # e.g. pywintypes27.dll
build_exe_options = {..., "include_files": [ (os.path.join(win32api.GetSystemDirectory(), pywintypes_dll), pywintypes_dll)]}
...
setup(  ...,
        options = { 'build_exe': build_exe_options, 
                    ...,
                  },
        ...) 
```

（最好改进 cx_Freeze 以自动检测`pywintype27.dll`依赖关系，但我想这始终是一个正在进行的工作。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T22:38:58.007

cx_Freeze 使用挂钩机制来处理这种情况。挂钩存储在模块中`cx_Freeze.hooks`。每个钩子都以正在调查的操作、加载或丢失以及模块名称命名。该模块本身提供了很多示例。

这是您处理 win32clipboard 模块的方法：

```
from cx_Freeze import hooks
def load_win32clipboard(finder, module):
    finder.IncludeModule("pywintypes")

hooks.load_win32clipboard = load_win32clipboard
... 
```

现在当cx_Freeze遇到win32clipboard时，也会包含pywintypes。cx_Freeze 已经有一个 pywintypes 挂钩，可以复制相应的文件。

# android - Android 杀死了我的服务需要了解 CPU 统计信息

> ID：11130606
> 
> 赞同：2
> 
> 时间：2012-06-21T02:01:49.763
> 
> 标签：android

在某些特定情况下，Android 会在 com.net.myspeechservice 包中杀死我的服务，例如，当手机上有呼叫时，它会杀死该服务。logcat 向我展示了这些统计信息。

因为它似乎很明显因为 CPU 负载而被杀死。

我没有得到的是我的应用程序导致 CPU 消耗的百分比是多少？？？它根本没有显示出来。

我没有得到以下手段？

```
Load: 3.13 / 2.78 / 2.26 
```

我如何从这些统计数据中评估我的应用程序造成的百分比。

请指教。

谢谢，

```
06-21 06:44:35.042: E/ActivityManager(88): ANR in com.net.myspeechservice
06-21 06:44:35.042: E/ActivityManager(88): Reason: Executing service com.net.myspeechservice/.services.ManagementService
06-21 06:44:35.042: E/ActivityManager(88): Load: 3.13 / 2.78 / 2.26
06-21 06:44:35.042: E/ActivityManager(88): CPU usage from 10340ms to 0ms ago:
06-21 06:44:35.042: E/ActivityManager(88):   44% 178/com.android.phone: 43% user + 1.8% kernel / faults: 179 minor
06-21 06:44:35.042: E/ActivityManager(88):   25% 36/surfaceflinger: 21% user + 3.6% kernel
06-21 06:44:35.042: E/ActivityManager(88):   10% 38/mediaserver: 8.1% user + 2.6% kernel
06-21 06:44:35.042: E/ActivityManager(88):   5.1% 1496/android.process.acore: 2.8% user + 2.3% kernel / faults: 3984 minor
06-21 06:44:35.042: E/ActivityManager(88):   3.3% 150/com.android.systemui: 3.3% user + 0% kernel / faults: 6 minor
06-21 06:44:35.042: E/ActivityManager(88):   1.9% 45/adbd: 0.2% user + 1.6% kernel / faults: 420 minor
06-21 06:44:35.042: E/ActivityManager(88):   0.6% 88/system_server: 0.3% user + 0.2% kernel / faults: 1 minor
06-21 06:44:35.042: E/ActivityManager(88):   0% 6391/ekawas.blogspot.com: 0% user + 0% kernel / faults: 40 minor
06-21 06:44:35.042: E/ActivityManager(88):   0.1% 35/rild: 0% user + 0% kernel
06-21 06:44:35.042: E/ActivityManager(88): 100% TOTAL: 82% user + 17% kernel + 0.1% softirq
06-21 06:44:35.042: E/ActivityManager(88): CPU usage from 1521ms to 2139ms later:
06-21 06:44:35.042: E/ActivityManager(88):   41% 178/com.android.phone: 40% user + 1.6% kernel / faults: 1 minor
06-21 06:44:35.042: E/ActivityManager(88):     50% 178/m.android.phone: 48% user + 1.6% kernel
06-21 06:44:35.042: E/ActivityManager(88):     1.6% 235/RILReceiver: 1.6% user + 0% kernel
06-21 06:44:35.042: E/ActivityManager(88):   29% 36/surfaceflinger: 22% user + 6.4% kernel
06-21 06:44:35.042: E/ActivityManager(88):     22% 61/SurfaceFlinger: 19% user + 3.2% kernel
06-21 06:44:35.042: E/ActivityManager(88):     1.6% 36/surfaceflinger: 1.6% user + 0% kernel
06-21 06:44:35.042: E/ActivityManager(88):     1.6% 63/Binder Thread #: 1.6% user + 0% kernel
06-21 06:44:35.042: E/ActivityManager(88):     1.6% 109/Binder Thread #: 0% user + 1.6% kernel
06-21 06:44:35.042: E/ActivityManager(88):     1.6% 1283/Binder Thread #: 0% user + 1.6% kernel
06-21 06:44:35.042: E/ActivityManager(88):   16% 38/mediaserver: 11% user + 4.9% kernel
06-21 06:44:35.042: E/ActivityManager(88):     6.5% 1551/gle.mp3.decoder: 4.9% user + 1.6% kernel
06-21 06:44:35.042: E/ActivityManager(88):     3.2% 1553/AudioTrackThrea: 1.6% user + 1.6% kernel
06-21 06:44:35.042: E/ActivityManager(88):     1.6% 72/AudioOut_1: 0% user + 1.6% kernel
06-21 06:44:35.042: E/ActivityManager(88):     1.6% 1552/OMXCallbackDisp: 0% user + 1.6% kernel
06-21 06:44:35.042: E/ActivityManager(88):   9.6% 88/system_server: 4.8% user + 4.8% kernel
06-21 06:44:35.042: E/ActivityManager(88):     8% 103/ActivityManager: 4.8% user + 3.2% kernel
06-21 06:44:35.042: E/ActivityManager(88):   1.6% 1496/android.process.acore: 0% user + 1.6% kernel / faults: 196 minor
06-21 06:44:35.042: E/ActivityManager(88):     3.3% 1542/ApplicationsPro: 0% user + 3.3% kernel
06-21 06:44:35.042: E/ActivityManager(88): 100% TOTAL: 82% user + 17% kernel 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T02:21:49.397

负载线向您显示实时操作所有线程所需的 CPU 内核数量。即负载为 1 意味着您在此期间充分利用了单个内核。负载为 5 意味着您需要 5 个核心来实时运行，或者如果您有两个核心，您将使其超载 150%。

```
Load: X / Y / Z 
```

负载显示为三个数字，以给出不同时间范围内的负载。它通常以 1 分钟、5 分钟和 15 分钟的形式给出。

在不知道您的应用程序包名称的情况下，虽然我无法开始查看日志的其余部分。尽管猜测它是`ekawas.blogspot.com`（第二个快照中缺少）这表明您的应用程序的 CPU 负载不是问题。然而，这可能是一个内存问题。

# java - Android For 循环

> ID：11130609
> 
> 赞同：14
> 
> 时间：2012-06-21T02:02:06.827
> 
> 标签：java, android, for-loop

我有以下代码...

```
String t = " "; 
for(int l=0; l<=5; l++){
    t = "Num: " + l + "\n";
}

VarPrueba.setText(t); 
```

我想遍历一组数字，并生成一个`String`在最后列出它们的数字。输出应该是这样的......

```
1
2
3
4
5 
```

有人可以帮助我了解如何更正我的代码。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-21T02:03:45.843

更改如下：

```
t+="Num: " + l + "\n"; 
```

最有效的方法是使用`StringBuilder`，例如：

```
StringBuilder t = new StringBuilder(); 
for(int l=0; l<=5; l++){
    t.append("Num:");
    t.append(l+"\n");
}

VarPrueba.setText(t.toString()); 
```

# function - PL/SQL 将函数作为参数传递

> ID：11130610
> 
> 赞同：5
> 
> 时间：2012-06-21T02:02:13.453
> 
> 标签：function, parameters, plsql, functional-programming

我已经用 PL/SQL 编程了半年，我的印象是它是一种非常简单的编程语言（恕我直言）。虽然我偶然发现了一些有趣的文章，比如这篇文章[——PL/SQL 中的设计模式——接口注入，以实现更松散的耦合](http://technology.amis.nl/2006/03/11/design-patterns-in-plsql-interface-injection-for-even-looser-coupling/)，但我还是推荐阅读。谈到依赖注入，我错过了一个特殊的功能：将子例程作为参数传递。是否可以？如何？

例如，假设我在 javascript 中有这样的代码：

```
function tell_me (printer) {
  printer ("hello");
}

tell_me (function () {
  console.log (word);
}); 
```

是否可以在 PL/SQL 中做类似的事情？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T02:11:34.780

您不能直接将函数作为参数传递。最好的办法是使用动态 PL/SQL 来执行作为字符串传入的函数。我不推荐这个。我可以在少数情况下看到动态 PL/SQL 的使用，但这会给您带来各种各样的问题。

```
DECLARE 
   PROCEDURE inner_function
   IS
   BEGIN
       dbms_output.put_line('Output');
   END;

   PROCEDURE tell_me(parm_function varchar2) 
   IS
   BEGIN
       EXECUTE IMMEDIATE 'BEGIN '||parm_function||'(); END;';
   END;

BEGIN
   tell_me('inner_function');
END; 
```

DBMS_OUTPUT 在缓冲区中应该只有“输出”。

这可能不起作用，因为 inner_function 可能超出范围。在这种情况下，请在模式本身中定义过程。

# javascript - 元素插入未立即在 chrome 中显示

> ID：11130619
> 
> 赞同：2
> 
> 时间：2012-06-21T02:03:49.677
> 
> 标签：javascript, jquery, google-chrome

好的，我遇到了一个奇怪的问题：

我有一个将 div 插入 DOM 的按钮。第一次单击按钮时，div 总是立即出现在页面上。但是，随后的按钮单击不会再插入任何 div。

现在奇怪的是，在我插入额外的 div 后，它们没有出现，我使用 chrome 开发人员工具选择检查元素，调用开发人员工具后，div 立即出现。我可以看到

```
$('#list').before('<div class="mybox">some text</div>'); 
```

它基本上看起来不像 chrome 正在刷新，即使新元素被输入到 DOM 中，浏览器窗口也不会反映这些变化，直到我进入开发人员工具。但我想不通为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T03:44:00.487

你是对的。这是一个奇怪的问题。它也发生在我身上。

就我而言，我在启动时依赖外部库为我创建一个元素。我仍然不确定根本原因是什么，但我通过调用`setTimeout(myFunctionThatSetsUpTheElement, 1)`.

希望这可以帮助。

# java - 如何在 JSP 中检索当前页面名称？

> ID：11130620
> 
> 赞同：9
> 
> 时间：2012-06-21T02:03:59.573
> 
> 标签：java, jsp, jakarta-ee

JSP 中有没有办法知道当前页面名称（不是整个 URL 或 URI）？当然，我们可以执行以下操作来检索 JSP 中的当前页面名称。

```
String servletPath=request.getServletPath();
out.println(servletPath.substring(servletPath.lastIndexOf("/")+1, servletPath.length())); 
```

这可以检索当前页面名称（可能是我遵循了错误的方法）。JSP 中是否有一种公平直接的方式来检索当前页面名称？

`/`[此外，此方法中的分隔符`servletPath.lastIndexOf("/")`应始终独立于任何操作系统支持的任何文件系统]。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-22T04:31:03.440

您也可以使用 URI 方法来完成。

```
String uri = request.getRequestURI();

String pageName = uri.substring(uri.lastIndexOf("/")+1); 
```

# search - mongoDB 仅搜索最后 6 位数字

> ID：11130621
> 
> 赞同：0
> 
> 时间：2012-06-21T02:04:02.660
> 
> 标签：search, mongodb, find

是否可以使用 find() 搜索以最后一位数字结尾的条形码 365478 我不在乎前面是什么

我想到了这样的事情。

```
$db.find(array('barcode'=>*365478)) 
```

但这似乎不起作用。我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T02:10:12.160

的正则表达式`/365478$/`将提供正确的过滤器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T02:16:32.450

正则表达式将起作用，但您将无法使用索引进行查询。我建议将最后 6 位数字存储在一个单独的字段中，在其上放置一个索引并使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-24T09:37:59.713

这很好用/$365478/当然你可以使用正则表达式，但保持简单是有回报的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T09:03:33.460

您可以为此使用正则表达式，但如果您希望能够使用索引，则必须存储反转的条形码（只有根正则表达式可以使用索引，请参阅[http://www.mongodb.org/display/DOCS/Advanced +查询#AdvancedQueries-RegularExpressions](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-RegularExpressions) )

如果这对您来说不切实际，您将不得不单独保存最后 X 位数字并进行精确匹配。如果您的数据库将相对较小，您可能无需索引就可以逃脱。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-27T20:39:48.937

正则表达式应该是这样的：`365478$`

例如使用 PHP。

```
$regex = new MongoDB\BSON\Regex ( '365478$'); 
```

# jquery - 如何在 jQuery 中将两个标签合并在一起？

> ID：11130626
> 
> 赞同：1
> 
> 时间：2012-06-21T02:04:20.070
> 
> 标签：jquery, html, dom

我相信那是一个棘手的问题。我想**将两个标签合并**在一起。例如，`<span>`具有不同 ID 的两个彼此相邻，如下所示：

```
Lorem ipsum <span id="selected-1">dolor sit</span><span id="selected-2" title="important info here"> amet, consectetur</span> adipiscing elit. 
```

最后，我想合并`selected-1`并**保留 to 的属性**，`selected-2`最终带有如下内容：**`selected-2`**

 **```
Lorem ipsum <span id="selected-2" title="important info here">dolor sit amet, consectetur</span> adipiscing elit. 
```

有小费吗？我实在想不通这个。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T02:49:13.937

这里真的没有必要使用 jQuery，它必须完成对 DOM 节点进行字符串化然后重新解析它们以将它们放回 DOM 的所有工作。

```
var span1=document.getElementById("selected-1"), 
    span2=document.getElementById("selected-2"),
    insert=span2.firstChild,
    elt;

while (elt=span1.lastChild) {
  insert=span2.insertBefore(elt,insert); // removes the node from span1
}

span1.parentNode.removeChild(span1); 
```

确实，OP 询问了 jQuery 解决方案。但是如果有人问如何用瑞士军刀敲钉子，建议用锤子代替似乎还是合理的，特别是如果他们已经有锤子，应该知道如何使用它，并且使用它会快 100 倍。

我知道大多数应用程序都使用 jQuery，因此加载它不会增加成本。在许多情况下，它确实提供了一种令人满意的简洁性——当你把所有东西都放在一条线上时，催产素的小冲动。但也有成本。性能成本可能高达两个数量级，还有将程序员隐藏在真正发生的事情之外的成本。

在这种情况下，如果 OP 知道四个基本的 DOM API，他可能已经想出了如何编写简单的单行 while 循环将元素从一个地方移动到另一个地方，而不是试图弄清楚什么神奇一系列 jQuery 咒语链接在一起以实现这一目标，卡住了，不得不发布到 SO。

[考虑http://jsperf.com/combine-dom-nodes](http://jsperf.com/combine-dom-nodes)上的性能比较，它表明 jQuery 解决方案慢了 100 倍。

另一方面，即使是 Brendan Eich 似乎也开始转向 jQuery 链式单线范式，给出以下示例：

```
$(document).getTDs().getEven().hover().css("yellow").addCustomEvent("setSelected").setSelected(this.currentMagicNode).get.out("white").getTDs().getOdd().hover().css("yellow").addCustomEvent("setSelected").setSelected(this.currentMagicNode).out("white"); 
```

并评论说，“事后看来，我明白为什么 JavaScript 从未流行起来”，Brendan 说。“所有这些分号和换行符使代码非常难以阅读。而且你水平阅读代码，而不是垂直阅读 - DUHHHH！JavaScript 没有赢！” 请参阅[http://clubajax.org/brendan-eich-redesigns-javascript-to-look-like-jquery/#more-1491](http://clubajax.org/brendan-eich-redesigns-javascript-to-look-like-jquery/#more-1491)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T02:29:35.810

这是我的 1 行版本：

```
$('#selected-2').html( $('#selected-1').html() + $('#selected-2').html() ).prev().remove(); 
```

...甚至是更短的版本。

```
$('#selected-2').prepend($('#selected-1').html()).prev().remove(); 
```

更短的版本 = 需要下载的代码更少（尤其是对于移动浏览器）。

* * *

**编辑：**由于我的**简短单行答案**陷入困境并且与此页面上最长的标记答案[**正面**](http://jsperf.com/combine-dom-nodes)**交锋，因此重要的并不总是基准速度**，而只是代码的功能和维护。

此外，*每秒计算量*并不等同于真实世界和真实浏览器**页面渲染**，最终不会显示出真正的性能提升。

**恕我直言，在现实世界中使用一行标记比一大堆代码**更实用和更常识，而这些代码很容易出现用户创建的错误（每个 i 点和每个 t 交叉点），这也会创建更多数据（.js 文件）下载和解析。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T02:11:22.653

三行应该做到这一点：

```
$("#selected-1").html($("#selected-1").html() + $("#selected-2").html());
$("#selected-1").attr("title", $("#selected-2").attr("title"));
$("#selected-2").remove() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T02:15:24.593

希望这是最简单的方法（严格按照示例进行）：

```
var s1 = $('#selected-1').html();
$('#selected-1').remove();
$('#selected-2').prepend(s1); 
```

[您可以在http://jsfiddle.net/KFXRe/](http://jsfiddle.net/KFXRe/)上验证这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T02:26:11.523

我没有测试你所有的解决方案，但我附带了这段代码：

```
var $wrapper = $( "#selected-1, #selected-2" )
    .wrapAll( "<span title='" + $( "#selected-2" ).attr( "title" ) + "'></span>" )
    .parent();

$( "#selected-1, #selected-2" ).replaceWith(function() {
    return $( this ).html();
});

$wrapper.attr( "id", "selected-2" ); 
```

我不知道我的方式是否更快......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-21T02:11:06.473

```
var s1= $('#selected-1');
var s2= $('#selected-2');
s2.html(s1.html()+s2.html());
s1.remove(); 
```

基本上，我单独获取元素。然后我将第一个元素中的 html 和当前在第二个元素中的 html 插入到第二个元素中（否则它将被覆盖）。最后，但同样重要的是，我删除了第一个元素。

->>>>>>> [jsFiddle](http://jsfiddle.net/pHWQk/) <<<<<<-**

# xslt - XSLT 变量作为属性打印

> ID：11130631
> 
> 赞同：2
> 
> 时间：2012-06-21T02:05:26.797
> 
> 标签：xslt, xslt-1.0

有没有办法将元素中的变量打印为属性？

示例 xml：

```
<list>
<name>John Doe</name>
<name>Paul Niel</name>
<name>Luke Dee</name>
</list> 
```

这是我的示例 xslt；

```
<xsl:variable name="isDisabled">
    <xsl:if test="name='John Doe'">
        <xsl:attribute name="disabled">disabled</xsl:attribute>
    </xsl:if>
</xsl:variable> 
```

我想像这样打印 isDisabled 变量；

```
<input id="textName" name="name" type="text" {$isDisabled} /> 
```

输出;

```
<input id="textName" name="name" type="text" disabled="disabled" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T03:18:43.360

**您不需要任何变量来完成此任务**。

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="name[. = 'John Doe']">
  <input id="textName" name="name" type="text" disabled="disabled" />
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<list>
    <name>John Doe</name>
    <name>Paul Niel</name>
    <name>Luke Dee</name>
</list> 
```

**产生了想要的正确结果：**

```
<input id="textName" name="name" type="text" disabled="disabled"/> 
```

**说明**：

正确使用模板和模板模式匹配。

**注意**：如果您有一种情况（不是这个）*确实*需要使用变量来创建属性，可以通过以下方式完成：

```
<input id="textName" name="name" type="text" disabled="{$isDisabled}"/> 
```

**说明**：

正确使用 AVT（**[属性值模板](http://www.w3.org/TR/1999/REC-xslt-19991116#attribute-value-templates)**）

# android - 与早期 sdk 等效的 Android gridview

> ID：11130636
> 
> 赞同：1
> 
> 时间：2012-06-21T02:06:19.630
> 
> 标签：android, android-layout

我正在尝试创建一个详细视图来主要显示文本视图。我认为 gridview 是理想的，它似乎不适用于我使用 ActionBarSherlock 向下兼容的项目。我尝试过使用相对布局和表格布局，但我不确定如何完成我想要的。

这是我到目前为止所拥有的，但我需要使第一列的宽度不大于其中的元素，即：图像、多行文本视图等：

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/lemon" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:padding="5sp" >

        <TextView
            android:id="@+id/placard"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:textColor="#000000"
            android:textSize="24sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/material"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:maxLines="5"
            android:padding="10sp"
            android:textColor="#0000ff"
            android:textSize="12sp"
            android:textStyle="bold" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/div_text"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:paddingBottom="5sp"
            android:paddingLeft="10sp"
            android:paddingTop="5sp"
            android:text="@string/division"
            android:textColor="#000000"
            android:textSize="14sp" />

        <TextView
            android:id="@+id/division"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:paddingBottom="5sp"
            android:paddingLeft="10sp"
            android:paddingTop="5sp"
            android:textColor="#0000ff"
            android:textSize="16sp"
            android:textStyle="bold" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow3"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/hazards"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingBottom="5sp"
            android:paddingLeft="10sp"
            android:paddingTop="5sp"
            android:textColor="#0000ff"
            android:textSize="14sp" />
    </TableRow>

</TableLayout> 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T02:27:26.087

我认为您指的`GridLayout`是 API 14（Android 4.0）中引入的 。但是，最新版本的支持库包含一个库项目，您可以使用该项目将其合并`GridLayout`到您的应用程序中，并使其与 API 7 (Android 2.1) 兼容。

因为您正试图使行从一个到另一个不对称，所以我相信`GridLayout`可能仍然是您最好的（唯一）选择。

这是[支持库页面](http://developer.android.com/sdk/compatibility-library.html)的链接。

高温高压

# javascript - Ember.js 中的路由

> ID：11130644
> 
> 赞同：0
> 
> 时间：2012-06-21T02:07:22.707
> 
> 标签：javascript, ember.js, requirejs, ember-old-router

我尝试在 Ember.js 中使用路由，但它似乎无法正常工作。

完整的代码[在 Github 上](https://github.com/baothy/emberJs-requireJs-testing-router/tree/)，但一部分如下：

```
define(['ember', 'app/controllers/controller', 'app/views/view'], function (ember, controller, view) {
    var Router = Ember.Router.extend({
        root: Ember.State.extend({
            index: Ember.State.extend({
                // location: Ember.Location.create({style: 'hash'}),
                location: 'hash',
                enableLogging: true,
                route: '/',
                redirectsTo: 'news.index'
            }),
            news: Ember.State.extend({
                route: '/news',
                // showPost : Ember.State.transitionTo('post'),
                test: Ember.ViewState.extend({
                    route: '/test',
                    view: view.appendTo('body')
                }),
                index: Ember.ViewState.extend({
                    route: '/',
                    view: null
                })
            })
        })
    });
    var router = Router.create({});
    return router;
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T04:02:30.837

我认为您需要将代码更改为：

```
define(['ember', 'app/controllers/controller', 'app/views/view'], function (ember, controller, view) {
    var Router = Ember.Router.extend({
        // These are properties of Ember.Router and should be defined here
        location: 'hash',
        enableLogging: true,

        root: Ember.State.extend({
            index: Ember.State.extend({
                route: '/',
                redirectsTo: 'news.index'
            }),
            news: Ember.State.extend({
                route: '/news',
                // showPost : Ember.State.transitionTo('post'),
                test: Ember.ViewState.extend({
                    route: '/test',
                    view: view.appendTo('body')
                }),
                index: Ember.ViewState.extend({
                    route: '/',
                    view: null
                })
            })
        })
    });
    var router = Router.create({});
    return router;
}); 
```

让我知道这是否有效。

**更新**

实际上你也不应该使用 ViewState 。它正在贬值。按照指南[http://emberjs.com/guides/outlets/](http://emberjs.com/guides/outlets/)。

# css - 在 IE9（和 7）中，非浮动 div 低于右浮动 div

> ID：11130648
> 
> 赞同：0
> 
> 时间：2012-06-21T02:08:38.367
> 
> 标签：css, internet-explorer-7, internet-explorer-9

这是一个响应式网站（[http://www.dermatologypartners.com](http://www.dermatologypartners.com)），首先是桌面样式。IE8 可以正确处理页面，但没有 CSS3 繁荣。但是 IE9 正在放下我的导航栏（在左侧），当它在所有其他浏览器中的右侧浮动内容旁边时。

我的导航栏接近 HTML 的末尾，因为我希望它在智能手机版本的网站中流过 LAST，在页面内容下方但在页脚上方 - 它确实如此。

导航不浮动。它只是上升到左上角，内容向右浮动。

IE9 除外。

如果我能得到一个 IE9 修复，我就不必重做所有这些。这不是“浮动下降” - 有足够的空间。我实际上在 IE7 中遇到了同样的问题，但我并不关心 IE7——但为什么 7 和 9，而 8 很好？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T03:12:45.690

对你的 .gradient div，添加`width:19%`，然后在你的 #nav div 上，将宽度更改为 100%。

# javascript - 减少 jQuery 彩色动画的加载时间

> ID：11130651
> 
> 赞同：1
> 
> 时间：2012-06-21T02:09:30.050
> 
> 标签：javascript, jquery, html, css

我试图让每个跨度以 3 秒的间隔在随机颜色之间旋转。

JSFiddle：http: [//jsfiddle.net/WERFJ/21/](http://jsfiddle.net/WERFJ/21/)

```
<h1><span class="first">TEXT1</span> <span class="second">TEXT2</span> <span class="third">TEXT3</span></h1> 
```

目前我正在使用下面的代码和[jquery.animate-colors](http://www.bitstorm.org/jquery/color-animation/)插件。有什么方法可以使这个运行或更快地获得相同的效果。Chrome 可以处理，但 FF 经常崩溃。谢谢！

```
$(document).ready(function() {  
        spectrum();  

            function spectrum(){  
                var hue1 = 'rgb(' + 128 + ',' + (Math.floor(Math.random() * 256)) + ',' + (Math.floor(Math.random() * 256)) + ')';
                var hue2 = 'rgb(' + (Math.floor(Math.random() * 256)) + ',' + 128 + ',' + (Math.floor(Math.random() * 256)) + ')';  
                var hue3 = 'rgb(' + (Math.floor(Math.random() * 256)) + ',' + (Math.floor(Math.random() * 256)) + ',' + 128 + ')';  

                $('.first').animate( { color: hue1 }, 3000);
                $('.second').animate( { color: hue2 }, 3000);
                $('.third').animate( { color: hue3 }, 3000); 
                spectrum();  
        }  
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T02:16:20.240

我认为您的问题是递归调用没有等待动画完成。通过将调用作为回调添加到最后一个动画调用，您将仅在最后一个调用完成时调用它，而不是排队和无限的动画链。[http://jsfiddle.net/WERFJ/23/](http://jsfiddle.net/WERFJ/23/)现在似乎在 Firefox 中工作正常

```
$(document).ready(function() {
    spectrum();

    function spectrum() {
        var hue1 = 'rgb(' + 128 + ',' + (Math.floor(Math.random() * 256)) + ',' + (Math.floor(Math.random() * 256)) + ')';
        var hue2 = 'rgb(' + (Math.floor(Math.random() * 256)) + ',' + 128 + ',' + (Math.floor(Math.random() * 256)) + ')';
        var hue3 = 'rgb(' + (Math.floor(Math.random() * 256)) + ',' + (Math.floor(Math.random() * 256)) + ',' + 128 + ')';

        $('.first').animate({
            color: hue1
        }, 3000);
        $('.second').animate({
            color: hue2
        }, 3000);
        $('.third').animate({
            color: hue3
        }, 3000, spectrum);
    }
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T02:20:16.030

从用户的角度来看，最初的延迟是因为浏览器在您的函数完成运行之前不会更新显示，但是您的函数只是不断递归调用自身，直到堆栈溢出 - 或者，在 FF 中，我得到了“太多递归“ 错误。只有在“递归过多”错误使函数崩溃后，所有排队的动画才真正开始工作。

您可以通过更改函数的最后一行以`setTimeout()`用于排队另一个呼叫而不是让它直接调用自己来避免这种情况：

```
setTimeout(spectrum,3100); 
```

[http://jsfiddle.net/WERFJ/24/](http://jsfiddle.net/WERFJ/24/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T02:29:40.700

用于`$.when`包装动画，并`then()`运行下一个系列。jQuery 延迟对象然后确保所有动画在重新开始之前完成

演示：http: [//jsfiddle.net/WERFJ/26/](http://jsfiddle.net/WERFJ/26/)

```
var anim_1 = $('.first').animate({ color: hue1}, 3000);
var anim_2 = $('.second').animate({color: hue2}, 3000);
var anim_3 = $('.third').animate({color: hue3}, 3000);

$.when(anim_1, anim_2, anim_3).then(spectrum); 
```

# vb.net - 子字符串并返回特定字符后的值

> ID：11130658
> 
> 赞同：11
> 
> 时间：2012-06-21T02:10:51.803
> 
> 标签：vb.net, substring

**“Testing.BSMain，文本：起始页”**

我想对上面的值进行子串化，并只返回vb.net中**“：”之后的值。**我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-21T02:15:16.337

假设没有错误检查：

```
Dim phrase As String = "Testing.BSMain, Text: Start Page".Split(":")(1) 
```

它只是用冒号分割短语并返回第二部分。

要使用 SubString，试试这个：

```
Dim test As String = "Testing.BSMain, Text: Start Page"
Dim phrase As String = test.Substring(test.IndexOf(":"c) + 1) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-21T02:24:32.837

您可以使用 split 方法返回冒号后的值**：**

```
 Dim word as String  = "Testing.BSMain, Text: Start Page"
   Dim wordArr as String()  = word.Split(":")
   Dim result as String = wordArr(1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-08T13:31:22.770

如果提出的解决方案对您不起作用，我是这样做的：

```
result= Split("Testing.BSMain, Text: Start Page", ":")(1) 
```

# caching - 如果名称或内容发生变化，浏览器是否提供缓存文件？

> ID：11130659
> 
> 赞同：0
> 
> 时间：2012-06-21T02:11:04.860
> 
> 标签：caching, browser, browser-cache, expires-header

对于给定文件（.js、.css 等）设置了 expires 标头的情况以及没有设置过期标头的情况，我想知道两个一般性问题：

1.  **浏览器是否仅在文件名**更改时才请求新文件（不提供缓存的文件） ？浏览器也不评估文件**内容**，对吗？

2.  对于问题 #1，所有**浏览**器的行为是否相同，或者它们之间是否存在差异，例如在移动设备上（iOS Safari 等）？

谢谢你，蒂姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T02:26:24.067

1.  除非下载文件，否则浏览器无法检查文件内容。（例如，浏览器不请求校验和）。它通常将内容检查（或时间戳检查）的任务委托给服务器。浏览器将发送带有时间戳的 if-modified-since 标头。网络服务器将检查文件是否已更改，如果没有，它将发送 304 未修改代码。

2.  所有浏览器都遵循这个基本协议。服务器在决定文件是否已更改的方式上可能会有所不同。

# validation - 下拉列表中的常规字段验证器

> ID：11130662
> 
> 赞同：0
> 
> 时间：2012-06-21T02:11:22.863
> 
> 标签：validation

我在 ASP.NET 中有一个表单，这个表单有四个下拉列表。我想让它让用户不能从第二个中选择，直到第一个有一个值。第三个直到第二个才有值，第四个直到第三个才有值。

有人有提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T02:15:26.790

您需要使用 Ajax Control Toolkit ：

检查样品

[ASP.NET Ajax CascadingDropDown 演示](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/CascadingDropDown/CascadingDropDown.aspx)

问候

# c# - SvnClient.GetStatus(path, args, statuses) 为版本化文件返回 0？

> ID：11130666
> 
> 赞同：5
> 
> 时间：2012-06-21T02:11:47.027
> 
> 标签：c#, .net, svn, sharpsvn

我编写了一个简单的 C# 应用程序，使用 SharpSVN 在尝试添加之前查询文件的状态。为此目的，我在各个地方看到的示例涉及调用 SvnClient 的 GetStatus 方法，将完整路径和输出参数传递给 SvnStatusEventArgs 集合。

我的理解是，对于一个文件，GetStatus 应该返回一个 SvnStatusEventArgs 集合，该集合的计数正好为 1，状态为 NotVersioned、Missing、Normal 等。

在我的应用程序中，我对源代码控制下的文件的 GetStatus 调用返回 Collection count of *zero*。

```
 SvnClient foo = new SvnClient();
        Collection<SvnStatusEventArgs> statuses;
        foo.GetStatus("C:\\Temp\\svnu\\Program.cs", new SvnStatusArgs {Depth = SvnDepth.Empty}, out statuses); 
```

statuses.Count 的值为零，而我期望 1 的 statuses[0].LocalContentStatus 值为 Normal。这种期望不正确吗？对于引用*不在*源代码管理中的文件的路径的调用，该调用使用 NotVersioned 的 status[0].LocalContentStatus 值。

该路径被验证为工作副本，并且文件 Program.cs 实际上已在 Subversion 中登记。我正在运行 SharpSVN 版本 1.7005.2163.13448 和 VS2010。

非常感谢您解决了我明显的困惑。

**编辑**更多信息：在修改但未提交 Program.cs 后，此相同的代码片段现在返回单个状态值，LocalContentStatus 为“已修改”。提交文件后，返回原始行为（没有返回状态值）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T17:58:09.393

对根据 Bert Huijben 的反馈延迟发布答案表示歉意。为了大家的利益，我在这里发布答案仅供参考。

实际上，修改原始 GetStatus 调用以设置`RetrieveAllEntries`SvnStatusArgs 对象的属性确实解决了这个问题，并导致文件的本地（但无趣 :) ）副本的返回状态计数为 1，.LocalContentStatus 为“正常” ，“ 如预期的。

```
foo.GetStatus("C:\\Temp\\svnu\\Program.cs", new SvnStatusArgs {Depth = SvnDepth.Empty,
                                                               RetrieveAllEntries = true}, out statuses); 
```

非常感谢。

# opengl - glBlitFramebuffer 导致访问冲突

> ID：11130668
> 
> 赞同：2
> 
> 时间：2012-06-21T02:12:00.423
> 
> 标签：opengl, segmentation-fault, framebuffer

我正在尝试从 FBO 复制到窗口的帧缓冲区。据我所知，窗口帧缓冲区对于 R、G、B 和 A 各有 8 位，并且有一个深度缓冲区（可能是 24 位）。FBO 有一个纹理附件（RGBA8 格式）并且没有渲染缓冲区。

问题是当我尝试将 FBO 传送到屏幕时，我遇到了访问冲突（SIGSEGV 的 Windows 术语）。位代码：

```
//Earlier: const int screen_rect[4] = {0,0,512,512};

glBindFramebuffer(GL_READ_FRAMEBUFFER,fbo->framebuffer);
glBindFramebuffer(GL_DRAW_FRAMEBUFFER,               0);
glFinish();
//checking GL errors here gives no error
glBlitFramebuffer(
    screen_rect[0],screen_rect[1],screen_rect[2],screen_rect[3],
    screen_rect[0],screen_rect[1],screen_rect[2],screen_rect[3],
    GL_COLOR_BUFFER_BIT,
    GL_NEAREST //EDIT: I've also tried GL_LINEAR
);
glFinish();
//never reaches here
glBindFramebuffer(GL_DRAW_FRAMEBUFFER,0);
glBindFramebuffer(GL_READ_FRAMEBUFFER,0); 
```

FBO 是 GL_FRAMEBUFFER_COMPLETE_EXT 并且在任何时候都不会发生 GL 错误。FBO 和窗口帧缓冲区大小相同。

在带有驱动程序 301.42（迄今为止，最新）的 NVIDIA GeForce 580M GTX 上运行。

任何想法为什么会发生这种情况？

[编辑：我发现从一个 FBO 到另一个 FBO 时不会出现问题，尽管似乎没有数据被复制]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T00:02:36.397

似乎这个实现对输入的命令命令非常挑剔。我在对一些现有代码进行逆向工程后发现了以下内容。也许他们必须按这个顺序有一些神秘的原因，但我不知道是什么。

无论如何，我相信段错误行为是 NVIDIA 的 OpenGL 实现中的一个错误。

事不宜迟，按键命令，按顺序：

```
GLenum buffers1[] = {GL_BACK};
glBindFramebuffer(GL_DRAW_FRAMEBUFFER,0);
glDrawBuffers(1,buffers1);

glBindFramebuffer(GL_READ_FRAMEBUFFER,fbo->framebuffer);
glReadBuffer(GL_COLOR_ATTACHMENT1);

glBlitFramebuffer(...) 
```

# php - 正则表达式 - 识别分数

> ID：11130669
> 
> 赞同：1
> 
> 时间：2012-06-21T02:12:03.263
> 
> 标签：php, regex, fractions

我需要使用正则表达式从配方数据库中的表单字段中识别一个分数。成分将在两部分表单字段中输入。字段一是数量，字段二是成分。然后，我需要将字段 1 分解为其小数部分以输入到数据库中。

可能的条目包括：1, 1/2, 1 1/2，以及之前的任何带有单词的条目，例如 1 杯或 1/2 汤匙。我预见的最难的是：[2 28 盎司。罐头] 其中 2 是数字，28 盎司。罐头就是这个词。

我发现： (\b[0-9]{1,3}(?:,?[0-9]{3})*(?:.[0-9]{2})?\b) 哪个某种作品。我对 Regex 完全陌生，所以我只进行猜测和检查，我很难让它为我工作。

问题 #1：我还需要识别单词部分。单词部分也可以是多个单词，例如 2 个大罐子，其中大罐子就是单词部分。上面的正则表达式很好地识别了数字，但我想不出一种方法来获取表单字段的其余部分。例如 1 1/2 汤匙给我 1,1,2 但仅此而已，我也需要汤匙。我尝试使用这个正则表达式并使用 len 来减少原始值，减去前面的分数，但是由于 1 / 2 和 1/2 都允许，所以无法确定要减去多少点（1 / 2应该从字符串的前面减去 6，1/2 应该从字符串的前面减去 4，只看 1,2 的正则表达式结果，我不知道要减去多少）。

问题#2：这不是那么重要，但是关于如何识别 [2 28 oz cans] 问题的任何想法？上面的正则表达式拉出 2,28 是不正确的，它应该只拉出 2 个，然后其余的（28 盎司罐头）将是问题 1 的解决方案有望找到的另一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T02:24:27.113

这是一个正则表达式，它将匹配混合数字、整数和条目的其余部分（成分，希望有任何无关的数字）：

```
^((\d+( \d+/\d+)?)|(\d+/\d+))( (.+))?$ 
```

因此，例如，如果`2 28 ounce cans`它会匹配：

```
group 1: 2
group 2: 2
group 3: 
group 4: 
group 5:  28 ounce cans
group 5: 28 ounce cans 
```

您关心的组是 1 和 5。**组 1**将始终包含数量（作为数字、分数或带分数的数字），**第 6 组**将始终包含剩余的文本（成分）。

# xml - 如何引用不在引号中的 XML 数据？

> ID：11130670
> 
> 赞同：0
> 
> 时间：2012-06-21T02:12:13.343
> 
> 标签：xml

我对这整个 XML 东西很陌生。对不起，如果我的术语不正确。我正在尝试从提供的代码中引用以下数据。

210 来自“卡路里”

35 来自“来自脂肪的卡路里”

来自“总脂肪”的 3.5 克

0.5 克来自“饱和脂肪”

我找到了如何访问引号中的数据，但我不知道什么脚本会获取 > < 之间的信息

```
<Nutrients>
  <Nutrient name="Calories" UOM="kcal" 
            allowanceRate="" 
            allowanceStandard="N/A" 
            unroundedValue="214.8893805500001">210</Nutrient>

  <Nutrient name="Calories from Fat" UOM="kcal" 
            allowanceRate="" 
            allowanceStandard="N/A" 
            unroundedValue="33.2709996060006">35</Nutrient>

  <Nutrient name="Total Fat" UOM="g" 
            allowanceRate="6%" 
            allowanceStandard="DV" 
            unroundedValue="3.6967777340001">3.5 g</Nutrient>

  <Nutrient name="Saturated Fat" UOM="g" 
            allowanceRate="3%" 
            allowanceStandard="DV" 
            unroundedValue="0.6293593995000">0.5 g</Nutrient>
</Nutrients> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:53:30.610

无论您使用什么编程环境，它都很有可能允许您使用 XPath 检索数据。使用 XPath，以下表达式将得到您想要的：

```
string(/Nutrients/Nutrient[@name=$name]) 
```

其中 $name 是调用 API 提供的参数。某些 API 不允许您设置参数，在这种情况下，您需要通过字符串连接来构造表达式，例如

```
string(/Nutrients/Nutrient[@name='Calories']) 
```

（如果您这样做，请小心防范代码注入的风险，这适用于 XPath，就像它适用于 SQL 一样）。

# java - 获取 java.lang.OutOfMemoryError：Java 堆空间

> ID：11130675
> 
> 赞同：0
> 
> 时间：2012-06-21T02:12:28.617
> 
> 标签：java, eclipse, tomcat, out-of-memory, hsqldb

我在线程“HSQLDB Connection @3c50507”中遇到异常

```
java.lang.OutOfMemoryError: Java heap space, when running a JSP. 
```

什么是内存不足？日食，HSQLDB 或 Tomcat？我在 Mac OS X 10.7.4 中使用所有这些

当我启动 HSQLDB 时，我通过控制台得到这个异常：

```
[Server@122ce908]: From command line, use [Ctrl]+[C] to abort abruptly
Exception in thread "HSQLDB Connection @2e716cb7" java.lang.OutOfMemoryError: Java heap space
    at org.hsqldb.lib.HsqlByteArrayOutputStream.ensureRoom(Unknown Source)
    at org.hsqldb.rowio.RowOutputBinary.ensureRoom(Unknown Source)
    at org.hsqldb.lib.HsqlByteArrayOutputStream.write(Unknown Source)
    at org.hsqldb.rowio.RowOutputBinary.writeByteArray(Unknown Source)
    at org.hsqldb.rowio.RowOutputBinary.writeBinary(Unknown Source)
    at org.hsqldb.rowio.RowOutputBase.writeData(Unknown Source)
    at org.hsqldb.Result.write(Unknown Source)
    at org.hsqldb.Result.write(Unknown Source)
    at org.hsqldb.ServerConnection.run(Unknown Source)
    at java.lang.Thread.run(Thread.java:680) 
```

这是什么意思呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T02:32:09.770

它不是 Eclipse。您的“应用程序”没有在与 Eclipse 相同的 JVM 中运行，并且您发布的最小错误消息清楚地表明，这正在应用程序中发生......从广义上讲。

从您粘贴到问题中的最小错误消息中不清楚它是 Tomcat 还是 HSQLDB。我认为它更有可能是 Tomcat ......当您从数据库中提取大量结果集时，就会出现问题。但是，如果没有完整的堆栈跟踪，我只是在猜测。

如果这是我怀疑的，那么你有两个选择：

*   您可以增加运行 Tomcat 的 JVM 的 JVM 堆大小。

*   您可以找出是什么触发了您的应用程序来填满堆。

    *   可能只是您的应用程序设计*要求*您从数据库中提取大量数据并将其保存在内存中。在这种情况下，您别无选择，只能增加堆大小，或者（以某种方式）对“问题大小”施加一些限制。

    *   可能是您的应用程序并不真正需要提取所有这些数据；例如，您可以更改您的 SQL 查询，以便需要提取的数据更少。

    *   可能是您不需要同时将所有数据保存在内存中。

    *   可能是您的应用程序中存在潜在的内存泄漏，这就是耗尽所有内存的原因。在这种情况下，增加堆大小就像在车祸受害者身上贴绷带一样。除非你解决真正的问题，否则病人会死。

* * *

**基于迟来的堆栈跟踪的**更新****

 **如果出现问题，您正在从数据库中获取图像，那么该异常来自数据库端。方法名称说它是 WRITING。堆栈跟踪位于 HSQLDB 控制台上的事实证实这是正确的诊断。（此时不太可能发生内存泄漏。您只需要增加堆大小......或者不要在数据库中存储大量图像！）

另一方面，如果它是在您将图像存储到数据库时发生的，那么它是在 Tomcat 端。其他答案之一有一个关于如何处理的链接，

无论哪种方式，从效率的角度来看，将大图像存储在数据库中都不好，并且如果这样做可能会给您的数据库/网络服务器基础架构带来压力......就像您所看到的那样。

* * *

**更新**增加 HSQLDB 的堆栈大小。

我找不到增加 HSQLDB 堆大小的简单“方法”。这取决于您是将它用作嵌入式引擎还是在其自己的 JVM 中启动 HSQLDB。（我的猜测是您正在做后者。）在前一种情况下，您可以通过增加嵌入它的应用程序（例如 Tomcat）的堆大小来处理问题。否则，如果您从命令行启动，请将 -Xmx 和 -Xms 参数添加到`java`命令行...如`java`手册页中所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T02:20:42.043

可以是 hsqldb 或 Tomcat。不太可能是 Eclipse，因为它在运行您的应用程序时会分离出一个单独的 JVM。调试它的正确方法是查看堆栈跟踪，看看它是否提供了线索。如果没有，请使用分析器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T02:21:34.210

当您在堆上创建太多对象时通常会发生该错误，我怀疑您`Strings`在从数据库中读取时可能创建了太多。无论哪种方式，问题都与 VM 有关，一个解决方案（如果您不觉得您的代码可能更好）是增加 JVM 的 permgen。

如果您正在 eclipse 中开发，请尝试[增加 eclipse 中的 permgen](http://wiki.eclipse.org/FAQ_How_do_I_increase_the_permgen_size_available_to_Eclipse%3F)。

如果你在Tomcat上部署时出现错误，请[尝试在tomcat中增加它](http://www.mkyong.com/tomcat/tomcat-javalangoutofmemoryerror-permgen-space/)。**

# css - 标签的 CSS 选择器之前的时期

> ID：11130679
> 
> 赞同：3
> 
> 时间：2012-06-21T02:14:03.387
> 
> 标签：css, css-selectors

在以下代码中，取自[本 javascript 教程](http://www.adobe.com/devnet/html5/articles/javascript-object-creation.html)

```
<style>
    .html, body {
        margin: 0;
        padding: 0;
    }
</style> 
```

在'html'之前有一个句点。据我了解，类选择器需要句点，而不是标签选择器。那为什么是点呢？如果是的话，它与

```
<style>
    html, body {
        margin: 0;
        padding: 0;
    }
</style> 
```

**更新：** 我的第一反应也是这是一个错字，但快速的谷歌搜索显示这不是一个错误（[示例，来自 SO 本身](https://stackoverflow.com/questions/10535809/how-to-animate-a-line-to-track-a-moving-css-element)），因此这个问题。似乎这是一个无知的例子：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T02:15:48.617

             Adobe 很好，
但有时会出错。
               这是一个错字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T02:17:11.533

如果您不相信其他 2 个答案 - 这是一个错字

# android - 为什么 AVD 管理器中缺少 Intel x86 Atom 系统映像 (API 15)

> ID：11130680
> 
> 赞同：4
> 
> 时间：2012-06-21T02:14:36.043
> 
> 标签：android, android-emulator

我运行 android 工具并下载了 Android 4.0.3 SDK 和 2.3.3 SDK，包括 Intel Atom x86 System Image。

我启动了 AVD Manager 并尝试创建一个模拟器。我可以看到 2.3.3 的 Intel Atom 图像，但不能看到 4.0.3。

我试图重新安装它，但仍然没有在 AVD 中看到它。

有谁知道是什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T04:27:11.063

在 中`Android SDK Manager`，`Intel x86 Atom System Image`应该出现在 下`Android 4.0.3 (API 15)`。

# android - 插入500行的Android sqlite不起作用或保留INSERT顺序

> ID：11130683
> 
> 赞同：0
> 
> 时间：2012-06-21T02:15:18.850
> 
> 标签：android, sqlite

我无法让 SQLite 支持围绕多个插入的开始/结束事务。

```
 Multiples INSERTs : 2500ms
 Using BEGIN and COMMIT : 90ms
 Using SELECT and UNION : 40ms 
```

所以我看着使用开始和提交。我究竟做错了什么？

```
 // pseudocode: 
  ArrayList<Integer> iList = new ArrayList<Integer>();
    for (int i = 1; i <= 500; i++) {
      iList.add(i);
    }
  Collections.shuffle(iList);

  StringBuilder sb = new StringBuilder("begin transaction;");
  for (Integer i: iList) {
    sb.append("insert into \"t_order\" (qid) values(");
    sb.append(i);
    sb.append(");");
  }
  sb.append(" end transaction;");

  // from docs: http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#execSQL(java.lang.String)
  // Execute a single SQL statement that is NOT a SELECT or any other SQL statement that returns data.
  m_db.execSQL(sb.toString()); 
```

* * *

好的，我做了更多研究，似乎“不支持用分号分隔的多个语句”。我可以做些什么来插入和保留插入顺序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T02:20:21.130

启动事务，在单独的`execSQL()`调用中执行每个 INSERT，然后提交事务。

您不需要在同一个`execSQL()`调用中将 INSERT 聚集在一起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T02:20:55.480

使用`SQLiteDatabase.beginTransaction()`and`SQLiteDatabase.endTransaction()`方法并在它们之间发出 execSQL 调用。`ContentValues`使用结构而不是进行自己的字符串连接也是更好的风格：

```
ContentValues cv = new ContenValues();
m_db.beginTransaction();
try {
    for (Integer i: iList) {
        cv.put("qid", i);
        m_db.insert("t_order", null, cv);
    }
    m_db.setTransactionSuccessful();
} finally {
    m_db.endTransaction();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-28T19:40:07.937

这可能会有所帮助：

```
public void putAll(Context context, LinkedList<HANDLEDOBJECT> objects) {

    if (objects.size() < 1 || objects.get(0) == null)
        return;

    Log.i("Database", "Starting to insert objects to " + getTableName());

    List<String> insertCommands = new ArrayList<String>();
    int t = 0;

    while (t < objects.size()) {
        int k = 0;
        StringBuilder sb = new StringBuilder();

        sb.append("INSERT OR REPLACE INTO ").append(getTableName())
                .append("('k', 'v') ");

        for (t = t + 0; t < objects.size() && k < 450; t++) {
            k++;
            if (t % 450 != 0)
                sb.append("UNION ");
            sb.append("SELECT " + objects.get(t).getId())
                    .append(" AS k, ")
                    .append("'"
                            + GsonSerializer.getInstance().toJson(
                                    objects.get(t), getHandledObjectType())
                            + "'").append(" AS v ");
        }

        insertCommands.add(sb.toString());
    }

    for (String insertCommand : insertCommands)
        SQLiteClient.getConnetion(context).execSQL(insertCommand);

    Log.i("Database", "Successfully inserted " + t + " objects to "
            + getTableName() + "!!!");

    System.gc();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T02:35:36.797

[查看有关beginTransaction()](https://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#beginTransaction%28%29)的官方 Android 文档。将“...”部分替换为执行单独的 execSQL() 调用的循环——无需将语句一起截断在一个缓冲区中。

此外，使用准备好的语句通常是值得的。准备语句，开始事务，循环每个项目绑定并执行语句，最后提交。

# xml - 在没有突变的情况下在Scala中修改XML？

> ID：11130684
> 
> 赞同：4
> 
> 时间：2012-06-21T02:15:22.470
> 
> 标签：xml, scala

我正在尝试替换 XML 片段，并且需要一个累加器。假设我有一个以 XML 格式存储的填空问题，如下所示：

```
val q = <text>The capitals of Bolivia are <blank/> and <blank/>.</text> 
```

在某些时候，我想要将这些空白转换为 HTML 输入元素，并且我需要能够区分第一个和第二个，以便我可以检查它们。（忽略这样一个事实，在这种情况下，两个大写字母可以按任意顺序出现——这是我稍后会处理的一个令人头疼的问题。）

感谢 StackOverflow 上的一些可爱的答案，我产生了以下解决方案：

```
import scala.xml._
import scala.xml.transform._

class BlankReplacer extends BasicTransformer {
  var i = 0

  override def transform(n: Node): NodeSeq = n match {
    case <blank/> => {
      i += 1
      <input name={ "blank.%d".format(i) }/>
    }
    case elem: Elem => elem.copy(child=elem.child.flatMap(transform _))
    case _ => n
  }
} 
```

这工作得相当好。`new BlankReplacer()`每次我想开始重新编号时，我都必须创建一个，但它非常有效：

```
scala> new BlankReplacer()(q)
res6: scala.xml.Node = <text>The capitals of Bolivia are <input name="blank.1"></input> and <input name="blank.2"></input>.</text> 
```

这是问题。有没有一种简单的方法可以避免每次替换 a 时我必须做的突变`<blank/>`？我所拥有的并没有让我觉得可怕，但我认为如果我`BlankReplacer`每次必须将问题转换为 HTML 时都没有创建该类的新实例，这可能会更清晰。我确信有某种方法可以将它变成一个累加器，但我不知道该怎么做。

谢谢！托德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T16:54:23.557

这正是[Anti-XML](http://anti-xml.org/)的拉链[旨在解决的问题](http://anti-xml.org/zippers.html)：

> 换句话说，我们从一棵 XML 树开始，我们使用选择器深入到该树中，我们通过一些修改派生了该结果集的新版本（在我们的例子中，是一个新属性），现在我们想要返回到我们最初拥有的树上，除了我们在肠子里做的修改。这就是拉链的用途...

在您的情况下，您可以执行以下操作：

```
import com.codecommit.antixml._

def replaceBlanks(el: Elem) = {
  var i = 0
  (el \\ "blank").map { _ =>
    i += 1
    <input name={"blank.%d".format(i)}/>.convert
  }.unselect
} 
```

或者您可以避免在[此答案](https://stackoverflow.com/a/11160133/334519)`var`中使用技巧：

```
def replaceBlanks(el: Elem) = {
  val blanks = el \\ "blank"

  (0 until blanks.size).foldLeft(blanks) {
    case (z, i) => z.updated(i, z(i).copy(
      name = "input",
      attrs = Attributes("name" -> "blank.%d".format(i + 1)))
    )
  }.unselect
} 
```

现在我们可以将该方法应用于您的元素（将其转换为 之后`com.codecommit.antixml.Elem`）：

```
scala> println(replaceBlanks(q.convert))
<text>The capitals of Bolivia are <input name="blank.1"/> and <input name="blank.2"/>.</text> 
```

诀窍在于，我们可以`\\`像使用.`scala.xml``scala.xml``unselect`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T09:34:30.583

[Scales Xml](https://github.com/chris-twiner/scalesXml "Github 上的 Scales Xml 项目")提供折叠路径，允许您“修改”一棵树并积累......

```
import scales.utils._
import ScalesUtils._
import scales.xml._
import ScalesXml._

// the xml example
val q = <("text") /( "The capitals of Bolivia are ", <("blank")," and ",<("blank"),".")

// which elems to fold on?
val p = top(q) \\* "blank"

val f = foldPositions(p, p.size){ // size is used as the starting point for the fold
  case (question, path) =>
(question - 1, Replace( <("input") /@ ("name" -> ("blank."+question) )) )
  }

// f is an either, so we assuming its working here, and ._1 is the accumalator, _.2 the Path
val newTree = f.left.get._2.tree 
```

唯一的怪癖是它以相反的文档顺序累积，还有一个非累积版本。这允许在某些具有破坏性的转换组合中（例如更改子子项，然后在另一个转换中删除它，所有这些都可以正常工作）。

折叠本身的输入是任何 Iterable 的路径，只要它们在同一棵树中，允许您根据需要组合查询。

[有关如何在 Scales 中折叠 Xml 的更多详细信息，请参见此处](http://scala-scales.googlecode.com/svn/sites/scales/scales-xml_2.9.2/0.3-RC7/Folding.html "折叠 XML - Scales 文档")

# jquery - 如何使用jQuery从元素后删除文本

> ID：11130691
> 
> 赞同：-4
> 
> 时间：2012-06-21T02:16:09.053
> 
> 标签：jquery

此演示代码循环 3 次，每次都附加文本。我需要的是文本不会被附加而是被替换，因此在添加新文本之前应该删除以前附加的文本。我已经尝试了很多东西，没有任何效果。

**编辑：您不能在跨度之后添加额外的标签！**

```
 <div>
     <span id="i_1">this is </span>
</div>
​
var i = 3;
while(i>0)
{
     //// how to remove the text added on the previous iteration?
    $("#i_1").after('text');
    i--;
}
​ 
```

[http://jsfiddle.net/pHYHW/](http://jsfiddle.net/pHYHW/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T12:46:44.717

小菜一碟，这就是***jQuery afterText 插件***的用途。

Example/[Demo](http://jsfiddle.net/tLFPU/):

```
<div>
  <span id="i_1">this is </span>
</div>
​
var i = 3;
while (i)
{
    $("#i_1").afterText('text');
    i--;
} 
```

[jQuery afterText Plugin on github](https://gist.github.com/2965555/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T12:59:42.980

```
var i = 3;
while ( i ) {
    $("#i_1")[ 0 ].nextSibling.nodeValue = 'text';
    i--;
} 
```

Demo: [http://jsfiddle.net/Ralt/pHYHW/7/](http://jsfiddle.net/Ralt/pHYHW/7/)

There you go, enjoy. You can also use `data` instead of `nodeValue` if you prefer.

By the way, this works because `nextSibling` is a `textNode`, thus the `nodeValue` property is available.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T02:18:49.023

不要在元素之后放置文本，而是修改 HTML 以包含一个包含文本的元素：

```
<span id="i_1">this is </span> <span id="value"></span> 
```

只需设置另一个元素的文本：

```
for (var i = 3; i > 0; i--) {
    $("#value").text('text');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T02:20:11.300

这有效：

```
var i = 3;
var old_text = $('#i_1').html();
while(i>0)
{
    $("#i_1").html(old_text + 'text');
    i--;
} 
```

演示在： http: [//jsfiddle.net/2DcXe/](http://jsfiddle.net/2DcXe/) ​</p>

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T02:24:52.417

我不确定这是否是你要找的，但试试这个：

HTML

```
<div>
    <span id="i_1">this is </span><span id="i_2"></span>
</div> 
```

​</p>

Javascript

```
var i = 3;
while(i>0)
{
    $("#i_2").html('text');
    i--;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-21T13:01:57.823

Well it's not jQuery but here is how I would do it...

```
var ele = document.getElementById('i_1'); // get the element
var tn = ele.nextSibling, // get it's next sibling (picks up text nodes)
    mode = 'textContent' in ele ? 'textContent' : 'innerText'; // ( ie is smelly )
for (var i = 3; i > 0; i--) {
    tn[mode] = "Text"; // change the text content. 
} 
```

[Here is the Demo](http://jsfiddle.net/rlemon/x7xRA/)

# symfony - TWIG 有没有办法在安全配置文件中访问页面的 access_control 设置？

> ID：11130703
> 
> 赞同：0
> 
> 时间：2012-06-21T02:17:45.497
> 
> 标签：symfony, twig

我是 Symfony 的新手。

我希望一段代码只显示在公开可用的页面上。Twig 是否可以检测页面是否公开？

该页面位于 下`IS_AUTHENTICATED_ANONYMOUSLY`，但即使用户已经登录，我仍然希望显示这段代码。

```
For Example:
www.somesite.com (shows the code, publicly available)
www.somesite.com/login (user login, publicly available, shows code)
//user is not logged in
www.somesite.com/dosomething (only available to logged-in users, code is hidden)
//user goes to the home page, still logged-in
www.somesite.com (must show the code, publicly available) 
```

我知道我可以手动包含我的公共页面的代码，但是有没有办法自动检测页面是否在防火墙之外？

请帮忙。=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:46:41.940

您可以使用如下检查隐藏部分树枝模板：

```
{% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}
    {# stuff only logged in users can see #}
{% endif %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:25:04.040

或检查角色 IS_AUTHENTICATED_FULLY

```
{% if is_granted('IS_AUTHENTICATED_FULLY') %}
    {# stuff only logged in users can see #}
{% endif %} 
```

在此处查看文档：http: [//symfony.com/doc/current/book/security.html#retrieving-the-user-object](http://symfony.com/doc/current/book/security.html#retrieving-the-user-object)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T05:11:57.017

我想没有办法做到这一点。=(

# mysql - 有人可以帮我理解外键 UPDATE 和 DELETE 与关系名称吗？

> ID：11130705
> 
> 赞同：3
> 
> 时间：2012-06-21T02:17:52.877
> 
> 标签：mysql, sql, foreign-keys, relational-database

目前，我正在开发 MySQL InnoDB 中的用户数据库。所以，我将用它来帮助演示。

```
 Users                       Roles
  ---------------              ---------------
  userid (bigint) PK          >roleid (tinyint) PK
  email  (varchar)             rolename (varchar)
  username (varchar)
  password (char)
 >roleid (tinyint) FK
  created (timestamp) 
```

现在，我正在尝试基于 roleid 在角色和用户之间创建一对多的关系。为此，我在想`On UPDATE` `CASCADE`和`On DELETE` `Restrict`。

这就是我觉得我应该做的，我不确定它是否正确。但是，我想更好地了解它。

假设我想创建一对一，那么看起来像`On UPDATE` `Restrict`and `On DELETE` `Restrict`，对吗？

抱歉，我在这里完全糊涂了，我找不到分解关系模型不同设置的教程、博客或解释。任何人都可以根据我在这里的内容来帮助解释这些类型以及其他类型（多对多、多对一）吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T02:32:06.503

一个角色可以有许多用户与该角色相关联。这*整个*关系在物理上用`foreign key`引用 ROLES 表的 USERS 表表示。

外键约束中的`ON UPDATE`and`ON DELETE`选项有助于在数据库中强制执行“参照完整性”，但它们根本没有指定 USERS 和 ROLES 实体之间的关系。

如果我使用 ON DELETE RESTRICT 创建这个外键，当我尝试从 ROLES 表中删除一条记录时，该键在 USERS 表上正在使用，我会收到错误消息。*这与存在的逻辑关系的类型无关——它只是一个约束*。

不能使用一个外键来建模多对多关系。从逻辑上讲，如果一个用户可以拥有许多角色，那么将角色 id 存储在 users 表中是没有意义的。

在这种情况下，您将在两者之间创建一个表，并将 userid 和 roleid 列放在此表上，外键分别将它们连接到用户和角色。

```
USERS         USERS_ROLES     ROLES
userid PK  -  userid FK    
              roleid FK   -   roleid PK 
```

这是关于外键约束[的 MYSQL 手册页。](http://dev.mysql.com/doc/refman/5.6/en/innodb-foreign-key-constraints.html)这是一个很好的参考，并解释了每个选项的含义。

编辑：

这涉及到一对多和多对多的关系类型。您很少会在数据库中看到一对一的类型（在这种情况下，合并表是有意义的）。有时为了性能，你会使用它。在这些情况下，通常您的主键在两个表上应该是相同的：

```
USERS             USERS_EXTENDED_ATTRIBUTES
userid PK    -    userid PK FK 
```

对于 1-1 关系，每个表上应仅存在 1 个用户 ID。

# javascript - 如何通过 JS 从 htpasswd 访问用户名的输入？

> ID：11130709
> 
> 赞同：0
> 
> 时间：2012-06-21T02:18:38.320
> 
> 标签：javascript, access-control, .htpasswd

我使用 .htpasswd 对我的网页（HTML/JS）进行访问控制。现在我想在 htpasswd 窗口中输入用户名。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T02:30:18.470

您可以创建一个知道如何解释 XHR POST 请求并将它们传递到的服务器端脚本`htpasswd`，但人们实现自己的会话管理是有原因的。

# wordpress - 限制 wordpress 帖子循环以继续到另一个页面

> ID：11130710
> 
> 赞同：1
> 
> 时间：2012-06-21T02:18:41.673
> 
> 标签：wordpress

我在主页上做了一个网站，我创建了一种类似于**新闻**框类型的东西，这是客户想要的......

我用来限制索引页面上的帖子的帖子位是

```
query_posts('posts_per_page=4'); 
```

现在，这将我的帖子限制为“4”或我想要的任何数字等，当用户点击“新闻”页面按钮时，它会将它们带到一个页面，该页面具有完整的帖子循环， `query_posts('posts_per_page=4');`而实际上没有显示所有帖子.

现在的问题是，这个人现在发布了很多，并且页面现在一个接一个地有一堆帖子。

有没有办法将这些限制为任意数量（我选择）并在另一页上显示其余帖子？？？

所以本质上说的是

例如，过滤掉 20 条消息/摘录，但在 20 条之后显示“下一页”或类似的东西？

那可能吗？因为就目前而言，到年底这一页将有数百个帖子。

我环顾四周，但不确定我在寻找什么。这个接近了（在这里） [Wordpress 循环显示限制帖子](https://stackoverflow.com/questions/3875895/wordpress-loop-show-limit-posts) 虽然它相似，但我需要一种方法来限制页面上的帖子并在另一页上继续它们，这样一个页面就不会包含所有帖子。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:47:20.027

[http://codex.wordpress.org/Settings_Reading_Screen](http://codex.wordpress.org/Settings_Reading_Screen)

在设置中，您可以设置每页帖子数量的默认最大限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:00:17.423

主页由 index.php 或页面使用的模板文件控制，您可以在设置 > 阅读中将其设置为主页。

您必须检查您的 index.php 文件或使用主页页面的模板文件。

如果您在代码中的查询不包括任何“每页帖子”参数，您可以从“设置”>“阅读”中控制此数字。

还有一个插件可以帮助你： [http ://wordpress.org/extend/plugins/custom-post-limits/](http://wordpress.org/extend/plugins/custom-post-limits/)

现在，点击新闻页面，你必须检查那是一个页面还是一个类别列表？

如果它是一个页面，那么它由 page.php 或其附加/使用的模板处理。同样，代码很重要，查询是如何编写的。它是一个类别列表，然后 category.php 正在处理该页面。

注意模板文件正在使用每个页面/帖子并了解这一点：[http ://codex.wordpress.org/Class_Reference/WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)

祝你好运！:)

# php - 无法调用对象方法。PHP报告变量未定义

> ID：11130716
> 
> 赞同：1
> 
> 时间：2012-06-21T02:19:26.973
> 
> 标签：php

这是最奇怪的错误！这可能很愚蠢，但我不知道如何解决它。如果有人可以提供帮助，我将不胜感激！我有三个文件，一个叫items.php，另一个叫tableFunctions.php，第三个叫mysql.php。我使用两个名为“mysql”和“tableFunctions”的全局对象。它们分别存储在文件“mysql.php”和“tableFunctions.php”中。在每个文件中，我创建其对象的一个​​实例，将其分配给全局变量 $_mysql 或 $_table。像这样：

在文件 mysql.php 中：

```
global $_mysql;
$_mysql = new mysql(); 
```

在文件 tableFunctions.php 中：

```
global $_table;
$_table = new tableFunctions(); 
```

这是它应该如何工作的：

items.php 文件包含 tableFunctions.php 文件......这又需要 mysql.php 文件，因此它也包含它。

在 items.php 文件中，我调用了 getTable() 方法，该方法包含在对象 tableFunctions 中。（以及变量 $_table 中。）像这样：

```
$t = $_table->getTable('items'); 
```

getTable 函数调用方法 arrayFromResult()，该方法包含在对象 mysql 中（和变量 $_mysql 中），如下所示：

```
$result  = $_mysql->arrayFromResult($r); 
```

这就是我得到错误的地方。PHP 说变量 '$_mysql' 是未定义的，但我在 'mysql.php' 文件中定义了它。（见上文）我还包含 mysql.php 和以下代码：

```
include_once 'mysql.php'; 
```

我不知道出了什么问题！如果有人可以提供帮助，将不胜感激。可以通过以下链接下载源文件：[https ://www.dropbox.com/sh/bjj2gyjsybym89r/YLxqyNvQdn](https://www.dropbox.com/sh/bjj2gyjsybym89r/YLxqyNvQdn)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T02:22:47.617

这是一个常见的错误，在定义的地方你只需要这行：

```
$_mysql = new mysql(); 
```

当你想在函数中使用它时，只有在那里你必须将它声明为全局变量（否则它被认为与任何其他函数变量一样）：

```
global $_mysql; 
```

因此，例如，如果我们采用您的方法：

```
function getTable($tableName) {         
        $r = mysql_query("SELECT * FROM $tableName");
            err($r, 'mysql returned null when getting table!');

        $result  = $_mysql->arrayFromResult($r);
        return $result;
    } 
```

它应该改为：

```
function getTable($tableName) {
        global $_mysql;
        $r = mysql_query("SELECT * FROM $tableName");
            err($r, 'mysql returned null when getting table!');

        $result  = $_mysql->arrayFromResult($r);
        return $result;
    } 
```

# jquery - jQuery延迟加载自定义事件或其他建议？

> ID：11130717
> 
> 赞同：1
> 
> 时间：2012-06-21T02:19:32.973
> 
> 标签：jquery, lazy-loading

我对 jQuery 很陌生，但正在帮助客户解决他们网站上的问题（以前曾帮助他们解决非 jQuery 问题） 所需的初始登录是：用户名：shelliesimon / 密码：**t3$t2012** [http://bit。 ly/LhcG13](http://bit.ly/LhcG13) （在登录下）

然后它应该加载一个页面，该页面是一个 Lightbox 画廊，该画廊已被自定义为在滑块中显示图像，并启用可以在底部单击以供客户选择和发送电子邮件的自定义缩略图。

客户端遇到的问题是，当图像中有太多照片时，较大图像的“预加载”会导致浏览器速度变慢（CPU 使用率飙升）并且难以导航。所以我认为也许延迟加载将是前进的方向（鉴于它是基于 jQuery 的）

在包含来自 jQuery Lazy Load 网站的脚本并将源更改为使用数据原始等之后，我在使用此方法方面的成功有限，并认为关键可能在于使用自定义事件 - 我已经尝试过“点击”，如图所示在文档中，但这需要用户“单击”缩略图，然后再次单击顶部的非预加载图像。

这也意味着原来的滑块功能停止工作。

在找出此页面上的自定义事件是什么“事件”以及如何访问它方面，我对于下一步该做什么有点茫然。另一种方法是我仍在尝试破译此建议以修改循环插件[http://www.anotherwebdevblog.com/simple-jquery-cycle-lazy-load-solution/](http://www.anotherwebdevblog.com/simple-jquery-cycle-lazy-load-solution/)并且非常感谢专家的任何建议或意见和其他知识渊博的人。

提前谢谢了

# visual-studio-2010 - 使用 Visual Studio 2010 Professional Academic Edition 创建移动应用程序

> ID：11130718
> 
> 赞同：-5
> 
> 时间：2012-06-21T02:19:50.080
> 
> 标签：visual-studio-2010

您可以使用 Visual Studio 2010 Professional **Academic Edition**创建移动应用程序吗？

您可以使用 Visual Studio 2010 Professional **Academic Edition**创建移动网站吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T02:25:04.297

如果您想使用的话，您可以使用记事本创建移动网站。

创建移动网站就是将网站设计得看起来不错并且可以在手机上运行。[它与 Visual Studio 或任何其他IDE](http://en.wikipedia.org/wiki/Integrated_development_environment)无关。

今天最流行的趋势（也是我目前正在研究的东西）是[响应式网页设计](http://msdn.microsoft.com/en-us/magazine/hh653584.aspx)。这是一种网页设计方法，其中网站被设计为在任何分辨率下工作，并且将扩展到该分辨率而无需对代码进行任何更改。如果您设计网站的时间很短，那么这是一种大脑重新布线，以掌握窍门，但它非常迷人和有用。响应式网页设计利用了流体网格和媒体。如果您愿意，您还可以使用固定宽度（如[colly.com](http://colly.com)）进行自适应布局，而无需使用流畅的内容。响应式网页设计通常被认为是一种更好的方法，因为它不假设任何特定的设备尺寸。

但是，移动应用程序不是用 Visual Studio 支持的任何语言编写的。最受欢迎的是：

*   Android - 用 Ja​​va[编写](http://en.wikipedia.org/wiki/Java_%28programming_language%29)
*   iOS (Apple) - 用[Objective-C编写](http://en.wikipedia.org/wiki/Objective-C)

Visual Studio**将**用于创建专为 Windows Mobile 设备设计的移动应用程序，运行任何已发布的 Windows Mobile 操作系统。

* * *

另外，作为旁注：

[Microsoft 已停止使用 Academic Edition，并通过Dreamspark](https://www.dreamspark.com/)向拥有大学电子邮件地址的学生免费提供 VS 2008 到 VS 2012 Beta ，以及其他一些很酷的免费内容。

还有[Visual Web Developer](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-web-developer-express)，它是免费的并且支持 MVC3。

# ruby-on-rails - Rails Factory Girl RSpec 测试有很多嵌套资源的关系

> ID：11130719
> 
> 赞同：0
> 
> 时间：2012-06-21T02:20:09.757
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, factory-bot, friendly-id

注意：一个企业有很多目录，有产品，一个目录有很多产品。关联已正确定义，并且它们在应用程序前端工作。但是我不能通过这个测试。我正在使用friendly_id，所以你会看到我在一些查找方法上使用@model.slug

我正在尝试这个测试：

```
describe "GET 'show'" do
  before do
    @business = FactoryGirl.create(:business)
    @catalog = FactoryGirl.create(:catalog, :business=>@business)
    @product1 = FactoryGirl.create(:product, :business=>@business, :catalog=>@catalog)
    @product2 = FactoryGirl.create(:product, :business=>@business, :catalog=>@catalog)
  end

  def do_show
    get :show, :business_id=>@business.slug, :id=>@catalog.slug
  end

  it "should show products" do
    @catalog.should_receive(:products).and_return([@product1, @product2])
    do_show
  end
end 
```

使用这个工厂（请注意，业务和目录工厂是在其他地方定义的，它们是关联）：

```
FactoryGirl.define do
  sequence :name do |n|
    "product#{n}"
  end

  sequence :description do |n|
    "This is description #{n}"
  end

  factory :product do
    name
    description
    business
    catalog
  end
end 
```

通过这个表演动作：

```
def show
    @business = Business.find(params[:business_id])
    @catalog = @business.catalogs.find(params[:id])
    @products = @catalog.products.all
    respond_with(@business, @catalog)
  end 
```

但我收到此错误：

```
CatalogsController GET 'show' should show products
     Failure/Error: @catalog.should_receive(:products).and_return([@product1, @product2])
       (#<Catalog:0x000001016185d0>).products(any args)
           expected: 1 time
           received: 0 times
     # ./spec/controllers/catalogs_controller_spec.rb:36:in `block (3 levels) in <top (required)>' 
```

此外，此代码块还将指示业务模型尚未收到 find 方法：

```
Business.should_receive(:find).with(@business.slug).and_return(@business) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:49:55.733

这里的问题是您在规范中设置的@catalog 实例变量与控制器中的@catalog 实例变量不同。

规范中的@catalog 永远不会收到发送到控制器中@catalog 的任何消息。

你需要做的是在你的规范中改变它：

```
@catalog.should_receive(:products).and_return([@product1, @product2]) 
```

到

```
Catalog.any_instance.should_receive(:products).and_return([@product1, @product2]) 
```

在此处查看有关 any_instance.should_receive 的 RSpec 文档：[https ://www.relishapp.com/rspec/rspec-mocks/v/2-6/docs/message-expectations/expect-a-message-on-any-instance一流的](https://www.relishapp.com/rspec/rspec-mocks/v/2-6/docs/message-expectations/expect-a-message-on-any-instance-of-a-class)

# asp.net-mvc - Asp.net 配置无法连接到我在 APP_Data 中的 .mdf 文件

> ID：11130721
> 
> 赞同：0
> 
> 时间：2012-06-21T02:20:11.960
> 
> 标签：asp.net-mvc, entity-framework

我遇到了两个主要问题，我认为它们可能相互关联。

1.  当我运行 asp.net 配置来设置提供程序时，它无法连接。
2.  运行项目时，当我尝试注册新用户时，出现此错误：“提供的密码检索答案无效。请检查值并重试。”

这是在 MVC4 项目中，默认 Internet 应用程序模板。除了使用代码优先方法生成数据库之外，我没有更改项目中的任何内容。数据库是在 APP_DATA 文件夹中创建的。我可以在 VS2012 的服务器资源管理器中很好地连接到它，并且该连接来自 web.config 中的此连接字符串：

```
<connectionStrings>
<add name="DefaultConnection" providerName="System.Data.SqlClient" connectionString="Data Source=(LocalDB)\v11.0;AttachDbFilename=|Data Directory|\NerdlyThings.Models.NerdlyContext.mdf;Integrated Security=True;Connect Timeout=90" /> 
```

```
<membership>
  <providers>
    <add connectionStringName="DefaultConnection" enablePasswordRetrieval="false"
      enablePasswordReset="true" requiresQuestionAndAnswer="false"
      requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6"
      minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
      applicationName="/" name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  </providers>
</membership>
<roleManager>
  <providers>
    <add connectionStringName="DefaultConnection" applicationName="/"
      name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  </providers>
</roleManager> 
```

# magento - 遍历 Magento 属性值会跳过第一项

> ID：11130725
> 
> 赞同：0
> 
> 时间：2012-06-21T02:20:35.017
> 
> 标签：magento, loops, attributes, foreach

这是一个运行以下代码的 ajax 文件：

```
$model = Mage::getModel('catalog/product'); //getting product model
    foreach ($violins as $k => $v)
       {
           $_product = $model->load($v); //getting product object for particular product id
           $violinmodel = $_product->getAttributeText('Violinmodel'); //grabbing the violinmodel attribute value
           echo $violinmodel;
       } 
```

$violin 包含一个包含三个产品 ID 的数组。我的输出正在回显第二个和第三个 ID 的属性值，但没有回显第一个 ID！

我完全不明白这个！为什么它会完全跳过循环中的第一个 ID 并且不回显任何内容，而回显以下 ID 却没有问题？

属性设置正确，无论我如何重新排列 $violins 数组中的 ID，第一个属性值总是被跳过。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T02:55:01.777

当您在 Magento 中迭代产品集合时，它包含的项目实际上是产品对象实例。考虑到您要完成的工作（获取一个属性），您在这里所做的事情（多次访问数据库，加载所有属性）是不必要的。尝试将属性添加到集合开始并对其进行迭代：

```
$coll = Mage::getModel('catalog/product')->getCollection()
                                           ->addAttributeToSelect('Violinmodel');
                                           //be certain that the attribute code is capitalized...

foreach ($coll as $product) {
    //var_dump($product->debug()); //for example
    var_dump($product->getAttributeText('Violinmodel));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T03:58:58.097

`$model`在循环之外进行初始化是不安全的。你可能认为你在内存和/或函数调用方面效率更高，但你是在自找麻烦。该`Mage_Catalog_Model_Product`对象当时正在加载，调用`->load()`并没有给你一个新对象，它只是设置你现有对象的数据。除了，当不是所有的数据都被覆盖时，你会得到奇怪的行为（例如，如果 ProductA 有 Violinmodel 属性而 ProductB 没有......它看起来像 ProductA.Violinmodel == ProductB.Violinmodel）。因此，您应该始终将模型放在循环中。

```
foreach ($violins as $k => $v) {
    $_product = Mage::getModel('catalog/product')->load($v); //getting product
    if ($_product->getId() == $v) { // sanity check
        $violinmodel = $_product->getAttributeText('Violinmodel'); //grabbing the violinmodel attribute value
        echo $violinmodel;
    }
} 
```

或者，正如 Benmarks 建议的那样，通过集合加载此数据：

```
$_products = Mage::getModel('catalog/product')->getCollection()
    ->addAttributeToSelect('Violinmodel')
    ->addIdFilter($violins);
foreach ($_products as $_product) {
    echo $_product->getAttributeText('Violinmodel'));
} 
```

# ios - 在 Titanium Mobile iOS 中不活动时继续播放音乐

> ID：11130727
> 
> 赞同：0
> 
> 时间：2012-06-21T02:20:51.397
> 
> 标签：ios, mobile, titanium

我有一个适用于 iOS 设备的 Titanium Mobile 项目，并希望在应用程序处于非活动状态时继续播放音乐，如果可能的话，在设备锁定时继续播放。

音频文件仅在应用程序中，不在 iTunes 库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T02:55:30.887

您必须在作为 XCode 项目的一部分生成的 .plist 文件中设置背景模式。

请参阅此链接 [http://www.codeproject.com/Articles/124159/Hour-21-Building-Background-Aware-Applications](http://www.codeproject.com/Articles/124159/Hour-21-Building-Background-Aware-Applications)

并查找名为添加背景模式键的部分

后台音频播放必须是你的应用功能的一个根本重要的部分才能使用它，否则当你申请提交到应用商店时它会被拒绝。

# caching - 浏览器缓存限制是每个域还是所有域？

> ID：11130729
> 
> 赞同：3
> 
> 时间：2012-06-21T02:21:00.907
> 
> 标签：caching, browser, browser-cache

我是网络开发的新手。看了一些浏览器缓存相关的文章，知道所有浏览器都有默认限制，用户可以自行设置。但我仍然无法弄清楚浏览器缓存限制是每个域还是所有域的总数？我知道每个域的本地存储为 5mb - 10mb。浏览器缓存呢？

# c# - 获取、更改和更新副本缓存

> ID：11130731
> 
> 赞同：2
> 
> 时间：2012-06-21T02:21:08.270
> 
> 标签：c#, caching, .net-4.0

我在谷歌上搜索了几乎所有地方，但我没有找到任何有用的东西。我想知道如何获取当前缓存并将其保存在字符串中。该字符串将得到处理，然后替换当前缓存。

我说的是我们在 Windows 上的普通副本缓存 (CTRL + C)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T02:24:32.297

使用 System.Windows.Forms.Clipboard.GetText()

[http://msdn.microsoft.com/en-us/library/kz40084e.aspx](http://msdn.microsoft.com/en-us/library/kz40084e.aspx)

来自 MSDN 的示例：

```
// Demonstrates SetText, ContainsText, and GetText.
public String SwapClipboardHtmlText(String replacementHtmlText)
{
    String returnHtmlText = null;
    if (Clipboard.ContainsText(TextDataFormat.Html))
    {
        returnHtmlText = Clipboard.GetText(TextDataFormat.Html);
        Clipboard.SetText(replacementHtmlText, TextDataFormat.Html);
    }
    return returnHtmlText;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T02:48:57.693

首先在您的控制台应用程序中`System.Windows.Forms.dll`通过解决方案资源管理器窗口添加对的引用。然后你应该可以添加`using System.Windows.Forms`.

这是一些从控制台应用程序中读取剪贴板文本的示例代码（**重要**：您需要将 [STAThread] 属性添加到 Main 中，如下所示；否则会`ThreadStateException`抛出异常）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace SampleConsole
{
    class Program
    {
        [STAThread]
        static void Main(string[] args)
        {
            if (Clipboard.ContainsText(TextDataFormat.Text))
            {
                string clipBoardText = Clipboard.GetText(TextDataFormat.Text);
                Console.WriteLine("TEXT in ClipBoard : " + clipBoardText);

                Console.WriteLine("Type text to replace (and press Enter key) :");
                string replaceText = Console.ReadLine();
                Clipboard.SetText(replaceText);
                Console.WriteLine("REPLACED ClipBoard Text : " + Clipboard.GetText(TextDataFormat.Text));               
            }
            else
            {
                Console.WriteLine("No text in clipboard, please type now (and press Enter key) :");
                string newText = Console.ReadLine();
                Clipboard.SetText(newText);
                Console.WriteLine("NEW ClipBoard Text : " + Clipboard.GetText(TextDataFormat.Text));    
            }

            Console.Read();
        }
    }
} 
```

# javascript - 带有 mvc 部分视图问题的花式框

> ID：11130733
> 
> 赞同：0
> 
> 时间：2012-06-21T02:21:11.267
> 
> 标签：javascript, jquery, asp.net-mvc, fancybox

这是我每次单击编辑按钮时收到的消息：无法加载请求的内容。请稍后再试。

有人有想法么？如果您需要查看部分视图，我可以发布它。

我的控制器：

```
[HttpPost]
    public ActionResult SearchEdit(int modelcount)
    {

        using (Offers.OffersClient o = new Offers.OffersClient())
        {
            var offers = (List<Offers.Offer>)Session["offer"];
            var offer = offers[modelcount];

            return PartialView("Search_Edit", offer);
        }
    } 
```

我的观点：

```
<div class="offer_edit">
    <a href="@Url.Action("SearchEdit","Home",null,"http")?modelcount=@(i)" class="fancybox">
        <img title="Edit" src="../images/edit_button.png" />
    </a>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T05:59:50.487

你的动作用`[HttpPost]`属性装饰。这意味着只能使用 POST 动词调用此控制器操作。但在您看来，您正在使用一个链接 ( `<a>`)，除非您已将 fancybox 配置为使用 POST，否则单击该链接会发送 GET 请求。要进一步调查此问题，您可以使用诸如 FireBug 之类的 javascript 调试工具来检查发送到服务器的 AJAX 请求以及响应。

# jquery - jQuery mouseover 无法按预期工作

> ID：11130734
> 
> 赞同：1
> 
> 时间：2012-06-21T02:21:15.333
> 
> 标签：jquery, mouseover

这是我的html：

```
<div id="social">
    <a href="#" class="twitter"><span class="text">Twitter</span></a>
</div> 
```

我打算做的是最初隐藏 span.text 并且当我将鼠标悬停在 div 背景中的图像上时。这是我的CSS

```
#social a {
    display:inline-block;
    overflow:hidden;
    padding:4px 0 0 28px;
/* left padding is for the bg image to be visible*/
}
#social a span {
    display:none;
}
#social .twitter {
    background:url(../images/social/twitter.png) no-repeat left top;
}
#social .twitter:hover {
    background:url(../images/social/twitter_hover.png) no-repeat left top;
} 
```

这是我的js：

```
$("#social a.twitter").mouseover(function(){
  $("span",this).show("slow");
}).mouseout(function(){
  $("span",this).hide("slow");
}); 
```

但是当我将鼠标悬停在它不断显示和隐藏文本的图像上时会发生什么。我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T02:30:05.087

您有一个非常常见的问题，当显示跨度时，鼠标不再位于 a 上方，因此调用了 mouseout 事件。

要解决此问题，请使用 mouseenter 和 mouseleave 事件

```
$("#social a.twitter").mouseenter(function(){
  $("span",this).show("slow");
}).mouseleave(function(){
  $("span",this).hide("slow");
});​ 
```

[为你小提琴：D](http://jsfiddle.net/hUfbA/)

并且，在 css 中，评论是 with`/* */`和 not with`//`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T02:25:12.173

在您的 CSS 中：

```
// left padding is for the bg image to be visible 
```

`//`不是评论的有效符号。

它们必须`/* */`像这样包裹：

```
/* left padding is for the bg image to be visible */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T02:32:34.543

您不需要（也不应该）使用 javascript 来实现此效果。你可以用 CSS 来做，它更干净，更语义化:)。例子：

```
​a.twitter {
    display: block;
    width: 300px;
    height: 300px;
    background: url('http://www.simplyzesty.com/wp-content/uploads/2012/01/twitter_newbird_boxed_whiteonblue2.png');
}

a.twitter span {
    opacity: 0;
    -webkit-transition: opacity 0.2s;
    -moz-transition: opacity 0.2s;
    -o-transition: opacity 0.2s;
    transition: opacity 0.2s;
}

a.twitter:hover span {
    opacity: 1;
} 
```

jsFiddle：http: [//jsfiddle.net/Ut4Gx/](http://jsfiddle.net/Ut4Gx/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T02:34:51.947

尝试使用[mouseleave](http://api.jquery.com/mouseout/)。重新鼠标退出：

> 由于事件冒泡，这种事件类型会引起很多麻烦。例如，在本例中，当鼠标指针移出 Inner 元素时，将向该元素发送一个 mouseout 事件，然后向上传播到 Outer。这可能会在不合时宜的时候触发绑定的 mouseout 处理程序。请参阅 .mouseleave() 的讨论以获取有用的替代方法。

# ruby-on-rails - Rails3 用户更改密码，如何更改当前会话密码？

> ID：11130748
> 
> 赞同：0
> 
> 时间：2012-06-21T02:24:05.607
> 
> 标签：ruby-on-rails, session

我需要让用户更改他们的密码。我想在会话中切换密码以反映这个新密码，而不用注销它们。

```
def set_auth username, password
    # test username and password here?
    auth_object = AuthCookie.new
    auth_object.set_username username
    auth_object.set_password password
    session[:user_login] = auth_object
end 
```

我使用了类似上面的东西，但它似乎无法将当前会话的密码更改为刚刚输入的新密码。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T02:30:44.643

不要将整个身份验证对象保存在会话中，最重要的是您不应该在会话中保存密码信息。Rails 默认会话存储是基于 cookie 的，只是 base64 编码字符串。因此，如果您在会话中保存用户密码信息，则会出现安全问题。

只需将用户标识放在会话中，例如 user_id。`session[:user_id] = user_id`

# photoshop - Photoshop 如何在正常混合模式下显示多层？

> ID：11130750
> 
> 赞同：0
> 
> 时间：2012-06-21T02:24:21.650
> 
> 标签：photoshop, formula, blend, mode

我试图了解普通混合模式在 Photoshop 中的工作原理。 [http://www.pegtop.net/delphi/articles/blendmodes/normal.htm](http://www.pegtop.net/delphi/articles/blendmodes/normal.htm) 正如网页所说，它只是显示上面图层的颜色。但是当我复制同一图层并将它们一起显示时，颜色似乎更暗不仅仅是显示一层。当我添加更多时，颜色保持在特定值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T05:20:36.797

正常混合模式显示最顶部完全不透明图层的颜色，对于透明图层，它将从上到下添加，直到达到完全不透明。

这意味着如果您在任何（例如，蓝色元素）上有完全不透明的红色元素，则将显示红色。如果红色元素比蓝色元素透明 50%，则将显示粉红色。

如果您有一个 50% 透明的黑色元素，它将显示为中灰色，如果您复制该图层，则彼此顶部的两个元素将相加显示完全黑色。

# java - 内容提供者 JUnit 测试和 null getContext()

> ID：11130756
> 
> 赞同：0
> 
> 时间：2012-06-21T02:24:35.010
> 
> 标签：java, android, nullpointerexception, android-contentprovider

我正在尝试测试我的自定义内容提供程序的 update() 方法。由于 update() 方法中的 getContext() 方法调用为空，我收到一个空指针异常。为了缓解这个问题，我尝试实现[为什么 AndroidTestCase.getContext().getApplicationContext() 返回 null？](https://stackoverflow.com/questions/6516441/why-does-androidtestcase-getcontext-getapplicationcontext-return-null)无济于事。我的测试类如下所示：

```
 public class AddressContentProviderTest extends ProviderTestCase2<AddressContentProvider> {

    public AddressContentProviderTest() {
    super(AddressContentProvider.class, AddressContentProvider.class.getName());
}

protected void setUp() throws Exception {
    super.setUp();
}
    public void testInsert() {
         Uri CONTENT_URI = Uri.parse("content://" + AddressContentProvider.AUTHORITY + "/address");
         AddressContentProvider addressContentProvider = new AddressContentProvider();
         ContentValues initialValues = new ContentValues();
         boolean isException = false;
         Uri returnURI = null;
         initialValues.put("country", "test");
         initialValues.put("region", "test");
         initialValues.put("city", "test");
         initialValues.put("state", "FL");
         initialValues.put("zip", "90210");
         initialValues.put("province", "test");
         initialValues.put("geo_location_id", "");

          returnURI = addressContentProvider.insert(CONTENT_URI, initialValues);

     assertTrue(returnURI != null);

} 
```

插入方法如下所示：

```
 @Override
    public int update(Uri uri, ContentValues values, String where, String[]  whereArgs) {
           SQLiteDatabase db =dbHelper.getWritableDatabase();
           int count;

          switch (sUriMatcher.match(uri)) {
            case ADDRESS:
                count = db.update(ADDRESS_TABLE_NAME, values, where, whereArgs);
                break;
            default:
         throw new IllegalArgumentException("Unknown URI " + uri);
    }
    getContext().getContentResolver().notifyChange(uri, null);
    return count;
} 
```

我正在 Platform 10 上使用 Android 2.3.3 运行我的测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T03:39:03.487

所以问题的答案是调用 getProvider(); 方法。这使我可以访问执行线程中的 AddressContentProvider；

```
 public void testInsert() {
        Uri CONTENT_URI = Uri.parse("content://" + AddressContentProvider.AUTHORITY + "/address");
        AddressContentProvider addressContentProvider = getProvider();
        ContentValues initialValues = new ContentValues();
    //Uri returnURI = null;
        initialValues.put("country", "USA");
        initialValues.put("region", "test");
        initialValues.put("city", "Jacksonville");
        initialValues.put("state", "FL");
        initialValues.put("zip", "32258");
        initialValues.put("province", "test");
        initialValues.put("geo_location_id", "");
        Uri returnURI = addressContentProvider.insert(CONTENT_URI, initialValues);
        assertTrue(returnURI != null);
} 
```

# iphone - UIScrollView 没有正确更新和显示

> ID：11130757
> 
> 赞同：3
> 
> 时间：2012-06-21T02:24:35.590
> 
> 标签：iphone, ios, xcode

我有问题`UIscrollView`，这就是我所做的：每当用户通过 a 选择相机胶卷中的图像（多个或单个）时`Imagepicker`，我想在我的 UIScrollView 中显示它。我能够显示它，但是当我`Imagepicker`再次选择一个图像时，它没有更新`UIScrollView`，我尝试将我`[self createScrollView]`的，`viewDidAppear`但它重新创建`UIScrollView`但不更新它，所以旧图像和新图像组合在一起. 所以我已经把它们放进去了，`viewDidLoad`但它只有在我去另一个`View Controller`然后再回来时才会更新。

// 我`UIScrollView`的缩略图

```
- (void) createScrollView {
    self.slotBg = [[UIView alloc] initWithFrame:CGRectMake(43, 370, 300, 143)];
    CAGradientLayer *gradient = [CAGradientLayer layer];
    gradient.frame = self.slotBg.bounds;
    gradient.colors = [NSArray arrayWithObjects:(id)[[UIColor grayColor] CGColor], (id)[[UIColor whiteColor] CGColor], nil];
    [self.slotBg.layer insertSublayer:gradient atIndex:0];
    [self.view addSubview:self.slotBg];

    self.scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0.0f,0.0f,300.0f,134.0f)];
    [slotBg addSubview:self.scrollView];

    int row = 0;
    int column = 0;
    for(int i = 0; i < _thumbs.count; ++i) {

        UIImage *thumb = [_thumbs objectAtIndex:i];
        UIButton * button = [UIButton buttonWithType:UIButtonTypeCustom];
        button.frame = CGRectMake(column*60+10, row*60+10, 60, 60);
        [button setImage:thumb forState:UIControlStateNormal];
        [button addTarget:self 
                   action:@selector(buttonClicked:) 
         forControlEvents:UIControlEventTouchUpInside];
        button.tag = i; 

        [scrollView addSubview:button];

        if (column == 4) {
            column = 0;
            row++;
        } else {
            column++;
        }

    }

    [scrollView setContentSize:CGSizeMake(330, (row+1) * 60 + 10)];
} 
```

// 在我的视图中DidLoad

```
- (void)viewDidLoad
{
       for(int i = 0; i <= 100; i++) 
        { 
            NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
            NSString *documentsDir = [paths objectAtIndex:0];

            NSString *savedImagePath = [documentsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"oneSlotImages%d.png", i]]; 
            NSLog(@"savedImagePath=%@",savedImagePath);
            if([[NSFileManager defaultManager] fileExistsAtPath:savedImagePath]){ 
                [self addImage:[UIImage imageWithContentsOfFile:savedImagePath]]; 

                NSLog(@"file exists");
            } 
        } 
        NSLog(@"Count : %d", [_images count]);
        [self createScrollView];
} 
```

**编辑：**

```
- (void) viewDidLoad {
    [self createScrollView];

    [_thumbs removeAllObjects];
    UIView *removeView;
    for(int i = 0; i < _thumbs.count; ++i) {
    while((removeView = [scrollView viewWithTag:i]) != nil) {
        [removeView removeFromSuperview];
    }

        { 
            NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
            NSString *documentsDir = [paths objectAtIndex:0];

            NSString *savedImagePath = [documentsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"oneSlotImages%d.png", i]]; 
            NSLog(@"savedImagePath=%@",savedImagePath);
            if([[NSFileManager defaultManager] fileExistsAtPath:savedImagePath]){ 
                [self addImage:[UIImage imageWithContentsOfFile:savedImagePath]]; 
                NSLog(@"file exists");
            } 
        } 
        NSLog(@"Count : %d", [_images count]);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T03:46:41.057

有两点：

1.  检查您的数据源。图像是否已正确保存在您的文档目录中。
2.  无需再次创建滚动视图及其父视图。将下面的代码从 移动`createScrollView`到`viewDidLoad`。这些视图应该只创建一次。

self.slotBg = [[UIView alloc] initWithFrame:CGRectMake(43, 370, 300, 143)]; CAGradientLayer *gradient = [CAGradientLayer 层]; gradient.frame = self.slotBg.bounds; gradient.colors = [NSArray arrayWithObjects:(id)[[UIColor grayColor] CGColor], (id)[[UIColor whiteColor] CGColor], nil]; [self.slotBg.layer insertSublayer:gradient atIndex:0]; [self.view addSubview:self.slotBg];

```
self.scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0.0f,0.0f,300.0f,134.0f)];
[slotBg addSubview:self.scrollView]; 
```

现在，从 viewDidAppear，首先更新您的 _thumbs 数组（数据源）。然后调用 createScrollView 函数。在这个函数内部，首先从 UIScrollView 中移除所有使用标签的子视图。像你做的那样再次添加所有的拇指。然后在从 createScrollView 返回之前调用 [self setNeedsDisplay]。

# jakarta-ee - 与 Apache Tomcat 的容器间通信

> ID：11130758
> 
> 赞同：1
> 
> 时间：2012-06-21T02:24:37.477
> 
> 标签：jakarta-ee, tomcat, networking, war

Apache tomcat 中是否可以进行容器间通信？

例如：假设您有 2 个休息服务和一个 Java EE 项目。您的 Java EE 项目在同一托管服务器所在的 URL 调用服务。

Apache Tomcat 是否可以消除网络服务器的额外调用，而直接将其发送到服务的容器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:32:12.707

没有。Tomcat 无法做到这一点。对不起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T19:09:50.697

从来没听说过。
但是，为什么不构建一个可以配置为使用 HTTP 调用或通过 Bean 调用的通信策略模式呢？

# sql-server-2008 - 使用 SQL 查询修改 sql server 2008 中的 SP

> ID：11130759
> 
> 赞同：0
> 
> 时间：2012-06-21T02:24:49.490
> 
> 标签：sql-server-2008, stored-procedures

我们正在将许多旧的存储过程推广到生产环境，但它们引用了一个开发框。有没有简单的方法来搜索所有程序并更新它们？我尝试更新 sys.sql_modules 中的定义字段，还尝试更新 syscomments.text 但无法更新。这是我正在尝试做的一个例子。

在存储过程中，我们有以下 select * from vmdproduction.test.dbo.table1，我想在所有存储过程的所有情况下将 vmdproduction 重命名为生产。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T02:36:35.103

我就是这样做的... 在 Management Studio 中，右键单击您的数据库，选择 Tasks，Generate Scripts。通过向导并确保包括所有存储过程和“脚本 DROP 和 CREATE”（在高级选项下）。这将生成一个脚本文件，该文件将删除并重新创建所有程序。然后，您可以在运行脚本之前进行查找和替换。一定要在运行它之前备份数据库！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-19T05:16:21.133

**使用 SQL Server Management Studio**
**修改 Management Studio 中的过程**
1.在对象资源管理器中，连接到数据库引擎的一个实例，然后展开该实例。
2.展开**'Databases'**，展开程序所属的数据库，再展开**'Programmability'**。
3.展开**“存储过程”**，右键单击要修改的过程，然后单击**“修改”**。
4.修改存储过程的文本。
5.要测试语法，在**“查询”**菜单上，单击**“解析”**。
6.要保存对程序定义的修改，在**“查询”**菜单上，**“执行”**。
7.要将更新的过程定义保存为 Transact-SQL 脚本，在**“文件”**菜单上，单击**“另存为”**。接受文件名或将其替换为新名称，然后单击**“保存”**。

# vb6 - 如何将无窗口控件放置在 Windows 控件之上？

> ID：11130760
> 
> 赞同：3
> 
> 时间：2012-06-21T02:24:50.957
> 
> 标签：vb6, windowless

比如说，我有一个 Image 控件（它似乎是一个无窗口控件），我想确保它位于 TextBox 之上。无论我做什么，图像控件都不会出现在文本框的顶部。

有办法吗？

PS 我知道我可以使用 PictureBox，但它不支持透明度，因此我必须拥有 Image 控件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T12:22:49.603

无法将图像控件放置在普通文本框上，因为它们被*绘制*到表单本身上，因此将始终位于任何其他窗口组件下方。

如果您有 VB6 安装媒体，则有绘制（无窗口）版本的控件，包括您可以使用的 TextBox，它将（可能）执行您想要的操作；[http://support.microsoft.com/kb/184687](http://support.microsoft.com/kb/184687)

某种类型的自定义用户控件，如果可能更好的话..您想要覆盖文本框的到底是什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T02:37:54.800

图像控件被认为是图形控件，就像形状一样，所以它总是不如文本控件。如果你真的想要一个透明的图像，你可以使用 Microsoft 2.0 Form 代替（只有你有它）。图像可以位于文本框的顶部，您可以通过将 Backstyle 设置为 Transparent(0) 使其透明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T12:19:47.377

我创建了一个透明的覆盖控件来在 VB6 应用程序之上添加一种注释层。我会尝试从记忆中描述它，如果这不能提供足够的信息，那么您可以回帖，我会尝试挖掘代码。

首先，向您的应用程序添加一个新的 USerControl。给它起一个像 ImageEx、PictureEx 或 TransparntImage 这样的名称。您将需要使用几个属性。确保控件是窗口化的，因此它可以位于其他窗口化控件之上。找到 MaskColor 属性并将其设置为青色（或您选择用于指示透明区域的任何颜色。可能有一个附加属性启用掩蔽行为，只需浏览属性即可。将控件背景颜色设置为 MaskColor 的背景颜色。此时您有一个不可见的控件。在我的控件中，我在表面上绘制了注释，但是您可以使用 PaintPicture 或者甚至设置图像属性以实现非常简单的方法。

当然，要使其成为可重复使用的控件，您需要在自己的属性中编写代码，以允许设置 MaskColor 和图像等，以便您可以将其中一个拖放到您想要的任何表单上。

* * *

一些链接：

[MaskColor 属性](http://msdn.microsoft.com/en-us/library/aa235173%28v=vs.60%29.aspx)

[MackPicture 属性](http://msdn.microsoft.com/en-us/library/aa235175%28v=vs.60%29.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T13:22:59.717

与我的其他答案完全不同的方法（因此是单独的答案），但您可以将 Form 上的 AutRedraw 和 ClipControls 设置为 false，它将允许 Image 控件与窗口控件在同一层上呈现。在某些情况下，您可以进行一些 flakey 重绘，但为了快速解决方案，您可以尝试一下。

[http://msdn.microsoft.com/en-us/library/aa733621(v=vs.60](http://msdn.microsoft.com/en-us/library/aa733621(v=vs.60) )

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-04T09:41:02.153

1）删除所有文本框，标签和......（但记住它们的名称和位置在表格中）

2）转到（项目>组件）并标记（Microsoft Forms 2.0 Object Library），然后单击确定

3）现在您可以在工具箱中的默认控件下看到新控件...

4）使用其文本框和标签控件而不是默认控件

5）右键单击您的图像控件，然后单击（带到前面）

# emacs - 带有 sml 模式的 emacs

> ID：11130762
> 
> 赞同：3
> 
> 时间：2012-06-21T02:24:54.247
> 
> 标签：emacs, sml, smlnj

我在 emacs 中使用 sml-mode (Stefan Monnier)。编译器是 smlnj，在笔记本电脑上。但是，当调用 SML 编译器时，它将 emacs 框架分成两个窗口，每个窗口适合 12 行。如何让 SML 程序编辑缓冲区在其自己的 emacs 框架中，而 SML-Inferior-Mode 缓冲区在单独的 emacs 框架中？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T09:18:28.653

真的很直！

首先，调用 SML 编译器：`C-c C-b` 它要求提供默认的 SML 系统：SMLNJ、MosML 等。键入要调用的编译器的名称，或者按 RETURN 键接受默认值（如果有）。

然后，让编译器窗口显示在自己的框架上，`C-x 5 2`

要从 SML 程序编辑窗口中终止（删除）编译器窗口，请访问该窗口（`C-x o`（字母 o））或通过鼠标访问。然后按`C-x 0`（零）。

# xilinx - 为什么这个 VHDL 不能在 XST 中推断 BRAM？

> ID：11130764
> 
> 赞同：2
> 
> 时间：2012-06-21T02:25:04.523
> 
> 标签：xilinx, synthesis, virtex

我有一个向量数组，我想使用 ISE 13.4 将它们存储在 Virtex-5 上的 Block RAM 中。它是 32Kb，应该适合 1 个 BRAM，但它都存储在逻辑中。我的系统使用 AMBA APB 总线，所以我检查选择线和启用线。请帮助我理解为什么这段代码不能推断出 BRAM。注意：这是一个更容易理解的虚拟示例，应该可以帮助我处理其他代码。

```
architecture Behavioral of top is
type memory_array is array (63 downto 0) of std_logic_vector(31 downto 0);
signal memory : memory_array;

attribute ram_style: string;
attribute ram_style of memory : signal is "block";

begin

process(Clk)
begin
    if(rising_edge(Clk)) then
        if(Sel and Wr_en and Enable) = '1' then
            memory(to_integer(Paddr(5 downto 0))) <= Data_in;
        elsif(Sel and not Wr_en and Enable) = '1' then
            Data_out <= memory(to_integer(Paddr(5 downto 0)));
        end if;
    end if;
end process;

end Behavioral; 
```

我`ram_style`将数组声明为，`block`但 XST 报告说：`WARNING:Xst:3211 - Cannot use block RAM resources for signal <Mram_memory>. Please check that the RAM contents is read synchronously.`

问题似乎在于 read_enable 条件，但 Virtex 5 用户指南听起来好像 BRAM 硬块上有一个`enable`和一个`write_enable`。我可以一直驱动​​输出，但我不想这样做，那样会浪费功率。还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:59:07.253

您的逻辑可能与您设备的 BRAM 的工作方式不匹配（取决于设备，存在各种限制）。通常，在`data_out`启用 RAM 的每个时钟周期都会更新，而不仅仅是“不写入时” - 试试这个：

```
process(Clk)
begin
    if(rising_edge(Clk)) then
        if(Sel and Enable) = '1' then
            Data_out <= memory(to_integer(Paddr(5 downto 0)));
            if wr_en = '1' then
                memory(to_integer(Paddr(5 downto 0))) <= Data_in;
            end if;
        end if;
    end if;
end process; 
```

我将 Data_out 分配“向上”移动，以明确它获得“旧”值 - 这是 BRAM 的默认行为，尽管也可以设置其他样式。

或者，这些工具可能会被单个语句中的`sel`and`enable`和all 混淆- 这是因为在推断 BRAM 时它们主要是“模板匹配”而不是“功能匹配”。您可能会发现，简单地将“enable if”和“write if”（如我上面所做的）分开，同时保持其余功能相同，就足以使合成器完成所需的工作。`write``if`

如果您使用的是 Xilinx 的 XST，那么您可以在文档中阅读所有关于推断 RAM 的内容（我的 XST 用户指南的第 204 页 - 这一章称为“RAM HDL 编码技术”）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T02:33:56.760

为您设备上的 BRAM 块使用适当的宏？我发现这比依赖合成工具要好得多，而不是愚蠢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T18:36:01.273

我尝试了许多不同的组合，这是我唯一要工作的组合：

```
en_BRAM <= Sel and Enable;

process(Clk)
begin
    if(rising_edge(Clk)) then       
        if(en_BRAM = '1')then
                if(Wr_en = '1') then
                    icap_memory(to_integer(Paddr(5 downto 0))) <= Data_in;
                else
                    Data_out <= icap_memory(to_integer(Paddr(5 downto 0)));         
                end if;
        end if;
    end if;
end process; 
```

所以我认为启用需要在整个 RAM 上，它只能是 1 个信号。那么写使能也只能是 1 个信号，而读必须只是一个`else`语句（不是`if/elsif`）。这将根据 Windows 7 64 位上的 ISE 13.3 中的 XST 实例化 BRAM。

# c# - 为什么使用 JSON 在我的 .NET Web 服务中出现错误 StreamReader？

> ID：11130767
> 
> 赞同：0
> 
> 时间：2012-06-21T02:25:55.757
> 
> 标签：c#, .net, json, web-services

我想使用带有 JSON 的 C# 创建一个 .NET Web 服务。但是我的 web 服务的返回语句中有错误，`cannot implicitly convert type 'string' to 'Model.User'` 如何解决该错误行？

这是我的 WebService.asmx ：

```
[OperationContract]
    public Model.User GetUser(string ccduser)
    {
        Model.User user = new Model.User();
        string connectionString = ConfigurationManager.ConnectionStrings["ConnStr"].ConnectionString;
        using (SqlConnection connection = new SqlConnection(connectionString)) {
            string sql = "Select * from ms_webuser where ccduser = '" + ccduser + "'";
            connection.Open();

            SqlCommand command = new SqlCommand(sql, connection);
            SqlDataReader reader = command.ExecuteReader();
            while (reader.Read())
            {
                user.cnmuser = reader["cnmuser"].ToString();
            }
        }

        MemoryStream stream = new MemoryStream();
        DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(Model.User));
        serializer.WriteObject(stream, user);
        stream.Position = 0;
        StreamReader streamReader = new StreamReader(stream);
        return streamReader.ReadToEnd(); //here is the error red line
    } 
```

这是我的 Model.User 类：

```
namespace Model
{
    public class User
    {
        private string _ccduser;
        private string _cnmuser;

        public string ccduser
        {
            get { return _ccduser; }
            set { _ccduser = value; }
        }

        public string cnmuser
        {
            get { return _cnmuser; }
            set { _cnmuser = value; }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T02:29:30.410

您收到该错误是因为该[`ReadToEnd`](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readtoend.aspx)方法返回一个字符串，并且您已声明您的方法返回一个`Model.User`

要解决它，您应该返回要返回的用户，或者您应该更改方法以返回字符串。

# asp.net - ODATA 或 ASP.NET 中的可插入、可扩展和 RESTFUL 服务存储库

> ID：11130768
> 
> 赞同：1
> 
> 时间：2012-06-21T02:26:03.187
> 
> 标签：asp.net, rest, odata, asp.net-web-api

我将使用 ODATA 开发一个服务存储库。结果，我可以通过反射自动将这些类的那些公共方法建模为具有这些属性的实体类型

*   ID。图形用户界面
*   输出。它应该取决于方法返回的类型
*   ...（任何其他输入参数）

另一方面，我还将这些公共方法公开为之前定义的实体类型下的实体集。最后，公共用户可以通过 POST 一个 JSON 对象到特定的 URI 来RESTFULLY 调用公开服务，并在 ODATA 协议的帮助下从返回的 JSON 对象中检索 OUTPUT

不幸的是，实体类型定义中不支持主对象数组或复杂对象数组。结果，我无法定义具有多个 TO (string[]) 或 CC (also string[]) 的 SMTP Send Entity Type 我该如何处理这个问题？

我听说微软已经发布了 ODATA V3.0 和 ASP.NET Web API。这些新技术能帮上忙吗？或任何其他实现可扩展 RESTFUL 的建议（或 HTTP 友好，因为我想直接在 html、php 或任何其他网页中的 javascript 中调用它）？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:18:13.693

OData V3 确实支持作为原始值或复杂值集合的属性。WCF 数据服务 V5 为自定义和反射提供程序实现了这一点（尚不支持 EF 提供程序）。

参见例如[http://www.odata.org/media/30002/OData%20Atom%20Format.html#collectionofsimpletypedproperties](http://www.odata.org/media/30002/OData%20Atom%20Format.html#collectionofsimpletypedproperties)

可以在此处下载最新的 WCF 数据服务：[http ://www.nuget.org/packages/Microsoft.Data.Services](http://www.nuget.org/packages/Microsoft.Data.Services)

# mysql - MySQL：计算范围内的数据

> ID：11130771
> 
> 赞同：0
> 
> 时间：2012-06-21T02:26:16.117
> 
> 标签：mysql, sum, where-clause

我正在使用下面的查询来计算每日结果，但现在我简短地说只是将数据结果显示在`2012-06-01`.

```
SELECT DATE(A.Inspection_datetime) AS Date,A.Line,
       TRIM(A.Model) AS Model, A.Lot_no, COUNT(A.Serial_number) AS Qty,
       B.name
FROM inspection_report AS A
LEFT JOIN Employee AS B
ON A.NIK=B.NIK
WHERE A.Inspection_datetime LIKE '2012-06-01%'
GROUP BY DATE(A.Inspection_datetime), TRIM(A.Model), B.name,A.Line,A.Lot_no 
```

我得到的结果如下：

```
Date        Line       Model        Lot_no  Qty name
2012-06-01  FA 24   DDX6051BTQD     014A    4   Ben
2012-06-01  FA 24   DDX6051BTQD     014A    4   August
2012-06-01  FA 24   DDX630WBTXD     012A    8   August
2012-06-01  FA 17   KD-DV5506UPD    021A    20  Stue
2012-06-01  FA 17   KD-DV5606UD     114A    25  Carl
2012-06-01  FA 17   KD-DV5606UD     114A    3   Teo 
```

如果我想统计数据直到目标数据前该怎么办。`DDX6051BTQD`从直到计数`KD-DV5506UPD`。所以，我只是得到 LIKE 的结果：

```
Date          Qty
2012-06-01    36 
```

尝试：

```
SELECT X.DATE, SUM(X.Qty) FROM (//insert query above//)
WHERE ??????? //how to do ? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T03:01:34.150

您可以尝试以下方法；

```
SET @userValueFrom := 'DDX6051BTQD';
SET @userValueTo :='KD-DV5506UPD';

SELECT * FROM (//insert your query above//) 
where Model >= @userValueFrom and Model <= @userValueTo ; 
```

# facebook-graph-api - 根据 OAuth 2.0 RFC 处理 Facebook API 权限跳过/撤销

> ID：11130773
> 
> 赞同：4
> 
> 时间：2012-06-21T02:26:46.943
> 
> 标签：facebook-graph-api, oauth-2.0

假设我的应用程序希望代表用户从第三方请求权限 A 和 B。

根据 OAuth 2.0 RFC，第三方无需授予这些权限。但是，如果返回的权限不等于我的应用程序请求的权限，则授予的范围将在第三方响应中返回。

当我模拟跳过/拒绝流时，通过阅读 Facebook 文档并检查来自 Facebook 的响应，似乎未返回授予的范围，并且我的应用程序需要进行后续 api 调用以查看授予了哪些权限。

这个对吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T12:37:14.003

简短的回答：是的，你知道。

更长的答案：进行 API 调用`https://graph.facebook.com/me/permissions?access_token=OAUTH_ACCESS_TOKEN_HERE` - 在 PHP 或 JS SDK 中，您可以简化此操作，就像`/me/permissions`SDK 将为您包装服务器和访问令牌一样。

这显示了该用户当前授予您的应用程序的所有范围，示例输出为：

```
{
  "data": [
    {
      "installed": 1, 
      "manage_friendlists": 1, 
      "status_update": 1, 
      "photo_upload": 1, 
      "video_upload": 1, 
      "create_event": 1, 
      "create_note": 1, 
      "share_item": 1, 
      "publish_stream": 1, 
      "publish_actions": 1, 
      "user_about_me": 1, 
      "friends_activities": 1
    }
  ]
} 
```

因为用户可以追溯删除以前授予的权限，所以无论如何您都需要不时执行此操作，因为即使您在特定权限请求中授予范围的回调，用户也几乎可以撤销部分/全部紧接着。

# jquery - 滑过旋转木马，具有流体宽度

> ID：11130775
> 
> 赞同：0
> 
> 时间：2012-06-21T02:27:22.383
> 
> 标签：jquery, slideshow, show-hide, carousel

我有这个标记：

```
<section id="content">
  <a class="back">Back</a>
  <a class="forward"/>Forward</a>

  <article>
   <p>Lorem ipsum</p>
  </article>

  <article>
   <p>Lorem ipsum</p>
  </article>

  <article>
   <p>Lorem ipsum</p>
  </article>

</section> 
```

文章的内容有多种高度，整个布局位于一个流动的容器中。我想进行设置，以便后向和前向链接循环浏览内容下的所有文章，并且无限循环。锦上添花将是动画从右到左向前的过渡，以及从左到右的前一个动画，

只是不知道如何，真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T03:02:52.757

我以前用过 Nivo Slider 插件来做类似的事情。它非常易于使用且易于设置。而且它是免费的！你可以在这里下载：

[http://nivo.dev7studios.com/](http://nivo.dev7studios.com/)

安装教程在这里：

[http://nivo.dev7studios.com/support/jquery-plugin-usage/](http://nivo.dev7studios.com/support/jquery-plugin-usage/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T03:36:26.237

这是[一个带有 jQ​​uery 的简单无限轮播](http://www.queness.com/post/923/create-a-simple-infinite-carousel-with-jquery)

我将代码复制到 jsfiddle 供您查看

[jsfiddle 示例](http://jsfiddle.net/h9X6Y/)

# eclipse - 任何 Java 库都可以获取整个 Java 程序的调用图和每个文件的 AST？

> ID：11130780
> 
> 赞同：1
> 
> 时间：2012-06-21T02:28:07.807
> 
> 标签：eclipse, translation, static-analysis

我正在尝试为 Java 程序做一些样式检查/翻译工作。

首先我想要一个库（最好是Java），这样我就可以在我的程序中使用它。其次，我希望它可以执行以下操作：

*   扫描整个程序（多个源文件）
*   提供 API 来访问单个文件的 AST
*   提供 API 来访问调用图，例如了解变量的所有引用、方法的所有调用者等。

在有限的时间里，我简单地研究了几个工具，比如eclipse、pmd、antlr、soot：

*   **PMD 和 ANTLR：**词法分析器/解析器，它们能够获取 AST，但没有调用图，因为它们不处理多个文件
*   **Eclipse：**它们似乎提供了 API，但只能在其插件框架中使用，或者与其 RCP 绑定（不作为独立程序中使用的常用库）
*   **Soot：**似乎非常接近我的要求。我正在阅读有关它的文件。

如果我对上述内容有误解，请纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T04:45:04.220

应该可以将 Eclipse Java 编译器及其数据结构用作没有 RCP 等的库。您可能想探索 eclipsec.exe 如何处理这一壮举。在需要命令行编译的情况下，这是相当于 javac.exe 的 Eclipse。

# c# - 生成对象时如何告诉NBuilder拦截getter？

> ID：11130781
> 
> 赞同：2
> 
> 时间：2012-06-21T02:28:17.420
> 
> 标签：c#, nbuilder

我有这个 NBuilder 代码：

```
var fakeReviews = Builder<Review>
   .CreateListOfSize(100)
   .Build()
   .ToList()
   .AsReadOnly(); 
```

非常简单。

但它在评论中的这个属性上出错了：

```
public bool WasWrittenByAdmin
{  
   get
   {
      if (User == null) throw new InvalidOperationException("Must load User.");
      return User.UserSettings != null && User.UserSettings.IsAdmin;
   }
} 
```

基本上，我认为 NBuilder 正在尝试评估所有属性，包括 getter，但该 User 属性不存在。

即使我这样做：

```
var fakeReviews = Builder<Review>
   .CreateListOfSize(100)
   .All().With(x => x.User = Builder<User>.CreateNew().Build())
   .Build()
   .ToList()
   .AsReadOnly(); 
```

它仍然错误。

有什么方法可以告诉 NBuilder 拦截该 getter，或者在它尝试评估它之前如何设置 User 属性？（从而防止错误）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-11T12:17:23.550

这并不理想，但我通过明确设置我不想要的属性的值来解决这个问题。

在您的情况下，这意味着要么根据您要测试的内容返回真/假，要么抛出异常。

所以基本上你可能会做两种这样的方法：

```
public static Review BuildReviewByAdmin() 
{
    return Builder<Review>.CreateNew().With(x => x.WasWrittenByAdmin = true).Build();
}

public static Review BuildReviewByNonAdmin() 
{
    return Builder<Review>.CreateNew().With(x => x.WasWrittenByAdmin = false).Build();
} 
```

然后您可以在特定测试中使用您想要的那个。

但是，如果您要测试获取的逻辑，我会以不同的方式进行。

此外，还有一个涉及此问题的 NBuiler google 代码问题：

[https://code.google.com/p/nbuilder/issues/detail?id=79](https://code.google.com/p/nbuilder/issues/detail?id=79)

# heroku - 使用 rabbitmqadmin 访问 CloudAMQP / Heroku

> ID：11130782
> 
> 赞同：2
> 
> 时间：2012-06-21T02:28:27.720
> 
> 标签：heroku, rabbitmq, amqp, cloudamqp

我开始学习 AMQP 和 RabbitMQ。

为了让自己继续前进，我使用了 CLI 工具 rabbitmqadmin，成功地将数据发布到了我在 Mac OS X 机器上创建的 RabbitMQ 开发安装。到目前为止一切顺利，我可以发布消息，并观看它们出列......

但是，当我在 Heroku / CloudAMQP 实例上尝试完全相同的功能时，rabbitmqadmin 客户端似乎崩溃了。

这是电话：

```
rabbitmqadmin --host lemur.cloudamqp.com --vhost app4444444_heroku.com --user app4444444_heroku.com --password <withheld> publish routing_key=test payload="hello" 
```

...这是输出：

```
Traceback (most recent call last):
  File "/usr/local/bin/rabbitmqadmin", line 828, in <module>
    main()
  File "/usr/local/bin/rabbitmqadmin", line 325, in main
    method()
  File "/usr/local/bin/rabbitmqadmin", line 428, in invoke_get
    result = self.post(uri, json.dumps(upload))
  File "/usr/local/bin/rabbitmqadmin", line 354, in post
    return self.http("POST", path, body)
  File "/usr/local/bin/rabbitmqadmin", line 377, in http
    resp = conn.getresponse()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 1013, in getresponse
    response.begin()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 402, in begin
    version, status, reason = self._read_status()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 366, in _read_status
    raise BadStatusLine(line)
httplib.BadStatusLine: '' 
```

感谢您收到任何想法或想法！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T12:14:32.943

添加`--ssl`到命令行。CloudAMQP 的 web ui 仅支持 https。

# python-2.7 - 字符串格式化 [str.format()] 带有一个字典键，它是一个数字的 str()

> ID：11130790
> 
> 赞同：15
> 
> 时间：2012-06-21T02:30:14.050
> 
> 标签：python-2.7, python

Python新手在这里。我想知道是否有人可以帮助`KeyError`我在使用字典进行字符串插值时得到的[`str.format`](http://docs.python.org/library/stdtypes.html#str.format).

```
dictionary = {'key1': 'val1', '1': 'val2'}

string1 = 'Interpolating {0[key1]}'.format(dictionary)
print string1 
```

以上工作正常并产生：

```
Interpolating val1 
```

但是执行以下操作：

```
dictionary = {'key1': 'val1', '1': 'val2'}

string2 = 'Interpolating {0[1]}'.format(dictionary)
print string2 
```

结果是：

```
Traceback (most recent call last):
  File "test.py", line 3, in <module>
    string2 = 'Interpolating {0[1]}'.format(dictionary)
KeyError: 1L 
```

~~所以问题似乎在于将数字键解释为列表索引，恕我直言。~~有没有办法解决这个问题？~~（即传达这是一个字典键）~~

如果之前有人问过这个问题，TIA 并道歉（找不到与我的搜索相关的任何内容）。

编辑 1：该键不是前面错误指出的数字。[相反，它是数字的字符串表示 - 正如BrenBarn](https://stackoverflow.com/a/11130837/391113)所指出的那样。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-21T02:38:05.107

不，根据[文档](http://docs.python.org/library/string.html#formatstrings)：

> 因为 arg_name 不是用引号分隔的，所以不可能在格式字符串中指定任意字典键（例如，字符串 '10' 或 ':-]'）。

所以你不能使用由数字组成的字符串作为格式字符串中的字典键。

请注意，您的键不是数字的，也没有尝试将其用作列表索引。您的密钥是一个恰好包含数字字符的字符串。它试图做的是使用数字 1（不是字符串“1”）作为字典键。如果您使用数字 1 作为字典键（即，使您的 dict `{'key1': 'val1', 1: 'val2'}`），它将起作用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-04-07T14:14:27.897

我认为您正在寻找的是：

```
dictionary = {'key1': 'val1', '1': 'val2'}
string2 = 'Interpolating {key1}'.format(**dictionary)
print string2 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-21T02:45:55.727

你是对的 - 解析器并不复杂，并且无法处理字典的变量下标。您的解决方法是：

```
string2 = 'Interpolating {somevar}'.format(whateverhere..., somevar=dictionary['1']) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-10-24T17:30:24.490

如果您的字典键是字符串，则可能的解决方法是将字典转换为类：

```
class ClassFromDict:
    def __init__ (self, dct) :
        for key in dct.keys():
            self.__dict__[key] = dct[key]

dictionary = {'key1': 'val1', '1': 'val2'}
classfromdict = ClassFromDict(dictionary)

string1 = 'Interpolating {0.key1}'.format(classfromdict)
print string1
string2 = 'Interpolating {0.1}'.format(classfromdict)
print string2 
```

# sql-server-2005 - SQL 将计数加入查询

> ID：11130792
> 
> 赞同：-1
> 
> 时间：2012-06-21T02:30:27.677
> 
> 标签：sql-server-2005, join, count, group-by, distinct

我为我的电影创建了一个数据库，并为每部电影中的演员创建​​了另一个数据库

列是：

*   ID
*   演员
*   ImdbActorID
*   Imdb电影ID
*   特点

例子：

47105 | 霍华德·麦吉林 | nm0569294 | tt0111333 | 成人德里克王子
47106 | 米歇尔·尼卡斯特罗 | nm0629264 | tt0111333 | 成人公主
奥黛特 47108 | 约翰·克莱斯 | nm0000092 | tt0111333 | 让-鲍勃

当我的 web 应用程序查询特定电影时： **从 ImdbMovieID='tt0111333' 的演员中选择 ***

我得到那个清单。我的问题是我想添加一列我拥有的每个演员的电影总数。所以我不必以编程方式为每个演员运行查询

我想过用计数将同一张桌子加入到自己身上？？？但我不知道这是否会奏效。让我难过的是有 where 子句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T05:44:18.277

谢谢大家斯图尔特和亚伦。

从 Actors 中选择 ImdbActorID、Character、Actor、ImdbMovieID、cnt

**加入（选择 ImdbActorID 作为 Act2，count(*) as cnt from Actors group by ImdbActorID) as x on Actors.ImdbActorID=x.Act2** where ImdbMovieID='tt0111333'

按cnt desc订购

# rest - Tomcat、JAX-RS、Jersey、@PathParam：如何传递点和斜线？

> ID：11130793
> 
> 赞同：15
> 
> 时间：2012-06-21T02:30:40.930
> 
> 标签：rest, jersey, jax-rs, slash

有这样的方法：

```
@GET @Path("/name/{name}")
@Produces(MediaType.TEXT_PLAIN)
public String getProperty(@PathParam("name") String name) {
        System.out.println(name);
} 
```

如何传递“test./test”之类的值？

```
/name/test./test     gives HTTP 404
/name/test.%2Ftest   gives HTTP 400
/name/test.%252Ftest prints test%2Ftest 
```

但如果我这样做`name = URLDecoder.decode(name);`，它会打印出来`/test`，第一部分就会`test.`消失。

已经有一两个这样的问题了，但是它们很老，没有找到好的解决方案，我想我会再问一次。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-21T08:38:40.197

注释中的模式在`@Path`内部转换为正则表达式，默认情况下模板部分仅匹配选定的字符。特别是，它们通常*不*匹配`/`字符。这几乎总是正确的做法（因为它允许您将模板放在路径的一部分）但在这种情况下，它并不是因为您想要消耗*整个*后续路径。要获得所有内容，我们必须覆盖该特定模板的正则表达式片段；这实际上很简单，因为我们只是在模板片段 a`:`后面加上我们想要使用的 RE：

```
@GET @Produces(MediaType.TEXT_PLAIN)
@Path("/name/{name:.+}")
public String getProperty(@PathParam("name") String name) {
    return name;
} 
```

这将匹配`/name/`（最多但不包括任何`?`查询部分）之后的所有字符，但仅当那里有东西时才会匹配。请注意，如果您有任何其他`@Path("/name/...")`事情，事情会变得非常混乱！所以不要那样做。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-15T08:49:47.030

如果你使用 tomcat，并且想传入`/`pathparam。除了`@Path("/name/{name:.+}")`“Donal Fellows”所说的东西之外，您还应该添加`-Dorg.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH=true`到您的 jvm 参数中，另请参见[tomcat security-howto](http://tomcat.apache.org/tomcat-7.0-doc/security-howto.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T08:26:29.483

尝试指定编码类型，以下适用于我`/name/test.%252Ftest`：

```
System.out.println(URLDecoder.decode(name, "UTF-8"));
return URLDecoder.decode(name, "UTF-8"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-04T14:57:20.377

Glassfish v4 接受斜线 %2f 的编码景观。然后我们可以通过编码后的字符串 test.%2Ftest 并使用 URLDecoder.decode(name, "UTF-8") 得到结果 test./test。我认为这是一个更好的解决方案，尤其是当您在一个请求中有许多参数时。当请求中的参数很少时，使用路径 @Path("/name/{name:.+}") 是很好的解决方案。

使用 %252f 会使客户端请求复杂化，因为需要手动构造编码请求字符串。使用 glassfish v4，可以很容易地在客户端使用 URLEncoder.encode 和服务器中的 URLDecoder.decode 来使用百分比编码来希望的字符串。大多数编程语言都有百分比编码和解码，因此它是完美的解决方案。

我尝试在 glassfish v3 中启用编码斜线但没有成功，这是我尝试使用的 sintaxe

bin\asadmin 设置 configs.config.server-config.network-config.protocols.protocol.http-listener-1.http.encoded-slash-enabled=true configs.config.server-config.network-config.protocols.protocol .http-listener-1.http.encoded-slash-enabled=true

命令集执行成功。

问候卡西奥·塞弗林

# jquery - 交互式 div 大小

> ID：11130795
> 
> 赞同：-1
> 
> 时间：2012-06-21T02:30:51.807
> 
> 标签：jquery, animation, html, repeat

好的，这个问题有点奇怪，很难解释，所以我试一试这个想法似乎很容易

单击 div 上的任意位置，div 宽度从 450 到 1400px 隐藏页面上的其他两个 div 并添加一个 img 以单击以在右上角关闭它。完毕。

现在单击 img 和 div 调整大小为 450px 和其他 div 回来并关闭 img 隐藏。完毕。

我的问题是点击img后。它调整大小，然后返回到 1400px 并隐藏其他 2 个开始再次显示的 div。我不希望它回到 div 点击事件。

这是jQuery。

```
$(document).ready(function() {
 $(".close").hide();
 $("#leftdiv").click(function(){

  $("#leftdiv").animate({
   width: "1400px",
   height: "450px"
    },1000);
    $("#middlediv, #rightdiv").hide(500);
    $(".close").show(500);

$("#leftdiv").css({"-webkit-animation":"bounce 0s 0s"});

});

$("#leftdiv .close").click(function(){
    $("#leftdiv").stop().animate({
        width: "450px",
        height: "450px"
    },1000);
$(".close").hide();
       $("#middlediv, #rightdiv").show(500);
       });    
   }); 
```

我正在尝试学习 jquery 我之前只做过 html css 所以我想把我的大脑包裹在它周围很想知道如何做 Jquery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T02:41:19.463

您可能想要使用类似的东西，本质上是在不需要时添加和删除点击处理程序。

```
$("#leftdiv").on('click', leftDivClickHandler);

function leftDivClickHandler(event)
{
    $("#leftdiv").off('click', leftDivClickHandler);

    $("#leftdiv").animate({
        width: "1400px",
        height: "450px"
    },1000, function() {
        $("#leftdiv .close").on('click', closeDiv);
    });
    $("#middlediv, #rightdiv").hide(500);
    $(".close").show(500);

    $("#leftdiv").css({"-webkit-animation":"bounce 0s 0s"});

  });
  event.preventDefault();
}

function closeDiv(event) 
{
    $("#leftdiv .close").off('click', closeDiv);

    $("#leftdiv").stop().animate({
        width: "450px",
        height: "450px"
    },1000, function() {
         $("#leftdiv").on('click', leftDivClickHandler);
    });

    $(".close").hide();
    $("#middlediv, #rightdiv").show(500);

    event.preventDefault();
} 
```

# linux - x86 指令格式："ba 0e 00 00 00" ... "mov $0xe,%edx"

> ID：11130801
> 
> 赞同：5
> 
> 时间：2012-06-21T02:31:57.680
> 
> 标签：linux, assembly, x86

我从`objdump -d`x86 linux 程序的反汇编中得到以下行...

```
4000b0: ba 0e 00 00 00          mov $0xe,%edx 
```

我试图了解机器代码“ba 0e 00 00 00”如何映射到“mov $0xe,%edx”

在手动移动立即 32 位是：

```
B8 + rd  ... MOV r32, imm32 
```

即“B8”而不是“BA”

事实上，没有一个 MOV 操作码是“BA”。

如果有人可以分解“ba 0e 00 00 00”并逐位解释如何获得“mov $0xe,%edx”，那将是最有帮助的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-21T03:00:42.773

操作码 0xba 是“MOV EDX, imm32”。混乱来自 IA 手册在呈现指令编码时采取了太多捷径，即使对于像 0xba 这样的短单字节操作码也是如此。

在 IA 手册中，您会看到：

```
B8+ rd MOV r32, imm32 OI 有效 有效 将 imm32 移动到 r32。

```

这意味着取 0xb8 并添加特定 r32 的编码以获得最终的操作码字节。

具体的 r32 编码在第 2A 卷的表 2-2 中。

```
EAX 000 = 0
 ECX 001 = 1
 EDX 010 = 2
 EBX 011 = 3
 ESP 100 = 4
 EBP 101 = 5
 ESI 110 = 6
 EDI 111 = 7

```

英特尔参考资料第 2C 卷中的附录 A 在这些情况下也有帮助。本附录提供 1、2 和 3 字节指令的操作码映射。在您的情况下，在那里查找单字节操作码 0xBA 表示该指令是立即进入寄存器 rDX 的 MOV，其中宽度“r”取决于其他因素。

# google-app-engine - Google AppEngine 无法在生产模式下读取文件

> ID：11130811
> 
> 赞同：0
> 
> 时间：2012-06-21T02:33:37.700
> 
> 标签：google-app-engine

在本地开发模式下，我可以使用以下代码从我的 war/ 目录中的 ~7.4MB 文件读取到一个对象中（删除了所有的 try/catch 内容）

```
FileInputStream fis;            
fis = new FileInputStream("myObject.dat");              
ObjectInputStream ois;          
ois = new ObjectInputStream(fis);                   
myObject  = (ArrayList<ArrayList<ArrayList<float[]>>>) ois.readObject(); //-- ! prod mode gets stuck here! but dev mode is fine 
```

在本地开发模式下，它工作得很好，可以在几秒钟内读取对象。

当我部署到 AppEngine 时，读取文件时出现超时错误。它找到文件并开始读取，但无法及时完成。这是一些错误堆栈：

> java.lang.ExceptionInInitializerError ...
> 引起：com.google.apphosting.api.DeadlineExceededException：此请求 (...) 开始于 2012/06/21 02:19:57.368 UTC 并且仍在 2012/06/ 执行21 02:20:56.928 UTC。在 java.io.FileInputStream.read(Native Method) ...

当我将“myObject.dat”文件变小时，它可以在生产模式下工作，所以代码本身很好，只是 GAE 无法像我的本地模式那样快速读取较大的文件！GAE 服务器怎么会比我的小本地机器慢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:23:04.510

当您读取文件并以这种方式实例化对象时，您是否查看过开发环境中消耗了多少内存，并将其与您配置的前端实例类进行比较？

开发应用服务器不会尝试模拟各类前端的内存大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:45:56.867

Java 序列化（例如`ObjectInputStream`）不是存储对象的标准化方式：它不能保证跨不同的 JVM 实现甚至在同一 JVM 的不同版本之间工作。

使用其他一些更标准化的方式来存储对象数据：例如 JSON 和 XML。您可能还觉得[协议缓冲区](http://code.google.com/p/protobuf/)很有用。

# php - 尝试在 php 中上传图像并且在 move_uploaded_file() 函数中出现权限拒绝

> ID：11130814
> 
> 赞同：0
> 
> 时间：2012-06-21T02:33:56.813
> 
> 标签：php

当我尝试将文件保存到服务器上的文件夹中（来自临时文件夹）时，我的代码在 move_uploaded_file() 函数中出现权限被拒绝错误。

我的用户拥有所有网站目录和文件的完全权限。是否也有需要权限的 apache 用户？如何授予此 apache 用户权限？

如果不是这样。有没有办法可以使用 php chmod 函数来解决这个问题？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T02:46:06.507

你是对的。您需要将文件移动到的文件夹不需要*您*具有权限，它需要 Web 服务器具有权限。

基本上，您需要确定您的 Web 服务器正在运行的帐户，并授予该用户对目标目录的写入权限。

要弄清楚您的 Web 服务器帐户名称是什么，请尝试以下命令（假设您运行的是 Linux）：

```
sudo lsof -i tcp:80 
```

您应该返回一堆带有 USER 列的行。一个将是root，忽略那个。列出的另一个用户是运行 Web 服务器的用户。它可能类似于 www 或 www-data 或 apache 等。

之后，导航到上传目录的父目录，并使用以下命令更改其所有权和权限：

```
sudo chown www-data:www-data uploads
sudo chmod u+w uploads 
```

此时，您的网络服务器用户现在有权写入您的上传目录。如果您有任何问题，请发表评论，我会尽力提供帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-21T02:42:16.593

我假设您授予文件夹 777 权限？该文件夹需要这些权限。

# php - 在带有 LIKE 的 Where 子句中使用通配符 - 不返回任何结果

> ID：11130816
> 
> 赞同：-1
> 
> 时间：2012-06-21T02:34:06.097
> 
> 标签：php, sql, database, web, sql-like

编辑某些可接受的答案被删除:(问题的解决方案是使用这样的函数：

```
ifnull(trees.primarycolor, '') LIKE %, 
```

开始问题：您好互联网朋友，家人，同事和随机陌生人。我有一个肯定会让网站管理员兴奋的困境。

我的查询如下：

```
$result = mysql_query("SELECT trees.* 
$bottom_query 
FROM trees 
INNER JOIN price 
ON trees.ID=price.treeid  
where trees.primarycolor like 
 '$primary_color'  
and trees.secondarycolor like 
 '$secondary_color'  
and trees.fallcolor like 
 '$fall_color'  
and trees.droughtresistant like 
 '$drought_resistant'  
and trees.height like 
 '$height'  
and trees.spread like 
 '$spread'  
and trees.trunkcolor like 
 '$trunk_color'  
and trees.flowering like 
 '$flowering' 
and trees.fruitproducing like 
 '$fruit_producing'  
"); 
```

其中 $var_name 是一个字符串，例如 red 或 green 或 true 或 false 或通配符 %。

实际打印出来的查询如下：

```
SELECT trees.* , price.10mm , price.20mm FROM trees INNER JOIN price ON
trees.ID=price.treeid where trees.primarycolor like '%' and trees.secondarycolor like '%'
 and trees.fallcolor like '%' and trees.droughtresistant like '%' and trees.height like
 '%' and trees.spread like '%' and trees.trunkcolor like '%' and trees.flowering like '%'
 and trees.fruitproducing like '%' 
```

***我的问题是，即使 WHERE CLAUSE 中有所有通配符，查询也不返回任何结果。***

我正在使用 PHP 和 HTML - 不确定是什么版本，很可能是最新的。

我想使用 % 作为 * 来选择数据库中任何类型的所有内容。

请帮助我互联网的好人，荣耀将属于你：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T05:46:18.187

如果没有选择过滤器，则根本不要使用 WHERE 子句。这将在服务器上运行得更快，效率更高，这是您无论如何都想要的。使所有查询尽可能简单，以避免在不需要的地方加载。如果做出选择，仅在查询中添加 WHERE 子句。不要使用仍返回所有记录的 LIKE 子句。根据输入动态构建 WHERE 子句是可行的方法。更多的工作，但从长远来看会更好。

尼克 - [http://www.meltedjoystick.com](http://www.meltedjoystick.com)

# escaping - 如何从 Tcl 执行 POSIX shell 转义

> ID：11130818
> 
> 赞同：4
> 
> 时间：2012-06-21T02:34:30.007
> 
> 标签：escaping, tcl, filenames, sh

**有没有办法在 Tcl 中对字符串执行 POSIX shell 转义？**

*背景：*

我在 Tcl 列表中有一个任意文件名的列表。我需要扩展列表以粘贴到稍后将由任意 POSIX shell（bash、dash、posh 等）通过执行“sh -c”执行的 shell 片段中。

这是一个说明问题的示例：

```
#!/usr/bin/tclsh

set targets {with\ spaces has"stray'quotes has{brackets} $not_a_variable \[escaped_braces\] (not_a_subshell) weird\ \{|#^$(}

set shell_fragment {
  something
  some_command $targets
  something else
}

puts [subst $shell_fragment] 
```

上面的输出是带有 Tcl 转义的名称：

```
 something
  some_command with\ spaces has"stray'quotes has{brackets} $not_a_variable \[escaped_braces\] (not_a_subshell) weird\ \{|#^$(
  something else 
```

然而，我需要它看起来正常工作是这样的（POSIX shell 转义）：

```
 something
  some_command with\ spaces has\"stray\'quotes has{brackets} \$not_a_variable [escaped_braces] \(not_a_subshell\) weird\ {\|\#^\$\(
  something else 
```

*想法：*

以下是我可以想象的一些我不想做的解决方法：

*   在 Bash 中，printf 有 %q 格式化程序，可以满足我的要求。我可以为每个文件名执行一次 bash 调用以利用此功能，但这 1) 是一个很大的后盾，并且 2) 引入了对 bash 的依赖，这是我不希望这样做的。

*   根据 POSIX shell 转义规则实现自己的 shell 转义。这显然可行，但我宁愿不重新发明轮子。我发现了一种“简单”的方法，通过发送垃圾引号来做到这一点，但这会使调试变得很糟糕，并大大减少了可用的命令行长度：

“坏”方法的例子：

```
proc posix_escape_via_bash {name} {
  return [exec bash -c {printf %q "$0"} $name]
}

proc posix_escape_via_spamming_quotes {name} {
  set escaped {}
  foreach char [split $name {}] {
    switch $char {
      '       {lappend escaped {\'}}
      default {lappend escaped '$char'}
    }
  }
  return [join $escaped {}]
} 
```

再说一遍：**有没有办法在 Tcl 中对字符串执行 POSIX shell 转义？**如果有一个“标准”的方法，我会很高兴，但我也很高兴有一个非标准的 Tcl 库，甚至是从 C 中做到这一点的方法，所以我可以从 Tcl 调用它.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:22:12.880

这样做的关键是使用`string map`or `regsub`。

## 用于`string map`转换一组字符

您所要做的就是为您想要转义的内容提供正确的映射。

对于您的特定情况，您似乎想要引用的唯一字符是`'`, `"`, `$`, `(`, `)`, `<`,`>`和`|`. 让我们添加`;`, `*`（`?`我猜你不想要杂散的语句分隔符或通配符）。这很简单，但我们将迭代地生成映射，而不是使用文字：

```
set mappedChars {'"$()<>|&!;*?}    ;#'# Just to deal with SO's formatting...
set escaping {}
foreach c $mappedChars { lappend escaping $c "\\$c" } 
```

这是你只需要做一次的事情。完成后，应用地图很容易：

```
set escapedTargets [string map $escaping $targets] 
```

我将留给您找出将其与您对`subst`.

## 用于`regsub`转换一组字符

另一种方法是`regsub`与`-all`选项一起使用。只有在所有替代情况下都进行完全相同类型的转义时，这才真正有效。

```
# This puts a backslash in front of all non-alphanumerics
set escapedTargets [regsub -all {[^[:alnum:]]} $targets {\\&}] 
```

```
# This _particular_ case has an almost-equivalent-good-enough that's shorter
set escapedTargets [regsub -all {\W} $targets {\\&}] 
```

复杂之处在于为所有问题案例确定正确的表征正则表达式，这就是为什么经常说使用正则表达式将一个问题变成两个问题......</p>

* * *

## 讨论/替代方法

上面的映射没有涵盖所有的 POSIX shell 元字符——特别是，它不处理反斜杠本身或空格（这样做会导致你的问题，因为你似乎想要获得多个单词）并且它还应该处理这些：`{}[]~`- 和正则表达式可能有点*过于*敏锐，将反斜杠放在完全无辜的东西前面。实际上，某些用途（例如，变量名）比上述任何一种方法都需要更多的注意，因为它们有一些根本无法使用的东西。

根本问题是shell实际上有一个非常复杂的语法，有很多交互规则。如果您可以编写代码以便不需要运行 shell，那么您可能会发现事情要可靠得多（以 Tcl`exec`和管道`open`有它们自己的奇怪问题的事实为模，这些问题源于尝试过多地像 shell 一样）。这是否适合您取决于您​​在问题中没有告诉我们的其他事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-15T17:58:56.740

您可以`'`将所有非`'`字符-quote*一起*而不是单独引用，并且您只需要结束和恢复`'`-quoting 中间字符串即可 -`\`转义任何`'`字符。

所以你在`'`-quote spamming 上走在了正确的轨道上，因为你已经意识到

1.  单引号转义了*所有内容*（除了`'`），这将特殊情况减少到只有一个，并且
2.  您可以在 shell 中连接带引号的字符串，并将它们解释为一个字符串（`'a''b'`解析为与 相同的原始字符串`'ab'`）。

最后一个缺失的部分是第二点让我们优化了几乎所有的结尾并立即恢复`'`-quoting，这在`'`单独引用每个字符时发生。

所以你需要的逻辑只是

1.  全部替换`'`为`'\''`, 和
2.  `'`在开头和结尾放一个：

```
proc posix_escape_via_minimal_quotes {name} {
  set escaped {}
  lappend escaped '
  lappend escaped [string map {' '\\''} $name]
  lappend escaped '
  return [join $escaped {}]
} 
```

示例输出：

```
% posix_escape_via_minimal_quotes x
'x'
% posix_escape_via_minimal_quotes xxx
'xxx'
% posix_escape_via_minimal_quotes xxx'xxx
'xxx'\''xxx'
% posix_escape_via_minimal_quotes '
''\''' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T04:26:27.060

我最终做了我提到的“引用垃圾邮件”方法的变体，但是特殊的各种类型的字符要么永远不需要引用，要么可以用简单的反斜杠引用。这仍然有点过于急切，但比最初的幼稚方法要好得多。在大多数情况下，这给出了与 bash printf 方法相同的结果。

```
 proc posix_escape {name} {
    foreach char [split $name {}] {
      switch -regexp $char {
        {'}           {append escaped \\'     }
        {[[:alnum:]]} {append escaped $char   }
        {[[:space:]]} {append escaped \\$char }
        {[[:punct:]]} {append escaped \\$char }
        default       {append escaped '$char' }
      }
    }
    return $escaped
  } 
```

如果有更标准的方法可以做到这一点，我仍然非常感兴趣。如果以前没有人遇到过这种情况，我会感到非常惊讶！=)

# jquery - jquery.click() 上没有响应

> ID：11130825
> 
> 赞同：0
> 
> 时间：2012-06-21T02:35:34.753
> 
> 标签：jquery, html

我可以知道为什么当我单击按钮时`alert('clicked')`没有出现以下内容吗？

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

    <head>
        <title></title>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script src="Base64.js" type="text/javascript"></script>
        <script type="text/javascript">
            $("#Button1").click(function () {
                alert('clicked');
            });
        </script>
    </head>

    <body>
        <form name="input" action="">Username:
            <input type="text" id="username" value="" />
            <br />Password:
            <input type="text" id="password" value="" />
            <br />
            <input type="button" id="Button1" value="Submit" />
            <div>Login Test 1.htm</div>
        </form>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T02:39:33.847

当脚本执行时，按钮在 DOM 中还不存在。等到 DOM 准备好`jQuery.ready`：

```
$(document).ready(function() {
    $("#Button1").click(function(){alert('clicked');});
}); 
```

或者，您可以在添加按钮后在某处运行脚本：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

    <head>
        <title></title>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script src="Base64.js" type="text/javascript"></script>
    </head>

    <body>
        <form name="input" action="">Username:
            <input type="text" id="username" value="" />
            <br />Password:
            <input type="text" id="password" value="" />
            <br />
            <input type="button" id="Button1" value="Submit" />
            <div>Login Test 1.htm</div>
        </form>
        <script type="text/javascript">
            $("#Button1").click(function () {
                alert('clicked');
            });
        </script>
    </body>

</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T02:41:34.093

尝试这个 ，

```
$(document).ready(function () {
    $("#Button1").click(function(){
        alert('clicked');
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T02:40:59.573

你应该用 jQuery 语句包围`$(function() { ... });`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T02:39:45.093

**工作演示** [http://jsfiddle.net/69v27/4/](http://jsfiddle.net/69v27/4/)

请尝试在您的代码中采购 Jquery，如下所示：

```
<script type='text/javascript' src='http://code.jquery.com/jquery-1.7.1.js'></script> 
```

**代码**

```
$(document).ready(function() {

    $("#Button1").click(function() {
        alert('clicked');
    });

});​ 
```

# c - 主线程调用pthread_exit后，变成了zombie。有什么问题吗？

> ID：11130828
> 
> 赞同：0
> 
> 时间：2012-06-21T02:35:42.740
> 
> 标签：c, linux, pthreads, proc

我想使用 /proc/[pid]/task/.but 枚举特定进程的线程，但在 proc 手册页中，它说：

> 在多线程进程中，如果主线程已经终止（通常通过调用 pthread_exit(3)），则 /proc/[pid]/task 目录的内容不可用。

然后我写了一些代码，

```
#include <pthread.h>
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>

void* PrintHello(void* data){
  pthread_t tid = (pthread_t)data;
  int rc;

  rc = pthread_join(tid, NULL);
  if(rc){
    exit(1);
  } else{
    printf("Hello from new thread %d - got %d\n", pthread_self(), data);
    sleep(180);
    pthread_exit(NULL);
  }
}

int main(int argc, char* argv[]){
  int rc;
  pthread_t thread_id;
  thread_t tid;

  tid = pthread_self();
  printf("\nmain thread(%d) ", tid); 

  rc = pthread_create(&thread_id, NULL, PrintHello, (void*)tid);
  if(rc){
    printf("\n ERROR: return code from pthread_create is %d \n", rc);
    exit(1);
  }
  sleep(1);
  printf("\n Created new thread (%d) ... \n", thread_id);
  pthread_exit(NULL);
} 
```

在主线程调用 pthread_exit() 之后，它变成了僵尸。并且 /proc/[pid]/task 目录仍然存在，但 /proc/[pid]/maps 为空。

```
$ ./a.out & 
 main thread(164759360) 
 Created new thread (164755200) ... 
Hello from new thread 164755200 - got 164759360

$ ps auwx |  grep a.out
spyder    5408  0.0  0.0      0     0 pts/0    Zl+  10:27   0:00 [a.out] <defunct>
spyder    5412  0.0  0.0 109400   896 pts/1    S+   10:27   0:00 grep --color=auto a.out

$ ls /proc/5408/task/
5408  5409
$ cat /proc/5408/maps 
$ cat /proc/5408/status
Name:   a.out
State:  Z (zombie)
Tgid:   5408
Pid:    5408
....
$ cat /proc/5409/maps 
00400000-00401000 r-xp 00000000 fd:02 2752690                            /home/spyder/a.out
00600000-00601000 rw-p 00000000 fd:02 2752690                            /home/spyder/a.out
018cb000-018ec000 rw-p 00000000 00:00 0                                  [heap]
3dcf000000-3dcf020000 r-xp 00000000 fd:01 139203                         /usr/lib64/ld-2.15.so
3dcf21f000-3dcf220000 r--p 0001f000 fd:01 139203                         /usr/lib64/ld-2.15.so
.... 
```

有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T03:37:00.527

你把这一切都搞反了。您在函数上执行的`PrintHello`函数正在加入`main()`线程，而它应该是相反的：

在您的`main()`线程/函数中，您应该调用：

```
(void)pthread_join(thread_id, NULL); 
```

简而言之，`pthread_join()`意思是“在我做任何其他事情之前，等到带有和标识'thread_id'的线程完成”。您的代码基本上是在说：

1.  启动 main() 程序逻辑
2.  创建一个线程，做一些 printf() 和 sleep() 的事情，然后退出整个程序
3.  同时，您创建了一个在 main() 终止之前不会执行任何操作的线程
4.  当 main() 终止时，它无论如何都会处理所有内容，因此`PrintHello()`线程没有机会优雅地关闭，因为 join() 调用可能会失败

您可能打算这样做（请注意额外的评论）：

```
#include <pthread.h>
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>

void* PrintHello(void* data){
  pthread_t tid = (pthread_t)data;

  //pthread_join(tid, NULL);  //WRONG
  printf("Hello from new thread %d - I was launched by thread number: %d\n", pthread_self(), data);
  sleep(180); //Sleep for 3 minutes, for no reason really
  pthread_exit(NULL); //All done in this thread
}

int main(int argc, char* argv[]){
  int rc;
  pthread_t thread_id;
  long int tid;

  tid = pthread_self();

  rc = pthread_create(&thread_id, NULL, PrintHello, (void*)tid);
  if(rc) {
    printf("\n ERROR: return code from pthread_create is %d; Thread probably didn't get created\n", rc);
    exit(1);
  }
  sleep(1); //Sleep, for no reason
  printf("\n Created new thread (%d) ... Now let's wait for it to finish\n", thread_id);
  pthread_join(thread_id, NULL); //Wait for the child thread to finish it's work
  return 0; //All done!
} 
```

如果我的假设是正确的，请指出是这种情况，我可以做一些进一步的更正。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-16T09:59:46.573

根据我对 pthreads 库如何工作的理解，我认为僵尸线程的原因是与主线程*正常*连接会丢弃其资源，并且由于主线程返回一个状态（通过主函数的返回）可能并且在某些情况下预计会被父进程消耗（即通过使用等待），直到线程组完全退出（即整个进程已退出），该线程才能被完全销毁。如果它被允许以某种方式将 pthread_exit 调用的值返回给父进程，那么父进程会认为子进程已经退出，这是不正确的，因为*PrintHello*函数将仍在运行。

# eclipse - 如何调试内置的 Maven 插件？

> ID：11130830
> 
> 赞同：3
> 
> 时间：2012-06-21T02:36:14.577
> 
> 标签：eclipse, maven, maven-assembly-plugin, m2e

运行 maven-assembly-plugin 时出现 NullPointerException。它似乎是由我的程序集的特定部分引起的。如何对此插件进行源代码级调试，以便缩小问题范围？

我正在使用 Eclipse 和 M2E。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T04:25:44.773

首先，您可以使用`-X`选项运行 maven。这会提供很多`debug`信息。如果这还不够，您可以使用`mvnDebug`. [本页](http://docs.codehaus.org/display/MAVENUSER/Dealing+with+Eclipse-based+IDE)详细介绍了如何使用 Eclipse 执行此操作。

# python - 获取 scipy/numpy 中存在复杂条件的所有行

> ID：11130831
> 
> 赞同：0
> 
> 时间：2012-06-21T02:36:19.940
> 
> 标签：python, numpy, scipy

`ndarray`获取表示二维矩阵的复杂条件成立的所有行的最简单方法是什么？例如，获取所有值都高于 5 或​​所有值低于 5 的所有行？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T03:01:48.763

您可能知道布尔数组可用于索引，例如：

```
import numpy as np
x = np.arange(10)
x2 = x[x<5] 
```

对于布尔数组，`np.all`让您将其应用于给定轴：

```
y = np.arange(12).reshape(3,4)

b = y < 6
b1 = np.all(b, axis=0)
b2 = np.all(b, axis=1)

y1 = y[b1]
y2 = y[b2] 
```

它只返回符合条件的数组，因此不保留形状。（如果您确实需要保留形状，请查看掩码数组。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T13:58:49.583

这将为您提供所有值低于或高于 5 的行的行索引：

```
x = numpy.arange(100).reshape(20,5)
numpy.where((x > 5).all(axis=1) ^ (x < 5).all(axis=1)) 
```

或更简洁（但不是通过相同的逻辑进行）：

```
numpy.where(((x > 5) ^ (x < 5)).all(axis=1)) 
```

要获取数据而不是索引，请直接使用布尔结果：

```
x[((x > 5) ^ (x < 5)).all(axis=1)] 
```

# templates - i18n 编译模板？

> ID：11130839
> 
> 赞同：0
> 
> 时间：2012-06-21T02:38:18.993
> 
> 标签：templates, node.js, internationalization, hogan.js, socketstream

我有使用 socketstream 和 Hogan.js 在生产版本上编译的模板。问题是当我在客户端并获取模板时，我需要将它绑定到具有一组键值对的 JSON 语言文件。文件具有 de.json 等命名结构，内容如下： { "thanks": "danke" }

如果在服务器上我知道用户选择了哪种语言，我如何将正确的语言 json 文件传递​​给客户端以便为用户呈现正确的视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:43:23.083

你没有会话变量中的语言吗？它可以让您轻松知道要渲染的内容。

```
res.render( user.language + '.json' ); 
```

# excel - Excel 无法使用 IIS7&Windows Server 2008 R2 (64bit) 访问文件

> ID：11130840
> 
> 赞同：4
> 
> 时间：2012-06-21T02:38:19.167
> 
> 标签：excel, iis-7, permissions, windows-server-2008, identity

我有一个需要访问 Excel 文件的 Web 项目 (.NET 4)，但最终出现以下错误消息：

```
Error occurred during file generation.Microsoft Excel cannot access the file 'D:\xx\xx\abc.xls'. 
There are several possible reasons: 
• The file name or path does not exist. (Actually it is there)
• The file is being used by another program. (It can not happen) 
• The workbook you are trying to save has the same name as a currently open workbook. 
```

在 IIS7 中，我使用 DefaultAppPool 和管理员组下的身份“myservice”。

在我的网站在 IIS 下的身份验证页面中，启用了匿名身份验证并将其设置为“应用程序池标识”，并且禁用了 ASP.NET 模拟。

在搜索了几个小时的解决方案后，我发现了以下内容，但*它们*都不起作用

1.  在 C:\Windows\SysWOW64\config\systemprofile\Desktop 中创建文件夹。请参考：[这个](http://social.msdn.microsoft.com/Forums/en-US/innovateonoffice/thread/b81a3c4e-62db-488b-af06-44421818ef91?prof=required)
2.  在组件服务中授予“myservice”的权限。请参考：[这个](http://blog.crowe.co.nz/archive/2006/03/02/589.aspx)

奇怪的是，IIS_IUSRS 组中没有任何内容。这正常吗？我记得至少有两个用户（DefaultAppPool 和 Classic .NET AppPool）。

我认为这是IIS的权限问题，但我无法解决。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T07:05:17.713

问题解决了！！！！！！！！！！我的 Excel 是 2010 ，应该在 C:\Windows\System32\config\systemprofile 中创建“桌面”文件夹

# ios - 有没有一种简单的方法可以在 iOS 中重新定位视图而无需手动更改原点/大小/中心？

> ID：11130853
> 
> 赞同：0
> 
> 时间：2012-06-21T02:40:30.393
> 
> 标签：ios, uiview

我发现自己经常不得不在隐藏或显示其中一个视图后重新定位视图的子视图。我这样做的方式是通过编程更改视图框架的原点和/或大小或其中心。但是我错过了更简单的方法吗？有没有办法用自动调整蒙版来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T05:56:35.077

我认为没有任何自动的方法可以做到这一点。您可能会对如何以编程方式执行此操作变得聪明（例如，如果您使用一组顺序标签标识符，您可以循环并计算先前可见标签的高度以计算下一个子视图的原点；或者如果有一组总是一起移动的子视图，您可以将它们放在一个容器中`UIView`，从而通过移动它们的容器视图来移动一大堆它们；等等......这取决于它们的布局方式和哪些字段可能被隐藏）。

这暂时对您没有帮助，但请查看[WWDC 2012 session 202](https://developer.apple.com/videos/wwdc/2012/?id=202)以讨论 iOS 6 中的相关改进。

# backbone.js - 从主干项目将条目保存到数据库关系（多对多）表

> ID：11130856
> 
> 赞同：1
> 
> 时间：2012-06-21T02:40:50.053
> 
> 标签：backbone.js, relationship, backbone-relational

我目前有两个 Backbone 模型：用户和项目。我想要一个 Backbone 视图，其中包含一个可以创建新项目的表单，以及当前现有用户（数据库用户表中的条目）与该项目的关联。当用户完成此表单并单击保存按钮时，应将新项目保存到数据库中（在项目表中），并将保存的项目与相关用户之间的关系保存到关系表中（projects_users 表，包含每个关系对应的项目 ID 和用户 ID）。目前，我可以保存项目信息，但无法使用 Backbone-relational 将任何数据放入 projects_users 表中。

您认为实现上述功能的最佳方法是什么？如果您能指出我可以用作模板的特定代码，那就太好了。

谢谢你，亚历山德拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T03:10:14.443

经过一段令人沮丧的试错期后，我终于设法让我的代码工作了！它不漂亮，但它很实用，现在我可以开始考虑改进它了。希望其他人会发现此信息有用...

让我走上正轨的一件事是了解需要更改的不仅是主干视图代码（具有新项目形式的代码），还包括相应的 Rails 模型。

对于 rails 部分（Rails 3.2.2），我确保以下模型文件具有必要的信息：

**项目.rb**

```
class Project < ActiveRecord::Base
  has_and_belongs_to_many :users

  #attr_accessible :name, :description, :users_attributes
  #has_many :projects_users, foreign_key: "project_id", dependent: :destroy
  #has_many :users, through :projects_users
  #accepts_nested_attributes_for :users
end 
```

**用户.rb**

```
class User < ActiveRecord::Base
  has_and_belongs_to_many :projects
end 
```

**项目_用户.rb**

```
class ProjectsUsers < ActiveRecord::Base
    belongs_to :project
    belongs_to :user
end 
```

我在许多不同的地方读到 has_and_belongs_to_many 并不是在 Rails 中设置多对多关系的最佳方式。尽管如此，我无法使用 has_many 定义获得相同的功能 - project.rb 中的注释部分是我尝试这种不同方法的方式。文件 user.rb 有一些相应的代码，为简单起见，我将其删除。

现在，我需要在主干表单视图中完成的是发送一个带有 Rails projects_controller.rb 可以识别的 JSON 对象的 POST 请求。最初，我尝试了几个 POST 请求但没有成功（并且没有错误来指导我）。但是后来，我记得以前为团队实现了一个表单，可以将用户添加到特定团队中（HABTM Checkboxes - 此功能有[一个 railscast](http://railscasts.com/episodes/17-habtm-checkboxes)）。看了这个例子之后，我意识到我的 POST 请求需要什么。这是我想在 rails 服务器日志文件中看到的内容：

```
Started POST "/projects" for 127.0.0.1 at 2012-06-27 00:35:22 +0000
Processing by ProjectsController#create as JSON
  Parameters: {"project"=>{"description"=>"with some description", "user_ids"=>["101", "1", "99"], "name"=>"some new project"}} 
```

实现上述要求的Backbone相关文件：

**项目.js**

```
App.Models.Project = Backbone.Model.extend({
  urlRoot: '/projects',

  // Default attributes for the project.
  defaults: {
    description: "",
    user_ids: []
  },

  /* getters */      
}); 
```

**用户.js**

```
App.Models.User = Backbone.Model.extend({
  /* getters */
}); 
```

**表单.js**

```
App.Views.Projects.Common.Form = Backbone.View.extend({
  ...
  events: {
    "submit #new_project_form"   : "formSubmit"
  },

  formSubmit: function(event) {
    this.submitted($(event.target));
    return false;
  },

  submitted: function(formElement) {
    var newData = this.serializeFormData(formElement);
    this.model = new App.Models.Project({
      name        : newData.name,
      description : newData.description
    });

    this.saveFormData(newData);
    return false;
  },

  serializeFormData: function(formElement) {
    var fields = formElement.serializeArray();

    var serializedData = {};
    $.each(fields, function(index, field) {
      serializedData[field.name] = field.value;
    });

    return serializedData;
  },

  // THE IMPORTANT PART FOR THE POST REQUEST
  saveFormData: function(newData) {

    // preserve reference to view for callbacks
    var self = this;
    var project = this.model;

    project.set({
      // a list of user ids associated with a project
      "user_ids" :  this.view_variables.user_ids
    });

    var project_object = ({
      "project" :   _.clone(project.attributes)
    });

    $.ajax({
      type: 'POST',
      url: '/projects',
      data: project_object,
      dataType: "json",
      success: function() {
        self.$el.hide();
        self.addNewModelToCollection();
      }
    });

  },
  ...
}); 
```

该代码有点冗长，并且包含一些特定于我的项目的代码。不过，相关部分在 saveFormData 函数中，其中使用了 jQuery ajax 函数。

如果您对导轨或 Backbone 部分有任何建议，请告诉我。我很乐意学习如何改进这个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-20T07:47:03.427

我知道这是旧帖子，但这看起来很有趣：[http ://backbonerelational.org/](http://backbonerelational.org/)

# java - 如何编写 iquote 的重载版本

> ID：11130864
> 
> 赞同：0
> 
> 时间：2012-06-21T02:42:18.400
> 
> 标签：java, methods

我的任务是编写 的重载版本`iquote()`，该方法显示其参数的类型和用双引号括起来的参数。我被要求写三个版本：一个用于`int`论证，一个用于`double`论证，一个用于`String`论证。我不需要提供应用程序部分。

这是我到目前为止所拥有的，它会编译但是会收到一条错误消息：`Could not find or load main class assign61`

有人可以帮我这个代码...

```
public class assign61 {
     public void iquote(String s){
        return sQuote;
        System.out.println( "sQuote\" );" 
    }
    public void iquote(int n){
        return iQuote;
        System.out.println( "sQuote\" );" 
    }       
    public void iquote(double d){
        return iQuote;
        System.out.println( "sQuote\" );"          
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T02:56:40.543

您的代码无法正确编译，因为其中存在错误。因此，如果它不能编译，它就不能运行。

您需要进行一些更改...

```
public class assign61 {

    public assign61(){
        iquote("Test");
        iquote("123");
        iquote("5.678");
        }

    public void iquote(String s){
        System.out.println("sQuote:" + s);
    }
    public void iquote(int n){
        System.out.println("iQuote:" + n);
    }       
    public void iquote(double d){
        System.out.println("dQuote:" + d);       
    }

    public static void main(String[] args){
        new assign61();
    }

} 
```

基本上这是需要改变的......

1.  您要输出该值，因此将其`System.out.println()`通过`+`符号添加到行尾。
2.  您的方法中有`return`语句，但它们不是您想要使用的。`return`用于将值返回给调用该方法的代码 - 它们不是用于将值输出到命令提示符。
3.  由于您的`return`语句，它们也会阻止您的代码编译，因为您将它们写在*语句之前*`System.out.println()`而不是*之后*。`return`在代码中后面不能写任何东西。此外，要使用`return`语句，您需要将方法更改为使用语句`public int iQuote(int n)`而不是使用`void`语句，因此它知道您将从方法返回的数据类型
4.  我添加了一个构造方法`assign61`，其中包含一些测试代码，以表明您的其他方法可以正常工作。我还添加了该`main`方法，以便您可以运行您的代码。

I hope this helps you to understand a little more. Try making some of the changes suggested above, then compile your code. Once it compiles correctly, you will be able to run it. Then you can come back to us with any further problems.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T02:53:32.200

```
Could not find or load main class assign61 
```

我认为最可能的原因可能是您没有将文件命名为 assign61.java （顺便说一句，您应该按照惯例将类名大写。）

同样在这个时候，要运行你的类，至少你应该有一个 main 方法。java的一个方便的方法是在这个类中创建一个main方法。

# android - 开发多客户端一服务器应用程序 Android

> ID：11130865
> 
> 赞同：0
> 
> 时间：2012-06-21T02:42:19.693
> 
> 标签：android, tcp

我想开发一个应用程序，它与许多客户端或 Android 设备连接到一个 Android 设备作为具有 TCP 连接的服务器。服务器从客户端接收信息（名称、IP 地址、设备名称）并将其保存到数据库中。

保存信息后，服务器将向客户端发送消息并向客户端显示保存在数据库中的列表（名称、IP 地址、设备名称）。

我是套接字编程的新手，我想实现也适用于 Android 的 KyroNet 库。谁能帮我提供一个示例代码来开始这个项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T04:15:05.700

我不熟悉 KyroNet 库，但您应该查看 Android 提供的 BluetoothChat 示例应用程序。蓝牙套接字与普通套接字几乎相同，因此在代码方面应该几乎相同。该应用程序还展示了如何为连接实现处理程序和线程。

# php - 从 SMTP 发送大量电子邮件

> ID：11130869
> 
> 赞同：-3
> 
> 时间：2012-06-21T02:42:50.360
> 
> 标签：php, smtp, sendmail

我有一个问题。我有一种情况，我需要使用 SMTP 每个请求发送大约 3000 封电子邮件。然而，只有 30-40 人到达目的地。

你知道什么可能是一个问题以及如何解决它。作为服务器端脚本，我使用的是 PHP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:26:37.737

大型电子邮件服务提供商（Constant Contact、WhatCounts 等）如何处理大量电子邮件是将“活动”放入队列中并在稍后发送。他们拥有专用的高性能交付软件，用于在队列中查找要发送的新活动，然后以每分钟超过 50,000 条消息的速度将它们发送出去。您在 PHP 中所做的任何事情都无法与之相比。

如果您尝试从本地计算机发送，那将无法正常工作。DNSRBL 查找会将您的计算机识别为在“DUN”（拨号网络）上，并将阻止该消息。大多数 PHP 脚本在 Web 服务器环境中也有 30 秒的超时时间，但通过 cron 运行 PHP 脚本可以根据需要运行。

您也不应该从您的主电子邮件服务器发送大量电子邮件。这是进入全球黑名单的一种很好、快速的方法，这样您就无法向普通主机（例如 Hotmail、GMail 等）发送常规电子邮件。大型电子邮件服务提供商都有专门的员工，他们的工作是将自己从全球黑名单中删除。那是一份全职工作。你最好为服务付费（如果你走这条路，别忘了正确设置 SPF 记录）。

除了警告和建议之外，要回答这个问题，请为您的 PHP 脚本使用 cron 作业并将要发送的电子邮件放入队列中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T03:49:58.853

如果您希望收件箱尽可能多的电子邮件并且您没有发送垃圾邮件，并且更喜欢使用自己的 smtp，[请查看它们](http://sendgrid.com/pricing.html)。

# php - 在自定义字段 wordpress 中存储 php 值

> ID：11130870
> 
> 赞同：2
> 
> 时间：2012-06-21T02:42:51.677
> 
> 标签：php, wordpress, custom-fields

我正在为 wordpress 使用下载监视器插件。

我想将文件的命中数存储在自定义字段中。

例如 ：

我正在使用此代码获取使用下载监视器插件上传的文件的点击次数

```
<?php echo do_shortcode('[download id='. get_post_meta($post->ID, 'did', $single = true) .' format=5]'); ?> 
```

以上代码只能在模板文件如single.php等文件中使用。

在上面的代码中，我在自定义字段中的变量 $did 中获取下载文件 ID。

但现在我想使用自定义字段将下载次数存储在数据库中。

我希望它以两种方式工作：

1.  关联两个自定义字段。

一旦用户在一个自定义字段中插入下载 ID $did，下一个自定义字段必须在其中存储该下载 ID 的下载次数。

1.  在自定义字段中执行 php。

如果用户在自定义字段中插入 php 代码，当我单击发布帖子时，必须执行 php 代码并且值必须存储在自定义字段中。

请指导我。

问候， 里亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T18:26:46.537

您可以使用发布元值来执行此操作。

每次用户下载文件时，尝试调用[update_post_meta()设置自定义值。](http://codex.wordpress.org/Function_Reference/update_post_meta)

# iphone - 声音输出含义

> ID：11130872
> 
> 赞同：2
> 
> 时间：2012-06-21T02:43:05.477
> 
> 标签：iphone, ios, xcode

所以我`UIButton`在按下时添加了一个声音（.wav），但它在调试器中输出了这个，任何人都可以解释或帮助我这是什么：

```
2012-06-21 10:29:51.784 PhotoSlot[817:1dc0b] The default input device's sample rate was changed.
2012-06-21 10:29:51.786 PhotoSlot[817:21a2b] Audio device's sample rate changed. You may need to restart the simulator.
2012-06-21 10:29:51.786 PhotoSlot[817:1dd0f] Default audio device changed. Restart the simulator to have it use the newly-selected device. 
```

这是我的声音代码：

```
NSString* resourcePath = [[NSBundle mainBundle] resourcePath];
resourcePath = [resourcePath stringByAppendingString:@"/push.wav"];
    //Initialize our player pointing to the path to our resource
player = [[AVAudioPlayer alloc] initWithContentsOfURL:
          [NSURL fileURLWithPath:resourcePath] error:NULL];
//set our delegate and begin playback
player.delegate = self;
[player play]; 
```

谢谢你。

> 2012-06-21 11:24:09.702 PhotoSlot[1578:1a303] 加载/System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn: dlopen(/System/Library/) 时出错Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn，262）：找不到符号：__ *CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security
> 预期在：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 在/System/Library/Frameworks/Security .framework/Versions/A/Security 2012-06-21 11:24:09.711 PhotoSlot[1578:1a303] 加载错误 /System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn ：dlopen（/System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn，262）：找不到符号：_* _CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework /版本/A/安全
> 预期在：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 在/System/Library/Frameworks/Security .framework/Versions/A/Security 2012-06-21 11:24:09.996 PhotoSlot[1578:1a303] 加载错误 /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn ：dlopen（/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn，262）：找不到符号：__ *CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework /版本/A/安全
> 预期在：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 在/System/Library/Frameworks/Security .framework/Versions/A/Security 2012-06-21 11:24:10.006 PhotoSlot[1578:1a303] 加载错误 /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn ：dlopen（/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn，262）：找不到符号：_* _CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework /版本/A/安全
> 预期在：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 在/System/Library/Frameworks/Security .framework/Versions/A/Security 2012-06-21 11:24:10.024 PhotoSlot[1578:1a303] 加载错误 /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn ：dlopen（/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn，262）：找不到符号：__ *CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework /版本/A/安全
> 预期在：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 在/System/Library/Frameworks/Security .framework/Versions/A/Security 2012-06-21 11:24:10.033 PhotoSlot[1578:1a303] 加载/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn 时出错：dlopen（/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn，262）：找不到符号：_* _CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework /版本/A/安全
> 预期在：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 在/System/Library/Frameworks/Security .framework/Versions/A/Security 2012-06-21 11:24:10.053 PhotoSlot[1578:1a303] 加载错误 /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn ：dlopen（/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn，262）：找不到符号：__ *CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework /版本/A/安全
> 预期在：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 在/System/Library/Frameworks/Security .framework/Versions/A/Security 2012-06-21 11:24:10.071 PhotoSlot[1578:1a303] 加载错误/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn ：dlopen（/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn，262）：找不到符号：_* _CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework /版本/A/安全
> 预期在：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T03:32:08.213

啊，发布错误可以帮助我。 [我发现这个密切相关的问题](https://stackoverflow.com/questions/7961840/what-does-this-gdb-output-mean)也与您所看到的具有相同的输出。

但是我认为您应该做的真正解决方案（假设您使用的是 ARC）[可以在另一个答案中找到](https://stackoverflow.com/a/7744831/981049)：您需要在`AVAudioPlayer`播放声音时为您的 " " 实例保留一个强有力的参考。使您的播放器成为“ `strong`” ivar（实例变量），在播放新声音之前，设置“ `self.player = nil;`”，这应该可以解决您的问题。

另外，关闭模拟器调试器中的所有断点，看看你是否有更好的运气。

# svn - 结帐特定版本的分支

> ID：11130874
> 
> 赞同：2
> 
> 时间：2012-06-21T02:43:21.987
> 
> 标签：svn

我以为我对 Subversion 非常熟悉，但现在我认为微不足道的事情让我感到难过。

首先，我从特定版本的主干上创建了一个分支，如下所示：

```
# svn copy http://server/project/trunk@13708 http://server/project/branches/b2012_03
Committed revision 13717 
```

这似乎很高兴。请注意，我的主干有额外的提交，因此 13717 提交的修订版和我需要分支出特定版本。无论如何它在那里。

接下来，我想从分支结帐，但恰好在 13708（创建它的位置）而不是 13717 ......这对我的构建过程很重要，不要问它与问题无关。

首先，我尝试了这个（使用子目录'conf'作为测试）：

```
# svn co http://server/project/branches/b2012_03/conf conf
yada yada ...
Checked out revision 13717.

# cd conf
# svn info
Path: .
Working Copy Root Path: C:\Users\Brett\conf
URL: http://server/project/branches/b2012_03/conf
Repository Root: http://server/project
Repository UUID: f3edbe5d-cdcd-4b35-8400-34e3054bdd74
Revision: 13717
... 
```

这不是我需要的，我需要在 13708 进行修订...清除“conf”并尝试以下操作：

```
# svn -r 13708 co http://server/project/branches/b2012_03/conf conf
yada yada ...
Checked out revision 13708. 
```

嘿，这看起来令人鼓舞，直到...

```
# cd conf
# svn info
Path: .
Working Copy Root Path: C:\Users\Brett\conf
URL: http://server/project/trunk/conf
Repository Root: http://server/project
Repository UUID: f3edbe5d-cdcd-4b35-8400-34e3054bdd74
Revision: 13708 
```

修订是正确的，但请注意 URL。尽管从分支签出，但它说“主干”而不是分支。

两个问题：

这怎么可能？如何从分支签出特定版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T02:47:46.090

您的分支在 不存在`r13708`。因此，您没有任何东西*可以*检查。

您的构建系统的任何部分都取决于此行为，可能需要修复。

# java - 如何模拟 Springockito 模拟的行为？

> ID：11130878
> 
> 赞同：3
> 
> 时间：2012-06-21T02:44:13.857
> 
> 标签：java, spring, mocking, mockito, springmockito

如果我使用 Springockito 在我的 spring 上下文文件中创建一个模拟，如此处所述[，](https://bitbucket.org/kubek2k/springockito/wiki/Home)我如何模拟它的一些行为？

我正在尝试做的事情：

1.  A 类正在测试中。
2.  ClassB 在 ClassA 中自动装配。
3.  ClassB 被 Springockito 嘲笑。
4.  ClassA 需要 ClassB 在其 PostConstruct 中做某事。
5.  我需要模拟 ClassB 来做这件事，因为它不能也不应该真的这样做。

在不使用 Springockito（直接使用 Mockito）的情况下这样做是直接的，但我需要自动装配这些 bean 并在我的测试中使用 Spring。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-21T14:33:43.350

请注意，新[的 springockito-annotations](https://bitbucket.org/kubek2k/springockito/wiki/springockito-annotations)有助于实现相同的目标，而不会弄乱 xml 上下文和额外的辅助类：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(loader = SpringockitoContextLoader.class, locations = "classpath:test-config.xml")
@DirtiesContext(classMode = DirtiesContext.ClassMode.AFTER_CLASS)
public class MemoAutoTest extends AbstractJUnit4SpringContextTests {

    @Autowired
    private ClassA classA;
    @Autowired @ReplaceWithMock
    private ClassB classB;

    @Test
    public void testClassA() {
        // stub B 
        when(classB.foo()).thenReturn(true);
        when(classB.bar()).thenReturn(42);

        // test A
    }

} 
```

这将导致 ClassB 在主应用程序上下文初始化时被替换为模拟。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T04:20:35.093

我对 Springockito 不熟悉，但对于一些狭窄的案例来说它看起来很有趣——即带有一点模拟的集成测试。

[无论如何，对于扩展AbstractJUnit4SpringContextTests](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/test/context/junit4/AbstractJUnit4SpringContextTests.html)的简单用例，您也可以像在 ClassA 中一样在测试中自动装配 ClassB。然后，您可以在设置方法中定义 ClassB 的预期行为。

但我认为您需要为 ClassB bean 设置一些行为，然后才能在 setup 方法中访问它。在这种情况下，您可能需要另一个 bean 来设置 ClassB 以执行预期的行为。所以你的 testContext.xml 里面会有这样的东西：

```
<bean id="classA" class="com.jarvis.ClassA" depends-on="classBMockSetter" />
<mockito:mock id="classB" class="com.jarvis.ClassB" />
<bean id="classBMockSetter" class="com.jarvis.test.ClassBMockSetter">
  <property name="classB" ref="classB" />
</bean> 
```

ClassBMockSetter 看起来像：

```
public class ClassBMockSetter {
  private ClassB classB;
  public void setClassB(ClassB classB) {
    this.classB = classB;
    given(classB.foo()).willReturn(true);
    given(classB.bar()).willReturn(42);
  }
} 
```

我认为这会奏效，但到那时，手动编写模拟 ClassB 不是更容易吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-03T09:19:08.230

对我有用的是使用*@InjectMocks*表示法。（见[https://bitbucket.org/kubek2k/springockito/wiki/Home](https://bitbucket.org/kubek2k/springockito/wiki/Home)）

@RunWith(SpringJUnit4ClassRunner.class) @ContextConfiguration(loader = SpringockitoContextLoader.class, locations = "classpath:test-config.xml") @DirtiesContext(classMode = DirtiesContext.ClassMode.AFTER_CLASS) 公共类 MemoAutoTest 扩展 AbstractJUnit4SpringContextTests {

```
@Autowired
private ClassA classA;
@Autowired @InjectMocks
private ClassB classB;

@Test
public void testClassA() {
    // stub B 
    when(classB.foo()).thenReturn(true);
    when(classB.bar()).thenReturn(42);

    // test A
    classA.doSomethingThatInternallyCallClassBFoo();
} 
```

}

# c# - 如何在客户端变量上存储数据表

> ID：11130879
> 
> 赞同：0
> 
> 时间：2012-06-21T02:44:24.667
> 
> 标签：c#, javascript, asp.net, html

我有大量来自数据库的数据，我需要将该数据临时获取或存储在客户端的变量中并显示在另一个页面中。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T03:01:50.947

完成此任务的基本工作流程如下：

*   在您的解决方案中创建一个实体模型以链接到数据库
*   当用户单击网页中的按钮时，使用 aspx.cs 中的方法进入实体模型并使用主键或其他标识符从表中检索项目
*   将信息传递回 Web 层并将其显示在更新面板中，以防止需要重新加载整个页面
*   您还可以使用 jQuery 的 AJAX 库来完成此操作。

您是否熟悉用于连接数据库的实体框架？这将是一个很好的起点。如果您不了解这些概念中的任何一个，而不深入了解一些细节并进行教学以使您加快速度，那么很难帮助回答您的问题，因此您可能需要自己进行一些阅读/研究。

# hibernate - HQL 42P01：缺少表的 FROM 子句条目

> ID：11130881
> 
> 赞同：2
> 
> 时间：2012-06-21T02:44:42.313
> 
> 标签：hibernate, nhibernate, postgresql, hql, npgsql

针对 PostgreSQL 数据库的 HQL 查询：

```
var checkLines = _Session.CreateQuery(
    @"select lines from FinancialStatement statement
        inner join fetch statement.FinancialStatementLines lines
    where statement.FinancialStatementId = :statementId
        and lines.TransactionType = :transactionType
        and length(lines.CheckNumber) > 0")
    .SetParameter("statementId", statement.FinancialStatementId)
    .SetParameter("transactionType", TransactionTypes.Debit)
    .List<FinancialStatementLine>(); 
```

该查询对我来说看起来不错，但我是 HQL 的新手。有人可以告诉我我做错了什么吗？我假设问题出在 HQL 上，如果您认为我需要寻找其他地方，请告诉我。

**情节变稠了**

在检查上述 HQL 创建的查询后，我发现它看起来像这样：

```
select 
    financials1_.LineId as LineId14_, 
    financials1_.FinancialStatementId as Financia2_14_, 
    financials1_.APPaymentID as APPaymen3_14_, 
    financials1_.EffectiveDate as Effectiv4_14_, 
    financials1_.Amount as Amount14_, 
    financials1_.TransactionType as Transact6_14_, 
    financials1_.CheckNumber as CheckNum7_14_, 
    financials1_.Description as Descript8_14_, 
    financials1_.VendorDescription as VendorDe9_14_, 
    financials1_.FinancialStatementId as Financia2_, 
    financials1_.LineId as LineId 
from 
    FinancialStatements financials0_ 
where 
    financials0_.FinancialStatementId=:p0 
    and financials1_.TransactionType=:p1 
    and length(financials1_.CheckNumber)>0 
```

...现在，WTF？子句中`select`不存在子句别名`from`，这解释了错误，但当然不是错误存在的原因。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:16:33.543

所以这是交易：显然，在使用 HQL 时，要生成正确的查询，您需要将尝试获取的对象类型作为查询的第一部分，例如：

```
var paymentLines = _Session.CreateQuery(
    @"select lines from FinancialStatementLine lines
        inner join fetch lines.Statement statement
    where statement.FinancialStatementId = :statementId
        and lines.TransactionType = :transactionType")
    .SetParameter("statementId", statement.FinancialStatementId)
    .SetParameter("transactionType", TransactionTypes.Debit)
    .List<FinancialStatementLine>(); 
```

这有效，而其他查询则无效。在 SQL 中，连接的顺序并不重要。在 HQL 中，这似乎很重要。

# python - if 语句无效语法

> ID：11130882
> 
> 赞同：-1
> 
> 时间：2012-06-21T02:44:42.623
> 
> 标签：python

我正在尝试执行以下代码，但我得到了

```
SyntaxError: invalid syntax 
```

在 if 语句中。我确定它与 html 有关，因为它以前在没有前面的 html 的情况下工作；如您所见，我在理解如何使用 html 和 Python 进出时遇到了一些困难。

```
 class MainPage(webapp.RequestHandler):
                def get(self):
#preceding ("""<html><head> tags...                    
</head>
<body>""")
        self.response.out.write(today.strftime("""<html><body><p style='color:#3E3535'>%A, %d %B</p>""")

        if mon <= 3:
            var1 = "winter" 
```

提前感谢您的建议；if/elifs 在页面上正确缩进。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T03:16:07.323

如果这是您的代码，那么您缺少一个关闭括号来关闭您的最后一个函数调用。

将其更改为以下内容：

```
self.response.out.write(today.strftime("""<html><body><p style='color:#3E3535'>%A, %d %B</p>""")) 
```

# grails - Paypal 不在沙盒中发送 IP 通知

> ID：11130883
> 
> 赞同：1
> 
> 时间：2012-06-21T02:45:00.567
> 
> 标签：grails, paypal, paypal-ipn

我设置了一个 Paypal Sandbox 帐户，并尝试通过我的网站创建简单的购买。但是，付款完成后，我没有在我的网站上收到自动 IPN 响应。我知道该网址是正确的，因为付款完成后，我可以选择“返回 [我的网站] 商店”。单击此按钮会正确调用我在 Paypal 中设置的通知 url，并且付款会在我的应用程序中正确处理。如果用户没有单击此链接，而是单击“从您的银行添加资金”或类似的东西，则永远不会发送通知。我的印象是这将是异步发送的，并且不依赖于我单击链接。

所以步骤，再次：

1.  在我的应用程序中点击“立即购买”
2.  被带到贝宝网站
3.  使用沙盒买家凭据登录
4.  点击“立即付款”
5.  被带到带有链接的“感谢您的订单”页面。
    1.  如果我点击链接返回我的网站
        1.  再次出现另一个显示“感谢您的订单 - 付款已完成”的贝宝屏幕。
        2.  我的应用程序成功处理了付款 - 赢了！
    2.  不要点击这个链接 - 做任何其他事情。
        1.  付款从未记录在我的应用程序中 - 输了！

注意：我没有在生产中尝试过这个，因为我现在只是在编码。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:11:54.280

在测试 PayPal 交易时，您是否向 PayPal（或在您的帐户下设置）传递了它应该用来通知您的系统交易的回调 URL？另外，您在#5.1 中单击的 URL 是什么？也可以使用发送到 Paypal 的参数或在您的商家帐户设置中配置此 URL（配置文件 > 我的销售工具 > PayPal 按钮 > [您的按钮] > 编辑）。

![](../Images/375af69d8c101c391120b532359efcf4.png)

然后，您的 IPN 处理器应接受来自 PayPal 服务器的连接并处理它们发送的数据以提取订单信息等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:40:02.307

这是用户错误。我无意中在我的 Paypal 按钮中发送了错误的用户名。IPN 从未被发送。当我单击按钮时，付款已成功处理，因为“成功”链接正在转发到我拥有的另一个页面，该页面也处理没有 IPN 的付款。

# java - 在 jOOQ 中，为什么我在“masterDataTables”的 org.jooq.util.jaxb.Generator 中找不到 setter、adder 或字段？

> ID：11130884
> 
> 赞同：1
> 
> 时间：2012-06-21T02:45:10.377
> 
> 标签：java, sql, jooq

编辑对不起，我的朋友告诉我，我只需要使用更新版本的插件。让我告诉你它是怎么回事！

我正在使用jOOQ，今天我将以前具有单个字段作为主键的表更改为多个键作为主键。因此，所有其他引用此表的表也必须更改。我还通过在该表中添加缺少的字段来更改它。当我使用 Maven 进行 Java 开发时，我在运行 'mvn properties:read-project-properties jooq-codegen:generate' 时遇到了麻烦

我得到了这个错误：

```
[ERROR] Failed to execute goal org.jooq:jooq-codegen-maven:2.0.5:generate (default-cli) on project collect-core: Unable
to parse configuration of mojo org.jooq:jooq-codegen-maven:2.0.5:generate for parameter generator: Cannot find setter, adder nor field in org.jooq.util.jaxb.Generator for 'masterDataTables' -> [Help 1] 
```

什么原因导致这个错误，如何解决它？

谢谢埃科

# python - 如何在 Python 中设置“测试”环境

> ID：11130891
> 
> 赞同：2
> 
> 时间：2012-06-21T02:46:26.397
> 
> 标签：python

有没有办法执行文件但仍然可以调用变量？这将极大地帮助学习 Python，因为我可以设置许多不同的“练习”脚本，然后使用控制台尝试修改代码以查看会发生什么。

我认为技术问题是“如何在 Eclipse 中的 Python 中填充命名空间并使其对控制台中的交互保持开放？

下面是一个屏幕截图，显示了我正在尝试做的事情，在编辑器中定义一个（为 1），然后按“ctrl-alt-enter”在控制台中运行该文件，然后从控制台调用该变量。

[Eclipse 的屏幕截图]

![https://i.stack.imgur.com/ExySo.png](../Images/17226e27d67b90b95f2266bcdb44f91e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T02:55:00.817

您应该能够在正在执行的代码末尾添加一个调试断点，并使用一个好的编辑器检查变量。

一般来说，您应该能够直接在 python 解释器中运行简单的脚本。如果您愿意，也可以在线访问：[http ://www.datamech.com/devan/trypython/trypython.py](http://www.datamech.com/devan/trypython/trypython.py)

尝试使用您喜欢的编辑器设置 REPL（读取-评估-打印）环境。例如，emacs 对执行此类任务有很好的支持。

# ruby-on-rails - 验证失败导致零变量

> ID：11130893
> 
> 赞同：1
> 
> 时间：2012-06-21T02:46:53.560
> 
> 标签：ruby-on-rails

我`@products = Product.all`在控制器的新方法中定义了一个变量。它包含来自 db 表的值，这些值将显示在表单上的选择框中。

当 create 方法引发验证错误时，我正在调用`render :action => 'new'`.

所有其他变量似乎都恢复正常，但 @products 以 nil 的形式返回

我在这里想念什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T03:02:00.207

`render :action => new`要求`ActionView`渲染该操作的*视图*`new`——它不会`new`在当前控制器中运行该操作，如您所料。

来自[http://guides.rubyonrails.org/layouts_and_rendering.html#using-render](http://guides.rubyonrails.org/layouts_and_rendering.html#using-render)：

> 使用`render`with`:action`是 Rails 新手经常感到困惑的原因。指定的操作用于确定要呈现哪个视图，但 Rails 不会在控制器中运行该操作的任何代码。您在视图中需要的任何实例变量都必须在调用之前在当前操作中设置`render`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T04:02:17.327

而不是`render :action => :new`，您可以使用`redirect_to :action => :new`. 这将正确加载所有实例变量，而不是强迫您在操作中复制整个`new`逻辑`create`。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T02:58:20.030

`render :action => 'new'`只渲染一个视图，不调用控制器中的新方法。因此，在新方法中实例化的任何变量都必须在调用之前立即实例化`render :action => 'new'`

# javascript - 防止用户插入 *

> ID：11130896
> 
> 赞同：0
> 
> 时间：2012-06-21T02:47:25.493
> 
> 标签：javascript, html

我试图阻止用户在文本框中插入 *。
这是我试图做的，但在这里它只检测 * 如果这是唯一插入的字符。例如：*等文本。
当允许的字符与*混合时，它无法检测到它。例如输入，如：*hjh 等。
也许如何让它只用“”而不是整个字段替换 *？

```
<script type="text/javascript">
    function testField(field) {
        var regExpr = new RegExp("[^*]");
        if(!regExpr.test(field.value)) {
            field.value = "";
        }
    }
</script>

<input type="text" id="searchGamesKeyword" class="searchGamesTextBox"
name="searchGamesKeyword" onblur="testField(this);" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T02:51:48.990

您忘记将正则表达式锚定到字符串的开头和结尾：`new RegExp("[^*]")`

试试这个：`var regExpr = /^[^*]*$/`-- 它要求任何字符的零个或多个实例，除了`*`锚定在字符串的开头和结尾。如果您`/^[^*]+$/`想`+`强制除`*`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T02:54:30.343

```
<script type="text/javascript">
function testField(field, event) {
    if (event.charCode == 42) {
        event.preventDefault();
    }    
}
</script>

<input type="text" id="searchGamesKeyword" class="searchGamesTextBox"
name="searchGamesKeyword" onkeypress="javascript:testField(this, event);" />​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T03:13:17.180

这个怎么样：

```
function testField(field) {
    field.value = field.value.replace(/\*/g,"");
} 
```

调用 from`onblur=testField(this)`如问题所示，它将获取字段的当前值并用空字符串替换任何和所有星号，保持所有其他字符不变。因此，例如，`"ab*cde*"`将变为`"abcde"`。

`g`末尾是一个标志，`/\*/g`意思是全局匹配 - 如果没有这个标志，它只会替换第一个匹配项。

您的代码不起作用的原因是，如果字符串中的任何位置都有非星号字符，您的正则表达式`[^*]`将匹配（即，从 中返回 true ）。`.test()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T03:33:27.110

这应该可以防止人们输入 * 并将其复制并粘贴到。记得检查后端，因为人们可能在他们的浏览器中禁用了 JS。

Javascript：

```
function testField(f)
{
    var o='',i,v=f.value;
    for(i=0;i<v.length;i++) if(v[i]!='*')o+=v[i];
    f.value=o;
} 
```

HTML：

```
<input type="text" id="searchGamesKeyword" class="searchGamesTextBox" name="searchGamesKeyword" onkeyup="testField(this);" onchange="testField(this);" /> 
```

演示： http: [//jsfiddle.net/martinschaer/Sbg6w/](http://jsfiddle.net/martinschaer/Sbg6w/)（手动优化和缩小；））

`c`编辑：如果您尝试编辑到目前为止键入的内容，则使用标志 ( ) 可以避免插入符号位于末尾。像这样：

```
function testField(f)
{
    var t,c,i=0,o='',x="value",v=f[x],l=v.length;
    while(i<l){t=v[i++];if(t!='*')o+=t;else c=1}
    if(c)f[x]=o
} 
```

​在这里测试：http: [//jsfiddle.net/martinschaer/Sbg6w/](http://jsfiddle.net/martinschaer/Sbg6w/)

# c# - 使用相对路径将文件添加到解决方案

> ID：11130901
> 
> 赞同：1
> 
> 时间：2012-06-21T02:48:29.517
> 
> 标签：c#

我在 VS2010 的解决方案中添加了一个文本文件，并将其命名为 test.txt。

在我设置的文件属性中`copy to output`:`always`和`build action`: `content`。

我现在如何在我的项目中打开这个文件？因此，如果用户按下按钮，它将打开文本文件。

我已经尝试了几种方法，例如`File.open("test.txt")`并且`System.Diagnostics.Process.Start(file path))`没有任何效果。

任何人都可以提供一些建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T02:57:00.263

由于您使用复制来输出文件被放置在与您的程序相同的目录中，因此您可以使用：

```
System.Diagnostics.Process.Start("test.txt"); 
```

或基于此[MSDN 文章](http://msdn.microsoft.com/en-us/library/b9skfh7s.aspx#Y0)：

```
string path = "test.txt";
using (FileStream fs = File.Open(path, FileMode.Open))
{
    byte[] b = new byte[1024];
    UTF8Encoding temp = new UTF8Encoding(true);

    while (fs.Read(b, 0, b.Length) > 0)
    {
        textBox1.Text += (temp.GetString(b));
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T02:54:33.357

嗯...我刚试过`System.Diagnostics.Process.Start("TextFile1.txt")`，它奏效了。您可以尝试以下方法：

```
 System.Diagnostics.Process proc = new System.Diagnostics.Process();
        proc.StartInfo.FileName = "TextFile1.txt";
        proc.Start(); 
```

如果这仍然不起作用，请转到您的 \bin\Debug（或 \bin\Release，如果您在 Release 配置中运行）并确保该文本文件实际上与您的 .exe 位于同一位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T02:56:05.540

StreamReader 呢？

```
using (StreamReader sr = new StreamReader("TestFile.txt"))
            {
                String line;
                // Read and display lines from the file until the end of
                // the file is reached.
                while ((line = sr.ReadLine()) != null)
                {
                    Console.WriteLine(line);
                }
            } 
```

[http://msdn.microsoft.com/en-us/library/db5x7c0d.aspx](http://msdn.microsoft.com/en-us/library/db5x7c0d.aspx)

# objective-c - Objective - C，在 UIImageView 中显示图像序列的最快方法

> ID：11130904
> 
> 赞同：1
> 
> 时间：2012-06-21T02:48:45.820
> 
> 标签：objective-c, ios, performance, ios4, uiimageview

> **可能重复：**
> [如何有效地显示许多图像？（iPhone编程）](https://stackoverflow.com/questions/2507441/how-to-efficiently-show-many-images-iphone-programming)

我有数百张图像，它们是一个动画的帧图像**（每秒 24 张图像）**。每个图像尺寸为**1024x690**。

我的问题是，我需要制作**平滑的动画来迭代****UIImageView**中的每个图像帧。
我知道我可以使用**UIImageView**的 animationImages 。但是由于内存问题，它崩溃了。

另外，我可以使用`imageView.image = [UIImage imageNamed:@""]`它来缓存每个图像，以便下一个重复动画**平滑**。但是，缓存大量图像会使应用程序崩溃。

现在我使用`imageView.image = [UIImage imageWithContentsOfFile:@""]`，它不会使应用程序崩溃，但不会使动画如此流畅。

也许有更好的方法来制作帧图像的良好动画？

*也许我需要做一些准备，以某种方式取得更好的结果。我需要你的建议。谢谢！*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T02:58:29.467

您可以在这里找到答案：[如何有效地显示许多图像？（iPhone编程）](https://stackoverflow.com/questions/2507441/how-to-efficiently-show-many-images-iphone-programming?rq=1)

总结该链接中所说的内容，如果您使用与 UIKit 相反的 Core Animation 和 OpenGL 等低级 API，则在显示许多图像时会获得更好的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T03:07:23.440

您可以尝试在内存中一次缓存 10 个图像（您可能必须使用正确的限制——我怀疑它是 10 个）。每次更改 imageView 的图像时，您都可以执行以下操作：

```
// remove the image that is currently displayed from the cache
[images removeObjectAtIndex:0];
// set the image to the next image in the cache
imageView.image = [images objectAtIndex:0];
// add a new image to the end of the FIFO
[images addObject:[UIImage imageNamed:@"10thImage.png"]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T03:11:28.833

您可以使用数组创建多个图像的缓冲区。可以使用 imageWithContentsOfFile 从后台线程（例如，并发 GCD 异步）加载/填充此图像缓冲区数组。

# algorithm - O符号和一些数学

> ID：11130910
> 
> 赞同：0
> 
> 时间：2012-06-21T02:50:00.643
> 
> 标签：algorithm, math

刚开始学习算法。所以练习是找出语句是否总是/有时是真或假。嗯，我的逻辑在哪里失败了？

```
f(n) != O(g(n)) and g(n) != O(f(n)) 
```

O-notation`0 <= f(n) <= cg(n)`是`c`一些常数。所以这里的不相等意味着：

```
f(n) > cg(n) and g(n) > cf(n) 
```

如果`f(n) = g(n) = 1`，让我们说`c = 1/2`：

```
1 > (1/2)*1 and 1 > (1/2)*1 
```

所以在这种情况下是真的。但是这本书说在这种特殊情况下它是错误的。我误解了哪一部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T02:56:14.253

Big-O 本身并不是`0 <= f(n) <= c g(n)`一些*常数*。存在一个数字*c*，使得该关系适用于“足够大”的*n*值。（当我们将 Big-O 称为渐近符号时，这就是我们所指的“渐近符号”，其他常见的符号是 Big-Theta 和 Big-Omega。）

例如，假设有一种算法对某些带有`n`元素的数据结构进行操作，并采取`3n^2 + 7n + 18`步骤。打电话给这个`f(n)`。我们说这个表达式的大 O 是`O(n^2)`因为存在一个常数（在这种情况下大于 3），使得对于所有“足够大”的`n`,值`f(n) <= c n^2`。

# .net - DateTimeConverter 从 UTC 字符串转换

> ID：11130912
> 
> 赞同：7
> 
> 时间：2012-06-21T02:50:09.750
> 
> 标签：.net, datetime, utc, typeconverter

我有一个日期序列化为字符串“2012-06-20T13:19:59.1091122Z”

使用[DateTimeConverter](http://msdn.microsoft.com/en-us/library/system.componentmodel.datetimeconverter.aspx)，这将转换为 DateTime 对象 {22:49:59.1091122} ，其[Kind](http://msdn.microsoft.com/en-us/library/system.datetime.kind.aspx)属性设置为“Local”。

例如。以下测试失败：

```
 private static readonly DateTime UtcDate = new DateTime(634757951991091122, DateTimeKind.Utc);
    private const string UtcSerialisedDate = "2012-06-20T13:19:59.1091122Z";

    [Test]
    public void DateTimeConverter_Convert_From_Utc_String()
    {
        // Arrange
        var converter = TypeDescriptor.GetConverter(typeof(DateTime));

        // Act
        var result = converter.ConvertFrom(UtcSerialisedDate);

        // Assert
        Assert.AreEqual(UtcDate, result);
        Assert.AreEqual(DateTimeKind.Utc, ((DateTime)result).Kind);
    } 
```

我对此感到有点惊讶......我原以为转换器返回的 DateTime 对象将采用 UTC 格式。

文档确实说 DateTimeConverter 使用[DateTime.Parse](http://msdn.microsoft.com/en-us/library/system.datetime.parse.aspx)，但我猜它一定不能使用[DateTimeStyles.RoundtripKind](http://msdn.microsoft.com/en-us/library/91hfhz89%28v=vs.100%29.aspx)选项。

有没有办法解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T20:33:03.650

这里真正的错误是没有任何 DateTimeStyles 传递的 DateTime.Parse() 仍然应该看到“Z”并认识到它应该被解析为 UTC。但祝 MS 承认或解决这个问题好运。

您的代码示例说明的特定问题是 DateTimeConverter 必须覆盖 TypeConverter 的方法，因此无法传递额外的参数，例如 DateTimeStyles。太糟糕了，它没有为此实现某种静态或线程静态属性。它确实利用了线程的 Culture.CurrentCulture，但 DateTimeStyles 是与文化不同的东西，所以唉 - 这是另一个死胡同。

我假设您被锁定在使用转换器，而不仅仅是直接调用 parse？这是一个硬性要求吗？如果没有，您可以执行以下操作：

```
public static object ConvertFrom<T>(string value)
{
  if (typeof(T) == typeof(DateTime))
    return DateTime.Parse(value, null, DateTimeStyles.RoundtripKind);

  var converter = TypeDescriptor.GetConverter(typeof(T));
  return converter.ConvertFrom(value);
} 
```

另一种方法是使用 a`DateTimeOffsetConverter`代替 - 它正确理解 Z 时区。然后，您可以使用`.UtcDateTime`结果的属性返回到具有 UTC 类型的 DateTime。

# c++ - Visual Studio 2012 RC 中的 Windows 窗体 CLR 应用程序？

> ID：11130915
> 
> 赞同：17
> 
> 时间：2012-06-21T02:50:49.313
> 
> 标签：c++, .net, visual-studio-2008, clr, visual-studio-2012

快速提问，我只是在尝试 VS2012 并尝试制作一个 c++.net 应用程序，但对于我的生活，我在制作新项目时再也找不到选项了。

在vs2008中它曾经在new project>visual c++> CLR>windwos form application下。

他们是否从 vs2012 中删除了在 .net 中制作 c++/CLR 应用程序的选项？还是我必须下载的东西？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-02T16:29:10.937

尽管 Microsoft 删除了创建 C++/CLI Windows 窗体应用程序的选项，但仍会安装模板文件。唯一缺少的似乎是 .vsz 文件和 vcNET.vcdir 文件中的注册。我已经重新创建了这些文件并将它们放在[此处](http://www.t-hart.org/vs2012/)以供下载。

安装文件，您应该能够再次在 C++/CLI 中创建 WinForm 应用程序。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-01-21T18:41:26.040

嗯，很多人都遇到过这个问题。这是我遵循的：

创建一个 Visual C++ --> CLR --> CLR 空项目（显然您指定了名称和目录）。

创建完成后，右键单击项目并选择“添加 - > 新项目”。

在 UI 选项卡下，选择“Windows 窗体”。为您的表单命名，然后单击“确定”。此表单将被添加到项目中。

添加表单后，将以下代码复制到`YourFormName.cpp`：

```
using namespace System;
using namespace System::Windows::Forms;

[STAThread]
void Main(array<String^>^ args)
{
    Application::EnableVisualStyles();
    Application::SetCompatibleTextRenderingDefault(false);
    Project1::MyForm myForm;        //NameOfProject::NameOfForm instanceOfForm;
    Application::Run(%myForm);
} 
```

我们快完成了...

现在在项目属性下，展开该`Linker`部分并选择“系统”。在子系统选项下，选择 Windows(/SUBSYSTEM/WINDOWS)

现在添加一个入口点。在“Linker-->Advanced”下，选择“Main”作为“Entry Point”

构建并运行..瞧！

**PS：**这只是一个空表格；）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-21T03:07:10.040

是的，微软已经删除了这个选项，这里是微软的回复（[参考](http://connect.microsoft.com/VisualStudio/feedback/details/747648/no-windows-forms-aplication-project-template-for-c-in-vs2012-rc-ultimate)）：

> C++/CLI 是一个很好的互操作解决方案，但我们不建议使用 C++/CLI 创建全新的 UI 应用程序。

链接提供的解决方法是：

> 1.  使用 2012RC 和 MSVC2010 Express 创建一个空的 C++ 解决方案。
> 2.  使用 2010 Express，在 2012RC 空解决方案的文件夹内新建一个 WinForm App 项目。关闭所有保存。
> 3.  使用 2012RC 和“添加现有项目”，将 2010 Express-WinForm App 项目添加到空的 2012RC 解决方案中。
> 4.  右击项目将其转换为2012RC“格式”
> 
> 它有效，而且很简单！但我不知道所有的后果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T10:36:18.317

自己创建模板：

1.  使用 2012RC（新项目 -> 其他项目类型 -> Visual Studio 解决方案 -> 空白解决方案）和 MSVC2010 Express（新项目 -> Visual C++ -> 空项目）创建一个空的 C++ 解决方案。
2.  使用 2010 Express，在 2012RC 空解决方案的文件夹中创建一个新的 Windows Form App 项目（将其命名为“myWForm11”左右）。关闭 2010 Express 保存所有。
3.  使用 2012RC 和“添加现有项目”，将 2010 Express-WinForm App 项目添加到空的 2012RC 解决方案中。
4.  右键单击解决方案**将VC++项目升级**为2012RC“格式”
5.  文件 -> 导出模板 ... -> 下一步> 输入模板名称：“Windows Form App, C++ 2012RC” 左右以及一些描述。
6.  结束
7.  关闭解决方案

现在您可以像往常一样在 2012RC 中创建 WF App（新项目 -> 已安装 -> 模板 -> Visual C++ -> Windows Form App, C++ 2012RC）。

它有效，而且很简单！但我不知道所有的后果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-24T21:09:33.260

我刚刚在 VS2010 中创建了一个新项目。然后将其导入VS2013。

您会发现表单设计器并不总是使用此功能。稍微更改源文件并保存。然后表单设计器将正常工作，直到您再次加载项目。

# php - Magento 致命错误：调用未定义的方法 Mage_Catalog_Helper_Product::initProductLayout()

> ID：11130919
> 
> 赞同：0
> 
> 时间：2012-06-21T02:51:15.037
> 
> 标签：php, javascript, mysql, magento

我正在一个 Magento 网站上工作，该网站有下拉菜单来选择不同的产品变体。

但是，它最近停止工作，现在在尝试将商品添加到购物车时显示以下错误以及无法将商品添加到购物车。

`Fatal error: Call to undefined method Mage_Catalog_Helper_Product::initProductLayout()`

在

`/home4/wisestor/public_html/app/code/core/Mage/Catalog/controllers/ProductController.php`在第 67 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:32:12.677

恐怕鉴于您提供的信息，这有点像在没有灯的情况下在黑暗中钓鱼。比如，你使用的是什么 Magento 版本？

也就是说，由于 Magento 1.5 该方法是在`catalog/product_view`助手上实现的（与`catalog/product`您发布的错误消息中引用的助手相反）。

我相信您一定以某种方式破解了核心代码，弄乱了第67 行附近*Mage/Catalog/controllers/ProductController.php*`Mage::helper()`控制器中的工厂方法调用，从而产生了该错误。

 *所以不是
`Mage::helper('catalog/product')->initProductLayout($product, $this);`你想要
`Mage::helper('catalog/product_view')->initProductLayout($product, $this);`*

# objective-c - 我可以快照和恢复 Objective-C 对象图的内存吗？

> ID：11130922
> 
> 赞同：0
> 
> 时间：2012-06-21T02:51:57.457
> 
> 标签：objective-c, memory, snapshot

我正在设计一个对象持久代码。IMO，内存快照在一些限制内是最快、可靠和紧凑的持久方法。

使用 C 结构很容易。我可以手动布局所有对象的内存布局。我可以将所有引用保存为对象集合的索引。所以参考不是问题。

无论如何，我想用 Objective-C 对象来试试这个。为此，对象必须位于内存的特定位置。所以，如果我可以指定分配的内存位置，我可以对内存进行快照。并且在恢复时，我可以在特定地址获取对象。

当然，所有这些都是特定于机器的，需要很多技巧，但这对我来说很好。唯一的问题是我不知道如何指定新的 Objective-C 对象的位置。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:39:03.103

通常人们使用`NSCoding`和`NSKeyedArchiver`（或其一些自定义子类）。我认为您的 C 方法在 64 位运行时之前可以工作，因为对象的数据部分是使用结构实现的，但我认为新运行时使用非脆弱实例变量会使事情复杂化。在任何情况下，加载持久对象的程序仍然必须有它们的类定义，要么是硬编码的，要么是通过包加载的。

# ios - 如何对 UIView 应用模糊？

> ID：11130923
> 
> 赞同：44
> 
> 时间：2012-06-21T02:52:05.697
> 
> 标签：ios, image-processing, uiview, blur

现在我正在构建一个需要模糊整个 UIView 的 iPhone 应用程序。我怎样才能做到这一点？我见过[这个框架](https://github.com/Nyx0uf/NYXImagesKit)，但我认为它不适用于 UIView。是否有另一种模糊 UIView 的方法？

**更新**：在下面查看我的更新答案，随着 iOS 7 和 iOS 8 的出现增加更多相关性。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-06-21T03:11:25.480

这应该有效。我在代码中注释以帮助您了解发生了什么：

```
//To take advantage of CIFilters, you have to import the Core Image framework
#import <CoreImage/CoreImage.h>

//Get a UIImage from the UIView
UIGraphicsBeginImageContext(myView.bounds.size);
[myView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

//Blur the UIImage with a CIFilter
CIImage *imageToBlur = [CIImage imageWithCGImage:viewImage.CGImage];    
CIFilter *gaussianBlurFilter = [CIFilter filterWithName: @"CIGaussianBlur"]; 
[gaussianBlurFilter setValue:imageToBlur forKey: @"inputImage"]; 
[gaussianBlurFilter setValue:[NSNumber numberWithFloat: 10] forKey: @"inputRadius"];
CIImage *resultImage = [gaussianBlurFilter valueForKey: @"outputImage"]; 
UIImage *endImage = [[UIImage alloc] initWithCIImage:resultImage];

//Place the UIImage in a UIImageView
UIImageView *newView = [[UIImageView alloc] initWithFrame:self.view.bounds];
newView.image = endImage;
[self.view addSubview:newView]; 
```

如果您对代码有任何疑问，请将其留在评论中。

**注意：**从 5.1 开始，iOS 上不存在 CIGaussianBlur，因此您必须找到一种不同的方法来模糊设备 5.x+ 的视图（感谢 @BradLarson 提供此提示）。[这个问题](https://stackoverflow.com/questions/16182788/how-to-get-the-gaussian-blur-effect-on-a-uiview-in-ios6)中接受的答案看起来很有希望作为替代品，[这个库](https://github.com/alexdrone/ios-realtimeblur)也是如此。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-01-24T03:00:41.603

自从 iOS 7 发布以来，这个问题已经得到了很多点击，我想我应该跟进我最终做了什么。

我个人当时用 Photoshop 对图片进行了模糊处理，但是有很多很棒的第三方库可以进行***动态***和***静态***模糊处理，这里有几个：

*   这个巧妙的库从任何视图中获取一层`UITabBar`并应用于任何视图以获取 iOS 7 的原生模糊： [https ://github.com/JagCesar/iOS-blur/](https://github.com/JagCesar/iOS-blur/)
*   这个库是一个实时模糊库，可以实时模糊它下面的任何视图：[https](https://github.com/alexdrone/ios-realtimeblur) ://github.com/alexdrone/ios-realtimeblur （如 qegal 所指出的）
*   另一个做同样实时模糊的： [https ://github.com/nicklockwood/FXBlurView](https://github.com/nicklockwood/FXBlurView)
*   这个库是我个人使用的库，***非常棒***，允许您在其他设置中设置色调颜色： [https ://github.com/ivoleko/ILTranslucentView](https://github.com/ivoleko/ILTranslucentView)

我想发布此内容，因为您不再**需要**对单个帧或屏幕进行屏幕截图。

**iOS 8：**随着即将发布的 iOS 8，Apple 包含了一个内置的blurred `UIView`( [https://developer.apple.com/documentation/uikit/uivisualeffectview](https://developer.apple.com/documentation/uikit/uivisualeffectview) )`UIVisualEffectView`

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-06-22T16:10:34.457

在 iOS 8 中，您可以使用`UIVisualEffectView`获得模糊视图。见：[https ://developer.apple.com/documentation/uikit/uivisualeffectview](https://developer.apple.com/documentation/uikit/uivisualeffectview)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-11T18:21:03.903

只需使用此代码即可解决。

```
UIToolbar *toolBar = [[UIToolbar alloc]initWithFrame:yourView.bounds];
toolBar.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;

if ([[[UIDevice currentDevice] systemVersion] doubleValue] >= 7.0) {
    toolBar.barTintColor = nil;
    toolBar.translucent = YES;
    toolBar.barStyle = UIBarStyleBlack;
}
else
    [toolBar setTintColor:[UIColor colorWithRed:5 green:31 blue:75 alpha:1]];
[yourView insertSubview:toolBar atIndex:0]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-20T10:52:20.960

最简单的模糊视图的方法是添加 UIToolbar，只需更改 alpha 值即可更改模糊。

```
self.toolbar = [[UIToolbar alloc]initForAutoLayout];
[self.view addSubview:self.toolbar];
[self.toolbar autoPinEdgeToSuperviewEdge:ALEdgeLeft withInset:0];
[self.toolbar autoPinEdgeToSuperviewEdge:ALEdgeRight withInset:0];
[self.toolbar autoPinEdgeToSuperviewEdge:ALEdgeTop withInset:NAVBAR_HEIGHT];
[self.toolbar autoPinEdgeToSuperviewEdge:ALEdgeBottom withInset:0];
self.toolbar.alpha = 0.5; 
```

# c# - 如何级联可选参数？

> ID：11130924
> 
> 赞同：3
> 
> 时间：2012-06-21T02:52:23.463
> 
> 标签：c#, refactoring, optional-parameters

我有一个带有可选参数的工作方法

```
Work(string input = DefaultInput)
{
    //do stuff
} 
```

我有一个包装器，它也采用 string `input`，但这也可以是可选的......

```
WorkWrapper(int someParameter, string input = DefaultInput)
{
    //do initialization
    Work(input);

} 
```

这里的问题是我重复了对 DefaultInput 的引用，例如，如果我将 work 的默认输入更改为`NewDefaultInput`，我还需要更新 workWrapper，否则它仍将使用旧的默认值。

有没有办法让默认输入不需要声明两次？可能没有工作包装器的两个重载..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T03:29:06.287

如果您希望默认值在两种方法之间同步，那么您真的不需要包装器中的默认值，对吧？

```
public void Work(string input = DefaultInput)
{
    //do stuff
} 
```

…</p>

```
public void WorkWrapper(int someParameter, string inputOverride = null)
{
    //do initialization

    if (inputOverride == null) Work();
    else Work(inputOverride);    
} 
```

* * *

如果它们在同一个类/层次结构中，您也可以只声明 a`const`以确保默认值保持不变。

```
private const string DEFAULT_INPUT = "Default Input"; // protected if in base class

public void Work(string input = DEFAULT_INPUT)
{
    //do stuff
}

public void WorkWrapper(int someParameter, string input = DEFAULT_INPUT)
{
    //do initialization
    Work(input);    
} 
```

# button - Pyjs /睡衣框架：如何使用按钮更改框架中的url

> ID：11130927
> 
> 赞同：0
> 
> 时间：2012-06-21T02:53:13.557
> 
> 标签：button, frame, pyjamas

我有一个包含两个按钮和一个框架的网页。在该框架内，将显示一个网页。我正在尝试在框架中制作按钮 A 鞋子 url '/AAA'，而框架中按钮 B 鞋子 url '/BBB'。我怎么能这样做？

这是我所拥有的：

```
class ImageButton(SimplePanel):
    def __init__(self, image_location):
        '''(None, str) -> None'''

        SimplePanel.__init__(self)

        img = Image(image_location, StyleName='rangler')
        img.addClickListener(getattr(self, "onImageClick"))
        self.add(img)

    def onImageClick(self, sender=None):

        pass
        #This is where I need help!?

class QAFrame(SimplePanel):
    def __init__(self, current_url):
        SimplePanel.__init__(self)

        frame = Frame(current_url,
                      Width="200%",
                      Height="650px")
        self.add(frame)

def caption():
    style_sheet = HTML("""<link rel='stylesheet' href='about_us.css'>""")
    srah_pic = ImageButton("Steve.jpg")
    fl_pic = ImageButton("Fraser.jpg")  

    horizontal = HorizontalPanel()
    vertical = VerticalPanel()

    vertical.add(srah_pic)
    vertical.add(fl_pic)
    horizontal.add(vertical)

    QAFrame('Fraser_qa.htm')
    QAFrame('Steve_qa.htm')

    horizontal.add(QAFrame('Steve_qa.htm'))

    RootPanel().add(horizontal) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:51:57.447

基本上，

您需要 .addClickListener 到您的按钮，并且作为参数，您希望传入将在按钮单击时执行所需任务的处理程序。

真正让我困惑的一件事是，我无法将论点传递给我的处理程序。但是，对象“发送者”会自动与处理程序一起传入。您可以尝试通过发件人属性来查找您需要的信息。

```
class ImageButton(SimplePanel):

    def __init__(self, image_location, css_style):
        '''(None, str, str) -> None'''

        SimplePanel.__init__(self)

        self.image_location = image_location

        img = Image(self.image_location, StyleName= css_style)
        img.addClickListener(Cool)   # Cool is the name of my handler function
        self.add(img)

def Cool(sender):   #   You can do whatever you want in your handler function.
                    #   I am changing the url of a frame
                    #   It is a little-medium "Hacky"

    if sender.getUrl()[-9:] == 'Steve.jpg':
        iframe.setUrl('Fraser_qa.htm')
    else:
        iframe.setUrl('Steve_qa.htm') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:37:58.923

我会扩展我的 ImageButton 类以支持将 URL 传递到您要显示的网页。在`__init__`函数中，您可以将该 URL 存储在实例属性中。

您应该将 clickhandler 变成一个实例方法，该方法可以访问保存所需页面 URL 的实例变量。

我缺乏确定的 Python 知识来提供代码示例。希望你仍然理解这个概念。

# ios - 迁移核心数据错误代码 134130

> ID：11130928
> 
> 赞同：1
> 
> 时间：2012-06-21T02:53:18.240
> 
> 标签：ios, core-data, core-data-migration

我想用 2 个 CoreData 数据库进行迁移。我已经阅读[了苹果开发者文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/vmLightweightMigration.html#//apple_ref/doc/uid/TP40004399-CH4-SW1)。

对于第一个数据库，我在新版本的数据库中添加了一些属性（字符串、整数和日期属性）。按照所有步骤，我已经成功完成了第一个迁移。

但是在第二个数据库中，我还在新版本的数据库中添加了属性（字符串、整数、日期、可转换和二进制数据属性）。并且按照所有步骤（如第一个数据库），系统返回错误（134130）。

这是代码：

```
if (persistentStoreCoordinator_) {
    PMReleaseSafely(persistentStoreCoordinator_);
}

// Notify
NSNotificationCenter *nc = [NSNotificationCenter defaultCenter];
[nc postNotificationName:GCalWillMigrationNotification object:self];

//
NSString *sourceStoreType = NSSQLiteStoreType;
NSString *dataStorePath = [PMUtility dataStorePathForName:GCalDBWarehousePersistentStoreName];
NSURL *storeURL = [NSURL fileURLWithPath:dataStorePath];
BOOL storeExists = [[NSFileManager defaultManager] fileExistsAtPath:dataStorePath];

//
NSError *error = nil;
NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                        [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                        [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];
persistentStoreCoordinator_ = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:self.managedObjectModel];
[persistentStoreCoordinator_ addPersistentStoreWithType:sourceStoreType
                                          configuration:nil
                                                    URL:storeURL
                                                options:options
                                                  error:&error];
if (error != nil) {
    abort();
} 
```

错误不是零，以下是日志：

```
Error Domain=NSCocoaErrorDomain Code=134130 "操作
无法完成。（可可错误 134130。）“用户信息 = 0x856f790
{URL=file://localhost/Users/greensun/Library/Application%20Support/iPhone%20Simulator/5.0/Applications/D10712DE-D9FE-411A-8182-C4F58C60EC6D/Library/Application%20Support/XXX/XXX.sqlite,
元数据={类型=不可变字典，
计数 = 7，条目 => 2：{内容 =
"NSStoreModelVersionIdentifiers"} = {type = immutable, count = 1, values = ( 0 : {contents = ""} )} 4 : {contents = "NSPersistenceFrameworkVersion"} = {value = +386, type = kCFNumberSInt64Type} 6:
{内容=
"NSStoreModelVersionHashes"} = {type = immutable dict, count = 2, entries => 0 ：
{contents = "XXX"} = {length = 32, capacity = 32, bytes =
0xfdae355f55c13fbd0344415fea26c8bb ... 4c1721aadd4122aa} 1：
{contents = "XXX"} = {length = 32, capacity = 32, bytes =
0x7676888f0d7eaff4d1f844343028ce02 ... 040af6cbe8c5fd01} } 7 ：
{内容 = “NSStoreUUID”} = {内容 =
“51678BAC-CCFB-4D00-AF5C-8FA1BEDA6440”} 8：{contents = “NSStoreType”} = {contents = “SQLite”} 9：{contents = “_NSAutoVacuumLevel”} = {contents = “2”} 10：{contents = "NSStoreModelVersionHashesVersion"} =
{值 = +3，类型 =
kCFNumberSInt32Type} }, reason=找不到源存储的模型}

```

我尝试了很多解决方案，但它不起作用。我只是将更多属性添加到 2 个新版本数据库中，并成功迁移一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:37:53.467

这是 iOS5 中 Apple 框架中的一个错误。我假设您是 Apple iOS Developer Program 的成员，因此您可以在[Apple Developer Forums](https://devforums.apple.com/message/666466#666466)中阅读有关它的信息。

简而言之，这意味着如果您拥有多个模型，例如使用两个持久存储（但不仅如此），则在某些情况下您不能添加一个数据模型的新版本，而其他模型仍保持其当前版本。

它已提交给 Apple 并标记为重复。我不知道这是否已在 iOS6 中修复。

# c# - 甚至无法获得简单的内联方法（？）

> ID：11130938
> 
> 赞同：3
> 
> 时间：2012-06-21T02:55:03.750
> 
> 标签：c#, visual-studio-2010, .net-4.0, inline

从逻辑上讲，我一直认为非常短且简单的方法会被 C# 编译器内联，因此与简单地手动在方法中键入代码相比，不会显示任何开销......

直到今天 - 当我尝试对各种方法和手动内联代码进行基准测试时。事实证明（对我来说）即使是最简单的代码也会显示出与其手动内联对应的方法调用开销相比。
实际上，我找不到任何关于内联方法的线索*-*所以我进行了一个简单的测试。

使用的系统：

*   英特尔 C2D E7200（双核）2.53GHz
*   4GB DDR2
*   视窗 7 64 位
*   .NET 4.0
*   Visual Studio 2010 终极版

所有测试都是在**没有 Debug**和使用**Release Configuration (Optimize Code)**的情况下执行的。

这是我用来基准测试的代码：

```
static void Main()
{
    const int iterations = 250000000; // 250 million iterations
    Thread.Sleep(1000); // sleep for one second
    var sw = new Stopwatch();

    int s = 0;
    sw.Start();
    for (int i = 0; i < iterations; i++)
    {
        // incrementing s by 1 in various ways
    }
    sw.Stop();

    Console.WriteLine("Time: {0}ms", sw.ElapsedMilliseconds);
} 
```

**[1]**首先，我简单地对一个简单的增量命令进行了基准测试：

```
// in Main
for (int i = 0; i < iterations; i++)
{
    s = s + 1;
} 
```

5 次运行的结果：

1.  867毫秒
2.  877 毫秒
3.  868毫秒
4.  865毫秒
5.  870毫秒

* * *

**[2]**切换到方法调用：

```
static int Increment(int a)
{
    return a + 1;
} 
```

...

```
// in Main
for (int i = 0; i < iterations; i++)
{
    s = Increment(s);
} 
```

5 次运行的结果：

1.  2161毫秒
2.  2159 毫秒
3.  2194 毫秒
4.  2177毫秒
5.  2163毫秒

哎哟! 显然，该方法存在开销。

我尝试使用反射，并`MethodBase.GetCurrentMethod().Name`从`Increment`方法中打印；它确实在打印`Increment`- 这意味着该方法没有内联。

接下来我尝试将`[MethodImpl(MethodImplOptions.NoInlining)]`属性添加到方法中 -**但基准时间保持完全相同**。

在 Debug 模式下，Optimize Code 设置为 false，第一个测试稍慢，而第二个测试大约慢两倍；再次，*NoInlining*属性不会影响性能。

* * *

**我在这里做错了什么，以至于即使如此简单的方法也无法在没有开销的情况下工作？为什么会这样？**
这肯定不是预期的行为 - 或者是吗？

*注意：Java 中的类似测试没有显示此类方法调用的开销。（使用 Eclipse + JDK 1.7，Java 在这方面似乎也快了**很多。）***

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T03:45:11.740

如果您在 Visual Studio 中运行程序，请确保使用*Start without Debugging*命令；否则，可能会禁用内联等一些优化。

如果我首先使用*Start without Debugging*命令运行程序，*然后*附加调试器并查看循环的 x86 反汇编，`for`无论循环`s`直接递增还是调用，我都会得到相同的结果`Increment`；也就是说，方法调用是内联的：

```
00000049  xor         eax,eax
0000004b  inc         ebx
0000004c  inc         eax
0000004d  cmp         eax,0EE6B280h
00000052  jl          0000004B 
```

相反，如果我使用*Start Debugging*命令运行程序，则方法调用没有内联：

```
00000060  xor         edx,edx
00000062  mov         dword ptr [ebp-0Ch],edx
00000065  nop
00000066  jmp         0000007D
00000068  mov         ecx,dword ptr [ebp-8]
0000006b  call        dword ptr ds:[00801F50h]
00000071  mov         dword ptr [ebp-10h],eax
00000074  mov         eax,dword ptr [ebp-10h]
00000077  mov         dword ptr [ebp-8],eax
0000007a  inc         dword ptr [ebp-0Ch]
0000007d  cmp         dword ptr [ebp-0Ch],0EE6B280h
00000084  jl          00000068 
```

# orchardcms - 果园田地验证

> ID：11130939
> 
> 赞同：1
> 
> 时间：2012-06-21T02:55:04.773
> 
> 标签：orchardcms

在 Orchard 1.4.2 中，当输入字段等字段标记为必填时，会出现验证弹出窗口。在不将用户重定向到另一个视图的情况下如何进行验证？

详细解释一下，如果我有一个附加到页面的表单，表单字段验证会显示一条错误消息（可能是通过 AJAX 或 javascript），但没有重定向到“表单”视图- 它停留在该页面视图上。

我需要将验证添加到另一个模块，而不会将其重定向到另一个视图。

任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T04:53:41.533

您可以在 InputFieldDriver 类中找到这段代码...

```
if (settings.Required && string.IsNullOrWhiteSpace(field.Value)) {
                    updater.AddModelError(GetPrefix(field, part), T("The field {0} is mandatory.", T(field.DisplayName)));
                } 
```

添加模型错误会将用户发送回同一页面。

仅供参考，字段模块是位于此处的子存储库： [https ://orchardfields.codeplex.com/](https://orchardfields.codeplex.com/)

我正在谈论的课程就在这里： [https ://orchardfields.codeplex.com/SourceControl/changeset/view/4d125be1a6b3#Drivers%2fInputFieldDriver.cs](https://orchardfields.codeplex.com/SourceControl/changeset/view/4d125be1a6b3#Drivers%2fInputFieldDriver.cs)

# java - jQuery访问字符串对象的java Map，其中对象是字符串的映射

> ID：11130940
> 
> 赞同：0
> 
> 时间：2012-06-21T02:55:05.820
> 
> 标签：java, jquery, json, jsonp

我正在尝试从 java 返回两个 json 集，每个都包含键/值对。我可以让数据按预期返回，但是一旦我有了数据，我就无法正确访问它。这是我来自java的数据的样子

```
{"RESULTS":
    {"MAP_1":
       [
         {"value":"1","display":"output text","type":"type a"},
         {"value":"2","display":"more output text","type":"type a"}
        ],
      "MAP_2":
        [
         {"value":"1","display":"output text","type":"type b"},
         {"value":"2","display":"more output text","type":"type b"}
         ]
     }
} 
```

我曾尝试使用 $.map 和 $.each 但我似乎无法深入研究数据，任何帮助都会非常受欢迎。

这是我最近的尝试：

```
$.ajax({
    url: url,
    dataType: "text",
    data: {
         searchString: request.term
    },
    success: function( data ) {
        response( $.map( data.MAP_1, function( item ) {
            label: item.value + ", " + item.type
                value: item.display
        }));
    }
}); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T03:01:58.170

java返回的数据格式是**text**，不是**json**。因此，您应该将**dataType**指定为**json**。另外我认为下面的代码是不正确的。

```
data.MAP_1 
```

应该

```
data.RESULTS.MAP_1 
```

# zend-framework - 致命错误：未捕获的异常“Zend_Loader_Exception”与消息“资源加载器需要命名空间和基本路径进行初始化”

> ID：11130953
> 
> 赞同：0
> 
> 时间：2012-06-21T02:57:05.460
> 
> 标签：zend-framework, zend-studio

以下是我的项目结构，

![在此处输入图像描述](../Images/ddecb994d3d3871f4b492fb0c9b260f5.png)

在引导文件中，正在加载这样的模块

```
protected function _initAutoload() {

        $autoloader = new Zend_Application_Module_Autoloader(array(
         'namespace'=>'',
         'basepath'=>APPLICATION_PATH
        )
        );
        return $autoloader;
    } 
```

当我尝试访问控制器时，会引发以下错误，

**致命错误：未捕获的异常“Zend_Loader_Exception”与消息“资源加载器需要命名空间和基本路径进行初始化”**

对此有任何想法吗？

**应用程序.ini**

```
[production] 
```

phpSettings.display_startup_errors = 1

phpSettings.display_errors = 1

includePaths.library = APPLICATION_PATH "/../library"

bootstrap.path = APPLICATION_PATH "/Bootstrap.php"

bootstrap.class = "引导程序"

appnamespace = "应用程序"

resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers"

资源.frontController.params.displayExceptions = 0

resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts/"

resources.view.doctype = "XHTML1_STRICT"

resources.db.adapter = PDO_MYSQL；

resources.db.params.host = 本地主机；

资源.db.params.username = root2；

resources.db.params.password = 密码；

资源.db.params.dbname = zfalbums;

settings.publicFoderPathRelativeToApplicationPath = "../public_html";

settings.skin.name = "默认";

settings.cache.enable = false;

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:21:52.077

第一：如果您使用的是当前版本的 ZF，这是多余的代码。把它注释掉，事情应该会奏效。

第二：您在结构中显示的唯一模块是“默认”。

看起来您可能正在使用*Rob Allens* ZF 1.x 教程，如果是这样，请确保您拥有[当前版本](http://akrabat.com/zend-framework-tutorial/)。

要启用模块，请查看[（来自 Rob Allen）](http://akrabat.com/zend-framework/bootstrapping-modules-in-zf-1-8/)

**[编辑]** 要解决您的数据库问题，请确保您的 application.ini 中至少有这些行：

```
;Database Settings
;*****************
resources.db.adapter = "pdo_Mysql" //your database adapter
resources.db.params.username = "your_username"
resources.db.params.password = "your_password"
resources.db.params.dbname = "your_db_name" 
```

请记住，在您尝试连接到它之前，该数据库需要存在（或者您可以使用脚本创建它）。PHPmyadmin 非常适合轻松管理 mysql。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T14:21:08.430

命名空间应该是模块的名称。由于您没有列出任何模块，您甚至可能不需要模块自动加载器。但是，尝试将“default”作为命名空间，尽管您可能需要在所有内容前加上这个（即 Default_IndexController 类扩展 Zend_Controller_Action）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T08:39:53.053

您收到以下错误

```
Fatal error: Uncaught exception 'Zend_Loader_Exception' with message 'Resource loader requires both a namespace and a base path for initialization' in 
```

因为在您的引导程序中，您已经加载了基本路径，因为`'basepath'=>APPLICATION_PATH`这应该是`'basePath' => APPLICATION_PATH`

# python - Python metaclass to run a class method automatically on derived class

> ID：11130954
> 
> 赞同：2
> 
> 时间：2012-06-21T02:57:22.037
> 
> 标签：python, metaprogramming, metaclass

I want to automatically run a class method defined in a base class on any derived class during the creation of the class. For instance:

```
class Base(object):
  @classmethod
  def runme():
    print "I am being run"

  def __metclass__(cls,parents,attributes):
    clsObj = type(cls,parents,attributes)
    clsObj.runme()
    return clsObj

class Derived(Base):
  pass: 
```

What happens here is that when Base is created, ''runme()'' will fire. But nothing happens when Derived is created.

The question is: How can I make ''runme()'' also fire when creating *Derived*.

This is what I have thought so far: If I explicitly set *Derived*'s **metaclass** to *Base*'s, it will work. But I don't want that to happen. I basically want *Derived* to use the *Base*'s metaclass without me having to explicitly set it so.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T03:40:19.393

See [this answer](https://stackoverflow.com/questions/1770712/metaclass-not-being-called-in-subclasses). Basically, when calling `type(cls,parents,attributes)`, you are creating a class without passing in the information about what that class's metaclass is. Thus, the class that is returned doesn't have the metaclass you want it to; instead it has metaclass `type`. (Ironically, by defining `__metaclass__` to do as it does, you are explicitly causing your class to *not* have that metaclass.) Instead of directly calling type, you need to call `type.__new__(meta, cls, parents, attrs)`, where meta is the metaclass.

However, you can't achieve this when you define `__metaclass__` inline. From inside your `__metaclass__` method, you have no way to refer to that method, because it's a method of a class that hasn't been defined yet. You want to do something like

```
def __metaclass__(cls, bases, attrs):
    type.__new__(metaclassGoesHere, cls, bases, attrs) 
```

. . . but there's nothing you can put in for `metaclassGoesHere` to make it do the right thing, because what you're trying to refer to is the method inside which you're trying to refer to it.

So just define your metaclass externally.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T03:11:59.463

rename your `runme()` to `__init__(self)` and *DO NOT* override the `__init__()` method, and it will get called every time you make an instance of `Derived`

```
class Base(object):
    def __init__(self):
        print "I am being run"

class Derived(Base):
    pass

dummy_instance = Derived() 
```

Copy and paste that, it will print `I am being run`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T04:19:01.550

Try This,

```
class MyMetaclass(type): 

    def __new__(cls, name, bases, dct):

        runme()

        return super(MyMetaclass, cls).__new__(cls, name, bases, uppercase_attr) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-15T19:50:19.000

If you want to do something when the class is created you have to do it in the `__init__` method of `__metaclass__`.

```
class foo(object):
    @classmethod
    def method(cls):
        print 'I am being run by', cls.__name__

    class __metaclass__(type):
        def __init__(self, *args, **kwargs):
            type.__init__(self, *args, **kwargs)
            self.method()

class bar(foo): pass 
```

Which prints:

```
I am being run by foo
I am being run by bar 
```

# shopify - Shopify 搜索引擎插件

> ID：11130955
> 
> 赞同：0
> 
> 时间：2012-06-21T02:57:22.230
> 
> 标签：shopify

我正在开发一个搜索引擎插件。

是否可以将我的搜索引擎插件添加到 shopify 首页？

我有研究[http://www.searchifyapp.com](http://www.searchifyapp.com)，他们如何自定义shopify搜索页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T03:44:42.837

我不熟悉 searchifyapp.com，所以我不会告诉你它是如何工作的，但我可以告诉你它是如何完成的。

如果您想在搜索服务器上索引商店的数据，那么您需要在安装时从 shopify 导入数据并使用 webhook 进行更新。与[商店同步](http://wiki.shopify.com/Syncing_with_a_Store)Shopify Wiki 页面说明了这是如何完成的。

您可以使用[ScriptTags](http://api.shopify.com/scripttag.html)将 javascript 注入店面。然后 javascript 可以找到并增强/修改搜索字段/表单（例如，在他们键入时用于自动完成/建议，或修改搜索结果页面的 url）。

如果您想自定义搜索结果（例如来自您自己的搜索服务器），那么您可以创建一个[应用程序代理](http://api.shopify.com/app_proxy.html)来提供来自您自己的 Web 应用程序的结果。

# java - 如何自定义 JSession ID

> ID：11130960
> 
> 赞同：4
> 
> 时间：2012-06-21T02:58:35.573
> 
> 标签：java, jakarta-ee, jboss

我们正在使用 JBoss 4.2。我们想自定义 JBoss 生成的会话 ID。我们应该知道在多路径环境中从哪个服务器创建特定会话 ID。我们想使用第一个数字来识别服务器。

例如：JBoss 创建的 JSessionID 为 123456

自定义的 sessionid 应该是：A123456（A-First server, B-Second Server等）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T04:27:38.247

例如，将引擎配置中的 jvmRoute 属性设置为 jvmRoute="node1"。这将最终生成一个类似于“ABCDEF123456.node1”的 JSESSIONID 值。

# android - 为什么我的精灵具有相同的中心坐标（Android AndEngine）？

> ID：11130961
> 
> 赞同：-1
> 
> 时间：2012-06-21T02:58:40.223
> 
> 标签：android, sprite, andengine, collision

我试图弄清楚我的精灵是否发生了碰撞（它们是圆圈，所以我不能使用 collideswith()）。出于某种原因，尽管 centerB 应该是常数，但中心的坐标返回相同，但始终与 centerA 具有相同的坐标。知道为什么吗？

```
 public boolean collision(){
    boolean collide=false;

    float radA, radB;
    float[] centerA;

    float[] centerB= yourSprite[spriteNum].getSceneCenterCoordinates();
    radB=yourSprite[spriteNum].getHeightScaled()/2;

    Log.e("SpriteNum",Integer.toString(spriteNum));
    if(spriteNum>0)
        for(int x=0;x<spriteNum;x++){
            centerA = yourSprite[x].getSceneCenterCoordinates();
            radA=yourSprite[x].getHeightScaled()/2;

            if(Math.sqrt(Math.pow((centerA[0]-centerB[0]),2)+Math.pow((centerA[1]-centerB[1]),2))<(radA+radB))
                    collide=true;

            Log.e("CenterA",Float.toString(centerA[0])+", "+Float.toString(centerA[1]));
            Log.e("CenterB",Float.toString(centerB[0])+", "+Float.toString(centerB[1]));
            Log.e("RadA",Float.toString(radA));
            Log.e("RadB",Float.toString(radB));
        }
    return collide;
} 
```

如果重要的话，这里是我创建精灵的地方：

```
private void createSpriteOnTap(float x, float y) 
{
    scale = 1; 
    down = true;
    spriteNum++;
    yourSprite[spriteNum] = new Sprite(x, y, textureRegionForYourSprite, getVertexBufferObjectManager())
    {       
        boolean active = true;

        @Override
        public boolean onAreaTouched(TouchEvent pSceneTouchEvent, float pTouchAreaLocalX, float pTouchAreaLocalY) 
        {
            down = true;
            if (pSceneTouchEvent.isActionMove())
            {
                if(active){
                    setScale(scale += 0.05);
                    setPosition(pSceneTouchEvent.getX() - getWidth() / 2, pSceneTouchEvent.getY() - getHeight() / 2);
                }
                if(collision()){
                    down=false;
                    active=false;
                }

            }
            if(pSceneTouchEvent.isActionUp()){
                down = false;
                active = false;

            }   
            Log.e("On Area touch",Boolean.toString(down));
            return true; 
        }

    };
    new Thread(new grow(yourSprite[spriteNum])).start();
    //lets register touch area
    yourScene.registerTouchArea(yourSprite[spriteNum]);
    //attach our sprite to the scene
    yourScene.attachChild(yourSprite[spriteNum]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:19:07.600

看到方法说明了吗？它是共享的，这意味着当您第二次调用它时，您会覆盖以前的值。这就是坐标相同的原因。

你会在这里找到解决方案： [http ://www.andengine.org/forums/gles2/getting-the-center-coordinate-of-a-sprite-t8118-10.html](http://www.andengine.org/forums/gles2/getting-the-center-coordinate-of-a-sprite-t8118-10.html)

# opengl - 使用 OpenCV 和 OpenGL 绘制错误

> ID：11130962
> 
> 赞同：1
> 
> 时间：2012-06-21T02:59:12.060
> 
> 标签：opengl, opencv

我正在尝试使用 OpenCV 和 OpenGL 绘制一个圆圈，我必须这样做，因为我需要在纹理上绘图。

目前该图如下所示：

![错误的打开简历图像](../Images/c853c9ac2adb59847c1c9f6977abc5ba.png)

生成此图像并绘制它的代码如下：

```
class Texture
{
    void setup()
    {
        glEnable(GL_TEXTURE_2D);
        glGenTextures(1, &uid);
        glBindTexture(GL_TEXTURE_2D, uid);
        glTexParameterf(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR); 
        glTexParameterf(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR); 
        glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S , GL_REPEAT );
        glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT );
        glBindTexture(GL_TEXTURE_2D, 0);
        glDisable(GL_TEXTURE_2D);
    }
    ...
    void setData(unsigned char * data, uint width, uint height, GLint internalformat, GLenum format)
    {
        glEnable(GL_TEXTURE_2D);
        glBindTexture(GL_TEXTURE_2D, uid);
        glTexImage2D(   GL_TEXTURE_2D, 
                        0,
                        internalformat,
                        width,
                        height,
                        0,
                        format,
                        GL_UNSIGNED_BYTE,
                        data);
        glBindTexture(GL_TEXTURE_2D, 0);
        glDisable(GL_TEXTURE_2D);
    }
    ...
    void draw(float x, float y, float scale )
    {
        glEnable(GL_TEXTURE_2D);
        glBindTexture(GL_TEXTURE_2D, uid);
        glBegin(GL_QUADS);
            glTexCoord2i(0, 0);     glVertex2i(x, y);
            glTexCoord2i(0, 1);     glVertex2i(x, y + height * scale);
            glTexCoord2i(1, 1);     glVertex2i(x + width * scale, y + height * scale);
            glTexCoord2i(1, 0);     glVertex2i(x + width * scale, y);
        glEnd();
        glBindTexture(GL_TEXTURE_2D, 0);
        glDisable(GL_TEXTURE_2D);
    }
    ... 
};

class App
{
    Texture tex;
    ...
    void update()
    {
        const int w_mask_cv = 640;
        const int h_mask_cv = 480;

        cv::Mat mask_cv = cv::Mat::zeros(w_mask_cv, h_mask_cv, CV_8UC1);
        cv::circle(mask_cv, cv::Point(w_mask_cv/2, h_mask_cv/2), 15, cv::Scalar(255));

        tex.setData(mask_cv.data, w_mask_cv, h_mask_cv, GL_LUMINANCE, GL_LUMINANCE);
    }
    void draw()
    {
        tex.draw(0, 0, 1);
    }
    ...
}; 
```

如您所见，圆圈应该在中间并且不重复，但我不知道为什么它在水平轴上重复。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T04:21:53.650

在我的代码中，错误在于将参数发送到方法。

```
cv::Mat mask_cv = cv::Mat::zeros(w_mask_cv, h_mask_cv, CV_8UC1); 
```

但实际上 cv::Mat::zeros(rows, cols, type)，所以代码必须是这样的。

```
cv::Mat mask_cv = cv::Mat::zeros(h_mask_cv, w_mask_cv, CV_8UC1); 
```

多么愚蠢的错误：P

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T03:09:49.033

尝试设置 GL_TEXTURE_MIN_FILTER。

```
glTexParameteri(GL_TEXTURE_MIN_FILTER, GL_LINEAR); 
```

至于包装，使用 GL_TEXTURE_WRAP_S/T。

```
glTexParameteri(GL_TEXTURE_WRAP_S, GL_CLAMP);
glTexParameteri(GL_TEXTURE_WRAP_S, GL_CLAMP); 
```

希望我有所帮助！

# php - 从评论表单中删除尾部斜杠

> ID：11130963
> 
> 赞同：0
> 
> 时间：2012-06-21T02:59:15.660
> 
> 标签：php, trailing-slash

当用户输入他们的链接时，我需要代码来删除尾部斜杠。例如，我需要他们输入他们的 url 来获取他们的头像，但在某些情况下，他们将他们的 url 以斜杠 (.com/) 结尾。如何自动删除该斜线？因为当他们这样输入网址时，头像不会显示。

我正在寻找使用 php 代码删除尾部斜杠，但任何解决方案将不胜感激。

我尝试使用此代码但没有用：

```
$string = rtrim($string, '/'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T03:01:26.477

使用子字符串（-1）。如果它等于“/”，则删除它

`if (substr($urlString, -1) == "/") $urlString = substr($urlString, 0, -1);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T03:10:31.850

函数 rtrim 只是删除字符串末尾的空格。您应该检查字符串中的最后一个字符是否是“/”，如果是，则将其删除。

一种方法是：

```
if (substr_compare($string, "/", -1) == 0) { 
    $string = substr($string, 0, -1);
} 
```

# sql - 删除 SQL Server 2010 中的“重复”行

> ID：11130964
> 
> 赞同：5
> 
> 时间：2012-06-21T02:59:16.310
> 
> 标签：sql, sql-server, duplicates, rows

我在批量插入脚本中犯了一个错误，所以现在我有不同 colX 的“重复”行。我需要删除这些重复的行，但我不知道如何。更准确地说，我有这个：

```
 col1 | col2 | col3 | colX      
----+----------------------
  0   |  1   |  2   |  a
  0   |  1   |  2   |  b
  0   |  1   |  2   |  c
  0   |  1   |  2   |  a
  3   |  4   |  5   |  x
  3   |  4   |  5   |  y
  3   |  4   |  5   |  x
  3   |  4   |  5   |  z 
```

我想保留每个（行，colX）的第一次出现：

```
 col1 | col2 | col3 | colX      
----+----------------------
  0   |  1   |  2   |  a
  3   |  4   |  5   |  x 
```

谢谢您的回复 ：）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T04:08:41.617

使用 Sql Server 的 CTE 尝试最简单的方法：[http ://www.sqlfiddle.com/#!3/2d386/2](http://www.sqlfiddle.com/#!3/2d386/2)

数据：

```
CREATE TABLE tbl
    ([col1] int, [col2] int, [col3] int, [colX] varchar(1));

INSERT INTO tbl
    ([col1], [col2], [col3], [colX])
VALUES
    (0, 1, 2, 'a'),
    (0, 1, 2, 'b'),
    (0, 1, 2, 'c'),
    (0, 1, 2, 'a'),
    (3, 4, 5, 'x'),
    (3, 4, 5, 'y'),
    (3, 4, 5, 'x'),
    (3, 4, 5, 'z'); 
```

解决方案：

```
select * from tbl;

with a as
(
  select row_number() over(partition by col1 order by col2, col3, colX) as rn 
  from tbl   
)
delete from a where rn > 1;

select * from tbl; 
```

输出：

```
| COL1 | COL2 | COL3 | COLX |
-----------------------------
|    0 |    1 |    2 |    a |
|    0 |    1 |    2 |    b |
|    0 |    1 |    2 |    c |
|    0 |    1 |    2 |    a |
|    3 |    4 |    5 |    x |
|    3 |    4 |    5 |    y |
|    3 |    4 |    5 |    x |
|    3 |    4 |    5 |    z |

| COL1 | COL2 | COL3 | COLX |
-----------------------------
|    0 |    1 |    2 |    a |
|    3 |    4 |    5 |    x | 
```

* * *

或者这个：[http ://www.sqlfiddle.com/#!3/af826/1](http://www.sqlfiddle.com/#!3/af826/1)

数据：

```
CREATE TABLE tbl
    ([col1] int, [col2] int, [col3] int, [colX] varchar(1));

INSERT INTO tbl
    ([col1], [col2], [col3], [colX])
VALUES
    (0, 1, 2, 'a'),
    (0, 1, 2, 'b'),
    (0, 1, 2, 'c'),
    (0, 1, 2, 'a'),
    (0, 1, 3, 'a'),
    (3, 4, 5, 'x'),
    (3, 4, 5, 'y'),
    (3, 4, 5, 'x'),
    (3, 4, 5, 'z'); 
```

解决方案：

```
select * from tbl;

with a as
(
    select row_number() over(partition by col1, col2, col3 order by colX) as rn 
    from tbl   
)
delete from a where rn > 1;

select * from tbl; 
```

输出：

```
| COL1 | COL2 | COL3 | COLX |
-----------------------------
|    0 |    1 |    2 |    a |
|    0 |    1 |    2 |    b |
|    0 |    1 |    2 |    c |
|    0 |    1 |    2 |    a |
|    0 |    1 |    3 |    a |
|    3 |    4 |    5 |    x |
|    3 |    4 |    5 |    y |
|    3 |    4 |    5 |    x |
|    3 |    4 |    5 |    z |

| COL1 | COL2 | COL3 | COLX |
-----------------------------
|    0 |    1 |    2 |    a |
|    0 |    1 |    3 |    a |
|    3 |    4 |    5 |    x | 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T03:25:51.267

如果您可以只保留 colX 的最小值，您可以这样做：

```
delete t from t inner join 
    (select  min(colx) mincolx, col1, col2, col3
     from t
     group by col1, col2, col3
     having count(1) > 1) as duplicates
   on (duplicates.col1 = t.col1
   and duplicates.col2 = t.col2
   and duplicates.col3 = t.col3
   and duplicates.mincolx <> t.colx) 
```

问题是您仍然有所有四列都相同的行。要摆脱这些，在运行第一个查询之后，您必须使用临时表。

```
SELECT distinct col1, col2, col3, colx 
INTO temp
  FROM (SELECT col1, col2, col3
         from t 
         group by col1, col2, col3
         having count(1) > 1) subq;

DELETE from t where exists 
   (select 1 from temp 
     where temp.col1 = t.col1 
       and temp.col2 = t.col2 
       and temp.col3 = t.col3); 
```

[这是一个示例 SQLFiddle。](http://sqlfiddle.com/#!3/5b1de/1)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T03:10:01.870

如果您有很多重复项，我建议使用 CTE 并在单独的表中读取所有非重复记录。但是，有一个推荐的帖子：[MSDN](http://support.microsoft.com/kb/139444)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T03:16:50.377

假设 colX 是唯一的（在您的示例中并非如此，即使您说“不同的 colX”），您可以使用以下内容删除重复项：

```
;with cteDuplicates as
(
    select 
        *,
        row_number() over (partition by col1, col2, col3 order by colX) as ID
    from Duplicates
)
delete D from Duplicates D
    inner join cteDuplicates C on C.colX = D.Colx
where ID > 1 
```

（假设您的表名为“重复”）

如果 colX 不是唯一的，请添加一个新的 uniqueidentifier 列，将不同的值插入其中，然后通过加入该列而不是 colX 来使用上面的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-11T06:19:20.677

最简单的解决方案可能如下假设我们有表 emp_dept(empid, deptid) 有重复的行，在 Oracle 数据库

```
 delete from emp_dept where exists ( select * from emp_dept i where i.empid = emp_dept.empid and i.deptid = emp_dept.deptid and i.rowid < emp_dept.rowid ) 
```

在 sql server 或任何不支持 row id kinda 特性的数据库上，我们需要添加标识列来标识每一行。假设我们已将 nid 作为身份添加到表中

```
alter table emp_dept add nid int identity(1,1) -- to add identity column 
```

现在删除重复的查询可以写成

```
 delete from emp_dept where exists ( select * from emp_dept i where i.empid = emp_dept.empid and i.deptid = emp_dept.deptid and i.nid< emp_dept.nid ) 
```

这里的概念是删除所有存在其他行的行，这些行具有相似的核心值但较小的 rowid 或标识。因此，如果存在重复行，那么具有较高行 ID 或标识的行将被删除。并且对于没有重复的行，它无法找到较低的行ID，因此不会被删除。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-08T17:55:32.633

尝试此代码 bt 风险自负

```
Delete from Table_name
WHERE Table_name.%%physloc%%
      NOT IN (SELECT MAX(b.%%physloc%%)
              FROM   Table_name b
              group by Col_1,Col_2) 
```

使用 row_number() 的第二种方法，这是安全的方法

```
WITH CTE_Dup AS
(

 SELECT * ROW_NUMBER()OVER (PARTITIONBY SalesOrderno, ItemNo ORDER BY SalesOrderno, ItemNo)
 AS ROW_NO
 from dbo.SalesOrderDetails
)
Delete FROM CTE_Dup; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-21T04:29:39.937

我假设你正在使用`SQL Server 2005/2008.`

```
SELECT col1,
       col2,
       col3,
       colx
FROM
  (SELECT *,
          row_number() OVER (PARTITION BY col1,col2,col3
                             ORDER BY colx) AS r
   FROM table_name) a
WHERE r = 1; 
```

# .net - 在 Winforms .NET 4.0 VB.NET 中验证空文本框的奇怪问题

> ID：11130965
> 
> 赞同：1
> 
> 时间：2012-06-21T02:59:16.257
> 
> 标签：.net, vb.net, winforms, validation

我只是将验证添加到新的 winform 中。我将**验证**和**验证**事件与**错误提供程序**控件结合使用。请看下面的代码。

第一次验证没有问题（即，如果用户输入超过 12 个字符）。在验证事件中设置错误，并且错误一直存在，直到用户输入 12 个或更少的字符。**然后输入经过验证**的事件并将错误重置为空字符串。

但是，在同一文本框中进行第二次验证存在问题。代码检查文本框中的零长度.. 并设置提供程序错误。在调试器中观察，确实调用了这段代码，并且设置了错误。然后发生了一些奇怪的事情，经过**验证**的事件*（意外地）*被触发，并且那里的代码立即重置了错误。

当已经设置了错误时，为什么会触发**验证事件？**这似乎是一个 .NET 错误。谁能提出另一种方法，或者说我做错了什么？

谢谢，

巴扎

```
Private Sub SampleCodeTextBox_Validating(sender As Object, e As System.ComponentModel.CancelEventArgs) Handles SampleCodeTextBox.Validating
    If SampleCodeTextBox.Text.Length > 12 Then
        e.Cancel = True
        FormErrorProvider.SetError(SampleCodeTextBox, "Max of 12 characters for sample code")
    End If

    If SampleCodeTextBox.Text.Trim.Length = 0 Then
        FormErrorProvider.SetError(SampleCodeTextBox, "Must enter a sample code")
    End If
End Sub

Private Sub SampleCodeTextBox_Validated(sender As Object, e As System.EventArgs) Handles SampleCodeTextBox.Validated
    FormErrorProvider.SetError(SampleCodeTextBox, "")
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T03:34:27.923

您需要将该`CancelEventArgs.Cancel`属性设置为`True`当您的验证事件处理程序中的零长度文本检查失败时。

[来自关于Control.Validated 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.validated.aspx)的 MSDN 文章：

> 如果在 Validating 事件委托中将 CancelEventArgs 的 Cancel 属性设置为 true，则通常会在 Validating 事件之后发生的所有事件都将被抑制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T03:35:11.340

你没有`e.Cancel = True`在下一个 if 块中丢失吗？

# wcf - 当路由器在中间时在 WCF 中使用 SvcUtil.exe

> ID：11130970
> 
> 赞同：0
> 
> 时间：2012-06-21T03:01:06.967
> 
> 标签：wcf, wcf-client, svcutil.exe

我的服务是通过路由器使用的。我正在尝试使用 SvcUtil.exe 创建配置和类文件。当我指向服务本身的端点时，命令将是这样的：

svcutil.exe http://'localhost':8080/MyService_endpoint

“请不要介意地址中的'”

使用此命令一切正常，并且我在客户端拥有所有服务方法（合同）。现在我的问题是当我尝试使用 svcutil 通过路由器创建配置和类时，我使用以下命令：

svcutil.exe http://'localhost':8080/MyRouter_endpoint

文件已创建，但类文件中未提及任何服务方法。我的问题是在使用路由器时我们如何使用 svcutil。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T11:47:39.363

您可以使用`SvcUtil.exe`来创建目标 WCF 服务的代理，并且在配置中您必须将地址更改为指向路由器的地址而不是服务地址。

因此，您仍然可以访问服务的类和接口，但只能通过路由器的地址进行通信。

# ruby-on-rails - 无法 gem 安装 json -v '1.7.3'

> ID：11130976
> 
> 赞同：7
> 
> 时间：2012-06-21T03:01:44.433
> 
> 标签：ruby-on-rails, json, gem, rvm, bundler

尝试在 lion 上安装 json gem 时得到以下输出：

> gem install json -v '1.7.3' 构建原生扩展。这可能需要一段时间... 错误：安装 json 时出错：错误：无法构建 gem 原生扩展。
> 
> /Users/victorstan/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb 创建 Makefile
> 
> make 编译 parser.c make: /usr/bin/gcc-4.2: No such file or directory make: *** [parser.o] Error 1

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-21T03:06:01.170

在 /usr/bin/gcc-4.2 中使用`which gcc`并创建一个符号链接。例如

```
sudo ln -s /usr/bin/gcc /usr/bin/gcc-4.2 
```

# c++ - 如何在 Windows 操作系统中重定向打印机

> ID：11130978
> 
> 赞同：-3
> 
> 时间：2012-06-21T03:01:50.503
> 
> 标签：c++, windows, hook, driver

我使用 printmirror 中的代码，现在我挂钩 enumprinter api 来隐藏我的打印机。当人们选择一台真正的打印机来打印文档时，我将 createdcw 连接到我的打印机。我真的很想知道我该怎么做。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-06-21T03:37:17.173

有几种方法可以做到这一点。Windows 使用打印后台处理程序进行打印作业。后台打印程序由多个层组成，包括*打印提供程序*、*打印处理器*、*端口监视器*、*语言监视器*等。所有这些组件都可以自定义，这意味着您可以编写自己的组件并在后台打印程序中替换它们。在这些组件中，您将能够重定向打印作业。在前一层处理之后，这些组件中的每一个都为您提供不同格式的打印数据。

这可以让你开始 - [http://blogs.technet.com/b/askperf/archive/2007/06/19/basic-printing-architecture.aspx](http://blogs.technet.com/b/askperf/archive/2007/06/19/basic-printing-architecture.aspx)

# spotify - libspotify API：加载播放列表容器以获取播放列表元数据？

> ID：11130982
> 
> 赞同：0
> 
> 时间：2012-06-21T03:02:18.670
> 
> 标签：spotify

我加载了播放列表容器，然后获取了指向每个播放列表的指针，并从播放列表指针 (sp_playlist *) 中获取了每个播放列表的名称和 URI。但结果显示并非所有播放列表名称和 URI 都可以检索。播放列表容器提供哪些类型的播放列表元数据？

另外，播放列表是否存储在本地缓存中？我是否必须等待播放列表加载到缓存中？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:41:25.543

播放列表容器不包含播放列表元数据——只有一个播放列表指针列表。您需要等待每个播放列表加载，然后才能使用其名称。另外，请注意播放列表容器中也会有文件夹标记，它们根本没有名称。你可以用`sp_playlistcontainer_playlist_type()`.

播放列表确实存储在本地缓存中，只要您正确注销并在终止进程之前等待注销完成回调。

# javascript - jQuery ajax 返回

> ID：11130984
> 
> 赞同：1
> 
> 时间：2012-06-21T03:02:45.147
> 
> 标签：javascript, jquery, ajax

我有一个带有 3 张幻灯片的滑块 - 介绍、问题、提交。

现在我想确保如果问题回答错误，人们不能滑动提交。

移动幻灯片的功能是这样的：

```
function changeSlide(slide){

        // In case current slide is question check the answer
        if (jQuery('.modalSteps li.current',base).hasClass('questionStep')){
            checkAnswer(jQuery('input[name="question_id"]',base).val(), jQuery('input[name="answer"]:checked',base).val());
        }

        jQuery('.modalSteps li.current',base).fadeOut('fast',function(){
            jQuery(this).removeClass('current');
            jQuery(slide).fadeIn('fast',function(){
                jQuery(slide).addClass('current');
            });
        });

        // In case the new slide is question, load the question
        if (jQuery(slide).hasClass('questionStep')){
            var country = jQuery('input[name="country"]:checked',base).val();
            loadQuestion(country);
        }
    } 
```

现在正如您在第一行看到的那样，我正在调用函数 checkAnswer，它获取问题 id 和答案 id 并将其传递给 AJAX 调用。

```
function checkAnswer(question, answer){
        jQuery.ajax({
            url: window.base_url+'ajax/check_answer/'+question+'/'+answer+'/',
            success: function(data){
                if (!data.success){
                    jQuery('.question',base).html(data.message);
                }
            }
        });
    } 
```

我遇到的问题是我不能说

```
if(checkAnswer(...)){} 
```

由于 Ajax，它总是返回 false 或 undefined。我需要的是这样的：

```
 function changeSlide(slide){

        // In case current slide is question check the answer
        if (jQuery('.modalSteps li.current',base).hasClass('questionStep')){
            if (!checkAnswer(jQuery('input[name="question_id"]',base).val(), jQuery('input[name="answer"]:checked',base).val())){
              return false;
            }
        }
... 
```

所以它会阻止幻灯片继续移动。

现在当我考虑它时，我可能会有像“错误答案”这样的幻灯片，所以我可以将幻灯片移到那里，但无论如何我想看到第一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T03:11:29.227

您可以将 ajax 的选项 async 设置为 false 以等待来自服务器的回复。因此，代码可能如下所示。

```
function checkAnswer(question, answer){
    result = false;
    jQuery.ajax({
        async: false,
        url: window.base_url+'ajax/check_answer/'+question+'/'+answer+'/',
        success: function(data){
            result = data.success
            if (!data.success){
                jQuery('.question',base).html(data.message);
            }
        }
    });

    return result;
} 
```

# hadoop - 如何在 PigLatin 的 SUM 中计算乘法

> ID：11130991
> 
> 赞同：1
> 
> 时间：2012-06-21T03:03:27.923
> 
> 标签：hadoop, apache-pig

我有一个像这样的猪 DESCRIBE：

```
DESCRIBE B;
B: {group: chararray, A: {name: chararray,age: int,gpa: float}} 
```

我想在 Pig中计算`∑B.A.gpa²`

但如果我写：

```
FOREACH B {
    out = SUM(A.gpa * A.gpa);
} 
```

它抛出了这样的异常：

```
[main] ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1039: <file test.pig, line xx, column xx> (Name: Multiply Type: null Uid: null)incompatible types in Multiply Operator left hand side:bag :tuple(gpa:float)  right hand side:bag :tuple(gap:float) 
```

我已经向 Pig group 寻求解决方案，这是 jira[链接](https://issues.apache.org/jira/browse/PIG-2754)

有人对我的问题有其他建议吗？

我的临时解决方案是

```
FOREACH B {
    tmp_out = FOREACH A GENERATE gpa*gap;
    out = SUM(tmp_out);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:31:14.773

您的临时解决方案对 PIG 是正确的。请记住，PIG 是一种简单的数据流语言，它可以为您提供 95% 的开箱即用解决方案，剩下的 5% 可以通过 UDF 完成。要查看如何编写 UDF 的优秀示例，请查看[LinkedIn 的 DataFu](https://github.com/linkedin/datafu/tree/master/src/java/datafu/pig)。

# python - 我可以让它并行化吗？

> ID：11130994
> 
> 赞同：0
> 
> 时间：2012-06-21T03:04:29.357
> 
> 标签：python

它是 Euler 项目 #4 的答案。

回文数的两种读法都是一样的。由两个 2 位数字的乘积构成的最大回文数是`9009 = 91 99`。

找出由两个 3 位数字的乘积构成的最大回文数。

回答：

```
906609 
```

代码是：

```
from multiprocessing import Pool
from itertools import product

def sym(lst):
    rst=[]
    for x,y in lst:
        tmp=x*y
        if rec(tmp):
            rst.append(tmp)
    return rst

def rec(num):
    num=str(num)
    if num == "".join(reversed(num)):    return True
    else:    return False

if __name__ == "__main__":
    pool=Pool(processes=8)
    lst=product(xrange(100,1000),repeat=2)
    rst=pool.map(sym,lst)
    #rst=sym(lst)
    print max(rst) 
```

当我运行这个：

```
#    TypeError:'int' object is not iterable 
```

但我无法理解...不是列表可迭代的吗？还是我的代码有错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T03:23:39.130

您的问题在于功能`sym`。

`sym`正在传递您的产品可迭代的第一个元素。（例如`lst = (100,100)`）。当您进入`for`循环时，您正在迭代`lst`然后尝试将其解压缩为两个数字 - 相当于：

```
for x,y in (100,100):
    ... 
```

由于明显的原因而失败。

我认为您可能希望完全摆脱 for 循环——这可能是您的串行版本的产物。

```
def sym(lst):
    x,y=lst
    tmp=x*y
    if rec(tmp):
        return tmp
    else:
        return None  #max will ignore None values since None > x is always False. 
```

回溯有点神秘——显然回溯被返回到`Pool`然后被重新提出......但是它的完成方式使它有点难以追踪。

有时，在调试这些东西时，`Pool.map()`用普通版本的`map`. 然后，在您的主“线程”上引发任何引发的异常，并且追溯可以更容易遵循。

# java - 无法访问 Google App Engine 上的 Html 文件

> ID：11130997
> 
> 赞同：1
> 
> 时间：2012-06-21T03:04:50.573
> 
> 标签：java, google-app-engine, jsp

我有一个 Eclipse Java 项目，我从根目录中添加了一个名为“webfiles”的“文件夹”。然后我开始创建一个名为 form.html 的文件。一旦我在本地运行项目或发布它，我就无法访问 .html 文件。我收到 Not_Found 错误。

在 Google App Engine 中是否可以使用 HTML 文件（index.html 除外），我必须将它们放在项目中的什么位置才能通过浏览器访问它们？我应该在浏览器中使用什么路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T10:37:50.867

您需要在 appengine-web.xml 的静态文件定义中添加 include path="/**.html" " 否则 index.html 以外的 html 文件甚至不会被上传。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:22:57.933

如果您的项目中有 /war/webfiles/form.html 而不是从浏览器访问它的路径：

```
http://your_app_name.appspot.com/webfiles/form.html 
```

要从其他 jsp 页面进行引用，请使用：

```
<a href="<c:url value='/webfiles/form.html'/>">link to form</a> 
```

# facebook - FB.API Facebook Open Graph 为某些用户返回用户喜欢的空数据

> ID：11130998
> 
> 赞同：1
> 
> 时间：2012-06-21T03:05:01.763
> 
> 标签：facebook, facebook-graph-api, oauth-2.0, facebook-fql

我有一个页面，当用户允许该应用程序时，它将列出用户的页面喜欢，并检查用户是否喜欢我的某个 Facebook 页面并且是该 facebook 页面的成员（在某种程度上两者都是相似的） , 使用 FB.API

问题是某些用户根本没有返回任何数据，无论操作系统或浏览器如何。我已经在应用程序上设置了“user_likes”权限，但无济于事。

```
 <html> 
<head> 
<title>My Facebook Login Page</title> 
</head> 
<body> 
    <div id="fb-root"></div> 
    <div id="lblName"></div> 
    <div id="lblAccessToken" style="display: none;"></div> 
    <br><br> 
    <fieldset> 
        <legend>Your Page Likes</legend> 
        <div id="lblLikes"></div> 
    </fieldset> 

    <fieldset> 
        <legend>Check whether you like [My Fan Page] </legend> 
        <div id="lblYouLike"></div> 
    </fieldset> 

    <fieldset> 
        <legend>Check whether you are a fan of [My Fan Page]</legend> 
        <div id="lblMem"></div> 
    </fieldset> 
    <div id="divLogin" style="display:none;"> 
    <div class="fb-login-button">Login with [App]</div> 
</div> 
<script> 
    var accessToken; 
    var uid; 
    var lblName = document.getElementById("lblName") 
    var divLogin = document.getElementById("divLogin") 
    var lblAccessToken = document.getElementById("lblAccessToken") 
    var lblLikes = document.getElementById("lblLikes") 
    var lblYouLike = document.getElementById("lblYouLike") 
    var lblMem = document.getElementById("lblMem") 

    window.fbAsyncInit = function () { 
        FB.init({ 
            appId: 'APP_ID', // App ID 
            channelUrl : 'http://www.example.com/testing/channel.html', // Channel File 
            status: true, // check login status 
            cookie: true, // enable cookies to allow the server to access the session 
            xfbml: true // parse XFBML 
        }); 

        FB.getLoginStatus( 
            function (response) { 
                checkStatus(response) 
            } 
        ); 

        FB.Event.subscribe( 
            'auth.authResponseChange', 
            function (response) { 
                checkStatus(response) 
            } 
        ); 

        FB.Event.subscribe( 
            'edge.create', 
            function (response) { 
                //alert('You liked the URL: ' + response); 
                ufCheckLike() 
            } 
        ); 
    }; 

    // Load the SDK Asynchronously 
    ( 
        function(d){ 
            var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0]; 
            if (d.getElementById(id)) {return;} 
            js = d.createElement('script'); 
            js.id = id; 
            js.async = true; 
            js.src = "//connect.facebook.net/en_US/all.js"; 
            ref.parentNode.insertBefore(js, ref); 
        } (document) 
    ); 

    function checkStatus(response){ 
        if (response.status === 'connected') { 
            uid = response.authResponse.userID; 
            accessToken = response.authResponse.accessToken; 

            lblAccessToken.innerHTML = accessToken; 

            FB.api( 
                '/me', 
                'get', 
                function(response) { 
                    lblName.innerHTML = response.name; 
                } 
            ); 

            divLogin.style.display = "none"; 

            ufCheckLike() 
        } 
        else { 
            divLogin.style.display = ""; 
        } 
    } 

    function ufCheckLike() { 
        if (isLoggedIn()) { 
            FB.api( 
                '/me/likes?' + 
                'access_token=' + accessToken, 
                'get', 
                    function(likes) { 
                        if (likes) { 
                            if (likes.data && likes.data.length > 0) { 

                                for (var i = 0; i < likes.data.length; i++) { 
                                    var like_detail = likes.data[i] 
                                    var lsHTML = like_detail.name + " : " + like_detail.id + "<br>" 
                                    if(like_detail.id == "<PAGE_ID>") 
                                        lblLikes.innerHTML = lsHTML + lblLikes.innerHTML 
                                    else 
                                        lblLikes.innerHTML += lsHTML 
                                } 

                            } 
                        } 
                    } 
            ); 

            FB.api( 
                '/me/likes/<PAGE_ID>?' + 
                'access_token=' + accessToken, 
                'get', 
                function(likes) { 
                    if (likes) { 
                        if (likes.data && likes.data.length > 0) { 
                            lblYouLike.innerHTML = "You Like [Fan Page]!" 
                        } 
                    } 
                } 
            ); 

            FB.api( 
                '/<PAGE_ID>/members/' + uid + '?' + 
                'access_token=' + accessToken, 
                'get', 
                function(likes) { 
                    if (likes) { 
                        if (likes.data && likes.data.length > 0) { 
                            lblMem.innerHTML = "You are a fan of [Fan Page]!" 
                        } 
                    } 
                } 
            ); 

        } 

    } 

    function isLoggedIn() { 
        if (!accessToken) { 
            divLogin.style.display = ""; 
            return false; 
        } 
        return true; 
    } 
</script> 
</body> 
</html> 
```

我还实现了一个 FQL，它实际上做了同样的事情来检查用户是否喜欢我的页面，并且在某些数据对象返回空行的用户上发生了同样的情况。

```
var query = "SELECT uid FROM page_fan  where uid=me() and page_id = PAGE_ID ' + 'and access_token = " + accessToken;
//Access token is optional
var names = FB.Data.query(query);
names.wait(
    function (rows) {
        if (rows.length > 0) {
            // liked, do codes here
        }
        else {
            // not yet liked, show like button
        }
    }
); 
```

我已经应用了此处找到的一些建议，但该脚本仍然不适用于某些用户。除了在应用程序的用户和朋友权限设置中设置“user_likes”之外，我不知道应该修改哪些特定帐户/隐私/应用程序设置以允许查询用户的页面喜欢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T16:43:57.030

我在这篇文章中发布了针对 JS api 遇到的类似问题的详细解决方案： [为什么 Facebook API 返回一个空的相册数组？](https://stackoverflow.com/questions/7590501/why-is-the-facebook-api-returning-an-empty-array-for-albums)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:33:34.717

你没有说明这种情况发生的频率，所以我假设

*   很少见
*   您只询问当前用户，而不是他们的朋友。

如果是这样，一些用户实际上没有任何喜欢，所以这很容易发生并且不应该成为问题。

如果您可以验证用户确实有喜欢，并且已使用 user_likes 权限授权您的应用，请在[Facebook 的错误跟踪器](https://developers.facebook.com/bugs/)中提交错误并包括用户 ID、页面 ID、访问令牌等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-16T23:55:20.200

```
if(jQuery.type(response.data[i].location) == 'object' ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T17:59:49.667

这可能与这个可重现的错误有关：http: [//developers.facebook.com/bugs/106991419491608](http://developers.facebook.com/bugs/106991419491608) 阅读我的帖子以获取更多信息。