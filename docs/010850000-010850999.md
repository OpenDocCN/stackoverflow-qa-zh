# StackOverflow 问答 10850000-10850999

# antlr - 在 ANTLR 上重写树时，抛出 java.lang.NullPointerException

> ID：10850007
> 
> 赞同：1
> 
> 时间：2012-06-01T12:10:12.950
> 
> 标签：antlr

我正在尝试为 QuickBasic 创建解析器，这是我获取评论的尝试：

```
grammar QuickBasic;

options 
{
    language = 'CSharp2';
    output = AST;
}

tokens
{
    COMMENT;
}

parse
    :    .* EOF
    ;

// DOESN'T WORK
Comment
    :    R E M t=~('\n')* { Text = $t; } -> ^(COMMENT $t)
    |    Quote t=~('\n')* { Text = $t; } -> ^(COMMENT $t)
    ;

Space  
    :    (' ' | '\t' | '\r' | '\n' | '\u000C') { Skip(); }  
    ;

fragment Quote : '\'';    
fragment E     : 'E' | 'e';
fragment M     : 'M' | 'm';
fragment R     : 'R' | 'r'; 
```

即使我只使用标记 COMMENT 重写，我仍然会得到同样的错误。

```
// It DOESN'T WORK EITHER
Comment
    :    (R E M | Quote) ~('\n')* -> ^(COMMENT)
    ; 
```

如果我放弃重写，它会起作用：

```
// THIS WORKS
Comment
    :    (R E M | Quote) ~('\n')*
    ; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T12:26:43.617

重写规则仅适用于解析器规则，不适用于词法分析器规则。并且`t=~('\n')*`只会导致最后一个非换行符存储在`t`-label 中，因此无论如何这都行不通。

但是为什么不`Comment`一起跳过这些标记。如果将它们留在令牌流中，则需要`Comment`在所有解析器规则中考虑令牌（`Comment`令牌有效出现的地方）：这不是您想要的，对吗？

要跳过，只需`Skip()`在规则末尾调用：

```
Comment
    :    R E M ~('\r' | '\n')* { Skip(); }
    |    Quote ~('\r' | '\n')* { Skip(); }
    ; 
```

或更简洁：

```
Comment
    :    (Quote | R E M) ~('\r' | '\n')* { Skip(); }
    ; 
```

但是，如果您真的很想在`Comment`流中留下标记并删除`"rem"`评论中的任何一个或引用，请这样做：

```
Comment
    :    (Quote | R E M) t=NonLineBreaks { Text = $t.text; }
    ;

fragment NonLineBreaks : ~('\r' | '\n')+; 
```

然后，您还可以创建一个解析器规则，该规则创建一个以`COMMENT`根为根的 AST（尽管我没有看到简单使用的好处`Comment`）：

```
comment
    :    Comment -> ^(COMMENT Comment)
    ; 
```

# grails - 如何自定义 g:sortableColumn？

> ID：10850025
> 
> 赞同：2
> 
> 时间：2012-06-01T12:11:21.463
> 
> 标签：grails, groovy

好吧，我的列表中有一列需要自定义，问题是 grails 自己的 g:sortable 不起作用。例如，我的第一列显示员工 ID，然后我的第二列显示员工全名，其中全名是名字和姓氏的组合。我让它工作，排序等等，但是当我尝试将它放在一个带有 g:sortable 的表中时，g:sortable 就不起作用了。我正在考虑传递参数，但这有点棘手。有什么建议么？

我浏览了互联网，似乎什么都没有。:\

# android - 摩托罗拉设备上的 Android OpenCV...

> ID：10850028
> 
> 赞同：2
> 
> 时间：2012-06-01T12:11:37.370
> 
> 标签：android

我一直在读到在摩托罗拉设备上使用 OpenCV for Android 库时出现问题。这是 OpenCV 库的链接：[http](http://code.opencv.org/projects/opencv/wiki/OpenCV4Android) ://code.opencv.org/projects/opencv/wiki/OpenCV4Android这里是问题报告的链接：http : [//code.opencv.org/issues/1244](http://code.opencv.org/issues/1244)问题报告列出了修复的目标版本为 2.5（当前为 2.4）。有没有人对这些问题有任何第一手经验以及当前版本的库的任何解决方法？来自 OpenCV Google Group 似乎有一些关于使用“Java 相机”而不是“OpenCV 本机”相机的讨论。我不确定他们的意思。谢谢您的帮助！--amb

注意：几天前在gamedev上发布了这个，但到目前为止得到零回复...... [https://gamedev.stackexchange.com/questions/29801/android-opencv-on-motorola-devices](https://gamedev.stackexchange.com/questions/29801/android-opencv-on-motorola-devices)

# c# - FindControl TextBox 没有获得好的价值 Sharepoint

> ID：10850032
> 
> 赞同：0
> 
> 时间：2012-06-01T12:12:05.860
> 
> 标签：c#, asp.net, visual-studio-2010, sharepoint, sharepoint-2010

在我的asp页面中，我得到了：

```
<asp:Content ID="Main" ContentPlaceHolderID="PlaceHolderMain" runat="server">
<asp:DropDownList ID="_SCP_ddlStatutDelais" runat="server"></asp:DropDownList>

<asp:TextBox ID="_SCP_tbTypeMiseProduction" Rows="3" runat="server" TextMode="MultiLine"></asp:TextBox>

<asp:Button ID="_btSend" runat="server" Text="Envoyer" CssClass="ms-ButtonHeightWidth"
                                    onclick="_btSend_Click"/>
</asp:Content> 
```

然后，在我后面的代码中，我从数据库中获取值以在我的 Page_Load 中提供我的 TextBox 和 DDL，并且它可以工作。

然后，我想用用户修改的值更新我的数据库，所以我尝试在 TextBox 中获取文本，但我只能从我的数据库中获取文本，而 myTextBox.Text 忽略用户修改的文本。

代码背后：

```
protected void _btSend_Click(object sender, EventArgs e)
{
Control context = this.Page.Master.FindControl("PlaceHolderMain");
//Informations Database Connection etc...
reflector.Set(d[fieldtomap],rootTypeDescriptor, ref instance, ((TextBox)(context.FindControl(nodeName))).Text);
//Submit update to database
} 
```

例如，如果我从我的数据库中获取：“Test”，我将输入我的 TextBox“Test”。然后用户修改此值，然后使用按钮验证 ((TextBox)(context.FindControl(nodeName)))。文本始终包含“测试”并忽略用户的修改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:16:39.090

绑定数据时是否检查 Page.IsPostback？您应该只在初始页面加载时绑定，否则更改将被覆盖 - 就像您正在经历的那样。

# jquery - 如何避免 jquery 库冲突？

> ID：10850033
> 
> 赞同：0
> 
> 时间：2012-06-01T12:12:10.537
> 
> 标签：jquery, jquery-ui, jquery-plugins

谁能帮助我，我是jquery的新手。我为我的项目添加了三个 jquery 插件。

我想知道是否可以在单页中有多个 jquery？

告诉我这个文件会做什么：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script> 
```

请清楚说明这些文件是否相同，库和版本之间有什么区别？有什么区别吗？

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"> 
```

**1.对于球的反弹：**

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
   <script>
  $(document).ready(function() {

$("ul.menu li,ul.social_media li").mouseenter(function () {
      $(this).effect("bounce", { times:2 }, 400);
});

  });
  </script> 
```

**2.对于标签内容：**

```
<script src="javascript/jquery-1.1.3.1.pack.js" type="text/javascript"></script>
        <script src="javascript/jquery.history_remote.pack.js" type="text/javascript"></script>
        <script src="javascript/jquery.tabs.pack.js" type="text/javascript"></script>

        <link rel="stylesheet" href="css/jquery.tabs.css" type="text/css" media="print, projection, screen">

        <script type="text/javascript">
            $(function() {
              $('#container-5').tabs({ fxSlide: false, fxFade: false, fxSpeed: 'normal' });
            });
        </script> 
```

**3.滚动：**

```
 <script src="js/jquery.thumbnailScroller.js"></script>
      <script src="js/jquery-ui-1.8.13.custom.min.js"></script>
      <link href="js/jquery.thumbnailScroller.css" rel="stylesheet" />

      <script>
(function($){
window.onload=function(){   
    $("#tS1").thumbnailScroller({       
        scrollerType:"hoverAccelerate",     
        scrollerOrientation:"horizontal",       
        scrollEasing:"easeOutCirc",         
        scrollEasingAmount:400,         
        acceleration:2,         
        scrollSpeed:400,        
        noScrollCenterSpace:4,      
        autoScrolling:0,        
        autoScrollingSpeed:1000,        
        autoScrollingEasing:"easeInOutQuad",        
        autoScrollingDelay:20 
    });
    $("#tS2").thumbnailScroller({ 
        scrollerType:"clickButtons", 
        scrollerOrientation:"horizontal", 
        scrollSpeed:2, 
        scrollEasing:"easeOutCirc", 
        scrollEasingAmount:600, 
        acceleration:4, 
        scrollSpeed:800, 
        noScrollCenterSpace:10, 
        autoScrolling:0, 
        autoScrollingSpeed:2000, 
        autoScrollingEasing:"easeInOutQuad", 
        autoScrollingDelay:500 
    });
    $("#tS3").thumbnailScroller({ 
        scrollerType:"hoverPrecise", 
        scrollerOrientation:"vertical", 
        scrollSpeed:2, 
        scrollEasing:"easeOutCirc", 
        scrollEasingAmount:800, 
        acceleration:4, 
        scrollSpeed:800, 
        noScrollCenterSpace:10, 
        autoScrolling:0, 
        autoScrollingSpeed:2000, 
        autoScrollingEasing:"easeInOutQuad", 
        autoScrollingDelay:500 
    });
}
})(jQuery);
</script> 
```

这是我的代码。帮助我避免此代码中的冲突。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T16:38:36.717

[jQuery Lib Ver 1.5 （如您的问题所示）和最新的Ver 1.72](http://blog.jquery.com/2012/03/21/jquery-1-7-2-released/)之间存在一些**重大**差异。其中最大的一个是引入它的目的是取代曾经流行的和. 这些 jQuery 方法将事件绑定到文档并允许更动态的布局。关于差异存在一些混淆，我不会重新发明轮子。查看此[StackOverflow 问答](https://stackoverflow.com/questions/4579117/jquery-live-vs-delegate#answer-4579154)了解更多信息。此外，请查看[1.7 发行说明](http://blog.jquery.com/2011/11/03/jquery-1-7-released/)以获取更多信息。简而言之，.on 提高了性能并且需要更少的输入。`.on()``.live()``.delegate()`

根据第一个*真正的*问题，这两个库`jquery.min.js`&`jquery-ui.min.js`仅因目的和设计而异。提到的**第一个是***实际的* [jQuery 库](http://jquery.com/)，它提供了 JavaScript 所需的所有 .Net 样式帮助。它是使用另一个必须包含的主库。

提到的**第二个库是**[jQueryUI 库](http://jqueryui.com/)，它更像是 jQuery 的*用户界面*库。它还**依赖**于*CSS*文件（通常最好在调用 jQuery 库**之前**加载到 head中）。CSS 文件真正发挥了它**添加**到 jQuery 库中的功能的*强大功能。*它实际上扩展到了 jQuery 库，例如，您的“ *1.for ballbounce:* ”示例使用了仅通过 jQuery 受到一定限制的方法，但是使用 jQueryUI，您可以使用不同的[*缓*](http://jqueryui.com/demos/effect/easing.html)动并实现更多可能***`.effect`[](http://jqueryui.com/demos/effect/easing.html)**动画*。****

 ****把我带到你的“ ***2.for tab content:*** ”。这是非常过度扩展的，因为您已经包含了 jQueryUI 库，因此您实际上不需要包含`tabs.pack`. 您还调用了另一个版本的 jQuery。[在此处](http://jqueryui.com/demos/tabs/)查找有关 jQueryUI 选项卡的更多信息。您不需要任何额外的插件或不同的 jQuery 库。

最后，在您的最后一个示例中，您再次包含了超出必要内容的内容。使用第一个示例的包含*，*您不需要再次添加 jQuery。下面我将向您展示一个完整的重写，并尝试包含您拥有的所有内容，而不需要所有额外的“*垃圾*”。

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <link type="text/css" rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/themes/ui-lightness/jquery-ui.css">
        <!--
            Key Note:
                The following implies that you HAVE downloaded the Thumbnail Scroller plugin and placed its CSS
                File in a directory named "css" on the project directory.
                As far as I can tell it only extends the CSS of jQueryUI and therefor
                should be inserted just after the link for jQueryUI's CSS.
        -->
        <link href="css/jquery.thumbnailScroller.css" rel="stylesheet" type="text/css" />

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
        <!--
            Key Note:
                The following link ALSO implies that you downloaded this library and placed it
                in a directory named "js" on your project directory's home.
                In his blog article he show you placing this at the end and adding no conflict.
                If you are not using other Library rivals of jQuery (Prototype, MooTools, etc...),
                you don't really need to include noConflict.
                Also, adding the "framework" at the end of your HTML is a common and OLD practice.
                It's no longer the most effecient way to handle your "framework".
                It may be good still, to include your exterior work (aka, everything not in a library)
                to the end, but the framework should be the first thing that loads now a days, unless
                you like seeing weird 2 second pauses as you page is "built" after it's loaded.
        -->
        <script src="js/jquery.thumbnailScroller.js"></script>

        <script type="text/javascript">
            $(function() {
                $(".menu li, .social_media li").mouseenter(function () {
                    // altho, i'm not sure this will achieve the effect you want,
                    // yoiu might consider wrapping your list objects in a div
                    // with a class to call like:
                    // <li><div class="bounce-me">content</div></li>
                    // then simply change the previous line too:
                    // $(".bounce-me").mouseenter(...
                    $(this).effect("bounce", { times:2 }, 400);
                });

                $('#container-5').tabs({
                    fx: [{ // this basically calls jQuery's .animate command each time a tab is clicked
                        //  see http://api.jquery.com/animate/ for more info
                        duration: 'normal'
                    }]
                });

                $("#tS1").thumbnailScroller({      
                    scrollerType:"hoverAccelerate",     
                    scrollerOrientation:"horizontal",       
                    scrollEasing:"easeOutCirc",         
                    scrollEasingAmount:400,         
                    acceleration:2,         
                    scrollSpeed:400,        
                    noScrollCenterSpace:4,      
                    autoScrolling:0,        
                    autoScrollingSpeed:1000,        
                    autoScrollingEasing:"easeInOutQuad",        
                    autoScrollingDelay:20 
                });
                $("#tS2").thumbnailScroller({
                    scrollerType:"clickButtons", 
                    scrollerOrientation:"horizontal", 
                    scrollSpeed:2, 
                    scrollEasing:"easeOutCirc", 
                    scrollEasingAmount:600, 
                    acceleration:4, 
                    scrollSpeed:800, 
                    noScrollCenterSpace:10, 
                    autoScrolling:0, 
                    autoScrollingSpeed:2000, 
                    autoScrollingEasing:"easeInOutQuad", 
                    autoScrollingDelay:500 
                });
                $("#tS3").thumbnailScroller({
                    scrollerType:"hoverPrecise", 
                    scrollerOrientation:"vertical", 
                    scrollSpeed:2, 
                    scrollEasing:"easeOutCirc", 
                    scrollEasingAmount:800, 
                    acceleration:4, 
                    scrollSpeed:800, 
                    noScrollCenterSpace:10, 
                    autoScrolling:0, 
                    autoScrollingSpeed:2000, 
                    autoScrollingEasing:"easeInOutQuad", 
                    autoScrollingDelay:500 
                });
            });
        </script>
    </head>
    <body>
        <!-- CONTENT GOES HERE -->
    </body>
</html> 
```

> **最后一个有用的提示**

如果您在[Google Chrome中“](https://www.google.com/intl/en/chrome/browser/)**测试**”您的视图，请按 ctrl+shift+j 调出“类似萤火虫”的控制台窗口，并确保所有内容都正确加载。单击“控制台”选项卡以查看所有错误消息和警告以及运行您自己的测试，例如：

```
$(".click-me").click(function(e) { 
    // the following will show in console when an element 
    // having the class "click-me" is clicked
    console.log("I've been Clicked!"); 
}); 
```

> *旁注*

您可以使用“Google”的**错误**和**警告**消息*文本*来回答您的问题。不仅在 google 中，而且下次您遇到错误时，请尝试以下操作：

*通读以下内容，因为最后有一个非常有用的提示*

*   **使用ctrl+shift+j**打开 Google Chrome 的控制台
***   单击“*控制台*”选项卡以查看错误消息*   Highlight the message text and press **ctrl+c** to copy*   Go to [Google](https://www.google.com/) and Click the search bar*   Press *ctrl+v* to paste the message into the search field*   Put a "*space*" at the end of this text and type in "**site:[http://stackoverflow.com](http://stackoverflow.com)**"
    *   This will allow for your exact error message to be searched for on the StackOverflow site only, thus giving you plenty of Q&A on your exact Error!******

# jquery - jQuery UI 自动完成 IE 问题

> ID：10850034
> 
> 赞同：1
> 
> 时间：2012-06-01T12:12:12.033
> 
> 标签：jquery, json, jquery-ui, jquery-ui-autocomplete

首先我的代码

```
 $(function() {
        var suggest;
        $("#guestname").keyup(function() {

            $.ajax({
                async: true,
                url: '../include/searchGuest.php',
                dataType: 'json', 
                data: 'searchTxt=' + $(this).val() + '&festival_id=<?php echo $festival_id;?>', 
                success: function(data) {
                    suggest = data;
                    get_autocomplete(suggest);
                }   
            });
        });
    });

    function get_autocomplete(suggest) {
      $("#guestname").autocomplete({
        minLength: 3,
        source: suggest
      });
    } 
```

我使用这个 jQuery 函数来获取客人列表。用户填写一个名称为“John”的输入字段。Ajax 正在数据库中搜索名字或姓氏包含“John”的客人。在同一个脚本 (PHP) 中，我创建了一个 JSON 对象，它看起来像 ["1234:John Doe","...","..."] （数字是这个客人的 ID，猜这不重要，只想提一下）。然后我将 JSON 传递给 jQuery UI 的自动完成功能。

在 FF 和 Chrome 中一切正常，在获得 JSON 形式的结果后，输入字段下方会打开一个小窗口并显示所有匹配项。在 IE9 中，它根本不工作，但我从来没有得到完整的 JSON 对象。此外，大多数情况下，我必须写下几乎全名才能匹配 - 'Sulliv' 才能获得像'Sullivan' 这样的姓氏。在FF中写'Sul'就足够了。

在来宾数据库中大约有 8.1k 条目。IE 不能处理这么大的 JSON，还是我必须改进我的脚本。这是 IE 和 JSON 或 jQuery 的常见问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:20:25.743

您应该只初始化一次自动完成小部件，然后您可以使用该`source`选项在服务器上执行过滤：

```
$("#guestname").autocomplete({
    minLength: 3,
    source: function (request, response) {
        $.ajax({
            async: true,
            url: '../include/searchGuest.php',
            dataType: 'json', 
            data: 'searchTxt=' + request.term + '&festival_id=<?php echo $festival_id;?>', 
            success: function(data) {
                response(data)
            }   
        });        
    }
}); 
```

*   `request.term`是用户搜索的词。
*   `response`是您必须使用自动完成候选者调用的回调函数。

# node.js - 在并行刮板中最大化 urls / 秒

> ID：10850035
> 
> 赞同：0
> 
> 时间：2012-06-01T12:12:15.060
> 
> 标签：node.js, screen-scraping, web-crawler

我必须尽可能快地抓取数千个不同的网站。在单个节点进程上，我每秒能够获取 10 个 url。虽然如果我将任务分配给 10 个工作进程，我可以达到 64 个请求/秒。

为什么会这样？为什么我在单个进程上被限制为 10 个请求/秒，并且必须生成工作人员才能达到 64 个请求/秒？

*   我没有达到最大套接字/主机（agent.maxSockets）限制：所有 url 都来自唯一主机。
*   我没有达到最大文件描述符限制（AFAIK）：我的 ulimit -n 是 2560，并且 lsof 显示我的抓取工具从不使用超过 20 个文件描述符。
*   我在 sysctl.conf 中增加了 kern.maxfiles、kern.maxfilesperproc、kern.ipc.somaxconn 和 kern.ipc.maxsockets 的设置，然后重新启动。没有效果。
*   尝试增加 ulimit -n。没变。

有什么我不知道的限制吗？我在 Mac OS-X 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:32:03.387

我不认为每秒有 10 个请求的硬性限制，这似乎是 node.js 能够在单个进程上爬行的最高速度。爬行的基本原理是这样的：

1.  请求 HTML 页面。
2.  解析 HTML 页面。
3.  执行 JavaScript。
4.  做一些后期处理。
5.  加载下一个候选 URL。

在每秒 10 个请求的情况下，您在 1 秒内执行上述步骤 10 次。您的爬虫可以在单个进程（线程）上爬取的最快速度是带宽连接的速度，也就是说，如果您只执行第 1 步。如果您正在执行第 2 到第 5 步，那么您的爬取速度将是低于您的带宽连接，因为您在每个 Web 请求之间执行其他操作。

为了最大限度地提高速度，您必须确保不断执行第 1 步，直到最大限度地利用带宽连接，而要做到这一点的方法是添加更多进程（线程）。一个非常简单的例子是考虑这种情况：步骤 1 可以概括为**Fetching**，步骤 2 到 5 可以概括为**Processing**。因此，如果您有 2 个进程同时工作，一个可以在另一个正在处理的同时获取，理论上这将最大化您的吞吐量。实际上（正如您所发现的），您需要的不仅仅是两个过程，因为处理部分有多个步骤。

如果您认为平均网页约为 128 KB，那么当您使用单个进程每秒发出 10 个请求时，您的带宽使用量将为 10 Mbps。对于 64 个请求，您至少需要 64 Mbps 的带宽速度。那么您的带宽连接真的是 64 Mbps 吗？

# java - 如何在特定情况下处理变量的初始化

> ID：10850037
> 
> 赞同：1
> 
> 时间：2012-06-01T12:12:26.877
> 
> 标签：java, swing, oop, refactoring, initialization

我有一个类，其构造函数如下所示：

```
abstract class BasePanel extends JPanel {
  public BasePanel(A a) {
    // initializing fields from values passed to ctor
    this.a = a;
    // initializing gui components
    initializeComponents();
    setupPanels();
    concludeUiSetup();
  }

  // stuff
} 
```

在构造函数中，首先要使用传递给构造函数的值初始化的字段被初始化。然后依次调用 UI 设置所需的其他方法。这些方法中的两个需要在子类中被覆盖，以便特定于它们的 UI 设置。

现在考虑一个`FooPanel`扩展的类`BasePanel`。它在其构造函数中需要更多的初始化参数。

```
class FooPanel extends BasePanel {
  public FooPanel(A a, B b) {
    super(a);
    this.b = b;
  }

  @Override
  public void initializeComponents() {
    super.initializeComponents();
    // I require b here, but oops, b is not initialized at this point, and so 
    // this will throw NPE.
    someTextField.setText(b.get());
  }

  // stuff
} 
```

`initializeComponents`这里的方法 requires `b`，不幸的是当时没有初始化。

重组此代码的适当方法是什么，以便：

*   需要的字段是在需要之前设置的。
*   使用`FooPanel`（和其他面板）的代码并没有因为这种变化而变得杂乱无章。

非常感谢任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T12:29:17.370

您不应该从构造函数中调用可覆盖的方法。在这种情况下，您应该做的是定义一个仅初始化实例字段的构造函数，并将 GUI 的初始化放在一个可覆盖的 initialize() 方法中，该方法不会从构造函数中调用。

因此，要构建 FooPanel，您可以：

```
FooPanel p = new FooPanel(a, b);
p.initialize(); 
```

如果您不强制 FooPanel 的所有客户端都这样做，您可以将构造函数定义为私有，并提供一个工厂方法：

```
public static FooPanel create(A a, B b) {
    FooPanel p = new FooPanel(a, b);
    p.initialize();
    return p;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-01T12:27:16.317

基本上，尽量避免在构造函数中调用虚拟（即可覆盖）方法。它会导致这种问题。如果要在构造函数中调用虚方法，则需要记录它——并且很可能避免在其他任何地方调用它。必须编写这样的方法来处理尚未完全初始化的对象，这使它处于尴尬的境地。

如果没有更多信息，很难知道给出更具体的建议，但我也鼓励你在可能的情况下接受组合而不是继承——或者至少总是考虑它，并决定最优雅的方法。

如果你真的想在这里继承，你真的需要`initializeComponents`吗？每个类不能在自己的构造函数中进行自己的初始化，而不依赖于其子类状态中的任何东西吗？

# c# - 获取条码阅读器值表单后台监控

> ID：10850050
> 
> 赞同：10
> 
> 时间：2012-06-01T12:13:52.170
> 
> 标签：c#, .net, winforms

我想用 c# 语言创建一个会计程序。我想使用条形码阅读器在商店中搜索产品（这对我的程序来说是可选的）现在，如果卖家使用条形码阅读器，则在主要形式中获取处理方法或事件的条形码值；如何在表单背景（无文本框）中获取处理方法或事件的条形码值？

注意：我的条码阅读器是 HID（USB 接口）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-01T12:18:09.830

条形码设备的行为类似于键盘。当您在文本框中获得焦点时，它会将字符发送到文本框，就像您从键盘键入它们一样。

如果您不想使用文本框，则需要订阅键盘事件处理程序来捕获条形码流。

Form1.InitializeComponent()：

```
this.KeyPress += new System.Windows.Forms.KeyPressEventHandler(this.Form1_KeyPress); 
```

处理程序和支持项目：

```
DateTime _lastKeystroke = new DateTime(0);
List<char> _barcode = new List<char>(10);

private void Form1_KeyPress(object sender, KeyPressEventArgs e)
{
    // check timing (keystrokes within 100 ms)
    TimeSpan elapsed = (DateTime.Now - _lastKeystroke);
    if (elapsed.TotalMilliseconds > 100)
        _barcode.Clear();

    // record keystroke & timestamp
    _barcode.Add(e.KeyChar);
    _lastKeystroke = DateTime.Now;

    // process barcode
    if (e.KeyChar == 13 && _barcode.Count > 0) {
        string msg = new String(_barcode.ToArray());
        MessageBox.Show(msg);
        _barcode.Clear();
    }
} 
```

您必须跟踪“击键”并注意使用条形码流发送的“回车”。这可以很容易地在数组中完成。为了区分用户击键和条形码击键，您可以做的一个肮脏的技巧是跟踪击键的时间。

例如，如果你得到一个间隔小于 100 毫秒的击键流，以回车结尾，你可以假设它是一个条形码并进行相应的处理。

或者，如果您的条形码扫描仪是可编程的，您也可以发送特殊字符或序列。

# c++ - Python：有一个用户定义的函数作为输入，同时保持源代码不可访问？

> ID：10850052
> 
> 赞同：2
> 
> 时间：2012-06-01T12:13:57.460
> 
> 标签：c++, python, user-defined-functions, source-code-protection

我需要编写一个将用户定义的函数（用 python 编写）作为输入的软件。

用户定义的函数接受一个数字向量并返回一个数字向量。我的软件将多次调用此用户函数（以与根搜索相同的方式），然后返回一些结果。

我的软件的源代码将用 python（它将使用 *.pyd）或 C++ 编写，并且必须对用户隐藏。

实现这一目标的最佳方法是什么（如果有的话......）？理想情况下，我会在 *.exe 中编译我的 python 代码，并且用户会将他/她的函数复制粘贴到文本框中，但是从 python 解释器中使用它也应该是可以接受的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T12:54:32.323

这是一个非常有限的示例，它展示了您如何做到这一点——当然，这里有一些限制——主要是，这仅在用户只输入一个函数时才有效。如果他们写的字符串看起来更像：

```
a='garbage'
def foo():pass 
```

甚至：

```
def bar():
    return foobar()

def foobar():
    return "foobar is a cool word, don't you think?" 
```

那你就不走运了。（换句话说，这假设用户只向 run_user 函数的命名空间添加一件事）。当然，您可以检查它并引发异常，或者如果结果是用户添加了太多...您也可以返回该函数并按照 gauden 的建议使用它。

```
def run_user(S):
    #S is the user's function as a string.
    lvars=None #make sure the name is in locals()
    lvars=set(locals())
    exec(S)  #exec isn't usually a good idea -- but I guess you're a very trusting person.
    usr_namespace=list(set(locals())-lvars)
    usr_func_name=usr_namespace[0]
    if(len(usr_namespace)>1):
        raise ValueError("User input too much into the namespace!")

    usr_func=locals()[usr_func_name]
    usr_func()  #comment this out if you don't want to run the function immediately
    return usr_func

usr_string="""
def foo():
     a="Blah"
     print "Hello World! "+a
"""

func_handle=run_user(usr_string)  #prints "Hello World! Blah"
#and to demonstrate that we can pass a handle to the function around:...
func_handle() #prints "Hello World! Blah" again. 
```

请注意，您可以使用 python 3`exec`或 python 2更安全地执行此操作，您可以通过将字典作为全局字典`execfile`传递来限制用户函数的命名空间`{'__builtins__':None}`

```
#python3.x
allowed=vars(__builtins__).copy()
allowed['__import__']=None
exec("import os",{'__builtins__':None},allowed)  #raises ImportError
exec("print(abs(-4))",{'__builtins__':None},allowed) #prints 4 as you'd expect. 
```

`execfile`如果您将字符串写入临时文件，我希望在 python2.x 下可以使用相同的东西......

**编辑**（解决下面的评论）

您提供的示例`eval`可以更简单地完成：

```
a=5
b=eval('a+5')  #b == 10 
```

但是，这不是您要求的。您要求的是用户可以编写一个*函数*，例如：

```
def f(a):
    return a+5 
```

前一种情况可以，但用户需要知道变量名是'a'。

```
a=5
b=eval('x+5') #won't work -- x isn't defined 
```

他们还需要知道如何添加向量——（如果您使用的是微不足道的 numpy 数组，但我想我会提到它以防万一）。而且，如果没有大量的工作和令人头疼的问题，他们就无法制作复杂的表达式（使用多个条件、循环等的长表达式）。

后一种情况要好一些（在我看来），因为它更通用。您可以使用我描述的方法获取该函数（删除其中我实际运行该函数的部分）并且用户可以使用他们想要的任何变量名称 - 然后您只需使用他们的函数。他们还可以执行循环之类的操作，并使用比在一行中使用`eval`. 您为此付出的唯一一件事是用户需要编写`def func(...):`，`return some_value`最后，如果他们知道 python 应该是完全直观的。

```
ss="""
def foo(x):
    return 5+x
"""

a=5
func=run_user(ss)
result=func(a)     #result = 10 
```

这还有一个好处，就是每次调用函数时都不需要重新解析字符串。拥有`func`后，您可以随心所欲地使用它。另请注意，使用我的解决方案，您甚至不需要知道用户定义的函数的名称。一旦有了函数对象，名称就无关紧要了。

# x86 - QWORD 使用 SIMD SSE...AVX 将顺序 7 位混洗到字节对齐

> ID：10850054
> 
> 赞同：3
> 
> 时间：2012-06-01T12:14:09.400
> 
> 标签：x86, bit-manipulation, sse, simd, avx

我想知道在任何 SIMD 指令系列中是否可以执行以下操作。

我有一个 63 位有效位（从不为负）的 qword 输入。从 LSB 开始的每个连续 7 位都随机对齐到一个字节，左填充为 1（除了最重要的非零字节）。为了说明，为了清楚起见，我将使用字母。

结果只有重要字节，因此大小为 0 - 9，它被转换为字节数组。

```
In:         0|kjihgfe|dcbaZYX|WVUTSRQ|PONMLKJ|IHGFEDC|BAzyxwv|utsrqpo|nmlkjih|gfedcba
Out: 0kjihgfe|1dcbaZYX|1WVUTSRQ|1PONMLKJ|1IHGFEDC|1BAzyxwv|1utsrqpo|1nmlkjih|1gfedcba 
```

尺寸 = 9

```
In:  00|nmlkjih|gfedcba
Out: |0nmlkjih|1gfedcba 
```

大小 = 2

我明白填充是分开的。洗牌对齐是我的问题。这可能吗？

**编辑 2**

这是我更新的代码。在单线程 Core 2 Duo 2 GHz，64 位上获得持续 46 M / sec 的随机长度输入。

```
private static int DecodeIS8(long j, ref byte[] result)
{
    if (j <= 0)
    {
        return 0;
    }

    int size;

    // neater code: gives something to break out of
    while (true)
    {
        result[0] = (byte)((j & 0x7F) | 0x80);
        size = 0;
        j >>= 7;

        if (j == 0) break;

        result[1] = (byte)((j & 0x7F) | 0x80);
        size++;
        j >>= 7;

        if (j == 0) break;

        result[2] = (byte)((j & 0x7F) | 0x80);
        size++;
        j >>= 7;

        if (j == 0) break;

        result[3] = (byte)((j & 0x7F) | 0x80);
        size++;
        j >>= 7;

        if (j == 0) break;

        result[4] = (byte)((j & 0x7F) | 0x80);
        size++;
        j >>= 7;

        if (j == 0) break;

        result[5] = (byte)((j & 0x7F) | 0x80);
        size++;
        j >>= 7;

        if (j == 0) break;

        result[6] = (byte)((j & 0x7F) | 0x80);
        size++;
        j >>= 7;

        if (j == 0) break;

        result[7] = (byte)((j & 0x7F) | 0x80);
        size++;
        j >>= 7;

        if (j == 0) break;

        result[8] = (byte)j;

        return 9;
    }

    result[size] ^= 0x80;

    return size + 1;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T04:49:06.360

是的，可以使用 MMX/SSE 的`pmullw`指令（内在函数：）`_mm_mullo_pi16`来执行每个元素的移位。

基本思想是使用 AND 指令提取交替的 7 位元素并执行将`pmullw`元素移位到适当位置。这将完成一半元素的任务，因此需要通过几个额外的班次重复该过程。

```
#include <stdio.h>
#include <stdint.h>
#include <mmintrin.h>

__m64 f(__m64 input) {
    static const __m64 mask = (__m64) 0xfe03f80fe03f80UL;
    static const __m64 multiplier = (__m64) 0x0080002000080002UL;

    __m64 t0 = _mm_and_si64 (input, mask);
    __m64 t1 = _mm_and_si64 (_mm_srli_si64 (input, 7), mask);

    t0 = _mm_mullo_pi16 (t0, multiplier);
    t1 = _mm_mullo_pi16 (t1, multiplier);

    __m64 res =  _mm_or_si64 (t0, _mm_slli_si64 (t1, 8));
    /* set most significant bits, except for in most significant byte */
    return _mm_or_si64 (res, (__m64) 0x0080808080808080UL);
}

int main(int argc, char *argv[])
{
    int i;
    typedef union {
            __m64 m64;
            unsigned char _8x8[8];
    } type_t;

    /* 0x7f7e7c7870608080 = {127, 63, 31, 15, 7, 3, 2, 1, 0} */
    type_t res0 = { .m64 = f((__m64) 0x7f7e7c7870608080UL) };

    for (i = 0; i < 8; i++) {
            printf("%3u ", res0._8x8[i]);
    }
    puts("");

    return 0;
} 
```

提取交替的`mask`7 位元素。这`multiplier`是一个常数，它允许我们指定每个元素的移位。它来自于查看被屏蔽的输入：

```
00000000|dcbaZYX0|000000PO|NMLKJ000|0000BAzy|xwv00000|00nmlkji|h0000000 
```

并意识到

```
00000000|dcbaZYX0 needs to be shifted by 7 (or multiplied by 2^7, 128, 0x0080)
000000PO|NMLKJ000 needs to be shifted by 5 (or multiplied by 2^5,  32, 0x0020)
0000BAzy|xwv00000 needs to be shifted by 3 (or multiplied by 2^3,   8, 0x0008)
00nmlkji|h0000000 needs to be shifted by 1 (or multiplied by 2^1,   2, 0x0002) 
```

此函数一次写入 8 个字节（而不是 9 个 7 位元素解包到的 9 个字节），因此每次迭代后您只需将源指针前移 7 个字节。正因为如此，转换到 SSE2 有点复杂。

我认为不可能使用不同的掩码和乘法器`t1`来避免移位，因为`t1`' 的元素将跨越 16 位边界，这将阻止`pmullw`工作。但是，仍然有可能以某种方式进行优化。

我没有对此进行基准测试，但我怀疑它比您的标量版本快得多。如果您对其进行基准测试，请发布结果。我很想见他们。

总而言之，该算法是 2 次移位、2 次或、2 次与，以及两次乘法（和几次移动）以生成 8 字节。

# performance - 具有自定义字段的实体数据库性能设计

> ID：10850055
> 
> 赞同：2
> 
> 时间：2012-06-01T12:14:09.503
> 
> 标签：performance, postgresql, database-design, entity-relationship, relationships

我需要构建一个应用程序，其中有通用实体（比如文章、页面、*节点*），用户可以在其中添加自定义字段。

我已经看到了最流行的 php CMS（wp、drupal）用来实现这个目标的方法；它们都有包含最少字段（例如标题和正文）的*基*表，然后将所有其他字段委托给其他表，例如：

```
table node
id | title | body

table field_foo
node_id | field_type | field_value

table field_bar
node_id | field_type | field_value
// and so on 
```

这在完整的 mvc 环境中是非常合乎逻辑的；字段控制器分别处理每个字段。

但是谈到性能，加载单个节点将需要许多查询 - 或许多连接。

我采取了不同的方法（即使我的应用程序没有提供任何基本字段）：对于每个字段，我在基本表上添加一个新列，它将存储一个*原始*值，然后为每个需要它的字段创建一个表（多个例如字段，或对其他实体的引用）和仅具有索引 entity_id |的*关系表* field_id（该表实际上执行其他类型的工作，如跟踪版本和实体之间的关系类型）

因此，通过一个查询，我从一个实体中获取所有*原始*数据，然后字段控制器知道（在需要时）如何以及在何处加载该字段的*实际*值。

*数据*表中的列类型（table_entity_data）是字段数据的最佳猜测：对于文本是文本，对于十进制是十进制；仅对于多个字段（在该表之外具有它们的值）是数组（并且真正的 data_type 在 _field_foo_value.entity_value_ 列中）

假设实体结构不会经常改变，我试图规范化结构..

鉴于其他大型项目以非常不同的方式处理这个问题，我开始怀疑我的实现，并想知道我的*hibryd*结构会发生什么样的问题：

```
table entity
id

table entity_data
entity_id | field_foo_rav_value | field_bar_raw_value

table relations
entity_id | entity_field_id | field_id_value

table field_foo_value
field_value_id | entity_value

// lets say field_bar is a single text field, there no will be another table:
// entity_data.field_bar_raw_value contains the real value 
```

有什么建议吗？

ps：我知道这个问题很笼统，如果不合适，请随时标记关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:29:51.787

看起来你正在重新发明 EAV

[http://www.google.com/search?q=entity+attribute+value+antipattern](http://www.google.com/search?q=entity+attribute+value+antipattern)

缺点是你抛弃了关系数据库可以提供的所有类型安全和结构。

在理想的世界中，您可能想要以下之一：

1.  允许建立一个合适的表
2.  使用非关系数据库

# attributes - 如何使用设置 struts ActionForm 属性 ?

> ID：10850057
> 
> 赞同：0
> 
> 时间：2012-06-01T12:14:21.407
> 
> 标签：attributes, struts, hyperlink, actionform

我需要做这样的事情（设置 ActionForm 属性）：

```
<html:form action="Link.do?method=editNews">
   <html:hidden property="idNews" value="${news.newsMessage.idNews}" />
   <html:submit value="EDIT"/>      
</html:form> 
```

但是在`<html:link>`或常规的 a-href 标签中。所以我不希望这个参数作为请求参数出现在我的链接中。是否可以？

* * *

PS`idNews`是我的 ActionForm 类中的参数，它具有 setter 和 getter。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:24:44.217

不，这是不可能的。链接执行 GET 请求，而 GET 请求向服务器发送信息的唯一方法是使用出现在 URL 中的请求参数。

您唯一能做的就是让您的链接调用 JavaSCript 函数，该函数使用 POST 提交隐藏表单。但它很丑。

为什么你害怕让参数在 URL 中可见？您是否知道任何人都可以查看您的 HTML 页面的源代码并看到此处的隐藏字段？

# jquery-ui-sortable - jQuery sortable：如何自动排序 在可排序的 上课？

> ID：10850060
> 
> 赞同：0
> 
> 时间：2012-06-01T12:14:28.713
> 
> 标签：jquery-ui-sortable

我`<li class='A'>`在#a sortable div 中回显了一些或class='B' 或class='C'。然后用户将它们移动到#b 可排序的 div 中。我需要在#b 中按**类的****desc**字母顺序（C->B->A）`<li>` **自动**排序，第二次按**内容**的字母顺序（）。****`<li>`**`<li class='X'>content</li>`******

 ******我如何编写脚本`<head>`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:21:39.390

jQuery UI 有很好的可排序的东西。这是[演示](http://jqueryui.com/demos/sortable/)。

尝试使用[更新事件](http://jqueryui.com/demos/sortable/#event-update)来强制执行您的排序。

```
$( ".selector" ).sortable({
 update: function(event, ui) {
   $("find the LIs you want").sort(
     function(a, b){
       var aName = a.name.toLowerCase();
       var bName = b.name.toLowerCase(); 
       return ((aName < bName) ? -1 : ((aName > bName) ? 1 : 0));
    });
 }
}); 
```

排序代码来自[这个答案](https://stackoverflow.com/questions/5503900/how-to-sort-an-array-of-objects-with-jquery-or-javascript)。******

# java - 用鼠标操作弧 (JavaFX 2)

> ID：10850064
> 
> 赞同：2
> 
> 时间：2012-06-01T12:15:00.713
> 
> 标签：java, 2d, javafx

我在使用鼠标拖动事件在 javafx 中操作 Arc 形状时遇到问题

我有一个使用以下参数定义的 Arc：

*   radiusX 和 radiusY ：此弧为部分截面的完整椭圆的水平和垂直半径
*   centerX,centerY : 圆弧的中心点
*   startAngle：圆弧的起始角度（相对于水平轴）
*   长度：弧的角度范围，以度为单位

所以我需要的是在拖动时使弧的起始角度“跟随”鼠标移动：

当用户按下弧的起点（位于 startAngle 上）并拖动鼠标时，我需要计算由水平轴和从中心到鼠标位置的线形成的新起始角度

基本上问题是在给定一个点（鼠标位置）和其他给定参数（中心、长轴和短轴）的情况下计算弧的起始角度

我实际上正在做的是用 Math.atan2 函数计算角度

newStartAngle = atan2(xMouse, yMouse) (假设中心 x, y 在 0,0)

但仅当圆弧为圆形时才有效（radiusX = radiusY）

另一种说法是：我需要弧的起点始终在从中心到鼠标位置的线上（因此我需要不断更新起点角度以使其跟随鼠标旋转运动）。（我希望我已经说清楚了）

这是样本的完整来源

```
import javafx.stage.Stage;
...

public class Main extends Application {

@Override
public void start(Stage primaryStage) {
    Pane pane = new Pane();

    Group designer = createDesigner();
    designer.setLayoutX(100);
    designer.setLayoutY(200);
    pane.getChildren().add(designer);

    Scene sc = new Scene(pane, 600, 600);
    primaryStage.setScene(sc);
    primaryStage.show();
}

public static final double RX = 100;
public static final double RY = 50;
public static final double S_ANGLE = 45;
public static final double ARC_LENGTH = 90;

private Arc arc;
private Circle handle;
private Line connection;
double xMouse,yMouse;

public Group createDesigner() {

    arc = new Arc();        
    arc.setRadiusX(RX);
    arc.setRadiusY(RY); 
    arc.setStartAngle(S_ANGLE);
    arc.setLength(ARC_LENGTH);
    arc.setFill(Color.LIGHTBLUE);
    arc.setType(ArcType.ROUND);

    handle = new Circle();
    handle.setRadius(5);    
    handle.setStroke(Color.BLACK);
    handle.setFill(Color.TRANSPARENT);

    handle.setCenterX(
            RX * Math.cos(Math.toRadians(S_ANGLE))
        );
    handle.setCenterY(
            -RY * Math.cos(Math.toRadians(S_ANGLE))
        );

    connection = new Line();
    connection.startXProperty().bind(arc.centerXProperty());
    connection.startYProperty().bind(arc.centerYProperty());
    connection.endXProperty().bind(handle.centerXProperty());
    connection.endYProperty().bind(handle.centerYProperty());

    handle.setOnMouseDragged(new EventHandler<MouseEvent>() {

        @Override
        public void handle(MouseEvent event) {

            xMouse = event.getX();
            yMouse = event.getY();

            handle.setCenterX(xMouse);
            handle.setCenterY(yMouse);

           double angleInRadians = Math.atan2(-yMouse, xMouse);

            arc.setStartAngle(Math.toDegrees(angleInRadians));

        }

    });

    return new Group(arc, connection, handle);

}

public static void main(String[] args) {
    launch(args);
}

} 
```

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T16:10:04.690

好吧，我解决了它，只需将 xMouse 和 yMouse 除以主要和次要斧头即可使其正常工作

```
newStartAngle = Math.atan2(-yMouse/radiusY, xMouse/radiusX) 
//assume center x, y at 0,0 
```

# resize - jQuery Masonry 顶部位置错误

> ID：10850066
> 
> 赞同：7
> 
> 时间：2012-06-01T12:15:17.600
> 
> 标签：resize, position, twitter-bootstrap, jquery-masonry

我在特定页面上使用具有固定布局的 Twitter Bootstrap 和 jQuery Masonry。

它正在工作，但是从第二行开始，div 的顶部位置被错误计算，并且部分覆盖了第一行的元素。

看起来脚本在重新排列元素之前退出了。

奇怪的是，当我在 Chrome 中打开检查器或稍微调整视口大小时，div 会跳到正确的位置。刷新页面有时会有所帮助，有时不会...

我的砌体脚本：

```
jQuery(document).ready(function(){
    jQuery('.span9').masonry({
        itemSelector: '.span3',
        columnWidth: function( containerWidth ) {
        return containerWidth / 3;
        }
    });
}); 
```

这是正常行为吗？我应该添加`window.resize`到上面的脚本吗？

将砌体脚本放置在页面本身或页眉中，页脚不会改变它的行为。

我在 jQuery 之后调用 masonry.js，在任何其他 Bootstrap js 之前。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-04T18:56:46.323

只需阅读此处的帮助部分[http://masonry.desandro.com/docs/help.html](http://masonry.desandro.com/docs/help.html)

脚本在所有图像加载之前运行，您必须在加载窗口后触发它

```
$(window).load(function(){
  $('#container').masonry({
    // options...
  });
}); 
```

# apache - 如何为 solr 指定 JAVA_OPTS？

> ID：10850067
> 
> 赞同：2
> 
> 时间：2012-06-01T12:15:18.303
> 
> 标签：apache, tomcat, solr, java-opts

我在 apache solr3.6（天真的用户）上使用，并且在 solr 文件夹的多核中有数据。

```
D:\setup\apache-solr-3.6.0\example\multicore 
```

我正在使用的当前版本的 tomcat`startup.bat`在其 bin 文件夹中，因此我`JAVA_OPTS`在其中指定如下：

```
rem Get remaining unshifted command line arguments and save them in the

set CMD_LINE_ARGS=
:setArgs
if ""%1""=="""" goto doneSetArgs
set CMD_LINE_ARGS=%CMD_LINE_ARGS% %1
shift
goto setArgs
:doneSetArgs

set "JAVA_OPTS=%JAVA_OPTS% -Dsolr.solr.home=D:\setup\apache-solr-3.6.0\example\multicore"

call "%EXECUTABLE%" start %CMD_LINE_ARGS%

:end 
```

但是我最近下载了一个新版本的 tomcat，其中不包含任何`startup.bat`内容，而是包含一些 .exe 文件（可能是 tomcat.exe），双击它将启动 tomcat 服务器。

那么我该如何指定`JAVA_OPTS`和`-Dsolr`现在呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T19:31:16.633

正如@Bhanu 所说...转到tomcat安装文件夹，在里面`Apache Software Foundation\Tomcat 6.0\bin`你会发现`tomcat6w.exe`运行它。它将打开tomcat配置窗口![在此处输入图像描述](../Images/27a8736eee850008bb4ae31b5a93925e.png)

打开 java 选项卡并将 java 选项中的多核路径指定为`-Dsolr.solr.home=D:\setup\apache-solr-3.6.0\example\multicore`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:47:47.483

有关使用 Tomcat 设置 Solr Home 选项，请参阅[详细信息](http://wiki.apache.org/solr/SolrTomcat#Configuring_Solr_Home_with_JNDI)。

此外，[SolrTomcat 上将提供更多信息](http://wiki.apache.org/solr/SolrTomcat)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T19:02:46.953

在较新版本的 tomcat 中说 tomcat7，您会在**tomcat/bin中找到****tomcat7w.exe**。运行它选择 Java 选项卡并在 Java 选项窗格中写下您的路径。与 JNDI 方式相比，这很容易。

# php - while 循环的总记录

> ID：10850069
> 
> 赞同：0
> 
> 时间：2012-06-01T12:15:20.633
> 
> 标签：php

我有这个代码

```
while($row=mysql_fetch_array($qu2)){
    $login_time=$row[login_time];
    $logout_time=$row[logout_time];
    $totlawork=($logout_time)-($login_time);
    $lossawork=($login_time)-('08:00:00');   

    echo '<tr>';
    echo '<td class="xtd"><div align="center">'.$cnt.'</div></td>';
    echo '<td class="xtd"><div align="center">'.$row[full_name] .'</div></td>';
    echo '<td class="xtd"><div align="center">'.$row[salary].'</div></td>';
    echo'<td class="xtd"><div align="center">'.$totlawork.'</div></td>';
    echo '<td class="xtd"><div align="center">'.$lossawork.'</div></td>';
    echo '</tr>';

    $cnt++;
} 
```

我不会在所有记录上获得 $lossawork 的总和我该怎么做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:20:56.550

```
$lossawork_total = 0; // set total to 0
while($row=mysql_fetch_array($qu2)){
    $login_time=$row[login_time];
    $logout_time=$row[logout_time];
    $totlawork=($logout_time)-($login_time);
    $lossawork=($login_time)-('08:00:00');     
    echo '<tr>';
    echo '<td class="xtd"><div align="center">'.$cnt.'</div></td>';
    echo '<td class="xtd"><div align="center">'.$row[full_name] .'</div></td>';
    echo '<td class="xtd"><div align="center">'.$row[salary].'</div></td>';
    echo'<td class="xtd"><div align="center">'.$totlawork.'</div></td>';
    echo '<td class="xtd"><div align="center">'.$lossawork.'</div></td>';
    echo '</tr>';
    $cnt++;
    $lossawork_total += $lossawork; // add this lossawork to total
}
echo $lossawork_total; // display total 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T12:19:38.970

在循环结束时，将 lossawork 添加到另一个计数器并在页面上显示该计数器，它会在循环运行时为您添加所有 lossawork。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T12:19:48.697

在 while 循环之外使用一个变量，这里是 ( `$sum`)

```
$sum = 0;

while(...){
...
...
...
...

$sum += $lossawork;

}

echo $sum; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T12:20:49.460

问题中需要更多代码才能完全回答，但根据我对问题的理解，您想要的可以实现如下：

```
//Declare a variable to store the sum and initialize it to 0
$sum_lossawork = 0;

while($row=mysql_fetch_array($qu2)){

    ...
    ...
    $lossawork= ...

    //For each row in the data set add $lossawork to the sum
    $sum_lossawork += $lossawork;

    ...
    ... 

    $cnt++;
}

echo $sum_lossawork; 
```

# c++ - .NET 和 Linux 之间的 GUID/UUID 兼容性问题

> ID：10850075
> 
> 赞同：1
> 
> 时间：2012-06-01T12:15:53.583
> 
> 标签：c++, .net, linux, guid, uuid

在我的 c++ 程序中，我正在使用 debian linux 的 uuid 包生成一个 uuid 值，它返回一个大小为 16 的无符号字符数组，它是 uuid_t 类型的。然后我将其转换为字符串并将其打印到控制台。

然后我获取相同的字节数组并通过网络将其发送到 Windows 机器。Windows 机器使用 .net 的 GUID 类型，并使用相同的字节数组创建 GUID 对象。然后我使用 GUID 的 ToString 方法再次将其打印到控制台。令人惊讶的是，相同的字节数组在 Linux 和 .Net 下具有不同的字符串表示形式，尽管它们几乎相似。

这是一个例子：

字节数组：

101,208,176,173,236,192,64,86,191,214,132,2,213,232,143,247

Linux：65d0b0ad-ecc0-4056-bfd6-8402d5e88ff7

.NET：adb0d065-c0ec-5640-bfd6-8402d5e88ff7

您可能会注意到它们非常相似，最后一部分是相同的，第一部分使用相同的数字，只是数字的顺序不同。我按照上面解释的方式创建的每个 UUID 都遵循相同的模式，这让我认为存在字节顺序差异。

如何在 linux 中创建 UUID 值并使用相同的字节数组具有相同的字符串表示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T11:01:27.937

根据[此](http://lists.gnu.org/archive/html/bug-parted/2002-01/msg00099.html)消息和[此](https://www.virtualbox.org/pipermail/vbox-dev/2008-August/000723.html)消息，问题实际上在于对 GUID/UUID 应该是 Big-Endian 还是 Little-Endian 的不同理解。看起来微软的实现将它们视为大端（至少在英特尔平台上），但`uuid_unparse`似乎是小端。[Wiki](http://en.wikipedia.org/wiki/Guid)说 GUID（这是 Microsoft 的 UUID）遵循[RFC 4122，第 4.1.2 节](http://www.ietf.org/rfc/rfc4122.txt)，这似乎要求 Big-Endian 排序。

因此，这是实现之间的明显不一致。作为一种解决方法，我建议以字符串格式在系统之间交换数据，这在两个系统之间似乎是一致的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T14:00:06.240

不幸的是，您不能拥有相同的字节数组并*生成*`Guid.ToString`与 Linux 字符串匹配的字符串。

您需要决定优先考虑哪一个：

```
var dotNetGuid = new Guid(new byte[] { 101, 208, 176, 173, 236, 192, 64, 86,
                                       191, 214, 132, 2, 213, 232, 143, 247 });

// option 1 - keep the existing guid's byte array intact
//            and create a new ToUnixString method to display it as-required

Console.WriteLine(dotNetGuid.ToString());      // adb0d065-c0ec-5640-bfd6-8402d5e88ff7
Console.WriteLine(dotNetGuid.ToUnixString());  // 65d0b0ad-ecc0-4056-bfd6-8402d5e88ff7

// option 2 - create a new guid by re-arranging the existing guid's byte array
//            and then use the standard ToString method

var unixGuid = dotNetGuid.ChangeByteOrder();
Console.WriteLine(dotNetGuid.ToString());  // adb0d065-c0ec-5640-bfd6-8402d5e88ff7
Console.WriteLine(unixGuid.ToString());    // 65d0b0ad-ecc0-4056-bfd6-8402d5e88ff7

// ...

public static class GuidExtensions
{
    public static string ToUnixString(this Guid guid,
        string format = "D", IFormatProvider provider = null)
    {
        return guid.ChangeByteOrder().ToString(format, provider);
    }

    public static Guid ChangeByteOrder(this Guid guid)
    {
        var s = guid.ToByteArray();
        var d = new byte[]
                    {
                        s[3], s[2], s[1], s[0], s[5], s[4], s[7], s[6],
                        s[8], s[9], s[10], s[11], s[12], s[13], s[14], s[15]
                    };

        return new Guid(d);
    }
} 
```

# php - 更改一个值会影响另一个值

> ID：10850078
> 
> 赞同：0
> 
> 时间：2012-06-01T12:16:11.477
> 
> 标签：php

请查看以下内容：

```
foreach($a_Header['Details'] as $i_Detail => &$a_Detail)
    {
    echo "{$a_Detail['VEH_TREAD_OFF']}\n";

    // Make a back-up of the value
    $BAK_TREAD_OFF = $a_Detail['VEH_TREAD_OFF'];

    // Copy some data from the saved header
    foreach(array
        (
        'POD_QTYORD',
        'VEH_TREAD_OFF',
        'RPM_SCRM_FIXEDPRICE',
        'RPM_TRM_FIXEDPRICE',
        'RPM_TRM_COSTPERMM',
        'RPM_CTS_CASINGCOST',
        'CHARGE_DESC',
        'Hide',
        ) as $s_Column)
        {
        $a_Header['Details'][$i_Detail][$s_Column] = $a_SavedHeader['Details'][$i_Detail][$s_Column];
        }

    echo "{$a_Detail['VEH_TREAD_OFF']}\n";

    // Now restore our value
    $a_Detail['VEH_TREAD_OFF'] = $BAK_TREAD_OFF;
    } 
```

您可以看到，在进入 for 循环之前，我已经备份了一个值，之后我将恢复该值。

这是因为由于某种原因，它在循环过程中丢失了。

无论如何，我都不是 PHP 专家，但这让我感到困惑不已，因为我不明白为什么修改一个变量会影响另一个变量，除非 PHP 中有虫洞！

有人能告诉我为什么会发生这种情况吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:41:40.340

```
$i_Detail => &$a_Detail 
```

现在`$a_Detail`是对`$a_Header['Details'][$i_Detail]`. 两个变量都指向一个值。`&`如果您不想这样做，请不要使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:37:33.847

您的代码示例根本不会影响 $a_detail 。你确定，这是对这个变量的唯一引用吗？你使用像extract()这样的东西吗？

# php - 将页眉和页脚分离到自己的文件中

> ID：10850082
> 
> 赞同：1
> 
> 时间：2012-06-01T12:16:39.363
> 
> 标签：php, javascript, user-interface, usability

问：我已经阅读了很多教程/书籍，这些教程/书籍教导将页眉和页脚放入自己的文件中，并使用 php 将它们包含在内容页面中。

但是，如果您在这些页眉或页脚中运行 javascript——这不是“糟糕”的设计吗——或者它真的不重要吗？

我想如果页面不需要javascript，我会取出javascript，而且我真的不介意CTRL+C。但是，我可以看到仅在一个文件而不是所有文件中进行更改的有用性和效率。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:19:11.787

您应该开始使用一些模板引擎。开始的东西：[Twig](http://twig.sensiolabs.org/)和[Smarty](http://www.smarty.net/)

您会喜欢的最重要的功能称为[模板继承](http://twig.sensiolabs.org/doc/templates.html#template-inheritance)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:19:30.097

我总是将您的页眉和页脚文件分开，否则这是一场噩梦！

只需在需要时加载 JS，如果使用 PHP，只需检查 $_SERVER 变量 - [http://uk.php.net/manual/en/reserved.variables.server.php](http://uk.php.net/manual/en/reserved.variables.server.php)

# winforms - Settings.settings 存储在哪里？在 app.config 中找不到它？

> ID：10850083
> 
> 赞同：0
> 
> 时间：2012-06-01T12:16:46.500
> 
> 标签：winforms, configuration, settings, settings.settings

**你好，**

我在我的 Settings.setting 文件（winform 应用程序）中存储了一些设置，我可以在 App.config 中看到它们中的大部分都保存在 applicationSettings 和 userSettings 下。

然而，有一个 applicationSetting 不存在吗？我还检查了 C:\Users[username]\AppData[ApplicationName] Local(windows7) 但设置不存在？

我可以像这样手动将它添加到 app.config 中吗：

```
<applicationSettings>
    <MyApp.Client.Main.Properties.Settings>
      <setting name="MySetting" serializeAs="String">
        <value>C:\temp</value>
      </setting>
    </MyApp.Client.Main.Properties.Settings>
</applicationSettings> 
```

这行得通吗？

编辑1：

这就是 Settings.Designer.cs 的样子：

```
 [global::System.Configuration.ApplicationScopedSettingAttribute()]
    [global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
    [global::System.Configuration.DefaultSettingValueAttribute("c:\\")]
    public string MySetting {
        get {
            return ((string)(this["MySetting"]));
        }
    } 
```

这是我在 app.config 中的 userSETtings 部分：

```
 <applicationSettings>
    <Orbit.Client.Main.Properties.Settings>
      <setting name="MySetting23" serializeAs="String">
        <value>False</value>
      </setting>
      <setting name="MySetting24" serializeAs="String">
        <value>False</value>
      </setting>
      <setting name="MySetting25" serializeAs="String">
        <value>False</value>
      </setting>
      <setting name="MySetting26" serializeAs="String">
        <value>False</value>
      </setting>
    </Orbit.Client.Main.Properties.Settings>
  </applicationSettings>
  <userSettings>
    <Orbit.Client.Main.Properties.Settings>
      <setting name="MySetting49" serializeAs="String">
        <value />
      </setting>
      <setting name="MySetting49" serializeAs="String">
        <value />
      </setting>
      <setting name="MySetting48" serializeAs="String">
        <value />
      </setting>
      <setting name="MySetting47" serializeAs="String">
        <value>False</value>
      </setting>
      <setting name="MySetting46" serializeAs="String">
        <value>False</value>
      </setting>
      <setting name="SkinName" serializeAs="String">
        <value>Blue</value>
      </setting>
    </Orbit.Client.Main.Properties.Settings>
  </userSettings> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:22:01.383

它碰巧是一个连接字符串吗？这些不存储在该`applicationSettings`部分中。否则，不可能有未存储在该`ApplicationSettings`部分中的应用程序设置。可能是你`app.config`的不同步。重新编译你的项目。

# php - 在哪里放置 htmlspecialchars()

> ID：10850084
> 
> 赞同：0
> 
> 时间：2012-06-01T12:16:49.050
> 
> 标签：php, mysql

我正在使用 phpMyDataGird 脚本通过 Web 编辑 MySQL 数据库表，而不使用 phpMyAdmin（我只是使用 phpMyAdmin 来管理值，但这个脚本来管理数据）

当我将 HTML 添加到字段时，问题就出现了。我希望能够将它们视为代码，而不是让它们转换。

这是[脚本](http://leb-media.com/fouadlb/files/GermanySupporters/Scores2/phpmydatagrid-2011-09-27/sample9.php)外观的示例。如果您单击一个字段，您将能够对其进行编辑。在我写的第一行第二列`<i><b>someone</b></i>`中，你可以看到它没有显示代码，而是加粗和斜体。

这是脚本的[主页](http://pastebin.com/44qgpeti)，我在其中添加我的 MySQL 信息和更改设置，并且此主页连接到编写所有脚本的[页面。](http://pastebin.com/LqavqHdx)

任何人都可以看看这些页面并告诉我在哪里添加`htmlspecialchars()`呼叫，因为我一直在尝试，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:34:23.637

如果您只想在网格中显示 HTML 特殊字符（并且它们可以保持原样），请尝试在“页面”脚本中编辑第 1612 行 - 这应该是一个`mask`函数：

```
 function mask($value,$mask,$datatype,$aselect,$row){
            switch ($datatype){
                    ...
                    default:               
/*1612 line here --> */ return htmlspecialchars($value);
            }
        } 
```

但我不确定这是否是你想要实现的......

编辑：要将数据保存为 htmlspecialchar 格式的值，请尝试将第 927 行从

```
$strUpdate = "UPDATE $this->tablename set $value=".magic_quote($nt)." $updWhere Limit 1"; 
```

至

```
$strUpdate = "UPDATE $this->tablename set $value=".htmlspecialchars(magic_quote($nt))." $updWhere Limit 1"; 
```

但同样，我不确定......如果没问题，那么您可以删除前面示例中的 htmlspecialchars（第 1612 行）。

# matlab - 如何在 MATLAB 中使用“系统”命令？

> ID：10850086
> 
> 赞同：0
> 
> 时间：2012-06-01T12:16:58.550
> 
> 标签：matlab

我已经检查了有关命令的 Mathworks 上的文档

```
system 
```

我仍然没有完全掌握这个命令的想法。这个命令似乎是为调用外部程序而设计的，例如 Excel、Word、R 等。

使用此命令还有其他用途吗？如果我还没有掌握它的基本思想。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T12:28:28.270

```
 system 
```

用于执行操作系统命令

要调用 Excel、Word 等，最好使用 fe

```
 actxserver() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T12:21:02.517

一般来说，您似乎已经完全掌握了该命令，它提供了调用各种外部命令的工具，包括同一台（或实际上是不同）计算机上的操作系统命令和其他应用程序。我建议您通过使用它来了解更多有关它的信息，并且不要再浪费时间在 SO 上阅读像这样的答案。

当你有更具体和更详细的问题时，问他们。

**编辑**回应评论

是的，您当然可以使用系统命令运行 R 程序。例如，如果您有一个名为 myRprogram.exe 的程序，并且您的路径设置正确，则 Matlab 命令

```
system('myRprogram.exe') 
```

应该运行你的 R 程序。

如果您的意思是“我可以运行我在 Matlab 中编写的 R 程序并在运行时发送到 R 运行时系统”，那么答案也是（可能，我不是 R 专家）是的。您应该能够编写如下内容：

```
system('R set.seed(1); num=50; w = rnorm(num+1,0,1)') 
```

因此，如果您可以从命令行键入和执行 R 程序，则可以在 Matlab 程序中构建和执行它。

注意：我不是 R 程序员，我没有声称系统调用中的字符串是在命令行运行 R 的有效方式。如果有人读过这篇文章更了解，请随时编辑或写一个更好的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T17:21:44.113

使用了 R(D)COM 和 Matlab R-link 一段时间后，不推荐了。COM 接口在解析很多命令时遇到了麻烦，并且很难调试代码。我建议使用 Matlab 中的系统命令，如[R Wiki](http://rwiki.sciviews.org/doku.php?id=tips:callingr:matlab)中所述。这也避免了必须安装 RAndFriends。

# .net - 在 Visual Basic 中使用 iTunes com api

> ID：10850089
> 
> 赞同：1
> 
> 时间：2012-06-01T12:17:02.520
> 
> 标签：.net, visual-studio-2010, itunes-sdk

我的 Visual Basic 有问题（来自 Visual Studio 2010）我在添加参考时找不到 iTunes com dll。它只显示 ItunesAdmin、ITdetector 和 Itunesoutlookaddin ....我能做些什么来解决这个问题？我正在使用 iTunes 10.6.1.7。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T12:35:53.423

我遇到了同样的问题并使用[iTunes COM Fix](http://www.binaryfortress.com/itunes-com-fix/ "iTunes COM 修复")解决了它，并且效果很好。

# c# - 在下拉列表中使用多种对象类型为数据网格提供过滤

> ID：10850090
> 
> 赞同：0
> 
> 时间：2012-06-01T12:17:06.263
> 
> 标签：c#, javascript, asp.net

在我的 ASP.Net C# 项目中，我需要显示一个包含人员姓名和办公室名称的下拉列表。

当用户进行选择时，该事件在 JavaScript 中处理并用于过滤网格的结果。因此，如果用户从下拉列表中选择一个人的姓名，则网格仅显示该人的结果。如果用户选择一个办公室，那么网格应该显示该办公室中所有人的结果。

过滤是在下拉菜单的 OnClientDropDownClosed 事件的 JavaScript 中处理的。网格和下拉菜单是 Telerik 控件而不是标准的 BTW。

**我的问题是 - 确定用户选择的项目类型的最佳方法是什么。** 下拉项的值是人名或办公室标识符。

我想我可以简单地为 Value 添加一个前缀并为它做一个子字符串测试，但这似乎有点 hacky...

有没有更好的方法来实现我想要的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:21:35.473

由于办公室名称和人名可能相同，因此我们无法在客户端进行交叉检查。

所以我的建议是将多个办公室值设置为-1，这样办公室 ID 为负数，当用户选择一个值时，只需检查值是否低于 0，而不是哇哦它是一个办公室，否则它是一个人:)

# android - 为什么 android:actionBarDivider 不起作用？

> ID：10850091
> 
> 赞同：1
> 
> 时间：2012-06-01T12:17:17.800
> 
> 标签：android, android-actionbar, actionbarsherlock

有

```
<item name="android:actionBarDivider">@drawable/action_bar_divider</item> 
```

在我的活动风格中，效果为零。不管我使用的是原生 ActionBar 还是 ActionBarSherlock。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:26:01.410

我通过以编程方式将分隔线插入视图层次结构来解决它。后来我发现分隔线可能仅在底部操作栏中可见（我需要在顶部栏中使用它们）。但我没有验证。

```
public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.main_activity, menu);

    new Handler().post(new Runnable() {
        @Override
        public void run() {
            for (int id : new int[] { R.id.action_1, R.id.action_2 }) {
                View actionView = findViewById(id);
                insertDividerBefore(actionView);
            }
        }
    });

    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T05:09:31.917

> **android:actionBarDivider** 为动作项之间的分隔线定义一个可绘制资源。（在 API 级别 14 中添加。）

确保您使用的是 API 级别 14 或更高版本。

# wpf - 将样式应用于自定义组合框

> ID：10850098
> 
> 赞同：0
> 
> 时间：2012-06-01T12:17:54.337
> 
> 标签：wpf

我创建了从组合框派生的控件。我的应用程序中的每个组合框都有一个共同的样式。除了我创建的控件之外，该样式适用于每个组合框。

请查找代码以供参考。

-xaml -Code 用于自定义组合框

```
<local:FilteredComboBox Grid.Row="3" Grid.Column="1" Height="20"       x:Name="cbBillingProvider" Padding="4 3" /> 
```

--c# 自定义组合框的代码。

```
public class FilteredComboBox : ComboBox
{
} 
```

-combobox.xaml 中的组合框样式代码

```
ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                xmlns:local="clr-namespace:BCBSKCICD10"
                mc:Ignorable="d">
<ResourceDictionary.MergedDictionaries>
<ResourceDictionary Source="Shared.xaml" />
</ResourceDictionary.MergedDictionaries>

<ControlTemplate x:Key="ComboBoxToggleButton"
               TargetType="{ x:Type ToggleButton}">
<Grid>
  <Grid.ColumnDefinitions>
    <ColumnDefinition />
    <ColumnDefinition Width="20" />
  </Grid.ColumnDefinitions>
  <VisualStateManager.VisualStateGroups>
    <VisualStateGroup x:Name="CommonStates">
      <VisualState x:Name="Normal" />
      <VisualState x:Name="MouseOver">
        <Storyboard>
          <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Panel.Background).
              (GradientBrush.GradientStops)[1].(GradientStop.Color)"
                                        Storyboard.TargetName="Border">
            <EasingColorKeyFrame KeyTime="0"
                                 Value="{StaticResource ControlMouseOverColor}" />
          </ColorAnimationUsingKeyFrames>
        </Storyboard>
      </VisualState>
      <VisualState x:Name="Pressed" />
      <VisualState x:Name="Disabled">
        <Storyboard>
          <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Panel.Background).
              (GradientBrush.GradientStops)[1].(GradientStop.Color)"
                                        Storyboard.TargetName="Border">
            <EasingColorKeyFrame KeyTime="0"
                                 Value="{StaticResource DisabledControlDarkColor}" />
          </ColorAnimationUsingKeyFrames>
          <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Shape.Fill).
              (SolidColorBrush.Color)"
                                        Storyboard.TargetName="Arrow">
            <EasingColorKeyFrame KeyTime="0"
                                 Value="{StaticResource DisabledForegroundColor}" />
          </ColorAnimationUsingKeyFrames>
          <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Border.BorderBrush).
              (GradientBrush.GradientStops)[1].(GradientStop.Color)"
                                        Storyboard.TargetName="Border">
            <EasingColorKeyFrame KeyTime="0"
                                 Value="{StaticResource DisabledBorderDarkColor}" />
          </ColorAnimationUsingKeyFrames>
        </Storyboard>
      </VisualState>
    </VisualStateGroup>
    <VisualStateGroup x:Name="CheckStates">
      <VisualState x:Name="Checked">
        <Storyboard>
          <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Panel.Background).
              (GradientBrush.GradientStops)[1].(GradientStop.Color)"
                                        Storyboard.TargetName="Border">
            <EasingColorKeyFrame KeyTime="0"
                                 Value="{StaticResource ControlPressedColor}" />
          </ColorAnimationUsingKeyFrames>
        </Storyboard>
      </VisualState>
      <VisualState x:Name="Unchecked" />
      <VisualState x:Name="Indeterminate" />
    </VisualStateGroup>
  </VisualStateManager.VisualStateGroups>
  <Border x:Name="Border"
          Grid.ColumnSpan="2"
          CornerRadius="2"
          BorderThickness="1">
    <Border.BorderBrush>
      <LinearGradientBrush EndPoint="0,1"
                           StartPoint="0,0">
        <GradientStop Color="{DynamicResource BorderLightColor}"
                      Offset="0" />
        <GradientStop Color="{DynamicResource BorderDarkColor}"
                      Offset="1" />
      </LinearGradientBrush>
    </Border.BorderBrush>
    <Border.Background>

      <LinearGradientBrush StartPoint="0,0"
                           EndPoint="0,1">
        <LinearGradientBrush.GradientStops>
          <GradientStopCollection>
            <GradientStop Color="{DynamicResource ControlLightColor}" />
            <GradientStop Color="{DynamicResource ControlMediumColor}"
                          Offset="1.0" />
          </GradientStopCollection>
        </LinearGradientBrush.GradientStops>
      </LinearGradientBrush>

    </Border.Background>
  </Border>
  <Border Grid.Column="0"
          CornerRadius="2,0,0,2"
          Margin="1" >
    <Border.Background>
        <SolidColorBrush Color="{DynamicResource ControlLightColor}"/>
    </Border.Background>
  </Border>
  <Path x:Name="Arrow"
        Grid.Column="1"
        HorizontalAlignment="Center"
        VerticalAlignment="Center"
        Data="M 0 0 L 4 4 L 8 0 Z" >
    <Path.Fill>
        <SolidColorBrush Color="{DynamicResource GlyphColor}"/>
    </Path.Fill>
  </Path>
</Grid>
</ControlTemplate>
<ControlTemplate x:Key="ComboBoxTextBox"
               TargetType="{x:Type TextBox}">
<Border x:Name="PART_ContentHost"
        Focusable="False"
        Background="{TemplateBinding Background}" />
</ControlTemplate>
<Style x:Key="{x:Type ComboBox}"
     TargetType="{x:Type ComboBox}">
<Setter Property="SnapsToDevicePixels"
        Value="true" />
<Setter Property="OverridesDefaultStyle"
        Value="true" />
<Setter Property="ScrollViewer.HorizontalScrollBarVisibility"
        Value="Auto" />
<Setter Property="ScrollViewer.VerticalScrollBarVisibility"
        Value="Auto" />
<Setter Property="ScrollViewer.CanContentScroll"
        Value="true" />
<Setter Property="MinWidth"
        Value="120" />
<Setter Property="MinHeight"
        Value="20" />
<Setter Property="MaxHeight" Value="20"></Setter>

    <Setter Property="Template">

  <Setter.Value>
    <ControlTemplate TargetType="{x:Type ComboBox}">
      <Grid>
        <VisualStateManager.VisualStateGroups>
          <VisualStateGroup x:Name="CommonStates">
            <VisualState x:Name="Normal" />
            <VisualState x:Name="MouseOver" />
            <VisualState x:Name="Disabled">
              <Storyboard>
                <ColorAnimationUsingKeyFrames Storyboard.TargetName="PART_EditableTextBox"
                                              Storyboard.TargetProperty="(TextElement.Foreground).
                    (SolidColorBrush.Color)">
                  <EasingColorKeyFrame KeyTime="0"
                                       Value="{StaticResource DisabledForegroundColor}" />
                </ColorAnimationUsingKeyFrames>
              </Storyboard>
            </VisualState>
          </VisualStateGroup>
          <VisualStateGroup x:Name="EditStates">
            <VisualState x:Name="Editable">
              <Storyboard>
                <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)"
                                               Storyboard.TargetName="PART_EditableTextBox">
                  <DiscreteObjectKeyFrame KeyTime="0"
                                          Value="{x:Static Visibility.Visible}" />
                </ObjectAnimationUsingKeyFrames>
                <ObjectAnimationUsingKeyFrames
                    Storyboard.TargetProperty="(UIElement.Visibility)"
                                               Storyboard.TargetName="ContentSite">
                  <DiscreteObjectKeyFrame KeyTime="0"
                                          Value="{x:Static Visibility.Hidden}" />
                </ObjectAnimationUsingKeyFrames>
              </Storyboard>
            </VisualState>
            <VisualState x:Name="Uneditable" />
          </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
        <ToggleButton x:Name="ToggleButton"
                      Template="{StaticResource ComboBoxToggleButton}"
                      Grid.Column="2"
                      Focusable="false"
                      ClickMode="Press"
                      IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, 
            RelativeSource={RelativeSource TemplatedParent}}"/>
        <ContentPresenter x:Name="ContentSite"
                          IsHitTestVisible="False"
                          Content="{TemplateBinding SelectionBoxItem}"
                          ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                          ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                          Margin="3,3,23,3"
                          VerticalAlignment="Stretch"
                          HorizontalAlignment="Left">
        </ContentPresenter>
        <TextBox x:Name="PART_EditableTextBox"
                 Style="{x:Null}"
                 Template="{StaticResource ComboBoxTextBox}"
                 HorizontalAlignment="Left"
                 VerticalAlignment="Bottom"
                 Margin="3,3,23,3"
                 Focusable="True"
                 Background="Transparent"
                 Visibility="Hidden"
                 IsReadOnly="{TemplateBinding IsReadOnly}" />
        <Popup x:Name="Popup"
               Placement="Bottom"
               IsOpen="{TemplateBinding IsDropDownOpen}"
               AllowsTransparency="True"
               Focusable="False"
               PopupAnimation="Slide">
          <Grid x:Name="DropDown"
                SnapsToDevicePixels="True"
                MinWidth="{TemplateBinding ActualWidth}"
                MaxHeight="{TemplateBinding MaxDropDownHeight}">
            <Border x:Name="DropDownBorder"
                    BorderThickness="1">
              <Border.BorderBrush>
                <SolidColorBrush Color="{DynamicResource BorderMediumColor}" />
              </Border.BorderBrush>
              <Border.Background>
                <SolidColorBrush Color="{DynamicResource ControlLightColor}" />
              </Border.Background>
            </Border>
            <ScrollViewer Margin="4,6,4,6"
                          SnapsToDevicePixels="True">
              <StackPanel IsItemsHost="True"
                          KeyboardNavigation.DirectionalNavigation="Contained" />
            </ScrollViewer>
          </Grid>
        </Popup>
      </Grid>
      <ControlTemplate.Triggers>
        <Trigger Property="HasItems"
                 Value="false">
          <Setter TargetName="DropDownBorder"
                  Property="MinHeight"
                  Value="95" />
        </Trigger>
        <Trigger Property="IsGrouping"
                 Value="true">
          <Setter Property="ScrollViewer.CanContentScroll"
                  Value="false" />
        </Trigger>
        <Trigger SourceName="Popup"
                 Property="AllowsTransparency"
                 Value="true">
          <Setter TargetName="DropDownBorder"
                  Property="CornerRadius"
                  Value="4" />
          <Setter TargetName="DropDownBorder"
                  Property="Margin"
                  Value="0,2,0,0" />
        </Trigger>
      </ControlTemplate.Triggers>
    </ControlTemplate>
  </Setter.Value>
  </Setter>
  </Style>    
  <Style x:Key="{x:Type ComboBoxItem}"
     TargetType="{x:Type ComboBoxItem}">
<Setter Property="SnapsToDevicePixels"
        Value="true" />
<Setter Property="OverridesDefaultStyle"
        Value="true" />
<Setter Property="Template">
  <Setter.Value>
    <ControlTemplate TargetType="{x:Type ComboBoxItem}">
      <Border x:Name="Border"
              Padding="2"
              SnapsToDevicePixels="true"
              Background="Transparent">
        <VisualStateManager.VisualStateGroups>
          <VisualStateGroup x:Name="SelectionStates">
            <VisualState x:Name="Unselected" />
            <VisualState x:Name="Selected">
              <Storyboard>
                <ColorAnimationUsingKeyFrames Storyboard.TargetName="Border"
                                              Storyboard.TargetProperty="(Panel.Background).
                  (SolidColorBrush.Color)">
                  <EasingColorKeyFrame KeyTime="0"
                                       Value="{StaticResource SelectedBackgroundColor}" />
                </ColorAnimationUsingKeyFrames>
              </Storyboard>
            </VisualState>
            <VisualState x:Name="SelectedUnfocused">
              <Storyboard>
                <ColorAnimationUsingKeyFrames Storyboard.TargetName="Border"
                                              Storyboard.TargetProperty="(Panel.Background).
                  (SolidColorBrush.Color)">
                  <EasingColorKeyFrame KeyTime="0"
                                       Value="{StaticResource SelectedUnfocusedColor}" />
                </ColorAnimationUsingKeyFrames>
              </Storyboard>
            </VisualState>
          </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
        <ContentPresenter />
      </Border>
    </ControlTemplate>
  </Setter.Value>
</Setter>
</Style>
</ResourceDictionary> 
```

任何人都可以帮助在我的自定义组合框中应用相同的样式吗？

谢谢

阿普尔瓦沙阿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:35:40.157

尝试这个：

```
public class FilteredComboBox : ComboBox
{
    static FilteredComboBox()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(FilteredComboBox), 
            new FrameworkPropertyMetadata(typeof(ComboBox)));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:40:16.957

我不得不承认我不喜欢这样，因为您必须为您创建的每个继承类型创建一个新行（可能不可能），但您始终可以引用默认样式。

```
<Style TargetType="{x:Type local:FilteredComboBox}" BasedOn="{StaticResource {x:Type ComboBox}}"/> 
```

我想这与每次在 c# 中硬编码它是一样的

# c# - 使用 System.Threading.Tasks.Parallel 在线程池中创建新线程？

> ID：10850099
> 
> 赞同：6
> 
> 时间：2012-06-01T12:17:58.270
> 
> 标签：c#, .net, clr, task-parallel-library

也许我没有正确理解......所有并行类问题:(

但是从我现在阅读的内容来看，我了解到，当我使用 Parallel 时，我实际上会调动 threadPool 中存在的所有线程来执行某些任务/任务。

**例如**：

```
 var arrayStrings = new string[1000];
  Parallel.ForEach<string>(arrayStrings, someString =>
  {
       DoSomething(someString);
  }); 
```

因此，在这种情况下，Parallel.ForEach 正在为“DoSomething”任务/任务调动 threadPool 中存在的所有线程。

但是调用 Parallel.ForEach 会创建任何新线程吗？

很明显，不会有 1000 个新线程。但是让我们假设有 1000 个新线程，在某些情况下 threadPool 释放它持有的所有线程，在这种情况下...... Parallel.ForEach 将创建任何新线程？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-01T17:15:42.567

简短的回答：`Parallel.ForEach()`没有“调动所有的线程”。任何安排一些工作`ThreadPool`（`Parallel.ForEach()`确实如此）的操作都可能导致在池中创建新线程。

长答案：要正确理解这一点，您需要知道三个抽象级别是如何工作的`Parallel.ForEach()`：`TaskScheduler`和`ThreadPool`：

1.  `Parallel.ForEach()`（和`Parallel.For()`）将他们的工作安排在`TaskScheduler`. 如果您没有明确指定调度程序，则将使用[当前](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.current.aspx)调度程序。

    `Parallel.ForEach()`在几个`Task`s 之间拆分工作。每个都`Task`将处理输入序列的一部分，完成后，如果有可用的部分，它将请求另一部分，依此类推。

    `Task`将`Parallel.ForEach()`创建多少个s？尽可能多的`TaskScheduler`让它运行​​。这样做的方式是每个`Task`在开始执行时首先将自身的副本排入队列（除非这样做会违反[`MaxDegreeOfParallelism`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.paralleloptions.maxdegreeofparallelism.aspx)，如果您设置它）。这样，实际的并发级别就达到了`TaskScheduler`.

    此外，如果支持它，第一个`Task`实际上将在当前线程上执行`TaskScheduler`（这是使用 完成的[`RunSynchronously()`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.runsynchronously)）。

2.  [默认值`TaskScheduler`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.default.aspx)只是简单地将每个`Task`加入`ThreadPool`队列。（实际上，如果`Task`从 another开始 a 会更复杂`Task`，但这在这里无关紧要。）其他`TaskScheduler`s 可以做完全不同的事情，其中​​一些（如[`TaskScheduler.FromCurrentSynchronizationContext()`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.fromcurrentsynchronizationcontext.aspx)）完全不适合与 一起使用`Parallel.ForEach()`。

3.  它`ThreadPool`使用相当复杂的算法来确定在任何给定时间应该运行多少线程。但这里最重要的是调度新工作项*会*导致创建新线程（尽管不一定立即）。并且因为有了`Parallel.ForEach()`，总会有一些项目排队等待执行，完全取决于内部算法`ThreadPool`来决定线程的数量。

总而言之，几乎不可能决定 a 将使用多少线程`Parallel.ForEach()`，因为它取决于许多变量。两种极端都是可能的：循环将在当前线程上完全同步运行，并且每个项目都将在其自己的新创建线程上运行。

但一般来说，应该接近最佳效率，您可能不必担心所有这些细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T12:23:49.117

Parallel.Foreach 不会创建新线程，也不会“调动所有线程”。它使用线程池中有限数量的线程并将任务提交给它们以进行并行执行。在当前实现中，默认设置是每个内核使用一个线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T12:29:08.070

我认为你有这个错误的方式。从[并行编程模式](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=19222)中，您会看到 Parallel.ForEach 只是真正的语法糖。

Parallel.ForEach 在很大程度上归结为这样的东西，

```
for (int p = 0; p < arrayStrings.Count(); p++)
{
    ThreadPool.QueueUserWorkItem(DoSomething(arrayStrings[p]);
} 
```

ThreadPool 负责调度。如果您有兴趣，有一些关于 ThreadPool 的调度程序如何在某种程度上表现的优秀文章，但这与 TPL 无关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T12:27:58.663

Parallel 根本不处理线程——它将 TASKS 调度到任务框架。然后有一个调度程序，默认调度程序进入线程池。这将尝试找到大量线程（在 4.5 中比在 4.0 中更好），并且线程池可能会慢慢启动新线程。

但这不是parallel.foreach 的功能；）

> Parallel.ForEach 将创建任何新线程？？？

它永远不会。正如我所说 - 它有 1000 个 foreach，然后它将 10.000 个任务排队，Point。任务工厂调度程序将执行它被编程做的事情（（你可以替换它）。通常，默认 - 是的，慢慢地新线程会在合理的情况下出现。

# objective-c - 数组中对象的 IntValue 导致错误

> ID：10850104
> 
> 赞同：0
> 
> 时间：2012-06-01T12:18:11.540
> 
> 标签：objective-c

我有一个轻微的代码问题。我有一个数组，但是当我从中提取数据时，我需要以`int`. 为此，我尝试使用：

```
int main_id = [[courses valueForKey:@"id"] intValue]; 
```

但这给了我错误：

```
 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason:   '-[__NSArrayI intValue]: unrecognized selector sent to instance 0x6b438d0'
*** First throw call stack:
(0x16ac022 0x183dcd6 0x16adcbd 0x1612ed0 0x1612cb2 0x4bf8 0x4fdd 0xdea1e 0xddfec 0x104f1d 0xef1cb 0x105df1 0x105e0d 0x105ea9 0x446f5 0x4473c 0x15596 0x16274 0x25183 0x25c38 0x19634 0x1596ef5 0x1680195 0x15e4ff2 0x15e38da 0x15e2d84 0x15e2c9b 0x15c65 0x17626 0x36ed 0x2695 0x1)
terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:29:55.307

我找到了答案。我正在使用 NSArray

```
NSArray *array; 
```

那里面有另一个nsarray。我试图调用 NSArray 的 intvalue。

# windows - 以特定用户身份运行 Web 应用程序

> ID：10850106
> 
> 赞同：0
> 
> 时间：2012-06-01T12:18:19.603
> 
> 标签：windows, tomcat, web-applications, service

在我的应用服务器机器上，我已经使用特定用户完成了驱动器映射。但是对于在 Tomcat 上运行的 Web 应用程序，我无法访问该驱动器，因为 Tomcat 作为 Windows 服务运行，而不是与实际访问映射驱动器的用户一起运行。所以我想知道如何在特定用户的 Tomcat 服务器上运行 Web 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T18:54:29.317

将 Tomcat 作为 Windows 服务运行 ( [http://tomcat.apache.org/tomcat-7.0-doc/windows-service-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/windows-service-howto.html) ) 并确保将用户设置为非标准服务来运行该服务用户或其他。

# actionscript-3 - ActionScript 中的程序流和事件侦听器

> ID：10850108
> 
> 赞同：1
> 
> 时间：2012-06-01T12:18:21.803
> 
> 标签：actionscript-3, events, air, event-handling

当从外部源加载 XML 时，我在程序流控制方面遇到了困难。我正在使用 Flash Builder 4.6

应该发生什么：使用装载机。听听它何时加载。当它触发 COMPLETE 事件时，继续。发生了什么：使用装载机。听听它何时加载。但在 COMPLETE 事件触发之前，程序控制权返回给调用类。因此，与此同时，程序继续运行并引发错误，因为它试图访问为空的数据。

涉及三个类：

*   AdvocacyWiz.mxml - 此 AIR 移动应用程序的基本 MXML 文件
*   Model.as - 模型类
*   myXMLLoader.as - 加载器在其中加载数据的类，然后在完成后调度事件。

一旦将 AdvocacyWiz.mxml 添加到舞台，我将在 AdvocacyWiz.mxml 中调用函数 setUpModel()。该类中的 setUpModel 函数如下所示：

```
Model.Instance.initialize(); //model is a singleton 
```

初始化函数调用调用我的 XMLLoader.as 类中的加载器。这就是让事件侦听器侦听 Complete 事件的地方，该事件发生得太晚，无法防止发生空错误。

编辑：这是代码 -

在 AdvocacyWiz.mxml 中（首先触发）：

```
protected function addedToStageHandler(event:Event):void
{
   setUpModel();
   stage.scaleMode = StageScaleMode.NO_SCALE;
   //... additional layout functions

private function setUpModel():void {    
   Model.Instance.initialize();
} 
```

在模型中（第二次触发）：

```
public function initialize():void {
    addEventListeners(); //this includes listener for StoriesXMLLoader.STORY_LOADED event which will be dispatched from the loader class.
    useExternalXML();   
    ...
    }

    private function useExternalXML():void
    {
        myLoader.getStory("1140");
    } 
```

在加载器类中：

```
 public function getStory(storyId:String):void {
        var url:String = "http://mysite.com/whatever.xml";
        myLoader.dataFormat = URLLoaderDataFormat.TEXT;
        myLoader.addEventListener(Event.COMPLETE, storyXMLLoaded);
        myLoader.load(new URLRequest(url)); 
    }

    private function storyXMLLoaded(e:Event):void {
        storyXML = new XML(e.target.data);
        dispatchEvent(new Event(StoriesXMLLoader.STORY_LOADED));
    } 
```

我想要做的是调用 setUpModel() 但在模型实际有数据之前不会将流返回到 mxml 类。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:27:57.343

好吧，您还没有提供任何代码，这将有很大帮助，但这里有一些指示。

> 应该发生什么：使用装载机。听听它何时加载。当它触发 COMPLETE 事件时，继续。发生了什么：使用装载机。听听它何时加载。但是在 COMPLETE 事件触发之前， **程序控制权返回给调用类**。因此，与此同时，程序继续运行并引发错误，因为它试图访问为空的数据。

很多 Flex 是**异步**的。这意味着当您尝试从外部源加载时，程序控制立即返回，正如您所指出的。

为了获得您想要的那种程序流程，您需要让调用的函数在调用`load()`之后结束。然后，当 COMPLETE 事件侦听器触发时，您可以执行导致空异常的其余代码。

# c# - 覆盖 WCF 服务中的 ToString 方法

> ID：10850111
> 
> 赞同：6
> 
> 时间：2012-06-01T12:18:34.907
> 
> 标签：c#, .net, wcf, serialization, partial-classes

这是我的服务生成类：

```
public partial class MyClass : object, 
                               System.Runtime.Serialization.IExtensibleDataObject, 
                               System.ComponentModel.INotifyPropertyChanged 
{ } 
```

我正在使用我自己的服务。在`MyClass`我已经覆盖`ToString()`但我的客户中没有它。我想生成它还是`MyClass`部分地我能够覆盖`ToString`自己？

我知道我可以写入生成的 .cs 文件。最好的方法是什么，我应该这样做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T12:38:27.940

如果您同时定义客户端和服务，则不需要使用 WSDL 生成的类。将共享对象移动到单独的程序集中，并从客户端和服务器项目中引用它。当您创建服务引用时，有一个“高级”选项（我认为默认情况下是打开的），它重用 WSDL 中的任何已知类而不是生成新类。

更好的是，如果你将服务契约移动到你的共享库中，你甚至不需要创建服务引用，你可以直接调用`ChannelFactory`并消除整个自动生成的代理类。

我在我的博客上演示了如何做这两件事：[http ://blog.kutulu.org/2012/03/proxy-free-wcf-ditching-proxy.html](http://blog.kutulu.org/2012/03/proxy-free-wcf-ditching-proxy.html)

如果您绝对*需要*使用服务中的 WSDL（例如，您无法控制服务端并且它可能会在您身上发生变化），那么您可以扩展 VS 创建的部分类（如您所建议的那样）。如今，您从 VS 获得的大多数自动生成类都是部分类，专门用于使这种扩展成为可能。当然，缺点是不能保证客户端和服务器的附加部分类方法是相同的。我肯定会认为这是最后的选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T12:35:42.753

如果您在客户端和服务器项目之间共享覆盖方法exixts的dll，您可以使用该方法。默认情况下，WCF 生成的每个类仅具有在服务接口中声明的属性。不生成任何方法。

您可以创建一个单独的 dll 文件，并将您想要在服务和客户端之间共享的内容放入此 dll；并将此 dll 添加为对客户端和服务项目的引用。默认情况下，当您生成代理时，它不会自动生成共享类。

# python - [] 在 python 文档中是什么意思？

> ID：10850112
> 
> 赞同：1
> 
> 时间：2012-06-01T12:18:44.400
> 
> 标签：python, zip

也许这个问题有点基础，但我正在阅读 python 中的官方文档：

```
ZipFile.extractall([path[, members[, pwd]]]) 
```

但是我不明白 [] 是什么意思？

谢谢，

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-01T12:19:23.353

`[]`意味着这些是可以提供给函数的*可选参数。*文档将提及其他使用的默认值。

[使用open()](http://docs.python.org/library/functions.html#open)的简单示例：

```
open(name[, mode[, buffering]]) 
```

文件名是*必需*的，但模式和缓冲是*可选*的。打开文件的默认模式是读取，因此`open(filename, 'r')`相当于`open(filename)`. 因为`buffering`它声明：“如果省略，则使用系统默认值”

# jquery - ASP.Net Web Api 是否在单独的 Web 应用程序中？

> ID：10850113
> 
> 赞同：1
> 
> 时间：2012-06-01T12:18:45.593
> 
> 标签：jquery, ajax, architecture, authorization, asp.net-web-api

我想使用 ASP.Net Web API 来使用 JQuery AJAX 进行访问。Web API 应该有授权和未授权的方法。在现有的 MVC 项目中集成 Web API 时，它可以开箱即用。

但我想为我的 Web API 建立一个单独的项目，这样我就可以在更多应用程序上使用它。但是，当我在网站上获得授权并对 Web API（在 IIS webapp 内的虚拟目录上）进行 JQuery 调用时，它不会进行身份验证。但它会在请求中发送表单身份验证标头。

为多个 Web 应用程序创建一个单独的 Web API 项目是个好主意，还是在每个特定的 Web 应用程序中集成一些 Web API 控制器可能更聪明？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T14:31:28.493

MVC 和 Web API 实际上是同一个堆栈。不幸的是，在当前的实现中，它们生活在平行（尽管相邻）的世界中。

我个人更喜欢有一个站点同时提供数据（Web API）和渲染视图（MVC 等），因为很多逻辑是共享的。

身份验证是一个横切关注点，因此它可以设计为允许表单、OAuth、基本等。

# java - HttpClient 4.2、基本身份验证和 AuthScope

> ID：10850114
> 
> 赞同：6
> 
> 时间：2012-06-01T12:18:46.343
> 
> 标签：java, httpclient, apache-httpclient-4.x, apache-commons-httpclient

我有一个应用程序连接到需要基本身份验证的站点。这些站点是在运行时提供的，在编译时是未知的。

我正在使用 HttpClient 4.2。

我不确定下面的代码是否是我应该指定基本身份验证的方式，但文档会建议它是。但是，我不知道在`AuthScope`. 我曾认为 null 参数意味着提供的凭据应该用于所有 URL，但它会抛出一个`NullPointerException`，所以很明显我错了。

```
m_client = new DefaultHttpClient();
UsernamePasswordCredentials credentials = new UsernamePasswordCredentials(m_userName, m_password);
((DefaultHttpClient)m_client).getCredentialsProvider().setCredentials(new AuthScope((HttpHost)null), credentials); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T12:22:54.903

AuthScope.ANY 是您所追求的：http: [//hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/auth/AuthScope.html](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/auth/AuthScope.html)

尝试这个：

```
 final HttpClient client = new HttpClient();
    client.getParams().setAuthenticationPreemptive(true);
    client.getState().setCredentials(AuthScope.ANY, new UsernamePasswordCredentials(user.getUsername(), user.getPassword()));
    final GetMethod method = new GetMethod(uri);
    client.executeMethod(method); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-19T07:34:14.043

至少从 4.2.3 版本开始（我猜在 3.X 版本之后），接受的答案不再有效。相反，请执行以下操作：

```
private HttpClient createClient() {
    HttpParams params = new BasicHttpParams();
    HttpProtocolParams.setContentCharset(params, "UTF-8");

    Credentials credentials = new UsernamePasswordCredentials("user", "password");
    DefaultHttpClient httpclient = new DefaultHttpClient(params);
    httpclient.getCredentialsProvider().setCredentials(AuthScope.ANY, credentials);

    return httpclient;
} 
```

JavaDoc 中`AuthScope.ANY`说*在 HttpClient 的未来版本中将停止使用此参数*，因此使用它需要您自担风险。更好的选择是使用`AuthScope`.

有关如何使请求抢占式的讨论，请参阅：

[使用 Apache HttpClient 4 的抢先式基本身份验证](https://stackoverflow.com/questions/2014700/preemptive-basic-authentication-with-apache-httpclient-4)

# iphone - iPhone UITabBarItem 两行标题

> ID：10850115
> 
> 赞同：3
> 
> 时间：2012-06-01T12:18:47.660
> 
> 标签：iphone, objective-c, lines, uitabbaritem

我必须在 UITabBarItem 中设置一个有点长的标题；所以问题是：

是否可以在 UITabBarItem 中设置有两行的标题？

我尝试了以下方法（但它不起作用）：

```
UITabBarItem* myTabBarItem = ... //Allocation and initialization -via Objective-C code or Interface Builder-
myTabBarItem.title = @"Hello\nHello"; 
```

但是，我可以在 UITabBarItem 底部看到的文本（标题）是“Hello Hello”（即两个“Hello's”放在一行中）而不是“Hello\nHello”（一个 hello 在一行中，另一个在另一行）。

谢谢，

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-06-01T12:44:02.787

检查以下链接（标签栏控制器的大部分自定义）

1.  [实现自定义标签栏](http://idevrecipes.com/2011/01/04/how-does-the-twitter-iphone-app-implement-a-custom-tab-bar/)
2.  [带有自定义颜色的标签栏](https://stackoverflow.com/questions/4343764/tabbar-with-custom-colors)
3.  [RKTabView - 即用型解决方案](https://github.com/RafaelKayumov/RKTabView)
4.  [RX-Tabbar 控制器](http://www.rumex.it/2011/07/hiding-your-new-custom-tab-bar-uitabbar-in-an-iphone-application/)
5.  [自定义标签栏](http://idevrecipes.com/2011/01/04/how-does-the-twitter-iphone-app-implement-a-custom-tab-bar/)

此致，

# ruby-on-rails - 日期和范围不一致

> ID：10850116
> 
> 赞同：0
> 
> 时间：2012-06-01T12:18:49.900
> 
> 标签：ruby-on-rails, ruby-on-rails-3, datetime, activerecord, scope

我有以下范围：

```
scope :this_month, :conditions => ["created_at >= ?", Date.today.beginning_of_month] 
```

这使得 SQL 输出为`a.response_sets.this_month.to_sql`：

```
SELECT "response_sets".* FROM "response_sets" WHERE created_at >= '2012-05-01' 
```

但由于今天实际上是 6 月 1 日，这个日期似乎是错误的。所以，我尝试绕过范围，直接做一个条件，如下所示：

```
a.response_sets.where(["created_at >= ?", Date.today.beginning_of_month]).to_sql 
```

然后，输出：

```
SELECT "response_sets".* FROM "response_sets" WHERE created_at >= '2012-06-01' 
```

哪个是对的。`Date.today.beginning_of_month`那么为什么在范围内做和直接在范围内做有区别`where`呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T12:24:27.340

在作用域中处理日期时，您应该使用 lambda，以便每次调用作用域时都会对其进行评估：

```
scope :this_month, -> { where("created_at >= ?", Date.today.beginning_of_month) } 
```

# c# - 带有 DbContext 的 TypeLoadException

> ID：10850119
> 
> 赞同：2
> 
> 时间：2012-06-01T12:18:57.880
> 
> 标签：c#, asp.net-mvc, entity-framework

我有2个项目。第一个项目是一个dll项目，第二个是一个mvc4网站。在 dll 中，我有一个实体数据模型，我自动生成了 DbContext。

在 Global.asax 我用这一行初始化数据库：

```
System.Data.Entity.Database.SetInitializer( new DropCreateDatabaseAlways<WebConfigEntities>() ); 
```

当我启动网站时，我得到一个 TypeLoadException

```
Server Error in '/' Application.
GenericArguments[0], WebConfigDB.WebConfigEntities, voor System.Data.Entity.IDatabaseInitializer`1[TContext] is in strijd met de beperking van typeparameter TContext.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.TypeLoadException: GenericArguments[0], WebConfigDB.WebConfigEntities, voor System.Data.Entity.IDatabaseInitializer`1[TContext] is in strijd met de beperking van typeparameter TContext.

Source Error:

Line 46: 
Line 47:            BundleTable.Bundles.EnableDefaultBundles();
Line 48:        }
Line 49:    }
Line 50: }

Source File: D:\projecten\MD2400\WebConfig\Global.asax.cs    Line: 48

Stack Trace:

[TypeLoadException: GenericArguments[0], WebConfigDB.WebConfigEntities, voor System.Data.Entity.IDatabaseInitializer`1[TContext] is in strijd met de beperking van typeparameter TContext.]
   WebConfig.MvcApplication.Application_Start() in D:\projecten\MD2400\WebConfig\Global.asax.cs:48 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T15:23:56.407

这种类型的错误通常表明不同的程序集以某种方式引用了不同版本的 EntityFramework.dll。确保您的所有项目（以及任何其他引用程序集）都使用完全相同的版本。此外，请确保您在 GAC 中没有 EntityFramework.dll，或者如果您必须在 GAC 中拥有它，那么它也与所引用的版本相同。

如果您使用的是针对不同版本构建的外部依赖项并且您无法更改它，那么您可能需要设置绑定重定向以确保 CLR 正确解析版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:52:46.803

例外的翻译会有所帮助。在泛型方法调用中指定上下文有帮助吗？像这样：

```
System.Data.Entity.Database.SetInitializer<WebConfigEntities>( new DropCreateDatabaseAlways<WebConfigEntities>() ); 
```

您如何将 connectionString 传递给 WebConfigEntities 类？你能发布它的构造函数吗？

EntityFramework 做了一些魔术来从`.config`文件中检索 connectionString。如果您将模型放在单独的 dll 中，则可能效果不佳。这并不意味着您不能将模型放在 dll 中，当然可以。我已经为几个项目做到了这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-08T17:23:39.117

我犯了从 EF dll 的解决方案资源管理器获取版本号的错误，而不是 nuget 包的版本。所以，我加载了 nuget 包版本 6.0.0 而不是 6.2.0。

[![请注意，这些版本不是一回事](../Images/06c819ae1f10a9db588fb1a177329e53.png)](https://i.stack.imgur.com/Wvtoo.jpg)

# ios - 尽可能简单地发送 iMessage iOS

> ID：10850122
> 
> 赞同：11
> 
> 时间：2012-06-01T12:19:12.487
> 
> 标签：ios, core-telephony, imessage

我希望能够以编程方式发送 iMessage，而无需执行任何其他操作，除了调用一个将文本发送到带有消息的号码的函数，这两个都是文本框。当我在网上搜索时，我真的很感激一些示例代码，但我发现没有任何帮助。这不适用于商业应用程序，仅适用于我，因此它可以使用私有框架或任何可以完成这项工作的东西。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T12:23:19.453

发送消息的唯一方法是向 MessageUI 框架。iOS 文档中有一个如何执行此操作的示例：

[https://developer.apple.com/library/ios/#samplecode/MessageComposer/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010161](https://developer.apple.com/library/ios/#samplecode/MessageComposer/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010161)

**编辑：**我刚刚注意到这个问题与此重复：[如何使用 MessageUI 框架在 iPhone 上发送 iMessage 消息](https://stackoverflow.com/questions/6453776/how-to-use-messageui-framework-to-send-imessage-messages-on-iphone)

**更正：**您似乎可以使用 CoreTelephony 发送消息：

`[[CTMessageCenter sharedMessageCenter] sendSMSWithText:message serviceCenter:nil toAddress:number];`

乔丹布朗的评论让我想到了这一点。我确实怀疑这可能会让你被 App Store 禁止，但我知道你说过你不关心这个。

# android - 如何从服务器检索base64字符串（大图）到android

> ID：10850123
> 
> 赞同：2
> 
> 时间：2012-06-01T12:19:14.290
> 
> 标签：android, android-layout, android-imageview, android-ksoap2

我必须参考 id 从服务器检索所有大小的图像到 android 手机，所以我尝试使用下面的编码并成功获取 base 64 字符串并检索到等效 base64string 的图像它适用于小尺寸图像但是当我去对于大尺寸图像，它仍然是黑屏，无法通过这种方法在屏幕上获得大尺寸图像。

提前致谢。

## 如何找回

# 通过来自服务器的肥皂对象的大尺寸 base64 字符串

```
package com.imageload;

import java.io.IOException;
import java.util.StringTokenizer;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import org.xmlpull.v1.XmlPullParserException;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Typeface;
import android.os.Bundle;
import android.util.Base64;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

public class ImageloadActivity extends Activity {
    /** Called when the activity is first created. */

    private Button submit,clr,ext;
    private ImageView imageView;
    private TextView institute,orderno,name,mobno,handeled,regdat,delvdat,pname,pamt,dirby,regby,delby;

    String val11,val12,val13,val14;
    String str = null,str2 = null;
    String error="0",IiD;

/*  private static final String SOAP_ACTION = "http://tempuri.org/sta1";
    private static final String METHOD_NAME = "sta1";
    private static final String NAMESPACE = "http://tempuri.org/";
    private static final String URL = "http://cyberstudents.in/newand//service.asmx";*/

    private static final String SOAP_ACTION = "http://tempuri.org/IMAGE";
    private static final String METHOD_NAME = "IMAGE";
    private static final String NAMESPACE = "http://tempuri.org/";
    //private static final String URL = "http://cyberstudents.in/crdroid//service.asmx";
    private static final String URL = "http:///localdb/Service.asmx";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        this.orderno=(TextView)this.findViewById(R.id.ordernoeditText);
        this.pname=(TextView)this.findViewById(R.id.insTextView);
        this.submit=(Button)this.findViewById(R.id.getbutton);
        this.clr=(Button)this.findViewById(R.id.clearbutton);
        this.ext=(Button)this.findViewById(R.id.Exitbutton);
        this.imageView =(ImageView) findViewById(R.id.imageView1);

        orderno.setText("CB2-1112-CEA0883");

        this.submit.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                               IiD=orderno.getText().toString();    

                                if(error.equals("0"))
                                {
                                    SoapObject request = new SoapObject(NAMESPACE,METHOD_NAME);
                                    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                                    envelope.dotNet=true;

                                    request.addProperty("ID",IiD);                                                                              
                                    envelope.setOutputSoapObject(request);
                                    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

                                        try
                                        {
                                            try 
                                            {
                                                androidHttpTransport.call(SOAP_ACTION, envelope);

                                            } 
                                            catch (XmlPullParserException e)
                                            {
                                                // TODO Auto-generated catch block
                                                e.printStackTrace();
                                            }   

                                            SoapPrimitive result =  (SoapPrimitive)envelope.getResponse();
                                            //to get the data should be a base
                                            String resultData = result.toString();

                                            //pname.setText(resultData);

                                            byte[] decodedString = Base64.decode(resultData, Base64.DEFAULT);
                                            Bitmap decodedByte = BitmapFactory.decodeByteArray(decodedString, 0, decodedString.length);
                                            imageView.setImageBitmap(decodedByte);

                                        } 
                                        catch (IOException e)
                                        {
                                            // TODO Auto-generated catch block
                                            e.printStackTrace();
                                        }

                                    }

                }
        });

        this.clr.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                pname.setText("");

            }
        });

        this.ext.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                System.exit(0);
            }
        });

    }
} 
```

## 当返回大于 150kb 或 2500*3000 尺寸的图像大小时，soapprimitive(result) 返回 null

```
[WebMethod]
    public string  IMAGE(string ID)
    {

SqlConnection conn = new SqlConnection("Data Source=;Initial Catalog=;Persist Security Info=True;User ID=sa;");
        conn.Open();
        SqlDataAdapter sdImageSource = new SqlDataAdapter();
        sdImageSource.SelectCommand = new SqlCommand("select ImageData from ImagesStore where ImageId=('" + ID + "')", conn);
        DataSet dsImage = new DataSet();
        sdImageSource.Fill(dsImage);
        byte[] blob = (byte[])dsImage.Tables[0].Rows[0][0];
        int k = blob.Length;
        string c = Convert.ToBase64String(blob);
        return c;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T12:22:29.413

我的建议是将 Base64 图像存储在服务器文件夹中并将其路径保存在数据库中，以便您轻松检索它

# javascript - 我可以在隐藏文本上写一个文本吗？如果隐藏文本对 javascript 可见，我的文本将向右移动到隐藏文本..现在可见..？

> ID：10850128
> 
> 赞同：0
> 
> 时间：2012-06-01T12:19:25.147
> 
> 标签：javascript, html, css

我正在为一家公司开发一个网站，该公司希望用户首先填写所有信息，然后他应该继续......

为此，我使用以下代码制作了一个表格：

```
 <form action="Owners Infoback.php"  onsubmit="return validateForm()"  method="post" name="enquiry" id="" class="form-body-02">
    <ul>
        <li style="overflow:hidden;">
          <label for="Name" class="l1">1\. Name of owner:<br />
         <p>(If more than one seperate using comma.</br> Eg. A,B,C )<br /></p></label>
         <div id="nameOfOwnerError" style="visibility:hidden;color:red; display:inline; margin-left:20px;">*</div>
         <input name="Name_of_owner" type="text" class="textarea-bk-02" id=""  value="<?php echo "{$row[0]}";?>" style="border:none; width:330px; margin-left:14px; margin-top:15px; height:20px;"/>

        </li>

        <li>
          <label for="Name" class="l1">2\. Name of company:<br /><p>(Enter name registered)</p></label>
          <div id="nameOfOwnerCompany" style="visibility:hidden;color:red; display:inline; margin-left:20px;">*</div>
          <input name="Name_of_company_registered" type="text" class="textarea-bk-02" id=""  value="<?php echo "{$row[1]}";?>" style="border:none; width:330px; margin-left:10px; margin-top:13px; height:20px;"/>
        </li>

        <li>
          <label for="Name" class="l1">3\. Address:<p>(Write your own manufacturer address)</p></label>
          <div id="nameOfOwnerAddress"style="visibility:hidden;color:red; display:inline; margin-left:20px;">*</div>
          <input name="Owner_address" type="text" class="textarea-bk-02" id=""  value="<?php echo "{$row[2]}";?>" style="border:none; width:330px; height:20px; margin-left:13px; margin-top:13px;"/>
        </li>

        <li>
          <label for="Name" class="l1">4\. Email id:<p></p></label>
          <div id="nameOfOwnerEmail" style="visibility:hidden;color:red; display:inline; margin-left:20px;">*</div>
          <input name="Owner_Email_id" type="text" class="textarea-bk-02" id=""  value="<?php echo "{$row[3]}";?>" style="border:none; width:330px; margin-left:13px; margin-top:13px; height:20px;"/>
        </li>

        <li>
        <div id="nameOfOwnerError1" style="visibility:hidden;color:red; display:inline; position:relative"> Name of owner,</div>
        <div id="nameOfOwnerCompany1" style="visibility:hidden;color:red; display:inline; position:relative"> Name of company,</div>
        <div id="nameOfOwnerAddress1" style="visibility:hidden;color:red; display:inline; position:relative"> Address,</div>
        <div id="nameOfOwnerEmail1" style="visibility:hidden;color:red; display:inline; position:relative"> valid Email id</div>
        <input name="Save" type="submit"  class="send-btns-02 right" value="save" style="margin-top:5px;" >
            <div class="clear"></div>
        </li>
    </ul>
  </form> 
```

在标题部分，我将 javascript 写为：-

```
 <script>
     function validateForm()
{
var y=true;
var x=document.forms["enquiry"]["Name_of_owner"].value;
if (x==null || x=="")
  {
    document.getElementById("nameOfOwnerError").style.visibility="visible";  
    document.getElementById("nameOfOwnerError1").style.visibility="visible"; 
    y= false;
  }
  else
  { document.getElementById("nameOfOwnerError").style.visibility="hidden";
    document.getElementById("nameOfOwnerError1").style.visibility="hidden";
  }

  x=document.forms["enquiry"]["Name_of_company_registered"].value;
if (x==null || x=="")
  {
      document.getElementById("nameOfOwnerCompany").style.visibility="visible";
      document.getElementById("nameOfOwnerCompany1").style.visibility="visible";
      y= false;
  }
  else
  {document.getElementById("nameOfOwnerCompany").style.visibility="hidden";
   document.getElementById("nameOfOwnerCompany1").style.visibility="hidden";
  }

 x=document.forms["enquiry"]["Owner_address"].value;
if (x==null || x=="")
  {
     document.getElementById("nameOfOwnerAddress").style.visibility="visible";
     document.getElementById("nameOfOwnerAddress1").style.visibility="visible";
    y= false;
  }
   else
  {document.getElementById("nameOfOwnerAddress").style.visibility="hidden";
    document.getElementById("nameOfOwnerAddress1").style.visibility="hidden";
  }

 x=document.forms["enquiry"]["Owner_Email_id"].value;
var atpos=x.indexOf("@");
var dotpos=x.lastIndexOf(".");
if (atpos<1 || dotpos<atpos+2 || dotpos+2>=x.length)
  {
  document.getElementById("nameOfOwnerEmail").style.visibility="visible";
  document.getElementById("nameOfOwnerEmail1").style.visibility="visible";
  y= false;
  }
  else
  {document.getElementById("nameOfOwnerEmail").style.visibility="hidden";
    document.getElementById("nameOfOwnerEmail1").style.visibility="hidden";
  }
  return y;
}
</script> 
```

在填充备用字段时运行脚本后，我得到了我的屏幕（如图所示）......它不打印连续的红色文本，它也在打印隐藏字段的空间......我怎么能获取空字段的连续文本？

抱歉，因为我是新用户，所以我的图片不可见，但是当我只填写所有者的姓名和地址时，我正在显示的图片中。它以红色打印公司名称和有效电子邮件 ID，但在这些中间有一个隐藏地址文本的空白区域。我怎样才能删除它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:27:19.310

而不是使用

```
.style.visibility="visible"; 
```

利用

```
.style.display = ''; 
```

并且对于

```
.style.visibility="hidden"; 
```

利用

```
.style.display = 'none'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:43:43.750

这是给你的jsfiddle。 [http://jsfiddle.net/rakesh_katti/cLjAN/](http://jsfiddle.net/rakesh_katti/cLjAN/)

只需检查这是否是所需的输出。

您在每个输入标签的 value 属性中错误放置了 php 脚本。你的边框：无使输入的边框消失。我纠正了这一点。而且我假设你已经使用了一个 div 来在每个输入后面加上一个红色 * 来表示它是必填字段。

我做对了吗？

# python - 是否可以在 sys.exit(1) 之后使用导入？

> ID：10850134
> 
> 赞同：2
> 
> 时间：2012-06-01T12:19:50.163
> 
> 标签：python, exception, exit

我有一个`GetVars()`函数（不应该改变），它`sys.exit(1)`在某些情况下会抛出。我想为这种情况做一些清理：

```
try:
  common_func.GetVars()
except SystemExit:
  cmdline = "-user user1"
  sys.argv = ['config.py', cmdline]
  import config 
```

`config.py`应该带一些参数，但它包含目前唯一的`print`语句。但它没有被执行——有什么办法吗？只是想了解会发生什么，我知道代码看起来很奇怪:)

UPD：现在我正在尝试运行

```
cur_dir = os.path.dirname(os.path.realpath(__file__))
gcti_cfgDir = os.path.join(cur_dir, "..", "cfg-scripts")
 sys.path.append(gcti_cfgDir)
import config
try:
  sys.exit(1)
except SystemExit:
  try:
    import config
  except:
    print "errr" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T12:34:59.277

我用这个`mymodule.py`文件试了一下：

```
$ cat mymodule.py 
import sys

try:
  sys.exit(1)
except SystemExit:
  cmdline = "-user user1"
  sys.argv = ['config.py', cmdline]
  import config 
```

并使用此`config.py`文件：

```
$ cat config.py 
print "Everything is ok for now" 
```

结果是预期的：

```
$ python mymodule.py 
Everything is ok for now 
```

我很确定问题不在于导入本身，也不在于`SystemExit`捕获...可能您的`config.py`文件已损坏。

**更新**：啊，我相信我明白了！

根据您的新代码，您将在`config`之前导入模块`sys.exit(1)`并将其也导入`except`块中：

```
import config # <-- here...
try:
  sys.exit(1)
except SystemExit:
  try:    
    import config # <-- and here
  except:
    print "errr" 
```

但是，模块的代码*仅在第一次 import 时执行*。下面的要么将模块放在命名空间中，要么，如果它已经在命名空间中，则什么都不做。

在我看来，最好的解决方案是在模块中定义一个函数。如果这是您的模块的内容：

```
print "Everything is ok for now" 
```

只需将其替换为

```
def run():
    print "Everything is ok for now" 
```

而不是导入你希望它执行的模块，只导入一次并调用函数：

```
import config # This line just imports, does not print nothing
config.run()  # OTOH, this one prints the line...
try:
  sys.exit(1)
except SystemExit:
  try:    
    config.run() # This one prints the line too
  except:
    print "errr" 
```

实际上，这无疑是在 Python 中处理代码的最佳方式：将代码放入函数中，将函数放入模块中，然后调用函数。正如您尝试做的那样，将可执行代码直接放在模块中通常不是一个好习惯。

**第二次更新**：如果您无法更改`config.py`模块的代码，您仍然可以使用[`subprocess.call`](http://docs.python.org/library/subprocess.html#subprocess.call)调用 Python 解释器来调用它。您甚至可以传递您尝试添加的参数`sys.argv`：

```
import subprocess
# ...
subprocess.call(['python', 'config.py'])
try:
  sys.exit(1)
except SystemExit:
  try:
    subprocess.call(['python', 'config.py',  "-user", "user1"])  # Extra args
  except:    
    print "errr" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T12:30:03.833

使用[atexit](http://docs.python.org/library/atexit.html)模块注册清理处理程序，或者如果您确定`GetVars`正在调用`sys.exit`，则猴子修补后者以抛出自定义异常而不是真正运行，以便您可以捕获它并手动处理它。

# javascript - 当 sortable 被丢弃时触发警报

> ID：10850143
> 
> 赞同：0
> 
> 时间：2012-06-01T12:20:30.340
> 
> 标签：javascript, jquery

当用户将可拖动对象移动到新位置时是否会触发回调函数？

所以对于小提琴： http: [//jsfiddle.net/adrianjsfiddlenetuser/zyUkd/](http://jsfiddle.net/adrianjsfiddlenetuser/zyUkd/) 当“Hello 01”被拖放到一个新区域时，警报会被触发吗？

我需要使用 .droppable 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:46:16.033

从文档：

```
$(".selector").draggable({
   stop: function(event, ui) {
       alert('Hello World');
   }
}); 
```

或可排序：

```
$(".selector").sortable({
   stop: function(event, ui) {
       alert('Hello World');
   }
}); 
```

这应该够了吧。

# mysql - MySQL 特定查询性能调优

> ID：10850145
> 
> 赞同：4
> 
> 时间：2012-06-01T12:20:39.163
> 
> 标签：mysql, performance, indexing

我在 MySQL 查询性能方面遇到问题。

表（InnoDB）：

```
+--------------------+---------------------+------+-----+-------------------+-------+
| Field              | Type                | Null | Key | Default           | Extra |
+--------------------+---------------------+------+-----+-------------------+-------+
| st_resource_id     | varchar(32)         | NO   | MUL | NULL              |       |
| st_sub_resource_id | varchar(32)         | YES  |     | NULL              |       |
| st_title           | varchar(500)        | YES  |     | NULL              |       |
| st_resource_type   | varchar(100)        | NO   | MUL | NULL              |       |
| st_site_id         | tinyint(4)          | NO   | MUL | NULL              |       |
| st_time            | timestamp           | NO   | MUL | CURRENT_TIMESTAMP |       |
| st_user_id         | int(10) unsigned    | YES  |     | NULL              |       |
| st_full_access     | tinyint(1) unsigned | YES  |     | NULL              |       |
+--------------------+---------------------+------+-----+-------------------+-------+ 
```

索引：

```
+---------------+------------+------------------+--------------+--------------------+-----------+-------------+----------+--------+------+------------+---------+
| Table         | Non_unique | Key_name         | Seq_in_index | Column_name        | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+---------------+------------+------------------+--------------+--------------------+-----------+-------------+----------+--------+------+------------+---------+
| nr_statistics |          1 | resource_id      |            1 | st_resource_id     | A         |     1546165 |     NULL | NULL   |      | BTREE      |         |
| nr_statistics |          1 | resource_id      |            2 | st_sub_resource_id | A         |     1546165 |     NULL | NULL   | YES  | BTREE      |         |
| nr_statistics |          1 | st_time          |            1 | st_time            | A         |     1546165 |     NULL | NULL   |      | BTREE      |         |
| nr_statistics |          1 | st_site_id       |            1 | st_site_id         | A         |          16 |     NULL | NULL   |      | BTREE      |         |
| nr_statistics |          1 | st_resource_type |            1 | st_resource_type   | A         |          16 |       10 | NULL   |      | BTREE      |         |
+---------------+------------+------------------+--------------+--------------------+-----------+-------------+----------+--------+------+------------+---------+ 
```

询问：

```
SELECT st_resource_id AS docId, count(*) AS cnt
FROM nr_statistics
WHERE
  st_resource_type = 'document'
  AND st_sub_resource_id = 'text'
  AND st_time > DATE_SUB(NOW(), INTERVAL 7 DAY)
  AND st_site_id = 1
GROUP BY st_resource_id
ORDER BY cnt DESC
LIMIT 0, 5; 
```

查询计划：

```
+----+-------------+---------------+-------+-------------------------------------+-------------+---------+------+---------+----------------------------------------------+
| id | select_type | table         | type  | possible_keys                       | key         | key_len | ref  | rows    | Extra                                        |
+----+-------------+---------------+-------+-------------------------------------+-------------+---------+------+---------+----------------------------------------------+
|  1 | SIMPLE      | nr_statistics | index | st_time,st_site_id,st_resource_type | resource_id | 197     | NULL | 1581044 | Using where; Using temporary; Using filesort |
+----+-------------+---------------+-------+-------------------------------------+-------------+---------+------+---------+----------------------------------------------+ 
```

表有 ~1,666,383 行。查询运行非常缓慢。在 MySQL 进程列表中，我在“复制到 tmp 表阶段”中看到此查询很长时间（> 1 分钟）。查询会产生繁重的 I/O 负载。我不明白如何解决问题并加快查询执行。

如果问题是由错误的索引引起的，那么哪些索引是正确的呢？

**UPD。**我创建了新的复合索引：

```
| nr_statistics |          1 | st_site_id_2     |            1 | st_site_id         | A         |          16 |     NULL | NULL   |      | BTREE      |         |
| nr_statistics |          1 | st_site_id_2     |            2 | st_resource_type   | A         |          16 |     NULL | NULL   |      | BTREE      |         |
| nr_statistics |          1 | st_site_id_2     |            3 | st_sub_resource_id | A         |      752018 |     NULL | NULL   | YES  | BTREE      |         |
| nr_statistics |          1 | st_site_id_2     |            4 | st_time            | A         |     1504037 |     NULL | NULL   |      | BTREE      |         |
| nr_statistics |          1 | st_site_id_2     |            5 | st_resource_id     | A         |     1504037 |     NULL | NULL   |      | BTREE      |         | 
```

现在查询计划是：

```
+----+-------------+---------------+-------+---------------+--------------+---------+------+-------+-----------------------------------------------------------+
| id | select_type | table         | type  | possible_keys | key          | key_len | ref  | rows  | Extra                                                     |
+----+-------------+---------------+-------+---------------+--------------+---------+------+-------+-----------------------------------------------------------+
|  1 | SIMPLE      | nr_statistics | range | st_site_id_2  | st_site_id_2 | 406     | NULL | 21168 | Using where; Using index; Using temporary; Using filesort |
+----+-------------+---------------+-------+---------------+--------------+---------+------+-------+-----------------------------------------------------------+ 
```

查询现在运行得非常快（0.0x 秒），但我必须强制使用新索引：

```
SELECT st_resource_id as docId, count( * ) AS Cnt
FROM nr_statistics
USE INDEX (st_site_id_2)
WHERE st_resource_type = 'document'
AND st_sub_resource_id = 'text'
AND st_time > DATE_SUB( NOW( ) , INTERVAL 7 DAY )
AND st_site_id = 1
GROUP BY st_resource_id
ORDER BY cnt DESC
LIMIT 0 , 5; 
```

虽然问题得到了解决（不是漂亮但有效的方法），但我仍然有一些悬而未决的问题（见评论）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:32:02.537

在 上创建复合索引`(st_site_id, st_resource_type, st_sub_resourse_id, st_time, st_resource_id)`。

但是，您仍将拥有`temporary`并`filesort`在计划中，因为您正在订购`COUNT(*)`不可索引的产品。

如果您需要快速且频繁地运行此查询，则必须创建一个聚合表，该表将存储每个站点/资源/子资源/周组合的计数并在触发器中更新它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T12:31:27.810

您是否尝试在 上创建复合索引`st_resource_type, st_resource_id, st_time and st_site_id`？在我看来，您有多个索引，但大多数索引都在单个列上，或者可能是 2 列。通过使用包含更多您需要的列的复合索引，它可以提高性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T21:19:38.790

当使用多个 where 子句进行查询时，您编写它们的顺序应该与您编写查询的顺序相匹配。

在您的特定情况下，它将是：

```
CREATE INDEX stats_index ON nr_statistics (st_resource_type, st_sub_resource_id, st_time, st_site_id); 
```

这应该会给你一个很好的速度提升。

# jquery - 动态重定向和加载数据？

> ID：10850146
> 
> 赞同：0
> 
> 时间：2012-06-01T12:20:41.497
> 
> 标签：jquery

我有一个菜单。菜单中的每个项目都链接到一个表单。因此，在我的整个应用程序中，当最终用户随时单击菜单项时，页面将被重定向到特定（xyz）页面以及要在该 xyz 页面的 div 中显示的表单。谁能告诉我如何在 jquery 或 javascript 中执行此操作。我google了很多，但我没有找到正确的解决方案。

这是我写的代码：

```
$(document).ready(function() {
$('.load').click(function() {
    window.location.href = 'patient_account.php';
    return false;
    $("a").click(function()
{
$.ajax({
url : $(this).attr("href"),
success : function (data) {
$("#dynamicContent").html(data);
}
});
 return false;
}); 
```

它正在重定向到下一页，但它没有在需要的页面中加载与菜单项相关的表单。

提前谢谢你，拉姆塞

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:37:37.470

只需使用超链接

```
<a href="xyz.htm" >XYZ Form</a> 
```

很抱歉，但我不明白您面临的问题是什么。如果要在单击菜单项时显示不同的页面，则只需提供超链接。

# delphi - citrix环境下delphi代码发送邮件

> ID：10850149
> 
> 赞同：1
> 
> 时间：2012-06-01T12:20:48.677
> 
> 标签：delphi, delphi-xe, mapi

我们的客户大多使用 MS Outlook，但有时其他客户也会给我们从代码创建新邮件窗口带来麻烦。

我们还尝试实现 mailto: 替代方案，但使用 attachment="C:\filename.txt" 失败。

无论如何，使用发送到邮件接收者右键单击文件大多数情况下都有效，但我从未找到通过代码执行此操作的方法。

还有其他方法可以创建带有文件附件的新邮件吗？

我们还经历过由于 mapi 代码导致整个应用程序崩溃，windows 错误通常会给出如下所示的错误：

```
Faulting module name: dhcpcsvc.DLL, version: 6.1.7600.16385, time stamp: 0x4a5bd9b5
Exception code: 0xc0000005
Fault offset: 0x00001d00
Faulting process id: 0x868
Faulting application start time: 0x01ca7fbc86a3e836
Faulting application path: C:\Program Files (x86)\Microsoft Office\OFFICE11\OUTLOOK.EXE
Faulting module path: C:\Windows\system32\dhcpcsvc.DLL
Report Id: c60fa358-ebaf-11de-8b4f-0026b9486d93 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:41:18.480

> 还有其他方法可以创建带有文件附件的新邮件吗？

是的。您可以使用 Indy 直接发送：TIdSMTP + TIdMessage + TIdAttachmentFile。

示例代码：

```
IdMessage := TIdMessage.Create(nil);
IdSMTP := TIdSMTP.Create(nil);
try
    IdMessage.Subject := 'YourMessageSubject';
    IdMessage.Recipients := 'targetmail1@example.com,targetmail2@example.com';
    IdMessage.CCList := ...
    IdMessage.BccList := ...
    IdMessage.Body.Text := 'YourMessageText';
    IdSMTP.Host := 'smtp.example.com';
    i := 1;
    TIdAttachmentFile.Create(IdMessage.MessageParts, TFileName('YourAttachmentFileName'));
    try
      IdSMTP.Connect;
      IdSMTP.Send(IdMessage);
    finally
      IdSMTP.Disconnect;
    end;
finally
    IdMessage.Free;
    IdSMTP.Free;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:45:51.663

请参阅：[**如何使用 Delphi 模拟“发送到...”？**](http://mikejustin.wordpress.com/2009/07/03/how-can-i-simulate-send-to-with-delphi/)

该代码显示了如何使用已附加的文件打开新的“撰写邮件”窗口，模拟“发送到...”外壳上下文菜单的操作系统默认操作。

# jquery - jQuery portlet，文本字段不起作用

> ID：10850153
> 
> 赞同：0
> 
> 时间：2012-06-01T12:21:00.540
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我有一组 jQuery portlet，其中包含一些文本字段。但我无法编辑文本字段。这似乎只发生在 FireFox (12.0) 中。

一个例子：http: [//jsfiddle.net/xXwP7/](http://jsfiddle.net/xXwP7/)

有人知道问题可能是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:29:21.047

这条线`$( ".column" ).disableSelection();`使它们被禁用。

# c++ - OpenMP 中的“静态”和“动态”调度有什么区别？

> ID：10850155
> 
> 赞同：68
> 
> 时间：2012-06-01T12:21:07.310
> 
> 标签：c++, multithreading, openmp

我开始使用 C++ 使用 OpenMP。

我有两个问题：

1.  是什么`#pragma omp for schedule`？
2.  `dynamic`和 和有什么不一样`static`？

请举例说明。

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-06-01T15:10:02.537

其他人已经回答了大部分问题，但我想指出一些特定的调度类型比其他调度类型更适合的特定情况。调度控制如何在线程之间划分循环迭代。选择正确的时间表会对应用程序的速度产生很大影响。

`static`schedule 意味着迭代块以循环方式静态映射到执行线程。静态调度的好处在于，OpenMP 运行时保证如果您有两个具有相同迭代次数的独立循环并使用静态调度以相同数量的线程执行它们，那么每个线程将接收完全相同的迭代范围（ s) 在两个平行区域中。这在 NUMA 系统上非常重要：如果您在第一个循环中触及一些内存，它将驻留在执行线程所在的 NUMA 节点上。然后在第二个循环中，同一个线程可以更快地访问同一个内存位置，因为它将驻留在同一个 NUMA 节点上。

想象有两个 NUMA 节点：节点 0 和节点 1，例如一个双插槽 Intel Nehalem 板，两个插槽中都有 4 核 CPU。然后线程 0、1、2 和 3 将驻留在节点 0 上，线程 4、5、6 和 7 将驻留在节点 1 上：

```
|             | core 0 | thread 0 |
| socket 0    | core 1 | thread 1 |
| NUMA node 0 | core 2 | thread 2 |
|             | core 3 | thread 3 |

|             | core 4 | thread 4 |
| socket 1    | core 5 | thread 5 |
| NUMA node 1 | core 6 | thread 6 |
|             | core 7 | thread 7 | 
```

每个内核都可以从每个 NUMA 节点访问内存，但远程访问比本地节点访问慢（在 Intel 上慢 1.5 倍 - 1.9 倍）。你运行这样的东西：

```
char *a = (char *)malloc(8*4096);

#pragma omp parallel for schedule(static,1) num_threads(8)
for (int i = 0; i < 8; i++)
   memset(&a[i*4096], 0, 4096); 
```

如果不使用大页面，在这种情况下，4096 字节是 x86 上 Linux 上一个内存页面的标准大小。此代码会将整个 32 KiB 数组归零`a`。该`malloc()`调用仅保留虚拟地址空间，但实际上并没有“触及”物理内存（这是默认行为，除非使用其他版本`malloc`，例如像`calloc()`这样将内存归零的版本）。现在这个数组是连续的，但只在虚拟内存中。在物理内存中，一半位于连接到套接字 0 的内存中，另一半位于连接到套接字 1 的内存中。这是因为不同的部分被不同的线程归零，并且这些线程位于不同的内核上，并且有一种叫做*first touch的东西*NUMA 策略，这意味着内存页分配在第一次“接触”内存页的线程所在的 NUMA 节点上。

```
|             | core 0 | thread 0 | a[0]     ... a[4095]
| socket 0    | core 1 | thread 1 | a[4096]  ... a[8191]
| NUMA node 0 | core 2 | thread 2 | a[8192]  ... a[12287]
|             | core 3 | thread 3 | a[12288] ... a[16383]

|             | core 4 | thread 4 | a[16384] ... a[20479]
| socket 1    | core 5 | thread 5 | a[20480] ... a[24575]
| NUMA node 1 | core 6 | thread 6 | a[24576] ... a[28671]
|             | core 7 | thread 7 | a[28672] ... a[32768] 
```

现在让我们像这样运行另一个循环：

```
#pragma omp parallel for schedule(static,1) num_threads(8)
for (i = 0; i < 8; i++)
   memset(&a[i*4096], 1, 4096); 
```

每个线程都将访问已经映射的物理内存，并且它将具有与第一个循环期间相同的线程到内存区域的映射。这意味着线程只会访问位于其本地内存块中的内存，这将是快速的。

现在想象另一个调度方案用于第二个循环：`schedule(static,2)`. 这会将迭代空间“切割”成两个迭代的块，总共会有 4 个这样的块。将会发生的是，我们将有以下线程到内存位置映射（通过迭代次数）：

```
|             | core 0 | thread 0 | a[0]     ... a[8191]  <- OK, same memory node
| socket 0    | core 1 | thread 1 | a[8192]  ... a[16383] <- OK, same memory node
| NUMA node 0 | core 2 | thread 2 | a[16384] ... a[24575] <- Not OK, remote memory
|             | core 3 | thread 3 | a[24576] ... a[32768] <- Not OK, remote memory

|             | core 4 | thread 4 | <idle>
| socket 1    | core 5 | thread 5 | <idle>
| NUMA node 1 | core 6 | thread 6 | <idle>
|             | core 7 | thread 7 | <idle> 
```

这里发生了两件坏事：

*   线程 4 到 7 保持空闲，一半的计算能力丢失；
*   线程 2 和 3 访问非本地内存，它们需要大约两倍的时间才能完成，在此期间线程 0 和 1 将保持空闲状态。

所以使用静态调度的优点之一是它提高了内存访问的局部性。缺点是调度参数选择不当会破坏性能。

`dynamic`日程安排以“先到先得”为基础。具有相同线程数的两次运行可能（并且很可能会）产生完全不同的“迭代空间”->“线程”映射，因为可以很容易地验证：

```
$ cat dyn.c
#include <stdio.h>
#include <omp.h>

int main (void)
{
  int i;

  #pragma omp parallel num_threads(8)
  {
    #pragma omp for schedule(dynamic,1)
    for (i = 0; i < 8; i++)
      printf("[1] iter %0d, tid %0d\n", i, omp_get_thread_num());

    #pragma omp for schedule(dynamic,1)
    for (i = 0; i < 8; i++)
      printf("[2] iter %0d, tid %0d\n", i, omp_get_thread_num());
  }

  return 0;
}

$ icc -openmp -o dyn.x dyn.c

$ OMP_NUM_THREADS=8 ./dyn.x | sort
[1] iter 0, tid 2
[1] iter 1, tid 0
[1] iter 2, tid 7
[1] iter 3, tid 3
[1] iter 4, tid 4
[1] iter 5, tid 1
[1] iter 6, tid 6
[1] iter 7, tid 5
[2] iter 0, tid 0
[2] iter 1, tid 2
[2] iter 2, tid 7
[2] iter 3, tid 3
[2] iter 4, tid 6
[2] iter 5, tid 1
[2] iter 6, tid 5
[2] iter 7, tid 4 
```

`gcc`（代替使用时会观察到相同的行为）

如果本节中的示例代码`static`是使用调度运行的，`dynamic`那么将只有 1/70 (1.4%) 的机会会保留原始位置，而 69/70 (98.6%) 的机会会发生远程访问。这一事实经常被忽视，因此实现了次优性能。

`static`在调度和调度之间进行选择还有另一个原因`dynamic`- 工作负载平衡。如果每次迭代花费的时间与完成的平均时间相差很大，那么在静态情况下可能会出现高度的工作不平衡。以完成迭代的时间随迭代次数线性增长的情况为例。如果迭代空间在两个线程之间静态划分，则第二个线程的工作量将是第一个线程的三倍，因此对于 2/3 的计算时间，第一个线程将处于空闲状态。动态调度会引入一些额外的开销，但在这种特殊情况下会导致更好的工作负载分配。一种特殊的`dynamic`调度是`guided`随着工作的进行，为每个任务分配越来越小的迭代块。

由于预编译代码可以在各种平台上运行，如果最终用户可以控制调度，那就太好了。这就是 OpenMP 提供特殊`schedule(runtime)`子句的原因。通过`runtime`调度，类型取自环境变量的内容`OMP_SCHEDULE`。这允许在不重新编译应用程序的情况下测试不同的调度类型，并且还允许最终用户针对他或她的平台进行微调。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-06-01T12:48:34.833

我认为误解来自于你错过了关于 OpenMP 的观点。一句话 OpenMP 允许您通过启用并行性来更快地执行您的程序。在程序中，可以通过多种方式启用并行性，其中一种是使用线程。假设你有和数组：

```
[1,2,3,4,5,6,7,8,9,10] 
```

并且您想将此数组中的所有元素递增 1。

如果你要使用

```
#pragma omp for schedule(static, 5) 
```

这意味着将为每个线程分配 5 次连续迭代。在这种情况下，第一个线程将采用 5 个数字。第二个将需要另外 5 个，依此类推，直到没有更多数据要处理或达到最大线程数（通常等于内核数）。工作量的共享是在编译期间完成的。

的情况下

```
#pragma omp for schedule(dynamic, 5) 
```

工作将在线程之间共享，但此过程将在运行时发生。因此涉及更多的开销。第二个参数指定数据块的大小。

对 OpenMP 不是很熟悉，我冒着假设当编译的代码要在具有与编译代码的配置不同的配置的系统上运行时，动态类型更合适。

我会推荐下面的页面，其中讨论了用于并行化代码、前提条件和限制的技术

[https://computing.llnl.gov/tutorials/parallel_comp/](https://computing.llnl.gov/tutorials/parallel_comp/)

**附加链接**：
[http ://en.wikipedia.org/wiki/OpenMP](http://en.wikipedia.org/wiki/OpenMP)
[C 中 openMP 中静态和动态调度的区别](https://stackoverflow.com/questions/4261087/difference-between-static-and-dynamic-schedule-in-openmp-in-c)
[http://openmp.blogspot.se/](http://openmp.blogspot.se/)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-06-01T12:26:16.893

循环分区方案不同。静态调度器会将 N 个元素的循环划分为 M 个子集，然后每个子集将包含严格的 N/M 个元素。

动态方法动态计算子集的大小，如果子集的计算时间不同，这可能很有用。

如果计算时间变化不大，则应使用静态方法。

# android - 保持wifi收音机打开的不同可能性？

> ID：10850157
> 
> 赞同：2
> 
> 时间：2012-06-01T12:21:14.640
> 
> 标签：android, wifi, wakelock

我一直在尽可能多地阅读有关 Android SDK 的开发人员文档的以下内容：

*   无线唤醒锁
*   WifiManager.WIFI_MODE_FULL_HIGH_PERF
*   Wifi 睡眠政策

他们都在自己的背景下有意义，但我看不到“大局”可以这么说。

1.  我猜 wifi 唤醒锁和 WIFI_MODE_FULL_HIGH_PERF 设置都会覆盖用户睡眠策略。那正确吗？

2.  如果我有“从不”的睡眠策略，并且我只是为自己制作实验性 APK:s，通过 wifi 在后台下载东西，我想我不需要 wifi 唤醒锁或 WIFI_MODE_FULL_HIGH_PERF？

3.  我看到的使用 wifi 唤醒锁的[代码也获得了电源唤醒锁。](https://stackoverflow.com/questions/5147203/wifi-sleeps-even-with-lock)有没有什么情况我只想获取wifi锁而不是电源锁？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T16:16:39.997

1.  如果设备进入深度睡眠并关闭 wi-fi 无线电，则 wi-fi 锁将在获取锁时将其重新唤醒。正确，这与您的 Wi-Fi 政策无关。

2.  我认为你倒退了 - 政策问题说“在睡眠期间保持 Wi-Fi 开启”，所以如果你想避免需要 wifi 锁，你会选择“始终”选项值。我想看看 Wi-Fi 保持连接的电池消耗分析与深度睡眠中零星的 4G 的对比...

3.  我从来不需要或使用过电源唤醒锁。只是系统和wifi，一切都很好，我可以执行所需的功能。

# cakephp-1.3 - 从 cakephp 中的数据库值生成字符串

> ID：10850162
> 
> 赞同：0
> 
> 时间：2012-06-01T12:21:26.480
> 
> 标签：cakephp-1.3

我的数据库中有一个名为商家的表，在该表中我有一个名为 Mercer_code 的字段，我想为我的字段生成一个 8 代码，这样前两个字符包含来自各州的 state_name 的前两个字母表和接下来的两个字符包含我的 city_name 来自城市表的前两个字母，最后四个字符应包含从 ooo1 开始的数字。在添加商家时，我希望此代码自动添加，并保存在我的数据库中我是 cakehp 的初学者，所以请简要回答我，如果我找到解决方案将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:00:50.313

Merchant 模型可能与 City 模型（如 belongsTo）相关联，而 City 模型又与 State 模型（belongsTo 也是）相关联。您可以为 Merchant 模型创建 afterSave 回调并检查参数 $created。如果是真的，只需从相关模型中获取 2 条记录并编写您的商家代码。像这样：（考虑到您对 City 模型使用 Containable 行为）：

```
public function afterSave($created) {
    parent::afterSave($created);
    if ($created) {
        $this->City->contain('State');
        $names = $this->City->find('first', array(
            'conditions' => array(
                'City.id' => $this->data['Merchant']['city_id']
            ),
            'fields' => array(
                'City.city_name',
                'State.state_name',
            )
        ));

        if (!empty($names)) {
            $merchant_code = substr($names['State']['state_name'], 0, 2)
                . substr($names['City']['city_name'], 0, 2)
                . sprintf('%1$04d', $this->getLastInsertID());
            $this->saveField('merchant_code', $merchant_code);
        }
    }
} 
```

# ruby-on-rails-3 - Javascript 文件未在 Rails 开发中更新

> ID：10850163
> 
> 赞同：16
> 
> 时间：2012-06-01T12:21:28.587
> 
> 标签：ruby-on-rails-3, asset-pipeline

我在 app/assets/javascripts 下更改了一个 JS 文件，但它仍然是一样的。我删除了文件并重新创建，但内容仍然是旧的。这是我的 development.rb 文件：

```
App::Application.configure do
  # Settings specified here will take precedence over those in config/application.rb

  config.serve_static_assets = false

  # In the development environment your application's code is reloaded on
  # every request.  This slows down response time but is perfect for development
  # since you don't have to restart the web server when you make code changes.
  config.cache_classes = false

  # Log error messages when you accidentally call methods on nil.
  config.whiny_nils = true

  # Show full error reports and disable caching
  config.consider_all_requests_local       = true
  config.action_controller.perform_caching = false

  # Don't care if the mailer can't send
  config.action_mailer.raise_delivery_errors = false

  # Print deprecation notices to the Rails logger
  config.active_support.deprecation = :log

  # Only use best-standards-support built into browsers
  config.action_dispatch.best_standards_support = :builtin

  # Do not compress assets
  config.assets.compress = false

  # Expands the lines which load the assets
  config.assets.debug = true

  config.action_mailer.delivery_method = :letter_opener

  config.action_mailer.default_url_options = { :host => "lvh.me:3000" }

  # Raise exception on mass assignment protection for Active Record models
  # config.active_record.mass_assignment_sanitizer = :strict

  # Log the query plan for queries taking more than this (works
  # with SQLite, MySQL, and PostgreSQL)
  config.active_record.auto_explain_threshold_in_seconds = 0.5

  config.log_tags = [:uuid, :remote_ip]
end 
```

JS 文件使用以下代码加载到 header 标记内：

```
<script src="/assets/deals.js?body=1" type="text/javascript"></script> 
```

这是开发中加载JS的正常方式

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-05T19:45:46.767

Try to clear precompiled assets:

```
bundle exec rake assets:clean 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-05-28T19:26:44.017

尝试删除 tmp 文件夹，然后重新启动服务器 - rails s。这样就可以了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-20T10:53:19.260

捆绑 exec rake assets:clean 然后捆绑 exec rake assets:precompile

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-28T11:41:19.223

或者删除`public/assets`文件夹，然后重新启动应用程序

# ios - ios日期选择器到unix时间戳

> ID：10850165
> 
> 赞同：0
> 
> 时间：2012-06-01T12:21:29.873
> 
> 标签：ios, datepicker, timestamp

我有一个来自日期选择器的日期，我需要将其设置为 unix 时间戳，我记录了它但得到了错误的值，

这是我的代码：

```
time_t unixTime = (time_t) [self.datePicker.date timeIntervalSince1970];

    NSLog(@"el timestamp:: %lo", unixTime); 
```

这是日志

```
2012-06-01 22:13:18.543 ClientApp[50494:12503] escojio ::2012-06-01 12:12:16 +0000
2012-06-01 22:14:13.163 ClientApp[50494:12503] el timestamp:: 11762137660 
```

我去一个时间戳计算器并得到一个完全错误的时间，我必须以某种方式格式化它吗？

所以我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T12:27:40.963

格式说明符以`%lo`八进制表示法输出一个数字。您确定将其与具有相同符号的 Unix 时间戳进行比较吗？

11762137660(oct) == 1338556336(dec)，这听起来很适合今天。

# php - php无法加载扩展

> ID：10850168
> 
> 赞同：0
> 
> 时间：2012-06-01T12:21:42.003
> 
> 标签：php, apache

我有...

> 1.编译制作ssh2.so。
> 
> 2.将 PHP 扩展 (ssh2.so) 放在“extension_dir”
> 
> 中 3\. 编辑正确的 php.ini 文件 (extension=ssh2.so)，文件“加载的配置文件”条目在 phpinfo() 输出中列出。
> 
> 4.restarted apache服务器。

但是，“php -m”不打印 ssh2 模块。

任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:04:05.407

要`php -m`显示 ssh2 模块，您必须为此*编辑 CLI php.ini*。

通常有两个 php.ini，一个用于 Apache 模块，另一个用于 CLI 版本的 PHP。

在 Ubuntu 中，您将编辑`/etc/php5/cli/php.ini`，但 YMMV

哦，语法非常相似，所以复制粘贴就可以了。

希望这可以帮助 ！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T12:39:32.413

这不是`php -m`您想要做的，而是在您的网站中创建一个 php 文件，其中包含：

```
<?php
    phpinfo();
?> 
```

通过 Apache 访问它会显示加载了哪些模块。您可能需要配置 Apache 以保护对此的访问。

# regex - 如何在 perl 中使用 (?:regex) 来匹配以下模式

> ID：10850169
> 
> 赞同：-4
> 
> 时间：2012-06-01T12:21:46.253
> 
> 标签：regex, perl

```
$string = "hello/welcome"; 
```

我只想“欢迎”。

```
$string = "hello-welcome-to-the-world"; 
```

我想要“你好-欢迎”

我试试这个

```
print $1 if($string =~ m#(?:/|)(.*)(?:-to-)#);  # got hello-welcome
print $1 if($string =~ m#(?:/)(.*)(?:-to-|)#);  # got welcome 
```

但我无法从单个 regexp 获得所需的输出。请解决并解释...

通过使用这个`(?:\w.+/)?(.*?(?=$|-to-))`，我得到了两个字符串的答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:36:08.417

此正则表达式匹配您的两种情况。所需的输出也在`$1`.

```
((?:\w+-)?welcome) 
```

`(?:\w+-)?`可选地匹配一个单词，然后是欢迎前的连字符。由于它是可选匹配的，如果它不存在，则输出只是“欢迎”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:41:44.000

```
(?<=^|/).*?(?=$|-to-) 
```

这匹配（字符串开头或斜杠）和（字符串结尾或-to-）之间的最短匹配。

如果您使用环视，这是不需要提取捕获组的众多情况中的另一种。

编辑：由于可变长度后视不起作用，试试这个：

```
(?<![^/])[^/]*?(?=$|-to-) 
```

# php - 将 RTF 作为电子邮件发送 php

> ID：10850174
> 
> 赞同：0
> 
> 时间：2012-06-01T12:22:01.693
> 
> 标签：php, email, rtf, phpmailer

我有一个包含我想用作电子邮件正文的 RTF 文档（存储为文本）的字段。有没有办法使用 PHPMailer 将其作为电子邮件的正文发送？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:28:54.003

首先，您必须将 rtf 转换为 html。使用这个：[免费（最好）PHP RTF 到 HTML 转换器？](https://stackoverflow.com/questions/4047411/free-preferably-php-rtf-to-html-converter)

然后在电子邮件中发送 html 文本

# iphone - iOS：图像在保存为 PNG 表示数据后旋转 90 度

> ID：10850184
> 
> 赞同：46
> 
> 时间：2012-06-01T12:23:12.497
> 
> 标签：iphone, uiimage, image-rotation, ios5.1, landscape-portrait

我已经进行了足够的研究以使其正常工作，但无法修复它。从相机拍照后，只要我将图像存储为 UIImage，就可以了，但是一旦我将此图像存储为 PNG 表示形式，它就会旋转 90 度。

以下是我的代码和我尝试过的所有事情：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info 
{
    NSString *mediaType = [info valueForKey:UIImagePickerControllerMediaType];

    if([mediaType isEqualToString:(NSString*)kUTTypeImage]) 
    {
        AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
        delegate.originalPhoto  = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
        NSLog(@"Saving photo");
        [self saveImage];
        NSLog(@"Fixing orientation");
        delegate.fixOrientationPhoto  = [self fixOrientation:[UIImage imageWithContentsOfFile:[delegate filePath:imageName]]];      
        NSLog(@"Scaling photo");
        delegate.scaledAndRotatedPhoto  =  [self scaleAndRotateImage:[UIImage imageWithContentsOfFile:[delegate filePath:imageName]]];
    }
    [picker dismissModalViewControllerAnimated:YES];
    [picker release];
}

- (void)saveImage
{
    AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    NSData *imageData = UIImagePNGRepresentation(delegate.originalPhoto);
    [imageData writeToFile:[delegate filePath:imageName] atomically:YES];
} 
```

这里的 fixOrientation 和 scaleAndRotateImage 函数分别取自[这里](https://stackoverflow.com/questions/9324130/iphoneimage-captured-from-camera-rotate-90-degree-automatically)和[这里](https://stackoverflow.com/questions/10071313/image-taken-in-portrait-is-distorted-when-viewed-in-landscape)。当我将它们应用于 UIImage 时，它​​们可以正常工作并旋转图像，但如果我将图像保存为 PNG 表示并应用它们，它们就不起作用。

执行上述功能后请参考下图：

![第一张照片是原始照片，第二张是保存的，第三张和第四张是在保存的图像上应用 fixorientation 和 scaleandrotate 功能后](../Images/a24c15d6aebbf211b32c7ce82c313120.png)

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-06-01T12:35:09.767

从 iOS 4.0 开始，当相机拍照时它在保存之前不会旋转它，它

只需在 JPEG 的 EXIF 数据中设置一个旋转标志。如果将 UIImage 保存为 JPEG，它

将设置旋转标志。PNG 不支持旋转标志，因此如果将 UIImage 保存为

PNG，它将被错误地旋转并且没有设置标志来修复它。所以如果你想要PNG

图像您必须自己旋转它们，为此请检查此[链接](https://stackoverflow.com/questions/3554244/uiimagepngrepresentation-issues)。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2017-04-03T08:55:23.640

Rao 发布的 UIImage 扩展的 Swift 3.1 版本：

```
extension UIImage {
    func fixOrientation() -> UIImage {
        if self.imageOrientation == UIImageOrientation.up {
            return self
        }
        UIGraphicsBeginImageContextWithOptions(self.size, false, self.scale)
        self.draw(in: CGRect(x: 0, y: 0, width: self.size.width, height: self.size.height))
        if let normalizedImage: UIImage = UIGraphicsGetImageFromCurrentImageContext() {
            UIGraphicsEndImageContext()
            return normalizedImage
        } else {
            return self
        }
    }
} 
```

用法：

```
let cameraImage = //image captured from camera
let orientationFixedImage = cameraImage.fixOrientation() 
```

斯威夫特 4/5：

`UIImageOrientation.up`已重命名为`UIImage.Orientation.up`

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2016-09-20T13:29:43.787

**斯威夫特 4.2**

添加以下内容作为 UIImage 扩展，

```
extension UIImage {
    func fixOrientation() -> UIImage? {
        if self.imageOrientation == UIImage.Orientation.up {
            return self
        }

        UIGraphicsBeginImageContext(self.size)
        self.draw(in: CGRect(origin: .zero, size: self.size))
        let normalizedImage = UIGraphicsGetImageFromCurrentImageContext()
        UIGraphicsEndImageContext()
        return normalizedImage
    }
} 
```

示例用法：

```
let cameraImage = //image captured from camera
let orientationFixedImage = cameraImage.fixOrientation() 
```

解释：

当您调用 UIImage 的`draw(in:)`函数时会发生神奇的事情，该函数会根据***最初捕获的方向设置***重新绘制图像。[[链接到文档](https://developer.apple.com/documentation/uikit/uiimage/1624092-draw)]

确保`UIGraphicsBeginImageContext`在调用 draw 之前调用图像的大小，以便`draw`在当前上下文的空间中重写 UIImage。

`UIGraphicsGetImageFromCurrentImageContext`让您捕获重绘图像的任何结果，并`UIGraphicsEndImageContext`结束并释放图形上下文。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-03-09T13:48:47.927

我发现以下提示非常有用：

# 1\. 自然产出*是景观*

# 2\. .width / .height 受 .imageOrientation 影响

# 3 使用短尺寸而不是 .width

* * *

(1) 静态相机的“自然”输出**是风景。**

这是违反直觉的。肖像是 UIImagePickerController 等提供的唯一方式。但是当使用“普通”肖像相机时，你会得到 UIImageOrientationRight 作为“普通”方向

（我记得这一点的方式 - 视频的自然输出（当然）是风景；所以静止图像是相同的 - 即使 iPhone 都是关于肖像的。）

* * *

(2) .width 和 .height**确实受 .imageOrientation 的影响！！！！！！！！！**

一定要这样做，并在你的 iPhone 上尝试这两种方式，

```
NSLog(@"fromImage.imageOrientation is %d", fromImage.imageOrientation);
NSLog(@"fromImage.size.width  %f   fromImage.size.height  %f",
            fromImage.size.width, fromImage.size.height); 
```

你会看到 .height 和 .width 交换，“即使”真正的像素是横向的。

* * *

(3) 简单地使用“短尺寸”而不是.width，**通常可以解决很多问题**

我发现这非常有帮助。假设您可能想要图像的顶部正方形：

```
CGRect topRectOfOriginal = CGRectMake(0,0, im.size.width,im.size.width); 
```

这实际上是行不通的，当相机（“真的”）被横向握住时，你会得到一个压扁的图像。

但是，如果您非常简单地这样做

```
float shortDimension = fminf(im.size.width, im.size.height);
CGRect topRectOfOriginal = CGRectMake(0,0, shortDimension,shortDimension); 
```

然后“一切都已解决”，您实际上**“无需担心”**方向标志。同样，第 (3) 点不是万灵药，但它通常可以解决所有问题。

希望它可以帮助某人节省一些时间。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-12-08T23:11:32.167

[我在这里](https://wikigurus.com/Article/Show/66028/iOS-UIImagePickerController-result-image-orientation-after-upload)找到了这段代码，它实际上为我修复了它。对于我的应用程序，我拍了一张照片并保存了它，每次我加载它时，它都会附加令人讨厌的旋转（我抬头一看，这显然与 EXIF 以及 iPhone 拍摄和存储图像的方式有关）。这段代码为我修复了它。我不得不说，它最初是作为类/扩展/类别的补充（您可以从链接中找到原件。我像下面这样使用它作为一个简单的方法，因为我真的不想做一个整体仅用于此的类或类别。我只使用了肖像，但我认为代码适用于任何方向。但我不确定

吐槽一下，代码如下：

```
- (UIImage *)fixOrientationForImage:(UIImage*)neededImage {

    // No-op if the orientation is already correct
    if (neededImage.imageOrientation == UIImageOrientationUp) return neededImage;

    // We need to calculate the proper transformation to make the image upright.
    // We do it in 2 steps: Rotate if Left/Right/Down, and then flip if Mirrored.
    CGAffineTransform transform = CGAffineTransformIdentity;

    switch (neededImage.imageOrientation) {
        case UIImageOrientationDown:
        case UIImageOrientationDownMirrored:
            transform = CGAffineTransformTranslate(transform, neededImage.size.width, neededImage.size.height);
            transform = CGAffineTransformRotate(transform, M_PI);
            break;

        case UIImageOrientationLeft:
        case UIImageOrientationLeftMirrored:
            transform = CGAffineTransformTranslate(transform, neededImage.size.width, 0);
            transform = CGAffineTransformRotate(transform, M_PI_2);
            break;

        case UIImageOrientationRight:
        case UIImageOrientationRightMirrored:
            transform = CGAffineTransformTranslate(transform, 0, neededImage.size.height);
            transform = CGAffineTransformRotate(transform, -M_PI_2);
            break;
        case UIImageOrientationUp:
        case UIImageOrientationUpMirrored:
            break;
    }

    switch (neededImage.imageOrientation) {
        case UIImageOrientationUpMirrored:
        case UIImageOrientationDownMirrored:
            transform = CGAffineTransformTranslate(transform, neededImage.size.width, 0);
            transform = CGAffineTransformScale(transform, -1, 1);
            break;

        case UIImageOrientationLeftMirrored:
        case UIImageOrientationRightMirrored:
            transform = CGAffineTransformTranslate(transform, neededImage.size.height, 0);
            transform = CGAffineTransformScale(transform, -1, 1);
            break;
        case UIImageOrientationUp:
        case UIImageOrientationDown:
        case UIImageOrientationLeft:
        case UIImageOrientationRight:
            break;
    }

    // Now we draw the underlying CGImage into a new context, applying the transform
    // calculated above.
    CGContextRef ctx = CGBitmapContextCreate(NULL, neededImage.size.width, neededImage.size.height,
                                             CGImageGetBitsPerComponent(neededImage.CGImage), 0,
                                             CGImageGetColorSpace(neededImage.CGImage),
                                             CGImageGetBitmapInfo(neededImage.CGImage));
    CGContextConcatCTM(ctx, transform);
    switch (neededImage.imageOrientation) {
        case UIImageOrientationLeft:
        case UIImageOrientationLeftMirrored:
        case UIImageOrientationRight:
        case UIImageOrientationRightMirrored:
            // Grr...
            CGContextDrawImage(ctx, CGRectMake(0,0,neededImage.size.height,neededImage.size.width), neededImage.CGImage);
            break;

        default:
            CGContextDrawImage(ctx, CGRectMake(0,0,neededImage.size.width,neededImage.size.height), neededImage.CGImage);
            break;
    }

    // And now we just create a new UIImage from the drawing context
    CGImageRef cgimg = CGBitmapContextCreateImage(ctx);
    UIImage *img = [UIImage imageWithCGImage:cgimg];
    CGContextRelease(ctx);
    CGImageRelease(cgimg);
    return img;
} 
```

我不确定这对你有多大用处，但我希望它有所帮助:)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-01-31T05:39:57.443

试试这个，你可以使用

```
NSData *somenewImageData = UIImageJPEGRepresentation(newimg,1.0); 
```

代替

```
NSData *somenewImageData = UIImagePNGRepresentation(newimg); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-01T12:40:50.183

请尝试以下代码

```
UIImage *sourceImage = ... // Our image
CGRect selectionRect = CGRectMake(100.0, 100.0, 300.0, 400.0);
CGImageRef resultImageRef = CGImageCreateWithImageInRect(sourceImage.CGImage,
selectionRect);
UIImage *resultImage = [[UIImage alloc] initWithCGImage:resultImageRef]; 
```

和

```
CGRect TransformCGRectForUIImageOrientation(CGRect source, UIImageOrientation orientation, CGSize imageSize) {
switch (orientation) {
case UIImageOrientationLeft: { // EXIF #8
  CGAffineTransform txTranslate = CGAffineTransformMakeTranslation(imageSize.height, 0.0);
  CGAffineTransform txCompound = CGAffineTransformRotate(txTranslate,M_PI_2);
  return CGRectApplyAffineTransform(source, txCompound);
}
case UIImageOrientationDown: { // EXIF #3
  CGAffineTransform txTranslate = CGAffineTransformMakeTranslation(imageSize.width, imageSize.height);
  CGAffineTransform txCompound = CGAffineTransformRotate(txTranslate,M_PI);
  return CGRectApplyAffineTransform(source, txCompound);
}
case UIImageOrientationRight: { // EXIF #6
  CGAffineTransform txTranslate = CGAffineTransformMakeTranslation(0.0, imageSize.width);
  CGAffineTransform txCompound = CGAffineTransformRotate(txTranslate,M_PI + M_PI_2);
  return CGRectApplyAffineTransform(source, txCompound);
}
case UIImageOrientationUp: // EXIF #1 - do nothing
  default: // EXIF 2,4,5,7 - ignore
  return source;
}
}
  ...
UIImage *sourceImage = ... // Our image
 CGRect selectionRect = CGRectMake(100.0, 100.0, 300.0, 400.0);
CGRect transformedRect = TransformCGRectForUIImageOrientation(selectionRect,  sourceImage.imageOrientation, sourceImage.size);
CGImageRef resultImageRef = CGImageCreateWithImageInRect(sourceImage.CGImage, transformedRect);
UIImage *resultImage = [[UIImage alloc] initWithCGImage:resultImageRef]; 
```

我从以下链接中引用了更多[详细信息](http://www.niftybean.com/2009/10/selecting-regions-from-rotated-exif-images-on-iphone/)

最好的祝福 ：-）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-26T12:35:12.173

试试这个代码：

```
NSData *imageData = UIImageJPEGRepresentation(delegate.originalPhoto,100); 
```

# php - 如何从 PHP 中的日期字符串中查找日期？

> ID：10850185
> 
> 赞同：4
> 
> 时间：2012-06-01T12:23:14.623
> 
> 标签：php, date

我有如下字符串`"June 1, 2012"`。我需要找到上述字符串的日期。

这个值从 wordpress postdate() 函数返回。

我怎么能在 php 中做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T12:26:00.877

你不能用 解析日期`strtotime`吗？如果是这样，您可以这样做：

```
<?php
date('l', strtotime('June 1, 2012'));
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T12:34:49.790

```
<?php echo date('d',strtotime('June 1, 2012')); ?> 
```

您可以使用变量而不是静态日期字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T12:25:11.880

```
$unix_timestamp = strtotime($date);
echo date('l', $unix_timestamp); // displays Monday|Tuesday|Wednesday... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T12:25:37.853

```
$date = "June 1, 2012";
echo date('l', strtotime($date)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T12:25:40.537

```
$timestamp= strtotime("June 1, 2012");
$day = date('l', $timestamp);

echo $day; 
```

有关更多详细信息，请阅读[strtotime](http://php.net/manual/en/function.strtotime.php)和[date](http://php.net/manual/en/function.date.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-01T12:25:41.703

```
$date = "June 1, 2012"
$day = date('j', strtotime($date)) 
```

您可以在日期功能中执行不同的选项来显示日期（或其他需要的日期部分）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-01T12:27:14.177

虽然答案很容易找到，但您最好先研究一下：

[http://uk.php.net/manual/en/function.strtotime.php](http://uk.php.net/manual/en/function.strtotime.php)

# watir - 在 Firefox 上运行的脚本显示错误

> ID：10850187
> 
> 赞同：0
> 
> 时间：2012-06-01T12:23:18.400
> 
> 标签：watir, watir-webdriver

使用 Firefox 运行脚本时显示错误使用 Roo 和测试/单元的用户我在执行时从 excel 表和用户调用信息但显示错误显示错误如下

```
C:/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.0.9-x86-mingw32/lib/ffi/platform.rb:2
: Use RbConfig instead of obsolete and deprecated Config.
Started ChromeDriver
port=52228
version=20.0.1133.0
log=D:\chromedriver.log
C:/Ruby193/lib/ruby/1.9.1/net/protocol.rb:141:in `read_nonblock': An existing c
nnection was forcibly closed by the remote host. (Errno::ECONNRESET)
        from C:/Ruby193/lib/ruby/1.9.1/net/protocol.rb:141:in `rbuf_fill'
        from C:/Ruby193/lib/ruby/1.9.1/net/protocol.rb:122:in `readuntil'
        from C:/Ruby193/lib/ruby/1.9.1/net/protocol.rb:132:in `readline'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:2562:in `read_status_line'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:2551:in `read_new'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1319:in `block in transport_
equest'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1316:in `catch'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1316:in `transport_request'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1293:in `request'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1064:in `head'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.21.2/lib/
elenium/webdriver/chrome/service.rb:62:in `block in stop'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:745:in `start'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:557:in `start'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.21.2/lib/
elenium/webdriver/chrome/service.rb:58:in `stop'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.21.2/lib/
elenium/webdriver/chrome/service.rb:52:in `block in start'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.21.2/lib/
elenium/webdriver/common/platform.rb:124:in `block in exit_hook' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:58:02.940

请检查您是否安装了最新的 ffi gem。

`gem install ffi`

然后试一试。

# android - 获取经纬度后如何获取用户的位置

> ID：10850189
> 
> 赞同：0
> 
> 时间：2012-06-01T12:23:20.043
> 
> 标签：android, location

我是android移动开发的新手。我已经使用了 Location Manager 类并成功地找出了用户的经度和纬度。我想使用这些值来查找城市名称。我不想要地图，我只想得到城市名称。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:26:23.577

[https://github.com/commonsguy/cw-lunchlist](https://github.com/commonsguy/cw-lunchlist)

[https://github.com/commonsguy/cw-android](https://github.com/commonsguy/cw-android)

[http://developer.android.com/reference/android/location/LocationManager.html](http://developer.android.com/reference/android/location/LocationManager.html)

看看这些网站，这将对您有所帮助！！！！！！1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T12:38:20.047

首先使用 Location 和 LocationManager 类（您已完成）获取纬度和经度。现在尝试下面的代码获取城市，地址信息

```
 double latitude = location.getLatitude();
    double longitude = location.getLongitude();
    Geocoder gc = new Geocoder(this, Locale.getDefault());
    try {
    List<Address> addresses = gc.getFromLocation(lat, lng, 1);
    StringBuilder sb = new StringBuilder();
    if (addresses.size() > 0) {
    Address address = addresses.get(0);
    for (int i = 0; i < address.getMaxAddressLineIndex(); i++)
    sb.append(address.getAddressLine(i)).append("\n");
    sb.append(address.getLocality()).append("\n");
    sb.append(address.getPostalCode()).append("\n");
    sb.append(address.getCountryName()); 
```

城市信息现在在某人。现在将 sb 转换为 String（使用 sb.toString() ）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T13:28:09.117

您可以使用[`Geocoder`](http://developer.android.com/reference/android/location/Geocoder.html)

```
Geocoder myLocation = new Geocoder(context, Locale.getDefault());
List<Address> myList = null;
try {
    myList = myLocation.getFromLocation(latitude, longitude, 1);
} catch (IOException e) {} 
```

经度和纬度是网络或 GPS 检索的值

# jquery - jquery幻灯片无法垂直居中图像

> ID：10850195
> 
> 赞同：0
> 
> 时间：2012-06-01T12:23:59.677
> 
> 标签：jquery, slideshow

我有一个 jquery 幻灯片，在纵向和横向位置都有两种不同的图像尺寸。我设法将它们水平居中，但无法让它们垂直居中。

我尝试在 #slideshow { 中使用垂直对齐，但它没有用。我尝试指定一个“顶部”像素位置以使横向图像居中，但纵向图像未居中。有人可以帮忙吗？我已经包含了下面的代码。谢谢！

```
 function slideSwitch() {
    var $active = $('#slideshow DIV.active');

    if ( $active.length == 0 ) $active = $('#slideshow DIV:last');

    // use this to pull the divs in the order they appear in the markup
    var $next =  $active.next().length ? $active.next()
        : $('#slideshow DIV:first');

    // uncomment below to pull the divs randomly
    // var $sibs  = $active.siblings();
    // var rndNum = Math.floor(Math.random() * $sibs.length );
    // var $next  = $( $sibs[ rndNum ] );

    $active.addClass('last-active');

    $next.css({opacity: 0.0})
        .addClass('active')
        .animate({opacity: 1.0}, 300, function() {
            $active.removeClass('active last-active');
        });
    }

    var intervalID = "";
    $(function() {
        intervalID = setInterval( "slideSwitch()", 5000 );

    });

    </script>

    <style type="text/css">

    #slideshow {
    position:relative;
    height:600px;
    width: 800px;
    margin: 0 auto;
    }

    #slideshow DIV {
    position:absolute;
    top:0;
    left:0;
    z-index:15;
    opacity:0.0;
    height: 600px;
    background-color: #FFF;
    min-width: 100%;
    filter: alpha(opacity=0);
    cursor: pointer;
    width: 800px;
    }

    #slideshow DIV.active {
    z-index:17;
    opacity:1.0;
    filter: alpha(opacity=100);
    }

    #slideshow DIV.last-active {
    z-index:16;
    }

    #slideshow DIV IMG {
    display: block;
    border: 0;
    margin: auto;
    max-height: 550px;
    min-width: 350px;
    max-width: 800px;
    center= vertical: true, horizontal: true;
    }

    #Main_Nav {
    font-family: "Univers LT Std 55";
    font-size: 24px;
    font-weight: normal;
    color: #333;
    text-decoration: none;
    background-color: #FFF;
    text-align: left;
    cursor: crosshair;
    padding: 35px 030px;
    }
    #Menu {
    font-family: "Univers LT Std 55";
    font-size: 18px;
    color: #333;
    background-color: #FFF;
    text-align: right;
    }
    #Header {
    font-family: "Univers LT Std 45 Light", Arial, sans-serif;
    background-color: #FFF;
    text-align: center;
    font-size: 36px;
    font-weight: lighter;
    padding-top: 20px;
    min-width: 100%;
    padding-bottom: 40px;
    }
    #Footer {
    font-family: "Univers LT Std 45 Light", Arial, sans-serif;
    font-size: 16px;
    font-weight: lighter;
    color: #333;
    text-align: center;
    padding-top: 10px;
    }
    </style>

    </head>

    <body style="font-weight: lighter; font-style: normal; font-family: 'Univers LT Std 45 Light', Arial, sans-serif; text-align: center;">

    <div class="Header" id="Header"><a style="color:#333; text-decoration:none; font-size: 28px;" href="http://csutorasliando.com/">Csutoras + Liando</a></div>
    </div>

    <div id="slideshow">
    <div class="active"> 
    <img src="../Images/Final/Web/CL_Puri_2_CL.jpg" alt="Slideshow Image 1" width="600"     height="420" align="absmiddle" onclick="clearInterval(intervalID); slideSwitch(); intervalID = setInterval( &quot;slideSwitch()&quot;, 5000)"; top="100" /></p>
    <p>Puri House (expected completion 2012), Indonesia </p>
  </div>

    <div>
    <img src="../Images/Final/Web/CL_Warsaw-Embassy_1_Richters.jpg" alt="Slideshow Image 2" width="735" height="365" onClick="clearInterval(intervalID); slideSwitch(); intervalID = setInterval( &quot;slideSwitch()&quot;, 5000)" />
        </p>
      <p>Warsaw Embassy 2009, Poland </p>
  </div>

    <div>
    <img src="../Images/Final/Web/CL_Warsaw-Embassy_2_Cook.jpg" alt="Slideshow Image 3" width="600" height="420" onClick="clearInterval(intervalID); slideSwitch(); intervalID = setInterval( &quot;slideSwitch()&quot;, 5000)" />
        </p>
      <p>Warsaw Embassy 2009, Poland </p>
  </div>

    <div>
    <img src="../Images/Final/Web/CL_Natsis_1_TFA.jpg" alt="Slideshow Image 4" width="600" height="420" onClick="clearInterval(intervalID); slideSwitch(); intervalID = setInterval( &quot;slideSwitch()&quot;, 5000)" />
        </p>
      <p>Natsis House 2011, Greece </p> 
  </div>

    <div>
    <img src="../Images/Final/Web/CL_Turban_2_CL.jpg" alt="Slideshow Image 5" width="600" height="420" onClick="clearInterval(intervalID); slideSwitch(); intervalID = setInterval( &quot;slideSwitch()&quot;, 5000)" />
        </p>
      <p>Turban utca 2007, Hungary </p> 
  </div>  

    <div>
    <img src="../Images/Final/Web/CL_Broadway_4_Nolan.jpg" alt="Slideshow Image 6" width="600" height="420" onClick="clearInterval(intervalID); slideSwitch(); intervalID = setInterval( &quot;slideSwitch()&quot;, 5000)" />
        </p>
      <p>Broadway School 2011, United Kingdom </p>
  </div>

    <div>
    <img src="../Images/Final/Web/CL_Broadway_1_Nolan.jpg" alt="Slideshow Image 7" width="600" height="420" onClick="clearInterval(intervalID); slideSwitch(); intervalID = setInterval( &quot;slideSwitch()&quot;, 5000)" />
        </p>
      <p>Broadway School 2011, United Kingdom </p>
  </div>

    <div>
    <img src="../Images/Final/Web/CL_Blaak_6_CL.jpg" alt="Slideshow Image 8" width="600" height="420" onClick="clearInterval(intervalID); slideSwitch(); intervalID = setInterval( &quot;slideSwitch()&quot;, 5000)" />
        </p>
      <p>Blaak Apartments 2005, the Netherlands </p>
  </div>

    <div>
    <img src="../Images/Final/Web/CL_Brentwood_3_Riddle.jpg" alt="Slideshow Image 9" width="420" height="550" onClick="clearInterval(intervalID); slideSwitch(); intervalID = setInterval( &quot;slideSwitch()&quot;, 5000)" />
        </p>
      <p>Brentwood School 2011, United Kingdom </p>
  </div>

    <div>
    <img src="../Images/Final/Web/CL_Brentwood_4_Riddle.jpg" alt="Slideshow Image 10" width="600" height="550" onClick="clearInterval(intervalID); slideSwitch(); intervalID = setInterval( &quot;slideSwitch()&quot;, 5000)" />
        </p>
      <p>Brentwood School 2011, United Kingdom </p>
  </div>

    <div>
    <img src="../Images/Final/Web/CL_Puri_7_CL.jpg" alt="Slideshow Image 11" width="600" height="420" onClick="clearInterval(intervalID); slideSwitch(); intervalID = setInterval( &quot;slideSwitch()&quot;, 5000)" />
        </p>
      <p>Puri House (expected completion 2012), Indonesia </p>
  </div>

    <div>
    <img src="../Images/Final/Web/CL_Furn_1_LC.jpg" alt="Slideshow Image 12" width="420" height="550" onClick="clearInterval(intervalID); slideSwitch(); intervalID = setInterval( &quot;slideSwitch()&quot;, 5000)" />
        </p>
      <p>Movable furniture 2011, United Kingdom </p>
  </div>

     <div>
    <img src="../Images/Final/Web/CL_Erste_1_TFA.jpg" alt="Slideshow Image 13" width="600" height="420" onClick="clearInterval(intervalID); slideSwitch(); intervalID = setInterval( &quot;slideSwitch()&quot;, 5000)" />
        </p>
      <p>Erste Bank 2008, Austria </p>
  </div>

    <div>
    <img src="../Images/Final/Web/CL_Solid-11_2_TFA.jpg" alt="Slideshow Image 14" width="600" height="420" onClick="clearInterval(intervalID); slideSwitch(); intervalID = setInterval( &quot;slideSwitch()&quot;, 5000)" />
        </p>
      <p>Solid 11 mixed used complex 2011, the Netherlands </p>
  </div> 

    <div>
    <img src="../Images/Final/Web/CL_Phillimore_1_TFA.jpg" alt="Slideshow Image 15" width="420" height="550" onClick="clearInterval(intervalID); slideSwitch(); intervalID = setInterval( &quot;slideSwitch()&quot;, 5000)" />
        </p>
    <p>Phillimore Garden Residence 2011, United Kindom </p>
  </div>

    <div>
    <img src="../Images/Final/Web/CL_Silver-Rain_1_ML.jpg" alt="Slideshow Image 16" width="420" height="550" onClick="clearInterval(intervalID); slideSwitch(); intervalID = setInterval( &quot;slideSwitch()&quot;, 5000)" />
        </p>
      <p>Summer Pavillion 2005, Estonia </p>
  </div>

    <div>
    <img src="../Images/Final/Web/CL_Furn-4_ML.jpg" alt="Slideshow Image 14" width="600" height="420" onClick="clearInterval(intervalID); slideSwitch(); intervalID = setInterval( &quot;slideSwitch()&quot;, 5000)" />
        </p>
      <p>Kingscross Library desk 2004, Australia </p>
  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:56:46.090

我过去用来让 div 在另一个 div 内垂直和水平居中的一个技巧是执行以下操作：

我只是在脑海中写下，所以我不能粘贴我的原始代码，但也许这会有用。

```
<div style="width:800px; overflow:hidden">
<div style="display:table; margin:0 auto">
<div style="display:table-cell; vertical-align:middle; text-align:center; height:400px">
<img src="folder/myImage.jpg" />
</div>
</div>
</div> 
```

# jquery - jQuery 切换 div 和切换文本

> ID：10850197
> 
> 赞同：2
> 
> 时间：2012-06-01T12:24:23.647
> 
> 标签：jquery

当单击以显示文本区域并将文本切换为“删除评论”时，我想创建链接“添加附加评论”。单击“删除评论”时，它应该隐藏文本区域，并且文本需要更改为“添加附加评论”。

我使用的代码是

```
<script type="text/javascript">
$(document).ready(function( ){
$("#addcmt").click(function( )
{
$(".commentarea").toggle( );
if ($("#addcmt").text = "Add additional comment") {
     $("#addcmt").text("Remove comment");
  }
else {
   $("#addcmt").text("Add additional comment");
 }
});
});
</script> 
```

html是

```
<div class="addlcomment">
  <a id="addcmt">Add additional comment</a>
 </div>
 <div class="commentarea" style="display:none;">
     <textarea name="strcomments1" tabindex="2"></textarea>
 </div> 
```

文本切换不起作用。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T12:26:28.087

**工作演示** [http://jsfiddle.net/eDNH5/10/](http://jsfiddle.net/eDNH5/10/)

这将帮助你！

问题是您使用的是赋值运算符而不是相等`==`

**jQuery代码**

```
$(document).ready(function() {
    $("#addcmt").click(function() {
        $(".commentarea").toggle();
        if ($("#addcmt").text() == "Add additional comment") {
            $("#addcmt").text("Remove comment");
        }
        else {
            $("#addcmt").text("Add additional comment");
        }
    });
});​ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-01T12:31:51.190

如果要检查块是否可见以更改文本：

```
$(document).ready(function() {
    $("#addcmt").click(function() {
        var isVisible = $(".commentarea").toggle().is(":visible");
        $(this).text( isVisible ? "Remove comment" : "Add additional comment");
    });
}); 
```

我使用它是因为您已经查找过 #addcmt 一次，而无需再次找到该元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T12:27:03.313

你有一个错误：

```
if ($("#addcmt").text = "Add additional comment") { 
```

应该：

```
if ($("#addcmt").text() == "Add additional comment") { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T12:27:38.360

你的如果是错误的。代替

```
if ($("#addcmt").text = "Add additional comment") 
```

和

```
if ($("#addcmt").text == "Add additional comment") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T12:29:17.710

您正在执行分配而不是在此行中进行比较：

```
 if ($("#addcmt").text = "Add additional comment") { 
```

你想要这个：

```
 if ($("#addcmt").text == "Add additional comment") { 
```

# php - php包含vs库；正确的路径

> ID：10850200
> 
> 赞同：0
> 
> 时间：2012-06-01T12:24:30.743
> 
> 标签：php, path, include

我一直在尝试研究更好地使用什么来包含网站的重复部分 - php 包含函数或库（在 Dreamweaver 中提供）。

或者也许有其他更好的方法来达到同样的结果？

目前我使用 php 包含和绝对路径。我从服务器下载了网站，但似乎在服务器上工作的路径在我的本地主机上不起作用。为了使它们在两个服务器上都工作而不必重新编写代码，编写路径的正确和最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:27:54.560

您可以在脚本开头调用 set_include_path() 命令并指定库的相对路径

[http://www.php.net/set_include_path](http://www.php.net/set_include_path)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:28:03.693

由于织梦者使用库，这可能是错误的；）

如果您想确保仅包含一次您可能会使用的代码`require_once`。

尝试相对路径而不是绝对路径

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T12:35:24.610

解决这个问题的一个简单方法是在根目录中定义一个常量，通常在你的 index.php 文件中。

```
/**Path Environment**/
$root=pathinfo($_SERVER['SCRIPT_FILENAME']);
define ('BASE_FOLDER', basename($root['dirname']));   
define ('SITE_ROOT',    realpath(dirname(__FILE__)));
define ('SITE_URL',    'http://'.$_SERVER['HTTP_HOST'].'/'.BASE_FOLDER); 
```

然后您可以使用，`SITE_URL`并且`SITE_ROOT`在整个脚本中都知道它到您的 Web 根目录的正确路径。

所以你的旧包括看起来像：

`include('/srv/www/somesite.com/public_html/somefile.php');`

并且您的新包含将看起来像`include(SITE_ROOT.'/somefile.php');`在 Windows 上开发时，路径将相应更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-19T03:33:44.470

放

```
include_path = ".:/your/absolute/path" 
```

在您的 php.ini 中，包括服务器环境和本地主机。然后您可以在任何代码处访问包含路径文件。

# cytoscape-web - Cytoscape web 2 乔木布局

> ID：10850205
> 
> 赞同：1
> 
> 时间：2012-06-01T12:24:47.797
> 
> 标签：cytoscape-web

我一直在尝试使用乔木布局。我试过了

```
layout: {
    name:"arbor"
} 
```

和

```
layout: {
    name:"arbor",
    liveUpdate: true,
    ready: undefined,
    maxSimulationTime: 4000,
    fit: true,
    padding: [ 50, 50, 50, 50 ],
    ungrabifyWhileSimulating: true,
    repulsion: undefined,
    stiffness: undefined,
    friction: undefined,
    gravity: true,
    fps: undefined,
    precision: undefined,
    nodeMass: undefined,
    edgeLength: undefined,
    stepSize: 1,
    stableEnergy: function( energy ){
        var e = energy; 
        return (e.max <= 7) || (e.mean <= 5);
    }
} 
```

在这两种情况下，萤火虫控制台都会报告

```
arbor is not defined
http://localhost/WS/BioJS/biojs/src/main/resources/dependencies/cytoscape/jquery.cytoscapeweb.layout.arbor.js
Line 76 
```

我错过了什么？有乔木布局使用的工作示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:41:12.080

您需要在 HTML`arbor.js`中包含`script`标签。该文件`jquery.cytoscapeweb.layout.arbor.js`只是将 arbor 与 Cytoscape Web 接口。如果您需要 IE 支持，请确保使用`arbor.js`Cytoscape Web ZIP 中捆绑的版本——arbor 不提供开箱即用的功能。

之所以`arbor.js`没有嵌入，`jquery.cytoscapeweb.layout.arbor.js`是因为`arbor.js`需要在自己的`script`标签中才能使网络工作者正常工作。如果您`arbor.js`将应用程序的其他脚本连接并缩小，arbor 的路径查找可能会中断，或者 arbor 的 webworkers 可能与您应用程序中的其他 webworkers 发生冲突。

# c# - 使用 NHibernate 在单独的 SELECT 中急切地获取多个嵌套集合

> ID：10850208
> 
> 赞同：0
> 
> 时间：2012-06-01T12:24:56.847
> 
> 标签：c#, database, nhibernate, prefetch

我有以下数据库结构，我需要完全遍历它以获得报告。

```
Product -> ProductVariation -> ProductMedaItem
Product -> CategoryLinks -> Category 
```

我在`Products`表上有一个查询，并且想要预取上述数据，因为我将一起访问它们。我想避免使用 JOIN，因为组合会爆炸并导致数据加载。

在我看来，理想的解决方案如下：

*   发出查询以加载所有匹配的产品
*   然后，根据类似于 ' 的查询解析结果集，并一起加载所有产品变体`Select * from ProductVariations where ProductId in ([all_product_id_set])`。
*   同样，这个结果集被解析，并且所有`ProductMediaItem`的都是使用类似于的查询来获取的`Select * from ProductMediaItem where ProductVariationId in ([all_product_variation_id_set]);`
*   等等等等

这将导致`SELECT`每个不同的关联都有一个。因此，加载所有产品变体、它们的媒体项目和每个产品类别链接，以及它们各自的类别将导致 5`SELECT`秒。

我尝试过使用`criteria.SetFetchMode("ProductVariations", FetchMode.Select")`，但这无济于事。我目前的解决方法是使用批处理，但这仍然会导致大约 50 - 60 个查询来获取所有数据，虽然不是那么慢，但我认为它可以做得更快。

我正在使用最新版本的 NHibernate - 3.3。

***更新 1***

我想使用普通的 OOP 遍历集合，例如：

```
foreach (var p in Products)
{
    foreach (var variation in p.ProductVariations)
    {
        foreach (var mediaItem in variation.MediaItems)
        {
              ...
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:36:50.033

MultiQueries 和 MultiCriteria 将起作用，或者更容易成为期货，例如：

```
var productVariations = session.CreateQuery(
        "Select * from ProductVariations where ProductId in ([all_product_id_set])")
        .Future<ProductVariations>();

var mediaItems = session.CreateQuery(
        "select pv.MediaItems from ProductVariations pv where pv.ProductId in ([all_product_id_set])")
        .Future<ProductMediaItem>(); 
```

等等...当您枚举其中任何一个时，它将一次性执行所有查询，唯一的“技巧”是将关系从 Product 向下导航到您要选择的各种项目

# c - 使用 cvDCT 函数在 opencv 中计算 dct

> ID：10850213
> 
> 赞同：1
> 
> 时间：2012-06-01T12:25:18.563
> 
> 标签：c, opencv, watermark, steganography

我正在使用 OpenCV 2.1 和 vs2010（用 C 编码）。从 rgb 图像中提取蓝色平面后，我对其应用 dct 以获取转换后的矩阵。

```
cvDCT(source,destination,CV_DXT_FORWARD); 
```

它正在成功构建，但不知何故它没有执行

错误类似于“freqDomain.exe 中 0x75c89617 处的未处理异常：Microsoft C++ 异常：内存位置 0x001ce35c 处的 cv::Exception ..”

我认为错误在于设置输出图像的 cvarray 类型。可以将其设置为 IPL_DEPTH_8U 还是应该浮动？

这是我的代码片段：

```
int main()
{
    IplImage *input,*output,*b,*g,*r;
    input=cvLoadImage("dolphin.jpg");
    int width,height;
    width=input->width;
    height=input->height;
    b=cvCreateImage(cvSize(width,height),IPL_DEPTH_8U,1);
    g=cvCreateImage(cvSize(width,height),IPL_DEPTH_8U,1);
    r=cvCreateImage(cvSize(width,height),IPL_DEPTH_8U,1);
    cvSplit(input,b,g,r,NULL);
    cvNamedWindow("blue",CV_WINDOW_AUTOSIZE);
    IplImage *b_dct,*g_dct,*r_dct;
    b_dct=cvCreateImage(cvSize(width,height),8,1);
    g_dct=cvCreateImage(cvSize(width,height),8,1);
    r_dct=cvCreateImage(cvSize(width,height),8,1);
    cvDCT(b,b_dct,0);  // doubt??
    cvShowImage("blue",b_dct);

    ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:48:03.620

是的，找到了解决方案:) 问题出在源图像的数据类型上。它应该是浮点数或双精度数。我使用 cvConvert 函数将 unsigned int 转换为 32 位浮点值。

# objective-c - 如何将 iPhone 笔记导入我的应用程序？

> ID：10850216
> 
> 赞同：5
> 
> 时间：2012-06-01T12:25:25.707
> 
> 标签：objective-c, ios, import

是否可以将笔记从 iPhone 笔记应用程序导入到我的应用程序？我用谷歌搜索了很多以了解它。没有什么帮助。有人可以给出任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-01T12:40:38.507

第三方应用程序无权访问便笺数据库。没有用于访问便笺数据的公共 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:02:36.860

您可以尝试使用流程来同步应用程序（例如[ifttt.com](http://ifttt.com)）。

创建一条规则，上面写着“如果已创建新便笺（如果 Gmail 邮件具有标签'便笺'），请将其转发到我的数据库。”

该解决方案非常笨拙，但它是一个起点。然后，您可以找到一种方法来为您的应用程序扩展它。

# objective-c - 如何在目标 c 单元测试中添加构造函数？

> ID：10850232
> 
> 赞同：1
> 
> 时间：2012-06-01T12:26:30.067
> 
> 标签：objective-c, unit-testing, constructor

如何在 Objective C 单元测试中添加构造函数？

使用默认的 xcode 测试代码：

```
#import "MultiVueTests.h"

@implementation MultiVueTests

- (void)setUp
{
    [super setUp];

    // Set-up code here.
}

- (void)tearDown
{
    // Tear-down code here.

    [super tearDown];
}

- (void)testExample
{
    STFail(@"Unit tests are not implemented yet in MultiVueTests");
} 
```

可以为这个文件中的所有测试添加构造函数吗？

**编辑：** 在我的情况下，它是测试 webService 调用的结果。在构造函数中，我调用 webService 并且每个测试都测试答案。但是如果我在 setUp 中调用 webService，它会为每个测试调用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:29:52.233

该`setUp`方法是一种用于单元测试的构造函数。它在每个方法之前被调用`test`。`tearDown`作为单元测试的“析构函数”也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T03:31:31.030

GHUnit 是 OCUnit 的扩展，它具有：

*   (void)setUpClass
*   (void)tearDownClass

您可以像构造函数和析构函数一样使用它们。

# python - 创建 Python 电子邮件（接收）服务器

> ID：10850234
> 
> 赞同：12
> 
> 时间：2012-06-01T12:26:30.900
> 
> 标签：python, linux, email, smtp

我正在尝试为 Linux VPS 生成一个简单的 python 脚本，该脚本将允许我接收邮件，（然后我可以在 python 中对其进行处理，例如将其打印到标准输出）。没有比这更复杂的了。

我不想使用“繁重”的解决方案或服务器程序，我真的只是在一个我可以运行的简单 python 脚本之后，并且能够接收邮件。

Pythons 的 smtpd 模块是否足以完成这项任务？到目前为止，我听到了相互矛盾的意见。如果没有，你还有什么建议？也许您自己编写了一些代码？

在这个阶段，即使像 lamson 这样的项目似乎也太重了（尽管如果我找不到更好的解决方案，这可能是不可避免的）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-01T12:48:55.620

Pythons smtpd 就足够了。

您可能还想看看[inbox.py](https://github.com/kennethreitz/inbox.py)和[这个例子](https://github.com/kennethreitz/inbox.py/issues/3#issuecomment-5606161)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-01T12:50:35.500

是的 SMTPD 模块将提供完整的帮助。 [示例代码在这里](http://pymotw.com/2/smtpd/)：

> ```
> import smtpd
> import asyncore
> 
> class CustomSMTPServer(smtpd.SMTPServer):
> 
>     def process_message(self, peer, mailfrom, rcpttos, data):
>         print 'Receiving message from:', peer
>         print 'Message addressed from:', mailfrom
>         print 'Message addressed to  :', rcpttos
>         print 'Message length        :', len(data)
>         return
> 
> server = CustomSMTPServer(('127.0.0.1', 1025), None)
> asyncore.loop() 
> ```

# extjs2 - 重新排序 ExtJS 面板的子面板

> ID：10850235
> 
> 赞同：1
> 
> 时间：2012-06-01T12:26:33.413
> 
> 标签：extjs2

我有一个 ExtJS 面板，它在第一行和第二行包含一个标签。后来我添加了 4 个子面板，每个子面板都包含一个复选框和 2 个文本字段（每个子面板在主面板的一行中）。然后我有 2 个上移/下移按钮，每次单击上/下按钮时，这些子面板将这些子面板上/下重新排列 1 行。我能够用所有子面板来布局主面板，但卡在重新排序子面板上。如何在 ExtJS 中处理这个（重新排序子面板）功能？![在此处输入图像描述](../Images/fa06fd6e9d1746d7d84d9e25e29ab39d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T14:31:37.380

动态更改面板元素的技巧是在更改后调用 doLayout 函数。不是最漂亮但最有效的问题示例：

```
var Panel1 = Ext.create('Ext.form.Panel', {
    title: 'first',
    items: [{
        fieldLabel: 'text1',
        xtype: 'textfield'
    }, {
        fieldLabel: 'text2',
        xtype: 'textfield'
    }, {
        xtype: 'checkbox'
    }]
})

var Panel2 = Ext.create('Ext.form.Panel', {
    title: 'second',
    items: [{
        fieldLabel: 'text1',
        xtype: 'textfield'},
    {
        fieldLabel: 'text2',
        xtype: 'textfield'}]
})

var mainPanel = Ext.create('Ext.panel.Panel', {
    title: 'main',
    items: [Panel1, Panel2]
})

new Ext.Window({
    width: 300,
    height: 400,
    layout: 'fit',
    items: [mainPanel],
    bbar: [{
        text: 'reorder',
        handler: function() {
            var swap = mainPanel.items.items[0];
            mainPanel.items.items[0] = mainPanel.items.items[1];
            mainPanel.items.items[1] = swap;
            mainPanel.doLayout();
        }
    }]
}).show(); 
```

这适用于 ExtJs 4.0.7，但技巧适用于早期版本，只需调整面板创建语法。

# c++ - 将屏幕鼠标坐标转换为窗口坐标

> ID：10850238
> 
> 赞同：0
> 
> 时间：2012-06-01T12:26:45.893
> 
> 标签：c++, windows, winapi, coordinate-transformation, mouse-coordinates

这是我上一个问题的继续->[绘制鼠标指针图标？](https://stackoverflow.com/questions/10823022/draw-mouse-pointer-icon) 我想在桌面上的特定窗口中绘制鼠标，我已经知道如何绘制鼠标以及如何跟踪真实鼠标的移动。但是我无法转换屏幕坐标，这是我想要做的示例：当真实鼠标位于左上角 0,0 时，DRAWN 鼠标位于我特定窗口的 0,0 中，而当真实鼠标位于在右下角 1600,900 处，DRAWN 鼠标位于我特定窗口的 700,400 处。

如果有人不完全理解问题，我会重新解释。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:17:57.087

您需要根据窗口尺寸缩放鼠标位置。

设 DX 和 DY 为桌面尺寸。让 WX 和 WY 成为您的窗口大小。令 (Dmx,Dmy) 为桌面上原始鼠标位置的坐标。然后根据您的要求，您的鼠标在窗口中的位置将是（Dmx/DX * WX，Dmy/DY * WY）。编码时，请记住确保除法发生在浮点数上。

# php - 将值从父级传递到 iframe 下拉框

> ID：10850242
> 
> 赞同：0
> 
> 时间：2012-06-01T12:26:54.967
> 
> 标签：php, javascript

我需要将一个值从父级传递给 iframe（在不同的服务器上，不在我的控制范围内），并让该值在 iframe 的下拉列表中进行选择。

示例：mydomain.com/?agent=12345（目标将是 iframe）

在 iframed 页面中，下拉菜单有几个选项，我需要将 url 中的值设置为与单击链接并在 iframe 中加载页面时的选择相对应的选项。

是否可以传递 URL 或者我使用 JS、PHP？如果是 JS 或 PHP，如何？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:45:49.387

你可以使用任何一个。

如果 PHP 则使用 $_GET 读取参数，并在构建页面时设置符合要求的选项中的 selected="selected"。

如果 javascript 然后正常加载页面，然后，onload，读取参数并找到选择框并适当地设置选择框。

你会发现 PHP 更容易，因为它在 $_GET 中有参数，而在 Javascript 中你需要从字符串中获取 URL（尽管你可以使用 web 上的函数）。如果您确实使用过 Javascript 并且以前没有使用过，请使用 jQuery 来设置选择框，因为网上也有很多示例。

* * *

编辑答案（用于存档，基于下面的澄清评论）。

澄清是 iFrame 无法编辑，因为它属于另一个域 - 因此操作必须来自父域。

基于此 - 这是不可能的。浏览器安全性可防止站点跨域操纵框架中的内容。否则，您将能够创建一个框架，为用户完成整个表单并以他们的名义提交。唯一的解决方案是编辑子框架。

# c# - 如何修复“找不到类型或命名空间名称”？

> ID：10850250
> 
> 赞同：5
> 
> 时间：2012-05-30T16:51:46.970
> 
> 标签：c#

这是我之前的问题[https://codereview.stackexchange.com/questions/12165/efficency-in-c/12169](https://codereview.stackexchange.com/questions/12165/efficency-in-c/12169)的后续，我尽我所能使用 BigIntegers 代替 ulongs，但我必须做点什么错误的。我是 C# 新手，我熟悉 Java。这是我最好的转换方法：

```
using System;

namespace System.Numerics{

      public class Factorial{

             public static void Main(){

             String InString = Console.ReadLine();

             BigInteger num = 0;

             BigInteger factorial = 1;

             try {
                 num = BigInteger.Parse(InString);
                 Console.WriteLine(num);
                 }
             catch (FormatException) {

                  Console.WriteLine("Unable to convert the String into a BigInteger");
            }

            for (BigInteger forBlockvar = num; forBlockvar > 1; forBlockvar--){

                     factorial *= forBlockvar;

            }

            Console.WriteLine("The Factorial for the Given input is:");

            Console.WriteLine(factorial);
    }
}
} 
```

我收到以下错误：

```
prog.cs(11,18): error CS0246: The type or namespace name `BigInteger' could not be found. Are you missing a using directive or an assembly reference?
prog.cs(13,18): error CS0246: The type or namespace name `BigInteger' could not be found. Are you missing a using directive or an assembly reference?
prog.cs(26,22): error CS0246: The type or namespace name `BigInteger' could not be found. Are you missing a using directive or an assembly reference? 
```

这个错误是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T17:15:15.100

您需要向 System.Numerics.dll 添加引用（右键单击解决方案资源管理器中的引用并选择添加引用）。

此外，放入`using System.Numerics`而不是让您的方法的名称空间成为那个（即，将其命名为对您的代码库更具描述性的名称）。

# firefox - 如何使用 XUL 返回标签的 XPath？

> ID：10850260
> 
> 赞同：0
> 
> 时间：2012-06-01T12:27:51.913
> 
> 标签：firefox, firefox-addon, xul

我想选择标签的 XPath 和标签的内容，类似于[Evernote](http://en.wikipedia.org/wiki/Evernote)正在做的事情。但是，我找不到任何例子。这怎么可能实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:05:57.267

经过一番研究，我们发现：

```
function createXPathFromElement(elm) {
        var allNodes = document.getElementsByTagName('*'); 
        for (segs = []; elm && elm.nodeType == 1; elm = elm.parentNode) 
        {
            if (elm.hasAttribute('id')) { 
                var uniqueIdCount = 0; 
                for (var n=0;n < allNodes.length;n++) { 
                    if (allNodes[n].hasAttribute('id') && allNodes[n].id == elm.id) uniqueIdCount++; 
                    if (uniqueIdCount > 1) break; 
                }; 
                if ( uniqueIdCount == 1) { 
                    segs.unshift('id("' + elm.getAttribute('id') + '")'); 
                    return segs.join('/'); 
                } else { 
                    segs.unshift(elm.localName.toLowerCase() + '[@id="' + elm.getAttribute('id') + '"]'); 
                } 
            } else if (elm.hasAttribute('class')) { 
                segs.unshift(elm.localName.toLowerCase() + '[@class="' + elm.getAttribute('class') + '"]'); 
            } else { 
                for (i = 1, sib = elm.previousSibling; sib; sib = sib.previousSibling) { 
                    if (sib.localName == elm.localName)  i++;
                }; 
                segs.unshift(elm.localName.toLowerCase() + '[' + i + ']'); 
            }; 
        };
        return segs.length ? '/' + segs.join('/') : null; 
    }

    function lookupElementByXPath(path) {
        var evaluator = new XPathEvaluator(); 
        var result = evaluator.evaluate(path, document.documentElement, null,XPathResult.FIRST_ORDERED_NODE_TYPE, null); 
        return  result.singleNodeValue; 
    } 
```

# android - Android 项目在 Motodev 上运行，但在 Eclipse 上崩溃

> ID：10850262
> 
> 赞同：0
> 
> 时间：2012-06-01T12:27:55.777
> 
> 标签：android, eclipse, runtime-error, motodev-studio

我在 Motodev 上做了一个 android 项目（它本身就是一个 eclipse 插件）。但是现在当我尝试在 eclipse 上运行同一个项目时，模拟器给我一个错误，如下错误：

```
FATAL EXCEPTION: main E/AndroidRuntime(4711): java.lang.VerifyError: com.tenpearls.namecalling.Activities.SearchContactsActivity
E/AndroidRuntime(4711):  at java.lang.Class.newInstanceImpl(Native Method)
E/AndroidRuntime(4711):  at java.lang.Class.newInstance(Class.java:1429)
E/AndroidRuntime(4711):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
E/AndroidRuntime(4711):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
E/AndroidRuntime(4711):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
E/AndroidRuntime(4711):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
E/AndroidRuntime(4711):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
E/AndroidRuntime(4711):  at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(4711):  at android.os.Looper.loop(Looper.java:123)
 E/AndroidRuntime(4711):  at android.app.ActivityThread.main(ActivityThread.java:4627)
E/AndroidRuntime(4711):  at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(4711):  at java.lang.reflect.Method.invoke(Method.java:521)
E/AndroidRuntime(4711):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
E/AndroidRuntime(4711):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
E/AndroidRuntime(4711):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:48:48.543

当您针对与运行时使用的库不同的库进行编译时，可能会出现这种情况。

一个很好的解释可以在[这里](https://stackoverflow.com/a/2518002/1105376)。

另一种可能性是在某个地方的类路径中有一个重复的类，例如在库 jar 中。

# android - 为 Android Playstore 做好准备

> ID：10850266
> 
> 赞同：0
> 
> 时间：2012-06-01T12:28:15.567
> 
> 标签：android

我有一个问题，如果我想将我的 Android 应用程序上传到 Market 并让它在准备上线之前不显示在 Play 商店中，我可以这样做吗，比如保留名称和游戏风格，直到准备好发布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:31:45.580

是的，当您打开开发者控制台并开始输入您的应用详细信息时，您可以点击保存而不是发布。当您准备好上线时，单击发布。这就是您保留包命名空间的方式。应用名称没有唯一约束，但包命名空间有唯一约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:32:06.820

由于应用程序名称不需要唯一，因此无法保留它。

这些应用程序将由您的应用程序使用的包名称标识。因此，只需开发您的应用程序并在准备好时上传它。

# jquery - Firebug 不加载 jQuery 模板

> ID：10850271
> 
> 赞同：0
> 
> 时间：2012-06-01T12:28:36.237
> 
> 标签：jquery, firebug, jquery-templates

首先，我需要将我的脚本标签从“text/html”更改为“text/javascript”，以便能够使用 firebug 加载脚本。现在 Firebug 给了我错误信息：XML 不能是整个程序。我的模板如下所示：

```
 <script id="preview" type="text/javascript">
          <div style="width:${Width};height:${Height}" class='brick'>
            <img src="${Image}" width="${Width}" height="${Height}"/>
         </div>
     </script> 
```

但我不想将我的脚本标签更改为“text/javascript”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:40:06.390

$.tmpl() 插件要求内联模板具有如下类型`text/x-jquery-tmpl`：

```
<script id="preview" type="text/x-jquery-tmpl">
    <div style="width:${Width};height:${Height}" class='brick'>
        <img src="${Image}" width="${Width}" height="${Height}"/>
     </div>
</script> 
```

那应该可以解决您的问题；我希望这有帮助！

# jquery - 调试jquery错误android浏览器

> ID：10850273
> 
> 赞同：1
> 
> 时间：2012-06-01T12:28:44.917
> 
> 标签：jquery, android, debugging

我有一个使用 jquery UI 选项卡和从一些作者代码销售网站购买的滑块插件的应用程序。

我有一个仅在 android 2.2 的默认浏览器上发生的错误。关于如何调试的任何想法？我无法在 chrome、ff、ff for android、safari 或移动 safari 中实现它。（我什至不再使用 IE 了。）

发生的情况是，如果我以任何方式加载选项卡，而不是通过单击 UL 中指向它的链接，那么滑块都会中断。是否有已知兼容性问题的资源？

网址是[http://jgaylor.net/freelance/140979_nathan/new.html#work](http://jgaylor.net/freelance/140979_nathan/new.html#work)，以防有人想更好地查看用例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-01T12:25:51.650

如果我的问题有误，请告诉我，但您可以通过 chrome 使用远程调试：[https ://developers.google.com/web/tools/setup/remote-debugging/remote-debugging](https://developers.google.com/web/tools/setup/remote-debugging/remote-debugging)

# c# - 展开/折叠嵌套的 WPF 网格

> ID：10850274
> 
> 赞同：0
> 
> 时间：2012-06-01T12:28:49.363
> 
> 标签：c#, wpf, wpfdatagrid

我创建了一个嵌套的 WPF 数据网格。我看到您可以通过单击该行来展开它，但是当您执行相同操作时它不会折叠。

几个问题：

1.  用户如何折叠网格？
2.  有没有办法在父行上获取展开/折叠按钮？
3.  每当您单击不同的父级展开时，它都会折叠您所在的前一个父级。有没有办法让网格保持你制作的方式。即如果我展开第 1 行然后转到第 3 行，第 1 行将停留在我展开的位置。

谢谢，格雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:54:54.243

使用 WPF 扩展器。这样您就可以扩展内部 DataGrid。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:11:09.050

有几种方法可以达到这种行为。例如 [Silverlight DataGrid 中的展开/折叠按钮](https://stackoverflow.com/questions/5232683/expand-collapse-button-in-a-silverlight-datagrid)。

如果您愿意，请`xaml`使用：

```
<Style x:Key="ExpandableDataGridRowHeaderStyle"
           TargetType="sdk:DataGridRowHeader">
    <Setter Property="Background"
                Value="#99E9EEF4" />
    <Setter Property="IsTabStop"
                Value="False" />
    <Setter Property="SeparatorBrush"
                Value="#FFFFFFFF" />
    <Setter Property="SeparatorVisibility"
                Value="Collapsed" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="sdk:DataGridRowHeader">
                <Grid x:Name="Root">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="25" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>                           
                    <Border BorderBrush="#FFFFFFFF"
                                BorderThickness="1,0,1,0"
                                Grid.ColumnSpan="2"
                                Grid.RowSpan="3">
                        <Grid>
                            <Rectangle x:Name="RowInvalidVisualElement"
                                           Grid.ColumnSpan="2"
                                           Fill="#FFF7D8DB"
                                           Opacity="0"
                                           Grid.RowSpan="3"
                                           Stretch="Fill" />
                            <Rectangle x:Name="BackgroundRectangle"
                                           Grid.ColumnSpan="2"
                                           Fill="Transparent"
                                           Grid.RowSpan="3"
                                           Stretch="Fill" />
                        </Grid>
                    </Border>
                    <Button Background="{x:Null}"
                                BorderBrush="{x:Null}"
                                BorderThickness="0"
                                Padding="0"
                                Grid.RowSpan="1"
                                HorizontalAlignment="Stretch">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="Click">
                                <AttachedBehaviors:ExpandButtonAction/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </Button>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

这`AttachedBehavior`实际上会改变`DetailsVisibility`：

```
public class ExpandButtonAction : TargetedTriggerAction<FrameworkElement>
{
    #region Invoke

    protected override void Invoke(object parameter)
    {
        RoutedEventArgs eventArgs = (RoutedEventArgs) parameter;
        Button bsender = eventArgs.OriginalSource as Button;
        var row = DataGridRow.GetRowContainingElement(eventArgs.OriginalSource as FrameworkElement);
        if (row.DetailsVisibility == Visibility.Visible)
        {
            row.DetailsVisibility = Visibility.Collapsed;
        }
        else
        {
            row.DetailsVisibility = Visibility.Visible;
        }
    }

    #endregion
} 
```

并将其应用于您要展开/折叠`RowHeaderStyle`的位置。`DataGrid``DetailsTemplate`

# asp.net-mvc-3 - 在 Asp.Net MVC 中使用带有自定义分页的 JQGrid

> ID：10850275
> 
> 赞同：0
> 
> 时间：2012-06-01T12:28:49.553
> 
> 标签：asp.net-mvc-3, jqgrid-asp.net

我将 JQGrid 与 Trirand.Web.Mvc 类一起使用，并试图弄清楚如何进行自定义分页。

我在[这里看到了分页演示](http://www.trirand.net/demoaspnetmvc.aspx)

这些演示的问题在于它们直接绑定到 linq 上下文对象，并让 MVC 负责分页。

```
 // This method is called when the grid requests data. You can choose any method to call        
    // by setting the JQGrid.DataUrl property        
    public JsonResult PerformanceLinq_DataRequested()        
    {            
        // Get both the grid Model and the data Model            
        // The data model in our case is an autogenerated linq2sql database based on Northwind.            
        var gridModel = new OrdersJqGridModel();            
        var northWindModel = new NorthwindDataContext();            
        // return the result of the DataBind method, passing the datasource as a parameter            
        // jqGrid for ASP.NET MVC automatically takes care of paging, sorting, filtering/searching, etc
        return gridModel.OrdersGrid.DataBind(northWindModel.OrdersLarges);        
    } 
```

我要绑定的数据集非常复杂，我从一个存储过程中返回它，它为我进行分页。

因此，我必须为 JQGrid 提供整个结果集特定页面的正确行大小。我还可以返回总行数。

所以我的结果在 List myListOfObjects 中。

我可以使用 myListOfObjects.AsQueryable() 将它传递给 DataBind

问题是，JQGrid 认为只有 {page size} 行，所以不显示任何分页选项。

是否可以传入总行数？

其他网格，如 Teleriks MVC 网格允许您传入总行数，并正确显示分页

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:58:49.587

好的，所以我自己设法解决了这个问题。可能还有其他方法可以做到这一点，如果是这样，我很想听听他们的声音！

JQGrid.DataBind 生成一个 JsonResult 对象，其 Data 值设置为 Trirands 自己的对象 Trirand.Web.Mvc.JsonResponse

这是他们 Trirand.Web.Mvc 的内部类，所以我必须复制它的结构，我可以使用 Visual Studio 调试看到它。

它有：

*   page - 当前页码
*   记录 - 总记录数
*   rows - Trirand.Web.Mvc.JsonRow 类型（我也需要复制）
*   total - 需要的总页数

JsonRow 看起来像：

*   单元格 - 列的字符串数组
*   id - 你的行 ID

所以我的代码看起来像这样：

```
var jsonList = new List<JSONRow>();
myData.ForEach(x => jsonList.Add(new JSONRow(x)));

var jsonResult = Json (new
                            {
                                page = page,
                                rows = jsonList.ToArray(),
                                records = totalRows,
                                total = Math.Round((double)totalRows / rows, MidpointRounding.AwayFromZero)
                            }, JsonRequestBehavior.AllowGet);

   return jsonResult; 
```

我的 JsonRow 看起来像这样：

```
public class JSONRow
        {
            public string[] cell { get; set; }
            public string id { get; set; }

            public JSONRow(MyObjectType myObject)
            {
                id = myObject.id;
                cell = new string[3];
                cell[0] = myObject.Col1;
                cell[1] = myObject.Col2?? "";
                cell[2] = myObject.Col3?? "";

            }
        } 
```

# .net - 清单框功能不起作用

> ID：10850277
> 
> 赞同：2
> 
> 时间：2012-06-01T12:28:51.743
> 
> 标签：.net, vb.net

我们有一个用 Vb.net 开发的程序，它使用 CheckedListBox 控件，程序从 VB6 转换为 Vb.Net “VB6.GetItemString”方法用于从 CheckedListBox With Frame work 3.5 或 Framework 4 以及 Frame work 获取项目值3.5 “VB6.GetItemString”方法正常工作但是当单独安装框架 4 时，“VB6.GetItemString”属性返回空（框架 4 的下载链接：http: [//www.microsoft.com/en-us/download/ details.aspx?id=17718](http://www.microsoft.com/en-us/download/details.aspx?id=17718) ) Frame work 4 是否不支持此功能？是否存在框架 4 不支持的类似功能？有人可以告诉这个解决方案是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:55:44.493

看看这里的讨论：

[http://www.pcreview.co.uk/forums/need-dotnet-equivalent-code-vb6-getitemstring-and-vb6-setitemst-t3356438.html](http://www.pcreview.co.uk/forums/need-dotnet-equivalent-code-vb6-getitemstring-and-vb6-setitemst-t3356438.html)

# ruby-on-rails-3 - 将外部数据添加到 ROR 中的 Instance 变量

> ID：10850284
> 
> 赞同：0
> 
> 时间：2012-06-01T12:29:29.530
> 
> 标签：ruby-on-rails-3, json, mongoid

我有一个用 Mongoid 编写的查询

```
@result = User.find(:name=>"xxxxx").limit(5) 
```

我将 json 中的数据返回为

```
render :json =>@result.to_json() 
```

**现在我想将名称为xxxxx**的用户总数添加到`@result`变量中。我尝试了几件事，但没有任何效果

```
@new_result ={:result =>@result, :count=>@result.length} 
```

和

```
render :json =>@new_result.to_json() 
```

输出是

```
[{new_result:null,count:25}] 
```

基本上我能够得到计数，但我无法将该计数添加到我的@result。有没有办法让这个工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T12:29:31.080

温馨提示：

```
All queries in Mongoid are Criteria, which is a chainable and lazily evaluated wrapper to a MongoDB dynamic query. 
```

请参阅： http: [//mongoid.org/en/mongoid/docs/querying.html#query_plus](http://mongoid.org/en/mongoid/docs/querying.html#query_plus)

请务必了解 Mongoid Criteria 是惰性评估的，否则会导致您感到困惑并花费您的时间，并且会花费更多时间...

当我运行你的@result = User.find(:name=>"xxxxx").limit(5) 时，我得到一个 Mongoid::Errors::DocumentNotFound 异常，这是 Mongoid 2.4.10。你确定你的问题是准确的吗？

我已将其更改为 User.where，@result = User.find(:name=>"xxxxx").limit(5) 是一个 Criteria，而不是（尚未）从 MongoDB 读取的 User 实例。

下面的测试应该有助于明确由于延迟评估，DB 查询仅在需要时发生，例如，在方法 to_json 和方法长度之后。此外，跟踪您的日志，并注意每次使用带有 to_json 或 length 方法的 @result 都会导致重复的数据库查询，这是低效的，可能不是您想要的。您可以使用 Enumerable#to_a 或 Enumerable#each 等方法强制进行评估和获取。

测试/单元/user_test.db

```
require 'test_helper'

class UserTest < ActiveSupport::TestCase
  def setup
    User.delete_all
  end

  test "mongoid lazy eval" do
    User.create(name: 'xxxxx')
    assert_equal(1, User.count)
    puts "User.all.to_a: #{User.all.to_a.inspect}"
    assert_raises Mongoid::Errors::DocumentNotFound do
      @result = User.find(:name=>"xxxxx").limit(5)
    end
    puts "@result = User.find(:name=>\"xxxxx\").limit(5); @result: #{@result.inspect}"
    @result = User.where(:name=>"xxxxx").limit(5)
    puts "@result = User.where(:name=>\"xxxxx\").limit(5); @result.class: #{@result.class}"
    puts "@result.to_json: #{@result.to_json}"
    puts "@result.length: #{@result.length}"
    @new_result ={:result =>@result, :count=>@result.length}
    puts "@new_result: #{@new_result.inspect}"
    puts "@new_result.to_json: #{@new_result.to_json}"
  end
end 
```

测试输出

```
Run options: --name=test_mongoid_lazy_eval

# Running tests:

User.all.to_a: [#<User _id: 4fca03e7e4d30b1e42000001, _type: nil, name: "xxxxx">]
@result = User.find(:name=>"xxxxx").limit(5); @result: nil
@result = User.where(:name=>"xxxxx").limit(5); @result.class: Mongoid::Criteria
@result.to_json: [{"_id":"4fca03e7e4d30b1e42000001","name":"xxxxx"}]
@result.length: 1
@new_result: {:result=>#<Mongoid::Criteria
  selector: {:name=>"xxxxx"},
  options:  {:limit=>5},
  class:    User,
  embedded: false>
, :count=>1}
@new_result.to_json: {"result":[{"_id":"4fca03e7e4d30b1e42000001","name":"xxxxx"}],"count":1}
.

Finished tests in 0.038161s, 26.2048 tests/s, 52.4095 assertions/s.

1 tests, 2 assertions, 0 failures, 0 errors, 0 skips 
```

# c# - 在 C# 中杀死一个线程

> ID：10850285
> 
> 赞同：2
> 
> 时间：2012-06-01T12:29:29.817
> 
> 标签：c#, multithreading

这不是终止系统进程，而是杀死“我自己”。我有几个并行的线程，由于不同的原因，它们可能会挂起。

当线程花费太长时间时，我已经创建了一个看门狗：

```
TimerCallback timerDelegate = new TimerCallback(CheckProcessStatus);
System.Threading.Timer watchDogTimer = new Timer(timerDelegate, new ProcessHealth(plog), 1000 * 60, 1000 * 60);
try
   {
   // lots of code here
   } finally
   {
      watchDogTimer.Dispose();
   } 
```

看门狗：

```
public void CheckProcessStatus(Object timerState) {
    ProcessHealth ph = (ProcessHealth)timerState;
    System.writeLine(string.Format("process runs for {0} minutes!", ph.WaitingTime);
    if (ph.WaitingTime>60) {
      // KILL THE PROCESS
    }
} 
```

当“这里有很多代码”花费太长时间时，无论线程处于什么状态，我都想终止线程。（在“终止进程”处）。

最好的方法是什么？

```
Thread.CurrentThread.Interrupt() 
```

或者

```
Thread.CurrentThread.Abort()? 
```

还是有更好的方法？（我不能使用像布尔“停止”变量这样的“简单”机制，因为“这里有很多代码”非常动态地通过反射等调用其他类。

这还有效吗？还是我只是杀死看门狗线程，而不是要监视的线程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:08:04.183

当线程处于未知状态时中止线程是不可取的。比如说，线程当前正在执行一个静态构造函数。静态 ctor 将被中止*并且不再运行*（因为出错的静态 ctor 不再运行）。您已经有效地破坏了 AppDomain 中的全局状态，而无法恢复。

还有很多其他的危害。那只是不飞。

有两个生产就绪选择中止线程：

1.  合作（结合 Thread.MemoryBarrier 设置事件或布尔标志）
2.  不要中止线程，而是整个 AppDomain 或进程。线程级粒度太小。您需要删除与该线程相关的所有状态，doo。

**我想强调的是，你不能以任何其他方式完成这项工作。**如果您坚持不合作地中止线程，您将在生产中遇到最奇怪的错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T14:28:55.597

`Thread.Abort`尝试通过注入带外（异步）异常来终止目标线程。这是不安全的，因为异常会在执行序列中不可预测的点注入。由于对数据结构的写入中断，这可能（并且经常会）导致应用程序域中的某种类型的损坏。

`Thread.Interrupt`导致 BCL 中的大多数阻塞调用（如`Thread.Sleep`、`WaitHandle.WaitOne`等）立即救助。与中止线程不同，中断线程可以完全安全，因为异常*是*在执行序列中可预测的点注入的。狡猾的程序员可以确保这些点被认为是“安全点”。

因此，如果“这里有很多代码”会响应，`Thread.Interrupt`那么这可能是一种可以接受的使用方法。但是，我想引导您更多地采用合作取消模式。基本上，这意味着您的代码必须定期轮询取消请求。TPL 已经有一个框架可以通过`CancellationToken`. `ManualResetEvent`但是，您可以使用一个或一个简单的 volatile bool 变量轻松完成同样的事情。

现在，如果“这里有很多代码”不在您的控制之下，或者如果协作取消模式不起作用（可能是因为您使用了有问题的 3rd 方库），那么您几乎别无选择，只能启动一个完全独立的运行有风险的代码的过程。使用 WCF 与进程通信，如果它没有响应，那么您可以在不破坏主进程的情况下杀死它。这是很多工作，但它可能是你唯一的选择。

# c# - 使用 FlagsAttribute 标记引用的 dll 中的枚举

> ID：10850290
> 
> 赞同：0
> 
> 时间：2012-06-01T12:29:45.183
> 
> 标签：c#, c#-4.0, vb6, enums, interop

在 .Net 中，我可以（并且应该）将`FlagsAttribute`应用于用作位掩码的枚举。这样我可以使用`HasFlag()`- 方法，如果我对它们进行按位运算，ReSharper 不会生气。

在一个项目中，我必须使用用 vb6 编写的 dll 中的枚举，当然它没有`FlagsAttribute`. （我看过代码，值是位标志。）

尽管 VisualStudio 在我使用时将其标记为红色`.HasFlag()`，但它编译并运行得很好。而且我可以通过始终将枚举强制转换为 int 来“禁用”ReSharper 对按位运算的警告（或用注释抑制它，......）

但是我想知道是否有一种更清洁的方法，例如将枚举标记为标志一次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T12:33:13.450

你不能标记一个外部依赖——如果你有一个`dll`，无论它的来源是什么，你都不能简单地改变它的内部（嗯，你*可以*，但这需要重写二进制文件）。

一种选择是在 VB6 和您的之间编写您*自己的*标志枚举和映射器，只需在代码中使用您的版本，而忽略映射层中的问题。

# mysql - 是否可以将此查询转换为联接？

> ID：10850291
> 
> 赞同：2
> 
> 时间：2012-06-01T12:29:45.527
> 
> 标签：mysql

这是查询：

```
SELECT *
FROM square_achievements_achievements
JOIN square_achievements_achievement_counters ON square_achievements_achievement_counters.SAA_ID = square_achievements_achievements.SAA_ID
JOIN square_achievements_counters ON square_achievements_counters.SAC_ID = square_achievements_achievement_counters.SAC_ID
WHERE square_achievements_counters.eventObject = 'CommentEvent'
AND square_achievements_counters.eventType = 'add'
AND square_achievements_achievements.SAA_ID NOT IN
(
    SELECT square_achievements_achievements.SAA_ID 
    FROM square_achievements_achievements 
    JOIN square_achievements_user_achievements ON square_achievements_user_achievements.SAA_ID = square_achievements_achievements.SAA_ID
    WHERE square_achievements_user_achievements.UID = 83
) 
```

如果可能的话，将此查询编写为连接会更有效吗？如果是这样，它将如何重写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:37:07.887

```
SELECT  a.*
FROM    achievements a
JOIN    achievement_counters ac
ON      ac.saac_id = a.saa_id
JOIN    counters c
ON      c.sac_id = ac.sac_id
WHERE   c.eventObject = 'CommentEvent'
        AND c.eventType = 'add'
        AND a.saa_id NOT IN
        (
        SELECT  saa_id
        FROM    user_achievements 
        WHERE   uid = 83
        ) 
```

这很不错。

如果你想加入，使用这个：

```
SELECT  a.*
FROM    achievements a
JOIN    achievement_counters ac
ON      ac.saac_id = a.saa_id
JOIN    counters c
ON      c.sac_id = ac.sac_id
LEFT JOIN
        user_achievements ua
ON      ua.uid = 83
        AND ua.saa_id = a.saa_id
WHERE   c.eventObject = 'CommentEvent'
        AND c.eventType = 'add'
        AND ua.saa_id IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:37:51.850

我更喜欢使用相关名称来提高代码的可读性

尝试这个：

```
SELECT * 
FROM square_achievements_achievements a
JOIN square_achievements_achievement_counters b  ON b.SAAC_ID = a.SAA_ID 
JOIN square_achievements_counters c ON c.SAC_ID = b.SAC_ID 
JOIN square_achievements_user_achievements d on d.SAA_ID = a.SAA_ID 
JOIN square_achievements_user_achievements u on d.SAA_ID = u.SAA_ID AND u.UID = 83 
WHERE c.eventObject = 'CommentEvent' 
AND a.eventType = 'add' 
```

# android - 在 Android 4+ (ICS) 中为 aSmack 使用 Android TrustStore

> ID：10850300
> 
> 赞同：3
> 
> 时间：2012-06-01T12:30:14.903
> 
> 标签：android, xmpp, keystore, asmack

我不是密钥库方面的专家，很难理解其中的细微差别，但这就是我能做到的：

[在使用此处](https://github.com/Flowdalic/asmack)找到的 asmack 构建创建 xmpp 连接时，仍然需要更改信任库，通常，比如说网络上的多个[源](http://nhachicha.wordpress.com/2012/03/14/xmpp-client-with-android/)，使用这些命令完成

```
ConnectionConfiguration config = new ConnectionConfiguration(host, Integer.parseInt(port), service);
config.setTruststorePath("/system/etc/security/cacerts.bks");
config.setTruststorePassword("changeit");
config.setTruststoreType("bks");
XMPPConnection connection = new XMPPConnection(connConfig);
connection.connect(); 
```

这适用于较旧的 Android 版本，但在 ICS 下他们改变了一些东西，现在它不再存在了。现在的路径不同了。

显然[这可以解决](http://redmine.xabber.com/issues/212#note-3)，但我不知道如何解决。

显然，需要一种根据 SDK 版本返回路径的方法，该方法返回设置 sdk-path 所需的字符串，因为您不能只将密钥库本身返回到 xmpp-connection。

参考[这个](https://github.com/tomwhipple/AndroidPinning/blob/03d9b7d27ae3b12a946f7ac76143b7213af67579/java/org/thoughtcrime/ssl/pinning/PinningTrustManager.java)方法看起来像这样：

```
private String getTrustStorePath() 
{
 String path = System.getProperty("javax.net.ssl.trustStore");

 if (path == null) 
 {
  if ( Build.VERSION.SDK_INT >= 14 ) 
  {
   //THIS IS THE PART I DONT KNOW
   path="";
  }
  else
  {
   path = "/system/etc/security/cacerts.bks";
  }

  return path;
} 
```

[在这里](https://stackoverflow.com/questions/7002365/android-central-keystore)，一位评论者说，在 Android 下，“4.x; /etc/security/cacerts.bks 被替换为目录 /etc/security/cacerts/ 包含证书作为单独的 PEM 编码文件。” 但是，我不知道这有什么相关性（如果有的话）。

我还检查了使用 xmpp 和 asmack 的两个项目的代码（[gtalksms](http://code.google.com/p/gtalksms/source/browse/src/com/googlecode/gtalksms/XmppManager.java?name=v1.9.2)和[yaxim](https://github.com/ge0rg/yaxim)但没有看到他们如何避免这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:14:51.133

试试这个：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
    connectionConfiguration.setTruststoreType("AndroidCAStore");
    connectionConfiguration.setTruststorePassword(null);
    connectionConfiguration.setTruststorePath(null);
} else {
    connectionConfiguration.setTruststoreType("BKS");
    String path = System.getProperty("javax.net.ssl.trustStore");
    if (path == null)
        path = System.getProperty("java.home") + File.separator + "etc"
            + File.separator + "security" + File.separator
            + "cacerts.bks";
    connectionConfiguration.setTruststorePath(path);
} 
```

请参阅[https://github.com/Flowdalic/asmack/wiki/Truststore](https://github.com/Flowdalic/asmack/wiki/Truststore)和一些背景说明[http://nelenkov.blogspot.com/2011/12/ics-trust-store-implementation.html](http://nelenkov.blogspot.com/2011/12/ics-trust-store-implementation.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T22:16:41.220

ICS 中的信任存储不再位于单个 .bks 文件中，而是位于`/system/etc/security/cacerts`目录中单独的 PEM 编码文件中。用户添加的证书可以放在`/data/misc/keychain/cacerts-added`. 更多细节可以在**[这里](http://nelenkov.blogspot.nl/2011/12/ics-trust-store-implementation.html)**找到。

您的证书文件必须命名为：`subject-hash.N`其中 N 是从 0 开始的连续整数（通常只有 0，但如果已使用 0，则为 1 等）。

要获取证书的主题哈希，您可以像这样使用 openssl： `openssl x509 -noout -subject_hash_old -in my-cert-file.pem`

# c# - CSharpCodeProvider 中的 Dll 引用仅在设置为 .NET 2.0 时才有效？

> ID：10850302
> 
> 赞同：2
> 
> 时间：2012-06-01T12:30:25.510
> 
> 标签：c#, .net, dll, .net-3.5, csharpcodeprovider

当我将 CSharpCodeProvider 类设置为使用 .NET 3.5 时，尝试加载某些引用的 DLL 时出错：

```
Line number 0, Error Number: CS0006, 'Metadata file 'System.Linq.dll' could not be found;
Line number 0, Error Number: CS0006, 'Metadata file 'System.Collections.dll' could not be found; 
```

问题是，如果我将它设置为 2.0，它可以工作，但它不能使用 LINQ。

现在在其他线程中有解决方案说这是因为 DLL 不在正确的位置，并提供解决方案，例如：

```
typeof(System.Xml.Linq.Extensions).Assembly.Location 
```

要获取 Linq 位置的位置，但由于我的程序的工作方式，我不知道我可能需要加载哪些 DLL。这对于外部库来说不是问题，因为用户无论如何都需要输入它们的位置，但是对于系统 dll，我可以使用`"System.Linq"`or获取它们的位置`"System.Collections"`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T12:33:54.783

我不知道`System.Collections.dll`或`System.Linq.dll`。大多数 LINQ 位于 中`System.Core.dll`，集合位于`mscorlib`和`System.dll`IIRC 中。您需要区分*名称空间*和*程序集*。（您使用`using`指令来导入命名空间，并在项目中添加对程序集的引用。）

您对哪些课程感兴趣？在 MSDN 中查找它们以查看它们所在的程序集。

# android - Android、Proguard 和 Javamail

> ID：10850304
> 
> 赞同：6
> 
> 时间：2012-06-01T12:30:34.640
> 
> 标签：android, jakarta-mail, proguard

首先，我已经提到过类似的帖子，[Android、javamail 和 proguard](https://stackoverflow.com/questions/5434699/android-javamail-and-proguard)

提到的解决方案是在 proguard-project.txt 中明确保留以下内容：

```
-dontwarn java.awt.**
-dontwarn java.beans.Beans
-dontwarn javax.security.**

-keep class javamail.** {*;}
-keep class javax.mail.** {*;}
-keep class javax.activation.** {*;}

-keep class com.sun.mail.dsn.** {*;}
-keep class com.sun.mail.handlers.** {*;}
-keep class com.sun.mail.smtp.** {*;}
-keep class com.sun.mail.util.** {*;}
-keep class mailcap.** {*;}
-keep class mimetypes.** {*;}
-keep class myjava.awt.datatransfer.** {*;}
-keep class org.apache.harmony.awt.** {*;}
-keep class org.apache.harmony.misc.** {*;} 
```

乍一看，这似乎有效，因为它编译时没有任何警告。但是，它无法读取消息内容并直接跳过它。我尝试了以下方法：

1.  -includelibraryjars 明确命名 javamail 所需的 3 个 jar 文件。
2.  - 按照新的 libs/include 格式，将 jar 删除为外部库。
3.  - 维护 proguard-android.txt 中的默认 android 设置
4.  - 遵循 proguard 常见问题解答中的故障排除指南。
5.  - 开始一个新项目并将源文件复制到它。
6.  - 尝试了各种 proguard 选项，包括 -dontshrink、keepnames 等
7.  - 痴迷项目/清洁

经过几个小时的挫折后，我发现这似乎有效：

```
-dontobfuscate
-dontshrink
-keepdirectories
-keeppackagenames javax.mail.**
-keeppackagenames javax.activation.**
-keeppackagenames com.sun.mail.**
-keeppackagenames myjava.**
-keeppackagenames org.apache.harmony.**
-keeppackagenames mailcap.**
-keeppackagenames mimetypes.**
-keep class javamail.** {*;}
-keep class javax.mail.** {*;}
-keep class javax.activation.** {*;}

-keep class com.sun.mail.dsn.** {*;}
-keep class com.sun.mail.handlers.** {*;}
-keep class com.sun.mail.smtp.** {*;}
-keep class com.sun.mail.util.** {*;}
-keep class mailcap.** {*;}
-keep class mimetypes.** {*;}
-keep class myjava.awt.datatransfer.** {*;}
-keep class org.apache.harmony.awt.** {*;}
-keep class org.apache.harmony.misc.** {*;}

-dontwarn java.awt.**
-dontwarn java.beans.Beans
-dontwarn javax.security.** 
```

当然这很荒谬，因为我打开了 -dontobfuscate 和 -dontshrink。任何 proguard 和 javamail 专家都有解决方案吗？我是 ADT17，使用 2.1(api7) 进行构建。如果我可以将罐子完全排除在流程之外？在这一点上，任何建议都将是天赐之物。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-02T21:51:04.803

问题解决了。我已在此处为任何对上面链接中提到的其他解决方案有问题的人发布了解决方案。

因为我在 javamail (Mail.java) 中使用了一个辅助类，所以我需要将该类作为 -keep 包含在内，这样它才能工作。我编辑了[Android、javamail 和 proguard](https://stackoverflow.com/questions/5434699/android-javamail-and-proguard)提供的解决方案以包含帮助程序类，因为许多人使用它，而其他解决方案可能会在没有它的情况下严重失败。

把它放在你的 proguard-project.txt 文件中。否则我使用默认的android设置。

```
-dontshrink
-keep class javax.** {*;}
-keep class com.sun.** {*;}
-keep class myjava.** {*;}
-keep class org.apache.harmony.** {*;}
-keep public class Mail {*;}
-dontwarn java.awt.**
-dontwarn java.beans.Beans
-dontwarn javax.security.** 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-06T17:47:22.720

就我而言， javax.activation 导致了以下问题：

```
Warning: com.sun.mail.handlers.handler_base: can't find referenced method 'boolean equals(java.awt.datatransfer.DataFlavor)' in program class javax.activation.ActivationDataFlavor 
```

所以我不得不添加`-dontwarn javax.activation.**`ThumbsDP 解决方案。所以所有这些都是对我有用的 proguard-rules 的以下补充：

```
-dontshrink
-keep class javax.** {*;}
-keep class com.sun.** {*;}
-keep class myjava.** {*;}
-keep class org.apache.harmony.** {*;}
-keep public class Mail {*;}
-dontwarn java.awt.**
-dontwarn java.beans.Beans
-dontwarn javax.security.**
-dontwarn javax.activation.** 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-01T15:40:41.387

现有的解决方案对我来说有点牵强。:)

我认为这是一个更好的解决方案，放在 proguard-rules.pro 文件中：

```
-libraryjars libs/mail.jar
-libraryjars libs/activation.jar
-libraryjars libs/additionnal.jar 
```

# 作为奖励

解决proguard问题后，我也确实得到了以下异常：“com.google.api.client.googleapis.json.GoogleJsonResponseException: 404 Not Found”

为了解决它，还要加上以下行：

```
-keep class com.google.** {*;} 
```

# ios - iOS SecKeyRef（公钥）将其发送到服务器

> ID：10850306
> 
> 赞同：9
> 
> 时间：2012-06-01T12:30:48.023
> 
> 标签：ios, cryptography, rsa

现在我的公钥有问题，我使用 SecKeyGeneratePair 生成公钥和私钥。现在我必须将我的公钥发送到服务器。我使用下面的方法将 SecKeyRef 转换为 NSData，我总是得到相同的公钥。但是我将其转换为base64格式并将其发送到服务器。但它根本不起作用，服务器（Java）开始抛出错误。这是我的 iOS 代码：

```
- (NSData *)getPublicKeyBits {
    OSStatus sanityCheck = noErr;
    NSData * publicKeyBits = nil;

    NSMutableDictionary * queryPublicKey = [[NSMutableDictionary alloc] init];

    // Set the public key query dictionary.
    [queryPublicKey setObject:(id)kSecClassKey forKey:(id)kSecClass];
    [queryPublicKey setObject:publicTag forKey:(id)kSecAttrApplicationTag];
    [queryPublicKey setObject:(id)kSecAttrKeyTypeRSA forKey:(id)kSecAttrKeyType];
    [queryPublicKey setObject:[NSNumber numberWithBool:YES] forKey:(id)kSecReturnData];

    // Get the key bits.
    sanityCheck = SecItemCopyMatching((CFDictionaryRef)queryPublicKey, (CFTypeRef *)&publicKeyBits);

    if (sanityCheck != noErr)
    {
        publicKeyBits = nil;
    }

    [queryPublicKey release];

    return publicKeyBits;
} 
```

谁能帮我将 SecKeyRef 转换为 NSString 或 NSData。

提前致谢！！！

——穆拉利克里希南

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T19:30:24.113

我认为 iOS 生成的密钥缺少一些世界其他地方（在您的情况下为 Java API）期望看到的标头信息。因此，为了让 Java 使用由 iOS 安全 API 生成的密钥，您首先需要将此标头信息*添加*到二进制密钥中。

相反，为了让 iOS Sec* API 使用由 openssl 或 ssh-keygen 生成的密钥（例如），您必须首先从二进制密钥*中删除此标头信息。*

具体来说，iOS 不喜欢 ASN.1 OID，而世界其他地方则喜欢。

请参阅这篇文章以导出 iOS 生成的密钥以供 Java 应用程序使用——它应该可以帮助您：

[http://blog.wingsofhermes.org/?p=42](http://blog.wingsofhermes.org/?p=42)

# java - 找不到用于配置的本地数据源 - 必须在 LocalSessionFactoryBean 上设置“数据源”属性

> ID：10850307
> 
> 赞同：0
> 
> 时间：2012-06-01T12:30:49.363
> 
> 标签：java, spring, hibernate

我正在使用 Spring 3.0 和 Hibernate 3.6
DataSource 定义为

```
<bean id="test-pool"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
            <property name="driverClassName" value="com.microsoft.sqlserver.jdbc.SQLServerDriver" />
            <property name="url"
                value="jdbc:sqlserver://Machine:1433;databaseName=TEST;maxPoolSize=100;
                minPoolSize=5;acquireIncrement=5;checkoutTimeout=5000;maxStatements=100;idleConnectionTestPeriod=3000" />
            <property name="username" value="${user}" />
            <property name="password" value="${database.password}"/>

    </bean> 
```

具有数据源的会话工厂是

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="dataSource" ref="test-pool"/>
        <property name="configLocation" value="WEB-INF/classes/test.hibernate.cfg.xml"></property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.SQLServerDialect</prop>
                <prop key="hibernate.cache.use_second_level_cache">true</prop>
            </props>
        </property>
    </bean> 
```

在工厂类中：

```
LocalSessionFactoryBean localfactorybean = (LocalSessionFactoryBean)AppContext.getBean("&sessionFactory");
        Configuration configuration = localfactorybean.getConfiguration();
        SessionFactory sessionFactory = configuration.buildSessionFactory(); 
```

但我得到以下异常

```
org.hibernate.HibernateException: No local DataSource found for configuration - 'dataSource' property must be set on LocalSessionFactoryBean
    at org.springframework.orm.hibernate3.LocalDataSourceConnectionProvider.configure(LocalDataSourceConnectionProvider.java:49)
    at org.hibernate.connection.ConnectionProviderFactory.newConnectionProvider(ConnectionProviderFactory.java:143)
    at org.hibernate.connection.ConnectionProviderFactory.newConnectionProvider(ConnectionProviderFactory.java:84)
    at org.hibernate.cfg.SettingsFactory.createConnectionProvider(SettingsFactory.java:459)
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:91) 
```

我当前的代码有什么问题？

如果我像这样再次显式获取 SessionFactory，我将摆脱此异常：

```
SessionFactory sessionFactory = (SessionFactory) AppContext.getBean("sessionFactory"); 
```

如您所见，它并不整洁，我想摆脱它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:51:54.663

您使用的是哪个确切版本的 Hibernate？[本文](https://jira.springsource.org/browse/SPR-2909)表明 3.2.1 存在问题，与您的症状相同。也许是时候更新你的版本了——hibernate 现在是 4.1.4

# objective-c - Objective C 对实现协议的类的引用

> ID：10850309
> 
> 赞同：0
> 
> 时间：2012-06-01T12:30:54.810
> 
> 标签：objective-c

如何引用实现特定协议的类（不是它的实例！）？

```
+(id<Data>) dataForName:(NSString *)name {
    id<DataManager> manager = SpecializedDataManager; // <-- which datatype does "manager" have to be?
    return [[manager sharedManager] get:name]; //Getting data over a singleton of manager
} 
```

Where`Data`和`DataManger`是协议，`SpecializedDataManager`是实现`DataManager`协议的类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:37:35.467

我自己没有尝试过，但是您*应该*能够使用指向类的指针，尽管我怀疑您是否可以指定该类必须实现某个协议：

```
static Class manager = NULL;

+ (void)someInitMethod
{
    manager = [SpecializedDataManager class];
    NSAssert([manager conformsToProtocol:@protocol(DataManager)], @"Achtung!"); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:47:43.987

这是你要找的：

```
+(id<Data>) dataForName:(NSString *)name {
    Class<DataManager> manager = [SpecializedDataManager class];
    return [[manager sharedManager] get:name];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T12:49:46.230

如果我理解你是正确的，你想写这样的东西：

```
id<SomeProtocol> someObject = AnotherObjectConformingThisProtocol;    
Class class = [(NSObject*)SomeObject class];

if ([someObject isKindOfClass:[AnotherObjectConformingThisProtocol class]]) {}
if (class == [AnotherObjectConformingSomeProtocol class]) {} 
```

如果不是 - 请澄清你的意思。

更新：我在另一篇文章附近阅读了您的评论并得到了它：

为您的 DataManager 和 Data 协议创建包装类：

```
@interface DataClass : NSObject <Data>
@end

@interface DataManagerClass : NSObject <DataManager>
@end 
```

并使用这样的代码：

```
+(DataClass*) dataForName:(NSString *)name {
    DataManagerClass* manager = SpecializedDataManager; // <-- which datatype does "manager" have to be?
    return [[manager sharedManager] get:name]; //Getting data over a singleton of manager
} 
```

# php - Joomla！查询无结果

> ID：10850310
> 
> 赞同：0
> 
> 时间：2012-06-01T12:31:01.690
> 
> 标签：php, mysql, database, joomla

我在 Joomla 中有一个基本查询！我真的，真的不知道为什么它不返回任何东西：

```
$database =& JFactory::getDBO();
$query = "SELECT * FROM my_table";
$database->setQuery($query);
$result = $database->loadObjectList();
var_dump($result);
die(); 
```

查询是非常非常基本的，我知道。它返回 $result 为空。问题是，我在单独的 .php 脚本文件 (localhost/myscript.php) 中运行此查询。我网站其余部分的所有其他查询似乎都运行得很好（包括其他脚本文件中的一些，比如这个）。

我已经在终端中运行了这个查询并返回了我想要的。拜托，我需要一些想法:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:39:59.307

如果您如您所说在单独的 php 文件（localhost/myscipt.php）中尝试此操作，则需要正确的类。看到这个[帖子](https://stackoverflow.com/questions/9459430/include-jfactory-class-in-an-external-php-file-joomla)。最后一个答案有一些细节。

但是，不建议这样做。您应该在框架内 使用[模块](http://docs.joomla.org/Creating_a_simple_module)或[插件开发。](http://docs.joomla.org/Creating_a_Plugin_for_Joomla_1.5)

或者，您可以使用[Jumi](http://extensions.joomla.org/extensions/core-enhancements/coding-a-scripts-integration/custom-code-in-content/1023)，它允许您编写任何您想要的代码并将其作为模块的一部分包含在内。让生活轻松很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-09T04:35:23.570

我认为您的查询缺少表前缀，您可以使用`$database->getPrefix();` 也尝试更改来回显前缀

```
$query = "SELECT * FROM my_table"; 
```

至

```
$query = "SELECT * FROM `#__my_table`"; 
```

> 注意：Joomla 使用占位符作为前缀，“<code>#__”将替换为正确的前缀。

# android - Android：如何使用画布创建视图然后在活动中使用此视图

> ID：10850312
> 
> 赞同：3
> 
> 时间：2012-06-01T12:31:04.310
> 
> 标签：android, canvas

我必须使用画布类在其上添加框架和多个图像。但我的问题是我必须在我的活动类中使用画布视图。我想将此画布视图用作小部件，以便可以在我的 XML 中使用它。

我通过使用以下代码进行了尝试：

```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Paint.Style;
import android.util.AttributeSet;
import android.view.View;

public class TwoDee extends View {
    private int mWidth;
    private int mHeight;

    public TwoDee(Context context) {
        super(context);
    }

    public TwoDee(Context context, AttributeSet attribs) {
        super(context, attribs);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        Paint paint = new Paint(); 
        paint.setColor(Color.GRAY); 
        paint.setStyle(Style.FILL); 
        canvas.drawPaint(paint);

        paint.setColor(Color.BLUE);
        canvas.drawLine(0, 0, mWidth, mHeight, paint);
        canvas.drawLine(mWidth, 0, 0, mHeight, paint);

        paint.setColor(Color.RED);
        canvas.drawText("0 kal", 50, 85, paint);
        canvas.save();
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        mWidth = View.MeasureSpec.getSize(widthMeasureSpec);
        mHeight = View.MeasureSpec.getSize(heightMeasureSpec);
        setMeasuredDimension(mWidth, mHeight);
    }

    public void setImage(Drawable myImg) {
        newImg = myImg;
        invalidate();
    }
} 
```

并像这样在我的 xml 类中使用它：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
        <TextView  
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content" 
            android:text="@string/hello"
        />
        <com.yourapphere.TwoDee
            android:id="@+id/twoDee1"
            android:layout_width="150dp"
            android:layout_height="100dp"
        />
</LinearLayout> 
```

我正在我的活动类中访问它，如下所示：

```
TwoDee myCanvas;
myCanvas = (TwoDee)findViewById(R.id.twoDee1);
myCanvas.setImage(drawable); 
```

我的问题是，当我尝试从我的活动类中调用 setImage() 函数时，它显示空指针异常。我应该怎么做才能使用我的 Activity 类在画布视图中添加图像。我不想使用`setContentView`，因为这只会使 Canvas View 显示在我的活动中。

**日志输出：**

```
FATAL EXCEPTION: main
java.lang.NullPointerException
at iTagz.android.Dialog_ImagePreview$1.onClick(Dialog_ImagePreview.java:84)
at android.view.View.performClick(View.java:2485)
at android.view.View$PerformClick.run(View.java:9081)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3770)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:880)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:638)
at dalvik.system.NativeStart.main(Native Method) 
```

**Dialog_ImagePreview**是我调用**SetImage**方法的活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T05:26:07.927

我从其他活动中调用我的视图，这就是我得到 NullPointerException 的原因。但现在我从相同的活动中调用它并且它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:49:06.390

仔细看你的代码

```
<com.yourapphere.TwoDee
            android:layout_width="150dp"
            android:layout_height="100dp"
        /> 
```

你没有写 id 属性，应该是

```
<com.yourapphere.TwoDee
            android:id=@+id/twoDee1"
            android:layout_width="150dp"
            android:layout_height="100dp"
        /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T13:03:24.763

这是错误的。

**我不想使用 setContentView，因为这只会使 Canvas View 显示在我的活动中。**

除非您不指定 setContentView，否则 android 将如何知道应该从哪个布局文件控件中获取。

例如

```
TwoDee myCanvas = (TwoDee) findViewById(R.id.twoDee1); 
```

findViewById 仅适用于您在 setContentView 中指定布局文件的情况。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-01T12:36:30.080

您缺少`R.id.twoDee1`和/或`setContentView()`.

在您的布局中添加一个 id`com.yourapphere.TwoDee`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
        <TextView  
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content" 
            android:text="@string/hello"
        />
        <com.yourapphere.TwoDee
            android:id="@+id/twoDee1"
            android:layout_width="150dp"
            android:layout_height="100dp"
        />
</LinearLayout> 
```

然后在`onCreate`：

```
setContentView(R.layout.yourxmlfile);
TwoDee myCanvas = (TwoDee) findViewById(R.id.twoDee1);
myCanvas.setImage(drawable); 
```

更新：

你*必须*打电话`setContentView`！我不知道你为什么不应该“覆盖完整的画布”（这意味着什么......）

# xcode - 使线程不中断的mac os

> ID：10850313
> 
> 赞同：0
> 
> 时间：2012-06-01T12:31:08.557
> 
> 标签：xcode, macos, kernel, lldb

我正在 mac os 上开发多线程应用程序。我面临下一个问题：当我尝试使用 xcode-cocoa 应用程序进行调试时（注意：控制台应用程序没有相同的问题），我的线程在下一次调用中返回错误：kevent()、semaphore_wait() , semaphore_timedwait() 与 EINTR（用于 kevent）和 KERN_ABORTED（用于 semaphore_*）。我认为这是由于 lldb 的工作。

问题是：我无法调试我的应用程序，因为我在收到此类事件后崩溃了。如果我会做他们的处理（只是回忆相同的功能），那么我的应用程序工作非常奇怪。无论如何，当我的 semaphore_timedwait() 中断时，我不能（我可以，但它非常难看）对这种情况做出很好的处理，因为我应该在我去 timedwait() 以使新的 timedwait() 正确之前“记住”时间。

因此，我的问题的解决方案是，如果我可以禁用当前线程“中断” - 从另一个线程\进程中断的能力，如果 lldb 将发送一些信号，我的函数将不会返回。在mac os上可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:41:17.717

几点注意事项：

1.  在某些调试器中（我知道 gdb 支持），您可以说是所有线程还是只有一个线程在断点处停止。

2.  一般来说，你应该在你的代码中准备好一个信号，即使它是更多的工作。

3.  在多线程应用程序中，您可以考虑在大多数（辅助）线程中阻塞信号，因此信号应在准备就绪的线程中处理。见`pthread_sigmask()`。

# django - 如何从 Django_tables2 行获取信息？

> ID：10850316
> 
> 赞同：8
> 
> 时间：2012-06-01T12:31:22.217
> 
> 标签：django, django-views, django-tables2

我已经声明了一个表并想要获取使用复选框字段检查的行的值。任何帮助，我如何在我的视图中编写此事件，以便每次我选择一行并点击提交按钮时，它都会返回该行的值。代码如下：

```
 class mytables(tables.Table):
          new_database = tables.CheckBoxColumn()
          student =tables.Column(accessor='Student')
          Class = tables.Column(accessor='class') 
```

在我的模板中有一个提交按钮。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-02T07:49:42.630

您需要为`CheckBoxColumn`. 通常，如果您要显示查询集，您将使用`pk`每个对象的`CheckBoxColumn`. 在你的情况下，这看起来像：

```
class EnrollmentTable(tables.Table):
    selection = tables.CheckBoxColumn(accessor='pk')
    student = tables.Column()
    class = tables.Column() 
```

然后您需要在表单中呈现表格，以便用户可以提交表单，例如：

```
<form action="/someurl/" method="post">
    {% load render_tables from django_tables2 %}
    {% render_table table %}
    <input type="submit"/>
</form> 
```

然后你需要一个连接到`/someurl/`. 在您的情况下，视图将需要查看`POST`变量`selection`：

```
def someview(request):
    if request.method == "POST":
        pks = request.POST.getlist("selection")
        selected_objects = SomeModel.objects.filter(pk__in=pks)
        # do something with selected_objects
    else:
        # ... 
```

# sql - 将多个 select 语句作为值插入到表中

> ID：10850328
> 
> 赞同：6
> 
> 时间：2012-06-01T12:32:17.787
> 
> 标签：sql, sql-server

是否可以在 SQL Server 中执行类似的操作：

```
INSERT INTO MyTable (Col1,Col2,Col3,Col4,Col5,Col6,Col7) VALUES

SELECT Col1 FROM Func1(),

SELECT Col2 FROM Func2(),

SELECT Col3,Col4,Col5 FROM Func3(),

SELECT Col6 FROM Func4(),

SELECT Col7 FROM Func5() 
```

我有大量返回单值结果的函数和一个返回 3 列的函数。我想将所有这些数据插入到表格的一行中？

我可以看到返回多列的函数可能是一个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-01T12:40:04.057

如果所有函数只返回一行...

```
INSERT INTO
  MyTable (Col1,Col2,Col3,Col4,Col5,Col6,Col7)
SELECT
  f1.col1, f2.col2, f3.col3, f3.col4, f3.col5, f4.col6, f5.col7
FROM
  (SELECT Col1 FROM Func1())           AS f1
CROSS JOIN
  (SELECT Col2 FROM Func2())           AS f2
CROSS JOIN
  (SELECT Col3,Col4,Col5 FROM Func3()) AS f3
CROSS JOIN
  (SELECT Col6 FROM Func4())           AS f4
CROSS JOIN
  (SELECT Col7 FROM Func5())           AS f5 
```

如果函数返回多于一行，则需要以正常方式加入它们；使用谓词来确定哪一行与哪一行连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:42:39.200

```
 INSERT INTO MyTable (Col1,Col2,Col3,Col4,Col5,Col6,Col7) VALUES

 SELECT Col1 FROM Func1(),

 SELECT Col2 FROM Func2(),

 SELECT Col3 FROM (SELECT Col3,Col4,Col5 FROM Func3()),

 SELECT Col4 FROM (SELECT Col3,Col4,Col5 FROM Func3()),

 SELECT Col5 FROM (SELECT Col3,Col4,Col5 FROM Func3())

 SELECT Col6 FROM Func4(),

 SELECT Col7 FROM Func5() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-14T15:58:51.857

您必须删除`Values and all ","`每个 select 语句周围的括号。

# file-type - 如何将 .arff 格式的文件转换为 .txt 文件格式？

> ID：10850331
> 
> 赞同：0
> 
> 时间：2012-06-01T12:32:21.593
> 
> 标签：file-type, file-conversion

如何从 .arff 文件转换为 .txt 文件？我在互联网上找不到任何转换器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:35:37.007

> 这种格式基本上只是一个文本文件[...]

你不能右键单击并用记事本打开它吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:35:41.177

.arff 或属性关系文件格式 (ARFF) 文件是 ASCII 文本文件，因此将扩展名更改为 .txt 文件将起作用。

更多[信息](http://www.cs.waikato.ac.nz/ml/weka/arff.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-14T16:37:20.050

您可以使用 sublime 编辑器打开

# html - 垂直对齐中心输入和div中的按钮

> ID：10850341
> 
> 赞同：3
> 
> 时间：2012-06-01T12:32:49.533
> 
> 标签：html, css, vertical-alignment

我在 div 中有一个搜索设置，但由于某种原因无法使其垂直对齐中心

这是我的代码 -

HTML：

```
<div class="search">
<input class="searchfield" type="text" placeholder="Search..." value="" />&nbsp;<button class="searchbutton">SEARCH</button>
</div> 
```

CSS：

```
.search{
padding 0 10px;
font-size:0.8em;
float:right;
height:100%;
display:table;
vertical-align:middle;
}

.searchfield{
display:table-cell;
}

.searchbutton{
display:table-cell;
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T14:57:23.393

添加与您的字体大小相等的行高。

```
.search{
  padding 0 10px;
  font-size:0.8em;
  **line-height: 0.8em;**
  float:right;
  height:100%;
  display:table;
  vertical-align:middle;
} 
```

# java - 将带有点表示的路径的字符串转换为文件名

> ID：10850342
> 
> 赞同：2
> 
> 时间：2012-06-01T12:32:52.433
> 
> 标签：java, string, file

我有一个属性文件

```
{Content}
com.some.that.file.txt = com.some.dest
com.fold.cust.dir = com.some.dest 
```

其中键表示要复制到 {Value}=com.some.dest 的目录名称

我已经用“/”替换了点，但是这样我不能保留文件名，例如 file.txt 变成了 file/txt。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T12:40:13.873

使用[`String.replaceAll(regex, replacement)`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)正确的正则表达式：

```
String filename = value.replaceAll("\\.(?=.*\\.)", "/"); 
```

此正则表达式匹配点，但前提是匹配点之后的某处还有另一个点，使用“前瞻”检查，它具有语法`(?=regex)`。

这是一个测试：

```
public static void main(String[] args) {
    String value = "com.some.that.file.txt";
    String filename = value.replaceAll("\\.(?=.*\\.)", "/");
    System.out.println(filename);
} 
```

输出：

```
com/some/that/file.txt 
```

### 编辑：

要查找目录名称，请使用以下命令：

```
String dirname = filename.replaceAll("/(?!.*/).*", ""); 
```

或在一行中：

```
String dirname = value.replaceAll("\\.(?=.*\\.)", "/").replaceAll("/(?!.*/).*", ""); 
```

这个额外的步骤使用具有语法的“负前瞻”`(?!regex)`来匹配斜线，仅当匹配的斜线之后的某处*没有*斜线时，然后正则表达式匹配之后使用的所有内容`.*`

# symfony - symfony2：如何在 QueryBuilder 中使用 group_concat

> ID：10850345
> 
> 赞同：22
> 
> 时间：2012-06-01T12:33:28.880
> 
> 标签：symfony, doctrine-orm

我有一个名为“位置”的嵌套集（使用 Gedmo 树）实体。实体“Appartment”具有 location_id 以及我需要做什么来映射称为“path”的标量值以查询返回所有公寓。

在 Doctrine1 中，我有以下代码：

```
/**
* Add "path" to each element
* 
* @param Doctrine_Query $query
* @param string $separator
*/
protected function addScalar_path(Doctrine_Query $query, $separator=", ")
{
    $subquery = "k99.root_id=o.root_id AND k99.lft<=o.lft AND k99.rgt>=o.rgt AND k99.level<=o.level" ;

    $query->addSelect("(SELECT GROUP_CONCAT(k99.name ORDER BY k99.level SEPARATOR '$separator') FROM Location k99 WHERE $subquery) AS path") ;
} 
```

注意：“o”别名用于主查询。此代码将允许我使用

```
{foreach .... as $appartment}
   {$appartment->path}
... 
```

哪个会打印：

```
Australia, Victoria, Melbourne, ...other children... 
```

如何在 D2 中做同样的事情？以及如何在我的 symfony2 项目中包含学说扩展？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-01T15:03:33.743

如果你想在 QueryBuilder 中使用它，你必须：

1）添加DQL函数GroupConcat： [GroupConcat](https://github.com/beberlei/DoctrineExtensions/blob/master/src/Query/Mysql/GroupConcat.php)

2）注册GroupConcat：[DQL用户定义函数](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/cookbook/dql-user-defined-functions.html)

另一种选择是使用 NativeQuery ：[Native SQL](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/native-sql.html)

* * *

在 symfony2 中注册一个 DQL 函数非常简单，只需在 config.yml 中添加 GROUP_CONCAT，如下所示：

```
 entity_managers:
        default:
            dql:
                string_functions:
                    GROUP_CONCAT: YourBundle\Query\Mysql\GroupConcat 
```

有关更多信息，请访问[注册自定义 DQL 函数](http://symfony.com/doc/current/cookbook/doctrine/custom_dql_functions.html)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2016-04-08T16:00:35.987

如果有人看到这篇文章，现在 Github 中有一个[Doctrine Extensions](https://github.com/beberlei/DoctrineExtensions)存储库。回购中有关于如何使用它的说明。您可以使用 composer 安装它，然后使用您感兴趣的任何功能。

**编辑：**

为了用户 Tushar，在 Doctrine2 的 DQL 中使用 GROUP_CONCAT 的方式是简单的安装[Doctrine Extensions](https://github.com/beberlei/DoctrineExtensions)：

```
composer require beberlei/DoctrineExtensions 
```

要启用它：在 config.yml 中添加以下内容：

```
doctrine:
 orm:
     dql:
         string_functions:
             group_concat: DoctrineExtensions\Query\Mysql\GroupConcat 
```

然后在您的代码中，您现在应该能够在 DQL 中使用 Group Concat：

```
$this->createQueryBuilder('location')
            ->select('location')
            ->addSelect("GROUP_CONCAT(DISTINCT location.name SEPARATOR '; ') AS locationNames");

        $result = $queryBuilder->getQuery()->getResult(); 
```

或者在原始问题的情况下：

```
$query->addSelect("(SELECT GROUP_CONCAT(k99.name ORDER BY k99.level SEPARATOR '$separator') FROM Location k99 WHERE $subquery) AS path"); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-06-04T10:49:40.630

只是对@a.aitboudad 答案的补充：
链接的 DQL 函数 GroupConcat 似乎具有«对 GROUP_CONCAT 的有限支持»。
这是完整的支持版本：配置如他所说。

```
// -------------------------------------------------
// Complete support of GROUP_CONCAT in Doctrine2
// -------------------------------------------------
// Original Article: http://habrahabr.ru/post/181666/
// Automated translation to English: http://sysmagazine.com/posts/181666/ 
// Original github commit: https://github.com/denisvmedia/DoctrineExtensions/blob/d1caf21cd7c71cc557e60c26e9bf25323a194dd1/lib/DoctrineExtensions/Query/Mysql/GroupConcat.php

/**
 * DoctrineExtensions Mysql Function Pack
 *
 * LICENSE
 *
 * This source file is subject to the new BSD license that is bundled
 * with this package in the file LICENSE.txt.
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to kontakt@beberlei.de so I can send you a copy immediately.
 */

namespace DoctrineExtensions\Query\Mysql;

use Doctrine\ORM\Query\AST\Functions\FunctionNode,
    Doctrine\ORM\Query\Lexer;

/**
 * Full support for:
 *
 * GROUP_CONCAT([DISTINCT] expr [,expr ...]
 *              [ORDER BY {unsigned_integer | col_name | expr}
 *                  [ASC | DESC] [,col_name ...]]
 *              [SEPARATOR str_val])
 *
 */
class GroupConcat extends FunctionNode
{
    public $isDistinct = false;
    public $pathExp = null;
    public $separator = null;
    public $orderBy = null;

    public function parse(\Doctrine\ORM\Query\Parser $parser)
    {
        $parser->match(Lexer::T_IDENTIFIER);
        $parser->match(Lexer::T_OPEN_PARENTHESIS);

        $lexer = $parser->getLexer();
        if ($lexer->isNextToken(Lexer::T_DISTINCT)) {
            $parser->match(Lexer::T_DISTINCT);

            $this->isDistinct = true;
        }

        // first Path Expression is mandatory
        $this->pathExp = array();
        $this->pathExp[] = $parser->SingleValuedPathExpression();

        while ($lexer->isNextToken(Lexer::T_COMMA)) {
            $parser->match(Lexer::T_COMMA);
            $this->pathExp[] = $parser->StringPrimary();
        }

        if ($lexer->isNextToken(Lexer::T_ORDER)) {
            $this->orderBy = $parser->OrderByClause();
        }

        if ($lexer->isNextToken(Lexer::T_IDENTIFIER)) {
            if (strtolower($lexer->lookahead['value']) !== 'separator') {
                $parser->syntaxError('separator');
            }
            $parser->match(Lexer::T_IDENTIFIER);

            $this->separator = $parser->StringPrimary();
        }

        $parser->match(Lexer::T_CLOSE_PARENTHESIS);
    }

    public function getSql(\Doctrine\ORM\Query\SqlWalker $sqlWalker)
    {
        $result = 'GROUP_CONCAT(' . ($this->isDistinct ? 'DISTINCT ' : '');

        $fields = array();
        foreach ($this->pathExp as $pathExp) {
            $fields[] = $pathExp->dispatch($sqlWalker);
        }

        $result .= sprintf('%s', implode(', ', $fields));

        if ($this->orderBy) {
            $result .= ' ' . $sqlWalker->walkOrderByClause($this->orderBy);
        }

        if ($this->separator) {
            $result .= ' SEPARATOR ' . $sqlWalker->walkStringPrimary($this->separator);
        }

        $result .= ')';

        return $result;
    }

}

// -------------------------------------------------
// Example of usage:
// -------------------------------------------------
$query = $this->createQueryBuilder('c')
    ->select("
            c as company,
            GroupConcat(b.id, ';', b.headOffice, ';', b.city, ';', s.name
            ORDER by b.id
            SEPARATOR '|') AS branches
        ")->leftJoin('c.branches', 'b')
    ->leftJoin('b.country', 's')
    ->groupBy('c.id')
    ->setFirstResult(0)
    ->setMaxResults(10)
    ->getQuery();
$result = $query->getResult(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-02T12:39:46.923

我有类似的问题。GROUP_CONCAT 不允许在里面使用 CASE-WHEN。 [这个库](https://github.com/oroinc/doctrine-extensions)解决了我的问题，所以也许它会有所帮助。

# android - 字符串 .replace 在 Android 中不起作用

> ID：10850346
> 
> 赞同：4
> 
> 时间：2012-06-01T12:33:32.717
> 
> 标签：android, string

```
String s1=s.replace('"', '\"'); 
```

在这里我想替换`"`为`\"`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-01T12:36:06.997

尝试`String s1 = s.replace("\"", "\\\"");`

*说明：*
当引用字符串中的引号或反斜杠时，即双引号内的任何内容时，`\`需要 a 来声明您希望引号出现在引号内，而不是结束引号。这有意义吗？

例如，您可以编写`String message = "She said \"Hello\" the other day."`，以便反斜杠表示引号实际上并未结束整个字符串，而是作为字符串的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T12:40:37.517

```
String s1=s.replace("\"", "\\\""); 
```

它将全部替换`"`为`\"`.

# asp.net-mvc - 在当前视图中刷新/重新加载 PartialView

> ID：10850349
> 
> 赞同：0
> 
> 时间：2012-06-01T12:33:47.280
> 
> 标签：asp.net-mvc, asp.net-mvc-3, c#-4.0, razor, partial-views

我有一个 PartialView 是一个图像上传，基本上我显示一些图像，然后显示正常的上传按钮：-

```
@model MvcCommons.ViewModels.ImageModel

<table>
    @if (Model != null)
    {
        foreach (var item in Model)
        {
            <tr>
                <td>
                    <img src= "@Url.Content("/Uploads/" + item.FileName)" />
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Description)
                </td>
            </tr>    
        }
    }

</table>

@using (Html.BeginForm("Save", "File", FormMethod.Post, new { enctype = "multipart/form-data" })) {
    <input type="file" name="file" />
    <input type="submit" value="submit" /> <br />
    <input type="text" name="description" /> 
} 
```

现在我的想法是在不同的页面中有这个。我已经在 1 页中尝试过并且工作正常，但是当我上传图片时，

```
public ActionResult ImageUpload()
{
    ImageModel model = new ImageModel();
    model.Populate();
    return View(model);
} 
```

我想回到“以前的”视图，即托管此部分视图的视图？当我`return View(model)`像上面那样做时，我会进入`ImageUpload`我不想看到的局部视图。

感谢您的帮助和时间。

**********更新****** ** *** ** *** **** 我暂时选择了简单的路线，并硬编码了实际的视图名称**

 **```
public ActionResult ImageUpload()
{
    ImageModel model = new ImageModel(); 
    model.Populate(); 
    return View("~/Views/Project/Create.cshtml", model); 
} 
```

但是我遇到了一个错误：-

传入字典的模型项是 type `MvcCommons.ViewModels.ImageModel`，但是这个字典需要一个 type 的模型项`MvcCommons.Models.Project`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:38:30.420

使用带有所需视图名称的字符串的重载。

[http://msdn.microsoft.com/en-us/library/dd460310](http://msdn.microsoft.com/en-us/library/dd460310)

```
protected internal ViewResult View(
        string viewName,
        Object model
) 
```

IE

```
return View("ViewName", model); 
```

如果你在不同的页面中有这个，那么你可以通过动作参数注入上下文；

```
public ActionResult ImageUpload(string parentViewName)
{
    ImageModel model = new ImageModel();
    model.Populate();
    return View(parentViewName, model);
} 
```

注意：您应该只需要传递视图名称而不是路径：

```
return View("Create", model); 
```**

# java - logback.xml 的 perf4j 设置

> ID：10850352
> 
> 赞同：2
> 
> 时间：2012-06-01T12:33:56.773
> 
> 标签：java, performance, unit-testing, testing, perf4j

大家好，我想知道 logback.xml 与 perf4j 一起使用时的确切配置设置。我在 logback.xml 中创建了这个配置

```
<configuration>
    <!-- Perf4J appenders -->
    <!--
       This AsyncCoalescingStatisticsAppender groups StopWatch log messages
       into GroupedTimingStatistics messages which it sends on the
       file appender defined below
    -->
    <appender name="CoalescingStatistics" class="org.perf4j.logback.AsyncCoalescingStatisticsAppender">
        <param name="TimeSlice" value="60000"/>
        <appender-ref ref="graphExecutionTimes"/>
        <appender-ref ref="graphExecutionTPS"/>
        <!-- We add the JMX Appender reference onto the CoalescingStatistics -->
        <appender-ref ref="perf4jJmxAppender"/>
    </appender>

    <appender name="graphExecutionTimes" class="org.perf4j.logback.GraphingStatisticsAppender">
        <!-- Possible GraphTypes are Mean, Min, Max, StdDev, Count and TPS -->
        <param name="GraphType" value="Mean"/>
        <!-- The tags of the timed execution blocks to graph are specified here -->
        <param name="TagNamesToGraph" value="DESTROY_TICKET_GRANTING_TICKET,GRANT_SERVICE_TICKET,GRANT_PROXY_GRANTING_TICKET,VALIDATE_SERVICE_TICKET,CREATE_TICKET_GRANTING_TICKET" />
    </appender>

    <appender name="graphExecutionTPS" class="org.perf4j.logback.GraphingStatisticsAppender">
        <param name="GraphType" value="TPS" />
        <param name="TagNamesToGraph" value="DESTROY_TICKET_GRANTING_TICKET,GRANT_SERVICE_TICKET,GRANT_PROXY_GRANTING_TICKET,VALIDATE_SERVICE_TICKET,CREATE_TICKET_GRANTING_TICKET" />
    </appender>

    <!--
      This JMX appender creates an MBean and publishes it to the platform MBean server by
      default.
    -->
    <appender name="perf4jJmxAppender" class="org.perf4j.logback.JmxAttributeStatisticsAppender">
        <!--
          You must specify the tag names whose statistics should be exposed as
          MBean attributes.
        -->
        <TagNamesToExpose>firstBlock,secondBlock</TagNamesToExpose>
        <!--
          The NotificationThresholds param configures the sending of JMX notifications
          when statistic values exceed specified thresholds. This config states that
          the firstBlock max value should be between 0 and 800ms, and the secondBlock max
          value should be less than 1500 ms. You can also set thresholds on the Min,
          Mean, StdDev, Count and TPS statistics - e.g. firstBlockMean(<600).

        <NotificationThresholds>firstBlockMax(0-800),secondBlockMax(<1500)</NotificationThresholds>-->
        <!--
          You can also specify an optional MBeanName param, which overrides
          the default MBean name of org.perf4j:type=StatisticsExposingMBean,name=Perf4J
        -->
    </appender>

    <!-- Loggers -->
    <!--
      The Perf4J logger. Note that org.perf4j.TimingLogger is the value of the
      org.perf4j.StopWatch.DEFAULT_LOGGER_NAME constant. Also, note that
      additivity is set to false, which is usually what is desired - this means
      that timing statements will only be sent to this logger and NOT to
      upstream loggers.
    -->
    <logger name="org.perf4j.TimingLogger" additivity="false">
        <level value="INFO"/>
        <appender-ref ref="CoalescingStatistics"/>
        <appender-ref ref="perf4jFileAppender"/>
    </logger>

    <!-- This file appender is used to output aggregated performance statistics -->
    <appender name="perf4jFileAppender" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <File>logs/perf4j.log</File>
        <encoder>
            <Pattern>%date %-5level [%thread] %logger{36} [%file:%line] %msg%n</Pattern>
        </encoder>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <FileNamePattern>logs/perf4j.%d{yyyy-MM-dd}.log</FileNamePattern>
        </rollingPolicy>
    </appender>
</configuration> 
```

我从 perf4j logback 文档中得到它。因此，当我尝试使用此 logback conf 时，它没有出现任何异常，但它会打印出一些奇怪的语句，如下所示

```
18:26:19,945 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.groovy]
18:26:19,945 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.xml]
18:26:19,945 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Found resource [logback.xml] at [file:/home/ifkaar/Backup/eclipse/workspace/Perf4jTestProject/bin/logback.xml]
18:26:20,245 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - debug attribute not set
18:26:20,263 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [org.perf4j.logback.AsyncCoalescingStatisticsAppender]
18:26:20,308 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [CoalescingStatistics]
18:26:20,462 |-ERROR in ch.qos.logback.core.joran.action.AppenderRefAction - Could not find an appender named [graphExecutionTimes]. Did you define it below in the config file?
18:26:20,462 |-ERROR in ch.qos.logback.core.joran.action.AppenderRefAction - See http://logback.qos.ch/codes.html#appender_order for more details.
18:26:20,462 |-ERROR in ch.qos.logback.core.joran.action.AppenderRefAction - Could not find an appender named [graphExecutionTPS]. Did you define it below in the config file?
18:26:20,462 |-ERROR in ch.qos.logback.core.joran.action.AppenderRefAction - See http://logback.qos.ch/codes.html#appender_order for more details.
18:26:20,462 |-ERROR in ch.qos.logback.core.joran.action.AppenderRefAction - Could not find an appender named [perf4jJmxAppender]. Did you define it below in the config file?
18:26:20,462 |-ERROR in ch.qos.logback.core.joran.action.AppenderRefAction - See http://logback.qos.ch/codes.html#appender_order for more details.
18:26:20,471 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [org.perf4j.logback.GraphingStatisticsAppender]
18:26:20,506 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [graphExecutionTimes]
18:26:20,535 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [org.perf4j.logback.GraphingStatisticsAppender]
18:26:20,535 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [graphExecutionTPS]
18:26:20,538 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [org.perf4j.logback.JmxAttributeStatisticsAppender]
18:26:20,554 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [perf4jJmxAppender]
18:26:20,913 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting additivity of logger [org.perf4j.TimingLogger] to false
18:26:20,914 |-INFO in ch.qos.logback.classic.joran.action.LevelAction - org.perf4j.TimingLogger level set to INFO
18:26:20,914 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [CoalescingStatistics] to Logger[org.perf4j.TimingLogger]
18:26:20,914 |-ERROR in ch.qos.logback.core.joran.action.AppenderRefAction - Could not find an appender named [perf4jFileAppender]. Did you define it below in the config file?
18:26:20,914 |-ERROR in ch.qos.logback.core.joran.action.AppenderRefAction - See http://logback.qos.ch/codes.html#appender_order for more details.
18:26:20,914 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.rolling.RollingFileAppender]
18:26:20,930 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [perf4jFileAppender]
18:26:20,962 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
18:26:21,136 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - No compression will be used
18:26:21,141 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - Will use the pattern logs/perf4j.%d{yyyy-MM-dd}.log for the active file
18:26:21,151 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - The date pattern is 'yyyy-MM-dd' from file name pattern 'logs/perf4j.%d{yyyy-MM-dd}.log'.
18:26:21,151 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - Roll-over at midnight.
18:26:21,158 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - Setting initial period to Thu May 31 18:26:21 PKT 2012
18:26:21,161 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[perf4jFileAppender] - Active log file name: logs/perf4j.log
18:26:21,161 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[perf4jFileAppender] - File property is set to [logs/perf4j.log]

enter code here 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T12:39:17.407

错误消息非常具有描述性：

> 18:26:20,462 |-ch.qos.logback.core.joran.action.AppenderRefAction 中的错误 - 找不到名为 [ **graphExecutionTimes** ] 的附加程序。**您是否在配置文件中定义了它？**
> 
> [...]
> 
> 18:26:20,506 |-ch.qos.logback.core.joran.action.AppenderAction 中的信息 - 将附加程序命名为 [ **graphExecutionTimes** ]

错误消息明确询问您：*您是否在配置文件中定义了下面的 [graphExecutionTimes] 附加程序？*而事实上，情况就是如此，如上图所示。只需切换这些声明：

```
<appender name="graphExecutionTimes" class="org.perf4j.logback.GraphingStatisticsAppender">
    <!-- Possible GraphTypes are Mean, Min, Max, StdDev, Count and TPS -->
    <param name="GraphType" value="Mean"/>
    <!-- The tags of the timed execution blocks to graph are specified here -->
    <param name="TagNamesToGraph" value="DESTROY_TICKET_GRANTING_TICKET,GRANT_SERVICE_TICKET,GRANT_PROXY_GRANTING_TICKET,VALIDATE_SERVICE_TICKET,CREATE_TICKET_GRANTING_TICKET" />
</appender>

<appender name="graphExecutionTPS" class="org.perf4j.logback.GraphingStatisticsAppender">
    <param name="GraphType" value="TPS" />
    <param name="TagNamesToGraph" value="DESTROY_TICKET_GRANTING_TICKET,GRANT_SERVICE_TICKET,GRANT_PROXY_GRANTING_TICKET,VALIDATE_SERVICE_TICKET,CREATE_TICKET_GRANTING_TICKET" />
</appender>

<appender name="CoalescingStatistics" class="org.perf4j.logback.AsyncCoalescingStatisticsAppender">
    <param name="TimeSlice" value="60000"/>
    <appender-ref ref="graphExecutionTimes"/>
    <appender-ref ref="graphExecutionTPS"/>
    <!-- We add the JMX Appender reference onto the CoalescingStatistics -->
    <appender-ref ref="perf4jJmxAppender"/>
</appender> 
```

以防万一`perf4jFileAppender`也移动到顶部。如果此代码片段来自 Perf4J 文档，您应该要求作者修复它。

# excel - Excel：在 x 轴上拉伸图形

> ID：10850362
> 
> 赞同：0
> 
> 时间：2012-06-01T12:34:32.013
> 
> 标签：excel, charts

在我的图表中，x 轴是文本值。当我制作图表时，我无法将其拉伸到整个宽度。相反，它只需要不到一半的宽度。

我通常通过单击“格式轴”来执行此操作，但在这种情况下它不提供。

这是屏幕截图：

![ss](../Images/c6183452fe4d5f8f8d91f05eedd8bc4f.png)

我正在使用 Excel for Mac。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T01:20:26.473

当您制作图表时，您是否在实际包含数据的范围下方选择了一堆空行？看起来空数据是有值数据的两倍。

如果您选择绘图区域或图表区域，您可以在工作表中高亮显示图表的源数据。您可以使用鼠标调整突出显示的范围以修改图表中的数据量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:50:41.973

他们为 windows 和 mac 制作了不同的类型吗？我正在使用 Windows，缩放在这里从来不是问题。

我不能给你任何答案，但我可以给你一个建议。您可以检查“公共 SLA 模板数量”标签下方数字的宽度吗？它占据了窗口的所有宽度。

# c# - asp.net AutoPostBack 和更新

> ID：10850367
> 
> 赞同：0
> 
> 时间：2012-06-01T12:34:40.430
> 
> 标签：c#, asp.net, drop-down-menu

例如，当下拉列表更改时，有没有办法启用自动回发而不刷新页面（因此滚动回顶部）？我有一些下拉列表，后续下拉列表中的值需要根据上面选择的内容进行更改。最好的方法是什么？每个 DDL 都是从数据库中填充的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:38:57.887

使用更新面板来完成此操作。[此处](http://msdn.microsoft.com/en-us/library/bb386454.aspx)提供了完整的概述您将需要回发的项目添加到面板，并且仅回发页面的那部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T12:41:01.340

您可以很容易地在回发之间保持滚动位置

[http://msdn.microsoft.com/en-us/library/system.web.ui.page.maintainscrollpositiononpostback.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.page.maintainscrollpositiononpostback.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T12:38:45.450

您可以将所有 ddl 放入 updatepanel 中，然后页面不会自行回发。您的 ddl 可以重新绑定而无需整页回发。另一种选择是使用级联下拉菜单，在 asp.net ajax 工具包示例中有一个示例。它使用 web 服务进行数据绑定。这种方法比使用 updatapanels 更好，但实现起来有点困难。 [http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/CascadingDropDown/CascadingDropDown.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/CascadingDropDown/CascadingDropDown.aspx)，查看这个例子。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T12:44:10.290

我们[Jquery AJAX](http://api.jquery.com/jQuery.ajax/) OR 只需使用 ASP.net [UpdatePanel](http://www.asp.net/web-forms/tutorials/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers)控件

# c++ - c++：使用 SQLite 创建数据库以进行插入和更新

> ID：10850375
> 
> 赞同：12
> 
> 时间：2012-06-01T12:35:06.623
> 
> 标签：c++, eclipse, database-design, sqlite

我正在尝试使用 sqlite3 lib 在 c++ 中创建一个数据库。我收到错误**sqlite3_prepare_v2' is
not declared in this scope** as shown in logcat。

日志文件

```
..\src\Test.cpp: In function 'int main(int, const char**)':
..\src\Test.cpp:21:85: error: 'sqlite3_prepare_v2' was not declared in this scope
..\src\Test.cpp:30:13: error: variable 'sqlite3 in' has initializer but incomplete type
..\src\Test.cpp:30:30: error: invalid use of incomplete type 'sqlite3 {aka struct sqlite3}'
..\src\/sqlite3.h:73:16: error: forward declaration of 'sqlite3 {aka struct sqlite3}' 
```

这是我的代码

```
#include <iostream>
using namespace std;
 #include "sqlite3.h"

 int main (int argc, const char * argv[]) {

sqlite3 *db;
sqlite3_open("test.db", & db);

   string createQuery = "CREATE TABLE IF NOT EXISTS items (busid INTEGER PRIMARY KEY, ipaddr TEXT,    time TEXT NOT NULL DEFAULT (NOW()));";
   sqlite3_stmt *createStmt;
  cout << "Creating Table Statement" << endl;
  sqlite3_prepare_v2(db, createQuery.c_str(), createQuery.size(), &createStmt, NULL);
   cout << "Stepping Table Statement" << endl;
   if (sqlite3_step(createStmt) != SQLITE_DONE) cout << "Didn't Create Table!" << endl;

   string insertQuery = "INSERT INTO items (time, ipaddr) VALUES ('test', '192.168.1.1');"; // WORKS!

   sqlite3_stmt *insertStmt;
   cout << "Creating Insert Statement" << endl;
   sqlite3_prepare(db, insertQuery.c_str(), insertQuery.size(), &insertStmt, NULL);
   cout << "Stepping Insert Statement" << endl;
   if (sqlite3_step(insertStmt) != SQLITE_DONE) cout << "Didn't Insert Item!" << endl;

cout << "Success!" << endl;

 return 0;
} 
```

请帮帮我。谢谢.....

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-01T19:22:33.373

```
 #include <sqlite3.h> 
```

应该包含 sqlite3_prepare_v2 和 struct sqlite3。确保包含正确的 sqlite3.h 文件。

同样在 sqlite3_prepare_v2 中，第三个参数可以（并且应该在您的情况下）-1，因此将 sql 读取到第一个空终止符。

使用 sqlite 3.7.11 处理裸机示例：

```
#include <sqlite3.h>
int test()
{
    sqlite3* pDb = NULL;
    sqlite3_stmt* query = NULL;
    int ret = 0;
    do // avoid nested if's
    {
        // initialize engine
        if (SQLITE_OK != (ret = sqlite3_initialize()))
        {
            printf("Failed to initialize library: %d\n", ret);
            break;
        }
        // open connection to a DB
        if (SQLITE_OK != (ret = sqlite3_open_v2("test.db", &pDb, SQLITE_OPEN_READWRITE | SQLITE_OPEN_CREATE, NULL)))
        {
            printf("Failed to open conn: %d\n", ret);
            break;
        }
        // prepare the statement
        if (SQLITE_OK != (ret = sqlite3_prepare_v2(pDb, "SELECT 2012", -1, &query, NULL)))
        {
            printf("Failed to prepare insert: %d, %s\n", ret, sqlite3_errmsg(pDb));
            break;
        }
        // step to 1st row of data
        if (SQLITE_ROW != (ret = sqlite3_step(query))) // see documentation, this can return more values as success
        {
            printf("Failed to step: %d, %s\n", ret, sqlite3_errmsg(pDb));
            break;
        }
        // ... and print the value of column 0 (expect 2012 here)
        printf("Value from sqlite: %s", sqlite3_column_text(query, 0));     

    } while (false);
    // cleanup
    if (NULL != query) sqlite3_finalize(query);
    if (NULL != pDb) sqlite3_close(pDb);
    sqlite3_shutdown();
    return ret;
} 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-12T12:33:07.440

**伙计们，在 c/c++ 中使用 sqlite3 创建数据库，这里我使用以下步骤...**

```
1) Firstly you include MinGw file .
2) Add header file sqlite3.h, sqlite3.c in your src folder.
3) Add libr folder , in libr here include these file

    mysqlite.h, shell.c, sqlite3.c, sqlite3.h, sqlite3ext.h 
```

然后开始你的编码......

```
 #include <iostream>
 using namespace std;
 #include "sqlite3.h"

 int main (int argc, const char * argv[]) {

    sqlite3 *db;
    sqlite3_open("test1.db", & db);

  string createQuery = "CREATE TABLE IF NOT EXISTS items (userid INTEGER PRIMARY KEY, ipaddr
      TEXT,username TEXT,useradd TEXT,userphone INTEGER,age INTEGER, "
                                                    "time TEXT NOT NULL DEFAULT 
                                                                             (NOW()));";
    sqlite3_stmt *createStmt;
    cout << "Creating Table Statement" << endl;
    sqlite3_prepare(db, createQuery.c_str(), createQuery.size(), &createStmt, NULL);
    cout << "Stepping Table Statement" << endl;
    if (sqlite3_step(createStmt) != SQLITE_DONE) cout << "Didn't Create Table!" << endl;

    string insertQuery = "INSERT INTO items (time, ipaddr,username,useradd,userphone,age) 
        VALUES ('7:30', '192.187.27.55','vivekanand','kolkatta','04456823948',74);"; // WORKS!
    sqlite3_stmt *insertStmt;
    cout << "Creating Insert Statement" << endl;
    sqlite3_prepare(db, insertQuery.c_str(), insertQuery.size(), &insertStmt, NULL);
    cout << "Stepping Insert Statement" << endl;
    if (sqlite3_step(insertStmt) != SQLITE_DONE) cout << "Didn't Insert Item!" << endl;  

         return 0;
     } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T12:39:48.603

通过[这个](http://www.sqlite.org/capi3ref.html)链接。我不确定。它可能会帮助你。

我认为他们在 sqlite3.h lib 中没有 sqlite3_prepare_v2，所以试试这个.. **sqlite3_prepare_v2 可以替换为 sqlite3_prepare，但需要更加小心，因为它会稍微改变后续调用的语义。**

# android - 没有显示上下文菜单时如何停止将长单击作为短单击处理

> ID：10850376
> 
> 赞同：1
> 
> 时间：2012-06-01T12:35:06.567
> 
> 标签：android, listview, contextmenu

我有一个已为上下文菜单注册的列表视图。对于列表中的某些项目，上下文菜单不适用。在这些情况下，我只是不在 onCreateContextMenu 方法中扩充菜单。

不幸的是，这意味着当长按不显示上下文菜单的项目时，Android 会将其处理为短按（可能是因为上下文菜单通常会返回 true 以表示长按事件已被处理）。

这会导致列表视图中的行为不一致 - 当您长按某些项目时，它们会显示上下文菜单 - 其他项目则不会，然后执行默认的单击行为。如何确保即使不显示上下文菜单的项目也会使用长按，以便不调用 onItemClick 方法？

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {

  AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo) menuInfo;
  Playable playable = (Playable) info.targetView.getTag(R.id.playable);
  if (playable != null && !(playable instanceof AutoRadioStation) && !(playable.getId().equals(Playlist.AUTOMATIC_PLAYLIST))) {
    v.setTag(R.id.playable, playable); // This copies the tag so that it is contained within the view used for the menu.
    Drawable stationImage = (Drawable) ((ImageView) info.targetView.findViewById(R.id.artwork)).getDrawable().getConstantState().newDrawable();

    menu.setHeaderTitle(playable.getName());
    menu.setHeaderIcon(stationImage);
    MenuInflater inflater = getActivity().getMenuInflater();
    inflater.inflate(R.menu.saved_context_menu, menu);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:19:52.663

我有一个类似的问题，我最终使用 a[`Dialog`](http://developer.android.com/guide/topics/ui/dialogs.html)而不是上下文菜单。

我的活动实现了，如果满足条件[`OnItemLongClickListener`](http://developer.android.com/reference/android/widget/AdapterView.OnItemLongClickListener.html)，我会显示它 。`onLongItemClick()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T08:45:02.223

我终于开始实施 NathanZ 解决方案的一个版本。似乎没有太多关于将 contextMenu 转换为 DialogFragment 的内容，因此我将在此处粘贴大部分解决方案。

实现 onLongItemClick 侦听器还意味着我能够拥有一个不需要列表视图中的菜单的长按事件。不幸的是，因为您不能将菜单传递给对话框，所以我不得不重用现有的 ListViewElement 类型来存储列表视图中每个“菜单”项的 id 和文本字符串。

```
 @Override
  public boolean onItemLongClick(AdapterView<?> parent, View view, int item, long position) {

    Playable playable = (Playable) view.getTag(R.id.playable);
    //Switch haptic feedback off by default so if we don't handle the long click we don't vibrate
    parent.setHapticFeedbackEnabled(false);

    if (playable == null) {
      // This must be a message bar so the only option is to update all saved content
      updateAll();
      parent.setHapticFeedbackEnabled(true);
    } else {
      if (!(playable instanceof AutoRadioStation) && !(playable.getId().equals(Playlist.AUTOMATIC_PLAYLIST))) {
        Drawable drawable = (Drawable) ((ImageView) view.findViewById(R.id.artwork)).getDrawable().getConstantState().newDrawable();
        showContextDialog(playable, drawable);
        parent.setHapticFeedbackEnabled(true);
      }
    }
    return true;
  }
  private void showContextDialog(Playable playable, Drawable drawable) {
    FragmentManager fm = getActivity().getSupportFragmentManager();
    final List<ListViewElement> array = new ArrayList<ListViewElement>();
    array.add(new ListViewElement(R.id.menu_share, null, getString(R.string.share), true));
    array.add(new ListViewElement(R.id.menu_delete, null, getString(R.string.delete), true));
    ContextMenuDialog dialog = new ContextMenuDialog(drawable, playable.getName(), array, playable);
    dialog.setOnItemClickListener(this);
    dialog.show(fm, "Context Menu");
  }

  //Callback from the ContextMenuDialog class
  @Override
  public void onItemClickDialogFragment(int option, Playable playable) {
    switch (option) {
      case R.id.menu_delete :
        // Perform delete actions
        break;
      case R.id.menu_share :
        // Perform share actions
        break;
    }
  }

public class ContextMenuDialog extends DialogFragment implements OnItemClickListener {

  private Drawable drawableIcon;
  private String title;
  private List<ListViewElement> values;
  private Playable playable;
  private DialogFragmentOnItemClickListener listener;

  public interface DialogFragmentOnItemClickListener {
    void onItemClickDialogFragment(int option, Playable playable);
  }

  public void setOnItemClickListener(DialogFragmentOnItemClickListener listener) {
    this.listener = listener;
  }

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //Create the dialog without a title since the layout includes a customized title
    setStyle(DialogFragment.STYLE_NO_TITLE, R.style.MyDialogStyle);
  }

  public ContextMenuDialog(Drawable drawableIcon, String title, List<ListViewElement> values, Playable playable) {
    this.drawableIcon = drawableIcon;
    this.title = title;
    this.values = values;
    this.playable = playable;
  }

  public ContextMenuDialog(int drawableResource, String title, List<ListViewElement> values, Playable playable) {
    this.drawableIcon = getResources().getDrawable(drawableResource);
    this.title = title;
    this.values = values;
    this.playable = playable;
  }

  @Override
  public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.context_menu, container, true);
    TextView titleView = (TextView) view.findViewById(R.id.context_menu_title);
    titleView.setText(title);
    ImageView icon = (ImageView) view.findViewById(R.id.context_menu_artwork);
    icon.setImageDrawable(drawableIcon);

    ListView listView = (ListView) view.findViewById(R.id.context_menu_listview);
    ContextMenuAdapter adapter = new ContextMenuAdapter(getActivity(), R.layout.context_menu_list_item, values);
    listView.setAdapter(adapter);
    listView.setOnItemClickListener(this);
    return view;
 } 
```

# c++ - 如何防止控制台窗口超出屏幕？

> ID：10850377
> 
> 赞同：1
> 
> 时间：2012-06-01T12:35:07.613
> 
> 标签：c++, windows, winapi, console

如果控制台应用程序启动并且系统为它创建控制台窗口，但有时这个窗口是在这样的坐标中创建的，它的一些内容会滑出右屏幕边缘。然后用户必须使用鼠标来显示一切。

如何应对？哪些函数用于检测控制台窗口的右上角坐标？然后我将能够检查它是否在屏幕之外并将窗口移动到所需的距离。

什么功能用于移动窗口？或者也许有一种解决方案可以防止窗口移动到屏幕外？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T08:03:14.213

这是一个完全多显示器感知和任务栏感知的实现，可以按照您的描述进行操作。

```
#include <Windows.h>

int main()
{
  ClampConsoleToScreen();
  return 0;
}

void ClampConsoleToScreen()
{
  HWND window = GetConsoleWindow();
  RECT windowRect;
  GetWindowRect(window, &windowRect);
  HMONITOR monitor = MonitorFromWindow(window, MONITOR_DEFAULTTOPRIMARY);
  MONITORINFO mi;
  memset(&mi, 0, sizeof(mi));
  mi.cbSize = sizeof(mi);
  GetMonitorInfo(monitor, &mi);

  int adj, any;

  adj = 0;
  any = 0;
  if (windowRect.right > mi.rcWork.right)
  {
    // Get negative adjustment value to move it left onto screen
    adj = mi.rcWork.right - windowRect.right;
  }
  if (windowRect.left < mi.rcWork.left)
  {
    // Get positive adjustment value to move it right onto screen
    adj = mi.rcWork.left - windowRect.left;
  }
  windowRect.left += adj;
  windowRect.right += adj;
  any |= adj;

  adj = 0;
  if (windowRect.bottom > mi.rcWork.bottom)
  {
    // Get negative adjustment value to move it up onto screen
    adj = mi.rcWork.bottom - windowRect.bottom;
  }
  if (windowRect.top < mi.rcWork.top)
  {
    // Get positive adjustment value to move it down onto screen
    adj = mi.rcWork.top - windowRect.top;
  }
  windowRect.top += adj;
  windowRect.bottom += adj;
  any |= adj;

  if (any)
  {
    MoveWindow(window,
      windowRect.left,
      windowRect.top,
      windowRect.right - windowRect.left,
      windowRect.bottom - windowRect.top, TRUE);
  }
} 
```

# javascript - JS 替换功能未按预期工作

> ID：10850378
> 
> 赞同：0
> 
> 时间：2012-06-01T12:35:09.087
> 
> 标签：javascript, jquery

我有一个后端 CGI 脚本，如果通过 AJAX 调用出现问题，它会在文本下方返回我：

```
<p>A problem occurred in a Python script.
<p> /bin/cgi-bin/LOGS/tmpslM4pu.txt contains the description of this error. 
```

我试图显示如下：

```
$.ajax({
            type: "POST",
            url:  "runcgi.py",
            data:
            {
               'my_data' : 'test'
            },
            success: function(html)
            {
              if(..test for success..)
              {
              }
              else
              {
                            var StrippedString = $(html).toString().replace(/(<([^>]+)>)/ig,"");                                                                                           var StrippedString = $(html).toString().replace(/(<([^>]+)>)/ig,"");
                            $("p").html(StrippedString);

              }
}); 
```

下面是我的 HTML 代码：

```
<body>
        <p></p>
</body> 
```

但我在浏览器中看到以下输出：

```
[object Object] 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T12:38:26.880

您正在获取由 形成的 jQuery 对象`html`并将其转换为字符串。结果是`[object OBJECTTYPE]`，在这种情况下是`[object Object]`。

相反，只需尝试`var StrippedString = html.replace(...);`.

# ruby-on-rails - 路线上的正则表达式

> ID：10850381
> 
> 赞同：1
> 
> 时间：2012-06-01T12:35:21.500
> 
> 标签：ruby-on-rails, regex, routing

我有这样的路线

```
 namespace :api, defaults: {format: 'json'} do
    namespace :v1 do
      match 'recepcao/produto' => 'recepcoes#produto'
      match 'recepcao/nota'    => 'recepcoes#nota'
      match 'recepcao/venda'   => 'recepcoes#venda'
      match 'recepcao/cliente' => 'recepcoes#cliente'
      match 'recepcao/status' => 'recepcoes#status'
    end
  end 
```

我想我会有更多的动作，我不想继续添加`match`我的路线
有没有办法做类似的事情

```
 namespace :api, defaults: {format: 'json'} do
    namespace :v1 do
      match 'recepcao/*' => 'recepcoes#*'
    end
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T12:38:31.490

当然，像默认路由一样放一个占位符：

```
# match ':controller(/:action(/:id(.:format)))' 
```

不需要正则表达式。请参阅 Rails 路由文档的[Dynamic Segments 部分](http://guides.rubyonrails.org/routing.html#dynamic-segments)。

# mysql - 在 mysql id 和时间戳列中设置默认值？

> ID：10850382
> 
> 赞同：0
> 
> 时间：2012-06-01T12:35:24.290
> 
> 标签：mysql

我想将mysql表中的id设置为默认值，比如'000001'或'TodaysDate后跟000001'..同样也应该是auto_incremented。我们应该怎么做？

以及如何在 TIMESTAMP 列中设置默认值，而不是使用“2012-04-01”等“CURRENT_TIMESTAMP”，以及当更新触发器触发时，它应该使用今天的日期进行更新。

这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:49:17.507

看起来您回答了自己的问题：特别是您想要一个“插入/更新之前”触发器来为您设置值。

> CREATE TRIGGER my_autoinc BEFORE INSERT ON test1
> FOR EACH BEGIN
> INSERT INTO test1 SET NEW.id_column = concat(today(), <some value>);
> 结尾;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:50:15.883

*   我想将我在 mysql 表中的 id 设置为默认值，比如“000001”。

If I were you I will leave it like id int, auto increment and when make the select I'll use the lpad function:

```
mysql> select lpad('1',6,'0');
+-----------------+
| lpad('1',6,'0') |
+-----------------+
| 000001          |
+-----------------+
1 row in set (0.00 sec) 
```

关于时间戳我会让其他人回答，因为我的想法是做同样的事情，使用 current_timestamp 并使用 mysql 函数转换为你想要的方式：

```
mysql> select left(now(),10);
+----------------+
| left(now(),10) |
+----------------+
| 2012-06-01     |
+----------------+
1 row in set (0.00 sec)' 
```

**编辑：**

```
mysql> select concat(replace(left(now(),10),'-',''),lpad('1',6,'0'));
+--------------------------------------------------------+
| concat(replace(left(now(),10),'-',''),lpad('1',6,'0')) |
+--------------------------------------------------------+
| 20120601000001                                         |
+--------------------------------------------------------+
1 row in set (0.00 sec) 
```

# android - 在android中的实时提要上叠加图像

> ID：10850384
> 
> 赞同：3
> 
> 时间：2012-06-01T12:35:33.020
> 
> 标签：android, android-layout, image-processing, overlay

我想在 android 的实时提要上叠加图像。谁能建议从哪里开始？我已将所需的网址转换为图像。下面是代码：

ImageView imgView = (ImageView) findViewById(R.id.ImageView01); Drawable drawable = LoadImageFromWebOperations("https://www.google.com.pk/logos/classicplus.png"); imgView.setImageDrawable(drawable);

```
private Drawable LoadImageFromWebOperations(String url) {
    try {
        InputStream is = (InputStream) new URL(url).getContent();
        Drawable d = Drawable.createFromStream(is, "src name");
        return d;
    } catch (Exception e) {
        System.out.println("Exc=" + e);
        return null;
    } 
```

现在，我想要的是如何将此图像叠加到视频中的所需区域，即手部检测区域。问题是这个感兴趣的区域可以移动，因为它是一个实时提要......我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:19:13.200

我通过叠加两个视图（下面称为预览和叠加）来做到这一点。一个负责相机预览，另一个控制画布以绘制我想要的任何东西。

在`res/layout/main.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    >
  <FrameLayout
      android:id="@+id/toplevelframe"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      >
    <your.project.Preview
    android:id="@+id/preview"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    />
    <your.project.Overlay
    android:id="@+id/overlay"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    />
  </FrameLayout>
</LinearLayout> 
```

在您的活动课程中，`onCreate()`：

```
...
setContentView(R.layout.main);
mPreview = (Preview) findViewById(R.id.preview);
mOverlay = (Overlay) findViewById(R.id.overlay);
... 
```

在`onResume()`：

```
...
mCamera = Camera.open();
mPreview.setCamera(mCamera);
... 
```

在`onPause()`：

```
if (mCamera != null) {
    mPreview.setCamera(null);
    mCamera.release();
    mCamera = null;
} 
```

类`Overlay`扩展 View 并在画布上绘图。没有什么特别的，只是覆盖`onDraw()`。

对于相机预览类（`Preview`如下），请查看[官方指南](http://developer.android.com/guide/topics/media/camera.html#camera-preview)以获取示例。它看起来像这样：

```
class Preview extends ViewGroup implements SurfaceHolder.Callback {
...
  private SurfaceView mSurfaceView;
  private SurfaceHolder mHolder;
  private Camera mCamera;
...
  public Preview(Context context, AttributeSet aset) {
      ...
      mSurfaceView = new SurfaceView(context);
      addView(mSurfaceView);
      // Install a SurfaceHolder.Callback so we get notified when the
      // underlying surface is created and destroyed.
      mHolder = mSurfaceView.getHolder();
      mHolder.addCallback(this);
      mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
  }
...
  public void setCamera(Camera camera) {
      mCamera = camera;
      if (mCamera != null) {
          mSupportedPreviewSizes = mCamera.getParameters().getSupportedPreviewSizes();
          requestLayout();
      }
   }
...
} 
```

然后也实现[SurfaceHolder.Callback](http://developer.android.com/reference/android/view/SurfaceHolder.Callback.html)的所有方法。

# php - PHP Post请求不起作用

> ID：10850389
> 
> 赞同：0
> 
> 时间：2012-06-01T12:35:45.070
> 
> 标签：php, post

我有一个最奇怪的问题。我使用 Ajax 请求将数据发送到 php 页面，该页面将详细信息保存在 db 中以供进一步使用。

每个之后的评论`echo`是我得到的输出。

```
$name = $_POST['name'];
$surname = $_POST['surname'];
$message = $_POST['description'];
//$date = $_POST['date'];
$type = $_POST['request_type'];

echo file_get_contents("php://input"); // name=John&surname=Doe&description=Testing&request_type=note

date_default_timezone_set("Africa/Johannesburg");
$time = strtotime("now");

echo "NAME & SURNAME: " . $name . ' ' . $surname; // NAME & SURNAME: 
```

谁能告诉我为什么它在我`echo file_get_contents("php://input");`而不是其他任何地方输出正确的东西？

我不知所措。这没有任何意义……

编辑 1：响应 JBTRND。

为了确保我做出正确的调用，这里是 AJAX 请求：

```
$.ajax({
    type:'POST',
    url:"local_code/form_accepted.php",
    data:serialized,
    success:function(response){
        $('#request_type').attr('disabled');
        $('#dialog').html(response);
        $('#docSumbit').html(response);
    }
}); 
```

`serialized`是`$('#support').serialize();`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:38:36.240

也许您通过 $_GET 传递它们？

# visual-c++ - wxWidgets 最小应用程序出错

> ID：10850390
> 
> 赞同：1
> 
> 时间：2012-06-01T12:35:59.720
> 
> 标签：visual-c++, wxwidgets

我最近开始学习 wxWidgets。和所有学习者一样，我首先编写并测试了 Minimal App（在我的 Ubuntu 12.04 LTS 上）。它就像一个魅力。

然后我决定在我的 Windows 7 PC 上测试该应用程序。[我按照此处](http://www.rhyous.com/2009/12/16/how-to-compile-a-wxwidgets-application-in-visual-studio-2008/)的说明使用 Visual C++ 2008 Express 构建了 wxWidgets（调试和发布版本）。我还按照相同的说明构建了最小应用程序（构建和发布配置）。该应用程序在我的电脑上运行良好。为了检查是否有任何问题，我将可执行文件发送给了我的一个朋友。他在他的 XP PC 上对其进行了测试，它给了他以下错误：

*应用程序无法启动，因为它的并排配置不正确。有关详细信息，请参阅应用程序事件日志。*

我已经检查了我在应用程序的调试和发布版本的构建选项中使用了多线程设置。但是，生成的可执行文件都不能在我朋友的机器上运行。

我在这里错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:17:29.513

您缺少 C/C++ 运行时库。

最简单的解决方案是使用 /MT 开关而不是 Project | 中的 /MD 开关来构建 wxwidgets 库和应用程序。属性 | C++ | 代码生成 | 运行时库

# proxy - 开源 SPDY 代理

> ID：10850394
> 
> 赞同：5
> 
> 时间：2012-06-01T12:36:08.183
> 
> 标签：proxy, spdy

有没有人开发过开源 SPDY 代理？

我无法通过 Google 找到一个，但我相信 Amazon Silk 浏览器使用了一个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T14:06:34.310

I wrote SPDY reverse proxy called [shrpx](http://spdylay.sourceforge.net/package_README.html#shrpx-a-reverse-proxy-for-spdy-https) in C/C++. It also serves as SSL/SPDY proxy with squid as backend server.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-19T09:21:30.387

SPDY 代理已在 jetty 中实现：

[https://groups.google.com/forum/?fromgroups#!topic/spdy-dev/and5OLY4AsI](https://groups.google.com/forum/?fromgroups#!topic/spdy-dev/and5OLY4AsI)

我们已经完成了可以在这里找到的基本文档：http: [//www.eclipse.org/jetty/documentation/current/spdy-configuring-proxy.html](http://www.eclipse.org/jetty/documentation/current/spdy-configuring-proxy.html)

例如，代理现在还能够接收 SPDY 并向上游服务器发送纯 HTTP 以终止前端服务器上的 SPDY。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T13:10:09.780

[Jetty SPDY](http://wiki.eclipse.org/Jetty/Feature/SPDY)不直接提供 SPDY 代理，但提供了构建代理所需的 SPDY 客户端和 SPDY 服务器功能 - 在 Java 中。

我们可能会在下一个将来开发 SPDY 代理。

# nant - 从 NAnt 中的另一个目录检索目录的相对路径

> ID：10850398
> 
> 赞同：1
> 
> 时间：2012-06-01T12:36:23.353
> 
> 标签：nant, relative-path

我有一个[NAnt](http://nant.sourceforge.net/)任务创建 MSBuild 文件的副本。副本位于其原始目录之外的其他目录中。

源文件应保留在原处。因此，我使用 NAnt 的`<style>`任务在 MSBuild 文件上运行 XSLT。它`<Compile/>`用子树替换元素`<Compile><Link/></Compile>`（为了便于阅读，省略了属性）。

我遇到了以下问题：在生成的 MSBuild 文件`Include`中，元素的属性`Compile`应该从 MSBuild 文件的新位置接收到源文件的相对路径。由于原始 MSBuild 文件包含文件的相对路径，因此我真正要查找的是从新 MSBuild 文件位置到原始 MSBuild 文件位置的相对路径。

我知道如何使用但我想避免的解决方法：

*   自定义 NAnt 任务
*   使用子字符串删除目录路径的相互前缀（NAnt 基本目录）

有没有更好的方法；可能是一个 NAnt 函数或一个巧妙的方法来结合使用几个 NAnt 函数来实现这一点？

# c# - 将 Windows 窗体嵌入到 WPF 应用程序中

> ID：10850404
> 
> 赞同：14
> 
> 时间：2012-06-01T12:36:48.697
> 
> 标签：c#, wpf, winforms

我有一个旧的 windows 窗体应用程序，我不想将它转换为 wpf，我想将它嵌入到我的 wpf 应用程序主窗口中。我怎样才能做到这一点 ？。

另外，如何使用 WindowsFormHost 在 wpf 和嵌入式 WinForm 之间传输文本？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-01T12:39:47.470

您需要使用[WindowsFormsHost](http://msdn.microsoft.com/en-us/library/system.windows.forms.integration.windowsformshost.aspx)。查看[本](http://www.simple-talk.com/dotnet/.net-framework/mixing-wpf-and-winforms/)教程（展示如何在 WinForms 中执行 WPF，反之亦然）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T12:40:30.600

您可以使用`WindowsFormsHost`将单个表单添加到 WPF 应用程序中。如果这足以满足您的目的，请查看此[演练](http://msdn.microsoft.com/en-us/library/ms751761.aspx)。

# php - Doctrine2 复杂的多对多搜索查询

> ID：10850405
> 
> 赞同：1
> 
> 时间：2012-06-01T12:36:49.120
> 
> 标签：php, symfony, doctrine-orm, many-to-many, dql

我正在创建一个应用程序，该应用程序具有一个与其他对象具有多个多对多关系的实体。让我布置实体：

*   入口=主要对象
*   Region = 通过“_entry_region”引用表与条目具有多对多
*   Type = 通过“_entry_type”引用表与条目具有多对多
*   Tag = 通过“_entry_tag”引用表与条目具有多对多

现在在前端，用户可以为需要加载的条目设置一些过滤器。在人类语言中，查询需要是这样的。

```
Get the entries WHERE  region is (1 or 2 or 3) AND type is ( 3 or 4 or 5 ) AND tag is ( 4 OR 6 or 1) 
```

我目前正在努力使用这段代码：

```
$query = $this->em->createQuery('SELECT m.id FROM Entity\Entry e WHERE :region_id MEMBER OF e.regions);
$query->setParameter('region_id',  1);      
$ids = $query->getResult(); 
```

这给了我相应区域的条目的 ID。但不可能在 setParameter() 中添加区域 ID 的数组。我也无法在文档中找到如何在多个相关实体上执行此操作，例如基于人类的查询：

```
Get the entries WHERE  region is (1 or 2 or 3) AND type is ( 3 or 4 or 5 ) AND tag is ( 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T14:02:25.823

您还可以考虑查看 D2 查询生成器。稍微冗长一些，但是一旦你掌握了语法，构建更复杂的查询就会容易得多。

就像是：

```
 $qb = $this->em->createQueryBuilder();

    $qb->addSelect('entry');
    $qb->addSelect('region');
    $qb->addSelect('type');
    $qb->addSelect('tag');

    $qb->from('MyBundle:Entry',   'entry');
    $qb->leftJoin('entry.regions','region');
    $qb->leftJoin('entry.types',  'type');
    $qb->leftJoin('entry.tags',   'tag');

    $qb->andWhere($qb->expr()->in('region.id',$regions));
    $qb->andWhere($qb->expr()->in('type.id',  $types));
    $qb->andWhere($qb->expr()->in('tag.id',   $tags)); 
```

# debugging - 在 Visual Studio 2012 中调试 XAML 数据绑定

> ID：10850409
> 
> 赞同：10
> 
> 时间：2012-06-01T12:37:02.900
> 
> 标签：debugging, xaml, data-binding, visual-studio-2012

在 Silverlight 5 beta[中，我可以直接在 XAML 中调试数据绑定](http://www.kunal-chowdhury.com/2011/04/debugging-data-bindings-in-xaml-with.html)。Visual Studio 2012 (RC) 中的此功能在哪里？我可以使用 WPF、WinRT 和/或 Silverlight 执行此操作吗？如果有怎么办？当我在绑定表达式应用程序上设置断点时，我收到一条消息，即不会命中断点，因为没有源代码与此行关联。

**更新：**

它适用于 Silverlight 5 应用程序的 Visual Studio 2012 (RC)，但不适用于 WPF 应用程序。请不要告诉我，WPF 不存在此功能！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-05T15:34:04.203

很抱歉告诉您，但WPF XAML 中**不**存在此功能，WinRT XAML 中也不存在此功能。我找不到 WPF 的官方来源，但这是 WinRT 的官方来源（[http://social.msdn.microsoft.com/Forums/en-US/toolsforwinapps/thread/fae53937-cb47-45da-b740 -49f75f8d36e9/](http://social.msdn.microsoft.com/Forums/en-US/toolsforwinapps/thread/fae53937-cb47-45da-b740-49f75f8d36e9/)）他非常强烈地暗示，这完全是由 Silverlight 团队带头的一项努力，并且可能会出现在 WPF 和 WinRT 的未来版本中。

到目前为止，我见过的最好的调试技术如下：

**1) WinRT & WPF: 输出窗口** 使用启用了正确选项的输出窗口，确保 Tools->Options->Debugging->Output Window->Data Binding = "Warning" 或其他有用的东西...

![在此处输入图像描述](../Images/7165acc0b0c01ab2cce23c45bbf466ad.png)

**2) WinRT & WPF: Use a converter** 使用转换器并在转换器内部设置一个断点。或者您可以构建/使用类似于 WinRT XAML 工具包的方式：[http ://winrtxamltoolkit.codeplex.com/.../WinRTXamlToolkit.Debugging/Converters/BindingDebugConverter.cs](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/9c814f6c67c540adbd6952821a351d9ffa4d1d99#WinRTXamlToolkit.Debugging/Converters/BindingDebugConverter.cs)

**3）WinRT：使用`DebugSettings.BindingFailed`**

```
App.Current.DebugSettings.IsBindingTracingEnabled = true;
App.Current.DebugSettings.BindingFailed += (s, e) =>
{
    // debug the failed binding here
}; 
```

有关详细信息，请参阅：http: [//msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.debugsettings.bindingfailed](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.debugsettings.bindingfailed)

**4) WPF：使用`PresentationTraceSources.TraceLevel`附加属性** 为您提供绑定的详细输出，请参阅：http: [//msdn.microsoft.com/en-us/library/system.diagnostics.presentationtracesources.tracelevel.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.presentationtracesources.tracelevel.aspx)了解更多信息。

我意识到这是一个较老的问题，但我找不到所有 XAML 的良好信息来源，在搜索引擎上找到了这个答案，并注意到它仍然缺乏答案。从技术上讲，有 3 个版本的 XAML 使用相同的名称并没有帮助。所以这是我在调查调试绑定时发现的所有内容的转储。享受，希望它可以帮助某人...... -ck

# android - 如何为 Android Activity 设计出色的设计

> ID：10850410
> 
> 赞同：0
> 
> 时间：2012-06-01T12:37:03.883
> 
> 标签：android, android-layout

**我想要做什么**

目前我正在为我的活动创建一个设计，其中有不同类型的“盒子”。这些“盒子”中的每一个都有不同的信息。我在一张纸上手工创建了设计，但我不会在我的 .xml 中记下这个想法！！

**问题**

在这篇文章的底部，您会找到一个复制的“框”，我想为我的应用创建它。请帮助我实现这一点，因为我真的不知道如何在我的 XML 中做到这一点！我正在使用 Android 4.0 (ICS)。

![盒子的设计](../Images/f29fa7373fdfe190d6a35fe9c6bfb644.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:42:27.813

我给你伪布局：

```
<RelativeLayout>
    <TextView
        full width
        id:infobox/>
    <Button
        layoutParentRight
        below infobox/>
    <TextView
        layout_below infobox
        toLeftOf button/>
    // repeat the textView above and always below the previous one
</RelativeLayout> 
```

使用线性布局：

```
<LinearLayout>
    <TextView infobox/>
    <LinearLayout>
        <LinearLayout>
            <TextView />
            <TextView />
            <TextView />
        </LinearLayout>
        <Button/>
    </LinearLayout>
</LinearLayout> 
```

如您所见，它更加复杂和臃肿。因为我总是对水平/垂直方向感到困惑，所以我把这个留给你去找出:) 只是试验一下，如果你不能让它工作，用你尝试过的布局更新你的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T12:51:34.143

像这样的东西应该工作：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/layout"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical" >

  <TextView
    android:id="@+id/box_title"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Box Title" />

  <LinearLayout
    android:id="@+id/box_content"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <LinearLayout
        android:id="@+id/box_content"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/box_content_1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Hans Max" />

        <TextView
            android:id="@+id/box_content_2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Maxiburger 12" />

        <TextView
            android:id="@+id/box_content_3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="8002, Muster" />
      </LinearLayout>

      <ImageButton
        android:id="@+id/box_button"
        android:layout_weight="5"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />
  </LinearLayout>

</LinearLayout> 
```

# c# - EntityDataSource 创建 where 子句

> ID：10850412
> 
> 赞同：0
> 
> 时间：2012-06-01T12:37:08.167
> 
> 标签：c#, entity-framework

有了这个类：

```
class User
{
int UserId{get;set;}
string UserName{get;set;}
}

class Role
{
int RoleId{get;set;}
string RoleName{get;set;}
}

class User_Role
{
int UserId{get;set;}
int RoleId{get;set;}
} 
```

我需要在一个 ListBox 中显示可用的角色，在另一个 ListBox 中显示用户已经拥有且不能重复的角色。我在后面的代码中做到了这一点：

```
//Initialize the ObjectContext
MyDbContext ctx = new MyDbContext();
int userId; //some value pass by url;
var listRolesIds = (ctx.Roles.Select(r => r.RoleId )).ToList();
var listRolesIdsAsigned = ctx.User_Role.Where(u => u.UserId == userId).Select(u => new {u.UserId}).ToList();

var listRolesIdsAvailables = listRoles.Except(listRolesAsigned);

//once i have the ids, code for Bind the ListBox with the availables roles 
```

它可以工作，但很难维护，我喜欢用 EntityDataSource 来制作它，但我不知道该怎么做。如果有人可以帮助我，我将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T16:42:06.600

使用 EntityDataSource，您可以使用 .Where 属性来指定过滤器。请注意，过滤器位于 ESql 中（有关 ESql 的更多详细信息：http: [//msdn.microsoft.com/en-us/library/bb399560](http://msdn.microsoft.com/en-us/library/bb399560)）。EntityDataSource 与 ObjectContext 一起工作，而不是与 DbContext 一起工作。您可以使用以下方法为您的 DbContext 获取 ObjectContext 实例：

```
var objectContext = ((IObjectContextAdapter)myDbContext).ObjectContext; 
```

要将您自己的对象上下文提供给 EntityDataSource 控件，您需要处理 OnContextCreating 事件并将您从 DbContext 实例获取的上下文分配给 EntityDataSourceContextCreatingEventArgs.Context 属性。以下是详细信息：

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.entitydatasource.contextcreating](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.entitydatasource.contextcreating)

以下是如何在 EntityDataSourceControl 中使用 .Where 的示例：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.entitydatasource.where.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.entitydatasource.where.aspx) 和另一个关于一般过滤的示例： [http://msdn.microsoft.com/en-us/library/cc488531](http://msdn.microsoft.com/en-us/library/cc488531)

# c - 非托管结构作为托管的返回值

> ID：10850414
> 
> 赞同：3
> 
> 时间：2012-06-01T12:37:22.567
> 
> 标签：c, visual-c++, struct, c++-cli, wrapper

我有一个非托管的第三方库 (C)。我正在尝试用 C++/CLI 编写一个包装器，所以我可以使用 C# 中的库。我有几个 C 示例，但我不知道如何桥接非托管堆和托管堆。

库中的一个函数返回一个结构，我需要将其保存在我的托管包装器中。然后将该结构用作其他函数的参数。

工作 C 示例：

图书馆.h

```
typedef struct FOO_BAR_STRUCT* FOO_BAR;
DLLEXPORT FOO_BAR FooBarCreate(); 
```

Example.c

```
#include <library.h>

int main(int argc, char* argv[]) {
char* address = "127.0.0.1"; 
FOO_BAR fb = NULL;

fb = FooBarCreate();

FooBarRegister(fb, address);
} 
```

因此，在我的 Wrapper 中，我尝试重新创建示例的功能。我已经发现问题是结构在哪个堆上，但我无法弄清楚如何解决这个问题。

我的 C++ 代码，编译为 C++/CLI .dll 用于我的 C# 项目。

FooBarComm.h

```
#include <library.h>

ref class FooBarComm
{
public:
    FooBarComm(char* address);
    ~FooBarComm();

private:
    FOO_BAR fb;
}; 
```

FooBarComm.cpp

```
#include "FooBarComm.h"

FooBarComm::FooBarComm(char* address)
{
    fb = FooBarCreate();
    FooBarRegister(fb, address);
}

FooBarComm::~FooBarComm()
{
} 
```

这失败了。如何将 FOO_BAR 结构的实例从非托管代码中获取到托管类中，然后在以后的函数中将其用作参数。

编辑：

> 我失败并出现警告 LNK4248：未解析的 typeref 令牌（0100000D）
> 错误 LNK2028：未解析的令牌（0A00000A）“extern “C”结构 FOO_BAR_STRUCT
> 错误 LNK2019：未解析的外部符号“extern “C”结构 FOO_BAR_STRUCT

我想问题是我在库附带的任何头文件中都没有 FOO_BAR_STRUCT 的定义。我开始不喜欢这个图书馆了。

创建一个包含对结构的引用的非托管类，然后从托管类引用这个非托管类是否明智？

如果我更改为“普通”C++ 类，我会得到不同的编译错误：

FooBarComm.h

```
#include <library.h>

#pragma unmanaged    
class FooBarComm {
... 
```

我得到编译错误：

> 错误 LNK2019：引用了未解析的外部符号 _FooBarCreate

编辑2：

当然，它是 .lib 文件的缺失链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:55:00.160

这看起来非常像由于 3rd 方库的 .lib 文件遗漏而导致的链接器错误。我希望如果您将其添加到链接选项中，那么您的问题将得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:04:09.737

考虑使用显式转换为 byte[] 数组。通过这种方式，您可以明确指定结构的位置。

在 C 中，您有：

```
extern "C" void FooBarCreate(FooBar* Data);

extern "C" void FooBarUse(FooBar* Data) 
```

在 C# 中，您编写：

```
 [DllImport("SomeFile.dll")]
    public static extern void FooBarCreate_DLL([In,Out] byte[] BufForFOOBAR);

    [DllImport("SomeFile.dll")]
    public static extern void FooBarUSE_DLL([In,Out] byte[] BufForFOOBAR);

            /// Call DLL with managed struct
    public static Int32 FooBarUse_Managed(ManagedFooBar Value)
    {
        byte[] ValueBuffer = StructureToByteArray(Value);

        return FooBarUse_DLL(ValueBuffer);
    }

            /// Get value from native DLL to managed struct
    public static void FooBarCreate_Managed(ref ManagedFooBar Value)
    {
        byte[] ValueBuffer = new byte[Marshal.SizeOf(Value)];

        FooBarCreate_DLL(ValueBuffer);

        object TmpObj = new ManagedFooBar();

        ByteArrayToStructure(ValueBuffer, ref TmpObj);

        Value = (ManagedFooBar)TmpObj;
    } 
```

本机函数由 C# 直接调用。

StructToByteArray 和 ByteArrayToStruct 函数就在这里：

```
using System.Runtime.InteropServices;
using System.Runtime.Serialization;

    public static byte[] StructureToByteArray(object obj)
    {
        int len = Marshal.SizeOf(obj);

        byte[] arr = new byte[len];

        IntPtr ptr = Marshal.AllocHGlobal(len);

        Marshal.StructureToPtr(obj, ptr, true);

        Marshal.Copy(ptr, arr, 0, len);

        Marshal.FreeHGlobal(ptr);

        return arr;
    }

    public static void ByteArrayToStructure(byte[] bytearray, ref object obj)
    {
        int len = Marshal.SizeOf(obj);

        IntPtr i = Marshal.AllocHGlobal(len);

        Marshal.Copy(bytearray, 0, i, len);

        obj = Marshal.PtrToStructure(i, obj.GetType());

        Marshal.FreeHGlobal(i);
    } 
```

最后一件事，FooBarManaged（在 C# 中）：

```
[Serializable]
    /// Sequential - make sure C does uses the same struct member alignment
[StructLayout(LayoutKind.Sequential, Pack=1)]
public struct FooBarManaged
{
    // Ususal POD field
    public Int32 ExpID;

    // Constant-sized string
    [MarshalAs(UnmanagedType.ByValArray, SizeConst=128)]
    public byte[] FileName;
} 
```

这段代码没什么好说的。我为这种编组使用了一个简单的自动生成器，以使用本机 sqlite3 后端作为数据存储。因此需要在 C 之间编组大量结构。

# dom - Sencha Touch轮播优化

> ID：10850416
> 
> 赞同：1
> 
> 时间：2012-06-01T12:37:32.850
> 
> 标签：dom, optimization, sencha-touch

我正在尝试优化 Carousel 组件，并且我想在 DOM 中只有一个活动项目。只需在carousel的cardswitch事件中移除/添加组件即可轻松实现。但问题是我的组件在渲染之前从服务器加载了一些 ajax 信息，这需要时间，所以在每个 cardswitch 上重新渲染它们很慢。

是否有任何技术可以缓存创建的组件但同时不将它们添加到 DOM 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T05:48:41.400

实际上，没有办法将项目保留在 DOM 之外然后将它们放回原处，所以我找到的唯一解决方案是在激活时重新创建项目。这实际上是 Sencha 建议的方式。

另一种有趣的技术是在 ST2 中实现的 Sencha。如果 carousel 有 100000 个项目，它实际上只在 DOM 事件中保留 3 个项目。检查 Chrome 中的 html。还没有仔细看过这个，但它很酷，性能很棒。

# android - 在 Android 上以编程方式使用 Instagram

> ID：10850427
> 
> 赞同：2
> 
> 时间：2012-06-01T12:38:03.773
> 
> 标签：android, social-networking

有什么方法可以在 Android 中以编程方式在 Instagram 上发布？我想在 Instagram 上发布照片和状态文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:41:58.490

如果 Instagram 允许他们的 android 应用程序通过意图接收来自其他应用程序的请求，那么可以。您需要查看 Instagram 文档。我快速浏览了一下，我可以看到一些 iphone 挂钩，但对于 Android 却没有，但请仔细检查，因为我可能错过了它。

交替使用他们的 API。

# javascript - Nivo 滑块过渡

> ID：10850435
> 
> 赞同：4
> 
> 时间：2012-06-01T12:38:35.283
> 
> 标签：javascript, magento, nivo-slider

我在主页上的 Magento 主题中添加了 nivo 滑块，目前它正在显示大量随机效果。

我只希望它显示一种效果，所有幻灯片将从右侧滑入，出现在屏幕上 3 秒钟，然后向左滑出，新的幻灯片以连续方式从右侧滑入。

我对javascript不是很好，所以我希望有人可以帮助我解决这个问题，nivo [javascript在pastebin中](http://pastebin.com/EwHq0wcr)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T07:00:49.110

它为我工作。让它尝试添加`data-transition`效果名称`slideInRight`或`slideInLeft`

```
<div id="slider" class="nivoSlider" width="480" >
     <img src="slider/1.jpg" alt="" data-transition="slideInLeft" />
     <img src="slider/4.jpg" alt="" data-transition="slideInRight" />
</div> 
```

也可以在JS中试试

```
$(window).load(function() {
     $('#slider').nivoSlider({effect:'slideInRight'});    
}); 
```

根据[这个答案](https://stackoverflow.com/questions/6436159/how-to-change-nivo-slider-easing#6436445)：

您可以从以下效果中进行选择：

*   切下
*   切下左
*   切片
*   左上切片
*   切片向上
*   sliceUpDownLeft
*   折叠
*   褪色
*   随机的
*   向右滑动
*   向左滑动
*   盒子随机
*   盒子雨
*   boxRainReverse
*   盒子雨成长
*   boxRainGrowReverse

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T12:51:29.390

您应该**使用 slideInRight**效果，nivo 的 .js 文件没有任何改变。就用这个

`$('#slider').nivoSlider({effect:'slideInRight'});`

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T07:40:25.777

您可以编辑 jquery.nivo.slider.js 文件，如果您在记事本中打开此文件并转到第 348 行，您应该会看到以下代码：-

```
// Generate random effect
        if(settings.effect === 'random'){
            anims = new Array('sliceDownRight','sliceDownLeft','sliceUpRight','sliceUpLeft','sliceUpDown','sliceUpDownLeft','fold','fade',
            'boxRandom','boxRain','boxRainReverse','boxRainGrow','boxRainGrowReverse');
            currentEffect = anims[Math.floor(Math.random()*(anims.length + 1))];
            if(currentEffect === undefined) { currentEffect = 'fade'; }
        } 
```

在代码中更改以下行，（确保删除此行中说明的所有其他效果）

动画 = 新数组 (' **slideInRight** ');

也是最后一行

if(currentEffect === undefined) {currentEffect = ' **slideInRight** '}

现在你应该有一个单一的过渡效果。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-04-15T09:58:06.513

在**webpart.cs**文件中

```
img.addAtribute("data-transition","slideInRight"); 
```

# c++ - 使用 OpenCV 在同一窗口中显示多个图像

> ID：10850436
> 
> 赞同：3
> 
> 时间：2012-06-01T12:38:36.280
> 
> 标签：c++, c, opencv, flycapture

我有三个可以通过硬件自动同步的火线摄像机，我正在尝试捕获帧，将它们保存到我的硬盘中并在窗口中显示它们。

一切正常，但目前，**我只能同时在三个不同的窗口中显示框架**。

**我想在单个窗口中显示框架，**但我不知道该怎么做。在此[链接](http://opencv.willowgarage.com/wiki/DisplayManyImages)上有 cvShowManyImages() 函数，但您必须同时传递三帧，但我有一个 for() 循环，可以一次考虑一帧。

这是我正在使用的代码：

```
 for ( int j = 0; j < k_numImages; j++ )
    {
        // Display the timestamps for all cameras to show that the image
        // capture is synchronized for each image
        for ( unsigned int i = 0; i < numCameras; i++ )
        {
            Image image;
            error = ppCameras[i]->RetrieveBuffer( &image );
            if (error != PGRERROR_OK)
            {
                PrintError( error );
                return -1;
            }
            IplImage* destImage = ConvertImageToOpenCV(&image);
            char titolo[50];
            sprintf(titolo, "titolo%d", i);
            cvShowImage(titolo, destImage);
            waitKey(1);
        }
   } 
```

它工作得很好，但**我想在同一个窗口中显示所有相机帧时为每个相机创建一个不同的窗口**。

你能帮我吗？

**编辑：这是 ConvertImageToOpenCV() 函数。**

```
IplImage* ConvertImageToOpenCV(Image* pImage)
{
    IplImage* cvImage = NULL;
    bool bColor = true;
    CvSize mySize;
    mySize.height = pImage->GetRows();
    mySize.width = pImage->GetCols();

    switch ( pImage->GetPixelFormat() )
    {
        case PIXEL_FORMAT_MONO8:     cvImage = cvCreateImageHeader(mySize, 8, 1 );
                                     cvImage->depth = IPL_DEPTH_8U;
                                     cvImage->nChannels = 1;
                                     bColor = false;
                                     break;
        case PIXEL_FORMAT_411YUV8:   cvImage = cvCreateImageHeader(mySize, 8, 3 );
                                     cvImage->depth = IPL_DEPTH_8U;
                                     cvImage->nChannels = 3;
                                     break;
        case PIXEL_FORMAT_422YUV8:   cvImage = cvCreateImageHeader(mySize, 8, 3 );
                                     cvImage->depth = IPL_DEPTH_8U;
                                     cvImage->nChannels = 3;
                                     break;
        case PIXEL_FORMAT_444YUV8:   cvImage = cvCreateImageHeader(mySize, 8, 3 );
                                     cvImage->depth = IPL_DEPTH_8U;
                                     cvImage->nChannels = 3;
                                     break;
        case PIXEL_FORMAT_RGB8:      cvImage = cvCreateImageHeader(mySize, 8, 3 );
                                     cvImage->depth = IPL_DEPTH_8U;
                                     cvImage->nChannels = 3;
                                     break;
        case PIXEL_FORMAT_MONO16:    cvImage = cvCreateImageHeader(mySize, 16, 1 );
                                     cvImage->depth = IPL_DEPTH_16U;
                                     cvImage->nChannels = 1;
                                     bColor = false;
                                     break;
        case PIXEL_FORMAT_RGB16:     cvImage = cvCreateImageHeader(mySize, 16, 3 );
                                     cvImage->depth = IPL_DEPTH_16U;
                                     cvImage->nChannels = 3;
                                     break;
        case PIXEL_FORMAT_S_MONO16:  cvImage = cvCreateImageHeader(mySize, 16, 1 );
                                     cvImage->depth = IPL_DEPTH_16U;
                                     cvImage->nChannels = 1;
                                     bColor = false;
                                     break;
        case PIXEL_FORMAT_S_RGB16:   cvImage = cvCreateImageHeader(mySize, 16, 3 );
                                     cvImage->depth = IPL_DEPTH_16U;
                                     cvImage->nChannels = 3;
                                     break;
        case PIXEL_FORMAT_RAW8:      cvImage = cvCreateImageHeader(mySize, 8, 3 );
                                     cvImage->depth = IPL_DEPTH_8U;
                                     cvImage->nChannels = 3;
                                     break;
        case PIXEL_FORMAT_RAW16:     cvImage = cvCreateImageHeader(mySize, 8, 3 );
                                     cvImage->depth = IPL_DEPTH_8U;
                                     cvImage->nChannels = 3;
                                     break;
        case PIXEL_FORMAT_MONO12:    printf("Not supported by OpenCV");
                                     bColor = false;
                                     break;
        case PIXEL_FORMAT_RAW12:     printf("Not supported by OpenCV");
                                     break;
        case PIXEL_FORMAT_BGR:       cvImage = cvCreateImageHeader(mySize, 8, 3 );
                                     cvImage->depth = IPL_DEPTH_8U;
                                     cvImage->nChannels = 3;
                                     break;
        case PIXEL_FORMAT_BGRU:      cvImage = cvCreateImageHeader(mySize, 8, 4 );
                                     cvImage->depth = IPL_DEPTH_8U;
                                     cvImage->nChannels = 4;
                                     break;
        case PIXEL_FORMAT_RGBU:      cvImage = cvCreateImageHeader(mySize, 8, 4 );
                                     cvImage->depth = IPL_DEPTH_8U;
                                     cvImage->nChannels = 4;
                                     break;
        default: printf("Some error occured...\n");
                 return NULL;
    }

    if(bColor) {
        if(!bInitialized)
        {
            colorImage.SetData(new unsigned char[pImage->GetCols() * pImage->GetRows()*3], pImage->GetCols() * pImage->GetRows()*3);
            bInitialized = true;
        }

        pImage->Convert(PIXEL_FORMAT_BGR, &colorImage); //needs to be as BGR to be saved

        cvImage->width = colorImage.GetCols();
        cvImage->height = colorImage.GetRows();
        cvImage->widthStep = colorImage.GetStride();

        cvImage->origin = 0; //interleaved color channels

        cvImage->imageDataOrigin = (char*)colorImage.GetData(); //DataOrigin and Data same pointer, no ROI
        cvImage->imageData         = (char*)(colorImage.GetData());
        cvImage->widthStep      = colorImage.GetStride();
        cvImage->nSize = sizeof (IplImage);
        cvImage->imageSize = cvImage->height * cvImage->widthStep;
    }
    else
    {
        cvImage->imageDataOrigin = (char*)(pImage->GetData());
        cvImage->imageData         = (char*)(pImage->GetData());
        cvImage->widthStep         = pImage->GetStride();
        cvImage->nSize             = sizeof (IplImage);
        cvImage->imageSize         = cvImage->height * cvImage->widthStep;

        //at this point cvImage contains a valid IplImage
     }
    return cvImage;
} 
```

![在此处输入图像描述](../Images/3799bfac70cc0843c1301aa1070ae9a1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:50:12.363

由于显而易见的原因，我无法测试下面的代码，但它说明了一种方法：

```
for ( int j = 0; j < k_numImages; j++ )
{
    // Display the timestamps for all cameras to show that the image
    // capture is synchronized for each image

    IplImage* destImage[3]; // A-ha moment

    for ( unsigned int i = 0; i < numCameras; i++ )
    {
        Image image;
        error = ppCameras[i]->RetrieveBuffer( &image );
        if (error != PGRERROR_OK)
        {
            PrintError( error );
            return -1;
        }

        /* Since ConvertImageToOpenCV() doesn't copy the image data,
         * we need to do that ourselves, because when this loop is done Image 
         * is destroyed and the data is lost.
         */
        IplImage* tmp = ConvertImageToOpenCV(&image);
        destImage[i] = cvCreateImage(cvGetSize(tmp), tmp->depth, tmp->nChannels);
        cvCopy(tmp, destImage[i], NULL); 

        char titolo[50];
        sprintf(titolo, "titolo%d", i);
    }

    cvShowManyImages("all", 3, destImage[0], destImage[1], destImage[2]);
    waitKey(0);

    // when you finish using them, release the allocated resources to prevent memory leaks
    cvReleaseImage(&destImage[0]);
    cvReleaseImage(&destImage[1]);
    cvReleaseImage(&destImage[2]);                 
} 
```

这个想法是创建一个数组`IplImage*`来存储相机检索到的图像，因此在循环之后您可以访问所有这 3 个图像并能够在单个窗口上显示它们。

**编辑：**

总结一下私人聊天，问题在于`cvShowManyImages()`拍摄彩色（3通道）图像，而他的相机正在返回灰度（单通道）图像。解决方案是简单地改变`cvShowManyImages()`, 从：

```
DispImage = cvCreateImage( cvSize(100 + size*w, 60 + size*h), 8, 3 ); 
```

到：

```
DispImage = cvCreateImage( cvSize(100 + size*w, 60 + size*h), 8, 1 ); 
```

# jquery - 格式化文本框以显示日期“dd M yy”

> ID：10850442
> 
> 赞同：1
> 
> 时间：2012-06-01T12:39:08.167
> 
> 标签：jquery, jquery-validate, datepicker, date-format

我有一个带有数据库日期的文本框，日期格式如下：

> 2012/06/12 12:00:00 AM

这就是它们在文本框中显示的内容。

我希望他们显示“dd M yy”

> 2012 年 6 月 6 日

如何格式化文本框以显示这样的日期。

我可以使用以下代码以这种格式显示今天的日期：

```
 $('.DatePicker').datepicker({       
            dateFormat: "dd M yy"
        });
$('.DatePicker').datepicker('setDate', new Date()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T12:51:43.907

这个问题已经问过了。这里有很多合理的答案：

[在哪里可以找到有关在 JavaScript 中格式化日期的文档？](https://stackoverflow.com/questions/1056728/formatting-a-date-in-javascript)

我的建议是你使用 DateJS。它将允许您使用您正在寻找的 toString('dd M yy') 格式。

[http://www.DateJS.com](http://www.DateJS.com)

# c# - ConcurrentBag 中是否存在内存泄漏 执行？

> ID：10850443
> 
> 赞同：14
> 
> 时间：2012-06-01T12:39:10.810
> 
> 标签：c#, .net, task-parallel-library, base-class-library

> **可能重复：**
> [ConcurrentBag 中可能存在内存泄漏？](https://stackoverflow.com/questions/5353164/possible-memoryleak-in-concurrentbag)

编辑1：

实际的问题是。你能确认一下，还是我的样本错了，我遗漏了一些明显的东西？

我认为 ConcurrentBag 只是无序列表的替代品。但是我错了。ConcurrentBag 确实将自身作为 ThreadLocal 添加到创建线程，这基本上会导致内存泄漏。

```
 class Program
    {
        static void Main(string[] args)
        {
            var start = GC.GetTotalMemory(true);
            new Program().Start(args);
            Console.WriteLine("Diff: {0:N0} bytes", GC.GetTotalMemory(true) - start);
            GC.Collect();
            GC.WaitForPendingFinalizers();
            GC.Collect();
            Thread.Sleep(5000);
        }

        private void Start(string[] args)
        {
            for (int i = 0; i < 1000; i++)
            { 
                var bag = new ConcurrentBag<byte>();
                bag.Add(1);
                byte by;
                while (bag.TryTake(out by)) ;
            }
        } 
```

我可以根据我添加到包中的数据量来制作 250 KB 或 100 GB 的差异。数据和包都消失了。

当我用 Windbg 闯入这个并且我做一个 !DumpHeap 类型并发

……

```
000007ff00046858        1           24 System.Threading.ThreadLocal`1+GenericHolder`3[[System.Collections.Concurrent.ConcurrentBag`1+ThreadLocalList[[System.Byte, mscorlib]], System],[System.Threading.ThreadLocal`1+C0[[System.Collections.Concurrent.ConcurrentBag`1+ThreadLocalList[[System.Byte, mscorlib]], System]], mscorlib],[System.Threading.ThreadLocal`1+C0[[System.Collections.Concurrent.ConcurrentBag`1+ThreadLocalList[[System.Byte, mscorlib]], System]], mscorlib],[System.Threading.ThreadLocal`1+C0[[System.Collections.Concurrent.ConcurrentBag`1+ThreadLocalList[[System.Byte, mscorlib]], System]], mscorlib]]
000007feed812648        2           64 System.Collections.Concurrent.ConcurrentStack`1[[System.Int32, mscorlib]]
000007feece41528        1          112 System.Collections.Concurrent.CDSCollectionETWBCLProvider
000007ff000469e0     1000        32000 System.Threading.ThreadLocal`1+Boxed[[System.Collections.Concurrent.ConcurrentBag`1+ThreadLocalList[[System.Byte, mscorlib]], System]]
000007feed815900     1000        32000 System.Collections.Concurrent.ConcurrentStack`1+Node[[System.Int32, mscorlib]]
000007ff00045530     1000        72000 System.Collections.Concurrent.ConcurrentBag`1+ThreadLocalList[[System.Byte, mscorlib]] 
```

当我创建一个空的 ConcurrentBag 让一些工作线程向它添加数据时，ConcurrentBag 并且只要创建线程仍然存在，它的数据就会在那里。

这样我得到了几 GB 的内存泄漏。我确实通过使用列表和锁来“修复”这个问题。ConcurrentBag 可能很快，但作为具有相同对象生命周期的 List 的简单替换是没有用的。

如果我在主线程上创建了一个 ConcurrentBag，只要线程还活着，我就会保留它。这不是我所期望的，它可能会导致严重的痛苦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T12:58:38.563

你说得对，ConcurrentBag 创建了一个 ThreadLocal 副本，实际上它们针对同一个线程正在读取数据并将数据写入包的场景进行了优化：“...... ConcurrentBag 是一个线程安全的包实现，针对相同的场景进行了优化线程将同时生产和消费存储在包中的数据。”

另一方面，我在这里没有看到奇怪的行为；线程存在，并发包存在。当线程完成 GC 将完成它的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T13:04:48.660

从文档

> ConcurrentBag 是一个线程安全的包实现，针对同一线程将同时生产和使用包中存储的数据的场景进行了优化。

以及[何时使用线程安全集合](http://msdn.microsoft.com/en-us/library/dd997373)

> 在混合的生产者-消费者场景中，对于大型和小型工作负载，ConcurrentBag 通常比任何其他并发收集类型更快且更具可扩展性。

我想说您对 ConcurrentBag 的假设是不正确的。首先，它不会将其自身添加到 ThreadLocal，它使用线程本地存储为访问它的每个线程提供单独的内部列表。它不仅仅是一个线程安全的无序列表。

一旦您意识到包使用 TLS，您认为内存泄漏实际上是预期的行为 - 只要线程在使用中，就不需要清除数据。

说了这么多，我自己直到现在才意识到 ConcurrentBag 的额外功能。

我在“[什么是 ConcurrentBag](http://www.emadomara.com/2011/08/what-is-concurrentbag.html) ”中找到了关于 ConcurrentBag 如何使用单独列表及其方法在不同场景中的成本的很好描述。我真希望这个描述出现在 MSDN 文档中。

就个人而言，我将开始更多地使用 ConcurrentBag，因为我知道它的特殊行为。

**更新：**

刚刚检查了 Ayende 的[这篇文章](http://ayende.com/blog/156097/the-high-cost-of-concurrentbag-in-net-4-0?key=742a9bdb-d633-4779-8a43-a5393c97c75a&utm_source=feedburner&utm_medium=twitter&utm_campaign=Feed%3a%20AyendeRahien%20%28Ayende%20@%20Rahien%29)，说*“ConcurrentBag 使用的 ThreadLocal 没想到会有很多实例。这个问题已经修复，现在可以运行得相当快”*

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-14T03:55:17.427

为什么不在第二个 GC.Collect() 之后移动 Console.WriteLine？否则，您可能会看到比您预期更多的对象。

您还可以尝试将 Main 中的所有内容放入循环中以获取一些统计信息。即使您不移动您的写入，您也可能会在之后看到更小的增量。

干杯!

# scala - Scala 查询生成无效 SQL

> ID：10850444
> 
> 赞同：1
> 
> 时间：2012-06-01T12:39:13.820
> 
> 标签：scala, scalaquery

我正在使用 scalaquery 连接到 oracle 和 postgres 服务器。Oracle 和 Postgres 都会出现这种行为，但它在 Postgres 中只是有效（并且仍然不正确）的 SQL。

在某些时候，我正在以 scalaquery 的形式运行一个查询：

```
row.foo.bind == parameter.foo || row.foo inSetBind parameter.foo.children 
```

参数是一个特征，已知其中有一个 foo 。

这里的问题是，在大约 100 个查询运行中，scala-query 只生成一次正确的 SQL，形式为

```
...
WHERE row.foo = ? or row.foo in (?, ?, ?, ?, ?)
... 
```

大多数情况下，它会生成

```
...
WHERE row.foo = ? or false
... 
```

为什么这种情况不一致发生，它是一个错误（我认为是），我该如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T15:06:08.700

事实证明，查询正在查看一个空集，因为 parameter.foo 在大多数情况下没有子集。

鉴于这`WHERE row.foo IN ()`不是有效的 SQL，它被写成`false`.

尽管代码针对的是 oracle DB，但仍然存在生成的问题`false`，但根本原因现在已经清除。

# javascript - Javascript setTimeout 和 Chrome Workers，我不明白

> ID：10850451
> 
> 赞同：1
> 
> 时间：2012-06-01T12:39:43.347
> 
> 标签：javascript, google-chrome

我有以下文件：（inc.js 包含在我的 html 页面中）

**inc.js**

```
var field = new Worker('ajax.js');
field.addEventListener('message', function(e) {
    var data = JSON.parse(e.data);
    document.getElementById('fieldToUpdate').innerHTML = data[0];
}, false);
field.postMessage(0); 
```

**ajax.js**

```
var xhr = new XMLHttpRequest();
function getData() {
    xhr.open('get', 'field.php');
    xhr.onreadystatechange = processData;
    xhr.send(null);
}
function processData() {
    if (xhr.readyState == 4) {
        self.postMessage(xhr.responseText);
        setTimeout(getData, 5000);
    }
}
onmessage = function() {
    setTimeout(getData, 5000);
} 
```

我现在的问题是，这个脚本不是每 5 秒发出一个 http 请求，而是在一个完成后立即开始。

# windows-phone-7 - windows phone 一天最多可以通过mspn发送多少个推送通知？

> ID：10850455
> 
> 赞同：1
> 
> 时间：2012-06-01T12:39:50.327
> 
> 标签：windows-phone-7, push-notification, mpns, app-hub

有人可以告诉我一天内可以通过 Windows Phone 中的 mspn 发送的推送通知的最大数量是多少。还是无限的？如果有任何限制，请同时回答以下问题

*   每天可以从云服务发送到 mspn 的最大通知数
*   每天可以发送到单个设备的最大通知数
*   达到限制后每次通知的额外费用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:46:30.177

来自： http: [//msdn.microsoft.com/en-us/library/ff402558](http://msdn.microsoft.com/en-us/library/ff402558(v=vs.92).aspx) (v=vs.92).aspx 。

> 我们建议设置经过身份验证的 Web 服务以将您的通知发送到 Microsoft 推送通知服务，因为通过 HTTPS 接口进行通信以提高安全性。经过身份验证的 Web 服务对它们可以发送的推送通知的数量没有每日限制。另一方面，未经身份验证的 Web 服务以每个订阅每天 500 条推送通知的速度受到限制

# asp.net - 如何在 asp.net 页面中包含 youtube 登录？

> ID：10850457
> 
> 赞同：0
> 
> 时间：2012-06-01T12:39:54.983
> 
> 标签：asp.net, youtube-api, youtube-javascript-api

我想包括一个 youtube 登录系统，就像 facebook 有“用 facebook 登录”一样。我搜索了api但找不到任何东西。有人可以指导我完成或发布任何有关如何做到这一点的教程的链接。实际上，我们的网站提供了上传 youtube 视频的选项（视频的 html 嵌入代码），但是为了验证上传者实际上是原始上传者并且没有上传其他人的视频，我们希望他使用 youtube 登录登录网站，然后我们验证上传者的姓名和视频的上传者姓名是否相同。我不知道如何做到这一点，有人可以指出我如何开始的正确方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:42:58.200

Youtube 使用 Google 帐户，因此您实际上需要“使用 Google 登录”。[https://developers.google.com/accounts/](https://developers.google.com/accounts/)上有一些文档。

# c# - 如何通过正则表达式“输出”文本

> ID：10850466
> 
> 赞同：1
> 
> 时间：2012-06-01T12:40:35.440
> 
> 标签：c#, .net, regex, text, input

我有一个小问题。我试图让文本从 html 元素中消失。示例输入：

```
I want this text I want this text I want this text <I don't want this text/>
I want this text I wan this text <I don't>want this</text> 
```

有人知道正则表达式怎么可能吗？我认为我可以通过删除元素文本来实现。那么，有人知道这个问题的另一种解决方案吗？请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T12:43:29.467

代替[不适合解析一般 HTML](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)（尤其是格式错误的 HTML）的正则表达式，使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)之类的 HTML 解析器。

> 什么是 Html Agility Pack (HAP)？
> 
> 这是一个敏捷的 HTML 解析器，它构建一个读/写 DOM 并支持普通的 XPATH 或 XSLT（实际上你不必了解 XPATH 或 XSLT 就可以使用它，不用担心......）。它是一个 .NET 代码库，允许您解析“网络之外”的 HTML 文件。解析器对“真实世界”格式错误的 HTML 非常宽容。对象模型与 System.Xml 的提议非常相似，但用于 HTML 文档（或流）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T12:42:23.273

**试试这个**

```
(?<!<.*?)([^<>]+) 
```

**解释**

```
@"
(?<!        # Assert that it is impossible to match the regex below with the match ending at this position (negative lookbehind)
   <           # Match the character “&lt;” literally
   .           # Match any single character that is not a line break character
      *?          # Between zero and unlimited times, as few times as possible, expanding as needed (lazy)
)
(           # Match the regular expression below and capture its match into backreference number 1
   [^<>]       # Match a single character NOT present in the list “&lt;>”
      +           # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
)
" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T12:54:49.563

我同意任何不重要的事情都应该使用 HTML 解析器（如果您使用 .NET，敏捷包非常好），但对于小需求，因为这很可能是矫枉过正。再说一次，HTML 解析器更了解 HTML 充满的怪癖和边缘情况。请务必在使用正则表达式之前进行测试。

干得好

```
<.*?>.*?<.*?>|<.*?/> 
```

它也正确地忽略了

```
<I don't>want this</text> 
```

而不仅仅是标签

在 C# 中，这变成

```
string resultString = null;
resultString = Regex.Replace(subjectString, "<.*?>.*?<.*?>|<.*?/>", ""); 
```

# iphone - 打开项目时xcode崩溃

> ID：10850471
> 
> 赞同：0
> 
> 时间：2012-06-01T12:40:55.737
> 
> 标签：iphone, objective-c, ios, xcode

我对 xcode 有疑问。我从事过iphone项目并正常打开它。但是今天我无法打开它。当我尝试打开它时，xcode 崩溃并显示日志：

```
 ASSERTION FAILURE in /SourceCache/IDEFoundation/IDEFoundation-937/Framework/Classes/Model/Logging/ActivityLog/IDEActivityLogSection.m:771
Details:  Assertion failed: nBytesRead <= sizeof(buffer)
Object:   <IDEActivityLogSection>
Method:   +sectionWithContentsOfFile:error:
Thread:   <NSThread: 0x200025720>{name = (null), num = 1}
Hints:   None
Backtrace:
  0  0x00000001009e6646 -[IDEAssertionHandler handleFailureInMethod:object:fileName:lineNumber:messageFormat:arguments:] (in IDEKit)
  1  0x000000010006aaa4 _DVTAssertionFailureHandler (in DVTFoundation)
  2  0x000000010061a094 +[IDEActivityLogSection sectionWithContentsOfFile:error:] (in IDEFoundation)
  3  0x000000010057b84d -[IDEOnDiskActivityLogRecord fullLogWithError:] (in IDEFoundation)
  4  0x00000001006bad4b __79-[IDEOnDiskActivityLogRecord initWithUUID:store:cacheEntry:updatedCache:error:]_block_invoke_0 (in IDEFoundation)
  5  0x00000001006bac48 -[IDEOnDiskActivityLogRecord initWithUUID:store:cacheEntry:updatedCache:error:] (in IDEFoundation)
  6  0x000000010057b46c __60-[IDEOnDiskLogStore_Impl initWithRootDirectoryAtPath:error:]_block_invoke_0 (in IDEFoundation)
  7  0x00007fff87e5a4da __NSDictionaryEnumerate (in CoreFoundation)
  8  0x000000010057b256 -[IDEOnDiskLogStore_Impl initWithRootDirectoryAtPath:error:] (in IDEFoundation)
  9  0x0000000100579cf9 +[IDEOnDiskLogStore onDiskStoreInWorkspaceArena:atSubPath:error:] (in IDEFoundation)
 10  0x0000000100579bcb +[IDELogStore onDiskOrInMemoryLogStoreInWorkspaceArena:prefix:] (in IDEFoundation)
 11  0x0000000100579aaa -[IDEExecutionEnvironment initWithWorkspaceArena:] (in IDEFoundation)
 12  0x0000000100579863 -[IDEWorkspace _setupExecutionEnvironment] (in IDEFoundation)
 13  0x00000001005e10f4 -[IDEWorkspace _setupWorkspaceArenaIfNeeded] (in IDEFoundation)
 14  0x00000001005e13fe __81-[IDEWorkspace _finishLoadingAsynchronously:shouldUpgradeFromSimpleFilesFocused:]_block_invoke_0 (in IDEFoundation)
 15  0x00007fff83e8290d -[NSBlockOperation main] (in Foundation)
 16  0x00007fff83e72dd0 -[__NSOperationInternal start] (in Foundation)
 17  0x00007fff83f50bd5 ____NSOQSchedule_block_invoke_2 (in Foundation)
 18  0x00007fff88698d64 _dispatch_call_block_and_release (in libSystem.B.dylib)
 19  0x00007fff886778d2 _dispatch_queue_drain (in libSystem.B.dylib)
 20  0x00007fff8867817f _dispatch_queue_serial_drain_till_empty (in libSystem.B.dylib)
 21  0x00007fff886aaf1c _dispatch_main_queue_callback_4CF (in libSystem.B.dylib)
 22  0x00007fff87df4c60 __CFRunLoopRun (in CoreFoundation)
 23  0x00007fff87df3d8f CFRunLoopRunSpecific (in CoreFoundation)
 24  0x00007fff89b937ee RunCurrentEventLoopInMode (in HIToolbox)
 25  0x00007fff89b935f3 ReceiveNextEventCommon (in HIToolbox)
 26  0x00007fff89b934ac BlockUntilNextEventMatchingListInMode (in HIToolbox)
 27  0x00007fff83481eb2 _DPSNextEvent (in AppKit)
 28  0x00007fff83481801 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] (in AppKit)
 29  0x00007fff8344768f -[NSApplication run] (in AppKit)
 30  0x00007fff834403b0 NSApplicationMain (in AppKit)
 31  0x0000000100000eec 
```

请帮我解决这个问题。代码 4.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:47:13.413

您是否有机会从项目文件夹中重命名 Xcode 项目？您在编译项目或加载项目时是否收到此错误？（我想是第二个，来自您的消息）

# less - 带有 MAMP 和 Sublime 文本的 CSS 预处理器

> ID：10850474
> 
> 赞同：0
> 
> 时间：2012-06-01T12:41:05.280
> 
> 标签：less, sublimetext2, mamp

我刚刚跳上 Sublime 文本旅行车，真的很想使用 LESS 优化我的工作流程。我一直在寻找一个执行编译客户端的插件，实际上我可以将 less.js 文件添加到所有项目中，但我找不到任何东西来解释如何让它工作。

另外我认为最好在 MAMP 附带的 Apache 服务器上安装一些东西来在服务器端执行它，然后我不必担心添加某些文件并复制预处理的客户端代码以进行生产网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T01:36:07.613

我使用[CodeKit](http://incident57.com/codekit/)（仅限 Mac），它可以很好地满足您的需求，而且还有更多功能。我真的不能说足够多的好话。我建议您查看该网站和视频以了解它提供的内容。

还有这个 ST2 插件：

[https://github.com/BBB/sublime-text-2-plugins](https://github.com/BBB/sublime-text-2-plugins)

由于 CodeKit 的工作原理，我没有亲自使用过它。但这是另一种选择。

澄清一下，这些不是在 MAMP 上安装和运行的选项，但我认为一旦您检查它们，您会发现它们仍然提供了一个不需要您向项目添加额外文件的解决方案。

# excel - 试图设置命名单元格的文本

> ID：10850478
> 
> 赞同：2
> 
> 时间：2012-06-01T12:41:20.163
> 
> 标签：excel

我正在使用 vbscript（.vbs 文件）来设置 Excel 工作表的值。

我可以按如下方式设置单元格值，`objExcel.Cells(10, 10).Value = "someText"`但如果单元格有一个名称“ `myCell`”，是否可以在不知道单元格实际位置的情况下直接设置？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:02:56.243

```
ThisWorkbook.Names("myCell").RefersToRange.Value = "someText" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:46:09.240

尝试

```
objExcel.Range("CustomName").Value = "someText" 
```

# php - Orber By PHP/Ajax 脚本中的语法问题

> ID：10850479
> 
> 赞同：0
> 
> 时间：2012-06-01T12:41:20.807
> 
> 标签：php, mysql, ajax

我有以下代码片段正在运行，但我正在尝试对结果 ASC 进行排序。我尝试了很多变化，但没有工作？

```
$res = mysql_query('SELECT DISTINCT call FROM ' . DB_TABLE); 
```

不工作：

```
$res = mysql_query('SELECT DISTINCT call FROM ' . DB_TABLE . 'ORDER BY call ASC'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T12:42:53.790

这应该有效：

```
$res = mysql_query('SELECT DISTINCT call FROM ' . DB_TABLE . ' ORDER BY call ASC'); 
```

注意 ORDER 前的空格

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T12:43:17.563

你错过了一个空间：

```
$res = mysql_query('SELECT DISTINCT call FROM ' . DB_TABLE . ' ORDER BY call ASC'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T12:51:37.653

尝试在 mysql 查询中使用反引号 (`) 运算符。

```
$res = mysql_query('SELECT DISTINCT `call` FROM ' . DB_TABLE . ' ORDER BY `call` ASC'); 
```

一切都应该运作良好。

# python - 扩展 django admin 提交操作

> ID：10850484
> 
> 赞同：1
> 
> 时间：2012-06-01T12:41:47.407
> 
> 标签：python, django

我有一个 django 模型，我想通过管理站点编辑/添加它。该模型包含一个标签列表，每个标签都有一个分数。（多对多关系）。

除了标签之外，我还想在模型中有另一个字段，当通过管理界面将模型提交到数据库时，它将计算标签分数。

所以基本上我在提交后需要一个事件，这样我就可以遍历所有模型标签并计算分数。

是否可以以这种方式扩展管理界面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:53:49.157

您最好的选择可能是压倒一切[`ModelAdmin.save_formset`](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.save_formset)，因为在保存主模型和 m2m 关系后调用该方法。

```
class MyModelAdmin(admin.ModelAdmin):
    def save_formset(self, *args, **kwargs):
        super(MyModelAdmin, self).save_formset(*args, **kwargs)
        # do your calculation here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:52:32.917

最好的方法是使用[信号](https://docs.djangoproject.com/en/dev/topics/signals/)。在这种情况下，您可以使用[m2m_changed 信号。](https://docs.djangoproject.com/en/dev/ref/signals/#m2m-changed)

# c# - 来自窗口句柄的 .net 类名

> ID：10850485
> 
> 赞同：3
> 
> 时间：2012-06-01T12:41:48.993
> 
> 标签：c#, .net, winapi

我正在开发一个监视 Windows 机器上运行的应用程序。如果在自动化过程中弹出某些对话框，它将用于发出警报。我正在使用 windows API 来获取现有 windows 的类名，效果很好。但是，如果这些是 .NET 应用程序，那么我得到的不是 .NET 类名，而是类似“WindowsForms10.Window.8.app.0.39cfeeb”之类的东西，更糟糕的是，类名在执行之间不是恒定的。

有没有办法在仅提供 Windows 句柄时获取 .NET 类名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:21:39.680

是的，这行不通。桌面会话中的每个唯一窗口都必须有一个唯一的 Windows“类名”，该字符串传递给 RegisterClassEx() winapi 函数并在 CreateWindowEx() 中使用。Winforms 会自动生成这些名称，因此它有责任确保它生成的名称不会与其他进程和应用程序域中的窗口名称发生冲突。这就是为什么您会看到这些奇怪的名称，最重要的部分是最后一位，在您的示例中为 39cfeeb，即 AppDomain.GetHashCode() 返回的值。您无法从外部进程中检索该哈希码。

您将需要一种完全不同的方法，它不依赖于容易获得的类名。查看[Managed Spy 代码](http://msdn.microsoft.com/en-us/magazine/cc163617.aspx)，它支持在外部 Winforms 进程上使用反射。隔离它使用的 DLL 注入代码技术，以便您可以自己在自己的代码中使用它需要一些工作。

也是您从进程中获得 .NET 类名的唯一方法，否则在使用 UI 自动化时您永远不会真正关心这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T12:46:04.517

我不这么认为。Windows 中窗口的“类名”与 .NET 类无关。在 Windows 中，可以注册窗口类，但这基本上只是确定窗口样式的标志的集合。

.NET 似乎为每个窗体注册了这样一个窗口类，但似乎是随机命名的。这就解释了类名不是常量的事实。

# c++ - 用动态长度初始化 wchar_t

> ID：10850491
> 
> 赞同：2
> 
> 时间：2012-06-01T12:42:08.467
> 
> 标签：c++, windows, visual-c++, shellexecute, wchar-t

首先我必须提到，我是一个绝对的 C++ 初学者，所以不要扔任何石头。我想在 ShellExecute 的帮助下杀死一个外部程序并尽可能简单地删除一个日志文件。在 linux 上我可以使用系统（并且它运行良好），但在 windows 上会弹出一个烦人的 dosbox。在很多谷歌的帮助下，我设法编写了这段代码：

```
wchar_t command[1024] = L"b";
swprintf_s(command, _countof(command), L"/C TASKKILL /IM ExternalProgram.exe /F & del \"%S\"", logFilePath);
ShellExecute( NULL, L"open", L"cmd.exe", command, NULL, SW_HIDE ); 
```

logFilePath 是字符。只要我使用短路径，此代码就可以工作，例如`c:\MyProgram\logfile.txt`. 如果日志文件的路径较长，例如`c:\program files\My Program\anything\more\xxx\...\logfile.txt`程序崩溃。我知道，1024 是变量的最大长度，但是我如何告诉 C 我不知道长度？

我试图通过使用来解决它，`strlen(logFilePath)+50`但这只会给我编译错误。正确的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T13:01:38.920

有很多方法可以做到这一点。我只是告诉你我会做什么，而不是给你 15 个选项：

```
#include <sstream>

std::wstringstream strStream;
strStream << L"/C TASKKILL /IM ExternalProgram.exe /F & del \"" << logFilePath << L"\"";
std::wstring command = strStream.str();
ShellExecute( NULL, L"open", L"cmd.exe", command.c_str(), NULL, SW_HIDE ); 
```

这种方式多一点 C++ish 而少一点 Cish。

哦，为了解决您的尝试不起作用的原因：如果它们是在堆中分配的，您只能拥有动态大小的数组（大小在运行时确定的数组）。你必须做...

```
wchar_t* command = new wchar_t[strlen(logFilePath)+50];
//...
delete [] command; 
```

# c++ - cv::Mat 检测 PixelFormat

> ID：10850492
> 
> 赞同：5
> 
> 时间：2012-06-01T12:42:08.837
> 
> 标签：c++, opencv, windows-forms-designer, pixelformat

我正在尝试使用 pictureBox->Image (Windows Forms) 来显示 cv::Mat 图像 (openCV)。我想这样做而不将图像保存为文件（因为我想每 100 毫秒重置一次图像）。我刚刚在这里找到了该主题：[如何在 Windows 窗体应用程序中显示 cv::Mat？](https://stackoverflow.com/questions/9580397/how-to-display-a-cvmat-in-a-windows-form-application)

当我使用这个解决方案时，图像看起来只是白色的。我想我拿错了 PixelFormat。那么如何找出我需要的 PixelFormat 呢？没有在 cv::Mat 中看到任何方法来获取相关信息。或者这是否取决于我用来创建这个 cv::Mat 的图像源？到目前为止感谢:)

在这里我拍了一个屏幕。它不是完全白色的。所以我想有一些颜色信息。但也许我错了。 [屏幕](http://s7.directupload.net/images/120601/rhl87jf6.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T17:17:26.923

[cv::Mat.depth()](http://docs.opencv.org/modules/core/doc/basic_structures.html#mat-depth)返回像素类型，例如。CV_8U 用于 8 位无符号等，而[cv::Mat.channels()](http://docs.opencv.org/modules/core/doc/basic_structures.html#mat-channels)返回通道数，对于彩色图像通常为 3

对于“常规图像”，opencv 通常使用 8 位 BGR 颜色顺序，应该直接映射到 Windows 位图或大多数 Windows 库。

所以你可能想要system.drawing.imaging.pixelformat.Format24bppRgb，我不知道它使用什么顺序（RGB或BGR）但你可以使用opencv cv::cvtColor()和CV_BGR2RGB来转换为RGB

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T15:20:39.140

谢谢您的帮助！问题是别的。我只是没有为图像对象分配内存。所以没有什么可以真正展示的。在headerFile`cv::Mat img;`和`img = new cv::Mat(120,160,0);`构造函数（ocvcamimg 类）中使用它可以工作。（`ocvcamimg->captureCamMatImg()`返回`img`）。

# asp.net - 将 System.windows.Forms 引用添加到 asp.net 网站

> ID：10850495
> 
> 赞同：4
> 
> 时间：2012-06-01T12:42:22.897
> 
> 标签：asp.net, .net, winforms

我有一个 asp.net 应用程序，我在其中使用 System.Windows.Forms 命名空间引用来使用 Web 浏览器控件。该应用程序在本地系统上运行良好，但在托管后显示错误。我如何嵌入 dll 以在 Web 应用程序中使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-16T22:32:21.967

回答一个 3 1/2 岁的问题很奇怪......

**I. 在您的 web.config 中，添加对 Windows.Forms 的引用**

```
<system.web>
  <compilation>
    <assemblies>
      <add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
    </assemblies>
  </compilation>
<system.web> 
```

*这仅在引用的 DLL 在 GAC 中时才有效。*如果不是：

1.  `/Bin`在您的网站根目录中创建一个文件夹。
2.  在那里复制你的 DLL。
3.  不要在 web.config 中添加引用***。***

**二、在您的模块/类中，导入 Windows.Forms (VB: Imports / C#: using)**

```
Imports System.Windows.Forms 
```

您现在可以使用 Web 浏览器控件。不过，这有点棘手。

可能的用途包括：生成截图、AJAX 爬取（#! >> _escaped_fragment_）等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:51:58.537

`System.Windows.Forms`包含用于在运行代码的计算机上显示事物的类。当您在 PC 上进行测试时，它可以工作，因为您在与开发服务器相同的机器上运行浏览器。

在真实服务器上运行时，其中的任何内容`System.Windows.Forms`都会显示在服务器上——而不是用户的 PC 上。（此外，它将显示在服务器服务会话中的隐藏桌面上）。

您不应该混合使用网络表单和 Windows 表单。无论您想做什么 - 还有另一种有效的方法，它不涉及 winforms。

### 不要`System.Windows.Forms`在 webb 应用程序中使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T13:23:02.373

如前所述，您不能将 WinForms 控件与 ASP.NET 一起使用。

使用 iframe 显示您尝试在 webbrowser 控件中显示的任何页面：http: [//www.w3schools.com/tags/tag_iframe.asp](http://www.w3schools.com/tags/tag_iframe.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-19T08:31:24.103

是的，你可以做到，只需复制

> system.window.form

dll 到您的 Web Bin 文件夹中，一切都会正常工作。

# css - 如何删除css下拉菜单中的重叠线

> ID：10850496
> 
> 赞同：1
> 
> 时间：2012-06-01T12:42:22.760
> 
> 标签：css, menu, border

在下面的 css 代码中，底部和顶部边框似乎重叠，这会导致粗线，我似乎无法弄清楚如何删除它。任何建议表示赞赏！谢谢你。

html代码：

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title></title>
<meta name="" content="">
<link href="navCSS.css" rel="stylesheet" type="text/css">
</head>
<body>

<div id="wrapper">
<div id="navMenu">

<ul>
<li><a href="#">Products</a>
<ul>
<li><a href="#">link item</a></li>
<li><a href="#">link item</a></li>
<li><a href="#">link item</a></li>
<li><a href="#">link item</a></li>

</ul> <!--inner UL-->
</li> <!--main LI-->
</ul> <!--main UL-->

<br class="clearFloat">

</div> <!--navMenu->
</div> <!-- wrapper -->

</body>
</html> 
```

CSS代码：

```
#navMenu{

    margin:0;
    padding:0;

}

#navMenu ul{
    margin:0;
    padding:0;
    line-height:30px;

}

#navMenu li {
    margin:0;
    padding:0;
    /*removes the bullet point*/
    list-style:none;
    float:left;
    position:relative;
    background: #fff;

}

/*for top level */
#navMenu ul li a{
    text-align:center;
    font-family:"calibri";
    text-decoration:none; /*remove underline*/

    /*height width for all links*/
    height:30px;
    width:150px;
    display:block;
    border: 1px solid #ccc;
    color: #777;

}

/* hiding inner ul*/
#navMenu ul ul{
    position:absolute;
    visibility:hidden;
    /*must match height of ul li a*/
    top:32px;

}
/*selecting top menu to display the submenu*/

#navMenu ul li:hover ul{
    visibility:visible;

}

#navMenu li:hover{
    background-color: #F9F9F9;
    }

#navMenu ul li:hover ul li a:hover{

    color: E2144A;

}

#navMenu ul li a:hover{
        color: E2144A;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-02T22:18:44.600

我添加了一个选择器来删除除最后一个之外所有项目的底部边框。

[http://jsfiddle.net/GWcnK/5/](http://jsfiddle.net/GWcnK/5/)

```
#navMenu ul li:not(:last-child) a {
    border-bottom-style: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:47:45.313

您应该取出顶部边框，即

```
border-bottom: 1px solid #ccc;
border-left: 1px solid #ccc;
border-right: 1px solid #ccc; 
```

代替

```
border: 1px solid #ccc; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T12:54:05.070

边距顶部 0 像素；苹果低于类。

```
#navMenu ul li a{
    text-align:center;
    font-family:"calibri";
    text-decoration:none; /*remove underline*/

    /*height width for all links*/
    height:30px;
    width:150px;
    display:block;
    border: 1px solid #ccc;
    border-top:0px;
    color: #777;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-01T12:46:30.450

将此添加到下拉列表中的列表项中：

```
li {
    margin-bottom: -1px;
} 
```

你也可以做 margin-top: -1px - 但这应该让你知道如何去做。

# jquery - Jquery slideDown第二次不起作用，而是淡入淡出..有什么想法吗？

> ID：10850505
> 
> 赞同：0
> 
> 时间：2012-06-01T12:42:56.907
> 
> 标签：jquery, jquery-ui, fadeout, slidetoggle, slidedown

出于某种原因，如果您第二次打开 div，它会淡入淡出，而不是应该做的滑动，它第一次可以正常工作.. 有什么想法吗？

```
//CHECK IF ROW IS VISIABLE
if (!$('#'+rowid).is(':visible')) {
//HIDE ANY OPEN ROWS
$("#tableToggle tr.toggleable").fadeOut('fast', function() { });
//DO SLIDE LOAD FUNCTION

$('#'+rowid).slideDown('slow', function() { });
$("#einfo"+rowid).load(url, function(response, status, xhr) {
if (status == "success") { $("#loader"+rowid).hide(); 
$('#einfo'+rowid).slideDown(200, function() {
$('html, body').delay('200').animate({
scrollTop: $(this).offset().top 
}, 200); }); } });
//HIDE ALL TOGGLEABLE ROWS
}else { $("#tableToggle tr.toggleable").fadeOut('fast', function() { });} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:57:26.597

我相信原因是因为您从未将其向上滑动而是将其淡出。您是否尝试将其更改为 slideUp 而不是 fadeOut？

# objective-c - [数组计数] 的问题

> ID：10850511
> 
> 赞同：0
> 
> 时间：2012-06-01T12:43:36.603
> 
> 标签：objective-c, ios, cocoa-touch

我对 plist 文件中的值进行计数有问题，问题是 if 语句应该检查该值是否大于我的 plist 中的对象，然后停止移动到下一页，这是我的代码，但是：

```
 picturesDictionary = [NSDictionary dictionaryWithContentsOfFile:
                                    [[NSBundle mainBundle] pathForResource:@"images" ofType:@"plist"]];  
arrays = [picturesDictionary objectForKey:@"PhotosArray"];

    int photoCount =  [arrays count];

if ((photoNumber < 1) || (photoNumber > photoCount)) return nil;

controller = [BookController rotatableViewController];

PhotosInAlbum.image = [UIImage imageNamed:[arrays objectAtIndex:pageNumber]]; 
```

但是当照片到达最后一页后，应用程序将崩溃，调试器消息：

```
'NSRangeException', reason: '-[__NSCFArray objectAtIndex:]: index (30) beyond bounds (30)'
*** First throw call stack: 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T12:45:40.840

尝试

```
if ((pageNumber < 0) || (pageNumber > (photoCount-1))) return nil; 
```

它崩溃的原因是，该计数将给出对象的数量，但是在访问每个对象时，您从 0 开始，因此 [array count]-1 是最后一个索引。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T12:46:21.417

改变

```
 if ((pageNumber < 1) || (pageNumber > photoCount)) return nil; 
```

到

```
 if ((pageNumber < 0) || (pageNumber >= photoCount)) return nil; 
```

如果数组中有 30 个项目，则最大可访问索引为 29，因为第一个元素位于索引 0 处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T12:46:52.703

你要：

```
if ((pageNumber < 0) || (pageNumber >= photoCount)) return nil; 
```

由于它从 0 开始，并且如果您尝试在索引处获取对象等于计数，则它会读取数组末尾的内容。

# java - 如何转换地图 列出

> ID：10850514
> 
> 赞同：1
> 
> 时间：2012-06-01T12:43:43.520
> 
> 标签：java, data-structures, collections

我有一个`Map<Integer, List>`带有键值的地图。我需要将其转换为 List 并将其传递给调用函数。获得列表后，我需要将其转换回`Map<Integer, List>`

我将地图转换为列表的原因是因为我需要为此方法创建网络服务。由于我无法将地图公开给网络服务，我需要将其转换为列表。

如何实现这一目标..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:46:53.950

地图有两个称为`keySet()`和的函数`values()`。它们分别返回映射的键和值。键以 a 形式返回，`Set`值以 a形式返回`Collection`。

您可以从其中任何一个创建列表。

这是一个例子：

```
Map<Integer, List> map = // map creation;
List<Integer> keyList = new ArrayList<Integer>(map.keySet());
List<List> valueList = new ArrayList<List>(map.values()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:46:57.937

您可以创建一个具有两个属性（Integer、List）的类，并通过一个对象键创建一个 List。

此外，您可以使用：

```
new ArrayList(Map.entrySet()); 
```

并将结果集转换为列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T12:49:16.320

要获取值（字符串）：

```
List<List<String>> listVals = new ArrayList<List<String>>(map.values()); 
```

要获取密钥：

```
List<Integer> listKeys = new ArrayList<Integer>(map.keySet()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T12:50:35.773

根据我读到的内容，您正在尝试通过列表传递地图（作为您的服务限制）。

如果您找不到更好的解决方案，您始终可以使用两个列表。一个用于键，一个用于值。

（但是您有可能使用这种方法破坏地图的一致性）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T12:51:46.337

地图包含键值对，但列表不包含键值对。所以你可以创建一个 bean 类来设置键和值，然后创建包含 bean 类对象的列表。

# c++ - 在 Visual Studio 中组织内容管道

> ID：10850516
> 
> 赞同：0
> 
> 时间：2012-06-01T12:43:52.343
> 
> 标签：c++, visual-studio, nmake, custom-build-step, content-pipeline

（这与 XNA 内容管道无关）

我正在尝试使用 Visual Studio 实现内容管道，即：

1.  项目 A 生成文件 a
2.  项目 B 产生文件 b
3.  a 和 b 被传递到外部压缩工具，该工具生成输出文件 a' 和 b'
4.  a'、b' 和一些额外的元信息被传递给项目 C 并将其合并到文件 c 中
5.  c最终传递给实际的项目D

从 A/B 到 D 的整个过程大约需要 10 到 20 分钟。自然，我希望尽可能少地执行此操作，以便能够在没有太多停机时间的情况下继续处理任何这些项目。管道还应该易于扩展。

照原样，整个管道是使用 VS10 Makefile 项目中的各种命令行调用来执行的。因此，每次我构建解决方案时，管道都会运行，即使内容文件或项目根本没有改变。

显然这不是最聪明的方法，那么解决此类问题的通常方法是什么？自定义构建步骤？批处理文件？

# mysql - Rails 数据库查询 - 是否可以为列指定别名？

> ID：10850531
> 
> 赞同：4
> 
> 时间：2012-06-01T12:44:48.327
> 
> 标签：mysql, ruby-on-rails, alias

我必须为一个旧的手机应用程序生成一个 json 提要，并且一些标签需要与我的数据库列名不同。

我认为最有效的方法是在数据库级别创建一个别名。所以我正在做类似的事情

```
Site.where( mobile_visible: true ).select("non_clashing_id AS clientID") 
```

产生 SQL

```
SELECT non_clashing_id AS clientID FROM `sites` WHERE `sites`.`mobile_visible` = 1 ORDER BY site_name 
```

如果我在 MYSQL 工作台中运行此查询，它会生成一个带有`ClientID`我期望的标题的列，以及所需的值。

但是，如果我在 rails 视图中显示对象，我会得到`{"clientID":null},{"clientID":null},{"clientID":null}`

我究竟做错了什么？有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:27:55.140

这显示了如何访问变量

```
sites = Site.where( mobile_visible: true ).select("non_clashing_id AS clientID")
sites.each do |site|
  puts site.clientID
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T13:07:51.600

我认为默认情况下，`activerecord`从数据库加载列定义。而且，它应该只将值加载到现有列中。

```
Site.columns 
```

我想您可以在该数组中再添加一项。或者您可以使用没有别名列名的普通查询，然后`alias_attribute`像 MurifoX 一样添加并覆盖`as_json`方法：

```
class Site < ActiveRecord::Base
  alias_attribute :client_id, :non_clashing_id

  def as_json(options={})
    options[:methods] = [:client_id]
    options[:only] = [:client_id]
    super
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T12:59:30.743

除了数据库别名之外，请尝试将其放入您的模型中：

```
class model < ActiveRecord::Base
  alias_attribute :non_clashing_id, :client_id
  ...
end 
```

# mysql - MYSQL - 函数未返回预期结果

> ID：10850534
> 
> 赞同：2
> 
> 时间：2012-06-01T12:45:01.317
> 
> 标签：mysql, sql, database

我正在建立一个物业出租网站。我现在正在做搜索，我正在尝试设置一个可以为每个属性调用的函数。该函数需要从附加到给定属性的表中获取所有行，`rental_periods`然后计算出最佳（最便宜）的每周价格。

我已经设置了以下表格。

`properties`- 每个属性一行

`rental_periods`- 每个属性的多行，与 id 绑定。

每行是`selfcatered`或`catered`。

如果`selfcatered`需要根据以下给出的价格计算价格：

*   WeekDayPerDay -`wdpd`
*   周末每晚 -`wepn`
*   每月价格 -`monthly`
*   周价 -`wk`

如果`catered`可以给出价格：

*   每人每晚 -`pppn`
*   每晚 -`pn`
*   每人每周 -`pppw`

我需要一个函数，它需要一个属性 id，然后获取所有适用的期间，然后根据 selfcated/catered 计算出最好的每周价格。

到目前为止，我所拥有的似乎不起作用。它要么返回 NULL，要么返回 100000.00（我的上限默认价格）。

这是代码

```
DELIMITER $$

CREATE FUNCTION get_price(myid INT)
  RETURNS VARCHAR(20)

BEGIN
    DECLARE done INT DEFAULT 0;
    DECLARE price decimal(30,3) default 100000.000;

    DECLARE id INT;
    DECLARE prop_id INT;
    DECLARE type enum('catered','selfcatered');
    DECLARE name varchar(45);

    DECLARE `from` date;
    DECLARE `to` date;

    DECLARE currency varchar(45);
    DECLARE so tinyint;
    DECLARE wk decimal(30,3);
    DECLARE wepn  decimal(30,3);

    DECLARE wdpd  decimal(30,3);
    DECLARE monthly  decimal(30,3);
    DECLARE extra  decimal(30,3);
    DECLARE pppn  decimal(30,3);
    DECLARE pn  decimal(30,3);

    DECLARE pppw  decimal(30,3);
    DECLARE minstay int;
    DECLARE maxstay int;
    DECLARE breakfast varchar(45);  
    DECLARE annual TINYINT;

    DECLARE cur1 CURSOR FOR SELECT * FROM rental_periods WHERE prop_id = myid;

    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;

    OPEN cur1;

    REPEAT
    FETCH cur1 INTO id, prop_id, type, name, `from`, `to`, currency, so, wk, wepn, wdpd, minstay, maxstay, monthly, extra, pppn, pn, pppw, breakfast, annual;

    IF NOT done THEN
        IF (@type = "selfcatered") THEN
            IF (@wdpd > 0 AND (@wdpd * 7) < @price) THEN
                SET price = @wdpd * 7;
            END IF;

            IF (@wepn > 0 AND (@wepn * 7) < @price) THEN
                SET price = @wepn * 7;
            END IF;

            IF ((@wdpd > 0 AND @wepn > 0) AND
            (@wdpd * 5 + @wepn * 2) < @price) THEN
                SET price = @wdpd * 5 + @wepn * 2;
            END IF;

            IF (@monthly > 0 AND (@monthly / (52 / 12)) < @price) THEN
                SET price = @monthly / (52 / 12);
            END IF;

            IF (@wk > 0 AND @wk < @price) THEN
                SET price = @wk;
            END IF;
        ELSE
            IF (@pppn > 0 AND (@pppn * 7) < @price) THEN
                SET price = @pppn * 7;
            END IF;

            IF (@pn > 0 AND (@pn * 7) < @price) THEN
                SET price = @pn * 7;
            END IF;

            IF (@pppw > 0 AND (@pppw) < @price) THEN
                SET price = @pppw;
            END IF;
        END IF;
    END IF;
    UNTIL done END REPEAT;

    CLOSE cur1;

    RETURN price;
END $$ 
```

我希望/不是我的安排方式很愚蠢，或者我缺乏纯 MySQL。

任何帮助都会非常有帮助。

编辑：

这是来自的示例行`rental_periods`：

```
INSERT INTO `rental_periods` (`id`, `prop_id`, `type`, `name`, `from`, `to`, `currency`, `so`, `wk`, `wepn`, `wdpd`, `minstay`, `maxstay`, `monthly`, `extra`, `pppn`, `pn`, `pppw`, `breakfast`, `annual`) 
VALUES (64732, 32, 'selfcatered', 'Summer', '2012-06-01', '2012-08-31', NULL, 1, '350', '60', '100', '', '', '', '', NULL, NULL, NULL, NULL, 0); 
```

我希望该函数`350`从每周列中返回。但是，如果`wepn`是 30，而不是 60，我希望`210`会回来（根据 7 * wepn 价格计算）。

在 SP 中测试的代码：

```
DELIMITER $$

CREATE procedure tmp_get_price(myid INT)

 BEGIN

    DECLARE done INT DEFAULT 0;

    DECLARE price decimal(30,3) default 100000.000;

    DECLARE id INT;
    DECLARE prop_id INT;
    DECLARE type enum('catered','selfcatered');
    DECLARE name varchar(45);

    DECLARE `from` date;
    DECLARE `to` date;

    DECLARE currency varchar(45);
    DECLARE so tinyint;
    DECLARE wk decimal(30,3);
    DECLARE wepn  decimal(30,3);

    DECLARE wdpd  decimal(30,3);
    DECLARE monthly  decimal(30,3);
    DECLARE extra  decimal(30,3);
    DECLARE pppn  decimal(30,3);
    DECLARE pn  decimal(30,3);

    DECLARE pppw  decimal(30,3);
    DECLARE minstay int;
    DECLARE maxstay int;
    DECLARE breakfast varchar(45);  
    DECLARE annual TINYINT;

    DECLARE cur1 CURSOR FOR SELECT id, prop_id, type, name, `from`, `to`, currency, so, wk, wepn, wdpd, minstay, maxstay, monthly, extra, pppn, pn, pppw, breakfast, annual FROM rental_periods WHERE prop_id = myid;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;

    OPEN cur1;

    REPEAT
    FETCH cur1 INTO id, prop_id, type, name, `from`, `to`, currency, so, wk, wepn, wdpd, minstay, maxstay, monthly, extra, pppn, pn, pppw, breakfast, annual;

    IF NOT done THEN
    IF (type = "selfcatered") THEN

        IF (wdpd > 0 AND (wdpd * 7) < price) THEN
            SET price = wdpd * 7;
        END IF;

        IF (wepn > 0 AND (wepn * 7) < price) THEN
            SET price = wepn * 7;
        END IF;

        IF ((wdpd > 0 AND wepn > 0) AND
            (wdpd * 5 + wepn * 2) < price) THEN
            SET price = wdpd * 5 + wepn * 2;
        END IF;

        IF (monthly > 0 AND (monthly / (52 / 12)) < price) THEN
            SET price = monthly / (52 / 12);
        END IF;

        IF (wk > 0 AND wk < price) THEN
            SET price = wk;
        END IF;
    ELSE
        IF (pppn > 0 AND (pppn * 7) < price) THEN
            SET price = pppn * 7;
        END IF;

        IF (pn > 0 AND (pn * 7) < price) THEN
            SET price = pn * 7;
        END IF;

        IF (pppw > 0 AND (pppw) < price) THEN
            SET price = pppw;
        END IF;
    END IF;

    END IF;
    UNTIL done END REPEAT;

    CLOSE cur1;

    select price;
END $$ 
```

仍然不起作用... :( 我是不是很愚蠢...看不出为什么这行不通...？！？得到期间...经历每一个...如果价格不那么设定它...。选择价格....?!?

如果我在...中放置多个选择，例如在光标内。只有最底层的一个会触发并返回 100000.000

我已将所有值字段设置为小数，并且不允许 NULL ...

当我出错时有什么想法......？还尝试通过插入日志表进行调试...从不触发..？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:37:25.130

需要阅读更多关于游标的信息，这是一个很好的起点......

[http://www.kbedell.com/2009/03/02/a-simple-example-of-a-mysql-stored-procedure-that-uses-a-cursor/](http://www.kbedell.com/2009/03/02/a-simple-example-of-a-mysql-stored-procedure-that-uses-a-cursor/)

# javascript - 如果全局变量不存在，如何初始化它？

> ID：10850536
> 
> 赞同：5
> 
> 时间：2012-06-01T12:45:08.497
> 
> 标签：javascript

我在我的页面中多次加载相同的脚本。由于异步/加载功能，我在决定在我的网站中首先/之后加载哪个文件时遇到了一些麻烦。

所以，我想放一个全局变量来计算，当脚本加载时，它们的顺序。

所以 myScript.js 将从以下内容开始：

```
(function () {
    var privateNumberScriptLoaded;

    if (numberScriptLoaded === undefined) {
        numberScriptLoaded = 0;
    }
    else {
        numberScriptLoaded = numberScriptLoaded + 1;
    }

    privateNumberScriptLoaded = numberScriptLoaded;
    console.log(privateNumberScriptLoaded);
})(); 
```

但是当我加载它时：

```
<script src="http://www.mywebsite.com/widget/myScript.js?type=normal" type="text/javascript"></script>
<script src="http://www.mywebsite.com/widget/myScript.js?type=rotation" type="text/javascript"></script> 
```

我得到（两次）`numberScriptLoaded is not defined`。

我该如何解决这个麻烦？事实上，如果它不存在，我会在我的网站中“创建”一个全局变量。比增加它并存储在每个脚本的“私有”变量中，这样我就可以保存每个脚本的执行顺序。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-01T13:15:04.093

[*目前，您的脚本成为隐式全局恐怖的*](http://blog.niftysnippets.org/2008/03/horror-of-implicit-globals.html)牺牲品。我建议不要这样做。

你有三个选择：

1.  由于所有全局变量最终都作为属性 on `window`，您可以`window`显式使用：

    ```
    if (!window.numberScriptLoaded) {
        window.numberScriptLoaded = 1; // 1, not 0
    }
    else {
        ++window.numberScriptLoaded;
    } 
    ```

    与没有`window.`前缀的代码不同，它不会抛出 a `ReferenceError`，因为在对象上查找属性与解析独立标识符的工作方式不同。

    [现场演示](http://jsbin.com/uyokiv)| [演示页面源](http://jsbin.com/uyokiv/edit)| [它加载的脚本来源](http://jsbin.com/isevaq/edit)

2.  始终将`var numberScriptLoaded;`（没有初始化程序）放在脚本中的全局范围内，例如在您的范围函数之外：

    ```
    var numberScriptLoaded; // No initializer (no = 0 or anything) 
    ```

    在第一次加载时，这将创建变量；在随后的加载中，这是一个空操作。然后你可以做到这一点没有`ReferenceError`：

    ```
    if (!numberScriptLoaded) {
        numberScriptLoaded = 1; // 1, not 0
    }
    else {
        ++numberScriptLoaded;
    } 
    ```

    [现场演示](http://jsbin.com/uyokiv/2)| [演示页面源](http://jsbin.com/uyokiv/2/edit)| [它加载的脚本来源](http://jsbin.com/isevaq/2/edit)

3.  使用`typeof`. 如果您采用`typeof`不存在的 a 变量，则不会得到 a `ReferenceError`; 你明白了`"undefined"`。然后你可以通过前缀创建它（这样你就不会成为*The Horror 的*`window.`牺牲品）。

     *```
    if (typeof numberScriptLoaded === "undefined") {
        // Assigning to window.numberScriptLoaded creates the global
        window.numberScriptLoaded = 1; // 1, not 0
    }
    else {
        ++numberScriptLoaded;
    } 
    ```

    [现场演示](http://jsbin.com/uyokiv/3)| [演示页面源](http://jsbin.com/uyokiv/3/edit)| [它加载的脚本来源](http://jsbin.com/isevaq/3)* 

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T12:47:37.477

你应该使用`typeof`

```
if (typeof numberScriptLoaded === 'undefined') { 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T12:48:10.813

尝试

```
if ( 'undefined' === typeof numberScriptLoaded ) {
    numberScriptLoaded = 0;
} else {
    numberScriptLoaded = numberScriptLoaded + 1;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-18T23:07:22.163

```
myGlobalVar = typeof myGlobalVar == "undefined"? "New Value" : myGlobalVar;
myGlobalVar = typeof myGlobalVar == "undefined"? "Totally New Value" : myGlobalVar;
alert(myGlobalVar); 
```

[http://jsfiddle.net/8gnuwaah/2/](http://jsfiddle.net/8gnuwaah/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T12:50:13.850

全局变量是`window`对象的直接属性。因此，如果您想从任何地方初始化全局变量，只需键入：

```
window.variableName = "what_ever_you_want" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-01T12:55:33.960

作为最佳实践并为防止此类错误，所有变量都应在用于脚本之前进行初始化。

你应该把：

```
var numberScriptLoaded; 
```

就在您关闭之前，错误不会发生。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-09T11:15:28.863

如果您打算使用`window`来存储全局，那么您可以在一行中完成：

```
window.numberScriptLoaded  = (window.numberScriptLoaded  || 0) + 1 
```*

# android - 在 findbyView 之后，ImageView 仍然为空

> ID：10850540
> 
> 赞同：0
> 
> 时间：2012-06-01T12:45:33.990
> 
> 标签：android, android-layout, android-listview, nullpointerexception

嘿，我试图让一个列表工作，在这种情况下，我有一个 xml 定义的项目，我在扩展的 ArrayAdapter 中膨胀。但是在我膨胀了 xml 之后，当我尝试抓取 imageview 时，它会通过 findviewbyid 返回 null ...这是该项目的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >
    <TextView 
        android:id="@+id/product_item_textview"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="if no image avail show this"
        android:visibility="gone"/>
    <ImageView 
        android:id="@+id/product_item_imageview"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:visibility="visible"
        />

</LinearLayout> 
```

实例化项目的方法：

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        SimpleListItem item= items.get(position);
        LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View v = vi.inflate(R.layout.product_item, null);
        if(item.getPicture()!=null)
        {
            ImageView imgVw = (ImageView) findViewById(R.id.product_item_imageview);
            String picturePath = item.getPicture();
            Bitmap picture = ImageManager.get(getBaseContext(), picturePath);
            imgVw.setImageBitmap(picture);
        } else {
            TextView txtVw = (TextView) findViewById(R.id.product_item_textview);
            txtVw.setText(item.getText());
            txtVw.setVisibility(View.VISIBLE);
        }
        return v;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T12:47:30.707

它是，

```
 ImageView imgVw = (ImageView) v.findViewById(R.id.product_item_imageview); 
```

也一样`TextView`，

```
 TextView txtVw = (TextView) v.findViewById(R.id.product_item_textview); 
```

用于`View v`获取`ImageView`和`TextView`从膨胀的 xml 文件中获取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T12:48:56.813

//你在视图 v 中膨胀布局，所以你需要通过

```
ImageView imgVw = (ImageView)v. findViewById(R.id.product_item_imageview);

TextView txtVw = (TextView)v. findViewById(R.id.product_item_textview); 
```

# php - 如何在 XAMPP 上测试响应式网页设计？

> ID：10850545
> 
> 赞同：0
> 
> 时间：2012-06-01T12:46:04.177
> 
> 标签：php, testing, responsive-design, xampp, device

有谁知道是否有办法在 XAMPP 等本地开发环境中测试响应式网页设计？我已经购买了几个响应式主题并在 XAMPP 上本地设置了它们，但我还没有找到一种方法来测试它并确保它们在所有设备上都能正常工作。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T12:53:04.697

您可以使用这些站点来测试您的设计。这些站点将允许您根据特定设备的大小调整浏览器的大小，并允许您在其中浏览您的站点。

1.  [http://www.responsinator.com/](http://www.responsinator.com/)
2.  [http://resizemybrowser.com/](http://resizemybrowser.com/)
3.  [http://www.jamus.co.uk/demos/rwd-demonstrations/](http://www.jamus.co.uk/demos/rwd-demonstrations/)
4.  [http://codebomber.com/jquery/resizer/](http://codebomber.com/jquery/resizer/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T14:01:59.473

弗里特科特是对的。这是我在mac上所做的：

*   在 Chrome 中安装 Resizer 扩展
*   启动 MAMP
*   启动 chrome，打开我的本地页面（localhost:8888/the-path-to-your-page）
*   单击 Resizer 扩展图标

等等瞧！

可能听起来很傻，但我也在努力寻找一种简单的方法来测试本地的响应式设计，所以我希望这会对某人有所帮助。当然它仅限于 Chrome，但这是一个开始！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-05T17:15:32.387

有一个名为[ish](http://bradfrostweb.com/demo/ish/)的视口调整大小工具。[你](https://github.com/bradfrost/ish.)可以在 gitHub 上找到它。下载它并将提取的文件夹放在您的 localhost/htdocs 中。然后从您的浏览器调用它（例如 localhost/ish）。在 url 框（页面左上角）中，将 URL 放入您要检查的本地主机上的站点。

是的。是另一个视口大小调整工具。它被称为“ish”。因为它专注于一般范围（小型。中型。大型。），而不是流行的设备宽度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T12:48:52.460

尝试调整浏览器的大小。如果您的网站发生变化，它是响应式的。

如果您想在移动设备（例如手机或平板电脑）上对其进行测试。您必须将其上传到服务器或设置具有 Internet 访问权限的本地服务器（也许它仅适用于移动浏览器中的 192.168.1.1 IP 地址）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-11T18:44:37.053

这是一个测试响应性的小工具，专门用于测试 Bootstrap 断点：

[http://deneskellner.com/reframe](http://deneskellner.com/reframe)

享受 ：）

# iphone - 特定事件后的 iphone 空闲计时器检查

> ID：10850546
> 
> 赞同：2
> 
> 时间：2012-06-01T12:46:04.053
> 
> 标签：iphone, objective-c, nstimer, uiapplication, idle-timer

这里正在开发一个应用程序，我应该在用户登录后启动这个空闲计时器事件，我应该在用户注销应用程序后停止这个事件。

在这里，我实现了一个逻辑，例如子类化 UIApplication 并检测触摸事件。

但是这里的问题是这只会在用户点击某些东西时起作用。这种唱歌和退出涉及网络服务。所以如果签名失败，我必须停止这个空闲计时器。目前正在检查用户是否登录等条件，然后调用空闲超出方法。

所以在这里我必须在用户签名后手动调用**sendEvent:uiEvent**方法。是否有任何可能的方法来调用此默认方法来启动空闲时间检查。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:23:09.740

要手动调用 sendEvent，请执行以下操作

```
[[UIApplication sharedApplication] sendEvent:YOUR_EVENT] 
```

# iphone - 将数组中的数据添加到选择器组件

> ID：10850549
> 
> 赞同：0
> 
> 时间：2012-06-01T12:46:13.303
> 
> 标签：iphone, objective-c, cocoa-touch, ios4, nsarray

在我的应用程序中，我使用选择器控件，

我想从数组中获取数据到我的选择器视图，

数组是这样来的，

```
 PickerArray:(
    {
    CustEmail = test@test.com;
    CustFirstName = ABC;
    CustID = 1;
    CustLastName = Test;
    CustPhoneNo = 12345;
    } 
```

我的选择器有一个组件，

```
 - (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
NSString *title;

title = [[PickerArray objectAtIndex:row]valueForKey:@"CustFirstName"];
NSLog(@"title:%@",title);

return title; 
```

}

有了这个我只得到一个值如果我想在选择器组件的一行中获取 CustFirstName 和 Email。喜欢**ABC test@test.com；**

请任何人建议我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T12:52:52.590

您可以使用`stringWithFormat:`来构造复合字符串，如下所示：

```
title = [NSString stringWithFormat:@"%@ %@"
,   [[PickerArray objectAtIndex:row]valueForKey:@"CustFirstName"]
,   [[PickerArray objectAtIndex:row]valueForKey:@"CustEmail"]
]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T12:52:52.400

根据要求编写字符串：

```
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component 
{
  NSString *title = [NSString stringWithFormat:@"%@ %@",[[PickerArray objectAtIndex:row]valueForKey:@"CustFirstName"],[[PickerArray objectAtIndex:row]valueForKey:@"CustEmail"]];
 NSLog(@"title:%@",title);

 return title;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T12:56:01.263

尝试

```
title = [NSString stringWithFormat:@"%@ %@",[[PickerArray objectAtIndex:row]valueForKey:@"CustFirstName"],[[PickerArray objectAtIndex:row]valueForKey:@"CustEmail"]]; 
```

# java - jbilling安装：tomcat无法运行

> ID：10850552
> 
> 赞同：2
> 
> 时间：2012-06-01T12:46:25.410
> 
> 标签：java, tomcat

我在我的系统中安装了 jbilling 应用程序。在 jbilling 站点下载 jbilling 最新版本。当我运行 jbilling 启动批处理文件时，我遵循安装过程，但 tomcat 无法运行。如何解决这个问题？

下面给出一个[程序](http://dev.jbilling.com/documentation/users/installation/windows)。我在最后一步遇到问题..tomcat 窗口未打开。

> 1.  下载并安装 Java。您只需要运行时环境 (JRE)。
>     
>     
> 2.  下载最新版本的 jBilling。请注意：确保您下载的是二进制包，而不是源代码。源具有后缀“-src”。示例：下载 jbilling-1_0_0.zip，而不是 jbilling-1_0_0-src.zip。
>     
>     
> 3.  解压您下载的 jBilling 文件 (jbilling-3_0_0-RC2)。解压缩文件： 3.1 右键单击​​压缩文件。将出现一个菜单。3.2 选择菜单选项：全部提取。一个具有相同标题 (jbilling-3_0_0-RC2) 的新解压缩文件将出现在您的下载文件夹中。
>     
>     
> 4.  将解压后的 jBilling 文件从 Downloads 文件夹复制并粘贴到 C:drive 的 Applications 文件夹中。请注意：如果您的 C:drive 中没有 Applications 文件夹，则需要先创建一个，然后再进行第 5 步。
>     
>     
> 5.  打开计算机的命令外壳程序。5.1 单击开始菜单。5.2 在搜索框中输入文本，cmd。该程序将出现在开始菜单上。5.3 点击程序将其选中。命令外壳程序窗口将打开。
>     
>     
> 6.  使用命令外壳程序启动 jBilling。6.1 键入 cd.. 进入 Command Shell 程序，然后按 Enter 键。6.2 重复步骤 6.1。按回车键。6.3 键入 cd 应用程序。按回车键。6.4 键入 cd jbilling-community-3.0-rc2。按回车键。6.5 键入 cd bin。按回车键。6.6 键入startup.bat。按回车键。Tomcat 窗口将出现在您的屏幕上。6.7 等待Tomcat完成启动。完成后，文本：INFO: Server startup in (a number) ms，将出现在 Tomcat 窗口中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:11:28.500

服务器在 jre\bin\server\jvm 中查找 jvm。但是jre没有服务器。它只有客户端文件夹。创建服务器文件夹以从客户端复制jvm.dll并粘贴它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:36:42.473

可能是Tomcat窗口不需要弹出，命令运行在你执行的同一个窗口中吗？您实际上应该检查日志，了解它们打印的内容。窗口是否说tomcat在那么几秒钟内启动？

# php - 公开访问服务器的 phpSysInfo - 安全吗？

> ID：10850553
> 
> 赞同：0
> 
> 时间：2012-06-01T12:46:29.707
> 
> 标签：php, linux, security

不限制对 linux 服务器的“phpsysinfo”系统信息页面的访问通常安全吗？有一些关于服务器软件、Linux 发行版运行和 HDD 的信息（如果有人想破解系统，这可能会很有帮助），但是 phpSysInfo 的 cod 安全吗？你会建议限制访问吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T13:05:01.920

要回答您的问题，没有什么是 100% 安全的。出于这个原因，我会将对 phpSysInfo 的访问限制为需要它的人。

我很好的安全提示：始终限制只有需要相应功能的人才能访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-03T15:07:03.947

多年后回来进一步澄清这个问题。虽然 Dwarth 的[回答](https://stackoverflow.com/a/10850871/1306158)在一般情况下是正确的，但 PHPSysInfo在某些情况下是完全*危险的。*

这可能不是那么明显 - 是的，显示硬件信息已经被认为是不安全的，但在许多情况下可能没问题。然而，由于 PHPSysInfo 显示*完整的 mtab 输出*，它还包括诸如*挂载磁盘的密码（*如果有的话）。

您可能希望一开始就避免这种情况，但如果您无法完整显示已安装设备的任何内容，则会泄漏此信息。

# list - Scala - List.isDefinedAt() 行为奇怪

> ID：10850556
> 
> 赞同：0
> 
> 时间：2012-06-01T12:46:32.353
> 
> 标签：list, scala

据我所知，该`isDefinedAt`方法应该像类型`contains`方法一样工作。但奇怪的是，它的行为不同——它不检查元素是否重复出现。

```
val randomizer = new Random

def next(acc: List[Int], n: Int): List[Int] = {
   if(n > 0) {
      val r = randomizer.nextInt(15)
      println("generating, r=" + r + " is defined=" + acc.isDefinedAt(r))
      if(!acc.isDefinedAt(r)) next(r :: acc, n - 1) // check for NO coincidence
      else next(acc, n)
   } else acc
}

println("indices = " + next(List[Int](), 6)) 
```

当然，我可以为此使用 Sets 而不是列表，但是，为什么它会这样呢？

我得到的输出就像

```
generating, r=8 is defined=false
generating, r=13 is defined=false
generating, r=2 is defined=false
generating, r=8 is defined=false
generating, r=9 is defined=false
generating, r=3 is defined=true
generating, r=2 is defined=true
generating, r=7 is defined=false

indices = List(7, 9, 8, 2, 13, 8) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T13:03:03.417

该`isDefineAt`方法告诉您是否为给定参数定义了给定的部分函数，​​即当您使用给定参数调用它时它是否会给您一个值。

由于列表被视为从其索引到其值的部分函数，`isDefinedAt`​​因此将告诉您给定索引是否对列表有效。它不会告诉您给定值是否包含在列表中，这就是`contains`目的。

请注意，尽管您调用了 list `indices`，但 7、9、8、2、13 和 8 是该列表的*值*。该列表的索引是 0、1、2、3、4 和 5。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-01T13:06:06.667

你误会了的意思`isDefindAt`，那是不行的`contains`。正如文档所说：

> def isDefinedAt(x: Int): 布尔值
> 
> 测试此列表是否包含给定索引。
> 
> 返回
> 
> ```
> true if this list contains an element at position idx, false otherwise. 
> ```

所以`isDefinedAt(x)`等于`0<= x && x< list.size`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-01T21:45:11.450

所做`isDefinedAt`的只是告诉您函数是否不接受参数。也就是说，如果`isDefinedAt`返回`false`，那么您知道该函数不涵盖该值。对于`true`，它可能会覆盖该值或抛出异常。

在`List`(and all `Seq`)的特定情况下，`isDefinedAt(i)`如果 ，则返回 true `0 <= i < list.size`，否则返回 false，并且`list(i)`仅在返回 false 时抛出异常`isDefinedAt(i)`。

无论如何，让我们尝试一下：

```
scala> val list = List("a", "b", "c")
list: List[String] = List(a, b, c)

scala> list.isDefinedAt(0)
res0: Boolean = true

scala> list(0)
res1: String = a

scala> list.isDefinedAt(-1)
res3: Boolean = false

scala> list(-1)
java.lang.IndexOutOfBoundsException: -1

scala> list.isDefinedAt(2)
res5: Boolean = true

scala> list(2)
res6: String = c 
```

# jquery - 在日历选择器中仅启用我想要的日期

> ID：10850560
> 
> 赞同：1
> 
> 时间：2012-06-01T12:46:41.547
> 
> 标签：jquery, android, calendar

我想在 android 2.3 中显示一个日历小部件，但我只想将某些日子设置为可点击。

我已经搜索了任何方法来做到这一点，但没有找到任何东西，也没有找到任何可以做到这一点的库。

我能想到的唯一其他方法是包含一个带有 jquery 日历的 Webview，但我不知道如何将日期发送到 Webview。

请问有什么帮助吗？

# java - java - 如何在一个方法中等待另一个方法在java中被克服？

> ID：10850563
> 
> 赞同：1
> 
> 时间：2012-06-01T12:46:54.153
> 
> 标签：java

我有一组方法说`m1`, `m2`, `m3`, `m4`. 每个都需要等待上一个方法完成。如果我打电话`m3`，它必须等待`m2`。我想为每种方法使用标志，如果完成标记它。但是对于通知，如果`m1`说`notify()`，我只希望这个通知`m2`，而不是其他等待方法。

我有一个组件`A`, `m1`,作为输入方法和`m2`输出方法。一旦发生，它将调用产生输出。但是, ,必须按顺序执行，并且可以从不同的类中调用。必须有等待和相应的信号。`m3``m4``m3``m4``m1``m2``m3`

我该如何实施呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:57:47.697

BlockingQueues 可能会有所帮助，但如果您使用的是 ThreadPoolExecutor，则不会。ThreadPoolExecutor 没有提供开箱即用的解决方案来阻止队列已满（这是执行程序的一部分，不是队列的功能，因为执行程序使用 BlockingQueue.offer 永远不会阻塞，如果队列是完全使用 RejectedExecutionHandler）。您可以实现自己的 RejectedExecutionHandler 阻塞，直到它可以将东西放入队列中，但这是一种使用锁的快速确定方法：

```
ReentrantLock l1 = new ReentrantLock();
ReentrantLock l2 = new ReentrantLock();
ReentrantLock l3 = new ReentrantLock();

l1.lock();
l2.lock();
l3.lock();

// pass l1,l2,l3 along to the threads running these methods, so they are available to the methods:

public void m1() {
 try {
  // do stuff
 }
 finally {
   l1.unlock();
 }
}

public void m2() {
 l1.lock();
 try {
  // do stuff
 }
 finally {
   l2.unlock();
 }
}

public void m3() {
 l2.lock();
 try {
  // do stuff
 }
 finally {
   l3.unlock();
 }
}

public void m4() {
 l3.lock();
 // do stuff
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T14:39:15.817

你不想要锁，但屏障： m(n + 1) 必须等到 m(n) 被调用。下面的代码假设只有一个序列或方法调用（并且 m1/2/3 从不同的线程调用或在同一线程上以正确的顺序调用，否则您将永远等待闩锁）。如果它可以发生多次，则需要重新设置（或者您可以使用 Phaser 来获得灵感）。

```
private CountDownLatch m2latch = new CountDownLatch(1);
private CountDownLatch m3latch = new CountDownLatch(1);

public void m1() {
  // handle input
  m2latch.countDown();
}

public void m2() {
  m2latch.await();
  // handle input (m1 has been called)
  m3latch.countDown();
}

public void m3() {
  m3latch.await();
  // do output (both m1 + m2 have been called)
} 
```

然而，这有点奇怪的设计，因为你想按顺序做，你应该只在输出方法中完成所有工作，它会等到所有输入都输入。

```
 private CountDownLatch inputLatch = new CountDownLatch(3);
 private Object[] input = new Object[3];

 public void setInput(int i, Object data) {
   input[i] = data;
   inputLatch.countDown(); // perhaps better check all input set
 }

 public Object processInput() {
   inputLatch.await();
   return process(input); // process in sequence
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T12:54:27.347

我会将计数器设置为 int，并且每种方法都必须等到计数器达到它们的数字才能使用。这样，每个方法只需要增加计数器，您可以稍后插入更多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T12:56:13.297

一个简单的解决方案是只使用四个不同的锁对象。（或者确实在同一个线程中运行它们，但这可能不是你想要的。）

有了更多细节，可能会有更优雅的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T13:04:00.020

我的建议是那个，取决于我是否正确理解了这个问题：

```
public void m4() {
    m3();
    do something;
}

public void m3() {
    m2();
    do something;
}

public void m2() {
   m1();
   do something;
}

public void m1() {
   do something;
} 
```

# xml - 如何使用预定义的规则对元素进行排列和分组？

> ID：10850564
> 
> 赞同：0
> 
> 时间：2012-06-01T12:46:57.633
> 
> 标签：xml, xslt

再会！

我正在尝试构建一个 xsl 转换文件来执行以下操作：

有一个元素有一堆 Characteristic 类型的子元素。它们中的每一个都有其唯一的名称。我还有一个列表，描述了一些名称和某个命名特征集（称为数据集）之间的逻辑连接：

CharacteristicName : 数据集名称
−−−−−−−−−−−−−−−−−−−−−−−−−−−
Att1_DS1 : DS1
Att2_DS1 : DS1
Att1_DS2 : DS2
Att2_DS2 : DS2

我必须转换 xml 以便主要元素应该获得 type 的新元素`<Dataset>`。如果列出的特征名称出现在源文档中，则应显示这些具有表中 id 的数据集。然后将相应的特征复制到这些数据集元素/

如果某些特征名称未在表中列出，则应将其放置在 ID 为“其他”的数据集中

源 XML：

```
<Object>
    <ID>Obj1</ID>

    <!--DS1-->     
    <Characteristic>
        <Name>Att1_DS1</Name>
        <Value>25</Value>
    </Characteristic>

    <!--DS2-->
    <Characteristic>
        <Name>Att1_DS2</Name>
        <Value>25</Value>
    </Characteristic>

    <!--DS1-->  
    <Characteristic>
        <Name>Att2_DS1</Name>
        <Value>ABC</Value>
    </Characteristic>       

    <!--DS2-->
    <Characteristic>
        <Name>Att2_DS2</Name>
        <Value>ABC</Value>
    </Characteristic>   

            <!--Other-->
    <Characteristic>
        <Name>Att3_NN</Name>
        <Value>25</Value>
    </Characteristic>   

</Object> 
```

它应该转换为：

```
<Object>
    <ID>Obj1</ID>

    <Dataset id="DS1">
        <Characteristic>
            <Name>Att1_DS1</Name>
            <Value>25</Value>
        </Characteristic>
        <Characteristic>
            <Name>Att2_DS1</Name>
            <Value>ABC</Value>
        </Characteristic>
    </Dataset>

    <Dataset id="DS2">
        <Characteristic>
            <Name>Att1_DS1</Name>
            <Value>25</Value>
        </Characteristic>
        <Characteristic>
            <Name>Att2_DS1</Name>
            <Value>ABC</Value>
        </Characteristic>
    </Dataset>

    <Dataset id="Other">
        <Characteristic>
            <Name>Att3_NN</Name>
            <Value>25</Value>
        </Characteristic>
    </Dataset>

</Object> 
```

你能帮我做这些吗？任何提示或想法我应该朝哪个方向移动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:13:07.977

**这种转变**：

```
<xsl:stylesheet version="1.0"
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
     xmlns:my="my:my" exclude-result-prefixes="my">
     <xsl:output omit-xml-declaration="yes" indent="yes"/>
     <xsl:strip-space elements="*"/>

      <my:datasets>
       <ds>
         <id>DS1</id>
         <n>Att1_DS1</n>
         <n>Att2_DS1</n>
       </ds>
       <ds>
         <id>DS2</id>
         <n>Att1_DS2</n>
         <n>Att2_DS2</n>
       </ds>
       <ds>
         <id>other</id>
         <n>Att3_NN</n>
       </ds>
      </my:datasets>

      <xsl:variable name="vDS" select="document('')/*/my:datasets/*"/>

      <xsl:template match="/*">
       <Object>
         <xsl:copy-of select="ID"/>

         <xsl:apply-templates select=
            "$vDS[n = current()/Characteristic/Name]">
          <xsl:with-param name="pChars" select="Characteristic"/>
         </xsl:apply-templates>
       </Object>
      </xsl:template>

      <xsl:template match="ds">
       <xsl:param name="pChars"/>
        <Dataset id="{id}">
         <xsl:copy-of select="$pChars[Name = current()/n]"/>
        </Dataset>
      </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<Object>
    <ID>Obj1</ID>

    <Characteristic>
        <Name>Att1_DS1</Name>
        <Value>25</Value>
    </Characteristic>

    <Characteristic>
        <Name>Att1_DS2</Name>
        <Value>25</Value>
    </Characteristic>

    <Characteristic>
        <Name>Att2_DS1</Name>
        <Value>ABC</Value>
    </Characteristic>

    <Characteristic>
        <Name>Att2_DS2</Name>
        <Value>ABC</Value>
    </Characteristic>

    <Characteristic>
        <Name>Att3_NN</Name>
        <Value>25</Value>
    </Characteristic>
</Object> 
```

**产生想要的正确结果**：

```
<Object>
   <ID>Obj1</ID>
   <Dataset id="DS1">
      <Characteristic>
         <Name>Att1_DS1</Name>
         <Value>25</Value>
      </Characteristic>
      <Characteristic>
         <Name>Att2_DS1</Name>
         <Value>ABC</Value>
      </Characteristic>
   </Dataset>
   <Dataset id="DS2">
      <Characteristic>
         <Name>Att1_DS2</Name>
         <Value>25</Value>
      </Characteristic>
      <Characteristic>
         <Name>Att2_DS2</Name>
         <Value>ABC</Value>
      </Characteristic>
   </Dataset>
   <Dataset id="other">
      <Characteristic>
         <Name>Att3_NN</Name>
         <Value>25</Value>
      </Characteristic>
   </Dataset>
</Object> 
```

# regex - 需要一些帮助来改进我的正则表达式

> ID：10850566
> 
> 赞同：0
> 
> 时间：2012-06-01T12:47:05.360
> 
> 标签：regex

```
^(\w+) - (\d+). (.+) \((\d+)\) \[(\w+)] 
```

我创建了以下正则表达式来匹配我用来存储音乐收藏的目录模式。

目录结构的一般模式是这样的

```
artist - albumnr. albumname (year) [quality] 
```

我正在尝试将艺术家、专辑名称、年份和质量分组。但是，我想清理专辑名称并删除括号内的任何内容或破折号后出现的任何字符串。

例如

*   `albumname -blahblah (remastered)`- 只会在第三组比赛中返回专辑名称
*   `albumname (remastered)`- 仍然会返回专辑名称
*   `albumname`- 即使结果中没有 - 或 backets，正则表达式仍应能够返回专辑名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:22:28.807

这个将匹配`albumname -blahblah (remastered)`，`albumname (remastered)`但不匹配`albumname (remastered) -blahblah`：

```
^(\w+) - (\d+)\. (.+?) ?(?:-\w+)? ?(?:\(.*?\))? \((\d+)\) \[(\w+)\] 
```

[在这里](http://rubular.com/r/PiHD22n6lt)测试

如果你也想匹配`albumname (remastered) -blahblah`

```
^(\w+) - (\d+)\. (.+?) ?(?:-\w+)? ?(?:\(.*?\))? ?(?:-\w+)? \((\d+)\) \[(\w+)\] 
```

# templates - JBoss 外部的速度模板路径

> ID：10850569
> 
> 赞同：1
> 
> 时间：2012-06-01T12:47:22.970
> 
> 标签：templates, jboss, velocity

我在 JBoss AS 7.1 中部署了一个 ear 文件，但在设置速度模板目录时遇到了一些麻烦。理想的做法是在 JBoss 外部的目录中操作这些文件，在我的 .properties 文件中进行配置，而不是使用类路径资源加载器。

有没有什么好方法可以使用文件资源加载器，例如在 jboss 上下文之外操作我的模板？

谢谢，

——罗德里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:52:12.727

当然; 设置`resource.loader`和`file.resource.loader.class`属性：

```
resource.loader = file
file.resource.loader.class = org.apache.velocity.runtime.resource.loader.FileResourceLoader 
```

然后为 设置适当的属性`FileResourceLoader`：

```
file.resource.loader.path = /opt/templates
file.resource.loader.cache = true
file.resource.loader.modificationCheckInterval = 2 
```

取自[Velocity Dev Guide](http://velocity.apache.org/engine/releases/velocity-1.5/developer-guide.html)的[配置资源加载器部分](http://velocity.apache.org/engine/releases/velocity-1.5/developer-guide.html#configuring_resource_loaders)。

# android - Android：Facebook SDK 在底部发布位置信息

> ID：10850576
> 
> 赞同：1
> 
> 时间：2012-06-01T12:47:41.870
> 
> 标签：android, facebook, post, sdk, location

我正在尝试使用 Facebook SDK 从我的应用程序中集成发布到用户墙。简单发布没问题，但我正在尝试添加用户实际所在的位置（在帖子底部的时间后面）。

有任何想法吗？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:22:25.700

这很简单，每当您对 Graph API 进行 POST 调用时，`https://graph.facebook.com/me/feed`都应该包含一个参数`place`，该参数的值是与地点关联的页面 ID。这显示在[Graph API 用户](https://developers.facebook.com/docs/reference/api/user/#posts)文档中。

您可以使用[Graph API 搜索](https://developers.facebook.com/docs/reference/api/#searching)来定位指定位置附近的任何页面 ID，方法是使用如下所示的 Graph API 调用：

`https://graph.facebook.com/search?type=place&center=37.76,-122.427&distance=1000`

`center`纬度和经度在哪里，并`distance`限制该地点与该中心的距离。

# windows-8 - 如何在 Metro App 中嵌入办公文档？

> ID：10850579
> 
> 赞同：0
> 
> 时间：2012-06-01T12:47:57.530
> 
> 标签：windows-8, ms-office

是否可以在 Metro 应用程序中嵌入办公文档而无需手动解析？我正在考虑预览，甚至是对它进行小改动的可能性。我不是要从外部启动它，而是直接在 Metro 应用程序中使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T19:38:11.603

您不能直接嵌入到 Metro 风格的应用程序中。可以使用[Skydrive API](http://msdn.microsoft.com/en-us/library/live/hh826521)和[嵌入文档](http://www.excelmashup.com/)做一些事情，但需要更多的研究。 [这是从 Metro 风格应用程序中使用 Live SDK 的示例](http://code.msdn.microsoft.com/windowsapps/Live-SDK-Windows-Developer-8ad35141)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T20:36:10.530

我只会使用 webview 控制器并用它从 Skydrive 中打开文档。

这样，您可以将文档打开为可编辑或仅显示它。

# ip - 寻找下一跳的地址

> ID：10850580
> 
> 赞同：0
> 
> 时间：2012-06-01T12:48:08.053
> 
> 标签：ip, router

我有下一张桌子：

```
Network adress    NetMask         Next Hop
128.96.166.0      255.255.255.0   1
128.96.166.0      255.255.252.0   2
0.0.0.0           0.0.0.0         3 
```

我想找到路由器将发送到每个跃点的地址范围。例如，地址的 IP：128.96.166.0 将发送到 Hop 1。

我不明白 NetMak 如何帮助我确定它。不是总是会跳到 1 跳吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T12:51:39.133

决定的算法是：

```
If (IP address BitwiseAND NetMask == NetwordAddress) Then
    Forward to Next Hop 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T12:58:41.107

首先，开始以二进制形式读取网络掩码。在这种形式中，网络掩码总是一些 1 后跟 0。网络掩码告诉您相关前缀的长度（以位为单位）（1 表示相关位，0 表示不相关位）。例如，如果您只查看前 24 位，则 128.96.166.1 和 128.96.166.2 将被发送到 Hop1 b/c，这两个地址具有相同的前 24 位，就像网络地址的前 24 位一样。但是地址 128.96.167.1 不会发送到 Hop1，b/c 第 24 位不同。但是 Hop2 的条目有不同的网络掩码。Hop2 的网络掩码表示只查看前 22 位。当仅查看前 22 位时，128.96.167.1 与 Hop2 的网络地址匹配，并且地址为 128.96.167.1 的数据包将通过 Hop2 发送。

进一步：查看前 22 位时，Hop1 和 Hop2 的网络地址匹配 128.96.166.1 和 128.96.166.2。但是，（通常）任何组件都会为 128.96.166.1 和 128.96.166.2 选择 Hop1，因为该规则匹配更多位。这被称为“最长前缀匹配”，并且与“如果有更多匹配位，此跃点将使数据包更接近最终目的地”的想法一致。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T13:09:58.167

这里有一个简单的 ip 子网计算器：http: [//www.subnet-calculator.com/](http://www.subnet-calculator.com/)

# c# - 回发时丢失 DropDownList 值

> ID：10850584
> 
> 赞同：0
> 
> 时间：2012-06-01T12:48:18.750
> 
> 标签：c#, asp.net

我有以下下拉列表：

```
<asp:DropDownList runat="server" ID="ddlShipping" CssClass="shippingMenu" AutoPostBack="true">
    <asp:ListItem Text="3-5 working days (£12.50)" Value="" />
    <asp:ListItem Text="3-5 working days - Pre-Midday (£25)" Value="" />
    <asp:ListItem Text="3-5 working days - Pre-10.30am (£35)" Value="" />
    <asp:ListItem Text="3-5 working days - Pre-9am (£45)" Value="" />
</asp:DropDownList> 
```

在一个空白的 aspx 页面中。当我运行页面并选择一个项目时，它会导致回发，然后总是返回列表中的第一个值。

有谁知道是什么原因造成的。它不是以任何方式进行数据绑定的，实际上这是代码隐藏：

```
public partial class Default4 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
} 
```

它在空白页中的原因只是为了将问题与任何其他代码隔离开来。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T12:50:24.907

所有项目都具有*相同*的（空）值，因此 ASP.NET 无法确定您指的是哪一个。

给他们不同的价值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:51:12.927

看看这个[`SelectedIndexChanged`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.selectedindexchanged)事件。您应该能够从中挑选出价值。

# oracle - 通过 DBMS_JOB.SUBMIT 调用带参数的过程

> ID：10850587
> 
> 赞同：1
> 
> 时间：2012-06-01T12:48:36.680
> 
> 标签：oracle, plsql, dbms-job

我正在开发 Oracle 11gR1

我必须通过 DBMS_JOB.SUBMIT 过程调用一个接受 CLOB 作为输入参数的过程。

这是我的代码：

```
FOR i IN 1 .. lrec_resultset.COUNT LOOP

                    DBMS_JOB.SUBMIT (
                    JOB => job_num,
                    WHAT => 'execute_dsql('' ||lrec_resultset(i).sql_txt || '');');
COMMIT:
END LOOP; 
```

未进行对 execute_dsql 的调用。当我执行包含此 DBMS_JOB 调用的 PL/SQL 块时，我什至没有收到任何错误消息。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:43:16.060

我会做这样的事情：

```
for i in 1 .. lrec_resultset.count loop

      dbms_job.submit (job  => job_num,
                       what => 'execute_dsql(mypkg.get_clob);');

      insert into mytbl values (job_num, lrec_resultset(i).sql_txt);

      commit;

end loop;

create package body mypkg
as
begin

  function get_clob
    return clob
  as

    v_clob clob;
    v_job  number;

  begin

     select sys_context('userenv','bg_job_id') into v_job from dual;

     select myclob
       into v_clob
       from mytbl
      where job_id = v_job;

     return v_clob;

  end get_clob;

end mypkg; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-01T15:31:22.413

你有一个单引号太多太多尝试：

```
WHAT => 'execute_dsql(' ||lrec_resultset(i).sql_txt || ');'); 
```

# file - Magento 中产品的状态如何更改/保存？

> ID：10850589
> 
> 赞同：-3
> 
> 时间：2012-06-01T12:48:42.623
> 
> 标签：file, magento, status, product

我很想知道**Magento 中产品的状态如何更改/保存**？

要求-：

假设在 Magento 中启用了现有产品...现在如果**管理员**从后端禁用特定产品，那么我需要通过 Magento 文件系统中的代码捕获该特定产品的 ID？

那么我可以从**哪里获得 Magento 代码中禁用产品的 ID**呢？相同的文件位置和函数名称是什么？我怎样才能得到那个特定的ID？

请指导我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T22:51:31.657

我认为这里的反对票有点不公平。op 只问一个问题 - 如何在产品保存后获取产品 ID 和状态。

@Sam - 在 Magento 中，您通常不会在代码中找到保存产品的确切点，而是通过创建自定义模块并使用该模块中的 Magento 事件/观察器工具来挂钩事件。

查看本教程，它将指导您完成使用事件/观察者创建模块的过程：http: [//www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method)

与您的问题特别相关：您要查找的事件是`catalog_product_save_after`.

您的活动的 xml 将类似于以下内容：

```
<events>
  <catalog_product_save_after>
    <observers>
      <yourmodule>
        <class>Yourcompany_Yourmodule_Model_Observer</class>
        <method>catalog_product_save_after</method>
      </yourmodule>
    </observers>
  </catalog_product_save_after>     
</events> 
```

您的观察者将与此类似：

```
class Yourcompany_Yourmodule_Model_Observer 
{
    public function catalog_product_save_after($observer)
    {
        $product = $obvserver->getEvent()->getProduct();

        $productStatus = $product->getStatus();
        $productId = $product->getId();
    }
} 
```

注意 - 代码未经测试

# c# - Windows 服务在没有管理员权限的情况下启动和停止

> ID：10850595
> 
> 赞同：7
> 
> 时间：2012-06-01T12:49:05.743
> 
> 标签：c#, .net, windows-services

如何在没有管理员权限的情况下启动和停止窗口服务？

我的应用程序启动应该以与关闭后必须停止的方式相同的方式启动我的服务。我可以使用“服务控制器”来做到这一点

我可以使用管理员权限安装服务，但启动和停止服务不应该询问管理员权限。

谁能告诉我如何使用 c# 实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T13:39:05.567

我发现了授予非管理员用户启动/停止服务的权限的方法。我们可以为我们的服务提供组策略，这样就可以在没有管理员权限的情况下启动/停止。我找到了两种方法来完成这项任务。

方法1：

1.  从“mmc.exe”创建控制台
2.  创建空白安全模板
3.  创建了一个安全数据库来存储策略信息
4.  将服务权限更改为我们要授予权限的用户
5.  应用了新的安全权限（我参考了这个[博客](http://thommck.wordpress.com/2011/12/02/how-to-allow-non-admins-to-start-and-stop-system-services/)）

这种方法效果很好，我在一个虚拟机中创建了两个非管理员用户帐户并设置了管理员帐户的权限，我可以从两个非管理员用户帐户启动和停止服务。然而，这种方法并不是解决问题的完整方法，它涉及很多手动步骤。所以我开始寻找自动化这个过程。结果我找到了方法2

方法 2：使用“Subinacl.exe”授予权限，SubInACL 是一个命令行工具，使管理员能够获取有关文件、注册表项和服务的安全信息，并在用户之间、本地或全局组之间传输这些信息分组，以及从域到域。

我遵循了创建两个非管理员用户帐户并执行命令 SUBINACL /SERVICE \DomainName\MyService /GRANT=DomainName\USERS=TOP 的相同示例，因此这将授予用户启动/停止服务的权限。

# java - 找不到 sun.awt.image.codec 包

> ID：10850599
> 
> 赞同：0
> 
> 时间：2012-06-01T12:49:27.117
> 
> 标签：java

我搜索了很多，但都是徒劳的。我想获取 sun.awt.image.codec.* java 包的源代码。

任何帮助将不胜感激..

谢谢

**编辑** 实际上我必须只使用那个包，它是我工作所必需的。这对我来说是必要的，因为我正在进行性能评估 [我无法更改代码]。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:19:01.837

更新：此代码是专有的，来源不可用。

尝试使用反编译器或编写黑盒性能测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:29:08.533

也许你使用 OpenJDK？安装 oracle jdk 然后尝试。

# php - 从 sql 显示图像

> ID：10850605
> 
> 赞同：2
> 
> 时间：2012-06-01T12:50:04.177
> 
> 标签：php, sql, blob

我创建了一个表格，我通过“BLOB”保存了图像。我需要将这些图像与其他项目一起展示。但我不知道如何在同一页面中同时显示这些图像。这是我的 php 代码，它以表格的形式显示其他内容。同样，我想相应地显示图像。有什么帮助吗？

```
<?php
                $display_query = mysql_query("SELECT * FROM eportal");

                    echo "<table id='pageTable'><thead><tr><th>Item code</th><th>Description</th><th>Cost</th></tr></thead>";
                    echo "<tbody>";
                    while($row = mysql_fetch_array($display_query)){
                        print "<tr><td>".$row['itemid']."</td><td>".$row['description']."</td><td>";
                        print "&#8377;".$row['cost']."</td></tr>";
                    }
                    echo "</tbody>";
                    echo "</table>";
                    mysql_close($connection);

                ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T13:03:40.180

将图像保存到数据库不是一个好主意，但如果您认为需要这种方式，那么您可以从数据库表中检索数据，将其编码为 base64（http://php.net/base64_encode），然后在 HTML以这种方式打印：

```
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==" alt="Red dot"> 
```

使用 PHP 你会写：

```
echo '<img src="data:'.$image_mime_type.';base64,'.base64_encode($image_data_from_db).'" alt="My image alt" />'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:00:08.597

读取 Blob 数据并将其写入具有标题类型图像的文件中。并尝试打印它，它应该显示图像文件。

是的，在数据​​库中保存图像或任何文件确实是一个坏习惯，因为您正在增加数据库大小并且它也会降低性能。我建议您尝试将 Blob 转换为图像，但不要应用于您的工作。只需将图像保存在所需位置，并将其位置路径保存到数据库中，以便下次获取和保存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T13:00:22.117

正如其他人提到的，将图像存储在数据库中通常是一个坏主意。

图像不会在`HTTP`与另一个页面数据相同的响应中传输。

要显示数据库中的图像，您需要实现一个脚本，在给定项目 ID 的情况下，该脚本将读取该字段并发送图像的二进制数据；并在您的表单中提供脚本的路径`<img src="">`：

```
while($row = mysql_fetch_array($display_query)){
    print "<tr><td>".$row['itemid']."</td><td>".$row['description']."</td><td>";
    print "&#8377;".$row['cost']."</td><td>";
    print "<img src=\"image.php?id=".$row['id']."\"></td></tr>";

} 
```

`image.php`是另一个脚本，它输出`image_blob`给定的`eportal.id`. 您还需要在标题中提供正确的大小和 mime 类型。

您最好将图像存储在一个文件中（可由 Web 服务器访问）并将文件的路径存储在数据库中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T13:00:24.320

如果您仍想将图像保存在数据库中，您将需要第二个脚本，该脚本将从数据库中获取这些图像并将它们传递给具有正确标题的浏览器。

```
header("Content-type: image/jpeg");
# 
# Replace this with database read:
# readfile('myimage.jpg'); 
```

此外，您将需要存储您使用的图像类型。JPEG、GIF 或 PNG 文件会有不同的标题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T13:01:51.377

存储 blob 与在磁盘上存储图像文件路径的争论已被反复争论。[Microsoft在此处](http://research.microsoft.com/pubs/64525/tr-2006-45.pdf)提供了一份研究论文，比较了每种方法的优缺点。话虽如此，要将 blob 显示为图像，您需要调用单独的页面并输出标头信息，告诉浏览器存储的图像类型。

例如：

```
connectToDatabase();

$sql = "SELECT image_blob FROM eportal;";

$result = mysql_query($sql) or die(mysql_error());  
$row = mysql_fetch_array($result);

header("Content-type: image/jpeg");
echo $row['image_blob'];
$db->close(); 
```

# django - 在Django中重定向时如何传递extra_context

> ID：10850607
> 
> 赞同：0
> 
> 时间：2012-06-01T12:50:08.630
> 
> 标签：django, django-forms, django-templates, django-views

我的意见.py：

```
 @login_required
 def some_views(request):
     if request.method == 'POST':
         form = AddressCreateFrom(request.POST)
         if form.is_valid():
             name = form.cleaned_data['Address']
             ip_value = form.cleaned_data['value']
             user_list = get_username(name)
             address_create = form.save()
             extra_context = {
                 'user_list': user_list
                 }
             return redirect_to(request, url=address_create.get_absolute_url())
     else:
         form = AddressCreateFrom()
     extra_context = {
         'form':AddressCreateFrom(initial={'user': request.user.pk})
         }
     return direct_to_template(request,'networks/user_form.html',extra_context) 
```

在 form.py 中：

```
 class AddressCreateFrom(forms.ModelForm):
     Address = forms.CharField(max_length=40)
     value = forms.CharField(max_length=40)
     class Meta:
         model = Network
         widgets = {
             'user': forms.HiddenInput()
           } 
```

如您所见，我正在使用带有两个额外 Django 表单字段的 Django 模型表单，即`Address and value`在`AddressCreateForm`课堂上。在渲染模板时我需要所有字段。

确实`some_views`方法工作正常，但我还想将一些用`context_dictionary`ie写入的额外数据呈现`user_list`给请求的`URL`ie `address_create.get_absolute_url()`。

如果我没记错的话，如果我们正在处理数据库，我们必须使用`redirect_to`方法。有可能这样做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T13:22:38.980

重定向将返回带有状态码 301 或 302 的 HTTP 响应，以及重定向到的位置：

```
301 MOVED PERMANENTLY
Location: http://www.example.com/new-url/ 
```

原始视图没有渲染模板，因此您无法传递`extra_context`给它。

用户的浏览器通常会跟随重定向，并请求新的 URL。

如果您想在下一个视图中显示有关特定用户的信息，您必须执行以下操作：

1.  设计您的 URL 模式以包含用户 ID，例如`/users/200/`，
2.  将其作为 get 参数包含，例如，然后从视图中`/users/?id=200`获取用户 ID 。`request.GET`
3.  将 user_id 存储在会话中
4.  [在重定向之前，使用消息框架](https://docs.djangoproject.com/en/1.9/ref/contrib/messages/)使用用户数据创建消息。

然后在您重定向到的视图中，您可以从数据库中获取用户，并将其添加到模板上下文中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T15:03:12.097

上下文、额外上下文和 POST 数据将无法在重定向后继续存在。

这是你可以做的。

```
# before the redirect
....
request.session['user_list'] = user_list
return redirect_to(request, url=address_create.get_absolute_url())

# after the redirect (in the views.py that handles your redirect)
....
user_list = request.session['user_list']
extra_context = { 'user_list': user_list }
....
# now you have the user_list in the extra_context and can send it to the rendering engine. 
```

**注意：**此解决方案仅适用于您自己的服务器内的重定向。

# php - 添加样式以呼应

> ID：10850608
> 
> 赞同：3
> 
> 时间：2012-06-01T12:50:09.223
> 
> 标签：php, css

我想在这个 php echo 中添加一个浮动正确的样式

```
<?php echo $PAGE->button; ?>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T12:51:32.897

在 HTML 中：

```
<div class="foo">
    <?php echo $PAGE->button; ?>
    <?php } ?>
</div> 
```

在 CSS 中：

```
.foo {
    /* some styles here */
} 
```

或者只是简单地，但不推荐内联样式：

```
<?php echo "<div style='float: right;'>". $PAGE->button ."</div>"; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T12:51:48.573

```
<?php echo "<div style=\"float:right;\">" . $PAGE->button . "</div>"; ?>
<?php } ?> 
```

这将使整个按钮向右浮动

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T13:19:47.820

您有几个选项，首选方法是在 CSS 文件中定义按钮的值：

*   这可以降低开销，因为您不会在每个页面加载时加载更多字节，因为您可以将服务器设置为缓存样式表。

或者您脑海中的样式表：

*   这不会为您节省带宽，但会使样式与 html 分离并保持样式到位。

或者您可以使用内联样式。

```
<style>
.button{
    float:right;
}
</style>

<!--Using the button class from the stylesheet, Notice how many less characters there is-->
<input type="button" value="Button" class="button" name="B3">
<br /> 

<!--Using the same class from the stylesheet, but wrapping the button within a span-->
<span class="button"><input type="button" value="Button" name="B3"></span>
<br /> 

<!--The inline method-->
<span style="float:right"><input type="button" value="Button" name="B3"></span> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T12:51:41.070

```
<?php echo "<div style='float: right;'>". $PAGE->button ."</div>"; ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T12:52:46.363

你不能给回声功能赋予风格。但是您可以将其包装在 lable 或 p 或任何其他 html 标记中并给出 float: 风格。

像这样，

```
<p style="float: right;"><?php echo $PAGE->button.?></p> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-01T12:54:02.910

以更清洁的方式进行操作：

```
<div style="float: right;"><?php echo $PAGE->button; ?></div> 
```

# prototypejs - 带有脚本的淡入淡出效果

> ID：10850610
> 
> 赞同：0
> 
> 时间：2012-06-01T12:50:13.660
> 
> 标签：prototypejs, scriptaculous

我想淡化 div 的效果，下面的脚本不起作用。可能是什么问题？非常感谢。

```
function fadeIn(){

    $('test').invoke("fade", {
        from: 0, 
        to: 1,
        afterFinish: function() {

             $('test').setStyle({
                 display: 'block'               
             });           
        }
    });
}

<div class='top'>
    <div id="test" style="display:none">
         Fade in test
    </div>
</div>

<a href="#" onClick="fadeIn(); ">Click me</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:55:11.873

问题是它[`invoke`](http://api.prototypejs.org/language/Enumerable/prototype/invoke/)是 的一个方法`Enumerable`，并且[`$`](http://api.prototypejs.org/dom/dollar/)返回一个`Element`，而不是一个`Enumerable`。

因为`$`它实际上是 的别名`getElementById`，所以它不需要返回一个元素数组（任何给定的 只能有一个元素`id`，因此只会返回一个元素）。

您可以`fade`直接在元素上调用：

```
$('test').fade({
    from: 0, 
    to: 1,
    afterFinish: function() {
        $('test').setStyle({
            display: 'block'               
        });           
    }
}); 
```

# java - 使用 hibernate.cfg.xml 和 JBoss 管理的数据源

> ID：10850615
> 
> 赞同：3
> 
> 时间：2012-06-01T12:50:24.993
> 
> 标签：java, hibernate, jboss6.x

我有一个使用 JBoss + hibernate 的项目，而**不是**JPA（不要问我为什么，只要这样假设）。所以我们使用hibernate.cfg.xml 和hibernate Session。好吧，我正在尝试让 JBoss 来处理我的会话，所以我将 hibernate.cfg.xml 更改为如下内容：

```
<hibernate-configuration>
    <session-factory name="unitName">
       <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
       <property name="hibernate.show_sql">true</property>
       <property name="hibernate.format_sql">false</property>
       <property name="hibernate.connection.datasource">MyDS</property>
    </session-factory>
</hibernate-configuration> 
```

在我刚刚添加的代码中：

```
@PersistenceContext(unitName="unitName") protected Session session; 
```

但是当我运行应用程序时，它会：

```
Caused by: java.lang.IllegalArgumentException: Can't find a persistence unit named 'unitName' in ... 
```

尝试从 更改`hibernate.cfg.xml`为`persistence.xml`，但仍在使用 Session，我收到类似于此的错误：[https ://issues.jboss.org/browse/JBAS-8815](https://issues.jboss.org/browse/JBAS-8815)

我知道，这个错误有一个解决方法，但我的主要问题是：我可以使用带有普通 Hibernate/Session 和 hibernate.cfg.xml 的托管数据源吗？我做错了什么？

谢谢！

# perl - Perl 使用 Unpack 将二进制数据拆分成块

> ID：10850622
> 
> 赞同：2
> 
> 时间：2012-06-01T12:50:50.523
> 
> 标签：perl, binary, chunked-encoding, unpack, chunked

我`Transfer-Encoding: chunked`用来编写 HTTP 响应。

响应通过以下方式分成几部分：

```
my $template = "a$buffer_size" x int(length($response)/$buffer_size) . 'a*';

foreach my $buffer (unpack $template, $response){
    ...
} 
```

当内容类型为 时，这可以正常工作`text/html`，但它会破坏二进制数据，例如`application/pdf`.

可`unpack`用于将二进制数据分成相等的长度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T19:45:52.713

仍然不确定为什么`unpack`在这种情况下会失败，但我偶然发现了一个解决方案。

如果我使用内存文件操作响应，则`unpack`可以正常工作：

```
my $resp;
open (my $fh, '>', \$resp);
my $fh_old = select($fh);
print $response;
close $fh;
select($fh_old);
$response = $resp; 
```

任何洞察为什么这有效？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T16:32:34.990

这对二进制数据非常有效。问题在别处。（你们`binmode`都处理好了吗？）

# c++ - 在闪电战中更改输出格式

> ID：10850626
> 
> 赞同：0
> 
> 时间：2012-06-01T12:51:13.887
> 
> 标签：c++, blitz++

我经常在 C++ 中使用 blitz 库。它有很多不错的功能，比如打印一个二维数组，只需要

```
cout<<A<<endl; 
```

但是，输出结果就像（对于 2x2 数组）

```
2 x 2
[ 4  5 
  2  1] 
```

现在，我希望摆脱 2x2 尺寸和它放置的括号，因为当我希望直接使用文件来绘制某些东西时，它有时会产生问题。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T18:05:56.320

您需要编写自己的输出例程。

可能最简单的方法是创建一个代理类模板：

```
template <typename blitzarray>
struct printer
{
    printer (const blitzarray& ba_) : ba(ba_) {}
    const blitzarray& ba;
}; 
```

它以您喜欢的方式输出数组：

```
template <typename blitzarray, typename stream>
stream& operator<< (stream& s, printer<blitzarray> pb)
{
    // <-- print the array here <--
    return s;
} 
```

然后有一个帮助推导模板参数的小辅助函数：

```
template <typename blitzarray>
printer<blitzarray> myprint(const blitzarray& ba)
{
    return printer<blitzarray>(ba);
} 
```

用途只是：

```
cout << myprint(A) << endl; 
```

您可能可以借鉴[原始的 blitz++ 输出例程](http://blitz.hg.sourceforge.net/hgweb/blitz/blitz/file/56a36918ccf1/blitz/array/io.cc)。

# python - HTSQL 中的数据透视表或交叉表查询

> ID：10850628
> 
> 赞同：1
> 
> 时间：2012-06-01T12:51:19.830
> 
> 标签：python

我一直在研究 HTSQL 来解决客户管理系统的一些临时查询要求（管理假期旅行、乘客等）。

HTSQL 是否能够生成数据透视表或交叉表查询（我认为它们有时被称为）？

例如：按行程（行）和慈善支持（列）计算的乘客人数

这是使用 Python 生成数据透视表的示例： [Pivoting data and complex annotations in Django ORM](https://stackoverflow.com/questions/5958415/pivoting-data-and-complex-annotations-in-django-orm)

这里提到了数据透视表和 HTSQL：

*   [http://clarkevans.com/tmp/spec.html](http://clarkevans.com/tmp/spec.html)
*   [https://docs.rexdb.com/manuals/rexdb/htsql/chart.html](https://docs.rexdb.com/manuals/rexdb/htsql/chart.html)

...但这些似乎都不适用于我的 HTSQL 版本（2.3.0）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:15:55.463

当前版本的 HTSQL v2 不支持数据透视表，但我们计划在未来添加它们。如果您事先知道列的列表，您仍然可以进行这样的输出。例如，[Django ORM 中的 Pivoting data 和 complex annotations 中](https://stackoverflow.com/questions/5958415/pivoting-data-and-complex-annotations-in-django-orm)的查询可以写成：

```
/queue{*, count(issue?status='open'), count(issue?status='closed')} 
```

或者，使用`define()`，

```
/queue.define(issue_num($status) := count(issue?status=$status))
      {*, issue_num('open'), issue_num('closed')} 
```

# c# - 如何更改 WPF 文本框的突出显示文本的前景色？

> ID：10850629
> 
> 赞同：7
> 
> 时间：2012-06-01T12:51:20.873
> 
> 标签：c#, .net, wpf, textbox, background-foreground

我正在开发一个同时具有 WinForms 和 WPF 控件的应用程序；在 WinForms`TextBox`选择文本的情况下，背景颜色分别为蓝色和白色，而在 WPF 中`TextBox`，它是浅蓝色和黑色。

正如这些问题中的回答，我可以使用`SelectionBrush`属性（WPF 4）来更改所选文本的背景，但是**如何更改所选文本的前景色？**

[如何更改 WPF 文本框的突出显示文本颜色？](https://stackoverflow.com/questions/405967/how-can-you-change-the-highlighted-text-color-for-a-wpf-textbox)

[如何更改 TextBox 的突出显示文本颜色？](https://stackoverflow.com/questions/7413965/how-can-i-change-the-highlighted-text-color-for-a-textbox)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-01T12:55:33.250

你不能，控制不允许它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-06-15T13:33:14.827

从 .net 4.8 开始，可以在 TextBox 中使用 TextBoxBase.SelectionTextBrush [https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls.primitives.textboxbase.selectiontextbrush?view=net-5.0](https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls.primitives.textboxbase.selectiontextbrush?view=net-5.0)

# tridion - Tridion 2009 SP1：使用 TDSE 的自定义页面。已发布的页面停留在发布队列中

> ID：10850636
> 
> 赞同：5
> 
> 时间：2012-06-01T12:51:36.013
> 
> 标签：tridion, tridion2009

我正在为 Tridion 2009 SP 1 编写一个自定义页面，该页面基于查询字符串发布一个页面，该查询字符串将从计划任务中调用。

我正在使用以下代码：

```
string pageId = Request.QueryString["page_id"];
string targetId = Request.QueryString["publication_target_id"];

if (string.IsNullOrEmpty(pageId))
{
    Response.Write("This page is intended to be called automatically with a " +
                 + "page id and publication target id");
    return;
}

TDSE tdse = new TDSE();
string publicationId = pageId.Split('-')[0].Substring(4);
var publication = tdse.GetPublication("tcm:0-" + publicationId + "-1");
var page = tdse.GetPage(pageId, publication);
var target = tdse.GetPublicationTarget(targetId);
page.Publish(target, true, false, true);

Response.Write("Successfully published " + page.Title + " to " + target.Title); 
```

这似乎有效，我可以看到队列中的页面，但它们仍处于“进行中”状态。

我仍然可以毫无问题地手动发布页面。

部署程序日志显示它没有收到工作，但是我可以看到 c:\tridion\work 文件夹中的项目（我使用的是本地文件系统 pub 目标）。

有任何想法吗？

更新：这是发布者像 TcmPublisher /debug 一样运行时的发布日志

```
01/06/2012 14:34:17 <5440> [Publisher]              Queue message [769571] is retrieved from Queue consumer handler for PublishQueue
01/06/2012 14:34:17 <4896> [Publisher]              Queue message handler for PublishQueue [0] working on queue message 769571
01/06/2012 14:34:17 <4896> [DefaultPublishTransactionHandler]   Handling publish transaction [tcm:0-93950-66560]
01/06/2012 14:34:17 <4896> [DefaultPublishTransactionHandler]   Publishing item [tcm:32-206093-64] from publication [tcm:0-32-1] to target [tcm:0-1-65537]
01/06/2012 14:34:17 <4896> [Transporting]           Storage location: c:\tridion\incoming\tcm_0-93950-66560.Content\
01/06/2012 14:34:17 <4896> [Resolve engine]             Getting resolver(s) for item type Tridion.ContentManager.CommunicationManagement.Page
01/06/2012 14:34:17 <4896> [Resolve engine]             Using resolver [Tridion.ContentManager.Publishing.Legacy.Resolving.PageResolver]
01/06/2012 14:34:17 <4896> [Legacy resolving]           Resolving the page [tcm:32-206093-64] took 00:00:00.0136441
01/06/2012 14:34:17 <4896> [Legacy resolving]           Resolved page [tcm:32-206093-64] with title 'Website Redirects'
01/06/2012 14:34:17 <4896> [DefaultPublishTransactionHandler]   Resolving took: 00:00:00.0468768
01/06/2012 14:34:17 <4896> [Render engine]              Getting renderer(s) for item type Tridion.ContentManager.CommunicationManagement.Page and template type CompoundTemplate
01/06/2012 14:34:17 <4896> [Render engine]              Using renderer [Tridion.ContentManager.Templating.TemplatingRenderer]
01/06/2012 14:34:17 <4896> [Render engine]              Getting renderer(s) for item type Tridion.ContentManager.ContentManagement.Component and template type CompoundTemplate
01/06/2012 14:34:17 <4896> [Render engine]              Using renderer [Tridion.ContentManager.Templating.TemplatingRenderer]
01/06/2012 14:34:17 <4896> [Render engine]              Rendering took: 00:00:00.2469570
01/06/2012 14:34:17 <4896> [Render engine]              Emmbed the result of this rendered component presentation with a tcdl:ComponentPresentation link for component [tcm:32-206079] with template [tcm:32-206080-32]
01/06/2012 14:34:17 <4896> [Render engine]              Rendering took: 00:00:00.3473678
01/06/2012 14:34:17 <4896> [Transporting]           Adding rendered item to the transport package: item [tcm:32-206093-64] 'Website Redirects' with template [tcm:32-206092-128] 'z_Htaccess Template'
01/06/2012 14:34:17 <4896> [Transporting]           Using transport package handler: Tridion.ContentManager.Publishing.Transporting.DefaultPageHandler
01/06/2012 14:34:17 <4896> [Transporting]           Adding Page tcm:32-206093-64 to the transport package for publishing
01/06/2012 14:34:17 <4896> [Transporting]           Writing file: c:\tridion\incoming\tcm_0-93950-66560.Content\Pages\site\us\redirects.htaccess
01/06/2012 14:34:18 <4896> [Transporting]           Adding rendered item to the transport package: item [tcm:32-206079] 'Redirects' with template [tcm:32-206080-32] 'HtAccess Url Redirects'
01/06/2012 14:34:18 <4896> [Transporting]           Using transport package handler: Tridion.ContentManager.Publishing.Transporting.DefaultComponentHandler
01/06/2012 14:34:18 <4896> [Transporting]           Add component [tcm:32-206079] with template [tcm:32-206080-32] to the transport package for publishing
01/06/2012 14:34:18 <4896> [Transporting]           Add schema [tcm:32-190-8] to the transport package for publishing
01/06/2012 14:34:18 <4896> [Transporting]           Building path for No (tcm:3-64-1024)
01/06/2012 14:34:18 <4896> [Transporting]           Building path for Yes (tcm:3-63-1024)
01/06/2012 14:34:18 <4896> [Transporting]           Add binary [tcm:0-0-0] with filename '.htaccess' and path '\site\us\.htaccess' to the transport package for publishing
01/06/2012 14:34:18 <4896> [DefaultPublishTransactionHandler]   Updating the publish transaction with the list of processed items
01/06/2012 14:34:18 <4896> [Transporting]           Saving the transport package
01/06/2012 14:34:18 <4896> Sending deploy control [Commit] for transaction [tcm:0-93950-66560] to deployer.
01/06/2012 14:34:18 <4896> [DefaultPublishTransactionHandler]   Publish transaction took 00:00:00.6889970
01/06/2012 14:34:18 <4896> [Publisher]              Cache statistics: SimpleCache: 14 Regions, 17 Objects, 20 Hits, 17 Misses
01/06/2012 14:34:18 <4896>  Region 'Component': 1 Objects, 6 Hits, 1 Misses.
01/06/2012 14:34:18 <4896>  Region 'PublishTransaction': 1 Objects, 1 Hits, 1 Misses.
01/06/2012 14:34:18 <4896>  Region 'PublicationTarget': 1 Objects, 0 Hits, 1 Misses.
01/06/2012 14:34:18 <4896>  Region 'Page': 1 Objects, 3 Hits, 1 Misses.
01/06/2012 14:34:18 <4896>  Region 'Publication': 1 Objects, 0 Hits, 1 Misses.
01/06/2012 14:34:18 <4896>  Region 'Tdse': 1 Objects, 0 Hits, 1 Misses.
01/06/2012 14:34:18 <4896>  Region 'User': 1 Objects, 0 Hits, 1 Misses.
01/06/2012 14:34:18 <4896>  Region 'PageTemplate': 1 Objects, 2 Hits, 1 Misses.
01/06/2012 14:34:18 <4896>  Region 'TemplateBuildingBlock': 3 Objects, 5 Hits, 3 Misses.
01/06/2012 14:34:18 <4896>  Region 'ComponentTemplate': 1 Objects, 2 Hits, 1 Misses.
01/06/2012 14:34:18 <4896>  Region 'StructureGroup': 1 Objects, 0 Hits, 1 Misses.
01/06/2012 14:34:18 <4896>  Region 'Schema': 1 Objects, 0 Hits, 1 Misses.
01/06/2012 14:34:18 <4896>  Region 'Keyword': 2 Objects, 0 Hits, 2 Misses.
01/06/2012 14:34:18 <4896>  Region 'Category': 1 Objects, 1 Hits, 1 Misses.
01/06/2012 14:34:18 <5440> [Publisher]              Deleting queue message: 769571 from Queue consumer handler for PublishQueue 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T13:42:34.973

这很奇怪，我不明白会有什么不同。

您是否尝试过启用发布者日志？或者更好的是，在调试模式下运行发布者 (tcmpublisher /debug) 并尝试找出发生了什么。由于它卡在“进行中”，因此出版商可能对此负责。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T17:47:38.950

我的直接怀疑是您在 CM 方面正在做一些不同的事情。否则很难解释手动发布的成功。

您说您可以手动发布页面而不会出现问题。您能否确认它适用于通过自定义页面失败的*相同*页面？

当然，下一个问题是出版目标是否相同。手动发布时，当然要选择目标类型，但使用 API 时，可以选择目标类型或发布目标。文本说您应该使用发布目标。你是？与您手动使用的目标类型关联的发布目标是否相同？（当然，当它到达部署者日志时，只有一个发布目标。）

您已指定 ActivateBlueprinting 和 RollbackOnFailure。这些设置是否反映了您在手动测试中所做的事情？（那么出版物 32 是您出版的那个还是一个孩子？）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T13:51:40.220

“我可以看到 c:\tridion\work 文件夹中的项目” - 你看到解压缩的传输包还是其他东西？

你有 Deployer 登录 DEBUG 吗？

# google-apps-script - 在 UI 服务中：尝试查看 HTML 内容

> ID：10850640
> 
> 赞同：0
> 
> 时间：2012-06-01T12:51:39.267
> 
> 标签：google-apps-script

在 UI 服务中，我尝试使用 createHTML() 或 createRichTextArea() 查看 HTML 内容，但它没有显示任何内容。HTML 数据作为来自文档转换的变量（参见下面的代码），如果我保存它，它可以在浏览器中读取。在电子邮件中设置为 html 内容（使用 Mailapp）时，它也可以工作。所以我的问题是：这些小部件中的 html 内容是否有任何已知限制？

***编辑：限制不完全是合适的术语！禁止是最好的;-)***

有关信息，这是我用来获取 html 的代码：

```
 var url = 'https://docs.google.com/feeds/';
  var doc = UrlFetchApp.fetch(url+'download/documents/Export?exportFormat=html&format=html&id='+id,
                              googleOAuth_('docs',url)).getContentText();
  var show= app.getElementById('bodyhtm').setHTML(doc);
  Logger.log(doc)
  return app; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:21:42.887

UiApp 中支持的 HTML 标签在此处列出：[https ://developers.google.com/apps-script/releases/2012#march_2012](https://developers.google.com/apps-script/releases/2012#march_2012)

> 添加了在使用 UiApp 小部件时包含一组有限的 HTML 标记的功能，以响应此问题。以下是允许的 HTML 标记列表：B、BLOCKQUOTE、BODY、BR、CENTER、CAPTION、CITE、CODE、DIV、EM、H1、H2、H3、H4、H5、H6、HR、I、LABEL、LEGEND , LI, OL, P, SPAN, STRONG, SUB, SUP, TABLE, TBODY, TD, THEAD, TITLE, TR, TT, UL

# ios - 如果在一定时间内未与之交互，则隐藏按钮

> ID：10850645
> 
> 赞同：1
> 
> 时间：2012-06-01T12:51:45.953
> 
> 标签：ios, button, timer

我希望在 android 上实现类似于 zoomControl 的行为，其中按钮出现，并且在与之交互时保持可见，但如果它们在一段时间内没有被交互，它们就会消失。

一般逻辑是这样的：

显示按钮：在我希望它显示的时间开始某种计时器/事件

如果发生与按钮的交互，则将计时器/事件重置为新的时间量

如果计时器/事件被击中，隐藏按钮。

我可以在`performSelector` `afterDelay`每次交互时运行一些隐藏按钮的方法，并让隐藏方法按钮由`performSelector`检查调用一些计数/标志，每次交互都会增加..这会起作用，但似乎相当不优雅，例如：

显示按钮：递增计数：执行选择器 5 秒后隐藏

按钮动作：递增计数：执行选择器 5 秒后隐藏

隐藏：如果 count !=0 什么也不做，则减少计数，否则隐藏按钮

有没有更好的办法？这对我来说只是感觉很笨拙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T12:55:57.910

做`NSTimer`一个

```
myButtonHideTimer = [NSTimer scheduledTimerWithTimeInterval:5 target:self selector:@selector(hideButton:) userInfo:nil repeats:NO]; 
```

然后，如果您在计时器触发呼叫之前获得交互

```
[myButtonHideTimer invalidate];//This stops the event from triggering 
```

然后重新创建定时器来重置触发时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:11:25.560

我会走这`performSelector:withObject:afterDelay:`条路，因为您不必处理专用的计时器对象。不过，不知道你需要计数器做什么。

1.  打电话`performSelector:withObject:afterDelay:`。
2.  当发生用户交互时，调用`cancelPreviousPerformRequestsWithTarget:selector:object:`. 然后再打电话`performSelector:withObject:afterDelay:`。

# c# - 密码加密/解密

> ID：10850651
> 
> 赞同：1
> 
> 时间：2012-06-01T12:51:57.973
> 
> 标签：c#, asp.net

我有一个用户 sql server 表，我想使用 asp.net 对密码进行加密并保存在此表中。我还希望该用户可以在忘记密码和编辑个人资料页面上获取密码，所以我也需要对其进行解密。我需要使用哪些算法或加密技术？

请建议

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-01T12:54:40.957

不要将密码加密到数据库中-对其进行哈希处理（使用盐）。

能够检索密码并不是您真正需要的。您需要让人们重新登录。能够解密密码意味着您很可能允许人们知道您的用户的密码。

我建议阅读Troy Hunt[关于构建安全密码重置功能的所有你想知道的内容。](http://www.troyhunt.com/2012/05/everything-you-ever-wanted-to-know.html)对实施安全密码策略的问题和解决方案进行了全面分析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T12:54:45.327

最安全的做法是对密码进行哈希处理，使其无法被解密 - 因此没有其他人会知道他们的密码，包括您和您公司的成员。当用户忘记密码时 - 生成一个临时密码并强制他们重置密码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T12:54:45.990

我认为最好的方法是使用[ASP.net 会员资格](http://msdn.microsoft.com/en-us/library/ff648345.aspx)。

# java - 从由变量定义的类中读取

> ID：10850657
> 
> 赞同：2
> 
> 时间：2012-06-01T12:52:26.280
> 
> 标签：java

我有与 Java 相关的问题：

我想知道有没有办法通过使用变量来创建类（在程序中）的路径。我正在制作一个程序，该程序将从某些站点下载图片并将其展示给用户。但是，不同的站点有不同的形式，这就是为什么我必须为每个站点定义一系列特定的功能。它们不能放在同一个类中，因为执行相同工作（仅针对另一个站点）的函数必须具有相同的名称。我正在尝试尽可能简单地稍后添加对另一个站点的支持。

无论如何，问题是，我可以在程序中调用一个函数，使用一个变量来确定它的位置。

例如：`code.picturesite.functionINeed();`

`code`是包含所有编码的包，`picturesite`不是一个类，而是一个包含所需类名称的变量 - 这样我只能更改变量的值以调用不同的函数（或不同类中的相同函数）。

我真的不认为这是可能的（这更能让您了解问题的本质），但是还有另一种方法可以做我想要在这里实现的目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:54:50.733

是的，有办法。这叫做*反射*。

给定一个包含类名的字符串，您可以获得这样的实例：

```
Class<?> c = Class.forName("com.foo.SomeClass");
Object o = c.newInstance(); // assuming there's a default constructor 
```

如果没有默认构造函数，您可以通过`c.getConstructor(param1.getClass(), param2.getClass(), etc)`

给定一个包含方法名称和实例的字符串，您可以像这样调用该方法：

```
Method m = o.getClass().getMethod("someMethod", param1.getClass(), param2.getClass(), etc);
Object result = m.invoke(o, param1, param2, etc); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T13:15:09.203

我没有立即在您的问题中看到任何无法解决的问题，而不是拥有一个包含类名的变量，而是拥有一个包含该类实例的变量——要在类上调用一个函数，您将拥有要知道它实现了该功能，因此您可以将该功能放在接口中。

```
interface SiteThatCanFoo {
    void foo();
} 
```

和

```
class SiteA extends Site implements SiteThatCanFoo {
    public void foo() {
        System.out.println("Foo");
    }
} 
```

然后：

```
Site currentSite = getCurrentSite(); // or getSiteObjectForName(siteName), or similar
if (SiteThatCanFoo.isAssignableFrom(currentSite.class)) {
    ((SiteThatCanFoo)currentSite).foo();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T13:42:21.443

所以你想做这样的事情（检查`ImageDownloader.getImageFrom`方法）

```
class SiteADownloader {
    public static Image getImage(URI uri) {
        System.out.println("invoking SiteADownloader on "+uri);
        Image i = null;
        // logic for dowlnoading image from siteA
        return i;
    }
}

class SiteBDownloader {
    public static Image getImage(URI uri) {
        System.out.println("invoking SiteBDownloader on "+uri);
        Image i = null;
        // logic for dowlnoading image from siteB
        return i;
    }
}

// MAIN CLASS
class ImageDownloader {
    public static Image getImageFrom(String serverName, URI uri) {
        Image i = null;
        try {
            // load class
            Class<?> c = Class.forName(serverName + "Downloader");
            // find method to dowload img
            Method m = c.getDeclaredMethod("getImage", URI.class);
            // invoke method and store result (method should be invoked on
            // object, in case of static methods they are invoked on class
            // object stored earlier in c reference
            i = (Image) m.invoke(c, uri);
        } catch (NoSuchMethodException | SecurityException
                | IllegalAccessException | IllegalArgumentException
                | InvocationTargetException | ClassNotFoundException e) {
            e.printStackTrace();
        }
        return i;
    }

    // time for test
    public static void main(String[] args) {
        try {
            Image img = ImageDownloader.getImageFrom("SiteB", new URI(
                    "adress"));
        } catch (URISyntaxException e) {
            e.printStackTrace();
        }
    }
} 
```

# css - Wordpress 子主题 CSS 导入

> ID：10850659
> 
> 赞同：0
> 
> 时间：2012-06-01T12:52:30.313
> 
> 标签：css, wordpress, jigoshop

我正在创建一个 Wordpress JigoShop 在线商店。购买了他们的 Jigotheme，我创建了一个子主题并激活它（以 Jigotheme 作为父模板）。

我尝试使用以下方法从 jigotheme 导入样式：@import url("../jigotheme/style.css");

（根据 wordpress 说明）

样式表没有引入 - 除了这个 CSS 导入问题之外，子主题工作正常。

我知道样式表中的 @import 代码上方没有代码 - 但它不会因为父 style.css 在其顶部也有 @import 代码而不起作用吗？他们可能有冲突吗？

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:30:01.037

导入语句应该可以工作。仔细检查目录路径和 .css 文件名。如果您使用的是 Chrome，您可以检查网络选项卡以查看父 style.css 是否实际被访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T13:08:14.570

遵循几个步骤：

1.  替换`bloginfo('template_directory'); ?>`为`php bloginfo('stylesheet_directory'); ?>`（[归功于@WouterB](https://stackoverflow.com/users/332241/wouterb)）

2.  检查您的父主题是否使用位于子文件夹下的样式表（例如，theme/css/style.css），在这种情况下，您必须将您的子主题 css 放在该文件夹下。

3.  请记住更改路径（可能您必须在上一个 url 之前使用 ../）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T13:27:06.383

您可以将其他`<link>`元素添加到头部或将其[排入队列](http://codex.wordpress.org/Function_Reference/wp_enqueue_style)。

# hibernate - 如何调用hibernate.cfg.xml 文件？

> ID：10850661
> 
> 赞同：0
> 
> 时间：2012-06-01T12:52:37.843
> 
> 标签：hibernate

你好朋友，当我调用 SessionFactory sessionFactory =new Configuration().configure().buildSessionFactory(); 时，我用 hibernate 应用程序创建了 struts；会话 =sessionFactory.openSession(); 此代码生成错误请帮助我示例代码在这里这是我的 hibernate.cfg.xml 文件

```
 <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD                  3.0//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
      <hibernate-configuration>
         <session-factory>
<property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
<property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
<property name="hibernate.connection.url">jdbc:mysql://localhost:3306/logintest</property>
<property name="hibernate.connection.username">root</property>
<property name="hibernate.connection.password">xxxx</property>
<property name="connection.pool_size">1</property>
<property name="dialect">org.hibernate.dialect.MySQLDialect</property>
<property name="current_session_context_class">thread</property>
<property name="cache.provider_class">
        org.hibernate.cache.NoCacheProvider
    </property>
<property name="show_sql">true</property>
<property name="hbm2ddl.auto">update</property>
<mapping resource="hibernate.hbm.xml"/> 
```

我的映射文件在这里

```
 <?xml version="1.0" encoding="UTF-8"?>
 <!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"   "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
 <hibernate-mapping>
    <class name="net.model.Contact" table="contacts">
   <id name="id" type="int" column="id" >
    <generator class="increment"></generator>
</id>   
<property name="firstName" column="firstname"></property>
<property name="lastName" column="lastname"></property>
 <property name="cellNo" column="cell_no"></property>
<property name="emailId" column="email_id"></property>
 <property name="birthDate" column="birthdate"/>
<property name="website" column="website"/>
  </class>
   </hibernate-mapping> 
```

主课在这里

```
 public class Testmain {
       public static void main(String args[])
{
    Session session=null;
    try
    {
   SessionFactory sessionFactory =new Configuration().configure().buildSessionFactory();
        session =sessionFactory.openSession();

    Contact contact=new Contact();
   contact.setFirstName("mohan");
  contact.setLastName("raddy");
  contact.setEmailId("mm@gmail.com");
    contact.setCellNo("4664564564");
   contact.setWebsite("www.stackoverflow.com");
        session.save(contact);
       session.beginTransaction().commit();
      System.out.println("done");

    }catch(Exception e)
    {
    System.out.println(e);
    }

    session.beginTransaction();
    List<Contact> contacts = null;
    try {

        contacts = (List<Contact>)session.createQuery("from Contact").list();

    } catch (HibernateException e) {
        e.printStackTrace();
        session.getTransaction().rollback();
    }
    session.getTransaction().commit();

    for (Contact contact : contacts) {
        System.out.println(contact.getFirstName());
      System.out.println(contact.getLastName());
        System.out.println(contact.getEmailId());
          System.out.println(contact.getCellNo());
            System.out.println(contact.getWebsite());
    }   
   }} 
```

当我运行主类时显示以下错误

线程“main”中的异常 java.lang.NoSuchMethodError: org.objectweb.asm.ClassWriter.(Z)V at net.sf.cglib.core.DebuggingClassWriter.(DebuggingClassWriter.java:47) at net.sf.cglib.core .DefaultGeneratorStrategy.getClassWriter(DefaultGeneratorStrategy.java:30) 在 net.sf.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:24) 在 net.sf.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:216) 在net.sf.cglib.core.KeyFactory$Generator.create(KeyFactory.java:145) 在 net.sf.cglib.core.KeyFactory.create(KeyFactory.java:117) 在 net.sf.cglib.core.KeyFactory。在 org.hibernate 的 net.sf.cglib.proxy.Enhancer.(Enhancer.java:69) 的 net.sf.cglib.core.KeyFactory.create(KeyFactory.java:104) 处创建(KeyFactory.java:108)。 proxy.pojo.cglib.CGLIBLazyInitializer。getProxyFactory(CGLIBLazyInitializer.java:117) at org.hibernate.proxy.pojo.cglib.CGLIBProxyFactory.postInstantiate(CGLIBProxyFactory.java:43) at org.hibernate.tuple.entity.PojoEntityTuplizer.buildProxyFactory(PojoEntityTuplizer.java:162) at org .hibernate.tuple.entity.AbstractEntityTuplizer.(AbstractEntityTuplizer.java:135) 在 org.hibernate.tuple.entity.PojoEntityTuplizer.(PojoEntityTuplizer.java:55) 在 org.hibernate.tuple.entity.EntityEntityModeToTuplizerMapping.(EntityEntityModeToTuplizerMapping.java: 56) 在 org.hibernate.tuple.entity.EntityMetamodel.(EntityMetamodel.java:295) 在 org.hibernate.persister.entity.AbstractEntityPersister.(AbstractEntityPersister.java:434) 在 org.hibernate.persister.entity.SingleTableEntityPersister.( SingleTableEntityPersister.java:109) 在 org.hibernate.persister.PersisterFactory。createClassPersister(PersisterFactory.java:55) at org.hibernate.impl.SessionFactoryImpl.(SessionFactoryImpl.java:226) at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1294) at net.model.Testmain.main( Testmain.java:25) Java 结果：1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:38:40.117

看看[这个答案](https://stackoverflow.com/questions/2432471/error-java-lang-nosuchmethoderror-org-objectweb-asm-classwriter-initiv)，这表明您可能选择了错误版本的 asm.jar 您应该检查您的类路径并确保您没有安装多个版本。

# c# - 一个 WCF 服务可以返回另一个吗？

> ID：10850674
> 
> 赞同：4
> 
> 时间：2012-06-01T12:53:19.283
> 
> 标签：c#, wcf

例如，WCF 服务是否可以充当其他 WCF 服务的工厂？例如：

```
[ServiceContract(Namespace = "Foo")]
interface IThing
{
    [OperationContract]
    void DoSomething();
}

[ServiceContract(Namespace = "Foo")]
interface IMakeThings
{
    [OperationContract]
    IThing Create(string initializationData);
} 
```

同样，一个接口可以将另一个接口作为参数吗？

```
[ServiceContract(Namespace = "Foo")]
interface IUseThings
{
    [OperationContract]
    void UseThing(IThing target);
} 
```

这需要调整已知类型吗？

所有接口都将预先定义并为客户端和服务所知。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T12:59:22.827

1.  不。当您浏览网络时，您不会像在 C# 中那样处理引用，因此您将无法返回不可序列化的对象。即使这样，也只会遇到标记为*DataMember的***数据。**

**   是的。您将不得不调整已知类型，但同样，这将是*DataContract*的接口而不是*OperationContract** 

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:00:07.140

我不认为这是可能的。当您在 WCF 服务上调用获取或返回对象的方法时，真正发生的是对象正在被序列化，并且序列化的表单正在来回传递。

这就是为什么在客户端你没有得到 -attributed 类的“完整”实现`DataContract`，而是一个只包含标记为序列化的属性的存根。你甚至没有得到方法。WCF 服务被归类为`ServiceContract`，而不是`DataContract`，所以这根本不起作用。

使用将接口传递给服务方法的能力需要服务知道要反序列化哪个实现。虽然我实际上没有尝试过，但我认为这行不通，但你可能会在这里让我感到惊讶:-)*

# android - 如何水平和垂直滚动此布局

> ID：10850679
> 
> 赞同：0
> 
> 时间：2012-06-01T12:53:47.020
> 
> 标签：android, android-layout

我正在尝试水平和垂直向下滚动这个主布局，如果这个主布局不适合用户手机，而用户垂直或水平拿着手机，他可以选择滚动它。谢谢

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/white"
    android:orientation="vertical" >

    <TextView 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/description"
        android:lines="4"
        android:gravity="center"
        android:textColor="@color/text"
        android:background="@drawable/text_background"
        />

    <TextView 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/lgn"
        android:lines="2"
        android:textColor="@color/text"
        android:gravity="center" />

     <Button 
         android:id="@+id/click_login"  
         android:layout_width="fill_parent" 
         android:layout_height="wrap_content"
         android:textColor="@color/white"
         android:textStyle="bold"

         />

     <TextView 
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:text="@string/rgs"
         android:textColor="@color/text"
         android:lines="2"
         android:gravity="center"

         />

       <TextView 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:lines="6"
        />
       <TextView 

           android:layout_width="fill_parent"
           android:layout_height="1dip"
           android:lines="10"
           android:background="#8B8989"

           />

       <TextView 
           android:layout_width="fill_parent"
           android:layout_height="wrap_content"
           android:text="@string/foter"
           android:lines="2"
           android:gravity="center"
           android:textColor="@color/Blue"

           />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:02:19.113

您是否尝试将所有内容都放在“ScrollView”中？:-)

```
<ScrollView android:layout_width="fill_parent" android:layout_height="fill_parent">

    <LinearLayout>
        <!-- Your linear layout here -->
    </LinearLayout>

</ScrollView> 
```

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T08:56:54.443

您可以使用以下编码。

垂直滚动：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical">
<ScrollView android:layout_width="fill_parent"
    android:layout_height="wrap_content" >
    <LinearLayout android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:orientation="vertical">
          // all views to scroll
</LinearLayout>
 </ScrollView> 
```

水平滚动：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical">
<HorizontalScrollView
    android:id="@+id/horizontalScrollView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal" >
          // all views to scroll
    </LinearLayout>
 </HorizontalScrollView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T13:01:12.990

我编辑了您的 xml 代码，如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@color/white"
android:orientation="vertical" >

 <ScrollView
   android:id="@+id/scro1"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:layout_x="***dp"
   android:layout_y="***dp">
   <LinearLayout 
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_x="***dp"
android:layout_y="***dp">
<TextView 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/description"
    android:lines="4"
    android:gravity="center"
    android:textColor="@color/text"
    android:background="@drawable/text_background"
    />

<TextView 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/lgn"
    android:lines="2"
    android:textColor="@color/text"
    android:gravity="center" />

 <Button 
     android:id="@+id/click_login"  
     android:layout_width="fill_parent" 
     android:layout_height="wrap_content"
     android:textColor="@color/white"
     android:textStyle="bold"

     />

 <TextView 
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:text="@string/rgs"
     android:textColor="@color/text"
     android:lines="2"
     android:gravity="center"

     />

   <TextView 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:lines="6"
    />
   <TextView 

       android:layout_width="fill_parent"
       android:layout_height="1dip"
       android:lines="10"
       android:background="#8B8989"

       />

   <TextView 
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:text="@string/foter"
       android:lines="2"
       android:gravity="center"
       android:textColor="@color/Blue"

       />
    </LinearLayout>
    </ScrollView>

 </LinearLayout> 
```

***dp 表示要从哪里滚动`LinearLayout`.

# .htaccess - .htaccess 将 url 重写为参数

> ID：10850683
> 
> 赞同：1
> 
> 时间：2012-06-01T12:54:01.083
> 
> 标签：.htaccess

```
Options +FollowSymLinks

RewriteEngine On
RewriteRule ^products/([a-zA-Z]+)/([0-9]+)/$ index.php?product=$1&price=$2 
```

这段代码使

> `http://www.example.com/products/computer/1000`

进入

> `http://www.example.com/index.php?product=computer&price=1000`.

是否可以制作

> `http://www.example.com/scriptName/arg1/val1/arg2/val2/arg3/val3`

进入

> `http://www.example.com/scriptName.php?arg1=val1&arg2=val2&arg3=val3?`

用户应该能够提供无限数量的参数。这种方式可以有`/index.php?page=forum&subforum=subforum&quote1=postNo1&quote2=postNo43`等等重写`/index/page/forum/subforum/subforum/quote1/postNo1/quote2/postNo43`

`.htaccess`代码看起来如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T19:13:07.537

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^([^/]+)/([^/]+)/([^/]+)(.*?)/?$ $1/$4?$2=$3 [L,QSA]
RewriteRule ^([^/]+)/$ $1.php [L] 
```

`/scriptName/arg1/val1/arg2/val2/arg3/val3`这将转发一个 URI`/scriptName.php?arg3=val3&arg2=val2&arg1=val1`

# c++ - .mp3 .wav 等音频文件每一帧的音频频率

> ID：10850686
> 
> 赞同：1
> 
> 时间：2012-06-01T12:54:07.287
> 
> 标签：c++, mp3, frequency, fmod

我能否找到一种方法来获取音频文件（如 .mp3 或 .wav）或使用“fmod”或“cwave”库甚至其他库的任何其他声音格式的每个帧的频率？如何在 C/C++ 中找出这个频率？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T13:00:22.170

FFTW 库是一组非常快速的不同傅立叶变换的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T20:36:44.077

If you have a number of samples of digitized audio, you pretty much have, in total, as many frequencies *and* phases as you've got samples. Suppose you've got just two samples of audio. In order to faithfully represent them, you need one frequency and one phase -- so again, two values. There is no "single" frequency to represent multiple samples of digitized audio.

You can of course, akin to the question of "How can I get the color of a specific video frame?", ask what is the average frequency. Or you can ask what is the most prominent frequency (the one with highest amplitude). Or you can ask what is the frequency that with its harmonics carries the most energy in the signal (assuming the signal was physical, like electrical current sampled in time).

In all those cases, you'd probably want to use a premade library that internally uses the FFT or a similar discrete transform to get the signal from the time domain to a frequency or a similar domain ([quefrency domain](http://en.wikipedia.org/wiki/Cepstrum), for example, and it's not a typo). It's hard to get what you want from a plain FFT, you'd need some mathematical training to process raw FFT results into what you're after. I'm sure there are libraries for it, I just can't think of any right now. Perhaps someone who deals with such work can edit the answer.

# xml - 如何使用 PNML 框架解析 pnml 文件？

> ID：10850695
> 
> 赞同：1
> 
> 时间：2012-06-01T12:54:28.970
> 
> 标签：xml, frameworks, petri-net

我试图找到如何使用 PNML 框架 [http://pnml.lip6.fr/index.html](http://pnml.lip6.fr/index.html)来解析 pnml 文件，但我没有找到任何有用的信息，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T05:57:22.343

PNML 框架是一个 Java 类库。您可以使用该库构建项目并通过其 API 与之交互。

如果您有 PNML 验证等特定需求，您可以使用一些使用 PNML 框架构建的工具，而无需使用 Java 进行任何编程。

要开始使用 PNML 框架进行开发，您应该从阅读基本教程 ( [wiki](https://srcdev.lip6.fr/trac/research/ISOIEC-15909/wiki/English/User/Tutorial) ) 开始，如果您使用 Eclipse，请安装 PNML 框架以使用 IDE ( [wiki](https://srcdev.lip6.fr/trac/research/ISOIEC-15909/wiki/English/User/InstallPFW2) )。

更多详细信息可在剩余的用户文档卷（[目录](https://srcdev.lip6.fr/trac/research/ISOIEC-15909/wiki/English/User)）中找到。

# python - Django / Python (PEP 8)：如果我想命名一个名为 Property 的模型类。我应该将其保留为 Property 还是 Property_？

> ID：10850697
> 
> 赞同：0
> 
> 时间：2012-06-01T12:54:33.907
> 
> 标签：python, django, django-models, pep8

我知道这`property()`是 Python 中的内置函数，但我想将模型类命名为`Property`. 像这样简单的东西：

```
class Property(models.Model):
    name             = models.CharField(max_length=135)
    owner            = models.ForeignKey(User, related_name='properties_from_owner')
    address_line_one = models.CharField(max_length=135)
    address_line_two = models.CharField(max_length=135, blank=True)
    city             = models.CharField(max_length=135)
    state            = models.CharField(max_length=135)
    zip_code         = models.CharField(max_length=135) 
```

我应该打电话给班级`Property`还是`Property_`？现在我知道 Python 区分大小写，但我问的原因是因为在 Django 中，`Property`模型类被标识为`myapp.property`.

在与我相关的其他模型中，我在这样的字段中`Property`添加了一个`_`

```
class UserProfile(models.Model):
    user      = models.OneToOneField(User, related_name='userprofile_from_user')
    property_ = models.ForeignKey(Property, related_name='userprofiles_from_property') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:34:50.620

`property`不是关键字而是函数。如果你愿意，你可以覆盖它（同时确保你稍后不会在文件中混淆两者。

在不可能发生混淆的情况下，我认为没有理由不这样做。

# objective-c - 如何在带有 ARC 的 iOS 5 应用程序（XCode 4.2）中使用 GCMathParser？

> ID：10850698
> 
> 赞同：0
> 
> 时间：2012-06-01T12:54:36.693
> 
> 标签：objective-c, xcode4.2, automatic-ref-counting

将“pi”更改
为 “M_PI” 并为 GCMathParser 文件禁用 ARC 后，出现以下错误：（多个位置）`#import <Cocoa/Cocoa.h>``#import <UIKit/UIKit.h>`

> 将 C 指针类型“void*”转换为 Objective-C 指针类型“GCMathParser*”需要桥接转换

我需要做什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T04:35:42.660

ARC 不允许您将对象隐藏在无类型指针后面——它需要知道哪些指针是对象才能发挥它的魔力。如果您正在处理一个严重依赖该技巧的框架，您可能需要进行大量的重新架构。不好玩。

你可以试试[DDMathParser](https://github.com/davedelong/DDMathParser/wiki)；它功能相似，可扩展性更强，并且“开箱即用”支持 ARC 和 iOS。

# .net - 如何使用 BeginInvoke 或类似工具在 UI 线程上执行串行操作

> ID：10850702
> 
> 赞同：0
> 
> 时间：2012-06-01T12:54:44.960
> 
> 标签：.net, multithreading, freeze, begininvoke

我有一个看似简单的问题，但我不知道如何解决它。

我想要做的是在工作线程上执行从 UI 线程调用的冗长操作，以便 UI 保持响应 - 但是这仍然必须是顺序的，我想等待操作完成但仍然发送消息排队，这样 UI 就不会出现可怕的 (Not Responding...) 错误。

怎么可能以一种优雅的方式，丑陋和恶魔般的方式是产生一个线程并进入一个`DoEvents`循环直到它完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:12:42.220

你的要求是矛盾的。您希望 UI 执行（响应式）但您不希望它执行您的代码（等待操作完成）。

您可以显示阻止用户与主界面交互的模态视觉元素，也可以在后台任务完成时禁用所有视觉元素（以及相关的导航）。

# php - 配置 htaccess 文件以忽略斜杠后的最后一个目录并使用变量重定向

> ID：10850705
> 
> 赞同：-1
> 
> 时间：2012-06-01T12:54:49.467
> 
> 标签：php, .htaccess

例如：

www.site.com/your/blue

将重定向到... www.site.com/your/index.php?=blue

现在，当有人输入 www.site.com/your/blue 时，它​​会抛出一个错误，说页面不存在。谁能帮我这个？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T13:02:19.783

Mod rewrite 必须用于这种重定向：

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteRule ^([A-Za-z0-9_-]+)/([A-Za-z0-9_-]+)/?$ $1/index.php?page=$2 [L]
</IfModule> 
```

此正则表达式可确保将干净的 url 传递给站点，并且可以使用或不使用结尾斜杠。

注意：传递给 PHP 的参数需要有一个名称，所以我添加了 page=

**如果您希望它不受任何限制地工作（空格会起作用）**

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule ^([^/]+)/([^/]+)/?$ $1/index.php?page=$2 [L]
</IfModule> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T12:57:36.237

使用[mod 重写](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)：

```
RewriteEngine On   
RewriteRule ^(.*)/(.*)/$ $1/index.php?p=$2 [L] 
```

（我添加`p`为查询字符串的名称，因为它不能为空）

* * *

此外，您可以在重写规则之间添加以下代码行，`RewriteEngine On`以确保尾部有斜杠（推荐）：

```
# Add trailing slash
RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/)$
RewriteRule (.*)$ http://www.site.com/$1/ [R=301,L] 
```

# jquery - ajax调用没有响应

> ID：10850710
> 
> 赞同：0
> 
> 时间：2012-06-01T12:54:55.133
> 
> 标签：jquery, ajax, same-origin-policy

ajax 调用创建问题。它在浏览器中运行良好，但通过 ajax 不会被调用。网址在这里[http://testbed2.baileyprofile.com/dd-api.php?test=1](http://testbed2.baileyprofile.com/dd-api.php?test=1)

当我在 Firefox 检查元素控制台中检查它时。它发送请求并在大约 900 毫秒或 mroe 后给出消息 200 Ok 并且 url 颜色变为红色。它根本不产生任何响应。

请任何提示它可能有什么问题。我的代码如下

```
 jQuery.post(ajaxurl, {action: 'test' }, function(response) {
        if (response!= '') {
             jQuery('#test-result').html("Restule is generated successfully, copy of result has been sent to your inbox").fadeOut(10000);
             document.getElementById("txtFeedback").value= response;
            //console.log(response.data);
            //alert('POST title: ' + response.data.post_title);
        } else {
            // something didn't go well
            console.log(response.status);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:03:01.430

**更新：**

> 我有 a.com 并向 b.com 发送请求。它应该有什么问题吗？

你违反了[`Same origin policy`](http://en.wikipedia.org/wiki/Same_origin_policy)，你不能从域`a.com`到ajax`b.com`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:03:37.087

数据参数应该在''之内。尝试一下，它应该可以工作

```
jQuery.post(ajaxurl, {'action': 'test' }, function(response) {
        if (response!= '') {
             jQuery('#test-result').html("Restule is generated successfully, copy of result has been sent to your inbox").fadeOut(10000);
             document.getElementById("txtFeedback").value= response;
            //console.log(response.data);
            //alert('POST title: ' + response.data.post_title);
        } else {
            // something didn't go well
            console.log(response.status);
        }
    }); 
```

# forms - 如何在同一个表单中显示另一个实体的多个信息？

> ID：10850712
> 
> 赞同：2
> 
> 时间：2012-06-01T12:55:00.717
> 
> 标签：forms, symfony

实际上，我尝试在中间实体上创建一个表单，并且我想为同一实体显示许多输入（项目颜色和项目名称）。我也可以创建项目实体。

```
# MyNiceBundle/Form/Type/CollaborationType.php

public function buildForm(FormBuilder $builder, array $options)
{
    $builder->add('project', 'entity', array(
        'class' => 'MyNiceBundle:Project',
        'property' => 'name'
    ));
    $builder->add('project', 'entity', array(
        'class' => 'MyNiceBundle:Project',
        'property' => 'color'
    ));
    $builder->add('participant', 'entity', array(
        'class' => 'MyNiceBundle:User',
        'property' => 'email',
        'multiple' => true,
        'expanded' => true
    ));
    $builder->add('workgroup', 'entity', array(
        'class' => 'MyNiceBundle:Workgroup',
        'property' => 'name',
        'multiple' => false,
        'expanded' => true
    ));
}

# Resources/Views/project_form.html.twig

<form id="project-creation" class="form" action="{{ path('nicebundle_project_create') }}" method="post">
    {{ form_errors(form) }}
    <div class="project">
    # Here I want to show the input for project name
    {{ form_errors(form.project) }}
    {{ form_widget(form.project) }}
    </div>

    <div id="navigation-panel">
        # Here I want to show the input for project color
        {{ form_errors(form.project) }}
        {{ form_widget(form.project) }}

        {{ form_errors(form.participant) }}
        {{ form_widget(form.workgroup) }}
        {{ form_widget(form._token) }}
        <input class="btn" type="reset" value="reset" />
        <input class="btn" type="submit" value="submit" />
    </div>
</form> 
```

我应该怎么办？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:17:37.823

我像这样在 CollaborationType 中传递了 ProjectType：

```
# MyNiceBundle/Form/Type/CollaborationType.php
public function buildForm(FormBuilder $builder, array $options)
{
    $builder->add('project', new ProjectType());
    $builder->add('participant', 'entity', array(
        'class' => 'BtaskUserBundle:User',
        'property' => 'email',
        'multiple' => false,
        'expanded' => true
    ));
    $builder->add('workgroup', 'entity', array(
        'class' => 'BtaskBoardBundle:Workgroup',
        'property' => 'name',
        'multiple' => false,
        'expanded' => true
    ));
}

# Resources/Views/project_form.html.twig
<form id="workgroup-form-create" class="form" action="{{ path('MyNiceBundle_project_create') }}" method="post" {{ form_enctype(form) }}>
    {{ form_errors(form) }}
    <div class="project">
    {{ form_errors(form.project) }}
    {{ form_widget(form.project) }}
    </div>

    <div id="navigation-panel">
        {{ form_errors(form.project) }}
        {{ form_widget(form.project) }}

        {{ form_errors(form.participant) }}
        {{ form_widget(form.participant) }}

        {{ form_errors(form.workgroup) }}
        {{ form_widget(form.workgroup) }}

        {{ form_widget(form._token) }}
        <input class="btn" type="reset" value="reset" />
        <input class="btn" type="submit" value="submit" />
    </div>
</form> 
```

# django - 强制转换为 Unicode：需要字符串或缓冲区，找到 NoneType

> ID：10850713
> 
> 赞同：0
> 
> 时间：2012-06-01T12:55:05.257
> 
> 标签：django, json, django-models

我正在向视图发出 Ajax 请求，如下所示：

```
def all_json_models(request):
    data = {}
    try:

    isp = request.GET['status']
    present_isp =  Priority.objects.filter(ispname = isp)
    isp_count = MultiWAN.objects.all()

  #  data['latest_no_rules']  =   latest_no_rules
    #data['present_isp']  = present_isp
    data['isp_count'] = isp_count

    return HttpResponse(simplejson.dumps(data)) 
```

我`models.py`的就像

```
class MultiWAN(models.Model):

    isp_name = models.CharField(max_length=10)
    description  = models.TextField(null=True)
    ip_address   = models.IPAddressField(null=True)
    subnet       = models.IPAddressField(null=True)
    gateway      = models.IPAddressField(null=True)
    nameserver   = models.ForeignKey('NameServer')
    weight       = models.IntegerField(null=False)
    interface    = models.CharField(max_length=5) 
    def __unicode__(self):
        """
        This function is to return the values we required.
        Arguments:
        - `self`:
        """
      #  return u'%s ' % (self.isp_name)

class NameServer(models.Model):
    """  A Isp can have more than one nameserver so far we are declearing a seperate table 
    """         
    name = models.IPAddressField(null=False)    

class Priority(models.Model):  
    priority =  models.IntegerField(null = True)
    ispname = models.ForeignKey('MultiWAN')
    rule = models.CharField(max_length=5,null=False)
    From  =    models.IPAddressField(null=True)
    To = models.IPAddressField(null=True)
    def __unicode__(self):
                      return u'%s ' % (self.priority) 
```

在提出请求时我收到错误：

```
"coercing to Unicode: need string or buffer, NoneType found" 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:42:48.307

如果没有完整的回溯，就很难判断（因为它提供了有关在代码中引发异常的位置的信息）。

错误消息“coercing to Unicode: need string or buffer, NoneType found”意味着，在某些时候，django 尝试将某些内容转换为 unicode 并期望一个字符串，但收到了`None`. 这意味着您要么调用传递函数`None`而不是字符串，要么调用其中一个方法返回`None`而不是字符串。

在您向我们展示的代码中，`MultiWAN.__unicode__`似乎定义不明确。也许错误源于此？

# java - 在构造函数之外添加的组件不会出现

> ID：10850715
> 
> 赞同：1
> 
> 时间：2012-06-01T12:55:12.137
> 
> 标签：java, swing, layout-manager

我有一个选项卡需要在程序运行时使用其类中的两种方法之一进行更新，因此我在方法中添加了组件，但我无法显示其中的任何一个。据我所知，这是因为它们在构造函数之外，我过去常常在方法中声明它们，但移动它以尝试解决问题。任何帮助将不胜感激。

抱歉，这有点混乱，我一直在尝试解决问题，有点盲目。

代码也可以正常编译，并且代码中的 println 输出按预期显示。

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package assgui;

import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;
import java.io.*;
/**
 *
 * @author Hugh
 */
public class ResultPanel extends JPanel {

    static String[][] activityString = new String[31][2];
    static String[][] foodString = new String[36][2];

        String weighstr, foodstr, servstr, kjstr, actstr, hourstr, minstr, metstr;

        JLabel uw = new JLabel ("User Weight:  ");
        JLabel weigh = new JLabel (weighstr);
        JLabel kg = new JLabel("  kg");
        JLabel sel1 = new JLabel("Food:  ");
        JLabel sel2 = new JLabel(foodstr);
        JLabel sel3 = new JLabel("  -  kj  ");
        JLabel sel4 = new JLabel(kjstr);
        JLabel sel5 = new JLabel("  ,  Servings:  ");
        JLabel sel6 = new JLabel(servstr);
        JLabel sel7 = new JLabel("Activity for comparison:  ");
        JLabel sel8 = new JLabel(actstr);
        JLabel sel9 = new JLabel("  Time required to balance:  ");
        JLabel sel10 = new JLabel(hourstr);
        JLabel sel11 = new JLabel("  hours");
        JLabel sel12 = new JLabel(minstr);
        JLabel sel13 = new JLabel("  minutes");
        JLabel smlspace = new JLabel("          ");
        JLabel medspace = new JLabel("               ");
        JLabel lrgspace = new JLabel("                         ");

        JLabel auw = new JLabel("User Weight:  ");
        JLabel aweigh = new JLabel(weighstr);
        JLabel akg = new JLabel("  kg");
        JLabel asel1 = new JLabel("Activity:  ");
        JLabel asel2 = new JLabel(actstr);
        JLabel asel3 = new JLabel("  -  MET  ");
        JLabel asel4 = new JLabel(metstr);
        JLabel asel5 = new JLabel("  ,  Duration:  ");
        JLabel asel6 = new JLabel(hourstr);
        JLabel asel7 = new JLabel("  hour  ");
        JLabel asel8 = new JLabel(minstr);
        JLabel asel9 = new JLabel("  minutes  ");
        JLabel asel10 = new JLabel("Food for comparison:  ");
        JLabel asel11 = new JLabel(foodstr);
        JLabel asel12 = new JLabel("  Servings to balance:  ");
        JLabel asel13 = new JLabel(servstr);
        JLabel asmlspace = new JLabel("          ");
        JLabel amedspace = new JLabel("               ");
        JLabel alrgspace = new JLabel("                         ");

        Public ResultPanel() {
        setBackground(Color.GREEN);
        setPreferredSize(new Dimension(650, 600));
        {

    public void activityPaint (String[][] actstring, String[][] foodstring, double        weight, int activity, int hour, int min, int food, double servings) {

        System.out.println("act1");
        weighstr = Double.toString(weight);
        actstr = activityString[activity][0];
        hourstr = Integer.toString(hour);
        minstr = Integer.toString(min);
        metstr = activityString[activity][1];
        foodstr = foodString[food][0];
        servstr = Double.toString(servings);

        add(lrgspace);
        add(uw);
        add(weigh);
        add(kg);
        add(medspace);
        add(sel1);
        add(sel2);
        add(sel3);
        add(sel4);
        add(sel5);
        add(sel6);
        add(sel7);
        add(sel8);
        add(sel9);
        add(sel10);
        add(sel11);
        add(sel12);
        add(sel13);

    }

    public void foodPaint(String[][] foodstring, String[][] actstring, double weight, int food, int servings, int activity, int hour, int min) {

        System.out.println("food1");
        weighstr = Double.toString(weight);
        foodstr = foodString[food][0];
        servstr = Integer.toString(servings);
        kjstr = foodString[food][1];
        actstr = activityString[activity][0];
        hourstr = Integer.toString(hour);
        minstr = Integer.toString(min);

        add(lrgspace);
        add(uw);
        add(weigh);
        add(kg);
        add(medspace);
        add(sel1);
        add(sel2);
        add(sel3);
        add(sel4);
        add(sel5);
        add(sel6);
        add(sel7);
        add(sel8);
        add(sel9);
        add(sel10);
        add(sel11);
        add(sel12);
        add(sel13);

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:47:57.910

您创建此 JPanel 的主要方法（或任何方法）是否也调用了 activityPaint(...) 和 foodPaint(...) 方法？如果没有调用这些方法，那么它们将永远不会被添加到面板中。如果您希望在创建 JPanel 时添加所有内容，那么您必须让构造函数调用 activityPaint() 和 foodPaint()。

如果在发生其他事情（如用户输入）之前无法设置 JLables 的值，那么您可以在创建 JPanel 时添加组件，然后稍后调用 setText(...) 方法。只要确保您这样做也可以设置大小，因为更改文本会产生影响。我更喜欢使用*nameofjpanel* .setSize( *nameofjpanel* .getPreferredSize())。

希望这对您有所帮助，我并没有完全错过您在这里的目的。

# c++ - 当我们使用 mpi_send/receive 函数时究竟会发生什么？

> ID：10850716
> 
> 赞同：8
> 
> 时间：2012-06-01T12:55:14.587
> 
> 标签：c++, mpi

当我们使用`mpi_send/receive`函数时会发生什么？我的意思是这种通信是通过值或我们希望发送和接收的变量的地址完成的（例如，进程 0 想要将变量“a”发送到进程 1。进程 0 究竟发送变量“a”的值或地址“一个”）。当我们使用派生数据类型进行通信时会发生什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-01T15:59:50.380

幕后发生了相当多的魔术。

* * *

首先，有**意外的消息队列**。当发送者`MPI_Send`在接收者调用之前调用`MPI_Recv`时，MPI 不知道消息在接收者的内存中的哪个位置。此时可能会发生两件事。如果消息很短，则将其复制到接收方的临时缓冲区。当接收者调用`MPI_Recv`它时，它首先检查匹配的消息是否已经到达，如果已经到达，则将数据复制到最终目的地。如果不是，则有关目标缓冲区的信息将存储在队列中，以便`MPI_Recv`在消息到达时进行匹配。可以使用 来检查意外队列`MPI_Probe`。

如果消息长于某个阈值，则复制它会花费很长时间。相反，发送方和接收方使用某种*会合协议*进行握手，以确保目标在消息发出之前已准备好接收消息。这对于像 InfiniBand 这样的高速网络尤其重要。

* * *

如果通信队列在**同一台机器上**，通常数据传输是通过共享内存进行的。因为 MPI rank 是独立的进程，所以它们不能访问彼此的内存。相反，同一节点上的 MPI 进程设置了一个共享内存区域并使用它来传输消息。因此，发送消息涉及复制数据两次：发送方将其复制到共享缓冲区中，接收方将其复制到自己的地址空间中。这有一个例外。如果 MPI 库配置为使用[KNEM等内核模块](http://runtime.bordeaux.inria.fr/knem/)，消息可以直接复制到操作系统内核中的目的地。然而，这样的拷贝会招致系统调用的惩罚。通过内核进行复制通常只对大消息是值得的。Catamount 等专门的 HPC 操作系统可以改变这些规则。

* * *

**集体操作**可以在发送/接收方面实现，也可以具有完全独立的优化实现。为集体操作实现几种算法是很常见的。MPI 库在运行时根据消息的大小和通信器决定使用哪一个以获得最佳性能。

* * *

一个好的 MPI 实现将非常努力地传输**派生数据类型**而不创建额外的副本。它将找出数据类型中的哪些内存区域是连续的，并单独复制它们。但是，在某些情况下，MPI 会回退到在幕后使用 MPI_Pack 以使消息连续，然后传输并解包它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-01T13:03:04.477

就应用系统程序员需要关注的这些操作而言，这些操作发送和接收数据，而不是数据地址。MPI 进程不共享地址空间，因此进程 0 上的地址对于进程 1 上的操作毫无意义 - 如果进程 1 想要进程 0 上的地址处的数据，它必须从进程 0 获取它。我不认为MPI-2 附带的单面通信对这种情况产生了重大影响。

从 MPI 库的开发人员看来，幕后发生的事情可能会有所不同，并且肯定会依赖于实现。例如，如果您在共享内存机器上使用编写良好的 MPI 库，那么可以，它可能只是通过发送指向系统周围地址位置的指针来实现消息传递。但这是一个极端案例，这些天很少见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T13:06:37.973

`mpi_send`要求您将地址提供给保存要发送的数据的内存。只有当它被保存以供您重新使用该内存时它才会返回（这可以通过非阻塞通信来避免）。

同样，`mpi_recv`要求您提供足够的内存地址，它可以将要接收的数据复制到其中。只有当数据已被接收到该缓冲区时，它才会返回。

MPI 如何做到这一点是另一回事，您不必担心编写一个有效的 MPI 程序（但可能是编写一个高效的程序）。

# ios - 在做动画时获得 EXC_BAD_ACCESS

> ID：10850717
> 
> 赞同：0
> 
> 时间：2012-06-01T12:55:18.167
> 
> 标签：ios, exc-bad-access, uiviewanimation

我正在制作动画，因此当您从第一个屏幕单击 MyAccount 按钮时，它会将您导航到 Account View

```
- (void)pushToAccount
{
    AccountViewController *controller = [[AccountViewController alloc] initWithNibName:@"AccountViewController" bundle:nil];
    //[self.navigationController pushViewController:controller animated:NO];

    [UIView  beginAnimations: @"Showinfo"context: nil];
    [UIView setAnimationCurve: UIViewAnimationCurveEaseInOut];
    [UIView setAnimationDuration:0.75];
    [self.view addSubview:controller.view];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.view cache:NO];
    [UIView commitAnimations];

} 
```

但是，每当我单击帐户视图控制器（其中包含一些按钮和图像视图）时，我的程序都会崩溃，在主类中显示 EXC_BAD_ACCESS

请就这个问题给我建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:42:46.367

您的视图控制器正在尝试通过添加另一个视图控制器的视图作为当前视图的子视图来为过渡设置动画。这在很多方面都是有问题的。值得注意的是，您并没有对新的视图控制器本身做任何事情……如果这是一个 ARC 项目，它将在您身上发布。

如果您只想从一个视图控制器转换到另一个视图控制器，您通常应该执行标准`pushViewController:animated:`或`presentModalViewController:animated:`. 看起来你曾经做过前者。你为什么用当前代码替换它？

如果你能告诉我们你想要做什么，为什么你不使用标准转换，也许我们可以进一步帮助你。

**更新：**

如果您不喜欢默认动画，而是希望为您的过渡添加一些自定义动画，您可以执行以下操作：

```
CustomAnimationViewController *yourNewViewController = [[CustomAnimationViewController alloc] initWithNibName:@"CustomAnimationView" bundle:nil];

[UIView beginAnimations:nil context:nil];
[UIView setAnimationCurve: UIViewAnimationCurveEaseInOut];
[UIView setAnimationDuration:0.75];
[self.navigationController pushViewController:yourNewViewController animated:NO];
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.navigationController.view cache:NO];
[UIView commitAnimations];

// if you're using ARC, you don't need this following release, but if you're not using ARC, remember to release it

// [yourNewViewController release]; 
```

**更新 2：**

并且，预料到后续的逻辑问题，你如何为新视图控制器的解除设置动画，例如，你可能有一个“完成”按钮，它调用如下方法：

```
- (IBAction)doneButton:(id)sender 
{
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationCurve: UIViewAnimationCurveEaseInOut];
    [UIView setAnimationDuration:0.75];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:self.navigationController.view cache:NO];
    [UIView commitAnimations];

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDelay:0.375];
    [self.navigationController popViewControllerAnimated:NO];
    [UIView commitAnimations];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:05:34.500

我的猜测是，您有一个在按下时`UIButton`会调用您的`pushToAccount`方法的方法，而当按下时它找不到该方法。这可能是因为方法签名不包含对象。所以如果你改变你的方法

```
- (void)pushToAccount 
```

到

```
- (void)pushToAccount:(id)sender 
```

它可能会解决您的问题。确保包含该`pushToAccount`方法的对象在调用该方法之前没有被释放也很重要。也许`NSLog`在里面放一条消息或断点`dealloc`以确保它不被调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T13:15:10.793

我想用波纹管

```
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:self.window cache:YES]; 
```

安装了你的波纹管..

```
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.view cache:NO]; 
```

希望这对您有所帮助... :) 如果需要，动画也可以使用下面的代码....

```
CATransition *animation = [CATransition animation];
    [animation setDelegate:self];   
    [animation setType:kCATransitionFromBottom];
    [animation setDuration:1.0];
    [animation setTimingFunction:[CAMediaTimingFunction functionWithName:
                                  kCAMediaTimingFunctionEaseInEaseOut]];
    [[self.window layer] addAnimation:animation forKey:kAnimationKey]; 
```

在这里使用您的窗口视图，否则窗口工作正常.. :)

# javascript - d3 choropleth map javascript切换json数据

> ID：10850721
> 
> 赞同：0
> 
> 时间：2012-06-01T12:55:37.813
> 
> 标签：javascript, d3.js

我已经设置了一个等值线地图来从 json 文件中检索数据，并让地图中的每个自治市相应地呈现其颜色。

我现在被困在尝试编写一个 javascript 函数以从单独的 JSON 文件切换到一组新数据，而无需重新加载地图。

示例代码仅适用于一个 JSON 文件，但我在另一个 JSON 文件中有另一组数据，其值与相同的“ID”不同，我想让用户通过单选按钮或单击在 JSON 文件之间切换。

```
d3.json("indicator1.json", function(data) {
var pad = d3.format(""),
  quantize = d3.scale.quantile().domain([0, 15]).range(d3.range(9));

d3.json("new_map.json", function(json) {
municipalities.selectAll("path", "id", "name")
  .data(json.features)
  .enter().append("svg:path")
  .attr("class", function(d) { return "q" + quantize(data[pad(d.id)]) + "-9"; })
  .attr("d", path)
  .append("svg:title")
  .text(function(d) { return d.properties.name + ": " + data[pad(d.id)] + "%"; });
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T20:01:32.993

我认为您最好将两个数据集组合成一个 json，并使用按钮/单击事件在 json 对象的属性之间切换...

# android - 向 EditText 字段添加阴影效果

> ID：10850726
> 
> 赞同：15
> 
> 时间：2012-06-01T12:56:00.310
> 
> 标签：android, xml, android-edittext, effects, dropshadow

我正在尝试设计一个像这样具有阴影（底部和右侧）的**EditText 字段**

![在此处输入图像描述](../Images/f85e67e96f1c5b46816df6c777ee6ba4.png)

尝试使用谷歌搜索并搜索了许多 SO 讨论，但都是针对 TextView 而不是 EditText。

这是我将阴影添加到输入文本而不是 TextField 的代码

```
<EditText android:id="@+id/txtpin" 
        android:maxLength="4" 
        android:layout_marginLeft="10dp" 
        android:layout_height="37dp" 
        android:gravity="center_horizontal" 
        android:inputType="textPassword" 
        android:longClickable="false" 
        android:layout_width="160dp" 

        android:shadowColor="@color/Black"
        android:shadowDx="1.2"
        android:shadowDy="1.2"
        android:shadowRadius="1.5" 

        android:background="@color/White">
            <requestFocus></requestFocus>
        </EditText> 
```

* * *

我想它需要一些可绘制的自定义 xml 视图，但没有得到确切的想法。实现这一目标的逻辑是什么。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-05T12:00:31.270

好吧.. @Shalini 的回答以这种方式帮助了我，但我仍然有另一种方法可以使用 EditText 字段实现 2D 阴影，我将与您分享。

> 我们需要为 EditText、底部阴影和右侧阴影创建三层的自定义 XML 视图

下面是我的代码。

## res/drawable/edittext_shadow.xml

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

<!-- most important is order of layers -->

    <!-- Bottom right side 2dp Shadow -->
    <item >
        <shape android:shape="rectangle">
            <solid android:color="#000000" />           
        </shape>
    </item>

    <!-- Bottom 2dp Shadow -->
    <item>
        <shape android:shape="rectangle">
            <solid android:color="#000000" />   
        </shape>
    </item>

    <!-- White Top color -->
    <item android:bottom="3px" android:right="3px">
        <shape android:shape="rectangle">
            <solid android:color="#FFFFFF" />           
        </shape>
    </item> 
</layer-list> 
```

* * *

现在我们可以使用“Background”属性将此阴影视图设置为我们的 TextField

像这样

## 资源/布局/main.xml

```
<EditText android:layout_width="wrap_content" 
            android:id="@+id/txtpin"  
            android:maxLength="4" 
            android:layout_height="37dp" 
            android:gravity="center_horizontal" 
            android:longClickable="false" 
            android:padding="2dp"

            android:inputType="textPassword|number" 
            android:password="true" 
            android:background="@drawable/edittext_shadow" 
            android:layout_weight="0.98" 
            android:layout_marginLeft="15dp">
                <requestFocus></requestFocus>
   </EditText> 
```

* * *

结果屏幕就像我在上面发布的问题一样。

感谢SO，分享知识。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-04T10:10:16.700

这对我有用..

```
 <EditText 
       android:layout_width="fill_parent" 
       android:shadowRadius="2"  
       android:shadowColor="#0000ff"
       android:shadowDx="2"
       android:shadowDy="4" 
       android:id="@+id/EditText01" 
       android:layout_height="wrap_content" /> 
```

希望能帮助到你：）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T13:05:14.860

来自[Android中文本的阴影效果？](https://stackoverflow.com/questions/3297437/shadow-effect-for-a-text-in-android)，也许你会考虑使用

```
android:shadowColor, 
android:shadowDx,
android:shadowDy,
android:shadowRadius; 
```

或者：

```
setShadowLayer() 
```

# mysql - Mysql返回多行

> ID：10850731
> 
> 赞同：8
> 
> 时间：2012-06-01T12:56:21.230
> 
> 标签：mysql, sql, group-concat

我有这个查询。

```
SELECT notes.id,enter.name as 'enter_name',step.title as 'flow status',notes.user_name as user_created,notes.created,notes.rel_client_id,td_doc_nr.value_string as 'document number',enter.enter_code,
    IF(!ISNULL(td_doc_nr.value_string),
     (SELECT  GROUP_CONCAT(product_name SEPARATOR ',') from notes d 
        join note_bundles b on b.note_id = d.id
        join note_products p on p.doc_bundle_id = b.id
        join note_product_get_fields f on f.doc_product_id = p.id
        join note_product_get_field_data fd on fd.get_field_id = f.id
        where d.doc_nr = td_doc_nr.value_string
        and value_string ='auto')
,NULL) as test
FROM notes notes
JOIN notes_steps step ON  step.id  = notes.step_id 
JOIN notes_enters enter ON enter.id = notes.enter_id
    LEFT JOIN notes_custom_fields tf_doc_nr ON tf_doc_nr.name = 'note_number' AND tf_doc_nr.rel_entity_id = enter.id
    LEFT JOIN notes_custom_field_data td_doc_nr ON td_doc_nr.rel_entity_id = notes.id AND
 td_doc_nr.field_instance_id = tf_doc_nr.id 
WHERE notes.enter_id in  (777) AND notes.status = 1 
```

我将此子查询添加到“if 语句”中

```
 SELECT  GROUP_CONCAT(product_name SEPARATOR ',') from nontes d 
    join note_bundles b on b.note_id = d.id
    join note_products p on p.doc_bundle_id = b.id
    join note_product_get_fields f on f.doc_product_id = p.id
    join note_product_get_field_data fd on fd.get_field_id = f.id
    where d.doc_nr = 'G7777777'
    and value_string ='auto' 
```

在此之后，我添加了一个新列。

```
 SELECT  GROUP_CONCAT(product_name SEPARATOR ','),GROUP_CONCAT(DISTINCT b.msisdn SEPARATOR ',') from notes d 
    join note_bundles b on b.note_id = d.id
    join note_products p on p.doc_bundle_id = b.id
    join note_product_get_fields f on f.doc_product_id = p.id
    join note_product_get_field_data fd on fd.get_field_id = f.id
    where d.doc_nr = 'G7777777'
    and value_string ='auto' 
```

它返回两列。我怎样才能返回两列？有可能吗？：） 谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T13:23:44.667

IF 语句中的子查询不能返回多个列。您需要将子查询加入结果中，并分别拉出两个单独的列：

```
SELECT ...
    IF(!ISNULL(td_doc_nr.value_string), sub.one, NULL) as one,
    IF(!ISNULL(td_doc_nr.value_string), sub.two, NULL) as two
FROM ...
LEFT JOIN (
    SELECT  d.doc_nr, GROUP_CONCAT(product_name SEPARATOR ','),GROUP_CONCAT(DISTINCT b.msisdn SEPARATOR ',') from documents d 
    join document_bundles b on b.document_id = d.id
    join document_products p on p.doc_bundle_id = b.id
    join document_product_cstm_fields f on f.doc_product_id = p.id
    join document_product_cstm_field_data fd on fd.cstm_field_id = f.id
    where value_string ='auto'
    group by d.doc_nr
) sub on sub.doc_nr = td_doc_nr.value_string 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T13:26:50.850

IF 语句中的相关子查询只能返回 1 列和 1 行，这就是您收到错误的原因。但是，查看您的查询，子查询中唯一的外部引用是

```
d.doc_nr = td_doc_nr.value_string 
```

因此，您实际上不需要相关子查询，您可以通过将子查询移动到联接并在子查询中按 doc_nr 分组来实现相同的结果，这可能会更有效，并且它允许您返回 2 列你要：

```
SELECT  tickets.id,
        source.name as 'source_name',
        flow_stage.title as 'flow status',
        tickets.user_name as user_created,
        tickets.created,
        tickets.rel_client_id,
        td_doc_nr.value_string as 'document number',
        source.source_code,
        IF(!ISNULL(td_doc_nr.value_string), ProductNames, NULL) as test,
        d.MSISDNS
FROM    tickets tickets
        JOIN tickets_flow_stages flow_stage 
            ON flow_stage.id  = tickets.flow_stage_id 
        JOIN tickets_sources source 
            ON source.id = tickets.source_id
        LEFT JOIN tickets_custom_fields tf_doc_nr 
            ON tf_doc_nr.name = 'document_number' 
            AND tf_doc_nr.rel_entity_id = source.id
        LEFT JOIN tickets_custom_field_data td_doc_nr 
            ON td_doc_nr.rel_entity_id = tickets.id 
            AND td_doc_nr.field_instance_id = tf_doc_nr.id 
        LEFT JOIN
        (   SELECT  d.Doc_nr,
                    GROUP_CONCAT(product_name SEPARATOR ',') AS ProductNames,
                    GROUP_CONCAT(DISTINCT b.msisdn SEPARATOR ',') AS MSISDNS
            from    documents d 
                    INNER JOIN document_bundles b 
                        ON b.document_id = d.id
                    INNER JOIN document_products p 
                        ON p.doc_bundle_id = b.id
                    INNER JOIN document_product_cstm_fields f 
                        ON f.doc_product_id = p.id
                    INNER JOIN document_product_cstm_field_data fd 
                        ON fd.cstm_field_id = f.id
            WHERE   value_string ='auto'
            GROUP BY d.Doc_nr
        ) d
            ON d.doc_nr = td_doc_nr.value_string
WHERE   tickets.source_id IN (114,122,125,129,131) 
AND     tickets.status = 1 
```

# python - 把进口放在首位？或者他们在哪里被使用？

> ID：10850733
> 
> 赞同：0
> 
> 时间：2012-06-01T12:56:24.657
> 
> 标签：python

> **可能重复：**
> [Python 导入编码风格](https://stackoverflow.com/questions/477096/python-import-coding-style)

当我编写一些需要导入的代码时，导入仅由我当前正在编写的代码位引入，我应该：

将导入粘贴在文件顶部，明确指出要使该模块工作，它需要这些导入，但是导入与使用分离，如果以后需要删除，模块可能仍会导入它不需要的东西曾经实际使用过，或

将导入与之后立即使用的代码一起保存，这样很明显导入的用途以及可以安全删除的位置，但存在多次导入相同库的风险，并且很难确定需要哪些库使模块工作。

最佳实践？

将导入放在顶部？还是放在有用的地方？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T13:04:57.763

[Python wiki 中的Import_Statement_Overhead](http://wiki.python.org/moin/PythonSpeed/PerformanceTips#Import_Statement_Overhead)指出：

> “import 语句几乎可以在任何地方执行。将它们放在函数中以限制它们的可见性和/或减少初始启动时间通常很有用。虽然 Python 的解释器经过优化，不会多次导入同一个模块，但重复执行 import 语句可以在某些情况下会严重影响性能。”

我遵循一般的文体惯例，并将我的所有`import`陈述放在程序的顶部。[PEP 8](http://www.python.org/dev/peps/pep-0008/#imports)规定重新进口：

> “导入总是放在文件的顶部，就在任何模块注释和文档字符串之后，模块全局变量和常量之前。”

# python - Python 中的 Python

> ID：10850734
> 
> 赞同：1
> 
> 时间：2012-06-01T12:56:28.690
> 
> 标签：python, subprocess

我正在尝试从 Python 脚本启动一个简单的服务器：

```
 server = Popen(['python' ,'-m', 'SimpleHTTPServer', '9090'], stderr=STDOUT, stdout=PIPE)
    output = server.communicate()[0]  # <- DEBUG 
```

阅读输出，我看到：

```
'/usr/bin/python: Import by filename is not supported.' 
```

有什么问题？如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-12-21T07:50:49.693

我建议将代码更改为：

```
import SimpleHTTPServer
import SocketServer

PORT = 9090

Handler = SimpleHTTPServer.SimpleHTTPRequestHandler

httpd = SocketServer.TCPServer(("", PORT), Handler)

print "serving at port", PORT
httpd.serve_forever() 
```

# css - 响应式设计的 IE 8 浮动问题

> ID：10850737
> 
> 赞同：1
> 
> 时间：2012-06-01T12:56:32.360
> 
> 标签：css, html, internet-explorer-8, media-queries, responsive-design

IE只知道如何让刚刚戒烟的人再次吸烟！！我正在尝试完善这个响应式导航菜单（以及我开发的另一个网站）以使用 IE8 响应（我不确定 www.testing123.co.za/test1.htm 中的 NAV 是什么样的

当我重新调整浏览器窗口的大小时，NAV 似乎忽略了我的媒体查询或 IE8 不喜欢此设计中涉及的浮动。我觉得应该是后者。

我做了一些研究，听说[这](http://code.google.com/p/css3-mediaqueries-js/)应该包含在您的页面中以应用媒体查询，但是在包含 js 文件时我仍然没有运气。我不确定我在这里可能做错了什么？我像这样包含了js文件：

```
<script src="css3-mediaqueries.js"></script> 
```

无论如何，我希望能澄清必须做些什么来纠正 IE 8 Float 问题（假设这是问题）。

感谢您的帮助，谢谢

CSS就像：

```
nav {
width: 90%;
margin: 0px auto;   
}

nav ul {
list-style: none;
overflow: hidden;

}

nav li a {
background: #444;
border-right: 1px solid #fff;
color: #fff;
display: block;
float: left;
font: 100 24px/1.4 TrumpGothicWestRegular;
padding: 10px;
text-align: center;
text-decoration: none;
text-transform: uppercase;
width: 12.5%;
min-height:80px;
padding-top:60px;
}
nav li a img { padding-bottom:5px; display:block; margin: 0px auto; }

/*SMALL*/
nav small {
color: #aaa;    
font: 100 11px/1 Helvetica, Verdana, Arial, sans-serif;
text-transform: none;

}

nav li a:hover {
background: #222;
}

nav li:last-child a {
border: none;
} 
```

1100px以下的视口（small-device1100.css）：

```
nav li a {
    font: 100 21px/1.4 TrumpGothicWestRegular;
    min-height:inherit;
    padding: 10px;
}

nav small {
    font: 100 8px/1 Helvetica, Verdana, Arial, sans-serif;
}
nav li a img { display:none; } 
```

825px 下的视口（small-device825.css）：

```
nav li a {
    width: 33.333333333333333333333333333333%;
    border-bottom: 1px solid #fff;
    font: 100 24px/1.4 TrumpGothicWestRegular;

}

nav li:last-child a, nav li:nth-child(3) a {
    border-right: none;
}

nav li:nth-child(4) a, nav li:nth-child(5) a, nav li:nth-child(6) a {
    border-bottom: none;
} 
```

350px以下的视口（small-device350.css）：

```
nav li a {
    width: 50%;
    font: 400 21px/1.4 TrumpGothicWestRegular;
    padding-top: 12px;
    padding-bottom: 12px;
}

nav li:nth-child(even) a {
    border-right: none;
}

    nav li:nth-child(3) a {
    border-right: 1px solid #fff;
}

nav li:nth-child(4) a, nav li:nth-child(5) a {
    border-bottom: 1px solid #fff;
} 
```

# iphone - 如何将选项（到 didFinishLaunchingWithOptions）传递给我从我的调整中激活的应用程序？

> ID：10850743
> 
> 赞同：3
> 
> 时间：2012-06-01T12:56:42.533
> 
> 标签：iphone, ios, jailbreak

我有一个加载到 SpringBoard 中并激活从外部源指定的应用程序的调整。

如何将任何参数传递给我激活的应用程序？SBUIController::activateApplicationFromSwitcher() 似乎没有任何规定，以及 SBApplication。

背景：我需要将 file:// url 传递给移动 safari。我已经安装了用于移动 safari 调整的 file://，但是它没有在移动 safari 中注册 file:// 方案，因此 openURL 不起作用。

另一种选择是通过教它如何响应 file:// url 来扩展移动 safari。似乎找不到我需要挂钩的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T20:27:30.457

有可能做到这一点*。*首先，您必须编辑 MobileSafari 的 Info.plist，以便将 file:// 添加到 url 方案中。其次，你必须用 mobilesubstrate 覆盖 application:openURL: 方法来处理这个地址。这将需要一些逆向工程来弄清楚如何正确地做，但它是可以做到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T19:50:26.290

Cydia 的工作方式可能会让您感兴趣。

Cydia 本身的可执行文件`MobileCydia`AFAIK，SpringBoard 启动`Cydia`，它实际上是一个 bash 文件：

```
#!/bin/bash
C=/${0}
C=${C%/*}
declare -a flags
[[ :${DYLD_INSERT_LIBRARIES}: == */MobileSubstrate.dylib: ]] && flags[${#flags[@]}]=--  substrate#!/bin/bash
exec "${C:-.}"/MobileCydia "${flags[@]}" -- "$@" 2>>/tmp/cydia.log 
```

实际启动 Cydia 的代码是`exec`命令。Cydia 所做的是从那里解析参数。这允许 Cydia 连接 MobileSubstrate，这是所有调整都需要的。

希望这可以帮助！

# c# - 403 - 禁止：访问被拒绝

> ID：10850745
> 
> 赞同：0
> 
> 时间：2012-06-01T12:56:49.687
> 
> 标签：c#, asp.net

我在我的 asp.net 解决方案中创建了一个名为 admin 的文件夹。我在其中创建了几个页面，例如 categories.aspx、users.aspx。我将代码上传到我的主机，当我尝试使用以下方式访问它时：

```
www.mydomain/admin/ 
```

我得到：

```
403 - Forbidden: Access is denied.
You do not have permission to view this directory or page using the credentials that you supplied. 
```

我看起来主机正在此文件夹中寻找 default.aspx。如何将 users.aspx 作为该文件夹的默认页面？

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:03:43.367

我假设您使用的是 IIS7 或更高版本。

如果您可以访问 IIS 配置，您可以直接在那里进行，如果没有，您可以使用 web.config 添加默认页面

您需要在`/admin/`仅包含默认页面设置的文件夹上创建特定的 web.config。

[在这里](http://www.iis.net/ConfigReference/system.webServer/defaultDocument)，您可以获得有关如何在 IIS 上执行此操作以及如何在 web.config 上执行此操作的所有详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:03:14.777

您需要转到 IIS 并将“User.aspx”作为“默认页面”添加到 www.mydomain.com。

# xcode - 从 NSTableCellView 访问 NSOutlineView 的最干净的方法是什么？

> ID：10850748
> 
> 赞同：1
> 
> 时间：2012-06-01T12:56:59.810
> 
> 标签：xcode, macos, cocoa, nsoutlineview

从基于视图的单元格中，我需要确定它是否“扩展”，我需要访问父 NSOutlineView。访问父表视图的最佳方式是什么？我是在单元格内存储对表格的引用还是有更好的方法？我讨厌在细胞内使用 [super...super...]，因为它可能在未来的任何时候中断。

# vbscript - 如何排除 .txt 文件被重命名？

> ID：10850750
> 
> 赞同：0
> 
> 时间：2012-06-01T12:57:06.573
> 
> 标签：vbscript

下面的代码做了两件事，查看特定文件中的所有文件，确定文件是否具有 .pdf 扩展名。如果任何文件没有，它会修复扩展名，然后将所有文件移动到另一个文件夹。

到目前为止，这个脚本做得很好。

问题是 .txt 扩展名的 3 个文件始终包含在此列表中，我们不希望更改这些文件的扩展名，也不希望它们移动。

这些文件称为 index.txt、pending.txt 和 tableofcontents.txt。

这可能吗？

这是我到目前为止的代码，提前非常感谢。

```
Set FSO = CreateObject("Scripting.FileSystemObject") 
Set pdfFolder = FSO.GetFolder( "E:\LOCS\FTP\Current\")  

For Each fil In pdfFolder.Files 
     ' check each file to be sure it fits the pattern 
     fname = fil.Name 
     suffix = LCase( Right( fname, 4 ) ) 
     'prefix = Left( fname, 8 ) 
     ' so suffix has to be right: 
     If  suffix = ".pdf" Then 
         newName = Mid( fname, 9 ) 
        ' Response.Write "Renaming '" & fname & "' to '" & newName & "'<br/>" & vbNewLine 
         fil.Move "E:\DOCs\PermLoc\" & newName 
     End If 
Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:05:55.733

尝试设置断点并单步执行代码以查看正在比较的后缀以及 if ".txt" = ".pdf" 是否返回 true 并输入 If 语句。

# animation - 带有点击区域的 CSS3 动画

> ID：10850752
> 
> 赞同：1
> 
> 时间：2012-06-01T12:57:27.923
> 
> 标签：animation, css

我制作了一个css3动画。你可以在这里看到它：http: [//mikevierwind.nl/test/templates/](http://mikevierwind.nl/test/templates/)

容器在网站中从右向左滑动，带有 css3 变换和 css3 动画。但我有一个问题。当我在 iPad 上打开网站时。html5 视频中的点击区域没有动画。动画完成后，您无法单击视频播放器。这个问题出在ipad上。

ipad 的 clickarea 没有动画效果……我该如何解决？

# java - 如何转换列表 转换成逗号分隔的字符串而不显式地迭代 List

> ID：10850753
> 
> 赞同：179
> 
> 时间：2012-06-01T12:57:30.123
> 
> 标签：java, list

```
List<String> ids = new ArrayList<String>();
ids.add("1");
ids.add("2");
ids.add("3");
ids.add("4"); 
```

现在我想要这个列表的输出为 1,2,3,4 而不**显式**迭代它。

* * *

## 回答 #1

> 赞同：486
> 
> 时间：2014-05-25T09:59:08.287

在 Android 上使用：

```
android.text.TextUtils.join(",", ids); 
```

* * *

## 回答 #2

> 赞同：161
> 
> 时间：2012-06-01T13:05:35.487

使用 Java 8：

```
String csv = String.join(",", ids); 
```

使用Java 7-，有一种肮脏的方式（***注意：它仅在您不插入包含`", "`在列表中的***字符串时才有效）-显然，`List#toString`将执行一个循环来创建`idList`，但它不会出现在您的代码中：

```
List<String> ids = new ArrayList<String>();
ids.add("1");
ids.add("2");
ids.add("3");
ids.add("4");
String idList = ids.toString();
String csv = idList.substring(1, idList.length() - 1).replace(", ", ","); 
```

* * *

## 回答 #3

> 赞同：104
> 
> 时间：2012-06-01T12:59:37.413

```
import com.google.common.base.Joiner;

Joiner.on(",").join(ids); 
```

或者您可以使用**StringUtils**：

```
 public static String join(Object[] array,
                              char separator)

   public static String join(Iterable<?> iterator,
                              char separator) 
```

*将提供的数组/可迭代的元素连接到包含提供的元素列表的单个字符串中。*

[http://commons.apache.org/proper/commons-lang/javadocs/api-3.3.2/org/apache/commons/lang3/StringUtils.html](http://commons.apache.org/proper/commons-lang/javadocs/api-3.3.2/org/apache/commons/lang3/StringUtils.html)

* * *

## 回答 #4

> 赞同：64
> 
> 时间：2012-10-30T14:15:42.353

**如果要将列表转换为 CSV 格式............**

```
List<String> ids = new ArrayList<String>();
ids.add("1");
ids.add("2");
ids.add("3");
ids.add("4");

// CSV format
String csv = ids.toString().replace("[", "").replace("]", "")
            .replace(", ", ",");

// CSV format surrounded by single quote 
// Useful for SQL IN QUERY

String csvWithQuote = ids.toString().replace("[", "'").replace("]", "'")
            .replace(", ", "','"); 
```

* * *

## 回答 #5

> 赞同：55
> 
> 时间：2013-11-14T22:09:47.160

最快的方法是

```
StringUtils.join(ids, ","); 
```

* * *

## 回答 #6

> 赞同：26
> 
> 时间：2012-06-01T13:04:10.230

以下：

```
String joinedString = ids.toString() 
```

会给你一个逗号分隔的列表。[有关详细信息，请参阅文档](https://docs.oracle.com/javase/9/docs/api/java/util/AbstractCollection.html#toString--)。

您需要进行一些后期处理以删除方括号，但没有什么太棘手的问题。

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2014-04-17T04:26:45.550

一班轮（**纯Java**）

```
list.toString().replace(", ", ",").replaceAll("[\\[.\\]]", ""); 
```

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2015-03-13T10:29:41.940

****在ArrayList上****加入/连接**和**拆分**函数：**

 ******使用逗号**(" **,** ") 将数组列表的所有元素**/concat 连接**到字符串。

 ****```
List<String> ids = new ArrayList<String>();
ids.add("1");
ids.add("2");
ids.add("3");
ids.add("4");
String allIds = TextUtils.join(",", ids);
Log.i("Result", allIds); 
```

**使用逗号**(" **,** ")将 String 的所有元素**拆分**为arraylist。

 ****```
String allIds = "1,2,3,4";
String[] allIdsArray = TextUtils.split(allIds, ",");
ArrayList<String> idsList = new ArrayList<String>(Arrays.asList(allIdsArray));
for(String element : idsList){
    Log.i("Result", element);
} 
```

**完毕**

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2013-10-14T06:58:21.157

我有字符串的 ArrayList，我需要将其转换为逗号分隔的列表，没有空格。ArrayList toString() 方法添加方括号、逗号和空格。我尝试了正则表达式方法，如下所示。

```
List<String> myProductList = new ArrayList<String>();
myProductList.add("sanjay");
myProductList.add("sameer");
myProductList.add("anand");
Log.d("TEST1", myProductList.toString());     // "[sanjay, sameer, anand]"
String patternString = myProductList.toString().replaceAll("[\\s\\[\\]]", "");
Log.d("TEST", patternString);                 // "sanjay,sameer,anand" 
```

请评论以获得更有效的逻辑。（代码适用于Android / Java）

谢谢。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2015-01-12T11:21:05.987

如果不是字符串集合，Java 8 解决方案：

```
{Any collection}.stream()
    .collect(StringBuilder::new, StringBuilder::append, StringBuilder::append)
    .toString() 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2015-09-24T16:54:06.957

如果对象下有属性，您可以使用下面的代码。

```
String getCommonSeperatedString(List<ActionObject> actionObjects) {
    StringBuffer sb = new StringBuffer();
    for (ActionObject actionObject : actionObjects){
        sb.append(actionObject.Id).append(",");
    }
    sb.deleteCharAt(sb.lastIndexOf(","));
    return sb.toString();
} 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2013-08-29T10:29:47.483

如果您使用的是[Eclipse Collections](http://www.eclipse.org/collections/)（以前称为 GS Collections），则可以使用该`makeString()`方法。

```
List<String> ids = new ArrayList<String>();
ids.add("1");
ids.add("2");
ids.add("3");
ids.add("4");

Assert.assertEquals("1,2,3,4", ListAdapter.adapt(ids).makeString(",")); 
```

如果您可以将您的转换`ArrayList`为 a `FastList`，则可以摆脱适配器。

```
Assert.assertEquals("1,2,3,4", FastList.newListWith(1, 2, 3, 4).makeString(",")); 
```

**注意：**我是 Eclipse 集合的提交者。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-06-02T11:53:37.487

这是下面给出的代码，用于将 List 转换为逗号分隔的字符串，而无需显式迭代 List，因为您必须创建一个列表并在其中添加项目，而不是将其转换为逗号分隔的字符串

此代码的输出将是：Veeru,Nikhil,Ashish,Paritosh

而不是列表 [Veeru,Nikhil,Ashish,Paritosh] 的输出

```
String List_name;
List<String> myNameList = new ArrayList<String>();
myNameList.add("Veeru");
myNameList.add("Nikhil");
myNameList.add("Ashish");
myNameList.add("Paritosh");

List_name = myNameList.toString().replace("[", "")
                    .replace("]", "").replace(", ", ","); 
```************

# android - 无法在 Windows 7 上的 Eclipse Indigo 上设置 SDK 管理器

> ID：10850759
> 
> 赞同：0
> 
> 时间：2012-06-01T12:57:53.430
> 
> 标签：android

我去了帮助>安装新软件。我能够安装 ADT 插件。但是配置完之后，eclipse重启了。启动后，我收到一条消息“在 SDK 中找不到工具“C:\Users\Nimit\android-sdks”。当我尝试打开 Android SDK 管理器时，我收到消息“Android SDK 的位置尚未在首选项中设置”。当我转到首选项并选择 android 时，会出现一条消息“在“C:\Users\Nimit\android-sdks”中找不到文件夹 'tools'。

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:12:54.400

**这里的原因是您在“C:\Users\Nimit\android-sdks”**中没有工具文件夹

 **检查存在文件夹工具文件夹的 Windows 资源管理器

就我而言，它存在于

**F:\android-sdk_r15-windows\android-sdk-windows\tools**

所以在eclipse中给出路径

**F:\android-sdk_r15-windows\android-sdk-windows\**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-01T13:06:43.940

希望这个链接能指导这个问题。[http://developer.android.com/sdk/eclipse-adt.html](http://developer.android.com/sdk/eclipse-adt.html) 转到首选项>android（不在这些列表中）> 浏览并选择包含编程“C:\Program Files\Android”中的 sdk 的文件\android-sdk".. 现在它可以工作了..**

# java - 如何在使用 Java 1.4 编写的 Swing 应用程序中关闭所有打开的对话框？

> ID：10850769
> 
> 赞同：2
> 
> 时间：2012-06-01T12:58:53.960
> 
> 标签：java, swing, dialog, jdialog

有没有办法以编程方式关闭 Java 1.4 Swing 应用程序中所有打开的对话框？我知道 Java 6 有`Window.getWindows()`，但这对我不起作用。我们被困在 Java 1.4 中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T13:08:13.137

请参阅以下方法：

*   `Frame`
    *   [`getFrames()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Frame.html#getFrames%28%29)
*   `Window`
    *   [`getOwnedWindows()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#getOwnedWindows%28%29)
    *   [`getOwner()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#getOwner%28%29)

所有这些都是在 Java 1.2 中引入的

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T13:10:03.400

您可以在所有这些框架和窗口上使用`Frame.getFrames()`然后递归调用。`getOwnedWindows()`但是，我不知道这是否会包含无主对话框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-28T11:02:06.127

您可以使用以下代码关闭单个框架：

```
for(Frame f: Frame.getFrames()) {
    if(f.getTitle().matches("Report Window")) { //your frame title
        f.dispose(); //or any other closing methods
    }
} 
```

但是，如果您删除 if 条件，您也可以处理所有这些。

# bash - NodeJS / curl：更改请求

> ID：10850771
> 
> 赞同：0
> 
> 时间：2012-06-01T12:58:59.770
> 
> 标签：bash, shell, curl

我想更改使用**curl**提出的请求。我需要`req.session.co === true`执行我的行动。

所以，我测试：`curl --request GET <url> -H req.session.co: true`

但我收到：

```
{ 
  'user-agent': ...,
  host: 'localhost:8000',
  accept: '*/*',
  'req.session.co': 'true'
} 
```

`req.session.co` *未定义*。_ 表头这个“卷曲”的变化，怎么改出来呢？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:52:19.653

你需要自己设置：

```
req.session.co = req.headers['req.session.co']; 
```

您不能直接通过 HTTP 访问会话，因此`curl`不能以任何方式影响它。

# google-app-engine - 开发服务器中的 AppEngine 电子邮件

> ID：10850774
> 
> 赞同：0
> 
> 时间：2012-06-01T12:59:17.830
> 
> 标签：google-app-engine, jakarta-mail

在 Google App Engine 的开发服务器中，我们在哪里可以看到发送的电子邮件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T16:15:26.860

如果您不连接 SMTP，您应该在日志中看到它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T13:45:46.570

您需要使用启用发送电子邮件的选项来启动开发服务器。您有几个选项，包括指定 SMTP 服务器或使用本地 sendmail（如果您正在运行它）。更多这里..

[https://developers.google.com/appengine/docs/python/tools/devserver#Using_Mail](https://developers.google.com/appengine/docs/python/tools/devserver#Using_Mail)

# c# - 从 ASP.NET C# 中的用户控件内的模式弹出窗口调用 JSON

> ID：10850777
> 
> 赞同：0
> 
> 时间：2012-06-01T12:59:32.080
> 
> 标签：c#, asp.net, json, textbox

我有一个用户控件，它在子页面上作为模式弹出窗口打开。弹出窗口中有一个文本框，我正在验证重复值，因为我已经编写了以下服务器端和客户端函数。

```
function Check_DuplicateMachineType() {
    var hndDuplicateMachineType = document.getElementById('<%= hndDuplicateMachineType.ClientID %>');
    var txtmachineType = document.getElementById('<%= txtmachineType.ClientID %>');
    if (txtmachineType.value.trim() != '' && txtmachineType.value.trim().toLowerCase() != hndDuplicateMachineType.value) {
        $.ajax({
            type: "POST",
            url: "wucMachineType.ascx/CheckDuplicateMachineType",
            data: '{Item: "' + $("#<%=txtmachineType.ClientID%>")[0].value + '" }',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: OnSuccessForMachineType,
            failure: function(response) {
                alert(response);
            }
        });
    }
}
function OnSuccessForMachineType(response) {        
    var txtmachineType = document.getElementById('<%= txtmachineType.ClientID %>');
    var divMachineTypes = document.getElementById('<%= divMachineTypes.ClientID %>');
    divMachineTypes.innerHTML = '';
    switch (response.d) {
        case "true":
            divMachineTypes.style.display = "inline";
            divMachineTypes.innerHTML = "Machine Type already exist";
            $("#<%=divMachineTypes.ClientID%>")[0].focus();
            $("#<%=hndIsDuplicate.ClientID%>")[0].value = '1';
            break;
        case "false":
            $("#<%=hndIsDuplicate.ClientID%>")[0].value = '0';
            break;
        case "error":
            divMachineTypes.style.display = "inline";
            divMachineTypes.innerHTML = "Error occured";
            break;
    }
} 
```

```
[System.Web.Services.WebMethod]
public static string CheckDuplicateMachineType(string Item)
{
    CommonClass objCLSCommon = new CommonClass();
    DataLayer dtLayer = new DataLayer();
    try
    {
        string strQuery = "SELECT machineType from MachineType Where machineType ='" + Item + "'";
        DataTable dtCheckDuplicacy = dtLayer.Get_GeneralData(strQuery);
        if (dtCheckDuplicacy.Rows.Count > 0)
        {
            return "true";
        }
        else
        {
            return "false";
        }
    }
    catch (Exception ex)
    {
        objCLSCommon.LogErrorToFile(objCLSCommon.GetCurrentPageName(), ex.Message.Trim() + Environment.NewLine + ex.StackTrace.Trim());
        return "";
    }
} 
```

我不知道为什么我的`wucMachineType.ascx/CheckDuplicateMachineType`函数没有被调用。错误控制台中也没有错误。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-29T10:57:40.587

[Web 方法] 不要调用写在用户控件（.ascx 文件）上的内容。这是我正在做的错误。

[Web Methods] 必须写在 aspx 页面上。（.aspx 文件）。

# javascript - URL 中有多个哈希符号

> ID：10850781
> 
> 赞同：21
> 
> 时间：2012-06-01T12:59:40.670
> 
> 标签：javascript, http, url, seo

或者，也许你称它为“尖锐”——# 符号。

我遇到过一个实例，其中 #! 和 # 在单个 URL 中同时使用。通过阅读其他文章，包括 RFC，我无法理解这是否是合法的组合。当遇到这样的页面 Mozilla 浏览器（在这种情况下为 Iceweasel）显示 URL 有 2 个 #，而 Chrome 只显示一个，但很快就死掉了（包含该页面的选项卡变得无响应并崩溃 - 但它可能没有连接） .

现在，我的问题是，在一个 URL 中同时包含两者是否合法，是否可能合法且多余（应该规范化），还是只是 Mozilla 浏览器中的一个错误？所以，假设我正在发出 AJAX 请求，或者试图浏览浏览器历史记录 - 如果遇到这种情况，我该怎么办？

![网址中的双哈希](../Images/e89f28c36b05789df9e8c0069e6b4cc0.png)

RFC-3986：[https](https://www.rfc-editor.org/rfc/rfc3986#section-3.4) ://www.rfc-editor.org/rfc/rfc3986#section-3.4 ，应该澄清它......以防万一。

另外：[https](https://developers.google.com/webmasters/ajax-crawling/docs/specification) ://developers.google.com/webmasters/ajax-crawling/docs/specification Google 爬虫如何看待事物。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-01T13:15:52.990

片段的格式只允许使用斜杠、问号和`pchar`s。如果您查看 RFC，您会发现井号标记不是有效的`pchar`.

但是，浏览器会尽最大努力通过将重复哈希视为已转义来读取无效 URL，正如您通过检查`window.location.hash`（在 IE、Firefox 和 Chrome 中）的值可以看到的那样

```
http://www.example.com/hey#foo#bar 
```

这`window.location.hash`对于

```
http://www.example.com/hey#foo%23bar 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-07-16T16:39:03.947

我的回答很明确，至少在参考[RFC 3986](https://www.rfc-editor.org/rfc/rfc3986)时是这样。但你要看的不仅仅是3.4

[第 3 节](https://www.rfc-editor.org/rfc/rfc3986#section-3)定义了 URI 的结构如下：

```
 foo://example.com:8042/over/there?name=ferret#nose
     \_/   \______________/\_________/ \_________/ \__/
      |           |            |            |        |
   scheme     authority       path        query   fragment 
```

（我只取了上半部分，与 URL 相关）

因此，要回答您的问题，您必须查看所有部分：

*   该[方案](https://www.rfc-editor.org/rfc/rfc3986#section-3.1)可能不包含井号（仅`ALPHA *( ALPHA / DIGIT / "+" / "-" / "."`）
*   [权限](https://www.rfc-editor.org/rfc/rfc3986#section-3.2)可能不包含哈希（我在这里不详细介绍），甚至“由下一个斜杠（“/”）、问号（“？”）或数字符号（“#”）终止。
*   [路径](https://www.rfc-editor.org/rfc/rfc3986#section-3.3)“由一系列由斜杠（“/”）字符分隔的路径段组成。路径段又只能由 pchars 组成，参见例如[这个答案](https://stackoverflow.com/a/26119120/1415574)。所以这里没有哈希！它也将由第一个问号 ("?") 或数字符号 ("#") 或 URI 的结尾终止。
*   [查询](https://www.rfc-editor.org/rfc/rfc3986#section-3.4)部分（由第一个“？”表示）只能由 pchar、“/”或“？”组成 并且将“以数字符号（“#”）字符或 URI 的结尾结尾。

因此，到目前为止，除了终止 URI 之外，不允许使用任何散列，如果想使用至少一个散列，这不是我们想要的；-)

最后：

*   该[片段](https://www.rfc-editor.org/rfc/rfc3986#section-3.5)'由数字符号（“#”）的存在表示'并且也仅由pchar、“/”或“?”组成。它“在 URI 的末尾终止”。

综上所述：在一个兼容的 URL（或 URI）中，只允许一个“#”作为 URL-fragment 的标记。特别是应该在路径中的哈希符号（至少从外观上看，因为后面有斜线）是有问题的，因为它们正式终止了路径部分。

这可能会导致问题，例如在使用它的单页应用程序中，因为散列后的导航是在客户端而不是在服务器上完成的。在这种情况下，SPA 应该确保它正确处理接收到的 URL 的其余部分，其中可能包括可能（特定于浏览器的）URL 编码的查询和片段。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T13:26:28.760

正如@apsillers 提到的那样，它可能是合法的。但除非必要，否则我会避免使用它，因为它可能会导致有关 url 的某些混淆。

那种网址：

```
http://www.example.com/hey#foo#bar 
```

对我来说似乎真的很困惑，对普通用户甚至搜索引擎来说会更加困惑。

# java - 如何使用简单的休眠查询更新 blob 字段

> ID：10850783
> 
> 赞同：1
> 
> 时间：2012-06-01T12:59:57.913
> 
> 标签：java, hibernate, blob

我有`Inputstream/byte[]`一个图像文件，我想将其存储在数据库中，但我已经存储了实体，只是我想更新 blob 字段，我有行的 ID。我尝试了以下操作，但对我不起作用：

```
Query query = session.createSQLQuery( "update tableName set blobFieldName=:blbContent where id=5);

query.setBinary("blbContent",myByteArray)

int val = query.executeUpdate(); 
```

n 这个 val 返回 1，但实际上在 DB 中没有发生更新......我不明白我错在哪里。请帮我。我需要这个工作...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:56:19.430

我遇到了同样的问题，但我找到了解决方案。

我将与您分享我的代码：

```
//this is a update method
**public boolean updateImage(Image image) { 

    Session session = template.getSessionFactory().openSession();

    Transaction transaction = session.beginTransaction();

    session.saveOrUpdate(image);

    session.flush();

    transaction.commit();

    session.close();

    return true;
}** 
```

下面是我的`Image`课，我使用的图片类型是 Blob

```
public class Image {

    private int id;

    private Blob image;

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public Blob getImage() {
        return image;
    }

    public void setImage(Blob image) {
        this.image = image;
    }
} 
```

希望它会帮助你。

# html - 即使正确使用了modernizr，opera 也会显示多个日期选择器

> ID：10850786
> 
> 赞同：2
> 
> 时间：2012-06-01T13:00:00.793
> 
> 标签：html, datepicker, opera, modernizr

我遵循了一些教程和书籍来使用 html5**表单**。我使用**modernizr**为不支持的浏览器提供了一个后备。万事皆安。事情甚至在 IE6 中工作。我面临 jquery datepicker ui 的问题。目前只有opera支持**input type="date"**（我使用的是最新版本的opera）。

* * *

尽管我使用**modernizr**来检测浏览器对**input type="date"**的支持，但不知何故，opera 仍在加载 jquery datepicker。我做错什么了吗？？...我应该按特定顺序包含脚本吗？？...

* * *

这是我编写的代码，后面是问题的屏幕截图。

***html标记：***

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>date picker</title>
<link rel="stylesheet" href="jquery-ui/css/redmond/jquery-ui-1.8.20.custom.css"/>
</head>
<body>
<form>
    <input type="date" name="date-picker" id="date-picker" value="2010-10-06" />
</form>
<script src="modernizr.js"></script>
<script src="webforms/webforms2.js"></script>
<script src="jquery.js"></script>
<script src="jquery.ui.core.min.js"></script>
<script src="jquery.ui.datepicker.min.js"></script>
<script src="custom.js"></script>
</body>
</html> 
```

***jQuery代码：***

```
$(document).ready(function(){
    if(!Modernizr.inputtypes.date){
        $('input[type=date]').each(function() {
        var $input = $(this);
        $input.datepicker({
            minDate: $input.attr('min'),
            maxDate: $input.attr('max'),
            dateFormat: 'yy-mm-dd'
        });
    });
 }  
}); 
```

* * *

***截屏：***

[http://imageshack.us/photo/my-images/16/operadatepicker.jpg/](http://imageshack.us/photo/my-images/16/operadatepicker.jpg/)

***源代码：***[媒体火下载链接](http://www.mediafire.com/?mx2nee934wf47ew)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:59:10.410

`Modernizr.inputtypes.date`在 Opera 11 中按预期工作：

[http://jsfiddle.net/feeela/tMUcw/](http://jsfiddle.net/feeela/tMUcw/)

也许错误是，您没有在 Modernizr 的构建中包含“输入类型”。去下载开发者版本或构建自定义下载，但请确保包含“输入类型”。

[http://modernizr.com/download/](http://modernizr.com/download/)

# jquery - 如何防止 jQuery onload 不显眼地闪烁？

> ID：10850787
> 
> 赞同：6
> 
> 时间：2012-06-01T13:00:01.247
> 
> 标签：jquery, tabs, load, flicker, unobtrusive

我正在使用 jQuery UI 选项卡。我应该如何防止加载内容的闪烁，同时确保在禁用 javascript 时内容可见？

我尝试在加载文档时将 .js 类添加到正文中，但是由于选项卡与正在添加的类同时加载，因此内容仍然闪烁。

```
#container{display:none;}

<div id="container">
  <div id="tabs">
    <ul>
      <li><a href="#tabs-1">Nunc tincidunt</a></li>
      <li><a href="#tabs-2">Proin dolor</a></li>
    </ul>
    <div id="tabs-1">
       <p>Tab 1</p>
    </div>
    <div id="tabs-2">
      <p>Tab 2</p>
    </div>
  </div>
</div>
<script>
$(document).ready(function(){
  $('#tabs').tabs();
  $('#container').show();
});
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T13:02:21.517

```
<html class="nojs">
  ...
  <head>
     <script>
       document.documentElement.className = "js";
     </script>
  </head>

  ...
  <style>
  #container {display:none;}
  .nojs #container { display: block;}
  </style> 
```

即使您的设备上没有 js，这也会使您的内容可见。这种方法与 H5BP + Modernizr 执行的方法几乎相同，并且除了好处之外，它将防止 JS FOUC（由于 js 稍后执行而导致的未样式化内容的闪烁）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-01T13:07:35.773

这就是我所做的。在您的 html 标记上放置一个类，`no-js`然后将以下代码放在 html 标记之后：

```
<script>
    // Sets 'js' on html element and removes 'no-js' if present (here to prevent flashing)
    (function(){
        document.documentElement.className = document.documentElement.className.replace(/(^|\s)no-js(\s|$)/, '$1$2') + (' js '); 
    })();
</script> 
```

如果需要，此方法允许您在`html`标签上添加其他类。将样式中的`no-js`类用于未启用 js 的页面。

样式示例：

```
#container {
  display:none;
}
.no-js #container
{ 
  display: block;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T13:03:30.847

你可以这样做：

```
<div id="container">
  <div id="tabs">
  <script>$('#tabs').addClass('js');</script><!-- added this line -->
    <ul>
      <li><a href="#tabs-1">Nunc tincidunt</a></li>
      <li><a href="#tabs-2">Proin dolor</a></li>
    </ul>
    <div id="tabs-1">
       <p>Tab 1</p>
    </div>
    <div id="tabs-2">
      <p>Tab 2</p>
    </div>
  </div>
</div>
<script>
$(document).ready(function(){
  $('#tabs').tabs().show(); // changed this line
  $('#container').show();
});
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-23T08:03:59.890

感谢上述解决负载闪烁的想法。由于浏览器试图尽快呈现标记，因此对于一些（巨大的）jquery-ui 内容元素（如 jquery-ui 选项卡）应该避免这种情况。

这个解决方案对我有用：

```
<html>
...
  <head>
  ...
    <script>
      $(document).ready(function() {
        $("#tabs_container").tabs();

        // force *initialized* #tab_container to be displayed
        $("#tabs_container").show();
      });
    </script>
  </head>
  ...

  <body>
    ...
    <!-- avoid unstyled tabs to be displayed using "display: none" at markup -->
    <div id="tabs_container" style="display: none;">
      <!-- (huge) tabs content -->
    </div>
    ...
  </body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T13:07:11.890

你可以这样尝试：

```
<script>
$("#container").hide();
$(document).ready(function(){
  $('#tabs').tabs();
  $('#container').show();
});
</script> 
```

容器在加载时是隐藏的，当文档准备好并且选项卡完成时，您可以显示容器。

# c++ - QTest for C++ 中每个测试用例消耗多少

> ID：10850791
> 
> 赞同：0
> 
> 时间：2012-06-01T13:00:15.927
> 
> 标签：c++, unit-testing, qt, qttest

有没有一种简单的方法可以知道 QT Test Framework for C++ 中每个测试用例消耗了多少时间？

获得一些指标将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T14:02:46.120

您可以编写一个自定义 Timer 类，该类在创建时启动通常单调的经过计时器，并在删除时打印经过的时间（请参阅 参考资料[`QElapsedTimer::elapsed()`](http://qt-project.org/doc/qt-4.8/qelapsedtimer.html#elapsed)）：

**计时器.h：**

```
#include <QElapsedTimer>
class Timer {
public:
    Timer() {
        timer.start();
    }
    ~Timer() {
        qint64 ms = timer.elapsed();
        qDebug("Time needed: %s ms%s", ms,
               timer.isMontonic() ? "" : " (WARNING: non-monotonic)");
    }
private:
    QElapsedTimer timer;
} 
```

使用`QElapsedTimer`over的好处`QTime`是 Qt 将尝试使用每个平台上最好的可用单调计时器。`QTime`不保证是单调的：时间同步守护进程/服务调整时钟等时会减少。

`Timer t;`现在在要测量时间的每个测试用例的开头插入该行；没有更多的代码。这只是创建一个`Timer`对象，该对象启动内部计时器，并在对象超出范围（在方法的末尾）时删除该对象，从而打印经过的时间：

**您的测试用例（.cpp）：**

```
#include "timer.h"
...
void TestClass::myTestCase1()
{
    Timer t; //the only line needed to add to your test case

    ... //the code for test case
}
void TestClass::myTestCase2()
{
    Timer t; //the only line needed to add to your test case

    ... //the code for test case
}
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T13:11:25.493

`time_t t = time(0);`将定义一个自纪元以来以毫秒为单位的时间变量，并将其设置为当前时刻。在测试前关闭其中一个，在测试后关闭一个，然后比较两者以了解测试花费了多长时间。正如 cbamber85 所指出的，它会因许多事情而有所不同，因此如果您希望您的指标具有任何意义，您需要保持您的平台稳定（即使那样它们也只是相对而言才有意义），但这至少是一些事情你可以一起工作。

# asp.net - 对预编译的网站进行更改

> ID：10850793
> 
> 赞同：2
> 
> 时间：2012-06-01T13:00:17.157
> 
> 标签：asp.net, precompiled

就像我目前的生活一样，我继承了另一个需要改变的项目。

然而，这段代码已经被预编译（猜猜是什么......）

我有一些源代码，一组程序集形成临时文件夹。然而，该项目抱怨缺少一些用户控件和子目录中的母版页。

我在我拥有的程序集中的任何地方都看不到这些，而且它们不在我从网站上获取的代码中。那么，我在哪里可以找到预编译母版页和用户控件的 UI 部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T13:04:07.600

您可以在已编译的网站 DLL 上使用 IL 反编译器（如[ilspy](http://wiki.sharpdevelop.net/ILSpy.ashx)或反射器）并从中检索原始源代码。

这可能需要相当多的时间和精力，但是您应该能够以这种方式重建大部分丢失的源代码（尽管您可能没有正确的变量名称或完全相同的代码，而且绝对没有注释）。

# php - PHP - 重复并将变量附加到计算中

> ID：10850801
> 
> 赞同：0
> 
> 时间：2012-06-01T13:00:54.810
> 
> 标签：php, string, variables, repeat

我正在尝试创建一个脚本，该脚本需要 a`$$variable`并将它们相互添加多次（基于另一个变量）-`$total`

这个脚本是一个更大的脚本的一部分，它包含一些 SQL 查询和循环，因此`$$value`与通常的相反`$value`

我当前的（静态）脚本是这样的：

```
$$value = ($$value + $$value + $$value + $$value + $$value); 
```

如果我继续修改`+ $$value`括号内的数量，这将起作用，但我需要它自动计算和修改自身，以便它始终写入正确的数量`+ $$value`

我尝试过使用`str_repeat()`，但它只获取`$$value`变量的第一个值，然后重复该值（不获取下一个值等等）。我也尝试过创建一个循环，但也没有用。

我需要一些可以查看`$total`并从该数字产生类似于以下内容的东西：

```
$$value = ($$value * $total) 
```

以上将乘以 的数值`$$value`，因此不会返回我想要的结果。

任何人都可以帮忙吗？

非常感谢，

汤姆

Pastebin 链接到我的脚本：[http://pastebin.com/7Qg02hWB](http://pastebin.com/7Qg02hWB)（在 pastebin 中，`$$valu`e is`$$ob_id`和`$total`is `$o_total`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:05:36.390

不是 100% 确定你的意思，但如何

```
$foo = "";
for ($i = 0; $i < $total; $i++) $foo .= $$value;
$$value = $foo; 
```

这将循环 $total 次并将其连接起来。如果您遇到问题，例如由于某种原因将其添加为整数，您总是可以进行像`(string) $$value`. 我知道您说您尝试了循环，但我们没有代码，因此您的代码可能有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:29:32.083

这？

```
perhaps you need powers?

$total = 5;
$$variable = 2;    // random value; and why i have two 2 $$ ?
for($x=0;$x<$total;$x++) {
   $$variable += $$variable;
}
echo $$variable;

OR,

$total = 5;
$$variable = 2;
echo "<br>POWER of 2^$total: ".pow($$variable,$total); 
```

# xml - FaultException 并且没有 WCF 服务

> ID：10850810
> 
> 赞同：0
> 
> 时间：2012-06-01T13:01:50.473
> 
> 标签：xml, windows-phone-7, soap, xml-serialization, faultexception

我`System.ServiceModel.FaultException`在我的 Windows Phone 应用程序中收到以下内容。对该异常的一些研究表明它与 SOAP 错误有关。这很奇怪，因为我没有打任何肥皂电话，尤其是在出现异常时。

它似乎在我在页面之间导航后出现，并且在我尝试使用该应用程序时变得越来越糟。

我有两个 Webclient 调用，但大多数时候通过本地缓存数据避免了这些调用（因此我可以将它们注释掉并仍然使用我的应用程序），但我仍然收到这些错误。

我似乎无法在网上找到任何有用的资源，所以希望有人知道这一点以及如何解决它。即使我能够吞下异常，这对今天也会有所帮助。

现在我正在输入这个，我想知道它是否与我缓存在隔离存储中的 xml 数据中的 xmlnamespace 有关。有人听说过这件事吗？

更新：
好吧，当我不加载 xml 并对其进行反序列化时，我没有得到 FaultExceptions。也许如果我能摆脱命名空间......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:43:33.950

这是由于附加了独立存储资源管理器造成的。删除此引用修复了它。

# objective-c - NSDate 没有从字符串中提取日期

> ID：10850819
> 
> 赞同：0
> 
> 时间：2012-06-01T13:02:15.543
> 
> 标签：objective-c

我有一个看起来像这样的字符串

```
NSString *string = @"2012-04-30T23:59:00+10:00"; 
```

现在，我正在尝试将其转换为 NSDate 格式（以便稍后将数据存储在数据库中）。现在，我似乎无法获得适用于我当前日期的日期格式。我在用

```
NSDateFormatter *assignmentDateFormat = [[NSDateFormatter alloc] init];
                        [assignmentDateFormat setDateFormat:@""]; 
```

解析我的日期，但我似乎无法正确组合（例如 YYYY-MM-dd 等）。

任何帮助将不胜感激，如果有人知道如何做时区部分（+10:00），那将是惊人的。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:05:56.967

这里有一个简单的教程：[http ://www.picksourcecode.com/ps/ct/161110.php](http://www.picksourcecode.com/ps/ct/161110.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:06:07.060

完整的规范在这里：[http ://unicode.org/reports/tr35/tr35-10.html#Date_Format_Patterns](http://unicode.org/reports/tr35/tr35-10.html#Date_Format_Patterns)

（在 Apple 文档中查找有点棘手……为它添加书签！）

编辑：好的，试试这个：`yyyy-MM-dd'T'HH:mm:ssZ`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-01T13:13:35.793

用这个：

```
NSDateFormatter *assignmentDateFormat = [[NSDateFormatter alloc] init];
 [assignmentDateFormat setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss+10:00"]; 
```

# bash - 通过 ssh 运行多个命令并将输出存储在不同的文件中

> ID：10850828
> 
> 赞同：3
> 
> 时间：2012-06-01T13:02:34.520
> 
> 标签：bash, unix, ssh, command

我已经设置了我的公钥和私钥并进行了自动 ssh 登录。我想在一个登录会话中执行两个命令，例如 command1 和 command2，并将它们存储在**本地计算机上的文件 command1.txt 和 command2.txt 中。**

我正在使用此代码

`ssh -i my_key user@ip 'command1 command2'`并且这两个命令在一次登录中执行，但我不知道如何将它们存储在 2 个不同的文件中。

我想这样做是因为我不想重复 ssh 到我的远程主机。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T13:06:45.603

除非您可以解析两个命令的实际输出并区分哪个是哪个，否则您不能。您将需要两个单独的 ssh 会话：

```
ssh -i my_key user@ip command1 > command1.txt
ssh -i my_key user@ip command2 > command2.txt 
```

您还可以将输出重定向到远程计算机上的文件，然后将它们复制到本地计算机：

```
ssh -i my_key user@ip 'command1 > command1.txt; command2 > command2.txt'
scp -i my_key user@ip:'command*.txt' . 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T13:18:45.353

不，您必须在@lanzz 已经提到的单独命令（多次登录）中单独执行此操作。要将输出保存在本地，请喜欢

```
ssh -i my_key user@ip "command1" > .\file_on_local_host.txt 
```

如果您想在一次登录中运行多个命令，然后将所有命令记入脚本中，然后通过 SSH 运行该脚本，而不是运行多个命令。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-01T15:03:38.070

这是可能的，但可能比它的价值更麻烦。如果您可以生成保证不会出现在 command1 输出中的唯一字符串，则可以执行以下操作：

```
$ ssh remote 'cmd1; echo unique string; cmd2' |
  awk '/^unique string$/ { output="cmd2"; next } { print > output }' output=cmd1 
```

这只是开始打印到文件`cmd1`，然后`cmd2`在看到唯一字符串时将输出更改为文件。您可能还想处理 stderr 。这留给读者作为练习。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-18T22:21:08.857

你可以这样做。假设您可以设置从远程计算机返回到本地计算机的身份验证，您可以使用 ssh 将命令的输出通过管道传回。诀窍是正确使用反斜杠。

```
ssh remotehost command1 \| ssh localhost cat \\\> command1.txt \; command2 \| ssh localhost cat \\\> command2.txt 
```

或者如果你不是那么喜欢反斜杠......

```
ssh remotehost 'command1 | ssh localhost cat \> command1.txt ; command2 | ssh localhost cat \> command2.txt' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-07T20:46:54.223

选项 1\. 告诉你的老板他很傻。除非，当然，他不是，并且有一个关键原因需要在一次会议中全部完成。出于某种原因，这种情况超出了我的想象。

选项 2\. 为什么不焦油？

```
ssh -i my_key user@ip 'command1 > out1; command2 > out2; tar cf - out*' | tar xf - 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-01T13:08:45.523

使用 && 加入他们，这样你就可以拥有它

```
ssh -i my_key user@ip "command1 > command1.txt && command2 > command2.txt && command3 > command3.txt" 
```

希望这可以帮助

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-16T16:30:25.080

我能够做到，这*正是*我所做的：

```
ssh root@your_host "netstat -an;hostname;uname -a" 
```

这会按顺序执行命令并将它们完美地放在我的屏幕上。

确保以引号开始和结束，否则它将远程运行第一个命令，然后对本地计算机运行其余命令。

我的服务器有一个 rsa 密钥对，所以如果你想避免凭证检查，那么显然你必须制作那对。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-25T09:47:29.080

我认为这就是你需要的：首先你需要`sshpass`在你的机器上安装。然后您可以编写自己的脚本：

```
while read pass port user ip; do
sshpass -p$pass ssh -p $port $user@$ip <<ENDSSH1
    COMMAND 1  > file1
    .
    .
    .
    COMMAND n  > file2
ENDSSH1
done <<____HERE
    PASS    PORT    USER    IP
      .      .       .       .
      .      .       .       .
      .      .       .       .
    PASS    PORT    USER    IP    
____HERE 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2013-06-07T06:05:21.027

如何使用单个 ssh 连接在远程服务器上运行多个命令。

[root@nismaster ~]# ssh 192.168.122.169 "uname -a;hostname" root@192.168.122.169 的密码：Linux nisclient2 2.6.18-164.el5 #1 SMP Tue Aug 18 15:51:54 EDT 2009 i686 i686 i386 GNU/Linux nisclient2

```
 OR 
```

[root@nismaster ~]# ssh 192.168.122.169 "uname -a && hostname" root@192.168.122.169 的密码：Linux nisclient2 2.6.18-164.el5 #1 SMP Tue Aug 18 15:51:54 EDT 2009 i686 i686 i386 GNU/Linux nisclient2

# c# - 如何获取 Telerik 树视图的层次结构节点级别

> ID：10850832
> 
> 赞同：1
> 
> 时间：2012-06-01T13:03:01.320
> 
> 标签：c#, javascript, xml, telerik

您好我正在将一个动态**XML 文件**作为**层次结构树视图**填充到 Telerik 树视图中，如下所示。

```
Modules //root node

* Organization //Parent node

    *Policy  //Child of Organization

    *Transports

* Employess   

    *Salary

* Rewards

    *Winners 
```

当我要选择**Modules-> Organization -> Policy**时，我想在我的客户端事件中获取此层次结构，但现在我仅将最后一个节点值作为“ **Policy** ”。我想得到这个等级制度的完整路径。

我的客户事件代码是：

```
 function onSelect(e) {
    debugger;
    var tv = $('#HierarchyView').data('tTreeView');
    var file = tv.getItemValue(e.item); // Here I am getting the last node name as "Policy", I want to get it as Modules-> Organization -> Policy 
    var nodeElement = e.item;
    } 
```

谁能告诉我获得该**层次结构**的方法？这很紧急。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:52:10.160

这是解决方案：

[带有 javascript 的节点路径的 Telerkik 文档](http://www.telerik.com/help/aspnet-ajax/treeview-client-nodes-full-path.html)

问候

# javascript - 未执行 oneclick 事件处理程序

> ID：10850841
> 
> 赞同：0
> 
> 时间：2012-06-01T13:03:34.533
> 
> 标签：javascript

```
<html>
<head>
<title>Page title</title>
<script language="JavaScript" type="text/javascript">

        function oneClick ()
        {
         document.write ( "oneClick () executed." );
        }
</script>

</head>
<body>

<input id = "button1" type = "button" value = "click" oneclick = "oneClick ()" />

</body>
</html> 
```

单击按钮后没有任何反应，我认为 oneClick () 没有执行！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T13:05:06.980

`oneclick`事件处理程序名称应该是`onclick`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T13:05:48.700

oneclick就是onclick

```
<html> 
<head> 
<title>Page title</title> 
<script language="JavaScript" type="text/javascript"> 

        function oneClick () 
        { 
         document.write ( "oneClick () executed." ); 
        } 
</script> 

</head> 
<body> 

<input id = "button1" type = "button" value = "click" onclick = "oneClick ()" /> 

</body> 
</html> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-01T13:07:22.873

```
<input id = "button1" type = "button" value = "click" onclick = "oneClick();" /> 
```

它现在应该可以正常工作了。将 oneclick 替换为 onclick=""

# html - 选择框：在选项值中使用 html 元素

> ID：10850843
> 
> 赞同：2
> 
> 时间：2012-06-01T13:03:38.223
> 
> 标签：html, css

请看图片

![在此处输入图像描述](../Images/b5feb1834d3274de5a1bd2dbc998c927.png)

Andrede 选项有红色 * ，表示必填字段。

我已经尝试`Andrede<span class=required>*</span>`作为选项值，但它无法显示完整的 html 标签

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:07:00.843

选项元素只能[包含文本](https://stackoverflow.com/questions/5678760/it-is-bad-to-put-span-tags-inside-option-tags-only-for-string-manipulat)。

如果要包含标记，则需要将整个 select 元素替换为 JavaScript 小部件。

我建议更改设计，以便您拥有一个真实的`<label>`而不是使用占位符或默认值（两者都对可访问性产生严重影响）。它是一个网页，因此可以使用滚动条。没有必要有一个局促的设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:08:30.880

如果您正在谈论给定的图片，那么他们有自己的选择框，该框由选项元素以外的元素构建

# asp-classic - 调整多维数组的大小并按日期排序

> ID：10850848
> 
> 赞同：0
> 
> 时间：2012-06-01T13:03:53.657
> 
> 标签：asp-classic

我认为我的代码成功地创建了多维数组，因为当我用 UBound(DataArray) 计算它时我得到了正确的数量。

但是当我尝试将其中一个数据显示为 Response.Write DataArray(1,0) 时，我得到空值。

任何帮助表示赞赏！

```
 sDateArray = Split(DateArray, ",")
    sVenueArray = Split(VenueArray, ",")

    Dim DataArray()    
    For i = 0 to uBound(sDateArray)-1 
        ReDim DataArray(i, 1)
        DataArray(i, 0) = sDateArray(i)
        DataArray(i, 1) = sVenueArray(i)
    Next

    Response.Write UBound(DataArray) & "<br /><br />"
    DataArray(1,0)
    Response.Write DataArray(1,0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:09:19.610

尝试`Redim Preserve DataArray(i, 1)`代替`ReDim DataArray(i, 1)`

...或者...

```
sDateArray = Split(DateArray, ",")
sVenueArray = Split(VenueArray, ",")

Dim DataArray(uBound(sDateArray)-1, 1)    
For i = 0 to uBound(sDateArray)-1
    DataArray(i, 0) = sDateArray(i)
    DataArray(i, 1) = sVenueArray(i)
Next

Response.Write UBound(DataArray) & "<br /><br />"
' DataArray(1,0) ' <== commented out cos I think this might be an error - ?
Response.Write DataArray(1,0) 
```

好的，我很无聊，所以我写了这个。

可能并不完美 - 我使用 Classic ASP 已经有一段时间了

```
Function SortByDate(a_input)

    x = UBound(a_input, 1) - 1
    if( x < 1 ) Then
        Response.Write "<p>Invalid input array - first element is empty</p>"
        Stop
    End If
    Dim a_output(x, 1)
    Dim earliest_date

    For j=0 To x
        earliest_date = -1
        For i=0 To UBound(a_input, 1) - 1
            If a_input(0, i) <> "" Then
                If earliest_date = -1 Then
                    earliest_date = i
                Else
                    If CDate(a_input(0,i)) > CDate(a_input(0,earliest_date)) Then
                        earliest_date = i
                    End If
                 End If
            End If
        Next
        a_output(0, i) = a_input(0, earliest_date)
        a_output(1, i) = a_input(1, earliest_date)
        a_input(0, earliest_date) = "" ' this one is done so skip next time '
    Next

    SortByDate = a_output
End Function 
```

# yahoo - 我将如何获得我的网站的雅虎关键字排名？

> ID：10850849
> 
> 赞同：2
> 
> 时间：2012-06-01T13:03:55.743
> 
> 标签：yahoo, seo

我在一家公司担任搜索引擎优化团队负责人，在一个名为[http://www.Prooftech.com.sg](http://www.Prooftech.com.sg)的项目中面临问题...

问题 ：-

该网站有 10 个关键字，我的客户希望在雅虎新加坡搜索引擎中排名前 10。

在我 3 个月的工作中，我在以下 7 个关键字防水、RC 屋顶、墙漏、天花板漏水、漏水、屋顶瓷砖涂料、屋顶瓷砖修复中获得了前 10 名，但我仍然没有获得屋顶、混凝土的上市位置修复，灌浆....

我做了很多书签、博客评论、博客创作、新闻发布、分类广告，以在列表中获取这 3 个关键字，但结果没有变化....

任何人都可以帮助我解决这个问题，这样我就可以获得屋顶，混凝土修复，灌浆的良好排名

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:48:38.520

尝试 ：

*   关键字词法字段中的更多内容，
*   您的关键字上的一些专用目标网页，
*   更多样化的锚点为您的外链，
*   更多来自社交网络的外链（病毒式操作、视频链接...），
*   更定期的外链（不仅仅是一天的爆炸......），
*   花钱请一些在你的词汇领域有影响力的博主写一篇非常好的文章，
*   使用一些 Black/GreyHat 链接工具，例如 Xrumer/Zennoposter/Scrapebox/SenukeX ...

![搜索引擎优化过程](../Images/75445fd529858824d93ee56fe2350e3d.png)

# android - 无法在android中检索由数据库填充的arraylist项目？

> ID：10850852
> 
> 赞同：0
> 
> 时间：2012-06-01T13:03:58.067
> 
> 标签：android

我正在从事与智力竞赛相关的项目。在项目中，我希望在同一个按钮上单击两个事件，例如当用户单击按钮（答案选项）时，它会将他检索到另一个问题（来自同一个数组列表），同时将单击的答案保存到数据库中。提前致谢 ！

我正在做这样的事情..

```
public class QuizeActivity extends Activity implements
        android.view.View.OnClickListener {
    private List<String> Questionlist = new ArrayList<String>();
    private List<String> FirstOptionlist = new ArrayList<String>();
    private List<String> SecondOptionlist = new ArrayList<String>();
    private List<String> ThirdOptionlist = new ArrayList<String>();
    private List<String> FourthOtionlist = new ArrayList<String>();
    private List<String> RightOtionlist = new ArrayList<String>();
    DBAdapter db = new DBAdapter(this);
    private String question, opt_one, opt_two, opt_three, opt_four, roght;
    private Button op1_btn, op2_btn, op3_btn, op4_btn;
    private TextView quest;
    private int count = 0;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        quest = (TextView) findViewById(R.id.ques_txt);
        op1_btn = (Button) findViewById(R.id.optOne_btn);
        op2_btn = (Button) findViewById(R.id.optSec_btn);
        op3_btn = (Button) findViewById(R.id.optThrd_btn);
        op4_btn = (Button) findViewById(R.id.optFrt_btn);
        op1_btn.setOnClickListener(this);
        op2_btn.setOnClickListener(this);
        op3_btn.setOnClickListener(this);
        op4_btn.setOnClickListener(this);

        Questionlist.clear();
        FirstOptionlist.clear();
        SecondOptionlist.clear();
        ThirdOptionlist.clear();
        FourthOtionlist.clear();
        RightOtionlist.clear();

        // ---get all titles---
        try {
            db.open();
            Cursor c = db.getAllTitles();
            if (c.moveToFirst()) {
                do {
                    DisplayTitle(c);
                } while (c.moveToNext());
            }
            c.close();
            db.close();

        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        on_ButtonClick();

    }

    private void DisplayTitle(Cursor c) {
        // TODO Auto-generated method stub
        Questionlist.add(c.getString(1));
        FirstOptionlist.add(c.getString(2));
        SecondOptionlist.add(c.getString(3));
        ThirdOptionlist.add(c.getString(4));
        FourthOtionlist.add(c.getString(5));
        RightOtionlist.add(c.getString(6));
    }

    private void on_ButtonClick() {
                quest.setText(Questionlist.get(count));
                op1_btn.setText(FirstOptionlist.get(count));
                op2_btn.setText(SecondOptionlist.get(count));
                op3_btn.setText(ThirdOptionlist.get(count));
                op4_btn.setText(FourthOtionlist.get(count));

    }

    public void onClick(View v) {
        // TODO Auto-generated method stub
        if (v == op1_btn) {

        }

        if (v == op2_btn) {
            count++;
        }
        if (v == op3_btn) {
            count++;
        }
        if (v == op4_btn) {
            count++;
        }

    }

} 
```

# c# - 如何通过 LDAP + SSL 验证 Active Directory 凭据？

> ID：10850860
> 
> 赞同：15
> 
> 时间：2012-06-01T13:04:11.733
> 
> 标签：c#, .net, active-directory, ldap, directoryservices

我正在尝试使用 .NET 3.5命名空间**通过 SSL 加密的 LDAP 连接**`System.DirectoryServices.AccountManagement`针对我们的 Active Directory LDAP 服务器验证用户凭据。这是示例代码：

 **```
using (var pc = new PrincipalContext(ContextType.Domain, "sd.example.com:389", "DC=sd,DC=example,DC=com", ContextOptions.Negotiate))
{
    return pc.ValidateCredentials(_username, _password);
} 
```

此代码在不安全的 LDAP（端口 389）上运行良好，但我宁愿不以明文形式传输用户/密码组合。但是当我更改为 LDAP + SSL（端口 636）时，出现以下异常：

```
System.DirectoryServices.Protocols.DirectoryOperationException: The server cannot handle directory requests.
  at System.DirectoryServices.Protocols.ErrorChecking.CheckAndSetLdapError(Int32 error)
  at System.DirectoryServices.Protocols.LdapSessionOptions.FastConcurrentBind()
  at System.DirectoryServices.AccountManagement.CredentialValidator.BindLdap(NetworkCredential creds, ContextOptions contextOptions)
  at System.DirectoryServices.AccountManagement.CredentialValidator.Validate(String userName, String password)
  at System.DirectoryServices.AccountManagement.PrincipalContext.ValidateCredentials(String userName, String password)
  at (my code) 
```

端口 636 用于其他活动，例如查找该 LDAP/AD 条目的非密码信息......

```
UserPrincipal.FindByIdentity(pc, IdentityType.SamAccountName, _username) 
```

...所以我知道这不是我的 LDAP 服务器的 SSL 设置，因为它可以通过 SSL 进行其他查找。

有没有人接到`ValidateCredentials(...)`要求通过 SSL 工作的电话？你能解释一下怎么做吗？还是有另一种/更好的方法来安全地验证 AD/LDAP 凭据？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-01T15:32:06.283

`System.DirectoryServices.Protocols`感谢一位同事，我能够使用命名空间验证凭据。这是代码：

```
// See http://support.microsoft.com/kb/218185 for full list of LDAP error codes
const int ldapErrorInvalidCredentials = 0x31;

const string server = "sd.example.com:636";
const string domain = "sd.example.com";

try
{
    using (var ldapConnection = new LdapConnection(server))
    {
        var networkCredential = new NetworkCredential(_username, _password, domain);
        ldapConnection.SessionOptions.SecureSocketLayer = true;
        ldapConnection.AuthType = AuthType.Negotiate;
        ldapConnection.Bind(networkCredential);
    }

    // If the bind succeeds, the credentials are valid
    return true;
}
catch (LdapException ldapException)
{
    // Invalid credentials throw an exception with a specific error code
    if (ldapException.ErrorCode.Equals(ldapErrorInvalidCredentials))
    {
        return false;
    }

    throw;
} 
```

我不喜欢使用 try/catch 块来控制决策逻辑，但它确实有效。：/

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-12T17:44:15.667

也许这是另一种方式。验证凭据没有什么异常。ContextOptions 必须正确设置。

默认值：

> ContextOptions.协商 | ContextOptions.Signing | ContextOptions.Sealing

添加 SSL：

> ContextOptions.协商 | ContextOptions.Signing | ContextOptions.Sealing | ContextOptions.SecureSocketLayer

ContextOptions.Negotiate 或 ContextOptions.SimpleBind 是必需的。或者您的服务器需要执行身份验证的任何内容。ContextOptions 仅支持 OR 位对位。

您也可以尝试在 ValidateCredentials 方法中直接设置 ContextOptions。

```
using (var pc = new PrincipalContext(ContextType.Domain, "sd.example.com:636", "DC=sd,DC=example,DC=com", ContextOptions.Negotiate | ContextOptions.SecureSocketLayer))
{
    return pc.ValidateCredentials(_username, _password);
} 
```

或者

```
using (var pc = new PrincipalContext(ContextType.Domain, "sd.example.com:636", "DC=sd,DC=example,DC=com", ContextOptions.Negotiate))
{
    return pc.ValidateCredentials(_username, _password, ContextOptions.Negotiate | ContextOptions.SecureSocketLayer);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-02T21:12:03.963

对我来说，ValidateCredentials 方法工作得很好。我发现问题出在托管 AD 的服务器上（我正在使用 AD LDS）。您需要将服务器证书与 AD 实例相关联。因此，如果您的实例名为“MyAD”​​（或 ActiveDirectoryWebService），您需要打开 MMC，进入“证书”模块，选择“服务帐户”，然后从列表中选择“MyAD”​​。从那里您可以将 SSL 证书添加到“MyAD”​​个人存储中。这最终启动了 SSL 处理。

我怀疑，根据我对**LdapConnection**方法的了解以及您省略了回调函数的事实，您没有验证您的服务器证书。这是一项繁琐的工作，而**ValidateCredentials**是免费的。可能没什么大不了的，但仍然存在安全漏洞。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-15T22:24:54.263

我知道这已经过时了，但是对于再次遇到此问题的任何人：

`PrincipalContext.ValidateCredentials(...)`，默认情况下，尝试打开 SSL 连接 ( `ldap_init(NULL, 636)`)，然后设置选项`LDAP_OPT_FAST_CONCURRENT_BIND`。

但是，如果存在（受信任的？）**客户端证书**，则 LDAP 连接是隐式绑定的，并且无法再启用快速绑定。PrincipalContext 不考虑这种情况，并因意外而失败`DirectoryOperationException`。

**解决方法：**要尽可能支持 SSL，但有一个备用方案，请`ValidateCredentials(...)`首先使用默认选项（即没有选项）调用。如果`DirectoryOperationException`使用. `ContextOptions`_ `ValidateCredentials`_`LdapException`**

# css - IE 5-7 (CSS) 的渐变

> ID：10850861
> 
> 赞同：0
> 
> 时间：2012-06-01T13:04:15.883
> 
> 标签：css

好的，所以我目前在 IE 5-7 中遇到渐变问题（出于兼容性原因，它需要在那里。）

我尝试使用以下代码：

```
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#edfdff', endColorstr='#b3e9ef',GradientType=1 ); /* IE6-8 */ 
```

但是它根本不显示渐变，只显示白色背景，我用于 IE9+ 和 IE10+ 的其他代码工作正常并且没有问题，这同样适用于所有其他浏览器和用于它们的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:39:13.147

我通过简单地创建一个 1 像素的渐变然后重复它并设置颜色来解决这个问题。

```
background: #edfdff url(images/gradient_slice.png) 0 0 x-repeat; /* Old browsers */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T14:51:49.977

根据[MSDN](http://msdn.microsoft.com/en-us/library/ms532997%28v=vs.85%29.aspx)，您应用渐变的元素必须具有布局。也就是说，它必须具有 a `width`、 a`height`或 a `position`，否则渐变将不可见。

所以[这个 jsFiddle](http://jsfiddle.net/prE2y/1/)在 IE6 中工作，但[这个](http://jsfiddle.net/prE2y/3/)没有。

顺便说一句，您自己的答案与您问题中的示例不同。首先，`x-repeat`应该是`repeat-x`。其次，`GradientType=1`垂直重复，而不是水平重复。

# jquery - wicked_pdf - 仅 jquery css zeba 样式表体（Rails 3.2.3）以及放置 css/javascript 文件的位置（公共或应用程序/资产）

> ID：10850863
> 
> 赞同：0
> 
> 时间：2012-06-01T13:04:31.360
> 
> 标签：jquery, ruby-on-rails-3.2, wicked-pdf

这链接到我之前的问题，该问题是关于使用 css 设置表格的样式。我现在没有添加并意识到这是一个错误，当将页面呈现为 html 时，使用了一些 jquery。

[wicked_pdf / wkhtml - 支持使用 tr.odd 和 tr.even 更改背景颜色的 css 表](https://stackoverflow.com/questions/10839778/wicked-pdf-wkhtml-support-for-css-tables-using-tr-odd-and-tr-even-to-change)

用于此的 jquery 如下：

```
$(document).ready(function(){
  $('tbody tr:even').addClass('stripe');
  $('tbody tr').hover(function(){
    $(this).addClass('stripeHover');
  }, function(){
    $(this).removeClass('stripeHover');
  });
}); 
```

我假设当我们渲染一个 PDF 文件时，悬停是多余的，所以这可以简化为：

```
$(document).ready(function(){
  $('tbody tr:even').addClass('stripe');
}); 
```

这是我正在使用的 wicked_pdf_helper.rb 文件。使用资产管道，我不确定我是要在公共场合还是在 app/assets/javascripts 中创建我的文件。根据我有限的理解并在这里回答我的问题+审查对 gem 的更改，Rails 2 -> 3 -> 3.1 -> 3.2 的更改似乎都影响了这一点。

这是我使用的最新帮助文件文件：

```
module WickedPdfHelper
  def wicked_pdf_stylesheet_link_tag(*sources)
    css_dir = Rails.root.join('public','stylesheets')
    sources.collect { |source|
      "<style type='text/css'>#{File.read(css_dir.join(source+'.css'))}</style>"
}.join("\n").html_safe
  end

  def pdf_image_tag(img, options={})
    image_tag "file:///#{Rails.root.join('public', 'images', img)}", options
  end

  def wicked_pdf_javascript_src_tag(jsfile, options={})
    #javascript_src_tag "file:///#{Rails.root.join('public','javascripts',jsfile)}", options
  end

  def wicked_pdf_javascript_include_tag(*sources)
    sources.collect{ |source| wicked_pdf_javascript_src_tag(source, {}) }.join("\n").html_safe
  end

  module Assets
    def wicked_pdf_stylesheet_link_tag(*sources)
      sources.collect { |source|
        "<style type='text/css'>#{read_asset(source+".css")}</style>"
  }.join("\n").html_safe
    end

    def wicked_pdf_image_tag(img, options={})
      image_tag "file://#{asset_pathname(img).to_s}", options
    end

    def wicked_pdf_javascript_src_tag(jsfile, options={})
      javascript_include_tag "file://#{asset_pathname(jsfile).to_s}", options
    end

    def wicked_pdf_javascript_include_tag(*sources)
      sources.collect { |source|
        "<script type='text/javascript'>#{read_asset(source+".js")}</script>"
  }.join("\n").html_safe
    end

    private

    def asset_pathname(source)
      if Rails.configuration.assets.compile == false
        File.join(Rails.public_path, asset_path(source))
      else
        Rails.application.assets.find_asset(source).pathname
      end
    end

    def read_asset(source)
      if Rails.configuration.assets.compile == false
        IO.read(asset_pathname(source))
      else
        Rails.application.assets.find_asset(source).to_s
      end
    end
  end
end 
```

该文件的先前版本是：

```
module WickedPdfHelper
  def wicked_pdf_stylesheet_link_tag(*sources)
    options = sources.extract_options!
    if request.try(:format).to_s == 'application/pdf'
      #css_dir = Rails.root.join('public','stylesheets')
      css_dir = Rails.root.join('app','assets', 'stylesheets')
      refer_only = options.delete(:refer_only)
      sources.collect { |source|
        source.sub!(/\.css$/o,'')
        if refer_only
          stylesheet_link_tag "file://#{Rails.root.join('public','stylesheets',source+'.css')}", options
        else
          "<style type='text/css'>#{File.read(css_dir.join(source+'.css'))}</style>"
        end
      }.join("\n").html_safe
    else
      sources.collect { |source|
        stylesheet_link_tag(source, options)
      }.join("\n").html_safe
    end
  end

  # def wicked_pdf_stylesheet_link_tag(*sources)
  #   sources.collect { |source|
  #     "<style type='text/css'>#{Rails.application.assets.find_asset("#{source}.css")}</style>"
  #   }.join("\n").gsub(/url\(['"](.+)['"]\)(.+)/,%[url("#{wicked_pdf_image_location("\\1")}")\\2]).html_safe
  # end

  def pdf_image_tag(img, options={})
    if request.try(:format).to_s == 'application/pdf'
      image_tag "file://#{Rails.root.join('app', 'assets', 'images', img)}", options rescue nil
    else
      image_tag img.to_s, options rescue nil
    end
  end

  def wicked_pdf_javascript_src_tag(jsfile, options={})
    if request.try(:format).to_s == 'application/pdf'
      jsfile.sub!(/\.js$/o,'')
      javascript_src_tag "file://#{Rails.root.join('public','javascripts',jsfile + '.js')}", options
    else
      javascript_src_tag jsfile, options
    end
  end

  def wicked_pdf_javascript_include_tag(*sources)
    options = sources.extract_options!
    sources.collect{ |source| wicked_pdf_javascript_src_tag(source, options) }.join("\n").html_safe
  end
end 
```

模板（genie_help_base.pdf.erb）文件如下：

```
<!DOCTYPE html>
<html>
  <head>
    <title><%= full_title(yield(:title)) %></title>
    <%#= wicked_pdf_stylesheet_link_tag    "application", :refer_only => true %>
    <%#= wicked_pdf_stylesheet_link_tag "application", :refer_only => true %>
    <%= wicked_pdf_stylesheet_link_tag "static_pages/genie_v23_help" %>    
    <%= javascript_include_tag "application" %>
    <%= csrf_meta_tags %>
<!--     <%#= render 'layouts/shim' %>  -->   
  </head>
  <body>
    <div class="container">
      <%= yield %>
      <%= debug(params) if Rails.env.development? %>
    </div>
  </body>
</html> 
```

html (genie_v23_help_base.html.erb) 的布局模板是：

```
<!DOCTYPE html>
<html>
  <head>
    <title><%= full_title(yield(:title)) %></title>
    <%= stylesheet_link_tag    "application", media: "all" %>
    <%= javascript_include_tag "application" %>
    <%= csrf_meta_tags %>
    <%= render 'layouts/shim' %>    
  </head>
  <body>
    <%= render 'layouts/header' %>
    <div class="container">
      <%= render 'static_pages/genie_v23_help/shared/help_header.html.erb' %>       
      <%= yield %>
      <%= render 'static_pages/genie_v23_help/shared/help_footer' %>
      <h4><strong>Did this show up in only the html on screen</strong></h4>
      <%= render 'layouts/footer' %>
      <%= debug(params) if Rails.env.development? %>
    </div>
  </body>
</html> 
```

这是css文件

```
table {
  width: 90%;
  border: 1px solid #999999;
}

th, td {
  padding: 7px 10px 10px 10px;
}

th {
  border-bottom: 2px solid #111111;
  border-top: 1px solid #999999;
  font-size: 90%;
  letter-spacing: 0.1em;
  text-align: left;
  text-transform: uppercase;    
}

/*tr.even {
    background-color: #efefef;
}*/

.stripe { 
  background-color: #dddddd;
  /*color: #666666;*/
}

tr.stripeHover {
  background-color: #FFFACD;
}

tbody tr:hover {
    background-color: #FFFACD;
} 
```

最后是我的控制器中的 show 方法，所有这些都是从以下位置调用的：

```
 def static_page
    respond_to do |format|
    format.html do
        render :template => show_page,
               :layout => 'genie_v23_help_base'
    end
    format.pdf do
        render :pdf => show_page,
               :layout => 'genie_v23_help_base.pdf.erb',
               :template => "#{show_page}.html.erb",
               :handlers => :erb,
               :disable_external_links => true,
               :disable_javascript => false,
               :show_as_html => params[:debug],
               :print_media_type => true
      end
    end
  end 
```

所以我目前无法让 jquery 条带化功能工作。

我想让这个工作，如果成功，很可能会构建一个示例类型的应用程序放在 GitHub 上，因为似乎没有使用样式表和 jquery 的 Rails 3.2.3 的最新版本来证明这一点.

我是否需要在某处的文件中使用包含语句？如果是这样，“应用程序”在哪里？

随着助手的更新（tobiashm 18 天前，如果需要，使用预编译的资产）如何指定它是“常规”方法还是资产模块中的方法？如果我不注释以下内容，我会收到错误消息。

```
def wicked_pdf_javascript_src_tag(jsfile, options={})
  #javascript_src_tag "file:///#{Rails.root.join('public','javascripts',jsfile)}", options
end 
```

将 javascript_src_tag 更改为 javascript_include_tag 以符合 Rails 3.2+

```
def wicked_pdf_javascript_src_tag(jsfile, options={})
  javascript_include_tag "file:///#{Rails.root.join('public','javascripts',jsfile)}", options
end 
```

有没有人有一个托管的示例应用程序/应用程序来演示所有这些？

摘要 - 尝试使用 jquery 在 html 呈现的文件中设置类名以在 PDF 中获取 css 斑马条纹，因此可以应用 css 样式。

在此先感谢，马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:00:27.440

您的 pdf 布局仅使用常规

```
<%= javascript_include_tag "application" %> 
```

当你应该使用

```
<%= wicked_pdf_javascript_include_tag "application" %> 
```

# python - Spring python：如何从 xml 配置文件中导入另一个 xml 资源

> ID：10850864
> 
> 赞同：2
> 
> 时间：2012-06-01T13:04:31.857
> 
> 标签：python, spring

在 Java Spring 中，可以将配置划分为多个 xml 文件，然后使用

```
<import resource="importedConfig.xml"/> 
```

如何在 SpringPython 中做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T05:01:23.307

虽然似乎没有包含其他资源的选项，但您可以使用多个配置文件初始化 Spring Python：

```
configs = [ XMLConfig("config-1.xml"), XMLConfig("config-2.xml") ]
container = ApplicationContext( configs ) 
```

（见[spring-python 源码](http://git.springsource.org/spring-python/spring-python/blobs/master/src/springpython/container/__init__.py#line38)）

# ios4 - 如何为 Custome Twitter Login UI 请求我的 iPhone 应用程序的 xAuth 权限？

> ID：10850867
> 
> 赞同：2
> 
> 时间：2012-06-01T13:04:42.753
> 
> 标签：ios4, twitter, xauth

在我的应用程序中，我想使用自己的登录页面进行 Twitter 登录。我四处搜索，找到了[http://www.icodeblog.com/2009/07/09/integrating-twitter-into-your-applications/](http://www.icodeblog.com/2009/07/09/integrating-twitter-into-your-applications/)的教程和代码，https://github.com/aral/XAuthTwitterEngine

我已经通过了这两个代码。但出现错误

> 错误：不允许客户端应用程序使用 xAuth。

我搜索了这个错误，并在 developer.twiiter 上找到了 xAuth 文档，它是

[https://dev.twitter.com/docs/oauth/xauth](https://dev.twitter.com/docs/oauth/xauth)

从这个文档中我发现我必须向 api@twitter.com 发送详细消息**以**请求 xAuth 权限。包括我的应用程序的名称、使用者密钥、应用程序 ID（如果可用）以及 xAuth 如何最适合您的应用程序的摘要。

我已根据他们的要求向 api.twitter.com 发送了邮件。**但**我仍然没有获得 xAuth 特权来使用我的客户登录 UI.api.twitter 回复我的邮件，但没有提及我请求的 xAuth 访问权限。这是他们的回复

> ## - 请在此行上方输入您的回复 -

您好，此电子邮件是确认收到您有关 xAuth 访问的电子邮件的自动回复。请注意：要使您的应用程序有资格获得 xAuth 访问权限，它必须是生产就绪的，并且只能通过独立的桌面应用程序或移动设备访问。我们不会为测试目的、单用户应用程序、基于 Web 的应用程序或处于开发早期阶段的应用程序授予 xAuth。为了处理您的请求，您必须在 5 天内回复此电子邮件并提供以下所需信息： • 您来自 dev.twitter.com/apps/ 的应用程序 ID 号（或使用者密钥） • 指向您的应用程序网站的链接• 演示以下内容的短视频链接： - 您的应用程序的主要功能 - 您的应用程序如何与 Twitter 交互，包括其用户登录功能 - 一个功能齐全的 OAuth 集成。实施 xAuth 需要 OAuth 知识；在我们授予此身份验证权限之前，我们要求您的应用程序具有完整的 OAuth 集成。• 一个演示 Twitter 帐户的链接，该帐户已授权访问您的应用程序的 OAuth 集成并已使用它。请注意，我们的票务系统不接受附件；您需要将视频上传到您的服务器或视频主机（例如 YouTube 或 Vimeo），并提供视频的直接链接 (URL)。一旦您的请求得到处理并收到我们的回复，您可以选择删除视频。如果您在最初的请求中提供了上面列出的所需信息，请回复此票以确认所有所需信息均已存在。如果您未请求访问 xAuth 但收到此回复，请回复此票以告知我们。如果您对 API 有技术问题，请访问我们的开发者网站，您可以在其中找到有关 Twitter API 的大量文档：dev.twitter.com/docs。谢谢，Twitter API 政策

现在任何人都可以帮助我请我如何获得 xAuth 访问权限以使用我的客户 UI 进行 Twitter 登录？

帮助将不胜感激。它真的很糟糕....

谢谢

# makefile - 使 V 全局定义意味着

> ID：10850873
> 
> 赞同：0
> 
> 时间：2012-06-01T13:05:10.047
> 
> 标签：makefile, openwrt

通常我在编译系统时使用 V=99 以查看详细模式的输出，我的问题与“V”变量有关，我可以使用哪种其他类型的登录级别？

我分析了一个 Makefile，我想看看它在做什么，但是 V=99 真的很难。

非常感谢，

彼得罗。

# java - 显示多个结果数组搜索

> ID：10850880
> 
> 赞同：1
> 
> 时间：2012-06-01T13:05:21.500
> 
> 标签：java, arrays, search, date

我正在搜索具有开始日期的记录：[userinput]，如果有任何匹配项，将显示该记录，问题是我的程序的性质对于所有匹配项都是必需的（可以有多个在同一个天）需要以某种方式显示。

这是我到目前为止所拥有的：

```
 public void searchDay() {
    String idInputString  = JOptionPane.showInputDialog(null, "Please enter the Date you're searching for:");

       try {   
            for (int i = 0; i < orderID.length; i++) {
                if (idInputString.equals(startDate[i])) {

                    txtOrderID.setText(orderID[i]);
                    txtOrderForename.setText(customerForename[i]);
                    txtOrderSurname.setText(customerSurname[i]);

                    txtOrderAddress1.setText(address1[i]);
                    txtOrderAddress2.setText(address2[i]);
                    txtOrderTown.setText(town[i]);
                    txtOrderCounty.setText(county[i]);
                    txtOrderPost.setText(postCode[i]);
                    txtOrderCarModel.setText(carModel[i]);

                    txtOrderCarReg.setText(carReg[i]);
                    txtOrderStartDate.setText(startDate[i]);
                    txtOrderStartTime.setText(startTime[i]);

                    txtOrderSerial.setText(serialNum[i]);

                } else {
                    JOptionPane.showMessageDialog(null, "Order ID Doesn't Exist", "Error!", JOptionPane.WARNING_MESSAGE);
                    break;
                }

            }

      } catch (Exception e) { 
       JOptionPane.showMessageDialog(null, "Order ID Doesn't Exist", "Error!", JOptionPane.WARNING_MESSAGE);
       initFields();

   }
} 
```

即使输入我知道存在的日期，我也会收到错误。

我认为问题在于 for 循环。它计算元素的数量，而不是总记录。

这存储在“numberOfOrdersInArray” int 变量中。

但如果我这样做：

```
 for (int i = 0; i < numberOfOrdersInArray.length; i++) { 
```

我收到错误“无法取消引用 int”

我希望我能很好地解释我的问题，

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:06:48.243

**不**用于`.equals()`字符串比较。检查引用，同时实际比较字符串字符。这个很重要。 **`==``==``.equals()`**

 ****编辑：**

```
//instead of a count, you could also use a boolean
for (int i = 0, count= 0; i < orderID.length; i++) {
                if (idInputString.equals(startDate[i])) {

                    txtOrderID.setText(orderID[i]);
                    txtOrderForename.setText(customerForename[i]);
                    txtOrderSurname.setText(customerSurname[i]);

                    txtOrderAddress1.setText(address1[i]);
                    txtOrderAddress2.setText(address2[i]);
                    txtOrderTown.setText(town[i]);
                    txtOrderCounty.setText(county[i]);
                    txtOrderPost.setText(postCode[i]);
                    txtOrderCarModel.setText(carModel[i]);

                    txtOrderCarReg.setText(carReg[i]);
                    txtOrderStartDate.setText(startDate[i]);
                    txtOrderStartTime.setText(startTime[i]);

                    txtOrderSerial.setText(serialNum[i]);
                    count++;
                } 
                if(i == orderID.length - 1 && count==0){
                    JOptionPane.showMessageDialog(null, "Order ID Doesn't Exist", "Error!", JOptionPane.WARNING_MESSAGE);
                    break;
                }

            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T13:11:59.407

```
 break; statement will be inside the if condition.

else {
          JOptionPane.showMessageDialog(null, "Order ID Doesn't Exist", "Error!", JOptionPane.WARNING_MESSAGE);
             //break;//Wrong HERE
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T13:21:08.887

我同意前面的回答。为什么你有一个break语句？一旦 if 子句中的某些内容不匹配，它就会从 for 循环中中断（break 语句对 if else 语句没有任何作用）。

但我也对你在这里所说的感到困惑：

> “我认为问题在于 for 循环。它计算元素的数量，而不是总记录。
> 
> 这存储在“numberOfOrdersInArray” int 变量中。”

Is numberOfOrdersInArray an int variable? In that case why are you using numberOfOrdersInArray.length? The .length is a variable that is held by arrays which is why it works if you have arrayName.length. But if numberOfOrdersInArray is just a counter int variable, then use it by itself so it looks like:

```
for (int i = 0; i < numberOfOrdersInArray; i++) { 
```**

# mysql - 以查询结果为参数的存储过程

> ID：10850881
> 
> 赞同：2
> 
> 时间：2012-06-01T13:05:22.170
> 
> 标签：mysql, stored-procedures

我刚刚创建了一个带有参数（示例 id）的存储过程，并将与该 id 相关的列从一个表复制到另一个表。如何创建以子查询结果为参数的存储过程，数据库是 mysql ..

这是我的示例..我想将查询从表中选择 id 传递给过程..

```
DELIMITER $$

DROP PROCEDURE IF EXISTS `test`.`sasi`$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `sasi`(IN idno int(4))

    BEGIN
    INSERT INTO user5(id,email,address,fullname,gender,phonenumber)
    SELECT id,email,address,fullname,gender,phonenumber FROM user1  where id != idno;
    END$$

DELIMITER ;

call sasi(4); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T14:09:38.747

要将查询结果传递到存储过程中，请将查询括在括号中。
例如：

```
call sasi((select max(id) from sometable where somecondition)); 
```

您必须确保查询仅返回一行和一列。

### 编辑：

如果您想多次调用该过程，每行一次，请将您的过程更改为[`FUNCTION`](http://dev.mysql.com/doc/refman/5.6/en/create-procedure.html)：

```
CREATE FUNCTION sasi(idno int(4))
RETURNS int(4)
BEGIN
    INSERT INTO user5(id,email,address,fullname,gender,phonenumber)
    SELECT id,email,address,fullname,gender,phonenumber FROM user1  where id != idno;
    RETURN idno;
END 
```

然后像这样调用它：

```
select sasi(id)
from table
where ... 
```

`sasi(id)`将为匹配该`where`子句的每一行调用。

# python - PyQt matplotlib 在图片顶部绘制轮廓数据 - 缩放问题

> ID：10850882
> 
> 赞同：1
> 
> 时间：2012-06-01T13:05:26.230
> 
> 标签：python, matplotlib, pyqt, python-imaging-library

我正在尝试将一张照片作为 matplotlib 中的背景。我设法添加了照片，其大小为 273 x 272 像素。然后我添加一个 30 x 30 大的等高线图。如果我注释掉绘制照片的线，等高线图将覆盖整个绘图区域。

如果我包含照片，等高线图会出现在左下角。它看起来非常像是绘制在沿每个轴的整个画布的大约 30/272 的一小部分上。我想要的是让等高线图覆盖整张照片。

这些是代码的相关部分（不是完整的工作示例）：

```
# Matplotlib Figure object
from matplotlib.figure import Figure

# import the Qt4Agg FigureCanvas object, that binds Figure to
# Qt4Agg backend. It also inherits from QWidget
from matplotlib.backends.backend_qt4agg \
import FigureCanvasQTAgg as FigureCanvas

from PIL import Image

.....

class Qt4ContourCanvas(FigureCanvas):
    def __init__(self, Z_matrix, plot_freq, p2_freq, p2_power, ws_level, p2_patch_on, pmin, pmax, my_alpha, parent=None):

        global p2_frequency
        logger.debug("%s - created" % self.__class__.__name__)
        self.fig = Figure(facecolor='Lavender')
        self.axes = self.fig.add_subplot(111)

        #Reduce the size of the borders
        #http://stackoverflow.com/questions/1203639/how-do-i-limit-the-border-size-on-a-matplotlib-graph
        self.fig.subplots_adjust(left=0.05, bottom=0.05, right=0.95, top=1-0.05,
                wspace=0.01, hspace=0.01) 

        # We need to keep a class variable of Z to prevent it going out of scope
        self.Z = Z_matrix

............

    def drawContourPlot(self, Z_matrix, plot_freq, p2_freq, p2_power, ws_level, p2_patch_on, pmin, pmax, my_alpha):
        "Method to plot contour plots"
        global p2_frequency
        p2_frequency = p2_freq
        self.axes.cla()

        self.Z = Z_matrix

        map_dimensions = Z_matrix.shape
        my_xdim = map_dimensions[0]
        my_ydim = map_dimensions[1]

        levels = np.arange(pmin, pmax, 2.5)

        DIM = len(self.Z)
        x = y = np.arange(0, DIM, 1)
        X, Y = np.meshgrid(x, y)

        my_cm = ListedColormap(faramir_cm)

        # Background picture
        picture = Image.open('gondor.png')
        CSbkgr = self.axes.imshow(picture, origin='lower')

        # Swap X and Y to transpose the data, otherwise the click event
        # and the matrix coordinates do not agree
        CS = self.axes.contourf(Y, X, self.Z, levels, cmap=my_cm, alpha=my_alpha)

        CS2 = self.axes.contour(CS, levels=CS.levels, colors = 'r', hold='on')
        self.axes.clabel(CS2, fontsize=10, inline=1, fmt='%1.1f')

        CS3 = self.axes.contour(CS, levels=[ws_level], colors = 'black', hold='on', linestyles = 'solid', linewidths = 2)

        self.axes.clabel(CS3, fontsize=12, inline=1, fmt='%1.1f')

        self.axes.grid(True, color='white')

        self.fig.canvas.draw() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:31:00.413

您可以重新调整等高线图以使其正确拟合： ![在此处输入图像描述](../Images/235c6079a305e31bb29cd124127debac.png) 而不是（左下角的彩色点是未缩放的等高线图...）： ![在此处输入图像描述](../Images/35e2d66b707d5f8783693da5318c2fc2.png) 代码：

```
import Image
import numpy as np
import matplotlib.mlab as mlab
import matplotlib.pyplot as plt

#contour plot test data:
delta = 0.025
x = np.arange(-3.0, 3.0, delta)
y = np.arange(-2.0, 2.0, delta)
X, Y = np.meshgrid(x, y)
Z1 = mlab.bivariate_normal(X, Y, 1.0, 1.0, 0.0, 0.0)
Z2 = mlab.bivariate_normal(X, Y, 1.5, 0.5, 1, 1)
# difference of Gaussians
Z = 10.0 * (Z2 - Z1)

plt.figure()
im = Image.open('tree_small.png')
plt.imshow(im, origin='lower')

#rescale contour plot:
X = X - np.min(X)
X = X * im.size[0] / np.max(X)
Y = Y - np.min(Y)
Y = Y * im.size[1] / np.max(Y)
plt.contour(X, Y, Z, 20)

plt.show() 
```

可能您可以使用单独的轴将等高线图叠加在顶部，但这似乎是最快的方法；）

# java - 整合贝叶斯概率分布

> ID：10850883
> 
> 赞同：0
> 
> 时间：2012-06-01T13:05:29.293
> 
> 标签：java, math, statistics, integration

假设我们有一个定义明确的概率分布，它以某个参数为条件：`p(x|a)*p(a)`，就像在贝叶斯方法中一样。

现在，为了找到`x`，我可能想要整合 的所有值`a`。是否有使用 Java 解决此类数学问题的通用方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T13:20:32.147

是的，与 FORTRAN、C、Perl 等中存在的方法相同：[编码数学](http://en.wikipedia.org/wiki/Numerical_integration)。

少说些快乐：Java 不是从事数字计算的人的典型语言选择，而且它不是为迎合这些受众而编写的，因此内在语言支持不是很好，库支持也不是很好。我的建议：为您的问题明确选择一种语言 - 例如，R、Octave、Matlab、Mathematica、Maple - 或者具有更多内置 + 持续社区支持的语言 - 例如，C/C++、FORTRAN、Perl。

也就是说，如果您致力于在 Java 中进行数字运算，则有一些库；NIST 有[我发现的最好的聚会](http://math.nist.gov/javanumerics/#libraries)，但该网站似乎维护不足，所以这只是一个起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T15:31:56.163

有很多数值积分方案。谷歌搜索“java 数值积分”或“java 求积”。

一种实现选择是[JSci](http://jsci.sourceforge.net/api-0.94/JSci/maths/NumericalMath.html)。

如果您阅读 Forman Acton 的“Numerical Methods That Work”，第 4 章“正交”，您会发现这可能不是一个小问题，具体取决于您的被积函数。

你在做贝叶斯分析吗？也许[蒙特卡洛马尔可夫链](http://en.wikipedia.org/wiki/Markov_chain_Monte_Carlo)方法会更好。查看[WinBUGS](http://www.mrc-bsu.cam.ac.uk/bugs/winbugs/contents.shtml)并阅读[John Krushke 的优秀书籍。](https://rads.stackoverflow.com/amzn/click/com/0123814855)

更新：如果你的被积函数是解析函数，你应该使用符号积分器来得出 x 的函数。如果不是，你能做的最好的就是 WinBUGS。您将进行 Monte Carlo 模拟，以构建经过多次试验后的发行版外观。

您找不到问题的简单答案，因为这不是一个简单的问题。

# validation - 根据 XML 模式验证 java.util.Map（没有 XML 文档，只有 Map 对象）

> ID：10850888
> 
> 赞同：1
> 
> 时间：2012-06-01T13:05:53.013
> 
> 标签：validation, xsd, map

这可能是一个奇怪的问题，但最近我正在考虑类似验证具有来自 xsd 的键值对的地图对象。我的意思是，如果 xsd 在某个根元素下有两个元素，例如 foo 和 bar，并且映射包含键值对，例如 foo = "me" 和 bar = 123，我应该能够在不转换映射的情况下针对相应的 xsd 验证此映射进入 xml/json 或任何模型之类的东西。我已经做了一些搜索，但找不到任何支持这一点的 api。我还研究了 javax.xml.validation api，但我无法弄清楚 Validator 究竟是如何针对 xsd 验证 xml 的。如果我能以某种方式从 xsd 获取每个元素的属性，那么也许我将能够验证地图。请给我一些有关此的信息，欢迎任何建议。

# ios - 两个 UIViewImage 的交集

> ID：10850895
> 
> 赞同：3
> 
> 时间：2012-06-01T13:06:19.680
> 
> 标签：ios, xcode, uiimageview, intersection, closest-points

如何确定两个 uiviewimages 是否相交。我想做一个自动捕捉功能。当小图像与大图像相交或靠近它时（让我们说距离<= x），我希望小图像在它们相交的点自动捕捉（连接）到大图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T13:13:04.037

```
CGRect bigframe = CGRectInset(bigView.frame, -padding.x, -padding.y);

BOOL isIntersecting = CGRectIntersectsRect(smallView.frame, bigFrame); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T13:13:54.833

您可以使用 CGRectIntersectsRect 方法来检查帧：

```
 if (CGRectIntersectsRect(myImageView1.frame, myImageView2.frame))
    {
        NSLog(@"intersected")
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T04:49:49.340

前两张海报已经走上了正轨`CGRectIntersectsRect`。

```
BOOL isIntersecting = CGRectIntersectsRect(smallImage.frame, largeImage.frame);
if(isIntersecting){

    //Animate the Auto-Snap
    [UIView beginAnimation:@"animation" context:nil];
    [UIView setAnimationDuration:0.5];
    smallImage.frame = largeImage.frame;
    [UIView commitAnimations];
} 
```

基本上这就是说，如果两个图像相交，则小图像帧会在 0.5 秒内捕捉到较大的图像。不过，您不必对其进行动画处理；您可以通过删除除`smallImage.frame = largeImage.frame;`. 但是，我推荐动画方式。希望这可以帮助。

- - - -编辑 - - - -

您可以使用以下代码：

```
 BOOL isIntersecting = CGRectIntersectsRect(smallImage.frame, largeImage.frame);
 if(isIntersecting){     
     //Animation
     [UIView beginAnimation:@"animation" context:nil];
     [UIView setAnimationDuration:0.5];

     smallImage.center = CGPointMake(largeImage.center.x, largeImage.center.y);

     //If you want to make it like a branch, you'll have to rotate the small image
     smallImage.transform = CGAffineTransformMakeRotation(30);
     //The 30 is the number of degrees to rotate. You can change that.

     [UIView commitAnimations];
 } 
```

希望这可以解决您的问题。如果这有帮助，请记住投票并选择答案。

--------编辑--------- 最后一件事。我说“30”`CGAffineTransformMakeRotation(30)`代表30度，但这是不正确的。CGAffineTransformMakeRotation 函数采用弧度为单位的参数，所以如果你想要 30 度，你可以这样做：

```
#define PI 3.14159265

CGAffineTransformMakeRotation(PI/6); 
```

# grails - Grails：fields-1.2 插件无法读取数据模型属性

> ID：10850896
> 
> 赞同：0
> 
> 时间：2012-06-01T13:06:21.467
> 
> 标签：grails, gsp, grails-domain-class, grails-2.0

**数据模型**

```
package com.foo.bar.baz.model

class Customer {
    Integer id
    String firstName
    String lastName
    .....
} 
```

**普惠制**

```
 ....
  <f:with bean="Customer">
      <f:field property="firstName"/>
  </f:with>
  .... 
```

GSP 不在views\customer 目录中，而是在views\customerRegistration 中。当我尝试查看我得到的页面时：

> **URI** /myApp/customerRegistration/index **Class** org.springframework.beans.NotReadablePropertyException **Message** Invalid property 'firstName' of bean class [java.lang.String]: Bean property 'firstName' is not read or has an invalid getter method: 是否返回getter 的类型是否匹配 setter 的参数类型？

为什么它不能读取我的数据对象中的 firstName 字段？

我尝试在标记（“bean="com.foo.bar.baz.model.Customer"）中添加完整包，它只会将上述错误消息中的“bean 类”从 java.lang.String 更改为 java .lang.Class

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:00:31.873

弄清楚了。

fields 标记需要一个实时的 Customer 对象，而不是对类的引用。为了解决它，我做了以下事情：

在控制器中创建了一个新的空客户对象并将其提供给视图：

```
render(view: "myView", model: [emptyCustomer: new Customer()]) 
```

然后更改视图以使用此对象，一切正常：

```
<f:with bean="emptyCustomer">
    <f:field property="firstName"/>
</f:with> 
```

# javascript - 函数未从 jstree 调用在 mvc 中触发

> ID：10850908
> 
> 赞同：0
> 
> 时间：2012-06-01T13:07:01.343
> 
> 标签：javascript, jquery, .net, asp.net-mvc

我有这个应该触发 mvc 函数调用的 jquery，

```
$(document).ready(function () {
alert("ddddd");
$("#divJsTreeDemo").jstree({
    "plugins": ["json_data"],
    "json_data": {
        "ajax": {
            "type": "POST",
            "url": "/WebTree/GetTreeNodes",
            "async": true,
            "contentType": "application/json; charset=utf-8",
            "dataType": "json",

            "data": function (node) {

                return ""; 

            },
            sucess: function (retval) {
                var d = "";
            },
            error: function (retval) {
                alert(retval);
            }
        }
    }

});

}); 
```

但我不断收到一条错误消息，提示“您要查找的资源已被删除、名称已更改或暂时不可用。”

当我将它发送到服务器时，我得到了错误的 json 吗？

这是mvc控制器，

```
Public Class WebTreeController
    Inherits System.Web.Mvc.Controller

    '
    ' GET: /WebTree

    Function Index() As ActionResult
        Return View()
    End Function

    Public Function GetTreeNodes() As JsonResult

        Dim list As New List(Of String)
        list.Add("dddd")

        'Dim jsonString As String = Encoding.Default.GetString(list.ToArray)

        Return Me.Json(list)

    End Function

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T16:25:33.947

有几件事：

1.  直接在浏览器中输入网址，看看是否有结果。如果不是，则可能是路由问题，但不太可能。
2.  使用浏览器的开发人员工具（在 Chrome/IE 中按 F12）并检查发出的请求。这个问题有 99.9% 的时间是 URL 问题。
3.  在您的视图中使用 @Url.Action() 来生成操作的路径，而不是硬编码的链接。路径可能会根据您的部署配置而改变。

干杯。

# vbscript - VBscript 从电脑获取信息

> ID：10850909
> 
> 赞同：0
> 
> 时间：2012-06-01T13:07:03.120
> 
> 标签：vbscript

您好，我正在编写这个脚本，我需要序列号、IP 地址、登录用户、办公室的产品密钥、自动路由到文本文件。我已经开始编写脚本，但遇到了一些问题。不是一个完成的脚本，但我有点坚持这里。

这是脚本：

```
 On Error Resume Next

    Const wbemFlagReturnImmediately = &h10
    Const wbemFlagForwardOnly = &h20

    arrComputers = Array("localhost")
    For Each strComputer In arrComputers

    Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\CIMV2")
    Set colItems = objWMIService1.ExecQuery("SELECT * FROM Win32_ComputerSystemProduct", "WQL", _ wbemFlagReturnImmediately + wbemFlagForwardOnly)                         
    Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\CIMV2")
    Set colItems = objWMIService2.ExecQuery("SELECT * FROM Win32_ComputerSystem", "WQL", _ wbemFlagReturnImmediately + wbemFlagForwardOnly)

    Set objWMIService = GetObject( "winmgmts:\\" & strCoputer & ".\root\CIMV2" )
    Set colItems = objWMIService.ExecQuery( "SELECT * FROM Win32_NetworkAdapterConfiguration", "WQL", _ wbemFlagReturnImmediately + wbemFlagForwardOnly)

    next

    For Each objItem In colItems2

    Dim fso, tf
    Set fso = CreateObject("Scripting.FileSystemObject")
    Set tf = fso.CreateTextFile ("c:\" & objItem.UserName & ".txt", True)
    tf.Write "Username: " & objItem.UserName
    tf.WriteBlankLines(1)
    tf.Write "Hostname: " & objItem.Name
    tf.WriteBlankLines(1)
    tf.Write "Domain: " & objItem.Domain
    tf.WriteBlankLines(2)

    next 

    For Each objItem In colItems1

    tf.Write "Serial: " & objItem.IdentifyingNumber
    tf.WriteBlankLines(1)
    tf.Write "Model: " & objItem.Name
    tf.WriteBlankLines(2)  
    tf.Write "Vendor: " & objItem.Vendor
    tf.WriteBlankLines(1)   
    tf.Write "Version: " & objItem.Version
    tf.WriteBlankLines(2)  

    Next

    For Each objItem In colItems3

    tf.Write "IP Address: " & objItem.IPAddress
    tf.WriteBlankLines(1)
    tf.Close

    next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T08:30:43.620

微软创建了一个名为 Scriptomatic 的免费工具，它可以自动为此类任务创建 vbscript 代码。您可以从以下位置下载 scriptomatic。 [http://www.microsoft.com/en-in/download/details.aspx?id=12028](http://www.microsoft.com/en-in/download/details.aspx?id=12028)

# java - 使用 JSP/servlet 在 JFreeChart 中创建工具提示

> ID：10850911
> 
> 赞同：1
> 
> 时间：2012-06-01T13:07:11.063
> 
> 标签：java, jsp, servlets, jfreechart

我正在使用 JFreeChart，我想使用 servlet/JSP 实现工具提示

代码：小服务程序

```
doPost() {
    XYDataset xyDataset = Chart.createDataset(chartType, getServletContext());
    JFreeChart chart = Chart.createChart(xyDataset, chartType);
    final ChartRenderingInfo info = new ChartRenderingInfo(new StandardEntityCollection());
    final File file1 = new File("D:\\graph\\test.png");
    ChartUtilities.saveChartAsPNG(file1, chart, 600, 400, info);

    // write an HTML page incorporating the image with an image map
    final File file2 = new File("D:\\graph\\multipiechart100.html");
    final OutputStream out = new BufferedOutputStream(new FileOutputStream(file2));
    final PrintWriter writer = new PrintWriter(out);
    writer.println("<HTML>");
    writer.println("<HEAD><TITLE>JFreeChart Image Map Demo</TITLE></HEAD>");
    writer.println("<BODY>");
    //            ChartUtilities.writeImageMap(writer, "chart", info);
    writer.println("<IMG SRC=\"multipiechart100.png\" "
        + "WIDTH=\"600\" HEIGHT=\"400\" BORDER=\"0\" USEMAP=\"#imageMap\">");
    writer.println("</BODY>");
    writer.println("</HTML>");
    writer.close();

    BufferedImage buf = chart.createBufferedImage(800, 450, info);
    ChartUtilities.writeImageMap(writer, "imageMap", info, true);
    //          ChartUtilities.writeBufferedImageAsPNG(out,buf);
    ChartUtilities.writeChartAsPNG(out, chart, 700, 250, info);
} 
```

JSP：

```
<img alt="" id="monthchart" usemap="#imageMap"
                            src='<%=url+"/TimeChart/servlet/ChartServlet?CHARTTYPE="+ChartConstant.MONTH_CHART%>'></img> 
```

但我没有得到任何图表，并且出现如下错误：

```
java.io.IOException: Write error
    at java.io.FileOutputStream.writeBytes(Native Method)
    at java.io.FileOutputStream.write(FileOutputStream.java:260)
    at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
    at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
    at javax.imageio.stream.FileCacheImageOutputStream.close(FileCacheImageOutputStream.java:213)
    at javax.imageio.ImageIO.write(ImageIO.java:1567)
    at org.jfree.chart.encoders.SunPNGEncoderAdapter.encode(SunPNGEncoderAdapter.java:127)
    at org.jfree.chart.encoders.EncoderUtil.writeBufferedImage(EncoderUtil.java:134)
    at org.jfree.chart.ChartUtilities.writeChartAsPNG(ChartUtilities.java:185)
    at com.chart.ChartServlet.doPost(ChartServlet.java:138)
    at com.chart.ChartServlet.doGet(ChartServlet.java:60)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:291)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:877)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:594)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1675)
    at java.lang.Thread.run(Thread.java:619) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-25T01:26:31.067

一方面，您在调用 ChartUtilities.writeImageMap(...); 之前关闭了您的作家。

# javascript - 有没有像样的 .NET MVC 框架来构建丰富的 AJAX 应用程序？

> ID：10850913
> 
> 赞同：1
> 
> 时间：2012-06-01T13:07:11.920
> 
> 标签：javascript, .net, ajax, asp.net-mvc, rich-internet-application

我想构建一个具有丰富的基于 ajax 的用户界面的应用程序。关键的 UI 功能将是：

*   实时数据保存（用户在表单中输入的不完整数据应保存在服务器端）
*   实时验证（应验证字段，有时在失去焦点时使用服务器端检查进行验证）
*   处理 URL 导航（带有 URL # 片段）和浏览器后退按钮
*   没有页面重新加载

所以总的来说，我喜欢谷歌应用程序、wunderkit、asana 中的那种 UI。我的应用程序将有很多表单、大量输入字段，并且必须处理大量数据，包括文件上传。该应用程序的先前版本使用 ASP.NET-MVC3，而 ajax 仅以少数专用模块的形式使用。要求是在 .NET 中构建它，我无法使用除 ASP.NET-MVC 之外的任何其他东西进行映像。

问题是：是否有任何体面的框架可以使用 .NET MVC 4 构建此类应用程序，还是我应该自己开始构建它？

更新：我知道每个 ajax UI 功能都有很多 jQuery 插件。我正在为已经选择了这些插件的丰富 ajax 应用程序寻找某种基础。虽然我开始意识到自己创建这个基地可能是一个更好的主意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T15:40:57.197

有时它不是“再次发明轮子”，存在如此多的 javascripts 库来帮助您。您正在寻找的抽象级别，您没有找到任何东西，至少是好的。

我总是做自定义库来适应设计并保持希望客户重用（DRY）的模式，记住不是每个人都想要相同的用户界面流程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:38:20.773

您所询问的几乎所有内容都可以在 jQuery 插件中找到。

# javascript - jquery ui自动完成，类别水平显示，而不是垂直显示

> ID：10850922
> 
> 赞同：3
> 
> 时间：2012-06-01T13:07:51.237
> 
> 标签：javascript, autocomplete, jquery-autocomplete, jquery-ui-autocomplete

是他们现有的插件，还是可以使类别水平显示的代码，例如表头：

[http://jqueryui.com/demos/autocomplete/#categories](http://jqueryui.com/demos/autocomplete/#categories)

还是自己从头开始更容易？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-07T15:37:06.190

你很可能在某处有一个冲突的css。

我遇到了这个问题并在上周解决了它。

（对我来说）有冲突的代码是这个：

ul {列表样式：无；}

这很可能包含在您的 style.css 文件或网页中的某个位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-26T13:47:43.753

干得好

[https://codepen.io/nitinmendiratta/pen/aMMeOz](https://codepen.io/nitinmendiratta/pen/aMMeOz)

CSS

```
#search {
  width: 500px;
}

.ui-autocomplete {
  display: flex;
  width: auto !important;
}

.ui-autocomplete-category {
  font-weight: bold;
  padding: .2em .4em;
  margin: .8em 0 .2em;
  line-height: 1.5;
}
.ui-autocomplete-category ul{
  padding:0;
}
.submenu {
  font-weight: normal;
}

/* ADDED STYLE */
.ui-autocomplete>li>div>ul{
  display: block !important;
  position: relative !important;
  border: 0 !important;
}
span.ui-menu-icon{
  display:none !important;
}

/* ADDED for the SO snippet only !! Not needed on CodePen */
.ui-autocomplete>li{
  display: inline-block !important;
} 
```

HTML

```
<label for="search">Search: </label>
<input id="search">
<div class="ui-widget" style="margin-top:2em; font-family:Arial">
  Result:
  <div id="log" style="height: 200px; width: 300px; overflow: auto;" class="ui-widget-content"></div>
</div> 
```

JS

```
$.widget( "custom.catcomplete", $.ui.autocomplete, {
  _create: function() {
    this._super();
    this.widget().menu( "option", "items", "> :not(.ui-autocomplete-category)" );
  },
  _renderMenu: function( ul, items ) {
    var that = this,
        currentCategory = "";
    $.each( items, function( index, item ) {
      var li, submenuUl;
      if ( item.category != currentCategory ) {
        var elt = $("<li class='ui-autocomplete-category'>" + item.category + "</li>");
        var submenu = $("<div class='submenu "+ item.category +"'><ul></ul></div>");  // Added <ul></ul>
        elt.append(submenu);
        ul.append(elt);
        currentCategory = item.category;
      }
      submenuUl = ul.find("."+item.category+" ul"); // added +" ul"
      li = that._renderItemData(submenuUl, item );
      if ( item.category ) {
        li.attr( "aria-label", item.category + " : " + item.label ).addClass("ui-menu-item"); // Added the addClass()
      }
    });
  }
});

// Actual Code
$(function() {
  var data = [
    { label: "annhhx10", category: "Products" },
    { label: "annk K12", category: "Products" },
    { label: "annttop C13", category: "Products" },
    { label: "anders andersson", category: "People" },
    { label: "andreas andersson", category: "People" },
    { label: "andreas johnson", category: "People" }
  ];

  $( "#search" ).catcomplete({
    delay: 0,
    source: data,
    select: function(item, ui){ // Added item, ui --- Arguments were missing.
      console.log(ui.item.value);
      $( "#search" ).val( ui.item.value );
     $( "<div>" ).text( JSON.stringify(ui.item) ).prependTo( "#log" );
      return false;
    }
  });   
}); 
```

# touch - 在sencha touch 2中点击开始时如何更改按钮图像？

> ID：10850924
> 
> 赞同：1
> 
> 时间：2012-06-01T13:08:02.217
> 
> 标签：touch, sencha-touch-2

我是煎茶触摸的新手。

我对按钮点击事件有疑问。实际上，我有一个带有背景图像的按钮，该按钮在 Button 的 cls 属性中声明：

```
 Ext.define('app.view.common.PageHeader', {
    extend: 'Ext.Container',

    xtype: 'pageHeader',

    config: {

        items: [
            {
                xtype: 'button',
                left: 10,
                top: 10,
                baseCls: 'null',
                cls: 'btn_back',            //with background:url('btn_img.png')
                listeners: {
                    tap: function () {
                        console.log('button tapped...');
                        //history.back();
                        this.removeCls('btn_back');
                        this.addCls('btn_press');
                    },
                    release: function () {
                        console.log('button released..');
                    }
                }
            }
        ]
    }
}); 
```

现在我只想在使用 removeCls() 和 addCls() 点击按钮时更改按钮的背景图像。

但是从 Sencha 文档中我没有发现任何类似的事件。

那么有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:54:34.627

只需删除您编写的所有侦听器和处理程序。这只是`pressedCls`您按钮的配置。例如：

`pressedCls: 'css_properties_when_the_button_is_pressed'`

希望这可以帮助。

# sencha-touch-2 - sencha touch 2 中的设备检查

> ID：10850932
> 
> 赞同：8
> 
> 时间：2012-06-01T13:08:48.893
> 
> 标签：sencha-touch-2

我确定我只是忽略了这个问题，但我似乎找不到如何检查设备。
我想检查设备是手机、横向模式的平板电脑、纵向模式的平板电脑还是其他设备（计算机）。

我所拥有的是：

```
if (Ext.platform.isPhone) {
    console.log("phone");
}

if (Ext.platform.isTablet) {
    console.log("tablet");
}

var x = Ext.platform; 
```

但是平台是未定义的（可能是因为这是 Sencha Touch 1 的方式）。

有谁知道我访问设备检查的正确位置？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-07-02T05:50:31.707

[Sencha 环境检测](http://docs.sencha.com/touch/2.1.1/#!/guide/environment_package)通过简单的方式提供大范围的光谱。

而不是**Ext.os.is.Tablet ，您可以通过****Ext.os.deviceType**让生活更轻松，它将返回：

*   电话
*   药片
*   桌面

注意：这个值也可以通过在 url 中添加“?deviceType=”来伪造。

```
http://localhost/mypage.html?deviceType=Tablet 
```

**Ext.os.name**是返回的单例：

*   iOS
*   安卓
*   网络操作系统
*   黑莓
*   RIM平板电脑
*   苹果系统
*   视窗
*   Linux
*   八达
*   其他

浏览器检测的常用功能可通过**Ext.browser.name 获得**。

我最近才遇到的，我喜欢的是特征检测——允许基于设备的能力进行类似于 Modernizr / YepNope 的编码。**Ext.feature**提供：

*   Ext.feature.has.Audio
*   Ext.feature.has.Canvas
*   Ext.feature.has.ClassList
*   Ext.feature.has.CreateContextualFragment
*   Ext.feature.has.Css3dTransforms
*   Ext.feature.has.CssAnimations
*   Ext.feature.has.CssTransforms
*   Ext.feature.has.CssTransitions
*   Ext.feature.has.DeviceMotion
*   Ext.feature.has.Geolocation
*   Ext.feature.has.History
*   Ext.feature.has.Orientation
*   Ext.feature.has.OrientationChange
*   Ext.feature.has.Range
*   Ext.feature.has.SqlDatabase
*   Ext.feature.has.Svg
*   Ext.feature.has.Touch
*   Ext.feature.has.Video
*   Ext.feature.has.Vml
*   Ext.feature.has.WebSockets

在 iOS 上检测全屏/应用程序/主屏浏览器模式：

```
window.navigator.standalone == true 
```

Orientation **Ext.device.Orientation**和方向变化：

```
Ext.device.Orientation.on({
    scope: this,
    orientationchange: function(e) {
        console.log('Alpha: ', e.alpha);
        console.log('Beta: ', e.beta);
        console.log('Gamma: ', e.gamma);
    }
}); 
```

方向基于视口。我通常会添加一个更可靠的监听器：

```
 onOrientationChange: function(viewport, orientation, width, height) {
        // test trigger and values
        console.log('o:' + orientation + ' w:' + width + ' h:' + height);

        if (width > height) {
            orientation = 'landscape';
        } else {
            orientation = 'portrait';
        }
        // add handlers here...
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T13:44:07.783

使用[Ext.env.OS 的](http://docs.sencha.com/touch/2-0/#!/api/Ext.env.OS) [`is()`](http://docs.sencha.com/touch/2-0/#!/api/Ext.env.OS-method-is)方法。

> 请注意，只有主要组件和版本的简化值可通过直接属性检查获得。支持的值为：iOS、iPad、iPhone、iPod、Android、WebOS、BlackBerry、Bada、MacOS、Windows、Linux 和其他

```
if (Ext.os.is('Android')) { ... }
if (Ext.os.is.Android2) { ... } // Equivalent to (Ext.os.is.Android && Ext.os.version.equals(2))

if (Ext.os.is.iOS32) { ... } // Equivalent to (Ext.os.is.iOS && Ext.os.version.equals(3.2)) 
```

* * *

或者，您也可以使用[PhoneGap 设备 API](http://docs.phonegap.com/en/1.7.0/cordova_device_device.md.html#Device)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T07:35:56.987

我找到了答案：

情况似乎是 Ext.os.is.（平板电脑/手机或其他）是真实的或未定义的。如果不是这种情况，它将是未定义的。Ia`Ext.os.is.Tablet`在平板电脑上为真，在非平板电脑上为 undefined。

所以这就是我一直在寻找的答案

```
if(Ext.os.is.Tablet){
        this._bIsTablet = true;
    }else if(Ext.os.is.Phone){
        this._bIsPhone = true;
    }else{
        this._bIsOther = true;
    } 
```

# ruby-on-rails - 如何在 ActiveRecord minimum 中以安全的方式插入参数

> ID：10850933
> 
> 赞同：2
> 
> 时间：2012-06-01T13:08:48.947
> 
> 标签：ruby-on-rails, ruby, activerecord, aggregate-functions

我怎样才能做到这一点，而不冒 SQL 注入攻击的风险？

```
nearest = Site.minimum('abs(latitude - ' + params[:lat] + ') - abs(longitude - ' + params[:lon] + ')', group: :id) 
```

我试过了：

```
nearest = Site.minimum(['abs(latitude - ?) - abs(longitude - ?)', params[:lat], params[:lon]], group: :id) 
```

但这似乎不起作用。文档不是很清楚如何实现这一点。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T19:33:51.983

Rails[`sanitize_sql_for_conditions`](https://api.rubyonrails.org/classes/ActiveRecord/Sanitization/ClassMethods.html#method-i-sanitize_sql_for_conditions)在内部使用来处理占位符。当然，该方法受到保护，因此您不能（干净地）在 ActiveRecord 模型之外使用它。您可以使用以下方法绕过保护[`send`](https://ruby-doc.org/core/Object.html#method-i-send)：

```
nearest = Site.minimum(
  Site.send(:sanitize_sql_for_conditions, [
    'abs(latitude - ?) - abs(longitude - ?)',
    params[:lat].to_f, params[:lon].to_f
  ]
) 
```

或者您可以将该逻辑放在一个`Site`类方法中，这样您就可以在`sanitize_sql_for_conditions`没有欺骗的情况下使用：

```
class Site < ActiveRecord::Base
  def self.whatever_this_is(lat, lon)
    minimum(
      sanitize_sql([
        'abs(latitude - ?) - abs(longitude - ?)',
        lat, lon
      ])
    )
  end
end 
```

然后在你的控制器中：

```
nearest = Site.whatever_this_is(params[:lat].to_f, params[:lon].to_f) 
```

记下[`to_f`](https://ruby-doc.org/core/String.html#method-i-to_f)电话。如果你不包括那些，那么`params[:lat]`将`params[:lon]`是字符串，`sanitize_sql_for_conditions`并将引用它们：

```
abs(latitude - '11.23') - abs(longitude - '42.6') 
```

您的数据库可能会也可能不高兴看到您尝试从数字中减去字符串，因此最好准确说出您的意思并自己进行类型转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:35:45.847

当然，我无法从上面的示例中看出您要完成什么，但看起来您可能不正确地使用了将方法名称作为其第一个参数的最小方法。例如：

```
Site.minimum(:latitude) 
```

如果你想给它添加条件，我想你会想使用：

```
Site.where(country: 'USA').group(:id).minimum(:latitude) 
```

同样，此示例不会返回您期望的结果，但它应该更好地解释 API 的使用方式。

# android - Android系绳 - 获取当前的SSID

> ID：10850936
> 
> 赞同：3
> 
> 时间：2012-06-01T13:08:59.640
> 
> 标签：android, android-wifi, tethering

重复问题 -[如何在我当前的 android 系统中获取我的 wifi 热点 ssid](https://stackoverflow.com/questions/7599569/how-to-get-my-wifi-hotspot-ssid-in-my-current-android-system) 抱歉重复了这个问题，但它仍然没有答案。我的手机处于网络共享模式，所以我想知道它的 SSID。我怎样才能找到这个？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-03T07:25:18.427

有点晚了，但我最近设法获得了设备热点的 SSID。它可以在我的 Galaxy Nexus 上运行，但尚未对其进行太多测试。

```
public static WifiConfiguration getWifiApConfiguration(final Context ctx) {
    final WifiManager wifiManager = (WifiManager) ctx.getSystemService(Context.WIFI_SERVICE);
    final Method m = getWifiManagerMethod("getWifiApConfiguration", wifiManager);
    if(m != null) {
        try {
            return (WifiConfiguration) m.invoke(wifiManager);
        } catch(Exception e) {
        }
    }
    return null;
}

private static Method getWifiManagerMethod(final String methodName, final WifiManager wifiManager) {
    final Method[] methods = wifiManager.getClass().getDeclaredMethods();
    for (Method method : methods) {
        if (method.getName().equals(methodName)) {
            return method;
        }
    }
    return null;
} 
```

只需调用 getWifiApConfiguration(getActivity()).SSID 即可获取热点名称。建议在此之前检查空指针；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T13:24:38.260

```
WifiManager mng = (WifiManager)context.getSystemService(Context.WIFI_SERVICE).

String currentSSID = mng.getConnectionInfo().getSSID() 
```

# asp.net-mvc-3 - MVC 3 验证：如何在特定用例中覆盖 DataAnnotations 属性？

> ID：10850937
> 
> 赞同：3
> 
> 时间：2012-06-01T13:09:03.403
> 
> 标签：asp.net-mvc-3, validation, data-annotations

在 ASP.NET MVC3 应用程序中，我有一个模型，它表示具有典型名称、StreetAddress 1 和 2、City、Region、PostalCode 和 Country 属性的用户地址。该模型当前具有适用于美国地址的 DataAnnotation 属性。我现在需要支持具有不同验证和消息的国际地址，具体取决于模型中包含的 Country 值。当国家/地区类似于印度或日本而不是美国时，如何定义和覆盖现有的美国 DataAnnotation 属性值？

例如，现有的 PostalCode 属性定义如下：

```
 private string _postalCode;
    [StringLength(10, ErrorMessage = "Zip Code maximum length 10 characters")]
    [Display(Name = "Zip Code")]
    [Required(ErrorMessage = "Zip Code is required")]
    [RegularExpression(@"^\d{5}(-\d{4})?$", ErrorMessage = "Invalid Zip Code")]
    public string PostalCode
    {
        get { return _postalCode; }
        set
        {
            if (_postalCode != value)
            {
                _postalCode = value;
            }
        }
    } 
```

我知道如果我有一个特定的印度地址模型，那么邮政编码将如下所示：

```
 private string _postalCode;
    [StringLength(6, ErrorMessage = "Postal Code maximum length 6 characters")]
    [Display(Name = "Postal Code")]
    [Required(ErrorMessage = "Postal Code is required")]
    [RegularExpression(@"^([0-9]{6})$", ErrorMessage = "Invalid Postal Code")]
    public string PostalCode
    {
        get { return _postalCode; }
        set
        {
            if (_postalCode != value)
            {
                _postalCode = value;
            }
        }
    } 
```

当用户选择特定国家/地区时，如何使用此模型实现正确的客户端和服务器端验证？

我希望在更改国家/地区时执行 ajax 调用以检索更新的部分视图，或者向客户端发送足够的数据，以便我可以通过修改输入元素上的适当属性并重置来调整客户端提示和验证验证，但是如何在发出 Model.IsValid() 调用时让服务器端模型正确验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T13:12:19.170

通过复杂的验证，我发现最容易实现[IValidatableObject](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.ivalidatableobject.aspx)接口

```
IEnumerable<ValidationResult> Validate(
    ValidationContext validationContext
) 
```

基本上是这样的

```
 public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        MyAddress model = validationContext.ObjectInstance as MyAddress;
        if (model.Country == "India")
        {
            // validate as india
        }
    } 
```

这与默认验证系统无缝集成，因此您不需要任何额外的配置。但要注意，这只是服务器端验证。

# objective-c - 除了一个之外的所有 NSMenuItems 都被传递给 validateMenuItem：

> ID：10850940
> 
> 赞同：0
> 
> 时间：2012-06-01T13:09:18.013
> 
> 标签：objective-c, cocoa

我已经覆盖`- (BOOL)validateMenuItem:(NSMenuItem *)menuItem`

我菜单的所有 NSMenuItems 都传递给这个委托方法，除了一个，这是我需要的一个。

我认为所有项目**总是**传递给这个方法。如果没有，我错过了什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T07:37:52.143

好的，我找到了原因，这很棘手。

连接到 NSMenuItem 的 IBAction 必须在委托类中实现。

如果将菜单连接到一个类，并将其 NSMenuItem 连接到另一个类中的 IBAction，则不会为此类 NSMenuItem 调用 validateMenuItem 方法。

# objective-c - 执行“if”条件一段时间，然后再停止一段时间并重复？

> ID：10850945
> 
> 赞同：0
> 
> 时间：2012-06-01T13:09:41.093
> 
> 标签：objective-c, ios, xcode

> **可能重复：**
> [执行“if”条件“x”毫秒并停止“y”毫秒并重复条件？](https://stackoverflow.com/questions/10845025/execute-an-if-condition-x-milliseconds-and-stop-for-ymillisecond-and-repea)

我有一个程序在程序运行期间连续测试 if 循环内的条件。但我希望这个 if 条件在一段时间内变为 true 或激活（比如 5 毫秒），然后在接下来的 10 毫秒内停用 if 条件。然后继续这个模式直到用户关闭程序！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T13:25:03.407

虽然听起来你真的应该采取不同的方法，但从字面上看，这就是你问题的答案：

```
while ( YES )
{
    NSTimeInterval t = [NSDate timeIntervalSince1970];
    long ms = t*1000;
    if ( ms % 15 < 5 )
    {
       // code here is executed for 5 ms in every 15 ms timewindow
    }
} 
```

此循环将对应用程序性能和电池寿命*非常*不利。

根据“每 15 毫秒，每 15 毫秒”必须执行哪种代码，您可以`NSTimer`改用：

```
[NSTimer scheduledTimerWithTimeInterval:0.015 target:self
         selector:@selector(fire) userInfo:nil repeats:YES]; 
```

用一个方法：

```
-(void)fire
{
    // called every 15 ms, does something for 5 ms.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:13:18.237

`||`如果检查与否，请再添加一个带有布尔标志指示的条件。`if(shouldNotCheckCondition || condition)`

# javascript - 存储/记录来自 socket.io 的所有发射数据和回放

> ID：10850947
> 
> 赞同：0
> 
> 时间：2012-06-01T13:09:54.400
> 
> 标签：javascript, node.js, redis, socket.io

让我们以画布绘图为例。来源：[http ://wesbos.com/html5-canvas-websockets-nodejs/](http://wesbos.com/html5-canvas-websockets-nodejs/)

如何存储或记录从 socket.io 发出的数据，以便再次播放？例如，一个艺术家在上面的画布上画了一幅画，它应该被记录下来，以便学习者可以一遍又一遍地看到它。

是否有任何可用的库或模块可以帮助存储这些数据？将这些数据保存在 xml 之类的文件中更好还是应该存储在 Redis 之类的数据库中？要播放此数据，必须将其与时间信息一起存储。

**更新 1**
找到了一个完美的例子。
[http://draw.2x.io/replay.html#/history/flodge/9236932481660473952/play](http://draw.2x.io/replay.html#/history/flodge/9236932481660473952/play)
似乎（来自推文）上面的站点使用了redis和mongodb。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T18:10:48.630

回答我自己的问题，我不确定这是否是正确的方法。

从下面的例子。它使用动画按钮来回放录制的会话。
[http://code.google.com/p/html-5-canvas-whiteboard/](http://code.google.com/p/html-5-canvas-whiteboard/)

看起来可以将完整的记录存储为浏览器内存中的对象。
相同的对象将建立在服务器上（在内存中）。
录制会话完成后，可以将其存储在数据库中。

在回放期间，可以在单个请求中检索数据库中的对象。

# xml - 是否可以扩展 XSD 类型？

> ID：10850950
> 
> 赞同：1
> 
> 时间：2012-06-01T13:09:58.597
> 
> 标签：xml, xsd

如果我有一个类型定义为

```
<xs:element name="serviceResponse">
        <xs:complexType>
            <xs:sequence>
                <xs:element ref="status"/>
                <xs:element ref="info"/>
                <xs:element ref="code"/>
            </xs:sequence>
        </xs:complexType> 
```

并希望有一个额外的类型，定义为

```
 <xs:element name="serviceResponse">
        <xs:complexType>
            <xs:sequence>
                <xs:element ref="status"/>
                <xs:element ref="info"/>
                <xs:element ref="code"/>
                            <xs:element ref="level"/>
            </xs:sequence>
        </xs:complexType>
    </xs:element> 
```

是否可以创建一个扩展第一个类型的新类型，并且只将“级别”元素附加到新类型？（有点像Java中的继承）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T15:44:11.243

如果只有 serviceResponse 的类型是命名类型而不是匿名类型，这将是可能的：

```
 <xs:complexType name="serviceResponseType">
        <xs:sequence>
            <xs:element ref="status"/>
            <xs:element ref="info"/>
            <xs:element ref="code"/>
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="extendedType">
      <xs:complexContent>
        <xs:extension base="serviceResponseType">
           <xs:sequence>
             <xs:element ref="level"/>
           </xs:sequence>
        </
     </
   </ 
```

# java - 强制首先执行“WebFilter”

> ID：10850955
> 
> 赞同：1
> 
> 时间：2012-06-01T13:10:10.737
> 
> 标签：java, jakarta-ee, servlet-filters

考虑我的以下过滤器映射`web.xml`

```
<filter-mapping>
    <filter-name>rememberMeCookieFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<filter-mapping>
    <filter-name>mustBeSignedInFilter</filter-name>
    <url-pattern>/private/*</url-pattern>
</filter-mapping> 
```

据我从我所做的测试中了解到，如果我去`/private/account.jsp`， mustBeSignedInFilter 将始终首先执行（据我所知[，这是因为路径更具体](https://stackoverflow.com/questions/7938138/what-if-url-pattern-matches-multiple-servlets)）。我需要先执行 rememberMeCookieFilter。

我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:21:53.440

您将过滤器映射与 servlet 映射混淆了。与 URL 匹配的所有过滤器都按照在 中指定的过滤器映射顺序执行`web.xml`。因此，交换过滤器映射，它将按您的预期工作。

```
<filter-mapping>
    <filter-name>mustBeSignedInFilter</filter-name>
    <url-pattern>/private/*</url-pattern>
</filter-mapping>
<filter-mapping>
    <filter-name>rememberMeCookieFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

# iphone - 在 WebView 中播放 Youtube 视频后，MPMediaPickerController 不显示

> ID：10850957
> 
> 赞同：0
> 
> 时间：2012-06-01T13:10:18.737
> 
> 标签：iphone, ios

MPMediaPickerController 工作正常，但在 webview 中播放 youtube 视频后
[self presentModalViewController:pickerController animated:YES];
不显示 MPMediaPickerController
im 使用此代码播放 youtube 视频

```
 - (void)embedYouTube:(NSString*)url frame:(CGRect)frame {  
      NSString* embedHTML = @"\ 
      <html><head>\ 
      <style type=\"text/css\">\ 
      body {\ 
          background-color: transparent;\ 
      color: white;\ 
      }\ 
      </style>\ 
      </head><body style=\"margin:0\">\ 
      <embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" \ 
      width=\"%0.0f\" height=\"%0.0f\"></embed>\ 
      </body></html>";  
      NSString* html = [NSString stringWithFormat:embedHTML, url, frame.size.width,    frame.size.height];  
      demoWebView.hidden = NO;
      [demoWebView loadHTMLString:html baseURL:nil]; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:01:11.983

我正在使用 presentModalViewController 和正在播放 YouTube 视频的 UIWebView，现在正在使用导航控制器，一切正常。

# cocoa-touch - UITableViewCell 中的字幕对齐

> ID：10850958
> 
> 赞同：3
> 
> 时间：2012-06-01T13:10:28.377
> 
> 标签：cocoa-touch, uitableview, uilabel

我正在尝试在单元格中构建带有字幕文本的表格视图

问题是当我尝试将字幕文本的对齐方式设置为右侧时它不起作用，但它适用于正文

这是我的代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"CustomCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    [[cell textLabel] setTextAlignment:UITextAlignmentRight];
    [[cell detailTextLabel] setTextAlignment:UITextAlignmentRight];

    cell.textLabel.text = [array objectAtIndex:indexPath.row];
    cell.textLabel.font = [UIFont systemFontOfSize:18];
    cell.detailTextLabel.text = @"test";
    return cell;
} 
```

当我删除字幕代码时，对齐工作正常

任何的想法 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T14:29:06.780

好的，子类 UITableView Cell 并使用 init 自定义标签。您可以覆盖 layoutSubviews 并将标签向右移动：

```
- (void)layoutSubviews {
    [super layoutSubviews];
    self.textLabel.frame = CGRectMake(0.0, 68.0, 80.0, self.frame.size.height);
    self.detailTextLabel.frame = CGRectMake(0.0, 68.0, 120.0, self.frame.size.height);
} 
```

这些只是示例值，因此您可以理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T14:32:55.457

为什么要初始化单元两次：

```
if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    } 
```

您可以创建具有两个标签的自定义单元格并为这些标签提供对齐方式。按照以下步骤操作：

1.添加UITableViewCell的新文件子类说labelCustomCell。2.在 labelCustomCell 中创建两个标签，分别是 label1 和 label2。3.在 initWithStyle 方法中分配这些标签并提供对齐。4.在 layoutSubViews 方法中为这些标签分配框架。5.在 cellForRowAtIndexPath 方法中编写如下代码：

```
 static NSString *CellIdentifier = @"DataEntryCell";
                labelCustomCell *cell = (labelCustomCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
                if (cell == nil) {
                    cell = [[[labelCustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
                }
cell.label1.text = [array objectAtIndex:indexPath.row];
    cell.label1.font = [UIFont systemFontOfSize:18];
    cell.label2.text = @"test"; 
```

不要忘记导入 labelCustomCell。

# javascript - 间隔被两个 Ajax 调用阻塞

> ID：10850959
> 
> 赞同：0
> 
> 时间：2012-06-01T13:10:36.887
> 
> 标签：javascript, ajax, intervals

我有一个间隔，它每 3 秒运行一个函数。

```
intervalStepper = window.setInterval('intervalTick()','3000');

function intervalTick() {
    if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else {// code for IE6, IE5
        xmlhttp=new ActiveXObject('Microsoft.XMLHTTP');
    }
    xmlhttp.onreadystatechange=function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {
            gotResult(xmlhttp.responseText);
        }
    }
    xmlhttp.open('GET','index.php?ajax=true',true);
    xmlhttp.send();
}
function gotResult(res) {
    alert(res);
} 
```

此外，我还有另一个 Ajax 调用，它在按钮单击时运行。

```
if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
}
else {// code for IE6, IE5
    xmlhttp=new ActiveXObject('Microsoft.XMLHTTP');
}
xmlhttp.onreadystatechange=function() {
    if (xmlhttp.readyState==4 && xmlhttp.status==200) {
        agentDetailGotten(xmlhttp.responseText);
    }
}
xmlhttp.open('GET','index.php?anotherPage=true',true);
xmlhttp.send(); 
```

现在，如果我在时间间隔滴答作响并执行第一个调用时及时运行第二个代码，那么这些调用实际上几乎在同一时间运行。但后来似乎间隔以某种方式消失了——他不再滴答作响了。

这是一个已知问题还是我只是没有看到什么大问题......

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:20:36.547

尝试清除并再次设置您的时间间隔：

```
intervalStepper = window.setInterval('intervalTick()',3000);

function intervalTick() {

    window.clearInterval(intervalStepper);

    if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else {// code for IE6, IE5
        xmlhttp=new ActiveXObject('Microsoft.XMLHTTP');
    }
    xmlhttp.onreadystatechange=function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {
            gotResult(xmlhttp.responseText);
        }
    }
    xmlhttp.open('GET','index.php?ajax=true',true);
    xmlhttp.send();

    intervalStepper = window.setInterval('intervalTick()',3000);

}

function gotResult(res) {
    alert(res);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T14:12:11.960

我刚才已经解决了。

看起来这有点像 firefox 错误（在 bugzilla.mozilla.org 上找到）

NS_ERROR_NOT_AVAILABLE

这个没有显示给我，但我现在才发现。它在 Firefox 尝试同时执行两个调用时出现。

[有关更多信息，我在这里](http://www.carlj.ca/2008/06/18/fixing-firefoxs-ns_error_not_available-error-when-using-pagemethods/)找到了一个博客条目

我解决了这个问题，如果一个呼叫正在运行，另一个则等待。

# batch-file - 批处理文件命令根据条件将文件从一个位置/目录复制到另一个位置

> ID：10850962
> 
> 赞同：2
> 
> 时间：2012-06-01T13:10:42.840
> 
> 标签：batch-file

**设想：**

我想将特定文件复制到另一个位置。

**目标文件夹路径：`D:\Correct\email`**

**源文件夹路径：`C:\Revert\email`.**

在`email`文件夹中会有很多子文件夹，每个子文件夹都包含两个文件`abc.csv`，`xyz.csv` 所以我想将文件`abc.csv`从最新创建的文件夹（即在电子邮件文件夹的子文件夹中）复制到目标文件夹并且不需要知道子文件夹的名称.

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:18:10.370

你可以得到一个排序的目录列表

```
dir /B /TC /O-D /AD 
```

您可以将第一个结果放入变量中

```
for /f "usebackq delims=" %%D in (`dir /B /TC /O-D /AD C:\Revert\email`) do if not defined Newest set Newest=%%~fD 
```

然后，您可以使用复制文件

```
copy /Y %Newest%\*.csv D:\Correct\email 
```

# iphone - 创建 TCP 套接字连接并在多个视图中保持连接打开

> ID：10850965
> 
> 赞同：2
> 
> 时间：2012-06-01T13:11:09.483
> 
> 标签：iphone, ios, sockets, networking, singleton

我已经使用 TCP 套接字成功地从 iPhone 连接到服务器（这是一台 Windows 机器）。目前，我正在使用一个按钮来执行以下代码：

```
while(1)
{
    Socket *socket;
    int port = 11005;
    NSString *host = @"9.5.3.63";

    socket = [Socket socket];

    @try
    {
        NSMutableData *data;
        [socket connectToHostName:host port:port];
        [socket readData:data];
        //  [socket writeString:@"Hello World!"];

        //** Connection was successful **//
        [socket retain]; // Must retain if want to use out of this action block.
    }
    @catch (NSException* exception) 
    {
        NSString *errMsg = [NSString stringWithFormat:@"%@",[exception reason]];
        NSLog(errMsg);
        socket = nil;
    }
} 
```

这是最简单的部分......我正在尝试在应用程序加载后立即建立套接字连接。我尝试将此代码放在我的 viewDidLoad 中，但循环是无限的，并且视图永远不会加载。我的项目中有几个视图，我想打开连接，在所有视图中始终保持连接打开。

客观的：

*   应用首次加载时打开 TCP 套接字连接
*   无论我在什么视图中，都可以无限地保持连接（项目中的多个视图）

我对 iOS 开发还是比较陌生，所以我尽可能地理解。应该注意的是，我正在使用 SmallSockets 库来打开我的 Sockets 连接。谢谢您的帮助！

*** 编辑 ***

根据下面的答案，这就是我到目前为止所做的：

套接字连接.h

```
#import <Foundation/Foundation.h>

@interface SocketConnection : NSObject
{

}

+ (SocketConnection *)getInstance;

@end 
```

套接字连接.m

静态 SocketConnection *sharedInstance = nil;

```
@implementation SocketConnection

- (id)init
{
    self = [super init];

    if (self) 
    {
        while(1)
        {
            Socket *socket;
            int port = 11005;
            NSString *host = @"9.5.3.63";

            socket = [Socket socket];

            @try
            {
                NSMutableData *data;
                [socket connectToHostName:host port:port];
                [socket readData:data];
                //  [socket writeString:@"Hello World!"];

                //** Connection was successful **//
                [socket retain]; // Must retain if want to use out of this action block.
            }
            @catch (NSException* exception) 
            {
                NSString *errMsg = [NSString stringWithFormat:@"%@",[exception reason]];
                NSLog(errMsg);
                socket = nil;
            }
        }
    }
    return self;
}

+ (SocketConnection *)getInstance
{
    @synchronized(self) 
    {
        if (sharedInstance == nil) 
        {
            sharedInstance = [[SocketConnection alloc] init];
        }
    }
    return sharedInstance;
}

@end 
```

我还没有弄清楚单例类是如何被调用的。我使用上面的代码启动了我的应用程序，但它没有连接到服务器。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T14:55:07.280

您应该创建一个单例类来保持您的连接，如下面的代码：

**h 文件：**

```
#import <Foundation/Foundation.h>
    @interface SocketConnection : NSObject
    {
    }

     + (SocketConnection *)getInstance;

    @end; 
```

**.m 文件：**

```
#import "SocketConnection.h"

static SocketConnection *sharedInstance = nil;

@implementation SocketConnection

- (id)init
{
    self = [super init];

    if (self) {
    }
    return self;
}

+ (SocketConnection *)getInstance
{
    @synchronized(self) {
        if (sharedInstance == nil) {
            sharedInstance = [[SocketConnection alloc] init];
        }
    }
    return sharedInstance;
}

@end; 
```

# android - 如何在 Android ICS 上检查 VPN 连接状态

> ID：10850966
> 
> 赞同：10
> 
> 时间：2012-06-01T13:11:24.727
> 
> 标签：android, broadcastreceiver, vpn

我正在尝试注册接收器，它将检查 VPN 状态。我试过这个：[在 Android 上获取 VPN 连接状态，](https://stackoverflow.com/questions/3461967/get-vpn-connection-status-on-android)但看起来它不再适用于 ICS。我已经检查了 android 源代码以获取一些线索，但没有运气，只注意到在 ISC 中没有类似的东西：`vpn.connectivity`和`connection_state`- 它曾经在 android 2.3 中。也尝试使用`android.net.conn.CONNECTIVITY_CHANGE`as my `IntentFilter`，但它根本不会对 VPN 连接做出反应（当然我已经添加了权限`android.permission.ACCESS_NETWORK_STATE`）。我认为这很简单，但我已经不知道该怎么做了......有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-18T23:30:59.790

可能您可以尝试轮询 DNS 服务器更改。如果它已更改，则 VPN 已连接。但是，我认为这条规则可能有很多例外。

[您如何获取当前适用于 Android 的 DNS 服务器？](https://stackoverflow.com/questions/3070144/how-do-you-get-the-current-dns-servers-for-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-12T07:09:56.743

My solution is polling a NIC list.
# You can get the list by executing command "ls /sys/class/net".

If the list has "tun0", the device already has connected to VPN.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-02T07:49:53.160

```
for (Enumeration<NetworkInterface> en =
             NetworkInterface.getNetworkInterfaces(); en.hasMoreElements(); ) {
            NetworkInterface intf = en.nextElement();
            if (intf.getName().contains("tun0") || intf.getName().contains("ppp0")) {
                vpnInterface = intf;
                break;
            }
        } 
```

对于 VPN 网络接口

```
for (Enumeration<InetAddress> en =
                 vpnInterface.getInetAddresses(); en.hasMoreElements(); ) {
                InetAddress address = en.nextElement();
                if (!address.isLoopbackAddress()) {
                    String ip = address.getHostAddress();
                    break;
                }
            } 
```

和 InetAddress

这就是我现在所知道的一切

检查它是否启动等。也许

```
if (vpnInterface.isUp()) 
```

我确实已经实现了一个代码，它在一段时间后调用自己并向 ApplicationHandlers 发送消息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-08T16:47:42.540

`NetworkCapabilities`在 API 21+ 中为我工作。不幸的是，我还没有找到 19-20 的解决方案。您必须遍历所有现有网络并检查哪些网络`VPN_TRANSPORT`

```
ConnectivityManager cm = (ConnectivityManager)mContext.getSystemService(Context.CONNECTIVITY_SERVICE);
Network[] networks = cm.getAllNetworks();

Log.i(TAG, "Network count: " + networks.length);
for(int i = 0; i < networks.length; i++) {

  NetworkCapabilities caps = cm.getNetworkCapabilities(networks[i]);

  Log.i(TAG, "Network " + i + ": " + networks[i].toString());
  Log.i(TAG, "VPN transport is: " + caps.hasTransport(NetworkCapabilities.TRANSPORT_VPN));
  Log.i(TAG, "NOT_VPN capability is: " + caps.hasCapability(NetworkCapabilities.NET_CAPABILITY_NOT_VPN));

} 
```

# c# - 读取大型 XML 文件并将数据插入数据库

> ID：10850969
> 
> 赞同：1
> 
> 时间：2012-06-01T13:11:33.527
> 
> 标签：c#, .net, sql-server-2008, xml-parsing

我有大的 XML 文件，最大 4 到 5 GB。

我设法阅读它，`XmlReader`但现在想将值添加到数据库中

我使用简单的插入查询将值添加到数据库并卡住了，将值插入数据库需要 2 个多小时才能获得 2 GB 文件。是否有其他方法可以更有效地将 XML 文件中的值添加到数据库中？

XML 文件具有要添加到数据库中的新属性及其值。

我正在使用 SQL Server 2008 和 .NET。

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:15:12.580

bcp 通常是最快的方法...

[http://msdn.microsoft.com/en-us/library/ms191184.aspx](http://msdn.microsoft.com/en-us/library/ms191184.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:17:45.293

这听起来像是“批处理”式操作。考虑采取不同的方法：

1.  创建一个 xsl 转换，将您的 xml 转换为 BULK INSERT 语句
2.  将生成的 sql 脚本保存到文件或构建命令字符串
3.  执行sql脚本

请参阅[此 MSDN 主题](http://msdn.microsoft.com/en-us/library/ms188365.aspx)。

这种方法几乎肯定会比遍历 XML 并一次插入一行具有更高的性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T14:29:47.750

您可以互操作 XmlBulkLoad。可能[这](http://msdn.microsoft.com/en-us/library/ms171806.aspx)可以帮助你吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T14:36:48.367

如果您直接从 SQL Server 读取 XML 文件，您将获得更快的响应。

它是一个 3 步过程，简化如下：

1) 声明@doc xml = '你的xml here' 声明@handler int

2) 执行 sp_xml_preparedocument @handler OUTPUT, @doc

3) select * from OPENXML(@handler, '/ROOT/Path/To/Data')

# c# - 如何验证不同格式的日期

> ID：10850970
> 
> 赞同：3
> 
> 时间：2012-06-01T13:11:36.083
> 
> 标签：c#, asp.net, regex

我有一个正则表达式来验证日期，如下所示

`^(((0[1-9]|[12]\d|3[01])\/(0[13578]|1[02])\/((19|[2-9]\d)\d{2}))|((0[1-9]|[12]\d|30)\/(0[13456789]|1[012])\/((19|[2-9]\d)\d{2}))|((0[1-9]|1\d|2[0-8])\/02\/((19|[2-9]\d)\d{2}))|(29\/02\/((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))))$`

但是，如果我按如下方式输入日期，这将有效`20/03/2012`.. 同样，我想添加不同的验证，它们可以一起用于以下

`20032012 (ddmmyyyy)` `03202012(mmddyyyy)`

有人能帮我吗

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-01T13:13:48.313

使用[`DateTime.TryParseExact`](http://msdn.microsoft.com/en-us/library/system.datetime.tryparseexact.aspx)- 有一个采用格式字符串数组的重载，因此您可以提供所有可能的格式。

来自 MSDN - [DateTime.TryParseExact 方法（字符串、字符串 []、IFormatProvider、DateTimeStyles、DateTime）](http://msdn.microsoft.com/en-us/library/h9b85w22.aspx)：

```
string[] formats= {"M/d/yyyy h:mm:ss tt", "M/d/yyyy h:mm tt", 
                   "MM/dd/yyyy hh:mm:ss", "M/d/yyyy h:mm:ss", 
                   "M/d/yyyy hh:mm tt", "M/d/yyyy hh tt", 
                   "M/d/yyyy h:mm", "M/d/yyyy h:mm", 
                   "MM/dd/yyyy hh:mm", "M/dd/yyyy hh:mm"};
string[] dateStrings = {"5/1/2009 6:32 PM", "05/01/2009 6:32:05 PM", 
                        "5/1/2009 6:32:00", "05/01/2009 06:32", 
                        "05/01/2009 06:32:00 PM", "05/01/2009 06:32:00"}; 
DateTime dateValue;

foreach (string dateString in dateStrings)
{
   if (DateTime.TryParseExact(dateString, formats, 
                              new CultureInfo("en-US"), 
                              DateTimeStyles.None, 
                              out dateValue))
      Console.WriteLine("Converted '{0}' to {1}.", dateString, dateValue);
   else
      Console.WriteLine("Unable to convert '{0}' to a date.", dateString);
}
// The example displays the following output:
//       Converted '5/1/2009 6:32 PM' to 5/1/2009 6:32:00 PM.
//       Converted '05/01/2009 6:32:05 PM' to 5/1/2009 6:32:05 PM.
//       Converted '5/1/2009 6:32:00' to 5/1/2009 6:32:00 AM.
//       Converted '05/01/2009 06:32' to 5/1/2009 6:32:00 AM.
//       Converted '05/01/2009 06:32:00 PM' to 5/1/2009 6:32:00 PM.
//       Converted '05/01/2009 06:32:00' to 5/1/2009 6:32:00 AM. 
```

# android - ImageView ScaleType 忽略填充

> ID：10850976
> 
> 赞同：32
> 
> 时间：2012-06-01T13:12:05.993
> 
> 标签：android, gridview, imageview, border

我有一个带有白色背景和 1dp 填充的 Imageview 集，这会产生类似边框的效果，这是想要的结果。

现在，如果我将 scaleType 设置为 centerCrop，它会忽略顶部和底部的填充。
所以我仍然在左侧和右侧有我的边框，但在顶部和底部没有。

任何有想法阻止这种情况发生的人？或者另一种在图像周围创建边框的快速方法。我将它用于我的自定义网格视图

```
 <ImageView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:background="#FFFFFF"
            android:contentDescription="@string/test"
            android:padding="1dp"
            android:src="@drawable/some_photo"
            android:scaleType="centerCrop" /> 
```

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2012-09-21T12:52:36.967

```
<ImageView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:contentDescription="@string/test"
    android:padding="1dp"
    android:src="@drawable/some_photo"
    android:cropToPadding="true"
    android:scaleType="centerCrop" /> 
```

你只需要添加[android:cropToPadding](http://developer.android.com/reference/android/widget/ImageView.html#attr_android:cropToPadding)

> 机器人：cropToPadding="真"

然后 imageView 将尊重您选择的填充。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T13:17:18.053

您可以通过设置给边框`android:background="@drawable/edit_border"`

还有你的edit_border：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

    <stroke
        android:width="2dp"
        android:color="#EBDDE2" />

    <padding
        android:bottom="2dp"
        android:left="2dp"
        android:right="2dp"
        android:top="4dp" />

    <gradient
        android:centerColor="@color/white" 
        android:endColor="@color/white"
        android:startColor="@color/white" />

    <corners android:radius="8dp" />

</shape> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-03T05:01:23.680

@Manolo Garcia 的回答是正确的。这有助于我使用边框、缩放类型中心裁剪和填充进行动态图像视图。

```
final ImageView imageView = new ImageView(context);
LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(200,200);
lp.setMargins(0, 0, 10, 0);
imageView.setLayoutParams(lp);
imageView.setAdjustViewBounds(true);
imageView.setCropToPadding(true);
imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
imageView.setBackgroundResource(R.drawable.img_blue_border);
imageView.setPadding(5, 5, 5, 5); 
```

* * *

## 回答 #4

> 赞同：-9
> 
> 时间：2012-06-03T14:50:07.660

我刚刚遇到了同样的问题，因为我的解决方法是添加 android:layout_marginRight="5dip"

```
<ImageView
    android:layout_width="40dp"
    android:layout_height="30dp"
    android:background="#ffffffff"
    android:src="@drawable/liveview_logo"
    android:layout_marginRight="5dip"/> 
```

# jqgrid - jqGrid - 如何修改 form_editing 构造？

> ID：10850978
> 
> 赞同：3
> 
> 时间：2012-06-01T13:12:29.023
> 
> 标签：jqgrid, form-editing

在 form_editing 的 jqGrid 文档中，我看到了[form_editing](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aform_editing)是如何构造的。

```
<form ...>
    <table>
        <tr id='tr_myfield'>  
          <td> Caption</td> 
          <td>edited element named, in colModel, as "myfield"</td> 
        </tr> ... 
    </table> 
</form> 
```

我可以改变这个结构吗？

这对我来说是必要的，因为我的表单中有太多列要编辑，我想以最用户友好的方式显示表单。例如，当我的表中有 20 列要编辑时。我的表格中有二十行。但我会为两列获得一行。我知道每一行都是通过它们的索引来标识的，所以我不能在同一行中只有两列。但是，如果可以伪造它，请确保它让我高兴^^（例如，有两个表和相似的 id 或我不知道的 form_editing 参数......）

PS：对不起我的英语不好。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-01T15:02:58.860

[formoptions](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:common_rules#formoptions)`rowpos`的一些`colpos`属性对您有帮助。

[该演示](http://www.ok-soft-gmbh.com/jqGrid/MulticolumnEdit.htm)演示了如何将 jqGrid 创建的标准编辑表单更改为以下内容

![在此处输入图像描述](../Images/df1c943caf228e08f7a173f3101a62d1.png)

如果我理解更正您的问题，使用`rowpos`and`colpos`可能对您的情况非常有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T13:15:59.413

如果您需要自定义表单，最好的办法可能是创建自己的页面并使用[jQuery UI Dialog](http://jqueryui.com/demos/dialog/)等插件来显示您的自定义表单。由于您无法使用 jqGrid 的内置表单编辑功能，因此工作量会更大，但您将完全控制表单的布局。

# python - 在 python 中，如何让 csv.DictReader 正确处理包含行返回的字符串？

> ID：10850979
> 
> 赞同：2
> 
> 时间：2012-06-01T13:12:35.280
> 
> 标签：python, csv, export-to-csv

我有一些 csv 文件，其中包含带有换行符的字符串。这些文件将在 Excel 中正常打开，但是当我尝试使用 csv.DictReader() 读取文件时，csv.DictReader() 似乎将字符串中的每个换行符作为新的数据行处理，而不是忽略回车在字符串中中断。

我该怎么做才能让下面的第二个测试像第一个测试一样通过？

```
#csv contents
this, is, a, test
1,2,u'thr\nee',4
5,6,7,8 

        result = []
        text = """this, is, a, test
1,2,u'three',4
5,6,7,8"""
        b = StringIO(text)
        reader = csv.DictReader(b)
        for row in reader:
                result.append(row)

        self.assertEqual(2,len(result))
        expected = [{'this': '1', ' test': '4', ' is': '2', ' a': "u'three'"}, {'this': '5', ' test': '8', ' is': '6', ' a': '7'}]
        self.assertEqual(expected ,result)

        #With a /n inside the string.

        result = []
        text = """this, is, a, test
1,2,u'thr\nee',4
5,6,7,8"""
        b = StringIO(text)
        reader = csv.DictReader(b)
        for row in reader:
                result.append(row)

        self.assertEqual(2,len(result))
        #expected = [{'this': '1', ' test': '4', ' is': '2', ' a': "u'thr\nee'"}, {'this': '5', ' test': '8', ' is': '6', ' a': '7'}]
        #self.assertEqual(expected,result) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:56:02.963

假设您的 csv 内容被正确引用，在实例化读者时指定适当的 quotechar 应该这样做：

[http://docs.python.org/release/2.6.7/library/csv.html#csv.Dialect.quotechar](http://docs.python.org/release/2.6.7/library/csv.html#csv.Dialect.quotechar)

否则，我假设您的内容中有 unix 换行符 ('\n') 和 dos 换行符 ('\r\n') 作为行终止符。从 Python 2.6.7 开始，文档提到，无论您指定什么，阅读器都被硬编码为将两者识别为行终止符，不知道您的 Python 版本是否属于这种情况。如果是，您将必须手动预处理（可能还有后处理）您的文件，以确保适当的引用或将单个 '\n' 替换为其他内容，然后在 csv 解析后执行相反的操作。

# windows-phone-7.1 - Windows phone 7 - 通过应用程序控制相机放大

> ID：10850980
> 
> 赞同：1
> 
> 时间：2012-06-01T13:12:39.217
> 
> 标签：windows-phone-7.1

我正在创建一个应用程序，我需要通过我的应用程序控制相机控件，例如相机捕捉、相机放大、缩小、闪光灯开/关等。

通常，在 iPhone 中，可以使用 API 来控制硬件的执行。我曾尝试使用 Silverlight 在 Windows Phone 7 中实现相同的目标。我找到了通过代码控制相机事件的代码，但找不到任何东西，以便通过按钮或滑块，我可以放大、缩小。

我尝试了参考视频[http://channel9.msdn.com/Shows/Inside+Windows+Phone/Inside-Windows-Phone-16-Mango-Camera-APIs](http://channel9.msdn.com/Shows/Inside+Windows+Phone/Inside-Windows-Phone-16-Mango-Camera-APIs)并下载了代码，但仍未找到任何具体内容。

我的问题是 Windows Phone 7 中是否有可能具有此功能，如果可以，有人可以指导我吗？

我还发现一件事，当相机打开时，图像是反向的:)

请帮我解决这个问题。

谢谢，

大卫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T18:52:42.417

要缩放，您必须手动处理图像。您将需要添加自己的 + 和 - 缩放按钮并跟踪缩放级别。然后，要显示缩放的取景器，您需要循环获取预览缓冲区并将图像自己缩放到当前缩放级别，然后显示它。当用户拍照时，您将在 CaptureImageAvailable 事件处理程序中对图像应用相同的缩放处理，然后再保存。

# javascript - 无法调整标签宽度。jQuery

> ID：10850982
> 
> 赞同：1
> 
> 时间：2012-06-01T13:12:50.200
> 
> 标签：javascript, jquery

我有这样一个草图：http: [//jsfiddle.net/challenge/upcZJ/](http://jsfiddle.net/challenger/upcZJ/)。

我发现一篇文章[http://www.jankoatwarpspeed.com/post/2008/07/09/Justify-elements-using-jQuery-and-CSS.aspx](http://www.jankoatwarpspeed.com/post/2008/07/09/Justify-elements-using-jQuery-and-CSS.aspx)解释了如何调整标签宽度相对于最宽的宽度。

但我不能这样做。我错过了什么？我试过在里面`accordion tab`和里面做这件事`aside division`。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:16:52.883

您的标签元素是`display: inline`（默认），因此该`width`属性不适用。

设置`display`为其他内容（例如`inline-block`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T13:23:37.870

您忘记添加文章中提到的 CSS

```
label, input[type="text"]{
    float:left;
    display:block;
}
label
{
    margin-right: 5px;
}
.field{
    width:100%;
    overflow:auto;
    margin:5px 0px;
} 
```

# bash - 在 shell/bash 脚本中配置水槽 - 避免交互式水槽 shell 控制台

> ID：10850986
> 
> 赞同：1
> 
> 时间：2012-06-01T13:13:06.043
> 
> 标签：bash, shell, scripting, flume

配置 Flume 的常规方式是通过 Flume Master Web 控制台，在这里很容易谈论它。

或者

通过交互式水槽 shell 控制台，按照以下步骤操作：

```
1\. $ flume shell   //this brings you to the interactive flume shell console
2\. in the interactive console,connect flume-master-node   // this connects you to flume-master
3\. in the interactive console, run "exec unconfig your_node"  // this unconfig all flume configuration 
4\. in the interactive console, run "exec config your_node new_config"    // apply new flume configuration
5\. quit  // exit the the interactive console 
```

到目前为止，一切都很好。

然后我正在尝试为我的水槽配置编写一个 bash 脚本。所以我想将 1,2,3,4,5 压缩到一个 bash 中，它每次都会自动运行而无需干预，如下所示：

```
/usr/bin/flume shell << EOF         #line1
connect $FLUME_MASTER               #line2

exec unconfig your_node             #line3
exec config your_node new_config    #line4

quit                                #line5

EOF                                 #line6 
```

但是每次我运行这个 bash 脚本时，它总是停在**#line1**并把我带到交互式水槽 shell 控制台，而不是在非迭代模式下安静地运行它。

有谁知道如何忽略交互模式并安静地运行它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:25:51.290

尝试该`-q`选项以`flume`查看是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T15:20:15.513

不知何故遵循了水槽用户指南[水槽/UserGuide_using_the_flume_command_shell](http://archive.cloudera.com/cdh/3/flume/UserGuide/#_using_the_flume_command_shell)：

```
echo "connect localhost:35873\ngetconfigs\nquit" | flume shell -q 
```

如果你把它放在一个 bash 脚本中，这不起作用。但我通过这样做得到了解决：

```
/usr/bin/flume shell -q << EOF 

connect localhost:35873

getconfigs

quit

EOF 
```

# java - 有没有办法使用 SAX 解析器来使用访问者模式？

> ID：10850989
> 
> 赞同：4
> 
> 时间：2012-06-01T13:13:12.533
> 
> 标签：java, sax, saxparser

我对此很好奇：如果我需要使用 Sax 解析器来提高效率（这是一个大文件）。通常我使用这样的东西：

```
public class Example extends DefaultHandler
{
    private Stack stack = new Stack ();

    public void startElement (String uri, String local, String qName, Attributes atts) throws SAXException
    {
        stack.push (qName);
    }

    public void endElement (String uri, String local, String qName) throws SAXException
    {
        if ("line".equals (qName))
            System.out.println ();

        stack.pop ();
    }

    public void characters (char buf [], int offset, int length) throws SAXException
    {
        if (!"line".equals (stack.peek ()))
            return;

        System.out.write (new String (buf, offset, length));
    }
} 
```

取自[此处](http://docstore.mik.ua/orelly/xml/sax2/ch02_03.htm)的示例。

Sax 已经是访问者模式的实现，但就我而言，我只需要获取每个元素的内容并根据元素本身的性质对其进行处理。

我的典型 XML 文件类似于：

```
<?xml version="1.0" encoding="utf-8"?>
<labs xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <auth>
        <uid> </uid>
        <gid> </gid>
        <key> </key>
    </auth>
    <campaign>
        <sms>
            <newsletter>206</newsletter>
            <message>
                <from>Da Definire</from>
                <subject>Da definire</subject>
                <body><![CDATA[Testo Da Definire]]></body>
            </message>
            <delivery method="manual"></delivery>
            <recipients>
                <db>276</db>
                <filter>
                    <test>1538</test>
                </filter>
                <new_recipients>
                    <csv_file>Corso2012_SMS.csv</csv_file>
                </new_recipients>
            </recipients>
        </sms>
    </campaign>
</labs> 
```

当我在 csv_file 节点中时，我需要获取文件名并从该文件上传用户，如果我在`filter/test`我需要检查过滤器是否存在等等。有没有办法通过 SAX 应用访问者模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:49:03.247

您可以简单地`Map<String, ElementHandler>`在您的 SAX 解析器中有一个，并允许为元素名称注册 ElementHandlers。假设您只对叶子元素感兴趣：

*   每次启动一个元素时，您都会查看映射中是否有此元素名称的处理程序，然后清除缓冲区。
*   每次`characters()`调用时，您将字符附加到缓冲区（如果有前一个元素开始的处理程序）
*   每次元素结束时，如果前一个元素开始有处理程序，则使用缓冲区的内容调用处理程序

这是一个例子：

```
private ElementHandler currentHandler;
private StringBuilder buffer = new StringBuilder();
private Map<String, ElementHandler> handlers = new HashMap<String, ElementHandler>();

public void registerHandler(String qName, ElementHandler handler) {
    handlers.put(qName, handler);
}    

public void startElement (String uri, String local, String qName, Attributes atts) throws SAXException {
    currentHandler = handlers.get(qName);
    buffer.delete(0, buffer.length());
}

public void characters (char buf [], int offset, int length) throws SAXException {
    if (currentHandler != null) {
        buffer.append(buf, offset, length);
    }
}

public void endElement (String uri, String local, String qName) throws SAXException {
    if (currentHandler != null) {
        currentHandler.handle(buffer.toString();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T00:04:36.167

不要忘记[StAX](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.6/tutorial/doc/SJSXP.html)。它可能不会使访问者模式变得更容易，但是如果您的文档相对简单并且您已经计划对它们进行流式传输，那么它确实具有比 SAX 更简单的编程模型。您只需遍历解析流中的事件，一次一个，根据您的选择忽略或操作它们。

# c# - Mvc3 中的 ModelBinding - 通过表单发布在操作之间重新创建模型 - 如何持久化

> ID：10850990
> 
> 赞同：3
> 
> 时间：2012-06-01T13:13:14.327
> 
> 标签：c#, asp.net-mvc-3

[我有一个多步骤向导，我从像这样](https://stackoverflow.com/questions/6402628/multi-step-registration-process-issues-in-asp-net-mvc-splitted-viewmodels-sing?answertab=votes#tab-top)的有用帖子中拼凑而成，但是它有一些问题.. 这是我的设置

```
[Serializable]
public class WizardModel
{

    public IList<IStepViewModel> Steps 
    { 
        get; 
        set; 
    }
    public void Initialize()
    {
        Steps = typeof(IStepViewModel)
            .Assembly
            .GetTypes()
            .Where(t => !t.IsAbstract && typeof(IStepViewModel).IsAssignableFrom(t))
            .Select(t => (IStepViewModel)Activator.CreateInstance(t))
            .ToList();
    } 
```

}

我的向导控制器

```
 public ActionResult Index()
    {
        var wizard = new WizardModel();     
        wizard.Initialize();
        //this populates wizard.Steps with 3 rows of IStepViewModel
        return View(rollover);       
    }

    [HttpPost]
    public ActionResult Index(
        [Deserialize] WizardModel wizard,
        IStepViewModel step
        )
    {
        //but when this runs wizard is a new class not the one previously Initialized
         wizard.Steps[rollover.CurrentStepIndex] = step;
    } 
```

我的问题是向导每次发布时都是一个新对象 - 当我试图通过相同的模型来填充数组中的每个步骤时。有谁知道我在这里哪里出错了？

这是模型绑定

全球.asax

```
 ModelBinders.Binders.Add(typeof(IStepViewModel), new FormTest.Models.StepViewModelBinder()); 
```

和

```
 public class StepViewModelBinder : DefaultModelBinder
{
    protected override object CreateModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Type modelType)
    {
        var stepTypeValue = bindingContext.ValueProvider.GetValue("StepType");
        var stepType = Type.GetType((string)stepTypeValue.ConvertTo(typeof(string)), true);
        var step = Activator.CreateInstance(stepType);
        bindingContext.ModelMetadata = ModelMetadataProviders.Current.GetMetadataForType(() => step, stepType);
        return step;
    }
} 
```

提前致谢

**编辑**：

如果我理解，使用会话的替代方法是序列化我的模型（如下），并在我的控制器操作中反序列化。我在模型上设置了发布到控制器的值..它会返回到下一步的视图中，依此类推..直到最后一步，当我有一个填充了每个步骤的向导模型时。

索引.cshtml

```
 @using (Html.BeginForm())
   {
         @Html.Serialize("wizard", Model);  
         etc...
   } 
```

所以我在这里尝试反序列化的向导参数

```
 [Deserialize] WizardModel wizard, 
```

每次通过控制器发布操作都是一个新对象 - 我想看看这是否可能不使用 Session 但@Html.Serialize？和发布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:00:14.973

这段代码最终完成了这项工作。在控制器动作内部，

```
 var serializer = new MvcSerializer();
        var value = Request["wizard"];
        var wizard = (WizardModel)serializer.Deserialize(value, SerializationMode.Signed); 
```

并且在视图中

```
 @Html.Serialize("wizard", Model, SerializationMode.Signed); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T13:22:25.437

使用会话在请求之间持久化对象。

```
Session["SuperWizard"] = wizard 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T13:29:46.550

模型绑定用于将 POST 表单值绑定到新对象。因此，如果您想要完全相同的对象，就像 Mike 建议的那样，您将需要使用 Session 或其他一些持久性存储。但是，如果您的对象每次都可以重新创建，那么您只需要在表单中放入足够的数据，以便在发布时，所有内容都可以重新绑定数据以在新对象中获取相同的值。

# css - Internet Explorer 中的 Z 索引问题

> ID：10850992
> 
> 赞同：1
> 
> 时间：2012-06-01T13:13:23.423
> 
> 标签：css, slideshow, overlap

我的页面中有“尴尬的展示”，但上面有一个下拉菜单。问题是陈列柜与菜单重叠，并不完全可见。

我可以更正更改 z-index，但它仅在我输入时才有效：

**尴尬展示的负面索引**

**下拉菜单的正索引**

正因为如此，由于展示柜有箭头来导航滑块，因此无法单击每个。似乎它们（箭头）位于透明层后面，因为它们是可见的，但处于非活动状态。

我的代码：

## 菜单

```
 <div id="navmenucontainer">
<ul id="navmenu">
    <li class="main" onclick="javascript: Mostrar(this);" id="menitem1"><a href="#" class="item">Productores</a>
        <div class="sub" onmouseout="setTimeout('Cierro(this)', 1000);" onmouseover="Sigue(this);" style="width:204px; overflow:hidden;">
         Some menu items
    </div>
    </li>
    </ul>
   </div> 
```

## 幻灯片

```
<div id="showcase" class="showcase">
                            <div class="showcase-slide">
                                <div class="showcase-content">
                                    <div class="showcase-content-wrapper">
                                       <img src="images/1.jpg">
                                    </div>
                                </div>
                                <div class="showcase-caption">

                                </div>
                             </div> 
```

## CSS

```
#navmenucontainer {
    z-index:999999;
}

*/ul#navmenu div.sub{
    display: none;
    background: url('images/menu/bgcat.png') repeat-x bottom #FFF;
    position: absolute;
    top:26;
    left:0;
    vertical-align:top;
    padding-top:0;
    padding-bottom: 22px;
    width:1240px;
    /*border-right:1px solid silver;*/
    border:1px solid silver;
    z-index:99999;
    zoom:1;
}

ul#navmenu li {
  margin: 0;
  /*border: 0 none;*/
  padding: 0;
  float:left; /*For Gecko*/
  display: inline;
  list-style: none;
  height: 20px;
}

ul#navmenu ul {
  margin: 0;
  padding: 0;
  float:left;
  width:100%;
}

.showcase
{
    position: relative;
    z-index:-1;
    margin: 0;
} 
```

重叠发生在“.sub”div 和“.showcase”中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:53:01.727

这是一个远景，但毕竟它是IE......它可能（几乎）正确或灾难......我遇到了同样的问题，每次都是不同的解决方案，这取决于运气......（IE糟透了，只是引用并同意先前的评论）

将此添加到您的 html

```
 <!--[if IE]>
<style type="text/css">

#navmenucontainer {
      z-index:3000;
}

ul#navmenu {
      z-index:2000;
}

ul#navmenu div.sub {
      z-index:1000;
}

.showcase {
      position: relative;
      z-index:0;
      margin: 0;
}
        </style>
        <![endif]--> 
```

灵感来自[http://brenelz.com/blog/squish-the-internet-explorer-z-index-bug/](http://brenelz.com/blog/squish-the-internet-explorer-z-index-bug/)

# codeigniter - 如何在 codeigniter 中显示 cookie？

> ID：10850993
> 
> 赞同：5
> 
> 时间：2012-06-01T13:13:28.697
> 
> 标签：codeigniter, cookies

如何显示 cookie？

我想在 codeigniter 中查看 cookie。

我看到的会议：

```
print_r($this->session->all_userdata()); 
```

但是饼干？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T13:14:34.233

使用`$this->input->cookie()`.

有关更多选项，请使用 cookie 助手：[http ://codeigniter.com/user_guide/helpers/cookie_helper.html](http://codeigniter.com/user_guide/helpers/cookie_helper.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T16:52:18.900

我看了看`system/core/Input.php`：

```
function _fetch_from_array(&$array, $index = '', $xss_clean = FALSE)
{
    if ( ! isset($array[$index]))
    {
        return FALSE;
    }

    if ($xss_clean === TRUE)
    {
        return $this->security->xss_clean($array[$index]);
    }

    return $array[$index];
}

function cookie($index = '', $xss_clean = FALSE)
{
    return $this->_fetch_from_array($_COOKIE, $index, $xss_clean);
} 
```

据我所知，您无法显示所有带有`$this->input->cookie()`. 一次只有一个。

如果您真的想查看所有 cookie，请尝试`var_dump($_COOKIE)`.

或者，如果您只需要显示一个 cookie，请指定`your_key`：`$this->input->cookie('your_key')`

希望这会有所帮助=)

# java - 如何使用 Genia Corpus 训练 Stanford Parser？

> ID：10850997
> 
> 赞同：93
> 
> 时间：2012-06-01T13:13:50.770
> 
> 标签：java, nlp, stanford-nlp

我在为斯坦福解析器创建新模型时遇到了一些问题。

我还从斯坦福下载了最新版本：http: [//nlp.stanford.edu/software/lex-parser.shtml](http://nlp.stanford.edu/software/lex-parser.shtml)

在这里，Genia Corpus 有 2 种格式，xml 和 ptb（Penn Treebank）。

Standford Parser 可以使用 ptd 文件进行训练；然后我下载了 Genia Corpus，因为我想处理生物医学文本：

~~[http://categorizer.tmit.bme.hu/~illes/genia_ptb/](http://categorizer.tmit.bme.hu/~illes/genia_ptb/)~~ ^(（链接不再可用）) （genia_ptb.tar.gz）

然后，我有一个简短的 Main 类来获取一个生物医学句子的依赖表示：

```
 String treebankPath = "/stanford-parser-2012-05-22/genia_ptb/GENIA_treebank_v1/ptb";

    Treebank tr = op.tlpParams.diskTreebank();
    tr.loadPath(treebankPath);  
    LexicalizedParser lpc=LexicalizedParser.trainFromTreebank(tr,op); 
```

我尝试了不同的方法，但总是得到相同的结果。

我在最后一行有错误。这是我的输出：

```
Currently Fri Jun 01 15:02:57 CEST 2012
Options parameters:
useUnknownWordSignatures 2
smoothInUnknownsThreshold 100
smartMutation false
useUnicodeType false
unknownSuffixSize 1
unknownPrefixSize 1
flexiTag true
useSignatureForKnownSmoothing false
parserParams edu.stanford.nlp.parser.lexparser.EnglishTreebankParserParams
forceCNF false
doPCFG true
doDep false
freeDependencies false
directional true
genStop true
distance true
coarseDistance false
dcTags false
nPrune false
Train parameters: smooth=false PA=true GPA=false selSplit=true (400.0; deleting [VP^SQ, VP^VP, VP^SINV, VP^NP]) mUnary=1 mUnaryTags=false sPPT=false tagPA=true tagSelSplit=false (0.0) rightRec=true leftRec=false collinsPunc=false markov=true mOrd=2 hSelSplit=true (10) compactGrammar=3 postPA=false postGPA=false selPSplit=false (0.0) tagSelPSplit=false (0.0) postSplitWithBase=false fractionBeforeUnseenCounting=0.5 openClassTypesThreshold=50 preTransformer=null taggedFiles=null
Using EnglishTreebankParserParams splitIN=4 sPercent=true sNNP=0 sQuotes=false sSFP=false rbGPA=false j#=false jJJ=false jNounTags=false sPPJJ=false sTRJJ=false sJJCOMP=false sMoreLess=false unaryDT=true unaryRB=true unaryPRP=false reflPRP=false unaryIN=false sCC=1 sNT=false sRB=false sAux=2 vpSubCat=false mDTV=2 sVP=3 sVPNPAgr=false sSTag=0 mVP=false sNP%=0 sNPPRP=false dominatesV=1 dominatesI=false dominatesC=false mCC=0 sSGapped=4 numNP=false sPoss=1 baseNP=1 sNPNNP=0 sTMP=1 sNPADV=1 cTags=true rightPhrasal=false gpaRootVP=false splitSbar=0 mPPTOiIN=0
Binarizing trees...done. Time elapsed: 141 ms
Extracting PCFG...done. Time elapsed: 56 ms
Compiling grammar...done Time elapsed: 1 ms
Extracting Lexicon...Exception in thread "main" edu.stanford.nlp.util.ReflectionLoading$ReflectionLoadingException: edu.stanford.nlp.util.MetaClass$ClassCreationException: java.lang.ClassNotFoundException: edu.stanford.nlp.parser.lexparser.EnglishUnknownWordModelTrainer
    at edu.stanford.nlp.util.ReflectionLoading.loadByReflection(ReflectionLoading.java:39)
    at edu.stanford.nlp.parser.lexparser.BaseLexicon.initializeTraining(BaseLexicon.java:335)
    at edu.stanford.nlp.parser.lexparser.LexicalizedParser.getParserFromTreebank(LexicalizedParser.java:800)
    at edu.stanford.nlp.parser.lexparser.LexicalizedParser.trainFromTreebank(LexicalizedParser.java:226)
    at edu.stanford.nlp.parser.lexparser.LexicalizedParser.trainFromTreebank(LexicalizedParser.java:237)
    at ABravoDemo.main(ABravoDemo.java:35)
Caused by: edu.stanford.nlp.util.MetaClass$ClassCreationException: java.lang.ClassNotFoundException: edu.stanford.nlp.parser.lexparser.EnglishUnknownWordModelTrainer
    at edu.stanford.nlp.util.MetaClass.createFactory(MetaClass.java:353)
    at edu.stanford.nlp.util.MetaClass.createInstance(MetaClass.java:370)
    at edu.stanford.nlp.util.ReflectionLoading.loadByReflection(ReflectionLoading.java:37)
    ... 5 more
Caused by: java.lang.ClassNotFoundException: edu.stanford.nlp.parser.lexparser.EnglishUnknownWordModelTrainer
    at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:303)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:316)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:169)
    at edu.stanford.nlp.util.MetaClass$ClassFactory.construct(MetaClass.java:119)
    at edu.stanford.nlp.util.MetaClass$ClassFactory.<init>(MetaClass.java:192)
    at edu.stanford.nlp.util.MetaClass$ClassFactory.<init>(MetaClass.java:53)
    at edu.stanford.nlp.util.MetaClass.createFactory(MetaClass.java:349)
    ... 7 more 
```

我怎样才能用这个语料库创建一个新模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-22T07:16:34.470

正如 andrucz 在他的评论中所说，你的问题的真正原因似乎源于一个缺失的课程。

尝试检查您是否正确导入了库（并确保它包含`EnglishUnknownWordModelTra‌​iner`.`edu.stanford.nlp.parser.lexparser`

（如果您使用的是 Maven，请验证您是否正确添加了依赖项 - 一个快速的谷歌 brugt 这个：[Stanford Parser Maven Repo](https://mvnrepository.com/artifact/edu.stanford.nlp/stanford-parser/3.6.0)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-14T02:57:26.893

NLP 库是否安装正确？检查日志以验证没有错误。大多数时候，当 s​​tanford nltk 库没有正确安装时，就会出现这个问题。

一个快速的检查方法是运行 GUI 来尝试解析器，如果它运行成功，那么库安装正确，否则如果抛出错误，那么你知道你的安装很差。

斯坦福网站也提到了这一点：

如果您不熟悉解析，可以从运行 GUI 开始尝试解析器。包含用于 linux (lexparser-gui.sh) 和 Windows (lexparser-gui.bat) 的脚本。查看 Javadoc lexparser 包文档和 LexicalizedParser 类文档。（将您的 Web 浏览器指向包含的 javadoc 目录中的 index.html 文件并导航到这些项目。）查看解析器常见问题解答以获取常见问题的答案。如果这些都没有帮助，请参阅我们的电子邮件指南，了解如何联系我们以获取进一步帮助的说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-17T06:29:50.643

检查您是否正确导入了库并确保它包含类 {EnglishUnknownWordModelTra‌​iner} 并确保您下载的版本与 Genia Corps 正确兼容。

# java - 为服务器和客户端使用不同的 WAR 并将它们部署在不同的应用程序服务器中的优点和缺点

> ID：10850998
> 
> 赞同：1
> 
> 时间：2012-06-01T13:13:52.407
> 
> 标签：java, web-applications, architecture, jboss

我们有一个产品，其中 UI 打包为单独的 WAR，服务器打包为单独的 WAR 文件。现在这两个 WAR 都部署在同一个应用程序容器中。以下是我发现的这种方法的优缺点：

不同战争的优点： 1\. 我觉得有两个不同的战争让我可以灵活地重构 UI 或服务器端代码，而不会影响另一个。2\. 为了最大限度地利用内存，我可以将它部署在两个不同的容器中。因此，如果早些时候我为整个 jboss 使用 2 GB（比如我正在使用 jboss），现在如果部署在两个不同的 jboss 应用程序服务器（当然不同的端口号）中，我可能会使用 4 GB。3\. 我可以扩展我的应用程序。如果明天，我看到该服务器是我的瓶颈，那么我可以创建一个服务器场，（仅适用于我的服务器模块），因为服务器本身是一个不同的 WAR，而无需担心 UI WAR。4\. 松耦合并给我各种集成点

缺点： 1\. 对于 UI，我使用 primefaces。我没有看到一个用例，我可以看到像缝附加值这样的集成框架。有人能告诉我，如果有一个集成框架对我的 UI 战争有意义吗？基本上，seam 的全部乐趣在于它提供的与 UI、EJB 等的完美集成。因此，我在这里看不到太多价值，因为我的表单会要求其余 API 完成所有处理。

有人可以告诉我是否有多个战争实际上有助于可扩展性和维护。例如，我看到的一个好处是，如果我有两场战争并且我需要升级服务器平台，我不需要关闭我的 UI。除了我上面列出的还有其他好处吗？

另外，我想了解如果所有内容都打包为 EAR，您将如何扩展我们架构的特定层。如上所述，如果我觉得服务器层是瓶颈，在一个 WAR/EAR 的情况下，我将如何扩展我的应用程序？

我仍然不确定我是否需要在不同的应用程序服务器中继续使用我的不同 WAR 模型，还是应该为我的整个应用程序只使用一个 WAR？请指导...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:38:04.970

如果您的后端是独立的，并且您使用一些 REST 或 SOAP Web 服务与客户端通信 - 这很好。试着想象明天你用 java 放弃你的客户端并用 .NET 创建另一个客户端。后端是否需要一些更改？如果没有 - 这很好。如果是的话-我认为发生两场战争不会顺风顺水。