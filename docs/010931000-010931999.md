# StackOverflow 问答 10931000-10931999

# apache - 通过子域将 Apache 代理到 Tomcat，使用 mod_jk，隐藏 url 中的路径

> ID：10931014
> 
> 赞同：0
> 
> 时间：2012-06-07T11:34:13.093
> 
> 标签：apache, tomcat, url-rewriting, subdomain, mod-jk

我有一个 Apache 和一个 Tomcat 在我的 Debian 服务器上运行，Apache 使用 mod_jk 代理对 Tomcat 的请求并返回。我在 Tomcat 中安装了 Jenkins。设置工作正常，代理也工作。

现在我的重写规则有问题（我认为）。

我*所拥有*的是： `ci.<mydomain>.com/jenkins`

我*想要*的是： `ci.<mydomain>.com`

我对 Apache 中的重写规则没有足够的经验，文档/谷歌也没有帮助我（可能我没有使用正确的关键词）。所以任何帮助表示赞赏。

这是我的设置：
Apache 版本：Apache/2.2.16 (Debian)
Tomcat 版本：Apache Tomcat/7.0.27

我的`worker.properties`文件如下所示：

```
# Define 1 real worker using ajp13
worker.list=worker1
# Set properties for worker1 (ajp13)
worker.worker1.type=ajp13
worker.worker1.host=localhost
worker.worker1.port=8009 
```

我的子域/虚拟主机的定义：

```
<VirtualHost *>
  ServerName ci.<mydomain>.com
  ServerAlias www.ci.<mydomain>.de

  ErrorLog /var/log/apache2/ci_error.log
  LogLevel warn 
  CustomLog /var/log/apache2/ci_access.log combined

  JKMount /jenkins/* worker1
  JKMount /jenkins worker1

  RewriteEngine on
  RewriteRule ^/$ /jenkins/ [R=permanent]
  RewriteRule ^/jenkins/(.*)$ ajp://localhost:8009/jenkins/$1 [P]
</VirtualHost> 
```

Jenkins 只是我希望 Tomcat 提供的一个应用程序。大多数其他应用程序也将拥有自己的虚拟主机。据我了解 mod_jk 的东西，这个工人应该足够我所有的其他应用程序，但也许我错了。

由于我已经可以通过子域访问 Jenkins，我认为这（如前所述）只是正确的重写规则的问题。

任何帮助表示赞赏，我很感谢任何建议或提示:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T15:01:41.830

不确定这是否仍然是一个问题，但它应该很容易解决。我做了一些非常相似的事情，这是你应该需要的：

```
<VirtualHost *>
  ServerName ci.<mydomain>.com
  ServerAlias www.ci.<mydomain>.de

  ErrorLog /var/log/apache2/ci_error.log
  LogLevel warn 
  CustomLog /var/log/apache2/ci_access.log combined

  JKMount /jenkins/* worker1
  JKMount /jenkins worker1

  RewriteEngine On
  RewriteRule  ^/(.*)$   /jenkins/$1 [PT]
</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:51:04.180

我不相信您可以使用 mod_rewrite/RewriteRule 代理到 Tomcat。表单的 URL`ajp://`与 mod_proxy_ajp 通常使用`ProxyPass`指令一起使用。

我想你想要的是这样的：

```
RewriteEngine on
RewriteRule ^/$ /jenkins/ [R=permanent]

JKMount /jenkins/* worker1
JKMount /jenkins   worker1 
```

由于您只是匹配`/`而不是更有趣的东西，您可能可以完全摆脱 mod_rewrite 而是使用 mod_alias 的`Redirect`指令：

```
Redirect 301 / http://yourhost/jenkins/ 
```

或者：

```
RedirectPermanent / http://yourhost/jenkins/ 
```

请注意，在所有这些情况下，客户端最终都会`/jenkins/`在其 URL 中看到。如果您想完全消除 . `/jenkins`，我相信您将不得不使用 mod_proxy 并经历一系列令人头疼的事情来重新编写您网页中的所有 URL，因为它们将被发送回客户端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-04T19:13:28.740

我能够在没有`mod_jk`. 诀窍是配置 Tomcat 以侦听每个 Web 应用程序的不同端口并相应地调整代理。

在`server.xml`文件中，我在节点下添加了额外`<Service>`的子`<Server>`节点，如下所示：

```
<Service name="Catalina">
  <Connector port="8081" protocol="HTTP/1.1"
           connectionTimeout="20000" proxyPort="80" />
  <Engine name="Catalina" defaultHost="localhost">
    <Realm className="org.apache.catalina.realm.LockOutRealm">
      <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
           resourceName="UserDatabase"/>
    </Realm>
    <Host name="localhost" appBase="webapp-ci">
      <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"
           prefix="ci_access_log" suffix=".txt"
           pattern="%h %l %u %t &quot;%r&quot; %s %b" />
    </Host>
  </Engine>
</Service> 
```

这里的重要部分是这条线......

```
 <Connector port="8081" protocol="HTTP/1.1"
           connectionTimeout="20000" proxyPort="80" /> 
```

...因为这是将新端口分配给此服务的位置

然后我将 apache 配置文件更改为代理到该新端口：

```
<VirtualHost *>
  ServerName ci.<mydomain>.com
  ServerAlias www.ci.<mydomain>.de

  ErrorLog /var/log/apache2/ci_error.log
  LogLevel warn 
  CustomLog /var/log/apache2/ci_access.log combined

    ProxyPreserveHost On
    ProxyPass / http://localhost:8081/ nocanon
    ProxyPassReverse / http://localhost:8081/
    ProxyRequests Off
    AllowEncodedSlashes NoDecode
    <Proxy http://localhost:8081/*>
            Order deny,allow
            Allow from all
    </Proxy>
</VirtualHost> 
```

最后，我`webapp-ci`在我的 Tomcat 主目录中创建了一个文件夹并将`jenkins.war`文件移动到`webapp-ci/ROOT.war`

# ruby - Ruby：Windows路径转换

> ID：10931022
> 
> 赞同：2
> 
> 时间：2012-06-07T11:35:06.793
> 
> 标签：ruby, regex, windows

我经常在我的脚本中使用长路径，因为我在 Windows 上，所以我必须将这些长路径转换为带有斜杠而不是反斜杠的 nix 样式。如果此后您复制该路径以转到该文件夹​​，没有什么困难但很烦人，因为在资源管理器中您必须再次执行相反的操作。

所以我做了一个函数来进行转换，现在我可以使用可以复制的 windowspaths 并让 Ruby 满意。

问题：这里有更优雅的解决方案吗？我不喜欢第二个 gsub 在开头处理双 \ 并且也想在结尾处理 \ （目前不可能）。该函数应该能够处理网络 unc 的 (\..) 和本地驱动器路径 (c:..)

```
class String 
  def path
    self.gsub('\\','/').gsub(/^\//,'//')
  end
end

path = '\\server\share\folder'.path

Dir.glob(path+'**/*') do |file|
  puts file
end

#=>
#//server/share/folder/file1.txt
#//server/share/folder/file2.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:33:12.260

使用 File.join 的建议让我尝试了常规的拆分和连接，现在我有了这个版本，摆脱了丑陋的双 gsub，现在它更长了，但可以处理结尾斜线。有人有更好的版本吗？

```
class String
  def to_path(end_slash=false)
    "#{'/' if self[0]=='\\'}#{self.split('\\').join('/')}#{'/' if end_slash}" 
  end 
end

puts '\\server\share\folder'.to_path(true) #//server/share/folder/
puts 'c:\folder'.to_path      #c:/folder 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-07T11:54:26.200

编写路径的可移植方式是使用 Ruby 的[File#join](http://www.ruby-doc.org/core-1.9.3/File.html#method-c-join)方法。这将使用正确的路径分隔符创建独立于操作系统的路径。

对于 UNC 路径，这个[先前的答案](https://stackoverflow.com/questions/4862192/convert-windows-path-to-unc-in-ruby)解决了自定义 File#to_unc 方法的创建：

```
def File.to_unc( path, server="localhost", share=nil )
  parts = path.split(File::SEPARATOR)
  parts.shift while parts.first.empty?
  if share
    parts.unshift share
  else
    # Assumes the drive will always be a single letter up front
    parts[0] = "#{parts[0][0,1]}$" 
  end
  parts.unshift server
  "\\\\#{parts.join('\\')}"
end 
```

我自己没有尝试过，但这似乎是您正在寻找的结果。

# jquery - 如何使用 struts2-jquery sj:a 在 beforeSubmit 事件中添加确认对话框

> ID：10931025
> 
> 赞同：1
> 
> 时间：2012-06-07T11:35:11.480
> 
> 标签：jquery, jquery-plugins

我`struts2-jquery plugin`在我的应用程序中使用，我正在使用它的`sj:a`组件来提交表单。一切正常，直到出现我必须在提交表单之前显示确认对话框的要求。我`jquery.alert plugin`用于显示确认对话框。问题是在此`jconfirm`对话框中没有阻塞，`jconfirm`显示消息但事件继续执行。关于如何在`beforesubmit`用户单击确认对话框之前停止执行事件的任何想法？

我正在使用以下代码

```
 var result = false;
    if(flag == 'true') {
        jConfirm("Message", "Note", function(choice) {
            if(choice) {
                submitFlag = true;
                $.publish('beforeSaveMilestoneSubmit');
            } 
        });

    } else {
        submitFlag = true;
        $.publish('beforeSaveMilestoneSubmit');
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T21:08:25.343

我在这里找到了解决这个问题的方法。这个解决方案有点老套，但对我来说效果很好。解决方案是：

```
<sj:a formIds="form1"  
      id="delete_link"
      targets="itemlist" 
      onBeforeTopics="before" 
      href="yourhref">Delete Item</sj:a>

<!--Duplicate the anchor, but hide it and set listenTopcs-->  

<sj:a formIds="form1"  
     id="delete_link_hidden"
     targets="itemlist" 
     listenTopics="confirmed" 
     href="yourhref" 
     style="display:none;">Delete Item</sj:a> 
```

Java脚本在这里：

```
$.subscribe('before',function(event,data){  
event.originalEvent.options.submit=false;  
if(jConfirm("Message", "Note", function(choice))  
    $.publish('confirmed');  
}); 
```

# php - Doctrine DQL 搜索查询

> ID：10931032
> 
> 赞同：1
> 
> 时间：2012-06-07T11:35:51.913
> 
> 标签：php, sql, zend-framework, doctrine, dql

我有这个数据库结构：

```
- Announcement table
- Equipement table 
```

两个表之间存在多对多关系，当我执行学说查询以搜索具有特定设备的一些公告时，我得到 0 条记录

这是我的 DQL：

```
SELECT a FROM Entity\Announcement a JOIN LEFT JOIN a.comfortEquipements aces
and aces.identifier = 1" 
```

1：是所需设备的标识符，在这个阶段一切正常，但是当我添加一些其他标准时，它返回 0 条记录

例子：

```
SELECT a FROM Entity\Announcement a JOIN LEFT JOIN a.comfortEquipements aces
and aces.identifier = 1 and aces.identifier = 2" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T17:13:09.783

你有没有试过这个：

```
SELECT a FROM Entity\Announcement a JOIN LEFT a.comfortEquipements aces WHERE aces.identifier IN(1, 2) 
```

编辑：不可能只选择具有所有设备的 dql 公告。

# git - 现在合并一些文件，稍后合并一些文件

> ID：10931034
> 
> 赞同：2
> 
> 时间：2012-06-07T11:35:54.647
> 
> 标签：git, merge, tortoisegit

我在分支 B。经过一堆提交后，分支 A 准备好/需要一些文件，但很多文件还没有准备好/不需要。我只想合并这些文件，保留正确的 git 历史记录。后来，当我真正合并时，我不希望对这些更改的起源有任何误导性的线索——它们应该正确引用它们来自的提交，即使作为这些提交的一部分的其他文件中的更改没有被合并（但）。我想这意味着将提交分为与这些文件无关的部分。

当我后来想将 B 合并到 A 但 B 的一些更改已经存在时，所有为此提出的解决方案最终都会丢失这些更改的历史并导致一个大问题。我想要一个避免这种情况的解决方案。

在 tortoise 中，我可以查看单个文件的日志并选择一些较旧的版本来恢复。因此，原则上，我可以从 B 创建一个新分支 C，并将我不想合并的所有文件*恢复*到 B 从 A 分支时的点。然后我可以将 C 合并到 A。这似乎是正确的跟踪 git 历史并让我将 B 合并到 A 中，而不会惊讶于 B 的一些更改已经存在。

但是当我只想合并2个文件时，手动识别和还原20个文件很痛苦。为什么这不是一个常见的一步操作？tortoise 的 revert 是如何工作的——因为它可以对单个文件进行操作，所以它必须是 sub-commit，这是我正在寻找的基本功能。它是否抛弃了我从较新的修订版到较旧的修订版的事实，并使它看起来像我只是进行了一些手动更改，然后与最终将 B 合并回 A 相冲突？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:48:04.433

您正在寻找[`cherry pick`](http://linux.die.net/man/1/git-cherry-pick)一种仅从要合并的分支中选择某些提交的方法。

要仅合并某些文件（当您不想合并整个提交时），您确实有多种解决方案，我喜欢使用[本文](http://jasonrudolph.com/blog/2009/02/25/git-tip-how-to-merge-specific-files-from-another-branch/)中很好表达的一个，无论如何这都是一个痛苦，有点更简单我发现到那种事情。

您还可以拆分一些提交并仅合并包含正确文件的提交，您可以像[其他文章所说的那样做](http://plasmasturm.org/log/530/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:12:13.307

这不是一个常见的一步操作，因为[Git 是一个内容跟踪器，而不是一个文件跟踪器](http://www.gelato.unsw.edu.au/archives/git/0701/37882.html)。

您可以轻松地将更改应用于从分支 B 到分支 A 的特定文件，就像 Tortoise 一样：

```
# raw file, no history
git checkout A
git checkout B myfile 
```

或者

```
# copy a set of history from someplace else
git checkout A
git cherry-pick commit-hash-1..commit-hash-2 
```

但是这些都不会将历史记录保留为来自分支 B 的合并。如果这是您要尝试做的，取决于分支 B 中的提交的组织方式，这可能对您更好：[Git：主要版本的分段合并方法变化？](https://stackoverflow.com/questions/8659544/git-piecewise-merge-approach-for-major-version-changes)

# jquery - 带有 jQ uery 的内容滑块的两个选项卡系统

> ID：10931035
> 
> 赞同：0
> 
> 时间：2012-06-07T11:36:03.170
> 
> 标签：jquery, jquery-ui, jquery-plugins, slider, uislider

我正在使用这个脚本： [http](http://webdeveloperplus.com/jquery/featured-content-slider-using-jquery-ui/) ://webdeveloperplus.com/jquery/featured-content-slider-using-jquery-ui/ 你可以在这里看到演示：http: [//demo.webdeveloperplus.com/featured-content -滑块/](http://demo.webdeveloperplus.com/featured-content-slider/)

现在，我有这样的东西：http: [//img265.imageshack.us/img265/5363/slide1w.png](http://img265.imageshack.us/img265/5363/slide1w.png) （这是右侧的菜单选项卡和左侧的内容）

我想有 2 种方式来访问内容。使用正确的选项卡菜单，或者使用我创建的顶部菜单（是的，客户就是这样......）所以现在我有这样的东西： ![在此处输入图像描述](../Images/fe71f99485f5279009e32c7f82719e2b.png)

顶部有一个彩色菜单，我想让它作为右侧的选项卡菜单工作。我已经使用相同的 HREF 参数进行了尝试：

```
<a href="#fragment-1"> 
```

但它不起作用。

# css - css按钮活动状态导致文本移动？

> ID：10931038
> 
> 赞同：10
> 
> 时间：2012-06-07T11:36:12.827
> 
> 标签：css, html, firefox, cross-browser

我只是在为我正在开发的一个新网站做一些粗略的例子。

由于某种原因，firefox(latest) 中的后两个按钮会稍微移动文本，就像在它们进入活动状态时实现点击动画一样。为什么第一个按钮也不会遇到这个问题？

下面的代码

```
<fieldset style="width:320px; float:left;">
        <legend>Pink Button</legend>
            <button class="pinkbutton"><span>MESSAGE HERE</span></button>
            <button class="pinkbuttondisabled" disabled="disabled"><span>DISABLED</span></button>

    </fieldset>

    <fieldset style="width:320px; float:left;">
        <legend>Grey Button</legend>
            <button class="greybutton"><span>MESSAGE HERE</span></button>
            <button class="greybuttondisabled" disabled="disabled"><span>DISABLED</span></button>

    </fieldset>

    <fieldset style="width:320px; float:left;">
        <legend>White Button</legend>
            <button class="whitebutton"><span>MESSAGE HERE</span></button>
            <button class="whitebuttondisabled" disabled="disabled"><span>DISABLED</span></button>

    </fieldset> 
```

下面的CSS

```
.pinkbutton { border:1px solid #D2247b; width:150px; height:30px; background-color:#EF0093; color:#FFF;}
.pinkbutton:hover {border:1px solid #FF4296; background-color:#FF5EAC;}
.pinkbutton:active {border:1px solid #A61D61; background-color:#DC2F85; color:#333232;}
.pinkbuttondisabled {border:1px solid #F3C4DB; width:150px; height:30px; background-color:#FDC6E2; color:#FFF;}

.greybutton { border:1px solid #BBBBBB; width:150px; height:30px; background-color:#E2E2E2; color:#8d8c8c;}
.greybutton:hover {border:1px solid #EF0093; background-color:#E2E2E2; color:#f62c92;}
.greybutton:active {border:1px solid #696969; background-color:#BFBFBF; color:#424242;}
.greybuttondisabled {border:1px solid #D5D4D4; width:150px; height:30px; background-color:#F4F4F4; color:#d5d4d4;}

.whitebutton { border:1px solid #EF0093; width:150px; height:30px; background-color:#FFF; color:#EF0093;}
.whitebutton:hover {border:1px solid #898989; background-color:#FFF; color:#898989;}
.whitebutton:active {border:1px solid #898989; background-color:#E2E2E2; color:#979696;}
.whitebuttondisabled {border:1px solid #FAB2DE; width:150px; height:30px; background-color:#FFF; color:#FAB2DE;} 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-07T11:48:54.840

似乎在 :active 状态上有一些填充。我添加了“填充：0；” 到最初的 css 声明（以便无论状态如何都可以继承），它解决了这个问题。

请看这个[jsfiddle](http://jsfiddle.net/pxx4V/)。

我不知道为什么它只发生在最后两个按钮上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:09:47.983

James Healey 解决方案效果很好。[http://jsfiddle.net/pxx4V/](http://jsfiddle.net/pxx4V/) 我只是想澄清三个按钮有同样的问题，只是一种“视觉效果”让它们看起来没有。这是一个解决问题的小提琴，我只是将 .pinkbutton:active 的文本颜色更改为 #FFF [http://jsfiddle.net/6L6yu/](http://jsfiddle.net/6L6yu/)

# trigger.io - 模态视图 - 内部页面未加载

> ID：10931040
> 
> 赞同：1
> 
> 时间：2012-06-07T11:36:14.083
> 
> 标签：trigger.io

我已经阅读了[文档](http://docs.trigger.io/en/v1.3/features/modal.html)，希望我只是错过了 forge (forge://) 的正确“file://”url 语法（或相对路径）。

我的 src 目录包含一个名为 noconnection.html的**本地文件。**我的 js 目录包含一个带有以下代码的 javascript 文件：

```
if (forge.is.connection.connected()) {
   // do cool stuff
} else {
   forge.tabs.open("noconnection.html");
} 
```

命令行：

```
(forge-environment) forge run android 
```

模态“弹出”就好了（并且有一个小的关闭按钮）。但是，该页面有一个很大的“网页不可用”错误 - 网页 noconnection.html 可能暂时关闭或它可能已移动。

我已经尝试了这些但没有成功正确显示我简单的“无连接”模式：

```
forge.tabs.open("/noconnection.html");

forge.tabs.open("../noconnection.html");

forge.tabs.open("file:///noconnection.html");

forge.tabs.open("forge:///noconnection.html"); 
```

有人知道我做错了什么吗？相对路径？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:46:36.823

要获取本地页面的路径，您需要使用 forge.tools.getURL 方法，如下所示：

```
if (forge.is.connection.connected()) {
   // do cool stuff
} else {
   forge.tools.getURL('noconnection.html', function(path) {
       forge.tabs.open(path);
   });
} 
```

# java - 如何将图像添加到 JTable 单元格？

> ID：10931041
> 
> 赞同：0
> 
> 时间：2012-06-07T11:36:18.677
> 
> 标签：java, image, swing, jtable, imageicon

我有一个在 Netbeans 的设计模式下创建的 JTable。在我的代码中，我选择在启动时放置以下代码行：

```
model = new TableModel();
tbShares.setAutoCreateColumnsFromModel(false);
tbShares.setModel(model); 
```

`tbShares`是我的 JTable 对象。

包含我的 JTable 的 JFrame 如下所示：

![分享经理](../Images/3522182dfeefb03ae4b8494faf6a3217.png)

第一列被设置为一个`Object`类型（另外两个是字符串），所以它可以显示一个图像。我输入了这段代码来加载图像，但它不起作用（`list.add`部分内容是让您了解我的代码的结构）。这是`AbstractTableModel`.

```
public void addRegister(String status, String name, String clients){
        ImageIcon activeStatus = new ImageIcon(CleanSheets.class.getResource("res/img/active.png"));
        ImageIcon inactiveStatus = new ImageIcon(CleanSheets.class.getResource("res/img/inactive.png"));
        list.add(new Register((status.equals("true") ? activeStatus : inactiveStatus), name, clients));
        this.fireTableDataChanged();
    }

    class Register{
        Object status;
        String name;
        String clients;

        public Register(Object status, String name, String clients) {
            this.status = status;
            this.name = name;
            this.clients = clients;
        }
    } 
```

据说，它从我指定的文件夹中获取图像，但它只是在该列中输出文本而不是实际图像。如何让它显示正确的图像？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T11:43:33.337

您应该重新实现`TableCellRenderer`尝试阅读[这篇](http://mdsaputra.wordpress.com/2011/06/13/swing-hack-show-image-in-jtable/)短文

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:59:12.143

> ImageIcon activeStatus = new ImageIcon(CleanSheets.class.getResource("res/img/active.png")); ImageIcon inactiveStatus = new ImageIcon(CleanSheets.class.getResource("res/img/inactive.png"));

*   准备`Icon/ImageIcon`作为局部变量，因为在每一个上`Renderer`重新创建这些，在疯狂时期有一堆事件`Objects``Mouse or Key events`

> this.fireTableDataChanged();

*   是添加/删除整个内容的正确通知者`JTable`，对于 TableCell 有`fireTableCellXxx()`

*   在这种情况下是（只添加一行`TableModel`）关于`fireTableRowsInserted()`

> 如何让它显示正确的图像？

*   如我所见，您添加一个新行，然后直接添加`Icon / ImageIcon`，`TableModel`无需更多转换，声明需要，没问题，JTable已`Icon / ImageIcon`在API中实现

*   `Icon / ImageIcon`如果没有更改表单，请不要使用渲染器`Mouse or Key events`

# c# - 在 asp.net mvc 3 中将 js/css 文件包含在控制或扩展方法中的 html 帮助器类中

> ID：10931042
> 
> 赞同：2
> 
> 时间：2012-06-07T11:36:23.667
> 
> 标签：c#, asp.net-mvc-3

我正在开发一个网格控件，我想在其中使用一些 javascipt。我在类库项目中添加了一个 js 文件，并将其 Buid Action 设置为“Embedded Resource”。但是 js/jquery 函数（在 js 文件中实现）无法访问，我也无法在我使用该 dll 的其他项目中查看包含的 js 文件，一切正常，期待这个。

请提供一些帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T13:52:47.000

在你的`Controller`. 使用反射，您可以读取 resourceName 并将其返回为`FileStreamResult`. 在视图中添加脚本路径为`/Controller/Action/actualjsfile.js`

[另请参阅此博客文章](http://toreaurstad.blogspot.com.au/2011/09/simple-access-of-embedded-resources-in.html)

**测试样品的步骤如下**

创建类库项目（JSDLL）

添加`TestJS.js`为嵌入资源（文件内容如下图）

```
function MyAlert() {
    alert("Hello! this is from the dll");
} 
```

在 AssemblyInfo.cs 添加以下内容（需要添加对 System.Web.dll 的引用）

```
[assembly: System.Web.UI.WebResource("JSDLL.TestJS.js", "application/x-javascript")] 
```

编译类库项目并添加作为对 MVC 项目的引用

在您的控制器中添加以下操作（与博客文章相同；但稍作修改）

```
 public FileStreamResult ContentFile(string id)
    {
        string resourceName = Assembly.GetAssembly(typeof(JSDLL.Class1)).GetManifestResourceNames().ToList().FirstOrDefault(f => f.EndsWith(id));
        return new FileStreamResult(Assembly.GetAssembly(typeof(JSDLL.Class1)).GetManifestResourceStream(resourceName), "text/javascript");
    } 
```

简单的测试视图（看看`.js`文件是如何被引用的。`onClick`我从`.js`文件中调用函数）

```
@{
    ViewBag.Title = "About Us";
}

<h2>About</h2>
<p>
     Put content here.     
     <button type="button" onclick="MyAlert()">Text</button>
</p>

<script type="text/javascript" src="/Home/ContentFile/TestJS.js"/> 
```

输出

![在此处输入图像描述](../Images/c93b07364c3f7c1311a5c758b19e998f.png)

**已编辑（马修的评论）**

这里有几个屏幕截图

![在此处输入图像描述](../Images/19df3cfc33422d782f1b71ac9e763eb4.png)

![在此处输入图像描述](../Images/23609c1a35e54249fe749531863ae124.png)

![在此处输入图像描述](../Images/78633c54a4fb43118968ee9184538407.png)

![在此处输入图像描述](../Images/25b96a133e997f02c09c4cf7cda9815c.png)

![在此处输入图像描述](../Images/b4371b469c07f1eb85035b0c2fe0983e.png)

![在此处输入图像描述](../Images/54e2690fd9525712566a707f0bb838b1.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:38:03.803

“嵌入资源”使您的`js`文件成为 dll 的一部分，因此您无法在其他项目中查看它。

`js`文件假设可以从您的 javascript 代码访问，并且您不需要将其嵌入到 dll 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T11:52:09.120

如果您想在 DLL 中嵌入 CSS/JS，则需要以不同于仅使用文件名的方式引用它们。查看[http://www.karpach.com/Custom-ASP-NET-server-control-with-embedded-resources.htm](http://www.karpach.com/Custom-ASP-NET-server-control-with-embedded-resources.htm)了解有关它的信息（它适用于 ASP.NET 2.0，但它应该给你一些开始的想法和）。

另外，请查看此 [stackoverflow question]，了解您是否应该嵌入这些资源。

[1][我应该在 Web 应用程序中嵌入 CSS/JavaScript 文件吗？](https://stackoverflow.com/questions/1190358/should-i-embed-css-javascript-files-in-a-web-application)

# java - 不从服务器读取文本

> ID：10931043
> 
> 赞同：0
> 
> 时间：2012-06-07T11:36:26.327
> 
> 标签：java, android, android-layout, android-intent

我正在尝试从服务器读取所有文本，我认为我的代码没有从服务器检索文本，请你帮我解决这个问题，我是 android 开发的新手。提前致谢

```
public class TestActivity extends Activity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    TextView tv= (TextView)findViewById(R.id.my_text);

                try {

                    URL url = new URL("http://www.google.com:80/");
                    StringBuilder content = new StringBuilder();
                    // read text returned by server

                    BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
                    String line;
                    while ((line = in.readLine()) != null) {
                        content.append(line +"\n");
                    }
                    tv.setText(content.toString());
                    setContentView(tv);

                    in.close();
                }

                catch (MalformedURLException e) {

                    System.out.println("Malformed URL: " + e.getMessage());

                }

                catch (IOException e) {

                    System.out.println("I/O Error: " + e.getMessage());

                }

};        

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:44:04.400

走这些线

```
tv.setText(line);
setContentView(tv); 
```

退出while循环

在 while 循环中使用 StringBuilder 对象（在循环之前声明）并在其中附加字符串。在 while 循环之后，从 StringBuilder 获取字符串并执行 tv.setText(string)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:54:18.653

也许你可以这样尝试，只是一个想法：

```
StringBuilder content = new StringBuilder();
                // read text returned by server
                BufferedReader in = new BufferedReader(new InputStreamReader(new URL("http://www.google.com:80/").openConnection().getInputStream()));
                String line;
                while ((line = in.readLine()) != null) {
                    content.append(line +"\n");
                }

tv.setText(content.toString());
setContentView(tv); 
```

# python - python中的正则表达式字典

> ID：10931044
> 
> 赞同：3
> 
> 时间：2012-06-07T11:36:28.910
> 
> 标签：python, regex, performance, mapping

是否可以用键作为正则表达式和操作（带参数）作为值来实现字典？

例如

1.  `key = "actionname 1 2", value = "method(1, 2)"`
2.  `key = "differentaction par1 par2", value = "appropriate_method(par1, par2)"`

用户键入密钥，我需要使用作为用户输入的一部分提供的参数执行匹配方法。

如果我们能够及时实现查找，那就太好了`O(1)`，即使它至少不可能，我正在寻找解决这个问题的解决方案。

我将有几百个正则表达式（比如`300`）和匹配的参数化操作来执行。

**我可以编写一个循环来实现这一点，但是有没有什么优雅的方法可以在不使用 for 循环的情况下做到这一点？**

相关问题：[Hashtable/dictionary/map lookup with regular expressions](https://stackoverflow.com/questions/260056/hashtable-dictionary-map-lookup-with-regular-expressions)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T11:49:24.147

是的，完全有可能：

```
import re
dict = {}
dict[re.compile('actionname (\d+) (\d+)')] = method
dict[re.compile('differentaction (\w+) (\w+)')] = appropriate_method

def execute_method_for(str):
    #Match each regex on the string
    matches = (
        (regex.match(str), f) for regex, f in dict.iteritems()
    )

    #Filter out empty matches, and extract groups
    matches = (
        (match.groups(), f) for match, f in matches if match is not None
    )

    #Apply all the functions
    for args, f in matches:
        f(*args) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T11:42:52.817

当然，你的字典的值可以是 python 函数。

您的匹配函数可以尝试将您的字符串与每个键匹配，并在匹配时执行适当的函数。在最好的情况下，这将是线性的，但我认为如果你想使用正则表达式，你会得到更好的结果。

但是查看您的示例数据，我认为您应该重新考虑是否需要正则表达式。也许您可以将输入字符串解析为例如`<procedure-name> <parameter>+`，然后通过其名称（简单字符串）查找适当的过程，这可以是`O(1)`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T11:44:35.277

不幸的是，这是不可能的。您将需要遍历正则表达式以找出它们是否匹配。字典中的查找将是`O(1)`（但这并不能解决您的问题）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-06T21:13:06.293

恕我直言，您问的是错误的**问题**。

1.  你问是否有一种优雅的方式来做到这一点。答： ***最优雅的方式是最明显的方式。*** 代码被修改的频率将增加 10 到 20 倍。因此，如果你写了一些难以阅读和快速理解的“优雅”的东西，你只是破坏了你之后必须以某种方式修改它的人。

2.  更好的代码：

这里的另一个答案是这样的：

```
matches = ( (regex.match(str), f) for regex, f in dict.iteritems() ) 
```

这在功能上等效（重要的是，在 Python 生成的字节码方面相同）：

```
# IMHO 'regex' var should probably be named 'pattern' since it's type is <sre.SRE_Pattern>

for pattern, func in dictname.items():
    if pattern.match(str):
        func() 
```

但是，下面的示例**更容易一目了然地阅读和理解**。

I apologize (a little) if you're one of those people who is offended by code that is even slightly more wordy than you think it could be. My criteria, and Guido's as mentioned in PEP-8, is that the clearest code is the best code.

# facebook - /feed 连接与 /statuses 不一致？

> ID：10931045
> 
> 赞同：0
> 
> 时间：2012-06-07T11:36:31.890
> 
> 标签：facebook, facebook-graph-api, status, privacy

几天前我问了[一个关于获取人们状态更新的隐私信息的问题。](http://facebook.stackoverflow.com/questions/10894414/getting-the-privacy-setting-of-a-status-message)然后我被建议使用**/feed**连接而不是**/statuses**以便我可以访问该`privacy`属性。

重新开发我们的应用程序后，我注意到**/feed**似乎只返回 2011 年 1 月 20 日左右的状态更新。另一方面，自从用户注册 Facebook 后，就会返回评论、墙贴等。最初我认为由于某种原因这可能是我的个人资料中的一个怪癖，但我们应用程序的许多不同开发人员已经能够复制相同的结果。

有谁知道为什么会发生这种情况，或者知道一种检索**所有**用户状态及其相关隐私信息的方法？

**编辑：**我应该补充一点，我可以使用**/statuses**连接很好地检索所有状态，但这并不理想，因为我们**需要**访问该`privacy`属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:23:01.543

你读过官方的[How-To: Paging with the Graph API and FQL](http://developers.facebook.com/blog/post/478/)帖子吗？

它描述了诸如偏移量、自始至终等字段，以便您控制所请求数据的时间跨度。
例如，这里是从`Sat, 07 Jun 2008 12:16:39 GMT`直到`Mon, 07 Jun 2010 12:16:39 GMT`在[图形浏览器工具](http://developers.facebook.com/tools/explorer?method=GET&path=me/feed%3Fsince%3D1212840999%26until%3D1275912999)中登录用户的提要。

# android - 如何在 Android 应用程序中从 IMDB 获取演员的姓名和照片

> ID：10931047
> 
> 赞同：-1
> 
> 时间：2012-06-07T11:36:45.533
> 
> 标签：android, html-parsing, imdb

我需要从他在 IMDB 上的页面中获取演员的姓名和照片。我对这个过程一无所知，尤其是在 Android 上。我不是要求精确的代码（即使它会很棒），但至少是一些好的教程的链接。这是一个示例的链接：[Liam Neeson](http://www.imdb.com/name/nm0000553/) 鉴于我可以这样做，是否合法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:19:17.443

考虑[http://help.themoviedb.org/kb/api/search-people](http://help.themoviedb.org/kb/api/search-people)而不是报废。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:53:55.607

请参阅[IMDb 使用条款，](http://www.imdb.com/help/show_article?conditions)`License and Site Access`像Utopiah 建议的那样使用[The Movie Db ，因为 IMDb 禁止数据抓取。](http://help.themoviedb.org/kb/api/search-people)

# c# - 在 WPF 中显示多对多分组

> ID：10931050
> 
> 赞同：6
> 
> 时间：2012-06-07T11:37:02.593
> 
> 标签：c#, wpf, ef-code-first

我不确定我是否走在正确的轨道上，但基本上我正在尝试显示一个分组的项目列表，其中每个项目都可以是多个组的成员。即这两个实体在多对多的基础上相关。我会试着解释...

* * *

![在此处输入图像描述](../Images/69112d012e80b95e89e764799d0f69c9.png)

* * *

![在此处输入图像描述](../Images/b4afe30dde407d296525ffc4f9286b7a.png)

* * *

我的问题是，如何将这样的项目分组到控件中？我知道 ICollectionView 和 PropertyGroupDescription，但这似乎不符合我的目的（它似乎只适用于一对多场景）。

有任何想法吗？

需要注意的几点：

1.  当显示在列表中时，我想显示按 Kit 分组的所有组件。
2.  当我从这个列表中选择一个组件时，我只想要**该**组件的特定实例（即我想要组件+我从中选择它的工具包）。
3.  忽略我使用 TreeView 来显示以下项目的事实，因为我实际上将使用带有 GroupStyle 的 ListBox
4.  我正在使用代码优先 EF 4.3.1 和 WPF MVVM 模式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T11:53:15.017

在上下文对象上使用 Include() 方法来包含相关实体。

# silverlight - RIA 服务中的自定义域数据源/表视图问题

> ID：10931056
> 
> 赞同：0
> 
> 时间：2012-06-07T11:37:33.433
> 
> 标签：silverlight, wcf-ria-services

我正在使用的项目基于标准的“Silverlight 业务应用程序”。

我有许多可以正常显示的表，但我希望显示一个基于来自其他表的 SQL 连接的复合表。所以，在我的 Model.Designer.cs 我有一个小的虚拟类：

```
 public class JoinClass
    {
        [Key]
        public string LanguagesName { get; set; }
        public string VersionsName { get; set; }
        public string StringsName { get; set; }
        public string TranslatedStringsValue { get; set; }
    } 
```

然后，在我的 DomainService.cs 我创建我的查询：

```
 public IQueryable<JoinClass> GetJoinClass()
    {
        IQueryable<JoinClass> query = from o in this.ObjectContext.TranslatedStrings
                                                                    where o.LanguagesID == 10
                                                                    select new JoinClass { LanguagesName = o.Languages.LanguagesName, VersionsName = o.Strings.Versions.VersionsName, StringsName = o.Strings.StringsName, TranslatedStringsValue = o.TranslatedStringsValue };

        return query;
    } 
```

在 Silverlight 应用程序中，我通过 DomainDataSource 访问所有这些：

```
 <riaControls:DomainDataSource Name="joinClass" LoadSize="20" QueryName="GetJoinClass" AutoLoad="True">
            <riaControls:DomainDataSource.DomainContext>
                <ds:LanguageModelDomainContext />
            </riaControls:DomainDataSource.DomainContext>
            <riaControls:DomainDataSource.SortDescriptors>
                <riaControls:SortDescriptor PropertyPath="LanguagesName"></riaControls:SortDescriptor>
            </riaControls:DomainDataSource.SortDescriptors>
        </riaControls:DomainDataSource> 
```

并在 DataGrid 中显示结果：

```
<sdk:DataGrid IsReadOnly="True" Name="translatedStringsDataGrid" ItemsSource="{Binding Data, ElementName=joinClass}"> 
```

没什么火箭科学 - 问题是我只能在 DataGrid 中显示一条记录。查询 GetJoinClass() 似乎执行良好并返回近 600 条记录，但只有一条出现在 DataGrid 中。我使用的所有其他标准查询都没有这个问题。

任何指点都感激不尽！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:45:25.030

回答 -

`[Key]`。_ 类的所有属性都应该具有`[Key]`属性，而不仅仅是一个，例如

```
 public class JoinClass
    {
        [Key]
        public string LanguagesName { get; set; }
        [Key]
        public string VersionsName { get; set; }
        [Key]
        public string StringsName { get; set; }
        [Key]
        public string TranslatedStringsValue { get; set; }
    } 
```

我不知道为什么。

# jquery - jQuery Mobile Google Maps - 地图仅在重新加载后显示

> ID：10931057
> 
> 赞同：0
> 
> 时间：2012-06-07T11:37:42.187
> 
> 标签：jquery, maps

有人可以看看我的代码并告诉我我做错了什么吗？我现在花了很多时间尝试不同的事情，但没有成功。坦克给所有可以帮助我的人！

*   直接调用此页面有效
*   使用链接类型“外部”从上一页调用此页面有效
*   从一个jQueryMobile页面到这个页面正常调用这边，不起作用并显示地图为空，点击重新加载后，一切都很完美

编码：

```
<html> 
<head>
    <meta charset="UTF-8">  
          <meta name="viewport" content="minimum-scale=1.0, width=device-width, maximum-scale=1.0, user-scalable=no"  />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script> 
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true&libraries=places"></script> 
</head>
<body>
<div data-role="page" id="basic_map">
        <script type="text/javascript">
        $("div:jqmData(role='page'):last").bind('pageinit', function() {
            if(navigator.geolocation) {
                        navigator.geolocation.getCurrentPosition(function(position){
                            initialize(position.coords.latitude,position.coords.longitude);
                        });
                }
            });

            function initialize(lat,lng) {

            var latlng = new google.maps.LatLng(lat, lng);

            var myOptions = {

                zoom: 12,
                        center: latlng,
                        mapTypeId: google.maps.MapTypeId.ROADMAP
                };

            var map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);

 </script>

    <div data-role="header" data-theme="b" data-position="fixed" data-inset="false">
            <h1>My</h1>
        <a href="index.html" data-icon="home" class="ui-btn-right" data-iconpos="notext" >Home</a>
        </div>  

    <div data-role="content">

            <h4>Map</h4>

        <div class="ui-bar-c ui-corner-all " >
            <div id="map_canvas" style="height:300px;"></div>
        </div>
    </div>
    </div>  
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:47:10.670

--edit-- 忘记我说的话。你是对的，它不能解决问题。:)

您似乎忘记在第 34 行关闭您的 initialize() 函数！顺便别忘了放置 doctype，那么它将是第 35 行。

我现在可以在我的机器上看到地图（Chrome 19）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:29:24.640

[好的，所以这个](https://stackoverflow.com/questions/9221259/jquery-mobile-not-loading-google-map-except-on-refresh)问题与给出的答案完全相同。我不确定为什么它在您身边不起作用，因为我现在使用的代码与您相同。

我确实遇到了我的地图偏离中心的故障，但通过替换`pageinit`为`pageshow`. 对我来说，重新加载页面甚至更改浏览器的窗口宽度也修复了它。

你的地图是完全不可见的，还是你能看到左上角的东西？

# wpf - WPF：绑定实际发生在什么时候？

> ID：10931061
> 
> 赞同：3
> 
> 时间：2012-06-07T11:38:18.130
> 
> 标签：wpf

我的 MVVM 应用程序有许多从基本用户控件继承的视图，这些控件公开了一个“ID”属性。在 XAML 中，这绑定到视图的基础视图模型上的 ID 属性，简单地说：

```
Id="{Binding Path=Id}" 
```

视图模型实现了 INotifyPropertyChanged，它的 ID 在构造函数中设置。ID 用于唯一标识每个视图/视图模型，主要由“桌面管理器”用于管理主窗口中的用户控件，就像 MDI 应用程序一样。当我的应用程序启动时，我实例化各种视图模型及其视图，并将视图模型分配给视图`DataContext`。然后我将视图传递给桌面管理器，桌面管理器将它们放置在画布上，定位它们等。

我遇到的问题是，此时视图的 ID 仍然为空，并且似乎只是在一段时间后才绑定到数据上下文（也许当 UI 被渲染时？）。我试过像这样强制绑定，但它没有帮助： -

```
var bindingExpression = widget.GetBindingExpression(DesktopElement.IdProperty);
bindingExpression.UpdateTarget(); 
```

这不是世界末日，因为我可以将我的视图*和*视图模型中的 ID 传递给桌面管理器，但感觉有点 hacky。我很想知道绑定发生在控件/窗口生命周期的哪个时间点，以及是否有其他方法可以强制绑定发生？

提前感谢安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T20:38:06.287

为了了解绑定是如何传输的，您需要了解`Dispatcher`. 基本上，它是一个优先队列。布局、绑定、渲染、输入等内容以不同的优先级放置在队列中。

现在，从它的声音来看，你永远不会让执行回到`Dispatcher`. 这意味着`Binding`值无法传输（当您手动调用时，`UpdateTarget`您只是将其安排在 上`Dispatcher`）。因此，简而言之，您需要`Dispatcher`在完成初始化之前让队列中的操作执行。

最简单的方法是调用`BeginInvoke`较低`DispatcherPriority`的方法来完成初始化。由于布局系统的工作原理，有时选择正确的优先级可能会很棘手，但如果您使用`DispatcherPriority.Loaded`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T20:44:43.497

我的建议是有一个您的视图模型实现的接口，它公开 Id 属性。然后，您可以让您的桌面管理器通过将其转换为适当的接口来从 DataContext 中获取 Id。这可能是更清晰的职责分离，因为您的桌面管理器可能应该尽可能少地了解具体视图（为了可测试性。）

# c# - 带有用户控件的延迟加载选项卡

> ID：10931064
> 
> 赞同：2
> 
> 时间：2012-06-07T11:38:25.320
> 
> 标签：c#, asp.net, ajax, lazy-loading, tabcontainer

我想在 AJAX 选项卡容器中使用延迟加载选项卡。我已经实施了。但我面临的问题是，当我单击按钮或触发该用户控件中的任何事件时，它不会被触发；没发生什么事。

```
<asp:TabContainer runat="server" ID="TabContainerUp" 
        ActiveTabIndex="0" AutoPostBack="true" OnActiveTabChanged="TabContainerUp_ActiveTabChanged">
        <asp:TabPanel ID="tab1" runat="server">
            <HeaderTemplate>
                <img src="images/uc1.png" alt="" />
            </HeaderTemplate>
            <ContentTemplate>
                <asp:Panel ID="pnlUC1" runat="server">
                </asp:Panel>
            </ContentTemplate>
        </asp:TabPanel>
        <asp:TabPanel ID="tab2" runat="server">
            <HeaderTemplate>
                <img src="images/uc2.png" alt="" />
            </HeaderTemplate>
            <ContentTemplate>
                <asp:Panel ID="pnlUC2" runat="server">
                </asp:Panel>
            </ContentTemplate>
        </asp:TabPanel>
    </asp:TabContainer> 
```

代码隐藏：

```
 protected void TabContainerUp_ActiveTabChanged(object sender, EventArgs e)
    {
        string tabName = TabContainerUp.ActiveTab.ID;
        getActiveTab(tabName);
    }

    public void getActiveTab(string tabName)
    {
        UserControl uc;
        //uc.
        switch (tabName)
        {
            case "tab1":
                pnlUC1.Controls.Clear();
                uc = Page.LoadControl("~/Controls/UC1.ascx") as UserControl;
                pnlUC1.Controls.Add(uc);
                break;
            case "tab2":
                pnlUC2.Controls.Clear();
                uc = Page.LoadControl("~/Controls/UC1.ascx") as UserControl;
                pnlUC2.Controls.Add(uc);
                break;
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T11:58:08.277

`Page_Load`您需要最迟在每次回发时重新创建动态创建的控件，并使用与以前相同的 ID。因此，您可以将它们加载并添加到您的面板中`ActiveTabChanged`，但您需要在下一次回发中重新创建它们`Page_Init/Page_Load`。因此，您需要将要重新创建的内容存储在某个地方（fe in `Session`）。

但我假设你让事情变得比必要的更复杂，你可以简单地创建这些用户控件，甚至以声明方式（在 aspx 上）初始`Visible`状态为`false`. 然后，您只需要根据需要在 中切换控件的可见性`ActiveTabChanged`。

**注意**：不可见的服务器端 web 控件根本不会呈现给客户端，也`ViewState`不会被保存。因此，声明它们没有任何缺点。

***延迟加载***并不意味着您尽可能晚地创建这些控件，而是意味着您尽可能晚地对它们进行数据绑定。所以永远不要将它们从（在 UserControl 中的 fe）绑定到数据库`page_load`，而只能从在必要时从页面调用的方法（这里从`ActiveTabChanged`）绑定到数据库。`BindData`因此，您可以在 UserControl 中实现公共方法`UC1`。

这是一个简单的例子：

```
switch (tabName)
{
    case "tab1":
        UC1_1.Visible = true;
        UC1_1.BindData();
        UC1_2.Visible = false;
        break;
    case "tab2":
        UC1_1.Visible = false;
        UC1_2.Visible = true;
        UC1_2.BindData();
        break;
} 
```

在你的`UserControl`

```
public void BindData()
{
    // put here all your databinding stuff 
    // that is in page_load now ...
} 
```

这可能是关于延迟加载 ajax TabPanels 的最佳教程：

*   [http://mattberseth.com/blog/2007/07/how_to_lazyload_tabpanels_with.html](http://mattberseth.com/blog/2007/07/how_to_lazyload_tabpanels_with.html)

# c# - WebApi / 使用 URL 编码的路由

> ID：10931065
> 
> 赞同：2
> 
> 时间：2012-06-07T11:38:37.160
> 
> 标签：c#, url, asp.net-web-api, encoding, asp.net-web-api-routing

与此相关：[URL 中的 URL 编码斜杠](https://stackoverflow.com/questions/591694/url-encoded-slash-in-url)

我使用了 Mehrdad Afshari 的答案（通配符路由参数），它最有效！但是，多个斜线将转换为单个斜线。

我的路线是`resource/{*url}`

使用`GET resource/abc%2fdef`我的控制器方法调用`abc/def`.

使用`GET resource/abc%2f%2f%2f%2fdef`我的控制器方法再次调用`abc/def`. 多余的斜线丢失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:41:58.127

你有没有看到这个 stackoverflow 问题和解决方案：

[URL 中的 URL 编码斜杠](https://stackoverflow.com/questions/591694/url-encoded-slash-in-url)

这会将您定向到该帖子 [http://gathadams.com/2009/01/06/allowing-special-characters-forward-slash-hash-asterisk-etc-in-aspnet-mvc-urls/](http://gathadams.com/2009/01/06/allowing-special-characters-forward-slash-hash-asterisk-etc-in-aspnet-mvc-urls/)

Phil haacked 像这样回应 [http://haacked.com/archive/2008/04/10/upcoming-changes-in-routing.aspx#68032](http://haacked.com/archive/2008/04/10/upcoming-changes-in-routing.aspx#68032)

# iphone - 如何在不影响字体大小和姓氏的情况下为标签设置粗体？

> ID：10931068
> 
> 赞同：3
> 
> 时间：2012-06-07T11:38:54.490
> 
> 标签：iphone, objective-c, xcode, uifont

我想将选定的标签设置为粗体而不实现字体系列粗体版本。例如：- 设置粗体的默认方式如下

```
UIFont *myFont = [UIFont fontWithName:@"Helvetica-BoldOblique" 
                                 size:[UIFont systemFontSize]]; 
```

但我只想更改字体粗细（即粗体、斜体或下划线）。无需调用“fontWithName”。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T11:07:40.677

我最近写了一篇关于该主题的博客文章。您可以在[http://eclipsesource.com/blogs/2012/07/26/uifont-from-a-css-definition/看到它](http://eclipsesource.com/blogs/2012/07/26/uifont-from-a-css-definition/)

使用我在那里提供的代码，您可以获得所需的 UIFont，如下所示：

`UIFont *myFont = [FontResolver fontWithDescription:@"font-family: Helvetica; font-weight: bold; font-style: italic;"];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:14:21.430

你运气不好。对于非系统字体，您必须使用`fontWithName`才能获得粗体版本。从以下文档`UIFont`：

> *fontName*
> 完全指定的字体名称。此名称包含字体系列名称和字体的特定样式信息。

**可能的解决方法：**
因此，虽然您无法使用通用方法将每种字体切换为*粗体*，但您仍然可以通过维护一组字符串常量来实现这一点，您可以查找这些常量以切换到您正在使用的字体的正确粗体版本在您的应用程序中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T12:13:28.627

如果你想要系统字体（Helvetica Neue），你可以使用`boldSystemFontOfSize:`. 否则，您将无法在字体名称中指定粗体。有关详细信息，请参阅[UIFont](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIFont_Class/Reference/Reference.html)参考。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T12:10:50.090

```
labelName.font=[UIFont boldSystemFontOfSize:[UIFont systemFontSize]]; 
```

使用此语句它将帮助您

# jquery - jQuery 下拉菜单 - 点击可见

> ID：10931073
> 
> 赞同：0
> 
> 时间：2012-06-07T11:39:16.497
> 
> 标签：jquery, html

我需要一个下拉菜单，它应该做两件事。

1.  当我们悬停时，子菜单应该是可见的。当鼠标取出时，它应该隐藏起来。
2.  当用户点击菜单或其子菜单时，子菜单应该是可见的。鼠标取出时不应隐藏。

我试过这个，但它不工作......

HTML

```
<ul id="navigation">
    <li class="dropdown"><a href="#1">Home</a>
    <li class="dropdown"><a href="#2">Solutions</a>
        <ul class="sub_navigation">
            <li><a href="#2">Video</a></li>
            <li><a href="#3">Animation</a></li>
        </ul>
    </li>
</ul> 
```

JS

```
<script type="text/javascript">
$('body').ready(function() {
    $('.dropdown').hover(function() {
        $(this).find('.sub_navigation').slideToggle(); 
    });
});
</script>
<script type="text/javascript">
$('body').ready(function() {
    $('.dropdown a').click(function() {
        $(this).find('.sub_navigation').show(); 
    });
});
 </script> 
```

请给一些提示...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:51:13.380

一个粗略的方法是：首先你应该隐藏你的 sub_navigation 即

```
.sub_navigation{
    display:none;
} 
```

jQuery：

```
$('body').ready(function() {
    $('.dropdown').hover(function() {
        if(!$(this).hasClass("isClicked")){
        $(this).find('.sub_navigation').slideToggle();
        }
    });
    $('.dropdown').click(function(){
        $(this).addClass('isClicked');
    });
    $('.dropdown .sub_navigation').click(function(){
        $(this).parent().addClass("isClicked");
    });
}); 
```

​</p>

[请参阅此处的](http://jsfiddle.net/evM46/)工作解决方案

# ruby-on-rails - 关于 ROR 中嵌套属性的访问

> ID：10931074
> 
> 赞同：0
> 
> 时间：2012-06-07T11:39:20.943
> 
> 标签：ruby-on-rails

**嗨，如果有人可以解决我遇到的以下错误。**

我有两个模型 PackageDeals 和 PackageDetails

在 PackageDeals 模型中，我有以下代码：- `has_many :package_details has_many :image_sets accepts_nested_attributes_for :package_details`

在 PackageDetails 模型中，我有：

```
 belongs_to :package_deals
accepts_nested_attributes_for :package_deals 
```

现在在控制器中：

```
def new 
        @packages=PackageDeals.new(params[:package_deals])
                    @packages.package_details.build 
```

结尾

现在在我正在使用的视图中：

```
 <td><%= r.text_field :name, :class => 'space_bottom quote_request_form',:size=>17 %></td></tr>
        <tr><td><%= r.fields_for :package_details do |f| %></td></tr>

        some codes

        <%end%>
  <tr>
    <td><%= r.submit 'Create', :class => 'space_top' %></td></tr></table>
  <% end %> 
```

现在我在单击视图中的新链接时收到此错误：

**未初始化的常量 PackageDeals::PackageDetail**

**任何解决方案请......**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:54:00.197

检查模型和关联名称的拼写：

默认情况下，Rails在模型名称中使用**单数形式，** *has_one*和*belongs_to*关联名称（例如`PackageDeal`and `belongs_to :package_deal`）和*has_many*关联名称中的**复数形式**（例如）。更多信息： http: [//itsignals.cascadia.com.au/ ?p=7](http://itsignals.cascadia.com.au/?p=7)*`has_many :package_details`*

 *您可以打破命名约定，但是您需要在关联上添加额外的参数。因此，除非您有充分的理由不这样做，否则建议您坚持使用默认设置。有关这些额外参数的更多信息：http: [//api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-belongs_to](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-belongs_to)*

# jquery - 需要一个像这样的 Jquery 滑块

> ID：10931075
> 
> 赞同：0
> 
> 时间：2012-06-07T11:39:24.603
> 
> 标签：jquery

我正在寻找这样的 jquery 图像滑块。 ![在此处输入图像描述](../Images/5c486f4a763d02536fe9ca6d75d690b0.png)

任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:56:18.793

试试[jCarouselLite](http://www.gmarwaha.com/jquery/jcarousellite/)，它允许您拥有一个可滚动的基于图像的滑块，并且还可以重复/循环浏览项目，因此您永远不会觉得您已经到达了内容的结尾。无限滚动。它易于使用，并为我节省了大量的项目时间。

这现在也托管在[github](https://github.com/orangewise/jcarousellite)上，所以如果有什么它不做的检查叉子，看看它们是否可以帮助你到达你需要的地方。

# java - 在android中有一个焦点的许多焦点图片？

> ID：10931076
> 
> 赞同：4
> 
> 时间：2012-06-07T11:39:26.357
> 
> 标签：java, android, camera, focus, autofocus

我正在制作一个应该以一秒的间隔拍照的 Android 应用程序。问题是，如果您在每张照片之前聚焦照片，间隔会变得太长。Camera.autoFocus() 似乎最多需要一秒钟多一点，最坏的情况是三秒钟以上，具体取决于照明和其他因素。据我所知，没有办法在 Android 中手动控制焦距，而且 FOCUS_MODE_FIXED 不适合我的应用程序，因为我在很短的距离内拍照。

**有没有办法一次对焦，然后以相同的焦点拍摄多张照片？**

我一直在尝试这样做，但拍照后焦点总是消失。developer.android.com 说：

> “使用 stopPreview() 停止预览，或使用 takePicture(Camera.ShutterCallback, Camera.PictureCallback, Camera.PictureCallback) 触发静态图像捕捉，不会改变焦点位置。应用程序必须调用 cancelAutoFocus 来重置焦点。”

这是我现在拍照的方式。我从中删除了一些不相关的行。这一切正常，但太慢了。我有索尼爱立信 Xperia Mini 和 Android 2.3.4。

```
AutoFocusCallback myAutoFocusCallback = new AutoFocusCallback(){

      public void onAutoFocus(boolean arg0, Camera arg1) {
                try {
                arg1.takePicture(null, null, mPicture);
                amountOfPictures++;
                arg1.startPreview();
            } catch (Exception e) {}
     }
};

private PictureCallback mPicture = new PictureCallback() {

    public void onPictureTaken(byte[] data, Camera camera) {
        mCamera.autoFocus(myAutoFocusCallback);
//write picture to file
//leave cameraActivity when enough pictures written
    }};

//this is run before the first picture
    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
        try {
            mCamera.setPreviewDisplay(mHolder);
            mCamera.startPreview();
            mCamera.autoFocus(myAutoFocusCallback);
            Thread.sleep(500);

        } catch (Exception e){}
    }
} 
```

编辑：似乎现在使用`FOCUS_MODE_CONTINUOUS_VIDEO`解决了这个问题。意味着它一直在集中注意力。我想知道它以前怎么没有。但我认为对焦不如使用`FOCUS_MODE_AUTO`or时那么好`FOCUS_MODE_MACRO`。 `EDOF`并且`CONTINUOUS_PICTURE`不是选项，因为这款手机不支持它们。

如果有人知道原始问题的答案，我仍然会很高兴。

# android - 如何在 15000 点的 android achartengine 布局缩放上禁用 ANR 对话框

> ID：10931079
> 
> 赞同：2
> 
> 时间：2012-06-07T11:39:34.440
> 
> 标签：android, achartengine, android-anr-dialog

在我的程序中，我将 achartengine 线图放在布局中。

当我想从 15000 点显示放大时，我得到了一个 ANR 对话框。我知道它会起作用，如果 ANR 弹出，我必须等待并选择等待。但我厌倦了每次我想放大时都点击等待按钮。有人知道如何禁用此 ANR 对话框吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:50:05.073

使用 chart 引擎，当您显示很多点时，缩放捏合反应不那么灵敏，我通过仅取最大点数来减少绘制的数字数量（固定为每个显示 500 个点）来改进我的绘图。我添加了一个缩放侦听器，因此每次用户放大时，我都会在缩放区域中用更多点重新绘制它。

# binary - 这是什么浮点格式？

> ID：10931081
> 
> 赞同：4
> 
> 时间：2012-06-07T11:40:03.170
> 
> 标签：binary, floating-point, binaryfiles

我试图弄清楚如何读取历史二进制数据文件。我相信它来自较旧的 32 位 Solaris 系统。我正在查看我认为包含 32 位浮点数（不是 IEEE 浮点数）的文件部分。格式似乎是（作为十六进制转储）：

```
xx41 xxxx
xx42 xxxx
```

这些位置中的 41 和 42 始终通过浮点数出现。恐怕我没有任何额外的信息可以补充。所以我的问题的第一部分是，这是什么格式？如果第一部分不能直接回答，可能的可能性列表会很好。最后，您建议如何确定这是什么格式？谢谢您的意见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T13:28:29.590

这可能是 PDP-11 格式吗？对我来说，赠品是*第二个*字节大部分是恒定的，这表明浮点格式的指数以第二个字节而不是第一个字节结束（正如您对大端机器所期望的那样）或最后（对于小端机器）。PDP-11 因其有趣的浮点和整数字节顺序而臭名昭著。请参阅此[浮点格式](http://www.quadibloc.com/comp/cp0201.htm)页面底部附近的材料。

`41`和的值`42`似乎与大致单位数量级的正值一致：PDP-11 格式的指数偏差似乎是`128`，因此使用不寻常的字节顺序，我希望您列出的第二个字节包含指数的符号和最高 7 位；这将使第二个字节的无偏指数为`41`2 或 3，具体取决于第 8 个指数位（应显示为第一个字节的 MSB）。

有关 PDP-11 格式的简要说明，另请参阅[此页面](http://nssdc.gsfc.nasa.gov/nssdc/formats/PDP-11.htm)。

[编辑] 这是一些 Python 代码，用于将您描述的形式的 4 字节字符串转换为 Python 浮点数，假设 4 字节字符串表示 PDP-11 格式的浮点数。

```
import struct

def pdp_to_float(xs):
    """Convert a 4-byte PDP-11 single-precision float to a Python float."""

    ordered_bytes = ''.join(xs[i] for i in [1, 0, 3, 2])
    n = struct.unpack('>I', ordered_bytes)[0]

    fraction = n & 0x007fffff
    exponent = (n & 0x7f800000) >> 23
    sign = (n & 0x80000000) >> 31

    hidden = 1 if exponent != 0 else 0
    return (-1)**sign * 2**(exponent-128) * (hidden + fraction / 2.0**23) 
```

例子：

```
>>> pdp_to_float('\x00\x00\x00\x00')
0.0
>>> pdp_to_float('\x23\x41\x01\x00')
5.093750476837158
>>> pdp_to_float('\x00\x42\x00\x00')
16.0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T23:32:59.943

所描述的数据与通常的 IEEE 754 格式一致，以大端顺序存储，然后由小端转储程序一次显示两个字节。

区间 [8, 128) 中的 32 位浮点数的第一个字节为 0x41 或 0x42。考虑这样一个数字，可能是 0x41010203。先存储大端，在内存中会出现四个字节0​​x41、0x01、0x02、0x03。当转储程序读取 16 字节整数时，小端优先，它将读取并显示 0x0141 和 0x0302。

# wcf - 带有敏感数据的 WCF 服务只能由我的 silverlight 控件访问

> ID：10931084
> 
> 赞同：1
> 
> 时间：2012-06-07T11:40:19.567
> 
> 标签：wcf, silverlight, service, key

我有一个 .svc 服务，我希望它只将数据返回给我的 silverlight 控件。

我正在考虑在服务功能中需要一个预定义的键，并且该键将在 Silverlight 控制中硬编码。

但我知道silverlight控件可能被反编译，然后预定义的密钥被捕获。

您能否建议一种更好的方法来保护我的服务？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:28:27.800

阅读有关[使服务跨域边界可用的信息](http://msdn.microsoft.com/en-us/library/cc197955%28v=vs.95%29.aspx)。我认为这就是你所需要的。

# jquery - 手风琴控件内的 jQuery 可滚动选项卡

> ID：10931085
> 
> 赞同：1
> 
> 时间：2012-06-07T11:40:25.857
> 
> 标签：jquery

我们一直在使用此处找到的代码来制作可滚动的标签[http://jsfiddle.net/mekwall/dECtZ/](http://jsfiddle.net/mekwall/dECtZ/)，它似乎工作正常，但最近我们将它放在手风琴控件中，我们现在遇到了问题。

如果你看这里：http: [//jsfiddle.net/dECtZ/188/](http://jsfiddle.net/dECtZ/188/)我已经修改为将它放在手风琴控件中，我们遇到的问题是，如果您将手风琴上的标签和部分交换几次，可滚动箭头即使没有足够的项目来保证滚动，右边也会开始出现。

![在此处输入图像描述](../Images/7c2f758dfb129aa05940e61ad3324a5f.png)

任何建议将不胜感激，因为我不知道如何解决这个问题。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:46:26.710

删除以下代码对我有用：

```
 $(window).bind("resize.tabs", function(e) {
                var navWidth = 0;
                var arrowWidth = navPrev.outerWidth();
                nav.find("li").each(function() {
                    navWidth += $(this).outerWidth(true);
                });

                var marginLeft = -(parseInt(nav.css("marginLeft"), 10)),
                    hwidth = self.header.width();

                if (navWidth > (hwidth+marginLeft)) {
                    self.header.addClass("ui-tabs-arrow-r");
                    navNext.show("fade");
                    if (marginLeft > 0) {
                        self.header.addClass("ui-tabs-arrow-l");
                        navPrev.show("fade");
                    } else {
                        self.header.removeClass("ui-tabs-arrow-l");
                        navPrev.hide("fade");
                    }
                } else {
                    self.header.removeClass("ui-tabs-arrows ui-tabs-arrow-l");
                    navNext.hide("fade");
                    if (marginLeft > 0) {
                        self.header.addClass("ui-tabs-arrow-l");
                        navPrev.show("fade");
                    } else {
                        self.header.removeClass("ui-tabs-arrow-l");
                        navPrev.hide("fade");
                    }
                }
            }).trigger("resize.tabs"); 
```

# android - 为什么 layout_weight 在不同设备上的工作方式不同

> ID：10931086
> 
> 赞同：0
> 
> 时间：2012-06-07T11:40:36.100
> 
> 标签：android, android-layout, android-xml

我有 xml，其中图像填充了 60% 的屏幕：

```
 <RelativeLayout
                        android:id="@+id/rl_images_layout"
                        android:layout_width="0dp"
                        android:layout_weight="6"
                        android:layout_height="wrap_content" 
                        android:layout_marginBottom ="5dp">

                        <com.my.proj.view.ContentUpdatableImageView
                            android:id="@+id/iv_template1_image"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:adjustViewBounds="true"
                            android:scaleType="fitStart" />

                        <ImageView
                            android:id="@+id/ivResizeIcon"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_alignRight="@id/iv_template1_image"
                            android:layout_alignTop="@id/iv_template1_image"
                            android:background="@drawable/btn_pinch" />

                        <ImageView
                            android:id="@+id/ivRotateIcon"
                            android:layout_width="55dp"
                            android:layout_height="55dp"
                            android:layout_alignRight="@id/iv_template1_image"
                            android:layout_alignBottom="@id/iv_template1_image"
                            android:layout_marginRight="5dp"
                            android:layout_marginBottom="5dp"
                            android:background="@drawable/btn_rotate"
                            android:visibility="gone" />
                 </RelativeLayout>
                 <View 
                     android:layout_width="0dp"
                     android:layout_height="fill_parent"
                     android:layout_weight="4" /> 
```

在一部手机上它工作正常（LG P500），但在其他设备（HTC Desire HD）上，图像仅填充 40%。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:07:14.820

你错过了一件事。

如果您同时使用`android:layout_weight`两个视图，则`fill_parent/match_parent`参数应为`layout_heigth`（如果要展开屏幕）

因此，将`layout_heigth`您的第一个视图中的更改为：

```
android:layout_height="fill_parent" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:48:32.277

我认为是因为像素密度

请检查这个

[Android：屏幕支持](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T11:50:56.377

尝试这个

```
 android:weightSum="100"  //for parent layout 

    android:layout_weight="60" // for first child //In your case relative layout

    android:layout_weight="40" //for second child //In your case view 
```

# performance - Flex Chart 使浏览器无响应

> ID：10931097
> 
> 赞同：0
> 
> 时间：2012-06-07T11:41:42.357
> 
> 标签：performance, flash, apache-flex, adobe, flash-builder

我有一个 flex-3 swf（简单折线图 - 使用 http-service 获取图表数据）

在我的应用程序中，我必须在一页中列出多行数据（通常超过 30 行），对于每一行我都必须包含此图表。

问题是当加载时行数增加时，浏览器进入无响应状态。

我想知道如何处理这种情况，有没有更好的方法在一个页面中多次显示单个 flex-3 图表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:45:25.753

图表是重要的组成部分。我不建议使用太多实例。此外，您似乎只是创建了越来越多的时间实例，这不是最好的解决方案。您应该重用实例。查看 Flex 如何使用项目渲染器。

# java - QC ALM (QC 11) REST Api 400 身份验证时出错

> ID：10931103
> 
> 赞同：3
> 
> 时间：2012-06-07T11:42:00.213
> 
> 标签：java, rest, hp-quality-center

我正在尝试使用 Java 中的 Rest api 访问 QC 11。

我正在遵循 HP 提供的手册中的 API 参考。以下是登录认证的基本步骤。

> > 非 Web 应用程序授权客户端查询经过身份验证的资源并且不发送任何身份验证标头。此步骤是可选的。
> 
> GET /qcbin/rest/is-authenticated
> 
> 服务器拒绝请求并返回对认证点的引用。
> 
> HTTP/1.1 401 未经授权的 WWW-Authenticate: LWSSO realm=http://[server]:[port]/qcbin/authentication-point
> 
> 客户端将有效的基本身份验证标头发送到身份验证点。
> 
> GET /qcbin/authentication-point/authenticate 授权：基本 ABCDE123
> 
> 服务器验证基本身份验证标头，创建新的 LW-SSO 令牌并将其作为 LWSSO_COOKIE_KEY 返回。
> 
> HTTP/1.1 200 OK 设置 Cookie：LWSSO_COOKIE_KEY={cookie}
> 
> 应用程序现在可以使用令牌访问数据和服务。在会话结束时，注销以丢弃令牌。

这是我的java代码。

```
DefaultHttpClient httpClient = new DefaultHttpClient();

            String encoding = Base64.encodeBase64String("demoUser:demoUser123".getBytes());
            HttpGet httpGet = new HttpGet("http://HOST_VALUE:PORT_VALUE/qcbin/authentication-point/authenticate");
            //httpGet.setHeader("GET", "/qcbin/authentication-point/authenticate");
            httpGet.setHeader("Authorization:", "Basic " + encoding);
            HttpResponse response;

            httpClient.getCredentialsProvider().setCredentials(
                    new AuthScope("proxyHost", 8080),
                    new UsernamePasswordCredentials("userName", "Password"));

            response = httpClient.execute(httpGet);

            System.out.println(response.getAllHeaders().toString());
            System.out.println(response.getStatusLine().toString());
            BufferedReader br = new BufferedReader(
                    new InputStreamReader((response.getEntity().getContent())));

            String output;
            System.out.println("Output from Server .... \n");
            while ((output = br.readLine()) != null) {
                System.out.println(output);
            }
            httpClient.getConnectionManager().shutdown(); 
```

它给了我输出

> [Lorg.apache.http.Header;@159e154 HTTP/1.1 400 来自服务器的错误请求输出 ....

我是使用 Java 的 REST 新手。任何人都可以帮忙吗？任何使用 REST 连接到 ALM 并获取数据的示例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T06:00:36.167

**解决了这个问题。**

问题出在base64编码中！如果要将字符串转换为 base64 编码的字符串...如果结果大于 76 个字符。它增加了新的一行！即使它小于 76

所以解决方案是

```
encoding = encoding.replaceAll("\n", ""); 
```

# python - 使用特定值限制作为组合总和的数字组合

> ID：10931104
> 
> 赞同：2
> 
> 时间：2012-06-07T11:42:00.673
> 
> 标签：python

python中是否有任何工具可以生成这些组合：

```
a=200
b=100

limit=500 
```

组合是：

```
200,200,100  sum(200+200+100)<=500
200,100,100,100 sum(200,100,100,100)<=500 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:51:22.007

```
>>> from itertools import product
>>> a = 200
>>> b = 100
>>> [x for i in range(1, limit/min((a,b))+1) # Py 2 use xrange for more efficiency
       for x in product((a,b), repeat=i)
       if sum(x) <= limit]
[(200,), (100,), (200, 200), (200, 100), (100, 200), (100, 100), (200, 200, 100), 
 (200, 100, 200), (200, 100, 100), (100, 200, 200), (100, 200, 100), 
 (100, 100, 200), (100, 100, 100), (200, 100, 100, 100), (100, 200, 100, 100), 
 (100, 100, 200, 100), (100, 100, 100, 200), (100, 100, 100, 100), 
 (100, 100, 100, 100, 100)] 
```

这是函数形式：

```
>>> def combos(nums,limit):
        return [x for i in range(1, limit/min(nums)+1) 
                  for x in product(nums,repeat=i)
                  if sum(x) <= limit]

>>> combos(nums=(200,300,400),limit=700)
[(200,), (300,), (400,), (200, 200), (200, 300), (200, 400), (300, 200),
 (300, 300), (300, 400), (400, 200), (400, 300), (200, 200, 200), 
 (200, 200, 300), (200, 300, 200), (300, 200, 200)] 
```

注意：此解决方案并未完全优化，因为它会生成所有可能的组合，即使较短的组合超过限制，也会继续生成较长的组合。

# ios - 在真机上测试 iPhone 应用

> ID：10931107
> 
> 赞同：2
> 
> 时间：2012-06-07T11:42:05.083
> 
> 标签：ios

我有一个苹果开发者 ID。我有我的开发人员证书，我的钥匙串中的证书，我在我的设备（iPad）中安装了最新版本的 iOS（5.1.1（9B206）），我得到了我的个人资料，我在一个开发团队中，我告诉 Xcode 我想使用该设备进行测试。在构建设置中，我将架构设置为 armv6 和 armv7，在“目标”和“项目”中也是如此。得到配置文件。

不过，当我尝试在 iPad 上运行该应用程序时，我收到“Xcode 无法使用所选设备运行”。说我需要安装更新的 iOS 版本（正如我所说，我在设备上安装了最新版本）。

以前有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:46:51.760

您需要将 Xcode 的版本更新为`4.3.2`

# tomcat - 带有损坏的管理器应用程序的 Tomcat 6

> ID：10931111
> 
> 赞同：0
> 
> 时间：2012-06-07T11:42:18.183
> 
> 标签：tomcat, tomcat6

我在 Debian Sqeeze 上使用 Tomcat 6.0.35 和 Sun 的 Java 1.6.0_26。

我有 2 个应用程序：我的应用程序部署在 ROOT 上下文和标准管理器应用程序。

在我意外设置**chmod 600 tomcat/conf/Catalina/**后，经理停止工作并出现错误：

```
java.io.FileNotFoundException: /home/webproxy/apache-tomcat-6.0.35/conf/Catalina/localhost/manager.xml (Permission denied) 
```

这很清楚为什么。

但现在我无法恢复经理应用程序。我修复了 Catalina 文件夹的文件模式，我删除了 conf/Catalina 和 work/Catalina 中所有 tomcat 的临时文件，我多次重新启动 Tomcat，总是得到“404 - The requested resource (/manager/) is not available”错误。日志文件中没有错误消息。

我在 ROOT 上下文中部署的应用程序没有任何问题。

Tomcat还有其他地方存储它的临时文件吗？

您有任何想法如何将经理应用程序带回来吗？

***更新***以下是相关文件列表：

```
$ ls -lh conf/Catalina/
total 4.0K
drwxr-xr-x 2 webproxy webproxy 4.0K Dec 20 13:19 localhost

$ ls -lh webapps/
total 4.0K
drwxr-xr-x 5 webproxy webproxy 4.0K Nov 28 2011 manager
lrwxrwxrwx 1 webproxy webproxy   20 May 29 09:32 ROOT -> /home/webproxy/build – 
```

# javascript - 如何检查是否单击了提交按钮而不是页面上的输入？

> ID：10931116
> 
> 赞同：0
> 
> 时间：2012-06-07T11:42:39.030
> 
> 标签：javascript, html, forms

想象一下这段 html：

```
​&lt;form>
    <input type="text">
    <input type="submit" id="a">
</form>​​​​​​ 
```

和这段 Javascript

```
document.getElementById('a').onclick = function (e) {
    alert(e.type);
};​​​​ 
```

即使您在文本字段中按回车，警报也会始终显示“点击”。

如何检查按钮是否真的被点击？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:50:07.930

想象一下这段 html：

```
<form>
    <input type="text">
    <input type="button" id="a">
</form> 
```

和这段 Javascript

```
document.getElementById('a').onclick = function (e) {
    this.form.submit();
};​​​​ 
```

不会有任何混淆。

几乎没有理由`input type="submit"`在现代 Web 应用程序中使用。

# javascript - Javascript 动画只在一个方向上起作用

> ID：10931119
> 
> 赞同：0
> 
> 时间：2012-06-07T11:42:54.823
> 
> 标签：javascript

我正在尝试创建的网页上有一个双向滑动动画。然而，动画只是部分工作。更准确地说，动画向上滑动，但只是中途向下滑动。这是我的 JavaScript：

```
function showLayer() {
var hiddenLayer = document.getElementById("mainmenu");
var layerPosition = parseInt(hiddenLayer.style.top);
if (layerPosition > 315) {
    hiddenLayer.style.top = (layerPosition - 5) + "px";
    setTimeout("showLayer()", 20);
}
}

function hideLayer() {
var hiddenLayer = document.getElementById("mainmenu");
var layerPosition = parseInt(hiddenLayer.style.top);
if (layerPosition <= 315) {
    hiddenLayer.style.top = (layerPosition + 5) + "px";
    setTimeout("hideLayer()", 20);
}
} 
```

请注意，在 hideLayer 函数的第四行，我将条件设置为 <= 315，这是因为将其设置为 315 会导致元素在单击触发元素后在任一方向上仅移动几个像素。这是我专门用于动画的 HTML 元素：

```
<div id="mainbutton" onclick="showLayer('mainmenu'); hideLayer('mainmenu')"></div>
<div id="mainmenu" style="position: absolute; top: 690px; left: 9px;"  
onclick="showLayer('mainmenu')">&nbsp;</div> 
```

以下是他们的风格：

```
div#mainmenu { width: 600px; height: 350px; border-style: solid; background-color: 
rgb(0, 0, 0) ; border-width: 3px; border-top-right-radius: 7px; border-top-left-
radius: 7px; }
div#mainbutton { position: absolute; top: 674px; left: 12px; width: 28px; height: 
28px; border-style: solid; border-color: rgb(255, 255, 255); border-width: 1px; border-
radius: 4px; } 
```

和小提琴：http: [//jsfiddle.net/JAtLA/](http://jsfiddle.net/JAtLA/)

我不得不将一些样式与 HTML 内联，因为动画无法以任何其他方式工作。起初我认为问题仅在于 hideLayer 函数的 if 条件。但是在调整它之后，我现在不太确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:15:59.047

我不知道这是否是您想要的，但这是我的答案：

您的代码中存在逻辑问题。你写了

`if(layerPosition<=315){ hiddenLayer.style.top = (layerPosition + 5) + "px";}`

这意味着如果顶部为 315 或更小，顶部将增加直到到达 316。但在第一个函数中，您说它在 315 处停止。所以函数 hideLayer 只会让它从 1 个像素移动。

解决方案是告诉他`<400`而不是`<=315`（或高于 400 的东西）。

这是一个修改过的小提琴：http: [//jsfiddle.net/7egr7/2/](http://jsfiddle.net/7egr7/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:17:23.580

如果（layerPosition <= 315），看起来“hideLayer”将停止。这真的是你想要的吗？它发生在 1 次迭代之后。

请注意，y 轴在屏幕下方（即顶部为零）。

单击按钮将调用 showLayer，然后调用 hideLayer。如果菜单打开（即 layerPosition > 315），showLayer 不会做任何事情（我猜这就是你想要的），并且 hideLayer 将使菜单上升 5（从 315 到 320）。在 hideLayer (layerPosition <= 315) 的下一次迭代中将是 false，所以它不会做任何事情。

试试这个：

```
var open = false;

function showLayer() {
    if (open)
        return;

    var hiddenLayer = document.getElementById("mainmenu");
    var layerPosition = parseInt(hiddenLayer.style.top);
    if (layerPosition > 315) {
        hiddenLayer.style.top = (layerPosition - 5) + "px";
        setTimeout("showLayer()", 20);
    }
    else {
        open = true;
    }
}

function hideLayer() {
    if (!open)
        return;

    var hiddenLayer = document.getElementById("mainmenu");
    var layerPosition = parseInt(hiddenLayer.style.top);
    if (layerPosition <= 685) {
        hiddenLayer.style.top = (layerPosition + 5) + "px";
        setTimeout("hideLayer()", 20);
    }
    else {
        open = false;
    }
} 
```

在 html 中，我想在做任何事情之前检查事物是打开还是关闭。

```
<div id="mainbutton" onclick="if (!open) { showLayer('mainmenu'); } else { hideLayer('mainmenu'); }"> 
```

但这`layerPosition <= 685`是唯一真正重要的变化。

# oracle - Oracle 侦听器创建登录

> ID：10931130
> 
> 赞同：0
> 
> 时间：2012-06-07T11:44:04.367
> 
> 标签：oracle

我想在另一个端口准备listner，但我遇到了问题，你可以在图片中看到我在下面添加的内容。此外，我想使用此“侦听器”连接到 dabase，并使用简单连接检查 CMD 中的连接。

我的用户名：rafal 密码：1521 中的 oracle 侦听器正在工作，但在另一个端口我遇到了问题

![在此处输入图像描述](../Images/b3a036e352437be9e780d3a3013e2aaf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:42:19.770

“没有侦听器”错误表明您访问了错误的服务器，或者错误端口上的正确服务器，或者未启动侦听器。我将首先检查侦听器是否已启动，因为您可以到达另一个侦听器。

# c++ - C++中system()函数调用的返回值，用于运行Python程序

> ID：10931134
> 
> 赞同：11
> 
> 时间：2012-06-07T11:44:12.363
> 
> 标签：c++, python, linux, system

我正在使用`system()`调用运行 python 程序的代码在 Linux 上工作。我对此函数调用返回的值感兴趣，以了解 python 程序的执行情况。

到目前为止，我已经找到了 3 个结果：

*   当python进程成功完成时，system()返回的值为0

*   当 python 进程在执行过程中被杀死时（使用`kill -9 pid`），system() 返回的值为 9

*   当python进程由于参数错误而自行失败时，system()返回的值为512

这不符合我所读到的关于[system()](http://linux.die.net/man/3/system)函数的内容。

此外，被调用的 python 程序的代码显示它`sys.exit(2)`在遇到任何错误以及`sys.exit(0)`执行成功完成时退出。

谁能把这两个联系起来？我是否以错误的方式解释了返回值？是否涉及一些Linux处理，它接受python程序函数的参数并基于它`sys.exit()`返回值？`system()`

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-07T11:52:26.157

您调用的程序的退出代码可以根据`WEXITSTATUS(status)`手册[页](http://linux.die.net/man/3/system)获取。另请参阅 的手册页[`wait`](http://linux.die.net/man/2/wait)。

```
int status = system("/path/to/my/program");
if (status < 0)
    std::cout << "Error: " << strerror(errno) << '\n';
else
{
    if (WIFEXITED(status))
        std::cout << "Program returned normally, exit code " << WEXITSTATUS(status) << '\n';
    else
        std::cout << "Program exited abnormaly\n";
} 
```

# android - 使用 Twitter4j 从 android 将图片上传到 Twitter

> ID：10931136
> 
> 赞同：2
> 
> 时间：2012-06-07T11:44:17.357
> 
> 标签：android, twitter, media, twitter4j, tweets

有什么方法可以调用 Twitter API *update_with_media* POST 方法来使用 Twitter4j 上传照片？我的意思是，不使用 TwitPic 或 YFrog 等中间服务？

如果不可能，从 android 本机应用程序发布带有图片的推文的最佳方式是什么？有人可以告诉我有关 android 应用程序的工作示例吗？

谢谢！！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-07T13:34:48.287

```
if (requestCode == CAMERA_REQUEST) {
            mImageUri = data.getData(); 
            mPath = getRealPathFromURI(mImageUri); //from Gallery 

            if (mPath == null)
                mPath = mImageUri.getPath(); //from File Manager

            if (mPath != null) 
                bitmap  = BitmapFactory.decodeFile(mPath);
        } else {
            mPath   = mImageUri.getPath();
            bitmap  = BitmapFactory.decodeFile(mPath);
        }
Authorization auth=twitter.getAuthorization();
            ImageUpload uploadPhoto=ImageUpload.getTwitpicUploader(TwitPic_api_Key, (OAuthAuthorization) auth);
            Log.d(TAG, "Start sending image...");

            try {
                url = uploadPhoto.upload(new File(mPath));
                result = 1;
                Log.d(TAG, "Image uploaded, Twitpic url is " + url);            
            } catch (Exception e) {        
                Log.e(TAG, "Failed to send image");

                e.printStackTrace();
            } 
```

# extjs4 - ExtJS 4 prbolem with using business logic in the controller when it's triggerd from the view

> ID：10931137
> 
> 赞同：0
> 
> 时间：2012-06-07T11:44:27.027
> 
> 标签：extjs4

I have a view designed like that:

```
Ext.define('MY.view.NotificationMails', {
    extend: 'Ext.grid.Panel',
    alias: 'widget.NotificationMailsPanel',
    id: 'id-notification-mails-panel', 
```

and I have controller for this view which is:

```
Ext.define('MY.controller.NotificationMailsController', {
    extend: 'Ext.app.Controller',
    models: [
    'NotificationMailsRecord'
    ],

    stores: [
    'NotificationMailsStore'
    ],

    views: [
    'NotificationMails'
    ],
//  refs:[{
//      ref: 'notificationMails',
//      selector: 'mailGrid'    
//  }],

    init: function()    {
        this.control({
            '#id-notification-mails-panel': {

                itemclick: this.clickedSomething
            }

        })

    }, 
```

and just to make some test and eventually find the problem a simple function definition for `itemclick` :

```
clickedSomething: function() {
    console.log('Deteceted click');
} 
```

But nothing happens. I tried many variations and still can't get my actions from the view to execute functions in the controller. The curios thing is that I have several controllers and in most of them everything works as expected but this one and few others - I don't know - maybe I do something wrong, maybe the reason is somewhere else.

thanks

Leron

,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:40:33.600

This is weird. I'd try the following: console.log within init() to see if the controller is initialized (you might have forgotten to include it in your app list of controllers).

# jquery - JQuery：tablesorter如果tbody与theader不对应，如何对表进行排序

> ID：10931141
> 
> 赞同：0
> 
> 时间：2012-06-07T11:44:48.710
> 
> 标签：jquery, tablesorter

我的问题与此类似：[Tablesorter 2.0.3 colspan issue](https://stackoverflow.com/questions/2035056/tablesorter-2-0-3-colspan-issue)，但我的表的结构是：

```
<table id="myTable">
<theader>
    <tr>  
        <th>Reference</th>
        <th>Description</th>
        <th>State</th>
        <th>Description</th>            
    </tr>
</theader>
<tbody>
    <tr>
        <td colspan="2">111</td>            
        <td colspan="2">Ok</td>
    </tr>        
</tbody> 
```

​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ ​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​</p>

在此表上应用表排序器后，它没有正确排序。只有单击第一个和第二个标题才能对表格进行排序。我尝试将[Tablesorter 2.0.3 colspan 问题](https://stackoverflow.com/questions/2035056/tablesorter-2-0-3-colspan-issue)的解决方案调整为我的问题，但在 jquery 插件内部出现错误。

但如果单击第一个和第三个标题，则应进行排序。另外，我尝试做的是启用和禁用标头，例如：

```
$("#myTable").tablesorter({
            headers: { 
                  0: { 
                      sorter: true
                  },
                  1: { 
                      sorter: false
                  },
                  2: { 
                      sorter: true
                  },
                  3: { 
                      sorter: false
                  },
}); 
```

有人可以帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:06:36.587

将问题标题合并到一个单元格中。

```
<table id="myTable">
 <theader>
    <tr>  
        <th colspan='2'>Reference / Description</th>
        <th colspan='2'><div>State / Description</th>            
    </tr>
 </theader>
 <tbody>
    <tr>
        <td colspan="2">111</td>            
        <td colspan="2">Ok</td>
    </tr>        
 </tbody> 
```

# mysql - MySQL索引减慢查询

> ID：10931143
> 
> 赞同：8
> 
> 时间：2012-06-07T11:45:09.000
> 
> 标签：mysql, sql, performance, indexing

```
MySQL Server version: 5.0.95
Tables All: InnoDB 
```

我遇到了 MySQL 数据库查询的问题。基本上我发现如果我索引一个特定的 varchar(50) 字段**tag.name**，我的查询比不索引该字段需要更长的时间（x10）。我正在尝试加快此查询的速度，但是我的努力似乎适得其反。

罪魁祸首线路和领域似乎是：

```
WHERE `t`.`name` IN ('news','home') 
```

我注意到，如果我`tag`直接查询表而不使用相同的条件进行连接并且索引名称字段，我没有问题..它实际上按预期工作得更快。

****示例查询******

 **```
 SELECT `a`.*, `u`.`pen_name`
        FROM `tag_link` `tl`
  INNER JOIN `tag` `t`
          ON `t`.`tag_id` = `tl`.`tag_id`
  INNER JOIN `article` `a` 
          ON `a`.`article_id` = `tl`.`link_id`
  INNER JOIN `user` `u`
          ON `a`.`user_id` = `u`.`user_id`   
       WHERE `t`.`name` IN ('news','home')
         AND `tl`.`type` = 'article'
         AND `a`.`featured` = 'featured'
    GROUP BY `article_id`
       LIMIT 0 , 5 
```

****用索引解释******

 **```
| id | select_type | table | type   | possible_keys            | key     | key_len | ref               | rows | Extra                                                     |
+----+-------------+-------+--------+--------------------------+---------+---------+-------------------+------+-----------------------------------------------------------+
|  1 | SIMPLE      | t     | range  | PRIMARY,name             | name    | 152     | NULL              |    4 | Using where; Using index; Using temporary; Using filesort | 
|  1 | SIMPLE      | tl    | ref    | tag_id,link_id,link_id_2 | tag_id  | 4       | portal.t.tag_id   |   10 | Using where                                               | 
|  1 | SIMPLE      | a     | eq_ref | PRIMARY,fk_article_user1 | PRIMARY | 4       | portal.tl.link_id |    1 | Using where                                               | 
|  1 | SIMPLE      | u     | eq_ref | PRIMARY                  | PRIMARY | 4       | portal.a.user_id  |    1 |                                                           | 
+----+-------------+-------+--------+--------------------------+---------+---------+-------------------+------+-----------------------------------------------------------+ 
```

****解释没有索引******

 **```
+----+-------------+-------+--------+--------------------------+---------+---------+---------------------+------+-------------+
| id | select_type | table | type   | possible_keys            | key     | key_len | ref                 | rows | Extra       |
+----+-------------+-------+--------+--------------------------+---------+---------+---------------------+------+-------------+
|  1 | SIMPLE      | a     | index  | PRIMARY,fk_article_user1 | PRIMARY | 4       | NULL                | 8742 | Using where | 
|  1 | SIMPLE      | u     | eq_ref | PRIMARY                  | PRIMARY | 4       | portal.a.user_id    |    1 |             | 
|  1 | SIMPLE      | tl    | ref    | tag_id,link_id,link_id_2 | link_id | 4       | portal.a.article_id |    3 | Using where | 
|  1 | SIMPLE      | t     | eq_ref | PRIMARY                  | PRIMARY | 4       | portal.tl.tag_id    |    1 | Using where | 
+----+-------------+-------+--------+--------------------------+---------+---------+---------------------+------+-------------+ 
```

**表创建**

```
CREATE TABLE `tag` (
  `tag_id` int(11) NOT NULL auto_increment,
  `name` varchar(50) NOT NULL,
  `type` enum('layout','image') NOT NULL,
  `create_dttm` datetime default NULL,
  PRIMARY KEY  (`tag_id`)
) ENGINE=InnoDB AUTO_INCREMENT=43077 DEFAULT CHARSET=utf8 
```

**索引**

```
SHOW INDEX FROM tag_link;
+----------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| Table    | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+----------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| tag_link |          0 | PRIMARY  |            1 | tag_link_id | A         |       42023 |     NULL | NULL   |      | BTREE      |         |
| tag_link |          1 | tag_id   |            1 | tag_id      | A         |       10505 |     NULL | NULL   |      | BTREE      |         |
| tag_link |          1 | link_id  |            1 | link_id     | A         |       14007 |     NULL | NULL   |      | BTREE      |         |
+----------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+

SHOW INDEX FROM article;
+---------+------------+------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| Table   | Non_unique | Key_name         | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+---------+------------+------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| article |          0 | PRIMARY          |            1 | article_id  | A         |        5723 |     NULL | NULL   |      | BTREE      |         |
| article |          1 | fk_article_user1 |            1 | user_id     | A         |           1 |     NULL | NULL   |      | BTREE      |         |
| article |          1 | create_dttm      |            1 | create_dttm | A         |        5723 |     NULL | NULL   | YES  | BTREE      |         |
+---------+------------+------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+ 
```

**最终解决方案** 似乎 MySQL 只是对数据进行了错误的排序。最后，将标签表视为返回 id 的子查询会更快。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T13:39:16.090

似乎 article_id 是文章表的主键。

由于您是按 article_id 分组的，因此 MySQL 需要按该列的顺序返回记录，以便执行 GROUP BY。

可以看到，在没有索引的情况下，它会扫描 article 表中的所有记录，但它们至少是按 article_id 排序的，因此不需要后面的排序。LIMIT 优化可以在这里应用，因为它已经有序，它可以在达到五行后停止。

在使用 tag.name 上的索引的查询中，它不是扫描整个文章表，而是利用索引，但针对标签表，并从那里开始。不幸的是，这样做时，记录必须稍后按 article.article_id 排序才能完成 GROUP BY 子句。无法应用 LIMIT 优化，因为它必须返回整个结果集，然后对其进行排序，以获得前 5 行。

在这种情况下，MySQL 只是猜错了。

如果没有 LIMIT 子句，我猜使用索引会更快，这可能是 MySQL 的猜测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:58:27.483

你的桌子有多大？我在第一次解释中注意到您有一个“使用临时；使用文件排序”，这很糟糕。您的查询可能被转储到磁盘，这使得它比内存查询慢。还要尽量避免使用“select *”，而是查询所需的最少字段。******

# java - 实施作业调度的设计

> ID：10931144
> 
> 赞同：0
> 
> 时间：2012-06-07T11:45:08.967
> 
> 标签：java, scheduling

我正在开发一个需要调度的应用程序（就像 microsoft Outlook 会议重复出现的那个）功能。我们可以每天、每周、每月和每年安排工作，并且在每个时间表下都有变化（例如每月的第二个星期一或每周的每个隔周星期一等）。

它基本上应该像在 Microsoft Outlook 会议安排中一样工作。

我可以用来实现此逻辑的任何指针、链接、建议或任何可用的 api 都会有很大帮助

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:59:40.610

你可能想看看[石英](http://quartz-scheduler.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:12:31.030

我最近在做类似的事情，主要问题是找到本周的第一天，从那里找到所需的星期几相对容易，另一个问题是找到下个月的第一天。

这是获取的代码

*   本周开始（本周的星期一）
*   下周开始（下周一）
*   下个月的开始（下个月的第一天）

    ```
    import java.util.Calendar;
    import java.util.Date;

    // ... 

    public static long getWeekStart()
    {
        //INIT Date
        Calendar cal = Calendar.getInstance();
        cal.clear(Calendar.HOUR_OF_DAY);
        cal.clear(Calendar.MINUTE);
        cal.clear(Calendar.SECOND);
        cal.clear(Calendar.MILLISECOND);

        //get start of this week in milliseconds
        cal.set(Calendar.DAY_OF_WEEK, cal.getFirstDayOfWeek());
        return cal.getTime().getTime();
    }

    public static long getNextWeek()
    {
        //INIT Date
        Calendar cal = Calendar.getInstance();
        cal.clear(Calendar.HOUR_OF_DAY);
        cal.clear(Calendar.MINUTE);
        cal.clear(Calendar.SECOND);
        cal.clear(Calendar.MILLISECOND);

        //get start of this week in milliseconds
        cal.set(Calendar.DAY_OF_WEEK, cal.getFirstDayOfWeek());

        // start of the next week
        cal.add(Calendar.WEEK_OF_YEAR, 1);
        return cal.getTime().getTime();
    }

    public static long getNxtMonthStart()
    {
        Calendar cal = Calendar.getInstance();
        cal.clear(Calendar.HOUR_OF_DAY);
        cal.clear(Calendar.MINUTE);
        cal.clear(Calendar.SECOND);
        cal.clear(Calendar.MILLISECOND);

        // get start of the month
        cal.set(Calendar.DAY_OF_MONTH, 1);

        // get start of the next month
        cal.add(Calendar.MONTH, 1);

        return cal.getTime().getTime();
    } 
    ```

希望这有助于获得一周中的日子。

# mysql - 用于对列部分值进行排序的 SQL 查询

> ID：10931145
> 
> 赞同：2
> 
> 时间：2012-06-07T11:45:17.097
> 
> 标签：mysql, sql

我需要对列的部分值进行排序。

**例如**，我有一个包含列（代码、名称）的表员工。Code列值的格式为DEPT:SR_NO。

我只需要对 Code 列的 SR_NO 值进行排序。

上述场景只是实时场景的示例。

任何建议将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T11:50:30.740

```
SELECT  SUBSTRING_INDEX(code, ':', 1) AS dept
        SUBSTRING_INDEX(code, ':', -1) AS sr_no
FROM    mytable
ORDER BY
        sr_no 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:52:09.600

正则表达式，是的。您还可以执行类似`Order by Right(Name, Len(Name)-Instr(Name, ":"))`的操作，例如提取冒号右侧的所有字符并按此排序。

# python - php 的 strtr 用于 python

> ID：10931150
> 
> 赞同：9
> 
> 时间：2012-06-07T11:45:40.593
> 
> 标签：python, string

php具有以下[`strtr`](http://php.net/manual/en/function.strtr.php) 功能：

```
strtr('aa-bb-cc', array('aa' => 'bbz', 'bb' => 'x', 'cc' => 'y'));
# bbz-x-y 
```

它用相应的值替换字符串中的字典键，并且（重要）不替换已替换的字符串。天真的尝试在 python 中编写相同的内容：

```
def strtr(strng, replace):
    for s, r in replace.items():
        strng = strng.replace(s, r)
    return strng

strtr('aa-bb-cc', {'aa': 'bbz', 'bb': 'x', 'cc': 'y'}) 
```

返回`xz-x-y`不是我们想要的（`bb`再次被替换）。如何更改上述函数，使其行为与 php 对应？

（如果可能的话，我更喜欢没有正则表达式的答案）。

更新：这里有一些很好的答案。我对它们进行了计时，发现对于短字符串，Gumbo 的版本似乎是最快的，在较长的字符串上，获胜者是`re`解决方案：

```
# 'aa-bb-cc'
0.0258 strtr_thg
0.0274 strtr_gumbo
0.0447 strtr_kojiro
0.0701 strtr_aix

# 'aa-bb-cc'*10
0.1474 strtr_aix
0.2261 strtr_thg
0.2366 strtr_gumbo
0.3226 strtr_kojiro 
```

我自己的版本（稍微优化了 Gumbo 的）：

```
def strtr(strng, replace):
    buf, i = [], 0
    while i < len(strng):
        for s, r in replace.items():
            if strng[i:len(s)+i] == s:
                buf.append(r)
                i += len(s)
                break
        else:
            buf.append(strng[i])
            i += 1
    return ''.join(buf) 
```

完整的代码和时间：[https ://gist.github.com/2889181](https://gist.github.com/2889181)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T12:40:10.063

以下使用正则表达式来做到这一点：

```
import re

def strtr(s, repl):
  pattern = '|'.join(map(re.escape, sorted(repl, key=len, reverse=True)))
  return re.sub(pattern, lambda m: repl[m.group()], s)

print(strtr('aa-bb-cc', {'aa': 'bbz', 'bb': 'x', 'cc': 'y'})) 
```

与 PHP 的版本一样，它优先选择更长的匹配项。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-07T12:51:38.343

```
def strtr(strng, replace):
    if replace and strng:
        s, r = replace.popitem()
        return r.join(strtr(subs, dict(replace)) for subs in strng.split(s))
    return strng

j=strtr('aa-bb-cc', {'aa': 'bbz', 'bb': 'x', 'cc': 'y'})
assert j=='bbz-x-y', j 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T12:10:53.897

这是一个简单的算法：

使用索引逐个字符地遍历原始字符串，并检查每个索引是否有一个搜索字符串等于从当前索引开始的字符串。如果找到匹配项，则将替换项推送到缓冲区中，然后按匹配字符串的长度继续索引。如果未找到匹配项，则将索引加一。最后，将缓冲区中的字符串连接成一个字符串。

```
def strtr(strng, replace):
    buffer = []
    i, n = 0, len(strng)
    while i < n:
        match = False
        for s, r in replace.items():
            if strng[i:len(s)+i] == s:
                buffer.append(r)
                i = i + len(s)
                match = True
                break
        if not match:
            buffer.append(strng[i])
            i = i + 1
    return ''.join(buffer) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-07T11:47:33.470

[`str.translate`](http://docs.python.org/library/stdtypes.html#str.translate)是等价的，但只能映射到单个字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-21T11:30:55.260

该线程上的答案已经过时了。开始了...

### 选项 #1：使用 str.format() 函数来处理这个问题：

```
"Hello there {first_name} {last_name}".format(first_name="Bob", last_name="Roy") 
```

### 选项 #2：使用模板类

```
from string import Template
t = Template('Hello there $first_name $last_name')
t.substitute(first_name="Bob", last_name="Roy") 
```

参考： [Python 字符串格式化最佳实践](https://realpython.com/python-string-formatting/)

# date - 不确定 get(Calendar.DAY_OF_WEEK) 返回什么

> ID：10931152
> 
> 赞同：2
> 
> 时间：2012-06-07T11:45:51.667
> 
> 标签：date, calendar, get, dayofweek, gregorian-calendar

我的问题可以通过以下场景轻松创建：

```
 //create a gregorian calendar object that set the date and time as 4th June 2012 at 10:30PM
 Calendar calendar = new GregorianCalendar(2012, 6, 4, 22, 30);

 //when I print out these:
 System.out.println(calendar.get(Calendar.DAY_OF_WEEK));
 System.out.println(calendar.get(Calendar.MINUTE));
 System.out.println(calendar.get(Calendar.HOUR));
 System.out.println(calendar.get(Calendar.DATE));
 System.out.println(calendar.get(Calendar.MONTH));
 System.out.println(calendar.get(Calendar.YEAR));

 //output reads as:
 4
 30
 10
 4
 6
 2012

 //so does calendar.get(Calendar.DAY_OF_WEEK) == calendar.get(Calendar.DATE) ??? 
```

为了让每个人都清楚 2012 年 6 月 4 日是星期一，那么 calendar.get(Calendar.DAY_OF_WEEK) 不应该在一周的第一天返回 0 吗？

感谢您的所有帮助和关注，还请验证您所指的来源。

用户1442080

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T11:57:17.387

java Calendar 类中的月份是从 0 开始的。所以六月是第5个月。

您实际上创建了一个表示 7 月 4 日的对象，这恰好是一个星期三，也就是该周的第四天。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-11T07:23:51.587

应始终查找*Calendar.{field}*返回的值，例如 Calendar.SUNDAY、Calendar.MONDAY、Calendar.JANUARY、Calendar.MARCH 等。这是因为，*Calendar.{field}*返回的值取决于创建 Calendar 实例时指定的 TimeZone。您可以通过创建两个具有不同时区的日历实例来尝试此操作：

```
Calendar.getInstance("BST") 
```

和

```
Calendar.getInstance() // default timezone 
```

现在尝试获取`calendar.get(Calendar.DAY_OF_WEEK)`which 将为这两个实例返回不同的整数值。

# javascript - 一种使用 javascript 为活动源聚合和分组项目的方法

> ID：10931153
> 
> 赞同：5
> 
> 时间：2012-06-07T11:45:54.443
> 
> 标签：javascript, grouping, aggregate-functions, underscore.js, aggregation

我有一个活动流项目列表，我希望将类似的项目组合在一起。例如，不应有 4 个条目说“Joe 喜欢你的快乐帖子”、“Sarah 喜欢你的快乐帖子”、“Bob 喜欢你的快乐帖子”、“Tom 喜欢你的快乐帖子”，而应该有一个说“Joe 、Sarah 和另外 2 人点赞了您的快乐帖子”。当项目被聚合时，聚合后的帖子将使用其部分的最新时间戳。

活动流不是无穷无尽的，仅包含过去一周的项目，因此所有符合名词（noun.activityType + noun.id）和动词属性的项目都应分组在一起。每个活动项目都有一个演员（谁做的）、目标（将它发布到谁的提要）、动词（演员做了什么）和名词（动词作用于什么对象）。

我已经把这个测试数据集放在 jsfiddle 上供你们玩：

[http://jsfiddle.net/yu2P8/1/](http://jsfiddle.net/yu2P8/1/)

```
{
        "pts": 0,
        "verb": "follow",
        "target": "mike",
        "actor": "test01",
        "title": "test01 has started following you",
        "published": "2012-06-04T22:34:01.914Z",
        "_id": "4fcd37d9c7f1f40100000d7d",
        "noun": {
            "id": "mike",
            "activityType": "profile",
            "title": null
        }
} 
```

一种策略是在创建活动项时聚合服务器端，但我想探索在客户端使用下划线之类的库来执行此操作，看看它是否可行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T18:48:20.547

所以我使用下划线组和地图解决了这个问题。我首先使用名词和动词作为键来使用下划线组。然后我使用下划线 reduce 函数将结果合并到一个条目中。

```
var groupedResults = _.groupBy(data, function(val){
  return val.noun.id + val.noun.activityType + val.verb;
});

function reducer(activities, key) {
  var reduction = _.reduce(activities, function(a, b){
      if (a && a.actors && !_.include(a.actors, b.actor))
          a.actors.push(b.actor);
      else
          a.actors = [b.actor];
      a.published = a.published < b.published ? b.published : a.published;
      return a;

    }, activities[0]);

  reduction.pronoun = getActorsSummaryString(reduction);
  reduction.title = summarizeTitle(reduction);

  return reduction;
}

finalResults = sortByRecent(_.map(groupedResults, reducer)); 
```

# java - 仿射变换兼容性

> ID：10931154
> 
> 赞同：0
> 
> 时间：2012-06-07T11:45:56.317
> 
> 标签：java, animation

```
 public void draw(Graphics2D g) {
        // draw background
        g.drawImage(bgImage, 0, 0, null);
        g.drawImage(bgImage, 700, 0, null);
        g.drawImage(bgImage, 0, 500, null);
        g.drawImage(bgImage, 700, 500, null);

        AffineTransform transform = new AffineTransform();
        for (int i = 0; i < NUM_SPRITES; i++) {
            Sprite sprite = sprites[i];

            // translate the sprite
            transform.setToTranslation(sprite.getX(),
                sprite.getY());

            // if the sprite is moving left, flip the image
            if (sprite.getVelocityX() < 0) {
                transform.scale(-1, 1);
                transform.translate(-sprite.getWidth(), 0);
            }

            // draw it
            g.drawImage(sprite.getImage(), transform, null);
        }
    }
} 
```

我正在查看此类中的绘制方法。该方法通过动画循环调用，它在屏幕上绘制一组动画精灵，根据计时器将动画中的正确帧传递给该方法。精灵也以随机生成的速度在屏幕上移动，从帧的边缘反弹。根据它们是向左还是向右移动，draw 方法会转换图像，使精灵朝向正确的方向。所有这些转换信息都包含在 drawImage 方法的转换中，我习惯于将其视为 g.drawImage(Image, x, y, null); 虽然显然你不能在这里这样做，因为你会失去图像翻转功能。有没有办法做到这一点？有没有办法转换图像比例但通过坐标设置其位置？

我问是因为转换是一种处理器密集度更高的活动，如果需要同时激活大量精灵，它可能真的会减慢一切。奖金问题：考虑到现代系统的力量，这是一个合理的担忧还是我应该不太担心。

# ios - UIGraphicsBeginImageContextWithOptions 和多线程

> ID：10931155
> 
> 赞同：12
> 
> 时间：2012-06-07T11:46:12.923
> 
> 标签：ios, multithreading, uikit, core-graphics

我对`UIGraphicsBeginImageContextWithOptions`线程有点困惑，因为根据[UIKit 函数参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html) `UIGraphicsBeginImageContextWithOptions`应该只在主线程上调用。当被调用时，它会创建一个基于位图的上下文，可以使用 CoreGraphics 的函数或使用 - `drawInRect:`for `UIImage`、`-drawInRect:withFont:`for`NSString`等方法来操作。对于 CoreGraphics 的绘图，一切都很清楚 - 您将一个 CGContextRef 参数传递给每个函数，但 UIKit 绘图方法使用堆栈中的当前上下文。[在iOS 4.0 中的新增功能](http://developer.apple.com/library/ios/#releasenotes/General/WhatsNewIniPhoneOS/Articles/iPhoneOS4.html)的发行说明中写道

> **在 UIKit 中绘制到图形上下文现在是线程安全的。**具体来说：
> - 用于访问和操作图形
> 上下文的例程现在可以正确处理驻留在不同线程上的上下文。
> - 字符串和图像绘制现在是线程安全的。
> - 现在可以安全地在多个线程中使用颜色和字体对象。

到现在为止还挺好。有趣的部分是我有一个项目，我在其中做一些密集的绘图并通过创建上下文来创建多个图像`UIGraphicsBeginImageContextWithOptions`，但是当这些操作碰巧更耗时并且我只是将绘图移动到后台线程中并准备好显示时它们在屏幕上带有一些动画，一切正常 - 没有崩溃，没有泄漏。图像按预期绘制，似乎`UIGraphicsBeginImageContextWithOptions`为后台线程创建了一个上下文，一切似乎都很好。
所以我的问题是：
- 为什么`UIGraphicsBeginImageContextWithOptions`只需要在主线程上调用，因为它似乎在后台运行良好？-
如何使用`UIImage``-drawInRect:`方法例如，在后台线程中，我没有当前上下文并且我似乎无法创建一个，因为我不能`UIGraphicsBeginImageContextWithOptions`在那里调用？
- 使用 UIKit 的方法处理背景图像的正确方法是什么（我知道我也可以使用`CGBitmapContextCreate`，但它既不会将创建的上下文推送到上下文堆栈中，我似乎也无法自己完成以使用`-drawInRect:`方法`UIImage`）？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-08T18:39:23.507

因此，经过几天的调查，如何操作 UIKit 上下文是线程安全的，但您似乎无法在主线程以外的线程中创建一个，因为`UIGraphicsBeginImageContextWithOptions`“应该只在主线程上调用”，但是这样做仍然非常有效，并且在阅读了有关该主题的一些小帖子并与 Apple 开发者论坛上的其他人讨论之后，我可以清楚地说明，文档中所说的关于`UIGraphicsBeginImageContextWithOptions`，`UIGraphicsPushContext`并且`UIGraphicsPopContext`是**错误**的，并且可以调用这些方法并且在另一个线程中使用的上下文没有问题。所以`UIGraphicsBeginImageContextWithOptions`和是**线程安全**`UIGraphicsPushContext`的。`UIGraphicsPopContext`

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:21:49.950

部分答案：`UIGraphicsPushContext`用于将您自己的 CG 上下文推送到“UIKit 上下文”堆栈的顶部，并且所有内容（来自该线程，正如我解释 Apple 的文档）将绘制到那个。不要忘记使用`UIGraphicsPopContext`从 UIKit 上下文堆栈中弹出它。

这适用于所有 UIKit 绘图操作；例如绘图`UIImage`，就像你问的那样。推送上下文，绘制，然后弹出上下文。**

# c# - c#中的正则表达式

> ID：10931157
> 
> 赞同：2
> 
> 时间：2012-06-07T11:46:25.557
> 
> 标签：c#, regex

我正在尝试验证 texbox 以允许数字和字母，但不能仅允许字母，例如 13492M

我正在使用 C# 正则表达式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T11:49:01.913

`^[A-Za-z]*\d[A-Za-z\d]*$`应该这样做。（可能是一些字母，然后是一个数字，然后是更多的字母或数字。）

（编辑添加开始/结束匹配。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:51:18.593

简单地，

```
Pattern = "^[a-zA-Z0-9]*[0-9]+[a-zA-Z0-9]*$" 
```

**细节 ：**

*   开始。`^`
*   零个或多个混合字母数字。`[a-zA-Z0-9]*`
*   一个或多个数字。`[0-9]+`
*   零个或多个混合字母数字。`[a-zA-Z0-9]*`
*   结尾。`$`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T11:52:34.673

使用 maskedTextBox，它使用属性“mask”来验证你想要的表达式。因此，您只需将 RegEx 添加到您的 maskedTextBox 中，您不必每次都在代码中进行验证（它会自动检查您的 RegEx）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T11:54:19.040

这个正则表达式应该可以正常工作：

```
^[A-Za-z]*[0-9]+[A-Za-z]*$ 
```

此正则表达式将允许数字或字母+数字。只是字母会失败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T11:58:28.987

这个怎么样：

```
 ([0-9]+[a-zA-Z]+ | [a-zA-Z]+[0-9]+)[a-zA-Z0-9]* 
```

（先是数字，然后是字母或先是字母，然后是数字）至少一次或多次，然后是字母和数字，这是可选的

# jquery - 使用 jQuery postMessage 插件的 iframe 跨域消息传递

> ID：10931158
> 
> 赞同：10
> 
> 时间：2012-06-07T11:46:31.510
> 
> 标签：jquery, jquery-plugins, iframe, cross-domain, postmessage

我正在尝试使用以下插件在子 iframe 与其父级之间进行通信：

[http://benalman.com/projects/jquery-postmessage-plugin/](http://benalman.com/projects/jquery-postmessage-plugin/)

我可以按照这个例子将孩子的消息发布给父母，但不能反过来，我真的需要能够以两种方式进行交流。

父级上的代码如下：

```
var origin = document.location.protocol + '//' + document.location.host,
    src = origin + '/Custom/Ui/Baseline/html/iframe-data-cash.htm#' + encodeURIComponent(document.location.href);

$(function () {

    var $holder = $('#iframe'),
        height,
        $iframe = $('<iframe src="' + src + '" id="data-cash-iframe" width="100%" scrolling="no" allowtransparency="true" seamless="seamless" frameborder="0" marginheight="0" marginwidth="0"></iframe>');

    // append iframe to DOM
    $holder.append($iframe);

});

$(window).load(function () {
    $.postMessage(
        'hello world',
        src,
        parent.document.getElementById('data-cash-iframe').contentWindow
    );
}); 
```

而孩子身上的代码如下：

```
$(function () {

    var parentURL = decodeURIComponent(document.location.hash.replace(/^#/, ''));

    $.receiveMessage(
        function (e) {
            alert(e.data);
        },
        parentURL
    );

}); 
```

我真的不明白为什么这不起作用，我迫切需要帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T17:50:26.360

从来没有使用过那个插件，不能说它有什么问题，但是，或者你可以使用 HTML 5 postMessage。

由于您想向 iframe 发送数据，因此请在其上注册一个事件侦听器：

```
window.addEventListener('message', receiver, false);

function receiver(e) {
   if (e.origin == '*') {
     return;
   } else {
     console.log(e.data);
   }
} 
```

请务必根据您的受信任域检查来源以防止损坏，而不是接受所有的“*”。

现在你可以打电话

```
message = "data";
iframe = document.getElementById('iframe');  
iframe.contentWindow.postMessage(message, '*'); 
```

同样，您应该使用目标域更改“*”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-31T00:59:09.823

```
1.sendPage
<script type='text/javascript'>
var sendpost = document.getElementById('wrapper').scrollHeight;
var target = parent.postMessage ? parent : (parent.document.postMessage ?   parent.document : undefined); 
target.postMessage(sendpost,'*');
</script>
2\. real iframe load page
function handling(e){
                sendIframeHeight = e.data;
}

// <= ie8
if (!window.addEventListener) {
                window.attachEvent("onmessage", handling);
}else{ // > ie8
                window.addEventListener('message', handling, false);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-14T20:41:51.713

我有类似的要求，最终使用 postMessage 将数据从孩子发送到父母。然后，为了将数据从父级发送到子级，我通过 iframe 的 src 属性在查询字符串中传递了数据。通过这样做，我可以解析查询字符串并在我的子页面中检索数据。

# c# - 如何在 C# 中读取 SQL 二进制字段

> ID：10931159
> 
> 赞同：3
> 
> 时间：2012-06-07T11:46:31.853
> 
> 标签：c#, sql, linq, binary

> **可能重复：**
> [SELECT @@DBTS using Linq to SQL](https://stackoverflow.com/questions/528486/select-dbts-using-linq-to-sql)
> [Sql binary to c# - How to get SQL binary equivalent of binary in c#](https://stackoverflow.com/questions/10926192/sql-binary-to-c-sharp-how-to-get-sql-binary-equivalent-of-binary-in-c-sharp)

我有一个带有一个二进制列的 SQL 表。它有一些二进制格式的数据。

例如 0x9A8B9D9A002020202020202020202020

我正在使用 LINQ 上下文从该表中获取数据。任何人都可以帮助我得到这个。这是我正在使用的示例代码，

```
IEnumerable<byte[]> query = context
                .ExecuteQuery<byte[]>("select empPWD from Employee where employeeId = E32"); 
```

当我运行此代码时，它会出现错误，例如需要进行类似的映射。

确切的错误信息；

> 类型“System.Byte[]”必须声明一个默认（无参数）构造函数，以便在映射期间构造。

如果有人知道这一点，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:26:59.527

你能把它重构为：

```
IEnumerable<System.Data.Linq.Binary> query = 
           context.Employees.Where(e => e.employeeId == "E32").Select(e => e.empPWD); 
```

我认为这应该可行（假设您的上下文包含一个雇员表类）。要访问 byte[]，请对 System.Data.Linq.Binary 类型的每个实例使用 ToArray()。

# ruby-on-rails - Rails 3.1 - 跨三个（或更多）模型的简单搜索？

> ID：10931162
> 
> 赞同：0
> 
> 时间：2012-06-07T11:46:44.960
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我想对三个模型进行简单的搜索：

```
class Release < ActiveRecord::Base
  has_many :artist_releases
  has_many :artists, :through => :artist_releases  
  has_many :products, :dependent => :destroy     
end

class Product < ActiveRecord::Base
  belongs_to :release
  has_many :artists, :through => :releases        
end

class Artist < ActiveRecord::Base
  has_many :artist_releases
  has_many :releases, :through => :artist_releases
end 
```

在我的产品控制器中，我可以使用以下方法成功呈现跨版本和产品搜索的产品列表：

```
@products = Product.find(:all, :joins => :release, :conditions => ['products.cat_no LIKE ? OR releases.title LIKE ?', "%#{params[:search]}%","%#{params[:search]}%"]) 
```

我真的需要能够搜索艺术家。我该怎么做呢？理想情况下，我需要在产品控制器中使用它，因为它是我需要显示的产品列表。

我试过添加 :joins => :artist 及其变体，但似乎没有一个工作。

我知道有像 Sphinx 这样的选项可以进行完整搜索，但现在我只需要这种简单的方法来工作。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:16:07.227

if you only want products back, just add both joins:

```
@products = Product.joins(:release,:artists).where('products.cat_no LIKE :term OR releases.title LIKE :term OR artists.name LIKE :term', :term => "%#{params[:search]}%").all 
```

You may also need group_by to get distinct products back.

if you want polymorphic results, try 3 separate queries.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:08:28.690

我知道我建议的是一种简单的方法（可能不是最有效的），但它会完成你的工作：

我会在您的产品模型中创建一个类似于以下的方法：

```
def find_products_and_artists
  results = []
  Product.find(:all, :conditions => ['products.cat_no LIKE ?', "%#{params[:search]}%"]).each do |prod|
    results << prod
  end
  Release.find(:all, :conditions => ['releases.title LIKE ?', "%#{params[:search]}%"]).each do |rel|
    results << rel
  end
  Artist.find(:all, :conditions => ['artist.name LIKE ?', "%#{params[:search]}%"]).each do |art|
    results << art
  end
  return results
end 
```

然后，当您调用该方法并将返回的结果存储在变量中（例如`results`）时，您可以通过执行检查每个元素是什么对象

```
results[i].class 
```

并且可以使您的代码针对每个对象做出相应的行为。

希望我有所帮助。

# jquery - 如何使用 jsplumb 将列表或按钮元素从其父 div 拖动到另一个 div

> ID：10931164
> 
> 赞同：0
> 
> 时间：2012-06-07T11:47:10.503
> 
> 标签：jquery, jsplumb

我有一个 div 元素，它由列表元素组成，例如：java、ror、.NET。

我想拖动一个特定的列表，假设只有 java 从它的当前 div 元素到另一个 div 元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:57:17.993

你应该看看[jQuery UI](http://jqueryui.com)。特别是放入[Droppable](http://jqueryui.com/demos/droppable/)。那里描述的[购物车](http://jqueryui.com/demos/droppable/#shopping-cart)示例，它可能是您正在寻找的东西。

# java - 从 RCP 应用程序运行 SWT

> ID：10931166
> 
> 赞同：0
> 
> 时间：2012-06-07T11:47:14.617
> 
> 标签：java, eclipse, swt, eclipse-rcp

我可以在 rcp 应用程序中运行我的 swt 代码吗，当我在 swt 中运行时，它在尝试从 rcp 应用程序获取时运行良好：

`Exception in thread "main" java.lang.IllegalArgumentException: Argument cannot be null at org.eclipse.swt.SWT.error(SWT.java:4263)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:12:33.403

Eclipse 基于 SWT，因此您可以重用您的代码。但是你不能重用你的 GUI。您必须创建一个`View`。试着google一下，有很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:41:17.207

您必须首先在 plugin.xml 中定义一个视图，然后您可以重用您的 SWT 代码而只需很少的修改。

# image - 在 zend-framework 上调整图像大小

> ID：10931167
> 
> 赞同：1
> 
> 时间：2012-06-07T11:47:17.917
> 
> 标签：image, zend-framework, resize

我徘徊在 Zend Framework 中是一些特殊的图像调整工具吗？或者我应该使用这样的代码：

```
$upload = new Zend_File_Transfer_Adapter_Http();
try {
    $upload->receive();
} catch (Zend_File_Transfer_Exception $e) {
    $e->getMessage();
}
$im_org = imageCreateFromJpeg($upload);
$im_bg = imageCreateTrueColor(300, 300);
imageCopyResampled($im_bg, $im_org, 0, 0, 0, 0, 300, 300, imageSX($im_org), imageSY($im_org));
imageJpeg($im_bg, "pict/" . $id . "_bg.jpg", 100);
imagedestroy($im_org);
imagedestroy($im_bg); 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T12:43:01.890

你可以试试[Zend_Filter_ImageSize](https://github.com/polycaster/Zend_Filter_ImageSize)

**最简单的例子：**

```
<?php
require_once 'Zend/Filter/ImageSize.php';
$filter = new Zend_Filter_ImageSize();
$output = $filter->setHeight(100)
    ->setWidth(200)
    ->filter('./orig.jpg');

header('Content-Type: image/jpeg');
$fh = fopen($output, 'r');
fpassthru($fh);
fclose($fh);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T10:44:53.343

我建议使用一个可靠的库，例如[来自 verot.net 的 class.upload.php](http://www.verot.net/php_class_upload.htm)。

它应该很容易集成到 Zend Framework 中，您可以[在此博客文章中找到更复杂的示例集成](http://blog.paladise.ch/dynamic-image-resize-zend-framework-integration/)。

# iphone - 如何在 IOS 中检查 zip 文件是否受密码保护？

> ID：10931168
> 
> 赞同：4
> 
> 时间：2012-06-07T11:47:21.743
> 
> 标签：iphone, ios, ipad, zip, ziparchive

我正在使用[ZipArchive](https://code.google.com/p/ziparchive/)在 iOS 应用程序中提取 zip 文件，但我想在打开文件之前知道它是否受密码保护，以便我可以将密码传递给 UnZipOpenFile 函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T16:57:00.390

zip 文件的密码不记录在标题中，它记录在 zip 中的单个文件条目中

所以你需要检查 zip 中的所有文件

将此功能添加到 ZipArchive

```
-(BOOL) UnzipIsEncrypted {

    int ret = unzGoToFirstFile( _unzFile );
    if (ret == UNZ_OK) {
        do {
            ret = unzOpenCurrentFile( _unzFile );
            if( ret!=UNZ_OK ) {
                return NO;
            }
            unz_file_info   fileInfo ={0};
            ret = unzGetCurrentFileInfo(_unzFile, &fileInfo, NULL, 0, NULL, 0, NULL, 0);
            if (ret!= UNZ_OK) {
                return NO;
            }
            else if((fileInfo.flag & 1) == 1) {
                return YES;
            }

            unzCloseCurrentFile( _unzFile );
            ret = unzGoToNextFile( _unzFile );
        } while( ret==UNZ_OK && UNZ_OK!=UNZ_END_OF_LIST_OF_FILE );

    }

    return NO;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T10:04:46.880

实际上，我在 zipArchive 中找不到检测文件是否已加密的功能，因此我检查了文件头以检查它是否受密码保护，如以下链接所述：

[http://secureartisan.wordpress.com/2008/11/04/analysis-of-encrypted-zip-files/](http://secureartisan.wordpress.com/2008/11/04/analysis-of-encrypted-zip-files/)

```
-(BOOL) IsEncrypted:(NSString*)path
{
    NSData* fileData = [NSData dataWithContentsOfFile:path];
    NSData* generalBitFlag = [fileData subdataWithRange:NSMakeRange(6, 2)];
    NSString* genralBitFlgStr = [generalBitFlag description];

    if ([genralBitFlgStr characterAtIndex:2]!='0')
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

谢谢大家

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T16:13:42.397

我自己没有使用过 ZipArchive，但是通过查看代码，可以首先使用`UnzipOpenFile`没有密码参数的变体并尝试调用`UnzipFileTo`. 如果失败，您重新打开，但输入密码并`UnzipFileTo`再次调用。这样做的问题是您将无法区分无效的 zip 文件和使用无效的密码。

如果您真的需要知道文件是否已加密，您可以自己添加功能（未经测试的代码）：

将此添加到`unzip.c`minizip 中：

```
extern int ZEXPORT unzIsEncrypted (file)
    unzFile file;
{
   return ((unz_s*)file)->encrypted;
} 
```

这要`unzip.h`：

```
extern int ZEXPORT unzIsEncrypted OF((unzFile file)); 
```

这要`ZipArchive.mm`：

```
- (BOOL)ZipIsEncrypted {
    return unzIsEncrypted(_unzFile);
} 
```

这要`ZipArchive.h`：

```
- (BOOL)ZipIsEncrypted; 
```

并在调用后使用`UnzipFileTo`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-25T11:29:46.560

我正在解压缩超过 50mb 的加密文件，所以在 NSData 中加载完整文件对我来说是个问题。所以修改了答案，我用了这个：

```
-(BOOL) IsEncrypted:(NSString*)path

{

    NSInteger chunkSize = 1024     //Read 1KB chunks.
    NSFileHandle *handle = [NSFileHandle fileHandleForReadingAtPath:path];
    NSData *fileData = [handle readDataOfLength:chunkSize];
    NSData* generalBitFlag = [fileData subdataWithRange:NSMakeRange(6, 2)];
    NSString* genralBitFlgStr = [generalBitFlag description];

    if ([genralBitFlgStr characterAtIndex:2]!='0')
    {
        return true;
    }
    else
    {
        return false;
    }

} 
```

# css - 这是有效的 CSS 吗？为什么或者为什么不？

> ID：10931169
> 
> 赞同：2
> 
> 时间：2012-06-07T11:47:26.067
> 
> 标签：css, ruby-on-rails-3, heroku

```
.9-bucks {
    font-size:  60px;
} 
```

这是我将应用推送到 Heroku 时遇到的错误：

```
ActionView::Template::Error (Invalid CSS after ".": expected class name, was "9-bucks {"
2012-06-07T11:42:45+00:00 app[web.1]:   (in /app/app/assets/stylesheets/application.css)): 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T11:49:38.543

CSS 选择器名称（ID 或类名）不能以数字开头... [http://css-tricks.com/ids-cannot-start-with-a-number/](http://css-tricks.com/ids-cannot-start-with-a-number/)

尝试替换为`.nine-bucks { }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:50:07.137

我不认为 css 类或 ID 名称可以以数字开头。您是否尝试过使用“九”而不是“9”？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T11:50:48.497

> W3C 关于在 css 中命名类而不在类名的第一个位置使用数字的参考。最好的办法是只使用一个字母字符作为类名 (az) 中的第一个字母。之后您可以使用数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T15:14:27.093

是的，将您的**html** - **class="9-bucks"**更改为**class="nine-bucks"**

并更改**css**文件 - **.nine-bucks{ // }**

# jquery - 专门用于键盘“可访问模式”的 jquery 文件

> ID：10931176
> 
> 赞同：0
> 
> 时间：2012-06-07T11:47:45.737
> 
> 标签：jquery, accessibility

我想包含几个特定于我设置的“辅助功能模式”的 js 文件。这些文件检测键盘动作并替换许多鼠标功能。

有没有一种好的/直观的方法来做到这一点？我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T17:28:29.550

为什么不默认添加可访问性？特殊模式类似于 1950-1960 年代美国民权运动期间的分离但平等的心态。事情进展得不太顺利。我只是让你的事件监听器监听鼠标操作和按键。

如果您仍想使用单独模式，只需将链接作为页面上的第一个项目，类似于仅键盘。几点注意事项：

1.  如果您打算通过 css 将其推离屏幕，请确保使用 :focus 将其编码显示在屏幕上。为什么？只使用键盘的人并不意味着他们使用语音输出。他们可能有不能使用鼠标的情况。
2.  确保链接是通过会话或 cookie 设置的，因为按页面设置链接会让用户感到厌烦。
3.  确保链接出现在**每个**页面上，而不是只出现在主页上

# asp.net - 需要正则表达式来验证 dd-MMM-yyyy 格式的日期

> ID：10931179
> 
> 赞同：8
> 
> 时间：2012-06-07T11:47:57.483
> 
> 标签：asp.net, regex

我不是编写正则表达式的专家，所以需要你的帮助。我想以“dd-MMM-yyyy”格式验证日期，即 2012 年 6 月 7 日。我在 asp.net 中使用 RegularExpressionValidator。

任何人都可以帮我提供表达吗？

感谢您分享您的时间。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-07T11:55:17.107

使用 DatePicker 可能是最好的方法。但是，由于这不是您所要求的，所以这里有一个选项（尽管它区分大小写）：

```
^(([0-9])|([0-2][0-9])|([3][0-1]))\-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\-\d{4}$ 
```

此外，这里有一个可以轻松测试正则表达式的地方： [http ://www.regular-expressions.info/javascriptexample.html](http://www.regular-expressions.info/javascriptexample.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-07T11:54:23.533

正则表达式，当天没有前导零。

```
^\d{1,2}-[a-zA-Z]{3}-\d{4}$ 
```

**用当天的前导零**更新正则表达式。****

 **```
^\d{2}-[a-zA-Z]{3}-\d{4}$ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T11:58:05.733

它不是正则表达式，但您可以使用内置[DateTime.TryParseExact](http://msdn.microsoft.com/en-us/library/ms131044.aspx)函数来验证您的日期时间字符串

```
DateTime dateTime;
string toValidate = "01-Feb-2000";

bool isStringValid = DateTime.TryParseExact(
    toValidate,
    "dd-MMM-yyyy",
    CultureInfo.InvariantCulture,
    DateTimeStyles.None,
    out dateTime); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-21T14:59:43.433

公认的解决方案允许将“00”作为日期，因此这里有一个解决方法：

```
^(([1-9])|([0][1-9])|([1-2][0-9])|([3][0-1]))\-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\-\d{4}$ 
```

注释/例外：

1.注意区分大小写的问题。例如。'DEC' 不会通过，而 'Dec' 会通过。您可能希望在测试之前将正则表达式字符串和测试字符串转换为小写（如果您的应用程序允许）。

2.这不会捕捉到不存在的日子，如2月30日、6月31日等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-16T10:27:56.010

```
"\d{4}\d{2}\d{2}|\d{2}/\d{2}/\d{4}|\d{2}.\d{2}.\d{4}|\d{2}\-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)|(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-\d{2}\-\d{4}|\d{4}-\d{2}-\d{2}" 
```

这些格式是`mm.dd.yyyy`, `d-MMM`,`mm.dd.yyyy`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T12:07:44.627

另一个想法是尝试这个（类似于 user1441894 的想法）：

```
var x = DateTime.Parse("30-Feb").GetDateTimeFormats(); 
```

我昨天学会了使用它（用于不同的目的）。所以试着抓住这个语句来处理日期的有效性/无效性:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-28T12:33:49.937

```
"^(([1-9]|0[1-9]|1[0-9]|2[1-9]|3[0-1])[-]([JAN|FEB|MAR|APR|MAY|JUN|JULY|AUG|SEP|OCT|NOV|DEC])[-](d{4}))$" 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-06-07T12:55:02.353

```
using System.Text.RegularExpressions

private void fnValidateDateFormat(string strStartDate,string strEndDate)
{
    Regex regexDt = new Regex("(^(((([1-9])|([0][1-9])|([1-2][0-9])|(30))\\-([A,a][P,p][R,r]|[J,j][U,u][N,n]|[S,s][E,e][P,p]|[N,n][O,o][V,v]))|((([1-9])|([0][1-9])|([1-2][0-9])|([3][0-1]))\\-([J,j][A,a][N,n]|[M,m][A,a][R,r]|[M,m][A,a][Y,y]|[J,j][U,u][L,l]|[A,a][U,u][G,g]|[O,o][C,c][T,t]|[D,d][E,e][C,c])))\\-[0-9]{4}$)|(^(([1-9])|([0][1-9])|([1][0-9])|([2][0-8]))\\-([F,f][E,e][B,b])\\-[0-9]{2}(([02468][1235679])|([13579][01345789]))$)|(^(([1-9])|([0][1-9])|([1][0-9])|([2][0-9]))\\-([F,f][E,e][B,b])\\-[0-9]{2}(([02468][048])|([13579][26]))$)");

    Match mtStartDt = Regex.Match(strStartDate,regexDt.ToString());
    Match mtEndDt   = Regex.Match(strEndDate,regexDt.ToString());
    if (mtStartDt.Success && mtEndDt.Success)
    {
            //piece of code
    }
} 
```**

# jquery - jQuery手风琴菜单：设置活动类

> ID：10931186
> 
> 赞同：1
> 
> 时间：2012-06-07T11:48:49.057
> 
> 标签：jquery, accordion, jquery-ui-accordion

我有一个手风琴菜单：

```
<ul id="menu">
    <li>
        <a href="#" class="highmenu">Menu1</a>
        <ul class="sub">
            <li class="submenulink">Menu1Link1</li>
            <li class="submenulink">Menu1Link2</li>
        </ul>
    </li>
    <li>
        <a href="#" class="highmenu">Menu2</a>
        <ul class="sub">
            <li class="submenulink">Menu2Link1</li>
            <li class="submenulink">Menu2Link2</li>
        </ul>
    </li>
</ul> 
```

这是我正在使用的 jQuery 脚本：

```
$(document).ready(function() {
    var pathname = window.location.pathname;
    $("#menu ul").hide();
    $("#menu a[href='" + pathname + "']").parents(".sub").show();
    $("#menu li a").click(function() {
        var checkElement = $(this).next();
        if ((checkElement.is("ul")) && (checkElement.is(":visible"))) {
            return false;
        }
        if ((checkElement.is('ul')) && (!checkElement.is(':visible'))) {
            $("#menu ul:visible").slideUp("normal");
            checkElement.slideDown("normal");
            return false;
        }
    });
}); 
```

我想要的是，当特定子打开时，相应的高级菜单将设置为`highmenu active`类，当子隐藏时，活动类将被删除。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:15:33.480

这个怎么样。每次单击链接时，从所有链接中删除所有活动类，然后仅将其应用于适当的类：

```
var pathname = window.location.pathname;
$("#menu ul").hide();
$("#menu a[href='" + pathname + "']").parents(".sub").show();
$("#menu li a").click(function() {

    $("#menu li a").removeClass("active");
    $(this).addClass("active");

    var checkElement = $(this).next();
    if ((checkElement.is("ul")) && (checkElement.is(":visible"))) {
        return false;
    }
    if ((checkElement.is('ul')) && (!checkElement.is(':visible'))) {
        $("#menu ul:visible").slideUp("normal");
        checkElement.slideDown("normal");
        return false;
    }
});​ 
```

在这里工作小提琴：http: [//jsfiddle.net/jKGNA/](http://jsfiddle.net/jKGNA/)

# symfony - 保存一对一关系实体

> ID：10931191
> 
> 赞同：0
> 
> 时间：2012-06-07T11:49:09.013
> 
> 标签：symfony, doctrine-orm

当我尝试保存订单实体时，出现以下错误：

完整性约束违规：1048 列“package_id”不能为空。

简化实体：

```
 class Order
    {

        /**
         * @ORM\Id
         * @ORM\Column(type="integer")
         * @ORM\GeneratedValue(strategy="IDENTITY")
         */
        protected $id;        

        /** 
         * @ORM\OneToOne(targetEntity="DeliveryPackage",inversedBy="order", cascade={"persist"})  
         * @ORM\JoinColumn  (name="package_id", referencedColumnName="id")   
         */
        protected $package; 

        /**
         * @ORM\ManyToOne(targetEntity="User",cascade={"persist"} )
         * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
         */
        protected $user;

    public function setId($id)
    {
        $this->id = $id;
    }

    public function getId()
    {
        return $this->id;
    }

    public function setPackage($package)
    {
        $this->package = $package;
    }

    public function getPackage()
    {
        return $this->package;
    }
}

class DeliveryPackage
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    protected $id;

    /** 
     * @ORM\OneToOne(targetEntity="Order",mappedBy="deliverypackage",cascade={"persist"})
     * @ORM\JoinColumn  (name="order_id", referencedColumnName="id")       
     */
    protected $order;    

    public function setId( $id )
    {
        $this->id = $id;
    }

    public function getId()
    {
        return $this->id;
    }

    public function setOrder( $order )
    {
        $this->order = $order;
    }

    public function getOrder()
    {
        return $this->order;
    }   

} 
```

要点是，这两个实体都是新的。所以他们还没有身份证。有什么选择，可以同时保存它们

```
$em->persist( $order );
$em->flush(); 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T12:05:08.613

建立关系后，您需要保留它们。尝试将 Order::setPackage 更改为以下内容：

```
public function setPackage($package)
{
    $this->package = $package;
    $package->setOrder($this);
} 
```

然后在持久化之前建立关系：

```
$order = new Order();
$package = new Package();
$order->setPackage($package);
$em->persist($order);
$em->flush(); 
```

我想你会发现它然后工作正常。我在第一次玩 Doctrine 2 时遇到了这个确切的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T04:26:12.660

解决方案部分基于先前的答案，但仍然不足以完全解决问题。

所以有2个动作要做。首先 - 添加

```
$package->setOrder($this); 
```

给我的二传手。

其次 - 您不能将两个引用列都定义为严格非 NULL。所以，我已经将 package_id 库尔姆重新定义为 null，它成功了。

# algorithm - 编程难题

> ID：10931192
> 
> 赞同：-2
> 
> 时间：2012-06-07T11:49:10.853
> 
> 标签：algorithm

> **可能重复：**
> [算法找到一个数字，其中 4 和 7 的乘积在给定范围内最大](https://stackoverflow.com/questions/10898626/algorithm-to-find-a-number-in-which-product-of-number-of-4-7-is-maximum-in-giv)

设`F4(X)`为 X 的十进制表示中的位数 4， 为 X 的十进制表示中`F7(X)`的位数 7。例如，

```
F4(456) = 1, F4(444) = 3, F7(1) = 0, F7(747) = 2\. 
```

如何解决以下问题？

找到最大值`{F4(X) ∙ F7(X) : L ≤ X ≤ R}`

```
1 ≤ L ≤ R ≤ 10^18 
```

解决这个问题的最快算法是什么？

1.可以通过查找 L 和 R 之间的所有数字并找到最大乘积来尝试蛮力，但这种方法很容易超时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T11:56:46.047

既然是作业，我只会以问题的形式给你建议：

*   1 到 10^18 之间的数字有多少位？
*   一个数字可以同时是 7 和 4 吗？

# javascript - 使用javascript在div中制作一个具有现有时间的实时时钟

> ID：10931197
> 
> 赞同：3
> 
> 时间：2012-06-07T11:49:45.827
> 
> 标签：javascript

好吧，假设我们有一个需要实时时间的网站；

例子 ：

`<div id="updatetime">21:12:52</div>`

每秒更新小时：m:second。

我的想法是使用`interval function`to do long pool 并将 sec +1 if 添加到 60 然后将 + 1 添加到 m 并与小时相同。但是有一个功能已经解决了这个问题吗？

**您如何`21:12:52`使用每秒更新的 javascript 使其成为一个移动的真实时钟？**

我有搜索谷歌，stackoverflow，他们中的许多人告诉我们如何从 javascript 制作当前的实时日期时间。但从现有时间没有。如果有请插入链接。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T12:03:43.310

它可以像这样简单：

```
setInterval(function(){
    document.getElementById("updatetime").innerHTML = (new Date()).toLocaleTimeString();
}, 1000); 
```

或者使用[其他 Date 方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)来微调您的输出。

**更新**

我现在才意识到 OP 不是在询问以*当前*时间而是以*预定*时间递增元素。

这不那么微不足道，但这是一个应该适合原始问题的解决方案：

```
function increment_time_element(element, delay) {
    var interval, last,
        time_pattern = /(\d+):(\d+):(\d+)/,
        start = element.innerHTML.match(time_pattern),
        then = new Date;

    then.setHours  (parseInt(start[1], 10) || 0);
    then.setMinutes(parseInt(start[2], 10) || 0);
    then.setSeconds(parseInt(start[3], 10) || 0);

    function now() {
        return Date.now ? Date.now() : (new Date).getTime();
    }

    last = now();

    interval = setInterval(function () {
        var current = now();
        // correct for any interval drift by using actual difference
        then.setTime(then.getTime() + current - last)
        last = current;
        element.innerHTML = then.toString().match(time_pattern)[0];
    }, delay || 1000);

    return {cancel: function() { clearInterval(interval) }};
}

// Usage:
var incrementing_time =
    increment_time_element(document.getElementById("updatetime"));

// Then, if you want to cancel:
incrementing_time.cancel(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T12:19:58.847

如果您不需要非常高的保真度，您可以使用这种方式：

```
​var container  = document.getElementById("updatetime").firstChild;
var values = container.nodeValue.split(":");

// Because there is only a datetime specified, I assume is the current date
var now = new Date();
var time = new Date(now.getFullYear(), now.getMonth(), now.getDate(),
                    values[0], values[1], values​[2]).getTime();

setInterval(function() {
    time += 1000;
    var date = new Date(time);
    var values = [date.getHours(), date.getMinutes(), date.getSeconds()];

    for (var i = 0; i < 3; i++)
        if (values[i] < 10)
            values[i] = "0" + values[i];

    container.nodeValue = values.join(":");
}, 1000); 
```

如果您想与当前的计算机时钟更加同步，那么我建议您使用适当的经过时间来`setTimeout`调整参数。`delay`

**更新**：由于评论，似乎要更新的元素不仅是一个而且是多个，并且代码使用的是 jQuery。这是一种适用于多个元素的方法，用于`class`识别它们：

```
var containers  = $(".updatetime");
var times = [];
var now = new Date();

containers.each(function(index, node) {
    var values = $(node).text().split(":");

    times[index] = new Date(
        now.getFullYear(), now.getMonth(), now.getDate(),
        values[0], values[1], values[2]).getTime();
});

setInterval(function() {
    containers.each(function(index, node) {
        times[index] += 1000;

        var date = new Date(times[index]);
        var values = [date.getHours(), date.getMinutes(), date.getSeconds()];

        for (var i = 0; i < 3; i++)
            if (values[i] < 10)
                values[i] = "0" + values[i];

        $(node).text(values.join(":"));
    });

}, 1000); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T13:58:24.510

如果您喜欢实时时钟，请查看我在创建“翻转时钟”时使用的代码。我将每个数字分成一个单独的数字，用于时钟内的图形放置，但如果你把它去掉，你只会得到更新的文本。

[Javascript翻转时钟](http://www.visualblissmedia.com/projects/clock)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-08T05:32:48.817

使用 HTML`canvas`

代码：

```
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");
var radius = canvas.height / 2;
ctx.translate(radius, radius);
radius = radius * 0.90
setInterval(drawClock, 1000);

function drawClock() {
  drawFace(ctx, radius);
  drawNumbers(ctx, radius);
  drawTime(ctx, radius);
}

function drawFace(ctx, radius) {
  var grad;
  ctx.beginPath();
  ctx.arc(0, 0, radius, 0, 2 * Math.PI);
  ctx.fillStyle = 'white';
  ctx.fill();
  grad = ctx.createRadialGradient(0, 0, radius * 0.95, 0, 0, radius * 1.05);
  grad.addColorStop(0, '#333');
  grad.addColorStop(0.5, 'white');
  grad.addColorStop(1, '#333');
  ctx.strokeStyle = grad;
  ctx.lineWidth = radius * 0.1;
  ctx.stroke();
  ctx.beginPath();
  ctx.arc(0, 0, radius * 0.1, 0, 2 * Math.PI);
  ctx.fillStyle = '#333';
  ctx.fill();
}

function drawNumbers(ctx, radius) {
  var ang;
  var num;
  ctx.font = radius * 0.15 + "px arial";
  ctx.textBaseline = "middle";
  ctx.textAlign = "center";
  for (num = 1; num < 13; num++) {
    ang = num * Math.PI / 6;
    ctx.rotate(ang);
    ctx.translate(0, -radius * 0.85);
    ctx.rotate(-ang);
    ctx.fillText(num.toString(), 0, 0);
    ctx.rotate(ang);
    ctx.translate(0, radius * 0.85);
    ctx.rotate(-ang);
  }
}

function drawTime(ctx, radius) {
  var now = new Date();
  var hour = now.getHours();
  var minute = now.getMinutes();
  var second = now.getSeconds();
  //hour
  hour = hour % 12;
  hour = (hour * Math.PI / 6) +
    (minute * Math.PI / (6 * 60)) +
    (second * Math.PI / (360 * 60));
  drawHand(ctx, hour, radius * 0.5, radius * 0.07);
  //minute
  minute = (minute * Math.PI / 30) + (second * Math.PI / (30 * 60));
  drawHand(ctx, minute, radius * 0.8, radius * 0.07);
  // second
  second = (second * Math.PI / 30);
  drawHand(ctx, second, radius * 0.9, radius * 0.02);
}

function drawHand(ctx, pos, length, width) {
  ctx.beginPath();
  ctx.lineWidth = width;
  ctx.lineCap = "round";
  ctx.moveTo(0, 0);
  ctx.rotate(pos);
  ctx.lineTo(0, -length);
  ctx.stroke();
  ctx.rotate(-pos);
}
```

```
<canvas id="canvas" width="400" height="400" style="background-color:#333">
</canvas>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-29T08:46:42.397

> 你可以用下面的代码来做

```
<!DOCTYPE html>
<html>
<head>
<script>
function startTime() {
    var today = new Date();
    var h = today.getHours();
    var m = today.getMinutes();
    var s = today.getSeconds();
    m = checkTime(m);
    s = checkTime(s);
    document.getElementById('txt').innerHTML =
    h + ":" + m + ":" + s;
    var t = setTimeout(startTime, 500);
}
function checkTime(i) {
    if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
    return i;
}
</script>
</head>

<body onload="startTime()">

<div id="txt"></div>

</body>
</html> 
```

# android - 在另一个活动上显示edittext输入

> ID：10931198
> 
> 赞同：0
> 
> 时间：2012-06-07T11:49:49.140
> 
> 标签：android

我有一个非常简单的问题。我想在一个活动中输入一个数字，然后在另一个活动中显示它。

**输入.java**

```
Button ok = (Button) findViewById(R.id.inputok);
ok.setOnClickListener (new OnClickListener ()
{

    public void onClick(View vie)
    {EditText et = (EditText) findViewById(R.id.ei);
    a = Integer.valueOf(et.getText().toString());

        Intent intent= new Intent (input.this, answer.class);
     intent.putExtra("i", a );
    startActivity(intent);
    }
} ); 
```

现在在将它显示在另一个上之前，我想对整数执行一些操作，对它说 +1。

**答案.java**

```
 Bundle extras = getIntent().getExtras(); 
int a = extras.getInt("i");
++a;
TextView TV= (TextView) findViewById(R.id.TV);
TV.setText(a); 
```

当我尝试运行它时，应用程序关闭，代码有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:56:38.927

在将整数设置为文本视图之前，您必须将其转换为字符串，如下所示，

```
Integer.toString(a); 
```

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:54:39.903

我希望问题是在`setText();`

尝试这个，

```
 int intent_data = getIntent().getExtras().getInt("i"); // to Get the data

     // Now increment the value.
     int newVal= intent_data+1; // or intent_data++;
     TextView TV= (TextView) findViewById(R.id.TV);
      TV.setText(""+newVal); 
```

或者你可以使用，

```
 int intent_data = getIntent().getExtras().getInt("i"); // to Get the data

         // Now increment the value.
         int newVal= intent_data+1;
         TextView TV= (TextView) findViewById(R.id.TV);

      String s = String.valueOf(newVal);
    TV.setText(s); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T11:55:05.780

是的，

问题是**TV.setText(a);**

我们只能在 setText 方法中设置 CharSequence 您尝试设置整数值是错误的

请尝试一下**TV.setText(""+a);**

我希望你的代码在得到它后能正常工作。

# jquery - 所有页面的 jQuery Mobile 通用页脚

> ID：10931201
> 
> 赞同：1
> 
> 时间：2012-06-07T11:49:51.347
> 
> 标签：jquery, jquery-mobile

我正在使用`jQuery Mobile`并且在我的项目中有`several pages`.

我希望所有页面都`share a common footer`没有在每个页面中放置页脚，我希望它只在一个地方，然后它会出现在所有页面中。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:39:03.063

试试这个代码：

```
$('[data-role=page]').on('pageshow', function (event, ui) {
            $("#" + event.target.id).find("[data-role=footer]").load("footer.html", function(){
                $("#" + event.target.id).find("[data-role=navbar]").navbar();
            });
        }); 
```

参考这篇文章

[Jquery Mobile在不同页面上的相同页脚](https://stackoverflow.com/questions/10906189/jquery-mobile-same-footer-on-different-pages/10908726#10908726)

# ipv6 - IPV6_ADD_MEMBERSHIP 和 IPV6_JOIN_GROUP 有什么区别？

> ID：10931202
> 
> 赞同：9
> 
> 时间：2012-06-07T11:49:54.647
> 
> 标签：ipv6, multicast

我注意到大多数定义 IPv6 多播的操作系统都定义了两组套接字选项；`IPV6_ADD_MEMBERSHIP`/`IPV6_DROP_MEMBERSHIP`和`IPV6_JOIN_GROUP`/ `IPV6_LEAVE_GROUP`。每当我找到它们时，它们都被记录为同义词，具有相同的选项值。事实上，有些人甚至将`#define`一个字面意思是另一个；例如

```
#define IPV6_JOIN_GROUP IPV6_ADD_MEMBERSHIP 
```

这里有什么区别，还是只是历史包袱——同一事物的两个名字？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T15:15:02.790

它们是相同的。同义词，就像你说的。

# iphone - 用动画替换静态 UIImageView

> ID：10931203
> 
> 赞同：1
> 
> 时间：2012-06-07T11:49:58.637
> 
> 标签：iphone, objective-c, ios, animation, uiimageview

我有一个`UImageView`我在界面生成器中设置的，带有来自我的资源的 png（一双眼睛）。然后我想用眨眼的动画替换这个图像（在特定时间后）。

这是我使用的代码`viewWillAppear`：

```
NSString *fileName; 
    NSMutableArray *imageArray = [[NSMutableArray alloc] init];
    for(int i = 1; i < 12; i++) {
        fileName = [NSString stringWithFormat:@"HDBlinkPage1/hd_eyes_blinking%d.png", i];
        [imageArray addObject:[UIImage imageNamed:fileName]];
    }
    imgHDBlink.userInteractionEnabled = YES;
    imgHDBlink.animationImages = imageArray;
    imgHDBlink.animationDuration = 0.9;
    imgHDBlink.animationRepeatCount = 1;
    imgHDBlink.contentMode = UIViewContentModeScaleToFill;
    //[self.view addSubview:imgHDBlink];
    [imgHDBlink startAnimating]; 
```

在 viewWillAppear`NSTimer`中，我使用 an 每 5 秒触发一次动画：

```
[NSTimer scheduledTimerWithTimeInterval:5.0
                                     target:self
                                   selector:@selector(blinkAnimation)
                                   userInfo:nil
                                    repeats:YES]; 
```

问题是，当我运行应用程序时，我根本看不到初始静态图像。我只是每 5 秒看到一次动画，但在这些动画之间没有睁开眼睛的图像。任何人都可以帮我解决这个问题或指出正确的方向吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:55:13.850

5.0 秒后添加动画图像。从 UIImageView 文档：

> 该数组必须包含 UIImage 对象。您可以在数组中多次使用相同的图像对象。将此属性设置为 nil 以外的值会隐藏由 image 属性表示的图像。此属性的值默认为 nil。

如果你事先设置了 animationImages 数组，它就不会显示图像。

编辑：（全部使用ARC）

```
- (void) viewDidLoad {
  [super viewDidLoad];

  //Initialize self.imgHDBlink
}

- (void) viewDidAppear: (BOOL) animated {
    [super viewDidAppear: animated];

    self.imgHDBlink.image = [UIImage imageNamed: @"static_image"];

    [NSTimer scheduledTimerWithTimeInterval: 5.0
                                     target: self
                                   selector: @selector(blinkAnimation:)
                                   userInfo: nil
                                    repeats: YES];
}

- (void) blinkAnimation: (NSTimer*) timer {

    self.imgHDBlink.animationImages = [NSArray array];  //Actually add your images here
    [self.imgHDBlink startAnimating];

    [self.imgHDBlink performSelector: @selector(setAnimationImages:) withObject: nil afterDelay: self.imgHDBlink.animationDuration];
}

//Remember this to stop crashes if we are dealloced
- (void) dealloc {
    [NSObject cancelPreviousPerformRequestsWithTarget: self 
                                             selector: @selector(blinkAnimation:) 
                                               object: nil];
} 
```

# iphone - 更改了 iPhone 应用程序目标名称，现在应用程序“已完成运行”

> ID：10931208
> 
> 赞同：1
> 
> 时间：2012-06-07T11:50:09.013
> 
> 标签：iphone, ios, build, settings, target

我对我的应用程序做了一个非常无辜的更改：我通过单击菜单托盘中的图标本身并在那里更改其名称来更改目标的名称（我将其更改为“主题”，这很奇怪）。之后，该应用程序不再在设备上或模拟器中运行。

在设备上，它显示构建成功，然后显示“在 iPhone 4S 上完成运行 Appname”（其中 Appname 是我的应用程序的名称，我不妨保密）。

在模拟器上，它停在“附加到 Appname.Appname”

慌乱中将名字改回原来的名字，问题依旧。

请注意，我没有手动更改设置中的任何内容，只是更改了图标名称本身。设置自动将 $(TARGET_NAME) 替换为新名称，现在它们再次自动将其替换为旧名称。

另外，请不要将此标记为其他“已完成运行”问题的重复，因为我已经指定了我在遇到问题之前所做的确切更改，并且之前的帖子似乎都没有处理这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T12:51:26.497

试试这个：

> *   产品 -> 清洁。
> *   删除模拟器和设备上的应用程序。
> *   重新启动 Xcode。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T22:39:17.700

在我的项目中重命名一些文件后，我再次将它们添加到我的项目中。我添加了一个不属于该项目的文件 info.plist（我认为！）。之后模拟器启动并且不起作用。Xcode 中出现消息“完成运行...”。我再次尝试后，模拟器工作。因此，每次我需要模拟应用程序时，我都需要运行两次才能使其正常工作。

在广泛寻找之后，我找不到我的问题的答案。

我删除了 info.plist，程序现在像以前一样运行良好。这就是我的问题的解决方案。请在执行此操作之前备份 info.plist。尝试恢复工作的 info.plist 的备份并添加到项目中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-11T16:46:10.150

我的问题是新目标具有与旧目标相同的捆绑标识符。希望能帮助到你！

# apache - .htaccess 重定向替换单词不起作用

> ID：10931210
> 
> 赞同：0
> 
> 时间：2012-06-07T11:50:24.360
> 
> 标签：apache, .htaccess

在我的网址中，我已将“国家”一词替换为“landelijke-deals”

例如，来自： `http://allthedeals.nl/deals/national/reizen-vakantie`

至： `http://allthedeals.nl/deals/landelijke-deals/reizen-vakantie`

我正在使用这个：

```
RewriteRule ^national/(.*) /landelijke-deals/$1 [R=301,L] 
```

重定向，但由于某种原因它无法正常工作，我没有看到什么？

**更新：这是我当前的 htacces 文件**

```
Options +FollowSymLinks
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www\.allthedeals\.nl$ [NC]
RewriteRule ^(.*)$ http://allthedeals.nl/$1 [R=301,L]
#
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^deals([-a-zA-Z\/]+)?$ deals.php?vars=$1 [L,QSA]
#
RewriteRule ^deal/([-_a-zA-Z0-9]+)/([0-9]+)$ CustomDealDetail.php?dealId=$2&seo=$1 [L,QSA]
RewriteRule ^deal/([0-9]+)/([-_a-zA-Z0-9]+)$ old_id_redirect.php?old_id=$1&seo=$2 [L,QSA]
RewriteRule ^aggdeal/([0-9]+)/(.*)$ dealdetails.php?dealId=$1 [L,QSA]
RewriteRule ^deal-aanbieders$ deal-aanbieders.php [L,QSA]
RewriteRule ^deals/national/(.*) /deals/landelijke-deals/$1 [R,L]
#RewriteRule ^index\.htm$ index.php [NC,R] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:08:28.750

你的 RewriteRule 是错误的。请改用以下重写规则：

```
RewriteRule ^/deals/national/(.*)$ /deals/landelijke-deals/$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:18:52.603

这是您需要的规则：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^(deals)/national/(.+)$ $1/landelijke-deals/$2 [R=301,L.NC] 
```

# java - Android Mantis 客户端“找不到类”错误

> ID：10931213
> 
> 赞同：0
> 
> 时间：2012-06-07T11:50:36.707
> 
> 标签：java, android, soap, mantis

我正在尝试使用[http://sourceforge.net/projects/mantisconnect/](http://sourceforge.net/projects/mantisconnect/) Java 客户端为 Android 创建一个 Mantis 客户端。我创建了一个空的 Android 项目，添加了一个 Libs 文件夹，但还有一个 mantisconnect jar 文件。然后我将它添加到构建路径并将其移动到顶部。

```
try {
    mUrl = new URL("https://blabla.com:443/mantis/api/soap/mantisconnect.php");
    } catch (MalformedURLException e) {
        e.printStackTrace();
    }
try {
    IMCSession session = new MCSession(mUrl, mUser, mPwd);
    } catch (MCException e) {
        e.printStackTrace();
    } 
```

此代码在按钮的 OnClick 事件中。但是当我点击这个按钮时，我有一个错误：

```
06-07 10:38:47.818: I/dalvikvm(1000): Failed resolving Lorg/mantisbt/connect/axis/MantisConnectPortType; interface 118 'Ljava/rmi/Remote;'
06-07 10:38:47.818: W/dalvikvm(1000): Link of class 'Lorg/mantisbt/connect/axis/MantisConnectPortType;' failed
06-07 10:38:50.993: W/dalvikvm(1000): VFY: unable to find class referenced in signature (Lorg/mantisbt/connect/axis/MantisConnectPortType;)
06-07 10:38:53.856: I/dalvikvm(1000): Failed resolving Lorg/mantisbt/connect/axis/MantisConnectPortType; interface 118 'Ljava/rmi/Remote;'
06-07 10:38:53.856: W/dalvikvm(1000): Link of class 'Lorg/mantisbt/connect/axis/MantisConnectPortType;' failed
06-07 10:38:56.585: I/dalvikvm(1000): Failed resolving Lorg/mantisbt/connect/axis/MantisConnectPortType; interface 118 'Ljava/rmi/Remote;'
06-07 10:38:56.585: W/dalvikvm(1000): Link of class 'Lorg/mantisbt/connect/axis/MantisConnectPortType;' failed
06-07 10:39:04.045: W/dalvikvm(1000): VFY: unable to find class referenced in signature (Lorg/mantisbt/connect/axis/MantisConnectPortType;)
06-07 10:39:05.613: I/dalvikvm(1000): Failed resolving Lorg/mantisbt/connect/axis/MantisConnectPortType; interface 118 'Ljava/rmi/Remote;'
06-07 10:39:05.613: W/dalvikvm(1000): Link of class 'Lorg/mantisbt/connect/axis/MantisConnectPortType;' failed
06-07 10:39:22.073: W/dalvikvm(1000): Unable to resolve superclass of Lorg/mantisbt/connect/axis/MantisConnectLocator; (187)
06-07 10:39:22.073: W/dalvikvm(1000): Link of class 'Lorg/mantisbt/connect/axis/MantisConnectLocator;' failed
06-07 10:39:23.326: E/dalvikvm(1000): Could not find class 'org.mantisbt.connect.axis.MantisConnectLocator', referenced from method org.mantisbt.connect.axis.MCSession.createPortType
06-07 10:39:23.326: W/dalvikvm(1000): VFY: unable to resolve new-instance 251 (Lorg/mantisbt/connect/axis/MantisConnectLocator;) in Lorg/mantisbt/connect/axis/MCSession;
06-07 10:39:23.326: D/dalvikvm(1000): VFY: replacing opcode 0x22 at 0x0000
06-07 10:39:38.598: W/dalvikvm(1000): VFY: unable to resolve exception class 181 (Ljavax/xml/rpc/ServiceException;)
06-07 10:39:38.603: W/dalvikvm(1000): VFY: unable to find exception handler at addr 0xa
06-07 10:39:38.603: W/dalvikvm(1000): VFY:  rejected Lorg/mantisbt/connect/axis/MCSession;.createPortType (Ljava/net/URL;)Lorg/mantisbt/connect/axis/MantisConnectPortType;
06-07 10:39:38.603: W/dalvikvm(1000): VFY:  rejecting opcode 0x0d at 0x000a
06-07 10:39:38.603: W/dalvikvm(1000): VFY:  rejected Lorg/mantisbt/connect/axis/MCSession;.createPortType (Ljava/net/URL;)Lorg/mantisbt/connect/axis/MantisConnectPortType;
06-07 10:39:38.603: W/dalvikvm(1000): Verifier rejected class Lorg/mantisbt/connect/axis/MCSession;
06-07 10:39:41.807: D/AndroidRuntime(1000): Shutting down VM
06-07 10:39:41.807: W/dalvikvm(1000): threadid=1: thread exiting with uncaught exception (group=0x40015560)
06-07 10:39:41.996: E/AndroidRuntime(1000): FATAL EXCEPTION: main
06-07 10:39:41.996: E/AndroidRuntime(1000): java.lang.VerifyError: org.mantisbt.connect.axis.MCSession
06-07 10:39:41.996: E/AndroidRuntime(1000):     at daintel.issuereporter.Controls2$1.onClick(Controls2.java:51)
06-07 10:39:41.996: E/AndroidRuntime(1000):     at android.view.View.performClick(View.java:2485)
06-07 10:39:41.996: E/AndroidRuntime(1000):     at android.view.View$PerformClick.run(View.java:9080)
06-07 10:39:41.996: E/AndroidRuntime(1000):     at android.os.Handler.handleCallback(Handler.java:587)
06-07 10:39:41.996: E/AndroidRuntime(1000):     at android.os.Handler.dispatchMessage(Handler.java:92)
06-07 10:39:41.996: E/AndroidRuntime(1000):     at android.os.Looper.loop(Looper.java:123)
06-07 10:39:41.996: E/AndroidRuntime(1000):     at android.app.ActivityThread.main(ActivityThread.java:3683)
06-07 10:39:41.996: E/AndroidRuntime(1000):     at java.lang.reflect.Method.invokeNative(Native Method)
06-07 10:39:41.996: E/AndroidRuntime(1000):     at java.lang.reflect.Method.invoke(Method.java:507)
06-07 10:39:41.996: E/AndroidRuntime(1000):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-07 10:39:41.996: E/AndroidRuntime(1000):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-07 10:39:41.996: E/AndroidRuntime(1000):     at dalvik.system.NativeStart.main(Native Method) 
```

但是这个类存在于一个包中，我写过

```
import org.mantisbt.connect.axis.*; 
```

在按钮事件所在的活动类中。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:02:46.803

> 06-07 10:39:38.598: W/dalvikvm(1000): VFY: 无法解析异常类 181 (Ljavax/xml/rpc/ServiceException;)

您的类路径中缺少一些库。我建议：

1.  [您使用来自http://search.maven.org/#artifactdetails|biz.futureware.mantis|mantis-axis-soap-client|1.2.9|jar](http://search.maven.org/#artifactdetails|biz.futureware.mantis|mantis-axis-soap-client|1.2.9|jar)的 jar ；它适用于更新的 Mantis 版本
2.  将 apache axis 1.4 jar 也添加到您的类路径中。

# cordova - 如何构建 phonegap 应用程序？

> ID：10931218
> 
> 赞同：3
> 
> 时间：2012-06-07T11:51:02.227
> 
> 标签：cordova

我开发了一个电话间隙应用程序，并按照 build.phonegap.com 提供的步骤构建了电话间隙应用程序。我成功地为所有平台生成了最终输出。但是这个应用程序在 symbian、windows 中无法运行，它总是显示一个空白屏幕，并且在 android 中运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:04:25.217

我还没有尝试过，但我想我已经读过，你应该在 index.html 中引用cordova.js，但不要包含实际的 JS 文件，因为它会在构建过程中自动添加。

所以我想说，在使用 build.phonegap.com 构建您的应用程序之前删除cordova.js，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T00:50:34.077

我已经多次使用 Phonegap Build，但没有看到您的应用程序的特定代码，我无法确切地说出您的应用程序出了什么问题。Phonegap Build 将自动插入您在 config.xml 文件中指定的 Phonegap 版本......所以我不确定在 cordova.js 方面包含或不包含什么的答案会产生很多结果。

我的建议是检查您在应用程序中使用的 Phonegap/Cordova 的哪些功能。Phonegap Build 可能会成功构建您的应用程序（将其打包成应用程序分发商使用的二进制文件/文件），但这并不意味着它实际上可以在为其构建的设备上运行。

以下是 Phonegap 支持各种设备的相当完整的功能列表：http: [//phonegap.com/about/feature/](http://phonegap.com/about/feature/)。

我的猜测是您使用的东西在 Android 上受支持，而在 Windows Phone 或 Symbian 上不受支持。那，或者您没有在 config.xml 中输入正确的权限。查看[https://build.phonegap.com/docs/config-xml](https://build.phonegap.com/docs/config-xml)并找到“PhoneGap API 功能”部分。如果您的某些权限未在标签中正确设置，则某些应用程序可能无法在所有设备上正常运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T07:58:16.973

在包含cordova时只添加cordova.js。之后在构建phonegap build时会注意应该在WWW目录中添加哪个cordova或者你可以使用Cordova-1.5.0.js作为参考使用下面的链接

[http://msdn.microsoft.com/en-us/magazine/hh975345.aspx](http://msdn.microsoft.com/en-us/magazine/hh975345.aspx) 用于为 Windows 构建 phonegap 应用程序

# ms-access-2007 - Vs 10 VB.net Ms 选择时访问数据库 dbnull 值

> ID：10931219
> 
> 赞同：1
> 
> 时间：2012-06-07T11:51:03.670
> 
> 标签：ms-access-2007, vb.net-2010

好的，所以我在 vb.net 应用程序中添加了一个 Ms 访问表，然后我创建了一个过滤器，该表包含带有 DBNull 值的列，问题是每当我开始在过滤器中写入任何具有 dbnull 值的单元格的内容时，它都会让我知道错误

""" 表 'Parts' 中的列 'Postion' 的值为 DBNull。"""

并且异常详细信息是 """""""""""""""""

```
System.Data.StrongTypingException was unhandled by user code
  Message=The value for column 'Postion' in table 'Parts' is DBNull.
  Source=Erkat
  StackTrace:
       at Erkat.cutterprogDataSet.PartsRow.get_Postion() in C:\Users\Mina\Documents\Visual Studio 2010\Projects\Erkatpj\Erkat\cutterprogDataSet.Designer.vb:line 2634
  InnerException: System.InvalidCastException
       Message=Conversion from type 'DBNull' to type 'String' is not valid.
       Source=Microsoft.VisualBasic
       StackTrace:
            at Microsoft.VisualBasic.CompilerServices.Conversions.ToString(Object Value)
            at Erkat.cutterprogDataSet.PartsRow.get_Postion() in C:\Users\Mina\Documents\Visual Studio 2010\Projects\Erkatpj\Erkat\cutterprogDataSet.Designer.vb:line 2632
       InnerException: 
```

"""""""""""""""""""

我找到了一个解决方案，但它只是暂时的

在设计器自动生成的代码中

"""

```
 <Global.System.Diagnostics.DebuggerNonUserCodeAttribute(),  _
     Global.System.CodeDom.Compiler.GeneratedCodeAttribute("System.Data.Design.TypedDataSetGenerator", "4.0.0.0")>  _
    Public Property Postion() As String
        Get
            Try 
                Return CType(Me(Me.tableParts.PostionColumn),String)
            Catch e As Global.System.InvalidCastException
                Throw New Global.System.Data.StrongTypingException("The value for column 'Postion' in table 'Parts' is DBNull.", e)
            End Try
        End Get
        Set
            Me(Me.tableParts.PostionColumn) = value
        End Set
    End Property 
```

""" 我把它改成了

""""""""""""""""""""""

```
<Global.System.Diagnostics.DebuggerNonUserCodeAttribute(),  _
         Global.System.CodeDom.Compiler.GeneratedCodeAttribute("System.Data.Design.TypedDataSetGenerator", "4.0.0.0")>  _
        Public Property Postion() As String
            Get
                Try
                    If Convert.IsDBNull(Me(Me.tableParts.PostionColumn)) Then
                        Return Nothing
                    Else
                        Return CType(Me(Me.tableParts.PostionColumn), String)

                    End If

                Catch e As Global.System.InvalidCastException
                    Throw New Global.System.Data.StrongTypingException("The value for column 'Postion' in table 'Parts' is DBNull.", e)
                End Try
            End Get
            Set
                Me(Me.tableParts.PostionColumn) = value
            End Set
        End Property 
```

""""""""""""""""""""""" 但是由于它的自动生成它不断删除它并再次制作旧的

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:17:33.037

存储`Public Property Postion() As String`为 an`Object`并强制转换为`String`if `Position`is not `DBNull.Value`or `Nothing`。

```
Public Property Postion() As Object
    Get
        Return Me(Me.tableParts.PostionColumn
    End Get
    Set
        Me(Me.tableParts.PostionColumn) = value
    End Set
End Property 
```

用法：

```
Dim pos as String
Dim obj as Object = Position
If Not (obj Is Nothing) And Not (obj = DBNull.Value) Then
  pos = CType(obj, String)
  ' Alternately:
  ' pos = CString(obj)
  ' Or:
  ' pos = obj.ToString()
Else
  pos = String.Empty
End If 
```

我的VB不太好，如有语法问题请见谅。

# core-data - 使用核心数据存储用户对象

> ID：10931226
> 
> 赞同：1
> 
> 时间：2012-06-07T11:51:54.127
> 
> 标签：core-data, stay-logged-in

我有一个问题:) 我经常遇到我有一些对象（书籍说）和用户列表的情况。每个用户都有一些书籍。还有一种特殊情况是当前登录的用户比普通用户拥有更多的属性（发帖权限、收藏夹）等。

在所有以前的项目中，我一直在创建一个名为 CurrentUser 的 User 子类，并在其中添加当前用户属性/逻辑（例如，普通用户无法注销）。但我总是遇到确保只有一个 CurrentUser 对象存在的问题。

其他人如何做到这一点？我这样做正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:36:12.223

我不太确定我是否理解您的问题，但是如果您想控制只有一个实例，`CurrentUser`我将设置一种单例类，例如`SessionController`，它具有 type 的属性`CurrentUser`。

因此，您可以在任何地方访问该属性，并且您知道它只有该类的一个实例可用，因此您当前的用户只有一个属性。

```
CurrentUser* cu = [[SessionController sharedSessionController] currentUser];
if(!cu) // allowed
else // not allowed 
```

当您登录（或其他）时，您会填充该属性。注销时，将其设置为零。当您想与其他用户一起进入时，您可以检查该属性。这是一种在大多数情况下都可以使用的简单方法。

关于您的问题，我不太确定您为什么将`User`实体子类化。但也许有一些动机。处理子类时要注意。实际上，如果您使用 sqlite 存储，Core Data 会在底层实现您创建的子类的扁平化。因此，在您的情况下，您只有一个`User`具有您在中创建的属性的表`CurrentUser`。

**编辑**

阅读您的问题的标题，如果必须使用 db 文件进行控制，我将创建一个名为`LoggedUser`并避免使用子类的实体。

在这里，您可以存储当前用户的 id 和您想要的其他属性。

然后，如果您想验证是否有一个用户已经登录，您可以简单地设置如下请求：

```
NSInteger count = [fetchRequest countForFetchRequest:&error]; // query against `LoggedUser`
if(count >= 1) // not allowed
else // allowed 
```

# android - Android如何访问jpg中的位置数据

> ID：10931232
> 
> 赞同：8
> 
> 时间：2012-06-07T11:52:20.863
> 
> 标签：android, gps, photo, jpeg

我正在制作一个包含在地图上显示图像的功能的 Android 应用程序。

如何从 .jpg 文件中提取位置数据（如果有位置数据）？

非常感谢，托德。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-07T11:55:59.370

有很好的教程如何从 jpg 访问 exif 数据（包括您需要的 GPS 信息），可以帮助您：
[http ://android-coding.blogspot.com/2011/10/read-exif-of-jpg-file-使用.html](http://android-coding.blogspot.com/2011/10/read-exif-of-jpg-file-using.html)

对应的类在官方文档中有描述：http:
[//developer.android.com/reference/android/media/ExifInterface.html](http://developer.android.com/reference/android/media/ExifInterface.html)

也可以找到有用的帖子（转换 GPS 信息）：
[http ://android-coding.blogspot.com/2011/10/convert-gps-tag-of-exifinterface-to.html](http://android-coding.blogspot.com/2011/10/convert-gps-tag-of-exifinterface-to.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-21T21:43:41.263

这是我的做法：

```
 try {
      final ExifInterface exifInterface = new ExifInterface(imagePath);
      float[] latLong = new float[2];
      if (exifInterface.getLatLong(latLong)) {
        // Do stuff with lat / long...
      }
    } catch (IOException e) {
      logger.info("Couldn't read exif info: " + e.getLocalizedMessage());
    } 
```

# android - Android 中的俄语本地化

> ID：10931238
> 
> 赞同：13
> 
> 时间：2012-06-07T11:52:45.750
> 
> 标签：android, localization

我的应用程序支持 4 种语言。用户选择他们的语言。但这不适用于俄语。

```
if (dil.equals("eng")){
        Configuration c = new Configuration(context.getResources().getConfiguration());
        c.locale = Locale.ENGLISH;
        context.getResources().updateConfiguration(c,context.getResources().getDisplayMetrics());

    }
    else if (dil.equals("ger")){
        Configuration c = new Configuration(context.getResources().getConfiguration());
        c.locale = Locale.GERMAN;
        context.getResources().updateConfiguration(c,context.getResources().getDisplayMetrics());

    }
    else if (dil.equals("rus")){
        Configuration c = new Configuration(context.getResources().getConfiguration());
        c.locale = Locale.????????;
        context.getResources().updateConfiguration(c,context.getResources().getDisplayMetrics());

    }
    else
    {
        Configuration c = new Configuration(context.getResources().getConfiguration());
        c.locale = Locale.getDefault();
        context.getResources().updateConfiguration(c,context.getResources().getDisplayMetrics());

    } 
```

我不知道该怎么做俄语。

```
c.locale = Locale.????????; 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-07T12:12:12.880

使用此[构造函数](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Locale.html#Locale%28java.lang.String%29)，您可以将语言环境设置为俄语，如下所示：

```
Locale myLocale = new Locale("ru","RU"); 
```

这是Java[支持的语言环境列表。](http://docs.oracle.com/javase/1.4.2/docs/guide/intl/locale.doc.html)您可以看到“ru”是受支持的，但未经测试。

该文档还说有时提供基本本地化和国际化会更好，所以我从

```
Locale myLocale =  new Locale("ru") 
```

到

```
Locale myLocale = new Locale("ru","RU") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:02:28.923

根据[Locale 的 Android 文档](http://developer.android.com/reference/java/util/Locale.html)

> 此类的构造函数不进行错误检查。您可以为不存在的语言和国家/地区创建区域设置，并且可以为不存在的组合创建实例（例如“de_US”代表“美国所说的德语”）。
> 
> 请注意，语言环境数据不一定可用于此类中预定义为常量的任何语言环境，但 en_US 除外，这是 Java 保证始终可用的唯一语言环境。
> 
> 假设所有设备都具有相同的可用区域设置也是错误的。在美国销售的设备几乎肯定会支持 en_US 和 es_US，但不一定支持任何具有相同语言但不同国家的语言环境（例如 en_GB 或 es_ES），也不一定支持其他语言的任何语言环境（例如 de_DE）。对于在欧洲销售的设备，情况可能正好相反。

此外，文档没有列出俄语的区域设置，因此看起来您必须创建一个。还要注意上面引用的第三段。所以也许最好自己提供。

检查[这个 SO post](https://stackoverflow.com/questions/2264874/changing-locale-within-the-app-itself)以及它有一些关于 Locale 的有用提示

# iphone - 如何知道调用 applicationWillEnterForeground 或 applicationDidBecomeActive 时是否显示了启动图像？

> ID：10931242
> 
> 赞同：1
> 
> 时间：2012-06-07T11:53:10.177
> 
> 标签：iphone, xcode, image, launch, default.png

我已将 Default.png 和 Default@2x.png 添加到项目中。每次应用程序启动时都会显示它们。但是当应用程序从后台进入前台时，可能会显示启动图像，也可能不会显示。显示或不显示可能与应用程序每次恢复的速度有关。问题是，我如何确切知道启动图像是否会显示，或者每次都显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:00:42.137

正如您所说，我认为当应用程序“恢复”时不会显示启动图像，但只有在应用程序实际重新启动时才会显示。您可以通过在看到图像时放入`NSLog`语句并观察来轻松检查这一点。`application: didFinishLaunchingWithOptions:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T15:06:15.287

我遇到了类似的问题，在谷歌搜索时我遇到了这个问题。

在我的情况下，如果应用程序以不同于进入后台时的界面方向恢复，似乎会显示启动图像，即使更改为倒置方向也是如此。

您可以将返回背景之前的方向与返回时的方向进行比较。（使用`applicationDidBecomeActive:`;`applicationWillEnterForeground:`为时过早）

# iphone - iPhone中没有超链接样式的电话号码，电子邮件，地址检测

> ID：10931246
> 
> 赞同：-1
> 
> 时间：2012-06-07T11:53:23.577
> 
> 标签：iphone, uiwebview

我正在使用 UIWebView 访问我自己的网页，并在 xib 文件中检查了检测选项卡下的电话号码、链接和地址复选框。检测工作正常。但它显示为蓝色并带有下划线，我不想要这些并应用我自己的自定义样式。有人可以给我代码或您的评论吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:00:31.623

使用 CSS 样式。就像是：

```
 <html><head><style type=text/css> a {color:#FFF;} </style></head>...</html> 
```

# jsf-2 - Ajax方法不被调用时 内部使用

> ID：10931249
> 
> 赞同：2
> 
> 时间：2012-06-07T11:53:46.797
> 
> 标签：jsf-2

我正在尝试使用 JSF 2.0 执行以下代码，我正在尝试调用 Managed Bean 方法来更改“布尔复选框”的值，我正在尝试对其使用标记。但是没有调用托管 bean 方法。

我的JSF代码如下：

```
*<h:panelGrid columns="3" styleClass="prepend-2 span-20">
<h:dataTable value="#{report.resultList}" var="list">
<h:column >
<h:selectBooleanCheckbox layout="pageDirection"
value="#{list.selected}">
<f:ajax event="change"
listener="#{report.getStaffIdList}" render="@form" immediate="true" execute="@this" />
</h:selectBooleanCheckbox>
</h:column>
<h:column>
<f:facet name="header">StaffID</f:facet>
<h:outputText value="#{list.staffID}"></h:outputText>
</h:column>
<h:column>
<f:facet name="header">Name</f:facet>
<h:outputText value="#{list.name}"></h:outputText>
</h:column>
<h:column>
<f:facet name="header">
<h:outputText value="#{report.searchQueryHeading}" />
</f:facet>
<h:outputText value="#{list.queryResult}"></h:outputText>
</h:column>
</h:dataTable>
</h:panelGrid>** 
```

我的托管 Bean：

```
public void getStaffIdList(AjaxBehaviorEvent ve){
  System.out.println("inAjax");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:08:53.030

1.  selectbooleancheckbox 没有更改事件。使用点击事件。
2.  您也可以尝试不使用 ajax 的方法。将以下代码添加到您的 selectbooleancheckbox：

    valueChangeListener="#{bean.listener}" onchange="submit()"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:44:52.383

要重绘唯一的组件，请使用此方法

```
<h:selectBooleanCheckbox value="#{bean.rewrite}" valueChangeListener="{#bean.valueChangeMethod}">
<a4j:ajax execute="@region" event="change" />
</h:selectBooleanCheckbox> 
```

# oracle - 从 oracle 中的 live db 中的表更新 test db 中的表中的数据

> ID：10931252
> 
> 赞同：0
> 
> 时间：2012-06-07T11:53:53.737
> 
> 标签：oracle, sql-update, insert-update

我在 testDB 和 liveDB 中有相同的表。我需要使用该表的 LiveDB 中的数据更新 testDB 中的数据。如何在 Oracle 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:57:50.767

除非测试中有必须保留的数据，否则运行预定脚本以：

```
DELETE * FROM TESTDATA_TBL 
```

然后

```
INSERT INTO TESTDATA_TBL (COLUMN1, COLUMN2, . . . ) 
SELECT LIVEDATA_TBL.COLUMN1, LIVEDATA_TBL.COLUMN2 FROM LIVEDATA_TBL 
```

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:56:37.523

您可以尝试 Oracle`merge`命令： [http ://docs.oracle.com/cd/B13789_01/server.101/b10759/statements_9016.htm](http://docs.oracle.com/cd/B13789_01/server.101/b10759/statements_9016.htm)

它将结合所有`inserts`,`updates`和`deletes`使记录相同。这应该可行，除非您对其他表进行了一些参照完整性检查。

# android - 如何在android中显示对图像onclick的关注？

> ID：10931253
> 
> 赞同：1
> 
> 时间：2012-06-07T11:53:56.623
> 
> 标签：android, focus, android-imageview

单击图像时如何在图像上显示焦点？
我只想在用户单击它时显示焦点（让用户知道他已单击它）。当用户抬起手指时，图像应该显示正常。谁能指导我？请。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:59:12.220

为图像视图创建选择器............

```
 <selector
  xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_focused="true" 
          android:state_pressed="false" 
          android:drawable="@drawable/....." />
    <item android:state_focused="true" 
          android:state_pressed="true"
          android:drawable="@drawable/......" />
    <item android:state_focused="false" 
          android:state_pressed="true"
      android:drawable="@drawable/......" />
    <item android:drawable="@drawable/....." />
</selector> 
```

并使 android:clickable="true" 或 iv.setclickable(true);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:02:50.993

在 up 和 Down 事件中设置 imageView onTuch 事件和 onTuch 事件 setFocusable() true 和 false。

imageView.setFocusable(true) 或 imageView.setFocusable(false);

# sql - 顺序发票编号 SQL 服务器

> ID：10931256
> 
> 赞同：0
> 
> 时间：2012-06-07T11:54:13.320
> 
> 标签：sql, sql-server, sql-server-2008

我有一个具有 InvoiceID (int identity) 主键的发票表。和一列 InvoiceNumber，它是一个整数。我有另一个表用于生成名为 Invoice_Numbers 的发票编号（见下文）。为了确保发票号码是唯一的并防止出现空白，我实施了以下代码。有人可以查看此代码并评论其可靠性。在多用户环境中运行 SQL 2008。

用户在插入发票时致电然后进行采购时获得相同发票编号的机会有多大？

```

如果存在
   （选择 *
    FROM 系统对象
    WHERE object_id = OBJECT_ID(N'[Imports].[Invoices_Numbers]')
           并输入（N'U'））
  DROP TABLE [Imports].[Invoices_Numbers]去

CREATE TABLE [进口].[Invoices_Numbers]
  (
     [InvoiceNumber] [INT] IDENTITY(1, 1) 非空
     ,[已删除] [BIT] 非空
     ,[已使用] [BIT] 不为空，
     约束 [PK_Invoices_Numbers] 主键集群（[InvoiceNumber] ASC）与（PAD_INDEX = OFF，STATISTICS_NORECOMPUTE = OFF，IGNORE_DUP_KEY = OFF，ALLOW_ROW_LOCKS = ON，ALLOW_PAGE_LOCKS = ON）ON [PRIMARY]
  )
开 [主要]

去

ALTER PROCEDURE [进口].[Get_Invoice_Number]
(
  @InvoiceNumber INT 输出
)
作为
  开始
      声明 @NewNumber INT
      声明 @MinNumber INT

 BEGIN TRAN

  SELECT @MinNumber = MIN(InvoiceNumber)
  FROM   Imports.Invoices_Numbers

  IF @MinNumber > 1
    BEGIN
        SET IDENTITY_INSERT Imports.Invoices_Numbers ON;

        INSERT Imports.Invoices_Numbers
        (
          Invoicenumber
          ,Deleted
          ,Used
        )
        VALUES
        (
          1
          ,0
          ,1
        )
        SET IDENTITY_INSERT Imports.Invoices_Numbers OFF;
        SET @NewNumber=1
    END
  ELSE
    BEGIN
        WITH Gaps
             AS (SELECT TOP 1 a.InvoiceNumber + 1 AS GapValue
                 FROM   Imports.Invoices_Numbers a
                 WHERE  NOT EXISTS
                            (SELECT *
                             FROM   Imports.Invoices_Numbers b
                             WHERE  b.InvoiceNumber = a.InvoiceNumber + 1)
                        AND a.InvoiceNumber <
                            (SELECT MAX(InvoiceNumber)
                             FROM   Imports.Invoices_Numbers))
        SELECT @NewNumber = GapValue
        FROM   Gaps

        IF @NewNumber IS NULL
          BEGIN
              SELECT TOP 1 @NewNumber = InvoiceNumber
              FROM   Imports.Invoices_Numbers
              WHERE  Used = 0
                     AND Deleted = 0
              ORDER  BY InvoiceNumber

              IF @NewNumber IS NULL
                BEGIN
                    INSERT Imports.Invoices_Numbers
                    (
                      Deleted
                      ,Used
                    )
                    VALUES
                    (
                      0
                      ,1
                    )
                    SELECT @NewNumber = SCOPE_IDENTITY ()
                END
              ELSE
                BEGIN
                    UPDATE Imports.Invoices_Numbers
                    SET    Used = 1
                    WHERE  InvoiceNumber = @NewNumber
                END
          END
        ELSE
          BEGIN
              SET IDENTITY_INSERT Imports.Invoices_Numbers ON;

              INSERT Imports.Invoices_Numbers
              (
                Invoicenumber
                ,Deleted
                ,Used
              )
              VALUES
              (
                @NewNumber
                ,0
                ,1
              )
              SET IDENTITY_INSERT Imports.Invoices_Numbers OFF;
          END
    END

  SELECT @InvoiceNumber = @NewNumber

  COMMIT TRAN 
```

结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:27:50.820

您的解决方案看起来有点复杂。`set identity_insert`除了数据导入任务之外，我不建议使用它。

为了确保唯一性，我首先添加一个唯一约束：

```
alter table Invoices add constraint UX_Invoices_InvoiceNr unique 
```

然后您可以使用这样的 SQL 语句插入发票：

```
while 1=1
    begin        
    declare @new_nr int
    select  @new_nr = max(InvoiceNr) + 1
    from    dbo.Invoices

    if @new_nr is null
        set @new_nr = 1

    insert  dbo.Invoices
            (InvoiceNr, ...)
    values  (@new_nr, ...)

    if @@rowcount = 1
        break
    end 
```

# php - 使用 preg_match 将无效的 html 特殊字符替换为 html 特殊字符代码

> ID：10931262
> 
> 赞同：0
> 
> 时间：2012-06-07T11:54:26.780
> 
> 标签：php, mysql

```
<?php
    $tr_no = mysql_num_rows($query);
    $ii = 0; //iterator;
    while($news = mysql_fetch_array($query))

        //replacing special characters
        $replacename = eregi_replace(" ",  "-", $news['3']);
        $pattern = array();
        $pattern[0] = '-';
        $pattern[1] = "'";
        $replace = array();
        $replace[0] = '&#45;';
        $replace[1] = '&#39;';
        $news['2'] = preg_replace($pattern,$replace,$news['2']);
        $news['1'] = preg_replace($pattern,$replace,$news['1']);
        echo "<div style='width: 600px;' align='center'>";
        if($ii % 2 == 0){
            echo "<div style='width: 290px; height: 350px; float: left; padding:5px;'><h3 style='color:#ff0000; font-size: 14px;'>".$news['2']."</h3><p style='font-size:12px;'>".$news['1']."...</p><p><a href=\"".$href ."/". $replacename ."/item/".$news['0']."\">read more...</a></p></div>";
        }
        if($ii % 2 == 1){
            echo "<div style='width: 290px; height: 350px; float: left; padding:5px;'><h3 style='color:#ff0000; font-size: 14px;'>".$news['2']."</h3><p style='font-size:12px;'>".$news['1']."...</p><p><a href=\"".$href ."/". $replacename ."/item/".$news['0']."\">read more...</a></p></div>";
        }
        echo "</div>";
        $ii++;
    }
?> 
```

代码在循环时从数据库中输出字符串，但是在html格式中有些字符出现无效，详见：http: [//ipaidabribenaija.com/newsletter2.php](http://ipaidabribenaija.com/newsletter2.php) 我也用过`str_replace()`代替`preg_replace()`，但是函数在这个中无效情况。

请问我怎样才能完成这个任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:02:31.267

尝试

```
$str = mb_decode_numericentity($str, array(0, 0x10FFFF, 0, 0xFFFFFF), 'UTF-8'); 
```

IE

```
$news[2] =  mb_decode_numericentity($news[2], array(0, 0x10FFFF, 0, 0xFFFFFF), 'UTF-8'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:09:05.067

如果不是编码/解码问题，为什么不尝试使用[htmlentities](http://php.net/manual/en/function.htmlentities.php) php 的功能？

# ios - iOS SDK 中的委托内存泄漏问题

> ID：10931267
> 
> 赞同：1
> 
> 时间：2012-06-07T11:54:44.320
> 
> 标签：ios, memory-leaks, delegates

我的 ios sdk 代理中有内存泄漏问题。请在此处查看图片

[http://screencast.com/t/tIZjknBT](http://screencast.com/t/tIZjknBT)

如果我回到这个观点，它就会崩溃，如果我保留它，通过 [self.delegate retain]; 然后它不会崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:41:26.917

首先，将其用于烦人的警告消息：http: [//jomnius.blogspot.ro/2011/09/declaration-of-struct-sockaddrin-will.html](http://jomnius.blogspot.ro/2011/09/declaration-of-struct-sockaddrin-will.html)

第二，为什么要保留代表？我通常将它作为非原子的，保留类属性而无需手动保留它......

崩溃可能与此无关，您更有可能尝试在某处访问释放对象。我的建议是评论/删除保留行，启用 NSZombies（[如何在 Xcode 中启用 NSZombie？](https://stackoverflow.com/questions/5386160/how-to-enable-nszombie-in-xcode)），然后告诉我们有关崩溃的更多信息

# c# - 如何仅使用 linq 将 xml 解析为对象树？

> ID：10931268
> 
> 赞同：1
> 
> 时间：2012-06-07T11:54:49.653
> 
> 标签：c#, linq

我正在尝试将 xml 解析为对象的层次结构，但我不确定如何正确递归层次结构。我确实有一个粗略的解决方案（不是一个好的解决方案），即调用 GetChild 来解析 XElement 并返回一个集合。我希望有人知道如何在纯 linq 表达式中实现这一点，即。将 Parent-Child-Item 关系填充到 List 中，而无需调用内联函数，如 GetChild()

谢谢

```
var element = XElement.Parse(@"<Root RegisterVersion='1.0' xmlns='http://www.test.com.au/docs/schemas' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.test.com/docs/schemas/spin/surcharge http://www.test.com/docs/schemas/test.xsd'>
                            <Parent id='1' name='parent1'>
                                <Child id='1' name='child1'>
                                    <Item id='1' name='someitem'></Item>
                                </Child>
                            </Parent>
                            <Parent id='2' name='parent2'>
                                <Child id='2' name='child2'>
                                    <Item id='2' name='someotheritem'></Item>
                                </Child>
                            </Parent>
                            </Root>
                            ");

XNamespace ns = element.Name.Namespace;

var list =
 from compileItem in element.Elements (ns + "Parent") 
 select new Parent
 {
    Id = compileItem.Attribute("id").Value.ToString(),
    Name = compileItem.Attribute("name").Value.ToString(),
    children = GetChild(compileItem)
            // this call here I'd like to replace with another linq select
 };

 public List<Child> GetChild(XElement frag)
 {
           //etc 
 }
 public List<Item> GetItem(XElement frag)
 { 
        //etc
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:12:55.960

小控制台应用程序。老实说，它的功能更具可读性。

```
public class Parent
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public List<Child> Childrens { get; set; }
    }

    public class Child
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public List<Item> Items { get; set; }
    }
    public class Item
    {
        public int Id { get; set; }
        public string Name { get; set; }
    }

    internal class Program
    {
        private class ADSetupInformation
        {
            public static void Main()
            {

                var element =
                    XElement.Parse(
                        @"<Root RegisterVersion='1.0' xmlns='http://www.test.com.au/docs/schemas' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.test.com/docs/schemas/spin/surcharge http://www.test.com/docs/schemas/test.xsd'>
                            <Parent id='1' name='parent1'>
                                <Child id='1' name='child1'>
                                    <Item id='1' name='someitem'></Item>
                                </Child>
                            </Parent>
                            <Parent id='2' name='parent2'>
                                <Child id='2' name='child2'>
                                    <Item id='2' name='someotheritem'></Item>
                                </Child>
                            </Parent>
                            </Root>
                            ");

                XNamespace ns = element.Name.Namespace;

var list =
                    element.Elements(ns + "Parent")
                        .Select(compileItem => new Parent
                                                   {
                                                       Id = Convert.ToInt32(compileItem.Attribute("id").Value),
                                                       Name = compileItem.Attribute("name").Value,
                                                       Childrens = compileItem.Elements(ns + "Child")
                                                           .Select(child => new Child
                                                                                {
                                                                                    Id = Convert.ToInt32(child.Attribute("id").Value),
                                                                                    Name = child.Attribute("name").Value,
                                                                                    Items = child.Elements(ns + "Item")
                                                                                        .Select(xe => new Item()
                                                                                                          {
                                                                                                              Id = Convert.ToInt32(xe.Attribute("id").Value),
                                                                                                              Name = xe.Attribute("name").Value,
                                                                                                          }).ToList()
                                                                                }).ToList()                             
                                                   }); 
```

# jquery - 使用 jQuery AJAX 捕获 404 状态

> ID：10931270
> 
> 赞同：23
> 
> 时间：2012-06-07T11:54:55.377
> 
> 标签：jquery, http-status-code-404

我有这个代码：

```
$.ajax({ cache: false,
    url: "/Admin/Contents/GetData",
    data: { accountID: AccountID },
    success: function (data) {
        $('#CityID').html(data);
    },
    error: function (ajaxContext) {
        alert(ajaxContext.responseText)
    }
}); 
```

我仍然对 ajaxContext 以及如何捕获 404 返回码感到困惑。不过我还有一个问题。我正在阅读有关成功和失败编码的内容，并且在最新版本的 jQuery 中不再使用错误。

所以我应该更改我的代码以使用完成并失败。那么我如何检查 404 呢？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-07T12:04:19.923

按如下方式替换您的错误函数...

```
error:function (xhr, ajaxOptions, thrownError){
    if(xhr.status==404) {
        alert(thrownError);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T12:04:15.993

404 错误将由连接到该`error`属性的匿名函数处理。除了对 URL 的成功 HTTP 请求（即 2xx）之外的任何内容都会触发错误方法。以下将适用于您的目的：

```
error : function(jqXHR, textStatus, errorThrown) { 
    if(jqXHR.status == 404 || errorThrown == 'Not Found') 
    { 
        console.log('There was a 404 error.'); 
    }
} 
```

当他们提到在 jQuery 文档中删除`success`和`error`函数时，他们指的是 jqXHR 类的那些，而不是`$.ajax()`.

# javascript - 如何使用 JavaScript 添加/减去日期？

> ID：10931288
> 
> 赞同：71
> 
> 时间：2012-06-07T11:55:54.640
> 
> 标签：javascript, jquery, date, jquery-ui-datepicker

我想让用户使用 JavaScript 轻松地添加和减去日期，以便按日期浏览他们的条目。

日期格式为：“mm/dd/yyyy”。我希望他们能够单击“下一步”按钮，如果日期是：“06/01/2012”，那么在单击下一步时，它应该变为：“06/02/2012”。如果他们点击“上一个”按钮，那么它应该变成“2012 年 5 月 31 日”。

它需要跟踪闰年、一个月中的天数等。

有任何想法吗？

PS 使用 AJAX 从服务器获取日期不是一种选择，它有点滞后，也不是客户端想要的用户体验。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-06-07T12:00:53.110

**代码：**

```
var date = new Date('2011', '01', '02');
alert('the original date is ' + date);
var newdate = new Date(date);

newdate.setDate(newdate.getDate() - 7); // minus the date

var nd = new Date(newdate);
alert('the new date is ' + nd);
```

**使用日期选择器：**

```
$("#in").datepicker({
    minDate: 0,
    onSelect: function(dateText, inst) {
       var actualDate = new Date(dateText);
       var newDate = new Date(actualDate.getFullYear(), actualDate.getMonth(), actualDate.getDate()+1);
        $('#out').datepicker('option', 'minDate', newDate );
    }
});

$("#out").datepicker();​ 
```

[JSFiddle 演示](http://jsfiddle.net/2qzjg/)

可能会派上用场的额外内容：

```
getDate()   Returns the day of the month (from 1-31)
getDay()    Returns the day of the week (from 0-6)
getFullYear()   Returns the year (four digits)
getHours()  Returns the hour (from 0-23)
getMilliseconds()   Returns the milliseconds (from 0-999)
getMinutes()    Returns the minutes (from 0-59)
getMonth()  Returns the month (from 0-11)
getSeconds()    Returns the seconds (from 0-59) 
```

**好链接：** [MDN 日期](http://jsfiddle.net/2YkeK/)

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-08-25T01:33:28.017

您需要在 javascript Date 对象中使用`getTime()`和`setTime()`添加或减去时间。在达到 1、30、31 等月份的限制时，使用`setDate()`and将导致错误。`getDate()`

使用 setTime 允许您以毫秒为单位设置偏移量，并让 Date 对象计算其余部分：

```
var now=new Date();
var yesterdayMs = now.getTime() - 1000*60*60*24*1; // Offset by one day;
now.setTime( yesterdayMs ); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-06-07T12:00:13.823

```
startdate.setDate(startdate.getDate() - daysToSubtract);

startdate.setDate(startdate.getDate() + daysToAdd); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-06-07T12:04:42.697

JavaScript`Date`对象可以在这里提供帮助。

第一步是将这些字符串转换为`Date`实例。这很容易做到：

```
var str = "06/07/2012"; // E.g., "mm/dd/yyyy";
var dt = new Date(parseInt(str.substring(6), 10),        // Year
                  parseInt(str.substring(0, 2), 10) - 1, // Month (0-11)
                  parseInt(str.substring(3, 5), 10));    // Day 
```

然后你可以进行各种有用的计算。JavaScript 日期了解闰年等。他们使用了一个理想化的“一天”概念，即*86,400*秒长。它们的基本价值是自大纪元（1970 年 1 月 1 日午夜）以来的毫秒数；对于大纪元之前的日期，它可以是负数。

更多关于[MDN 页面的信息`Date`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)。

您也可以考虑使用[MomentJS 之](http://momentjs.com)类的库，这将有助于解析、进行日期数学运算、格式化......

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-19T16:16:41.403

```
//In order to get yesterday's date in mm/dd/yyyy.

function gimmeYesterday(toAdd) {
            if (!toAdd || toAdd == '' || isNaN(toAdd)) return;
            var d = new Date();
            d.setDate(d.getDate() - parseInt(toAdd));
var yesterDAY = (d.getMonth() +1) + "/" + d.getDate() + "/" + d.getFullYear();
$("#endDate").html(yesterDAY);
        }
$(document).ready(function() {
gimmeYesterday(1);
}); 
```

你可以在这里试试：http: [//jsfiddle.net/ZQAHE/](http://jsfiddle.net/ZQAHE/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-07T12:02:23.890

可能这会有所帮助

```
 <script type="text/javascript" language="javascript">
        function AddDays(toAdd) {
            if (!toAdd || toAdd == '' || isNaN(toAdd)) return;
            var d = new Date();
            d.setDate(d.getDate() + parseInt(toAdd));

            document.getElementById("result").innerHTML = d.getDate() + "/" + d.getMonth() + "/" + d.getFullYear();
        }

function SubtractDays(toAdd) {
            if (!toAdd || toAdd == '' || isNaN(toAdd)) return;
            var d = new Date();
            d.setDate(d.getDate() - parseInt(toAdd));

            document.getElementById("result").innerHTML = d.getDate() + "/" + d.getMonth() + "/" + d.getFullYear();
        }
    </script>
    ---------------------- UI ---------------
        <div id="result">
        </div>
        <input type="text" value="0" onkeyup="AddDays(this.value);" />
        <input type="text" value="0" onkeyup="SubtractDays(this.value);" /> 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-06-07T12:12:05.087

在 javascript 中处理日期总是有点麻烦。我总是最终使用图书馆。Moment.js 和 XDate 都很棒：

[http://momentjs.com/](http://momentjs.com/)

[http://arshaw.com/xdate/](http://arshaw.com/xdate/)

小提琴：

[http://jsfiddle.net/39fWa/](http://jsfiddle.net/39fWa/)

```
var $output = $('#output'),
    tomorrow = moment().add('days', 1);

$('<pre />').appendTo($output).text(tomorrow);

tomorrow = new XDate().addDays(-1);

$('<pre />').appendTo($output).text(tomorrow); 
```

​</p>

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-03-18T11:05:00.407

我喜欢的方式是，如果您有一个日期对象，您可以从中减去另一个日期对象以获得差异。日期对象基于某个日期的毫秒数。

```
var date1 = new Date(2015, 02, 18); // "18/03/2015", month is 0-index
var date2 = new Date(2015, 02, 20); // "20/03/2015"

var msDiff = date2 - date1; // 172800000, this is time in milliseconds
var daysDiff = msDiff / 1000 / 60 / 60 / 24; // 2 days 
```

所以这就是你减去日期的方式。现在如果你想添加它们？date1 + date2 给出一个错误。但如果我想以毫秒为单位获取时间，我可以使用：

```
var dateMs = date1 - 0;
// say I want to add 5 days I can use
var days = 5;
var msToAdd = days * 24 * 60 * 60 * 1000; 
var newDate = new Date(dateMs + msToAdd); 
```

通过减去 0，您可以将日期对象转换为毫秒格式。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-11-21T10:37:59.273

```
var date = new Date('your date string here'); // e.g. '2017-11-21'

var newdate = new Date(date.getTime() + 24*60*60*1000 * days) // days is the number of days you want to shift the date by 
```

这是在数月和数年内进行加/减时唯一可靠工作的解决方案。在花了太多时间处理 getDate 和 setDate 方法，试图调整月/年的变化之后，才意识到这一点。

decasteljau (in this thread) 已经回答了这个问题，但只是想强调这种方法的实用性，因为 90% 的答案都推荐 getDate 和 setDate 方法。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-06-07T11:59:51.897

您可以使用本机 javascript Date 对象来跟踪日期。它会给你当前日期，让你跟踪日历特定的东西，甚至帮助你管理不同的时区。您可以添加和减去天/小时/秒来更改您正在使用的日期或计算新日期。

查看此对象参考以了解更多信息：

[日期](http://www.w3schools.com/jsref/jsref_obj_date.asp)

希望有帮助！

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-01-13T10:21:00.003

所有这些添加日期的功能都是错误的。您将错误的月份传递给 Date 函数。有关该问题的更多信息：http: [//www.domdigger.com/blog/?p=9](http://www.domdigger.com/blog/?p=9)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-03-02T15:13:45.940

我正在使用的东西（需要jquery），在我的脚本中我今天需要它，但当然你可以相应地编辑它。

HTML：

```
<label>Date:</label><input name="date" id="dateChange" type="date"/>
<input id="SubtractDay" type="button" value="-" />
<input id="AddDay" type="button" value="+" /> 
```

JavaScript：

```
 var counter = 0;

$("#SubtractDay").click(function() {
    counter--;
    var today = new Date();
    today.setDate(today.getDate() + counter);
    var formattedDate = new Date(today);
    var d = ("0" + formattedDate.getDate()).slice(-2);
    var m = ("0" + (formattedDate.getMonth() + 1)).slice(-2);
    var y = formattedDate.getFullYear();
    $("#dateChange").val(d + "/" + m + "/" + y);
});
$("#AddDay").click(function() {
    counter++;
    var today = new Date();
    today.setDate(today.getDate() + counter);
    var formattedDate = new Date(today);
    var d = ("0" + formattedDate.getDate()).slice(-2);
    var m = ("0" + (formattedDate.getMonth() + 1)).slice(-2);
    var y = formattedDate.getFullYear();
    $("#dateChange").val(d + "/" + m + "/" + y);
}); 
```

[jsfiddle](https://jsfiddle.net/noyot2yq/ "jsfiddle")

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-12-24T14:29:17.290

我用过的最好的日期工具是[date-fns](https://date-fns.org/)有几个原因：

*   使用原生 JavaScript`Date`格式。
*   不可变的；使用纯函数构建并始终返回一个新的日期实例，而不是更改传递的。
*   模块化的; 只导入您需要的功能。

包管理器：

`"date-fns": "^1.30.1"`

代码：

`import { addDays, subDays } from 'date-fns'`

```
let today = new Date()
let yesterday = subDays(today, 1)
let tomorrow = addDays(today, 1) 
```

简单而真棒。

# ruby-on-rails - AWS::S3::Errors::SignatureDoesNotMatch 与本地开发中的 Paperclip 和 Amazon S3

> ID：10931304
> 
> 赞同：1
> 
> 时间：2012-06-07T11:56:52.083
> 
> 标签：ruby-on-rails, ruby, heroku, amazon-s3, paperclip

**此问题已解决。结果我花了太多时间研究这个问题，因为它看起来很常见，而且没有足够的时间仔细检查我的秘密访问密钥是否已正确复制/粘贴到我的本地环境中。**

我已经阅读了大约 20 个关于此的问题，但到目前为止没有一个对我有帮助。我在创建控制器中不断收到 SignatureDoesNotMatch 异常，但我不知道为什么。

我的班级（由于该项目未发布，因此小幅重命名为“S3”）：

```
class S3File < ActiveRecord::Base
  has_attached_file :s3_attachment,
    storage: :s3,
    bucket: ENV['S3_BUCKET_NAME'],
    s3_credentials: {
      access_key_id: ENV['AWS_ACCESS_KEY_ID'],
      secret_access_key: ENV['AWS_SECRET_ACCESS_KEY']
    },
    path: ':id/temp.jpg'
end 
```

我在 .env 文件中定义了 ENV 变量，并用工头启动了我的服务器，并且我已经验证了这些值在“工头运行 rails 控制台”中是正确的。

这对我来说从来没有用过，但到目前为止我已经尝试了几种路径，我已经安装了 imagemagick，并包含了以下 gem：

```
# rails -v Rails 3.2.2
# ruby -v Ruby 1.9.2p290
gem 'paperclip' # paperclip (3.0.4) in Gemfile.lock
gem 'aws-s3' # aws-s3 (0.6.3) in Gemfile.lock
gem 'aws-sdk' # aws-sdk (1.5.2) in Gemfile.lock
gem 'rmagick' # rmagick (2.13.1) in Gemfile.lock 
```

最后我的 _form 部分看起来像：

```
<%= form_for @s3_file do |f| %>
  <div class="field">
    <%= f.file_field :email_attachment %>    
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

我会向任何需要它的人提供更多信息，但在这一点上我很难过。感谢任何能够提供帮助的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:16:09.313

我一直看到人们尝试将 aws-s3 和 aws-sdk 一起使用，但这会[导致冲突](https://stackoverflow.com/a/10896367/167614)，因为它们都使用相同的模块命名空间。我并不是说这一定是你的问题，但这绝对没有帮助。Paperclip 需要 aws-sdk，所以我会从您的 Gemfile 中删除 aws-s3 以开始。如果您仍然遇到错误，我建议您在 has_attached_file 行上方添加一个调试器并检查 ENV 变量以确保它们确实被设置。

# sql-server-2008 - Sql Server 2008 空间查询慢

> ID：10931306
> 
> 赞同：2
> 
> 时间：2012-06-07T11:56:53.627
> 
> 标签：sql-server-2008, geospatial

我有一个数据库，其中包含 2 000 000 行内的数据表，其中 1 个地理类型字段包含点。在另一个数据表中，我有 600 行，其中 1 个地理类型字段包含多边形。

```
This query to retrieve all the POINT in a POLYGON is very slow

SELECT ID_POINT, ID_POLYGON FROM 
             (SELECT ID_POINT, COORD FROM POINT_TABLE) as POINT
             (SELECT ID_POLYGON, COORD FROM POLYGON_TABLE WHERE ID_POLYGON = 276) as POLYGON
         WHERE
             (POINT.Coord.STIntersects(POLYGON.COORD) = 1) 
```

我在每个表中有 1 个空间索引，如下所示：

```
CREATE SPATIAL INDEX [IDX_POLYGON_COORD] ON [dbo].[POLYGON] 
(
    [COORD]
)USING  GEOGRAPHY_GRID 
WITH (
GRIDS =(LEVEL_1 = MEDIUM,LEVEL_2 = MEDIUM,LEVEL_3 = MEDIUM,LEVEL_4 = MEDIUM), 
CELLS_PER_OBJECT = 16, PAD_INDEX  = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO 
```

你能帮我加快这个查询吗？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:22:33.773

这主要取决于您的数据的分布程度，以及您在 Point 表上的索引（我假设存在这样的索引）的大小是否与其中等网格大小相匹配。

理想情况下，您的执行计划应该显示在 Polygon 上搜索以获取第 276 行，然后在 Point 上显示空间索引搜索以获取与多边形相交的那些。它不应该很慢。但是，如果您的 Polygon 表也没有在 id_polygon 上建立索引，那么您可能会发现它在过滤到该行之前尝试加入地理。

# mysql - Ruby On Rails - Rake schema - Max key length is 767 bytes

> ID：10931307
> 
> 赞同：3
> 
> 时间：2012-06-07T11:56:54.423
> 
> 标签：mysql, ruby-on-rails, schema, innodb, max

Im trying to rake db:schema:load but I get the error

```
Mysql2::Error: Specified key was too long; max key length is 767 bytes: CREATE UNIQUE INDEX 
```

From what I understand is that InnoDB only allows a max of 767 bytes in their index... And if you're using utf-8 it should be divided by 3.

But when i try to set a maximum of 100 characters (its not even close to 767) in the schema.rb the error still occurs...

**schema.rb**

```
add_index "friendly_id_slugs", ["slug", "sluggable_type"], :name => "index_friendly_id_slugs_on_slug_and_sluggable_type", :unique => true, :length => { :name => 100, :slug => 100, :sluggable_type => 40 } 
```

**Error**

```
-- add_index("friendly_id_slugs", ["slug", "sluggable_type"], {:name=>"index_friendly_id_slugs_on_slug_and_sluggable_type", :unique=>true, :length=>{:name=>100, :slug=>100, :sluggable_type=>40}})
rake aborted!
Mysql2::Error: Specified key was too long; max key length is 767 bytes: CREATE UNIQUE INDEX `index_friendly_id_slugs_on_slug_and_sluggable_type` ON `friendly_id_slugs` (`slug`, `sluggable_type`) 
```

**MySQL**

```
Your MySQL connection id is 1838
Server version: 5.5.22-0ubuntu1-log (Ubuntu) 
```

What am I missing?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T12:10:08.513

I see two problems in your code:

*   The `limit` parameter should be called `length`
*   On multi-column indexes the `length` parameter should be a hash that specifies the length for both columns: `:length => { :slug => 200, :sluggable_type => 30 }`

Check out the documentation: [http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/SchemaStatements.html#method-i-add_index-label-Creating+an+index+with+specific+key+length](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/SchemaStatements.html#method-i-add_index-label-Creating+an+index+with+specific+key+length).

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-07T12:22:21.623

if you are using mysql 6, one utf char can be 4 (!) bytes.

but more importantly i do not think `add_index` supports `:limit`. It does however support `:length` for column-wise char lengths limits.

# javascript - 带有 javascript 和 Chrome \ CMS 广告管理的 iframe

> ID：10931309
> 
> 赞同：0
> 
> 时间：2012-06-07T11:56:57.513
> 
> 标签：javascript, jquery, google-chrome, iframe, content-management-system

我有一个 CMS 系统，并且我选择了管理广告。现在我有一个文本框，可以在其中粘贴他们的代码，我希望快速显示广告，以便他们可以看到广告以及它是否有效。问题就像这里：[使用 jquery 在 iframe 中动态显示 javascript google 广告的问题](https://stackoverflow.com/questions/3473416/problem-to-display-dynamically-a-javascript-google-ad-in-an-iframe-using-jquery)（阅读第一个答案）。

我想知道是否有可能做到这一点，或者唯一的选择是他们只能粘贴代码，但看不到 CMS 本身的实际效果。

**编辑** 我正在添加代码：

```
 <div class="block" data="500" style="margin-top: 5px; height: 644px;">
    <span class="brow" style="float: right;"><span class="label pla">תצוגה מקדימה:</span><div class="dprev"></div></span>
    <span class="brow" style="float: left; margin-top: 0;"><span class="label">הקוד:</span><br />
    <form action="pages/ad.php" target="preview1" method="post">
        <textarea data="1" name="textbox" class="dcode" style="float: none; resize: none; width: 312px; height: 543px;">
            <div style="width:160px;border:solid 1px #E5E5E5">
            <INPUT id="merlin_q3" type="hidden" value="1">
            <SCRIPT type=text/javascript>
            function fnMerlinAddUrl(qStr,val) {
            try{return('&' + qStr + '=' + val)}
            catch(e){}
            }
            //params
            merlin_partnerid = "3541";
            merlin_search="q3";
            merlin_search_result= '6';
            merlin_start_offset= 0;
            merlin_cols = '1';
            merlin_lang="heb";
            merlin_width ="90%";
            merlin_url = "" ;
            merlin_AdType="short_title_heb";
            merlin_Iframe_Unique_Index="3";
            merlin_default = "1";
            merlin_decodeKeyword = escape(document.getElementById("merlin_q3").value);
            var path='http://www.merlin.co.il/merlin_3rdparty/merlin_3rdparty.asp'; //&all=news
            merlin_url=path+"?utf=0&fixed=marimedia&modaa=mo"+fnMerlinAddUrl("partnerid",merlin_partnerid);
            merlin_url+=fnMerlinAddUrl("lang",merlin_lang);
            merlin_url+=fnMerlinAddUrl("AdType",merlin_AdType);
            merlin_url+=fnMerlinAddUrl("qtyResult",merlin_search_result);
            merlin_url+=fnMerlinAddUrl("ScriptIndex",merlin_Iframe_Unique_Index);
            merlin_url+=fnMerlinAddUrl("start_offset",merlin_start_offset);
            merlin_url+=fnMerlinAddUrl("cols",merlin_cols);
            merlin_url+=fnMerlinAddUrl("merlin_default",merlin_default);
            merlin_url+='&q=' +merlin_decodeKeyword;
            merlin_url+='&urlTag='+ "http%3A%2F%2Ftracking.merlin.co.il%2Faff_c%3Foffer_id%3D58%26aff_id%3D1216%26file_id%3D1652";
            document.write("<table width=100%><tr><td valign=top id='Merlin_tdInsert3'></td></tr></table>");
            var MerlinSS_OBJ=document.getElementsByTagName("HEAD");
            if(!MerlinSS_OBJ)document.createElement('HEAD');
            var  oScript= document.createElement("script");
            oScript.setAttribute("src",merlin_url); 
            document.getElementsByTagName("HEAD")[0].appendChild(oScript);
            </SCRIPT>
            </div><img src="http://tracking.merlin.co.il/aff_i?offer_id=58&aff_id=1216&file_id=1652" width="1" height="1">
        </textarea>
    </form></span>
    <button style="position: absolute; margin-right: 330px; bottom: 14px;"><img src="img/v.png" style="margin-top: -2px; margin-left: 2px;" alt="add" height="28"/>שמור שינויים</button>
</div>
<h1 style="margin-top: -45px; position: relative;right: 574px;">פרסומת 2:</h1>
<div class="block" data="500" style="margin-right: 45px; height: 644px; margin-top: 5px;">
    <span class="brow" style="float: right;"><span class="label pla">תצוגה מקדימה:</span><div class="dprev"></div></span>
    <span class="brow" style="float: left; margin-top: 0;"><span class="label">הקוד:</span><br />
    <form action="pages/ad.php" target="preview2" method="POST">    
        <textarea data="2" class="dcode" style="float: none; resize: none; width: 312px; height: 543px;">
            <script type="text/javascript"><!--
            google_ad_client = "pub-2151667935419035";
            /* 120x600, created 7/17/08 */
            google_ad_slot = "8233032726";
            google_ad_width = 120;
            google_ad_height = 600;
            //-->
            </script>
            <script type="text/javascript"
            src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
            </script>
        </textarea>
    </form></span>
    <button style="position: absolute; margin-right: 330px; bottom: 14px;"><img 

    src="img/v.png" style="margin-top: -2px; margin-left: 2px;" alt="add" height="28"/>שמור שינויים</button>
    </div>
    <script>
    $("textarea.dcode").each(function (){
        $(this).closest("div").children("span:first-child").children("div.dprev").html('<iframe class="adprev" name="preview'+$(this).attr("data")+'" src="pages/ad.php"></iframe>');
        $(this).val($(this).text());
        $('form[target="preview'+$(this).attr("data")+'"]').submit();
    }).keyup(function (){
        $(this).closest("div").children("span:first-child").children("div.dprev").html('<iframe class="adprev" name="preview'+$(this).attr("data")+'" src="pages/ad.php"></iframe>');
        $('form[target="preview'+$(this).attr("data")+'"]').submit();
    });
    </script> 
```

那里还有其他一些语言，但这并不重要，正如您所见，我有两个 iframe，但代码仅适用于第一个。（第一个是梅林广告，第二个是谷歌广告，但即使我把梅林放在第二个文本框中它也不起作用）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:15:17.987

我自己没有尝试过这个解决方案，但你可能需要做这样的事情：

1.  使用服务器中的 url 创建动态 iframe 并将您的文本框值传递给那里（比方说`iframe1.html?textbox=<encoded text from the textbox>`）。这将被允许，因为您在同一域中执行此操作。
2.  在服务器上，在渲染时`iframe1.html`再插入一个 iframe，其中包含您现在尝试执行的操作。现在对浏览器来说似乎是静态的！
3.  您将在 iframe 中拥有 iframe。但是您将不再通过 javascript 创建跨域 iframe。
4.  利润！

希望它会有所帮助！如果可以，请告诉我，我自己也很感兴趣）

# android - Android ICS - 强制使用 DroidSans 作为衬线字体

> ID：10931313
> 
> 赞同：0
> 
> 时间：2012-06-07T11:57:17.557
> 
> 标签：android, android-layout, fonts

有人知道如何在 android 应用程序中强制使用 DroidSans 字体作为 sans 字体而不是 Roboto？

显然 Roboto 字体有一个错误，它不能正确显示重音符号，如下例所示：лю́ди

衬线字体（似乎仍然是 DroidSerif 字体）正确显示（ю 上的重音），但没有 sans 字体（ю 之后的重音）！

新的 sans 字体似乎是 Roboto，我想改用 DroidSans，它可以正确显示内容。

有什么简单的方法可以解决这个问题吗？

非常感谢提前，

塞巴斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:08:50.243

我认为您必须手动将 DroidSans.ttf 添加到您的项目中，然后将其设置为您的文本字段。

将 DroidSans.ttf 放在项目的 assets 文件夹中。使用它来将它应用到所有 TextView 的（这个例子是当你也有一个粗体字体时）：

```
public static void setDroidSans(final ViewGroup view,final  Context context){

    Typeface droidFont=Typeface.createFromAsset(context.getAssets(),  "fonts/DroidSans.ttf");
    Typeface droidFontBold=Typeface.createFromAsset(context.getAssets(),  "fonts/DroidSansBold.ttf");
    for (int i = 0; i < view.getChildCount(); i++) {
        checkForTextview(view.getChildAt(i),droidFont,droidFontBold);
    }   

}

private static void checkForTextview(View view, Typeface typeface, Typeface typefaceBold){
    if(view instanceof ViewGroup){
        ViewGroup v=(ViewGroup) view;
        for (int i = 0; i < v.getChildCount(); i++) {
            checkForTextview(v.getChildAt(i),typeface,typefaceBold);
        }
    }
    else if(view instanceof TextView){
        if(((TextView)view).getTypeface() == Typeface.DEFAULT_BOLD)
            ((TextView)view).setTypeface(typefaceBold);
        else 
            ((TextView)view).setTypeface(typeface);
    }

} 
```

使用它的例子：

```
ViewGroup myRootView= (ViewGroup)findViewById(R.id.rootView);
setDroidSans(myRootView, getApplicationContext()) 
```

# angularjs - 如何防止锚标签上的默认值？

> ID：10931315
> 
> 赞同：348
> 
> 时间：2012-06-07T11:57:22.957
> 
> 标签：angularjs, preventdefault

假设我有一个锚标签，例如

```
<a href="#" ng-click="do()">Click</a> 
```

如何防止浏览器导航到**AngularJS**中的 # ？

* * *

## 回答 #1

> 赞同：322
> 
> 时间：2012-07-26T15:37:30.483

根据[ngHref](http://docs.angularjs.org/api/ng.directive%3angHref)的文档，您应该可以省略 href 或执行 href=""。

```
<input ng-model="value" /><br />
<a id="link-1" href ng-click="value = 1">link 1</a> (link, don't reload)<br />
<a id="link-2" href="" ng-click="value = 2">link 2</a> (link, don't reload)<br />
<a id="link-4" href="" name="xx" ng-click="value = 4">anchor</a> (link, don't reload)<br />
<a id="link-5" name="xxx" ng-click="value = 5">anchor</a> (no link)<br /> 
```

* * *

## 回答 #2

> 赞同：261
> 
> 时间：2013-08-01T16:21:36.893

**更新**：我已经改变了对这个解决方案的想法。经过更多的开发和时间，我相信解决这个问题的更好方法是执行以下操作：

```
<a ng-click="myFunction()">Click Here</a> 
```

然后更新你`css`有一个额外的规则：

```
a[ng-click]{
    cursor: pointer;
} 
```

它更简单，提供完全相同的功能，效率更高。希望这可能对将来查找此解决方案的其他人有所帮助。

* * *

*以下是我之前的解决方案，我将其留在这里只是为了遗留目的：*

如果您经常遇到此问题，可以使用以下简单指令来解决此问题：

```
app.directive('a', function() {
    return {
        restrict: 'E',
        link: function(scope, elem, attrs) {
            if(attrs.ngClick || attrs.href === '' || attrs.href === '#'){
                elem.on('click', function(e){
                    e.preventDefault();
                });
            }
        }
   };
}); 
```

它检查所有锚标记 ( `<a></a>`) 以查看它们的`href`属性是空字符串 ( `""`) 还是散列 ( `'#'`) 或有`ng-click`赋值。如果它发现任何这些条件，它就会捕获事件并阻止默认行为。

唯一的缺点是它为所有锚标签运行此指令。因此，如果您的页面上有很多锚标记，并且您只想阻止其中一小部分的默认行为，那么该指令不是很有效。然而，我几乎总是想要`preventDefault`，所以我在我的 AngularJS 应用程序中使用了这个指令。

* * *

## 回答 #3

> 赞同：243
> 
> 时间：2012-06-07T12:20:39.830

您可以将 $event 对象传递给您的方法，并`$event.preventDefault()`对其进行调用，这样就不会发生默认处理：

```
<a href="#" ng-click="do($event)">Click</a>

// then in your controller.do($event) method
$event.preventDefault() 
```

* * *

## 回答 #4

> 赞同：111
> 
> 时间：2013-01-04T22:13:35.293

我更喜欢对这类事情使用**指令。**这是一个例子

```
<a href="#" ng-click="do()" eat-click>Click Me</a> 
```

和指令代码`eat-click`：

```
module.directive('eatClick', function() {
    return function(scope, element, attrs) {
        $(element).click(function(event) {
            event.preventDefault();
        });
    }
}) 
```

现在您可以将`eat-click`属性添加到任何元素，它将`preventDefault()`自动获得 'ed。

**好处：**

1.  您不必将丑陋的`$event`对象传递给您的`do()`函数。
2.  您的控制器更易于单元测试，因为它不需要存根`$event`对象

* * *

## 回答 #5

> 赞同：56
> 
> 时间：2014-05-26T19:18:30.310

虽然 Renaud 给出了一个很好的解决方案

```
<a href="#" ng-click="do(); $event.preventDefault()">Click</a> 
```

我个人发现在某些情况下你还需要 $event.stopPropagation() 以避免一些副作用

```
<a href="#" ng-click="do(); $event.preventDefault(); $event.stopPropagation();">
    Click</a> 
```

将是我的解决方案

* * *

## 回答 #6

> 赞同：35
> 
> 时间：2013-02-27T02:33:36.617

我找到的最简单的解决方案是这个：

```
<a href="#" ng-click="do(); $event.preventDefault()">Click</a> 
```

* * *

## 回答 #7

> 赞同：34
> 
> 时间：2013-10-08T06:02:58.070

```
ng-click="$event.preventDefault()" 
```

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2014-03-27T01:41:35.923

所以通读这些答案，我想@Chris 仍然有最“正确”的答案，但它有一个问题，它没有显示“指针”....

所以这里有两种方法可以解决这个问题，而无需添加 cursor:pointer 样式：

1.  使用`javascript:void(0)`代替`#`：

    ```
    <a href="javascript:void(0)" ng-click="doSomething()">Do Something</a> 
    ```

2.  `$event.preventDefault()`在指令中使用`ng-click`（这样您就不会将控制器与 DOM 相关的引用混为一谈）：

    ```
    <a href="#dontGoHere" ng-click="doSomething(); $event.preventDefault()">Do Something</a> 
    ```

就个人而言，我更喜欢前者而不是后者。`javascript:void(0)`具有[此处讨论](https://stackoverflow.com/questions/134845/href-attribute-for-javascript-links-or-javascriptvoid0)的其他好处。该链接中还讨论了“不显眼的 JavaScript”，这是最近令人恐惧的，不一定直接适用于 Angular 应用程序。

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2013-12-20T13:33:54.630

您可以执行以下操作

`href`1.从anchor( `a`)标签中删除属性

2.将css中的指针光标设置为ng click元素

```
 [ng-click],
 [data-ng-click],
 [x-ng-click] {
     cursor: pointer;
 } 
```

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2015-03-17T11:02:07.040

HTML

这里纯 angularjs：在 ng-click 函数附近，您可以通过分隔分号来编写 preventDefault() 函数

```
<a href="#" ng-click="do(); $event.preventDefault(); $event.stopPropagation();">Click me</a> 
```

JS

```
$scope.do = function() {
    alert("do here anything..");
} 
```

（或者）

你可以这样进行，这已经在这里讨论过。

HTML

```
<a href="#" ng-click="do()">Click me</a> 
```

JS

```
$scope.do = function(event) {
    event.preventDefault();
    event.stopPropagation()
} 
```

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2013-09-18T11:20:55.853

既然您正在制作网络应用程序，为什么需要链接？

将您的锚点换成按钮！

```
<button ng-click="do()"></button> 
```

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2015-11-03T14:09:10.057

试试这个我可以看到上面还没有列出的选项：

```
<a href="" ng-click="do()">Click</a> 
```

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2013-03-28T16:05:45.330

避免在 href 上发生事件的最安全方法是将其定义为

```
<a href="javascript:void(0)" ....> 
```

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2014-02-05T16:42:59.953

如果仍然相关：

```
<a ng-click="unselect($event)" />

...

scope.unselect = function( event ) {
 event.preventDefault();
 event.stopPropagation();
}

... 
```

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2014-01-15T07:57:03.487

我会去：

```
<a ng-click="do()">Click</a> 
```

*   因为根据文档，您应该能够离开 href，然后 Angular 将为您处理阻止默认值！

整个这个防止默认的事情一直让我感到困惑，所以**我在那里创建了一个[JSFiddle 来](http://jsfiddle.net/DFMt3/18/) 说明 Angular 何时何地阻止 default**。

JSFiddle 使用 Angular 的 a 指令——所以它应该完全相同。你可以在这里看到源代码：[一个标签源代码](https://github.com/angular/angular.js/blob/master/src/ng/directive/a.js)

我希望这将有助于澄清一些。

我本来希望将文档发布到 ngHref，但由于我的声誉，我不能。

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2014-12-18T17:40:58.227

这就是我一直在做的事情。奇迹般有效！

```
<a href ng-click="do()">Click</a> 
```

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2014-06-25T16:17:04.787

或者，如果您需要内联，那么您可以这样做：

```
<a href="#" ng-click="show = !show; $event.preventDefault()">Click to show</a> 
```

* * *

## 回答 #18

> 赞同：4
> 
> 时间：2017-07-10T20:55:10.253

很多答案似乎是矫枉过正。对我来说，这行得通

```
 <a ng-href="#" ng-click="$event.preventDefault();vm.questionContainer($index)">{{question.Verbiage}}</a> 
```

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2013-09-16T15:23:54.037

我需要存在 href 属性的降级值（当 js 关闭时），所以我不能使用空的 href 属性（或“#”），但上面的代码对我不起作用，因为我需要一个事件（ e) 变量。我创建了自己的指令：

```
angular.module('MyApp').directive('clickPrevent', function() {
  return function(scope, element, attrs) {
    return element.on('click', function(e) {
      return e.preventDefault();
    });
  };
}); 
```

在 HTML 中：

```
<a data-click-prevent="true" href="/users/sign_up" ng-click="openSignUpModal()">Sign up</a> 
```

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2013-09-19T22:31:25.020

借用tenensgent的答案。我喜欢您不必创建自定义指令来添加所有链接。但是，我无法让他在 IE8 中工作。这是最终对我有用的方法（使用 angular 1.0.6）。

请注意，'bind' 允许您使用 angular 提供的 jqLit​​e，因此无需使用完整的 jQuery 进行包装。还需要 stopPropogation 方法。

```
.directive('a', [
    function() {
        return {
            restrict: 'E',
            link: function(scope, elem, attrs) {

                elem.bind('click', function(e){
                    if (attrs.ngClick || attrs.href === '' || attrs.href == '#'){
                        e.preventDefault();
                        e.stopPropagation();
                    }
                })
            }
        };
    }
]) 
```

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2014-11-19T20:42:06.000

在使用锚点进行角度引导下拉时，我遇到了同样的问题。我发现避免不必要的副作用的唯一解决方案（即，由于使用 preventDefault() 而没有关闭下拉菜单）是使用以下内容：

```
 <a href="javascript:;" ng-click="do()">Click</a> 
```

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2016-01-05T04:25:37.550

如果你不想去href...你应该改变你的标记并使用一个按钮而不是一个锚标记，因为从语义上它不是一个锚或链接。相反，如果您有一个按钮进行一些检查然后重定向它应该是一个链接/锚标记而不是一个按钮......用于搜索引擎优化目的以及测试[在此处插入测试套件]。

对于您只想有条件地重定向的链接，例如提示保存更改或确认脏状态...您应该使用 ng-click="someFunction($event)" 并在您的validationError preventDefault 和/或stopPropagation 的someFunction 中。

也**只是因为你可以并不意味着你应该**。javascript:void(0) 在过去运行良好...但是由于邪恶的黑客/破解者浏览器标记了在 href 中使用 javascript 的应用程序/站点...请参阅上面没有理由鸭式..

现在是 2016 年，因为 2010 年应该没有理由在任何地方使用像按钮一样的链接......如果您仍然需要支持 IE8 及以下版本，您需要重新评估您的营业地点。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2015-03-31T21:30:04.437

```
/* NG CLICK PREVENT DEFAULT */

app.directive('ngClick', function () {
    return {
        link: function (scope, element, attributes) {
            element.click(function (event) {
                event.preventDefault();
                event.stopPropagation();
            });
        }
    };
}); 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2016-04-13T11:58:29.627

您应该做的是`href`完全省略该属性。

如果您查看element 指令（它是 Angular 核心的一部分）的[源代码](https://github.com/angular/angular.js/blob/master/src/ng/directive/a.js#L30)，它在第 29 - 31 行声明：`a`

```
if (!element.attr(href)) {
    event.preventDefault();
} 
```

这意味着 Angular 已经在解决没有 href 的链接问题。您仍然存在的唯一问题是css问题。您仍然可以将指针样式应​​用于具有 ng-click 的锚点，例如：

```
a[ng-click] {
    /* Styles for anchors without href but WITH ng-click */
    cursor: pointer;
} 
```

因此，您甚至可以通过使用与执行功能的链接不同的微妙样式来标记真实链接，从而使您的网站更易于访问。

快乐编码！

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2017-08-30T13:39:15.913

您可以在 $location 的 Html5Mode 中禁用 url 重定向以实现目标。您可以在用于页面的特定控制器中定义它。像这样的东西：

```
app.config(['$locationProvider', function ($locationProvider) {
    $locationProvider.html5Mode({
        enabled: true,
        rewriteLinks: false,
        requireBase: false
    });
}]);
```

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2019-11-20T11:33:26.853

如果您使用的是 Angular 8 或更高版本，您可以创建一个指令：

```
import { Directive, HostListener } from '@angular/core';

@Directive({
  selector: '[preventDefault]'
})
export class PreventDefaultDirective {

  @HostListener("click", ["$event"])
  public onClick(event: any): void
  {
    console.log('click');
    debugger;
      event.preventDefault();
  }

} 
```

在组件上的锚标记上，您可以像这样连接它：

```
 <a ngbDropdownToggle preventDefault class="nav-link dropdown-toggle" href="#" aria-expanded="false" aria-haspopup="true" id="nav-dropdown-2">Pages</a> 
```

App Module 应该有它的声明：

```
import { PreventDefaultDirective } from './shared/directives/preventdefault.directive';

@NgModule({
  declarations: [
    AppComponent,
    PreventDefaultDirective 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2021-03-03T12:45:24.217

在我的情况下 Angular: 10 - 工作这个

```
 <a [routerLink]="" (click)="myFunc()"> Click me </a> 
```

更新：此方法将重新加载解析器。谢谢@Meeker

* * *

## 回答 #28

> 赞同：-1
> 
> 时间：2013-05-10T21:11:32.730

另一种选择可能是：

```
<span ng-click="do()">Click</span> 
```

# agda - 是否有在生产中运行的示例 Agda 代码？

> ID：10931316
> 
> 赞同：35
> 
> 时间：2012-06-07T11:57:30.190
> 
> 标签：agda

Agda 是一种很好的编程语言，可以探索依赖类型，玩转直觉类型理论，并试验这些东西的实现。但是已经有用 Agda 编写的“真实”程序的例子了吗？甚至可能是展示其功能的示例（类似于 xmonad 经常被称为“真实”Haskell 程序的示例）？

# handler - 值上传者返回成功

> ID：10931321
> 
> 赞同：0
> 
> 时间：2012-06-07T11:57:51.720
> 
> 标签：handler

我正在使用带有 asp.net 通用处理程序的值上传器，它工作得很好，但是我遇到了返回“成功”的问题，这是我的代码，它总是被 fileuploader.js 理解为失败。

这是我的响应代码：

```
 context.Response.AddHeader("result", "success");
            context.Response.AddHeader("success", "true");
            context.Response.StatusCode = 200; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:26:23.097

这也让我很受挫。我的问题是我没有使用上传器附带的[fileuploader.css 。](https://raw.github.com/valums/file-uploader/master/client/fileuploader.css)如果您不使用它，那么即使在成功下载时也会显示失败消息。它始终存在，但只是在文件上传成功时隐藏，并在失败时显示。这是相关的CSS：

```
.qq-upload-failed-text {
     display: none; 
} 
```

# jakarta-ee - IE的语言问题

> ID：10931326
> 
> 赞同：0
> 
> 时间：2012-06-07T11:58:19.017
> 
> 标签：jakarta-ee, utf-8

我创建了一个页面，其中显示了 Manipuri 语言的下拉菜单。在更改此下拉列表时，将调用一个 javascript 方法，该方法创建另一个页面的 url 并将 URL 中的此选定值设置为请求参数，新页面从请求中获取该值。

现在，这在 Firefox 浏览器中运行良好，但在 IE 上，我得到了一些其他文本而不是所选文本。

我检查了我的浏览器编码是否设置为，`UTF-8`并且我的 jsp 页面也有编码为`UTF-8`，是否还有其他需要检查/更改以纠正此问题的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T16:07:21.340

问题在于 GET URL，将其更改为 POST（使用表单提交和隐藏变量），它有效。

# objective-c - 整数未存储在数据库中（sqlite3）

> ID：10931328
> 
> 赞同：1
> 
> 时间：2012-06-07T11:58:28.173
> 
> 标签：objective-c, ios, sqlite

根据我对上一篇文章中收到的不同答案的理解，我更改了代码。代码如下：

```
float lastClicked = 0.0;

- (void)viewDidLoad
{
[super viewDidLoad];

NSString *contentDirectory;
NSArray *directoryPath;
const char *dbpath = [databasePath UTF8String];

directoryPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
contentDirectory = [directoryPath objectAtIndex:0];

databasePath = [[NSString alloc] initWithString: [contentDirectory stringByAppendingPathComponent: @"MCFRatingDatabase.db"]];

NSFileManager *filemanager = [NSFileManager defaultManager];
if ([filemanager fileExistsAtPath:databasePath] == NO){

    if (sqlite3_open(dbpath, &connectDB) == SQLITE_OK)
    {
        char *errorMessage;
        const char *sql_stmt = "CREATE TABLE IF NOT EXISTS IMAGERATING (CONTENTNAME STRING, RATING FLOAT)";
        if (sqlite3_exec(connectDB, sql_stmt, NULL, NULL, &errorMessage) != SQLITE_OK)
        {
            NSLog(@"FAILED TO CREAT TABLE");
        }
        sqlite3_close(connectDB);

    } else {
        NSLog(@"FAILED TO OPEN/CREATE DATABASE");
    }
}
[filemanager release];

sqlite3_stmt *statement;

if (sqlite3_open(dbpath, &connectDB) == SQLITE_OK)
{
    NSString *querySQL = [NSString stringWithFormat: @"SELECT * FROM IMAGERATING WHERE CONTENTNAME = '%@'", titleString];
    const char *query_stmt = [querySQL UTF8String];

    if (sqlite3_prepare_v2(connectDB, query_stmt, -1, &statement, NULL) == SQLITE_OK)
    {
        if (sqlite3_step(statement) == SQLITE_ROW)
        {
            display = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 1)];
            rate = sqlite3_column_double(statement, 2);
            NSLog(@"contents are name = %@ and rating = %f", display, rate);                
        }else{

        }
        sqlite3_finalize(statement);
    }
    sqlite3_close(connectDB);
}    
}

-(IBAction)rateSubmitClick:(id)sender{

sqlite3_stmt *statement;
NSString *insertSQL;

const char *dbpath = [databasePath UTF8String];

if (sqlite3_open(dbpath, &connectDB) == SQLITE_OK){

    if(isHalfClicked){
        rating = lastClicked + 0.5;
        insertSQL = [NSString stringWithFormat: @"INSERT INTO IMAGERATING (CONTENTNAME, RATING) VALUES (\"%@\", %f)", titleString, rating];
    }else{

        rating = lastClicked;
        insertSQL = [NSString stringWithFormat: @"INSERT INTO IMAGERATING (CONTENTNAME, RATING) VALUES (\"%@\", %f)", titleString, rating];
    }

    const char *insert_stmt = [insertSQL UTF8String];

    sqlite3_prepare_v2(connectDB, insert_stmt, -1, &statement, NULL);
    if (sqlite3_step(statement) == SQLITE_DONE){

        NSLog(@"Added records are = %@  %f", titleString, rating);
        isRated=YES;
    }else{
        NSLog(@"FAILED TO ADD RECORD");
    }
    sqlite3_finalize(statement);
    sqlite3_close(connectDB);
}   
} 
```

但现在的问题是没有任何东西被插入。日志显示“未能添加记录”。

我真的搞砸了这个数据库的东西，需要你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:06:23.413

在您的插入语句中，您链接`lastClicked`到评级。您应该将评级链接到它。看起来像一个错字。

此外，您在创建表时创建了一个整数类型的字段，如果您还存储其他值，它应该是浮点数。

* * *

**编辑：**

从您的日志语句中可以清楚地看出，您第二次没有将记录添加到数据库中。该字符串`RECORD ADDED`没有被记录 - 日志行必须来自其他地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:13:53.837

您正在用引号将您的整数/浮点值包装在插入语句中。不要那样做。

您的 SQL 词干应如下所示：

```
INSERT INTO USERRATING (CONTENTNAME, RATING) VALUES ("mycontentname", 4.5); 
```

举个例子。

或者换一种说法，你的代码应该是：

```
 if(isHalfClicked)
    {
        rating=lastClicked+0.5;
        insertSQL = [NSString stringWithFormat: @"INSERT INTO USERRATING (CONTENTNAME, RATING) VALUES (\"%@\", %f)",titleString,rating];
    }
    else {

        insertSQL = [NSString stringWithFormat: @"INSERT INTO USERRATING (CONTENTNAME, RATING) VALUES (\"%@\", %d)",titleString,lastClicked ];
          } 
```

# osgi - 在 Servlet 容器中嵌入 Equinox

> ID：10931330
> 
> 赞同：1
> 
> 时间：2012-06-07T11:58:36.523
> 
> 标签：osgi, tomcat7, equinox

我正在尝试将 Equinox 嵌入到 Servlet 容器中，作为新手，我正在尝试从[http://www.eclipse.org/equinox/server/http_in_container.php](http://www.eclipse.org/equinox/server/http_in_container.php)在 linux 上的 tomcat 7 中部署 bridge.war。catalina.out 没有显示任何错误，但是如果我尝试从 tomcat 访问任何内容，甚至是 tomcat 索引页面，它会一直尝试简单地连接并且不会出现任何内容。

当我尝试停止 Tomcat 服务器时，出现以下错误：

```
java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:337)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:198)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:180)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at java.net.Socket.connect(Socket.java:528)
    at java.net.Socket.<init>(Socket.java:425)
    at java.net.Socket.<init>(Socket.java:208)
    at org.apache.catalina.startup.Catalina.stopServer(Catalina.java:490)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.catalina.startup.Bootstrap.stopServer(Bootstrap.java:371)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:452) 
```

有人遇到这个问题吗？我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:58:16.083

好吧，看起来你的Tomcat有一个大问题，完全不管Equinox。

为了确认这一点，删除 bridge.war 及其扩展文件夹，然后重新启动 TC，我想你会看到同样的问题。

我的猜测是已经有一些进程在使用 TC 想要使用的端口（其中一个），并且 Tomcat 无法正常启动，您应该在 catalina.out 或 localhost.* 日志文件中看到一些问题。

# excel - 如何在 2 个 excel 工作表之间查找匹配值。

> ID：10931335
> 
> 赞同：1
> 
> 时间：2012-06-07T11:58:58.340
> 
> 标签：excel, excel-formula

我在工作表 X 中有 2 列 A 和 B，在工作表 Y 中有 2 列 A 和 B，A 列有几个不同的值，但有些是相同的，例如第 1 行 = 42 行 2 = 42 行 3 = 43。我想知道 B 列中的值是否在两张表上与 A 列匹配。有没有我可以用来找到这个的公式？

在 A 列中，每行是一个数字，例如 42、42、42、43、43，然后在 B 列中，每行都有不同的数字，例如 42-333、42-345、42-678、43-999。所以当我查找时，我会得到它在 42 旁边找到的第一个数字，对于 42 的每一行，但我需要找到 42 旁边的所有不同值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-23T04:34:50.057

请试试：

```
=IF(COLUMN()>COUNTIF(Y!$A:$A,$A1)+2,"",INDEX(Y!$B:$B,MATCH($A1,Y!$A$1:$A$10,0)+COLUMN()-3)) 
```

在工作表 X 的 C1 中复制（例如到 ColumnI）并向下复制以适应。将 s更改为`Y`s`X`以在工作表 Y 的 C1 中使用。

为了帮助识别匹配项，请将每张纸的 J1 放入`=IFERROR(MATCH(B1,C1:I1,0),"")`并复制下来以适合。

# tfs - 安装失败阻止 TFS 安装

> ID：10931336
> 
> 赞同：4
> 
> 时间：2012-06-07T11:59:00.630
> 
> 标签：tfs, windows-installer

一段时间以来我一直在安装程序时遇到问题，通常会收到一个错误，即 Visual Studio j# 安装是未完成的安装，它让我可以选择在安装我尝试安装的程序之前回滚安装。

我现在正在尝试安装 Team Foundation Server 2012 Express，当我运行安装程序时出现以下错误。

错误：TF400293：Windows 当前正在安装另一个包。等到 Windows 完成其他安装，然后重新启动此安装程序。

谁能给我一些关于如何一劳永逸地摆脱失败安装的建议，这样我就可以安装其他东西而不会出现所有这些问题。

顺便说一句，我使用的是 Windows 7。

此外，我似乎无法完全完成 Windows 更新。似乎有 1 个更新永远不会安装，我的电脑只是挂在安装更新屏幕上。我曾经把它放了 4 个多小时，然后决定它不会完成，所以只好关掉我的电脑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T13:05:22.723

当安装失败但 MSIEXEC.exe 仍在运行或重新启动挂起阻止其他安装时，您会收到此错误消息。

对于第一种情况：杀死 MSIEXE.exe 进程。

对于第二个：使用 regedit 查看这个键：`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\PendingFileRenameOperations`清除键中的任何值，然后重试。

顺便说一下，这个问题与 TFS 无关。

# iphone - 我们可以从 iphone 连接到 FTP 中的 SQLite 数据库吗

> ID：10931337
> 
> 赞同：0
> 
> 时间：2012-06-07T11:59:07.853
> 
> 标签：iphone, objective-c, ios, sqlite, ftp

我现在使用 FTP 从 ftp 下载和上传文件
，我怀疑我们可以从 iphone 连接到 ftp 中的 sqlite 数据库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:19:35.270

FTP 协议不能完全用于部分上传/下载（除非您有自定义 FTP 服务器）。SFTP（SSH 文件传输协议）对此更好。

现在，SQLite 支持扩展机制，使用它可以加密存储数据块（并且有产品可以这样做）。相同的扩展机制可以潜在地用于将真实数据存储在其他地方（例如，通过 SFTP 跨网络访问）。

所以总的来说，你的问题的答案是*肯定*的，但魔鬼在细节中。

# webdeploy - web.config applicationSettings webdeploy parameters.xml 文件的 XPath 不正确

> ID：10931341
> 
> 赞同：3
> 
> 时间：2012-06-07T11:59:20.520
> 
> 标签：webdeploy, microsoft-web-deploy

我使用 webdeploy 来部署我的网站项目，其中包含我已经使用了一段时间的 parameters.xml 文件。到目前为止，我添加的参数都是元素属性，并且运行良好。但是我试图让 xpath 正确地更新 applicationSettings 元素值（而不是属性）并且我失败了，很糟糕，如果它是我糟糕的 xpath 技能，或者是对参数文件工作方式的误解。

当我进行部署时，该字段没有更新，它编译得很好，并且在部署期间没有错误\警告。我希望能够将其设置为 True 或 False。

所以我有以下参数字段

```
<parameter name="ShowExceptionCallStackOnErrorView" description="Display a call stack on the UI Error view - true for debug only." defaultValue="False" tags="">
    <parameterEntry kind="XmlFile" scope="\\web.config$" match="/configuration/applicationSettings/abc.123.Properties.Settings/setting[@name='ShowExceptionCallStackOnErrorView']/value" />
</parameter> 
```

尝试匹配以下应用程序设置部分

```
<configuration>
    <applicationSettings>
        <abc.123.Properties.Settings>
            <setting name="ShowExceptionCallStackOnErrorView" serializeAs="String">
               <value>True</value> 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T18:13:37.757

它不会给您错误，因为它根本没有找到要替换的匹配项。如果您希望它替换值标签的内容，您需要添加 `/text()`到匹配标签的末尾。如下...

```
<parameter name="ShowExceptionCallStackOnErrorView" description="Display a call stack on the UI Error view - true for debug only." defaultValue="False" tags="">
  <parameterEntry kind="XmlFile" scope="\\web.config$" match="/configuration/applicationSettings/abc.123.Properties.Settings/setting[@name='ShowExceptionCallStackOnErrorView']/value/text()" />
</parameter> 
```

# php - Mysql SELECT 好友系统

> ID：10931343
> 
> 赞同：0
> 
> 时间：2012-06-07T11:59:26.340
> 
> 标签：php, mysql

我有这张桌子

```
conncections

id_user connectedto
    1       4
    2       4
    3       1
    1       5 
```

我想做一个`SELECT`返回所有与数字 1 和数字 1 本身有关的数字。因此`1 4 3 5`作为结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:04:07.037

就像是

```
SELECT DISTINCT id_user as related
FROM connections
WHERE connectedto = 1
UNION
SELECT DISTINCT  connectedto as related
FROM connections
WHERE id_user = 1 
```

删除了 UNION 重复项

# jquery - 如何在 Socialengine 4 框架中使用 Jquery hovercard？

> ID：10931344
> 
> 赞同：-1
> 
> 时间：2012-06-07T11:59:40.350
> 
> 标签：jquery, socialengine

我正在尝试在 Socialengine 框架中使用 Jquery Hovercard

我正在使用 jquery 插件：[http ://designwithpc.com/Plugins/Hovercard#demo](http://designwithpc.com/Plugins/Hovercard#demo)

在我的本地系统中一切正常。但我不知道如何在社交引擎框架中使用它。

谁能帮我保存js文件我有两个js文件？

1.  jquery.min.js
2.  hovercard.js

如何在活动模块中包含和使用它的确切位置如下，

> 活动\视图\scripts_activityText.tpl

您还可以在此处查看该页面：http: [//demo-se.spur-it.com/](http://demo-se.spur-i-t.com/)。我想在将鼠标悬停在个人资料图像上时使用术语**What's new 。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:42:20.310

首先，jQuery 和社交引擎并不总是很好。SocialEngine 带有 Mootools，所以使用它会让你的生活更轻松一些。也就是说，您可以将对 JS 文件的引用添加到：`application\modules\Core\layouts\scripts\default.tpl`.

然后你会发现 jQuery 和 Mootools 之间存在命名空间冲突。要解决此问题，您需要通过在同一文件的头部添加以下行来更改所有生成的 jQuery 的命名空间。

```
var $j = jQuery.noConflict(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-04T21:42:34.013

我已经这样做了

```
<script src="<?php echo $baseURL; ?>js/jquery.js"></script>
<script type="text/javascript">

var $j = jQuery.noConflict();

$j(document).ready(function() {
  alert();
});

</script> 
```

# java - 如何在没有新连接的情况下创建新的 Hibernate 事务？

> ID：10931354
> 
> 赞同：0
> 
> 时间：2012-06-07T12:00:16.353
> 
> 标签：java, hibernate, jdbc, transactions

如何修改此代码以便不使用新的数据库连接但重用当前的连接（来自封闭事务）？

```
TransactionDefinition transactionDefinition = new DefaultTransactionDefinition(TransactionDefinition.PROPAGATION_REQUIRES_NEW);
new TransactionTemplate(platformTransactionManager, transactionDefinition).execute(new TransactionCallbackWithoutResult() {
    @Override
    protected void doInTransactionWithoutResult(TransactionStatus status) {
        // do stuff
    }
}); 
```

编辑：与[如何仅使用一个连接在休眠中执行嵌套事务有关？](https://stackoverflow.com/questions/10930496/how-do-i-do-nested-transactions-in-hibernate-using-only-one-connection)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:02:47.370

我会说你可能不能。除非您以某种方式成功使用休眠和底层数据库，以便它们支持嵌套事务。许多数据库没有，我不确定hibernate是否有。（因为它需要进行新的交易）

# php - html和php中的绝对路径有什么区别？

> ID：10931355
> 
> 赞同：2
> 
> 时间：2012-06-07T12:00:23.683
> 
> 标签：php, html, path, wamp, absolute

我正在开发一个 php 网站，我已经在我的个人计算机上安装了 wamp，我的网站文件位于 wamp 的 www 文件夹中。现在考虑 www 作为我的根文件夹，我在根文件夹中有一个模板文件夹，在模板文件夹中有 header.inc.html 文件。当我尝试使用绝对路径将此 header.inc.html 文件包含在任何其他 php 文件中时，`include('/template/header.inc.html');`它会给我错误“无法打开流：没有这样的文件或目录”，但是当我使用相同的绝对路径创建一个简单的 html 链接时路径它完美地工作并打开文件。下面是我的测试代码

```
<?php
echo '<a href="/template/header.inc.html">headerfile</a>';
include('/template/header.inc.html');
?> 
```

例如，如果我将完整路径提供 `C:/wamp/www/template/header.inc.html`给 include 函数，它就可以正常工作。

我很困惑，这个问题只发生在我的 wamp 服务器上，它可以在任何虚拟主机服务器上完美运行，或者同样的问题可能会存在于虚拟主机上

我将不胜感激任何可以澄清我的困惑的帮助，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T12:02:27.537

服务器上的绝对路径从服务器的硬盘 ( `C:\`) 开始。
客户端上的绝对路径从网站的根目录 ( `http://example.com/`) 开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T12:03:16.913

您可以使用[`__DIR__`](http://php.net/language.constants.predefined)相对于磁盘本身的 php 文件在磁​​盘上创建一些文件：

```
include(__DIR__.'/template/header.inc.html'); 
```

这应该可以解决您的问题。

区别并不容易解释，因为两种类型的路径——甚至是相关的——都是两双鞋。我建议您从一个非常基本的 HTML 网站教程开始，该教程解释了如何在您的网站上进行链接、文件的位置以及与网络服务器配置的关系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T12:11:24.197

HTML 页面存在于客户端的浏览器中，对服务器的文件夹结构一无所知，并且它们与域名有关，例如。[http://example.com/](http://example.com/)。

PHP 程序在服务器端运行，它们处理服务器文件夹。您不应该在 php 程序中对完整路径进行硬编码，因为无论何时在开发服务器和实时主机之间移动它们都会导致问题（仅举一个例子）。因此，在 php 文件中，您应该使用文件的相对路径，或者使用`__DIR__`替换为 php 文件所在目录的魔术常量。

1.) 第一种方法：`include('template/header.inc.html');`

2.）第二种方法：`include(__DIR__ .'/template/header.inc.html');`

在您的情况下（在开发机器上工作），客户端和服务器都是同一个盒子，这可能会让您感到困惑。

# javascript - 我无法测试在我的主干视图中呈现的元素的可见性

> ID：10931357
> 
> 赞同：8
> 
> 时间：2012-06-07T12:00:38.893
> 
> 标签：javascript, jquery, backbone.js, jasmine, sinon

我正在开发一个 Backbone.js 应用程序，在使用[Jasmine 和 Sinon](http://tinnedfruit.com/2011/04/26/testing-backbone-apps-with-jasmine-sinon-3.html)添加测试时，我无法确定某些 DOM 元素的可见性：其中一些元素在测试中被检测为不可见，而我可以在我的应用程序中正确看到它们.

我创建了一个复制问题的小示例，相同的测试在两组元素上运行了两次：

*   第一组直接存在于 SpecRunner.html
*   第二个已呈现为 Backbone 视图

测试本身正在使用`jQuery.is(':visible')`（通过 jasmine-jquery's `.toBeVisible()`）来了解元素是否可见。它通过了第一组，而不是第二组。

我在这里将代码共享为 github 项目：[https ://github.com/maximevaly/3789_js](https://github.com/maximevaly/3789_js)

我想我忘记了什么，或者可能误用了一个图书馆，但我不能指望它，所以如果你有任何线索...... :)

谢谢！马克西姆

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T16:54:11.943

问题是您`StuffView.el`没有附加到 DOM，因此始终不可见。`className`你可能对参数有误解`tagName`：它们不是用作选择器，而是用来构造一个全新的元素。

这修复了第二个测试。

```
el : "div.container",
//tagName : 'div',
//className : 'container', 
```

或者，您可以在测试中手动将视图附加到 DOM

```
$("body").append(this.view.el); 
```

# .net - 在 app.config 中管理多个客户端端点配置（IP 地址等）的最佳方式

> ID：10931359
> 
> 赞同：5
> 
> 时间：2012-06-07T12:00:45.310
> 
> 标签：.net, web-services

我们开发了一个系统，其中客户端应用程序是一个使用 Web 服务与服务器通信的 .NET 客户端。我们需要能够使用不同的配置选项来部署客户端，例如 IP 地址等。到目前为止，我们已经通过在 app.config 中基本上注释/取消注释不同的配置来管理这个问题，例如：

```
<!--<client>
    <endpoint address="https://localhost/services/service1"
        binding="customBinding" bindingConfiguration="ServiceSoapBinding"
        contract="ServiceReference.Service1" name="ServiceImplPort" />
    <endpoint address="https://localhost/services/service2"
        binding="customBinding" bindingConfiguration="ServiceSoapBinding"
        contract="ServiceReference.Service2" name="ServiceImplPort" />
    ...
    ..
</client>-->
<client>
    <endpoint address="https://prod.example.com/services/service1"
        binding="customBinding" bindingConfiguration="ServiceSoapBinding"
        contract="ServiceReference.Service1" name="ServiceImplPort" />
    <endpoint address="https://prod.example.com/services/service2"
        binding="customBinding" bindingConfiguration="ServiceSoapBinding"
        contract="ServiceReference.Service2" name="ServiceImplPort" />
    ...
    ..
</client> 
```

但很明显，这不是解决问题的最佳方案，随着配置替代方案数量的增加，它变得有点难以管理。任何如何改进这一点的建议都非常受欢迎。

问候， 奥拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:36:10.723

幸运的是，这个问题有一个很好的解决方案。下载并安装[MSBuild.Community.Tasks](http://msbuildtasks.tigris.org/)

然后查看以下帖子以了解示例用法

[http://chris.widdowson.id.au/?p=781](http://chris.widdowson.id.au/?p=781)

[http://grahamrhay.wordpress.com/2012/03/16/multiple-config-transforms-at-build-time/](http://grahamrhay.wordpress.com/2012/03/16/multiple-config-transforms-at-build-time/)

**警告** *设置时间超过 5 分钟，您将手动编辑 .csproj 文件*

这个解决方案效果很好，有任何问题请回来

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T16:52:23.043

我们很高兴使用 MSI 包来部署我们的应用程序（使用 WiX 构建）以及调用与我们的产品一起打包的 XMLPreprocess 可执行文件的自定义操作。它基本上使用 XPath 和我们使用 Excel 维护的一些 XML 文件来处理重新配置 app/web.config 文件。我们已经使用它很长一段时间了，并且对产品没有任何问题。

这是一个链接：http: [//xmlpreprocess.codeplex.com/](http://xmlpreprocess.codeplex.com/)

如果您要详细说明您的部署策略以针对您的情况给出一些具体的答案，这将很有帮助。

编辑：我可能应该补充一下，这仅适用于内部产品，如果您在外部提供 MSI，您不会想使用这种方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T10:49:56.427

我们确实尝试了 wal 的方法，该方法几乎解决了问题，但我们遇到了单击一次部署的问题，请参阅我对 wal 答案的评论。

我们目前使用的解决方案是本文建议的条件编译：

[http://www.codeproject.com/Articles/451734/Visual-Studio-Use-Conditional-Compilation-to-Contr](http://www.codeproject.com/Articles/451734/Visual-Studio-Use-Conditional-Compilation-to-Contr)

优点是，除了单击一次可以完美地工作之外，您不必调整 VS 项目文件或使用任何第三方组件。缺点是如果要添加/更改端点，则需要更新源代码。

我们所做的是在项目中添加一个新的*.settings*文件。这不是强制性的，但我们认为将端点配置保存在单独的设置文件中是个好主意，因为必须稍微调整该文件。根据为编译启用的配置，它被调整为使用条件编译来启用正确的端点：

```
 public ServiceSettings() {
        // // To add event handlers for saving and changing settings, uncomment the lines below:
        //
        // this.SettingChanging += this.SettingChangingEventHandler;
        //
        // this.SettingsSaving += this.SettingsSavingEventHandler;
        //

        // Each method corrsponds to a build version. We call all four methods, because
        // the conditional compilation will only compile the one indicated:
        this.SetLocalApplicationSettings();
        this.SetAS12ApplicationSettings();
    }

    [Conditional("LOCAL")]
    private void SetLocalApplicationSettings()
    {
        this["LoginAddress"] = "https://localhost/services/loginservice";
        this["SettingsAddress"] = "https://localhost/services/settingsservice";
    }

    [Conditional("EXAMPLE")]
    private void SetAS12ApplicationSettings()
    {
        this["LoginAddress"] = "https://example.com/services/loginservice";
        this["SettingsAddress"] = "https://example.com/services/settingsservice";
    } 
```

在 VS 中，我们为每个端点创建了一个配置，并在 Build 选项卡上定义了适当的条件编译符号，即 LOCAL 或EXAMPLE。

我们还使用 VS 生成的 WS 客户端类更新了代码，以使用设置文件中定义的端点：

```
var client = new SettingsServiceClient("SettingsServiceImplPort",
    ServiceSettings.Default.SettingsAddress); 
```

在 app.config 中，我们只保留了默认配置（localhost）和绑定配置以使 VS 满意：

```
<system.serviceModel>
  <bindings>
    <customBinding>
      <binding name="SettingsServiceImplServiceSoapBinding">
        <textMessageEncoding messageVersion="Soap12" />
        <httpsTransport />
      </binding>
      <binding name="LoginServiceImplServiceSoapBinding">
        <textMessageEncoding messageVersion="Soap12" />
        <httpsTransport />
      </binding>
    </customBinding>
  </bindings>
  <client>
    <endpoint address="https://localhost/services/settingsservice"
      binding="customBinding" bindingConfiguration="SettingsServiceImplServiceSoapBinding"
      contract="SettingsServiceReference.SettingsService" name="SettingsServiceImplPort" />
    <endpoint address="https://localhost/services/loginservice"
      binding="customBinding" bindingConfiguration="LoginServiceImplServiceSoapBinding"
      contract="LoginServiceReference.LoginService" name="LoginServiceImplPort" />
  </client>
</system.serviceModel>
<applicationSettings>
    <ConfigurationTest.ServiceSettings>
        <setting name="SettingsAddress" serializeAs="String">
            <value>https://localhost/services/settingsservice</value>
        </setting>
        <setting name="LoginAddress" serializeAs="String">
            <value>https://localhost/services/loginservice</value>
        </setting>
    </ConfigurationTest.ServiceSettings>
</applicationSettings> 
```

# maps - 具有多个图层和不同属性名称的 WFS GetFeature

> ID：10931363
> 
> 赞同：7
> 
> 时间：2012-06-07T12:00:55.983
> 
> 标签：maps, geoserver

假设我有一个运行有两个由 WFS 公开的层的 Geoserver（带有属性）：

```
StreetLayer (geom, StreetName, Lanes, Length)
HouseLayer (geom, Address) 
```

现在，如果我想查询 StreetLayer 的所有街道但只获取 StreetName 和 Lanes 属性，我会向此发送 GET 请求：

```
http://geoserver/wfs?REQUEST=GetFeature&VERSION=1.1.0&typename=StreetLayer&propertyname=StreetName,Lanes 
```

但是如果我现在想同时查询 HouseLayer 和 StreetLayer 怎么办？这不起作用：

```
http://geoserver/wfs?REQUEST=GetFeature&VERSION=1.1.0&typename=StreetLayer,HouseLayer&propertyname=StreetName,Lanes,Address 
```

我得到一个例外，说 StreetName 和 Lanes 不在 HouseLayer 中，反之亦然。我需要提出多个请求吗？

**编辑：**

所以我想做的是这样的：

```
http://geoserver/wfs?REQUEST=GetFeature&VERSION=1.1.0&typename=StreetLayer,HouseLayer&propertyname=(StreetName,Lanes),(Address) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T20:11:07.657

几乎在那里，您只是在 propertyName 中多了一个逗号。这个适用于 vanilla GeoServer 安装：

```
http://localhost:8087/gswps/topp/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=topp:tasmania_cities,topp:tasmania_roads&propertyName=(ADMIN_NAME,CITY_NAME)(TYPE) 
```

区别： ) 和 ( 之间没有逗号

# unix - grep -w 只有空格作为分隔符

> ID：10931370
> 
> 赞同：3
> 
> 时间：2012-06-07T12:01:59.757
> 
> 标签：unix, grep, word

```
grep -w uses punctuations and whitespaces as delimiters. 
```

如何将 grep 设置为仅使用空格作为单词的分隔符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T12:27:29.610

*如果您*只想匹配空格：`grep -w foo`与`grep " foo "`. 如果您还想匹配行尾或制表符，您可以开始执行以下操作：`grep '\(^\| \)foo\($\| \)'`，但您可能会更好`perl -ne 'print if /\sfoo\s/'`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T12:10:16.287

你无法改变工作方式`grep -w`。但是，您可以`X`使用`tr`or`sed`然后使用替换标点符号`grep -w`，这样就可以解决问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T12:16:18.063

--word-regexp 标志很有用，但有限。grep 手册页说：

```
 -w, --word-regexp
          Select  only  those  lines  containing  matches  that form whole
          words.  The test is that the matching substring must  either  be
          at  the  beginning  of  the  line,  or  preceded  by  a non-word
          constituent character.  Similarly, it must be either at the  end
          of  the  line  or  followed by a non-word constituent character.
          Word-constituent  characters  are  letters,  digits,   and   the
          underscore. 
```

如果您想使用自定义字段分隔符，awk 可能更适合您。或者你可以用 egrep 写一个扩展的正则表达式，或者`grep --extended-regexp`让你更好地控制你的搜索模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-12T23:01:18.770

用于`tr`用新行替换空格。然后是`grep`你的字符串。我需要的连续字符串被分割了，`grep -w`因为它里面有冒号。而且，我只知道第一部分，第二部分是我需要拉取的未知数据。因此，以下内容帮助了我。

```
echo "$your_content" | tr ' ' '\n' | grep 'string' 
```

# php - 在 jquery 中发布不更新元素

> ID：10931372
> 
> 赞同：0
> 
> 时间：2012-06-07T12:02:04.407
> 
> 标签：php, jquery, mysql, html

用新的 JAVASCRIPT 编辑

我正在尝试制作一个“我喜欢这个”的功能，但我有一个小问题。

我正在使用这个小 javascript

```
function coolIt(designid) {
   $.post('cool.php', {designid:designid}, function(data) {
      //alert(data);
      $('#cool_'+designid).text(data);
   });
} 
```

还有这个“喜欢”按钮所在的 HTML

```
<span class="like"><a href="javascript:void(0)" onclick="coolIt(\''. $row["id"] .'\');"></a><span id="cool_'.$row["id"].'">('. $row["cools"] .')</span></span> 
```

cool.php 贯穿其中：

```
 function UpdateCool($design_id) {
    $fields_up = array("cools" => 'cools + 1');
    $fields_down = array("cools" => 'cools - 1');

    $sql = SQLHandling::updateSQL('tdic_designs', 'id = '. $design_id .'', $fields_up);            

    SQLHandling::SQLquery($sql);
} 
```

而且效果很好。它用一个递增的值更新冷却字段。

当我`alert(data)`在 javascript 上运行时，它什么也不返回，并且 #cool_1 span 元素消失了。

知道我可能做错什么吗？

HTML 输出：

```
<script type="text/javascript">
function coolIt(designid) {
    $.post('cool.php', {designid:designid}, function(data) {
       alert(data);
       $('#cool_'+designid).text(data);
    });
}
</script>

</head>
<body>

<div id="allContainer">
    <div id="topArea">
        <div id="topNaviArea">
            <ul id="navi">
                <li class="home"><a href="/testen/">Home</a></li>
                <li class="categories"><a href="categories.php" title="Browse categories">Categories</a></li>
                <li class="about"><a href="about.php">About</a></li>
                <li class="faq"><a href="faq.php">FAQ</a></li>
                <li class="submit"><a href="submit.php" title="Submit a website">Submit</a></li>
                <li class="contact"><a href="contact.php" title="Submit a website">Contact</a></li>
            </ul>
        </div>
    </div>
    <div id="contentBox">
    <div id="login"><a href="#">Login</a> // <a href="#">Register</a></div>             <div id="mainContent">
                    <h1>// <a href="/testen/">Home</a> // <a href="categories.php">Categories</a> // HTML / CSS</h1>            

                 <div id="catMenu">

                    <ul>
                        <li><a href="categories.php?cat_id=5" title="View all designs in 3D">3D</a></li><li><a href="categories.php?cat_id=3" title="View all designs in Graphic">Graphic</a></li><li><a href="categories.php?cat_id=1" title="View all designs in HTML / CSS">HTML / CSS</a></li><li><a href="categories.php?cat_id=4" title="View all designs in Paintings">Paintings</a></li><li><a href="categories.php?cat_id=2" title="View all designs in Photography">Photography</a></li><li><a href="categories.php?cat_id=6" title="View all designs in Portals">Portals</a></li><li><a href="categories.php?cat_id=7" title="View all designs in Webshops">Webshops</a></li>
                    </ul>
                    <h2>1 designs<br />in this category</h2>
                </div>

                <div id="rightContentBox">                          
                    <ul id="displays">
                        <li class="displayWindow"><div class="dpwImage"><figure><a href="#"><img src="/testen/designs/thatdesigniscool.jpg" width="280" height="175" alt="That Design Is Cool" target="_blank"></a></figure></div><div class="dpwBox"><div class="dpwLeft"><span class="title"><a href="designinfo.php?designid=1">That Design Is Cool</a></span><span class="comments"><a href="designinfo.php?designid=1">Comments (1)</a></span></div><div class="dpwRight"><span class="like"><a href="javascript:void(0)" onclick="coolIt('1');"></a><span id="cool_1">(29)</span></span></div></div> </li>
                    </ul>
                </div>

        </div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:14:32.380

我猜你只是用服务器响应替换了 div 的全部内容。为什么不追加？

```
$('.likeIt').livequery("click",function(e){
    var designid =  $(this).attr('id').replace('design_id-','');
    $.post('cool.php?design_id='+designid, {}, function(response){
        $('#cool_'+designid).html($('#cool_'+designid).html() + response); // See if this works!
    });
}); 
```

看看这是否有帮助！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:28:43.117

我通过将cool.php编辑为以下内容来解决它：

```
<?php
session_start();

ini_set("display_errors", 1);

define("INCLUDE_DIR", "includes/classes");

/* Autoload classes when used */
function __autoload($class_name) { include(INCLUDE_DIR.'/class.'. strtolower($class_name) . '.php'); } 

SQLHandling::SQLconnect();

if($_POST["designid"] != '') {
    $alreadyExist = mysql_num_rows(mysql_query('SELECT id FROM tdic_voted WHERE designid="'.(int)$_POST['designid'].'" AND ip="'.$_SERVER['REMOTE_ADDR'].'"'));

    if($alreadyExist == 0) {

     mysql_query(' UPDATE tdic_designs SET cools = cools+1 WHERE id="'.(int)$_POST['designid'].'"');
     $num = mysql_fetch_row(mysql_query(' SELECT cools FROM tdic_designs WHERE id="'.(int)$_POST['designid'].'" LIMIT 1'));
     echo $num[0];
     mysql_query(' INSERT INTO tdic_voted (designid, ip) VALUES ("'.(int)$_POST['designid'].'","'.$_SERVER['REMOTE_ADDR'].'")');

     } else{
        echo 'You already think this is a cool design!';
    }   
}
?> 
```

# xml - ASP.NET MVC 4 和 Razor 2：视图引擎不再支持 xml？

> ID：10931376
> 
> 赞同：6
> 
> 时间：2012-06-07T12:02:28.087
> 
> 标签：xml, razor, rss, asp.net-mvc-4

我们有一个视图 (.cshtml)，它使用 ASP.NET MVC 3 为 RSS 提要呈现 XML，效果很好。现在我们已经升级到带有 Razor 2 的 ASP.NET MVC 4，它会产生编译错误，类似于下面。

```
Parser Error

Description: An error occurred during the parsing of a resource required to service this request. Please review the following specific parse error details and modify your source file appropriately.

Parser Error Message: Encountered end tag "item" with no matching start tag.  Are your start/end tags properly balanced? 
```

标签是适当平衡的。

有人有什么想法吗？

**更新：**我已将其隔离在 @foreach (...) { ... } 块中**item元素内的****链接**元素中。

 **```
@foreach (var item in Model.Items)
{
<item>
    <title>@item.Title</title>
    <link>@item.Link</link>
    <description>@item.Description</description>
    <guid>@item.Guid</guid>
    @if (item.PublishedDateUtc.HasValue)
    {
    <pubDate>@item.PublishedDateUtc.Value.ToString("ddd, dd MMM yyyy HH:mm:ss") GMT</pubDate>
    }  
</item>      
} 
```

我通过使用下面的**@Html.Raw**来修复它。

```
@foreach (var item in Model.Items)
{
<item>
    <title>@item.Title</title>
    @Html.Raw(string.Format("<link>{0}</link>", item.Link.ToHtmlEncoded()))
    <description>@item.Description</description>
    <guid>@item.Guid</guid>
    @if (item.PublishedDateUtc.HasValue)
    {
    <pubDate>@item.PublishedDateUtc.Value.ToString("ddd, dd MMM yyyy HH:mm:ss") GMT</pubDate>
    }  
</item>      
} 
```

有人有更好的建议吗？显然，我可以只使用一个类来声明模型并直接从控制器返回 XML，但我更感兴趣的是为什么会发生这种行为以及我可以做些什么来更好地符合 Razor 语法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T15:42:29.027

当我第一次看到这个时，我注意到你的`link`标签有一个结束标签而不是自闭标签。Razor足够*聪明*，可以知道 html 并且知道链接标签是如何关闭的。这是另一个可能会破坏以显示 Razor 如何读取 html 的示例。

```
....
<tbody>
    @if (alternating) {
        <tr class='alternating'>
    } else {
        <tr>
    }

    ....

        </tr>
</tbody> 
```

这将失败，因为它看到 a`</tr>`没有开始标签。

Razor 将始终自关闭的标签解释为自关闭。所以你的`link`标签实际上以`>`. （因为它是有效的 html 有一个没有 a 的自结束标签`/>`）所以现在我们遇到一个没有开始标签的结束标签来证明它是合理的，所以解析器放弃并说它的格式不正确。我必须做一些检查，但我很确定它假定结束`link`标签是用于`item`标签的，因为这会提供适当的平衡，这就是为什么文件的其余部分解析得很好，直到遇到这个`item`没有打开的单独标签标签。

它应该足够聪明，知道前一个结束标签不是正确的。与团队合作可能是一个问题。

我还没有尝试过，但你应该能够做到这一点

```
@foreach (var item in Model.Items)
{
<item>
    <title>@item.Title</title>
    @:<link>
        @item.Link
    @:</link>
    <description>@item.Description</description>
    <guid>@item.Guid</guid>
    @if (item.PublishedDateUtc.HasValue)
    {
    <pubDate>@item.PublishedDateUtc.Value.ToString("ddd, dd MMM yyyy HH:mm:ss") GMT</pubDate>
    }  
</item>      
} 
```**

# java - 在 SQLException 中获取 OUT 参数

> ID：10931382
> 
> 赞同：0
> 
> 时间：2012-06-07T12:02:41.367
> 
> 标签：java, oracle, stored-procedures, plsql, oracle10g

在我的存储过程中，我有以下语句

```
IF (sdate > sysdate)
            THEN
                RAISE exec_not_allowed;
                                returnval := sdate;

            END IF; 
```

returnval 在我的过程中是 IN OUT 参数。

在 java 中，通常使用以下方法获取 OUT 参数：

```
callablestatement.getInt(2); 
```

如果引发异常，如何在 Java 中接收 returnval？异常错误代码在 Java`SQLException`部分中被捕获。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T16:55:03.167

在这种情况下，您为什么要提出异常？您应该只在两种情况下真正引发异常：

1.  您打算捕获异常并在调用代码中适当地处理它。
2.  出了点问题，您希望您的应用程序崩溃和烧毁。

你没有做这些事情，也不需要这样做。您只想停止代码运行并“返回”（这是一个过程）您的价值。在这种情况下，我建议使用[`return`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/return_statement.htm#LNPLS01340).

`return`结束包含它的匿名块的执行，并在过程中将“控制”返回给调用语句。即它完全符合要求。

以下代码在停止执行过程之前使用 return分配`sdate`给您的参数。`out`“更多的东西”永远不会发生。

```
create or replace procedure my_procedure_one (returnval in out date) is
begin

   -- some stuff.
   if sdate > sysdate then
      returnval := sdate;
      -- we don-t want to continue any more if this is true.
      return;
   end if;
   -- more stuff.
end; 
```

如果您只想分配`sdate`条件`returnval`是否为真，*那么*您只需交换这两行；也许将其从 if 语句中删除以使其更加明显。这就是您的代码在您提出`exec_not_allowed`所有执行停止时所做的事情。

```
create or replace procedure my_procedure_two (returnval in out date) is
begin

   -- some stuff.

   -- we don-t want to continue any more if this is true.
   if sdate > sysdate then
      return;
   end if;

   returnval := sdate;
   -- more stuff.
end; 
```

无论哪种情况，您的 Java 调用都保持不变。在第一个过程 ( `my_procedure_one`) 中，您将被`sdate`返回，而在第二个过程中，您将返回一个 null，假设`returnval`之前没有分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:34:17.387

`returnval:=sdate;`在您的情况下是死代码，因为在分配值之前引发了异常`returnval`。但是如果您想终止程序执行，那么您将无法`returnval`从 proc 调用中获得任何信息。

您可以通过在`procedure`.

```
CREATE OR REPLACE PROCEDURE temp(returnval IN OUT date)
IS 
BEGIN
 :
 :
 BEGIN 
   IF (sdate > sysdate) THEN
         RAISE exec_not_allowed;
   END IF;

 EXCEPTION 
  WHEN exec_not_allowed THEN 
    returnval := sdate;   --after raising an exception you can assign it like this .

  raise_application_error
      (-20145                                      --sqlcode
      ,'Exception is raised for date'||returnval   --message
      );
 END;
EXCEPTION 
 WHEN OTHERS THEN 
  -- 
END temp; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T12:35:27.643

当引发异常时，过程执行终止。

你无法得到回应。

# css - 顶部栏上的徽标在缩放时消失

> ID：10931386
> 
> 赞同：0
> 
> 时间：2012-06-07T12:02:51.817
> 
> 标签：css

我一直在为我的博客[http://shaanan.cohney.info/blog/](http://shaanan.cohney.info/blog/)开发 CSS， 当放大时，我放在顶部的 facebook/google+ 链接消失了。我想要的行为是收缩以适应剩余区域。我是否将其从使用 float 更改为使用 left % 和 right %？

谢谢， 沙南克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:18:18.750

您可以使用 CSS 中的 left 和 top 使图像位置固定并放置它们。或者您可以为图像提供百分比边距（Facebook 的左边距和 G+ 的右边距）。

# sql - 从存储的过程中选择列？

> ID：10931391
> 
> 赞同：1
> 
> 时间：2012-06-07T12:03:19.397
> 
> 标签：sql, sql-server, sql-server-2008

我有一个存储过程，我正在尝试从中选择所有行。

```
SELECT * FROM dbo.SEL_My_Func 'arg1','arg2','ar3' 
```

没用。所以我也尝试了：

```
SELECT * FROM EXEC dbo.SEL_My_Func 'arg1','arg2','ar3' 
```

但这也没有用。如何测试我的存储过程返回正确的结果？

我不得不使用 proc 而不是函数，因为我有一个 ORDER BY 作为 SQL 的一部分，请参阅：[Selecting first row per group](https://stackoverflow.com/questions/10930347/selecting-first-row-per-group)

最后，我是否认为限制从存储的 probc 返回哪些列没有问题，你只是不能指定哪些行（否则你会更好地使用 SQL 函数）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T12:06:27.333

您使用的解决方案 qwill 不起作用：

有解决方法

```
SELECT a.[1], a.[2]
FROM OPENROWSET('SQLOLEDB','myserver';'sa';'mysapass',
    'exec mydatabase.dbo.sp_onetwothree') AS a 
```

或将您的任务拆分为两个查询

```
Declare @tablevar table(col1,..
insert into @tablevar(col1,..) exec MyStoredProc 'param1', 'param2'

SELECT col1, col2 FROM @tablevar 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:05:02.863

```
EXEC dbo.SEL_My_Func 'arg1','arg2','ar3' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T13:56:23.970

您对函数的假设是不正确的。您可以使用分区函数来选择组中的第一行。

下面是为每个客户查找第一个 Dealer_id 的示例：

```
select client, dealer_id
from (
     select client, dealer_guid
         , RANK() over ( partition by client order by dealer_id) as rnk
     from Dealers
) cd where rnk = 1 
```

这也可以通过函数调用以及表格（我的示例）来完成。

# jquery - Jquery 单击以显示不可见的 div（添加类）在 Internet Explorer 中不起作用？

> ID：10931392
> 
> 赞同：0
> 
> 时间：2012-06-07T12:03:19.783
> 
> 标签：jquery, internet-explorer, cross-browser, jquery-events

我有一个“隐藏对象”游戏，您可以单击热点，然后显示您找到了该对象。它在除 IE8 之外的所有浏览器中都运行良好，我不知道为什么。

热点是定位的 DIV，使用 CSS 设置：

```
 .hotspot {
  background-color: none;
  position: absolute;
}

#hs1 {
  width: 40px;
  height: 80px;
  top: 50px;
  left: 200px;
} 
```

然后是 2，等等。有一个 JQuery 可以在单击时将此类交换为“完成”类：

```
.done {
  background-color: #ffff00;
  border: 1px solid #ff0000;
} 
```

jQuery是

```
$('#hs1').click(function(){
        $('#textPanel .title').text("CORRECT!");
        $('#textPanel .body').text("blah blah");
        $(this).addClass('done');
        itemsLeft--;
        updateItemsLeft();
    }); 
```

正如我所说，这一切都适用于其他浏览器。问题似乎源于`background-color:none`- 如果我将初始样式更改为`background-color: #ccc`，它可以工作（但隐藏点不会被隐藏......）

我被卡住了有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:08:15.880

`none`我猜in没有价值`background-color`。尝试给予`background-color: transparent;`并检查。我想这可能会奏效！

这是 IE 的一个已知错误。开始时，在`$(document).ready()`页面加载到 IE 后给出隐藏代码：

```
$(document).ready(function(){
    $('#hs1').css('background-color', '#fff');
    $('#hs2').css('background-color', '#fff');
    $('#hs3').css('background-color', '#fff');
    $('#hs4').css('background-color', '#fff');
}); 
```

如果这不起作用，请在 CSS 中添加`!important`：

```
.done {
  background-color: #ffff00 !important;
  border: 1px solid #ff0000;
} 
```

希望这可以帮助！:)

# java - Java线程池RejectedExecutionHandler传入的runnable对象是什么

> ID：10931396
> 
> 赞同：5
> 
> 时间：2012-06-07T12:03:23.900
> 
> 标签：java, threadpool

我有一个像这样的 RejectedExecutionHandler 和一个 Runnable 任务[的线程池。](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ThreadPoolExecutor.html#ThreadPoolExecutor%28int,%20int,%20long,%20java.util.concurrent.TimeUnit,%20java.util.concurrent.BlockingQueue,%20java.util.concurrent.ThreadFactory,%20java.util.concurrent.RejectedExecutionHandler%29)

```
sExecutorService = new ThreadPoolExecutor( ...    new MyRejectionHandler() );

interface MyTask extends Runnable { ... }

class MyTaskImpl implements MyTask { ...} 
```

我执行这样的任务

```
 sExecutorService.submit(myTask); 
```

在rejectedExecution 的情况下，我希望获得被拒绝的Runnable（即MyTask）并在其中设置一些字段将其标记为被拒绝。但我无法将其投射到 MyTask。那么传递给rejectExecution的runnable到底是什么？我提交的似乎不是 MyTask 。以及如何在 RejectedExecutionHandler 中获取被拒绝的任务。

```
public class MyRejectionHandler implements RejectedExecutionHandler{  
   public void rejectedExecution(Runnable runnable, ThreadPoolExecutor executor)  {
    MyTask myTask = (MyTask) runnable; // exception
    myTask.doSomething();
   }
java.lang.ClassCastException: java.util.concurrent.FutureTask cannot be cast to MyTask 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-07T12:23:59.500

问题是当您使用提交方法 TreadPoolExecutor（实际上是 AbstractExecutorService）提交任务时将其包装到 FutureTask。之后，您收到 FutureTask 而不是您的 Runnable。您可以调用执行不提交：

```
sExecutorService.execute(yourTask); 
```

我认为没有办法从 FutureTask 获取您的任务。您只能为它调用运行。因此，如果您想调用 submit 并且需要调用 run - 只是不要转换为 MyTask：

```
FutureTask myTask = (FutureTask) runnable;
myTask.run();
Object result = myTask.get(); 
```

其他方式，如果你想访问你的 MyTask 对象，可以创建 MyFutureTask 扩展 FutureTask，这将允许获取你的对象：

```
public MyFutureTask<V> extends FutureTask<V> {

    private Runnable myTask;

    public MyFutureTask(Runnable runnable, V result) {
        super(runnable, result);
        this.myTask = runnable;
    }

    public Runnable getMyTask() {
        return myTask;
    }        
} 
```

您还需要扩展 ThreadPoolExecutor 并重新定义负责 Runnable 到 FutureTask 包装的 newTaskFor 方法：

```
public class MyThreadPoolExecutor extends ThreadPoolExecutor {

    @Override
    protected <T> RunnableFuture<T> newTaskFor(Runnable runnable, T value) {
        return new MyFutureTask(task, value);            
    }
} 
```

之后，您可以将 MyThreadPoolExecutor 用作 ThreadPoolExecutor 并拒绝任务处理：

```
MyFutureTask myFutureTask = (MyFutureTask) runnable;
MyTask myTask = (MyTask) myFutureTask.getMyTask();
// Now you can do what you want with you task:
myTask.doSomthing(); 
```

# javascript - drawImage（画布）不起作用

> ID：10931398
> 
> 赞同：1
> 
> 时间：2012-06-07T12:03:28.190
> 
> 标签：javascript, html, canvas, html5-canvas, drawimage

我想使用方法在单个画布上绘制多个画布，`drawImage()`但它不起作用 **代码**

```
<html>
 <head>
  <script>
    window.onload = function() {
    var context1= document.getElementById("canvas1").getContext("2d");
    var context2  = document.getElementById("canvas2").getContext("2d");
    var context3  = document.getElementById("canvas3").getContext("2d");

    context1.font = "20pt Calibri";
    context1.fillStyle = "blue";
    context1.fillText("Hello ", 50, 25);

    context2.font = "20pt Calibri";
    context2.fillStyle = "red";
    context2.fillText("World!", 100, 25);

    var imageObj = new Image();
     imageObj.onload = function() {
      context3.drawImage(context1.canvas, 50, 25);
      context3.drawImage(context2.canvas, 100, 25);
        };
  };

</script>
 </head>
<body>
<canvas id="canvas1" class="canvas" width="200" height="50"></canvas>
<canvas id="canvas2" class="canvas" width="200" height="50"></canvas>
<canvas id="canvas3" class="canvas" width="200" height="50"></canvas>
</body>
</html>​ 
```

**JS 小提琴** [http://jsfiddle.net/4xT2j/2/](http://jsfiddle.net/4xT2j/2/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T12:09:21.103

您的图像没有来源。如果您想看一些东西，请添加一个。只要你没有 src，就不能调用 onload 函数。

并且您必须将图像提供给 drawImage 函数：

```
 var imageObj = new Image();
 imageObj.onload = function() {
   context3.drawImage(imageObj, 50, 25);
   context3.drawImage(imageObj, 100, 25);
 };
 imageObj.src = "someFile.png"; 
```

如果您要做的是在 context3 上绘制 canvas1 和 canva2，只需在从未调用过的 imageObj.onload 函数之外执行所有这些操作：http: [//jsfiddle.net/KCyvE/](http://jsfiddle.net/KCyvE/)

**评论中的问题后的精确度：**

我在小提琴中的代码使用`context1.canvas`. 这是有效的，因为上下文是[CanvasRenderingContext2D](https://developer.mozilla.org/en-US/docs/DOM/CanvasRenderingContext2D)的一个实例，因此具有一个名为`canvas`“*对创建此上下文的画布元素的反向引用”*的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:21:57.763

您的`imageObj.onload`功能有些错误。这就是你想要的：http: [//jsfiddle.net/4xT2j/3/](http://jsfiddle.net/4xT2j/3/)

请注意，不一定有理由将 canvas3 写入图像对象，因为它已经是图像对象。

# php - 如何缓存（缓存在我的服务器上）像 Stackoverflow 这样用 PHP 编写的网站

> ID：10931399
> 
> 赞同：0
> 
> 时间：2012-06-07T12:03:39.520
> 
> 标签：php, caching

我已经尝试制作自己的 SO 用于练习，并且基本上已经完成了基础知识。我从来没有缓存过比 javascript 和 css 更多的东西。我曾尝试搜索 SO 和谷歌，但我无法弄清楚以下问题。

我还想知道服务器上应该缓存哪些页面。即我应该缓存一个像 questions/45/title-goes-here 这样的页面吗？

如果每个人的用户名都不同，我如何缓存标题部分？

对于每个问题，我是否将整个文件转储到文本文件中？这似乎不太实用。

如何设置后退按钮使用的缓存页面。

对不起，如果答案很明显，但我已经研究过，只是不明白。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:16:42.443

您的缓存系统基本上是一组工具，用于对生成“昂贵”且变化不大的事物进行快速查找。

**要确定应该缓存哪些内容，您需要研究到目前为止的工作，并找出哪些部分占用了最多的 CPU 或数据库时间。然后缓存那些。**

对于缓存 StackOverflow，一种策略可能是为每个问题的 HTML 生成一个缓存对象，包括之后可以使用 JavaScript 填充的 s。查找问题和标签的过程可能比仅查找包含两者的单个缓存条目更耗时。

对于您的标题，这也是 JavaScript 的候选者，只要您不介意跳过用户界面的优雅降级。标头的缓存用户名部分可能类似于：

```
<div id="username"></div> 
```

然后，由未缓存的东西生成的 JavaScript 将用个性化内容“填补空白”。

希望这可以帮助。

# javascript - 将对象数组转换为对象

> ID：10931400
> 
> 赞同：0
> 
> 时间：2012-06-07T12:03:42.280
> 
> 标签：javascript, jquery, arrays, object

我有一个返回的对象列表：data.d[15]

和其中一个样本：

```
data.d[3] = {
CityId: 2,
CityName: "Ankara"} 
```

我想将它转换为一个对象

```
cities{
1: "Istanbul",
2: "Ankara",
3: "New York"
} 
```

它应该是通用的，所以我不知道“CityId”和“CityName”字段名称。最好的方法是什么？

谢谢大家...我已按字段对象发送字段名-此代码没有重要的依赖项-已解决。

```
 var url = this.options.url + "/" + field.values,
                id = field.fieldId,
                title = field.fieldTitle;

            this.getJSON(url, {}, function (rData) {
                var obj = {};

                for (i = 0; i < rData.d.length; i++)
                    obj[rData.d[i][id]] = rData.d[i][title];

                $("#" + parentId).html(self.getHtmlOfFormData(type, obj));
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:18:11.070

也许您需要检测哪个属性包含城市名称。也许这样的事情可以工作？

```
var idprop, nameprop;
for (var prop in data.d[0]) {
    if (typeof data.d[0][prop] === "string") nameprop = prop;
    if (typeof data.d[0][prop] === "number") idprop = prop;
}

var cities = {};
for (var i = 0; i < data.d.length; i++)
   cities[data.d[i][idprop]] = data.d[i][nameprop]; 
```

请记住，这在以下情况下有效：

1.  `data.d`不是一个空数组；
2.  只有一个字符串属性包含城市名称；
3.  只有一个数字属性包含城市 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:48:04.440

如果我理解你的问题，你正在尝试转换一些看起来像这样的 ajax 返回：

```
data.d = [
    {
        cityId: someNumber1,
        cityName: someName1
    },
    {
        cityId: someNumber2,
        cityName: someName2
    }
]; 
```

进入一个看起来像这样的对象：

```
cities = {
    someNumber1: someName1,
    someNumber2: someName2
}; 
```

像这样的片段可以解决问题：

```
var cities = {};
for (var i = 0; i < data.d.length; i++) {
    cities[data.d[i].cityId] = data.d[i].cityName;
} 
```

# c - setlocale() 使用哪些文件？

> ID：10931404
> 
> 赞同：0
> 
> 时间：2012-06-07T12:03:58.063
> 
> 标签：c, linux

不允许在共享的 CentOS 服务器上编译。因此，我在我的 Debian 计算机上编译我的程序，将它与 Debian 的系统库（如 libc 等）链接起来。然后我上传我的程序和 Debian 系统库，我的程序就可以工作了。唯一的问题是 setlocale() 在 CentOS 上不起作用。CentOS 安装了“en_US.utf8”，并且可以在除我之外的所有程序上运行。我怀疑我还必须上传 Debian 的语言环境文件？如何将我的程序链接到 Debian 语言环境文件？我尝试使用 LOCPATH，但我不确定它是如何工作的。我必须链接到哪些文件以及如何链接？

C程序：

```
setenv("LOCPATH", "/", 1);

if (setlocale(LC_ALL, "en_US.utf8") == NULL) {
    puts("not set");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T11:28:15.980

我使用十六进制编辑器来修改`/usr/lib/locale/locale-archive`显然是唯一`setlocale()`使用的文件的路径`strace`。这种方法很脏，但它有效。

根据[man LOCPATH](http://nixdoc.net/man-pages/Tru64/man5/LOCPATH.5.html)，这个环境变量是非标准的，所以不推荐使用它。没有给出如何使用它的示例，也没有给出“语言环境的目标文件”路径的确切含义。

我想修改路径的唯一真正方法是 glibc 修改和重新编译。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-07T13:49:15.377

引用：`LOCPATH is an environment variable that tells the setlocale() function the name of the directory from which to load locale object files. If LOCPATH is not defined, the default directory /usr/lib/nls/locale is searched. LOCPATH is similar to the PATH environment variable; it contains a list of z/OS UNIX directories separated by colons.`

因此，仅仅指定`/`并希望它进行递归搜索是行不通的。

您还可以生成静态二进制文件并将其上传到主机。

# c# - 如何创建任务以使用任务和异步方法从 TcpClient 连续读取数据

> ID：10931405
> 
> 赞同：1
> 
> 时间：2012-06-07T12:04:02.853
> 
> 标签：c#, tcpclient, task

我正在尝试从 TcpClient 连续读取数据。这是我的代码片段。

```
var task = Task.Factory.StartNew(Read);

task.ContinueWith(ant =>
     Console.WriteLine("Error: " + ant.Exception.Message),
     TaskContinuationOptions.OnlyOnFaulted);

task.ContinueWith(ant =>
     {
         Log("Log my data");
     });

void Read()   
{
   Task<int> readChunk = Task<int>.Factory.FromAsync(
              _stream.BeginRead, _stream.EndRead,
              data, bytesRead, data.Length - bytesRead, null,
              TaskCreationOptions.AttachedToParent);

   readChunk.ContinueWith(rt => { bytesRead = readChunk.Result; }, TaskContinuationOptions.NotOnFaulted
                                            | TaskContinuationOptions.AttachedToParent);
} 
```

这段代码运行良好，但流中可能会有更多数据，所以我希望它返回并再次读取。开始另一个读取任务似乎不正确。我不熟悉任务并行库。通常我会写这样的东西：

```
while (true)
{
   bytesRead += _stream.Read(data, bytesRead, chunkSize);
   if(bytesRead == BytesExpected)
       break;
} 
```

# python - 如何为类的实例定义默认属性列表？

> ID：10931408
> 
> 赞同：6
> 
> 时间：2012-06-07T12:04:14.897
> 
> 标签：python, properties, attributes

我的程序中有一些对象，每个对象都有大约 10-15 个属性。这些属性设置在程序各个阶段的代码中的各个位置。由于在对象上设置它们而不在 Python 的类中定义它们是绝对好的，所以在我的程序中没有很好的权威列表来说明使用了哪些属性。

我想要以下内容：

```
class MyObject(object):
    attr1
    attr2 
```

我看过`property()`内置的，但每个属性至少有 6 行代码。有没有一种简单的方法来定义默认属性列表而无需在 Python 中初始化它们？

**更新**：我忘了提，大多数值没有合理的默认值，并且实际上等于使用`None`前。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T12:41:08.880

我认为 Hugh Bothwell 走在了正确的轨道上，但可以做得更简洁：

```
class MyClass(object):
    _defaults = "attr1", "attr2", "attr3"
    _default_value = None

    def __init__(self, **kwargs):
        self.__dict__.update(dict.fromkeys(self._defaults, self._default_value))
        self.__dict__.update(kwargs)

my_object = MyClass(attr3='overridden', attr4='added')

print(vars(my_object)) 
```

输出：

```
{'attr4': 'added', 'attr2': None, 'attr3': 'overridden', 'attr1': None} 
```

我做了`_defaults`和`_default_value`类属性（可以在运行时更改）。（然而，提供一个**可变的默认值**可能需要额外的代码来防止它被创建的每个实例共享。）

这将很容易扩展以允许为每个默认属性定义不同的（不可变的）默认值：

```
class MyClass(object):
    _defaults = {
        "attr1": None,
        "attr2": 0,
        "attr3": ""
    }

    def __init__(self, **kwargs):
        self.__dict__.update(self._defaults)
        self.__dict__.update(kwargs)

my_object = MyClass(attr3='overridden', attr4='added')

print(vars(my_object)) 
```

输出：

```
{'attr4': 'added', 'attr2': 0, 'attr3': 'overridden', 'attr1': None} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T12:05:28.553

像这样？

```
class MyObject(object):
    def __init__(self, attr1 = default1, attr2 = default2):
        self.attr1 = attr1
        self.attr2 = attr2 
```

`MyObject`您可以在指定或不指定属性的情况下实例化 a

```
myObject1 = MyObject() # gets default values 
myObject2 = MyObject(foo, bar) # overrides defaults 
```

`kwargs`如果您有可变数量的属性，您也可以使用关键字参数 ( )，请参见[此处](http://www.saltycrane.com/blog/2008/01/how-to-use-args-and-kwargs-in-python/)的示例。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-07T12:26:54.177

如果您要传递许多属性，则这样可能更具可读性：

```
class Myclass(object):
    def __init__(self, **kwargs):
        defaults = {
            "attr1": None,
            "attr2": 0,
            "attr3": ""
        }
        defaults.update(kwargs)
        for attr,value in defaults.iteritems():
            self.__setattr__(attr, value) 
```

**编辑：**查看@martineau 和@kosii 的建议，这是另一种可能性：

```
class MyClass(object):
    defaults = {
        "attr1": None,
        "attr2": 0,
        "attr3": ""
    }

    def __init__(self, **kwargs):
        self.__dict__.update(kwargs)

    def __getattr__(self, key):
        try:
            # return a default value
            return MyClass.defaults[key]
        except KeyError:
            raise AttributeError("don't recognize .{}".format(key)) 
```

...在这种情况下，如果尚未实际设置已识别的对象属性，则它们会返回默认值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T13:21:49.623

玩个小游戏怎么样`__getattr__`？

```
class A(object):
    def __init__(self, special_attrs=[]):
        self.__dict__['_special_attrs_dict'] = dict.fromkeys(special_attrs)

    def __getattr__(self, key):
        if key in self._special_attrs_dict:
            return self._special_attrs_dict[key]
        raise AttributeError('')

    def __setattr__(self, key, value):
        if key in self._special_attrs_dict:
            self._special_attrs_dict[key] = value
        else:
            super(A, self).__setattr__(key, value) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T12:35:41.817

如果您愿意，您可以使用默认值创建类属性。如果一个类可以有许多属性但其中许多属性通常未设置，或者如果实例被序列化，您可以确保只序列化/反序列化非默认属性而忽略默认属性，这将特别有用价值观。

例如

```
class MyObject(object):
    attr1 = 42
    attr2 = ()

instance = MyObject()
for x in instance.attr2:
    print(x) 
```

现在任何`MyObject`实例都具有`attr1`和`attr2`属性，无论它们是否被显式设置。请注意，如果您希望默认值是一个序列，您应该确保使用一个元组，这样它就不会被意外改变。

# php - PHP 的问题爆炸式增长

> ID：10931411
> 
> 赞同：0
> 
> 时间：2012-06-07T12:04:30.437
> 
> 标签：php, drupal, token, explode

我正在使用这段代码：

```
$imageurl = "http://siteadress/sites/default/files/bjorn_4.jpg";
$pieces = explode('/', $imageurl);
print_r($pieces); 
```

拆分一个网址。

print_r 给了我这个结果=

```
Array ( [0] => http://siteadress/sites/default/files/bjorn_4.jpg ) 
```

它不应该在每个 / 之后拆分 URL 吗？所以它将是 Array ( [0] => http:/ [1] => / [2] => siteadresses 或类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:26:38.813

尝试将您的`Array[0]`元素保存到任何变量并拆分该变量，例如：

```
 $image=Array[0];
  $pieces = explode('/', $image);
  print_r($pieces); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:26:45.913

我不熟悉 Drupal，但快速阅读文档给了我这个：

[http://api.drupal.org/api/drupal/core!includes!token.inc/function/token_replace/8](http://api.drupal.org/api/drupal/core!includes!token.inc/function/token_replace/8)

> `token_replace()`
> 
> 用适当的值替换给定字符串中的所有标记。

希望这会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T15:36:14.590

试一试

检查页面的视图源，检查是否得到 %2F 或 "/"

其次，检查用 explode('/', << 字段值 >>)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T12:06:34.137

我认为你应该尝试：

```
$imageurl = [node:field_banner_image]; 
```

因为带引号的 explode 会认为字符串是 [node:field_banner_image] 而不是里面的字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T12:18:44.163

就像爱德华·莫伊纳德说的

```
 $imageurl = [node:field_banner_image];
           $pieces = explode('/', $imageurl);
           print_r($pieces); 
```

这应该工作

# polygon - 旋转二维矩形内的点（不使用平移、三角函数或点积）

> ID：10931414
> 
> 赞同：1
> 
> 时间：2012-06-07T12:04:48.587
> 
> 标签：polygon, formal-verification

我想知道以下检查点是否在矩形内的算法是否有效。我用自己的直觉开发了它（没有强大的三角/数学基础来支持它），所以我很想听听在这件事上有更多经验的人的意见。

**语境：**

*   矩形由 4 个点定义。它可以旋转。
*   坐标总是正的。
*   根据定义，如果点与矩形相交，则认为该点位于矩形内部。

**假设：**

*   使用点和矩形顶点之间的距离（下图）。
*   最大可能的总距离是当点位于一个顶点时（第二张图）。
*   如果该点刚好在矩形之外，则距离会更大（第三张图）。

图表链接：http: [//i45.tinypic.com/id6o35.png](http://i45.tinypic.com/id6o35.png)

**算法（Java）：**

```
static boolean pointInsideRectangle(Point[] rect, Point point) {
    double maxDistance = distance(rect[0], rect[1]);
    maxDistance += distance(rect[0], rect[2]);
    maxDistance += distance(rect[0], rect[3]);

    double distance = 0;
    for (Point rectPoint : rect) {          
        distance += distance(rectPoint, point);
        if (distance > maxDistance) return false;
    }
    return true;
} 
```

**问题：这是正确的吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T13:34:39.597

简短的回答：NO :P （不要对此感到失望）

**长答案**：与您提到的四个圆圈的区域相交（相对顶点之间的最大距离）不会产生矩形。![半径等于矩形对角线的四个圆的公共面积，每个角的中心](../Images/2bfd15f9659a9c76f73d6200bc650435.png) 由于我在几何上有点生疏，我不能给出完整的数学解释（我的时间限制），但给你一些带有你要求的约束的过程伪代码（没有花哨的公式），对维基百科的任何矩形都有效或者几何书可以填补空白。

*   找到 N、E、S、W 顶点（最上面、最右边、最低和最左边的顶点）这对于任何矩形都很容易，但轴对齐的人会产生奇怪的顶点分配（参见带有示例的图像）![在此处输入图像描述](../Images/d87fe3608639810d49ca1331a0f4cb69.png)
*   [找到 NE、SE、SW 和 NW 边界，这是维基百科](http://en.wikipedia.org/wiki/Line_%28geometry%29 "维基百科中的例子")或其他[链接](http://www.cut-the-knot.org/Curriculum/Calculus/StraightLine.shtml "另一个网站")中的线方程，同样应该很容易，但是应该仔细分析轴对齐的边界，[因为它们会产生另一种类型的 ecuation/restriction](http://en.wikipedia.org/wiki/Linear_equation "维基百科链接")。
*   检查您的点是否在边界的“右侧”，将[不等式视为数学术语](http://en.wikipedia.org/wiki/Inequality_%28mathematics%29 "维基百科链接")，只有 **矩形内的**一个点 满足您在所附图像中看到的四个限制。![对于每个](../Images/cb4b585d4e71318f99b14f50d945311d.png)

*   如果我忽略了一些可以完成此任务的 java.geom 命令，我深表歉意

我希望这对你的努力有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T21:20:45.643

你可以试试这个。让我们将点命名为 A。在 A 和矩形的每个点之间画一条线。之后你会得到 4 个不同的三角形。计算三角形的面积（使用 Heron 公式）并将其与矩形的面积。如果面积相同，则您的点在矩形内。干杯

# java - 在 PrimeFaces 中取消选择表格行

> ID：10931415
> 
> 赞同：3
> 
> 时间：2012-06-07T12:04:48.700
> 
> 标签：java, jsf, primefaces

我有一张这样的桌子：

```
<p:dataTable id="table" selectionMode="single">  

    ...

    <p:ajax event="rowSelect" listener="#{myBean.onRowSelect}" update="someStuff"/>
    <p:ajax event="rowUnselect" listener="#{myBean.onRowUnselect}" update="otherStuff"/>

</p:dataTable> 
```

有谁知道如何`rowUnselect`在 UI 上触发事件？

另一件事，`selectionMode`属性的可能值是什么？它们似乎不在文档中。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T12:23:27.967

要触发 rowUnselect，一旦选择了一行，按住 control 键并再次单击该行。这样该行就会被取消选择，并执行 ajax 事件。

selectionMode 属性的可能值为“single”和“multiple”。

# android - Google 地图小部件未在某些 Android 设备上显示

> ID：10931418
> 
> 赞同：0
> 
> 时间：2012-06-07T12:04:57.030
> 
> 标签：android, google-maps

我有一个内置 Google Maps 的 android 应用程序。我有条件地链接了小部件，即加载小部件的代码如下所示：

```
public class Starter extends Activity
{
  @Override
  public void onCreate(Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.starter);

    try
    {
      Class.forName("com.google.android.maps.MapView");

      Intent i = new Intent();
      i.setClass(this, GoogleMapsActivity.class);

      startActivity(i);
      finish();
    }
    catch(ClassNotFoundException e)
    {
      TextView tv = (TextView)findViewById(R.id.google_maps_start);
      tv.setText(R.string.not_found);
    }
  }
} 
```

并且 AndroidManifest 包含以下行：

```
<uses-library android:name="com.google.android.maps" android:required="false" /> 
```

该小部件在模拟器和真实设备中正常工作，但还有一个设备，我看到“Google Maps not found”消息，由`ClassNotFoundException`处理程序启动。尽管如此，同一台设备上确实有谷歌地图，它们工作正常。所以问题是我的应用程序出了什么问题，或者可能是特定设备出了什么问题，以及如何解决这个问题？

# android - Android在surfaceview和canvas上绘图

> ID：10931419
> 
> 赞同：11
> 
> 时间：2012-06-07T12:04:59.800
> 
> 标签：android, drawing

我有一个“简单”的问题。我试着在surfaceview上画画。布局-XML：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:keepScreenOn="true"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <SurfaceView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/imagesurface"
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        android:background="#00ff00">
    </SurfaceView>

</LinearLayout> 
```

Activity 是一个 SurfaceHolder.Callback：

```
public class OpenCvonAndroidGTDforHOGActivity extends Activity implements SurfaceHolder.Callback{

    private SurfaceHolder _surfaceHolder;
    private SurfaceView _surfaceView;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        _surfaceView = (SurfaceView)findViewById(R.id.imagesurface);
        _surfaceHolder = _surfaceView.getHolder();
        _surfaceHolder.addCallback(this);
        _surfaceView.setWillNotDraw(false);

    }

    protected void onDraw(Canvas canvas) {
        canvas.drawRGB(255, 0, 255);            
    }

    public void surfaceCreated(SurfaceHolder holder) {
        Canvas canvas = null;
        try {
            canvas = holder.lockCanvas();
            synchronized(holder) {
                onDraw(canvas);
            }
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            if (canvas != null) {
                holder.unlockCanvasAndPost(canvas);
            }
        }
    }

    public void showToast(String msg) {
        Toast.makeText(getApplicationContext(), msg, Toast.LENGTH_SHORT).show();
    }
} 
```

如果我打电话

`_surfaceview.setBackground(Color.RED)` 在 onDraw(...) 它工作。但

`canvas.drawRGB(255, 0, 255)` 不工作:(

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-07T12:23:19.777

关注 Snippet 将对您有所帮助。

```
public class SurfaceDemo extends Activity implements SurfaceHolder.Callback {

    private static final String TAG = "Svetlin SurfaceView";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        SurfaceView view = new SurfaceView(this);
        setContentView(view);
        view.getHolder().addCallback(this);
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        tryDrawing(holder);
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int frmt, int w, int h) { 
        tryDrawing(holder);
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {}

    private void tryDrawing(SurfaceHolder holder) {
        Log.i(TAG, "Trying to draw...");

        Canvas canvas = holder.lockCanvas();
        if (canvas == null) {
            Log.e(TAG, "Cannot draw onto the canvas as it's null");
        } else {
            drawMyStuff(canvas);
            holder.unlockCanvasAndPost(canvas);
        }
    }

    private void drawMyStuff(final Canvas canvas) {
        Random random = new Random();
        Log.i(TAG, "Drawing...");
        canvas.drawRGB(255, 128, 128);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-26T11:57:14.820

`SurfaceView`由`View`当前布局中的 a 和布局下的表面组成。如果您为视图设置背景，您将看不到表面上发生的任何事情。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-12-24T09:22:46.953

你试过了吗

```
yourHolder.unlockCanvassAndPost(your_canvas); 
```

# python - 在 python 日志记录中使用 dictConfig，需要使用与 dict 中定义的文件不同的文件创建记录器。

> ID：10931423
> 
> 赞同：19
> 
> 时间：2012-06-07T12:05:15.870
> 
> 标签：python, logging

我有一个 LOG_SETTINGS 字典，看起来像：

```
LOG_SETTINGS = {
'version': 1,
'handlers': {
    'console': {
        'class': 'logging.StreamHandler',
        'level': 'INFO',
        'formatter': 'detailed',
        'stream': 'ext://sys.stdout',
    },
    'file': {
        'class': 'logging.handlers.RotatingFileHandler',
        'level': 'INFO',
        'formatter': 'detailed',
        'filename': '/tmp/junk.log',
        'mode': 'a',
        'maxBytes': 10485760,
        'backupCount': 5,
    },

},
'formatters': {
    'detailed': {
        'format': '%(asctime)s %(module)-17s line:%(lineno)-4d ' \
        '%(levelname)-8s %(message)s',
    },
    'email': {
        'format': 'Timestamp: %(asctime)s\nModule: %(module)s\n' \
        'Line: %(lineno)d\nMessage: %(message)s',
    },
},
'loggers': {
    'extensive': {
        'level':'DEBUG',
        'handlers': ['file',]
        },
}
} 
```

在我的代码中，我执行以下操作：

```
logging.config.dictConfig(LOG_SETTINGS)

logger = logging.getLogger('extensive')
logger.info("This is from Runner {0}".format(self.default_name))

logger2 = logging.getLogger('extensive')
logfile = logging.FileHandler("test.log")
logger2.addHandler(logfile)

logger2.info("This is from Runner {0} to the new   file.".format(self.default_name)) 
```

但输出仍然写入 LOG_SETTINGS 中定义的原始日志文件。我正在寻找的是能够说：logger2.replaceHandler(logfile) 而不是 addHandler。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-07T12:24:42.510

首先，清空您的记录器处理程序，`logger.handlers = []`然后添加另一个处理程序。

```
logger2 = logging.getLogger('extensive')
logfile = logging.FileHandler("test.log")
logger2.handlers = []
logger2.addHandler(logfile) 
```

# javascript - 在 HTML/CSS 中重塑视频元素

> ID：10931424
> 
> 赞同：1
> 
> 时间：2012-06-07T12:05:23.110
> 
> 标签：javascript, html, css

我想在 HTML/CSS/JS 原型中显示视频，没问题。现在的诀窍是，在设计上，视频的形状像一个圆圈。放置控件将是一个挑战，但我的问题是；是否可以在 HTML、CSS 或 JS 中显示一个圆形的视频？

提前致谢！

PS：支持不是很重要，因为它是原型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:14:18.840

这篇文章试图用 CSS3 圆角来回答同样的问题。您只需将半径设为长度和宽度的一半即可获得完美的圆：

[html5视频上的圆角](https://stackoverflow.com/questions/6238451/rounded-corners-on-html5-video)

# c# - 确定 List 中的值跳跃

> ID：10931425
> 
> 赞同：4
> 
> 时间：2012-06-07T12:05:27.763
> 
> 标签：c#, .net, linq

我有一堂课：

```
public class ShipmentInformation
{
    public string OuterNo { get; set; }
    public long Start { get; set; }
    public long End { get; set; }

} 
```

我有一个`List<ShipmentInformation>`名为`Results`.

然后我做：

```
List<ShipmentInformation> FinalResults = new List<ShipmentInformation>();
var OuterNumbers = Results.GroupBy(x => x.OuterNo);
foreach(var item in OuterNumbers)
{
   var orderedData = item.OrderBy(x => x.Start);

   ShipmentInformation shipment = new ShipmentInformation();
   shipment.OuterNo = item.Key;
   shipment.Start = orderedData.First().Start;
   shipment.End = orderedData.Last().End;

   FinalResults.Add(shipment);
} 
```

我现在遇到的问题是，在每个分组项目中，我都有各种 ShipmentInformation，但起始编号可能不是按 x 顺序排列的。x 可以是 300 或 200，具体取决于传入的参数。为了说明我可以

1.  开始 = 1，结束 = 300
2.  开始 = 301，结束 = 600
3.  开始 = 601，结束 = 900
4.  开始 = 1201，结束 = 1500
5.  开始 = 1501，结束 = 1800

因为我有这个跳转，所以我不能使用上面的循环来创建一个实例`ShipmentInformation`并获取第一个和最后一个项目`orderedData`以使用它们的数据来填充该实例。

我想要某种方法来识别跳跃 300 或 200 并创建 ShipmentInformation 的实例以添加到数据是连续的 FinalResults 中。

使用上面的示例，我将有 2 个 ShipmentInformation 实例，其起点为 1，终点为 900，另一个实例的起点为 1201，终点为 1800

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T12:21:50.770

尝试以下操作：

```
private static IEnumerable<ShipmentInformation> Compress(IEnumerable<ShipmentInformation> shipments) 
{
  var orderedData = shipments.OrderBy(s => s.OuterNo).ThenBy(s => s.Start);
  using (var enumerator = orderedData.GetEnumerator())
  {
    ShipmentInformation compressed = null;
    while (enumerator.MoveNext())
    {
      var current = enumerator.Current;
      if (compressed == null) 
      {
        compressed = current;
        continue;
      }
      if (compressed.OuterNo != current.OuterNo || compressed.End < current.Start - 1)
      {
        yield return compressed;
        compressed = current;
        continue;
      }
      compressed.End = current.End;
    }

    if (compressed != null)
    {
      yield return compressed;
    }
  }
} 
```

可以这样使用：

```
var finalResults = Results.SelectMany(Compress).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:25:36.670

如果您想要的东西可能性能很差并且无法理解，但只使用开箱即用的 LINQ，我认为这可能会做到。

```
var orderedData = item.OrderBy(x => x.Start);
orderedData
    .SelectMany(x => 
        Enumerable
            .Range(x.Start, 1 + x.End - x.Start)
            .Select(n => new { time = n, info = x))
    .Select((x, i) => new { index = i, time = x.time, info = x.info } )
    .GroupBy(t => t.time - t.info)
    .Select(g => new ShipmentInformation {
        OuterNo = g.First().Key,
        Start = g.First().Start(),
        End = g.Last().End }); 
```

我的脑袋疼。

（为清楚起见进行编辑：这只是替换了循环中的内容。您可以通过将其放在语句中替换循环`foreach`来使其变得更加可怕，就像在丰富的答案中一样。）`Select``foreach`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T12:42:50.763

这个怎么样？

```
List<ShipmentInfo> si = new List<ShipmentInfo>();
si.Add(new ShipmentInfo(orderedData.First()));
for (int index = 1; index < orderedData.Count(); ++index)
{
    if (orderedData.ElementAt(index).Start == 
        (si.ElementAt(si.Count() - 1).End + 1))
    {
        si[si.Count() - 1].End = orderedData.ElementAt(index).End;
    }
    else
    {
        si.Add(new ShipmentInfo(orderedData.ElementAt(index)));
    }
}

FinalResults.AddRange(si); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T12:40:06.430

另一种 LINQ 解决方案是使用 except 扩展方法。

编辑：用 C# 重写，包括将缺失的点组合回范围：

```
class Program
{
    static void Main(string[] args)
    {

        Range[] l_ranges = new Range[] { 
            new Range() { Start = 10, End = 19 },
            new Range() { Start = 20, End = 29 },
            new Range() { Start = 40, End = 49 },
            new Range() { Start = 50, End = 59 }
        };

        var l_flattenedRanges =
            from l_range in l_ranges
            from l_point in Enumerable.Range(l_range.Start, 1 + l_range.End - l_range.Start)
            select l_point;

        var l_min = 0;
        var l_max = l_flattenedRanges.Max();

        var l_allPoints =
            Enumerable.Range(l_min, 1 + l_max - l_min);

        var l_missingPoints =
            l_allPoints.Except(l_flattenedRanges);

        var l_lastRange = new Range() { Start = l_missingPoints.Min(), End = l_missingPoints.Min() };
        var l_missingRanges = new List<Range>();

        l_missingPoints.ToList<int>().ForEach(delegate(int i)
        {
            if (i > l_lastRange.End + 1)
            {
                l_missingRanges.Add(l_lastRange);
                l_lastRange = new Range() { Start = i, End = i };
            }
            else
            {
                l_lastRange.End = i;
            }
        });
        l_missingRanges.Add(l_lastRange);

        foreach (Range l_missingRange in l_missingRanges) {
            Console.WriteLine("Start = " + l_missingRange.Start + " End = " + l_missingRange.End);
        }

        Console.ReadKey(true);
    }
}

class Range
{

    public int Start { get; set; }
    public int End { get; set; }

} 
```

# javascript - 使用包含图像标签的内容设置元素的 html 源

> ID：10931430
> 
> 赞同：2
> 
> 时间：2012-06-07T12:05:39.250
> 
> 标签：javascript, mootools

我正在使用[Mootools History 插件](http://davidwalsh.name/mootools-history)来更新页面的内容，而无需重新加载页面。

当图像在被注入的内容中时，除了 Mootools 生成 404 错误（在控制台中可见）之外，一切正常。

内容通过 Request.HTML 调用收集和设置，如下所示（简化演示）：

```
var request = new Request.JSON({
    onSuccess: function(responseJSON, responseText) {
        html = JSON.decode(responseJSON);
        $('zone').set('html', html['text']);
    }
}); 
```

内容设置正确，但`.set('html', content)`似乎通过重写`src`图像的属性生成 404 错误。

网址如下所示：

```
http://example.com/%22//files//images//ImageName.jpg/%22 
```

虽然页面源将它们显示为：

```
/files/images/ImageName.jpg 
```

404 错误指的是 Mootools Core 中的**第 334 行**，尽管我看不出会导致问题的确切位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:11:45.280

解决方案是使用`Request.JSON`而不是`Request.HTML`直接访问 JSON 对象，而不是先对其进行解码。

IE

```
var request = new Request.JSON({
    onSuccess: function(responseJSON, responseText) {
        $('zone').set('html', responseJSON.text);
    }
}); 
```

正如[@DimitarChristoff部分建议的那样](https://stackoverflow.com/users/126998/dimitar-christoff)

# iphone - 如何像 Notes App 一样设置 UITextView 的内容插入

> ID：10931431
> 
> 赞同：10
> 
> 时间：2012-06-07T12:05:45.387
> 
> 标签：iphone, ios, uitextview

我正在一个应用程序中工作，我需要在 iphone 中提供诸如 Notes App 之类的功能。如第一个屏幕截图所示，最初，notes 在内容开始之前留下一个选项卡，我也想做同样的事情，当我将**Left Content inset** (of UITextView) 设置为 25 时，它显示在屏幕截图 2 中，在这里你可能会看到图像也移动了。我已将图像设置为背景。我不知道如何解决这个问题。

我还尝试通过将图像添加为 UITextview 的子视图，但它不会重复线条，同时滚动（线条图像）就像笔记应用程序一样。

![笔记应用](../Images/ef7f32bbc9e89a040a6057df493d4d4a.png) ![我得到的输出](../Images/7e12d52ed0ea94a22f71364fd3918f79.png)

我正在通过以下代码设置 Textview 的背景。

```
[textView setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"line_image.png"]]]; 
```

请告诉我我是否出错或需要任何额外的努力来获得所需的输出。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T12:15:59.483

UITextView 是 UIScrollView 的子类，因此所有相关的委托方法都可供您使用（例如`scrollViewDidScroll:`） - 您可以在该方法中调整您的自定义背景。

[Dr.Touch 博客](http://www.cocoanetics.com/2010/03/stuff-you-learn-from-reverse-engineering-notes-app/)上有一篇非常不错的关于重新创建 Notes 应用程序界面的帖子——您可以从中大致了解它是如何完成的。基本上所做的是添加自定义视图，在文本视图后面绘制背景并在文本视图的委托方法中调整它，并在其“contentSize”属性上使用 KVO。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T13:48:26.913

@Dinesh 提供了很好的解决方案，但**听起来并不通用**，因为我想使用线条图像而不是绘制它们。图像有一些绘画无法达到的特殊效果。所以为了解决这个问题，我在 textview 下方创建了一个表格视图，保持 textview 的背景透明。现在只需将线条的图像添加到我的表格视图的自定义单元格中，并将 UItableview 的内容偏移设置为与滚动视图相同（文本视图的子视图，参考@Vladimir 的答案）。

并使用以下代码通过滚动 textview 滚动我的 tableview 并获得所需的输出。

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{           
    tableView.contentOffset =scrollView.contentOffset; 
} 
```

保持我的 tableview 的行数非常大。

PS：我没有设置textview的**内容插图，而是设置了它的框架的****X位置**并相对减小了宽度。

# file-upload - 编辑 php.ini 文件后，Joomla 2.5 登录不起作用

> ID：10931432
> 
> 赞同：0
> 
> 时间：2012-06-07T12:05:51.577
> 
> 标签：file-upload, php, joomla2.5

*   我在 public_html/ 下创建了一个 php.ini 文件

    ```
    containing the following lines
    post_max_size = 2048M
    upload_max_filesize = 2048M
    max_execution_time= 6000000
    file_uploads = On 
    ```

    **编辑 php.ini 文件上传后工作正常，但我无法从 joomla 登录或注销**

    **如果删除 php.ini 文件，登录/注销工作正常但我无法上传大于 10 MB 的文件**

    我使用 BlueHost 作为主机和 Joomla 2.5

    请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:34:23.970

问题已解决，问题是 SWF 文件重置会话 ID。

# html - 在网页（Wordpress）中打开pdf文件而不提供其URL？

> ID：10931434
> 
> 赞同：0
> 
> 时间：2012-06-07T12:05:59.753
> 
> 标签：html, wordpress, embed

这个问题有点不同，所以我会尽力解释它。我非常感谢我能在这个问题上获得的任何帮助。我有一个网站，我有一个注册表单，之后用户可以查看报告。该报告保存在服务器上，因此人们也可以直接查看它（只需转到 pdf 的 url）。我想找到一种方法，用户必须注册才能查看报告。我不想使用 Flash，因为我知道移动浏览器存在问题（Apple）。密码保护也是我想避免的。用户是否必须通过注册才能查看报告？多谢

顺便说一句，该网站位于 Wordpress 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T17:33:59.567

试试这个插件：[**用户访问管理器**](http://wordpress.org/extend/plugins/user-access-manager/)

在该插件中，创建一个用户组并允许访问仅对该用户组查看您的 pdf 文件。

如果无法访问，此插件会将用户重定向到其他页面。

试试看。干杯！！！

# sql - 我可以在 SQL 中“while=test”结果吗？

> ID：10931440
> 
> 赞同：1
> 
> 时间：2012-06-07T12:06:16.447
> 
> 标签：sql, oracle, plsql, oracle11g

我正在构建一个复杂的 SQL 查询，我想在 while 语句中测试结果。

我想做类似的事情：

```
WHERE ( R.Expired IS NULL OR R.Expired > SYSDATE )
  AND (
    CASE
      WHEN R.Description LIKE '%SSX%' THEN TRUE
      ELSE  FALSE
    END
  ) ORDER BY R.Name 
```

但是 PL/SQL 说它有一些“无效的关系运算符”（翻译）。

我的 CASE 陈述有问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T12:12:01.233

这些`CASE WHEN`东西对我来说似乎没有必要。

只需使用

```
AND (R.Description Like '%SSX') 
```

调试的第一条规则——*避免不必要的复杂性。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:13:18.717

不确定您要在这里实现什么，但您也许可以尝试将 TRUE 和 FALSE 括在单引号中（因为 SQL 不支持布尔值）或简单地编写类似`AND R.Description LIKE '%SSX%'`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T12:15:38.750

简单的：

```
WHERE (R.Expired IS NULL OR R.Expired > SYSDATE) AND 
      R.Description LIKE '%SSX%' 
```

# c++ - 递归的 Theta 运行时

> ID：10931441
> 
> 赞同：2
> 
> 时间：2012-06-07T12:06:20.267
> 
> 标签：c++, recursion, runtime, big-theta

如何计算这个给定代码的 Theta 运行时间：

```
void f(int n)
{
    for (int i=3; i<n; ++i)
        for (int j=0; j<i; ++j)
            f(n-1);
} 
```

到目前为止，我得到了这个，但我不知道它是否正确或如何将它带入 Theta 表示法。

```
f(n) = n^2 * f(n-1)
f(n) = n^2 * (n-1)^2 * f(n-2)
f(n) = n^2 * (n-1)^2 * (n-2)^2 * f(n-3) 
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:26:16.897

由于每个嵌套的 for 循环都是 O(N^2) 复杂度，并且每次在另一个函数内部调用一个函数时，复杂度都会成倍增加，最终得到 O((N!)^2)，其中`N`的数字也是你递归的次数。这当然是因为`N! = N*(N-1)*(N-2)*...*(N-N+1)`, 并且用于创建阶乘的所有值都是平方的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:19:42.903

如果我们用零替换 3（这显然不会改变 Θ），我们可以很容易地推导出函数调用的确切数量：

> Θ [*f* ( *1* )] = 1
> Θ [*f* ( *n* )] = *n* ² ⋅ Θ [*f* ( *n* -1 )]         ∀ *n* > 0

因此，利用产品的交换性，

> [*n*]                  <sub> *n*           [*n*]
> Θ [*f* ( *n* )] = ∏   *j* ²   = ∏ *j*   ⋅ ∏ *j*   =  *n*！⋅ *n*！
>                <em>i =1 <em>i =1 <em>i =1
> = ( *n* !) ²

正如杰森所说。

# c - fgetc() 不能正常工作

> ID：10931443
> 
> 赞同：0
> 
> 时间：2012-06-07T12:06:26.583
> 
> 标签：c, multidimensional-array, eof, fgetc

我有类似 7 4 5 1 等的文件。我想把这些数字放在一个多维数组中。

```
for(x=0;x<9;x++)
       for(y=0;y<9;y++)
       {
         current=fgetc(fp);
         if(current!=EOF&current!=' '&current!='\n')
              sudokuArray[x][y] = current-'0';
       } 
```

此代码无法正常工作。sudokuArray[0][0] 给出结果为真（文件中的第一个数字），但 [0][1] 给出了一些随机数，如 131231304。[0][2] 给出了 [0][1] 应该是什么。这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:11:21.810

我不确定你为什么使用嵌套循环从文件中读取。我在您的代码中看到一个问题：

改成 ＆＆：

```
 if(current!=EOF&current!=' '&current!='\n') 
```

到：

```
 if(current!=EOF && current!=' ' && current!='\n') 
```

`&&`是逻辑`AND`并且`&`是按位与。

因为，你只有整数，你似乎知道确切的数字。整数。您可以简单地使用`fscanf`：

```
fscanf(fp, "%d", &arr[x][y]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:13:13.850

这是因为如果你的内部循环：

```
for(y=0;y<9;y++)
{
    current=fgetc(fp);
    if((current!=EOF) && (current!=' ') && (current!='\n'))
        sudokuArray[x][y] = current-'0';
} 
```

如果您的输入是`7 4 5 1`，那么当`y == 0`您阅读时`'7'`，它会被输入`sudokuArray[0][0]`。

现在在你的下一个循环中`y == 1`，你读到`' '`. 由于您的`if`陈述，您没有将其放入`sudokuArray` *但`y`仍会增加*。

下次您执行循环时`y == 2`，您阅读`'4'`并放入`sudokuArray[0][2]`.

确实可以正常工作，`fgetc()`并且您的代码完全按照您的要求执行。这样代码就很听话了。

编辑：还要注意您的`if`语句应该包含`&&`而不是`&`. 他们是不同的运营商。一些空格和一些括号也使代码更易于阅读和维护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T12:11:46.787

在您的循环中，您忽略了字符 - 但是即使您没有填充相关的数组元素，您也会增加索引。尝试重新实现为：

```
#include <stdlib.h>

for(x=0;x<9;x++)
    for(y=0;y<9;y++)
      {
      /* Get next character */

      current=fgetc(fp);

      /* Loop, retrieving additional chars, until either EOF is hit or 
         you find a non-whitespace character */

      while(current != EOF && iswhite(current))
        current = fgetc(fp);

      if(current != EOF)
        sudokuArray[x][y] = current - '0';
      } 
```

另外 - 你想检查`current != EOF`，还是应该这样`!feof(fp)`？

分享和享受。

# html - IMG 显示在 IE 中而不是在 Firefox 中

> ID：10931449
> 
> 赞同：1
> 
> 时间：2012-06-07T12:06:51.360
> 
> 标签：html, firefox, image

我有一个 HTML 文档类型，旨在显示从数据库应用程序中提取数据并生成可以打印的网页的表单。它不打算在线发布，我只是使用 HTML 和 CSS 来格式化页面，因为应用程序中的报告工具不允许像样的格式化。

我正在尝试显示保存在共享驱动器上的图片。使用的代码是

```
<IMG SRC="X:\images\<primarykey>.jpg" height="100"> 
```

其中 X 是图片所在的驱动器（用户有权访问），并且是生成 html 时报告工具填充的每张图片的唯一标识符。

IE 可以显示图片，但 Firefox 不能，而是显示文本。我真的需要在 Firefox 中完成这项工作，因为 IE 正在进一步打乱表单的布局。

我已经尝试过更改 IMG SRC 声明，使用相对路径和正斜杠等，但无法让它工作。

任何建议都会很棒！

谢谢凯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:21:15.287

建议：

1.  在山姆提到的，小写的元素和属性。
2.  尝试 src 为：`src="file:///X:/images/.jpg"`
3.  如果预期输出是有效的 XHTML，您可能需要确保它是自关闭的，例如：`<img .... />`

# asp.net-mvc - 在 IF 语句中填充 Viewmodel？

> ID：10931450
> 
> 赞同：2
> 
> 时间：2012-06-07T12:06:52.693
> 
> 标签：asp.net-mvc, mvvm, if-statement

我试图根据查询字符串中的值填充视图模型。这是我的控制器：

```
public ViewResult Index(int? ShiftStatusID)
{
    //Get logged in User
    User user = _accountService.GetUser(_formsAuthService.GetLoggedInUserID());

    if (ShiftStatusID == null) // Get all shifts
    {
        ViewModelShiftList viewModel = new ViewModelShiftList
        {
            Shifts = _shiftService.GetShifts(user.organisationID.Value).ToList()
        };
    }
    else // Get shifts by status id
    {
        ViewModelShiftList viewModel = new ViewModelShiftList
        {
            Shifts = _shiftService.GetShiftsByStatus(user.organisationID.Value, ShiftStatusID).ToList()  
        };
    }

    return View(viewModel);
} 
```

所以它不会让我将视图模型返回到视图，说“视图模型在当前上下文中不存在”。它不会让我在 if 语句之外声明视图模型。这应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T02:53:45.897

尝试在视图结果中移出 if 语句。这是一个应该可以正常工作的代码示例：

```
public ViewResult Index(int? ShiftStatusID)
{
       //Get logged in User
        User user = _accountService.GetUser(_formsAuthService.GetLoggedInUserID());
        var viewModel = new ViewModelShiftList();

        if (ShiftStatusID.HasValue)// Get shifts by status id
        {
            viewModel.Shifts = _shiftService.GetShifts(user.organisationID.Value).ToList();
        }
        else // Get all shifts
        {
            viewModel.Shifts = _shiftService.GetShiftsByStatus(user.organisationID.Value, ShiftStatusID).ToList();
        }

    return View(viewModel);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T03:01:56.013

清理你的代码，删除重复的行：

```
public ViewResult Index(int? ShiftStatusID)
{
    //Get logged in User
    User user = _accountService.GetUser(_formsAuthService.GetLoggedInUserID());

    List<Shift> shifts;

    if(ShiftStatusID == null)
        shifts = _shiftService.GetShifts(user.organisationID.Value).ToList();
    else
        shifts = _shiftService.GetShiftsByStatus(user.organisationID.Value, ShiftStatusID).ToList();

    var viewModel = new ViewModelShiftList
    {
        Shifts = shifts
    };

    return View(viewModel);
} 
```

# magento - Magento - 如何添加新产品状态

> ID：10931451
> 
> 赞同：1
> 
> 时间：2012-06-07T12:06:54.650
> 
> 标签：magento, status

我正在尝试制作新的产品状态，但我不知道该怎么做，并且网络上设置的所有内容都不一致，或者只是谈论我不想更改的订单状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:12:12.787

您获得新产品状态的动机是什么？我认为更改应用程序的这一部分有点冒险。我建议您添加新属性并使用该属性代替系统产品的属性“状态”，该属性告诉系统产品是启用还是禁用。我想两者之间没有任何关系:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:30:15.637

将类覆盖`Mage_Catalog_Model_Product_Status`到本地文件夹。然后打开文件\app\code\local\Mage\Catalog\Model\Product\Status.php

在文件的顶部，您可以看到常量

```
const STATUS_ENABLED    = 1;
const STATUS_DISABLED   = 2; 
```

例如，在它们下方添加您的自定义状态

```
const STATUS_SUSPENDED   = 3; 
```

然后编辑函数`getOptionArray`

```
static public function getOptionArray()
{
    return array(
        self::STATUS_ENABLED    => Mage::helper('catalog')->__('Enabled'),
        self::STATUS_DISABLED   => Mage::helper('catalog')->__('Disabled'),
        self::STATUS_SUSPENDED  => Mage::helper('catalog')->__('Suspended')
    );
} 
```

而已。不要忘记清除缓存。

# oracle - Oracle 触发器不工作

> ID：10931456
> 
> 赞同：2
> 
> 时间：2012-06-07T12:07:30.220
> 
> 标签：oracle, plsql

我需要开发一个触发器，当字段的值不是“Y”或“N”时触发。我的代码在下面，它不起作用

```
CREATE OR REPLACE TRIGGER ONLY_Y_N
BEFORE INSERT OR UPDATE OF flag
ON checktable
FOR EACH ROW
BEGIN
IF :new.flag <>'Y' OR  :new.flag <>'N' THEN
RAISE_APPLICATION_ERROR(-20100, 'Please insert Y  or N ');
END IF;
END ONLY_Y_N; 
```

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T12:11:14.550

合适的方法是检查约束，而不是触发器。

也许还有一个 NOT NULL 约束

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T12:15:06.567

正如大卫奥尔德里奇所说，你想要一个检查约束而不是触发器。但是，您的触发器不起作用的原因是这种情况：

```
IF :new.flag <>'Y' OR  :new.flag <>'N' THEN 
```

因为 'Y' <> 'N' 和 'N' <> 'Y' 这永远不会是真的！你需要：

```
IF :new.flag <>'Y' AND  :new.flag <>'N' THEN 
```

或更简洁地说：

```
IF :new.flag not in ('Y', 'N') THEN 
```

所以检查约束解决方案是：

```
alter table checktable add constraint only_y_n check (flag in ('Y', 'N')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T12:15:43.060

很简单：你应该有`AND`而不是`OR`. 无论`FLAG`. 更好的是，`NOT IN`改用：

```
IF :new.flag NOT IN ('Y', 'N') THEN
    RAISE_APPLICATION_ERROR(-20100, 'Please insert Y  or N ');
END IF; 
```

# ruby-on-rails - 如何从控制器返回 JSON 或 Ruby 哈希？

> ID：10931457
> 
> 赞同：1
> 
> 时间：2012-06-07T12:07:38.050
> 
> 标签：ruby-on-rails

请在控制器中考虑以下方法：

```
def get_navigation_from_session
  respond_to do |format|
    format.json { render json: session[:navigation]}
  end
  return session[:navigation]
end 
```

我想要它做的是响应 Ajax 调用并在请求时发送导航哈希。如果没有，我只希望它将哈希返回给需要它的 ruby​​ 代码。这显然是行不通的。如何修复上述方法以实现此目标？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:03:51.603

```
# this is your action method, supposed to be called via your request cycle with rendering
def get_navigation_from_session
  respond_to do |format|
    format.json { render json: get_navigation_hash_from_session }
  end
end

# a getter - maybe higher up in controller hiararchy
def get_navigation_hash_from_session
  session[:navigation]
end 
```

# java - 当我们声明静态时分配的内存在哪里？

> ID：10931463
> 
> 赞同：6
> 
> 时间：2012-06-07T12:07:55.293
> 
> 标签：java, android

> **可能重复：**
> [java中的静态分配——堆、栈和永久代](https://stackoverflow.com/questions/3849634/static-allocation-in-java-heap-stack-and-permanent-generation)

这是一个小混乱......定义类，方法和变量的静态。在这三种情况下，分配内存。? 我的老板对 C 很熟悉，他说只有变量在堆内存中，其余的（静态类和静态方法）将保留在主内存中。那是真的吗？有什么解释。？

在android中使用静态类和静态方法是一种最佳实践吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T12:13:59.970

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T12:12:38.423

静态变量与类声明（方法和属性等）保存在同一位置。1）。类（由类加载器加载）位于堆上称为永久代的特殊区域中，静态字段也位于相同的位置，因为它们对于类的每个实例都是通用的。更多细节 ：

[看到这个答案](https://stackoverflow.com/questions/3849634/static-allocation-in-java-heap-stack-and-permanent-generation)

# qt - 是否可以在 Windows 7、64 位上使用 Qt4 获得本机菜单？

> ID：10931464
> 
> 赞同：6
> 
> 时间：2012-06-07T12:07:55.803
> 
> 标签：qt, user-interface, windows-7, menu, qt4

用 Qt (4) 编写的应用程序在 64 位 Windows 7 上运行时没有本机菜单。这对于著名的应用程序如 VLC、Lyx 等都是如此。

Qt 菜单不像本机菜单，这可能很烦人。例如，考虑下面的屏幕截图。

![Qt 菜单示例](../Images/cab3dce4ee7dc906b56079cae16e80cf.png)

如果鼠标沿着红色路径快速移动，子菜单将立即关闭。对于 Windows（和 Mac）中的本机菜单，存在延迟。这会使在菜单中导航变得困难，因为它们不会像用户期望的那样运行。

是否可以在 Windows 中获得本机菜单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:08:06.743

在 Qt5 中有一个用于菜单的 QPA API - 它用于创建本地 Mac 菜单。它可能很快就会在 Android 上使用，并且完全有可能在 Windows 上实现。向后移植到 Qt4 会很复杂，因为原生 Mac 菜单支持是通过 #ifdefs 实现的

# c# - HttpWebRequest 截断 URL，其中包含非英文符号

> ID：10931465
> 
> 赞同：2
> 
> 时间：2012-06-07T12:07:58.677
> 
> 标签：c#, .net, httpwebrequest

我正在使用有时可能包含俄语符号的动态 URL 创建 HttpWebRequest。有时我会遇到一个不知道如何处理的问题：在编码为 URL 时，每个 RU 字符都已转换为 URL 字符实体等效项 (%20...)。显然，在这样的转换 URL 变得太长之后，因此 HttpWebRequest 截断了最后几个字符，所以我得到了 404 错误，而不是正确的 HTTP 结果。

有没有办法绕过这个限制？

我的网址如下所示：

```
http:\\1.1.1.1\some?page=2&var=тестовое значение строки (this part can be very long) 
```

我将其作为 GET 发送，因为我正在使用的网络应用程序此时期待 GET 请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:47:13.803

唯一的答案是您必须以任何其他方式发送它，因为查询字符串的长度有限制。

错误 404 或“HTTP 错误 414。请求 URL 太长”。你只会因为查询字符串的长度而得到，因为你发送的数据比限制长。

参考这个：[http ://forums.asp.net/t/1139751.aspx](http://forums.asp.net/t/1139751.aspx)

# objective-c - 将 NSIndexPath 传递给新视图

> ID：10931468
> 
> 赞同：0
> 
> 时间：2012-06-07T12:08:21.203
> 
> 标签：objective-c, ipad, storyboard, uipopovercontroller

我在将 NSIndexPath 传递给我的新视图时遇到了真正的麻烦。这是应用程序的工作方式：

我的导航栏中有一个 UIBarButtonItem，点击它，你会得到一个弹出视图，这显示了一堆东西。我需要从我的主视图中获取一个 NSIndexPath 到这个弹出视图。

我的弹出视图类中有一个 NSIndexPath 属性，并且弹出过渡在我的故事板中连接起来。

然后我有这段代码来跨视图传递索引路径：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"statsPopover"])
    {
        StatsViewController *statsVC = [segue destinationViewController];

        statsVC.selectedIndex = stageSelectionTable.indexPathForSelectedRow;
    }
} 
```

然而，虽然这被调用，但索引路径实际上并没有在视图之间发送。我在弹出框上的索引路径始终是默认的，0,0 行和部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:34:24.423

您说您从调试/日志记录中知道该方法正在运行，您的`if`语句被触发，并且`stageSelectionTable.indexPathForSelectedRow`具有您期望的值。

进行这种诊断会使您走上解决问题的正确道路。坚持下去——如果你用调试器或调试器测试其他东西，`NSLog`你应该能够找到问题所在。

*   你知道那`statsVC`是非`nil`吗？如果是`nil`，则您要设置的消息`selectedIndex`什么也不做。

*   是`statsVC`你期待的课吗？例如，如果弹出窗口中的（表格？）视图嵌入在导航控制器中，`segue.destinationViewController`它将指向导航控制器，并且您需要查看其子视图控制器数组以找到您正在寻找的那个。

*   您的`StatsViewController`类用于其`selectedIndex`属性的任何访问器方法是否正常工作？（如果它是强/保留属性的合成访问器，这应该不是问题。）

*   在您的`StatsViewController`课堂上，您是否尝试`selectedIndex`在实际设置之前与之合作？设置属性`prepareForSegue:sender:`然后使用它`viewDidLoad`应该可以正常工作，但使用它`awakeFromNib`可能不会，并且在`init...`方法中使用它肯定不会。

# java - 以编程方式创建环境变量

> ID：10931470
> 
> 赞同：0
> 
> 时间：2012-06-07T12:08:28.490
> 
> 标签：java, environment-variables

我有一个正在运行的外部程序。出于某种原因，代码所有者没有给我代码或良好的文档，我知道如何运行此代码，但它最初是为了从命令行而不是从 JAVA 执行而编写的。对我的影响是该应用程序使用 ENV 变量并根据其值（计算机上的输出路径）进行中继。我想更改该值，如何在不从批处理文件中运行它的情况下完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:36:09.203

[我假设您正在使用 Java 代码中的Runtime](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html) .exec() 方法之一执行该程序以创建[Process](http://docs.oracle.com/javase/6/docs/api/java/lang/Process.html)。

请注意，其中一些方法允许您将环境变量传递给正在创建的进程，例如[exec(String[] cmd, String[] envp)](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exec%28java.lang.String%5B%5D,%20java.lang.String%5B%5D%29)。

或者，可以操作[ProcessBuilder.environment()](http://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html#environment%28%29)返回的 Map以获得相同的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:32:38.493

看到[这个帖子](https://stackoverflow.com/a/7201825/1137043)。在发布问题之前先在这里开始搜索通常会有所帮助。如果您已经尝试过该解决方案，它确实有助于帮助者让他们知道您尝试过并且出了什么问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T12:13:20.947

在您的命令提示符中首先设置所需的变量

```
set FILELOCATION=<PATH TO FILE>

java MyProgram 
```

在这种情况下，在`FILELOCATION`您关闭程序之前将一直可用。

不设置变量将取决于操作系统。

对于 Linux 或 Solaris，您可以：

```
export FILELOCATION=<PATH TO FILE> 
```

如果您正在寻找命令行参数，那么您可以使用以下内容：

```
java MyProgram PathToFile 
```

有更好的方法来做到这一点`java -DFILELOCATION=<PATH_TO_FILE> MyProgram`

编辑：根据评论。

只需使用[ProcessBuilder](http://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html)在 Java 代码中设置 ENV 变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T12:19:07.947

> > 如何在不从批处理文件运行的情况下完成

只需设置全局环境变量。所有新进程都会看到它（不包括那些从旧父进程继承环境的进程）。

另请参阅[如何从 Java 设置环境变量？](https://stackoverflow.com/questions/318239/how-do-i-set-environment-variables-from-java). 这回答了问题的标题。顺便说一句，这与问题的主体不匹配。;)

# wcf - 在 WCF 中使用公共静态变量是否安全？

> ID：10931476
> 
> 赞同：0
> 
> 时间：2012-06-07T12:08:38.287
> 
> 标签：wcf, silverlight, static-variables

我正在我的 Silverlight 4 应用程序（VS2010，C#）中阅读电子邮件，我创建了一个处理电子邮件操作的 WCF（通过 IMAP），并在我的 Silverlight 应用程序中使用它的功能（实际上我的 Silverlight 应用程序将另一个父 silverlight 应用程序中的用户控件）。我可以为用户名、密码、imap 服务器地址和其他项目声明公共静态变量吗？我的应用程序将有多个用户，那么在我的 WCF 中使用公共静态变量是否安全，或者我应该始终将用户名、密码、imap 地址、端口和其他内容传递给每个用户的 WCF 函数？我在这里有什么选择？

我应该使用会话等机制还是可以安全地使用静态变量？如果多个用户同时调用我的服务会发生什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T17:23:33.437

如果所有用户的这些参数都相同，那么在简单的情况下，您可以从配置文件中读取它们，而不是将它们硬编码在静态变量中。这样，如果服务器或端口发生变化，那么您可以轻松更新 web.config 而无需重新编译。

如果这些参数因用户而异，那么更好的主意是在服务端创建一个包含所有这些参数的类。

当它们只是常量时，在 WCF 中使用静态变量没有任何问题。当它们不是常量时，您可能需要查看此[线程](https://stackoverflow.com/questions/3601692/static-methods-fields-and-wcf)。

# css - Chrome/Firefox 忽略了 CSS 嵌套元素？

> ID：10931477
> 
> 赞同：1
> 
> 时间：2012-06-07T12:08:39.003
> 
> 标签：css

这可能非常容易，所以我提前道歉，但我在第 5 小时试图弄清楚这个烂摊子。这是我试图以单杠形式呈现的 UL：

```
<div id="navbarwrapper">
  <ul id="navbar">
    <li><a href="works.html">Search</a></li>
    <li><a href="works.html">Tips</a></li>
    <li><a href="works.html">Neighborhoods</a></li>
    <li><a href="works.html">Relocation</a></li>
  </ul>
</div> 
```

这是似乎出现故障的奇怪CSS：

```
#navbar {}
#navbar ul {
list-style-type: none;
margin: 0px;
padding: 0px;
}
#navbar li {display: inline;}
#navbar ul li a {text-decoration:line-through;} 
```

我遇到的问题是，使用此标记，HTML 中的锚标记中包裹的文本没有接收换行（我使用换行作为占位符，因为它在工作与否时很明显；我不'实际上并不想要最后的线路）。

这是奇怪的一点。如果我用以下内容替换“#navbar ul li a”嵌套，它可以工作：

```
#navbar li a {text-decoration:line-through;} 
```

此外，如果我用以下内容更改“#navbar li{display: inline;}”，我会丢失 inline 属性：

```
#navbar ul li{display:inline;} 
```

是因为我用“#navbar”和“ul”复制吗？这对我来说似乎太奇怪了，我觉得我过去能够使用这种语法而不会出错。

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:10:28.513

你`ul`已经有 id 了`navbar`。这就是为什么`#navbar ul`不匹配任何东西。

`ul#navbar`会匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:12:13.833

您`<ul>`有 ID `#navbar`，因此`#navbar ul`您实际上是`ul`在处理您的`ul`.

尝试

```
ul#navbar li a {text-decoration:line-through;} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T12:09:48.247

```
#navbar ul is wrong...#navbar is the ul itself. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T12:11:26.203

您的选择器不正确。

`#navbar`是 UL 元素本身，因此选择器`#navbar ul`不针对任何对象。

正确的选择器是

```
#navbar {
  list-style-type: none;
  margin: 0px;
  padding: 0px;
}
#navbar li { display: inline; }
#navbar li a { text-decoration:line-through; } 
```

# python - Python 2.7 64 位和 PyOpenGL-3.0.1.win32 安装

> ID：10931481
> 
> 赞同：1
> 
> 时间：2012-06-07T12:08:55.270
> 
> 标签：python, pyopengl

我是 Python 的新手。我已经在 Win7 64 位机器上安装了 Python 2.7 64 位。现在我想安装 PyOpenGL 但只有 win32 版本可用。当我尝试安装 PyOpenGL 时显示“注册表中未找到 Python 安装”

我现在如何在这里进行表格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:00:30.603

[尝试来自http://www.lfd.uci.edu/~gohlke/pythonlibs/#pyopengl](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pyopengl)的 PyOpenGL-3.0.1.win-amd64-py2.7.‌exe

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-07T12:56:37.157

您需要下载并安装 32 位版本的 python 2.7 。

您可以在系统上同时拥有 32 位和 64 位 python，而不会产生不良影响。

当你看到一个 32 位的 python 库时，根据我的经验，你需要 32 位的 python。据我所知，32 位库不适用于 64 位 python 安装。

# php - PHP会话在浏览器打开时超时

> ID：10931484
> 
> 赞同：1
> 
> 时间：2012-06-07T12:09:03.850
> 
> 标签：php, session, timeout

我知道有很多关于 PHP 会话的线程，而 ajax 查询等......但我的问题是，

我有一个 ajax 网格（在页面加载后构建），我只允许在登录使用时对其进行编辑。我不介意在用户实际更改页面（然后`valid_session.php`被调用）之前不检查会话，但是我有一个问题，当第二天用户在同一页面上打开浏览器时 - 网格仍然是可编辑的！显然，如果我刷新页面，那么用户就会被注销。

我的页面上没有设置缓存，但浏览器（尤其是 chrome）不会在打开时重新加载它。

我不知道如何强制它在重新打开时刷新。请引导我走向正确的方向......

* * *

编辑

顺便说一句 - 我找到了一种方法来处理这个问题。我只是通过以下`session_destroy();`方式致电：`session_destroy.php``unload()``$.get()`

```
$(window).unload(function() {
    $.get('session_destroy.php', function(data) {
      alert(data); // alerts me of some var set to 0 - meaning session is destroyed.
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:11:56.827

要主动注销用户，我认为您应该进行某种轮询，然后在会话到期时自动触发注销。或者打印一条错误消息，例如“由于会话已过期，对此页面所做的更改将不会保存”。显然，网格现在不能“通过魔法”会话已过期，您必须以某种方式告诉它。无论如何，即使网格仍然是可编辑的，也应该无法保存更改，否则存在设计缺陷（例如在保存之前未检查用户是否已登录）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:13:25.007

一种解决方案是设置一个“最后刷新的”cookie，并有一个 javascript`setInterval()`来检查 cookie 是否早于 20 分钟。如果是，则 javascript 会触发刷新。当然，您仍然需要在不活动期后将它们注销。

# primefaces - 没有阴影的 Primefaces 图表

> ID：10931493
> 
> 赞同：0
> 
> 时间：2012-06-07T12:09:16.193
> 
> 标签：primefaces

我在我的一个项目中使用 Primefaces barChart，我需要在一个小区域中显示一个包含多个数据点的图表。渲染图表时，条形变得非常细，这对我来说没问题。但是，每个条形图的阴影在图表上看起来令人困惑。

是否可以在 Primefaces 图表中禁用阴影？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:40:18.897

条形图具有“阴影”属性。将其设置为 false 应该会使阴影消失。但是，至少在 3.1.1 版本中，我无法使用此属性使阴影消失，似乎它不起作用。如果您有同样的问题，请将以下样式添加到您的 css 文件中：

```
.jqplot-series-shadowCanvas {
    display: none;
} 
```

它隐藏了条形图的阴影（可能还有其他图表的阴影，我没有测试过）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-19T01:55:32.693

我知道这是一个老问题，但对于其他在这里寻求帮助的人，你可以这样做：

```
BarChartModel barChartModel = new BarChartModel();
barChartModel.setShadow(false); 
```

它也适用于折线图：

```
LineChartModel result = new LineChartModel();
result.setShadow(false); 
```

并且也应该与其他类型的图表一起使用。

# image - 如何通过 Magento 1.6.2 的数据流导入带有 csv 文件的产品图像？

> ID：10931494
> 
> 赞同：0
> 
> 时间：2012-06-07T12:09:18.660
> 
> 标签：image, magento, import

您好，我在导入产品图片时遇到问题。

我使用 Magento 1.6.2，我想用 Magento 的导入数据流导入产品。我在媒体/导入中有我的图像 - 我使用所有行导入我的数据流。

示例：图像 12345.jpg 在 media/import/1/2/12345.jpg 在 csv 中看起来像：“/1/2/12345.jpg”

但是当我想导入我的 csv 时，它会说：“图像不存在。”

为什么？帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T17:45:47.203

它需要进入 media/import 文件夹，然后 CSV 只显示 /image.jpg（其中 image.jpg 是您正在使用的图像的实际文件名）。我[用细节做了另一个答案](https://stackoverflow.com/questions/10341879/magento-import-products-with-images/10357766#10357766)......我会看看我是否能找到它并将正确的细节粘贴在这里。该链接还包含我成功导入的有效 CSV 样本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-21T15:27:44.353

删除斜线应该可以完成这项工作：

```
"1/2/12345.jpg" 
```

代替

```
"/1/2/12345.jpg" 
```

# css - HTML5 - css 文件

> ID：10931499
> 
> 赞同：-3
> 
> 时间：2012-06-07T12:09:43.357
> 
> 标签：css, html

我正在尝试制作一个 html 文档，但遇到了一些奇怪的问题。当 css 文件位于不同的目录时，它工作得很好，但是当我将 css 文件移动到与 html 文件相同的目录时，它无法识别它。

我更改了css的链接href。

谢谢您的帮助

好的对不起，我会详细说明--当我使用-

```
<title>Profile</title> 
<link href="./me_files/as.css" media="screen, handheld" rel="stylesheet" type="text/css"> 
```

有用。当我将文件移动到同一个文件夹并使用

```
<title>Profile</title> 
<link href="as.css" media="screen, handheld" rel="stylesheet" type="text/css"> 
```

它不起作用

好的，我设法修复它。问题是我需要删除- media="screen, 手持"

谢谢你们！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:34:10.897

> “当我使用时 -`<title>Profile</title> <link href="./me_files/as.css" media="screen, handheld" rel="stylesheet" type="text/css"> - it works And when I move the file to the same folder and use - <title>Profile</title> <link href="as.css" media="screen, handheld" rel="stylesheet" type="text/css">`它不起作用”

你有没有尝试过

```
href="./as.css" ? 
```

**编辑**

也许您的 CSS 中有一些相关链接需要更改？

# ios - 仪器未检测到基于 Malloc/Free 的内存泄漏？

> ID：10931502
> 
> 赞同：0
> 
> 时间：2012-06-07T12:09:48.873
> 
> 标签：ios, malloc, instruments, memory-leaks

我刚刚在我的代码中发现了一个内存泄漏，这是由未释放的 C 样式指针数组引起的。

奇怪的是，我在 Instruments->Leaks 中非常彻底地测试了我的应用程序，但从未检测到泄漏（我上周刚刚发布了 1.0 版，到目前为止没有任何问题）。

现在我正在开发 1.1 版，只是发现了逻辑错误。我修复了它，到目前为止似乎没有“过度发布”崩溃，我相信修复是到期的。

有没有人见过这样的事情？我一直认为Objective-C的保留/释放只是malloc/free，所以基于C内存函数的泄漏应该对仪器同样可见......？

# objective-c - 如何将图像设置为 UIImage

> ID：10931510
> 
> 赞同：33
> 
> 时间：2012-06-07T12:10:30.183
> 
> 标签：objective-c, ios, cocoa-touch

如何将图像设置为`UIImage`对象。例如：

```
UIImage *img = [[UIImage alloc] init];
[img setImage:[UIImage imageNamed:@"anyImageName"]]; 
```

我的`UIImage`对象在`.h`文件中声明并在方法中分配`init`，我需要在`viewDidLoad`方法中设置图像。有任何想法吗？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-06-07T12:11:50.390

```
UIImage *img = [UIImage imageNamed:@"anyImageName"]; 
```

> **[imageNamed：](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImage_Class/Reference/Reference.html#//apple_ref/occ/clm/UIImage/imageNamed:)**
> 返回与指定文件名关联的图像对象。
> 
> ```
>  + (UIImage *)imageNamed:(NSString *)name 
> ```
> 
> 参数
> **name**
> 文件的名称。如果这是第一次加载图像，该方法会在应用程序的主包中查找具有指定名称的图像。
> **返回值**
> 指定文件的图像对象，如果方法找不到指定的图像，则返回 nil。
> 
> **讨论**
> 此方法在系统缓存中查找具有指定名称的图像对象，如果该对象存在，则返回该对象。如果匹配的图像对象尚未在缓存中，则此方法从指定文件加载图像数据，缓存它，然后返回结果对象。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-07T12:17:02.993

创建一个 UIImageView 并将 UIImage 添加到它：

```
UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"image Name"]] ; 
```

然后将其添加到您的视图中：

```
[self.view addSubView: imageView]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-10T13:06:53.970

**跟着这个**

```
UIImageView *imgview = [[UIImageView alloc]initWithFrame:CGRectMake(10, 10, 300, 400)];
[imgview setImage:[UIImage imageNamed:@"YourImageName"]];
[imgview setContentMode:UIViewContentModeScaleAspectFit];
[self.view addSubview:imgview]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T12:13:33.363

这一行有一个错误：

```
[img setImage:[UIImage imageNamed@"anyImageName"]]; 
```

它应该是：

```
[img setImage:[UIImage imageNamed:@"anyImageName"]]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-07T12:14:02.573

```
UIImage *img = [UIImage imageNamed@"aImageName"]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-07T12:14:22.527

或许：

```
UIImage *img = [[UIImage alloc] init]; 
```

以及当您要更改图像时：

```
img = [UIImage imageNamed:@"nameOfPng.png"]; 
```

但是对象不在内存中的同一个位置，但是如果你使用指针，同一个指针将指向最后加载的图像。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-07T12:16:15.893

就像 vikingosgundo 说的那样，但请记住，如果您使用，`[UIImage imageNamed:image]`那么图像会被缓存并消耗内存。因此，除非您打算在许多地方使用相同的图像，否则您应该加载图像，并使用`imageWithContentsOfFile:`和`imageWithData:`

这将为您节省大量内存并加速您的应用程序。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-22T04:49:24.923

首先声明 UIImageView 并给它框架

```
UIImageView *imageView = [[UIImageView alloc] initWithFrame: CGRectMake( 10.0f, 15.0f, 40.0f,40.0f )];
        [imageView setBackgroundColor: [UIColor clearColor]];
        [imageView setImage:[UIImage imageNamed:@"comments_profile_image.png"]];
        [self.view addSubview: imageView]; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-30T18:39:25.163

您可以通过以下方式在 UIImage 对象中设置图像：

1.  `UIImage *imageObject = [UIImage imageNamed:@"imageFileName"];` 但是通过像这样初始化`UIImage`Object ，图像总是存储在缓存中，即使你让它`nil`像这样`imageObject=nil;`

最好遵循这个：

1.  `NSString *imageFilePath = [[NSBundle mainBundle] pathForResource:@"imageFilename" ofType:@"imageFile_Extension"];`

    ```
    UIImage *imageObject = [UIImage imageWithContentsOfFile:imageFilePath]; 
    ```

例子： `NSString *imageFilePath = [[NSBundle mainBundle] pathForResource:@"abc" ofType:@"png"];`

```
UIImage *imageObject = [UIImage imageWithContentsOfFile:imageFilePath]; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-08-12T13:28:41.897

只需更改此行

```
[img setImage:[UIImage imageNamed:@"anyImageName"]]; 
```

与以下行

```
img = [UIImage imageNamed:@"anyImageName"]; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-09-30T09:24:58.847

你不能分配 UIImage，这是不可能的。UIImageView 的正确代码分配：

```
UIImageView *_image = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"something.png"]] ; 
```

绘制图像：

```
CGContextDrawImage(context, rect, _image.image.CGImage); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-05-18T06:19:34.397

尝试此代码以 100% 工作....

```
UIImageView * imageview = [[UIImageView alloc] initWithFrame:CGRectMake(20,100, 80, 80)];
imageview.image = [UIImage imageNamed:@"myimage.jpg"];
[self.view  addSubview:imageview]; 
```

# associations - 如何在不使用休眠标准或 hql 从一对多关联中获取集合的成员的情况下删除它？

> ID：10931511
> 
> 赞同：1
> 
> 时间：2012-06-07T12:10:42.450
> 
> 标签：associations, hql, criteria, one-to-many, hibernate-onetomany

我有一个来自机构 -> 课程的一对多关联， **一个机构可以处理多个课程**。对于**这个用例**，考虑**一门课程只能属于一个机构**。

```
@Entity 
Institution {
@Id
long id;
@JoinTable(name = "INSTITUTION_COURSES", joinColumns = @JoinColumn(name = "INSTITUTION_ID"), inverseJoinColumns = @JoinColumn(name = "COURSE_ID"))
Set<Course> coursesOffered;
}

@Entity
Course{
@Id
long id;
@Column
String name;
} 
```

**他们的地图存储在单独的表中**

如何在不获取机构对象和关联集合的情况下使用 HQL 或 Hibernate 标准删除课程，以便同时删除映射表中的相应行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T20:59:50.473

你在事务上下文中做这样的事情吗？...

```
Institution institution = institutionDAO.findById(institutionId, false);
institution.getCourses().remove(course);

institution = institutionDAO.mergeState(institution); 
```

# c# - XML 和 HTML 表用 C# 解析

> ID：10931513
> 
> 赞同：3
> 
> 时间：2012-06-07T12:10:52.477
> 
> 标签：c#, html, xml, parsing

我正在关注一个 RSS 提要，它返回一个 XML。XML 内部是 HTML 表格，以一个长字符串形式返回。我正在尝试使用 C# 访问此 HTML 表的元素，以便我可以将这些元素中的每一个用作另一个程序的变量。表格示例：

```
<table cellpadding="5"><tr><td><strong>Date (GMT)</strong></td><td><strong>Event</strong></td><td><strong>Cons.</strong></td><td><strong>Actual</strong></td><td><strong>Previous</strong></td></tr><tr><td>Jun 7 11:00</td><td>Announcement</td><td>6.250 %</td><td>6.310  %</td><td>6.560  %</td></tr></table> 
```

这里几乎每个类似的线程都建议了 HtmlAgilityPack，我正在尝试使用它。到目前为止，我已经能够拉出 HTML 表格并将其声明为字符串变量，但我似乎无法拉出表格元素。以下是我的 hack，基于几个用户的建议：

```
XmlDocument xDoc = new XmlDocument();
xDoc.Load("http://rssfeed.com");
string descr = xDoc.SelectSingleNode("rss/channel/item/description").InnerText;

HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml("descr");
// A Print statement here (textBox1.Text = descr;) shows that I'm successfully accessing the HTML table
var table = doc.DocumentNode.Descendants("tr")
.Select(n => n.Elements("td").Select(o => o.InnerText).ToArray());

foreach (var tr in table)
{
textBox1.Text = String.Format("{0} {1} {2}", tr[0], tr[1], tr[2]);
} 
```

非常欢迎任何和所有建议。

感谢：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:45:12.013

这对我有用，只要 Html 像 Xml 一样工作，它就会对你有用（并且值总是在 TD 内）。内部包含单个元素（也称为强元素）的 TD 的值与该元素的值相同。

```
XElement table = XElement.Parse("<table cellpadding=\"5\"><tr><td><strong>Date (GMT)</strong></td><td><strong>Event</strong></td><td><strong>Cons.</strong></td><td><strong>Actual</strong></td><td><strong>Previous</strong></td></tr><tr><td>Jun 7 11:00</td><td>Announcement</td><td>6.250 %</td><td>6.310  %</td><td>6.560  %</td></tr></table>");
string[] values = table.Descendants("td").Select(td => td.Value).ToArray(); 
```

和/或具有值数组的行：

```
var rows = table.Elements()
    .Select(tr => tr.Elements().Select(td => td.Value).ToArray())
    .ToList(); 
```

**更新：**

```
foreach (string value in values)
    Console.WriteLine(value);

foreach (string[] row in rows)
    foreach (string value in row)
        Console.WriteLine(value); 
```

# coldfusion - 是否可以使用 Exchange 用户组对 ColdFusion 应用程序上的用户进行身份验证？

> ID：10931515
> 
> 赞同：2
> 
> 时间：2012-06-07T12:10:58.520
> 
> 标签：coldfusion, exchange-server, coldfusion-9

我发现的唯一标签是这些[cfexchangecalendar](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_d-e_12.html)、[cfexchangeconnection](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_d-e_13.html)、[cfexchangecontact](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_d-e_14.html)、[cfexchangefilter](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_d-e_15.html)、[cfexchangemail](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_d-e_16.html)和[cfexchangetask](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_d-e_17.html)。我不认为我可以用这些标签完成我想要的。有谁知道是否或如何做到这一点？

# java - 如何从 Android 按钮单击运行单独的应用程序

> ID：10931526
> 
> 赞同：4
> 
> 时间：2012-06-07T12:11:34.427
> 
> 标签：java, android

我尝试在我的 Android 应用程序中添加两个按钮，以从单独的两个应用程序订单系统和库存系统中选择一个应用程序。如图所示。

![在此处输入图像描述](../Images/e39920cd1e82b30411f24ad7553a89da.png)

我已经将这两个应用程序实现为单独的两个 Android 项目。当我尝试运行此应用程序时，它会正确进入选择窗口，但是当按下一个按钮时，模拟器会显示“强制关闭”消息。我已将订单系统和库存系统项目添加到第一个应用程序的构建路径，然后导入它们的包（com.oms.ws 和 com.inv.ws）。这可能是不正确的，但不知道如何执行此操作。请帮我！我是安卓新手。我想使用模拟器测试这个应用程序！

这是我用来选择应用程序的代码。

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import com.oms.ws.*;

 public class ThirdScreen extends Activity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.thirdscreen);

    Button oms;
    oms = (Button)findViewById(R.id.orderSystem); 
    oms.setOnClickListener(ordrMnagemntSys);

    Button inventory;
    inventory = (Button)findViewById(R.id.inventorySystem); 
    inventory.setOnClickListener(inventorySys);

}

private OnClickListener ordrMnagemntSys = new OnClickListener(){
    public void onClick(View v) {

            Intent oMs = new Intent(getApplicationContext(), com.oms.ws.TestOms.class);
            startActivity(oMs);
            }
};

private OnClickListener inventorySys = new OnClickListener(){
    public void onClick(View v) {

            Intent inven = new Intent(getApplicationContext(), com.inv.ws.TestInventory.class);
            startActivity(inven);
            }
};
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:16:13.663

好的，这有效

```
Intent LaunchIntent = getPackageManager().getLaunchIntentForPackage("org.abc");
startActivity(LaunchIntent); 
```

将 org.abc 替换为您要启动的应用程序的包名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:36:06.677

试试这个：

```
String app = "com.inv.ws/TestInventory";
Intent intent = new Intent(Intent.ACTION_MAIN);             
intent.setComponent(ComponentName.unflattenFromString(app));             
intent.addCategory(Intent.CATEGORY_LAUNCHER);             
startActivity(intent); 
```

* * *

**或者**使用这个：

```
private void  launchComponent(String packageName, String name){
    Intent launch_intent = new Intent("android.intent.action.MAIN");
    launch_intent.addCategory("android.intent.category.LAUNCHER");
    launch_intent.setComponent(new ComponentName(packageName, name));
    launch_intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

    activity.startActivity(launch_intent);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T13:43:48.773

[在这个](https://stackoverflow.com/questions/9621985/open-third-party-app-from-intent)answear 和链接项目的帮助下，在我自己的应用程序中做了类似的事情。

# android - AS3 fl.controls.TextInput 和移动平台

> ID：10931534
> 
> 赞同：0
> 
> 时间：2012-06-07T12:12:02.477
> 
> 标签：android, ios, actionscript-3, flash, textinput

我打算在纯 ActionScript Flex 项目中使用 fl.controls.TextInput。通过从 Flash Pro CS5.5 中提取 SWC，将 fl.controls.TextInput 传输到 Flex。

问题是：如果我通过 Flex 创建 iOS 或 Android 应用程序，TextInput 是否可以在移动平台上工作？当用户触摸它时，软键盘会出现在屏幕上供用户输入吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T18:35:29.500

Mobile ActionScript 虚拟机***应该***尊重您的控件。但是，您正在采用 Flash Player 10.0 技术并在 Flex 移动应用程序中运行它（这些天可能意味着 Flex 4.0 / Player 11.0 +）。您是否有令人信服的理由不使用 Spark 组件或用于表单的 Flex MXML 布局等。它相对容易与 ActionScript 项目（可以加载到 SpriteVisualElement）和 Flex 布局集成。

我还没有测试过 fl.controls.TextInput，但是如果您使用 Flash CS 5.5 / CS 6 并尝试导入 fl.controls.TextInput，这是一个编译时错误，因为 TextInput 在 Flash Player 10.2 版之后不可用+。

# excel - 在 Excel 2003 中的特定行之后插入多行

> ID：10931538
> 
> 赞同：0
> 
> 时间：2012-06-07T12:12:11.217
> 
> 标签：excel

例如，我的表是这样的：

```
 AAA
  bb
  cc
  AAA
  dd... 
```

如何在 AAA 行下方插入 3 个空行？这样，我的桌子就变成了：

```
 AAA
  first empty row
  second empty row
  third empty row
  bb
  cc
  AAA
  first empty row
  second empty row
  third empty row
  dd.. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:21:25.230

如果您在 Excel 中，请右键单击左侧的行号以显示上下文菜单，然后单击“插入”。这将添加一个新行。

# android - Android如何集成一个AsyncTask

> ID：10931543
> 
> 赞同：1
> 
> 时间：2012-06-07T12:12:23.677
> 
> 标签：android, android-asynctask

嗨，我有一个应用程序可以下载一个`JSON`提要并且它开始变得长腿我知道我需要使用 AsyncTask 它但我不知道如何将它集成到我的代码中有人知道集成它的最佳方法是什么。

到目前为止，这是我的原始代码

```
public class HomeActivity extends ListActivity {

    private MergeAdapter adapter=null;
    private ArrayAdapter<String> arrayAdapter=null;
    private ArrayAdapter<String> arrayAdapter2=null;
    private LazyAdapter arrayAdapter3=null;
    private static final String apiKey = "7668hhf74hhd3dhhs"; 
    private static final String apiUser = "androiduser";
    private static String ChosenLeagueID = null;
    private static String ChosenMethod = null; 
    private static String ChosenTeamId = null; 
    public String fulldata = null;
    public String newsFeedRequest = null;
    public String newsFeedURL = null;
    public String resultsFeedURL = null;
    public String lastMonth = null;
    public String HomeTeam = null;
    public String AwayTeam = null;
    public String HomeScore = null;
    public String AwayScore = null;
    public String Attendance = null;
    public String Division = null;
    public String HomeScorers = null;
    public String AwayScorers = null;       

    public String resultsFeedRequest = null;
    public String chosenLeagueId = "40";
    public List<String> newsList = null;
    public List<String> newsList2 = null;
    public List<String> newsList3 = null;
    public List<String> imageList = null;
    public JSONObject resultsDict = null;
    public View resultsView = null;

    public int newsAmount = 0;

    long unixTimeStamp = System.currentTimeMillis() / 1000L;

    //add Time Stamp to URL
    //public String chosenMethod; 
    public class PostTask extends AsyncTask<Void, String, Boolean> {

        @Override
        protected Boolean doInBackground(Void... params) {
            boolean result = false;
         checkPreferences();

            publishProgress("progress");
            return result;
        }

        protected void onProgressUpdate(String... progress) {
            StringBuilder str = new StringBuilder();
                for (int i = 1; i < progress.length; i++) {
                    str.append(progress[i] + " ");
                }

        }

    }

    static String buildHmacSignature(String pKey, String pStringToSign)
    {
      String lSignature = "None";
      try
      {
        Mac lMac = Mac.getInstance("HmacSHA256");
        SecretKeySpec lSecret = new SecretKeySpec(pKey.getBytes(), "HmacSHA256");
        lMac.init(lSecret);

        byte[] lDigest = lMac.doFinal(pStringToSign.getBytes());
        BigInteger lHash = new BigInteger(1, lDigest);
        lSignature = lHash.toString(16);
        if ((lSignature.length() % 2) != 0) {
          lSignature = "0" + lSignature;
        }
      }
      catch (NoSuchAlgorithmException lEx)
      {
        throw new RuntimeException("Problems calculating HMAC", lEx);
      }
      catch (InvalidKeyException lEx)
      {
        throw new RuntimeException("Problems calculating HMAC", lEx);
      }

      return lSignature;
    }

    public void checkPreferences(){

        SharedPreferences preferences = getSharedPreferences("prefs", Context.MODE_PRIVATE);
        ChosenMethod = preferences.getString("ChosenMethod", ChosenMethod);
        ChosenLeagueID = preferences.getString("ChosenLeagueId", ChosenLeagueID);
        ChosenTeamId = preferences.getString("ChosenTeamId", ChosenTeamId);

         Log.v("lc", "newsurl" + newsFeedURL);

        Log.v("myapp", "ChosenMethod Home = " + ChosenMethod);
        Log.v("myapp", "ChosenLeagueID Home = " + ChosenLeagueID);
        Log.v("myapp", "ChosenTeamID Home = " + ChosenTeamId);

         if (ChosenMethod.equals("Team")) {
             setContentView(R.layout.homeactteam2);
             newsAmount = 5;
             loadData();

         } else {
             setContentView(R.layout.homeact);
             newsAmount = 10;
             loadDataLeague();
         }

}

    public void loadresults(){

    resultsFeedRequest = "1.0/league-website/" + chosenLeagueId + "/results?&team_id=" + ChosenTeamId + "&limit=31&timestamp=" + unixTimeStamp;
    resultsFeedURL = "https://www.website.com/_services/api/" + resultsFeedRequest; 

    String myhash = buildHmacSignature(apiKey, resultsFeedURL);

    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost(resultsFeedURL);

    List<NameValuePair> pairs = new ArrayList<NameValuePair>();
    pairs.add(new BasicNameValuePair("requestToken", myhash));
    pairs.add(new BasicNameValuePair("apiUser", apiUser));

    try {
        post.setEntity (new UrlEncodedFormEntity(pairs));
        HttpResponse response = client.execute(post);
        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
        String json = reader.readLine();
        fulldata = String.valueOf(json);
        Log.v("myApp","resultsdata" + fulldata);

        newsList = new ArrayList<String>();
        newsList2 = new ArrayList<String>();
        newsList3 = new ArrayList<String>();
        imageList = new ArrayList<String>();

        JSONObject obj = new JSONObject(json);    
        JSONObject objData = obj.getJSONObject("data");
        JSONArray jArray = objData.getJSONArray("results");

        if(jArray.length() < 1){

            loadLastResults();

        }else{

            Log.v("lc", "this month has results");

        }

//      
//         for(int t = 0; t < newsAmount; t++){
//             JSONObject newsTitleDict = jArray.getJSONObject(t);
//             imageList.add(newsTitleDict.getString("image_small"));
//           newsList3.add(newsTitleDict.getString("title"));
//             
//         }
//      
//         for(int t = 0; t < 1; t++){
//             JSONObject newsTitleDict = jArray.getJSONObject(t);
//              
//           newsList.add(newsTitleDict.getString("title"));
//           newsList2.add(newsTitleDict.getString("title"));
//             
//         }
//         

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}   

public void loadLastResults(){

resultsFeedRequest = "1.0/league-website/" + chosenLeagueId + "/results?month=04&team_id=" + ChosenTeamId + "&limit=31&timestamp=" + unixTimeStamp;
resultsFeedURL = "https://www.website.com/_services/api/" + resultsFeedRequest; 

String myhash = buildHmacSignature(apiKey, resultsFeedURL);

Date anotherCurDate = new Date();  
SimpleDateFormat formatter = new SimpleDateFormat("MM");  
String CurMonth = formatter.format(anotherCurDate);  

int Int = Integer.parseInt(CurMonth);

int MonthInt = Int -1;

CurMonth = (String) (String.valueOf(MonthInt));

if (CurMonth.equals("1")){

    lastMonth = "12";

}    
 else {
    if(CurMonth.length() < 2){
        lastMonth = "0" + CurMonth;
    } else {
        lastMonth = CurMonth;
    }
}

Log.v("lc","month= " + CurMonth);
Log.v("lc","LastMonth= " + lastMonth);

    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost(resultsFeedURL);

    List<NameValuePair> pairs = new ArrayList<NameValuePair>();
    pairs.add(new BasicNameValuePair("requestToken", myhash));
    pairs.add(new BasicNameValuePair("apiUser", apiUser));

    try {
        post.setEntity (new UrlEncodedFormEntity(pairs));
        HttpResponse response = client.execute(post);
        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
        String json = reader.readLine();
        fulldata = String.valueOf(json);
        Log.v("myApp","resultsdata" + fulldata);

        newsList = new ArrayList<String>();
        newsList2 = new ArrayList<String>();
        newsList3 = new ArrayList<String>();
        imageList = new ArrayList<String>();

        JSONObject obj = new JSONObject(json);    
        JSONObject objData = obj.getJSONObject("data");
        JSONArray jArray = objData.getJSONArray("results");

           for(int t = 0; t < 1; t++){

               resultsDict = jArray.getJSONObject(t);
              HomeTeam = resultsDict.getString("hometeam");
              AwayTeam = resultsDict.getString("awayteam");
              HomeScore = resultsDict.getString("homescore");
              AwayScore = resultsDict.getString("awayscore");
              Attendance = resultsDict.getString("attendance");
              Division = resultsDict.getString("division");

              Log.v("lc","hometeam" + HomeTeam);
              Log.v("lc","awayteam" + AwayTeam);

           }

           resultsView = LayoutInflater.from(getBaseContext()).inflate(R.layout.resultscell,
                     null);

           TextView homeTeam = (TextView) resultsView.findViewById(R.id.HomeTeam);
           homeTeam.setText(HomeTeam);

           TextView awayTeam = (TextView) resultsView.findViewById(R.id.AwayTeam);
           awayTeam.setText(AwayTeam);

           TextView homeScore = (TextView) resultsView.findViewById(R.id.HomeScore);
           homeScore.setText(HomeScore);

           TextView awayScore = (TextView) resultsView.findViewById(R.id.AwayScore);
           awayScore.setText(AwayScore);

           TextView attendance = (TextView) resultsView.findViewById(R.id.Attendence);
           attendance.setText("Att:" + Attendance);

           TextView division = (TextView) resultsView.findViewById(R.id.Division);
           division.setText(Division);

          Log.v("lc", "resultsDict" + resultsDict);

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}   

    public void loadnews(){

         newsFeedRequest = "1.0/league-website/" + chosenLeagueId + "/news?timestamp=" + unixTimeStamp;
         newsFeedURL = "https://www.website.com/_services/api/" + newsFeedRequest;  

    String myhash = buildHmacSignature(apiKey, newsFeedURL);

    Log.v("lc" , "resultsurl=" + resultsFeedURL);
    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost(newsFeedURL);

    List<NameValuePair> pairs = new ArrayList<NameValuePair>();
    pairs.add(new BasicNameValuePair("requestToken", myhash));
    pairs.add(new BasicNameValuePair("apiUser", apiUser));

    try {
        post.setEntity (new UrlEncodedFormEntity(pairs));
        HttpResponse response = client.execute(post);
        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
        String json = reader.readLine();
        fulldata = String.valueOf(json);
        Log.v("myApp","newsdata" + fulldata);

        newsList = new ArrayList<String>();
        newsList2 = new ArrayList<String>();
        newsList3 = new ArrayList<String>();
        imageList = new ArrayList<String>();

        JSONObject obj = new JSONObject(json);    
        JSONObject objData = obj.getJSONObject("data");
        JSONArray jArray = objData.getJSONArray("news");
        Log.v("lc","newsAmount= " + newsAmount);

           for(int t = 0; t < newsAmount; t++){
               JSONObject newsTitleDict = jArray.getJSONObject(t);
               imageList.add(newsTitleDict.getString("image_small"));
             newsList3.add(newsTitleDict.getString("title"));

           }

           for(int t = 0; t < 1; t++){
               JSONObject newsTitleDict = jArray.getJSONObject(t);

         newsList.add(newsTitleDict.getString("title"));
//           newsList2.add(newsTitleDict.getString("title"));

           }

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

public void mergeAdapterSetup(){    

    arrayAdapter = new ArrayAdapter<String>(this, R.layout.single_item, newsList);
    arrayAdapter2 = new ArrayAdapter<String>(this, R.layout.resultscell, newsList2);
    //arrayAdapter3 = new ArrayAdapter(this, R.layout.complex_item, newsList3);

     String[] mStrings = (String[]) imageList.toArray(new String[imageList.size()]);
     String[] news = (String[]) newsList3.toArray(new String[newsList3.size()]);

     arrayAdapter3 = new LazyAdapter(this, mStrings, news);

        ListView list = getListView();
           list.setTextFilterEnabled(true);

           LayoutInflater inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE );
            View header = inflater.inflate( R.layout.homeheader, list, false);
            View header2 = inflater.inflate( R.layout.homeheader2, list, false);
            View header3 = inflater.inflate( R.layout.homeheader3, list, false);

    //setListAdapter (arrayAdapter);

        adapter = new MergeAdapter();
        adapter.addView(header);
        adapter.addAdapter(arrayAdapter);
        adapter.addView(header2);
        adapter.addView(resultsView);
        adapter.addView(header3);
        adapter.addAdapter(arrayAdapter3);
        setListAdapter(adapter);
}

public void loadDataLeague(){

    String myhash = buildHmacSignature(apiKey, newsFeedURL);

    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost(newsFeedURL);

    List<NameValuePair> pairs = new ArrayList<NameValuePair>();
    pairs.add(new BasicNameValuePair("requestToken", myhash));
    pairs.add(new BasicNameValuePair("apiUser", apiUser));

    try {
        post.setEntity (new UrlEncodedFormEntity(pairs));
        HttpResponse response = client.execute(post);
        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
        String json = reader.readLine();
        fulldata = String.valueOf(json);
        Log.v("myApp","newsdata" + fulldata);

        newsList = new ArrayList<String>();
        newsList2 = new ArrayList<String>();
        newsList3 = new ArrayList<String>();
        imageList = new ArrayList<String>();

        JSONObject obj = new JSONObject(json);    
        JSONObject objData = obj.getJSONObject("data");
        JSONArray jArray = objData.getJSONArray("news");
        Log.v("lc","newsAmount= " + newsAmount);

           for(int t = 0; t < newsAmount; t++){
               JSONObject newsTitleDict = jArray.getJSONObject(t);
               imageList.add(newsTitleDict.getString("image_small"));
             newsList3.add(newsTitleDict.getString("title"));

           }

           for(int t = 0; t < 1; t++){
               JSONObject newsTitleDict = jArray.getJSONObject(t);

             newsList.add(newsTitleDict.getString("title"));
             newsList2.add(newsTitleDict.getString("title"));

           }

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    arrayAdapter = new ArrayAdapter<String>(this, R.layout.single_item, newsList);
    arrayAdapter2 = new ArrayAdapter<String>(this, R.layout.single_item, newsList2);
    //arrayAdapter3 = new ArrayAdapter(this, R.layout.complex_item, newsList3);

     String[] mStrings = (String[]) imageList.toArray(new String[imageList.size()]);
     String[] news = (String[]) newsList3.toArray(new String[newsList3.size()]);

     arrayAdapter3 = new LazyAdapter(this, mStrings, news);

        ListView list = getListView();
           list.setTextFilterEnabled(true);

           LayoutInflater inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE );
            View header3 = inflater.inflate( R.layout.homeheader3, list, false);

    //setListAdapter (arrayAdapter);

        adapter = new MergeAdapter();
        adapter.addView(header3);
        adapter.addAdapter(arrayAdapter3);
        setListAdapter(adapter);

    }   

    public void loadData(){
        loadresults();

        loadnews();
        mergeAdapterSetup();
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        PostTask jsontask;
        jsontask = new PostTask();
        jsontask.execute();

        Button backbtn = (Button) findViewById(R.id.backbtn);

        //Listening to button event
        backbtn.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                //Starting a new Intent
                Intent previousScreen = new Intent(getApplicationContext(), ChooseTeamActivity.class);
                ChosenMethod = "null";
                SharedPreferences preferences = getSharedPreferences("prefs", Context.MODE_PRIVATE);
                SharedPreferences.Editor editor = preferences.edit();
                editor.putString("ChosenMethod", ChosenMethod);            
                editor.commit();
                previousScreen.putExtra("FullData", fulldata);
                startActivity(previousScreen);

            }
        });

    }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    if (item.getItemId() == R.id.home) {

        startActivity(new Intent(HomeActivity.this, HomeActivity.class));

        return(true);
  }

    if (item.getItemId() == R.id.match) {

        startActivity(new Intent(HomeActivity.this, MatchActivity.class));

        return(true);
  }

    if (item.getItemId() == R.id.teams) {

        startActivity(new Intent(HomeActivity.this, TeamsActivity.class));

        return(true);
  }

    if (item.getItemId() == R.id.twitter) {

        startActivity(new Intent(HomeActivity.this, TwitterActivity.class));

        return(true);
  }

    if (item.getItemId() == R.id.info) {

        startActivity(new Intent(HomeActivity.this, InfoActivity.class));

        return(true);
  }

    return(super.onOptionsItemSelected(item));

}

} 
```

错误

```
java.lang.NullPointerException
    06-07 12:56:34.338: E/AndroidRuntime(2688):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1821)
    06-07 12:56:34.338: E/AndroidRuntime(2688):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1842)
    06-07 12:56:34.338: E/AndroidRuntime(2688):     at android.app.ActivityThread.access$1500(ActivityThread.java:132)
    06-07 12:56:34.338: E/AndroidRuntime(2688):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1038)
    06-07 12:56:34.338: E/AndroidRuntime(2688):     at android.os.Handler.dispatchMessage(Handler.java:99)
    06-07 12:56:34.338: E/AndroidRuntime(2688):     at android.os.Looper.loop(Looper.java:143)
    06-07 12:56:34.338: E/AndroidRuntime(2688):     at android.app.ActivityThread.main(ActivityThread.java:4263)
    06-07 12:56:34.338: E/AndroidRuntime(2688):     at java.lang.reflect.Method.invokeNative(Native Method)
    06-07 12:56:34.338: E/AndroidRuntime(2688):     at java.lang.reflect.Method.invoke(Method.java:507)
    06-07 12:56:34.338: E/AndroidRuntime(2688):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    06-07 12:56:34.338: E/AndroidRuntime(2688):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    06-07 12:56:34.338: E/AndroidRuntime(2688):     at dalvik.system.NativeStart.main(Native Method)
    06-07 12:56:34.338: E/AndroidRuntime(2688): Caused by: java.lang.NullPointerException
    06-07 12:56:34.338: E/AndroidRuntime(2688):     at HomeActivity.onCreate(HomeActivity.java:637)
    06-07 12:56:34.338: E/AndroidRuntime(2688):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
    06-07 12:56:34.338: E/AndroidRuntime(2688):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1785) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:26:36.177

她是一个异步任务的例子，你真的应该把它放在一个异步任务中，因为在 android 3.0 > 有一些关于它的规则不是......

你需要把它放在一个异步任务中，它不会在 3.0 的主线程中运行>

用这个：

```
public class JsonTask extends AsyncTask<Void, String, Boolean> {

        @Override
        protected Boolean doInBackground(Void... params) {
            boolean result = false;

            //All your code goes in here 

            //If you want to do something on the UI use progress update

            publishProgress("progress");
            return result;
        }

        protected void onProgressUpdate(String... progress) {
            StringBuilder str = new StringBuilder();
                for (int i = 1; i < progress.length; i++) {
                    str.append(progress[i] + " ");
                }

        }
    } 
```

您需要在异步任务之外引用它

```
JsonTask jsontask; 
```

那么你需要启动它

```
jsontask = new JsonTask();
jsontask.execute(); 
```

我前段时间遇到了完全相同的问题，祝你好运

# java - 如何在 Windows 上使用 Java 安装新的网络适配器

> ID：10931551
> 
> 赞同：0
> 
> 时间：2012-06-07T12:12:37.407
> 
> 标签：java, windows, networking, pppoe

我应该为本地 ISP 创建一个程序。他们需要一个能够在 Windows XP 及更高版本中自动安装新宽带适配器（具有特定配置）的程序。我想用 Java 来做，但如果它不可行，我也可以使用 C#。我正在寻找一种方法来做到这一点，但到目前为止我还没有发现任何有用的东西。我以为我可以通过执行命令使用“netsh”来做到这一点，但我找不到使用 netsh 实际创建新接口的方法。

感谢你的帮助

编辑：所以我实际上发现我需要创建一个 PPPoE 连接。到目前为止，我能得到的最好的方法是用 rasphone -a 制作一个弹出窗口......难道没有任何办法只用代码来做吗？：/我正在疯狂地搜索谷歌，但找不到任何东西......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:20:14.177

你看到这篇[文章](http://www.c-sharpcorner.com/uploadfile/rafaelwo/microsoft-loopback-adapter-programmatically-installation-and-configuration/)和这个[问题了](https://stackoverflow.com/questions/689230/best-way-to-programmatically-configure-network-adapters-in-net)吗？后者与 C# 相关，但它应该给你一个关于做什么的提示。

# javascript - 骨干路由器……如何处理 url

> ID：10931555
> 
> 赞同：0
> 
> 时间：2012-06-07T12:12:49.580
> 
> 标签：javascript, backbone.js, routes, url-routing, backbone-routing

我有一个应用程序，其主文件看起来像这些 (1)、(2)、(3)。

Backbone.Router 在这种情况下工作正常（因为它触发`#page`）：

```
http://localhost/index.php#page 
```

如果 url 如下（为了触发`/some#page`），我应该如何配置它：

```
http://localhost/index.php/some#page 
```

PS：
这个网页应用的后端使用的是 Synfony2

* * *

(1)

```
// index.php
<script data-main='mainApp.js' src='require.js'> 
```

* * *

(2)

```
// mainApp.js
define([
  'js/router'
], function(Router) {
    "use strict";
    var initialize = function ()
    {
            Router.initialize();
    }

    return {
        initialize: initialize
    };
}); 
```

* * *

(3)

```
// router.js
define([
    'myView'
], function(MyView){
    console.log(MyView)
    var AppRouter = Backbone.Router.extend({
        routes: {
           'page' : 'view'
        },

        view: function () {
          //some code
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:15:58.890

这行得通吗？

```
routes: { 
   '/some:page': 'view',
} 
```

# android - 传输大量数据 USB

> ID：10931558
> 
> 赞同：3
> 
> 时间：2012-06-07T12:13:03.137
> 
> 标签：android, usb

嘿，我一直在努力解决这个问题，但我无处可去

我正在尝试从 USB 设备中获取字节，这对于传入的一两条线来说效果很好，但是当它达到相当多的时候它就不起作用了。

我正在使用这行代码来引入数据：

```
conn.bulkTransfer(epIN, buffer, 57600, 500); 
```

有没有办法一遍又一遍地进行 USB 传输，直到没有更多数据进入？因为传入的数据量可以从 8 字节到几 MB 不等

* * *

回复 user387184

像这样的东西可以传输大量数据吗？

```
while ( conn.bulkTransfer(epIN, buffer, 57600, 500) > 0 ){
    \\do some stuff
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:42:00.183

当您在转换器下游尝试与（最终）串行设备通信时，如果协议设计为发送和接收的消息具有终止字符，则非常有用。这可以防止您不得不猜测是否会有更多数据在另外几毫秒内到来。换行是一个很常见的选择。例如：

主持人：你叫什么名字？\n

装置：卡米洛特的加拉哈德爵士。\n

主持人：你最喜欢什么颜色？\n

设备：蓝色\n否，黄色\n

鉴于设备在“Blue”之后用 \n 终止了响应，主机不会期望看到第二个澄清答案。通常情况下，如果设备以这种方式“违反规则”，主机不会读取“不，黄色”，直到它寻找下一个问题的答案，此时它可能会拒绝它，因为它不可信响应，并向设备发出复位命令。（一些协议有一个“在回复之前重复问题”方案，以防止这种混淆）

除了使用终止字符之外，当然还有另外两种众所周知的可能性：一种是非常缩写的代码 - 单个字符或可能无法打印的二进制 - 具有预期的长度响应（可能因代码的开头而异）。另一个是包结构的方式——一个可识别的报头，一个长度字段，然后是数据。

但主要的一点是，“等等看是否还有更多”协议主要用于两个人之间或一个人和一个自动化系统之间。当自动化系统相互交谈时，它们倾向于使用一种协议，该协议定义了您如何知道是否还会有更多。 **如果您的最终下游端点设备固件的创建者了解他们的业务，那么对于您何时应该或不应该期待更多数据，将会有明显的规则。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:21:33.227

如果您的 USB 连接在没有更多数据的情况下确实停止接收数据，那么您需要做的就是在您的语句周围放置一段时间 receivedBufferIsNotEmpty，因为：

```
lenOfReceivedBuffer = conn.bulkTransfer(epIN, buffer, 57600, 500); 
```

`0 in lenOfReceivedBuffer`如果使用 500 毫秒超时在端口上找不到更多数据，则获取。

如果您的发送端太慢，您也可以稍微增加超时。

# ajax - 解决这个使用ajax发送阿拉伯字符的问题

> ID：10931560
> 
> 赞同：6
> 
> 时间：2012-06-07T12:13:05.363
> 
> 标签：ajax, forms, encoding

我正在使用 AJAX 表单将数据发送到另一个名为“show.php”的页面。以下是页面来源：

**表单.html**

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<script src="ajaxsbmt.js" type="text/javascript"></script>
</head>
<div id="MyResult"></div>
    <form method="POST" action="response_norma.php" name="MyForm" onsubmit="xmlhttpPost('show.php', 'MyForm', 'MyResult', '<img src=\'indicator.gif\'>'); return false;">
      <input type="text" name="mytext" size="20">
      <input type="submit" value="Submit" name="ok">
    </form>
</body>
</html> 
```

**显示.php**

```
<?php
  echo $_REQUEST['mytext'];
?> 
```

**ajaxsbmt.js**

```
function xmlhttpPost(strURL, formname, responsediv, responsemsg) {
  var xmlHttpReq = false;
  var self = this;
  // xhr for Mozilla/Safari/Ie7
  if (window.XMLHttpRequest) {
    self.xmlHttpReq = new XMLHttpRequest();
  }
  // xhr for all other versions of IE
  else if (window.ActiveXObject) {
    self.xmlHttpReq = new ActiveXObject("Microsoft.XMLHTTP");
  }
  self.xmlHttpReq.open('POST', strURL, true);
  self.xmlHttpReq.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
  self.xmlHttpReq.onreadystatechange = function() {
    if (self.xmlHttpReq.readyState == 4) {
      // When ready, put the response into the form
      updatepage(self.xmlHttpReq.responseText, responsediv);
    } else {
      // While waiting for the respnse, display a message
      updatepage(responsemsg, responsediv);
    }
  }
  self.xmlHttpReq.send(getquerystring(formname));
}

function getquerystring(formname) {
  var form = document.forms[formname];
  var qstr = "";

  function GetElemValue(name, value) {
    qstr += (qstr.length > 0 ? "&" : "")
            + escape(name).replace(/\+/g, "%2B")
            + "="
            + escape(value ? value : "").replace(/\+/g, "%2B");
            ´//+ escape(value ? value : "").replace(/\n/g, "%0D");
  }

  var elemArray = form.elements;
  for (var i = 0; i < elemArray.length; i++) {
    var element = elemArray[i];
    var elemType = element.type.toUpperCase();
    var elemName = element.name;
    if (elemName) {
      if (
           elemType == "TEXT" 
        || elemType == "TEXTAREA" 
        || elemType == "PASSWORD" 
        || elemType == "BUTTON" 
        || elemType == "RESET" 
        || elemType == "SUBMIT" 
        || elemType == "FILE" 
        || elemType == "IMAGE" 
        || elemType == "HIDDEN"
      ) 
        GetElemValue(elemName, element.value);
      else if (elemType == "CHECKBOX" && element.checked) 
        GetElemValue(elemName, element.value ? element.value : "On");
      else if (elemType == "RADIO" && element.checked) 
        GetElemValue(elemName, element.value);
      else if (elemType.indexOf("SELECT") != -1)
        for (var j = 0; j < element.options.length; j++) {
          var option = element.options[j];
          if (option.selected) 
            GetElemValue(elemName, option.value ? option.value : option.text);
        }
    }
  }
  return qstr;
}

function updatepage(str, responsediv) {
  document.getElementById(responsediv).innerHTML = str;
} 
```

**问题**

当我在字段中输入英文字符时，数据传输成功，我在表格顶部收到它们。

但是当我尝试输入阿拉伯字符时，我收到了另一个数据，比如编码的单词。例如：%u0633%u0644%u0627%u0645。%u0686%u0637%u0648%u0631%u06CC 而不是：
سلام。چطوری （如果你有字体。）

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T07:18:34.897

您正在使用`escape()`和一些花哨的自定义替换。不要这样做。

`escape()`坏了，几乎没有理由使用它。

您要查找的函数称为`encodeURIComponent()`.

```
// use an array to hold the query string parts
var qstr = [];

qstr.appendParam = function(name, value) {
  this.push( 
     encodeURIComponent(name) 
     + (value > "" ? "=" + encodeURIComponent(value) : "")
  );
  return this;
}
qstr.toString = function () {
  return "?" + this.join("&");
}

// use like this:
qstr.appendParam("foo", "bar");
qstr.appendParam("arabic", "سلام. چطوری");

// now make a real query string.
qstr.toString() // "?foo=bar&arabic=%D8%B3%D9%84%D8%A7%D9%85.%20%DA%86%D8%B7%D9%88%D8%B1%DB%8C" 
```

以上应该替换您的`GetElemValue()`功能。请注意如何通过添加所需的函数（如`appendParam()`）或覆盖已经存在的函数（如 ）来调整对象`toString()`。

另请注意，您可以从您的函数返回数组本身`getquerystring()`。JavaScript`toString()`在以下情况下会自动调用：

```
var url = "http://bla/" + qstr 
```

由于`toString()`被覆盖，正确的事情就会发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T14:31:08.997

这里发生的是您的页面将字符编码为 un​​icode。例如，%u0633 是字符串中的第一个字符。这是正常的，尽管我很惊讶它会自动发生。

现在，您需要在向查看器显示时对它们进行解码。

看起来这可能是您想要的： [http ://www.php.net/manual/en/function.utf8-decode.php](http://www.php.net/manual/en/function.utf8-decode.php)

```
string utf8_decode ( string $data ) 
```

该函数采用编码输入，看起来像“%u0079”或“%u0078”，并将其转换回字母。当您尝试使用 PHP 显示字符串时，请将其包装在：

```
utf8decode("mystring") 
```

我认为 show.php 应该是这样的：

```
<?php
  echo utf8decode($_REQUEST['mytext']);
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T14:13:06.637

我认为这可能会有所帮助：

`self.xmlHttpReq.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');`

上述代码应将 AJAX 请求的字符集设置为 UTF-8。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T14:34:16.610

```
<?php
  $orignialmytext = $_REQUEST['mytext'];
  $decodedmytext = urldecode($orignialmytext);
  echo $decodedmytext;
?> 
```

# c# - 在 datagridview 中添加的未提交行的异常

> ID：10931564
> 
> 赞同：1
> 
> 时间：2012-06-07T12:13:18.953
> 
> 标签：c#, .net, winforms, exception-handling, datagridview

我有一个datagridview，其中一些列是可编辑的。Datagrid 自动在底部添加新行。我想在单击按钮时将网格的内容插入数据库中。但是当我为每个循环编写插入查询时，由于底部未提交的行 **异常：对象引用未设置为对象实例** 请帮助我修复这个..代码在这里

```
private void btn_save_Click(object sender, EventArgs e)
{
    try
    {
        con.Open();
        cmd = new SqlCommand("Select SupplierId from  tbl_Supplier where SupplierName ='" + cmbSupplierName.Text + "'", con);
        sdr = cmd.ExecuteReader();
        if (sdr.HasRows)
        {
            while (sdr.Read())
            {
                string sup_id = sdr["SupplierId"].ToString();
                //txt_id.Text = sup_id;
            }
        }

        foreach (DataGridViewRow row in grdPurchase.Rows)
        {
            string material_id = row.Cells[2].Value.ToString();
            int m_id = int.Parse(material_id);
            string Quantity = row.Cells[3].Value.ToString();
            float m_quantity = float.Parse(Quantity);
            string rate = row.Cells[4].Value.ToString();
            float m_rate = float.Parse(rate);
            string total = row.Cells[5].Value.ToString();
            float m_total = float.Parse(total);
            //string bill = txt_billno.Text;
            int supplier_id = int.Parse(sup_id);
            //string date = dtp_Purchase.Text;

            // dt.Rows.Add(supplier_id, bill, m_id, m_quantity, m_rate, m_total, date);
            String query = "insert into tbl_Purchase (SupplierId,MaterialId,BillNo,Quantity,Rate,Total,Date) values(" + supplier_id + "," + m_id + ",'" + txt_billno.Text + "'," + m_quantity + "," + m_rate + "," + m_total + ",'" +  dtp_Purchase.Text + "')";
            cmd = new SqlCommand(query, con);
            cmd.ExecuteNonQuery();
                //object id = cmd.ExecuteScalar();
                //  string purchase_id = id.ToString();
            MessageBox.Show("Inserted: ");
        }
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message.ToString());
    }
    finally
    {
        sdr.Close();
        con.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:19:45.317

不正常，GridView 自动添加一行。您确定此行在您的数据源中不可用吗？GridView 只是您的 DataSource 的一个视图，所以问题就在那里。您正在使用哪个数据源？此外，如果您创建一个类，它会更漂亮。每行由一个对象表示，您的数据源是一个列表。如果您想从 GridView 获取所有数据，您可以使用 List 或从您的类中强制转换类型中的每个 DataRow。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:45:39.983

[您可以使用IsNewRow](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewrow.isnewrow.aspx)属性过滤掉新行：

```
foreach (DataGridViewRow row in grdPurchase.Rows)
{
   if (row.IsNewRow)
   {
       continue;
   }
   ... 
```

# objective-c - Objective-c iphone dev: MVC - 为模型创建一个库

> ID：10931572
> 
> 赞同：1
> 
> 时间：2012-06-07T12:13:43.007
> 
> 标签：objective-c, iphone, xcode, model-view-controller

我正在尝试创建一个清晰的 MVC 模型，其中控制器是唯一可以访问视图和模型的模型，因此模型不知道视图，反之亦然。

我在一个单独的 xcode 项目中创建了我的模型，对其进行了测试，它完成了它必须做的事情。现在我在想，不只是将代码复制到带有控制器和视图的新“完整应用程序”项目中，为模型创建一个库并让控制器使用它可能是一个更好的主意吗？

由于我喜欢保持视图和模型“哑”，我没有看到任何问题，我的控制器只处理所有通信。

这里有明确的建议吗？将模型提取到库中没有明显的好处（不会很快重用它），但是将模型放在单独的项目中并将其作为库导入到我的应用程序中似乎更干净，以便我的控制器访问.

我听说在您的新 xcode 项目中“包含其他项目”，所以也许这是将模型保存在单独项目中并使其在完整应用程序中工作的另一种方法？

只是寻找实现模型和控制器分离的最佳方法。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T17:18:30.740

设置新的“完整应用程序”项目，然后在导航器中右键单击并选择`New Group`，调用该组`ModelEngine`并将 modelEngine 源文件插入到项目中。它看起来类似于下图。

在 BuildPhase 选项卡下，您会看到 ModelEngine 与该文件一起编译，`complete app`因此该文件位于另一个项目中。（不确定你的模型引擎有多大，但如果有的话，我希望在编译时会有一点开销）

不要选择`copy files if needed`（我认为它叫什么），因为您只想拥有模型引擎文件的一个实例。否则可能会让人难以理解哪个文件属于哪个项目。

现在`complete app`可以#import ModelEngine.h 文件。如果需要，您仍然可以将模型项目作为单独的应用程序运行。如果您对模型进行更改，它们也会立即反映在 ModelEngine 项目中。

![在此处输入图像描述](../Images/8ab259a794ac6058ab9bc8e6a6b9d1b3.png)

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:27:03.717

我这样做的方法是将相关类复制到我的新项目中。它快速而简单，它允许您在未来做同样的事情，而无需经历创建框架的概念。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T13:08:57.157

如果您设置了“收藏夹”，则可以将其保存为模板以供快速入门 [指南](http://guides.macrumors.com/Creating_Xcode_project_templates)

# nhibernate - 如何使用 NHibernate 找到所有父母

> ID：10931576
> 
> 赞同：0
> 
> 时间：2012-06-07T12:14:00.310
> 
> 标签：nhibernate

我有一个评论对象。每个评论都可以有子评论。每个评论树都有相同的 CommentContainer，因此我们可以加载正确的评论树。我可以使用下面的查询构建树，但我只想获取特定评论的父母。有任何想法吗？

```
class Comment
{
  prop Comment Parent{get;set;}
  prop CommentContainer Container{get;set;}
}

(from comment in Session.Query<CommentDto>()
 from parent in Session.Query<CommentDto>()
 where comment.CommentContainer.Id == CommentContainderID && comment.Parent == parent
 select comment)
.Fetch(c => c.Parent)
.ToList(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T07:19:16.260

如果没有某种指标，评论在树中的深度，就没有办法在一个语句中描述 sql 中的集合，而不诉诸供应商特定的递归。最简单的方法是获取整个树并在代码中过滤。

# android - 无法启动我的服务

> ID：10931579
> 
> 赞同：1
> 
> 时间：2012-06-07T12:14:07.247
> 
> 标签：android, service, android-activity

在android中，我想在创建活动时启动服务。

我收到此错误：

```
E/AndroidRuntime(1433): Caused by:
    java.lang.IllegalAccessException: access to class not allowed 
```

我正在使用以下代码：

服务：

```
class Myservice extends Service 
{
    @Override
    public void onCreate() {
        Log.d("Debug", "on create delete sms");
        super.onCreate();
    }

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void onDestroy() {
          super.onDestroy();
          Log.d("Debug", "on destroy delete sms");
        }

    @Override
    public void onStart(Intent intent1, int startId) {

        Log.d("Debug", "on start delete sms");
        super.onStart(intent1, startId);

    }
} 
```

活动：

```
public class ServicetestActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Intent serviceIntent = new Intent();
        serviceIntent.setAction("org.avd.Myservice");
        getApplicationContext().startService(serviceIntent);
    }
} 
```

机器人清单：

```
 <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".ServicetestActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <service android:name="org.avd.Myservice">
        <intent-filter>
                        <action android:name="org.avd.Myservice" />
           </intent-filter>
        </service>
    </application> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T12:32:06.457

将您的服务类文件设为公共标识

然后通过这种方式从您的活动中调用

```
startService(new Intent("yourActivity.this",Myservice .class)); 
```

如果您想停止服务，只需输入代码

```
stopService(new Intent("yourActivity.this",Myservice .class)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:19:04.910

确保您的服务类是公开的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T12:21:27.047

请注意您的自定义类是公共的，并且它有一个公共的零参数构造函数，还请查看构造函数链接到超类的构造函数。

# excel - 滚动数据，需要将文本换行重新换行，如新数据显示

> ID：10931580
> 
> 赞同：0
> 
> 时间：2012-06-07T12:14:17.957
> 
> 标签：excel, vba

我有一个 Excel 表，它使用滚动条显示数据，此数据随滚动条而变化，某些字段不显示所有数据。我希望它在数据显示在相关行中时根据需要自动调整大小。随着数据在列表中向上或向下移动，该行将自动调整大小，因此它原来的位置会变小，而上方或下方的行将根据滚动条的移动方式进行调整，以适应更大的数据细胞。

我在有问题的工作表中编写了这段代码，认为它会起作用，但它没有......

```
Option Explicit
Private Sub Workbook_Open()
Rows("2:12").EntireRow.AutoFit
Loop
End Sub 
```

现在我想看到的是，需要注意的是细胞不会低于特定高度，即 36。这只是一个愿望，但我希望它保持这种状态......所以它保持未成形，减去需要扩展以显示更多数据的单元格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:58:41.960

首先，命名要应用自动调整的工作簿和工作表。例如。

```
thisworkbook.sheets("Name").rows("2:12").entirerow.autofit 
```

嗯，为什么是循环？

要限制行高，请查看此线程：[http ://www.ozgrid.com/forum/showthread.php?t=19813](http://www.ozgrid.com/forum/showthread.php?t=19813)

# java - 从视频帧中检索时间码

> ID：10931581
> 
> 赞同：0
> 
> 时间：2012-06-07T12:14:18.183
> 
> 标签：java, c, video

我想检索与视频中每一帧相对应的时间码，并在播放视频时将其连续显示为自动收报机。如何以最佳方式实现这一目标？对任何编程语言开放（但最好是 C 或 Java）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:22:12.133

我认为如果没有一些抽象层，这将是一项相当困难的任务。为此，我建议您看一下[Xuggler](http://www.xuggle.com/xuggler/)。这是一个非常易于使用的库，甚至还有一个示例媒体播放器。我已经有一段时间没有使用它了，所以事情可能已经改变了，但绝对值得一看。

# java - Magnolia 看不到自定义 servlet

> ID：10931587
> 
> 赞同：0
> 
> 时间：2012-06-07T12:14:34.570
> 
> 标签：java, magnolia

我在使用 Magnolia Servlet 时遇到了很大的麻烦，到目前为止，我已经尝试了我能想到的一切。

关于[magnolia 文档](http://documentation.magnolia-cms.com/reference/module-mechanism.html#Servlets) ，我们可以在模块定义而不是 web.xml 中设置 servlet 定义（这听起来更简洁，特别是对于扩展）

所以我把这段代码放在我的 xml 模块中

```
 <servlets>
    <servlet>
        <name>jcaptcha</name>
        <class>com.octo.captcha.module.servlet.image.SimpleImageCaptchaServlet</class>
        <mappings>
        <mapping>/jcaptcha.jpg</mapping>
        </mappings>
    </servlet>
 </servlets> 
```

然后我为过滤器创建了旁路节点（config.server.filters.bypasses.jcaptcha.xml）

```
 <?xml version="1.0" encoding="UTF-8"?>
<sv:node sv:name="jcaptcha" xmlns:sv="http://www.jcp.org/jcr/sv/1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <sv:property sv:name="jcr:primaryType" sv:type="Name">
        <sv:value>mgnl:contentNode</sv:value>
    </sv:property>
    <sv:property sv:name="jcr:uuid" sv:type="String">
        <sv:value>f845ae89-a537-4e9f-b074-57d812fd92a6</sv:value>
    </sv:property>
    <sv:property sv:name="class" sv:type="String">
        <sv:value>info.magnolia.voting.voters.URIStartsWithVoter</sv:value>
    </sv:property>
    <sv:property sv:name="pattern" sv:type="String">
        <sv:value>/jcaptcha.jpg</sv:value>
    </sv:property>
    <sv:node sv:name="MetaData">
        <sv:property sv:name="jcr:primaryType" sv:type="Name">
            <sv:value>mgnl:metaData</sv:value>
        </sv:property>
        <sv:property sv:name="mgnl:activated" sv:type="Boolean">
            <sv:value>false</sv:value>
        </sv:property>
        <sv:property sv:name="mgnl:activatorid" sv:type="String">
            <sv:value>superuser</sv:value>
        </sv:property>
        <sv:property sv:name="mgnl:authorid" sv:type="String">
            <sv:value>superuser</sv:value>
        </sv:property>
        <sv:property sv:name="mgnl:creationdate" sv:type="Date">
            <sv:value>2007-04-25T18:23:31.784+02:00</sv:value>
        </sv:property>
        <sv:property sv:name="mgnl:lastaction" sv:type="Date">
            <sv:value>2007-05-02T17:00:15.025+02:00</sv:value>
        </sv:property>
        <sv:property sv:name="mgnl:lastmodified" sv:type="Date">
            <sv:value>2012-06-07T05:41:25.275-05:00</sv:value>
        </sv:property>
    </sv:node>
</sv:node> 
```

仍然当我请求 localhost/magnolia/jcaptcha.jpg 时，它给了我 404 错误。 **“但是”**当我将 servlet 定义放入 web.xml 时，它给出了正确的结果。

谁能告诉我我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T07:41:46.110

这是我从[木兰论坛得到的答案](http://forum.magnolia-cms.com/forum/thread.html?threadId=ea59ba61-5c53-4b6f-b50b-749c4aaf684a&page=1)

```
 <servlets>
 <servlet>
 <name>jcaptcha</name>
 <class>com.octo.captcha.module.servlet.image.SimpleImageCaptchaServlet</class>
 <mappings>
 <mapping>/jcaptcha.jpg</mapping>
 </mappings>
 </servlet>
 </servlets> 
```

这样做会告诉 Magnolia 为您运行 servlet。您可以在 config:/server/filters/servlets/jcaptcha 中安装模块时验证是否安装了 servlet。

> 然后我为过滤器创建了旁路节点（config.server.filters.bypasses.jcaptcha.xml）

这样做是告诉 Magnolia 不要处理所述绕过 url，而是让 Servlet 容器处理该请求。因为只有 Magnolia 知道 servlet，而不知道容器，所以您会得到 404。一旦您让容器知道 servlet（通过将其添加到 web.xml），您就会得到结果。

您有 2 个选项 - 在 web.xml 中保留绕过和定义，或者在模块中保留 servlet 定义。你不能两者兼得。另请记住，Magnolia 会在安装模块期间从您的模块描述符中读取 servlet 定义，因此如果该模块已安装，您需要在更新过程中调用 info.magnolia.module.delta.RegisterModuleServletsTask。

HTH，一月

# arrays - 在数组 AS3 中具有动态名称

> ID：10931593
> 
> 赞同：-1
> 
> 时间：2012-06-07T12:15:06.920
> 
> 标签：arrays, actionscript-3, dynamic

我在使用 AS3 时遇到问题。我试图让我放入数组中的项目具有动态名称（例如 lines[k]），这样当我以后想调用它们时，我可以通过它们的号码调用它们，而不是在时间

我在网站上找到了一些带有动态数组名称的教程，但我不确定如何将它们放入代码中，因为我不断收到错误。

目前这是我的代码：

```
var numPoints:Number = 0;       //  Number of points placed. 
                                //  No dragging will work until all 7 points are placed.

//  Set max & min stage coordinates that the points can be dragged, and make the point diameters settable.
var xMax:Number = 700;
var xMin:Number = 5;
var yMax:Number = 500;
var yMin:Number = 5;
var o = 0;
var circleWidth:Number = 5;

//  Boolean variables to indicate that dragging is happening so that the appropriate point follows the mouse
//  on the MOUSE_MOVE event.
var isDragging1:Boolean = false;
var isDragging2:Boolean = false;
var isDragging3:Boolean = false;
var isDragging4:Boolean = false;
var isDragging5:Boolean = false;
var isDragging6:Boolean = false;
var isDragging7:Boolean = false;

//  The drawBoard is a rectangle on which the triangle will be drawn.  Colors are settable here. To change size,
//  change the variables xMin, xMax, yMin, yMax above.
var drawBoard:Sprite = new Sprite();
drawBoard.graphics.lineStyle(1, 0x000000);
drawBoard.graphics.beginFill(0xCCCCCC);
drawBoard.graphics.drawRect(0, 0, xMax - xMin, yMax - yMin);
drawBoard.graphics.endFill();
drawBoard.x = xMin;
drawBoard.y = yMin;

// Array (Where "lines goes into")
var q:int = 0;
var shapeArray:Array/* of flash.display.Shape */ = [] /* of flash.display.Shape */;
var lines:Shape = new Shape();

//  Add a default drop shadow filter to the drawBoard
drawBoard.filters = [ new DropShadowFilter() ];

//  This rectangle will listen for mouse clicks in order to construct the three vertices of the triangle.
drawBoard.addEventListener(MouseEvent.CLICK, placePoint);

//  Put on the stage the board on which the triangle will be drawn.
stage.addChild(drawBoard);

//  The filled triangle consists of three lines drawn between the points. It is updated     on MOUSE_MOVE once 
//  dragging starts.

drawBoard.addChild(lines);

//  The stage will listen for events involving dragging so that the dragging will continue to work even after
//  the mouse has rolled off of the drawBoard region.
stage.addEventListener(MouseEvent.MOUSE_MOVE, mouseUpdate);
stage.addEventListener(MouseEvent.MOUSE_UP, stopDragging);

// Button 2 (Left)
bttn_add.addEventListener(MouseEvent.CLICK, toevoegen);

// Button 3 (Middle)
bttn_show.addEventListener(MouseEvent.CLICK, showit);

// adding shape to array

function toevoegen(e:Event):void
{

    // adding
    shapeArray.push( lines );
    numPoints = 0;
    trace("Done pushing")

}

// Shape show

function showit(e:Event):void
{
    trace(shapeArray.length);
  if (!shapeArray || shapeArray.length == 0){
//      shapeArray.push( lines );
trace("array is leeg")
    return; // nothing to do here
    }

  const lines:Shape = shapeArray[o] as Shape;
   if (lines && ! lines.parent) {
       o++;
       trace ("tracer"+ o);
}// show it
    drawBoard.addChild(lines)
          //shapeArray.push( lines );
          numPoints = 0;

    trace()
}

//  We add 7 points to the stage but we do not add the graphics yet.  We do specify listeners
//  at this time so when they are all placed, we will be able to drag them.

var point1:Sprite = new Sprite();
point1.addEventListener(MouseEvent.MOUSE_DOWN, startDragging1);
drawBoard.addChild(point1);

var point2:Sprite = new Sprite();
point2.addEventListener(MouseEvent.MOUSE_DOWN, startDragging2);
drawBoard.addChild(point2);

var point3:Sprite = new Sprite();
point3.addEventListener(MouseEvent.MOUSE_DOWN, startDragging3);
drawBoard.addChild(point3);

var point4:Sprite = new Sprite();
point4.addEventListener(MouseEvent.MOUSE_DOWN, startDragging4);
drawBoard.addChild(point4);

var point5:Sprite = new Sprite();
point5.addEventListener(MouseEvent.MOUSE_DOWN, startDragging5);
drawBoard.addChild(point5);

var point6:Sprite = new Sprite();
point6.addEventListener(MouseEvent.MOUSE_DOWN, startDragging6);
drawBoard.addChild(point6);

var point7:Sprite = new Sprite();
point7.addEventListener(MouseEvent.MOUSE_DOWN, startDragging7);
drawBoard.addChild(point7);

//  The reset button will stop all dragging, remove all children of drawBoard, and set numPoints back to 0.

btnReset.addEventListener(MouseEvent.CLICK, reset);

function reset(evt:MouseEvent):void {
    var i:Number;
    var n:Number = drawBoard.numChildren;

    isDragging1 = false;
    isDragging2 = false;
    isDragging3 = false;
    isDragging4 = false;
    isDragging5 = false;
    isDragging6 = false;
    isDragging7 = false;

    point1.graphics.clear();
    point2.graphics.clear();
    point3.graphics.clear();
    point4.graphics.clear();
    point5.graphics.clear();
    point6.graphics.clear();
    point7.graphics.clear();

    /*
    drawBoard.removeChild(point1);
    drawBoard.removeChild(point2);
    drawBoard.removeChild(point3);
    drawBoard.removeChild(point4);
    drawBoard.removeChild(point5);
    drawBoard.removeChild(point6);
    drawBoard.removeChild(point7);
   */
    //lines.graphics.clear();
    drawBoard.removeChild(lines);
    numPoints = 0;
    trace(numPoints);

}

//  The next function is executed when the mouse is moved.  Note that if all points are not placed and nothing
//  is being dragged, this function does nothing.
function mouseUpdate(evt:MouseEvent):void {
    if (numPoints == 7) { 
        if (isDragging1) {
            point1.x = goodX(evt.stageX);       //  Set x- & y-coordinates.  See below for definition of 
            point1.y = goodY(evt.stageY);       //      functions goodX & goodY
            //lines.graphics.clear();             //  Remove lines shape and redraw it 

            drawLines();                        //      with updated coordinates.
        }
            if (isDragging2) {
            point2.x = goodX(evt.stageX);
            point2.y = goodY(evt.stageY);
            //lines.graphics.clear();
            drawLines();
        }
            if (isDragging3) {
            point3.x = goodX(evt.stageX);
            point3.y = goodY(evt.stageY);
            //lines.graphics.clear();
            drawLines();
        }

        if (isDragging4) {
            point4.x = goodX(evt.stageX);
            point4.y = goodY(evt.stageY);
            //lines.graphics.clear();
            drawLines();
        }

        if (isDragging5) {
            point5.x = goodX(evt.stageX);
            point5.y = goodY(evt.stageY);
            //lines.graphics.clear();
            drawLines();
        }

        if (isDragging6) {
            point6.x = goodX(evt.stageX);
            point6.y = goodY(evt.stageY);
            //lines.graphics.clear();
            drawLines();
        }

        if (isDragging7) {
            point7.x = goodX(evt.stageX);
            point7.y = goodY(evt.stageY);
            //lines.graphics.clear();
            drawLines();
        }

        evt.updateAfterEvent();
    }
}

/*  This function chooses the appropriate x-coordinate for a dragged point.  
    If thisX is in the draggable region, then we return it.  Otherwise, we return the max or min x value, 
    depending on which side of the draggable region thisX is on.
*/

function goodX(thisX:Number):Number {
    if (thisX < xMin) {
        return (xMin);
    }
    if (thisX > (xMax - circleWidth)) {
        return (xMax - circleWidth);
    }
    return (thisX);
}

//  This function chooses the appropriate y-coordinate for a dragged point in a manner     similar to the previous function. 

function goodY(thisY:Number):Number {
    if (thisY < yMin) {
        return (yMin);
    }
    if (thisY > (yMax - circleWidth)) {
        return (yMax - circleWidth);
    }
    return thisY;
}

// This function manages the placement of points until all 7 points are placed. 
function placePoint(evt:MouseEvent):void {

    //var point = new Sprite();
    //array.push(point);

    if (numPoints == 0) {
        point1.graphics.beginFill(0x7777FF);
        point1.graphics.drawCircle(0, 0, circleWidth/2);
        point1.graphics.endFill();
        point1.filters = [ new DropShadowFilter() ];
        point1.x = drawBoard.mouseX;
        point1.y = drawBoard.mouseY;
        numPoints = 1;
    }
    else if(numPoints == 1) {
        point2.graphics.beginFill(0x7777FF);
        point2.graphics.drawCircle(0, 0, circleWidth/2);
        point2.graphics.endFill();
        point2.filters = [ new DropShadowFilter() ];
        point2.x = drawBoard.mouseX;
        point2.y = drawBoard.mouseY;
        numPoints = 2;
    }
    else if (numPoints == 2) {
        point3.graphics.beginFill(0x7777FF);
        point3.graphics.drawCircle(0, 0, circleWidth/2);
        point3.graphics.endFill();
        point3.filters = [ new DropShadowFilter() ];
        point3.x = drawBoard.mouseX;
        point3.y = drawBoard.mouseY;
        numPoints = 3;
        //lines.graphics.clear();
        //drawBoard.removeChild(lines);

    }

    else if (numPoints == 3) {
        point4.graphics.beginFill(0x7777FF);
        point4.graphics.drawCircle(0, 0, circleWidth/2);
        point4.graphics.endFill();
        point4.filters = [ new DropShadowFilter() ];
        point4.x = drawBoard.mouseX;
        point4.y = drawBoard.mouseY;
        numPoints = 4;
        //lines.graphics.clear();
        //drawBoard.removeChild(lines);
    }

    else if (numPoints == 4) {
        point5.graphics.beginFill(0x7777FF);
        point5.graphics.drawCircle(0, 0, circleWidth/2);
        point5.graphics.endFill();
        point5.filters = [ new DropShadowFilter() ];
        point5.x = drawBoard.mouseX;
        point5.y = drawBoard.mouseY;
        numPoints = 5;
        //lines.graphics.clear();
        //drawBoard.removeChild(lines);
    }

    else if (numPoints == 5) {
        point6.graphics.beginFill(0x7777FF);
        point6.graphics.drawCircle(0, 0, circleWidth/2);
        point6.graphics.endFill();
        point6.filters = [ new DropShadowFilter() ];
        point6.x = drawBoard.mouseX;
        point6.y = drawBoard.mouseY;
       numPoints = 6;
        //lines.graphics.clear();
        //drawBoard.removeChild(lines);
    }

    else if (numPoints == 6) {
        point7.graphics.beginFill(0x7777FF);
        point7.graphics.drawCircle(0, 0, circleWidth/2);
        point7.graphics.endFill();
        point7.filters = [ new DropShadowFilter() ];
        point7.x = drawBoard.mouseX;
        point7.y = drawBoard.mouseY;
        numPoints = 7;
        q++;
            //shapeArray.push( lines );

        //lines.graphics.clear();
        //drawBoard.removeChild(lines);

        drawLines();
        //verplaatsen();
        trace(numPoints);
    }
}

//  Draws the 7 lines between the points with appropriate fill and adds a drop shadow.
function drawLines():void {
        lines.graphics.lineStyle(1, 0xFF0000);
        lines.graphics.beginFill(0xFF7777);
        lines.graphics.moveTo(point1.x, point1.y);
        lines.graphics.lineTo(point2.x, point2.y);
        lines.graphics.lineTo(point3.x, point3.y);
        lines.graphics.lineTo(point4.x, point4.y);
        lines.graphics.lineTo(point5.x, point5.y);
        lines.graphics.lineTo(point6.x, point6.y);
        lines.graphics.lineTo(point7.x, point7.y);
        lines.graphics.lineTo(point1.x, point1.y);
        lines.graphics.endFill();
        lines.filters = [ new DropShadowFilter() ];
        trace(lines)
        trace ("geval"+ o)
}

//  The next functions "turn on" dragging for the point that is clicked, as long as all 7 points have
//  been placed.
function startDragging1(evt:MouseEvent):void {
    if (numPoints == 7) {
        isDragging1 = true;
    }
}

function startDragging2(evt:MouseEvent):void {
    if (numPoints == 7) {
        isDragging2 = true;
    }
}

function startDragging3(evt:MouseEvent):void {
    if (numPoints == 7) {
        isDragging3 = true;
    }
}
function startDragging4(evt:MouseEvent):void {
    if (numPoints == 7) {
        isDragging4 = true;
    }
}

    function startDragging5(evt:MouseEvent):void {
    if (numPoints == 7) {
        isDragging5 = true;
    }
}

function startDragging6(evt:MouseEvent):void {
    if (numPoints == 7) {
        isDragging6 = true;
    }
}

function startDragging7(evt:MouseEvent):void {
    if (numPoints == 7) {
        isDragging7 = true;
    }
}

//  Turns off dragging. This function is called when the mouse button is released anywhere on the stage.
function stopDragging(evt:MouseEvent):void {
    if (numPoints == 7) {
        isDragging1 = false;
        isDragging2 = false;
        isDragging3 = false;
        isDragging4 = false;
        isDragging5 = false;
        isDragging6 = false;
        isDragging7 = false;

    }
}
/*
function verplaatsen():void{
        lines.x = 0;
        lines.x = 100;
        lines.y = 300;

}*/ 
```

如果我的代码凌乱/草率，我很抱歉，我整天都在尝试并且现在有点睡眠不足。

任何帮助将不胜感激

（另一方面：他们是将这 4 个空格放在前面以在该网站上创建代码块的快速方法吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:58:10.250

您应该真正了解数组的工作原理，从您的代码中我可以看到您只是使用不同的变量来保存所有精灵并检查函数内部的不同变量，如 isDraging1、2、3、4、5。

这是一些帮助您入门的代码。

```
public var mySprites:Array = [];

public function init():void
{
   for (var i:int = 0; i<10; ++i)
   {
       createSprite();
   } 
}

public function createSprite():void
{
   var sprite:Sprite = new Sprite();
   sprite.addEventListener(MouseEvent.MOUSE_CLICK,onSpriteClicked);
   addChild(sprite);
   mySprites.push(sprite);
}

public function onSpriteClicked(e:MouseEvent):void
{
   trace("You clicked sprite : "+mySprites.indexOf(e.target as Sprite));
   // you can use the sprite here 
   var clickedSprite:Sprite = e.target as Sprite;
   if(clickedSprite) 
   {
      //do something with sprite
   }
} 
```

# javascript - Servlet 中的另存为对话

> ID：10931595
> 
> 赞同：0
> 
> 时间：2012-06-07T12:15:10.537
> 
> 标签：javascript, jquery, servlets

我发现这些论坛中的许多答案对我非常有用，但会要求您检查我的这个问题。

我正在尝试`.csv`从 jquery 方法调用的 servlet 中保存文件。虽然我正在设置标题和`content-diposition`. 流式写入数据后，我没有在浏览器中看到对话框。

```
function popup(data) {
    $.post("cisco-fetch-devices", { orderId : data},
        function(data) {
            alert("Data Loaded: " + data);  
        });
    });
} 
```

上面的 jquery 代码正在调用下面的 servlet post 方法：

```
public void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
{
    response.setContentType("text/csv");
    response.setHeader ("Content-Disposition", "attachment;filename=\"tableincsv.csv\"");
    java.io.PrintWriter out = response.getWriter();
    out.print("test data");
} 
```

数据发送回浏览器后，对话框不显示。但是，在 servlet 中设置的数据`out.print`正确显示在`alert`JS 方法的消息中。

请给我你的意见。

谢谢，阿迪亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:30:04.030

简短的回答：你不能用 AJAX 来做，它会忽略 Content-Disposition 标头以便能够提供它的数据对象。您必须依赖浏览器，它尊重此标头。

因此，请在您的 servlet 上**执行常规 POST**（带有隐藏字段）**或 GET**（带有查询字符串参数）。

或者使用用户[Vinodh Ramasubramania 在 Stackoverflow 上推荐的](https://stackoverflow.com/questions/2186562/post-to-server-receive-pdf-deliver-to-user-w-jquery)[这个 jQuery 插件](http://www.filamentgroup.com/lab/jquery_plugin_for_requesting_ajax_like_file_downloads/)来自动化这个过程。代码很短，就是这样做的......

关于这个主题有很多线程：

*   这里
    *   [jQuery.post() 如何处理 Content-Disposition: 附件？](https://stackoverflow.com/questions/8824630/content-disposition-does-not-cause-a-save-as)
    *   [POST 到服务器，接收 PDF，使用 jQuery 交付给用户](https://stackoverflow.com/questions/2186562/post-to-server-receive-pdf-deliver-to-user-w-jquery)
    *   …</li>
*   在 forum.jquery.com 上：
    *   [jQuery.post 返回二进制内容](http://forum.jquery.com/topic/jquery-jquery-post-returning-binary-content)

# cloud - 基于 CDMI 的存储云。互操作性？

> ID：10931597
> 
> 赞同：0
> 
> 时间：2012-06-07T12:15:15.703
> 
> 标签：cloud, storage

我正在做一个基于 CDMI 的存储云的项目。

谁能解释一下，在这种情况下，“互操作性”究竟意味着什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-22T05:30:42.877

如今，用于从对象存储访问数据的协议都特定于对象存储实现，例如 S3、OpenStack Swift 对 HTTP 进行了自己的添加，用于访问其中的数据。与这些云中的任何一个对话的客户不能直接与另一个对话。云自己不说话。

SNIA 提出了 CDMI 以实现互操作性，因此如果许多对象存储实现 CDMI 协议，则为一个云编写的客户端可以（很大程度上）重新用于与所有实现 CDMI 协议的云进行访问。此外，云可以相互交谈和联合。因此，CDMI 是客户端到云和云到云互操作协议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T09:58:25.900

互操作性只不过是相互合作的能力。云存储有多种类型的云数据存储接口，能够同时支持旧应用程序和新应用程序。要使用这些接口，现有的标准协议，如用于块的 iSCSI（和其他）和用于文件网络存储的 CIFS/NFS 或 WebDAV 等. 被使用。

# iphone - NSDictionary 或 NSKeyedArchiver

> ID：10931601
> 
> 赞同：0
> 
> 时间：2012-06-07T12:15:34.460
> 
> 标签：iphone, objective-c, ios, nscoding

在模型部分，我有一些数据类型，其属性都是属性列表数据类型。最终，用户将通过网络向服务器发送和读取这些数据项。问题是，我应该使用 NSCoding 和 NSKeyedArchiver （如下面的第二个代码块，这使得 XML 恕我直言丑陋）还是我应该做一些类似于子类 NSDict 的事情，以便我可以使用`dictionaryWithContentsOfFile:`并`writeToFile:atomically:`获得漂亮的 XML？

```
@interface Word : NSObject <NSCoding>
@property (strong, nonatomic) NSString *language;
@property (strong, nonatomic) NSString *name;
@property (strong, nonatomic) NSDictionary *detail;
@property (strong, nonatomic) NSString *userName;
@property (strong, nonatomic) NSString *userId;
@property (strong, nonatomic) NSArray *files;
- (void)copyFromTemporaryFiles:(NSArray *)temporaryFiles; // populates self.files
@end 
```

和

```
@interface Category : NSObject <NSCoding>
@property (strong, nonatomic) NSString *name;
@property (strong, nonatomic) NSDictionary *detail;
@property (strong, nonatomic) NSDate *updated;
@property (strong, nonatomic) NSArray *words;
+ (Category *)categoryWithName:(NSString *)name;
- (void)saveWithName:(NSString *)name;
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:38:00.503

在我看来，这些选项都不是通过网络发送数据的好习惯，因为与其他格式相比，文件大小相对较大。相反，我可能会使用 JSON 库来传输这种结构化数据。如果您正在为 iOS 5+ 构建，您可以查看`NSJSONSerialization`（[参考此处](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)）进行一些简单、直接的转换（只需将所有 ivars 打包到字典中并将其传递给`+dataWithJSONObject:options:error`，通过网络发送数据，然后使用`+JSONObjectWithData:options:error`）。否则，会有一堆第 3 方和/或开源解决方案。[SBJSON](http://stig.github.com/json-framework/)立即浮现在脑海中。

PS我真的会警惕子类化`NSDictionary`。该类实际上代表一个类集群，并且在后台进行了一系列优化以处理内存的最佳使用等。您可以阅读参考页面上的[子类化注释](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsdictionary_Class/Reference/Reference.html#//apple_ref/doc/uid/20000140-DontLinkElementID_1)以找到一些其他方法来为您的字典添加功能。

# php - 如何在模态框中显示内容并在该框中显示图像

> ID：10931604
> 
> 赞同：0
> 
> 时间：2012-06-07T12:15:44.337
> 
> 标签：php, javascript, jquery, logic

目前我有一个详细的页面列表，其中包含所有链接，例如`page.php`contains `page.php?id=1, page.php?id=2, page.php?id=3, page.php?id=4..etc`。现在我只想提供一个预览按钮，点击该按钮而不导航到这些页面，我可以在弹出/模式框中显示内容而不移动到这些页面？我被这个 id 概念困住了，我怎么能做到这一点。任何来源/链接都是非常可观的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:44:47.283

好吧，您可以像 Stardev 所说的那样在那里混合一些 ajax，但是如果您需要一个简单的解决方案，请尝试这个[Url 预览脚本](http://cssglobe.com/lab/tooltip/02/)（请检查它）非常干净或支持 iframe 的灯箱。[可以在此处](http://planetozh.com/projects/lightbox-clones/)找到一个大列表，请检查此[链接](http://www.kom.cl/blogger/iframe/)以了解一下:)

例如，如果你尝试 ajax，我会是这样的： Jquery:

```
$("a").click(function() {
....
    $.ajax({
           type: "POST",
           url: "page.php",
           data: "id="+id,
           success: function(){
                  $('#mymodal').html('This is my image'); //Your div
           }
         }); .... 
```

[漂亮的照片](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)HTML

```
<href="..." rel="prettyPhoto[ajax]">My image</a> 
```

如果您使用 iframe 解决方案：

```
<href="..." rel="prettyPhoto[iframe]">My image</a> 
```

我希望它有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:19:29.637

您可以根据单击的按钮使用 jQuery 执行 AJAX 调用，以在对话框中加载页面：

```
$('.previewButton').click(function(){        
    // determine which page ID to load 
    // based on the button that was clicked
    var pageID = ...;

    // fetch the page
    $.get('page.php', {page: pageID}, function(data) {
        // show the page content inside the dialog
        $('.myDialog').html(data);
    });
}); 
```

例如，对于对话框，您可以使用 jQuery UI 的对话框：http: [//jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

使用该插件，您可以简单地调用`$(".myDialog").dialog()`以使您的`<div class="myDialog"></div>`节目成为一个漂亮的对话框。

# css - 标题只能定义一次

> ID：10931605
> 
> 赞同：5
> 
> 时间：2012-06-07T12:15:47.207
> 
> 标签：css, csslint

只是通过 csslint 运行了相当数量的 css，主要是为了检查错误。我收到的 80% 的警告来自多次定义相同的标题元素。所以我想知道清理这些样式的最佳方法是什么......

```
h4 {
    color: red;
}

.archive h4 {
    color: green;
} 
```

请记住，我已经在设计的其他地方使用了 h1 - h6 样式。

最好为此使用类，然后通过混合继承样式（我正在使用手写笔）？

```
h4 {
    color: red;
}

.archive-header {
    color: green;
} 
```

当我这样做时，为什么 csslint 会对此发出警告？是否有性能问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:28:51.007

1.  为了解决它，当然......你的解决方案应该可以正常工作。
2.  CSS Lint 对此提出警告，因为您不应该以不同的方式设置相同的标题。[这是一篇更多关于该主题](http://www.stubbornella.org/content/2011/09/06/style-headings-using-html5-sections/)的文章的摘录：

    > 在设计标题（或任何东西）时，我们希望实现三个大目标：
    > 
    > 1.  **干燥**——不要重复自己。我们希望设置标题一次，并且从不（好吧，很少！）重复那些字体样式或选择器。这将使我们的网站更易于维护。
    > 2.  **可预测**——无论放在页面的哪个位置，标题都应该看起来相同。这将使创建新页面和内容更容易。
    > 3.  **保持低特异性和尽可能简单的选择器**。这将有助于提高性能，并防止网站随着时间的推移变得越来越复杂。

3.  没有性能命中。如果有的话，使用类名而不是标签可能会[更好。](http://csswizardry.com/2011/09/writing-efficient-css-selectors/)您提出的解决方案几乎是关于[如何让您的网站通过 Google 更快](https://developers.google.com/speed/docs/best-practices/rendering#UseEfficientCSSSelectors)的教科书推荐。

# web-services - 在 REST API 中检索特定资源的分组计数的最佳 URI 模板是什么？

> ID：10931606
> 
> 赞同：4
> 
> 时间：2012-06-07T12:15:48.243
> 
> 标签：web-services, rest, uri

我有一个 REST API，它公开一个 URI 以返回 JSON 中的员工集合。URI 的格式如下：

```
http://webservice/employees 
```

我现在想公开一个 URI，它返回按他们工作的办公室分组的员工数量以及有关办公室的更多信息。例如：

```
items: [{
           officeId: 1,
           officeName: "Big Office",
           switchboardTel: "123456789",
           numEmployees: 100
        },
        {
           officeId: 2,
           officeName: "Small Office",
           switchboardTel: "987654321",
           numEmployees: 30
        },
        ... // etc.
       ] 
```

什么是合适的 URI？我在想，鉴于它返回有关办公室的信息（以及员工人数），那么也许应该通过“办公室”资源检索这些信息：

```
http://webservice/offices 
```

或者，以下 URI 是否更合适？

```
http://webservice/employees?groupBy=office 
```

在我看来，这似乎有点错误，因为响应返回的是有关办公室的信息，而不是员工的信息，以及员工人数。

假设我想公开一个 URI，它返回按年龄分组的员工人数......这是否属于“员工”资源，例如：

```
http://webservice/employees?groupBy=age 
```

...或者它是否更适合创建“年龄”资源：

```
http://webservice/ages 
```

在我看来，“groupBy=age”选项在这里似乎是最好的……但那样会使 URI 格式略有不一致。

基本上，我想要一个一致的 URI 格式来获取按某些标准分组的员工数量 - 并让响应包含有关分组的信息。

在此先感谢您的帮助。

汤姆

# iphone - 如何在播放时录制直播音频并保存到 Documents 目录？

> ID：10931615
> 
> 赞同：0
> 
> 时间：2012-06-07T12:16:15.460
> 
> 标签：iphone, objective-c, ios, xcode

我已经实现了 liveStream 播放的代码。而且我需要在按下停止录制按钮后将该音频录制到本地资源中。

[我有从链接](http://developer.apple.com/library/ios/#samplecode/SpeakHere/Introduction/Intro.html)录制音频的代码：

有什么建议请......

# java - 使用基于 GUI 的 Java 应用程序进行移动应用程序

> ID：10931619
> 
> 赞同：-1
> 
> 时间：2012-06-07T12:16:28.983
> 
> 标签：java, swing, user-interface, java-me, mobile-application

我在 Netbeans 7.1.2 中开发了一个 java 应用程序，它使用不同的摆动控件，如组合框、jcalendar（用于从用户输入日期）文本字段（用于从用户输入）、用于在代码中进行计算的命令按钮等，最后显示结果文本域。该程序在进行计算时还使用 derby 数据表。使用 SQL 语句，我正在根据用户输入执行一些查询。该应用程序工作得非常好。

现在，我想为这个项目制作一个独立的移动应用程序。考虑到我在上面使用的控件，我应该在移动应用程序项目中寻找什么合适的源包和文件？我不介意再次构建 GUI 并将代码放入其中，因为它的工作并不多，但如果我可以使用已经构建的应用程序，那么它就很好。

google了一下之后，我尝试在Java ME中打开一个移动应用程序并打开一个JAVA包（右键单击>新建>Java包），在这里我尝试了（右键单击>新建>）Visual MIDlet，JFrame Form，A GUI Xlet 形式等。但它们似乎都没有摆动控件。调色板仅显示 bean、java 持久性和 jcalendar。

我应该从某个 jar 文件中添加/加载控件吗？还是移动应用程序不支持摇摆控件？在这种情况下，如何使用其他/类似的东西生成我的 GUI？我已经尝试从我早期的表单设计中复制粘贴到一个新的 JFrame 表单中，但是源代码是红色的，并且`java.awt.event.actionEvent does not exist`代码中的所有控件上都出现了类似的错误。我应该在这里导入一些东西吗？

该应用程序适用于具有全宽触摸屏的智能手机和具有小屏幕的简单手机，在这些手机中，我可能必须通过将其分解为更小的部分来更改界面，以便一个接一个地获取用户输入并一个接一个地加载它们。但现在我想要一些关于宽屏智能手机完整 GUI 的建议。

我使用 JAVA ME 的原因是因为我觉得它可以部署在任何手机上，而不管其操作系统如何。如果我错了，请纠正我并启发我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:16:02.660

j2me 是 java 的子集。它包含一些java包、类等。它不包含java的一些类、包。它还包含一些额外的 j2me 特定类、包等，它们不在 java 中。

j2me 特定的包包含一些类似于 AWT、Swing 等的 gui 类。

最好先阅读示例程序的任何 j2me 教程。然后它将有助于构建一个项目。

《J2ME完全参考》是一本适合初学者的好书。

# drupal-6 - 在 ubercart 模块中，我们如何将货币符号 $ 更改为 Rs.？

> ID：10931621
> 
> 赞同：-2
> 
> 时间：2012-06-07T12:16:39.320
> 
> 标签：drupal-6

在[ubercart](http://drupal.org/project/ubercart "优步车")模块中，我们如何将货币符号 $ 更改为 Rs.？我想以 rs. 给出产品价格，但 ubercart 模块默认采用 $。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:21:47.610

根据手册，您应该可以在此处设置货币格式：

> 管理 » 存储 » 配置 » 存储（管理员/存储/设置/存储）。

[http://drupal.org/node/1311876](http://drupal.org/node/1311876)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:20:08.687

您可以设置默认货币并从以下位置签名：

（管理员/商店/设置/商店/编辑/格式）

# algorithm - 如何将二维三角形网格转换为四边形？

> ID：10931626
> 
> 赞同：11
> 
> 时间：2012-06-07T12:16:47.407
> 
> 标签：algorithm, graphics, geometry

如何将二维三角形网格转换为四边形？这是最好的方法，还是可以从头开始生成二维四边形网格？

![在此处输入图像描述](../Images/f24f17fd1705a2a136880a64c08f0ff4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T09:57:46.197

作为他们关于四网格简化的论文的一部分，Tarini 等人。介绍三到四网格转换的部分（准确地说是第 6 节）。
您可以[在作者的网站上](http://vcg.isti.cnr.it/Publications/2010/TPCPP10/)找到该论文：[“实用四边形网格简化”（PDF）](http://vcg.isti.cnr.it/Publications/2010/TPCPP10/Tarini%20Pietroni%20Cignoni%20Panozzo%20Puppo%20-%20Practical%20Quad%20Semplification%20-%20EG%202010.pdf)。

这已发表在：
计算机图形学论坛（Eurographics 2010 会议特刊），第 29 卷，第 2 期，第 407-418 页 - 2010
DOI：[10.1111/j.1467-8659.2009.01610.x](http://onlinelibrary.wiley.com/doi/10.1111/j.1467-8659.2009.01610.x/abstract)

开源实现应该作为[MeshLab](http://meshlab.sourceforge.net/)的一部分提供。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T00:31:18.133

这是一个难题！我喜欢的方法在这篇优秀的论文中给出：

[一种基于波的各向异性四边形法](http://www.cad.zju.edu.cn/home/zhangmuyang/projects/quadmesh_2010/Huang10WaveQuad.pdf)

张牧阳、黄金、刘新国、鲍虎军。

ACM SIGGRAPH 2010

ACM 图形交易 (TOG) , 2010

# c - 是否保证指定的数组总是获得足够的空间？

> ID：10931628
> 
> 赞同：3
> 
> 时间：2012-06-07T12:16:53.603
> 
> 标签：c, arrays

与 不同的是`malloc`，我从未见过`if`检查数组是否有足够空间的语句。那么是否保证数组即使分配在堆栈中也总是获得足够的空间？否则该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T12:27:48.213

根本没有保证。

没有办法验证堆栈分配是否成功。C 标准不强制要求任何限制（最小值或最大值）。

因此，您应该检查通常分配固定大小堆栈的操作系统。例如，在我的 Ubuntu 系统上，堆栈大小为`1MB`. 所以这取决于你的操作系统。

事实上，如果你开始怀疑堆栈大小是否足够，你应该去动态分配（`malloc`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:36:52.797

不，标准中没有任何内容允许这样做，顺便说一句，它不仅适用于数组，还适用于所有 C 变量。如果堆栈溢出，那么它将使您的程序崩溃。死的。例如，过度使用递归可能会产生这种影响。

为了增加复杂性，您是在询问“经典”ANSI C 数组，其大小在编译时固定，还是 C99 可变长度数组 (VLA)，其大小可以在运行时设置？

尽管 VLA 看起来很有吸引力，但正如您所建议的，它们缺乏运行时检查是 malloc 的明显劣势。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T12:25:15.953

这取决于您如何定义数组。

例如：

```
int foo[] = { 1, 2, 3 };
int bar[10] = { 1, 0 };
int fee[10]; 
```

在上面的示例中，数组`foo`将包含三个带有赋值内容的条目。`bar`另一方面，该数组将包含十个条目，第一个初始化为`1`，其余为零。该数组`fee`也将包含十个条目，但内容未初始化并且很可能出现随机。

但是，就像数组末尾分配的内存一样`malloc`，数组可以被覆盖。例如，您可以这样做`foo[4] = 4;`，但这会覆盖数组外的内存，甚至可能导致崩溃。

因此，数组将始终具有与您声明的一样多的条目（或您如何看待它的内存），并且在`foo`上面的示例中将有足够的空间来存储您分配给它的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T20:50:28.933

通常，`malloc`将尝试分配空间，然后您可以使用`if`条件来检查指向数组的指针是否已成功分配：

```
if (ptr == NULL) {
   printf("Error");
   exit();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T12:19:18.953

数组将始终获得足够的空间，无论是**有效的还是无效**的，即如果堆栈没有足够的空间，那么很有可能您可能会使用一些其他专门用于其他目的的内存。在这种情况下，您的程序将导致**未定义的行为**（[堆栈溢出](http://en.wikipedia.org/wiki/Stack_overflow):)）

# php - 发送 ajax 请求时收到错误 403

> ID：10931629
> 
> 赞同：1
> 
> 时间：2012-06-07T12:16:53.713
> 
> 标签：php, jquery, ajax, xmlhttprequest

这是javascript代码

```
 var parent = $(this).parent().parent().parent();
    parent.find('.archiveSpinner').css('display','block');
    var title = $(this).attr('data-title');
    var desc = $(this).attr('data-desc');
    var source = $(this).attr('data-source');
    var datePublished = $(this).attr('data-datePublished'); 
    var _title = parent.find('.title').html();
    var _desc = parent.find('.description').html();
    var _source = parent.find('.source a').attr('source');
    var _datePublished = parent.find('.date').attr('date');
    var serverPage ="archiveThisNow.php?title=" + title + "&desc=" + desc + "&source=" + source + "&_title=" + _title + "&_desc=" + _desc + "&_source=" + _source + "&datePublished=" + datePublished + "&_datePublished=" + _datePublished;
        //the Json Request    

        $.get(serverPage,
                function(data) {
                    if(!data){}
                    else{
                            parent.find('#archiveError').hide();
                            $(data).appendTo(parent);
                            parent.find('.archiveSpinner').css('display','none');
                            setTimeout(function (){ parent.find('#archiveError').fadeOut('slow'); },5000);
                        }
                    }); 
```

它可以在离线状态下完美运行，但是当我在线将其上传到服务器时出现此错误

禁止的

您无权访问此服务器上的 /archiveThisNow.php。

此外，在尝试使用 ErrorDocument 处理请求时遇到 404 Not Found 错误。

请我尽快在这方面需要帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:20:07.600

var 是否`serverPage`有正确的页面路径。请记住，它与调用它的 html/php 文件相关，而不是它可能所在的 javascript 文件。

# asp.net-mvc - 我的 ASP.net MVC 4 站点在第一次请求 SQL Server Express 2012 时变慢

> ID：10931630
> 
> 赞同：3
> 
> 时间：2012-06-07T12:16:58.220
> 
> 标签：asp.net-mvc, iis-7, asp.net-mvc-4

我有一个 ASP.net MVC 4 站点，它在第一次请求时变慢了。它的速度并不高，但页面加载时使用长 1000-700 毫秒，第一次长 8-15seg。例如，当我等待 10 分钟然后回来提出请求时，就会发生这种情况。该网站尚未在生产服务器上。可能是当应用程序池没有收到任何请求时它进入睡眠状态？

我在框架 4 中配置了新的 AutoStart 模式： [http ://weblogs.asp.net/scottgu/archive/2009/09/15/auto-start-asp-net-applications-vs-2010-and-net-4 -0-series.aspx](http://weblogs.asp.net/scottgu/archive/2009/09/15/auto-start-asp-net-applications-vs-2010-and-net-4-0-series.aspx)

我认为这可能是对 SQL Server Express 2012（在同一服务器中）的第一个请求。我已经在数据库中设置了 autoclose=off。

我还能做什么？我怎么能看到第一个请求发生了什么以避免响应缓慢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T16:06:19.737

感谢每一位提出这个问题的人。最后我认为这与应用程序池中的空闲时间配置有关。它设置为 5 分钟（默认），我设置为 60 分钟。现在一切顺利！

感谢这个问题：

[在网站使用 ASP.NET MVC 3 (IIS7) 闲置后，第一个请求非常慢](https://stackoverflow.com/questions/10732484/first-request-is-very-slow-after-website-sits-idle-with-asp-net-mvc-3-iis7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:09:04.730

您可以编译视图以获得更快的性能。

该文档适用于 MVC 3，但它应该仍然有效：

[使用 Visual Studio 在 Asp.Net MVC 3 中编译视图](http://www.stefanprodan.eu/2011/05/compile-views-in-asp-net-mvc-3-with-visual-studio/)

# zend-framework - ZF 包含路径

> ID：10931631
> 
> 赞同：1
> 
> 时间：2012-06-07T12:16:58.900
> 
> 标签：zend-framework, require-once

require_once 是否正确？你会在哪里以及如何把它包含路径？

它不应该在 application.ini 或 bootstrap 中吗？

例子：

```
require_once 'Zend/View/Helper/Abstract.php';
// @question - is this correct - where and
// how would you put it include path

class Zend_View_Helper_Translate extends Zend_View_Helper_Abstract
{
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T13:59:53.193

一般来说，您可以`require_once`通过适当使用`Zend_Loader_Autoloader`. 当然，关键是“合适”。

通常，您`public/index.php`将 设置`include_path`为`library`文件夹。然后，如果您使用`Zend_Application`，`Zend_Loader_Autoloader`则注册 以查找任何[符合 PSR-0 的类](http://phpmaster.com/autoloading-and-the-psr-0-standard/)，其名称空间前缀已使用`autoloadernamespaces`数组 in注册`application/configs/application.ini`。

棘手的部分是定义在不“驻留在 include_path 上”的文件中的类，例如出现在 中的模型、`application/models`驻留在 中的服务`application/services`等。即使在那里定义的类往往遵循 PSR-0 标准，但事实是PSR-0 映射相对于包含路径之外的基础发生，这**意味着**系统必须知道类名前缀和基础路径之间的映射。这就是[资源自动加载器](http://framework.zend.com/manual/en/zend.loader.autoloader-resource.html)的用武之地。这些资源自动加载器通常在应用程序引导程序扩展`Zend_Application_Bootstrap_Bootstrap`和扩展的模块引导程序中自动设置`Zend_Application_Module_Bootstrap`。

View helpers 是另一个“不在 include_path”中的类的例子，可能在类似`application/views/helpers`. 由于这些通常在视图脚本中使用短格式调用`$this->someHelper($someParam)`，因此必须告知系统如何从该短名称生成完全限定的类名。这是使用`$view->addPrefixPath()`将命名空间前缀映射到文件系统位置来完成的。同样，应用程序级和模块级引导机制为您设置了其中的大部分。

对于不遵循 PSR-0 标准的库/类，您可以创建[自定义自动加载器](https://stackoverflow.com/a/8820536/131824)并将它们（通常在 Bootstrap 中）附加到`Zend_Loader_Autoloader`单例。这是唯一一个明确包含/要求的地方。

tl;dr：通过正确使用现有的 ZF 自动加载器机制，您几乎不需要`include/require`在自己的应用程序代码中包含语句。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-07T12:25:09.007

在这种情况下是不正确的。

首先，请使用 Zend Tool。它将创建您自己不知道如何创建的文件。它将创建正确的类名，适当地扩展它们以及`require_once`可能需要的任何东西。

不要放在`require_once`引导程序中。您希望它仅在需要时执行，而不是在每个请求时执行。

至于您提供的示例，正​​确的版本是：

```
require_once "Zend/View/Interface.php";
class Zend_View_Helper_Foo extends Zend_View_Helper_Abstract {
} 
```

由助手扩展的类是自动加载的，放入它`require_once`什么都不做。

# gwt - 仅在客户端 GWT 上限制文件上传大小

> ID：10931634
> 
> 赞同：1
> 
> 时间：2012-06-07T12:17:06.987
> 
> 标签：gwt, gxt

是否有任何规定可以将我的文件上传限制在某些范围内？

我在 GWT 屏幕中使用 FileUploadField。

有什么办法可以应用一些检查，只允许我上传文件最大值。最多只有 10MB 吗？

蒂亚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:05:32.340

如上述答案所述，由于安全原因，无法完成。可以通过 ActiveX 实现，但我绝不建议这样做。

所以你无法在前端检查它，但你可以让它看起来像它。

在这种情况下，您的 servlet 将使用诸如[Comet](http://code.google.com/p/gwt-comet/)之类的推送技术将文件的状态（例如太大或已完成）发送回 UI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T20:56:28.363

那是服务器的工作。Javascript（以及因此的 Javascript 抽象，如 GWT）不允许访问正在上传的文件。服务器端应该检查文件端并抛出异常。

根据[http://www.artofsolving.com/node/50](http://www.artofsolving.com/node/50)发现错误客户端很棘手。您必须在 onSubmitComplete 事件中实际解析用于上传的 iframe 中的 html 结果。

# visual-studio-2010 - Visual Studio：预构建将目录内容添加到项目

> ID：10931636
> 
> 赞同：0
> 
> 时间：2012-06-07T12:17:14.677
> 
> 标签：visual-studio-2010, visual-studio, msbuild, projects-and-solutions

我有以下设置：

*   主网站 - MVC 3 项目，托管在 www.domain.com

*   Intranet Web App - MVC 3 项目，windows 身份验证，托管在 admin.domain.com 上，只能从本地子网内访问。

*   CDN 网站 - 一个简单的 Web 应用程序，仅向上述两者提供图像。当我们上线时，它将（公开）托管在 cdn.domain.com 上。我已经建立了一个本地项目来在开发过程中模拟 CDN。

我编写了一个业务层，允许管理面板中的用户上传图像，然后将其物理保存到配置的 CDN 路径（当前在本地计算机上，即 C:\Code\SolutionName\CDNProject\images）。然后主网站使用相同的业务层通过[http://cdn.domain.com/images/](http://cdn.domain.com/images/)查找和分发图像。[http://cdn.domain.com](http://cdn.domain.com)当前设置为`http://localhost:55555`，而我们正在开发。

每当通过管理面板创建图像时，它都是在磁盘上物理创建的。每个开发人员都在自己的机器上工作，我们希望能够暂时将这些文件签入 TFS。您可能已经猜到了，将文件添加到文件系统并不会在项目中自动引用它们：

![损坏的参考文献](../Images/cd09f04950ec36d6f22fa5baa836c274.png)

我认为可能有某种方法可以将这些图像作为资源引用，或者将目录设置为某种“内容”目录......但我找不到任何东西。

一些开发人员通过 VPN 远程工作，并且无法访问本地网络（仅 TFS），因此网络路径不是可接受的解决方案。

我想我可以设置一个预构建事件，将目录中的所有文件添加到项目中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:45:02.073

没有非常简单的方法可以做到这一点。有几种方法可以考虑：

1) 编写 VS 添加，将新文件添加到项目中（通过 DTE -[起点](http://msdn.microsoft.com/en-us/library/ms228774%28v=vs.80%29.aspx)）。了解如何在预构建步骤中自动运行此 VS 插件。将此插件安装到您的开发人员机器上。

2) 扩展您的管理逻辑，通过[TFS API自动将上传的文件签入到 TFS](http://msdn.microsoft.com/en-us/library/bb130307%28v=vs.80%29.aspx)

3) 尝试应用更复杂的技术，例如：[T4 教程：在 Visual Studio 项目中集成生成的文件](http://www.olegsych.com/2010/03/t4-tutorial-integrating-generated-files-in-visual-studio-projects/)

希望有帮助，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:21:37.837

Visual Studio 项目文件具有 XML 语法。可以在简单的文本编辑器中修改项目文件属性（添加/删除文件等）。

您可以创建一个脚本来打开您的解决方案，在实际打开解决方案之前，您可以扫描该目录并在项目文件中“注入”文件（使用适当的 XML 标记）。

我认为您不能将其添加为预构建事件，因为此时项目文件已经加载，并且在使用它们时您无法修改它们。

# android - 在 DialogPreference 中获取正按钮

> ID：10931638
> 
> 赞同：13
> 
> 时间：2012-06-07T12:17:20.420
> 
> 标签：android, android-dialog, dialog-preference

有没有办法`DialogPreference`在任何事件中获得 a 的积极按钮？

我想最初禁用它，并在`EditText`验证后启用它。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-07T14:29:08.710

只需调用

```
 (AlertDialog)dialog.getButton(AlertDialog.BUTTON_POSITIVE).setEnabled(false); 
```

但是，如果您使用的是 Dialog Builder，请确保在`builder.create()`之前和之前调用它`.show()`

然后，您可以保留对对话框的引用并在满足条件后启用按钮。

# c# - 如何确保用户提供的 url 不是本地路径？

> ID：10931642
> 
> 赞同：5
> 
> 时间：2012-06-07T12:17:42.510
> 
> 标签：c#, asp.net, .net, security

我正在编写一个 Web 应用程序（ASP.Net MVC、C#），它要求用户提供 RSS 或 Atom Feed 的 url，然后我使用以下代码阅读：

```
var xmlRdr = XmlReader.Create(urlProvidedByUserAsString);
var syndicFeed = SyndicationFeed.Load(xmlRdr); 
```

在调试我的应用程序时，我不小心`/something/like/this`作为 url 传递了一个异常，告诉我`C:\something\like\this`无法打开。

看起来用户可以提供本地路径，我的应用程序会尝试读取它。

我怎样才能使这段代码安全？检查url 的开头`https://`或开头可能是不够的，因为用户仍然可以输入类似. 有没有其他方法，也许用 uri 类来检查一个 url 是否指向网络？`http://``http://localhost/blah`

**编辑：**我想我还需要防止用户输入指向我网络上其他机器的地址，例如这个例子：`http://192.168.0.6/`或`http://AnotherMachineName/`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:25:56.263

尝试：

```
new Uri(@"http://stackoverflow.com").IsLoopback
new Uri(@"http://localhost/").IsLoopback
new Uri(@"c:\windows\").IsLoopback 
```

# html - 只是想在使用浏览器查看本地 html 时突出显示一些文本

> ID：10931647
> 
> 赞同：1
> 
> 时间：2012-06-07T12:17:51.153
> 
> 标签：html, google-chrome, browser, edit

很多可以下载的教程都有 , , 等文件类型`.chm`。`.pdf`我`.html`下载了 HTML 格式的 Java SE 的 Java SE 教程。当我使用 chrome 查看它时，一切都很好。但我只是想知道，当我使用 chrome 查看时，我怎么能直接突出显示一些有用的信息（例如文本）？html文件是本地的，我知道我可以使用一些软件来编辑它，比如使用HTML标签`<font color:>`等。

但我只想直接在浏览器中突出显示它，就像用 word 编辑它一样。有什么建议吗？chrome是否支持这种插件？如果你还是不明白我的意思，请参考“clip to evernote”，它是chrome的一个插件，可以剪切页面并上传到evernote服务器。当我使用evernote客户端阅读它们时，我可以直接突出显示一些对我有用的单词。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:47:47.080

这更像是一个超级用户的问题，但是......有很多插件可以突出显示网页。~~你可以试试 Yawas 或[Simple Highlighter](https://chrome.google.com/webstore/detail/hljnlfolmbmibdjaikiaepgepgnldclj?hl=en-GB)~~

**编辑：**好的，我想我更好地理解了你的问题...... Yawas，简单的荧光笔，以及大多数其他荧光笔，不要在本地页面上突出显示。

那么，我不确定 Chrome 是否有这样的荧光笔。我的建议是尝试使用[Amaya](http://www.w3.org/Amaya/)而不是 Chrome 打开文档。它既是 W3C 的浏览器，又是编辑器；并且由于它具有这两种功能，您可能可以在本地页面上做您想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T02:06:47.070

您可以通过单击“仅在此页面上打开一个包含亮点和注释列表的新选项卡”将其保存到您的计算机。然后您可以只将html内容以您喜欢的名称保存到您的计算机中。不要尝试使用 ALT 来保存笔记列表，因为您永远不会看到要保存的内容。

# performance - 慢速 s3 url 生成回形针

> ID：10931663
> 
> 赞同：12
> 
> 时间：2012-06-07T12:19:08.947
> 
> 标签：performance, ruby-on-rails-3, paperclip, string-interpolation

我们正在尝试优化我们的视图，并在加载了 40 张图片的页面上使用以下代码：

```
= image_tag(product.pictures.first.data.url(:gallery)) 
```

如果我们将其更改为以下代码，我们的加载时间为 840 毫秒：

```
= image_tag("http://bucketname.s3.amazonaws.com/products/#{product.pictures.first.id}/gallery.jpg?1325844462" 
```

我们的加载时间变成了 220ms。

这意味着 s3_path_url 的插值非常慢。其他人期待同样的问题吗？目前我创建了一个生成我的网址的助手：

```
def picture_url(picture, style)
  "http://bucketname.s3.amazonaws.com/products/#{picture.id}/#{style}.jpg"
end 
```

我这里唯一的问题是缓存键不存在，扩展名也不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-27T10:24:32.983

画廊页面上是否总是只显示每个产品的一张图片？

数据库中的缓存列怎么样。每当您创建或更新图像时，您都可以将此 image_url 保存为数据库中的 gallery_picture_url 并直接调用它

```
= image_tag(product.gallery_picture_url)

class Product < ActiveRecord::Base
  after_commit: :update_gallery_picture_url

  def update_gallery_picture_url
    self.update(gallery_picture_url: self.pictures.first.data.url(:gallery)) if self.gallery_picture_present?
  end

  def gallery_picture_present?
    (self.pictures.first.data.url(:gallery) rescue false).present?
  end
end 
```

# c# - 在 Gridview 中使用匿名类型

> ID：10931673
> 
> 赞同：1
> 
> 时间：2012-06-07T12:19:47.160
> 
> 标签：c#, asp.net, asp.net-ajax

我想使用匿名类型作为 GridView 的源。但它会首先使用下拉列表进行过滤。让我解释一下：我有一个我定义如下的类型：

```
 IEnumerable<object> data = new[]{
    new{Name="McClure Wallace", Id=1, Sal=10000d, Age=29}, 
    new{Name="John Jones", Id=2, Sal=12000d, Age=27}, 
    new{Name="Gloria Flowhart", Id=3,Sal=14000d, Age=21}
            . . .
    }; 
```

我使用它作为下拉列表的来源：

```
 ddlEmployee.DataSource=data;
    ddlEmployee.DataTextField = "Name";
    ddlEmployee.DataValueField = "Id";
    ddlEmployee.DataBind(); 
```

当用户从列表中选择一个项目时，我想获取相应的对象并将其绑定到 Gridview 中：

```
 var sel = ddlEmployee.SelectedItem.ToString();

   var selData = from d in data where **d.Id= sel** select d;
   gvSearchResults.DataSource = selData;
   gvSearchResults.DataBind(); 
```

但问题是，由于我将 d 作为对象，它会在 d.Id 上引发错误。

我怎样才能解决这个问题。请注意，我可能无法更改“数据”的定义，因为这是在应用程序外部控制的。我在这里只是为了清楚起见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T12:28:04.867

您的问题是您正在使用`Enumerable<object>`. 当您进行 LINQ 查询时，它会说这`Id`不是`object`

试试这个

```
var data = new[]{
new{Name="McClure Wallace", Id=1, Sal=10000d, Age=29}, 
new{Name="John Jones", Id=2, Sal=12000d, Age=27}, 
new{Name="Gloria Flowhart", Id=3,Sal=14000d, Age=21}
        . . .
}; 
```

另外，我不知道`d.Id= sel`您是否拥有什么（除了`*`）。如果是这种情况，您需要更改几件事

1)`sel`是 a`string`所以你需要把它转换成`int`

2）你需要用来`==`比较

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:24:31.410

您可以使用“动态”数据类型，所以这样的工作：

```
 dynamic data = new[]{
           new{Name="McClure Wallace", Id=1, Sal=10000d, Age=29}, 
           new{Name="John Jones", Id=2, Sal=12000d, Age=27}, 
           new{Name="Gloria Flowhart", Id=3,Sal=14000d, Age=21}
        };

        Console.WriteLine(data[0].Name); 
```

这会对你有帮助吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T13:19:56.100

首先，你想`sel`成为那个`SelectedValue`，而不是那个`SelectedItem`（这样你就可以得到你的子句的`id`属性）。`where`您还希望它是一个 int，以便您可以将其与`id`LINQ 查询中的进行比较：

```
int sel = int.Parse(ddlEmployee.SelectedValue); 
```

接下来，您可以将您的设置`IEnumerable`为`dynamic`类型化对象，以避免您提到的编译器错误：

```
IEnumerable<dynamic> data = new[]{
                                    new{Name="McClure Wallace", Id=1, Sal=10000d, Age=29}, 
                                    new{Name="John Jones", Id=2, Sal=12000d, Age=27}, 
                                    new{Name="Gloria Flowhart", Id=3,Sal=14000d, Age=21}
                                }; 
```

最后（[正如 Caludio 所说](https://stackoverflow.com/a/10931803/)），您确实希望`==`在 LINQ 查询中使用运算符：

```
var selData = from d in data where d.Id == sel select d; 
```

此时，您`DataBind()`应该可以正常运行。

# ruby-on-rails - Rails：设计 - 用户编辑没有生成我期望的 HTML

> ID：10931677
> 
> 赞同：1
> 
> 时间：2012-06-07T12:20:06.693
> 
> 标签：ruby-on-rails, devise

这是我的 users/edit.html/erb 中的内容

```
<%= form_for(resource, :as => resource_name, :url => user_path(resource_name), :html => { :method => :put }) do |f| %> 
```

我的用户路线：

```
 edit_user GET    /users/:id/edit(.:format)      users#edit
                user GET    /users/:id(.:format)           users#show
                     PUT    /users/:id(.:format)           users#update 
```

method => put，所以使用路由信息，我期望 HTML 动作是 /users/:id

这是 users/edit.html.erb，我希望来自 id 的 HTML 是 edit_user_id，类是 edit_user

这是显示表单时我在 HTML 中实际得到的内容（使用 firebug）：

```
<form id="new_user" class="new_user" method="post" action="/users/user" accept-charset="UTF-8"> 
```

HTML不应该是（假设用户ID为1）：

```
<form id="edit_user_1" class="edit_user" method="post" action="/users/1" accept-charset="UTF-8"> 
```

在我的 routes.rb 文件中，我有：

```
resources :users, only: [:show, :edit, :update]
devise_for :users, :controllers => { :registrations => 'registrations', :confirmations => 'confirmations' }, :path => '', :path_names => { :sign_in => "login", :sign_up => "request_invite" } 
```

## 编辑 - 对维克多评论的回应：

我确实将用户帮助更改为：

```
def resource
  @resource ||= User.find(params[:id])
end 
```

因此，根据 API 文档，这也应该选择 /users/:id 作为一个动作，因此，HTML 现在应该如下所示：

```
<form id="edit_user_1" class="edit_user" method="post" action="/users/1" accept-charset="UTF-8"> 
```

相反，它是：

```
<form id="edit_user" class="edit_user" method="post" action="/users/user" accept-charset="UTF-8"> 
```

因此，当用户控制器开始行动时，会触发以下代码：

```
def update
  @user = User.find(params[:id]) 
```

并且它认为（从表单的操作），我传递的 id 是用户这个词，所以当我点击更新时，我期望收到以下错误消息：

找不到 id=user 的用户

这正是我得到的错误。任何额外的见解？

# 最终答案：

在 users_helper.rb 中：

```
def resource
  @resource ||= User.find(params[:id])
end 
```

在 users/edit.html.erb 中

资源名称, :html => { :method => :put }) 做 |f| %>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:58:20.593

简短的回答是：这取决于您认为资源的价值。

[http://apidock.com/rails/v3.2.3/ActionView/Helpers/FormHelper/apply_form_for_options](http://apidock.com/rails/v3.2.3/ActionView/Helpers/FormHelper/apply_form_for_options)！form 的 id 和类由 dom_id 和 dom_class 助手生成，'action' 前缀是 'edit' 而不是 'new' 当且仅当：

```
object.respond_to?(:persisted?) && object.persisted? 
```

对于 activerecord 对象，当且仅当该对象曾经被保存到 db 时才计算为 true。

# rspec2 - FakeWeb::NetConnectNotAllowedError

> ID：10931683
> 
> 赞同：1
> 
> 时间：2012-06-07T12:20:37.220
> 
> 标签：rspec2, fakeweb, vcr

我正在尝试测试我的应用程序和遥控器。我使用 Rails 3.2 和最新版本的 vcr 和 fakeweb。实际上我看过[RailsCast](http://railscasts.com/episodes/291-testing-with-vcr)，现在我想做反测试，但我做不到。

我的请求测试文件；

```
require "spec_helper"

describe "ZipCodeLookup" do
  it "show Beverly Hills given 90210", :vcr do
    visit root_path
    fill_in "zip_code", with: "90210"
    click_on "Lookup"
    page.should have_content("Beverly Hills")

  end

  it "any errors" do
    visit root_path
    fill_in "zip_code", with: "9"
    click_on "Lookup"
    page.should have_content("Nomethods")
  end
end 
```

不要卡在 page.should 行。我只是尝试了如何进行反测试。

和我的模型；

```
class ZipCode
  attr_reader :state, :city, :area_code, :time_zone

  def initialize(zip)
    client = Savon::Client.new("http://www.webservicex.net/uszip.asmx?WSDL")
    response = client.request :web, :get_info_by_zip, body: { "USZip" => zip }
    data = response.to_hash[:get_info_by_zip_response][:get_info_by_zip_result][:new_data_set][:table]
    @state = data[:state]
    @city = data[:city]
    @area_code = data[:area_code]
    @time_zone = data[:time_zone]
  end
end 
```

我运行时的错误`bundle exec rspec spec/requests/zip_code_lookup_spec.rb`

```
Ender-iMac:zip_coder-after ender$ bundle exec rspec spec/requests/zip_code_lookup_spec.rb 
HTTPI executes HTTP GET using the net_http adapter
SOAP request: http://www.webservicex.net/uszip.asmx
SOAPAction: "http://www.webserviceX.NET/GetInfoByZIP", Content-Type: text/xml;charset=UTF-8, Content-Length: 389
<?xml version="1.0" encoding="UTF-8"?><env:Envelope xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:web="http://www.webserviceX.NET" xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ins0="http://www.webserviceX.NET"><env:Body><ins0:GetInfoByZIP><ins0:USZip>90210</ins0:USZip></ins0:GetInfoByZIP></env:Body></env:Envelope>
HTTPI executes HTTP POST using the net_http adapter
SOAP response (status 200):
<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body><GetInfoByZIPResponse xmlns="http://www.webserviceX.NET"><GetInfoByZIPResult><NewDataSet xmlns=""><Table><CITY>Beverly Hills</CITY><STATE>CA</STATE><ZIP>90210</ZIP><AREA_CODE>310</AREA_CODE><TIME_ZONE>P</TIME_ZONE></Table></NewDataSet></GetInfoByZIPResult></GetInfoByZIPResponse></soap:Body></soap:Envelope>
.HTTPI executes HTTP GET using the net_http adapter
F

Failures:

  1) ZipCodeLookup any errors
     Failure/Error: click_on "Lookup"
     FakeWeb::NetConnectNotAllowedError:
       Real HTTP connections are disabled. Unregistered request: GET http://www.webservicex.net/uszip.asmx?WSDL.  You can use VCR to automatically record this request and replay it later.  For more details, visit the VCR documentation at: http://relishapp.com/myronmarston/vcr/v/1-11-3
     # ./app/models/zip_code.rb:6:in `initialize'
     # ./app/controllers/zip_code_lookup_controller.rb:3:in `new'
     # ./app/controllers/zip_code_lookup_controller.rb:3:in `index'
     # (eval):2:in `click_on'
     # ./spec/requests/zip_code_lookup_spec.rb:15:in `block (2 levels) in <top (required)>'

Finished in 0.17138 seconds
2 examples, 1 failure

Failed examples:

rspec ./spec/requests/zip_code_lookup_spec.rb:12 # ZipCodeLookup any errors 
```

我不明白为什么 VCR 不能在不同的状态下运行相同的 HTTP 请求。

如何以反测试方式进行测试？

**解决方案**

抱歉，这是我的错误：（我忘了在“it”描述行中写：vcr。应该是这样的

```
it "any errors", :vcr do
    visit root_path
    fill_in "zip_code", with: "9"
    click_on "Lookup"
    page.should have_content("Nomethods")
end 
```

# java - 使用TestSuite时，我可以避免在eclipse中运行两次junit测试吗？

> ID：10931684
> 
> 赞同：16
> 
> 时间：2012-06-07T12:20:39.170
> 
> 标签：java, eclipse, junit, junit4

我需要对每个套件进行一些初始化（启动网络服务器）。它工作正常，除了当我在 eclipse 中运行我的项目中的所有测试时，我的测试运行了两次。我的测试套件看起来有点像这样：

```
@RunWith(Suite.class)
@Suite.SuiteClasses({
   SubtestOne.class,
   SubtestTwo.class
})
public class TestSuite
{
   [...]
}

public class SubtestOne
{
   @Test public void testOne() { [...] }
}

public class SubtestTwo
{
   @Test public void testTwo() { [...] }
} 
```

当我在 eclipse 中运行项目中的所有测试时，这会导致 junit 插件像这样运行测试两次：

*   子测试一
*   子测试二
*   测试套件
    *   子测试一
    *   子测试二

是否可以让“运行项目中的所有测试”不运行子测试两次？我希望我的子测试只作为套件的一部分运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T12:29:04.410

不，测试类将始终直接启动，然后通过套件中的“链接”启动。这正如预期的那样。

一种解决方法可能是在运行配置中设置为仅从包含您的套件的包中运行测试。打开运行配置并选择`Run all tests in the selected project, package or source folder`然后单击`Search...`并选择包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-01T18:46:25.190

你首先需要套房吗？根据您单击“全部运行”（类、包或 src/test/java）的时间，将执行所有底层测试。那么拥有套房有什么意义呢？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-26T07:51:36.217

我意识到这在 5 年前就已经被问过了，但是由于很多人对这个问题投了赞成票，我认为我仍然会提出解决方案。如果您只想要解决方案，请直接跳到最后；如果您也想理解它，请阅读全文；-)

首先，确实可以确保特定的 JUnit 测试类只在测试套件内运行。此外，您是否想在 Eclipse（如此处所问）或任何其他工具或环境中运行该测试套件也无关紧要；这在很大程度上是一个纯粹的 JUnit 问题。

在我勾勒出解决方案之前，重新审视一下这里的确切问题可能是个好主意。所有 JUnit 测试都需要是可见的和可实例化的，以便 JUnit 框架及其各种运行程序能够获取。这也适用于测试套件和作为测试套件一部分的各个测试。因此，如果 JUnit 选择了测试套件，它也会选择单独的测试，并且套件中的所有测试都将执行两次，一次单独执行，一次作为套件的一部分执行。

所以，如果你愿意的话，诀窍是防止 JUnit 拾取单个测试，同时仍然能够将它们作为套件的一部分进行实例化和执行。

想到的一件事是使测试类成为嵌套在测试套件中的静态内部类。但是，嵌套类仍然需要是公共的（否则它们也不能在套件中运行），如果它们是公共类，它们也会被单独拾取，尽管它们嵌套在套件的公共类中。不过，JUnit 不会尝试运行不可见的测试类。因此，将测试类嵌套在非公共类中可能足以隐藏它们，但我们不能将套件类设为非公共类，因为 JUnit 不会执行它。然而，我们可以做的是将各个测试嵌套在另一个嵌套在测试套件中的非公共类中，这导致我们解决了这个难题：

```
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.Suite;
import org.junit.runners.Suite.SuiteClasses;

@RunWith(Suite.class)
@SuiteClasses({AllTests.InSuiteOnly.Test1.class, AllTests.InSuiteOnly.Test2.class})
public class AllTests
{
    static class InSuiteOnly
    {
        public static class Test1
        {
            @Test
            public void test1()
            {
                //...
            }
        }

        public static class Test2
        {
            @Test
            public void test2()
            {
                //...
            }
        }
    }
} 
```

很多人可能会反对现在需要在单个源文件中进行的所有测试。如果我想维护单独的 JUnit 测试类，这些测试类不会自行执行但仍会在测试套件中执行，该怎么办？一个简单的解决方案是使各个测试类抽象（公共/非公共无关紧要），以便 JUnit 不会执行它们，并且在测试套件中，我们只需使用原始抽象测试类的具体子类：

```
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.Suite;
import org.junit.runners.Suite.SuiteClasses;

@RunWith(Suite.class)
@SuiteClasses({AllTests.InSuiteOnly.SuiteTest1.class, AllTests.InSuiteOnly.SuiteTest2.class})
public class AllTests
{
    static class InSuiteOnly
    {
        public static class SuiteTest1 extends Test1 {}
        public static class SuiteTest2 extends Test2 {}
    }
}

abstract class Test1
{
    @Test
    public void test1()
    {
        //...
    }
}

abstract class Test2
{
    @Test
    public void test2()
    {
        //...
    }
} 
```

此方案适用于 Maven、Eclipse 和所有其他直接利用 JUnit 运行器或实现自己的运行器的环境，这些运行器密切遵循 JUnit 的原始行为和语义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T12:35:58.260

我有一个想法给你。实际上，您不想将这些测试用例作为独立的测试用例运行。您可以执行以下操作。

用注解标记测试用例`@RunWith(DoNothingRunner.class)`

实现 DoNothingRunner 如下：

```
public class DoNothingRunner extends Runner {
    public Description getDescription() {
              return "do nothing";
        }
    public void run(RunNotifier notifier) {
            // indeed do nothing
        }
} 
```

我没有亲自尝试过，但我希望这会奏效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-12-04T06:56:24.743

有一个解决方案，它有点棘手，但它可以轻松解决您的问题：创建一个套件类，并将您的所有套件类包含在其中。然后你可以使用这个套件类来运行你所有的测试。

```
@RunWith(Suite.class)
@Suite.SuiteClasses({
    AXXSuite.class,
    BXXSuite.class,
    CXXSuite.class
})
public class AllSuites {    

} 
```

# wcf - WCF 绑定查询 TCP VS HTTP

> ID：10931686
> 
> 赞同：0
> 
> 时间：2012-06-07T12:20:52.620
> 
> 标签：wcf

你什么时候真正使用 TCP 作为绑定元素，什么时候使用 HTTP？我想知道场景和性能问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T12:28:47.710

与 http 相比，TCP 必须更快。甚至 tcp 也更加安全可靠。

有关更多详细信息，请参阅[http://msdn.microsoft.com/en-us/library/ms733769.aspx](http://msdn.microsoft.com/en-us/library/ms733769.aspx)。

实际上选择绑定取决于许多因素，阅读上面的文章将使您更深入地了解。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T12:41:53.400

TCP 将比 Http 发送更少的“无价值”数据。Http在序列化的时候会添加很多数据。

您可以在本地网络或 vpn 中使用 TCP。

在这里您可以看到如何在这些绑定之间进行选择的图表：http: [//bloggingabout.net/blogs/dennis/archive/2006/12/01/WCF-Binding-decision-chart.aspx](http://bloggingabout.net/blogs/dennis/archive/2006/12/01/WCF-Binding-decision-chart.aspx)

# excel - MSExcel 使用 MCONCAT 在一个单元格中返回唯一值

> ID：10931688
> 
> 赞同：0
> 
> 时间：2012-06-07T12:21:11.263
> 
> 标签：excel

我正在使用 MCONCAT（morefunc Excel 插件包的一部分）从数据列表中提取唯一匹配项，我的代码如下：

```
=MCONCAT(UNIQUEVALUES(OFFSET(B$1,MATCH(D2,A$2:A$68761,0),,COUNTIF(A$2:A$68761,D2))),", ") 
```

如果有多个结果，这一切都可以正常工作，否则它似乎不起作用。它确实可以在不使用 UNIQUEVALUES 的情况下工作，但会为某些行返回大量结果。

```
=MCONCAT(OFFSET(B$1,MATCH(D8,A$2:A$68761,0),,COUNTIF(A$2:A$68761,D8)),", ") 
```

有谁知道如何使我的第一个查询适用于只有一个匹配的行？

非常感谢，

乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:23:25.490

这里发生的是 UNIQUEVALUES 函数需要传递一个“数组”，并且在大多数情况下 OFFSET 会这样做.....除非 COUNTIF = 1 并且 OFFSET 只是一个值（不是包含一个值的数组）并且 UNIQUEVALUES 不喜欢这样，因此返回错误。我不知道一个特别优雅的方法，也许只是在出现错误时将 VLOOKUP 构建到公式中，即

`=IFERROR(MCONCAT(UNIQUEVALUES(OFFSET(B$1,MATCH(D2,A$2:A$68761,0),,COUNTIF(A$2:A$68761,D2))),", "),VLOOKUP(D2,A$2:B$68761,2,0))`

# php - 与准备好的陈述作斗争

> ID：10931689
> 
> 赞同：1
> 
> 时间：2012-06-07T12:21:14.427
> 
> 标签：php, pdo, prepared-statement

我无法进行以下工作。我想在下面的示例中使用准备好的语句，但出现错误。函数明确地在 $array 中传递了正确的值：

```
 private function getInfoFromSystem($array) {
        try {
            $sql = "
                SELECT     
                    PCO_AGENT.NAME, 
                    PCO_INBOUNDLOG.LOGIN AS LOGINID, 
                    PCO_INBOUNDLOG.PHONE AS CALLERID, 
                    PCO_INBOUNDLOG.STATION AS EXTEN, 
                    PCO_INBOUNDLOG.TALKTIME AS CALLLENGTH, 
                    PCO_INBOUNDLOG.CHANNELRECORDID AS RECORDINGID, 
                    PCO_SOFTPHONECALLLOG.RDATE, 
                    PCO_INBOUNDLOG.RDATE AS INBOUNDDATE
                FROM         
                    PCO_INBOUNDLOG 
                INNER JOIN
                      PCO_LOGINAGENT ON PCO_INBOUNDLOG.LOGIN = PCO_LOGINAGENT.LOGIN 
                INNER JOIN
                      PCO_SOFTPHONECALLLOG ON PCO_INBOUNDLOG.ID = PCO_SOFTPHONECALLLOG.CONTACTID 
                INNER JOIN
                      PCO_AGENT ON PCO_LOGINAGENT.AGENTID = PCO_AGENT.ID
                WHERE
                    LOGINID = :extension
            ";
            $arr = array(":extension" => $array['extension']);
            $query = $this->mssql->prepare($sql);
            $query->execute($arr);
           // $sql = "select * from sys.messages where message_id = 229";
            foreach($this->mssql->query($sql) as $row) {

                echo "<pre>";
                print_r($row);
                echo "</pre>";
            }

        }
        catch(PDOException $e) {
            echo $e->getMessage();
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:27:49.880

你不应该在`query()`之后打电话`execute()`。相反[，你需要`fetch()`你的行](http://us3.php.net/manual/en/pdostatement.fetch.php)：

```
$query = $this->mssql->prepare($sql);
$query->execute($arr);

while ($row = $query->fetch(PDO::FETCH_ASSOC)) {
  echo "<pre>";
  print_r($row);
  echo "</pre>";
}

// OR rather than the fetch loop above, use fetchAll()
$rowset = $query->fetchAll(PDO::FETCH_ASSOC);
print_r($rowset); 
```

`execute()`根据我使用 PDO + MSSQL 的经验，在调用返回行的语句后尝试立即调用常规查询将失败，除非您先调用`$query->closeCursor()`。但是，在这种情况下，您根本不应该打电话`query()`。您已经使用绑定参数执行了语句，只需要从中获取行。

# ios - 将 NSObject 类中的值传递回 UIViewController

> ID：10931695
> 
> 赞同：0
> 
> 时间：2012-06-07T12:21:34.550
> 
> 标签：ios, objective-c, cocoa-touch, methods, uiviewcontroller

我不知道为什么这如此困难，但我无法让它发挥作用。这是我的基本流程：

我有一个带有子视图 UIView 的 UIViewController，它本身有一个子视图 UIButton。单击该按钮会实例化一个名为 TwitterController 的 NSObject 的新实例，为 twitter 提要创建一个 NSURL，然后将控制权交给 TC 以执行 URLConnection 并序列化返回的数据。

这是 ViewController 中的相关代码（Pruit_Igoe 是我，尽管我没有发布太多内容，但请随意关注：D）：

```
- (void) getTwitter {

//load new manager
twitterManager = [TwitterController new];
[twitterManager showTwitterFeed:vTwitterFeed:self];

NSURL* twitterFeedPath = [NSURL URLWithString: @"http://api.twitter.com/1/statuses/user_timeline.json?screen_name=Pruit_Igoe"];

[twitterManager getTwitterFeed:twitterFeedPath];

//toggle the twitter view
[self toggleView:vTwitterFeed];
[self toggleView:vContactCard];

} 
```

*   showTwitterFeed 转储视图 vTwitterFeed 中的对象（用于关闭视图、图像等的按钮）
*   getTwitterFeed 开始 NSURLConnection 进程

在 TwitterController 中，我获取 twitter 提要并在此处处理它：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)theConnection  {

//do something with the data!
NSError *e = nil;
//parse the json data
NSArray *jsonArray = [NSJSONSerialization JSONObjectWithData: receivedData options: NSJSONReadingMutableContainers error: &e];

//dump it into an array
tweetArray = [[NSMutableArray alloc] init];

for(NSDictionary* thisTweetDict in jsonArray) { 

    NSString* tweet = [thisTweetDict objectForKey:@"text"];
    [tweetArray addObject:tweet];
}

} 
```

这一切都很好，记录 tweetArray 和所有文本都在那里，记录 thisTweetDict 和 Twitter 发回的所有大量数据都在那里。问题是我想将 tweetArray 传递回 ViewController 但我似乎不知道如何去做。

我做了以下事情：

尝试从 getTwitterFeed 返回 TweetArray 但它返回为空（我的猜测是该方法在连接完成之前返回了数组）

试图把它放在 UserDefaults 但我一直为空（与上面的猜测相同，但后来我把它放在 connectionDidFinish 中并且仍然为空）

试图将 ViewController 的引用传递给 TwitterController，然后在 VC 中调用一个方法将数组传递给但在 TwitterController 中我出错了，因为它说我的 VC 实例无法识别选择器。（它在那里，我已经检查了三次）。

我确信这很简单，我只是很密集，但有人可以帮我解决这个问题吗？

编辑：这是我尝试将其传递回 VC 的方式：

我会使用这种方法将 VC 传递给 TC（这是在 VC 中）

```
[twitterManager showTwitterFeed:vTwitterFeed:self]; 
```

在 VC.h 我有一个 UIViewController* thisViewController

在 VC.m 中的 showTwitterFeed 中：

```
- (void) showTwitterFeed : (UIView* ) theTwitterView :  (UIViewController* ) theViewController {

    thisViewController = theViewController;

    //...other code to build view objects 
```

然后在

```
- (void)connectionDidFinishLoading:(NSURLConnection *)theConnection { 

...

for(NSDictionary* thisTweetDict in jsonArray) { 

    NSString* tweet = [thisTweetDict objectForKey:@"text"];
    [tweetArray addObject:tweet];
}

[thisViewController getTwitterFeed:tweetArray]; //<--this would error out saying selector not available 
```

回到 VC.h

```
- (void) getTwitterFeed : (NSArray* ) theTwitterFeed; 
```

在 VC.m 中

```
- (void) getTwitterFeed : (NSArray* ) theTwitterFeed { 

    NSLog(@"%@", theTwitterFeed);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:40:26.443

您得到一个无法识别的选择器，因为`thisViewController`它的类型`UIViewController`没有定义此方法（尽管从您发布的代码中看不到它，但我绝对确定这是这种情况，因为您在分配时会遇到编译错误 `thisViewController = theViewController`并且`theViewController`type is `UIViewController`）

因此，将`thisViewController`类型更改为您的自定义视图控制器并更改签名

`(void) showTwitterFeed : (UIView* ) theTwitterView : (UIViewController* ) theViewController`

成为 ：

`(void) showTwitterFeed : (UIView* ) theTwitterView : (<Your custom controller type>* ) theViewController`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:23:11.823

您无法从其返回它，`getTwitterFeed`因为`connectionDidFinishLoading`尚未调用它。

您需要做的是在您的中设置一个协议，`TwitterController`并使您`ViewController`的.`delegate``TwitterController`

然后，当`connectionDidFinishLoading`发生并保存 twitter 信息时，您可以将该函数调用回您的`delegate`( `ViewController`)。

创建一个`twitterDataReceived:(NSDictionary *)tweetDict`在`TwitterController`协议中调用的函数并在`connectionDidFinishLoading`函数中调用它：`[self.delegate twitterDataReceived:thisTweetDict];` 或者，如果您只想发送文本`twitterTextReceived:(NSString *)theTweet`，请调用`[self.delegate twitterTextReceived:tweet];`或使用数组，例如`twitterArrayReceived:(NSArray *)tweetArray`and `[self.delegate twitterArrayReceived:tweetArray];`，或者您想要发回的任何内容。

如果您不熟悉设置协议和委托，有很多问题可以帮助您，例如：[objective-c 协议委托](https://stackoverflow.com/questions/7314099/protocol-delegate-question)

# php - 嵌套 SMARTY 对象跨实例访问变量

> ID：10931697
> 
> 赞同：1
> 
> 时间：2012-06-07T12:21:40.177
> 
> 标签：php, smarty, template-engine

我正在尝试以一种平滑可维护的方式将模板的几个阶段融合在一起。我有一个外部页面，其中实例化了一个 smarty 对象，其中包括另一个实例化不同 smarty 对象的 php 页面。我的问题是是否有任何方法可以在外部实例中分配变量并在内部实例中访问它。

示意性地，我正在调用 page.php：

```
<?php
$tpl = new Smarty();
$tpl->assign("a","Richard");
$tpl->register_function('load_include', 'channel_load_include');
$tpl->display("outer_template.tpl");
function channel_load_include($params, &$smarty) {
    include(APP_DIR . $params["page"]);
}
?> 
```

外部模板.tpl：

```
<div> {load_include page="/otherpage.php"} </div> 
```

其他页面.php：

```
<?php
$tpl2=new Smarty();
$tpl2->assign("b","I");
$tpl2->display("inner_template.tpl");
?> 
```

inner_template.tpl：

```
<span id="pretentiousReference"> "Richard loves {$a}, that is I am {$b}" </span> 
```

我看到：“理查德爱，那就是我就是我”

有没有办法从内部实例访问外部实例的变量，或者我应该把它转储进去`$_SESSION`并用`{php}`标签拉出来？显然我的应用程序稍微复杂一点，但这暴露了我认为的核心问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:12:24.477

您可以构建 smarty / template / data 实例链，以使不同实例可以访问数据。

将 Smarty 实例分配为另一个实例的父级：

```
$outer = new Smarty();
$outer->assign('outer', 'hello');
$inner = new Smarty();
$inner->parent = $outer;
$inner->assign('inner', 'world');
$inner->display('eval:{$outer} {$inner}'); 
```

或者，您可以提取数据：

```
$data = new Smarty_Data();
$data->assign('outer', 'hello');
$outer = new Smarty();
$outer->parent = $data;
$inner = new Smarty();
$inner->parent = $data;
$inner->assign('inner', 'world');
$inner->display('eval:{$outer} {$inner}'); 
```

都输出“hello world”

# mysql - mysql 在哪里匹配

> ID：10931701
> 
> 赞同：2
> 
> 时间：2012-06-07T12:21:45.397
> 
> 标签：mysql, match, where, against

我遇到了 mysql 和 MATCH AGANIST 的问题。

我的数据库中有这一行：

```
1:{Czy jesteśmy tutaj sami};2:{Margit Sanoemo} 
```

我想通过以下查询找到这个：

```
SELECT * FROM data WHERE MATCH (params) AGAINST('*argi*' IN BOOLEAN MODE) 
```

但我有一个空行。

但是使用此查询：

```
SELECT * FROM dataWHERE MATCH (params) AGAINST('margi*' IN BOOLEAN MODE) 
```

我得到我想要的。

你能帮我在 params 中使用双 ** 吗？ `AGAINST('*argi*' IN BOOLEAN MODE)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T13:01:33.293

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:40:11.313

不要将变量嵌入到双引号字符串中，您将被设置：

`SELECT * FROM " . $table .` `WHERE MATCH (message) AGAINST ('%" . $string . "%' IN BOOLEAN MODE)`

# java - 如何删除静态资源的 Orchestra 会话上下文参数？

> ID：10931702
> 
> 赞同：2
> 
> 时间：2012-06-07T12:21:46.923
> 
> 标签：java, jsf, myfaces, orchestra

为了提供正确的浏览器缓存，我想去掉`conversationContext`Apache MyFaces Orchestra 添加到每个请求的参数，用于对 css 文件的请求。

正如[Bozho](https://stackoverflow.com/questions/1883048/removing-myfaces-orchestras-conversationcontext-get-parameter-from-static-res)建议的那样，我已经实现了一个过滤器来设置 Orchestra 正在寻找的属性。

```
public class ResourceFilter implements Filter {

@Override
public void doFilter(ServletRequest request, ServletResponse theResponse, FilterChain theChain) throws IOException, ServletException {
    if(shouldNotAppendConversation(request)) {
        request.setAttribute(RequestParameterServletFilter.REQUEST_PARAM_FILTER_CALLED, Boolean.TRUE);
    }

    theChain.doFilter(request, theResponse);
}

private boolean shouldNotAppendConversation(ServletRequest theRequest) {
    HttpServletRequest aRequest = (HttpServletRequest) theRequest;
    String aPath = aRequest.getRequestURI();
    if(aPath.endsWith(".css.jsf")) {
        return true;
    }

    return false;
}

@Override
public void init(FilterConfig theFilterConfig) throws ServletException {
}

@Override
public void destroy() {
}
} 
```

这不起作用，参数仍然附加到每个请求。在调试时，我发现过滤器首先受到对 jsf 站点的请求的影响。当然，我想`conversation context`在该请求中包含 ，因此过滤器将请求直接转发到链中的下一个过滤器。命中过滤器的下一个请求（通常是对 css 文件的请求）已经`conversation context`包含在请求中。

奇怪的是，如果我将过滤器修改为**始终**设置属性，则所有请求都不会具有该`conversation context`属性。但这意味着，`conversation context`jsf 站点的请求中也不包含（但应该）。

我注意到 jsf 站点生成的 html 中指向 css 文件的链接也包含该`conversation context`属性或不包含该属性，具体取决于过滤器实现。我猜出于这个原因，第二个请求已经包含了`conversation context`参数？

我不明白为什么 Orchestra 将`conversation context`参数附加到每个请求，而不仅仅是未设置属性的请求。

如何实现过滤器以正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T23:36:47.053

在对您的页面的请求之后点击您的过滤器的下一个请求（例如，对于 CSS 文件）已经`conversationContext`包含该参数，因为这是该资源的 url 在上一个请求中的页面已呈现的方式。

所以`conversationContext`应该在渲染时进行控制。以下解决方案适用于 JSF 2（我使用的是 Mojarra 2.1.11、myfaces-orchestra-core20 1.5、RichFaces 4.1.0.Final）。一个特殊的 servlet 过滤器什么都不做，只是`HttpServletResponse`用我们自己的包装器进行包装：

```
public class RfOrchestraParamControlFilter implements Filter {
   ...
   @Override
   public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
      response = new RfOrchestraParamControlResponseWrapper((HttpServletResponse)response);
      chain.doFilter(request, response);
   }
   ...
} 
```

响应包装器测试要编码的 url 是否为[richfaces 资源](https://stackoverflow.com/questions/7981124/web-filter-blocking-richfaces)`ConversationRequestParameterProvider`，并在编码时在当前线程中打开 Orchestra 的分离模式：

```
package ...
import javax.faces.application.ResourceHandler;
import org.richfaces.resource.ResourceHandlerImpl;
import org.apache.myfaces.orchestra.conversation.ConversationRequestParameterProvider;

public class RfOrchestraParamControlResponseWrapper extends HttpServletResponseWrapper {

   public RfOrchestraParamControlResponseWrapper(HttpServletResponse httpServletResponse) {
      super(httpServletResponse);
   }

   @Override
   public String encodeURL(String url) {
      if (url.contains(ResourceHandler.RESOURCE_IDENTIFIER) || url.contains(ResourceHandlerImpl.RICHFACES_RESOURCE_IDENTIFIER)) {
         boolean current = ConversationRequestParameterProvider.isInSeparationMode();
         /* Disable conversationContext parameter in current thread for the time of rendering link to a resource */
         ConversationRequestParameterProvider.setInSeparationMode(true);

         String result = super.encodeURL(url);

         /* Restore */
         ConversationRequestParameterProvider.setInSeparationMode(current);
         return result;
      }
      else return super.encodeURL(url);
   }

} 
```

（我不得不使用`String.contains()`而不是`String.startsWith()`在测试作为资源的 url 作为上下文路径和 servlet 路径恰好在传递的 url 之前。）

然而，此时此刻这也无济于事。原因是 Orchestra 使用它自己的响应包装，它发生在它的 中`RequestParameterFacesContextFactory`，并且这种包装发生*在*我们的过滤器被命中之后。通过这种方式，Orchestra 的包装器在我们的包装器外部，这导致我们的包装器接收`url`得太晚，此时 url 已经被拦截和`conversationContext`附加。

为了避免这种情况，我们有一种方法可以通过替换拦截器的效果来使我们的响应包装器在管弦乐队的响应包装器之外，而`RequestParameterFacesContextFactory`拦截器`RequestParameterServletFilter`实际上使用它[来完成相同的工作](https://stackoverflow.com/questions/1883048/removing-myfaces-orchestras-conversationcontext-get-parameter-from-static-res)。不幸的是，在我们可能不使用的地方使用另一个过滤器并不是很精致，但到目前为止我还没有看到另一种方法。

因此，在管弦乐队的过滤器*之后*`web.xml`放置您的过滤器：

 *```
<filter>
   <filter-name>requestParameterFilter</filter-name>
   <filter-class>org.apache.myfaces.orchestra.requestParameterProvider.RequestParameterServletFilter</filter-class>
</filter>
<filter>
   <filter-name>myOrchestraFilter</filter-name>
   <filter-class>mypkg.RfOrchestraParamControlFilter</filter-class>
</filter>

<filter-mapping>
   <filter-name>requestParameterFilter</filter-name>
   <servlet-name>Faces Servlet</servlet-name>
</filter-mapping>
<filter-mapping>
   <filter-name>myOrchestraFilter</filter-name>
   <servlet-name>Faces Servlet</servlet-name>
</filter-mapping> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-27T01:38:08.397

无法使以前的解决方案起作用。我是这样做的：

```
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URISyntaxException;
import java.net.URL;
import java.util.List;
import java.util.stream.Collectors;

import javax.faces.application.ResourceHandler;
import javax.servlet.Filter;
import javax.servlet.FilterChain;
import javax.servlet.FilterConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpServletResponseWrapper;

import org.apache.http.NameValuePair;
import org.apache.http.client.utils.URIBuilder;

/**
 * @author Felipe Riccetto
 */
public class RemoveConversationParamFilter implements Filter {

    public static String removeQueryParameter(final String url,
            final String parameterName) throws URISyntaxException {
        URIBuilder uriBuilder = new URIBuilder(url);
        List<NameValuePair> queryParameters = uriBuilder.getQueryParams()
                .stream().filter(p -> !p.getName().equals(parameterName))
                .collect(Collectors.toList());
        if (queryParameters.isEmpty()) {
            uriBuilder.removeQuery();
        } else {
            uriBuilder.setParameters(queryParameters);
        }
        return uriBuilder.build().toString();
    }

    @Override
    public void destroy() {
        // nothing
    }

    @Override
    public void doFilter(final ServletRequest req, ServletResponse resp,
            FilterChain chain) throws IOException, ServletException {

        HttpServletResponse resp2 = new HttpServletResponseWrapper(
                (HttpServletResponse) resp) {
            @Override
            public String encodeURL(String url) {

                String s = super.encodeURL(url);

                try {
                    String urlPath = new URL(
                            ((url.toLowerCase().startsWith("http://")
                                    || url.toLowerCase().startsWith("https://"))
                                            ? ""
                                            : "http://fake")
                                    + url).getPath().toString().toLowerCase();
                    if (urlPath.endsWith(".js") || urlPath.endsWith(".css")
                            || urlPath.endsWith(".png")
                            || urlPath.endsWith(".jpeg")
                            || urlPath.endsWith(".jpg")
                            || urlPath.endsWith(".gif") || urlPath.contains(
                                    ResourceHandler.RESOURCE_IDENTIFIER)) {
                        s = removeQueryParameter(s, "conversationContext");
                    }

                } catch (MalformedURLException | URISyntaxException e) {
                    // ignore
                }
                return s;
            }
        };

        chain.doFilter(req, resp2);
    }

    @Override
    public void init(FilterConfig arg0) throws ServletException {
        // nothing
    }
} 
```

网页.xml：

```
<filter>
    <filter-name>RemoveConversationParamFilter</filter-name>
    <filter-class>RemoveConversationParamFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>RemoveConversationParamFilter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
</filter-mapping> 
```

最后一个映射必须是 web.xml 中的最后一个映射*

# javascript - JQuery 迭代 TextField_Counter

> ID：10931703
> 
> 赞同：0
> 
> 时间：2012-06-07T12:21:47.440
> 
> 标签：javascript, jquery, dhtml

有人可以帮忙从下面收集表格数据吗？尽管我正在努力从表单中成功提取数据，但以下标记是针对 x 数量的客户进行的。

非常感谢，詹姆斯

```
<h5 id="Customer1">
    <span>Customer 1</span>
</h5>

<div class="CustomerWrapper">
<input type="hidden" value="0" id="CustomerType0" name="CustomerType0">

<span class="TitleSelect">  
    <label for="CustomerTitle0">Title</label>
    <select id="CustomerTitle0" name="CustomerTitle0">
    <option value="-1"></option>
    <option value="1">Mr</option>
    <option value="2">Mrs</option>
    <option value="3">Ms</option>
    <option value="4">Miss</option>
    </select>                                   
</span>

<span class="FirstInput">
    <label for="FirstName0">First Name</label>
    <input type="text" value="" name="FirstName0" id="FirstName0">
</span>

<span class="LastInput">
    <label for="LastName0">Surname(s)</label>
    <input type="text" value="" name="LastName0" id="LastName0">
</span> 
```

我的尝试失败了，因为我只需要名字和姓氏。

```
$('.PaxDetails .CustomerWrapper').each(function (index) {

    var counter = ++index;
    var firstName = "#FirstName" + counter;
    var lastName = "#LastName" + counter;

    var customerName = $(firstName).val() + ' ' + $(lastName).val();

    alert(customerName);

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:26:10.273

独库：[.serialize()](http://api.jquery.com/serialize)

```
$("<selector to get the form>").serialize(); 
```

**编辑**
如果您只需要名字和姓氏，那么您将不得不手工完成......

```
var customer = [];

$("div.CustomerWrapper").each(function(i, el) {
    customer.push({
        "FirstName": $("#FirstName" + i, el).val(),
        "LastName": $("#LastName" + i, el).val()
    });
});

console.log(customer); 
```

[jsfiddle](http://jsfiddle.net/dV8c4/)

# asp.net - 如何提醒用户选择至少任何人单选按钮？

> ID：10931711
> 
> 赞同：0
> 
> 时间：2012-06-07T12:21:58.610
> 
> 标签：asp.net, javascript-events

```
<asp:RadioButtonList ID="rlist" runat="server"          
  style="z-index: 1; left: 194px; top: 69px; position: absolute;
  height: 21px; width: 110px" 
  RepeatDirection="Horizontal" Font-Bold="True" ForeColor="Black">
       <asp:ListItem Value="True">Yes</asp:ListItem>
       <asp:ListItem Value="False">No</asp:ListItem>
</asp:RadioButtonList> 
```

这是我的编码，如果用户没有选择任何一个单选按钮意味着它将在 javascript 中显示警报

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:26:20.903

使用验证器

```
 <asp:RequiredFieldValidator   
        ID="ReqiredFieldValidator1"  
        runat="server"  
        ControlToValidate="RadioButtonList1"  
        ErrorMessage="Select your choice!"  
        >  
    </asp:RequiredFieldValidator> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:36:55.497

```
Now it is Tested Pls change you txtbox Client Id and radiobutton ID IT fully Works OMG    

     <script type="text/javascript">
                    function buttonclick()
                    {
                        var txt1 = document.getElementById('<%=TextBox1.ClientID %>');
                        var txt2 = document.getElementById('<%=TextBox2.ClientID %>');

     var b = new Boolean(validateRadioButtonList('<%= rlist.ClientID %>'))
                         if (b == false)
                          {
                             return false;

                          }
                        if (txt1.value == "")
                        {
                            alert("please enter text1");
                            return false;
                        }
                        if (txt2.value == "")
                        {
                            alert("please enter text2");
                            return false;
                        }

                    }
                    function validateRadioButtonList(radioButtonListId)
                    {
                        var listItemArray = document.getElementsByName(radioButtonListId);
                        var isItemChecked = false;

                        for (var i = 0; i < listItemArray.length; i++)
                        {
                            var listItem = listItemArray[i];

                            if (listItem.checked)
                            {
                                //alert(listItem.value);
                                isItemChecked = true;
                            }
                        }

                        if (isItemChecked == false)
                        {
                            alert('Nothing is checked!');

                            return false;
                        }

                        return true;
                    }

                </script>
            </head>
            <body>
                <form id="form1" runat="server">
                <div>
                    <asp:RadioButtonList ID="rlist" runat="server" style="z-index: 1; left: 194px; top: 69px; position: absolute; height: 21px; width: 110px" RepeatDirection="Horizontal" Font-Bold="True" ForeColor="Black">
 <asp:ListItem Value="True">Yes</asp:ListItem> 
<asp:ListItem Value="False">No</asp:ListItem> 
</asp:RadioButtonList> 
                    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
                    <asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
                    <asp:Button ID="Button1" runat="server" OnClientClick="return buttonclick();" Text="Button" />
                </div>
                </form>
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T12:28:59.960

您可以使用 JQuery 来验证这一点。

该语句`$('#RadioButtonList1 input:checked').val()`将为您提供所选项目的文本，否则为空。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-07T12:51:11.340

```
<form id="Form1" method="post" runat="server">
 <asp:RadioButtonList id="RadioButtonList1" runat="server" RepeatDirection="Horizontal">
  <asp:ListItem Text="Excellent" Value="1" />
  <asp:ListItem Text="Good" Value="2" />
  <asp:ListItem Text="Average" Value="3" />
  <asp:ListItem Text="Poor" Value="4" />
  <asp:ListItem Text="Very Poor" Value="5" />
 </asp:RadioButtonList>
 <input type="button" onclick="onButtonClick();" value="Validate">
</form>

<script type="text/javascript">
<!--
function onButtonClick()
{
 return validateRadioButtonList('<%= RadioButtonList1.ClientID %>');
}
function validateRadioButtonList(radioButtonListId)
{
 var listItemArray = document.getElementsByName(radioButtonListId);
 var isItemChecked = false;

 for (var i=0; i<listItemArray.length; i++)
 {
  var listItem = listItemArray[i];

  if ( listItem.checked )
  {
   //alert(listItem.value);
   isItemChecked = true;
  }
 }

 if ( isItemChecked == false )
 {
  alert('Nothing is checked!');

  return false;
 }

 return true;
}
// -->
</script>

<asp:Button ID="btnSubmit" runat="server" Text="Submit" OnClientClick="return onButtonClick() ;" onclick="btnSubmit_Click" /> 
```

# jquery - 使用 Jquery Mobile 使用 d3js 创建具有固定宽度的图表

> ID：10931712
> 
> 赞同：1
> 
> 时间：2012-06-07T12:22:05.587
> 
> 标签：jquery, html, jquery-mobile, svg, d3.js

我正在使用[d3js](http://d3js.org)为移动设备创建图表。图表正在呈现，但由于我已将使用 d3js 创建的 SVG 图表的宽度和高度固定为 960x480。如果我不使用 Jquery Mobile，图表是可缩放和可滚动的，但是如果使用带有 Jquery Mobile 的图表，则会呈现图表，但它们不可滚动且不可缩放，因此图表会在移动设备上被删除。

有解决方法吗？

```
 <div data-role="page" data-add-back-btn="true" id="areachart">
        <div data-theme="e" data-position="fixed" data-role="header"  data-id="header">
            <h3>
                Header
            </h3>
        </div>
        <div data-role="content" id="viz">
        </div>
        <div data-theme="e" data-role="footer" data-position="fixed"  data-id="footer">
            <h3>
                Footer
            </h3>
        </div>
        <script>
         var header = localStorage.getItem("chartWizHeader");
         var footer = localStorage.getItem("chartWizFooter");

        $(document).live('pageinit',function(event){

            $('#areachart div[data-role="header"] h3').text(header);
            $('#areachart div[data-role="footer"] h3').text(footer);

            d3.json(sessionStorage.getItem("areaChart"), function(data) {

                d3.select("#viz").html("");

                sessionStorage.removeItem("areaChart");
                // Data is the Final Output.

                $.each(data, function(i, d) {
                  d.Year = +d.Year;
                  d.Sales = +d.Sales;
                  d.Expenses = +d.Expenses;
                });

                //Declare Margin.
                var margin = {top:10,left:50,right:30,bottom:20};

                //Declare height and width of the SVG.
                var height = 500 - margin.bottom - margin.top;
                var width  = 970 - margin.left - margin.right;

                //Define Scaling for x and y
                var x = d3.scale.linear().domain([d3.min(data,function(d){return d.Year}),d3.max(data,function(d){return d.Year})]).range([0,width]);
                var y = d3.scale.linear().domain([0,d3.max(data,function(d){
                        if(d.Sales < d.Expenses){
                            return d.Expenses;
                        }else{
                            return d.Sales;
                        }
                    })]).range([height,0]);

                // Both axis have to be defined.
                var xAxis = d3.svg.axis().orient("bottom").scale(x).ticks(data.length);
                var yAxis = d3.svg.axis().orient("left").scale(y);

                // Create the lines.
                var line1 = d3.svg.line().x(
                        function(d){return x(d.Year);}
                ).y(function(d){return y(d.Sales);});
                var line2 = d3.svg.line().x(function(d){ return x(d.Year);}).y(function(d){return y(d.Expenses);});

                //Create the Area which has starting points.
                var area1 = d3.svg.area().x(line1.x()).y1(line1.y()).y0(y(0));

                var area2 = d3.svg.area().x(line2.x()).y1(line2.y()).y0(y(0));

                //Create the SVG Element.
                var svg = d3.select("#viz").append("svg").datum(data).attr("width",width + margin.left + margin.right).attr("height", height + margin.top + margin.bottom)
                            .append("g").attr("transform","translate("+margin.left+","+margin.top+")");

                //Add path of area.
                svg.append("path").attr("style"," fill: lightsteelblue;fill-opacity: 0.4;").attr("d",area1);

                //Add path of area.
                svg.append("path").attr("style","fill: #00FF00;fill-opacity: 0.4;").attr("d",area2);

                svg.append("g").attr("class","x axis").attr("transform","translate(0,"+height+")").call(xAxis);

                svg.append("g").attr("class","y axis").call(yAxis);

                svg.append("path").attr("style"," fill: none;stroke: steelblue;stroke-width: 1.5px;").attr("d",line1);

                });

        });
    </script>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:04:04.470

您是否设置了`viewport`元标记？

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

如果您支持 iOS 设备，请检查此[缩放修复：方向更改 iOS 错误和选择/输入缩放](http://jquerymobile.com/blog/2012/04/13/announcing-jquery-mobile-1-1-0/#features)

# windows - 查找 .bat 文件的文件夹名称

> ID：10931714
> 
> 赞同：1
> 
> 时间：2012-06-07T12:22:12.213
> 
> 标签：windows, batch-file

我需要找到我正在执行的批处理文件的文件夹名称。所有其他方法都为我提供了完整的路径。我只需要父文件夹名称。此外，其他[提到](https://stackoverflow.com/questions/280969/windows-batch-loop-over-folder-string-and-parse-out-last-folder-name)的方法使用循环，这对于我的需要来说非常冗长和冗长。是否有任何方法可以直接通过 % 参数（或它们的组合）找出父文件夹名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:56:56.030

您的问题的直接答案是“否”。没有使用 FOR 循环或 CALL 的仅使用扩展修饰符的直接方法。

您问题中引用的线程几乎拥有您需要的一切。

这里有两种优化技术，它们与已经发布的非常相似。Method1 应该是最快的：

***编辑***-*我通过删除子字符串操作进一步优化。*
***Edit2*** -*我用简单的 FOR 代替 FOR /F*

```
@echo off
setlocal

::method 1 using FOR
for %%F in ("%~p0\.") do set "method1=%%~nxF"
if not defined method1 set method1=\

::method 2 using CALL
call :getName "%~p0\." method2

::print results
set method
exit /b

:getName  PathWithTrailing\.  ReturnVar
set "%~2=%~nx1"
if not defined %~2 set %~2=\
exit /b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:28:20.297

尝试

```
echo %~dp0 
```

在你的 bat 文件中。%0 是批处理文件的名称。~dp 为您提供指定参数的驱动器和路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T12:43:35.897

真的没有一个简单的方法来做到这一点。我知道你提到你不想要一个冗长的循环方法，所以这里有一个短循环方法：

```
for %%D in (.) do @echo %%~nD 
```

请注意，此代码仅适用于批处理文件。在它之外，您应该使用 % 而不是 %%。

您应该查看[Rob van der Woude 的脚本页面](http://www.robvanderwoude.com/batchfiles.php)。他在他的网站上有很多关于 DOS 脚本的好信息。

# jquery - 制作本地 html 文件以将数据发送到服务器上的 php 脚本

> ID：10931717
> 
> 赞同：1
> 
> 时间：2012-06-07T12:22:31.503
> 
> 标签：jquery, ajax, cross-domain, jsonp, http-post

我目前正在尝试获取一个**本地 html 文件**来与**我的服务器上的 php 脚本**对话。这是我想要实现的目标：

我使用桌面应用程序生成包含测试数据的 html 报告。这些报告保存在本地磁盘上的某个文件夹中。在这个过程中，我唯一可以控制的是我可以编辑的报告模板。我在模板中添加了一个按钮，该按钮应该向服务器端 php 发送一个帖子，该 php 解析文件并将数据推送到我的数据库中。

一个要求是不同机器上的许多测试客户端将数据发送到一个中央服务器，该服务器写入一个中央数据库。

当然，我遇到了 ajax 请求的跨域限制，我试图通过使用 jsonp 来解决这个问题。但是据我了解，这项技术主要是为了**从外部服务器获取数据**，我需要将数据**从本地 htmlfile 发布到我的****服务器**。

 **有谁知道如何做到这一点？任何提示都非常感谢！非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:03:13.913

您可以尝试以下几件事：

1.  [研究 CORS](https://developer.mozilla.org/en/http_access_control)，尽管它可能不适用于[旧浏览器](http://caniuse.com/cors)。这是一个教程：[http ://www.nczonline.net/blog/2010/05/25/cross-domain-ajax-with-cross-origin-resource-sharing/](http://www.nczonline.net/blog/2010/05/25/cross-domain-ajax-with-cross-origin-resource-sharing/)
2.  在桌面应用程序中创建与数据库的连接。与其*向服务器端 php 发送帖子*，不如立即解析并将其保存到数据库中。
3.  如果您可以使用 JavaScript，请查看[easyXDM](https://github.com/oyvindkinsey/easyXDM#readme)。如果您也使用 HTML5，请查看[`postMessage()`](https://developer.mozilla.org/en/DOM/window.postMessage).**

# jsf - 清除重置按钮上的消息[IceFaces]

> ID：10931724
> 
> 赞同：0
> 
> 时间：2012-06-07T12:23:04.820
> 
> 标签：jsf, icefaces

我正在使用 Icefaces，我想在单击重置按钮时清除所有 Ice:messages(validation Messages)。我在 Ice:commandButton 中使用 type="reset" 而没有任何 actionListener。谁能帮我plzz ..提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:46:03.057

将您的消息放入表单（此属性用于重置表单）或解决验证错误并刷新页面。

# windows - 如何将 32 英寸显示屏拆分为上半广告屏，下半屏以运行应用程序

> ID：10931729
> 
> 赞同：0
> 
> 时间：2012-06-07T11:09:01.813
> 
> 标签：windows, screen, resolution

我有这个项目，需要拆分一个 32 英寸的屏幕来运行两个应用程序。上半部分显示广告，下半部分运行一个单独的应用程序。两者都是 Windows 应用程序。显示器处于纵向模式。你有谁能帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:41:43.203

你正在寻找[`SetWindowPos`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633545%28v=vs.85%29.aspx). 它使您可以在屏幕上移动应用程序窗口，甚至（如果您是邪恶的）将它们标记为始终浮动在顶部。

# java - 如何使用 Swing 在 Java 中正确实现 MVC？

> ID：10931730
> 
> 赞同：15
> 
> 时间：2012-06-07T12:23:33.303
> 
> 标签：java, swing, model-view-controller, user-interface, jframe

如果您想了解更多详细信息，请告诉我，或参考此问题的最后几行。我已经读了很多书，我觉得我正在把一些简单的东西变成复杂的东西，我仍然在这里和那里卡住，所以也许你可以在那些非常具体的点上帮助我。

我使用的是 Netbeans IDE 7 和 JDK 7，没有框架。第一个窗口是 JFrame，所有其他窗口都是 modal=true 的 JDialogs。

问题：

1.  如何使用 swing 正确实现 MVC 模式？从下面的想法来看，哪个更好：（A）还是（B）？或者也许是另一个......为什么它更好？

    （一）主要：

    ```
    MyModel model
    MyView view(model) 
    ```

    我的观点：

    ```
    MyController(this, model) 
    ```

    (B)
    主要：

    ```
    MyModel model
    MyView View
    MyController controller(view, model) 
    ```

2.  当我在 MainFrame 中单击 jbutton1 时，我需要它来打开 SettingsFrame 以编辑设置。我应该在哪里实例化 SettingsFrame 的视图、模型和控制器？在主机控制器中？

3.  在 MVC 组织和实现方面，我应该如何处理（显然）缺少一两个 MVC“腿”（模型或视图或控制器）的更具体的功能？我应该为他们创建空类吗？

    ```
    a. The implementation of a TrayIcon
    b. A URL connection class (an HttpsUrlConnection which will update data in the main jframe and also upload/download files)
    c. A Directory Monitor (which will update data in the main jframe and also use the urlconnection to download a file)
    d. My own implementation of TableModel
    e. json 
    ```

4.  如何在整个应用程序中正确保存和使用带有设置的对象？我将需要它在不同地方的信息（视图、模型、控制器），但它可能会在运行时被用户更改）。让这个模型成为单例是个好主意吗？

5.  在以下情况下我应该怎么做：

    ```
    a. View needs some data from the Model? 
    What I'm doing: using the reference of Model which I keep in the View
    b. View needs some data from the Controller?
    What I'm doing: using the reference of Controller which I keep in the View
    c. Model needs some data from the Controller?
    Still didn't happen but I have no idea how to do correctly
    d. Model needs some data from the View?
    What I'm doing: pulling all my hair from my head...
    e. Controller needs some data from the View?
    What I'm doing: using the reference of the View which I keep in the Controller
    f. Controller needs some data from the Model?
    What I'm doing: using the reference of the Model which I keep in the Controller
    g. One of FooModel, FooView or FooController needs data from one of BarModel, BarView or BarController?
    What I'm doing: thinking of jumping from the highest building... 
    ```

6.  关于如何知道我是否正确实现 MVC 的任何提示？我应该在 Model 还是 Controller 中处理海量数据？

7.  我也在使用 DAO，我正在做的是：我的模型有一个

    > ArrayList MyModel 加载（）

    方法创建 DAO 的实例并返回 DAO 返回的模型的 ArrayList，然后有时我在模型中处理这个模型的 ArrayList，有时我允许控制器处理它。这是一个好习惯还是有更好的方法？我的意思是：遍历 ArrayList 并从模型中获取数据。

8.  我有一个 PasswordCheck jDialog 来限制对某些视图的访问。如何在 MVC 方面重用它，以便我可以使用相同的 PasswordCheck 对话框来允许/限制对不同视图的访问，而不会弄乱代码？

9.  还有其他提示、提示、想法、建议吗？

**上下文：** 我需要在短时间内开发一个 Java Swing MVC 软件，尽管默认情况下我不是 Java 开发人员并且不太习惯于实现 MVC 模式，特别是在 Java 中（我明白了，但有时它缺乏我知道实现类之间的关系）。这些应用程序基本上是本地/在线文件的监视器，主框架中有一个 JTable 来显示这些数据。我正在使用新的 WatchService API 来跟踪本地文件并使用 DAO 将它们的信息保存在 h2 数据库中，然后他们将这些数据重新加载到主框架 jtable 中。我还必须通知用户有关新文件的信息（我使用的是 TrayIcon）。对于在线文件监控/上传/下载，我使用的是 HttpsUrlConnection 和 json。它还可能允许自定义设置。

提前感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T13:36:47.600

查看[Sun (Oracle) 的建议](http://www.oracle.com/technetwork/articles/javase/index-142890.html)。

作为一种简化，您可以让每个组件（模型、视图、控制器）注册到顶级应用程序组件，以提供单个引用点，而不是每个组件（您的 A 或 B）之间的单独引用。我引用的文章提供了推拉式设计的想法；我建议将 push 作为一种更流行的现代方法。披露：我有 Java 和 MVC 的经验，但没有 Swing 本身的 MVC。

> 我应该在哪里实例化 SettingsFrame 的视图、模型和控制器？

当然，是的，或者在顶级应用程序组件中。

> 我应该如何处理（显然）缺少一个或两个 MVC“腿”（模型或视图或控制器）的更具体的功能？

我会将仅 GUI 的部分实现为您自己的 GUI 库。以及纯粹的算法/服务片段作为服务库。

> 我应该在 Model 还是 Controller 中处理海量数据？

数据处理算法非常适合控制器甚至服务库；除了可能的数据类型转换或验证之外，您的模型根本不应该做太多处理。

> 如何在整个应用程序中正确保存和使用带有设置的对象？

请参阅我的注册说明；单身人士可能是合适的。

# sql - 是否可以在 SQL Server 中进行列分区

> ID：10931731
> 
> 赞同：2
> 
> 时间：2012-06-07T12:23:36.500
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

表中每条记录的大小是一个性能参数。这意味着如果记录的大小很小，SQL Server 会在每次读取物理硬盘时获取更多记录。

在我们的大多数查询中，我们不会使用表的所有列，并且可能某些列仅在特定查询中使用。我们是否可以对每个表的列进行分区以获得更好的性能。

我使用 SQL Server 2008 R2。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T12:32:14.843

真正的列级分区带有面向列的存储，请参阅[SQL Server 2012 列存储索引内部](http://rusanu.com/2012/05/29/inside-the-sql-server-2012-columnstore-indexes/)，但这仅在 SQL Server 2012 中可用，用于解决特定的 BI 工作负载，而不是一般的 SQL Server 应用程序。

在面向行的存储中，垂直分区实际上是设计适当覆盖索引的另一个名称。如果引擎有一个替代的窄索引，它将尽可能使用它而不是基表。

最后一种选择，手动分割表并在查询中加入垂直“碎片”（或定义加入视图，同样的事情）通常是不明智的，而且很少有回报。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:33:17.317

目前，使用 SQL Server 2008，您无法对表进行水平分区。如果您有大量列，则需要将其切分成共享公共键的水平块表，然后用可更新的视图对它们进行蒙皮，以产生一张非常宽的表的错觉。

如果只有几个大列（例如`VARCHAR(1000)`），您可以将数据规范化为唯一值表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T13:17:34.947

无列分区规则的一个例外是声明为 max 的字符列（例如，varchar(max)）。

这些存储在单独的数据页上。我相信除非在查询中引用了该列，否则不会读入此页面。如果我错了，我相信更多知识的人会纠正我。

# jquery - 调用下拉单击事件 on- 按钮 Click/jquery

> ID：10931732
> 
> 赞同：0
> 
> 时间：2012-06-07T12:23:39.953
> 
> 标签：jquery

我有一个下拉菜单。我也有一个按钮。我有特殊要求。

当用户单击按钮时，下拉菜单应展开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:26:22.560

您可能想要构建一个自定义下拉菜单，该菜单具有某种 expand() 方法来显示下拉菜单中的选项。默认下拉菜单没有这样的东西，所以你被困在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:35:38.970

虽然你不能完全达到你想要的，但我想出了另一种方法。单击按钮时，您可以将下拉菜单`size`动态设置为它获得的项目数量，使其“打开”并显示所有项目。

然后，选择一个项目时，您可以将其设置`size`回1。这有效地具有相同的外观和感觉。

完整的代码是：

```
window.onload = function() {
    var oDDL = document.getElementById("myselect");
    oDDL.onchange = function() {
        //drop down item selected, reset size back to 1 to "close" the list:
        this.size = 1;
    };

    var oButton = document.getElementById("btnOpenDropDown");
    oButton.onclick = function() {
        //set size to number of items to "open" the list:
        oDDL.size = oDDL.options.length;
        oDDL.focus();
    }
};​ 
```

[现场测试用例](http://jsfiddle.net/N8UGD/2/)。

# windows - 在 Windows Azure 管理门户上托管 Mutitenant 应用程序

> ID：10931733
> 
> 赞同：1
> 
> 时间：2012-06-07T12:23:41.977
> 
> 标签：windows, azure, azure-deployment

我已经完成了您在最新培训套件 WAPTK 中提供的 Lab AdvancedWebAndWorkerRoles。我按照练习 1 中的步骤进行操作：注册站点、应用程序和虚拟目录。它在 windows azure 模拟器（本地）中运行良好，但我找不到在 windows azure 管理门户中托管的任何步骤。

任何人都可以建议（步骤）如何在 Windows azure 管理门户中托管相同的应用程序吗？

* * *

我们知道如何在 windows azure 门户中部署应用程序。正如我在练习 1 的问题中提到的：在培训工具包 WAPTK 中注册站点、应用程序和虚拟目录，我们希望在 azure 中创建类似的应用程序和主机。培训工具包中未提及在管理门户中托管练习 1 应用程序的步骤。我们尝试在 Windows azure 门户中托管该应用程序，但它无法正常工作，因为 ServiceDefinition.csdef 包含一些不同的配置。我们想知道步骤在管理门户中托管该应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:49:29.493

在**Windows Azure**实验室简介下，查看*练习 3：发布 Windows Azure 应用程序*。这显示了如何通过门户发布。基本步骤：

*   在 Visual Studio 中构建您的 Windows Azure 服务，但告诉它不要发布。只需生成包文件和配置文件。
*   创建一个新的托管服务。这有一个类似的名字`myapp.cloudapp.net`。您需要找到唯一的 DNS 前缀。
*   从门户中选择生成的包文件和配置文件，从而启动您的服务。这需要几分钟，您可以通过门户查看其状态。

您也可以直接从 Visual Studio 发布。有关正确设置 Visual Studio 的说明（基本上从门户导入您的发布设置），请参阅[此 MSDN 文章。](http://msdn.microsoft.com/en-us/library/windowsazure/ee460772.aspx)Visual Studio 可以执行所有步骤，而无需您在门户中实际执行任何操作（除了导出您的发布设置）。

# caching - memcache 服务器在通过 AB（Apache Benchmark）的大量请求时失去连接

> ID：10931734
> 
> 赞同：1
> 
> 时间：2012-06-07T12:23:42.113
> 
> 标签：caching, memcached, apachebench

上周我们在总共有 400k 行和大约 220 MB 的 mysql 服务器上遇到了一个非常大的问题，所以我们决定开始使用 memcache。在更改整个脚本之前，已经准备好测试页面并使用 apache 基准测试（我不确定它是否是正确的测试方法）

```
ab -n 50000 -c 150 http://192.168.1.5/test.php 
```

当我使用上面的命令测试更多请求时，memcache 在 25000 个请求后开始断开连接。

这是test.php的示例代码

```
<?php
global $memcache;
$memcache = new Memcache();

//$memcache->flush();
$memcache->connect("127.0.0.1", "11211");

$key = "10";

$cache_result = $memcache->get($key);

if($cache_result) {
    $data = $cache_result;
    echo "<h1>cache data</h1>";
} else {
    mysql_connect("localhost", "root", "root") or die(mysql_error());
    mysql_select_db("newstest");
    mysql_set_charset("utf8");

    $q = mysql_query("SELECT * `news`, `categories` WHERE `publish_area` LIKE 'headline' AND `published`='1' AND `category_parent`=`category_id` AND `publish_date` <= '".date("Y-m-d H:i:s")."' ORDER BY publish_date DESC LIMIT 0,15");

    while($o = mysql_fetch_object($q)) {
        $data[] = $o;
    }

    $memcache->set($key, $data);
    echo "<h1>mysql data</h1>";

    mysql_close();
}

foreach($data as $o) {
    print_r($o);    
} 
```

?>

从 MySQL 中提取的数据约为 120 KB

memcached cachesize = 1024 也尝试了 2048

内存缓存 maxconn = 4096

看来mysql服务器高流量引起的问题在memcache之后会得到解决，但是memcache断开是当前的问题。似乎这次 mysql 服务器可以工作，但 memcache 会断开连接。

任何想法都会有用。谢谢。

# android - Android 多人游戏的服务器架构

> ID：10931735
> 
> 赞同：0
> 
> 时间：2012-06-07T12:23:46.360
> 
> 标签：android, multiplayer

我正在构建一个多人游戏。这是一个纸牌游戏。我想知道哪种技术或 SDK 最适合对服务器架构部分进行编程。

我在考虑 Node.js。有人有经验吗？有更好的选择吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T12:42:46.923

您可以尝试使用 Skiller SDK：

[http://skiller-games.com/Developers.aspx](http://skiller-games.com/Developers.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:51:21.817

谢谢@Perroloco，正如 Perroloco 所说，您可以试用我们的 Skiller SDK。只需注册我们的开发人员计划，获取应用程序凭据，下载 SDK，您就可以开始使用了。您将不需要服务器、托管或协议开发。只需调用 createGame、makeMove 和 endGame API 即可使用多人游戏工具。

如果您有任何问题或需要任何帮助，我们将很乐意为您提供帮助：developers@skiller-games.com。

万事如意，万事如意。

# java - 弹性搜索 - 在 java 中创建节点/索引时出错

> ID：10931740
> 
> 赞同：0
> 
> 时间：2012-06-07T12:24:01.373
> 
> 标签：java, elasticsearch

我正在尝试使概念验证 Java 代码正常工作。我要做的第一件事是在我的 HD 上索引一些 txt 文档。但是，在尝试创建 Node.js 时遇到异常之前，我什至没有走那么远。

以下代码均产生以下异常：

**代码**

```
Node node = nodeBuilder().node();
Client client = node.client(); 
```

**我的主要问题是**：

我在哪里可以获得似乎缺少的 BoundaryScanner 类？我将在异常下方提供我的 maven **pom.xml 。**lucene-fast-vector-highlighter 包似乎是最新版本[3.0.3](http://mvnrepository.com/artifact/org.apache.lucene/lucene-fast-vector-highlighter)。

非常感谢任何帮助。

**例外**

```
 07-Jun-2012 12:44:00 org.elasticsearch.node
INFO: [Allatou] {0.19.4}[2648]: initializing ...
07-Jun-2012 12:44:00 org.elasticsearch.plugins
INFO: [Allatou] loaded [], sites []
Exception in thread "main" org.elasticsearch.common.collect.ComputationException: java.lang.NoClassDefFoundError: org/apache/lucene/search/vectorhighlight/BoundaryScanner
    at org.elasticsearch.common.collect.ComputingConcurrentHashMap$ComputingMapAdapter.get(ComputingConcurrentHashMap.java:400)
    at org.elasticsearch.common.inject.internal.FailableCache.get(FailableCache.java:49)
    at org.elasticsearch.common.inject.ConstructorInjectorStore.get(ConstructorInjectorStore.java:50)
    at org.elasticsearch.common.inject.ConstructorBindingImpl.initialize(ConstructorBindingImpl.java:50)
    at org.elasticsearch.common.inject.InjectorImpl.initializeBinding(InjectorImpl.java:370)
    at org.elasticsearch.common.inject.BindingProcessor$1$1.run(BindingProcessor.java:148)
    at org.elasticsearch.common.inject.BindingProcessor.initializeBindings(BindingProcessor.java:204)
    at org.elasticsearch.common.inject.InjectorBuilder.initializeStatically(InjectorBuilder.java:119)
    at org.elasticsearch.common.inject.InjectorBuilder.build(InjectorBuilder.java:102)
    at org.elasticsearch.common.inject.Guice.createInjector(Guice.java:93)
    at org.elasticsearch.common.inject.Guice.createInjector(Guice.java:70)
    at org.elasticsearch.common.inject.ModulesBuilder.createInjector(ModulesBuilder.java:59)
    at org.elasticsearch.node.internal.InternalNode.<init>(InternalNode.java:149)
    at org.elasticsearch.node.NodeBuilder.build(NodeBuilder.java:159)
    at org.elasticsearch.node.NodeBuilder.node(NodeBuilder.java:166)
    at ie.openmobile.elasticsearch.Main.main(Main.java:49)
Caused by: java.lang.NoClassDefFoundError: org/apache/lucene/search/vectorhighlight/BoundaryScanner
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Unknown Source)
    at java.lang.Class.getDeclaredConstructors(Unknown Source)
    at org.elasticsearch.common.inject.spi.InjectionPoint.forConstructorOf(InjectionPoint.java:177)
    at org.elasticsearch.common.inject.ConstructorInjectorStore.createConstructor(ConstructorInjectorStore.java:59)
    at org.elasticsearch.common.inject.ConstructorInjectorStore.access$000(ConstructorInjectorStore.java:29)
    at org.elasticsearch.common.inject.ConstructorInjectorStore$1.create(ConstructorInjectorStore.java:37)
    at org.elasticsearch.common.inject.ConstructorInjectorStore$1.create(ConstructorInjectorStore.java:33)
    at org.elasticsearch.common.inject.internal.FailableCache$1.apply(FailableCache.java:38)
    at org.elasticsearch.common.collect.ComputingConcurrentHashMap$ComputingValueReference.compute(ComputingConcurrentHashMap.java:358)
    at org.elasticsearch.common.collect.ComputingConcurrentHashMap$ComputingSegment.compute(ComputingConcurrentHashMap.java:184)
    at org.elasticsearch.common.collect.ComputingConcurrentHashMap$ComputingSegment.getOrCompute(ComputingConcurrentHashMap.java:153)
    at org.elasticsearch.common.collect.ComputingConcurrentHashMap.getOrCompute(ComputingConcurrentHashMap.java:69)
    at org.elasticsearch.common.collect.ComputingConcurrentHashMap$ComputingMapAdapter.get(ComputingConcurrentHashMap.java:396)
    ... 15 more
Caused by: java.lang.ClassNotFoundException: org.apache.lucene.search.vectorhighlight.BoundaryScanner
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 29 more 
```

**pom.xml**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
      <modelVersion>4.0.0</modelVersion>

      <groupId>com.examplegroup</groupId>
      <artifactId>artifacename</artifactId>
      <version>1.0-SNAPSHOT</version>
      <packaging>jar</packaging>

      <name>elasticsearch</name>
      <url>http://maven.apache.org</url>

      <build>
        <plugins>
          <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.12</version>
            <configuration>
              <systemPropertyVariables>
                <user.region>uk</user.region>
              </systemPropertyVariables>
            </configuration>
          </plugin>
        </plugins>
      </build>

      <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
      </properties>

         <repositories> 

         <repository> 
         <!-- elasticsearch hosted here -->
           <id>sonatype-releases</id> 
           <name>Sonatype Releases Repository</name> 
           <url>http://oss.sonatype.org/content/repositories/releases/</url> 
         </repository> 

       </repositories> 

      <dependencies>
        <dependency>
          <groupId>junit</groupId>
          <artifactId>junit</artifactId>
          <version>3.8.1</version>
          <scope>test</scope>
        </dependency>

        <dependency>
        <!-- jsoup HTML parser library @ http://jsoup.org/ -->
            <groupId>org.jsoup</groupId>
            <artifactId>jsoup</artifactId>
            <version>1.6.3</version>
        </dependency>

          <dependency>
            <groupId>org.apache.lucene</groupId>
            <artifactId>lucene-core</artifactId>
            <version>3.6.0</version>
          </dependency>           

          <dependency>                  
            <groupId>org.apache.lucene</groupId>
            <artifactId>lucene-analyzers</artifactId>   
            <version>3.6.0</version>                            
          </dependency>                                               

          <dependency>                                                      
            <groupId>org.apache.lucene</groupId>                                    
            <artifactId>lucene-snowball</artifactId>                                          
            <version>3.0.3</version>                                                                    
          </dependency>                                                                                         

          <dependency>
            <groupId>org.apache.lucene</groupId>
            <artifactId>lucene-fast-vector-highlighter</artifactId>
            <version>3.0.3</version>
          </dependency>

          <dependency>
            <groupId>org.apache.lucene</groupId>
            <artifactId>lucene-highlighter</artifactId>
            <version>2.4.0</version>
          </dependency>

          <dependency>
            <groupId>org.apache.lucene</groupId>
            <artifactId>lucene-queries</artifactId>
            <version>2.4.0</version>
          </dependency>

          <dependency>
            <groupId>org.elasticsearch</groupId>
            <artifactId>elasticsearch</artifactId>
            <version>0.19.4</version>
          </dependency>
      </dependencies>

    </project> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T13:17:12.870

在同一个项目中混合不同版本的 Lucene 组件并不是一个好主意。您应该对所有内容都使用 3.6.0。最近的版本有一些变化，所以你需要替换/删除一些工件。例如，Snowball 分析器现在位于 lucene-analyzers 中，因此您不需要 lucene-snowball 工件，而 lucene-fast-vector-highlighter 现在位于 lucene-highlighter 中：

```
 <dependency>
        <groupId>org.apache.lucene</groupId>
        <artifactId>lucene-core</artifactId>
        <version>3.6.0</version>
      </dependency>           

      <dependency>                  
        <groupId>org.apache.lucene</groupId>
        <artifactId>lucene-analyzers</artifactId>   
        <version>3.6.0</version>                            
      </dependency>                                               

      <dependency>
        <groupId>org.apache.lucene</groupId>
        <artifactId>lucene-highlighter</artifactId>
        <version>3.6.0</version>
      </dependency>

      <dependency>
        <groupId>org.apache.lucene</groupId>
        <artifactId>lucene-queries</artifactId>
        <version>3.6.0</version>
      </dependency> 
```

# javascript - CALLBACK 函数：- 如何在 javascript 中为 phonegap + jQuery 移动 iPhone 应用程序中的以下函数实现 CALLBACK 函数

> ID：10931743
> 
> 赞同：1
> 
> 时间：2012-06-07T12:24:29.033
> 
> 标签：javascript, iphone, jquery-mobile, callback, jquery-callback

我已经使用**jQuery**和**phone gap实现了一个****iPhone**应用程序..

 ****我对***`java script`***,***`jQuery mobile`***和***`PhoneGap`***

要从数据库表中检索数据（table1 和 table2 现在仍然存在 15 个表）**js 文件**。*`i have implemented functions in`* `a` ***`as follows`***

 **现在我需要实现***`call back function`***这些功能

***`How to implement`*** ***回调函数*** ***`for the following code for multiple number of tables,Queries and results`*********

# c++ - 为什么 C++ 更喜欢这个模板方法而不是方法重载？

> ID：10931745
> 
> 赞同：12
> 
> 时间：2012-06-07T12:24:35.773
> 
> 标签：c++, templates, boost, overloading

假设我有两个类，第一个用于编写原始类型（`bool`, `int`,`float`等），第二个扩展第一个以编写复杂类型：

```
struct Writer {
    virtual void Write(int value) = 0;
};

struct ComplexWriter : public Writer {
    template <typename TValue> void Write(const TValue &value) {
        boost::any any(value);
        Write(any);
    }
    //virtual void Write(int value) = 0; // see question below
    virtual void Write(const boost::any &any) = 0;
}; 
```

这个想法是，如果有人调用`myWriter.Write(someIntValue);`， int 重载将优先于模板化方法。

相反，我的编译器（Visual C++ 11.0 RC）总是选择模板方法。例如，以下代码片段将打印`Wrote any`到控制台：

```
struct ComplexWriterImpl : public ComplexWriter {
    virtual void Write(int value) { std::cout << "Wrote an int"; }
    virtual void Write(const boost::any &any) { std::cout << "Wrote any"; }
};

void TestWriter(ComplexWriter &writer) {
    int x = 0;
    writer.Write(x);
}

int main() {
    ComplexWriterImpl writer;
    TestWriter(writer);
} 
```

当我`Write(int)`也在类中声明方法时，行为突然发生了变化`ComplexWriter`（请参阅第一个片段中的注释行）。然后打印`Wrote an int`到控制台。

这是我的编译器应该如何表现的吗？C++ 标准是否明确规定只有在同一类（而不是基类）中定义的重载才能优先于模板化方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T12:31:27.553

问题是，在您调用`writer.Write(x)`编译器时，编译器看到的是 a`ComplexWriter`而不是 a `ComplexWriterImpl`，因此它只知道在`ComplexWriter`模板函数和函数中定义的`boost::any`函数。

`ComplexWriter`不包含任何接受 an 的虚函数`int`，因此它无法调用定义的 int 重载`ComplexWriterImpl`

当您将虚拟重载添加到`ComplexWriter`类时，编译器会意识到该类中有一个整数重载，`ComplexWriter`因此会调用它的实现`ComplexWriterImpl`

编辑：现在您已经在 ComplexWriter 和 Writer 之间的继承中进行了编辑，我为您提供了更完整的解释：

当您创建一个子类并在其中定义一个函数时，无论其参数类型如何，基类中该名称的所有函数都将被隐藏。

您可以使用我相信的 using 关键字来解决这个问题：

```
struct ComplexWriter : public Writer {
    template <typename TValue> void Write(const TValue &value) {
        boost::any any(value);
        Write(any);
    }
    using Writer::Write;
    virtual void Write(const boost::any &any) = 0;
}; 
```

有关更多详细信息，请参阅此常见问题解答条目： http: [//www.parashift.com/c++-faq-lite/strange-inheritance.html#faq-23.9](http://www.parashift.com/c++-faq-lite/strange-inheritance.html#faq-23.9)

编辑2：只是为了确认这确实解决了你的问题：http: [//ideone.com/LRb5a](http://ideone.com/LRb5a)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T12:48:01.730

当您通过`ComplexWriter`“接口”访问对象时，编译器将尝试将函数调用解析为`Write(int)`使用该类中的定义。如果它不能这样做，它将考虑基类。

在这种情况下，您有两个候选者：`Write(any)`和模板版本。由于此时没有明确`Write(int)`的可用选项，因此必须在这两个选项之间进行选择。 `Write(any)`需要隐式转换，而模板版本不需要，因此调用模板版本（依次调用`Write(any)`）。

要使`Write(int)`from`Writer`可用，请导入`Writer::Write`函数：

```
class ComplexWriter : public Writer
{
  using Writer::Write;
  // rest is as before
}; 
```

# php - 如何限制 Zend 服务器的连接速度？

> ID：10931750
> 
> 赞同：0
> 
> 时间：2012-06-07T12:24:58.627
> 
> 标签：php, zend-framework

我希望安装在 localhost 上的 Zend 框架的行为就像它在 Internet 上一样，用于调试目的。有一个相关的帖子[我可以在本地主机上用实际的网络环境进行性能测试吗？](https://stackoverflow.com/questions/2135551/is-it-possible-for-me-to-do-the-performance-testing-in-localhost-with-actual-net)但我想知道 Zend 是否有特定的解决方案？

# entity-framework - 这个实体数据模型设计适合简单的博客项目吗？

> ID：10931757
> 
> 赞同：1
> 
> 时间：2012-06-07T12:25:19.610
> 
> 标签：entity-framework, ado.net-entity-data-model

我正在创建示例博客项目并设计了这个实体数据模型。

是否还有其他要求，我的意思是在关联和导航属性中......

![实体数据模型设计](../Images/dd6433a78b943ddd1e8a34e98b86bc7b.png)

我在以下基础上创建了这个设计..

1.  用户可以有很多帖子（1到很多）
2.  用户可以有很多评论（1到很多）
3.  用户可以有很多标签（1 到很多）
4.  帖子可以有很多评论（1到很多）
5.  帖子可以有很多标签（1到很多）

我需要在帖子和用户之间创建一对一的关联吗

1.  1 个帖子必须并且可以有 1 个用户（1 对 1）
2.  标签必须并且可以有 1 个用户（1 到 1）

我很困惑，我已经在所有这些之间创建了一对多的关系，并且我拥有所需的导航属性。是否需要创建上述1对1关联？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:55:09.570

一些建议：

1.  继承看起来没有必要。我认为，如果您希望您的模型随着多种类型的用户和具有一些不同领域的帖子一起增长，那么我们可以对这些领域进行继承。就像从 User 继承的模型 SuperUser NormalUser AdminUser 一样，它们有很多不常见的字段，在这里看起来不是一个案例。

2.  排除博客实体？通常我们有一个博客实体一个有权限的用户创建一个博客，在该博客下其他用户或只有（他自己取决于要求）可以写各种帖子。一个博客可以有很多帖子。话虽如此，博客实体不是强制性的，你可以没有它，但未来的修改可能会很昂贵。

3.  标签和帖子是多对多的关系。一个帖子可以有很多标签，但是一个标签与很多帖子相关联。如果你想知道带有特定标签的帖子，那么你需要有 * 到 *。

# silverlight - 将 ComboBox 绑定到辅助对象

> ID：10931773
> 
> 赞同：0
> 
> 时间：2012-06-07T12:26:35.860
> 
> 标签：silverlight, entity-framework, data-binding, telerik, domainservices

我的页面的数据上下文设置为 Project 类的实例，并且页面中的所有其他字段都正常工作。每个项目都有另一个与之关联的类作为属性。这代表我们正在集成到此页面的另一家公司的数据。我正在尝试绑定到此子对象的 TypeID 属性。这是对象的草图。

```
public class Project
{
    public int Id { get; set; }
    public string ProjectName { get; set; }
    public ABCProject ABCProject { get; set; }
}

public class ABCProject
{
    public int Id { get; set; }
    public int ABCProjectTypeId { get; set; }
    public ABCProjectType { get; set; }
}

public class ABCProjectType
{
   public int ProjectTypeId { get; set; }
   public string TypeName { get; set; }
} 
```

这是我的 XAML 的样子：

```
<telerik:RadComboBox Grid.Column="2" Grid.Row="1" telerik:StyleManager.Theme="Metro" x:Name="ProjectTypeCombo"
                                 ItemsSource="{Binding ProjectTypePickList}"
                                 SelectedValue="{Binding ABCProject.ABCProjectTypeId, Mode=TwoWay}"
                                 SelectedValuePath="ABCProjectTypeId"
                                 DisplayMemberPath="TypeName"/> 
```

选择列表已正确绑定。问题是所选值和所选值路径似乎没有绑定，因为页面加载时我得到一个空白组合框。

# opengl - NullPointerException 在所有 OpenGL 调用 LWJGL

> ID：10931781
> 
> 赞同：0
> 
> 时间：2012-06-07T12:26:50.310
> 
> 标签：opengl, nullpointerexception, lwjgl

只是试图让一个三角形绘制到屏幕上，遵循 c++ 教程。尝试运行该程序，我在所有 Opengl 调用中都收到 NullPointerException。另外，我正在关注 opengl 3 的教程，尽管我的大多数调用都是针对早期版本的，这就是 lwjgl 的设置方式，函数位于它们起源的版本中吗？

```
package examples;

import org.lwjgl.LWJGLException;
import org.lwjgl.opengl.*;

import java.nio.*;

public class Triangle
{
// An array of 3 vectors which represents 3 vertices
static final float vertexData[] = {
   -1.0f, -1.0f, 0.0f,
   1.0f, -1.0f, 0.0f,
   0.0f,  1.0f, 0.0f,
};

// This will identify our vertex buffer
int vertexBufferID;

public static void main(String[] args)
{
    new Triangle();
}

public Triangle()
{
    // Allocate floatBuffer to hold vertex data
    FloatBuffer vertexBuffer = FloatBuffer.allocate(9);
    // Put float data into buffer and position ready to read
    vertexBuffer.put(vertexData).position(0);

    // Generate 1 buffer, put the resulting identifier in vertexbuffer
    IntBuffer buffers  = IntBuffer.allocate(1); // allocate
    GL15.glGenBuffers(buffers);
    vertexBufferID = buffers.get(0);

    // Binds a buffer to the ARRAY_BUFFER(target)   (1 at a time) (breaks other bonds)
    GL15.glBindBuffer(GL15.GL_ARRAY_BUFFER, vertexBufferID);

    // Give our vertices to OpenGL. (creates store for data bound to target(above))
    GL15.glBufferData(GL15.GL_ARRAY_BUFFER, vertexBuffer,GL15.GL_STATIC_DRAW);

    try {
        Display.setDisplayMode(new DisplayMode(800,600));
        Display.create();
    } catch (LWJGLException e) {
        e.printStackTrace();
        System.exit(0);
    }

    while(!Display.isCloseRequested())
    {
        // Render
        // 1st attribute buffer : vertices
        GL20.glEnableVertexAttribArray(0); // enable vertex attribute index: 0
        GL15.glBindBuffer(GL15.GL_ARRAY_BUFFER, vertexBufferID);

        // Specify location of vertex data for index 0
        GL33.glVertexAttribP1ui(0, GL11.GL_FLOAT, false, 0);

        // Draw the triangle!
        GL11.glDrawArrays(GL11.GL_TRIANGLES, 0, 3); // Starting from vertex 0; 3 vertices total -> 1 triangle

        GL20.glDisableVertexAttribArray(0);
    }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:29:53.910

我认为问题是您必须在任何 openGl 调用之前创建显示。尝试移动

```
 try {
        Display.setDisplayMode(new DisplayMode(800,600));
        Display.create();
    } catch (LWJGLException e) {
        e.printStackTrace();
        System.exit(0);
    } 
```

在 Triangle 构造函数的顶部。

# gtk3 - Gtk3 地址栏小部件

> ID：10931782
> 
> 赞同：-1
> 
> 时间：2012-06-07T12:26:51.670
> 
> 标签：gtk3

Gtk3 中的地址栏有已知的实现吗？我正在寻找类似 iPhone 和 Android 电子邮件客户端的东西，其中已经给定的地址被转换为按钮。

编辑：我目前正在为 gtk-3.4 开发。下面 mike 建议的 GtkLinkBut​​ton 似乎很有希望，但是有没有办法将它添加到 GtkEditable 以便可以使用退格按钮删除它，或者在它之前/之后插入文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:19:25.883

特别是在发布有关 gtk3 的信息时，您应该列出您使用的版本，因为在您更改版本时会有贬值的代码。最新的稳定版本是 3.4。我认为您正在寻找的是 GtkLinkBut​​ton。 [gtk+-3.4 官方手册](http://developer.gnome.org/gtk3/3.4/GtkLinkButton.html)

# android - Android Activity 生命周期冲突

> ID：10931783
> 
> 赞同：0
> 
> 时间：2012-06-07T12:26:52.033
> 
> 标签：android

我有一个包含 3 个活动的应用程序

```
LoginActivity
ActivityA
ActivityB 
```

用户从 LoginActivity 开始。登录成功后，进入ActivityA。ActivityA 使用 startActivityForResult 调用 ActivityB 并使用 onActivityResult 处理响应。

如果用户从 ActivityA 或 ActivityB 按下“主页”按钮并重新启动应用程序，我想将用户带回 LoginActivity

我试着玩弄 onRestart 和 onResume。当通过主屏幕或 onActivityResult 重新初始化 ActivityA 时（当用户从​​ ActivityB 返回时），这两者都会被调用。

我该如何实现这个要求？

PS：我检查了关于 SO 的类似问题，但没有找到符合我要求的内容。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:48:07.420

当您声明启动活动 A 和活动 B 的意图时，请尝试使用 nohistory 标志，例如

```
Intent intent = new Intent(this, ActivityA.class);

// do not keep this intent in history
intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);

startActivity(intent); 
```

然后，当您重新启动时，它将返回登录活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:56:18.513

我将把你重定向到这个[问题](https://stackoverflow.com/q/2131123/844882)。我认为它应该回答你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T13:07:01.880

尝试在您的 AndroidManifest 文件中为每个活动编写此内容

```
 <activity android:launchMode="singleTask"
        android:name=".LoginActivity" />

 <activity android:launchMode="singleTask"
        android:name=".ActivityA" />

 <activity android:launchMode="singleTask"
        android:name=".ActivityB" /> 
```

# tsql - 一次更新多个列的情况

> ID：10931785
> 
> 赞同：1
> 
> 时间：2012-06-07T12:26:55.527
> 
> 标签：tsql, sql-update, case

我以前从未使用过 Case 并且不知道如何执行此操作，但是由于地址更改现在出现在不习惯的数据中，因此我们在进行批发更新时遇到了一些问题。我试图将它用作 if then 语句，但我确信我做错了。当字段为空或为空时，我需要更新地址。

```
UPDATE    defendants_ALL_Fixed
SET              tiffAdd = tiffAdds.Add1, tiffZip = tiffAdds.Zip, tiffCity = tiffAdds.City, tiffState = tiffAdds.State
FROM         defendants_ALL_Fixed INNER JOIN
                      tiffAdds ON defendants_ALL_Fixed.tiff = tiffAdds.Tiff
WHERE     (defendants_ALL_Fixed.tiff = tiffAdds.Tiff) 
```

我尝试将其包装成一个案例语句，例如：

```
SELECT
  a.tiffAdd
, CASE WHEN a.tiffAdd = '' THEN

UPDATE    defendants_ALL_Fixed
SET              tiffAdd = tiffAdds.Add1, tiffZip = tiffAdds.Zip, tiffCity = tiffAdds.City, tiffState = tiffAdds.State
FROM         defendants_ALL_Fixed INNER JOIN
                      tiffAdds ON defendants_ALL_Fixed.tiff = tiffAdds.Tiff
WHERE     (defendants_ALL_Fixed.tiff = tiffAdds.Tiff)

END
FROM defendants_ALL_Fixed a 
```

哪个不起作用，我理解为什么它不起作用，但不知道从哪里开始，任何帮助都会很棒。我们每个月只使用一次来更新数据（大约 150 万条记录），它使用的资源目前完全不相关。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:57:48.017

假设我理解您的问题（即仅在字段为空白时更新`defendants_ALL_Fixed`字段），您可以按以下方式执行此操作（坚持大小写）：`tiffAdds``defendants_ALL_Fixed`

```
UPDATE  defendants_ALL_Fixed
SET     tiffAdd = CASE WHEN LTRIM(RTRIM(ISNULL(tiffAdd, ''))) = '' THEN tiffAdds.Add1
                       ELSE tiffAdd
                  END ,
        tiffZip = CASE WHEN LTRIM(RTRIM(ISNULL(tiffZip, ''))) = '' THEN tiffAdds.Zip
                       ELSE tiffZip
                  END ,
        tiffCity = CASE WHEN LTRIM(RTRIM(ISNULL(tiffCity, ''))) = '' THEN tiffAdds.City
                        ELSE tiffCity
                   END ,
        tiffState = CASE WHEN LTRIM(RTRIM(ISNULL(tiffState, ''))) = '' THEN tiffAdds.State
                         ELSE tiffState
                    END
FROM    defendants_ALL_Fixed
        INNER JOIN tiffAdds ON defendants_ALL_Fixed.tiff = tiffAdds.Tiff 
```

一个更简单（或者更确切地说，更容易阅读）的选项是基于一个`WHERE`子句（每列一个更新语句）执行简单的更新语句：

```
UPDATE  defendants_ALL_Fixed
SET     tiffAdd = tiffAdds.Add1
FROM    defendants_ALL_Fixed
        INNER JOIN tiffAdds ON defendants_ALL_Fixed.tiff = tiffAdds.Tiff
WHERE   ( LTRIM(RTRIM(ISNULL(tiffAdd, ''))) = '' ) 
```

**编辑 1：**根据您的评论，这表明您可以更新 tiffAdd = ''? 的所有列 IE

```
UPDATE  defendants_ALL_Fixed
SET     tiffAdd = tiffAdds.Add1 ,
        tiffZip = tiffAdds.Zip ,
        tiffCity = tiffAdds.City ,
        tiffState = tiffAdds.State
FROM    defendants_ALL_Fixed
        INNER JOIN tiffAdds ON defendants_ALL_Fixed.tiff = tiffAdds.Tiff
WHERE   LTRIM(RTRIM(ISNULL(tiffAdd, ''))) = '' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T08:28:38.470

你为什么不使用合并呢？在每个字段上使用合并，检查值是否不为空或为空。我认为它可能是最好的（在我自己的解决方案中使用它）。

# c# - 在 C# 中为 Win 8 Metro App 中的按钮举行事件

> ID：10931786
> 
> 赞同：2
> 
> 时间：2012-06-07T12:26:59.120
> 
> 标签：c#, windows-8, windows-runtime, visual-studio-2012

我在 windows phone 市场上有一个已发布的应用程序，我正在尝试将其移植到 Win 8。我正在使用**Windows 8 Release Preview**和**Visual Studio Express RC 2012 for Win 8**，代码是`C#-XAML`.

我创建了一个自定义 6x7 日历。前 7 个按钮放入第一个`StackPanel`，下一个放入另一个面板，依此类推。所以有6个`StackPanels`持有42个按钮。所有这些 StackPanel 都放在一个`Grid`便于定位的位置。

每个按钮都与一个`Holding`名为 OnLongPress 的 EventHandler 相关联。所以我面临的问题是，当按下按钮时， OnLongPress 函数被调用两次。在调试时，我发现第一次`Holding state`is`Started`和下一次调用它时`Holding state`id `Completed`。我无法弄清楚为什么它被调用了两次。

是不是因为事件被冒泡了？？:(

```
 private void OnLongPress(object sender, HoldingRoutedEventArgs e)
    {

            Button butClicked = (Button)sender;
            int iNumClicked = Convert.ToInt32(butClicked.Content.ToString());

            CycleManager pCycMan = CycleManager.Instance;

            string iVal, jVal;
            int iRow, jCol;
            string butName = butClicked.Name;
            iVal = butName.Substring(1, 1);
            jVal = butName.Substring(2, 1);
            iRow = Convert.ToInt32(iVal);
            jCol = Convert.ToInt32(jVal);

            DateTime dtSelDate = new DateTime(m_yearBuffer[iRow, jCol], m_monthBuffer[iRow, jCol], iNumClicked);

            int trackingStatus = pCycMan.IsDateOkForHistory(dtSelDate);
            // setting or resetting few colors based on few checks
    } 
```

由于我是 Win 8 dev 的新手，如果有人能提供一些启示，那将会很有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T12:47:36.100

我已经解决了保持事件被调用两次的问题，一次处理状态开始，一次完成，包括以下检查。我仍然不确定这是否是正确的方法。

```
if (e.HoldingState == Windows.UI.Input.HoldingState.Started) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-14T00:48:11.473

如果您只想让事件在保持状态完成或取消时触发一次，请尝试使用`RightTapped`.

保持用于信息 UI，但对于显示上下文菜单等交互，您应该使用它`RightTapped`。您可以先处理 Hold 以显示菜单将出现的提示，但要显示菜单本身，请使用`RightTapped`处理程序。有关如何在应用设计中使用保持交互的更多信息，请参阅触控交互设计或常见用户交互指南。

[http://msdn.microsoft.com/en-us/library/windows.ui.xaml.uielement.holding.aspx](http://msdn.microsoft.com/en-us/library/windows.ui.xaml.uielement.holding.aspx)

`RightTapped`触摸动作是由于处理在一个地方保留一定时间的动作而产生的。如果是触摸动作，来自同一元素的保持事件总是在此之前，但`RightTapped`在释放触摸点之前不会触发。如果按下指针的时间太短并且触发的是 Tapped 而不是 Hold，或者如果 Hold 动作以`HoldingState`Canceled 结束，`RightTapped`则不会触发。

# jquery - 如何在另一个自动缩放的 div 中获得自动完成结果？

> ID：10931787
> 
> 赞同：1
> 
> 时间：2012-06-07T12:26:59.853
> 
> 标签：jquery, jquery-ui, autocomplete

我想在另一个自动缩放（高度）div 中获得自动完成结果。

这是我的代码：

```
var availableTags = [
        "ActionScript",
        "AppleScript",
        "Asp",
        "BASIC",
        "C",
        "C++"
    ];
    $( "#search" ).autocomplete({
        source: availableTags,
        open: function(event, ui) {
          $('ul.ui-autocomplete').removeAttr('style').hide().appendTo('.searchSuggest').show();
        }
    });

<div class="searchSuggest"></div>
<div class="anotherDiv"></div> 
```

除了未缩放（高度）的**searchSuggest** div 外，一切都很好，所以我的结果出现在下一个 div 上。我想知道如何自动缩放我的**searchSuggest** div。

任何想法 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:58:49.887

你使用 jQuery UI CSS 框架吗？

IMO 有两件事会阻止容器**searchSuggest**与结果列表一起增长（`.ui-menu`实际上是一个小部件）

*   `ul.ui-autocomplete`has ，这`position: absolute`意味着元素不在流中

*   它也有`float: left`，以及菜单项

您可以覆盖这些设置：

```
.searchSuggest .ui-autocomplete {
    position: relative;
    float: none;
}

.searchSuggest .ui-menu .ui-menu-item {
    float: none;
} 
```

**[演示](http://jsfiddle.net/didierg/vpWf7/)**

# java - GWT 类成员命名

> ID：10931790
> 
> 赞同：0
> 
> 时间：2012-06-07T12:27:10.660
> 
> 标签：java, javascript, gwt, web-worker, renaming

我正在使用 GWT。

在将 Java 代码编译为 Javascript 代码时，有时会更改某些成员的名称。例如：私有 int 高度；在 JS 中变为：height_0；

例子：

`public class TestClass {`

 ````
 private int a;

public TestClass()
{
    a = 0;
}

public TestClass(int a)
{
    this.a = a;
}

public int getMember()
{
    return a;
}

public void advance()
{
    a++;
} 
```` 

`}`
将产生如下输出：

```
function TestClass_0(){

 this.a_0 = 0;

}

function TestClass_1(a){

 this.a_0 = a;

}

function TestClass(){

}

_ = TestClass_1.prototype = TestClass_0.prototype = TestClass.prototype = new Object_0;

_.advance_0 = function advance(){

++this.a_0;

}

;

_.getClass$ = function getClass_1(){

return Lcom_autodesk_autocadws_gwt_platform_testExporter_TestClass_2_classLit;

}

;

_.getMember_0 = function getMember(){

return this.a_0;

}

;

_.a_0 = 0;

} 
```

成员 a 的名称已更改为 a_0。在某些情况下，当使用 web worker 时，代码会在 web worker 脚本上进行不同的编译，并且不会更改成员的名称（或者会更改为 a_1，例如）。我的问题是当我将消息中的对象传输给网络工作者时。在用 Java 编写 web worker 端时，我希望访问成员 a，而不是 a_0。使用 getter 并不能解决问题，因为它们在编译为 JS 时被直接访问替换。

我的问题：为什么会发生这些命名变化？在哪些情况下？有可能避免它们吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:33:15.467

在大多数情况下，这些字段实际上会被重命名为`a`,`b`等。您在此处看到的是由于编译`-style PRETTY`不会混淆代码。

GWT 混淆代码的原因是为了使其更小。

如果您需要将对象传递给*外部世界*，您必须将它们*序列化*（或将它们映射到 JavaScript 对象）到一个稳定的结构。

最简单的方法是使用`JavaScriptObject`. 您还可以查看[gwt-exporter](http://code.google.com/p/gwt-exporter)。

# java - 用于 JAVA 资源包字符串完成的 Eclipse 插件

> ID：10931791
> 
> 赞同：0
> 
> 时间：2012-06-07T12:27:10.930
> 
> 标签：java, eclipse, localization, eclipse-plugin

是否有任何 Eclipse 插件，它允许我从本地化资源包中自动完成（CTRL+SPACE）字符串？

或者是否有任何其他易于本地化的良好做法？

我现在的状态。它正在工作，但我认为可能有更简单的方法。

这是我的本地化课程：

```
/**
 * Singelton class to provide localization Strings
 * 
 * @author Andreas Freitag
 * 
 */
public class Localization {
  private static Localization instance = null;
  private Options options;
  private ResourceBundle captions;

  private Localization() {
    options = Options.getInstance();
    Locale locale = new Locale(options.getLanguage());
    Locale.setDefault(new Locale(options.getLanguage()));
    captions = ResourceBundle.getBundle("res.localization.localizationMessages", locale);
  }

  /**
   * Getter for the singelton localization (thread-safe)
   * */
  public synchronized static Localization getInstance() {
    if (instance == null) {
      synchronized (Localization.class) {
        instance = new Localization();
      }
    }
    return instance;
  }

  /**
   * A little convenience for getting the Localized strings
   * 
   * @param name
   *          of the element to search for
   * @return the localized String
   */
  public String getString(String name) {
    return captions.getString(name);
  }

} 
```

我通过访问的本地化字符串`Localization.getInstance.getString("Infoframe.Example");`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:40:27.967

我认为它不会为您提供自动完成功能，但对于 java 项目，您可以运行`Source > Externalize Strings...`以获取一个向导，该向导将为您收集您想要的任何字符串到资源包中，并用加载 ResourceBundle 属性的调用替换它们的出现钥匙。

对于 Eclipse 插件，他们使用工具和子类`org.eclipse.osgi.util.NLS`来提供公共字段与资源键匹配的类（因此您可以获得自动完成）。

# c# - 图片上传工具 MVC3 C#

> ID：10931805
> 
> 赞同：0
> 
> 时间：2012-06-07T12:28:23.300
> 
> 标签：c#, asp.net-mvc-3, image, upload, visual-web-developer-2010

我正在寻找一些帮助来建立一个设施，以允许您将一些图像上传到远程位置，然后将这些图像存储在数据库中，并在网页上显示链接和缩略图。

这可能与 Facebook 所做的非常相似，但它适用于具有登录功能的私人网站。

用户操作基本上是：

登录网站 --> 点击“上传”按钮，浏览并选择单个或多个图像文件 --> 点击“开始” --> 然后将图像上传到远程网络服务器，并创建一个新相册并在网页上显示图片的缩略图链接。

这很难实现吗？

我是一个初学者，只构建了几个非常基本的站点，主要使用 MVC 教程。这是我自己的个人网站，我希望有这种设施，让我自己和朋友在旅行等时上传我们所有的各种图像。

提前谢谢了。

# module - 将 JavaScript 文件与依赖项连接并将它们作为模块输出的最佳方法？

> ID：10931806
> 
> 赞同：9
> 
> 时间：2012-06-07T12:28:24.020
> 
> 标签：module, concatenation, requirejs

我知道这个问题经常以类似的方式出现，但似乎没有解决方案完全符合我的需求。我有以下问题：

在开发中，我使用多个 JS 文件（每个“对象”一个文件）。这些 JS 文件相互之间有几个依赖关系 - 有些依赖于其他文件，我需要先加载它们。目前我使用RequireJS以正确的顺序加载每个JS文件，所以我为每个文件定义了一个模块。很好，花花公子。但现在我想将我所有的 JS 文件连接成一个大 JS 文件，它应该是一个模块本身。我使用 RequireJS 优化器 r.js 来做到这一点。**我的问题：**每个 JS 文件都连接到一个大的 JS 文件，但是每个对象的模块定义都包含在其中。我没有一个大文件中有一个大模块，而是一个大文件中有很多模块。

之后，我尝试了 grunt 进行连接，效果很好，但忽略了文件的依赖关系。它只是按字母顺序连接每个文件，或者我必须在我的 gruntfile 中硬编码顺序。

我该如何解决这个问题？

就像我的问题的一个例子：我有以下文件（伪代码）：

```
FileA
- define FileA module
- depends on FileB
- FileA Logic

FileB
- define FileB module
- FileB Logic 
```

我想要这个输出：

```
LibFile
- define LibFile module
- FileB Logic, FileA Logic 
```

但是我用 r.js 得到了这个（从 FileA 和 FileB 复制模块定义）：

```
LibFile
- define FileB module
- FileB Logic
- define FileA module
- depends on FileB
- FileA Logic 
```

我用咕噜声（错误的顺序）得到这个：

```
LibFile
- FileA Logic
- FileB Logic 
```

也许这个问题有点愚蠢，但我无法用每个人似乎都在使用的工具来解决这个问题……我也尝试了 grunt-requirejs 插件。但它抛出了几个我无法解决的错误。

谢谢你，皮波

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-09T02:48:09.010

我要把它变成一个答案。只是这样代码更清晰一些。

我是凭记忆做这些的（因为我现在无法测试）所以有些小事情可能并不完全准确。

这当然取决于您如何打包模块，但一种方法是将所有较小的模块注册到一个更大的模块中：

文件 A.js

```
define([], function() {
    // do something
    return A;
}); 
```

文件 B.js

```
define(['path/to/A'], function(A){
    // do something with A and more
    return B;
}); 
```

然后，将它们打包在一起：

文件 mylib.js

```
define(['path/to/A', 'path/to/B'], function(A, B){
    return {
        A : A,
        B : B
    }
} 
```

然后你可以将你的构建配置文件指向`mylib.js`它，它将被合并到一个大文件中。它不会是一个全封装模块，但它会有一个引用其他所有内容的入口模块。然后你可以像这样使用它：

```
require.config({
    paths : {
        'path/to/mylib' : 'real/path/to/mylib/on/server'
    }
});
require(['path/to/mylib'], function(Lib) {
    // do something using Lib.A or Lib.B
} 
```

要注意的一件事是您的大模块文件的 ID。默认情况下，RequireJS 构建会提供与物理路径匹配的 ID（来自`appDir`IIRC），并且您必须在加载依赖项时匹配该 ID。简而言之，如果您的结果 `mylib.js`文件有一个接收 name 的主模块`'path/to/mylib'`，您将必须匹配它并通过相同的 ID 加载它（使用`require.config.paths`）或使用地图等（其中一些需要 RequireJS 2.0）。

**以下是我问你为什么要做“大模块”这件事的原因**

**另一件值得注意的事情是，如果 mylib.js 已加载**，您所有内部较小的模块也会收到与其物理路径匹配的 ID，并且您可以在使用大包模块时使用这些 ID（这样您不仅可以通过 访问它们`Lib.A`）：

 **```
require(['path/to/A'], function(A) {
    // do something using A
} 
```**

# css - 如果保持内联，则缩略图会下降，css

> ID：10931810
> 
> 赞同：0
> 
> 时间：2012-06-07T12:28:59.387
> 
> 标签：css, ipb

我的网站上有一组由车库系统创建的 4 个随机生成的缩略图：

[http://www.r32oc.com](http://www.r32oc.com)

您可以在它们加载的主标题区域下方看到。

它们最初以正确的顺序加载，并且排列得很好，但是当页面完成加载时，它们彼此重叠。

我查看了 CSS 和模板，但认为我遗漏了一些明显的原因。我尝试添加浮动，但是尽管添加了清除 div，但它们会影响页面上的其他元素。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:36:52.517

你可以添加这个CSS：

```
.main_thumb_block { float: left; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:42:36.783

为您的班级添加宽度`class="ipsBox_container"`

```
.ipsBox_container
{
width:100%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T12:32:27.673

你有没有尝试过...

```
a {
    display:inline-block;
} 
```

?

# c# - Fluent nHibernate 保存或更新派生实体

> ID：10931812
> 
> 赞同：4
> 
> 时间：2012-06-07T12:29:00.947
> 
> 标签：c#, nhibernate, save, fluent, derived-class

我有一个数据来自数据库的实体，但是，它的一些属性填充了来自另一个源（文件系统）的数据，所以我所做的是我的存储库，而不是返回我的实体，而是返回一个代理对象派生自主要实体，所以当我尝试保存或更新时的问题是它说该类没有持久性......

是否可以保存派生类但作为主类？我的代理对象与真实的对象相同，只是它覆盖了几个方法。

谢谢！

塞布:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T15:09:40.217

是的，两者都`ISession.Save`具有`ISession.Update`允许您指定实体名称的重载。

例子：

```
class Foo { ... }
class FooProxy : Foo { ... }

session.Save(typeof(Foo).FullName, aFooProxy); 
```

# jquery - 使用带有 POST 参数的 JQuery 和 ASHX 返回动态文件

> ID：10931820
> 
> 赞同：1
> 
> 时间：2012-06-07T12:29:45.587
> 
> 标签：jquery, asp.net, download

您好我需要在服务器端生成一些文件并使用 AJAX 将它们返回给客户端

我在服务器（ASHX）上创建下一个代码

```
public void ProcessRequest(HttpContext context)
    {
        string dataViewID = context.Request.Form["dataViewID"];

        MyService service = new MyService();
        var data = service.GetStores(int.Parse(dataViewID), "", null);
        IMyExportService exportservice = new MyExportService();

        HttpContext.Current.Response.ContentType = "application/octet-stream";
        HttpContext.Current.Response.AddHeader("Content-Disposition", "attachment; filename=" + "export.cvs");  

        using (var ms = new MemoryStream())
        {
            using (var sw = new StreamWriter(ms))
            {
                exportservice.ExportTo("csv", sw, data);                
                ms.Position = 0;                                                
                HttpContext.Current.Response.Write(ms.ToArray());
            }

        }
    } 
```

在客户端我创建下一个代码： $("#btnexport").click(function () { var paramData = { "dataViewID": 1524129, "filter": "", extent: null }; //full map $.ajax ({ url: '/marketVuePortal/'+'FileExport.ashx', type: 'POST',
dataType: "json", data: {dataViewID:1524129},
success: function (result) { //这里应该是什么？ }，错误：函数（xhr）{警报（“错误”）；}}
）}

```
); 
```

但是我有 2 个问题，我不知道为什么，但我总是出错，但在调试时所有代码都运行良好。第二个是我不知道怎么说浏览器他需要保存页面而不重新加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:13:30.630

> /* * ------------------------------------------------ --------------------- * jQuery-Plugin - $.download - 允许对文件进行简单的 get/post 请求 * by Scott Jehl, scott@filamentgroup.com * [http://www.filamentgroup.com](http://www.filamentgroup.com) * 参考文章： [http ://www.filamentgroup.com/lab/jquery_plugin_for_requesting_ajax_like_file_downloads/](http://www.filamentgroup.com/lab/jquery_plugin_for_requesting_ajax_like_file_downloads/) * 版权所有 (c) 2008 Filament Group, Inc * 在 MIT (filamentgroup.com/examples/mit-license.txt) 和 GPL (filamentgroup.com/examples/gpl-license.txt) 许可下获得双重许可。* ------------------------------------------------- ------------------- */ jQuery.download = function(url, data, method){ //需要的url和数据选项 if( url && data ){ // data 可以是参数字符串或数组/对象 data = typeof data == 'string' ？数据：jQuery.param（数据）；//将参数拆分为表单输入 var inputs = ''; jQuery.each(data.split('&'), function(){ var pair = this.split('='); inputs+=''; }); //发送请求 jQuery(''+inputs+'') .appendTo('body').submit().remove(); }; };

这是我找到的解决方案。

# javascript - 如何按数字升序对对象数组进行排序？

> ID：10931821
> 
> 赞同：0
> 
> 时间：2012-06-07T12:29:46.633
> 
> 标签：javascript, jquery

我有一个对象数组，如下所示：

```
var array = {
    "112" : {
             "id": "3",
             "name": "raj"
    },
    "334" : {
             "id": "2",
             "name": "john"
    },
    "222" : {
             "id": "5",
             "name": "kelvin"
    }
} 
```

现在我想按升序对数组进行排序，`id`然后在数组中恢复它。我尝试使用`sort()`但无法做到。请帮助如何做到这一点，当我显示来自数组的数据时，它会被排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-04T15:56:37.540

```
var array = {
    "112" : {
         "id": "3",
         "name": "raj"
    },
    "334" : {
         "id": "2",
         "name": "john"
    },
    "222" : {
         "id": "5",
         "name": "kelvin"
    }
}
var sortedObject = Array.prototype.sort.apply(array);

result:
{
    "112": {
        "id": "3",
        "name": "raj"
    },
    "222": {
        "id": "5",
        "name": "kelvin"
        },
    "334": {
        "id": "2",
        "name": "john"
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:39:35.230

假设你的意思是你的代码是一个对象数组，即：

```
var unsortedArray = [
    { id: 3, name: "raj" },
    { id: 2, name: "john" },
    { id: 5, name: "kelvin" } 
]; 
```

然后，您可以通过将一个函数传递给比较 id 的 Array.sort() 来按 id 排序：

```
var sortedArray = unsortedArray.sort(function(a, b) {
    return a.id - b.id 
}); 
```

正如其他人指出的那样，您拥有的是一个包含对象的对象，而不是一个数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T12:34:17.993

JavaScript 对象根据定义是无序的。语言规范甚至不保证，如果您连续两次迭代对象的属性，它们第二次将以相同的顺序出现。

如果您需要订购物品，请使用数组和`Array.prototype.sort`方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T12:32:45.857

那是一个对象，但您可以像这样对数组进行排序：

**工作演示：http:** [//jsfiddle.net/BF8LV/2/](http://jsfiddle.net/BF8LV/2/)

希望这有帮助，

**代码**

```
 function sortAscending(data_A, data_B)
{
    return (data_A - data_B);
}
var array =[ 9, 10, 21, 46, 19, 11]
array.sort(sortAscending) 
alert(array);​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T12:31:02.037

这不是一个数组，它是一个对象（或者如果不是因为语法错误（`=`应该是`:`））。它没有订单。

您可以改用数组（使当前属性名称成为子对象上键的值）。

或者，您可以使用`for`循环来构建键名数组，然后对其进行排序并将其用作按顺序访问对象的基础。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T12:41:22.213

没有多少人知道它`Array.sort` *可以*用于其他类型的对象，但它们必须具有长度属性：

```
array.length = 334;
Array.prototype.sort.call(array, function(a, b) {return a.id - b.id;}); 
```

不幸的是，如果您的“阵列”充满了像您这样的“洞”，这将无法正常工作。

# ios - UIView hitTest 阻止点击子视图

> ID：10931822
> 
> 赞同：3
> 
> 时间：2012-06-07T12:29:47.647
> 
> 标签：ios, xcode, uiview, uiscrollview, hittest

我有以下视图结构

```
UIView(1)
   |--> UIScrollView
        |-----------> UIView(2)
                        |------> UIButton 
```

*UIView(1)*中的hitTest已被以下内容覆盖：

```
- (UIView *)hitTest:(CGPoint) point withEvent:(UIEvent *)event
{
    /* this view should have only view only: the scroll view */
    UIView * vv = [[self subviews] objectAtIndex:0];

    if ([vv pointInside:point withEvent:event])
    {
        UIView *rv = [vv hitTest:point withEvent:event];
        return rv;
    }

    if ([self pointInside:point withEvent:event])
    {
        return vv;
    }
    return nil;
} 
```

这是为了捕捉*UIScrollView*拖动到滚动视图本身之外所必需的。

问题是，当单击 UIButton 时，附加到它的事件不会触发。从*hitTest*返回的视图是*UIView(2)*。

如何让*UIButton*响应点击事件？

**编辑根据***Mundi* 的建议，我将 hitTest 与以下内容进行了交换，并且可以正常工作。当然，我忘了调用 [super hitTest:]。

```
- (UIView *)hitTest:(CGPoint) point withEvent:(UIEvent *)event
{
    /* this view should have only view only: the scroll view */
    UIView * scrv = [self findScrollView];

    UIView *superView = [super hitTest:point withEvent:event];
    if (superView == self)
    {
        return scrv;
    }

    return superView;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T12:40:47.750

`[super hitTest:point withEvent:event]`在适当的时候打电话怎么样？

# solr - Solr 4.0 中的热门词汇

> ID：10931826
> 
> 赞同：1
> 
> 时间：2012-06-07T12:30:04.843
> 
> 标签：solr, trending

有人知道 Solr 4.0 趋势词/主题功能即将推出或插件支持吗？

我知道各种 DIY 算法方法和一些可能可以使用的外部框架（Mahout 等），但考虑到它的流行，我想已经在努力使它成为 Solr 的可插拔部分。

如果做不到这一点，如果有人可以指出使用外部框架详细说明的资源，那将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:30:37.550

如果您想要一种非常老套的方法，您可以在 Solr 前端（PHP 或其他）中捕获传入的搜索，然后将它们发送到外部数据库，然后在该数据库中查询特定时间段内的热门搜索，和即将到来的异常值搜索。

# qt - 从 2 个线程发出 2 个网络请求时，Qt 应用程序崩溃

> ID：10931827
> 
> 赞同：1
> 
> 时间：2012-06-07T12:30:11.683
> 
> 标签：qt, networking, qthread, qnetworkaccessmanager

我有一个 Qt 应用程序，它在启动时从主线程启动两个线程。这两个线程都使用 QNetworkAccessManager 对象的不同实例发出网络请求。我的程序在大约 50% 的时间里不断崩溃，我不确定哪个线程正在崩溃。

两个线程之间没有直接发生数据共享或信令。当某个事件发生时，一个线程向主线程发出信号，而主线程又可以向第二个线程发出信号。但是，通过打印日志，我很确定在信令期间不会发生崩溃。

两个线程的结构如下。除了 URL 等之外，线程之间几乎没有任何区别。

```
MyThread() : QThread() {
    moveToThread(this);
}

MyThread()::~MyThread() {
    delete m_manager;
    delete m_request;
}

MyThread::run() {
    m_manager = new QNetworkAccessManager();
    m_request = new QNetworkRequest(QUrl("..."));

    makeRequest();
    exec();
}

MyThread::makeRequest() {
    m_reply = m_manager->get(*m_request);
    connect(m_reply, SIGNAL(finished()), this, SLOT(processReply()));
    // my log line
}

MyThread::processReply() {
    if (!m_reply->error()) {
        QString data = QString(m_reply->readAll());
        emit signalToMainThread(data);
    }
    m_reply->deleteLater();
    exit(0);
} 
```

现在奇怪的是，如果我不启动其中一个线程，程序运行良好，或者至少在大约 20 次调用中不会崩溃。如果两个线程一个接一个地运行，程序就不会崩溃。如果我同时启动和运行两个线程，该程序只会崩溃大约***一半的时间。***

我从日志中收集到的另一件有趣的事情是，每当程序崩溃时，标有注释的行`my log line`是两个线程最后执行的行。所以我不知道哪个线程导致崩溃。但这让我怀疑 QNetworkAccessManager 应该受到责备。

我对导致崩溃的原因一无所知。我将不胜感激任何建议或指示。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:19:37.270

首先[你做错了](http://labs.qt.nokia.com/2010/06/17/youre-doing-it-wrong/)！首先修复你的线程

// 编辑根据我自己对这种模式的经验，我知道它可能会导致许多不清楚的崩溃。我会从清除这件事开始，因为它可能会理顺一些事情并使发现问题变得清晰。另外我不知道您如何调用`makeRequest`. 还有关于 QNetworkRequest。它只是一个数据结构，所以你不需要在堆上制作它。堆栈结构就足够了。您还应该记住（或以某种方式保护）不覆盖 m_reply 指针。你打电话`makeRequest`不止一次吗？如果这样做，则可能导致在上一个请求完成后删除当前处理的请求。

如果您两次调用 makeRequest 会发生什么：

1.  makeRequest 的第一次调用分配 m_reply 指针。
2.  makeRequest 的第二次调用第二次分配 m_reply 指针（替换分配的指针但不删除指向的对象）
3.  第二个请求在第一个之前完成，因此调用了 processReply。deleteLater 在第二个排队
4.  在 eventloop 的某个地方，第二个回复被删除，所以从现在开始 m_reply 指针指向一些随机（已删除）的内存。
5.  第一个回复完成，因此调用了另一个 processReply，但它对指向垃圾的 m_reply 进行操作，因此 m_reply 的每次调用都会产生崩溃。

这是可能的情况之一。这就是为什么您不会每次都崩溃的原因。

我不确定你为什么在回复完成时调用 exit(0) 。如果您使用不止一个 makeRequest 调用，这里也是不正确的。请记住，QThread 是单个线程的接口，而不是线程池。`start()`因此，当线程实例仍在运行时，您不能第二次调用它。此外，如果您在入口点创建网络访问管理器，`run()`您应该在`exec()`. 请记住，这`exec()`是阻塞的，因此在线程退出之前不会删除您的对象。

# jquery - 无法在附加的锚点上获得点击事件

> ID：10931831
> 
> 赞同：1
> 
> 时间：2012-06-07T12:30:17.603
> 
> 标签：jquery, drupal

我确信这与 clone() 有关，但我在上面找不到任何东西。我的问题是我正在添加一些带有锚点的 HTML。这些锚点应该响应 click() 然后开始一个 ajax 调用。我似乎无法阻止锚点默认事件处理 $('.term a')。

```
(function($) { 
$(document).ready(function() {
var item = '#main-menu li';
var http_addy = 'http://windowsdeveloper.loc';
// voacabulary id is set in the menu. If one is found then load the terms to the   menu
$('*[id*=vocabulary]:visible').each(function() {
            var voc_id = $(this).attr('id').split('-');
            var parent_li = $(this).parent('[class^=menu-]');
            $.get(http_addy + '/category/content/term_list/' + voc_id[1], function(data) {
                    $(parent_li).append(data);
            });
     });
   // use this to get the terms nodes
    $('div.term a').click(function(event){
            var url = $(this).attr('href');
            $.get(url, function(data) {
                    $('#term-nodes').append(data);                      
            });
            return false;
    });

    $(item).mouseenter(function(event){
        // Styles to show the box
            $(this).children('.vocabulary').show();
        }       
    );
    $('.navigation').mouseleave(
        function() {
            $('#main-menu li').children('.vocabulary').hide();
        }
    );
});
})(jQuery);

<ul id="main-menu" class="links inline clearfix main-menu">
<li class="menu-1050 first">
<a id="vocabulary-3" href="/newsarticletopics/windowsdeveloper">Articles</a>
<div id="term-nodes"></div>
<div id="voc-3" class="vocabulary" style="display: none;">
<div id="term-12" class="term">
    <a href="/category/content/term_nodes/12">Serien</a>
</div>
</div>
</li> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T12:33:53.500

这是因为您正在动态加载一些内容并更新 DOM。你应该使用 jQuery[`on`](http://api.jquery.com/on/)来绑定你的点击事件，就像这样

```
// use this to get the terms nodes
$(document).on("click",".term a",function(event){
        event.preventDefault();
        var url = $(this).attr('href');
        $.get(url, function(data) {
                $('#term-nodes').append(data);                      
        });           
}); 
```

jQuery on 适用于 DOM 中当前和未来的元素。`on`从 jQuery 1.7+ 开始可用。如果您使用的是以前的版本，则应考虑[`live`](http://api.jquery.com/live/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:38:33.960

```
$("selector").on("click", function(e){

 // Do some code here

}); 
```

如果您使用的是旧版本的 jQuery，您可以使用 .delegate()

```
$("selector").delegate("click", function(e){

  // .delegate() takes the parameters a bit differently i think , correct me if i am wrong
 // Do some code here

}); 
```

[动态创建元素的事件绑定？](https://stackoverflow.com/questions/203198/jquery-event-binding-on-dynamically-created-elements)

# javascript - 跨浏览器有效的 JavaScript 名称

> ID：10931833
> 
> 赞同：1
> 
> 时间：2012-06-07T12:30:42.863
> 
> 标签：javascript, variables

在您使用“RTFM”或我访问过的一堆链接快速发布之前，我完全了解不使用的记录保留变量名称。

我能找到的最好的清单在这里：

[http://es5.github.com/x7.html#x7.6.1.1](http://es5.github.com/x7.html#x7.6.1.1) 和 [http://www.javascripter.net/faq/reserved.htm](http://www.javascripter.net/faq/reserved.htm)

我要的是仅在 1 个或 2 个浏览器上无效的变量名称。

例如，我可以定义`print`，但这会导致错误，因为 print 已在全局范围上定义`window`。为什么不将此记录为保留关键字？

是否有一大堆要避免的变量名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:43:02.687

> 我要的是仅在 1 个或 2 个浏览器上无效的变量名称。

如果存在任何此类词，则该浏览器将不符合 ECMA-262。只有 ECMA-262 中的保留字是“无效的变量名”（前提是该名称符合变量名的标准，例如允许的字符）。

> 为什么不将 [print] 记录为保留关键字？

保留字只能由具有保留字概念的标准定义，唯一与在具有该概念的浏览器中编写 DOM 脚本相关的标准是 ECMA-262。而且它没有将*print*列为保留字，所以它不是一个。

有各种定义宿主对象及其属性的 DOM 标准，它们可能与保留字概念最接近的是只读属性或不可写属性。[`window.print`](http://dev.w3.org/html5/spec/user-prompts.html#printing)在 HTML5 中定义，它没有将它定义为不可写，或者如果分配给它或尝试修改它，它应该抛出错误。所以它没有表现出任何接近保留字的行为。

> 是否有一大堆要避免的变量名？

不，因为没有。但是，宿主对象（如*window*）具有可写的默认属性，您应该避免覆盖它们。它们应该列在不同的地方，例如 HTML5 规范和浏览器供应商文档。

例如以下*窗口*对象的链接：

1.  W3C HTML5 窗口对象：[http ://www.w3.org/TR/html5/browsers.html#the-window-object](http://www.w3.org/TR/html5/browsers.html#the-window-object)
2.  MDN 窗口对象：[https ://developer.mozilla.org/en/DOM/window](https://developer.mozilla.org/en/DOM/window)
3.  MSDN 窗口对象： http: [//msdn.microsoft.com/en-us/library/ms535873 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms535873%28v=vs.85%29.aspx)

此外，还有一个简单的 for..in 循环（根据 Berji 的回答）来发现特定时间的可枚举属性，但这可能不是所有可能属性名称的完整列表，并且将包括用户定义的属性以及默认浏览器属性无区别。

采用避免可能的属性名称并尽量减少使用全局变量（即窗口对象的用户定义属性）的命名约定是一种更好的策略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T23:57:23.223

如果您想要一个浏览器定义的变量的大列表来扩展保留关键字的官方列表，请在空白页面（about:blank）上在控制台中键入以下内容：

```
>>> Object.getOwnPropertyNames(window)
>>> Object.getOwnPropertyNames(Object.getPrototypeOf(window)) // sometimes not Object 
```

这将产生一个你绝对不应该使用的字符串数组。它也包括`"print"`。

然而它将依赖于浏览器，因为有些没有实现使用该`Window`界面的所有很酷的 HTML5 起草的东西；例如，你不会`"Worker"`在 IE9、`"openDatabase"`FF 等中找到。此外，它可能不会列出遗留属性，例如`"onload"`，尽管您将能够获得它的属性描述符（和`"onload" in window === true`）。

# jquery - 我应该为新的 jQuery AJAX 代码使用 .done() 和 .fail() 而不是成功和错误

> ID：10931836
> 
> 赞同：191
> 
> 时间：2012-06-07T12:31:04.720
> 
> 标签：jquery

我这样编码：

```
$.ajax({ cache: false,
    url: "/Admin/Contents/GetData",
    data: { accountID: AccountID },
    success: function (data) {
        $('#CityID').html(data);
    },
    error: function (ajaxContext) {
        alert(ajaxContext.responseText)
    }
}); 
```

但是当我最后查看 jQuery[`.ajax()`文档](http://api.jquery.com/jQuery.ajax/)时，它似乎建议我应该像下面这样编码，或者至少它建议添加 a`.done()`和 a `.fail()`：

```
var request = $.ajax({ cache: false,
    url: "/Admin/Contents/GetData",
    data: { accountID: AccountID }
});

request.done(function (data) {
    xxx;
});
request.fail(function (jqXHR, textStatus) {
    xxx;
}); 
```

**更新**

如果我这样编码是一样的还是把它分成三部分有什么好处？

```
$.ajax({ cache: false,
    url: "/Admin/Contents/GetData",
    data: { accountID: AccountID }
}).done(function (data) {
    xxx;
}).fail(function (jqXHR, textStatus) {
    xxx;
}); 
```

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2012-06-07T12:35:00.503

如 user2246674 所述，使用`success`and`error`作为 ajax 函数的参数是有效的。

为了与先前的答案保持一致，请阅读文档：

> **弃用通知**：
> 
> jqXHR.success()、jqXHR.error() 和 jqXHR.complete() 回调将在 jQuery 1.8 中被弃用。要为最终删除准备代码，请改用 jqXHR.done()、jqXHR.fail() 和 jqXHR.always()。

如果您正在使用回调操作函数（例如使用方法链接），请使用`.done()`,`.fail()`和`.always()`代替`success()`,`error()`和`complete()`。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-12-21T09:16:12.013

我想在@Michael Laffargue 的帖子上添加一些内容：

`jqXHR.done()`是比较快的！

`jqXHR.success()`在回调中有一些加载时间，有时可能会过度杀伤脚本。我以前很难做到这一点。

**更新：**

使用`jqXHR.done()`,您可以更好地使用 ajax 请求进行操作`jqXHR.fail()`。`jqXHR.always()`一般来说，您可以在某个变量或对象中定义 ajax，并在代码的任何部分中使用该变量或对象并更快地获取数据。好的例子：

```
/* Initialize some your AJAX function */
function call_ajax(attr){
    var settings=$.extend({
        call            : 'users',
        option          : 'list'
    }, attr );

    return $.ajax({
        type: "POST",
        url: "//exapmple.com//ajax.php",
        data: settings,
        cache : false
    });
}

/* .... Somewhere in your code ..... */

call_ajax({
    /* ... */
    id : 10,
    option : 'edit_user'
    change : {
          name : 'John Doe'
    }
    /* ... */
}).done(function(data){

    /* DO SOMETHING AWESOME */

}); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-03-17T21:20:28.190

简单来说

```
$.ajax("info.txt").done(function(data) {
  alert(data);
}).fail(function(data){
  alert("Try again champ!");
}); 
```

如果它获得了 info.text，那么它将发出警报以及您添加的任何功能，或者如果无法从服务器检索 info.text，则发出警报或错误功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-04T06:17:07.323

当我们要在旧的现有应用程序中将 JQuery 从 1.x 迁移到 2x 或 3.x 时，我们将使用 .done,.fail 而不是 success,error 因为 JQuery up gradation 将被弃用这些方法。对于例如，当我们调用服务器 Web 方法时，服务器将 Promise 对象返回给调用方法（Ajax 方法），并且该 Promise 对象包含 .done、.fail..etc 方法。因此，对于成功和失败响应，我们将相同。下面是示例（对于 POST 请求，我们可以为 GET 之类的请求类型构造相同的方式......）

```
 $.ajax({
            type: "POST",
            url: url,
            data: '{"name" :"sheo"}',
            contentType: "application/json; charset=utf-8",
            async: false,
            cache: false
            }).done(function (Response) {
                  //do something when get response            })
           .fail(function (Response) {
                    //do something when any error occurs.
                }); 
```

# javascript - 更改翻转切换开关中的文本，jQuery Mobile

> ID：10931839
> 
> 赞同：0
> 
> 时间：2012-06-07T12:31:28.493
> 
> 标签：javascript, jquery, jquery-mobile, cordova

我正在开发一个多语言 iOS/Android 应用程序并使用 xml 文件来获取我的翻译。翻译函数查找 i18n-xxx 类，并用 xml 文件中的文本替换具有该类的 html 元素的文本。

例子：

html:

```
<a href="url.html" data-role="button" class="i18n-my-button">Button</a> 
```

在 xml 文件中：

```
<translation id="i18n-my-button">
   <en>Button</en>
   <sv>Knapp</sv>
</translation> 
```

Javascript：

```
...
$(xml).find("translation").each(function() {
   ...
   var id = $(this).attr("id"); //i18n-my-button
   var translation = $(this).find("sv").text();  //Knapp
   ...
   $("." + id).find("span.ui-btn-text").text(translation);
}); 
```

通过这种方法，我几乎可以翻译任何 html 元素，例如按钮、单选按钮和复选框。但我无法翻译翻转拨动开关。

这就是我希望的样子：

```
<select name="slider" id="flip-a" data-role="slider">
    <option value="off" class="i18n-off">Off</option>
    <option value="on" class="i18n-on">On</option>
</select> 
```

我希望能够使用与其他 html 元素相同的功能将“Off”和“On”翻译为“Av”和“På”。问题是 jQuery Mobile 将简单的选择翻译成一大段代码，我还没有确定我应该翻译什么元素以及如何翻译。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:33:01.060

当滑块由 JQM 设置样式/创建时，您可以挂钩到触发的[create事件。](http://jquerymobile.com/demos/1.1.0/docs/forms/switch/events.html)

```
$( ".selector" ).slider({
   create: function(event, ui) { 
      //Do translation here
   }
}); 
```

# java - 在 Linux 机器上配置 procrun？

> ID：10931841
> 
> 赞同：1
> 
> 时间：2012-06-07T12:31:40.567
> 
> 标签：java, windows-services, procrun

我对 procrun 很陌生。请问，任何人都可以建议如何使Java应用程序作为Windows服务运行吗？如果可能，一步一步来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:37:58.957

我从未使用过 procrun，但作为替代方案，我可以推荐 YAJSW。

我的一些同事成功地使用它来包装一个 jar 作为 Windows 服务。

这里的快速入门应该会有所帮助：

[http://yajsw.sourceforge.net/#mozTocId527639](http://yajsw.sourceforge.net/#mozTocId527639)

# facebook - facebook认证后无法打开重定向页面

> ID：10931844
> 
> 赞同：2
> 
> 时间：2012-06-07T12:31:50.317
> 
> 标签：facebook, codeigniter, facebook-graph-api, session-state

我在codeigniter下使用facebook连接。身份验证后我想重定向我的控制器的成功方法这是我的控制器：

```
class Welcome extends CI_Controller {
function __construct()
{
    parent::__construct();

    $this->load->model('Facebook_model');
}

function index()
{
    $fb_data = $this->session->userdata('fb_data');

    $data = array(
                'fb_data' => $fb_data,
                );

    $this->load->view('welcome', $data);
}

function topsecret()
{
    $fb_data = $this->session->userdata('fb_data');

    if((!$fb_data['uid']) or (!$fb_data['me']))
    {
        redirect('welcome');
    }
    else
    {
        $data = array(
                    'fb_data' => $fb_data,
                    );

        $this->load->view('topsecret', $data);
    }
}
function success()
{
    $this->load->view('welcome_message');
}
} 
```

我的 facebook api 访问模型：

```
class Facebook_model extends CI_Model {
public function __construct()
{
    parent::__construct();
    $config = array(
                    'appId'  => '261066574000678',
                    'secret' => '   79e11f65449988965362f58e9a4aabd7',
                    'fileUpload' => true, // Indicates if the CURL based @ syntax for file uploads is enabled.
                    );

    $this->load->library('Facebook', $config);

    $user = $this->facebook->getUser();

    // We may or may not have this data based on whether the user is logged in.
    //
    // If we have a $user id here, it means we know the user is logged into
    // Facebook, but we don't know if the access token is valid. An access
    // token is invalid if the user logged out of Facebook.
    $profile = null;
    if($user)
    {
        try {
            // Proceed knowing you have a logged in user who's authenticated.
            $profile = $this->facebook->api('/me?fields=id,name,link,email');
        } catch (FacebookApiException $e) {
            error_log($e);
            $user = null;
        }       
    }

    $fb_data = array(
                    'me' => $profile,
                    'uid' => $user,
                    'loginUrl' => $this->facebook->getLoginUrl(
                        array(
                            'scope' => 'email,user_birthday,publish_stream', // app permissions
                            'redirect_uri' => 'https://sanjay.localhost.com/index.php/welcome/success' // URL where you want to redirect your users after a successful login
                    )
                    ),
                    'logoutUrl' => $this->facebook->getLogoutUrl(),
                );

    $this->session->set_userdata('fb_data', $fb_data);
}
} 
```

因为我在 localhost 主机上对此进行测试，所以我还编辑了我的主机文件并将我的 localhost 主机名更改为 sanjay.localhost.com.redirect 发生但没有发生..我认为可能是因为 querystring.when 重定向发生重定向 uri 为
= >https://sanjay.localhost.com/index.php/welcome/success?state=ff5712299510defa&code=AQCaD-FAd1shuW# *=*
我不明白如何处理查询字符串中的状态和代码。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T08:25:39.580

感谢您在我的博客上与我联系。首先，Facebook 停止了对 localhost 的支持。她是链接[https://developers.facebook.com/bugs/128794873890320](https://developers.facebook.com/bugs/128794873890320)。

我还没有使用 codeigniter 开发任何应用程序，我使用的是 CakePHP，但 auth follow 应该是一样的。
1\. 在用户控制器中创建一个 fb_login 函数。
2.这个函数会遵循这个逻辑。一个。用于`$facebook->getUser()`获取用户 ID。湾。然后使用 `$facebook->api('/me')`确定。
3.如果您收到 FacebookApiException 则发送用户使用 Facebook 登录。如果您使用官方 SDK，则当前 url 将被添加到重定向 url。
4\. Facebook 将在登录后重定向您的用户。因此您将使用`$facebook->getUser()`. 将此数据保存在会话中，以供您在应用程序中进一步使用。然后将用户重定向到您的控制页面或任何其他页面。CakePHP 有`setFlash()`显示在控制面板中设置的信息的功能。我认为 Codeignator 应该有这样的东西。如果没有，您可以简单地在会话中设置一个消息并重定向用户。然后在显示味精后取消设置味精。

这是完整的代码

 `````
$uid = $facebook->getUser();        
try {
    $user_profile = $facebook->api('/me');
} catch (FacebookApiException $e) { 
    //echo $e->getMessage();
    $uid = null;
}

$loginUrl   = $facebook->getLoginUrl(
        array(
            'scope'         => 'publish_stream,offline_access,email'
        ),''
);

if (!$uid) {
    echo "<script type='text/javascript'>top.location.href = '$loginUrl';</script>";
    exit;
}
//search using uid on your user table to check if the use is returnign user or new user.
if($new_user ==1)
{
    $this->Session->setFlash('please sign up');
    //redirect to sign up
}
else
{
    $this->Session->setFlash('you are good lad');
    //reditect to control panel
} 
`````

# git - 这个分支是从哪个 git 分支签出的？

> ID：10931845
> 
> 赞同：7
> 
> 时间：2012-06-07T12:31:52.347
> 
> 标签：git

> **可能重复：**
> [找到一个分支的父分支](https://stackoverflow.com/questions/3161204/find-the-parent-branch-of-a-branch)

如何找出相关分支从中分离出来的 git 分支的名称（如果有）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T13:24:40.717

我们很容易认为`master`永远是`master`并且`my_branch`永远是`my_branch`，但事实并非如此。假设您在 Github、Windows、Linux 和办公室中有您的存储库。

因此，您有 8 个不同的分支：

```
github/master
github/my_branch
windows/master
windows/my_branch
linux/master
linux/my_branch
office/master
office/my_branch 
```

作为人类，您将它们视为`master`并且`my_branch`但 git 将它们视为 8 个不同的分支。因此，如果您有这样的网络：

```
------------------------------------------------ linux/master
 \--/ \-------/      /            \-------- office/my_branch
  | \---|--\--------/-------------------\------- my_branch
  |     |
  |   office/master
  | 
windows/master 
```

问从哪里来是什么意思`my_branch`？这是许多分支合并的结果！

* * *

在那里，所以我想告诉你的是，你的问题存在哲学问题。然而，有一种方法可以回答它，尽管并不完美。首先让我们看一下`git log`：

```
git log my_branch --pretty=oneline --graph 
```

给你一个很好的合并和东西的介绍。从 git-log 手册页：

```
--first-parent
    Follow only the first parent commit upon seeing a merge commit. This option can give a better overview when viewing the evolution of a particular topic branch,
    because merges into a topic branch tend to be only about adjusting to updated upstream from time to time, and this option allows you to ignore the individual
    commits brought in to your history by such a merge. 
```

使用它，您可以获得分支的线性历史记录。删除图形并仅输出 SHA1，您将获得：

```
git log my_branch --pretty=format:"%H" --first-parent 
```

使用以下命令，您可以判断哪些分支包含 SHA1：

```
git branch --contains <commit> 
```

使用这些命令将脚本放在一起，您可以使用以下脚本，该脚本基本上可以找到包含在您感兴趣的分支之外的另一个分支中的最新 SHA1。然后输出另一个分支。（注意：我还不擅长 bash 脚本，所以这可能效率不高）：

```
#! /bin/bash

if [ $# -lt 1 ]; then
  branch=master
else
  branch=$1
fi

sha1s=$(git log $1 --pretty=format:"%H")
res="Doesn't branch from anything"

for i in $sha1s; do
  b=$(git branch --contains $i | awk '{ if (NF > 1) print $2; else print $1 }') # use awk to remove * from current branch
  other_branch="";
  for j in $b; do
    if [ $branch != $j ]; then
      other_branch=$j
      break;
    fi
  done
  if [ -n "$other_branch" ]; then
    res=$other_branch
    break
  fi
done

printf -- '%s\n' "$res" 
```

我说它并不完美，因为以下情况。想象一下如果`my_branch`是从`master`. 事实上，你会看到这样的图表：

```
 /------------ master
------(master)-----
                    \------------ my_branch 
```

初始提交包含在**两个**分支的历史记录中。不知道它们最初来自主人。因此，这个脚本会告诉你那个`my_branch`是从 分支出来`master`的，同时告诉你那个`master`是从 分支出来的`my_branch`。没有办法判断哪一个是原始的。

# c++ - boost::bind 用于具有默认值的成员函数？

> ID：10931846
> 
> 赞同：1
> 
> 时间：2012-06-07T12:32:02.393
> 
> 标签：c++, boost, bind

```
struct A
{
  A(int v):value(v){}
  int someFun(){return value;}
  int someOtherFun(int v=0){return v+value;}
  int value;
};

int main()
{
    boost::shared_ptr<A> a(new A(42));
    //boost::function<int()> b1(bind(&A::someOtherFun,a,_1)); //Error
    boost::function<int()> b2(bind(&A::someFun,a));
    b2();
    return 0;
} 
```

`bind(&A::someOtherFun,a)();`编译错误失败：*错误：非静态成员函数的无效使用*

如何绑定类似于 someFun 的 someOtherFun？即，它们应该绑定到相同的 boost::function 类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:35:44.293

`A::someFun()`并且`A::someOtherFun()`有不同的类型：第一个不需要参数，第二个需要 1（可以省略，编译器会为您插入默认值）

尝试：

```
bind(&A::someOtherFun, a, _1)(1); 
```

问题是，当您通过调用函数时`bind()`，编译器不知道该绑定函数有一个默认参数值，因此会给您错误，因为您没有所需的参数

# java - 如何获取与相应文件类型关联的图标？

> ID：10931847
> 
> 赞同：1
> 
> 时间：2012-06-07T12:32:05.093
> 
> 标签：java, android

我是android的初学者。我的 android Emulator SD 卡包含很多文件夹和文件。这些文件扩展名是（*.txt、*.doc、*.pdf、*.xml、*.png、*.bmp、*.jpg 等）。如何获取和设置对应的文件类型图标。如果可以，请发送信息。否则，如果不可能发送原因。请回复，您的意见和回答都是对我有价值的。谢谢。

# seo - 更新已编入索引的图片，对 SERPS 对 Google 图片搜索有何影响

> ID：10931851
> 
> 赞同：1
> 
> 时间：2012-06-07T12:32:25.327
> 
> 标签：seo

我在 google 中有超过 144,000 张图片索引，但是当前的水印很大而且很突兀，为了提供更好的用户体验，我希望将其更改为更小的水印。但由于所有这些图像都已在谷歌中编入索引，我想知道它对谷歌和雅虎图像搜索中的 SERPS 有什么影响，因为它们是我网站的最大流量来源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:46:08.573

不幸的是，当您通常更改图像时，Google 会将其视为新图像。我建议更改一小部分并进行至少几周的测试运行，以查看您的 SERP 中的更改。

# javascript - 屏蔽输入插件 jquery

> ID：10931852
> 
> 赞同：1
> 
> 时间：2012-06-07T12:32:26.430
> 
> 标签：javascript, jquery, asp.net

我必须将此[插件](http://digitalbush.com/projects/masked-input-plugin/)用于 asp.net 文本框。

文本框是：

```
 <asp:TextBox ID="txtBox" runat="server" Text='<%# Bind("Phone") %>' /> 
```

当文本框非空时，我希望格式为 (999) 999-9999。但是当文本框为空时它为空。

我想通过文本选择不同的掩码。代码怎么样？

我在下面试过：

谢谢。

```
 jQuery(function($){  
    if(document.getElementById("<%# txtBox.ClientID %>")).innerText =
       $("<%# txtBox.ClientID %>").mask("(999) 999-9999");  
    else
      $("<%# txtBox.ClientID %>").mask("");
  }); 
```

**更新**

文本框位于网格视图内。它喜欢：

```
<asp:TemplateField HeaderText="OrgContactPhone" SortExpression="OrgContactPhone">
            <EditItemTemplate>
                <asp:TextBox ID="txtBox" runat="server" Text='<%# Bind("OrgContactPhone") %>' MaxLength="50">
                </asp:TextBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:13:40.190

```
<asp:TextBox ID="txtBox" runat="server" Text='<%# Bind("Phone") %>' class="MaskText" />

$(document).ready(function () {
    var obj = $('.MaskText');
    if ($.trim(obj.val()).length !== 0) {
        obj.mask("(999) 999-9999");
    }
    else {
        obj.mask("");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:01:11.243

首先我可能是错的，但由于 ASP.net 的工作方式，我认为“ `if(document.getElementById("<%# txtBox.ClientID %>")).innerText =`”不会起作用。

其次，ASP.net 内置了屏蔽组件。

第三，你可以试试这个。

```
jQuery(function($){ 
    //Code function here to detect on text change for the textbox
    {
    if(document.getElementById("<%# txtBox.ClientID %>").innerText != "")
       $("<%# txtBox.ClientID %>").mask("(999) 999-9999");  
    else
      $("<%# txtBox.ClientID %>").mask("");
    }
  }); 
```

# c# - MVVM WPF 与 RelativeSource 的绑定

> ID：10931856
> 
> 赞同：0
> 
> 时间：2012-06-07T12:32:46.980
> 
> 标签：c#, .net, wpf, mvvm-light

```
<DataTemplate DataType="{x:Type local:TestModel}">    
    <Button Content="Button" " Margin="0">
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="Click">
                <mvvm:EventToCommand  
                    Command="{Binding ImageClick, Mode=OneWay}" 
                    MustToggleIsEnabledValue="True"/>
             </i:EventTrigger>
        </i:Interaction.Triggers>
    </Button>
</DataTemplate> 
```

大家好，

上面我有一个数据模板，它使用数据模板打开某些数据类型。我正在使用 mvvm 模式。我想绑定到 ImageClick 属性。

我之前能够做到这一点，但是由于我已经在数据模板中移动了按钮，所以我无法绑定到该属性。

我想我需要使用相对源进行绑定，但我真的不确定该怎么做。

对此的帮助将是惊人的。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T16:51:14.563

你可以试试下面的。

```
<Button Command="{Binding RelativeSource={RelativeSource AncestorType={x:Type YourViewModel}}, Path=DataContext.ImageClick}" /> 
```

我想它会帮助你..

# android - 在服务和活动之间传递变量，反之亦然

> ID：10931857
> 
> 赞同：1
> 
> 时间：2012-06-07T12:33:04.400
> 
> 标签：android, broadcastreceiver, android-activity, android-service

我有一个服务，它传递了一组变量（歌曲、艺术家专辑等），包括一个 MediaPlayer，以及该 MediaPlayer 的一堆方法（播放下一个、上一个等）。

我还有一个活动，它向用户显示 UI，包括下一个/上一个按钮、一个搜索栏和艺术家/专辑/歌曲的显示。

我想知道的是如何让 UI 活动对服务进行更改，以及如何让服务根据选择的歌曲更新活动。

例如：艺术家/专辑/歌曲组合被发送到服务。该服务告诉 MediaPlayer 开始播放该歌曲。歌曲名称/专辑/艺术家显示在活动中，用户可以在 UI 中按播放/暂停等。点击后，服务将采取相应的行动。

我不知道如何让所有这些事情发生，我正忙于广播、意图和静态。我真的很感激一些明确的指导，以及如何做到这一点的一个很好的例子。

感谢您的耐心和帮助。

请在下面找到代码：

音乐服务.java：

```
package awesome.music.player;

import java.io.IOException;
import java.util.ArrayList;

import android.app.Service;
import android.content.BroadcastReceiver;
import android.content.ContentUris;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnCompletionListener;
import android.media.MediaPlayer.OnSeekCompleteListener;
import android.net.Uri;
import android.os.Bundle;
import android.os.Handler;
import android.os.IBinder;

public class MusicService extends Service implements OnCompletionListener,
        OnSeekCompleteListener {

    Intent intent;

    MediaPlayer mediaPlayer = new MediaPlayer();

    String isComplete;
    String serviceStatus;
    String sntSeekPos;
    String artist;
    String selection;
    String album;
    String numSongs;
    int albumId;
    String currentSongPath;

    String[] selectionArgs;

    Uri currentSongUri;

    int songEnded;
    int currentSongIndex;
    int totalSongDuration;

    int intSeekPos;
    int mediaPosition;
    int mediaMax;

    ArrayList<String> pathList;
    ArrayList<String> artistList;
    ArrayList<String> albumList;
    ArrayList<String> titleList;
    ArrayList<String> idList;
    ArrayList<String> durationList;

    private final Handler handler = new Handler();

    public final String BROADCAST_ACTION = "awesome.music.player.seekprogress";
    public final String BROADCAST_OTHER = "awesome.music.player.displaysong";
    Intent seekIntent;
    Intent displayIntent;
    Utilities utils;

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        this.intent = intent;

        Bundle extras = intent.getExtras();

        artist = extras.getString("artist");
        selection = extras.getString("selection");
        selectionArgs = extras.getStringArray("selectionArgs");
        album = extras.getString("album");
        albumId = extras.getInt("albumId");
        numSongs = extras.getString("numSongs");
        currentSongIndex = extras.getInt("currentSongIndex");
        currentSongPath = extras.getString("currentSongPath");
        totalSongDuration = extras.getInt("totalSongDuration");

        pathList = extras.getStringArrayList("pathList");
        artistList = extras.getStringArrayList("artistList");
        albumList = extras.getStringArrayList("albumList");
        titleList = extras.getStringArrayList("titleList");
        idList = extras.getStringArrayList("idList");
        durationList = extras.getStringArrayList("durationList");

        prepareSong(currentSongPath);
        playSong();
        displaySong();
        utils = new Utilities();
        seekIntent = new Intent(BROADCAST_ACTION);
        displayIntent = new Intent(BROADCAST_ACTION);
        setupHandler();

        return START_STICKY;

    }

    /*
     * @Override public void onCreate() { super.onCreate();
     * 
     * utils = new Utilities();
     * 
     * seekIntent = new Intent(BROADCAST_ACTION);
     * 
     * setupHandler();
     * 
     * prepareSong(currentSongPath); playSong(); }
     */

    public void prepareSong(String currentSongPath) {
        try {
            mediaPlayer.reset();
            mediaPlayer.setDataSource(currentSongPath);
            mediaPlayer.prepare();

        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }

    public void playSong() {

        try {
            mediaPlayer.start();

        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (IllegalStateException e) {
            e.printStackTrace();
        }

    }

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

    public void onCompletion(MediaPlayer mediaPlayer) {
        playNext();

    }

    @Override
    public void onStart(Intent intent, int startId) {

        registerReceiver(broadcastReceiver, new IntentFilter(
                MusicPlayer.BROADCAST_SEEKBAR));
        super.onCreate();
        prepareSong(currentSongPath);
        playSong();
    }

    private void setupHandler() {
        handler.removeCallbacks(sendUpdatesToUI);
        handler.postDelayed(sendUpdatesToUI, 1000);

    }

    private Runnable sendUpdatesToUI = new Runnable() {
        public void run() {

            LogMediaPosition();

            handler.postDelayed(this, 1000);

        }

    };

    private void LogMediaPosition() {
        if (mediaPlayer.isPlaying()) {
            mediaPosition = mediaPlayer.getCurrentPosition();

            MusicPlayer.currentDurationLabel.setText(""
                    + utils.milliSecondsToTimer(mediaPosition));

            mediaMax = mediaPlayer.getDuration();
            seekIntent.putExtra("counter", String.valueOf(mediaPosition));
            seekIntent.putExtra("mediamax", String.valueOf(mediaMax));
            seekIntent.putExtra("song_ended", String.valueOf(songEnded));
            sendBroadcast(seekIntent);
        }
    }

    private void displaySong() {

        utils = new Utilities();

        String title = titleList.get(currentSongIndex);
        String artist = artistList.get(currentSongIndex);
        String album = albumList.get(currentSongIndex);

        Uri sArtworkUri = Uri.parse("content://media/external/audio/albumart");

        Uri currentSongUri = ContentUris.withAppendedId(sArtworkUri, albumId);

        String totalDuration = utils.milliSecondsToTimer(totalSongDuration);

        mediaPosition = mediaPlayer.getCurrentPosition();

        MusicPlayer.currentDurationLabel.setText(""
                + utils.milliSecondsToTimer(mediaPosition));

        displayIntent.putExtra("title", title);
        displayIntent.putExtra("artist", artist);
        displayIntent.putExtra("album", album);
        displayIntent.putExtra("totalDuration", totalDuration);
        displayIntent.putExtra("currentSongUri", currentSongUri);
        sendBroadcast(displayIntent);

    }

    // receive seekbar position

    private BroadcastReceiver broadcastReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            updateSeekPos(intent);

        }
    };

    // Update seek position from Activity
    public void updateSeekPos(Intent intent) {
        int seekPos = intent.getIntExtra("seekpos", 0);
        if (mediaPlayer.isPlaying()) {
            handler.removeCallbacks(sendUpdatesToUI);
            mediaPlayer.seekTo(seekPos);
            setupHandler();

        }
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        mediaPlayer.stop();
        handler.removeCallbacks(sendUpdatesToUI);
        // Unregister seek receiver
        unregisterReceiver(broadcastReceiver);
    }

    public void onSeekComplete(MediaPlayer mediaPlayer) {
        if (!mediaPlayer.isPlaying()) {
            mediaPlayer.start();
        }

    }

    public void playNext() {

        if (mediaPlayer.isPlaying()) {

            if (currentSongIndex < (pathList.size() - 1)) {
                currentSongIndex = currentSongIndex + 1;
                currentSongPath = pathList.get(currentSongIndex);

                prepareSong(currentSongPath);
                playSong();
            } else {
                currentSongIndex = 0;
                currentSongPath = pathList.get(currentSongIndex);
                prepareSong(currentSongPath);
                playSong();
            }
        } else {
            if (currentSongIndex < (pathList.size() - 1)) {
                currentSongIndex = currentSongIndex + 1;
                currentSongPath = pathList.get(currentSongIndex);

                prepareSong(currentSongPath);
            } else {
                currentSongIndex = 0;
                prepareSong(currentSongPath);
            }
        }

        displaySong();
    }

    void playPrevious() {

        if (mediaPlayer.isPlaying()) {

            if (currentSongIndex > 0) {
                currentSongIndex = currentSongIndex - 1;
                currentSongPath = pathList.get(currentSongIndex);

                prepareSong(currentSongPath);
                playSong();
            } else {
                currentSongIndex = pathList.size() - 1;
                currentSongPath = pathList.get(currentSongIndex);

                prepareSong(currentSongPath);
                playSong();
            }
        } else {
            if (currentSongIndex > 0) {
                currentSongIndex = currentSongIndex - 1;
                currentSongPath = pathList.get(Playlist.currentSongIndex);

                prepareSong(currentSongPath);
            } else {
                currentSongIndex = pathList.size() - 1;
                currentSongPath = pathList.get(currentSongIndex);

                prepareSong(currentSongPath);
            }
        }
        displaySong();
    }

} 
```

音乐播放器.java：

```
package awesome.music.player;

import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.SeekBar;
import android.widget.SeekBar.OnSeekBarChangeListener;
import android.widget.TextView;

public class MusicPlayer extends Activity implements OnSeekBarChangeListener {

    public ImageButton play;
    public ImageButton next;
    public ImageButton previous;

    public static ImageView albumArt;

    static TextView songArtistAlbumLabel;
    static TextView songTitleLabel;
    static TextView currentDurationLabel;
    static TextView totalDurationLabel;

    static String serviceStatus;

    private SeekBar seekBar;

    private int seekMax;

    boolean mBroadcastIsRegistered;

    public static Utilities utils;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.playing);

        play = (ImageButton) findViewById(R.id.playButton);
        next = (ImageButton) findViewById(R.id.nextButton);
        previous = (ImageButton) findViewById(R.id.previousButton);
        albumArt = (ImageView) findViewById(R.id.imageView1);

        songArtistAlbumLabel = (TextView) findViewById(R.id.songArtistAlbumLabel);
        songTitleLabel = (TextView) findViewById(R.id.songTitleLabel);
        totalDurationLabel = (TextView) findViewById(R.id.totalDurationLabel);
        songArtistAlbumLabel = (TextView) findViewById(R.id.songArtistAlbumLabel);

        play.setOnClickListener(playListener);
        next.setOnClickListener(nextListener);
        previous.setOnClickListener(previousListener);

        seekBar = (SeekBar) findViewById(R.id.seekBar);
        seekBar.setOnSeekBarChangeListener(this);

        intent = new Intent(BROADCAST_SEEKBAR);

        if (mBroadcastIsRegistered != true) {
            registerReceiver(broadcastReceiver, new IntentFilter(
                    MusicService.BROADCAST_ACTION));
            ;

            mBroadcastIsRegistered = true;
        }

    }

    private OnClickListener playListener = new OnClickListener() {
        public void onClick(View v) {
            MusicService.playSong();

        }
    };

    private OnClickListener nextListener = new OnClickListener() {
        public void onClick(View v) {
            MusicService.playNext();
        }
    };

    private OnClickListener previousListener = new OnClickListener() {
        public void onClick(View v) {
            MusicService.playPrevious();
        }
    };

    public static final String BROADCAST_SEEKBAR = "awesome.music.player.sendseekbar";
    Intent intent;

    private BroadcastReceiver broadcastReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent serviceIntent) {
            updateUI(serviceIntent);
        }
    };

    private void updateUI(Intent serviceIntent) {
        String counter = serviceIntent.getStringExtra("counter");
        String mediamax = serviceIntent.getStringExtra("mediamax");
        String strSongEnded = serviceIntent.getStringExtra("song_ended");
        int seekProgress = Integer.parseInt(counter);
        seekMax = Integer.parseInt(mediamax);
        Integer.parseInt(strSongEnded);
        seekBar.setMax(seekMax);
        seekBar.setProgress(seekProgress);
    }

    public void onProgressChanged(SeekBar seekBar, int progress,
            boolean fromUser) {
        if (fromUser) {
            int seekPos = seekBar.getProgress();
            intent.putExtra("seekpos", seekPos);
            sendBroadcast(intent);
        }

    }

    public void onStartTrackingTouch(SeekBar seekBar) {
        // TODO Auto-generated method stub

    }

    public void onStopTrackingTouch(SeekBar seekBar) {
        // TODO Auto-generated method stub

    }

} 
```

播放.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<AbsoluteLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <SeekBar
        android:id="@+id/seekBar"
        android:layout_width="296dp"
        android:layout_height="wrap_content"
        android:layout_marginBottom="20dp"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="20dp"
        android:layout_x="10dp"
        android:layout_y="446dp"
        android:paddingLeft="6dp"
        android:paddingRight="6dp"
        android:progressDrawable="@drawable/seekbar_progress"
        android:thumb="@drawable/seek_handler" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="37dp"
        android:layout_height="37dp"
        android:layout_x="6dp"
        android:layout_y="397dp"
        android:src="@drawable/ic_tab_albums_white" />

    <TextView
        android:id="@+id/songTitleLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_x="55dp"
        android:layout_y="395dp"
        android:text="Song Label"
        android:textSize="20sp" />

    <TextView
        android:id="@+id/songArtistAlbumLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_x="55dp"
        android:layout_y="417dp"
        android:text="Artist - Album Label"
        android:textSize="15sp" />

    <TextView
        android:id="@+id/currentDurationLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_x="10dp"
        android:layout_y="481dp"
        android:text="0:00" />

    <TextView
        android:id="@+id/totalDurationLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_x="281dp"
        android:layout_y="477dp"
        android:text="3:30" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_x="41dp"
        android:layout_y="312dp"
        android:gravity="center_horizontal" >

        <ImageButton
            android:id="@+id/previousButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_x="132dp"
            android:layout_y="308dp"
            android:src="@drawable/ic_previous" />

        <ImageButton
            android:id="@+id/playButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="50sp"
            android:layout_marginRight="50sp"
            android:src="@drawable/ic_pause" />

        <ImageButton
            android:id="@+id/nextButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/ic_next" />
    </LinearLayout>

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="287dp"
        android:layout_height="272dp"
        android:layout_x="16dp"
        android:layout_y="13dp"
        android:background="@drawable/dummy_album_art"
        android:scaleType="fitXY" />

</AbsoluteLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:38:40.067

一般来说，与服务通信的三种主要方式

1-Binder（在绑定服务中） 2-Messenger 3-AIDL

在 Android 上，一个进程不能正常访问另一个进程的内存。所以说，他们需要将他们的对象分解为操作系统可以理解的原语，并为你将对象编组跨越该边界。进行编组的代码编写起来很乏味，因此 Android 使用 AIDL 为您处理它。

```
Using AIDL is necessary only if 
```

1-您允许来自不同应用程序的客户端访问您的 IPC 服务 2-您希望在您的服务中处理多线程。如果您不需要跨不同应用程序执行并发 IPC，

```
 Using Binder 
```

你应该通过实现一个Binder来创建你的接口，或者，如果你想执行IPC，但不需要

```
 Using Messenger 
```

要处理多线程，请使用 Messenger 实现您的界面。

[http://developer.android.com/guide/developing/tools/aidl.html](http://developer.android.com/guide/developing/tools/aidl.html)

[http://java.dzone.com/articles/android-aidl-and-remote-client](http://java.dzone.com/articles/android-aidl-and-remote-client)

其他然后这可以使用

1- 来自服务的广播意图

2 -

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T07:03:18.613

1.  您必须创建一个在创建应用程序时启动的播放服务，您可以从扩展 Application 的类启动我们的服务。

2.  您可以使用aidl 与活动通信服务。由于活动已经开始，当活动停止时它不能被杀死。

3.  您可以使用 Mediastore 内容解析器来获取有关艺术家专辑等曲目的数据。

**MediaStore.Audio.Media.* 您希望它提供所有数据的列以及歌曲的路径**

4.我目前也在构建播放器.......但是这一切都在我使用它时工作

# android - 拍摄照片后Android活动重置（方向？）

> ID：10931859
> 
> 赞同：5
> 
> 时间：2012-06-07T12:33:06.350
> 
> 标签：android, android-activity, camera, orientation, reset

基本上，我按下一个按钮，这会通过使用相机意图打开您的默认相机应用程序。拍照后，它将保存所需的东西并重定向到另一个活动。

在这个活动中，我有一个可以成功上传图片的AsyncTask。所以你可能会问我的问题是什么。我的问题是它重新创建了我的活动，因此与它一起重置了我的 ProgressDialog。（它运行活动，执行 aSyncTask，在它完成之前死掉并重新创建我的 Activity 以再次执行 asynctask。）

它并不总是这样做。我认为这样做是因为它将手机的方向从横向更改为纵向。（我有一个三星。当我去相机时，它会变成横向，当我完成时，它又会变成纵向。）

我已经完成了我的作业并将这些东西添加到我的清单中：

```
android:configChanges="orientation|keyboardHidden"
android:screenOrientation="portrait" > 
```

我已确保将我的应用程序“锁定”为纵向，但我仍然看到我的应用程序更改了方向，我相信这就是我的活动被重新创建的原因。

我计划添加各种检查，但我认为这不是处理这种情况的正确方法，因为它有时不会重新创建活动。

我正在谈论的检查是使用：

```
protected void onSaveInstanceState(Bundle outState) {
    outState.putString("started", "1");
} 
```

无论如何，有人可以帮助我吗？我只希望它加载活动而不会对我造成自毁。

PS：虚拟机没有任何问题。VM 加载活动并完成它而不重新创建它。

PPS：在我的三星上进行了额外的测试，如果我将它保持在横向模式，它就会工作。因此，绝对是相机通过改变方向破坏了我的活动。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T10:56:40.550

我遇到了同样的问题，结果你还需要在 API 级别 13 或更高级别监听屏幕大小的变化，如此处所述；[https://stackoverflow.com/a/11483806](https://stackoverflow.com/a/11483806)

```
android:configChanges="orientation|screenSize" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-22T09:18:01.710

为了解决这个问题，我必须在清单文件中使用以下内容：

```
android:screenOrientation="portrait"    
android:launchMode="singleTop"    
android:configChanges="keyboardHidden|orientation|screenSize" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T18:06:53.180

尝试创建一个片段活动来处理显示和更新进度对话框

在片段活动中确保并设置“setRetainInstance(true);” 这将确保在创建/销毁主要活动时它不会被销毁。

将整个图像捕获过程放在这个片段中可能是一个好主意，包括 asynctask。确保您没有从 AsyncTask 的 doInBackground() 中引用父活动的上下文。如果您这样做并且方向发生变化（即活动被破坏），它将引发错误。

这是一个粗略的例子：

```
public class MyFragment extends FragmentActivity {

    private ProgressBar mProgressBar;
    private boolean mAsyncTaskActive = false;

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        setRetainInstance(true);

        // grab reference to progress bar
        mProgressBar = (ProgressBar) getActivity().findViewById(R.id.my_progress_bar);

        // check to see if the async task is active and set the progress bar visibility accordingly
        if (mAsyncTaskActive) {
            mProgressBar.setVisibility(View.VISIBLE);
            mProgressBarText.setVisibility(View.VISIBLE);
        }

    }

    // this method is called from your main activity when the user does something (i.e. clicks a button)
    // make sure you have already instantiated the fragment

    public void startSomething() {
        if (mAsyncTaskActive == false) {
            mProgressBar.setVisibility(View.VISIBLE);
            new MyAsyncTask().execute();
            mAsyncTaskActive = true;
        }
    }

    private class MyAsyncTask extends AsyncTask<Void, Void, Void> {
        Context applicationContext;

        @Override
        protected Void doInBackground(String... params) {
            // do stuff
            publishProgress(//some number);
            return null;
        }

        @Override
        protected void onProgressUpdate(Integer... progress) {
         setProgressPercent(progress[0]);
        }

} 
```

如果您还不熟悉，您还应该看看如何实现片段。Android 开发者博客有一篇关于 DialogFragments 的好文章，原理相同。[http://android-developers.blogspot.com/2012/05/using-dialogfragments.html](http://android-developers.blogspot.com/2012/05/using-dialogfragments.html)

# css - 如何使用 Sublime Text 2 在 CSS 中的冒号后添加空格？

> ID：10931866
> 
> 赞同：5
> 
> 时间：2012-06-07T12:33:17.840
> 
> 标签：css, sublimetext

在使用 Sublime Text 2 处理 CSS（或 SCSS/SASS 文件）时，我想在冒号后自动添加一个空格。我怎样才能做到这一点？

它目前的作用：

```
body {
   color:red;
} 
```

我想要的是：

```
body {
   color: red;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T21:39:27.007

添加这一行：

```
{ "keys": [":"], "command": "insert", "args": {"characters": ": "}} 
```

到您的`.config/sublime-text-2/Packages/User/Default (Linux).sublime-keymap`（在菜单中：）`Preferences>Key bindings User`文件。现在每次按`:`，`:`都会出现一个空格... :)

# c# - 从数据库读取数据时让 WPF UI 负责

> ID：10931871
> 
> 赞同：1
> 
> 时间：2012-06-07T12:33:38.960
> 
> 标签：c#, wpf, multithreading

我有 C# WPF 应用程序，它从数据库读取数据然后做一些工作。但问题是当我读取数据时，我的 UI 没有响应。我已经尝试过任务和调度程序。他们都没有帮助。下面的代码在 button_click 事件中。这是代码：

```
DataSet ds;
DataTable dt = new DataTable();

Task myTask = new Task(new Action(() =>
{
     //GetMyDataSet() returns DataSet
     ds = GetMyDataSet();
     dt = ds.Tables["MyTableName"];
}));

myTask.Start();

while (!myTask.IsCompleted)
{
    System.Threading.Thread.Sleep(1000);
}

//Continue 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T12:36:15.273

首先，摆脱 sleep-spin，它完全违背了使用 a 的目的，`Task`因为它不允许 UI 线程在`Task`完成之前继续。你不想要那个！

```
Task myTask = Task.Factory.StartNew(
     new Action(() =>
     {
         DataSet ds;
         DataTable dt = new DataTable();    

         //GetMyDataSet() returns DataSet
         ds = GetMyDataSet();
         dt = ds.Tables["MyTableName"];

         // use Invoke/BeginInvoke to update UI
      })); 
```

现在您的任务将与 UI 线程并行运行，直到完成。在`Task`代码末尾`Dispatcher.BeginInvoke`用于更新 UI。现在应该可以了。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-07T12:50:08.343

尝试

```
while (!myTask.IsCompleted)
{
    Dispatcher.Invoke(DispatcherPriority.Background, new ThreadStart(delegate { }));
    System.Threading.Thread.Sleep(20);
} 
```

# ios - Windows Azure 工具包在 iOS 中显示解析器错误

> ID：10931873
> 
> 赞同：0
> 
> 时间：2012-06-07T12:33:48.197
> 
> 标签：ios, windows, azure

在替换为我的命名空间和领域后，我尝试使用从网站获取的以下代码片段。但是当我尝试运行应用程序时，我收到解析器错误，例如

**实体：第 1 行：解析器错误：需要开始标记，未找到“<”**

```
WACloudAccessControlClient *acsClient =
  [WACloudAccessControlClient
          accessControlClientForNamespace:@“iostest-walkthrough”
                                    realm:@“uri:wazmobiletoolkit”];

 [acsClient showInViewController:self
                     allowsClose:NO
           withCompletionHandler:^(BOOL authenticated)
 {
    if (!authenticated) {
        NSLog(@"Error authenticating");
    } else {
        WACloudAccessToken *token = [WACloudAccessControlClient sharedToken];
        NSString *securityToken = [token securityToken];
    }
  }]; 
```

我无法清楚地理解这个问题。

请以示例指导我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:16:36.893

我建议在这里查看示例：

[https://github.com/WindowsAzure-Toolkits/wa-toolkit-ios](https://github.com/WindowsAzure-Toolkits/wa-toolkit-ios)

你也可以看看这个作为入门：

[http://www.wadewegner.com/2011/05/windows-azure-toolkit-for-ios/](http://www.wadewegner.com/2011/05/windows-azure-toolkit-for-ios/)

我的猜测是你没有#import 你需要的东西。

# tftp - Linux 上的 TFTP 服务器

> ID：10931876
> 
> 赞同：0
> 
> 时间：2012-06-07T12:33:55.187
> 
> 标签：tftp

我正在寻找在 Linux 平台上运行的 FTP 服务器的示例。

我知道 Windows tftpd32 上有一个应用程序，它结合了多个服务器，例如 TFTP DHCP 和 DNS。

然后我问了以下问题：

任何提供 TFTP 服务器的产品是否总是如此？换句话说，是否总是可以在同一个 TFTP 服务器中找到 DNS 和 DHCP 服务器。

对不起我的英语，提前谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-14T22:45:58.373

不，TFTP 服务器是独立的。如果它们带有 DHCP，那是因为 TFTP 主要用于一个目的 - PXE 引导。因此，如果您需要一台服务器来引导您的虚拟机，请尝试[PyPXE](https://github.com/psychomario/PyPXE)。在 Linux 上工作。

# plone - LinguaPlone 默认不翻译主页

> ID：10931882
> 
> 赞同：0
> 
> 时间：2012-06-07T12:34:19.690
> 
> 标签：plone, linguaplone

我用 LinguaPlone 4.0.1 安装了 Plone 4.0.2，我的所有页面（包括“主页”、“关于”、“联系方式”等）都翻译成法语和西班牙语（默认为英语）。我在屏幕右上角看到了三种可用语言，当我点击任何其他语言时，网站和所有页面内容都被正确翻译（包括导航标签，所以“主页”在法语中变成了“Accueil”，和西班牙语中的“Inicio”）。

问题是当我以不同的语言浏览网站并单击“主页”（或“Accueil”/“Inicio”）时，主页以英文显示。然而，其他一切仍然是另一种语言（法语/西班牙语）。我必须重新单击要查看主页的语言，就像它以该语言显示之前一样。

主页是唯一不起作用的页面。我可以用法语或西班牙语导航到网站的任何其他部分，除了主页正确显示之外的所有内容。主页/默认页面是否缺少一些奇怪的设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:03:29.537

[请参阅我关于如何将翻译添加到 Plone 网站首页的](https://stackoverflow.com/questions/10905349/how-can-i-add-translations-to-a-plone-site-front-page)答案；您需要运行 LinguaPlone 设置：

```
http://localhost:8080/Plone/@@language-setup-folders 
```

# java - java的BigDecimalInstantiation PMD规则的xpath表达式是什么

> ID：10931883
> 
> 赞同：1
> 
> 时间：2012-06-07T12:34:35.107
> 
> 标签：java, xpath, pmd

我想创建一个自定义 PMD 规则，以消除 BigDecimal 对象的实例化（即 new BigDecimal(value) ）。我需要执行 BigDecimal.valueof(value) 实现。

我不知道如何实现这一点。有一些我可以使用的例子吗？

谢谢，巴斯亨德里克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T12:49:49.307

您可以使用[IntegerInstantiation](http://pmd.sourceforge.net/pmd-5.0.0/rules/java/migrating.html#IntegerInstantiation)的实现作为示例。

但请确保不要禁止使用所有 BigDecimal 构造函数。只有三种`BigDecimal.valueOf`方法，并且只有那些需要 long 作为参数的方法应该优于调用构造函数。

无论如何，采用 ​​double 的那个只是调用构造函数，并且无论如何都应该不鼓励使用 double 值构造 BigDecimal。

# svn - Mercurial over SSH，用户名被覆盖

> ID：10931886
> 
> 赞同：3
> 
> 时间：2012-06-07T12:34:45.667
> 
> 标签：svn, mercurial, ssh

我正在将我们公司的 SCM 从 SVN 迁移到 mercurial。

目前的情况是这样的。SVN 在专用于它的单独 Ubuntu 服务器上运行。因此，所有开发人员都在使用在 Ubuntu 服务器上创建的用户使用“svn+ssh”协议从他们的个人机器上签入和签出代码。结果，无论他们在 SSH 上使用哪个用户，它都会作为变更集的作者记录在存储库中。

那么，在 Mercurial 中，是否可以使用在 Ubuntu 上创建的同一组用户在开发人员通过 SSH（而不是 hgrc 中设置的本地用户名）签入时使用并记录为作者？

> hg clone ssh://user@192.168.2.2//hg/support

是我想要使用的。它有效，但对于作者问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T13:28:07.797

不，这是不可能的。您遇到了集中式版本控制和分散式版本控制之间的根本区别。

在 DVCS 中，作者在每个开发人员的本地配置中进行配置，并在提交更改时立即设置。在此之后，提交是*不可变*的，它的哈希是固定的，因此当你推送它时，服务器*没有能力改变作者*。

这不被认为是一个问题，口头禅是：如果您不信任您的开发人员设置正确的名称，那么您可能不应该首先让他们访问推送代码。作者只是有用的元数据，不具有权威性。

如果您仍然需要以某种方式记录它，您可以做的是创建一个推送日志，使用一个挂钩记录哪些用户推送了哪些变更集。例子就在那里，例如 Mozilla 有一个，谷歌搜索“mercurial pushlog”。

# php - 无法验证我的静态选项按钮列表

> ID：10931888
> 
> 赞同：0
> 
> 时间：2012-06-07T12:34:55.450
> 
> 标签：php, yii

我在页面中创建了一个静态选项列表，我想使用 JavaScript 而不是 AJAX 进行验证：

```
<?php echo $form->labelEx($model,'emlevel'); ?>
<?php 
   echo $form->radioButtonList($model,'emlevel',
                  array('L'=>'Low','M'=>'Moderate','X'=>'Low Moderate', 'H'=>'High'),
                  array('separator' => "  " ));
?>
<?php echo $form->error($model,'emlevel'); ?> 

function chk()
{ 
    // first I checked the value for emlevel to verify it get the value or not 
    //but it shows undefined
    alert (document.forms["ConsultationNew"] ["ConsultationNew[enc_type]"].value);
    if (document.forms["ConsultationNew"]["ConsultationNew[emlevel]"].value == null) { 
        alert ('choose one EMlevel'); return false; 
    } 
} 
```

我无法通过`document.getelement`....value 获得价值。表明`undefined`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:54:15.300

您可能想使用 CActiveForm。客户端验证配置如下：

```
<?php $form=$this->beginWidget('CActiveForm', array(
'id'=>'login-form',
'enableAjaxValidation'=>false,
'enableClientValidation'=>true,
    'clientOptions' => array (
        'validateOnSubmit' => true,
        'validateOnChange' => true,
        'validateOnType' => true,
    ),
)); ?> 
```

由于您已经在 Yii 中工作，我肯定会使用 CActiveForm 进行客户端验证（以及 Ajax 和服务器端验证）。它就像一个魅力。你必须有更好的事情去做，而不是在 Javascript 编程验证中重新发明轮子。

# python - MongoDB：将用户嵌入评论

> ID：10931889
> 
> 赞同：3
> 
> 时间：2012-06-07T12:34:55.710
> 
> 标签：python, mongodb, mongoalchemy, nosql

对于非常简单的问题（或不是非常），我找不到“最佳”解决方案

拥有一组经典的数据：附加到用户的帖子、附加到帖子和用户的评论。

现在我无法决定如何构建方案/类

方法是将 user_id 存储在评论和内部。
但是当我在页面上有 200 条评论时会发生什么？
或者当我在页面上有 N 个帖子时？
我的意思是显示用户信息（如姓名、头像）应该是对数据库的 200 个额外请求

另一种解决方案是将用户数据嵌入到每个评论和每个帖子中。

但首先 -> 这是巨大的开销，第二 -> 模型系统正在损坏（使用 mongoalchemy），第三 -> 用户可以更改他的信息（如头像）。然后呢？据我了解，对大量评论或帖子进行更新操作并不是简单的操作......

你有什么建议？每页 200 个对 mongodb 的请求是否可以（必须以性能为目标）？

或者我可能只是错过了一些东西......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T12:49:13.020

您可以`N+1`使用 -queries 避免数百个请求的[`$in`](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-$in)-problem。考虑一下：

```
Post {
  PosterId: ObjectId
  Text: string
  Comments: [ObjectId, ObjectId, ...] // option 1
}

Comment {
  PostId: ObjectId // option 2 (better)
  Created: dateTime,
  AuthorName: string,
  AuthorId: ObjectId,
  Text: string
} 
```

现在您可以通过查询找到帖子评论`$in`，您还可以轻松找到特定作者发表的所有评论。

当然，您也可以将评论作为嵌入数组存储在 post 中，并`$in`在获取评论时对用户信息进行查询。这样，您不需要对用户名进行反规范化，也不需要数百个查询。

如果您选择非规范化用户名，您将不得不在用户更改（例如他的姓名）时更新该用户曾经发表的所有评论。另一方面，如果此类操作不经常发生，那应该没什么大不了的。或者，根据您的要求，存储用户发表评论时的姓名可能会更好。

嵌入的一个普遍问题是[不同的作者将写入同一个对象](https://stackoverflow.com/questions/10923440/how-should-the-following-many-to-many-relationship-be-modeled-in-mongodb)，因此您将不得不使用[原子修饰符](http://www.mongodb.org/display/DOCS/Atomic+Operations)（例如`$push`）。这有时更难与映射器一起使用（虽然我不知道 mongoalchemy），而且通常不太灵活。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:42:04.150

我对 mongodb 所做的是将用户 ID 嵌入到评论中（这是“发布”文档结构的一部分）。

获得更好性能的三个简单提示：

1) 确保在 user_id 上有一个索引

2）使用评论分页方式，避免查询200次数据库

3）缓存是你的朋友

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T12:48:09.483

您可以缓存您的用户对象，这样您就不必每次都查询数据库。

我喜欢将用户数据嵌入每个帖子的想法，但是您必须考虑更新用户个人资料时会发生什么？必须确保没有错过任何帖子。

我建议从略读 mongo 建议您如何处理模式开始。

> 一般来说，对于实体之间的“包含”关系，应该选择嵌入。不使用链接时使用链接会导致数据重复。

[http://www.mongodb.org/display/DOCS/Schema+Design](http://www.mongodb.org/display/DOCS/Schema+Design)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T23:32:15.250

MongoDB 文档中有一个非常好的用例：[http](http://docs.mongodb.org/manual/use-cases/storing-comments/) ://docs.mongodb.org/manual/use-cases/storing-comments/ 它也是用 Python 编写的 :-)

# x86 - 具有相同 GUID 的 32 位和 64 位 ActiveX？

> ID：10931894
> 
> 赞同：2
> 
> 时间：2012-06-07T12:35:21.313
> 
> 标签：x86, activex, 64-bit, guid

我在 VS2010 中有一个 MFC ActiveX 控件。我可以构建 32 位或 64 位版本，这些版本在 32 位和 64 位目标应用程序中注册并运行良好。

问题是 64 位版本的控件无法添加到 VS 的工具箱中，因此无法在设计器视图中放置在表单上（某些客户喜欢这样做）。该控件还包含一些 GUI 项，以编程方式添加这些项更麻烦。

我可以使用相同的 guid 构建两个版本的控件吗？如果最终应用程序的目标是 x64，这是否允许 32 位版本进入工具箱，但 64 位版本在运行时使用？

或者是否有另一种方法可以通过 64 位应用程序和 ActiveX 获得工具箱支持？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:00:18.853

虽然它可以生成 64 位应用程序，但 Visual Studio 2010 是一个 32 位应用程序，因此您只能将 32 位版本的 ActiveX 控件添加到工具箱中。强烈建议您对 32 位和 64 位版本的控件使用相同的 guid，以便在为 32 位和 64 位编译应用程序时正确引用它。

# c# - 获取 Html.RouteLink 结果的 URL 地址

> ID：10931897
> 
> 赞同：1
> 
> 时间：2012-06-07T12:35:33.343
> 
> 标签：c#, asp.net-mvc-3, url, asp.net-mvc-routing

的结果

```
@Html.RouteLink("link-name" , "route-name" , new 
{
  id = "8850" ,
  title = "sample-title" ,
  description = "sample-description"
}
) 
```

是

```
<a href="/8850/sample-title/sample-description/">link-name</a> 
```

有没有只提供`href`地址的扩展方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T12:45:46.777

您可以使用**“Url.Action”**：

UrlHelper 类的：

```
Action(string actionName, string controllerName, RouteValueDictionary routeValues); 
```

对于其他重载，请检查：

**[UrlHelper.Action 方法](http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.action.aspx)**

例如。

```
<a href="@Url.Action(actionName, controllerName, routeValues)">link-name</a> 
```

# git - 如何强制 git 发出警告或添加新文件？

> ID：10931905
> 
> 赞同：2
> 
> 时间：2012-06-07T12:35:57.270
> 
> 标签：git, githooks, git-stage

我们都经历过一个痛苦的时刻，新功能在本地运行良好，但在部署时由于我们忘记添加新文件而中断。

有没有办法让 git 在`git commit -a`执行时发出警告或自动添加新文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T12:59:51.193

像这样的预提交钩子应该警告剩余文件：

```
#!/bin/bash
. git-sh-setup # for 'die' cmd
git status --porcelain | while IFS= read -r line;
do
         if [[ $line == \?\?* ]] ; then # if the file begins with ?? it's untracked by git
                die "Uncommited files left!" # this will always terminate commit
                # say "Uncommited files left!" # this will just print the warning
         fi
done 
```

只需[将其添加到您的 repo 的预提交钩子](http://git-scm.com/book/en/Customizing-Git-Git-Hooks#Installing-a-Hook)和 voile :)

编辑：您还应该考虑使用一些**持续集成工具包，例如 Hudson 或 Buildbot** - 它可以执行更全面的检查，然后查找丢失的文件:)

EDIT2：不幸的是，我没有成功在循环内使用 read 所以我认为可能无法让这个钩子要求你采取行动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:22:01.240

```
git config --global alias.commita '!git add . && git commit -a' 
```

之后只需使用：

```
git commita .. 
```

相反`git commit -a`。这也会添加新文件。

# object - 在c#中为wp7反序列化字符串数组

> ID：10931908
> 
> 赞同：0
> 
> 时间：2012-06-07T12:36:03.700
> 
> 标签：object, serialization, datacontract, arrays, jsonserializer

这是我的 JSON 的结构：

```
string sample = 
    "[{'Disp_Name':'avi garg',
       'emailId':'avi@india.com',
       'fName':'avi',
       'lName':'garg',
       'ph':{'number':'9813612344(Mobile)','type':1}
      },
      {'Disp_Name':'monk gup',
       'emailId':'mon@india.com',
       'fName':'monk',
       'lName':'gup',
       'ph':{'number':'01127243480(home)','type':2}
      }]"; 
```

我想将它反序列化回我类的对象数组。任何人都可以帮我这样做吗？我想最好使用 datacontractjsonserializer 但其他也可以。

感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:24:20.947

```
public static List<your class> decrypt_json(string json)
    {
        var deserializedUser = new List<your class>();
        MemoryStream ms = new MemoryStream(Encoding.UTF8.GetBytes(json));
        DataContractJsonSerializer ser=new DataContractJsonSerializer(deserializedUser.GetType());
        deserializedUser =  ser.ReadObject(ms) as List<your class>;
        MessageBox.Show(deserializedUser.Count().ToString());
        ms.Close();
        return deserializedUser;       
    } 
```

# bash - 如何从文件中读取单词（而不是行）？

> ID：10931915
> 
> 赞同：22
> 
> 时间：2012-06-07T12:36:19.147
> 
> 标签：bash

我已经阅读[了](https://stackoverflow.com/questions/974977/read-characters-from-a-text-file-using-bash)有关如何使用 bash 从文本文件中读取 n 个字符的问题。我想知道如何从一个看起来像这样的文件中一次读取一个单词：

```
example text
example1 text1
example2 text2
example3 text3 
```

谁能给我解释一下，或者给我一个简单的例子？谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-07T12:42:50.860

该`read`命令默认读取整行。所以解决方案可能是读取整行，然后将其拆分为空格，例如`for`：

```
#!/bin/sh

while read line; do
    for word in $line; do
        echo "word = '$word'"
    done
done <"myfile.txt" 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-07T12:53:10.383

使用标准输入执行此操作的方法是将`-a`标志传递给读取：

```
read -a words
echo "${words[@]}" 
```

这会将您的整行读入索引数组变量，在本例中名为*words*。然后，您可以使用[shell 参数扩展对](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)*单词*执行任何您喜欢的数组操作。

对于面向文件的操作，当前版本的 Bash 还支持[内置](https://www.gnu.org/software/bash/manual/html_node/Bash-Builtins.html)的 mapfile . 例如：

```
mapfile < /etc/passwd
echo ${MAPFILE[0]} 
```

无论哪种方式，数组都是要走的路。值得您花时间熟悉[Bash 数组语法](http://www.gnu.org/software/bash/manual/bashref.html#Arrays)以充分利用此功能。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-06-07T16:59:34.870

通常，您应该使用`while read -r line`循环从文件中读取。为此并解析行中的单词需要在`for`循环内嵌套一个`while`循环。

这是一种无需嵌套循环即可工作的技术：

```
for word in $(<inputfile)
do
    echo "$word"
done 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-08-01T16:26:25.357

在给定的上下文中，单词的数量是已知的：

```
while read -r word1 word2 _; do
  echo "Read a line with word1 of $word1 and word2 of $word2"
done 
```

如果要将每一行读入数组，`read -a`将第一个单词放入数组的元素 0，将第二个单词放入元素 1，依此类推：

```
while read -r -a words; do
  echo "First word is ${words[0]}; second word is ${words[1]}"
  declare -p words # print the whole array
done 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-05-04T10:34:09.237

在 bash 中，只需使用空格作为分隔符 ( `read -d ' '`)。此方法需要一些预处理以将换行符转换为空格（使用`tr`）并将多个空格合并为一个空格（使用`sed`）：

```
{
 tr '\n' ' ' | sed 's/  */ /g' | while read -d ' ' WORD
 do
  echo -n "<${WORD}> "
 done
 echo
} << EOF
Here you have some words, including * wildcards
that don't get expanded,
multiple   spaces   between   words,
    and lines with spaces at the begining.
EOF 
```

此方法的主要优点是您无需担心数组语法，只需使用`for`循环即可，但无需通配符扩展。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-03-02T21:48:48.417

我遇到了这个问题和建议的答案，但我没有看到列出这个简单的可能解决方案：

```
for word in `cat inputfile`
do
  echo $word
done 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-09-18T14:19:43.610

这也可以使用 AWK 来完成：

```
awk '{for(i=1;i<=NF;i++) {print $i}}' text_file 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-12-22T19:18:25.183

您可以组合`xargs`which reads 由空格*或*换行符分隔的单词并`echo`每行打印一个：

```
<some-file xargs -n1 echo

some-command | xargs -n1 echo 
```

这也适用于大型或慢速数据流，因为它不需要一次读取整个输入。

我用它一次从 SQLite 读取 1 个表名，它在列布局中打印表名：

```
sqlite3 db.sqlite .tables | xargs -n1 echo | while read table; do echo "1 table: $table"; done 
```

# soap - 使用 Groovy (ActiveXobject) 在 SOAP UI 中导入 Dll

> ID：10931916
> 
> 赞同：2
> 
> 时间：2012-06-07T12:36:19.687
> 
> 标签：soap, user-interface

我正在使用 groovy 脚本使用 ActiveXobject 在soap ui 中的 dll 中使用一个类，每次调用它时都会出现以下错误。

> org.codehaus.groovy.control.MultipleCompilationErrorsException：启动失败：Script15.groovy：3：无法解析类 ActiveXObject @ 第 3 行，第 15 列。 def signLib = new ActiveXObject('iop.systemtest.tools.signlib.SignLibForSoapUI') ^ org.codehaus.groovy.syntax.SyntaxException：无法解析类 ActiveXObject @ 第 3 行，第 15 列 org.codehaus.groovy.ast.ClassCodeVisitorSupport.addError(ClassCodeVisitorSupport.java:148) 在

下面是我正在使用的一段脚本

```
import org.codehaus.groovy.scriptom.*
def signLib = new ActiveXObject('iop.systemtest.tools.signlib.SignLibForSoapUI'); 
```

任何人都有任何想法。？？？

# java - 从 Oracle 中的函数返回表中选择的其他方法

> ID：10931917
> 
> 赞同：1
> 
> 时间：2012-06-07T12:36:25.823
> 
> 标签：java, sql, oracle, hibernate

我有一个返回用户类型表的 Oracle 函数 my_func()。

我现在可以这样选择：

```
SELECT * FROM TABLE(my_func(3)); 
```

但是我的项目不应该依赖数据库，我想有机会写这个：

```
SELECT * FROM my_func(3); 
```

有没有办法在 Oracle 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:49:25.873

您必须使用表集合表达式 Table() 直接执行此操作。

如果您不需要传入该参数，则可以在视图中封装针对表集合表达式的查询。

否则，可能有一种方法可以通过打包的全局变量将参数传递给函数，但它可能与数据库无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:45:40.633

不，没有 table()，Oracle 无法做到这一点。我会在调用中使用一个简单的开关来确定要从中选择的“表”变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T13:00:55.313

与程序可能性中的 MS SQL 相比，您使用 Oracle 在不同的星球上。只是不同的概念并不难

**示例1：**

```
 PROCEDURE Get_EligPlanTypes_sp    (I_EMPLID         IN     VARCHAR2,
                                 EligPlanTypesCur OUT    CurRefType) IS

  BEGIN

--* Retrieve eligible plan types for entry into the plan object. 

   OPEN EligPlanTypesCur FOR SELECT DISPLAY_PLN_SEQ
                   ,PLAN_TYPE
                   ,OPTION_CD
                   ,ELECTION_MADE
                               FROM ENR_PARTIC_PLAN
                      WHERE EMPLID   = I_EMPLID
                           ORDER BY DISPLAY_PLN_SEQ;

    EXCEPTION
     WHEN OTHERS THEN
             RAISE;

  END Get_EligPlanTypes_sp; 
```

**示例功能：**

```
CREATE OR REPLACE PACKAGE dba_Functions_Package
AS

Function InstrCount         (strValue     Varchar2
                ,strTarget        Varchar2)
                RETURN NUMBER;

END dba_Functions_Package;

/

CREATE OR REPLACE PACKAGE BODY dba_Functions_Package
AS
-- *********************************************************************
-- ***  F U N C  T I O N (InstrCount) D E C L A R A T I O N S      *****
-- *********************************************************************

Function InstrCount     (strValue     IN Varchar2
            ,strTarget        IN Varchar2)
    RETURN Number
IS
        numOccurs   Integer :=  0;
        numReturn   Number  := -1;
    BEGIN

        While numReturn != 0 Loop
            numReturn := Instr(strValue,strTarget,1,numOccurs+1);
            If numReturn <> 0 Then
                numOccurs := numOccurs + 1;
            End If;
        End Loop While;

    RETURN(numOccurs);

    EXCEPTION
            WHEN OTHERS THEN RAISE;

End InstrCount;

END dba_Functions_Package;

/ 
```

查看分层查询。应该让你继续[链接](http://docs.oracle.com/cd/B19306_01/server.102/b14200/queries003.htm#sthref3130)

# parsing - ANTLR 解析分配

> ID：10931919
> 
> 赞同：1
> 
> 时间：2012-06-07T12:36:30.583
> 
> 标签：parsing, antlr, antlr3

我想解析一些作业，我只关心整个作业。不是关于任务中的内容。分配由 表示`':='`。（编辑：在分配之前和之后其他事情可能会发生）

一些例子：

```
a := TRUE & FALSE;
c := a ? 3 : 5;
b := case 
          a : 1;
          !a : 0;
        esac; 
```

目前，我对包含“案例”的作业和其他作业进行了区分。对于简单的任务，我尝试了类似的东西，`~('case' | 'esac' | ';')`但随后 antlr 抱怨不匹配的令牌（如`'='`）。

```
assignment : 
   NAME ':='! expression ;

expression : 
    ( simple_expression | case_expression) ;

simple_expression : 
    ((OPERATOR | NAME) & ~('case' | 'esac'))+  ';'! ;

case_expression : 
    'case' .+ 'esac' ';'! ; 
```

`((OPERATOR | NAME) & ~('case' | 'esac'))+ ';'! ;`我尝试用以下内容替换，因为eclipse-interpreter 似乎不喜欢`'and'`.

```
 (~(OPERATOR | ~NAME | ('case' | 'esac')) |
    ~(~OPERATOR | NAME | ('case' | 'esac')) |
    ~(~OPERATOR | ~NAME | ('case' | 'esac')))  ';'! 
```

但这不起作用。我明白了

> “错误（139）：/AntlrTutorial/src/foo/NusmvInput.g:78:5：设置补码为空|--->〜（〜OPERATOR |〜NAME |（'case'|'esac'）））EOC ！;"

我该如何解析它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:16:39.570

这里有几件事出了问题：

*   您`&`在语法中使用它，而它应该带有引号：`'&'`
*   除非您确切知道自己在做什么，否则不要在解析器规则中使用`~`and `.`（尤其不要`.+`！）：仅在词法分析器规则中使用它们；
*   创建词法分析器规则，而不是在解析器规则中定义`'case'`和`'esac'`（如果没有其他词法分析器规则可能匹配，则在解析器规则中使用文字标记是安全的，但是*看起来*很像*，并且*`'case'`它们可能最终出现在您的 AST 中，在这种情况下它是最好自己在词法分析器中明确定义它们）`'esac'` *`NAME`*

 **这是一个快速演示：

```
grammar T;

options {
  output=AST;
}

tokens {
  ROOT;
  CASES;
  CASE;
}

parse
 : (assignment SCOL)* EOF -> ^(ROOT assignment*)
 ;

assignment 
 : NAME ASSIGN^ expression 
 ;

expression
 : ternary_expression
 ;

ternary_expression
 : or_expression (QMARK^ ternary_expression COL! ternary_expression)?
 ;

or_expression
 : unary_expression ((AND | OR)^ unary_expression)*
 ;

unary_expression
 : NOT^ atom
 | atom
 ;

atom
 : TRUE
 | FALSE
 | NUMBER
 | NAME
 | CASE single_case+ ESAC -> ^(CASES single_case+)
 | '(' expression ')'     -> expression
 ;

single_case
 : expression COL expression SCOL -> ^(CASE expression expression)
 ;

TRUE   : 'TRUE';
FALSE  : 'FALSE';
CASE   : 'case';
ESAC   : 'esac';
ASSIGN : ':='; 
AND    : '&';
OR     : '|';
NOT    : '!';
QMARK  : '?';
COL    : ':';
SCOL   : ';';
NAME   : ('a'..'z' | 'A'..'Z')+;
NUMBER : ('0'..'9')+;
SPACE  : (' ' | '\t' | '\r' | '\n')+ {skip();}; 
```

这将解析您的输入：

```
a := TRUE & FALSE;
c := a ? 3 : 5;
b := case 
          a : 1;
          !a : 0;
        esac; 
```

如下：

![在此处输入图像描述](../Images/9bfd50b60904659cde2c3dc0c041f3b7.png)**

# c# - 从请求流中保存多个文件时出现“该进程无法访问该文件，因为它正被另一个进程使用”

> ID：10931920
> 
> 赞同：0
> 
> 时间：2012-06-07T12:36:38.663
> 
> 标签：c#, asp.net, asp.net-mvc, httpwebrequest, imageresizer

我正在使用 HTML5 画布元素和新的 HTML5 文件 i\o 函数在其上放置多个文件并让它们上传。它工作正常，但现在我需要生成一个新文件名，如果目标目录中没有文件（它是一个 7 位整数）或获取最后上传的文件的名称，将其转换为 int32 并为每个新文件增加一个文件上传到同一目录。这就是`GetFileName(dir);`进来。第一个图像总是可以正常上传，但是一旦保存第二个文件并且进程命中 ImageJob.Build()，问题就开始了，我认为这是因为一旦新文件开始写入，GetFile() 方法就会运行同时在行中的第二个文件正在检查最后写入的文件，该文件仍在写入中，这会产生冲突。我该如何解决这个问题，也许我可以以某种方式在 Request.InputStream 数据上使用 foreach 进行迭代，或者实现某种等待进程完成的进程监视？

**`Update:`**我尝试使用 TempData 来存储生成的文件名，并在 TempData 中为所有下一个文件名增加 int 值，它似乎做得更好，可以获取更多图像，但在某些时候仍然会出错。但是 TempData 不是为此，因为它在每次读取后都会被删除，再次重新分配给它并没有帮助。也许我会尝试将它存储在会话中。

> 该进程无法访问文件“C:\Users\Admin\Documents\Visual Studio 2010\Projects\myproj\myproj\Content\photoAlbums\59\31\9337822.jpg”，因为它正被另一个进程使用。

```
public PartialViewResult Upload()
{          
    string fileName = Request.Headers["filename"];
    string catid = Request.Headers["catid"];
    string pageid = Request.Headers["pageid"];
    string albumname = Request.Headers["albumname"];

    var dir = "~/Content/photoAlbums/" + catid + "/" + pageid + "/" + (albumname ?? null);

    var noex = GetFileName(dir);

    var extension = ".jpg";

    string thumbFile = noex + "_t" + extension;
    fileName = noex + extension;

    byte[] file = new byte[Request.ContentLength];
    Request.InputStream.Read(file, 0, Request.ContentLength);

    string imgdir;
    string thumbimgdir;
    string imageurl;

    if (albumname != null) 
    { 
        imgdir = Server.MapPath("~/Content/photoAlbums/" + catid + "/" + pageid + "/" + albumname + "/" + fileName);
        thumbimgdir = Server.MapPath("~/Content/photoAlbums/" + catid + "/" + pageid + "/" + albumname + "/" + thumbFile);
        imageurl = "/Content/photoAlbums/" + catid + "/" + pageid + "/" + albumname + "/" + thumbFile;
    }
    else 
    { 
        imgdir = Server.MapPath("~/Content/photoAlbums/" + catid + "/" + pageid + "/" + fileName);
        thumbimgdir = Server.MapPath("~/Content/photoAlbums/" + catid + "/" + pageid + "/" + thumbFile);
        imageurl = "/Content/photoAlbums/" + catid + "/" + pageid + "/" + thumbFile;
    }

    ImageJob b = new ImageJob(file, imgdir, new ResizeSettings("maxwidth=1024&maxheight=768&format=jpg")); b.CreateParentDirectory = true; b.Build();
    ImageJob a = new ImageJob(file, thumbimgdir, new ResizeSettings("w=100&h=100&mode=crop&format=jpg")); a.CreateParentDirectory = true; a.Build();

    ViewBag.CatID = catid;
    ViewBag.PageID = pageid;
    ViewBag.FileName = fileName;

    return PartialView("AlbumImage", imageurl);
}

public string GetFileName(string dir)
{
    var FullPath = Server.MapPath(dir);
    var dinfo = new DirectoryInfo(FullPath);

    string FileName;
    if (dinfo.Exists)
    {           
       var Filex = dinfo.EnumerateFiles().OrderBy(x => x.Name).LastOrDefault();
       FileName = Filex != null ? Path.GetFileNameWithoutExtension(Filex.Name) : null;

       if (FileName != null)
       {
           FileName = FileName.Contains("_t") ? FileName.Substring(0, FileName.Length - 2) : FileName;
           int fnum;
           Int32.TryParse(FileName, out fnum);
           FileName = (fnum + 1).ToString();

           if (fnum > 999999) { return FileName; } //Check that TryParse produced valid int
           else 
           {
              var random = new Random();
              FileName = random.Next(1000000, 9999000).ToString();
           }
       }
       else
       {
           var random = new Random();
           FileName = random.Next(1000000, 9999000).ToString();
       }
    }
    else
    {        
           var random = new Random();
           FileName = random.Next(1000000, 9999000).ToString();
    }
    return FileName;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:30:04.333

如果你想生成唯一的文件名，你根本**不能使用 Random 类。**它使用当前时间作为种子，因此两个完全并发的请求将始终产生相同的“随机”数字。

您可以使用[加密随机数生成器](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rngcryptoserviceprovider.aspx)，但您仍然必须确保 (a) 一次只有一个线程会生成它，并且 (b) 您使用了足够长的标识符来防止[生日悖论](http://en.wikipedia.org/wiki/Birthday_problem)。

因此，我建议*每个人都*在上传时使用 GUID 标识符，因为它们本质上解决了上述所有问题（我相信使用操作系统级别的锁来防止重复）。

您的方法也不处理每个请求的多个文件上传，尽管这可能是故意的。您可以通过循环`Request.Files`并将每个`HttpPostedFile`实例直接传递到 ImageJob 来支持这些。

这是使用 GUID 且不会遇到并发问题的代码的简化版本。

```
public PartialViewResult Upload()
{          

    string albumname = Request.Headers["albumname"];
    string baseDir = "~/Content/photoAlbums/" + Request.Headers["catid"] + "/" + Request.Headers["pageid"] + "/" (albumname != null ?  albumname + "/" : "");

    byte[] file = new byte[Request.ContentLength];
    Request.InputStream.Read(file, 0, Request.ContentLength);

    ImageJob b = new ImageJob(file, baseDir + "<guid>.<ext>", new ResizeSettings("maxwidth=1024&maxheight=768&format=jpg")); b.CreateParentDirectory = true; b.Build();
    ImageJob a = new ImageJob(file, baseDir + "<guid>_t.<ext>", new ResizeSettings("w=100&h=100&mode=crop&format=jpg")); a.CreateParentDirectory = true; a.Build();

    //Want both the have the same GUID? Pull it from the previous job.
    //string ext = PathUtils.GetExtension(b.FinalPath);
    //ImageJob a = new ImageJob(file, PathUtils.RemoveExtension(a.FinalPath) + "_t." + ext, new ResizeSettings("w=100&h=100&mode=crop&format=jpg")); a.CreateParentDirectory = true; a.Build();

    ViewBag.CatID = Request.Headers["catid"];
    ViewBag.PageID = Request.Headers["pageid"];
    ViewBag.FileName = Request.Headers["filename"];

    return PartialView("AlbumImage", PathUtils.GuessVirtualPath(a.FinalPath));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:20:20.213

如果该过程相对较快（小文件），您可以进入一个循环，检查该异常，使线程休眠几秒钟，然后重试（最多迭代次数）。一个警告是，如果上传是异步的，您可能会错过一个文件。

其他几个建议：

*   将 GetFileName 设为私有方法，这样它就不会从 Web 中触发。
*   Filex 查询中的 OrderBy 在达到 8 位后可能无法达到您的预期（如果第一个 Random() 是一个非常高的数字，则可能）。
*   Random() 可能应该被播种以产生更好的随机性。

# wcf - 如何清除服务器上的传出消息缓冲区？

> ID：10931922
> 
> 赞同：4
> 
> 时间：2012-06-07T12:36:46.133
> 
> 标签：wcf, performance, silverlight, buffer, pollingduplexhttpbinding

我编写了一个服务，使用`PollingDuplexHttpBinding`它有一个使用它的 Silverllight 客户端。我的服务基本上有给定数量的客户端向服务发送他们的数据（经常是每秒，并且数据非常大，每次调用大约 5KB），并监听其他客户端向服务发送的新数据被路由到他们，非常类似于聊天室架构。

我注意到的问题是，当客户端通过 Internet 连接到服务时，几分钟后服务的响应变得缓慢并且回复变得滞后。我得出的结论是，当服务主机的上传容量达到时（互联网上传速度，服务器上只有大约 15KB/s），其他客户端发送的消息会在有可用带宽时进行相应的缓冲和处理。我想知道如何才能限制服务用于存储从客户端接收到的消息的缓冲区的占用？我的客户获得所有数据并不是那么重要，而是他们获得其他人发送的最新数据，因此实时连接是我正在寻找的，以保证交付为代价。

简而言之，我希望能够在服务填满时清理我的队列/缓冲区，或者达到某个上限并开始用收到的呼叫再次填充它以消除延迟。我该怎么做呢？`MaxBufferSize`我需要在服务端和客户端减少该属性吗？或者我是否需要在我的服务中编写此功能？有任何想法吗？

谢谢。

**编辑：**

这是我的服务架构：

```
//the service
[ServiceContract(Namespace = "", CallbackContract = typeof(INewsNotification))]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Multiple, InstanceContextMode = InstanceContextMode.Single)]
public class NewsService
{

private static Dictionary<IChatNotification, string> clients = new Dictionary<IChatNotification, string>();
private ReaderWriterLockSlim subscribersLock = new ReaderWriterLockSlim();

[OperationContract(IsOneWay = true)]
public void PublishNotifications(byte[] data)
{
            try
            {
                subscribersLock.EnterReadLock();
                List<INewsNotification> removeList = new List<INewsNotification>();
                lock (clients)
                {
                    foreach (var subscriber in clients)
                    {
                        if (OperationContext.Current.GetCallbackChannel<IChatNotification>() == subscriber.Key)
                        {
                            continue;
                        }
                        try
                        {
                            subscriber.Key.BeginOnNotificationSend(data, GetCurrentUser(), onNotifyCompletedNotificationSend, subscriber.Key);

                        }
                        catch (CommunicationObjectAbortedException)
                        {
                            removeList.Add(subscriber.Key);
                        }
                        catch (CommunicationException)
                        {
                            removeList.Add(subscriber.Key);
                        }
                        catch (ObjectDisposedException)
                        {
                            removeList.Add(subscriber.Key);
                        }

                    }
                }

                foreach (var item in removeList)
                {
                    clients.Remove(item);
                }
            }
            finally
            {
                subscribersLock.ExitReadLock();
            }
        }

}

//the callback contract
[ServiceContract]
public interface INewsNotification
{
       [OperationContract(IsOneWay = true, AsyncPattern = true)]
       IAsyncResult BeginOnNotificationSend(byte[] data, string username, AsyncCallback callback, object asyncState);
       void EndOnNotificationSend(IAsyncResult result);
} 
```

服务配置：

```
 <system.serviceModel>
    <extensions>
      <bindingExtensions>
        <add name="pollingDuplex" type="System.ServiceModel.Configuration.PollingDuplexHttpBindingCollectionElement, System.ServiceModel.PollingDuplex, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
      </bindingExtensions>
    </extensions>
    <behaviors>
      <serviceBehaviors>
        <behavior name="">

          <serviceMetadata httpGetEnabled="true" />
          <serviceThrottling maxConcurrentSessions="2147483647" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <bindings>
      <pollingDuplex>

        <binding name="myPollingDuplex" duplexMode="SingleMessagePerPoll" 
                 maxOutputDelay="00:00:00" inactivityTimeout="02:00:00" 
                 serverPollTimeout="00:55:00" sendTimeout="02:00:00"  openTimeout="02:00:00" 
                  maxBufferSize="10000"  maxReceivedMessageSize="10000" maxBufferPoolSize="1000"/>

      </pollingDuplex>
    </bindings>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
    <services>
      <service name="NewsNotificationService.Web.NewsService">
        <endpoint address="" binding="pollingDuplex" bindingConfiguration="myPollingDuplex" contract="NewsNotificationService.Web.NewsService" />
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
      </service>
    </services>
  </system.serviceModel>
    <system.webServer>
        <directoryBrowse enabled="true" />
    </system.webServer>
</configuration> 
```

客户端通常会在 500 毫秒到 1000 毫秒之间调用服务，如下所示：

`_client.PublishNotificationAsync(byte[] data);`

并且回调将通知客户端其他客户端发送的通知：

```
void client_NotifyNewsReceived(object sender, NewsServiceProxy.OnNewsSendReceivedEventArgs e)
        {
                e.Usernamer//WHich client published the data
                e.data//contents of the notification
        } 
```

回顾一下，当客户端数量增加，并且服务主机通过互联网上传速度受到限制时，服务发送给订阅者的消息会在某处缓冲并在队列中处理，这就是导致问题的原因，我不知道这些消息在哪里缓冲。在 LAN 中，该服务运行良好，因为服务器的上传速度等于其下载速度（对于 100KB/s 的传入呼叫，它发出 100KB/s 的通知）。这些消息在哪里缓冲？我怎样才能清除这个缓冲区？

我做了一些实验来尝试查看消息是否在服务中缓冲，我尝试在客户端上调用此方法，但它始终返回 0，即使一个客户端仍在接收其他人发送的通知 4- 5 分钟前：

```
[OperationContract(IsOneWay = false)]
public int GetQueuedMessages()
{

            return OperationContext.Current.OutgoingMessageHeaders.Count();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T17:19:44.370

我对你的情况做了一些数学计算。

*   消息大小 = 100KB
*   上传通道 = 15KB/s
*   下载通道 = 100KB/s
*   客户端每秒调用服务 1-2 次

> 客户端通常会在 500 毫秒到 1000 毫秒之间调用服务

这个对吗？

对于一个客户端，仅消息的下载流量将是 100-200KB/s，这只是消息正文。将有更多的标题和更多的启用安全性。

消息将被合并以进行异步调用。因此，如果我们有 3 个客户端，并且每个发送的消息回调包含每个客户端的 2 条消息。4 个客户端 - 每个回调中有 3 条消息。

对于 3 个客户端，下载通道的速度为 200-400KB/s。

对我来说，看起来消息对于您声明的带宽来说太大了。

检查您是否可以：

1.  减小消息大小。我不知道您的业务性质，因此无法在这里提供建议。

2.  对消息或流量使用压缩。

3.  增加网络带宽。没有那个即使是理想的解决方案也会有非常高的延迟。您可以花费数天甚至数周的时间来优化您的代码，即使您正确地使用了您的网络解决方案，仍然会很慢。

我知道这听起来像是明显的船长，但有些问题没有正确答案，除非你改变问题。

执行上述步骤后 `ServiceThrottlingBehavior`，结合将管理回调队列的自定义代码。

`ServiceThrottlingBehavior`如果达到边界，则拒绝请求。

[http://msdn.microsoft.com/en-us/library/ms735114(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms735114(v=vs.100).aspx)

这是微不足道的样本。实数应该专门为您的环境定义。

```
<serviceThrottling 
 maxConcurrentCalls="1" 
 maxConcurrentSessions="1" 
 maxConcurrentInstances="1"
/> 
```

**更新：**

> 我在这个问题上犯了很大的错误，每次调用都是 5KB/s，

即使是 5KB 的消息，15KB/s 也不够。我们只计算 3 个用户的流量。3 每秒传入消息。系统现在应该使用双工来通知用户其他人发送了什么。每个用户都应该从他的合作伙伴那里得到消息。我们总共有 3 条消息。一个（属于发件人的）可能会被跳过，因此每个用户都应该收到 2 条消息。3 个用户将获得 10KB（5KB + 5KB = 一条消息 10KB）= 30KB。每秒一条消息将为 3 个用户在上传通道中产生 30KB/秒的速度。

> 这些消息在哪里缓冲？我怎样才能清除这个缓冲区？

这取决于您如何托管您的服务。如果它是自托管服务，则根本没有缓冲。您的代码试图向接收者发送消息，但由于通道被淹没，它变得非常慢。使用 IIS 可能会有一些缓冲，但从外部触摸它不是一个好习惯。

正确的解决方案是节流。由于带宽限制，您不应尝试将所有消息发送到所有客户端。相反，您应该例如限制发送消息的线程数量。因此，从上面的 3 个用户而不是并行发送 3 条消息，您可以按顺序发送它们，或者决定只有一个用户将在该轮中获得更新，下一个用户将在下一轮中获得更新。

所以一般的想法是不要在你有数据后立即将所有内容发送给每个人，而是只发送你能负担得起的数据量，并使用线程数或响应速度来控制它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:19:01.187

`MaxBufferSize`不会帮你解决这个问题。您将不得不自己编写代码，我不知道任何现有的解决方案/框架。然而，这听起来确实是一个有趣的问题。您可以首先为每个连接的客户端维护一个`Queue<Message>`，然后在推送到此队列时（或当客户端调用 dequeue 时），您可以重新评估`Message`应该发送的内容。

更新：首先，我会*忘记尝试从客户端和配置中执行此操作，您将不得不自己编写代码*

在这里，我可以看到您发送给客户的位置：

```
 subscriber.Key.BeginOnNotificationSend(data, GetCurrentUser(), onNotifyCompletedNotificationSend, subscriber.Key); 
```

因此，与其将这些通知异步推送到每个客户端，不如将它们推送到`Queue<byte[]>`. 每个客户端连接都有自己的队列，您可能应该构造一个专用于每个客户端连接的类：

*请注意，此代码不会开箱即用，并且可能存在一些逻辑错误，仅用作指南*

```
public class ClientConnection
{
    private INewsNotification _callback;
    private Queue<byte> _queue = new Queue<byte>();
    private object _lock = new object();
    private bool _isSending
    public ClientConnection(INewsNotification callBack)
    {
           _callback=callback;
    }
    public void Enqueue(byte[] message)
    { 
       lock(_lock)
       {               
           //what happens here depends on what you want to do. 
           //Do you want to only send the latest message? 
           //if yes, you can just clear out the queue and put the new message in there,                         
           //or you could keep the most recent 5 messages.                
           if(_queue.Count > 0)
               _queue.Clear();
          _queue.Enqueue(message);
           if(!_isSending)
               BeginSendMessage();
       }
    }

    private void BeginSendMessage()
    {
       _isSending=true;
        _callback.BeginOnNotificationSend(_queue.Dequeue(), GetCurrentUser(), EndCallbackClient, subscriber.Key);

    }

    private void EndCallbackClient(IAsyncResult ar)
    {
        _callback.EndReceive(ar);
        lock(_lock)
        {
           _isSending=false;
           if(_queue.Count > 0)
              BeginSendMessage();//more messages to send
        }
    }
} 
```

想象一个场景，一条消息被推送到客户端，同时发送 9 条消息调用`ClientConnection.Enqueue`。当第一条消息完成后，它会检查应该只包含最后一条（第 9 条消息）的队列

# c - 如何使用 Xlib 在 Linux 中监视现有窗口上的鼠标指针移动

> ID：10931926
> 
> 赞同：0
> 
> 时间：2012-06-07T12:36:56.043
> 
> 标签：c, xlib

我目前正在编写一个应用程序，它需要监视 Linux 中所有现有窗口上的鼠标指针移动。我正在使用带有 gnome 的 Ubuntu 11.10。我需要的是在屏幕上的任何位置获取有关鼠标指针移动的信息。这是执行相同操作的现有代码：

```
void *MonitorOffline(void *threaddata)
{
    time_t      sTime, cTime;
    DISPLAY     *dsp = NULL;
    int         iError = 0;

    sTime = time(NULL);

    XSetErrorHandler(_invalid_window_handler);
    while (1) {
        XEvent event;
        cTime = time(NULL);
        if ((cTime - sTime) > OFFLINETIME) {
            log_msg("User %s is offline", cuserid(NULL));
            sTime = cTime;
        }
        iError = RegisterWinEvents(&dsp);
        if (iError) {
            log_quit("%s:%d : Error in RegisterWinEvents", __FUNCTION__,
                    __LINE__);
            break;
        }
        XNextEvent(dsp, &event);
        switch(event.type) {
            case KeyPress:
                printf("KeyPress Encountered\n");
                break;
                printf("KeyRelease Encountered\n");

                break;

            case ButtonPress:

                printf("ButtonPress Encountered\n");

                break;

            case ButtonRelease:

                printf("ButtonRelease Encountered\n");

                break;

            case MotionNotify:

                printf("MotionNotify Encountered\n");

                break;

            case EnterNotify:

                printf("EnterNotify Encountered\n");

                break;
            case LeaveNotify:

                printf("LeaveNotify Encountered\n");

                break;

        }
        XCloseDisplay (dsp);
        fflush(stdout);
    }
}

int RegisterWinEvents(DISPLAY   **dsp)
{
    Window window_id;
    char *win_name;
    int iError = 0;
    XSetWindowAttributes attr;
    XWindowAttributes wattr;
    Window root_return, parent_return;
    Window root;
    Window client;
    Window *children_return = NULL;
    unsigned int num_children = 0;
    Status status;
    int i;
    time_t t;

    iError = WDGetRoot(&root, dsp);

    if (iError == -1) {

        return -1;
    }
    status = XQueryTree (*dsp, root, &root_return,
            &parent_return, &children_return,
            &num_children);
    for(i = 0; i < num_children; i++)
    {
        attr.event_mask = KeyPressMask | KeyReleaseMask | ButtonPressMask |
            ButtonReleaseMask | EnterWindowMask |
            LeaveWindowMask | PointerMotionMask |
            Button1MotionMask |
            Button2MotionMask | Button3MotionMask |
            Button4MotionMask | Button5MotionMask |
            ButtonMotionMask | KeymapStateMask |
            ExposureMask | VisibilityChangeMask |
            StructureNotifyMask | /* ResizeRedirectMask | */
            SubstructureNotifyMask | SubstructureRedirectMask |
            FocusChangeMask | PropertyChangeMask |
            ColormapChangeMask;// | OwnerGrabButtonMask;

        status = XGetWindowAttributes(*dsp, children_return[i], &wattr);
        if (wattr.all_event_masks & ButtonPressMask)
            attr.event_mask &= ~ButtonPressMask;
        attr.event_mask &= ~SubstructureRedirectMask;
        XSelectInput(*dsp, children_return[i], attr.event_mask);
    }
    XFree(children_return);
    return 0;
}

WINDOW WDGetRootWindow(DISPLAY* pDisplay, INT iScreen)
{
    return RootWindow(pDisplay,iScreen);
}

int WDGetRoot(Window *root, DISPLAY **pDisplay)
{
    INT iScreen = 0;
    setlocale(LC_CTYPE, "");

    //Initialize the Display
    if((*pDisplay = WDOpenDisplay(NULL))) {
        //Get the sceen associated with Display
        iScreen = WDGetScreenOfDisplay(*pDisplay);
        //Once we have the screen , we need to get the rootwindow associated
        //with the screen so that we can traverse the window tree and get the
        //window with current focus (the active window)
        *root = WDGetRootWindow(*pDisplay, iScreen);
    } else {
        return -1;
    }
    return 0;
} 
```

使用上面的代码，我能够捕捉到所有窗口标题栏上的鼠标指针移动，但是当鼠标指针位于窗口内时（例如办公室作家的文本部分等），我无法捕捉到任何移动。我还需要在代码中添加什么才能让它在整个窗口中捕获鼠标移动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:07:51.677

[XQueiryPointer](http://www.xfree86.org/4.4.0/XQueryPointer.3.html)声称能够返回窗口中的坐标。

> XQueryPointer 函数返回...相对于根窗口原点的指针坐标。

尝试结合您对 XQueryTree 的调用

# ios - 如何从另一个类调用一个xib文件，ios

> ID：10931929
> 
> 赞同：1
> 
> 时间：2012-06-07T12:37:03.577
> 
> 标签：ios, uiviewcontroller, navigation, xib

我用谷歌搜索了很多，但有些地方我在*xib*文件方面犯了错误。我在 view controller.xib 文件中有四个按钮。然后，当我点击按钮一二三时，必须显示 alertinputtypetext。它成功地完成了。

但是当我点击第四个按钮时，我需要显示pickerView.xib。但是当我调试应用程序时，应用程序序列丢失并显示 main.m 类。

请帮助我的人。给我提示以进一步进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:11:16.370

“我需要显示另一个文件pickerView.xib”？..如果pickerView是UIViewController子类，你可以简单地显示它..如果它只是一个nib文件包含一个pickerView，你可以使用`loadNibNamed:(NSString *)name owner:(id)owner options:(NSDictionary *)options`，但实际上你不需要放它在单独的 nib 文件中..`xib`可以在其中包含多个视图，因此您可以使用原始视图`viewController.xib`，或者我更喜欢以编程方式对其进行编程，而无需从 xib 加载它。

# c# - 模拟副作用

> ID：10931930
> 
> 赞同：3
> 
> 时间：2012-06-07T12:37:03.467
> 
> 标签：c#, unit-testing, mocking, moq

使用 Moq，是否可以设置一个模拟属性以使其发生变异？

例如，给定：

```
public interface IService // To be mocked.
{
    bool IsConnected { get; }
} 
```

是否可以设置一个模拟 IService 以便以下通过？

```
var mockService = new Mock<IService>();

// Setup mockService so IsConnected mutates...?

bool before = mockService.Object.IsConnected;

bool after = mockService.Object.IsConnected;

Assert.AreNotEqual(before, after); 
```

当然这个设置不能解决问题：

```
mockService.SetupGet(service => service.IsConnected).Returns(false);
mockService.SetupGet(service => service.IsConnected).Returns(true); 
```

这与我对 Moq 没有实现记录/播放模型的理解一致。

这是一个更现实的例子：

```
public interface IService // To be mocked.
{
    bool IsConnected { get; }

    void Connect(); // Mutates IsConnected.
}

class Client // To be tested
{
    private readonly IService service;

    public Client(IService service)
    {
        this.service = service;
    }

    public bool DoWork()
    {
        if (!service.IsConnected)  // In test, IsConnected should return false.
        {
            service.Connect();
        }

        if (!service.IsConnected) // In test, IsConnected should return true.
        {
            return false;
        }

        // ... yada yada yada more code

        return true;
    }
} 
```

我正在使用最小起订量 4.0.10827.0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T12:42:28.003

您可以将 Returns 设置为 a`Func<bool>`而不是 bool。然后，您将编写该 func 以更改其结果。就像是....

```
bool isConnected = false
var mockService = new Mock<IService>();
// Setup mockService so IsConnected mutates...?
mockService.Setup(s => s.Connect()).Callback(() => isConnected = true);
mockService.SetupGet(s => s.IsConnected).Returns(() => isConnected);

bool before = mockService.Object.IsConnected;

mockService.Object.Connect();

bool after = mockService.Object.IsConnected;

Assert.AreNotEqual(before, after); 
```

但是，根据您的服务变得多么复杂，您可能需要考虑制作一个 FakeService 并使用它而不是模拟。

# asp.net - 页面离开 10 分钟后，回发导致“连接已重置”

> ID：10931934
> 
> 赞同：1
> 
> 时间：2012-06-07T12:37:20.857
> 
> 标签：asp.net, iis, iis-7, connection

我不知道这是否属于这里，如果不属于这里，我很抱歉。

我正在使用 IIS7、ASP.NET 2.0。

在我的开发服务器上（有时在我的测试服务器上），如果我让页面静止超过 10 分钟，然后尝试执行回发（通过页面上的按钮），页面将尝试加载 30-60 秒，然后然后回来`The connection was reset`留言。

我没有发布任何代码，因为它似乎不是导致问题的特定页面。

就好像网站进程已被回收，网站无法找到/建立指向新进程的链接。

有人对我应该从哪里开始查看代码或服务器有任何想法吗？

编辑：查看我的事件日志并没有显示超出长度的任何问题。但是它确实出现了超时错误，但我不知道是什么导致它超时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T07:39:49.917

问题是请求大小大于您提供的值。更改 web.config 的 system.web 配置部分的 httpRuntime 部分中的 maxRequestLength 以接受更大的值。

```
<System.Web>
<httpRuntime maxRequestLength="8192" /> 
```

# java - 在不同的浏览器中打开链接 java swing

> ID：10931935
> 
> 赞同：2
> 
> 时间：2012-06-07T12:37:22.870
> 
> 标签：java, swing, browser

如何在 java swing 的不同浏览器中打开链接？

我读过这篇文章： [http ://www.roseindia.net/tutorial/java/swing/openBrowser.html](http://www.roseindia.net/tutorial/java/swing/openBrowser.html)

这是在我的默认浏览器中打开的。但是当我想在不同的浏览器中打开时

它给出了一条错误消息：“无法运行程序”：CreateProcess error = 2，系统找不到指定的文件“

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T12:50:20.273

一般来说，要在用户的默认浏览器中打开链接，您应该使用更现代的方法：

```
String url = "www.stackoverflow.com";
Desktop desktop = java.awt.Desktop.getDesktop();
desktop.browse(url); 
```

**无需搞砸您正在运行的操作系统**（正如您链接的示例试图做的那样）。最好让`java.awt.Desktop`自己负责找到合适的浏览器或应用程序来打开 URL（有关详细信息，请参阅[文档）。](http://docs.oracle.com/javase/7/docs/api/java/awt/Desktop.html#browse%28java.net.URI%29)

API 中还有一部分可以优雅地处理权限和“不寻常”的操作系统设置。如果您的代码有可能在受限制的安全策略下或在可能没有浏览器的平台上运行，那么您可以预先检查而不是等待调用`browse`.

```
// check if java.awt.Desktop is available on the current platform
java.awt.Desktop.isDesktopSupported();

// check the current platform and security policy will let you browse to a url
Desktop desktop = java.awt.Desktop.getDesktop();
desktop.isSupported(Desktop.Action.BROWSE); 
```

# jquery - 通过 jQuery 实现文本模糊效果

> ID：10931938
> 
> 赞同：1
> 
> 时间：2012-06-07T12:37:41.360
> 
> 标签：jquery, drupal, blur

我有一个具有以下结构的文本列表：

```
<div class="text">
<a href="/node/30">Site Text</a>
</div> 
```

当鼠标悬停在一个列表项上时，我想为其他列表项获得模糊效果。

我想获得与[http://tympanus.net/Tutorials/ItemBlur/](http://tympanus.net/Tutorials/ItemBlur/)上相同的效果。

![前](../Images/6a15d16d6031ce2e3c379cf8c7cc94d2.png)

![后](../Images/25b2d4ba8d48b0376dd53aa4e15f8426.png)

我能怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:48:26.887

嘿检查这些例子：

是的，但你只能在这里模糊文本而不是其他东西。（在 css 2 中）

但在 css 3 中也可以模糊其他东西。

[示例 1](http://motyar.blogspot.in/2010/04/blur-effect-with-css-and-jquery.html)

[示例 2](http://css-tricks.com/snippets/css/blurry-text/)

**编辑：**

看一下这个：

```
<style>
 .hello{color:transparent; text-shadow:0 0 0 #000; font-size:20px;}
 .hello div{float:left; margin:10px;}
 .hello:hover div{text-shadow:0 0 10px #000;}
 .hello:hover div:hover{text-shadow:0 0 0 #000;}
 </style>
  <div class="hello">
    <div>
        new1
    </div>
    <div>
        new2
    </div>
    <div>
        new3
    </div>
    <div>
        new4
    </div>
  </div> 
```

这是一个简单的基于 CSS 的效果，使用它并享受它；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:46:56.360

试试这个： -

```
$("#ElementID").hover(function(){
  $("#OtherElementId").blur();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T12:45:13.473

尝试：

```
$('.text a').blur(function() {
    //Add your styles
} 
```

# google-maps-api-3 - 我们是否有适用于 Google Maps API V3 的未压缩 javascript 库

> ID：10931939
> 
> 赞同：7
> 
> 时间：2012-06-07T12:37:49.880
> 
> 标签：google-maps-api-3

我在使用 Google Map API V3 Javascript 库时收到“未捕获的类型错误”。我无法找到导致此错误发生的功能。我们是否有用于 Google MAP API 的未压缩 Javascript 库。如果没有，请提供您的调试建议。谢谢 问候， 迪内什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T12:54:33.490

没有未压缩的库。所有 API 方法均根据已发布的文档访问，因此不需要未压缩版本。遵循文档，它将起作用。

要调试，请在 Firefox 中使用 Firebug 之类的东西。当它因错误而中断时，请退回调用堆栈，直到您到达 Javascript 代码。这将告诉你它试图执行什么。

它可能像提供字符串值而不是数字一样简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-22T10:23:24.683

如前所述，没有办法获得具有真实（有用）变量和注释的原始版本

但！Google Chrome 开发工具中有一个新的（ish？）功能，您可以在其中对代码进行去最小化（“使缩小后的代码具有人类可读性”）

[https://developers.google.com/web/tools/chrome-devtools/javascript/reference#format](https://developers.google.com/web/tools/chrome-devtools/javascript/reference#format)

[![chrome 开发工具中人类可读功能的屏幕截图](../Images/4a99b05b25fb896805f6cf77b8d17e74.png)](https://i.stack.imgur.com/KdMwS.png)

至少应该有助于调试

# ehcache - ehcache.xml 中的缓存是否继承自 defaultCache？

> ID：10931942
> 
> 赞同：14
> 
> 时间：2012-06-07T12:38:01.033
> 
> 标签：ehcache

如果我有以下配置：

```
<defaultCache timeToIdleSeconds="120"
        timeToLiveSeconds="120" />
<cache name="test"
        timeToLiveSeconds="300" /> 
```

`timeToIdleSeconds`缓存的值是`test`多少？它会从默认缓存继承，因此等于 120，还是会采用手册中给出的默认值，即 0（无穷大）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-07T16:11:18.357

timeToIdleSeconds 将是默认值，而不是从“defaultCache”继承。“defaultCache”有点用词不当/误导，因为它没有为每个缓存提供“默认值”，但它只是为可以/动态添加的缓存指定配置的一种方式 - 使用 cacheManager.addCache(String cacheName ）。

从[http://www.ehcache.org/ehcache.xml](http://www.ehcache.org/ehcache.xml)，该标签的文档读取

```
默认缓存配置。
这些设置将应用于以编程方式创建的缓存，使用
 CacheManager.add（字符串缓存名称）。这个元素是可选的，并且使用
 CacheManager.add(String cacheName) 不存在时会抛出 CacheException
 defaultCache 有一个隐含的名称“default”，它是一个保留的缓存名称。

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-14T08:34:08.763

```
private Ehcache cloneDefaultCache(final String cacheName) {
        if (defaultCache == null) {
            return null;
        }
        Ehcache cache;
        try {
            cache = (Ehcache) defaultCache.clone();
        } catch (CloneNotSupportedException e) {
            throw new CacheException("Failure cloning default cache. Initial cause was " + e.getMessage(), e);
        }
        if (cache != null) {
            cache.setName(cacheName);
        }
        return cache;
    } 
```

```
Method
    cloneDefaultCache(String)
Found usages  (2 usages found)
    Library  (2 usages found)
        Unclassified usage  (2 usages found)
            Maven: net.sf.ehcache:ehcache-core:2.6.11  (2 usages found)
                net.sf.ehcache  (2 usages found)
                    CacheManager  (2 usages found)
                        addCache(String)  (1 usage found)
                            1173 Ehcache clonedDefaultCache = cloneDefaultCache(cacheName);
                        addCacheIfAbsent(String)  (1 usage found)
                            1857 Ehcache clonedDefaultCache = cloneDefaultCache(cacheName); 
```

# solaris - 如何在虚拟机上创建共享文件夹

> ID：10931944
> 
> 赞同：0
> 
> 时间：2012-06-07T12:38:12.280
> 
> 标签：solaris, virtualbox

我们在我们的 Solaris 机器上安装了一个 Windows Oracle vm，它将使用 Xmanager 启动。

有人可以帮我解决以下问题吗

我可以使用“\vboxsrv”从 Windows VM 使用 solaris 上的文件夹，但是我该怎么做

我可以直接更新windows vm上的文件而不通过xmanager打开它吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T06:46:50.067

我找到了一种从 Hostmachine 在虚拟机上执行命令的方法。使用此命令工具，我正在访问虚拟机中的文件或文件夹

命令行工具是 VBoxManage - 它有很多参数，我们可以在虚拟机上做任何事情，从 VM 开始到关闭

/opt/VirtualBox > VBoxManage Startvm "windows" /opt/VirtualBox > VBoxManage guestcontrol "windows" 执行 --image "cmd.exe" --username root --password 12345 --wait-exit --wait-stdout -- - l /usr

# android - 如何在 Android 中使用文件观察器删除文件？

> ID：10931946
> 
> 赞同：1
> 
> 时间：2012-06-07T12:38:21.513
> 
> 标签：android, file, sd-card, fileobserver

我正在尝试使用文件观察者删除文件。在我的代码中，如果任何文件被推入 SD 卡，它会触发一个创建事件。在那个事件中，我想删除那个文件。我正在尝试下面提供的代码，但我无法删除文件，因为正在复制文件。所以，我现在想在文件成功复制到 SD 卡后删除文件。

文件成功复制到 SD 卡时是否有任何事件通知？

```
 public class RecursiveFileObserver extends FileObserver
{
    /** Only modification events */
    public static int CHANGES_ONLY = CREATE | DELETE | CLOSE_WRITE | MOVE_SELF
    | MOVED_FROM | MOVED_TO;

    List<SingleFileObserver> mObservers;
    String mPath;
    int mMask;
    Context mContext;

    public RecursiveFileObserver(String path, Context context)
    {
        this(path, ALL_EVENTS, context);
    }

    public RecursiveFileObserver(String path, int mask, Context context)
    {
        super(path, mask);
        mPath = path;
        mMask = mask;
        mContext = context;
    }

    @Override 
    public void startWatching()
    {
        if (mObservers != null)
            return ;

        mObservers = new ArrayList();
        Stack stack = new Stack();
        stack.push(mPath);

        while (!stack.isEmpty())
        {
            String parent = String.valueOf(stack.pop());
            mObservers.add(new SingleFileObserver(parent, mMask));
            File path = new File(parent);
            File[]files = path.listFiles();
            if (null == files)
            continue;
            for (File f: files)
            {
                if (f.isDirectory() && !f.getName().equals(".") && !f.getName().equals(".."))
                {
                    stack.push(f.getPath());
                }
            }
        }

        for (SingleFileObserver sfo: mObservers)
        {
            sfo.startWatching();
        }
    }

    @Override 
    public void stopWatching()
    {
        if (mObservers == null)
            return ;

        for (SingleFileObserver sfo: mObservers)
        {
            sfo.stopWatching();
        }
        mObservers.clear();
        mObservers = null;
    }

    @Override 
    public void onEvent(int event, String path)
    {
        switch (event)
        {

            case FileObserver.CREATE:
            Log.i("RecursiveFileObserver", "CREATE: " + path);
            File file = new File(path);
            Log.d("File length "," file length = "+file.length());

            if(file.exists()){
            boolean deleted = file.delete(); 
            Log.d("File Deteted "," file Delete = "+deleted);
            }
            break;

        }
    }

    /**
    * Monitor single directory and dispatch all events to its parent, with full path.
    */
    class SingleFileObserver extends FileObserver
    {
        String mPath;

        public SingleFileObserver(String path)
        {
            this(path, ALL_EVENTS);
            mPath = path;
        }

        public SingleFileObserver(String path, int mask)
        {
            super(path, mask);
            mPath = path;
        }

        @Override public void onEvent(int event, String path)
        {
            String newPath = mPath + "/" + path;
            RecursiveFileObserver.this.onEvent(event, newPath);
        }
    }
}

    public class TestFileObserverActivity extends Activity {

    RecursiveFileObserver mObserver;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mObserver = new RecursiveFileObserver(Environment.getExternalStorageDirectory().getAbsolutePath(), RecursiveFileObserver.CREATE, this);
        mObserver.startWatching();

        Toast.makeText(getApplicationContext(), "Watching " + Environment.getExternalStorageDirectory().getAbsolutePath(), Toast.LENGTH_LONG).show();

    }
} 
```

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T22:12:43.820

To my knowledge there is no way of knowing when a file has finished copying. But there is a work around that I can think of. In the create event, try putting a timertask that checks for file completion every 3 seconds. Or try deleting it every 3 seconds until it doesn't exist, then take the timertask off the timer queue. That way it will keep deleting what the copier has done until the file no longer exists.

Hope that helps.

# android - 如何更改安卓应用名称？

> ID：10931947
> 
> 赞同：2
> 
> 时间：2012-06-07T12:38:23.120
> 
> 标签：android

我想以编程方式更改 android 应用程序名称。有没有 API 可以做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T12:40:10.217

您不能以编程方式更改应用名称。它在清单中。你为什么要这样做呢？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T12:46:17.410

你不能务实地做到这一点。它是静态的。转到清单文件并在应用程序标签中添加 android:label="Your application name" 如下所示

```
 <application
    android:icon="@drawable/ic_launcher"
    android:label="Your application name"> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-07T12:46:39.640

您可以尝试使用 Antscripts 更改名称，但这可能只发生在 devTime 期间。appname 本身确实存在于 manifest.xml 中：

```
<application android:label="My App name"> 
```

主要是它引用的`R.String`文件。否则正如 codeBegin 已经说过的，用于`setTitle("AppName")`更改当前活动中的标题。

如果您真的想更改整个应用程序的名称，这是不可能的，想象一下如果频繁重命名应用程序会造成什么混乱；）

# php - 防止 mPDF 中的正文重叠页脚

> ID：10931948
> 
> 赞同：23
> 
> 时间：2012-06-07T12:38:25.743
> 
> 标签：php, mpdf

我正在使用 mPDF 库生成 PDF，并且我的页眉和页脚的大小取决于几个参数。

静态解决方案是设置页脚边距，这将解决重叠问题 - 但由于页脚的大小可能不同，这不是我满意的解决方案。有没有办法获取页脚尺寸并相应地应用边距？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-12T08:21:16.957

问题在于 mpdf 的文档。我认为 margin_footer 和 margin_header 是文档正文和这些之间的边距。相反，margin_footer 和 margin_header 是文档边距，就像人们认为的 margin_top 和 margin_bottom 一样。

因此，更改下边距和上边距将决定文档正文的开始位置。更改页眉/页脚边距将决定打印边距。

希望能帮助到你！

**更新的答案**

我猜，mPDF 文档对于构造函数调用有点偏离。margin_top/bottom 参数实际上是内容边距，不适用于 margin_header/footer 参数。（如果我没记错的话）。margin_top/bottom 是文档顶部的绝对边距，应该包括页眉/页脚的高度。

这是处理边距的正确方法：

```
/**
 * Create a new PDF document
 *
 * @param string $mode
 * @param string $format
 * @param int $font_size
 * @param string $font
 * @param int $margin_left
 * @param int $margin_right
 * @param int $margin_top (Margin between content and header, not to be mixed with margin_header - which is document margin)
 * @param int $margin_bottom (Margin between content and footer, not to be mixed with margin_footer - which is document margin)
 * @param int $margin_header
 * @param int $margin_footer
 * @param string $orientation (P, L)
 */
new mPDF($mode, $format, $font_size, $font, $margin_left, $margin_right, $margin_top, $margin_bottom, $margin_header, $margin_footer, $orientation); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2017-05-11T12:14:06.970

```
$mpdf->setAutoBottomMargin = 'stretch'; 
```

为我工作。我所要做的就是确保在页脚之前包含该选项。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-10-14T20:33:11.267

它对我没有用，但我设法找到了解决这个问题的方法。我所要做的就是**在任何内容之前设置页脚**。这是因为页脚的高度计算是在任何内容处理之前完成的。但是如果你稍后添加一个页脚`SetHTMLFooter`，mPDF不会重新计算页脚的高度，所以它会是0。这样就不会有分页符，内容会与正文重叠。所以最终的解决方案是：

1.  创建 mPDF 对象`'setAutoBottomMargin' => 'stretch'`
2.  添加标题
3.  添加页脚
4.  添加内容

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-05T13:02:20.657

```
'setAutoBottomMargin' => 'stretch' 
```

那是对我有用的属性。

这是我的代码

```
$mpdf = new \Mpdf\Mpdf([
  'setAutoBottomMargin' => 'stretch'
]); 
```

# java - jackson JodaTime DateTime 未序列化

> ID：10931950
> 
> 赞同：1
> 
> 时间：2012-06-07T12:38:29.787
> 
> 标签：java, json, serialization, jackson, jodatime

我正在尝试开始使用杰克逊来序列化具有 Joda`DateTime`成员的对象。

我创建了以下序列化程序：

```
public class DateTimeSerializer extends JsonSerializer<DateTime> {
    private static DateTimeFormatter formatter = 
    DateTimeFormat.forPattern("dd-MM-yyyy HH:mm:ss, SSS [z]");

    @Override
    public void serialize(DateTime value, JsonGenerator gen, 
        SerializerProvider arg2) throws IOException,
        JsonProcessingException {
        gen.writeString(formatter.print(value));
    }
    @Override
    public Class<DateTime> handledType() { 
        return DateTime.class; 
    }
} 
```

我正在尝试序列化具有`DateTime`以下成员的班级：

```
 Version version = new Version(1, 0, 0, "SNAPSHOT");
    SimpleModule module = new SimpleModule("ZORRO", version);
    module = module.addSerializer(new DateTimeSerializer());
    // and so on...
    ObjectMapper mapper = new ObjectMapper();
    mapper.registerModule(module);

    mapper.writeValue(new File("C:\\tmp\\window1.json"), window1); 
```

我收到以下异常（我不明白我做错了什么）：

```
java.lang.TypeNotPresentException: Type org.joda.convert.ToString not present
at com.ibm.oti.reflect.AnnotationHelper.getAnnotation(AnnotationHelper.java:38)
at com.ibm.oti.reflect.AnnotationHelper.getDeclaredAnnotations(AnnotationHelper.java:50)
at com.ibm.oti.reflect.Method.getDeclaredAnnotations(Method.java:31)
at java.lang.reflect.Method.getDeclaredAnnotations(Method.java:687)
at org.codehaus.jackson.map.introspect.AnnotatedClass._addMixUnders(AnnotatedClass.java:973)
at org.codehaus.jackson.map.introspect.AnnotatedClass._addMemberMethods(AnnotatedClass.java:637)
at org.codehaus.jackson.map.introspect.AnnotatedClass.resolveMemberMethods(AnnotatedClass.java:413)
at org.codehaus.jackson.map.introspect.BasicClassIntrospector.classWithCreators(BasicClassIntrospector.java:185)
at org.codehaus.jackson.map.introspect.BasicClassIntrospector.collectProperties(BasicClassIntrospector.java:157)
at org.codehaus.jackson.map.introspect.BasicClassIntrospector.forSerialization(BasicClassIntrospector.java:96)
at org.codehaus.jackson.map.introspect.BasicClassIntrospector.forSerialization(BasicClassIntrospector.java:16)
at org.codehaus.jackson.map.SerializationConfig.introspect(SerializationConfig.java:973)
at org.codehaus.jackson.map.ser.BeanSerializerFactory.createSerializer(BeanSerializerFactory.java:251)
at org.codehaus.jackson.map.ser.StdSerializerProvider._createUntypedSerializer(StdSerializerProvider.java:782)
at org.codehaus.jackson.map.ser.StdSerializerProvider._createAndCacheUntypedSerializer(StdSerializerProvider.java:758)
at org.codehaus.jackson.map.ser.StdSerializerProvider.findValueSerializer(StdSerializerProvider.java:380)
at org.codehaus.jackson.map.ser.std.BeanSerializerBase.resolve(BeanSerializerBase.java:307)
at org.codehaus.jackson.map.ser.impl.SerializerCache.addAndResolveNonTypedSerializer(SerializerCache.java:159)
at org.codehaus.jackson.map.ser.StdSerializerProvider._createAndCacheUntypedSerializer(StdSerializerProvider.java:744)
at org.codehaus.jackson.map.ser.StdSerializerProvider.findValueSerializer(StdSerializerProvider.java:344)
at org.codehaus.jackson.map.ser.StdSerializerProvider.findTypedValueSerializer(StdSerializerProvider.java:420)
at org.codehaus.jackson.map.ser.StdSerializerProvider._serializeValue(StdSerializerProvider.java:601)
at org.codehaus.jackson.map.ser.StdSerializerProvider.serializeValue(StdSerializerProvider.java:256)
at org.codehaus.jackson.map.ObjectMapper._configAndWriteValue(ObjectMapper.java:2575)
at org.codehaus.jackson.map.ObjectMapper.writeValue(ObjectMapper.java:2048) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:43:39.140

你的类路径上有可选的[joda-convert](http://joda-convert.sourceforge.net/) jar 吗？

顺便说一句，这是运行时错误还是编译时错误？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-26T19:11:10.217

不是 Joda DateTime 是不可序列化的，而是 DateTimeFormatter。

查看那些 2 的类签名：

```
public final class DateTime
        extends BaseDateTime
        implements ReadableDateTime, Serializable {

public class DateTimeFormat { 
```

现在很明显，您不应该尝试序列化格式化程序。但是 DateTime 本身非常好，因为它实现了`java.io.Serializable`.

# c++ - 编译器何时在 C++ 中创建复制构造函数？

> ID：10931952
> 
> 赞同：2
> 
> 时间：2012-06-07T12:38:36.167
> 
> 标签：c++, copy-constructor

例如在下面的代码中：

```
class HowMany {
    static int objectCount;
    public:
        HowMany() { 
            objectCount++; 
        }
        static void print(const string& msg = "") {
             if(msg.size() != 0) 
                 cout << msg << ": ";

             cout << "objectCount = " << objectCount << endl;
        }
        ~HowMany() {
            objectCount--;
            print("~HowMany()");
        }
};

int HowMany::objectCount = 0;

// Pass and return BY VALUE:
HowMany f(HowMany x) {
    x.print("x argument inside f()");
    return x;
}

int main() {
    HowMany h;
    HowMany::print("after construction of h");
    HowMany h2 = f(h);
    HowMany::print("after call to f()");
} 
```

为什么编译器不会为类 HowMany 自动创建复制构造函数，并且在调用 f(h) 时会发生按位复制？

在什么情况下编译器会创建默认的复制构造函数，在什么情况下它不会创建？

它给出的输出为：

> h构造后：objectCount = 1
> 
> f() 中的 x 参数：objectCount = 1
> 
> ~HowMany(): objectCount = 0
> 
> 调用 f() 后：objectCount = 0
> 
> ~HowMany(): objectCount = -1
> 
> ~HowMany(): objectCount = -2

非常感谢提前

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T12:57:31.710

在 C++98 和 C++03 中，编译器总是创建一个复制构造函数，它执行字段的成员复制，除非您明确指定您编写了自己的¹。

这就是您的代码中发生的情况：编译器生成的复制构造函数没有做任何特别的事情 - 特别是它不会增加`objectCount`- 所以你最终得到一个负的对象计数（所有复制的对象都没有增加计数器，但他们确实减少了它）。

要获得您期望的结果，您必须编写如下内容：

```
HowMany(const HowMany &) { 
        objectCount++; 
} 
```

* * *

1.  即使您编写了复制构造函数原型但未实现它和/或将其标记为私有，也不会创建默认复制构造函数 - 实际上，这就是您创建不可复制类的方式。C++11 还支持一种特殊的语法来告诉编译器不要生成任何复制构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T07:05:33.510

对于每个对象编译器都应该创建复制构造函数，这里还为所有对象 h、x 和 h2 创建了复制构造函数。但是对于 h 对象的复制构造函数是不需要的。接下来，您将调用一个函数 f，其输入参数为 h。这里复制构造函数调用并将 h 中的内容复制到 x 对象。对于下一个对象 h2 也是同样的事情（这里也调用复制构造函数并将 x 复制到 h2）。由于这个原因，只有 objectcount 没有增加。谢谢你。

# git - git 树包含重复的文件条目

> ID：10931954
> 
> 赞同：10
> 
> 时间：2012-06-07T12:38:40.440
> 
> 标签：git, duplicates

我遇到了一些关于 20 次提交的行尾问题，并且发生了一些奇怪的事情。现在 git fsck 显示：

```
Checking object directories 100% (256/256), done.
error in tree ee2060e71cb36d33be5ddc1fe9ca8d7dd0ab35cd: contains duplicate file entries
Checking objects: 100% (8633/8633), done. 
```

和 git show ee2060 显示：

```
File1.cs
File2.cs
File2.cs
File2.cs
File3.cs 
```

这阻止了我推送到我的遥控器。git push 显示：

```
error: unpack failed: index-pack abnormal exit
To https://github.com/username/Project.git
 ! [remote rejected] master -> master (n/a (unpacker error))
error: failed to push some refs to 'https://github.com/username/Project.git' 
```

我试过重新包装和垃圾收集。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T00:29:28.243

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T17:29:25.970

我终于通过执行以下操作修复了回购

1.  从 github 做一个新的克隆，它只包括问题发生之前的提交
2.  将文件系统中我搞砸的回购添加为新克隆上的远程
3.  煞费苦心地将错误回购中的提交检查到新克隆的工作副本中

    ```
    git checkout fe3254FIRSTCOMMITAFTERORIGIN/MASTER/HEAD . // note the dot at the end
    // without the dot, you move your head to the commit instead of the commit
    // to the working copy, and seems to bring the corrupt object into your good clone 
    ```

4.  依次提交每个，手动从另一个 repo 复制提交消息
5.  从遥控器中删除损坏的仓库
6.  垃圾收集+修剪

    ```
    git gc --aggressive --prune=now 
    ```

7.  高兴地哭泣，因为 git fsck 没有显示重复的文件条目

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-25T10:28:11.317

我遇到了这类问题，这里和其他 SO 线程中的所有解决方案都无法为我解决。最后，我使用[BFG 存储库清理器](https://rtyley.github.io/bfg-repo-cleaner/)来销毁所有引用错误文件夹名称的提交，这可能有点矫枉过正，但成功地修复了存储库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T12:19:37.283

在有问题的提交之前签出一个新分支。现在从有问题的提交中签出文件。现在使用相同的消息添加并提交它们（使用`-C`选项）。对其余的提交重复此操作。完成后，重置另一个分支以指向正确的分支。然后就可以推了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T12:50:04.300

再次重新提交您的提交可能会解决它。如果这没有帮助，那么您可以使用 git 低级命令（git-cat-file）来查看哪些提交包含这个奇怪的树对象，并重建没有重复的树的正确版本。但是，我不知道有任何自动工具可以解决这个问题，而且您可能必须更改所有树并提交已经链接到奇怪的对象的对象。

顺便说一句，`git ls-tree ee2060`应该向您显示有关损坏树中数据的更多详细信息，例如那里引用的文件。

# c++ - 如何以矢量形式捕获输出而不是在 C++ 中打印

> ID：10931955
> 
> 赞同：0
> 
> 时间：2012-06-07T12:38:41.797
> 
> 标签：c++, c, visual-c++

我在下面给出的形式的大型项目中有一个函数（func 在某些 Abc 类的调用层次结构中被调用 5 次）：

```
 void Test::func(std::string c)
 {
       cout<<c;
 } 
```

函数 func 被大型层次结构中的某些函数调用。但是函数 func 所做的只是打印一个字符串。现在，我不想打印字符串，而是想将其输出存储在某处（以向量形式），以便稍后在程序中的 func 层次结构开始处使用它。我完全不知道应该如何捕获这个输出而不是打印它。有人可以帮忙吗？

编辑：我不想从函数中返回值......因为如果我这样做......整个调用层次结构会受到干扰......是否有其他方法而不是返回。

我想定义我自己的数据结构，以便我可以存储它......但我不知道如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T12:49:05.333

当然：

```
class Test
{
    std::stringstream accum;

    void func(std::string);
};

void Test::func(std::string c)
{
    accum << c;
} 
```

或者

```
class Test
{
    std::vector<std::string> accum;

    void func(std::string);
};

void Test::func(std::string c)
{
    accum.push_back(c);
} 
```

# java - 将操作系统命令的输出写入控制台

> ID：10931958
> 
> 赞同：1
> 
> 时间：2012-06-07T12:38:47.213
> 
> 标签：java, command-line, command, runtime, executable

我想用 Java 执行一个操作系统命令，然后打印出它的返回值。像这样：

这就是我正在尝试的...

```
String location_of_my_exe_and_some_parameters = "c:\\blabla.exe /hello -hi";
Runtime.getRuntime().exec(location_of_my_exe_and_some_parameters); 
```

我尝试将 System.out.print() 放在 Runtime... 行的开头，但失败了。因为，显然，[`getRuntime()`返回一个`Runtime`object](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runtime.html#getRuntime%28%29)。

现在，问题是，当我在命令行中执行“blabla.exe /hello -hi”命令时，我得到的结果类似于：“你执行了一些命令，万岁！”。但是，在 Java 中，我一无所获。

我尝试将返回值放入一个`Runtime`对象，一个`Object`对象。然而，他们都失败了。我怎样才能做到这一点？

**问题已解决 - 这是我的解决方案**

```
Process process = new ProcessBuilder(location, args).start();
InputStream is = process.getInputStream();
InputStreamReader isr = new InputStreamReader(is);
BufferedReader br = new BufferedReader(isr);
String line;

while ((line = br.readLine()) != null) {
    System.out.println(line);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:47:35.787

您可以使用以下命令捕获命令的输出：

```
 Runtime rt = Runtime.getRuntime();
 Process pr = rt.exec(command);
 BufferedReader input = new BufferedReader(new InputStreamReader(pr.getInputStream()));
 String line=null;

 while((line=input.readLine()) != null) {
    log.info(line);
 }
  //This will wait for the return code of the process
 int exitVal = pr.waitFor(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:44:08.000

注意`Runtime.exec(...)`返回一个`Process`对象。您可以使用此对象来捕获其输入流并检索它打印到标准输出的任何内容：

```
Process p = Runtime.getRuntime().exec(location_of_my_exe_and_some_parameters);
InputStream is = p.getInputStream();

// read process output from is 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T12:47:34.673

使用ProcessBuilder 而不是运行时。

喜欢：

`Process process = new ProcessBuilder("c:\\blabla.exe","param1","param2").start();`

**回答：**

```
Process process = new ProcessBuilder("c:\\blabla.exe","/hello","-hi").start();
InputStream is = process.getInputStream();
InputStreamReader isr = new InputStreamReader(is);
BufferedReader br = new BufferedReader(isr);
String line;

System.out.printf("Output of running %s is:", Arrays.toString(args)); 
```

# java - 打开联系意图DISPLAY_NAME

> ID：10931961
> 
> 赞同：0
> 
> 时间：2012-06-07T12:39:02.437
> 
> 标签：java, android, mysql, database, sqlite

```
 String exactname = "Joe Blogs" 
```

[我已经搜索了使用DISPLAY_NAME](http://developer.android.com/reference/android/provider/ContactsContract.ContactsColumns.html#DISPLAY_NAME)而不是联系人的[_ID](http://developer.android.com/reference/android/provider/ContactsContract.RawContactsColumns.html#CONTACT_ID)直接打开联系人的方法。

编辑：乔博客绝对是一个独特的条目。

从[这个答案](https://stackoverflow.com/a/4275598/1256219)

```
 Intent intent = new Intent(Intent.ACTION_VIEW);
    Uri uri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_URI, String.valueOf(contactID));
    intent.setData(uri);
    context.startActivity(intent); 
```

我是否必须先查询 Joe Blogs 的 ID，然后才能以与上述类似的意图打开他的联系人？还是我（希望）错过了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:48:25.820

是的，您需要使用类似的方式查询您的数据库，

```
Cursor cur = getContentResolver().query(CONTENT_URI, null, DISPLAY_NAME + "=?", new String[] { "Joe Blogs" }, null); 
```

然后检索 with 返回的行`Cursor`，

```
if (!cur.moveToFirst()) {
    // Then the cursor isn't empty. Get the contact's id.
    contactId = cur.getInt(cur.getColumnIndex(CONTACT_ID));
} 
```

这将返回与`Cursor`.

# c - 处理二叉树时按值调用与按引用调用

> ID：10931964
> 
> 赞同：0
> 
> 时间：2012-06-07T12:39:15.070
> 
> 标签：c, binary-tree, function-call

当我们想在函数中更改普通变量的值时，我们使用按引用调用来传递它。但是当我们必须使用引用调用传递指针变量（如二叉树的节点）时，我无法理解其中的复杂性。我知道如果我们想修改指针变量以指向另一个节点，我们必须使用引用调用。但是如果我们必须修改根的数据元素怎么办。我认为要更改它，我们也需要通过引用进行调用。但是下面的代码片段给出了 10、10、10 的输出，即使我已经使用函数 modifyTree 中的按值调用传递了树的根节点。我在这里错过了什么吗？

```
#include<stdio.h>
#include<stdlib.h>

struct node
{
int data;
struct node* left;
struct node* right;
};

/* Helper function that allocates a new node with the
given data and NULL left and right pointers. */
struct node* newNode(int data)
{
struct node* node = (struct node*)malloc(sizeof(struct node));

node->data = data;
node->left = NULL;
node->right = NULL;
return(node);
}

/*  This function sets the data fields of some of the nodes of tree to 10*/
void modifyTree(struct node* node)
{

node->data = 10;
node->left->data = 10;
node->right->data = 10;
}

int main()
{
struct node *root = newNode(1);
root->left            = newNode(2);
root->right          = newNode(3);
root->left->left     = newNode(4);
root->left->right   = newNode(5);

modifyTree(root);

printf("%d\n", root->data);
printf("%d\n", root->left->data);
printf("%d\n", root->right->data);

getchar();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T12:43:39.917

按值传递指针意味着被调用函数接收到调用者使用的完全相同的指针值，因此通过该指针的任何访问都将引用相同的内存。

如果您希望函数修改调用者拥有的指针*值*（例如通过分配新树，从而“创建”新指针值），则需要一个双指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:44:25.683

您正在按值传递**指针**，但指针仍然指向同一事物。我将使用一些假设值来演示。

在`main`你分配一个新的`struct node`. 假设它是在内存位置创建的`0x12345`。所以现在你的`struct node *root`contains `0x12345`。

你现在打电话`modifyTree(root);`。 **按值**`root`传递给 的参数。**`root``modifyTree`**

 **现在`root`包含`0x12345`. *它指向同一个内存位置。*

因此，当您使用 访问该位置时`node->data = 10`，您访问的是在 中创建的相同内存`main`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T12:45:45.957

您通过值传递指针是，但是您在 modifyTree 函数中更改的是指针指向的结构的元素。按值传递指向结构的指针不会阻止您更改参数指向的结构的内部内容。如果您正在更改的是指针**本身**，那么您将看到您所期望的行为。**

# jquery - 选择器从标签中获取所有文本，特定嵌套标签中的文本除外

> ID：10931967
> 
> 赞同：1
> 
> 时间：2012-06-07T12:39:49.707
> 
> 标签：jquery, jquery-selectors

**目标：**从标题标签中提取标签中的所有文本。

**输入 html：（**由 JSP 生成 - 我无法控制格式或空格） - 可以是 500 行或更多行

```
<td class="aaaColumn">    <h4>Header text:</h4>      some data         <br />       some more data [XX].   </td> 
```

**我尝试了什么：**

```
var o = "aaa";
var arr = $.trim(
$("."+o+"Column").text()
.replace(/[\[\]]/g," "))
.split(" "); 
```

**电流输出：**

IE给我

```
Header
text:some
data
some
more
data
XX 
```

Fx给了我

```
Header
text:
some
data
some
more
data
XX 
```

**我需要的：**

IE 和 Fx（以及所有其他浏览器）

```
some
data
some
more
data
XX 
```

所以像（我猜）

`$("."+o+"Column :not('h4')").text()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:56:59.553

这将为您提供您想要的输出，只需查看它......

# [演示](http://jsfiddle.net/4SYUa/)

```
$("#aaaColumn").clone()    //clone the element
         .children() //select all the children
         .remove()   //remove all the children
         .end()  //again go back to selected element
         .text();    //get the text of element 
```

# r - 以毫秒为单位的 R 问题

> ID：10931972
> 
> 赞同：7
> 
> 时间：2012-06-07T12:40:02.823
> 
> 标签：r, time, rounding, milliseconds, rounding-error

鉴于 R 下舍入毫秒的以下问题。我如何解决它以使时间正确？

```
> options(digits.secs=3)
> as.POSIXlt("13:29:56.061", format='%H:%M:%OS', tz='UTC')
[1] "2012-06-07 13:29:56.060 UTC"
> as.POSIXlt("13:29:56.062", format='%H:%M:%OS', tz='UTC')
[1] "2012-06-07 13:29:56.061 UTC"
> as.POSIXlt("13:29:56.063", format='%H:%M:%OS', tz='UTC')
[1] "2012-06-07 13:29:56.063 UTC" 
```

我注意到这个 URL 提供了背景信息，但没有解决我的问题： [Milliseconds puzzle when calling strptime in R](https://stackoverflow.com/questions/8889554/milliseconds-puzzle-when-calling-strptime-in-r)。

此 URL 也涉及该问题但没有解决它：[R xts: .001 毫秒 in index](https://stackoverflow.com/questions/9787509/r-xts-001-millisecond-in-index)。

在这些情况下，我确实看到以下内容：

```
> x <- as.POSIXlt("13:29:56.061", format='%H:%M:%OS', tz='UTC')
> print(as.numeric(x), digits=20)
[1] 1339075796.0610001087 
```

该 URL 似乎也表明这只是一个显示问题，但我注意到使用`"%OS3"`没有选项行的语句似乎无法获取正确的位数。

我使用的版本是 Windows 下的 32 位 2.15.0，但这似乎在 R 的其他情况下存在。

请注意，我的原始数据是 CSV 文件中的这些日期时间字符串，我必须找到一种方法将它们从字符串转换为正确的毫秒时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T12:54:41.533

我没有看到：

```
> options(digits.secs = 4)
> as.POSIXlt("13:29:56.061", format = '%H:%M:%OS', tz='UTC')
[1] "2012-06-07 13:29:56.061 UTC"
> as.POSIXlt("13:29:56.062", format = '%H:%M:%OS', tz='UTC')
[1] "2012-06-07 13:29:56.062 UTC"
> as.POSIXlt("13:29:56.063", format = '%H:%M:%OS', tz='UTC')
[1] "2012-06-07 13:29:56.063 UTC"
> options(digits.secs = 3)
> as.POSIXlt("13:29:56.061", format = '%H:%M:%OS', tz='UTC')
[1] "2012-06-07 13:29:56.061 UTC"
> as.POSIXlt("13:29:56.062", format = '%H:%M:%OS', tz='UTC')
[1] "2012-06-07 13:29:56.062 UTC"
> as.POSIXlt("13:29:56.063", format = '%H:%M:%OS', tz='UTC')
[1] "2012-06-07 13:29:56.063 UTC" 
```

和

```
> sessionInfo()
R version 2.15.0 Patched (2012-04-14 r59019)
Platform: x86_64-unknown-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_GB.utf8       LC_NUMERIC=C             
 [3] LC_TIME=en_GB.utf8        LC_COLLATE=en_GB.utf8    
 [5] LC_MONETARY=en_GB.utf8    LC_MESSAGES=en_GB.utf8   
 [7] LC_PAPER=C                LC_NAME=C                
 [9] LC_ADDRESS=C              LC_TELEPHONE=C           
[11] LC_MEASUREMENT=en_GB.utf8 LC_IDENTIFICATION=C      

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods  
[7] base 
```

使用`"%OSn"`格式字符串，可以强制截断。如果小数秒不能精确地用浮点数表示，那么截断很可能会走错路。如果您发现事情出错了，您也可以明确地四舍五入到您想要的单位或添加您希望操作的分数的一半（在所示的情况下`0.0005`）：

```
> t1 <- as.POSIXlt("13:29:56.061", format = '%H:%M:%OS', tz='UTC')
> t1
[1] "2012-06-07 13:29:56.061 UTC"
> t1 + 0.0005
[1] "2012-06-07 13:29:56.061 UTC" 
```

（但我说过，我在这里看不到问题。）

后一点是[Simon Urbanek 于 2012 年 5 月 30 日在 R-Devel 邮件列表中提出的](https://stat.ethz.ch/pipermail/r-devel/2012-May/064211.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T14:29:17.727

[这与在 R 中调用 strptime 时的毫秒难题](https://stackoverflow.com/questions/8889554/milliseconds-puzzle-when-calling-strptime-in-r)相同。

你的例子：

```
> x <- as.POSIXlt("13:29:56.061", format='%H:%M:%OS', tz='UTC')
> print(as.numeric(x), digits=20)
[1] 1339075796.0610001087 
```

不代表问题。 `as.numeric(x)`在转换为数字之前将您的 POSIXlt 对象转换为 POSIXct，因此您会得到不同的浮点精度舍入误差。

这不是`print.POSIXlt`（调用`format.POSIXlt`）的工作方式。 `format.POSIXlt`单独格式化列表构造的每个元素`POSIXlt`，因此您需要查看：

```
print(x$sec, digits=20)
[1] 56.060999999999999943 
```

这个数字在小数点后第三位被截断，所以你看`56.060`。直接调用就可以看到`format`：

```
> format(x, "%H:%M:%OS6")
[1] "13:29:56.060999" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-16T00:59:57.860

在测试中，我注意到 32 位 R 3.01 仍然存在此问题，这是由于 POSIXlt 日期时间的打印、格式和 as.character 运算符的 32 位实现所特有的浮点数据截断。

基础数据没有存储在导致截断的一种情况（32 位）而不是另一种情况（64 位）的不同类型中，但是用于POSIXlt 类型专门用于将 POSIXlt 数据显示为可显示的字符串。

虽然记录的行为是这些函数截断（忽略）额外的数字（如@Gavin Simpson 所述），但对于 32 位和 64 位版本，情况并非如此。展示; 我们将生成 1000 个不同的时间并执行一些比较操作：

```
> options(digits.sec=3)
> x = as.POSIXlt("13:29:56.061", format='%H:%M:%OS', tz='UTC')

> for (i in 0:999) {
>     x[i+1] = as.POSIXlt(paste0("13:29:56.",sprintf("%03d",i)),format='%H:%M:%OS',tz='UTC')
> }

> sum(x[2:1000]>x[1:999])
[1] 999 
```

在 32 位和 64 位下，比较运算符是一致的，但是在 32 位下我看到：

```
> x[1:6]
[1] "2015-10-16 13:29:56.000 UTC" "2015-10-16 13:29:56.000 UTC"
[3] "2015-10-16 13:29:56.002 UTC" "2015-10-16 13:29:56.003 UTC"
[5] "2015-10-16 13:29:56.003 UTC" "2015-10-16 13:29:56.005 UTC" 
```

所以这显然是一个显示问题。查看 POSIXlt 数据类型中的实际数字，尤其是我们可以看到发生了什么的秒数：

```
> y = (x[1:6]$sec) 
> y
[1] 56.000 56.001 56.002 56.003 56.004 56.005
> trunc(y*1000)/1000
[1] 56.000 56.001 56.002 56.003 56.004 56.005
> trunc((y-floor(y))*1000)/1000
[1] 0.000 0.000 0.002 0.003 0.003 0.005 
```

我建议这是一个应该在底层基础库中修复的错误，但作为临时修复，您可以覆盖“print”、“as.character”和“format”函数以将输出更改为所需的输出例如

```
format.POSIXlt = function(posix) {
    return(paste0(posix$year+1900,"-",sprintf("%02d",posix$mon+1),"-",sprintf("%02d",posix$mday)," ",
        sprintf("%02d",posix$hour),":",sprintf("%02d",posix$min),":",sprintf("%002.003f",posix$sec)))
    }

print.POSIXlt = function(posix) {
    print(paste0(posix$year+1900,"-",sprintf("%02d",posix$mon+1),"-",sprintf("%02d",posix$mday)," ",
        sprintf("%02d",posix$hour),":",sprintf("%02d",posix$min),":",sprintf("%002.003f",posix$sec)))
    }

as.character.POSIXlt = function(posix) {
    return(paste0(posix$year+1900,"-",sprintf("%02d",posix$mon+1),"-",sprintf("%02d",posix$mday)," ",
        sprintf("%02d",posix$hour),":",sprintf("%02d",posix$min),":",sprintf("%002.003f",posix$sec)))
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T12:55:56.900

毫秒在那里：

```
 unclass(as.POSIXlt("13:29:56.061", '%H:%M:%OS', tz='UTC'))
 $sec
 [1] 56.061
 ... 
```

（这里不需要*调用*格式，它是参数的*名称*，而不是来自其他函数的必需输入）。

否则，我无法重现（在 Windows 64 位 R 2.15.0 上）：

```
options(digits.secs = 3)
as.POSIXlt("13:29:56.061", '%H:%M:%OS', tz='UTC')
[1] "2012-06-07 13:29:56.061 UTC"

sessionInfo()
R version 2.15.0 Patched (2012-05-05 r59321)
Platform: x86_64-pc-mingw32/x64 (64-bit)
... 
```

# jquery - 从jQuery中的元素数组中获取XML元素的值

> ID：10931974
> 
> 赞同：2
> 
> 时间：2012-06-07T12:40:07.320
> 
> 标签：jquery, xml, xml-parsing

我使用带有以下代码的 jquery 获取 xml 节点数组

```
var appointments = new Array();
appointments = $($myXML).find('confirmationNumber'); 
```

哪个返回我：

```
[
  <confirmationNumber>​NX0FH25P​&lt;/confirmationNumber>​, 
  <confirmationNumber>​VX0MW251</confirmationNumber>​, 
  <confirmationNumber>​VB0TH252​&lt;/confirmationNumber>​,
  <confirmationNumber>​VB0MH253</confirmationNumber>​
] 
```

我想检索以下确认数字的值作为数组中的文本，我不想迭代整个 XML

我试过了：

```
appointment[i].text() and appointment[i].val(); 
```

但这没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:43:01.463

您可以使用[map()](http://api.jquery.com/map/)将元素的文本投影到新数组中，而无需显式循环：

```
var confirmationNumbers = $($myXML).find("confirmationNumber").map(function() {
    return $(this).text();
}).get(); 
```

# sql - SQL - 如果在过去一小时内插入了新的唯一记录，则发出警报

> ID：10931976
> 
> 赞同：5
> 
> 时间：2012-06-07T12:40:10.097
> 
> 标签：sql, sql-server-2005

我正在尝试以 SQL 查询的形式为以下问题找到一个优雅的解决方案。

新记录将被插入到日志表中。我需要检测我以前从未见过的任何新记录（在过去一小时内插入）并生成警报（例如，这些记录的数量 > 0）

```
ID, Url, DOB
1, site1.com/page1, "5/06/2012 20:01"
2, site2.com/page2, "5/06/2012 21:20"
3, site1.com/page1, "6/06/2012 10:05" 
```

如果“现在”是 6/06/2012 10:40 - 我看到插入了 1 条新记录 (id=3) 但我不想生成警报，因为我们之前已经看到过这个 URL (id=1) .

如果我们有 4, site3.com/pageX, "6/06/2012 10:08" 那么我想生成一个警报（返回计数 = 1），因为这一行是在最后一小时插入的，我们还没有看到它前。

实施它的最佳方法是什么？理想情况下没有嵌套查询

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T13:10:48.053

我想这就是你所追求的。这将检索过去一小时内的新条目（其中 new 表示过去一小时未访问过相同的 URL）

```
SELECT  *
FROM    Log
WHERE   DOB > DATEADD(HOUR, -1, CURRENT_TIMESTAMP)
AND     NOT EXISTS
        (   SELECT  1
            FROM    Log T1
            WHERE   T1.URL = Log.URL 
            AND     T1.DOB < DATEADD(HOUR, -1, CURRENT_TIMESTAMP)
        ) 
```

[SQL Fiddle](http://sqlfiddle.com/#!3/71498/1)上的工作示例

**编辑**

刚刚看到一个评论说你只需要一个计数：

```
SELECT  COUNT(*)
FROM    Log
WHERE   DOB > DATEADD(HOUR, -1, CURRENT_TIMESTAMP)
AND     NOT EXISTS
        (   SELECT  1
            FROM    Log T1
            WHERE   T1.URL = Log.URL 
            AND     T1.DOB < DATEADD(HOUR, -1, CURRENT_TIMESTAMP)
        ) 
```

**编辑 2**

我不知道为什么只需要一个选择，但是，我能得到的最接近一个选择的是：

```
SELECT  COUNT(*)
FROM    (   SELECT  *, MIN(DOB) OVER(PARTITION BY URL) [FirstViewed]
            FROM    Log
        ) Log
WHERE   FirstViewed >= DATEADD(HOUR, -1, CURRENT_TIMESTAMP) 
```

如果同一页面在过去一小时内被访问过两次，这仍然会返回 2。

[http://sqlfiddle.com/#!3/5a8bc/1](http://sqlfiddle.com/#!3/5a8bc/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T13:35:24.487

这个做一些替代，首先通过分组搜索唯一的 url，然后在最后一小时提取那些。

```
SELECT x1.*
FROM
  (SELECT URL,
          COUNT(ID) AS urlcount,
          MAX(DOB) AS uniqueurl
   FROM Log
   GROUP BY URL HAVING count(ID) = 1
   OR MIN(DOB) > dateadd(HOUR ,-1 , CURRENT_TIMESTAMP)) AS x1
WHERE x1.uniqueurl > dateadd(HOUR ,-1 , CURRENT_TIMESTAMP); 
```

[http://sqlfiddle.com/#!3/250e0/45/0](http://sqlfiddle.com/#!3/250e0/45/0)

如果不查看解释，我无法确定这是否具有可接受的性能，但我认为 group by 中涉及的排序操作可能是一个瓶颈

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T13:45:17.060

没有嵌套查询（[SQLFiddle](http://sqlfiddle.com/#!3/f6dec/1)）：

```
SELECT COUNT(DISTINCT T0.URL) 
FROM Log AS T0 
LEFT OUTER JOIN Log AS T1 ON 
    T1.URL = T0.URL 
    AND T1.DOB < DATEADD(HOUR, -1, CURRENT_TIMESTAMP) 
WHERE 
    T0.DOB > DATEADD(HOUR, -1, CURRENT_TIMESTAMP) 
    AND T1.ID IS NULL 
```

但它确实是与 GarethD 相同的解决方案，性能方面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T12:58:59.557

尝试这个：

```
SELECT DISTINCT a.id, a.url, a.dob
FROM Log a JOIN Log b ON (a.url = b.url)
WHERE UNIX_TIMESTAMP(NOW())-UNIX_TIMESTAMP(a.DOB)<=3600 
  AND UNIX_TIMESTAMP(NOW())-UNIX_TIMESTAMP(b.DOB)>3600; 
```

它应该返回遵循您在问题中指定的模式的所有记录。

请注意，我使用`UNIX_TIMESTAMP`将日期转换为秒，因此减法将返回以秒数表示的时间差。并且必须与 3600 秒进行比较。

**编辑**：

该语句已被更正。但它适用于 MySQL（我没有看到 sql-server2005 标签）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-07T12:46:26.023

```
select distinct(a.url) from tbl a, tbl b where a.dob>(now-hour) and b.dob<=(now-hour) and a.url=b.url; 
```

（用您选择的数据库中的某些内容替换时间操作。索引 url 和 dob）

还希望您的数据库足够明智，可以在加入和使用索引加入之前进行 dob 比较。

# svn - PowerShell 中的 SVN 输出编码

> ID：10931984
> 
> 赞同：10
> 
> 时间：2012-06-07T12:40:34.623
> 
> 标签：svn, powershell, character-encoding

我正在尝试在 PowerShell 脚本中的字符串中捕获 SVN 日志。

在命令行上，输出的编码是正确的，但是一旦我在字符串中捕获它，它就不是：

```
PS C:\sandbox> svn log -r1804 https://myserver.here/svn/myrepo
--------------------------------------------------------------
r1804 | myname | 2012-06-07 | 1 line
Here is my log message with a special caractère
--------------------------------------------------------------
PS C:\sandbox> $tempStr = svn log -r1804 https://myserver.here/svn/myrepo | Out-String
PS C:\sandbox> $tempStr
--------------------------------------------------------------
r1804 | myname | 2012-06-07 | 1 line
Here is my log message with a special caractÃ©re
-------------------------------------------------------------- 
```

如果有帮助，这里是我系统上 $OutputEncoding 的值：

```
IsSingleByte      : True
BodyName          : us-ascii
EncodingName      : US-ASCII
HeaderName        : us-ascii
WebName           : us-ascii
WindowsCodePage   : 1252
IsBrowserDisplay  : False
IsBrowserSave     : False
IsMailNewsDisplay : True
IsMailNewsSave    : True
EncoderFallback   : System.Text.EncoderReplacementFallback
DecoderFallback   : System.Text.DecoderReplacementFallback
IsReadOnly        : True
CodePage          : 20127 
```

谢谢 ！！

**编辑：**

我还尝试了 SVN 的 XML 输出如下，但没有运气！

```
$CmdLine = "svn log -r40:HEAD https://myserver.here/svn/myrepo --xml";

$Logs = [xml](Invoke-Expression $CmdLine);

foreach ($Commit in $Logs.log.logentry)
{
   Write-Host $Commit.msg;
} 
```

**编辑＃2：**

我不知道它是否有帮助，但我注意到在 PowerShell 控制台提示符上直接使用 XML 输出格式存在同样的问题：

```
PS C:\repo> svn log -r999:999
------------------------------------------------------------------------
r999 | myname | 2013-05-29 09:48:20 +0200 (mer., 29 mai 2013) | 2 lines

Log message line #1 with a special 'caractère'
Log message line #2
------------------------------------------------------------------------

PS C:\repo> svn log -r999:999 --xml
<?xml version="1.0" encoding="UTF-8"?>
<log>
<logentry
   revision="999">
<author>myname</author>
<date>2013-05-29T07:48:20.915930Z</date>
<msg>Log message line #1 with a special 'caractÃ©re'
Log message line #2</msg>
</logentry>
</log> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:51:41.167

试着把这个：

```
$OutputEncoding = [Console]::OutputEncoding 
```

在你的 svn 电话之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T10:59:22.903

它不是直接对 powershell 友好，但[SharpSvn](http://sharpsvn.net)直接向 .Net 提供了 Subversion api，因此您根本不需要任何解析。

如果您使用'svn log'，我建议使用--xml 以避免应对未来的输出变化。

svn 的输出是 UTF-8，它作为 Unicode 传输到 Windows，所以我建议阅读为 Unicode。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-28T09:08:53.830

这篇博[文 Powershell、SVN 日志和编码](http://blag.koveras.net/2013/08/16/powershell-svn-log-and-encodings/)解释并解决了与 Powershell 中的 SVN 编码非常相似的问题。这个对我有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-25T16:57:54.557

我很幸运：

```
$enc = [System.Text.Encoding]::GetEncoding($Host.CurrentCulture.TextInfo.OEMCodePage)
$output = $enc.GetBytes((svn log --xml))
[xml] $result = [System.Text.Encoding]::UTF8.GetString($output) 
```

# linux - 终止子进程

> ID：10931985
> 
> 赞同：0
> 
> 时间：2012-06-07T12:40:35.023
> 
> 标签：linux, python-3.x, pyqt4, subprocess, kill-process

我很好奇，为什么下面的代码会冻结。当我杀死 python3 解释器时，“猫”进程仍然是僵尸。我希望子进程将在主进程完成之前终止。

当我手动发送 SIGTERM 到 时`cat /dev/zero`，该过程正确完成（几乎立即）

```
#!/usr/bin/env python3
import subprocess
import re
import os
import sys
import time
from PyQt4 import QtCore

class Command(QtCore.QThread):
#    stateChanged = QtCore.pyqtSignal([bool])

    def __init__(self):
        QtCore.QThread.__init__(self)
        self.__runned = False
        self.__cmd = None
        print("initialize")

    def run(self):
        self.__runned = True

        self.__cmd = subprocess.Popen(["cat /dev/zero"], shell=True, stdout=subprocess.PIPE)
        try:
            while self.__runned:
                print("reading via pipe")
                buf = self.__cmd.stdout.readline()
                print("Buffer:{}".format(buf))
        except:
            logging.warning("Can't read from subprocess (cat /dev/zero) via pipe")
        finally:
            print("terminating")
            self.__cmd.terminate()
            self.__cmd.kill()

    def stop(self):
        print("Command::stop stopping")
        self.__runned = False
        if self.__cmd:
            self.__cmd.terminate()
            self.__cmd.kill()
            print("Command::stop stopped")

def exitApp():
    command.stop()
    time.sleep(1)
    sys.exit(0)

if __name__ == "__main__":
    app = QtCore.QCoreApplication(sys.argv)
    command = Command()
#    command.daemon = True
    command.start()
    timer = QtCore.QTimer()
    QtCore.QObject.connect(timer, QtCore.SIGNAL("timeout()"), exitApp)
    timer.start(2 * 1000)
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:14:07.473

正如您自己指出的那样，僵尸的原因是信号被shell捕获并且不影响它创建的进程。但是有一种方法可以杀死 shell 及其创建的所有进程；您必须使用进程组功能。请参阅[如何终止使用 shell=True 启动的 python 子进程](https://stackoverflow.com/questions/4789837/)话虽如此，如果您可以在没有它的情况下进行管理，`shell=True`那总是可取的 - 请参阅我的答案[here](https://stackoverflow.com/a/12964900/95735)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:15:27.383

我以不同的方式解决了这个问题，所以结果如下：我必须使用 shell=False 调用 subprocess.Popen，因为否则它会创建 2 个进程（shell 和进程）并且 __cmd.kill() 在 "进程”仍然是僵尸

# asp.net - GridView 错误：对象引用未设置为对象的实例

> ID：10931986
> 
> 赞同：-1
> 
> 时间：2012-06-07T12:40:37.393
> 
> 标签：asp.net, vb.net, data-binding, gridview, drop-down-menu

有一个带有模板字段的gridview，一列包含一个下拉列表，应该用sql语句填充。我已经动态创建了网格并调用了 rowdatabound 以访问下拉列表，但我不断收到错误消息：对象引用未设置为对象的实例。有人有想法么？

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False">
    <Columns>
        <asp:CommandField EditText="Add" ShowEditButton="True" />
        <asp:TemplateField>
            <EditItemTemplate>
                <asp:TextBox ID="TextBox1" runat="server" />                          
            </EditItemTemplate>
            <ItemTemplate>
                <asp:Label ID="Label1" runat="server" />
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField>
            <EditItemTemplate>
                <asp:DropDownList ID="DropDownList1" runat="server" />
            </EditItemTemplate>
            <ItemTemplate>
                <asp:Label ID="Label2" runat="server"></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField>
            <EditItemTemplate>
                <asp:TextBox ID="TextBox2" runat="server" />
            </EditItemTemplate>
            <ItemTemplate>
                <asp:Label ID="Label3" runat="server" />
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField>        
            <EditItemTemplate>
                <asp:DropDownList ID="DropDownList2" runat="server" />        
            </EditItemTemplate>
            <ItemTemplate>
                <asp:Label ID="Label4" runat="server" />
            </ItemTemplate>
            </asp:TemplateField>
        <asp:TemplateField>        
            <EditItemTemplate>
                <asp:TextBox ID="TextBox3" runat="server" />
            </EditItemTemplate>
            <ItemTemplate>
                <asp:Label ID="Label5" runat="server" />        
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField>
            <EditItemTemplate>
                <asp:Label ID="Label6" runat="server" />
            </EditItemTemplate>
            <ItemTemplate>
                <asp:Label ID="Label7" runat="server" />
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

这是动态创建 GridView 的代码，这是在 page_load 事件中完成的：

```
If Not Page.IsPostBack Then
        Dim CommittedTable As New DataTable("Committed")

        CommittedTable.Columns.Add("Date Posted", GetType(Date))
        CommittedTable.Columns.Add("Vendor", GetType(String))
        CommittedTable.Columns.Add("Expense Description", GetType(String))
        CommittedTable.Columns.Add("Ledger", GetType(String))
        CommittedTable.Columns.Add("Amount", GetType(String))
        CommittedTable.Columns.Add("Initials", GetType(String))

        For i As Integer = 0 To GridView1.Rows.Count
            Dim tableRow As DataRow = CommittedTable.NewRow()

            tableRow("Date Posted") = Date.Today
            tableRow("Vendor") = ""
            tableRow("Expense Description") = ""
            tableRow("Ledger") = ""
            tableRow("Amount") = ""
            tableRow("Initials") = ""
            CommittedTable.Rows.Add(tableRow)
        Next

        Session("CommsTable") = CommittedTable
        BindDataComm()

    End If 
```

最后这是 RowDataBound 事件处理程序代码：

```
Dim ddl As DropDownList = DirectCast(e.Row.FindControl("DropDownList1"), DropDownList)
    If ddl Is Nothing Then
        result = dbConnect(dbType.SqlServer, ConfigurationManager.AppSettings("SQLServerConnection"))
        If result = "Successful" Then
            dt = FillDataTable(dbType.SqlServer, "SELECT V_VendorNo + ' | ' + V_VendorName FROM VendorTbl")
            ddl.DataSource = dt 'it errors out here'
            ddl.DataTextField = "V_VendorNo"
            ddl.DataValueField = "V_VendorName"
            ddl.DataBind()
        End If
    End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:28:39.840

您是否在绑定 RowDatabound 事件中的数据之前检查 Datarow 的 RowType 如果不是请检查它....

# php - 通过 mysql_query(...) 执行时，有效的 mysql 查询返回错误

> ID：10931988
> 
> 赞同：1
> 
> 时间：2012-06-07T12:40:49.303
> 
> 标签：php, mysql, sql

我有以下 PHP 代码：

```
$result = mysql_query('
            set @num := 0, @type := "";
            UPDATE orders INNER JOIN (
                SELECT id, user_id, created, row_number 
                FROM 
                (
                    SELECT id, user_id, created,
                    @num := if(@type = user_id, @num + 1, 1) AS row_number,
                    @type := user_id AS dummy
                    FROM orders
                    WHERE status = "queue" AND type="order"
                    ORDER BY user_id, created asc 
                ) AS grouped_orders 
                WHERE grouped_orders.row_number <= 2
            ) m ON orders.id = m.id 
            SET orders.status = "process", orders.lock_id = "hash";
        '); 
```

当我跳过`$result = mysql_query('`并将`');`此查询复制粘贴到我的 PHP MyAdmin 面板时，它可以工作 - 但是当我使用 PHP 中的 mysql_query(...) 执行它时，我收到以下错误：

`You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'UPDATE orders INNER JOIN ( SELECT id, user_id, created, row_number FROM' at line 2`

我试图用括号做一些事情，向上/向下移动并折叠到一行，但它不起作用......

不幸的是，在我正在处理的服务器上没有 mysqli。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:43:08.187

尝试这个：

```
$result = mysql_query('
            set @num := 0, @type := "";
            UPDATE orders INNER JOIN (
                SELECT id, user_id, created, row_number 
                FROM 
                (
                    SELECT id, user_id, created,
                    @num := if(@type = user_id, @num + 1, 1) AS row_number,
                    @type := user_id AS dummy
                    FROM orders
                    WHERE status = "queue" AND type="order"
                    ORDER BY user_id, created asc 
                ) AS grouped_orders 
                WHERE grouped_orders.row_number <= 2
            ) m ON orders.id = grouped_orders.id 
            SET orders.status = "process", orders.lock_id = "hash";
        '); 
```

组顺序是要加入的第二个表的名称

编辑：

您的查询看起来没问题（至少没有错误），但是您的问题依赖于您使用 mysql_query 的 PHP。

“mysql_query() 向与指定链接标识符关联的服务器上当前活动的数据库发送一个唯一查询（不支持多个查询）。”（http://php.net/manual/en/function.mysql-query。 php)

所以你需要另一种方法来执行多查询，或者找到另一种解决方案，尝试强制使用mysqli，因为你也可以防止攻击并且能够进行多查询....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:45:02.423

尝试[多查询](http://php.net/manual/en/mysqli.multi-query.php)而不是`mysql_query`因为您正在执行多个查询

## 编辑

尝试在您的选择到期子选择中定义您的变量：

```
UPDATE orders INNER JOIN (
      SELECT id, user_id, created, row_number 
      FROM 
      (
           SELECT id, user_id, created,
           @num := if(@type = user_id, @num + 1, 1) AS row_number,
           @type := user_id AS dummy
           FROM orders
           WHERE status = "queue" AND type="order"
           ORDER BY user_id, created asc 
            ) AS grouped_orders, (SELECT @num:=0) r, (SELECT @type:="") t
            WHERE grouped_orders.row_number <= 2
        ) m ON orders.id = grouped_orders.id 
        SET orders.status = "process", orders.lock_id = "hash"; 
```

# c++ - 如何在 Xcode for Windows 中编译 C++ 程序

> ID：10931991
> 
> 赞同：0
> 
> 时间：2012-06-07T12:40:57.223
> 
> 标签：c++, windows, xcode, cross-compiling

我有一个用 Xcode 编写的 C++ 简单命令行程序，我想编译它以便它可以在 Windows 中运行。我使用的唯一库是`#include <iostream>`和`#include <stdlib.h>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:47:45.163

使用交叉编译器。我推荐使用自制软件的 GCC。[https://github.com/mxcl/homebrew/wiki/Custom-GCC-and-cross-compilers](https://github.com/mxcl/homebrew/wiki/Custom-GCC-and-cross-compilers)

# c++ - 项目编译错误 - 找不到 -lwxmsw28

> ID：10931994
> 
> 赞同：1
> 
> 时间：2012-06-07T12:41:11.450
> 
> 标签：c++, compilation, wxwidgets

在编译项目时，我收到以下错误

```
c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../../mingw32/bin/ld.exe: cannot find lwxmsw28
collect2: ld returned 1 exit status
make[2]: *** [dist/Debug/MinGW-Windows/libRegistration.dll] Error 1
make[1]: *** [.build-conf] Error 2
make: *** [.build-impl] Error 2 
```

我正在使用 wxwidgets 库但是当我在 cmd 中运行命令时

```
wx-config --libs 
```

我看不到 lwxmsw28 或者让我知道它是否可以从某个地方下载或任何解决此问题的解决方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:54:48.750

这是链接器错误，而不是编译错误。

“lwxmsw28”在我看来就像一个 wxwidgets v2.8 microsoft windows 库。链接器应该寻找这个吗？由于您使用的是 mingw，我认为您不应该链接到 msw 库。但是，我对 mingw 并不熟悉，所以也许这就是 mingw 库的名称。

如果这是正确的库，那么下一个问题是：您是否构建了 wxWidgets 库？这些库不能“从某处下载”——您必须下载源代码并自己构建库。

一个简单的测试来确定您是否已经构建了库 - 尝试构建一个示例项目。