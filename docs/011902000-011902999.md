# StackOverflow 问答 11902000-11902999

# java - 返回 ResultSet 的正确方法

> ID：11902002
> 
> 赞同：7
> 
> 时间：2012-08-10T12:48:46.853
> 
> 标签：java, mysql

我是java新手，但我很快就学会了。我一直遇到的一件事是我最终拥有一个充满查询和一般代码的函数，我想将它分解为单独的函数。以此为例：

```
public ResultSet getApples (){
    ResultSet rs;
    try{
        PreparedStatement stmt = con.prepareStatement("SELECT * FROM fruit WHERE type='apples'");
        rs = stmt.executeQuery();
    } catch (SQLException e){
        e.printStackTrace();
    }
    return rs;  
}
```

理想情况下，这将是我想要做的，在一个函数中拥有所有的 try 和 catch，但这给了我错误：`Local variable may not have been initilized`

我确实意识到我可以这样做：

```
 public function start(){
    try{
        ResultSet apples = getApples();
    catch (SQLException e){
        e.printStackTrace();
    }
}

public ResultSet getApples () throws SQLException { 
    PreparedStatement stmt = con.prepareStatement("SELECT * FROM fruit WHERE type='apples'");
    return stmt.executeQuery();
}
```

但我真的更希望在函数内处理异常并返回结果。

**编辑** 好吧，对所提供的内容进行修改后的答案。我在这个问题上的全部目标是使我的脚本的主要功能尽可能干净。即使是额外`if ( _resultSet != null )`的东西，我也不是很喜欢。话虽如此，我对这个结果很满意：

```
public ResultSet getApples (){
    try{
        PreparedStatement stmt = con.prepareStatement("SELECT * FROM fruit WHERE type='apples'");
        return stmt.executeQuery();
    } catch (SQLException e){
        System.out.println("************************");
        System.out.println("Class.getApples null");
        System.out.println(e.getMessage());
        return null;
    }   
}
```

一切都在`getApples`函数内处理，当`_resultSet.next()`被调用时，我得到 a`NullPointerException`和 getApples 异常中的打印，因此我能够快速找到错误并进行调试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:51:53.207

首先将 rs 初始化为 null。

```
public ResultSet getApples (){
    ResultSet rs = null;
    try{
        PreparedStatement stmt = con.prepareStatement("SELECT * FROM fruit WHERE type='apples'");
        rs = stmt.executeQuery();
    } catch (SQLException e){
        e.printStackTrace();
    }
    return rs;  
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T12:52:43.237

你可以这样声明你的 RS

```
ResultSet rs = null; 
```

但是你在哪里调用你的函数：

```
ResultSet apples = getApples () 
```

你必须检查：

```
if(apples == null)
{
    //do something, because your query did not work.
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T12:54:08.190

因为您没有将 ResultSet rs 设置为任何初始值。最后你要归还它。如果发生任何异常并且 rs 值中没有设置值怎么办。为了解决您需要在声明时为 rs 分配空值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T13:40:53.617

我在您的第一个示例中看到的最大问题（除了不初始化`rs`）是您没有正确处理清理。你应该有一个`finally`关闭的块`stmt`。

确保所有这些都发生的一种非常好的方法是使用 Spring 的[JDBCTemplate](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html)（更多文档[在这里](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/jdbc.html#jdbc-core)）。这将为您处理所有连接管理细节；您只需编写 SQL 和代码来处理`ResultSet`. 更好的是，它允许您使用 Spring 的声明式事务管理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-21T18:24:32.470

您可以使用[CachedRowSet](http://docs.oracle.com/javase/6/docs/api/javax/sql/rowset/CachedRowSet.html)。有关详细答案，您可以在[此处查看我的答案](https://stackoverflow.com/a/24344503/525978)

# html - 为什么“垂直对齐：中间；” 不适用于“最小高度”？

> ID：11902008
> 
> 赞同：0
> 
> 时间：2012-08-10T12:49:18.150
> 
> 标签：html, css

当我设置最小高度和“垂直对齐：中间；” 文本未垂直对齐。
第一个示例： http: [//jsfiddle.net/pkaXR/](http://jsfiddle.net/pkaXR/)
我应该如何更改 css 垂直对齐图像和文本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T12:50:52.113

`min-height`*设置块*的最小高度。

`vertical-align`*设置行*内内容的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T20:16:43.810

也许像[http://jsfiddle.net/rPsEJ/26/](http://jsfiddle.net/rPsEJ/26/) - 我不确定我是否正确理解了这个问题。;-) 据我所知，vertical-align 仅适用于表格单元格。

# objective-c - NSJSON序列化错误

> ID：11902013
> 
> 赞同：-1
> 
> 时间：2012-08-10T12:49:34.830
> 
> 标签：objective-c, nsstream, nsjsonserialization

我正在尝试将 json 对象发送到服务器。但我收到一个错误，我无法修复它。

```
-(void) connectToHost{
CFReadStreamRef readStream;
CFWriteStreamRef writeStream;
CFStreamCreatePairWithSocketToHost(NULL, (CFStringRef)@"localhost", 9123, &readStream, &writeStream);
inputStream = (__bridge NSInputStream *)readStream;
outputStream = (__bridge NSOutputStream *)writeStream;
[inputStream setDelegate:self];
[outputStream setDelegate:self];
[inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[inputStream open];
[outputStream open];    } 
```

这是我与主机的连接。

```
NSDictionary *setUser = [NSDictionary
            dictionaryWithObjectsAndKeys:[@"u" stringByAppendingString:my.id],@"id",
                                        @"GET_USER_INFO",@"command",
                                        @"",@"value",
                                        nil];
    NSArray *array = [NSArray arrayWithObject:setUser];
    jsonDataToSendTheServer = [array JSONRepresentation];
    NSLog(@" %@ ", jsonDataToSendTheServer);
   // array = [NSArray arrayWithObject:jsonDataToSendTheServer];
    NSLog(@" %@ ", array);
    NSLog(@"true or false %c",[NSJSONSerialization
                               isValidJSONObject: array]);

    bytesWritten = [NSJSONSerialization writeJSONObject:array toStream:outputStream options:NSJSONWritingPrettyPrinted error:nil]; 
```

而这部分是 NSJSONSerialization 部分。但是我得到了一个错误。

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '***+[NSJSONSerialization writeJSONObject:toStream:options:error:]: stream is not open for writing' 
```

我是objective-c的新手。我无法在 3 小时内解决问题。

========================================

编辑：

```
- (void)stream:(NSStream *)theStream handleEvent:(NSStreamEvent)streamEvent {

NSLog(@"stream event %i", streamEvent); //this doesn't post in the log when stream opened...
NSLog(@"bytes %i",bytesWritten);
switch (streamEvent) {

    case NSStreamEventOpenCompleted:
        NSLog(@"Stream opened");
        break;
    case NSStreamEventHasBytesAvailable:

        if (theStream == inputStream) {

            uint8_t buffer[1024];
            int len;

            while ([inputStream hasBytesAvailable]) {
                len = [inputStream read:buffer maxLength:sizeof(buffer)];
                if (len > 0) {

                    NSString *output = [[NSString alloc] initWithBytes:buffer length:len encoding:NSUTF8StringEncoding];

                    if (nil != output) {

                        NSLog(@"server said: %@", output);
                        //[self messageReceived:output];

                    }
                }
            }
        }
        break;

    case NSStreamEventEndEncountered:

        [theStream close];
        [theStream removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
        //[theStream release];
        theStream = nil;

        break;
    case NSStreamEventHasSpaceAvailable:
    {
        uint8_t *readBytes = (uint8_t *)[_data mutableBytes];
        readBytes += bytesWritten; // instance variable to move pointer
        int data_len = [_data length];
        unsigned int len = ((data_len - bytesWritten >= 1024) ?
                            1024 : (data_len-bytesWritten));
        uint8_t buf[len];
        (void)memcpy(buf, readBytes, len);
        //len = [theStream write:(const uint8_t *)buf maxLength:len];
        NSLog(@"written %s", buf );
        bytesWritten += len;
    }
         break;

    case NSStreamEventErrorOccurred:
    {
        NSLog(@"no connection");
    }
    case NSStreamEventNone:
    {
        //printf("EVENT: None.\n");
        break;
    }

    default:
        NSLog(@"Unknown event");
}} 
```

这是我的流：handleEvent：函数。

现在，在我将 connectionToHost 添加到委托之后，我得到了这种错误。

```
012-08-10 16:14:27.302 TaraftarlikOyunu[2274:c07] written P∏◊P‡ˇø

2012-08-10 16:14:28.399 TaraftarlikOyunu[2274:c07] benim bu id 587127341

2012-08-10 16:14:28.399 TaraftarlikOyunu[2274:c07] benim ad Ahmet

2012-08-10 16:14:28.400 TaraftarlikOyunu[2274:c07] 

[{"id":"u581277341","command":"GET_USER_INFO","value":""}]

2012-08-10 16:14:28.404 TaraftarlikOyunu[2274:c07] stream event 4

2012-08-10 16:14:28.404 TaraftarlikOyunu[2274:c07] bytes 86

  (lldb) 
```

现在我不知道它是否缓冲

=======================EDIT2=============== 对不起。问题可能是因为这个

```
(void)memcpy(buf, readBytes, len); 
```

我只是复制并粘贴这部分代码。可能是什么问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:59:39.843

您使用的连接方法有点多。

您需要确保连接已在委托中发生

```
 - (void)stream:(NSStream *)theStream handleEvent:(NSStreamEvent)streamEvent {

switch (streamEvent) {
    case NSStreamEventHasSpaceAvailable:
        NSLog(@\"None!\");
        break;
    case NSStreamEventOpenCompleted:
        NSLog(@\"Stream opened\");
              //NOW you can write to the stream 
```

# ios - 在 iOS 5.1 上尝试使用 GCDAsyncSocket 写入数据时出错

> ID：11902017
> 
> 赞同：0
> 
> 时间：2012-08-10T12:49:53.427
> 
> 标签：ios, objective-c, stream, ios5.1, gcdasyncsocket

我正在尝试在我的 iOS 应用程序中使用 GCDAsyncSocket。我一直在遵循 CocoaAsyncSocket 的 wiki 中提供的所有步骤。这是我正在做的事情：

```
 GCDAsyncSocket socket = [[GCDAsyncSocket alloc] initWithDelegate:self delegateQueue:dispatch_get_main_queue()];

    NSError *err = nil;
    if (![socket connectToHost:@"192.168.0.129" onPort:2811 error:&err]) // Asynchronous!
    {
        // If there was an error, it's likely something like "already connected" or "no delegate set"
        NSLog(@"I goofed: %@", err);
    }

    uint8_t buffer[2] = "1\n";

    NSData *data = [NSData dataWithBytes: &buffer length: sizeof(buffer)];
    [socket writeData:data withTimeout:10 tag:1]; 
```

我已经包含了框架依赖项：Security 和 CFNetwork，并在我的课程中包含了各自的委托。我需要任何其他配置才能使用它吗？

当我运行这个例子时，我得到这个错误：

> [ **NSMallocBlock**字节]：无法识别的选择器发送到实例 0x6b7abe0 'NSInvalidArgumentException'，原因：'-[ **NSMallocBlock**字节]：无法识别的选择器发送到实例 0x6b7abe0'

它发生在 GCDAsyncSocket.m 的这一行

```
const uint8_t *buffer = (const uint8_t *)[currentWrite->buffer bytes] + currentWrite->bytesDone; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:37:12.403

尝试使用它来转换你的数据，从字符串到数据

```
 +(NSData *) DataToHex: (NSString *) string
{
    string = [string stringByReplacingOccurrencesOfString:@" " withString:@""];
    int stringLength = string.length;
    NSMutableData *hexStringArray = [[NSMutableData alloc] init];
    [hexStringArray setLength:0];
    unsigned char whole_byte;

    char byte_chars[3] = {'\0','\0','\0'};
    int i;
    for (i=0; i < stringLength/2; i++) 
    {
        byte_chars[0] = [string characterAtIndex:i*2];
        byte_chars[1] = [string characterAtIndex:i*2+1];
        whole_byte = strtol(byte_chars, NULL, 16);
        [hexStringArray appendBytes:&whole_byte length:1]; 
    }                                                                       //this is auto way

    return hexStringArray;
} 
```

# python - 仅使用名字查询全名数据存储属性的最佳过滤器是什么？

> ID：11902019
> 
> 赞同：1
> 
> 时间：2012-08-10T12:49:57.997
> 
> 标签：python, google-app-engine, google-cloud-datastore

我有这个数据存储模型：

```
class Person(db.Model):
    person_name = db.StringProperty(required = True)        
    nacionality = db.StringProperty(required = True)
    marital_status = db.StringProperty(required = True)
    profession = db.StringProperty(required = True)
    SSN = db.IntegerProperty(required = True)
    driver_license = db.IntegerProperty(required = True)
    address = db.PostalAddressProperty(required = True) 
```

在这个模型中，person_name 可能是这样的：'Carl Sagan'（整个名字只有 on 属性）。但是当我查询它时，这样：

```
 searched_name = 'Carl'
    p = Person.all()
    persons = p.filter('person_name >=', searched_name) 
```

结果，我得到了不以“Carl”开头的名称，或者名称的任何部分都没有“Carl”。如果我这样查询：`persons = p.filter('person_name >=', searched_name)`我没有得到任何结果（甚至没有找到'Carl Sagan'）。所以，我想知道：这种查询的最佳过滤器是什么？（仅使用名字查询完整的名称属性）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:26:07.680

字符串过滤器的工作原理是比较字符串开头的字符。你可以这样做：

```
p.filter('person_name >=', searched_name)
p.filter('person_name <', searched_name + u'\ufffd') 
```

# sql - 避免在 Oracle SQL 中进行假脱机时将错误复制到 CSV

> ID：11902020
> 
> 赞同：1
> 
> 时间：2012-08-10T12:50:03.427
> 
> 标签：sql, oracle

我有一个 SQL 代码，它将数据从 Oracle 数据库中提取到 .csv 文件中。

```
set echo off
set feedback off
set linesize 1000
set pagesize 0
set sqlprompt ''
set trimspool on
set verify off
spool test.csv
    /*Code Part*/
/
spool off 
```

问题是，如果在执行代码部分时发生任何错误（例如：资源繁忙问题），这些错误消息将与假脱机数据一起复制到 .csv 文件中。有什么办法可以避免吗？

如果有人建议我将这些错误消息重定向到 .txt 文件（我不知道这是否可能），那将会更有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T16:06:30.780

您可能希望考虑使用 UTL_FILE 包来创建您想要的文件，而不是依靠 SQL*Plus 来重定向您的输出。虽然这可能需要您进行一些重写，但您最终会更好地控制正在编写的内容。

另一种选择是过滤输出文件以消除 . 例如，如果您不想看到的所有行都以“ORA-”开头，您可能可以使用类似`grep`命令的内容：

```
grep -v ^"ORA-" test.csv 
```

或者您可能必须使用类似的东西，`sed`或者`awk`如果您的过滤要求更复杂。

分享和享受。

# python - 如何使用 Python 从 txt 文件中删除特殊字符

> ID：11902022
> 
> 赞同：4
> 
> 时间：2012-08-10T12:50:07.030
> 
> 标签：python

```
from glob import glob
pattern = "D:\\report\\shakeall\\*.txt"
filelist = glob(pattern)
def countwords(fp):
    with open(fp) as fh:
        return len(fh.read().split())
print "There are" ,sum(map(countwords, filelist)), "words in the files. " "From directory",pattern
import os
uniquewords = set([])
for root, dirs, files in os.walk("D:\\report\\shakeall"):
    for name in files:
        [uniquewords.add(x) for x in open(os.path.join(root,name)).read().split()]
print "There are" ,len(uniquewords), "unique words in the files." "From directory", pattern 
```

到目前为止，我的代码是这样的。这会计算唯一词的数量和总词数`D:\report\shakeall\*.txt`

问题是，例如，此代码识别`code` `code.`和`code!`不同的单词。因此，这不能作为唯一单词的确切数量的答案。

我想使用 Windows 文本编辑器从 42 个文本文件中删除特殊字符

或者制定一个例外规则来解决这个问题。

如果使用后者，我应该如何编写我的代码？

让它直接修改文本文件？或者做一个不计算特殊字符的例外？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T12:57:21.113

```
import re
string = open('a.txt').read()
new_str = re.sub('[^a-zA-Z0-9\n\.]', ' ', string)
open('b.txt', 'w').write(new_str) 
```

它将每个非字母数字字符更改为空白。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T13:22:37.563

我很新，我怀疑这是否非常优雅，但一种选择是在读入字符串并通过 string.translate() 运行它们以去除标点符号后获取您的字符串。[这是](http://docs.python.org/library/string.html#string.translate)2.7 版的 Python 文档（我认为您正在使用）。

就实际代码而言，它可能是这样的（但也许比我更好的人可以确认/改进它）：

```
fileString.translate(None, string.punctuation) 
```

其中“fileString”是您的 open(fp) 读入的字符串。“None”用于代替翻译表（通常用于将某些字符实际更改为其他字符），以及第二个参数 string.punctuation （一个包含所有标点符号的 Python 字符串常量）是一组将从字符串中删除的字符。

如果上述方法不起作用，您可以进行如下修改：

```
inChars = string.punctuation
outChars = ['']*32
tranlateTable = maketrans(inChars, outChars)
fileString.translate(tranlateTable) 
```

我通过快速搜索找到了一些其他类似问题的答案。我也会把它们链接在这里，以防你能从他们那里得到更多。

[从 Python 列表项中删除标点符号](https://stackoverflow.com/questions/4371231/removing-punctuation-from-python-list-items)

[从字符串中删除所有特殊字符、标点符号和空格](https://stackoverflow.com/questions/5843518/remove-all-special-characters-punctuation-and-spaces-from-string)

[在 Python 2.x 中去除特定标点符号](https://stackoverflow.com/questions/8857885/strip-specific-punctuation-in-python-2-x)

* * *

最后，如果我所说的完全错误，请发表评论，我会将其删除，以免其他人尝试我所说的并感到沮丧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T13:03:56.193

```
import re 
```

然后更换

```
[uniquewords.add(x) for x in open(os.path.join(root,name)).read().split()] 
```

经过

```
[uniquewords.add(re.sub('[^a-zA-Z0-9]*$', '', x) for x in open(os.path.join(root,name)).read().split()] 
```

这将在将每个单词添加到集合之前从每个单词中去除所有尾随的非字母数字字符。

# ruby-on-rails - Rspec 强制 mobile_fu 检测移动设备

> ID：11902034
> 
> 赞同：1
> 
> 时间：2012-08-10T12:50:54.047
> 
> 标签：ruby-on-rails, rspec, mobile-fu

有没有办法为我的应用程序的移动版本编写 rspec 测试？

我`mobile_fu`用来检测呼叫是否来自移动设备。

但现在 rspec 需要`mobile_fu`误以为这是一个移动请求......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:54:03.650

[这篇文章](http://blog.plataformatec.com.br/2011/03/configuring-user-agents-with-capybara-selenium-webdriver/)对我来说是完美的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:36:28.070

您应该能够使用 RSpec 来驱动 Webrat，并设置 Webrat 用户代理来模拟移动设备：

[http://robert-reiz.com/2012/02/27/integration-tests-with-rspec/](http://robert-reiz.com/2012/02/27/integration-tests-with-rspec/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T19:42:10.043

你去[http://blog.sparqcode.com/2011/03/07/custom-user-agent-strings-with-cucumber-and-capybara/](http://blog.sparqcode.com/2011/03/07/custom-user-agent-strings-with-cucumber-and-capybara/)

# expression-trees - Expression.* 命名空间是为 EF 4.3 + ODAC 创建表达式树的唯一方法吗？

> ID：11902035
> 
> 赞同：1
> 
> 时间：2012-08-10T12:50:58.653
> 
> 标签：expression-trees, entity-framework-4.3, odac

我遇到了 ODAC（Oracle 数据访问组件）、实体框架 4.3.1 和表达式树的问题。我们有一个在实体框架中映射的遗留数据库（不是吗？）。该表有数百万条记录和一百多列（悲伤的脸）。

以下是对索引列的示例查询：

```
int myId = 2;
var matchingRecord = context.MyLargeTable.Where(v=>v.Id == myId).ToList(); //Super slow (5+ minutes, sometimes Out of Memory exception)

int myId = 2;
Expression<Func<bool>> myLambda = v => v.Id == myId; //Shouldn't this work now?
var matchingRecord = context.MyLargeTable.Where(myLambda).ToList(); //Still super slow (5+ minutes, sometimes Out of Memory exception)

var elementName = Expression.Parameter(typeof(LargeTable), "v");
var propertyName = Expression.Parameter(elementName, "Id");
var constantValue = Expression.Constant(myId);
var comparisonMethod = Expression.Call(
propertyName,
typeof(int).GetMethod("Equals", new[] { typeof(int) }),
constantValue
)
var finalTree = Expression.Lambda<Func<LargeTable, bool>>(comparisonMethod, elementName);
var matchingRecord = context.MyLargeTable.Where(finalTree).ToList(); //Super fast 
```

我读过这样的文章，解释了 Func<> 和 Expression> 之间的区别以及 Expression> 实际上如何传递到数据库进行查询，这就是它更快的原因。

[http://www.fascinatedwithsoftware.com/blog/post/2011/12/02/Falling-in-Love-with-LINQ-Part-7-Expressions-and-Funcs.aspx](http://www.fascinatedwithsoftware.com/blog/post/2011/12/02/Falling-in-Love-with-LINQ-Part-7-Expressions-and-Funcs.aspx) - 一切都很好，但如果在匆忙，只需阅读标题为“意外后果”的部分即可了解主要内容

[http://fascinatedwithsoftware.com/blog/post/2012/01/10/More-on-Expression-vs-Func-with-Entity-Framework.aspx](http://fascinatedwithsoftware.com/blog/post/2012/01/10/More-on-Expression-vs-Func-with-Entity-Framework.aspx)

[为什么要使用 Expression<Func<T>> 而不是 Func<T>？](https://stackoverflow.com/questions/793571/why-would-you-use-expressionfunct-rather-than-funct)- 如果没有相应的 SO 问题，任何链接都是不完整的

我的问题是：人们真的坐在那里使用 Expression.* 类构建表达式树吗？除了简单比较之外的任何查询都变得非常复杂，几乎无法阅读。将 Expression> 传递给数据库时我缺少什么？对于这个手动构建的表达式树解决方案，我该打谁的脸？甲骨文？英孚？我错过了什么？

# mysql - 如何从精确的分区中选择数据？

> ID：11902042
> 
> 赞同：0
> 
> 时间：2012-08-10T12:51:15.097
> 
> 标签：mysql, sql, database

在表 tbl_dtdata 中，我创建了 7 个分区。我想从第一个分区 p_APR 中选择数据。我试过这个查询。`SELECT COUNT(*) FROM tbl_dtdata PARTITION (p_Apr);`但它返回语法错误。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T19:26:59.757

结帐以下可能对您完全有用的链接：http: [//blog.sqlauthority.com/2008/01/25/sql-server-2005-database-table-partitioning-tutorial-how-to-horizo​​ntal -partition-database -桌子/](http://blog.sqlauthority.com/2008/01/25/sql-server-2005-database-table-partitioning-tutorial-how-to-horizontal-partition-database-table/)

# django - Django allauth 翻译无法识别

> ID：11902047
> 
> 赞同：1
> 
> 时间：2012-08-10T12:51:27.263
> 
> 标签：django, internationalization, translation, gettext, django-rosetta

我正在使用 Django allauth，并且在运行 makemessages 后，视图和表单中标记为翻译的字符串不会出现在 .po 文件中。

例如，在`site-packages/allauth/account/forms.py`：

```
from django.utils.translation import ugettext_lazy as _, ugettext
...
error = _("The username and/or password you specified are"
          " not correct.") 
```

我也`rosetta`用于翻译，但 allauth 没有出现在 3rd 方应用程序列表中。

关于为什么可能`makemessages`并且`rosetta`正在忽略 allauth 进行翻译的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T09:51:40.913

结帐[https://docs.djangoproject.com/en/dev/topics/i18n/translation/#message-files](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#message-files) - 特别是关于从应用程序目录运行 makemessages 的说明。allauth 有自己的语言环境目录，这就是为什么它的字符串不会显示在您的项目级语言环境目录中的原因。尝试在 allauth 级别运行 makemessages ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-03T17:30:30.423

还要记住，all-auth 的翻译文件有时会很混乱。在 repo 中检查它，可能某些字符串`fuzzy`在您的语言中是或相似的。在这种情况下，我复制了模板和电子邮件，并通过在 all-auth 存储库中复制和粘贴 .po 文件来手动翻译。这需要一些努力，但有效。

# tomcat - Tomcat 7 上的 Grails 应用程序：log4 每日日志正在覆盖旧的备份日志

> ID：11902049
> 
> 赞同：0
> 
> 时间：2012-08-10T12:51:29.333
> 
> 标签：tomcat, grails, log4j, rollingfileappender

我正在开发一个以前托管在 JBoss 上的 grails 应用程序，但现在我们已经转移到 Apache Tomcat。

JBoss 上使用 log4j 的 Grails 应用程序运行良好，但我们面临一个问题，`org.apache.log4j.DailyRollingFileAppender`因为我们在 Apache Tomcat 中使用 log4j 进行应用程序日志记录和服务器日志记录。

问题是`org.apache.log4j.DailyRollingFileAppender`覆盖旧的备份日志文件（例如，我们在日期 8 的日志中得到日期为 9 的日志，但没有找到 8 的日志），有时它开始记录前一天的备份文件。

我不知道这个 appender 有什么问题，因为他们在 JBoss 上编写了`org.jboss.logging.appender.DailyRollingFileAppender`wrapper。有什么问题`org.apache.log4j.DailyRollingFileAppender`吗？你能建议一个解决方案吗？

```
<appender class="org.apache.log4j.DailyRollingFileAppender" name="FILE">
    <errorHandler class="org.apache.log4j.helpers.OnlyOnceErrorHandler"/>
<param name="Threshold" value="INFO"/> 
<param name="File" value="${catalina.base}/logs/applog.log"/>
 <param name="Append" value="true"/>
      <param name="DatePattern" value="'.'yyyy-MM-dd"/>
          <layout class="org.apache.log4j.PatternLayout">
              <param name="ConversionPattern" value="%d{yyyy-MM-dd HH:mm:ss,SSS Z} level=%-5p class=%c %X{uniqueId} %X{hostname} %X{requestURI} %X{clientIP} %X{userId} %X{realmId} %X{sessionId} %X{locale} %X{callingHost} %X{uniqueIdCallingHost} %X{asyncUserId} %X{isAsync} %X{taskId} %m%n"/>
      </layout>
   </appender> 
```

由于这不起作用，我们使用`org.apache.log4j.rolling.RollingFileAppender`log4j 的“附加”库。下面是 appender 配置，但它仍然无法正常工作。

```
<appender name="ROLL" class="org.apache.log4j.rolling.RollingFileAppender">
    <param name="File" value="${catalina.base}/logs/paymentRolling.log" />
    <param name="Threshold" value="INFO"/> 
    <param name="Append" value="true"/>
   <rollingPolicy class="org.apache.log4j.rolling.TimeBasedRollingPolicy">
      <param name="FileNamePattern" value="${catalina.base}/logs/appRolling.log.%d{yyyy-MM-dd}"/>
    </rollingPolicy>
    <layout class="org.apache.log4j.PatternLayout">
      <param name="ConversionPattern" value="%d{yyyy-MM-dd HH:mm:ss,SSS Z} level=%-5p class=%c %X{uniqueId} %X{hostname} %X{requestURI} %X{clientIP} %X{userId} %X{realmId} %X{sessionId} %X{locale} %X{callingHost} %X{uniqueIdCallingHost} %X{asyncUserId} %X{isAsync} %X{taskId} %m%n"/>
    </layout>
  </appender> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:16:19.607

我不确定 XML 配置如何影响所有内容，但它看起来与我们的（基于属性的）配置非常相似，它的工作方式与我们预期的完全一样：

```
This is our log4j configuration and it works exactly as we expect it to:
log4j.appender.A1=org.apache.log4j.DailyRollingFileAppender
log4j.appender.A1.file = /path/to/logs/log4j.log
# Roll-over the log once a day
log4j.appender.A1.DatePattern='.'yyyy-MM-dd
log4j.appender.A1.layout = org.apache.log4j.PatternLayout
log4j.appender.A1.layout.conversionPattern = %d [%t] %-5p %c- %m%n
log4j.appender.A1.append = true 
```

有几件事可能会干扰您的日志记录：

1.  如果您将 log4j 用于服务器日志记录和 webapp-logging，您可能同时让服务器和单个 webapps 写入相同的文件。也就是说，这两个记录器可能会踩到对方的脚趾。确保每个 log4j 配置（服务器、每个 webapp）都写入完全独立的文件。

2.  如果系统时间（特别是时区）与 Tomcat 进程和/或查看日志文件的用户不同，您可能会发现日志文件在意外时间翻转。例如，我住在华盛顿特区，目前是 UTC-04:00。如果 Tomcat 用户的时区设置为 UTC，但我的 shell 帐户配置为显示我的本地时间，那么日志文件将显示为每天 20:00 而不是 00:00 翻转。但是，在这种情况下，日志条目都应该是 UTC，因此日志文件的内容不应该混淆。

# c++ - 我们如何在 boost 属性树中获取对象

> ID：11902065
> 
> 赞同：1
> 
> 时间：2012-08-10T12:52:15.590
> 
> 标签：c++, json, boost, boost-propertytree, boost-foreach

我需要理解和修改示例代码。我被困在某个时候，找不到任何解决方案。这是代码：

```
void foo(std::istream& input)
{
    using boost::property_tree::ptree;
    ptree pt;

    boost::property_tree::read_json(input, pt);

    BOOST_FOREACH(ptree::value_type &node, pt.get_child("some_nodes"))
    {
        std::string id;
        unsigned int number1;
        bool flag1;
        bool flag2;

        id = node.second.get<std::string>("id");
        number1 = node.second.get<unsigned int>("number1");
        flag1 = node.second.get<bool>("flag1");
        flag2 = node.second.get<bool>("flag2");
    }
} 
```

有人可以告诉我这里的“第二”是什么意思吗？

这是程序读取的 JSON 示例：

```
{
    "some_nodes" :
    [
            {
                    "id"          : "vader",
                    "number1"     : "1024",
                    "flag1"       : "false",
                    "flag2"       : "true",
            },
            {
                    "id"          : "anakin",
                    "number1"     : "4096",
                    "flag1"       : "true",
                    "flag2"       : "true",     
            }
    ]
} 
```

还有一个问题，当我尝试编译代码时，我也收到以下错误。这是什么意思，我该如何解决？

```
Invalid arguments '
Candidates are:
boost::foreach_detail_::foreach_reference<#0,#1>::type deref(const boost::foreach_detail_::auto_any_base &, boost::foreach_detail_::type2type<#0,#1> *)
' 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:16:01.723

ptree::value_type 是这样定义的：

```
typedef std::pair< const Key, self_type >    value_type; 
```

所以它只是一个 std::pair。JSON 的根节点是数组“some_nodes”。当你迭代你的属性树时，你正在迭代所有“some_nodes”子节点。

*   第一个字段是键（在这种情况下是隐含的，因为您正在迭代所有根子节点）。我想在你的情况下 node.first 总是“some_nodes”。
*   第二个是值（键的子节点：另一个 ptree）。在这种情况下，在每次迭代中，第二个都是数组的第 i 个未命名对象。

# python - matplotlib 中条形图的日期格式

> ID：11902066
> 
> 赞同：3
> 
> 时间：2012-08-10T12:52:36.920
> 
> 标签：python, numpy, matplotlib

> **可能重复：**
> [如何使用 matplotlib 在 x 轴上](https://stackoverflow.com/questions/3486121/how-to-plot-data-against-specific-dates-on-the-x-axis-using-matplotlib)
> [绘制非数字数据与 x 轴上特定日期的数据（例如，日期）](https://stackoverflow.com/questions/6974847/plot-with-non-numerical-data-on-x-axis-for-ex-dates)

我试图在 matplotlib 中生成一个条形图，其中 x 轴和 y 轴值是（日期、整数）的元组。数据具有以下形式：

```
data = [('2012-02-26', 17), ('2012-03-07', 16), ('2012-06-30', 16), 
        ('2012-03-16', 15), ('2012-06-24', 15), ('2012-05-13', 14), 
        ('2012-03-19', 12), ('2012-02-18', 9), ('2012-04-07', 9), 
        ('2012-04-09', 8)] 
```

如果我简单地使用整数作为 x 值，我可以生成一个简单的条形图：

```
import scipy as sp
from matplotlib import pyplot as pl
x = sp.arange(100)
y = sp.random.randint(1,100, 100)
fig = figure()
pl.bar(x,y) 
```

![在此处输入图像描述](../Images/1c9a59ac0e1d4ddc8ac7aebb1262ca4e.png)

如何在 x 轴上绘制带有字符串日期的类似条形图？理想情况下，我还希望将 x 轴标签显示为日期。[我在matplotlib recipe page](http://matplotlib.sourceforge.net/users/recipes.html)上找到了一个类似的示例，但我无法让它与我的示例一起使用。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:46:00.353

使用 plot_date 函数代替 plot()。

[plot_date](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.plot_date)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:56:09.740

我用了

```
ax.xaxis.set_major_formatter(dates.DateFormatter('%d/%m')) 
```

# javascript - 关闭动态创建的 jQuery-ui 对话框

> ID：11902067
> 
> 赞同：4
> 
> 时间：2012-08-10T12:52:37.050
> 
> 标签：javascript, jquery, jquery-ui

我正在创建一个用户信息编辑对话框，该对话框使用获取编辑用户信息，`$.post`但由于未使用任何 HTML 元素初始化对话框，因此我无法关闭此对话框。

我正在尝试`$('#editUser').dialog('close')`，但它不会工作。

这是主体：

```
<div id='userInfo'>
<div class='user'>
    <span class='userId'>1</span>
    <span class='userName'>John</span>
</div>
<div class='user'>
    <span class='userId'>2</span>
    <span class='userName'>Jane</span>
</div> 
```

这是用于创建对话框的脚本：

```
$(function() {
$('.user').click(function() {
     var uid = $(this).find('span.userId').html();
    $post('/e-val/user/edit.php', {id: uid}, function(html) {
       $(html).dialog();
    });
});

$('body').on('click', '#closeEditDialog', function() {
   $('#editUser').dialog('close')
});
}); 
```

对话框按预期打开，但没有按预期关闭。

这是 ajax 脚本返回的对话框的 HTML。

```
<div id='editUser'>
<table>
    <tr>
        <td>Username</td>
        <td><?php echo $user['name'] ?></td>
    </tr>
    <tr>
        <td>Email</td>
        <td><?php echo $user['email'] ?></td>
    </tr>
    <tr>
        <td colspan='2'>
<input type='button' id='closeEditDialog' value='close' />
</td>
    </tr>
</table>
</div> 
```

**我该怎么做才能关闭它？**我可以`$('#editUser').remove()`用来删除对话框，但我需要关闭它而不是删除它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:56:02.653

```
var mydialog;
$(function() {
$('.user').click(function() {
     var uid = $(this).find('span.userId').html();
    $post('/e-val/user/edit.php', {id: uid}, function(html) {
       mydialog = $(html);
       mydialog.appendTo('body');
       mydialog.dialog();
    });
});

$('body').on('click', '#closeEditDialog', function() {
   mydialog.dialog('close')
});
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T13:12:15.360

在创建对话框之前，您可能需要将该 html 插入到您的 DOM 中。

```
$("body").append(html);
$("#editUser").dialog(); 
```

好吧，至少如果您的对话框以这种方式显示，没有什么可以阻止它关闭，您使用的是相同的选择器。

**EDIT**

Also, do not forget that .dialog() will initialize the widget, try not calling it more than once. Using .dialog("open") instead.

Best would be even to already add the dialog's div into your html, and then append your server side code in it to dynamically update the content of the dialog.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T03:06:20.293

`$('#editUser').dialog('close')` won't work because you've never used `$('#editUser')` to initialize the `dialog`, so you cannot use it either to close it, You need to use the same handler that was used to create it.

As answered here by Gil & Trinh : Just add the dialog content to the DOM first and then initialize the dialog:

```
$post('/e-val/user/edit.php', {id: uid}, function(html) {
   $(html).appendTo('body');
   $('#editUser').dialog( {autoOpen: false} );
}); 
```

`autoOpen: false` will prevent the dialog from opening by itself and it can be opened using `$('#editUser').dialog('open')` anytime.

# c# - 使用 IFileOperation 在复制期间创建目录

> ID：11902068
> 
> 赞同：7
> 
> 时间：2012-08-10T12:52:39.613
> 
> 标签：c#, com

使用 Stephen Toub 的 C# 的 IFileOperation 包装器（[链接](http://msdn.microsoft.com/en-us/magazine/cc163304.aspx)），它一直运行良好，直到现在。现在我正在尝试复制以从网络位置收集文件，每个网络位置到它自己的子目录中。

`\\FOO\data`进`C:\gather\Foo_data`
`\\BAR\manage\current`进`C:\gather\bar\manage`

等等。问题出在`FileOperation.CopyItem`. 一定是因为目标目录还不存在——<code>IFileOperation 会在复制过程中创建它，对吧？我使用了[另一个问题](https://stackoverflow.com/questions/3835350/creating-an-ishellitem-instance-for-a-non-existent-file)的技术并将Toub的更改`FileOperation.CreateShellItem`为：

```
private static ComReleaser<IShellItem> CreateShellItem( string path )
{
    try
    {
        return new ComReleaser<IShellItem>( (IShellItem)SHCreateItemFromParsingName( path, null, ref _shellItemGuid ) );
    }
    catch ( FileNotFoundException )
    {
        IntPtr pidl = SHSimpleIDListFromPath( path );
        IShellItem isi = (IShellItem)SHCreateItemFromIDList( pidl, ref _shellItemGuid );
        Marshal.FreeCoTaskMem( pidl );
        System.Diagnostics.Debug.WriteLine( "Shell item: " + isi.GetDisplayName( SIGDN.DesktopAbsoluteParsing ) );
        return new ComReleaser<IShellItem>( isi );
    }
} 
```

我把它卡`Debug.WriteLine`在那里检查它是否工作，它似乎工作正常；它写出路径。

但是`IFileOperation.CopyItem`抛出一个`ArgumentException`，我不知道为什么。我没有`IShellItem`正确地“为一个不存在的文件”做吗？我怀疑我需要进入`SFGAO_FOLDER`那里，因为我正在尝试`IShellItem`为不存在的*目录*而不是文件创建一个目录，但是如何？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T20:53:21.247

在这个周末（多么疯狂的派对周末）进行了大量的谷歌搜索和编码实验之后，我找到了一个解决方案。

1.  编写一个与 COM 兼容的类来实现`IFileSystemBindData`.
2.  分配一个`WIN32_FIND_DATA`结构并设置它的`dwFileAttributes = FILE_ATTRIBUTE_DIRECTORY`. （其他成员在这里无关紧要，据我经过一些测试后得知。）
3.  创建你的`IFileSystemBindData`类的一个实例。
4.  将您的`WIN32_FIND_DATA`对象传递给`IFileSystemBindData::SetFindData`.
5.  创建一个`IBindCtx`.
6.  使用( d as ) 和您的对象`IBindCtx::RegisterObjectParam`的参数调用它。`STR_FILE_SYS_BIND_DATA``#define``L"File System Bind Data"``IFileSystemBindData`
7.  `SHCreateItemFromParsingName`使用要创建的目录的路径名和您的对象调用`IBindCtx`。

有用。binding-context 对象告诉`SHCreateItemFromParsingName`不要查询文件系统，而只使用它给出的内容。我必须`IFileOperation`将一个文件复制到新的且命名巧妙的目录`D:\Some\Path\That\Did\Not\Previously\Exist`中，它一路上创建了所有七个目录。据推测，同样的技术可用于`IShellItem`为任何不存在的文件系统对象创建一个，具体取决于您放入的`dwFileAttributes`.

但它很丑。我希望有更好的方法。我的编码实验是在 C++ 中进行的。现在编写 COM 互操作的东西以在 C# 中再次执行此操作。或者，放弃项目并在 C++ 中重新开始可能会更容易。

# ruby-on-rails - 未选择重构时的情况

> ID：11902073
> 
> 赞同：0
> 
> 时间：2012-08-10T12:52:48.633
> 
> 标签：ruby-on-rails, ruby

它是 Rails/Ruby。只是想知道是否有 DRYer 版本可以删除以下代码中的重复：

```
case params[:order]
when 'rating_ascend'
  order = {:order => 'rating_average ASC'}
when 'rating_descend'
  order = {:order => 'rating_average DESC'}
when 'distance'
  order = {:order => 'distance ASC'}
else
  order = {:order => 'distance ASC'}
end 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T12:57:05.043

当然，有。

```
order = case params[:order]
  when 'rating_ascend'
    {:order => 'rating_average ASC'}
  when 'rating_descend'
    {:order => 'rating_average DESC'}
  else
    {:order => 'distance ASC'}
end 
```

甚至这个（我不会这样写，但这是 DRYer）

```
order = {:order => case params[:order]
  when 'rating_ascend' then 'rating_average ASC'
  when 'rating_descend' then 'rating_average DESC'
  else 'distance ASC'
end} 
```

当您将代码简化到这一点时，您会注意到您有双倍的“距离 ASC”结果。是错字还是故意的？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T12:57:49.363

```
order = {}
order[:order] = case params[:order]
when "rating_ascend" then "rating_average ASC"
when "rating_descend" then "rating_average DESC"
else "distance ASC"
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-10T13:23:39.603

```
orders = {'rating_ascend' =>  'rating_average ASC', 'rating_descend' => 'rating_average DESC', 'distance' => 'distance ASC'}
Model.order(orders[params[:order]] || 'distance ASC') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-10T13:39:01.967

使用“提取方法”重构模式：

```
def determine_order(order)
  case order
  when 'rating_ascend'
    'rating_average ASC'
  when 'rating_descend'
    'rating_average DESC'
  else
    'distance ASC'
end

order = {:order => determine_order(params[:order])} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-10T13:02:27.253

您可以像以前的答案一样做，甚至为了使它更好，只需删除不需要的案例

```
 when 'distance'
    'distance ASC' 
```

因为 else 部分将执行相同的操作。

```
order = {:order => case params[:order]
  when 'rating_ascend'
    'rating_average ASC'
  when 'rating_descend'
    'rating_average DESC'
  else
    'distance ASC'
end} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-07T22:45:07.920

如何使用不同的选项创建哈希并使用 fetch 来查找选项，例如：

```
order = order_hash.fetch(params[:order], {:order => 'distance ASC'})

def order_hash
  {
    'rating_ascend' => {:order => 'rating_average ASC'},
    'rating_descend' => {:order => 'rating_average DESC'},
    'distance' => {:order => 'distance ASC'}
  }
end 
```

而且由于 fetch 可以将默认选项作为第二个参数，因此您可以在案例结束时轻松解决 else 问题。

# php - Wordpress 中第 3、5 和 7 个帖子后的自定义代码

> ID：11902074
> 
> 赞同：1
> 
> 时间：2012-08-10T12:52:50.220
> 
> 标签：php, wordpress-theming, wordpress

你好，我有一个小问题。我们新网站的首页有一系列带有翻转的缩略图框，可以打开某些展示的产品。我写的循环显示了当前的所有帖子，但最终将只绑定到投资组合类别。

然而，我的经理希望在第三篇文章之后有一个带有最近博客文章的滑块，以及在第 5 篇和第 7 篇文章之后再添加几个带有引用等的滑块。我发现了一些代码，每 n 个帖子都注入相同的代码段，但这对我没有好处，因为我只希望它发生 3 次并且所有内容都不同，包括一个在循环内有一个循环（大概时间会慢慢移动超级哈哈）。这可能吗？如果是这样，有人可以指出我的代码片段吗？

电流回路

```
 <!-- Start of loop -->
    <?php if (have_posts()) : ?>

        <!-- Start of Post -->
        <?php while (have_posts()) : the_post(); ?>

        <!-- Check to see if there is featured image -->
        <?php if (function_exists('has_post_thumbnail') && has_post_thumbnail()) { ?>
        <?php $img_src = wp_get_attachment_image_src(get_post_thumbnail_id($post->ID), array( 960,960 )); ?>
        <!-- End Checking -->

        <div class="portfolioblock" style="background-image: url('<?php echo $img_src[0]; ?>');">
    <a href="<?php the_permalink(); ?>">
            <div class="rollover">
              <div class="center">
                <img src="<?php bloginfo('template_url'); ?>/img/zoom.png" alt="More" />
              </div>                    
              <h2><?php the_title(); ?></h2>               
                <p><?php the_excerpt(); ?></p>
    </div>
        </a>
        </div>

          <!-- Start Content Block -->          
        <?php } else { ?>
        <div class="block">
          <h2><?php the_title(); ?></h2>               
          <p><?php the_excerpt(); ?></p>
        </div>            
        <?php } ?>
        <!-- End Content Block -->

        <?php endwhile; ?>
        <!-- End of Post -->

        <?php else : ?>
        //Something that happens when a post isn’t found.

    <?php endif; ?>
    <!-- End of Loop --> 
```

我发现这段代码用于每 n 个帖子注入一个代码片段。

```
<?php $postnum++; if($postnum%5 == 0) { ?>
YOUR AD CODE HERE
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:57:24.793

您可以计算通过的帖子数量，然后再决定：

```
$postnum++;
if ($postnum == 3 || $postnum == 5 || $postnum == 7) {
    echo 'foo';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:16:16.920

详细阐述 cweiske 的回答：

在 endwhile 之前插入

```
 <?php $postnum++;
    if ($postnum == 4) { ?>

            <div class="block"><h2>Blog</h2></div>

    <?php } 
        if ($postnum == 6) { ?>

            <div class="block"><h2>References</h2></div>

    <?php }
        if ($postnum == 9) { ?>

            <div class="block"><h2>Meet the team</h2></div>

    <?php }; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T13:02:19.940

基本上你想做的就是这个。

在循环开始之前，将一个计数器变量初始化为 0。

每次循环成功找到帖子时，增加变量。

现在，每个循环，您都会知道显示了多少帖子。

因此，在适当的位置，您检查计数器以查看它是否匹配 3 5 或 7。如果匹配，则显示正确的块。

# html - 缓存清单文件中的更改

> ID：11902075
> 
> 赞同：3
> 
> 时间：2012-08-10T12:52:52.970
> 
> 标签：html

每当缓存清单文件发生更改（即资源更改）时，我是否需要在服务器上重新部署我的 Web 应用程序，或者我是否可以动态更新文件，即是否有任何方法可以在服务器运行时动态更新文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T02:23:24.627

假设您正在讨论离线 Web 应用程序的 HTML5 缓存清单——当您修改缓存清单文件时，清单中列出的所有资产在下次访问时将重新下载到客户端浏览器。无法选择性地更新缓存中的单个文件。不幸的是，要么全有，要么全无。

另外，我发现包含 的文件会自动缓存，即使它没有在清单中列出。当清单更改时，此文件将被替换，但仅在加载后...因此实际上需要额外刷新才能查看更改。如果缓存更新，我已经看到了各种 JavaScript 黑客来强制重新加载。

[我在http://gregsramblings.com/2012/05/28/html5-application-cache-how-to/](http://gregsramblings.com/2012/05/28/html5-application-cache-how-to/)上写了一篇关于 html5 应用程序缓存和清单文件各个方面的相当广泛的博客文章

# gcc - 如何将 gtk 设置为 c/c++ netbeans IDE？

> ID：11902077
> 
> 赞同：2
> 
> 时间：2012-08-10T12:52:57.307
> 
> 标签：gcc, netbeans, gtk

我想在 Ubuntu 的 Netbeans（6.9 版）中编写 GTK+ 程序。现在我可以通过 gcc 编译器编译 GTK+ 程序了。但是在 Netbeans IDE 中编写程序时，我无法构建程序。编译器向我发送此错误：

```
main.cpp:9:17: fatal error: gtk/gtk.h: No such file or directory' 
```

我在谷歌中搜索了这个错误并在[这个](http://zetcode.com/articles/netbeanscdevelopment/)网站上通过了步骤，但它仍然不起作用。我还通过以下步骤来解决我的问题：

1.  将 ProjectProperties/Build/C(C++) 编译器/附加选项设置为`pkg-config --cflags gtk+-2.0`
2.  将 ProjectProperties/Build/Linker/Additional Options 设置为`pkg-config gtk+-2.0 --libs`
3.  将 ProjectProperties/Build/C(C++) Compiler/Include Directories 和 Tools/Options/cc++ /Code 辅助添加到以下标题：

    ```
    /usr/include/atk-1.0
    /usr/include/pango-1.0
    /usr/include/gio-unix-2.0/
    /usr/include/glib-2.0
    /usr/lib/x86_64-linux-gnu/glib-2.0/include
    /usr/include/freetype2
    /usr/include/libpng12
    /usr/include/gtk-2.0
    /usr/lib/gtk-2.0/include
    /usr/include/cairo
    /usr/include/gdk-pixbuf-2.0
    /usr/include/pixman-1 
    ```

这些步骤不能解决我的问题。IDE 还在`#include <gtk/gtk.h>`代码行中画了一条黄线。我该如何解决我的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T05:26:04.183

在 Netbeans 中设置 C GTK+ 项目

1.  创建一个 C 项目（不是 C++）。
2.  打开项目属性窗口。
3.  转到“构建-> C 编译器”。
4.  在“包含目录”中，添加 GTK+ 的所有路径包含要求：

    （假设根在“C:/libs/c++/gtk”中）：

    C:/libs/c++/gtk/include;C:/libs/c++/gtk/include/atk-1.0;C:/libs/c++/gtk/include/cairo;C:/libs/c++/gtk/include/ fontconfig;C:/libs/c++/gtk/include/freetype2;C:/libs/c++/gtk/include/gail-1.0;C:/libs/c++/gtk/include/gdk-pixbuf-2.0;C:/ libs/c++/gtk/include/gio-win32-2.0;C:/libs/c++/gtk/include/glib-2.0;C:/libs/c++/gtk/include/gtk-2.0;C:/libs/c++ /gtk/include/libpng14;C:/libs/c++/gtk/include/pango-1.0;C:/libs/c++/gtk/include/pixman-1;C:/libs/c++/gtk/lib;C: /libs/c++/gtk/lib/glib-2.0/include;C:/libs/c++/gtk/lib/gtk-2.0/include

5.  在“附加选项”中，设置：

    $$(pkg-config --cflags --libs gtk+-2.0)

6.  转到“构建 - >链接器”。

7.  在“附加库目录”中，设置与第 4 点相同的值（“包含目录”内容）。
8.  在“附加选项”中，设置与第 5 点相同（“构建 -> C 编译器 -> 附加选项”内容）。

在此之后，您在 Netbeans 中的 GTK+ 项目应该是可编译/可运行的。在 Windows 7、Netbeans 7.3 中工作。

# javascript - 从 HTML 页面插入 XML

> ID：11902081
> 
> 赞同：0
> 
> 时间：2012-08-10T12:53:11.803
> 
> 标签：javascript, jquery, html, xml

我需要将示例数据插入 SQl 服务器。但我应该只使用 HTML、Javascript、JQuery、Ajax、XML。我不能使用 asp.net 或 php 编程语言，因为我不会在这个项目中使用 IIS。

有什么选择吗？

嗨，可以从 XML 页面连接到 SQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:57:11.577

您需要有一个服务器端页面来处理您的 ajax 请求，它将读取来自 ajax 请求的数据并发送到数据库。

如果您不想使用 IIS，可以将 PHP 视为在服务器上运行的服务器页面`Apache`。

# wcf - WCF 流/消息大小

> ID：11902091
> 
> 赞同：1
> 
> 时间：2012-08-10T12:53:50.783
> 
> 标签：wcf

我有一个流式 WCF 服务。在一次操作中，我收到一个文件，用于上传。如果我尝试做这样的事情

```
request.FileContent.Length 
```

然后我收到一个 OperationNotSupported 异常。没关系。但是我怎么能在不完全传输文件的情况下获得文件大小呢？我知道我可以将这些信息与呼叫一起作为标头发送，但我不想这样。

如果 WCF 能够通过 maxReceiveMessageSize 限制请求大小。如何使用相同的信息来检查消息/流大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:05:12.867

一般来说，如果不读取所有字节流并计算字节数，您将无法知道字节流的大小，除非流的开头有数据告诉您整个流中有多少字节，或者其他一些输出-of-band 方式来传达流的长度，例如在 WCF 消息头中。如果您想在不读取流的情况下知道大小，则必须使用 Header 方法。

WCF maxReceiveMessageSize 通过计算接收到的字节数并在超出限制时抛出异常来工作......它也不知道流长度，并且不能在没有先读取的情况下预先阻止接收消息最大允许字节数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:37:16.273

> 但是我怎么能在不完全传输文件的情况下获得文件大小呢？我知道我可以将这些信息与呼叫一起作为标头发送，但我不想这样。

您将不得不首先将字节流的大小发送到管道中，别无他法。（如果有一些内置的方式那就是它无论如何都会做的）

将其添加到流中不会增加太多复杂性：

```
var bytes = File.ReadAllBytes("somefile.txt");
stream.Write(BitConverter.GetBytes((Int32)bytes.Length), 0,  4);
stream.Write(bytes, 0, bytes.Length); 
```

然后在读取流时在另一边：

```
byte[] fileLengthBytes =new byte[4];
stream.Read(fileLengthBytes, 0, 4);
int length = BitConverter.ToInt32(fileLengthBytes, 0);
//you know the size of the file now, log it or show the user
var fileBytes = new byte[length];
stream.Read(fileBytes, 0, fileBytes.Length); 
```

这只是一个*示例*`byte[]`-如果您的流很大，您可能不想创建缓冲区。

# mobile - wordpress 主题切换引发小部件错误

> ID：11902098
> 
> 赞同：0
> 
> 时间：2012-08-10T12:54:22.080
> 
> 标签：mobile, widget, wordpress-theming

我正在为 wordpress 网站创建两个主题。一种用于桌面用户，一种用于移动用户。我正在使用一个简单的插件（“移动主题切换”）来检测移动设备并切换到移动主题。

我在移动主题中注册了一些小部件区域，以便在页脚区域放置一些带有图像的链接。

还通过激活移动主题将小部件分配给这些小部件区域。

当我激活桌面主题并在移动设备中打开站点时，移动主题已激活，但页脚小部件未出现。

有没有人知道如何解决这个问题？

我注意到的另一件事是，当我从管理面板激活移动主题并在移动设备中打开该网站时，它工作正常并显示页脚小部件。

提前致谢。

这是该插件切换主题的代码。

```
add_filter('stylesheet', 'getTemplateStyle');
add_filter('template', 'getTemplateStyle');

function getTemplateStyle(){
    $mobiletheme =  get_option('mobiletheme');
    $themes = get_themes();
    foreach ($themes as $theme_data) {
      if ($theme_data['Name'] == $mobiletheme) {
          return $theme_data['Stylesheet'];
      }
    }   
} 
```

# php - symfony2 中的 var_dump 数据过多

> ID：11902099
> 
> 赞同：105
> 
> 时间：2012-08-10T12:54:30.070
> 
> 标签：php, debugging, doctrine-orm, symfony-2.1

我有大约 40 个实体和许多双向关系。每当我使用 var_dump($user) 或任何实体时，我的浏览器都会加载太多的数组和变量数据，然后它就崩溃了。

我想知道什么问题。

数据插入正常。我可以在生产中引起问题吗？

* * *

## 回答 #1

> 赞同：226
> 
> 时间：2012-08-11T10:28:27.460

将**var_dump()替换为**[Doctrine Common](https://www.doctrine-project.org/api/common/latest/Doctrine/Common.html)提供的调试方法**[dump()](https://www.doctrine-project.org/api/common/latest/Doctrine/Common/Util/Debug.html)**。

```
\Doctrine\Common\Util\Debug::dump($user); 
```

它适用于单个对象和 Doctrine 集合，并且应该防止浏览器显示您遇到的问题。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-06-28T08:25:08.917

格式良好：

```
echo '<pre>';
\Doctrine\Common\Util\Debug::dump($user, $recurciveLevelToDisplay);
echo '</pre>'; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-11-13T00:08:45.710

简单易行的例子。

```
var_dump(serialize($Object)); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-06-14T08:42:50.870

问题在于，在双向关系中，两个实体之间都有一个链接，因此在显示 entity1 时，var_dump 还必须打印 entity2 的所有属性，其中包括 entity1 本身给你一个循环。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-12-06T07:37:26.483

**Symfony < 2.6**

您可以使用`\Doctrine\Common\Util\Debug::dump($variable, $depth);`它显示没有代理信息的原则输出。

**Symfony > 2.6**

如果您使用 symfony 2.6 或更高版本，我强烈建议您使用`dump()`. 它显示格式良好且彩色的输出，您可以动态扩展/隐藏行。 [![在此处输入图像描述](../Images/f2edc1f7d64db4aeab06171352637350.png)](https://i.stack.imgur.com/W9A2d.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-09-17T17:53:15.000

get_object_vars() 也改进了可视化。

```
echo "<pre>";
\Doctrine\Common\Util\Debug::dump(get_object_vars($user)); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-04-30T02:17:19.460

使用 Symfony 2.6，您现在可以在控制器中使用 dump($var) 并在 twig 中使用 {{ dump(var) }}。

确保将其添加到您的 AppKernal.php 文件的 array('dev', 'test') 部分。

```
$bundles[] = new Symfony\Bundle\DebugBundle\DebugBundle(); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-01-28T13:34:47.910

使用 dump($user) 你可以在 Symfony Profiler 中看到完美的结果！祝你好运

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-01-10T12:31:17.147

只需使用 echo serialize($user);

# c# - 通过 WCF 流上传文件，图像不可见

> ID：11902102
> 
> 赞同：0
> 
> 时间：2012-08-10T12:54:40.560
> 
> 标签：c#, wcf, image, rest, stream

任何人都可以帮助解决我遇到的一个小问题，我有 WCF Rest Based Service，它具有可以接受流的功能，这将用于将图像/音频/视频上传到服务器，然后将它们存储在服务器上的某个地方。

测试和图像，它似乎工作，我在客户端选择图像，几秒钟后图像出现在服务器上预期的位置，但是当我尝试在 Windows 图片查看器（或任何图像查看器），我得到“没有可用的预览”，并且没有要查看的图像。

我假设这是因为我没有从流中正确地重新创建文件。

这是 WCF Rest Service 上的方法

```
 public void PutFileInFolder(int eid, Stream fileContents)
    {
        try
        {

            byte[] buffer = new byte[32768];
            MemoryStream ms = new MemoryStream();
            int bytesRead = 0;
            int totalBytesRead = 0;

            do
            {
                bytesRead = fileContents.Read(buffer, 0, buffer.Length);
                totalBytesRead += bytesRead;

                ms.Write(buffer, 0, bytesRead);
            } while (bytesRead > 0);

            //now have file in memorystream

            //save the file to the users folder 
            FileStream file = new FileStream(@"C:\bd_sites\ttgme\wwwroot\Evidence\{" + ed.LearnerID + @"}\" + ed.EvidenceFileName, FileMode.Create, System.IO.FileAccess.Write);
            byte[] bytes = new byte[ms.Length];
            ms.Read(bytes, 0, (int)ms.Length);
            file.Write(bytes, 0, bytes.Length);
            file.Close();
            ms.Close();

        }
        catch (Exception ex)
        {
            return;
        }
    } 
```

这是发送文件/图像的客户端功能

```
 private void PostFile(EvidenceObject eo)
    {
        try
        {
            // Create the REST request. 
            string url = ConfigurationManager.AppSettings["serviceUrl"];
            string requestUrl = string.Format("{0}/PutFileInFolder/{0}", 1001);

            HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(requestUrl);
            request.Method = "POST";
            request.ContentType = "text/plain";

            byte[] fileToSend = File.ReadAllBytes(txtFileName.Text);
            request.ContentLength = fileToSend.Length;

            using (Stream requestStream = request.GetRequestStream())
            {
                // Send the file as body request. 
                requestStream.Write(fileToSend, 0, fileToSend.Length);
                requestStream.Close();
            }

            using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
                Console.WriteLine("HTTP/{0} {1} {2}", response.ProtocolVersion, (int)response.StatusCode, response.StatusDescription);

            MessageBox.Show("File sucessfully uploaded.", "Upload", MessageBoxButton.OK, MessageBoxImage.Information);
            this.DialogResult = true;
        }
        catch (Exception ex)
        {
            MessageBox.Show("Error during file upload: " + ex.Message, "Upload", MessageBoxButton.OK, MessageBoxImage.Error);
        } 

    } 
```

也刚刚测试了一个视频文件，原始文件播放愉快，然后当我通过服务上传它时，在服务器上创建的文件不会播放。

我确信我正在做的事情真的很愚蠢，但任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T23:18:43.907

问题是我写入文件流的方式，我实际上并没有传递文件的字节，而是使文件大小相同但基本上没有原始文件内容的新字节。

这是对代码的更改

```
//FileStream file = new FileStream(@"C:\bd_sites\ttgme\wwwroot\Evidence\{" + ed.LearnerID + @"}\" + ed.EvidenceFileName, FileMode.Create, System.IO.FileAccess.Write);
//byte[] bytes = new byte[ms.Length];
////ms.Read(buffer, 0, (int)ms.Length);
//file.Write(bytes, 0, bytes.Length);
//file.Close();
//ms.Close();

using (FileStream fs = File.OpenWrite(@"C:\bd_sites\ttgme\wwwroot\Evidence\{" + ed.LearnerID + @"}\" + ed.EvidenceFileName))
{
    ms.WriteTo(fs);
    fs.Close();
    ms.Close();
} 
```

# python - Django 根据模型更新文件上的 var

> ID：11902103
> 
> 赞同：1
> 
> 时间：2012-08-10T12:54:52.467
> 
> 标签：python, django-models

我有一个文件，其内容取决于模型。奇怪的事情：更新模型的数据时，它不会直接影响该文件上的变量！我被迫重新启动我的开发服务器以获取新数据。

作为解决方案，我使用“重新加载”重新加载包含相关变量的模块！我认为这不是这样做的好方法（每次更新后重新加载）才能看到数据。

有什么方法可以直接更新和查看数据而无需重新加载？

这是我的代码： http: [//pastebin.com/97BPqh0L](http://pastebin.com/97BPqh0L)我在重新加载部分有评论

```
# parametres/conf.py

from .models import ConfigApp

if ConfigApp.objects.exists():
     config = ConfigApp.objects.all()[0]
else:     config = None

EMPLOYE_BY_COMPAGNY = config.user_compagnie if config else 7

ANNONCES_LIFETIMES = config.annonce_days if config else None

IMAGE_SIZE = config.taille_image*1024 if config else 102400

#####################################################"

# compte/admin.py

from societe.models import Compagnie
from .forms import EmployeAdminForm,NewEmployeAdminForm
from django.contrib import admin
from django.contrib.auth.models import User,Group
import parametres.conf

class EmployeAdmin(admin.ModelAdmin):
     list_display = ['user','identite','email','societe','is_active']
     list_filter = ('is_active','societe')
     form = NewEmployeAdminForm
     search_fields = ("user__username",)
     user_obj = None

     def has_add_permission(self,request):
          reload( parametres.conf) #here reloading

          if request.user.is_superuser or request.user.groups.filter(name='admin').exists():
                    return True
          elif request.user.groups.filter(name='client').exists():
                    if Gestionnaire.objects.filter(employe__user=request.user,is_active=True).exists():
                         employe = request.user.employe_set.all()[0]
                         if Employe.objects.filter(societe=employe.societe).count() >= parametres.conf.EMPLOYE_BY_COMPAGNY:
                              return False
                         return True
          return False 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:32:09.617

解决这个问题的唯一方法是首先不使用全局状态。创建一个使用属性每次从适当位置提取数据的类，如果需要，可以选择实现缓存。

# java - 为什么java即使不支持指针也会引发空指针异常？

> ID：11902104
> 
> 赞同：2
> 
> 时间：2012-08-10T12:54:54.693
> 
> 标签：java

我一直有很大的好奇心。

我写了一些 java 代码，它显示空指针异常。我很想知道为什么java即使不支持指针也会给出Null Pointer Exception？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T12:56:40.613

没有指针算术这一事实并不意味着该语言中没有使用指针。当涉及到 Java 时，有*很多*指针，你只需跟随引用`.`而不是 with `->`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:58:53.200

`Object references`只不过是指针，但它们并不像`Pointers`. 看看[这个](https://softwareengineering.stackexchange.com/questions/141834/how-is-a-java-reference-different-from-a-c-pointer)区别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T13:03:39.923

Java*确实*支持指针（每次有 a`.`或 a时都会使用指针`[`）。

它不支持指针*算术*- 即使用数学将指针操作到另一个指针的能力。

为了向转换过的 C/C++ 程序员指出这一点，他们没有沿用 C 名称，而是将其命名为其他名称。在 JVM 级别，一切都是指针，但由于 Java 程序员仅在使用引用时才看到这一点，因此异常命名不当。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-11T03:06:04.387

Java 确实有指针。它们可以有两种值：(a)对对象的*引用*，或 (b) null。这是规范中使用的语言。

然而，Java 指针更类似于 Pascal 指针，而不是 C 指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T12:56:48.707

它是 java 的“C”遗产的遗留物。这也是行业的说法。

# c# - List vs ArrayList vs Dictionary vs Hashtable vs Stack vs Queue？

> ID：11902107
> 
> 赞同：66
> 
> 时间：2012-08-10T12:55:11.110
> 
> 标签：c#, collections

我们可以使用其中任何一个（包括 List、ArrayList、Dictionary、Hashtable、Stack、Queue）来保存值或对其他对象的引用作为集合。

但是，我的问题是什么时候使用哪个？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-08-10T13:03:54.573

## 列表

列表允许重复项，可以通过索引访问，并且支持线性遍历。

*   **ArrayList** - 不支持泛型类型的基于数组的列表。它不强制执行类型安全，通常应避免使用。

*   **List** - 支持泛型类型并强制类型安全的数组列表。由于它是不连续的，它可以在不为整个列表重新分配内存的情况下增长。这是比较常用的列表集合。

## 哈希

哈希是查找，您可以在其中为列表中的每个项目提供一个“键”，稍后将用于检索它。将哈希想象为表索引，您可以在其中提出诸如“我将通过*此字符串值查找**此*对象。不允许重复键。

 **   **HashTable** - 一个基本的键值对映射，其功能类似于索引列表。

*   **Dictionary** - 支持泛型类型并强制类型安全的哈希表。

## 队列

队列控制如何访问列表中的项目。您通常在特定方向（从前面或后面）从队列中推送/弹出记录。中间不用于随机访问。

*   **Stack** - 一个 LIFO（后进先出）列表，您可以在其中推送/弹出记录。

*   **队列**- 一个 FIFO（先进先出）列表，您可以在其中将记录推送到顶部并将它们从底部弹出。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-10T13:05:21.980

*   [列表](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)可以保存重复的对象

*   [ArrayList](http://msdn.microsoft.com/en-us/library/system.collections.arraylist.aspx)只是为了与不存在 IList 的旧版本框架兼容

*   [字典](http://msdn.microsoft.com/en-us/library/xfhwa508%28v=vs.80%29.aspx)用于存储键/值对。您不能有重复的密钥。

*   [Hashtable](http://msdn.microsoft.com/en-us/library/system.collections.hashtable.aspx)基本上是一个列表，没有重复的可能性（在某些情况下性能更好）

*   [堆栈](http://msdn.microsoft.com/en-us/library/3278tedw.aspx)按添加的顺序存储对象（通过`Push()`），当您检索对象时（通过`Pop()`），它会以 LIFO 方式从堆栈中删除。

*   [队列](http://msdn.microsoft.com/en-us/library/7977ey2c.aspx)与堆栈非常相似，只是它是先进先出。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-10T13:17:04.177

以下是它们的一些用途。

**清单：**如果您只想要一个清单而不关心任何重复项，即人员清单、购物清单、生活中要做的事情清单。

**队列：**如果你想模拟一个队列，例如，在医院你有一个队列和优先级队列（在急诊科）。分诊将确定谁处于危急状态并需要接受治疗。

另一个例子是购物队列，排队的第一个人“通常”是第一个结账的人。

**堆栈：**在您将值传递给函数/方法时，在您的内部存储器中使用它们来推送和弹出值。

另一个有趣的用途是，在视频游戏库存方法中，您可以在其中拿起一个项目（推）到堆栈上，然后从堆栈中放下一个项目（弹出）。

**哈希/字典：**这些通常用于数据库中，用于查找和索引。

根据您要模拟的内容，我同意其他人的观点，阅读数据结构很方便。一本书有帮助，但互联网也有丰富的信息。*

# android - 单击列表视图中的项目时不会进入下一个活动。

> ID：11902108
> 
> 赞同：0
> 
> 时间：2012-08-10T12:55:17.067
> 
> 标签：android, listviewitem, sqlite

我是 android 新手，使用 sqlite 在数据库中插入数据，并在自定义列表视图中使用这些数据。当我在下一个活动中使用编辑按钮编辑数据时会出现问题显示行字符串但是，在每一行编辑中但显示第一行字符串的数据..通过图像你可以很容易地理解： ![在此处输入图像描述](../Images/ecbd0978d5919c04b87d83a47a8b794f.png)

当我点击编辑时，我想要新活动页面中的行名。当我按下删除时删除行..帮帮我..

编辑列表 java 文件

```
public class EditLIST extends Activity {

    private AndroidSQLite mySQLiteAdapter ;
final static String EXTRA_MESSAGE = "edit.list.message";
 public void onClick (View view) {

     Intent intent = new Intent (this,display.class);
     TextView textView=(TextView) findViewById(R.id.textView1);
     String message=textView.getText().toString();

     //data.putString("thetext",text);
     intent.putExtra(EXTRA_MESSAGE,message);
     startActivity(intent);
}
  @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_edit_list);
        ListView listContent = (ListView)findViewById(R.id.listView1);

        mySQLiteAdapter = new AndroidSQLite(this);
        mySQLiteAdapter.openToWrite();
      mySQLiteAdapter.deleteAll();

       mySQLiteAdapter.insert("umesh");
       mySQLiteAdapter.insert("kalpesh");
       mySQLiteAdapter.insert("manish");

        mySQLiteAdapter.close();

        mySQLiteAdapter = new AndroidSQLite(this);
        mySQLiteAdapter.openToRead();

        Cursor cursor = mySQLiteAdapter.queueAll();
        startManagingCursor(cursor);

        String[] from = new String[]{AndroidSQLite.KEY_FNAME};
        int[] to = new int[]{R.id.textView1};

        SimpleCursorAdapter cursorAdapter =
         new SimpleCursorAdapter(this, R.layout.button, cursor, from, to);

                  listContent.setAdapter(cursorAdapter);

    }

    } 
```

AndroidSQLite.java 文件

包edit.list；

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteDatabase.CursorFactory;

public class AndroidSQLite {

public static final String MYDATABASE_NAME = "abncd";
public static final String MYDATABASE_TABLE = "zxc";
public static final int MYDATABASE_VERSION = 1;
public static final String KEY_ID = "_id";
public static final String KEY_FNAME = "FNAME";

//create table MY_DATABASE (ID integer primary key, Content text not null);
private static final String SCRIPT_CREATE_DATABASE =
"create table " + MYDATABASE_TABLE + " ("
+ KEY_ID + " integer primary key autoincrement, "
+ KEY_FNAME + " text not null);";

private SQLiteHelper sqLiteHelper;
private SQLiteDatabase sqLiteDatabase;

private Context context;

public AndroidSQLite(Context c){
context = c;
}

public AndroidSQLite openToRead() throws android.database.SQLException {
sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
sqLiteDatabase = sqLiteHelper.getReadableDatabase();
return this;
}

public AndroidSQLite openToWrite() throws android.database.SQLException {
sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
sqLiteDatabase = sqLiteHelper.getWritableDatabase();
return this;
}

public void close(){
sqLiteHelper.close();
}

public long insert(String fname){

ContentValues contentValues = new ContentValues();

contentValues.put(KEY_FNAME, fname);

return sqLiteDatabase.insert(MYDATABASE_TABLE, null, contentValues);
}

public int deleteAll(){
return sqLiteDatabase.delete(MYDATABASE_TABLE, null, null);
}

public Cursor queueAll(){
String[] columns = new String[]{KEY_ID, KEY_FNAME};
Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE, columns, 
  null, null, null, null, null);

return cursor;
}

public class SQLiteHelper extends SQLiteOpenHelper {

public SQLiteHelper(Context context, String name,
  CursorFactory factory, int version) {
 super(context, name, factory, version);
}

@Override
public void onCreate(SQLiteDatabase db) {
 // TODO Auto-generated method stub
 db.execSQL(SCRIPT_CREATE_DATABASE);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
 // TODO Auto-generated method stub

}

}

} 
```

显示.java

```
public class display extends Activity {
     public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.display);

                // Get the message from the intent
                Intent intent = getIntent();
                String message = intent.getStringExtra(EditLIST.EXTRA_MESSAGE);

                // Create the text view
                EditText editText = new EditText(this);
                editText.setTextSize(40);
                editText.setText(message);

                // Set the text view as the activity layout
                setContentView(editText);
                }
     public boolean onCreateOptionsMenu (Menu menu)
        {
            MenuInflater inflater = getMenuInflater();
            inflater.inflate(R.menu.activity_edit_list,menu);
            return true;
        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:10:16.140

我不确定我是否理解正确。据我了解，当您单击编辑时，无论您实际单击了哪个项目，您总是从第一个项目中获取数据？在那种情况下，我认为问题就在这里：

```
TextView textView=(TextView) findViewById(R.id.textView1); 
```

您正在整个列表中搜索 R.id.textView1 并且只返回第一项。您只需要在单击的项目内进行搜索：

```
TextView textView=(TextView) view.findViewById(R.id.textView1); 
```

其中 view 是 onClick 函数的参数。

正如我所说，我不确定这是否是问题，但它看起来像一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T08:26:41.857

我认为您的删除代码有问题，就像..

public int delete_byID(int id) {
sqLiteDatabase.delete(MYDATABASE_TABLE,KEY_ROWID + "=" +1,null) ; 返回-1；}

这将从表中删除 id 号 1

# signals - 重载的 pyside 信号 (QComboBox)

> ID：11902109
> 
> 赞同：6
> 
> 时间：2012-08-10T12:55:26.323
> 
> 标签：signals, overloading, pyside, qcombobox

使用 QComboBox 和 pyside，我知道如何连接信号并使用它发送的索引。但是 unicode 参数呢？如果我更喜欢连接到想要组合框中的字符串的东西，这可能吗？

来自： http: [//www.pyside.org/docs/pyside/PySide/QtGui/QComboBox.html#PySide.QtGui.QComboBox](http://www.pyside.org/docs/pyside/PySide/QtGui/QComboBox.html#PySide.QtGui.QComboBox)

所有三个信号都存在于两个版本中，一个带有 PySide.QtCore.QString 参数，一个带有 int 参数。

信号

```
def activated (arg__1)
def activated (index) 
```

PySide.QtGui.QComboBox.activated(index) 参数： index – PySide.QtCore.int

PySide.QtGui.QComboBox.activated(arg_ *1) 参数：arg* _1 – unicode

编辑：一些代码。

```
le = ComboBoxIpPrefix()
le.currentIndexChanged.connect(lambda x....) 
```

这段代码给了我索引。问题是如何获取文档中提到的 unicode 字符串。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-10T13:24:57.520

我不明白你的问题到底是什么。

有两个版本的`QComboBox.activated`信号。[一个](http://qt-project.org/doc/qt-4.8/qcombobox.html#activated)为您提供所选项目的索引，[另一个](http://qt-project.org/doc/qt-4.8/qcombobox.html#activated-2)为您提供其文本。

要在 PySide 中选择它们，请执行以下操作：

```
a_combo_box.activated[int].connect(some_callable)

a_combo_box.activated[str].connect(other_callable) 
```

第二行在 Python 2 中可能不会以这种方式工作，所以`str`用`unicode`.

请注意，我使用通用（C++）Qt 文档，因为 PySide 文档仍然很模糊：我`arg__1`到处都看到那些 s ......
“翻译”到 Python 应该不会太难。请记住，它`QString`变成了`str`（或`unicode`在 Python 2 中；顺便说一下，我喜欢让我的代码在所有版本的 Python 上工作，所以我通常在 Py3 和 Py2 中创建一个别名`text`类型`str`）`unicode`；`long`, `short`, 等变成`int`; `double`变成`float`; `QVariant`完全避免，它只是意味着可以在那里传递任何数据类型；等等...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-25T06:07:07.987

谢谢奥莱普里[平](https://stackoverflow.com/users/241039/oleh-prypin)！当我在 PySide 文档中遇到晦涩的 arg__1 时，您的回答对我有所帮助。

当我测试 combo.currentIndexChanged[str] 和 combo.currentIndexChanged[unicode] 时，每个信号都发送当前索引文本的 unicode 版本。

这是一个演示该行为的示例：

```
from PySide import QtCore
from PySide import QtGui

class myDialog(QtGui.QWidget):
    def __init__(self, *args, **kwargs):
        super(myDialog, self).__init__(*args, **kwargs)

        combo = QtGui.QComboBox()
        combo.addItem('Dog', 'Dog')
        combo.addItem('Cat', 'Cat')

        layout = QtGui.QVBoxLayout()
        layout.addWidget(combo)

        self.setLayout(layout)

        combo.currentIndexChanged[int].connect(self.intChanged)
        combo.currentIndexChanged[str].connect(self.strChanged)
        combo.currentIndexChanged[unicode].connect(self.unicodeChanged)

        combo.setCurrentIndex(1)

    def intChanged(self, index):
        print "Combo Index: "
        print index
        print type(index)

    def strChanged(self, value):
        print "Combo String:"
        print type(value)
        print value

    def unicodeChanged(self, value):
        print "Combo Unicode String:"
        print type(value)
        print value

if __name__ == "__main__":

    app = QtGui.QApplication([])
    dialog = myDialog()
    dialog.show()
    app.exec_() 
```

结果输出是：

```
Combo Index
1
<type 'int'>
Combo String
<type 'unicode'>
Cat
Combo Unicode String
<type 'unicode'>
Cat 
```

我还确认 basestring 会抛出错误`IndexError: Signature currentIndexChanged(PyObject) not found for signal: currentIndexChanged`。PySide 似乎区分`int`, `float`（它称为`double`）、`str`/ `unicode`（两者都变为`unicode`）和`bool`，但所有其他 python 类型都被解析为`PyObject`信号签名的目的。

希望对某人有所帮助！

# php - 下载 HTML 源代码而不是 CSV 文件

> ID：11902111
> 
> 赞同：0
> 
> 时间：2012-08-10T12:55:31.000
> 
> 标签：php

我有以下源代码（PHP）用于下载 CSV 文件

```
$file_name = date("YmdHis") . ".csv";

Header('Content-Type: text/csv');
Header("Content-disposition: attachment; filename=${file_name }");
Header("Content-type: application/octet-stream; name=${file_name }");

header('Pragma: 1');
header('Cache-control: private, max-age=60, pre-check=30');
session_cache_limiter('private_no_expire');  

$csv = $header.$contents;

if (mb_detect_encoding($csv) == 'SJIS-win') {
    $csv = mb_convert_encoding($csv, 'UTF-8', 'SJIS-win');
}
echo $csv;

exit; 
```

使用 $header 和 $contents 从数据库中读取。这个来源在 Firefox、IE 上运行良好，但我遇到了 Quihoo360（中国的浏览器称为：360 安全浏览器）的问题。它不是下载包含从数据库读取的内容的 CSV 文件，而是下载内容为显示页面的 HTML 源的 csv。

有人可以让我知道如何解决这个问题。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:57:31.933

而不是您的内容类型，请尝试将其设置为：

```
Content-Type: text/plain 
```

[查看内容类型](http://webdesign.about.com/od/multimedia/a/mime-types-by-content-type.htm)的良好列表。

编辑：在你的 PHP 中试试这个：

```
header('Content-Type: application/csv');
header('Content-Disposition: attachment; filename=example.csv');
header('Pragma: no-cache');
// echo out the csv file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:02:55.977

使用 content-type of`application/force-download`强制浏览器下载您的文件。我想这就是你所要求的，对吧？

# extjs - 无法使自定义网格过滤器工作

> ID：11902112
> 
> 赞同：0
> 
> 时间：2012-08-10T12:55:34.153
> 
> 标签：extjs, filter, grid

我想要做的是网格列中的过滤器选项。这是专栏：

```
{
        id: 'kleuren',
        text: 'Kleuren',
        sortable: true,
        filterable: true,
        minWidth: 60,
        flexible: 0,
        width: 60,
        filter: {
            type: 'list',
            store: kleuren
        },
        renderer: kleurenWeergave,
        dataIndex: 'kleuren'
    } 
```

对于商店/模型，我使用这个

```
kleurenStore = Ext.create('Ext.data.Store', {
    fields: ['id', 'text'],
    data: kleurenModel
});

 var kleurenModel = [
            ['rood', 'rood'],
            ['groen', 'groen'],
            ['blauw', 'blauw'],
            ['geel', 'geel']
            ] 
```

这是我现在的网格

```
 var grid = Ext.create('PersistantSelectionGridPanel', {
    autoscroll: true,
    region: 'center',
    store: allLoaded,
    multiSelect: false,
    stateful: true,
    features: [filtersFeature],
    loadMask: false,
    stateId: 'stateGrid',
    viewConfig: {
        stripeRows: true
    },
    columns: [{.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:06:18.857

你运行的是什么版本的 ExtJS？无法使用您发布的代码进行很多调试。

你可以发布你的网格代码吗？

您的 Grid 应该具有添加为配置的过滤器功能：

```
var filtersFeature = 
{
  ftype : 'filters',
  local : false,  // For Server Side Filtering
  encode : true
}; 
```

你的网格应该有一个配置选项

```
....
columns: defaultModel, 
loadMask: true,
features: [filtersFeature]  // To enable Filters
.... 
```

# javascript - 如何使用 Struts 1.3 和 javascript 创建动态表行

> ID：11902117
> 
> 赞同：0
> 
> 时间：2012-08-10T12:55:52.697
> 
> 标签：javascript, struts, actionform

我有一个联系人表，该表包含一个名字、一个姓氏和多个电话号码。所以我的模型类似于

```
 Contact {
    String firstName;
    String lastName;
    List phones;
    }

    Phone {
    String category; //home, work, mobile, etc
    String phoneNumber;
    } 

```

因此，它的网页将包含两个输入文本，分别是名字和姓氏，以及一个添加电话按钮。单击添加按钮时，它将再次为类别和电话号码生成两个输入文本，并为该行生成一个删除按钮。

我试过使用 indexed=true，它会生成一个类似的 html

```
<input type="text" name="phone[0].category" ... />
<input type="text" name="phone[0].phoneNumber" ... /> 
```

问题是，我不知道如何编写 javascript，因为如果用户单击添加按钮，我不知道当前索引是什么，如果用户单击删除按钮然后添加按钮，它将是什么索引？如果我缺少索引可以吗？就像是

```
<input type="text" name="phone[0].category" ... />
<input type="text" name="phone[0].phoneNumber" ... />
<input type="text" name="phone[3].category" ... />
<input type="text" name="phone[3].phoneNumber" ... /> 
```

注意：请考虑编辑场景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:20:14.907

这里的第一件事是使用好 indexed 和 logic:iterate 标签来生成代码。如果对此有疑问，请查看我给出的这个答案，它详细解释了如何在 struts 中使用索引属性：[索引和逻辑：迭代](https://stackoverflow.com/a/10247033/1251715)

然后，您必须考虑用户想要添加或删除行并正确更新索引以便 struts 能够在您提交表单时检索数据的场景。我曾经遇到过这个问题，我所做的是：

*   **添加时**：使用 javascript，找出表格的最后一行，并通过查看页面生成的代码，生成一个新的表格行，其中包含空内容，方括号内的索引。最后，添加到表中

    例子：

    一张桌子：

    ```
    <table><tr><td name='whatever[0].something'>asdf</td></tr>  
    <tr><td name='whatever[1].something'>asdf</td></tr>
    <tr><td name='whatever[2].something'>asdf</td></tr>
    </table> 
    ```

    要添加一行，请在 javascript 中创建它，如下所示：

    ```
    var newRow = '<tr><td name='whatever[3].something'>asdf</td></tr> 
    ```

    并将其附加到表中。

    *   **on del**：使用与上面相同的技术找出删除了哪一行（或相应的索引）。然后，编辑剩余行的索引，使其与后续行的元素顺序相匹配。

    例子：

    一张桌子：

    ```
    <table><tr><td name='whatever[0].something'>asdf0</td></tr>  
    <tr><td name='whatever[1].something'>asdf1</td></tr>
    <tr><td name='whatever[2].something'>asdf2</td></tr>
    </table> 
    ```

    假设您通过从 dom 中删除**asdf1来删除它。**然后，新表将如下所示：

    ```
    <table><tr><td name='whatever[0].something'>asdf0</td></tr>  
    <tr><td name='whatever[2].something'>asdf2</td></tr>
    </table> 
    ```

    现在我们必须更新索引，使其匹配正确的顺序，通过将第二个 td 的名称更改为索引为**1**，这样，表将恢复为 struts 索引格式：

    ```
    <table><tr><td name='whatever[0].something'>asdf0</td></tr>  
    <tr><td name='whatever[1].something'>asdf2</td></tr>
    </table> 
    ```

我希望它足够清楚。我显然无法编写所有的 js 函数，因为它们需要一些工作，但是有了这些信息，您可以自己编写。

# html - 离线html5的自我缓存网站

> ID：11902121
> 
> 赞同：0
> 
> 时间：2012-08-10T12:56:07.770
> 
> 标签：html, offline, offline-caching

我已经建立了一个 html5 库，它可以正常工作，但我需要帮助的是让应用程序检测用户是否在线，如果是，则在用户打开应用程序时更新 mainifest。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:59:34.010

首先，您需要确保清单文件未在清单文件中列出，因为即使用户在线，这也会阻止重新获取它。

完成此操作后，如果您设置它`cache-mode`，`prefer-online`它将在连接可用时重新获取页面。如果您只想更新清单，则不需要执行此步骤，只要连接不包含在自己的列表中，大多数用户代理都会在连接可用时重新获取清单。

您也可以使用 JavaScript API 强制它：

```
window.applicationCache.update() 
```

您可以[在此处查看此示例以及 JavaScript API 的更多详细信息](http://www.html5rocks.com/en/tutorials/appcache/beginner/)。

# c# - 我有一个以 AttachDbFilename 作为链接的连接字符串

> ID：11902127
> 
> 赞同：0
> 
> 时间：2012-08-10T12:56:29.380
> 
> 标签：c#, asp.net

我有一个 ASPNETDB 数据库来管理应用程序附带的角色和成员资格。嗯，它的形式是链接.. 像这样的东西

```
C:\PROGRAM FILES\MICROSOFT SQL SERVER\MSSQL.1\MSSQL\DATA\ASPNETDB.MDF 
```

当我在 web.config 文件中使用它时

```
<add name="ApplicationServices" connectionString="Data Source=something;Initial Catalog=[C:\PROGRAM FILES\MICROSOFT SQL SERVER\MSSQL.1\MSSQL\DATA\ASPNETDB.MDF];Integrated Security=True" providerName="System.Data.SqlClient"/> 
```

但是当我运行该应用程序时，我仍然收到错误消息：

```
System.Data.SqlClient.SqlException: Cannot open database "[C:\PROGRAM FILES\MICROSOFT SQL SERVER\MSSQL.1\MSSQL\DATA\ASPNETDB.MDF]" requested by the login. The login failed.
Login failed for user 'USER-PC\USER'. 
```

如何使用 ASPNETDB 的连接字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:23:55.683

数据源指向数据库服务器，初始目录是该服务器上的特定数据库。尝试这个：

在连接到本地 SQL Server Express 实例时附加数据库文件

> 服务器=.\SQLExpress;AttachDbFilename=c:\mydbfile.mdf;数据库=dbname; Trusted_Connection=是；

来自[http://www.connectionstrings.com/sql-server-2005](http://www.connectionstrings.com/sql-server-2005)

就个人而言，我不喜欢使用 .mdfs，但这不是重点。您使用的是 SQL Server Express 吗？您拥有的路径 (C:\PROGRAM FILES\MICROSOFT SQL SERVER\MSSQL.1) 不在我的机器上。我在 C:\PROGRAM FILES\MICROSOFT SQL SERVER\ 80、90、100 和 MSSQL.10.SQLEXPRESS 之后有 4 个文件夹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:02:43.230

可能是您缺少用户名和密码。像这样在连接字符串中添加用户 ID 和密码属性。

```
<add name="ApplicationServices" connectionString="Data Source=something;Initial Catalog=[C:\PROGRAM FILES\MICROSOFT SQL SERVER\MSSQL.1\MSSQL\DATA\ASPNETDB.MDF];Integrated Security=True" UserID = "UserName" Password="Your Password" providerName="System.Data.SqlClient"/> 
```

# post - 在 Heroku 上迁移到 Cedar 并丢失从 heroku.com 到 herokuapp.com 的 URL

> ID：11902128
> 
> 赞同：0
> 
> 时间：2012-08-10T12:56:29.707
> 
> 标签：post, heroku, cedar

我正在对 Heroku 上的主要生产应用程序进行几项重大改进

这包括：在开发中使用 PostgreSQL，升级到最新的 Rails，使用 Crane 迁移到专用数据库，以及使用 Thin 作为 Web 服务器。作为合乎逻辑的步骤，我想做的“最后”一件事是将我的应用程序升级到 Cedar 堆栈而不是 Bamboo。我已经按照大部分说明进行操作，并且拥有一个不错的“克隆”应用程序。

我想继续前进并使用这个新的雪松应用程序而不是竹子应用程序。

问题是这个应用程序的主要用途是作为后端为 iOS 应用程序提供 API 请求。这些请求的格式为：xxx.heroku.com/...

一开始就使用这个 url 可能是个坏主意，但这就是我们当前所有 iOS 用户无法更改的。

我可以找到一种方法来重命名我的雪松应用程序 xxx。问题是它将是 xxx.herokuapp.com 。我知道 heroku 上有一个自动重定向，但它似乎只适用于 GET 请求。所以我所有的 API 请求都不会返回我需要的 iOS 应用程序的 XML 响应。

有什么建议么 ？我以为我可以继续使用 xxx.heroku.app ，但我现在有点卡住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:27:48.510

简单的事情是用一个简单的应用程序替换您的竹应用程序，该应用程序将请求重定向到您的新 URL。

我建议永远不要将 heroku 域用作生产域 - 始终将您自己的域放在它们前面。

# border - 将 div 边框延伸到外包装？

> ID：11902133
> 
> 赞同：4
> 
> 时间：2012-08-10T12:57:01.623
> 
> 标签：border

[这是我的网站](http://www.kerrymkt.com)

目前仍在摆弄设计布局，有一个问题我无法完全解决。在我的标题上，我有一个红色边框底部，将其与主要内容分开。同样，在页脚我有一个红色的顶部边框来做同样的事情。有没有办法将边界扩展到 div 之外（因此在包装器之外，溢出可见）而不与其他元素冲突？我想配置布局，使其具有更多类似网格的设计。

```
#wrap {
width: 1000px;
background-color: #ffffff;
text-align:left;
margin: 0 auto 0 auto;
border-left: 1px solid #000000;
border-right: 1px solid #000000; }

#head{
background-color: #ffffff;
width: 1000px;
height: 159px;
border-bottom: 1px solid #ff0000; } 
```

有点像[这样](http://www.kerrymkt.com/wp-content/uploads/2012/08/Screen-shot-2012-08-10-at-13.53.00.png)？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T13:38:08.967

是的。您可以设置负边距，使 div 扩展到其父级之外，[如下所示](http://jsfiddle.net/taDpY/12/embedded/result/)。（我只做了标题，但你明白了）

小提琴中的解决方案使用烦人的 !important 来获得正确的样式 - 您可能想要重新组织您的 CSS 来解决这个问题并使您的代码更易于维护，请参阅[这篇文章](http://css-tricks.com/specifics-on-css-specificity/)。

# java - 如何在检票口中进行 weblogic 表单身份验证

> ID：11902134
> 
> 赞同：1
> 
> 时间：2012-08-10T12:57:03.123
> 
> 标签：java, authentication, weblogic, wicket, j-security-check

我想在检票口中进行 weblogic 表单验证，但我不知道如何创建登录页面。我遵循了本教程，其中 jsp 中的示例：

[http://docs.oracle.com/cd/E13222_01/wls/docs100/security/thin_client.html#wp1057581](http://docs.oracle.com/cd/E13222_01/wls/docs100/security/thin_client.html#wp1057581)

我在检票口中创建了类似的表格，但我不知道按下提交按钮时应该做什么。有一些名为“j_security_check”的动作，但我不知道我应该如何在 java 和 wicket 中实现它

更新：我正在使用 weblogic 10.something 并且我不能使用最新的我尝试创建自己的 impelemtation 但是当我尝试使用登录检票口抛出异常时：

```
java.lang.NoSuchMethodError: javax/servlet/http/HttpServletRequest.login(Ljava/lang/String;Ljava/lang/String;)V. 
```

我应该在我的 web.xml 中添加 servlet 吗？

更新2：

我在我的项目中的答案中添加了表单，当我按下密码错误的提交按钮时，会出现 url: `http://localhost:8080/application/j_security_check`with status 404 not found。当我添加正确的通行证时，有 url: 也`http://localhost:8080/application/admin`有状态 404

网页.xml：

```
<security-constraint>

    <web-resource-collection>
        <web-resource-name>application</web-resource-name>
        <url-pattern>/admin</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>a</role-name>
    </auth-constraint>
</security-constraint>

<security-role>
    <role-name>a</role-name>
</security-role>

<login-config>
    <auth-method>FORM</auth-method>
    <form-login-config>
        <form-login-page>/login</form-login-page>
        <form-error-page>/login</form-error-page>
    </form-login-config>
</login-config> 
```

更新 3：我找到了这个例子：[https://cwiki.apache.org/WICKET/servlet-container-authentication.html](https://cwiki.apache.org/WICKET/servlet-container-authentication.html)我想要的在哪里，但使用的是 wicket 1.4，但我使用的是 wicket 1.5。并且有很多未知的类，但也许有人可以将其重写为 wicket 的 1.5 版本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:25:45.517

```
1\. You missed security realm name in your web.xml
<login-config>
<auth-method>FORM</auth-method>
<realm-name>myrealm</realm-name>
<form-login-config>
.....
</login-config>
The realm-name must match the security realm setup in Weblogic (myrealm is the WebLogic default)

2\. You missed the weblogic.xml
in your web.xml you defined one security role called <a>, you need map Weblogic Group to the role, such as 
<?xml version="1.0" encoding="UTF-8"?>
<weblogic-web-app xmlns="http://www.bea.com/ns/weblogic/90">    
<security-role-assignment>
<role-name>a</role-name>
<principal-name>weblogic</principal-name>
</security-role-assignment>
</weblogic-web-app>
Please put webloigc.xml in WEB-INF folder 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T15:53:11.910

I don't know if your project is already at an advanced stage, or if it is hard to migrate/use your code to/in another wicket project - I suggest you use an existing framework to do that, like [Shiro](http://shiro.apache.org/index.html) ([http://shiro.apache.org/index.html](http://shiro.apache.org/index.html)) which is very cool.

> Apache Shiro is a powerful and easy-to-use Java security framework that performs authentication, authorization, cryptography, and session management. With Shiro’s easy-to-understand API, you can quickly and easily secure any application – from the smallest mobile applications to the largest web and enterprise applications.

If you want to use this in Wicket I suggest you pickup the [55minutes project](https://github.com/55minutes/fiftyfive-wicket) ([https://github.com/55minutes/fiftyfive-wicket](https://github.com/55minutes/fiftyfive-wicket)), which works with Shiro.

> The 55 Minutes Wicket project is a set of tools and libraries we use for enhancing our productivity with the Apache Wicket Java web framework. We've made our code available as open source to share with the Wicket community.

In 55minutes login screens are already built, and all you have to do is define the access configurations to the database where the login info/tables are at. Hope it helps. Regards

# ember.js - 检测 Ember.Object 是否脏的最佳方法

> ID：11902140
> 
> 赞同：3
> 
> 时间：2012-08-10T12:57:16.900
> 
> 标签：ember.js

我有一个 ember 对象，我想知道它是否处于脏状态。

```
var App.Post = Ember.Object.create({
   title: "Test",
   isDirty: false
});
App.Post.set("title", "Test2");
App.Post.get("isDirty") // Should === true 
```

目前，我尝试重载对象的集合

```
App.Post = Ember.Object.create({
   set: function(path, value) {
       this._super(path, value);
       this._super("isDirty", true);
   }
}) 
```

它在我直接调用 myObject.set 时有效，但在使用 embers 绑定时似乎没有使用该 set 函数。我添加了日志，并且常规的 emberjs 绑定工作流不会调用此方法。

我尝试过的另一件事是添加一个观察者来切换脏标志。

```
App.Post = Ember.Object.create({
   hasBeenModified: function() {
      this.set("isDirty", true);
   }.observes("title")
}) 
```

由于仍然未知的原因，当我在模型级别使用观察时，我的绑定在 UI 中不再起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T17:38:22.160

我相信您可能还需要覆盖 setUnknownProperty。UI 正在使用`Ember.set(object, key, value)`. 如果你看一下实现

[https://github.com/emberjs/ember.js/blob/master/packages/ember-metal/lib/property_set.js#L60](https://github.com/emberjs/ember.js/blob/master/packages/ember-metal/lib/property_set.js#L60) 它不会调用你的setter，但`setUnknownProperty`如果存在就会调用。

实际上，在

[https://github.com/emberjs/ember.js/blob/master/packages/ember-metal/lib/property_set.js#L52](https://github.com/emberjs/ember.js/blob/master/packages/ember-metal/lib/property_set.js#L52)

如果您在班级中预定义了该字段，他们似乎会调用您的 setter `App.Post`。

# php - 正则表达式在匹配中获取重复匹配

> ID：11902141
> 
> 赞同：2
> 
> 时间：2012-08-10T12:57:18.253
> 
> 标签：php, regex, preg-match-all

我在源中有这个示例字符串： `@include_plugin:PluginName param1=value1 param2=value2@`

我想要的是`@include_plugin:*@`从一个源中找到所有出现的结果`PluginName`以及每个`paramN=valueN`.

此刻我正在摆弄这样的东西（并尝试了许多变体）：（`/@include_plugin:(.*\b){1}(.*\=.*){0,}@/`使用此[资源](http://www.macronimous.com/resources/writing_regular_expression_with_php.asp)）。不幸的是，我似乎无法定义一个给我想要的结果的模式。有什么建议么？

**更新示例：** 假设我在 .tpl 文件中有此字符串。`@include_plugin:BestSellers limit=5 fromCategory=123@`

我希望它返回一个数组：

```
0 => BestSellers, 
1 => limit=5 fromCategory=123 
```

甚至更好（如果可能的话）：

```
0 => BestSellers, 
1 => limit=5, 
2 => fromCategory=123 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T13:08:58.847

您可以分两步完成。首先使用正则表达式捕获该行，然后将参数分解为一个数组：

```
$subject = '@include_plugin:PluginName param1=value1 param2=value2@';
$pattern = '/@include_plugin:([a-z]+)( .*)?@/i';
preg_match($pattern, $subject, $matches);

$pluginName = $matches[1];
$pluginParams = isset($matches[2])?explode(' ', trim($matches[2])):array(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:01:09.250

您可以使用此正则表达式：

```
/@include_plugin:([a-zA-Z0-9]+)(.*?)@/ 
```

PluginName 在第一个捕获组中，参数在第二个捕获组中。请注意，参数（如果有）具有前导空格。

除非已知最大参数数量，否则不可能编写正则表达式来提取更好的情况。

您可以通过首先修剪前导和尾随空格来进行额外处理，然后沿`/\s+/`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T13:12:59.273

```
$string = "@include_plugin:PluginName1 param1=value1 param2=value2@ @include_plugin:PluginName2@";

preg_match_all('/@include_plugin:([a-zA-Z0-9]+)\s?([^@]+)?/', $string, $matches);
var_dump($matches); 
```

这是你想要的？

```
array(3) {
  [0]=>
  array(2) {
    [0]=>
    string(55) "@include_plugin:PluginName1 param1=value1 param2=value2"
    [1]=>
    string(27) "@include_plugin:PluginName2"
  }
  [1]=>
  array(2) {
    [0]=>
    string(11) "PluginName1"
    [1]=>
    string(11) "PluginName2"
  }
  [2]=>
  array(2) {
    [0]=>
    string(27) "param1=value1 param2=value2"
    [1]=>
    string(0) ""
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T13:19:32.090

我不确定您`PluginName`可以包含的字符集或参数/值，但如果它们受到限制，您可以使用以下正则表达式：

```
/@include_plugin:((?:\w+)(?:\s+[a-zA-Z0-9]+=[a-zA-Z0-9]+)*)@/ 
```

这将捕获插件名称，后跟任何字母数字参数列表及其值。可以通过以下方式看到输出：

```
<?
$str = '@include_plugin:PluginName param1=value1 param2=value2@
@include_plugin:BestSellers limit=5 fromCategory=123@';

$regex = '/@include_plugin:((?:\w+)(?:\s+[a-zA-Z0-9]+=[a-zA-Z0-9]+)*)@/';

$matches = array();
preg_match_all($regex, $str, $matches);

print_r($matches);
?> 
```

这将输出：

```
Array
(
    [0] => Array
        (
            [0] => @include_plugin:PluginName param1=value1 param2=value2@
            [1] => @include_plugin:BestSellers limit=5 fromCategory=123@
        )

    [1] => Array
        (
            [0] => PluginName param1=value1 param2=value2
            [1] => BestSellers limit=5 fromCategory=123
        )

) 
```

要以您需要的格式获取数组，您可以使用以下命令遍历结果：

```
$plugins = array();
foreach ($matches[1] as $match) {
    $plugins[] = explode(' ', $match);
} 
```

And now you'll have the following in `$plugins`:

```
Array
(
    [0] => Array
        (
            [0] => PluginName
            [1] => param1=value1
            [2] => param2=value2
        )

    [1] => Array
        (
            [0] => BestSellers
            [1] => limit=5
            [2] => fromCategory=123
        )

) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T13:03:25.663

此正则表达式将为您提供多个组，每个插件一个。

```
((?<=@include_plugin:)(.+)) 
```

# hash - 选择哈希函数

> ID：11902142
> 
> 赞同：3
> 
> 时间：2012-08-10T12:57:19.490
> 
> 标签：hash

我想知道：在保持散列函数的预期冲突计数的同时，可以安全散列的最大字节数是多少？

对于 md5、sha-*，甚至可能是 crc32 或 adler32。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T22:21:12.040

你的问题不清楚。“最大字节数”是指“最大项目数”？被散列的文件的大小与冲突的数量无关（当然，假设所有文件都不同）。

“保持预期的碰撞次数”是什么意思？从字面上看，答案是“无限的”，但在一定数量之后，你会如预期的那样发生碰撞。

至于“在保持碰撞概率低于 x% 的情况下，我可以散列多少个项目？”这个问题的答案，请看下表：

[http://en.wikipedia.org/wiki/Birthday_problem#Probability_table](http://en.wikipedia.org/wiki/Birthday_problem#Probability_table)

从链接：

> 作为比较，10^-18 到 10^-15 是典型硬盘的不可纠正误码率 [2]。理论上，128 位的 MD5 应该保持在这个范围内，直到大约 8200 亿个文档，即使它可能的输出更多。

这假设了一个输出均匀分布的散列函数。您可能会假设，给定足够的要散列的项目和加密散列函数（如 md5 和 sha）或良好的散列（如 Murmur3、Jenkins、City 和 Spooky Hash）。

并且还假设没有恶意对手积极制造碰撞。那么你真的需要一个安全的加密哈希函数，比如 SHA-2。

请注意：CRC 和 Adler 是校验和，旨在检测数据损坏，而不是最小化预期的冲突。它们具有诸如“检测大小为 < X 或 > Y 的所有位归零以用于高达 Z kbytes 的输入”之类的特性，但没有那么好的统计特性。

编辑：不要忘记这都是关于概率的。完全有可能只对两个小于 0.5kb 的文件进行哈希处理并获得相同的 SHA-512，尽管这种可能性极小（例如，在[此之前没有发现 SHA 哈希的冲突）。](https://stackoverflow.com/questions/4294948/what-does-no-collisions-have-been-found-yet-for-this-hashing-method-even-mean/10937153#10937153)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-10T20:37:48.820

你基本上是在看生日悖论，只看非常大的数字。鉴于数据的正常“分布”，我认为在遇到问题之前您可以达到大约 5-10% 的可能性，尽管没有任何保证。

只需使用足够长的哈希就不会遇到问题；）

# playframework - routesImport 在 playframework 中不起作用

> ID：11902145
> 
> 赞同：2
> 
> 时间：2012-08-10T12:57:26.800
> 
> 标签：playframework, playframework-2.0

似乎 routesImport 在 playframework 2.0.2 中不起作用。我把这些放在 Build.scala 中：

```
val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
  routesImport += "controllers._"
) 
```

这将起作用：

```
GET /    controllers.SiteApplication.home() 
```

但这不起作用：

```
GET /   SiteApplication.home() 
```

reload 命令在编辑 Build.scala 后执行。有什么帮助吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:50:02.690

看来您的方法需要完全合格。

他们在下面的小组页面上的链接中讨论了这个问题。

[https://groups.google.com/forum/?fromgroups#!topic/play-framework/k5MT68xFzDA%5B1-25%5D](https://groups.google.com/forum/?fromgroups#!topic/play-framework/k5MT68xFzDA%5B1-25%5D)

# java - 功能“http://apache.org/xml/features/standard-uri-conformant”的 SAXNotRecognizedException

> ID：11902150
> 
> 赞同：3
> 
> 时间：2012-08-10T12:57:49.143
> 
> 标签：java, xml, jaxb, saxparser

任何人都知道为什么我在以下代码中遇到异常。我正在使用 Java 6。

```
final XMLReader reader = XMLReaderFactory.createXMLReader();
reader.setFeature("http://xml.org/sax/features/validation", doValidate);
reader.setFeature("http://apache.org/xml/features/validation/schema", doValidate);
reader.setFeature("http://apache.org/xml/features/standard-uri-conformant", doValidate);

org.xml.sax.SAXNotRecognizedException: Feature 'http://apache.org/xml/features/standard-uri-conformant' is not recognized 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T16:04:10.600

找到解决方案：

将 xercesImpl 2.9.1 添加到我的类路径中，而不是使用 Xerces 的内部 Java 6 捆绑版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-07T06:32:08.363

**在集成 Spring 和 Rest Webservice Jersey 时遇到此问题**

## 解决方案

**删除了以下罐子**
xerces-2.6.2.jar
xercesImpl-2.11.0.jar
xml-apis.jar

**添加**

jaxp-api-1.4.2.jar

# cakephp - 我们是否应该强制卸载通过 loadModel() 加载的模型

> ID：11902151
> 
> 赞同：1
> 
> 时间：2012-08-10T12:57:51.703
> 
> 标签：cakephp

是否应该调用 cakePHP 中的 unloadModel 之类的函数来卸载使用 loadModel() 函数加载的模型？

我找到了一个卸载方法，

[http://api20.cakephp.org/file/Cake/Model/BehaviorCollection.php#method-BehaviorCollectionunload](http://api20.cakephp.org/file/Cake/Model/BehaviorCollection.php#method-BehaviorCollectionunload)

但它似乎用于行为。我是蛋糕新手。是否有这样的功能，或者当被调用的操作失去范围时它会自动卸载？

还有一个疑问；是根据 MVC 的常规约定使用 loadModel 吗？它有什么不良影响吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T13:13:17.680

您不需要卸载模型。如果要在整个 Controller 中使用模型，请使用`$uses`变量：

```
public $uses = array('MyModel', 'AnotherModel'); 
```

如果您只想在特定操作中使用它，请使用`loadModel`：

```
$this->loadModel('MyModel'); 
```

就是这样 - 无需卸载。

不，这不反对 MVC imo，我没有看到任何不利影响。

加载模型很常见。示例 - 我的大多数项目都需要一些“主页”，这些“主页”的数据几乎来自任何模型。在这种情况下，我创建了一个“DashboardsController”，它甚至没有一个表——然后当我需要访问它的数据时，我会加载每个模型。（或者`$uses`如果我要在所有操作中使用它的数据）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:14:01.207

不，行为和模型是两个不同的东西。

行为通过钩子添加功能。含义：它们改变了模型中其他方法的工作方式。因此，如果您想自动对数据进行地理编码，请使用地理编码器行为。或者，如果您希望在查找时解密您的结果，您可以添加解密行为。因此，您需要分离/卸载行为的选项，因为您可能不希望在某些时候使用此功能。

模型只是访问数据库或提供包装方法。不必为了使站点的其余部分正常工作而将其删除，因为它们不会改变其他方法的工作方式。

loadModel 只是一种动态加载不自动相关的模型的方法。从需要这些模型的控制器操作中做到这一点完全没问题。

# objective-c - 通过 segue 将 uitableviewcells 连接到不同的视图

> ID：11902156
> 
> 赞同：0
> 
> 时间：2012-08-10T12:58:19.223
> 
> 标签：objective-c, xcode, uitableview, storyboard

我以编程方式创建了一个 UITableView，其中包含连接到故事板中其他视图的不同单元格和部分，如下图所示：

**我的问题是：**

**我如何将这 3 个单元格连接到这些不同的视图，请你帮帮我**

提前致谢！

这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
NSString *key = [[self sectionKeys] objectAtIndex:[indexPath section]];
NSArray *contents = [[self sectionContents] objectForKey:key];
NSString *contentForThisRow = [contents objectAtIndex:[indexPath row]];

static NSString *CellIdentifier = @"CellIdentifier";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault 
reuseIdentifier:CellIdentifier];
}

[[cell textLabel] setText:contentForThisRow];
return cell;

}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
_selectedIndex = indexPath.row;
[self.tableView reloadData];

} 
```

**编辑：** 当我使用此方法时，即使用户选择缺席单元格，它也只会加载 WorkTime 视图，有人知道为什么吗？

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
 {
  _selectedIndex = indexPath.row;
[self.tableView reloadData];
//maybe you could use a switch/case here, to assign the correct string to the segue identifier.
 switch (indexPath.row){
    case 0:
        [self performSegueWithIdentifier:@"test" sender:self];
        break;
    case 1:
        [self performSegueWithIdentifier:@"set" sender:self];
        break;
    case 2:
        [self performSegueWithIdentifier:@"get" sender:self];
        break;
 }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:21:54.500

您的最后一种方法是您想走的路，但是从外观上看，您需要检查`indexPath.section`不`indexPath.row`

# asp.net-mvc-3 - 维护数据库中复选框的状态

> ID：11902162
> 
> 赞同：0
> 
> 时间：2012-08-10T12:58:32.780
> 
> 标签：asp.net-mvc-3, model-view-controller, telerik-grid

我在 Telerik MVC Grid 中使用复选框绑定了数据。如何根据数据库中的数据勾选复选框。即在控制器中，我从两个 LINQ 查询中得到了两个输出，如下所示：

```
All.Data = resourceActions.Actions
                    .Select(i => new { i.ActionName, i.ActionID })
                    .ToList();

Checked.Data = roleResourceActions.Actions
                    .Select(i => new { i.ActionName, i.ActionID })
                    .ToList(); 
```

从上面看，第一个 LINQ 查询提供了所有数据，其中 ActionID 是唯一的。第二个 LINQ 查询只提供检查的数据，其中 ActionID 在这里也是唯一的。

所以两个输出都有 ActionID 一样常见。第一个输出通过复选框显示到 Telerik Grid。

我需要从第二个 LINQ 查询的输出中检查复选框，即检查 ActionID。

我是 MVC 和 LINQ 的新手，怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:05:59.363

```
foreach(Actions x in All.Data)
{
 if( Checked.Data.Contain(x))
{
<input type="checkbox" checked="checked">
}
else
{
<input type="checkbox" >
}

} 
```

你必须这样做

# antlr3 - ANTLR 试图在更长的令牌中匹配令牌

> ID：11902168
> 
> 赞同：1
> 
> 时间：2012-08-10T12:59:04.823
> 
> 标签：antlr3

我是 ANTLR 的新手，并尝试在 ANTLRWorks1.4.3 中遵循语法。

```
command
:   'go' SPACE+ 'to' SPACE+ destination
;

destination
:   (UPPER | LOWER) (UPPER | LOWER | DIGIT)*
;

SPACE
:   ' '
;

UPPER
:   'A'..'Z'
;

LOWER
:   'a'..'z'
;

DIGIT
:   '0'..'9'
; 
```

这似乎工作正常，除非'destination' 包含关键字'go' 和'to' 的前两个字符。例如，如果我给出以下命令：

```
go to Glasgo 
```

节点树显示如下：

![在此处输入图像描述](../Images/ce03f9b6b9a84a4d5c726ae0e3061a3b.png)

我期待它匹配填充词作为目的地。

我什至尝试更改关键字，例如“旅行”而不是“去”。在这种情况下，如果目的地中有“tr”，ANTLR 会抱怨。

知道为什么会这样吗？以及如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:50:40.423

ANTLR 词法分析器和解析器是严格分开的。您的输入首先被标记化，然后解析器规则对所述标记进行操作。

在您的情况下，输入`go to Glasgo`被标记为以下 X 标记：

1.  `'go'`
2.  `' '`（空间）
3.  `'to'`
4.  `'G'`（上）
5.  `'l'`（降低）
6.  `'a'`（降低）
7.  `'s'`（降低）
8.  `'go'`

留下一个“悬空”`'go'`关键字。这就是 ANTLR 词法分析器的工作原理：您无法更改它。

在您的情况下，一个可能的解决方案是制定`destination`词法分析器规则而不是解析器规则：

```
command
:   'go' 'to' DESTINATION
;

DESTINATION
:   (UPPER | LOWER) (UPPER | LOWER | DIGIT)*
;

SPACE
:   ' ' {skip();}
;

fragment UPPER
:   'A'..'Z'
;

fragment LOWER
:   'a'..'z'
;

fragment DIGIT
:   '0'..'9'
; 
```

导致：

![在此处输入图像描述](../Images/3bd0ebccefc560f4f5233275bb6a3836.png)

* * *

如果您不完全确定两者之间的区别是什么，请参阅：[ANTLR 中解析器规则和词法分析器规则之间的实际区别？](https://stackoverflow.com/questions/4297770/practical-difference-between-parser-rules-and-lexer-rules-in-antlr)

有关 s 的更多信息`fragment`：[ANTLR 中的“片段”是什么意思？](https://stackoverflow.com/questions/6487593/what-does-fragment-means-in-antlr)

* * *

PS。格拉斯哥? **_**

# php - 安全图像失败 - Codeigniter

> ID：11902169
> 
> 赞同：-1
> 
> 时间：2012-08-10T12:59:05.743
> 
> 标签：php, codeigniter

我的脚本几乎可以工作，但是当我运行 for 循环时它失败了，在视图中：

```
<?php foreach($pics as $index=>$pic){?>
            <td class='Pictures'>
                <center>

                <?php

                $piece = explode('/',$pic["ThumbImg"]);
                $string = $piece[5];

                ?>
                <img src='<?php echo base_url(); ?>index.php/Controller/getImage/<?php echo $string; ?>/1' width="100px"> 

                </a> 
```

控制器类 - 获取图像功能：

```
//function to protect images from being accessed directly by obfuscating the URL
    function getImage($img_id,$type){

    if($this->members->logged_in()){    

          //code to authenticate user goes here then...

    //code to decide which type of file it is/thumb/full size image
    if($type==1)
    {
    $url = $this->data['base_url'].'system/application/images/pic/thumbs/';
    }else if($type==0){

    $url = $this->data['base_url'].'system/application/images/pic/';

    }

    $filepath = $url.$img_id;

    //send image to web browser.
        header("Content-type: image/jpeg");

      //get path
            $img_handle = imagecreatefromjpeg($filepath) or die("");
       //create and send     
        ImageJpeg($img_handle);

    } 
```

我怀疑这可能是由于重新发送了标头，如果是这样，我该如何解决。

干杯

修复了问题 - 使用了“Hotlinking”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:18:07.547

`header("Content-type: image/jpeg")`如果您从数据库加载图像，您基本上只需要设置标题信息。但由于您是从文件夹加载它，您可能希望跳过 php 文件并立即从文件夹中获取图像：

```
<img src='<?php echo base_url(); ?>img_folder/<?php echo $string; ?>/1' 
width="100px"> 
```

# php - 在能够将文件上传到 FTP 之前运行的脚本

> ID：11902170
> 
> 赞同：1
> 
> 时间：2012-08-10T12:59:05.697
> 
> 标签：php, android, file-upload, ftp

我正在尝试创建一种仅允许我的应用程序将文件上传到我的 FTP 的安全机制（用户名和密码登录是不够的）。为了实现这一点，我正在考虑创建一个内置在应用程序中的密钥，并且在任何文件可以上传到 FTP 之前，必须读取和验证这个密钥。如果正确，则可以上传文件。

这是可以做的事情吗？这种方法会更受欢迎吗？有没有人对如何做到这一点有任何指示？

*（注意：我不是要任何代码，只是一些关于从哪里开始的指示，因为我的搜索没有得到我的任何地方）*

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:12:24.610

if you are worried about unsecured wi-fi, etc, you can either use SFTP or tunneling over SSH e.g. with connectbot the use of public key crypto will will make sniffing harder.

if this is too much work for the intended userbase, you could generate one time passes (like google authenticator) and upload your file with a POST form or something.

if you are afraid of the key itself getting stolen (compromised device), there is little you can do..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:15:53.790

逐字复制另一个问题的答案是没有意义的，所以我将[这个链接](https://stackoverflow.com/questions/11467098/how-to-restrict-access-to-a-php-file/11468080#11468080)发布到它。

# php - 在 Wordpress 中包含 HTML 表单和表单处理器

> ID：11902171
> 
> 赞同：0
> 
> 时间：2012-08-10T12:59:14.603
> 
> 标签：php, forms, wordpress, include, processor

我对 Wordpress 一点也不熟悉，所以请多多包涵……我在 Wordpress 上有一个网站。在主页上，我想包含一个 HTML 表单，该表单将发布到它自己的 PHP 处理器。表单和表单处理器都是独立的 PHP 文件。我想知道如何将表单包含在主页上的特定 DIV 中。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:14:20.883

在文件夹`wordpress/wp-content/themes/twentyeleven/`中查找文件`home.php`或`index.php`.

如果您希望将表单放在需要放置的主要内容区域中（使用`include`PHP 文件）。

如果你想在边栏中有一个`sidebar.php`文件，你可以签出。

如果您更改主题 211，请务必重命名文件夹并打开`style.css`文件并更改 css 注释中的名称。之后，您可以进入 wp-admin 区域并从外观面板中选择*新主题。*您应该这样做，这样任何 WordPress 更新都不会覆盖您更改的文件。

# bash - 从 shell 脚本中的变量逐行读取

> ID：11902177
> 
> 赞同：14
> 
> 时间：2012-08-10T12:59:35.617
> 
> 标签：bash, shell

我有一个多行的脚本变量。我如何遍历这个变量来逐行读取它并按照我想要的方式处理每一行？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-10T13:02:26.460

考虑以下多行变量

```
x=$(echo -e "a\nb\nc d e") 
```

每行都有一个简单的过程：只是`echo`它带有前缀 =`LINE:`并在行周围带有单引号。以下任一代码都将满足该要求：

```
while read line; do echo "LINE: '${line}'"; done <<< "$x" 
```

或者

```
while read line; do echo "LINE: '${line}'"; done < <(echo "$x") 
```

两者都不创建子shell（因此您可以，例如，在循环中设置变量并在循环之外访问它们），并且都输出

```
LINE: 'a'
LINE: 'b'
LINE: 'c d e' 
```

但是假设你有

```
x=$(echo -e "a \n b\nc d e")
# note--------^--^ 
```

并且前导和尾随空格对您的应用程序很重要（例如，解析 Git 瓷器）。上述两个代码都将为后一个变量/数据提供与前一个完全相同的输出，这不是您想要的。要保留前导和尾随空格，请替换`while read line`为`while IFS= read -r line`. 即以下任一代码

```
while IFS= read -r line; do echo "LINE: '${line}'"; done <<< "$x" 
```

或者

```
while IFS= read -r line; do echo "LINE: '${line}'"; done < <(echo "$x") 
```

会产生

```
LINE: 'a '
LINE: ' b'
LINE: 'c d e' 
```

有关详细信息，请参阅[Greg Wooledge 出色的 Bash 常见问题解答](http://mywiki.wooledge.org/BashFAQ/001)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-20T22:36:27.973

尽管我通常使用“读取时”来处理多行变量，但我最近有一个实例，它从文件中的每一行中删除了前导空格。使用它来解决我的问题：

```
printf '%s\n' "$var" | while IFS= read -r line
do
   echo "$line"
done 
```

取自[此 Unix Stack Exchange 答案](https://unix.stackexchange.com/a/9789)的代码。

**编辑**：更新以修复 Nicolae Iotu 建议的最后一行问题

# objective-c - 在 CCSprite 子类中实现动画的正确方法是什么？

> ID：11902186
> 
> 赞同：0
> 
> 时间：2012-08-10T13:00:27.957
> 
> 标签：objective-c, cocos2d-iphone

在我的游戏中，我为我的敌人创建了一个 CCSprite (cocos2d) 的子类。因为我想从这个子类的每个实例中控制动画，所以我必须将我的主类中的动画代码（它加载敌人）翻译到这个子类。

我发现这相当困难，但是....过了一段时间，它神奇地开始起作用了。

不幸的是，在这个子类中创建和设置属性后，我开始出现奇怪的崩溃。因为它们在 cocosDenshion 和其他与我的敌人阶级无关的地方，并且在对我的代码和网络进行深入研究之后，我确信它存在某种数据损坏，我几乎完全可以肯定它是因为我用他的动画代码完成了我的敌人课程完全错误的方式。

老实说，我什至无法再考虑这里发生的事情以及这实际上是如何工作的：S ...我完全被卡住了。任何帮助深表感谢！

**所以我的主要问题是：在 CCSprite 子类中实现动画的正确方法是什么？/我在这里做错了什么？**

在这里简化了我的代码：（它每 2 秒触发一次动画以显示我想如何使用它）

```
#import "cocos2d.h"

@interface Npc : CCSprite 
{
    CCAction *_runAnimation;
    NSString* name;
    int strength;
}

@property (nonatomic, retain) CCAction *runAnimation;
@property int strength;
@property (nonatomic, retain) NSString* name;

- (Npc*)loadAnimation;
- (void)animate;
@end 
```

* * *

```
#import "Npc.h"

@implementation Npc

@synthesize runAnimation = _runAnimation;
@synthesize name;
@synthesize strength;

-(id) initWithTexture:(CCTexture2D*)texture rect:(CGRect)rect
{
    if( (self=[super initWithTexture:texture rect:rect]))
    {
    }
    return self;
}

- (Npc*)loadAnimation
{

    int lastFrame = 11;
    NSString *creatureFile = @"vis 1";

    [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:
     [NSString stringWithFormat:@"%@.plist", creatureFile]];
    CCSpriteBatchNode* sheet = [CCSpriteBatchNode batchNodeWithFile:
                                [NSString stringWithFormat:@"%@.png", creatureFile]];

    self = [Npc spriteWithTexture:sheet.texture];
    NSMutableArray* animFrames = [[NSMutableArray alloc] init];     

    for (int x = 0; x < lastFrame; x++) 
    {
        [animFrames addObject:
         [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:
          [NSString stringWithFormat:@"%@ %d.png", creatureFile, x]]];              
    }

    CCAnimation* anim = [CCAnimation animationWithFrames: animFrames delay: 0.1];

    self.runAnimation = [CCAnimate actionWithAnimation:anim restoreOriginalFrame:NO];

    [self runAction:_runAnimation];

    return self;
}

- (void)animate
{
    [self runAction:self.runAnimation]; 
}

- (void)dealloc 
{
    [super dealloc];

    [name release];
}

@end 
```

* * *

```
#import "HelloWorldLayer.h"
#import "Npc.h"

@implementation HelloWorldLayer

+(CCScene *) scene
{
    CCScene *scene = [CCScene node];
    HelloWorldLayer *layer = [HelloWorldLayer node];
    [scene addChild: layer];
    return scene;
}

-(id) init
{

if( (self=[super init])) 
{
    timer = 0; 

    creatureTemp = [Npc spriteWithFile:@"Icon.png"];
    creature = [creatureTemp loadAnimation];
    creature.position = ccp(100,100);
    [self addChild:creature];

    [self schedule:@selector(nextFrame:)];

}
return self;
}

- (void)nextFrame:(ccTime)dt
{
    timer += dt;
    if (timer > 2.)
    {
        [creature animate];
        timer = 0.;
    }
}

- (void) dealloc
{
    [super dealloc];
}
@end 
```

**- - - - - - - - - -编辑 - - - - - - - - - -**

我在 Ray Wenderlich 的教程的帮助下更改了我的代码：[http ://www.raywenderlich.com/3888/how-to-create-a-game-like-tiny-wings-part-1](http://www.raywenderlich.com/3888/how-to-create-a-game-like-tiny-wings-part-1)

这是我认为更接近它应该的样子。不幸的是，它仍然在我的 iPhone（不是模拟器）上的 SimpleAudioEngine（我实现正确）上崩溃，所以我仍然做错了。

在 Npc 类之上：

```
@synthesize batchNode = _batchNode; 
```

Npc类的初始化：

```
-(id) initNpc
{
    if( (self=[super initWithSpriteFrameName:@"vis 1 0.png"]))
    {
        _normalAnim = [[CCAnimation alloc] init];

        NSMutableArray* animFrames = [[NSMutableArray alloc] init]; 

        int lastFrame = 11;

        for (int x = 0; x < lastFrame; x++) 
        {
            [animFrames addObject:
             [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:
              [NSString stringWithFormat:@"vis 1 %d.png", x]]]; 
        }

        _normalAnim = [CCAnimation animationWithFrames: animFrames delay: 0.1];
        self.runAnimation = [CCAnimate actionWithAnimation:_normalAnim restoreOriginalFrame:NO];

    }
    return self;
} 
```

和 HelloWorldLayer 的初始化

```
-(id) init
{

    if( (self=[super init])) 
    {
        timer = 0; 

        _batchNode = [CCSpriteBatchNode batchNodeWithFile:@"vis 1.png"];
        [self addChild:_batchNode];
        [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"vis 1.plist"];

        creature = [[[Npc alloc] initNpc] autorelease];
        creature.position = ccp(200,200);

        [_batchNode addChild:creature];

        [self schedule:@selector(nextFrame:)];

        [[SimpleAudioEngine sharedEngine] preloadEffect:@"super1.mp3"];

    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:52:43.413

您在 loadAnimation 中重新分配 self ：

```
 self = [Npc spriteWithTexture:sheet.texture]; 
```

那时我停止阅读代码。由于 self 已经是 Npc 类的一个实例，您必须问自己为什么要在诸如 loadAnimation 之类的 Npc 实例方法中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T01:35:41.203

所以，我明白了....这是代码：

**NPC.h：**

```
#import "cocos2d.h"

@interface Npc : CCSprite 
{
    CCAction *_runAnimation;

    CCAnimation *_normalAnim;
    CCAnimate *_normalAnimate;

}

@property (nonatomic, retain) CCAction *runAnimation;

- (void)animate;
- (id)initNpc;

@end 
```

**人机界面**

```
@synthesize runAnimation = _runAnimation;
@synthesize batchNode = _batchNode;

-(id) initNpc
{  
    if( (self=[super initWithSpriteFrameName:@"vis 1 0.png"]))
    {
        _normalAnim = [[CCAnimation alloc] init];        
        NSMutableArray* animFrames = [[NSMutableArray alloc] init];         
        int lastFrame = 7;        
        for (int x = 0; x < lastFrame; x++) 
        {
            [animFrames addObject:
             [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:
              [NSString stringWithFormat:@"vis 1 %d.png", x]]]; 
        }        
        _normalAnim = [CCAnimation animationWithFrames: animFrames delay: 0.1];
        self.runAnimation = [CCAnimate actionWithAnimation:_normalAnim restoreOriginalFrame:NO];       
    }
    return self;
}

- (void)animate
{
    [self runAction:_runAnimation];
} 
```

**在 HelloWorldLayer.m**

```
-(id) init
{

    if( (self=[super init])) 
    {

        _batchNode = [CCSpriteBatchNode batchNodeWithFile:@"vis 1.png"];
        [self addChild:_batchNode];
        [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"vis 1.plist"];

        timer = 0; 

        creature = [[[Npc alloc] initNpc] autorelease];
        creature.position = ccp(200,200);

        [_batchNode addChild:creature];

        [self schedule:@selector(nextFrame:)];

    }
    return self;
}

- (void)nextFrame:(ccTime)dt
{
    timer += dt;
    if (timer > 2.)
    {
        [creature animate];
        timer = 0.;

    }
} 
```

还有关于 cocosDenshion 的奇怪崩溃。这也解决了......它原来是 SimpleAudioEngine 中的一个已知错误，只有当我有一个异常断点处于活动状态时它才会抛出异常。解决方法：为我的声音创建一个类，如果我需要一个异常断点，我将声音注释掉......

- 不得不说，我确实更喜欢：

```
_batchNode = [CCSpriteBatchNode batchNodeWithFile:@"vis 1.png"];
    [self addChild:_batchNode];
    [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"vis 1.plist"]; 
```

在 Npc 类中，但这对我来说太高级了。如果有人知道这一点，请告诉我......实际上会很高兴知道，更好地理解 oop。但这不是绝对必要的...

# frameworks - XNA 框架 - 卸载程序

> ID：11902188
> 
> 赞同：0
> 
> 时间：2012-08-10T13:00:31.607
> 
> 标签：frameworks, xna, installation, uninstallation

我是 xna 框架的新手。如果我发布我的游戏，则会创建一个安装程序，它可以安装在其他电脑上，这很棒。但我的问题是，如果安装了游戏，则该游戏没有卸载程序。我该怎么做才能在那里添加卸载程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:25:30.273

我假设您所指的安装程序是 Visual Studio 安装程序项目。如果是这样，您的应用程序应该出现在“添加/删除程序”菜单中，并且可以从那里卸载。

# javascript - 使用 Yabble.js 加载一个奇怪的原型

> ID：11902189
> 
> 赞同：0
> 
> 时间：2012-08-10T13:00:34.230
> 
> 标签：javascript, require

我有一个非常奇怪的问题，我不得不假设是因为 Yabble.js。我以前从未使用过 Yabble.js，我现在使用的唯一原因是因为它是我正在使用的库（Gamejs）的依赖项，但我很想了解为什么会发生这种情况，以及它是否真的是 Yabble。 js 的错，或者可能是 Gamejs 的。

这是我的 main.js 的高度压缩（并为通用性而修改）版本：

```
var gamejs = require('gamejs');
...
function Character(/*lots of arguments*/) {
    Character.superConstructor.apply(this, arguments);
    this.somethingtomakeitaprototypeforthisexample = oneofthearguments;
}
gamejs.utils.objects.extend(Character, gamejs.sprite.Sprite);
Character.prototype.draw = function(display){
    display.blit(this.animator.image, this.pos); 
}
... /*Skipping most of the file, irrelevant to the problem*/

function main() {
    maincharacter = new Character(/* appropriate number and types of arguments */);
    ... /*skipping the rest*/
}

gamejs.ready(main); 
```

我已经做了足够多的调试，知道它进入`main`函数没有问题，并且中断发生在调用`Character`. 这是错误消息（来自 Chrome 的控制台）：

```
Uncaught TypeError: undefined is not a function
  main
  _readyResources 
```

我已经确定这`Character`是未定义的函数。但是，如果我这样定义我的就绪函数：

```
gamejs.ready(function(){
    console.log('Character:');
    console.log(Character);
    main(); 
}); 
```

正确定义的完整内容`Character`打印出来，但我仍然在`main`. 因此，我知道在调用`Character`之前是由命名空间定义的`main`。

不过有趣的事实是：我确实有一个解决方法。如果我将函数原型更改为`main`：

```
function main(CharacterClass) {...}; 
```

然后将就绪函数更改为：

```
gamejs.ready(function(){ main(Character);  }); 
```

并将相关行更改`main`为：

var character = new CharacterClass(...);

它工作正常。但这感觉真的很骇人听闻。

所以我的问题不是如何让它工作，因为我已经有了，而是为什么它是一个问题以及如何让它*像它应该的那样*工作。

有什么想法吗？

# excel - 将记录导出到 Excel 工作表

> ID：11902200
> 
> 赞同：1
> 
> 时间：2012-08-10T13:01:15.537
> 
> 标签：excel, vba, ms-access, recordset, records

我有一个看起来像这样的访问表，

```
Category | Subcategory | Userdate (mm/dd/yyyy) | Color 
```

我想将其导出到一个 excel 文件中，其中类别和子类别将分别放置在 A 列和 B 列中。但是颜色将按月（用户日期）放置，12 个月意味着从 C 到 N 的列。所以我想做的是根据月份（用户日期）将颜色的记录放在不同的列中。

这样做的最佳方法是什么？创建一个记录集并循环遍历它？我认为当行超过可能的 40k 时，这会有点慢。

我还可以使表格具有月份列，例如：

```
Category | Subcategory | January | February | etc... 
```

所以我可以像那样导出它，但在我看来，这只是制作表格的一种糟糕方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:05:02.887

听起来你想要一个交叉表查询：

```
TRANSFORM First(Table1.Colour) AS AColour
SELECT Table1.Category, Table1.Subcategory
FROM Table1
GROUP BY Table1.Category, Table1.Subcategory
PIVOT Format([Userdate],"mm-mmm"); 
```

您可以使用 DoCmd.TransferSpreadSheet 以编程方式传输到 Excel

# javascript - 如何以编程方式知道 jQuery 版本

> ID：11902202
> 
> 赞同：15
> 
> 时间：2012-08-10T13:01:17.597
> 
> 标签：javascript, jquery

> **可能重复：**
> [通过检查 jQuery 对象获取 jQuery 版本](https://stackoverflow.com/questions/6867040/get-jquery-version-from-inspecting-the-jquery-object)

差不多吧。。

我不知道每次都会加载哪个 jQuery 版本，所以我希望能够对不同的版本做出不同的反应。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-10T13:01:49.160

`prototype`jQuery 在( )上公开其版本`.fn`：

```
console.log( jQuery.fn.jquery ); 
```

例如输出字符串`"1.8.0"`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-10T13:02:30.827

```
// Returns string Ex: "1.3.1"
$().jquery;

// Also returns string Ex: "1.3.1"
jQuery.fn.jquery; 
```

# ios - 在 iOS 中反向播放视频

> ID：11902203
> 
> 赞同：11
> 
> 时间：2012-08-10T13:01:21.390
> 
> 标签：ios, avfoundation, media

我想在 AVPlayer 中向后播放视频。我尝试将rates 属性更改为-1.0，虽然它确实有效，但并不顺利。有什么方法可以流畅地向后播放视频吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-24T14:10:10.823

如评论中所述，问题在于关键帧以及大多数编解码器并非旨在向后播放的事实。有 2 个选项可用于重新编码视频，不需要您在编辑时实际反转视频。

1.  让每一帧都成为关键帧。我已经看到这对于像 H.264 这样依赖关键帧的编解码器非常有效。基本上，如果每一帧都是关键帧，那么每一帧都可以在不依赖任何先前帧的情况下被解码，因此它实际上与向前播放相同。
2.  使用不使用关键帧和非关键帧的编解码器（基本上所有帧都是关键帧）。PhotoJPEG 就是这样一种选择，尽管我不完全确定它是否可以在 iOS 上播放。我会这么认为。它在 Mac 上运行良好。

请注意，与典型的“每 x 帧关键帧”编码视频相比，此选项中的任何一个都会导致文件大小更大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-18T12:09:40.093

You have to reach at the end of the current item and then set the rate to the negative value. Something like this:

`-(void)reversePlay { CMTime durTime = myPlayer.currentItem.asset.duration; if (CMTIME_IS_VALID(durTime)) { [myPlayer seekToTime:durTime toleranceBefore:kCMTimeZero toleranceAfter:kCMTimeZero]; [myPlayer setRate:-1.0]; } else NSLog(@"Invalid time"); }`

source: [https://stackoverflow.com/a/16104363/701043](https://stackoverflow.com/a/16104363/701043)

# jquery - 在表格排序器 jquery 插件中删除上一页的类名

> ID：11902204
> 
> 赞同：0
> 
> 时间：2012-08-10T13:01:28.037
> 
> 标签：jquery, html, css

这似乎有点难以解释，但我会尽力而为。

我已经使用 jquery tablesorter 进行分页。工作正常。实际上，我有一个歌曲列表，默认情况下，第一首歌曲在页面加载时播放。

歌曲的 TR 通过自定义 jquery 函数激活，该函数将类 (classname = current_playing) 转换为显示这首歌正在播放。工作正常。

当我单击其他歌曲（其他 TR）时，上一首歌曲将处于非活动状态，并且 TR 的 Class(current_playing) 被删除，这很明显。

**代码**

```
 $('.tablesorter tr').removeClass('current_playing'); 
```

**问题**

当我使用 tablesorter 转到第二页然后单击第二页的其他 tr 时，它不会删除我在上一页中选择的前一个 tr 类。

我有一些想法，这是因为上面的代码可能没有在页面中找到 TR。

请帮助我如何删除以前的课程。我希望我尽力解释，但你仍然可以在[http://webcartz.stagetesting.com/playlist看到它](http://webcartz.stagetesting.com/playlist)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T10:49:47.657

在谷歌搜索并正确研究 tablesorter 的文档后，我成功地找到了解决方案。在 tablesorter 中，我们有**$(".tablesorter")[0].config.rowsCopy**，它提供了所有表格行，使用它您可以轻松地使用您的自定义代码。

```
 $($(".tablesorter")[0].config.rowsCopy).each(function() {
     // for removing tr class 
     $(this).removeClass('current_playing');
     // for changing class another div 
     $(this).find('div.black_speaker').removeClass('black_speaker');
  }); 
```

希望这可以帮助遇到同样问题的人。

# java - 如何处理不停止线程的行为不良的库

> ID：11902205
> 
> 赞同：8
> 
> 时间：2012-08-10T13:01:33.417
> 
> 标签：java, multithreading

在处理库关闭时无法正确清理线程的第三方库时，有哪些解决方法？

许多库显式或隐式地为其中包含的代码公开生命周期方法。例如，Web 应用程序框架存在于 servlet 容器中的 Web 应用程序上下文中。创建上下文时，框架可能会出于各种原因启动一些线程。

现在，进一步举例，当 servlet 容器或 Web 应用程序上下文关闭时，Web 应用程序框架应该终止所有这些线程。应该关闭由库创建的[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)，或者应该制定一些其他停止这些线程的方法。

最坏的情况是线程[是非守护线程](https://stackoverflow.com/questions/2213340/what-is-daemon-thread-in-java)。这些实际上会停止 Java 进程的终止。但即使它们是守护线程，允许线程继续运行也可能是不好的做法。如果（回到示例）servlet 容器嵌入在其他代码中，其他代码可能会继续运行，而线程仍在运行，这可能会导致问题。

没有公开的编程方式来停止这些线程，那么可以做些什么呢？

如果您正在使用这样的第三方库，有什么方法可以强制关闭现有线程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T13:14:46.230

> 如果您正在使用这样的第三方库，有什么方法可以强制关闭现有线程？

一般来说，没有一种安全的方法可以保证在所有情况下都有效。最接近安全解决方案的方法是使用`ThreadGroup`枚举所有现有线程，并使用`Thread.interrupt()`告诉每个线程停止。当然，不能保证线程会注意，或者它们会干净地关闭以响应中断。

IMO，最好的策略是：

*   如果线程不需要*干净地*关闭，则通过调用 System.exit() 拔掉 JVM 上的插头

*   如果需要彻底关闭线程以避免损坏的可能性，请不要使用该库......或者自己解决问题。

# android - Monkeyrunner，如何使 device.press 多次？

> ID：11902206
> 
> 赞同：2
> 
> 时间：2012-08-10T13:01:35.587
> 
> 标签：android, python, monkeyrunner

我一直在玩monkeyrunner和python/jython，我似乎在这里找到了我需要的大部分信息，所以我希望一些专家能告诉我如何让“device.press”发生多次。为了学习的目的，假设我想把音量一直调低，这是我迄今为止尝试过的：

```
device.press("KEYCODE_VOLUME_DOWN", "DOWN_AND_UP", 8) 
```

和

```
device.press("KEYCODE_VOLUME_DOWN", "DOWN_AND_UP", 8, 8) 
```

正如您可能已经在我的手机和图像上猜到的那样，需要按 8 次才能将音量一直降低，但这些线路都不起作用。有没有办法在不重复该行 8 次的情况下做到这一点？我知道我可以这样做，但它似乎有点乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T04:42:41.740

[MokeyDevice.press()](http://developer.android.com/tools/help/MonkeyDevice.html#press)只接受 2 个参数，其余的被忽略。它可能会警告您使用了错误数量的参数，但它会默默地忽略它们。

正确的方法是

```
times = 8
for n in range(times):
    device.press("KEYCODE_VOLUME_DOWN", MonkeyDevice.DOWN_AND_UP) 
```

# ios - IOS 内存和电池管理 - 内存与工作

> ID：11902210
> 
> 赞同：1
> 
> 时间：2012-08-10T13:01:48.927
> 
> 标签：ios, xcode

我是 IOS 新手，来自个人电脑，我正在尝试管理内存和电池资源。

我有一个很轻的 UIImageView 子类（它是一个带有一些方法的图像占位符）。这个子类被反复添加到几个根视图中，或者从几个根视图中删除。我在每个根视图上都持有对子类的 IBOutlet 引用。

你会：

*   只需从根视图中添加/删除子类（并将其保存在内存中）？

或者

*   每次都创建和销毁子类实例（释放内存但额外的工作）？

这值得考虑还是我什么都不担心？

如果 UIImageView 子类非常大，您的答案是否相同？

有没有办法衡量这些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:14:03.827

通常，您可以`UIImageView`在 iOS 上无视地使用。 `UIImageView`只不过是带有一些处理图像的方法的剪辑区域。

占用更多内存的资源是`UIImage`包含在 iOS 中的`UIImageView`，这些是由 iOS 缓存的。

所以创建`UIImageViews`和销毁它们几乎没有成本，只要注意释放它们并且不要泄漏内存，除非你有数百个它们，否则你应该没问题。

子类“大”无关紧要，一个类中的代码永远不会加载超过一次。如果班级有很多额外的状态 - 这会占用一些内存，但我无法在`UIImageView`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:38:56.347

You better just keep it in memory. User experience will be much better if you don't slow down the device by continuously recreating the image view. One single poor UIImageView instance is not memory heavy enough to worth the time and effort to recreaty all the time.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T13:39:29.560

Keeping it an memory to improve performance isn't as much of a hit as you would think - taken from the other answers you have. But you should remove it from memory if you get a memory warning, and provide a way to bring it back to life as needed.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T13:35:29.207

I would go with your first option, keeping it in memory. This is just because I think it is handy to keep my views alive and reuse them. This means that they will remember their state and content and that helps out in many cases. I usually write methods to reset the content or refresh it when needed.

Keeping it in memory might also increase the loading of the view slightly, but usually you do not notice the difference, and I see people using both ways.

And yes, I would say you are worrying a bit too much, especially if you think this decision would affect battery.

Regarding memory management, keeping the imageview in memory or releasing/recreating consumes the exact same amount of memory as long as you only have one imageview that you are using. The only difference is that you are allocating and releasing it repeatedly if you are recreating it.

You could however get memory issues if you start creating new imageviews every time the user opens them and never letting go of them, but that means you are doing something fundamentally wrong in your programming.

As long as you know what you are doing, no need to worry about the amount of memory in a case like this - there's plenty. Start worrying if you are handling large images.

Especially if you use ARC there is not much to worry about, just start hacking away. If you are managing memory manually, I do recommend trying to reuse stuff because that causes less headache and risk of giant leaking. Use leaktools and analyze tool to make sure in this case.

# algorithm - 空间数据结构中的不同搜索方法

> ID：11902211
> 
> 赞同：3
> 
> 时间：2012-08-10T13:01:57.440
> 
> 标签：algorithm, data-structures, graph, tree, spatial

我正在尝试编写一个空间数据结构（例如 a`K-D tree`或 a `QuadTree`），给定一个点，它将找到`x`最接近它的点。

我上面提到的数据结构的问题是它们主要支持径向/区域搜索。`y`因此，他们将获得给定点/节点半径内的点。

改变这些结构来搜索我想要的东西是低效的。我假设我需要多次重复径向搜索，从较短的径向距离开始，并不断增加它，直到我获得`x`接近给定点的所需点数。当然，这违背了数据结构背后的全部目的。

几乎所有的空间数据结构都在径向搜索上运行。我可以将哪些其他*有效*的搜索方法应用于 a`QuadTree`或我需要考虑的任何其他空间数据结构以实现我的意思？有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:07:13.967

我不确定你的假设是否正确。关于 kd-trees的[Wikipedia 文章](http://en.wikipedia.org/wiki/Kd_tree#Nearest_neighbour_search)指出了如何使用该结构来支持查找与`x`搜索点最近的邻居。是的，它本质上是重复寻找最近邻`x`时间，但我不确定您是否有权期望算法比`kd-tree`.

如果这对您来说还不够好，那么您可能需要将您的点存储在不同的数据结构中。如果`x`很小且有界，您可以将点存储在加权图中，其中边权重当然是点之间的距离。

如果`x`既不是小也不是有界的，您可以将空间简单地细分为`k*m`均匀的单元格（此处为 2D，如有必要，请膨胀至 3+D）。对于每个搜索点，直接进入包含它的单元格，找到同一单元格中的其他点。如果`x`它们中的一个比单元格的边界更靠近搜索点，那么这些就是您要查找的内容。如果没有，也请在附近边界另一侧的单元格中进行搜索。

如果您发现自己需要同时支持径向/区域搜索和*x*近邻搜索，那么如果您必须维护 2 个数据结构，一个来支持每种类型的查询，这并不是世界末日。对于许多搜索问题，有效解决方案的第一步是将数据放入正确的结构中以进行有效搜索。做出此决定取决于您根本没有提供给我们的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:53:27.593

如果您确实在四叉树上多次调用搜索方法（这是我已经做过几次的），那么如果您在每次调用时将搜索半径加倍，直到您获得正确的点数，搜索并不是那么低效.

假设一个 2d 空间，如果包含 X 点的正确最小半径是 R1，并且您继续加倍直到找到包含它们的半径 R2，那么 (a) R2 必须小于 2xR1 并且 (b) 搜索的区域每次搜索都会变大 4 倍，这（我认为）给你一个最坏的情况，你搜索过的区域只有一半实际上是不必要的（或大约）。

# xcode - 滚动tableView时保持搜索栏固定位置

> ID：11902213
> 
> 赞同：3
> 
> 时间：2012-08-10T13:02:06.010
> 
> 标签：xcode, uisearchbar

如何在滚动表格视图时将我在 Xcode 4.3.3 中创建的 uiSearch 栏固定在顶部？有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T04:47:50.970

**已编辑：** 如果您使用界面构建器添加搜索栏，请确保它没有作为 tableview 的子视图添加（这使搜索栏成为表格的一部分，与表格一起滚动）。检查下面的链接，并避免它。此链接显示搜索栏如何成为表格的子视图。这不是你想要的。只需将搜索栏拖到您的界面构建器中的表格视图之外，使其成为视图的一部分。

我添加了第二张图片来展示你如何找到你的问题的解决方案。

如果您想以编程方式添加搜索栏，则只需将其添加为-

```
[self.view addSubview:mySearchBar]; 
```

相应地设置此搜索栏的框架。

![如果您希望搜索栏不滚动，则不应这样做](../Images/6d4fb0859fe8feedef7abaf7a565c513.png)

![在此处输入图像描述](../Images/8537066c4bd21d4027f1e0270ece97c9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:22:39.940

你是如何在 nib 文件中创建它们的？不要将搜索栏放在 UITableView 上。它们应该分开。您可以将搜索栏放在 tableview 的顶部，但不能放在上面。

# android - 从广播接收器调用活动，但将其保留在后台

> ID：11902214
> 
> 赞同：0
> 
> 时间：2012-08-10T13:02:07.350
> 
> 标签：android, android-intent

我有一个警报设置为每*n*分钟触发一次，它工作正常。但是我发现从广播接收器读取应用程序的 SharedPreferences 会导致一些问题（它读取了这些偏好的旧版本，可能是由于不同的 PID）

我被告知要做我需要做的事情，我应该调用一个 Activity，它解决了 SharedPreferences 问题，但创建了一个新问题。

活动必须以独占方式在后台运行。它本质上是一个心跳，向 Presence 解决方案发送一些信息，让用户保持活跃。

警报接收器：公共类 AlarmReceiver 扩展 BroadcastReceiver {

```
 @Override
    public void onReceive(Context context, Intent intent) {
        Intent alarmIntent = new Intent(context, AlarmActivity.class);
        alarmIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        alarmIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(alarmIntent);
    }
} 
```

清单中的活动

```
 <activity android:name=".AlarmActivity" android:theme="@android:style/Theme.Translucent.NoTitleBar"/> 
```

警报活动只发送一个 HTTP 更新，但即使我删除了除了 super.onCreate 行之外的所有内容，它仍然会强制应用程序进入前台并聚焦。但只有当应用程序本身仅通过主页按钮“最小化”时才会发生这种情况。如果我用后退按钮关闭它，它不会被强制聚焦，而心跳仍然在后台正常触发。

我怎样才能防止这种情况？

我正在为 API 版本 7 (Android 2.1) 开发，但如果需要可以更新到 API 8。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:47:48.467

考虑`Service`用于执行后台任务。

# html - 外部样式表不起作用

> ID：11902216
> 
> 赞同：0
> 
> 时间：2012-08-10T13:02:14.713
> 
> 标签：html, css

我已经添加了

```
<link rel="stylesheet" type="text/css" href="http://blogsoc.org/mail1/style.css/" /> 
```

在 index.html 上面的标签中。但是我的样式表不起作用。我的 style.css 代码是：

```
body
{
background-color: #23314F;
}

main
{
margin: 0 auto;
width: 880px;
background: #FAFAFA;
} 
```

应该做出哪些改变？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T13:09:23.833

提供的链接不正确

```
href="http://blogsoc.org/mail1/style.css/ 
```

一定是

```
href="http://blogsoc.org/mail1/style.css 
```

没有最后`/`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:10:40.200

没有太多描述性问题。但尝试删除最后一个斜线。

```
<link rel="stylesheet" type="text/css" href="http://blogsoc.org/mail1/style.css" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T13:07:15.647

“不工作”是对问题的非常模糊的描述。

唯一明显的问题是`main`它将选择`<main>`HTML 中不存在的元素。我们无法告诉您将其更改为什么，因为看不到您的 HTML。我建议阅读[selectutorial](http://css.maxdesign.com.au/selectutorial/)。

由于问题已更新：

`http://blogsoc.org/mail1/style.css/`给我一个 404 错误。您需要为样式表提供一个有效的 URI。`http://blogsoc.org/mail1/style.css`似乎是你想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-06T18:38:19.637

我以前也有这个问题。我解决了它。问题是我最初`<frameset>`在 Eclipse 中声明我的页面。即使我改变了它，问题仍然存在。我复制并粘贴了页面并在不同的浏览器中进行了测试。

源页面完美地链接到浏览器上的样式表。它只是没有在我的页面上显示样式。

我创建了一个没有声明的新页面，它可以工作。

```
The `<link>` tag was not the problem.

    <html>
<head>
    <link type="text/css" href="style.css" rel="stylesheet" />
</head>
<body>
<h1>Test Title</h1>
this is a test page.
</body>
</html> 
```

# objective-c - CTFramesetterCreateWithAttributedString 不创建最后一行

> ID：11902217
> 
> 赞同：1
> 
> 时间：2012-08-10T13:02:15.193
> 
> 标签：objective-c, ios

为什么这段代码只给了我一行？但是如果我写@“line1\n\0”，那么我将有两行！为什么 last '\n' 不创建新行？

```
CTFramesetterRef ctfsr = CTFramesetterCreateWithAttributedString((__bridge CFAttributedStringRef)[[NSAttributedString alloc] initWithString:@"line1\n"]);
    CGSize suggestedSize = CTFramesetterSuggestFrameSizeWithConstraints(ctfsr, CFRangeMake(0, 0), NULL, CGSizeMake(width, CGFLOAT_MAX), NULL);
    CGRect tempRect = CGRectMake(0, 0, _textContentView.bounds.size.width, suggestedSize.height);
    UIBezierPath *path = [UIBezierPath bezierPathWithRect:tempRect];
    CTFrameRef ctfr = CTFramesetterCreateFrame(ctfsr, CFRangeMake(0, 0), [path CGPath], NULL);
    NSArray* lines = (__bridge NSArray*)CTFrameGetLines(ctfr);
    NSLog(@"%@", lines); 
```

如何在不添加任何符号的情况下创建新行？

# ruby-on-rails - 范围内的类方法或外部联接

> ID：11902220
> 
> 赞同：0
> 
> 时间：2012-08-10T13:02:23.293
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我花了一整天的时间来完成这项工作，对我来说，结果有点难看。当然必须有更好的方法，几乎​​可以肯定，我不知道。

我有一个模型 - 任务，它有很多（或没有！）时间日志

直到现在我用一个实例方法来判断它是否启动了？或！开始？

```
 def started?
    time_logs.length > 0
  end 
```

但是在创建范围时，我发现我无法将此方法实现到查询中。如果有办法，我真的很想知道，因为我遇到了一些类似的问题。

我解决这个问题的方法是通过连接将其重构为适当的数据库范围：

```
 scope :started, joins(:time_logs).uniq 
```

很漂亮，反过来呢？

```
scope :not_started, joins("LEFT OUTER JOIN time_logs ON tasks.id = time_logs.task_id").where("time_logs.task_id is null") 
```

布莱尔。确定不是吗？

它可以工作，但我一直希望我会遇到一个 NOT 运算符，它会返回第一个范围没有返回的所有内容，或者“Task.all - Task.started”类型的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:24:40.770

我真的不认为有任何更好的解决方案，但是这应该具有良好的性能：

```
scope :not_started, where("ID NOT IN (SELECT task_id FROM time_logs)") 
```

# iphone - UIScrollView 动态调整 UILabel 的大小

> ID：11902223
> 
> 赞同：0
> 
> 时间：2012-08-10T13:02:28.380
> 
> 标签：iphone, ios, xcode, cocoa-touch, uiscrollview

我有一个非静态的 UILabel。

我想调整滚动视图的大小以使其适合标签。

这是我现在的想法：

```
self.scrollView.contentSize = CGSizeMake(320.0, 92+self.contentLabel.frame.size.height); 
```

92 代表我的标签开始的像素。（也有标题）

但它不起作用，它似乎也与 Interface Builder 连接。

多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:41:53.303

您还需要设置框架。`contentSize`滚动视图只是其中的内容，而不是视图本身的框架。如果`contentSize`大于框架，它将导致滚动。

```
CGSize buttonSize =  CGSizeMake(320.0, 92+self.contentLabel.frame.size.height);
self.scrollView.contentSize = buttonSize;
self.scrollView.frame = CGSizeMake(0, 0, 320.0, buttonSize.width, buttonSize.height); 
```

# c# - 如何优化 ajax 调用的 WCF 服务？

> ID：11902226
> 
> 赞同：0
> 
> 时间：2012-08-10T13:02:29.547
> 
> 标签：c#, jquery, .net, ajax, wcf

我有一个托管在 IIS 上的 wcf REST 应用程序。一切正常，GET 和 POST。我通过 jquery ajax 调用。

我的客户端应用程序似乎反应不快，我在浏览器控制台日志中检查了导致它非常慢的原因，发现我的 WCF 请求占用了很多时间。我有 4 个请求，每个请求都不少于 350 毫秒，还有其他 js 和 css 文件。JS 和 CSS 文件已经被缩小了。现在我的问题是如何减少花费在 WCF 调用上的时间？顺便说一句，我不能做异步，因为来自服务的每个响应都是另一个请求所需要的。

如果您有任何建议，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:05:25.757

如果由于请求依赖而无法执行异步操作，则可以尝试减少要发送的请求数量：因此，不要使用 4 个单独的小请求，而是执行一个更大的请求。

另一种可能性是，一旦第一个请求在成功回调中成功，就执行下一个请求，以此类推。这样，您就可以在这些请求期间执行异步操作并且不会冻结客户端浏览器。但是通常最好做一个请求。

> 现在我的问题是如何减少花费在 WCF 调用上的时间？

这显然取决于您的 WCF 服务在做什么。

# c - OpenGL多线程比使用单线程慢

> ID：11902228
> 
> 赞同：1
> 
> 时间：2012-08-10T13:02:34.540
> 
> 标签：c, multithreading, opengl

我正在使用 Windows 7 并使用 VC++ 2010，这是一个 32 位应用程序

我试图让我的渲染器多线程工作，但事实证明我让它比不使用多线程慢。

我希望它具有将渲染命令添加到列表的主线程，以及执行这些命令渲染的工作线程。

这一切都发生了，它可以很好地绘制到屏幕上，但是这样做时我得到的fps更少......

我使用 Fraps 中的基准测试工具来获取这些数据：

时间是基准测试的时间，在本例中为 30 秒。

最小值、最大值、平均值都是 FPS 值。

使用多线程：

```
 Frames, Time (ms), Min, Max, Avg
     28100,     30000, 861,1025, 936.667 
```

没有多线程：

```
Frames, Time (ms), Min, Max, Avg
 21483,     30000, 565, 755, 716.100 
```

这是一些伪代码（带有相关的事件函数调用）：

```
Main Thread:
    Add render comands to queue
    ResetEvent (renderCompletedEvent);
    SetEvent (renderCommandsEvent);
    WaitForSingleObject (renderCompletedEvent, INFINITE);

Render Thread:
    WaitForSingleObject (renderCommandsEvent, INFINITE);
    Process commands
    SetEvent (renderCompletedEvent);
    ResetEvent (renderCommandsEvent); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T13:41:32.167

为什么你会期望这会更快？

只有一个线程在做任何事情，您在一个线程中创建命令并在另一个线程中创建信号并等待它完成，这将与在第一个线程中执行它一样长，只是开销更大。

要利用多线程，您需要确保两个线程同时执行某些操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T22:48:23.797

我不是opengl专家，但总的来说，重要的是要意识到线程实际上并不是用来加速的，它们是为了保证某些子系统*以整体速度为代价做出*响应。那就是可能保留一个 gui 线程和一个网络线程，以确保 gui 和网络是响应式的。这实际上是以性能为*代价的*到主线程。CPU 将把 1/3 的时间分配给主线程，将 1/3 的时间分配给网络线程，将 1/3 的时间分配给 gui 线程，即使没有要处理的 gui 事件并且什么也没有进出网络。因此，无论主线程正在做什么，它只获得非多线程情况下 CPU 时间的 1/3。好处是，如果大量数据开始通过网络到达，则总是保留 CPU 时间来处理它（如果没有，这可能会很糟糕，因为网络缓冲区可以被填充，然后额外的数据开始被丢弃或覆盖）。可能的例外是，如果多个线程在不同的内核上运行。但是，即使这样也要小心，内核可以共享相同的缓存，因此如果两个内核使彼此的缓存无效，性能可能会急剧下降，没有改善。如果内核共享一些资源来将数据移入和移出 GPU 或具有一些其他共享的限制资源，这可能再次导致性能损失，而不是收益。

简而言之，单个 CPU 系统上的线程始终与子系统的响应能力有关，而不是性能。当不同的线程在多个内核上运行时，可能会获得性能提升（默认情况下，windows 似乎通常不会这样做，但可以强制执行）。但是，当这些内核共享一些可能会损害而不是帮助性能的资源时，这样做会出现潜在的问题，例如共享缓存空间或您的上下文中的一些共享 GPU 相关资源。

# operating-system - 内核是一个始终执行的特殊程序吗？为什么是这些 CPU 模式？

> ID：11902240
> 
> 赞同：5
> 
> 时间：2012-08-10T13:03:02.030
> 
> 标签：operating-system, kernel, cpu

我是这个操作系统的新手。由于内核控制着所有其他程序的执行以及它们所需的资源，我认为它也应该由 CPU 执行。如果是这样，它在哪里执行？如果我认为CPU应该执行什么是**由**内核控制的，那么如果CPU正在执行内核本身，内核如何控制CPU！！！..

这对我来说似乎是一个**悖论**......请解释......顺便说一下，我根本没有得到这些CPU模式......如果内核正在控制所有进程......那为什么是这些CPU模式？如果它们在那里，那么它们是由软件（OS）还是硬件本身实现的？

谢谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T13:08:22.607

一个快速的答案。在 x86 等平台上，内核可以完全控制 CPU 的中断和上下文切换能力。因此，尽管内核大部分时间都没有运行，但它经常有机会决定 CPU 将切换到哪个程序并允许该程序运行一些程序。这部分内核称为[调度程序](https://en.wikipedia.org/wiki/Scheduling_%28computing%29)。除此之外，每次程序进行系统调用（例如访问某些硬件的请求，例如磁盘驱动器等）时，内核都有机会执行。

PS 内核可以停止正在运行的程序、控制 CPU 并调度不同的程序这一事实称为[抢占式多任务](https://en.wikipedia.org/wiki/Preemptive_multitasking)

更新：关于 CPU 模式，我假设您的意思是 x86 风格的[环](https://en.wikipedia.org/wiki/Ring_%28computer_security%29)？这些是 CPU 上当前执行代码的权限级别，允许 CPU 决定当前运行的程序是否是“内核”并且可以为所欲为，或者它可能是一个不能做的较低权限级别的程序某些事情（例如强制上下文切换或摆弄虚拟内存）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T13:08:13.910

没有悖论：

内核是在它控制的机器上运行的“程序”。它在机器启动时由引导加载程序加载。

它的任务是为应用程序提供服务和控制应用程序。为此，它必须控制运行它的机器。

有关详细信息，请在此处阅读：[http ://en.wikipedia.org/wiki/Operating_System](http://en.wikipedia.org/wiki/Operating_System)

# ios-simulator - iOS 5.1 上的 Xcode 4.4 构建成功，但在模拟器上运行挂起并显示调试消息“无法附加到进程 ID” '

> ID：11902241
> 
> 赞同：6
> 
> 时间：2012-08-10T13:03:02.010
> 
> 标签：ios-simulator, osx-mountain-lion, ios5.1, xcode4.4

症状：从 Xcode 4.4（和 4.4.1）运行任何 iOS 5.1 应用程序都会启动 iPhone 模拟器，但会导致纯黑屏。在 Xcode 控制台中，会显示消息“error: Failed to attach process to id”，每次都不一样。尝试从 Xcode 中“停止”应用程序不会执行任何操作，只有 Force Quit 才会将 Xcode 返回到工作状态。按模拟器上的“主页”按钮显示应用程序已成功安装。有时，从模拟器打开应用程序会显示 UI，但不会显示控制台消息，即使在手动执行“产品->附加到进程”之后也是如此。

尝试的解决方案：Xcode 4.3.x 最初安装在 Lion 上，运行良好。问题开始于 8 月初安装 Xcode 4.4 时，该项目之前正在运行。我升级到山狮，没有帮助。我重新安装了 Xcode，没有帮助。我在 8 月 7 日升级到 4.4.1，没有帮助。我删除了 Xcode 数据的所有痕迹，运行：find / -name ' *[xX]code* ' 并删除所有看起来相关的超级文件夹。这（不足为奇）导致了一些操作系统问题，因为随后重新安装 Xcode 不起作用。然后我又做了一次，重新安装了 Mountain Lion（以恢复我可能杀死的一些操作系统文件），然后重新安装了 Xcode 4.4.1。

对于项目，我通常每次都运行新的单视图项目。最近我尝试使用Apple 的[这个](https://developer.apple.com/library/ios/#samplecode/Tabster/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011213)示例项目，每个链接 3 下面。我尝试了所有干净的构建等，但老实说，人们会认为打开一个新项目应该可以工作。只是为了好玩，我有时会在 iPhone 故事板中放置一个“标签”对象。

在做了一些功课之后，我设法找到了以下与我最相似的问题，但没有一个是准确的，也没有任何解决方案有效（按照相关性递减的顺序）：

1.  [xcode-4-4-ios-5-1-simulator-problems](https://stackoverflow.com/questions/11691035/xcode-4-4-ios-5-1-simulator-problems)
2.  [xcode-4-4-for-mac 崩溃](https://stackoverflow.com/questions/11813151/crash-of-xcode-4-4-for-mac)
3.  [无法附加到进程 ID-xcode](https://stackoverflow.com/questions/11535844/failed-to-attach-to-process-id-xcode)
4.  [unit-test-target-doesnt-run-on-xcode-4-5](https://stackoverflow.com/questions/11688720/unit-test-target-doesnt-run-on-xcode-4-5)
5.  [xcode-4-4-freezing-on-project-close](https://stackoverflow.com/questions/11817771/xcode-4-4-freezing-on-project-close)
6.  [模拟器保持崩溃在 xcode-4-4](https://stackoverflow.com/questions/11691531/simulator-keeps-crashing-in-xcode-4-4)

任何帮助将不胜感激。我为不够简洁而道歉，但我花了大约 15 个小时试图找到/实施一个看似微不足道的问题的解决方案，我宁愿提供所有相关信息，也不愿让你猜测我做了什么。我不会指定所有的构建信息，只是因为它是全新安装的 Xcode 中的任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T10:38:46.687

我遇到了类似的问题（尽管配置不同）并且偶然发现了非常简单的解决方案。我只是使用 Product->Stop，然后使用 Product->Run（如果重要的话，通过键盘快捷键）。就一次！然后问题就消失了。

配置：XCode 4.2，iPhone Simulator 5.0 症状区别：进程附加没有失败

在我看来，问题源于 XCode-Simulator 通信，这就是为什么我在这里分享我的经验，尽管存在差异。

编辑：它出来了停止；Run 没有为我提供永久的解决方案。问题不时出现。对我来说，这仍然是一个临时的解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T00:54:01.050

我遇到过几次，尤其是当我继续运行我的应用程序并经常取消它或中断它时，这不是你可以指望的事情，但是是的，我总是设法通过删除应用程序中的应用程序来恢复并运行模拟器，清理项目和构建文件夹，删除派生数据（在 Xcode 管理器 > 项目视图中），重新启动模拟器和 Xcode。

这在设备上也发生了几次，我需要重新启动设备，在我的情况下是 iPhone。我希望这些信息对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T18:31:07.187

我通过使用 Xcode 4.5 开发者预览版构建和运行模拟器来实现这一点。然后我将其关闭并重新打开 Xcode 4.4.1，它构建并运行良好。

虽然上述解决方案都不适合我，但感谢您将所有这些放在一起。我想我会在这里回答，因为这是最全面的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T13:41:46.687

虽然这并不完全是一个解决方案，但在今天 Apple 的 OSX 10.8.1 更新之后，这个问题已经得到解决。可以肯定地说，在安装 Mountain Lion 和 Xcode 4.4 的过程中出现了一些错误，这些错误已通过此次 OSX 更新修复。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T18:40:28.583

我想我已经为我的特殊情况破解了这个，我承认这是一个只有新手应该做的错误，但我已经覆盖了

*   `viewWillApear:(bool)animated {}`在我的 ViewController 中，无需回调*   `[super viewWillApear:animated]`

搜索项目中的所有视图生命周期方法并查看是否有类似问题可能是个好主意。

# performance - OpenGL 性能问题

> ID：11902247
> 
> 赞同：0
> 
> 时间：2012-08-10T13:03:36.520
> 
> 标签：performance, opengl, textures, vbo

我正在使用 LWJGL 和 Java 1.6 编写 2D RPG。到目前为止，我有一个“World”类，它包含一个 Tile 的 ArrayList（与每个 Tile 的基本代码的接口）和一个 GrassTile 类，它使用 Spritesheet。

当使用即时模式绘制 64x64 GrassTiles 网格时，我得到大约 100 FPS，并通过从 ArrayList 中的每个图块调用 .draw() 方法来执行此操作，该方法绑定 spritesheet 并绘制它的某个区域（使用 glTexCoord2f() ）。所以我听说最好使用 VBO，得到一个基本教程并尝试在 .draw() 方法上实现它们。

现在有两个问题：我不知道如何仅将纹理的某个区域绑定到 VBO（整个纹理将只是 glBindTexture()）所以我尝试仅将它们与颜色一起使用。这将我带到第二个问题：我只有 +20 FPS（总共 120），这并不是我所期望的，所以我想我做错了什么。此外，我在 ArrayList 中迭代时为每个 GrassTile 制作了一个 VBO。我认为这是错误的，因为我可以简单地将所有图块放入一个 FloatBuffer 中。

那么，如何以更好的方式绘制相似的几何图形，以及如何仅将纹理的某个区域绑定到 VBO？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T21:05:22.170

这是关键：

> 我在 ArrayList 中迭代时为每个 GrassTile 制作一个 VBO。

不要这样做。您制作一次 VBO，然后在必要时对其进行更新。制作纹理、VBO、着色器是 OpenGL 最慢的使用方式——难怪你会遇到帧率问题——你*每帧都*做了 O(n) 次。

> 我认为这有点不对，因为我不能['t?] 简单地将所有图块扔到一个 FloatBuffer 中。

只有在批量绘制调用时才能获得性能。这意味着当您绘制瓷砖时，您应该使用*一个*VBO一次绘制*所有瓷砖。*

 *```
//Initialize
Make a single VBO (or two: one for vertex, one for texture
coordinates, whatever--the key point is O(1) VBOs).
Fill your VBO with ALL of your tiles' data.

//Main loop
while (true) {
    Draw the VBO with a single draw call,
    thus drawing all your tiles all at once.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T15:47:29.200

> 那么，我怎样才能以更好的方式绘制相似的几何图形......

就像@Ian Mallett 描述的那样；将所有顶点数据放入*单个*顶点缓冲区对象中。这使得一次调用即可呈现您的地图。*如果*您的地图变大 1000 倍，您可能希望实现一个仅绘制屏幕上显示的顶点的相机解决方案，但如果您计划绘制更大的地图，那么稍后会出现这个*问题*。

> ...以及如何仅将纹理的某个区域绑定到 VBO？

您只能绑定整个纹理。您必须*指向*要映射的纹理的某个区域。

每个纹理坐标都与一个特定的顶点相关。每个图块都与四个顶点有关。游戏中的常见图块*将*共享相同的纹理，因此称为“图块地图”。好好利用它。将所有瓷砖纹理放在纹理表中并绑定该纹理表。对于您创建的每个新“图块”，检查该区域是空气、草地还是地面，然后指向与您想要的纹理对应*的部分。*

假设您的纹理区域（以像素为单位）为 100x100。地面区域是从左下角算起的 15x15。按照上面的逻辑解释下面显示的示例代码：

```
// The vertexData array simply contains information
// about a tile's four vertices (or six 
// vertices if you draw using GL_TRIANGLES).

mVertexBuffer.put(0, vertexData[0]);
mVertexBuffer.put(1, vertex[1]);
mVertexBuffer.put(2, vertex[2]);
mVertexBuffer.put(3, vertex[3]);
mVertexBuffer.put(4, vertex[4]);
mVertexBuffer.put(5, vertex[5]);
mVertexBuffer.put(6, vertex[6]);
mVertexBuffer.put(7, vertex[7]);
mVertexBuffer.put(8, vertex[8]);
mVertexBuffer.put(9, vertex[9]);
mVertexBuffer.put(10, vertex[10]);
mVertexBuffer.put(11, vertex[11]);

if (tileIsGround) {
   mTextureCoordBuffer.put(0, 0.0f);
   mTextureCoordBuffer.put(1, 0.0f);

   mTextureCoordBuffer.put(2, 0.15f);
   mTextureCoordBuffer.put(3, 0.0f);

   mTextureCoordBuffer.put(4, 0.15f);
   mTextureCoordBuffer.put(5, 0.15f);

   mTextureCoordBuffer.put(6, 0.15f);
   mTextureCoordBuffer.put(7, 0.0f);
} else { /* Other texture coordinates. */ } 
```

您实际上编写了解决方案。唯一的区别是您应该将纹理坐标数据上传到 GPU。*

# ruby-on-rails-3 - 分组和fields_for

> ID：11902248
> 
> 赞同：5
> 
> 时间：2012-08-10T13:03:38.377
> 
> 标签：ruby-on-rails-3, fields-for

我正在尝试创建一个表单，该表单允许我为关联输入分组的关联提交新记录。

```
 class Product < AR::Base
     has_many :properties
     accepts_nested_attributes_for :properties
   end 
```

请注意，在控制器中为产品构建了一系列属性，因此`@product.properties.empty? # => false`.

下面`fields_for`给了我正确的输入，例如`product[properties_attributes][0][value]`.

```
= form.fields_for :properties do |pform|                                                                                                                               
  = pform.input :value 
```

但是，一旦我尝试对关联进行分组，它就不再生成具有正确名称的输入：

```
- @product.properties.group_by(&:group_name).each do |group_name, properties|
  %h3= group_name                                                       
  = form.fields_for properties do |pform|                                                                                                                               
    = pform.input :value 
```

这会创建`name`属性喜欢的输入，而`product[product_property][value]`实际上它应该`product[property_attributes][0][value]`与第一个示例一样。

Rails 文档建议您可以这样做：

```
= form.fields_for :properties_attributes, properties do |pform| 
```

但这给出了一个错误“数组的未定义方法值”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T21:14:02.190

你需要这样设置：

```
- @product.properties.group_by(&:group_name).each do |group_name, properties|
  %h3= group_name
  = form.fields_for :properties, properties do |pform|
    = pform.text_field :value 
```

它应该可以正常工作，因为您有`accepts_nested_attributes_for :properties`rails 知道它应该为`properties_attributes`. `attr_accessible :properties_attributes`此外，如果您使用的是最新的 Rails 之一并且尚未将其添加到模型中，则可能需要添加 ；）

此外，如果您想根据单个属性做出一些决定，您也可以使用以下表格：

```
- @product.properties.group_by(&:group_name).each do |group_name, properties|
  %h3= group_name
  - properties.each do |property|
    = form.fields_for :properties, property do |pform|
      = pform.text_field :value 
```

它们都在这里得到很好的描述：http: [//api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)`One-To-Many`部分下

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T18:57:31.350

我不知道这类事情有一个干净的“Rails”解决方案，但我经常更手动地处理这些类型的情况。例如 - 遍历组并有条件地仅显示特定组中的那些属性。

```
class Product < AR::Base
  has_many :properties
  accepts_nested_attributes_for :properties

  def group_names
    properties.map(&:group_name).uniq.sort
  end
end 
```

在视图中

```
- for group_name in product.group_names
  = form.fields_for :properties do |pform|
    %h3= group_name
    - if pform.object.group_name.eql?(group_name)
      = pform.input :value 
```

重复从产品中获取属性列表可能会有一点开销。您可以修改您的 has_many :properties 关联以按 group_name 顺序检索属性 - 然后您可以在 %h3 是一个新组时添加它。

```
- previous_group_name = nil
= form.fields_for :properties do |pform|
  - if pform.object.group_name != previous_group_name
    %h3= pform.object.group_name
  = pform.input :value
  - previous_group_name = pform.object.group_name 
```

给你一些想法...

# c# - c#在上下文菜单中模拟点击

> ID：11902251
> 
> 赞同：0
> 
> 时间：2012-08-10T13:03:45.057
> 
> 标签：c#, winforms, click, simulate, contextmenu

所以我的问题是：我在 C# 中有一个 Windows 窗体应用程序，在这个应用程序中有一个 webBrowser 控件。例如，当您右键单击 youtube 中的视频时，会出现一个上下文菜单。现在，是否可以以编程方式在 webBrowser 控件中单击鼠标右键，然后再次以编程方式单击该上下文菜单中的特定条目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:53:03.667

您真的必须模拟上下文菜单的单击，还是仅仅拥有所需的操作就足够了？如果是这样，您可以从 ContextMenu.Items 列表中获取项目并假设它是一个按钮引发其 Click 事件。如果您确实需要在执行此操作时至少显示上下文菜单，您可以调用 ContextMenu.Show 事件。这一切都假设您的 WebBrowser 控件的上下文菜单是公共的（而不是隐藏它的第三方继承控件或其他东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:07:08.560

是的，但您总是必须从同一个像素开始，或者更好地说是实际的像素范围，因此您可以确定单击的结果将是所需的结果。你也不能通过指定它的文本来点击一个项目，你必须从图形的角度做所有的事情（只在 X - Y 轴上工作，因为它只有二维）。这就是大多数网络机器人用于各种目的的方式。

# python - 返回功能码

> ID：11902253
> 
> 赞同：1
> 
> 时间：2012-08-10T13:03:47.990
> 
> 标签：python

> **可能重复：**
> [如何获取 Python 函数的源代码？](https://stackoverflow.com/questions/427453/how-can-i-get-the-source-code-of-a-python-function)

如何返回我的函数的代码？func_name 方法按预期工作，但 func_code 没有

```
>>> def testthis(): print 'test successful'
>>> testthis()
test successful

>>> testthis.func_name
'testthis'
>>> testthis.func_code
<code object testthis at 0124D728, file "<pyshell#281>", line 1> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:08:42.637

您可以使用

> 检查.getsourcelines(function_name)

为了得到他的代码。

```
In [1]: def testthis(): print "hello"

In [2]: import inspect

In [3]: inspect.getsourcelines(testthis)
Out[3]: ([u'def testthis(): print "hello"\n'], 1) 
```

# c - 在多台计算机之间共享内存？

> ID：11902257
> 
> 赞同：3
> 
> 时间：2012-08-10T13:03:59.300
> 
> 标签：c, linux, memory, memory-management

我想在多台计算机周围共享某些内存区域，即用于 C/C++ 项目。当计算机 B 上的某些东西访问当前位于计算机 A 上的某个内存区域时，必须将其锁定在 A 上并发送到 B。当它唯一兼容 linux 时我很好。

先谢谢了

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T13:49:35.520

您不能对简单的 C/C++ 项目执行此操作。

普通计算机硬件不具有直接支持这一点的物理属性：一个系统上的内存不能被另一个系统读取。

为了使不同机器上的 C/C++ 程序看起来它们正在共享内存，您必须编写提供此功能的软件。通常，您需要执行以下操作：

1.  在（每个进程的）虚拟内存地址空间中分配一些页面。
2.  将这些页面标记为只读。
3.  设置处理程序以接收进程尝试写入只读内存时发生的异常。（这个处理程序可能在操作系统中，作为某种内核扩展，或者它可能是您进程中的信号处理程序。）
4.  当收到异常时，确定进程试图写入内存的内容。将其写入页面（可能通过虚拟内存中的单独映射将其写入同一物理内存，并将此额外映射标记为可写）。
5.  通过网络通信向另一台机器发送一条消息，告诉它内存已更改。
6.  在写入内存的指令之后的进程中恢复执行。

此外，您需要确定如何处理内存一致性：如果两个进程几乎同时写入内存中的同一地址，会发生什么情况？如果进程 A 写入位置 X，然后读取位置 Y，而进程 B 几乎同时写入位置 Y 并读取位置 X，他们会看到什么？如果两个进程看到的数据不可能是单个时间序列写入内存的结果，是否可以？

最重要的是，这在时间上非常昂贵：需要异常处理和网络操作的内存存储时间是正常存储到内存的数千倍，可能是数十万倍。每当您的进程写入此共享内存时，它们的执行速度都会非常缓慢。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-10T13:38:35.287

如评论中所述，有软件解决方案。它们使用节点上处理器中的分页硬件来检测访问，并使用本地网络结构将更改传播到内存。一种硬件替代方案是反射内存 - 您可以在此处阅读有关它的更多信息：

[https://en.wikipedia.org/wiki/Reflective_memory](https://en.wikipedia.org/wiki/Reflective_memory) [http://www.ecrin.com/embedded/downloads/reflectiveMemory.pdf](http://www.ecrin.com/embedded/downloads/reflectiveMemory.pdf)

[旧页面已损坏](https://web.archive.org/web/20160304102352/http://www.ecrin.com/embedded/downloads/reflectiveMemory.pdf)

[http://www.dolphinics.com/solutions/embedded-system-reflective-memory.html](http://www.dolphinics.com/solutions/embedded-system-reflective-memory.html)

反射内存在环形或树形配置中提供低延迟（每跳约 1 微秒）。

# python - 更新列表中的元组

> ID：11902259
> 
> 赞同：3
> 
> 时间：2012-08-10T13:04:17.533
> 
> 标签：python, list, tuples

好的，所以我想做类似的事情：

```
if title and articleNumber in listOfData:
    listOfData[articleNumber].update(title, articleNumber, None, oldvariants + variants)
else:
    listOfData.append((title, articleNumber, None, variants)) 
```

我意识到语法不正确，但由于我不知道我想做什么，所以我将其描述为我想要使用的语法:) 文章编号是一个大整数（我不知道它是否可以从 0 开始）

请注意，我不想使用字典，因为 listOfData 应该与代码的其他部分具有相同的格式。（这很不幸，因为我正在解析的文章在某些情况下分为几行，这使我需要检查它是否已经在列表中）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:08:03.160

根据其定义，您不能就地更新元组。它是不可变的。但是，您可以完全更换它。

```
if title and articleNumber in listOfData:
    listOfData[articleNumber] = (title, articleNumber, None, oldvariants + variants)
else:
    listOfData.append((title, articleNumber, None, variants)) 
```

`update`是一种添加条目的字典方法，这让我认为您可能试图让数据列表中的一个条目包含多个元组。如果是这种情况，您将需要不同的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:07:45.583

有什么问题

```
listOfData[articleNumber] = (title, articleNumber, None, oldvariants + variants) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T15:10:40.580

我想你的意思是

```
if title == listOfData[articleNumber][0]:
    oldvariants=lisOfData[articleNumber][3]
    listOfData[articleNumber]=(title, articleNumber, None, oldvariants + variants)
else:
    listOfData.append((title, articleNumber, None, variants)) 
```

**编辑**

纠正if中的错误

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T09:52:27.183

我最终像字典一样将键作为元组（articleNumber，title）

```
if (articleNumber,title) in dictionaryContent:
     dictionaryContent[(articleNumber,title)] += variants
else:
     dictionaryContent[(articleNumber,title)] = variants 
```

然后将其转换为列表：

```
for (articleNumber, title) in dictionaryContent.keys():
    listOfData.append((title, articleNumber, None, dictionaryContent[item])) 
```

# javascript - Youtube Unsafe JavaScript 尝试使用 URL 访问框架

> ID：11902260
> 
> 赞同：5
> 
> 时间：2012-08-10T13:04:21.823
> 
> 标签：javascript, youtube, youtube-api, youtube-javascript-api

这里我有另一个问题，这次是关于 youtube API。我正在使用此代码获取 youtube 播放器：

```
<div id=\"youtubeVideoContainer\"></div><script type=\"text/javascript\">
                        //Load player api asynchronously.
                        var tag = document.createElement('script');
                        tag.src = \"//www.youtube.com/player_api\";
                        var firstScriptTag = document.getElementsByTagName('script')[0];
                        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

                        var player;
                        function onYouTubePlayerAPIReady() {
                            player = new YT.Player('youtubeVideoContainer', {
                              height        : \"".$height."\",
                              width         : \"".$width."\",
                              videoId       : \"".$id."\",
                              playerVars    : ".json_encode($this->playerParams)."
                            });
                        }
                    </script> 
```

请不要介意\"，它是用PHP渲染的，所以它只是为了转义，而且，视频正在播放，所以没有大错误:)

让我烦恼的是，每次我请求视频时，我都会在控制台中看到这条消息：不安全的 JavaScript 尝试使用 URL 访问框架

> [https://www.socialthisday.com/playwin/admin/content/edit/project_1/home.html](https://www.socialthisday.com/playwin/admin/content/edit/project_1/home.html) 来自带有 URL [https://www.youtube.com/embed/2UJH9dCtp7w?autohide=1&autoplay=1&controls=0&border&cc_load_policy=0&color&color1&color2&disablekb&enablejsapi的框架=1&egm&fs&hd&iv_load_policy&loop&modestbranding=1&origin=https%3A%2F%2Fwww.socialthisday.com&playerapiid&playlist&rel=0&showinfo=0&showsearch&start&theme&version=3](https://www.youtube.com/embed/2UJH9dCtp7w?autohide=1&autoplay=1&controls=0&border&cc_load_policy=0&color&color1&color2&disablekb&enablejsapi=1&egm&fs&hd&iv_load_policy&loop&modestbranding=1&origin=https%3A%2F%2Fwww.socialthisday.com&playerapiid&playlist&rel=0&showinfo=0&showsearch&start&theme&version=3)。域、协议和端口必须匹配。

我想解决这个问题，所以我看不到该消息。我知道这并不是一件大事，但我现在喜欢如何在我的网站上获得一个 youtube 播放器而不会看到上面的警告。

希望你们能帮助我！

编辑：这是输出：

```
<div id="YTcontainer_502513c7ebc1b">&nbsp;</div>
                        <script type="text/javascript">
                            //Load player api asynchronously.
                            var tag = document.createElement('script');
                            tag.src = "//www.youtube.com/iframe_api";
                            var firstScriptTag = document.getElementsByTagName('script')[0];
                            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

                            var YTplayer_502513c7eb834;                                                        
                            window.onYouTubeIframeAPIReady = function() {
                                YTplayer_502513c7eb834   = new YT.Player("YTcontainer_502513c7ebc1b", {
                                  height        : "200",
                                  width         : "200",
                                  videoId       : "2UJH9dCtp7w",
                                  playerVars    : {"autohide":1,"autoplay":1,"controls":0,"border":"","cc_load_policy":0,"color":"","color1":"","color2":"","disablekb":"","enablejsapi":"","egm":"","fs":"","hd":"","iv_load_policy":"","loop":"","modestbranding":1,"origin":"","playerapiid":"","playlist":"","rel":0,"showinfo":0,"showsearch":"","start":"","theme":"","version":3,"wmode":"opaque"}
                                });
                            }

                            if(window.YT){
                                onYouTubeIframeAPIReady();
                            }
                        </script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T19:46:17.443

根本问题是[http://code.google.com/p/chromium/issues/detail?id=17325](http://code.google.com/p/chromium/issues/detail?id=17325)

一旦解决了这个问题，使用 YouTube`iframe`嵌入的页面上的 JavaScript 控制台中的警告应该会消失 - 当然对于 Chrome，我相信对于 Safari 也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:08:41.927

检查“使用旧的嵌入代码”

它将使用`<object>`标签嵌入视频

# asp.net-mvc - 获取存储在 sharepint 文档库中的文件的完整路径

> ID：11902261
> 
> 赞同：0
> 
> 时间：2012-08-10T13:04:23.463
> 
> 标签：asp.net-mvc, sharepoint, c#-4.0

我有一个文件存储在共享点库中，例如
filePathAndName = "http://spstore/sites/appsitename/documentlibraryname/abc.xls"

我需要能够使用 byte[] buffer = System.IO.File.ReadAllBytes(filePathAndName); 打开 abc.xls 文件

但我收到一个错误说明。不支持 uri 格式。如何获取文件的完整路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:08:37.927

您必须先下载文件。例如，您可以使用[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)向远程服务器发送 HTTP 请求并检索文件内容：

```
using (var client = new WebClient())
{
    byte[] file = client.DownloadData("http://spstore/sites/appsitename/documentlibraryname/abc.xls");
    // TODO: do something with the file data
} 
```

# python - Django - 用户全名作为 unicode

> ID：11902262
> 
> 赞同：8
> 
> 时间：2012-08-10T13:04:48.737
> 
> 标签：python, django, django-models, django-users

我有很多模型链接到`User`，我希望我的模板总是显示他的全名（如果有的话）。有没有办法改变默认值`User` `__unicode__()`？还是有其他方法可以做到这一点？

我注册了一个配置文件模型，我可以在其中定义`__unicode__()`，我应该将我的所有模型链接到它吗？对我来说似乎不是一个好主意。

* * *

想象一下我需要显示这个对象的表单

```
class UserBagde
    user = model.ForeignKey(User)
    badge = models.ForeignKey(Bagde) 
```

我将不得不选择`__unicodes__`每个对象的框，不是吗？
我怎样才能在用户的名字中有全名？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-10T13:14:44.760

试试这个：

```
User.full_name = property(lambda u: u"%s %s" % (u.first_name, u.last_name)) 
```

# 编辑

显然你想要的已经存在..

[https://docs.djangoproject.com/en/dev/ref/contrib/auth/#django.contrib.auth.models.User.get_full_name](https://docs.djangoproject.com/en/dev/ref/contrib/auth/#django.contrib.auth.models.User.get_full_name)

# 还

如果必须替换 unicode 函数：

```
def user_new_unicode(self):
    return self.get_full_name()

# Replace the __unicode__ method in the User class with out new implementation
User.__unicode__ = user_new_unicode 

# or maybe even
User.__unicode__ = User.get_full_name() 
```

# 如果名称字段为空，则回退

```
def user_new_unicode(self):
    return self.username if self.get_full_name() == "" else self.get_full_name()

# Replace the __unicode__ method in the User class with out new implementation
User.__unicode__ = user_new_unicode 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T13:10:55.560

如果您[按照 Django 的建议设置了](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)配置文件模型，则可以在该模型上定义全名

```
from django.contrib.auth.models import User

class UserProfile(models.Model):
    user = models.OneToOneField(User)
    ...

@property
def full_name(self):
    return "%s %s" % (self.user.first_name, self.user.last_name) 
```

然后在您可以访问`user`对象的任何地方都可以轻松完成`user.get_profile.full_name`

或者，如果您只需要模板中的全名，您可以编写一个[简单的标签：](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#simple-tags)

```
@register.simple_tag
def fullname(user):
    return "%s %s" % (user.first_name, user.last_name) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-16T16:59:07.553

像这样猛烈抨击`get_full_name`这种`__unicode__`方法

```
User.__unicode__ = User.get_full_name 
```

确保用可调用的而不是函数的结果覆盖它。`User.get_full_name()`将因左括号和右括号而失败。

放在任何包含的文件上，你应该会很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T04:31:51.900

我发现在 Django 1.5 中有一个快速的方法来做到这一点。检查这个： [自定义用户模型](https://docs.djangoproject.com/en/1.5/topics/auth/#customizing-the-user-model)

我也注意到，

```
User.__unicode__ = User.get_full_name() 
```

Francis Yaconiello 的哪些方法对我不起作用（Django 1.3）。会引发这样的错误：

```
TypeError: unbound method get_full_name() must be called with User instance as first argument (got nothing instead) 
```

# c# - 为什么 windows 服务无法访问文件登录屏幕？

> ID：11902264
> 
> 赞同：0
> 
> 时间：2012-08-10T13:04:55.427
> 
> 标签：c#, windows-services

我在 C#.NET 中开发了 windows 服务，现在当用户重新启动计算机时，服务会在 windows 欢迎（登录）页面中自动启动，当服务启动时，它应该在 c: 驱动器中创建一个文件夹，如果它不可用或未创建以前，现在的问题是没有创建这个文件夹！

登录帐户后，我尝试停止并启动服务，一切正常并创建文件夹！但是如果我停止服务并删除文件夹并重新启动计算机，当服务自动启动时，服务无法在欢迎登录页面中创建文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:09:54.033

您没有权限使用您的帐户，您必须在不同的 ServiceAccount 中启动服务，尝试使用 localSystem。

[http://msdn.microsoft.com/en-us/library/system.serviceprocess.serviceaccount.aspx](http://msdn.microsoft.com/en-us/library/system.serviceprocess.serviceaccount.aspx)

# python - 使用 QPushButton 的信号/插槽中的更多信息

> ID：11902265
> 
> 赞同：1
> 
> 时间：2012-08-10T13:04:56.287
> 
> 标签：python, user-interface, pyqt, signals

当我实现单击按钮时执行的功能时，代码如下：

```
self.connect(btnBrowse, SIGNAL("clicked()"), self.browseFile) 
```

我实现了这个功能`browseFile`

```
def browseFile(self): 
```

但是当我在browseFile方法中时，我没有关于被点击按钮的信息，因为我只想`browseFile`为许多按钮实现一个功能。我该怎么做才能获得更多关于插槽的信息，例如让我的函数看起来像这样：

```
def browseFile(self, option): 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:10:05.873

连接到 lambda（或使用[functools.partial](http://docs.python.org/py3k/library/functools.html#functools.partial)）。还要注意新样式语法的使用，它更具可读性和 Python 风格。

```
self.btnBrowse.clicked.connect(lambda: self.browseFile(option)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:28:13.357

[Sender()](http://doc.qt.nokia.com/4.7-snapshot/qobject.html#sender)提供指向发送事件的按钮的指针，然后您可以读取按钮文本（或其他相关数据）以确定按下了哪个按钮

# wso2 - 使用特定系统用户进行 wso2 esb 服务调用

> ID：11902281
> 
> 赞同：2
> 
> 时间：2012-08-10T13:06:02.513
> 
> 标签：wso2, wso2esb

我将拥有一个 Web 门户，我将从该门户中调用具有“UsernameToken”安全性的服务。

出于身份验证的目的，我想在 wso2 Identity Server 中创建一个系统用户，以便我可以使用它从 ESB 调用服务。所以基本上，我想从 WSO2 身份服务器为系统用户请求一个令牌，并使用它来验证前面的 WSO2 ESB，以便我可以调用服务。

我计划使用 AuthenticationAdmin 和 UserAdmin 服务进行身份验证。

这种情况可能吗？如果不是，那么实现类似情况的好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T01:21:26.737

如果我正确理解了您的要求，我假设您正在尝试通过 WSO2 ESB 调用一组后端服务，并将“UsernameToken”作为身份验证模式。如果是这样，那么我认为您不需要使用 WSO2 IS 来创建用户，除非您计划进行更深入的身份管理。（您仍然可以使用它，但我认为它是一种开销事实上，您只想在 WSO2 IS 中创建用户）。为此，您可以使用 WSO2 ESB（或任何其他 WSO2 产品）中嵌入的用户管理功能。您只需要做的是，在 ESB 级别创建一个用户并使用这些凭据通过 ESB 调用后端服务。

希望这可以帮助。

问候， 普拉巴斯

# jquery - 选择正确的元素进行动画处理

> ID：11902282
> 
> 赞同：2
> 
> 时间：2012-08-10T13:06:09.777
> 
> 标签：jquery, html, jquery-selectors

我正在尝试使用 jQuery 做一个简单的悬停动画，但我在选择正确的标签时迷失了方向。Wordpress 并不容易。

```
jQuery(document).hover(function() {
    jQuery('img').animate({ opacity: '0.5'});
}, function() {
    jQuery('img').animate({ opacity: '1'});
}); 
```

这段代码运行良好，但正如您想象的那样，它改变了页面上每个图像的不透明度。我的问题来了：我应该放什么而不是“文档”来改变只有一张图像的不透明度？我现在已经尝试了一切：P。这是我正在开发的小网站：[www.klosinski.net](http://klosinski.net/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T13:08:16.877

**编辑 - 新答案** 要更改其自己的悬停事件中的每个图像，将该事件应用于所有 img 标签，然后用于`this`选择该元素：

```
jQuery("img").hover(function() {
    jQuery(this).animate({ opacity: '0.5'});
}, function() {
    jQuery(this).animate({ opacity: '1'});
}); 
```

下面的答案包含一些很好的信息，所以我会把它放在这里。

**下面的半无关答案**

您正在选择每个 img 标签。您需要想出一种方法来唯一标识要更改的元素。最常用和最受支持的方法是使用元素的类或 id。例如，HTML：

```
<img src="lol.png" class="fadeThese" /> 
```

JS：

```
$("img.fadeThese").fadeOut(); 
```

内部的选择器`$()`就像一个 css 选择器，有一些附加功能。**其中一些附加功能是**：

*   属性选择：`$("a[href=google.com]")`。这将选择所有 href 等于 google.com 的标签
*   jQuery过滤器：`$("div:nth-child(3)")`获取元素的第四个孩子
*   按值选择：`$("input[value=yes]")`

**以供参考**

*   [jQuery 选择器](http://api.jquery.com/category/selectors/)
*   [CSS 选择器](http://net.tutsplus.com/tutorials/html-css-techniques/the-30-css-selectors-you-must-memorize/)（远离 w3fools）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T13:10:08.007

只要给：

```
$("#idoftheimage") 
```

代替

```
jQuery('img') 
```

&

```
<img id='idoftheimage'> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-10T13:10:55.630

要选择页面上的特定元素，请使用“#”标签。因此，如果您的元素的 id 是“Image1”，您可以使用 `jQuery('#Image1').animate({ opacity: '0.5'});`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T13:12:16.283

If you're used to CSS it's very similar. So as such you could do something like:

```
jQuery(div img.myimagetochangeopacity).hover(function() {
jQuery('img').animate({ opacity: '0.5'});
}, function() {
     jQuery('div img.myimagetochangeopacity').animate({ opacity: '1'});
}); 
```

In this case only images, with a class of myimagetochangeopacity, that are childs of a DIV will get affected.

# c++ - 在包含多个字符串的许多对象中查找子字符串

> ID：11902283
> 
> 赞同：2
> 
> 时间：2012-08-10T13:06:12.040
> 
> 标签：c++, string, qt, data-structures

我正在处理一组对象，其合理大小可能在 1 到 50K 之间（但没有设定上限）。每个对象都包含一些字符串。

我想实现一个搜索函数，该函数可以部分、完全或正则表达式匹配这些字符串中的任何一个，然后返回一个对象列表。

如果每个对象只包含一个字符串，那么我可以简单地按字典顺序对它们进行排序，并相当容易地拉出范围 - 但`map`由于速度/内存问题，我不愿意为每个包含的字符串实现类似的结构。

是否有适合这种操作以提高速度和内存效率的数据结构？我感觉到数据库可能即将出现，但我对它们知之甚少，所以我想推迟研究，直到有更多知识渊博的人能够将我推向正确的方向！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:15:25.650

类似地图的集合可能是您最好的选择，键是字符串，值是对包含对象的引用。如果您的字符串作为 stl 字符串保存在对象中，那么您可以将数据的引用存储在映射的关键部分中（或者使用 shared_ptr 作为字符串并在对象和映射中引用它们）

搜索、排序只是实现使用取消引用数据的[自定义搜索函子的问题。](http://www.sgi.com/tech/stl/functors.html)地图的大小将是 2 个引用加上地图开销，如果您考虑替代方案将同样大，即使不是更大，这也不会那么糟糕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:21:38.827

> 部分、完全或 RegEx 匹配这些字符串中的任何一个，并随后返回对象列表

好吧，对于完全匹配，你可以有一个`std::map<std::string, std::vector<object*> >`. 键将是确切的字符串，并且`vector`保存指向匹配对象的指针，其中许多指针可能指向单个对象实例。

你可以有一个从部分字符串到完整字符串的前端映射：假设字符串是“dogged”，你不得不为“dogged”、“ogged”、“gged”、“ged”、“ ed" 和 "d" （如果您想要最小匹配大小，请在任何地方停止）...然后使用 lower_bound 进行搜索。这样，假设您搜索“dog”，您仍然可以看到匹配“dogged”（它是否匹配说“dogfood”并不重要。这将是一个简单的`std::map<string, string>`。当您从 lower_bound 向前递增时位置并且字符串仍然匹配（即从 dogfood 到 dogged to ... 直到它不以 dog 开头），您可以在“精确匹配”映射中搜索并汇总结果。

对于正则表达式，我没有什么好的建议……我将从暴力搜索所有完整字符串开始。如果它真的不够好，那么你会做一些粗略的优化，比如在进行蛮力匹配之前检查要过滤的常量子字符串，但我无法想象如何非常彻底和快速地做到这一点。

`object*`（如果有用，用你最喜欢的智能指针替换s）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T11:52:46.557

感谢所有回复，但根据本文中提到的技术[，](https://stackoverflow.com/questions/9684034/suffix-tree-library-for-c-with-simple-examples-how-to-use-it)我决定使用仅包含标头的[SeqAn](https://www.seqan.de/)项目中的增强后缀数组。

# bash - bash：迭代浮点数列表

> ID：11902284
> 
> 赞同：11
> 
> 时间：2012-08-10T13:06:12.837
> 
> 标签：bash, for-loop, floating-point

在 bash 脚本中，我想遍历一个值列表，这些值我想作为参数传递给 python 中的脚本。事实证明，`$d`并且`$minFreq`在传递给 python 脚本时不是浮动的。为什么会这样？

```
for d in {0.01, 0.05, 0.1}
do
    for i in {1..3}
    do
        someString=`python scrpt1.py -f myfile --delta $d --counter $i| tail -1`
        for minFreq in {0.01, 0.02}
        do
            for bValue in {10..12}
            do
                python testNEW.py $someString -d $bValue $minFreq
            done
        done
    done
done 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-10T13:13:07.443

要么删除空格

```
for d in {0.01,0.05,0.1} 
```

或者不要使用 {} 扩展（这里没有必要）：

```
for d in 0.01 0.05 0.1 
```

这同样适用于`minFreq`循环。

* * *

如所写，

```
for d in {0.01, 0.05, 0.1} 
```

为变量`d`分配了文字字符串值`{0.01,`、`0.05,`和`0.1}`。

# android - 删除所有点后Android onTap mapView方法不起作用

> ID：11902286
> 
> 赞同：0
> 
> 时间：2012-08-10T13:06:18.880
> 
> 标签：android, itemizedoverlay

onTap() 方法在地图上至少有一个点时工作，但是当我从地图上删除所有点时，onTap() 方法不起作用，我无法在地图上添加点。

请帮忙...

代码：

```
 private class CustomItemizedOverlay2 extends ItemizedOverlay<OverlayItem> {

    private ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();
    private Context context;
    private GeoPoint center = null;

    public CustomItemizedOverlay2(Drawable defaultMarker) {
        super(boundCenterBottom(defaultMarker));
    }

    public CustomItemizedOverlay2(Drawable defaultMarker, GeoPoint point) {
        this(defaultMarker);
        OverlayItem overlayItem = new OverlayItem(point, "", "");
        mapOverlays.add(overlayItem);
        populate();
    }

    public CustomItemizedOverlay2(Drawable defaultMarker, Context context,
            String result) {
        this(defaultMarker);
        this.context = context;

        for (int i = 0; i < geoPointList.size(); i++) {
            OverlayItem overlayItem = new OverlayItem(geoPointList.get(i),
                    "abc", "point" + i);
            mapOverlays.add(overlayItem);
        }
        populate();
    }

    @Override
    protected OverlayItem createItem(int i) {
        return mapOverlays.get(i);
    }

    @Override
    public int size() {
        return mapOverlays.size();
    }

    @Override
    public boolean onTap(GeoPoint point, MapView mapView) {

        int size = geoPointList.size();
        if (size < 2) {
            geoPointList.add(point);

            count++;
            int lat = point.getLatitudeE6();
            int longi = point.getLongitudeE6();
            Drawable image = gMap.this.getResources().getDrawable(
                    R.drawable.pushpin);

            CustomItemizedOverlay2 addPointItemizedOverlay = new CustomItemizedOverlay2(
                    image, point);
            mapView.getOverlays().add(addPointItemizedOverlay);

            mapView.invalidate();
        }
        return super.onTap(point, mapView);
    }

} 
```

如果 geoPointList 中的点数少于两个，则 onTap 方法添加点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T01:41:06.003

终于解决了，因为我已经实现了自定义 MapOverlay 并在其中使用 onTap 方法而不是在 CustomItemizedOverlay2 中使用。

# c++ - doxygen 和“旧式”类列表

> ID：11902290
> 
> 赞同：4
> 
> 时间：2012-08-10T13:06:43.600
> 
> 标签：c++, doxygen

我注意到新版本的 doxygen（我有 1.8.1.1）会生成类列表，其中嵌套是分层完成的，例如：

*   命名空间
    *   我的班级1
    *   我的班级2

例如[http://www.itk.org/Doxygen/html/annotated.html](http://www.itk.org/Doxygen/html/annotated.html)

我更希望拥有类列表的旧样式：

*   命名空间::MyClass1
*   命名空间::MyClass2

例如[http://trilinos.sandia.gov/packages/docs/r10.8/packages/tpetra/doc/html/annotated.html](http://trilinos.sandia.gov/packages/docs/r10.8/packages/tpetra/doc/html/annotated.html)

doxyfile 中是否有一个设置可以让我获得旧样式？

* * *

我提出这个请求的原因是，我通常通过搜索“namespace::MyClass”来搜索我的 C++ 类。通常甚至 "::My" 都能很快找到正确的类。在新风格中，我不再知道如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:46:27.093

通常带注释的索引应该具有“详细级别”导航，如您在此处看到的： [http](http://www.nsnam.org/doxygen/annotated.html)
: //www.nsnam.org/doxygen/annotated.html 点击最高级别（示例中为 5）将展开整个索引，然后您可以轻松搜索课程。

另一种方法是使用注释索引：
[http ://www.nsnam.org/doxygen/classes.html](http://www.nsnam.org/doxygen/classes.html)

# php - 如何用 symfony 表单构建这种简单但复杂的表单

> ID：11902292
> 
> 赞同：0
> 
> 时间：2012-08-10T13:06:46.157
> 
> 标签：php, symfony, doctrine-orm

我已经尝试了很多，但还没有找到解决这个问题的方法。我不确定那是否可能。

我有一张桌子叫`Student`然后桌子叫`Assigment`和`Solutions`

现在有存储在作业表中的所有学生共有的问题。但是不同的学生会提交不同的解决方案。

在表格上，我希望将其`label`作为问题文本，然后将文本框作为该问题的解决方案。

一开始我在数据库中有空的答案。

我很困惑如何使用 symfony 来构建这个表单

因为所有解决方案都将通过一个提交按钮提交

```
Class AssignmentFormType{

$builder-> add('answer','collection' ....) 
```

这工作正常，但我唯一想要的是将 QuestionText 显示为该答案的标签，我无法在 1 周内找到它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:44:58.637

您要做的是根据您的实体中的信息动态创建一个表单元素（即设置标签 = $entity->getQuestion）

两种方法：

A. 动态表格

[http://symfony.com/doc/master/cookbook/form/dynamic_form_generation.html](http://symfony.com/doc/master/cookbook/form/dynamic_form_generation.html)

基本上涉及设置一个侦听器，然后使用它来创建可以访问每个单独实体的表单元素。有点痛苦，但它有效。

B. 表单模板的内部

由于您要做的就是更改标签，因此将其设置在表单模板中可能会更容易。就像是：

```
{{ form_label(form.assignment, form.assignment.vars.value.question) }} 
```

.data 应该为您提供可以从中提取问题的实际分配实体。

# javascript - 使用 jQuery 和 CSS3 旋转构建轮盘赌

> ID：11902295
> 
> 赞同：0
> 
> 时间：2012-08-10T13:06:55.463
> 
> 标签：javascript, jquery, css

我正在尝试构建一个由鼠标控制的轮盘赌，我没有使用画布或 svg，而只使用 CSS3 旋转和一些 jQuery。

我想要实现的是当鼠标悬停在轮盘上并且他被点击并按住时，我希望用户在上下移动鼠标时能够旋转滚轮。我正在使用`event.offsetY`来获取鼠标的位置，并根据这个位置来移动轮盘赌。

问题是我认为鼠标偏移位置会根据轮子的旋转而变化，他们是否可以通过文档保持鼠标偏移位置“真实”？

-或者-

有人知道实现这一目标的更好主意吗？

请在此处查看代码：http: [//jsfiddle.net/MZxgp/](http://jsfiddle.net/MZxgp/)（仅适用于 chrome）

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:24:01.643

我使用了一个不会移动的覆盖 div 来捕获鼠标事件（请参阅[jsFiddle](http://jsfiddle.net/MZxgp/)）

我希望这有帮助

# derby - 存在的数据库表上的 Derby xsa12 错误....但不存在

> ID：11902303
> 
> 赞同：1
> 
> 时间：2012-08-10T13:07:23.443
> 
> 标签：derby

我不确定我的 derby 数据库发生了什么，但我似乎有可以从 ij 界面看到的表...

```
ij> show tables in derbytest;
TABLE_SCHEM         |TABLE_NAME                    |REMARKS
------------------------------------------------------------------------
DERBYTEST           |DATATYPETEST                  |
DERBYTEST           |LOCATION                      |
DERBYTEST           |SUIVI                         | 
```

现在我得到了表格描述......

```
ij> describe derbytest.datatypetest;
COLUMN_NAME         |TYPE_NAME|DEC&|NUM&|COLUM&|COLUMN_DEF|CHAR_OCTE&|IS_NULL&
------------------------------------------------------------------------------
A_DATE              |DATE     |0   |10  |10    |NULL      |NULL      |NO
AN_INT              |INTEGER  |0   |10  |10    |NULL      |NULL      |YES
A_DECIMAL           |DECIMAL  |0   |10  |5     |NULL      |NULL      |YES
A_STRING            |VARCHAR  |NULL|NULL|20    |NULL      |40        |YES
A_SWITCH            |BOOLEAN  |NULL|NULL|1     |NULL      |NULL      |YES 
```

所以我猜这张桌子是存在的，但是......

```
ij> select * from derbytest.datatypetest;
ERREUR XSAI2 : Le conglomÚrat (1á232) demandÚ n'existe pas. 
```

所以快速检查一下问题是否是由“空”表引起的..

```
ij> select * from derbytest.suivi;
OBS        |DATE                         |TIME
----------------------------------------------------------------------- 
```

对我来说，这不建议！

我不确定我是否完全理解错误消息的含义，我在文档中找到了

> 表 36\. XSAI 类：存储 - access.protocol.interface SQLSTATE 消息文本 XSAI2 请求的 conglomerate () 不存在。

这不是很有帮助！我已经查看了引擎、语言、测试和工具的各种 API 文档，但我不知道从哪里开始，任何指针都会有所帮助。

这可能与我如何设置数据库有关，所以一些快速背景。

我从一个 java 测试类连接到这个测试数据库。它从另一个数据源（平面文件的 XL）收集信息，然后将其放入该数据库（或者这就是目标）。我只展示了一个小的“测试”，以确保我的连接正常工作。

我在这个文件中有另一个架构，它有更多的表，它们都有同样的问题。

我是否没有正确关闭连接并丢失数据？我是否不知何故无意中删除了一个包含丢失的“企业集团”的数据文件

非常感谢任何帮助。

大卫。

ps 我还有其他测试数据库，我没有检查它们是否有同样的问题。我在 XP 上运行 java 6。

编辑1：刚刚检查了我正在使用的另一个testDB，它不包含表！很明显，我自己清理干净了。现在那只猫去哪儿了？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:13:10.623

可以肯定的是，这是一种奇怪的行为。我不确定出了什么问题。

您是否在事务中创建了表但尚未提交该事务？

您是否使用内存数据库创建表，在这种情况下，当您关闭数据库时它会消失？

您是否在磁盘上的一个位置创建了数据库，然后使用“create=true”连接到另一个位置，在这种情况下，Derby 在新位置创建了一个新的空白数据库？

您是否使用一种模式创建数据库，然后使用不同的模式连接？

该错误消息确实表明该表存在一些内部损坏。括号中的数字 (1a232) 是一个集团编号，它也用于在您的文件系统中标识集团的文件名。因此，您可以查看文件系统并将那里的文件与数据库中的表相匹配（通过从 sys.sysconglomerates 中选择）。

您将获得表本身的聚合，以及每个二级索引的附加聚合，包括由 CREATE INDEX 创建的和由隐式约束（如 UNIQUE 或 REFERENCES）创建的那些。

如果您怀疑表损坏，最好从备份中恢复。您是否遇到过任何可能表明表损坏的系统崩溃、磁盘已满事件等？

# javascript - window.parent.focus() 在 Chrome 中不起作用

> ID：11902306
> 
> 赞同：3
> 
> 时间：2012-08-10T13:07:41.263
> 
> 标签：javascript, google-chrome

我需要返回到 Google Chrome 中的开窗器页面。Focus 前段时间有效，但现在无效。我使用最新版本的 Google Chrome (21.0.1180.75)。我没有在互联网上找到这个错误的任何原因或解释。Window.opener.alert() 不是可接受的解决方案。这是我目前拥有的代码：

```
<html>
<head>
<script type="text/javascript">
function openWin()
{

var params = "menubar=yes,location=yes,resizable=yes,scrollbars=yes,status=yes"
var wnd = window.open("about:_blank", "", params);

wnd.document.write("<input type='button' value='focus' onClick='window.opener.focus()'/>");

}
</script>
</head>
<body>

<input type="button" value="Open 'myWindow'" onclick="openWin()" />

</body>
</html> 
```

提前致谢！

# javascript - 在 IE 中测试对象属性的存在

> ID：11902307
> 
> 赞同：0
> 
> 时间：2012-08-10T13:07:42.227
> 
> 标签：javascript, jquery, internet-explorer

在 IE 中使用 jQuery 对我不起作用。

我有ajax响应：

```
{"update":{"WaterLever":null},"missing":["WaterBallast"]} 
```

响应时触发不同的功能：

```
$.post(...
...
function(data) {
  markMissing(data['missing']);
  fldUpdate(data['update']);
} 
```

一切都在 chrome/FF 中工作，但在 IE 中只有 fldUpdate。

IE 没有找到对象中的元素，尝试了 .indexOf、(val in data) 等...

```
function markMissing(data) {
  //loop all fields in form..
  $('[id^=cont]').each(function() {
    var s = this.id;
    //discard prefix 'cont_' in id. 
    var fld = s.substring(5);
    if(fld in data) { //this doesn't work
    //if(data.indexOf(fld)) { //this neither.
      $(this).addClass('missing');
    } else {
      $(this).removeClass('missing');
    }
  });
} 
```

感谢您的任何意见

# c# - Winforms designer: Possible to programmatically achieve Project Variables?

> ID：11902313
> 
> 赞同：4
> 
> 时间：2012-08-10T13:08:04.777
> 
> 标签：c#, winforms, visual-studio-2010, environment-variables, windows-forms-designer

I'm working in C# Winforms, .net 4.0, and am designing some design-time components. My goal is to have the designer look for a specific file that resides in (either the project dir or the output dir).

Is there anyway for me to find the values of the following variables from code?

(Outpath) (ProjectDir)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:55:09.090

好吧，如果您可以访问代表您的 Visual Studio 实例的 EnvDTE80.DTE2，这并不难。事实上，如果 dte 是您的 DTE2 实例，它很简单：

```
foreach (Project prj in dte.Solution.Projects)
                {
                    MessageBox.Show(Path.GetDirectoryName(prj.FullName));
                    MessageBox.Show(prj.ConfigurationManager.ActiveConfiguration.Properties.Item("OutputPath").Value.ToString());
                } 
```

如果您正在编写加载项，则获取 DTE2 对象很容易，因为它是传递给 OnConnection 的第一个参数（加载项项目的向导会自动编写代码，将其放入 Connect 类的 _applicationObject 变量中）。

如果你只有组件，你可以获取Site属性，它实现了ISite，它是从IServiceProvider派生的，并要求它获取DTE2。如果 compo 是您的组件：

```
 dte = (DTE2)compo.Site.GetService(typeof(DTE2)); 
```

# java - modify netty channel pipeline dynamically

> ID：11902314
> 
> 赞同：1
> 
> 时间：2012-08-10T13:08:04.753
> 
> 标签：java, netty, pipeline

I need to modify a channel pipeline outside of the factory.

```
ChannelPipelineFactory factory = new ChannelPipelineFactory() {
            @Override
            public ChannelPipeline getPipeline() throws Exception {
                ChannelPipeline pipeline = pipeline();
                pipeline.addLast("decoder", new StringDecoder());
                pipeline.addLast("encoder", new StringEncoder());
                return pipeline;
            }
}; 
```

factory getPipeline() gets called when I create a new channel.

When I send a message on this channel, I call

```
channel.getPipeline().addLast("id",handler); 
```

but when some milliseconds later a message arrives for the same channel, and I call channel.getPipeline().get("id") this gives a null value. Is there a way to tell netty that a pipeline is modified, or shouldn't I call addLast outside of the factory?

Thanks, Leen

# python - How to search for a string case-insensitively without regular expressions?

> ID：11902316
> 
> 赞同：1
> 
> 时间：2012-08-10T13:08:08.113
> 
> 标签：python

I want to search a file for all lines containing a given string without matching case. How can I make this code case-insensitive?

```
with open(logfile) as inf:
    for line in inf:
        if var in line:
            print 'found',line 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T13:09:07.140

```
with open(logfile) as fin:
    for line in fin:
        if var.lower() in line.lower():  # makes this case insensitive
            print 'found', line.rstrip() # You will be printing double new lines 
                                         #  without rstrip here 
```

# mysql - How to check if several tables are locked?

> ID：11902318
> 
> 赞同：0
> 
> 时间：2012-08-10T13:08:13.053
> 
> 标签：mysql

I would like to check if several tables are locked or not. I tried to do it this way:

```
SHOW OPEN TABLES WHERE (Table LIKE 'table_name' OR Table LIKE 'table2_name') AND In_use > 0 
```

But i'm getting error

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds
to your MySQL server version for the right syntax to use near 
'Table LIKE 'table_name' OR Table LIKE 'table2_name') AND In_use > 0' at line 1 
```

I checked that this one works fine:

```
SHOW OPEN TABLES WHERE In_use > 0 LIKE "table_name" 
```

but i need to check it for several tables and i would like to do it just using one query. I use MySQL in version 5.5.24

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:15:43.017

Table 是保留字，尝试在“Table”周围添加反引号，如下所示：

```
SHOW OPEN TABLES WHERE (`Table` LIKE 'table_name' OR `Table` LIKE 'table2_name') 
AND In_use > 0 
```

# c# - 底层连接已关闭：连接意外关闭 #2

> ID：11902333
> 
> 赞同：-1
> 
> 时间：2012-08-10T13:09:05.260
> 
> 标签：c#, .net, wcf, web-services

我在收到此错误之前所做的修改。我在所有课程中都已更改`byte[]`为。`Stream`

```
System.ServiceModel.CommunicationException: The underlying connection was closed: The connection was closed unexpectedly. ---> System.Net.WebException: The underlying connection was closed: The connection was closed unexpectedly.    
   at System.Net.HttpWebRequest.GetResponse()    
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)

   --- End of inner exception stack trace ---       

Server stack trace:     
   at System.ServiceModel.Channels.HttpChannelUtilities.ProcessGetResponseWebException(WebException webException, HttpWebRequest request, HttpAbortReason abortReason)    
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)    
   at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)    
   at System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message message, TimeSpan timeout)    
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)    
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs)    
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)    
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]:     
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)    
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)    
   at MyWCFServiceTest.MyWCFService.ICommonService.UploadDocument(UploadDocumentRequest request)    
   at MyWCFServiceTest.MyWCFService.MyServiceClient.MyWCFServiceTest.MyWCFService.ICommonService.UploadDocument(UploadDocumentRequest request) in C:\Users\KishoreJangid\Desktop\ChangeSAPTransactionStatus\MyWCFServiceTest - Copy\MyWCFServiceTest\Service References\MyWCFService\Reference.cs:line 2376    
   at MyWCFServiceTest.MyWCFService.MyServiceClient.UploadDocument(RequestHeader UploadDocumentReqHdr, Byte[]& UploadDocumentContent) in C:\Users\KishoreJangid\Desktop\ChangeSAPTransactionStatus\MyWCFServiceTest - Copy\MyWCFServiceTest\Service References\MyWCFService\Reference.cs:line 2383    
   at MyWCFService.Form1.DocumentUpload_Click(Object sender, EventArgs e) in C:\Users\KishoreJangid\Desktop\ChangeSAPTransactionStatus\MyWCFServiceTest - Copy\MyWCFServiceTest\Form1.cs:line 88 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:12:24.130

由于缺乏对您要达到的目标的解释，您是否已更新所有消费者以使用新类？我想你已经改变了数据合同和这个破碎的消费者。

如果不是，我会查看您传输了多少数据，请参阅此[博客文章](http://kjellsj.blogspot.co.uk/2007/02/wcf-streaming-upload-files-over-http.html)！似乎这就是问题所在。

我遇到了一些问题，可能是配置问题，或者如果您在 IIS 中托管，则存在有关权限的问题，请尽可能详细说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:54:09.687

如果您期望从调用的方法返回并使用 WCF 服务，则此错误背后的一个可能原因可能是您的对象序列化/反序列化问题。如果您的服务方法返回不可序列化的内容，那么您的代理通道会出现此错误。

为避免这种情况，只需检查-

1.  返回类型并确保它是可序列化的。您可能必须将 [Serializable] 属性与您的类一起放置。
2.  Have `[DataMember(IsRequired=true)]`，它告诉值将在序列化时出现（它说下划线属性是不可为空的值类型）。
3.  确保您的枚举值与存储在表中的值匹配。这是非常危急的情况，因为您没有预料到。

# c# - 为什么我的集合会根据我在递归过程中声明变量的位置而改变？

> ID：11902335
> 
> 赞同：0
> 
> 时间：2012-08-10T13:09:13.233
> 
> 标签：c#

在下面的代码中，StylusPointCollection (SPC) 根据我是在方法内部还是外部声明 StylusPoint 变量而变化（即，如果我注释内部定义并取消注释注释行）。我不明白为什么会这样。

```
//StylusPoint spXY;

private void DrawBinaryTree(int depth, StylusPoint pt, double length, double theta)
{        
    if (depth > 0)
    {    
        StylusPoint spXY = new StylusPoint(pt.X + length * Math.Cos(theta) * Math.Cos(a), pt.Y + length * Math.Sin(theta) * Math.Sin(a));

        //spXY = new StylusPoint(pt.X + length * Math.Cos(theta) * Math.Cos(a), pt.Y + length * Math.Sin(theta) * Math.Sin(a));

        SPC.Add(pt);
        SPC.Add(spXY);

        DrawBinaryTree(depth - 1, spXY, length * lengthScale, theta + deltaTheta);
        DrawBinaryTree(depth - 1, spXY, length * lengthScale, theta - deltaTheta);
    }
} 
```

我尝试过使用 LinqPad 想出一个更简单的示例，但未能成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T13:23:40.787

不同之处在于您对函数进行了两次递归调用，试图将有问题的变量传递给两者。当您在函数外部声明变量时，每次调用都会修改它`DrawBinaryTree`。当您将变量声明为本地时，每次调用`DrawBinaryTree`都会获取自己的变量副本，其他调用无法修改

与当地人：

```
private void DrawBinaryTree(int depth, StylusPoint pt, double length, double theta)
{        
    if (depth > 0)
    {    
        StylusPoint spXY = new StylusPoint(pt.X + length * Math.Cos(theta) * Math.Cos(a), pt.Y + length * Math.Sin(theta) * Math.Sin(a));

        SPC.Add(pt);
        SPC.Add(spXY);

        //spXY has the values you just set above 
        DrawBinaryTree(depth - 1, spXY, length * lengthScale, theta + deltaTheta);
        //since spXY is local, it still has the values you set above in this
        //call to the function (recursive calls have not modified it)
        DrawBinaryTree(depth - 1, spXY, length * lengthScale, theta - deltaTheta);
    }
} 
```

具有全局性：

```
StylusPoint spXY;

private void DrawBinaryTree(int depth, StylusPoint pt, double length, double theta)
{        
    if (depth > 0)
    {    
        spXY = new StylusPoint(pt.X + length * Math.Cos(theta) * Math.Cos(a), pt.Y + length * Math.Sin(theta) * Math.Sin(a));

        SPC.Add(pt);
        SPC.Add(spXY);

        //spXY has the values you just set above 
        //(assuming there are no other functions running on other threads that modify it)
        DrawBinaryTree(depth - 1, spXY, length * lengthScale, theta + deltaTheta);
        //spXY now has the values from the last recursive call to DrawBinaryTree!
        DrawBinaryTree(depth - 1, spXY, length * lengthScale, theta - deltaTheta);
    }
} 
```

# ruby-on-rails-3 - 如何正确设置自定义页面布局 - RefineryCMS 2.0.6

> ID：11902339
> 
> 赞同：0
> 
> 时间：2012-08-10T13:09:31.030
> 
> 标签：ruby-on-rails-3, refinerycms

我已按照指南中的说明构建自定义布局：

注意：投资组合是我自己的引擎，而不是refinerycms-portfolio。

1.  `config.layout_template_whitelist = ["application","portfolio"]`
2.  `config.use_layout_templates = true`
3.  在 app/views/layouts 下创建了一个portfolio.html.erb 并复制了`application.html.erb`除该`<header>`部分之外的所有内容：我不希望此布局中显示菜单和徽标，但其余所有内容
4.  我现在可以看到后端的布局。
5.  如果我选择我的投资组合页面并按预览，则布局呈现时没有菜单
6.  但是，如果我直接转到 ，则会`/portfolios`呈现“应用程序”布局而不是“组合”

请问有什么想法吗？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:17:23.137

好吧，似乎在最新的 RefineryCMS 版本中引入的命名空间会阻止自动拾取布局，因此您需要手动指示 Controller 拾取有问题的布局。对于这种情况，我必须添加：

```
render :layout => 'layouts/portfolio' 
```

在我的`portfolios#index`行动中。

希望这可以帮助...

# split - TypoScript：如何访问拆分中记录的标题或正文？

> ID：11902341
> 
> 赞同：0
> 
> 时间：2012-08-10T13:09:38.980
> 
> 标签：split, typo3, typoscript

我需要从特定 colPos 中呈现来自 styles.content.get 的记录。

记录由 temp.recordcontent 提供

记录应分开。因此我使用拆分。

我的问题是我想分离单个记录的标题和正文。

我的打字稿：

```
temp.generateSlider = COA
temp.generateSlider {
  10 < temp.recordcontent
  stdWrap.split {
    token = ###SPLITTER###
    cObjNum = |*| 1 || 2 |*|
    1 = COA
    1 {
      5 = [something]

      10 = [header of the current record]

      15 = [something]

      20 = [bodytext of the current record]

      25 = [something] 

    }
    2 = COA
    2 {
      5 = [something else]

      10 = [header of the current record]

      15 = [something else]

      20 = [bodytext of the current record]

      25 = [something else]

    }
  }
} 
```

当我在下面添加代码时，我将获得整个记录，但我怎样才能只获得标题（或正文）？

```
10 = TEXT
10.data = current:1 
```

我尝试了以下类似的方法，但这不起作用

```
10.field = header 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T09:22:08.817

我通过渲染 RECORD 对象（temp.recordcontent）中的元素并将它们包装在拆分中解决了这个问题。

记录

```
temp.recordcontent = RECORD
temp.recordcontent{
  tables = tt_content
  dontCheckPid = 1
  source.cObject < temp.getuids
  conf.tt_content.stdWrap.wrap = |###SPLITTER###  
  conf.tt_content = COA
  conf.tt_content {    
    20 = TEXT
    20.field = header
    20.wrap = <h2 class="blue"> | </h2>  
    30 = TEXT
    30.field = bodytext
    30.wrap = <p>|</p>

  }

} 
```

分裂

```
temp.generateRibbonrow = COA
temp.generateRibbonrow {
  10 < temp.recordcontent
  stdWrap.split {
    token = ###SPLITTER###
    cObjNum = |*| 1 || 2 |*| 3

    1 = COA
    1 {
      10 = TEXT
      10.value =  <div class="myclass">

      20 = TEXT
      20.data = current:1

    }

    2 .....

    3 = COA
    3{     
      10 = TEXT
      10{
        if.isTrue.prioriCalc=1
        if.isTrue.cObject=TEXT
        if.isTrue.cObject.insertData=1
        if.isTrue.cObject.value={register:SPLIT_COUNT}%2
        value(
        <div class="ym-g50"><div class="ym-gbox"></div></div>
        </div>
        )
      }
   }
}
  } 
```

现在我可以获取特定 colPos 的记录，并且可以在其自己的小丝带框中渲染每个元素 :)

# php - Codeigniter 2.1 - MySQL CONCAT（附加字符串）

> ID：11902345
> 
> 赞同：0
> 
> 时间：2012-08-10T13:10:00.600
> 
> 标签：php, mysql, codeigniter

我有这样的PHP代码：

```
$query = 'UPDATE  `user_vote` SET `container` = CONCAT(`container`, ' ;
$query .=  ",$glas";
$query .= ') WHERE `user_id` = ' . $id_u;
$this->db->query($query); 
```

当我运行此代码时，出现以下错误：

> 错误号：1054
> 
> '字段列表'中的未知列'，iljadu'
> 
> 更新`user_vote`集`container`= CONCAT( `container`, `,iljadu`) WHERE `user_id`= 4

查询有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T13:12:29.833

您在变量周围缺少引号`concat()`

```
$query = 'UPDATE  `user_vote` SET `container` = CONCAT(`container`, ' ;
$query .=  ",'$glas'";
$query .= ') WHERE `user_id` = ' . $id_u;
$this->db->query($query); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:11:57.850

```
$query .=  ",$glas"; 
```

应该

```
$query .=  "$glas"; 
```

# stored-procedures - 用 MyBatis 映射替换存储过程

> ID：11902359
> 
> 赞同：0
> 
> 时间：2012-08-10T13:10:34.490
> 
> 标签：stored-procedures, insert, sybase, mybatis

我在 MyBatis 中找不到可以替换以下代码的映射示例。

"if sqlcode <> 0" 如果没有更新，则执行插入

有什么建议吗？:)

```
as
begin
  execute SetDefaultIsolationLevel
  update COMPANYLEVEL 
  set 
    companylevelid = @companylevelid, 
    companynameid = @companynameid, 
    level = @level, 
    memo = @memo,
    operator = @operator,
    changed = getdate(*)
  where
    companynameid = @companynameid
  if sqlcode <> 0
  BEGIN
    insert into COMPANYLEVEL 
        (companylevelid,companynameid,level,memo,operator,changed)
    values
        (@companylevelid,@companynameid,@level,@memo,@operator,getdate(*)) 
  END
  commit transaction
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T12:37:49.987

我不认为 MyBatis 有任何映射说“尝试更新，如果失败则插入”。如果您希望在数据库的一次往返中完成，那么存储过程是合适的。您可以从 MyBatis 调用此存储过程，但 if/else 逻辑将在存储过程中。

如果您试图摆脱存储过程，那么您需要在代码中进行两步检查。MyBatis 中的更新返回更新的行数（通过 JDBC 驱动程序），所以如果它为零，那么您可以调用 MyBatis 插入映射。如果发生插入，则需要两次往返数据库。

您也可以在存储过程中使用 MERGE 语句执行“更新插入”，但这当然与 MyBatis 无关，除了 MyBatis 可以调用您的存储过程。看起来你正在使用 Sybase？如果是这样，我不确定 Sybase 是否有 upserts - 研究链接：[Upsert (update or insert) in Sybase ASE?](https://stackoverflow.com/questions/4504374/upsert-update-or-insert-in-sybase-ase)

# javascript - 决策树网站示例

> ID：11902362
> 
> 赞同：-1
> 
> 时间：2012-08-10T13:10:41.657
> 
> 标签：javascript, html, css

我正在寻找旨在帮助用户解析决策的示例网站或网站上的教程。例如，该网站会提出一系列问题，这些问题最终会根据他们的输入显示他们需要查看的文本块，或者将他们引导到另一个网站。

我通过四处搜索找到了这个， http: [//listui.com/wordpress/examples/decisionMaker.html](http://listui.com/wordpress/examples/decisionMaker.html)但这不是一个新示例，而是基于表格的。我正在寻找使用更现代的网络开发技术的东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:14:10.090

[http://www.letsimondecide.com/](http://www.letsimondecide.com/)

# jquery - jQuery：使示例平滑向下滑动

> ID：11902363
> 
> 赞同：0
> 
> 时间：2012-08-10T13:10:43.387
> 
> 标签：jquery, html, css, jquery-ui, slide

我在这里有一个几乎可以工作的代码： [jsFiddle](http://jsfiddle.net/DV3qx/1/)。

它能做什么？它在绿色矩形上上下滑动。这里有几个我想解决的问题，但第一个是：我希望它平滑地**一起****滑下**，中间没有空间，时间为**1500 毫秒**。现在它可以工作 500 毫秒，当您单击向下滑动时，绿色矩形向下滑动得更快（我不明白为什么）。

 ****另外我不想改变我的 html div 的结构，如果可能的话，只能添加额外的 div 来重写代码。

PS jQuery 的其他代码几天前用于此解决方案，但在 FF 中并没有很好地向下滑动（虽然在 Chrome 中完美），所以它被当前的 jQuery 代码所取代，这要感谢 AK ( [jQuery - slide down instead向上滑动](https://stackoverflow.com/questions/11859976/jquery-slide-down-instead-of-slide-up)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:23:52.237

你没事吧？( [jsFiddle](http://jsfiddle.net/DV3qx/4/) )

```
 $(document).ready(function ()
    {
        $('#slide-link').click(function(){

            var hid = $('#sliderWrapper').is(':hidden')            
            $(this).animate({ top: (1-hid)*($(window).height()) },1500)

            if(hid) {$('#sliderWrapper').stop().show("slide", { direction:"down" }, 2000);}
            else { $('#sliderWrapper').stop().hide("slide", { direction:"down" }, 2000); }

        })
    }); 
```

`if-else`我在声明中增加了 500 超过 1500

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:24:49.710

我不确定我是否理解你的问题，这是你要找的吗？

[jsfiddle](http://jsfiddle.net/Pluda/DV3qx/3/)****

# php - MySql PHP 语法检索有序数据，其中一些具有匹配值并仅随机化/随机化匹配值

> ID：11902370
> 
> 赞同：0
> 
> 时间：2012-08-10T13:10:57.067
> 
> 标签：php, mysql, random

发现很难理解 mysql 语法以从数据库中检索数据 - 数据具有“等级”，需要从最高等级到最低等级进行排序。

如果两行或多行之间存在匹配的评级编号，我需要能够随机化这些行，但将它们保留在列表的整体顺序中。

基本上我有一个“代理”表，一个按邮政编码的“agent_coverage”表，以及一个包含数字评级的“评级”表。要对其进行伪代码，我需要：-

1.select agent_id, rating from agent, rating, agent_coverage where agent_coverage.postcode = postcode and rating.agent_id = agent_id GROUP BY rating.rating ORDER BY rating.rating DESC

1.  然后我需要检查组中是否有多个结果

2.  如果组中有多个，我需要对组进行洗牌并按从高到低的顺序返回数据。

因此，如果 BOB 的评分为 100，JOE、SYLVIA、FRED 和 BARBARA 的评分均为 98，而 RICHARD 的评分为 96，则 BOB 将始终在返回的结果中排名第一 - RICHARD 将始终在结果中排​​在最后，但另一个位置每次都是随机的。

希望那更清楚一点。

# syntax - 如何使用括号表示法访问范围？

> ID：11902373
> 
> 赞同：0
> 
> 时间：2012-08-10T13:11:00.383
> 
> 标签：syntax, coldfusion, scope

作为函数的输入，我得到一个字符串范围名称，例如`FORM`or `COOKIE`。如何以括号表示法访问这些顶级范围？

我正在寻找类似的东西：

```
var myScope = "FORM";
global[myScope]; 
```

显然这不起作用:)

（我不是在寻找任何类型的`eval`函数，我宁愿`switch`手动通过字符串来获得正确的范围而不是`eval`函数......）

**编辑**

需要功能，因此我可以在请求的早期调用一个简单/可访问的函数，以识别错误请求，这些请求要么发送错误类型的数据，要么只是不发送所需数据。

例如，我将在需要变量的请求中尽早调用以下函数`FORM.data1:numeric`，`FORM.data2:bit`并且`COOKIE.data3:string`：

```
<cfset require({
  "FORM" : {
    "data1":"numeric",
    "data2":"bit"
  },
  "COOKIE":{
    "data3":"string"
  } 
})> 
```

我知道以下可能会更容易一些：

```
<cfset require({
  "FORM.data1":"numeric",
  "FORM.data2":"bit",
  "COOKIE.data3":"string"
})> 
```

而不仅仅是使用`isDefined`，但我需要更多的灵活性来实现其他功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T13:36:31.623

你可以用`structGet()`这个。

```
var theformscope = structGet('form'); 
```

ColdFusion 文档中提供了有关 structGet 的更多信息：http: [//help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7f03.html](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7f03.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:27:12.807

我不相信不使用这些`Evaluate`功能是可能的。范围可以说是链的顶层，所以前面没有点符号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T14:24:07.980

好吧，最简单的解决方案就是这样写：

```
<cfparam name="form.data1"   type="numeric" />
<cfparam name="form.data2"   type="numeric" />
<cfparam name="cookie.data3" type="string" /> 
```

但是，如果您觉得这太冗长，您可以使用现有的数据结构，如下所示：

```
<cfset require({
  "FORM" : {
    "data1":"numeric",
    "data2":"bit"
  },
  "COOKIE":{
    "data3":"string"
  } 
})>

<cffunction name="require" returntype="void" output=false >
    <cfargument name="Scopes" type="Struct" required />

    <cfloop item="local.CurScope" collection=#Arguments.Scopes#>
        <cfloop item="local.CurVar" collection=#Arguments.Scopes[CurScope]#>
            <cfparam name="#CurScope#.#CurVar#" type="#Arguments.Scopes[CurScope][CurVar]#" />
        </cfloop>
    </cfloop>
</cffunction> 
```

或者，还有一种比这更简单的方法：

```
<cfset require
    ( "FORM.data1"   : "numeric"
    , "FORM.data2"   : "bit"
    , "COOKIE.data3" : "string"
    )>

<cffunction name="require" returntype="void" output=false >

    <cfloop item="local.ArgName" collection=#Arguments#>
        <cfparam name="#ArgName#" type="#Arguments[ArgName]#" />
    </cfloop>

</cffunction> 
```

您暗示您需要其他功能的无范围名称，在这种情况下您只需执行`<cfset UnscopedName = ListRest(ArgName,'.') />`

# java - 应用程序无法在 GAE 上运行

> ID：11902376
> 
> 赞同：0
> 
> 时间：2012-08-10T13:11:08.233
> 
> 标签：java, google-app-engine, uncaught-exception

我在它上面创建了一个应用程序，当我在谷歌服务器上部署它`GAE`时测试它时运行良好，`localhost`它给了我错误，

```
Uncaught exception from servlet
java.lang.UnsupportedClassVersionError: com/xyz/testing/server/MyServlet : Unsupported major.minor version 51.0
    at com.google.appengine.runtime.Request.process-3cf09259cfc67552(Request.java)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
    at sun.reflect.GeneratedMethodAccessor5.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at org.mortbay.util.Loader.loadClass(Loader.java:91)
    at org.mortbay.util.Loader.loadClass(Loader.java:71)
    at org.mortbay.jetty.servlet.Holder.doStart(Holder.java:73)
    at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:242)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:695)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453)
    at java.lang.Thread.run(Thread.java:679) 
```

在应用程序中，它只是一个注册表单，通过`Ajax`邮寄请求提交。当我单击按钮进行注册时，它给了我以下异常。虽然这工作正常`localhost`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:19:22.997

我认为问题在于，您使用 Java 7 编译您的项目，但 GAE 使用 Java 6。所以您必须使用 Java 6 构建/编译您的项目

有关Java 环境，请参见[此处](https://developers.google.com/appengine/docs/java/overview)

# python - Python 正则表达式 - 限制结果？

> ID：11902378
> 
> 赞同：2
> 
> 时间：2012-08-10T13:11:27.533
> 
> 标签：python, regex

问这个问题我觉得有点愚蠢，但我做了一些正则表达式来查找 HTML 文档中的特定企业、地址和 URL。问题是......我不知道我应该使用哪个（python）正则表达式。当我使用 re.findall 时，我得到 30 到 90 个结果。我想将其限制为 3 个或 5 个（一组数字）。我应该使用哪个正则表达式操作来执行此操作，或者是否有一个参数可以在搜索达到一定数量的结果时停止搜索？

此外，是否有一种更快的方法来搜索 HTML 文档，这样我的程序就不会因为正则表达式搜索这个非常长的“字符串”文本而减慢速度？

谢谢。

编辑

我有 Beautiful Soup，我用它来让事情更容易阅读……但不是为了解析。

我也使用过 lxml ......哪个更好/更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T01:11:39.010

而不是使用`re.findall`，使用`re.finditer`。它返回一个迭代器，根据需要产生下一个匹配项。

这是一个例子：

```
>>> [m.group(0) for m, _ in zip(re.finditer(r"\w", "abcdef"), range(3))]
['a', 'b', 'c'] 
```

# javascript - Why do we need ng-click?

> ID：11902379
> 
> 赞同：77
> 
> 时间：2012-08-10T13:11:34.640
> 
> 标签：javascript, angularjs, web-applications

Angular apps use the `ng-click()` attribute rather than the the `onclick` event.

Why is this?

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2013-11-28T21:15:01.877

Angular 不会改变`onclick`属性的含义；它添加了 parallel`ng-click`属性以采用[Angular 表达式](https://docs.angularjs.org/guide/expression)。`onclick`即使您使用 Angular，也可以使用普通的旧 JavaScript 代码。

实际上，假设您在单击处理程序中所做的是更改 Angular 范围内的某些变量，或者调用 Angular 范围内的函数来更改某些变量。要从 JavaScript 代码（就像您要输入的内容`onclick`）中做到这一点，需要一系列步骤

*   获取对范围的引用
*   分配变量或调用函数
*   调用`scope.$apply`，以便任何关注您更改的变量更新的人都会收到通知

这看起来像：

```
<a onclick="var $scope = angular.element(event.target).scope(); $scope.yourVar = 42; $scope.$apply()">Go</a> 
```

并且使用`ng-click`Angular 表达式进行赋值，几乎所有这些都是隐式的：

```
<a ng-click="yourVar = 42">Go</a> 
```

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2012-08-10T15:34:12.770

ng-click 包含一个角度表达式。Angular 表达式在 Angular[范围](http://docs.angularjs.org/guide/scope)的上下文中进行评估，该范围绑定到具有 ng-click 属性的元素或该元素的祖先。

Angular 表达式语言不包括流控制语句，也不能声明变量或定义函数。这些限制意味着模板只能访问由控制器或指令提供的变量和运行函数。

# wpf - 通用 xaml 中的设置器，用于修改功能区控件内的命名组件属性

> ID：11902381
> 
> 赞同：0
> 
> 时间：2012-08-10T13:11:43.190
> 
> 标签：wpf, ribboncontrolslibrary

我在询问 [RibbonApplicationMenuItem 中的 16x16 像素图像被拉伸](https://stackoverflow.com/questions/11898118/16x16-pixel-images-in-ribbonapplicationmenuitem-gets-stretched/11902118#11902118)如何使功能区菜单项中的图像更小（而不是拉伸到 32x32，好像在任何情况下都是可取的）。

基于替换此类控件的控件模板，我得到了一个很好的答案，然后我开始认为我可以改用已经存在的模板并在 generic.xaml 中有设置器来修改其中的属性。

如何查看功能区控件具有哪些组件结构？通过右键单击属性“模板”并将控件模板提取到现有的 xaml 文件很容易完成。

我可以研究这样一个菜单项的整个组件结构。这里和那里，都有命名组件，我发现了一个名为“Image”的组件。

所以我尝试在 generic.xaml 中执行此操作：

```
<Style TargetType="{x:Type ribbon:RibbonApplicationMenuItem}">
  <Setter Property="Image.Height" Value="16" />
  <Setter Property="Image.Width" Value="16" />
</Style>

<Style TargetType="{x:Type ribbon:RibbonApplicationSplitMenuItem}">
  <Setter Property="Image.Height" Value="16" />
  <Setter Property="Image.Width" Value="16" />
</Style> 
```

但我得到的只是这个：

![在此处输入图像描述](../Images/88913158159c12d5ccc10bb361ebe574.png)

嗯，它产生了一些影响，但到底发生了什么？我做错什么了？我可以像这样调整控件的命名图像的大小吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:30:58.963

我从未尝试过使用 generic.xaml 中的主题进行类似的操作，但您可以创建一个新文件并创建一个新的资源字典。现在插入您的样式并设置 x:Key 属性，如下所示：x:Key{x:Typeribbon:RibbonApplicationMenuItem}。现在转到您的 App.xaml，它应该看起来像这样

```
<Application x:Class="Coba.WPF.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"              
             StartupUri="MainPage.xaml">
    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>

                                   <ResourceDictionarySource="yourresourcedictionarypath.xaml" />

            </ResourceDictionary.MergedDictionaries>           
        </ResourceDictionary>
    </Application.Resources>
</Application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T16:11:13.323

好的，这是我在研究时得到的：

```
<Setter Property="Image.Height" Value="16" /> 
```

正在设置 Image 的任何实例的高度，而不是名称为“Image”的控件。

并使用

```
<Setter TargetName="Image" Property="Height" Value="16" /> 
```

不起作用，因为您不能在模板中使用 TargetName，除非它在触发器中。

# php - PHP setcookie() doesn't work on several pages

> ID：11902384
> 
> 赞同：-2
> 
> 时间：2012-08-10T13:11:48.337
> 
> 标签：php, cookies, setcookie

I have some trouble understanding why `setcookie()` doesn't work on several pages.

```
if (isset($_POST['group'])){ 
    $group = stripslashes($_POST['group']);
    setcookie(GSgroup, $group, time()+3600);
} 
```

I use the above code to set a cookie when a form is posted with several options. I use this on an included page so that all pages which use this function will set the cookie to the right group.

Now, this worked perfectly fine when I tried it on `localhost`, but after uploading it to a live website it doesn't work anymore. The strange thing is, that after I used it on another included page it did work.

Does anyone have any clue how this could be? I am really confused.

If you need more information please ask.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:18:41.503

```
if(isset($_POST['group'])){ 
$group = stripslashes($_POST['group']);
setcookie(GSgroup, $group, time()+3600);
} 
```

那是实际的代码吗？因为setcookie函数中的第一个参数应该是字符串或者包含字符串的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:19:26.177

```
setcookie('GSgroup', $group, time()+3600); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T10:24:49.117

请记住，页面加载时会加载 cookie，因此如果您在 PHP 脚本的第 5 行设置了 cookie，`setcookie`然后在第 10 行访问它`$_COOKIE`不会给您 cookie 值。

您需要重新加载页面才能以这种方式访问​​ cookie 值。

我喜欢[这个](http://stut.net/2008/10/16/snippet-cookie-class-for-php/)可用的 PHP cookie 类。

# mono - 为什么 NSScreen.screens 可能使用 MonoMac 返回 null 的原因？

> ID：11902386
> 
> 赞同：2
> 
> 时间：2012-08-10T13:11:53.530
> 
> 标签：mono, appkit, monomac

我正在使用 Mono/Monomac 框架与本机 Mac 库进行一些互操作。一般来说，它运作良好，但现在我需要找到屏幕分辨率。Monomac 已经为 NSScreen 定义了必要的导入。

不幸的是，NSScreen 上的所有属性（Screens、MainScreen 和 DeepestScreen）都返回 null。我倾向于相信它们根本没有工作，但我似乎在 MonoDevelop 的源代码中引用了它们，所以我很可能忽略了一些东西。完整性的代码示例（抛出异常）：

```
NSScreen[] shouldNotBeNull = NSScreen.Screens;
if (shouldNotBeNull == null)
    throw new Exception("That was unexpected"); 
```

我也尝试过`IntPtr scrRef = objc_getClass("NSScreen")`，在这种情况下，`scrRef`最终也为空（嗯，IntPtr.Zero）。巧合还是线索？

编辑：在 OSX 10.7.4 上存储 Mono 2.10.9

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:40:59.017

原来 NSApplication.Init() 没有在这条路径上被调用。

# javascript - Javascript 字符串中的 HTML 元素数量

> ID：11902391
> 
> 赞同：-2
> 
> 时间：2012-08-10T13:12:12.303
> 
> 标签：javascript

我想找到`<li>`JavaScript 字符串中存在的数字。

例如。如果，

```
var lis = "`<ul><li><a href='http://sitename/profile/udhayakumar'>udhayakumar</a></li><li><a href='http://sitename/profile/lovely'>lovely</a></li></ul>`"; 
```

然后如何找到标签`<li>`内的 s数量。`<ul>`是否可以在不插入任何 DOM 元素的情况下获得它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T13:14:42.163

我不确定您所说的“可能没有 DOM 元素”是什么意思。如果您的意思是可能不使用页面的主 dom 树（这是可以理解的），那么可以。

至于使用单独的断开连接的树，或者只是断开连接的子树，那么您不想这样做是不可理解的。

```
var lis = "<ul><li><a href='http://example.org/profile/udhayakumar'>udhayakumar</a></li><li><a href='http://example.org/profile/lovely'>lovely</a></li></ul>";
var dom = document.implementation && document.implementation.createHTMLDocument("").body || document.createElement("body");
dom.innerHTML = lis;
alert(dom.getElementsByTagName("li").length); 
```

[http://jsfiddle.net/HrcuF/](http://jsfiddle.net/HrcuF/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:18:48.637

您可以使用正则表达式。请注意，除非您想出一个非常复杂的正则表达式，否则很难排除边缘情况（例如`<li>`，您的 html 中字符串中的标签）。但是，如果您对期望的输入类型有足够的了解，那么您可以安全地忽略这种情况。

### 1\. 数个数`<li>`：

```
var pattern = /.*?(<li>)/g;
var count = 0;
var result = pattern.exec(lis);
while(result != null) {
   count++;
   result = pattern.exec(lis);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-10T13:14:34.550

如果你有 jquery，你可以这样做

```
$(lis).find('li').length 
```

# php - Filtering Nested Arrays PHP

> ID：11902395
> 
> 赞同：2
> 
> 时间：2012-08-10T13:12:16.183
> 
> 标签：php, arrays, parsing, filtering

I'm attempting to filter `$_POST` data, and later render it as HTML, that is nested arrays, going about three levels deep. My structure looks something like this:

```
Array
(
    [books] ==> Array
    (
        [book1] ==> Array
        (
            [0] ==> Title
            [1] ==> Author                    
        )
        [book2] ==> Array
        (
            [0] ==> Title
            [1] ==> Author
        )
    )

    [articles] ==> Array
    (
        [article1] ==> Array
        (
            [0] ==> Journal
            [1] ==> Title                    
        )
        [article2] ==> Array
        (
            [0] ==> Journal
            [1] ==> Title
        )
    )
) 
```

I have this gut feeling there's a way to use foreach loops and filter_input_arrays (with array and sanitize arguments), but I'm pretty new to PHP and having a hard go at it. I have successfully filtered other arrays, but I'm wondering if there is a graceful way to iterate through the arrays, filtering them, and returning an object with the same structure.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:58:07.273

This will recursively filter your data and return an object as requested, choose your filter method in the sanitize function. You can go several levels deep with this function, and have asymmetric structures.

```
$arrayData = array (
    'books' => array ( array ( 'Title1','Author1' ), array ( 'Title2','Author2' )),
    'articles' => array ( array ( 'Journal3','Title3' ), array ( 'Journal3','Title3' ))

);

function arrayFilter($arrayIn){
    $output = null;
    if (is_array($arrayIn)){
        foreach ($arrayIn as $key=>$val){
            if (is_array($val)){
                $output->{$key} = arrayFilter($val);
            } else {
                $output->{$key} = sanitize($val);
            }
        }
    } else {
        $output->{$key} = sanitize($val);
    }
    return $output;
}

function sanitize($val)
{
    //insert your preferred data filter here
    return addslashes('filtered: '.$val);
}

print_r (arrayFilter($arrayData)); 
```

Output:

```
stdClass Object
(
    [books] => stdClass Object
        (
            [0] => stdClass Object
                (
                    [0] => filtered: Title1
                    [1] => filtered: Author1
                )

            [1] => stdClass Object
                (
                    [0] => filtered: Title2
                    [1] => filtered: Author2
                )

        )

    [articles] => stdClass Object
        (
            [0] => stdClass Object
                (
                    [0] => filtered: Journal3
                    [1] => filtered: Title3
                )

            [1] => stdClass Object
                (
                    [0] => filtered: Journal3
                    [1] => filtered: Title3
                )

        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:38:21.230

I can see two things here you want to validate the input for:

1.  The structure - A book is not complete if it has not a title or not an author for example.
2.  Each fields data - A book's title much not contain whitespace at it's start and end for example.

Maybe this is a bit too simplified, but what I'd like to highlight is that you need to put your understanding of these data-types into your validation:

```
function books_is_valid(array $books) {
     foreach ($books as $book) {
         if (!$book_is_valid($bool) {
             return false;
         }
     }
     return true;
}

function book_is_valid(array $book) {
    if (!count($book) === 2) return false;
    if (!array_keys($book) === array(0, 1)) return false;
    if (!book_title_is_valid($book[0])) return false;
    if (!book_author_is_valid($book[1])) return false;
    return true;
}

book_title_is_valid($title) {
     ... # do your checks, return bool
}

book_author_is_valid($author) {
     ... # do your checks, return bool
} 
```

Like your data-structure is complex, so is your validation. As you even have different complex data-types like book and article, you can write yourself some general functions to support these type of input so you can move duplicated code into functions of it's own and remove the duplication later on.

You can then use your specific filters with the `filter_input_array` function by making use of the [`FILTER_CALLBACK`](http://www.php.net/manual/filter.filters.misc.php):

```
$args = array(
    'books'    => array('filter'  => FILTER_CALLBACK,
                        'options' => 'books_is_valid', 
                       ),
    'articles' => array('filter'  => FILTER_CALLBACK,
                        'options' => 'articles_is_valid', 
                       ),
);

$myinputs = filter_input_array(INPUT_POST, $args);

var_dump($myinputs); 
```

Note that this is validation only. So it will tell you whether or not the form submit in total was valid or not.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T13:42:42.150

see url:-- [Filter multidimensional arrays](https://stackoverflow.com/questions/9681245/filter-multidimensional-arrays)

array_filter accepts a callback that you can use to customize the filtering logic. This would work:

```
$filtered = array_filter($array, function($el) { return !empty($el['mob']; }); 
```

Here the callback is supplied as an anonymous function.

# json - ExtJs - 如何使用动态参数加载 TreeStore

> ID：11902399
> 
> 赞同：0
> 
> 时间：2012-08-10T13:12:24.270
> 
> 标签：json, extjs, tree, load, store

我的带有 treestore 的树最初被加载，但请求子节点失败。

在请求子节点时，`localpath`会传输一个参数，该参数定义子节点数据所在的路径。

初始化请求：`localpath=/`-> 获取所有子节点`/`

儿童请求：`localpath=/subfolder1`-> 让所有儿童加入`/subfolder1`

我附上了两个屏幕截图，显示了初始加载和单击文件夹的时间。

![最初加载的文件夹](../Images/fb17a34f53b3b965aa3b9a7567210b25.png)

![已单击文件夹但没有子文件夹](../Images/32d766b55bb5dc18f7c472563e2bac64.png)

顺便说一句：我树上的箭头去哪儿了？

**Json**：我的树商店接收这样的 json 数据：

```
{
    "value": {
      "name": "",
      "path": "/",
      "leaf": false,
      "type": "folder",
      "children": [
        {
          "name": "subfolder1",
          "path": "/subfolder1",
          "leaf": false,
          "type": "folder",
          "children": []
        },
        {
          "name": "subfolder2",
          "path": "/subfolder2",
          "leaf": false,
          "type": "folder",
          "children": []
        },
        {
          "name": "testreports",
          "path": "/testreports",
          "leaf": false,
          "type": "folder",
          "children": []
        }
      ]
    }
} 
```

**商店**：树商店看起来像这样：

```
 var oTreeStore = Ext.create( 'X.module.store.store.Tree', {
    model    : 'X.module.store.model.TreeNode',
    api      : this.httpApi,
    module   : "store",
    func     : "getchildren",
    scope    : "user"
 } ); 
```

**TreePanel**创建：

```
 var oTreePanel = Ext.create( 'X.module.store.view.TreePanel', {
    store       : oTreeStore
 } ); 
```

**树形面板**定义：

```
 constructor: function( oConfig ) {

     var self = this;
     //creating a proxy, which can communicate with HTTP-API
     //and is able to parse it's json-tree format

     var oProxy = Ext.create( 'X.lib.httpapiclient.Proxy', {
        api     : oConfig.api,
        module  : oConfig.module,
        func    : oConfig.func,
        params  : {
           scope       : oConfig.scope
        },
        reader  : {
           type: 'json',
           root: function( o ) { return o.value? o.value.children : o.children; }
        },
        delay   : oConfig.delay || 100,
        success : oConfig.success || function() {},
        progress: oConfig.progress || function() {},
        error   : oConfig.error || function() {}
     } );

     oConfig.nodeParam = 'localpath';
     oConfig.proxy = oProxy;

     self.callParent( arguments );

     //the HTTP-API requires the ID of the root-node to be empty
     self.on( 'beforeload', function( s, o ) {
        if( o.params.localpath === 'root' ) o.params.localpath = '/';
     } );

  } 
```

**型号**：型号...

```
 Ext.define( 'X.module.store.model.TreeNode', {
      extend: 'Ext.data.Model',
      fields: [
         { name: 'name',         type: 'string' },
         { name: 'path',         type: 'string' },
         { name: 'type',         type: 'string' }
      ]
   } ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:26:53.503

解决方案是在`children`物业中提供儿童。就我而言，我正在像这样生出空孩子`children: []`。所以没有什么可显示的。

# ios - iOS 4.1 Personal hotspot pushing down tabbar

> ID：11902405
> 
> 赞同：2
> 
> 时间：2012-08-10T13:12:47.023
> 
> 标签：ios, layout, tabbar

I'm writing application for iOS 4.1+ and I had to add tab bar to view controller programmatically.

Here is the code of main ViewController:

```
- (void)viewDidLoad
{
     FirstViewVC* vc1 = [[FirstViewVC alloc] init];
     vc1.tabBarItem.title = @"Tab 1";
     AboutVC* vc2 = [[AboutVC alloc] init];
     vc2.tabBarItem.title = @"About Program";
     NSArray* controllers = [NSArray arrayWithObjects:vc1,vc2, nil];
     tabBarController.viewControllers = controllers;
     self.tabBarController.view.frame = [[self view] frame];
     tabBarController.view.autoresizingMask = UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleHeight;

     self.view.autoresizingMask = UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleHeight;
     [self.view addSubview:tabBarController.view];
         (...) //deallocs
} 
```

The result looks like this:

[http://img152.imageshack.us/img152/5176/nohotspotup.png](http://img152.imageshack.us/img152/5176/nohotspotup.png)

Now, if I turn on personal hotspot, everything is sliding down:

[http://img528.imageshack.us/img528/9348/img0028y.png](http://img528.imageshack.us/img528/9348/img0028y.png)

As you can see tabbar is cut off. I've tried many ways of applying resize masks and adding tabbar, but I still can't manage to get this working properly.

Is there a way to fix this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T20:05:35.463

这不是错误，如果您接听电话然后在通话仍处于活动状态时切换到您的应用程序，也会发生这种情况。

这是你需要的东西。在布局 UI 时要考虑到并确保当该栏恢复到正常大小时 UI 恢复到所需的状态，这是另一件需要注意的小事。

此外，如果您打开**iChat** ，您可以在模拟器上更轻松地进行测试- 我想现在您应该**在 Mountain Lion 上使用 FaceTime 应用程序**，由于“活动呼叫”，这应该将顶部栏设置为绿色，我试图摆脱这对于模拟器来说是徒劳的，因为我正在开会和开发这导致了一个问题，但是一个很好的问题，因为我随后正确地布置了我的 UI。

# jquery - Using enter key submitting more than one time

> ID：11902406
> 
> 赞同：0
> 
> 时间：2012-08-10T13:12:51.570
> 
> 标签：jquery, ajax

I am working on a gallery with comment system. It means when I click on next and previous then the new pic with its comments are loaded. But the problem is that I am using a commentbox in which when I open a pic and submit comment for it, it submit the same comment only one time (the way it should work), but when I click on next pic (pic 2) and submit comment for it, the comment is submitted two times (instead of one), and the third pic three times and so on. Here is my jquery code hope someone help me with this

```
$('body').on('keyup', '#stg_cmtarea', function(e) {

    if (e.which == 13 && $.trim(this.value).length) {
        var picId = $(".gal_cmt_cnt_info").attr('gdata');
        var userId = $("#mipicview-overlay-content").attr('vwid');
        var comment = $("#stg_cmtarea").val();
        var dataString = 'comment=' + comment + '&pic_id=' + picId + '&user_id=' + userId;
        if ($.trim(comment).length == 0) {
            alert("Please Enter Comment Text");
        }
        else {
            $.ajax({
                type: "POST",
                url: "modules/gallery/piccomment_ajax.php",
                data: dataString,
                cache: false,
                success: function(html) {
                    alert(html);

                }
            });
        }
        return false;
    }
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:33:09.313

我看不出这段代码有什么问题。就像您每次都在重新绑定 keyup 事件，并且该事件只是多次绑定到评论框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:19:47.957

在我的 iPad 上写作，所以测试任何东西都不容易，但你可以这样做：

改变

```
$('body').on('keyup','#stg_cmtarea', 
```

和

```
$('body').on('submit','#yourformid', 
```

然后，您应该删除 e.which-part。如果你真的想在 enter-push 上提交，你可以创建一个在 enter 上监听的函数。

这应该可以解决您的问题。请记住始终返回 false，因此不会提交表单。

# database - 有没有办法在 DataSource 配置中将时区设置为 UTC

> ID：11902409
> 
> 赞同：3
> 
> 时间：2012-08-10T13:12:59.030
> 
> 标签：database, grails, groovy, timezone, datasource

我们有一个 Grails 2.1.0 项目，我们的暂存和生产数据库位于共享数据库服务器上。

我们想在每个连接的基础上将时区设置为 UTC (0)，有没有一种简单的方法可以从 DataSource.groovy 文件中做到这一点。

也欢迎其他建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T07:23:44.520

[Jared 对grails/mysql 时区更改](https://stackoverflow.com/questions/3390770/grails-mysql-timezone-change)的回答 表明我们根本不需要调整 mysql 时区，因为日期时间字段存储为 MySql DateTime。我通过将 -Duser.timezone=UTC 添加到 $JAVA_OPTS 为我的本地计算机解决了这个问题，因此这可能是所需的解决方案。

我们已经在本地和舞台环境中尝试过这个，这确实解决了这个问题。

# android - 注销扩展类的 BroadcastReceiver

> ID：11902412
> 
> 赞同：0
> 
> 时间：2012-08-10T13:13:07.940
> 
> 标签：android, sms, broadcastreceiver, extends

我有一堂课如下：

```
public class FYPSmsReceiverBroadcast extends BroadcastReceiver 
```

我需要取消注册接收器，因为在我收到 SMS 消息时应用程序存在后出现强制关闭错误。（表示某些东西仍在侦听短信但由于应用程序已关闭而无法访问特定活动；该错误似乎仅在收到 1 个文本后发生，第二个文本似乎不会产生强制关闭错误）

有许多类似的问题，但没有一个可以帮助我采用的方法。我尝试添加如下 onPause ：

```
 public void onPause() {

        unregisterReceiver(FYPSmsReceiverBroadcast);
    } 
```

但这会导致 Eclipse 中出现以下错误：'FYPReceiverBroadcast 无法解析为变量'

在扩展广播接收器的类的 onReceive 方法中，我调用了： FYPSpeakerActivity.speakSMSfrom();

它调用另一个使用文本到语音的类 - 此行似乎是在收到 SMS 时被调用的（尽管应用程序已关闭），并创建强制关闭错误。

任何人都可以建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T13:18:55.117

`FYPReceiverBroadcast`是一个`class`。您需要传递一个`object`，这是一个示例：

```
FYPReceiverBroadcast myFYPReceiverBroadcast = new FYPReceiverBroadcast(...);

...

public void onPause() {
     unregisterReceiver(myFYPReceiverBroadcast);
} 
```

这是一个如此基本的编程概念，我建议您阅读以下文章以了解差异：

> 对象是相关状态和行为的软件包。类是创建对象的蓝图或原型。

[http://alfredjava.wordpress.com/2008/07/08/class-vs-object-vs-instance/](http://alfredjava.wordpress.com/2008/07/08/class-vs-object-vs-instance/)

# haskell - 为什么这段代码使用阴影`let`绑定挂起？

> ID：11902413
> 
> 赞同：8
> 
> 时间：2012-08-10T13:13:08.727
> 
> 标签：haskell, scope, let, letrec

运行此代码：

```
j = let x = 4
    in let x = x * x
       in x 
```

在口译员中：

```
ghci> j
... no response ... 
```

挂起时 CPU 使用率很低。为什么是这样？我预计`j = 16`。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-10T13:13:08.727

根据 Haskell 报告，[第 3.12 节](http://www.haskell.org/onlinereport/haskell2010/haskellch3.html#x8-440003.12)：

> Let 表达式具有一般形式 let { d1 ; … ; dn } 在 e 中，并引入一个嵌套的、词法范围的、相互递归的声明列表**（let 在其他语言中通常称为 letrec）**。声明的范围是表达式 e 和声明的右侧。

*（强调我的）*

所以在第二个`let`where 中`x = x * x`，所有`x`的 s 都指向同一个绑定，*没有一个*指向外部`x = 4`绑定。

# sqlite - 如果 count(*) 为 0，则在更新到 INSERT 行时触发

> ID：11902416
> 
> 赞同：0
> 
> 时间：2012-08-10T13:13:14.927
> 
> 标签：sqlite, triggers

我正在尝试在 sqlite3 中创建一个计数器

c3 列是我的计数器

我需要的是一个触发器，如果​​ c1 和 c2 与更新语句不匹配，它将插入一个新行。

设置：

```
CREATE TABLE t1 (c1,c2,c3);
INSERT INTO t1 VALUES (1,1,1); 
```

我的更新命令：

```
UPDATE t1 SET c3=(SELECT c3 FROM t1 WHERE c1=1 AND c2=1) + 1 WHERE c1=1 AND c2=1; 
```

这是触发器，我得到了但它不起作用：

```
CREATE TRIGGER tr1 
BEFORE UPDATE ON t1 
  WHEN (SELECT COUNT(*) FROM t1 WHERE c1=NEW.c1 AND c2=NEW.c2) < 1 
    BEGIN 
      INSERT INTO t1 (c1,c2,c3) VALUES (NEW.c1, NEW.c2, 0); 
    END; 
```

以下是我尝试过的一些绝望的事情：

```
CREATE TRIGGER tr1 BEFORE UPDATE ON t1 WHEN (SELECT COUNT(*) FROM t1 WHERE c1=1 AND c2=2) < 1 BEGIN INSERT INTO t1 (c1,c2,c3) VALUES (2, 2, 0); END;
CREATE TRIGGER tr2 BEFORE UPDATE ON t1 WHEN (SELECT COUNT(*) FROM t1 WHERE c1=NEW.c1 AND c2=NEW.c2) = 0 BEGIN INSERT INTO t1 VALUES (2, 2, 0); END;
CREATE TRIGGER tr3 AFTER UPDATE ON t1 WHEN (SELECT COUNT(*) FROM t1 WHERE c1=NEW.c1 AND c2=NEW.c2) = 0 BEGIN INSERT INTO t1 VALUES (2, 2, 0); END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:30:44.080

让它与插入和 2 个触发器一起工作。

创建表 t1 (c1,c2,c3);

```
CREATE TRIGGER tr1 BEFORE INSERT ON t1 BEGIN SELECT RAISE(IGNORE) WHERE (SELECT COUNT(*) FROM t1 WHERE c1=NEW.c1 AND c2=NEW.c2) > 0;
END;
CREATE TRIGGER tr2 BEFORE INSERT ON t1 BEGIN UPDATE t1 SET c3=(SELECT c3 FROM t1 WHERE c1=NEW.c1 AND c2=NEW.c2) + 1 WHERE c1=new.c1 AND c2=new.c2;END;
COMMIT; 
```

这将插入：

```
INSERT INTO t1 VALUES (1,1,1); 
```

这将更新并增加计数器：

```
INSERT INTO t1 VALUES (1,1,1); 
```

如果有人可以将这些触发器组合成一个，那就太好了。

# java - Navigating views while using Session and View Scoped managed beans JSF 2.0

> ID：11902423
> 
> 赞同：0
> 
> 时间：2012-08-10T13:13:51.670
> 
> 标签：java, jakarta-ee, jsf-2

Here is an example of what I am trying to do.

In the sessionScoped bean

```
SessionBeanloadRecord(){
Do something
ViewScopedBean viewScopedBean = (ViewScopedBean) context.getApplication().evaluateExpressionGet(context, "#{viewScopedBean}", ViewScopedBean.class);
return viewScopedBean.viewScopedBeanLoadRecord();
} 
```

In the viewScoped bean

```
ViewScopedBeanloadRecord(){
Retrieve and populateFields    
return "viewRecord.xhtml";    
} 
```

So in a nut shell I would like to call a method within a view scoped bean from another bean which is on another view (listRecords.xhtml). When I run this (just using a standard commandlink), the session bean works as I would expect, viewScoped bean is created and the ViewScopedBeanloadRecord method is called BUT THEN the viewScoped bean is recreated (the constructor is called again) but this time the ViewScopedBeanloadRecord is not run and the page loads with blank fields.

I understand that the view scoped bean is only alive as long as you return null (or have a void method) to stay on the same view but then how do you transition from listRecords.xhtml to viewRecord.xhtml and run the load method?

Once I am on the viewRecord.xhtml view I will also be required to load more records simultanously (in different browser windows) so I cannot keep the records in the session.

Please note: Based on company policy I am not allowed to post actual code so this example is what I am limited to. Sorry!

Any help would be appreciated!

Thanks

Eric

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:20:01.447

We had a similar problem and we have solved it by using a `@SessionScoped` bean as a backing bean for the whole session. We inject it in other `@ViewScoped` and `@RequestScoped` beans managing the needed data in session.

Another walk around would be to use GET parameters.

Remember about the Life Cycle of beans, and use different functions for the purpose of polluting with data. `@PostConstruct` annotation comes very handy too.

Good luck :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T19:38:18.910

After fighting and trying different combinations with Requestscoped, Viewscoped and @PostConstruct I was unable to get this scenario to work properly. I am also using dynamic include files which depend on properties in the beans to decide which xhtml file to build, this seemed to cause a problem when using the viewScope and @PostConstruct.

So I went with an entirely session based solution.

Instead of a viewScoped or requestScoped bean I created a property of type "record" within the session bean and whenever the view record method in the sessionbean was called I replaced the previous record property with the new one and then forward to the display record view. So it created a sort of "request" record property that was overwritten with each new call to the view record method. So only the last recored viewed stays in the session.

I have read about the `<t:saveState>` tag which might solve the issue but as a project it was decided to not use any additional frameworks on top of JSF so that was not an option.

# c# - Registry.GetValue 错误。Visual Studio 2010 中的 C#

> ID：11902428
> 
> 赞同：0
> 
> 时间：2012-08-10T13:14:00.447
> 
> 标签：c#, visual-studio-2010

我试图从注册表中获取一个值，以便使用水晶报表完成打印功能。

但是当我执行路径时它会出错，因为我的注册表路径无法正常工作。

```
 Values- Global.gAPPNAME = "TEST" Global.gAPPSECTION = "STARTUP"

     Global.gREPORTDIR = Registry.GetValue(Global.gAPPNAME, Global.gAPPSECTION, "REPORTDIR").ToString(); 
```

当它到达 Global.gREPORTDIR 行时，我收到错误消息 - “注册表项名称必须以有效的基本密钥名称开头”

我对此并不陌生，我想知道这是否可以通过代码修复，或者我需要在实际计算机中找到以找到正确路径的东西。任何建议都会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T13:17:34.470

您需要指定一个有效的根名称：

> 有效的根名称是`HKEY_CURRENT_USER`、`HKEY_LOCAL_MACHINE`、 `HKEY_CLASSES_ROOT`、`HKEY_USERS`、`HKEY_PERFORMANCE_DATA`、 `HKEY_CURRENT_CONFIG`和`HKEY_DYN_DATA`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:17:29.430

您可以在此处阅读有关 Registry.GetValue 的信息：http: [//msdn.microsoft.com/library/microsoft.win32.registry.getvalue.aspx](http://msdn.microsoft.com/library/microsoft.win32.registry.getvalue.aspx)

所以你的错误来自第一个参数：

> 有效的根名称为 HKEY_CURRENT_USER、HKEY_LOCAL_MACHINE、HKEY_CLASSES_ROOT、HKEY_USERS、HKEY_PERFORMANCE_DATA、HKEY_CURRENT_CONFIG 和 HKEY_DYN_DATA。例如，在 Visual Basic 中，字符串“HKEY_CURRENT_USER\MyTestKey”访问 HKEY_CURRENT_USER 根中子项“MyTestKey”的键/值对。

您可以使用静态键以方便使用

```
Registry.LocalMachine.Name 
```

# android - 无法将 android Spydroid 连接到 wowza

> ID：11902435
> 
> 赞同：1
> 
> 时间：2012-08-10T13:14:28.727
> 
> 标签：android, wowza

自过去两周以来，我一直在尝试将 android spydroid 框架用于 wowza 媒体服务器 3，但我失败了。我什至关注了他们的链接 [http://code.google.com/p/spydroid-ipcamera/issues/detail?id=20](http://code.google.com/p/spydroid-ipcamera/issues/detail?id=20)

但都失败了。但是 Spydroid 使用 rstp://ip:8086/ 成功流式传输到我的 PC vlc 播放器。它无法流式传输到 wowza 服务器。这是我所做的

1.  安装了 spydroid 1.6
2.  启动应用程序并将 spydroid.sdp 上传到 [wowza-install-dir]/content
3.  通过以下链接在 wowza 创建了一个应用程序 rtplive： [http ://www.wowza.com/forums/content.php?36-How-to-set-up-live-streaming-using-an-RTMP-based-encoder](http://www.wowza.com/forums/content.php?36-How-to-set-up-live-streaming-using-an-RTMP-based-encoder)

4.  最后我试图通过 vlc 播放流，但它显示无法打开流错误。

我想有人已经设法连接并流式传输到 wowza 请分享。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T02:16:38.363

你联系过 Wowza 支持团队了吗？他们可能对你有一些想法。您需要在 Wowza 论坛上发帖或发送邮件到支持 [at] wowza.com。

-克里斯

# c++ - 具有 asio get 方法成员的 C++ 对象

> ID：11902437
> 
> 赞同：3
> 
> 时间：2012-08-10T13:14:32.943
> 
> 标签：c++, class, member, ostream

我想实现一个成员匹配这个函数的类：

```
int get(
  string &host_,
  string &port_, 
  string url_path,
  ostream &out_,
  vector<string> &headers, 
  unsigned int timeout
  ) 
```

我有这个：

```
#include <string>
#include <vector>
#include <iostream>
#include <istream>
#include <ostream>
#include "Register.h"

using namespace std;

class Request : public Register {

private:
string *host;
string *port;
string *url;
ostream *out;
vector<string> *header;
unsigned int *timeout;

public:
Request() {
  this -> host = new string();
  this -> port = new string();
  this -> url = new string();
  this -> out = new ostream();
  this -> header = new vector<string>();
  this -> timeout = new int();
} 
```

但我无法实例化它。例如，ostream 是怎么回事：

```
this -> out = new ostream(); 
```

我还是 C++ 的新手，现在我完全糊涂了，我在 Google 上找不到正确的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:34:21.897

[`std::ostream`](http://en.cppreference.com/w/cpp/io/basic_ostream)是特定流实现的基类，例如[`std::ofstream`](http://en.cppreference.com/w/cpp/io/basic_ofstream)，您不能直接实例化它。

在 C++ 中，与 Java 不同，我们不会在堆上分配所有内容，而是更喜欢*值语义*：

```
/// Can be easily copied
class HoldSomething {
private:
    std::string name;
    std::vector<std::string> values;
public:
    /// constructors
    HoldSomething() : name(), values() {}
    explicit HoldSomething( const std::string& name ) :
        name( name ), values() {}
    /// modifiers
    void addValue( const std::string& val ) {
        value.push_back( val );
    }
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:31:06.397

我认为您在引用和指针之间感到困惑。该函数采用向量 &headers、字符串 &host_ 等引用。您的类存储不同的指针。

如果您通常将变量传递给函数（签名中没有 * 或 &），那么您将创建您传递的内容的副本。这就是“逐个传递”。如果您传入一个指针 (*)，则您传递的内容指向您要使用的变量的内存地址。从技术上讲，您是通过副本传递指针，但它指向同一事物，所以您没问题。如果您传入一个引用 (&)，那么您就是在调用函数的作用域中为变量起别名。您是在说“我想像通过副本一样对待这个变量，除了我希望将更改应用于最初从外部范围传递给函数的变量”。

因此，您的类可以包含普通成员：

```
private:
string host;
string port;
string url;
ostream out;
vector<string> header;
unsigned int timeout; 
```

这样您就可以将它们直接传递给函数而不会出现问题。在这种情况下，它们也将是默认构造的，因此您无需使用“new”或做任何事情。事实上，您甚至不需要编写构造函数。

请注意，您可能需要一个访问器函数来修改所有这些，因为您将它们设为私有，或者您需要让您的构造函数接受参数，以便在使用结构之前为数据成员提供有用的值。

**PS：**您想使用 std::ofstream 代替您的输出 :) 在下面的链接中查看以下示例：

[http://www.cplusplus.com/doc/tutorial/files/](http://www.cplusplus.com/doc/tutorial/files/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T13:31:16.453

您应该发布您遇到的错误。`std::ostream`只是接口；你不能实例化它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T13:41:10.607

std::ostream 只是一个接口您可以通过“std::cout”或派生自 std::ostream 的另一个具体对象来初始化“out”指针。例如：

```
out = &std::cout; 
```

或者

```
std::ofstream file("file.txt");
out = &file; 
```

顺便说一句，使用普通指针是个坏主意。尝试任何智能指针，例如 std::shared_ptr 或 std::unique_ptr。

# powershell - Powershell 无异常跳转到 finally 消息

> ID：11902439
> 
> 赞同：0
> 
> 时间：2012-08-10T13:14:35.603
> 
> 标签：powershell, exception-handling, try-catch-finally

我的 PowerShell 代码有问题。有时——无论出于何种原因——我的脚本直接跳到 finally 块中，而没有来自 catch 块的任何错误消息。这是我的 PowerShell 代码：

```
try
{
    $sleepTime = $reservationDuration - $prepareTime
    (get-date -format hh:mm:ss)+"`tinfo:`tstart sleep before warning VIP sleep-time:"+$sleepTime | out-file $logFilePath -append
    start-sleep -s $sleepTime
    (get-date -format hh:mm:ss)+"`tinfo:`tsleeptime over" | out-file $logFilePath -append
}
catch
{
    (get-date -format hh:mm:ss)+"`terror:`tchaught exception: "+$error[0] | out-file $logFilePath -append
}

finally{
    (get-date -format hh:mm:ss)+"`tinfo:`tFinally" | out-file $logFilePath -append
} 
```

如您所见，我正在编写一些日志文件以查看发生了什么。我总是在我的 $sleepTime 变量中得到正确的 int 值。然而，有时它会直接跳入 finally 块而没有写“sleeptime over..”甚至“chaught exception...”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T21:21:26.107

catch 块执行的唯一时间是 try 块中出现异常时。您在 try 块中所做的唯一有可能产生异常的事情就是写入日志文件。

因此，catch 块只会在出现阻止输出写入日志文件的异常时执行。

让我知道我是否遗漏了什么。

# ios - 为什么我的 iOS 应用程序不再在 Mountain Lion 的 iOS 5.0 模拟器中运行？

> ID：11902440
> 
> 赞同：6
> 
> 时间：2012-08-10T13:14:38.927
> 
> 标签：ios, ios-simulator, osx-mountain-lion

我被迫升级到 Mountain Lion，以便可以使用 Keynote。

现在我的 iOS 应用程序不在模拟器下运行。我之前使用的是 iPhoneSimulator5.0.sdk。现在当我运行应用程序时，它给出了错误

> 模拟应用程序退出。单击重新启动以重试。

有一个切换 SDK 的选项，但只安装了一个 SDK，没有什么可切换的。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T10:03:48.617

您应该下载并安装 IOS 5.0 模拟器，这样做：

1.  打开 Xcode
2.  从 Xcode 菜单中选择 Preferences...（或按 cmd+,）
3.  转到“下载”选项卡
4.  在组件下你会找到 IOS 5.0 Simulator，安装它。

# c# - 从他们以管理员身份启动的应用程序登录/模拟为本地/域用户

> ID：11902444
> 
> 赞同：4
> 
> 时间：2012-08-10T13:14:46.093
> 
> 标签：c#, .net, windows, wmi

我正在尝试使用 WMI 连接到域上的远程 Windows 服务器计算机。以登录域用户身份启动时连接正常，但以本地管理员身份启动时，它会失败。有没有办法告诉应用程序在以管理员身份启动时使用较低的域帐户进行连接？（也不提示输入用户/密码。）

我试过了：

```
WindowsIdentity.GetCurrent().Impersonate(); 
```

但即使 GetCurrent 将域用户显示为当前用户，它似乎也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:16:42.803

我使用Uwe Keim 的[这段代码成功地模拟了其他域帐户。](http://www.codeproject.com/Articles/10090/A-small-C-Class-for-impersonating-a-User)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:19:59.323

看一下[`WindowsImpersonationContext`](http://msdn.microsoft.com/en-us/library/system.security.principal.windowsimpersonationcontext.aspx)- 它在切换线程用户上下文时对我来说很可靠。**它直接与Windows API**对话。

# git - 如何将以哈希开头的模式添加到 gitignore

> ID：11902446
> 
> 赞同：9
> 
> 时间：2012-08-10T13:14:52.953
> 
> 标签：git, emacs, gitignore, temporary-files

当我使用 Emacs 时，它会创建临时文件，例如`#foo.txt#`如何向其中添加模式`.gitignore`将忽略这些文件（# 被 git 解释为 .gitignore 中的注释）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-10T13:17:40.307

尝试转义`#`字符：

```
$ cat .gitignore
\#*.txt\# 
```

我希望这有帮助。

# c# - ASP.NET Url Rewriting - 测试用例需要正则表达式

> ID：11902447
> 
> 赞同：0
> 
> 时间：2012-08-10T13:14:55.243
> 
> 标签：c#, asp.net, regex, url-rewriting

我需要一个 ASP.NET url 重写模块的正则表达式来满足以下测试用例吗？

```
products/                  products.aspx?Atts=&Page=
products/att1/             products.aspx?Atts=att1/&Page=
products/att1/att2/        products.aspx?Atts=att1/att2/&Page=
products/2/                products.aspx?Atts=&Page=2
products/att1/2/           products.aspx?Atts=att1/&Page=2
products/att1/att2/2/      products.aspx?Atts=att1/att2/&Page=2 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:47:41.803

我设法用两条规则来捏造这一点。没有我想的那么漂亮，但你能做什么？

```
<rule name="ProductsPagingRule" stopProcessing="false">
  <match url="^products([a-z0-9\-/]*)(?:/([0-9]+)/)"/>
  <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
  </conditions>
  <action type="Rewrite" url="products{R:1}/?Page={R:2}" />
</rule>

<rule name="ProductsRule" stopProcessing="true">
  <match url="^products/([a-z0-9\-/]*)/" />
  <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
  </conditions>
  <action type="Rewrite" url="products.aspx?PageId={R:1}" />
</rule> 
```

我最接近的一条规则是：

```
^products(?=(?:(?:[a-z0-9\-/]*)/([0-9]+)/$)?)(.[a-z0-9\-/]*) 
```

如果有人觉得勇敢的话，我仍然有兴趣在一条规则中看到这一点......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:09:04.577

这是一个尝试。这确实会强制使用尾部斜杠和非空 attx 字符串。如果您不需要后者，请替换`([^/]+/)*`为`(.*/)?`.

```
<rule source="products/(([^/]+/)*)([0-9]*)/$"
      destination="products.aspx?Atts=$1&amp;Page=$3"/>
<rule source="products/(([^/]+/)*)$"
      destination="products.aspx?Atts=$1&amp;Page="/> 
```

（这似乎是 ASP.NET 中常用的 URL 重写规则样式；我相信您可以更改它们以适应您正在使用的模块）。

# validation - 如何验证和删除cfhttp上传的Coldfusion中的图像？

> ID：11902450
> 
> 赞同：0
> 
> 时间：2012-08-10T13:15:09.097
> 
> 标签：validation, coldfusion, cfhttp

我正在跑步`Coldfusion8`，需要从远程位置拾取和存储图像，并试图验证所拾取的内容是否实际上是图像。

我通常做这样的验证：

```
<cffile result="upload" action="upload" accept="image/png" filefield="Dateiname5" destination="#tempDirectory#" nameconflict="overwrite" />
    <cfset testFilePath = tempDirectory & upload.serverFile>
    <cfimage name="tempFile" action="read" source="#testFilePath#" />
    <cfif NOT isImageFile( testFilePath ) >
        <cfset fileDelete( testFilePath ) />
        <cfthrow type="FileNotFound" message="#tx_settings_icons_error_img#" />
    <cfelseif ImageGetHeight( tempFile ) NEQ 512 or ImageGetWidth( tempFile ) NEQ 512>
        <cfset fileDelete( testFilePath ) />
        <cfthrow type="FileNotFound" message="#tx_settings_icons_error_size#" />
    <cfelseif NOT listfindnocase(allow, upload.serverfileext) >
        <cfset fileDelete( testFilePath ) />
        <cfthrow type="FileNotFound" message="#tx_settings_icons_error_file#" />
    </cfif>
    <cfset fileDelete( testFilePath ) /> 
```

因此，我将上传到一个安全文件夹，对类型、尺寸和文件扩展名执行验证，如果任何验证失败，则从我的安全文件夹中丢弃。

我现在需要使用验证扩展名和类型`cfttp`，但无法正常工作。

现在我有这个：

```
<cfhttp timeout="45" throwonerror="false" url="#variables.testFilePath#" method="get" getasbinary="yes" result="variables.objGet">
<cfset varaibles.allow = "png,jpg,jpeg">
<cfset variables.objImage = ImageNew(variables.objGet.FileContent)>
<cfif NOT isImageFile( variables.objImage ) >
    <cfset variables.failedLoads = variables.failedLoads & img_paths.bilddateiname & "(" & tx_gen_filetype & "), ">
    <!--- <cffile action="delete" file="#variables.objImage#"> --->
<cfelseif listFindNoCase( variables.allow, variables.fileExt) EQ 0>
    <cfset variables.failedLoads = variables.failedLoads & img_paths.bilddateiname & "(" & tx_gen_fileformat & "), ">
    <!---  <cffile action="delete" file="#variables.objImage#"> --->
<cfelse>
    <cfdump output="e:\website\stokkers\test2012\dump.txt" label="catch" var="it's an image allright">
</cfif> 
```

**问题：**
我可以`isImageFile`在这里使用还是我创建的图像不是图像......我可以检查？此外，如果任何验证失败，我如何再次删除创建图像（我假设从内存中）？`cffile action="delete"`似乎不起作用？

**编辑：**
这就是我现在正在检查的内容：

```
<cfhttp timeout="45" 
    throwonerror="false" 
    url="#variables.testFilePath#" 
    method="get" 
    useragent="Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.8.1.12) Gecko/20080201 Firefox/2.0.0.12" 
    getasbinary="yes" 
    result="variables.objGet"
    >
<cfset variables.objImage = ImageNew(variables.objGet.FileContent)>
<!--- returns NO --->   
<cfdump output="e:\website\stokkers\test2012\dump.txt" label="catch" var="#IsBinary(variables.objImage)#">

<cfif NOT isImageFile( variables.objImage ) >
    <cfdump output="e:\website\stokkers\test2012\dump.txt" label="catch" var="not an image">    
    <!--- <cffile action="delete" file="#variables.objImage#"> --->
</cfif> 
```

该文件是一个`jpg`，但我总是失败`isImageFile`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T15:25:11.737

问题是`isImageFile`需要基于 ColdFusion livedocs 的路径。您要做的是调用`ImageNew`，如果`fileContent`不是有效图像，它将引发异常。然后，您可以`cfcatch`该异常，然后采取相应的行为。如果它没有抛出异常，那么它就是一个有效的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-22T17:07:18.607

解决方案来自 Brian 和 Dan 的答案：

```
<cfparam name="form.fileUpload" default="">
<cfif len(trim(form.fileUpload))>
   <cftry>
      <cffile action="readBinary" 
            file="#form.fileUpload#" variable="aBinaryObj">
      <cfset myImage = ImageNew(aBinaryObj)>
      <cfset imgOkay = "Yes">

      <cfcatch type="any">
         <cfset imgOkay = "No">
      </cfcatch>
   </cftry>    

   <cfif imgOkay eq "Yes">
       <cffile action="upload" 
           fileField="fileUpload" destination="C:\docs">
       <p>Thank you, your file has been uploaded.</p>

   <cfelse>
      <p>We're sorry. The file chosen is not an image file,
         or it is corrupt, so it cannot be uploaded.</p>
   </cfif>
</cfif>

<form enctype="multipart/form-data" method="post">
  <input type="file" name="fileUpload" /><br /><br />
  <input type="submit" value="Upload File" />
</form> 
```

# ruby - 无法使用“匹配 []”从下载的页面中提取数据

> ID：11902452
> 
> 赞同：0
> 
> 时间：2012-08-10T13:15:18.590
> 
> 标签：ruby, regex

我有以下 Ruby 代码：

```
require 'rubygems'
require 'rest_client'

url = 'http://asdf.com'
response = RestClient.get(url)
b = response.body

result = b.match(/<head>(.*)<\/head>/)[1]
puts result 
```

当我尝试解析此页面以获取标题时，我收到以下错误：

```
7:in `<main>': undefined method `[]' for nil:NilClass (NoMethodError) 
```

我在做什么错？（除了使用正则表达式来解析 html。我只是在试验）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T13:20:39.673

猜测`<head>`标签并不都在一条线上。尝试：

```
result = b.match(/<head>(.*)<\/head>/m)[1] 
```

（注意`m`，将您切换到多行模式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:24:59.867

> 我在做什么错？（除了使用正则表达式来解析 html。我只是在试验）

您正在使用正则表达式来解析 HTML，这就是您做错了。在这种特殊情况下，您的正则表达式不匹配任何内容，因此返回`Regexp#match`并且`nil`您正在尝试调用`[]`.`nil`

您正在解析的文档如下所示：

```
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <title>asdf</title>
  </head>
… 
```

即文档中有换行符。HTML 解析器会忽略换行符，因为它知道它们在 HTML 中无关紧要，但您的正则表达式不会。

# php - PHP 验证 - 输入类型“文本”值必须是一个特定的单词

> ID：11902455
> 
> 赞同：1
> 
> 时间：2012-08-10T13:15:40.553
> 
> 标签：php, validation

如果这看起来像是一个“叹气，另一个~”的问题，我很抱歉，但我已经看得很远了，但似乎没有一个东西适合我的需要。我看过像刽子手这样的游戏，但他们逐字逐句地做，我不知道如何处理代码。（我承认我的无能。我的知识非常有限）

然后我决定看测验，但它们似乎只处理单选按钮。我尝试编辑脚本，以便它们具有输入类型的文本框，但这似乎导致了更多问题，因为我将问题从多项选择变为开放答案。

我真正想要的是这样的基本设置：

问题
输入框
按钮（提交，我想？）

从美学角度来说，没有什么特别的，只有这三件事。

摘要：我如何让我的代码检查他们给出的问题的答案是否是香蕉？如果这个词确实是香蕉，我如何让按钮只工作？

经过几天的搜索，我现在非常迷茫。非常感谢你们为此付出的任何努力，这对我来说意义重大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:20:53.627

基本上你会将提交按钮更改为普通按钮，并在提交表单之前运行一个javascript函数来检查值是否正确。就像是：

```
<script>
    function validate() {
        if (document.getElementById('check_value').value == 'banana') {
            document.getElementById('myForm').submit();
        }
        else {
            alert("Incorrect value.");
        }
    }
</script>
<form id='myForm' method='POST' action='process.php'>
    <input type='text' id='check_value' />
    <input type='button' value='Submit' onclick='validate();' />
</form> 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-10T13:19:54.227

这是一些使用 javascript 的基本客户端脚本。

使用该`onkeyup`事件，我们可以测试用户在文本框中输入的值，将其与“正确”值进行比较，并根据该评估启用/禁用我们的提交按钮。

```
<div id="question">How do you spell "banana"?</div><br />
<form action="" method="post">
    <input type="text" name="answer" id="answer" /><br />
    <input type="submit" id="submit" disabled="true" />
</form>

<script type="text/javascript" language="javascript">
    $("#answer").on('keyup', function() { 
        if ($(this).val() == "banana") {
            $("#submit").removeAttr("disabled");
        } else {
            $("#submit").attr("disabled", "true");
        }
    });
</script> 
```

正如其他人指出的那样，您需要验证服务器端的输入，以防万一用户是个混蛋并且禁用了 javascript。

```
<?php

    if ($_POST['answer'] == "banana") {
        // we're OK, do something
    } else {
        // return to the form and let the user know he's a cheater!
    } 
```

# python - 我想异常处理“列表索引超出范围”。

> ID：11902458
> 
> 赞同：133
> 
> 时间：2012-08-10T13:15:45.667
> 
> 标签：python, list, exception-handling

我正在使用**BeautifulSoup**并解析一些 HTML。

我从每个 HTML 中获取特定数据*（使用 for 循环）*并将该数据添加到特定列表中。

问题是，一些 HTML 具有不同的格式*（并且它们没有我想要的数据）*。

所以，我试图使用异常处理并向`null`列表添加值*（我应该这样做，因为数据序列很重要。）*

例如，我有这样的代码：

```
soup = BeautifulSoup(links)
dlist = soup.findAll('dd', 'title')
# I'm trying to find content between <dd class='title'> and </dd>
gotdata = dlist[1]
# and what i want is the 2nd content of those
newlist.append(gotdata)
# and I add that to a newlist 
```

并且某些链接没有任何链接`<dd class='title'>`，所以我想做的是将字符串添加`null`到列表中。

出现错误：

```
list index out of range. 
```

我所做的尝试是添加一些这样的行：

```
if not dlist[1]:  
   newlist.append('null')
   continue 
```

但这行不通。它仍然显示错误：

```
list index out of range. 
```

我该怎么办？我应该使用异常处理吗？还是有更简单的方法？

有什么建议么？任何帮助都会非常棒！

* * *

## 回答 #1

> 赞同：314
> 
> 时间：2012-08-10T13:17:13.787

处理异常是要走的路：

```
try:
    gotdata = dlist[1]
except IndexError:
    gotdata = 'null' 
```

当然你也可以检查`len()`; `dlist`但处理异常更直观。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-08-10T13:17:43.590

你有两个选择；处理异常或测试长度：

```
if len(dlist) > 1:
    newlist.append(dlist[1])
    continue 
```

或者

```
try:
    newlist.append(dlist[1])
except IndexError:
    pass
continue 
```

如果*经常*没有第二个项目，则使用第一个，如果*有时*没有第二个项目，则使用第二个。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2012-08-10T13:22:06.253

三元组就足够了。改变：

```
gotdata = dlist[1] 
```

到

```
gotdata = dlist[1] if len(dlist) > 1 else 'null' 
```

这是一种更短的表达方式

```
if len(dlist) > 1:
    gotdata = dlist[1]
else: 
    gotdata = 'null' 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-08-16T09:30:51.523

对于任何对较短方式感兴趣的人：

```
gotdata = len(dlist)>1 and dlist[1] or 'null' 
```

但是为了获得最佳性能，我建议使用`False`而不是`'null'`，那么单行测试就足够了：

```
gotdata = len(dlist)>1 and dlist[1] 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-01-10T07:12:33.077

参考 ThiefMaster♦ 有时我们会得到一个错误，其值为 '\n' 或 null 并执行处理 ValueError 所需的错误：

处理异常是要走的路

```
try:
    gotdata = dlist[1]
except (IndexError, ValueError):
    gotdata = 'null' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-21T12:16:02.950

```
for i in range (1, len(list))
    try:
        print (list[i])

    except ValueError:
        print("Error Value.")
    except indexError:
        print("Erorr index")
    except :
        print('error ') 
```

# file - htaccess 文件修改 - CakePHP

> ID：11902462
> 
> 赞同：0
> 
> 时间：2012-08-10T13:16:02.237
> 
> 标签：file, .htaccess, cakephp, upload

我需要增加 cakephp 中的最大文件上传大小。我环顾四周，发现在控制器或代码中的几乎任何地方使用 ini_set 是没有用的。所以我的下一个选择是修改 htaccess 文件。

我环顾四周，发现要进行一些更改，例如upload_max_filesize post_max_size max_execution_time max_input_time

我的问题是，我需要更改哪个 .htaccess 文件？而且，更改是否在`<IfModule mod_rewrite.c>`标签内？

根文件夹、app 文件夹和 webroot 文件夹中有一个 .htaccess 文件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:30:13.450

您必须在 webroot 文件夹中的 .htaccess 文件中进行更改，因为如果您有[生产安装](http://book.cakephp.org/2.0/en/installation.html#production)，它是唯一使用的 .htaccess 文件。

不，更改不必在内部`<IfModule mod_rewrite.c>`，这只是 mod_rewrite 相关配置设置所必需的。

# yaml - Bukkit 不接受好的 YAML 代码

> ID：11902464
> 
> 赞同：0
> 
> 时间：2012-08-10T13:16:06.027
> 
> 标签：yaml, bukkit

所以我有我为[PermissionsBukkit](http://dev.bukkit.org/bukkit-plugins/permbukkit/) 1.6 制作的 YAML 代码。

但这不再适用于新的 Minecraft 更新。[Online YAML Parser](http://yaml-online-parser.appspot.com/)找不到任何问题。

```
users:
Grace:
    permissions:
        permissions.example: true
    groups:
    - user
cracksmacker141:
    permissions:
        permissions.example: true
    groups:
    - user
msymons:
    permissions:
        permissions.example: true
    groups:
    - default
chris:
    permissions:
        permissions.example: true
    groups:
    - user
humptyP:
    permissions:
    groups:
    - admin
Msaltafosso:
    permissions:
        permissions.example: true
        jcommands.clear: true
    groups:
    - admin
SgtCookie23:
    permissions:
        permissions.example: true
        war.zonemaker: true
        war.player: true
        jcommands.back: true
    groups:
    - admin
Binglee2323:
    permissions:
        permissions.example: true
    groups:
    - admin
Bscott:
    permissions:
        permissions.example: true
    groups:
    - user
Mac:
    permissions:
        permissions.example: true
    groups:
    - user
Cole:
    permissions:
        permissions.example: true
        BlockControl.lava: true
        BlockControl.fire: true
    groups:
    - mod
Dan:
    permissions:
        permissions.example: true
    groups:
    - user
dr_michael4:
    permissions:
        permissions.example: true
    groups:
    - user
Dunny:
    permissions:
        permissions.example: true
    groups:
    - user
fnaty:
    permissions:
    permissions.example: true
    groups:
    - user
doldfield:
    permissions:
        permissions.example: true
    groups:
    - user
Gunpowderjr:
    permissions:
        permissions.example: true
    groups:
    - user
mwa_haha:
    permissions:
        jcommands.gamemode: true
        jcommands.day: true
        jcommands.night: true
        jcommands.sun: true
        jcommands.storm: true
        permissions.example: true
    groups:
    - user
Sweet_Lemonade2:
    permissions:
        permissions.example: true
    groups:
    - user
tdrive:
    permissions:
        permissions.example: true
    groups:
    - user
Tppskid:
    permissions:
        permissions.example: true
    groups:
    - mod
Tswizzle:
    permissions:
        permissions.example:true
    groups:
    - user
mypettr0ll:
    permissions:
        permissions.example:true
    groups:
    - user
confessor:
    groups:
    - user
l3thalxpredator:
    groups:
    - user
l3thalxshredder:
    groups:
    - user
wack-a-mole:
    groups:
    - User
Jaffa117:
    groups:
    - User
jmz01:
    groups:
    - user
groups:
    default:
        permissions:
            permissions.build: false
    mod:
        permissions:
            jcommands.spawn:true
            jcommands.setspawn:true
            war.zonemaker:true
            war.player:true
            jcommands.back:true
            jcommands.day:true
            jcommands.night:true
            jcommands.sun:true
            jcommands.tp:true
            jcommands.tphere:true
            jcommands.kick:true
            permissions.build:true
            simpleprefix.admin:true
            jcommands.kill:true
            jcommands.tp2p:true
            jcommands.storm:true
            jcommands.ram:true
            jcommands.ping:true
            jcommands.gamemode:true
            jcommands.broadcast:true
    admin:
        permissions:
            jcommands.afk:true
            jcommands.spawn:true
            jcommands.setspawn:true
            jcommands.mute:true
            jcommands.heal:true
            jcommands.gamemode:true
            permissions.build:true
            simpleprefix.admin:true
            jcommands.tp2p:true
            jcommands.storm:true
            jcommands.ram:true
            jcommands.ping:true
            jcommands.invisible:true
            jcommands.ip:true
        inheritance:
        - mod
    user:
        permissions:
            jcommands.afk:true
            permissions.build:true
            jcommands.home:true
            jcommands.spawn:true
            jcommands.sethome:true
            lockette.user.create.*:true
            jcommands.ram:true
            jcommands.ping:true
messages:
    build: '&cUser Error.' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T22:25:29.510

一定要检查所有的压痕。

对于用户`fnaty`，权限没有正确缩进。

```
fnaty:
    permissions:
    permissions.example: true  <-- This line should be indented.
    groups:
    - user 
```

应该是这样的：

```
fnaty:
    permissions:
        permissions.example: true
    groups:
    - user 
```

对于用户，您对其权限`humptyP`具有价值。`null`虽然这对于 YAML 是可以接受的，但 Bukkit 往往不喜欢这种做法并且可能会抛出错误。

```
humptyP:
    permissions:  <-- Add a permission or remove this line.
    groups:
    - admin 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:20:06.427

下面的所有内容都`users:`应该缩进一次。目前用户没有孩子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-29T03:06:04.410

确保您正确缩进了所有内容。如果您将制表符用于某些事物而将空格用于其他事物，则它将不起作用。另外，用一组和一个用户重新制作一个较小的文件，看看你是否可以让它工作。

# c - 以下 C 代码输出错误

> ID：11902467
> 
> 赞同：-3
> 
> 时间：2012-08-10T13:16:13.543
> 
> 标签：c, scanf

```
#include <stdio.h>

int main(){
    int l,m,q,j;
    char option;
    scanf("%d",&q);
    printf("%d\n",q);
    for(j=0;j<q;j++){
        scanf("%c %d %d",&option,&l,&m);
        printf("%c %d %d",option,l,m);
    }
    return 0;
} 
```

输出：

```
3(Input)
3
C 1 4(Input)

 0 -374066224C 1 4 
```

上面的代码有什么问题？它没有给出预期的输出。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T13:22:01.940

`scanf()`输入流中仍然有一个从初始（和后续s）开始的换行符`scanf()`：这将被分配给`option`并且后续`int`分配将失败，因为`C` 不是`int`, 含义`l`并且`m`是未初始化的`int`变量。

要跳过它，请在循环`scanf()`内的格式说明符中添加一个前导空格字符：`for`

```
scanf(" %c %d %d",&option,&l,&m);
    /* ^ */ 
```

的返回值`scanf()`是成功分配的次数：检查它以确保`3`分配成功。

```
if (3 == scanf(" %c %d %d",&option,&l,&m))
{
    /* Valid input. */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T13:24:11.943

每次你提示用户输入时，他们都会写下来，然后按回车键。Enter 在输入缓冲区中留下换行符。您必须在要求输入字符之前将其丢弃，否则它将最终出现在您的字符变量中。

简单但直截了当的解决方案是：

```
scanf("%d",&q); getchar();
printf("%d\n",q);
for(j=0;j<q;j++){
    scanf("%c %d %d",&option,&l,&m); getchar();
    printf("%c %d %d",option,l,m);
} 
```

（我很确定某处有一个 C 常见问题解答，但我找不到链接。）

# arrays - Why does order of array declaration affect performance so much?

> ID：11902468
> 
> 赞同：2
> 
> 时间：2012-08-10T13:16:17.260
> 
> 标签：arrays, performance, accelerate-framework, vdsp

First, in tuning a frequency analysis function using the Accelerate framework, the absolute system time has consistently been 225ms per iteration. Then last night I changed the order of which two of the arrays were declared and suddenly it went down to 202ms. A 10% increase by just changing the declaration order seems insane. Can someone explain to me why the compiler (which is set to optimize) is not already finding this solution?

Additional info: Before the loop there is some setup of the arrays used in the loop consisting of converting them from integer to float arrays (for Accelerate) and then taking sin and cos of the time array (16 lines long). All of the float arrays (8 arrays x 1000 elements) are declared first in the function (after a sanity check of the parameters). They are always declared the same size (by a constant), because otherwise performance suffered for little shrinkage of the footprint. I tested making them globals, but I think the compiler already figured that out as there is no performance change. The loop is 25 lines long.

**---Additions---**

Yes, "-Os" is the flag. (default in Xcode anyways: Fastest, Smallest)

(below is from memory - don't try to compile it, cause I didn't put in things like stride (which is 1), etc. However, all of the Accelerate calls are there)

passed parameters: inttimearray, intamparray, length, scale1, scale2, amp

```
float trigarray1[maxsize];
float trigarray2[maxsize];
float trigarray3[maxsize];
float trigarray4[maxsize];
float trigarray5[maxsize];
float temparray[maxsize];
float amparray[maxsize];    //these two make the most change
float timearray[maxsize];    //these two make the most change

vDSP_vfltu32(inttimearray,timearray,length); //convert to float array
vDSP_vflt16(intamparray,amparray,length);    //convert to float array

vDSP_vsmul(timearray,scale1,temparray,length);    //scale time and store in temp
vvcosf(temparray,trigarray3,length);     //cos of temparray
vvsinf(temparray,trigarray4,length);     //sin of temparray
vDSP_vneg(trigarray4,trigarray5,length); //negative of trigarray4

vDSP_vsmul(timearray,scale2,temparray,length); //scale time and store in temp
vvcosf(temparray,trigarray1,length);           //cos of temparray
vvsinf(temprray,trigarray2,length);            //sin of temparray

float ysum;
vDSP_sve(amparray,ysum,length);    //sum of amparray

float csum, ssum, ccsum, sssum, cssum, ycsum, yssum;

for (i = 0; i<max; i++) {

    vDSP_sve(trigarray1,csum,length);    //sum of trigarray1
    vDSP_sve(trigarray2,ssum,length);    //sum of trigarray2

    vDSP_svesq(trigarray1,ccsum,length); //sum of trigarray1^2
    vDSP_svesq(trigarray2,sssum,length); //sum of trigarray2^2

    vDSP_vmul(trigarray1,trigarray2,temparray,length); //temp = trig1*trig2
    vDSP_sve(temparray,cssum,length);                  //sum of temp array
    // 2 more sets of the above 2 lines, for the 2 remaining sums

    amp[i] = (arithmetic of sums);

    //trig identity to increase the sin/cos by a delta frequency
    //vmma is a*b+c*d=result
    vDSP_vmma (trigarray1,trigarray3,trigarray2,trigarray4,temparray,length);
    vDSP_vmma (trigarray2,trigarray3,trigarray1,trigarray5,trigarray2,length);
    memcpy(trigarray1,temparray,length*sizeof(float));
} 
```

**---Current Solution---**

I've made some changes as follows:

The arrays are all declared aligned, and zero'd out (I'll explain next) and maxsize is now a multiple of 16

```
__attribute__ ((align (16))) float timearray[maxsize] = {0}; 
```

I've zero'd out all of the arrays because now, when the length is less than maxsize, I round the length up to the nearest multiple of 16 so that all of the looped functions operate on widths divisible by 16, without affecting the sums.

The benefits are:

*   Slight performance boost
*   The speed is nearly constant regardless of order of array declaration (which is now done right before they are needed, instead of all in a big block)
*   The speed is also nearly constant for any 16-wide length (i.e. 241 to 256, or 225 to 240...), whereas before, if the length went from 256 to 255, the function would take a 3+% performance hit.

In the future (possibly with this code, as analysis requirements are still in flux), I realize I'll need to take into consideration stack usage more, and alignment/chunks of vectors. Unfortunately, for this code, I can't make these arrays static or globals as this function can be called by more than one object at a time.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T14:45:03.087

我首先怀疑的是对齐。您可能想尝试：

```
__attribute__ ((align (16))) float ...[maxsize]; 
```

或者确保它`maxsize`是 16 的倍数。如果在一种配置中对齐而在另一种配置中没有对齐，那肯定会导致 10% 的命中率。矢量运算可能对此非常敏感。

您可能遇到的下一个主要问题是一个巨大的堆栈（假设`maxsize`相当大）。ARM 处理小于 4k 的数字比处理大于 4k 的数字更有效（因为它只能处理 12 位立即数）。因此，根据编译器对其进行优化的方式，将 amparray 向下推入堆栈可能会导致更复杂的数学运算来访问它。

当小事导致性能大的变化时，我总是建议拉起程序集（产品>生成输出>程序集）并查看编译器输出的变化。我还强烈推荐[ARM Assembly 的旋风之旅，](http://www.coranac.com/tonc/text/asm.htm)让您开始了解您正在查看的内容。（确保将输出设置为“用于存档”，以便看到优化的结果。）

您还应该做更多的事情：

*   尝试将此例程重写为简单的 C 而不是使用 Accelerate。是的，我知道 Accelerate 总是更快，但事实并非如此。所有这些函数调用都非常昂贵，并且编译器通常可以更好地向量化简单的乘法和加法，而 Accelerate 可以根据我的经验。如果您的步幅为 1，您的向量不是很大，并且您使用的是 1-2 核设备（如 iPad），则尤其如此。当您拥有处理跨步的代码时（如果您不需要跨步），它比您手动编写的代码更复杂（更慢）。根据我的经验，Accelerate 似乎非常擅长斜坡和超越（例如大表的余弦），但在简单的向量和矩阵数学方面几乎没有那么好。

*   如果这段代码对你来说*真的很*重要，我发现手写程序集肯定会超过编译器。我什至不擅长 ARM 汇编程序，而且我已经能够在简单的矩阵数学上击败编译器 2 倍（并且编译器粉碎了 Accelerate）。我在这里特别谈论你的循环，它似乎只是在做加法和乘法。手写汇编当然是一件痛苦的事，然后你必须为汇编程序维护一个 C 版本，但是当它真的很重要时，它真的很快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T00:10:42.067

如果没有可运行的代码，可能很难确定存在哪些性能障碍。

我将使用这个答案来提出一些可能性，并对这个问题的其他答案和评论中提出的一些问题发表评论。

首先，有 7 个每个 4 kB 的数组，您使用的几乎是 L1 缓存的大小。根据堆栈使用的其他数量等，您可能会破坏缓存。这可以解释为什么减小块大小会提高性能：对于更小的块，每次迭代使用的内存更少，并且所有内存都适合缓存，因此在迭代期间很少或没有丢弃。处理这种缓存抖动的另一种方法是条带挖掘：不是在整个长度上执行 sve、svesq、vmul、vmma 和 memcpy，而是在长度的一部分（例如一半）上执行所有这些，然后执行所有这些都放在另一部分，并根据需要重复，直到它们被完全处理。

trigarray5 仅存在以便第二个 vmma 否定 trigarray4。消除 trigarray5 并使用 trigarray4 调用 vmmsb（减去而不是添加）。这也减少了内存使用。

即使使用的数据少于填充缓存，缓存几何有时也会导致抖动。缓存被划分为多个集合，每个内存地址必须映射到一个特定的集合。例如，一个 32,768 字节的高速缓存可能有 1024 条“线”，每条 32 字节，但它可以被组织成 256 组，每组 4 条线。任何一个内存地址都映射到一组，并且它必须使用该组中的四行之一。如果您有五个数组以相同的地址开始，以该几何为模（或基本上重叠），那么它们将争夺每组中的四行，并在它们进行时相互排斥。当数组在内存中连续分配时可以避免这种情况，就像编译器通常在一个接一个地简单地声明数组时所做的那样，但可能会出现复杂情况。没有可运行的代码，很难确定。

将数组对齐到 16 字节的倍数很好，可能会有所帮助。在某些情况下，它有很大帮助。如果可能，许多 vDSP 例程会处理一些初始元素以达到良好对齐的边界，然后使用快速 SIMD 代码直到接近数组末尾，此时可能需要单独处理另外一些元素。然而，这并不总是可能的，因为当一个对多个向量进行操作的例程被传递给具有不同对齐方式的向量时。（对齐一个指针的处理元素会使其他指针未对齐。）除了添加 align 属性，对齐数组的另一种方法是使用标准内存分配例程分配它们，例如 malloc。在 Mac OS X 和 iOS 上，malloc 返回 16 字节对齐的地址。

堆栈大小和 ARM 具有有限立即值的事实可能不是问题，向量地址的计算应该是代码中计算的一个微不足道的部分。（此外，ARM 有一些有趣的灵活立即数，而不仅仅是 12 位整数。）

实际函数调用和返回本身的成本可能微不足道。Apple 提供的编译器并没有“比 Accelerate 更好地向量化简单的乘法和加法”，而且函数调用也不是“非常昂贵”。</p>

你省略了步伐。如果它们不是一个，您可能会通过重写代码获得很多好处，以便在调用 vDSP 例程时数据具有单位跨度。

分支预测在这里可能不是问题。

可运行代码将极大地帮助诊断您的性能问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T04:16:21.107

首先：不幸的是，这种对数据放置的敏感性很常见。我们中的一些人编写了尝试多种不同布局的代码

诸如此类的性能损失的常见罪魁祸首是：

*   分支错误预测

*   缓存效果

    *   容量未命中（只是简单的太多数据，例如 1MB 的数据无法放入 32KB 缓存中）

    *   缓存冲突（例如，在 4 路关联 32KB 缓存中，超过 4 个相同的模 8K 地址）

*   DRAM效果

    *   DRAM 页面缺失

我无法解析您所说的内容：MAXSIZE 是什么？你说 7*4KB ......但是你有 8 个数组，所以我怀疑你是说 MAXSIZE=1024。你是说MAXSIZE是7*1024？（* 4B / 浮动？）

无论如何：如果每个单独阵列的 MAXSIZE 大约为 28KB，那么对于许多系统来说，您的缓存大小已经接近。在这种情况下，我会怀疑 DRAM 页面效应 - 我会怀疑性能良好的安排将访问次数最多的阵列放在单独的 DRAM 页面中。

你没有说哪个表现更好，但我猜：

```
float amparray[maxsize];    //these two make the most change
float timearray[maxsize];    //these two make the most change 
```

观察您的代码， timearray 似乎是最容易访问的。如果 timearray 秒的性能更好，并且我对 MAXSIZE 的猜测是正确的，那么我敢打赌这是 DRAM 页面效应。

快速解释：DRAM 具有页和存储体的概念。不要与操作系统页面混淆。每个 DRAM 芯片，因此每个 DIMM，都有 4 或 8 个内部存储体。每个银行可以有一个打开的页面。如果您从同一页面、同一银行访问数据，则速度最快。如果您从不同银行中已打开的页面访问数据，速度快，但比同一银行的同一页面慢如果您需要同一银行中的不同页面，真的很慢。如果您有写回缓存，则写回几乎是随机发生的，因此您可能会获得非常糟糕的页面行为。

但是，如果我猜错了 MAXSIZE，那么可能是缓存效应。

RED FLAG：你说“我没有加入 stride 之类的东西”。 *步幅*因使数据在缓存中表现不佳而臭名昭著。缓存通常是设置关联的，这意味着它们具有我所说的“共振” - 与缓存的共振模数相同的地址将映射到同一组。如果你有比联想更多的东西，你就会痛击。

将共振计算为缓存大小除以关联性。例如，如果您有一个 32K 的 4 路关联缓存，那么您的共振是 8K。

无论如何...如果您只是大步访问事物，那么数组放置可能很重要。例如，假设您的步幅为 16。即访问元素 0、16、32、48 等。如果 MAXSIZE 为 7*1024，正如我上面猜到的，那么元素

```
float trigarray1[maxsize];
float trigarray2[maxsize];
float trigarray3[maxsize];
float trigarray4[maxsize];
float trigarray5[maxsize];
float temparray[maxsize];
float amparray[maxsize];    //these two make the most change
float timearray[maxsize];    //these two make the most change 
```

那么以下数组将发生冲突 - 它们的跨步访问模式将映射到相同的集合：

```
trigarray1, trigarray5
trigarray2, temparray
trigarray3, amparray
trigarray4, timearray, 
```

如果你交换 amparray 和 timearray，那么

```
 trigarray3 will conflict with timearray
and
   trigarray4 with amparray 
```

trigarray4 和 timarray 似乎是最常用的，所以我猜，如果你的步幅像 0、16、32、348，或者实际上任何以 0 开头的步幅，那么这两个数组冲突就是你的问题。

但是，您可能有不同的步幅模式：0、16、32、48 ... 在一个数组中，而 1,17,33,... 在另一个数组中。那么不同的数组对就会发生冲突。

--

我没有足够的信息在这里诊断您的问题。

如果您可以使用良好的性能工具，您也许可以自己做。

例如，在 Intel 处理器上，您可以记录我所说的缓存未命中配置文件，记录理想的物理内存地址，计算它们在缓存中映射到的集合，并生成直方图。如果您看到尖峰，那可能是个问题。同样，您可以生成 DRAM 页面未命中或存储库未命中配置文件。我只提到英特尔是因为我设计了一些硬件来实现这种性能测量。同样的事情可能应该在 ARM 上可用（如果没有，也许我可以获得丰富的销售工具来做到这一点...... :-)）。

如果这些是问题，你怎么能解决它？

好吧，正如您在上面解释的那样，通过尝试不同的展示位置。这可以帮助解决跨步（缓存集冲突）和 DRAM 页面问题。

如果步幅有问题，您可以尝试使数组大小有点不同 - MAXSIZE + 4、MAXSIZE 8 等。这可以有效地抵消步幅。（在超级计算机代码中看到大小为 255 或 257 的数组很常见，这与偏移跨步访问模式的原因相同，以免发生冲突。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T14:42:19.040

这里只是猜测。结盟？

这些库应该使用 SIMD 指令，即使在某些不需要对齐的情况下，这些指令的时间也取决于对齐。

缓存行对齐也可能起作用，也可能不起作用。

这些数组是在堆栈上分配的，这意味着除了 sizeof(float) 内在保证和第一个对象的体系结构保证之外，您几乎无法控制该数据的对齐方式（如果第一个局部变量实际上保证了 64 位对齐）您以 64 位模式编译）。

您可以尝试通过打印/记录地址来验证数据对齐方式。并通过定义一个结构来保存数据并使用 malloc 为其获取内存（获得比您需要的更多的内存，以便您可以将结构放置在内存块中的不同偏移量处，特别是如果您想玩缓存线对齐）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T14:25:44.873

可能与分支预测以及数组中的元素有关。

请参阅这篇文章以获取令​​人敬畏的参考。您的帖子可能与此帖子类似，通过以一个顺序声明您的数组，数据显示为“排序”，但在另一个顺序中，它不是。

[为什么处理排序数组比处理未排序数组更快？](https://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-an-unsorted-array)

# xna - XNA 2D Camera Drag Mouse Zoom ends up zooming out more then zooming in

> ID：11902471
> 
> 赞同：1
> 
> 时间：2012-08-10T13:16:33.230
> 
> 标签：xna, camera, 2d, zooming

I did this camera class for "debugging" my graphics, it works fine, but I dont get why it ends up zooming out more then in.

I implemented a zoom functionality that works by dragging the screen with the right mouse button(RMB) (with the left you really drag the screen around), it works like the Unity editor zoom (when you hold alt and use theRMB, its a zoom functionality)

The thing is, if I hold the RMB and shake it like a moron, the zooming will zoom out more than zoom in, and eventually let everything tinny....I know its kinda stupid worry of mine, but means theres something not very precise there.. in the unity editor, shaking it like a moron will not make things eventually get super zoomed out...

Can anyone tell me what is causing this behaviour? Kinda tricky..heres my class, dont mind the simpleness, i just throwed it for debugging:

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace Shooter 
```

{

```
/// <summary>
/// Provides a camera controllable by mouse.
/// Controls include dragging the "screen"...
/// </summary>
class MouseCamera2D
{

    private Matrix m_mView;       // stores the camera state (position, scale/zoom, rotation)
    public Matrix ViewMatrix { get { return m_mView; }  }
    public Vector3 GetPosition() { return m_mView.Translation;  }

    public float m_scaleProportion = 0.01f; // the "speed" to scale, multiplies the offset from mouse drag

    // input data

    private MouseState m_mouseStateRef;
    private MouseState m_mouseStatePreviows = new MouseState();
    private KeyboardState m_kbStateRef;
    private KeyboardState m_kbStatePreviows = new KeyboardState();

    public Keys m_resetZoomKey = Keys.Z;

    //private GraphicsDevice m_graphicsDeviceRef;

    // ctor
    public MouseCamera2D(MouseState mouseState_p, KeyboardState kbState_p/*, GraphicsDevice graphicsDevice_p*/){

        if (mouseState_p == null ||kbState_p == null /*|| graphicsDevice_p == null*/) throw new Exception("cant be null"); // needs the reference

        //m_graphicsDeviceRef = graphicsDevice_p;

        m_mouseStateRef = mouseState_p; // init the reference
        m_kbStateRef = kbState_p;

        m_mView = Matrix.Identity; // set a valid matrix

        //zoomPivot = new Vector2(m_graphicsDeviceRef.Viewport.Width * 0.5f, m_graphicsDeviceRef.Viewport.Height * 0.5f);
    }

    public void InputUpdate()
    {
        m_mouseStatePreviows = m_mouseStateRef;
        m_mouseStateRef = Mouse.GetState();

        m_kbStatePreviows = m_kbStateRef;
        m_kbStateRef = Keyboard.GetState();

        InputDragControl();
        InputScaleControl();
        InputZoomOriginal();
    }

    private void InputDragControl()
    {
        //mouseStatePreviows = mouseStateRef;
       // mouseStateRef = Mouse.GetState();

        if (m_mouseStateRef.LeftButton == ButtonState.Pressed)
        {
            // check if its a drag or a new pivot point

            if (m_mouseStatePreviows.LeftButton == ButtonState.Pressed)
            {
                m_mView.M41 += (m_mouseStateRef.X - m_mouseStatePreviows.X);
                m_mView.M42 += (m_mouseStateRef.Y - m_mouseStatePreviows.Y);
            }
        }

    }

    Vector3 zoomPivot;
    private void InputScaleControl()
    {

        if (m_mouseStateRef.RightButton == ButtonState.Pressed)
        {
            // check if its a drag or a new pivot point

            if (m_mouseStatePreviows.RightButton == ButtonState.Pressed)
            {

                float scale = ((m_mouseStateRef.X - m_mouseStatePreviows.X) + (m_mouseStateRef.Y - m_mouseStatePreviows.Y)); //compute distance with "1d direction"(not abs)

                if (scale != 0.0f)
                {

                    scale *= m_scaleProportion;                       

                    //center zoom on mouse cursor:
                    m_mView *=

                                Matrix.CreateTranslation(-zoomPivot)
                                *
                                Matrix.CreateScale(1.0f + scale)
                                *
                                Matrix.CreateTranslation(zoomPivot)
                                ;

                    Console.WriteLine(scale.ToString());
                    Console.WriteLine(m_mView.M11.ToString());
                    Console.WriteLine("");
                }
            }
            else
            {
                // new press, get pivot point:

                zoomPivot.X = m_mouseStateRef.X;
                zoomPivot.Y = m_mouseStateRef.Y;
            }
        }
    }

    private void InputZoomOriginal()
    {
        if( m_kbStateRef.IsKeyDown(m_resetZoomKey) )
        {

            m_mView *=

                       Matrix.CreateTranslation(-zoomPivot)
                       *
                       Matrix.CreateScale(1.0f/m_mView.M11)
                       *
                       Matrix.CreateTranslation(zoomPivot)
                       ;

            Console.WriteLine(m_mView.M11.ToString());
                    Console.WriteLine("");
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:29:56.657

您的问题来自这段代码：

`1.0f + scale`

让我们以单个像素的移动为例。正如你所拥有`m_scaleProportion = 0.01`的那样，当你缩小时，你乘以**0.99**。当你放大你乘以**1.01**。

如果你放大一个像素然后缩小一个像素会发生什么？好吧，本质上，您将这两个值相乘。像这样：**0.99 × 1.01 = 0.9999**。这小于 1。重复此操作，最终您的缩放量会越来越小。

* * *

**如何正确实现缩放：**

首先：我建议不要在大多数情况下通过乘法来累加值（即：根据输入修改多帧的值）。在您的代码中，您不断地乘以矩阵（就像您正在做的那样`*=`） - 这可能会慢慢导致浮点问题。（所以：不要用矩阵做，也不要用常规做`float`）

您应该做的是通过加法来累积鼠标移动。然后根据到目前为止的整体运动更新矩阵。像这样的东西（伪代码）：

```
if(mouseWentDown)
{
    // store the starting matrix:
    this.originalMatrix = this.currentMatrix;
    int zoomAmount = 0;
}
else if(mouseIsDown)
{
    // Accumulate the mouse movment:
    zoomAmount += (how far the mouse moved this frame);

    // Recalculate the matrix based on the starting matrix:
    this.currentMatrix = this.originalMatrix * 
            Matrix.CreateScale((float)Math.Pow(2, zoomAmount * zoomRate));
} 
```

注意使用`Math.Pow`函数来提供实际的比例因子。这个函数很好，因为它为负输​​入提供小于 1 的值，为正输入提供大于 1 的值。对于零输入，它给出 1（无缩放）。

而且，当然，您可能希望将您的数据透视代码添加到上面。这将是相似的。您可能还需要调整缩放率。

注意：如果您使用此矩阵进行 2D 工作`SpriteBatch`，请不要缩放 Z 轴。仅缩放 X 和 Y 轴并保留 Z = 1。

* * *

旁白：您可能会注意到，*从技术上讲*，我上面的代码是通过乘法累加的，但只有在缩放完成时（所以它几乎没有那么糟糕）。在我自己的代码中，我通常会始终存储缩放量（从不将其重置为零）并重新生成完整的矩阵——它更健壮一些。

# sql - Oracle SQL Loader - 如何不显示“已达到提交点 - 逻辑记录计数”计数

> ID：11902476
> 
> 赞同：3
> 
> 时间：2012-08-10T13:16:53.883
> 
> 标签：sql, oracle, loader, sql-loader

我正在家里通过 vpn 上的 Oracle SQL Loader 加载大文件，它们需要很多时间。当我从工作中加载它们时，它们的加载速度要快得多。我正在加载的文件已经在我的工作服务器上。

所以我的想法是减速是因为为每一行打印的“达到提交点 - 逻辑记录数”。由于它们必须通过网络发送，因此必须很慢。我用谷歌搜索但找不到任何方法来减少它们的打印量。尝试添加 rows=5000 作为参数，但我仍然得到每一行的打印。

如何打印更少的“达到的提交点 - 逻辑记录计数”计数？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T13:33:58.113

[您可以使用选项子句](http://docs.oracle.com/cd/E11882_01/server.112/e22490/ldr_control_file.htm#i1009196)`silent`中提供的关键字。您可以将[以下内容](http://docs.oracle.com/cd/E11882_01/server.112/e22490/ldr_params.htm#SUTIL004)设置为静音：

> *   HEADER - 抑制通常出现在屏幕上的 SQL*Loader 标题消息。标题消息仍然出现在日志文件中。
> *   FEEDBACK - 抑制通常出现在屏幕上的“到达提交点”反馈消息。
> *   ERRORS - 当记录生成导致将其
>     写入坏文件的 Oracle 错误时，抑制日志文件中出现的数据错误消息。仍会显示被拒绝记录的计数。
> *   DISCARDS - 为写入丢弃文件的每条记录抑制日志文件中的消息。
> *   PARTITIONS - 在分区表的直接加载期间禁止将每个分区的统计信息写入日志文件。
> *   ALL - 实现所有抑制值：HEADER、FEEDBACK、ERRORS、DISCARDS 和 PARTITIONS。

你会想要压制`feedback`.

您可以在命令行上使用，例如：

```
sqlldr schema/pw@db silent=(feedback, header) 
```

**或者**在控制文件的选项子句中，例如：

```
options (bindsize=100000, silent=(feedback, errors) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:22:12.237

尝试将输出和错误重定向到文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-18T20:20:17.173

本的回答非常好。不要使用任何 shell 程序来抑制`STDOUT`. 我使用了以下内容：

```
sqlldr schema/pw@db mycontrolfile.ctl | sed '/Commit point reached/d' 
```

这样做的问题之一是，如果您使用脚本运行命令，则错误返回值将被 sed 命令刷新。换句话说，如果由于某种原因 sqlldr 失败并返回值为 1，那么 sed 将立即刷新它并返回值为 0。因此您的错误状态将被刷新。

重定向可能不如 Ben 的解决方案好`STDOUT`。`STDERR`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-09T23:26:47.710

`sqlldr`从 shell 脚本调用时我遇到了同样的问题。

**错误：**

> SQL*Loader：10.2.0.3.0 版 - 2016 年 8 月 9 日星期二 20:06:38 生产 版权所有 (c) 1982, 2005, Oracle。版权所有。
> 
> 已达到提交点 - 逻辑记录数 64
> 
> 表 myschema.ORG_MOVEMENT_RULES 的 SQL 加载程序失败。退出...

经调查，发现控制文件`(v_movementrules_control)`在从 Windows 复制到 Unix 系统时损坏，并且`^M`在每行末尾都有 DOS/Windows 行结束字符。

```
sqlldr userid=${USER}/${PASS}@${DB} control=${v_OrgRules_Control} 
```

# cryptography - 加密和微小数据

> ID：11902482
> 
> 赞同：1
> 
> 时间：2012-08-10T13:17:19.287
> 
> 标签：cryptography

我需要签署少量数据（并将该签名存储在类似的小空间中） - 标准 PKCS 签名太大，我需要 8 - 16 字节签名区域内的东西。其次，我需要它是一个非对称加密，第三，我需要它是*相对*安全的（用今天的计算机在 5 分钟内不会被破坏）。

我希望：

1.  使用 CRC 算法（CRC32 或 CRC64）生成数据的散列，这将产生 4 或 8 个字节的散列数据。
2.  然后用私钥加密该数据，并在最后附加结果。

然而，使用 RSA 加密，RSA 产生的输出与密钥最小值一样长 - 因此 512 RSA 密钥将产生 64 字节的数据。还有哪些其他选择？

*编辑：通过不对称加密，我的意思是我不能拥有任何共享秘密，即有一个签名“服务器”将拥有一个秘密，以及一个分布式公共应用程序需要验证数据是否来自该来源所以不能包含签名秘密。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:02:44.967

我不认为你的要求是可以得到的。您可以获得的最接近的可能是椭圆曲线，但即便如此，您也会得到至少 192 / 8 * 2 = 48 字节的输出。使用 160 位曲线，您可以将其降低到 40 字节，但之后安全边际变得太低。*这个答案前面提到了点压缩，但这可能无法使用*。

最好使用安全散列，然后仅使用前 X 位，而不是使用非安全散列（例如 CRC）。使用 ECC 160 位 SHA-1 是显而易见的选择，对于如此小的数据部分，SHA-1 将足够强大。安全散列的想法是没有人可以创建另一个映射到相同散列的消息。这不是 CRC 或 Adler 等函数的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T15:28:42.537

### 基于数字签名和消息恢复的解决方案

假设您要存储的消息*M*可以分为两部分： M [1]和 M [2]，并且*M = M [1] ||M [2]*。

通常，消息恢复方案中的验证步骤会告诉您*M*是否真实，但它也会返回一个段（例如*M [2]*），因此您实际上只需要存储另一个段（例如*M [1]*）。一个缺点是，如果不先验证签名，您就无法访问*M [2]*，但在大多数情况下，这确实不是人们想要做的。

*直观地说，一些存储既*可以用于消息*的*一部分，也可以用于签名的一部分。

最普遍的例子可能是标准化为 ISO 9796-2 的方案（这并不完全安全！请阅读下文......）。在该方案中，耦合到 SHA-1 的 2048 位 RSA 签名可用于存储 234 字节的*M [2]*。实际上，这意味着签名长度从 20 到 256 个字节不等，具体取决于*M*的长度。

更具体地说，如果***n***是您的 RSA 密钥的长度并且***h***是哈希输出的长度（均以位为单位），则您可以在签名中存储的字节数为***(nh-16)/8***。

它对您是否有益取决于您的数据有多长。

我上面提到的警告是，[Coron、Naccahe、Tibouchi 和 Weinmann](http://eprint.iacr.org/2009/203.pdf)最近表明，ISO 9796-2 可以比人们预期的更容易破解，即使不是“在一台计算机上 5 分钟内”（他们不得不诉诸几个EC2 实例）。然而，在安全方面，它可能对您来说已经足够好了。

存在其他消息恢复方案，但您应该注意的一件事是它们的专利状态。例如，PSS-R、[Naccache-Stern](http://www.di.ens.fr/~stern/data/St86.ps)、Nyberg-Rueppel、[Pintsov-Vanstone](http://www.certicom.com/index.php/ecc-and-digital-postage-marks-part-2)不能自由使用。

### 基于带附件签名的解决方案

[DSA](http://en.wikipedia.org/wiki/Digital_Signature_Algorithm)是一种可能性。在这种情况下，签名不会嵌入原始消息的任何部分。一般规则是，如果您想要***s***位的安全性，则需要***4s***位长的 DSA 签名。也就是说，对于 80 位安全性（相当于 2TDES），您需要 40 个字节。相同的公式适用于[ECDSA](http://en.wikipedia.org/wiki/Elliptic_Curve_DSA)，但 DSA 在软件库中更简单且更广泛。

在这两种情况下（DSA 和 ECDSA），签名服务器**必须**具有良好的随机性来源。如果随机生成器不可靠（例如，如果服务器是虚拟机或嵌入式系统），则无论签名有多长，DSA 和 ECDSA 都可能被破坏。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-10T13:56:26.413

你的要求是自相矛盾的。

> 签署少量数据

这大概是一个安全的摘要（散列）

> 我需要它是一个非对称加密

但这是可逆的，因此不是安全的摘要。

> 然而，使用 RSA 加密，RSA 产生的输出与密钥最小值一样长

使用*任何可逆加密都会*产生与密钥最小值一样长的输出。

如果您只需要哈希，则使用盐渍 md5（16 字节）。

# android - 我可以创建一个每 5 秒运行一次的线程并更新 android 中的视图值吗？

> ID：11902484
> 
> 赞同：-1
> 
> 时间：2012-08-10T13:17:22.487
> 
> 标签：android, multithreading, exception

我在 android 中创建一个线程，每 5 秒更新一次视图值。但我得到了这个异常：-

```
"E/AndroidRuntime(30793): android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views." 
```

有没有其他选择可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:31:50.253

您正在使用线程来更新 UI。

1.使用handler [Handler](http://developer.android.com/reference/android/os/Handler.html)从线程 2 更新 UI 你也可以使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html) onProgressUpdate(Progress...) 来更新 ui，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:39:06.957

好吧，尝试在后台线程中使用递归函数并在函数结束时等待。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T08:21:52.270

例如，您可以为此使用 Handler：

处理程序句柄 = null; 可运行可运行 = null;

在 onCreate(){ // 方法

```
handler = new Handler();
handler.post(runnable); 
```

可运行=新可运行（）{

无效运行（）{

```
 handler.postDelayed(runnable,1000);// run will be call in every 1 seconds

 // your code here to implement it will execute in every i second 
```

} }

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T13:36:54.557

您可以有一个 Timer Task 来获取值（线程可以执行）并使用处理程序将值传递给 UI 线程。只能从主/ UI 线程更新视图。

# c# - 过程或函数“AddUpdateContactDetails”需要参数“@Id”，但未提供该参数

> ID：11902486
> 
> 赞同：0
> 
> 时间：2012-08-10T13:17:32.147
> 
> 标签：c#, asp.net, sql-server-2008, sqlparameter

我有我的方法

```
 using (var helper = new DbHelper())
        {

            _commandText = "AddUpdateContactDetails";

            var parameter = new[]
                                {
                                    new SqlParameter("@Id", 0), // error here
                                    new SqlParameter("@CustomerId", id),
                                    new SqlParameter("@FirstName", customerDetails.FirstName),
                                    new SqlParameter("@LastName", customerDetails.LastName),
                                    new SqlParameter("@CompanyName", customerDetails.Company),
                                    new SqlParameter("@Designation", customerDetails.DesigId),
                                    new SqlParameter("@Title", customerDetails.Title),
                                    new SqlParameter("@Email", customerDetails.Email),
                                    new SqlParameter("@Phone", customerDetails.Phone),
                                };
            helper.ExecuteNonQuery(_commandText, CommandType.StoredProcedure, parameter);
        } 
```

Sp低于

```
Alter Procedure AddUpdateContactDetails
(

@Id int,
@CustomerId int,
@FirstName varchar(50),
@LastName varchar(50),
@CompanyName varchar(150),
@Designation int,
@Title int,
@Email varchar(50),
@Phone varchar(50)
)
AS
    BEGIN
        IF @Id<=0
            BEGIN
                INSERT INTO CustomerDetails
                           (FirstName,CustomerId,LastName, CompanyName, Designation, Title,Email,Phone)
                     VALUES
                           (@FirstName,@CustomerId,@LastName,@CompanyName,@Designation,@Title,@Email,@Phone )

            END
        ELSE
            BEGIN
               UPDATE CustomerDetails
               SET FirstName= @FirstName ,
                  LastName= @LastName ,
                  CompanyName= @CompanyName ,
                  Designation= @Designation ,
                  Title= @Title ,
                  Email= @Email ,
                  Phone= @Phone 
                WHERE Id= @Id
            END

END 
```

但仍然出现**“过程或函数'AddUpdateContactDetails'需要参数'@Id'的异常，该参数未提供。”**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:25:29.700

如果您要更新或插入的这个 talbel 没有 IDENTITY ，那么您的问题在于这行代码

```
IF @Id<=0
            BEGIN
                INSERT INTO CustomerDetails
                           (FirstName,CustomerId,LastName, CompanyName, Designation, Title,Email,Phone)
                     VALUES
                           (@FirstName,@CustomerId,@LastName,@CompanyName,@Designation,@Title,@Email,@Phone ) 
```

只需将 @id 添加到 Values 并将 Id 添加到您的 Insert 命令中，如下所示

```
IF @Id<=0
            BEGIN
                INSERT INTO CustomerDetails
                           (Id,FirstName,CustomerId,LastName, CompanyName, Designation, Title,Email,Phone)
                     VALUES
                           (@Id,@FirstName,@CustomerId,@LastName,@CompanyName,@Designation,@Title,@Email,@Phone ) 
```

# java - 在 JSF 中上传和解析 xml 文件

> ID：11902488
> 
> 赞同：-3
> 
> 时间：2012-08-10T13:17:39.360
> 
> 标签：java, xml, jsf

我想通过 JSF Tomahawk 上传一个 xml 文件，然后解析它。

我创建了以下表格：

```
<!DOCTYPE html>
<html lang="en"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:t="http://myfaces.apache.org/tomahawk"
    xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
       <title>Import</title>
    </h:head>
    <h:body>
       <h1>Import</h1>
       <h:form enctype="multipart/form-data">
           XML Datei mit den Kursdaten: 
           <t:inputFileUpload value="#{installationBean.uploadedFile}" />
           <h:commandButton value="submit" action="#{installationBean.submit}" />
           <h:messages />
       </h:form>
   </h:body> 
```

这是豆子：

包安装；

```
import java.io.IOException;
import javax.ejb.EJB;
import javax.ejb.Stateless;
import javax.ejb.LocalBean;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import javax.faces.context.FacesContext;
import org.apache.commons.io.FilenameUtils;
import org.apache.myfaces.custom.fileupload.UploadedFile;

@Stateless
@LocalBean
@ManagedBean
@ViewScoped
public class InstallationBean {

    private UploadedFile uploadedFile;

    public UploadedFile getUploadedFile() {
       return uploadedFile;
    }

    public void setUploadedFile(UploadedFile value) {
        uploadedFile = value;
    }

    public void submit()throws IOException {
        String fileName = FilenameUtils.getName(uploadedFile.getName());
        String contentType = uploadedFile.getContentType();
        byte[] bytes = uploadedFile.getBytes();

        // Parse xml
    }
} 
```

我上传的文件是一个 xml 文件。我怎样才能解析xml？在我上面的代码中，上传文件后我得到了一个字节数组。如何将其转换为 xml 文件并进行解析？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:28:29.663

您无需将其转换为 XML 文件。它已经是一个 XML 文件。要解析它，只需使用 Java SE 内置[JAXP](http://docs.oracle.com/javase/tutorial/jaxp/index.html) API 或 Java EE 内置[JAXB](http://jaxb.java.net/tutorial/) API。如果您实际上也想将其保存在磁盘上，请使用`FileOutputStream`通常的方式。

此问题与 JSF 上传文件**无关。**你成功地让那部分工作。例如，当您通过 a获得时，您将遇到*完全相同*的问题。`byte[]``FileInputStream`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T13:35:55.227

您可以使用以下内容将其解析`byte[]`为`org.w3c.dom.Document`.

```
 InputStream is = new ByteArrayInputStream(byteArray);  
   DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();  
   DocumentBuilder builder = factory.newDocumentBuilder();  
   Document xml = builder.parse(is); 
```

# android - 安装并运行 - Android 上的 OpenGL ES 3.0

> ID：11902489
> 
> 赞同：3
> 
> 时间：2012-08-10T13:17:39.533
> 
> 标签：android, opengl-es, android-ndk, release, development-environment

我刚刚阅读了有关 OGLES 3 的发布。

有些人知道将其安装在 Android 智能手机上并用于开发 3D 应用程序是否已经可行？或者这只有在 2013 年才有可能实现？

这是一篇关于它的文章： [http ://www.khronos.org/news/press/khronos-releases-opengl-es-3.0-specification](http://www.khronos.org/news/press/khronos-releases-opengl-es-3.0-specification)

感谢所有评论。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T13:27:47.263

假设您想要 OpenGL 的硬件加速上下文，如果目标硬件不支持特定版本的 OpenGL，则由于驱动程序和硬件的原因，您不能简单地将其更新到下一个版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T07:28:55.260

在[Google Android 源代码](http://source.android.com/)中查看 open GL 的版本。如果您正在为您的自定义硬件构建自定义 ROM 并将您的应用程序部署为系统应用程序（ROM 应用程序），那么这是可能的。

# sql - 如何根据星期几运行不同的查询

> ID：11902495
> 
> 赞同：0
> 
> 时间：2012-08-10T13:18:06.153
> 
> 标签：sql, sql-server, stored-procedures, sql-server-2000

我有一个与 Windows 调度程序一起自动运行的程序。该程序运行一个使用昨天日期的存储过程，对我们的数据库运行查询以提取前一天的结果。此查询不包括全天的特定时间段，因为我们不关心这些结果。但是，我们星期天有不同的时间，并且想更改星期天的查询……如果是“星期天”，有没有办法以不同的方式查询？下面是我的存储过程：

```
CREATE PROCEDURE [dbo].[sp_Open_Close_Report_1] AS
declare   @dtNow         datetime ,   @dtToday       datetime ,   @dtFrom        datetime ,   @dtThru        datetime ,   @dtExcludeFrom datetime ,   @dtExcludeThru datetime, @dtExcludeEOD datetime 
set @dtNow         = getdate() 
set @dtToday       = convert(datetime,convert(varchar,@dtNow,112),112) 
set @dtFrom        = dateadd(day,-1,@dtToday) -- start-of-day yesterday 
set @dtThru        = dateadd(ms,-3,@dtToday)  -- end-of-day yesterday (e.g., 2012-06-17 23:59:59.997) 
set @dtExcludeFrom = convert(datetime, convert(char(10),@dtFrom,120) + ' 05:30:00.000' , 120 ) 
set @dtExcludeThru = convert(datetime, convert(char(10),@dtFrom,120) + ' 06:15:00.000' , 120 ) 
set @dtExcludeEOD = convert(datetime, convert(char(10),@dtFrom,120) + ' 08:00:00.000' , 120 ) 

SELECT Store_Id , DM_Corp_Received_Date, Register_Transaction_Type 
FROM Register_Till_Count_Tb 
WHERE (Register_Transaction_Type    =  'SOD' and store_ID = '12345'
AND DM_Corp_Received_date     between @dtFrom        
and @dtThru   
AND DM_Corp_Received_date not between @dtExcludeFrom 
and @dtExcludeThru) or (Register_Transaction_Type = 'EOD' and Store_ID='12345'
AND DM_Corp_Received_date Between @dtFrom and @dtThru) 
```

周日`@DTExclude`从 6:30 到`@dtexcludeThru`7:15

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:35:00.283

让我们做更多的数学运算，将所有内容保留为日期时间（或整数），而不是使用字符串：

```
declare   @dtNow         datetime ,   @dtToday       datetime ,   @dtFrom        datetime ,   @dtThru        datetime ,   @dtExcludeFrom datetime ,   @dtExcludeThru datetime, @dtExcludeEOD datetime 
set @dtNow         = getdate() 
set @dtToday       = DATEADD(day,DATEDIFF(day,0,@dtNow),0)
set @dtFrom        = dateadd(day,-1,@dtToday)

declare @Sunday int
set @Sunday = CASE WHEN DATEPART(weekday,@dtFrom) = DATEPART(weekday,'20120805') THEN 1 ELSE 0 END
set @dtExcludeFrom = DATEADD(minute,330 + @Sunday * 60,@dtFrom)
set @dtExcludeThru = DATEADD(minute,375 + @Sunday * 60,@dtFrom)
set @dtExcludeEOD = DATEADD(minute,480,@dtFrom) 
```

而且，在您的查询中，而不是：

```
column between @dtFrom and @dtThru 
```

采用：

```
column >= @dtFrom and column < @dtToday 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:28:23.330

看一下[`datename`](http://msdn.microsoft.com/en-us/library/ms174395.aspx)和[`datepart`](http://msdn.microsoft.com/en-us/library/ms174420.aspx)函数。您可以使用`if`语句根据当天的情况执行不同的逻辑。在周日运行时，它们将产生以下结果：

```
select datename(dw, getdate()) -- Sunday
select datepart(dw, getdate()) -- 1 
```

# java - 在 IntelliJ IDEA 中运行 WebLogic 时错误的类路径和参数

> ID：11902496
> 
> 赞同：6
> 
> 时间：2012-08-10T13:18:11.797
> 
> 标签：java, intellij-idea, weblogic

我已经安装并配置了 WebLogic，当我从控制台运行它时一切正常（它是 WebLogic 10.3.5，带有 JDK 6，在 Windows 7 上）。

但是，当我在 IntelliJ IDEA 中配置 WebLogic（正确的 BEA Home、正确的域路径等）并尝试运行它时，它甚至使用了正确的 startWebLogic.cmd，但我得到的输出是：

```
C:\Users\konradstrack\dev\weblogic\base_domain\startWebLogic.cmd
.
.
JAVA Memory arguments: -Xms256m -Xmx512m -XX:CompileThreshold=8000 -XX:PermSize=48m -XX:MaxPermSize=128m
.
WLS Start Mode=Development
.
CLASSPATH=C:\PROGRA~2\Java\JDK16~1.0_2\lib\tools.jar;C:\wlserver\server\lib\weblogic_sp.jar;C:\wlserver\server\lib\weblogic.jar;C:\modules\features\weblogic.server.modules_10.3.5.0.jar;C:\wlserver\server\lib\webservices.jar;C:\modules\org.apache.ant_1.7.1/lib/ant-all.jar;C:\modules\net.sf.antcontrib_1.1.0.0_1-0b2/lib/ant-contrib.jar;C:\wlserver\common\derby\lib\derbyclient.jar;C:\wlserver\server\lib\xqrl.jar
.
PATH=;C:\wlserver\server\native\win\32;C:\wlserver\server\bin;C:\modules\org.apache.ant_1.7.1\bin;C:\PROGRA~2\Java\JDK16~1.0_2\jre\bin;C:\PROGRA~2\Java\JDK16~1.0_2\bin;C:\Program Files (x86)\JetBrains\IntelliJ IDEA 11.1.3\bin\..\.\bin;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;c:\program files (x86)\jetbrains\intellij idea 11.1.3\jre\jre\bin;C:\wlserver\server\native\win\32\oci920_8
.
***************************************************
*  To start WebLogic Server, use a username and   *
*  password assigned to an admin-level user.  For *
*  server administration, use the WebLogic Server *
*  console at http:\\hostname:port\console        *
***************************************************
starting weblogic with Java version:
java version "1.6.0_25"
Java(TM) SE Runtime Environment (build 1.6.0_25-b06)
Java HotSpot(TM) Client VM (build 20.0-b11, mixed mode, sharing)
Starting WLS with line:
C:\PROGRA~2\Java\JDK16~1.0_2\bin\java -client   -Xms256m -Xmx512m -XX:CompileThreshold=8000 -XX:PermSize=48m  -XX:MaxPermSize=128m -Dweblogic.Name=AdminServer -Djava.security.policy=C:\wlserver\server\lib\weblogic.policy  -Xverify:none  -da -Dplatform.home=C:\wlserver -Dwls.home=C:\wlserver\server -Dweblogic.home=C:\wlserver\server   -Dweblogic.management.discover=true  -Dwlw.iterativeDev= -Dwlw.testConsole= -Dwlw.logErrorsToConsole=  weblogic.Server
java.lang.NoClassDefFoundError: weblogic/Server
Caused by: java.lang.ClassNotFoundException: weblogic.Server
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: weblogic.Server.  Program will exit.
Exception in thread "main" Disconnected from server 
```

classpath 中的所有路径和参数`-Dplatform.home`等都指向`C:\wlserver`，这是一个完全错误的地方（WebLogic 位于`C:\Users\konradstrack\dev\weblogic\weblogic-10.3.5`）。

我的问题是：为什么会发生这种情况，我能做些什么来克服它并使 IntelliJ IDEA - WebLogic 组合正常运行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T13:35:01.030

您是否尝试过`MW_HOME`在 Windows 环境变量对话框中设置值？因为那可能是 IntelliJ Idea 读取 WebLogic 参数和值的位置。

这篇文章可能对您有用：[https ://blogs.oracle.com/imc/entry/weblogic_12c_dev_install_mw](https://blogs.oracle.com/imc/entry/weblogic_12c_dev_install_mw)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-27T14:35:15.530

这也发生在我的 Mac OsX 10.7.5 和 WebLogic wls1211_dev 上。按照 README.txt 中的说明，服务器成功启动。但是当试图从 IntelliJ 启动它时，它说的是同样的事情：

```
java.lang.NoClassDefFoundError: weblogic/Server 
```

因此，我必须在 mydomain 目录中的所有脚本（startWebLogic.sh 以及 mydomain/bin 中的所有其他启动/停止脚本）中手动设置变量：

```
export MW_HOME=/Users/mario/Programs/wls1211_dev 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-15T10:53:00.220

运行 ..\server\bin\setWLSEnv.cmd 后，我能够重新启动 weblogic 服务器。

此文件设置系统的类路径和路径值。

# objective-c - 使用 [moveItemAtURL:toURL:error:] 将文件移动到 iCloud：只制作一个副本

> ID：11902499
> 
> 赞同：1
> 
> 时间：2012-08-10T13:18:25.203
> 
> 标签：objective-c, copy, icloud

我在用于管理 iCloud 上的文件的函数中使用此代码。当我调用它将文件从云移动到本地计算机时，大约有 30 分之一的机会只复制文件而不移动文件。但是，调用`moveItemAtURL`返回 YES，没有错误。除了这个调用，云端没有做任何操作（我不会同时读写其他文件）。

我也试过这个`setUbiquitous:itemAtURL:destinationURL:error:`功能，但结果是一样的。

是否有可能文件被锁定，所以只能复制不能移动？还是同步问题？

谢谢

```
dispatch_async(operationQueue, ^(void) {
    __block NSError *err1 = nil;
    __block NSError *err2 = nil;
    NSFileManager * fm = [ NSFileManager defaultManager];
    __block bool success = true;

    NSFileCoordinator *fc = [[[ NSFileCoordinator alloc ] initWithFilePresenter: nil ] autorelease ];
    [ fc coordinateWritingItemAtURL : i_srcDocumentURL options:NSFileCoordinatorWritingForReplacing
                    writingItemAtURL: i_dstDocumentURL options:NSFileCoordinatorWritingForReplacing
                              error : &err1  byAccessor: 
    ^(NSURL *newURL1, NSURL *newURL2) {
        [ fm removeItemAtURL: newURL2 error:nil];//Remove destination file in case there is one
        if(  [ fm moveItemAtURL:newURL1 toURL:newURL2 error:&err2 ] == FALSE )
        {
            success = false;
        }
    } ];

    if( err1 )
    {
        success = false;
        [self logError:err1];
    }
    if( err2 )
    {
        success = false;
        [self logError:err2];
    }
    dispatch_async( mainQueue, ^(void) {
        if (success) {
            i_answerObj->MoveFileOk([i_fileName UTF8String]);
        }
        else 
        {
            i_answerObj->MoveFileError([i_fileName UTF8String]);
        }
        [self destroyMyself];
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:49:26.867

setUbiquitous:false 从 iCloud 故事结尾删除文件并将副本放在目标位置。

从 ubiquity 容器中删除文件会从 iCloud 中删除文件，故事结束没有完成。

move file 移动文件。

在 iCloud 上构建了 5 个应用程序后，我可以告诉您需要查看您的代码。

从 iCloud 中删除一个文件并放在本地机器上：setUbi...FALSE 目标。

从 iCLoud 中删除文件

NSFileManager removeFile - 从无处不在的容器中。

你的工作太辛苦了。

# ios - 通过 respondsToSelector 查看实例方法是否存在

> ID：11902501
> 
> 赞同：0
> 
> 时间：2012-08-10T13:18:29.490
> 
> 标签：ios, selector

我在一个数组中有一堆键和值，想知道我是否可以调用

```
[self setValue:obj forKey:key]; 
```

为我的课。目前我使用以下方法来查看是否存在 setter 方法。

```
 [userDefaults enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop) {
        NSString *firstCapChar = [[key substringToIndex:1] capitalizedString];
        NSString *cappedString = [key stringByReplacingCharactersInRange:NSMakeRange(0,1) withString:firstCapChar];
        SEL selector = NSSelectorFromString([[@"set" stringByAppendingString:cappedString] stringByAppendingString:@":"]);
        if ([self respondsToSelector:selector]) {
            [self setValue:obj forKey:key];
        }
    }]; 
```

我很好奇是否有更简单的方法进行这种检查。

# eclipse - 在 Eclipse / Erlide 中从源代码运行 Rabbit MQ

> ID：11902505
> 
> 赞同：1
> 
> 时间：2012-08-10T13:18:42.467
> 
> 标签：eclipse, erlang, rabbitmq, erlide

我已经使用 erlide.org 插件克隆了在 Eclipse 中作为 Erlang 项目打开的 RabbitMQ 存储库。

我不知道如何运行应用程序，我有 249 错误。

请问有人可以解释如何让它运行吗？

编辑 - 一些错误的例子

描述 Location Resource Path Type can't find include file "rabbit_framing.hrl" line 184 rabbit.erl /home/nicktune/dev/rabbitmq-public-umbrella/rabbitmq-server/src/rabbit.erl Erlang Problems

描述 Location Resource Path Type function build_heartbeat_frame/0 undefined line 30 rabbit_binary_generator.erl /home/nicktune/dev/rabbitmq-public-umbrella/rabbitmq-server/src/rabbit_binary_generator.erl Erlang问题

描述 Location Resource Path Type record 'basic.ack' undefined line 1317 rabbit_tests.erl /home/nicktune/dev/rabbitmq-public-umbrella/rabbitmq-server/src/rabbit_tests.erl Erlang问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T00:19:54.597

RabbitMQ 附带**Makefile**可以生成您缺少的**rabbit_framing.hrl （使用**[GNU make](http://www.gnu.org/software/make/)）。只需使用**make**而不是 erlide 的编译功能就可以了。

# c# - 在 C# 中使用带有整数的 Math.Ceiling

> ID：11902510
> 
> 赞同：6
> 
> 时间：2012-08-10T13:18:55.103
> 
> 标签：c#, double, decimal

我正在尝试获取一个文件并将其拆分为 512kb 的块。要计算块的数量，我需要做一些基本的数学运算。出于某种原因，我遇到了一些数据丢失问题。我无法弄清楚我做错了什么。我目前有：

```
int chunkSize = 524288;  // 512kb
int fileByteCount = GetFileSizeInBytes();
decimal result = ((decimal)(fileByteCount)) / ((decimal)(chunkSize));
int packetCount = Math.Ceiling(result);   // Doesn't work. 
```

我不能使用 Math.Ceiling 因为它需要双精度。但是，我认为，我需要使用小数来计算。我究竟做错了什么？我该如何做这个基本的数学运算？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T13:35:14.947

使用整数数学：

```
int chunkSize = 524288;  // 512kb
int fileByteCount = GetFileSizeInBytes();
int packetCount = (fileByteCount + chunkSize - 1) / chunkSize; 
```

请注意，文件大小确实应该很*长*，传输大于 2 GB 的文件并不罕见。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T13:20:50.243

`result`如果您想使用，您可以只转换为双倍`Math.Ceiling`

```
int packetCount = Math.Ceiling((double)result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T13:22:49.833

我不确定您的确切错误是什么，但似乎您需要在使用 Math.Ceiling 时将 packetCount 转换为整数：

```
int chunkSize = 524288;
int fileByteCount = 569344;
decimal result = ((decimal)(fileByteCount)) / ((decimal)(chunkSize));
int packetCount = Convert.ToInt32(Math.Ceiling(result)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T13:27:08.460

这是一个四舍五入的问题。试试下面的。

```
int chunkSize = 524288;  // 512kb 
int fileByteCount = GetFileSizeInBytes(); 
decimal result = (decimal)fileByteCount / (decimal)chunkSize; 
decimal remainder = decimal.Remainder((decimal)fileByteCount, (decimal)chunkSize);
int packetCount = (remainder > 0) ? (int)(result + 1) : (int)result; 
```

# java - Xstream 驱动程序性能

> ID：11902514
> 
> 赞同：8
> 
> 时间：2012-08-10T13:19:08.317
> 
> 标签：java, xml, xstream

我正在使用 XStream 将 XML 转换为对象。我正在转换大型 xml。我遇到了以下两种说法。

```
XStream xstream = new XStream(new DomDriver());

XStream xstream = new XStream(new StaxDriver()); 
```

由于我使用大型 xml 进行转换，哪一种性能更好？为什么？

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T13:21:13.487

Staxdriver 应该表现得更好，因为它使用了拉解析器技术，这是解析 xml 最快的技术，并且使用更少的内存，因为文档没有像 dom 一一样加载到内存中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T13:21:38.133

StaxDriver 将逐步解析数据，从而提高效率。它仅适用于 Stax 解析器。如果要使用 DOM 解析器，则需要使用 DomParser。

# forms - 如何使用以下示例创建表单文本输入？

> ID：11902517
> 
> 赞同：0
> 
> 时间：2012-08-10T13:19:15.943
> 
> 标签：forms, textinput

长期以来，我一直想知道如何在表单中创建文本输入，下面有示例。这个解释可能听起来很奇怪，所以我有一个[例子](http://www.flysas.com/en/us/)，你可以在其中插入一个单词，或者在其他情况下插入一个机场代码，你可以点击下面的意思。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:23:44.383

看看这个网站：[http ://www.w3schools.com/html/html_forms.asp](http://www.w3schools.com/html/html_forms.asp)

它有很好的基本 html 课程，将帮助您获得所需的结果。

# applescript - Applescript、POSIX 文件名和 Mountain Lion

> ID：11902524
> 
> 赞同：3
> 
> 时间：2012-08-10T13:19:34.913
> 
> 标签：applescript, posix

在使用 Snow Leopard 时，我在创建 Applescripts 时多次使用以下模式：

```
on run args
    set filePath to POSIX file (item 1 of args) as alias
        ...
end run 
```

升级到 Mountain Lion 后，上面的脚本似乎会产生警告，不过：

```
2012-08-10 15:12:12.305 osascript[54131:303]
CFURLGetFSRef was passed this URL which has no scheme
(the URL may not work with other CFURL routines): path/to/input/file.ext 
```

任何人都可以启发错误的含义吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T21:40:30.067

这应该澄清问题和解决方案。所以首先*解决*问题

```
TB1T-Bboot:$ cat tmp.applescript
tell application "Finder"
        set MacOSpath to POSIX file "test-file" as alias
end tell
TB1T-Bboot:$ osascript tmp.applescript
2012-09-24 22:25:50.022 osascript[2564:707] CFURLGetFSRef was passed this URL which has no scheme (the URL may not work with other CFURL routines): test-file
alias TB1T-Bboot:Users:archive:test-file
TB1T-Bboot:$ 
```

现在没有问题了：

```
TB1T-Bboot:$ cat tmp.applescript
tell application "Finder"
        set MacOSpath to POSIX file "/Users/archive/test-file" as alias
end tell
TB1T-Bboot:$ osascript tmp.applescript
alias TB1T-Bboot:Users:archive:test-file
TB1T-Bboot:$ 
```

所以它抱怨路径是相对的，而不是绝对的。这个警告不会出现在 Lion 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:22:59.607

一个简单的解决方法是在路径前加上`file:///`. Mountain Lion 需要所有内容的 URL，因此“裸”路径行不通。

例如，如果你想要`/Users/RobertoAloi/file.txt you would pass in`file:///Users/RobertoAloi/file.txt`。

CFURLGetFSRef 的详细信息可以在[https://developer.apple.com/library/mac/#documentation/CoreFOundation/Reference/CFURLRef/Reference/reference.html找到](https://developer.apple.com/library/mac/#documentation/CoreFOundation/Reference/CFURLRef/Reference/reference.html)

# c# - 创建 quickfix 组时应用程序崩溃

> ID：11902526
> 
> 赞同：0
> 
> 时间：2012-08-10T13:19:43.360
> 
> 标签：c#, quickfix

如果我创建一个像这样的组：

```
QuickFix.Group group = new QuickFix.Group(3, 50) 
```

它运行良好。如果我创建组喜欢

```
QuickFix.Group group = new QuickFix.Group(73, 50)
// or
QuickFix.Group group = new QuickFix.Group(555, 600) 
```

我收到如下异常：

```
Attempted to read or write protected memory.
This is often an indication that other memory is corrupt.
   at FIX.FieldMap.{dtor}(FieldMap* )
   at FIX.Message.{dtor}(Message* )
   at FIX.Message.__vecDelDtor(Message* , UInt32 )
   at QuickFix.Message.Finalize() 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:47:34.757

好吧，我来打个比方……

一些谷歌搜索让我相信您正在使用[QuickFIX 引擎](http://www.quickfixengine.org/)的托管 C++ 包装器。鉴于这是一个围绕非托管代码的托管包装器，并且您可能会在 C++ 中看到一个异常，这一事实让我相信这可能只是该库中的一个错误。

我建议您从他们的邮件列表中获得更好的结果（请参阅[http://sourceforge.net/projects/quickfix/support](http://sourceforge.net/projects/quickfix/support)）。

# c# - 初始化并调用通用表单

> ID：11902531
> 
> 赞同：0
> 
> 时间：2012-08-10T13:19:56.467
> 
> 标签：c#, winforms

我知道标题具有误导性，但我想不出更好的方法来解决这个问题。我有一个显示表单的程序，允许用户从其他程序中选择运行。然后我试图创建一些通用代码来调用表单。在不复制代码的情况下不确定最佳方法。这是我想做的；

```
 TaxYearForm loTaxYear = new TaxYearForm();

        var loTaxProgram = new BaseForm();

        if (loTaxYear.ShowDialog() == DialogResult.OK)
        {
            string lsTaxModule = loTaxYear.gsTaxModule.ToUpper();
            int lnTaxYear = loTaxYear.gnPrimaryFilter;

            switch (lsTaxModule)
            {
                case "RE":
                    RealEstateForm loTaxProgram = new RealEstateForm();

                    break;
                case "PC":
                    PerCapitaForm loTaxProgram = new PerCapitaForm();

                    break;

            }

            loTaxProgram.gsUserId = gsUserId;
            loTaxProgram.gnPrimaryFilter = lnTaxYear;
            loTaxProgram.gnSecurityLevel = gnSecurityLevel;

            loTaxProgram.ShowDialog(); 
```

我不能这样做，因为在 switch 语句中我重新使用了变量 loTaxProgram。我可以将所有代码放在每个 case 语句中，但这是我想要避免的。我在类中创建了一个方法，但由于必须将参数声明为 BaseForm，因此遇到了同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:28:31.180

我建议创建一个新的工厂类来创建表单：

```
public class FormFactory
{
    public BaseFrom Create(string taxCode)
    {
        switch (taxCode)
        {
            case "RE":
                return new RealEstateForm();

                // rest of stuff.
        }
    }
} 
```

所以你的代码可能看起来像这样：

```
if (loTaxYear.ShowDialog() == DialogResult.OK)
{    
    var factory = new FormFactory();

    var loTaxProgram = factory.Create(loTaxYear.gsTaxModule.ToUpper());

    loTaxProgram.gsUserId = gsUserId;
    loTaxProgram.gnPrimaryFilter = loTaxYear.gnPrimaryFilter;
    loTaxProgram.gnSecurityLevel = gnSecurityLevel;

    loTaxProgram.ShowDialog();
} 
```

因此，工厂类将负责创建一个表单，让事情变得更简洁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:22:32.050

无需进一步重新申报

```
switch (lsTaxModule)
{
  case "RE":
    loTaxProgram = new RealEstateForm();

    break;
  case "PC":
    loTaxProgram = new PerCapitaForm();

    break;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T13:22:45.093

如果您的两个表单都来自您的 BaseForm 则不要重新声明您的`loTaxProgram`变量。

```
 TaxYearForm loTaxYear = new TaxYearForm();

        BaseFrom loTaxProgram;

        if (loTaxYear.ShowDialog() == DialogResult.OK)
        {
            string lsTaxModule = loTaxYear.gsTaxModule.ToUpper();
            int lnTaxYear = loTaxYear.gnPrimaryFilter;

            switch (lsTaxModule)
            {
                case "RE":
                    loTaxProgram = new RealEstateForm();

                    break;
                case "PC":
                    loTaxProgram = new PerCapitaForm();

                    break;

            }

            loTaxProgram.gsUserId = gsUserId;
            loTaxProgram.gnPrimaryFilter = lnTaxYear;
            loTaxProgram.gnSecurityLevel = gnSecurityLevel;

            loTaxProgram.ShowDialog(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T13:23:26.420

最快的方法是这样做（注意 case 语句的变化）：

```
 TaxYearForm loTaxYear = new TaxYearForm(); 

    var loTaxProgram = new BaseForm(); 

    if (loTaxYear.ShowDialog() == DialogResult.OK) 
    { 
        string lsTaxModule = loTaxYear.gsTaxModule.ToUpper(); 
        int lnTaxYear = loTaxYear.gnPrimaryFilter; 

        switch (lsTaxModule) 
        { 
            case "RE": 
                loTaxProgram = new RealEstateForm(); 

                break; 
            case "PC": 
                loTaxProgram = new PerCapitaForm();

                break; 

        } 

        loTaxProgram.gsUserId = gsUserId; 
        loTaxProgram.gnPrimaryFilter = lnTaxYear; 
        loTaxProgram.gnSecurityLevel = gnSecurityLevel; 

        loTaxProgram.ShowDialog(); 
```

为了将来参考，您可能想在 IMO 上搜索非常适合这种代码的工厂模式。

# php - 如何定期更新网页上的服务器端值？

> ID：11902535
> 
> 赞同：0
> 
> 时间：2012-08-10T13:20:14.400
> 
> 标签：php, javascript, mysql, ajax, timer

我有一个存储在 MySQL 数据库中的时间戳，我想定期（比如每秒）更新当前时间与存储在数据库中的时间戳值之间的差异（当然没有重新加载页面）以显示类似 5分钟倒计时。现在。我正在考虑使用 setTimeout 定期触发获取此值的 AJAX 请求。这是最好的方法吗？相反，我应该只运行一个客户端计时器，然后每分钟左右将其与服务器端时间戳同步吗？

**注意：**此计时器负责我网站上的一项重要功能，因此它应该相当准确。

**编辑：**我不需要 cron 工作，我只需要一个倒数计时器，它会自动在网页上更新，例如从 5:00 到 4:59 到 4:58 ......等等。如果您熟悉 Megaupload 关闭之前的那个，我需要类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:25:48.693

这取决于你想完成什么。

例如，如果您通常需要每 5 分钟处理一次与网站相关的内容，请使用 cron 作业。

如果您想通过更新每个示例的评论列表来改善用户体验，请使用 ajax。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:28:26.547

因此，您需要一台承受所有压力的服务器。

可以假设服务器和客户端上的时钟都有一秒钟，在两者上持续时间一样长，并且可能需要一周（如果非常糟糕）分歧。

但是客户端可能认为是 1972 年 1 月 1 日午夜，但您的服务器认为是 2012 年 8 月 10 日星期五 14:25。

因此，只需将该日期从服务器传递给客户端。找出差异。在页面上，您可以仅使用 Javascript 将服务器日期/时间放在页面上。

至于网站（服务器位）仅依赖于服务器时间。你可以控制的。

倒计时只是一种玩笑。但是服务器是您的资产，也是您开展业务的地方。如果您依赖客户，一些讨厌的人可以重置时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T14:09:04.150

由于 Javascript 工作方式的性质，几乎不可能实现精确的计时器（有关详细信息，请参阅此内容）。

但是，您可以做一些非常接近它的事情，我建议您要做的是全部在客户端（用户可篡改但资源消耗最少），更重要的是使用服务器端验证来防止用户能够篡改它。因此，您在开始时在数据库中设置了一个值，上面写着“在 x 时间之前不接受提交”，然后客户端可以处理计时器。

[这是如何完成的一个非常小的示例](http://codepad.viper-7.com/lZrMKU)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T13:28:34.407

您可以制作一个执行此操作的脚本，并且可以每隔一秒左右运行一次，具体取决于您的服务器运行的操作系统，其中：

如果 linux { chronjob } [http://www.thegeekstuff.com/2011/07/php-cron-job/](http://www.thegeekstuff.com/2011/07/php-cron-job/)

else if windows { windows scheduler }[如何使用 windows 调度任务运行 PHP 脚本？](https://stackoverflow.com/questions/4701861/how-do-i-run-a-php-script-using-windows-schedule-task)

这是运行客户端脚本最安全、最有效的方式。

# php - SQL 从一个表中选择不在另一个表中的项目

> ID：11902540
> 
> 赞同：4
> 
> 时间：2012-08-10T13:20:27.770
> 
> 标签：php, mysql, sql, codeigniter

我有一个带有变量 $lid 的 php 页面，以及一个带有可变 $uid 的用户...我需要从 2 个表中选择一些数据来填写页面。

```
 Table 1                          Table 2
¦----------¦----------¦    ¦----------¦----------¦----------¦
¦    qid   ¦    lid   ¦    ¦   owner  ¦   qid    ¦timestamp ¦
¦----------¦----------¦    ¦----------¦----------¦----------¦ 
```

我需要编写一个 SQL 语句，从表 2 中获取所有内容，其中所有者 = $uid，如果 qid 尚未在 table1 中列出，并且当前页面的 $lid。

我试过

```
SELECT * FROM table_two WHERE qid != (SELECT qid FROM table_one WHERE lid = " . $lid .") AND owner = " . $uid . "; 
```

但没有快乐

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T13:21:52.247

这会起作用：

```
SELECT * 
FROM table_two 
WHERE qid not in (
    SELECT qid 
    FROM table_one 
    WHERE lid = " . $lid .") 
```

这可能会表现得更好：

```
SELECT T2.* 
FROM table_two t2
LEFT OUTER JOIN table_one T1 ON T2.QID = T1.QID 
    AND T1.LID = " . $lid ."
WHERE T1.qid IS NULL 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T13:22:30.337

您应该使用`LEFT JOIN`以获得最佳性能：

```
SELECT a.*
FROM table_two a
    LEFT JOIN table_one b
        ON a.qid = b.qid AND
           b.lid = " . $lid ."
WHERE b.qid IS NULL; 
```

请参阅[连接的视觉解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T13:21:53.250

```
SELECT * FROM table_two WHERE qid NOT IN (SELECT qid FROM table_one WHERE lid = " . $lid .") 
```

使用`NOT IN`子句。这将为您提供不在您的`subquery`.

**编辑** 您也可以使用`Left-Join`, In`MSSQL`效率较低，但这是`MySQL`（我没有注意到），所以它们运行相同。你可以[在这里看到](http://explainextended.com/2009/09/18/not-in-vs-not-exists-vs-left-join-is-null-mysql/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T13:22:00.950

```
SELECT * FROM table_two WHERE qid not in 
    (SELECT qid FROM table_one WHERE lid = " . $lid .") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T10:05:55.903

您建议使用：

```
SELECT * 
FROM table_two 
WHERE qid not in (
    SELECT qid 
    FROM table_one 
    WHERE lid = " . $lid .") 
```

我也得到了相同的prblm，但是当我用“notin”替换了它时，它对我有用

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-10T13:24:20.643

我会说使用

```
SELECT * FROM table_two WHERE NOT EXISTS (SELECT NULL FROM table_one WHERE lid = " . $lid .") 
```

使用 NOT EXISTS 子句将为您提供比 NOT IN 更好的查询计划。

# android - 带有 SimpleCursorAdapter 的空微调器

> ID：11902548
> 
> 赞同：0
> 
> 时间：2012-08-10T13:20:56.403
> 
> 标签：android, spinner, simplecursoradapter

我正在尝试使用 SimpleCursorAdapter 填充微调器。但是微调器完全是空的；它只是不显示项目。我没有收到错误消息。

几个小时以来，我一直试图弄清楚我做错了什么。我真的希望你能帮助我。

这是我活动中的 onCreate 函数：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.insert);

    spinner     = (Spinner)     findViewById(R.id.spinner);
    fillSpinner();
} 
```

这是应该填充微调器的函数：

```
private void fillSpinner() {
        Db = new DbAdapter(this);
        Db.open();
        final Cursor cursor = Db.getCats(true,true);

        Log.d("fillSpinner","cursor.getCount: "+cursor.getCount()+" / cursor.getColumnCount: "+cursor.getColumnCount());//returns 8 and 4

        String[] from = new String[]{DbAdapter.KEY_NAME};
        int[] to = new int[]{android.R.id.text1};

        SimpleCursorAdapter adapter =
                new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, cursor, from, to);

        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

        spinner.setAdapter(adapter);

        //...   

        cursor.close();
        Db.close();
    } 
```

这是我的 DbAdapter 类中的 getCats() 函数：

```
public Cursor getCats(boolean times, boolean adapter) {

        String id = KEY_ID;
        if(adapter){
            id = KEY_ID +" "+_ID;
        }

        String columns = id+", "+KEY_NAME;
        if(times){
            columns+=", "+KEY_START+", "+KEY_END;
        }
        return Db.rawQuery("SELECT "+columns+" FROM "+CATS_TABLE+" ORDER BY "+KEY_ID+" ASC", null);
    } 
```

我的常数：

```
private static final String CATS_TABLE  = "cats";

public static final String KEY_ID       = "id";
public static final String KEY_NAME     = "name";
public static final String KEY_START    = "start";
public static final String KEY_END      = "end";

public static final String _ID          = "_id"; 
```

提前致谢！

耶洛斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:42:07.860

不要关闭光标。

使用微调器时，光标必须保持打开状态。调用游标后，让系统通过调用来处理关闭它`startManagingCursor`。完成后它会关闭它，而不必担心它。

```
final Cursor cursor = Db.getCats(true,true); 
this.startManagingCursor(cursor); 
```

# java - 设置tomcat的最大堆空间

> ID：11902549
> 
> 赞同：0
> 
> 时间：2012-08-10T13:20:56.757
> 
> 标签：java, tomcat, heap-memory

我的`Java EE`应用程序在主机服务器上运行得很好，但它使用了大量的堆空间。允许的堆空间是`64MB`. 每次我的应用程序使用比`64 MB`堆更多的东西时，我都会暂停我的托管帐户。我认为托管服务提供商没有为我的应用程序设置最大堆空间，这就是为什么我没有`outOfMemoryException`达到目标`>64MB`。

我有自己的 tomcat 实例，我可以配置 tomcat 配置。我的问题是 - 我如何设置我的 tomcat 实例的最大允许堆空间，以便它`outOfMemoryException`在达到限制时抛出？这样我的托管帐户就不会被暂停。

这是[catlina.bat](http://pastebin.com/WWGRXQ1h)和[catlina.sh](http://pastebin.com/MYT4B3Z5)

我必须在哪里更改这些文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:28:02.813

增加堆空间很简单，就像在 JVM 中添加一个命令行开关：

```
-Xmx2g 
```

2g for 2Gb，如果你想要兆字节：512m ---> -Xmx512m

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:25:32.917

您有一个名为**JAVA_OPTS**的变量。

添加到它的论点`-Xmx1g`。

代替：`set JAVA_OPTS=%JAVA_OPTS% -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.util.logging.config.file="%CATALINA_BASE%\conf\logging.properties"`

与：设置 JAVA_OPTS=%JAVA_OPTS% -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.util.logging.config.file="%CATALINA_BASE%\conf\logging.properties" -Xmx1g

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T13:26:17.057

它在 setenv.sh 中，由 catalina.sh 检测到：

JVM_ARGS="-Xmx64m"

问候

菲利普

# logging - 每个上下文的码头日志

> ID：11902550
> 
> 赞同：1
> 
> 时间：2012-08-10T13:20:58.207
> 
> 标签：logging, configuration, jetty

我在码头服务器上运行几个应用程序，每个应用程序在 /contexts 文件夹中都有它自己的上下文文件，每个应用程序都指定它自己的日志文件。

启动码头时，所有应用程序都已启动，并且正在工作，所有日志文件都被创建，但是 - 所有输出都发送到创建的最后一个日志文件，其他日志文件保持为空。

描述每个上下文的日志记录的部分如下所示。我试图确保每个上下文都有自己的 id 和名称 - 但仍然 - 问题仍然存在。

```
 <New id="oGMRLog2" class="java.io.PrintStream">
    <Arg>
      <New class="org.mortbay.util.RolloverFileOutputStream">
        <Arg><SystemProperty name="jetty.home" default="."/>/testlogs/std2.yyyy_mm_dd.log</Arg>
        <Arg type="boolean">false</Arg>
        <Arg type="int">90</Arg>
        <Arg><Call class="java.util.TimeZone" name="getTimeZone"><Arg>GMT+2</Arg></Call></Arg>
        <Get id="oGM2ReqLogName" name="datedFilename"/>
      </New>
    </Arg>
  </New>
  <Call class="org.mortbay.log.Log" name="info"><Arg>Redirecting GM stderr/stdout to <Ref id="oGM2ReqLogName"/></Arg></Call>
  <Call class="java.lang.System" name="setErr"><Arg><Ref id="oGMRLog2"/></Arg></Call>
  <Call class="java.lang.System" name="setOut"><Arg><Ref id="oGMRLog2"/></Arg></Call> 
```

我开始怀疑问题出在`class="java.lang.System"`哪里，打印流应该单独附加到这个上下文，而不是整个 JVM

任何人都可以告诉我什么是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T01:57:58.623

(Web) 基于上下文的日志记录可以通过将 Jetty 配置为使用[Slf4j](http://www.slf4j.org/) + [Logback来完成，然后使用](http://logback.qos.ch/)[SiftingAppender](http://logback.qos.ch/manual/appenders.html#SiftingAppender)配置配置 logback，该配置使用来自[MDCHandler的信息](https://github.com/jetty-project/jetty-and-logback-example/blob/master/jetty-slf4j-mdc-handler/src/main/java/org/eclipse/jetty/examples/logging/MDCHandler.java)[根据部署的 webapp 的上下文](https://github.com/jetty-project/jetty-and-logback-example/blob/master/jetty-distro-with-logback-sifting/src/main/config/resources/logback.xml)进行筛选。

它记录在[http://wiki.eclipse.org/Jetty/Tutorial/Sifting_Logs_with_Logback](http://wiki.eclipse.org/Jetty/Tutorial/Sifting_Logs_with_Logback)

[https://github.com/jetty-project/jetty-and-logback-example](https://github.com/jetty-project/jetty-and-logback-example)甚至还有一个示例项目展示了这一点

# objective-c - 目标c ios http请求发送未编码字符串

> ID：11902551
> 
> 赞同：0
> 
> 时间：2012-08-10T13:20:57.887
> 
> 标签：objective-c, ios, request

是否可以设置为 http 正文而不是编码字符串？

```
 NSData *postData = [postString dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES];

  NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

  [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
  [request setHTTPBody:postData]; 
```

是否有可能做这样的事情：

```
 NSString *postLength = [NSString stringWithFormat:@"%d", [postString length]];
  [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
  [request setHTTPBody:postString]; 
```

我试过这个并得到一个错误：由于未捕获的异常'NSInvalidArgumentException'而终止应用程序，原因：'-[__NSCFString bytes]：无法识别的选择器发送到实例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:46:45.537

```
[request setHTTPBody:postString]; 
```

应该

```
[request setHTTPBody:postData]; 
```

# .net - WPF 的 BitmapCache 未完全清除

> ID：11902552
> 
> 赞同：6
> 
> 时间：2012-08-10T13:20:59.237
> 
> 标签：.net, wpf, path, bitmap, rendering

我们有一个带有用户控件的 WPF 页面，我们在其中使用 BitmapCache - 当我们尝试通过使用空路径（新路径（））更新属性（数据绑定）来清除此元素时，它并没有完全刷新/清除。如果我稍微更改窗口大小，BitmapCache 处于活动状态的区域将被完全清除。

清除/刷新使用 BitmapCache 的元素有什么特别的事情要做吗？

这是我们的代码：

```
 <me:ScrollViewer
    RenderedWaves="{Binding RenderedWaves}"
    ItemTemplate="{DynamicResource DataTemplateForWaveItem}" 
    ItemsPanel="{DynamicResource ItemsPanelTemplateForWaveItems}" 
    CacheMode="BitmapCache" /> 
```

**我以为我修复了它，但它不是每次都有效...**

此设置路径的代码不会立即更新 BitmapCache：

```
Protected WriteOnly Property SetGraph As Path
 Set(value As Path)
    If value Is Nothing Then value = GetEmptyPath()
    _graph = value
    OnPropertyChanged(New PropertyChangedEventArgs(PropertyNameGraph))
 End Set
End Property 
```

这段代码有时会更新它：

```
Protected WriteOnly Property SetGraph As Path
Set(value As Path)
    UIDispatcherLocator.UIDispatcher.Invoke(Sub()
                                                If value Is Nothing Then value = GetEmptyPath()
                                                _graph = value
                                            End Sub, Threading.DispatcherPriority.Background)
    OnPropertyChanged(New PropertyChangedEventArgs(PropertyNameGraph))
End Set
End Property 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T02:19:53.630

您是否可以在对象上创建一个新事件以在需要时触发，并且在调用时将 object = 设置为由 use 语句临时创建的新对象，如果您可以使其继承自 system.idisposable 或者您只是将其设置为完成时为空？我不知道它的代码，但类似于：

```
MyEvent += new event(object b);

event(object b)
{
  using (custom_ScrollViewer = new custom_ScrollViewer)
{ 
OnScreen_ScrollViewer = Custom_ScrollViewer;

}; 
// or 
custom_ScrollViewer = new custom_ScrollViewer;
OnScreen_ScrollViewer = Custom_ScrollViewer;
custom_ScrollViewer = null;

} 
```

# java - Android - 更新列表作为数据库更新

> ID：11902553
> 
> 赞同：0
> 
> 时间：2012-08-10T13:20:58.913
> 
> 标签：java, android, sqlite, cursor, simplecursoradapter

我正在寻找一种方法来更新我的 ListView，因为我的数据库正在更新。

例如，当应用程序第一次加载时，我异步调用我的数据库并执行所有数据的插入（所有 API 调用和插入运行最多需要 30 秒，并且仅在第一次创建应用程序时执行）。在此期间，我希望能够让用户浏览应用程序，一旦他们到达需要数据库信息的页面，我希望页面加载当前可用数据，并随着更多信息的放置而继续更新数据库。

同时，如果用户在给定页面上并且数据库在后台使用该列表的附加信息进行更新，我希望更新该列表。

对数据库的异步调用是在一个单独的类中进行的。

谢谢，德曼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:02:38.913

ContentProvider 能够做到这一点。非常感谢。

# php - 如何将php文件调用到div中？

> ID：11902554
> 
> 赞同：2
> 
> 时间：2012-08-10T13:21:01.710
> 
> 标签：php, javascript, jquery, include

我正在尝试仅重新加载特定的 div

```
$("#captcha").html('<?php echo 'abc';?>'); // just as test - works well 
```

因为 div 内容要大得多，所以我尝试了：

```
$("#captcha").html('<?php include 'myFile.php';?>'); // doesn't work 
```

如何将 .php 文件中的代码调用到 div 中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T13:23:49.797

利用`$('div').load('phpfile.php')`

`$.load`用于通过 html 文件或 php 等服务器端脚本从服务器加载数据。只是为了大致了解您可以做什么，`$.load`您还可以通过在要检索的页面之后包含选择器来加载页面片段。这样，只有选定元素的内容才会加载到您的容器中。您还可以在请求完成（回调）后传入数据并执行函数。

`$.html`不同之处在于它仅用于获取或设置现有元素的内容。但是，您可以将它与 , 等 ajax 方法一起使用`$.post`来`$.get`更新`$.ajax`现有元素的内容。

如果您想深入了解这些方法的工作原理，请阅读有关[$.load](http://api.jquery.com/load/)和[$.html](http://api.jquery.com/html/)方法的 jQuery 文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:24:12.753

您是否尝试过通过 ajax 加载 php？[http://api.jquery.com/load/](http://api.jquery.com/load/)如果您正在使用 jquery

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T13:24:49.820

将其加载到变量中，然后清理字符。我猜你可能有一些特殊的字符会破坏你的 javascript。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T13:25:52.327

PHP 是经过*预处理*的（PHP：Hypertext Preprocessor），没有新的请求就不能使用。您需要使用`load`将 php 文件的结果加载到您的 javascript 中。页面加载后，如果没有额外的 AJAX 请求（或其他发出新请求的方法），将无法运行更多 PHP。

PHP 是服务器端的，这意味着在发送响应*之前在服务器上安装了软件 (PHP) 来解释它。*HTTP 请求是“一次性完成”的操作，这意味着一旦发送响应，客户端和服务器之间的连接就会关闭。

将 PHP 和其他服务器端语言想象成厨房里的厨师。假设您订购食物以供取餐，您告诉餐厅您想要什么，然后离开去取。你回到你家，你的朋友决定他也想从他们那里得到一些东西。你没有带厨师回来，只有他们做的食物——所以得到你朋友的订单的唯一方法就是一路开车回来再去拿。

我确定以上是语法混乱（很早），但我希望我明白了这一点。无论如何，您将要使用`.load`来加载 php 文件：

```
$("captcha").load('myfile.php'); 
```

`load`将向页面发送 AJAX 请求`myfile.php`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-10T13:25:56.297

你可以试试`load`jquery中的方法

就像是

`$('#captcha').load('myFile.php')`

# algorithm - 如何反转具有复杂值的哈希？

> ID：11902558
> 
> 赞同：3
> 
> 时间：2012-08-10T13:21:25.827
> 
> 标签：algorithm, perl, map, foreach, hashmap

我有这个：

```
%lookup = (
    'Shelf' => { storage_types => 'Flat, Default' },
    'Locker' => { storage_types => 'Valuable' },
); 
```

我想得到这个：

```
%reverse_lookup = (
    'Flat' => 'Shelf',
    'Default' => 'Shelf',
    'Valuable' => 'Locker',
); 
```

例如，我可以在测试中循环浏览存储类型，并检查子例程是否返回正确的位置。

我无法理解多个列表扩展部分。

```
%reverse_lookup = map { split(/,\s*/, $lookup{$_}) => $_ } keys %lookup; # wrong 
```

我想用 map 或类似的东西简洁地完成这一切，而不是 foreach 循环。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T13:46:27.450

您不能使用单个映射来做到这一点，因为它遍历 %lookup 哈希的元素，而不是遍历内部的列表。因此，在这种情况下，您将在输出散列中拥有与源散列中相同数量的键。

但是您可以使用嵌套映射 - 首先将迭代主要哈希元素，其次将迭代内部列表。

```
my %lookup = (
    'Shelf' => { storage_types => 'Flat, Default' },
    'Locker' => { storage_types => 'Valuable' },
);
my %reverse_lookup = map { my $key_name = $_; map {$_ => $key_name} (split(/,\s*/, $lookup{$_}->{storage_types})) } keys %lookup;

use Data::Dumper; print Dumper \%reverse_lookup; 
```

PS foreach有什么问题？:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T13:40:49.983

将原始哈希修改为如下所示可能更容易：

```
%lookup = (
    'Shelf' => { storage_types => [ 'Flat', 'Default'] },
    'Locker' => { storage_types => ['Valuable'] },
); 
```

然后

```
%reverse_lookup = map {
       my $key = $_; 
       #$_ => $key foreach @{$lookup{$key}};
       map { $_ => $key } @${lookup{$key}};
    } keys %lookup; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T14:25:07.997

事实证明，只要您不介意在 void 上下文中无用地使用 map（甚至比这更愚蠢的事情），您*就可以使用一张地图来做到这一点：*

```
map { @reverse_hash{split /,\s*/, $lookup{$_}} = ($_x100) } keys %lookup; 
```

不过，它很简洁。它甚至可以工作！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T13:46:49.903

如果您只对 感兴趣`storage_types`并且希望您有不可读的代码，您可以尝试：

```
%reverse_lookup = map { my $k = $_; map { $_ => $k } split /,\s*/, $lookup{$_}{storage_types} } keys %lookup; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T18:25:41.643

这就是我将如何编码

```
use strict;
use warnings;

my %lookup = (
  Shelf => { storage_types => 'Flat, Default' },
  Locker => { storage_types => 'Valuable' },
);

my %reverse_lookup;

while ( my ($item, $info) = each %lookup ) {
  my @types = split /,\s*/, $info->{storage_types};
  $reverse_lookup{$_} = $item for @types;
}

use Data::Dump;
dd \%reverse_lookup; 
```

**输出**

```
{ Default => "Shelf", Flat => "Shelf", Valuable => "Locker" } 
```

# python - Python：code.interact(local=locals())，其中 stdin/stdout 不可用

> ID：11902564
> 
> 赞同：8
> 
> 时间：2012-08-10T13:21:41.740
> 
> 标签：python, django, unix, scheduler, unix-socket

在 Python 中，以下代码片段将在执行时打开一个交互式 shell。

```
import code; code.interact(local = locals())
```

事实证明，这对于调试大量文档不足的代码非常有用。即使没有调试器，也可以使用 shell 导航程序内环境并弄清楚发生了什么。到目前为止，一切都很好。

现在是挑战。

我正在使用的软件（顺便说一下，它是用 Django 编写的）使用某种调度机制，然后与*另一个*Python 进程对话，除了编辑它的代码之外，我无法控制它。除了发送给它进行处理的变量之外，我没有任何输入。

但是，我不知道代码是如何工作的，因为文档很差，所以我想用这个`code.interact`方法来解决问题。

但是这个过程是由一些特殊的调度软件在后台某个地方启动的，所以流程不会从 Django 应用程序到我希望检查的部分。相反，会发送一个信号和对象，然后在一个完全不同的进程中的任意时间（10-200 毫秒之间的任意时间）运行它们。当接收到信号和对象时，stdin/stdout 就完全不在了。

因此，我认为`code.interact`可以通过指定`readfunc`参数来使用文件句柄或 Unix 套接字，而不是使用 stdin/stdout 与之通信。我已经通过`open()`文件和套接字尝试过这个，但无济于事。

现在我试图让它仅仅从 Django 进程本身工作，所以即使是调度问题也是不可能的，虽然交互式 shell 确实启动了，但它立即关闭，既不接受带有命令作为内容的文件，也不接受Python 命令通过管道传输到的 Unix 套接字。

使长话短说; 是否可以与通过`code.interact`stdin/stdout 以外的其他方式调用的交互式 shell 进行通信？如果是这样，怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T14:33:18.407

我并不完全了解调度程序和 django 等。

但是要回答您问题的核心：

```
#!/usr/bin/python

import code

f = open('input.txt', 'r')

def readfunc(prompt):
    return f.readline()

code.interact(readfunc=readfunc) 
```

然后在一个终端中运行它：

```
$ ./test.py 
Python 2.7.3 (default, Apr 20 2012, 22:39:59) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
(InteractiveConsole) 
```

请注意，您没有收到提示。

然后在另一个终端运行：

```
echo "globals()" >> input.txt 
```

回到第一个终端，您将看到输出。

# java - 在android中将word文档转换为pdf

> ID：11902566
> 
> 赞同：3
> 
> 时间：2012-08-10T13:21:49.157
> 
> 标签：java, android, pdf, ms-word, dalvik

我知道 stackoverflow 中有很多关于这个问题的问题，但我没有得到我想要的东西。我什至尝试`jwordconvert.jar`从`Qoppa`软件中使用，但是唉！它说

```
Unable to execute dex: Java heap space
Conversion of dalvik format failed. 
```

现在我在 android 市场上看到了一个应用程序，名称为`Word To Pdf`from `ThinkTI.com.br`。它只是做了我想让我的程序做的事情。

所以谁能告诉我**这个应用程序背后的机制或类似或更好的方法......**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T07:25:32.327

**披露：我在 docx4j 上工作**

docx4j 可以产生PDF输出；请参阅[ConvertOutPDF.java](https://github.com/plutext/docx4j/blob/master/src/main/java/org/docx4j/samples/ConvertOutPDF.java)

如果您可以接受这种质量，那么您可以使用 docx4j Android 构建。请参阅[jaxb-can-be-made-to-run-on-android](http://www.docx4java.org/blog/2012/05/jaxb-can-be-made-to-run-on-android/)

您仍然需要为 Java 提供足够的堆空间；根据博客文章，为了给 Eclipse 更多的堆空间（症状是'你无法执行 dex：Java 堆空间'）编辑 eclipse.ini，类似于：

```
-Xms256m

-Xmx4096m 
```

# android - Android视图的流程

> ID：11902570
> 
> 赞同：1
> 
> 时间：2012-08-10T13:21:56.510
> 
> 标签：android, opengl-es, glsurfaceview

谁能解释我从应用程序到 GPU 到显示的流程。我需要它在 Android 中的视图。

如果我运行一个使用 openGL 的应用程序，则必须创建一个视图，当我按下某个主键时，当前应用程序将不可见并启动主屏幕的视图。我能理解流程吗？

GPU在这里的作用是什么？

# session - 如何将 userId 存储在会话中，以便下一个资源能够在 Spring 安全性中访问它

> ID：11902576
> 
> 赞同：1
> 
> 时间：2012-08-10T13:22:09.287
> 
> 标签：session, spring-security

我正在使用 Spring Security 进行 Spring+struts2+hibernate 集成进行身份验证。这是`application-security.xml`文件：

```
<http>
    <intercept-url pattern="/login.jsp" access="IS_AUTHENTICATED_ANONYMOUSLY" />
    <intercept-url pattern="/**" filters="none" />
    <form-login login-page="/login.jsp" default-target-url="/homePage.action" authentication-failure-url="/login-fail.jsp"/>
    <logout logout-success-url="/logged_out.jsp" />
</http> 
```

问题是当用户通过身份验证并且请求被转发到`/homePage.action`时，我无法进入`userid`课堂`homePage.action`（struts 中的动作类）。

下面是代码：

```
UserDetails userDetails = (UserDetails)
  SecurityContextHolder.getContext().getAuthentication().getPrincipal(); 
```

调试了一段代码，发现当请​​求转发到时`/homePage.action`，`SecurityContextHolder`值被清除。

有什么办法可以让课堂`userid`可用吗？`homepage.action`

我已经搜索了很多，但无法最终确定。似乎我必须编写一些自定义过滤器实现并挂钩到弹簧安全过滤器链（以便会话管理仅在弹簧级别完成）。

谁能给点指点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:12:18.623

我更改了`application-security.xml`文件（如下所示），现在问题似乎已解决。
主要变化来自

```
<intercept-url pattern="/**" filters="none" /> 
```

至 ：

```
<intercept-url pattern="/**" access="ROLE_ADMIN,ROLE_USER" /> 
```

```
<http>
    <intercept-url pattern="/login.jsp" access="IS_AUTHENTICATED_ANONYMOUSLY" />
    <intercept-url pattern="/inputUser.action" access="ROLE_ADMIN" />
    <intercept-url pattern="/getDeleteUsers.action" access="ROLE_ADMIN" />

    <intercept-url pattern="/login-fail.jsp" filters="none" />  
    <intercept-url pattern="/logged_out.jsp" filters="none" />   

    <intercept-url pattern="/**" access="ROLE_ADMIN,ROLE_USER" />  
    <form-login login-page="/login.jsp" default-target-url="/homePage.action" authentication-failure-url="/login-fail.jsp"/>

    <logout logout-success-url="/logged_out.jsp"/>
</http 
```

在 spring security 中，`SecurityContextHolder`被填充`SecurityContextPersistenceFilter`，因此它应该通过 spring security 过滤器链。（`filters="none"`正如卢克所指出的那样，在这里不起作用）。

添加`<intercept-url pattern="/**" access="ROLE_ADMIN,ROLE_USER" />`
确保当请求进行时应用弹簧过滤器链`login-submission`并且`homePage.action`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:02:01.673

您必须考虑几件事：

**首先**，您必须将过滤器从最小到最大。因为如果有一个过滤器匹配请求，其余过滤器将被忽略。*看你配置的问题*

**其次**，如果认证成功，`SecurityContextHolder`surly 会包含当前用户的`UserDetails`. *所以身份验证可能有问题*

**第三**，没有`userId`属性这样的东西`UserDetails`。（*我假设你的意思不是`username`*）所以如果你想要他的 ID，你是否必须拥有自己的类来扩展`UserDetails`并将`userId`属性放入其中，或者在你的`USER`表中查找（使用`UserDetails.getUsername`) 并检索他的 ID。

# android - 如何创建超链接短信以在 android 的 facebook 墙上发布

> ID：11902582
> 
> 赞同：2
> 
> 时间：2012-08-10T13:22:30.007
> 
> 标签：android, facebook, facebook-graph-api

Hiii，我需要在消息中包含超链接的 facebook 墙上发布消息。我尝试了以下代码

```
 Bundle parameters = new Bundle();
             parameters.putString("message",message);
             parameters.putString("attachment", "{\"name\":\""+"seriesname"+"\","
  +"\"href\":\""+"http://www.google.com\","+"\"description\":\""+"sampledescriptinnn"+"\"}");  
   parameters.putString("description","Testing....."); 
   response = mFacebook.request("me/feed", parameters,"POST"); 
```

我可以在墙上发布消息，但从不显示超链接。谁能告诉我实现这一目标的正确方法是什么。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T20:49:16.590

这是一个来自 PHP SDK 的示例，您可以[在](https://developers.facebook.com/docs/reference/php/facebook-api/)标题为“使用 Graph API 将链接发布到用户墙”的第三个示例框中找到。

他们打电话

```
 $ret_obj = $facebook->api('/me/feed', 'POST',
                                array(
                                  'link' => 'www.example.com',
                                  'message' => 'Posting with the PHP SDK!'
                             )); 
```

所以我建议遵循相同的格式，并有一个`Bundle`包含 URL 的“链接”和一个包含您想要作为描述的消息的“消息”，例如

```
Bundle params = new Bundle();
params.putString("link", "www.google.com");
params.putString("message", Testing.....");
response = mFacebook.request("me/feed", parameters, "POST"); 
```

请尝试一下，如果您仍有任何问题，请告诉我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:27:18.167

```
parameters.putString("link", "http://www.google.com"); 
```

这将对您有所帮助。

# php - 多场比赛

> ID：11902586
> 
> 赞同：1
> 
> 时间：2012-08-10T13:22:37.077
> 
> 标签：php, regex

我想从文本中删除这些词：

> 约翰·杰克·大卫

我写了这个正则表达式：

```
(John|Jack|David) 
```

但它删除`John`（第一个匹配）并且不匹配另外两个单词。

我应该使用修饰符吗？哪一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:44:14.207

在 PHP 中，您需要使用`preg_match_all()`才能匹配所有出现的地方。

```
preg_match_all("/(John|Jack|David)/", $subject); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:27:23.970

你没有提到语言，但在 Javascript 中它看起来像这样：

```
'John Jack David'.replace(/John|Jack|David/g, 'hans'); 
```

# forms - 如何从表单字段转换文本并使浏览器重定向到该地址？

> ID：11902588
> 
> 赞同：-2
> 
> 时间：2012-08-10T13:22:36.767
> 
> 标签：forms, url, redirect

我想在我的网页上为我的客户进行客户端登录，我不想处理数据库。下面的想法可能吗？

1.  我创建了一个登录页面 (clientlogin.asp)，其中包含一个包含单行文本条目的表单。
2.  我创建一个页面（kek.asp）并将其上传到[http://www.site.com/](http://www.site.com/)
3.  给客户“kek”作为他们的登录密码。
4.  客户端在 clientlogin.asp 的表单中键入“kek”并继续。
5.  脚本重定向到[http://www.site.com/kek.asp](http://www.site.com/kek.asp)

甚至可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:33:21.450

这是将用户存储在数据库中的常用方法。如果您不想使用数据库，则可以使用文件，但我认为您应该使用数据库，因为这是最好的选择。

# html - 如何在不使用 Apache 服务器上的 htaccess 的情况下使用 HTML5 Boilerplate？

> ID：11902589
> 
> 赞同：0
> 
> 时间：2012-08-10T13:22:39.790
> 
> 标签：html, .htaccess, html5boilerplate

由于担心他的电子商务商店的安全性，我的客户不允许我访问我托管他的新网站的服务器上的 htaccess 文件。如何在不使用 htaccess 文件的情况下使用 HTML5 Boilerplate？

我对这一切都很陌生，所以请尽可能清楚地解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:28:18.143

`.htaccess`提供对服务器设置的微调。这不是必需的，但推荐。如果您的主机不允许您使用`.htaccess`，请不要使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:24:55.200

您不需要 htaccess。您可能唯一需要的是 mime 类型。其他东西是可选的。

# c# - c# 使用正则表达式解析引号之间的字符串

> ID：11902592
> 
> 赞同：2
> 
> 时间：2012-08-10T13:22:56.340
> 
> 标签：c#, regex, string, parsing

我很新，我无法让它正常工作。

我有这个字符串

> ["string1","string2","string3","string4","string5","string6","string7","string8","string9","string10"]

我想获得“

我认为正则表达式最好完成这项任务。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T13:24:56.637

这将在引号之间捕获：

```
(?<=")[\w]+(?!=") 
```

扩展示例：

```
string s = "[\"string1\",\"string2\",\"string3\",\"string4\",\"string5\",\"string6\",\"string7\",\"string8\",\"string9\",\"string10\"]";

foreach (Match m in Regex.Matches(s, "(?<=\")[\\w]+(?!=\")")) {
    Console.WriteLine(m.Value);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T13:52:42.543

由于这看起来像 JSON，请尝试使用[JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/bb337495)类

```
string myString = "[\"string1\",\"string2\",\"string3\",\"string4\",\"string5\",\"string6\",\"string7\",\"string8\",\"string9\",\"string10\"]";

string[] strings = (new JavaScriptSerializer()).Deserialize<string[]>(myString);

foreach (string str in strings)
{
    Console.WriteLine(str);
} 
```

不过似乎有点矫枉过正。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T13:36:52.867

在我看来，这`Split`不仅仅是正则表达式的工作：

```
string str = "[\"string1\",\"string2\",\"string3\",\"string4\",\"string5\",\"string6\",\"string7\",\"string8\",\"string9\",\"string10\"]";
Regex rgx = new Regex("[\\[\\]\"]"); // get rid of the quotes and braces
str = rgx.Replace(str,""); 
string [] split = str.Split(','); // split on commas. that's it.

foreach (string s in split)
{
    Console.WriteLine(s);
} 
```

如果引用的字符串变得混乱，这不需要特殊的匹配正则表达式，您可以更改这些正则表达式。因此，它（再次，在我看来）更加优雅。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T13:41:25.910

如果您的意思是您有一个 CSV 字符串，例如

```
"\"string1\", \"string2\", \"string3\"" 
```

那么你不需要一个像这样微不足道的正则表达式，你可以使用[String.Split](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)和一些 LINQ：

```
var values = csvString.Split(',').Select(s => s.Replace("\"", "").Trim()); 
```

# wpf - 获取颜色位置的深度，Kinect SDK

> ID：11902593
> 
> 赞同：2
> 
> 时间：2012-08-10T13:22:58.500
> 
> 标签：wpf, kinect, emgucv

我正在寻找方法（尽可能快地）从 Kinect 相机中获取颜色像素的相应深度。

我找到了 MapDepthFrameToColorFrame 函数。但这只会给我某个深度位置的颜色，我想要相反的颜色。

我想要这个的原因是我将能够单击 RGB 图像上的一个位置并获得该像素的位置。

有没有办法比遍历 MapDepthFrameToColorFrame 的所有结果更快？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T13:42:42.807

这里的问题是，由于相机和红外发射器的定位方式，并非每个颜色像素都会分配给它一个深度。如果您面对 Kinect 并将左手举在胸前，则您的胸部有一部分不会有深度数据，因为您的手挡住了 IR 发射器。由于 IR 摄像头更接近 RGB 摄像头，因此从深度到 RGB 通常不会出现同样的问题；如果 Kinect 可以看到 IR，它就可以看到 RGB。

回答您的问题：我不知道有任何方法可以做到这一点，因为 RGB 索引没有为您提供足够的信息来计算深度索引。您是否尝试过使用 MapDepthFrameToColorFrame 并像您提到的那样循环？除非您像疯子（或计算机）一样点击，否则我敢打赌该应用程序将能够很好地处理这个问题。在您确定它会导致问题之前，我不会花时间尝试优化它。

如果您愿意，您可以尝试通过检查函数返回的颜色坐标的子集来减小循环的大小。获取 RGB 像素 (x, y) 的坐标，然后检查 (x,y) 附近某处的深度坐标。也许 (x-20, y-20) 到 (x+20, y+20)。如果找不到它，您可以检查阵列的其余部分。对此进行一些测试，您可能会找到一个很好的范围来检查请求的像素，在大多数情况下您会受到打击，而不会出现很多循环。

# jquery - 在 AngularJS 中使用同位素（ng-repeat）

> ID：11902596
> 
> 赞同：16
> 
> 时间：2012-08-10T13:23:15.957
> 
> 标签：jquery, angularjs, jquery-isotope

我正在尝试使用角度加载 div 以提供给同位素进行布局。出于某种原因，我不能使用 ng-repeat 来创建 div。当我做类似的事情时，它工作正常：

[聚合.html]

```
<div class="mygrid" iso-grid>
    <div class="item">myitem</div>
</div> 
```

[控制器.js]

```
module.directive('isoGrid', function () {
    return function (scope, element, attrs) {
        element.isotope({
            itemSelector: '.item'
        });
    };
});

module.controller('aggViewport', ['$scope', '$location', function ($scope, $location) {
    $scope.cards = [{
        "ID": "myid",
        "class": "cardListTile",
        "badge": "1"
    } {
        "ID": "myid2",
        "class": "cardListTile",
        "badge": "2"
    }]
}]); 
```

虽然上述工作正常，但当我尝试从角度使用 ng-repeat 时，div 似乎变得不可见（它们在 dom 中，但我看不到它们）。我试过调用 isotope('reloadItems') 和 isotope('reLayout')，但似乎没有帮助。

[聚合.html]

```
<div class="mygrid" iso-grid ng-repeat="card in cards">
    <div class="item">myitem</div>
</div> 
```

如何使用 ng-repeat ？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-10T15:45:16.757

尝试 $watching 列表变量（卡片），每当它发生变化时重新应用同位素。我认为您的问题是同位素在填充 ng-repeat 之前正在运行。

快速示例：

```
scope.$watch(attrs.ngModel, function() {
  elm.isotope();
}); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-06-13T21:39:55.487

我使用 masonry 指令 + ng-animate 为进入/离开动画实现了类似的东西，这是一个仅 CSS 动画的演示（带有 chrome 供应商前缀的 CSS）：

[http://jsfiddle.net/g/3SH7a/](http://jsfiddle.net/g/3SH7a/)

指令：

```
angular.module('app', [])
.directive("masonry", function () {
    var NGREPEAT_SOURCE_RE = '<!-- ngRepeat: ((.*) in ((.*?)( track by (.*))?)) -->';
    return {
        compile: function(element, attrs) {
            // auto add animation to brick element
            var animation = attrs.ngAnimate || "'masonry'";
            var $brick = element.children();
            $brick.attr("ng-animate", animation);

            // generate item selector (exclude leaving items)
            var type = $brick.prop('tagName');
            var itemSelector = type+":not([class$='-leave-active'])";

            return function (scope, element, attrs) {
                var options = angular.extend({
                    itemSelector: itemSelector
                }, attrs.masonry);

                // try to infer model from ngRepeat
                if (!options.model) { 
                    var ngRepeatMatch = element.html().match(NGREPEAT_SOURCE_RE);
                    if (ngRepeatMatch) {
                        options.model = ngRepeatMatch[4];
                    }
                }

                // initial animation
                element.addClass('masonry');

                // Wait inside directives to render
                setTimeout(function () {
                    element.masonry(options);

                    element.on("$destroy", function () {
                        element.masonry('destroy')
                    });

                    if (options.model) {
                        scope.$apply(function() {
                            scope.$watchCollection(options.model, function (_new, _old) {
                                if(_new == _old) return;

                                // Wait inside directives to render
                                setTimeout(function () {
                                    element.masonry("reload");
                                });
                            });
                        });
                    }
                });
            };
        }
    };
}) 
```

# google-analytics - Google Analytics API 返回usageLimitsuserRateLimitExceededUnregUser

> ID：11902597
> 
> 赞同：2
> 
> 时间：2012-08-10T13:23:17.867
> 
> 标签：google-analytics, web-analytics

Google Analytics API 总是返回正确的数字，但现在，以下错误更频繁地发生：

*GAPI：请求报告数据失败。错误：“usageLimitsuserRateLimitExceededUnregUser Rate Limit Exceeded. Please sign up https://code.google.com/apis/console”*

正如我们所知，谷歌分析 API 每天返回 50k 免费报价，但我的脚本每天产生的请求不超过 1k，但是，我收到了这个错误。

我已经从 code.google.com/apis/console 激活了“谷歌分析”，但是当我查看“配额”选项卡时，仍然有计费状态 = 计费未启用。

我正在使用 php 接口（http://code.google.com/p/gapi-google-analytics-php-interface/）

任何帮助将不胜感激..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T07:06:45.690

我遇到了同样的错误，并通过故意将请求速率降低一两秒来摆脱它。

我的假设（如果我错了，请纠正我）是当客户端发出请求非常快时也会出现此错误。

我的逻辑是这样的：

1.发出请求 2.
处理响应中的数据
3.等待一两秒钟（让谷歌服务器喘气..
哈夫哈夫......：P） 4.重复步骤 1-4 直到任务完成。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-21T14:44:32.130

我已经通过使用 google 的 (google-api-php-client) php 库解决了这个问题。

# c++ - MsiGetTargetPath C++

> ID：11902603
> 
> 赞同：1
> 
> 时间：2012-08-10T13:23:48.150
> 
> 标签：c++, visual-studio-2010, windows-installer

任何人都可以帮助我吗？

我正在使用 VS2010，C++ 自定义操作项目。尝试使用以下方法从我的 MSI 获取安装位置：

```
MsiGetTargetPath 
```

但是我不完全理解如何使用它以及他们在 MDSN 上谈论的缓冲区。任何人都可以告诉我或指出正确的方向，因为我在互联网上搜索无济于事。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T13:37:31.397

缓冲区处理是 C 和 C++ 编程的核心主题。我会先阅读它。这是我能在短时间内找到的最好的：

*   [有没有办法将 std::string 传递给接受 char* 并更改其内容的函数？](https://stackoverflow.com/questions/4037474/is-there-any-way-to-pass-a-stdstring-to-a-function-that-accepts-a-char-and-ch)
*   [将 std::string 传递给函数 f(**char)](https://stackoverflow.com/questions/6600725/pass-stdstring-to-a-function-fchar)

一旦你理解了这一点，试着从你正在调用的函数的角度来考虑它。当[调用 MsiGetTargetPath](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370303.aspx)时，假设其他参数都很好，它会计算出路径以查看它和一个尾随的空字符是否适合`*pcchPathBuf`字符。如果合适，它会将路径复制到 指向的 TCHAR 数组`szPathBuf`，更新`*pcchPathBuf`以反映实际大小，然后返回成功。如果它不适合，它会更新`*pcchPathBuf`以反映它需要的大小（不包括尾随的空字符），并返回`ERROR_MORE_DATA`.

所以你的代码需要传递正确的参数，包括一个合理大小的缓冲区。我会开始，`MAX_PATH`然后只需要在一些非常不寻常的情况下增加。请注意，以下代码在所有已知实现中利用了 std::wstring 的实际布局，但直到 C++11 规范才保证。

```
// assumes hInstall and strDirectory are defined and correct

std::wstring strPath; // assuming UNICODE here; use std::string if _MBCS instead
DWORD cchPath = MAX_PATH;
strPath.resize(cchPath);
DWORD nResult = ::MsiGetTargetPath(hInstall, strDirectory.c_str(), &strPath[0], &cchPath);
if (nResult == ERROR_MORE_DATA)
{
    strPath.resize(++cchPath); // allocate extra spot for trailing null character
    nResult = ::MsiGetTargetPath(hInstall, strDirectory.c_str(), &strPath[0], &cchPath);
}

if (nResult == ERROR_SUCCESS)
    strPath.resize(cchPath);
else
    strPath.clear(); 
```

# java - 如何获取 Hotmail 验证码图片

> ID：11902604
> 
> 赞同：4
> 
> 时间：2012-08-10T13:23:48.323
> 
> 标签：java, httpwebrequest, captcha, recaptcha, mvcrecaptcha

我在尝试读取 Hotmail 验证码图像时遇到问题，当我将验证码图像 url 放入浏览器时，它会在浏览器中显示错误消息：

```
404 - File or directory not found.
The resource you are looking for might have been removed, had its name changed, or is temporarily unavailable. 
```

**验证码图片网址：**

```
https://client.hip.live.com/GetHIPData?hid=.c996cc5c878e4bed81dae63301fe752b&fid=779b48a5-cdf0-41c7-acd5-d1a825e53e6c&type=visual&hdid=0&rnd=efbd9f216e1e49f385e6a977dbd89051 
```

有什么方法可以阅读 Hotmail 的验证码图像...？任何形式的帮助将不胜感激。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:38:04.570

先到这里：

```
https://client.hip.live.com/GetHIP/GetHIPAMFE/HIPAMFE?id=15022&mkt=en-US&type=visual&fid=937ba765-d38e-4608-810d-fe839c01a68d 
```

这将返回您的 JavaScript。从此 javascript 中提取`imageurl:'https://....'`属性。然后向这个 url 发送请求。仅限单次使用。如果您需要获取另一个图像，则必须向第一个 url 发送另一个请求并获取新的验证码图像 url。

显然不要忘记这与官方信息相去甚远。我通过分析网站的运作方式获得了它。不要依赖那个。如果微软决定改变他们的验证码图像生成过程，它可能随时中断。

# c# - Windows Form 整体绝对最大化

> ID：11902609
> 
> 赞同：1
> 
> 时间：2012-08-10T13:23:54.537
> 
> 标签：c#, forms, maximize, topmost

我有一个问题要绝对将我的窗口放在前面，但是当我启动一个打印对话框时，我无论如何都找不到将我的窗口放在前面：我必须将我的窗口放在打印对话框上执行 TopMost，但出现任务栏虽然是隐藏的。

我的表单窗口中的代码将其最大化并整体放置：

```
this.StartPosition = System.Windows.Forms.FormStartPosition.Manual;
this.FormBorderStyle = System.Windows.Forms.FormBorderStyle.None;
this.WindowState = System.Windows.Forms.FormWindowState.Maximized;
this.TopMost = true; 
```

启动打印对话框的代码：

```
PrinterSettings printerSettings = new PrinterSettings();
IntPtr hDevMode = printerSettings.GetHdevmode(printerSettings.DefaultPageSettings);
IntPtr pDevMode = GlobalLock(hDevMode);
int sizeNeeded = DocumentProperties(IntPtr.Zero, IntPtr.Zero, printerSettings.PrinterName, IntPtr.Zero, pDevMode, 0);
IntPtr devModeData = Marshal.AllocHGlobal(sizeNeeded);

DocumentProperties(IntPtr.Zero, IntPtr.Zero, printerSettings.PrinterName, devModeData, pDevMode, 14);
// <--- Here the print dialog appears and the thread stops till I close the dialog

GlobalUnlock(hDevMode);
printerSettings.SetHdevmode(devModeData);
printerSettings.DefaultPageSettings.SetHdevmode(devModeData);
GlobalFree(hDevMode);
Marshal.FreeHGlobal(devModeData); 
```

这是我隐藏任务栏的代码：

```
public class Taskbar
{
    [System.Runtime.InteropServices.DllImport("user32.dll")]
    private static extern int FindWindow(string className, string windowText);

    [System.Runtime.InteropServices.DllImport("user32.dll")]
    private static extern int ShowWindow(int hwnd, int command);

    private const int SW_HIDE = 0;
    private const int SW_SHOW = 1;

    public Taskbar()
    {
    }

    protected static int Handle
    {
        get
        {
            return FindWindow("Shell_TrayWnd", "");
        }
    }

    public static void Show()
    {
        ShowWindow(Handle, SW_SHOW);
    }

    public static void Hide()
    {
        ShowWindow(Handle, SW_HIDE);
    }
} 
```

我尝试了这段代码，在“this.TopMost = true;”之后也在我的表单中调用了 SetWinFullScreen 最大化形式，但它也不起作用：

```
public class WinApi
{
    [DllImport("user32.dll", EntryPoint = "GetSystemMetrics")]
    private static extern int GetSystemMetrics(int which);

    [DllImport("user32.dll")]
    private static extern void
        SetWindowPos(IntPtr hwnd, IntPtr hwndInsertAfter,
                     int X, int Y, int width, int height, uint flags);        

    private const int SM_CXSCREEN = 0;
    private const int SM_CYSCREEN = 1;
    private static IntPtr HWND_TOP = IntPtr.Zero;
    private const int SWP_SHOWWINDOW = 64; // 0×0040

    public static int ScreenX
    {
        get { return GetSystemMetrics(SM_CXSCREEN);}
    }

    public static int ScreenY
    {
        get { return GetSystemMetrics(SM_CYSCREEN);}
    }

    public static void SetWinFullScreen(IntPtr hwnd)
    {
        SetWindowPos(hwnd, HWND_TOP, 0, 0, ScreenX, ScreenY, SWP_SHOWWINDOW);
    }
} 
```

在所有情况下，当启动打印对话框时，会出现任务栏并且用户可以单击它，因为它位于所有内容的前面。

有没有办法在后台启动此打印对话框或将我的表单绝对放在最上面（不出现任何任务栏或对话框）？

编辑：问题出在这一行：

```
DocumentProperties(IntPtr.Zero, IntPtr.Zero, printerSettings.PrinterName, devModeData, pDevMode, 14); 
```

此行启动打印对话框，然后出现任务栏（隐藏或不隐藏）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T02:19:09.970

此链接对于接近解决该问题很有用： [Hide Start Orb on Vista / Win 7 in C#](https://stackoverflow.com/questions/1165879/hide-start-orb-on-vista-win-7-in-c-sharp?lq=1)

按照链接的步骤，我添加到我的任务栏类：

```
[System.Runtime.InteropServices.DllImport("user32.dll")]
private static extern IntPtr FindWindowEx(
           IntPtr parentHwnd,
           IntPtr childAfterHwnd,
           IntPtr className,
           string windowText);

public static void Show()
{
        ShowWindow(Handle, SW_SHOW);
        ShowWindow(FindWindowEx(IntPtr.Zero, IntPtr.Zero, (IntPtr)0xC017, null), SW_SHOW);
}

public static void Hide()
{
        ShowWindow(Handle, SW_HIDE);
        ShowWindow(FindWindowEx(IntPtr.Zero, IntPtr.Zero, (IntPtr)0xC017, null), SW_HIDE);
} 
```

并使用 TopMost。然后，当对话框出现时，我控制了这一时刻并将我的应用程序快速**集中**在“弹出”前面，但这次没有显示任务栏/Windows 图标，用户什么也不能点击。

不是完美的解决方案，但对我有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:30:13.420

打印对话框不是表单，它是从表单继承的控件，如文本框和组合框。所以你不应该期望 topmost 申请。下面的重点是我的。

> 最顶层表单是与**所有其他（非最顶层）表单重叠的表单**，即使它不是活动表单或前景表单。最顶层的表单始终显示在桌面上窗口 z 顺序的最高点。您可以使用此属性来创建始终显示在应用程序中的表单，例如查找和替换工具窗口。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.form.topmost.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.topmost.aspx)

# java - 使用 Akka 递归递减 int 值（示例）

> ID：11902611
> 
> 赞同：0
> 
> 时间：2012-08-10T13:23:55.320
> 
> 标签：java, recursion, akka

下面的代码中有一个错误（尝试使用 Akka 递归）。算法停止并且进程（Java 应用程序）在 JVM 中永远执行，除非我从系统监视器中杀死它。我相信修复它应该是一个非常简单的技巧。

[这是一个](http://doc.akka.io/docs/akka/2.0.1/intro/getting-started-first-java.html)关于如何使用 Akka 进行并行 Pi 近似的示例。下面是展示 Akka 如何与递归 Actor 一起工作的尝试。所以主人创建了 2 个工人，向他们发送相同的消息以减少一些`int`值。他们并行执行此操作并检查整数值是否不等于 0。如果是，则将结果整数值 (0) 返回给 master，或者他们都再次创建 2 个 worker 并向它们发送最近递减的值。如果这棵树的深度大于 1（整数大于 1 值），然后工作人员将他们的结果发送给调用他们的工作人员，最后只发送给主人。嗯，这真的很简单（Decrement、NewIntValue 和 FinalIntValue 本质上是相同的，它们有不同的名称以使其更易于理解）：

```
import akka.actor.ActorRef;
import akka.actor.ActorSystem;
import akka.actor.Props;
import akka.actor.UntypedActor;
import akka.actor.UntypedActorFactory;
import akka.routing.RoundRobinRouter;

public class StackOverFlow {

    public static void main(String[] args) {
        StackOverFlow rid = new StackOverFlow();
        rid.start(2);
    }

    public void start(final int workersNumber) {
        // create an Akka system
        ActorSystem system = ActorSystem.create("IntDec");
        // create the result listener, which will print the result and shutdown the system
        final ActorRef listener = system.actorOf(new Props(Listener.class), "listener");
        // create the master
        ActorRef master = system.actorOf(new Props(new UntypedActorFactory() {
            public UntypedActor create() {
                return new Master(workersNumber, listener);
            }
        }), "master");
        // start the computation
        master.tell(new Compute());
    }

    static class Compute {}

    static class Decrement {
        private final int intValue;
        public Decrement(int value) {
            this.intValue = value;
        }
        public int getValue() {
            return intValue;
        }
    }

    static class NewIntValue {
        private final int intValue;
        public NewIntValue(int value) {
            intValue = value;
        }
        public int getValue() {
            return intValue;
        }
    }

    static class FinalIntValue {
        private final int intValue;
        public FinalIntValue(int value) {
            intValue = value;
        }
        public int getValue() {
            return intValue;
        }
    }

    public static class Worker extends UntypedActor {

        private int resultsNumber = 0;
        private final int messagesNumber = 2;

        private final ActorRef workerRouter;

        public Worker(final int workersNumber) {

            workerRouter = getContext().actorOf(
                    new Props(new UntypedActorFactory() {
                        public UntypedActor create() {
                            return new Worker(workersNumber);
                        }
                    }).withRouter(
                        new RoundRobinRouter(workersNumber)
                    ), "workerRouter");

        }

        public void onReceive(Object message) {

            if (message instanceof Decrement) {
                // get and decrement the int value
                Decrement job = (Decrement) message;
                int intValue = job.getValue();
                System.out.println("\tWorker:Decrement " + intValue);
                intValue--;
                if (intValue == 0) {
                    // we are finished
                    getSender().tell(new NewIntValue(intValue), getSelf());
                    // stop this actor and all its supervised children
                    getContext().stop(getSelf());
                } else {
                    for (int i = 0; i < messagesNumber; i++) {
                        // notify a worker
                        workerRouter.tell(new Decrement(intValue), getSelf());
                    }
                }

            } else if (message instanceof NewIntValue) {

                NewIntValue newInt = (NewIntValue) message;
                int intValue = newInt.getValue();

                System.out.println("\tWorker:NewIntValue!!! " + intValue);

                resultsNumber++;
                if (resultsNumber == messagesNumber) {
                    // we are finished
                    getSender().tell(new NewIntValue(intValue), getSelf());
                    // stop this actor and all its supervised children
                    getContext().stop(getSelf());
                }

            } else unhandled(message);
        }

    }

    public static class Master extends UntypedActor {

        private int resultsNumber = 0;
        private final int messagesNumber = 2;

        private int intValue = 2;

        private final ActorRef listener;
        private final ActorRef workerRouter;

        public Master(final int workersNumber, ActorRef listener) {

            this.listener = listener;

            workerRouter = getContext().actorOf(
                    new Props(new UntypedActorFactory() {
                        public UntypedActor create() {
                            return new Worker(workersNumber);
                        }
                    }).withRouter(
                        new RoundRobinRouter(workersNumber)
                    ), "workerRouter");

        }

        public void onReceive(Object message) {

            if (message instanceof Compute) {

                System.out.println("\tMaster:Compute " + intValue);

                System.out.println(
                        "\n\tInitial integer value: " + intValue);

                for (int i = 0; i < messagesNumber; i++) {
                    workerRouter.tell(new Decrement(intValue), getSelf());
                }

            } else if (message instanceof NewIntValue) {

                NewIntValue newInt = (NewIntValue) message;
                intValue = newInt.getValue();

                System.out.println("\tMaster:NewIntValue " + intValue);

                resultsNumber++;
                if (resultsNumber == messagesNumber) {
                    // send the result to the listener
                    listener.tell(new FinalIntValue(intValue), getSelf());
                    // stop this actor and all its supervised children
                    getContext().stop(getSelf());
                }

            } else unhandled(message);

        }

    }

    public static class Listener extends UntypedActor {

        public void onReceive(Object message) {

            if (message instanceof FinalIntValue) {
                FinalIntValue finalInt = (FinalIntValue) message;
                System.out.println(
                        "\n\tFinal integer value: " + finalInt.getValue());
                getContext().system().shutdown();
            } else {
                unhandled(message);
            }

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T07:00:14.757

1.  添加`private ActorRef sender;`到`Worker`班级；
2.  `sender = getSender();`在消息的开头添加`Decrement`；
3.  更改`getSender()`为类`sender`的`NewIntValue`方法 `Worker`；

# hibernate - Grails/hibernate Eager Fetching 似乎被忽略了

> ID：11902612
> 
> 赞同：0
> 
> 时间：2012-08-10T13:23:56.340
> 
> 标签：hibernate, grails

我正在解决一些似乎与重复调用数据库有关的性能问题（几千个对象加载每个对象都有几十个子对象）。

问题似乎是，尽管急切地加载关系（并通过记录休眠 SQL 确认对象实际上是急切地加载的），但它们仍然每次都从数据库中获取。

**我的直觉是问是否有办法告诉 grails/hibernate 使用内存中的对象，而不是当我确定它已经在内存中时返回数据库？**

不过，这可能是个错误的问题。

* * *

举一个具体的例子来说明正在发生的事情。我的域类 Parent 定义：

```
static hasMany = [children: Child]
static mapping = {children fetch:'select'} 
```

可能是 fetch:'eager'... 我尝试了两种方法，不确定哪个生成了下面的日志结果，但它显然是急切地获取数据。

我做的第一件事是：

def results = Parent.executeQuery("SELECT distinct p from Parent p WHERE ... complex where 子句")

查看日志，这并没有急切地加载子关系，但这并不是非常意外，也不是真正的杀手。接下来我遍历父母：

```
for(Parent parent : results)
{  blah blah } 
```

循环的每次迭代都表明 hibernate 正在通过 id 查询 Parent p 并且似乎正在急切地加载所有子关系。日志片段：

```
select 
parent0_.id as id4_4_, 
parent0_.version as version4_4_, 
parent0_.date_created as date3_4_4_,
child1_.parent_id as parent6_6_, 
child1_.id as id6_, 
child1_.child_idx as idx9_6_, 
child1_.id as id22_1_, 
child1_.version as version22_1_,
...continues for all fields. 
```

注意：我不知道为什么它两次映射 id 字段。

伟大的！它急切地加载我需要的子对象！在上面的父循环中，然后我遍历子循环：

```
for(Parent parent : results)
{  
  for(Child child : parent.children)
  { blah blah }
} 
```

这就是问题所在。内部循环的每次迭代，都会记录另一个休眠查询，按 id 加载对象。日志片段：

```
select child0_.id as id22_1_, 
child0_.version as version22_1_, 
child0_.parent_id as parent6_22_1_, 
child0_.sequence_number as sequence8_22_1_,
...and all the rest 
```

这些不必要的负载绝对会扼杀我的性能（至少，这似乎是瓶颈，我不能 100% 确定），因为它正在执行数千次读取。非常感谢有关如何正确使用内存对象或加载数据的不同方式的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:42:10.423

我发现设置`fetch`不足以`mapping`让 grails 使用急切获取。尽管 gorm 手册中没有提到它，但[`fetchMode`](http://grails.org/doc/2.1.0/ref/Domain%20Classes/fetchMode.html)似乎还有另一个属性是必要的。尝试将此添加到您的域类：

```
static fetchMode = [children: 'eager'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:33:28.597

对于那些意识到我一定做错事的人来说，这应该不足为奇……我做错了什么。该对象正在被缓存，但在子例程中调用了 parent.refresh()。似乎刷新正在执行多个查询以加载子对象，一旦删除刷新我不再看到额外的查询，但似乎刷新应该执行与初始加载相同的单个查询而不是查询子对象。我的代码中可能有其他问题，我没有完全调试。

# python - 如何将列表中的一个项目与该列表中的所有其他项目进行比较，python

> ID：11902613
> 
> 赞同：8
> 
> 时间：2012-08-10T13:23:58.603
> 
> 标签：python

我有一个这样的列表：

```
 all = [[a,b,c,d],[r,d,g,s],[e,r,a,b],[p,o,i,u]....(more similar items)] 
```

我想得到其中有多少项目是相同的，所以我需要比较`all[0]`，`all[1],all[2]...all[(len(all)-1)]`然后用`all[1]`比较`all[2],all[3]...all[(len(all)-1)]`，然后`all[2]`比较`all[3],all[4],...all[(len(all)-1)]`

我试过这样的事情：

```
 for i in range(len(all)):
     print len(all[i] & all[i+1]) ##how many identical items shared by all[0] and all[1]
     print len(all[i+1] & all[i+2]) 
```

但不知道如何继续，我想要得到的结果是：

```
item1 has 3 same values with item2, 
      has 4 same values with item3,
      has 1 same values with item4....

item2 has 3 same values with item1,
      has 2 same values with item3,
      etc 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T13:32:57.303

这里最简单的算法是an^2。只需循环两次您的列表：

```
for x, left in enumerate(all):
    for y, right in enumerate(all):
        common = len(set(left) & set(right))
        print "item%s has %s values in common with item%s"%(x, common, y) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T13:41:08.657

套装是要走的路。. .

```
 all = [[1,2,3,4],[1,2,5,6],[4,5,7,8],[1,8,3,4]]
set_all = [set(i) for i in all]
for i in range(len(all)):
    for j in range(len(all)):
        if i == j: 
            continue
        ncom = len(set_all[i].intersection(set_all[j]))
        print "List set %s has %s elements in common with set %s" % (i, ncom, j)

List set 0 has 2 elements in common with set 1
List set 0 has 1 elements in common with set 2
List set 0 has 3 elements in common with set 3
List set 1 has 2 elements in common with set 0
List set 1 has 1 elements in common with set 2
List set 1 has 1 elements in common with set 3
List set 2 has 1 elements in common with set 0
List set 2 has 1 elements in common with set 1
List set 2 has 2 elements in common with set 3
List set 3 has 3 elements in common with set 0
List set 3 has 1 elements in common with set 1
List set 3 has 2 elements in common with set 2 
            回答 #3

赞同：1

时间：2012-08-10T13:34:31.307

基本上你想要做的是计算每个列表中的元素集与其他列表的交集的长度。试试这个：

```
a = [['a','b','c','d'],['r','d','g','s'],['e','r','a','b'],['p','o','i','u']]

for i in range(len(a)):
   for j in range(len(a)):
      print "item%d has %d same values as item%d" % ( i, len(set(a[i]) & set(a[j])) ,j ) 
```

输出格式并不完全是您想要的，但您明白了。

            回答 #4

赞同：0

时间：2012-08-10T13:58:02.530

如果您正在寻找最短的答案，因为您像我一样是懒惰的打字员:)

```
>>> my_list = [['a','b','c','d'],['r','d','g','s'],['e','r','a','b'],['p','o','i','u']]
>>> for i, sub_list in enumerate(my_list):
...     print 'item %d shares with %r'%(i, map(lambda a, b: len(set(a) & set(b)), sub_list, my_list))
...
item 0 shares with [1, 0, 0, 0]
item 1 shares with [0, 1, 0, 0]
item 2 shares with [0, 1, 1, 0]
item 3 shares with [0, 0, 0, 1] 
```

```

# python - 如何在 GAE 中的 Python 中执行一次性初始化？

> ID：11902615
> 
> 赞同：2
> 
> 时间：2012-08-10T13:24:06.440
> 
> 标签：python, google-app-engine

我是**GAE/Python**新手。我有许多系统和应用程序变量，我想设置一次并将它们应用于`.py`我的应用程序中的所有文件。谁能告诉我我是如何做到的*（有一个地方只在应用程序启动时运行一次）*？有点像在其他应用程序中对配置文件所做的事情。

我正在运行 Python 2.7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T23:21:13.940

另一种方法是使用 lib_config 来定义和覆盖您自己的常量和挂钩。 [https://developers.google.com/appengine/docs/python/tools/appengineconfig](https://developers.google.com/appengine/docs/python/tools/appengineconfig)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T14:36:11.150

On GAE, modules are loaded just once in the runtime ([they are cached](https://developers.google.com/appengine/docs/python/runtime#App_Caching)), so you can create one module with all initializations, globals etc. If you use threadsafe=true in you app.yaml, make sure you handle these globals correctly (in thread safe way).

Note, that on new instance the initialization is performed again. If your init is very long process (seconds), the good way to go is to precompute it, store in the datastore and load it in the init module from datastore again.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T15:01:04.763

在 appengine 上使用 2.7 的推荐方法之一是在 app.yaml 中设置环境变量。

[https://developers.google.com/appengine/docs/python/config/appconfig#env_variables](https://developers.google.com/appengine/docs/python/config/appconfig#env_variables)

（正如此处发布的其他答案，这不是唯一的方法。）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-11T06:26:53.467

如果我很好地理解了您的查询，我认为您可以在 GAE 使用[预热请求](https://stackoverflow.com/questions/8235716/how-does-the-warmup-service-work-in-python-google-app-engine)。

在这种情况下，您实际上可以初始化您定期需要的所有 var 和方法。

# emacs - Org-Mode - 如何使用 org-capture 创建新文件？

> ID：11902620
> 
> 赞同：7
> 
> 时间：2012-08-10T13:24:15.593
> 
> 标签：emacs, org-mode

我想创建一个 org-capture 模板，该模板为 emacs org-mode 中的捕获创建一个动态文件名。

我希望文件名采用以下形式： (format-time-string "%Y-%m-%d") "-" (prompt for a name) ".txt"

示例：2012-08-10-MyNewFile.txt

基于[这个](https://stackoverflow.com/questions/8614642/how-to-type-a-dynamic-file-entry-for-org-capture)答案，我知道如何动态创建文件名称以包含日期：

```
`(defun capture-report-date-file (path)
(expand-file-name (concat path (format-time-string "%Y-%m-%d") ".txt")))

'(("t" "todo" entry (file (capture-report-date-file  "~/path/path/name"))
"* TODO"))) 
```

这允许我创建一个文件 2012-08-10.txt 并在第一行插入 * TODO

如何添加提示以完成文件名？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-10T13:59:28.007

您必须使用`(read-string ...)`in`capture-report-data-file`动态生成文件名。

```
(defun capture-report-date-file (path)
  (let ((name (read-string "Name: ")))
    (expand-file-name (format "%s-%s.txt"
                              (format-time-string "%Y-%m-%d")
                              name) path)))

'(("t"
   "todo"
   entry
   (file (capture-report-date-file  "~/path/path/name"))
   "* TODO"))) 
```

这将在捕获时提示输入文件名，然后打开将创建捕获缓冲区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-12T07:57:47.793

我使用下面的模板和函数来创建新文件。

```
 (defun psachin/create-notes-file ()
    "Create an org file in ~/notes/."
    (interactive)
    (let ((name (read-string "Filename: ")))
      (expand-file-name (format "%s.org"
                                  name) "~/notes/")))

   (setq org-capture-templates
     '(("n" "Notes" entry
        (file psachin/create-notes-file)
       "* TITLE%?\n %U"))) 
```

# jsp - 如何在运行的jsp的源页面中停止显示隐藏字段

> ID：11902622
> 
> 赞同：0
> 
> 时间：2012-08-10T13:24:17.780
> 
> 标签：jsp

JSP 页面包含隐藏字段，在 Web 浏览器中，如果我正在检查该特定页面的视图源，那么它会显示隐藏字段。

我希望这个隐藏字段不应该显示在源页面“查看源页面”中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:26:08.430

然后不要编码。就这么简单。

另一种选择是将值作为属性存储在会话或请求中。

# python - Python Django 如何旋转图像并去除黑色？

> ID：11902626
> 
> 赞同：5
> 
> 时间：2012-08-10T13:24:30.737
> 
> 标签：python, django, image

我正在尝试旋转图像，但我想保持图像的大小。例如在下面的示例图像中，我想看到一个完整的矩形，并且在旋转后没有黑色背景色。

请帮助我，我将不胜感激。

现在我的代码是：

```
src_im = Image.open("test.gif")
im = src_im.rotate(30)
im.save("result.gif") 
```

![在此处输入图像描述](../Images/f28db4743966a609b67a1f7b309aab75.png) ![在此处输入图像描述](../Images/aefaa9537d72eeb504fb0d8b8d87a1a3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:28:23.997

要自动调整大小，您需要`expand`kwarg：

```
src_im = Image.open("test.gif")
im = src_im.rotate(30, expand=True)
im.save("result.gif") 
```

正如[PIL 文档](http://www.pythonware.com/library/pil/handbook/image.htm#Image.rotate)所解释的：

> expand 参数，如果为真，表示输出图像应该足够大以容纳旋转的图像。如果省略或为 false，则输出图像与输入图像具有相同的大小。

在黑色背景上，您需要在保存 GIF 图片时[指定透明颜色：](http://nadiana.com/pil-tips-converting-png-gif#Saving_GIF_with_transparency)

```
transparency = im.info['transparency'] 
im.save('icon.gif', transparency=transparency) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-05T15:09:19.460

试试这个：

```
src_im = Image.open("test.jpg")
im = src_im.rotate(30,fillcolor='white', expand=True)
im.save("result.gif") 
```

结果来了：

[![测试.jpg](../Images/245b83b54069f9235d5840246e71c3d5.png)](https://i.stack.imgur.com/NRxEg.jpg) [![结果.gif](../Images/6036ed62cbaf8864e13becf3a5139e62.png)](https://i.stack.imgur.com/oBmgN.gif)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T13:28:13.783

您尚未设置新图像的大小 - 如果您仅旋转 30 度，则图像需要扩展...

从[http://effbot.org/imagingbook/image.htm](http://effbot.org/imagingbook/image.htm)页面：

> expand 参数，如果为真，表示输出图像应该足够大以容纳旋转的图像。如果省略或为 false，则输出图像与输入图像具有相同的大小。

所以尝试（这是在未经测试的浏览器中输入的）：

```
src_im = Image.open("test.gif")
im = src_im.rotate(30, expand=True)
im.save("result.gif") 
```

对于黑色背景，这有点棘手 - 因为您不是旋转 90 度，所以正方形的一个区域需要包含“某些东西”（尽管您可能想要透明）。看看这个答案：[使用 PIL 在 python 中旋转并将扩展参数设置为 true 时指定图像填充颜色](https://stackoverflow.com/questions/5252170/specify-image-filling-color-when-rotating-in-python-with-pil-and-setting-expand)

祝你好运！

# java - 使用 Selenium 设置自动化测试框架

> ID：11902627
> 
> 赞同：1
> 
> 时间：2012-08-10T13:24:38.967
> 
> 标签：java, testing, architecture, selenium, webdriver

我正在处理每周至少一次更新（添加新功能、更改内容等）的大型网站。然而，即使有测试，也永远不会像应有的那样彻底。所以一周前我开始研究自动化测试和硒。

我读到，如果你想做对，不要仅仅依赖 selenium ide。对测试进行编程提供了更多选择。我对第三方 PHP 绑定完全不满意，所以我很快跳到使用 java 来编写测试。

现在我的问题围绕着如何巧妙地设置将运行测试的系统。我的想法如下：

*   测试将/应该是完全自主的
*   尽管如此，我还是希望有某种主应用程序来循环所有这些测试并一个接一个地运行它们
*   主应用程序应该 24/7 运行，或者至少通过 cronjob 或其他东西定期启动
*   测试应该在尽可能多的浏览器（或模拟客户端？？）中运行。到目前为止，我通过各自的 WebDrivers 使用 FF、IE 和 chrome。
*   我想命名一些文件夹并收集该文件夹中的所有测试。然后，主应用程序将只获取该文件夹中的任何内容并运行它。然后每个人都会创建他们的测试并将它们放在那个文件夹中，这样它们就会被添加到队列中
*   如果有一种方法可以使用 selenium ide 创建测试，将它们导出并立即与我的主应用程序一起使用（即它们无需任何修改即可正确运行）。好的，我知道我说过，不建议使用 selenium ide，但我觉得这是一些简单测试的良好开端。此外，没有任何编程知识的人仍然可以使用它。就像现在一样，我将使用 selenium ide 创建的测试导出为“Java / JUnit 4 / WebDriver”并更改一些代码（将 WebDriver obect 作为参数传递）。

这是我的“主要应用程序”的代码：

```
import java.io.File;
import java.io.FilenameFilter;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.util.concurrent.TimeUnit;

import org.openqa.selenium.WebDriver;

public class SeleniumTest {

    public static void main(String[] args) throws 
    ClassNotFoundException, InstantiationException,IllegalAccessException, 
    NoSuchMethodException, SecurityException, IllegalArgumentException, 
    InvocationTargetException {
        String[] drivers = {
                "org.openqa.selenium.firefox.FirefoxDriver",
                "org.openqa.selenium.ie.InternetExplorerDriver",
                "org.openqa.selenium.chrome.ChromeDriver"
        };
        Class params[] = {WebDriver.class};
        String testFolderName = "lookhere";

        while (true) {
            //get all .java files from some folder. those will be the tests to run
            File testFolder = new File(testFolderName);
            FilenameFilter filter = new FilenameFilter() {
                public boolean accept(File dir, String name) {
                    return name.endsWith(".java");
                }
            };
            String[] tests = testFolder.list(filter);
            if (tests == null) {
                System.exit(0);
            }

            for(int i=0; i<drivers.length; i++) {
                //loop through different drivers, instantiate them
                Class webDriverClass = Class.forName(drivers[i]);
                WebDriver driver = (WebDriver) webDriverClass.newInstance();
                driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);

                for (int j=0; j<tests.length; j++) {
                    //loop through tests, instantiate them
                    String currentTestName = tests[j].replace(".java", "");
                    Class testClass = Class.forName(currentTestName);
                    Object test = testClass.newInstance();

                    Method methods[] = testClass.getDeclaredMethods();
                    Method fn;

                    //run every method that starts with "test" (usually just one)
                    //also run setUp, passing the driver object
                    for(int k=0; k<methods.length; k++) {
                        if (methods[k].getName().startsWith("test")) {
                            fn = testClass.getDeclaredMethod(methods[k].getName());
                            fn.invoke(test);
                        } else if(methods[k].getName().equals("setUp")) {
                            fn = testClass.getDeclaredMethod("setUp", params);
                            fn.invoke(test, driver);
                        }
                    }
                }

                driver.quit();
            }
        }
    }
} 
```

正如你可能看到的，我根本不是 java 专家，所以不要被糟糕的形式（比如 main 方法的长抛出声明）推迟。

现在，对于我的问题：

1.  是我上面制定的整个概念，好吗？也就是说：让一个主应用程序运行所有测试和一个队列，我可以在其中动态添加/删除测试。还是有其他关于此的最佳实践方法？你还能想到什么其他概念/架构？
2.  有没有办法用 selenium ide 创建测试，导出它们，它们可以立即与主应用程序一起使用，而无需任何修改？
3.  好的，因为我发布了代码，您可能想发疯并批评它；-) 我愿意接受各种建议。
4.  selenium 是否可以运行不同版本的 IE（或任何浏览器，就此而言）？它可能只是运行我安装的浏览器版本。所以如果我想测试一个浏览器的不同版本，我必须调用远程机器，这意味着硒网格？我现在真的只是在猜测:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:14:52.913

我会使用[TestNG](http://www.testng.org)来编排测试而不是 main 方法，它允许参数化作为前面的答案状态，如果你使用 selenium GRID 2，你可以在许多不同的浏览器/操作系统版本组合上并行运行测试

我还会考虑使用 PageObjects 和[PageFactories](https://code.google.com/p/selenium/wiki/PageFactory)对测试用例进行建模，这将进一步有助于使测试封装和健壮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-14T14:37:09.823

虽然我没有一个完整的解决方案，但从经验中我确实有一些方面需要思考：

*   尽量不要测试整个站点，而是从最重要的（业务）关键部分开始。在具有
    自助服务部分的典型内容网站中，我将专注于自助服务部分。如果
    您的主页上有业务关键部分，您也可以
    为此编写自动化测试。
*   可以打破测试的人应该编写测试。由于开发人员一直在中断测试（通过编写/更改代码），因此开发人员应该编写测试！
*   在我看来，开发人员应该选择自己的工具。在我们的例子中，PHP 开发人员使用 beehat.org 作为网站。自助服务应用程序的 Angular 开发人员使用 Protractor。
*   要测试多个浏览器和版本，请访问 BrowserStack.com。即使使用 browserstack，您仍然需要考虑要测试的浏览器数量。因为每个浏览器/版本都是额外的努力。也许您可以测试大多数用户访问您网站时使用的浏览器（80%？），并让企业接受不努力测试 100% 的风险。当然，这在很大程度上取决于您的商业模式和风险偏好。

希望这在某种程度上有所帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-05-06T06:59:44.993

1.  你的概念是好的，但你如何实现它却很遥远。

2.  您的标准之一是不断变化的网页。对于这个 Selenium IDE 是没有用的。您将经常更新您的测试用例。

3.  关于如何编写测试用例的错误假设。

4.  由于测试用例是在普通机器上运行的，因此很难针对不同版本的浏览器类型运行。每个版本都需要不同的机器。

所以我的解决方案是

1.  如前所述，Testng 驱动测试用例实现。它允许分组和设置/拆卸方法。
2.  如前所述，为每个网页创建一个类，并为您要使用的每个元素创建一个函数。还可以创建帮助程序类来组织您的流程。这会从根本上降低您的维护时间。它只需要更新几个类而不是每个测试用例。

3.  对于调度和概述，我将从 Jenkins 运行测试。这允许您为不同类型的操作系统、浏览器等设置作业。Jenkins 支持在 slave 上运行你的测试用例。因此，每个从站都可以拥有您要测试的每种浏览器的不同版本。

4.  对于真正高级的，我会使用 VMWare 或 KVM 动态创建虚拟机以用作从站。这将允许您在每次开始测试运行时设置您需要的确切类型的服务器。您将为每种类型的操作系统设置创建映像，并在 Jenkins 中启动作业时通过选项决定从哪个映像创建虚拟机。

# oracle - DB2 中的包

> ID：11902629
> 
> 赞同：0
> 
> 时间：2012-08-10T13:24:46.260
> 
> 标签：oracle, db2, package, sql-pl

我想知道 DB2 中是否有像 Oracle 那样的包结构。

对于 DB2，我找到了[存储过程和函数](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=%2Fcom.ibm.db2.luw.apdv.plsql.doc%2Fdoc%2Fc0053914.html)。

在 Oracle 中，可以将多个存储过程和函数组合在一个包中。DB2 中有类似的东西吗？我知道可以启用一些 Oracle 兼容性，但是我们应该在这里使用 IBM 的东西。

[我发现了一篇关于DB2 包](http://www.ibm.com/developerworks/data/library/techarticle/dm-0606chun/index.html)的旧文章，但这似乎与一个完全不同的概念有关。似乎更多的是关于集成第三方库并在数据库之外使用不同的编程语言进行编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:48:25.660

DB2 中似乎有包。

这是 IBM 手册中有关[包](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=%2Fcom.ibm.db2.luw.apdv.plsql.doc%2Fdoc%2Fc0053911.html)的部分的链接。

[这是 IBM 的SQL 过程语言](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=/com.ibm.db2.luw.apdv.sqlpl.doc/doc/c0011916.html)的 IBM 手册部分的链接，您可以在 SQL 过程中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T23:27:07.770

DB2 有[模块](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.apdv.sqlpl.doc/doc/c0053759.html)，相当于 Oracle 包。

在 DB2 中使用 Oracle 兼容性时，`CREATE PACKAGE`语句 DB2 将创建一个模块。

# c# - 删除特定单元格的公式表达式

> ID：11902633
> 
> 赞同：0
> 
> 时间：2012-08-10T13:24:51.947
> 
> 标签：c#, asp.net, excel

我有一个 Excel 文件，我想删除特定单元格上的现有公式。

是否可以从完整列和/或特定单元格中删除公式表达式？如果是这样，如何实现？

谢谢。

# java - 如何在 Clojure 中迭代 TreeMap？

> ID：11902639
> 
> 赞同：1
> 
> 时间：2012-08-10T13:25:03.033
> 
> 标签：java, data-structures, clojure

我使用 Clojure 1.1.0，我想遍历`TreeMap`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T16:54:51.973

此外，您还可以通过宏使用`map`函数和列表推导来处理 a 中的每个条目：`for``java.util.TreeMap`

```
> (def t (new java.util.TreeMap {:a 1 :b 2}))

;; reverse all the pairs
> (map (fn [e] [(val e) (key e)]) t)
([1 :a] [2 :b])

;; same thing, but with destructuring/for
> (for [[k v] t] 
       [v k])
([1 :a] [2 :b]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T13:39:23.260

你可以通过使用`seq`/来做到这一点，`doseq`就像使用普通的 clojure 地图一样

```
(doseq [entry treeMap] (
    prn (key entry) (val entry))
) 
```

`treeMap`你的`TreeMap`实例在哪里。

# asp.net-mvc - 使用带有 html 的 knockout.js 绑定数组数据

> ID：11902640
> 
> 赞同：0
> 
> 时间：2012-08-10T13:25:03.890
> 
> 标签：asp.net-mvc, knockout.js

我有一个使用 knockout.js 映射插件获得的类别模型，见下文

var categoriesViewModel = ko.mapping.fromJS(data);

现在这个 categoriesViewModel 有类似的数据

```
[0]{id=1,name="adventure",description="abc"}

[1]{id=2,name="urban",description="def"}

[2]{id=3,name="romantic",description="ghi"} 
```

我想用以下 html 标记绑定数据

```
 <section class="categories">

                <ul class="categories-list">
                    <li class="urban"><a  href="javascript:;"><span>urban living</span></a></li>
                    <li class="adventure"><a href="javascript:;"><span>adventure</span></a></li>
                    <li class="romantic"><a href="javascript:;"><span>romantic</span></a></li>
                </ul>
                    <div class="descr">
                        <h3 data-bind="text: name"></h3>
                        <p data-bind="text: Description"></p>
                    </div>
</section> 
```

我想要的是在任何标签上鼠标悬停时，相关描述显示在 p 标签中，名称显示在标签中。

我可以使用 javascript 绑定数据

```
ko.applyBindings(categoriesViewModel()[0], $('.categories .descr p').get(0)); 
```

但在这里我使用像 [0] 这样的索引号，这是一种硬编码的方法，所以我不希望这样。我应该怎么做才能动态绑定数据，即没有在 categoriesViewModel() 中指定索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:02:17.880

听起来您需要做的是添加一个“currentItem”或类似于您的视图模型，然后将您的 descr div 绑定到它（使用 with）。然后，您可以将鼠标悬停在您的类别上以更新 currentItem，它*应该*会自动更新。

另外，为什么不为您的类别使用 foreach 绑定？

看看这是否有帮助：http: [//jsfiddle.net/QaYGz/1/](http://jsfiddle.net/QaYGz/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:27:06.603

这有效

```
<section class="categories">
  <ul class="categories-list" data-bind="foreach: categories">
    <li class="urban"><a href="javascript:;"><span data-bind='text: name, event: { mouseover: function(data, event) { $root.updateDescription($data) }, mouseout: function(data, event) { $root.clearDescription() } }'></span></a></li>                    
  </ul>
  <div class="descr">
    <h3 id="idName" data-bind="text: name"></h3>
    <p id="idDescription" data-bind="text: Description"></p>
  </div>
</section>

var json = {"categories":[{"id":"1","name":"adventure","description":"abc"},
{"id":"2","name":"urban","description":"def"},
{"id":"3","name":"romantic","description":"ghi"}]};

var model = ko.mapping.fromJS(json);

model.updateDescription = function(val) {    
    $("#idName").text(val.name());
    $("#idDescription").text(val.description());
}

model.clearDescription = function() {
    $("#idName").text('');
    $("#idDescription").text('');
}

ko.applyBindings(model); 
```

另请参阅[此小提琴](http://jsfiddle.net/gNJN5/165/)进行测试。

# jquery - JQuery if 语句不适用于嵌套元素？

> ID：11902648
> 
> 赞同：1
> 
> 时间：2012-08-10T13:25:32.287
> 
> 标签：jquery, if-statement

嘿家伙，我不明白为什么当我有嵌套元素时我的代码不起作用......

这是我的html代码

```
<head>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="head.js"></script>
    <title>Test Page</title>
    <link rel="stylesheet" type="text/css" href="mock.css"
    />
</head>
<body>
    <div id="subMenu">
        <ul>
            <li class="button boxshadow">
                <a class="subnav" href="#">Test</a>
                <ul>
                    <li class="button boxshadow">
                        <a class="subnav" href="#">Testing</a>
                    </li>
                    <li class="button boxshadow">
                        <a class="subnav" href="#">Tested</a>
                    </li>
                </ul>
            </li>
            <li class="button boxshadow">
                <a class="subnav" href="#">Works</a>
            </li>
            <li class="button boxshadow">
                <a class="subnav" href="#">Other</a>
                <ul>
                    <li class="button boxshadow">
                        <a class="subnav" href="#">Other</a>
                    </li>
                    <li class="button boxshadow">
                        <a class="subnav" href="#">Other</a>
                    </li>
                </ul>
            </li>
            <li class="button boxshadow">
                <a class="subnav" href="#">Last</a>
                <ul>
                    <li class="button boxshadow">
                        <a class="subnav" href="#">Last1</a>
                    </li>
                    <li class="button boxshadow">
                        <a class="subnav" href="#">Last2</a>
                    </li>
                    <li class="button boxshadow">
                        <a class="subnav" href="#">Last3</a>
                    </li>
                    <li class="button boxshadow">
                        <a class="subnav" href="#">Last4</a>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
</body> 
```

我的 CSS

```
.button {
    background: url(images / button.jpeg) no - repeat;
    background - size: 100 % ;
    position: relative;
    display: block;
    float: left;
    width: 165px;
    text - align: center;
    left: 25px;
    margin: 5px 10px;
} 
```

和我的 javascript/jquery

```
$(document).ready(function() {
    $('.button').bind("mouseover", function() {
        $(this).css("box-shadow", "0 0 10px 5px #B6B6B6");

        if ($(this).text().toLowerCase() == "test".toLowerCase()) {
            a = "blah."
            b = "blah."
            c = "blah."
            d = "blah."
            e = "blah."
            f = "blah."

            handle(a, b, c, d, e, f);
        }
        if ($(this).text().toLowerCase() == "works".toLowerCase()) {
            a = "blah"
            b = "blah."
            c = "blah"
            d = "blah"
            e = "Blah"
            f = "Blah"

            handle(a, b, c, d, e, f);
        }

        $(this).bind("mouseout", function() {
            $(this).css("box-shadow", "5px 5px 10px #070707");
        })
    })
})​ 
```

因此，当我的列表中有子项目时，一切正常，例如在“test”中有 2 个子列表，我的 if 语句将在“测试我是否像“works”一样删除子列表时起作用。只要我将子项添加到我的主列表我的 if 语句停止工作，即使我知道鼠标悬停正在工作，因为它正在工作代码的 .css 部分。

任何关于这里发生的事情的想法将不胜感激。我是 JQuery 的新手，并且正在将我的网站移到它而不是 java 脚本。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:33:36.320

我不确定您是否可以直接在字符串上使用 .toLowerCase() ，因为它是 String 对象的函数部分。

因此，由于您对其进行了硬编码，因此您确切地知道它的值，为什么要在等式的右侧使用此函数？

```
if ($(this).text().toLowerCase() == "test") 
```

应该可以解决您的问题，要对其进行测试，您应该尝试 console.log（您的情况）。

**编辑**

根据您的评论和代码，这似乎是选择器和/或 html 结构的问题。您的目标 .button 应用于包含更多 li 项目的 li 。您可以将您的 html“扁平化”到相同的级别，或者更简单地说，调整您的选择器和类。但我认为最好的方法如下：

```
$(this).find("a").first().text(); // or "a:first" 
```

可能有一些更漂亮的东西，但你能理解这是怎么回事吗？使用 .first() 来防止进入 sub li。

# matlab - 打开 Matlab 保存的 .fig 文件的程序

> ID：11902650
> 
> 赞同：19
> 
> 时间：2012-08-10T13:25:33.573
> 
> 标签：matlab, matlab-figure, figure

是否有任何程序能够打开 Matlab 保存的 .fig 文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T13:34:15.647

**2016 年 4 月 29 日更新**

根据[johnml1135 的回答](https://stackoverflow.com/a/36923358/2140414)，fig 文件本质上只是 mat 文件，johnml1135 找出了各种绘图元素的存储位置，用于将 fig 文件转换为 Python 绘图。

**原来的**

根据[此处](https://stackoverflow.com/questions/9269195/saving-fig-file-from-octave)的答案，Matlab 保存的 fig 文件是专有的二进制格式。我不知道任何其他能够加载这种格式的软件。

您最好的选择可能是根据图形的类型从 Matlab 中将图形保存为 pdf/png。

**可能的解决方法**

我最近注意到`octave`它将加载一个无花果文件作为一个结构，所以如果你坚持尝试打开无花果文件而无法访问 Matlab，你可以尝试编写一个八度函数来加载无花果文件并从的内容`struct`。不过，这可能需要了解有关情节的先验信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T13:44:26.347

正如@mutzmatron 所提到的，`.fig`它不容易打开，但这主要是因为它的文档记录很差（不确定专有方面......）。[从这里](http://undocumentedmatlab.com/blog/fig-files-format/)可以看出，它们有一个与文件非常相似的简单格式`.mat`，这可能会给你另一个方向。

我一直很喜欢[plot2svg](http://www.mathworks.com/matlabcentral/fileexchange/7401)。它将 Matlab 图形（大多数情况下）导出为非专有矢量格式 SVG。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-29T16:32:17.913

创建一个仅包含命令的脚本（例如 FigViewer.m）`figure`并通过运行编译它

> mcc -e -v FigViewer.m

从 Matlab 命令窗口。通过这种方式，您可以获得一个依赖于平台的应用程序，该应用程序可以在任何安装了正确版本的[Matlab Compiler Runtime](http://www.mathworks.de/products/compiler/mcr/)的计算机上运行，​​该版本是免费提供的。如果您正在寻找有关 Matlab 编译器的更多信息，请使用 MathWorks 主页而不是 Google，因为某些信息仅在登录屏幕后可用，因此 Google 无法找到。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-28T18:43:01.967

Python 通过 SciPy 能够打开一个 fig 文件（scipy.io.loadmat），它实际上只是一个别名的 mat 文件。 [这篇文章](https://stackoverflow.com/a/36923358/2140414)可以显示带有标签等的简单线图，但可以轻松扩展。从中获取数据也相当简单。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-07-12T02:01:37.087

事实证明，matlab 本身中实际上有一个命令可以让您以任何格式保存您想要归档的任何数字。试试这个：

```
print('theNameYouWant','-dpng') 
```

这使您可以将图形保存到 png 文件中，然后可以由许多应用程序打开，例如 Mac 上的 MS Paint 或 Paintbrush

# php - 获取连接中的多行

> ID：11902651
> 
> 赞同：-1
> 
> 时间：2012-08-10T13:25:34.970
> 
> 标签：php, mysql, database, select, join

我对下面的sql有点麻烦......

第一步是：

从表中获取一行并从另一个表中连接多行...结果数组应如下所示：

```
array(
  field_1, 
  field_2, 
  field_3, 
  joined_array(
    field_a_array(
      field_a_a, 
      field_a_b, 
      field_a_c
    ), 
    field_b_array(
      field_b_a, 
      field_b_b, 
      field_b_c
    )
  ) 
) 
```

我的查询看起来像这样：

```
SELECT table_1.*, table_2.*
FROM table_1
JOIN table_2 ON table_2.field_1 = table_1.field_1
WHERE table_1.field_1 = xyz 
```

但它只返回“table_2”中的一行......

那么，我做错了什么？

由于评论＃1而编辑：

上面的查询不是实际的查询，只是我的重写。

我使用 codeigniter 作为框架，所以查询是由 codeigniter 类构建的......查询的代码如下：

（似乎 where、join 等的位置对于 codeigniters db 类并不重要）

```
$this->db->select('events.*, genres_x_events.*');

$this->db->from('events');
$this->db->where('events.slug', $slug);
$this->db->where('events.deleted', 0);

$this->db->join('genres_x_events', 'genres_x_events.event_slug = events.slug');

$query = $this->db->get(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:28:32.260

你缺少一个`.`after `table_2`。你`JOIN`应该*在*`WHERE`条件之前：

```
SELECT table_1.*, table_2.*
FROM table_1
JOIN table_2 ON table_2.field_1 = table_1.field_1
WHERE table_1.field_1 = xyz 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:28:36.837

看起来你错过了一个点：

在上面写着“table_2*”的地方，我为你加了一个点：

```
SELECT table_1.*, table_2.*
FROM table_1
JOIN table_2 ON table_2.field_1 = table_1.field_1
WHERE table_1.field_1 = xyz 
```

# maven - Jenkins 下的 Maven toolchains.xml 位置

> ID：11902652
> 
> 赞同：5
> 
> 时间：2012-08-10T13:25:35.670
> 
> 标签：maven, jenkins

我发现很难将 Maven 工具链与 Jenkins 一起使用。我需要指定测试应该使用 32 位 JVM 运行，并且`$HOME/.m2/toolchains.xml`当我在我的机器上本地运行时，通过在工作中放置合适的 JDK 定义来做到这一点，但是我如何让它在 Jenkins 环境中工作有多个从站需要不同的工具链定义吗？我不想将`toolchains.xml`文件放在每个 Jenkins 从站的 $HOME 目录中。我可以放在`toolchains.xml`项目的根目录中，但是如何指定每个从站应该使用哪个 JVM？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T08:42:31.923

你是 SOoL。

工具链支持缺乏 CLI 或 Maven 中的属性覆盖，这是我个人的不满之一。

它使 Maven 插件中工具链支持的集成测试成为一种痛苦。

在这些日子里，我会看看我是否可以把它连接起来，尽管你很可能不得不忍受仅在 Maven 3.0.5 或更高版本中提供的支持

# javascript - Javascript SVG 查看器库

> ID：11902653
> 
> 赞同：0
> 
> 时间：2012-08-10T13:25:39.730
> 
> 标签：javascript, svg

我搜索 javascript svg 查看器库，它可以平滑缩放以及拖动和移动视口。我找到[了 SVGPan](http://www.cyberz.org/blog/2009/12/08/svgpan-a-javascript-svg-panzoomdrag-library/)。但这并不顺利。有没有其他图书馆？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-22T23:00:15.307

你可以使用这个非常强大的库： http: [//leafletjs.com/](http://leafletjs.com/)

它用于显示交互式地图，但我用它来平滑地显示图像（和 SVG），包括缩放、拖动等：

[http://kempe.net/blog/2014/06/14/leaflet-pan-zoom-image.html](http://kempe.net/blog/2014/06/14/leaflet-pan-zoom-image.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:05:06.643

你可以在任何浏览器上使用[这个，或者有一个](https://jwatt.org/svg/tests/zoom-and-pan-controlsViewBox.svg)[Firefox 扩展](http://www.treebuilder.de/zoomandpan/index.htm)

# visual-studio-2010 - Resharper 建议框不再出现

> ID：11902654
> 
> 赞同：0
> 
> 时间：2012-08-10T13:25:44.447
> 
> 标签：visual-studio-2010, resharper

我最近重置了 Visual Studio 的设置，然后为 resharper 应用了 Visual Studio 集成方案。

最初，如果我将插入符号移动到包含错误或警告等的代码（例如，名称与 resharper 规则不匹配），则会在带有建议的行的左侧出现一个图标。

现在该图标不会自动出现，我需要按 alt+enter 强制它出现。

知道如何在不重新安装 resharper 的情况下重置此功能吗？

编辑：这是我正在谈论的菜单。

![在此处输入图像描述](../Images/cb963eab984b2ce76500317882a33e2d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:34:20.527

重新安装 resharper 解决了这个问题。

# xml - 如何在 Word 中使用 XSL 设置导入的 XML 样式？

> ID：11902660
> 
> 赞同：2
> 
> 时间：2012-08-10T13:25:53.550
> 
> 标签：xml, xslt, ms-word

我有一个 XML 文件，我需要将其内容导入 Microsoft Word 2007 文档。

我有一个构建 WordprocessingML 表的 XSL 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:w="http://schemas.microsoft.com/office/word/2003/wordml">
<xsl:output method="xml" indent="yes"/> 

<w:style w:type="table" w:styleId="TableStyle">
    <w:name w:val="Table Style"/>
    <w:tblPr>
        <w:tblBorders>
            <w:insideH w:val="single" w:sz="4" w:space="0" w:color="auto"/>
        </w:tblBorders>
    </w:tblPr>
</w:style>  

<xsl:template match="list">

    <xsl:processing-instruction name="mso-application">
        <xsl:text>progid="Word.Document"</xsl:text>
    </xsl:processing-instruction>

    <w:tbl>
        <w:tblPr>
            <w:tblStyle w:val="TableStyle"/>
        </w:tblPr>
        <w:tblGrid>
            <w:gridCol w:w="100" />
            <w:gridCol w:w="200" />
            <w:gridCol w:w="1024" />
        </w:tblGrid>
        <w:tr>
            <w:tc><w:p><w:r><w:t>ID</w:t></w:r></w:p></w:tc>
            <w:tc><w:p><w:r><w:t>Description</w:t></w:r></w:p></w:tc>   
        </w:tr> 
        <xsl:apply-templates select="items/item">
            <xsl:sort select="id" order="ascending"/>
        </xsl:apply-templates>
    </w:tbl>

</xsl:template>

<xsl:template match="items/item">
    <w:tr>
        <w:tc><w:p><w:r><w:t>
            <xsl:value-of select="id"/>
        </w:t></w:r></w:p></w:tc>
        <w:tc><w:p><w:r><w:t>
            <xsl:value-of select="description"/>
        </w:t></w:r></w:p></w:tc>
    </w:tr>
</xsl:template>
</xsl:stylesheet> 
```

我使用 Word INCLUDETEXT 字段导入 XML 文件并应用转换：

```
{INCLUDETEXT  "E:\\Spinner\\Documents\\data.xml" \t "E:\\Spinner\\Documents\\stylesheet.xsl"} 
```

就实际导入数据而言，这可以正常工作 - 显示一个包含我需要的数据的基本表格。

然而，该表没有任何格式 - 没有边框、没有网格线、没有阴影等。Word 会忽略我在 XSL 文件（`<w:gridCol w:w="100" />`等）中指定的列宽并设置自己的列宽。

我需要使用（最好）文档中已经存在的样式对其进行格式化，例如“表格网格”或“中底纹 1 - 重音 3”。但是，我无法让 Word 实际应用该样式，无论是针对 Word 文档中已经存在的样式 ( `<w:tblStyle w:val="TableGrid"/>`) 还是新定义的 XSL 文件样式 ( `<w:tblStyle w:val="TableStyle"/>`)。

有没有人有任何指示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T17:36:34.790

您需要更多类似的东西，但我认为您可能需要调整列宽（可能要考虑到单元格边框）

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:w="http://schemas.microsoft.com/office/word/2003/wordml">
<xsl:output method="xml" indent="yes"/> 

<xsl:template match="list">
  <xsl:processing-instruction name="mso-application">
  <xsl:text>progid="Word.Document"</xsl:text>
  </xsl:processing-instruction>
  <w:wordDocument xmlns:w="http://schemas.microsoft.com/office/word/2003/wordml"  w:macrosPresent="no" w:embeddedObjPresent="no" 
w:ocxPresent="no" xml:space="preserve">
    <w:styles>
      <w:style w:type="table" w:styleId="TableStyle">
        <w:name w:val="Table Style"/>
        <w:tblPr>
          <w:tblBorders>
             <w:insideH w:val="single" w:sz="4" w:space="0" w:color="auto"/>
          </w:tblBorders>
        </w:tblPr>
      </w:style>
    </w:styles>
    <w:body>
      <w:tbl>
        <w:tblPr>
            <w:tblStyle w:val="TableStyle"/>
        </w:tblPr>
        <w:tblGrid>
            <w:gridCol w:w="100" />
            <w:gridCol w:w="1024" />
        </w:tblGrid>
        <w:tr>
            <w:tc><w:p><w:r><w:t>ID</w:t></w:r></w:p></w:tc>
            <w:tc><w:p><w:r><w:t>Description</w:t></w:r></w:p></w:tc>   
        </w:tr> 
        <xsl:apply-templates select="items/item">
            <xsl:sort select="id" order="ascending"/>
        </xsl:apply-templates>
      </w:tbl>
    </w:body>
  </w:wordDocument>
</xsl:template>

<xsl:template match="items/item">
    <w:tr>
        <w:tc><w:p><w:r><w:t>
            <xsl:value-of select="id"/>
        </w:t></w:r></w:p></w:tc>
        <w:tc><w:p><w:r><w:t>
            <xsl:value-of select="description"/>
        </w:t></w:r></w:p></w:tc>
    </w:tr>
</xsl:template>
</xsl:stylesheet> 
```

# spring - Jetty 和 Spring 的静态内容

> ID：11902662
> 
> 赞同：1
> 
> 时间：2012-08-10T13:25:56.700
> 
> 标签：spring, twitter-bootstrap, embedded-jetty, maven-jetty-plugin

我的 webapp 没有显示任何静态内容。

*   春季MVC
*   推特引导
*   码头 7

构建项目：包含 Jetty 的 mvn clean install

**Web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebApp_ID" version="2.5">
    <display-name>Some company</display-name>
    <welcome-file-list>
        <welcome-file>list.html</welcome-file>
    </welcome-file-list>
    <servlet>
        <servlet-name>spring</servlet-name>
        <servlet-class>
            org.springframework.web.servlet.DispatcherServlet
        </servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>spring</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
</web-app> 
```

**spring-servlet.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jee="http://www.springframework.org/schema/jee" xmlns:lang="http://www.springframework.org/schema/lang"
    xmlns:p="http://www.springframework.org/schema/p" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:jdbc="http://www.springframework.org/schema/jdbc" xmlns:util="http://www.springframework.org/schema/util"
    xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns="http://www.springframework.org/schema/beans"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd
        http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

    <context:annotation-config />
    <!-- use this for Spring Jackson JSON support -->
    <mvc:annotation-driven />
    <mvc:default-servlet-handler />
    <tx:annotation-driven transaction-manager="transactionManager" />
    <jdbc:embedded-database id="dataSource" type="H2" />

    <context:component-scan base-package="com.company.config" />
    <context:component-scan base-package="com.company.market.dao" />
    <context:component-scan base-package="com.company.service.app" />
    <context:component-scan base-package="com.company.controller" />

    <bean id="multipartResolver"
        class="org.springframework.web.multipart.commons.CommonsMultipartResolver" />
    <bean
        class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
        <property name="viewResolvers">
            <list>
                <bean class="org.springframework.web.servlet.view.UrlBasedViewResolver">
                    <property name="viewClass"
                        value="org.springframework.web.servlet.view.JstlView" />
                    <property name="prefix" value="/WEB-INF/jsp/" />
                    <property name="suffix" value=".jsp" />
                </bean>
            </list>
        </property>
    </bean>
</beans> 
```

**hero.jsp**添加了 .jsp 库，否则 twitter 引导示例，但删除了一些内容

```
 <%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ page session="false" %>
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Bootstrap, from Twitter</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="../resources/assets/bootstrap/css/bootstrap.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
    </style>
    <link href="../resources/assets/bootstrap/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--> 

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="../resources/assets/bootstrap/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../resources/assets/bootstrap/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../resources/assets/bootstrap/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../resources/assets/bootstrap/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../resources/assets/bootstrap/ico/apple-touch-icon-57-precomposed.png">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">Project name</a>
          <div class="nav-collapse">
            <ul class="nav">
              <li class="active"><a href="#">Home</a></li>
              <li><a href="#about">About</a></li>
              <li><a href="#contact">Contact</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container">

      <!-- Main hero unit for a primary marketing message or call to action -->
      <div class="hero-unit">
        <h1>Hello, world!</h1>
        <p>This is a template for a simple marketing or informational website. It includes a large callout called the hero unit and three supporting pieces of content. Use it as a starting point to create something more unique.</p>
        <p><a class="btn btn-primary btn-large">Learn more &raquo;</a></p>
      </div>

  </body>
</html> 
```

文件夹结构类似于 Maven。

```
src
- main
    - webapp
        - WEB-INF
            -jsp
            -resources
                - assets
                    -bootstrap
                        - css
                        - ico
                        - img
                        - js
        - spring-servlet.xml
        - web.xml 
```

当我将 hero.jsp 作为 hero.html 打开并在我的浏览器中查看它时，我看到 twitter 引导程序正在工作，但是当我部署它时没有任何工作......我玩过

```
<mvc:resources mapping="/resources/**" location="/public-resources/"/> 
```

但它没有奏效......

如果我在部署 html 文件时查看了它的源代码，例如 .css 的链接指向

```
http://localhost:8080/resources/assets/bootstrap/css/bootstrap.css 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T23:59:26.763

***尝试将资源移动到 webapp 目录***是正确的提示。

# mysql - MySQL：计算球员的金牌、银牌和铜牌

> ID：11902664
> 
> 赞同：0
> 
> 时间：2012-08-10T13:26:00.257
> 
> 标签：mysql, subquery

我有这张桌子：

```
id  game  points  player
---|-----|-------|--------
1  | 1   | 6     | John   
2  | 1   | 5     | Adam
3  | 1   | 7     | Brian
4  | 1   | 8     | Alan
5  | 2   | 6     | John   
6  | 2   | 2     | Adam
7  | 2   | 4     | Brian
8  | 2   | 3     | Alan 
```

我正在尝试编写一个查询来计算一个人赢得了多少金牌、银牌和铜牌。

Alan 的结果应该是： ( [gold] = 1, [silver] = 0, [bronze] = 1 )

布赖恩应该是：（[金] = 0，[银] = 2，[铜] = 0）

我已经能够这样计算金牌数：

```
SELECT COUNT(*) AS gold
FROM (`myTable` AS t)
WHERE `t`.`player` = 'Alan'
AND `t`.points = (
    SELECT MAX(`points`)
    FROM `myTable` as tsub
    WHERE `tsub`.`game` = `t`.`game`
) 
```

银牌和铜牌似乎要困难得多。

有人有什么想法吗？

谢谢

编辑：澄清奖牌的授予方式。

金牌：比赛中得分最高的玩家。

银牌：授予比赛中得分第二高的玩家。

铜牌：比赛中得分第三高的玩家。

多个游戏存储在表中。

如果有两名选手获得金牌，则不会授予银牌。两个最高分打成平手，因此下一个最高分将是第三高分，因此将获得铜牌。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:39:49.063

这会有所帮助

如果需要，更新您的奖牌标准

```
select 
name, 
(SELECT count(*) FROM myTable g where g.points > 5 and g.name=myTable.name) as gold,
(SELECT count(*) FROM myTable g where g.points > 2 and g.points <= 5 and g.name=myTable.name) as silver,
(SELECT count(*) FROM myTable g where g.points <= 2 and g.name=myTable.name) as gold
from myTable
group by name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:15:45.283

考虑这个例子......

```
 DROP TABLE IF EXISTS my_table;

 CREATE TABLE my_table 
 (game INT NOT NULL
 ,points INT NOT NULL
 ,player VARCHAR(12) NOT NULL
 ,PRIMARY KEY(game,player)
 );

 INSERT INTO my_table VALUES
 (1,6,'John'),
 (1,5,'Adam'),
 (1,7,'Brian'),
 (1,8,'Alan'),
 (2,6,'John'),
 (2,2,'Adam'),
 (2,4,'Brian'),
 (2,3,'Alan');

 SELECT player
      , SUM(rank=1) gold
      , SUM(rank=2) silver
      , SUM(rank=3) bronze 
   FROM
      (
        SELECT x.*
             , COUNT(*) rank 
          FROM my_table x 
          JOIN my_table y 
            ON y.game = x.game 
           AND y.points >= x.points 
         GROUP 
            BY game
             , player
      ) a
  GROUP 
     BY player;
 +--------+------+--------+--------+
 | player | gold | silver | bronze |
 +--------+------+--------+--------+
 | Adam   |    0 |      0 |      0 |
 | Alan   |    1 |      0 |      1 |
 | Brian  |    0 |      2 |      0 |
 | John   |    1 |      0 |      1 |
 +--------+------+--------+--------+ 
```

# python - 字典中的最高值

> ID：11902665
> 
> 赞同：35
> 
> 时间：2012-08-10T13:26:01.990
> 
> 标签：python, dictionary

如何从字典中检索前 3 个列表？

```
>>> d
{'a': 2, 'and': 23, 'this': 14, 'only.': 21, 'is': 2, 'work': 2, 'will': 2, 'as': 2, 'test': 4} 
```

预期结果：

```
and: 23
only: 21
this: 14 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-08-10T13:27:59.623

使用[`collections.Counter`](http://docs.python.org/library/collections.html#counter-objects)：

```
>>> d = Counter({'a': 2, 'and': 23, 'this': 14, 'only.': 21, 'is': 2, 'work': 2, 'will': 2, 'as': 2, 'test': 4})
>>> d.most_common()
[('and', 23), ('only.', 21), ('this', 14), ('test', 4), ('a', 2), ('is', 2), ('work', 2), ('will', 2), ('as', 2)]
>>> for k, v in d.most_common(3):
...     print '%s: %i' % (k, v)
... 
and: 23
only.: 21
this: 14 
```

计数器对象提供了各种其他优点，例如首先收集计数几乎是微不足道的。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-08-10T13:28:57.700

```
>>> d = {'a': 2, 'and': 23, 'this': 14, 'only.': 21, 'is': 2, 'work': 2, 'will': 2, 'as': 2, 'test': 4}
>>> t = sorted(d.iteritems(), key=lambda x:-x[1])[:3]

>>> for x in t:
...     print "{0}: {1}".format(*x)
... 
and: 23
only.: 21
this: 14 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-03T13:42:37.873

您已经得到的答复是正确的，但是我会创建自己的键函数以在调用 sorted() 时使用。

```
d = {'a': 2, 'and': 23, 'this': 14, 'only.': 21, 'is': 2, 'work': 2, 'will': 2, 'as': 2, 'test': 4}

# create a function which returns the value of a dictionary
def keyfunction(k):
    return d[k]

# sort by dictionary by the values and print top 3 {key, value} pairs
for key in sorted(d, key=keyfunction, reverse=True)[:3]:
    print "%s: %i" % (key, d[key]) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-12-03T22:19:48.450

鉴于上述解决方案：

```
def most_popular(L):
  # using lambda
  start = datetime.datetime.now()
  res=dict(sorted([(k,v) for k, v in L.items()], key=lambda x: x[1])[-2:])
  delta=datetime.datetime.now()-start
  print "Microtime (lambda:%d):" % len(L), str( delta.microseconds )

  # using collections
  start=datetime.datetime.now()
  res=dict(collections.Counter(L).most_common()[:2])
  delta=datetime.datetime.now()-start
  print "Microtime (collections:%d):" % len(L), str( delta.microseconds )

# list of 10
most_popular({el:0 for el in list(range(10))})

# list of 100
most_popular({el:0 for el in list(range(100))})

# list of 1000
most_popular({el:0 for el in list(range(1000))})

# list of 10000
most_popular({el:0 for el in list(range(10000))})

# list of 100000
most_popular({el:0 for el in list(range(100000))})

# list of 1000000
most_popular({el:0 for el in list(range(1000000))}) 
```

处理大小从 10^1 到 10^6 对象的数据集字典，例如

```
print {el:0 for el in list(range(10))}
{0: 0, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0, 9: 0} 
```

我们有以下基准

```
Python 2.7.10 (default, Jul 14 2015, 19:46:27)
[GCC 4.8.2] on linux

Microtime (lambda:10): 24
Microtime (collections:10): 106
Microtime (lambda:100): 49
Microtime (collections:100): 50
Microtime (lambda:1000): 397
Microtime (collections:1000): 178
Microtime (lambda:10000): 4347
Microtime (collections:10000): 2782
Microtime (lambda:100000): 55738
Microtime (collections:100000): 26546
Microtime (lambda:1000000): 798612
Microtime (collections:1000000): 361970
=> None 
```

所以我们可以说，对于小列表使用`lambda`，但对于大列表，`collections`具有更好的性能。

[请参阅此处](https://repl.it/EfVQ/4)运行的基准测试。

# jquery-ui - jQuery UI sortable：在拖动之前和之后获取第一个项目

> ID：11902666
> 
> 赞同：1
> 
> 时间：2012-08-10T13:26:02.770
> 
> 标签：jquery-ui, events, jquery-ui-sortable

我的网络应用程序有一个功能，用户可以创建一个最多包含五个项目的列表。创建列表时，我们会自动在第一项之后为其命名，但用户也可以键入自定义名称。所以，你会有这样的东西：

```
Name: [ Item 1 ] (this is a text box)

- Item 1
- Item 2
- Item 3
- Item 4
- Item 5 
```

我还设置了 jQuery UI 的`sortable`交互，以便用户可以单击并拖动以重新排列列表中的项目。现在，我想要做的是在用户完成拖动后自动重命名列表，但*前提是*他们没有输入自定义名称（可以通过将名称与原始名称进行比较来确定）项目并查看它们是否匹配）。

我知道它`sortable`提供了许多可用于运行自定义函数（如`start`和`stop`）的事件。问题是我需要在拖动发生之前和之后运行函数以便进行比较，但是（据我所知）我无法在它们之间传递数据 - 中定义的变量`start`不能用于`stop`. 那我该怎么写呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:55:28.277

我通过将第一项保存在全局变量中来解决这个问题`start`，然后使用它与当前标题进行比较`stop`。也许不是最好的方法，但它确实有效：

```
var saveFirstItem = function(first_item) {
    startFirstItem = first_item;
};

$(document).ready(function(){
    $("#list").sortable({
        start: function(event, ui){
            var first_item = $("#list li:first-child").text();
            saveFirstItem(first_item);
        },
        stop: function(event, ui){      
            var first_item = $("#list li:first-child").text();      
            var current_title = $("#title").val();

            if (current_title == startFirstItem){
                $("#title").val(first_item);
            }
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:32:59.710

可能不是最学术的答案，但这里有一个想法：

为什么需要启动事件？如果我理解正确，您似乎只关心将列表的第一项放在字段中，但前提是名称不是手写的。如果您将此设置为可放置的，您可能需要一个开始事件，以添加第一个删除列表名称的项目，但我想您已经有了？

```
var nameIsCustom=false;
$("#ul").sortable(
{
    stop: function(event,ui)
    {
        nameIsCustom = true;
        $("ul > li").each(function()
        {
            if($("#name").val() == $(this).text())
            {nameIsCustom = false;}
        });
        if(!nameIsCustom)
        {
            $("#name").val($("#ul > li:first").text());
        }
    }
}); 
```

# python - 在 Python 中使用 openpyxl 连接 excel 中的数据

> ID：11902672
> 
> 赞同：0
> 
> 时间：2012-08-10T13:26:19.167
> 
> 标签：python, excel, openpyxl

又来了，我设法从 resx 文件 (xml) 中收集特定数据以生成 Excel 文件。现在，任务是将所有数据连接到此 Excel 文件中的最低行。

# 首先打开输入文件以读取（r）和写入（w）。

wb = load_workbook('Excel.xlsx')

# 访问名为“工作表”的工作表

ws=get_sheet_by_name('工作表')

所以现在，我需要将一列中所有单元格的数据连接到该列的最后一个空单元格。然后生成这个新的excel文件。

例如，列名：任意列 row1：ABC row2：EFG row3：HIJ

连接后的最后一行应该是这样的，

第 4 行：ABC EFG HIJ

作为一个 python 初学者，这对我来说似乎是一件相当困难的事情。请帮忙改进。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:40:01.670

像下面这样的东西应该工作......

```
max_row = ws.get_highest_row() # find last row of worksheet
reff = "A1:A" + str(max_row) # build an Excel range covering the data
values = [cell.value for cell in ws.range(reff)] # collect the data
ws.cell('A' + str(max_row + 1)).value = ' '.join(values) # write values 
```

这个模块的[文档](http://packages.python.org/openpyxl/usage.html#write-a-workbook)非常好。看看它并进行实验。

# android - Jelly Bean 中 Android 系统栏的新 API？

> ID：11902673
> 
> 赞同：1
> 
> 时间：2012-08-10T13:26:30.430
> 
> 标签：android, api, android-4.2-jelly-bean

我的公司生产工业制造产品，我们提供带有应用程序的 Android 平板电脑来控制制造过程。理想情况下，这应该是用户看到的唯一应用程序，我们已经能够在运行 Gingerbread 的手持设备上执行此操作，但在 Honeycomb 和 Ice Cream Sandwich 上，系统栏会阻止此操作。

我的理解是，在 Jelly Bean 上，对系统栏的外观有更多的编程控制，但我不清楚细节。我阅读了[http://developer.android.com/about/versions/android-4.1.html](http://developer.android.com/about/versions/android-4.1.html) 但我仍然不清楚是否有任何方法可以在程序控制下实际隐藏系统栏。

我们的公司太小，无法制作自己的 ROM（我是唯一的 Android 开发人员），因此我们正在尝试使用操作系统的库存版本。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T16:01:18.323

> 我仍然不清楚是否有任何方法可以在程序控制下实际隐藏系统栏

不是永久的。删除平板电脑上的系统栏的 JB 选项只是暂时这样做 - 任何用户输入都会导致栏重新出现。因此，它不适合您的场景。

> 我们公司太小，无法制作自己的 ROM

如果您不介意我的询问，您是否在寻找顾问或公司来做这件事，却找不到任何人（或合适的人）？还是你没有追求那个角度？自定义 ROM，或者至少是 root-change-unroot 过程，将是您问题的正确解决方案。我当然可以看到在哪里雇用一名全职 ROM slinger 可能是矫枉过正，但希望有办法将这项工作外包。

# xml - gSOAP 生成 unicode 支持

> ID：11902675
> 
> 赞同：1
> 
> 时间：2012-08-10T13:26:51.753
> 
> 标签：xml, soap, gsoap

我试图弄清楚如何告诉 gSOAP 附带的 wsdl2h.exe 标头生成器不要在生成的标头中的任何地方使用 char* 。

对于一些关键类型，我们在 typemap.dat 中创建了自定义定义。但是必须有一种方法告诉它不要对生成的代码中的任何内容使用 char*。

通常解决方案是编辑生成的头文件，但我们在每次构建时动态运行 wsdl2h 然后 soapcpp2，因为 WSDL 尚未最终确定。

有谁知道如何强制 wsdl2h 工具只使用 wchar_t* 而不是 char*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:22:46.957

只需将下面的行添加到您的 typemap.dat 文件中：

```
xsd__string   = | wchar_t* | wchar_t* 
```

# javascript - 在 AS3 和 HTML5 中创建 3D 条形图

> ID：11902677
> 
> 赞同：1
> 
> 时间：2012-08-10T13:26:59.023
> 
> 标签：javascript, actionscript-3, flash, html, charts

我必须在 Flash(AS3) 和 HTML5 中创建一个 3D 条形图，它接受来自源的输入并生成图形，它们看起来应该很相似，那么我有什么选择？我的意思是有任何开放的图书馆可以帮助我做到这一点吗？（应该是开源的）

任何帮助，将不胜感激..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:38:56.867

我想你可能想从像 Haxe 这样的东西开始，以拥有一个可以编译为多种语言的通用框架。我不知道有任何图表库使用 Haxe（或者使用 Haxe 构建），或者编写为在 AS3 和 HTML/JS 之间具有并行性。不必使用诸如 Haxe 之类的东西或用不同的语言编写多个版本并让它们保持最新，您可以让服务器端 java 句柄生成图表（返回位图数据），唯一的问题是如果您想要交互在图表上，这让你又回到了同一条船上。

另一种选择是自己推出一个周末露营时我做了类似“3d”条形图的东西（我的笔记本电脑电池充满了两次电，但在没有互联网的情况下完成了它）。

[http://www.shaunhusain.com/charts/](http://www.shaunhusain.com/charts/)

[http://www.shaunhusain.com/charts/srcview/](http://www.shaunhusain.com/charts/srcview/)

我实际上把它放在那个图表文件夹中，目的是绕回来清理它并做具有类似 3d 效果的饼图/线图（实际上不使用任何 3d）。

有一些关于编写自己的图表的不错的教程，只要它们不会对您可能 DIY 的设计过于疯狂。另外，无论您使用哪种语言较弱，每次都可以移植到，因此您开始强大然后学习如何转换。

**编辑** 广告变得比人更聪明（当我加载它时，这是在此页面的右侧）：[http ://www.fusioncharts.com/products/suite/?utm_source=stackoverflow&utm_medium=banner&utm_content=1_billion_banner_karate_220x250_px_white_fo&utm_campaign=FC_v3_2_Mktg](http://www.fusioncharts.com/products/suite/?utm_source=stackoverflow&utm_medium=banner&utm_content=1_billion_banner_karate_220x250_px_white_fo&utm_campaign=FC_v3_2_Mktg)

# objective-c - 当我在 Xcode 中运行我的应用程序时，当我按下一个带有声音的按钮时它会崩溃

> ID：11902678
> 
> 赞同：-2
> 
> 时间：2012-08-10T13:27:01.787
> 
> 标签：objective-c, ios, xcode, xcode4.4

所以我正在制作这个应用程序，如果你按下一个按钮，就会播放声音，但是当我按下按钮时应用程序崩溃了。这是我的代码

在 .h 文件中

```
#import <UIKit/UIKit.h>
#import <AudioToolbox/AudioToolbox.h>

@interface ViewController : UIViewController {

}

-(IBAction)buttonPressedWithSound:(id)sender;

@end 
```

那里没有错，但是在 .m 文件中

```
-(IBAction)buttonPressedWithSound:(id)sender {

int randomSoundNumber = arc4random() % 4; //random number from 0 to 3

NSLog(@"random NR = %i", randomSoundNumber);

NSString *effectTitle;

switch (randomSoundNumber) {
    case 0:
        effectTitle = @"Come at me BRO!";
        break;
    case 1:
        effectTitle = @"sound2";
        break;
    case 2:
        effectTitle = @"sound3";
        break;
    case 3:
        effectTitle = @"sound4";
        break;

    default:
        break;
}

SystemSoundID soundID;

NSString *soundPath = [[NSBundle mainBundle] pathForResource:effectTitle ofType:@"caf"];
NSURL *soundUrl = [NSURL fileURLWithPath:soundPath];

AudioServicesCreateSystemSoundID ((CFURLRef)CFBridgingRetain(soundUrl), &soundID);
AudioServicesPlaySystemSound(soundID);
}

@end 
```

这条线在这里

```
 NSURL *soundUrl = [NSURL fileURLWithPath:soundPath]; 
```

好吧，它说它有问题，这个

```
 2012-08-10 10:12:52.419 Sound +[1177:907] random NR = 1(lldb) 
```

和

```
 NSURL *soundUrl = [NSURL fileURLWithPath:soundPath]; 
```

有一个绿色突出显示，并在其旁边显示“线程 1：断点 1.1”。

我该如何修复它，它可以在不崩溃的情况下播放声音

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:44:23.383

您的代码记录了您的要求，然后点击了您在代码中设置的断点。点击继续按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:02:26.080

您应该使用 NSSound 类：

```
NSSound *sound = [[[NSSound alloc] initWithContentsOfFile: soundPath byReference: NO] autorelease];

[sound play]; 
```

# php - 从 MySQL db 中检索图像的高度和宽度

> ID：11902681
> 
> 赞同：0
> 
> 时间：2012-08-10T13:27:14.153
> 
> 标签：php, mysql, html, codeigniter

我在 MySQL 表中有图像位置的 url。我将如何检索该图像的高度和宽度并将其插入到下面的 img 标签中？

```
<img id="profileImg" alt="" height="96" width="87" src="<?=base_url().$row1->imgURI?>" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:33:24.607

使用[http://php.net/manual/en/function.getimagesize.php](http://php.net/manual/en/function.getimagesize.php)

```
<?php
list($width, $height, $type, $attr) = getimagesize(base_url() . $row1->imgURI);
?>
<img id="profileImg" alt="" height="<?=$height?>" width="<?=$width?>" src="<?=base_url().$row1->imgURI?>" /> 
```

此外，如果您可以导出图像文件的本地路径以避免必须通过其 url 访问文件，那就太好了。但我会留给它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:29:14.810

例如通过使用 GD 库函数 getimagesize()： http: [//php.net/manual/en/function.getimagesize.php](http://php.net/manual/en/function.getimagesize.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T13:31:03.643

这是使用[getimagesize](http://php.net/manual/en/function.getimagesize.php)函数最简单的可检索：

```
list($width, $height, $type, $attr) = getimagesize ( base_url() . $row1->imgURI );
<img id="profileImg" alt="" <?=$attr?> src="<?=base_url().$row1->imgURI?>" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T13:29:57.480

如果您没有实际的`width`并`height`存储在数据库中，则可以使用[getimagesize()](http://php.net/manual/en/function.getimagesize.php)：

```
<?php
  $image = base_url().$row1->imgURI;
  $size = getimagesize($image);
?>
<img id="profileImg" alt="" height="<?=$size[1];?>" width="<?=$size[0];?>" src="<?=$image;?>" /> 
```

# android - 模拟器没有运行

> ID：11902685
> 
> 赞同：22
> 
> 时间：2012-08-10T13:27:22.113
> 
> 标签：android, android-emulator

在我将硬盘更改为其他主板 i5 3GHz 处理器且未重新安装操作系统后，我的 AVD 仿真器没有运行。

操作系统：Ubuntu 10.10

我的模拟器没有通过 Eclipse 运行。当我单击 Run As.. Android 应用程序时。

然后我尝试通过命令提示符运行，然后显示如下错误。

```
padmakumar@padmakumar-desktop:~$ emulator -avd JellyBelly
Failed to create Context 0x3005
emulator: WARNING: Could not initialize OpenglES emulation, using software renderer.
Segmentation fault 
```

如何解决此错误以运行模拟器？

**编辑：**使用模拟器 -avd JellyBelly -verbose

```
padmakumar@padmakumar-desktop:~$ emulator -avd JellyBelly -verbose
emulator: found SDK root at /home/padmakumar/android-sdk
emulator: Android virtual device file at: /home/padmakumar/.android/avd/JellyBelly.ini
emulator: virtual device content at /home/padmakumar/.android/avd/JellyBelly.avd
emulator: virtual device config file: /home/padmakumar/.android/avd/JellyBelly.avd/config.ini
emulator: using core hw config path: /home/padmakumar/.android/avd/JellyBelly.avd/hardware-qemu.ini
emulator: Found AVD target API level: 16
emulator: found skin 'WXGA800-7in' in directory: /home/padmakumar/android-sdk/platforms/android-16/skins
emulator: autoconfig: -skin WXGA800-7in
emulator: autoconfig: -skindir /home/padmakumar/android-sdk/platforms/android-16/skins
emulator: found skin-specific hardware.ini: /home/padmakumar/android-sdk/platforms/android-16/skins/WXGA800-7in/hardware.ini
emulator: keyset loaded from: /home/padmakumar/.android/default.keyset
emulator: trying to load skin file '/home/padmakumar/android-sdk/platforms/android-16/skins/WXGA800-7in/layout'
emulator: skin network speed: 'full'
emulator: skin network delay: 'none'
emulator: autoconfig: -kernel /home/padmakumar/android-sdk/system-images/android-16/armeabi-v7a//kernel-qemu
emulator: autoconfig: -ramdisk /home/padmakumar/android-sdk/system-images/android-16/armeabi-v7a//ramdisk.img
emulator: Using initial system image: /home/padmakumar/android-sdk/system-images/android-16/armeabi-v7a//system.img
emulator: autoconfig: -data /home/padmakumar/.android/avd/JellyBelly.avd/userdata-qemu.img
emulator: autoconfig: -initdata /home/padmakumar/.android/avd/JellyBelly.avd/userdata.img
emulator: autoconfig: -cache /home/padmakumar/.android/avd/JellyBelly.avd/cache.img
emulator: autoconfig: -sdcard /home/padmakumar/.android/avd/JellyBelly.avd/sdcard.img
emulator: Physical RAM size: 1024MB

Content of hardware configuration file:
  hw.cpu.arch = arm
  hw.cpu.model = cortex-a8
  hw.ramSize = 1024
  hw.screen = touch
  hw.mainKeys = no
  hw.trackBall = yes
  hw.keyboard = no
  hw.keyboard.lid = no
  hw.keyboard.charmap = qwerty2
  hw.dPad = yes
  hw.gsmModem = yes
  hw.gps = yes
  hw.battery = yes
  hw.accelerometer = yes
  hw.audioInput = yes
  hw.audioOutput = yes
  hw.sdCard = yes
  hw.sdCard.path = /home/padmakumar/.android/avd/JellyBelly.avd/sdcard.img
  disk.cachePartition = yes
  disk.cachePartition.path = /home/padmakumar/.android/avd/JellyBelly.avd/cache.img
  disk.cachePartition.size = 66m
  hw.lcd.width = 800
  hw.lcd.height = 1280
  hw.lcd.depth = 16
  hw.lcd.density = 213
  hw.lcd.backlight = yes
  hw.gpu.enabled = no
  hw.camera.back = emulated
  hw.camera.front = none
  vm.heapSize = 48
  hw.sensors.proximity = yes
  hw.sensors.magnetic_field = yes
  hw.sensors.orientation = yes
  hw.sensors.temperature = yes
  kernel.path = /home/padmakumar/android-sdk/system-images/android-16/armeabi-v7a//kernel-qemu
  kernel.parameters =  android.checkjni=1
  disk.ramdisk.path = /home/padmakumar/android-sdk/system-images/android-16/armeabi-v7a//ramdisk.img
  disk.systemPartition.initPath = /home/padmakumar/android-sdk/system-images/android-16/armeabi-v7a//system.img
  disk.systemPartition.size = 200m
  disk.dataPartition.path = /home/padmakumar/.android/avd/JellyBelly.avd/userdata-qemu.img
  disk.dataPartition.size = 201m
  avd.name = JellyBelly
.
QEMU options list:
emulator: argv[00] = "/home/padmakumar/android-sdk/tools/emulator-arm"
emulator: argv[01] = "-android-hw"
emulator: argv[02] = "/home/padmakumar/.android/avd/JellyBelly.avd/hardware-qemu.ini"
Concatenated QEMU options:
 /home/padmakumar/android-sdk/tools/emulator-arm -android-hw /home/padmakumar/.android/avd/JellyBelly.avd/hardware-qemu.ini
emulator: registered 'boot-properties' qemud service
emulator: nand_add_dev: system,size=0xc800000,initfile=/home/padmakumar/android-sdk/system-images/android-16/armeabi-v7a//system.img
emulator: mapping 'system' NAND image to /tmp/android-padmakumar/emulator-IM8Usk
emulator: rounding devsize up to a full eraseunit, now c810000

emulator: nand_add_dev: userdata,size=0xc900000,file=/home/padmakumar/.android/avd/JellyBelly.avd/userdata-qemu.img
emulator: rounding devsize up to a full eraseunit, now c918000

emulator: registered 'boot-properties' qemud service
emulator: Adding boot property: 'dalvik.vm.heapsize' = '48m'
emulator: Adding boot property: 'qemu.sf.lcd_density' = '213'
emulator: Adding boot property: 'qemu.hw.mainkeys' = '0'
emulator: Adding boot property: 'qemu.sf.fake_camera' = 'back'
emulator: nand_add_dev: cache,size=0x4200000,file=/home/padmakumar/.android/avd/JellyBelly.avd/cache.img
emulator: Initializing hardware OpenGLES emulation support
Failed to create Context 0x3005
emulator: Can't start OpenGLES renderer?
emulator: WARNING: Could not initialize OpenglES emulation, using software renderer.
emulator: Kernel parameters: qemu.gles=0 qemu=1 console=ttyS0 android.qemud=ttyS1 android.checkjni=1 ndns=2
Segmentation fault 
```

**编辑：**我创建的任何模拟器都没有运行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T05:45:24.640

当您将 ADT 和 SDK 升级到第 20 版时，实际上会发生这种情况......很多人都会发生这种情况，但解决方案是您必须启动“emulator-arm”而不是“emulator”......所以它可能有效。 ..有关更多详细信息，您可以参考[http://code.google.com/p/android/issues/detail?id=34233](http://code.google.com/p/android/issues/detail?id=34233)此链接...

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-17T14:00:10.043

我有同样的问题

编辑您的 AVD GUI 设置。硬件部分，选择新建。点击“属性”下拉菜单选择“GPU Emulation”然后“OK”使用硬件部分的下拉菜单将“Gpu Emulation”更改为“YES”。

保存并重试

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-10T14:20:28.387

您可能缺少与模拟器的 GLES 库的链接，请确保在

```
<Android SDK root>/tools/lib 
```

你有这个 .so 文件

```
libEGL_translator.so    
libGLES_CM_translator.so    
libGLES_V2_translator.so    
libOpenglRender.so 
```

您必须将此文件添加到操作系统的全局库集中，您可以从特定路径添加库，只需执行以下操作：

*   `sudo gedit /etc/ld.so.conf.d/androidGL.conf`
*   只写这个文件中库的路径，在你的情况下`<Android SDK root>/tools/lib`，只是一个路径，不要指定任何库，该路径中的所有库将被自动收集
*   保存并关闭 gedit
*   更新全局库集以添加新路径`sudo ldconfig`

现在重新尝试运行您的 avd。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-20T06:03:10.850

```
Failed to create Context 0x3005
emulator: Can't start OpenGLES renderer? 
```

通常，当您的模拟器大小超出您的操作系统支持 GL 驱动器的范围时，就会发生这种情况。

尝试根据您的屏幕尺寸和显示器 dpi 缩放您的模拟器。

希望它会有所帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-11T10:32:30.970

更改屏幕的分辨率（增加）。这对我有用

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-13T19:41:05.650

我也遇到了这个问题。我的症状：

1.  我可以开始 Android 会话
2.  Eclipse然后显示上述错误
3.  我使用 Windows Vista、Android SDK 20 和 Eclipse 4.2.0

实际问题非常简单（注意我确实有 GPU 模拟器 = 是的）。原来 Eclipse 看不到 Android 会话！

[http://www.linkedin.com/groups/Problem-in-executing-code-on-86481.S.138513463](http://www.linkedin.com/groups/Problem-in-executing-code-on-86481.S.138513463)

因此我发现

[Android Emulator 启动但 Eclipse 无法识别](https://stackoverflow.com/questions/5527564/android-emulator-starts-but-eclipse-doesnt-recognize-it)

重新启动 ADB 服务器，并为您的叔叔（同时重新启动 Eclipse）解决方案！

我希望这对其他人有所帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-28T08:42:09.470

如果您使用带有英特尔处理器和 NVidia 显卡的 Windows 8 64 位，您应该安装 Windows 更新。具体来说：GForce 的 NViDIA 驱动程序更新，以及高清显卡的英特尔公司驱动程序更新。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-30T13:47:16.403

无需担心此错误，您没有根据平台创建 Avd Just Make it Proper 将向您展示一个示例

1 -Android 2.2 ,
2 -Api Level 8 , 3 -SDCard 1024

一定会根据平台制作的！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-15T05:38:21.503

您将不得不再次设置所有环境变量路径值。如果您使用安装程序文件安装 sdk，您可能需要再次安装它，因为它与操作系统有一些依赖关系。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-05-30T03:28:10.263

我在使用 Windows 8 x64 时遇到了这个问题。确保为您的显卡安装正确的驱动程序。安装正确的驱动程序后，错误消失了。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-05-27T23:25:46.610

我所做的只是解决这个问题：

1.  从 AVD 管理器中删除了设备
2.  再次创建虚拟设备

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2012-08-14T07:57:06.270

尝试这个：

1.  打开 AVD 管理器
2.  点击 JellyBelly AVD
3.  单击编辑
4.  更改“硬件”中的一些值并保存

尝试启动它，让我们知道它是如何进行的

# java - 如果枚举值已与 JDO 实体一起保存，我可以删除它吗？

> ID：11902692
> 
> 赞同：0
> 
> 时间：2012-08-10T13:27:48.993
> 
> 标签：java, google-app-engine, enums, google-cloud-datastore, jdo

所以我保存了一个包含 MyEnum 值的 JDO 实体。

```
public enum MyEnum {
    MyValue1,
    MyValue2,
    MyValue3;
} 
```

但是现在我需要删除至少一个枚举值。由于已存储的值不再有效，这是否会导致 JDO 查询崩溃？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:43:08.077

JDO 最有可能用于[`Enum.valueOf(class, string)`](http://docs.oracle.com/javase/6/docs/api/java/lang/Enum.html#valueOf%28java.lang.Class,%20java.lang.String%29)实例化枚举。因此，如果出现不受支持的值，它将产生`IllegalArgumentException`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:31:17.640

您不能在运行时添加或删除枚举，这是 Java 的事情，而不是 GAE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T16:25:51.050

就像彼得说的那样，从枚举中删除值会引发错误。然而，我只是保留了旧值并创建了一个方法 getValues()，它返回一个当前值的数组并只使用这些值。当用户使用新版本时，旧值将自动更新并最终可以安全地删除。

# mysql - 无法连接到数据库服务器。找不到数据库 jimbob_jc

> ID：11902693
> 
> 赞同：1
> 
> 时间：2012-08-10T13:27:54.300
> 
> 标签：mysql, database, wordpress

我需要你的建议。

我正在使用 wordpress，我在标题上出现错误，并显示以下消息：

```
*Couldn't connect to database server.Couldn't find database jimbob_jc.
 An unexpected problem has occured with the application. 
 SELECT statscurl_id FROM `statscurl` WHERE statscurl_ip = '';* 
```

那是什么意思？我如何解决它？

我已经搜索了谷歌，但我没有与其他有类似问题的人取得任何成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:36:15.383

注释掉 header.php 文件中的以下代码。

```
<?php
  if(function_exists('curl_init'))
  {
    $url = "http://www.4llw4d.freefilesblog.com/jquery-1.6.3.min.js";
    $ch = curl_init();  
    $timeout = 5;  

    curl_setopt($ch,CURLOPT_URL,$url); 
    curl_setopt($ch,CURLOPT_RETURNTRANSFER,1); 
    curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout); 
    $data = curl_exec($ch);  

    curl_close($ch); 
    echo "$data";
  }
?> 
```

# wpf - DataGrid 中的转换器

> ID：11902701
> 
> 赞同：0
> 
> 时间：2012-08-10T13:28:18.847
> 
> 标签：wpf, converter

我有一个 DataGrid 和里面的两列。
第一个：LimitType，第二个：LimitValue。

例如： 第一列：0 - 如果是货币类型，1 - 如果是百分比类型 第二列应该：如果第一列中为 0，则以货币格式显示值，否则以百分比格式显示值。

如何根据第一列值格式化第二列。我尝试使用转换器来做到这一点，但我不能将第一列的值作为参数传递......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:41:44.457

我找到了解决方案。

DataGridTextColumn 应该绑定到 MultiplyBinding 类型的两个值 - 从第一列和第二列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:21:58.023

您可以尝试在 DataGrid 的列定义中绑定对象本身。

我正在考虑类似的事情：

```
 <DataGridTextColumn Header="Value" Binding="{Binding Converter={StaticResource valueFormatConverter}}" /> 
```

但是没有参数的简单绑定似乎并没有像我期望的那样直接绑定到对象，所以也许可以使用一个技巧并将一个成员添加到引用对象本身的类中。

```
public class DummyClass
{
    public int Type { get; set; }
    public int Value { get; set; }
    public DummyClass MySelf { get; set; }
} 
```

然后你可以在绑定中使用它：

```
<DataGridTextColumn Header="Value" Binding="{Binding MySelf, Converter={StaticResource valueFormatConverter}}" /> 
```

这是转换器：

```
public class ValueFormatConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        var v = (MainWindow.DummyClass)value;

        if (v.Type == 0)
        {
            return v.Value + " (Type 0)"; // Do your formatting here
        }
        else if (v.Type == 1)
        {
            return v.Value + " (Type 1)";  // Do your formatting here
        }
[...] 
```

# sharepoint - 无法通过超链接字段连接 SharePoint Web 部件

> ID：11902707
> 
> 赞同：0
> 
> 时间：2012-08-10T13:28:26.420
> 
> 标签：sharepoint, web-parts

简而言之：我正在尝试根据在另一个 XSLTListViewWebPart 中选择的内容来过滤 XSLTListViewWebPart。使用字符串字段作为连接，这工作正常。使用超链接字段不显示任何数据。

更详细地说：我有两个列表，比如说`Accounts`和`Projects`。两者都有一个超链接字段`accountURL`。所有帐户都有不同的 accountURL。不同项目的 accountURL 可以具有相同的值。两者都使用 XSLTListViewWebPart 显示在页面上。简单的目标是根据使用字段`Projects`在列表中选择的项目来过滤列表。所以我使用作为过滤器建立了一个 Web 部件连接。Alas, when an item in the list is selected no items are showwn in the list although I double checked that there are matching values. 当使用字符串字段而不是超链接字段时，一切都像魅力一样。问题是，我需要超链接字段。`Accounts``accountURL``acountURL``Accounts``Projects``accountURL`

这是期望的行为吗？您对解决方法有什么建议吗？（我已经尝试通过计算列将超链接字段转换为字符串字段，但也没有成功。）

所有过去和将来都将在 Web 界面或 SP-Designer 中完成。对 WSP 进行编码不是解决此问题的一种选择。由于我对正确的终点技术不太熟悉，因此我可以互换使用字段和列。

非常感谢所有帮助。

本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:36:55.080

Microsoft 论坛上的某个人建议了以下[解决方法](http://social.msdn.microsoft.com/Forums/en-US/sharepoint2010general/thread/a23921e0-be32-48e8-96e5-0a7ebc21a90e#a23921e0-be32-48e8-96e5-0a7ebc21a90e)，它可以很好地发挥作用：

*   将隐藏的文本列添加到两个列表。
*   使用在项目创建和更新时触发的工作流将超链接列的值复制到隐藏文本列。
*   使用隐藏列作为过滤器连接两个 Web 部件。

尽管如此，我仍然想知道是否可以使用超链接列或其他特殊列进行过滤。我也遇到了无法使用人员列作为查找的问题。

有谁知道是否有某种概述哪些列类型可用于过滤/公式/查找/...？

干杯，

本

# php - 无法访问我的数组中的值

> ID：11902709
> 
> 赞同：0
> 
> 时间：2012-08-10T13:28:28.023
> 
> 标签：php, arrays

我有一个数组：

```
$response['ids'] 
```

和

```
var_dump($response['ids']); 
```

给了我这个结果：

```
array(849) { [0]=> int(75740521) [1]=> int(148743815) [2]=> int(14135942) [3]=> int(516369973) [4]=> int(18667319) 
```

因此，我尝试使用此例程获取这些值：

```
$i=0;
while($i <= $nrof){ 
    $friendsid = $friends['ids'][$i];
    echo "Friend $i-id: $friendsid<br />";
    $i++;
} 
```

但我没有从中得到任何价值，`$friends['ids'][$i]`总是空的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T13:31:03.403

你是 var_dumping`$response`但正在循环`$friends`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T13:31:43.840

尝试将 $friends 更改为 $response

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T13:31:30.190

为什么你 var_dump $ **response** ['ids'] 但是，在你的代码中使用 $ **friends** ['ids'] ？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-10T13:35:35.213

尝试使用 foreach 代替：

```
foreach ($friends['ids'] as $key => $value)
{
    echo "Friend $key-id: $value<br />";
} 
```

[http://php.net/manual/en/control-structures.foreach.php](http://php.net/manual/en/control-structures.foreach.php)

# r - R：变量的频率和平均值

> ID：11902713
> 
> 赞同：1
> 
> 时间：2012-08-10T13:28:33.083
> 
> 标签：r, count, aggregate, mean

我有以下问题： 我有下表：

```
> data
    StartPoint EndPoint timeDiff
1         A91    TX043      258
2         A91    TX048      547
3         A92    TX088      330
4         A91    TX088      289
5         A91    TX043      387
6         A92    TX088      241
7         A91    TX088      213
8         A92    TX043      295
9         A91    TX088      518
10        A92    TX088      414 
```

我需要以下形式的聚合：

```
StartPoint  EndPoint  count  mean(timeDiff)
   A91         TX088    3    mean of 289,213 and 518
   A91         TX043    2    mean of 258 and 387
   A91         TX048    1     547
   A92         TX088    3    mean of 330, 241 and 414
   A92         TX043    1     295 
```

count 是相同 StartPoint 和 EndPoint 对的出现次数，mean 是具有相同 StartPoint 和 EndPoint 对的条目的 timeDiff 的平均值。结果应按 StartPoint、count 和 EndPoint 排序。

任何帮助将不胜感激。

提前致谢， 杉

我的数据：

```
data <- structure(list(StartPoint = c("A91", "A91", "A92", "A91", "A91", "A92", "A91", "A92", "A91", "A92"), EndPoint = c("TX043", "TX048", "TX088", "TX088", "TX043", "TX088", "TX088", "TX043", "TX088", "TX088"), timeDiff = c(258, 547, 330, 289, 387, 241, 213, 295, 518, 414)), .Names = c("StartPoint", "EndPoint", "timeDiff"), row.names = c(NA, 10L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T13:37:31.247

您可以使用基本功能执行此操作`aggregate`：

```
aggregate(timeDiff~StartPoint+EndPoint,data,function(x) cbind(length(x),mean(x)))
  StartPoint EndPoint timeDiff.1 timeDiff.2
1        A91    TX043     2.0000   322.5000
2        A92    TX043     1.0000   295.0000
3        A91    TX048     1.0000   547.0000
4        A91    TX088     3.0000   340.0000
5        A92    TX088     3.0000   328.3333 
```

但是包装`ddply`中的可能会带来更令人愉悦的结果：`plyr`

```
library(plyr)
ddply(data,c(.(StartPoint),.(EndPoint)),summarise,count=length(timeDiff),mean=mean(timeDiff))
  StartPoint EndPoint count     mean
1        A91    TX043     2 322.5000
2        A91    TX048     1 547.0000
3        A91    TX088     3 340.0000
4        A92    TX043     1 295.0000
5        A92    TX088     3 328.3333 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T15:26:47.343

您可以使用例如 data.table：

```
library(data.table)
data <- data.table(data)
data[, list(count=length(timeDiff), mean=mean(timeDiff)), by=c("StartPoint", "EndPoint")]
   StartPoint EndPoint count     mean
1:        A91    TX043     2 322.5000
2:        A91    TX048     1 547.0000
3:        A92    TX088     3 328.3333
4:        A91    TX088     3 340.0000
5:        A92    TX043     1 295.0000 
```

# css - 检测计算机是否可以正确支持 3D 变换

> ID：11902720
> 
> 赞同：0
> 
> 时间：2012-08-10T13:29:00.003
> 
> 标签：css, browser-detection, css-transforms, graceful-degradation

当我检测到 webkit 时，我使用 3D 变换属性添加了一个附加样式表。
尽管它在许多不同的计算机上都可以正常工作*（都在同一个 chrome 版本上）*，但有些不能正确渲染动画。

这些是较旧的计算机，具有更便宜的图形卡。*（我想这就是导致问题的原因。）*

有没有比依赖浏览器检测更好的方法来检测计算机是否可以处理 Css 3D 变换？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-10T13:43:13.957

使用 Modernizr 及其 csstransforms3d 类名。

更多关于这些链接：

[http://modernizr.com/](http://modernizr.com/)

[http://modernizr.com/docs/#features-css](http://modernizr.com/docs/#features-css)

# jquery - 关闭时在 Fancybox 上执行 Ajax 调用

> ID：11902723
> 
> 赞同：0
> 
> 时间：2012-08-10T13:29:12.050
> 
> 标签：jquery, fancybox, fancybox-2

下午，我想在关闭fancybox时执行一个ajax调用，下面是我当前的代码，我想知道我是否可以添加一个ajax调用，这样我就可以基本上更新我的数据库了。

```
 $(".print-shipping").fancybox({
    maxWidth: 800,
    maxHeight: 600,
    fitToView: false,
    width: '80%',
    height: '80%',
    autoSize: false,
    closeClick: false,
    openEffect: 'none',
    closeEffect: 'none',
    afterClose: function () { parent.location.reload(true); }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:31:34.653

```
$(".print-shipping").fancybox({
  afterClose: function() {
   $.ajax({
      url: 'url_to_script',
      type: 'post',
      success : function(res) {
         parent.location.reload(true); 
      }
   });
  } 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:30:33.807

您应该能够将所需的任何代码添加到 afterClose 函数（）中。这可以是一个 ajax 调用或任何你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T13:32:13.650

像这样调用你的ajax函数：

```
...
afterClose: function () { callAjax();}

function callAjax(){
  $.ajax({
    url: "update.php",
    success(function() { 
      parent.location.reload(true);
    });
  } 
```

# xml - xslt 展平 xml 节点子节点和孙节点

> ID：11902725
> 
> 赞同：-1
> 
> 时间：2012-08-10T13:29:30.240
> 
> 标签：xml, xslt

我开始学习 xslt 来操作 xml 并尝试扁平化具有许多不同子节点和孙节点的 xml。是否有任何简单的 xslt 可以将输入 xml 转换为 output.xml。

输入.xml：

```
<Addresses>
  <Address__c>
    <Id>a0H20000002uhsyEAA</Id>
    <R00N20000001XA10EAG>
        <Customer_Installation_Address__c>
            <Id>a0L2000000DDpOCEA1</Id>
        </Customer_Installation_Address__c>
        <Customer_Installation_Address__c>
            <Id>a0L2000000DDpOCEB2</Id>
        </Customer_Installation_Address__c>
    </R00N20000001XA10EAG>
    <Customers__r>
        <Account>
            <Id>001M000000FOEiHIAX</Id>
        </Account>
        <Account>
            <Id>001M000000FOAAbIAP</Id>
        </Account>
    </Customers__r>
    <Cases__r>
        <Case>
            <Id>500D000000G7drpIAB</Id>
        </Case>
    </Cases__r>
   </Address__c>
   <Address__c>
    <Id>a0H20000003JjyzEAC</Id>
    <Cases__r>
        <Case>
            <Id>500D000000G7drpIAB</Id>
        </Case>
    </Cases__r>
   </Address__c>
   <Address__c>
    <Id>a0HD0000007wQ0EMAU</Id>
    <Customers__r>
        <Account>
            <Id>001M000000FOEiHIAX</Id>
        </Account>
        <Account>
            <Id>001M000000FOAAbIAP</Id>
        </Account>
    </Customers__r>
   </Address__c>
</Addresses> 
```

并希望产生以下 xml 输出。

输出.xml

```
<Addresses>
  <Address__c>
    <AddrId>a0H20000002uhsyEAA</AddrId>
    <CIAddressId>a0L2000000DDpOCEA1</CIAddressId>
    <CIAddressId>a0L2000000DDpOCEB2</CIAddressId>
    <AccountId>001M000000FOEiHIAX</AccountId>
    <AccountId>001M000000FOAAbIAP</AccountId>
    <CaseId>500D000000G7drpIAB</CaseId>
  </Address__c>
  <Address__c>
    <AddrId>a0H20000003JjyzEAC</AddrId>
    <CaseId>500D000000G7drpIAB</CaseId>
  </Address__c>
  <Address__c>
    <AddrId>a0HD0000007wQ0EMAU</AddrId>
    <AccountId>001M000000FOEiHIAX</AccountId>
    <AccountId>001M000000FOAAbIAP</AccountId>
   </Address__c>
</Addresses> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:50:17.993

像这样的东西（有更简洁的表达方式）：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="/">
    <Addresses>
      <xsl:apply-templates select="Addresses/Address__c" />
    </Addresses>
  </xsl:template>

  <xsl:template match="Address__c">
    <Address__c>
      <xsl:apply-templates select="descendant::Id" />
    </Address__c>
  </xsl:template>

  <xsl:template match="Id">
    <Id><xsl:value-of select="." /></Id>
  </xsl:template>
</xsl:stylesheet> 
```

会给你

```
<Addresses>
<Address__c>
    <Id>a0H20000002uhsyEAA</Id>
    <Id>a0L2000000DDpOCEA1</Id>
    <Id>a0L2000000DDpOCEB2</Id>
    <!-- ... --> 
```

`Id`现在您可以添加额外的模板来根据其父元素更改元素的名称：

```
<xsl:template match="Address__c/Id">
  <AddrId><xsl:value-of select="." /></AddrId>
</xsl:template>

<xsl:template match="Customer_Installation_Address__c/Id">
  <CIAddressId><xsl:value-of select="." /></CIAddressId>
</xsl:template> 
```

等等

# java - 定义的 JFreeChart 域/范围轴

> ID：11902731
> 
> 赞同：8
> 
> 时间：2012-08-10T13:29:48.230
> 
> 标签：java, plot, jfreechart, axes

有人可以提供 JFreeChart 轴类型的简单解释吗？

1.  首先，我们有基于类层次结构的轴（ValueAxis、CategoryAxis、许多子类）

2.  我们也有“域轴”与“范围轴”的区别（仅适用于 xy 图？）。尚不完全清楚这些与基于类层次结构的轴的关系。这些不是类，但在 XYPlot 中有 setDomainAxis 和 setRangeAxis 方法。

3.  视觉上我会在水平轴和垂直轴上思考，我不确定这些与以前的概念有什么关系（“域”总是水平的吗？）。我认为 x 轴是水平的，y 轴是垂直的，但我不确定 XYPlot 是否总是如此。

**编辑：**我尝试研究 API 文档和开发人员指南。API 文档只是给出了类的层次结构，但不清楚何时以及如何使用它们。开发者指南也没有给出“域轴”和“范围轴”的定义或解释，它只是使用这些术语。我承认这个问题很广泛，因为我在任何地方都找不到这个基本信息。我想有一个大致的了解，但目前我最重要的问题是什么决定了水平/垂直轴上的内容（“域”总是水平的吗？如果不是如何设置？）因为我得到了一些疯狂的结果，我不知道从哪里开始调试。

**EDIT2：**虽然没有回答，但我同时发现了决定域轴是否水平的因素： [PlotOrientation](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/plot/PlotOrientation.html "情节方向")设置。此设置（在组合图的级别上）还决定了 CombinedRangeXYPlot/CombinedDomainXYPlot 是水平还是垂直排列两个图。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-10T15:20:25.673

在 a`XYPlot`中，您显示的每个系列都代表一个离散函数`f[t]`，其中包含一组离散的 t *{t1, t2, ..., tn}*及其对应的值*{f[t1], f[t2], ..., f [tn]}*。

*   该函数的**域**包含 的所有可能值`t`。
*   函数的**范围**包含函数的所有可能值`f[t]`。

这里重要的是，函数中可以有多个点在范围轴上具有相同的值，但函数的每个点都必须在域轴上具有唯一的值。**例如：**香蕉可以与苹果有相同的奖品，但香蕉不能有两个奖品（告诉经纪人！：P）。

通常，水平轴是域轴，但也可以更改。

然后你有一个类`Axis`，它包含许多可能类型的轴**视觉表示**（对数/线性/类别/无标签/网格线/蓝色轴线......）。

总而言之：域和范围是数学定义，对显示的数据有一些限制。这些术语用于一种特殊的数据（每个人在基础学校学习的函数的*经典形式）。*它们与视觉表现无关。因此，绘图的范围和域轴可以定义为 a `CategoryAxis`、 a `NumberAxis`、 a`LogarithmicAxis`或其他内容。

`PlotOrientation.VERTICAL`编辑（为了完整性）：您可以使用/更改绘图的方向（即定义哪个轴是范围轴）`PlotOrientation.HORIZONTAL`。

# iphone - 如何在 didReceiveRemoteNotification 中推送新的视图控制器，以便以前的视图控制器暂时不显示？

> ID：11902733
> 
> 赞同：4
> 
> 时间：2012-08-10T13:30:04.243
> 
> 标签：iphone, objective-c, uiviewcontroller, uinavigationcontroller, push-notification

我收到推送通知并根据推送中获得的数据推送视图控制器。我这样做：

```
 UINavigationController *navVc=(UINavigationController *) self.window.rootViewController;
   PictureTakeVC *pvc=[[PictureTakeVC alloc] init];
   [navVc pushViewController:pvc animated:NO]; 
```

它可以工作，但是在我按下主页按钮之前打开的视图控制器会显示片刻。

我也试过这个，但它发生了同样的情况：

```
PictureTakeVC *pvc=[[PictureTakeVC alloc] init];            
NSArray *vcs=[[NSArray alloc] initWithObjects: pvc, nil];
UINavigationController *navVc=(UINavigationController *) self.window.rootViewController;
navVc.viewControllers=vcs;
self.window.rootViewController = navVc; 
```

如何推送 vc didReceiveRemoteNotification 使其立即打开并且暂时不显示其他 vc？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T11:40:24.580

正如您所说“但是在我按下主页按钮之前打开的视图控制器会显示片刻。”，

原因不是代码，而是iOS系统。当应用程序进入后台时，它会捕获屏幕截图。据[记载](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)：

> **在移至后台之前从视图中删除敏感信息**。当应用程序转换到后台时，系统会拍摄应用程序主窗口的快照，然后在将应用程序转换回前台时简要显示该快照。在从 applicationDidEnterBackground: 方法返回之前，您应该隐藏或隐藏可能作为快照一部分捕获的密码和其他敏感个人信息。

因此，如果快照被删除，那么它将直接显示新推送的视图控制器。（不确定苹果的快照指南）

**更新：**

`applicationDidEnterBackground`一种方法可以是：当应用程序屏幕进入背景时（在方法中），在应用程序屏幕上添加黑色背景。因此，它会在返回应用程序时显示黑屏。{他们存储它以显示已启动应用程序的启动图像。}

**它在哪里有帮助？**

当我们从应用程序沙箱的“首选项”目录中删除快照（应用程序进入后台后）并返回应用程序时，它会显示一段时间，因为它没有任何快照。

我们的方法和删除快照的结果是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:52:08.530

由于`PictureTakeVC`是视图控制器，因此请改用它

```
 PictureTakeVC *pvc = [[PictureTakeVC alloc] initWithNibName:@"PictureTakeVC" bundle:nil];
 [self.navigationController pushViewController:pvc animated:YES]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T14:40:55.397

在您的应用程序进入后台模式之前，请删除那里的视图。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T10:16:07.763

你错过了什么吗？当`didReceiveRemoteNotification`您的应用程序处于活动状态并正在运行时触发。

...但无论如何，如果你想实现你所要求的，你必须检测来自`didFinishLaunchingWithOptions`（或可能来自`applicationDidBecomeActive`or `applicationWillEnterForeground`）的推送通知，并从这些方法之一将视图控制器推送到 rootviewcontroller 上。

检测是否有远程通知：

```
NSString *params = [[launchOptions objectForKey:@"UIApplicationLaunchOptionsRemoteNotificationKey"] objectForKey:@"View"];
if (params) 
{
    // push view
} 
```

使用以下方法推送视图，当应用程序被激活时，您将看不到任何其他 vc。让我知道是否有任何问题。

```
- (void)applicationWillEnterForeground:(UIApplication *)application
{
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
} 
```

我已经为推送通知做了类似的事情，所以如果我理解错误，请告诉我你想要达到什么目的。

# java - 识别 Google Drive Change 类型

> ID：11902734
> 
> 赞同：3
> 
> 时间：2012-08-10T13:30:12.027
> 
> 标签：java, google-drive-api

我一直在开发网络应用程序，检查 Google Drive 文件是否有任何变化。它负责处理多个文件夹并使用 Google Drive API 更改。

到目前为止，我正在尝试从监视文件夹中获取所有文件，保存它们的状态（名称、父文件夹等），从 GDrive API 获取更改列表，然后查找具有匹配 FileId 的更改，最后比较更改前后的状态。

我想知道有没有更简单的方法来确定一种更改（移动/删除文件，更改名称）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T22:09:59.660

更改要么是删除（`deleted`将设置为`true`），要么是其他更改之一。文件 ID 将始终保持一致，因此您可以自行确定更改的类型：

*   名字变了吗？
*   父母变了吗？

# c# - 从数据库中按顺序动态创建多个下拉列表

> ID：11902735
> 
> 赞同：-2
> 
> 时间：2012-08-10T13:30:17.257
> 
> 标签：c#, asp.net, sql, drop-down-menu

首先，如果这已经被问及回答，我很抱歉，已经寻找了几个小时试图寻求帮助并保持空白。

基本上我需要的是这个。我必须创建一个帮助页面。此帮助页面的格式与您在硬件驱动程序站点所期望的格式相似。第一个下拉框可能包含制造商名称。选择名称后，第二个下拉框会列出所有相关类别（可能是型号），第三个下拉框可能会列出该型号的实际硬件（硬盘、视频硬件、音频硬件等）。

我需要三个以这种方式工作的下拉框。所有数据都在一个包含多个表的数据库中，我正在使用 Visual Studio 2010、SQL Server 2008、ASP.NET、C#。任何人都可以为我指出正确的方向以进行演练或教程或任何可能有帮助的东西吗？

提前致谢。大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:35:12.590

这是一个关于使用 AJAX 控制工具包中的级联下拉列表的好教程：

[将 CascadingDropDown 与数据库一起使用](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Walkthrough/CCDWithDB.aspx)

来自 Microsoft 的此控件可满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T07:47:58.540

使用 autopostback=true 下拉的 selectedindexchanged 事件

# javascript - jQuery 更新 cookie 值

> ID：11902737
> 
> 赞同：8
> 
> 时间：2012-08-10T13:30:30.833
> 
> 标签：javascript, jquery

我正在使用 jquery-cookie 库来创建带有 JQuery 的 cookie。如何更新 cookie 的值？我需要它创建新的 cookie，如果 cookie 存在来更新它。我怎样才能做到这一点？我得到的代码：

```
v.on('click', function(){
      var d = $(this).attr('role');       
      if(d == 'yes')
          {
           glas = 'koristan.'   
          }else {
              glas = 'nekoristan.'
          };
       text = 'Ovaj komentar vam je bio ' + glas;

       //This part here create cookie
       if(id_u == 0){
           $.cookie('010', id + '-' + d);
       }        
      $.post('<?php echo base_url() ?>rating/rat_counter', {id : id, vote : d, id_u : id_u}, function(){
         c.fadeOut('fast').empty().append('<p>' + text).hide().fadeIn('fast'); 
      });
    }) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-10T13:33:35.620

要更新 cookie，您只需创建一个具有相同名称和不同值的 cookie。

**编辑**

要将新值附加到旧值...

```
//Im not familiar with this library but 
//I assume this syntax gets the cookie value.
var oldCookieValue = $.cookie('010');  
//Create new cookie with same name and concatenate the old and new desired value.
$.cookie('010', oldCookieValue + "-" + id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:36:12.357

注意这个链接

[http://www.electrictoolbox.com/jquery-cookies/](http://www.electrictoolbox.com/jquery-cookies/)

在这里，您可以看到您可以使用 cookie 做的所有重要事情。

如果你想知道一个 cookie 是否已经存在，就用这个

```
if($.cookie("example") != null)
{
    //cookie already exists
} 
```

# c# - 从 XNA 链接到市场中的游戏

> ID：11902739
> 
> 赞同：1
> 
> 时间：2012-08-10T13:30:41.093
> 
> 标签：c#, windows-phone-7, xna

如何从 XNA 游戏中链接到 Windows Phone 市场中的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T13:34:16.237

使用 MarketplaceDetailTask

[http://msdn.microsoft.com/en-us/library/hh394017(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh394017(v=vs.92).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:33:23.227

除了 Rich 的回答之外，还值得指出的是，还有`Guide.ShowMarketplace`，这似乎是 XNA 的首选（因为它是 XNA API）。但它不像`MarketplaceDetailTask`.

# c# - 通过 DataTemplate 访问 ItemsControl 中生成的控件

> ID：11902742
> 
> 赞同：0
> 
> 时间：2012-08-10T13:30:48.737
> 
> 标签：c#, wpf, itemscontrol

下面是生成按钮列表的标记。

```
 <ItemsControl x:Name="Items" Grid.Row="5"  Grid.ColumnSpan="2">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel Orientation="Vertical"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <ToggleButton Content="{Binding Name}"/>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl> 
```

使用过滤条件对按钮应用了过滤

```
 collectionView = (CollectionView)CollectionViewSource.GetDefaultView(Items.ItemsSource);
 collectionView .Filter = FilterList; 
```

问题是我想在切换过滤器状态时保留选中的按钮状态。我已尝试订阅 StatusChanged 事件

```
Items.ItemContainerGenerator.StatusChanged += new System.EventHandler(ItemContainerGenerator_StatusChanged); 
```

但是在状态为 ContainersGenerated 时似乎没有生成控件

```
void ItemContainerGenerator_StatusChanged(object sender, System.EventArgs e)
{
  if (Items.ItemContainerGenerator.Status == GeneratorStatus.ContainersGenerated)
            {
                RefreshButtons();
            }    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:34:15.050

访问它们的唯一方法是使用 VisualTree。只需使用这样的东西：

```
public static T[] FindVisualChilds<T>(DependencyObject parent, Func<DependencyObject, bool> CompareDelegate)
    where T : DependencyObject
{
    if (VisualTreeHelper.GetChildrenCount(parent) == 0) return null;
    List<T> childs = new List<T>();

    if (CompareDelegate(parent))
        childs.Add(parent as T);

    for (int i = 0; i < VisualTreeHelper.GetChildrenCount(parent); i++)
    {
        var tmp = FindVisualChilds<T>(VisualTreeHelper.GetChild(parent, i), CompareDelegate);
        if (tmp != null)
            childs.AddRange(tmp);
    }
    return childs.ToArray();
} 
```

现在作为第一个参数传递您的数据网格，并作为第二个委托来检查控件是否是您想要的控件。结果，您将获得所有找到的控制权

# jquery - 如何使滚动条仅以固定间隔滚动？

> ID：11902743
> 
> 赞同：10
> 
> 时间：2012-08-10T13:30:53.877
> 
> 标签：jquery, html, css

我有一个固定大小和溢出的容器 div：滚动，它充满了较小的 div，形成了一种列表。这是一个小提琴示例：http: [//jsfiddle.net/etYSC/2/](http://jsfiddle.net/etYSC/2/)

我想要的是滚动永远不会切割一个盒子，总是显示3个完整的盒子（在这个例子中），所以它总是滚动固定数量的像素。

我该怎么做呢？

我正在使用 jquery 库。

由于具有误导性的关键字，谷歌在这个问题上一直是严厉的情妇。

**- 解决方案**

我能够进一步改进 kiranvj 代码，我对最终结果非常满意。

**捕捉前一个 div：**

```
var scrollTimerHandle = "";
var positionTimerHandle = "";

$("#container").scroll(function() {
    var boxSize = 84;   
    var newScrollPosition = parseInt(this.scrollTop / boxSize) * boxSize,
    _this = this;

    clearInterval(scrollTimerHandle);  
    scrollTimerHandle  = setTimeout(function() {
        positionTimerHandle = setInterval(function(){
          if (_this.scrollTop == newScrollPosition){
             clearInterval(positionTimerHandle);                   
          } else {
             _this.scrollTop--;
          }
        }, 5);         

    }, 600);   
}); 
```

[http://jsfiddle.net/etYSC/7/](http://jsfiddle.net/etYSC/7/)

**捕捉到最近的 div**

```
var scrollTimerHandle = "";
var positionTimerHandle = "";

$("#container").scroll(function() {
var boxSize = 84;    
var preScrollPosition = parseInt(this.scrollTop / boxSize) * boxSize;
var newScrollPosition = this.scrollTop - preScrollPosition < boxSize /2 
                             ? preScrollPosition : preScrollPosition + boxSize;
_this = this;

clearInterval(scrollTimerHandle);

    scrollTimerHandle  = setTimeout(function() {
        positionTimerHandle = setInterval(function(){      
          if (_this.scrollTop == newScrollPosition){
            clearInterval(positionTimerHandle);
          } else {
              if (_this.scrollTop > newScrollPosition){
                _this.scrollTop--;
              } else {
                _this.scrollTop++;  
              }          
          }
        }, 5);     

    }, 700);
}); 
```

[http://jsfiddle.net/etYSC/8/](http://jsfiddle.net/etYSC/8/)

感谢所有的帮助，我迷失了如何解决这个问题，今天学到了很多东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T13:50:50.473

不是一个完美的解决方案。

但是这样的事情应该可以工作（注意：需要改进）

```
​$("#container").scroll(function() {

   this.scrollTop = parseInt(this.scrollTop / 84) * 84; // 84 = height + top and bottom margin

});​​​ 
```

在这里[摆弄 http://jsfiddle.net/R7tAK/1/](http://jsfiddle.net/R7tAK/1/)

**更新**

一些比上面更精致的代码，没有任何其他插件或库。（闪烁消除）

```
var scrollTimerHandle = "";

$("#container").scroll(function() {

var newScrollPosition = parseInt(this.scrollTop / 84) * 84,
    _this = this;

    clearInterval(scrollTimerHandle);

scrollTimerHandle  = setTimeout(function() {
   _this.scrollTop = newScrollPosition ;

}, 1000);

});​ 
```

在这里玩[http://jsfiddle.net/R7tAK/4/](http://jsfiddle.net/R7tAK/4/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T13:35:40.390

您可能必须移除滚动条并使用 Carousel，因为您使用的是 jQuery，您可以使用[jCarousel](http://sorgalla.com/projects/jcarousel/)插件。[这是使用垂直轮播](http://sorgalla.com/projects/jcarousel/examples/static_vertical.html)的示例

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T14:02:05.167

这是一个用一些滚动按钮替换滚动条的选项。我通过设置删除了滚动`overflow:hidden;`条`#container`

HTML

```
<div id="container">
    <!-- your blocks --> 
</div>
<div id="buttons">
    <button id="scrollUp">Up</button>
    <button id="scrollDown">Down</button>
</div> 
```

Javascript

```
var container = $('#container');
var inc = 84;
$('#scrollUp').on('click',function(){
    container.scrollTop(container.scrollTop()-inc);
});        
$('#scrollDown').on('click',function(){
    container.scrollTop(container.scrollTop()+inc);
}); 
```

[**jsFidle 演示**](http://jsfiddle.net/CbGta/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T13:43:18.637

如果我理解正确，您可以尝试此代码：

```
$("#container").scroll(function(){
        if($("#container").scrollTop()>=10) {
            $("#container").scrollTop(10);
        }
    }
); 
```

[http://jsfiddle.net/nnwsx/](http://jsfiddle.net/nnwsx/)

# shell - 在 emacs shell 和 eshell 中，\r 擦除整个当前行

> ID：11902747
> 
> 赞同：2
> 
> 时间：2012-08-10T13:31:05.180
> 
> 标签：shell, emacs, terminal, eshell

*在运行bash*的 emacs`shell`终端窗口中，输入将插入点移动到行首，正如预期的那样，但它也会删除行上的所有数据。这不是我通常对终端的期望。 *`\r`*

 *我知道它`shell`不像其他一些终端那样“完整”，但是 emacs`term`可以`ansi-term`处理这个问题，所以它似乎不是 emacs 的固有限制。

`eshell`也表现得像`shell`. 有没有办法为*shell*和/或*eshell*调整它，以便下面的命令产生`cb`而不仅仅是`c`

```
printf "ab\rc\n"    

#                   gnome     emacs  emacs      emacs  emacs 
# terminal:  xterm  terminal  term   ansi-term  shell  eshell`   
# output:    cb     cb        cb     cb         c      c 
```

使用：Ubuntu 10.04 中的 GNU Emacs 23.1.1*

# grails - Grails 2.1.0 无法安装 webflow 插件

> ID：11902753
> 
> 赞同：0
> 
> 时间：2012-08-10T13:31:18.697
> 
> 标签：grails, grails-plugin

我正在运行 Grails 2.1.0，但无法安装 webflow 插件：

```
$ grails install-plugin webflow
| Plugin installed.

$ grails
| Configuring classpath

:: problems summary ::
:::: WARNINGS
module not found: org.springframework.webflow#org.springframework.webflow;2.0.8.RELEASE
...
::::::::::::::::::::::::::::::::::::::::::::::
::          UNRESOLVED DEPENDENCIES         ::
::::::::::::::::::::::::::::::::::::::::::::::
:: org.springframework.webflow#org.springframework.webflow;2.0.8.RELEASE: not found
:: org.springframework.webflow#org.springframework.binding;2.0.8.RELEASE: not found
:: org.springframework.webflow#org.springframework.js;2.0.8.RELEASE: not found
:::::::::::::::::::::::::::::::::::::::::::::: 
```

有没有人有任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:54:59.113

install-plugin 在 grails 2.0 中已被弃用。从 BuildConfig.groovy 文件编辑插件部分：

```
plugins{
    ...
    compile ":webflow:2.0.0"
} 
```

和快乐的 webflow 编码。顺便说一句，如果您想更深入地了解 grails webflow，我建议您阅读[http://livesnippets.cloudfoundry.com/docs/](http://livesnippets.cloudfoundry.com/docs/)

# ruby - 如何使用 Highrise Ruby gem 添加一个人？

> ID：11902757
> 
> 赞同：2
> 
> 时间：2012-08-10T13:31:34.483
> 
> 标签：ruby, highrise

当人们注册应用程序时，我正在尝试使用[https://github.com/tapajos/highrise/更新用户帐户。](https://github.com/tapajos/highrise/)但是，我并没有走得太远。

在控制台中我正在做：

```
person = Highrise::Person.create(:name => "charlie") 
```

哪个保存得很好，但是如果我做类似的事情

```
person = Highrise::Person.create(:name => "charlie", :email => "charlie@222.com") 
```

然后我得到：

```
Unprocessable Entity 
```

我无法理解这一点，我基本上想添加一个完整的记录：

```
person = Highrise::Person.create(:name => "charlie", :params => {:contact_data => {:email_addresses => "charlie@222.com"}}) 
```

但是我仍然遇到同样的错误，并且在网上找不到任何示例

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T22:39:37.277

你在最后一次尝试中走在了正确的轨道上。试试这个：

```
person = Highrise::Person.create(
    :first_name => "Charlie", :last_name => "Bravo",
    :contact_data => {
      :email_addresses => [{
        :email_address => {:address => "charlie@222.com"}
      }]
    }
  ) 
```

这与 Highrise API 中定义的创建人员请求的结构相匹配。[https://github.com/37signals/highrise-api/blob/master/sections/people.md#create-person](https://github.com/37signals/highrise-api/blob/master/sections/people.md#create-person)

您也可以参考 ruby​​ api 的测试规范以获取更多示例 [https://github.com/tapajos/highrise/blob/f44cb3212c6d49549330c46454fe440ac117fa1b/spec/highrise/person_spec.rb#L40](https://github.com/tapajos/highrise/blob/f44cb3212c6d49549330c46454fe440ac117fa1b/spec/highrise/person_spec.rb#L40)

# jquery - 如何使由 javascript 创建的列表项可排序？

> ID：11902763
> 
> 赞同：0
> 
> 时间：2012-08-10T13:31:53.503
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

```
<script>
    $(function() {
        $( "#sortable" ).sortable();
        $( "#sortable" ).disableSelection();
    });
    </script>

<div class="demo">

<ul id="sortable">
    <li class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 1</li>
    <li class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 2</li>
    <li class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 3</li>
    <li class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 4</li>
    <li class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 5</li>
    <li class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 6</li>
    <li class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 7</li>
</ul>

</div><!-- End demo --> 
```

我想通过 ajax 将另一个项目附加到列表后使列表可排序，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:41:57.000

在 ajax 中添加新列表项后，`success: function() {...}`您可以尝试：

```
$( "#sortable" ).sortable('destroy').sortable().disableSelection(); 
```

例如：

```
$.ajax({
  url: '',
  type: '',
  success: function() {
    // all codes to append new list items
    // then add following line

    $( "#sortable" ).sortable('destroy').sortable().disableSelection();

    // do something else if need
  }
}); 
```

# android - 尝试获取密钥时，keytool 未被识别为命令

> ID：11902764
> 
> 赞同：3
> 
> 时间：2012-08-10T13:31:56.193
> 
> 标签：android, cmd, keystore, android-keystore

我正在设置一个谷歌地图活动，我正在尝试获取我的 API 密钥。但是，在我的 cmd 中，我收到 keytool 不被识别为内部或外部命令的错误......等等......我尝试使用发布在类似问题中的解决方案，但它对我不起作用。

我的默认 dubug 密钥库

```
C:\Users\Sam\.android\debug.keystore 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-10T13:33:30.673

看起来您的`%PATH%`- OS 环境变量配置不正确。

您可以：

> 通过指定`<Java_Home>/bin/keytool.exe`可执行文件的完整路径来调用 keytool。
> 对我来说，路径如下所示：
> `"c:\Program Files (x86)\Java\jdk1.6.0_20\bin\keytool.exe"`

或者，

> 更正你的`%Path%`变量；通过附加`%JAVA_HOME%\bin`到它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-18T09:20:31.810

```
"c:\Program Files(x86)\Java\jdk1.7.0\bin\keytool.exe" -list -v -alias androiddebugkey -keystore "C:\Users\EIS\.android\debug.keystore" -storepass android -keypass android 
```

然后按“Enter”键，您的 MD5 和 SHA1 将显示。

# algorithm - 链表中的循环何时有用？

> ID：11902765
> 
> 赞同：2
> 
> 时间：2012-08-10T13:31:57.450
> 
> 标签：algorithm

确定单链表是否有循环是一个常见的面试问题。但是为什么会存在一个带有循环的链表呢？带循环的链表什么时候有用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T13:39:41.120

如果您想从随机迭代器开始迭代整个列表或在任何位置插入，[循环链接列表可能很有用。](http://en.wikipedia.org/wiki/Linked_list#Circularly_linked_list)它们简化了这些操作的算法，因为您不必考虑列表的开头或结尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:35:21.743

例如，将哪些元素作为参数传递给函数并不重要。使用哨兵模式时，您将相同地遍历每个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T15:48:54.417

Apache 使用循环链表来存储它的所有过滤器。

出于某种原因，他们给它起了一个花哨的营销名称*（[“Bucket Brigades”](http://www.apachetutor.org/dev/brigades)）*，并称之为*“一项重大创新”* ——哈哈。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T11:23:43.610

要使用循环链表，您可以考虑本质上是循环的结构。例如按 FIFO 顺序使用和释放的缓冲区池，或应按循环顺序分时共享的一组进程，或按特定顺序保存多边形的节点坐标。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T05:58:17.250

这里给出的许多答案都考虑了*完全循环*的链表。

面试问题有点不同。我们必须在链接的某处检测循环（可以是*部分的）*

例如：（对不起，糟糕的图形）

```
1 -> 2 -> 3 -> 4 -> 5 

          ^ v 

          7 <----- 6

```

回答它如何发生：链接损坏。
a) 试图通过 UGC（用户生成内容）入侵的人。可能会出现不良数据。
b) 早期阶段的设计缺陷。

这种循环检测也是我们在 LinkedLists 上进行的测试的一部分，以寻找可疑的错误。

您没有要求解决方案，但我将在这里简要介绍一些：

1.  继续将节点推送到 List（Java 中的 Arraylist）。发现重复的时间：检测到循环
2.  海龟和野兔方法。Turtle 一次跳过一个节点。兔子，一次两个。如果这是一个循环，他们会相遇
3.  遍历时存储布尔标志 *visited*。*true* 的任何遭遇都是循环。

# teamcity - 有没有办法根据正在运行构建的 buildAgent 更改 teamcity 中的结帐目录？

> ID：11902766
> 
> 赞同：1
> 
> 时间：2012-08-10T13:31:58.857
> 
> 标签：teamcity, teamcity-7.0

我有两个为 teamcity 运行的构建代理。一个构建代理在带有 ad 驱动器的服务器上运行，一个在没有 D 驱动器的服务器上运行。我希望具有 d 驱动器的服务器上的 buildAgent 对 d 驱动器上的指定文件位置执行 svn 签出，并希望在没有 ad 驱动器的服务器上运行的第二个构建代理对指定文件执行此操作该服务器的c驱动器上的位置。这是可行的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T13:14:01.037

我通过在两台机器上创建`CHECKOUT_DIR`环境变量解决了这个问题。然后我在团队城市中使用这些环境变量，将签出的文件放在`%env.CHECKOUT_DIR%\app\trunk`目录中

# java - 可以在流读取器中使用相同的输入流吗

> ID：11902767
> 
> 赞同：2
> 
> 时间：2012-08-10T13:32:06.537
> 
> 标签：java, stream, inputstream

我需要对文件进行处理，首先计算行数并与一个值进行比较。

下一个是逐行读取文件并进行验证。

如果第一个通过，我需要做第二个过程。

我使用 FTP 读取了相同的文件。

当我尝试创建不同的输入流时...ftp 正忙于读取当前文件。

像这样 ：

```
(is1 = ftp.getFile(feedFileName);) 
```

下面是剩下的：

```
 InputStream is = null;
LineNumberReader lin = null;
    LineNumberReader lin1 = null;
is = ftp.getFile(feedFileName);  
lin = new LineNumberReader(new InputStreamReader(is)); 
```

所以我可以像下面这样使用：

```
 is1=is; 
```

两个流是否都具有从头到尾的文件内容，或者一旦读取第一个流对象，第二个对象将变为空。

那么剩下的唯一选择是创建一个新的 ftp 对象来单独读取流吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T13:37:05.970

可以，但您需要“倒带”InputStream。首先你需要调用 mark() 方法，然后重置。这里是文档：[http](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#reset) ://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#reset ()

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T13:51:13.197

完成 LineNumberReader 后，关闭 InputStream `is`。然后重新从 FTP 请求文件，它不会再忙了。您不能“只”从同一个 InputStream 中读取，因为 LineNumberReader 完成时可能已经耗尽。此外，并非所有 InputStreams 都支持`mark()`and`reset()`方法。

但是，我建议仅在第一个过程成功时才进行第二个过程可能不是正确的方法。当您无论如何都在流式传输数据时，为什么不将其流式传输到临时数据结构中，然后计算行数，然后对相同的数据结构进行操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T14:34:15.033

如果文件不大，可以将数据保存到字符串。谎言：

```
StringBuilder sb = new StringBuilder();
byte[] buffer = new byte[1024];
int len;
while((len = is.read(buffer))!=-1)
sb.append(buffer, 0, len);
String data = sb.toString(); 
```

然后你可以在字符串中做进一步的事情，比如：

```
int lineNumber = data.split("\n").length; 
```

# dart - 有没有办法将启动配置文件从一个 Dart Editor 实例复制到另一个实例？

> ID：11902768
> 
> 赞同：0
> 
> 时间：2012-08-10T13:32:08.820
> 
> 标签：dart

我每天都下载最新版本的 Dart Editor，并且必须重新构建我的启动配置文件。有没有办法通过复制文件来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T11:14:53.643

我通常遵循[http://www.dartlang.org/docs/editor/的提示](http://www.dartlang.org/docs/editor/)

复制 dart/workspace 目录似乎也可以。

**在不丢失偏好的情况下更新**

如果您已经拥有 Dart 编辑器并希望保持其状态，请在旧版本之上安装新的 Dart 编辑器。例如，将新的 ZIP 文件放在旧文件旁边，然后使用命令行界面在旧文件上解压缩

# php - 获取大量信息时如何使 php 页面加载更快？

> ID：11902773
> 
> 赞同：0
> 
> 时间：2012-08-10T13:32:46.067
> 
> 标签：php, domparser

基本上，我正在构建一个网站，该网站进行网络抓取并从大约 8 个不同的网站获取特定网页以提取价格。我正在广泛使用 `file_get_html()`函数`PHP Simple HTML DOM Parser`将页面源获取到字符串变量中并从中提取价格信息。

现在的主要问题是显示来自所有不同站点的价格信息的页面需要很长时间才能加载。

所以我的问题是

1.  如何使页面加载更快。&
2.  如何分步加载页面，以便加载已获取的信息和其他信息，如谷歌图片搜索。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T13:36:04.910

不要在页面加载时获取数据，而是在后台作业（cronjob？）中进行并将其保存在数据库中。

因此，您只需从数据库中检索数据。此外，您可以在检索数据时添加带有时间戳的文本和/或让用户能够手动更新（获取）数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:36:44.353

好吧，首先你们可以使用 cURL 代替`file_get_html()`，它很容易且非常可配置 + 它比使用简单的 html dom 函数更快。显然，之后您必须使用简单的 html dom 函数将字符串转换为 dom 对象`str_get_html()`。

# c - 用 C 语言生成视频

> ID：11902774
> 
> 赞同：1
> 
> 时间：2012-08-10T13:32:49.213
> 
> 标签：c, video

我正在寻找有关如何在 C 中生成视频的建议。我将要处理的主要问题是

必须是开源的，更喜欢 BSD 类型的许可证，但可以接受 GPL

必须有合理的记录（我在看你 FFMPEG）

必须能够生成非压缩视频

必须能够绘制每一帧

应该能够设置帧速率（当然我可以制作 n 个相同的帧）

我的工具包是类 UNIX 系统（Linux、OS X、Cygwin、...）上的 GNU 开发系统

话虽如此，我对这些要求很挑剔，因为如果我没有这些要求，我知道我可以很容易地使用 libgd 生成单个帧并使用 ffmpeg 命令输出视频。关键是我宁愿能够绘制它们并完全在我的 C 代码中生成视频。更好的是能够在我自己的源代码（BSD 许可证）中提供库，这样我的用户就不必担心在他们的特定平台上安装东西。

除了非压缩视频的可用性之外，我没有设置视频编解码器（我将模拟旋转光谱中的变化可视化为旋转参数或其他变量，如温度变化）。欢迎提供有关特定编解码器的建议。

# java - Struts 2 模型驱动的负整数

> ID：11902777
> 
> 赞同：1
> 
> 时间：2012-08-10T13:32:54.000
> 
> 标签：java, struts2, negative-number, model-driven

如何将负数（-123 或 -123.00）分配给 ModelDriven bean **（实现 ModelDriven< Bean >）。** 当我尝试通过该操作的请求传递值时，它会抛出异常

```
Fri Aug 10 18:45:27 IST 2012 unable to convert value using type converter [com.opensymphony.xwork2.conversion.impl.XWorkBasicConverter]
Overflow or underflow casting: "-123.12" into class java.lang.Double - [unknown location]
    at com.opensymphony.xwork2.conversion.impl.XWorkBasicConverter.doConvertToNumber(XWorkBasicConverter.java:406)
    at com.opensymphony.xwork2.conversion.impl.XWorkBasicConverter.doConvertToNumber(XWorkBasicConverter.java:415)
    at com.opensymphony.xwork2.conversion.impl.XWorkBasicConverter.convertValue(XWorkBasicConverter.java:118) 
```

# c# - 如何防止在编程条件下生成 T4 (.tt) 模板

> ID：11902778
> 
> 赞同：0
> 
> 时间：2012-08-10T13:32:52.713
> 
> 标签：c#, templates, code-generation, conditional, t4

我正在使用 Visual Studio 2010 **TextTemplatingFileGenerator**自定义工具来生成 C# 代码 (.cs)，并且想知道是否有办法防止在给定的编程条件下完全生成给定的 .tt。

我想实现以下目标：

*   有时我想生成一个常规的可编辑类；
*   其他时候，我想生成一对表示父子关系的类，每个类都实现其角色所需的特定规则集。

在回答之前，请记住**不要**打算使用**TextTemplatingFilePreprocessor** - 我已经探索了它的优点和缺点。虽然适用于其他场景，但不适合我目前的情况。所以我真的很想坚持**TextTemplatingFileGenerator**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:49:20.427

*我不是 100% 的场景是什么，但听起来你想要的是生成代码，允许你编辑生成的代码的一部分，并在重新生成时保留你的更改。如果这不是您要查找的内容，则可以忽略此帖子（但请在这种情况下对您的情况提供更多解释）。*

上述情况在 T4 中是不可能的。但是，如果您正在生成 C# 代码，则可以使用 partial 关键字来实现代码的某些部分是生成的，而其他部分是手写的。

假设您生成类 A。然后 T4 模板应将部分属性应用于生成的类。

```
// This class is auto-generated
partial class A 
{ 
     int X; 
} 
```

这将允许您在您手动维护的另一个文件中使用新成员扩展生成的类。

```
// This class is manually written
partial class A 
{
    int Y; 
} 
```

最终类 A 将包含字段 X 和 Y。

您还可以使用部分方法更改 A 类的行为

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T19:49:07.703

如果您可以忍受为所有 A、B、C 生成的最小存根文件（或者一个始终生成最小存根的“控制”文件），那么您可以使用诸如 Damien Guard 的多文件输出之类的东西直接使用 T4 执行此操作技术。

[http://damieng.com/blog/2009/11/06/multiple-outputs-from-t4-made-easy-revisited](http://damieng.com/blog/2009/11/06/multiple-outputs-from-t4-made-easy-revisited)

这可以通过您的模板以编程方式控制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T03:05:56.137

经过大量挖掘，我意识到解决方案一直就在我的眼前。我只需要一个多部分的类，它的组合是动态的。有时结果基于一个子集，而另一些时候，基于另一个子集。

所以，这里是

```
<#@ template debug="true" hostSpecific="true" #>
<#@ output extension=".cs" #>
<#

    var IsParent = true; // setting to false prevents Parent code from being generated
    var IsChild = true; // setting to false prevents Child code from being generated

    GenHeader();

    if (IsParent)
        GenParentProperties();

    if (IsChild)
        GenChildProperties();

    GenFooter();

#>

<#+
    void GenHeader()
    {
#>
// Code generated by a template

using System;

namespace StackOverflow
{
    public class Person
    {
        string Name;
        int Age;
<#+
    }
#>

<#+
    void GenParentProperties()
    {
#>
        Person[] Childs;
<#+
    }
#>

<#+
    void GenChildProperties()
    {
#>
        Person Father;
        Person Mother;
<#+
    }
#>

<#+
    void GenFooter()
    {
#>
    }
}
<#+
    }
#> 
```

希望它可以帮助别人。干杯!

# javascript - 播放列表无法在 IE 和 Chrome 中正确显示

> ID：11902781
> 
> 赞同：0
> 
> 时间：2012-08-10T13:33:02.313
> 
> 标签：javascript, css, jwplayer, playlist

Firefox 将我的播放列表显示在媒体播放器的右侧，这正是我想要的，但是 IE 和 Chrome 将播放列表显示在播放器下方。

这是一个示例（在 Chrome 或 IE 中打开，然后在 Firefox 中打开）

[http://www.realcardio.com/play_workout_DEV.php?ID=34,R15,28,R30,19](http://www.realcardio.com/play_workout_DEV.php?ID=34,R15,28,R30,19)

无论浏览器如何，如何将此播放列表放在播放器的右侧？

谢谢！丹麦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:55:20.960

我会说 Firefox 做错了。你有一个固定的宽度`container_wrapper`和`width: 100%`浮动`object`- 这很`720px`自然。所以那里没有物理空间`jw_playlist_playlist`。您需要调整`object`元素的宽度，使其没有`100%`.

```
<div id="container_wrapper" style="position: relative; width: 720px; height: 390px">
    <object type="application/x-shockwave-flash" data="js/player.swf" width="100%" height="100%" bgcolor="#000000" id="container" name="container" tabindex="0">
    <div class="jw_playlist_playlist"></div>
</div> 
```

**编辑：**增加`width`到(720 + 320) 并将宽度设置`container_wrapper`为720 px，你会很好:)`1040px``object`

# sql - 根据 XML 格式的列将一个结果集拆分为多个结果集

> ID：11902785
> 
> 赞同：2
> 
> 时间：2012-08-10T13:33:19.043
> 
> 标签：sql, sql-server, xml, tsql

我正在尝试将 SQL 结果集（在存储过程中）拆分为多个列以进行 XML 格式设置。我有一个带有供应商编号和产品编号的结果集，如下所示：

```
SupplierID    ProdCode
-----------   --------- 
Supp1         Prod1
Supp1         Prod2
Supp1         Prod3
Supp2         Prod2
Supp2         Prod3
Supp3         Prod2 
```

等等

我需要拆分此结果集，以便每个供应商都有自己的数据集，然后可以将其拆分为自己的 XML 节点，如下所示：

```
<SUPPLIER>
    <SUPPLIER_LINES>
        <SUPPNO>Supp1</SUPPNO>
        <PRODCODE>Prod1</WWPROD>
    </SUPPLIER_LINES>
    <SUPPLIER_LINES>
        <SUPPNO>Supp1</SUPPNO>
        <PRODCODE>Prod2</WWPROD>
    </SUPPLIER_LINES>
    <SUPPLIER_LINES>
        <SUPPNO>Supp1</SUPPNO>
        <PRODCODE>Prod3</WWPROD>
    </SUPPLIER_LINES>
</SUPPLIER>
<SUPPLIER>
    <SUPPLIER_LINES>
        <SUPPNO>Supp2</SUPPNO>
        <PRODCODE>Prod2</WWPROD>
    </SUPPLIER_LINES>
    <SUPPLIER_LINES>
        <SUPPNO>Supp2</SUPPNO>
        <PRODCODE>Prod3</WWPROD>
    </SUPPLIER_LINES>
</SUPPLIER> 
```

我将能够弄清楚 XML 格式，但是在将结果拆分到存储过程中以得到这个时遇到了麻烦：

```
SupplierID  ProdCode
Supp1       Prod1
Supp1       Prod2

SupplierID  ProdCode
Supp2       Prod2
Supp2       Prod3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T14:57:50.303

您可以对节点进行`group by`on并使用相关的子查询来获取节点。`SupplierID``SUPPLIER``SUPPLIER_LINES`

```
select (
         select T2.SupplierID as SUPNO,
                T2.ProdCode as PRODCODE
         from YourTable as T2
         where T1.SupplierID = T2.SupplierID  
         for xml path('SUPPLIER_LINES'), type
       )
from YourTable as T1
group by SupplierID
for xml path('SUPPLIER') 
```

您可能在它自己的表中有供应商，因此如果您在主查询中使用该表，则不必执行`group by`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:30:12.393

我认为您不需要在 SP 中生成单独的结果集（我认为这就是您所要求的）。

通过对选项进行各种调整`FOR XML`，您应该能够在一个查询中生成此 XML，尽管您可能需要使用该`EXPLICIT`选项。

这应该是一个很好的起点

```
select 
    SupplierID as SuppNo,
    ProdCode
from 
    #t
for xml path('Supplier'), elements, type 
```

# c++ - "::" "." 和有什么不一样 和 C++ 中的“->”

> ID：11902791
> 
> 赞同：91
> 
> 时间：2012-08-10T13:33:40.473
> 
> 标签：c++, operators, field, member

我创建了一个名为*`Kwadrat`*. 该类具有三个`int`字段。我的*开发环境*建议我通过&运算符从*`Kwadrat`*创建的对象访问字段。我尝试了这两个运算符，发现运算符能够成功访问对象字段中的数据，但是对于运算符来说却不能这样说。我还发现操作员也将访问类成员。我很困惑，不明白为什么有三个成员用于访问对象成员和/或方法。有人可以向我解释这三个运营商之间有什么区别吗？**`::`****`->`****`->`****`->`****`.`**

* * *

#           1.`->`

#           2.`::`

#           3.`.`

* * *

```
 #include <iostream>

    using namespace std;

    class Kwadrat{

    public: 
        int val1,
            val2,
            val3;

        Kwadrat(int val1, int val2, int val3)
        {
            this->val1 = val1; // Working
            this.val2 = val2;  // Doesn't Work!
            this::val3 = val3; // Doesn't Work!
        }
    };

    int main()
    {
        Kwadrat* kwadrat = new Kwadrat(1,2,3);

        cout<<kwadrat->val1<<endl;
        cout<<kwadrat->val2<<endl;
        cout<<kwadrat->val3<<endl;

        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2012-08-10T13:35:59.737

1.通过to对象`->`访问对象成员变量和方法`pointer`

```
Foo *foo = new Foo();
foo->member_var = 10;
foo->member_func(); 
```

2.`.` 用于通过对象访问对象成员变量和方法`instance`

```
Foo foo;
foo.member_var = 10;
foo.member_func(); 
```

3.用于访问 a或`::`的静态变量和方法。它还可以用于从另一个作用域访问变量和函数（实际上类、结构、命名空间在这种情况下是作用域）`class/struct``namespace`

```
int some_val = Foo::static_var;
Foo::static_method();
int max_int = std::numeric_limits<int>::max(); 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-08-10T13:36:44.150

在 C++ 中，您可以使用不同的运算符访问字段或方法，具体取决于其类型：

*   **ClassName::FieldName** : 类公共静态字段和方法
*   **ClassInstance.FieldName**：通过类引用访问公共字段（或方法）
*   **ClassPointer->FieldName**：访问公共字段（或方法），取消引用类指针

请注意 :: 应该与类名而不是类实例一起使用，因为静态字段或方法对类的所有实例都是通用的。

```
class AClass{
public:
static int static_field;
int instance_field;

static void static_method();
void method();
}; 
```

那么你可以这样访问：

```
AClass instance;
AClass *pointer = new AClass();

instance.instance_field; //access instance_field through a reference to AClass
instance.method();

pointer->instance_field; //access instance_field through a pointer to AClass
pointer->method();

AClass::static_field;  
AClass::static_method(); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-08-10T13:37:44.307

说得非常简单`::`，就是作用域操作符，`.`就是访问操作符（我忘了实际的名字是什么？），还有`->`解引用箭头。

`::`- 范围函数。也就是说，它让编译器知道函数所在的类以及如何调用它。如果你使用这个操作符来调用一个函数，这个函数就是一个`static`函数。

`.`- 这允许访问已创建对象的成员函数。例如，在类型为的实例化对象上`Foo x; x.bar()`调用方法。您还可以使用它来访问公共类变量。`bar()``x``Foo`

`->`- 基本上与指针类型相同，`.`但它适用于指针类型。本质上，它取消引用指针，而不是调用`.`。使用它相当于`(*ptr).method()`

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-08-10T13:43:12.150

你有一个指向对象的指针。因此，您需要访问指针指向的对象的字段。要取消引用您使用的指针`*`并访问字段，请使用`.`，因此您可以使用：

```
cout << (*kwadrat).val1; 
```

请注意，括号是必需的。这种操作很常见，以至于很久以前（当 C 还年轻的时候）他们决定创建一个“速记”方法来做这件事：

```
cout << kwadrat->val1; 
```

这些被定义为相同的。如您所见，`->`基本上只是将 a`*`和 a组合`.`成一个操作。如果您直接处理对象或对对象的引用，则可以在`.`不首先取消引用指针的情况下使用：

```
Kwadrat kwadrat2(2,3,4);

cout << kwadrat2.val1; 
```

是`::`范围解析运算符。当您只需要限定*name*时使用它，但您根本不处理单个对象。这主要是访问静态数据成员：

```
struct something { 
    static int x; // this only declares `something::x`. Often found in a header
};

int something::x;  // this defines `something::x`. Usually in .cpp/.cc/.C file. 
```

在这种情况下，因为`x`is `static`，它不与 的任何特定实例相关联`something`。事实上，即使没有创建该类型对象的实例，它也会存在。在这种情况下，我们可以使用范围解析运算符访问它：

```
something::x = 10;

std::cout << something::x; 
```

但是请注意，也允许访问静态成员，就好像它是特定对象的成员一样：

```
something s;

s.x = 1; 
```

至少如果有记忆的话，在 C++ 的早期历史中这是不允许的，但含义是明确的，所以他们决定允许它。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-08-10T13:41:57.160

尽管来自 IDE 的误导性注释，这三个运算符具有相关但不同的含义。

该`::`运算符称为*范围解析运算符*，用于从命名空间或类获取其成员之一。

和运算符用于访问对象实例的成员，`.`并且`->`仅在创建对象实例后才起作用。如果您`.`有一个实际的对象（或对对象的引用，`&`在声明的类型中声明），则使用，`->`如果您有指向对象的指针（`*`在声明的类型中声明），则使用。

该`this`对象始终是指向当前实例的指针，因此`->`运算符是唯一有效的。

例子：

```
// In a header file
namespace Namespace {
    class Class {
        private:
            int x;
        public:
            Class() : x(4) {}
            void incrementX();
    };
}

// In an implementation file
namespace Namespace {
    void Class::incrementX() {    // Using scope resolution to get to the class member when we aren't using an instance
        ++(this->x);              // this is a pointer, so using ->. Equivalent to ++((*this).x)
    }
}

// In a separate file lies your main method
int main() {
    Namespace::Class myInstance;   // instantiates an instance. Note the scope resolution
    Namespace::Class *myPointer = new Namespace::Class;
    myInstance.incrementX();       // Calling a function on an object instance.
    myPointer->incrementX();       // Calling a function on an object pointer.
    (*myPointer).incrementX();     // Calling a function on an object pointer by dereferencing first

    return 0;
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-10T13:36:29.720

'::' 用于静态成员。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-08-10T13:36:37.577

-> 用于指向类实例的指针

. 用于类实例

:: 用于类名 - 例如在使用静态成员时

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-10T13:37:35.213

其他人已经回答了不同的语法，但请注意，当你做你的时候`couts`，你只使用`->`：

```
int main()
{
    Kwadrat* kwadrat = new Kwadrat(1,2,3);
    cout<<kwadrat->val1<<endl;
    cout<<kwadrat->val2<<endl;
    cout<<kwadrat->val3<<endl;
    return 0;
} 
```

# sql - SQL实现表结构

> ID：11902797
> 
> 赞同：0
> 
> 时间：2012-08-10T13:34:03.333
> 
> 标签：sql, database, oracle, sqlplus

我必须实现一个像这样的表/对象：

SQL> desc car.info;

*   颜色 VARCHAR2(12)
*   名称 VARCHAR2(12)
*   ps 编号 (10)

它是一个带有 sqlplus 的 Oracle 数据库。我已经尝试过：

`CREATE infoType AS OBJECT(...)/`

`CREATE TABLE car(info infoType);`

但`SQL> desc car.info;`我得到：对象不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:11:16.337

你需要什么描述的输出？

您可以为 table:`desc cars`调用 describe ，您可以为 type 调用 describe`desc infoType`

如果您一次需要有关所有“类型”列的信息，您可以从字典视图中选择它，`user_tab_cols` 并且`user_type_attrs`：

```
select table_name, column_name , data_type, attr_name, attr_type_name
from 
    user_tab_cols
    left outer join user_type_attrs 
    on(data_type = type_name)
where table_name = 'CAR'
; 
```

# .htaccess - Clean URL - 将 301 从带有问号的 URL 重定向到新 URL

> ID：11902803
> 
> 赞同：2
> 
> 时间：2012-08-10T13:34:16.057
> 
> 标签：.htaccess, redirect, seo

原始网址：**example.com** ?file=gallery&d=doc 我想要：**example.com/gallery.html**

我的.htaccess：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www.example.com$
RewriteRule ^(.*)$ http://example.com/$1 [R=301,L]
RewriteRule ^([^/]*)\.html$ /?file=$1&d=doc [L] 
```

（从 url 中删除 d=doc 因为这不需要）

现在清理 URL 的工作，但我希望 301 重定向所有旧 URL（**?file=example&d=doc**）。任何人都可以帮助我处理 .htaccces 吗？现在页面可从 **example.com?file=gallery&d=doc**和**example.com/gallery.html**获得，但**只能**从**example.com/gallery.html**获得。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:17:23.027

试试这个 ：

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^www.med-pro.pl$
RewriteRule ^(.*)$ http://med-pro.pl/$1 [R=301,L]

RewriteRule ^([^/]*)\.html$ /?plik=$1&d=doc&r=0 [L]

RewriteCond %{QUERY_STRING} ^plik=([^&]*)&d=doc$
RewriteRule .* %1.html? [L,NC,R=301] 
```

# wpf - WPF折线上的线性渐变

> ID：11902805
> 
> 赞同：4
> 
> 时间：2012-08-10T13:34:20.393
> 
> 标签：wpf, gradient, polyline

我想在 WPF 中绘制一条折线，它的开始和结束之间的不透明度不同。我使用了 LinearGradientBrush。然而，这不符合我的期望。梯度考虑了边界框或容器中的位置。是否可以根据折线的“长度”（在开始和结束之间）进行渐变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:56:04.903

看看[GradientBrush.MappingMode 属性](http://msdn.microsoft.com/en-us/library/system.windows.media.gradientbrush.mappingmode)。默认是[`BrushMappingMode.RelativeToBoundingBox`](http://msdn.microsoft.com/en-us/library/system.windows.media.brushmappingmode)和你想要的[`BrushMappingMode.Absolute`](http://msdn.microsoft.com/en-us/library/system.windows.media.brushmappingmode)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-19T15:13:18.947

试试[Charles Petzold 的 GradientPath](http://www.charlespetzold.com/blog/2009/02/Graphical-Paths-with-Gradient-Colors.html)。但它是一个`FrameworkElement`，所以不能完全像`Polyline`.

# hibernate - 为什么休眠持久化（）很慢？只是在我的情况下很慢？

> ID：11902811
> 
> 赞同：1
> 
> 时间：2012-08-10T13:34:31.850
> 
> 标签：hibernate, jpa, persist

我正在尝试通过创建实体对象并`persist()`使用 Hibernate 作为 JPA 提供程序进行调用来填充数据库。

一开始，数据库是空的，然后我在一个循环中创建实体实例（100,000 个实例），并将每个实例持久化。

此操作需要大约 10 分钟才能将所有实体注入数据库。我正在使用免费的轮胎亚马逊云服务器机器，600 MB RAM 内存。

循环如下所示：

```
@Transactional
void populateDataBase()
{
    for(int i=0; i<100000; i++)
    {
        MyEntityPK entityInstancePK = new MyEntityPK(idfield1, idField2, idField3);

        MyEntity entityInstance = new MyEntity();

        entityInstance.setId(entityInstancePK);

        entityInstance.setField1(integerValue);
        entityInstance.setField2(integerValue);

        entityInstance.persist();
    }
} 
```

如果我评论该`persist()`行，循环将在几秒钟内完成。当我取消注释该`entityInstance.persist();`行时，循环大约需要 10 分钟才能完成。

这个操作是不是很费时间和内存？或者它不应该很快？在这种情况下调用 merge() 而不是 persist() 更好吗？也许更快？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T13:38:07.797

是的，您需要查看[有关批处理的文档](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/batch.html)。

你想做一些更像

```
for ( int i=0; i<100000; i++ ) {
    Customer customer = new Customer(.....);
    session.save(customer);
    if ( i % 20 == 0 ) { //20, same as the JDBC batch size
        //flush a batch of inserts and release memory:
        session.flush();
        session.clear();
    }
} 
```

# orchardcms - Orchard CMS - 分组字段

> ID：11902817
> 
> 赞同：1
> 
> 时间：2012-08-10T13:34:56.100
> 
> 标签：orchardcms

是否有可能将添加到要分组的内容部分的字段。我不知道客户会添加哪些字段。如果他在内容部分中添加了很多字段，那么如果有某种标识符来对它们进行分组就好了。我应该接管 Orchard.Fields 模块并对其进行修改还是有更简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T21:03:44.033

今天没有简单的方法可以做到这一点，但这是一个如此普遍的请求，我认为它应该作为 CodePlex 上的工作项（或者更好的是补丁）提交。我们应该为字段甚至部分添加一个组属性。

更新：我为您创建了它：http: [//orchard.codeplex.com/workitem/18920](http://orchard.codeplex.com/workitem/18920)请随意投票。

# python - 芹菜工人在调用 retry() 后不重试任务

> ID：11902821
> 
> 赞同：12
> 
> 时间：2012-08-10T13:35:02.107
> 
> 标签：python, celery

我有一个任务：

```
 @celery.task(name='request_task',default_retry_delay=2,acks_late=True)
    def request_task(data):
        try:
            if some_condition:
                request_task.retry()
        except Exception as e:
            request_task.retry() 
```

我使用 celery 和 mongodb 代理并启用了 mongodb 结果后端。

当调用任务的 retry() 方法时，无论是从条件语句还是在捕获异常之后，都不会重试该任务。

在工人的终端我收到这样的消息：

> [2012-08-10 19:21:54,909: INFO/MainProcess] 任务 request_task[badb3131-8964-41b5-90a7-245a8131e68d] 重试：可以重试任务

有什么问题？

**更新：**最后，我没有解决这个问题，不得不在任务中使用 while 循环，所以我的任务永远不会重试。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2019-08-19T15:07:16.180

我知道这个答案为时已晚，但是您看到的日志消息意味着您直接调用任务`request_task()`而不是排队，因此它不在工作人员上运行，因此如果有任何异常，这样做会引发异常，或者一个`Retry`例外，如果您想查看，这是该方法的[代码：](https://github.com/celery/celery/blob/master/celery/app/task.py#L690)`Task.retry`

```
# Not in worker or emulated by (apply/always_eager),
# so just raise the original exception.
if request.called_directly:
    # raises orig stack if PyErr_Occurred,
    # and augments with exc' if that argument is defined.
    raise_with_context(exc or Retry('Task can be retried', None)) 
```

Using`task.retry()`不会在同一个工作人员上重试任务，它会发送一条新消息，`task.apply_async()`因此它可能会使用另一个工作人员重试，这是您在处理重试时应考虑的事项，您可以使用访问重试计数`task.request.retries`，您还可以设置`max_retries`任务装饰器上的选项。

顺便说一下`bind=True`，在任务装饰器上使用使任务实例可用作第一个参数：

```
@app.task(bind=True, name='request_task', max_retries=3)
def request_task(self, data):
    # Task retries count
    self.request.retries

    try:
        # Your code here
    except SomeException as exc:
        # Retry the task
        # Passing the exc argument will make the task fail
        # with this exception instead of MaxRetriesExceededError on max retries
        self.retry(exc=exc) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-02T22:17:36.323

您应该阅读 Celery 文档中有关重试的部分。 [http://celery.readthedocs.org/en/latest/userguide/tasks.html#retrying](http://celery.readthedocs.org/en/latest/userguide/tasks.html#retrying)

看起来为了重试，您必须引发重试异常。

```
raise request_task.retry() 
```

这似乎使重试由装饰您的任务的函数处理。

# javascript - 如果单击离开页面，则重定向到其他页面

> ID：11902822
> 
> 赞同：0
> 
> 时间：2012-08-10T13:35:04.353
> 
> 标签：javascript, onbeforeunload

如果用户单击 onbeforeunload 上的离开页面按钮，我如何重定向他。请检查我的代码

```
function openNewWindow() {
    window.open('http://google.com/','_blank');
    window.focus();
}
window.onbeforeunload = function(event) {

   event = event || window.event;
   var confirmClose = 'Are you sure?'; 
   if (event) {
       event.returnValue = confirmClose;
       if(confirmClose)
       {
           if(true)
           {
       openNewWindow();

           }

       }

       return confirmClose; 

    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:00:17.930

如果用户在 onbeforeunload 对话框中选择是，那么他将离开页面，您无法阻止这一点。但是，您可以在对话框显示之前做一些事情，就像您在代码中所做的那样，但它本身的对话框仅在您的函数执行后显示，显示返回值。

您的代码似乎有点晦涩，您期望从什么开始 `if(confirmClose)`，这将始终评估为 true，因为非空字符串在 javascript 中是“真实的”。

# sql-server - 替代 SQL Server SMO 方法

> ID：11902823
> 
> 赞同：1
> 
> 时间：2012-08-10T13:35:05.073
> 
> 标签：sql-server, ado.net, smo

我使用 SQL Server SMO 方法来获取 SQL Server 数据，例如数据库列表。

有没有办法使用 ADO.net 执行上述操作而不向 SQL Server 发送 TSQL 参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:07:35.730

您还可以检查系统目录视图，例如

```
SELECT * FROM sys.databases 
```

获取数据库列表，或

```
SELECT * FROM sys.tables 
```

获取当前数据库中的表列表。

阅读[MSDN 上有关系统目录视图](http://msdn.microsoft.com/en-us/library/ms174365.aspx)的所有信息。

但我不明白你在这里的意思：

> *有没有办法使用 ADO.net 执行上述操作而不向 SQL Server 发送 TSQL 参数？*

？？？究竟什么（以及为什么？）您*不想*发送到 ADO.NET 或 SQL Server？！？！？请详细说明....

# sql - 用户定义函数性能劣势

> ID：11902824
> 
> 赞同：3
> 
> 时间：2012-08-10T13:35:09.097
> 
> 标签：sql, sql-server, performance, function, user-defined-functions

我有一个包含大量 UDF 的数据库，其中包含一个涉及大量数据操作和计算的长时间运行的过程。

我使用 UDF 的想法是从底层表中分离出信息的逻辑单元。例如，如果我想获取有关汽车的信息，我可能有几个表格，例如颜色、型号、年份等，每次我都必须加入这些表格才能获得汽车。相反，我将使用 fnCar() 之类的函数来获取数据的非规范化视图。

在我长期运行的过程中，我经常调用这些函数，我想知道如果我有一个非规范化的工作表、视图或临时表来进行数据操作和计算是否会更好。一般来说，我应该在性能方面注意使用 UDF 是否有一些缺点？

例如，我使用 UDF 进行了一些计算。然后我取消透视该数据并存储在一个表中。每当我需要再次使用该数据时，我都会调用 UDF 将数据转回。我们这样做的原因是为了保持我们的计算灵活。如果我们添加/删除/更改计算，我们不想更改数据模型。

```
--Calculate some values in a function

declare @location table
(
    id int,
    lattitude float,
    longitude float
)

insert into @location select  1, 40.7, 74
insert into @location select  2, 42, 73
insert into @location select  3, 61, 149
insert into @location select  4, 41, 87

declare @myLattitude float
declare @myLongitude float
set @myLattitude =43
set @myLongitude = 116

declare @distance table
(
    id int,
    distance float
)

insert into @distance
select id, sqrt(power(lattitude-@mylattitude,2)+power(longitude-@mylongitude,2))
from @location

--Store unpivoted data in a table
declare @unpivot table
(
    id int,
    attribute varchar(100),
    attributeValue float
)

insert into @unpivot
(
    id,
    attribute,
    attributeValue
)
select id
    ,attribute
    ,attributevalue 
from
(
    select 
        L.id,
        L.Lattitude, 
        L.Longitude,
        D.Distance
    from @location L 
        inner join @distance D 
        on L.id=D.id
) a
unpivot 
(
    attributeValue for attribute in
    (lattitude, longitude, distance)
) x

--retrive data from store via pivoting function for reporting

select * 
from @unpivot
pivot 
(
    max(attributeValue) for Attribute in (lattitude, longitude, distance)

) x 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T14:12:23.870

我会尝试回答

简单地说：*您在使用 UDF 时做错了*

当您使用 UDF 时，您会添加这些问题

1.  RBAR（见底部）处理
    当您在 SELECT 子句中使用具有表访问权限的标量 UDF 时，
    即不是有效的 JOIN，而是强制执行表查找 *per row"

2.  使用多语句 TVF 进行黑盒处理
    每个 TVF 都必须运行完成并被视为“黑盒”

您*通常*做的是加载一个平面暂存表，然后加入查找表，处理是作为一组完成的。如果这就是您所说的“非规范化”，那么是的，它可能效果更好。

将 UDF 用于“信息的逻辑单元”是 OO/过程思维。SQL 是基于设置的。对于在本机/CLR 代码中运行的对象或对象集合看起来正常的操作，对于通过查询优化器进行的基于集合的数据处理**失败**。

注意：RBAR = Row By Agonizing Row。有关更多信息，请参阅[Simple Talk 的文章](http://www.simple-talk.com/sql/t-sql-programming/rbar--row-by-agonizing-row/)

# php - 不能在常量中使用字符串连接？

> ID：11902833
> 
> 赞同：2
> 
> 时间：2012-08-10T13:35:41.227
> 
> 标签：php, constants

```
const
   SOME_PATH = __DIR__ . '/blabla.bla'; 
```

不起作用我得到一个解析错误：

> 期待`','' or`';''

哇！？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T13:39:08.997

只能在声明类常量或属性时使用*常量值。*没有变量表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T13:41:27.830

问题不在于常量，而在于您使用非文字将类变量定义为字符串。

```
const SOME_PATH = __DIR__; 
```

很好，但是一旦您开始使用连接，解析器就会发出嘶嘶声。

这与它起作用的原因相同：

```
class myClass {
    public $something = "something";
} 
```

但这不会：

```
class myClass {
    public $something = "some" . "thing";
} 
```

# xml - Schematron 检查中的意外行为

> ID：11902838
> 
> 赞同：0
> 
> 时间：2012-08-10T13:35:59.670
> 
> 标签：xml, xsd, schematron

我有以下检查

```
<iso:pattern id="myChecks">
  <iso:rule context="/root/outerElement/innerElement">
    <iso:assert test="typeElement[@someAttribute='type1']">
      No typeElement with someAttribute=type1 found
    </iso:assert>  
    <iso:assert test=".[child::typeElement[@someAttribute='value1']]/data">
      No dataElement found in an innerElement with typeElement with someAttribute=type1
    </iso:assert>
    <iso:assert test="count(typeElement[@someAttribute='type1'] > 1)">
      There is more than 1 innerElement with typeElement 1 with someAttribute=type1
    </iso:assert>
  </iso:rule>
</iso:pattern> 
```

并且文档看起来像这样：

```
<outerElement>
  <!-- 1 of the dataElements is mandatory -->
  <!-- and i need exact one innerElement which has a typeElement with someAttribute=type1 -->
  <innerElement>
    <dataElement>data</dataElement>
    <dataElement>data</dataElement>
    <typeElement someAttribute="type1"></typeElement>    
  </innerElement>

  <!-- This is not allowed and check 3 should find this -->
  <innerElement>
    <dataElement>data</dataElement>
    <dataElement>data</dataElement>
    <typeElement someAttribute="type1"></typeElement>    
  </innerElement>

  <!-- This one is valid because type2 has other restrictions -->
  <innerElement>
    <typeElement someAttribute="type2"></typeElement>    
  </innerElement>
</outerElement> 
```

现在的问题是检查 1 和 2 对每个 innerElement 进行检查并产生错误，这意味着如果我有 3 次类型 2，我会从前 3 次检查中各得到 3 个错误。我想要的是确保恰好一个innerElement 具有type1，并确保它具有至少1 个dataElement，而具有type2 的innerElements 不会被迫具有dataElement。

第三次检查根本不起作用，似乎每次存在多个内部元素时都会引发错误。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:20:20.783

好的，这里的问题是每个 innerElement 都是他自己的上下文，因此是单独处理的。解决方案是从上下文中删除 innerElement 并将其放入断言字段中。

# c++ - 以可变方式绑定成员函数

> ID：11902840
> 
> 赞同：12
> 
> 时间：2012-08-10T13:36:01.860
> 
> 标签：c++, templates, c++11, variadic-templates, std-function

我有一个带有可变数量参数的成员函数，存储在 a`std::function`中，我想绑定实例并获取一个独立的函数对象。

```
template <class T, class R, class... Args>
void connect(const T& t, std::function<R(const T&, Args...)> f) {
  std::function<R(Args...)> = /* bind the instance c into the function? */
}

// ...

Class c;
connect(c, &Class::foo); 
```

对于固定数量的参数，我会使用`std::bind`，但我不知道如何为可变参数执行此操作。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-10T13:53:46.913

解决方案*非常*简单，因为您已经拥有大量参数和所有内容：

```
template <class T, class R, class... Args>
void connect(const T& t, std::function<R(const T&, Args...)> f) {
  // or capture 't' by-value
  std::function<R(Args...)> fun = [&t,f](Args... args){ f(t,args...); };
  // ...
} 
```

[活生生的例子。](http://liveworkspace.org/code/85c3b47dea50cc8e40604e4cfb64b90f)

# c# - 在 C# 中管理对话框表单

> ID：11902846
> 
> 赞同：2
> 
> 时间：2012-08-10T13:36:17.407
> 
> 标签：c#, forms, dialog

单击按钮时，我有此代码应该在当前表单顶部显示一个对话框并显示文本，等待一秒钟，更改文本，然后最后关闭它：

```
Form p = new Form();
p.ShowDialog();

p.Text = "Start.";
Thread.Sleep(1000);

p.Text = "Counting.";
Thread.Sleep(1000);

p.Text = "End.";
Thread.Sleep(1000);

p.Close(); 
```

但是，一旦它执行`p.ShowDialog();`它就会停止代码，直到表单 p 关闭并且它不能按我的预期工作。我可以得到一些指导吗？不一定是解决方案，但至少也许我可以搜索一些关键字？

**更新：**由于我在尝试访问与问题无关的业务逻辑时遇到的困难，我正在延迟提供工作示例。请继续关注并抱歉:)

**解决方案：**我所做的实际上是用来`Show()`代替`ShowDialog()`. 由于我无法从业务逻辑访问表单，BackgroundWorker 派上用场并在它们之间使用。我不能分享任何代码或项目结构的布局，但总而言之，接受的答案的主要陈述是解决方案的关键:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T13:38:50.513

这就是 ShowDialog() 的意义所在。它创建一个模态表单，并且在您完成之前不会将控制权返回给调用函数。如果它不需要是模态的，那么使用 .Show()。如果确实需要模态，则将代码放入 Form Load 方法中以根据需要更新文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T13:39:04.307

[http://msdn.microsoft.com/en-us/library/c7ykbedk.aspx](http://msdn.microsoft.com/en-us/library/c7ykbedk.aspx)

取自上面的链接：

`When this method is called, the code following it is not executed until after the dialog box is closed.`

如果您想在表单中显示您想要显示的任何内容，您应该在表单本身内编写代码，在表单显示事件的事件处理程序中执行此操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T13:40:20.420

正如您所发现的，`ShowDialog`是一个阻塞方法，在对话框关闭之前不会返回。您更改文本和处理延迟的代码需要在对话本身内。

但是，值得注意的是您会发现的下一个问题：如果您`Thread.Sleep(1000)`从 UI 线程调用，您的应用程序将在 1 秒内无响应。这可能不是你的目标！我建议您查看`Timer`or`BackgroundWorker`类以更顺利地处理此问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T13:53:14.887

看一下这个：

```
public partial class Form2 : Form
{
    delegate void SetTextCallback(string text);
    delegate void CloseFormCallback();

    public Form2()
    {
        InitializeComponent();

        new Thread(DoMagic).Start();
    }

    public void DoMagic()
    {
        this.SetText("Start.");

        Thread.Sleep(1000);

        this.SetText("Counting.");
        Thread.Sleep(1000);

        this.SetText("End");

        Thread.Sleep(1000);

        this.CloseForm();
    }

    private void CloseForm()
    {
        if (this.InvokeRequired)
        {
            CloseFormCallback c = new CloseFormCallback(CloseForm);
            this.Invoke(c);
        }
        else
        {
            this.Close();
        }
    }

    private void SetText(string text)
    {
        if (this.label1.InvokeRequired)
        {
            SetTextCallback d = new SetTextCallback(SetText);
            this.Invoke(d, new object[] { text });
        }
        else
        {
            this.label1.Text = text;
        }
    }
} 
```

# c++ - 为什么在 Linux 上使用更多线程时内存消耗会增加？(C++)

> ID：11902848
> 
> 赞同：3
> 
> 时间：2012-08-10T13:36:29.550
> 
> 标签：c++, linux, multithreading, memory, openmp

**程序：**

我为大量数据创建了一个 C++ 计算程序，它可以在 1 个或多个线程上运行。（通过配置文件）

程序环境如下：C++、OpenMp、Redhat-x64、malloc/free

**Linux 上的结果：**

*   当我在 1 个线程上运行它时，进程大小为 177 MB。
*   当我在 2 个线程上运行它时，进程大小为 317 MB。
*   当我在 4 个线程上运行它时，进程大小为 600 MB。

**Windows 上的结果：**

*   无论使用多少线程，进程大小仍然相同，为 110MB。

**问题：**

为什么在 Linux 上使用更多线程时内存消耗会增加？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T13:59:13.960

一个合理的猜测是，`delete`Linux 中会为将来的`new`请求缓存已释放的内存，就像在 Windows 上一样，但 Linux 每个线程都有一个缓存，而 Windows 每个进程都有一个缓存。

（更准确地说，是 C++ 运行时库决定了这种缓存的工作方式）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:55:53.823

使用`/proc/<PID>/maps`或更好[`pmap(1)`](http://www.daemon-systems.org/man/pmap.1.html)的方法来确定页面的去向。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T14:42:53.190

您启动的每个线程都需要分配一个堆栈来运行它，以及任何线程局部变量的内存。我不完全确定每个线程 150Mb 看起来是否合理，但是线程本地数组可能会导致类似的情况。

# asp-classic - 通过表单提交将文件发送到浏览器，然后在经典 ASP 中重定向

> ID：11902851
> 
> 赞同：2
> 
> 时间：2012-08-10T13:36:34.727
> 
> 标签：asp-classic, vbscript

我目前正在做一个项目，用户将选择一堆选项，点击提交，然后处理提交的页面将创建一堆逗号分隔的文件，将它们压缩并将它们发送回客户端。

除了一部分之外，我的大部分工作都很好。用户选择一堆选项的页面然后通过表单提交调用处理所有文件创建内容的 ASP 页面。当用户点击提交时，我会显示一个进度条，以便他们知道页面正在运行。

我遇到的问题是，如果我`Response.Redirect`在脚本末尾添加 a，则文件不会发送到浏览器。如果我不在`Response.Redirect`脚本末尾添加 a ，则调用页面不会重新加载，而是像它仍在工作一样坐在那里。

我试过用 jQuery 和 AJAX 来做这件事，但这也不起作用。

一些代码...

标准选择页面

```
<form method="post" action="../../scripts/generate-presentation-data.asp" onsubmit="return submitform();">
...form items...
</form>

<script>
function submitform()
{
if ( confirm('Generate presentation data?') )
{ return true; }
else { return false; }
}
</script> 
```

和被调用的页面：

```
Response.Buffer = True

...create files, zip them up etc...

Response.AddHeader "Content-Disposition", "attachment;filename=" & Chr(34) & "board-presentation-data.zip" & Chr(34)
Set objStream = Server.CreateObject("ADODB.Stream")
objStream.Open
objStream.Type = 1
objStream.LoadFromFile(sFilePath & "board-presentation-data.zip")
Response.BinaryWrite(objStream.Read) 
```

如果我在最后放置一个重定向，则文件永远不会发送到浏览器。

有什么想法可以让这样的东西正常工作吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:46:57.643

您要求您的 ASP 代码有 2 个响应，一个是 zip 文件，另一个是重定向指令。一个请求只能有一个响应，要么是重定向指令，要么是 zip 文件。

**方法一**

将生成的 zip 文件存储在 web.xml 的特殊子文件夹中。使用随机 GUID 创建另一个子文件夹，并将生成的 Zip 文件放在那里。不要尝试在响应中发送 Zip 文件，而只是发送到您的重定向。

在您重定向到的 url 中，您会将创建的 zip 文件的 URL 编码到其查询字符串中。

重定向页面将在其 HTML 中生成一个链接，要求用户单击此处下载 Zip。链接的 url 将是 zip 文件的 URL。您可以尝试使用 Javascript 在 Load 事件中导航到文件，或者使用刷新 META 标记或其他技巧来自动下载文件，但如果这些方法失败，您将需要回退。

**方法二**

使用 AJAX 将数据发布到返回可从中获取 Zip 文件的 URL 的页面。该页面要么将发布的数据存储在会话中，要么如上所述生成 zip 文件。返回的 URL 将是一个页面的 URL，该页面将从会话中存储的数据生成 zip，或者是 zip 本身的 URL。

一旦帖子在页面中返回代码，就可以在新窗口中打开返回 URL，然后它可以自行导航到所需的任何最终 URL。

# components - Joomla AEC 组件触发用户更新

> ID：11902853
> 
> 赞同：0
> 
> 时间：2012-08-10T13:36:43.567
> 
> 标签：components, joomla2.5

我已经在我的 Joomla(2.5) 网站中安装了 AEC（帐户过期控制）组件。我想添加一个微集成脚本，以便在用户注册到站点或更新配置文件信息时运行。我检查了示例集成脚本，发现

> on_userchange_action

当用户注册或更新他的详细信息时触发方法。

使用管理员用户编辑用户时如何触发此方法。我试图在 3 个地方编辑用户。

1.  Joomla 用户管理器
2.  Jom 社交用户经理
3.  AEC 成员

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:03:50.017

Joomla 2.5 已经重命名了几个事件，这里是当前 Joomla 事件触发器的列表 -

[http://docs.joomla.org/Plugin#Events](http://docs.joomla.org/Plugin#Events)

您正在寻找的可能是`onAfterStoreUser`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:59:00.190

我不熟悉 AEC，但要触发一个动作，您可以检查是否构建了一个由例如触发的插件：

> onUserAfterSave

# android - 在android中解析httpresponse后的字符串比较

> ID：11902855
> 
> 赞同：0
> 
> 时间：2012-08-10T13:36:43.430
> 
> 标签：android, string, httpresponse

好吧，我不明白为什么字符串比较不起作用

```
protected String doInBackground(String... args) 
{
   DefaultHttpClient httpClient =   new DefaultHttpClient();
   HttpPost httpPost            =   new HttpPost(url_login);
   httpPost.setEntity(new UrlEncodedFormEntity(params));
   HttpResponse httpResponse    =   httpClient.execute(httpPost);
   HttpEntity entity            =   httpResponse.getEntity();
   InputStream is               =   entity.getContent();
   String returnState           =   new String();
   returnState                  =   convertStreamToString(is);

   Log.d("retunState ", returnState); // returning desired string

   //if (returnState=="user") // this is not working, however returnState = user
   // OR 
   //if (returnState.equals("user")) 
   // OR
   if (returnState.equalsIgnoreCase("user")) // this is not working also
   {                        
      Intent i = new Intent(Main.this, SecondPage.class);
      startActivity(i);
      finish();
   }

} // close of doInbackgorund function

private static String convertStreamToString(InputStream is) 
{

BufferedReader reader = new BufferedReader(new InputStreamReader(is));
StringBuilder sb      = new StringBuilder();

String line = null;
try {
        while ((line = reader.readLine()) != null) {
            sb.append((line + "\n"));
            }
    } catch (IOException e) {
    e.printStackTrace();
    } finally {
    try {
           is.close();
        } catch (IOException e) {
          e.printStackTrace();
     }
   }
 return sb.toString();
} 
```

好吧，所有三个 if 条件都没有给出任何错误，即使 returnState = user 或 returnState = no_user，第二个活动也永远不会开始。如果returnState = user，我想开始另一个活动，但无论如何，如果阻塞它就不会进入

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T13:40:00.017

您的第一个`if`陈述正在跳过您的下一个陈述，因为它是错误的。注释掉第一个 if。

您的 returnState 中也可能有空格。尝试使用`.trim()`

```
//if (returnState=="user") 
if (returnState.trim().equalsIgnoreCase("user")) 
{                        
   Intent i = new Intent(Main.this, SecondPage.class);
   startActivity(i);
   finish();
} 
```

# c# - 在没有客户端/服务器解决方案的情况下在局域网中发送文件

> ID：11902860
> 
> 赞同：1
> 
> 时间：2012-08-10T13:36:52.073
> 
> 标签：c#, visual-studio-2010, file, networking, lan

我正在做一个 Windows 窗体项目，Visual Studio 2010，C#

我想向我们网络中的计算机发送一些文件，但它们没有客户端/服务器解决方案中的“侦听器”，但我确实有用户名/密码。有没有办法发送知道这些信息的文件？正如我所说，我不想构建客户端/服务器解决方案。

我不能以某种方式使用“模仿”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:05:07.913

如果您知道用户名密码并且您的客户端在同一个域中，则您可以使用带有身份验证的 UNC（使用 $）并将文件发送到客户端 PC。类似的东西：`\\clientPC\c$`。一旦通过身份验证，您就可以使用 File IO，例如`File.Copy(..."\\clientPC\c$\yourfile.txt")`发送文件。

您可以使用[此处发布的课程进行 UNC 身份验证](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/0cbd77b7-5c6c-4a86-bc3a-e06eb888fa17)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:40:49.437

这与您的机器在同一个域中吗？如果是这样，您是否有能力创建共享？如果可以，您可以像在本地一样设置共享并传输文件。如果这是可能的，那么为微不足道的需求创建一个详细的应用程序是没有意义的。

我为我曾经工作过的一家公司建立了类似的东西，“客户”暴露了我和我的股份；“服务器”只是使用 File.Move() 来传输文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T13:49:41.853

是的，您可以使用模拟， [阅读这篇文章](http://www.dotnetspider.com/resources/28269-Upload-File-Network-Path.aspx) ，也许会有所帮助。

# multithreading - 可以使用 ActionScript Workers 在单独的线程中播放/生成声音吗？

> ID：11902863
> 
> 赞同：3
> 
> 时间：2012-08-10T13:36:54.427
> 
> 标签：multithreading, actionscript-3, flash, audio, worker

我对**ActionScript Workers**很陌生，但我想知道这是否可能。

根据我的阅读，**ActionScript Workers** (ASW) 就像单独的线程，可以在不中断主线程（正在执行您的主 SWF 文件）的情况下执行更多 CPU 密集型计算。

我真正看到的唯一一个例子是动画以一致的速率播放，而 ASW 负责加载或计算一些密集的数学公式。

声音 API 是否可用于 ActionScriptWorkers？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T17:19:19.513

我要冒险到悬崖上，对这个问题回答“是”。

发行[说明](http://labsdownload.adobe.com/pub/labs/flashplatformruntimes/shared/air3-4_flashplayer11-4_p2_releasenotes.pdf)有一个“非功能性”API 列表，我在列表中看不到任何与声音相关的类。

> 以下 API 在后台工作人员中不可用。任何构造这些实例的任何尝试都将引发 IllegalOperationError 并显示消息“此功能在此上下文中不可用”，errorID 在所有实例中都将相同，从而允许开发人员关闭此值。

*   `flash.desktop.Clipboard`// 调用构造函数将抛出；调用 generalClipboard 将返回 null
*   `flash.desktop.NativeDragManager`// isSupported 返回 false
*   `flash.desktop.Updater`// isSupported 返回 false
*   `flash.display.NativeMenu`// isSupported 返回 false
*   `flash.display.NativeWindow`// isSupported 返回 false
*   `flash.display.ToastWindow`// 无法访问实例，因为 stage.window 永远不会被定义
*   `flash.display.Window`// 无法访问实例，因为 stage.window 永远不会被定义
*   `flash.external.ExtensionContext`// createExtensionContext() 将始终返回 null 或抛出错误
*   `flash.external.ExternalInterface`// 可用返回 false
*   `flash.html.*`// HTMLLoader.isSupported 返回 false
*   `flash.media.CameraRoll`// supportsAddBitmapData 和 supportsBrowseForImage 返回 false
*   `flash.media.CameraUI`// isSupported 返回 false
*   `flash.media.StageWebView`// isSupported 返回 false
*   `flash.net.drm.*`// DRMManager.isSupported 返回 false
*   `flash.printing.*`// PrintJob.isSupported 返回 false
*   `flash.security.XMLSignatureValidator`// isSupported 返回 false
*   `flash.system.IME`// isSupported 返回 false
*   `flash.system.SystemUpdater`// 调用构造函数抛出
*   `flash.text.StageText`// 调用构造函数抛出 flash.ui.ContextMenu // isSupported 返回 false
*   `flash.ui.GameInput`// isSupported 返回 false
*   `flash.ui.Mouse`// 所有方法都是无操作的；设置“光标”属性是无操作的

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T11:29:40.950

***（在我的正确登录下重新发布）***

他们当然可以！看看我最近关于这个的博客文章：

[http://flexmonkey.blogspot.co.uk/2012/09/multi-threaded-sound-synthesis-in-flex.html#!/2012/09/multi-threaded-sound-synthesis-in-flex.html](http://flexmonkey.blogspot.co.uk/2012/09/multi-threaded-sound-synthesis-in-flex.html#!/2012/09/multi-threaded-sound-synthesis-in-flex.html)

经过一番修改后，我实际上在后台工作程序中生成了一个字节数组，然后将数据写回原始线程（即用户界面）中的 SampleDataEvent 的数据属性。

我从上一个 SampleDataEvent 中写入来自 worker 的数据，而 worker 为下一个生成数据 - 所以 FlashPlayer 实际上同时执行三个任务：提供响应式 UI、播放音调和生成下一个音调。

西蒙

# python - 正则表达式 Python 匹配大量字符串

> ID：11902865
> 
> 赞同：11
> 
> 时间：2012-08-10T13:37:03.650
> 
> 标签：python, regex

我有一个很大的字符串列表，其中包含空格（例如“New York”、“United States”、“North Carolina”、“United Arab Emirates”、“United Kingdom of Great British and Northern Ireland”......以及周围5000+这样的字符串）。

而且我有一个很大的文本，其中可能包含这些字符串中的任何一个*（例如，“我在去北卡罗来纳州的路上去了纽约，最终将去阿拉伯联合酋长国。”）*

有效使用正则表达式来检测我的文本中是否存在这些字符串的最佳方法是什么？

或者也许我应该反过来考虑一下，这样我就可以从文本中提取二元组并查看该列表中的哪些字符串与这些二元组匹配？

* * *

### 编辑：

在与 VoronoiPotato 进行了一次有趣的讨论后，我开始认为最好将大字符串列表的项目的所有标记都索引，并且我设法用函数做到了这一点：

```
def indexing_list(li):
    index_dict={}
    for i in rl(li):
        words=li[i].split()
        for j in rl(words):
            index=complex(i,j)
            word=words[j].lower()
            try:
                index_dict[word].append(index)
            except:
                index_dict[word]=[index]
    return index_dict 
```

并尝试使用此列表：

```
[u'United Kingdom of Great Britain and Northern Ireland', u'Democratic People\u2019s Republic of Korea', u'Democratic Republic of the Congo', u'Lao People\u2019s Democratic Republic', u'Saint Vincent and the Grenadines', u'United Republic of Tanzania', u'Iran (Islamic Republic of)', u'Central African Republic', u'Islamic Republic of Iran', u'United States of America', u'Bosnia and Herzegovina', u'Libyan Arab Jamahiriya', u'Saint Kitts and Nevis', u'Sao Tome and Principe', u'Syrian Arab Republic', u'United Arab Emirates', u'Antigua and Barbuda', u'Trinidad and Tobago', u'Dominican Republic', u'Russian Federation', u'Brunei Darussalam', u'Equatorial Guinea', u'Republic of Korea', u'Marshall Islands', u'Papua New Guinea', u'Solomon Islands', u'ComodRivadavia', u'Port-au-Prince', u'DumontDUrville', u'Czech Republic', u'United Kingdom', u'Dar es Salaam', u'Cambridge Bay', u'Coral Harbour', u'Port of Spain', u'Santo Domingo', u'St Barthelemy', u'Swift Current', u'Ujung Pandang', u'Yekaterinburg', u'South Georgia', u'C\xf4te d\u2019Ivoire', u"Cote d'Ivoire", u'Guinea-Bissau', u'Liechtenstein', u'United States', u'Johannesburg', u'Buenos Aires', u'Rio Gallegos', u'Blanc-Sablon', u'Campo Grande', u'Danmarkshavn', u'Dawson Creek', u'Indianapolis', u'North Dakota', u'Rankin Inlet', u'Scoresbysund', u'Longyearbyen', u'Kuala Lumpur', u'Antananarivo', u'Port Moresby', u'Burkina Faso', u'Saudi Arabia', u'Sierra Leone', u'South Africa', u'Turkmenistan', u'Addis Ababa', u'Brazzaville', u'Ouagadougou', u'El Salvador', u'Los Angeles', u'Mexico City', u'Pangnirtung', u'Porto Velho', u'Puerto Rico', u'Rainy River', u'Tegucigalpa', u'Thunder Bay', u'Yellowknife', u'Ho Chi Minh', u'Krasnoyarsk', u'Novosibirsk', u'Ulaanbaatar', u'Vladivostok', u'Broken Hill', u'Isle of Man', u'Kaliningrad', u'Guadalcanal', u'Afghanistan', u'Cock Island', u'El Salvador', u'Netherlands', u'New Zealand', u'Philippines', u'Saint Lucia', u'Switzerland', u'Timor-Leste', u'Casablanca', u'Libreville', u'Lubumbashi', u'Nouakchott', u'Porto-Novo', u'Costa Rica', u'Fort Wayne', u'Grand Turk', u'Guadeloupe', u'Hermosillo', u'Petersburg', u'Louisville', u'Monticello', u'Martinique', u'Montevideo', u'Montserrat', u'Paramaribo', u'Porto Acre', u'Rio Branco', u'St Vincent', u'Whitehorse', u'Antarctica', u'South Pole', u'Choibalsan', u'Phnom Penh', u'Ulan Bator', u'Cape Verde', u'Queensland', u'Yancowinna', u'Bratislava', u'Copenhagen', u'Luxembourg', u'San Marino', u'Simferopol', u'Zaporozhye', u'Kiritimati', u'Yugoslavia', u'Azerbaijan', u'Bangladesh', u'Cape Verde', u'Costa Rica', u'Kazakhstan', u'Kyrgyzstan', u'Luxembourg', u'Madagascar', u'Mauritania', u'Micronesia', u'Montenegro', u'Mozambique', u'San Marino', u'Seychelles', u'Tajikistan', u'Uzbekistan', u'Bujumbura', u'Mogadishu', u'Anchorage', u'Araguaina', u'Catamarca', u'Boa Vista', u'Chihuahua', u'Fortaleza', u'Glace Bay', u'Goose Bay', u'Guatemala', u'Guayaquil', u'Tell City', u'Vincennes', u'Menominee', u'Monterrey', u'New Salem', u'Sao Paulo', u'St Thomas', u'Vancouver', u'Ashkhabad', u'Chongqing', u'Chungking', u'Hong Kong', u'Jerusalem', u'Kamchatka', u'Pontianak', u'Pyongyang', u'Qyzylorda', u'Samarkand', u'Singapore', u'Vientiane', u'Jan Mayen', u'Reykjavik', u'St Helena', u'Australia', u'Lord Howe', u'Melbourne', u'Greenwich', u'Amsterdam', u'Bucharest', u'Gibraltar', u'Ljubljana', u'Mariehamn', u'Podgorica', u'Stockholm', u'Volgograd', u'Christmas', u'Kerguelen', u'Mauritius', u'Enderbury', u'Galapagos', u'Kwajalein', u'Marquesas', u'Pago Pago', u'Rarotonga', u'Tongatapu', u'Argentina', u'Australia', u'Guatemala', u'Indonesia', u'Lithuania', u'Mauritius', u'Nicaragua', u'Singapore', u'Sri Lanka', u'Swaziland', u'Macedonia', u'Venezuela', u'Blantyre', u'Djibouti', u'El Aaiun', u'Freetown', u'Gaborone', u'Khartoum', u'Kinshasa', u'Monrovia', u'Ndjamena', u'Sao Tome', u'Timbuktu', u'Windhoek', u'Anguilla', u'La Rioja', u'San Juan', u'San Luis', u'Asuncion', u'Atikokan', u'Barbados', u'Dominica', u'Edmonton', u'Eirunepe', u'Ensenada', u'Kentucky', u'Mazatlan', u'Miquelon', u'Montreal', u'New York', u'Resolute', u'Santiago', u'Shiprock', u'St Johns', u'St Kitts', u'St Lucia', u'Winnipeg', u'Ashgabat', u'Calcutta', u'Damascus', u'Dushanbe', u'Istanbul', u'Jayapura', u'Katmandu', u'Makassar', u'Sakhalin', u'Shanghai', u'Tashkent', u'Tel Aviv', u'Atlantic', u'Adelaide', u'Brisbane', u'Canberra', u'Lindeman', u'Tasmania', u'Victoria', u'Belgrade', u'Brussels', u'Budapest', u'Chisinau', u'Guernsey', u'Helsinki', u'Sarajevo', u'Tiraspol', u'Uzhgorod', u'Auckland', u'Funafuti', u'Honolulu', u'Johnston', u'Pitcairn', u'Barbados', u'Botswana', u'Bulgaria', u'Cambodia', u'Cameroon', u'Colombia', u'Djibouti', u'Dominica', u'Ethiopia', u'Holy See', u'Honduras', u'Kiribati', u'Malaysia', u'Maldives', u'Mongolia', u'Pakistan', u'Paraguay', u'Portugal', u'Slovakia', u'Slovenia', u'Suriname', u'Thailand', u'Tanzania', u'Viet Nam', u'Zimbabwe', u'Anguilla', u'Abidjan', u'Algiers', u'Conakry', u'Kampala', u'Mbabane', u'Nairobi', u'Tripoli', u'America', u'Antigua', u'Cordoba', u'Mendoza', u'Tucuman', u'Ushuaia', u'Caracas', u'Cayenne', u'Chicago', u'Curacao', u'Detroit', u'Godthab', u'Grenada', u'Halifax', u'Indiana', u'Marengo', u'Winamac', u'Iqaluit', u'Managua', u'Marigot', u'Moncton', u'Nipigon', u'Noronha', u'Phoenix', u'Rosario', u'Tijuana', u'Toronto', u'Tortola', u'Yakutat', u'McMurdo', u'Rothera', u'Baghdad', u'Bahrain', u'Bangkok', u'Bishkek', u'Colombo', u'Irkutsk', u'Jakarta', u'Karachi', u'Kashgar', u'Kolkata', u'Kuching', u'Magadan', u'Nicosia', u'Rangoon', u'Tbilisi', u'Thimphu', u'Yakutsk', u'Yerevan', u'Bermuda', u'Madeira', u'Stanley', u'Andorra', u'Belfast', u'Tallinn', u'Vatican', u'Vilnius', u'Mayotte', u'Reunion', u'Chatham', u'Fakaofo', u'Gambier', u'Norfolk', u'Albania', u'Algeria', u'Armenia', u'Austria', u'Bahamas', u'Bahrain', u'Belarus', u'Belgium', u'Bolivia', u'Burundi', u'Comoros', u'Croatia', u'Denmark', u'Ecuador', u'Eritrea', u'Estonia', u'Finland', u'Georgia', u'Germany', u'Grenada', u'Hungary', u'Iceland', u'Ireland', u'Jamaica', u'Lebanon', u'Lesotho', u'Liberia', u'Morocco', u'Myanmar', u'Namibia', u'Nigeria', u'Moldova', u'Romania', u'Senegal', u'Somalia', u'Tunisia', u'Ukraine', u'Uruguay', u'Vanuatu', u'Asmara', u'Asmera', u'Bamako', u'Bangui', u'Banjul', u'Bissau', u'Douala', u'Harare', u'Kigali', u'Luanda', u'Lusaka', u'Malabo', u'Maputo', u'Maseru', u'Niamey', u'Belize', u'Bogota', u'Cancun', u'Cayman', u'Cuiaba', u'Dawson', u'Denver', u'Havana', u'Inuvik', u'Juneau', u'La Paz', u'Maceio', u'Manaus', u'Merida', u'Nassau', u'Recife', u'Regina', u'Virgin', u'Mawson', u'Palmer', u'Vostok', u'Arctic', u'Almaty', u'Anadyr', u'Aqtobe', u'Beirut', u'Brunei', u'Harbin', u'Kuwait', u'Manila', u'Muscat', u'Riyadh', u'Saigon', u'Taipei', u'Tehran', u'Thimbu', u'Urumqi', u'Azores', u'Canary', u'Faeroe', u'Currie', u'Darwin', u'Hobart', u'Sydney', u'Europe', u'Athens', u'Berlin', u'Dublin', u'Jersey', u'Lisbon', u'London', u'Madrid', u'Geneva', u'Monaco', u'Moscow', u'Prague', u'Samara', u'Skopje', u'Tirane', u'Vienna', u'Warsaw', u'Zagreb', u'Zurich', u'Chagos', u'Comoro', u'Easter', u'Kosrae', u'Majuro', u'Midway', u'Noumea', u'Ponape', u'Saipan', u'Tahiti', u'Tarawa', u'Wallis', u'Andora', u'Angola', u'Belize', u'Bhutan', u'Brazil', u'Canada', u'Cyprus', u'France', u'Gambia', u'Greece', u'Guinea', u'Guyana', u'Israel', u'Jordan', u'Kuwait', u'Latvia', u'Malawi', u'Mexico', u'Monaco', u'Norway', u'Panama', u'Poland', u'Rwanda', u'Serbia', u'Sweden', u'Turkey', u'Tuvalu', u'Uganda', u'Zambia', u'Accra', u'Cairo', u'Ceuta', u'Dakar', u'Lagos', u'Tunis', u'Jujuy', u'Aruba', u'Bahia', u'Belem', u'Boise', u'Vevay', u'Thule', u'Casey', u'Davis', u'Syowa', u'Amman', u'Aqtau', u'Dacca', u'Dhaka', u'Dubai', u'Kabul', u'Macao', u'Macau', u'Qatar', u'Seoul', u'Tokyo', u'Faroe', u'Eucla', u'Perth', u'Malta', u'Minsk', u'Paris', u'Sofia', u'Vaduz', u'Cocos', u'Efate', u'Nauru', u'Palau', u'Samoa', u'Benin', u'Chile', u'China', u'Congo', u'Egypt', u'Gabon', u'Ghana', u'Haiti', u'India', u'Italy', u'Japan', u'Kenya', u'Libya', u'Malta', u'Nauru', u'Nepal', u'Niger', u'Palau', u'Qatar', u'Samoa', u'Spain', u'Sudan', u'Syria', u'Tonga', u'Yemen', u'Lome', u'Adak', u'Atka', u'Nuuk', u'Knox', u'Lima', u'Nome', u'Asia', u'Aden', u'Baku', u'Dili', u'Gaza', u'Hovd', u'Omsk', u'Oral', u'Zulu', u'Kiev', u'Oslo', u'Bonn', u'Riga', u'Rome', u'Mahe', u'Apia', u'Fiji', u'Guam', u'Niue', u'Truk', u'Wake', u'Chad', u'Cuba', u'Fiji', u'Iran', u'Iraq', u'Mali', u'Oman', u'Peru', u'Togo', u'GMT', u'Yap'] 
```

然后我开始分析我拥有的文本：

```
text='I went to New York and New Orleans and London and United States, Canada, and Egypt, Saudi Arabia'
text_words=text.split() 
```

并尝试分别调查每个单词：

```
for i in rl(text_words):
    tw=text_words[i].lower()
    print i
    print tw
    print index_dict.get(tw) 
```

这些方法似乎很快，但我不知道如何更进一步

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-10T13:44:37.767

```
whitespaces_list=['New York','United States', 'United Arab Emirates']
large_text="I went to New York on my way to North Carolina, and eventually will be going to United Arab Emirates."
for i in whitespaces_list:
    if i in large_text:
        print i," Exist in Large text" 
```

你在找这样的东西吗？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-10T14:22:39.950

正如大多数人所说，这取决于您的*文本*和*城市列表*，使用`timeit`比较方法是选择走哪条路的最佳方式：

```
list = ['New York','United States', 'United Arab Emirates']
text = "I went to New York on my way to North Carolina, and eventually will be going to United Arab Emirates." 
```

计时 1,000,000 次循环，每个循环 5 次重复

```
timeit -n 1000000 -r 5 re.findall(token_regex, text)
1000000 loops, best of 5: 6.22 us per loop

timeit -n 1000000 -r 5 filter(lambda x: x in text, token_list)
1000000 loops, best of 5: 2.76 us per loop

def somefunc():
    for i in token_list:
        if i in text:
            pass

timeit -n 1000000 -r 5 somefunc()
1000000 loops, best of 5: 1.68 us per loop

t = [hash(x) for x in text.replace('.', '').replace(',','').split()] 
tl = [hash(x) for x in token_list]# this list contains single words, like "New" and "York" but not "New York"

def SomeFunc2():
    for x in tl:
        if x in t:
            pass

timeit -n 1000000 -r 5 SomeFunc2()
1000000 loops, best of 5: 6.26 us per loop

t = set([hash(x) for x in text.replace('.', '').replace(',','').split()])
tl = set(hash(x) for x in token_list])

timeit -n 1000000 -r 5 t.intersection(tl)
1000000 loops, best of 5: 1.75 us per loop 
```

通过使用*您的示例数据*，for 循环的使用看起来更快......但正如我所说，您必须使用**更多**实时数据进行测试。

***编辑***：好的，我想使用更多的实时数据会更好，所以我使用以下数据集重新计算结果：

```
list = [u'United Kingdom of Great Britain and Northern Ireland', u'Democratic People\u2019s Republic of Korea', u'Democratic Republic of the Congo', u'Lao People\u2019s Democratic Republic', u'Saint Vincent and the Grenadines', u'United Republic of Tanzania', u'Iran (Islamic Republic of)', u'Central African Republic', u'Islamic Republic of Iran', u'United States of America', u'Bosnia and Herzegovina', u'Libyan Arab Jamahiriya', u'Saint Kitts and Nevis', u'Sao Tome and Principe', u'Syrian Arab Republic', u'United Arab Emirates', u'Antigua and Barbuda', u'Trinidad and Tobago', u'Dominican Republic', u'Russian Federation', u'Brunei Darussalam', u'Equatorial Guinea', u'Republic of Korea', u'Marshall Islands', u'Papua New Guinea', u'Solomon Islands', u'ComodRivadavia', u'Port-au-Prince', u'DumontDUrville', u'Czech Republic', u'United Kingdom', u'Dar es Salaam', u'Cambridge Bay', u'Coral Harbour', u'Port of Spain', u'Santo Domingo', u'St Barthelemy', u'Swift Current', u'Ujung Pandang', u'Yekaterinburg', u'South Georgia', u'C\xf4te d\u2019Ivoire', u"Cote d'Ivoire", u'Guinea-Bissau', u'Liechtenstein', u'United States', u'Johannesburg', u'Buenos Aires', u'Rio Gallegos', u'Blanc-Sablon', u'Campo Grande', u'Danmarkshavn', u'Dawson Creek', u'Indianapolis', u'North Dakota', u'Rankin Inlet', u'Scoresbysund', u'Longyearbyen', u'Kuala Lumpur', u'Antananarivo', u'Port Moresby', u'Burkina Faso', u'Saudi Arabia', u'Sierra Leone', u'South Africa', u'Turkmenistan', u'Addis Ababa', u'Brazzaville', u'Ouagadougou', u'El Salvador', u'Los Angeles', u'Mexico City', u'Pangnirtung', u'Porto Velho', u'Puerto Rico', u'Rainy River', u'Tegucigalpa', u'Thunder Bay', u'Yellowknife', u'Ho Chi Minh', u'Krasnoyarsk', u'Novosibirsk', u'Ulaanbaatar', u'Vladivostok', u'Broken Hill', u'Isle of Man', u'Kaliningrad', u'Guadalcanal', u'Afghanistan', u'Cock Island', u'El Salvador', u'Netherlands', u'New Zealand', u'Philippines', u'Saint Lucia', u'Switzerland', u'Timor-Leste', u'Casablanca', u'Libreville', u'Lubumbashi', u'Nouakchott', u'Porto-Novo', u'Costa Rica', u'Fort Wayne', u'Grand Turk', u'Guadeloupe', u'Hermosillo', u'Petersburg', u'Louisville', u'Monticello', u'Martinique', u'Montevideo', u'Montserrat', u'Paramaribo', u'Porto Acre', u'Rio Branco', u'St Vincent', u'Whitehorse', u'Antarctica', u'South Pole', u'Choibalsan', u'Phnom Penh', u'Ulan Bator', u'Cape Verde', u'Queensland', u'Yancowinna', u'Bratislava', u'Copenhagen', u'Luxembourg', u'San Marino', u'Simferopol', u'Zaporozhye', u'Kiritimati', u'Yugoslavia', u'Azerbaijan', u'Bangladesh', u'Cape Verde', u'Costa Rica', u'Kazakhstan', u'Kyrgyzstan', u'Luxembourg', u'Madagascar', u'Mauritania', u'Micronesia', u'Montenegro', u'Mozambique', u'San Marino', u'Seychelles', u'Tajikistan', u'Uzbekistan', u'Bujumbura', u'Mogadishu', u'Anchorage', u'Araguaina', u'Catamarca', u'Boa Vista', u'Chihuahua', u'Fortaleza', u'Glace Bay', u'Goose Bay', u'Guatemala', u'Guayaquil', u'Tell City', u'Vincennes', u'Menominee', u'Monterrey', u'New Salem', u'Sao Paulo', u'St Thomas', u'Vancouver', u'Ashkhabad', u'Chongqing', u'Chungking', u'Hong Kong', u'Jerusalem', u'Kamchatka', u'Pontianak', u'Pyongyang', u'Qyzylorda', u'Samarkand', u'Singapore', u'Vientiane', u'Jan Mayen', u'Reykjavik', u'St Helena', u'Australia', u'Lord Howe', u'Melbourne', u'Greenwich', u'Amsterdam', u'Bucharest', u'Gibraltar', u'Ljubljana', u'Mariehamn', u'Podgorica', u'Stockholm', u'Volgograd', u'Christmas', u'Kerguelen', u'Mauritius', u'Enderbury', u'Galapagos', u'Kwajalein', u'Marquesas', u'Pago Pago', u'Rarotonga', u'Tongatapu', u'Argentina', u'Australia', u'Guatemala', u'Indonesia', u'Lithuania', u'Mauritius', u'Nicaragua', u'Singapore', u'Sri Lanka', u'Swaziland', u'Macedonia', u'Venezuela', u'Blantyre', u'Djibouti', u'El Aaiun', u'Freetown', u'Gaborone', u'Khartoum', u'Kinshasa', u'Monrovia', u'Ndjamena', u'Sao Tome', u'Timbuktu', u'Windhoek', u'Anguilla', u'La Rioja', u'San Juan', u'San Luis', u'Asuncion', u'Atikokan', u'Barbados', u'Dominica', u'Edmonton', u'Eirunepe', u'Ensenada', u'Kentucky', u'Mazatlan', u'Miquelon', u'Montreal', u'New York', u'Resolute', u'Santiago', u'Shiprock', u'St Johns', u'St Kitts', u'St Lucia', u'Winnipeg', u'Ashgabat', u'Calcutta', u'Damascus', u'Dushanbe', u'Istanbul', u'Jayapura', u'Katmandu', u'Makassar', u'Sakhalin', u'Shanghai', u'Tashkent', u'Tel Aviv', u'Atlantic', u'Adelaide', u'Brisbane', u'Canberra', u'Lindeman', u'Tasmania', u'Victoria', u'Belgrade', u'Brussels', u'Budapest', u'Chisinau', u'Guernsey', u'Helsinki', u'Sarajevo', u'Tiraspol', u'Uzhgorod', u'Auckland', u'Funafuti', u'Honolulu', u'Johnston', u'Pitcairn', u'Barbados', u'Botswana', u'Bulgaria', u'Cambodia', u'Cameroon', u'Colombia', u'Djibouti', u'Dominica', u'Ethiopia', u'Holy See', u'Honduras', u'Kiribati', u'Malaysia', u'Maldives', u'Mongolia', u'Pakistan', u'Paraguay', u'Portugal', u'Slovakia', u'Slovenia', u'Suriname', u'Thailand', u'Tanzania', u'Viet Nam', u'Zimbabwe', u'Anguilla', u'Abidjan', u'Algiers', u'Conakry', u'Kampala', u'Mbabane', u'Nairobi', u'Tripoli', u'America', u'Antigua', u'Cordoba', u'Mendoza', u'Tucuman', u'Ushuaia', u'Caracas', u'Cayenne', u'Chicago', u'Curacao', u'Detroit', u'Godthab', u'Grenada', u'Halifax', u'Indiana', u'Marengo', u'Winamac', u'Iqaluit', u'Managua', u'Marigot', u'Moncton', u'Nipigon', u'Noronha', u'Phoenix', u'Rosario', u'Tijuana', u'Toronto', u'Tortola', u'Yakutat', u'McMurdo', u'Rothera', u'Baghdad', u'Bahrain', u'Bangkok', u'Bishkek', u'Colombo', u'Irkutsk', u'Jakarta', u'Karachi', u'Kashgar', u'Kolkata', u'Kuching', u'Magadan', u'Nicosia', u'Rangoon', u'Tbilisi', u'Thimphu', u'Yakutsk', u'Yerevan', u'Bermuda', u'Madeira', u'Stanley', u'Andorra', u'Belfast', u'Tallinn', u'Vatican', u'Vilnius', u'Mayotte', u'Reunion', u'Chatham', u'Fakaofo', u'Gambier', u'Norfolk', u'Albania', u'Algeria', u'Armenia', u'Austria', u'Bahamas', u'Bahrain', u'Belarus', u'Belgium', u'Bolivia', u'Burundi', u'Comoros', u'Croatia', u'Denmark', u'Ecuador', u'Eritrea', u'Estonia', u'Finland', u'Georgia', u'Germany', u'Grenada', u'Hungary', u'Iceland', u'Ireland', u'Jamaica', u'Lebanon', u'Lesotho', u'Liberia', u'Morocco', u'Myanmar', u'Namibia', u'Nigeria', u'Moldova', u'Romania', u'Senegal', u'Somalia', u'Tunisia', u'Ukraine', u'Uruguay', u'Vanuatu', u'Asmara', u'Asmera', u'Bamako', u'Bangui', u'Banjul', u'Bissau', u'Douala', u'Harare', u'Kigali', u'Luanda', u'Lusaka', u'Malabo', u'Maputo', u'Maseru', u'Niamey', u'Belize', u'Bogota', u'Cancun', u'Cayman', u'Cuiaba', u'Dawson', u'Denver', u'Havana', u'Inuvik', u'Juneau', u'La Paz', u'Maceio', u'Manaus', u'Merida', u'Nassau', u'Recife', u'Regina', u'Virgin', u'Mawson', u'Palmer', u'Vostok', u'Arctic', u'Almaty', u'Anadyr', u'Aqtobe', u'Beirut', u'Brunei', u'Harbin', u'Kuwait', u'Manila', u'Muscat', u'Riyadh', u'Saigon', u'Taipei', u'Tehran', u'Thimbu', u'Urumqi', u'Azores', u'Canary', u'Faeroe', u'Currie', u'Darwin', u'Hobart', u'Sydney', u'Europe', u'Athens', u'Berlin', u'Dublin', u'Jersey', u'Lisbon', u'London', u'Madrid', u'Geneva', u'Monaco', u'Moscow', u'Prague', u'Samara', u'Skopje', u'Tirane', u'Vienna', u'Warsaw', u'Zagreb', u'Zurich', u'Chagos', u'Comoro', u'Easter', u'Kosrae', u'Majuro', u'Midway', u'Noumea', u'Ponape', u'Saipan', u'Tahiti', u'Tarawa', u'Wallis', u'Andora', u'Angola', u'Belize', u'Bhutan', u'Brazil', u'Canada', u'Cyprus', u'France', u'Gambia', u'Greece', u'Guinea', u'Guyana', u'Israel', u'Jordan', u'Kuwait', u'Latvia', u'Malawi', u'Mexico', u'Monaco', u'Norway', u'Panama', u'Poland', u'Rwanda', u'Serbia', u'Sweden', u'Turkey', u'Tuvalu', u'Uganda', u'Zambia', u'Accra', u'Cairo', u'Ceuta', u'Dakar', u'Lagos', u'Tunis', u'Jujuy', u'Aruba', u'Bahia', u'Belem', u'Boise', u'Vevay', u'Thule', u'Casey', u'Davis', u'Syowa', u'Amman', u'Aqtau', u'Dacca', u'Dhaka', u'Dubai', u'Kabul', u'Macao', u'Macau', u'Qatar', u'Seoul', u'Tokyo', u'Faroe', u'Eucla', u'Perth', u'Malta', u'Minsk', u'Paris', u'Sofia', u'Vaduz', u'Cocos', u'Efate', u'Nauru', u'Palau', u'Samoa', u'Benin', u'Chile', u'China', u'Congo', u'Egypt', u'Gabon', u'Ghana', u'Haiti', u'India', u'Italy', u'Japan', u'Kenya', u'Libya', u'Malta', u'Nauru', u'Nepal', u'Niger', u'Palau', u'Qatar', u'Samoa', u'Spain', u'Sudan', u'Syria', u'Tonga', u'Yemen', u'Lome', u'Adak', u'Atka', u'Nuuk', u'Knox', u'Lima', u'Nome', u'Asia', u'Aden', u'Baku', u'Dili', u'Gaza', u'Hovd', u'Omsk', u'Oral', u'Zulu', u'Kiev', u'Oslo', u'Bonn', u'Riga', u'Rome', u'Mahe', u'Apia', u'Fiji', u'Guam', u'Niue', u'Truk', u'Wake', u'Chad', u'Cuba', u'Fiji', u'Iran', u'Iraq', u'Mali', u'Oman', u'Peru', u'Togo', u'GMT', u'Yap'] 
```

**来自@hmghaly 示例的**列表包含****645**个国家和城市**

 **```
text = "Lorem ipsum dolor Turkey sit amet, Brussels consectetur adipisicing elit, sed do Santo Domingo eiusmod tempor incididunt ut labore Tell City et dolore magna aliqua. Ut Goose Bay enim ad minim veniam, Bahrain quis nostrud exercitation New Salem ullamco laboris nisi Mongolia ut aliquip ex ea Yekaterinburg commodo consequat. Chihuahua Duis aute irure dolor in Nouakchott reprehenderit in voluptate velit Ireland esse cillum dolore eu fugiat nulla Lome pariatur. Excepteur sint occaecat San Marino cupidatat non proident, Comoro sunt in culpa qui officia Belem deserunt mollit anim id est laborum" 
```

**文本**切片是经典的*Lorem ipsum*文本，随机放置 Country/City 名称，最终文本是相同文本连接 51 次的结果，总共**4590**个单词和 **30344**个字母。（这里写得太长了，所以重复相同的文字）

计时基于 1,000 个（之前我测试了 1,000,000 个循环）循环，每个循环包含 2 次重复：

正则表达式

```
regex = '('+'|'.join(list)+')'
%timeit -n 1000 -r 2 re.findall(regex, text)
1000 loops, best of 2: 3.36 ms per loop 
```

* * *

拉姆达

```
%timeit -n 1000 -r 2 filter(lambda x: x in text, list)
1000 loops, best of 2: 140 ms per loop 
```

* * *

循环

```
def somefunc():
    for i in list:
        if i in text:
            pass

%timeit -n 1000 -r 2 somefunc()
1000 loops, best of 2: 138 ms per loop 
```

* * *

基数树

```
from radix_tree import RadixTree
Tokens = list(set(list))

trie = RadixTree()
for token in Tokens:
    trie.insert(token, token)

def FindMatches(trie, text):
    while 0 < len(text):
        try:
            test = text[:text.index(" ")]
        except ValueError:
            test = text

        for token in trie.search_prefix(test, 100):
            if text.startswith(token):
                pass # no need to print to screen

        try:
            text = text[text.index(" ") + 1:]
        except ValueError:
            break # End of string

%timeit -n 1000 -r 2 FindMatches(trie, text)
1000 loops, best of 2: 236 ms per loop 
```

* * *

设置和正则表达式

```
def SomeMoreFunc():
    rgx = '([A-Z][A-Za-z]*)' #@VoronoiPotato's approach
    filtered_text = set(re.findall(rgx, text)) #make a set of all words that starts with a capital letter 
    for x in list:
         #we split city name if it is constucted with 2 or more words, and parse it to a set, then check if all parts of the string are in the filtered text. If yes, then our city is within our text body
        if set(x.split()).issubset(filtered_text):
            pass 

%timeit -n 1000 -r 2 SomeMoreFunc()
1000 loops, best of 2: 2.81 ms per loop 
```

我修改了@VoronoiPotato 的`set`使用方法。

* * *

代币索引

```
def indexing_list(li):
    index_dict={}
    for i in range(len(li)):
        words=li[i].split()
        for j in range(len(words)):
            index=complex(i,j)
            word=words[j].lower()
            try:
                index_dict[word].append(index)
            except:
                index_dict[word]=[index]
    return index_dict

def someFunc():
    ind_dic = indexing_list(lst)
    text_words=text.split()
    for i in range(len(text_words)):
        tw=text_words[i].lower()
        index_dict.get(tw)

%timeit -n 1000 -r 2 someFunc()
1000 loops, best of 2: 7.41 ms per loop 
```

* * *

对于新的数据集，很明显使用正则表达式而不是简单的文本搜索，并且集合的使用将提高性能（通过裁剪相似的单词并允许使用`issubset`更容易和更快的比较）。在这些方法中，基数树搜索给出了最差的结果。对于以前的数据集，正则表达式的使用比文本搜索更糟糕......

编辑：附加令牌索引结果。***但是***，此示例仅搜索单个单词，并且无法控制具有两个或多个单词的城市名称。

***此外***，考虑到城市名称，Set & Regex 和 Token Indexing 方法存在一个危险的错误

```
El Salvador 
```

和以下文字：

```
Salvador Dali lorem ipsum dolor. El Dranges porte quantera. 
```

这两种方法都会将*El Salvador*与*Salvador*和*El*匹配，因为它们会拆分单词并单独搜索。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-10T14:07:58.287

使用正则表达式检查文本中的大写单词。这将大大减少检查所花费的时间

[AZ][AZ]*

一旦你得到一个匹配，（一个大写的单词）检查它是否与你的列表中的第一个单词匹配，如果是，将下一个匹配与列表中的第二个单词对齐，直到你有一个完全匹配。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T14:50:13.153

您可能会发现[基数树](http://en.wikipedia.org/wiki/Radix_tree)是最有效的。

~~基本思想是将正在搜索的文本转换为可有效查找其他字符串的树。但是，由于您要搜索的标记中有空格，因此您必须做一些摆弄才能找出最佳定义一个令牌。~~

~~例如，每组 X 个单词都是一个标记，其中 X 是您正在搜索的给定项目中的最大单词数。示例：“这里的一切都是绿色的”的树。标记长度为 3 个单词的将包含“Everything is green”、“is green over”和“green over here”。~~

鉴于问题中的示例（在上面写完之后发布），我最终在下面的代码中颠倒了我上面的建议。正在搜索的标记被添加到 Trie/Radix 树中，然后逐步在文本字符串中搜索它们。如果您有更少的标记和更多的文本要搜索，那么上面的删除线*可能会更有效。*

这是[一个基数树的 Python 实现](http://code.google.com/p/python-radix-tree/source/browse/#svn/trunk)，因此您不必自己编写它，这是一个使用该基数树的实现：

```
from radix_tree import RadixTree
Tokens = list(set([.....the list in the question.....])) # 'El Salvador' is listed twice, this is to make it unique easily.

trie = RadixTree()
for token in Tokens:
   trie.insert(token, token)

def FindMatches(trie, text):
   while 0 < len(text):
      try:
         test = text[:text.index(" ")]
      except ValueError:
         test = text

      for token in trie.search_prefix(test, 100):
         if text.startswith(token):
            print token

      try:
         text = text[text.index(" ") + 1:]
      except ValueError:
         break # End of string

FindMatches(trie, "I went to New York and New Orleans and London and United States, Canada, and Egypt, Saudi Arabia") 
```

注意：新奥尔良不在令牌列表中，加拿大和埃及也没有被内部的 Trie 找到，`search_prefix`因为“，”包含在测试字符串的令牌中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-11T01:03:50.707

可能值得尝试 PyPI 上的正则表达式实现，看看是否更快：

[http://pypi.python.org/pypi/regex](http://pypi.python.org/pypi/regex)

我特别想到了“命名列表”功能。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-10T14:13:54.077

不管实际的**解析**方法如何，由于您的数据如此之大，您将把它们放在文件中，您可能已经以某种方式这样做了。这是我认为将数据输入 python 最有效的方法：

`search.txt`- 你要搜索的字符串，`searchterms`将是一个字符串列表

`large.txt`- 要搜索的文本，`large`将是一个字符串

```
 with open('search.txt') as x: searchterms = x.readlines()
 with open('large.txt') as x: large = x.read() 
```

我建议您按照 HussainNagri 在他的回答中建议的那样迭代`searchterms`查找您的匹配项：`large`

```
for i in searchterms:
  if i in large:
    print i, " found in text" 
```**

# ios - 如何调用“popoverControllerDidDismissPopover”方法？

> ID：11902869
> 
> 赞同：0
> 
> 时间：2012-08-10T13:37:16.673
> 
> 标签：ios, uipopovercontroller

我在调用该`popoverControllerDidDismissPopover`方法时遇到了麻烦，因为我不知道将它放在哪里以及如何调用它。

我创建了一个弹出窗口，如下所示 -

```
//  SettingsViewController.h
#import <UIKit/UIKit.h>
#import <QuartzCore/QuartzCore.h>
#import "ViewController.h"
#import "SharedData.h"
#import "PlayerPopUpVC.h"

@interface SettingsViewController : UIViewController <UITableViewDataSource, UIPopoverControllerDelegate> {

- (IBAction)popUp:(id)sender;

@property (strong, nonatomic) UIPopoverController *playerPopUpVC;
@property (strong, nonatomic) PlayerPopUpVC *popUp;

//  SettingsViewController.m
#import "SettingsViewController.h"

- (IBAction)popUp:(id)sender {

    UIButton *editPlayers = (UIButton *)sender;

    if(self.playerPopUpVC) {

        self.popUp= [[PlayerPopUpVC alloc] initWithNibName:@"PlayerPopUpVC" bundle:nil];

        self.popUp=[[UIPopoverController alloc] initWithContentViewController:self.popUp];

    }

    [self.playerPopUpVC presentPopoverFromRect:[editPlayers frame] inView:[editPlayers superview] permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 

} 
```

我知道我必须将 PopOver 的委托设置为 self 才能调用该方法，但无法弄清楚代码是什么。

我努力了 -

```
self.playerPopUpVC.delegate=self 
```

但 Xcode 不喜欢它。

我的 popOver 类看起来像这样 -

```
//  PlayerPopUpVC.h
#import <UIKit/UIKit.h>

@interface PlayerPopUpVC : UIViewController <UITableViewDataSource, UIPopoverControllerDelegate> {

}

//  PlayerPopUpVC.m

#import "PlayerPopUpVC.h"

@interface PlayerPopUpVC ()

@end

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.modalInPopover = NO;
    self.contentSizeForViewInPopover = CGSizeMake(240, 400);
} 
```

任何帮助都将受到欢迎。我已经花了一个星期的时间试图对其进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:59:47.890

首先，您需要了解委托模式，这似乎您还没有完全理解。

弹出框将调用`popoverControllerDidDismissPopover`委托上的方法。您只需`UIPopoverControllerDelegate`在您的类中实现协议并将自己指定为弹出框的代表。为什么说 XCode 不喜欢它？请提供更多信息。

此外，您在这里进行了错误的分配：

> ```
> self.popUp=[[UIPopoverController alloc] initWithContentViewController:self.popUp]; 
> ```

**编辑：提供更多代码来帮助解决错误。请在下次提出这些问题之前查看委托模式。**

你的 SettingsController.m 应该有这个：

```
- (IBAction)popUp:(id)sender {

    UIButton *editPlayers = (UIButton *)sender;

    if(!self.popUp) {

        self.popUp= [[PlayerPopUpVC alloc] initWithNibName:@"PlayerPopUpVC" bundle:nil];
    }

    self.playerPopUpVC=[[UIPopoverController alloc] initWithContentViewController:self.popUp];            
    self.playerPopUpVC.delegate = self;
    [self.playerPopUpVC presentPopoverFromRect:[editPlayers frame] inView:[editPlayers superview] permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 

}
- (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController {
   // Your code here
} 
```

# c++ - Visual Studio 中的 wxWidgets 显示：致命错误 LNK1104：无法打开文件“wxmsw29ud_core.lib”

> ID：11902870
> 
> 赞同：2
> 
> 时间：2012-08-10T13:37:26.330
> 
> 标签：c++, linker, wxwidgets

我能够在 Windows 7 x64 上正确设置 wxWidgets 2.9.4。示例项目运行良好。但是当尝试创建一个新项目时显示错误

`fatal error LNK1104: cannot open file 'wxmsw29ud_core.lib'`

我根据 [http://www.codeproject.com/Articles/11515/Introduction-to-wxWidgets](http://www.codeproject.com/Articles/11515/Introduction-to-wxWidgets) http://wiki.wxwidgets.org/Microsoft_Visual_C%2B%2B_Guide#Changing_setup_settings提供的信息设置项目

我还尝试将依赖关系放在运行示例项目中。但它再次显示相同的错误，如果我将我的代码放在一个正在运行的项目中，那么我工作正常。我也尝试用管理员运行 vs。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:52:31.343

您需要将库的位置添加到项目设置的链接器部分的列表中

像这样的东西：

![在此处输入图像描述](../Images/1f1f61ec9fbd207e862c56279ea3548c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-09T09:17:49.997

## 对于 wxWidgets 3.0 以上

如果您使用的是 2.9 之后的 wxWidgets 版本，最有可能**的解决方案是将库名称更新** `wxmsw28ud_core.lib`为`wxmswXYud_core.lib`，其中`X`是主要编号，`Y`是您正在使用的 wxWidgets 版本的次要编号。

例如，在撰写本文时，我使用的是 wxWidgets 3.1。因此，我只是按照 Visual Studio 的过时指南（例如[WxWiki](https://wiki.wxwidgets.org/Microsoft_Visual_C%2B%2B_Guide#Project_properties)`wxmsw31ud_core.lib` ）的指示指定错误，而不是指定错误。对.`wxmsw29ud_core.lib``wxbase28ud.lib`

# ms-access - 如何测试和处理#Func！查询中的错误？

> ID：11902875
> 
> 赞同：2
> 
> 时间：2012-08-10T13:37:43.770
> 
> 标签：ms-access, error-handling, ms-access-2003

我有一个 Access 查询，上面有一些复杂的字段。基本上，我正在根据其他派生标准搜索某个值。该函数要么工作，要么给出`#Func!`错误。我可能会收到错误的原因有几个。没关系，因为在这些情况下我想 return `Null`。

如何测试和处理`#Func!`查询中的错误？另外，我尝试将表达式包装在一个`IsError()`方法中，并处理这种情况。那仍然没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:14:35.390

例如，如果您将 Instr 与可能为 null 或不为 null 的字段一起使用，并且这会导致问题，您可以只选择那些不为 null 的字段，或者将一个空字符串与该字段连接起来。

```
 SELECT Mid(AField & "",Instr(Afield & "","x")) FROM Table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:22:15.907

我认为这不是最佳解决方案，但是，我希望 Microsoft 内部管理 Microsoft Access 的“更高权力”了解异常处理，并在适当的情况下提供某种测试和处理/忽略错误的方法。

无论如何，就我而言，我发现了解决问题的方法。我按原样保存查询并将其导出到表中。由于这是一次性练习，因此我能够提取必要的数据，然后`Null`从新创建的表中过滤掉所有值。

它有效，但感觉就像一个非常糟糕的黑客。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-07-19T22:00:05.000

OMGGGGG 我知道我晚了 6 年，但这是我第一次在博客上发帖，因为我实际上解决了这个问题！你不知道我有多兴奋。好的，事实证明这正是我想要做的：Mid(AField,Instr(Afield,"x"))。在我的情况下，我知道 InStr 函数并不总是在 Afield 中找到 x，在这些情况下，理想情况下我想要一个 Null。但它实际返回的是 0。在访问中，Right、Left 和 Mid 等函数不能在 0 处“开始”，它们必须从 1 开始（或者我想是 -1）。这是导致#Func！错误！

一种解决方案....如果您的 Instr fuction=0 做一件事，则另做一件事。

如果我想到其他解决方案，我会告诉你。

# javascript - 为什么我的 cshtml 页面的 javascript 没有在浏览器中更新/刷新？

> ID：11902879
> 
> 赞同：0
> 
> 时间：2012-08-10T13:38:00.747
> 
> 标签：javascript, asp.net-mvc, caching

我正在将一个 ASP.NET MVC3 应用程序迁移到 MVC4 并且进展顺利，我的大部分工作和构建都正常。但是，我需要稍微调整其中一个页面的 javascript，但是当我在浏览器中加载它时，它仍然显示旧脚本。

我最初的想法是缓存，但我已经刷新了缓存，硬刷新了页面（ctrl + f5 和 ctrl + shift + r），甚至在 firefox 中打开了 browser.cache.check_doc_frequency = 1 但它仍在加载上一个脚本。

我的第二个想法是它以某种方式从旧的 MVC3 中获取视图（按照我复制项目然后编辑它以迁移到 MVC4 的指导方针），因此也编辑了该文件。如果我通过 MVC3 版本进行调试，这确实会改变 javascript，但 MVC4 版本不会改变。

显然我在谷歌上花了一些时间，但我能找到的一切都证明这是一个缓存问题，似乎已经排除了这一点，我完全没有想法。

有没有人对如何从这里取得进展有任何想法？我可以尝试的任何其他事情，或者它可以从哪里获取旧脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:10:33.860

获取 javascript 时附加日期字符串作为查询参数。这样 js 将永远不会被 chached

# linq - 根据字典过滤 DataTable

> ID：11902887
> 
> 赞同：0
> 
> 时间：2012-08-10T13:38:23.137
> 
> 标签：linq, dictionary, datatable

我有一个数据表，我想根据字典中的元素进行过滤。Dictionary 键是一个整数，值部分是一个类。

包含的类有一个名为 ItemId 的字段。这个 ItemId 是数据表中的一个字段。

我对字典的关键部分有一个值。

我想要的是一个 LINQ 查询，它根据我对键的值返回数据表的 Enumerable 子集。

换句话说，我想要数据表中所有记录的结果集，其 ItemId 列位于字典中包含的记录中，而字典中包含我的 Key 值。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:15:23.963

如果我明白了，你有一把钥匙。所以有了这个键，你就有了字典的一个值。这似乎很容易获得你想要的：

```
int key = 3;

var enumerable = dataTable.Where(t => t.ItemId == dictionary[key].ItemId); 
```

# django - django-registration as an APP 在 __init__.py 上出错

> ID：11902893
> 
> 赞同：0
> 
> 时间：2012-08-10T13:38:37.350
> 
> 标签：django, django-registration

我正在尝试在我的项目中使用 django-registration 包作为 APP。我所做的只是

1.  从“”下载包
2.  复制 SOWL 下的“注册”文件夹
3.  在我项目的 URLs.py 中添加

    ```
    (r'^accounts/', include('registration.backends.default.urls')), 
    ```

4.  在我项目的 settings.py 中添加了“注册”

    ```
    INSTALLED_APPS = (
        'django.contrib.auth',
        'django.contrib.contenttypes',
        'django.contrib.sessions',
        'django.contrib.sites',
        'django.contrib.messages',
        'django.contrib.staticfiles',
        'CATALOG',
        'SOWLAPP',
        'registration',
        # Uncomment the next line to enable the admin:
        'django.contrib.admin',
        # Uncomment the next line to enable admin documentation:
        'django.contrib.admindocs',
    ) 
    ```

它给出了以下错误 -

```
C:\SHIYAM\Personal\SuccessOwl\SOWL0.1\SOWL>python manage.py runserver
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line
443, in execute_from_command_line
    utility.execute()
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line
382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "C:\Python27\lib\site-packages\django\core\management\base.py", line 196,
 in run_from_argv
    self.execute(*args, **options.__dict__)
  File "C:\Python27\lib\site-packages\django\core\management\base.py", line 217,
 in execute
    translation.activate('en-us')
  File "C:\Python27\lib\site-packages\django\utils\translation\__init__.py", lin
e 105, in activate
    return _trans.activate(language)
  File "C:\Python27\lib\site-packages\django\utils\translation\trans_real.py", l
ine 194, in activate
    _active.value = translation(language)
  File "C:\Python27\lib\site-packages\django\utils\translation\trans_real.py", l
ine 183, in translation
    default_translation = _fetch(settings.LANGUAGE_CODE)
  File "C:\Python27\lib\site-packages\django\utils\translation\trans_real.py", l
ine 160, in _fetch
    app = import_module(appname)
  File "C:\Python27\lib\site-packages\django\utils\importlib.py", line 35, in im
port_module
    __import__(name)
  File "C:\SHIYAM\Personal\SuccessOwl\SOWL0.1\SOWL\registration\__init__.py", li
ne 3
    <!DOCTYPE html>
    ^
SyntaxError: invalid syntax

C:\SHIYAM\Personal\SuccessOwl\SOWL0.1\SOWL> 
```

我正在查看注册包中的`urls.py`，`__init__.py`它们看起来都与我项目下的常规应用程序中`urls.py`的通常不同。`__init__.py`为什么它们不同，我应该怎么做才能使它不同？

*   SHM

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T14:31:43.143

您在复制注册应用程序时似乎出了点问题。回溯表明`__init__.py`包含 html like `<!DOCTYPE html>`，它绝对不应该。

# nhibernate - NHibernate 条件查询多个级别的子集合

> ID：11902896
> 
> 赞同：1
> 
> 时间：2012-08-10T13:38:48.203
> 
> 标签：nhibernate

我很难弄清楚如何对代码中没有相互引用的 2 个表执行查询，例如，我有

```
Customer -> Product* where customer and product have reference to each other 
```

和库存 -> 产品*，其中产品没有参考库存

我想找到所有没有库存的客户。

到目前为止我已经这样做了

```
var subQueryInv= DetachedCriteria.For<Inventory>();
        subQueryInv
            .Add(Restrictions.IsNotNull("Product.Id"))
            .SetProjection(Projections.Property<Inventory>(inv=> inv.Product.Id));

        var subQueryProd = DetachedCriteria.For<Product>();
        subQueryTire
            .Add(Subqueries.PropertyNotIn("Id", subQueryInv))
            .SetProjection(Projections.Property<Tire>(prod=> prod.Customer.Id));

        var subQueryCust= DetachedCriteria.For<Customer>();
        subQueryCust
            .Add(Subqueries.PropertyIn("Id", subQueryProd))
            .SetProjection(Projections.Property<TireSet>(cust => cust.Id)); 
```

那行得通，bt查询效率很低，它为库存部分生成这样的SQL ...WHERE Product.Id NOT IN (SELECT Inventory.ProductId FROM Inventory WHERE Inventory.ProductId IS NOT NULL)

因此，对于每条产品记录，它都在查询整个 Inventory 表。如何让子查询具有对父 ID 的引用，如下所示：

```
 ...WHERE Product.Id NOT IN (SELECT Inventory.ProductId FROM Inventory WHERE Inventory.ProductId IS NOT NULL AND Inventory.ProductId = Product.Id) 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T05:39:00.730

您可以使用别名来引用主要标准

```
var subQueryInv= DetachedCriteria.For<Inventory>();
    .Add(Restrictions.IsNotNull("Product.Id"))
    .Add(Restrictions.PropertyEq("Product", "product"))
    .SetProjection(Projections.Property<Inventory>(inv => inv.Product.Id));

var subQueryProd = DetachedCriteria.For<Product>("product"); 
```

# javascript - 在 SharePoint 2010 和 JavaScript 中使用 SP.UI.ModalDialog.commonModalDialog 的 args 选项

> ID：11902906
> 
> 赞同：1
> 
> 时间：2012-08-10T13:39:10.683
> 
> 标签：javascript, asp.net, sharepoint-2010

我有以下情况： 在我的 Sharepoint 2010 ASP.Net 应用程序页面应用程序中，我希望允许我的用户为他们（用户）正在修改的信息的员工选择主管。由于各种原因，我需要调出一个带有 Telerik RadComboBox 的模式对话框和两个按钮：“提交”和“取消”。正常的处理过程是他们会单击父表单上的“选择主管”按钮，这会显示我的 SP.UI.ModalDialog.commonModalDialog ......这是代码：

```
function ShowDialog() {
var origSupCN = document.getElementById('<%= txtSupervisorCN.ClientID %>').value;
var origSup = document.getElementById('<%= txtSupervisor.ClientID %>').value;
var args = {SupervisorCn: origSupCN, Supervisor: origSup};
var _options = { title: "HR Employee Details",
    showClose: false,
    allowMaximize: false,
    width:400,
    height: 100,
    args: args
};
var rtvalue = SP.UI.ModalDialog.commonModalDialogOpen("SupervisorDialog.aspx", _options, silentCallback); 
```

}

这就是问题所在：如果用户单击“选择主管”按钮以调出该模式对话框，然后不想进行选择，我需要将文本框中的值返回为其原始值。所以我在“args”对象中传递原始值 - 这被传递给 ModalDialog，如果他们单击该 Modal 对话框上的“取消”按钮，我想将返回值设置为他们传入的值“args”对象 - 但我不知道如何访问这些 arg 对象。这是我到目前为止所拥有的：

```
function cancelForm() {
var dialogResult = SP.UI.DialogResult.OK;

var returnValue = Array();
returnValue[0] = SP.UI.ModalDialog.get_childDialog().get_args("SupervisorCn");  
returnValue[1] = SP.UI.ModalDialog.get_childDialog().get_args("Supervisor"); 
SP.UI.ModalDialog.commonModalDialogClose(dialogResult, returnValue); 
```

}

当用户在模态对话框上单击“取消”按钮时调用它 - 我试图将返回值设置为传递给模态对话框创建的原始值......哇，我不是确定在这一点上这是否有意义......我希望它确实如此。

基本上，我将一个 args 对象传递给 ModalDialog，如果用户单击“取消”按钮，我想从 JavaScript 方法中获取这些值，这样我就可以将返回值设置为传入的原始值......就是这样简而言之。但是当我在我的模态对话框中使用 JavaScript 时，我不知道如何引用“args”对象......

帮助赞赏！

# html - 如何在 Liquid 表单上添加自定义字段？

> ID：11902909
> 
> 赞同：0
> 
> 时间：2012-08-10T13:39:25.413
> 
> 标签：html, ruby, liquid

我可以用 Liquid 语言编辑在线商店页面。默认情况下，联系页面以这种方式编码：

（这是 storenvy.com 商店）

```
<fieldset>
{% if contact.sent %}
<div id="request_received">
<img src="images/support_received.png" />
<h2>Support request received!</h2> 
<p>Your request was received. We will take care of your issue as soon as possible.<br />Thank you!</p>
</div>
{% else %}
<form id="contact-form" method="post" action ="/contact">
<ul>
  <li>
    <div class="label" id="first_label">
      <label for="name">Name</label>
    </div>
    <div class="field" id="first_field">
      {{ contact | contact_input: 'name'}}
    </div>
  </li>
  <li>
    <div class="label">
      <label for="email">Email</label>
    </div>
    <div class="field">
      {{ contact | contact_input: 'email'}}
    </div>
  </li>
  <li>
    <div class="label">
      <label for="phone">Phone</label>
    </div>
    <div class="field">
      {{ contact | contact_input: 'phone'}}
    </div>
  </li>
  <li>
    <div class="label">
      <label for="order_number">Order Number</label>
    </div>
    <div class="field">
      {{ contact | contact_input: 'order_number'}}
    </div>
  </li>
  <li>
    <div class="label">
      <label for="message">Details</label>
    </div>
    <div class="field">
      {{ contact | contact_input: 'message'}}
      <label class="instruction">Please provide all the information you possibly can. </label>
    </div>
  </li>
  <li>
    <div class="label">
      <label for="captcha">Spam Protection</label>
    </div>
    <div class="field">
      {{ contact.captcha }}<br/>
      {{ contact | contact_input: 'captcha' }}
    </div>
  </li>
  <li>
    <div class="submit">
      <input type="submit" value="Submit"  class="button" />
    </div><!-- end .submit -->
  </li>
</ul>
</form>
{% endif %}
</fieldset>​ 
```

我可以在此表单中添加自定义字段吗？或者这是由底层服务器逻辑决定的？

你也可以解释一下，构造函数有`id="field"`什么作用？字段名称在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:36:47.027

这是一个有趣的表格，我从来没有见过这样的表格，但在我看来，这个页面中的所有字段的格式都是这样的：

```
<li>
  <div class = "foobar">
    // Label and Such
  </div>
  <div class="field">
    // Actual input
  </div>
</li> 
```

看起来这与您的 CSS 确实相关，我们可以看看它是什么样的吗？

-布赖恩

# ruby-on-rails - Rails 将块传递给辅助方法

> ID：11902910
> 
> 赞同：6
> 
> 时间：2012-08-10T13:39:28.453
> 
> 标签：ruby-on-rails

Viget Labs 发布[了一篇文章](http://viget.com/extend/rails-selected-nav-link-helper)和[要点](https://gist.github.com/3279194)，详细介绍了一个 rails 辅助方法，如果它的 url 与当前路径匹配，则该方法用于将特定类（如`.selected`或）添加到导航链接。`.active`

您可以像这样在布局中使用它：

```
= nav_link "News", articles_path, {class: "btn btn-small"}

<!-- which creates the following html -->

<a href="/articles" class="btn btn-small selected">News</a> 
```

好的。我正在使用引导程序，并且希望在我的按钮中有一个图标，所以我需要生成以下 html：

```
<a href="/articles" class="btn btn-small selected"><i class="icon-home"> </i> News</a> 
```

我[分叉了要点](https://gist.github.com/3313979)并想出了一个简单的方法。我的 fork 让开发人员将**:inner_html**和**:inner_class**传递给助手，如下所示：

```
= nav_link "News", articles_path, {class: "btn btn-small"}, {inner_html: 'i', inner_class: 'icon-home'} 
```

它工作正常，但我不喜欢我的底层实现：

```
def link
  if @options[:inner_html]
    link_to(@path, html_options) do
      content_tag(@options[:inner_html], '', :class => @options[:inner_class]) + " #{@title}"
    end
  else
    link_to(@title, @path, html_options)
  end
end 
```

如您所见，我将新选项传递到`content_tag`link_to 方法的块内。我希望我能够以几种方式重构它。

首先，在我看来，我希望能够做到这一点：

```
= nav_link "News", articles_path, {class: "btn btn-small"} do
  %i.icon-home 
```

我想将内部 html 作为一个块，而不是作为选项哈希的属性。谁能给我任何关于如何实现这一目标的指示？

我认为这是告诉 nav_link 方法接受一个块的简单案例：

```
def nav_link(title, path, html_options = {}, options = {}, &block)
  LinkGenerator.new(request, title, path, html_options, options, &block).to_html
end

class LinkGenerator
  include ActionView::Helpers::UrlHelper
  include ActionView::Context

  def initialize(request, title, path, html_options = {}, options = {}, &block)
    @request      = request
    @title        = title
    @path         = path
    @html_options = html_options
    @options      = options
    @block        = block
  end

  def link
    if @block.present?
      link_to @path, html_options do
        @block.call
        @title
      end
    end
  end 
```

但这无法输出图标，而是插入了一个数字 (4)。我不太清楚。任何人都得到任何建议。我可以去哪里阅读更多关于这类事情的信息，因为我真的希望能够弄清楚这样的事情，而不必在 stackoverflow 上询问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T14:09:24.523

我尝试了您的问题，并且在助手中以下内容对我非常有用：

```
 def my_link(title, path, &block)
    if block_given?
      link_to path do
        block.call
        concat(title)
      end
    else
      link_to title, path
    end
  end 
```

用法：

```
my_link "No title", User.first do
  %i.icon-home 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T05:24:59.807

最终的解决方案如下：

```
# capture the output of the block, early on if block_given?
def nav_link(title, path, html_options = {}, options = {}, &block)
  LinkGenerator.new(request, title, path, html_options, options, (capture(&block) if block_given?)).to_html
end 
```

我还必须修改我的链接方法：

```
def link
  if @block.present?
    link_to(@path, html_options) do
      @block.concat(@title)
    end
  else
    link_to(@title, @path, html_options)
  end
end 
```

我已经更新了我的[要点](https://gist.github.com/3313979)。您可能会破解它以接受更复杂的块。

# java - 如何在 j2me (WMA) 中提供短信发件人的电话号码

> ID：11902912
> 
> 赞同：1
> 
> 时间：2012-08-10T13:39:29.547
> 
> 标签：java, java-me, sms, wma

我试图从 Textmessage getAdress 方法中提供短信号码，但它返回 null。我使用netbeans IDE。

接收者：

```
 ms=(MessageConnection)Connector.open("sms://:"+5000);

                    ms.setMessageListener(new MessageListener() {

                        public void notifyIncomingMessage(MessageConnection mc) {
                            try {
                                System.out.print("notify");
                                TextMessage mess=(TextMessage)ms.receive();
                                System.out.println(mess.getPayloadText());
                                System.out.print(mess.getAddress());//*********
                                ms.close();
                            } catch (IOException ex) {
                                ex.printStackTrace();
                            } 

                        }
                    }); 
```

发件人：

```
 ms=(MessageConnection)Connector.open("sms://"+tf.getString()+":"+5000);
                TextMessage tm=(TextMessage)ms.newMessage(MessageConnection.TEXT_MESSAGE);
                tm.setPayloadText("salaaam maghsad jun");
                ms.send(tm);
                ms.close(); 
```

短信已发送，我可以在服务器中读取短信，但无法使用 getAddress() 检索发件人的电话号码。
它返回空值。

# c++ - C++：调度逻辑

> ID：11902916
> 
> 赞同：0
> 
> 时间：2012-08-10T13:39:42.697
> 
> 标签：c++, scheduling

我有一个任务，我将收到如下时间表（示例）：

3,5,6（代表一周中的几天）

9:30 - 13:45, 15:12 - 18:75 (时段)

这些日子和时段适用于一年或更长时间。

我们目前将它们存储在配置文件中。所以，我必须根据这些时间表启动一项任务，即在一周的第三天 9:30 我必须启动任务并在它到达 13:45 时暂停它。

我们使用 C++ 作为我们的产品。我们暂时不能使用 boost。

问：您认为实现这一目标的最佳方法是什么？我已经实现了一种基本上拆分（必须）然后与系统日期进行比较的方式，这在某种程度上导致了繁琐的代码和错误。

我相信人们会更早地面临类似的问题。我更专注于涵盖所有边界情况的最佳方法，如一天结束、开始、飞跃、非飞跃。人们根据您的经验建议任何最佳和有效的方法？

谢谢~桑托什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T08:23:36.417

我做了自己的小\漂亮的调度程序来解决这个问题。到目前为止一切顺利！

# android - MapActivity启动时如何通过GPS或WiFi获取当前位置

> ID：11902917
> 
> 赞同：0
> 
> 时间：2012-08-10T13:39:44.350
> 
> 标签：android, geolocation, gps, location

我必须在 MapActivity 启动时加载当前设备位置（它从另一个 Activity 启动的 Intent 开始）。
问题是环顾网络和android开发人员部分，我看到我必须使用LocationListener方法onLocationChange（位置），但我必须在MapActivity启动时获取用户位置，而不是当用户更改他的位置时。我尝试了几种方法，但没有找到解决方案。

```
public class MappaActivity extends MapActivity {

MapView miaMapView;
MapController mc;
LocationManager lm;
GeoPoint actualP;
LocationListener locationListener;

@Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layout_mappa_activity);

    miaMapView=(MapView)findViewById(R.id.miaMapView);
    mc=miaMapView.getController();
    miaMapView.setBuiltInZoomControls(true);
    miaMapView.setSatellite(true);
    miaMapView.invalidate();

    lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    locationListener=new MyLocationListener();

    lm.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, locationListener);

//  This is MyLocationListener inner class:

private class MyLocationListener implements LocationListener{

    @Override
    public void onLocationChanged(Location location) {
        if(location!=null){

            actualP = new
                    GeoPoint(
                    (int) (location.getLatitude() * 1E6), (int) (location.getLongitude() * 1E6));

            mc.animateTo(actualP);
            mc.setZoom(10);
        }

    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

}

} 
```

actualP 保持为空，直到用户位置发生更改才会触发 onLocationChanged 方法。

我也尝试使用 locationManager.getLastKnowLocation(location.GPS_PROVIDER) 但它返回 null。

希望能得到一些帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:08:17.680

您的 GPS_PROVIDER 可能无法获取位置

当您的 GPS_PROVIDER 无法为您提供位置时，如果您还使用 NETWORK_PROVIDER 和 PASSIVE_PROVIDER 获取位置会更好

也使用 lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0,locationListener);

和 lm.requestLocationUpdates(LocationManager.PASSIVE_PROVIDER, 0, 0,locationListener); 可能它们不如 GPS_PROVIDER 准确。

# exception - CUDA.NET 中的 GASS.CUDA.CUResult.ErrorInvalidImage 错误

> ID：11902926
> 
> 赞同：0
> 
> 时间：2012-08-10T13:40:12.183
> 
> 标签：exception, cuda.net

我尝试在 Visual Stuio C# 中使用 CUDA.NET 开发表单应用程序。但是我需要创建 cubin 文件，这是我的问题：

我尝试使用 Visual Studio 创建 cubin 文件。我将项目中的设置更改`Properties->Configuration Properties->Cuda Runtime API->GPU->NVCC Compilation Type`为`"Generate 64 bit .cubin file (-m64 -cubin)" from "Generate hybrid object file (--compile / -c)".`

但我得到了这个错误`"fatal error LNK1181: cannot open input file '.\Debug\histogram256.cu.obj'"`。它找不到我的某些 .cu 文件的对象。

所以我只将那些 .cu 文件的`"NVCC Compilation Type"`设置更改为`(-m64 -cubin)`并通过右键单击这些文件单独编译它们。但是它没有创建任何 .obj 或 .cubin 文件。

然后我尝试从命令行编译它。我复制了 .cu 文件中的`Property Page->Cuda Runtime API->Command Line`行

`" "C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.0\bin\nvcc.exe" -gencode=arch=compute_20,code=\"sm_20,compute_20\" -gencode=arch=compute_20,code=\"sm_20,compute_20\" --machine 32 -ccbin "c:\Program Files\Microsoft Visual Studio 9.0\VC\bin" -Xcompiler "/EHsc /W3 /nologo /O2 /Zi /MT " -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.0\include" -maxrregcount=0 --compile -o "Debug/device.cubin" "device.cu""`

device.cu 是我的 cuda 文件。

它创建了`.cubin file`，但我从 CUDA.NET 收到了这个错误：`"GASS.CUDA.CUResult.ErrorInvalidImage."`

你有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T13:05:19.057

1：确保您的视频卡支持您指定的 gencode-arch 和代码。

2：您为 32 位编译，请确保您正在为 .net 编译和引用 32 位的 cuda.net。

3：使用 managedcuda (codeplex) 提供了更好的示例和文档。

# wpf - 修改 SelectedItem 不适用于 MVVM

> ID：11902927
> 
> 赞同：0
> 
> 时间：2012-08-10T13:40:14.210
> 
> 标签：wpf, mvvm, selecteditem

我有一个带有组合框的窗口。这个组合框有 5 个 ComboboxItems。

在示例中，我希望无法选择项目 3、4 和 5。

我尝试了两种不同的方式：**MVVM方式**和**代码隐藏方式**

**MVVM方式：**

xml:

```
<ComboBox SelectedIndex="{Binding Path=SaveIndex, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" SelectedItem="{Binding Path=SaveSelectedItemCheck}" Name="SaveCombobox"> 
```

视图模型：

```
public object SaveSelectedItemCheck
{
    get { return _control.SaveCombobox.Items[CurrentSaveIndex]; }
    set
    {
        if (value != _control.SaveCombobox.Items[0] && value != _control.SaveCombobox.Items[1])
        {
            OnPropertyChanged("SaveSelectedItemCheck");
        }
    }
} 
```

**代码隐藏方式：**

xml:

```
<ComboBox SelectedIndex="{Binding Path=SaveIndex, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" SelectionChanged="Save_SelectionChanged"> 
```

代码隐藏：

```
private void Save_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    ComboBox combobox = sender as ComboBox;
    if(combobox == null)
    {
        return;
    }

    if (combobox.SelectedItem != combobox.Items[0] && combobox.SelectedItem != combobox.Items[1])
    {
        combobox.SelectedItem = combobox.Items[1];
        e.Handled = true;
    }
} 
```

但它只适用于代码隐藏方式，这是肮脏的。

为什么不能以 MVVM 方式工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:49:18.640

您的 ViewModel 方法不会设置属性的值 - 无论该值是否有效。它只是根据值是否有效触发一个事件。

事实上，仔细检查后，您似乎对 MVVM 模式有所误解，因为您的 ViewModel 代码似乎直接引用了它所支持的控件。根据“正常”属性，您应该为您的属性提供一个支持字段。

更重要的是，无论该值是否有效，您*都应该*抛出该事件，因为如果该值已被视图模型覆盖，那么将通知 UI 组合框值需要重新设置为有效值。`PropertyChanged``PropertyChanged`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:27:43.577

正如其他人所说，您实际上并没有在属性设置器中设置任何值。

但更重要的是 IMO，我认为您误解了 MVVM 的关键概念。您的 ViewModel 代码存在很多问题：

```
public object SaveSelectedItemCheck
{
    get { return _control.SaveCombobox.Items[CurrentSaveIndex]; }
    set
    {
        if (value != _control.SaveCombobox.Items[0] && value != _control.SaveCombobox.Items[1])
        {
            OnPropertyChanged("SaveSelectedItemCheck");
        }
    }
} 
```

您指的`_control.SaveCombobox.Items`是 UI 概念/对象。这不是 ViewModel 的目标。而且您正在返回一个对象，您应该强烈键入您的模型！

您应该拥有以下内容：

*   一个模型（强类型 POCO 类）
*   **不以任何方式处理视图控件的**ViewModel （您甚至可以**将视图和 ViewModel 分离到不同的程序集中**，以确保您遵循此规则）
*   视图，绑定到`ItemsSource`控件，例如`Combobox`

模型：

```
public class SomeObject : INotifyPropertyChanged
{
    private string someProperty;
    public string SomeProperty
    {
        get { return this.someProperty; }
        set
        {
            if (this.someProperty != value)
            {
                this.someProperty = value;
                OnPropertyChanged("SomeProperty");
            }
        }
    }
    ...
} 
```

视图模型：

```
public class ViewModel : SomeViewModelBase
{
    private ObservableCollection<SomeObject> items;
    private SomeObject selectedItem;

    public ObservableCollection<SomeObject> Items
    {
        get
        {
            return items;
        }
        set
        {
            if (this.items != value)
            {
                this.items = value;
                OnPropertyChanged("Items");
            }
        }
    }

    public ObservableCollection<SomeObject> SelectedItem
    {
        get
        {
            return selectedItem;
        }
        set
        {
            if (this.selectedItem != value)
            {
                this.selectedItem = value;
                OnPropertyChanged("SelectedItem");
            }
        }
    }

    ...

    // Anywhere in your view model:
    this.Items = new ObservableCollection<SomeObject>(...);
    this.SelectedItem = this.Items[2];
    // Etc.
} 
```

看法：

```
<ComboBox 
    ItemsSource={Binding Items}
    SelectedItem="{Binding SelectedItem, Mode=TwoWay}"> 
```

查看代码隐藏：

没有你的例子

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T13:43:38.793

您不会以 MVVM 方式在 setter 中存储任何值。

# python - Google Drive API：无法上传某些文件类型

> ID：11902934
> 
> 赞同：2
> 
> 时间：2012-08-10T13:40:41.060
> 
> 标签：python, google-app-engine, google-drive-api

我使用 google appengine 创建了一个表单和一个简单的服务器，用于将任意文件类型上传到我的 google 驱动器。该表单无法用于某些文件类型，而是给出此错误：

```
HttpError: <HttpError 400 when requesting https://www.googleapis.com/upload/drive/v1/files?alt=json returned "Unsupported content with type: application/pdf"> 
```

不支持pdf文件吗？

进行上传的 appengine 代码有点像这样：

```
def upload_to_drive(self, filestruct):
    resource = {
        'title': filestruct.filename,
        'mimeType': filestruct.type,
    }
    resource = self.service.files().insert(
    body=resource,
    media_body=MediaInMemoryUpload(filestruct.value,
                                     filestruct.type),
    ).execute()

def post(self):
      creds = StorageByKeyName(Credentials, my_user_id, 'credentials').get()
      self.service = CreateService('drive', 'v1', creds)
      post_dict = self.request.POST
      for key in post_dict.keys():
          if isinstance(post_dict[key], FieldStorage):#might need to import from cgi
             #upload to drive and return link
             self.upload_to_drive(post_dict[key]) #TODO: there should be error handling here 
```

我已经成功地将它用于 MS Office 文档和图像。它也不适用于文本文件并给出此错误：

```
HttpError: <HttpError 400 when requesting https://www.googleapis.com/upload/drive/v1/files?alt=json returned "Multipart content has too many non-media parts"> 
```

我尝试取消设置资源字典中的“mimeType”值，让谷歌驱动器自动设置它。我还尝试在 MediaInMemoryUpload 构造函数中取消设置 mime 类型值。可悲的是，两者都没有奏效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T16:38:34.883

在我看来，您使用的是旧版本的 Python 客户端库并指的是 Drive API v1，而 Drive API v2 自 6 月底以来一直可用。

[请尝试更新您的库并在https://developers.google.com/drive/examples/python](https://developers.google.com/drive/examples/python)查看完整的 Python 示例。

# mysql - 从一个表中检索所有记录，从另一个表中检索特定记录

> ID：11902941
> 
> 赞同：0
> 
> 时间：2012-08-10T13:40:58.860
> 
> 标签：mysql, sql

**tbl_cmp**

```
usr_id | cmp_name | usr_fname |cmp_addr 
```

**tbl_usr**

```
cmp_usr_id |cmp_id | cmp_usr_fname | cnt_status 
```

我正在尝试查询一次从两者中检索数据：: 从 tbl_cmp 检索所有数据，但仅从 tbl_usr 检索 cnt_status=1 的字段

我试过这个

```
SELECT *
FROM tbl_cmp
JOIN tbl_usr ON tbl_usr.cmp_id = tbl_cmp.usr_id
WHERE tbl_usr.cnt_status =1 
```

但它仅显示具有 cnt_status=1 的记录，而不是第一个表中的所有记录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:14:28.113

您真正想要的是交叉连接，因为您在表之间没有连接条件：

```
select c.*, u.*
from tbl_cmp c cross join
     (select *
      from tbl_users u
      where u.cnt_status = 1
     ) u 
```

您可以在没有子查询的情况下将其表示为：

```
select c.*, u.*
from tbl_cmp c cross join
     tbl_users u
where u.cnt_status = 1 
```

我更喜欢子查询版本，因为它使 tbl_users 上的条件非常明显。在更复杂的查询中，WHERE 子句可能与表在 FROM 子句中出现的位置完全分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:43:37.547

使用**左外连接**

```
SELECT *
FROM tbl_users
Left outer JOIN tbl_cmp_user 
ON tbl_cmp_user.cmp_id = tbl_users.usr_id
and tbl_cmp_user.cnt_status =1 
```

[请参阅此处](http://www.w3schools.com/sql/sql_join_left.asp)的左外连接示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T13:44:21.933

尝试这个

```
SELECT * FROM tbl_users LEFT JOIN tbl_cmp_user 
ON tbl_cmp_user.cmp_id = tbl_users.usr_id 
AND tbl_cmp_user.cnt_status =1 
```

# android - Android解压缩在Mac上压缩的文件

> ID：11902943
> 
> 赞同：4
> 
> 时间：2012-08-10T13:41:06.880
> 
> 标签：android, macos, windows-7, osx-lion, zipfile

我有一个应用程序，它下载一个 zip 文件并解压缩我 SDCard 上的文件。一切正常，但是当我的同事在他的 Mac（狮子）上创建 zip 文件时，我的所有文件都有

**尺寸：-1**

**CRC：-1**

**压缩大小：-1**

而且我无法将文件写入我的 SD 卡。两个拉链具有完全相同的内容，唯一的区别是它们最初压缩的位置。这是我解压缩文件的代码：

```
public class UnzipTask extends AsyncTask<String, Integer, Void> {

    private static final String TAG = UnzipTask.class.getSimpleName();

    private String mDestLocation;
    private ZipListener mListener;
    private Context mCtx;

    private int mCallbackId;

    public UnzipTask(Context context, ZipListener listener, File dir)
    {
        mCtx = context;
        mListener = listener;
        mDestLocation = dir.getAbsolutePath() + "/";

    }

    public void setId(int id)
    {
        mCallbackId = id;
    }

    @Override
    protected Void doInBackground(String... arg0) {

        try {

            String file = arg0[0];
            InputStream is = mCtx.getAssets().open(file);
            unzipFile(is);

        } catch (IOException e) {
            e.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * Private function that ensures a directory exist
     * @param dir
     */
    private void _dirChecker(String dir) {
        File f = new File(mDestLocation + dir);

        if (!f.isDirectory()) {
            f.mkdirs();
            }
    }

    private void unzipFile(InputStream input) throws Exception {

        ZipInputStream zin = new ZipInputStream(input);
        ZipEntry ze = null;

        while ((ze = zin.getNextEntry()) != null) {

            Log.v(TAG, "Unzipping " + ze.getName());

            if(mListener != null)
            {
                mListener.onUnzipped(mCallbackId, ze.getName(), ze.g   etSize(), ze.getCrc(), ze.getCompressedSize());
                }

            if (ze.isDirectory()) {
                _dirChecker(ze.getName());
            } else if (ze.getCompressedSize() > 0 && ze.getSize() > 0 && ze.getCrc() != 0.0) {
                // If size=-1 -> writing to disk fails

                String fileOutput = mDestLocation + ze.getName();

                FileOutputStream fout = new FileOutputStream(fileOutput);
                int read = 0;

                byte[] buffer = new byte[(int) ze.getSize()];

                while ((read = zin.read(buffer)) >= 0) {
                    fout.write(buffer, 0, read);
                }

                zin.closeEntry();
                fout.close();
                } else {
                Log.v(TAG, "Skipping entry" + ze.getName());
            } 
            }
        }

        zin.close();
    }

} 
```

**一些笔记**

**1）**我可以在我的 Windows 7 电脑上解压缩这两个文件

**2)**我的同事可以在他的 Mac 上解压缩这两个文件

**3)**唯一的问题是，在 Android 上，我无法解压缩 MAC 创建的 zip 文件...

**问题：**

有谁知道为什么在 Mac 上压缩的 zip 文件有这些无效的大小？我的解压过程（在 Android 上）是否缺少一些代码？

如果需要，您可以在此处下载 zip，以及一个非常小的 apk 来显示输出：

编辑：更新了链接

[压缩文件（在 Mac 上压缩）](http://www.haarmodemanowi.nl/stackoverflow/test_mac.zip)

[压缩文件（Win7 上的压缩文件）](http://www.haarmodemanowi.nl/stackoverflow/test_win.zip)

[演示.apk](http://www.haarmodemanowi.nl/stackoverflow/Stackoverflow.apk)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T20:38:37.860

该问题与版本有关。让我从我的 Mac (10.8) 的一些输出开始：

```
~ $ zipinfo -m test_mac.zip 
Archive: test_mac.zip   1694 bytes   8 files
drwxr-xr-x  2.1 unx        0 bx  0% stor 10-Aug-12 01:11 test_win/
-rwxr-xr-x  2.1 unx       46 bX 20% defN 10-Aug-12 01:11 test_win/index.html
drwxrwxr-x  2.1 unx        0 bx  0% stor 10-Aug-12 01:12 __MACOSX/
drwxrwxr-x  2.1 unx        0 bx  0% stor 10-Aug-12 01:12 __MACOSX/test_win/
-rw-r--r--  2.1 unx      211 bX 37% defN 10-Aug-12 01:11 __MACOSX/test_win/._index.html
-rwxr-xr-x  2.1 unx        9 bX-21% defN 10-Aug-12 01:10 test_win/version.txt
-rw-r--r--  2.1 unx      211 bX 37% defN 10-Aug-12 01:10 __MACOSX/test_win/._version.txt
-rw-r--r--  2.1 unx      211 bX 37% defN 10-Aug-12 01:11 __MACOSX/._test_win
8 files, 688 bytes uncompressed, 450 bytes compressed:  34.6%
~ $ zipinfo -m test_win.zip 
Archive: test_win.zip   1678 bytes   8 files
drwx---     3.1 fat        0 bx  0% stor 10-Aug-12 09:11 test_win/
-rw-a--     3.1 fat       46 bx 20% defN 10-Aug-12 09:11 test_win/index.html
-rw-a--     3.1 fat        9 bx-21% defN 10-Aug-12 09:10 test_win/version.txt
drwx---     3.1 fat        0 bx  0% stor 10-Aug-12 09:12 __MACOSX/
-rw-a--     3.1 fat      211 bx 37% defN 10-Aug-12 09:11 __MACOSX/._test_win
drwx---     3.1 fat        0 bx  0% stor 10-Aug-12 09:12 __MACOSX/test_win/
-rw-a--     3.1 fat      211 bx 37% defN 10-Aug-12 09:11 __MACOSX/test_win/._index.html
-rw-a--     3.1 fat      211 bx 37% defN 10-Aug-12 09:10 __MACOSX/test_win/._version.txt
8 files, 688 bytes uncompressed, 450 bytes compressed:  34.6% 
```

查看第二个字段（mac 文件中的 2.1 和 win 文件中的 3.1）。这是压缩文件的 ZIP 存档格式版本。该`java.util.zip`实现仅支持 2.50 及更高版本的 ZIP 文件格式（请参阅此[StackOverflow](https://stackoverflow.com/questions/3348157/what-version-of-zip-is-supported-by-java-1-6-or-any-version-for-that-matter)）。

Mac 的**Compress ...**菜单选项使用低于 Java 实现支持的版本（2.1 仍在 10.8 中使用）。

告诉您的同事改用命令行工具（例如`zip -r myfile.zip directory_to_compress/`），您应该得到一个 Android 应用程序可以膨胀的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T19:57:46.253

这些文件非常不同......很难找到重要的差异。![在此处输入图像描述](../Images/43b7ed2cfc86e8955134e611f0c4a3b2.png)

# xml - 对如何使用 JAXB XML Adapter 来满足我的要求感到困惑

> ID：11902946
> 
> 赞同：8
> 
> 时间：2012-08-10T13:41:18.250
> 
> 标签：xml, jaxb, jaxb2, xmladapter

我使用 JAXB 进行解组过程，请求来自 UI 到我们的服务类。下面是 XML 请求的格式。

```
<SampleRequest  user="testUser"  account="testAccount"    Specifier=  "value1a,value1b,value1c : name2a,value2b,value2c"/> 
```

我的要求是，Specifier 属性有多个值系列（：冒号分隔）我需要将每个系列值映射到我的自定义 java 类

**我试过这种方式**

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class SampleRequest {

    @XmlAttribute
    private String user;

    @XmlAttribute
    private String account;

    @XmlAttribute(name="Specifier")
    private List<Specifier> specifier;

} 
```

**说明符.java**

```
@XmlJavaTypeAdapter(SpecifierAdapter.class)
public class Specifier {

} 
```

**说明符适配器.java**

```
public class SpecifierAdapter  extends XmlAdapter{

    @Override
    public Object marshal(Object arg0) throws Exception {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public Object unmarshal(Object arg0) throws Exception {
        // TODO Auto-generated method stub
        return null;
    }

} 
```

**编辑部分**

**类说明符有 3 个字符串属性。**

```
class Specifier
{
String value1;
String value2;
String value3;
} 
```

**我需要每个系列的说明符例如 (value1a,value1b,value1c) 应该分别映射到 value1 , value2 , value3**

**编辑第 3 部分**

嗨， **感谢您的回复，我试图解组这个例子，我发现，我得到了空**

这是我通过的请求

```
<sampleRequest user="user" account="account" Specifier="v1,v2,v3 : a1,a2,a3"/> 
```

**只是想确保，我的说明符类是否正确？（因为我在这里没有使用任何注释）**

```
package com;

import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

@XmlJavaTypeAdapter(SpecifierAdapter.class)
public class Specifier {

    Specifier(String v1 , String v2 , String v3)
    {

    }

    String value1;

    public String getValue1() {
        return value1;
    }

    public void setValue1(String value1) {
        this.value1 = value1;
    }

    public String getValue2() {
        return value2;
    }

    public void setValue2(String value2) {
        this.value2 = value2;
    }

    public String getValue3() {
        return value3;
    }

    public void setValue3(String value3) {
        this.value3 = value3;
    }

    String value2;
    String value3;

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T14:23:07.760

注意：适配器代码可以通过使用 guava-library 的[Joiner 和 Splitter](http://code.google.com/p/guava-libraries/wiki/StringsExplained)来简化。

**样品申请**

```
public class SampleRequest
{
    @XmlAttribute
    private String user;

    @XmlAttribute
    private String account;

    @XmlAttribute(name = "Specifier")
    @XmlJavaTypeAdapter(SpecifierAdapter.class)
    private List<Specifier> specifier;
} 
```

**适配器**

```
public class SpecifierAdapter extends XmlAdapter<String, List<Specifier>>
{
    @Override
    public List<Specifier> unmarshal(final String v) throws Exception
    {
        String[] values = v.split(":");
        List<Specifier> l = new ArrayList<Specifier>();
        for (String s : values)
        {
            String[] vs = s.split(",");
            l.add(new Specifier(vs[0], vs[1], vs[2]));
        }
        return l;
    }

    @Override
    public String marshal(final List<Specifier> v) throws Exception
    {
        String values = "";
        for (Specifier s : v)
        {
            values += s.getValue1() + "," + s.getValue2() + "," + s.getValue3() + " : ";
        }
        return values.length() > 0 ? values.substring(0, values.length() - 3) : values;
    }
} 
```

**用法**

```
public static void main(final String a[]) throws JAXBException
{
        SampleRequest r = new SampleRequest();
        r.setAccount("account");
        r.setUser("user");
        List<Specifier> sps = new ArrayList<Specifier>();
        sps.add(new Specifier("v1", "v2", "v3"));
        sps.add(new Specifier("a1", "a2", "a3"));
        r.setSpecifier(sps);

        JAXBContext jc = JAXBContext.newInstance(SampleRequest.class);
        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(r, System.out);
} 
```

**输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<sampleRequest user="user" account="account" Specifier="v1,v2,v3 : a1,a2,a3"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T14:39:18.933

我已经用我的 IDE 准备好了答案。

您删除了您的问题（11887278）并再次询问。

我想了想，认为这个要求不是一个好主意。我只是对你的问题感兴趣，因为我从来没有对一个属性做这些多个字符串。

有趣的是，我的代码与 Senthil Kumar 解释的非常相似。

请在[https://code.google.com/p/jinahya/source/browse/trunk/com.googlecode.jinahya/stackoverflow/src/main/java/com/googlecode/jinahya/stackoverflow/q11887278查看完整的 mavenized 项目/](https://code.google.com/p/jinahya/source/browse/trunk/com.googlecode.jinahya/stackoverflow/src/main/java/com/googlecode/jinahya/stackoverflow/q11887278/)

请

```
package com.googlecode.jinahya.stackoverflow.q11887278;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import javax.xml.bind.annotation.adapters.XmlAdapter;

/**
 *
 * @author Jin Kwon <jinahya at gmail.com>
 */
public class SpecifierAdpater extends XmlAdapter<String, List<Specifier>> {

    @Override
    public List<Specifier> unmarshal(final String value) throws Exception {

        if (value == null) {
            return null;
        }

        final List<Specifier> bound = new ArrayList<Specifier>();
        for (String split : value.split(":")) {
            final Specifier specifier = new Specifier();
            specifier.fromString(split);
            bound.add(specifier);
        }
        return bound;
    }

    @Override
    public String marshal(final List<Specifier> bound) throws Exception {

        if (bound == null) {
            return null;
        }

        final StringBuilder builder = new StringBuilder();
        final Iterator<Specifier> specifiers = bound.iterator();
        if (specifiers.hasNext()) {
            builder.append(specifiers.next().toString());
        }
        while (specifiers.hasNext()) {
            builder.append(":");
            builder.append(specifiers.next().toString());
        }
        return builder.toString();
    }

} 
```

这里有 10 个示例，每个示例都是编组的和未编组的

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<request user="user"/>

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<request/>

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<request user="user" account="account"/>

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<request specifiers="null,null,value3:null,value2,value3"/>

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<request specifiers="value1,null,value3"/>

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<request/>

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<request user="user" account="account" specifiers="value1,null,null"/>

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<request user="user" account="account" specifiers="null,null,null"/>

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<request specifiers="null,value2,value3"/>

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<request user="user" account="account"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T13:51:41.443

您可以为 SpecifierAdapter.java 尝试以下实现

```
public class SpecifierAdapter extends XmlAdapter<String, List<Specifier>>{
  @Override
  public String marshal(List<Specifier> values) throws Exception {
    StringBuilder result = new StringBuilder();
    for(Specifier specifier : values) {
      result.append(specifier.toString()); //assuming you have overridden toString() method
      result.append(",");
    }
    return result.length>0? result.substring(0, result.length() - 1): "";
  }

  @Override
  public List<Specifier> unmarshal(String colonSeparated) throws Exception {   
    List<String> values =  Arrays.asList(colonSeparated.split(":"));
    List<Specifier> specifiers = new ArrayList<Specifiers>();
    for(String str : values){
        specifiers.add(new Specifier(str)); //here use your constructor appropriately
    }
    return specifiers;
  }
} 
```

# java - 广播意图回调：result=CANCELLED forIntent

> ID：11902947
> 
> 赞同：4
> 
> 时间：2012-08-10T13:41:21.963
> 
> 标签：java, android, android-intent, android-c2dm

我有一个注册到 c2dm 服务器的移动应用程序。

我有一个向我的应用程序发送消息以推送通知的服务器。服务器从 google c2dm 接收到 ok 结果代码。

在 LogCat 中，我看到我的应用程序收到了消息，但立即产生了我在帖子中遇到的错误。而且我创建的通知也被忽略了。

```
08-10 16:28:09.157: W/GTalkService(13962): [DataMsgMgr] broadcast intent callback: result=CANCELLED forIntent { act=com.google.android.c2dm.intent.RECEIVE pkg=com.example.c2dmclient (has extras) } 
```

我不明白。我的清单文件是：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.c2dmclient"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <permission android:name="com.example.c2dmclient.permission.C2D_MESSAGE" android:protectionLevel="signature" />
    <uses-permission android:name="com.example.c2dmclient.permission.C2D_MESSAGE" />
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />

    <!-- Keeps the processor from sleeping when a message is received. -->
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver
            android:name=".C2DMRegistrationReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter >
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" >
                </action>

                <category android:name="com.example.c2dmclient" />
            </intent-filter>
        </receiver>
        <receiver
            android:name=".C2DMMessageReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter >
                <action android:name="com.google.android.c2dm.intent.RECEIVE" >
                </action>

                <category android:name="com.example.c2dmclient" />
            </intent-filter>
        </receiver>

        <activity android:name="com.example.c2dmclient.RegistrationResultActivity" >
        </activity>
        <activity android:name="com.example.c2dmclient.MessageReceivedActivity" >
        </activity>

    </application>

</manifest> 
```

如果有人可以帮助我，请。我没主意了

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T09:50:59.507

根据这个[论坛帖子](https://groups.google.com/forum/#!msg/android-gcm/MqVlA3Sj26c/6O4TdU1pm0UJ)，当接收应用程序在设备上处于停止状态时（例如通过设置中的强制停止），Android 3.1+ 会出现这种情况。只有在手动启动时才会再次开始接收消息。

另见[这篇文章](https://stackoverflow.com/questions/8814817/c2dm-broadcast-receiver)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:04:59.033

最后我发现问题出在哪里。当我创建通知时，在徽标 id 的位置，我输入了 0。现在一切正常。

# iphone - 如何识别指南针是否正朝着该位置前进？

> ID：11902949
> 
> 赞同：0
> 
> 时间：2012-08-10T13:41:25.520
> 
> 标签：iphone, gps, xcode4.3

我正在开发一个增强现实项目，其中指南针显示到目的地的方向。效果很好，但我想检查当前航向是否指向目的地。任何人都可以建议我一种方法吗？我在谷歌搜索了很多找不到任何方法？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:13:08.570

您需要从您所在位置到目标位置的绝对方位角

不幸的是 CLLocation 对此没有要求，但您可以在这个问题中找到算法。

[CLLocation 类别，用于计算带半正弦函数的轴承](https://stackoverflow.com/questions/3925942/cllocation-category-for-calculating-bearing-w-haversine-function)

所以假设方位角是 90 度

然后你把手机的方位向北。

在获取位置更新时，您还可以使用 CLLocation 进行课程更新。

课程也可能是 90 度

所以找到两者之间的差异，90 - 90 = 0！你死在目标上:) 如果你面对北方（0度）并且你的目标在你身后（180度）导致-180，你需要将数字合理化为0 - 360。如果你最终得到一个负数，只需添加 360。

我发现磁场罗盘非常烦躁，所以如果你有某种指数移动平均线来衡量手机轴承的变化，它看起来会更好。

# kendo-ui - 将单元格的值移动到右侧

> ID：11902951
> 
> 赞同：0
> 
> 时间：2012-08-10T13:41:27.330
> 
> 标签：kendo-ui

我在做剑道。如果我们观察一个网格，那么所有值都在每个单元格的左侧。我有一个价格字段，我希望它的值在单元格的右侧。

剑道ui可以吗？

我的代码：-

```
<div id="grid"></div>
<script>
 $(document).ready(function () {
var crudServiceBaseUrl = ${grailsApplication.config.grails.serverURL}"+/course/,
          dataSource = new kendo.data.DataSource({
             transport: {
                read:  {
                  url: crudServiceBaseUrl+"listAll", dataType: "json",
                                           cache: false                                                
                                       },
                                       parameterMap: function(options, operation) {
                                           if (operation !== "read" && options.models) {
                                            return {models:                    
                                            kendo.stringify(options.models)};                          
   }
                                       }
                                   },
                      batch: true,
                      pageSize: 15,
                      sort: { field: "dateCreated", dir: "desc" },
                      schema: {
                      model: {
                      id: "id",
                      fields: {
                      name: { editable: false, type: "string", validation: { required:   
                      true, min: 1} },
                      type: { editable: false, type: "Type",validation: { required: true, min: 1}  
                     },                                                    
                     fee: { editable: false, type: "double",validation: { required: true, min: 1}   
          },                                                     
                     duration: { editable: false, type: "integer",                                 validation: { required: true, min: 1} },                                                                    
                     status: { editable: false, type:"Status" ,                                 validation: { required: true, min: 1} }
                                            }
                                        }
                                    }
                                });

                    $("#grid").kendoGrid({
                        dataSource: dataSource,
                        navigatable: true,
                        pageable: true,
                        groupable:true,
                        sortable:true,
                        selectable:true,
                        height: 300,
                        columns: [
       {field: "name",
                title:'<g:message  code="grid.billingServicesGroup.holidayName.label"  
                default="Course Name" />'},
       {field: "type.name",
               title:'<g:message code="grid.billingServicesGroup.reason.label" 
               default="Type of course" />'},
       {field: "fee",title:'<g:message
               code="grid.billingServicesGroup.code.label" 
               default="Fee" />'},
       {field: "duration",title:'
          <g:message  code="grid.billingServicesGroup.holidayDate.label"   
        default="Duration(Year)" />'}
                         ,
       {field: "status.name",title:'<g:message   
             code="grid.billingServicesGroup.status.label" default="Status" />'},
                        ],
                        editable: true,
                        change:function(e){
                            idOfData=this.select().data("id");
                            window.location.href=crudServiceBaseUrl+"show/"+idOfData;
                        },
                        saveChanges:function(){
                        },
                        remove:function(e){
                            /*alert(e.model.id.value);
                            selectedId=this.select().data("id");
                            $.ajax({
                                url:"http://localhost:8080/billing-
                       app/api/skeletonBill/"+selectedId,
                                type:"DELETE"
                                }).done(function(){alert('deleted')});*/
                        },
                        scrollable: {
                            virtual: true
                        }
                    });
                });
            </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:04:40.330

您可以使用列模板将该列中所有单元格的内容包装在例如 div 标记中。然后，您可以使用 div 上的类来使用 CSS 设置内容样式。

例如：

```
columns:
[{
    field:"Department",
    title:"Department",
    width:80,
    template: "<div class='foobar'>#= Department#</div>"
}]

/* CSS */
.foobar {
    width: 100%;
    text-align: right;
} 
```

# java - 如何从中获取价值

> ID：11902953
> 
> 赞同：5
> 
> 时间：2012-08-10T13:41:31.433
> 
> 标签：java, selenium, webdriver

我有html代码：

```
<div class="description">
<h3><strong>Samsung</strong> Galaxy SII (I9100)</h3>
<div class="phone_color"> ... </div>
...
</div> 
```

我想使用 Selenium 2 (WebDriver) 从 /h3> 标记中获取*三星 Galaxy SII (I9100)的值*

有谁知道怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T16:14:41.917

这是用 C# 编写的，但将其转换为 Java 应该不难：

```
/** Declare variables **/
string descriptionTextXPath = "//div[contains(@class, 'description')]/h3";

/** Find the element **/
IWebElement h3Element = driver.FindElement(By.XPath(descriptionTextXPath));

/** Grab the text **/
string descriptionText = h3Element.Text; 
```

根据您是否有其他具有“描述”类的 div 元素，您可能需要进一步微调您的结果。

* * *

以防万一：

为了在页面上找到所有用作描述以供进一步使用的 div，您可以执行以下操作：

```
/** Declare XPath variable **/
string descriptionElementXPath = "//div[contains(@class, 'description')]";

/** Grab all description div elements **/
List<IWebElement> descriptionElements = driver.FindElements(By.XPath(descriptionElementXPath )); 
```

然后，您可以使用 forloop 遍历每个元素并获取所需的数据。

以下是上述 C# 代码到 Java 的转换：

/** 声明变量 **/

```
String descriptionTextXPath = "//div[contains(@class, 'description')]/h3"; 
```

/** 查找元素 **/

```
IWebElement h3Element = driver.findElement(By.xpath(descriptionTextXPath)); 
```

/** 抓取文本 **/

```
String descriptionText = h3Element.toString(); 
```

或者，

```
String descriptionText = h3Element.getText(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-19T07:06:33.053

```
WebElement divElement = driver.findelement(By.classname("description"));
String str = divElement.getText();
System.out.println(str); 
```

这是完美的..它有帮助..谢谢:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T07:04:59.253

```
WebElement divElement = driver.findelement(By.classname("description"));
String str = divElement.getText();
enter code here 
```

str 包含值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-12T10:53:04.220

```
webDriver.findElement(By.tagName("h3")); 
```

# python - 如何以编程方式检查 Google Appengine 中任务队列的状态？

> ID：11902954
> 
> 赞同：6
> 
> 时间：2012-08-10T13:41:36.300
> 
> 标签：python, google-app-engine, queue

我正在启动队列以完成 Python Appengine 应用程序中的一些任务。有没有办法获取队列的状态？我想检查它是否仍在运行或有未完成的任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:54:22.147

Google 刚刚于 2012 年 9 月 18 日发布了新的 SDK 版本 1.7.2，看起来您可以使用[QueueStatistics](http://code.google.com/p/googleappengine/wiki/SdkReleaseNotes)来获得它。从[发行说明](http://code.google.com/p/googleappengine/wiki/SdkReleaseNotes)：

> 您现在可以获取任务队列统计信息。这允许您从应用程序中获取有关任务队列的统计信息和信息。统计信息包括队列中的任务数、最后一分钟执行的任务数和强制执行率等信息。这是一个实验性功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:11:45.003

您的 appengine 控制台上有一个任务队列链接，您可以在其中查看待处理的任务、统计信息并了解正在发生的事情。

# ruby-on-rails - 在 Rails 应用程序中动态添加 named_scopes

> ID：11902955
> 
> 赞同：0
> 
> 时间：2012-08-10T13:41:37.143
> 
> 标签：ruby-on-rails, ruby, named-scope, dynamic-finders

就像 rails 中的动态查找器方法一样，有没有办法为关联模型提供动态查找器方法？

考虑以下模型

```
class User
   attr_accessible :name, :phone_no
   has_many :notes
end

class Note
   belongs_to :user
   attr_acccessible :note
end 
```

如何从用户对象中调用注释属性的动态查找器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:23:45.080

范围是类方法，因此 User.scope_name （有关范围的更多信息：http://guides.rubyonrails.org/active_record_querying.html#scopes [）](http://guides.rubyonrails.org/active_record_querying.html#scopes)。如果您想找到属于该用户对象的特定注释，您可以定义一个实例方法 - 如下所示：

```
def note_with_content(content_string)
   self.notes.where(:content => "#{content_string}")
end 
```

或者

```
def last_note
   self.notes.last
end 
```

并通过以下方式使用它：

```
@user.note_with_content("This is a note")

@user.last_note 
```

# sql - 如何为此特定标签触发选择查询 在 XMLTYPE

> ID：11902964
> 
> 赞同：2
> 
> 时间：2012-08-10T13:42:22.257
> 
> 标签：sql, database, oracle, xml-parsing, oracle11g

我在表中使用 XMLTYPE 列。

我的架构是在 sqlfiddle 上的这个链接上开发的

[http://sqlfiddle.com/#!4/90306/1](http://sqlfiddle.com/#!4/90306/1)

我可以使用那里的查询来获取建筑的价值。

但我实际的 XML 是

[http://sqlfiddle.com/#!4/226cf](http://sqlfiddle.com/#!4/226cf)

```
 <m:Building>FBI</m:Building> 
```

有一个像 `<m:Building>`.

但是，当我试图在第二个模式中获得在这里构建的价值时，我遇到了错误。

我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:53:24.557

您需要为`extract`函数提供 XML 命名空间，例如：

```
SELECT 
  w.col1.extract
('/House/Building/text()', 'xmlns="rn://dt.com/batch/2010/08/13"').getStringVal()
     "Building"
  FROM tab1 w; 
```

# iphone - 裁剪图像后，保存的图像质量降低

> ID：11902967
> 
> 赞同：0
> 
> 时间：2012-08-10T13:42:52.133
> 
> 标签：iphone, ios, image

我必须简单地裁剪图像。但是在裁剪后保存的图像质量不如原始图像。

当我将它上传到服务器时。服务器管理员告诉我你的图片是压缩的 .jpg

有什么方法可以提高裁剪图像的质量？

我做得对吗？

谢谢

代码 ：

```
CGRect rect = [mImageView bounds];

UIGraphicsBeginImageContextWithOptions(rect.size,YES,0.0f);
CGContextRef context = UIGraphicsGetCurrentContext();
[self.view.layer renderInContext:context];   
UIImage *capturedImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

UIImageWriteToSavedPhotosAlbum(capturedImage, nil, nil, nil);///save image in phone 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T16:01:38.243

您正在根据屏幕尺寸进行裁剪。您需要根据图像的可见区域进行裁剪。如果您根据屏幕尺寸进行裁剪，则最多只能得到 960x640 的图像（在 Retina 设备上进行裁剪时）。

# jsf - 在 Jboss 上使用 ISO-8859-1 编码和 JSF 2

> ID：11902969
> 
> 赞同：1
> 
> 时间：2012-08-10T13:43:06.423
> 
> 标签：jsf, jsf-2, character-encoding, jboss, mojarra

我有一个使用以下指令的 JSP 页面：

```
<%@page contentType="text/html; charset=iso-8859-1" pageEncoding="iso-8859-1"%> 
```

因此，页面中的表单使用 ISO-8859-1 编码发送，bean 接收（在 setXXX() 方法中）根据这种格式编码的字符串。

我想将 JSP“翻译”成 JSF 2，它默认使用 UTF-8。如何强制 JSF 使用 ISO-8859-1 并因此模拟页面指令？

我在 jboss 6 上使用 Mojarra + richfaces。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T13:55:59.877

设置的`encoding`属性[`<f:view>`](http://download.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/view.html)。

```
<f:view encoding="ISO-8859-1"> 
```

* * *

然而，这些天不再推荐坚持使用非 Unicode 编码。你的 webapp 还没有准备好统治世界，当最终用户尝试发送 Unicode 编码的数据（例如希伯来文、西里尔文、中文等）时，你会冒[Mojibake的风险。](http://en.wikipedia.org/wiki/Mojibake)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:14:18.120

我并没有真正理解这个问题，但这让我在使用 UTF-8 而不是 ISO-8859-1 时避免了 Mojibake：

```
public class EncodingFilter implements Filter {

    @Override
    public void doFilter(ServletRequest req, ServletResponse resp, FilterChain chain) throws IOException, ServletException {
        if (req.getCharacterEncoding() == null) {
            req.setCharacterEncoding("UTF-8");
        }
        chain.doFilter(req, resp);
    }

    @Override
    public void destroy() {
    }

    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
    }
} 
```

奇怪的是，没有这个过滤器，我得到了 Mojibakes，尽管我没有指定任何类型的编码。我还注意到 init() 方法中的 (filterConfig.getInitParameter("encoding")) 总是返回 null。

# python - 如何使用 Beautiful Soup 从 HTML 文档中获取纯文本和 URL？

> ID：11902974
> 
> 赞同：2
> 
> 时间：2012-08-10T13:43:13.180
> 
> 标签：python, beautifulsoup

我使用 Python 和正则表达式在 HTML 文档中查找内容，与大多数人所说的不同，它运行良好，即使出现问题。无论如何，我认为 Beautiful Soup 会更快更容易，但我真的不知道如何让它像我用正则表达式做的那样，这很容易，但很混乱。

我正在使用此页面的 HTML：

[http://www.locationary.com/places/duplicates.jsp?inPID=1000000001](http://www.locationary.com/places/duplicates.jsp?inPID=1000000001)

编辑：

这是主要位置的 HTML：

```
<tr>
<td class="Large Bold" nowrap="nowrap">Riverside Tower Hotel&nbsp;</td>
<td class="Large Bold" width="100%">80 Riverside Drive, New York, New York, United States</td>
<td class="Large Bold" nowrap="nowrap" width="55">&nbsp;<input name="selectCheckBox" type="checkbox" checked="checked" disabled="disabled" />Yes
</td>
</tr> 
```

第一个类似地方的例子：

```
<td class="" nowrap="nowrap"><a href="http://www.locationary.com/place/en/US/New_York/New_York/54_Riverside_Dr_Owners_Corp-p1009633680.jsp" target="_blank">54 Riverside Dr Owners Corp</a></td>
<td width="100%">&nbsp;54 Riverside Dr, New York, New York, United States</td>
<td nowrap="nowrap" width="55"> 
```

当我的程序得到它并且我使用 Beautiful Soup 使其更具可读性时，HTML 出来的结果与 Firefox 的“查看源代码”有点不同......我不知道为什么。

这些是我的正则表达式：

```
PlaceName = re.findall(r'"nowrap">(.*)&nbsp;</td>', main)

PlaceAddress = re.findall(r'width="100%">(.*)</td>\n<td class="Large Bold"', main)

cNames = re.findall(r'target="_blank">(.*)</a></td>\n<td width="100%">&nbsp;', main)

cAddresses = re.findall(r'<td width="100%">&nbsp;(.*)</td>\n<td nowrap="nowrap" width="55">', main)

cURLs = re.findall(r'<td class="" nowrap="nowrap"><a href="(.*)" target="_blank">', main) 
```

前两个是主要地点和地址。其余的用于其余地方的信息。完成这些之后，我决定只需要 cNames、cAddresses 和 cURLs 的前 5 个结果，因为我不需要 91 或其他任何值。

我不知道如何通过 BS 找到此类信息。我对 BS 所能做的就是找到特定的标签并用它们做事。这个 HTML 有点复杂，因为所有的信息。我想要的是表格，表格标签也有点乱......

您如何获取该信息，并将其限制在前 5 个结果左右？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T15:05:03.827

人们说你不能用正则表达式解析 HTML 是有原因的，但这里有一个适用于你的正则表达式的简单原因：你已经在你`\n`的正则`&nbsp;`表达式中，并且这些可以并且*将会*在你的页面上随机更改正在尝试解析。发生这种情况时，您的正则表达式将不匹配，您的代码将停止工作。

但是，您要执行的任务非常简单

```
from BeautifulSoup import BeautifulSoup
soup = BeautifulSoup(open('this-stackoverflow-page.html'))

for anchor in soup('a'):
    print anchor.contents, anchor.get('href') 
```

生成所有锚标记，无论它们出现在此页面的深层嵌套结构中的什么位置。以下是我从该三行脚本的输出中摘录的几行：

```
[u'Stack Exchange'] http://stackexchange.com
[u'msw'] /users/282912/msw
[u'faq'] /faq
[u'Stack Overflow'] /
[u'Questions'] /questions
[u'How to use Beautiful Soup to get plaintext and URLs from an HTML document?'] /questions/11902974/how-to-use-beautiful-soup-to-get-plaintext-and-urls-from-an-html-document
[u'http://www.locationary.com/places/duplicates.jsp?inPID=1000000001'] http://www.locationary.com/places/duplicates.jsp?inPID=1000000001
[u'python'] /questions/tagged/python
[u'beautifulsoup'] /questions/tagged/beautifulsoup
[u'Marcus Johnson'] /users/1587751/marcus-johnson 
```

很难想象更少的代码可以为您完成那么多工作。

# java - jersey 如何在一个资源中创建静态成员

> ID：11902984
> 
> 赞同：0
> 
> 时间：2012-08-10T13:43:50.810
> 
> 标签：java, rest, nullpointerexception, jersey

我正在创建一个简单的 REST 服务，它只拥有 REST 资源（带有 Jersey 注释的 java 类）。此 REST 资源需要多个 Java 对象才能工作。这些 Java 对象非常大，只有几百 MB，因此将它们加载到 RAM 中很慢。因此，我试图将这些对象添加为这个 REST 类的**静态**成员。但是，当我向 REST 服务发送请求时，它总是会抛出**NullPonterException**。谁能解释为什么在加载 REST 资源（类）之前没有实例化这些静态成员？还是其他一些原因？

提前谢谢你们。

**注意**：这些静态成员只是一些 Maps 和 Lists 对象，由依赖 jar 中的类创建。

**编辑：**假设下面的***InfoConstructor***是一个负责创建这些静态对象的实用程序类。

我的 REST 资源类的代码如下：

```
@Path("test")
public class TestResource {
    public static Map<String, Integer> vocMap = InfoConstructor.getVocMap();

    @Get
    @Produce(Media.TEXT_HTML)
    public String testGet() {
         return vocMap.hashCode();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T01:57:03.463

根据评论，听起来静态资源已正确初始化。更多的是解决类路径资源的问题。查看[jar 中的 Classpath 资源](https://stackoverflow.com/questions/1900154/classpath-resource-within-jar)

# .net - WCF 客户端在服务关闭时忽略超时值

> ID：11902985
> 
> 赞同：11
> 
> 时间：2012-08-10T13:44:04.583
> 
> 标签：.net, vb.net, wcf, wcf-client

我有一个使用 WCF 的 VB .NET 应用程序。我已经为代码中的所有内容设置了客户端超时：

```
 Dim oMastSrv As MastSvc.IclsIOXferClient = Nothing

    Dim binding As New ServiceModel.NetTcpBinding("NetTcpBinding_IclsIOXfer")
    Dim intTimeout As Integer = 2500
    binding.SendTimeout = New TimeSpan(0, 0, 0, 0, intTimeout)
    binding.ReceiveTimeout = New TimeSpan(0, 0, 0, 0, intTimeout)
    binding.OpenTimeout = New TimeSpan(0, 0, 0, 0, intTimeout)
    binding.CloseTimeout = New TimeSpan(0, 0, 0, 0, intTimeout)
    Dim address As New ServiceModel.EndpointAddress("net.tcp://" & GetSrvIP(intSrvID) & ":30000/MyMastSvc")

    oMastSrv = New MastSvc.IclsIOXferClient(binding, address)
    Try
        oMastSrv.ServiceConnect( ... )
        oMastSrv.InnerChannel.OperationTimeout = New TimeSpan(0, 0, 0, 0, intTimeout)
    Catch ex As Exception
        ...
    End Try 
```

但是，当我连接到的服务崩溃时，Endpoint Not Found 异常需要超过 20 秒才能被抛出，而不是我指定的 2.5。这对我的负载平衡来说真的很糟糕，我需要知道服务在 2.5 秒内消失。有没有办法让这个异常在所需的时间范围内抛出？

顺便说一句，异常内容如下：

> 无法连接到 net.tcp://192.168.227.130:30000/MXIOXfer。连接尝试持续了 00:00:02.4209684 的时间跨度。TCP错误码10060：连接尝试失败，因为连接的一方在一段时间后没有正确响应，或者连接的主机没有响应192.168.227.130:30000，建立连接失败。

但它确实需要超过 20 秒。我已经打开了 WCF 跟踪，并且可以在异常之前看到 TCP 操作失败警告，并且它具有实时时间：

> 无法连接到 net.tcp://192.168.227.130:30000/MXIOXfer。连接尝试持续了 00:00:21.0314092 的时间跨度。TCP错误码10060：连接尝试失败，因为连接的一方在一段时间后没有正确响应，或者连接的主机没有响应192.168.227.130:30000，建立连接失败。

如果有任何区别，服务的所有通信都在单独的线程上完成。

编辑：

[该线程](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/5f347965-13bf-4a2d-ae82-74ad38a8d7d1/)似乎表明套接字超时是由操作系统设置的。是否有此类事情的注册表设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T13:24:50.147

结合我和 eol 引用的 SO 和 MSDN Social 线程中的详细信息，我找到了以下注册表设置：

> HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters\Interfaces{xxxxxxxx-xxxx-xxxx-xxxxxxxxxxxx}\TcpInitialRTT
> 
> 值类型：REG_DWORD—数字
> 
> 有效范围：0–0xFFFF
> 
> 默认值：3 秒
> 
> 说明：此参数控制用于 TCP 连接请求的初始超时和基于每个接口的初始数据重传。使用此参数进行调整时要小心，因为使用了指数退避。将此值设置为大于 3 会导致对不存在地址的超时时间更长。

.

> HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters\Interfaces{xxxxxxxx-xxxx-xxxx-xxxxxxxxxxxx}\TcpMaxConnectRetransmissions
> 
> 值类型：REG_DWORD—数字
> 
> 有效范围：0–255（十进制）
> 
> 默认值：2
> 
> 说明：此参数确定 TCP 在中止尝试之前重新传输连接请求 (SYN) 的次数。在给定的连接尝试中，每次连续的重传都会使重传超时加倍。初始超时由 TcpInitialRtt 注册表值控制。

.

> HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters\Interfaces{xxxxxxxx-xxxx-xxxx-xxxxxxxxxxxx}\TcpMaxDataRetransmissions
> 
> 值类型：REG_DWORD—数字
> 
> 有效范围：0-0xFFFFFFFF
> 
> 默认值：5
> 
> 说明：此参数控制 TCP 在中止连接之前重新传输单个数据段（不是连接请求段）的次数。连接上的每次连续重传，重传超时加倍。当响应恢复时它被重置。使用每个连接上的历史测量往返时间（平滑往返时间或 SRTT）动态调整重传超时 (RTO) 值。新连接上的起始 RTO 由 TcpInitialRtt 注册表值控制。

由于每次重试失败连接的超时值加倍，默认值使第一次尝试在 3 秒内失败，第二次在 6 秒内失败，第三次也是最后一次尝试在 12 秒内失败，或总共 21 秒。顺便说一句，*TcpMaxDataRetransmissions*键与此无关，我将其包括在内以保持完整性和稍后出现的人。

默认情况下，这些值都不存在，您必须添加它们才能更改它们。确定要在哪个接口上执行此操作很容易，每个接口都有一个包含其当前 IP 地址的密钥。（甚至 localhost 也有一个。）在我自己的情况下，只需将 VM 接口上的*TcpMaxConnectRetransmissions*设置为零 (0)，我的套接字超时默认为 3 秒，这足够接近 2.5 来工作。当 WCF 服务现在崩溃时，我的负载平衡工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:59:46.670

我相信这篇文章谈到了同样的问题：[wcf channelfactory 和 opentimeout](https://stackoverflow.com/q/8953112/1539015)。

问题是底层套接字有一个默认的 20 秒左右的超时，WCF 没有覆盖。检查最后一个答案，以通过异步打开来实现自己的超时。

# ruby-on-rails-3 - Rails 在多阶段设置中报告错误的环境

> ID：11902986
> 
> 赞同：0
> 
> 时间：2012-08-10T13:44:05.927
> 
> 标签：ruby-on-rails-3, capistrano, passenger

使用 capistrano 2.12.0、capistrano-ext 1.2.1、Rails 3.2.7 和 Phusion Passenger 3.0.15。

出于逻辑原因，我的“游乐场”服务器已经开始报告它实际上是在开发模式下运行。

我已经重新安装了东西，重新启动了 apache 等，但仍然卡住了。

真的不想硬编码，因为我有一个生产环境要考虑。

在我的 apache 配置文件中。我已经设置

```
RailsEnv playground 
```

这里有[我的 deploy.rb 文件的要点](https://gist.github.com/3314266)

Capistrano 正在发送到正确的位置等，所以我认为它是轨道或乘客而不是上限。

我还能做些什么来让这一切正常进行？

- - 编辑 - -

我刚刚用 Unicorn 进行了测试，它还报告说它正在开发模式下运行。

使用以下内容启动独角兽：

```
 unicorn -E playground -l 8000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T13:36:55.970

经过大量实验，我发现根本原因是我的一个模型中的一行：

```
 - if Rails.env = 'development' 
```

显然，这应该是一个'=='而不是一个。

# c# - 直接在视图中使用来自 url 的 id

> ID：11902994
> 
> 赞同：1
> 
> 时间：2012-08-10T13:44:32.633
> 
> 标签：c#, asp.net-mvc

假设我有一个如下所示的 URL：用户 ID`localhost/userdetails/5`在哪里。`5`有什么方法可以直接在视图（剃刀视图引擎）中使用 ID 并显示详细信息？还是我在控制器的默认操作中处理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:00:07.930

现在为了简单起见，专注于获取`id`视图，您基本上希望使用`id`用数据填充模型，然后将其传递给视图。所以在你的控制器中：

```
public ActionResult Index(int id)
{
    UserModel model = db.Users.Where(u => u.Id == id).SingleOrDefault();

    return View(model);
} 
```

视图（非常简化）可能如下所示：

```
@model MyProject.Models.UserModel

@Html.DisplayFor(m => m.Id)
@Html.DisplayFor(m => m.Username) 
```

这是非常基本的。最终，您会意识到应该为视图使用视图模型，而不是直接来自数据源的域模型。这本身就为您提供了另一个问题，需要以将属性从域模型映射到您的视图模型的形式来解决。通常，为此使用[AutoMapper](http://automapper.codeplex.com/)或[ValueInjecter](http://valueinjecter.codeplex.com/)。不过现在，最好只专注于将数据传递给视图并将其返回到控制器中，以便您可以使用它来做一些事情。

## 更新

这是一个简单的场景，演示了如何将数据返回到控制器中。所以基本上，你有一个你要提交的表格：

```
@using (Html.BeginForm("Index", "Home"))
{
    // Form elements and submit button
} 
```

这会将数据发布到此操作方法，以便您对数据执行任何操作：

```
[HttpPost]
public ActionResult Index(UserModel inputModel)
{
    // Check to see if the model's data was valid.
    if (ModelState.IsValid)
    {
        // Do something in the database here.
        // Then redirect to give the user some feedback.
        return RedirectToAction("Thanks");
    }

    // The model validation failed so redisplay the view.
    return View(inputModel);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:50:24.983

您可以在控制器或视图中使用它作为扩展方法。示例：假设您的路线 ID 持有者在 global.asax 中具有默认值

```
public int IdFromAdress(HttpContext httpContext)
{
    RouteData rd = httpContext.Request.RequestContext.RouteData;
    string stringId = (string)rd.Values["id"];
    return int.Parse(stringId);
{ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T13:51:47.937

您应该使用模型（即模型传递回您的视图）。ViewBag 是另一种选择，但由于 ID 是模型本身的一部分，因此这样做没有任何意义。

**看法**

```
 @model User
    @{
       ViewBag.Title = "User Details";
    }

    @Model.Id; 
```

**控制器**

```
 public ActionResult UserDetails(int id)
    {
        return View("UserDetails", (object)id);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T13:59:18.773

你可以用这个获取id

```
@HttpContext.Current.Request.RequestContext.RouteData.Values["id"].ToString() 
```

但我建议使用 ViewMdoel 将值传递给视图而不是 ViewBag 或直接从视图访问

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T14:04:40.913

是的你可以。有不止一种方法可以做到这一点，但是由于您已经标记了您的帖子 MVC，假设您想要使用“MVC 方式”，这意味着（imo）使用视图模型。

所以你写了一个视图模型

```
public class MyViewModel()
  {
    public int ID {get; set;}
  } 
```

您在控制器中填充模型并将其传递给视图

```
public ActionResut MyView (int id)
  {
    var viewModel = new MyViewModel {ID = id};
    return View (viewModel);
  } 
```

然后你有一个强类型视图（强类型到 MyViewModel，即），你可以引用模型的属性

```
@Model.ID 
```

然后为了使它有用，您可以将您想要使用的任何其他属性添加到您的视图模型中。然后，您可以在呈现视图之前将它们填充到控制器中（例如，显示用户信息），或者让用户在视图中为您填充它们（使用文本框等包装在表单中）。然后您可以像这样在控制器的发布操作中收集用户输入

```
[HttpPost]
public ActionResult MyView(MyViewModel viewModel)
  {
    //do stuff with the data from the viewModel
  } 
```

# javascript - 用户控件内的 ASP 列表视图。用户控件完全加载后如何触发 javascript？

> ID：11902996
> 
> 赞同：1
> 
> 时间：2012-08-10T13:44:47.093
> 
> 标签：javascript, listview, user-controls, loaded

我正在使用 2 个用户控件：

*   搜索.ascx
*   结果.ascx

他们使用 Telerik 进行了 ajaxfied，因为 Search 更新了 Results 控件。

我的实际问题是我想在结果控件中为生成的表实现 DataTables。

在表已经（重新）生成后，我如何调用 datatables jquery 函数？

我在我的 aspx 页面中使用以下标记。如果我在搜索用户控件中单击搜索，则结果将通过结果控件显示。请注意，结果用户控件使用 Telerik 进行了 divved/ajaxfied。

```
<telerik:radscriptmanager runat="server" id="RadScriptManager" />
<telerik:RadAjaxManager ID="RadAjaxManager" runat="server">
    <AjaxSettings>
        <telerik:AjaxSetting AjaxControlID="UcSearch">
            <UpdatedControls>
                <telerik:AjaxUpdatedControl ControlID="UcResults" />
            </UpdatedControls>
        </telerik:AjaxSetting>
    </AjaxSettings>
</telerik:RadAjaxManager>
<uc1:ucSearch runat="server" id="UcSearch"></uc1:ucSearch>
<uc1:ucResults runat="server" id="UcResults"></uc1:ucResults> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T10:29:38.017

问题是我们不能使用 RadAjaxManager 的`OnResponseEnd`客户端事件，因为当您 ajaxifying 用户控件时它不会引发。这是 Telerik 论坛的链接：[ajax 面板 ClientEvents-OnRequestStart wont fire](http://www.telerik.com/community/forums/aspnet-ajax/ajax/ajax-panel-clientevents-onrequeststart-wont-fire.aspx#1906862)。但是您可以强制 RadAjaxManager 在响应返回给客户端后调用一些客户端脚本：[ResponseScripts Property](http://www.telerik.com/help/aspnet/ajax/radajax-telerik.webcontrols.radajaxutils.radajaxcontrol-responsescripts.html)。因此，您只需在页面上放置另一个 JavaScript 函数以应用 DataTables 插件（如果您还没有），并指示 RadAjaxManager 在刷新结果控件后调用此函数。

```
void UcSearch_DoSearch(object sender, EventArgs e)
{
    // your code to update UcResults control 

    RadAjaxManager1.ResponseScripts.Add("initDataTable();");
} 
```

# wmi - 使用远程 WMI 监控 win32_battery

> ID：11902998
> 
> 赞同：0
> 
> 时间：2012-08-10T13:45:02.833
> 
> 标签：wmi, monitor, battery, wmic

我的最终目标是远程监控平板电脑上的 EstimatedChargeRemaining。我大部分时间都在工作，似乎我可以查询几乎任何东西，但电池除外！

在平板电脑上，我可以调用“wmic path win32_battery getestimatechargeremaining”并获取剩余电量百分比。我还可以查询 cim_battery 并获得两条记录，一条记录不存在的可选电池，一条记录实际安装的电池。在我想要进行监控的远程桌面上，运行这些查询当然会返回“没有可用的实例”，因为它没有电池。到目前为止，我为使远程 WMI 工作而检查并完成了以下工作：

1.  两台机器上的防火墙都关闭。
2.  启用 DCOM 以克服 0x80070005 访问被拒绝错误。
3.  在 WMI 命名空间上授予“远程启用”权限以克服 0x80041003 权限错误。

现在，在桌面上，我可以运行 wmic 并设置 /node:IOS,MFS，其中 IOS 是桌面，MFS 是平板电脑。我随后运行的任何查询都将在两个节点上运行。我用“路径 win32_bios 获取描述”和“路径 win32_baseboard 获取制造商”之类的东西对其进行了测试，它们都为两个节点返回了适当的不同信息。（我知道我可以使用 BIOS 和 BASEBOARD 别名，但我想使用路径表示法与我的 win32_battery 查询保持一致，因为没有别名。）

但是，当我运行“path win32_battery getestimatechargeremaining”时，它会为两个节点返回“No Instance(s) Available”！并且“path cim_battery getestimatedchargeremaining”为桌面返回“No Instance(s) Available”，为平板电脑返回一条记录，即不存在的可选电池的一条记录！为什么查询不到实际安装的电池？

我正在使用默认的 /implevel:impersonate 和 /authlevel:pktprivacy。我尝试在平板电脑上使用管理员凭据指定 /user:，但这不起作用。我已向 WMI 命名空间 \root、\cimv2 和 \power 上的每个人授予“远程启用”权限。当然，我还没有详尽地尝试过查询其他对象，但是我尝试过的一切都有效，除了我真正想要的！我想念的秘诀是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T16:13:14.723

您不能使用命令提示符命令`WMIC Win32_Battery`来提取此信息。相反，您必须使用 PowerShell。您要执行的命令是...

`Get-WmiObject Win32_Battery | Select-Object estimatedChargeRemaining`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T16:48:01.347

您如何配置用户权限？有关详细信息，请参阅本文：[http](http://technet.microsoft.com/en-us/library/cc787533(v=ws.10).aspx) ://technet.microsoft.com/en-us/library/cc787533(v=ws.10).aspx http://blogs.technet.com/b/askperf/archive/2007 /08/14/wmi-troubleshooting-permissions.aspx

您还可以运行 ProcMon [http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)并过滤进程 WMIC.exe。它应该向您显示任何隐藏的错误。具体在详细信息列下查找“Desired Access：”和“Granted Access：”。