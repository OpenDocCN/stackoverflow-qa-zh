# StackOverflow 问答 11841000-11841999

# ios5 - 使用 AFJSONRequestOperation 忽略 JSON 的 REST 服务内容类型？

> ID：11841001
> 
> 赞同：0
> 
> 时间：2012-08-07T07:14:56.813
> 
> 标签：ios5, afnetworking

有没有办法忽略来自 AFJSONRequestOperation 的休息服务的返回内容类型？我使用的服务之一返回应用程序/文本，并且不会在下一个主要版本之前修复。目前我使用 AFJSONRequestOperation 并因此失败。

我尝试使用：

```
AFHTTPClient *afClient  = [[AFHTTPClient alloc] initWithBaseURL:url];
[afClient setDefaultHeader:@"Accept" value:@"application/json"]; 
```

但这不起作用。

还有什么办法吗？

谢谢，奥利弗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:43:41.380

处理此类情况的一种可能解决方案是调用您正在使用`addAcceptableContentTypes:`的子类。`AFHTTPRequestOperation`在您的特定情况下，将以下代码段添加到`initWithBaseURL`您的子类的方法中`AFHTTPClient`。

```
[AFJSONRequestOperation addAcceptableContentTypes:[NSSet setWithObjects:@"application/text", nil]]; 
```

您可以`addAcceptableContentTypes:`在[AFNetworking 的文档中](http://afnetworking.github.com/AFNetworking/Classes/AFHTTPRequestOperation.html#//api/name/addAcceptableContentTypes%3a)了解更多信息。

# ajax - 如何在 xmlhttprequest 中设置与请求格式不同的响应格式？

> ID：11841011
> 
> 赞同：0
> 
> 时间：2012-08-07T07:15:37.983
> 
> 标签：ajax, jquery, xhtml, xmlhttprequest

问题：

我有以下用于 jQuery 可排序的 JavaScript 处理程序。
问题是我得到一个错误（parseerror）。
问题是 datatype: JSON + contentType: 'application/json' 似乎需要正确发送数据。

但是，我不希望响应必须是 JSON 格式。我想要对应用程序/json 请求的文本/简单响应。

那不可能吗？
或者：我该如何正确地做到这一点（无需提供 JSON 响应）？

Http处理程序：

```
Imports System.Web
Imports System.Web.Services

Public Class FMS_SaveTeaserSort
    Implements System.Web.IHttpHandler

    Sub ProcessRequest(ByVal context As HttpContext) Implements IHttpHandler.ProcessRequest

        Dim strpagesget As String = context.Request.QueryString("pages")
        Dim strPagesPost As String = context.Request.Form("pages")

        Dim json As String = Nothing
        Using sr As New System.IO.StreamReader(context.Request.InputStream)
            json = sr.ReadToEnd()
        End Using ' sr

        json = context.Server.UrlDecode(json)
        'Dim customer As Byte() = New Byte(System.Convert.ToInt32(context.Request.InputStream.Length) - 1) {}
        'context.Request.InputStream.Read(customer, 0, customer.Length)
        'Dim customerJSON As String = System.Text.Encoding.UTF8.GetString(customer)
        ' TODO: deserialize the JSON back to a Customer object

        context.Response.ContentType = "text/plain"
        context.Response.Write("Hello World!")

    End Sub

    ReadOnly Property IsReusable() As Boolean Implements IHttpHandler.IsReusable
        Get
            Return False
        End Get
    End Property

End Class 
```

JavaScript 代码：

```
$(function () {
    //$('#sortable').sortable();

    $('#sortable').sortable({
        update: function (event, ui) {
            var strMovedElementId = ui.item.attr('id');
            //alert("post");
            $.ajax({
                url: './ajax/FMS_SaveTeaserSort.ashx'
                        , type: 'POST'
                        , cache: false
                        //, contentType: 'application/json'
                        //, contentType: 'text/plain'
                        //, contentType: "application/x-www-form-urlencoded" 
                        , contentType: "application/json; charset=utf-8"
                        , dataType: "json"
                        //, data: JSON.stringify({ pages: $(this).sortable('toArray') })
                        , data: { pages: $(this).sortable('toArray') }
                        , success: function (result) {
                            //alert("success");
                        }

                        , error: function (request, type, errorThrown) {
                            var message = "There was an error with the AJAX request.\n";
                            //alert(type);

                            switch (type) {
                                case 'timeout':
                                    message += "The request timed out.";
                                    break;
                                case 'notmodified':
                                    message += "The request was not modified but was not retrieved from the cache.";
                                    break;
                                case 'parsererror':
                                    message += "Parser error: Bad XML/JSON format.";
                                    break;
                                default:
                                    message += "HTTP Error (" + request.status + " " + request.statusText + ").";
                            }
                            message += "\n";
                            alert(message);

                            switch (request.status) {
                                case 400:
                                    alert('HTTP ' + request.status + ': ' + request.statusText + '\nThe request cannot be fulfilled due to bad syntax');
                                    break;
                                case 401:
                                    alert('HTTP ' + request.status + ': ' + request.statusText + '\nAuthentication is possible but has failed or not yet been provided');
                                    break;
                                case 403:
                                    alert('HTTP ' + request.status + ': ' + request.statusText + '\nAccess denied');
                                    break;
                                case 404:
                                    alert('HTTP ' + request.status + ': ' + request.statusText + '\nThe requested page could not be found but may be available again in the future');
                                    break;
                                case 405:
                                    alert('HTTP ' + request.status + ': ' + request.statusText + '\nA request was made of a page using a request method not supported by that page');
                                    break;
                                case 408:
                                    alert('HTTP ' + request.status + ': ' + request.statusText + '\nThe server timed out waiting for the request');
                                    break;
                                case 410:
                                    alert('HTTP ' + request.status + ': ' + request.statusText + '\nThe requested page is no longer available');
                                    break;
                                case 500:
                                    alert('HTTP ' + request.status + ': ' + request.statusText + '\nA generic error message, given when no more specific message is suitable\nError description:\n' + request.responseText);
                                    break;
                                case 502:
                                    alert('HTTP ' + request.status + ': ' + request.statusText + '\nThe server was acting as a gateway or proxy and received an invalid response from the upstream server (fastcgi-crash?)');
                                    break;
                                case 503:
                                    alert('HTTP ' + request.status + ': ' + request.statusText + '\nThe server is currently unavailable (overloaded or down)');
                                    break;
                                case 504:
                                    alert('HTTP ' + request.status + ': ' + request.statusText + '\nThe server was acting as a gateway or proxy and did not receive a timely response from the upstream server');
                                    break;
                                case 511:
                                    alert('HTTP ' + request.status + ': ' + request.statusText + '\nThe client needs to authenticate to gain network access');
                                    break;
                                case 0:
                                    alert('HTTP ' + request.status + ': ' + request.statusText + '\nRequest aborted');
                                    break;
                                default:
                                    alert('HTTP ' + request.status + ': ' + request.statusText + '\nUnknown error: \nError description:\n' + request.responseText);
                            } // End Switch

                        }

                        , complete: function (result) {
                            //alert("complete");
                        }

            }); // End ajax
        } // End Update
    }); // End Sortable

    $('#sortable').disableSelection()
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T07:28:49.270

`dataType`从更改`json`为`text`

# java - 从 Main 获取随机函数

> ID：11841013
> 
> 赞同：3
> 
> 时间：2012-08-07T07:15:41.587
> 
> 标签：java, function, main

```
public static GetRandomFunc() {
    switch((int)(Math.random()*NUM_FUNCTIONS)  {
        case 0:
            functionA();
            break;
        case 1:
            functionB();
            break;
        case 2:
            functionC();
            break;
          //  ...
    }
} 
```

我想在 main 中随机调用 GetRandomFunc() ，直到每个函数都被调用一次然后结束。我如何确保一个函数只被调用一次，如果所有函数都被调用，它会打印出 System.out.println("All done")

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T07:19:17.867

创建一个包含 0,1 和 2 的列表。对其进行洗牌并对其进行迭代以调用每个函数一次，但以随机顺序。

```
List<Integer> integers = Arrays.asList(0,1,2);
Collections.shuffle(integers)
for (Integer i: integers){
   GetRandomFunc(i)
} 
```

你的功能将是

```
public static GetRandomFunc(int index) {
    switch(index)  {
        case 0:
            functionA();
            break;
        case 1:
            functionB();
            break;
        case 2:
            functionC();
            break;
          //  ...
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T07:19:29.543

使用`Runnable`s 列表（或映射到每个函数的整数列表，就像您在代码中所做的那样），对其进行洗牌，然后遍历列表并调用每个函数。

[http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List%29](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T07:16:38.340

列出功能并从中随机获取。当它为空时，您可以确定每个函数都只使用了一次。

```
public interface Function { void execute(); }

public static runFunctionsRandomly(List<Function> functions) {
  while (!functions.isEmpty()) {
      int index = Math.random() * functions.size();
      Function f = functions.get(index);
      f.execute();
      functions.remove(index);
  }
}

class ExampleFunction implements Function {
  void execute() {
    System.out.println("Hello world!");
  }
}
... 
```

# c# - 如何使用 Linq 将列表集合添加到列表中？

> ID：11841017
> 
> 赞同：1
> 
> 时间：2012-08-07T07:15:57.187
> 
> 标签：c#, linq, entity-framework

我有一个清单

```
List<List<Employee>> EmployeeListCollection; 
```

并且想要

```
List<Employee> EmployeeList=//all employee in EmployeeListCollection 
```

什么是查询？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-07T07:19:38.727

```
List<Employee> EmployeeList = EmployeeListCollection.SelectMany(c => c).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:08:44.720

尝试这个：

```
List<List<Employee>> EmployeeListCollection;
List<Employee> EmployeeList;
foreach(var emplst in EmployeeListCollection)
{
  foreach(var emp in emplst )
 {
     EmployeeList.add(emp);
 }
} 
```

# c++ - TinyXML 段错误

> ID：11841019
> 
> 赞同：0
> 
> 时间：2012-08-07T07:16:06.503
> 
> 标签：c++, tinyxml

是否存在与 tinyXML 相关的固有内存泄漏问题？我不知道为什么我会遇到这个奇怪的段错误。在下面的函数中，每当我尝试增加元素名称（“Connecor”和“laneFro”）的大小时，下面的 if 子句（在循环中）都会导致程序崩溃。

```
void WriteXMLInput_Node_Connectors(Node* node,TiXmlElement * Node_)
{
    std::ostringstream out;
    TiXmlElement * Connectors = new TiXmlElement("Connectors"); Node_->LinkEndChild(Connectors);
    TiXmlElement * Connector;
    TiXmlElement * laneFrom;
    TiXmlElement * laneTo;

    for(std::map<const sim_mob::Lane*, sim_mob::Lane* >::const_iterator it = node->getConnectors().begin();it != (node->getConnectors().end()); it++)
    {
        Connector = new TiXmlElement("Connecor"); Connectors->LinkEndChild(Connector);
        laneFrom = new TiXmlElement("laneFro"); Connector->LinkEndChild(laneFrom);
//      laneTo = new TiXmlElement("laneTo"); Connector->LinkEndChild(laneTo);
        if(42792 == node->getID())
        {
            std::cout << "uninode " ;
            std::cout << uninode->getID();
            std::cout << " from: " << (*it).first << " ";
            std::cout << (*it).first->getLaneID_str();
            std::cout << "uninode " << uninode->getID() << " To: " << (*it).second->getLaneID_str();

    }
} 
```

谢谢

# c - 如何在 QNX 中重置进程 ID

> ID：11841021
> 
> 赞同：0
> 
> 时间：2012-08-07T07:16:19.683
> 
> 标签：c, process, operating-system, qnx, qnx-neutrino

如果有人知道如何在 QNX 中保留进程 ID，请告诉我。我正在网上搜索，但似乎找不到任何东西。我实际上需要编写一个脚本来执行以下操作：

1.  查找当前进程 ID
2.  如果 PID 大于某个特定值，则重置 PID 并启动我的进程
3.  如果不是更大，那么开始我的过程

为此，我只需要有关如何在 QNX 操作系统中重置进程 ID 的信息。预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:44:13.913

QNX Neutrino 内核在每个进程启动时为其分配 PID。您无法选择获得的 PID，只能使用给定的 PID。QNX 中没有重置 PID 计数的概念。

要查找 PID，如果您知道进程名称，只需使用：

`ps -e | grep processname | awk {'print $1'}`

这将返回进程*processname*的进程 ID 。如果您在脚本中执行此操作，则可以使用以下方法将结果分配给变量：

`varname=`ps -e | grep processname | awk {'print $1'}``

确保在主要表达式周围使用反引号。

希望这可以帮助。

# magento - 在 magento 中从购物车中获取没有统一费率的总计

> ID：11841023
> 
> 赞同：0
> 
> 时间：2012-08-07T07:16:27.607
> 
> 标签：magento, cart, subtotal

我如何在没有统一费率的情况下获得购物车的总价值？

这意味着通过使用此代码：

```
$totals = Mage::getSingleton('checkout/cart')->getQuote()->getTotals();
$subtotal = $totals["subtotal"]->getValue(); 
```

我得到了每个产品的小计。

所以我使用了这段代码：

```
$subtotal = $this->helper('checkout')->formatPrice(Mage::getSingleton('checkout/cart')->getQuote()->getGrandTotal()); 
```

现在我得到了包括统一费率在内的总价值。

例如：

在这里我总共有 35 个，但这包括 20 个产品价格 + 15 个统一费率。

所以我只想得到购物车中所有产品价格的总和。

我怎样才能得到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:33:39.093

你想得到小计然后

```
Mage::getSingleton('checkout/cart')->getQuote()->getSubtotal(); 
```

不要害怕在 IDE 中使用 xdebug 和调试会话来观察变量在对象内部的值。查看所需内容的最简单方法是转储变量以显示

```
print_r(Mage::getSingleton('checkout/cart')->getQuote()->getData()); 
```

只需查看哪个变量具有您需要的值。

# java - Eclipse Juno：未分配的可关闭值

> ID：11841033
> 
> 赞同：9
> 
> 时间：2012-08-07T07:17:00.650
> 
> 标签：java, eclipse

我想知道为什么我会在新的 eclipse Juno 中收到此警告，尽管我认为我正确关闭了所有内容。你能告诉我为什么我在下面的代码中收到这个警告吗？

```
public static boolean copyFile(String fileSource, String fileDestination)
{
    try
    {
        // Create channel on the source (the line below generates a warning unassigned closeable value) 
        FileChannel srcChannel = new FileInputStream(fileSource).getChannel(); 

        // Create channel on the destination (the line below generates a warning unassigned closeable value)
        FileChannel dstChannel = new FileOutputStream(fileDestination).getChannel();

        // Copy file contents from source to destination
        dstChannel.transferFrom(srcChannel, 0, srcChannel.size());

        // Close the channels
        srcChannel.close();
        dstChannel.close();

        return true;
    }
    catch (IOException e)
    {
        return false;
    } 
 } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-07T07:25:17.960

如果您在 Java 7 上运行，则可以像这样使用新的 try-with-resources 块，并且您的流将自动关闭：

```
public static boolean copyFile(String fileSource, String fileDestination)
{
    try(
      FileInputStream srcStream = new FileInputStream(fileSource); 
      FileOutputStream dstStream = new FileOutputStream(fileDestination) )
    {
        dstStream.getChannel().transferFrom(srcStream.getChannel(), 0, srcStream.getChannel().size());
        return true;
    }
    catch (IOException e)
    {
        return false;
    } 
} 
```

您无需显式关闭底层通道。但是，如果您不使用 Java 7，则应该以繁琐的旧方式编写代码，并带有 finally 块：

```
public static boolean copyFile(String fileSource, String fileDestination)
{
    FileInputStream srcStream=null;
    FileOutputStream dstStream=null;
    try {
      srcStream = new FileInputStream(fileSource); 
      dstStream = new FileOutputStream(fileDestination)
      dstStream.getChannel().transferFrom(srcStream.getChannel(), 0, srcStream.getChannel().size());
        return true;
    }
    catch (IOException e)
    {
        return false;
    } finally {
      try { srcStream.close(); } catch (Exception e) {}
      try { dstStream.close(); } catch (Exception e) {}
    }
} 
```

看看 Java 7 版本有多好 :)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T07:19:32.410

您应该始终关闭，`finally`因为如果出现异常，您将不会关闭资源。

```
FileChannel srcChannel = null
try {
   srcChannel = xxx;
} finally {
  if (srcChannel != null) {
    srcChannel.close();
  }
} 
```

* * *

注意：即使你在块中放了一个 return `catch`，`finally`块也会被完成。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T07:21:23.333

eclipse 警告你关于`FileInputStream`并且`FileOutputStream`你不能再参考。

# validation - MongoEngine - 删除的字段仍然会引发 ValidationError

> ID：11841034
> 
> 赞同：0
> 
> 时间：2012-08-07T07:17:07.843
> 
> 标签：validation, exception, mongodb, flask, mongoengine

我正在将 Flask 与 MongoEngine 一起使用，作为测试，我尝试通过创建一个 Python 文件向 MongoEngine 添加一个集合，该集合在其架构中具有一些必填字段，该文件包含一个子类 mongoengine.Document 并在其中包含一些 MongoEngine 字段的类，效果很好。

但是，当我后来从模式中删除了其中一些字段（仅通过编辑子类 mongoengine.Document 的 python 类）并尝试将新文档添加到集合中时，MongoEngine 为我已经从模式中删除的字段抛出了 ValidationErrors。有没有办法可以重置模式，我怎样才能避免 MongoEngine 在未来做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:23:45.537

您是否重新启动了 Flask / Web 服务器，因为文档可能缓存在模块中。通过重新启动网络服务器重新加载模块，这些定义将不存在，也不会引发错误 - MongoEngine 仅在 mongoDB 数据中存储没有模式状态信息。

# c# - 每个控件的 SnapsToDevicePixels？

> ID：11841035
> 
> 赞同：1
> 
> 时间：2012-08-07T07:17:21.213
> 
> 标签：c#, wpf

如何以某种方式为每个控件应用 SnapsToDevicePixels？我不知道该怎么办。我对适用于各种控件的样式进行了一些试验，但这对我不起作用。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T07:21:09.183

如果你应用`SnapsToDevicePixels`到你的根元素，所有的子元素都会继承它。

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.uielement.snapstodevicepixels.aspx)：

> **备注**您可以在根元素上将此属性设置为 true，以在整个 UI 中启用像素捕捉渲染。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T07:29:49.747

如果您设置“SnapsToDevicePixels=True”，默认情况下此值设置为所有子控件。

检查此链接上的值优先级

[http://msdn.microsoft.com/en-us/library/ms743230.aspx](http://msdn.microsoft.com/en-us/library/ms743230.aspx)

谢谢吉滕德拉

# silverlight - Command line parameters in a LightSwitch application

> ID：11841044
> 
> 赞同：0
> 
> 时间：2012-08-07T07:17:47.200
> 
> 标签：silverlight, visual-studio-lightswitch

In Silverlight I can get to the command line parameters (actually the URL parameters) by:

```
private void Application_Startup(object sender, StartupEventArgs e)
{
    this.RootVisual = new MainPage();

    var parameters = e.InitParams;
} 
```

Since LightSwitch is built on top of Silverlight I try to achieve the same thing in a LightSwitch application, but cannot find out how. I have set up an Application_Initialize event handler, but I can only access the LightSwitch Application object, not the actual underlying Silverlight Application (App) object.

On top of this Google was not my friend... :-)

Thanks for your help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:02:14.593

Nevermind, I found an alternative:

System.Windows.Browser.HtmlPage.Document.DocumentUri.Query

gives me the parameters in the URL.

Thanks for your time. Paul

# google-chrome-extension - Chrome 扩展程序不适用于铬

> ID：11841045
> 
> 赞同：0
> 
> 时间：2012-08-07T07:17:48.527
> 
> 标签：google-chrome-extension, chromium

镀铬扩展

[http://code.google.com/chrome/extensions/samples.html#5d81304a17cf7ac2887484f730fbd2b01e51e166](http://code.google.com/chrome/extensions/samples.html#5d81304a17cf7ac2887484f730fbd2b01e51e166)

不适用于铬，我使用铬 13.0.782.107 并且加载扩展时没有任何反应。

我的 chromium 版本在扩展描述旁边没有箭头图标，带有打开后台控制台的链接，我不知道如何打开它。非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:44:51.470

示例扩展的[清单](http://code.google.com/chrome/extensions/examples/api/contextMenus/basic/manifest.json)如下所示：

```
 ...
  "background": {
    "scripts": ["sample.js"]
  },
  "manifest_version": 2
```

新`background`符号是[在 Chrome 18 中引入的](http://code.google.com/chrome/extensions/whats_new.html#18)，因此在早期版本中无法识别。此外，在 Chrome 18 中还引入了清单版本 2，因此该密钥也无关紧要。

我强烈建议将 Chromium 升级到最新版本（当前稳定的 Chromium 版本为 21）。如果你不能这样做，由于某种原因，清单文件必须更正如下：

*   替换`"background": {...}`为`"background_page": "sample.html"`
*   重命名`sample.js`为，并用标签`sample.html`包围内容。`<script>`

# iphone - 如何在 iphone 中使用 AVAudioRecorder 识别语音

> ID：11841055
> 
> 赞同：0
> 
> 时间：2012-08-07T07:18:27.217
> 
> 标签：iphone, avaudiorecorder, voice-recognition

我正在使用`AVAudioRecorder`。如果我点击录制按钮，则`start/save`只有在识别出声音后才能录制。

```
- (void)viewDidLoad
{
    recording = NO;
    NSString * filePath = [NSHomeDirectory()
                           stringByAppendingPathComponent:@"Documents/recording.caf"];

     NSDictionary *recordSettings = 
     [[NSDictionary alloc] initWithObjectsAndKeys:
     [NSNumber numberWithFloat: 44100.0],AVSampleRateKey,
     [NSNumber numberWithInt: kAudioFormatAppleLossless],    
     AVFormatIDKey,
     [NSNumber numberWithInt: 1],                         
     AVNumberOfChannelsKey,
     [NSNumber numberWithInt: AVAudioQualityMax],         
     AVEncoderAudioQualityKey,nil];
    AVAudioRecorder *newRecorder = [[AVAudioRecorder alloc] 
                                    initWithURL: [NSURL fileURLWithPath:filePath]
                                    settings: recordSettings
                                    error: nil];

    [recordSettings release];
    self.soundRecorder = newRecorder;
    [newRecorder release];
    self.soundRecorder.delegate = self;
    NSLog(@"path is %@",filePath);
    [super viewDidLoad];
}
- (IBAction) record:(id) sender {
    if (recording) {
        [self.soundRecorder stop];
        [recordBtn setTitle:@"Record" forState:UIControlStateNormal];
        recording = NO;     
    } else {
        [self.soundRecorder record];
        [recordBtn setTitle:@"Stop" forState:UIControlStateNormal];
        recording = YES;

    }
}
- (IBAction) play {
    NSString * filePath = [NSHomeDirectory()
                           stringByAppendingPathComponent:@"Documents/recording.caf"];
    AVAudioPlayer *newPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL: [NSURL fileURLWithPath:filePath] error: nil];
    newPlayer.delegate = self;
    NSLog(@"playing file at url %@ %d",[[newPlayer url] description],[newPlayer play]);
} 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T01:16:16.357

这是一个具有挑战性的目标。iOS 不包括专门识别语音的智能，您必须提供过滤器或您自己的过滤器才能做到这一点。如果您只想要 VOX 类型支持（即在检测到给定级别的音频时开始录制），则可以通过使用音频工具箱框架监控音频级别轻松完成。

如果您需要专门识别语音，您将需要一个专门的识别过滤器来运行您的音频数据。

如果您有这样的过滤器，您可以采用以下两种方法之一：a) 只记录所有内容，然后对生成的音频数据进行后处理，以定位识别语音的时间索引，然后忽略该点的数据（复制剩余的数据到另一个缓冲区）或b）使用音频工具箱框架实时监控记录的数据。通过您的语音查找过滤器传递数据，并且仅在您的过滤器触发时才开始缓冲数据。

实际的实现非常复杂且时间太长，无法在这里解决，但我在书籍和在线上看到了示例代码，您可以从这些示例代码开始。很抱歉，我目前没有任何链接可分享，但会在不久的将来发布我遇到的任何链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T03:43:31.497

我认为这可能会对您有所帮助。我认为检测到音量峰值是你所需要的，对吧？

[http://mobileorchard.com/tutorial-detecting-when-a-user-blows-into-the-mic/](http://mobileorchard.com/tutorial-detecting-when-a-user-blows-into-the-mic/)

码头。

# opengl - 模型OpenGL的全局位置

> ID：11841063
> 
> 赞同：1
> 
> 时间：2012-08-07T07:19:06.143
> 
> 标签：opengl

是否有可能在整个游戏中获得模型的全局位置？

![在此处输入图像描述](../Images/d3502e4f461e5150b1624ebb522e8691.png)

我试图弄清楚这些值的来源。根据我旋转相机的方式，这些值会发生变化。

不同的职位：

![在此处输入图像描述](../Images/f61abd77e934e09fb11a86fe16baee1f.png) ![在此处输入图像描述](../Images/adcb7e636b4962a68ccdbafc49dd4afc.png)

![在此处输入图像描述](../Images/1fc0d107f6523b968b1d84a07ff3794a.png)

从 gDebugger，我得到了这些值：

```
LOWEST ANGLE:

GL_VIEWPORT: {4, 165, 512, 334}
GL_MODELVIEW_MATRIX: 
{0.99975264, 0.0091297952, -0.020280767, 0}
{0, 0.91186345, 0.41049367, 0}
{0.022241013, -0.41039214, 0.9116379, 0}
{1819.2891, -308.66016, 5129.084, 1}
GL_PROJECTION_MATRIX: 
{1.40625, -0, 0, 0}
{0, -2.1556885, 0, 0}
{0, -0, 1.0273149, 1}
{0, -0, -405.46298, 0}
GL_CURRENT_MATRIX_ARB: 
{0.99975264, 0.0091297952, -0.020280767, 0}
{0, 0.91186345, 0.41049367, 0}
{0.022241013, -0.41039214, 0.9116379, 0}
{1819.2891, -308.66016, 5129.084, 1}

GL_VIEWPORT: {4, 165, 512, 334}
GL_MODELVIEW_MATRIX: 
{0.99990994, 0.0055096098, -0.01223895, 0}
{0, 0.91186345, 0.41049367, 0}
{0.013421912, -0.41045669, 0.91178131, 0}
{255.48047, -56.457031, 4179.0703, 1}
GL_PROJECTION_MATRIX: 
{1.40625, -0, 0, 0}
{0, -2.1556885, 0, 0}
{0, -0, 1.0273149, 1}
{0, -0, -405.46298, 0}
GL_CURRENT_MATRIX_ARB: 
{0.99990994, 0.0055096098, -0.01223895, 0}
{0, 0.91186345, 0.41049367, 0}
{0.013421912, -0.41045669, 0.91178131, 0}
{255.48047, -56.457031, 4179.0703, 1}

GL_VIEWPORT: {4, 165, 512, 334}
GL_MODELVIEW_MATRIX: 
{0.99977756, 0.0086575896, -0.019231817, 0}
{0, 0.91186345, 0.41049367, 0}
{0.021090677, -0.41040236, 0.91166061, 0}
{248.38477, -85.074219, 4242.6367, 1}
GL_PROJECTION_MATRIX: 
{1.40625, -0, 0, 0}
{0, -2.1556885, 0, 0}
{0, -0, 1.0273149, 1}
{0, -0, -405.46298, 0}
GL_CURRENT_MATRIX_ARB: 
{0.99977756, 0.0086575896, -0.019231817, 0}
{0, 0.91186345, 0.41049367, 0}
{0.021090677, -0.41040236, 0.91166061, 0}
{248.38477, -85.074219, 4242.6367, 1}

GL_VIEWPORT: {4, 165, 512, 334}
GL_MODELVIEW_MATRIX: 
{0.99966991, -0.010546137, 0.023427004, 0}
{0, 0.91186345, 0.41049367, 0}
{-0.025691351, -0.41035816, 0.91156244, 0}
{223.3418, -60.19043, 4187.3594, 1}
GL_PROJECTION_MATRIX: 
{1.40625, -0, 0, 0}
{0, -2.1556885, 0, 0}
{0, -0, 1.0273149, 1}
{0, -0, -405.46298, 0}
GL_CURRENT_MATRIX_ARB: 
{0.99966991, -0.010546137, 0.023427004, 0}
{0, 0.91186345, 0.41049367, 0}
{-0.025691351, -0.41035816, 0.91156244, 0}
{223.3418, -60.19043, 4187.3594, 1}

HIGHEST:

GL_VIEWPORT: {4, 165, 512, 334}
GL_MODELVIEW_MATRIX: 
{0.99966991, -0.010546137, 0.023427004, 0}
{0, 0.91186345, 0.41049367, 0}
{-0.025691351, -0.41035816, 0.91156244, 0}
{223.3418, -60.19043, 4187.3594, 1}
GL_PROJECTION_MATRIX: 
{1.40625, -0, 0, 0}
{0, -2.1556885, 0, 0}
{0, -0, 1.0273149, 1}
{0, -0, -405.46298, 0}
GL_CURRENT_MATRIX_ARB: 
{0.99966991, -0.010546137, 0.023427004, 0}
{0, 0.91186345, 0.41049367, 0}
{-0.025691351, -0.41035816, 0.91156244, 0}
{223.3418, -60.19043, 4187.3594, 1}

GL_VIEWPORT: {4, 165, 512, 334}
GL_MODELVIEW_MATRIX: 
{0.99997616, 0.0060372208, -0.0033470246, 0}
{0, 0.48486927, 0.87458664, 0}
{0.006902942, -0.87456578, 0.48485771, 0}
{3551.2305, 297.58008, 5957.9141, 1}
GL_PROJECTION_MATRIX: 
{1.40625, -0, 0, 0}
{0, -2.1556885, 0, 0}
{0, -0, 1.0273149, 1}
{0, -0, -405.46298, 0}
GL_CURRENT_MATRIX_ARB: 
{0.99997616, 0.0060372208, -0.0033470246, 0}
{0, 0.48486927, 0.87458664, 0}
{0.006902942, -0.87456578, 0.48485771, 0}
{3551.2305, 297.58008, 5957.9141, 1}

GL_VIEWPORT: {4, 165, 512, 334}
GL_MODELVIEW_MATRIX: 
{0.99997616, 0.0027075345, -0.0063497927, 0}
{0, 0.91986758, 0.39222905, 0}
{0.006902942, -0.39221969, 0.91984564, 0}
{-281.65234, -45.993164, 4131.0254, 1}
GL_PROJECTION_MATRIX: 
{1.40625, -0, 0, 0}
{0, -2.1556885, 0, 0}
{0, -0, 1.0273149, 1}
{0, -0, -405.46298, 0}
GL_CURRENT_MATRIX_ARB: 
{0.99997616, 0.0027075345, -0.0063497927, 0}
{0, 0.91986758, 0.39222905, 0}
{0.006902942, -0.39221969, 0.91984564, 0}
{-281.65234, -45.993164, 4131.0254, 1}

GL_VIEWPORT: {4, 165, 512, 334}
GL_MODELVIEW_MATRIX: 
{0.99960816, 0.010978992, -0.02574827, 0}
{0, 0.91986758, 0.39222905, 0}
{0.027991278, -0.39207536, 0.91950715, 0}
{249.30078, -64.625977, 4174.7188, 1}
GL_PROJECTION_MATRIX: 
{1.40625, -0, 0, 0}
{0, -2.1556885, 0, 0}
{0, -0, 1.0273149, 1}
{0, -0, -405.46298, 0}
GL_CURRENT_MATRIX_ARB: 
{0.99960816, 0.010978992, -0.02574827, 0}
{0, 0.91986758, 0.39222905, 0}
{0.027991278, -0.39207536, 0.91950715, 0}
{249.30078, -64.625977, 4174.7188, 1}

GL_CURRENT_MATRIX_ARB: 
{0.99992931, -0.004879978, 0.010840298, 0}
{0, 0.91186345, 0.41049367, 0}
{-0.011888071, -0.41046464, 0.91179901, 0}
{-287.10938, -74.085938, 4218.2285, 1}
GL_PROJECTION_MATRIX: 
{1.40625, -0, 0, 0}
{0, -2.1556885, 0, 0}
{0, -0, 1.0273149, 1}
{0, -0, -405.46298, 0}
GL_MODELVIEW_MATRIX: 
{0.99992931, -0.004879978, 0.010840298, 0}
{0, 0.91186345, 0.41049367, 0}
{-0.011888071, -0.41046464, 0.91179901, 0}
{-287.10938, -74.085938, 4218.2285, 1}
GL_VIEWPORT: {4, 165, 512, 334}

GL_CURRENT_MATRIX_ARB: 
{0.99963969, 0.023475286, -0.013014656, 0}
{0, 0.48486927, 0.87458664, 0}
{0.026841579, -0.87427151, 0.48469457, 0}
{-215.40039, -576.11523, 6158.7266, 1}
GL_PROJECTION_MATRIX: 
{1.40625, -0, 0, 0}
{0, -2.1556885, 0, 0}
{0, -0, 1.0273149, 1}
{0, -0, -405.46298, 0}
GL_MODELVIEW_MATRIX: 
{0.99963969, 0.023475286, -0.013014656, 0}
{0, 0.48486927, 0.87458664, 0}
{0.026841579, -0.87427151, 0.48469457, 0}
{-215.40039, -576.11523, 6158.7266, 1}
GL_VIEWPORT: {4, 165, 512, 334}

GL_CURRENT_MATRIX_ARB: 
{0.99963969, 0.023475286, -0.013014656, 0}
{0, 0.48486927, 0.87458664, 0}
{0.026841579, -0.87427151, 0.48469457, 0}
{-215.40039, -576.11523, 6158.7266, 1}
GL_PROJECTION_MATRIX: 
{1.40625, -0, 0, 0}
{0, -2.1556885, 0, 0}
{0, -0, 1.0273149, 1}
{0, -0, -405.46298, 0}
GL_MODELVIEW_MATRIX: 
{0.99963969, 0.023475286, -0.013014656, 0}
{0, 0.48486927, 0.87458664, 0}
{0.026841579, -0.87427151, 0.48469457, 0}
{-215.40039, -576.11523, 6158.7266, 1}
GL_VIEWPORT: {4, 165, 512, 334}

GL_CURRENT_MATRIX_ARB: 
{0.99959737, -0.011129435, 0.026101092, 0}
{0, 0.91986758, 0.39222905, 0}
{-0.028374836, -0.39207113, 0.91949719, 0}
{-250.26758, -71.263672, 4190.2871, 1}
GL_PROJECTION_MATRIX: 
{1.40625, -0, 0, 0}
{0, -2.1556885, 0, 0}
{0, -0, 1.0273149, 1}
{0, -0, -405.46298, 0}
GL_MODELVIEW_MATRIX: 
{0.99959737, -0.011129435, 0.026101092, 0}
{0, 0.91986758, 0.39222905, 0}
{-0.028374836, -0.39207113, 0.91949719, 0}
{-250.26758, -71.263672, 4190.2871, 1}
GL_VIEWPORT: {4, 165, 512, 334}

GL_CURRENT_MATRIX_ARB: 
{0.23925836, 0.38083714, -0.89315093, 0}
{0, 0.91986758, 0.39222905, 0}
{0.97095597, -0.093844078, 0.22008601, 0}
{2911.0664, 370.13428, 3481.4473, 1}
GL_PROJECTION_MATRIX: 
{1.40625, -0, 0, 0}
{0, -2.1556885, 0, 0}
{0, -0, 1.0273149, 1}
{0, -0, -405.46298, 0}
GL_MODELVIEW_MATRIX: 
{0.23925836, 0.38083714, -0.89315093, 0}
{0, 0.91986758, 0.39222905, 0}
{0.97095597, -0.093844078, 0.22008601, 0}
{2911.0664, 370.13428, 3481.4473, 1}
GL_VIEWPORT: {4, 165, 512, 334} 
```

他们能做什么？有没有办法用它来获取相机位置？还是角色的全球定位？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T07:46:22.633

OpenGL 的矩阵存在一个目的：渲染。这就是为什么它们包括相机矩阵。*你的代码*有责任知道对象在哪里。你告诉 OpenGL 东西在哪里，然后 OpenGL 渲染它们；这就是它应该如何工作的方式。

换句话说，如果你不知道一个对象在世界上的哪个位置，你怎么能指望 OpenGL，因为你告诉它把它放在哪里？

# cakephp - HABTM 保存数据问题

> ID：11841082
> 
> 赞同：3
> 
> 时间：2012-08-07T07:20:39.730
> 
> 标签：cakephp

我有一个函数 Company Profile 与用户控制器有关系 HABTM 与联合表 Companies_users 我的函数是

```
ublic function company_profile(){
//$logo= $this->Upload->upload('/img/company_logo', $this->data['logo']['a'],null, array('image/jpeg', 'image/jpg', 'image/png'));
$log = $this->Auth->User('id');
    // retrieve the data of the currently logged in user
$user = $this->User->find('first',array(
            'conditions'=>array('User.id'=>$log),
            'recursive'=>1
));
    //pr($user);exit();
    if($this->request->is('post') || $this->request->is('put')){
        //pr($this->request->data);exit;
        //pr($this->data);exit();
        if(isset($user['Company']) && !empty($user['Company'])){
        $newcompany = array();
        $this->User->Company->id = $user['Company'][0]['id'];
        $newcompany['Company'] = $this->data['Company'][0];
        $newcompany['Company']['id'] = $user['Company'][0]['id'];
        //pr($newcompany);exit();
        $this->User->Company->save($newcompany);
        }else{
        $this->User->Company->create();
        $newcompany = array();
        $newcompany['Company'] = $this->data['Company'][0];
        $newcompany['Company']['user_id'] = $log;
        pr($newcompany);exit();

        //newlogo = $this->request->data;
        //$newlogo['Company']['logo'] = $logo['urls']['0'];
        $this->User->Company->save($newcompany);
        //pr($newcompany);exit();
        $this->Session->setFlash('Company Profile Saved Successfully.');
        $this->redirect('/users/dashboard');

        }

    }else{
    $this->request->data = $this->User->read(null, $log);
    }
$this->loadModel('Category');
$categories = $this->Category->find('list');
$this->set(compact('user','categories'));

} 
```

为什么它不保存在联合表上？请帮助我如何将它保存在联合表中目前我有这个数组

Array ( [Company] => Array ( [id] => [category_id] => 1 [name] => Infoperks Solutions [description] => Web development [user_id] => 1 )

)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T04:33:28.473

如果您指定了模型关联，则可以使用`'deep' => true`您保存连接的表数据。您可以尝试使用以下语法保存连接的数据：

```
$this->User->save($newcompany, array('deep' => true));
//instead of
//$this->User->Company->save($newcompany); 
```

[此链接](http://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-related-model-data-habtm)肯定会帮助您保存您的 HABTM 相关数据。请询问它是否不适合您。

# multithreading - 在线下载图像时黑莓设备挂起

> ID：11841086
> 
> 赞同：0
> 
> 时间：2012-08-07T07:20:53.147
> 
> 标签：multithreading, networking, blackberry

每次我的应用程序进入在线下载图像的布局时，设备都会挂起，需要等待下载完成才能移动。

我做了一些研究。他们建议在另一个`Thread`. 但是，我不明白如何在另一个`Thread`.

这是我调用下载图像功能的代码。

```
Main.getUiApplication().invokeLater(new Runnable() {
            public void run() {
                for (j = 0; j < imagepath.length; j++) {
                    if (!imagepath[j].toString().equals("no picture")
                            && Config_GlobalFunction.isConnected()) {
                        loader = new Util_LazyLoader(imagepath[j],
                                new Util_BitmapDowloadListener() {
                                    public void ImageDownloadCompleted(
                                            Bitmap bmp) {
                                        imagebitmap[j] = bmp;
                                        invalidate();
                                    }
                                });
                        loader.run();
                    }
                }
            }
        }, 500, false); 
```

和`lazyloader`

```
public class Util_LazyLoader implements Runnable {
String url = null;
Util_BitmapDowloadListener listener = null;

public Util_LazyLoader(String url, Util_BitmapDowloadListener listener) {
    this.url = url;
    this.listener = listener;
}

public void run() {
    Bitmap bmpImage = getImageFromWeb(url);
    listener.ImageDownloadCompleted(bmpImage);
}

private Bitmap getImageFromWeb(String url) {
    HttpConnection connection = null;
    InputStream inputStream = null;
    EncodedImage bitmap;
    byte[] dataArray = null;

    try {
        connection = (HttpConnection) (new ConnectionFactory())
                .getConnection(url + Database_Webservice.ht_params)
                .getConnection();

        int responseCode = connection.getResponseCode();
        if (responseCode == HttpConnection.HTTP_OK) {
            inputStream = connection.openDataInputStream();
            dataArray = IOUtilities.streamToBytes(inputStream);
        }
    } catch (Exception ex) {
    } finally {
        try {
            inputStream.close();
            connection.close();
        } catch (Exception e) {
        }
    }

    if (dataArray != null) {
        bitmap = EncodedImage.createEncodedImage(dataArray, 0,
                dataArray.length);
        return bitmap.getBitmap();
    } else {
        return null;
    }
}
} 
```

我需要帮助，因为我不熟悉网络。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:52:35.217

因此，`Util_LazyLoader`已经很好地编写了支持背景图像下载，因为它实现了`Runnable`接口。您可以像这样开始下载：

```
Util_LazyLoader loader = 
    new Util_LazyLoader(imagepath[j],
                        new Util_BitmapDowloadListener() {
                            public void ImageDownloadCompleted(final Bitmap bmp) {
                                UiApplication.getUiApplication().invokeLater(new Runnable() {
                                    public void run() {
                                        imagebitmap[j] = bmp;
                                        invalidate();
                                    }
                                });
                            }
                        });

Thread backgroundWorker = new Thread(loader);
backgroundWorker.start(); 
```

而不是自己直接调用该`loader.run()`方法。

一个`Runnable`类只是一个有`run()`方法的类。你把你的`Runnable` `loader`对象给一个新的`Thread`并告诉它`start()`。这将导致它在另一个线程`Thread`中执行该`run()`方法，而不是 UI 线程。只要您不在 UI 线程上运行网络操作，您的应用程序就不会在用户看来被冻结。

**注意：**在您的原始代码中，您有：

```
Main.getUiApplication().invokeLater(new Runnable() {
        public void run() { 
```

你*可能*根本不需要那个。如果该代码是从主 (UI) 线程运行的，那么所做的就是告诉应用程序调用该本地定义的`run()`方法，**也在**UI 线程上。您也确实通过了`500`毫秒延迟。也许你需要那个（？）。但是，如果您只想让它立即运行，请去掉上面的代码 ( `invokeLater(new Runnable() { public void run() { ...`)。只需使用我发布的代码（在此答案的顶部）创建`backgroundWorker`然后调用它的`start()`方法。

另外，请注意我的实现中的两件事：

**1.**`UiApplication.invokeLater()`一旦收到位图，我就使用该方法。网络操作完成后，必须更新 UI。但这**不应该**在后台线程上完成。因此，您创建一个`Runnable`在后台线程上运行，然后在下载完成后创建另一个`Runnable`来更新 UI：

```
public void run() {
   imagebitmap[j] = bmp;
   invalidate();
} 
```

**2.**因为我创建了另一个`Runnable`，并在其中使用了`bmp`变量`Runnable`，所以我必须将它声明为`final`参数。编译器要求您这样做。另一种选择是直接使用事件锁，而不是`invokeLater()`：

```
public void ImageDownloadCompleted(Bitmap bmp) {
    synchronized(UiApplication.getEventLock()) {
         imagebitmap[j] = bmp;
         invalidate();
    }
} 
```

任何一个都应该适合你。

# mysql - 创建视图后子查询返回多行

> ID：11841087
> 
> 赞同：1
> 
> 时间：2012-08-07T07:20:56.233
> 
> 标签：mysql, view

```
CREATE VIEW `report_central_class` AS
SELECT a.*,b.course_title,b.outline_id,c.catid,d.main_title,
      (select comp_name 
       from lang_company_details 
       where comp_id = (select comp_id 
                        from lang_company_details_courses 
                        where course_id=a.course_id)
       ) as company, 
       (select concat(fname,' ',lname) 
        from lang_course_instructors 
        where slno=a.class_inst_id) as instname 
FROM `lang_course_details_session` as a, 
              `lang_course_details` as b,
              `lang_course_outline` as c,  
              `lang_course_category` as d 
where a.`class_status` != '' and 
      a.course_id=b.course_id and 
      c.outline_id=b.outline_id and 
      c.catid=d.slno; 
```

如果我在没有创建视图语句的情况下运行此查询，那么它将从数据库中返回正确的记录。但是当我尝试从 VIEW 运行相同的内容时，它显示子查询返回多行。

这个问题在子查询中：

```
( select comp_name 
  from lang_company_details 
  where comp_id = (
    select comp_id 
    from lang_company_details_courses 
    where course_id=a.course_id
  )
) as company 
```

如果我要删除此查询，则一切正常，但使用此查询，视图不起作用。

# python - 初级python程序员的数据结构

> ID：11841088
> 
> 赞同：-3
> 
> 时间：2012-08-07T07:21:00.180
> 
> 标签：python, data-structures

初级 Python 开发人员应该首先学习哪些数据结构？

更新：我的意思是通用数据结构，而不是 python 列表、字典和元组......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T07:31:43.383

学习python的最佳参考是python标准库本身。至于数据结构，如果你想比标准的 python 类型更深入，你可以研究[collections 模块](http://docs.python.org/library/collections.html)。查看文档并了解它是如何实现的。

例如，使用[IPython](http://ipython.org/)，您可以通过附加“？”来访问任何对象或模块的文档。和代码通过附加“？？” （不带引号）。

要超越标准库，您可以探索[PyPI](http://pypi.python.org/pypi)，它是 Python 包索引，一个社区贡献的 Python 模块的存储库。如果可能，请选择重量较大且未标记 alpha 的包裹。

例如，在数据结构上，您有：

[http://pypi.python.org/pypi/data-structures/0.1.2](http://pypi.python.org/pypi/data-structures/0.1.2)

[http://pypi.python.org/pypi/structures/0.5](http://pypi.python.org/pypi/structures/0.5)

我认为看真实的代码是学习真实编程的最好方法。

# php - Google cpanel - 检索所有共享联系人

> ID：11841089
> 
> 赞同：0
> 
> 时间：2012-08-07T07:21:00.893
> 
> 标签：php

我不知道我是否遗漏了什么，但我无法从 Google cpanel 检索共享联系人！？

身份验证令牌由第一个请求返回，但下一个返回`HTTP/1.1 401 Unknown authorization header`

# 文件：

[https://developers.google.com/google-apps/domain-shared-contacts/](https://developers.google.com/google-apps/domain-shared-contacts/)

# 代码：

```
// Authentication
$post_data = array(
    'accountType' => 'HOSTED',
    'Email' => 'my_email@gmail.com',
    'Passwd' => 'password',
    'service' => 'cp',
    'source' => 'the_source'
);
$post = http_build_query($post_data);
$fp = fsockopen('ssl://www.google.com', 443, $errno, $errstr, 20);
$header = "POST /accounts/ClientLogin HTTP/1.1\\r\n".
    "Host: www.google.com\r\n".
    "Content-Type: application/x-www-form-urlencoded\r\n".
    "Content-Length: ".strlen($post)."\r\n".
    "Connection: Close\r\n\r\n".$post;
fwrite($fp, $header);
$auth_response = '';
while($line = fgets($fp)){
    $auth_response .= $line;
}
fclose($fp);

list($header, $content) = explode("\r\n\r\n", $auth_response);
preg_match('/\sauth=(.*)\s/i', $content, $matches);
$auth_token = $matches[1];

// Retrieve contacts
$response = '';
$fp = fsockopen('ssl://www.google.com', 443, $errno, $errstr, 20);
$write = "GET /m8/feeds/contacts/my_domain/full HTTP/1.1\r\n".
    "Host: www.google.com\r\n".
    "Authorization: my_email@gmail.com token=\"$auth_token\"\r\n".
    "Content-Type: application/x-www-form-urlencoded\r\n\r\n".
    "Connection: Close\r\n\r\n";
fwrite($fp, $write);
while($line = fgets($fp)){
    $response .= $line;
}
fclose($fp);
echo $response; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:24:11.803

[ClientLogin](https://developers.google.com/google-apps/domain-shared-contacts/#client_login)文档声明 auth 标头应该是：

```
Authorization: GoogleLogin auth=yourAuthToken 
```

# android - 表格布局和表格行

> ID：11841090
> 
> 赞同：-6
> 
> 时间：2012-08-07T07:21:02.257
> 
> 标签：android, android-layout, android-tablelayout

我需要动态创建六个文本视图，但每个表格行只有三个文本视图，我需要放置两个表格行并分别放置三个文本视图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:51:32.823

尝试这样的事情。

```
 TableLayout myTable=new TableLayout(this);        
    TextView[][] myTextView=new TextView[3][3];
    myTable.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT));
    TableRow[] myRow=new TableRow[3];        
    for (int i = 0; i < 3; i++) {
        myRow[i]=new TableRow(this);
        myRow[i].setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));           
        for (int j = 0; j < 3; j++) {               
            myTextView[i][j]=new TextView(this);  
            myTextView[i][j].setText("Your Text");
            myRow[i].addView(myTextView[i][j]);
        }   
        myTable.addView(myRow[i]);
    }
    LinearLayout lin=(LinearLayout)findViewById(R.id.linLayout);
    lin.addView(myTable); 
```

# java - 使用 Eclipse 在 Java 中创建 Web 服务时出现 UDDI 错误

> ID：11841091
> 
> 赞同：1
> 
> 时间：2012-08-07T07:21:01.350
> 
> 标签：java, eclipse, web-services

我已经使用 eclipse 在 java 中创建了一个 Web 服务，并且该 Web 服务将连接我们服务器上的一个 sql 数据库。当我尝试使用 UDDI 注册这个 Web 服务时，我将其作为正文部分的输出

“IWAB0135E 发生意外错误。UDDIException 未找到操作的端点引用 (EPR) 是“http://localhost:8080/ResourceA/services/Myservice?wsdl”且 WSA 操作 = 。如果此 EPR 以前可访问，请联系服务器管理员。”

**注意：-** ***任何人都可以发给我在 UDDI 中使用 Web 服务的正确步骤*。** 我的编码方式是正确的吗？如果没有，请让我知道正确的方法。

请找到我的参考资料

```
package pkg;

import java.util.List;
import javax.jws.WebService;
import javax.jws.WebMethod;
import javax.jws.WebParam;
import java.sql.*;
import java.util.ArrayList;

public class Myservice 
{

public List getCustomerId(@WebParam(name = "ID") String ID){
    String user = "sa";
    String password = "peritus!@#";
    String url = "jdbc:oracle:thin:122.165.86.7:SampleWebService";
    String OracleDriver = "oracle.jdbc.OracleDriver";
    Connection conn = null;
    PreparedStatement pstmt = null;
    ResultSet rs = null;
    List value = new ArrayList();
    try{

        conn = DriverManager.getConnection(url, user, password);
        pstmt = conn.prepareStatement("select EmployeeCode from SampleTable where ID = '" + ID + " '");
        pstmt.setString(1, ID);
        rs = pstmt.executeQuery();
        while(rs.next())
 {
            value.add(rs.getString("EmployeeCode"));
        }
    }

    catch(SQLException e)
    {
        e.printStackTrace();
    }

    return value;
    }    } 
```

感谢您宝贵的时间！...

# php - 我可以使用单一的令牌生成机制来满足我所有的 PHP 令牌需求吗？

> ID：11841097
> 
> 赞同：3
> 
> 时间：2012-08-07T07:21:16.017
> 
> 标签：php, token

例如，现在我只需要为持久的“记住我”登录生成令牌。要生成我正在使用的那些令牌：

`sha1(uniqid(mt_rand(), true))`

它总是在 [0-9a-f] 中生成 40 个字符，如下所示：

`64070e8f3d155550b04272eae330d23896e043e6`

我可以为密码重置功能和电子邮件帐户验证以相同的方式生成令牌吗？一般来说，我可以使用一种代币生成机制来满足我的所有代币需求吗？还是我可能必须使用不同类型的令牌来满足不同的需求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:03:51.963

是的，您可以将相同的令牌生成器用于不同的目的。只要适合他们，你就不必乱用不同的机制，保持简单

# python - 在python的列表中使用startswith()函数

> ID：11841102
> 
> 赞同：4
> 
> 时间：2012-08-07T07:21:30.980
> 
> 标签：python, list

我的列表下面有以下字符串

```
some_list = ['9196358485','9966325645','8846853128','8-4-236/2','9-6-32/45','Need to fetch some strings'] 
```

从上面的字符串中，我只想要不以开头`91,9,8`但想要以开头的字符串的字符串`8-, 9-`

所以下面是我的代码

```
[i for i in some_list if all(not i.startswith(x) for x in ['91','8','9'])] 
```

**结果**：

```
['Need to fetch some strings'] 
```

在上面使用`['91','8','9']`as 条件是删除以正确开头的字符串`9 and 8`，但我也不希望`9-, 8-`从列表中删除，实际上我的意图是是否`9 and 8`应如上所述忽略以开头的字符串和以开头的字符串不应该被忽略，在我写的上面的代码中`9- and 8-`，我们是否可以在一行中编写两个条件，即以字符串开头`8-,9-`并忽略字符串以开头的概念。`9 or 8`

任何人都可以让我知道锄头来做到这一点......

**编辑代码：**

感谢您的所有支持，如果您不认为这是另一个问题，我有一些实际输出，下面的代码无法正常工作

```
some_list = ['Mr K V  Prasad Reddy(MD)',
 '+(91)-9849633132, 9959455935',
 '+(91)-9849633132',
 'Near NRI College,Opp Vijaya Bank,Nizam Pet Road,Nizampet,Hyderabad - 502102',
 '9196358485',
 '9966325645', 
 '8846853128',
 '8-4-236/2',
 '9-6-32/45',
 'Need to fetch some strings'] 
```

当我使用正则表达式应用 bwlow 代码时，我得到以下输出 **结果：**

```
['Mr K V  Prasad Reddy(MD)',
 '+(91)-9849633132, 9959455935',
 '+(91)-9849633132',
 'Near NRI College,Opp Vijaya Bank,Nizam Pet Road,Nizampet,Hyderabad - 502102',
 '8-4-236/2',
 '9-6-32/45',
 'Need to fetch some strings'] 
```

实际上我不想要列表中的所有电话号码，所以它们有时会采用上述格式，`91`有时`8`有时会开始`9`

我们如何从列表中删除所有这些电话号码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T07:23:11.780

使用正则表达式：

```
>>> import re
>>> [i for i in some_list if not re.match(r"[98]\B|+\(91\)", i)]
['8-4-236/2', '9-6-32/45', 'Need to fetch some strings'] 
```

`\B`仅在字母数字字符串中匹配，因此它在 and 之间匹配`9`，`1`但在`9`and之间不匹配`-`。

# java - 项目名称未显示在我的日食中

> ID：11841103
> 
> 赞同：5
> 
> 时间：2012-08-07T07:21:34.330
> 
> 标签：java, android, eclipse, adt

当我在 Eclipse 中使用 adt16 时

```
Version: Indigo Service Release 1
Build id: 20110916-0149 
```

一切都很好，但是当我使用 adt 20 然后在包资源管理器中它不显示项目名称时，项目被它们的包和启动器 java 类名分开，比如

```
com.pack.project.javaclass 
```

所以这很烦人，我该如何摆脱它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:00:17.043

新的 ADT 更新可用。请更新 SDK 和 Ecclipse 插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T08:01:19.630

你使用同一个工作区吗？有时我会在尝试更改源文件夹的路径时发生这种情况，但是您可以使用右键单击项目手动更改名称->重构->重命名

# modelica - 如何在modelica中使用偏导数？

> ID：11841105
> 
> 赞同：1
> 
> 时间：2012-08-07T07:21:40.853
> 
> 标签：modelica

如果我必须在 modelica 中使用偏导数，那该如何使用。我不确定是否可以在modelica中解决偏导数，但我想知道，如果可以使用它，应该如何实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T18:06:27.490

您可能需要两种不同的潜在“偏导数”。一种是相对于空间变量的偏导数（如果您对求解 PDE 感兴趣），或者您可能想要表达式相对于模拟变量的偏导数。

但这没关系，因为您无法在 Modelica 中表达其中任何一个。

如果您的动机是求解 PDE，那么恐怕您只需处理模型中的空间方面（使用某种离散化、弱公式等），以便得到的方程是简单的 ODE。

如果您想计算表达式对时间以外的变量的导数，问题将是……为什么？我很难想出一个真正必要的应用程序。但是，如果您可以解释您的用例，我可以进一步评论如何处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T20:00:54.303

我已经离散化 PDE 系统以在 Modelica 中求解：热方程、波动方程、来自双管换热器的 PDE、来自水锤的 PDE 以模拟管道中的压力波动等

在一个简单的级别上，您可以用中心差分近似替换空间导数，然后使用 for 循环生成整个 ODE 集。例如。这是一个 Modelica 代码片段，用于对热方程进行简单的离散化。

```
parameter Real L = 1 "Length";
parameter Integer n = 50 "Number of sections";
parameter Real alpha = 1;
Real dL = L/n "Section length";
Real[n] u(each start = 0);

equations
u[1] = 273;  //boundary condition
u[n] =0;   //boundary condition

for i in 2:n-1 loop
  der(u[i]) = alpha * (u[i+1] - 2 * u[i] + u[i-1]) / dL^2;
end for; 
```

这只是我从头顶输入的一个简单示例，请原谅任何错误。

你有具体的例子或应用吗？

# iphone - 无法访问 Apple Developer Provisioning Portal

> ID：11841106
> 
> 赞同：0
> 
> 时间：2012-08-07T07:21:46.393
> 
> 标签：iphone, ios, ipad

我有一个 iphone 应用程序，我需要在手机中进行测试。我的客户在开发中心创建了一个帐户，当我通过凭据登录到这个帐户时，它显示访问被拒绝。任何人都知道这是怎么发生的以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:24:05.360

[https://developer.apple.com/ios/my/overview/index.action](https://developer.apple.com/ios/my/overview/index.action)

它会为你描述一切吗？

# batch-file - 如何将目录树列表写入文本文件？

> ID：11841112
> 
> 赞同：1
> 
> 时间：2012-08-07T07:22:18.643
> 
> 标签：batch-file

我想创建一个批处理文件。当它被调用为`batch.bat MyProject`or`batch.bat MyProject/`时，它将产生以下列表。请注意，这`Dir`是`MyProject`. 我正在使用 Windows 7。

```
Dir
Dir/SubDir1
Dir/SubDir1/SubSubDir1
Dir/SubDir1/SubSubDir2
Dir/SubDir2
Dir/SubDir2/SubSubDir1
Dir/SubDir2/SubSubDir2
Dir/SubDir2/SubSubDir3
Dir/SubDir3
Dir/SubDir4 
```

如何将目录树列表写入文本文件？

必须排除文件名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:21:37.410

好的 - 这应该这样做。它需要一个参数（根文件夹）。

```
@ECHO OFF

SET root=%1

REM Get the length of the root, to make the path relative later.
REM See http://stackoverflow.com/questions/5837418/how-do-you-get-the-string-length-in-a-batch-file.
ECHO %root%>x&FOR %%? IN (x) DO SET /A rootlength=%%~z? - 1&del x 

for /F "tokens=*" %%G in ('DIR %1 /AD /S /B') do (
    CALL :PrintDirectory "%%G" %rootlength%
)

GOTO :eof

:PrintDirectory 
REM %1 Path to the folder
REM %2 Length of root string.

REM See http://www.dostips.com/DtTipsStringManipulation.php#Snippets.LeftString for
REM information on the string manipulation.

@ECHO OFF
SET start=%2
SET absPath=%1

REM Remove the path root by taking the right-hand side of the string.
CALL SET relPath=%%absPath:~%start%,-1%%

ECHO.%relPath% 
```

您可以通过将结果重定向到批处理文件来执行它：

```
PrintDirectoryStructure.bat c:\MyProject > out.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T11:53:10.157

FORFILES 提供了一个简单的解决方案，但它是*SLOW*。该命令在批处理文件或命令行中同样有效：

```
forfiles /s /p "c:\MyProject" /m * /c "cmd /v:on /c if @isdir==TRUE (set f=@relpath&echo !f:~3,-1!)" >listing.txt 
```

如果以 MyProject 作为当前目录运行命令，则可以
`/p "c:\MyProject"`从命令中删除该选项。

如果您不介意将相对路径括在`.\`每个路径前面的引号中，那么解决方案会更简单：

```
forfiles /s /p "c:\MyProject" /m * /c "cmd /c if @isdir==TRUE echo @relpath" >listing.txt 
```

# java - 如何在 Jtree 中刷新 XML

> ID：11841117
> 
> 赞同：3
> 
> 时间：2012-08-07T07:22:40.667
> 
> 标签：java, xml, swing, reload, jtree

我[在这里](http://naveedmurtuza.blogspot.com/2010/10/display-xml-in-jtree-with-dnd-support.html)读到，但是如果 xml 文件发生更改，jtree 不会重新加载/刷新
如何创建用于刷新/重新加载 Jtree 的函数
我尝试编写代码：

```
refreshAction = new AbstractAction("Refresh", IconFactory.getIcon("delete", IconFactory.IconSize.SIZE_16X16)) {
public void actionPerformed(ActionEvent e) {
    XMLTree xmlClass = null;
    ((DefaultTreeModel) xmlClass.getModel()).reload(); 
    System.out.println("Refresh");
}}; 
```

但我得到了错误：java.lang.NullPointerException

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T01:38:02.140

我在 in 中添加了一个新`Action`的。您可能希望从构造函数中重新考虑；为了方便起见，我对其进行了硬编码：`popup``getJPopupForExplorerTree()``xmlFile``XMLTree`

```
popup.add(new AbstractAction("Reload") {

    public void actionPerformed(ActionEvent e) {
        System.out.println("Reload");
        try {
            root = getRoot("xml.xml");
            setModel(new XMLTreeModel(root));
        } catch (Exception ex) {
            ex.printStackTrace(System.err);
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T07:38:35.947

*   这是最复杂的代码，可能

*   阅读有关的教程`JTables DefaultTableModel`（良好描述的概念和逻辑`DefaultXxxModel`类似/相同）

*   阅读有关的教程`JTree`

*   阅读有关的教程`Concurency in Swing`，

*   特别是关于`SwingWorker`

*   在您的情况下，更好（抱歉）将创建一个新实例`DefaultTreeModel`，通过使用填充数据`SwingWorker`，将新模型添加到可见`JTree`，

*   通过替换模型，您将丢失当前的所有更改`JTree`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T07:07:37.810

我不知道具体的代码，但你可以试试这个

```
refreshAction = new AbstractAction("Refresh", IconFactory.getIcon("delete", IconFactory.IconSize.SIZE_16X16)) {
public void actionPerformed(ActionEvent e) {
     DefaultTreeModel myTreeModel = (DefaultTreeModel) xmlClass.getModel();

     myTreeModel.reload();

     revalidate();
     repaint();
}}; 
```

# python - 我可以将操作添加到 Python 中的列表吗？

> ID：11841118
> 
> 赞同：8
> 
> 时间：2012-08-07T07:22:41.573
> 
> 标签：python

我经常使用 Python 而不是伪代码。为此，我想要一个堆栈。我知道使用列表是要走的路（[source](http://docs.python.org/tutorial/datastructures.html#using-lists-as-stacks)），但我想使用`myList.push`而不是`myList.append`明确我使用堆栈。

我以为我可以做一些简单的事情，比如

```
myList.push = myList.append 
```

为附加操作定义别名，但我得到

```
 stack.push = stack.append
AttributeError: 'list' object has no attribute 'push' 
```

是否存在将推送操作添加到列表的**简短**解决方案？

^(（它不应该弄乱我可运行的 Python 伪代码）)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-07T07:29:05.767

您可以像这样创建*列表*的子类：

```
class List(list):
    def push(self, x):
        self.append(x) 
```

像使用常规列表一样使用自定义类：

```
>>> s = List()
>>> s.push(10)
>>> s.push(20)
>>> s
[10, 20] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T07:56:28.637

与其重新定义，不如给同一个函数起别名？

```
class List(list):
    def __init__(self):
        self.push = self.append 
```

这也将保留附加的功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T08:28:02.517

```
>>> a = []
>>> push  = a.append
>>> push(1)
>>> a
[1]
>>> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-19T04:22:38.250

```
>>> stack = type('stack', (list,), {'push':list.append})()
>>> stack.push(1)
>>> stack.pop()
1
>>> 
```

# highcharts - 使用图像填充高图中的条形？

> ID：11841120
> 
> 赞同：0
> 
> 时间：2012-08-07T07:22:48.140
> 
> 标签：highcharts

我们可以使用图像模式来填充 highchart 条形图的条形吗？

在此链接[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/column-negative/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/column-negative/) 条形图为蓝色，栗色和绿色，但我正在寻找的是用我拥有的图像填充它们。它可行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T01:43:16.153

借用这个[问题](https://stackoverflow.com/questions/10982137/highcharts-backgroundimage-for-bar-graph)，我在[这里](http://jsfiddle.net/c9zYu/1/)做了一个演示。

使用原始的 Google 涂鸦之一：

![在此处输入图像描述](../Images/470d88b46b8a6c3dff502484cf11c5e1.png)

# actionscript-3 - AIR 应用程序中的 TWAIN API

> ID：11841123
> 
> 赞同：1
> 
> 时间：2012-08-07T07:23:16.197
> 
> 标签：actionscript-3, apache-flex, air, twain

我希望看到对 Air 中图像采集设备的支持。我喜欢扫描 TWAIN API 并在 Air 应用程序中查看图片。

在 Web 上，我看到一些带有 Java 的模块，但在我的情况下，我无法在服务器上安装 java。

你知道如何使用 Twain api 和 AIR 吗？

谢谢

# sql - 如何根据条件对数据进行分组并按顺序对这些组进行编号？

> ID：11841126
> 
> 赞同：1
> 
> 时间：2012-08-07T07:23:30.860
> 
> 标签：sql, oracle11g

我有下一个数据：

```
with t as
 (select 1 as id, '1324345' as amount, 7821 as code
    from dual
  union all
  select 2 as id, 'current' as amount, 2210 as code
    from dual
  union all
  select 3 as id, 'link' as amount, 2210 as code
    from dual
  union all
  select 4 as id, '56236400' as amount, 6740 as code
    from dual
  union all
  select 5 as id, '45562330' as amount, 5578 as code
    from dual
  union all
  select 6 as id, '34875930' as amount, 5828 as code
    from dual
  union all
  select 7 as id, 'current' as amount, 8520 as code
    from dual
  union all
  select 8 as id, 'link' as amount, 8520 as code
    from dual
  union all
  select 9 as id, '6731347060' as amount, 4740 as code
    from dual
  union all
  select 10 as id, '346008600' as amount, 6575 as code
    from dual)
select * from t 
```

我想得到以下信息：

```
with t as
 (select 1 as id, '1324345' as amount, 7821 as code, 1 as group_id
    from dual
  union all
  select 2 as id, 'current' as amount, 2210 as code, 2 as group_id
    from dual
  union all
  select 3 as id, 'link' as amount, 2210 as code, 2 as group_id
    from dual
  union all
  select 4 as id, '56236400' as amount, 6740 as code, 3 as group_id
    from dual
  union all
  select 5 as id, '45562330' as amount, 5578 as code, 3 as group_id
    from dual
  union all
  select 6 as id, '34875930' as amount, 5828 as code, 3 as group_id
    from dual
  union all
  select 7 as id, 'current' as amount, 8520 as code, 4 as group_id
    from dual
  union all
  select 8 as id, 'link' as amount, 8520 as code, 4 as group_id
    from dual
  union all
  select 9 as id, '6731347060' as amount, 4740 as code, 5 as group_id
    from dual
  union all
  select 10 as id, '346008600' as amount, 6575 as code, 5 as group_id
    from dual)
select * from t 
```

条件是“金额”字段的值。它可以是数字或文本。

UPD：预期结果：

```
id  |  amount     |    code   |   group_id
---------------------------------------------
 1  | 1324345     |    7821   |      1 
--------------------------------------------- 
 2  | current     |    2210   |      2 
---------------------------------------------
 3  | link        |    2210   |      2  
---------------------------------------------
 4  | 56236400    |    6740   |      3  
---------------------------------------------
 5  | 45562330    |    5578   |      3  
---------------------------------------------
 6  | 34875930    |    5828   |      3 
---------------------------------------------
 7  | current     |    8520   |      4  
---------------------------------------------
 8  | link        |    8520   |      4  
---------------------------------------------
 9  | 6731347060  |    4740   |      5  
---------------------------------------------
 10 | 346008600   |    6575   |      5  
--------------------------------------------- 
```

**编辑：**最佳解决方案：

```
with tmain as
 (select t.*,
         decode(isnumeric(Amount),
                lag(isnumeric(Amount)) over(order by id),
                null,
                1) lg
    from t
   order by id)
select id, amount, code, count(lg) over(order by id) group_id from tmain 
```

*isumeric*函数在哪里（基于@valexhome 答案）：

```
CREATE OR REPLACE FUNCTION ISNUMERIC (Str IN CHAR) RETURN NUMBER AS
    TMP int;
BEGIN
    if Str is null then
       return(null);
    end if;
    TMP:=TO_NUMBER(Str);
    RETURN (1);
EXCEPTION
    WHEN OTHERS THEN
       RETURN (0);
END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:38:13.840

这是在查询运行之前定义的函数 ISNUMERIC：

```
CREATE OR REPLACE FUNCTION ISNUMERIC (Str IN CHAR) RETURN NUMBER AS
    TMP int;
BEGIN
    if Str is null then
       return(null);
    end if;
    --if input null return NULL
    TMP:=TO_NUMBER(Str);
    RETURN (1);
EXCEPTION
    WHEN OTHERS THEN
       RETURN (0);
END; 
```

这是查询：

```
select id, amount, code, 
(
select count(id) 
from t Tab 
where tab.id<=t.id
  and 
  isnumeric(Amount)<>nvl(isnumeric((select Amount from t d1 where d1.id=(select max(d.id) from t d where (d.id<Tab.id)))),isnumeric(Amount)-1)
) Group_id

from t order by id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:55:36.407

我找到了另一个解决方案：

```
with tmain as
 (select t.*,
         decode(isnumeric(Amount),
                lag(isnumeric(Amount)) over(order by id),
                null,
                1) lg
    from t
   order by id)
select id, amount, code, count(lg) over(order by id) group_id from tmain 
```

它适用于大量数据。

# git - git 和附加文件的策略

> ID：11841127
> 
> 赞同：28
> 
> 时间：2012-08-07T07:23:42.783
> 
> 标签：git, git-merge

我的存储库中有一些文件在底部增长：大多数更改涉及在文件底部添加新行。这主要是语言和其他属性文件。

作为一个恼人的副作用，每当两个人同时进行添加时，我都会遇到合并冲突，并且解决方法总是涉及手动复制粘贴，以便包含来自两个版本的行。

有什么技巧、窍门或方法可以减轻这个过程的一些痛苦吗？

例如，一个简单的解决方案是告诉开发人员在文件中间的随机位置添加新行。这可能会奏效，但它需要有意识的努力，以及一段看起来很奇怪的历史。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-07T07:49:19.730

您可以使用[gitattributes](http://git-scm.com/docs/gitattributes)机制来定义**自定义合并驱动程序**（例如[这个](https://stackoverflow.com/questions/928646/how-do-i-tell-git-to-always-select-my-local-version-for-conflicted-merges-on-a-s/930495#930495)），以便自动复制相关部分。

```
[merge "aggregate"]
        name = agregate both new sections
        driver = aggregate.sh %O %A %B 
```

这将是一个 3 路合并，这意味着您可以轻松地比较`%A`和`%B`反对`%O`（共同祖先）以隔离所述新部分，并将它们聚合到结果合并文件中。

该聚合合并驱动程序只需要执行以下操作：

```
comm -13 $1 $3 >> $2 
```

（comm 实用程序是 GoW 的一部分——Windows 上的[Gnu——](https://github.com/bmatzelle/gow/wiki/)发行版，如果你在 Windows 上）

* * *

这是一个小演示：

首先，让我们建立一个 Git 存储库，在两个分支（' `master`' 和 ' `abranch`'）中修改一个文件：

```
C:\prog\git\tests>mkdir agg
C:\prog\git\tests>cd agg
C:\prog\git\tests\agg>git init r1
Initialized empty Git repository in C:/prog/git/tests/agg/r1/.git/
C:\prog\git\tests\agg>cd r1

# Who am I?
C:\prog\git\tests\agg\r1>git config user.name VonC
C:\prog\git\tests\agg\r1>git config user.email vonc@xxx

# one file, first commit:
C:\prog\git\tests\agg\r1>echo test > test.txt
C:\prog\git\tests\agg\r1>git add .
C:\prog\git\tests\agg\r1>git commit -m "first commit"
[master c34668d] first commit
 1 file changed, 1 insertion(+)
 create mode 100644 test.txt

# Let's add one more common line:
C:\prog\git\tests\agg\r1>echo base >> test.txt
C:\prog\git\tests\agg\r1>more test.txt
test
base
C:\prog\git\tests\agg\r1>git add .
C:\prog\git\tests\agg\r1>git commit -m "base"
[master d1cde8d] base
 1 file changed, 1 insertion(+) 
```

现在我们创建一个新分支，并在该文件的两个版本中进行并发修改，就像问题中指定的[OP itsadok](https://stackoverflow.com/users/7581/itsadok)一样。

```
C:\prog\git\tests\agg\r1>git checkout -b abranch
Switched to a new branch 'abranch'
C:\prog\git\tests\agg\r1>echo "modif from abranch" >> test.txt
C:\prog\git\tests\agg\r1>git add .
C:\prog\git\tests\agg\r1>git commit -m "abranch contrib"
[abranch a4d2632] abranch contrib
 1 file changed, 1 insertion(+)
C:\prog\git\tests\agg\r1>type test.txt
test
base
"modif from abranch"

# back to master
C:\prog\git\tests\agg\r1>git checkout master
Switched to branch 'master'
C:\prog\git\tests\agg\r1>echo "contrib from master" >> test.txt
C:\prog\git\tests\agg\r1>git add .
C:\prog\git\tests\agg\r1>git commit -m "contrib from master"
[master 45bec4d] contrib from master
 1 file changed, 1 insertion(+)
C:\prog\git\tests\agg\r1>type test.txt
test
base
"contrib from master" 
```

我们有两个分支（注意：[`git lg`是我的别名](https://gist.github.com/972690#file_.gitconfig)）

```
C:\prog\git\tests\agg\r1>git lg
* 45bec4d - (HEAD, master) contrib from master (86 minutes ago) VonC
| * a4d2632 - (abranch) abranch contrib (86 minutes ago) VonC
|/
* d1cde8d - base (87 minutes ago) VonC
* c34668d - first commit (89 minutes ago) VonC 
```

现在让我们尝试合并：

```
C:\prog\git\tests\agg\r1>git merge abranch
Auto-merging test.txt
CONFLICT (content): Merge conflict in test.txt
Automatic merge failed; fix conflicts and then commit the result.

C:\prog\git\tests\agg\r1>more test.txt
test
base
<<<<<<< HEAD
"contrib from master"
=======
"modif from abranch"
>>>>>>> abranch 
```

... 广告失败 ;) A**`git merge --abort`**将重置情况。

**让我们放置我们的合并驱动程序**：

```
C:\prog\git\tests\agg\r1>git config merge.aggregate.name "aggregate both new sections"
C:\prog\git\tests\agg\r1>git config merge.aggregate.driver "aggregate.sh %O %A %B"
C:\prog\git\tests\agg\r1>echo test.txt merge=aggregate > .gitattributes 
```

此时，合并仍然失败：

```
C:\prog\git\tests\agg\r1>git merge abranch
aggregate.sh .merge_file_a09308 .merge_file_b09308 .merge_file_c09308: aggregate.sh: command not found
fatal: Failed to execute internal merge 
```

正常：我们需要编写该脚本，并将其添加到`PATH`：

```
vim aggregate.sh:
#!/bin/bash

# echo O: $1
# echo A: $2
# echo B: $3

# After http://serverfault.com/q/68684/783
# How can I get diff to show only added and deleted lines?
# On Windows, install GoW (https://github.com/bmatzelle/gow/wiki/)
ob=$(comm -13 $1 $3)
# echo "ob: ${ob}"

echo ${ob} >> $2

----

C:\prog\git\tests\agg\r1>set PATH=%PATH%;C:\prog\git\tests\agg\r1 
```

现在，**合并`aggregate`驱动程序可以运行**：

```
C:\prog\git\tests\agg\r1>git merge --no-commit abranch
Auto-merging test.txt
Automatic merge went well; stopped before committing as requested

C:\prog\git\tests\agg\r1>type test.txt
test
base
"contrib from master"
"modif from abranch" 
```

给你：`test.txt`文件的末尾`abranch`已添加到`master`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-29T18:48:38.757

另一种解决方案是使用`--union`管道命令选项`git-merge-file`。

```
[merge "aggregate"]
    name = aggregate both new sections
    driver = git merge-file --union -L %P %A %O %B 
```

这比使用`comm`:更可靠`comm`，当输入行没有按照 排序时，可能会生成错误的输出`LC_COLLATE`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-11T14:31:36.190

如果您不想重新添加已删除的行，则必须使用稍微复杂一点的咒语`comm`：

```
tmp=$(mktemp)
(comm -12 %A %B ; comm -13 %O %A ; comm -13 %O %B ) >| $tmp
mv $tmp %A 
```

首先，您选择本地和远程修订共同的所有行；这可以确保所有已删除的行都保持删除状态。然后添加远程修订添加的行，然后添加本地修订添加的行。

这可以是可以`.gitconfig`使用单个命令安装的策略：

```
git config merge.aggregate.driver 'tmp=$(mktemp) ; (comm -12 %A %B ; comm -13 %O %A ; comm -13 %O %B ) >| $tmp ; mv $tmp %A' 
```

# c# - 同时将多项插入和更新到数据库中

> ID：11841132
> 
> 赞同：1
> 
> 时间：2012-08-07T07:24:07.563
> 
> 标签：c#, winforms, linq

我有一个空的数据库。我想将多条记录添加到数据库中。在将记录插入数据库时​​，我想检查我在同一日期插入的产品是否再次添加（我想更改它的一些归档并更新它的内容）。我使用了这段代码，但它只是将一些数据添加到数据库中（它无法检查现有产品。）

```
var AllData = ClsDataBase.Database.InsertProductTbls;

 foreach(item in AllData)
        {
          //Update  
          if (Exist(datefa))
            {
            var query = ClsDataBase.Database.CustomerProductTbls.SingleOrDefault
                    (data => data.CustomerId == AllData .CustomerId );

                    int? LastProductTotal = query.CustomerProducTtotal;
                    query.CustomerProducTtotal = LastProductTotal + ClsInsertProduct._InsertProductNumber;

                }
                //Insert 
                else
                {
                    _CustomerProductTbl = new CustomerProductTbl();
                    _CustomerProductTbl.CustomerId = AllData ._CustomerId;
                    _CustomerProductTbl.CustomerProductDateFa = AllData.datefa
                    .
                    .
                    .
                    ClsDataBase.Database.AddToCustomerProductTbls(_CustomerProductTbl);
                }
            }
        }
        ClsDataBase.Database.SaveChanges(); 
```

如果我`ClsDataBase.Database.SaveChanges();`同时用于更新和插入部分，我将返回此错误：

```
An error occurred while starting a transaction on the provider connection. See the inner exception for details. 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:38:45.463

我通过为每个重复循环打开数据库连接得到了解决方案：

```
foreach(item in AllData)
        {
           using (StorageEntities context = new StorageEntities())
           {
         //Update  
          if (Exist(datefa))
            {
            var query = ClsDataBase.Database.CustomerProductTbls.SingleOrDefault
                    (data => data.CustomerId == AllData .CustomerId );

                    int? LastProductTotal = query.CustomerProducTtotal;
                    query.CustomerProducTtotal = LastProductTotal + ClsInsertProduct._InsertProductNumber;

                }
                //Insert 
                else
                {
                    _CustomerProductTbl = new CustomerProductTbl();
                    _CustomerProductTbl.CustomerId = AllData ._CustomerId;
                    _CustomerProductTbl.CustomerProductDateFa = AllData.datefa;
                    ClsDataBase.Database.AddToCustomerProductTbls(_CustomerProductTbl);
                }
                ClsDataBase.Database.SaveChanges();
            }
         } 
```

# android - 通过http将JSONObject从android应用程序发送到node.js？

> ID：11841135
> 
> 赞同：4
> 
> 时间：2012-08-07T07:24:32.417
> 
> 标签：android, json, node.js

我在查找该主题的教程时遇到问题。有没有人有一个很好的例子。我想通过http从android应用程序向node.js发送一个JSONObject。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T09:19:12.460

1.  好的，首先[了解 HTTP 和 REST](http://net.tutsplus.com/tutorials/other/a-beginners-introduction-to-http-and-rest/)来决定是要 PUT 还是 POST JSON。

2.  在您的 Android 应用程序中创建一个 HTTPRequest，将 JSON 放入 HTTP 消息的正文中。看：

    *   [如何使用 HTTPClient 以 JSON 格式发送 POST 请求？](https://stackoverflow.com/questions/6218143/android-post-json-using-http)
    *   [如何使用 Android 通过 Request 发送 JSON 对象？](https://stackoverflow.com/questions/3027066/how-to-send-a-json-object-over-request-with-android)

返回节点：

3.  为该类型的请求设置一个 node.js http 处理程序。我建议使用[express](http://expressjs.com/)，因为它很简单，并且在使用它时您会发现最多的示例和支持。

4.  在 express 中使用正文解析器来[读取 JSON 对象](http://expressjs.com/api.html#req.body)。

5.  $$$ 利润 $$$

# c# - 如何关闭 Gtk# 窗口

> ID：11841136
> 
> 赞同：3
> 
> 时间：2012-08-07T07:24:33.627
> 
> 标签：c#, monodevelop, gtk#

我的 Gtk# 应用程序中有 2 个全屏窗口，主要和次要。我在第二种形式的 buttonClose 中单击事件处理程序必须关闭此窗口并进行一些操作：

```
 protected void OnButtonClose_Clicked (object sender, EventArgs e)
    {
        //some operation

        this.Dispose ();                        
    } 
```

但是窗口没有关闭！如果我在主窗口中使用此代码，该窗口将关闭并且应用程序将终止。为什么此代码适用于主窗口而不适用于辅助窗口？如何关闭辅助窗口？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T11:49:59.567

尝试 Window.Destroy() 应该销毁辅助窗口的窗口。您也可以使用 .Hide() 隐藏它，但不确定这是您的意图

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-19T08:21:25.153

在对此进行了大量研究之后，我发现什么似乎对我来说是正确的。

```
public WhateverWindow():base (Gtk.WindowType.TopLevel) {
DeleteEvent += delegate { Application.Quit(); };
} 
```

尝试`DeleteEvent += delegate { Application.Quit(); };` 在你的函数中使用，看看是否没有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-08T03:18:32.937

用这个：

```
protected void OnBtnCancelarClicked (object sender, EventArgs e)
{
   this.Destroy ();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-25T09:58:34.680

似乎唯一能按预期工作的方法是调用：

> RootWindow.Destroy();

但是，不确定这是否是正确的方法。

# sql - 在 sql 中使用 Not Like 失败

> ID：11841137
> 
> 赞同：0
> 
> 时间：2012-08-07T07:24:52.950
> 
> 标签：sql, sql-server, sql-server-2005

我有这个查询。

```
SELECT
Distinct
   CASE CHARINDEX( '?', SessionURL)
       WHEN 0 THEN SessionURL 
       ELSE LEFT(SessionURL, CHARINDEX( '?', SessionURL) - 1) END AS VisitPage , count(*) as [VisitTime] 
FROM VistedURL 
```

它给出了以下结果。

```
         访问页面访问时间
  a/default.aspx 99
  一个/home.aspx 15
  a/admin/dashboard.aspx 05
  a/contactus.aspx 54
  a/admin/login.aspx 10

```

我想`Not Like`在上面的 query.means 中使用：

`WHERE SessionURL NOT LIKE '%admin%'`

并删除上述结果表中包含的第 3 和第 5 条数据`admin`。但无法`Not Like`在上述查询中使用。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:31:59.330

```
SELECT 
   CASE CHARINDEX( '?', SessionURL)        
      WHEN 0 THEN SessionURL         
   ELSE LEFT(SessionURL, CHARINDEX( '?', SessionURL) - 1) END AS VisitPage , count(1) as [VisitTime]  
  FROM VistedURL
  GROUP BY SessionURL WHERE SessionURL NOT LIKE '%admin%' 
```

请尝试上述查询。~~也只是`count(1)`比`count(*)`~~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T07:51:55.233

尝试这个

```
 SELECT CASE WHEN CHARINDEX( '?', SessionURL) = 0 THEN SessionURL         
   ELSE LEFT(SessionURL, CHARINDEX( '?', SessionURL) - 1) END AS VisitPage, 
   count(1) as [VisitTime]  
   FROM VistedURL
   WHERE SessionURL NOT LIKE '%admin%'
   GROUP BY SessionURL 
```

# hudson - 如何以超级用户身份运行詹金斯？

> ID：11841140
> 
> 赞同：-1
> 
> 时间：2012-08-07T07:25:06.543
> 
> 标签：hudson, jenkins, root, sudoers

我是马赫什。我在我的 linux 机器上安装了 jenkins，它作为普通用户运行良好，当我尝试以超级用户 [root] 模式运行一个脚本时，它无法正常工作，即使我禁用 sudoers 文件中的密码它也无法正常工作并且它也没有给出任何错误它只是以普通用户而不是root运行脚本？我所做的？我该如何解决这个问题？？

我只是在詹金斯的shell脚本coloumn中添加这样的......

**sudo su** //*注释-->我禁用了密码，所以不需要密码，我在终端中测试过，可以用这个在没有密码的情况下进入 root*

**sh某事.sh**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T19:20:08.233

我建议不要以 root 用户身份运行 Jenkins（或任何应用程序服务器）。

为什么不安装[Jenkins ssh 插件](https://wiki.jenkins-ci.org/display/JENKINS/SSH+plugin)并配置 jenkins 用户以执行 ssh 登录到 root 帐户，而不是与 sudo 命令作斗争？

# android - Android Inside Adapter 视图重绘不起作用？

> ID：11841142
> 
> 赞同：1
> 
> 时间：2012-08-07T07:25:10.810
> 
> 标签：android, view, gallery, adapter, android-linearlayout

我正在使用适配器进行galleryview。

在那个适配器中，我使用的是线性布局。在我动态添加的线性布局文本视图中。

```
class ViewHolder{
        TextView txt_title;     
        LinearLayout linear_insideLay;
    }

@Override
    public View getView(final int position, View convertView, ViewGroup parent) {

        View vi=convertView;
        ViewHolder holder=new ViewHolder();

        try{
        vi=inflater.inflate(R.layout.homepagelist_1_adapter,null);
        holder.txt_title=(TextView)vi.findViewById(R.id.txt_title); 
        holder.linear_insideLay=LinearLayout)vi.findViewById(R.id.linear_insideLay);
vi.settag(holder);
}catch{}
} 
```

我在这里动态添加。

```
private void updateDetails(
    int linksize=singleVenueList.getLinkskeyList().size();
                try{
                    myHolder.add_link1.removeAllViews();
                }catch (Exception e) {
                    // TODO: handle exception
                }

    for(int i=0;i<linksize;i++){
                    TextView addText=new TextView(activity);        
                    addText.setText(singleVenueList.getLinkskeyList().get(i));
                    addText.setTextSize(22);
                    addText.setTextColor(Color.BLACK);
                    addText.setTag(singleVenueList.getLinksvalueList().get(i));
                    addText.setGravity(Gravity.CENTER_HORIZONTAL);
                    LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT); 
                    myHolder.linear_insideLay.addView(addText,lp);

                    addText.setOnClickListener(new OnClickListener() {
                        @Override
                        public void onClick(View v) {
                            // TODO Auto-generated method stub
                            String url=v.getTag().toString();
                            Bundle bundle=new Bundle();
                            Intent intent=new Intent(activity,WebView_Link.class);
                            bundle.putString("URL", url);
                            intent.putExtras(bundle);
                            activity.startActivityForResult(intent, 100);
                        }
                    });

        }
} 
```

在这个画廊中，我被称为 updateDetails() 方法的每个项目都可以正常工作。老化我正在尝试在未添加的 linearlLayout 中添加新列表。显示空数据。

注意：如果我没有删除视图添加 previousList + currentList 添加。尝试过无效（）；和 this.notifyDataSetChanged(); 那也行不通。

请提出正确的方法。

谢谢。

# openerp - 创建外部参考 ID

> ID：11841144
> 
> 赞同：3
> 
> 时间：2012-08-07T07:25:20.890
> 
> 标签：openerp

我在 OpenERP 6.1.1 中复制了一个新组。现在我需要为它创建一个外部引用 ID，因为我需要在视图中引用它。

通常，我想，我应该使用 xml 文件创建组，但现在我已经在使用该组并将用户分配给它，所以我不想再重做整个事情。

有没有更简单的方法？请建议。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T08:54:52.273

您可以在表中手动插入一行`ir_model_data`。`name`是外部id，`res_id`是整数id。其他必填字段为`module`和`model`。

# spring - 在 HibernateTemplate 合并后获取“最新”对象

> ID：11841147
> 
> 赞同：0
> 
> 时间：2012-08-07T07:25:29.897
> 
> 标签：spring, hibernate

我用来`getHibernateTemplate().merge(obj)`将我`obj`的数据保存在数据库中（一旦事务完成）。我的代码是这样的：

```
Foo obj = getHibernateTemplate().merge(obj); 
```

我的 Foo 表（对应于`Foo class`）有一个版本列。Foo 是版本控制的，Hibernate 在事务（由 Spring 控制）完成后更新版本。

现在，在事务之后，obj 仍然显示旧版本，而 db 具有增量版本。我了解该版本仅在交易完成后才进行物理设置。如果我现在更新 obj 并再次尝试“ `merge`”，它会抛出`StaleObjectException`（预期）。

*问题*：如何更新此对象以获取最新版本。为什么 Merge 不应该给我最新更新的对象。我必须再次加载对象吗？

# javascript - 在 Wordpress 中使用同位素和过滤进行无限滚动

> ID：11841150
> 
> 赞同：3
> 
> 时间：2012-08-07T07:25:58.760
> 
> 标签：javascript, wordpress, jquery-masonry, infinite-scroll, jquery-isotope

我几乎搜索了那里的每个论坛，并找到了几种方法来制作同位素砌体布局，并使用运行 Wordpress 的 Infinite Scroll 进行过滤。他们似乎都没有给我我想要的东西。

目前，我得到了 Masonry 布局，并进行了过滤。当我实现无限滚动时，它会将内容加载到其他内容下方，这是使用同位素和无限滚动的一个非常常见的问题。但是，当应用[.appended 方法](http://isotope.metafizzy.co/docs/methods.html#appended)将新加载的帖子排序到我的网站时，它会弄乱我的整个布局。

我怀疑我没有在正确的位置输入 .appended 行。这是我的 js 没有`.append`：

```
$(function () {
    var $page = $('#page')
});

$(function () {
    var $container = $('#content'),
            filters = {},
            // get filter from hash, remove leading '#'
            filterSelector = window.location.hash.slice(1);

    $container.imagesLoaded(function () {
        // bind isotope to window resize
        $(window).smartresize(function () {
            // jQuery has issues with percentage widths
            // so we'll manually calulate it
            var colW = Math.floor($container.width() * 0.49);

            $container.isotope({
            });
            // trigger resize so isotope layout is triggered
        }).smartresize();
    });

    $('#nav a').click(function () {
        // store filter value in object
        // i.e. filters.color = 'red'
        var $this = $(this),
                name = $this.attr('data-filter-name'),
                value = $this.attr('data-filter-value'),
                isoFilters = [],
                filterName, prop;

        filters[ name ] = value;

        for (prop in filters) {
            isoFilters.push(filters[ prop ]);
        }

        var filterSelector = isoFilters.join('');

        // trigger isotope if its ready
        if ($container.data('isotope')) {
            $container.isotope({filter: filterSelector});
        }

        window.location.hash = filterSelector;

        // toggle highlight
        $this.parents('ul').find('.selected').removeClass('selected');
        $this.parent().addClass('selected');

        return false;

    });

    // if there was a filter, trigger a click on the 
    // corresponding option
    if (filterSelector) {
        var selectorClasses = filterSelector.split('.').slice(1);
        $.each(selectorClasses, function (i, selectorClass) {
            $('#nav a[data-filter-value=".' + selectorClass + '"]').click();
        });
    }

    $container.isotope({
        itemSelector: '.box',
        filter: filterSelector,
        animationOptions: {
            duration: 750,
            easing: 'linear',
            queue: false,
        }
    });
}); 
```

`#nav`成为我的菜单，`#content`成为我的容器，`.box`成为我的帖子。

谁能告诉我我需要在哪里插入`.appended`命令？

# css - CSS 特异性过滤器

> ID：11841151
> 
> 赞同：33
> 
> 时间：2012-08-07T07:26:03.257
> 
> 标签：css, css-selectors, sass, less, css-specificity

这是一个很长的镜头，但是是否有可用的工具通过删除不需要的特异性来优化 CSS 选择器？

我发现当我写 CSS 时，我故意让我的选择器比必要的更具体，以避免冲突和准文档。

如果有一种工具可以分析给定的一组规则，确定它们与其他规则重叠的“唯一性”，然后去除任何不必要的特殊性，那就太好了。

我什至无法想象工具开发人员将如何处理这需要的所有场景，但我之前曾被其他人在该领域的独创性所震撼，并认为值得一问。

**更新：**

我为这个问题添加了一个赏金，我越想它，我就越意识到**CSS 特异性过滤器**的价值。

例如，在[Sass](http://sass-lang.com/#nesting)和[LESS](http://lesscss.org/#-nested-rules)中使用嵌套规则/选择器时，**过度嵌套**是一种[常见](http://37signals.com/svn/posts/3003-css-taking-control-of-the-cascade)且[众所周知的](http://thesassway.com/beginner/the-inception-rule)反模式，很容易导致选择器过于具体。

在优秀的 TutsPlus 课程[使用 Sass 和 Compass 可维护的 CSS](https://tutsplus.com/course/maintainable-css-with-sass/)中有一个很好的说明：

```
body {
    div.container {
        p {
            a {
                color: purple;
            }
        }
    }
} 
```

Sass 将遵循这些嵌套指令并生成以下 CSS 输出，不反对任何不必要的特殊性：

```
body div.container p a {
    color: purple;
} 
```

但是，如果存在/确实存在特异性过滤器，它将为 CSS 开发人员带来潜在的好处：

1.  您可以将样式表组织为 DOM 的 1:1 映射，类似于您在 Firebug 和 Chrome 开发工具中检查样式规则时看到的内容。智能编辑器/IDE 可以为具有共享样式/类的 DOM 元素自动填充样式。当然，这种冗余会被特异性过滤器/优化器过滤掉。

2.  样式表的结构可以由扫描 DOM 并将其转换为 CSS 选择器/规则的工具预先填充。这意味着开发人员只需要更新 HTML；CSS“树”将保持同步以反映 DOM 的当前状态。智能编辑器可以让您跳转到元素/类的 CSS 定义以进行样式设置——甚至可以在单独的面板中显示其样式规则。

在某种程度上，这似乎是一种倒退——就像您在 Dreamweaver 或 WebAssist 中发现的帮助新手学习 CSS 的功能一样。但是 CSS 选择器优化工具的基本思想似乎很简单，我所描述的工作流自动化类型将是合乎逻辑的下一步——催化剂将是特异性过滤器。

我查看了一些更知名的 CSS 编辑器和 Web IDE，但除了针对单个元素并为其生成选择器之外，没有发现任何提供此类功能的东西。

**更新 2：CSS 选择器性能**

针对 Spliff 的评论，这里有两篇关于 CSS 选择器性能的精彩文章：

*   [CSS 选择器的性能影响](http://www.stevesouders.com/blog/2009/03/10/performance-impact-of-css-selectors/)Steve Souders

*   Chris Coyier 的《[高效渲染 CSS 》](http://css-tricks.com/efficiently-rendering-css/)

两者都同意微优化 CSS 不值得努力，但过度限定的后代选择器是“效率灾难”。我自己还没有进行基准测试，但怀疑我建议的那种“DOM 映射”方法会在没有优化步骤的情况下导致性能下降，无论是手动的还是自动的。

**相关问题、链接和工具：**

[CSS 特殊性的要点](https://stackoverflow.com/q/2809024/723007)

[查看 CSS 特性的工具](https://stackoverflow.com/q/8630801/723007)

[清理 CSS 的工具](https://stackoverflow.com/q/672786/723007)

[按 CSS 特异性排序](https://stackoverflow.com/q/10716948/723007)

[Massive CSS 的 5 大错误](http://www.slideshare.net/stubbornella/5-mistakes-of-massive-css)

[谷歌：高效的 CSS 选择器](https://developers.google.com/speed/docs/best-practices/rendering##UseEfficientCSSSelectors)

[处理器](http://procssor.com/)

[干净的 CSS](http://www.cleancss.com/)

[CSS 整洁](http://csstidy.sourceforge.net/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T14:44:00.680

您可以尝试采用不同的方法，尝试将选择器编写得尽可能小（低特异性）。并且仅在需要时使它们更加具体。使用这种工作方式，您不需要工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T16:23:58.223

只是要把它扔出去——它不会“回答”你的问题，但它是我喜欢为那些做大量 css 编程的人宣传的工具：**Firebug。**

如果你不熟悉它，它是一个用于网络浏览器的工具。安装后拉出页面，右键单击并选择“检查元素”。它将向您展示影响页面上不同元素的所有 css，并且对于创建干净、精确的 css 代码很有用。此外，只需稍作修改，即可更轻松地查看页面外观的即时更新。**它将通知您被其他 css 代码覆盖的无用 css 代码。**

还！Firebug 现在几乎可用于所有浏览器。不仅仅是火狐。就个人而言，我偏爱在 Chrome 中使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T14:38:04.783

我们真的不能没有特异性，因为当您有两个或多个规则发生冲突时，它是唯一可以拯救您的方法。特殊性为整个混乱的 CSS 规则带来了理智，因此它更像是一种祝福而不是诅咒。你谈到的一些东西，比如 CSS 选择器，可以使用 Firefox/Firebug 来完成。我更担心浏览器的兼容性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T21:26:12.597

Actually there's a way you can do this using HTML5 and CSS3\. The standard technique is to specify elements using the HTML 5 attribute ["data-"](http://ejohn.org/blog/html-5-data-attributes/) and then do CSS selection for this attribute. This isn't the purpose of the attributes, but you can customly specify some elements that you can use to even switch the theme of a site.

So, for example, you can end up creating your specificity filters manually in CSS, by specifying

```
<b data-specificity=2>test</b> 
```

where data-specificity only matches to parents above.

**UPDATE:**

Alright, so for example, let's say you have a paragraph class, but you want to specify which parent, or how many parents the paragraph can inherit properties from. You would use rules for each potential parent that can be inherited from:

```
p[data-specificity="1"]{
    color:red;
    font-family:verdana;
    text-decoration:underline;
}
p[data-specificity="2"]{
    color:black;
    font-family:arial;
}
div.container > *[data-specificity="2"] {
    font-family:impact;
    color:blue;
    text-decoration:underline;
} 
```

So these rules mean that any p tag which is a direct child of the div container and has specificity 2, is allowed to inherit properties from the div container. The blue color of the div gets inherited by the p with data-specificity 2.

Here's a [JSFiddle](http://jsfiddle.net/FR63n/) where you can see this!

The idea is that like this, using HTML5, you can control exactly which elements are allowed to inherit which properties. It's a lot of extra code to write (for both child and parent elements) but you can use this to get rid of some unnecessary specificity

I've never actually seen anyone use this method in practice, I pretty much just cooked it up for you, but I think it could be very useful, what do you think ?

# javascript - slickgrid - 以单元格为中心的浮动 DIV 或表格

> ID：11841153
> 
> 赞同：0
> 
> 时间：2012-08-07T07:26:10.733
> 
> 标签：javascript, html, jquery-ui, slickgrid

我正在使用 Slickgrid 并试图实现下面的视觉效果。

蓝点可以是任何图标/按钮。

![在此处输入图像描述](../Images/e4a50935a2d57a38de3bbe2a1d135a9c.png)

关键问题是如何创建一个始终以所选单元格为中心的浮动 DIV... 或一个 3x3 表格，其中心单元格是所选单元格。

关于如何开始的任何建议？

非常感谢！

PS我试图通过两种方式解决这个问题：

1) 自定义格式化程序

```
function styleFormatter(row, cell, value, columnDef, dataContext) {

    var button = "<button class='button' title='Manage comments'></button>";

    if (value == null || value === "") {

        return "";

    } else {
            return "<div class='classValueFormat'><div class='divButton'>" + button + "</span>" + value + "</div>";
        }

    }
} 
```

divButton 的 CSS 将 margin-top 设置为负值，试图将其推出单元格边框。这里的问题是边距将单元格的主要内容向下或向上推，因此无法看到。我认为自定义格式化程序是不可行的，因为它强制任何内容都在单元格边界内。

2) 按照 Santiago 的建议和 Michael 在上下文菜单示例中演示的那样获取 x 和 y 位置是一个想法，但我放弃了，因为我无法触发 DIV 出现在导航上，也因为它没有随单元格调整大小或移动滚动页面时使用单元格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T18:45:14.653

单独创建覆盖 DIV 并将其附加到文档正文。然后，监听`onActiveCellPositionChanged`事件并使用`getActiveCellPosition`重新定位覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T17:27:41.057

我没有尝试过，这听起来可能违反直觉，但也许您可以使用编辑器而不是格式化程序。编辑器实际上不会编辑数据，但可以在单元格位置上方呈现您需要的 HTML。您必须在编辑器中处理导航，但我认为这是可行的。请参见示例 3，尤其是描述字段编辑器（它在页面滚动时移动）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T08:25:08.890

您能否获取鼠标位置并将此值发送到 div 的 position-x 和 position-y`.css()`或类似的东西？

再想一想：我想你需要使用的是[.focus() 函数](http://api.jquery.com/focus/)

# java - Selenium WebDriver 是否支持机器人框架？

> ID：11841154
> 
> 赞同：0
> 
> 时间：2012-08-07T07:26:17.607
> 
> 标签：java, facebook, frameworks, selenium-webdriver, robotframework

Selenium WebDriver 是否支持 Robot 框架？我有一个使用 java 和 Webdriver 登录 facebook 的脚本。现在我想使用任何框架来执行这个。是否可以使用使用 Webdriver 用 java 编写的机器人框架执行测试？

谢谢和问候， 湿婆奥莱蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:16:58.647

是的，有可能，Robot Framework 有一个[Selenium 1](http://code.google.com/p/robotframework-seleniumlibrary/)和[Selenium 2 / Webdriver 库](https://github.com/rtomac/robotframework-selenium2library)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:10:37.287

我不会想到会有很多问题。有一个专门的图书馆可以帮助：

[http://code.google.com/p/robotframework-seleniumlibrary/](http://code.google.com/p/robotframework-seleniumlibrary/)

# java - @PreAuthorize 注释不起作用弹簧安全性

> ID：11841156
> 
> 赞同：25
> 
> 时间：2012-08-07T07:26:19.057
> 
> 标签：java, spring, spring-security

我发现了很多类似的问题，但没有一个能解决我的问题。我的问题是`ROLE_USER`可以访问的功能`ROLE_ADMIN`

我的 spring-security.xml 代码如下。

```
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:s="http://www.springframework.org/schema/security"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
                    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                    http://www.springframework.org/schema/security
                    http://www.springframework.org/schema/security/spring-security-3.0.xsd">   

<s:http auto-config="true" use-expressions="true">
    <s:intercept-url pattern="/index.jsp" access="permitAll" />
    <s:intercept-url pattern="/welcome*" access="hasRole('ROLE_USER')" />
    <s:intercept-url pattern="/helloadmin*" access="hasRole('ROLE_ADMIN')" />

    <s:form-login login-page="/login" default-target-url="/welcome"
        authentication-failure-url="/loginfailed" />
    <s:logout logout-success-url="/logout" />
</s:http>

<s:authentication-manager>
  <s:authentication-provider>
    <s:user-service>
        <s:user name="asif" password="123456" authorities="ROLE_USER,ROLE_ADMIN" />
        <s:user name="raheel" password="123456" authorities="ROLE_USER" />          
    </s:user-service>
  </s:authentication-provider>
</s:authentication-manager> 
```

当我添加`<s:global-method-security pre-post-annotations="enabled"/>` 我的代码时显示资源未找到错误并且当我删除我的代码时成功执行但`ROLE_USER`可以访问`ROLE_ADMIN`函数

我的控制器功能是。

```
@PreAuthorize("hasRole('ROLE_ADMIN')")
@RequestMapping(value="/delete", method = RequestMethod.GET)
public String DeleteAll(ModelMap model, Principal principal ) {

    org.springframework.security.core.userdetails.User activeUser = (org.springframework.security.core.userdetails.User)SecurityContextHolder.getContext().getAuthentication().getPrincipal();
    System.out.println("Active user is "+activeUser.getUsername()+"Authorities are "+activeUser.getAuthorities());
    return "deleteUsers";

} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2016-01-08T09:38:32.423

如果您使用的是 XML 配置，请不要忘记添加以下属性：

`<s:global-method-security pre-post-annotations="enabled"/>`

如果您使用的是 Java 配置，请不要忘记添加以下注释：

`@EnableGlobalMethodSecurity(prePostEnabled = true)`

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-08-07T08:39:34.840

你应该有

```
<s:global-method-security pre-post-annotations="enabled"/> 
```

如果您希望`@PreAuthorize`注释起作用。

* * *

要回答评论：

看起来您缺少`spring-aop`依赖项。

如果您使用的是 maven，您需要：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-aop</artifactId>
    <version>${org.springframework.version}</version>
</dependency> 
```

[如果没有，你可以从这里](http://search.maven.org/#artifactdetails%7Cspringframework%7Cspring-aop%7C1.2.6%7Cjar)得到罐子。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-05-01T22:44:38.083

我面临着同样的问题。当我将以下元素从 applicationContext.xml 移动到 *-servlet.xml（我的调度程序的配置 xml）时，我的问题解决了。

```
<security:global-method-security secured-annotations="enabled"/> 
```

您必须在**调度程序的 xml 中包含此元素，而不是在应用程序的 xml**中。
[春季常见问题](http://docs.spring.io/spring-security/site/faq/faq.html#faq-method-security-in-web-context)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-03-20T10:54:17.097

我在使用注释时遇到了同样的问题，问题是我的控制器中没有*@Controller*注释。

* * *

所以看来你需要：

*   Spring Security 配置中的这些注释：

    ```
    @Configuration
    @EnableWebSecurity
    @EnableGlobalMethodSecurity(prePostEnabled = true) 
    ```

*   控制器中的论文注释：

    ```
    @Controller
    public class ServiceRS {

        @RequestMapping(value = "/admin", method = RequestMethod.GET)
        @PreAuthorize("hasAuthority('ROLE_ADMIN')")
        public void wsAdmin() {
            [...]
        }
    } 
    ```

* * *

另外，如果您仍然遇到问题，请考虑将其添加到您的 log4j2 配置中：

```
 <Logger name="org.springframework.security" level="trace" additivity="false">
        <AppenderRef ref="Console" />
        <AppenderRef ref="RollingRandomAccessFile" />
    </Logger> 
```

如果 Spring 考虑您的注释，您将在日志中看到：

```
TRACE org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource {} [main] Looking for Pre/Post annotations for method 'wsAdmin' on target class '***.ServiceRS' 
DEBUG org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource {} [main] @org.springframework.security.access.prepost.PreAuthorize(value=hasAuthority('ROLE_ADMIN')) found on specific method: public void ***.ServiceRS.wsAdmin() 
DEBUG org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource {} [main] Caching method [CacheKey[***.ServiceRS; public void ***.ServiceRS.wsAdmin()]] with attributes [[authorize: 'hasAuthority('ROLE_ADMIN')', filter: 'null', filterTarget: 'null']] 
```

*显然，您可以考虑在org.springframework.security.access.expression.SecurityExpressionRoot*的相应方法中添加断点，以查看是否使用注释中的条件完成了调用。

问候。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-07T07:36:15.570

尝试使用 @Secured 注释，

然后你会有

```
@Secured("ROLE_ADMIN")
@RequestMapping(value="/delete", method = RequestMethod.GET)
public String DeleteAll(ModelMap model, Principal principal ) {

  ...

} 
```

这是[关于它的详细博客文章](http://krams915.blogspot.com/2010/12/spring-security-3-mvc-using-secured.html)。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-09-30T20:39:17.340

以上答案都不适合我。我不得不走添加安全装饰器的路线。

装饰器放置在文件中的 bean 上`servlet-context.xml`。

首先将安全模式添加到 XML 命名空间：

```
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
...
xmlns:security="http://www.springframework.org/schema/security"
xsi:schemaLocation="http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd"> 
```

然后将装饰器应用到服务 bean 的实现中，就像这样..

```
<beans:bean id="myService" class="my.service.impl.MyServiceImpl" scope="request">
    <security:intercept-methods>
        <security:protect access="ROLE_USER" method="get*"/>
        <security:protect access="ROLE_ADMIN" method="set*"/>
    </security:intercept-methods>
</beans:bean> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-10-25T14:49:30.667

这可能会帮助您：

```
<security:global-method-security secured-annotations="enabled" proxy-target-class="true"/> 
```

问候。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-10-02T00:09:14.923

使用带有 Web 异步支持的 Servlet 3 时会出现此问题。Spring Security 3.1.4 及以下版本一旦进入方法的匿名方法，就会失去它们的安全上下文`Callable`。

将 Spring Security升级[到 3.2.0 RC1](http://projects.spring.io/spring-security/)将解决您的问题。

Maven依赖：

```
<dependencies>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>3.2.0.RC1</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>3.2.0.RC1</version>
    </dependency>
</dependencies>

<repositories>
    <repository>
        <id>spring-milestones</id>
        <name>Spring Milestones</name>
        <url>http://repo.spring.io/milestone</url>
        <snapshots>
            <enabled>false</enabled>
        </snapshots>
    </repository>
</repositories>
<repositories>
    <repository>
        <id>spring-milestones</id>
        <name>Spring Milestones</name>
        <url>http://repo.spring.io/milestone</url>
        <snapshots>
            <enabled>false</enabled>
        </snapshots>
    </repository>
</repositories> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-04-27T05:28:39.297

将下面的标签放在另一个 spring 配置文件中，而不是 spring 安全配置文件中。

我也遇到了同样的错误。

```
<security:global-method-security secured-annotations="enabled" proxy-target-class="true"/> 
```

# c#-4.0 - c#如何将代码转换为通用版本？

> ID：11841158
> 
> 赞同：1
> 
> 时间：2012-08-07T07:26:29.243
> 
> 标签：c#-4.0, entity-framework-4

我正在尝试以更通用的方式编写此代码：是否有可能基于 T i 可以使用正确的 entityframework 实体？例如，如果我会使用：

```
public IQueryable<T> GetCount(string filterExpression)
{
   //return db.Persons.Where("it." + filterExpression);
   return db. ? .Where("it." + filterExpression); // depending on type T
} 
```

更新

所以现在我这样做了：

```
 public int GetCount<T>(string filter)
        where T : class
        {
            NortwindEntities db = new NortwindEntities();
            return db.CreateObjectSet<T>().Where(filter).Count();
        } 
```

错误：

```
Error   2   The constraints for type parameter 'T' of method 'MyBase<T>.GetCount<T>(string)' must match the constraints for type parameter 'T' of interface method 'MyBase<T>.GetCount<T>(string)'. Consider using an explicit interface implementation instead 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:30:38.490

你确定你想要一个可查询的`T`吗？（您的方法的名称是`GetCount`。）

您可以这样做以`IQueryable<T>`从您的`DbContext`.

```
public IQueryable<T> GetCount<T>(Func<T, bool> predicate)
    where T : class
{
    MyContext db = new MyContext();
    return db.Set<T>().Where(predicate).AsQueryable();
}

IQueryable<Person> result = GetCount<Person>(x => x.Id == 1); 
```

我建议使用该名称`Where`作为您的方法名称。

```
public IQueryable<T> Where<T>(Func<T, bool> predicate)
    where T : class
{
    MyContext db = new MyContext();
    return db.Set<T>().Where(predicate).AsQueryable();
}

IQueryable<Person> result = Where<Person>(x => x.Id == 1); 
```

## 更新

`where T : class`如果遇到以下异常，请使用该方法装饰。

> 类型“T”必须是引用类型才能在泛型类型或方法中用作参数“TEntity”？

## 更新 2

看来您真的只想要计数。

```
public int GetCount<T>(Func<T, bool> predicate)
    where T : class
{
    MyContext db = new MyContext();
    return db.Set<T>().Where(predicate).Count();
}

int count = GetCount<Person>(x => x.Id == 1); 
```

# gcc - 如何使用 GCC 编译器编译 C++ 代码？

> ID：11841161
> 
> 赞同：3
> 
> 时间：2012-08-07T07:26:44.273
> 
> 标签：gcc, compiler-construction

我在记事本中编写了 C++ 代码，并希望使用 GCC 编译器进行编译。GCC编译器是程序吗？我可以从哪个站点下载它？我没有任何关于它的信息。我能做些什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T07:29:43.767

您可以从下载 Code::Blocks 开始，它是一个可以下载的跨平台 IDE，包括 MinGW GCC 编译器。

[http://www.codeblocks.org/](http://www.codeblocks.org/)

但是，如果您使用的是 Linux，您可以在终端中只使用“gcc”命令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T07:31:58.353

GCC 是一个程序。如果你有 linux 它可能已安装。只需在控制台行 gcc 中输入即可。如果您使用语法输出 - 它已安装在其他地方 - 输入建议的命令。为了编译一些类型：

```
gcc <file name> 
```

它将创建一个 .out 文件，您可以从控制台行运行该文件。更多信息类型：

```
man gcc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T07:33:50.723

您还可以使用小型且可以使用许多编译器的 C-free 5.0。小想法。您只需要让它自动选择库和包含路径。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T07:33:58.043

如果您使用的是 Windows，则可以尝试以下端口之一：[mingw](http://www.mingw.org/)。

如果您在 Linux 上，您可能已经安装了它（尝试 gcc --version）或至少可从存储库中获得（检查您的发行版“安装程序”）。

还有许多（免费）IDE，您也可以获取和使用它们来代替记事本。Google for Eclipse/CDT、Netbeans、code::blocks 等。

# php - .htaccess 规则在文件不存在时重定向

> ID：11841164
> 
> 赞同：0
> 
> 时间：2012-08-07T07:26:57.440
> 
> 标签：php, apache, .htaccess, mod-rewrite

应用程序驻留在此处：`http://localhost/reports/`

*   报告
    *   索引.php
    *   daily_stats.php
    *   控制器

        *   daily_stats.php //是一个以 br() 作为动作的控制器

我想根据以下情况编写一个 .htaccess 规则：

```
case1: http://localhost/reports/daily_stats/  
           resulting url: http://localhost/reports/daily_stats.php

case2: http://localhost/reports/daily_stats/br/  
           resulting url: http://localhost/reports/index.php/daily_stats/br 
```

index.php 负责路由到控制器的位置

我已经写了以下内容：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /reports/index.php/$1 
```

面临的问题是当我进入`http://localhost/reports/daily_stats/br/` 它时执行根文件夹中的daily_stats.php 而不是控制器

当它看到服务器变量时，它是这样的：

```
[SCRIPT_FILENAME] => /var/www/reports/daily_stats.php
[QUERY_STRING] => 
[REQUEST_URI] => /reports/daily_stats/br
[SCRIPT_NAME] => /reports/daily_stats.php
[PATH_INFO] => /br
[PATH_TRANSLATED] => /var/www/br
[PHP_SELF] => /reports/daily_stats.php/br 
```

应该是这样的： [SCRIPT_FILENAME] => /var/www/reports/index.php [QUERY_STRING] => [REQUEST_URI] => /reports/daily_stats/br [SCRIPT_NAME] => /reports/index.php [PATH_INFO] => /daily_stats/br [PATH_TRANSLATED] => /var/www/daily_stats/br [PHP_SELF] => /reports/index.php/daily_stats/br

重写日志说：

```
127.0.0.1 - - [07/Aug/2012:15:22:30 +051800] [localhost/sid#b63fead8][rid#b6ae6058/subreq] (3) [perdir /var/www/reports/] add path info postfix: /var/www/reports/daily_stats.php -> /var/www/reports/daily_stats.php/br
127.0.0.1 - - [07/Aug/2012:15:22:30 +051800] [localhost/sid#b63fead8][rid#b6ae6058/subreq] (3) [perdir /var/www/reports/] strip per-dir prefix: /var/www/reports/daily_stats.php/br -> daily_stats.php/br
127.0.0.1 - - [07/Aug/2012:15:22:30 +051800] [localhost/sid#b63fead8][rid#b6ae6058/subreq] (3) [perdir /var/www/reports/] applying pattern '^(.*)$' to uri 'daily_stats.php/br'
127.0.0.1 - - [07/Aug/2012:15:22:30 +051800] [localhost/sid#b63fead8][rid#b6ae6058/subreq] (4) [perdir /var/www/reports/] RewriteCond: input='/var/www/reports/daily_stats.php' pattern='!-f' => not-matched
127.0.0.1 - - [07/Aug/2012:15:22:30 +051800] [localhost/sid#b63fead8][rid#b6ae6058/subreq] (1) [perdir /var/www/reports/] pass through /var/www/reports/daily_stats.php
127.0.0.1 - - [07/Aug/2012:15:22:30 +051800] [localhost/sid#b63fead8][rid#b6af0058/initial] (3) [perdir /var/www/reports/] add path info postfix: /var/www/reports/daily_stats.php -> /var/www/reports/daily_stats.php/br
127.0.0.1 - - [07/Aug/2012:15:22:30 +051800] [localhost/sid#b63fead8][rid#b6af0058/initial] (3) [perdir /var/www/reports/] strip per-dir prefix: /var/www/reports/daily_stats.php/br -> daily_stats.php/br
127.0.0.1 - - [07/Aug/2012:15:22:30 +051800] [localhost/sid#b63fead8][rid#b6af0058/initial] (3) [perdir /var/www/reports/] applying pattern '^(.*)$' to uri 'daily_stats.php/br'
127.0.0.1 - - [07/Aug/2012:15:22:30 +051800] [localhost/sid#b63fead8][rid#b6af0058/initial] (4) [perdir /var/www/reports/] RewriteCond: input='/var/www/reports/daily_stats.php' pattern='!-f' => not-matched
127.0.0.1 - - [07/Aug/2012:15:22:30 +051800] [localhost/sid#b63fead8][rid#b6af0058/initial] (1) [perdir /var/www/reports/] pass through /var/www/reports/daily_stats.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:06:17.380

听起来您已经为 case1 编写了规则……但是当 URL 未以“daily_stats”结尾时，您需要阻止规则应用。为此，只需`$`在匹配字符串的末尾添加一个。像这样的东西应该工作：

```
RewriteRule ^reports/daily_stats/?$ /reports/daily_stats.php 
```

# php - 如何获取表单的名称 - Symfony2

> ID：11841166
> 
> 赞同：1
> 
> 时间：2012-08-07T07:26:59.993
> 
> 标签：php, symfony, doctrine

我正在将 Symfony2 与 Doctrine 和 Twig 一起使用。我有两种以这种方式创建的表格：

```
class PaymentsType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder->add('date', 'date', array('widget' => 'single_text', 'format' => 'yyyy-MM-dd', 'required'  => false));
        // ...
    }

    public function getName()
    {
        return 'payments';
    } 
} 
```

第二个类似，但 getName() 返回 'edit'

每个都有自己的提交按钮。如何获取按下提交按钮的表单的名称？我想做的事情是找到一种控制器来识别按下哪个按钮的方法，因为它们每个都应该使不同的事情发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:50:24.337

以下应该有效：

```
public function processAction(Request $request)
{
    $form_a = $this->createForm(new FormAType());
    $form_b = $this->createForm(new FormBType());

    if ($request->request->has($form_a->getName())) {
        // form a was sent
    } else if ($request->request->has($form_b->getName())) {
        // form b was sent
    }

    // any additional code
} 
```

# java - 如何在 Openxava 中获取 HttpServletResponse 对象

> ID：11841170
> 
> 赞同：0
> 
> 时间：2012-08-07T07:27:23.633
> 
> 标签：java, jsp, jakarta-ee, servlets, openxava

目前我正在研究 Openxava 框架，这对我来说是新的。我想在我当前的项目中构建一个文件下载功能，所以我需要一个 HttpServletResponse 对象。所以请帮助我如何在 Openxava 中获取 HttpServletResponse 对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T13:25:47.143

您可以创建一个 servlet 并在 servlets.xml 中注册它（OpenXava 在部署时将此文件的内容添加到 web.xml 中）。

要为用户启用 servlet，然后创建一个实现 IForwardAction 的操作。

例如 servlet.xml 可能有：

```
<servlet>
    <servlet-name>myDownloadServlet</servlet-name>
    <servlet-class>org.webapp.test.MyDownloadServlet</servlet-class>
</servlet>          

<servlet-mapping>
    <servlet-name>myDownloadServlet</servlet-name>
    <url-pattern>/mydownload.do</url-pattern>
</servlet-mapping> 
```

还有 MyDownloadServlet 类。

```
public class MyDownloadServlet extends HttpServlet {
    /**
     * Shows Hello World.
     */
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html");
        response.getWriter().write("Hello World");
    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        doGet(request, response);
     }
} 
```

最后你的动作

```
public class MyDownloadAction extends ViewBaseAction implements IForwardAction {

    public String getForwardAction() {
        return "/mydownload.do";
    }

    public boolean inNewWindow() {
        return true;
    }
} 
```

费德里科

# xml - 在类别图像之后移动分层导航过滤器

> ID：11841171
> 
> 赞同：0
> 
> 时间：2012-08-07T07:27:37.870
> 
> 标签：xml, magento, layout, layered-navigation

我正在使用 Magento v. 1.6.2.0。我已将类别分层导航过滤器设置为水平显示在我的站点中并使用 1 列页面布局。我还设置了一个类别图像。

因此，当您导航到该类别类别时，目录列表前面的元素按从上到下的顺序显示：

分层导航过滤器 > 类别图像 > 产品网格。

我想把这个顺序改成这个：

类别图像 > 分层导航过滤器 > 产品网格。

我试图修改 catalog.xml 文件，但我无法使它工作：

```
 ...
 <catalog_category_layered translate="label">
        <label>Catalog Category (Anchor)</label>
        <reference name="left">
            <block type="catalog/layer_view" name="catalog.leftnav" after="currency" template="catalog/layer/view.phtml"/>
        </reference>
        <reference name="content">
            <block type="catalog/category_view" name="category.products" template="catalog/category/view.phtml">
                <block type="catalog/product_list" name="product_list" template="catalog/product/list.phtml">
                    <!-- <action method="addReviewSummaryTemplate"><type>default</type><template>review/helper/su.phtml</template></action> -->
                    <block type="catalog/product_list_toolbar" name="product_list_toolbar"  template="catalog/product/list/toolbar.phtml">
                        <block type="page/html_pager" name="product_list_toolbar_pager"/>

 ... 
```

对此有什么好的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:53:38.790

所有这些块都在内容块中，这是 Mage_Core_Text_List 类型并在他的内容中排序块。您可以在下一个函数中看到此行为：

```
protected function _toHtml()
{
    $this->setText('');
    foreach ($this->getSortedChildren() as $name) {
        $block = $this->getLayout()->getBlock($name);
        if (!$block) {
            Mage::throwException(Mage::helper('core')->__('Invalid block: %s', $name));
        }
        $this->addText($block->toHtml());
    }
    return parent::_toHtml();
} 
```

强调

**$this->getSortedChildren()**

因此，该块将在您的内容块中排序。您可以尝试使用 before 和 after 语句订购吗？

例如：

```
<block .... as="layered" after="category.image"/>
<block .... as="category.image" before="-"/>
<block .... as="grid.product after="layered"/> 
```

# itunes - NSWorkspace 与 NSTask 从沙盒应用程序启动 iTunes

> ID：11841179
> 
> 赞同：2
> 
> 时间：2012-08-07T07:28:08.937
> 
> 标签：itunes, sandbox, launch, dyld, nsworkspace

我正在尝试从在沙箱中运行的 ObjectiveC 应用程序运行 iTunes。Apple 文档提到“使用 NSTask 类创建的子进程继承了父应用程序的沙箱”。结果是运行iTunes时，弹出一些权限错误，关闭iTunes。使用 NSWorkspace 方法运行它时，它不会崩溃，并且似乎在任何沙箱之外运行。这是否意味着我有权在启动时使用 DYLD_INSERT_LIBRARIES 插入一些动态库？这是一些代码：

```
NSString* appPath = @"/Applications/iTunes.app";
// Get application URL
NSBundle *targetBundle = [NSBundle bundleWithPath:appPath];
NSURL *applicationURL = [targetBundle executableURL];

NSString* libPath = [NSHomeDirectory() stringByAppendingPathComponent:@"myLib.dylib"];
// Environment setup
NSDictionary *config = nil;
NSDictionary *env = [NSDictionary dictionaryWithObject:libPath forKey:@"DYLD_INSERT_LIBRARIES"];

NSNumber *arch = [NSNumber numberWithInt:(int)NSBundleExecutableArchitectureI386];
config = [[NSDictionary alloc] initWithObjectsAndKeys:env, NSWorkspaceLaunchConfigurationEnvironment, 
                                                      arch, NSWorkspaceLaunchConfigurationArchitecture, nil];

// Launch application
[[NSWorkspace sharedWorkspace] launchApplicationAtURL:applicationURL
                          options:0 
                    configuration:config 
                            error:nil];

[config release]; 
```

当上面的代码在沙盒中运行时，iTunes 会在没有任何库的情况下启动。有什么建议吗？

谢谢，弗拉德。

# mysql - MYSQL 查询获取相差一小时的行

> ID：11841181
> 
> 赞同：1
> 
> 时间：2012-08-07T07:28:31.760
> 
> 标签：mysql

我有一个包含这些数据的 mysql 表

```
id       user_id    latitude       longitude       updated_at
1        1          13.21          102.41          2012-08-06 13:24:06 
1        1          13.31          102.52          2012-08-06 13:54:06
1        1          13.51          102.65          2012-08-06 14:24:06
1        1          13.61          102.33          2012-08-06 14:34:06
1        1          13.71          102.57          2012-08-06 15:24:06
1        1          13.81          102.90          2012-08-06 16:24:06 
```

我想检索与`last updated time`.

即如果我搜索`2012-08-06 16:24:06`我只想得到这些行

```
1        1          13.21          102.41          2012-08-06 13:24:06 
1        1          13.51          102.65          2012-08-06 14:24:06
1        1          13.71          102.57          2012-08-06 15:24:06
1        1          13.81          102.90          2012-08-06 16:24:06 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T07:40:25.557

尝试这个：

```
SELECT *
FROM table_name
WHERE DATE_FORMAT(updated_at, '%i%s') = DATE_FORMAT(CURRENT_TIMESTAMP, '%i%s'); 
```

[**SQLFiddle 演示**](http://www.sqlfiddle.com/#!2/e0778/5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T07:32:47.660

MySQL 具有从给定时间提取小时、分钟和秒部分的功能。您可以使用它来比较当前秒和分钟与字段中的秒和分钟。

```
WHERE SECOND(updated_at) = SECOND(CURTIME()) AND MINUTE(updated_at) = MINUTE(CURTIME()) 
```

# cakephp - 带有员工模型的身份验证组件；在不检查凭据的情况下登录

> ID：11841193
> 
> 赞同：0
> 
> 时间：2012-08-07T07:29:36.657
> 
> 标签：cakephp

我试图在 Auth 组件中使用 Employee 模型而不是 User 模型。我的代码是：

**应用控制器**

```
public $components = array('Session','Auth');
function beforeFilter(){
    Security::setHash('md5');
    $this->Auth->userModel = 'Employee';
    $this->Auth->fields = array('username'=>'code','password'=>'password');
    $this->Auth->loginAction = array('controller'=>'employees','action'=>'login');
    $this->Auth->loginRedirect = array('controller'=>'pages','action'=>'home');
    $this->Auth->loginError = 'Invalid employee code or password, please try again';
    $this->Auth->logoutRedirect = array('controller'=>'employees','action'=>'login');
}
function beforeRender(){
    $this->set('Employee',$this->Auth->user());
} 
```

**员工控制器**

```
function login(){
    $this->layout = 'login';
}
function logout(){
    $this->Redirect($this->Auth->logout());
}
function beforeFilter(){
    parent::beforeFilter();
    $this->Auth->allow('signup');
}
function beforeRender(){
    parent::beforeRender();
} 
```

**登录.ctp**

```
<?php
echo $this->Form->create('Employee',array('/employees/login'));
echo $this->Form->input('code',array('label'=>'Employee code'));
echo $this->Form->input('password');
echo $this->Form->submit('Sign in',array('class'=>'b-button'));
echo $this->Form->end();
?> 
```

问题是，当我单击登录按钮时，页面只是刷新。没有重定向，没有错误消息，什么都没有。

我在做什么有什么错误吗？

**编辑**

```
function login(){
    $this->layout = 'login';
    if($this->request->is('post')){
        if($this->Auth->login($this->request->data)){
            $this->Redirect('/pages/home');
        }else{
            $this->Session->setFlash('incorrect');
        }
    }
}
function logout(){
    $this->redirect($this->Auth->logout());
} 
```

现在，无论输入的员工代码或密码如何，它都允许登录。事实上，即使登录字段为空，它也会登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:03:41.417

尝试以下操作：

```
echo $this->Form->create('Employee', array('controller' => 'employees', 'action' => 'login')); 
```

并在您的EmployeesController.php 的登录方法中检查用户的真实性

```
public function login()
{       
    if ($this->request->is('post'))
    {
        if ($this->Auth->login($this->request->data))
        {               
         /*... do what you want...*/
        }
        else
        {
          this->Session->setFlash('Your username or password was incorrect.');
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:10:19.613

我有类似的问题。最后是解决方案。

a) 在 $components 中定义表名和文件。过滤前不要使用

```
public $components = array('Session', 'Acl', 'Auth' => array('authenticate' => array('Form' => array('userModel' => 'Employee','fields' => array('username' => 'code'), 'password' => 'password'))), 'Cookie'); 
```

b) 切勿使用

```
$this->Auth->login($this->request->data) 
```

这会为您发布的任何垃圾创建会话。而是使用

```
$this->Auth->login() 
```

c) cakephp 的散列方法也不是 md5。您可能想要删除该行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T07:34:11.590

```
echo $this->Form->create('Employee',array('/employees/login')); 
```

尝试：

```
echo $this->Form->create('Employee',array('action'=>'login')); 
```

# javascript - Jquery 无法向服务器发出 Ajax 请求

> ID：11841195
> 
> 赞同：0
> 
> 时间：2012-08-07T07:29:45.053
> 
> 标签：javascript, jquery, servlets

我正在尝试通过 JQuery 发出 AJAX 请求 下面是我的代码。

但是当我通过 Mozilla Firebug 进行调试时，我观察到，没有请求命中服务器。

谁能告诉我我做错了什么。

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JQuery Example</title>
    </head>
    <body>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function(){
                         $.ajax({
                      url: 'ajax/balances',
                      processData: false,
                      timeout: 10000,
                      type: "POST",
                      contentType: "application/xml",
                      dataType: "json",
                      data: '<MyReq  user="' + User + '" katha="' + ivalitiKatha + '" />',
                     success: function(data) {

                     },
                     error : function() {
                             alert("Sorry, The requested property could not be found.");
                     }
             });

                });

        </script>
            </body>
</html> 
```

**这是我在服务器端的 web.xml**

```
<servlet-mapping>
      <servlet-name>Jersey Web Application</servlet-name>
      <url-pattern>/ajax/*</url-pattern>
   </servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:58:46.823

也许添加`<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>`到头部而不是身体会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:39:12.203

首先，我建议将 CDN JQuery 移到网站的 head 部分。

其次，我测试了上面的代码，问题似乎在于您在 JSON / AJAX 请求中发布的（数据）。

如果您将其删除或修改为 JSON，则请求将返回结果，例如

```
$.ajax({
    url: 'test',
    processData: false,
    timeout: 10000,
    type: "POST",
    contentType: "application/json",
    dataType: "json",
    data: '{"foo": "bar"}',
    success: function(data) {
        alert('Success');                
    },
    error : function() {
        alert("Sorry, The requested property could not be found.");
    }
});​ 
```

您需要将数据格式化为 JSON 请求

```
data: '{"foo": "bar"}', 
```

希望这可以帮助

# android - android.content.ActivityNotFoundException：找不到明确的活动类 [greendroid]

> ID：11841201
> 
> 赞同：2
> 
> 时间：2012-08-07T07:30:23.537
> 
> 标签：android, android-activity, greendroid

我试图用greendroid做一个应用程序，但我遇到了一个问题，我不知道我该如何解决它......此时，我已经尝试了我在网上找到的所有东西，但没有解决我的问题.. .

如果有人知道出了什么问题...

MainApplication.java ：

```
package com.example.testtt;
import greendroid.app.GDApplication;
    public class MainApplication extends GDApplication {
        @Override
        public Class<?> getHomeActivityClass() {
            return MainApplication.class;
        }
    }
} 
```

MainActivity.java ：

```
package com.example.testtt;

import greendroid.app.GDActivity;
import android.os.Bundle;

public class MainActivity extends GDActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.activity_main);
    }

} 
```

和清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.testtt"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="15" />

    <application android:icon="@drawable/ic_launcher" android:label="@string/app_name"
         android:theme="@style/Theme.GreenDroid" android:name="com.example.testtt.MainApplication">
        <activity
            android:name="com.example.testtt.MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我有这个错误：

```
 08-07 07:27:53.717: W/dalvikvm(631): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
    08-07 07:27:53.717: E/AndroidRuntime(631): Uncaught handler: thread main exiting due to uncaught exception
    08-07 07:27:53.727: E/AndroidRuntime(631): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.testtt/com.example.testtt.MainApplication}; have you declared this activity in your AndroidManifest.xml?
    08-07 07:27:53.727: E/AndroidRuntime(631):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1404)
    08-07 07:27:53.727: E/AndroidRuntime(631):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1378)
    08-07 07:27:53.727: E/AndroidRuntime(631):  at android.app.Activity.startActivityForResult(Activity.java:2749) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-22T10:55:41.183

返回`MainActivity.class`您的应用程序的`getHomeActivityClass()`.

# android - 属性的 XML 解析

> ID：11841203
> 
> 赞同：1
> 
> 时间：2012-08-07T07:30:35.797
> 
> 标签：android, xml, parsing

嗨，伙计们，我正在对属性进行 xml 解析，我的 xml 是

```
<CallLists> <CallList ID="1" Name="Name1" Desc="Ignore" CreatedOn="2/15/2011 1:48:30 PM" CreatedBy="def"> <CallList ID="2" Name="Name2" Desc="Agree" CreatedOn="3/8/2011 5:18:52 PM" CreatedBy="abc" > </CallLists> 
```

我想解析这个xml，这样我就可以获得属性值我所做的功课是

在使用肥皂//查看 xml 和遍历从服务器获得响应后

```
viewXML(Responsedata.toString());

public void viewXML(String xmlStr) throws IOException {
    try{
        byte[] xmlByteArray=xmlStr.getBytes();
        ByteArrayInputStream xmlStream=new ByteArrayInputStream(xmlByteArray);
        InputStreamReader xmlReader=new InputStreamReader(xmlStream);
        XmlParser parser=new XmlParser(xmlReader);
        try{
            traverse(parser,"");
        }
        catch(Exception exc){
            exc.printStackTrace();
        }
        return;
    }
    catch(IOException e){
        return;
    }
}

    public void traverse(XmlParser parser,String indent) throws Exception{
    boolean leave=false;
    String sValue="";
    do{
        ParseEvent event=parser.read();
        ParseEvent pe;
        switch(event.getType()){
            case Xml.START_TAG:
                if (event.equals("calllists")){

                }
                if("ID".equals(event.getAttribute(0))){
                    pe=parser.read();
                    sValue=pe.getText()+"~~";

            }
                if("Name".equals(event.getAttribute(1))){
                    pe=parser.read();
                    sValue=sValue+pe.getText()+"~~";
                }

                if("Desc".equals(event.getAttributes())){
                    pe=parser.read();
                    sValue=sValue+pe.getText()+"~~";
                }

                if("CreatedOn".equals(event.getAttributes())){
                    pe=parser.read();
                    sValue=sValue+pe.getText()+"~~";
                }

                if("CreatedBy".equals(event.getName())){
                    pe=parser.read();
                    sValue=sValue+pe.getText()+"~~";
                }
                traverse(parser,"");
                break;
            case Xml.END_TAG:
                leave=true;
                break;
            case Xml.END_DOCUMENT:
                leave=true;
                break;
            case Xml.TEXT:
                break;
            case Xml.WHITESPACE:
                break;
            default:
        }
    }while(!leave);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:33:21.747

你让事情变得复杂。

改用`SAX`它，它是 Android SDK 的一部分，[这](http://www.jondev.net/articles/Android_XML_SAX_Parser_Example)是一个很好的教程。

您还应该关注`Default Handler`（[此处](http://developer.android.com/reference/org/xml/sax/helpers/DefaultHandler.html)）。仔细看看这些方法：

`startElement(String uri, String localName, String qName, Attributes attributes)`

`endElement(String uri, String localName, String qName)`

`characters(char[] ch, int start, int length)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T07:41:39.923

我建议您使用 a `SimpleXml`，它非常快速且易于安装。

我在 3 个应用程序中使用过它，并且像 1.2.3 一样简单

[在这里享受...](http://simple.sourceforge.net/download/stream/doc/examples/examples.php)

# blackberry - 单击 TableLayoutManager 的任何单元格时执行特定操作

> ID：11841205
> 
> 赞同：0
> 
> 时间：2012-08-07T07:30:41.613
> 
> 标签：blackberry, cell, tablelayout

我是黑莓开发的新手。目前，我有一个 TableLayoutManager 实例要添加到 UI 屏幕中。如何在选择/点击表的任何单元格时执行特定操作，作为我在Android中使用的方法setOnitemclick（）

这是我的代码

```
TableLayoutManager colFMgr = new TableLayoutManager(new int[] {
TableLayoutManager.USE_PREFERRED_SIZE,
TableLayoutManager.USE_PREFERRED_SIZE }, new int[] {
TableLayoutManager.USE_PREFERRED_WIDTH_WITH_MAXIMUM,
TableLayoutManager.USE_PREFERRED_WIDTH_WITH_MAXIMUM }, 5,
Manager.HORIZONTAL_SCROLL);
for (int i = 0; i < images.length; i++) {
    colFMgr.add(new BitmapField(images[i], Field.FOCUSABLE));
}
add(colFMgr); 
```

[TableLayoutManager 是此处](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/800505/800508/How_To_-_Create_a_rich_UI_layout_with_TableLayoutManager.html?nodeid=1906675&vernum=0)定义的类

我想在单击表格的任何单元格时执行特定操作（例如导航到其他屏幕）并获取有关单击了哪个单元格的信息。

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:22:23.260

我没有尝试过这个答案。让我们检查一下。

```
TableLayoutManager colFMgr = new TableLayoutManager(new int[] {
TableLayoutManager.USE_PREFERRED_SIZE,
TableLayoutManager.USE_PREFERRED_SIZE }, new int[] {
TableLayoutManager.USE_PREFERRED_WIDTH_WITH_MAXIMUM,
TableLayoutManager.USE_PREFERRED_WIDTH_WITH_MAXIMUM }, 5,
Manager.HORIZONTAL_SCROLL){
    protected boolean navigationClick(int status, int time) { 
        int k=getFieldWithFocusIndex(); 
            if(k==0){
                //clicked first row
            }else if(k==1){
                //clicked second row
            }//and so on......
        return true; 
       } 

    };

for (int i = 0; i < images.length; i++) {
    colFMgr.add(new BitmapField(images[i], Field.FOCUSABLE));
    }
add(colFMgr); 
```

# javascript - 在客户端获取外部页面的标题

> ID：11841207
> 
> 赞同：0
> 
> 时间：2012-08-07T07:30:50.413
> 
> 标签：javascript, jquery, html

我的目标是在我的页面上打印外部页面的标题，而不需要在服务器端加载前者。

目前，我正在使用 jQuery 和 Google 的搜索 API。看看以下解决方案的hackyness：

```
//Use google search api to get page title for link
var url = "http://ajax.googleapis.com/ajax/services/search/web?q=" + **URL** + "&v=1.0&callback=?"
//Set URL for link
$("#link").attr("href", content);
//Execute google api JSON query
$.getJSON(url, function (data) {
  //Insert the unformatted title of the first result into the page
  $("#title").append(data.responseData.results[0].titleNoFormatting);
}); 
```

^ 效果很好，但仅适用于在 Google 上编入索引的网页，这些网页是提交 URL 时的第一个结果。

谁能做得更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T07:53:13.533

尝试[YQL](http://developer.yahoo.com/yql/)，获取标题的示例查询：

```
select * from html where url="http://cute-kittens.tumblr.com/" and xpath='//head/title' 
```

[在他们的控制台](http://developer.yahoo.com/yql/console/#h=select%20%2a%20from%20html%20where%20url%3D%22http%3A//cute-kittens.tumblr.com/%22%20and%20xpath%3D%27//head/title%27)中自己尝试一下。

# android - AutoCompleteTextView 删除/更改颜色分隔线

> ID：11841211
> 
> 赞同：5
> 
> 时间：2012-08-07T07:31:09.860
> 
> 标签：android, android-layout

是否可以在 AutoCompleteTextView 的弹出窗口中删除/更改分隔符的颜色？在 ListView 中，我使用了“delimiter”参数，但在 AutoCompleteTextView 中没有发现任何类似的参数。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T13:02:42.127

用于删除分隔线的快速修复解决方案可能是编写自定义 XML 来覆盖每个单元格的样式（通过 SetDropDownViewResource）。之后，您可以更改 autocompletetextview 上的 android:popupBackground 属性，使其与项目背景的颜色相匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:01:37.027

为您的 AutoCompleteTextView 使用适配器。然后，您可以执行以下操作：

```
adapter.setDropDownViewResource(R.layout.spinner_dropdown_item); 
```

布局可以由您配置。

# ember.js - Emberjs：路由器：获取另一个控制器来连接插座

> ID：11841212
> 
> 赞同：1
> 
> 时间：2012-08-07T07:31:26.197
> 
> 标签：ember.js, ember-old-router

```
<script type="text/x-handlebars" data-template-name="application"> 
{{view App.UiMenuView}}
{{view App.UiMainContainerView}}
{{outlet}}
</script>

<script type="text/x-handlebars" data-template-name="uiMainContainer">
<div id="uiMainContainer">
<div id="uiMainContainerSidebar">
{{#view App.SidebarView}}
<ul id="uiMainContainerSidebarList">
<li><a {{bindAttr href="view.tasksUrl"}}>Tasks</a></li>
<li><a {{bindAttr href="view.milestonesUrl"}}>Milestones</a></li>
<li><a {{bindAttr href="view.projectsUrl"}}>Projects</a></li>
<li><a {{bindAttr href="view.customersUrl"}}>Customers</a></li>
</ul>
{{/view}}
</div>
<div id="uiMainContainerContainer">{{outlet}}</div>
</div>
</script> 
```

我想知道是否有办法专门解决`outlet`from `uiMainContainer`？我试过类似的东西：

```
test: Em.Route.extend({
            route: '/test',
            connectOutlets: function(router) {
                //router.get('applicationController').connectOutlet({ name: 'test' });
                router.get('uiMainContainerController').connectOutlet({ name: 'test'});
            }
        }) 
```

然而，这种方法似乎无济于事。

# excel - 在 Excel 中复制值 N 次

> ID：11841213
> 
> 赞同：6
> 
> 时间：2012-08-07T07:31:32.633
> 
> 标签：excel, copy, duplicates

我有简单的清单：

```
 A     B
item1   3
item2   2
item3   4
item4   1 
```

需要输出：

```
 A
item1
item1
item1
item2
item2
item3
item3
item3
item3
item4 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-07T07:57:45.123

这是不使用 VBA 的一种方法：

1.  在 A 的左侧插入一列，因此您当前的 A 和 B 列现在是 B 和 C。
2.  放入`1`A1
3.  放入`=A1+C1`A2并向下复制到A5
4.  在 B5 中放置一个空字符串，只需`'`在单元格中输入一个单引号 ( )
5.  将 a`1`放入 E1，a`2`放入 E2，然后向下复制，得到 1, 2, ..., 10
6.  输入`=VLOOKUP(E1,$A$1:$B$5,2)`F1并复制下来。

它应该如下所示：

```
| A  | B     | C | D | E  | F     |
|----|-------|---|---|----|-------|
| 1  | item1 | 3 |   | 1  | item1 |
| 4  | item2 | 2 |   | 2  | item1 |
| 6  | item3 | 4 |   | 3  | item1 |
| 10 | item4 | 1 |   | 4  | item2 |
| 11 |       |   |   | 5  | item2 |
|    |       |   |   | 6  | item3 |
|    |       |   |   | 7  | item3 |
|    |       |   |   | 8  | item3 |
|    |       |   |   | 9  | item3 |
|    |       |   |   | 10 | item4 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:02:04.303

这是VBA解决方案。我不太明白 VBA 不会是动态的评论。它就像你做的那样充满活力，就像一个公式。请注意，此宏将**擦除 Sheet1 上的所有数据**并将**其替换为新的输出**。如果您希望在不同的工作表上获得所需的输出，请更改参考`Sheet2`或您拥有的内容。

```
Option Explicit

Sub MultiCopy()

Dim arr As Variant
Dim r As Range
Dim i As Long
Dim currRow As Long
Dim nCopy As Long
Dim item As String

'store cell values in array
arr = Sheet1.UsedRange
currRow = 2

'remove all values
Sheet1.Cells.ClearContents
Sheet1.Range("A1") = "A"

For i = 2 To UBound(arr, 1)
    item = arr(i, 1)
    nCopy = arr(i, 2) - 1
    If nCopy > -1 Then
        Sheet1.Range("A" & currRow & ":A" & (currRow + nCopy)).Value = item
        currRow = currRow + nCopy + 1
    End If
Next

End Sub 
```

# javascript - jQuery滑块：向下滑动整个页面

> ID：11841214
> 
> 赞同：0
> 
> 时间：2012-08-07T07:31:41.053
> 
> 标签：javascript, jquery, css, jquery-ui, slider

源代码在这里：[JSfiddle](http://jsfiddle.net/JAXKN/1/)

```
$(document).ready(function () {
$("#slide-link").click(function ()
   {
     $("#slider").hide("slide", { direction:"down" }, 1000);
   });
}); 
```

**问题是：** 如何使“单击此处”链接与该绿色块一起掉落并停留在最底部（绿色块消失，“单击此处”链接停留在底部）？一旦第二次按下“点击这里”（在最底部），一切都会上升（第二次点击链接消除了第一次点击）。结果，两次点击后页面没有任何变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:45:46.783

首先; 当高度值减小时，您的问题就开始了，您应该更改您的 css 结构。其次，您需要使用外部类来了解该对象是否处于活动状态。

[**这是 jsFiddle 示例。**](http://jsfiddle.net/JAXKN/22/)

jQuery：

```
$("#slide-link").click(function (){
   if (!$(this).hasClass('active')) {//if clicked object has not got class active
      $("#slider").stop().animate({'bottom':'-401px'}, 1000);
      $(this).addClass('active');    
   }else{
      $("#slider").stop().animate({'bottom':'0px'}, 1000);//added stop to prevent
      $(this).removeClass('active');               //create an animate conflict
   }
});​ 
```

CSS：

```
#global-container {
 background-image    : url(http://www.google.com/logos/2012/javelin-2012-hp.jpg);
 height     : 400px;
 overflow:hidden;
} 
```

**编辑：** 如果您也想向下滑动单击文本，请**[检查此 jsFiddle 示例。](http://jsfiddle.net/JAXKN/29/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T07:44:12.407

试试下面的代码。

**jQuery：**

```
$("#slide-link").click(function () {

   if($("#slider").is(":visible")){
       $("#slider").hide("slide", { direction:"down" }, 1000);
       $("#slide-link").animate({top: '380px'}, 1050)

   } else if($("#slider").is(":hidden")) {   
       $("#slider").show("slide", { direction:"down" }, 1000);
       $("#slide-link").animate({top: '0px'}, 950)        
   }

}); 
```

CSS中的修改：

```
#global-container
{
    background-image    : url(http://www.google.com/logos/2012/javelin-2012-hp.jpg);
    height: 400px; /* Added Height */
    overflow: hidden; /* Added Overflow Property */
}

#slider
{
    margin     : 20px 0 0 0; /* Added Top Margin */
    width      : 100px;
    height     : 400px;
    background : green;
    position   : relative;
}

/* Added New Style */
#slide-link 
{
    position: absolute; 
    top:0; 
    left:0; 
    z-index:9999; 
    height: 20px;
} 
```

## [**看演示**](http://jsfiddle.net/akhurshid/5ta7F/)

# iphone - 是否可以让 uipicker 只在滑动而不是点击时做出反应？

> ID：11841215
> 
> 赞同：0
> 
> 时间：2012-08-07T07:31:42.030
> 
> 标签：iphone, xcode, uipickerview, swipe

我制作了 UIPicker 并带有背景：

（左边是 Picker 的正常尺寸，右边是我的） ![在此处输入图像描述](../Images/096bebea12a33f052f25ec8b3cd1dcdb.png)

问题是：当用户点击 TextField - 选择器做出反应并向下滚动。是否可以防止点击，并使其仅在滑动时做出反应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:37:17.707

添加另一个`UIView`最重要的视图，然后`UITextField`在此添加您的`UIView`。这将防止用户交互冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T07:37:51.050

我认为你应该`UITextField`远离`UIPickerView`. 用户触摸时可能会增加几个等级来覆盖这两个视图。

# regex - 提取和评估数学函数

> ID：11841223
> 
> 赞同：0
> 
> 时间：2012-08-07T07:32:03.983
> 
> 标签：regex

我有一个表达式字符串：

```
10+5*Math.Tan(40)+Math.Cos(0)+40*Math.Sin(90) 
```

我想提取这些数学函数（使用正则表达式等）并评估它们的值：

```
tan(40),sin(90) 
```

使表达式字符串变为：

```
10+5*(-1.11)+1+40*1 
```

怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:41:54.777

您可以使用此正则表达式来查找字符串中的函数。第一组将是“数学”背后的单词。(Tan, Cos, Sin) 和第二组将是括号内的内容 (40, 0, 90)：

```
Math\.(\w+)\((.*?)\) 
```

找到它们后，您可以评估和替换它们。

# selenium - 如何为特定的 GWT Widget 编写 Selenium 测试用例？

> ID：11841226
> 
> 赞同：2
> 
> 时间：2012-08-07T07:32:26.817
> 
> 标签：selenium, selenium-webdriver, selenium-ide, gwt2, selenium-firefoxdriver

我对 Selenium 很陌生。我想为 GWT 小部件编写 Selenium 测试用例。我可以为 HTML 元素编写测试用例，因为它们有 id，但我不能在 GWT 中做同样的事情。我想测试文本框、图像、列表框等小部件。

谁能帮我？

提前致谢， Gnik

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:24:00.227

现在我为 GWT 小部件设置 debugId。使用该 ID，我可以访问元素并进行测试。

例如。在 UiBinder 中将 id 设置为`<g:TextBox ui:field="textBox" debugId="userBox"`

在java代码中，`textBox.ensureDebugId("userBox");`

我可以按如下方式在 Selenium 中访问这些小部件，

```
selenium.type("gwt-debug-userBox", "testing"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:02:12.840

我不知道 selenium 是否是测试 GWT Widgets 的正确工具，我认为有专门的工具。

使用 Selenium，您可以自动化浏览器。如果 GWT 不为其 html 元素提供 id，那么还有其他各种方法可以定位您的元素。例如，您可以使用 xpath 或 css 选择器。只需检查[Selenium 文档](http://seleniumhq.org/docs/03_webdriver.html#chapter03-reference)。

但同样，请注意您要测试的内容。您不想测试 GWT Widgets 创建一个合适的 Web 应用程序，这已经完成了。您可能想要使用特殊的 GWT 测试工具来测试小部件的 java 端。

# hibernate - 如何在没有外键的情况下映射表

> ID：11841227
> 
> 赞同：0
> 
> 时间：2012-08-07T07:32:34.270
> 
> 标签：hibernate, nhibernate, nhibernate-mapping, hibernate-mapping

```
 TABLE BOOKING (
  BOOK_ID  
  PERSONAL_ID                             
  ORGINIZER                      
  TITLE
    PRIMARY KEY ( BOOK_ID )
    FOREIGN KEY ( PERSONAL_ID)
);

TABLE PERSONAL
    (
      ID
      NAME
      SURNAME
      EMAIL         
      PRIMARY KEY (ID) 
    ); 
```

我的问题是如何映射个人表？我的问题是个人没有外键，所以我不知道如何映射个人。我需要从该表中获取 NAME、SURNAME 和 EMAIL。

希望有人可以提供帮助。

到目前为止，我的映射看起来像这样：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">

  <class name="Depp.Domain.Booking, Depp.Core" >
    <id name="ID" unsaved-value="0" column="ID">
      <generator class="native">
        <!--<param name="sequence">GLOBALSEQUENCE</param>-->
      </generator>
    </id>
    <property name="Title" ></property>
    <property name="TitleEnabled" type="yes_no">
      <column name="THEMA_ENABLED"/>
    </property>
    <property name="ORGANIZER" column="PERSONAL_ID" not-null="true" ></property>

    <many-to-one name="Personal" class="Book.Domain.Booking, Book.Core" column="Personal_ID"
            not-null="true" />

  </class>

  <class name="Book.Domain.Personal, Book.Core">
    <id name="id" column="ID">
      <generator class="native"/>
    </id>

    <component name="Booker" class="Book.Domain.Person, Book.Core">
      <property name="Name" column="NN" />
      <property name="Surname" column="VN"/>
      <property name="Email" column="EMAIL" />
      <property name="Phone" column="TEL" />
    </component>
  </class>

</hibernate-mapping> 
```

如果我使用多对一关系，网站就会崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:01:56.077

你写：

> 网站崩溃

这不是一个非常详细的错误报告;-)。如果您提供更多详细信息，它可以帮助我们帮助您。

无论如何，从映射中我可以看到一件事可能是错误的：在`<many-to-one />`您需要指出您正在映射的属性的类（“个人”）中，而不是包含类（“预订”）。尝试以下方式：

```
<many-to-one name="Personal" 
    class="Book.Domain.Personal, Book.Core" 
    column="Personal_ID"
    not-null="true" /> 
```

主要区别在于`class`属性。我认为您甚至可以完全省略该属性，并让 NHibernate 从实体的属性类型中推断出它。

有关更多信息，请参阅[多对一](http://nhforge.org/doc/nh/en/index.html#mapping-declaration-manytoone)文档。

# c# - 如何正确使用 Task.WhenAll

> ID：11841230
> 
> 赞同：3
> 
> 时间：2012-08-07T07:32:43.113
> 
> 标签：c#, task, async-await

在[这个问题](https://stackoverflow.com/questions/11824755/how-to-wait-tasks-with-conditions/11824832#11824832)（及其答案）之后，我想使用 TaskCompletionSource 并`Task.WhenAll`等到任何任务首先返回 True 。所以我写了这个：

```
TaskCompletionSource<bool> tcs = new TaskCompletionSource<bool>();
Task<bool> t0 = Task.Factory.StartNew<bool>(() => Find(paramA, paramB);
Task<bool> t1 = Task.Factory.StartNew<bool>(() => Find(paramC, paramD);
Task<bool> t2 = Task.Factory.StartNew<bool>(() => Find(paramE, paramF);
Task<bool> t3 = Task.Factory.StartNew<bool>(() => Find(paramG, paramH);

t0.ContinueWith(_ =>
{
    if (t0.Result)
        tcs.TrySetResult(t0.Result);
});

t1.ContinueWith(_ =>
{
    if (t1.Result)
        tcs.TrySetResult(t1.Result);
});

t2.ContinueWith(_ =>
{
    if (t2.Result)
        tcs.TrySetResult(t2.Result);
});

t3.ContinueWith(_ =>
{
    if (t3.Result)
        tcs.TrySetResult(t3.Result);
});

t4.ContinueWith(_ =>
{
    if (t4.Result)
        tcs.TrySetResult(t4.Result);
});

tcs.Task.Wait();
return tcs.Task.Result; 
```

当任何任务返回时，它都可以正常工作`true`，但是正如之前的答案中所注意到的：

> 当所有任务都返回 false 时，需要注意的一点是……在 .NET 4.5 中，通过通过 Task.WhenAll 创建另一个任务，这将相当容易

所以我尝试玩，`Task.WhenAll`但我不想正确使用它......
我尝试了类似的东西：

```
tcs.Task.Wait(); // stays block here when all tasks return false
Task tr = Task.WhenAll(new Task[] { t0, t1, t2, t3, t4 });

if (tr.IsCompleted)
   return false;
else
return tcs.Task.Result; 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T21:07:51.493

您想等到完成两项任务之一，这[`Task.WaitAny()`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.waitany)就是：

```
Task tr = Task.WhenAll(new Task[] { t0, t1, t2, t3, t4 });
Task.WaitAny(tcs.Task, tr);

if (tcs.Task.IsCompleted)
    return tcs.Task.Result;

return false; 
```

这也修复了代码中的竞争条件：`tr.IsCompleted`可能是`true`，即使返回了某些任务`true`，因为所有任务都可以同时完成。

作为替代方案，您可以使用[`Task.WhenAny()`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.whenany%28v=vs.110%29)，如果您不想阻止。

但是，由于您使用的是 .Net 4.5，您不妨`await`与方法一起使用[`Interleaved()`，该方法在任务完成时对任务进行排序](http://blogs.msdn.com/b/pfxteam/archive/2012/08/02/processing-tasks-as-they-complete.aspx)：

```
async Task<bool> AnyTrue(IEnumerable<Task<bool>> tasks)
{
    foreach(var bucket in Interleaved(tasks))
    {
        if (await await bucket)
            return true;
    }

    return false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T09:42:44.437

要检查结果，`false`您可以使用

```
if (!task.Result)
{ 
    // Do stuff...
} 
```

这将检查布尔结果是否为假。为了更完整，你可以做类似的事情

```
asyncTask.ContinueWith(task =>
{
    // Check task status.
    switch (task.Status)
    {
        case TaskStatus.RanToCompletion:
            if (asyncTask.Result)
            {
                // returned true.
            }
            else
            {
                // returned false
            }
            break;
        default:
            break;
    }
} 
```

我希望这有帮助。

# matlab - 从图中删除注释

> ID：11841233
> 
> 赞同：3
> 
> 时间：2012-08-07T07:32:50.990
> 
> 标签：matlab, annotations

我有一个包含情节的 gui。在这个图中，我添加了一个注释。当使用 gui 更改绘图数据时，旧注释仍然存在，新注释将绘制在旧注释上。

所以我需要删除他的旧注释。我尝试了以下代码，但没有效果：

```
set(0,'showhiddenhandles','on')
% look for all axes in the figure of choice:
h_all_axes = findall(gcf,'type','axes');
% get the 'annotation layer' axes handle:
h_anno_axes = double(find(handle(h_all_axes),'-class','graph2d.annotationlayer'));
delete(h_anno_axes);
set(0,'showhiddenhandles','off');

annotationPos = [0.55 0.58 0.6 0.3];
htxtbox = annotation('textbox',annotationPos, ...
    'String'     ,strtextbox, ...
    'FontSize'   ,FontSize+1, ...
    'FitBoxToText', 'on', ...
    'EdgeColor', 'none', ...
    'FontName'   , 'Courier New'); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T13:44:28.330

最简单的解决方案是在注释中添加特定标签。

```
%# create the annotation
annotationPos = [0.55 0.58 0.6 0.3];
htxtbox = annotation('textbox',annotationPos, ...
    'String'     ,strtextbox, ...
    'FontSize'   ,FontSize+1, ...
    'FitBoxToText', 'on', ...
    'EdgeColor', 'none', ...
    'FontName'   , 'Courier New', ...
    'Tag' , 'somethingUnique');

%# delete the annotation
delete(findall(gcf,'Tag','somethingUnique')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-12T07:28:15.453

我还发现这`findobj`在这里不起作用。注释的父级似乎是一个 AnnotationPane，据我所知，每个图形只有一个，就像覆盖在图形上的透明纸一样，人们可以在上面写字。- 如果你这样做`clf`，它会被清除。- 如果你这样做`cla`，它不会。

我发现了这一点，因为在我的应用程序中，我有用户可以旋转的 3D 轴，并且我希望用户的首选视点和屏幕上图形窗口的大小从一次运行到下一次运行保持不变，这`cla`不需要`clf`. 但是我发现注释（从运行到运行的变化）只是在图上累积。然而，这对我有用：

```
% This eccentric method removes any existing annotations, since they
% lie around on the Figure; cla didn't remove them. htemp.Parent is
% 'the' AnnotationPane.
htemp = annotation('textbox','Position',[0 0 0 0]);
delete(htemp.Parent.Children); 
```

说明： AnnotationPane 似乎不是通常的图形对象集的一部分，所以我通过创建一个虚拟注释并访问它的父级来“了解”它。现有注释存储在数组中`htemp.Parent.Children`（您可以使用它来列出它们），因此可以使用`delete`它。

MathWorks，您可以做得比这更好！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T11:38:28.940

您应该看一下[findobj](http://www.mathworks.com/help/techdoc/ref/findobj.html)函数。只要您知道要查找的对象的足够属性，就应该能够使用它返回句柄（如果您尚未将其保存到变量中）并以这种方式删除它。

# android - android - 在Activity中添加一个ListActivity

> ID：11841235
> 
> 赞同：1
> 
> 时间：2012-08-07T07:32:58.683
> 
> 标签：android, android-intent, android-activity, listactivity

我想`ListActivity`在`Activity`.

例如， 的页面顶部有一个标题和一个按钮，`Activity`是`ListActivity`的主要内容`Activity`。该按钮将能够在`ListActivity`下面加载不同的。

左右滑动时，主区会有新`Activity`的和新的内容。

左右滑动可更改全屏，切换按钮可更改主要部分中的内容（带有阴影的框和文本“ListActivity”）。

**编辑：** 像这张图片：

![在此处输入图像描述](../Images/40f75bf4ad681720eb40618d17c493fd.png)

我怎样才能做到这一点？

我尝试使用`Intent`，但它启动 a`new Intent`并且内容`ListActivity`占据全屏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:36:42.310

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<ListView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@android:id/list"
    />
</LinearLayout>

public class StockList extends ListActivity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ListView listView = (ListView) findViewById(R.id.list);
        String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
                "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
                "Linux", "OS/2" };  

        // First paramenter - Context
        // Second parameter - Layout for the row
        // Third parameter - ID of the TextView to which the data is written
        // Forth - the Array of data
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, 
                android.R.id.text1, values);

        // Assign adapter to ListView
        listView.setAdapter(adapter);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T07:55:04.940

你可以这样做

```
import android.os.Bundle;
import android.app.ListActivity;
import android.widget.ArrayAdapter;

public class MyListActivity extends ListActivity {

public void onCreate(Bundle icicle) {

super.onCreate(icicle);

String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
            "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
            "Linux", "OS/2" };

ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, values);
    setListAdapter(adapter);
 }
} 
```

有关更多详细信息，请查看[Android ListView 和 ListActivity - 教程](http://www.vogella.com/articles/AndroidListView/article.html)

# java - 检查 Web 应用程序服务是否准备就绪

> ID：11841243
> 
> 赞同：0
> 
> 时间：2012-08-07T07:33:37.943
> 
> 标签：java, asp.net

我有几个 Http 方法，例如 Get 和 Post 方法，它们暴露在我的应用程序中，它们托管在 JBoss 中。其中之一需要重新启动 JBoss 应用程序本身。其他人需要确保应用程序已准备好使用。它们都是 Http 方法。有时，当我调用restart Http 方法时，boss 中的应用程序会在我的应用程序中重新启动。但我的问题是我不知道应用程序是否准备好调用其他方法，顺便说一下，客户端是一个.net应用程序。谁能给我一个解决方案？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:50:36.487

创建一个只会返回“成功”或“真”的网络服务方法“AmIAvailable”。调用此 Web 服务方法。如果您收到输出，则 Web 服务可用，您可以调用所有方法。

如果没有，（例如，您可能会收到“服务不可用”异常），那么 Web 服务尚无法访问。

# jquery-easyui - jquery-easyui 数据网格编辑器=numberspinner

> ID：11841246
> 
> 赞同：0
> 
> 时间：2012-08-07T07:33:53.907
> 
> 标签：jquery-easyui

[样本](http://www.jeasyui.com/tutorial/datagrid/datagrid23.php)

如何为**numberspinner**、依赖**rowValue**（**listprice**或**unitcost**）设置**“Max”**变量值

 ******* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T18:53:35.337

[在这里](http://www.jeasyui.com/documentation/index.php)查看 easyui 文档从左窗格打开**numberspinner 。**他在第一句话中说：

> 从 $.fn.spinner.defaults 和 $.fn.numberbox.defaults 扩展。用 $.fn.numberspinner.defaults 覆盖默认值。

所以你应该从左窗格打开**微调器，它具有****最大、最小**属性。您也可以将此属性用于**numberspinner**。******

# dependencies - LLVM调度以防止数据危害

> ID：11841253
> 
> 赞同：1
> 
> 时间：2012-08-07T07:34:32.097
> 
> 标签：dependencies, llvm, scheduling

我正在尝试在 llvm 中将调度添加到我的后端以防止数据危害。后端与 microblaze 非常相似，但有很多不同之处，例如用于分支延迟的多个延迟槽。目前，每次 llvm 编译代码时，我总是会发现数据危险，尤其是对于加载和存储指令。我查看了 PPC 和 ARM 后端调度，但我不知道如何调整它，所以我想自己制作。我想知道如何在编译过程中从 llvm 获取已编译指令的列表，以对指令进行排序并根据使用的寄存器检查依赖关系。

我目前对此一无所知，因为我不是熟练的 C++ 程序员。CPU 是流水线的，只有控制危险（分支）和数据危险。CPU 有 5 个流水线阶段，但只有第 3 阶段和第 5 阶段的指令能够使用来自第 1 阶段的数据。我为后端设置了延迟，它不会改变任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:58:53.643

我认为您不应该重新发明轮子并编写您的辅助调度程序。您需要在后端添加 HazardRecognizer。通过这种方式，LLVM 的调度程序将了解可能的危险并尝试避免它们。PPC 后端可能是这种调度的最佳示例。

# sql - Oracle：使用构造的左外连接

> ID：11841255
> 
> 赞同：1
> 
> 时间：2012-08-07T07:34:41.783
> 
> 标签：sql, oracle, join, using

我无法理解使用词的用法。你能给我解释一下吗？

```
SELECT   1
FROM CONF_RAGGR_OPZTAR ropt
    JOIN TAR_OPZIONI_TARIFFARIE OPT using (OPT_OPZIONE_TARIFFARIA_ID)
    JOIN CONF_RAGGRUPPAMENTI_FORN rgf using (RGF_RAGGRUPPAMENTO_FORN_ID)
    JOIN CONF_FORNITURE_REL_RAGG forg using (RGF_RAGGRUPPAMENTO_FORN_ID)
    JOIN CONF_FORNITURE forn using (FORN_FORNITURA_ID)
    LEFT JOIN (
            select *
            from CONF_ELEMENTI_FATTURABILI 
            where ELF_FLAG_ANN = 'N' 
                AND ELF_DATA_VER_FIN = TO_DATE('31/12/9999','DD/MM/YYYY')
        ) elf **using** (ROPT_RAGGR_OPZTAR_ID,COID_CONTRATTUARIO_ID,ROPT_DATA_INI,EDW_PARTITION)
--   LEFT OUTER JOIN TAR_VOCI_FATTURABILI vof
--     ON (elf.VOF_VOCE_FATTURABILE_ID = vof.VOF_VOCE_FATTURABILE_ID)
--   LEFT OUTER JOIN BASE_FASCE_ORARIE fas
--     ON (fas.FAS_FASCIA_ORARIA_ID = elf.FAS_FASCIA_ORARIA_ID)
WHERE FORN_FORNITURA_ID = 'QJlXmOFZPF3eAlAG'
ORDER BY  elf.ELF_VERSIONE DESC; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:39:15.927

`using`关键字表明这是一个自然[连接](http://en.wikipedia.org/wiki/Join_%28SQL%29#Natural_join)。这意味着连接两侧的列名是相同的。

`ROPT_RAGGR_OPZTAR_ID`在您的情况下，这意味着您将在、`COID_CONTRATTUARIO_ID`和`ROPT_DATA_INI`上加入双方`EDW_PARTITION`。

# python - 将字典附加到字典

> ID：11841256
> 
> 赞同：0
> 
> 时间：2012-08-07T07:34:49.597
> 
> 标签：python, list, dictionary

我目前有一本看起来像这样的字典：

```
{'BOB':  [['AUDI', 'BLACK', 'PETROL'],
          ['MINI', 'PINK', 'PETROL'],
          ['VW', 'BLUE', 'DIESEL']],
 'DAVE': [['BMW', 'PURPLE', 'PETROL'],
          ['VOLVO', 'GREY', 'PETROL']]} 
```

我正在寻找的是为每个键列表添加一个字典。字典将类似于：

```
{'TYRE': RUBBER, 'ALLOY': 17, 'SUNROOF': YES} 
```

最终结果将如下所示：

```
{'BOB':  [['AUDI', 'BLACK', 'PETROL',
           {'TYRE': RUBBER, 'ALLOY': 17, 'SUNROOF': YES}],
          ['MINI', 'PINK', 'PETROL',
           {'TYRE': RUBBER, 'ALLOY': 17, 'SUNROOF': YES}]
# ... 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:36:48.510

您正在将附加的 dict 添加到值中的每个列表中，这些列表本身就是列表。这些是可变的，所以只需直接引用这些内部列表：

```
for valuelist in yourdict.values():
    for sublist in valuelist:
        sublist.append(yourotherdict.copy()) 
```

注意`.copy()`那里的使用；`yourotherdict`我们正在为每次追加创建一个新的结构副本，否则它们都将是*相同的字典*，并且操纵一个将操纵每个列表中的所有引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T08:28:17.040

```
dic={'BOB':  [['AUDI', 'BLACK', 'PETROL'],
          ['MINI', 'PINK', 'PETROL'],
          ['VW', 'BLUE', 'DIESEL']],
 'DAVE': [['BMW', 'PURPLE', 'PETROL'],
          ['VOLVO', 'GREY', 'PETROL']]}
dic1={'TYRE': 'RUBBER', 'ALLOY': 17, 'SUNROOF': 'YES'}
for x in dic:
    for y in dic[x]:
        y.append(dic1)
print dic 
```

**输出：**

```
{'BOB': [['AUDI', 'BLACK', 'PETROL', {'ALLOY': 17, 'SUNROOF': 'YES', 'TYRE': 'RUBBER'}], ['MINI', 'PINK', 'PETROL', {'ALLOY': 17, 'SUNROOF': 'YES', 'TYRE': 'RUBBER'}], ['VW', 'BLUE', 'DIESEL', {'ALLOY': 17, 'SUNROOF': 'YES', 'TYRE': 'RUBBER'}]], 'DAVE': [['BMW', 'PURPLE', 'PETROL', {'ALLOY': 17, 'SUNROOF': 'YES', 'TYRE': 'RUBBER'}], ['VOLVO', 'GREY', 'PETROL', {'ALLOY': 17, 'SUNROOF': 'YES', 'TYRE': 'RUBBER'}]]} 
```

# xml - 如何在groovy中读取XML中的多行

> ID：11841258
> 
> 赞同：0
> 
> 时间：2012-08-07T07:34:54.450
> 
> 标签：xml, groovy

```
<?xml version="1.0" encoding="ISO-8859-1" ?> 
    <!--  generator=Moneycontrol XML FEED Generator  --> 
 <rss version="2.0">
    <channel>
        <title>Moneycontrol Business News</title>
        <description>Business News from Moneycontrol.com</description>
        <link>http://www.moneycontrol.com</link>
        <lastBuildDate>Tue, 07 Aug 2012 10:50:03 +0530</lastBuildDate>
        <generator>Moneycontrol.com</generator>
        <image>
            <url>http://img1.moneycontrol.com/images/top2010/moneycontrol_logo.jpg</url>
            <title>Moneycontrol Logo</title>
            <link>http://www.moneycontrol.com</link>
        <description>Feed provided by Moneycontrol.</description>
        </image>
        <item>
        <title>Expect prices to range between Rs 35-40/kg: Sakthi Sugars</title>
        <link>http://www.moneycontrol.com/news/business/expect-prices-to-range-between-rs-35-40kg-sakthi-sugars_741216.html</link>
        <description>&lt;img src=&quot;http://www.moneycontrol.com/news_image_files/2012/m/M-Manickam-aug7-190.jpg&quot; alt=&quot;M Manickam&quot; title=&quot;M Manickam&quot; border=&quot;0&quot; width=&quot;75&quot; height=&quot;75&quot; align=&quot; left&quot; hspace=&quot;5&quot;/&gt; M Manickam, managing director of Sakthi Sugars says, he expects the sugar prices to range between Rs 35-40 per kilogram.</description>
        <pubDate>Tue, 07 Aug 2012 10:32:01 +0530</pubDate>
        <guid>http://www.moneycontrol.com/news/business/expect-prices-to-range-between-rs-35-40kg-sakthi-sugars_741216.html</guid>
        </item>
        <item>
        <title>Maruti factory riot sounds alarm bells for industry</title>
        <link>http://www.moneycontrol.com/news/business/maruti-factory-riot-sounds-alarm-bells-for-industry_741130.html</link>
        <description>&lt;img src=&quot;http://www.moneycontrol.com/news_image_files/2012/m/maruti_unrest.jpg&quot; alt=&quot;Maruti factory riot sounds alarm bells for industry&quot; title=&quot;Maruti factory riot sounds alarm bells for industry&quot; border=&quot;0&quot; width=&quot;75&quot; height=&quot;75&quot; align=&quot; left&quot; hspace=&quot;5&quot;/&gt; Hiding in his office near New Delhi as workers armed with iron bars and car parts rampaged through the factory, Maruti Suzuki supervisor Raj Kumar spent two terrified hours trying to comprehend the warzone his workplace had become.</description>
        <pubDate>Tue, 07 Aug 2012 08:02:02 +0530</pubDate>
        <guid>http://www.moneycontrol.com/news/business/maruti-factory-riot-sounds-alarm-bells-for-industry_741130.html</guid>
        </item>
        <item>
        <title>New base price will push call rates up 49 p: COAI</title>
        <link>http://www.moneycontrol.com/news/business/new-base-price-will-push-call-rates49-p-coai_741067.html</link>
        <description>&lt;img src=&quot;http://www.moneycontrol.com/news_image_files/Telecom_new2_190.jpg&quot; alt=&quot;New base price will push call rates up 49 p: COAI&quot; title=&quot;New base price will push call rates up 49 p: COAI&quot; border=&quot;0&quot; width=&quot;75&quot; height=&quot;75&quot; align=&quot; left&quot; hspace=&quot;5&quot;/&gt; Telecom industry body COAI today claimed that the Rs 14,000 crore base price fixed by Cabinet for auction of telecom spectrum will lead to 37-49 paise per minute increase in call tariffs.</description>
        <pubDate>Mon, 06 Aug 2012 22:49:35 +0530</pubDate>
        <guid>http://www.moneycontrol.com/news/business/new-base-price-will-push-call-rates49-p-coai_741067.html</guid>
        </item>
    </channel>
 </rss> 
```

我想读取从包含多个标签的 partuclar 链接获得的 xml 文件中的多行，想要遍历整个 xml 数据并获取每条记录并插入数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:40:00.657

您可以这样做（例如）打印每个项目的标题：

```
 new XmlParser().parseText( xml ).channel.item.each {
   println it.title.text()
 } 
```

如果您将 xml 作为字符串。如果它不是一个字符串，你会[想要使用](http://groovy.codehaus.org/api/groovy/util/XmlSlurper.html#parse%28java.io.File%29)3 种形式中的一种`parse`来代替`parseText`

# javascript - JavaScript：原型函数的放置位置

> ID：11841259
> 
> 赞同：3
> 
> 时间：2012-08-07T07:34:56.380
> 
> 标签：javascript, prototype

我想知道这两种方法有什么区别。它们都有效，但我不明白第二种方法是否会产生不良影响？

```
// A. Putting a prototype method outside the function declaration (what I would normally do)
var Cat = function(){
}

Cat.prototype.eat = function(){
    // implementation
}

// B. Putting a prototype method inside the function declaration (it works too but the scoping seems different)
var Cat = function(){

    Cat.prototype.eat = function(){
        // implementation
    }   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T07:39:10.703

你可能想做第一个例子。两者都在做完全相同的事情，尽管从技术上讲，第二个函数将可以访问 Cat 的“私有”变量。但是，如果您想这样做，正确的方法是使用`this`：

```
var Cat = function(){
    var a = 'hi';

    this.eat = function() {
        alert(a); // Exists!
    }
} 
```

请记住，对于上面的示例，或者对于您原来的“B”示例，eat 函数将不存在，直到您使用`new Cat()`. 意思是，如果您只想调用`Cat.eat()`函数本身，例如实用程序方法，那么第一个示例`prototype`就是要走的路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T07:49:17.297

每个对象都有一个原型。原型继承允许您分配一个全新的原型（类似于经典继承）：

```
function Animal() {
    this.numLegs = 4;
}
function Cat() {
    // Implementation
}
Cat.prototype = new Animal();

var kitten = new Cat();
console.log(kitten.numLegs); // 4 
```

或者直接在当前类的原型中添加变量和方法：

```
function Cat() {
    // Implementation
}
Cat.prototype.numLegs = 4;

var kitten = new Cat();
console.log(kitten.numLegs); // 4 
```

您的第二个示例只是在`eat`每次`Cat`启动类时将函数重新分配给 Cat 原型，这是无用的，但不会占用任何内存，因为它只是覆盖了旧值。

为什么这很有用？请记住，函数是对象。对于类的每个实例，该类中定义的每个变量和函数都会占用它自己的内存。使用原型继承，您可以共享通用方法，从而不会为每个实例占用额外的内存。

为什么这不那么有用？您无权访问私有变量。

请记住，这与*静态*方法不同，可以将其声明为：

```
Cat.feed = function(kittens) {
    for (var kitten in kittens) {
        kitten.eat();
    }
}; 
```

# textmate - 将 TextMate 设置为对 PHP 使用 Allman 缩进

> ID：11841261
> 
> 赞同：0
> 
> 时间：2012-08-07T07:35:02.060
> 
> 标签：textmate, indentation

对于使用 TextMate (OS X) 编程 PHP，我希望它使用 Allman 缩进：

```
for($i = 0; $i < 1000; $i++)
{
    echo($i);
} 
```

而不是默认缩进：

```
for($i = 0; $i < 1000; $i++) {
    echo($i);
} 
```

我只能找到重新缩进现有代码的捆绑包，而不是默认情况下简单地使用此缩进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:18:43.163

结果很简单。只需先按`enter`，然后键入第一个花括号，如下所示：

1.  类型`for($i = 0; $i < 1000; $i++)`
2.  按`enter`
3.  键入左花括号`{`

然后代码将被格式化，如下所示：

```
for($i = 0; $i < 1000; $i++)
{
    echo($i);
} 
```

# amazon-web-services - 当 EBS 实例空间不足时如何提醒我？

> ID：11841262
> 
> 赞同：26
> 
> 时间：2012-08-07T07:35:13.343
> 
> 标签：amazon-web-services, monitoring, amazon-ebs, amazon-cloudwatch

我在 AWS 上运行 wordpress，我不知道如何监控卷是否容量不足。监控其他事情有很多选择，但我只想知道我们什么时候空间不足。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-07T07:52:07.343

没有内置的磁盘空间指标——因为亚马逊是“从外部”看待这个，他们不知道你对 EBS 卷做了什么：它可能是一个 raid 集的一部分，被格式化为一些异国情调格式等

Amazon 有一个名为[CloudWatch](http://docs.aws.amazon.com/AmazonCloudWatch/latest/DeveloperGuide/WhatIsCloudWatch.html)的系统，可用于监控 AWS 系统和资源。幸运的是，CloudWatch 支持自定义指标：您可以使用 CloudWatch API 添加您想要的任何数据（然后根据它们创建警报）。

Amazon 提供了一些[示例脚本](http://docs.aws.amazon.com/AmazonCloudWatch/latest/DeveloperGuide/mon-scripts.html)，这些脚本将（除其他外）向 Cloudwatch 发布磁盘空间利用率。请注意，使用自定义指标需要支付少量费用 - 每个指标每月 0.50 美元。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-18T19:17:05.920

我同意 Frederick Cheung 的回答；但是，我发现此实用程序适用于 Windows 实例：[http](http://www.eleven41.com/labs/cloudwatch-monitor-for-windows/) ://www.eleven41.com/labs/cloudwatch-monitor-for-windows/ 。它作为服务运行，并将为您将磁盘空间和内存使用情况指标发送到 CloudWatch。从那里，您只需要在 CloudWatch 中设置警报。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-08T22:04:46.437

我同意 Christopher Hinkle 同意 Frederick Cheung 的回答 :)

与其使用仍然必须自己设置所有警报的实用程序，不如尝试使用[Blue Matador](https://www.bluematador.com)。它将在所有挂载点和所有服务器上为您设置所有警报。

也就是说，您还应该关注更多的指标，而不仅仅是磁盘空间。有一个名为[如何使用 CloudWatch 监控 Amazon EBS](https://www.bluematador.com/blog/how-to-monitor-amazon-ebs-with-cloudwatch?utm_source=stack-overflow&utm_medium=social&utm_campaign=social-share)的指南，其中涵盖了所有指标以及您应该如何监控它们（如果您不使用 Blue Matador 来自动化它们）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-31T21:49:37.827

所选答案将不再有效，因为：

`The CloudWatch monitoring scripts are deprecated. We recommend that you use the CloudWatch agent to collect metrics and logs.`- [https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/mon-scripts.html](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/mon-scripts.html)

我发现本指南有助于设置自定义 cloudwatch 指标，例如磁盘监控： [https ://marbot.io/blog/monitoring-ec2-disk-usage.html](https://marbot.io/blog/monitoring-ec2-disk-usage.html)

上面唯一缺少的是设置 IAM 角色并将其附加到 EC2，此处为指南（先执行此操作，然后按照博客文章进行操作）：[https ://docs.aws.amazon.com/AmazonCloudWatch /latest/monitoring/create-iam-roles-for-cloudwatch-agent.html](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/create-iam-roles-for-cloudwatch-agent.html)

根据建议，以下总结步骤：

1.  在此处为每个链接设置 IAM 角色：[https ://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/create-iam-roles-for-cloudwatch-agent.html](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/create-iam-roles-for-cloudwatch-agent.html)
2.  将其附加到您要监控的 EC2
3.  SSH 进入你的 EC2
4.  光盘 /tmp
5.  wget [https://s3.amazonaws.com/amazoncloudwatch-agent/amazon_linux/amd64/latest/amazon-cloudwatch-agent.rpm](https://s3.amazonaws.com/amazoncloudwatch-agent/amazon_linux/amd64/latest/amazon-cloudwatch-agent.rpm)（下载代理rpm）
6.  sudo rpm -U amazon-cloudwatch-agent.rpm（安装）
7.  sudo vi /opt/aws/amazon-cloudwatch-agent/etc/amazon-cloudwatch-agent.json（编辑配置）
8.  粘贴配置（在链接中，无需更改）
9.  sudo systemctl restart amazon-cloudwatch-agent（重启代理）
10.  tail -f /opt/aws/amazon-cloudwatch-agent/logs/amazon-cloudwatch-agent.log （看看它是否工作）
11.  导航到 cloudwatch 控制台并根据将显示为 CWAgent 的自定义指标设置警报（这是配置中指定的名称，有关设置警报的确切方式的链接中的更多详细信息）

# java - TestNG：巨大的集合作为测试参数破坏了输出

> ID：11841264
> 
> 赞同：1
> 
> 时间：2012-08-07T07:35:23.753
> 
> 标签：java, testng

问题很简单：TestNG 将 DataProvider 方法发送的对象的所有 toString() 输出发送到 Test 方法。这可能会导致巨大的输出，如测试报告、TestNG 插件输出等，使它们无法读取，甚至导致 Firefox 崩溃。

问题：我可以配置TestNG，所以它不会toString（）我的脸吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:08:31.637

我做了一些调查，我很确定在数据提供者传递给测试方法的每个参数上都会调用 toString()。所以你不应该传递集合，或者你必须重写它们的 toString()。

# sql - 在 T-SQL 中使用 LIKE 是否有替代通配符？

> ID：11841267
> 
> 赞同：0
> 
> 时间：2012-08-07T07:35:32.667
> 
> 标签：sql, sql-server, tsql, wildcard, sql-like

我的查询查找包含特定标签的数据集，比如说：

```
 SELECT * FROM Authors
  WHERE Title LIKE @pattern 
```

其中@pattern 由用户定义。所以，`%abc%`会匹配`abcd`,`0abc`等。有时会有像这样的标签

1.  Xabc-ONE
2.  blaYabc-TWO-sometext
3.  Zabc-三
4.  blubXabc-四

我正在寻找包含 abc 和 ONE 或 TWO 的标签，例如`%abc%(ONE|TWO)%`. 可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-22T14:03:48.567

如果您使用的是 SQL Server，您可以启用全文搜索引擎并使用键盘 contains 和 near 查找 ONE 附近的 abc

我会在查询中说（伪代码）

```
Select something from table where CONTAINS(column_name, 'abc NEAR ONE') 
```

[http://msdn.microsoft.com/en-us/library/ms142568.aspx](http://msdn.microsoft.com/en-us/library/ms142568.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:47:18.313

也许我不明白你的问题，但为什么不简单

```
SELECT * FROM Authors
WHERE Title LIKE '%abc%ONE%' OR '%abc%TWO%' 
```

?

`LIKE`只是使用通配符进行搜索，仅此而已，因此实际上没有其他方法可以使用`LIKE`. 如果您需要更多，请查看[正则表达式](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)。但是请注意，它比`LIKE`您的情况要慢，并且绝对没有必要。

**更新：**

从评论“不想关心用户想要匹配的内容”......然后简单地这样做：

```
SELECT * FROM Authors
WHERE Title LIKE CONCAT('%', $userInput, '%ONE%') OR CONCAT('%', $userInput, '%TWO%') 
```

还是我还是没听懂你的意思？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T09:05:22.443

您可以通过 CLR 函数向 SQL Server 添加对正则表达式的支持，如[本答案](https://stackoverflow.com/a/3255424/1030)所示，但在您的环境中可能无法实现。请咨询您友好的系统管理员！

# c# - 我可以知道如何将 DataGridView 中新添加的数据插入数据库吗？

> ID：11841268
> 
> 赞同：0
> 
> 时间：2012-08-07T07:35:50.547
> 
> 标签：c#, sql, database, datagridview, insert

![在此处输入图像描述](../Images/357db1e3485f599a5d606c8b66ad556b.png)

我需要知道如何将新插入的数据行添加`DataGridView`到数据库中。无论如何插入行，当我单击更新按钮时，所有新插入的行都将插入到数据库中。

这是我的代码：

```
con = new System.Data.SqlClient.SqlConnection();
con.ConnectionString = "Data Source=tcp:SHEN-PC,49172\\SQLEXPRESS;Initial Catalog=LSEStock;Integrated Security=True";
con.Open();
SqlDataAdapter da = new SqlDataAdapter();

for (int i = 0; i>=dataGridView1.Rows.Count - 1; i++ )
{

    String insertData = "INSERT INTO CostList(SupplierName, CostPrice, PartsID) VALUES (@SupplierName, @CostPrice, '" + textBox1.Text + "')";
    SqlCommand cmd = new SqlCommand(insertData, con);
    cmd.Parameters.AddWithValue("@SupplierName", dataGridView1.Rows[i].Cells[0].Value);
    cmd.Parameters.AddWithValue("@CostPrice", dataGridView1.Rows[i].Cells[1].Value);
    cmd.Parameters.AddWithValue("@PartsID", textBox1.Text);
    da.InsertCommand = cmd;
    cmd.ExecuteNonQuery();
}

con.Close(); 
```

单击更新按钮后，上面的代码没有响应。没有错误但是数据库中没有插入任何东西，图中显示的数据是我数据库中已经存在的原始数据。

或者任何有更好的代码将所有新添加的数据行插入数据库的人，请告诉我。我会很感激的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T01:39:32.000

在您的 for 循环中，您正在使用 a`>=`当您应该使用 a`<=`

改变：

```
for (int i = 0; i>=dataGridView1.Rows.Count - 1; i++ ) 
```

至：

```
for (int i = 0; i<=dataGridView1.Rows.Count - 1; i++ ) 
```

所以你的 for 循环永远不会执行。如果您在调试器中跟踪代码，这应该很明显。

# cordova - 为什么 gps-logo 不显示在状态栏中？

> ID：11841269
> 
> 赞同：0
> 
> 时间：2012-08-07T07:35:51.210
> 
> 标签：cordova, gps, location

我使用 cordova-2.0.0 并希望定义用户位置的坐标。此外，我只想获得 gps 坐标，而不是网络。我该怎么做？为什么 gps-logo 不显示在状态栏中？

我的代码 index.html 脚本：

```
function onSuccess(position) {
        var element = document.getElementById('geolocation');
    element.innerHTML = 'Latitude: '+ position.coords.latitude + '<br />' +
                         'Longitude: '+ position.coords.longitude + '<br />';
    }

// onError Callback receives a PositionError object
    //
function onError(error) {
    var element = document.getElementById('geolocation');
    element.innerHTML = 'code: '    + error.code    + '\n' +
              'message: ' + error.message + '\n';
}

// Wait for PhoneGap to load
    document.addEventListener("deviceready", onDeviceReady, false);

// PhoneGap is ready
    function onDeviceReady() {
    navigator.geolocation.getCurrentPosition(onSuccess, onError);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:03:02.043

哦，这很容易。选项 - enableHighAccuracy: true。及其工作:)

```
function onDeviceReady() {
                // Update every 3 seconds
                var options = { frequency: 3000, enableHighAccuracy: true };
                watchID = navigator.geolocation.watchPosition(onSuccess, onError, options);
            } 
```

但是我如何使用cordova api定义提供者？例如：如果 gps 关闭，则应用程序会发出警报（“请打开 gps！”）；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T16:57:05.377

If you can't see the GPS logo in the Status-bar, it's because GPS doesn't start. Maybe one JS-file is not loaded ?

Cordova/phonegap is not native code, there are only three options you could put on watchPosition() function : maximumAge, timeout and enableHighAccuracy (to use GPS). You can just set enableHighAccuracy at true to use GPSProvider and not NetworkBaseProvider. Maybe you can analyse the error message in onError function to look at if a special message is sent when GPS is disabled.

**Edit :** In my test, no special message appaers, just a timeout message : "Position retrieval timed out." So I think you can't check if GPS is on or off in cordova...

In my opinion, Cordova/phonegap (and all the "crossplatforms" technologies) is not a good choice to develop an app using GPS and others managers like TelephonyManager.

**Nothing can replace native code for that.**

I have an other problem : GPS dont stop when I use clearWatch(): Here, my code :

```
var currentTracking = false;
var idwatch = null;

function switchTracking() {
    //when button is pressed to start GPS
    if (!currentTracking) {
        currentTracking = true;
        document.getElementById('switchTracking').value = "Stop GPS"
        tracking();
    }

    //when button is pressed to stop GPS
    else {
        navigator.geolocation.clearWatch(idwatch);
        currentTracking = false;
        document.getElementById('switchTracking').value = "Start GPS"
    }
}

function tracking() {
    if (currentTracking) {
        idwatch = navigator.geolocation.watchPosition(onSuccess, onError,{  timeout: 5000, enableHighAccuracy: true });
    }
    else{
        navigator.geolocation.clearWatch(idwatch);
    }
}

function onSuccess(position) {
   // alert("Gps");

    var lat = document.getElementById('lat');
    var long = document.getElementById('long');
    lat.innerHTML = position.coords.latitude;
    long.innerHTML = position.coords.longitude;
}

// onError Callback receives a PositionError object
//
function onError(error) {
    alert('code: ' + error.code + '\n' +
            'message: ' + error.message + '\n');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T06:14:38.390

对于您更新的要求，您必须创建一个本机插件来检查 GPS 状态，并根据状态在您的 html 页面中发出警报。

访问[此处](http://www.adobe.com/devnet/html5/articles/extending-phonegap-with-native-plugins-for-android.html)获取有关在 android 上创建本机插件的教程。

# php - Zend Framework 自定义路由设置

> ID：11841270
> 
> 赞同：1
> 
> 时间：2012-08-07T07:35:54.763
> 
> 标签：php, zend-framework, frameworks, routes

```
Zend2 
  Sources Files
     Application
        modules 
            default
               controllers 
                   ExampleController.php
               views
                   scripts 
                      form 
                         index.phtml

        library
          square
             form
                Form_Example.php 
```

大家好，我正在研究 Zend 框架：初学者指南第 3 章，我在 Square/Form/Form_Example.php 中有一个 form_example 类，它基本上有一个表单。

modules/default/controllers/ExampleControllers.php 初始化它。但是，我设置

```
resources.router.routes.example.route = /example
resources.router.routes.example.defaults.module = default           
resources.router.routes.example.defaults.controller = form
resources.router.routes.example.defaults.action = form 
```

在应用程序.ini

当我输入（http://localhost/zend2/public/example）时，它返回一个页面未找到结果，请帮助我以显示我在 Form_Example 中创建的表单

谢谢，我真的很感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:04:26.483

我为路由使用单独的文件，采用这种格式并将其命名为 routes.ini

```
routes.example.route = /example
routes.example.defaults.module = default           
routes.example.defaults.controller = form
routes.example.defaults.action = form 
```

在您的引导程序中，您需要这样的东西：

```
$front = Zend_Controller_Front::getInstance();
$router = $front->getRouter();     
$config = new Zend_Config_Ini(APPLICATION_PATH . '/configs/routes.ini', 'production');      
$router->addConfig($config,'routes'); 
```

我发现使用不同的路由文件可以使我的主 .ini 文件不那么复杂，而且更容易理解。

# database - 使用数据库连接的 JSR303 验证

> ID：11841274
> 
> 赞同：1
> 
> 时间：2012-08-07T07:36:14.233
> 
> 标签：database, bean-validation

一般问题：

这是使用 JSR303 bean 验证，Hibernate 参考实现。

假设我有一组自定义验证；其中一些需要数据库连接（注意：我们没有使用 Hibernate 进行 DB 元素映射，所以很遗憾这不是一个选项）。例如，我可能想在持久性之前验证外键。

无论如何，在将数据库连接传递给 Validator.validate(obj) 方法时，我看不到一种方法，以便使其可用于验证实现。出于会话一致性的原因，此连接必须与调用代码中使用的连接相同，这一点很重要。

有任何想法吗..？我真正需要的只是一种将任何类型的运行时值放入验证器实现的方法。

谢谢，

安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T21:17:40.213

您可以创建一个自定义[ConstraintValidatorFactory](http://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#d0e2697)来实例化和配置`ConstraintValidator`对象。该工厂可以将所需的依赖项（例如数据库连接）传递给创建的约束验证器。

如果您使用 CDI 来连接您的应用程序，您可能会对[Seam Validation](http://docs.jboss.org/seam/3/latest/reference/en-US/html/validation-dependency-injection.html#d0e11441)（免责声明：我是作者）感兴趣，它为基于 CDI 的验证器提供依赖注入。如果您使用的是 Spring 框架，您还可以在约束验证器实现中[使用](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/validation.html#validation-beanvalidation-spring-constraints)依赖注入。

# java - 图像视图在 Android 上为图像添加垂直空间

> ID：11841276
> 
> 赞同：0
> 
> 时间：2012-08-07T07:36:22.917
> 
> 标签：java, android

如何在图像视图中缩放图像？目前我按照此线程中给出的其他建议在 Imageview 中设置图像，但它正在向表单菜单项中的图像集添加垂直空间。我只想查看菜单项中图像的高度。有人可以在这个问题上帮助我吗？

注意：我将图像动态添加到视图中，并且它不会出现在包资源文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:51:33.657

通常，如果要缩放图像，请将其转换为`Bitmap`第一个（如果它是资源），并使用 Bitmap 类的静态方法`createScaledBitmap()`。

前任：

```
Bitmap originalBitmap=BitmapFactory.decodeResource(getResources(), R.drawable.my_image);
Bitmap scaledBitmap=Bitmap.createScaledBitmap(originalBitmap, newWidth, newHeight, false);

imageView.setImageBitmap(scaledBitmap); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T07:54:45.357

垂直空间是什么意思？它是填充吗？如果是，您可以使用 view.setpadding(int left,int top,int right,int bottom) 进行设置

[http://developer.android.com/reference/android/view/View.html#setPadding(int](http://developer.android.com/reference/android/view/View.html#setPadding(int) , int, int, int)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T07:53:17.450

尝试：

```
android:fillViewport="true" 
```

并且可能使用不同的ScaleType ...

# objective-c - 如何连接到wifi

> ID：11841277
> 
> 赞同：4
> 
> 时间：2012-08-07T07:36:30.470
> 
> 标签：objective-c, ios, cocoa-touch, wifi, connect

可以做到吗？可以打开wifi设置，但我不知道如何连接到特定的wifi网络。

这段代码：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs:root=WIFI"]]; 
```

打开 iPhone wifi 设置对话框。有没有办法组成 URL 名称？例如 `"prefs:root="WIFI&path=wifi_name"...`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:53:06.657

这在应用程序中是可能的，但我相信苹果指南不允许这样做。您应该检测是否存在通过 WWAN 或 WiFi 的网络连接，或者您是否可以通过 URL 连接到特定主机。请参阅[Apple 可达性代码](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)，了解 Apple生成的可达性代码的完整实现。所以这已经为你完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T07:44:49.813

由于涉及安全风险，我不认为这是可能的。想象一个在您不知情和未经许可的情况下扰乱您的 WiFi 设置的应用程序。

# javascript - 需要在选择单选按钮时启用提交按钮

> ID：11841282
> 
> 赞同：1
> 
> 时间：2012-08-07T07:36:56.740
> 
> 标签：javascript, jquery

我有一个小表格。我想在选择所有单选按钮时启用提交按钮。

下面是我的代码html

```
<form action="#" id="form1" method="post">
                <ul>
                    <li>
                        <h3>Here’s what I want:<strong class="result1"></strong></h3>
                        <div>
                        <span><input type="radio" value="Cash Back rewards" name="want" id="01"  /><label for="01">Cash Back rewards</label></span>
                        <span><input type="radio" value="Travel rewards" name="want" id="02" /><label for="02">Travel rewards</label></span>
                        <span><input type="radio" value="Gas rewards" name="want" id="03" /><label for="03">Gas rewards</label></span>
                        <span><input type="radio" value="Shopping rewards" name="want" id="04" /><label for="04">Shopping rewards</label></span>
                    </div>
                    </li>

                    <li>
                        <h3>Here’s my credit story: <strong class="result2"></strong></h3>
                        <div>
                        <span><input type="radio" value="I’m new to credit" name="story" id="05" /><label for="05">I’m new to credit</label></span>
                            <span><input type="radio" value="I pay my bills on time" name="story" id="06" /><label for="06">I pay my bills on time</label></span>
                        <span><input type="radio" value="I’ve had credit issues in the past" name="07" id="issues" /><label id="07">I’ve had credit issues in the past</label></span>
                        </div>
                    </li>

                    <li>
                        <h3>Here’s what I carry:</h3>
                        <span><input type="radio" value="I have a credit card with a good record" name="carry" id="08" /><label for="08">I have a credit card with a good record</label></span>
                        <span><input type="radio" value="I don’t have a credit card with a good record" name="carry" id="09" /><label for="09">I don’t have a credit card with a good record</label></span>

                    </li>
                </ul>
                <input type="submit" value="" name="" class="find" />
                </form> 
```

我在javascript方面很弱，请告诉我。

如果 li 不修复，另一件事将动态生成，所以我将不得不做。基本上每个 li 都是一个问题，单选按钮是选项。所以问题将动态生成，它可以是任何否。它不修复

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T07:40:41.467

像这样的东西可以解决问题：

```
$('#form1 :radio').click(function() {
    var disabled = $('#form1 li').filter(function() { return $(':radio:checked', this).length == 0; }).length > 0;
    $('#form1 .find').prop('disabled', disabled);
}); 
```

这假设您的提交按钮在页面加载时被禁用，因为禁用状态仅在选中选项时才会更改。您当然可以在 DOMReady 期间进行相同的检查（在这种情况下，我将提取侦听器函数），但我更喜欢在加载期间手动设置标记。

[演示](http://jsfiddle.net/WmWck/)

通过选择表单中的所有元素，将其减少为仅满足过滤条件*“不包含选中的单选按钮”*的元素，并检查减少的集合中是否有任何元素`disabled`来设置变量。`li`

 *如果您使用的 jQuery 版本低于 1.6，请使用`.attr`而不是`.prop`设置禁用状态。*

# c - 如何将客户端重定向到不同的 URL？

> ID：11841290
> 
> 赞同：1
> 
> 时间：2012-08-07T07:37:41.153
> 
> 标签：c, sockets, redirect

我想将访问我的端口 80 的客户端重定向到某个 URL [例如：www.google.com]。并且重定向的 URL 也需要在浏览器地址栏中进行更改。

目前我正在使用以下代码，

```
#include<netinet/in.h>    
#include<stdio.h>    
#include<stdlib.h>    
#include<sys/socket.h>    
#include<sys/stat.h>    
#include<sys/types.h>    
#include<unistd.h>    

int main() {    
int create_socket, new_socket;    
socklen_t addrlen;    
int bufsize = 1024;    
char *buffer = malloc(bufsize);    
struct sockaddr_in address;    

if ((create_socket = socket(AF_INET, SOCK_STREAM, 0)) > 0){    
  printf("The socket was created\n");
}

address.sin_family = AF_INET;    
address.sin_addr.s_addr = INADDR_ANY;    
address.sin_port = htons(15000);    

if (bind(create_socket, (struct sockaddr *) &address, sizeof(address)) == 0){    
  printf("Binding Socket\n");
}

while (1) {    
  if (listen(create_socket, 10) < 0) {    
     perror("server: listen");    
     exit(1);    
  }    

  if ((new_socket = accept(create_socket, (struct sockaddr *) &address, &addrlen)) <  
0) {    
     perror("server: accept");    
     exit(1);    
  }    

  if (new_socket > 0){    
     printf("The Client is connected...\n");
  }

  recv(new_socket, buffer, bufsize, 0);    
  printf("%s\n", buffer);    
  write(new_socket, "hello world\n", 12);    
  close(new_socket);    
}    
close(create_socket);    
return 0;    
} 
```

此代码仅在浏览器窗口中打印 hello world。但我需要的是，客户端应该重定向到其他 URL，并且重定向的 URL 应该在客户端浏览器地址栏中更改...我该如何实现？..请提供示例代码...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:53:30.523

改变：-

```
write(new_socket, "hello world\n", 12); 
```

至

```
write(new_socket, "HTTP/1.1 301 Moved Permanently\r\nLocation: http://www.google.com\r\n <!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\"><html><head><title>Your Page Title</title><meta http-equiv=\"REFRESH\" content=\"0;url=http://www.google.com\"></HEAD><BODY>Optional page text here.</BODY></HTML>", 326); 
```

# asp.net - 将时间变量显示为 am/pm

> ID：11841292
> 
> 赞同：0
> 
> 时间：2012-08-07T07:37:54.980
> 
> 标签：asp.net, sql-server-2008, c#-4.0

我有数据类型的数据库列`Time`（例如`08:00:00.0000000`：）

我正在读取程序中的值并将其移动到声明如下的变量中

```
public string vartime{get;set;} 
```

在程序中读取数据时，它是有价值的。

```
((TimeSpan)(dr["dates"])).ToString()    "08:00:00"  string 
```

我需要`08:00 am`在网格中显示这些值。此外，该值`16:00:00.0000000`应显示为`04:00 pm`。

在给`vartime=((TimeSpan)(dr["dates"])).ToString("hh:mm tt")`时，它给了我一个错误，因为输入的格式不正确。

请让我知道如何格式化 Time 变量以使用 am/pm 显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:51:16.327

在 sql server 中，你可以这样做：

```
 declare @time datetime='16:00:00';
  SELECT substring(convert(varchar(20), @time, 9), 13, 5) 
        + ' ' + substring(convert(varchar(30), @time, 9), 25, 2) 
```

**结果**

```
 4:00 PM 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-18T01:45:49.673

您可以通过将时间跨度添加到日期时间来做到这一点，例如，

```
 TimeSpan timespan = new TimeSpan(03,00,00);
    DateTime time = DateTime.Today.Add(timespan);
    string displayTime = time.ToString("hh:mm tt"); 
```

而不是 03,00,00 你可以直接传递你的时间跨度变量

# bltoolkit - 如何使用 BLToolkit 添加父子关系

> ID：11841293
> 
> 赞同：0
> 
> 时间：2012-08-07T07:37:54.960
> 
> 标签：bltoolkit

我想通过使用 BLToolkit 在父/子关系中的一组表中添加一些新记录。不幸的是，我无法弄清楚我错过了什么，因为在提交之后，我的数据库中只有父行。

当我在将父对象添加到父对象列表之前检查父对象时，它包含预期的子对象。我很确定我在 SQLQuery-Bit 中遗漏了一些东西，但我不知道是什么。

这是我设置的东西。

*   创建表的sql代码

```
 CREATE TABLE [dbo].[PARENTS](
        [ID] [int] IDENTITY(1,1) NOT NULL,
        [SOME_VALUE] [int] NOT NULL,
        CONSTRAINT [PK_PARENT] PRIMARY KEY CLUSTERED 
        (
            [ID] ASC
        )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
    ) ON [PRIMARY]

    CREATE TABLE [dbo].[CHILDS](
        [ID] [int] IDENTITY(1,1) NOT NULL,
        [PARENT_ID] [int] NOT NULL,
        [SOME_TEXT] [nvarchar](50) NOT NULL,
        CONSTRAINT [PK_CHILD] PRIMARY KEY CLUSTERED 
        (
            [ID] ASC
        )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
    ) ON [PRIMARY]

    GO

    ALTER TABLE [dbo].[CHILDS]  WITH CHECK ADD  CONSTRAINT [FK_CHILD_PARENT] FOREIGN KEY([PARENT_ID])
    REFERENCES [dbo].[PARENTS] ([ID])
    GO

    ALTER TABLE [dbo].[CHILDS] CHECK CONSTRAINT [FK_CHILD_PARENT] 
```

*   班级

```
[TableName("PARENTS")]
public class Parent
{
    public Parent()
    {
        Children = new List<Child>();
    }

    [MapField("ID"), PrimaryKey, NonUpdatable]
    public int Id;

    [MapField("SOME_VALUE")]
    public int SomeValue;

    [Association(ThisKey = "ID", OtherKey = "PARENT_ID", CanBeNull = false)]
    public List<Child> Children;
}

[TableName("CHILDS")]
public class Child
{
    [MapField("ID"), PrimaryKey, NonUpdatable]
    public int Id;

    [MapField("SOME_TEXT")]
    public string SomeText;

    [Association(ThisKey = "PARENT_ID", OtherKey = "ID", CanBeNull = false)]
    public Parent Parent;
} 
```

*   插入行的代码

```
using (DbManager db = new DbManager())
{
    db.BeginTransaction();
    SqlQuery<Parent> query = new SqlQuery<Parent>();

    IList<Parent> parents = new List<Parent>();
    for (int i = 0; i < 10; i++)
    {
        Parent parent = new Parent();
        parent.SomeValue = i;

        Child child = new Child();
        child.SomeText = i.ToString();

        parent.Children.Add(child);
        parents.Add(parent);
    }
    query.Insert(db, 10, parents);
    db.CommitTransaction();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:01:47.667

您的代码没有任何问题。BLToolkit 是一个轻量级的 ORM，这意味着它不会跟踪对象的状态。这与 EF、L2SQL、NHibernate 等其他 ORM 不同。在 BLToolkit 中，您直接使用数据库。你应该做的是：

1.  插入 Parent 并获取它的身份。
2.  然后插入孩子并将其设置为父ID。

此外，当您插入/更新或删除时，请在 try/catch 中执行此操作，如下所示

```
using (DbManager db = new DbManager())
{
    try
    {
        db.BeginTransaction();

        // do something here...

        db.CommitTransaction();
    }
    catch
    {
        db.RollbackTransaction();
    }
} 
```

# jquery - 如何防止 jquery ui datepicker 填充文本字段？

> ID：11841296
> 
> 赞同：0
> 
> 时间：2012-08-07T07:37:58.677
> 
> 标签：jquery, jquery-ui

```
$( ".datepicker_1" ).datepicker({
            numberOfMonths: 2,
            showButtonPanel: false,
            minDate: new Date('<?php echo $st_date_sh.' '.$st_month_sh.', '.$st_year_sh?> 00:00:00'),   //line 88
            maxDate: new Date('<?php echo $en_date_sh.' '.$en_month_sh.', '.$en_year_sh?> 12:00:00'),   //line 88           
            showOn: "button",
            buttonImage: "images/Cal.gif",
            buttonImageOnly: true,
            /*beforeShowDay:function(dt){
                return [(dt.getDay()==0)?false:true];
            },*/
            onSelect: function(dateText, inst) {
                var dt_txt = dateText.replace('-','/');
                dt_txt = dt_txt.replace('-','/');
                var tmp_dt =  new Date(dt_txt);
                if(tmp_dt.getDay()==0)
                {
                    if(confirm("Are you certain you want to assign Sunday delivery date?"))
                    {
                        //$(this).closest("tr").find(".update_quote_row").click();
                    }
                    else
                    {
                        return false;
                    }
                }
            }

        }); 
```

我想要做的是，如果用户尝试选择星期日，则应显示确认，并且仅在确认选择后才会填充相关的文本字段。但是，使用我的代码，无论我确认还是取消，文本字段都会更改为所选值，我需要防止这种情况发生。我也不能简单地将输入字段设置为空白，因为如果用户取消确认，可能存在不应修改的现有值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:57:41.970

您可以将 textfield 的先前值存储在某个变量中并相应地工作，例如：

```
var prevVal = $.trim( $("input.datepicker_1").val() );
$( ".datepicker_1" ).datepicker({
    numberOfMonths: 2,
    showButtonPanel: false,
    ......
    onSelect: function(dateText, inst) {
         var dt_txt = dateText.replace('-','/');
         dt_txt = dt_txt.replace('-','/');
         var tmp_dt =  new Date(dt_txt);
         if(tmp_dt.getDay()==0) {
           if(confirm("Are you certain you wa...")) {
              return true;
           }
           else {
              //show previous value
              $(".datepicker_1").val(prevVal);
           }
          ......... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T07:53:27.823

这是一个想法：

1.  将您的日期选择器分配给一个 div。[请参阅http://jqueryui.com/demos/datepicker/#inline](http://jqueryui.com/demos/datepicker/#inline)中的“显示内联”示例
2.  单击输入字段，显示 div。确保在显示之前将输入字段中的日期（如果存在）复制到 datepicker div
3.  然后您可以相应地选择您的日期，并且输入字段中的日期不会改变。
4.  获取所需日期后，单击提交按钮并将日期选择器上的日期分配给输入字段并隐藏 div。

# spring-data - 管理来自多个表的数据 Spring data JPA

> ID：11841297
> 
> 赞同：1
> 
> 时间：2012-08-07T07:38:01.313
> 
> 标签：spring-data, spring-data-jpa

在应用程序中使用 Spring Data JPA 时，您通常会定义实体 (@Entity) 并编写存储库接口（扩展 CrudRepository）并执行一些超出此问题范围的额外配置。

例如，

```
@Entity
public class Product {
    // code removed for brevity
}

public interface ProductRepository extends CrudRepository<Product, Long> {
    // code removed for brevity
} 
```

现在，如果我有多个像上面这样的实体并且需要设计一个像 searchByProductAndUserAndLocation 这样的服务 API（比如说所有三个都是数据库表），我应该如何在 Spring data JPA 中这样做？假设我也为 Quantity/Cost 编写实体类。显然，我需要根据某些条件（使用外键）加入表，但我不清楚哪个存储库应该保存此类查询，因为我觉得这里没有特定的*所有者*存储库/类。

此外，我可以通过 ProductService、LocationService 等公开数据，然后组合结果，但我不会使用数据库层连接或其他最终影响应用程序性能的优化。

我确定这是一个非常常见的用例，一般做法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T05:01:24.473

我相信根据方法的返回类型将您的方法分配给存储库是合理的，例如：

```
public interface ProductRepository extends CrudRepository<Product, Long> {
  List<Product> searchByUserAndLocation(User user, Location location); 
} 
```

# iphone - 如何在阅读 e-pub 格式的书时进行分页（就像 iBook 显示分页一样）？

> ID：11841299
> 
> 赞同：2
> 
> 时间：2012-08-07T07:38:08.533
> 
> 标签：iphone, objective-c, ios

我需要显示 e-pub 书籍，因此我使用 webview 来显示 e-pub 书籍，并且我能够按章节而不是按页面显示书籍。任何人都可以帮助我，以便我可以对 epub 进行分页

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:49:49.433

要对 ePub 进行分页，您必须广泛使用 WebView 和带有自定义 CSS 的列布局。以下是每章的典型工作流程：

1.  `width`使用所需的和创建内存中或屏幕外 WebView 组件`height`；
2.  加载带有注入`<script src="[local path]"></script>`标签的章节 HTML；
3.  JavaScipt 代码应`div`使用 DHTML 将整个内容包含在一个标记中；
4.  `column-width`此外，JavaScript 应该为该`div`标签注入带有属性集的 CSS ；
5.  当 WebKit 引擎完成渲染时，您会收到 JavaScript 中的事件；
6.  收到事件后，就该计算 HTML 中有多少页面了：`clientWidth / width`.

然后，您可以使用相同的技术将 ePub 渲染到 UIViewController 中，但这次是在屏幕上。在渲染 ePub 中的页面数时，您可能希望显示进度指示器。

# android - 异步 doInBackground 没有被调用

> ID：11841303
> 
> 赞同：1
> 
> 时间：2012-08-07T07:38:31.047
> 
> 标签：android, android-asynctask

在下面的类中，使用异步内部类函数 doInBackground 没有被命中。在调用 rpi.excute 然后尝试通过 HTTP 下载的 getQuestionnaireBO 获取数据时，我在 AndroidManifest.xml 和其他配置中拥有 Internet 权限

```
public class RestApiClient {
    private final static String SERVICE_URI = "http://182.50.154.23/Dattab.Device.Rest/ServiceClass/RestDeviceService.svc";
    private QuestionnaireBO resultQuestionnaireBO ;
    public void Questionnairedownload(int QuestionnaireId ) {
        String url=SERVICE_URI+"/DownloadQuestionnaireData/"+QuestionnaireId;
        // InputStream source = retrieveStream(url);
        // Gson gson = new Gson();
        // Reader reader = new InputStreamReader(source);
        // QuestionnaireBO response = gson.fromJson(reader, QuestionnaireBO.class);
        ChildThreadQuestionnairedownload ctqd = new ChildThreadQuestionnairedownload();
        ctqd.execute(url);

        // return null ;        
    }

    public QuestionnaireBO getQuestionnaireBO() {
        return resultQuestionnaireBO;
    }

    private class ChildThreadQuestionnairedownload extends AsyncTask<String,Integer,QuestionnaireBO> {

        @Override
        protected QuestionnaireBO doInBackground(String... params) {
             String url=params[0];
             Gson gson = new Gson();
             DefaultHttpClient client = new DefaultHttpClient();                     
             HttpGet getRequest = new HttpGet(url);
             try {
                 HttpResponse getResponse = client.execute(getRequest);
                 final int statusCode = getResponse.getStatusLine().getStatusCode();

                 if(statusCode != HttpStatus.SC_OK) {
                      Log.w(getClass().getSimpleName(),
                            "Error " + statusCode + " for URL " + url);
                      return null;
                 }

                 HttpEntity getResponseEntity = getResponse.getEntity();
                 Reader reader = new InputStreamReader(getResponseEntity.getContent());
                 QuestionnaireBO response = gson.fromJson(reader, QuestionnaireBO.class);

                  return response ;
             }
             catch(IOException e){
                  e.printStackTrace();
                  return null;
             }

         }

         protected void onPostExecute(QuestionnaireBO response) {
             resultQuestionnaireBO=response;
         }

     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:45:13.647

我看不出有什么理由`doInBackground()`不被调用。

这可能是一个转储，但是......你确定你有互联网连接吗？
有时，如果您使用的是 wi-fi，则可能会丢失连接，而如果您使用的是 3G，则可能是您花光了所有的钱。所以，不能上网。

# php - 在 zencart 中启用自定义模板

> ID：11841307
> 
> 赞同：0
> 
> 时间：2012-08-07T07:38:48.690
> 
> 标签：php, zen-cart

[安装 zencart 后，我​​使用 zencart 站点链接http://www.zen-cart.com/content.php?180-how-do-i-create-a-new-custom-template](http://www.zen-cart.com/content.php?180-how-do-i-create-a-new-custom-template)的说明创建了一个自定义模板. 但是当我去 admin-> Tools->Template Selection 并更新新创建的模板并按 admin->Tools-> Layout Boxes Controller 的重置底部时，我无法处理新模板。我怎么知道新模板已启用并准备好进行自定义。

* * *

实际上我想知道启用已解决的自定义模板的过程。所以唯一的错误是我的网站是我命名了模板目录和模板名称（在信息文件中）区分大小写不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T02:45:17.077

抱歉，“我无法使用新模板”并不是一个真正的问题。

您唯一的“问题”是“我怎么知道新模板已启用并准备好装扮”。答案是：已经是了。根据您引用的链接的常见问题解答文章中的指南，从管理->工具->模板选择中选择您的模板，然后在布局框控制器中打开所需的边框......模板在您的网站上可见并正常运行。

如果您真正的问题是“我如何定制？”，还有许多其他常见问题解答文章解释了您可能想要定制的许多可能事物的许多概念。您没有说明您想要定制的任何具体内容，因此我们无法真正回答您的“问题”，并提供这方面的任何具体内容。

冒着被告知我的“答案”并不是真正的答案的风险，我建议您访问[www.zen-cart上的 Zen Cart 支持论坛以获得有关您希望进行的自定义的指导帮助的正确位置.com/forum.php](http://www.zen-cart.com/forum.php)

# c# - TXT-File - 用 c# 分割不同的内容

> ID：11841314
> 
> 赞同：0
> 
> 时间：2012-08-07T07:39:35.993
> 
> 标签：c#, split, streamreader

我在将 txt 文件导入数据库时​​没有什么问题。文件的结构有点困难。第一行只有如下描述：

*   典型假人
*   状态就绪
*   3号等等。

在描述（20 到 22 行之间）之后是一个表格，如下所示：

```
PartStatus    Result  Measurement1      Measurement2      .....
900           OK      0                 20                .....
600           Passed  30                400               ..... 
```

我不知道，表格从哪一行开始。读取和处理文件以将其写入数据库的最佳方法是什么？

目前我使用 StreamReader 并将每个字符串添加到数据表中。

问候

阿明

样本文件： [测试文件](http://pastebin.com/DMiV3b1r)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:53:49.897

您可以使用[TextFiledParser](http://msdn.microsoft.com/en-us/library/ms128079)类并跳过无效行。

```
using (var reader = new TextFieldParser(@"c:\YourFile"))
{
    reader.TextFieldType = FieldType.Delimited;
    reader.Delimiters = new string[] {","};
    string[] currentRow = null;
    while (!reader.EndOfData)
    {
        try
        {
            currentRow = reader.ReadFields();
            // do something with the values
        }
        catch (MalformedLineException ex)
        {
            // skip invalid lines and handle it
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T07:47:26.107

试试这个：[文件助手](http://filehelpers.sourceforge.net/)。我过去曾涉足过它，这可能会简化读取 CSV 的过程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T08:00:49.860

[Codeplex 上的CommonLibrary.NET](http://commonlibrarynet.codeplex.com/)项目中也有专门的 CSV 解析支持。[您可以在此处](http://commonlibrarynet.codeplex.com/wikipage?title=Examples&referringTitle=Home&ANCHOR#Csv)找到使用此库进行 CSV 解析的示例。

**更新**

下面是一些代码，可用于解析与上面类似的文本，并使用*CommonLibrary.NET*。注意，原文首先被截取到表头（`origText.Substring(origText.IndexOf("PartStatus"))`）处，正则表达式匹配用于将一个或多个连续的空格字符替换为单个逗号（`Regex.Replace(sometext, "[ ]+", ",")`）：

```
var origText =
    "Type Dummy\n" +
    "Status Ready\n" +
    "# Comment line\n" +
    "# Another comment line\n" +
    "PartStatus    Result  Measurement1      Measurement2\n" +
    "900           OK      0                 20\n" +
    "600           Passed  30                400\n";

var trimmedText = 
    Regex.Replace(origText.Substring(origText.IndexOf("PartStatus")), 
                  "[ ]+", ",");

var csvDoc = Csv.LoadText(trimmedText, true, false, ",");

Console.WriteLine(csvDoc.Get<int>(1, "Measurement2"));
Console.WriteLine(csvDoc.Get<string>(0, "Result")); 
```

将产生输出：

```
400
OK 
```

*CommonLibrary.NET*的 CSV 解析组件还提供了一种将 CSV 数据转换为*ADO.NET* `DataTable`的简单方法：

```
var table = csvDoc.ToDataTable(); 
```

# ios - 获取 UIBarButtonItem 的框架

> ID：11841315
> 
> 赞同：0
> 
> 时间：2012-08-07T07:39:42.437
> 
> 标签：ios, frame, uibarbuttonitem, uipopover

我在 NavigationBar 中创建了一个 UIBarButtonItem：

```
UIBarButtonItem *filtroFecha = [[[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemSearch target:self action:@selector(filtrarFecha:)]autorelease];

    self.navigationItem.rightBarButtonItems = [NSArray arrayWithObjects: addActivity, filtroFecha, nil]; 
```

现在我想从此按钮打开一个弹出窗口，但我无法获得 UIBarButtonItem 的框架。

```
if (_filtroActividadesView == nil) {
        self.filtroActividadesView = [[CRMFiltroActividadViewController alloc] init];
        _filtroActividadesView.delegate = self;
        self.filtroPopover = [[UIPopoverController alloc] 
                                  initWithContentViewController:_filtroActividadesView];               
    }

    [self.filtroPopover presentPopoverFromRect:CGRectMake(0, 0, 1400, 44) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES]; 
```

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T07:58:52.893

使用`presentPopoverFromBarButtonItem:permittedArrowDirections:animated:`.

`[self.filtroPopover presentPopoverFromBarButtonItem:filtroFecha permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];`

# java - 监控每个线程的内存使用情况

> ID：11841318
> 
> 赞同：2
> 
> 时间：2012-08-07T07:39:52.063
> 
> 标签：java, memory, profiling, jmx, visualvm

如何监控应用程序每个线程的内存使用情况？
我尝试了 VisualVM，但它说内存采样不可用。
我还能尝试什么？（注意我使用的是 IBM JDK）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:48:36.440

使用JAVA_HOME\bin 或[JVM Monitor](http://www.jvmmonitor.org/index.html)工具中的[jconsole 。](http://docs.oracle.com/javase/1.5.0/docs/guide/management/jconsole.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:33:05.490

YourKit is the simplest option

# c++ - Autoconf AC_CHECK_SIZEOF 在 CentOS 上总是 0

> ID：11841319
> 
> 赞同：3
> 
> 时间：2012-08-07T07:39:53.747
> 
> 标签：c++, centos, autoconf

我在 CentoOS 6.3 32 位上使用 GNU Autoconf 2.63。在我的配置脚本中，我检查了某些类型的大小，例如：

```
AC_CHECK_SIZEOF(char)
AC_CHECK_SIZEOF(int)
AC_CHECK_SIZEOF(long) 
```

，但结果总是`0`在运行时`./configure`：

```
checking size of char... 0
checking size of int... 0
checking size of long... 0 
```

不过，相同的配置在 Mac OS X SL 和 Ubuntu 上运行良好。

任何想法为什么要`AC_CHECK_SIZEOF`返回`0`CentOS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T20:20:12.753

似乎是我链接的一个库丢失了，当我将正确的符号链接添加到该库时，它`AC_CHECK_SIZEOF`返回了正确的值。

解决方案在这里找到：http: [//lists.gnu.org/archive/html/bug-autoconf/2012-08/msg00009.html](http://lists.gnu.org/archive/html/bug-autoconf/2012-08/msg00009.html)

# r - 制作一个绘制绘图并保存它的函数

> ID：11841320
> 
> 赞同：5
> 
> 时间：2012-08-07T07:39:59.533
> 
> 标签：r, ggplot2

我有以下数据集。

```
structure(list(Rf = c(60.105, 62.205, 64.305, 64.305, 66.405, 
66.405), Es = c(0, -0.07, -0.36, -0.47, -0.39, -1.54), H = c(32.3, 
-6.9, -5.59, -14.4, -6.5, -21), S = c(267, 136, 151, 114, 143, 
90.4), G = c(-46.8, -47.3, -50.7, -48.5, -49, -47.8)), .Names = c("Rf", 
"Es", "H", "S", "G"), class = "data.frame", row.names = c("Me", 
"Et", "Pr", "iPr", "Bu", "tBu")) 
```

我需要绘制 Rf vs H、S 和 G，对于 Es 列也是如此。总共有六个地块。

要绘制单个图，我使用以下函数：

```
ggplot(data=df, aes(x=Rf, y=H, label=row.names(df))) + 
  geom_point(size=4) +
  geom_text(vjust=2) + 
  ylab(expression(list(Delta*H^o,~kJ/mol))) + 
  xlab("Molecular refraction") + 
  ylim((min(df$H) - 0.2*(abs(min(df$H)))), max(df$H)) + 
  opts(axis.line = theme_segment(size=1),
       axis.text.x = theme_text(colour="black", size=15),
       axis.text.y = theme_text(colour="black", size=15),
       axis.title.x = theme_text(colour="black", size=15),
       axis.title.y = theme_text(colour="black", size=15, angle=90),
       panel.background=theme_rect(colour="white"),
       panel.grid.minor = theme_blank(), 
       panel.grid.major = theme_blank()) 
```

![在此处输入图像描述](../Images/000525a8075a4d0b181f77323964816f.png)

我想创建一个像

```
f1 <- function(x.label, y.label, df, xtitle, filename) {
  g <- ggplot(data=df, aes(x=x.label, y=y.label, label=row.names(df))) + 
    geom_point(size=4) +
    geom_text(vjust=2) + 
    ylab(expression(list(Delta*y.label^o,~kJ/mol))) + 
    xlab(xtitle) + 
    ylim((min(df[,y.label]) - 0.2*(abs(min(df[,y.label])))), max(df[,y.label])) + 
    opts(axis.line = theme_segment(size=1),
         axis.text.x = theme_text(colour="black", size=15),
         axis.text.y = theme_text(colour="black", size=15),
         axis.title.x = theme_text(colour="black", size=15),
         axis.title.y = theme_text(colour="black", size=15, angle=90),
         panel.background=theme_rect(colour="white"),
         panel.grid.minor = theme_blank(), 
         panel.grid.major = theme_blank())
  ggsave(filename, g)
} 
```

像上面的例子一样调用它

```
f1(Rf, H, df, "Molecular refraction", "D:/temp/1.jpg") 
```

困难在于如何转移和正确处理`x.label`and `y.label`，因为它们用于,和调用的`aes`选项中。当前函数返回错误`ggplot``ylab(expression())``ylim``Error in eval(expr, envir, enclos) : object 'x.label' not found`

**回答：**

以下功能正常工作。`aes_string`应该使用 insted of `aes`in`ggplot`选项，而`substitute`不是`expression`in `ylab`。

```
f1 <- function(x.label, y.label, df, x.title, filename) {
  g <- ggplot(data=df, aes_string(x=x.label, y=y.label)) + 
    geom_point(size=4) +
    geom_text(aes(label=row.names(df)), vjust=2) + 
    ylab(substitute(list(Delta*y.label^o,~kJ/mol), list(y.label=y.label))) + 
    xlab(x.title) + 
    ylim((min(df[,y.label]) - 0.2*(abs(min(df[,y.label])))), max(df[,y.label])) + 
    opts(axis.line = theme_segment(size=1),
         axis.text.x = theme_text(colour="black", size=15),
         axis.text.y = theme_text(colour="black", size=15),
         axis.title.x = theme_text(colour="black", size=15),
         axis.title.y = theme_text(colour="black", size=15, angle=90),
         panel.background = theme_rect(colour="white"),
         panel.grid.minor = theme_blank(), 
         panel.grid.major = theme_blank())
  ggsave(filename=filename, plot=g)
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T08:08:19.723

如果您输入`x.label`为字符（或字符串），即`"Rf"`，您可以使用`aes_string`来映射美学：

```
aes_string(x = x.label, etc) 
```

对`data.frame`then 进行子集化也变得容易：

```
df[[x.label]] 
```

对于您的表达式，`ylab`您可能需要使用`parse`and/or `eval`，但我现在无法访问 R 并且无法检查。

# c# - XMLWorker 异常：对象引用未设置为对象的实例

> ID：11841322
> 
> 赞同：4
> 
> 时间：2012-08-07T07:40:01.210
> 
> 标签：c#, asp.net, exception, html-parsing, export-to-pdf

我想将 html 导出为 pdf

```
 var document = new Document();
 PdfWriter pdfWriter = PdfWriter.GetInstance(document, 
                                   new FileStream("/my.pdf", FileMode.Create)); 
  pdfWriter.SetFullCompression();
  pdfWriter.StrictImageSequence = true;
  pdfWriter.SetLinearPageMode();

 var sr = new StringReader(htmlcode);
document.Open();

var k = XMLWorkerHelper.GetInstance();
k.ParseXHtml(pdfWriter, document, sr);
//here it gave me an exception: Object reference not set to an instance of 
                                                                  an object

  sr.Close();
   document.Close();

Response.ContentType = "Application/pdf";
Response.AppendHeader("Content-Disposition", "attachment; filename="my.pdf");
Response.TransmitFile(@"c:\test\my.pdf");
Response.Flush();
Response.End();
Response.Close(); 
```

所有例外：

```
 System.NullReferenceException: Object reference not set to an 
instance of an object.
       at iTextSharp.tool.xml.pipeline.html.HtmlPipeline.Close
                          (IWorkerContext context, Tag t, ProcessObject po)
       at iTextSharp.tool.xml.XMLWorker.EndElement(String tag, String ns)
       at iTextSharp.tool.xml.parser.XMLParser.EndElement()
    at iTextSharp.tool.xml.parser.state.ClosingTagState.Process(Char character)
       at iTextSharp.tool.xml.parser.XMLParser.ParseWithReader(TextReader reader)
       at iTextSharp.tool.xml.XMLWorkerHelper.ParseXHtml(PdfWriter writer,
                                                    Document doc, TextReader inp) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T13:53:34.260

**此行有错误**

```
var k = XMLWorkerHelper.GetInstance();
k.ParseXHtml(pdfWriter, document, sr); 
```

//这里它给了我一个例外：对象引用未设置为对象的实例

**由于任何一个输入参数的值都指向 NULL**我们可以在传递之前检查它（将要传递的变量）是 null 还是值。

以下代码足以获取 HTML 内容并将其写入 PDF 文件

```
Document pdfDoc = new Document(PageSize.A4, 10, 10, 10, 10);  
PdfWriter writer = PdfWriter.GetInstance(pdfDoc, new FileStream(@"D:\Syed\New PDF\PDF.pdf", FileMode.Create));// Output PDF File Path
Response.Write("File Created Successfully");
pdfDoc.Open();
XMLWorkerHelper.GetInstance().ParseXHtml(writer, pdfDoc, new StreamReader(@"D:\Syed\test.html"));//This is input HTML file path
pdfDoc.Close(); 
```

它将从 HTML 文件中读取并将它们写入创建的 PDF 文件

# linq - 使用 linq 计算不同表中的不同字段

> ID：11841326
> 
> 赞同：-1
> 
> 时间：2012-08-07T07:40:15.010
> 
> 标签：linq, linq-to-sql

我有 4 张桌子：

```
Foreign Key----FK
Primary Key----PK

ticket(id,FK_ticketopenby,FK_closeby,FK_createby,FK_tickettype)
ticketcategoies(PK_ID,name,ticketid)
user(name,PK_id) 
usertype(PK_id,designation,FK_userid) 
```

用户 ID 是外键 (FK)，如 FK_closeby,FK_createby,FK_tickettype

用户是管理员或客户工单是后续或用户

所需的 linq 查询结果

```
-----------------------------------------------------------------
| Usertype | TicketType | Totalopen | TotalClose | TotalCreated |
-----------------------------------------------------------------
|    admin |   FollowUP |       324 |       2323 |          232 |
----------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:47:53.127

您的问题有点薄，但这是我认为您要问的答案。

我假设您使用的是像 Linq-to-SQL 或 EF 这样的 ORM，并且每个表都有一个实体。

目前尚不清楚票证类型在您的模型中是如何表示的，因此我没有加入该实体。

```
context.Tickets.Join(
        context.UserTypes,
        t => t.TicketOpenBy, 
        ut => ut.UserId,
        (t, ut) => new
            {
                Usertype = ut.Designation,
                TicketType = t.TicketType,
                Open = (t.TicketOpenBy ?? 0) > 0 ? 1 : 0,
                Closed = (t.CloseBy ?? 0) > 0 ? 1 : 0,
                Created = (t.CreateBy ?? 0) > 0 ? 1 : 0
            })
    .GroupBy(
        t => new { t.Usertype, t.TicketType },
        t => new
            {
                t.Usertype,
                t.TicketType,
                TotalOpen = t.Sum(t => t.Open),
                TotalClosed = t.Sum(t => t.Closed),
                TotalCreated = t.Sum(t => t.Created),
            }); 
```

如果这与您正在寻找的答案不同，您将需要为您的问题添加清晰度和细节。

# javascript - 为捕获阶段注册的事件侦听器在冒泡之前未触发 - 为什么？

> ID：11841330
> 
> 赞同：16
> 
> 时间：2012-08-07T07:40:34.870
> 
> 标签：javascript, dom-events, event-bubbling

我试图了解是什么决定了单击嵌套时触发事件处理程序的顺序`<div>`- 我所看到的似乎与记录的行为不一致，所以我正在寻找一些帮助来理解它。

我有 2 个嵌套 div，每个都附加了 2 个事件处理程序，一个用于捕获阶段，一个用于冒泡阶段：

```
<html>
    <head>
        <script>
            function setup(){
                var outer = document.getElementById('outer');
                outer.addEventListener('click', function(){console.log('outer false');}, false);
                outer.addEventListener('click', function(){console.log('outer true');}, true);

                var inner = document.getElementById('inner');
                inner.addEventListener('click', function(){console.log('inner false');}, false);
                inner.addEventListener('click', function(){console.log('inner true');}, true);
            }           
        </script>
        <style>
            div {
                border: 1px solid;
                padding: 1em;
            }
        </style>
    </head>
    <body onload="setup()">
        <div id="outer">
            <div id="inner">
                CLICK
            </div>
        </div>
    </body>
</html> 
```

根据[我读过](http://www.quirksmode.org/js/events_order.html)的输出应该是：

```
outer true
inner true
inner false
outer false 
```

但我实际看到的（在 Chrome 和 Firefox 上）是：

```
outer true
inner false
inner true
outer false 
```

谁能解释这种差异？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-07T07:48:09.107

W3C 事件流规范（即 Chrome 和 Firefox 实现的）是首先捕获所有事件，直到它们到达目标元素，此时它们再次冒泡。但是，当事件流到达事件目标本身时，事件不再捕获或冒泡——它在目标本身上。因为冒泡/捕获不适用，所以事件处理程序按照它们注册的顺序触发。尝试交换内部元素事件处理程序的顺序，您会发现它也会更改控制台输出的顺序。

jsFiddle 示例：http: [//jsfiddle.net/RTfwd/1/](http://jsfiddle.net/RTfwd/1/)

DOM 事件规范的最新版本更清楚地说明了这一点（[http://dev.w3.org/2006/webapi/DOM-Level-3-Events/html/DOM3-Events.html](http://dev.w3.org/2006/webapi/DOM-Level-3-Events/html/DOM3-Events.html)）：

> **冒泡阶段事件由事件目标处理***后*，可由 目标的祖先之一处理的过程。有关更多详细信息，请参阅事件流上下文中对冒泡阶段的描述。
> 
> **捕获阶段在被事件目标处理***之前*，事件可以由目标的祖先之一处理的过程。有关更多详细信息，请参阅事件流上下文中对捕获阶段的描述。

# spring - 在junit中工作的Spring启动监听器

> ID：11841334
> 
> 赞同：-1
> 
> 时间：2012-08-07T07:41:06.693
> 
> 标签：spring, unit-testing, application-lifecycle

嗨，我有一个不支持 spring 和 hibernate 的 Web 应用程序。我正在寻找调用一些在运行测试时执行的启动函数的可能性。

我使用 AbstractTransactionalJUnit4SpringContextTests 类并尝试了以下接口

*   应用程序监听器
*   生命周期
*   ServletContextListener

但他们都没有在junit下被调用。

任何提示（此时应该可以使用hibernate-database-acces）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T21:10:01.367

您可以使用 Annotation ContextConfiguration 为您的测试加载应用程序上下文。

```
@ContextConfiguration(locations="test/test-context.xml")
public class MyTestsClass {
    // class body...
} 
```

问候迈克尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:16:12.393

我的解决方案：ApplicationContextAware，只需在类路径中添加一个类：

```
public class SpringApplicationContext implements ApplicationContextAware {

    private static ApplicationContext CONTEXT;

    public void setApplicationContext(ApplicationContext context) throws BeansException {
        CONTEXT = context;
        // DO DB INIT STUFF
    } 
```

# javascript - 在 MVC3 中将字节数组显示为图像

> ID：11841335
> 
> 赞同：3
> 
> 时间：2012-08-07T07:41:09.773
> 
> 标签：javascript, asp.net-mvc-3, image, bytearray

我已经将图像存储为字节数组，现在我需要从字节数组中将其显示回来。所以我有一个`<img>`标签，我已经在运行时将该标签的源分配给一个将获取图像的方法.

看法：

```
document.getElementById("Logo").setAttribute("src",'@Url.Action("GetImage","AdminLogoManager", new { id = Model.Asset.AssetID})');

<img id="Logo" /> 
```

控制器中的代码：

```
private List<LogoModel> LogoModelList
        {
            get
            {
                var logoModelList = GetLogoModelListFromSomewhere();
                return logoModelList;
            }
            }
        }

public FileContentResult GetImage(int id)
        {
            LogoModel m = LogoModelList.Find(p => p.Asset.AssetID == id);
            return new FileContentResult(m.Asset.Document, "image/jpeg");
        } 
```

但它不显示图像。我检查了 Chrome 调试器，它说：服务器响应错误 500（内部服务器错误）谁能帮我让它工作？我知道 LogoModelList 不为 null 或为空，并且 ID 可能是正确的

PS：它甚至不调试。我无法设置调试点`GetImage()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T08:04:49.140

我无法找到我在这里添加的代码的原始源，这让我很困扰，但它确实有效。如果您的声誉允许，如果有人有原始链接，请随时告诉我或编辑此答案：

帮手：

```
 public static class ImageResultHelper
    {
        public static ImageResult Image( this Controller controller, byte[] imageData, string mimeType )
        {
            return new ImageResult()
            {
                ImageData = imageData,
                MimeType = mimeType
            };
        }

    public static ImageResult Image( this Controller controller, byte[] imageData, string mimeType, HttpCacheability cacheability, DateTime expires, string eTag )
    {
        return new ImageResult()
        {
            ImageData = imageData,
            MimeType = mimeType,
            Cacheability = cacheability,
            Expires = expires,
            ETag = eTag
        };
    }
} 
```

和习俗`ActionResult`：

```
public class ImageResult : ActionResult
{
    public ImageResult()
    {
    }

    public byte[] ImageData { get; set; }

    public string MimeType { get; set; }

    public HttpCacheability Cacheability { get; set; }

    public string ETag { get; set; }

    public DateTime? Expires { get; set; }

    public override void ExecuteResult( ControllerContext context )
    {
        if ( this.ImageData == null )
        {
            throw new ArgumentNullException( "ImageData" );
        }

        if ( string.IsNullOrEmpty( this.MimeType ) )
        {
            throw new ArgumentNullException( "MimeType" );
        }

        context.HttpContext.Response.ContentType = this.MimeType;

        if ( !string.IsNullOrEmpty( this.ETag ) )
        {
            context.HttpContext.Response.Cache.SetETag( this.ETag );
        }

        if ( this.Expires.HasValue )
        {
            context.HttpContext.Response.Cache.SetCacheability( this.Cacheability );
            context.HttpContext.Response.Cache.SetExpires( this.Expires.Value );
        }

        context.HttpContext.Response.OutputStream.Write( this.ImageData, 0, this.ImageData.Length );
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T16:09:25.747

这是我使用内置 WebImage 类在我的控制器上创建的方法，改编自这个答案：

[Asp.net MVC3 图像缩略图调整大小的想法](https://stackoverflow.com/questions/7319842/mvc3-razor-thumbnail-resize-image-ideas)

WebImage 的好处是您可以设置图像的大小并保持纵横比：

```
using System.Web.Helpers;

public void GetImageThumbnailFromByteArray(int docId, int width, int height)
{
    // Load image from database
    var document = productRepository.Documents.SingleOrDefault(f => f.DocumentID == docId);

    if (document == null || document.FileContent == null)
    {
        return;
    }

    // .FileContent is the image stored as a byte array 
    var image = document.FileContent;

    // .Resize will resize the image on the fly using the passed in width and height. 
    // The 3rd and 4th params are preserveAspectRatio and preventEnlarge
    // .Crop it to remove 1px border at top and left sides (bug in WebImage)
    new WebImage(image)
    .Resize(width, height, true, true) 
    .Crop(1, 1)                        
    .Write();

    // This will load a default image if no image available
    // new WebImage(HostingEnvironment.MapPath(@"~/Content/images/myPic.png")).Write();
} 
```

在 Razor 中：

```
<div>
    <a title="Click to download" href="@Url.Action("Download", "Product", new {id = Model.DocumentID})">
    <img style="border: solid; border-color: lightgrey; border-width: thin" src="@Url.Action("GetImageThumbnailFromByteArray", "Product", new {docId = Model.DocumentID, width = 250, height = 250})" alt=""/>            
    </a>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T08:09:53.623

终于拿到代码去调试，发现m.Asset.Document为null！

# git - 修复 git 合并分支到 master 的冲突

> ID：11841337
> 
> 赞同：0
> 
> 时间：2012-08-07T07:41:16.160
> 
> 标签：git, version-control, github, merge, branch

如何将此分支合并到主分支？

```
thufir@dur:~/NetBeansProjects$ 
thufir@dur:~/NetBeansProjects$ git clone -b 4.GUI_loading_messages_slowly git@github.com:THUFIR/USENET.git
Cloning into USENET...
remote: Counting objects: 3782, done.
remote: Compressing objects: 100% (1274/1274), done.
remote: Total 3782 (delta 1647), reused 3613 (delta 1478)
Receiving objects: 100% (3782/3782), 388.55 KiB | 100 KiB/s, done.
Resolving deltas: 100% (1647/1647), done.
thufir@dur:~/NetBeansProjects$ 
thufir@dur:~/NetBeansProjects$ cd USENET
thufir@dur:~/NetBeansProjects/USENET$ 
thufir@dur:~/NetBeansProjects/USENET$ git branch -a
* 4.GUI_loading_messages_slowly
  remotes/origin/1.FetchBean_CLI
  remotes/origin/2.some_GUI
  remotes/origin/3.messageId__string
  remotes/origin/4.GUI_loading_messages_slowly
  remotes/origin/HEAD -> origin/master
  remotes/origin/master
thufir@dur:~/NetBeansProjects/USENET$ 
thufir@dur:~/NetBeansProjects/USENET$ git checkout -b master remotes/origin/master
Branch master set up to track remote branch master from origin.
Switched to a new branch 'master'
thufir@dur:~/NetBeansProjects/USENET$ 
thufir@dur:~/NetBeansProjects/USENET$ git branch
  4.GUI_loading_messages_slowly
* master
thufir@dur:~/NetBeansProjects/USENET$ 
thufir@dur:~/NetBeansProjects/USENET$ git diff master 4.GUI_loading_messages_slowly 
diff --git a/src/META-INF/persistence.xml b/src/META-INF/persistence.xml
index 252f563..3cebe3d 100644
--- a/src/META-INF/persistence.xml
+++ b/src/META-INF/persistence.xml
@@ -2,8 +2,8 @@
 <persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http:/
   <persistence-unit name="USENETPU" transaction-type="RESOURCE_LOCAL">
     <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
-    <class>net.bounceme.dur.usenet.database.Article</class>
-    <class>net.bounceme.dur.usenet.database.Headers</class>
+    <class>net.bounceme.dur.usenet.model.Article</class>
+    <class>net.bounceme.dur.usenet.model.Newsgroup</class>
     <properties>
       <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/usenet
       <property name="javax.persistence.jdbc.password" value="password"/>
diff --git a/src/net/bounceme/dur/usenet/controller/ArticleNewsgroup.java b/src/net/bounceme
index b65737a..a9fadd2 100644
--- a/src/net/bounceme/dur/usenet/controller/ArticleNewsgroup.java
+++ b/src/net/bounceme/dur/usenet/controller/ArticleNewsgroup.java
@@ -5,8 +5,8 @@ import java.util.logging.Level;
 import java.util.logging.Logger;
 import javax.mail.Message;
 import javax.mail.MessagingException;
-import net.bounceme.dur.usenet.database.Article;
-import net.bounceme.dur.usenet.database.Headers;
+import net.bounceme.dur.usenet.model.Article;
+import net.bounceme.dur.usenet.model.Newsgroup;
 import net.bounceme.dur.usenet.model.Usenet;

thufir@dur:~/NetBeansProjects/USENET$ 
thufir@dur:~/NetBeansProjects/USENET$ git merge 4.GUI_loading_messages_slowly 
Auto-merging src/net/bounceme/dur/usenet/controller/Page.java
CONFLICT (content): Merge conflict in src/net/bounceme/dur/usenet/controller/Page.java
Auto-merging src/net/bounceme/dur/usenet/database/DatabaseUtils.java
CONFLICT (content): Merge conflict in src/net/bounceme/dur/usenet/database/DatabaseUtils.java
Auto-merging src/net/bounceme/dur/usenet/model/Usenet.java
CONFLICT (content): Merge conflict in src/net/bounceme/dur/usenet/model/Usenet.java
Automatic merge failed; fix conflicts and then commit the result.
thufir@dur:~/NetBeansProjects/USENET$ 
thufir@dur:~/NetBeansProjects/USENET$ 
```

我并不是想“修复”冲突，而是简单地将 master 替换为分支。也许[变基](http://git-scm.com/book/en/Git-Branching-Rebasing)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:44:57.257

```
git checkout master
git merge GUI_loading_messages_slowly
git commit
git push 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T07:44:52.430

您总是切换到要修改的分支。因此，首先检查 master 是否适合您的情况。如果您的合并出错，您可以使用 git reset “撤消”您的合并。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T07:45:40.283

更改为要合并并键入的分支。

```
git merge branchname 
```

但是您首先应该真正阅读基础知识和文档。

[教程](http://sixrevisions.com/resources/git-tutorials-beginners/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T08:49:05.257

合并像宣传的那样工作，但只有在删除主分支之后：

```
thufir@dur:~/NetBeansProjects$ 
thufir@dur:~/NetBeansProjects$ git clone git@github.com:THUFIR/usenet.git
Cloning into usenet...
remote: Counting objects: 3750, done.
remote: Compressing objects: 100% (1263/1263), done.
remote: Total 3750 (delta 1630), reused 3585 (delta 1465)
Receiving objects: 100% (3750/3750), 385.93 KiB | 85 KiB/s, done.
Resolving deltas: 100% (1630/1630), done.
thufir@dur:~/NetBeansProjects$ 
thufir@dur:~/NetBeansProjects$ cd usenet/
thufir@dur:~/NetBeansProjects/usenet$ 
thufir@dur:~/NetBeansProjects/usenet$ git branch -a
* 4.GUI_loading_messages_slowly
  remotes/origin/1.FetchBean_CLI
  remotes/origin/2.some_GUI
  remotes/origin/3.messageId__string
  remotes/origin/4.GUI_loading_messages_slowly
  remotes/origin/HEAD -> origin/4.GUI_loading_messages_slowly
thufir@dur:~/NetBeansProjects/usenet$ 
thufir@dur:~/NetBeansProjects/usenet$ git branch master
thufir@dur:~/NetBeansProjects/usenet$ 
thufir@dur:~/NetBeansProjects/usenet$ git branch
* 4.GUI_loading_messages_slowly
  master
thufir@dur:~/NetBeansProjects/usenet$ 
thufir@dur:~/NetBeansProjects/usenet$ git checkout master
Switched to branch 'master'
thufir@dur:~/NetBeansProjects/usenet$ 
thufir@dur:~/NetBeansProjects/usenet$ git branch
  4.GUI_loading_messages_slowly
* master
thufir@dur:~/NetBeansProjects/usenet$ git branch -a
  4.GUI_loading_messages_slowly
* master
  remotes/origin/1.FetchBean_CLI
  remotes/origin/2.some_GUI
  remotes/origin/3.messageId__string
  remotes/origin/4.GUI_loading_messages_slowly
  remotes/origin/HEAD -> origin/4.GUI_loading_messages_slowly
thufir@dur:~/NetBeansProjects/usenet$ 
thufir@dur:~/NetBeansProjects/usenet$ git merge 4.GUI_loading_messages_slowly 
Already up-to-date.
thufir@dur:~/NetBeansProjects/usenet$ 
thufir@dur:~/NetBeansProjects/usenet$ git push origin master
Total 0 (delta 0), reused 0 (delta 0)
To git@github.com:THUFIR/usenet.git
 * [new branch]      master -> master
thufir@dur:~/NetBeansProjects/usenet$ 
```

合并之所以有效，是因为我首先删除了 master 分支，这似乎有点极端，但你就是这样。否则，我不确定如何解决冲突，而无需按照精美手册的建议编辑文件以使其匹配。如果您首先必须手动编辑内容以使其与不同的分支匹配，我只是不明白合并的意义，似乎应该有一个提示，而不是错误消息。

附带条件是，如果`push origin :master`不先更改默认分支，就不能在 github 上删除 master 分支，这很容易。我发现合并并不总是自动合并，有时会抱怨存在冲突，这有点令人恼火。我不明白为什么合并不能返回咨询，然后问“你确定吗？” 然后无论如何合并。无论如何，我学到了一点关于 git 的知识，特别是如何删除一个分支。

我不明白 的意思`Already up-to-date.`，我的意思是，github 上的 origin 肯定不是最新的，所以我想知道什么是最新的。大概本地副本现在是最新的，但为什么它“已经”是最新的？

# java - Html（带图像）到 PDF - Java

> ID：11841338
> 
> 赞同：-1
> 
> 时间：2012-08-07T07:41:21.797
> 
> 标签：java, html-to-pdf

我曾尝试使用飞碟将 html 转换为 pdf。不知何故，它只掩盖了痛苦的文字。我有图像（img 标签），我也想要它们。这就是我所做的。我如何为图像制作这个？

```
 DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    factory.setNamespaceAware(false);
    DocumentBuilder builder = factory.newDocumentBuilder();
    Document doc = builder.parse(new File("sampleData.htm"));

    ITextRenderer renderer = new ITextRenderer();
    renderer.setDocument(doc, "");
    renderer.layout();
    OutputStream os = response.getOutputStream();
    renderer.createPDF(os); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-02T05:49:09.153

实际上，这可能是一个迟到的答复，但如果它可以帮助某人，我仍然会这样做。itext api 内部不支持图像。您必须明确告诉 itext 包含这样的标签。我给你的链接你可以参考[http://www.samuelrossille.com/home/category/java](http://www.samuelrossille.com/home/category/java)以获得清晰的理解。如果您需要任何工作代码，我可以帮助您，请告诉我。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T08:51:44.497

一段时间前，我在使用另一个 PDF 转换器时遇到了类似的问题。当您的图像相对于当前目录时，这可能会出现问题。

这是您可以执行的操作：

```
String curDir = System.getProperty("user.dir"); 
```

尝试粘贴图像`curDir`并删除相对路径。一旦这个工作，你可以适当地调整你的路径。

# java - 伪造（？）Eclipse“未使用局部变量”警告

> ID：11841341
> 
> 赞同：-4
> 
> 时间：2012-08-07T07:41:40.043
> 
> 标签：java, eclipse, ide, warnings

这是我的 Java 代码的一部分，IDE 是 Eclipse。'Lines' 是一个字符串数组。

```
//build anchor inner text
int Count = Lines.length;
String Text = ""; //<----------Eclipse shows warning here
for (int Index=0; Index<Count; Index++) {
  Text += Lines[Index];
  if (Index<Count-1)
    Text += "<br/>";
} 
```

**'Text' 变量在 'for' 循环外声明，但在**. Eclispe在变量“Text”的声明行向我显示了这个警告：“**未使用局部变量 Text 的值”。**

怎么会这样？它在“for”循环中使用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T07:44:13.810

您正在设置变量值，但其值未在您的代码中使用。该警告是无害的，并且在您使用变量值时很可能会消失。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T07:45:04.110

Eclipse 很可能会抱怨，因为您将东西扔到`Text`变量中而没有对它做任何事情。例如，执行诸如`System.Console.WriteLine(Text);`（假设`Text`是一个字符串）之类的操作应该删除警告。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T07:45:39.623

您正在写入变量`Text`，但没有从中读取 - 实际上意味着您正在执行不需要的计算。

一旦您返回文本或将其显示到控制台等，它将删除警告。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-07T07:55:45.293

您正在为您的变量分配一个空字符串`Text`，然后不确定*地*读取它（至少在显示的代码段中）。什么时候`Count == 0`，甚至什么时候`Count < 1`，循环体都不会被执行，所以`Text`不会被使用。不过，我想你以后会做点什么`Text`吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T08:31:13.533

*   当你连接使用`StringBuilder()`
*   颠倒约定很有趣，但很危险（与类名冲突），忘记了这个习惯用于专业用途或实际工作。
*   Eclipse 对你很友好：在你`Test`做大之后你忘记了吗？真的，你什么都不做，你什么都没做。'null' 的时间消耗。
*   您可以`public static Test`删除警告，并从所有其他程序中读取它。

# ios - 不同的 web 服务调用不同的视图控制器 Restkit

> ID：11841345
> 
> 赞同：0
> 
> 时间：2012-08-07T07:41:58.563
> 
> 标签：ios, web-services, ipad, restkit

我是一名 asp.net 开发人员并开始学习目标 c。几天来一直在努力寻找解决方法：

我对ios开发完全陌生，所以如果我的问题听起来很愚蠢，请原谅我。

我有 2 个表视图控制器：

公告表视图控制器和新闻表视图控制器。

对于这些控制器中的每一个，我使用休息套件调用 Web 服务：这是我在 NewsTableViewController 中的代码

```
- (void)viewDidLoad
{
[super viewDidLoad];
[self sendRequest];

}
- (void)sendRequest
{

//set the base URL
RKURL *baseURL = [RKURL URLWithBaseURLString:@"http://someurl.com/WcfDataService.svc"];
NSString *format=@"json";
NSString *un = @"blah";
NSString *pw = @"blah";

RKObjectManager *objectManager1 = [RKObjectManager objectManagerWithBaseURL:baseURL];
objectManager1.client.baseURL = baseURL;

NSDictionary *queryParams;
queryParams = [NSDictionary dictionaryWithObjectsAndKeys:format,@"format", nil];

objectManager1.client.username=un;
objectManager1.client.password=pw;

//set news mapping

RKObjectMapping *newsMapping = [RKObjectMapping mappingForClass:[News class]];

[newsMapping setSetDefaultValueForMissingAttributes:true]; 
[newsMapping mapKeyPath:@"NEWSTITLE" 
            toAttribute:@"name"]; 

[newsMapping mapKeyPath:@"NEWSBODY" 
            toAttribute:@"newsBody"]; 

 RKURL *newsURL = [RKURL URLWithBaseURL:[objectManager1 baseURL] resourcePath:@"/NEWS"   queryParameters:queryParams];

 [objectManager1 loadObjectsAtResourcePath:[NSString stringWithFormat:@"%@?$%@", [newsURL resourcePath], [newsURL query]] usingBlock:^(RKObjectLoader *loader) 

 {

     [loader.mappingProvider setObjectMapping:newsMapping forKeyPath:@"d"];

     loader.method = RKRequestMethodGET;

     loader.delegate = self;

     loader.userData=@"NewsData";
 }];

}

- (void)objectLoader:(RKObjectLoader *)objectLoader didFailWithError:(NSError *)error
{
NSLog(@"Error: %@", [error localizedDescription]);
}

- (void)request:(RKRequest*)request didLoadResponse:(RKResponse*)response {
NSLog(@"response code: %d", [response statusCode]);
}

- (void)objectLoader:(RKObjectLoader *)objectLoader didLoadObjects:(NSArray *)objects
{
NSString* source = (NSString*) objectLoader.userData;

NSLog(@"objects[%d]", [objects count]);
NSLog(@"%@", source);
data2 = objects;

 [self.tableView reloadData];

} 
```

而且我在 AnnouncementsViewController 上执行与上面完全相同的代码（只是更改基本 URL 和映射）。

问题是它只加载newstableviewcontroller 而不是公告。

我已阅读此[https://github.com/RestKit/RestKit/wiki/Using-Multiple-Base-URLs-%28and-Multiple-Object-Managers%29](https://github.com/RestKit/RestKit/wiki/Using-Multiple-Base-URLs-%28and-Multiple-Object-Managers%29)

但似乎无法理解并应用于我的代码。

我希望有人能解释一下！

最好的问候， Rikuna

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:50:31.370

@PauldeLange 感谢您花时间回复。我终于修好了。这条线就是魔法：

```
 RKObjectManager *objectManager =  [RKObjectManager sharedManager]; 
```

# java - 如何在 Android 中的字符串中使用 \n 换行（来自 linux 的输入）

> ID：11841346
> 
> 赞同：2
> 
> 时间：2012-08-07T07:41:59.797
> 
> 标签：java, android, linux

当我在我的android上单击按钮'list domain'时遇到问题，在linux（服务器）中将执行命令

```
cat /var/listdomain.txt 
```

linux会给出一个输出

```
irfan.com
jarkom.com
you.co.id 
```

但是我的android上的输出是这样的

```
irfan.comjarkom.comyou.co.id 
```

我应该如何处理我的 android 输出

```
irfan.com
jarkom.com
you.co.id 
```

这是我在 eclips 中的语法

```
public final Button.OnClickListener bLihatIsi = new Button.OnClickListener() {
     @Override
    public void onClick(View v) {
        try {
        AlertDialog.Builder dialog = new AlertDialog.Builder(actual);
                    dialog.setTitle(getResources().getString(R.string.execute)
                            + getResources().getString(R.string.Terminal)
                            + " ?");
                    dialog.setMessage(getResources().getString(
                            R.string.popLihat)
                            + " ?");
                    dialog.setNegativeButton(getResources().getString(
                            R.string.no),
                            new DialogInterface.OnClickListener() {
    @Override
public void onClick(
        DialogInterface dialogInterface, int i) {
        }
                            });
            dialog.setPositiveButton(getResources().getString(
        R.string.yes),
        new DialogInterface.OnClickListener() {
        @Override
        public void onClick(
        DialogInterface dialogInterface, int i) {
    Spinner spinner = (Spinner) findViewById(R.id.spinner);
        Server server = serverlist.get(spinner.getSelectedItemPosition() - 1);
        if (server != null ){
                final String LIHATISI = "cat /var/listdomain.txt";

                DnsConnect u = new DnsConnect();
                Command c = new Command (getResources().getText(R.string.konfdnsdel).toString(), LIHATISI, server);
                                    u.setCommand(LIHATISI);

    pd = ProgressDialog.show(actual, getResources().
        getString(R.string.PleaseWait), c.getName());
        actualThreadCommand = c;
        Thread thread = new Thread(actual);
        thread.start();

        } else {
                                    Toast.makeText(getBaseContext(),
                                            getResources().getText(R.string.tabelkosongkonten),
                                            Toast.LENGTH_LONG).show();
        }

    }
    });
dialog.show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:48:12.897

[http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)

```
String lineSep=System.getProperty("line.separator"); 
```

您可以使用它代替“\n”来换行。

# cocoa - IKDeviceBrowserView 在 OSX Mountain Lion 上不显示任何内容

> ID：11841349
> 
> 赞同：1
> 
> 时间：2012-08-07T07:42:09.960
> 
> 标签：cocoa, osx-mountain-lion, imagekit

在 Xcode 4.4 中，我无法摆脱`IKDeviceBrowserView`10.8 中的错误。

我已经创建了新的测试项目，`IKDeviceBrowserView`在我的窗口中添加了一个要链接的 Quartz.framework。构建后，我看到一个空白窗口。控制台中没有警告/错误/日志，`IKDeviceBrowserView`窗口中也没有。

我尝试设置不同的 SDK、部署目标并使用自动调整大小，但没有结果。

看来Apple已经`IKDeviceBrowserView`在10.8中打破了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T09:18:11.263

我找到了一个解决方案：将您的笔尖设置为使用自动布局并设置`translatesAutoresizingMaskIntoConstraints`为`YES`您的`IKDeviceBrowserView`.

我希望这个错误将很快得到修复。

# c# - ADODB 命令只检索一个字段

> ID：11841352
> 
> 赞同：0
> 
> 时间：2012-08-07T07:42:33.450
> 
> 标签：c#, .net, adodb

各位码农，

我正在使用 ADODB 命令从数据库中提取一些信息，该数据库由几个字段组成。但是，当我运行代码时，它只会拉出一个字段，而且始终是同一个字段。据我所知，我正在正确使用 MoveNext，并且我嵌套在 EOF while 循环中。

这是我到目前为止所得到的：

```
if (!rsStbDetails.EOF)
{
    while (!rsStbDetails.EOF)
    {
        foreach (ADODB.Field f in rsStbDetails.Fields)
        {
           if (f.Value == null)
           {
               f.Value = 0;
           }

           switch (f.Name)
           {
               // There's a load of case statements here to manipulate the values being read in        
               default:
                   SetValue(id, f.Name, f.Value, f.Position);
                   break;
           }
        }
    }
    rsStbDetails.MoveNext();
} 
```

有任何想法吗？干杯

编辑：这是我用来设置连接的代码：

```
objComm.ActiveConnection = conSQL;
objComm.CommandType = CommandTypeEnum.adCmdStoredProc;
objComm.CommandText = "Service.GetDetails";

objComm.Parameters.Append(objComm.CreateParameter("@Node", ADODB.DataTypeEnum.adVarChar, ParameterDirectionEnum.adParamInput, 50, "NAME"));
objComm.Parameters.Append(objComm.CreateParameter("@Box", ADODB.DataTypeEnum.adVarChar, ParameterDirectionEnum.adParamInput, 20, ""));
objComm.Parameters.Append(objComm.CreateParameter("@Num", ADODB.DataTypeEnum.adInteger, ParameterDirectionEnum.adParamInput, 20, 0));
objComm.Parameters.Append(objComm.CreateParameter("@Exclude", ADODB.DataTypeEnum.adInteger, ParameterDirectionEnum.adParamInput, 20, iExclude));

objComm.Parameters[1].Value = Right((string)GetProperty(id, "SName", role), 8); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:45:09.847

您至少应该`rsStbDetails.MoveNext();`向上移动一个支撑:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T07:47:45.673

在while循环中添加这一行：`rsStbDetails.MoveNext();`还有一件事，我建议你必须使用`ADONet`技术，因为你在`.net`环境中。

**[`ADO NET`这个链接是一个学习技术的好地方。](http://csharp.net-informations.com/ado.net/csharp-ado.net-architecture.htm)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T09:28:54.713

事实证明，问题出在服务器端，与我的代码无关。我已接受 Gerald 的回答，指出错误的 MoveNext() 位置。无论如何，谢谢，伙计们。

# c++ - STL 容器的内存消耗

> ID：11841357
> 
> 赞同：11
> 
> 时间：2012-08-07T07:42:41.773
> 
> 标签：c++, memory-management, stl, map, vector

我正在开发一个应用程序，我计划在其中使用几个 STL 容器。如果内存消耗达到阈值，应用程序将采取某些步骤。为此，我需要对 STL 容器使用多少内存进行接近准确的计算。

```
vector<string> StringList
map<string, int> mapstring 
```

这就是我估计内存的方式：

对于 的大小`StringList`，循环遍历向量的所有元素并继续添加字符串大小。

```
string size = sizeof(string) + string.capacity()*sizeof(char) 
```

然后最后添加到这个`sizeof(StringList);`

对于 mapstring 的大小，循环遍历容器的所有键并继续添加字符串大小，然后添加 int 的大小，即`mapstring.size()*sizeof(int)`. 然后最后添加到这个`sizeof(mapstring);`

我想一种更好的方法是指定自己的分配器类并跟踪其中的内存使用情况，但编写一个可能并非易事。这个估计好看吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-07T07:50:43.460

A`std::vector<element>`通常***总共***需要 3 个机器字+ sizeof(element) *`capacity()`内存。对于典型的实现，开销包括指向向量开始、结束和当前大小的指针。元素本身存储在连续的内存中。`capacity()`通常有最多两倍于实际元素数量的空间。

A通常**总共**`std::map<element, int>`需要大约 2 个机器字+***每个元素***3 个机器字+ [ sizeof(element) +sizeof(int) ] * num_elements 内存。对于典型的实现，开销由指向存储元素的指针组成。元素本身存储在二叉树中，并带有指向其父级和两个子级的指针。

 ***有了这些经验法则，您只需要知道每个字符串的平均字符数和字符串总数即可了解总内存消耗。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-07T08:02:09.193

对于`std::vector`和`std::string`，容量，而不是大小，将是一个更好的近似值。对于基于节点的容器（`std::set`等），您需要将节点数（大致为元素数）乘以每个节点的大小。然而，这只有在分配器不为节点使用优化的池分配器时才是准确的。

但是，如果您真的想知道正在使用多少内存，更好的策略是替换全局`operator new`and `operator delete`并跟踪实际分配。更准确的方法是替换`malloc`和`free`。形式上，这是不允许的，但在实践中，我从未遇到过它不起作用的实现。另一方面，如果替换`malloc`and `free`，则必须自己实现实际的内存管理。如果你替换`operator new`and `operator delete`，你可以使用`malloc`and `free`，这使得它相当简单。

还要注意，每个分配都有一些固定的开销。与 10 次每次 100000 字节的分配相比，每次 10 字节的 100000 次分配会消耗更多的内存。***

# python - 如何使用 Pywinauto 读取标题名称

> ID：11841358
> 
> 赞同：0
> 
> 时间：2012-08-07T07:42:42.840
> 
> 标签：python, pywinauto

如何阅读下面的标题名称是代码

```
from pywinauto.application import *
import time
app=Application.Start("apps.exe")
app.window_(title="aps a.b.c.d")
time.sleep(2) 
```

在该代码给出错误之后，如`window is not found`.

所以，我的问题是如何传递`aps a.b.c.d`给窗口标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-16T01:37:45.530

我注意到 pywinauto 会导致非常微妙的计时错误。如果这是你的问题，这甚至不是一个坏问题。

仅仅因为过程已经开始并不意味着窗口存在并且完全形成。你的睡眠应该在 Application.Start() 之后。但这是一个草率的解决方案，并非在所有情况下都适用于所有系统。

我已经使用 len( pwa_app.windows_() ) 和 pwa_app.top_window_() 来确保应用程序处于我想要的状态。

然而，这也有不利的一面。那些函数似乎有能力在创建或销毁窗口时引发异常。因此，我通常不会使用普通的 time.sleep() 调用，而是使用类似的方法。

```
#Do While Loop; continuous retry on exception
condition = True
while condition:
    try:
        window_count = len( app.windows_() )
    except:
        continue

    if window_count == num:
        condition = False
    else:
        time.sleep( WAITTIME ) 
```

如果有人可以向我解释更好的方法，我会很高兴。我无法在文档中找到任何提及这些问题的内容。虽然这并不优雅，并且会占用 CPU，但它 100% 的时间都在工作。

**编辑**

在浏览 Stack Overflow 时，我发现 pywinauto 提供的[功能](https://pywinauto.readthedocs.io/en/latest/code/pywinauto.timings.html)与我的示例完全一样*。*

# java - 从类获取值到 Hibernate 配置

> ID：11841360
> 
> 赞同：0
> 
> 时间：2012-08-07T07:43:14.153
> 
> 标签：java, hibernate

我有我的 hibernate.cfg.xml

有字段：

```
<property name="hibernate.connection.username">username</property> // getUser()??? 
```

我有类 Detail.java，它有吸气剂：

```
public String getUser() {
    return user;
} 
```

如何从我的休眠配置 XML 文件中访问该方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:54:45.720

```
You can access method property from configuration file.
But you can access configuration  property value from java method 
```

**尝试使用以下代码：**

```
System.out.println(sessionFactory.getConfiguration().getProperty("hibernate.connection.username")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T07:47:25.690

您无法访问来自 hibernate.cfg.xml 的类属性。

通过以编程方式配置会话工厂，有一种方法可以实现相同的目标。检查[休眠文档](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html#configuration-programmatic)以了解如何执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:27:27.167

这在 Hibernate4 中对我有用：

```
File config = new File("src/hibernate.cfg.xml");
Configuration configuration = new Configuration().configure(getConfigurationFile());
String url = configuration.getProperty("hibernate.connection.url"); 
```

*不知道为什么，但看起来 getConfiguration() 方法在org.hibernate.SessionFactory*中不再可用

# linux - 目录中的占位符 - awk 中的 printf

> ID：11841361
> 
> 赞同：-1
> 
> 时间：2012-08-07T07:43:33.277
> 
> 标签：linux, shell, awk, printf, placeholder

我正在这样做：

```
lastnames="test"
mode="04"
print $0 >> sprintf("%s\/%s_file_%s.txt",lastnames,lastnames,mode); 
```

它说：`fatal: can't redirect to `/_file_04.txt' (Permission denied)`

但如果我这样做：

```
lastnames="test"
mode="04"
print $0 >> sprintf("test/%s_file_%s.txt",lastnames,mode); 
```

这是工作。为什么是这样？我做错了什么，还是替换目录名有特殊情况？还是我必须逃跑`%s/%s`，

我会感谢任何帮助..非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:55:56.073

这个对我有用。`lastname`检查变量声明 ( ) 和用法 ( )之间没有错字，`lastnames`并且目录存在，因为`awk`不会创建它。

一种解决方法可能是避免`sprintf`，如下所示：

```
awk ' {
    lastname="test"
    mode="04"
    print $0 >> lastname "/" lastname "_file_" mode ".txt"
} 
' infile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:50:44.260

对不起，我很愚蠢，我在同一件事上循环了好几次，然后作为一个循环分裂了很多次，结果发生了这种情况：

```
split(name, lastnames, "") => [first, second] 
```

然后第二个循环没有`name`字符串，因为它已经被分割了..因此，我指的是这样的东西：`/file.txt`因为之前的文件夹名称`/`是空的..

无论如何感谢您的意见..

# c# - 如何关闭 Telerik Radgrid 的默认编辑模式？

> ID：11841362
> 
> 赞同：0
> 
> 时间：2012-08-07T07:43:32.637
> 
> 标签：c#, telerik, telerik-grid, rad

我使用 Telerik Rad Grid。对于我在下面添加的编辑一条记录

```
OnEditCommand="Stackoverflow_EditCommand" and in the grid I wrote 
```

* * *

```
<telerik:GridButtonColumn CommandName="Edit" Text="Edit" CommandArgument="Id">
</telerik:GridButtonColumn> 
```

在 asp.net 页面上，当我单击编辑按钮时，有一些默认文本框可以编辑，但我不想向用户显示它们，我打开一个新窗口并从那里显示文本框。所以我不想显示默认编辑行，我该如何防止它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:57:26.653

您可以将其更改为弹出窗口形式而不是就地编辑形式.. 为此，您可以单击 rad 网格，然后转到属性窗口，找到 MasterTableView 展开它并找到 EditMode，将 EditMode 更改为 PopUp.. 运行它，但不要忘记在运行时检查自动生成编辑列..希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T08:31:44.277

如果您不想在 radgrid 中进行内联编辑，这很好用。

```
<telerik:GridTemplateColumn >  
     <ItemTemplate>
       <img src="image/test.png" onclick="OpenPopup('<%#Eval("Id") %>');"/>
      </ItemTemplate>                     
</telerik:GridTemplateColumn> 
```

现在像这样在javascript中制作像OpenPopup这样的功能

```
function OpenPopup(id) {

   window.radopen("Popups/Test.aspx?id=" + id, "PopupPage");//here "PopupPage" is id of your rad window
 } 
```

现在您可以在测试页面中通过 Request("id") 获取 id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T00:44:32.657

将您的更改`commandName`为“编辑”以外的其他内容。例如，使用“更改”。

# php - php中的数字格式

> ID：11841367
> 
> 赞同：-3
> 
> 时间：2012-08-07T07:43:59.237
> 
> 标签：php, number-formatting

我有：

```
echo number_format( $uti->check_price( $rowscatpr ) , 0, '', '.' ); 
```

格式：**333.333.333**

我要格式：**0333.333.333**

有没有一个PHP函数呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:31:23.417

```
$input = number_format( $uti->check_price( $rowscatpr ) , 0, '', '.' );
echo str_pad($input, strlen($input)+1, "0", STR_PAD_LEFT); //0333.333.333 
```

[str_pad](http://php.net/manual/en/function.str-pad.php) — 用另一个字符串将一个字符串填充到一定长度。

[strlen](http://pk1.php.net/manual/en/function.strlen.php) — 返回给定字符串的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:08:13.490

```
$v=number_format( $uti->check_price( $rowscatpr ) , 0, '', '.' );

echo str_pad($v,strlen($v)+1,'0',STR_PAD_LEFT); 
```

# c++ - C ++写入套接字导致程序结束

> ID：11841376
> 
> 赞同：1
> 
> 时间：2012-08-07T07:44:29.697
> 
> 标签：c++, sockets, g++

我正在制作一个有 2 个线程的套接字服务器，每个线程都在一个循环中运行。第一个查找新连接，第二个从已连接的套接字中读取数据并回复它们。问题出在第二个。'write' 函数以某种方式打破循环并导致程序完成......没有错误发生......这就是问题所在。

以下代码是第二个线程的函数。如果我不向套接字写入任何内容，则程序运行良好

```
void* SocketServer::threadSocketsRead( void* thisServer )
{
    SocketServer*               server; 
    int                         key,
                                playersNumber,
                                requestLength;
    Player*                     player;
    char                        message[256];
    string                      reply;

    server = (SocketServer*)thisServer;

    while ( 1 )
    {
        playersNumber = server->players.size();
        for ( key = 0 ; key < playersNumber ; key ++ )
        {
            player = server->players[key];  
            requestLength = read ( player->socket , (void*)&message , 255 );
            if ( requestLength < 0 )
            {
                perror ( "read" );
            }
            else
            {
                /*
                    If I uncomment the line, it will write data to
                    the socket and finish the whole program.

                    If I do no uncomment it, the programs runs in a loop further.
                */

                //int result = write ( player->socket , "reply\0" , 6 );
            };
        }
        sleep(1);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T07:46:50.200

您可能正在写入一个死套接字并获得一个`SIGPIPE`默认操作是终止程序。你可以：

*   处理 SIGPIPE
*   传给`MSG_NOSIGNAL`_`send(2)`
*   设置`SO_NOSIGPIPE`使用`setsockopt`（它不是便携式的）

# c++ - C++ 中单一类型和单一元素的通用容器

> ID：11841377
> 
> 赞同：4
> 
> 时间：2012-08-07T07:44:34.930
> 
> 标签：c++, templates, generics, containers

我需要一个包含单个任意值的容器/包装器 C++ 类。设置此值后，仅应接受相同类型的值。

这是我一直在试验的代码。

```
struct Genome {

struct FitnessConcept {};

template<typename T>
struct Fitness : public FitnessConcept{
    T value;        
    Fitness(T value) : value(value){}
};

std::shared_ptr<FitnessConcept> fitness;

template<typename T> 
void setFitness(T value) {
    fitness.reset(new Fitness<T>(value));               
}

template<typename T>
T getFitness() {
    return static_cast<Fitness<T>*>(fitness.get())->value;
}           
}; 
```

虽然`Genome`可以保存任意值，但一旦设置了第一个值，它就不会限制类型，即以下代码有效：

```
Genome g;
g.setFitness(0.2);
g.setFitness("foo"); //this should fail 
```

**更新**

编译和运行时失败都可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:45:37.893

除了使用类似的库之外`Boost.Any`，您的源代码的小修改已经可以工作了。只需添加一个模板构造函数来初始化，并在新旧类型之间`Genome`使用（实现定义的）运算符进行相等性测试。`typeid()`

```
#include<stdexcept>
#include<memory>
#include<typeinfo>

class Genome 
{
private:
        class FitnessConcept 
        {
        public:
                virtual ~FitnessConcept() {}
        };

        template<typename T>
        class Fitness
        : 
                public FitnessConcept
        {
        public:
                explicit Fitness(T v)
                : 
                        value_(v) 
                {}      

                T value() 
                { 
                        return value_; 
                }

        private:
                T value_;                   
        };

public:
        template<typename T>
        explicit Genome(T v)
        : 
                fitness_(new Fitness<T>(v)) 
        {}

        template<typename T> 
        void setFitness(T v) 
        {
                auto u = std::make_shared< Fitness<T> >(v);
                if (typeid(fitness_).name() == typeid(u).name())
                        fitness_ = u;
                else
                        throw std::invalid_argument("cannot change initialized genome type\n");
        }

        template<typename T>
        T getFitness() {
                return static_cast<Fitness<T>*>(fitness_.get())->value();
        }

private:
        std::shared_ptr<FitnessConcept> fitness_;           
};

int main()
{
        Genome g(1.0);          // OK
        g.setFitness(2.0);      // OK
        g.setFitness("3.0");    // throws exception

        return 0;
} 
```

在[Ideone](http://ideone.com/FbZZo)上输出。有几种可能的变化。例如，如果您执行 a then如果当前的基础类型不可转换为新类型，`dynamic_cast< u->get() >(fitness_->get())`则会引发异常。这将允许您更改为派生类型，但不能更改为完全不相关的类型。`std::bad_cast``Genome``Genome`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T08:07:51.150

此代码基于[boost::any](http://www.boost.org/doc/libs/1_50_0/doc/html/any.html)。它使用类型擦除来存储任意值并禁止分配给它。我去掉了铸造机械，使它更容易看清。

也许你可以在包装方面取得一些成功，`boost::any`而不是完全重新实现，但我不确定这一点，你需要对演员表有所照顾。

它还禁止复制和移动，因为我懒得处理这个，但你的完整实现应该有它。

您还想给它起一个更有意义的名称。

```
#include <typeinfo>
#include <iostream>

class reassign_any {
public:
  reassign_any() : content_(nullptr) {}
  template <typename T>
  reassign_any(const T& x) : content_(new holder<T>(x)) {}

  ~reassign_any() {
    // no need to check for null
    delete content_;
  }

  reassign_any(const reassign_any&) = delete;
  reassign_any& operator=(const reassign_any&) = delete;
  reassign_any(reassign_any&&) = delete;
  reassign_any& operator=(reassign_any&&) = delete;

  bool empty() const { return !content_; }

  template <typename T>
  bool set(const T& t) {
    if(content_) {
      // check for type equality of held value and value about to be
      // set
      if(content_->type() == typeid(T)) {
        delete content_;
        content_ = new holder<T>(t);
        return true;
      } else {
        return false;
      }
    } else {
      // just create
      content_ = new holder<T>(t);
      return true;
    }
  }

  template <typename T>
  T* get() {
    return content_->type() == typeid(T) 
      ? &static_cast<holder<T>*>(content_)->held
      : 0;
  }

private:
  class placeholder
  {
  public: // structors

    virtual ~placeholder()
    {
    }

    virtual const std::type_info & type() const = 0;
  };

  template<typename ValueType>
  class holder : public placeholder
  {
  public: // structors
    holder(const ValueType & value)
      : held(value)
    {
    }

    virtual const std::type_info & type() const
    {
      return typeid(ValueType);
    }
  public: // representation
    ValueType held;
  private: // intentionally left unimplemented
    holder & operator=(const holder &);
  };

private:
  placeholder* content_;
};

int main()
{
  reassign_any x;
  x.set(3);
  if(x.get<int>())
    std::cout << "int set" << std::endl;

  if(x.set(3.f)) {
    std::cout << "this shouldn't be printed" << std::endl;
  } else {
    std::cout << "this should be printed" << std::endl;
  }
  if(x.set(23)) {
    std::cout << "this should be printed" << std::endl;
  } else {
    std::cout << "this shouldn't be printed" << std::endl;
  }

  return 0;
} 
```

不相关的说明：Boost.TypeErasure 最近接受了审查。我真的很想尝试用它来实现这个版本的 any 至少看看实现是否允许它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T07:55:30.117

我不知道这种容器类型，但我有一个建议：为什么不添加检查`setFitness()`值的类型是否与当前值的类型相同？这样你就可以保证类型每次都是一样的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T07:57:42.037

我认为您在这里尝试做的问题是模板与所有类型一样，必须在编译时完全指定。鉴于这种限制，像这样的简单类并没有什么好处：

```
template<typename T>
class Fitness {
    T value;        
    Fitness(T value) : value(value){}

    /* Copy construct, assign, & Compare in the usual way */

}; 
```

# regex - 以下 VBA 正则表达式的解释？

> ID：11841378
> 
> 赞同：1
> 
> 时间：2012-08-07T07:44:36.050
> 
> 标签：regex, vba, excel

我从互联网本身获取了这个正则表达式

```
 RegExp.Pattern = "^(?:(?:(?:0?[13578]|1[02])(\/)31)\1|(?:(?:0?[1,3-9]|1[0-2])(\/)(?:29|30)\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:0?2(\/)29\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:(?:0?[1-9])|(?:1[0-2]))(\/)(?:0?[1-9]|1\d|2[0-8])\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$" 
```

我只知道正则表达式的基本细节而不是所有细节我知道的是它检查日期是否为 dd/mm/yyyy 格式以及日期是否为闰年

我也不知道 ?:?: 等是什么意思。

谁能通过解释上述正则表达式中每个字符的含义来告诉我这个正则表达式的全部含义。

这对我的学习有很大帮助，因为我无法理解正则表达式中存在的大多数字符

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:22:15.893

你已经为学习目的选择了一个可怕的正则表达式，这是肯定的（如果不是彻底的错误，它至少包含一些缺陷，但我不会调试这个烂摊子）。有人可能会争辩说，这是一个最好使用不同工具解决的问题的好例子。

我建议您先阅读[基本的正则表达式教程](http://www.regular-expressions.info/tutorial.html)。以下是一些可以帮助您在那里找到相关主题的提示：

```
^      Start of string anchor
(?...) Non-capturing group
(...)  Capturing group
[...]  Character class
?      Quantifier (1 or 0 repetition of the previous token)
|      Alternation ("or")
\2     Backreference to the second capturing group
\d     Shorthand for digit
\/     (Unnecessary escape sequence, a simple / would work just fine)
$      End of string anchor 
```

# .htaccess - .htaccess 重定向忽略端口

> ID：11841390
> 
> 赞同：2
> 
> 时间：2012-08-07T07:45:33.087
> 
> 标签：.htaccess, redirect, ports

我的 .htaccess 中有以下内容可将非 www 重定向到 www：

```
RewriteCond %{HTTP_HOST} !^(.*)\.mysite\.com$ 
RewriteRule ^(.*)$ http://www.mysite.com/$1 [R=301,L] 
```

这工作正常，但访问`www.mysite.com:8080`重定向以`www.mysite.com`从我的 .htaccess 文件中删除上述行会导致对端口 8080 的访问正常工作。

所以我知道是这两行导致了这个问题。

我希望仍然有这种影响，将非 www 重定向到 www，但我希望重定向来维护端口。

我已经尝试过使用上述各种版本，`%{SERVER_PORT}`但没有运气，它们要么不起作用，要么导致重定向循环。

谢谢杰克

**编辑**

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}/index.html !-f
RewriteCond %{REQUEST_FILENAME}/index.php !-f
RewriteRule . index.php/$1 [L] 
```

**编辑 2**

我现在已经尝试过了：

```
RewriteCond %{SERVER_PORT} ^8080$
RewriteCond %{HTTP_HOST} !^(.*)\.mysite\.com:8080$ 
RewriteRule ^(.*)$ http://www.mysite.com:8080/$1 [R=301,L] 
```

在尝试将端口 8080 上的请求再次重定向到端口 8080 时，此操作失败并重定向到`www.mysite.com`没有端口。如果端口是 8080，那么有用的是什么都不做，因为这仅用于测试，所以我不需要非 www/www 重定向，例如

```
RewriteCond %{SERVER_PORT} ^8080$
RewriteRule [Break here and do nothing more] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T22:07:03.723

在这里回答我自己的问题。但基本上试图在 .htaccess 中引导端口是行不通的。

我正在使用 Varnish 并且想要操纵请求，但是因为 Varnish 在一个端口上而 Apache 在另一个端口上，所以很难说这里*实际上*正在发生。

总之我放弃了。

# c++ - 绘制 NURBS 曲线？

> ID：11841391
> 
> 赞同：3
> 
> 时间：2012-08-07T07:45:34.877
> 
> 标签：c++, c, curve, nurbs, opennurbs

在过去的一周里，我一直面临着这个问题。对于我当前的项目，我需要绘制 NURBS 曲线，该项目已经使用 OpenNURBS，但我无法弄清楚如何使用它。

我的问题是，如何从几个控制点获得曲线点？

我做了很多搜索，我看到了这个网站： http: [//www.nar-associates.com/nurbs/c_code.html](http://www.nar-associates.com/nurbs/c_code.html)

我可以使用代码，但我不明白如何扩展/简化它以使用 N 个控制点。

（另外，我使用的是 C++，所以我将代码从页面转换为所述语言，特定于 C++ 的答案会更好，但我在语言之间转换没有任何问题。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:19:00.013

试试这个库：

[http://libnurbs.sourceforge.net/](http://libnurbs.sourceforge.net/)

非均匀有理 B 样条 (NURBS) 曲线和曲面是非常通用的数学曲面，广泛用于表示计算机图形中复杂的三维形状。

libnurbs 的目标是提供一个干净、健壮和强大的库，能够定义、操作和分析 NURBS 曲线和曲面。我们将在 openNURBS 库提供的基础上进行构建，实现该库中缺少的功能并根据需要进行更改。openNURBS 工作的目标是增加各种 CAD 系统之间的互操作性，因此他们没有动力开发或发布功能更全的库（即 Rhino，他们的商业平台）——因此需要这个项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-10T16:54:09.430

[您可以使用此](http://nurbscalculator.in)免费工具在线绘制 NURBS 曲线。这是一个基于 webGL 的应用程序，在 Chrome 浏览器中效果最好。在这里，您可以绘制具有 N 个控制点的曲线，并查看曲线上与 au 参数对应的点的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-28T18:44:24.463

这是我的做法

1.  做曲线

一个。创建曲线对象（尺寸、有理标志（是否有权重）、曲线度数+1、您有多少控制点）

```
 ON_NurbsCurve thisCurve(3, false, order, controlPoints.size()); 
```

湾。向曲线添加控制点

```
for(int i = 0; i <controlPoints.size(); ++i)
{
   ON_3dPoint cpPosition = controlPoints[i];
   thisCurve.SetCV(i, cpPosition.x);
} 
```

C。添加结

一、如果你有knot_count = cv_count + degree + 1

```
for (int i = 1; i < knotValues.size() - 1; ++i)
   thisCurve.SetKnot(i - 1, knotValues[i]); 
```

二、如果你有knot_count = cv_count + degree - 1

```
for (int i = 0; i < knotValues.size(); ++i)
   thisCurve.SetKnot(i, knotValues[i]); 
```

2.  采样曲线

一个。检查曲线是否有效

```
if (thisCurve.IsValid())
{ 
```

湾。获取曲线的参数范围

```
double maxU = knotValues.back();
double minU = knotValues.front(); 
```

C。插

```
double quadrature = 10;
for (unsigned int i = 0; i < quadrature; ++i)
{
  double t = ((maxU - minU) * (i) / (quadrature - 1)) + minU;
  double pointsOut[3]; 
```

d。评估这需要（曲线的参数，多少导数，什么维度，存储值的双精度数组）

```
 bool successful = thisCurve.Evaluate(t, 0, 3, pointsOut);
  if (successful)
    curvePoints.push_back(ON_3dPoint(pointsOut[0], pointsOut[1], pointsOut[2]));
  else
    std::cout << "evaluation not successful " << std::endl; 
```

e. 清理

```
 delete [] pointsOut;
}

thisCurve.Destroy(); 
```

# jquery - 同位素排序根本没有发挥应有的作用

> ID：11841395
> 
> 赞同：0
> 
> 时间：2012-08-07T07:45:46.127
> 
> 标签：jquery, jquery-isotope

我正在为页面设置以下内容（顺便说一下，同位素砌体系统工作得很好，只是不是那种）：

```
<script type="text/javascript">
$(function(){

  var $container = $('#wall');

  $container.isotope({
    itemSelector : '.block2',
    getSortData : {
      name : function ( $elem ) {
        return $elem.find('.name').text();
      }
    },
    getSortData : {
      site : function ( $elem ) {
        return $elem.find('.site').text();
      }
    }
  });

  $container.infinitescroll({
    navSelector  : '#page_nav',    // selector for the paged navigation 
    nextSelector : '#page_nav a',  // selector for the NEXT link (to page 2)
    itemSelector : '.block2',     // selector for all items you'll retrieve
    loading: {
        finishedMsg: 'No more pages to load.',
        img: 'http://i.imgur.com/qkKy8.gif'
      }
    },
    // call Isotope as a callback
    function( newElements ) {
      $container.isotope( 'appended', $( newElements ) ); 
    }
  );
});
</script> 
```

带有示例数据：

```
<div class="block2">
<li class="list_item">
<div class="list_item_view">
<div class="list_item_name" title="JETS Journey 2011" style=font-size:11px;>
<span class="name">Jets Journey 2011</span></div>
<div class="site"><span class="site">abc.com</span></div></div></div>

<div class="block2">
<li class="list_item">
<div class="list_item_view">
<div class="list_item_name" title="Killers" style=font-size:11px;>
<span class="name">Killers</span></div>
<div class="site"><span class="site">ydc.com</span></div></div></div>

<div class="block2">
<li class="list_item">
<div class="list_item_view">
<div class="list_item_name" title="Best yet" style=font-size:11px;>
<span class="name">Best yet</span></div>
<div class="site"><span class="site">cagey.com</span></div></div></div> 
```

并调用排序更改：

```
<a href=#sortBy=name>name</a> <a href=#sortBy=site>site</a> 
```

但是当我单击排序链接时根本没有任何反应——我是否在某处遗漏了一个简单的点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:47:49.533

有关工作示例，请参见[此处的小提琴。](http://jsfiddle.net/Rz4pC/)或[将第一个排序出来](http://jsfiddle.net/desandro/8QkEw/)并按[升序和降序排序](http://jsfiddle.net/circlecube/LNRzZ/)。

# java - 如何避免使用 log4j 丢失日志

> ID：11841397
> 
> 赞同：2
> 
> 时间：2012-08-07T07:45:54.637
> 
> 标签：java, logging, log4j

我有这种情况。

我们有一个日志归档脚本，用于归档超过 8 天的日志。我们希望确保在存档之前不会丢失任何日志。

我已设置`maxBackupIndex`为 10 和`maxFileSize`10MB。如果我在 8 天内收到更多事务，占用超过 100MB 的日志，那么我可能会丢失一些日志。

我怎样才能避免这种情况？我可以设置`maxBackupIndex`为无穷大吗？

在此先感谢您对此问题的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:58:17.037

将 maxBackupIndex 和 maxFileSize 设置为足够高的数字以允许保留合理的工作负载，但不要太高以至于导致超出磁盘空间。

然后创建一个外部任务（cron 或 windows 计划任务）来删除/归档超过 8 天的日志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T07:57:13.093

如果您无法保留日志，您还可以使用脚本来压缩一天之前的文件。

`maxFileSize`是一个`int`。您可以将其设置为 1000000000 或任何会占用太多磁盘空间的值。你也可以增加到`maxFileSize`100MB 或 1GB。

# proxy - 即使设置了 RSYNC_PROXY，rsync 代理也不起作用

> ID：11841398
> 
> 赞同：1
> 
> 时间：2012-08-07T07:45:58.487
> 
> 标签：proxy, environment-variables, rsync, macports, sudo

我支持一个 http 代理，并且想使用`sudo port selfupdate`. 但它总是失败并显示以下输出：

```
$ sudo port -d selfupdate
DEBUG: Copying /Users/simon/Library/Preferences/com.apple.dt.Xcode.plist to /opt/local/var/macports/home/Library/Preferences
DEBUG: MacPorts sources location: /opt/local/var/macports/sources/rsync.macports.org/release/tarballs
--->  Updating MacPorts base sources using rsync
rsync: getaddrinfo: rsync.macports.org 873: nodename nor servname provided, or not known
rsync error: error in socket IO (code 10) at /SourceCache/rsync/rsync-42/rsync/clientserver.c(105) [receiver=2.6.9]
Command failed: /usr/bin/rsync -rtzv --delete-after rsync://rsync.macports.org/release/tarballs/base.tar /opt/local/var/macports/sources/rsync.macports.org/release/tarballs
Exit code: 10
DEBUG: Error synchronizing MacPorts sources: command execution failed
    while executing
"macports::selfupdate [array get global_options] base_updated"
Error: /opt/local/bin/port: port selfupdate failed: Error synchronizing MacPorts sources: command execution failed 
```

显然问题是`rsync`没有连接到服务器，所以我`rsync`单独尝试，它给了我类似的结果。

```
$ sudo /usr/bin/rsync -rtzvvv --delete-after rsync://rsync.macports.org/release/tarballs/base.tar /opt/local/var/macports/sources/rsync.macports.org/release/tarballs
opening tcp connection to rsync.macports.org port 873
rsync: getaddrinfo: rsync.macports.org 873: nodename nor servname provided, or not known
rsync error: error in socket IO (code 10) at /SourceCache/rsync/rsync-42/rsync/clientserver.c(105) [receiver=2.6.9]
_exit_cleanup(code=10, file=/SourceCache/rsync/rsync-42/rsync/clientserver.c, line=105): about to call exit(10) 
```

我确实`RSYNC_PROXY`设置了我的环境变量并且代理正在工作，但根据它的输出，`rsync`它似乎没有使用我给它的代理，而是尝试直接连接。任何人都可以帮忙吗？谢谢！

如果需要，这里有一些更多信息。

```
$ echo $RSYNC_PROXY
127.0.0.1:3128
$ curl -x localhost:3128 http://rsync.macports.org:873/
@RSYNCD: 30.0
$ uname -a
Darwin Simon-MP.local 12.0.0 Darwin Kernel Version 12.0.0: Sun Jun 24 23:00:16 PDT 2012; root:xnu-2050.7.9~1/RELEASE_X86_64 x86_64 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T02:30:03.350

问题解决了。

事实证明，`sudo`确实将 RSYNC_PROXY 环境传递给`rsync`. 为了保护环境`sudo`，接受以下`-E`选项：

> -E（保留环境）选项将覆盖 sudoers(5) 中的 env_reset 选项。仅当匹配的命令具有 SETENV 标记或在 sudoers(5) 中设置了 setenv 选项时，它才可用。

# php - rapidshare API上传恢复错误

> ID：11841404
> 
> 赞同：0
> 
> 时间：2012-08-07T07:46:38.850
> 
> 标签：php, qt, qt4.7, rapidshare

**Error: chunk size has to 500.000 or more if it is not the final chunk**在调用 rapidshare API 的 uploadresume 方法时是什么意思。我发送了超过 500,000 字节的数据，但仍然出现相同的错误。

我必须设置一些标题吗？

# java - java 小程序 cmd+shift mac osx

> ID：11841407
> 
> 赞同：2
> 
> 时间：2012-08-07T07:46:49.730
> 
> 标签：java, macos, swing, applet

`cmd`在 mac osx 上，如果您在浏览器中运行 java 小程序，则可以通过按+将小程序从浏览器中弹出`shift`。当您想在小程序中拖放某些东西时，这实际上是一种解决方法 - 浏览器内的小程序中的拖放在 mac osx 上被破坏了。

所以我的问题是，有什么方法可以检查小程序是否在使用 Java 的浏览器之外？你们有任何想法吗？

**编辑：**在 JRE 7 以及拖放中，将框架从浏览器中分离出来的 这个`cmd`+功能被破坏了。`shift`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T16:04:20.437

*将我的评论变成答案。*

您可以尝试通过自己迭代[父链接](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#getParent%28%29)或使用[`SwingUtilities.getRoot`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html#getRoot%28java.awt.Component%29)or来定位包含小程序的根窗口[`SwingUtilities.getWindowAncestor`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html#getWindowAncestor%28java.awt.Component%29)。运气好的话，那个窗口的类名，或者它的一些其他属性，会给你一个可以使用的指示。

# java - 将xml文件注入spring bean

> ID：11841408
> 
> 赞同：1
> 
> 时间：2012-08-07T07:46:50.820
> 
> 标签：java, spring, file-io

我正在尝试从我的 DAO 中的远程位置读取 xml 文件。

```
<bean id="queryDAO"
      class="com.contextweb.openapi.commons.dao.reporting.impl.QueryDAOImpl">
  <property name="dataSource" ref="myDS"/>
  <property name="inputSource" ref="xmlInputSource"/>
</bean>

<bean id="fileInputStream" class="java.io.FileInputStream">
  <constructor-arg index="0" type="java.lang.String"
                   value="${queriesFileLocation}"/>
</bean>
<bean id="xmlInputSource" class="org.xml.sax.InputSource">
  <constructor-arg index="0" >
    <ref bean="fileInputStream"/>
  </constructor-arg>
</bean> 
```

我第一次能够阅读 XML。对于后续请求，输入流已用尽。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:53:03.393

希望你知道在春天，默认情况下所有的 bean 对象都是单例的。`singleton="false"`因此，请尝试通过在这些 bean 声明中设置字段来将 fileInputStream 和 xmlInputSource 提及为非单例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T14:14:42.060

您正在使用`FileInputStream`这就是问题所在。一旦您读取了流中的数据，就无法再次读取内容。溪流已经走到尽头。

解决此问题的方法是使用另一个类`BufferedInputStream`，该类支持重置指向文件中任何位置的流。

以下示例显示`BufferedInputStream`只打开一次，可用于多次读取文件。

```
BufferedInputStream bis = new BufferedInputStream (new FileInputStream("test.txt"));

        int content;
        int i = 0;

        while (i < 5) {

            //Mark so that you could reset the stream to be beginning of file again when  you want to read it.
            bis.mark(0);

            while((content = bis.read()) != -1){

                //read the file contents.
                System.out.print((char) content);
            }
                System.out.println("Resetting ");
                bis.reset();
                i++;

        }

    } 
```

有捕捉。由于您不是自己使用此类，而是依赖于执行此操作，因此您需要通过扩展此类并覆盖 和 方法来`org.xml.sax.InputSource`创建自己的类以开始文件。`InputSource``getCharacterStream()``getByteStream()``mark()` `reset()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T07:53:28.870

也许您可以尝试内联 FileInputStream 以便每次都强制一个新实例？

```
<bean id="queryDAO" class="com.contextweb.openapi.commons.dao.reporting.impl.QueryDAOImpl">
    <property name="dataSource" ref="contextAdRptDS"/>
    <property name="inputSource">
        <bean class="org.xml.sax.InputSource">
            <constructor-arg index="0" >
                    <bean class="java.io.FileInputStream">
                        <constructor-arg index="0" type="java.lang.String" value="${queriesFileLocation}"/>
                    </bean>
            </constructor-arg>
        </bean>
    </property>
</bean> 
```

# iphone - NSURLConnection 与 base64 的兼容性

> ID：11841410
> 
> 赞同：0
> 
> 时间：2012-08-07T07:46:57.343
> 
> 标签：iphone, ios, ipad, base64, nsurlconnection

我正在尝试在请求正文中发送某些参数，同时制作`NSURLConnection`.

参数之一被`base64`编码。

这是参数 -

"GZ3m8ImhowVFr01Jf0UAwUWgJ3MvNYgDmkb0x2cOauw/rwLsPanFIHb6xigvi2WR/z47OOOk8Ur+ ev8U2DI5ThDyNZtjfYyMRql7l6DJ9qlNlftwe7bX6qIzkstUBTI5xor9CBYh19lAkc5I207eZAwZ arR85hynWJ9IVM/dQ5TNyjLJy5lABBATkWhdGfwi+0VxYyY7iMYjq+Iq1jkizPN1bKgLCJ0duvPz z003PNQI5oJHuX3zUn3dYl7czUVOwMhJE4SJ7f3U7YuPWJIKfEPaN69h8FsGQRL/+kTx/SdedeiG /Q4I49duSV9apDrWKX+LGaJsr9nCQ9L+ZGbRFg=="

我不认为它很大。或者是吗？

我的请求每次都失败。它说“客户端在收到整个响应之前关闭了连接”。“500内部服务器错误”

是`base64`导致问题的参数。

方法类型是“ `GET`”，是否`NSURLConnection`允许`base64`编码对象与正文一起发送？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:26:07.950

Base64 与您的连接问题没有任何共同之处。不获取也不发布。Base64 是一个巨大的字符串（我猜是 ASCII，但不确定），它像普通字符串一样通过 get 或 post 传输。您的问题可能如下：您使用 GET，并尝试发送一个超大的 Base64 字符串，由于其巨大的大小而无法通过 GET 发送（我记得，GET 也应该用于非大字符串请求）。

您的选择：使用 POST。因此，您将能够发送大量数据作为参数值。

# typo3 - TYPO3：删除 powermail 验证

> ID：11841412
> 
> 赞同：0
> 
> 时间：2012-08-07T07:47:14.190
> 
> 标签：typo3

我已经在 TYPO3 4.5 版中安装了 Powermail 1.6.8。

当我在空表单上单击提交时，会出现一些无法设置样式的错误消息，因为它们具有内联样式。我想使用 jQuery 插件来检查验证。如何停用正常的 powermail 验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:38:38.957

我不知道您是否已经找到解决方案，但默认情况下您可以使用 TYPO3 常量更改它：

```
plugin.powermail.js.validation = 0 
```

如果您选择“模板”并在第三列（后端）弹出的下拉列表中选择“常量编辑器”，您可以自己更改很多设置。

还有另一个设置可以禁用 Powermail 中的所有 javascript 表单验证和“特殊”输入类型：

```
plugin.powermail.js.alwaysInclude = 0 
```

您的 Powermail 1.6.8 的更多常量和设置[可以在这里找到](http://typo3.org/extension-manuals/powermail/1.6.8/view/1/6/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T07:57:24.150

你只需要添加

```
page.includeJSFooterlibs.powermailJQueryFormValidationLanguage >
page.includeJSFooterlibs.powermailJQueryFormValidation > 
```

在您的设置 TS

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-02T13:56:43.113

如果您只想使用浏览器内部验证，您可以通过“常量编辑器”->“Powermail 附加”-> 取消选中这两个复选框来禁用 php 和 js 验证。请参阅附加屏幕。

[![在此处输入图像描述](../Images/f07078750347a92b0a70d7d40420f65f.png)](https://i.stack.imgur.com/w0GWg.png)

# regex - 如何从字符串中删除新行

> ID：11841416
> 
> 赞同：0
> 
> 时间：2012-08-07T07:47:25.560
> 
> 标签：regex, escript

我正在研究 Siebel CRM 并在 eScript 中使用正则表达式。代码是

```
var regexp2=/[ \t]{2,}/g;
var regexp4=/[ \n]{2,}/g;
var regexp6=/\r\n|\r|\n/g;
var regexp3=s/\r|\n/g;
temp = temp.replace(regexp2,' ').replace(regexp4,' ').replace(regexp6,'').replace(regexp3,''); 
```

此代码正在替换代码中写入的 Tab 和其他字符，但问题是如果新行出现在字符串的末尾，代码将删除它，但如果两个字符串之间有新行，它不管用。即 '\n' 没有被删除。

第二件事，如果我正在尝试

```
select row_id,ADDR from siebel.S_ADDR_PER
where ADDR LIKE '%\n%' 
```

但是，它没有给我任何记录，如果我以其他方式搜索（没有 where 条件），就会有记录。

请帮忙。
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:39:03.403

我写了这样的东西：

```
sOpStr = sOpStr.replace(/\n\r/g," "); //replace new lines with a blank.
sOpStr = sOpStr.replace(/\n/g," "); //replace new lines with a blank.
sOpStr = sOpStr.replace(/[\n\r]/g," "); //replace new lines with a blank.
sOpStr = sOpStr.replace(/[\n]/g," "); //replace new lines with a blank. ` 
```

# android - 如何获取wifi热点状态

> ID：11841421
> 
> 赞同：5
> 
> 时间：2012-08-07T07:48:05.207
> 
> 标签：android, android-wifi, android-wireless

我正在手机中创建**wifi 热点**，我希望在打开或关闭热点时获取其状态更改事件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T13:41:54.040

请看下面的代码。这将帮助你

```
public class WifiApManager {
    private final WifiManager mWifiManager;

    public WifiApManager(Context context) {
        mWifiManager = (WifiManager)context.getSystemService(Context.WIFI_SERVICE);
    }

    /*the following method is for getting the wifi hotspot state*/

    public WIFI_AP_STATE getWifiApState() {
        try {
            Method method = mWifiManager.getClass().getMethod("getWifiApState");

            int tmp = ((Integer) method.invoke(mWifiManager));

            // Fix for Android 4
            if (tmp > 10) {
                tmp = tmp - 10;
            }

            return WIFI_AP_STATE.class.getEnumConstants()[tmp];
        } catch (Exception e) {
            Log.e(this.getClass().toString(), "", e);
            return WIFI_AP_STATE.WIFI_AP_STATE_FAILED;
        }
    }

    /**
     * Return whether Wi-Fi Hotspot is enabled or disabled.
     * 
     * @return {@code true} if Wi-Fi AP is enabled
     * @see #getWifiApState()
     */
    public boolean isWifiApEnabled() {
        return getWifiApState() == WIFI_AP_STATE.WIFI_AP_STATE_ENABLED;
    }

} 
```

其中 WIFI_AP_STATE 是一个枚举，如下所示

```
 public enum WIFI_AP_STATE {
      WIFI_AP_STATE_DISABLING, 
      WIFI_AP_STATE_DISABLED, 
      WIFI_AP_STATE_ENABLING, 
      WIFI_AP_STATE_ENABLED, 
      WIFI_AP_STATE_FAILED
  } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-03-22T18:47:28.367

要获取热点 AP 的当前状态，我使用：

```
final WifiManager wifiManager = (WifiManager) getSystemService(Context.WIFI_SERVICE);
final int apState = (Integer) wifiManager.getClass().getMethod("getWifiApState").invoke(wifiManager);

if (apState == 13) {
    // Ap Enabled
} 
```

要在热点 AP 启用/禁用时获取更新，请在 BroadcastReceiver 中接收“android.net.wifi.WIFI_AP_STATE_CHANGED”意图：

```
public class WifiAPReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        if (intent.getAction() == "android.net.wifi.WIFI_AP_STATE_CHANGED") {
            int apState = intent.getIntExtra(WifiManager.EXTRA_WIFI_STATE, 0);
            if (apState == 13) {
                // Hotspot AP is enabled
            } else {
                // Hotspot AP is disabled/not ready
            }
        }
    }
} 
```

另外，不要忘记您在 Manifest 中的声明和权限：

```
<receiver android:name=".WifiAPReceiver">
    <intent-filter>
        <action android:name="android.net.wifi.WIFI_AP_STATE_CHANGED" />
    </intent-filter>
</receiver>

<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T08:02:35.290

您可以使用 BroadcastReciver 监控 wifi 状态。这是一个如何实现它的示例： http: [//silverballsoftware.com/android-monitor-wifi-state-with-broadcastreceiver](http://silverballsoftware.com/android-monitor-wifi-state-with-broadcastreceiver)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-07T11:24:49.347

**尝试这个**

将此代码写入 OnCreate() 方法

```
ConnectivityManager cm = (ConnectivityManager) getSystemService(con.CONNECTIVITY_SERVICE);
        NetworkInfo netInfo = cm.getActiveNetworkInfo();
        if (netInfo != null && netInfo.isConnectedOrConnecting()) {

            Success 
        }

        else {
                       Give Some Error Message
             } 
```

还提到清单文件的必要权限

# reporting-services - 在 CRM 2011 超链接中查看报告不起作用

> ID：11841427
> 
> 赞同：3
> 
> 时间：2012-08-07T07:48:24.377
> 
> 标签：reporting-services, dynamics-crm-2011

我有一个 RDL 文件，其中包含一个相当简单的报告，而该报告又必须部署到 CRM 2011。

报告本身运行良好，按预期显示数据；它应该**只在本地**工作，因此它利用对过滤视图的直接 SQL 访问来获取数据。

当我尝试插入旨在让用户快速打开记录的超链接时，我发现它们在我预览报告时显然可以正常工作，但是在 CRM 上部署时，它们被剥夺了“活动”部分，以及所有我剩下的是一行彩色的文本。我没有收到任何错误，并且报告本身一直运行*良好*。

我引用了这个链接来构建“活动”文本-> [CRM 报告钻取操作](http://www.powerobjects.com/blog/2011/12/01/microsoft-dynamics-crm-report-drill-thru-action-to-crm-record/)，基本上利用文本框的“操作”属性和`CRM_URL`参数，如下所示：

*这进入文本框属性 -> 操作 -> “转到 URL”*

```
=Iif(IsNothing(Parameters!CRM_URL.Value), 
    "", 
    Parameters!CRM_URL.Value + 
        "?ID={" + Fields!id.Value.ToString() + 
        "}&LogicalName=myEntitySchemaName") 
```

我尝试搜索谷歌，但感觉要么没有人遇到同样的问题，要么解决方案太简单了，没有人写任何关于它的东西。

任何人以前都遇到过这个问题并且知道如何面对它？

**更新** *在修改了更多代码之后*

我试图用作“转到 url”操作的表达式实际上是**正确评估**的。如果我将其复制粘贴为文本框的内容表达式，我可以看到完整的 URL（反过来，在浏览器中复制粘贴时*会按预期打开记录*）。

另一个（也许不是）有用的信息是我们的环境正在运行**CRM 2011 UR3**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T06:03:35.163

我有这个完全相同的问题。要解决将 URL 置于操作中 | 转到**PLACEHOLDER**控件而不是文本框上的 URL。

我发现如果我使用文本框，自定义报告将在 Visual Studio 和 Reporting Services 中很好地预览，但是一旦我将 RDL 上传到 CRM，URL 就会被忽略。

将 URL 放在占位符上可以解决此问题（对我来说确实如此）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T13:40:31.870

你的表达看起来是正确的。您是否将 URL 放在文本框属性的“操作”上？进入正确的上下文菜单可能很棘手，因此请确保 Tablix 中没有任何内容被选中，然后右键单击文本框。

![右键点击](../Images/71b1e257633d6b96cfaeb7e5a86d9263.png) ![动作属性](../Images/dc886763bb186d367966389a03121519.png)

# asp.net - 果园：限制访问页面

> ID：11841429
> 
> 赞同：3
> 
> 时间：2012-08-07T07:48:53.363
> 
> 标签：asp.net, asp.net-mvc, acl, orchardcms

概括：

如何创建页面，只有经过身份验证的用户才能访问？（就像在旧式 ASP.NET 站点中拥有受密码保护的目录一样）

背景：

编写一个小型公司网站，员工应该能够在其中插入/更新/删除内容。对于非技术内容作者而言，仪表板似乎过于复杂且难以承受。

主意：

使用简单的编辑功能创建一个安全的“文件夹”，只有在登录后才能访问。

我知道，我可以使用图层隐藏/显示区域、小部件、菜单等。但是：如果有人输入正确的 URL，这不会限制访问，对吗？

这个怎么做？谢谢，莱因哈德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T22:24:45.217

有一个“查看内容”权限正是为此目的。它默认授予所有人。您可以自由更改它，因此只有特定角色才能被授予访问给定类型项目的权限。

# sybase - 寻找 sybase 的 sql profiler，因为我们使用的是隐藏执行的 SQL 脚本的 ORM

> ID：11841432
> 
> 赞同：1
> 
> 时间：2012-08-07T07:49:06.903
> 
> 标签：sybase, profiler

我正在寻找可用于 sybase 数据库的 sql profiler。由于我们使用的是我们自己定制的 ORM，我们不确定生成和执行的 SQL 脚本。理想情况下，分析器应该在任何时刻为一个帐户捕获在服务器中执行的 SQL 脚本。

非常感谢任何链接或参考。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T21:26:34.543

您可以使用[Embarcadero DB profiler](http://docwiki.embarcadero.com/DBOptimizer/en/Sybase#Profiler)或[ORMProfiler](http://www.ormprofiler.com/defaultgeneric.aspx)。如果您正在寻找免费的东西，请尝试使用[MDA 表](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.dc00497_1500/html/aserbsua/CHDDAJHA.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:51:34.190

最后，我还得到了`sybase`DB 分析工具[iWatch](http://www.exact-solutions.com/products/iwatch)的解决方案。

这个工具被发现有很多优点：
1\. 客户端-服务器架构设计
2\. DB 的实时统计而不是滚动日志。
3\. 支持多种数据库以及sybase，如MSSQL Server、DB2、Informix等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-07T08:39:12.800

添加一个名为 ASEMon 的工具。这是免费软件和轻量级的。

# asp.net-mvc - 在控制器和视图中处理 Icollection

> ID：11841434
> 
> 赞同：0
> 
> 时间：2012-08-07T07:49:14.590
> 
> 标签：asp.net-mvc, list, icollection

我有一个像这样的 2 个样本模型（我已经输入了我只想要的字段）

```
[Table("TripAllocation", Schema = "dbo")]
public class TripAllocation
{
    public int TripAllocationId { get; set; }
    public ICollection<Requisition> Requisitions { get; set; }

}

[Table("Requisition", Schema = "dbo")]
public class Requisition
{
    [Key]
    public int RequisitionId { get; set; }

    public int? TripAllocationId { get; set; }
    public TripAllocation TripAllocation { get; set; }

} 
```

所以现在我想通过 TripAllocation 表在 Requisition 表中选择 TripAllocationId 的值。我不想通过在申请视图中创建 driodownlist 来做到这一点。

我想从 TripAllocation 表中执行此操作，并添加 TripAllocationId 的申请列表。

那么如何通过使用 MVC 处理控制器和视图来做到这一点。

（当我创建旅行时，应将申请清单应用于一个 AllocationTripId）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T03:58:28.123

这基本上就是我想要的。当我通过旅行分配创建旅行分配时。我想为一个原始的 TripAllocation 添加一些申请列表。（但我可以在创建申请时简单地做，我可以通过在申请创建视图中创建一个下拉列表来为申请的一个瞬间添加一个 TripAllocation。但这不是我想要的。我想做与此相反的操作）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T16:03:48.610

I don't know if I fully understand your question, but it sounds like you want your view to display a list of requisitions searching by a `TripAllocationId`?

First, an assumption of mine based on your code sample, is that you're using LINQ-to-SQL which I haven't used for quite some time so forgive me if my code sample isn't 100% complete. But basically, you just need to use the `DataContext` to eager load the `Requisitions` on a `TripAllocation`. Your controller method would look something like this:

```
public ActionResult Requisitions(string id)
{
    TripAllocation allocation;
    List<Requisition> requisitions;

    using (var context = new MyDataContext)
    {
        allocation = context.TripAllocations.SingleOrDefault(c => c.TripAllocationId == id);
        requisitions = allocation.Requisitions.ToList();
    }

    return View(requisitions);
} 
```

If I've understood your question correctly, you'll pass your controller method a `TripAllocationId` and it will use LINQ-to-SQL to navigate the object graph and return to the view a `List<Requisition>`.

# c# - 从文本框接收数据并从单选按钮 c# 接收值

> ID：11841439
> 
> 赞同：1
> 
> 时间：2012-08-07T07:49:28.387
> 
> 标签：c#, radio-button

![在此处输入图像描述](../Images/ebd247782e20deb557e54d6aeca266d1.png)

如上图所示，有 3 种单选按钮和一个文本框。用户要搜索数据，用户需要填写文本框并选择要搜索的类型。该数据将以另一种形式出现。

这是我在搜索表单中的代码。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;    
using System.Xml;
using System.Xml.Linq;

namespace SliceLink
{
    public partial class SearchForm : Form
    {
        public Form2()
        {
            InitializeComponent();
        }

        private void panel1_Paint(object sender, PaintEventArgs e)
        {

        }

        string _radio;
        public string radio 
        {
            get { return this._radio;  }
            set { this._radio = value; }
        }

        public void button1_Click(object sender, EventArgs e)
        {
            //RadioButton rb = (RadioButton)sender;
            if (textBox1.Text == "")
                MessageBox.Show("Please enter keyword to search");
            else 
            {                              
                Form3 form3 = new Form3(textBox1.Text);
                form3.Show();   
            }        
        }
    }
} 
```

这是我在 viewForm 中查看的代码。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;    
using System.Xml;
using System.Xml.Linq;

namespace SliceLink
{
    public partial class ViewForm : Form
    {       
        public Form3(string sTEXT)
        {
            InitializeComponent();
            XmlDocument xml = new XmlDocument();            
            xml.Load("C:\\Users\\HDAdmin\\Documents\\SliceEngine\\SliceEngine\\bin\\Debug\\saya.xml");
            XmlNodeList xnList = xml.SelectNodes("/Patient/Patient/Name");
            //XmlNodeList xnList = xml.SelectNodes(sTEXT);
            foreach (XmlNode xn in xnList)
            {
                string name = xn.InnerText;                
                textBox1.Text = name;
            }
        }
    }
} 
```

我可以接收用户输入填写，`textbox`但我不知道如何检索用户选择的类型。有办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:10:38.293

接下来我将组织检查选定的单选按钮：

1.  对于每个单选按钮，`Tag`用数值（0、1、2 等）填充属性。
2.  创建具有相应值的枚举。
3.  **为所有**单选按钮的`Click`事件设置相同的事件处理程序。
***   检查事件处理程序`Tag`中单选按钮的值。`sender`**

 **所以，这里是表单的示例代码：

```
internal enum SearchType
{
    All = 0, Date = 1, Id = 2
}

public partial class MainForm : Form
{
    private SearchType _selectedSearchType = SearchType.All;

    private void searchButton_Click(object sender, EventArgs e)
    {
        // Use _selectedSearchType to do search.
    }

    private void radioButton_Click(object sender, EventArgs e)
    {
        _selectedSearchType = (SearchType)Enum.Parse(typeof(SearchType), ((Control)sender).Tag.ToString());
    }
} 
```

**好处：**您可以轻松添加任意数量的单选按钮、更改它们等，而无需更改支持代码。*您可以在不了解*单选按钮的情况下使用选定的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T07:53:26.403

您可以`enum`为不同的选项创建一个类型，然后在包含单选按钮的表单上创建一个公共`property`，并根据选择的选项返回相应的`enum`值。

所以你会得到类似的东西：

```
public enum FindType { DATE, ID, ALL } 
```

在你的`SearchForm`：

```
public FindType FindGrouping
{
   get
   {
      if (radioButtonDate.Checked)
         return FindType.DATE;
      // ... etc.
} 
```

并检索你的`ViewForm`价值`searchFormInstance.FindGrouping;`**

# asp.net - 如何根据主键在一个表中检索两个表外键数据

> ID：11841443
> 
> 赞同：0
> 
> 时间：2012-08-07T07:49:37.197
> 
> 标签：asp.net, foreign-keys, primary-key

我有以下三个表

**文件表**

```
FileId
FileNo 
```

**付款表**

```
 Id
  Amount
  FK_FileID 
```

**费用表**

```
 Id
  Amount
  FK_FileID 
```

我想要像这样的输出

```
FileNo Payment_Amount Expense_Amount
10001         220          150
10001         120          NULL
10001         150          NULL 
```

我想检索文件支付和费用数据。我发现了 1 条费用记录和 3 条付款记录，因此费用的另一行包括 null，反之亦然

我怎样才能？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:17:03.873

使用以下查询...

```
Select f.FileNo,p.Amount as Payment_Amount,e.Amount as Expense_Amount From File f inner   join        Payment p ON f.FileId = p.FK_FileID inner join Expense e on  e.FileId = p.FK_FileID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:51:16.933

我相信以下应该得到你想要的，它有点奇怪，但由于付款和费用之间没有关系，所以你必须分开做然后加入。您可以使用子 SELECT 语句来执行此操作，但我使用临时表是为了便于阅读。

```
SELECT              F.FileNo, F.FileId, P.Amount, 
                    ROW_NUMBER() OVER (PARTITION BY P.FileId order by P.Id) AS Row  
INTO                #Payments
FROM                File F
INNER JOIN          Payment P ON F.FileId = P.FileId

SELECT              F.FileNo, F.FileId, E.Amount, 
                    ROW_NUMBER() OVER (PARTITION BY E.FileId order by E.Id) AS Row  
INTO                #Expenses
FROM                File F
INNER JOIN          Expense E ON F.FileId = E.FileId

SELECT              COALESCE(tP.FileNo, tE.FileNo) AS FileNo,
                    tP.amount AS Payment_Amount,
                    tE.amount AS Expense_Amount 
FROM                #Payments tP
FULL JOIN           #Expenses tE ON tP.FileId = tE.FileId AND tP.Row = tE.Row 
```

我已经使用 ROW_NUMBER() 来获取一个数字，该数字取决于可能属于给定文件的每个付款和费用记录的 FileID。然后，我在 FULL JOIN（以及 FileID）中加入这些值，以便只加入一个实例，这消除了三个表之间的正常 INNER JOIN 会导致的问题。

排序可能是一个问题，因为它取决于哪个表（付款或费用）的记录​​最多。

当你测试它时让我知道它是如何进行的。

# c# - 基于 C# 的 SQL 查询引发异常

> ID：11841444
> 
> 赞同：-2
> 
> 时间：2012-08-07T07:49:40.927
> 
> 标签：c#, sql, ado.net

我想用

```
sqlid = new SqlCommand("SELECT Proj_id FROM Proj_details WHERE Proj_name = " +
                       strprojname, con);
con.Open();
id = (int)sqlid.ExecuteScalar(); 
```

在这里，我想检索我知道我的项目名称的特定项目的项目 ID。这`strprojname`是一个包含项目名称的字符串变量。如上所述使用是否正确......如果这样使用我会得到一个例外。

我该如何纠正？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:56:17.977

尝试以下代码示例，它对查询进行参数化并使用正确的结果值转换

```
sqlid = new SqlCommand("SELECT Proj_id FROM Proj_details WHERE Proj_name = @pname", con);
sqlid.Parameters.AddWithValue("@pname", strprojname);
con.Open();
id = Convert.ToInt32(sqlid.ExecuteScalar()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T07:57:29.663

**问题）：**

1.  您缺少引号：

    ```
    "SELECT Proj_id FROM Proj_details WHERE Proj_name = " + strprojname 
    ```

    可能会产生一个字符串，例如

    ```
    SELECT Proj_id FROM Proj_details WHERE Proj_name = ABC
    --                                                 ^^^
    --                                    should be 'ABC' or N'ABC' 
    ```

    这是无效的。

2.  您不要转义您的项目名称，这可能意味着 SQL 注入攻击成为可能。

**解决方案：**

我建议您使用参数化查询：

```
var sqlid = new SqlCommand("SELECT … WHERE Proj_name = @projectName", con)
sqlid.Parameters.Add("@projectName", strprojname); 
```

这样，您不必担心引号、转义项目名称和类似问题（如果您不使用参数，则必须自己处理）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T07:57:36.870

如果看起来像这样，流程会更好：

```
con.Open();
//string introduced only to shorten lines
string projQuery = "SELECT Proj_id FROM Proj_details WHERE Proj_name = @ProjectName";
using(SqlCommand sqlid = new SqlCommand(projQuery, con))
{
    sqlid.Parameters.AddWithValue("ProjectName", strprojname);
    id = (int)sqlid.ExecuteScalar();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-07T07:52:24.033

像下面这样使用，因为项目名称是字符串..

```
sqlid = new SqlCommand("select Proj_id from Proj_details where Proj_name='"+strprojname+"'" , con);  
con.Open(); id = (int)sqlid.ExecuteScalar(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-07T07:53:07.870

以下是一些突出的事情：

*   您缺少项目名称周围的引号。改成：

    ```
    sqlid = new SqlCommand("select Proj_id from Proj_details where Proj_name='"+strprojname + "'" , con); 
    ```

*   您不应仅通过将字符串附加在一起来构建 SQL 查询。这使您面临 SQL 注入攻击。使用[参数化查询](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)。

# asterisk - 将 confbridge 的所有频道踢到一起

> ID：11841449
> 
> 赞同：2
> 
> 时间：2012-08-07T07:49:57.167
> 
> 标签：asterisk

confbrdige 中是否有任何命令可以让我从会议中踢出所有频道？我可以看到一次只能踢一个频道的命令，但是如果我想一次性踢出会议室的所有频道怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:45:39.413

您可以使用以下命令踢出所有用户：

MeetMe 踢 [confno] 全部

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-19T18:28:21.513

我提交了补丁

```
confbridge kick <conference> all 
```

目前在 Asterisk V11 主干中可用

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-06-19T08:11:13.747

```
CONTROLLER:

function kickallconference(){
     $conf= $this->uri->segment(3);
     $data = $this->confmodel->kickall_conf($conf);
     $i = 0;
    while($i < count($data)){
     $result['conf']= $conf;
     $result['channel']= $data[$i]['channel'];
     $this->load->view('hangup',$result);
     $i++;
    }

    }

MODEL:

function kickall_conf($cno){

    $sql = "SELECT channel from confnumber where confno='$cno' and status='ACTIVE'";
        $query = $this->db->query($sql);
        return $query->result_array();
  }

VIEW:

            fputs($socket, "Action: ConfbridgeKick\r\n");
            fputs($socket, "Conference: $conf\r\n");
            fputs($socket, "Channel: $channel\r\n\r\n"); 
```

# wpf - 删除wpf中的矩形/元素

> ID：11841450
> 
> 赞同：3
> 
> 时间：2012-08-07T07:49:58.527
> 
> 标签：wpf, shape, inkcanvas

我在 WPF 中绘制 SQUARE 和其他形状。像那样，

```
 private Rect DrawSquare(Rect bounds, InkCanvas canvas)
    {
        Rectangle recta = new Rectangle();
        recta.Stroke = Brushes.Black;
        //recta.Fill = Brushes.Blue;
        recta.StrokeThickness = 4;
        recta.Width = bounds.Width;
        recta.Height = bounds.Height;
        InkCanvas.SetLeft(recta, bounds.Left);
        InkCanvas.SetRight(recta, bounds.Right);
        InkCanvas.SetTop(recta, bounds.Top);
        canvas.Children.Add(recta);
        return bounds;
    } 
```

我可以用它删除随机行

```
private void myInkCanvas_SelectionChanging(object sender, InkCanvasSelectionChangingEventArgs e)
        {
            else if (toolbarMode == ToolbarMode.Delete)
            {
                myInkCanvas.Strokes.Erase(e.GetSelectedStrokes().GetBounds()); //can delete random lines
                ReadOnlyCollection<UIElement> elements = e.GetSelectedElements();
                foreach (UIElement element in elements)
                {
                    /*String ShapeName = ((System.Windows.Media.Visual)(element)).ToString();
                    if (ShapeName.Contains("Rectangle"))
                    {
                        Rectangle recta = (Rectangle)element;
                        recta.Fill = Brushes.Blue;
                    }*/
                    myInkCanvas.Children.Remove(element); //cant delete shapes!!?
                }
            }
    } 
```

我可以删除随机线条但我不能删除形状

我怎样才能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:55:56.233

您正在对元素集合使用`foreach`循环并同时更改集合。这是不可能的。

您可以通过使用 for 循环来解决这个问题（请注意，循环的长度可能会由于元素的删除而改变）

# python - Editra 0.7.08 是可靠的 IDE 吗？

> ID：11841451
> 
> 赞同：1
> 
> 时间：2012-08-07T07:50:10.223
> 
> 标签：python, ide

我已经使用这个特定的 IDE (Editra) 大约一年了，以前是 0.6.77 版，最新的是 0.7.08 版，在更新到更新版本后，我用 py2exe 构建了 exe。该 ide 工作正常，但诺顿的 Avirus 标记并隔离了它。我使用它的主要原因是因为它可以从一个下拉框中配置为在不同版本的 Python 上运行，所以我将它设置为使用 Python 2.6 和/或 Python 3.1。其他人使用Editra吗？如果是这样，它会触发您的防病毒软件吗？还是我应该坚持使用 IDLE？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:12:31.713

我有一段时间没有使用 Editra，但我认为它只是标记了防病毒软件的 py2exe 二进制文件（可能会出现误报）。您可以直接运行 Editra 源代码（IIRC，Editra 带有 wxPython）。根据 Editra vs IDLE，我确信 Editra 比 IDLE 有更多的功能。

只是我的2美分。

# php - 注意：未定义的索引：调用已设置的 cookie 时

> ID：11841452
> 
> 赞同：5
> 
> 时间：2012-08-07T07:50:11.990
> 
> 标签：php, session-cookies

所以我有一个我知道设置正确的cookie（使用firefox获取页面信息）并且我不断收到错误/警告“注意：未定义的索引：”。我正在使用访问 cookie `$_COOKIE['username'];`，当我这样做时`if(isset($_COOKIE['username']))`，代码不会运行。但是我可以在 Firefox 获取页面信息中看到未过期的 cookie。仅供参考，这里是我设置的 cookie 代码：`setcookie('username', $username, time()+3600*24);`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T07:57:49.897

您可能在一个 php 文件中定义 cookie，该文件位于您调用 isset 的 php 文件的不同文件夹中。

因此，将“/”添加为 cookie 的默认文件夹使其可用于整个网站。

有时，您不希望这种情况发生，因为您可能希望拥有两个名称相同但值不同的 cookie，具体取决于您所在的文件夹。

**示例：**具有 2 种语言的网站，您可以`$_COOKIE['language'] = 'en';`在`/en/`文件夹中拥有和`$_COOKIE['language'] = 'fr';`在`/fr/`文件夹中拥有。

因此，当您在未指定其目录的情况下设置 cookie 时，您必须记住它仅适用于同一文件夹或子文件夹中的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-22T19:51:11.023

```
$expire = time()+60*60*24*30;          
setcookie("MyName", "Khan", $expire,'/'); 
```

# javascript - eval() 中使用的参数应该是字符串吗？

> ID：11841461
> 
> 赞同：-1
> 
> 时间：2012-08-07T07:50:52.487
> 
> 标签：javascript

我正在编码为表单制作简单的验证器。

为了动态验证表单，我计划使用 eval 函数。

正如您在 javascript 编码中看到的，**var funcCall 成为带有 jquery selected dom 参数的函数名称。**

但这会出错。（未捕获的 SyntaxError：意外的标识符）

我想知道的是我应该只在 eval() 中使用 String 还是有更好的方法来做到这一点？

* * *

```
var Submit = {
    validateFilters : ["Submit.emptyCheckFilter"], // This is validator filters
    emptyCheckFilter : function(element) 
        //this is filter to validate if it's empty or not.
        console.log("this has been called");
    },
    doValidate : function(form) {
        var children = $(form).children();
        var filters = Submit.validateFilters;

        $.each(children, function(key, value) { // Loop over form element

            for(var i = 0; i < filters.length; i++) {
                //Here's error comes the value is not String. it's selected item by jQuery.
                //Uncaught SyntaxError: Unexpected identifier <= This occurs.
                var funcCall = filters[i] + "(" + value + ");";

                // Call the filter
                eval(funcCall);
            }

            return false; 
        });
    },
   ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:58:18.370

您不应该为此使用 eval。直接使用函数实例而不是它们的“名称”要简单得多。

```
var Submit = {
    validateFilters : [function(element) {
        //this is filter to validate if it's empty or not.
        console.log("this has been called");
    }], // This is validator filters
    doValidate : function(form) {
        var children = $(form).children();
        var filters = Submit.validateFilters;

        $.each(children, function(key, value) { // Loop over form element

            for(var i = 0; i < filters.length; i++) {
                filters[i](value);
            }

            return false; 
        });
    },
   ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T07:58:03.270

当您可以使用函数指针时，您不应该使用 eval：

```
function emptyCheckFilter(x){}

// array contains the functions, not just their names

var filters = [emptyCheckFilter];  

for(var i = 0; i < filters.length; i++) {
    // call the functions, without using eval
    filters[i](value);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T08:21:54.460

正如你的问题“eval（）中使用的参数应该是字符串吗？”；

**句法**

评估（*字符串*）

**参数**

*细绳*

表示 JavaScript 表达式、语句或语句序列的字符串。表达式可以包括现有对象的变量和属性。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval)

# javascript - 如何在一系列事件中获取启动事件的元素？

> ID：11841463
> 
> 赞同：0
> 
> 时间：2012-08-07T07:50:57.823
> 
> 标签：javascript, jquery

其实会有两个问题，

**场景是**

该表单包含三个提交按钮，当我单击其中一个按钮时，会触发提交事件，然后是第一个事件，`click`但我没有捕捉到它。第二个事件是`submit`我正在捕获的表单。

代码是

```
$('#search-main a').on('click', function(e){
    e.preventDefault();
    $('#search-advanced').remove();
    var target = $(this).attr('href');
    var res = $.get(target, function(data){
        $('body').append($(data).find('#search-advanced'));
        $('#search-advanced').addClass('row reveal-modal');
        $('#search-advanced')
        .css('top', 80)
        .css('border-radius' , '5px')
        .css('padding-left' , '0px')
        .css('padding-right' , '0px');

        $('#search-advanced').on('submit', 'form' ,function(e){
            var params = $('#search-advanced form').serialize();

            console.log(e);
            console.log(params);
            $.get(target, params, function(data){
                $('#search-advanced form').html($(data).find('#search-advanced form').html());
                $('#search-advanced input[name="select_filter"]').remove();
            });
            return false;
        });

        $('#search-advanced input[name="select_filter"]').remove();
        $('#search-advanced').on('change', '#categoryDropdown', function(){
            $('#search-advanced form').trigger('submit');
        });

        $('#search-advanced').append('<a class="close-reveal-modal">&#215;</a>');
        $('#search-advanced').reveal({
            animation: 'fade', 
            closeOnBackgroundClick: false
        });
    });
}); 
```

由于 JQuery 文档说

> 只有“成功的控件”被序列化为字符串。由于未使用按钮提交表单，因此未序列化提交按钮值

我无法使用获取按钮值`serialize()`

**问题一是**

> 如何获取启动提交的按钮属性？

我以不同的方式来解决这个问题，这是

*   首先捕获点击事件
*   获取属性
*   将属性作为事件额外参数传递

修改后的代码是

```
$('#search-advanced').on('submit', 'form' ,function(e){
    var params = $('#search-advanced form').serialize();

    console.log(e.data);
    console.log(params);
    $.get(target, params, function(data){
        $('#search-advanced form').html($(data).find('#search-advanced form').html());
        $('#search-advanced input[name="select_filter"]').remove();

        if(typeof $('input[name="one_more"]') !== 'undefined'){
            var oldOneButton = $('input[name="one_more"]');
            var newOneButton = oldOneButton.clone();
            newOneButton.attr('type', 'button');
            newOneButton.insertBefore(oldOneButton);
            oldOneButton.remove();
        }

        if(typeof $('input[name="remove_filter"]').attr('name') !== 'undefined'){
            var oldRemoveButton = $('input[name="remove_filter"]');
            var newRemoveButton = oldRemoveButton.clone();
            newRemoveButton.attr('type', 'button');
            newRemoveButton.insertBefore(oldRemoveButton);
            oldRemoveButton.remove();
        }
    });
    return false;
});

$('#search-advanced input[name="select_filter"]').remove();
$('#search-advanced').on('change', '#categoryDropdown', function(){
    $('#search-advanced form').trigger('submit');
});

$('#search-advanced').on('click', 'input[name="one_more"]', function(){
    console.log($(this).attr('name'));
    var name = $(this).attr('name');
    var value = $(this).attr('value');
    $('#search-advanced form').trigger('submit', {name:value});
}); 
```

我更改了 type 属性，因为它触发了两次提交。

问题是`console.log(e.data);`打印`undefined`而不是传递的对象。

**第二个问题是**

> 为什么`e.data`是`undefined`？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:52:09.937

要捕获按钮，请[拨动](http://jsfiddle.net/JjZdD/2/)

```
 $("#frm").on("click","button",function(){
       alert(this.id);

    }).on("submit",function(e){
        console.log("submit");
        return false;
    });​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:15:51.657

工作解决方案，包含两个问题的答案

```
$('#search-main a').on('click', function(e){
    e.preventDefault();
    $('#search-advanced').remove();
    var target = $(this).attr('href');
    var res = $.get(target, function(data){
        $('body').append($(data).find('#search-advanced'));
        $('#search-advanced').addClass('row reveal-modal');
        $('#search-advanced')
        .css('top', 80)
        .css('border-radius' , '5px')
        .css('padding-left' , '0px')
        .css('padding-right' , '0px');

        var clickedButtonName;
        var clickedButtonVal;
        $('#search-advanced input[name="select_filter"]').remove();
        $('#search-advanced').on('change','#categoryDropdown', function(){
            $('#search-advanced form').trigger('submit', {'select_filter':'Select Filter'});
        }).on('click', 'input.button', function(){
            clickedButtonName = $(this).attr('name');
            clickedButtonVal = $(this).attr('value');
        }).on('submit', 'form' ,function(e, attr){
            var params = $('#search-advanced form').serialize();

            if(typeof attr !== 'undefined'){
                var key = Object.keys(attr);
                params += '&'
                + key[0]
                + '='
                + attr[key[0]];
            }

            if(typeof clickedButtonName !== 'undefined' && typeof clickedButtonVal !== 'undefined'){
                params += '&'
                + clickedButtonName
                + '='
                + clickedButtonVal;
            }
            $.get(target, params, function(data){
                $('#search-advanced form').html($(data).find('#search-advanced form').html());
                $('#search-advanced input[name="select_filter"]').remove();
            });
            return false;
        });

        $('#search-advanced').append('<a class="close-reveal-modal">&#215;</a>');
        $('#search-advanced').reveal({
            animation: 'fade', 
            closeOnBackgroundClick: false
        });
    });
}); 
```

# servlets - UrlRewriteFilter 规则不适用于 servlet url

> ID：11841464
> 
> 赞同：0
> 
> 时间：2012-08-07T07:51:01.553
> 
> 标签：servlets, servlet-filters, tuckey-urlrewrite-filter

我正在尝试使用 UrlRewriteFilter 4.0.3 将旧的 servlet url 重定向到新的 url。我有一堆工作规则，但带有 servlet url 的规则`<from></from>`不起作用。

我的规则如下所示：

```
<rule>
    <from>/servlet/OldServlet\?old_parameter=&amp;id=([0-9]+)$</from>
    <to type="redirect">/servlet/NewServlet?new_parameter=&amp;document_id=$1</to>
</rule> 
```

我试图用“。+”剪掉“来自”的片段。我设法通过删除“？”使规则生效。从我的网址和规则。servlet url 似乎与定义的规则不匹配。由于遗留原因，OldServlet 仍然映射在我的 web.xml 中。

编辑：

`org.tuckey.web.filters.urlrewrite.UrlRewriter DEBUG: processing request for /servlet/OldServlet`

网址从“？”修剪。

编辑2：

UrlRewriter.java：

```
public String getPathWithinApplication(HttpServletRequest request) {
    String requestUri = request.getRequestURI();
    ... 
```

似乎 UrlRewriteFilter 使用了一种不返回完整 url 的方法。

[http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getRequestURI](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getRequestURI) ()

> 返回此请求的 URL 从协议名称到 HTTP 请求第一行中的查询字符串的部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T10:02:10.990

默认情况下不附加查询字符串。`use-query-string="true"`在我将属性添加到 urlrewrite后开始工作。

```
<urlrewrite use-query-string="true"> 
```

# javascript - Magento：支付门户转发 - 如何调试？

> ID：11841465
> 
> 赞同：0
> 
> 时间：2012-08-07T07:51:06.920
> 
> 标签：javascript, debugging, magento

场景：具有多个扩展、自定义主题的 magento 1.7.0.0 商店

问题：在结帐模块和主题中开始一些更改，*一些*客户没有转发给支付提供商（所有这些，paypal，sofort.com，wirecard 信用卡处理）。

让我们难以调试的是，我们自己无法看到这种效果。从客户的角度来看，流程应该是（这在 magento 中是标准的）：

1.  查看
2.  按“立即购买”按钮
3.  带有“如果您没有被转发到提供者请按此处”消息*的*页面
4.  访客被自动转发
5.  在提供商页面上付款
6.  返回

客户报告的是，他们在 3 上得到了一个空白页面。 - 所以显然这个页面没有正确构建。但是我们这边没有日志条目，而在提供者这边也没有日志条目，因为它们永远不会到达他那里。

我们做了什么：

*   切换到完全不同的结帐
*   关闭了与自定义结帐相同的开发人员的扩展，它大量处理 ajax/javascript（它的模板大师火结帐，ajax pro 通常质量很高，支持很棒，但因为他们看不到什么我们的客户报告，他们也无能为力）
*   消除了我们之前忽略的日志中几乎所有“小”警告/错误

**我们怎么可能调试这个？有没有办法写出所有页面内容，因为它被交付给访问者供以后检查？**

**问题可能出在其他地方（apache、连接、ssl？）**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:22:18.220

为什么不从常规调试步骤和常识开始：

*   如果它是一个空白页，那么它一定是一个 php 错误
*   我的 php 错误被记录到 error_log 中（具体从 phpinfo 中查看）
*   让我们观察 var/log 和其他 apache 和 php 相关日志中的所有服务器日志，看看它们是否有错误，看看可能导致什么

实际上，Magento 禁用了 index.php 中的错误报告，以便从用户那里获得更好的报告，启用错误日志记录。如果它是一个 php 错误，那么它会永远记录在 php 错误日志中。如果在向用户启用错误报告后他们仍然得到空白页面，那么这意味着在设置 php 标头之前过早的内容输出（空白页面存在，前端没有报告错误但记录到 php 错误日志）

# oracle - 如何在 APEX 中更改区域的高度

> ID：11841468
> 
> 赞同：2
> 
> 时间：2012-08-07T07:51:20.993
> 
> 标签：oracle, oracle-apex, regions

我正在尝试更改区域的高度，但是我输入的高度似乎增加了该区域的高度。

为了测试，我改变了区域的宽度，成功地增加了区域的宽度。所以我不明白为什么“高度”似乎不起作用。

正如您从屏幕打印中看到的那样，该区域的宽度会增加，但如果我增加高度，它会将其添加到该区域的边框下方（即浅绿色）。

这在其属性中输入到 Region Attributes 行中：

```
STYLE="height:1000px; width:1000px; background-color:aqua;" 
```

尝试改变高度时我在某个地方出错了吗？

![在此处输入图像描述](../Images/fc80c5de435c367b765dbd909478c59a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-30T20:20:06.070

我正在使用 Apex 4.2.5.00.08，这就是我解决此问题的方法。

背景：我正在处理我的应用程序中信息的“单页”视图，使用不同的窗格列出各种信息集合。每个窗格都是一个经典报告（带有指向各个详细信息的超链接），因为您不能在一个页面上拥有多个交互式报告。

我的问题是某些集合的数据比其他集合多，导致我的窗格大小不同。`style="width:410px;"`我可以通过将每个区域属性设置为（基于我的屏幕分辨率减去几个像素除以页面上的区域数 - 在本例中为 3）来控制窗格的宽度。

高度是另一回事。窗格高度总是被调整以匹配每个集合中的信息量。

解决方案：在页眉和页脚 - 区域页眉中，我放置了以下内容：

```
<div style="overflow: auto; min-height: 250px; max-height: 250px;"> 
```

在我放置的区域页脚中：

```
</div> 
```

我想你可以有不同的值`min-height`，`max-height`以便窗格/区域可以在一个范围内调整。我的目标是确保它们始终保持相同的大小。

当集合中的信息大于可显示的窗格大小时，会在窗格的右侧显示一个滚动条，使用户可以向下滚动该集合列表。

这对布局意味着您的窗格保持固定大小。在集合中缺乏信息的地方，该区域内有一些空白区域。当您允许 Apex 为您调整大小时，根据表单的背景仍然有空白区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-21T09:22:29.000

只需在您的区域标题中添加此行

`<div style="overflow: auto; min-height: 250px; max-height: 250px;">`

# linq - 分组产生匿名类型

> ID：11841474
> 
> 赞同：0
> 
> 时间：2012-08-07T07:51:58.493
> 
> 标签：linq, linq-group

我有一个字符串列表，例如这个

```
heading1 00:01:20
randomText
01:23
randomText2
01:45
randomText3
02:10
heading2 00:05:20
randomText4
07:25
randomText5
04:35
randomText6
09:12
etc. 
```

我想做的是使用 Linq 获取匿名类型的列表，例如

```
{ Name = "randomText1", Category = "Heading1", Duration = "01:23"}
{ Name = "randomText2", Category = "Heading1", Duration = "01:45"}
...
{ Name = "randomText6", Category = "Heading2", Duration = "09:12"} 
```

有什么方法可以用 Linq to Objects 实现这样的结果？我看到使用 for 循环来实现这一点是多么容易，但我想知道是否有更清洁的方法可以使用 Linq 来做到这一点，但我似乎找不到任何方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:39:42.620

这在以下条件下可以解决问题：

1) 可以识别标题线，它以常量值开头（如果需要，可以更改此条件）

2) 对于每个“随机文本”行，可以找到相应的持续时间行。

```
var data = new List<string>() {
    "heading1 00:01:20",
    "randomText       ",
    "01:23            ",
    "randomText2      ",
    "01:45            ",
    "randomText3      ",
    "02:10            ",
    "heading2 00:05:20",
    "randomText4      ",
    "07:25            ",
    "randomText5      ",
    "04:35            ",
    "randomText6      ",
    "09:12            "
};

const string HEADINGSTART = "heading";                      // TODO: Set correct value
var temp = Enumerable.Range(0, data.Count - 1)              // Iterate based on index
    .Where(i => data[i].StartsWith(HEADINGSTART))           // Find the headings
    .Select(i => new {                                      // Project to heading + data
        Heading = data[i],
        Data = data.Skip(i + 1).TakeWhile(d => !d.StartsWith(HEADINGSTART)).ToList()
    })
    .SelectMany(d => d.Data.Select(d2 => new {              // Project to single enumerable
        Heading = d.Heading,
        Data = d2
    }))
    .ToList();
var result = Enumerable.Range(0, temp.Count / 2)            // Again, iterate based on index
    .Select(i => new {                                      // Project to requested object
        Name = temp[i * 2].Data,
        Category = temp[i * 2].Heading,
        Duration = temp[i * 2 + 1].Data
    })
    .ToList(); 
```

# blackberry - 模块尝试访问安全 API

> ID：11841475
> 
> 赞同：0
> 
> 时间：2012-08-07T07:51:58.917
> 
> 标签：blackberry, code-signing

我正在尝试通过 BlackBerry Device Manager 加载我的 BlackBerry 应用程序。应用程序加载，但当我尝试打开它时，我得到“错误启动 --- 模块尝试访问安全 API”。我已成功签署该应用程序。

这就是我签署应用程序的方式：BlackBerry -> Sign -> Install new keys 右键单击​​项目 -> BlackBerry -> Sign with Signature tool。我得到“6 个文件签名成功”的确认。但是，在我的 java 文件中，我仍然在一些代码行旁边看到“黄色标记”，上面写着“需要签名”。

当我尝试从 Eclipse“在设备上加载项目”加载应用程序时，我得到以下信息：

注意：我刚刚尝试过 BlackBerry -> 在设备上加载项目，但出现以下错误：

> C:\Eclipse\plugins\net.rim.ejde.componentpack6.0.0_6.0.0.43\components\bin\rapc.exe -convertpng -quiet codename=deliverables\Standard\6.0.0\TestBBELMS Deliverables\Standard\6.0。 0\TestBBELMS.rapc -sourceroot=C:\Users\abc\Documents\workspace\TestBBELMS\src;C:\Users\abc\Documents\workspace\TestBBELMS\res;C:\Users\abc\Documents\workspace\TestBBELMS -import=C:\Eclipse\plugins\net.rim.ejde.componentpack6.0.0_6.0.0.43\components\lib\net_rim_api.jar C:\Users\abc\Downloads\Ksoap2LibPrev_and_sample_code\ksoap2-j2me-core-prev -2.1.2.jar C:\Users\abc\Documents\workspace\TestBBELMS\bin\deliverables\Web\6.0.0\TestBBELMS.jad C:\Users\abc\Documents\workspace\TestBBELMS\bin\deliverables\Standard \6.0.0\TestBBELMS.jad C:\Users\abc\Documents\workspace\TestBBELMS\bin JAR 文件创建失败，错误 -1

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T18:52:04.410

您是否安装了所有 3 个密钥（csi 文件）？

以下是如何验证您的应用程序是否已使用所需的密钥进行签名。

1.  在 Eclipse 中，单击 Window -> Preferences。
2.  展开 BlackBerry Java Plug-in 并单击 Signature Tool。
3.  取消选中“在后台运行 SignatureTool”。
4.  单击确定。
5.  右键单击您的项目并选择 BlackBerry -> Sign With Signature Tool。
6.  SignatureTool 将保持可见并显示需要和签名的密钥。

是否已对所有必需的密钥进行了签名？如果未安装 RRT、RBB 或 RCR，则您没有安装所有 3 个 CSI 文件。如果您不再拥有 CSI 文件，请安装其余的和/或请求一组新的密钥。

# php - 树形结构+php

> ID：11841476
> 
> 赞同：0
> 
> 时间：2012-08-07T07:52:02.990
> 
> 标签：php, mysql, cakephp

我想显示内容列表。当我单击特定内容时，它应该显示子内容..就像树结构..另一个要求是所有这些内容都来自 MYSQL 数据库..（phpmyadmin）

*   我有 2 个表，表 1 包含 2 个字段，即代码和内容名称。

*   表 2 包含 2 个字段，即父代码和子代码（这两个代码都与`code`表 1 相同）

当我单击特定内容时，它应该从表 1 中获取相应的代码，并检查该代码是否存在于第二个表的“父代码”字段中。如果是，请获取子代码，并在中搜索内容名称表 1 并显示在父内容下。同样它应该继续......

我使用代码获取了所有内容：

```
$ps=$this->Table1->find('all',
     array('fields'=>array('id','contentcode','contentname'),
    'conditions'=>$conditions)); 
$this->set('collections',$ps); 
```

我将它传递给 view.ctp，但不知道如何显示

我正在使用 cakephp，

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:37:31.440

如果是我，我只会使用[phplayersmenu](http://phplayersmenu.sourceforge.net/)

# xcode - 关闭来自子项目的警告

> ID：11841479
> 
> 赞同：24
> 
> 时间：2012-08-07T07:52:08.200
> 
> 标签：xcode, xcode4, compiler-warnings

有人可以帮我关闭我从子项目获得的 Xcode 4 中的警告吗？

我有三个子项目，有很多警告。子项目由我客户的研发工作室提供。我想关闭那里的警告，把我所有的努力和注意力都放在我自己代码中的警告上。

![这是现在的 xcode 警告计数器](../Images/d8b2cdc72a720e0b2d2b755e8995d9d7.png)

这在 Xcode 4 中可行吗？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-08-11T21:22:47.067

如果您使用的是 Xcode 4.2 或更高版本，则可以为您拥有的每个子项目使用 LLVM 编译器`Inhibit All Warnings`设置`Warning Polices`：

![在此处输入图像描述](../Images/a8e24470ac42f4e8f0a33e30b8a5a613.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T08:06:23.410

仅部分解决方案：

如果您的子项目构建的库或包不必在每次运行时重新编译，您可以激活“最近的文件管理器”（见图，蓝色时钟）。然后，仅显示上次编译器运行的警告和错误。

![最近的过滤器](../Images/7cad1472db22a360f1c277685195537d.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T10:40:11.070

如果库不是太大，您可以使用每个文件禁用警告

```
#pragma GCC diagnostic ignored "-Wwarning-flag" 
```

# asp.net-mvc - ASP.Net MVC 路由问题 url 不起作用

> ID：11841483
> 
> 赞同：2
> 
> 时间：2012-08-07T07:52:32.737
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我在主控制器中创建了两个名称不同的操作方法

```
public ActionResult Default()
{
    ViewData["Message"] = "Welcome to ASP.NET MVC!";
    return View("index");
}

public ActionResult Index(int a)
{
    ViewData["Message"] = "Welcome to ASP.NET MVC! and Your Age is " + a;
    return View();
} 
```

我的路由代码如下所示：

```
routes.MapRoute(
  "Default1", // Route name
  "{Home}/{ID}", // URL with parameters
  new { controller = "Home", action = "Index", id =UrlParameter.Optional});

routes.MapRoute(
    "Default2", // Route name
    "{Home}", // URL with parameters
    new { controller = "Home", action = "Default" }
);

routes.MapRoute(
    "Default", // Route name
    "{controller}", // URL with parameters
    new { controller = "Home", action = "Default" }
); 
```

但仍然遇到问题

当我输入像**[http://localhost:7221](http://localhost:7221)**这样的 URL 时，主页即将到来并调用 Default() 方法，但是如果我输入像这样的 URL

**[http://localhost:7221/Home](http://localhost:7221/Home)**然后出现错误。为了处理这种情况，我定义了类似的路线

```
routes.MapRoute(
    "Default2", // Route name
    "{Home}", // URL with parameters
    new { controller = "Home", action = "Default" }
); 
```

但它不起作用.......你能告诉我为什么吗？

**[如果我输入像http://localhost:7221/Home/88](http://localhost:7221/Home/88)**这样的URL，那么应该调用 Index(int a) 方法但会出错。为什么

我希望当我输入 URL **[http://localhost:7221](http://localhost:7221)**或**[http://localhost:7221/Home](http://localhost:7221/Home)**时，应该调用 Default() 以及何时输入

**[http://localhost:7221/Home/88](http://localhost:7221/Home/88)**然后 Index(int a) 应该被调用。我的路线有什么问题？我该如何纠正它？如果可能，请纠正我的路线代码。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T08:39:43.577

这条规则实际上应该涵盖你需要的一切：

```
 routes.MapRoute(
            "Default",
            "{controller}/{action}/{a}",
            new {
                controller = "Home",
                action = "Index",
                a = UrlParameter.Optional 
            }
        ); 
```

请注意以下事项：

1.  参数名称需要与方法上的参数相匹配，你有`id`-`a`所以框架不能匹配它们。在上面的规则中，我已经`a`输入了映射规则来匹配你的方法，但是你应该在两个地方给它一个更好的名字。

2.  如果未提供控制器或操作，则此规则默认为 /Home/Index。如果你想点击你命名的动作，`Default`你会去 /Home/Default

3.  如果您提供 /Home/Index/21 ，它将调用 Index 方法 - 但如果您不提供年龄，则会出现问题，因为您没有匹配规则的方法。您需要添加方法`public ActionResult Index()`或使用默认值`public ActionResult Index(int a = 0)`

以下是一些违反此规则的 URL 示例。

*   `http://yourapp/`- 将转到 /Home/Index
*   `http://yourapp/Home`- 将转到 /Home/Index
*   `http://yourapp/Home/Default`- 将转到 /Home/Default
*   `http://yourapp/Home/Index`- 见我上面的笔记 - 你需要一种方法来支持这一点
*   `http://yourapp/Home/Index/21`- 将转到 /Home/Index 并`a`作为 21传递

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T08:37:14.277

您遇到问题的原因是您的路由参数与操作方法不匹配。您的操作方法需要 int a，但在任何情况下您都没有提供它，而是提供了称为 id 的整数。

您应该在 routevalues 中拥有的是：

```
 routes.MapRoute(
            name: "Home",
            url: "{controller}/{age}/{action}",
            defaults: new { controller = "Home", action = "Index", age = UrlParameter.Optional }
        ); 
```

注意年龄参数是可选的。我们的控制器应该如下所示：

```
public class HomeController : Controller
{

    public ActionResult Index(int? age)
    {
        if ( age != null )
            ViewData["Message"] = "Welcome to ASP.NET MVC! and Your Age is " + age;
        else
            ViewData["Message"] = "Welcome to ASP.NET MVC!";

        return View();
    }
} 
```

当然，我们可以使用名为 id 的参数，但出于演示目的，我将其称为 age。

**更新：**

这是更接近您原始要求的内容：

```
 routes.MapRoute(
            name: "Index_age",
            url: "{controller}/{age}/{action}/{id}",
            defaults: new { controller = "Home", action = "IndexA", id = UrlParameter.Optional }
        );
        routes.MapRoute(
            name: "Index",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        ); 
```

控制器：

```
 public ActionResult Index()
    {
        ViewData["Message"] = "Welcome to ASP.NET MVC!";
        return View();
    }
    public ActionResult IndexA(int age)
    {
        ViewData["Message"] = "Welcome to ASP.NET MVC! and Your Age is " + age;
        return View("Index");
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T11:33:32.353

删除 Home 周围的大括号，将 ID 更改为 Age 并删除 Age 的可选行为。

```
routes.MapRoute(
    "Default1", // Route name
     "Home/{Age}", // URL with parameters
     new { controller = "Home", action = "Index" }
); 
```

我希望我了解您要正确实现的目标。如果没有，我建议使用 Route 调试器来进一步了解。

尝试[https://github.com/Haacked/RouteMagic](https://github.com/Haacked/RouteMagic)（在 NuGet 上作为 RouteMagic.Mvc 提供）

我自己没有尝试过，但我确实使用了它的一个组件。

祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T10:08:46.020

你得到什么错误？我只是不想在这里假设任何事情。我认为 //localhost:7221/Home 调用失败是因为它与第一个路由匹配（因为 id 参数是可选的），而不是您期望的第二个路由。此外，路由定义中的参数名称应与操作方法声明中的参数名称匹配。

> 如果我输入像 //localhost:7221/Home/88 这样的 url，那么应该调用 Index(int a) 方法但是会出错。为什么

将参数重命名为 id 或将路由可选参数重命名为 a。路由引擎找不到任何东西来推断“a”的值，因此它尝试传递一个空值来代替不可为空的 int 参数，从而导致错误。

> 我希望当我输入 url //localhost:7221 或 //localhost:7221/Home 时，应该调用 Default()

然后将最后一个路由的映射移动到代码块的顶部，就像它将首先添加到路由集合中一样，并且 localhost:7221/Home 将首先与之匹配。

您还应该研究 Phil Haack 的这个工具：

[http://haacked.com/archive/2008/03/13/url-routing-debugger.aspx](http://haacked.com/archive/2008/03/13/url-routing-debugger.aspx)

# bash - 防止 BASH 评估变量中的文件名

> ID：11841484
> 
> 赞同：0
> 
> 时间：2012-08-07T07:52:37.530
> 
> 标签：bash, variables

```
#!/bin/bash
#trash.sh

$TRASHDIR=$HOME/trash 
#Does not exist yet, i have loops further in 
#the script to check if the dir exists and to create it if not
echo $TRASHDIR
#I have ommited the rest of the script, 
#because this is where I have the problem 
```

让我们运行这个：

```
./trash.sh  
./trash.sh: line 3: =/home/someuser/trash: No such file or directory 
```

如何在没有 bash 评估的情况下将此文件名存储在变量中？另外：我以后如何使用这个变量进行测试？

```
if [ -e $TRASHDIR ]
then
  echo stuff here
fi 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T07:53:35.077

*定义*var`$`时，请关闭初始字符：

 *```
TRASHDIR=$HOME/trash 
```

当您使用`$TRASHDIR`时，`bash`将其评估为空字符串（或之前设置的其他内容），这就是它看起来像这样的原因：

```
=/home/someuser/trash 
```*

# semantics - owl:allValuesFrom 和 rdfs:range 差异

> ID：11841485
> 
> 赞同：11
> 
> 时间：2012-08-07T07:52:43.503
> 
> 标签：semantics, owl, rdfs

我正在研究语义网，我想知道：编写限制的语义有什么不同，例如：

```
:Person
  a owl:Class ;
  rdfs:subClassOf
    [ a owl:Restriction ;
      owl:onProperty :hasParent ;
      owl:allValuesFrom :Person
   ] . 
```

并编写范围限制，例如：

```
:hasParent rdfs:range :Person. 
```

在我看来，它的意思是一样的：父母必须有一种人。没有区别吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-07T08:44:54.053

第一个片段意味着一个有父母的`:Person`人必然有一个`:Person`父母。但是，例如， a`:Dog`可能有一个不是 a 的父`:Person`级。第二个片段说任何有父级的东西都必须有一个-父`:Person`级，不管这个东西是什么。

在 krajol 的评论后编辑：

第一个片段的`allValuesFrom`限制不等同于：

```
:hasParent  rdfs:domain  :Person;
            rdfs:range   :Person . 
```

在`allValuesFrom`限制的情况下，仍有可能存在不是人的父母。在`rdfs:domain`/`rdfs:range`组合的情况下，这是不可能的。有了`allValuesFrom`限制，可以说人有人父母，狗有狗父母，等等。对于域/范围，你不能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-08T18:11:37.927

还有一个值得注意的区别。当一个类中有多个 rdfs:range（或 rdfs:domain）三元组时，范围或域是所述范围/域的合*取*（交集）。请参阅[RDFS 规范](http://www.w3.org/TR/rdf-schema/#ch_range)，尽管措辞含糊不清，还有[这篇文章](https://web.archive.org/web/20150511163112/http://answers.semanticweb.com:80/questions/25408/multiple-property-domain-and-range-conjunction-vs-intersection#25410)。

如果在本体上执行推理，您会发现 rdfs:range/domain 三元组是为所述范围/域类的所有超类推断的。虽然在语义上是正确的，但这可能会令人困惑或难以处理。*allValuesFrom*不会发生这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-01T11:07:17.150

（添加一个已经回答的问题的答案，因为我发现缺乏接受的答案的本质。）

```
[ a owl:Restriction ;
    owl:onProperty :hasParent ;
    owl:allValuesFrom :Person
] 
```

可以理解为“`hasParent`谓词的任何值（可能没有）都属于类型的所有事物的类`Person`”。

通过说它`Person`是这个类的一个子类，我们说它是这个类的一个更专业的版本。所以，`Person`仍然只能有其他`Person`s 作为 的值`hasParent`。

这不同于`rdfs:range`因为我们没有为自己的有效域/范围做任何声明`hasParent`。再循环[安托万的例子](https://stackoverflow.com/a/11842249/1260887)，我们仍然可以说：

```
:dog1 a :Dog.
:dog2 a :Dog.
:dog1 :hasParent :dog2. 
```

# jquery-datatables - 数据表 - 使用嵌套的独立表向下钻取行

> ID：11841486
> 
> 赞同：28
> 
> 时间：2012-08-07T07:52:44.593
> 
> 标签：jquery-datatables

是否有人使用带有向下钻取行和嵌套独立表的 DataTables？类似于 powerTable？

您可以发布任何链接/示例吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-13T15:23:03.053

这是我的**[JSFiddle](http://jsfiddle.net/rafael_cichocki/WwDg8/7/)**（*按“运行”显示图标*），它实现了独立的嵌套 jQuery 数据表。在这种情况下，我只需复制原始表格的 html，并将其发布到详细信息行中，以省去制作新表格的麻烦。

这是代码中唯一有趣的部分，它使 NestedTables 与简单的 DrillDown 不同：

```
else {      /* Open this row */

            this.src = "http://i.imgur.com/d4ICC.png";

            // fnFormatDetails() pieces my Table together, instead you can 
            // use whatever code you like to create your nested Table html
            oTable.fnOpen(nTr, fnFormatDetails(iTableCounter, TableHtml), 'details');

            // ... and here I cast dataTable() on the newly created nestedTable 
            oInnerTable = $("#exampleTable_" + iTableCounter).dataTable({
                "bJQueryUI": true,
                "sPaginationType": "full_numbers"
            });
            iTableCounter = iTableCounter + 1;
        } 
```

请注意如何在每个表上独立进行筛选、排序等。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-03-25T18:48:14.627

我建立在 Rafael Cichocki 的优秀 jsfiddle 之上，添加了动态数据和两个不同的数据表，以强调明细表可以与主表不同的事实：

[http://jsfiddle.net/headwinds/zz3cH/](http://jsfiddle.net/headwinds/zz3cH/)

```
$('#exampleTable tbody td img').live('click', function () {
            var nTr = $(this).parents('tr')[0];
            var nTds = this;

            if (oTable.fnIsOpen(nTr)) {
                /* This row is already open - close it */
                this.src = "http://i.imgur.com/SD7Dz.png";
                oTable.fnClose(nTr);
            }
            else {
                /* Open this row */
                var rowIndex = oTable.fnGetPosition( $(nTds).closest('tr')[0] ); 
                var detailsRowData = newRowData[rowIndex].details;

                this.src = "http://i.imgur.com/d4ICC.png";
                oTable.fnOpen(nTr, fnFormatDetails(iTableCounter, detailsTableHtml), 'details');
                oInnerTable = $("#exampleTable_" + iTableCounter).dataTable({
                    "bJQueryUI": true,
                    "bFilter": false,
                    "aaData": detailsRowData,
                    "aoColumns": [
                    { "mDataProp": "name" },
                    { "mDataProp": "team" },
                    { "mDataProp": "server" }
                ],
                    "bPaginate": false,
                    "oLanguage": {
                        "sInfo": "_TOTAL_ entries"
                    }
                });
                iTableCounter = iTableCounter + 1;
            }
        }); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-03-25T14:59:03.323

我的来自@Rafael 和@Headwinds 的嵌套数据表版本，但带有新API 的数据表版本1.10.11。也使用引导程序。两全其美。

请参阅[嵌套数据表 1.10.11](https://jsfiddle.net/karlnicholas/2gc3r7vv/)。

```
 $('#opiniondt tbody td.details-control').on('click', function () {
     var tr = $(this).closest('tr');
     var row = table.row( tr );   

     if ( row.child.isShown() ) {
         //  This row is already open - close it
        row.child.hide();
        tr.removeClass('shown');
     }
     else {
        // Open this row
        row.child( format(iTableCounter) ).show();
        tr.addClass('shown');
        // try datatable stuff
        oInnerTable = $('#opiniondt_' + iTableCounter).dataTable({
            data: sections, 
            autoWidth: true, 
            deferRender: true, 
            info: false, 
            lengthChange: false, 
            ordering: false, 
            paging: false, 
            scrollX: false, 
            scrollY: false, 
            searching: false, 
            columns:[ 
               { data:'refCount' },
               { data:'section.codeRange.sNumber.sectionNumber' }, 
               { data:'section.title' }
             ]
        });
        iTableCounter = iTableCounter + 1;
    }
 }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-21T18:14:47.563

我还需要类似的东西，下面是我的示例。可能会帮助某人。

```
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
<script type="text/javascript" >
    $(document).ready(function () {

        $('tr.tree-toggler').click(function () {
            $(this).parent().find('tr').eq(2).find('td.tree').toggle(300);
        });
    });

</script>
</head>
<body>

<table>
    <tbody>
    <tr>
        <td>

            <table>
                    <tbody>

                    <tr class="tree-toggler nav-header">
                        <td>
                            <table border="1" style="width: 100%">
                                <tbody>
                                    <tr class="tree-toggler nav-header">
                                        <td style="width: 30px;">
                                            Demo
                                        </td>
                                        <td style="width: 200px;">
                                            Demo
                                        </td>
                                        <td style="width: 100px;">
                                            Demo
                                        </td>
                                        <td style="width: 100px;">
                                            Demo
                                        </td>
                                        <td style="width: 100px;">
                                            Demo
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td class="nav nav-list tree" style="display: none;">
                            <table class="table" border="1">
                                <tbody>
                                    <tr>
                                            <td style="width: 30px;">
                                            Demo
                                        </td>
                                        <td style="width: 200px;">
                                            Demo
                                        </td>
                                        <td style="width: 100px;">
                                            Demo
                                        </td>
                                        <td style="width: 100px;">
                                            Demo
                                        </td>
                                        <td style="width: 100px;">
                                            Demo
                                        </td>
                                    </tr>
                                    <tr>
                                            <td style="width: 30px;">
                                            Demo
                                        </td>
                                        <td style="width: 200px;">
                                            Demo
                                        </td>
                                        <td style="width: 100px;">
                                            Demo
                                        </td>
                                        <td style="width: 100px;">
                                            Demo
                                        </td>
                                        <td style="width: 100px;">
                                            Demo
                                        </td>
                                    </tr>

                                </tbody>
                            </table>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
    </tr>
    <tr>
        <td>        
            <table>
                    <tbody>

                    <tr class="tree-toggler nav-header">
                        <td>
                            <table border="1" style="width: 100%">
                                <tbody>
                                    <tr class="tree-toggler nav-header">
                                        <td style="width: 30px;">
                                            Demo
                                        </td>
                                        <td style="width: 200px;">
                                            Demo
                                        </td>
                                        <td style="width: 100px;">
                                            Demo
                                        </td>
                                        <td style="width: 100px;">
                                            Demo
                                        </td>
                                        <td style="width: 100px;">
                                            Demo
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td class="nav nav-list tree" style="display: none;">
                            <table class="table" border="1">
                                <tbody>
                                    <tr>
                                        <td style="width: 30px;">
                                            Demo
                                        </td>
                                        <td style="width: 200px;">
                                            Demo
                                        </td>
                                        <td style="width: 100px;">
                                            Demo
                                        </td>
                                        <td style="width: 100px;">
                                            Demo
                                        </td>
                                        <td style="width: 100px;">
                                            Demo
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 30px;">
                                            Demo
                                        </td>
                                        <td style="width: 200px;">
                                            Demo
                                        </td>
                                        <td style="width: 100px;">
                                            Demo
                                        </td>
                                        <td style="width: 100px;">
                                            Demo
                                        </td>
                                        <td style="width: 100px;">
                                            Demo
                                        </td>
                                    </tr>

                                    <tr>
                                        <td style="width: 30px;">
                                            Demo
                                        </td>
                                        <td style="width: 200px;">
                                            Demo
                                        </td>
                                        <td style="width: 100px;">
                                            Demo
                                        </td>
                                        <td style="width: 100px;">
                                            Demo
                                        </td>
                                        <td style="width: 100px;">
                                            Demo
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
    </tr>
</tbody>
</table>
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-02T19:43:10.177

这是一个示例（基于 Nicholas 上面的），其中子数据表使用 ajax 调用从数据库获取信息。注意 BuildBoMDataTable() 构建父表，而 BuildBoMPartsDataTable() 处理每个子表。

```
var iTableCounter = 1;
var oInnerTable;
var boMDataTable = new Object;

$(document).ready(function () {
    BuildBoMDataTable();
    AddBomDataTableListener();
});

function AddBomDataTableListener() {

    // Add event listener for opening and closing details
    $('#boMDataTable tbody').on('click', 'td.details-control', function () {
        var tr = $(this).closest('tr');
        var row = boMDataTable.row(tr);

        if (row.child.isShown()) {
            // This row is already open - close it
            row.child.hide();
            tr.removeClass('shown');
        }
        else {
            // Add the html table shell of the datatable.
            row.child(formatBomDataTableDetailRow(iTableCounter)).show();

            //show the datatable row.
            tr.addClass('shown');

            // try datatable stuff
            BuildBoMPartsDataTable(row.data(), iTableCounter);
            iTableCounter = iTableCounter + 1;
        }
    });
}

function BuildBoMDataTable() {

    if ($.isEmptyObject(boMDataTable)) {
        boMDataTable = $("#boMDataTable").DataTable({
            lengthMenu: [[10, 25, 50, 100], [10, 25, 50, 100]],
            pageLength: 10,
            dom: "tip",
            pagingType: "simple",
            serverSide: true,
            autowidth: false,
            language: {
                emptyTable: "You have no bill of materials associated with your groups and/or projects."
            },
            ajax: {
                url: "/remote/GetParentTableData",
                type: "POST",
                data: function (d) {
                    var searchData =
                        {
                            personID: $("#PersonID").val(),
                            selecttype: $("#SelectType").val(),
                            draw: d.draw,
                            length: d.length,
                            start: d.start,
                            order: d.order,
                            columns: d.columns,
                            orderbyfield: d.columns[d.order[0].column].data
                        };
                    d.sData = JSON.stringify(searchData);
                }
            },
            columns: [
                {
                    className: 'details-control',
                    orderable: false,
                    data: null,
                    defaultContent: '<img class="details-control-mouseover" src="/Content/images/details_transparent_background.png" title="Click to see included parts." alt="Click to see included parts."/>'
                },
                { data: "RecordSelector", orderable: false, class: 'dt-center', width: "6%" },
                { data: "Description", width: "25%" },
                { data: "TeamDetails", width: "25%" },
                { data: "CustomerGroupName", width: "13%" },
                { data: "ProjectGroupName", width: "13%" },
                { data: "ClassificationTypeDescription", width: "10%" },
                { data: "AuditDateFormatted", name: "AuditDateFormatted", className: 'dt-center', width: "10%" }
            ],
            order: [[2, "asc"]]
        });
    }
}

function BuildBoMPartsDataTable(parentObjData, tableCounter) {
    oInnerTable = $("#boMPartDataTable_" + tableCounter).DataTable({
        autoWidth: true,
        dom: "tip",
        pagingType: "simple",
        serverSide: true,
        //processing: true,
        autowidth: false,
        language: {
            emptyTable: "This bill of material contains no part."
        },
        ajax:
        {
            url: "/remote/GetChildTableData",
            type: "POST",
            data: function (d) {
                var searchData =
                    {
                        bomID: parentObjData.BomID,
                        draw: d.draw,
                        length: d.length,
                        start: d.start,
                        order: d.order,
                        columns: d.columns,
                        orderbyfield: d.columns[d.order[0].column].data
                    };
                d.sData = JSON.stringify(searchData);
            }
        },
        columns: [
           { data: 'RecordSelector' },
           { data: 'PartNumber' },
           { data: 'Quantity' },
           { data: 'UomAbbreviation' },
           { data: 'StatusName' },
           { data: 'PartNotes' },
           { data: 'IsBomDescription' }
        ]
    });
}

function formatBomDataTableDetailRow(table_id) {
    return  '<div class="table-responsive">' +
            '    <table id="boMPartDataTable_' + table_id + '" class="table table-striped table-bordered">' +
            '        <thead>' +
            '            <tr>' +
            '                <th></th>' +
            '                <th title="Click to sort by part number." alt="Click to sort by part number.">PartNumber</th>' +
            '                <th title="Click to sort by quantity." alt="Click to sort by quantity.">Quantity</th>' +
            '                <th title="Click to sort by unit of measurement." alt="Click to sort by unit of measurement.">UoM</th>' +
            '                <th title="Click to sort by status name." alt="Click to sort by status name.">Status Name</th>' +
            '                <th title="Click to sort by part notes." alt="Click to sort by part notes.">Part Notes</th>' +
            '                <th title="Click to sort by BoM indicator." alt="Click to sort by BoM indicator.">Is BoM</th>' +
            '            </tr>' +
            '        </thead>' +
            '        <tbody></tbody>' +
            '    </table>' +
            '</div>';

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-25T22:49:12.727

几天前看到这篇文章*：- 似乎该示例有一个“小错误”，发生在“iTableCounter > newRowData.length”时：这意味着表格在鼠标单击时“停止扩展和收缩”。

建议的解决方案：将计数器重置为“0”。-- 如果有人能够反驳/验证我的建议（因为 JavaScript 不是我的经验语言），我将不胜感激！;)

* * *

（* 如果我的帖子迟了一年，我深表歉意。但是，鉴于示例说明的强大功能，我希望我会被原谅。）

* * *

Ole Kristian Ekseth, NTNU, 挪威

# c# - C# 禁用系统时间更改

> ID：11841487
> 
> 赞同：0
> 
> 时间：2012-08-07T07:52:46.637
> 
> 标签：c#, time, permissions

我正在尝试制作一个家长控制程序，该程序将阻止在晚上 11:00 之后使用计算机，但为了确保它不会被绕过，我要么必须使用比本地时间（在计算机上）...所以我想知道是否可以从我的路由器请求时间，我做了一些研究，但我找不到任何东西（我的路由器是 D-Link 的）。

所以我突然得出结论，我必须禁用时间更改。有没有办法做到这一点？比如撤销“SeSetSystemTime”权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:02:54.070

如果您的路由器在通过 HTTP 协议交互时设置了 cookie，那么您可以使用该信息。否则，没有其他方法（如果您没有互联网）。

但是，对于一个案例，考虑每分钟获取时间戳，如果时间更改，请将更改保存到时间更改列表中，以通过加减时间更改保持原始时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:03:02.187

您可以使用 Internet 时间服务器，查询这些服务器的代码很容易找到。

例如看看这个

[http://www.codeproject.com/Articles/5972/Daytime-Internet-Time-Service-Class](http://www.codeproject.com/Articles/5972/Daytime-Internet-Time-Service-Class)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T08:02:19.057

为什么要从路由器中获取它？

只需从时间服务器获取它:) 协议是 NTP。

检查这个问题以获得良好的开端：[如何使用 C# 查询 NTP 服务器？](https://stackoverflow.com/questions/1193955/how-to-query-an-ntp-server-from-c-sharp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T08:07:13.613

作为旁注：“监护人”软件，无论多么复杂，都无法取代育儿:)

关于问题：如果您的目标是 Win7，您可以阻止用户更改[系统时间](http://www.sevenforums.com/tutorials/113557-date-time-allow-prevent-users-groups-changing.html)，我认为对于至少 XP 的所有 Windows 版本都应该是可能的

# java - 如何调用其他EAR的bean方法

> ID：11841488
> 
> 赞同：1
> 
> 时间：2012-08-07T07:53:01.507
> 
> 标签：java, ejb, ear

我在 JBOSS 应用程序服务器中有两个 EAR（ *EAR-1*、*EAR-2 ）。*在 EAR-2 中，我有一个无状态会话 bean：

```
TestTimerBean 
```

在这个bean中，我有一个方法：

> ```
>  startTimer() 
> ```

现在我想访问/调用这个方法：`startTimer()`从*EAR-1*。

有人可以建议我如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:06:09.633

您必须做的第一步是查找 EJB。

在 JBoss 中，您可以使用以下方式访问：

```
context/Bean_Name/remote 
```

其中 context 是您的耳朵名称，`Bean_Name`是远程接口。

希望这对你有帮助

# c# - 按声明的顺序在 PropertyGrid 中显示项目

> ID：11841489
> 
> 赞同：3
> 
> 时间：2012-08-07T07:53:02.380
> 
> 标签：c#, .net, propertygrid

是否可以按照声明的方式在 UI 中显示 PropertyGrid 项目？我发现它们首先按 CategoryAttribute 排序，然后按 DisplayName 属性升序​​排序。

我正在使用 Visual Studio 2010 Ultimate 使用 .NET 3.5 版。

编辑

该应用程序是 WPF 应用程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T08:10:44.297

从此文档：[https ://docs.microsoft.com/en-US/dotnet/api/system.windows.forms.propertysort](https://docs.microsoft.com/en-US/dotnet/api/system.windows.forms.propertysort)

如果您将属性设置为属性`PropertySort`的 `PropertySort.NoSort`排序顺序，则应遵循以下标准：*属性按从 TypeDescriptor 中检索到的顺序显示。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-01-14T11:06:24.563

您可以使用注释设置很多属性，其中之一是使用 System.ComponentModel.DataAnnotations.Display 属性的“显示顺序”，如下所示：

```
[DisplayName("Error"),Display(Order = 5)]
public string Error { get; internal set; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-04T13:00:40.020

你可以试试这段代码。

```
private void propertyGrid1_PropertySortChanged(object sender, EventArgs e)
{
    if (propertyGrid1.PropertySort == PropertySort.CategorizedAlphabetical)
    {
        propertyGrid1.PropertySort = PropertySort.Categorized;
    }
} 
```

# drools - 如何访问规则任务中的流程参数？

> ID：11841494
> 
> 赞同：0
> 
> 时间：2012-08-07T07:53:05.950
> 
> 标签：drools, jbpm

我正在使用 JBPM5，我已经建模了一个流程，它的 onStart 转到了 RuleTask。

```
Map<String, Object> params = new HashMap<String, Object>();
params.put("citizenName", "Nannak");
params.put("citizenAge", 23);
ksession.startProcess("com.sample.medicalcheckup", params); 
```

如何访问规则“何时”部分中的“citizenAge”？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:30:26.410

必须在获取流程参数并插入到知识上下文的规则任务之前添加一个脚本任务。

```
org.drools.runtime.process.WorkflowProcessInstance process = org.drools.runtime.process.WorkflowProcessInstance)kcontext.getProcessInstance();
System.out.println(process.getVariable("citizen"));
kcontext.getKnowledgeRuntime().insert(process); 
```

希望我也可以在开始这个过程之前做同样的事情..

感谢[此处提供的示例](https://github.com/Salaboy/Drools_jBPM5-Training-Examples)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-02T23:51:17.327

在drools 6中你可以使用这个：

drools.getContext(org.kie.api.runtime.process.ProcessContext.class).getVariable("processParam1")

# selenium - Selenium 选择器通过第一个中的文本选择第二个 td 中的输入

> ID：11841498
> 
> 赞同：0
> 
> 时间：2012-08-07T07:53:18.790
> 
> 标签：selenium, css-selectors

寻找一个硒选择器，我可以使用第一个 td 中的文本来选择第二个中的输入。

```
<tr><th>asdf</th><td><input type="text"></td></tr>
<tr><th>qwer</th><td><input type="text"></td></tr>
<tr><th>rtyu</th><td><input type="text"></td></tr>
<tr><th>fghj</th><td><input type="text"></td></tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:05:00.690

将此用作文档：

```
<html>
<tr><td>asdf</td><td><input type="text"/></td></tr>
<tr><td>qwer</td><td><input type="text"/></td></tr>
<tr><td>rtyu</td><td><input type="text"/></td></tr>
<tr><td>fghj</td><td><input type="text"/></td></tr>
</html> 
```

将其用作 xpath 表达式：

```
//tr/td[text()="asdf"]//following-sibling::td 
```

这是一个不错的页面，您可以在其中在线测试并玩弄，直到您获得正确的语法： http: [//www.mizar.dk/XPath/Default.aspx](http://www.mizar.dk/XPath/Default.aspx)

查看[以下同级](http://www.zvon.org/xxl/XPathTutorial/Output/example15.html)xpath 示例和[Selenium 定位器参考](http://release.seleniumhq.org/selenium-core/1.0.1/reference.html)。

**答案更新！**

# python - django中的多表继承

> ID：11841506
> 
> 赞同：3
> 
> 时间：2012-08-07T07:53:43.957
> 
> 标签：python, django

我在 django 中使用多表继承。Model Ninja 继承自 Person。在我的测试中，我创建了两个 Ninja 实例和一个 Person 实例。我正在做：

```
self.assertEquals(Person.objects.count(), 3) 
```

但是计数是 1。为什么不是 3？我的印象是为每个 Ninja 创建了一个 Person 表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T02:56:14.470

根据您的描述，忍者是人。因此，您有三个人：1 个普通人，2 个忍者。

这是预期的行为。如果你想知道那些不是其他东西的人（不是忍者，在你的情况下），你必须明确地向 ORM 询问它。例如：

```
Person.objects.
  exclude(id__in=Ninja.objects.values('id')).
  exclude(id__in=SomeOtherPersonSubclass.objects.values('id')) 
```

我不确定代码是否正确/有效，但我认为它传达了这个想法。

您的数据库未按预期运行（正如您在评论中谈到的那样）的事实是因为，为了拥有一个 Ninja 实例，它需要 Person “part”，可以这么说。你必须有类似的东西：

```
[
  {
    "model": "myapp.person",
    "pk": 1,
    "fields": {
      "first_name": "John",
      "last_name": "Lennon"
    }
  },
  {
    "model": "myapp.person",
    "pk": 2,
    "fields": {
      "first_name": "Hattori",
      "last_name": "Hanzo"
    }
  },
  {
    "model": "myapp.ninja",
    "pk": 2,
    "fields": {
      "super_power": "fearless tactics"
    }
  }
] 
```

# mysql - SQL 最大匹配项

> ID：11841510
> 
> 赞同：1
> 
> 时间：2012-08-07T07:54:07.700
> 
> 标签：mysql, sql

这是我的 SQL 问题

表 - 活动

```
id activity userID

0 99 1

1 99 2

2 99 3

3 88 1

4 77 2

5 77 3 
```

我希望查询该表以生成这样的结果，该结果通过以下方式汇集活动的选择

```
different users:

99 1 2 3

88 1

77 2 3 
```

我的第一次尝试是使用 JOIN 递归地自加入表。但这是一个令人头疼的问题。有人有其他建议吗？

谢谢

编辑：另一个问题。如果我想在分组之前检查用户是否是朋友呢？

表 - 朋友

```
id userID friendID
0 1 2
1 2 1
2 1 3
3 3 1
4 2 3
5 3 2 
```

所以他们是朋友（双向）。然后，考虑到他们再次成为朋友，我想进行汇集（GROUP BY）。

再次，谢谢。你们给了我很好的指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:59:00.937

```
select activity,GROUP_CONCAT(userID,' ') from Activity
group by activity 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T08:10:23.947

`GROUP_CONCAT`是您正在寻找的：

```
SELECT   activity,
         GROUP_CONCAT(userID,' ') AS Groups
FROM     Activity
GROUP BY activity
ORDER BY activity DESC; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T08:02:52.953

尝试这个：

```
CREATE TABLE myTable (id int, activity int, userID int);
INSERT INTO myTable VALUES (0, 99, 1);
INSERT INTO myTable VALUES (1, 99, 2);
INSERT INTO myTable VALUES (2, 99, 3);
INSERT INTO myTable VALUES (3, 88, 1);
INSERT INTO myTable VALUES (4, 77, 2);
INSERT INTO myTable VALUES (5, 77, 3);

SELECT activity,GROUP_CONCAT(userID,' ')
  FROM mytable
 GROUP BY activity
 ORDER BY activity DESC; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T08:04:49.263

使用`GROUP BY`活动和`GROUP_CONCAT()`

像这样的代码：

```
SELECT activity,GROUP_CONCAT(userID,' ') AS Groups
FROM Activity
GROUP BY activity
ORDER BY activity DESC; 
```

[看小提琴](http://sqlfiddle.com/#!7/9f3e6/3)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-07T08:01:15.187

```
select act,GROUP_CONCAT(userid,' ') from users
group by act
order by act desc 
```

[SQL 演示在这里](http://sqlfiddle.com/#!2/a270f/5)

# javascript - javascript，更改页面内容

> ID：11841511
> 
> 赞同：0
> 
> 时间：2012-08-07T07:54:18.213
> 
> 标签：javascript, html

我正在尝试做一个使用 javascript 更改页面内容的示例。假设我有一个页面：

```
<html>
<head>
</head>
<body>
<select id="a96780" multiple="multiple" name="a96780" size="3" value="deneme">
<option selected="selected" value="#ANY">ALL</option>
<option value="1111294">Ex1</option>
<option value="1111292">Ex2</option>
<option value="1111290">Ex3</option>
</select>
</body>
</html> 
```

我希望能够在页面加载时关闭所有选项 Ex1、Ex2、Ex3（将它们的类型设置为隐藏或通过其他方式）。为了实现这一点，我按照网上的说明进行操作，但没有这样做：

```
<script type="text/javascript">

function myFunction()
{
var selectBox = document.getElementById("a96780");
alert("smt");
alert(selectBox.name);
}

myFunction();

</script> 
```

在上面的脚本中，我试图打印出元素的名称以确认我确实拥有它。然而，最后一行从不打印。我如何确认我已将元素初始化为 selectBox 以及我应该如何从那里开始。选项值是否足以参考以下项目：“Ex1、Ex2 和 Ex3”？

编辑1：我绝对没有指向html的链接，我不能修改body标签，也不能放置任何可以启动myFunction的按钮，因此无论我做什么，我只能通过js来做。除此之外，如果你能引导我了解我应该如何进行，那也很棒。例如，我可以从它们的值中引用选项项目吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:48:54.873

我的解决方案是：

```
<html>
<head>
<script type="text/javascript">

function initialTypeCorrection()
{
    var selectBox = document.getElementById("a96780");
    if(selectBox != null)
    {
            var options = selectBox.getElementsByTagName("option");
            for (var i = 0; i < options.length; i ++) 
            {   
                // Alternative 1
                if(options[i].value=="1111294" || options[i].value=="1111292" || options[i].value=="1111290")
                {
                    options[i].disabled = "true"; 
                    options[i].text = ""; 

                }
            }
    }

}
window.onload = initialTypeCorrection;

</script>
</head>
<body>
<select id="a96780" multiple="multiple" name="a96780" size="4">
<option selected="selected" value="#ANY">all</option>
<option value="1111294">a1</option>
<option value="1111292">a2</option>
<option value="1111290">a3</option>
</select>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:02:26.053

这是一个工作示例：（您的代码）

[http://jsfiddle.net/44fQX/](http://jsfiddle.net/44fQX/)

有什么问题就问吧：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T08:45:51.810

关于您问题的这一部分：“我希望能够在页面加载时关闭所有选项 Ex1、Ex2、Ex3（将它们的类型设置为隐藏或通过其他方式）”

```
函数 closeAllOptions() {
    var slc = document.getElementById("a96780"), i, opt;
    for (i=0; opt=slc[i]; i++) {
        if (opt.value!="#ANY") {
            opt.disabled=真；
            // 更新
            opt.style.display="none";
        }
    }            
}
函数 relaseAllOptions() {
    var slc = document.getElementById("a96780"), i, opt;
    for (i=0; opt=slc[i]; i++) {
        opt.disabled=false；
        // 更新
        opt.style.display="";
    }            
}

```

测试：http: [//jsfiddle.net/44fQX/1/](http://jsfiddle.net/44fQX/1/)

**更新** [http://jsfiddle.net/44fQX/3/](http://jsfiddle.net/44fQX/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T07:59:34.120

你可能想试试

`<body onload="myFunction()">`

而不是在脚本标签中调用它，因为在 javascript 被初始化时，body 标签中的东西没有被初始化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T08:00:17.590

您需要等到 DOM 完全加载。这意味着 HTML 已被浏览器理解和组织。如果您在此之前执行 javascript，则元素将不存在，因此不会被操纵或打印。

等待 DOM 加载的一种方法是将函数调用放入`onload`body 标记中......

```
<body onload="myFunction();"> 
```

# plone - Plone 网站的每周 ZODB 打包

> ID：11841512
> 
> 赞同：3
> 
> 时间：2012-08-07T07:54:21.300
> 
> 标签：plone, zodb

定期（例如每周）打包 Plone ZODB 数据库的最佳做法是什么？

*   Plone ZEO 集群和单进程 Zope 实例有何不同？

*   使用 zeopack + cron

*   使用 wget + 一些 URL + cron + 特殊 Zope 用户

*   其他方法？

*   ZClockServer 与 cron？

我发现如果命令在 cron 中运行，有时 zeopack 实际上不会打包数据库。然而，调试这个问题没有什么问题，因为 zeopack 和 ZODB 都没有报告太多关于它们自己的信息。任何想法可能导致这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T09:44:01.520

这取决于您在 3 个选项之间配置站点的方式：

1.  独立，使用 Data.fs（默认）。您唯一的选择是使用`wget`cron 作业，最好是使用专用的 Zope 用户，该用户的唯一权限是打包。这是因为 Zope 进程是唯一可以访问 Data.fs 的进程。

2.  ZEO 设置。现在您可以指示 ZEO 服务器使用 cron 作业打包您的 Data.fs（请参阅[What is theSuggested way to cron-automate ZODB packs for a production Plone instance?](https://stackoverflow.com/questions/5300886/what-is-the-suggested-way-to-cron-automate-zodb-packs-for-a-production-plone-ins/5301192#5301192)）。

3.  一个 RelStorage 设置。RelStorage 包含它自己的打包脚本；这是创建它的构建配置，然后您可以从 cron 作业运行它：

    ```
    [buildout]
    packing-parts =
        relstorage-zodbpack-conf
        relstorage-zodbpack

    [relstorage-zodbpack-conf]
    recipe = collective.recipe.template
    input = inline:
        <relstorage>
            pack-gc true
            create-schema false
          <[yourdatabase]>
            [database connection info]
          </[yourdatabase]>
        </relstorage>
    output = ${buildout:directory}/etc/zodbpack.conf

    [relstorage-zodbpack]
    recipe = zc.recipe.egg:scripts
    eggs =
        RelStorage
    scripts = zodbpack
    initialization =
        config = '${buildout:directory}/etc/zodbpack.conf'
    arguments = config 
    ```

# php - Twig 遍历对象属性

> ID：11841515
> 
> 赞同：26
> 
> 时间：2012-08-07T07:54:34.077
> 
> 标签：php, twig

我在 Twig 文档中读到，可以通过以下方式迭代关联数组：

```
{% for key, value in array %}  
 {{key}}  
 {{value}}  
{% endfor %} 
```

我想知道这是否也适用于 stdClass 类型的对象。

我本来希望 Twig 以属性名称作为键来迭代对象的属性值。相反，for循环中包含的指令块根本不执行。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-07T08:30:54.403

您可以先将对象转换为数组。您可以构建自己的过滤器，将您的对象转换为数组。更多关于过滤器的信息在这里：[http ://twig.sensiolabs.org/doc/advanced.html#filters](http://twig.sensiolabs.org/doc/advanced.html#filters)

然后它可能看起来像这样：

```
{% for key, value in my_object|cast_to_array %} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-12-21T18:36:22.033

要完成 Tadeck 的回答，方法如下：

如果您从未创建或设置过 Twig 扩展（过滤器），则需要先按照此说明进行操作[http://symfony.com/doc/2.7/cookbook/templating/twig_extension.html](http://symfony.com/doc/2.7/cookbook/templating/twig_extension.html)

1) 添加到您的 AppBundle/Twig/AppExtension.php ('cast_to_array')

```
public function getFilters()
{
    return array(
        new \Twig_SimpleFilter('md2html', array($this, 'markdownToHtml'), array('is_safe' => array('html'))),
        new \Twig_SimpleFilter('price', array($this, 'priceFilter')),
        new \Twig_SimpleFilter('cast_to_array', array($this, 'objectFilter')),
    );
} 
```

2) 添加到您的 AppBundle/Twig/AppExtension.php

```
public function objectFilter($stdClassObject) {
    // Just typecast it to an array
    $response = (array)$stdClassObject;

    return $response;
} 
```

3）在您的 example.html.twig 循环中使用树枝和过滤器。

```
{% for key, value in row|cast_to_array %}
       <td id="col" class="hidden-xs">{{ value }}</td>
{% endfor %} 
```

完成了，希望对你有帮助。从塔德克的指针。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-06-25T20:00:32.237

加载 TWIG 后，添加此过滤器：

```
$twig->addFilter( new Twig_SimpleFilter('cast_to_array', function ($stdClassObject) {
    $response = array();
    foreach ($stdClassObject as $key => $value) {
        $response[] = array($key, $value);
    }
    return $response;
})); 
```

[根据Tadeck](https://stackoverflow.com/users/548696/tadeck)的建议，它被命名为**cast_to_array**。:) 我确定它不适用于任何类型的*stdClass Object*，但它确实解决了我打印 PHP*关联数组*的问题:) 按如下方式使用它：

 **```
{% for key, value in my_object|cast_to_array %}
    <td>{{ value.1 }}</td>
{% endfor %} 
```

# 番外篇

因为我经常进入这个 SO 页面，所以我认为显示我在哪里使用 Twig*迭代对象属性*是相关的，所以它对其他有同样问题的人很有帮助：我试图从 .json 打印一个表源，但 PHP 的 json_decode 将任何*"key" : "value"*转换为 PHP 关联数组，Twig 默认不打印。所以这个过滤器切割并提供一个规则数组供 Twig 使用。

## source.json

```
{
    "user": {
        "family": {
            "table": [{
                "First_Name": "John",
                "Last_Name": "Foo",
                "Age": 25,
                "Role": "Brother"
            }, {
                "First_Name": "Mary",
                "Last_Name": "Bar",
                "Age": 14,
                "Role": "Sister"
            }, {
                "First_Name": "Joe",
                "Last_Name": "Baz",
                "Age": 33,
                "Role": "Uncle"
            }]
        }
    }
} 
```

## 枝条

```
<table>
  <thead>
    <tr> {# get table headers from the table row #}
      {% for row in user.family.table.0|cast_to_array %}
        <th>{{ row.0 | replace({'_': ' '}) }}</th>
      {% endfor %}
    </tr>
  </thead>
  <tbody>
    {% for row in user.family.table %}
      <tr>
      {% for key, value in row|cast_to_array %}
        <td>{{ value.1 }}</td>
      {% endfor %}
      </tr>
    {% endfor %}
  </tbody>
</table> 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-12-01T19:45:00.637

我知道这是旧的，但不会

```
$assoc_array = json_decode(json_encode($stdClassObject), TRUE); 
```

工作也一样吗？

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-11-06T00:10:51.593

以防这对其他人有帮助。如果你实现了 PHP 的 Iterator 接口，你可以让 Twig 迭代你的对象的属性。

在我的例子中，我有一个通用对象，它使用魔术方法 __get()、__set()、__isset() 和 __unset()，同时将键值对存储在私有数组中。这在 Twig 中工作正常，直到您想使用类似这样的方法迭代对象

```
<ul>
{% for prop, value in object %}
    <li>{{prop|replace({'_': ' '})|title}}</li>
{% endfor %}
</ul> 
```

为了使它工作，我必须实现 Iterator 接口。然后上面的代码完美运行。

现在由于神奇的 __get() 属性名称也不区分大小写，因此每个这些都可以工作。

```
<ul>
{% for object in arrayOfObjects %}
    <li>{{ object.property }}</li>
    <li>{{ object.Property }}</li>
    <li>{{ object.PROPERTY }}</li>
{% endfor %}
</ul> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-11T12:24:50.240

```
 {% for key, item in content.field_invoice_no if key|first != '#' %} <tr>
      <td>{{ item }}</td>
       <td> {{ content.field_invoice_date[key]  }}     </td>
       <td> {{ content.field_invoice_price[key]   }}       </td>
       </tr>
    {% endfor %} 
```

在键值上迭代对象

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-10T10:58:24.767

我终于想出了一个香草 Twig 解决方案。我利用 reduce 过滤器将对象转换为数组。

假设我们从后端获取了一个地址对象，并希望将其转换为关联数组，以便单独渲染每一行。

```
{% set address = { firstName: 'Stack', lastName: 'Overflow', address: 'here', zipCode: '1234' } %} 
```

我们减少键并将它们添加到一个空数组中

```
{% set addressLines = address|keys|reduce((carry, key) => carry|merge({ (key): attribute(address, key) }), []) %} 
```

这导致：

```
[ 'firstName' => 'Stack', 'lastName' => 'Overflow', 'address'=> 'here', 'zipCode' => '1234' ] 
```

现在我们可以在 for 循环中渲染它

```
{% set allowedKeys = ['firstName', 'lastName', 'address'] %}
{% for key, line in addressLines|filter((v, k) => k in allowedKeys) %}
    {{ line }}<br/>
{% endfor %} 
```**

# asp.net - 我自己的设计与 asp.net 表单身份验证

> ID：11841517
> 
> 赞同：-1
> 
> 时间：2012-08-07T07:54:42.127
> 
> 标签：asp.net, forms-authentication

我一直在使用 asp.net 的表单身份验证来限制用户尝试访问网页时。如您所知，在表单身份验证中，您需要编辑 web.config 文件以授予用户访问网页的权限。
现在我想改变这个设计。我不想应用 asp.net 的逻辑。我想用我自己设计的表来存储哪些用户角色可以访问我的数据库中哪些页面的信息。

我想知道asp.net的表单身份验证是否有一些额外的集成安全保护。如果是这样，那么我也应该应用这些安全概念。但是如果表单认证只是为了简化认证的逻辑，那么我自己的设计就足够了。

有什么意见吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:58:24.703

您将授权与身份验证混淆了 - 身份验证正在验证用户是他们所说的身份，而授权是他们可以做的事情。

因此，您可能正在寻求实现自定义成员资格提供程序 - 您不必将角色信息存储在 web.config 中。您可以继续对登录部分使用表单身份验证。

[http://msdn.microsoft.com/en-us/library/f1kyba5e.aspx](http://msdn.microsoft.com/en-us/library/f1kyba5e.aspx)

# image - 如何使用 XamlUIPresenter？

> ID：11841518
> 
> 赞同：0
> 
> 时间：2012-08-07T07:54:41.440
> 
> 标签：image, windows-runtime, windows-store-apps, winrt-xaml, direct3d

在 WinRT 中，我们有新类“ [XamlUIPresenter](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.hosting.xamluipresenter) ”。XamlUIPresenter 允许在 Microsoft Direct3D 表面上呈现可视化树。但是没有任何使用它的演示或示例。我怎样才能使用这个类？如何获得 Direct3D 表面？我可以在 XamlUIPresenter 的帮助下渲染和保存 png 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:33:12.333

IIRC 该类仅可用于 Blend 以及文档中所说的任何内容 - 它不适用于进入 Windows 应用商店的应用程序。如果您需要替换 WriteableBitmap.Render 方法 - 请参阅我对您其他[问题](https://stackoverflow.com/questions/11840835/rendering-an-image-at-runtime-in-winrt)的回答。

# c# - 手动连接 Page_PreInit 事件，AutoEventWireup 设置为 false

> ID：11841519
> 
> 赞同：6
> 
> 时间：2012-08-07T07:54:44.263
> 
> 标签：c#, asp.net, events, event-handling, page-lifecycle

如果`AutoEventWireup`属性设置为`false`，则需要手动连接事件。但是，我似乎无法`Page_PreInit`开火。我想我可能让连线发生得太晚了（一旦我们已经过去了`Page_PreInit`），但我不确定在哪里放置连线。

例如...

```
protected override void OnInit(EventArgs e)
{
    base.OnInit(e)
    PreInit += new EventHandler(Page_PreInit);
    Load += new EventHandler(Page_Load);
}

protected void Page_PreInit(object sender, EventArgs e)
{
    Response.Write("Page_PreInit event fired!<br>");  //this is never reached
}

protected void Page_Load(object sender, EventArgs e)
{
    Response.Write("Page_Load event fired!<br>");
} 
```

上面的代码导致“Page_Load 事件被触发！” 正在显示，但没有来自`Page_PreInit`. 我`base.OnInit(e)`在接线之前和之后都试过了，但没有效果。

[此处](http://msdn.microsoft.com/en-us/library/ms178472.aspx)显示的图表表明该`OnInit`方法实际上是在`PreInit`事件之后出现的。考虑到这一点，我尝试覆盖`OnPreInit`并做同样的事情——没有效果。

[此处](http://msdn.microsoft.com/en-us/library/system.web.configuration.pagessection.autoeventwireup.aspx)的 MSDN 文章明确指出，在`AutoEventWireup`设置为`false`的情况下，可以将事件连接到覆盖`OnInit`中。他们使用的例子是`Page_Load`，当然这对我来说就像它一样，但他们没有解决这似乎不适用于`Page_PreInit`事件。

**我的问题是：在设置为的情况下，我怎样才能将`Page_PreInit`事件连接起来？`AutoEventWireup``false`**

[我了解MSDN 页面](http://msdn.microsoft.com/en-us/library/system.web.configuration.pagessection.autoeventwireup.aspx)上列出了替代方案，例如使用页面的构造函数。我想具体了解如何按照他们的建议进行操作`OnInit`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-07T08:17:20.137

[OnPreInit()](http://msdn.microsoft.com/en-us/library/system.web.ui.page.onpreinit.aspx)方法的基本实现负责引发`PreInit`事件。由于您的覆盖在注册处理程序*之前*调用了该实现`PreInit`，因此它确实不会被调用。

注册处理程序*后*尝试调用基类的方法：

```
protected override void OnPreInit(EventArgs e)
{
    PreInit += new EventHandler(Page_PreInit);
    Load += new EventHandler(Page_Load);

    // And only then:
    base.OnPreInit(e);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-06T11:45:28.340

在初始化区域添加所有事件：

```
public WebName()
      {
         this.event+=TAB Key
      } 
```

# ffmpeg - av_register_all 在 Windows 上的 Release 模式下生成异常

> ID：11841522
> 
> 赞同：16
> 
> 时间：2012-08-07T07:54:46.090
> 
> 标签：ffmpeg, libav

我有一个使用 libav 的程序。在调试模式下编译时效果很好（Windows，VisualStudio 2010）。但是，当程序在 Release 模式下编译时，它会在 av_register_all 中崩溃。我得到的例外是特权指令。

任何人都知道是否需要在发布模式下完成任何特殊操作才能使 libav 工作？

最好的问候冉

# windows - 批处理脚本：读取目录中的每个文件，替换一些字符串，将每个文件缩短到 10 行

> ID：11841527
> 
> 赞同：0
> 
> 时间：2012-08-07T07:55:17.387
> 
> 标签：windows, batch-file

我需要帮助在 Windows 上编写批处理脚本。我的目录 C:\OUTFiles 包含 2355 个不同长度的 .txt 文件，其中包含指向 Wikipedia 文章的链接 - 例如一个名为“Holzhausen.txt”的文件：

http://de.wikipedia.org/wiki/[[Holzhausen (Langenpreising)]], Ortsteil der Gemeinde [[Langenpreising]] http://de.wikipedia.org/wiki/[[Holzhausen (Dähre)]], Ortsteil der Gemeinde [[Dähre]] ...

我想浏览 C:\OUTFiles 中的所有文件并将每个文件的长度减少到 10 行（或者如果短于 10 行，则不要更改长度）。

此外，如果文件包含上面第一行中的 [[some text]]，我需要删除所有括号 [[]]。

我如何在 Windows 上将其作为批处理脚本文件执行？我是批处理脚本的新手，我搜索了 StackOverflow 并尝试组装一个批处理脚本，但它还没有完成/工作：

```
@ECHO OFF
setlocal enabledelayedexpansion
set counter=1
for %%f in (*.txt) do call :p "%%f"
goto :eof

:p

SET /A maxlines=10
SET /A linecount=0

FOR /F %%A IN (*.txt) DO ( 
  IF !linecount! GEQ %maxlines% GOTO ExitLoop
  ECHO %%A 
  SET /A linecount+=1
)
SET /A counter+=1

:ExitLoop
:eof 
```

暂停

非常感谢您提前！！佩特拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:03:42.417

此解决方案假设您购买了我上面的建议以使用 powershell 而不是批处理。

```
# this line assumes current directory - adjust to point to the actual location
$files = get-childitem *.txt
foreach ($file in $files) {
    $data = get-content $file
    $count = 1
    # this assumes that you want to put the modified 
    # output in a new file and keep the original file
    $newfile = $file.name + ".new.txt"
    foreach ($line in $data) {
        if($count -gt 10) {break}
        $line = $line -replace "[\[\]]",''
        out-file -filepath $newfile -inputobject $line -Append
        $count = $count + 1
    }
} 
```

# oauth - 在雅虎的收件箱中创建一个文件夹

> ID：11841529
> 
> 赞同：0
> 
> 时间：2012-08-07T07:55:21.583
> 
> 标签：oauth, yahoo, yql

在`OAuth`处理之后我只想在雅虎中创建文件夹并将一些电子邮件移动到它，`YQL`如果没有，是否可以使用其他方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:07:53.720

有 SOAP/JSON 调用来[创建文件夹](http://developer.yahoo.com/mail/docs/user_guide/CreateFolder.html)以及为Yahoo Mail[移动消息](http://developer.yahoo.com/mail/docs/user_guide/MoveMessages.html)。

# mapreduce - Hadoop Mapreduce 上是否有决策树算法的实现？

> ID：11841531
> 
> 赞同：0
> 
> 时间：2012-08-07T07:55:33.937
> 
> 标签：mapreduce, machine-learning, data-mining, hdfs, mahout

我正在寻找 Hadoop Mapreduce 上决策树算法的实现。有没有准备好实施？我看到 Mahout 只有决策林，是否可以将决策树与决策林一起使用？有什么相似之处/不同之处？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T03:21:00.923

*分布式*决策树最常见的方式可能是森林。因为通过计算独立的树来分布是微不足道的，而以分布式的方式有效地构建一棵树并不简单？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T00:34:34.160

随机森林当然可以很好地并行化，因为每棵树都建立在（希望是）随机的、独立的训练数据子集上。

但是，Hadoop 已经决定了每个节点上的数据（以及数据量）。根据源数据，在分发到节点之前预先随机化可能不切实际。此外，每个节点上的观察次数不再是 RF 算法的参数，它由 Hadoop 配置控制数据的分布方式和节点上的数据冗余程度。如果没有特别注意，样本偏差很容易蔓延到每个树（专家）模型中。

尽管如此，跨多个hadoop节点并行化单个树（CART）应该是可能的，因为CART中二进制递归分区所需的核心计算，例如计算平均值（总和除以计数），误差函数（方差，基尼等）应该可以写在map reduce中。这不是微不足道的，因为节点需要非常健谈才能工作——发送索引来划分原始数据样本的子节点，然后在子节点上递归。我认为这可能适用于非常庞大的数据集，但对于已经“适合”单个工作程序内存的数据集，它会慢得多。

革命分析最近确实发布了他们的版本或 R 在 Hadoop 集群上实现了决策树。我还没有尝试过，但是看看它在各种大型数据集上的表现会很有趣。

这是链接：[Revolution Analytics 为预测分析带来大数据决策树和新的 Hadoop 支持](http://www.revolutionanalytics.com/news-events/news-room/2012/revolution-analytics-brings-big-data-decision-trees-and-new-hadoop-support-to-predictive-analytics.php)

# java - 使用 JMockit 模拟类

> ID：11841532
> 
> 赞同：3
> 
> 时间：2012-08-07T07:55:40.460
> 
> 标签：java, testing, jmockit

我是 Mocking 框架的新手。我现在正在研究的框架是 JMockit。我有一个疑问。如果我对这个话题的理解很差，请原谅我。

我有一个扩展抽象类的 A 类。类是这样的：

```
class A extends AbstractClass{
      private B b = UtilClass.getBean("b");
      private C c = UtilClass.getBean("c");

  .........
  .........
  .........

} 
```

UtilClass 是这样的：

```
public final class UtilClass{
  private static UtilContext context = new UtilContext();
   //getBean method which returns a bean object
} 
```

我想模拟 getBean 方法。所以要模拟这个方法，我必须模拟 UtilContext 类。如果它正在实例化其他类，那么我也必须模拟它。这样我必须模拟很多课程，这不是一个好主意。请帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T08:30:34.120

如果只需要访问 UtilClass 中的 getBean 方法，则可以模拟整个 UtilClass 并使用该`$clinit`方法禁用其静态初始化（它不会禁用在编译时解析的静态初始化（常量））：

```
new MockUp<UtilClass>() {
    @Mock
    void $clinit() {
        //disable static initialization
    }

    @Mock
    public static SomeType getBean(String s) {
        if("b".equals(s)) return new B();
        if("c".equals(s)) return new C();
        ...
    }
}; 
```

# java - 如何以编程方式将 -X 选项传递给 java 编译器

> ID：11841534
> 
> 赞同：4
> 
> 时间：2012-08-07T07:55:45.547
> 
> 标签：java, compiler-construction, javac

[JavaCompiler](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html) - 如何以`-X options`编程方式传递给 JavaCompiler 类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T05:28:36.637

您链接到的[JavaCompiler](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)页面有一些很好的示例。他们使用以下代码行调用编译器：

```
compiler.getTask(null, fileManager, null, null, null, compilationUnits1).call(); 
```

该`getTask`方法的第四个参数是选项字符串列表（实际上`Iterable<String>`，列表就足够了）。所以你可以这样做：

```
compiler.getTask(null, fileManager, null,
    Arrays.asList("-Xlint:all"),
    null, compilationUnits1).call(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T07:59:28.973

AFAIK Java 编译器在当前的 JVM 中运行。如果你想设置一个`-X`选项，你需要为你的程序设置它。

# c# - 为 WebClient 请求设置 User-Agent 标头

> ID：11841540
> 
> 赞同：70
> 
> 时间：2012-08-07T07:56:26.387
> 
> 标签：c#, windows-phone-7

为 Windows Phone 7 的 WebClient 请求设置 User-Agent 标头的正确方法是什么？我找到了 2 个选项，但不确定哪一个是正确的。考虑一个 WebClient 对象：

```
WebClient client = new WebClient(); 
```

我看到了2个选项：

1.  使用以下方法设置用户代理：

    ```
    client.Headers["User-Agent"] = "myUserAgentString"; 
    ```

2.  使用 WebHeaderCollection 设置用户代理：

    ```
    WebHeaderCollection headers = new WebHeaderCollection();
    headers[HttpRequestHeader.UserAgent] = "userAgentString";
    client.Headers = headers; 
    ```

您能否告知以上两种方法中哪一种是正确的？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-08-07T08:07:06.763

您可以查看[`WebClient`文档](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)以获取将用户代理添加到您的 C# 示例，`WebClient`并[在此处](http://msdn.microsoft.com/en-us/library/ff637320%28v=vs.95%29.aspx#header_support)查看 Windows Phone 示例。

这是 C# 的示例：

```
WebClient client = new WebClient ();

// Add a user agent header in case the 
// requested URI contains a query.

client.Headers.Add ("user-agent", "Mozilla/4.0 (compatible; MSIE 6.0; " + 
                                  "Windows NT 5.2; .NET CLR 1.0.3705;)"); 
```

这是 Windows Phone (Silverlight) 的示例：

```
request.Headers["UserAgent"] = "appname";
// OR
request.UserAgent = "appname"; 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-08-29T17:05:43.887

我发现 WebClient 在一个请求后不断删除我的 User-Agent 标头，我厌倦了每次都设置它。我使用 hack 通过制作自己的自定义 WebClient 并**覆盖 GetWebRequest**方法来永久设置 User-Agent。希望这可以帮助。

```
public class CustomWebClient : WebClient
{
    public CustomWebClient(){}

    protected override WebRequest GetWebRequest(Uri address)
    {
        var request = base.GetWebRequest(address) as HttpWebRequest;
        request.UserAgent="Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/6.0;)";

        //... your other custom code...

        return request;
    }
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-11-01T18:56:13.983

你也可以使用它：

```
client.Headers.Add(HttpRequestHeader.UserAgent, "My app."); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-03T20:38:14.340

作为其他答案的补充，这里是微软针对其浏览器的[用户代理字符串的指南。](https://msdn.microsoft.com/en-us/library/hh869301%28v=vs.85%29.aspx)用户代理字符串因浏览器（Internet Explorer 和 Edge）和操作系统（Windows 7、8、10 和 Windows Phone）而异。

例如，这是**Windows 10 上 Internet Explorer 11**的用户代理字符串：

```
Mozilla/5.0 (Windows NT 10.0; WOW64; Trident/7.0; rv:11.0) like Gecko 
```

对于**Windows Phone 8.1 更新的 Internet Explorer**：

```
Mozilla/5.0 (Mobile; Windows Phone 8.1; Android 4.0; ARM; Trident/7.0; Touch; rv:11.0; IEMobile/11.0; NOKIA; Lumia 520) like iPhone OS 7_0_3 Mac OS X AppleWebKit/537 (KHTML, like Gecko) Mobile Safari/537 
```

为桌面、移动和 WebView的**Edge**浏览器的用户代理字符串提供了模板。有关某些 Edge 用户代理字符串示例，请参阅[此答案](https://stackoverflow.com/a/31279980/1497596)。

最后，[MSDN 上的另一个页面](https://msdn.microsoft.com/en-us/library/bg182625%28v=vs.85%29.aspx)为旧桌面操作系统上的 IE11 提供了指导。

**Windows 8.1 上的 IE11**：

```
Mozilla/5.0 (Windows NT 6.3; Trident/7.0; rv:11.0) like Gecko 
```

和**Windows 7 上的 IE11**：

```
Mozilla/5.0 (Windows NT 6.1; Trident/7.0; rv:11.0) like Gecko 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-15T12:53:58.027

这对我有用：

```
var message = new HttpRequestMessage(method, url);
message.Headers.TryAddWithoutValidation("user-agent", "<user agent header value>");
var client = new HttpClient();
var response = await client.SendAsync(message); 
```

在这里您可以找到[TryAddWithoutValidation的文档](https://docs.microsoft.com/en-us/dotnet/api/system.net.http.headers.httpheaders.tryaddwithoutvalidation?view=netstandard-2.0)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-01-24T08:01:17.693

```
const string ua = "Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)";
Request.Headers["User-Agent"] = ua;
var httpWorkerRequestField = Request.GetType().GetField("_wr", BindingFlags.Instance | BindingFlags.NonPublic);
if (httpWorkerRequestField != null)
{
    var httpWorkerRequest = httpWorkerRequestField.GetValue(Request);
    var knownRequestHeadersField = httpWorkerRequest.GetType().GetField("_knownRequestHeaders", BindingFlags.Instance | BindingFlags.NonPublic);
    if (knownRequestHeadersField != null)
    {
        string[] knownRequestHeaders = (string[])knownRequestHeadersField.GetValue(httpWorkerRequest);
                    knownRequestHeaders[39] = ua;
    }
} 
```

# c# - 动态创建的文本框在 PostBack 上失去价值

> ID：11841546
> 
> 赞同：2
> 
> 时间：2012-08-07T07:56:36.297
> 
> 标签：c#, asp.net, updatepanel

我正在使用`ASP.NET/C#`.

在我的一个页面中，我正在使用.Inside`Update Panel`我`Update Panel`有一个在.`LinkButton``Textbox``Update Panel`

是动态创建的`Textboxes`，它工作正常。但是，当我`click`同样`Linkbutton`添加 next`Textbox`时，我以前的值`Textbox`丢失了。

我认为这是因为`PostBack`.

这是我的创建代码`Textboxes`。

```
protected void linkAddAmount_Click(object sender, EventArgs e)
        {
            int count = 0;

            if (ViewState["ButtonCount"] != null)
            {
                count = (int)ViewState["ButtonCount"];
            }

            count++;
            ViewState["ButtonCount"] = count;

            for (int i = 0; i < count; i++)
            {
                AmountUpdatePanel.ContentTemplateContainer.Controls.Add(new LiteralControl("<span>From:&nbsp;</span>"));
                TextBox textbox1 = new TextBox();
                textbox1.ID = "txtAmountFrom" + i;
                textbox1.Attributes.Add("class", "ShortTextbox");
                AmountUpdatePanel.ContentTemplateContainer.Controls.Add(textbox1);
            }
        } 
```

谁能帮我解决这个问题？

欢迎任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T08:54:54.960

也许这篇 MSDN 文章解释了为什么会发生这种情况：[Dynamic Web Server Controls and View State](http://msdn.microsoft.com/en-us/library/hbdfdyh7.aspx)

您将在这篇较早的文章中找到一个很好的解释：[动态 Web 控件、回发和视图状态](http://aspnet.4guysfromrolla.com/articles/092904-1.aspx)

如果动态控件是在每个页面请求上创建的，它们将从上一个请求中获取 ViewState 值，因此可能会在加载时创建控件，隐藏它们并在用户执行某些操作时显示它们。

此外，如果您在设计时创建了具有这种在回发后丢失值的行为的控件，请检查您是否没有在某处将其 EnableViewState 属性设置为*false 。*

你应该沿着它的*Id设置控件的**名称*。该名称用于表单提交。当您有一个具有不同 ID 和相同名称的单选按钮列表时，这一点最为明显。提交后，将发送一对以单选按钮的名称为键、选定单选按钮的 id 作为值的对。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-15T15:28:24.950

在 Postback 上，可以调用这些类型的代码来重新获得 Textbox 的值。

```
txtPartName.Text = Request.Form[txtPartName.UniqueID]; 
```

对于第一次加载，我们可以在设置值之前在代码下方，如上一行所述。如果这些值是第一次从 DB 或外部绑定，这些行可能会有所帮助。

```
if (!string.IsNullOrEmpty(Request.Form[txtPartName.UniqueID])) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T07:59:43.877

可以在 Stack 上找到有关在更新面板中使用动态控件的信息：

[在 UpdatePanel 中动态创建控件？](https://stackoverflow.com/questions/4086320/dynamic-created-controls-inside-updatepanel)

您是否通过以下方式实现了 flem 的答案？

```
protected void linkAddAmount_Click(object sender, EventArgs e)
        {
            int count = 0;

            if (ViewState["ButtonCount"] != null)
            {
                count = (int)ViewState["ButtonCount"];
            }

            count++;
            ViewState["ButtonCount"] = count;

            for (int i = 0; i < count; i++)
            {
                AmountUpdatePanel.ContentTemplateContainer.Controls.Add(new LiteralControl("<span>From:&nbsp;</span>"));
                TextBox textbox1 = new TextBox();
                textbox1.ID = "txtAmountFrom" + i;
                textbox1.Attributes.Add("class", "ShortTextbox");

            if (!string.IsNullOrEmpty(Request.Form["txtAmountFrom" + i.ToString()]))
                {
              textbox1.Text = Request.Form["txtAmountFrom" + i.ToString()];
                }

                AmountUpdatePanel.ContentTemplateContainer.Controls.Add(textbox1);
            }
        } 
```*

# mysql - mysql选择每个月的记录数

> ID：11841549
> 
> 赞同：6
> 
> 时间：2012-08-07T07:56:42.597
> 
> 标签：mysql

我需要在 mysql 中制作一个查询，该查询将返回 12 行（每个月一行），用于选择月份名称和给定月份的记录数。我有两个表，一个months_tbl 和events_tbl。events_tbl 中的每条记录都有一个 datetime 列和一个 company_id 列。

我目前正在做类似的事情（注意我还没有 WHERE company_id 子句）：

```
SELECT months_tbl.month, COUNT( events_tbl.event_id ) cnt
FROM months_tbl
LEFT JOIN events_tbl ON months_tbl.month_id = MONTH( events_tbl.appt_date_time )
GROUP BY months_tbl.month
ORDER BY months_tbl.month_id ASC; 
```

这将返回类似于我所期望的内容（选择了 12 行，包含该月的事件计数，如果没有，则返回零）：

```
**month**    **cnt**
January      0
February     0
March        0
April        0
May          0
June         0
July         0
August       88
September    99
October      120
November     0
December     9 
```

但是，无论公司如何，它都会返回所有记录。我需要确保查询被过滤，所以我添加了 where 子句：

```
SELECT months_tbl.month, COUNT( events_tbl.appt_id ) cnt
FROM months_tbl
LEFT JOIN events_tbl ON months_tbl.month_id = MONTH( events_tbl.appt_date_time ) 
WHERE events_tbl.company_id = 1 
GROUP BY months_tbl.month
ORDER BY months_tbl.month_id ASC; 
```

当我添加 where 子句时，我的结果变为：

```
**month**    **cnt**
August       88
September    99
October      120
December     9 
```

任何想法为什么我在添加 where 子句时会丢失所有其他月份的记录，即使我使用的是左连接？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T07:59:03.827

您正在使用 a `LEFT JOIN`，但在您的 where 声明中，您将其设为“正常”`JOIN`

试着这样写：

```
SELECT months_tbl.month, COUNT( events_tbl.appt_id ) cnt
FROM months_tbl
  LEFT JOIN events_tbl ON (months_tbl.month_id = MONTH(events_tbl.appt_date_time) 
    AND events_tbl.company_id = 1
  )
GROUP BY months_tbl.month
ORDER BY months_tbl.month_id ASC; 
```

注意`AND events_tbl.company_id = 1`是在`LEFT JOIN`

# ghostscript - Ghostscript - 为图像指定 dpi

> ID：11841551
> 
> 赞同：1
> 
> 时间：2012-08-07T07:56:51.740
> 
> 标签：ghostscript, imagemagick-convert

我目前正在使用 ImageMagick 提取 pdf 文档的页面图像。我需要不同 dpi 的页面图像。

使用的转换命令是

```
exec('convert -density 500 "' . $filefullpath . '" -resample ' . $dpi . '%d.jpg'); 
```

由于 convert 方法非常耗时，因此我决定将其替换为 gs 命令。

当前编写的 gs 命令是

```
exec('gs -dNOPAUSE -sDEVICE=jpeg -dFirstPage='.$params['startPage'].' -dLastPage='.$params['endPage'].' -sOutputFile=%d.jpg -dJPEGQ=100 -r ' . $params['dpi'] . ' -q "' . $params['filefullpath'] . '" -c quit', $result); 
```

-r 参数用于指定 dpi。

我需要的 dpi 是 50、100、125、150、200 和 300

转换命令以良好的质量正确返回输出。但是 gs 命令没有返回所需的 dpi，而且质量也不好。

有人可以帮我修改我的 gs 命令以达到预期的结果吗？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:34:30.503

`-r '`您应该在=>之后删除空格符号`-r'`：

```
exec('gs -dNOPAUSE -sDEVICE=jpeg -dFirstPage='.$params['startPage'].' -dLastPage='.$params['endPage'].' -sOutputFile=%d.jpg -dJPEGQ=100 -r' . $params['dpi'] . ' -q "' . $params['filefullpath'] . '" -c quit', $result); 
```

# go - Go 的 QR 码库

> ID：11841552
> 
> 赞同：5
> 
> 时间：2012-08-07T07:56:57.773
> 
> 标签：go, qr-code

是否有使用 Go 编程语言生成 QR 码的库？我正在寻找可以生成图像文件的纯 Go 语言。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T08:47:09.080

Russ 用 QR 码做了一些有趣的事情，他的工具可以在这里找到： [http ://code.google.com/p/rsc/source/browse/qr](http://code.google.com/p/rsc/source/browse/qr)

# objective-c - 将 NSData 转换为有符号整数

> ID：11841564
> 
> 赞同：1
> 
> 时间：2012-08-07T07:57:48.400
> 
> 标签：objective-c, nsdata

我已经看到了一些类似的问题，但我无法做到这一点：

我在 NSData 对象中收到一个 16 位有符号整数，例如“0xFF3C”。我怎样才能从中读出正确的数字？

编辑：随着詹姆斯韦伯斯特的回答，我得到：

```
Received hex value : <0800>
Converted value: 803995656
Received hex value : <0a00>
Converted value: 803995658
Received hex value : <1a00>
Converted value: 803995674
Received hex value : <faff>
Converted value: 804061178
Received hex value : <e4ff>
Converted value: 804061156
Received hex value : <f0ff>
Converted value: 804061168 
```

这显然是不正确的（我预计 +/- 2000）

编辑：一些代码：

```
-(void)characteristicValueRead:(CBCharacteristic *)characteristic{

  unsigned short myInt = (int) [characteristic.value bytes];
  NSLog(@"Received value: %@", characteristic.value);
  NSLog(@"Converted value: %i",(int)myInt);
} 
```

有了这个片段，我得到：

```
Received value: <0000>
Converted value: 26176
Received value: <0000>
Converted value: 46688
Received value: <0000>
Converted value: 30576
Received value: <0000>
Converted value: 2656
Received value: <0000>
Converted value: 50896
Received value: <0000> 
```

这看起来真的很有趣/烦人。这可能是什么来的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:08:11.757

实际上是一个相当困难的问题！

这是我尝试的第 20 件事，似乎工作正常：

```
NSData *data = [NSData dataWithBytes:"FF3C" length:4];
NSString *string = [[[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding] autorelease];
string = [@"0x" stringByAppendingString:string];

unsigned short value;
sscanf([string UTF8String], "%hx", &value);

NSLog(@"%d", value); 
```

输出是：

> 65340

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-09T17:48:52.597

我找到了一种简单的方法来做到这一点，检查它是否适合你。

我这样做了：

```
int value;
[characteristic.value getBytes:&value length:2]; 
```

只需将长度更改为您需要的长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T08:12:31.893

我自己从来没有这样做过。但是，假设您的 2 字节数据在 myData 中，这应该可以工作：

```
unsined short myInt = (int) [myData bytes]; 
```

您可能想测试 myData.lenght 是否真的等于 2。

# facebook - 在 Symfony2 中使用 facebook 连接

> ID：11841568
> 
> 赞同：-1
> 
> 时间：2012-08-07T07:58:02.707
> 
> 标签：facebook, symfony

我在 Symfony2 中使用 facebook connect，我已经成功完成了这项工作，但现在我想从 facebook 获取登录用户的用户信息。如何从 facebook 获取用户信息？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:45:17.147

我用它在 /login 页面上登录我的用户（加上 facebook 在 facebook dev 门户上提供的 javascript）：

```
public function handle(GetResponseEvent $event)
{
    if (null !== $this->securityContext->getToken() || $event->getRequest()->attributes->get('_route') !== 'login') {
        return;
    }

    $this->facebook = new Facebook(array(
      'appId'  => $this->appId,
      'secret' => $this->appSecret,
    ));

    if ($userId = $this->facebook->getUser()) {
        $token = $this->facebookProvider->generateToken($userId);

        if (false === $token = $this->facebookProvider->authenticate($token, false)) {
            $userInfo = $this->facebook->api('/' + $userId);
            $token = $this->facebookProvider->generateToken($userId);

            /** create new user **/
            $user = new User();
            $user->setFacebookId($userId);
            $user->setUsername($userInfo['name']);
            $user->setLang($userInfo['locale']);
            $user->setEmail($userInfo['email']);

            $this->entityManager->persist($user);
            $this->entityManager->flush();

            $token->setUser($user);
        }

        $this->securityContext->setToken($token);
    }
} 
```

# sql-server - 分区大表 - 索引

> ID：11841572
> 
> 赞同：4
> 
> 时间：2012-08-07T07:58:17.933
> 
> 标签：sql-server, tsql, indexing, partitioning

我被分配了一项任务来改进几个表的数据管理过程（数据归档）表就像 200gb

我现在正在阅读有关表分区和最佳实践的信息，据我所知，这个过程就像

*   创建文件组和文件
*   创建分区函数
*   分区方案 - （将间隔映射到适当的文件组）
*   重新创建聚集索引 - 这是将表物理移动到另一个文件的时刻
*   利润 ：）

但无法找到一个信息，此时现有的非聚集索引发生了什么？从这里：[http](http://technet.microsoft.com/en-us/library/ms187526(v=sql.105).aspx) ://technet.microsoft.com/en-us/library/ms187526(v=sql.105).aspx 我发现

> 虽然分区索引可以独立于它们的基表来实现，但通常设计一个分区表然后在表上创建一个索引是有意义的。执行此操作时，SQL Server 使用与表相同的分区方案和分区列自动对索引进行分区。因此，索引以与表基本相同的方式进行分区。这使得索引与表对齐。

还有一个

> 对唯一的非聚集索引进行分区时，索引键必须包含分区列。在对非唯一、非聚集索引进行分区时，SQL Server 默认将分区列添加为索引的非键（包含）列，以确保索引与基表对齐。如果分区列已经存在于索引中，SQL Server 不会将其添加到索引中。

但是这些都没有参考我的问题我是否必须为现有的非聚集索引显式创建分区函数，这些索引在其定义中是否/没有分区列？

假设我们有类似的桌子

表 A - col1 col2 col3

在 col1 上具有聚集索引，在 PRIMARY 分区上的 col 3 上具有非聚集索引

分区后 col3 上的非聚集索引会发生什么，它将与表对齐还是仍驻留在 PRIMARY 分区上

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T08:44:17.423

你应该对齐你的索引。有两个主要力量将您拉向这个方向：

*   快速分区切换操作需要对齐的索引。在处理大型数据集时，删除过时数据（已超过所需保留期的数据）与添加新数据同样重要。分区切换操作是迄今为止删除旧数据最有效的方法。请参阅[如何在分区表中实现自动滑动窗口](http://msdn.microsoft.com/en-us/library/aa964122%28v=sql.90%29.aspx)

*   查询处理器喜欢对齐的索引，讨厌未对齐的索引。例如，请参阅[内存限制和分区索引](http://msdn.microsoft.com/en-us/library/ms187526%28v=sql.105%29.aspx)：

> 对于对齐和非对齐索引，如果 SQL Server 将并行度应用于多处理器计算机上的生成操作，则内​​存需求可能会更大。这是因为并行度越大，内存需求就越大。例如，如果 SQL Server 将并行度设置为 4，则具有 100 个分区的非对齐分区索引需要足够的内存供四个处理器同时对 4,000 页或 16,000 页进行排序。如果分区索引是对齐的，则内存需求减少到对 40 个页面或 160 (4 * 40) 个页面进行排序的四个处理器。

在您的情况下，这意味着将分区列显式添加到每个非聚集索引，并在与基表（聚集索引）相同的分区方案上声明每个非聚集索引。不要尝试为非聚集索引创建不同的分区函数/方案。将分区列添加到每个索引会在您的数据模型中产生深远的影响，例如。您将不再能够声明*不*包含分区列的主键约束（这会波及所有引用分区表的外键定义！）但这是您在接受分区时*已经购买*的价格解决方案，请参阅[如何决定是否应该使用表分区](http://www.brentozar.com/archive/2012/03/how-decide-if-should-use-table-partitioning/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T08:25:31.273

一般来说，您通常会删除所有非聚集索引，并在新方案上重新创建它们。这将以与聚集索引（和行数据）类似的方式将它们拆分到表分区中。

如果您不这样做，他们将留在原始文件组（主要或任何地方）

# java - 将桌面应用程序移植到 Applet 沙盒

> ID：11841575
> 
> 赞同：2
> 
> 时间：2012-08-07T07:58:25.293
> 
> 标签：java, swing, applet, sandbox, securitymanager

我有一个旧的 Swing 桌面应用程序，我想将其转换为小程序，并将所有文件 IO 替换为 Web 服务调用。我正在努力寻找小程序允许和不允许做的具体事情的完整列表。

我知道本地文件 IO 不允许使用签名证书，并且我*相信*小程序插件会检查以查看在编译代码中进行了哪些 API 调用，以确定是否允许您的小程序运行。小程序沙箱中不允许使用哪些确切的类和方法？

此外，这种转换有什么常见的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:16:57.057

applet 或 java web start without sign 无法访问本地文件，http 访问 applet/jws 所在位置以外的其他地方，麦克风的东西。使用不带符号的 JWS，您甚至可以使用 openfiledialog 或 savefiledialog 让用户决定是在本地保存文件还是加载文件。

您可以执行以下操作：知道鼠标在哪里、鼠标单击、获取键输入、绘制 2D、播放声音/mp3/midi、知道屏幕大小、移动 JWS 窗口、访问同一服务器上的任何文件、使用 http如果您有服务器端 Web 应用程序，请获取或发布以写回服务器。

# android - 按下电源关闭按钮后是否可以运行 Android 应用程序？

> ID：11841576
> 
> 赞同：0
> 
> 时间：2012-08-07T07:58:29.010
> 
> 标签：android

当用户按下关闭按钮时，我正在寻找运行 Android 应用程序的解决方案。它不会关闭手机关机屏幕，而是会启动一个特殊的应用程序。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:03:28.537

SDK 不允许这样做，抱歉，请参见[此处](https://groups.google.com/forum/?fromgroups#!topic/android-developers/pNtN7xvaqNk)

# python - 删除行为与关系

> ID：11841586
> 
> 赞同：7
> 
> 时间：2012-08-07T07:59:18.283
> 
> 标签：python, sqlalchemy

这不是真正的问题，我只是想了解。考虑以下代码：

```
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy import *
from sqlalchemy.orm import sessionmaker, relationship
Base = declarative_base()

class AB(Base):
    __tablename__= 'ab'
    id_a = Column(Integer, ForeignKey('a.id', ondelete='CASCADE'), primary_key=True)
    id_b = Column(Integer, ForeignKey('b.id', ondelete='CASCADE'), primary_key=True)
    rel = Column(Unicode)

class A(Base):
    __tablename__ = 'a'
    id = Column(Integer, primary_key=True)

class B(Base):
    __tablename__ = 'b'
    id = Column(Integer, primary_key=True)
    #1: doesn’t work try to set id_b to null
    rel_a = relationship('AB')
    # Works, but cascade='all' seems uneeded to me
    rel_a = relationship('AB', cascade='all')
    # Works 
    rel_a = relationship('AB', passive_deletes=True)

engine = create_engine('sqlite://', echo=True)

import logging
logger = logging.getLogger('sqlalchemy.engine.base.Engine')
logger.setLevel(logging.DEBUG)
handler = logger.handlers[0]
handler.setLevel(logging.DEBUG)
handler.setFormatter(logging.Formatter('%(levelname)s %(message)s', ''))

Base.metadata.create_all(engine)

sess = sessionmaker(engine)()

a1 = A()
b1 = B()
ab = AB()

sess.add_all([a1,b1])
sess.flush()

ab.id_a = a1.id
ab.id_b = b1.id
ab.rel = u'truite'
sess.add(ab)
sess.flush()
sess.delete(b1)
sess.flush() 
```

我希望`AB`在删除相关记录时删除表中的记录`B`。我尝试了 3 种类型的关系（检查 B 表）：

*   1：不起作用（AssertionError：依赖规则试图清除实例''上的主键列'ab.id_b'），而如果尝试直接在数据库中将其删除，则正确使用约束，并且来自AB的记录被删除。

*   2：有效，我不明白为什么需要这样做，因为生成的数据库是相同的（您可以检查输出的差异）

*   3：工作，数据库约束完成工作。

将（3）分开，我不明白为什么需要（2），因为`ondelete='cascade'`已经设置，并且生成的数据库是相同的。我的猜测是（1），SQLAlchemy 有足够的信息来产生正确的行为。

我错过了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-07T08:23:45.970

`cascade`on`relationship`配置级联`Session`操作，例如`Session.delete`. 它独立`ON X CASCADE`于您对数据库本身的外键约束可能拥有的任何指令。

在您的情况下，`cascade='all'`have 告诉 SQLAlchemy 将`Session.delete`（以及其他操作）从父对象（`AB`）级联到子对象。没有它，默认的操作方式是把NULL放入外键列，让引用的对象存在。

另一方面，`passive_deletes=True`通过指令指示 SQLAlchemy 依赖数据库来清理已删除的对象`ON DELETE CASCADE`。这可以防止 SQLAlchemy 自己发出`DELETE`查询，就像它在这种情况下所做的那样`relationship(cascade=...)`。

# java - Java IE8 插件

> ID：11841587
> 
> 赞同：0
> 
> 时间：2012-08-07T07:59:18.583
> 
> 标签：java, javascript, internet-explorer-8, activex, ieaddon

我想为 Internet Explorer 8 开发一个 Java ActiveX 插件。

该应用程序的目的是从当前打开的 IE8 页面中读取数据（就 JS 而言，一些`getElementById`）并从中形成邮件消息。

一切都得到了发展，除了一件事，这或多或少是最初的事情：

*   在 IE8 上单击按钮时究竟应该加载什么？
*   我要读取的页面是dhtml，因此JS getelementbyid不起作用，我需要它直接读取
*   页面的 URL 也是动态的和外部的（我没有开发它）：因此甚至有可能从浏览器直接获取 java 应用程序的元素吗？

也许一开始我应该问是否有可能用 Java 完成，尽管我确信用 .net 是可能的。

欢迎和非常感谢任何帮助/经验。

# authentication - 使用 kerberos、Axis2 或 CXF 哪个更简单？

> ID：11841588
> 
> 赞同：4
> 
> 时间：2012-08-07T07:59:24.080
> 
> 标签：authentication, cxf, axis2, kerberos

我是这个领域的新手，所以如果我说一些愚蠢的话，请放轻松我正在尝试将 kerberos 与 Web 服务一起使用，并且不确定哪个更适合 Axis2 的壁垒使用支持 kerberos 令牌的 WSSJ 1.6.2，有人可以给关于 CXF 如何与 kerberos 一起工作的更多信息？根据我的发现，我需要使用 spengo 但我迷路了

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T21:51:37.117

WSS4J 中的 Kerberos 支持主要由 CXF 开发人员为 CXF 开发。使用 CXF 可能会更好。您可以查看他关于该主题的博客：

[http://coheigea.blogspot.com/2011/10/using-kerberos-with-web-services-part.html](http://coheigea.blogspot.com/2011/10/using-kerberos-with-web-services-part.html)

# python - Python Django 分析

> ID：11841594
> 
> 赞同：0
> 
> 时间：2012-08-07T07:59:56.667
> 
> 标签：python, django, graph, profiling, python-2.7

**问题：**

我有一个 Django 应用程序。在开发阶段我想检查

1.  我的应用可以支持的**用户数量。****这些用户可以是**：

    *   存储在数据库中的用户
    *   并发用户
2.  查找速度改进，例如慢代码块

**使用的工具：**

我已经安装了 django-debug-toolbar，它显示了**时间（CPU）和 SQL 查询**。

**我想要的是：**

我特别想要可以呈现给大规模受众并且可以进行改进的特定图表或连续性数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:29:05.047

我不认为有一个应用程序可以解决这个问题。

您可以使用 apache`ab`来衡量您的应用程序可以在一个 givel URL 上处理多少请求。

```
ab -c 5 -n 1000 http://yoururlhere.com 
```

有关更多信息，请参阅[ab 文档](http://httpd.apache.org/docs/2.2/programs/ab.html)。

您的“存储在数据库中的用户”受到服务器可用硬盘空间的限制，因此这应该不是问题。

要查找慢代码，django 工具栏是一个好的开始。如果您发现一个网站需要很长时间才能加载，您可以通过手动添加来调查导致此问题的方法：

```
import logging
def my_slow_code(self):
  start = time.time()
  [slow code]
  logging.debug('my_slow_code took %s s to load' % str(time.time()-start)) 
```

# html - CSS 值作为数学表达式

> ID：11841595
> 
> 赞同：19
> 
> 时间：2012-08-07T08:00:10.503
> 
> 标签：html, css

反正我可以写一个css值作为数学表达式吗？例子：

```
div{
    height: 50% + 30px;
    width: 40em - 5px;
   } 
```

如果有，那就完美了。
**PS：**我不想用*JS*或*JQuery*来做。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-07T08:16:58.123

[您可以使用 css3 calc()](http://www.w3.org/TR/css3-values/#calc)来实现这一点。像这样写：

```
div{
    width: 40%;
    width: -webkit-calc(40% - 5px);
    width: -moz-calc(40% - 5px);
    width: calc(40% - 5px);
    height:50%;
    height: -webkit-calc(50% + 50px);
    height: -moz-calc(50% + 50px);
    height: calc(50% + 50px);
    background: green;
    color: white;
    position:absolute;
} 
```

检查这个[http://jsfiddle.net/3QUw6/](http://jsfiddle.net/3QUw6/)

检查此讨论以获取更多信息[是否可以在 CSS3 中使 div 50px 小于 100%？](https://stackoverflow.com/questions/11093943/is-it-possible-to-make-a-div-50px-less-than-100-in-css3/11094450#11094450)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T08:02:29.900

你不能用 CSS 做到这一点，但你可以（以及更多）使用 CSS 预处理器，比如[LESS](http://lesscss.org/)、[SASS](http://sass-lang.com/)或我最喜欢的[Stylus](http://learnboost.github.com/stylus/)。最终输出是普通的旧 CSS，但必须先编译。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T08:04:21.020

两者`padding`和`margin`都可用于添加对象的尺寸。我建议你阅读[盒子模型](http://www.w3.org/TR/CSS2/box.html)。

HTML：

```
<div id="container">
    <div class="wrapper">
        <div>...</div>
    </div>
</div> 
```

CSS：

```
.wrapper { 
    width: 40em;
    height: 50%;
    padding: 15px 0; /* Top and bottom padding of 15px */ }

/* Block-level element will take up 100% of the 
  container width, minus {margin_right} + {marign_left} */
.wrapper > div { margin: 0 0 0 5px; } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-07T08:14:50.043

看看CSS 中的[calc()](http://www.w3.org/TR/css3-values/)函数。希望浏览器对此的支持会增加。

# c# - 按钮在单击按钮时会产生意想不到的效果

> ID：11841601
> 
> 赞同：0
> 
> 时间：2012-08-07T08:00:47.440
> 
> 标签：c#, wpf, silverlight, xaml, wpf-controls

伙计们，我对 WPF 广告很陌生，从 Sam 的电子书开始学习它。我刚刚尝试了书中给出的相同代码，如下所示

```
<Window x:Class="wpfTest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">

    <Button Background="Black">
        <Button.Content>
            <Ellipse Width="103" Height="107" Fill="Yellow" />
        </Button.Content>
    </Button>
</Window> 
```

遗憾的是，当我单击按钮时，它开始缓慢闪烁，给出指定的黑色背景以及白色/蓝色背景，并且它永远不会停止。我不知道为什么默认行为是这样的，因为我没有提到任何效果/样式/触发器/动画。:(有人可以指导我并纠正它。请让我也理解背后的原因:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:38:48.063

```
<Window x:Class="testwpf.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Window.Resources>
    <Style x:Key="BorderlessButton" TargetType="{x:Type Button}">
        <Setter Property="Padding" Value="1"/>
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Border Name="border" Background="{TemplateBinding Background}">
                        <ContentPresenter Name="content" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                  Margin="{TemplateBinding Padding}"
                                  RecognizesAccessKey="True"
                                  SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                                  VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources>
<Grid>
    <Button Style="{DynamicResource BorderlessButton}">
        <Button.Content>
            <Ellipse Width="103" Height="107" Fill="Yellow" />
        </Button.Content>
    </Button>
</Grid> 
```

自定义样式禁用系统动画动画。来自[这里的代码](http://gregandora.wordpress.com/2011/02/06/wpf-minimal-button-styling/)

# c# - Asp.net 中的屏幕抓取

> ID：11841603
> 
> 赞同：0
> 
> 时间：2012-08-07T08:00:52.253
> 
> 标签：c#, asp.net, screen-scraping

这就是我缓存网页的方式，但我没有得到整页，这个页面有大约 30 个结果，我只得到 26 个结果。请问有人可以帮助我吗？

```
WebClient wc = new WebClient();
html = wc.DownloadString("http://www.yellowpages.com/ga/metropcs-store?g=GA&page=1&q=Metropcs+Store").ToString(); 
```

是的，如果有人对此有任何解决方案，请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:59:05.833

您提供的代码工作正常。表示返回的 html 正好包含 30 个项目。您所遵循的解析技术可能存在一些问题。当我检查时，我发现申请第 28 项第 29 项和第 30 项的 css 类略有不同。这可能是导致问题的原因

# triggers - IBM DB2：如何检索创建触发器的表名？

> ID：11841604
> 
> 赞同：0
> 
> 时间：2012-08-07T08:01:02.967
> 
> 标签：triggers, db2

我正在使用 IBM DB2 数据库。我在表中创建了一个触发器。我需要从触发器中知道触发器位于哪个表中。有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:54:28.630

据我所知，DB2 LUW 中没有存储“当前执行触发器”名称的系统变量，所以不确定您是否能够动态地执行此操作。但是，如果您要将触发器名称硬编码到触发器中

```
Declare trigger_schema varchar(128) default '<PutTriggerSchemaHere>';
Declare trigger_name varchar(128) default '<PutTriggerNameHere>'; 
```

在触发器的主体中；

```
Declare schema_name varchar(128) default NULL;
Declare table_name varchar(128) default NULL;
SELECT TABSCHEMA, TABNAME INTO schema_name, table_name 
FROM SYSCAT.TRIGGERS 
WHERE TRIGSCHEMA=trigger_schema and TRIGNAME=trigger_name
FETCH FIRST ROW ONLY; 
```

希望这可以帮助。

# sql-server-2008 - 为表单身份验证配置报表服务器

> ID：11841608
> 
> 赞同：2
> 
> 时间：2012-08-07T08:01:27.863
> 
> 标签：sql-server-2008, reporting-services, ssrs-2008

我正在使用 ReportViewer 连接到报表服务器。Windows 身份验证运行良好.. 但是当我使用凭据对报告服务器进行身份验证时，我收到了错误：

> 请求失败，HTTP 状态为 401：未授权。

我知道我需要将报表服务器配置为接受这些凭据，但我实际上不知道它是什么。是的，我也经历过 msdn 和堆栈问题。我是 SSRS 的初学者，我想将报表服务器集成到我的 Web 应用程序中。我在我的应用程序页面中所做的是：

```
protected void Page_Load(object sender, EventArgs e)
{
    //    if (!IsPostBack)
    //    {
            ReportViewer1.ServerReport.ReportServerCredentials =
             new MyReportServerCredentials();
        //    ReportViewer1.ServerReport.Refresh();
        //}
    }
}

[Serializable]
public sealed class MyReportServerCredentials : IReportServerCredentials
{
    public WindowsIdentity ImpersonationUser
    {
        get
        {
            // Use the default Windows user.  Credentials will be
            // provided by the NetworkCredentials property.
            return null;
        }
    }

    public ICredentials NetworkCredentials
    {
        get
        {
            // Read the user information from the Web.config file.  
            // By reading the information on demand instead of 
            // storing it, the credentials will not be stored in 
            // session, reducing the vulnerable surface area to the
            // Web.config file, which can be secured with an ACL.

            // User name
            string userName =
                ConfigurationManager.AppSettings
                    ["MyReportViewerUser"];

            if (string.IsNullOrEmpty(userName))
                throw new Exception(
                    "Missing user name from web.config file");

            // Password
            string password =
                ConfigurationManager.AppSettings
                    ["MyReportViewerPassword"];

            if (string.IsNullOrEmpty(password))
                throw new Exception(
                    "Missing password from web.config file");

            // Domain
            string domain =
                ConfigurationManager.AppSettings
                    ["MyReportViewerDomain"];

            if (string.IsNullOrEmpty(domain))
                throw new Exception(
                    "Missing domain from web.config file");

            return new NetworkCredential(userName, password, domain);
        }
    }

    public bool GetFormsCredentials(out Cookie authCookie,
                out string userName, out string password,
                out string authority)
    {
        // not use FormsCredentials unless you have implements a custom autentication.
        authCookie = null;
        userName = null;
        password = null;
        authority = null;

        // Not using form credentials
        return false;
    }
} 
```

在`RsReportServer.config`文件中我修改并替换了`<authentication>`节点：

```
<Authentication>
      <AuthenticationTypes>
             <Custom />
      </AuthenticationTypes>
      <EnableAuthPersistence>true</EnableAuthPersistence>
</Authentication> 
```

在报告服务器的`web.config`文件中，我将身份验证更改为表单并模拟为假，我在报告管理器的`web.config`文件中做了同样的事情。

什么都不见了。还是我是对的？

我还想我需要对 CustomSecurity Extension 术语做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:58:45.253

正在搜索

[http://blogs.msdn.com/b/bimusings/archive/2005/12/05/500195.aspx](http://blogs.msdn.com/b/bimusings/archive/2005/12/05/500195.aspx)

虽然这是旧的 - 这应该是一个很好的参考清单，以使其工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T06:45:04.840

您必须在开始 -> 所有程序 -> Microsoft SQL server 2008 -> 配置工具 -> Reporting Services 配置管理器 (SSRS) 的帮助下配置您的 SSRS 服务（位于服务器上）

[http://msdn.microsoft.com/en-us/library/ms156305.aspx](http://msdn.microsoft.com/en-us/library/ms156305.aspx)

# sencha-touch-2 - Sencha Touch 2 多视图布局

> ID：11841609
> 
> 赞同：0
> 
> 时间：2012-08-07T08:01:30.623
> 
> 标签：sencha-touch-2

我有一个包含 3 个不同视图（顶部工具栏、内容面板、底部工具栏）的视图，问题是内容面板（带有 Dataview 的面板）隐藏在 \ 隐藏工具栏（取决于项目的顺序）之后。

主要观点是：

```
Ext.define("myapp.view.myview", {
    extend: "Ext.Panel",
    alias: "widget.myview",
    requires: [
        'myapp.view.topMenu',
        'myapp.view.bottomMenu',
        'myapp.view.DataContainer'
   ],
   config: {
       fullscreen: true,
       layout: {
            type: 'fit',
       },
       items: [                                
          { xtype: 'DataContainer'},          
          { xtype: 'topMenu' }, 
          { xtype: 'bottomMenu' }
       ]
   }
}); 
```

我尝试过使用 Container 并尝试过 Spacers，但它并没有改变任何事情。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:29:34.570

嗨@ItayM，您可以更改您的`config` `Ext.Panel`容器，

```
config: {
   fullscreen: true,
   layout: {
        type: 'fit',
   },
   ...
} 
```

至

```
config: {
   layout: 'vbox',
   ...
} 
```

也许`layout: { type: 'fit', },`将其他元素重叠到您的`Ext.Panel`.

**希望这些有所帮助。:)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:33:45.337

明白了-我必须将工具栏放在容器内并将容器停靠在顶部/底部：

```
Ext.define("App.view.topMenu", {
extend: "Ext.Container",
alias: "widget.topMenu",

config: {          
    docked: "top",
    items: [
    {
        xtype: "toolbar", 
```

# c++ - 反对作弊的指针

> ID：11841611
> 
> 赞同：0
> 
> 时间：2012-08-07T08:01:54.750
> 
> 标签：c++, class

我如何保护我的**分子类**变量值，例如**键长**和**NH3 的反转概率，**免受作弊引擎用户之类的人的影响（不会减慢很多速度）？

这可以防止外部影响吗？

```
class molecule
{
public:
    molecule()
    {
    ...
    }
protected:
    int *bond_length;
    int *probability;
} 
```

这更安全吗？

```
class molecule
{
...
private:
    int *bond_length;
    int *probability;
} 
```

如果以上所有内容都容易受到类似作弊引擎的软件的攻击，那么以下内容是否合乎逻辑？

```
class molecule
{
public:
    molecule(){... ... ...}
...
...
    //still public
    int *bond_length_fake;
    int *bond_length;
    int *prob_fake;
    int *prob;
}
...
//somewhere in the program
void thread_real_to_fake(void * molecule_parameters)
{
    int bond_length_backup;
    molecule * param=(molecule *)molecule_parameters;
    while(working)
    {
        if((param->bond_length_fake)!=(param->bond_length))
        {
            param->bond_length_fake=param->bond_length;
        }
    }
    _endthread();

} 
```

好的，这通过使假货始终与真货相等来保护假货。但是如何保护真实的呢？我可以使用随机指针来获得真正的价值吗？如果是，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:05:01.120

您无法保护您的计算机免受正在运行的软件的影响。如果有人在控制机器，他们可以随意操纵它，这包括修改正在运行的程序的状态。

您可以做的最安全的事情是在单独的、无法访问的服务器上运行程序，并通过网络转发 I/O（例如到浏览器窗口）。

*编辑：*作为替代方案，您可以将程序的引擎部分作为作为单独用户运行的服务运行。这提供了一定程度的保护。引擎必须检查提交的用户输入（例如击键）是否以合理的速率进入。这允许您在一定程度上强制执行规则，但不会阻止例如用户通过操纵客户端中的图形渲染来透视墙壁。

# android - 使用 dbhelper 将数据插入 sqlitedatabase 时出现空指针异常

> ID：11841626
> 
> 赞同：0
> 
> 时间：2012-08-07T08:02:45.220
> 
> 标签：android, sqlite

当我插入记录时，我面临以下问题： `java.lang.runtimeexception unable to start activity componentinfo java.lang.nullpointerexception`.我在将值插入 sqlite 数据库时遇到空指针异常。当我尝试通过放置断点检查其值时，dh in`DatabaseHelper dh = new DatabaseHelper(this)`为空。下面是我的 DatabaseHelper 类的代码和我试图插入值的类。

第一个活动：DbActivity.java

```
package com.example.dbhelpersimple;

import android.os.Bundle;
import android.provider.Contacts;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.Toast;
import android.support.v4.app.NavUtils;
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteDatabase;

public class DbActivity extends SQLiteOpenHelper {

    public static final String COL_NAME = "name";
    public static final String COL_CNT = "contact";
    private static final String DATABASE_TABLE = "test";
    private static String DATABASE_NAME = "PERSONS.db";

    private static final String DATABASE_CREATE="CREATE TABLE test"+
            "(name VARCHAR(10), contact VARCHAR(10));";

    SQLiteDatabase db;

    public DbActivity(Context context) {
        super(context, DATABASE_NAME, null, 1);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL(DATABASE_CREATE);

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

        db.execSQL(DATABASE_NAME);
        onCreate(db);
    }

    void addrecord(String name, String contact)
    {
        ContentValues cv=new ContentValues();
        cv.put(COL_NAME, name);
        cv.put(COL_CNT, contact);
        db.insert(DATABASE_TABLE, null, cv);
        db.close();
    }

    void getrecords()
    {
        int i;
        //String query="SELECT * FROM test";
        Cursor c=db.query(DATABASE_TABLE, null, null, null, null, null, null);
        c.moveToFirst();

        while(c.isAfterLast()==false)
        {
            Log.d("Name", c.getString(0));
            Log.d("Contact", c.getString(1));
        }

    }

} 
```

第二个活动：operatedActivity.java

```
package com.example.dbhelpersimple;

import android.app.Activity;

import android.os.Bundle;

import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;

import android.widget.SimpleAdapter;

public class manipulateActivity extends Activity{

    Button btn1,btn2,btn3;

      EditText edt1,edt2;

     public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_db);

            edt1=(EditText)findViewById(R.id.edittextname);
            edt2=(EditText)findViewById(R.id.edittextcontact);

    DbActivity dbact= new DbActivity(this);

    dbact.addrecord("sagar", "111");

     }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:22:02.250

*第一个活动*：**DbActivity.java**

```
private final Context context;

public DbActivity(Context context)
    {

    super(context, DATABASE_NAME, null, DATABASE_VERSION);
    this.context = context;

    }
private static final String DATABASE_CREATE =
               "create table test (_id integer primary key autoincrement, "
               + "name text Not Null, contact text Not Null);";

@Override
public void onCreate(SQLiteDatabase database) {
    database.execSQL(DATABASE_CREATE);

} 
```

*第二个活动*：**ManipulateActivity.java**

```
private DbActivity dbHelper;

private Context context;

public ManipulateActivity(Context context) {
    this.context = context;
}

 dbHelper = new DbActivity(context); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:10:04.970

更改您的 DbActivity 类构造函数，如下所述。

```
 public DbActivity(Context context) {
    super(context, DATABASE_NAME, null, 1);
    // TODO Auto-generated constructor stub
       this.myContext = context;   // myContext is your context in DbActivity class
  } 
```

我认为你没有得到上下文，这就是你得到空指针异常的原因。希望这会有所帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T08:11:59.947

试试下面的代码。我认为您在 database_create 语句中有问题。

```
private static final String DATABASE_CREATE =
                   "create table test (_id integer primary key autoincrement, "
                   + "name text Not Null, contact text Not Null);"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T08:20:10.337

该代码中有很多废话。但是，一个接一个：

在 SQLite 中，没有`VARCHAR`. 此类型会自动转换为[文档](http://www.sqlite.org/datatype3.html)`TEXT`中概述的类型：

> 请注意，类型 VARCHAR 包含字符串“CHAR”，因此被分配了 TEXT 亲和性。

* * *

在您的 DatabaseHelper-class`onUpgrade()`方法中，您有以下代码：

```
db.execSQL(DATABASE_NAME); 
```

由于您的`DATABASE_NAME`-constant 只是数据库文件的名称（因此不是有效的 SQL 查询），这将失败。

* * *

在您的`addrecord()`- 方法中，您使用的`SQLiteDatabase`是从未初始化的 -object。这就是您获得 NPE 的原因。

要从您的 中选择读/写数据库`SQLiteOpenHelper`，请使用[`getReadableDatabase()`](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#getReadableDatabase%28%29)- 和 -[`getWritableDatabase()`](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#getWritableDatabase%28%29)方法。

启动 Activity 时出现此问题的原因是，您在`onCreate()`创建 Activity 时调用的 Activities 方法中使用了此方法。

* * *

您的 -method 的工作实现`addrecord()`可能如下所示：

```
public void addrecord(String name, String contact){
    ContentValues cv=new ContentValues();
    cv.put(COL_NAME, name);
    cv.put(COL_CNT, contact);
    SQLiteDatabase db = this.getWritableDatabase();
    db.insert(DATABASE_TABLE, null, cv);
    db.close();
} 
```

# java - 带有注释框的文本组件

> ID：11841632
> 
> 赞同：0
> 
> 时间：2012-08-07T08:03:04.723
> 
> 标签：java, swing, text

我正在寻找一个能够显示带有注释框的纯文本的 swing 组件。最近我开发了一个使用 JEditorPane 作为基类[https://dl.dropbox.com/u/8155778/comment_boxes.png](https://dl.dropbox.com/u/8155778/comment_boxes.png)。虽然我对性能不太满意（主要是因为很多绘画）等
。你能指出我的任何组件、教程等吗？
提前谢谢你，
亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:48:13.780

我所知道的 Swing 没有这样的组件（即使在像 Jide 这样的大型扩展库中），但我敢打赌你的绘画速度可以优化以达到所需的性能。如果您发布您的绘画代码，我可能会提供帮助...

# ssh - 在没有 GUI 的 Windows 中生成 SSH 公钥/私钥

> ID：11841634
> 
> 赞同：-1
> 
> 时间：2012-08-07T08:03:09.180
> 
> 标签：ssh

我需要在 Windows 中创建 SSH 密钥对。我需要以编程方式进行，即不使用 puttygen.exe GUI。请给我方法来完成同样的事情。

-巴拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-17T09:16:30.573

在我看来，最好的解决方案是安装[Cygwin](http://cygwin.com/install.html "赛格温")或 Windows 版 Git，如果您在某些时候可能需要 Git。

如果安装了 Cygwin，在终端中可以像在 Linux 上一样完成。 [GitHub](https://help.github.com/articles/generating-ssh-keys)提供了一个很好的关于生成 SSH 密钥的教程。

作为记录：

```
$ ssh-keygen -t rsa -C "your_email@example.com" 
```

默认情况下，这些键被放置`~/.ssh`在 Windows 中的 which`C:\Users\USER_NAME\.ssh\`或简单`%HOME%\.ssh`的 .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T21:26:40.233

您是否从命令行尝试过 puttygen.exe ？带有示例的手册：http: [//linux.die.net/man/1/puttygen](http://linux.die.net/man/1/puttygen) 也应该在 Windows 上工作。

如果这没有帮助，我会寻找“ssh-keygen”的 Windows 版本[http://linux.die.net/man/1/ssh-keygen](http://linux.die.net/man/1/ssh-keygen)

# jquery - 参考特定 div 的第一个链接

> ID：11841636
> 
> 赞同：1
> 
> 时间：2012-08-07T08:03:15.100
> 
> 标签：jquery, attributes, refer

我有以下元素：

```
<div class="content" id="content_1" style="display: none; ">

<ul class="ad-thumb-list" style="width: 473px; ">

<li> 
<a href="../images/portfolio/portfolio_1_1.png" class="ad-thumb0 ad-active">
<img src="../images/portfolio/thumbs/thumb_1_1.png"  style="opacity: 1; ">
</a>
</li>

    <li> 
<a href="../images/portfolio/portfolio_1_2.png" class="ad-thumb0">
<img src="../images/portfolio/thumbs/thumb_1_1.png"  style="opacity: 1; ">
</a>
</li>

  <li> 
<a href="../images/portfolio/portfolio_1_3.png" class="ad-thumb0">
<img src="../images/portfolio/thumbs/thumb_1_1.png"  style="opacity: 1; ">
</a>
  </li>         

 </ul>

</div> 
```

我需要获取`<a>`内部第一个链接的 href 属性`<ul> <li>`

我有几个这样的 div，你可以看到它有 id='content_1'，所以其他的会有 id='content_2'... 等等。

如何使用 jQuery 在被调用 div 的第一个 li 中获取第一个 a 的 href？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T08:55:22.917

```
$('#content_1 li:first a').attr('href'); 
```

如果你有很多 div，那么：

```
$('.content').each( function() {
    $(this).find('li:first a').attr('href');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T08:12:24.817

感兴趣的 XPath`a`将是：

```
//div[@id="content_1"]/ul/li[1]/a 
```

这意味着，在文档根目录下的任何位置都可以找到`div`具有指定`id`. 在此之下，找到 a`ul`并获得它的第一个`li`。在里面，有一个`a`.

在您的情况下，您如何实际实现这一点取决于您正在使用什么（客户端 JS？其中一个框架？网络抓取脚本？）。

# php - PHP 数组接口

> ID：11841637
> 
> 赞同：16
> 
> 时间：2012-08-07T08:03:17.307
> 
> 标签：php, arrays, interface, casting, magic-methods

我确信我不久前读到了 PHP 的一个新特性，它要么是一种新的魔法方法，要么是一种新的接口，以便您可以实现 Arrayable 方法。

例如

```
interface Arrayable
{
    public function toArray();
} 
```

是我想象的吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-03-20T14:28:33.437

它不在 PHP 本身中，但 Laravel 有一个专门用于此目的的接口：

```
<?php namespace Illuminate\Contracts\Support;

interface Arrayable {

    /**
     * Get the instance as an array.
     *
     * @return array
     */
     public function toArray();

} 
```

**注意：**在 Laravel v4 中，命名空间是`Illuminate\Support\Contracts`，接口名称是`ArrayableInterface`.

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-07T08:26:19.570

> 是我想象的吗？

是的。

*   PHP 中没有用于处理转换为数组的接口（PHP 5.4 或其他）。

*   PHP 5.4.0 引入了[`JsonSerializable`](http://php.net/jsonserializable)接口，也许你在想这个？

*   还有一个 RFC 草案（几个相关的一个）建议了一种`__toArray()`方法；请参阅[征求意见：标量类型转换魔术方法](http://wiki.php.net/rfc/object_cast_to_types)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T08:08:14.707

您可能正在考虑[迭代器](http://www.php.net/manual/en/class.iterator.php)接口。如果您创建一个实现它的类，您可以像它是一个数组一样对其进行迭代。例如，您可以在 foreach() 循环中使用它。

另请查看其他[预定义接口](http://www.php.net/manual/en/reserved.interfaces.php)。

您始终可以编写自己的可数组接口，然后您可以输入提示或使用[instanceof](http://www.php.net/instanceof)进行检查（参见示例 #4），正如您在[评论](https://stackoverflow.com/questions/11841637/php-arrayable-interface#comment15747192_11841696)中指出的那样。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-23T14:28:33.650

有这个（这是相当无用的IMO） [http://php.net/manual/en/class.traversable.php](http://php.net/manual/en/class.traversable.php)

还有这个（它确实派上用场，但在使用之前总是需要进行类型检查）

[http://php.net/manual/en/function.iterator-to-array.php](http://php.net/manual/en/function.iterator-to-array.php)

但是没有办法隐式地处理对象到数组的转换。

# php - WordPress主题错误

> ID：11841641
> 
> 赞同：0
> 
> 时间：2012-08-07T08:03:42.207
> 
> 标签：php, wordpress, wordpress-theming

我目前正在研究一个 wordpress 主题，每次我尝试查看页面时都会出现下面的错误消息。

**致命错误：在第 26 行的 /home/temp/public_html/natural11/index.php 中调用未定义函数 get_header()**

我的主题标题的代码如下所示

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" <?php language_attributes() ?>>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
    <?php wp_title(''); ?>
    <?php if(wp_title('', false)) { echo ' &raquo; SiteRipe Web Solutions'; } ?>
  </title>
  <?php wp_enqueue_script("jquery"); ?>
  <?php wp_head(); ?>
  <link href="<?php bloginfo('stylesheet_url'); ?>" rel="stylesheet" type="text/css" />
</head> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:12:38.327

您是自己构建主题吗？如果是这样，我建议您查看本[教程](http://www.developerdrive.com/2011/10/how-to-build-a-wordpress-theme-from-scratch-part-one/)。从错误消息来看，您可能在错误的位置创建主题。

按照这些步骤，我从来没有遇到过问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:12:09.333

在观看之前，您需要将此模板分配给页面。
我猜你试着直接看。

制作一个（私人）测试页面，给它这个模板，然后预览那个页面。它将使用此模板

# git - GitHub：在另一个分支中拉一个分支

> ID：11841642
> 
> 赞同：0
> 
> 时间：2012-08-07T08:03:51.470
> 
> 标签：git

我有一个最近从 master 派生的分支（mainbranch）。

如果`git pull origin otherbranch`将分支 otherbranch 合并到从 master 派生的 mainbranch 中？

可以使用 Git 合并，但很想知道上面的语句会做什么。

我需要的是将 otherbranch 与主分支合并，而 megre 给出错误

```
fatal: 'otherbranch' does not point to a commit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:09:35.053

该命令相当于

```
git fetch origin otherbranch
git merge FETCH_HEAD 
```

因此将：

1.  `otherbranch`从远程获取远程分支的历史记录`origin`（其头部提交暂时保存在`FETCH_HEAD`）。
2.  `origin/otherbranch`将（现在在 中`FETCH_HEAD`）的历史合并到*当前签出的*分支中。

# java - LinkedHashMap 基本上是 O(1) '包含'的 LinkedList 吗？

> ID：11841643
> 
> 赞同：0
> 
> 时间：2012-08-07T08:03:55.137
> 
> 标签：java, list

我正面临一个微优化，我`contains`经常在**LinkedList**上调用。将其更改为**LinkedHashMap**是个好主意吗？

注意：我只是添加并检查列表是否包含某个值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T08:06:11.260

它比“只是一个`LinkedList`带有平均情况的`O(1)`包含”要复杂一些，但本质上 - 功能说是的。

A`LinkedHashMap`允许`O(1)`包含并保持元素按插入顺序排列 - 与`LinkedList`. 您可能还想看看[`LinkedHashSet`](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html)

**但是**，如果您想要**重复的条目**，您可能会遇到问题。A `LinkedHashMap`and`LinkedHashSet`是实现`Set`和`Map`接口，而不是`List`接口，所以它们不允许重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T08:06:13.083

是的，LinkedHashMap 提供 O(1) 成员资格检查

> 与 HashMap 一样，它为基本操作（添加、包含和删除）提供恒定时间性能，假设哈希函数在桶中正确分散元素。

另请注意

> 由于维护链表的额外费用，性能可能略低于 HashMap，但有一个例外：迭代 LinkedHashMap 的集合视图所需的时间与映射的大小成正比，而不管其容量如何. HashMap 的迭代可能更昂贵，需要的时间与其容量成正比。

[http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)

如果您不需要可预测的排序，则 HashMap 在插入/修改时会稍快一些，因为它不需要维护链表来保持排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T08:14:08.717

不; a`LinkedList`是 a `List`，而 a`LinkedHashMap`是 a `Map`。

除此之外，`LinkedHashMap`不**保证**O(1) 包含；实际上，`LinkedHashMap.contains`是 O(n)。如果使用完美的散列或（大致）均匀分布键到桶（即最佳情况），则恒定时间`contains`是可能的，但在发生冲突的情况下，它是具有常数因子 0 < *k* <的平均情况线性时间1.

您似乎想要的是`Set`平均情况下性能与 相当的插入顺序`HashMap.contains`，因此我建议您查看[LinkedHashSet](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html)。

> This implementation differs from `HashSet` in that it maintains a doubly-linked list running through all of its entries. This linked list defines the iteration ordering, which is the order in which elements were inserted into the set (*insertion-order*).

# asp.net-mvc - 可插入区域中指向根 od web 的链接（visual studio 无法解析链接）

> ID：11841644
> 
> 赞同：1
> 
> 时间：2012-08-07T08:04:08.383
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, pluggable

我使用此处显示的可插入框架：[ASP.NET MVC - 可插入应用程序](http://nileshhirapra.blogspot.cz/2012/02/aspnet-mvc-pluggable-application.html)，但我遇到了链接问题（Visual Studio 无法解析链接）、模块中的图像和 css。我在区域中的链接有问题。

当我以这种方式在区域内创建操作链接时：

`@Html.ActionLink("Home", "Index", "Home", new { Area = "" }, null)`

Visual Studio 告诉我 Action 索引和控制器 Home 不存在。与位于项目根目录的其他链接（图像，css）相同。感谢帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-10T00:29:06.873

可怕的想法。如果它不在 MVC 书籍中......不要这样做！我说的是您引用的可插入应用程序链接。项目中排除的区域......我只是在一个大型企业应用程序上。带有区域的主项目的 bin 文件夹无法正确清理。因此，在一个项目中，我将更新和调试控制器方法......它不会命中符号，并且 main 的 bin 中的 dll 与代码不匹配。

这个hack有一个很大的问题。不要做可插拔区域。我一直在寻找架构师为何采用这种方法的原因，我终于找到了一篇文章，然后根据关键字搜索，我偶然发现其他人在评论中抱怨这是一个多么糟糕的想法。

对于大型企业项目的几个团队来说，这浪费了很多时间和金钱。

# java - akka 儿童演员给出了一个班级演员表异常

> ID：11841645
> 
> 赞同：0
> 
> 时间：2012-08-07T08:04:11.177
> 
> 标签：java, playframework, akka

我的 akka java 项目使用 play framework 来实现 rubine 算法时遇到问题，我想与社区分享希望得到解决方案。

该项目包含一个创建子actor的akka​​主actor。然后子actor初始化一个执行某些任务的java类。任务数据由使用 websocket 和 json 对象的 Web 界面提供。json 对象包含双精度数据类型。播放框架应用程序类从 Web 界面获取数据并将其传递给主参与者。然后主actor创建一个子actor并将数据传递给子actor。下面是代码片段。相关部分是hightloghted

这是来自应用程序类：

```
public class Application extends Controller {   
static ActorRef masterActor;
RubineActor rubineactor;

public static Result index() {        
return ok(index.render(null)); }

public static WebSocket<JsonNode> sockHandler() {     
return new WebSocket<JsonNode>() {
// called when the websocket is established
public void onReady(final WebSocket.In<JsonNode> in, final WebSocket.Out<JsonNode> out) { 

try{ RubineActor.connectMaster(in, out); }  

catch(Exception e){e.printStackTrace();}                        
      }  }; } } 
```

这是来自主要演员：

```
public class RubineActor extends UntypedActor {         
static ObjectMapper mapper;       
Map<String,ArrayList<Double>> jsonMap;          
LoggingAdapter log = Logging.getLogger(getContext().system(), this);        
ActorRef childActor = getContext().actorOf(new Props(ChildActor.class), "childactor");
static ActorRef masterActor = Akka.system().actorOf(new Props(RubineActor.class));    

public static void connectMaster (final WebSocket.In<JsonNode> in, 
final WebSocket.Out<JsonNode> out)
{   in.onMessage(new Callback<JsonNode>() {
public void invoke(JsonNode event) throws JsonParseException, JsonMappingException,  
IOException {    

ObjectMapper mapper = new ObjectMapper();                 
@SuppressWarnings("unchecked")
Map<String,ArrayList<Double>> jsonMap = mapper.readValue(event, Map.class);

masterActor.tell(new Coordinates(jsonMap));                                         
("timeArray").toString();  }    });   }

@Override
public void onReceive(Object message) throws Exception {        
if(message instanceof Coordinates)

{Coordinates msg = (Coordinates) message;
childActor.tell(msg); } 
else { unhandled(message);}  }

public static class Coordinates {                                                   
Map <String,ArrayList<Double>> jsonMap = null;              
public Coordinates (Map <String,ArrayList<Double>> jsonMap ) {              
super();
this.jsonMap = jsonMap;  }  }}
this is from the child actor
public class ChildActor extends UntypedActor {                  
public ChildActor (){}

@Override
public void onReceive(Object msg) throws Exception  

if(msg instanceof Coordinates) {
Coordinates cood = (Coordinates) msg;
new Gesture(cood.jsonMap);
    }
else { unhandled(msg);} }} 
```

这是来自普通的java类：

```
Map<String, ArrayList<Double>> jsonMap ;
Map <String,ArrayList<Long>> jsonMap2 ;                             

public Gesture(){}        
public Gesture (Map<String, ArrayList<Double>> jsonMap)
{  this.jsonMap  = jsonMap;
npoints = jsonMap.size();
intial_Theta();  }

public void intial_Theta() {    

// this line produces a class cast exception error.the error is given below.
double  dx = jsonMap.get("x").get(2) - jsonMap.get("x").get(0);} 
```

这是错误消息：

```
[info] Compiling 4 Scala sources and 10 Java sources to C:\Users\FAISAL\workspac
e\Sketch_Server\target\scala-2.9.1\classes...
[info] play - Application started (Dev)
[info] play - Starting application default Akka system.
[ERROR] [08/07/2012 05:15:11.187] [application-akka.actor.default-dispatcher-3]
[akka://application/user/$a/childactor] java.lang.Integer cannot be cast to java
.lang.Double
java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.Doub
le
        at model.Gesture.intial_Theta(Gesture.java:90)
        at model.Gesture.<init>(Gesture.java:74)
        at model.ChildActor.onReceive(ChildActor.java:19)
        at akka.actor.UntypedActor$$anonfun$receive$1.apply(UntypedActor.scala:1
54)
        at akka.actor.UntypedActor$$anonfun$receive$1.apply(UntypedActor.scala:1
53)
        at akka.actor.Actor$class.apply(Actor.scala:318)
        at akka.actor.UntypedActor.apply(UntypedActor.scala:93)
        at akka.actor.ActorCell.invoke(ActorCell.scala:626)
        at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:197)
        at akka.dispatch.Mailbox.run(Mailbox.scala:179)
        at akka.dispatch.ForkJoinExecutorConfigurator$MailboxExecutionTask.exec(
AbstractDispatcher.scala:516)
        at akka.jsr166y.ForkJoinTask.doExec(ForkJoinTask.java:259)
        at akka.jsr166y.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:975)
        at akka.jsr166y.ForkJoinPool.runWorker(ForkJoinPool.java:1479)
        at akka.jsr166y.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:104) 
```

任何建议都会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:47:02.673

在我看来，这与 Akka 或 Play 无关，只是`Integer`您的 JSON 数据中有值。

由于您将变量声明为 ，因此您会期望在类型安全的语言中不会发生这种情况`ArrayList<Double>`，但这对您来说是 Java。这是重现您的问题的简化版本：

```
import java.util.HashMap;
import java.util.Map;
import java.util.List;
import java.util.ArrayList;

public class x { 

    static void breakMap(Map x) { 
        ArrayList<Integer> l = new ArrayList<Integer>();
        l.add(new Integer(1));
        x.put("foo", l);
    };

    public static void main(String[] args) { 
        Map<String, ArrayList<Double>> x = new HashMap<String, ArrayList<Double> >();
        breakMap(x);

        ArrayList<Double> y = x.get("foo");
        Double z = y.get(0);

    }   
} 
```

给

```
线程“主”java.lang.ClassCastException 中的异常：java.lang.Integer 无法转换为 java.lang.Double
        在 x.main(x.java:20)

```

# sencha-touch-2 - 如何用 Ext.Img 填充面板

> ID：11841646
> 
> 赞同：0
> 
> 时间：2012-08-07T08:04:17.133
> 
> 标签：sencha-touch-2

我尝试了很多方法来让 Ext.Img 填充其父面板。我所看到的是被面板空间截断的大图像，而不是居中。一种配置显示的图像尺寸动态减小，但仅在 Chrome 内部，但图像在 iPad2 上消失了。

布局是一个带有停靠工具栏和内部图像的面板。没有什么花哨的，没有什么宏伟的。我错过了什么？

**更新 1：**更改了模式，但只有 Chrome 工作。iPad什么也没显示。

```
mode: 'image',
centered: true,
height: '100%' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:55:25.310

嗨@darmen，你也可以`Ext.Panel`用`style`元素定义，就像这样，

```
style: 'backgroundImage:url(your/path/images/file.jpg);backgroundSize:100% 100%;backgroundRepeat:no-repeat;backgroundPosition:top left', 
```

**希望这些有所帮助。:)**

# linux - 在 debian 上重建包和包管理器

> ID：11841649
> 
> 赞同：1
> 
> 时间：2012-08-07T08:04:26.573
> 
> 标签：linux, nginx, package, debian, rebuild

这是困扰我一段时间的事情，无法在谷歌上找到任何好的答案，希望有人能在这里得到一个可靠的答案。

它是关于如何重建 debian 软件包以及如何维护它们的。

首先，我将如何安装启用了非默认模块的 NGiNX。我认为它就像下载包源、编辑、重建和安装一样简单。但是你是怎么做的，一步一步来。

其次，一旦你安装了一个重建的包，如果一个更新版本的 NGiNX 发布了，你想通过运行一个简单的“apt-get upgrade”命令来升级它。它会这样做还是您必须重新下载并重建软件包？另外，如果它不能那样工作，你如何让它像那样工作？

有人请给一个明确的答案。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:06:18.417

我不知道你想对包做哪些更改，所以我不能告诉你如何应用这些更改，但是如果你想重建一个 debian 包，你可以按照[这个指南](http://raphaelhertzog.com/2010/12/15/howto-to-rebuild-debian-packages/)。

至于apt-get升级，我相信它会覆盖你重建的包，如果新包的版本比你重建的版本更新。你可能需要重建新版本来保留你的更改。

# sql - 找不到多部分标识符上的错误

> ID：11841651
> 
> 赞同：1
> 
> 时间：2012-08-07T08:04:34.237
> 
> 标签：sql, sql-server, tsql, error-handling, sql-update

我在更新时遇到了一些问题。并得到“找不到多部分标识符”，因为我曾经在不同数据库的另一个表中更新，但字段使用是相同的。你能帮我吗。

这是代码：

```
UPDATE [interface].[dbo].[tre_bos_account_update]
SET [interface].[dbo].[tre_bos_account_update].n_tre_bos_account_update_start_balance = [SasTempDB]..OLT_Balance_Update.StartOfDayBalance
FROM (SELECT StartOfDayBalance from OLT_Balance_Update 
WHERE CONVERT(varchar(12), [sastempdb].dbo.OLT_Balance_Update.DateTrx) = CONVERT(varchar(12), GETDATE()))OLT_Balance_Update
WHERE [SasTempDB]..OLT_Balance_Update.ClientNo = [interface].dbo.tre_bos_account_update.vc_tre_bos_account_update_account_no 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:11:51.760

`OLT_Balance_Update`是语句中派生表的别名，不是数据库的一部分。

`[SasTempDB]..`从您在主查询中引用的位置删除，`OLT_Balance_Update`并可能将其添加到派生表的 from 子句中。您还需要在派生表中添加 ClientNo。

像这样的东西：

```
UPDATE [interface].[dbo].[tre_bos_account_update]
SET [interface].[dbo].[tre_bos_account_update].n_tre_bos_account_update_start_balance = OLT_Balance_Update.StartOfDayBalance
FROM
  (
   Select StartOfDayBalance, ClientNo 
   from [SasTempDB]..OLT_Balance_Update -- This is the actual table in [SasTempDB]
   where CONVERT(varchar(12), [sastempdb].dbo.OLT_Balance_Update.DateTrx) = CONVERT(varchar(12), GETDATE())
  ) OLT_Balance_Update -- This is a table alias for a derived table
WHERE OLT_Balance_Update.ClientNo = [interface].dbo.tre_bos_account_update.vc_tre_bos_account_update_account_no 
```

查看您的查询，我猜这是等效的。

```
update T
set n_tre_bos_account_update_start_balance = O.StartOfDayBalance
from interface.dbo.tre_bos_account_update as T
  inner join SasTempDB.dbo.OLT_Balance_Update as O
    on T.vc_tre_bos_account_update_account_no = O.ClientNo
where O.OLT_Balance_Update.DateTrx >= dateadd(day, datediff(day, 0, getdate()), 0) and
      O.OLT_Balance_Update.DateTrx < dateadd(day, 1+datediff(day, 0, getdate()), 0) 
```

`dateadd`/`datediff`技巧将`getdate()`删除日期中的时间部分，并使用`>=`/进行比较`=`将使 SQL Server 能够使用索引`OLT_Balance_Update.DateTrx`来查找所需的行。

# php - PHP $_SESSION 使用表单增加/减少日期值刷新后保持值

> ID：11841654
> 
> 赞同：0
> 
> 时间：2012-08-07T08:04:59.487
> 
> 标签：php, session, post, refresh

我有这个代码：

```
<?php
 if (isset($_POST['decrease_date'])) {
  $monday_value = ($_SESSION['sess_mon'] = strftime("%Y-%m-%d", strtotime("{$_SESSION['sess_mon']} -1 day")) );
 }
 if (isset($_POST['increase_date'])) {
  $monday_value = ($_SESSION['sess_mon'] = strftime("%Y-%m-%d", strtotime("{$_SESSION['sess_mon']} +1 day")) );
 }
 else {
  $monday_value = ($_SESSION['sess_mon'] = date('Y-m-d', strtotime('Monday this week')) );
 }
?>

<form action='absence.php' method='post'>
 <input type="hidden" name="decrease_date"/>
 <input type='submit' value='Previous'>
</form>

<form action='absence.php' method='post'>
 <input type="hidden" name="increase_date"/>
 <input type='submit' value='Next'>
</form> 
```

如您所见，我正在尝试使用表单和会话来增加/减少日期并将其存储在变量中。

现在我想刷新页面，但保留刷新请求之前处于活动状态的会话值。现在它会根据提交的表单减少或增加，因为我没有 PRG 模式。

我可以将表单提交发送到另一个文件，但我需要

```
else {
 $monday_value = ($_SESSION['sess_mon'] = date('Y-m-d', strtotime('Monday this week')) );
 } 
```

因为每当用户第一次进入页面时，该值应该显示“本周星期一”。

你会建议我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:09:21.277

您应该在增加/减少日期后尝试重定向页面：

```
 if (isset($_POST['decrease_date'])) {
  $monday_value = ($_SESSION['sess_mon'] = strftime("%Y-%m-%d", strtotime("{$_SESSION['sess_mon']} -1 day")) );
  header("Location: http://" . $_SERVER['SERVER_NAME'] . "/absence.php");
 } 
```

这样，刷新页面时不会重新发布。

此外，您应该分开检查是否设置了会话变量与其他变量`if`，否则该值将随着每个既不增加或减少的请求而被重置。

```
if(!isset($_SESSION['sess_mon'])) {
  $monday_value = ($_SESSION['sess_mon'] = date('Y-m-d', strtotime('Monday this week')) );
 }
 else {
  $monday_value = $_SESSION['sess_mon'];
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T08:13:51.773

只需检查一下`$_SESSION['sess_mon']`：

```
if( !empty( $_SESSION['sess_mon'] ) )
{

    if ( !empty( $_POST['decrease_date'] ) )
    {
        $monday_value = $_SESSION['sess_mon'] = strftime("%Y-%m-%d", strtotime("{$_SESSION['sess_mon']} -1 day") );
    }
    elseif ( !empty( $_POST['increase_date'] ) )
    {
        $monday_value = $_SESSION['sess_mon'] = strftime("%Y-%m-%d", strtotime("{$_SESSION['sess_mon']} +1 day") );
    }
}

// EDIT: new if-branch instead of else
if( empty( $monday_value ) )
{
    $monday_value = $_SESSION['sess_mon'] = date('Y-m-d', strtotime('Monday this week') );
} 
```

# django - 在团队中工作时 Django South 迁移冲突

> ID：11841657
> 
> 赞同：12
> 
> 时间：2012-08-07T08:05:00.803
> 
> 标签：django, git, conflict, django-south

我有一个关于如何在团队中使用 Django-South 的简短问题。

如果两个人同时对同一文件的更改创建迁移文件会发生什么？

例如，A 和 B 正在开发同一个 Django 应用程序。他们在不同的分支工作，并且都在迁移 005。现在，A 和 B 都修改了 apple/models.py 并使用 startmigration 创建了迁移文件。他们都在迁移 006，但迁移文件 006 完全不同。我猜当他们合并分支时，South 可能会出现一些错误。

有什么办法可以解决这个冲突吗？还是南方足够聪明，可以自己解决？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-07T12:57:13.783

South 的[文档](http://south.readthedocs.org/en/latest/tutorial/part5.html#team-workflow)讨论了这个问题：

> 当不止一个人在同一时间段内进行迁移时，团队和迁移的问题就会出现，并且他们都在没有应用另一个人的情况下提交。这类似于两个人同时在 VCS 中编辑同一个文件，并且与 VCS 一样，South 有解决问题的方法。
> 
> 如果发生这种情况，首先要注意的是 South 会检测到问题，并发出如下消息：
> 
> ```
> Inconsistent migration history
> The following options are available:
>     --merge: will just attempt the migration ignoring any potential dependency
>         conflicts. 
> ```
> 
> 如果您使用 重新运行迁移`--merge`，South 将简单地应用丢失的迁移。这通常是可行的，因为团队正在开发不同的模型；如果没有，您需要查看实际的迁移更改并手动解决它们，因为它们很可能会发生冲突。
> 
> 第二件事要注意的是，当您通过他们自己的迁移完成其他人的模型更改时，您需要创建一个新的空迁移，其中冻结两个开发分支的更改（如果您使用过 mercurial ，这相当于合并提交）。为此，只需运行：
> 
> ```
> ./manage.py schemamigration --empty appname merge_models 
> ```
> 
> （请注意，这`merge_models`只是一个迁移名称；可以随意更改）
> 
> 这里的重要信息是 South 不能替代团队协调 - 事实上，大多数功能纯粹是为了警告您尚未协调，并且提供的简单合并仅适用于简单的情况。确保您的团队知道谁在做什么，这样他们就不会编写同时影响数据库相同部分的迁移。

# android - android弃用情况

> ID：11841659
> 
> 赞同：0
> 
> 时间：2012-08-07T08:05:14.683
> 
> 标签：android, eclipse

我得到了一些适用`TabLayout`于 Android 的示例代码，并对其进行了修改以满足我的需要。

问题是，当我尝试重写它时，我遇到了一些弃用错误，当我打开示例时，没有出现错误。

起初我以为是这样，`minSdkversion`所以我在示例中更改了它，但仍然没有发生任何事情。

我无法让图标在选项卡中正确显示，因此它可能与此弃用有关。

谁能启发我？这是我的代码：

```
package com.example.myapp;

import android.app.TabActivity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TabHost.TabSpec;
//notice that here eclipse won't let me import android.widget.TabHost
//but i use it when i create the tabhost variable

public class TabHost extends TabActivity {
    //the 'TabActivity' part above gets crossed-over although that doesn't happen
    //in the sample
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_tab_host);

        android.widget.TabHost tabHost = getTabHost();
        TabSpec absSpec = tabHost.newTabSpec("Absences");
        absSpec.setIndicator("Absences", getResources().getDrawable(R.drawable.abs));
        Intent int1 = new Intent(this, Absences.class);
        absSpec.setContent(int1);
        tabHost.addTab(absSpec);
    }
} 
```

这是示例：

```
package com.example.androidtablayout;

import android.app.TabActivity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TabHost.TabSpec;
import android.widget.TabHost;

public class AndroidTabLayoutActivity extends TabActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

       TabHost tabHost = getTabHost();
        TabSpec photospec = tabHost.newTabSpec("Photos");
        photospec.setIndicator("Photos", getResources().getDrawable(R.drawable.icon_photos_tab));
        Intent photosIntent = new Intent(this, PhotosActivity.class);
        photospec.setContent(photosIntent);
        tabHost.addTab(photospec); 
    }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T08:12:08.497

TabActivity 已弃用，您现在应该使用片段和兼容库来实现选项卡。谷歌似乎非常有力地推动了这种弃用，他们甚至用“如何迁移”类型的页面替换了文档页面。所以[http://developer.android.com/reference/android/app/TabActivity.html](http://developer.android.com/reference/android/app/TabActivity.html)现在解释移植您的代码需要做什么:)

# c++ - 使用 MAPI 的文件附件的 Unicode 文件名

> ID：11841660
> 
> 赞同：2
> 
> 时间：2012-08-07T08:05:20.430
> 
> 标签：c++, unicode, mapi

使用 MAPI 时是否可以将具有 unicode 文件名的文件附加到电子邮件中？

文档说[MAPISendMailW](http://msdn.microsoft.com/en-us/library/windows/desktop/hh707275%28v=vs.85%29.aspx)仅从 Win8 开始可用，这对我来说几乎没用。文档说要在 Win7 和更早版本上使用[MAPISendMailHelper](http://msdn.microsoft.com/en-us/library/windows/desktop/hh802867%28v=vs.85%29.aspx)，但 MAPISendMailHelper 的文档说如果 MAPISendMailW 不可用，它将把 unicode 信息转换为 ANSI。

我开始怀疑这可能根本不可能，但我还是问了以防万一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:51:52.607

简单的 MAPI 是不可能的，只是在不可用时`MAPISendMailHelper`调用，并且不支持 Unicode。`MAPISendMail``MAPISendMailW``MAPISendMail`

使用[扩展 MAPI](http://msdn.microsoft.com/en-us/library/office/cc765775.aspx)（Microsoft 简称为“MAPI”，包括示例）是可能的，但扩展 MAPI 会使您的代码变得更加复杂，并且出于实际目的仅限于 Outlook/Exchange。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-03T21:35:50.317

使用 MAPI 时，是否可以将具有 Unicode 文件名的文件附加到电子邮件取决于特定简单 MAPI 处理程序 (DLL) 的实现，该处理程序随每个电子邮件客户端提供，可以将自己注册为简单 MAPI 处理程序。大多数现代电子邮件客户端，例如 The Bat!，都实现了 MAPISendMailW。

如果电子邮件客户端实现 MAPISendMailW，则可以附加具有 Unicode 文件名的文件。如果它没有实现 MAPISendMailW，那么您将无法发送包含默认 Windows Codgepage 之外字符的 Unicode 文件名的文件，甚至 MAPISendMailHelper 也无济于事：例如，如果您设置了“德语”语言对于 Windows 设置中的非 Unicode 程序，并且您的文件名包含希腊字符，这些字符将丢失并变为问号。

# ios - iOS：方法返回类型应该是 X 类的子类

> ID：11841670
> 
> 赞同：2
> 
> 时间：2012-08-07T08:06:25.017
> 
> 标签：ios, generics, subclass

我有一个名为“BaseEntry”的类和一些特定的类，如“EntryFoo”和“EntryBar”，它们是“Base Entry”的子类。

现在有一个函数 getEntry 应该返回一个 Object，它是 BaseEntry 的子类。在 Java 中这不是问题，但我不知道如何在 iOS 的 Objective-C 中解决这个问题。

谢谢你的帮助！亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T16:19:25.227

在 Objective-C 中执行此操作的标准方法是只返回一个 'id' 类型的对象；把它想象成`Object`Java。但是，`id`稍微好一点的是，您可以将返回值分配给类型化的值而无需强制转换。

为了澄清，您的选择是：

```
// Assuming -(BaseEntry*)getEntry;
id entry = [obj getEntry];
[entry messageOnlyOnFooEntry];

// Assuming -(BaseEntry*)getEntry; - note cast required
FooEntry *entry = (FooEntry*)[obj getEntry];
[entry messageOnlyOnFooEntry];

// Assuming -(id)getEntry; - no cast required
FooEntry *entry = [obj getEntry];
[entry messageOnlyOnFooEntry]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T16:10:03.413

```
BaseEntry gE = [[BaseEntry alloc] init]; // Allocate and init a BaseEntry object
returnGetEntryHere = [ge getEntry]; // This will execute getEntry which is a method in BaseEntry 
```

到现在为止你尝试过什么吗？如果您发布一些代码，也许人们可以帮助您解决您对 Objective-c 项目的误解和缺点

# java - Spring：不要以惰性模式加载，而是获取数据

> ID：11841674
> 
> 赞同：2
> 
> 时间：2012-08-07T08:06:33.717
> 
> 标签：java, spring, hibernate, lazy-loading

我遇到了 Spring 和延迟加载的下一个问题。我有下一个服务方法：

```
@Override
@Transactional(readOnly=true)
public List<A> getA(Long ano, Long idGt) {
    List<A> datos = ADAO.getHorariosAnoGt(ano, idGt);
    datos.size();
    C c = datos.get(0).getB().getC();
    return datos;
} 
```

以及下一个实体：

```
A:
 B b; *(LAZY)*
 Y y;
B:
 C c; *(LAZY)*
 X x;
C:
 H h; 
```

很好，当我这样做时，我没有加载 b 和 c 的 datos，而是*“datos.get(0).getB().getC();”* 返回数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:16:20.560

您可以使用一些选项

*   对特定数据类型使用预先加载，例如，`fetchType=FetchType.EAGER`
*   手动初始化集合`Hibernate.initialize(..)`
*   使用[Fetch Profiles](http://docs.jboss.org/hibernate/stable/annotations/reference/en/html_single/#d0e3524)来切换延迟加载和急切加载
*   *访问事务中*惰性集合的对象（类似于您所做的），例如，

```
for (A dato : datos) {
    dato.getB().getC();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T09:03:48.200

啊，我想我现在已经得到你了。因此，从`getA()`方法外部您无法访问 Bs 和 Cs，但希望能够访问，对吗？

原因是`@Transactional`注释，这意味着一旦方法完成，事务（更重要的是会话）就会关闭 - 因此在方法内部（因此在同一个会话中）可以访问延迟加载的关联（你的 Bs 和 Cs ) 但在方法之外是不可能的。

要使 Bs 和 Cs 可用，您可以遵循 @Johan Sjöberg 的任何选项。（如果您不想永久更改获取类型选项 2 可能是最好的）或者在该`ADAO.getHorariosAnoGt(ano, idGt)`方法中您可以动态更改使用的获取模式： http: [//docs.jboss.org/hibernate/orm/3.3/reference /en/html/querycriteria.html#querycriteria-dynamicfetching](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html#querycriteria-dynamicfetching)

IE`criteria.setFetchMode("b", FetchMode.EAGER)`

# javascript - 是否可以将 onmouseover(evt) 与 if 条件结合使用？

> ID：11841675
> 
> 赞同：0
> 
> 时间：2012-08-07T08:06:39.333
> 
> 标签：javascript, javascript-events

我有一张小地图，我想在上面分别显示两个不同的信息类别。我在我的代码上放置了两个单选按钮，允许用户选择其中一个类别名称，当用户将鼠标移到地图上时，应显示与特定单选按钮相关的信息。我下面的代码仅适用于第一个单选按钮，当我再次选择第二个单选按钮时，会显示第一个信息！你能帮我怎么办吗？同时我的代码结构有效，但我不能在这里全部写出来。

这是我的代码：信息存储在下面的矩阵中：

```
var myCantons = [];
myCantons[0]=[name,year,population,density,year,population,density];
myCantons[1]=[x,1982,1200000,1.2,1992,300000,1.8];
myCantons[2]=[y,1982,5000000,4,1992,390000,4.6]; 
```

单选按钮是：

```
<form action="">
   <input type="radio" name="againcies" value="SP" 
     "onchange="myShowValues(myEvent)"/>
   <input type="radio" name="againcies" value="Moody"            
     "onchange="myShowValues(myEvent)"/> 
```

功能是：

```
function myShowValues(myEvent,detaset){
  if(dataset==1){
    document.getElementById('myLegCantName').firstChild.data =  myCantons[Id][0];
    document.getElementById('year').firstChild.data = myCantons[Id][1];
    document.getElementById('myLegCantVal').firstChild.data =(myCantons[Id][2]);
    document.getElementById('myLegCantVal2').firstChild.data =(myCantons[Id][3]);
  } else {
    document.getElementById('myLegCantName').firstChild.data = myCantons[Id][0]      
    document.getElementById('myLegCantRate').firstChild.data = myCantons[Id][4];
    document.getElementById('myLegCantVal').firstChild.data =(myCantons[Id][5]);                      
    document.getElementById('myLegCantVal2').firstChild.data =(myCantons[myScrId][6]);
  }
} 
```

该地图包括许多多边形，它们位于一组中，如下所示：

```
<g id="myCantons" fill="#A0C544" stroke="#FFFFFF" onmouseover="myShowValues(evt,dataset)"> 
```

如前所述，我的问题在于如果条件部分它只能调用第一个单选按钮，而我无法为第二个按钮应用条件，你知道吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:04:53.070

尝试做这样的事情：

```
<input type="radio" name="againcies" value="SP" 
 onchange="changeDataset(1)"/>
<input type="radio" name="againcies" value="Moody"            
 onchange="changeDataset(2)"/> 
```

和

```
<g id="myCantons" fill="#A0C544" stroke="#FFFFFF" onmouseover="myShowValues()"> 
```

然后像这样的javascript：

```
var dataset = 1; // default value
function changeDataset(newval) {
   dataset = newval;
   // plus whatever else you need to do here
   // maybe myShowValues(); ???
}

function myShowValues(){
  if(dataset == 1){
     document.getElementById('myLegCantName').firstChild.data =  myCantons[Id][0];
     document.getElementById('year').firstChild.data = myCantons[Id][1];
     document.getElementById('myLegCantVal').firstChild.data =(myCantons[Id][2]);
     document.getElementById('myLegCantVal2').firstChild.data =(myCantons[Id][3]);
  } else {
     document.getElementById('myLegCantName').firstChild.data = myCantons[Id][0]      
     document.getElementById('myLegCantRate').firstChild.data = myCantons[Id][4];
     document.getElementById('myLegCantVal').firstChild.data =(myCantons[Id][5]);                      
     document.getElementById('myLegCantVal2').firstChild.data =(myCantons[myScrId][6]);
  }
} 
```

需要注意的几件事 .. 这不是有效的 HTML：

```
"onchange="myShowValues(myEvent)" 
```

引用太多了...

# c# - 更改消息部分元素的名称

> ID：11841676
> 
> 赞同：1
> 
> 时间：2012-08-07T08:06:41.923
> 
> 标签：c#, .net, wcf, soap, wsdl

我有一个 WCF 服务，如下所示。它生成以下 WSDL。

根据组织中的命名约定，我需要**元素**名称为“tns:GetDataUsingDataContractInput”而不是="tns:GetDataUsingDataContract"（即需要附加“Input”一词。）

我们如何使用 C# 代码来做到这一点？此外，生成的相应 xsd 应反映此更改。

```
[ServiceContract]
public interface IService1
{
    [OperationContract]
    CompositeType GetDataUsingDataContract(CompositeType composite);
} 
```

WSDL

![在此处输入图像描述](../Images/19f193488b6a86bb362b34fdbffb996e.png)

**参考**

1.  了解 WSDL [http://msdn.microsoft.com/en-us/library/ms996486.aspx](http://msdn.microsoft.com/en-us/library/ms996486.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:51:24.383

我不完全确定我理解你的问题，但它可以像这样做一样简单：

```
[ServiceContract]
public interface IService1
{
    [OperationContract(Name="GetDataUsingDataContractInput")]   
    CompositeType GetDataUsingDataContract(CompositeType composite);
} 
```

# c++ - 显示类变量。在 printf 函数中使用字符串作为参数。

> ID：11841679
> 
> 赞同：0
> 
> 时间：2012-08-07T08:06:57.753
> 
> 标签：c++

我试图弄清楚课程是如何运作的，但我遇到了一些麻烦

主文件

```
#include <stdio.h>
#include "Student.h"
#include <stdlib.h>

void main()
{
Student students;

students.Print();

system("pause");

} 
```

学生.h

```
#pragma once
#include <string.h>
#include <iostream>
using namespace std;

class Student
{
public:
    Student(void);
    ~Student(void);
    void Print(void);
private:
    int IDone;
    int IDtwo;
    string studentOne;
    string studentTwo;
}; 
```

学生.cpp

```
#include "Student.h"

Student::Student(void)
{
    studentOne = "John Doe";
    studentTwo = "Jane Doe";
    IDone = 227768;
    IDtwo = 227769;
}

Student::~Student(void)
{
}
void Student::Print(void)
{
    printf("Student name: %s\n", studentOne);
    printf("Student ID: %d\n", IDone);
    printf("Student name: %s\n", studentTwo);
    printf("Student ID: %d\n", IDtwo);

} 
```

当它运行时，我得到：

```
 Student name: <null>
    Student ID: 227768
    Student name: <null>
    Student ID: 227769 
```

稍后我希望能够更改名称和 ID。此外，可以将这些成员放在一种数组中，这样我就可以通过 student[0] 和 student[1] 来打印它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T08:10:54.830

阅读有关的参考资料[`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)，您会发现一个名为的方法，该方法[`c_str`](http://en.cppreference.com/w/cpp/string/basic_string/c_str)用于获取可用于例如`printf`.

或者只是开始使用`std::cout`：

```
void Student::Print(void)
{
    std::cout << "Student name: " << studentOne << '\n';
    std::cout << "Student ID: " << IDone << '\n';
    std::cout << "Student name: " << studentTwo << '\n';
    std::cout << "Student ID: " << IDtwo << '\n';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T08:11:34.373

您需要使用诸如[向量](http://www.cplusplus.com/reference/stl/vector/)之类的 stl 容器而不是数组来存储您的学生详细信息，并且您应该将您的学生班级改造成这样的东西

```
class Student
{
private:
 string Name;
 int    Id;
public:
 Student(string name, int id);
 string GetName();
 void SetName(name);
 int GetId();
 void SetId(int id);
 void Print();
}; 
```

你的主要应该是这样的

```
 void main()
    {
      vector<Student> studentList;

      Studen one("John Doe", 1);
      Studen two("Jane Doe", 2);

      studentList.push_back(one);
      studentList.push_back(two);

      vector<Student>::const_iterator cii;
      for(cii=Student.begin(); cii!=Student.end(); cii++)
       {
          *cii.Print();

       }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T08:12:28.317

```
printf("Student name: %s\n", studentOne); 
```

导致未定义的行为。您需要传递适合`%s`格式说明符的 ac 样式字符串，即`studentOne.c_str()`.

> 可以将这些成员放在一种数组中，因此我可以通过 student[0] 和 student[1] 打印它

您始终可以将数组声明`std::string`为任何其他数据类型。

```
class Student
{
  ...
  string students[N];  // or vector<string> students;
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T08:17:16.143

```
printf("Student name: %s\n", studentOne); 
```

您不能将 C++ 传递给`std::string`C`printf`函数；只能传递与 C 语言共享的基本类型；传递类类型将导致未定义的行为。

您可以使用 C++ 输出：

```
std::cout << "Student name: " << studentOne << std::endl; 
```

或者，如果您出于某种原因真的想使用 C 输出，则可以从以下内容中提取 C 风格的字符串`std::string`：

```
printf("Student name: %s\n", studentOne.c_str());
                                       ^^^^^^^^ 
```

> 此外，可以将这些成员放在一种数组中，这样我就可以通过 student[0] 和 student[1] 来打印它？

是的，您可以将大多数类型（包括类）放在一个数组中：

```
std::string student[2]; // array of two strings. 
```

如果您想要一个变量号，请使用动态数组：

```
std::vector<std::string> student; 
```

`Student`不过，一个人有两个名字和两个 ID似乎有点奇怪。那个班级不应该只代表一个人吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T08:23:45.110

> 此外，可以将这些成员放在一种数组中，这样我就可以通过 student[0] 和 student[1] 来打印它？

当然。如果您预先知道学生人数，那么您可以：

```
string students[2]; 
```

该语句将有效地`string`在内存中分配两个对象，您可以通过数组索引引用它们中的每一个。

如果您不知道需要多少学生，那么最好使用`std::vector`类，因为它是在 C++ 中表示动态数组的首选方式。

您将 studentOne、studentTwo、IDOne 和 IDtwo 数据成员放在类声明的私有部分下。这意味着您只能在`Student`类实现中直接操作它们。大多数其他程序员希望您遵循的方法是创建特殊的 getter 和 setter 方法：

```
const std::string& studentOne() const {return studentOne;}
void setStudentOne(const std::string& aStudentOne) {studentOne = aStudentOne;} 
```

等等。`setStudentOne`当您想要产生一些副作用时，创建特别有用。否则，您可以使用单一方法访问它：

```
std::string& getStudentOne() {return studentOne;} 
```

或者，公开对字段的直接访问（即将它们重新定位到公共部分下）不是*禁忌*。请记住，这不是大多数人希望看到的。

# objective-c - 如何确定文件是二进制文件还是文本文件？

> ID：11841682
> 
> 赞同：1
> 
> 时间：2012-08-07T08:07:06.983
> 
> 标签：objective-c, xcode, macos, encoding, mime-types

我正在编写一个应用程序，我需要确定用户提供的文件是否为文本，因为我正在其中执行搜索。

我不是基于扩展名，因为我也想在源代码文件中搜索，或者任何其他具有文本内容的文件（即使是不知名的扩展名）。

有没有办法确定文件是否为文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:17:06.923

您需要打开并读取数据。

对于 ASCII 文本文件，这意味着检查字符是否在可打印范围内。

对于 UTF 文本文件，您可能需要先读取 BOM（字节顺序标记）以确定编码，然后再读取文件的其余部分。

在这里阅读更多：[http ://en.wikipedia.org/wiki/Text_file](http://en.wikipedia.org/wiki/Text_file)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T08:42:54.720

感谢大家提供的解决方案！我刚刚找到了一个似乎可以很好地完成这项工作的框架！

我在这里留下一个链接供参考：[https ://github.com/aidansteele/MagicKit](https://github.com/aidansteele/MagicKit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T08:12:27.123

> 没有办法确定。但请注意，大多数控制字符不会出现在 ASCII 文件中。通过制作大多数 ASCII 控制字符的子集，您可以做出很好的猜测。然后计算文件中子集中的字符数，对于 ASCII 文件，计数应该为零。但归根结底，你必须证明一个否定的，这是一件很麻烦的事情。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-08-11T23:49:35.897

尝试以下方法：

```
func isBinary(_ path: String) -> Bool? {
    if FileManager.default.fileExists(atPath: path) == false {
        return nil
    }

    return ( try? String(contentsOfFile: path) ) == nil
} 
```

1.  如果文件不存在 - 它返回 nil
2.  如果文件存在，则返回它是二进制或文本

这段代码的问题是它不适用于大文件（检查会很长）

# classification - 使用 Mahout 原生贝叶斯分类器算法需要哪些步骤？

> ID：11841684
> 
> 赞同：2
> 
> 时间：2012-08-07T08:07:16.063
> 
> 标签：classification, mahout, fraud-prevention

我正在尝试使用本机贝叶斯分类器来检测欺诈交易。我在 Excel 表中有大约 5000 个样本数据，这是我将用于训练分类器的数据，我有大约 1000 个测试数据，我将在其上应用测试分类器。

我的问题是，我不知道如何训练分类器。在将训练数据传递给训练分类器之前，我是否需要将其转换为某种特定格式。训练分类器如何知道哪些是我的目标值，哪些是它的特征。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T08:28:44.717

为了测试你的数据，你需要确保你的训练集有一些标签，或者已经根据你在数据收集集中使用的一些特征分成了块。我不确定您是如何组织数据的，但您需要将数据集拆分为类似特征的块。

根据您的标准创建拆分后，请检查输入数据的创建。您可以使用以下方法验证文件：

```
hadoop fs -ls filename 
```

使用以下方法训练您的分类器：

```
$MAHOUT_HOME/bin/mahout trainclassifier -i input_file -o output_model 
```

使用以下方法测试分类器：

```
$MAHOUT_HOME/bin/mahout testclassifier -m output_model -d input_file 
```

注意：请注意，在数据收集期间，您需要确保为某些数据值（如果存在）分配权重。在实验设置或数据收集过程中，还必须进行数据清理以标准化错误。您可以对数据集使用任何乘法散射校正技术来校正它。

首先，有一个名为 的文件 `training-categories.txt`，其中包含分类器的类别。您可以使用简单的文本编辑器来执行此操作。

现在我们有了一个我们感兴趣`ExtractTrainingData`的类别列表，使用类别列表运行该类。

```
$TT_HOME/bin/tt extractTrainingData \
--dir ./index \
--categories ./training-categories.txt \
--output ./category-bayes-data \
--category-fields categoryFacet,source \
--text-fields title,description \
--tv 
```

此命令将读取文档并在类别和来源字段中搜索匹配的类别。当在这些文档之一中找到列出的类别`training-categories.txt`之一时，将从存储在标题和描述字段中的术语向量中提取术语。这些术语将被写入目录中的`category-bayes-data`文件。每个类别都有一个文件。每个都是纯文本文件，可以使用任何文本编辑器或显示实用程序查看。

类别名称出现在第一列中，而文档中出现的每个术语都包含在第二列中。Mahout Bayes 分类器期望输入字段是词干的，因此您会在测试数据中看到这一点。data 命令的 `--tv`参数 `extractTraining` 导致使用来自每个文档的词向量的词干词。

当`ExtractTrainingData`该类完成其运行时，它将输出在每个类别中找到的文档计数。

# android - 可以使用 TabHost 的标题栏吗？

> ID：11841686
> 
> 赞同：0
> 
> 时间：2012-08-07T08:07:18.573
> 
> 标签：android, tabs, android-tabhost, title, titlebar

我有一个`TabHost`三个选项卡。如果可能的话，我想添加一个带有图标的标题栏，以便在视觉上与我的应用程序的其余部分匹配。我在跑步`Android 2.3.3`。

在我的应用程序的其余部分中，我使用的`Actionbar Sherlock`是`titlebar`. 我也想`"simulate"`这样出现`TabHost`。（当然，我也可以使用 Actionbar Sherlock 并使用 Fragmnts 等，但这将是很多工作，但收效甚微！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:19:01.200

您可以将 android 示例代码用于操作栏兼容。此示例代码可在 android-sdks/samples/android-14/ActionBarCompat 中找到。希望对您有所帮助

# loops - 模板工具包 - 在不同行中呈现相同循环的范围

> ID：11841689
> 
> 赞同：1
> 
> 时间：2012-08-07T08:07:50.920
> 
> 标签：loops, foreach, row, range, template-toolkit

我正在尝试获取一个模板工具包 [% FOREACH %] 循环，以将一定范围内的项目拆分并呈现到不同的行中。

### 到目前为止我得到了什么：

```
<ul>
    <ul class="row-top">
    [% FOREACH news IN newsfeeds %]
    [% IF loop.index() < 3 %]
        [% INCLUDE content_news/news_item.tt %]
    [% END %]
    [% END %]
    </ul>
    [% FOREACH news IN newsfeeds %]
        [% IF loop.index() > 3 %]
            [% INCLUDE content_news/news_item.tt %]
        [% END %]
    [% END %]
</ul> 
```

### 到目前为止的输出（第一行正确）：

```
<ul>
    <ul class="row-top">
        <li class="item featured"></li>
        <li class="item"></li>
        <li class="item last"></li>
    </ul>
    <li class="item"></li>
    <li class="item"></li>
    <li class="item"></li>
    <li class="item"></li>
    <li class="item"></li>
    <li class="item"></li>
</ul> 
```

### 理想的输出标记：

```
<ul class="top-row">
    <li class="item featured"></li>
    <li class="item"></li>
    <li class="item last"></li>
</ul>
<ul class="row">
    <li class="item"></li>
    <li class="item"></li>
    <li class="item"></li>
    <li class="item last"></li>
</ul>
<ul class="row">
    <li class="item"></li>
    <li class="item"></li>
    <li class="item"></li>
    <li class="item last"></li>
</ul>
<ul class="row">
    <li class="item"></li>
    <li class="item"></li>
    <li class="item"></li>
    <li class="item last"></li>
</ul> 
```

### 情况：

因为列表项可能有不同的高度，它们不能只是向左浮动。它们需要在不同的行中呈现。foreach 循环应该打开和关闭标签，如上面的标记所示。

因为特色项目的宽度是默认项目的两倍（想想 4 列网格），所以第一行 (.top-row) 只有三个项目。

所有这些最好从同一个 foreach 循环中呈现，因为数据来自同一个源。

目的是在 Template Toolkit 中完成此操作，但任何显示该想法背后逻辑的方法都将不胜感激！

干杯，W.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T08:34:44.887

我会`slice`列出：

```
[% featured_items = newsfeeds.slice(0,2) %]
[% normal_items  = newsfeeds.slice(3) %]

<ul class="row-top">
    [% FOREACH news IN featured_items %]
        [% INCLUDE content_news/news_item.tt %]
    [% END %]
</ul>
<ul class="row">
    [% FOREACH news IN normal_items %]
        [% INCLUDE content_news/news_item.tt %]
        [% IF ( loop.count % 4 ) == 0 %]</ul><ul class="row>[%END%]
    [% END %]
</ul> 
```

# hadoop - 如何在 mac OSX 上安装 Hadoop 期间找到要在核心和映射文件中使用的正确端口？

> ID：11841690
> 
> 赞同：0
> 
> 时间：2012-08-07T08:07:51.767
> 
> 标签：hadoop

我最近从 Windows 转移到 Mac OS，我正在尝试在 Mac OSX 10.7 Lion 上安装 Hadoop。

在`core-site.xml`文件中，我必须添加一个属性：

```
<property>
    <name>fs.default.name</name>
    <value>hdfs://localhost:8020</value>
</property> 
```

并在`mapred-site.xml`：

```
<property>
    <name>mapred.job.tracker</name>
    <value>localhost:8021</value>
</property> 
```

我试着做：

```
$telnet localhost 8020 
```

和

```
$telnet localhost 8021 
```

但我认为它们都没有在我的机器上打开。

`telnet localhost`工作正常但`telnet localhost 8020/8021`抛出错误：

```
Trying ::1...
telnet: connect to address ::1: Connection refused
Trying 127.0.0.1...
telnet: connect to address 127.0.0.1: Connection refused
Trying fe80::1%lo0...
telnet: connect to address fe80::1%lo0: Connection refused
telnet: Unable to connect to remote host: Connection refused 
```

另外，我无法远程登录到我机器的 IP 地址。我收到此错误：

```
Trying 192.168.0.145...
telnet: connect to address 192.168.0.145: Operation timed out
telnet: Unable to connect to remote host: Operation timed out 
```

为了找到可用的端口，我尝试运行命令：

```
$lsof -i -P | grep -i "listen" 
```

但是每次我运行这个命令时，我都会得到一组不同的 IPV6 端口。

我不确定如何找到在这两个文件中指定的正确端口？请就此提出一些建议。

我运行 start-all.sh 脚本并输入**jps**，它没有显示 namenode pid

'3049 SecondaryNameNode 3181 TaskTracker 2971 DataNode 3190 Jps 3105 JobTracker'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:41:26.290

如果您知道名称节点的进程 ID（您应该能够使用`jps`or`ps axww`命令找到它），您应该能够使用进程 ID 的输出`lsof -i -P`并按进程 ID 进行过滤。应该有一个选项可以将 lsof 的输出限制为给定的 pid（我知道 netstat 是 lsof 的替代方案，你可以这样做，但 mac 版本似乎没有 pid 输出选项）。

找到名称节点进程的 pid 后，运行`lsof -i -P | grep $pid`该输出并将其粘贴回您的原始问题（编辑问题，不要将其作为评论或答案发布），我们将从那里开始。

# objective-c - iOS 排行榜分数未更新问题 ios？

> ID：11841692
> 
> 赞同：0
> 
> 时间：2012-08-07T08:08:02.107
> 
> 标签：objective-c, ios5, gamekit, leaderboard, gksession

现在我有排行榜任务，因为我已经通过我的沙盒帐户提交了我的分数，但是我的分数在 18 小时后更新，并且一些延迟只有其他人才能看到我的分数....

我已经实施了所有代表......但我仍然遇到同样的问题......

关于这个的任何想法请分享....

建议高度赞赏...

提前致谢....

我的代码块：-

```
- (void) reportScore: (int64_t) score forCategory: (NSString*) category 
{
    GKScore *scoreReporter = [[GKScore alloc] initWithCategory:category];
    scoreReporter.value = score*50;
    [scoreReporter reportScoreWithCompletionHandler: ^(NSError *error) 
     {
         if (error != nil)
         {
             NSLog(@"reportScore: error!");

        }
        else
        {

                 NSLog(@"reportScore: successful!");
            [self callDelegateOnMainThread: @selector(scoreReported:) withArg: self error: error];
        }

     }];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:13:20.223

以我的经验，我注意到 Game Center 排行榜分数在至少有两个分数之前不会显示。（特别是在 Sandbox 中，但发布后也可能如此）。

我只在两个不同的设备上使用两个不同的帐户对此进行了测试，但一台设备上的两个帐户也可以工作。

即便如此，在显示或更新分数之前有时也会有延迟。

# .htaccess - 自动从旧主机重定向到新主机，同时保留链接

> ID：11841694
> 
> 赞同：0
> 
> 时间：2012-08-07T08:08:07.733
> 
> 标签：.htaccess, drupal, redirect

我的雇主购买了一个新域名，他希望将旧域中的所有内容重定向到新域。他说应该是301重定向，这样搜索引擎的排名才会保留。

所以从[http://olddomain.com/article-title](http://olddomain.com/article-title)应该（301）重定向到[http://newdomain.com/article-title](http://newdomain.com/article-title)，保持 article-title 一直相同（只是主机名会改变）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T16:38:09.097

在`olddomain.com`的文档根目录下的 htaccess 文件中，添加：

```
Redirect 301 / http://newdomain.com/ 
```

或者，如果您更喜欢使用 mod_rewrite，或者 olddomain.com 实际上托管了几个不同的主机：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} olddomain.com$ [NC]
RewriteRule ^(.*)$ http://newdomain.com/$1 [R=301,L] 
```

# arrays - Visual Basic 测验程序

> ID：11841698
> 
> 赞同：0
> 
> 时间：2012-08-07T08:08:20.307
> 
> 标签：arrays, visual-studio, random

抱歉打扰了，但你能帮我解决我的问题吗？

我是 Visual Basic 编程的新手，一切都很好，直到我们的主题转移到数组。我试图使用 Java 来理解它的代码。（例如：方法被称为函数......）

我的教授给了我们一个练习来创建一个测验程序，该程序向用户询问超过 5 个问题（在文本框中）并带有选项（在按钮中），并在最后计算分数（全部以一种形式）。如果用户单击一个按钮，它将判断它是对还是错，然后继续更改问题以及选择。

*必填： - 用户完成测验后将显示分数，并且应该有一个重新启动按钮，所有问题将再次随机询问，没有模式。- 尝试制作功能。

我从昨天开始尝试在网上搜索，但我的代码仍然没有任何进展。

```
 Public Class Form1
Dim questions(5) As String
Dim answers(5) As String

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    'Method/Function for loading the Q&A
    loadQsAndAs()
End Sub

Private Sub Button5_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button5.Click
    Me.Close()
End Sub

Private Sub loadQsAndAs()
    'Questions
    questions(0) = "What is 1 + 1?"
    questions(1) = "Who is the first man to walk on the Moon?"
    questions(2) = "What is the name of the main character in the movie: Yes Man!(2007)"
    questions(3) = "If I gave you three apples and you ate two, how many is left?"
    questions(4) = "What do you want in your final grade?"
    questions(5) = "What is the name of the thing(s) that you use whenever you eat?"
    'Answers
    answers(0) = "2"
    answers(1) = "Neil Armstrong"
    answers(2) = "Jim Carrey"
    answers(3) = "1"
    answers(4) = "A 4.0"
    answers(5) = "A Spoon and Fork"

    TextBox1.Text = setTheQuestion()
    Button1.Text = setTheAnswer1()
    Button2.Text = setTheAnswer2()
    Button3.Text = setTheAnswer3()
    Button4.Text = setTheAnswer4()

End Sub

Private Function setTheQuestion() As String
    Dim randomValue As New Random
    Dim randomQ As String = ""
    Dim i As Integer
    Dim index As Integer

    For i = 0 To 0
        index = randomValue.Next(0, questions.Length)
        randomQ &= questions(index)
    Next
    Return randomQ
End Function

Private Function setTheAnswer1() As String
    Dim randomValue As New Random
    Dim randomAns As String = ""
    Dim i As Integer
    Dim index As Integer

    For i = 0 To 0
        index = randomValue.Next(0, answers.Length)
        randomAns &= answers(index)
    Next

    Return randomAns
End Function

Private Function setTheAnswer2() As String
    Dim randomValue As New Random
    Dim randomAns As String = ""
    Dim i As Integer
    Dim index As Integer

    For i = 0 To 0
        index = randomValue.Next(1, answers.Length)
        randomAns &= answers(index)
    Next

    Return randomAns
End Function

Private Function setTheAnswer3() As String
    Dim randomValue As New Random
    Dim randomAns As String = ""
    Dim i As Integer
    Dim index As Integer

    For i = 0 To 0
        index = randomValue.Next(2, answers.Length)
        randomAns &= answers(index)
    Next

    Return randomAns
End Function

Private Function setTheAnswer4() As String
    Dim randomValue As New Random
    Dim randomAns As String = ""
    Dim i As Integer
    Dim index As Integer

    For i = 0 To 0
        index = randomValue.Next(3, answers.Length)
        randomAns &= answers(index)
    Next

    Return randomAns
End Function

Private Sub Button6_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button6.Click
    loadQsAndAs()
End Sub
    End Class 
```

我的问题是：

*   每当用户启动或重新启动程序时，如何使问题和我的选择在数组中随机出现？

*   我如何编码随机问题也将具有其他 3 个随机答案的正确答案？（因为我的只是随机化答案，并且不断重复一些选择）

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:12:58.410

初始化测验时创建一个随机数字序列，以指示问题和答案的顺序。

# selenium - PhpUnit Selenium 测试的错误处理

> ID：11841699
> 
> 赞同：1
> 
> 时间：2012-08-07T08:08:25.517
> 
> 标签：selenium, phpunit

我有一套 Selenium 测试。例如，有时，“assertIsElementPresent”会失败。在某些情况下，这可能是因为有人破坏了某些东西，并且 UI 单击序列的结果是导致显示站点错误页面的错误。

如何检查每次失败是否都发生了这种情况，而无需在任何地方实现对以下方法的调用？

```
 $isErrorPage = $selenium->isElementPresent("id=siteErrorPage");
    if ($isErrorPage){
        $html = $selenium->getHtmlSource();
        //send the $html to devs, log it, etc.
    } 
```

目的只是在页面被证明是错误页面时通过电子邮件发送正在显示的页面的 html 源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T17:18:30.577

我看起来你必须扩展[PHPUnit_Extensions_Selenium2TestCase](https://github.com/sebastianbergmann/phpunit-selenium/blob/master/PHPUnit/Extensions/Selenium2TestCase.php)类，并重载[onNotSuccessfulTest()](https://github.com/sebastianbergmann/phpunit-selenium/blob/master/PHPUnit/Extensions/Selenium2TestCase.php#L299)。在那里添加您的代码并使您的所有测试用例扩展您的新类而不是 PHPUnit_Extensions_Selenium2TestCase。确保在您的扩展版本中调用 parent::onNotSuccessfulTest()。

我没有对此进行测试，但是通过研究代码，这**应该**可以满足您的需求。看起来[stop()](https://github.com/sebastianbergmann/phpunit-selenium/blob/master/PHPUnit/Extensions/Selenium2TestCase/Session.php#L167-174)命令是在会话[__destruct()](https://github.com/sebastianbergmann/phpunit-selenium/blob/master/PHPUnit/Extensions/Selenium2TestCase/Session.php#L150-153)上发送的，因此当您尝试获取屏幕截图时会话应该仍然处于活动状态。

# jsf - p:resizable 在第一次使用时捕捉到子大小

> ID：11841700
> 
> 赞同：1
> 
> 时间：2012-08-07T08:08:25.650
> 
> 标签：jsf, primefaces, panel, resizable

我创建了 ap:gridPanel，在其中我用不同的 colSpan 绘制了 p:panels。这些面板包含一个 h:outputText。在每个面板上，我放置 ap:resizable 以更改宽度。但是，第一次调整大小时，面板会捕捉到子元素 (h:outputText) 的宽度并从其宽度开始调整大小。

```
<c:forEach items="#{dataHandler.employees}" var="employee">
<p:row>
    <p:column styleClass="employeeColumn">
        <h:outputText value="#{employee.name}" styleClass="standardText"/>
    </p:column >
        <c:forEach items="#{employee.activities}" var="activity">
            <p:column colspan="#{activity.duration}">
                <c:choose>
                    <c:when test="#{activity.category == 'empty'}"/>
                    <c:otherwise>
                        <p:panel id="#{activity.id}" styleClass="activityPanel"
                            style="background-color:#{activity.color}">
                            <h:outputText value="#{activity.name} - #{activity.duration} days" styleClass="activityText"/>
                                    </p:panel>
                        <p:resizable for="#{activity.id}" handles="e,w" grid="22" minHeight="15" maxHeight="15"/>
                                    <p:draggable for="#{activity.id}" handle=".ui-panel-titlebar" stack=".ui-panel" grid="23,15" 
                                        containment="containment"/>
                        <p:tooltip for="#{activity.id}" styleClass="toolTip">
                                        #{activity.name} <br/> #{employee.name} <br/>from #{activity.startTime} to #{activity.endTime}
                                    </p:tooltip>
                    </c:otherwise>
                </c:choose>
            </p:column>
        </c:forEach>
</p:row> 
```

# php - 简单的 web 服务，它获取图像并将其存储在服务器上的文件夹中

> ID：11841701
> 
> 赞同：0
> 
> 时间：2012-08-07T08:08:27.510
> 
> 标签：php

如您所知，以下代码片段是 PHP 上传文件并将其存储在服务器上的最简单的代码片段：

```
 <?php
 $uploaddir = "uploads/";
 $uploadfile = $uploaddir . basename($_FILES['userfile']['name']);

 if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) {
echo "Success";
} else {
echo "Failure";
}
?> 
```

我希望将此代码片段的相同功能编写为 Web 服务（以便客户端可以使用一个参数调用它，该参数是要上传的文件，假设它将是一张图像）。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:05:09.000

`<input type="file">`$_FILES 是表单元素的一种特殊情况。Web 服务通常使用 XML 或 JSON 数据。客户端必须将图像文件内容直接包含在数据中。如果您使用 JSON，您的 PHP 可以`json_decode`用来解析输入，然后只需打开上传文件并将数据写入其中。

# android - Android：无法启动活动 ComponentInfo：java.lang.NullPointerException

> ID：11841704
> 
> 赞同：0
> 
> 时间：2012-08-07T08:09:04.140
> 
> 标签：android, android-emulator

我在运行我的 Android 应用程序时收到错误“无法启动活动组件信息”错误。

这是似乎发生错误的类。

```
public class GalleryZoom extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.gallery_zoom);

        ImageView image = (ImageView) findViewById(R.id.imageZoom);
        String selection = getIntent().getExtras().getString("image");
        Toast.makeText(this, selection, Toast.LENGTH_LONG).show();

        BitmapFactory.Options bmpOptions;
        bmpOptions = new BitmapFactory.Options();
        bmpOptions.inSampleSize = 1;
        Bitmap bmp = LoadImage(getIntent().getExtras().getString("image"), bmpOptions);
        image.setImageBitmap(bmp);

    }

    private Bitmap LoadImage(String URL, BitmapFactory.Options options) {
        Bitmap bitmap = null;
        InputStream in = null;
        try {
            in = OpenHttpConnection(URL);
            bitmap = BitmapFactory.decodeStream(in, null, options);
            in.close();
        } catch (IOException e1) {
        }
        return bitmap;
    }

    private InputStream OpenHttpConnection(String strURL) throws IOException {
        InputStream inputStream = null;
        URL url = new URL(strURL);
        URLConnection conn = url.openConnection();

        try {
            HttpURLConnection httpConn = (HttpURLConnection) conn;
            httpConn.setRequestMethod("GET");
            httpConn.connect();

            if (httpConn.getResponseCode() == HttpURLConnection.HTTP_OK) {
                inputStream = httpConn.getInputStream();
            }
        } catch (Exception ex) {
        }
        return inputStream;
    }

} 
```

以下是我的 LogCat 错误消息。

```
07-20 00:15:12.779: D/AndroidRuntime(802): Shutting down VM
07-20 00:15:12.779: W/dalvikvm(802): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
07-20 00:15:12.789: E/AndroidRuntime(802): FATAL EXCEPTION: main
07-20 00:15:12.789: E/AndroidRuntime(802): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.example.mobile.application/com.example.example.mobile.application.gallery.GalleryZoom}: java.lang.NullPointerException
07-20 00:15:12.789: E/AndroidRuntime(802):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
07-20 00:15:12.789: E/AndroidRuntime(802):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
07-20 00:15:12.789: E/AndroidRuntime(802):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
07-20 00:15:12.789: E/AndroidRuntime(802):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
07-20 00:15:12.789: E/AndroidRuntime(802):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-20 00:15:12.789: E/AndroidRuntime(802):  at android.os.Looper.loop(Looper.java:137)
07-20 00:15:12.789: E/AndroidRuntime(802):  at android.app.ActivityThread.main(ActivityThread.java:4745)
07-20 00:15:12.789: E/AndroidRuntime(802):  at java.lang.reflect.Method.invokeNative(Native Method)
07-20 00:15:12.789: E/AndroidRuntime(802):  at java.lang.reflect.Method.invoke(Method.java:511)
07-20 00:15:12.789: E/AndroidRuntime(802):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
07-20 00:15:12.789: E/AndroidRuntime(802):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
07-20 00:15:12.789: E/AndroidRuntime(802):  at dalvik.system.NativeStart.main(Native Method)
07-20 00:15:12.789: E/AndroidRuntime(802): Caused by: java.lang.NullPointerException
07-20 00:15:12.789: E/AndroidRuntime(802):  at com.example.example.mobile.application.gallery.GalleryZoom.LoadImage(GalleryZoom.java:52)
07-20 00:15:12.789: E/AndroidRuntime(802):  at com.example.example.mobile.application.gallery.GalleryZoom.onCreate(GalleryZoom.java:41)
07-20 00:15:12.789: E/AndroidRuntime(802):  at android.app.Activity.performCreate(Activity.java:5008)
07-20 00:15:12.789: E/AndroidRuntime(802):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
07-20 00:15:12.789: E/AndroidRuntime(802):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
07-20 00:15:12.789: E/AndroidRuntime(802):  ... 11 more 
```

任何帮助将不胜感激 :) 而且，这在 2.3.3 的模拟器上运行良好，但在最新的 4.1 上运行时，我似乎得到了这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:18:52.087

您可能在这一行有一个 nullpointerexception：

```
in.close(); 
```

您的流似乎是`null`（错误的 url，没有连接，或者像这样的 sthg）。

尝试这个：

```
 InputStream in = null;
    try {
        in = OpenHttpConnection(URL);
        bitmap = BitmapFactory.decodeStream(in, null, options);

    } catch (IOException e1) {
    }
    finally{
        try{
            in.close();
        }catch(Exception e){}
    }
    return bitmap; 
```

# android - 如何将对话框的位置设置为用户单击 MapView 的位置？

> ID：11841705
> 
> 赞同：3
> 
> 时间：2012-08-07T08:09:19.863
> 
> 标签：android, google-maps, android-layout, android-widget, android-ui

我在我的项目中使用谷歌地图 MapView。当用户用户点击地图上的特定标记时，我需要创建一个类似于谷歌地图的对话框，并且我需要将该对话框定位在用户点击的位置（在视口内）。如何将对话框的位置设置为用户在地图上单击的位置？我已经看到 Dialog 的 API 将其位置设置为某个坐标，但不知道如何获取用户单击点的坐标。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:06:30.557

制作要在该点显示的布局的类 MarkerPopup，然后在 onTap 方法上完成这样的操作

```
@Override
protected boolean onTap(int index) {
    MyOverlayItem item = mOverlays.get(index);
    MarkerPopup this.popup = new MarkerPopup(mapView);
    MapView.LayoutParams params = new MapView.LayoutParams(
            MapView.LayoutParams.WRAP_CONTENT, // width
            MapView.LayoutParams.WRAP_CONTENT, // height
            item.getPoint(), MapView.LayoutParams.BOTTOM_CENTER);
    params.mode = MapView.LayoutParams.MODE_MAP;
    this.mapView.addView(popup, params);

    // change parameter
    popup.setLayoutParams(params);
    // visibility
    popup.setVisibility(View.VISIBLE);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:34:38.980

注册地图点击处理程序。

```
// Capture map click event.
google.maps.event.addListener(YourMap 'click', $.proxy(this.mapClickHandler, this)); 
```

在函数中，您将取回事件对象。从中您可以检索鼠标单击的纬度和经度。如果您有标记，则可以使用这些值来设置其在地图上的位置。

```
mapClickHandler = function (event)
{
    var position = new google.maps.LatLng(event.latLng.lat(), event.latLng.lng())
    // Main Marker. Or in your case a google maps dialogue.
    this.marker.setPosition(position);
} 
```

我突然想到你可能需要 x,y 屏幕坐标，我不确定，我尽可能避免使用它们，尽管它们也可以作为事件对象中的属性使用。

找到了一个使用 getProjection() 的示例，该示例有助于获取屏幕位置坐标。然而我的例子依赖于扩展谷歌的 OverlayView。我不确定是否有办法从地图本身获取投影。必须查一下。

```
MyOverlay.prototype = new google.maps.OverlayView();

var overlayProjection = this.getProjection();
var point = overlayProjection.fromLatLngToDivPixel(event.latLng);
point.x;
point.y; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T11:17:33.970

**这是mapview上的android拖放引脚的示例代码，[请参阅此](https://github.com/commonsguy/cw-advandroid)**

# android - 有关 Android 用户界面设计的书籍

> ID：11841709
> 
> 赞同：13
> 
> 时间：2012-08-07T08:09:42.723
> 
> 标签：android, android-layout, user-interface

在我看来，漂亮的用户界面对于应用程序的成功至关重要。

所以现在我正在搜索一本关于 Android 用户界面设计（充其量）的书，它不应该是关于技术实现的，比如如何创建菜单或使用不同的布局。它应该更多地关于设计理念。

官方文档： http: [//developer.android.com/design/index.html](http://developer.android.com/design/index.html)很好，但是太短了。我还找到了一本关于这个主题的书，但它直到 2013 年才出版。

因此，有关该主题的书籍的任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T08:21:00.877

看看这个链接，在这里你可以找到很好的教程和它的描述。

[http://mobile.tutsplus.com/tutorials/android/android-layout/](http://mobile.tutsplus.com/tutorials/android/android-layout/)

[关于 Android 和 Lanyrd 用户界面设计的会议报道](http://lanyrd.com/coverage/?topics=android,user-interface-design)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T15:17:23.730

[Juhani Lehtimaki's book](https://rads.stackoverflow.com/amzn/click/com/1118387287) seems to be the one you're looking for. He is the author of [Android UI Patterns](http://www.androiduipatterns.com/2012/06/emerging-ui-pattern-side-navigation.html) blog, but his book is not released yet (October).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T08:44:42.177

您还可以购买 Neil Davies 的新书 Android UI in action..这本书有很多关于 UI 和 UX 的精彩内容...查看： http: [//www.manning.com/davies/](http://www.manning.com/davies/)

# objective-c - 这个 NSString 会不再存在吗？

> ID：11841711
> 
> 赞同：0
> 
> 时间：2012-08-07T08:09:48.120
> 
> 标签：objective-c

```
 NSString *string=[temp objectAtIndex:row];
   [temp removeObjectAtIndex:row]; 
```

创建的对象`string`不再存在；我假设这种语法是直接赋值，因此`string`应该不再存在，对吧？

所以要么我用`stringWithFormat`从对象创建一个新字符串，要么发送`retain`到`string`安全的地方，这是正确的推理吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:19:32.243

假设您没有使用 ARC 或垃圾收集，是的，您关于对象内存管理的推理是正确的†。但是，您不想使用`stringWithFormat:`. 这需要一个格式字符串，如果你传递一些不是特别适合的东西，它可能会严重失败。您可以使用以下之一：

*   `stringWithString:`如果你不想要所有权

*   `copy`如果您只是想确保对字符串有一个安全的引用（`autorelease`如果您不打算长期保留该引用，则可以选择使用）

*   `retain`如果您确实想保留同一个对象——即使它是一个可变字符串——并且确实想要所有权（你可能不想要这个选项，因为主要区别`copy`在于字符串可能在你下面发生变异）

^(† 通过“正确”，我的意思是你是对的，你不应该对对象的生命周期做出任何假设。它可能还活着，但从技术上讲，这不是一个安全的假设。认为值得一提，因为有些人在这一点上并不是 100% 清楚。)

# java - 如何在 JScrollPane 对象中设置插图？

> ID：11841714
> 
> 赞同：5
> 
> 时间：2012-08-07T08:09:58.410
> 
> 标签：java, swing, jscrollpane, jtree, insets

我有只包含一个 JTree 实例的 JScrollPane。如何在 JScrollPane 内的 JTree 周围设置边距？

我有这样的代码

```
tree.setPreferredSize(new Dimension(200, 200));
    JScrollPane scrollerTree = new JScrollPane(tree, JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
    scrollerTree.setPreferredSize(new Dimension(200, 199));
    scrollerTree.getVerticalScrollBar().setUnitIncrement(16); 
```

我想实现，该边距可以使用滚动窗格内容滚动。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-07T08:15:45.597

**更新：**根据您更新的问题，我认为您实际上是在后 [`JComponent.setBorder`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#setBorder%28javax.swing.border.Border%29)，示例截图：

![截图边框](../Images/f8d6b20dee26f385b6b6e38c11334985.png)

代码：

```
public static void main(String[] args) {

    JTree tree = new JTree();
    tree.setBorder(BorderFactory.createEmptyBorder(20, 20, 20, 20));

    JFrame frame = new JFrame("Test");
    frame.add(new JScrollPane(tree));
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.pack();
    frame.setVisible(true);
} 
```

* * *

原始答案，如果您想在视口周围设置边框，请使用[`JScrollPane.setViewportBorder`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JScrollPane.html#setViewportBorder%28javax.swing.border.Border%29)：

![屏幕截图视口边框](../Images/bdd7432a7b35a8faaf236abec6f817d7.png)

代码：

```
public static void main(String[] args) {

    JScrollPane scroll = new JScrollPane(new JTree());
    scroll.setViewportBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));

    JFrame frame = new JFrame("Test");
    frame.add(scroll);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.pack();
    frame.setVisible(true);
} 
```

# ios - 创建 CGPathRef 的轮廓

> ID：11841717
> 
> 赞同：3
> 
> 时间：2012-08-07T08:10:07.683
> 
> 标签：ios, geometry, core-graphics, boolean-logic, cgpath

我有一个从 n 个重叠矩形创建的 CGPath。是否有 API 可以获取原始轮廓的新路径？或者是否可以通过填充原始路径或创建剪切路径来做一些聪明的事情？

如果失败了，您能否推荐一个可靠的参考（在线或书籍）来了解布尔路径操作背后的数学？

**编辑：为清楚起见添加了插图**

例如，4 个重叠的矩形：

![在此处输入图像描述](../Images/de8e166576b22e3b31d8119069fb09ba.png)

我想创建一个轮廓形状：

![在此处输入图像描述](../Images/721160eac64491b26564a7422bfb78d2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:24:19.993

如果您可以接受使用[Boost.org 库，那么](http://www.boost.org/)[Boost.geometry](http://www.boost.org/doc/libs/1_51_0/libs/geometry/doc/html/geometry/introduction.html)中有一个[联合](http://www.boost.org/doc/libs/1_51_0/libs/geometry/doc/html/geometry/reference/algorithms/union_.html)函数可以做到这一点。![在此处输入图像描述](../Images/283b2d7a284303d0149c66c3aabf82b5.png)

# facebook - 如何将 facebook 登录添加到我自己的网站？

> ID：11841725
> 
> 赞同：13
> 
> 时间：2012-08-07T08:10:41.683
> 
> 标签：facebook

Stackoverflow 使用不同的方式登录到他们的网站，例如使用 facebook 登录。

使用 facebook 社交插件（请参阅[社交插件](http://developers.facebook.com/docs/plugins/)），您可以添加点赞按钮或 facebook 登录。但是stackoverflow如何管理将facebook帐户与stackoverflow帐户连接起来？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-14T11:22:51.023

Facebook 社交插件：登录按钮 Facebook 提供了许多他们所谓的社交插件。我们感兴趣的是登录按钮。以下是将按钮放到您的网页上所涉及的基本步骤：

您的网站需要一个 Facebook 应用程序。转到[https://developers.facebook.com/apps/](https://developers.facebook.com/apps/)并单击“创建新应用”按钮。

您的“应用显示名称”可能是有意义的。我通常选择网站的域名。您将来也可以将同一应用程序用于其他目的。“应用程序命名空间”必须是不包含任何特殊字符的东西。我通常使用我的应用程序显示名称，没有空格、句点等。现在您需要输入您的“应用程序域”和网站“站点 URL”。对于应用程序域，输入您的站点所在的域名。对于站点 URL，请输入您网站的完整 URL。例如，如果您的域是 name.com，那么您的站点 URL 应该类似于[http://www.name.com](http://www.name.com). 输入正确信息后保存更改。现在您将有一个页面显示您的“App ID”和“App Secret”。只需将该页面保持打开状态，因为当您将登录按钮代码添加到您的页面时，您将需要您的应用 ID。现在我们需要从 Facebook 获取登录按钮代码。转到[http://developers.facebook.com/docs/reference/plugins/login/](http://developers.facebook.com/docs/reference/plugins/login/)并单击“获取代码”按钮。从第一个框中复制 HTML5 代码，现在将其放在网页正文选项卡的下方。代码应如下所示：

```
<div id="fb-root"></div>
<script>
   (function(d, s, id) {
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {
       return;
     }
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=APP_ID";
     fjs.parentNode.insertBefore(js, fjs);
   } (document, 'script', 'facebook-jssdk'));
</script> 
```

在代码中，请务必将 APP_ID 替换为您为 Facebook 应用创建的应用 ID。现在将第二个框中的代码粘贴到您希望登录按钮所在的任何位置。代码应类似于：

```
<div class="fb-login-button" data-show-faces="false" data-width="200" data-max-rows="1"></div> 
```

我将 data-show-faces 属性更改为 false，因为将其设置为 true 时，注销按钮将不会在用户登录时呈现。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T11:35:35.613

Facebook 登录插件只为您提供一种将用户登录到您的网站的方法。您必须自己链接到您的内部系统（就像 StackOverflow 一样）。这意味着根据 Facebook 用户的详细信息创建一个新的“用户”。

例如，如果您的网站使用电子邮件地址作为“用户名”，那么您必须要求 Facebook 用户提供他们的电子邮件地址或请求电子邮件地址权限。然后，您为用户创建一个新帐户并给他们一个随机密码。

您还必须更改登录流程，以便现有用户可以使用他们的电子邮件/密码或关联的 Facebook 帐户登录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-23T15:26:54.397

在应用注册和 fb sdk 下载后遵循此代码：

```
<?php
require_once('lib/Facebook/FacebookSession.php');
require_once('lib/Facebook/FacebookRequest.php');
require_once('lib/Facebook/FacebookResponse.php');
require_once('lib/Facebook/FacebookSDKException.php');
require_once('lib/Facebook/FacebookRequestException.php');
require_once('lib/Facebook/FacebookRedirectLoginHelper.php');
require_once('lib/Facebook/FacebookAuthorizationException.php');
require_once('lib/Facebook/GraphObject.php');
require_once('lib/Facebook/GraphUser.php');
require_once('lib/Facebook/GraphSessionInfo.php');
require_once('lib/Facebook/Entities/AccessToken.php');
require_once('lib/Facebook/HttpClients/FacebookCurl.php');
require_once('lib/Facebook/HttpClients/FacebookHttpable.php');
require_once('lib/Facebook/HttpClients/FacebookCurlHttpclient.php');

use Facebook\FacebookSession;
use Facebook\FacebookRedirectLoginHelper;
use Facebook\FacebookRequest;
use Facebook\FacebookResponse;
use Facebook\FacebookSDKException;
use Facebook\FacebookRequestException;
use Facebook\FacebookAuthorizationException;
use Facebook\GraphObject;
use Facebook\GraphUser;
use Facebook\GraphSessionInfo;

use Facebook\FacebookHttpable;
use Facebook\FacebookCurlHttpClient;
use Facebook\FacebookCurl;

session_start();
$app_id="";
$app_secret="";
$redirect_url="";
FacebookSession::setDefaultApplication($app_id,$app_secret);
$helper=new FacebookRedirectLoginHelper($redirect_url);
$sess=$helper->getSessionFromRedirect();
if(isset($sess)){
	$request=new FacebookRequest($sess,'GET','/me');
	$response=$request->execute();
	$graph=$response->getGraphObject(GraphUser::classname());
	$name=$graph->getName();
	echo 'hi $name';

}
else
{
	echo '<a href="'.$helper->getLoginUrl().'">Login with Facebook</a>';
}
```

# debugging - ubuntu代码块：警告：GDB：无法设置控制终端：不允许操作

> ID：11841727
> 
> 赞同：7
> 
> 时间：2012-08-07T08:10:44.477
> 
> 标签：debugging, ubuntu, codeblocks

ubuntu 版本：12.04
代码：blocks 10.04

当我调试我的程序时，IDE 输出

> “警告：GDB：设置控制终端失败：不允许操作”

# android - Android 触控对焦

> ID：11841731
> 
> 赞同：3
> 
> 时间：2012-08-07T08:10:56.157
> 
> 标签：android, camera

我正在尝试制作一个自定义相机应用程序，让用户触摸屏幕进行对焦而不是拍照。Android中是否有任何相关的API支持？

```
public void takePhoto(File photoFile, String workerName, int width, int height,   int        quality) {
if (getAutoFocusStatus()){
    camera.autoFocus(new AutoFocusCallback() {
        @Override
        public void onAutoFocus(boolean success, Camera camera) {
            camera.takePicture(shutterCallback, rawCallback, jpegCallback);
        }
    }); 
}else{
    camera.takePicture(shutterCallback, rawCallback, jpegCallback);
}

this.photoFile = photoFile;
this.workerName = workerName;
this.imageOutputWidth = width;
this.imageOutputHeight = height;
}

public void takePhoto(File photoFile, int width, int height, int quality) {
takePhoto(photoFile, null, width, height, quality);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-22T06:19:03.713

如果您不想拍照，请不要从自动对焦回调中调用 takepicture()。此外，如果您想关注用户触摸屏幕的点，您可以使用 setFocusAreas() 来设置焦点区域。

# android - 在 facebook 上从 android 上传照片

> ID：11841732
> 
> 赞同：-3
> 
> 时间：2012-08-07T08:11:17.360
> 
> 标签：android

我想将我的安卓应用程序中的照片上传到我朋友的墙上，时间线。请指导我从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:18:49.650

网上有很多这样的例子，即使你只是查看stackoverflow，你也会发现很多类似[的](https://stackoverflow.com/questions/3109283/android-upload-photo-to-facebook-with-facebook-android-sdk)问题

[这](https://developers.facebook.com/docs/mobile/android/build/)是一个教程，如果您希望您的应用程序做的不仅仅是上传照片，它将为您提供您需要了解的所有内容，从开始到结束，过程的每个步骤等等

# java - 将数据源作为字段传递时子报表不显示所有记录

> ID：11841733
> 
> 赞同：1
> 
> 时间：2012-08-07T08:11:20.217
> 
> 标签：java, jasper-reports

子报表未显示所有记录。

这是我的课：

```
Class ReportObject{

    private List <Student> students;
} 
```

子报表数据源表达式为：`$F{students}`

```
<dataSourceExpression><![CDATA[$F{students}]]></dataSourceExpression> 
```

在子报表 jrxml 中，我使用的是***`Student`***类成员。运行应用程序时，它只显示第一条记录，但学生列表有 8 条记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-10T16:51:45.217

我找到了解决方案，最初我在标题栏设计了子报告。我已将此子报告从标题栏移到详细信息部分，现在工作正常

# search - 在几个 hg 存储库中搜索源代码中的关键字（仅提示修订）？

> ID：11841734
> 
> 赞同：0
> 
> 时间：2012-08-07T08:11:31.780
> 
> 标签：search, mercurial, grep

我有多个 hg repos

现在我想从这些 repos 中所有提示修订的源代码中找到一个关键字。

这就像`grep keyword hg_dir`但仅限于 hg`tip`修订文件。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:15:05.057

好吧，我自己找到了一种方法，虽然不完美，但很有效。

```
for dir in ./*;
  do
  hg grep keyword .
done; 
```

但是，您无法使用`hg grep -r tip`.

你不能使用 grep 的选项，比如`-A`or `-B`。

# javascript - 在 JS 中用 HAML 替换复杂的 ERB 失败

> ID：11841736
> 
> 赞同：0
> 
> 时间：2012-08-07T08:11:35.927
> 
> 标签：javascript, ruby-on-rails-3, syntax, haml, erb

我用 HAML 替换了我的 ERB 文件，效果很好。但是，我有一些复杂的混合 javascript 和 erb 代码，在转换为 haml 时会失败。我知道绕过 haml 的 ":plain" 选项，但是当我使用下面的代码执行此操作时，erb 代码只是打印为文本，而不是解释。各位有什么解决办法吗？

在 JS 中用 HAML 替换 ERB 失败

```
 - if (@active == "tasks")
    :plain
      $('#content_output').html("<div class='content_title task'></div><h3><%= I18n.t :task_all %></h3><%= escape_javascript(render('tasks/all_tasks', :tasks => @contact_tasks, :layout => 'normal')) %></div>");
      $('#content_input').html("<div class='content_title task'></div><h3><%= I18n.t :task_new_title %></h3><%= escape_javascript(render('tasks/new_task')) %></div>");
      $('a#tasks_tab').addClass('active'); 
```

这是原始的 js.erb 代码：

```
 <% if (@active == "tasks") %>
        $('#content_output').html("<div class='content_title task'></div><h3><%= I18n.t :task_all %></h3><%= escape_javascript(render('tasks/all_tasks', :tasks => @contact_tasks, :layout => 'normal')) %></div>");
        $('#content_input').html("<div class='content_title task'></div><h3><%= I18n.t :task_new_title %></h3><%= escape_javascript(render('tasks/new_task')) %></div>");
        $('a#tasks_tab').addClass('active');
    <% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:09:26.093

假设您的文件扩展名为**js.haml**，我认为您需要做的就是将您的`<%= ... %>`标签更改为标准字符串插值标签`#{ ... }`：

```
- if (@active == "tasks")
  :plain
    $('#content_output').html("<div class='content_title task'></div><h3>#{I18n.t :task_all}</h3>#{escape_javascript(render('tasks/all_tasks', :tasks => @contact_tasks, :layout => 'normal'))}</div>");
    $('#content_input').html("<div class='content_title task'></div><h3>#{I18n.t :task_new_title}</h3>#{escape_javascript(render('tasks/new_task'))}</div>");
    $('a#tasks_tab').addClass('active'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:17:25.907

尝试使用`:javascript`而不是`:plain`

顺便说一句，在 Rails 3 中，您应该使用不显眼的 javascript (UJS)。查看一些教程：[http ://railscasts.com/episodes/205-unobtrusive-javascript](http://railscasts.com/episodes/205-unobtrusive-javascript)

# r - quantmod ttr getSymbol & 引号硬编码

> ID：11841739
> 
> 赞同：0
> 
> 时间：2012-08-07T08:11:49.353
> 
> 标签：r, quantmod, rserve

我是 R 编程的新手，现在正在开发一个可以与 R 交互的系统。**我的问题是：**

如何从脚本中的硬编码而不是从“雅虎”“谷歌”等各种来源获取报价？

**为什么我需要在脚本中硬编码引号？**

我使用 Rserve 作为我的下游系统，主系统会获取数据并执行其他投资组合检查，然后调用`R-TTR-quantmod`包以计算财务数字。所以我不希望 R 重新获取这些引号，所以我希望引号被硬编码并从我的系统发送到`Rserve`它被执行的地方并从那里返回结果。这样我的代码将依赖于 R 的标准计算，用户可以专注于其他业务逻辑。

**为什么我不使用 csv 文件方法？**

我在一个实时系统中，文件 io 会花费大量时间并且会减慢我的系统速度。

例如：

```
library(quantmod)

library(TTR) 
```

*从 Yahoo! 中提取 S&P500 指数数据 金融*

```
getSymbols("^RIL", from="2000-01-01", to="2008-12-07") 
```

*计算 RSI 指标*

```
rsi <- RSI(Cl(RIL),2) 
```

所以这就是我需要的：

*   而不是调用`getSymbol`我想将数据作为脚本中的变量传递。
*   我假设数据有时可能非常大或有时非常小。
*   那么在这种情况下我应该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T00:16:26.827

我一直在编写一些代码来使用加载/保存来缓存 xts 对象。代码很简单：

```
getSymbols("^RIL", from="2000-01-01", to="2008-12-07")
save(RIL,file="cache/RIL.rdata") 
```

然后在您进行分析的其他脚本中：

```
load("cache/RIL.rdata")
rsi <- RSI(Cl(RIL),2) 
```

作为额外的奖励，.rdata 文件被压缩。

一些统计数据： 图表 1

我以前的方法有 1 分钟的条形图，每天一个 csv 文件。303 个文件，总计 12MB，加载到 86,590 行 XTS 对象中花费了 5.64 秒（经过；用户时间为 5.34 秒）。

.rdata 文件为 2.8MB，耗时 0.056 秒。

图表 2：

第一种方法：在数据上重新运行 RSI（作为另一个计算的前导）。第二种方法：让另一个离线进程对数据运行 RSI，并将其缓存到 .rdata 文件中。

加载 RSI 文件比重新计算 RSI 数据快 3 倍。

警告：在我的计时测试中，我使用了一个循环，它在第 1 遍时创建/保存，然后在第 2 到 20 遍时加载。我正在计时的是后一种加载。所以它在任何操作系统文件缓存中都是新鲜的。

# facebook - facebook登录后，检索用户的facebook地址？

> ID：11841742
> 
> 赞同：0
> 
> 时间：2012-08-07T08:11:51.803
> 
> 标签：facebook

我正在尝试将 facebook 登录用于我网站的校友追踪器。我现在想做的是能够检索用户的 facebook 个人资料地址，我该怎么做？我打算做的是列出所有带有链接的名称，这样当单击链接时，它将转到用户个人资料。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:31:55.373

您始终可以链接到`www.facebook.com/{userid}`.

或者您可以首先检查用户是否设置了用户名 [1]，然后仅链接到`www.facebook.com/{username}`- 如果您希望链接看起来“更漂亮”。`www.facebook.com/zuck`也许看起来会更好一些`www.facebook.com/4`——但数字 id 链接总是会自动重定向到带有用户名的版本。

[1] AFAIK 现在每个人都有一个用户名设置——如果用户自己没有明确设置一个，Facebook 会根据他们的名字/姓氏组合组成一个。

# ruby-on-rails-3 - Postgres：重构为模式

> ID：11841748
> 
> 赞同：1
> 
> 时间：2012-08-07T08:12:10.047
> 
> 标签：ruby-on-rails-3, postgresql, activerecord, multi-tenant

我有一个基于 Rails 3.2 多租户子域的应用程序，我正在尝试迁移到 PostgreSQL 的模式（每个帐户都有自己的模式——现在所有帐户都使用相同的表）。

所以，我想我需要：

1.  创建一个新的数据库
2.  为每个帐户（其 id）及其下的表创建一个模式
3.  获取属于每个帐户的所有数据，并将其插入到该帐户架构下的新数据库中

这听起来正确吗？如果是这样，这样做的好方法是什么？我是否应该编写一个使用 ActiveRecord 的 ruby​​ 脚本，提取数据，然后将其插入（效率很低，但应该完成工作）到新数据库中？或者 Postgres 是否提供了很好的工具来做这样的事情？

编辑：

正如 Craig 建议的那样，我在现有数据库中创建了模式。然后，我在 Rake 任务中遍历所有帐户，并使用以下内容复制数据：

```
Account.all.each do |account|

  PgTools.set_search_path account.id, false
  sql = %{INSERT INTO tags SELECT DISTINCT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."tagger_id" = #{admin.id} AND "taggings"."tagger_type" = 'User'}
  ActiveRecord::Base.connection.execute sql

  #more such commands

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T23:33:15.870

我会亲自使用 SQL 进行转换。

在与当前数据库相同的数据库中创建新模式以便于迁移，因为您无法使用 PostgreSQL 轻松跨数据库查询。

`INSERT INTO ... SELECT`使用适当的查询迁移数据。要做到这一点而不必禁用任何外键，您应该构建数据的依赖关系图。首先将数据复制到不依赖于任何内容的表中，然后复制到依赖于它们的表中，依此类推。

您需要为每个客户模式重复此操作，因此请考虑创建一个使用`EXECUTE ...`动态 SQL 的 PL/PgSQL 函数来：

*   为客户创建架构
*   在架构中创建表
*   通过循环硬编码的表名数组以正确的顺序复制数据，执行以下操作：

    ```
    EXECUTE `'INSERT INTO '||quote_ident(newschema)||'.'||quote_ident(tablename)||' SELECT * FROM oldschema.'||quote_ident(tablename)||' WHERE customer_id = '||quote_literal(customer_id)'||;' 
    ```

    其中`newschema`和是 PL `tablename`/ `customer_id`PgSQL 变量。

然后，您可以从 SQL 调用该函数。虽然您可以这样做`select convert_customer(c.id) FROM customer GROUP BY c.id`，但我可能会从外部控制脚本中进行，这样每个客户的工作都可以单独完成并提交，如果倒数第二个客户转换失败，则无需从头开始。

对于额外的疯狂点，甚至可以在主要客户模式的表上定义触发器，将更改复制到已经迁移的客户到新模式中的数据副本，这样他们就可以在迁移期间继续使用系统。我会避免这种情况，除非迁移太大而无法在没有停机的情况下进行，因为测试将是一场噩梦，并且您仍然需要触发器在迁移时通过客户 id *x引发错误**x* ' s 数据实际上正在进行中，因此它不会完全透明。

如果您为不同的客户使用不同的登录用户（强烈推荐），您的功能还可以：

*   `REVOKE`架构上的权限来自`public`
*   `GRANT`将使用它的用户或角色对架构的有限权限
*   `REVOKE`对创建的每个表的公共权限
*   `GRANT`用户和角色对每个表的期望有限权限
*   `GRANT`在这些表使用的任何序列上。即使序列是由`SERIAL`伪列创建的，这也是必需的。

这样，您的所有权限都是一致的，您以后不需要去更改它们。请记住，您的 webapp*永远*不应以超级用户身份登录。

# javascript - underscore.js .map 方法破坏了 ie8

> ID：11841754
> 
> 赞同：0
> 
> 时间：2012-08-07T08:12:30.537
> 
> 标签：javascript, json, backbone.js, internet-explorer-8, underscore.js

我使用backbone.js，此代码适用于除Internet Explorer 之外的所有现代浏览器。

```
var posts = postList.map(function(model){ return model.toJSON(); }); 
```

toJSON() 方法有问题，我该怎么办？

**编辑：**

```
var posts = postList.map(function(model){ return model }); 
```

没有 toJSON()，仍然无法正常工作，也许 .map 方法是有罪的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:57:00.297

我找到了解决方案：

```
var posts = _.map(postsList, function(model) { return model; }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T08:25:44.070

该`toJSON`方法是在 JavaScript 1.8.5 中引入的。

对于没有 JavaScript 1.8.5 的浏览器，您可以使用 Douglas Crockford 的 polyfill 脚本。

[https://github.com/douglascrockford/JSON-js](https://github.com/douglascrockford/JSON-js)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-21T15:11:58.280

对我来说，在 ie8 上，答案原来是 _.map@1.7.0 正在迭代对象中的所有属性（是`postslist`哈希？），包括继承的 Object.prototype.toString 方法。这导致发送到服务器的帖子如下所示：

```
{ a:1,b:2, /* ... */ toString:'function(){ [native code] }'} 
```

带有一些无关的换行符回车符。添加其中，导致服务器阻塞。

# asp.net - Windows Azure 版本向后

> ID：11841758
> 
> 赞同：0
> 
> 时间：2012-08-07T08:12:36.253
> 
> 标签：asp.net, web-services, azure

今天，我检查了我的 windows azure 网站（使用 web 服务构建），版本与昨天不一样。很奇怪，好像那个版本倒退了。所以我把我的项目放在 VS 中并重新上传。然后就好了

我很害怕，这是一种正常的行为，我认为不是。但是如何阻止这种行为。如果我记得很清楚，这不是我的项目第一次发生这种情况。

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:29:59.017

在内部，如果 Azure 内部出现任何问题，Azure 的本质就是删除麻烦的虚拟机并使用我们在应用程序部署期间通过 Azure 门户或直接通过 Visual Studio 上传的“cspkg”文件部署新的虚拟机。如果您通过 RDP 对已部署的应用程序进行任何更改，则无法保证应用程序将保留更改。

此外，如果您再次遇到这种情况，最好联系[Microsoft 支持](https://support.microsoft.com/oas/default.aspx?gprid=14928&st=1&wfxredirect=1&sd=gn&ln=en-us)，他们应该会帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:31:05.983

以下是 Microsoft 支持的解释：
使用 Web Deploy 所做的任何更改都是临时的。它只能用于开发和测试，不能用于更新生产中的应用程序。当角色实例重新启动时，更改将消失。我们建议您通过从管理门户上传包文件或在部署时禁用 WebDeploy 来升级部署。
您可以在此处阅读有关 Web 部署的更多信息[http://blogs.msdn.com/b/cloud/archive/2011/04/19/enabling-web-deploy-for-windows-azure-web-roles-with-visual-工作室.aspx](http://blogs.msdn.com/b/cloud/archive/2011/04/19/enabling-web-deploy-for-windows-azure-web-roles-with-visual-studio.aspx)。

# ldap - 浏览 wso2 身份服务器的内部 ldap

> ID：11841761
> 
> 赞同：0
> 
> 时间：2012-08-07T08:12:40.743
> 
> 标签：ldap, wso2

由于 LDAP 客户端，我正在尝试浏览 WSO2 Identity Server 的嵌入式 ldap 服务器。我没有更改默认配置，并以 uid=admin,ou=Users,dc=wso2,dc=org 的身份成功连接。但是，由于 WSO2 IS 控制台，我没有看到我创建的其他用户。

我在哪里以及如何查看用户是如何存储在嵌入式 ldap 服务器中的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:36:29.457

使用`ldapsearch`命令行工具或[LDAP 浏览器](http://directory.apache.org/studio/)。

### 也可以看看

*   [使用 ldapsearch](http://ff1959.wordpress.com/2011/07/27/mastering-ldapsearch/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T17:09:24.757

在默认配置下，WSO2 Identity Server 使用用户 uid=admin,ou=system 连接到嵌入式 LDAP 服务器。并且，用户将在 ou=Users,dc=wso2,dc=org 中创建，组将在 ou=Groups,dc=wso2,dc=org 中创建。

您是否创建了用户 uid=admin,ou=Users,dc=wso2,dc=org ？

# asp.net - 在中继器的最后一行找到一个下拉控件

> ID：11841770
> 
> 赞同：0
> 
> 时间：2012-08-07T08:13:04.950
> 
> 标签：asp.net, c#-4.0

我想隐藏中继器控件最后一行的下拉菜单。我使用了以下代码，但无法隐藏下拉菜单。

```
 <asp:Repeater ID="RpFilter" runat="server" OnItemDataBound="rpFilter_DataBound">
<HeaderTemplate>
<table style=" border:1px solid #df5015; width:500px" cellpadding="0">
<tr style="background-color:#df5015; color:White">
<td colspan="2">
<b>Advanced Filter</b>
</td>
</tr>
</HeaderTemplate>
<ItemTemplate>
<table style="background-color:#EBEFF0;border-top:1px dotted #df5015; width:500px" >
<tr>
<td>
<asp:Label ID="lblField" runat="server" Text='<%# Eval("COLUMN_NAME")%>' Font-Bold="true"/>
</td>
<td>
<asp:DropDownList ID="ddlCondition" runat="server">
<asp:ListItem Text="Equals" Value="Equals"></asp:ListItem>
<asp:ListItem Text="Not Equals" Value="Not Equals"></asp:ListItem>
<asp:ListItem Text="Less Than" Value="Less Than"></asp:ListItem>
<asp:ListItem Text="Greater Than" Value="Greater Than"></asp:ListItem>
</asp:DropDownList>
</td>
<td>
<asp:TextBox ID="txtsearch" runat="server"></asp:TextBox>
</td>
<td>
<asp:DropDownList ID="ddlOperator" runat="server">
<asp:ListItem Text="AND" Value="AND"></asp:ListItem>
<asp:ListItem Text="OR" Value="OR"></asp:ListItem>
</asp:DropDownList>
</td>
</tr>
</table>
</ItemTemplate>
<FooterTemplate>
<asp:Button ID="btnClose" runat="server" Text="Close"                
 class="fancybox-close" OnClick="btnCloseMsg_Click" />
<asp:Button ID="btnSearch" runat="server" Text="Search"                
 class="fancybox-close" OnClick="btnSearch_Click" />

</FooterTemplate>
</asp:Repeater> 
```

后面的代码：

```
 protected void rpFilter_DataBound(object sender, RepeaterItemEventArgs e)
    {
        if (e.Item.ItemType == ListItemType.Item || 
        e.Item.ItemType == ListItemType.AlternatingItem)

        {
            if (e.Item.ItemIndex == RpFilter.Items.Count - 1)
            {
                DropDownList Operator = (DropDownList)e.Item.FindControl("ddlOperator");
                Operator.Visible = false;
            }
        }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:15:03.963

您需要在数据绑定后执行此操作。在`rpFilter_DataBound`事件中，当前行始终是最后一行，*在那个时刻*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:23:27.763

我认为没有必要使用条件

```
 if (e.Item.ItemIndex == RpFilter.Items.Count - 1) 
```

你的代码应该是

```
protected void rpFilter_DataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || 
    e.Item.ItemType == ListItemType.AlternatingItem)

    {

            DropDownList Operator = (DropDownList)e.Item.FindControl("ddlOperator");
            Operator.Visible = false;

    } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T09:05:35.973

我通过在 prerender 事件中使用它来解决它

```
protected void rpFilter_PreRender(object sender, EventArgs e)
{
    Repeater RpFilter = (Repeater)FindControl("RpFilter");

    foreach (RepeaterItem item in RpFilter.Items)
    {
        if (RpFilter.Items.Count > 0)
        {
            RepeaterItem rptItem = RpFilter.Items[RpFilter.Items.Count - 1];

            DropDownList ddlOperator = (DropDownList)rptItem.FindControl("ddlOperator");
            ddlOperator.Visible = false;
        }
    } 
```

}

谢谢大家

# javascript - 页面刷新后保留 JavaScript 变量值？

> ID：11841771
> 
> 赞同：18
> 
> 时间：2012-08-07T08:13:14.513
> 
> 标签：javascript, jquery

我正在处理一个项目，其中变量被分配了一个值，我在刷新浏览器时需要该值。有什么方法可以获取该值？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-07T08:33:15.123

**饼干**

最好的解决方案是使用*cookie*。cookie，也称为 HTTP cookie、网络 cookie 或浏览器 cookie，通常是在用户浏览网站（来自维基百科）时从网站发送并存储在用户网络浏览器中的一小段数据。

使用 cookie，您可以保存*状态*，然后读取并使用它。

使用 jQuery，使用 cookie 非常容易。

设置：

```
$.cookie("var", "10"); 
```

要得到：

```
$.cookie("var") 
```

删除：

```
$.cookie("var", null); 
```

**本地存储**

当你想在本地保存大量数据时，你还有另一个机会——使用本地存储（从 HTML5 开始）。您可以直接使用 JavaScript 或使用可用的 jQuery 插件之一来完成。

例如，使用`totalStorage`：

```
var scores = new Array();
scores.push({'name':'A', points:10});
scores.push({'name':'B', points:20});
scores.push({'name':'C', points:0});
$.totalStorage('scores', scores); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T08:14:56.727

您可以将该值放在 cookie 中。

替代品的完整列表是

*   标准 HTTP cookie
*   本地共享对象（Flash cookie）
*   Silverlight 隔离存储
*   使用 HTML5 Canvas ag 将 cookie 存储在自动生成、强制缓存的 PNG 的 RGB 值中以读取像素（cookie）
*   在网络历史记录中存储 cookie
*   在 HTTP ETag 中存储 cookie
*   在 Web 缓存中存储 cookie
*   window.name 缓存
*   Internet Explorer 用户数据存储
*   HTML5 会话存储
*   HTML5 本地存储
*   HTML5 全局存储
*   通过 SQLite 进行 HTML5 数据库存储

[永远饼干](http://en.wikipedia.org/wiki/Evercookie)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T08:14:46.627

您可以将其存储在 cookie 中。如果浏览器支持，或者使用本地存储。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-07T08:17:26.147

您可以使用`$.cookie("key", value)`设置值，并`$.cookie("key")`获取保存的值。

**编辑：**关于如何在 jQuery 中使用 cookie 的小教程：[http ://www.electrictoolbox.com/jquery-cookies/](http://www.electrictoolbox.com/jquery-cookies/)

# ios - 检测输入到 UITextfield 的亚洲语言的 unicode 字符

> ID：11841777
> 
> 赞同：0
> 
> 时间：2012-08-07T08:14:07.460
> 
> 标签：ios, encoding, nsstring, uitextfield, char

iOS 的消息应用程序会根据输入语言检测用户是否输入了 unicode 字符。如果您更改为任何一种亚洲语言，您会看到要写入的最大字符数限制为 70 而不是 160。同时，如果您输入一个也被编码为 un​​icode 的笑脸，它只需要 2 个字符值。我的问题是如何检测将我的最大消息长度限制为 70 的 unicode 字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:38:14.350

要检测键盘的当前语言，请参阅此处 [检测输入到 UITextfield 的亚洲语言的 unicode 字符](https://stackoverflow.com/questions/11841777/detecting-unicode-chars-of-asian-languages-typed-to-uitextfield)

对于动态计算，将字符串转换为 nsdata 并查找大小应该可以工作。

```
NSLog(@"%i", [@"a" dataUsingEncoding:NSUTF8StringEncoding].length); 
```

给我 1

```
NSLog(@"%i", [@"aa" dataUsingEncoding:NSUTF8StringEncoding].length); 
```

给我 2

```
NSLog(@"%i", [@"aö" dataUsingEncoding:NSUTF8StringEncoding].length); 
```

给我 3

```
NSLog(@"%i", [@"草" dataUsingEncoding:NSUTF8StringEncoding].length); 
```

给我 3

编辑：

占用 1 个空格是什么意思？来自[http://en.wikipedia.org/wiki/UTF-8](http://en.wikipedia.org/wiki/UTF-8)

前 128 个字符（US-ASCII）需要一个字节。接下来的 1,920 个字符需要两个字节来编码。这涵盖了几乎所有源自拉丁语的字母表的其余部分，以及希腊语、西里尔语、科普特语、亚美尼亚语、希伯来语、阿拉伯语、叙利亚语和塔纳语字母，以及组合变音符号。基本多语言平面的其余部分（其中包含几乎所有常用字符）中的字符需要三个字节。Unicode 其他平面中的字符需要四个字节，其中包括不太常见的 CJK 字符和各种历史脚本和数学符号。

如果它们包含来自特定 unicode 集的任何字符，您可以像这样检查您的字符串

> NSRange 范围 = NSMakeRange(256, range.length -1);

```
NSLog(@"%i", [@"ı" rangeOfCharacterFromSet:[NSCharacterSet
                                            characterSetWithRange:range]].location == NSNotFound);
NSLog(@"%i", [@"ö" rangeOfCharacterFromSet:[NSCharacterSet
                                            characterSetWithRange:range]].location == NSNotFound);
NSLog(@"%i", [@"ab" rangeOfCharacterFromSet:[NSCharacterSet
                                            characterSetWithRange:range]].location == NSNotFound); 
```

# javascript - JS 为幻灯片创建与 WP 的冲突

> ID：11841779
> 
> 赞同：0
> 
> 时间：2012-08-07T08:14:12.887
> 
> 标签：javascript, wordpress

我遇到了一个希望嵌入 WP 标头的 javascript 幻灯片的问题。

这是设计并可以使用的幻灯片： http: [//coachjoelleinc.com/wp-content/themes/32950/rotator/test.html](http://coachjoelleinc.com/wp-content/themes/32950/rotator/test.html)

这就是我想嵌入它的地方： http: [//coachjoelleinc.com/index_real.php/](http://coachjoelleinc.com/index_real.php/)

在旧版本的 Firefox 中，它会禁用其他插件，例如导航。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:42:05.637

对我来说它在 Chrome 中看起来不错，但旧版浏览器的问题可能是由于您两次加载了 jQuery 库造成的。Wordpress 正在加载它附带的版本（1.7.2），但在加载 1.5.1 版本之前 - 可能是通过您的主题的 header.php 而不是插件，该文件位于主题目录中。

请记住，您必须在加载所有依赖它的脚本之前加载 jQuery，因此如果您删除首先加载的旧版本，您需要确保移动其他依赖脚本加载，以便在加载了较新版本的 jQuery 库。

有多种方法可以做到这一点——您可以将它们排入functions.php 中，或者将这些脚本移动到页脚中。一个快速的谷歌提供了[Codex Javascript 指南](http://codex.wordpress.org/Using_Javascript)以及一些[在 Wordpress 中包含 JS 的示例](http://scribu.net/wordpress/optimal-script-loading.html)

# excel - 如何根据excel中另一列可用的字符串在一列中添加字符串

> ID：11841780
> 
> 赞同：0
> 
> 时间：2012-08-07T08:14:17.167
> 
> 标签：excel, excel-2007

我在excel中有2列。假设 F 列的值为 abc、cde agh、cde ghl、cde gjh dhjf、sklad

并且 H 列有一些字符串，如 ad 、 dh bc 、 ds csd fds dsf

我的问题是，如果 F 的相应行找到字符串“cde”，如何在 H 的相应行中添加字符串“abhi”。

例如，如果 F1 有 cde 字符串，则在 H1 行中添加字符串“abhi”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:06:46.830

这是使用公式但额外列的简单解决方案：

在 J 列（从单元格 开始`J1`）中，使用以下公式：

```
=H1 & IF(NOT(ISERROR(FIND("cde",F1))), "abhi", "") 
```

# c++ - 如何将浮点值分配给 char* c[] 数组

> ID：11841782
> 
> 赞同：-1
> 
> 时间：2012-08-07T08:14:21.790
> 
> 标签：c++, c

我有字符串、整数、浮点值，并试图将这些值分配给 char* c[] 数组，就像这样。

```
char *str = "helloo";
int int = 1000;
short st1[]={32760};
float flt = 2.345; 
char*  c [] = {(char*)int1,(char*)str,(char*)flt,(char*)st1}; 
```

但是对于浮点数**从 'float' 到 'char *' 的非法显式转换，** 有人告诉我如何分配吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:20:05.847

您不能只*转换*这些类型并期望获得有用的结果。强制转换是一种最小操作，可以以某些预定义的方式转换数据，但它不会（例如）智能地将整数转换为其字符串表示形式。

这就是您的编译器抱怨的原因。

如果您想要数字数据的字符串表示，则必须以不同的方式转换它们，例如：

```
char intStr[30]
sprintf (intStr, "%d", int1); 
```

如果您希望获得所有这些字符串的表示形式，您可以执行以下操作：

```
char *str = "helloo";
int int1 = 1000;
short st1[]={32760};
float flt = 2.345; 

char mybuff1[50], mybuff2[50], mybuff3[50], mybuff4[50];
sprintf (mybuff1, "%d", int1);
sprintf (mybuff2, "%s", str);
sprintf (mybuff3, "%f", flt);
sprintf (mybuff4, "%d", st1[0]);

char *c [] = {mybuff1, mybuff2, mybuff3, mybuff4); 
```

* * *

请注意，尽管 C 和 C++ 具有非常相似的习语，并且如果您坚持使用子集，它们大多是兼容的，但它们*不是*同一种语言，并且根据您使用的实际语言，做某事的最佳方式会发生巨大变化。

例如，很少需要在 C++ 中使用 C 风格的字符串，因为该语言提供了令人印象深刻的真实字符串类型。同样适用`malloc/free`于相对`new/delete`和许多其他方面。

问题通常应标记为 C 或 C++，很少同时标记。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T08:18:40.703

在 C++ 中：

```
#include <string>

std::string arr[] = { std::to_string(1000),
                      "helloo",
                      std::to_string(2.345f),
                      std::to_string(32760)    }; 
```

你可以使用`arr[0].c_str()`etc. 来取回`char const *`s。

# java - org.eclipse.jdt.core.dom.ASTNode 的孩子

> ID：11841789
> 
> 赞同：6
> 
> 时间：2012-08-07T08:15:00.690
> 
> 标签：java, eclipse, eclipse-jdt

使用 Eclise JDT，我需要检索任何 ASTNode 的子节点。我可以在某处使用实用方法吗？

我现在能想到的唯一方法是继承 ASTVisitor 并手动处理每种节点以找到它的子节点。但是要研究每种节点类型需要做很多工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T20:05:00.453

我将从查看[ASTView Plugin](http://www.eclipse.org/jdt/ui/astview/index.php)的来源开始，因为它也做同样的事情。

基于中的代码

*   org.eclipse.jdt.astview.views.ASTViewContentProvider.getNodeChildren(ASTNode)
*   org.eclipse.jdt.astview.views.NodeProperty.getChildren()

所需的代码应该是这样的

```
public Object[] getChildren(ASTNode node) {
    List list= node.structuralPropertiesForType();
    for (int i= 0; i < list.size(); i++) {
        StructuralPropertyDescriptor curr= (StructuralPropertyDescriptor) list.get(i);
            Object child= node.getStructuralProperty(curr);
        if (child instanceof List) {
                return ((List) child).toArray();
        } else if (child instanceof ASTNode) {
            return new Object[] { child };
            }
        return new Object[0];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-30T12:23:13.167

我们可以使用以下 API 将子节点检索为 ASTNode 列表：

```
ASTNode.getStructureProperty(StructuralPropertyDescriptor property) 
```

它返回此节点的给定结构属性的值。返回的值取决于属性的类型：

```
SimplePropertyDescriptor - the value of the given simple property, or null if none; primitive values are "boxed"
ChildPropertyDescriptor - the child node (type ASTNode), or null if none
ChildListPropertyDescriptor - the list (element type: ASTNode) 
```

但是，`ChildListPropertyDescripor`不打算由客户端实例化。您可以参考我的代码来获取孩子的列表：

```
public static List<ASTNode> getChildren(ASTNode node) {
    List<ASTNode> children = new ArrayList<ASTNode>();
    List list = node.structuralPropertiesForType();
    for (int i = 0; i < list.size(); i++) {
        Object child = node.getStructuralProperty((StructuralPropertyDescriptor)list.get(i));
        if (child instanceof ASTNode) {
            children.add((ASTNode) child);
        }
    }
    return children;
} 
```

# jquery - 如何在 jquery 和 css 中使 div 层不可选择

> ID：11841790
> 
> 赞同：0
> 
> 时间：2012-08-07T08:15:02.517
> 
> 标签：jquery, css

我有一个 div 元素如下：

```
 <div id="wrapper">Content......</div> 
```

我从 ajax 调用中获取了这个 div 层的内容。我想要做的是我想让该 div 不可点击、不可选择、可见性降低，并在该 div 顶部显示加载图像。我怎样才能做到这一点？任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:16:39.380

CSS就是你所需要的。

```
user-select: none;
-moz-user-select: none;
-khtml-user-select: none; 
```

对于中心 div 上方的加载图像：

CSS：

```
#loading_spinner {
  position:absolute;
  width:20px;
  height:20px;
  background:url('image/path');
  display:none;
  z-index: 1000;
} 
```

jQuery：

```
var target = $('#target'); // or this

$('body').append('<div id="loading"></div>');
$('#loading').css({
  left: ($(target).offset().left + $(target).outerWidth()/2) - ($(this).outerWidth()/2),
  top: ($(target).offset().top + $(target).outerHeight()/2) - ($(this).outerHeight()/2),
  display: 'block'
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T08:19:30.090

你可以去一个 jquery 包： http: [//www.malsup.com/jquery/block/](http://www.malsup.com/jquery/block/)

有了这个，您可以在加载时呈现内容不可选择，并在其上添加加载图像。这是插件支持的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T08:20:05.553

在“内容...”上方仅使用 CSS 加载图像。

**HTML**

```
<div id="wrapper"><img id="LoadingImage" src=""/><span id="content">Content......</span></div> 
```

**风格**

```
#wrapper{position:relative;}
#LoadingImage{position:absolute; z-index:2; left:0px; top:0px; opacity:0.5;}
#content{position:absolute; z-index:1; left:0px; top:0px;} 
```

# html - 填充此窗口的顶部？

> ID：11841793
> 
> 赞同：0
> 
> 时间：2012-08-07T08:15:14.707
> 
> 标签：html, css

我有一个看起来像这样的弹出窗口 ![在此处输入图像描述](../Images/1258059796300816f72d45deb01880cd.png)

现在我想在颜色为绿色的顶部显示“Sök efter ärende”以一直延伸到窗口，以便用于关闭窗口的 X 就在最右边。我尝试将 colspan 设置为更大的值，但这不起作用。你知道我能做什么吗？这是我的窗口 HTML

```
<div class="popup" id="popupF" 
            style="display: none;" >

<table width="100%" border="0" cellspacing="0" cellpadding="2"
    align="center" class="TB_nb">
    <tr>
        <td colspan="3" class="pusher TB_nb"><h2>Sök efter ärende</h2>
        </td>
        <td><a href="javascript:void(0)"
            onclick="document.getElementById('popupF').style.display = 'none';">X</a>
        </td>
    </tr>
</table>
<br>
<br>
<h2 class="pusher">Sök efter ärende</h2>
<div id="FVsok">

    <div
        style="text-align: right; width: 100%; padding-right: 5%; padding-top: 5px;">
        <span
            onClick="getElementById('FsokF').style.display='', getElementById('FbottomA').style.display='none', getElementById('FbottomV').style.display='', getElementById('FVsok').style.display='none'"
            class="link_sm">Visa s&ouml;kformul&auml;r</span>
    </div>

</div>

<div id="FsokF">

    <div
        style="text-align: right; width: 100%; padding-right: 5%; padding-top: 5px;; padding-bottom: 5px;">
        <span
            onClick="getElementById('FsokF').style.display='none', getElementById('FbottomA').style.display='none', getElementById('FbottomV').style.display='', getElementById('FVsok').style.display=''"
            class="link_sm">D&ouml;lj s&ouml;kformul&auml;r</span>
    </div>

    <div style="width: 100%; margin-left: 15px; margin-right: 80px;"
        class="fontS80">

        <div class="fl30">&nbsp;S&ouml;k efter ärende</div>
        <div class="clear"></div>
        <div class="fl30">
            <input type="text" size="60"
                name="searchArende">
        </div>
        <div class="clear"></div>

        <div class="fl30">
            <input type="button" value="Avbryt">
        </div>
        <div class="fl10">
            <input type="button" value="  S&ouml;k  "
                onclick="javascript:doSubmit('Arendesokning', 'search')">
        </div>
        <div class="clear">&nbsp;</div>
    </div>

</div>
<div style="width: 100%; margin-left: 15px; margin-right: 15px;">
    <table width="100%" border="0" cellspacing="0" cellpadding="4"
        align="center">
        <tr>
            <td><h3>Sökresultat:</h3>
            </td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td colspan="4">En massa text <span class="link">Hj&auml;lp!</span>
            </td>
        </tr>
        <tr>
            <td><input type="button" value="Visa alla">
            </td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>

        <tr class="smallb">
            <td>Antal &auml;renden: 0</td>
            <td>&nbsp;</td>
            <td>Visa &auml;renden: <a class="link"
                href="javascript:doSubmit('MenyNavigation', 'REW_includes/fullfoljd_fran_sok.jsp')">
                     </a> &nbsp;  &nbsp; <a class="link"
                href="javascript:doSubmit('MenyNavigation', 'FWD_includes/fullfoljd_fran_sok.jsp')">
                     </a></td>
            <td>&nbsp;</td>
        </tr>
    </table>

    <table width="100%" cellspacing="0" align="center" class="sortable"
        id="unique_id">
        <tr>
            <th class="thkant">Ärende</th>
            <th class="thkant">Ingivningsdag</th>
            <th class="thkant">Sökande1</th>
            <th class="thkant">Uppfinnare1</th>
            <th class="thkant">Ombud1</th>
            <!--
    <th class="thkant">Region</th>
    <th class="thkant">Land</th>
    <th class="thkant">Telefonnummer</th>-->
        </tr>

        <tr  class="g2"
            onmouseover="javascript:setStoreStyle(this)"
            ; onmouseout="javascript:getStoreStyle(this)" 
            onclick="javascript:goToOversikt('','','','','','')"
            style="cursor: pointer;">

            <td>

            </td>
            <td>

            </td>
            <td>

            </td>
            <td>

            </td>
            <td>

            </td>

        </tr>

        <tr  class="g2"
            onmouseover="javascript:setStoreStyle(this)"
            ; onmouseout="javascript:getStoreStyle(this)" 
            onclick="javascript:goToOversikt('','','','','','')"
            style="cursor: pointer;">

            <td>

            </td>
            <td>

            </td>
            <td>

            </td>
            <td>

            </td>
            <td>

            </td>

        </tr>

        <tr  class="g2"
            onmouseover="javascript:setStoreStyle(this)"
            ; onmouseout="javascript:getStoreStyle(this)" 
            onclick="javascript:goToOversikt('','','','','','')"
            style="cursor: pointer;">

            <td>

            </td>
            <td>

            </td>
            <td>

            </td>
            <td>

            </td>
            <td>

            </td>

        </tr>

        <tr  class="g2"
            onmouseover="javascript:setStoreStyle(this)"
            ; onmouseout="javascript:getStoreStyle(this)" 
            onclick="javascript:goToOversikt('','','','','','')"
            style="cursor: pointer;">

            <td>

            </td>
            <td>

            </td>
            <td>

            </td>
            <td>

            </td>
            <td>

            </td>

        </tr>

        <tr  class="g2"
            onmouseover="javascript:setStoreStyle(this)"
            ; onmouseout="javascript:getStoreStyle(this)" 
            onclick="javascript:goToOversikt('','','','','','')"
            style="cursor: pointer;">

            <td>

            </td>
            <td>

            </td>
            <td>

            </td>
            <td>

            </td>
            <td>

            </td>

        </tr>

        <tr  class="g2"
            onmouseover="javascript:setStoreStyle(this)"
            ; onmouseout="javascript:getStoreStyle(this)" 
            onclick="javascript:goToOversikt('','','','','','')"
            style="cursor: pointer;">

            <td>

            </td>
            <td>

            </td>
            <td>

            </td>
            <td>

            </td>
            <td>

            </td>

        </tr>

        <tr  class="g2"
            onmouseover="javascript:setStoreStyle(this)"
            ; onmouseout="javascript:getStoreStyle(this)" 
            onclick="javascript:goToOversikt('','','','','','')"
            style="cursor: pointer;">

            <td>

            </td>
            <td>

            </td>
            <td>

            </td>
            <td>

            </td>
            <td>

            </td>

        </tr>

        <tr  class="g2"
            onmouseover="javascript:setStoreStyle(this)"
            ; onmouseout="javascript:getStoreStyle(this)" 
            onclick="javascript:goToOversikt('','','','','','')"
            style="cursor: pointer;">

            <td>

            </td>
            <td>

            </td>
            <td>

            </td>
            <td>

            </td>
            <td>

            </td>

        </tr>

        <tr  class="g2"
            onmouseover="javascript:setStoreStyle(this)"
            ; onmouseout="javascript:getStoreStyle(this)" 
            onclick="javascript:goToOversikt('','','','','','')"
            style="cursor: pointer;">

            <td>

            </td>
            <td>

            </td>
            <td>

            </td>
            <td>

            </td>
            <td>

            </td>

        </tr>

        <tr  class="g2"
            onmouseover="javascript:setStoreStyle(this)"
            ; onmouseout="javascript:getStoreStyle(this)" 
            onclick="javascript:goToOversikt('','','','','','')"
            style="cursor: pointer;">

            <td>

            </td>
            <td>

            </td>
            <td>

            </td>
            <td>

            </td>
            <td>

            </td>

        </tr>

    </table>

    <div id="FbottomV">
        <table width="100%" align="center">
            <tr>
                <td align="left"><input type="button" id="visaknapp"
                    value="Visa" disabled style="width: 150px;"
                    onClick="getElementById('sokR').style.display='', getElementById('bottomA').style.display='', getElementById('bottomV').style.display='none', getElementById('Vsok').style.display='', getElementById('sokF').style.display='none'">
                </td>
                <td align="right"><input type="button" value="Avbryt"
                    style="width: 150px;" class="checkmargin"><input
                    type="button" value="Infoga" disabled style="width: 150px;">
                </td>
            </tr>
        </table>
    </div>

    <div id="FbottomA" style="display: none">
        <table width="100%" align="center">
            <tr>
                <td align="left"><input type="button"
                    value="&Auml;ndra i register" style="width: 150px;">
                </td>
                <td align="right"><input type="button" value="Avbryt"
                    style="width: 150px;" class="checkmargin"><input
                    type="button" value="Infoga" style="width: 150px;">
                </td>
            </tr>
        </table>
    </div>
</div>

        </div> 
```

这是CSS

```
*  {font-family:arial;}

.avnamn{ 
                color: #90002b; 
                font-size: 140%; 
                display: inline; 
                vertical-align: 3%; 
                margin-left: 1%;
                }

.b{border:1px solid #000;}

.readonly{background-color: #CCC;}

.Webdings{
    font-family: Webdings;
    }

ul{margin-top: 0px}

.mt3{margin-top:-3px;}
.mt5p{margin-top:5px;}

.fontS80 {font-size: 80%;} 
a:link{color:#000; text-decoration:none; }
a:visited{color:#000; text-decoration:none; }
a:hover{color:#000; text-decoration:none; }
a:active{color:#000; text-decoration:none; }

.fontS75 {font-size: 75%;} 

.link{color: #003366;
    text-decoration: underline;
    cursor: pointer;
    font-weight: bold;}

.link_sm{color: #003366;
    text-decoration: underline;
    cursor: pointer;}

.link_sm{font-size: 70%;cursor: pointer;}

.small{font-size: 75%;}

.smallg{font-size: 75%;
color: #555;}

.ssmall{
    font-size: 65%;
    font-weight: bold;
    color: #555;
}
.small60{font-size: 60%;}
.small50{
    font-size: 50%;
    color: #333;
}
.smallb{font-size: 85%;}
table{display:inline;}

h1{font-size: 130%;display:inline;}
h2{font-size: 100%;display:inline;}
h3{
    font-size: 80%;
    display:inline;
    font-family: "Arial Unicode MS", Arial, Helvetica, sans-serif;
}
h4{font-size: 70%;display:inline;}
h5{
    font-size: 80%;
    display:inline;
    font-family: "Arial Unicode MS", Arial, Helvetica, sans-serif;
}

.hthin{
    font-size: 125%;
}

.th {text-align: left;}

td, th{font-size: 75%;
    vertical-align: text-top;}
.td_link{cursor: pointer;}
.td40{height:40px;}
.td60{height:60px;}

.thkant{
    border-top: 1px solid #000;
    border-bottom: 1px solid #000;
    font-size: 70%;
        text-align: left;
}

.labb{F0F0E3; c1c1b3 }

.bb{border-bottom: 1px solid #000;}
.bbV{border-bottom: 1px solid #FFF;}
.TB_nbA {background-color:#CCC;}
.TB_bt, .TB_nb, .TB_db, .TB_bb {background-color:#efefdc;}

.hk {background-color:#d9ddb3;}

.hknot {background-color:#f9faf2;}
/*<!--F8F8F1-->*/
.TB_bt{border-top: 1px solid #FFF;}
.TB_bt5{border-top: 5px solid #FFF;}
.TB_bb{border-bottom: 1px solid #999;}
.TB_bb2{border-bottom: 2px solid #c1c1b3;}
.TB_db{border-bottom: 1px solid #000; border-top: 1px solid #000;}
.TB_tb{border-top: 2px solid #efefdc;}

.TB_bo{border: 2px solid #efefdc;}
.TB_bo_hk{border-top: 1px solid #efefdc;}

.TB_bo2{border: 1px solid #efefdc;}

.TB_bo2B{
border-top: 2px solid #c1c1b3;
border-left: 3px solid #efefdc;
border-right: 3px solid #efefdc;
border-bottom: 2px solid #c1c1b3;
}

.TD_bo{
    border-right: 1px solid #c1c1b3;
    width: 9%;
    font-size: 70%;
    text-align: center;
}

.TD_bo2{

    border-right: 0;
    width: 9%;
    font-size: 70%;
    text-align: center;
}

.ytb{
    border-left:3px solid #efefdc;
    border-right:3px solid #efefdc;
}

.datum {
    font-size: 70%;
    padding-right: 5px;
    vertical-align: text-top;} 
.sub {background:#EAEAEA;}
.sub_meny, .sub_meny_r, .sub_meny_active, .sub_meny_sm{
    font-size: 70%;
    padding-left: 20px;
    padding-right: 20px;
    vertical-align: text-top;}

.sub_meny_sm {
    font-size: 60%;
    vertical-align: middle;
    padding-left: 10px;
    padding-right: 10px;
}   

.sub_meny_r{
    float:right;
    font-size: 70%;
    padding-left: 8px;
    padding-right: 8px;}

.sub_meny_rm{margin-top:4px;}
.sub_meny_active{font-weight: bold;}

.flikkant1 {
    background-image: url(../images/fl1k.jpg);
    background-position: center;
    z-index: -1;}

.inl_namn{
    font-weight: bold;
    font-size: 70%;
    color: Black;
    text-decoration: none;}

.th{text-align: left;}
.tr{text-align: right;}

.g1{
    background-color: #FFF;
    line-height: 20px;
}

.g2{
    background-color: #EEE;
    line-height: 20px;
}

.g3{
    background-color: #DCDCDC;
    line-height: 20px;
    font-weight: bold;
    font-size: 100%;
}
.g4{
    background-color: #CCC;
    line-height: 20px;
}

.popup{
    border-color: #000; 
    border-style: groove; 
    border-width: 2px; 
    padding: 0px; 
    background-color: #FFF;
    font-size: 70%;
}

.popuphandlaggare{ 
    border-color: #000;
    border-style: groove;      
    border-width: 2px;      
    padding: 0px;      
    background-color: #FFF;     
    font-size: 70%;     
    position: absolute;     
    top: 900px; 
    }

.popupN{
    background-color: #F0F0E3;
    color: #000;
    width: 100%;
    display: inline;
    font-weight: bold;
    height: auto;
    padding: 2px;
    border-bottom: 1px solid #000;
}
.pin{padding: 6px;}

.fl10, .fl20, .fl30, .fl40, .fl50, .fl60, .fl70, .fl80, .fl90, .fl100 {
    padding-bottom:4px;color: #000000;
}

.over{
    background-color: #EFEFDC;
    line-height: 20px;
}

.half{
line-height:50%;
}

.quarter{
line-height:25%;
}

.lh10{
line-height:10%;
}

.checkmargin {margin-right: 25px;}  
.checkmarginL {margin-left: 25px;}  

.pusher {padding-left: 15px;"}
.pusherR {margin-right: 40px;"}

.rand3{background-color: #FFF; line-height: 3px;}
.rand1{background-color: #FFF; line-height: 1px;}

.whiteborder {     color: #ffffff;      border: 4px solid #ffffff;      padding: 10px;      margin: 10px; }
#details { width: 700; color: #ffffff; }
.column1 {     color: #000000; margin: 0;      padding: 0;     width: 600px;     border:0;     float: left; }
.column2 {     color: #000000;margin: 0;      padding: 0;     border:0;     width: 80px;     float: right; }

.f200 {
    color: #000000;
}

.f210 {
    color: #000000;float: left;
}
.f220 {
    width: 400;
}
.f1450 {
    width: 600;
    float:left;
}
.f1550 {
    width: 150;
    float:left;
    padding:15px;
}
.paddedcell {
    padding:15px;
}
.b2{border:2px solid #efefdc;}
.inp_sel{width: 80%;}

.fl21{float:left; padding:5px; margin:5px; width:150px;} .fl455{float:left; padding:5px; margin:5px; width:120px;} 

.form-bg {
  background: #eeefdf;
  width:1000px;
  overflow:hidden;
}
.form-bg2 {
  background: #eeefdf;
  width:100%;
  overflow:hidden;
}
.data-bar {
  border-bottom:1px solid #fbfbf7;
  display:inline-block;
  padding:10px 10px;
}

.left {
float:left;
width:200px;

}
.discount {
float:right;
width:500px;

}
.discounts {
width:900px;

}
.right {
float:right;
width:700px;
}
.yta20 {
background: #eeefdf;
width:1100px;
}

.yta2 {

width:1100px;
}

.data-box {
width:650px;
height:100px;
border:1px solid #cbcbcb;
}
#table td { 
margin:120px; 
} 

#personName {     float:left;     width:300px;   }  #otherDetails {     float:right;     width:450px;      }

.th_rad_sort {border-bottom: 2px solid #000000; text-decoration: none;"}

a img { border: 0; outline:0;}

.horizontal-gradient2 {
    background: #1a2adb; /* Old browsers */
    background: -moz-linear-gradient(left,  #1a2adb 0%, #a1e6ed 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, right top, color-stop(0%,#1a2adb), color-stop(100%,#a1e6ed)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* IE10+ */
    background: linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1a2adb', endColorstr='#a1e6ed',GradientType=1 ); /* IE6-9 */
    color: white;
    width: 1015px;
}
.f { float: right;     color: white; }

.handlaggare { width: 1000px; }

div.data-box-nat{
    margin-bottom: 10px;
    border: 2px solid gray;
    width: 600px;
}
div.data-box-pct{
    margin-bottom: 10px;
    border: 2px solid gray;
    width: 600px;
}
.newpopup {
z-index:100;
 position: absolute; 
  top:50%;
  left:50%;
  background-color:#ffffff; //not working

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:01:40.040

以防万一您仍然想使用表。在 css 文件中，您将表格的显示样式设置为内联`table{display:inline;}`这使表格缩小以适合其内容。改用这个：`table{display:block;}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T08:27:45.437

嘿，现在添加**一些代码**，像这样 添加你的**第一个表**

**替换您的****第一个表**的此代码

 **```
<table width="100%" border="0" cellspacing="0" cellpadding="2"
    align="center" class="TB_nb" style="display:table;">
    <tr>
        <td width="75%" class="pusher TB_nb"><h2>Sök efter ärende</h2>
        </td>
        <td width="25%" style="text-align:right;"><a href="javascript:void(0)"
            onclick="document.getElementById('popupF').style.display = 'none';">X</a>
        </td>
    </tr>
</table> 
```

**[现场演示](http://tinkerbin.com/PMrIyGlV)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T08:28:31.567

将顶部（麻烦的）表更改为 div：

```
<div id="topBar">
  <span class="pusher TB_nb"><h2>Sök efter ärende</h2></span>
  <span id="close">
    <a href="javascript:void(0)" onclick="document.getElementById('popupF').style.display = 'none';">X</a>
  </span>
</div> 
```

然后添加这个css：

```
#topBar {width:100%; background-color:#EFEFDC;}
#close {position:absolute; right:5px;} 
```

这是一个例子：http: [//jsfiddle.net/FSra3/](http://jsfiddle.net/FSra3/)

**附带说明一下**，您真的不应该使用表格。表格仅用于表格数据，不用于布局。**

# python - Celery 中的进程数、货币和池大小

> ID：11841794
> 
> 赞同：4
> 
> 时间：2012-08-07T08:15:37.397
> 
> 标签：python, celery, celeryd

在 celery 3.0 中，最大并发数、实际运行的进程数和池大小之间有什么关系？我运行 celery 时将 max-currency( -c ) 设置为 1，然后弹出三个 celeryd 进程。我不知道为什么。

# java - 将 jaxb2Marshaller 用于 Datanucleus 实体

> ID：11841799
> 
> 赞同：0
> 
> 时间：2012-08-07T08:15:52.710
> 
> 标签：java, google-app-engine, spring-mvc, datanucleus, jaxb2

我正在使用 Spring 3 MVC 框架和 Google App Engine Datanucleus JPA 构建应用程序，我的实体类如下所示：

```
@Entity
@XmlRootElement
public class Incident {

  @Id
  @GeneratedValue(strategy = GenerationType.IDENTITY)
  @Extension(vendorName = "datanucleus", key = "gae.encoded-pk", value = "true")
  private String incidentId;

  @Persistent
  @Extension(vendorName = "datanucleus", key = "gae.pk-id", value = "true")
  private Long keyId;

  private List<String> requests;

  @XmlElement(name="sr")
  public List<String> getRequests() {
    return requests;
  }

  public void setRequests(List<String> requests) {
    this.requests = requests;
  }

  [...]
} 
```

我正在尝试将其发送到其他应用程序，`jaxb2Marshalleg r -`但是当我在其中添加`@XmlElement(name="sr")`注释时，我得到：

```
2012-08-07 10:02:17 org.datanucleus.metadata.AbstractClassMetaData determineObjectIdClass 
SEVERE: Class pl.km.smartcity.datastore.Incident has application-identity and no objectid-class specified yet has 0 primary key fields. 
Unable to use SingleFieldIdentity.
Class pl.km.smartcity.datastore.Incident has application-identity and no objectid-class specified yet has 0 primary key fields. Unable to use SingleFieldIdentity. 
```

当我删除此注释时，它可以工作，但是当我传递对象时，我的请求列表当然没有传递。

# asp.net - 下一页加载时使用jquery在asp.net web中缓存用户数据

> ID：11841800
> 
> 赞同：0
> 
> 时间：2012-08-07T08:15:58.533
> 
> 标签：asp.net, jquery

我在我的 asp.net 网络表单中使用 jquery ajax 来获取一些关于页面加载的数据，然后将其放在网站上。我想知道当用户单击 F5 刷新页面时，保留这些数据的最佳方法是什么。我不想做同样耗时的操作来再次构建页面。

ajax方法中的属性“缓存”是解决方案吗？或者有更好的东西。Mayby 是以某种方式存储数据 asp.net 缓存或会话，并在回发时返回它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:25:29.247

您可能想要使用[OutputCache](http://www.codeproject.com/Articles/49704/ASP-NET-Page-Output-Cache)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:29:09.837

你需要[缓存](http://www.codeproject.com/Articles/49704/ASP-NET-Page-Output-Cache)。将此添加到您的网络表单顶部

```
<%@ OutputCache Duration="300" VaryByParam="none" %> 
```

# c# - C# Asp.Net 创建文本文件，将其压缩并保存到 Blob - 无需将任何内容写入磁盘

> ID：11841802
> 
> 赞同：6
> 
> 时间：2012-08-07T08:16:09.000
> 
> 标签：c#, asp.net, mysql, zip, streamwriter

这里是一个复杂的，无论如何对我来说都很好:)

基本上我想要实现的是生成一些文本，将此文本文件压缩到两个目录中，然后将其上传到 MySQL blob 字段 - 所有这些都无需向磁盘写入任何内容。我对这一切都比较陌生，因此非常感谢任何指针。到目前为止，这是我整理的内容，它显然会崩溃和烧毁，但希望能更好地了解 id 喜欢做什么。哦，我目前正在使用 DotNetZip :)

```
public void broadcastItem()
        {
            System.IO.MemoryStream ms = new System.IO.MemoryStream();
            System.IO.StreamWriter sw = new System.IO.StreamWriter(ms);
            System.IO.MemoryStream ms2 = new System.IO.MemoryStream();
            sw.Write("Some Text generated and placed in a file");
            sw.Close(); //Text File Now Created

            using (ZipFile zip = new ZipFile())
            {

                zip.AddDirectory(@"Directory1\Directory2");
                //Zipping within two directories
                ZipEntry e = zip.AddEntry("Test", ms);
                e.
                e.Comment = "The content for entry in the zip file was obtained from a stream";
                zip.Comment = "This zip was created at " + System.DateTime.Now.ToString("G");
                zip.Save(ms2); //Trying to save to memory stream
            }

            try
            {
                OdbcConnection Server = new OdbcConnection("DSN=CentralServer");
                Server.Open();
                OdbcCommand DbCommand = Server.CreateCommand();
                DbCommand.CommandText = "INSERT INTO blobtest(blobfield) VALUES(?)";
                OdbcParameter param = new OdbcParameter("@file", SqlDbType.Binary);
                param.Value = ms2;
                DbCommand.Parameters.Add(param);
                DbCommand.ExecuteNonQuery();
                //Trying to save zip file from memory stream to blob field

            }
            catch (Exception ex)
            {
                throw ex;
            }
        } 
```

**********编辑 - 靠近******* **********

 *****我现在可以创建一个文本文件并将其压缩到内存中，问题是文本没有显示在文件中 - 即它的空白我现在将文件放在两个目录中:)

修改代码如下

```
public void test3()
        {
            MemoryStream ms = new MemoryStream();
            StreamWriter sw = new StreamWriter(ms);

            sw.WriteLine("HELLO!");
            sw.WriteLine("I WANT TO SAVE THIS FILE AS A .TXT FILE WITHIN TWO FOLDERS");
            ms.Position = 0;

            // create the ZipEntry archive from the xml doc store in memory stream ms
            MemoryStream outputMS = new System.IO.MemoryStream();

            ZipOutputStream zipOutput = new ZipOutputStream(outputMS);
            ZipEntry ze = new ZipEntry(@"Directory1\Directory2\example.txt");
            zipOutput.PutNextEntry(ze);
            zipOutput.Write(ms.ToArray(), 0, Convert.ToInt32(ms.Length));
            zipOutput.Finish();
            zipOutput.Close();

            byte[] byteArrayOut = outputMS.ToArray();
            outputMS.Close();
            ms.Close();
            try
            {
                OdbcConnection rstServer = new OdbcConnection("DSN=CentralServer");
                Server.Open();
                OdbcCommand DbCommand = Server.CreateCommand();
                DbCommand.CommandText = "INSERT INTO blobtest(blobfield) VALUES(?)";
                OdbcParameter param = new OdbcParameter("@file", SqlDbType.Binary);
                param.Value = byteArrayOut;
                DbCommand.Parameters.Add(param);
                DbCommand.ExecuteNonQuery();
                Response.Write(byteArrayOut.ToString());

            }

            catch (Exception ex)
            {
                Response.Write(ex.ToString());
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:38:31.610

您可以使用开源 c# 压缩库 SharpZipLib 创建内存中的 zip 文件，如下所述：[使用 SharpZipLib 进行内存压缩](http://www.falconwebtech.com/post/2010/06/08/In-Memory-compression-using-SharpZipLib.aspx)

```
// zip XElement xdoc and add to requests MTOM value
using (MemoryStream ms = new System.IO.MemoryStream())
{   
   xdoc.Save(ms);  
   ms.Position = 0;

   // create the ZipEntry archive from the xml doc store in memory stream ms
   using (MemoryStream outputMS = new System.IO.MemoryStream())
   {
      using (ZipOutputStream zipOutput = new ZipOutputStream(outputMS))
      {
          ZipEntry ze = new ZipEntry("example.xml");
          zipOutput.PutNextEntry(ze);
          zipOutput.Write(ms.ToArray(), 0, Convert.ToInt32(ms.Length));
          zipOutput.Finish();
          zipOutput.Close();

          // add the zip archive to the request
          SubmissionReceiptListAttachmentMTOM = new base64Binary();
          SubmissionReceiptListAttachmentMTOM.Value = outputMS.ToArray();
      }

      outputMS.Close();
   }

   ms.Close();
} 
```

现在您只需要将内存流转换为字节数组并保存在数据库中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T10:31:21.777

基本上这是我想要实现的全部编译，所以我认为 id 为任何需要类似的东西的人把它放在一起 - 这是一段工作代码

```
public void diskLess()
        {
            MemoryStream ms = new MemoryStream();
            StreamWriter sw = new StreamWriter(ms);

            sw.WriteLine("HELLO!");
            sw.WriteLine("I WANT TO SAVE THIS FILE AS A .TXT FILE WITHIN TWO FOLDERS");
            sw.Flush(); //This is required or you get a blank text file :)
            ms.Position = 0;

            // create the ZipEntry archive from the txt file in memory stream ms
            MemoryStream outputMS = new System.IO.MemoryStream();

            ZipOutputStream zipOutput = new ZipOutputStream(outputMS);
            ZipEntry ze = new ZipEntry(@"dir1\dir2\whatever.txt");
            zipOutput.PutNextEntry(ze);
            zipOutput.Write(ms.ToArray(), 0, Convert.ToInt32(ms.Length));
            zipOutput.Finish();
            zipOutput.Close();
            byte[] byteArrayOut = outputMS.ToArray();
            outputMS.Close();

            ms.Close();
            try
            {
                OdbcConnection rstServer = new OdbcConnection("DSN=CentralServer");
                Server.Open();
                OdbcCommand DbCommand = Server.CreateCommand();
                DbCommand.CommandText = "INSERT INTO blobtest(blobfield) VALUES(?)";
                OdbcParameter param = new OdbcParameter("@file", SqlDbType.Binary);
                param.Value = byteArrayOut;
                DbCommand.Parameters.Add(param);
                DbCommand.ExecuteNonQuery();
                Response.Write(byteArrayOut.ToString());

            }

            catch (Exception ex)
            {
                Response.Write(ex.ToString());
            }

        } 
```*****

# html - HTML5 地理定位在 Firefox、Chrome 和 Chromium 中不起作用

> ID：11841803
> 
> 赞同：3
> 
> 时间：2012-08-07T08:16:11.127
> 
> 标签：html, firefox, google-chrome, geolocation, w3c-geolocation

我正在尝试使用 HTML5 地理定位 API；但我无法让它在 Firefox Chrome 和 Chromium 上运行：

```
 init();

function init() {;
    // Get the current location
    getPosition();      
}

function getPosition() {
    navigator.geolocation.getCurrentPosition(success, fail,{
        enableHighAccuracy:true,
        timeout:10000,
        maximumAge:Infinity
    });    
}   

function success(position) {
    alert("Your latitude: " + position.coords.latitude + "longitude: "
        + position.coords.longitude);
}

function fail(e) {
    alert("Your position cannot be found"+e.code+" => "+e.message);
} 
```

在 IE9 和 Safari 中完美运行；但 ：

*   在 Firefox（v13 和 V14）中有错误代码 3（超时）
*   在 Chrome 和 Chromium（v20 和 v21）中存在错误代码 2，并显示消息“‘https://maps.googleapis.com/maps/api/browserlocation/json?browser=googlechrome&sensor=true’的网络位置提供程序：响应是畸形的。”

我有一个全新的 Chrome 安装（今天安装在 Windows XP 上，没有扩展），我已经在浏览器中授权了地理位置。

你可以在那里尝试：http: [//jsfiddle.net/mhj82/38/](http://jsfiddle.net/mhj82/38/)

是否有解决方案使其适用于所有支持地理位置的浏览器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:37:22.830

Have you read this ? [http://code.google.com/p/chromium/issues/detail?id=41001](http://code.google.com/p/chromium/issues/detail?id=41001)

At the end of the thread they come to the conclusion that in order to work in Chrome, geolocation must be performed on a device with a working wifi adapter.

Was wifi enabled on your computer ?

(dunno for firefox)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T18:37:20.560

试试这个在 chrome 桌面和移动设备上测试

```
if (navigator.geolocation) {
    var latitude = null;
    var longitude = null;
    navigator.geolocation.getCurrentPosition(function (position) {
        latitude = position.coords.latitude;
        longitude = position.coords.longitude;
   });

} else {
    alert("Geolocation API is not supported in your browser");
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T16:40:13.287

我必须等到文档加载后才能在 chrome 中工作

```
jQuery().ready(function() {
   if (navigator.geolocation) { 
        navigator.geolocation.getCurrentPosition....
    }
}); 
```

# jms - Websphere 名称空间绑定影响 JNDI 范围解析顺序

> ID：11841804
> 
> 赞同：1
> 
> 时间：2012-08-07T08:16:18.583
> 
> 标签：jms, websphere, jndi

情况如下：

我在 websphere Network Deployment v8.0.0.3 我有一个使用 2 个队列的应用程序一个队列用于内部应用程序使用（发布者和消费者在同一个应用程序内）另一个队列由部署在其他应用程序上的其他模块使用单元内的服务器。

所以我在单元范围级别配置了第一个队列，在集群范围级别配置了第二个队列。

在我添加名称空间绑定之前，一切正常。之后，dumpNameSpace.sh 输出中不再存在每个 jms jndi 对象 Cluster Scoped。

名称空间绑定的存在修改了范围解析等接缝。这确实很奇怪，但我在 2 个不同的 WAS 安装上得到了相同的行为。

感谢任何知道这一点的人。

**更新**

这是有效的 jndi 转储和无效的 jndi 转储之间的区别。

```
--- clsdumpOk   2012-08-07 11:49:43.000000000 +0200
+++ clsdumpKo2  2012-08-07 11:49:59.000000000 +0200
@@ -454,28 +454,12 @@
 (top)/clusters/TestCluster/jdbc/modulobase
 (top)/clusters/TestCluster/jms
 (top)/clusters/TestCluster/jms/as
-(top)/clusters/TestCluster/jms/as/BatchRequest
-(top)/clusters/TestCluster/jms/as/BatchResponse
 (top)/clusters/TestCluster/jms/as/ciccio
-(top)/clusters/TestCluster/jms/as/FSCleaner
 (top)/clusters/TestCluster/jms/as/License
 (top)/clusters/TestCluster/jms/as/Mailer
-(top)/clusters/TestCluster/jms/as/Plans
-(top)/clusters/TestCluster/jms/as/RiaResponse
-(top)/clusters/TestCluster/jms/ConnectionFactory
-(top)/clusters/TestCluster/jms/pac
-(top)/clusters/TestCluster/jms/pac/as
-(top)/clusters/TestCluster/jms/pac/as/Events
 (top)/clusters/TestCluster/jms/queue
-(top)/clusters/TestCluster/jms/queue/batch-request
-(top)/clusters/TestCluster/jms/queue/batch-response
-(top)/clusters/TestCluster/jms/QueueConnectionFactory
-(top)/clusters/TestCluster/jms/queue/events
-(top)/clusters/TestCluster/jms/queue/filesystem-cleaner
 (top)/clusters/TestCluster/jms/queue/license
 (top)/clusters/TestCluster/jms/queue/mailer
-(top)/clusters/TestCluster/jms/queue/plans
-(top)/clusters/TestCluster/jms/TopicConnectionFactory
 (top)/clusters/TestCluster/jta
 (top)/clusters/TestCluster/jta/usertransaction
 (top)/clusters/TestCluster/SecurityServer
@@ -495,8 +479,10 @@
 (top)/clusters/TestCluster/url/casCfgFile
 (top)/clusters/TestCluster/UserRegistry
 (top)/clusters/TestCluster/wb25
-(top)/clusters/TestCluster/wb25/topic
-(top)/clusters/TestCluster/wb25/topic/ria-response
+(top)/clusters/TestCluster/wb25/conf
+(top)/clusters/TestCluster/wb25/conf/locking
+(top)/clusters/TestCluster/wb25/conf/locking/lockingEnabled
+(top)/clusters/TestCluster/wb25/conf/rootFolder
 (top)/clusters/TestCluster/wm
 (top)/clusters/TestCluster/wm/ard
 (top)/clusters/TestCluster/wm/default 
```

正如你所看到的

+（顶部）/clusters/TestCluster/wb25/conf/locking/lockingEnabled

被添加

其余的都被删除。这真的很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T02:49:42.140

WebSphere for Environment -> Naming -> Namespace Bindings 中的问题如下：如果您使用以下命名设置一些 JNDI 节点：url/someVariable 或一般的 something/someVar

并且比您对其他对象使用相同的“东西”，例如：URL 或 JDBC 或 JMS

名称空间绑定将“某物”置于只读模式，当 WebSphere 尝试配置其他资源时将失败。

您在配置过程中无法发现这一点，因为只有在应用程序服务器第一次重新启动时您才会看到这一点。

因此，在 jndi 中选择名称时要小心。

# php - 保存在本地存储中

> ID：11841806
> 
> 赞同：0
> 
> 时间：2012-08-07T08:16:32.127
> 
> 标签：php, javascript, mysql

我正在创建一个 php+mysql 网络表单。我有什么办法可以保存输入的本地存储，当有互联网时，然后推送到 mysql 服务器？因为如果用户填写完表格并提交到一半，那么之前填写的数据将丢失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:18:05.207

[http://simsalabim.github.com/sisyphus/](http://simsalabim.github.com/sisyphus/)这不仅会为您提供该功能，而且会使其变得容易:)

您可以使用此代码来完成您正在寻找的部分内容：

```
$('form').sisyphus({
  timeout: 0,
  onSave: function() {
    console.log('Saved!');
  }
}); 
```

# php - 验证码无需在 PHP 中重写图像？

> ID：11841809
> 
> 赞同：0
> 
> 时间：2012-08-07T08:16:42.200
> 
> 标签：php, captcha

我正在寻找一种方法，如何保护我的表单免受垃圾邮件机器人的侵害。我不是图像验证码的忠实粉丝，因为对于用户来说，这是另一个“不必要的”工作。

机器人填写所有输入并发送表格。我的线索是进行隐藏输入，并在发送表单测试后，如果隐藏输入仍然为空。如果确实-> 好，人类。如果没有 -> 机器人。

这个解决方案有多少视角和工作能力？你怎么看？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-07T08:19:23.600

这是防止垃圾邮件的非常标准的措施。我没有任何关于它的有效性的数据。但我想这不是很多。

# mysql - 在 MySQL 中查找具有重复记录的 id

> ID：11841810
> 
> 赞同：0
> 
> 时间：2012-08-07T08:16:54.320
> 
> 标签：mysql

我想提取 MySQL 数据库中的重复记录。

```
----------------------------
| id | column_a | column_b |
|----|----------|----------| 
| 1  |    a     |    b     |
| 2  |    a     |    c     |
| 3  |    a     |    d     |
| 4  |    a     |    b     |
| 5  |    b     |    e     |
| 6  |    c     |    a     |
| 7  |    c     |    d     |
| 8  |    e     |    a     |
| 9  |    e     |    a     |
---------------------------- 
```

我想拉它，以便它显示重复的每一行。就像是 ：

```
------
| id |
|----|
| 1  |
| 4  |
| 8  |
| 9  |
------ 
```

或者

```
---------------------------------------
| duplicate_ids | column_a | column_b |
|---------------|----------|----------| 
|      1,4      |    a     |    b     |
|      8,9      |    e     |    a     |
--------------------------------------- 
```

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T08:19:16.920

尝试`GROUP_CONCAT`

```
SELECT    GROUP_CONCAT(id), column_A, column_B
FROM      mytable
GROUP BY  columnA, columnB
HAVING    COUNT(id) > 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T08:20:24.380

```
SELECT
    GROUP_CONCAT(id) as ids,
    column_a,
    column_b 
FROM table
GROUP BY column_a, column_b 
HAVING COUNT(id) > 1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T08:17:51.743

```
select group_concat(id) as duplicate_ids,
       columna, 
       columnb
from your_table
group by columna, columnb
having count(id) > 1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T08:19:12.730

尝试`group_contact ()`功能，

```
select group_concat(id) duplicate_ids ,column_a, column_b
from <table>
group by column_a, column_b 
```

# database - PostgreSQL 与 JPA、Hibernate 的继承

> ID：11841811
> 
> 赞同：8
> 
> 时间：2012-08-07T08:16:56.863
> 
> 标签：database, hibernate, postgresql, jakarta-ee, jpa

我们对 PostgreSQL 中的继承以及将其映射为 JPA 中的实体有疑问。我们的数据库和我们要映射的表是：

```
CREATE TABLE Answer (
    idAnswer SERIAL,
    answerContent VARCHAR,
    idQuestion INTEGER,
    version INTEGER,

    CONSTRAINT Answer_idAnswer_PK PRIMARY KEY (idAnswer),
    CONSTRAINT Answer_idQuestion_FK FOREIGN KEY (idQuestion) REFERENCES Question(idQuestion)
);

CREATE TABLE MatchAnswer (
    matchingAnswer VARCHAR NOT NULL,
    version INTEGER,

    CONSTRAINT MatchAnswer_idAnswer_PK PRIMARY KEY (idAnswer)       
) INHERITS(Answer);

CREATE TABLE TrueFalseAnswer (
    isTrue BOOLEAN NOT NULL,
    version INTEGER,

    CONSTRAINT TrueFalseAnswer_idAnswer_PK PRIMARY KEY (idAnswer)   
) INHERITS(Answer); 
```

我们使用 Netbeans 7.1.2 中的自动工具将它们映射为实体。起初我以为只要添加就足够了

```
@Entity
@Table(name = "truefalseanswer", catalog = "jobfairdb", schema = "public")
@XmlRootElement
public class Truefalseanswer extends Answer implements Serializable {
    private static final 
```

所以只是**extends**，但它不能正常工作。最好的方法是什么？提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T08:41:01.310

JPA 的继承概念是基于普通表的。它并没有真正“理解”PostgreSQL 表继承的概念。这是使用旨在公开功能的最低公分母并且可移植的规范的成本之一。

有关JPA 继承策略的完整摘要，请参阅[本指南。](http://java.dzone.com/articles/jpa-implementation-patterns-mapping)请注意，在[较新的 Java 6 JavaDoc for @Inheritance](http://docs.oracle.com/javaee/6/api/javax/persistence/Inheritance.html)中有一条注释说：

> 如果未指定 Inheritance 注释或未为实体类层次结构指定继承类型，则使用 SINGLE_TABLE 映射策略。

......如果你看看它是如何`SINGLE_TABLE`工作的，它对你不起作用也就不足为奇了；它期望所有子类都在一个具有魔术鉴别器值的大表中。

`InheritanceType.TABLE_PER_CLASS`更接近 Pg 的行为方式，但我怀疑当基本类型表具有叶类型的每个实体的条目时，JPA impl 会有点混乱。在查询超类时，它会尝试`UNION`跨子类表进行查询，这可能会产生奇怪的结果——如果使用的话至少会出现重复，如果`UNION`使用`UNION ALL`. 根据提供者如何实施策略，它可能至少部分起作用。您必须进行测试，结果可能是相当特定于提供商的。

对 JPA 的 PG 继承支持的一个非常好的实现可能需要 JPA 提供者扩展来实现新的继承策略，该策略理解 PostgreSQL 扩展的继承和`ONLY`查询。

如果您可以说服您的 JPA 实现`SELECT ... FROM ONLY subclass_table`在`InheritanceType.TABLE_PER_CLASS`模式下使用，那么它应该可以与 PostgreSQL 继承互操作。它只会看到每个表中的非继承行，并像处理普通表一样使用它们。然后，您的其他非 JPA 代码可以继续使用继承功能。我想您可以修改 Hibernate 的 PostgreSQL 方言代码来执行此操作，但我个人不会去那里，除非我绝对*必须*让 JPA 支持严重依赖继承的现有 PostgreSQL 模式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-03T02:09:02.553

有一个使用 MappedSuperClass 注释的解决方案。

```
@MappedSuperClass
public abstract class AbstractAnswer{
    @Id
    protected Long idAnswer;

    @Column(name="answerContent")
    protected String answerContent;
}

@Entity
@Table(name="Answer")
public class Answer extends AbstractAnswer{

}

@Entity
@Table(name="MatchAnswer")
public class MatchAnswer extends AbstractAnswer{
    protected String matchingAnswer;
}

@Entity
@Table(name="TrueFalseAnswer")
public class TrueFalseAnswer extends AbstractAnswer{
    protected Boolean trueFalseAnswer;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T08:39:48.927

Hibernate 中的继承与 PostgreSQL 继承无关，尽管两者都试图完成相同的任务并且可能看起来相同。

其原因在于 Hibernate 以 SQL 标准为基础，从每个 RDBMS 中调整小的特定特性。例如，虽然 MySQL 对顺序 ID 有“自动增量”，但 Oracle 使用序列。

从历史上看，数据继承（或专业化）是通过对特定字段使用单独的表来完成的，主外键将这些表链接在一起。在您的示例中，MatchAnswer 的 ID 为 PK 和 FK 到 Answer.idAnswer。与 TrueFalseAnswer 相同（ID 是 Answer.idAnswer 的 PK/FK）。

您发布的“继承”定义不是（AFAIK）在任何 SQL 标准中定义的，因此，如果 Hibernate 支持这一点，我会感到惊讶，特别是因为它似乎是 PostgreSQL 特有的东西，*而且*它似乎是一个有点实验性的特性：查看 PostgreSQL 文档“继承”一章的“注意事项”。

也就是说，我建议保持您的数据健全，根据最佳关系模型实践映射它们。然后，在您的 Hibernate 映射中，您可以在有意义的地方表达数据继承。

# php - IOS 应用程序与 Facebook 的集成

> ID：11841815
> 
> 赞同：0
> 
> 时间：2012-08-07T08:17:00.387
> 
> 标签：php, ios, facebook, web-services

我对 IOS 开发一无所知，我为 IOS 应用程序编写 Web 服务。我们得到了一个应用程序，它应该支持使用 facebook 登录和自己的登录/注册。现在，为应用程序实现登录/注册不是问题，但我需要知道两件事：-

1.) 我们如何使用 facebook 在 IOS 应用程序中实现登录。

2.) 该应用程序应该能够在 facebook 上显示和保存某些事件。

我/我们将如何实现这两个功能。我们是使用 web 端代码还是 IOS 代码来实现这些.. 谁能指出我正确的方向..

谢谢

PS：我在选择标签时了解了 facebook-connect ;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:25:26.267

检查 Facebook SDK。他们有一些非常有用的链接和教程。您可以从中获取 ios SDK 的 Facebook 存储库位于[此](https://github.com/facebook/facebook-ios-sdk/)链接。此外，Facebook 的开发者门户网站也是一个很棒的入门[场所](https://developers.facebook.com/)。如果您还有其他问题，请告诉我，我**也许**可以回答。

# c# - C#：嵌套字典问题

> ID：11841820
> 
> 赞同：0
> 
> 时间：2012-08-07T08:17:12.180
> 
> 标签：c#, dictionary

我有下面的代码，旨在构建具有以下构造的字典对象`Dictionary<string<Dictionary<string, string>`。出于某种原因，每次我向其中添加一个项目时，关键文本都是正确的，但值（字典）会覆盖前一个。这可能更好地解释如下：

**迭代 1**

*   键1，字典1

**迭代 2**

*   键1，字典2
*   键2，字典2

**迭代 3**

*   键1，字典3

*   键2，字典3

*   键3，字典3

造成这种情况的原因是什么，如何修复此代码以阻止它覆盖每个条目中的字典？

```
QueryNameUserQueryString = new Dictionary<string, string>();
DialectDictionary = new Dictionary<string, Dictionary<string, string>>();

while (dataBaseConnection.NextRecord())
                {
                if (QueryNameUserQueryString != null)
                    {
                    QueryNameUserQueryString.Clear();
                    }

                string dialect = dataBaseConnection.GetFieldById (0);

                //If no dialect then carry out next iteration
                if (String.IsNullOrEmpty (dialect))
                    {
                    continue;
                    }

                try
                    {
                    dataBaseConnection2.ExecutePureSqlQuery ("SELECT * FROM " + sqlFactoryTable + " WHERE SQL_FACTORY_DIALECT = '" + dialect + "'");
                    }
                catch
                    {
                    dataBaseConnection.Close();
                    dataBaseConnection2.Close();

                    throw;
                    }

                //Do we have query strings for this dialect?
                if (!dataBaseConnection2.HasRows())
                    {
                    continue;
                    }

                //loop through query strings
                while (dataBaseConnection2.NextRecord())
                    {
                    string queryName = dataBaseConnection2.GetFieldById (2);
                    string queryString = dataBaseConnection2.GetFieldById (3);
                    string user = dataBaseConnection2.GetFieldById (4);

                    //create composite key for dictionary
                    string compositeKey = dialect + "," + queryName + "," + user;

                    if (QueryNameUserQueryString != null)
                        {
                        //Construct our query string dictionary
                        QueryNameUserQueryString.Add (compositeKey, queryString);
                        }
                    }

                //If we have a query string dictionary
                if (QueryNameUserQueryString != null)
                    {
                    //Ensure m_dialect dictionary is not null
                    if (DialectDictionary != null)
                        {
                        //Construct our dictionary entry for this dialect
                        DialectDictionary.Add (dialect, QueryNameUserQueryString);
                        }
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T08:25:18.070

您似乎`QueryNameUserQueryString`在每次迭代中都使用相同的实例。当它被添加到 时`DialectDictionary`，它被添加为参考 - 而不是原件的副本。

为了“正确”解决问题，我会将`QueryNameUserQueryString`变量的声明移到 while 范围内。这样，您将确保它只能存在于单个迭代的范围内，而不是多个迭代。当它被添加到 时`DialectDictionary`，该引用仍然存在于该字典中，您可以安全地离开范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T08:21:46.723

您每次都使用相同的 QueryNameUserQueryString 实例。代替

```
QueryNameUserQueryString.Clear(); 
```

和

```
QueryNameUserQueryString = new Dictionary<string, string>(); 
```

# meteor - 使用 Handlebars.js 循环取模条件

> ID：11841821
> 
> 赞同：1
> 
> 时间：2012-08-07T08:17:14.793
> 
> 标签：meteor, handlebars.js

我正在使用 Handlebars 遍历对象。我的问题是，我无法在每 x 次迭代（% 2 或 % 3）中轻松添加一些代码。

[我尝试了如何使用 Handlebars.js 创建条件行类](https://stackoverflow.com/questions/11826997/how-can-i-create-conditional-row-classes-using-handlebars-js)中提出的解决方案？. 它不起作用，因为我使用的是名为 Meteor 的框架，而我的“集合”来自通过 Meteor 的 MongoDB 查询。使用该解决方案，“上下文”等于整个 Meteor 上下文，而我的收藏无处可寻……

我的第一个想法是在我的对象上创建一个名为“eof”的新布尔属性，如果它等于 true，将使用更多代码触发 Handlebars 条件......但我想要更干净且不依赖于服务器的东西 -边。

你会怎么做？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T01:56:03.743

请参阅[汤姆科尔曼的回答](https://stackoverflow.com/a/13870846/1531063)。

您可以添加一个看起来像这样的模板助手：

```
Template.tableWithDifferentColorRows.helpers({
    modulo3: function() {
        return (this.index % 3) === 0;
    },
});
// in the html:
{{#each_with_index collection}}
    <div {{#if modulo3}}style='color:purple'{{/if}}>
         actual content...
    </div>
{{/each}} 
```

# android - Phonegap我在谷歌地图上的地理位置

> ID：11841822
> 
> 赞同：2
> 
> 时间：2012-08-07T08:17:15.137
> 
> 标签：android, cordova

我正在使用cordova 2.0.0，我正在测试android 2.2 我想制作一个应用程序来获取我的地理位置并将其显示在谷歌地图中。现在我尝试了我的代码，当我运行它时，它显示了我的坐标，但是当我单击确定时它没有显示地图。

这些是我的权限：

```
<access origin="http://127.0.0.1*"/> <!-- allow local pages -->
<access origin="http://google.com*" />
<access origin="http://maps.google.com*" /> 
<access origin="https://google.com*"/>
<access origin="https://maps.google.com*"/> 
```

如果有人能告诉我我做错了什么，我将不胜感激。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>

     <head>

<meta name="viewport" content="width=device-width; height=device-height; user-scalable=no" />

<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<title>Beer Me</title>
<link rel="stylesheet" href="/master.css" type="text/css" media="screen" />
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
<script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>
<script type="text/javascript">

function onLoad() {
document.addEventListener("deviceready", onDeviceReady, false);
}

function onDeviceReady() {
    navigator.geolocation.getCurrentPosition(onSuccess, onError,{'enableHighAccuracy':true,'timeout':10000});

}

//GEOLOCATION
var onSuccess = function(position) {
    alert('Latitude: '  + position.coords.latitude   + '\n' +
          'Longitude: ' + position.coords.longitude  + '\n');

    var myLat = position.coords.latitude;
    var myLong = position.coords.longitude;

    //MAP
    var mapOptions = {
        center: new google.maps.LatLng(myLat, myLong),
        zoom: 14,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(document.getElementById("map_canvas"),
                                  mapOptions);

};

// onError Callback receives a PositionError object
//
function onError(error) {
    alert('code: '    + error.code    + '\n' +
          'message: ' + error.message + '\n');
}

     </script>
     </head>
     <body onload="onLoad()"> 
     <div id="map_canvas" style="width:100%; height:100%"></div>
     </body>
     </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:51:32.343

```
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script> 
```

试试这个 src，它适用于我的相同代码！

# java - 如何在 Amazon EBS (Elastic BeanStalk) 上捕获 OutOfMemory 错误

> ID：11841826
> 
> 赞同：1
> 
> 时间：2012-08-07T08:17:20.353
> 
> 标签：java, out-of-memory, amazon-ebs

这是一个棘手的问题 - 我们有一个 Java Web 应用程序，部署在 Amazon ElasticBeanStalk 上的 Tomcat Web 服务器上。而且我们相信我们有内存泄漏 b/c 似乎 JVM 每天晚上都会因 OutOfMemory 异常而崩溃。问题是崩溃后，EBS 会自动废弃旧的 EC2 实例并启动一个新实例。所有的日志和信息也被废弃了......

我现在正在开发一个自定义 CloudWatch 指标来监控 JVM 的内存（你会认为应该有一个准备好的......）但这不会帮助我生成堆转储

有没有人遇到过类似的问题并且知道如何在 EBS 上捕获这些错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:17:09.390

这听起来像是不寻常的 EC2（不是 EBS）实例行为。有趣的是，如果 Tomcat 倒下，那么机器实例就会受到影响（在停止或终止方面）。

这是我建议诊断的内容：

1.  获取一个正在运行的实例来检查/玩
2.  看看“终止保护” - 是否设置为“启用” - 这可以解释问题的“报废”部分（如果报废意味着实例终止并被删除）。您可以使用 AWS 控制台在您的 EC2 实例的属性中找到它。
3.  查看配置 Tomcat 服务器的 Java 内存设置。也许最大值比虚拟机大（Xmx）！？如果是这样，也许 Tomcat 实际上是在内存不足的情况下运行机器，这可以解释 EC2 对内存不足的一些响应。我假设您的意思是“停止”而不是“报废”，否则您怎么知道您遇到了内存不足错误？
4.  如果您手动终止工作实例上的 tomcat/java 进程，该实例是否保持运行状态（或者您是否被启动并且实例停止）？如果仅仅因为你停止了 tomcat 而发生了一些事情，这意味着一些监控过程正在启动并明确地关闭机器。
5.  使用 -XX:-HeapDumpOnOutOfMemoryError 生成转储文件 - 这将帮助您找出泄漏的位置，并有望解决根本原因。

祝你好运。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-23T01:43:49.783

考虑像 Sumologic 这样的日志收集服务。您指定的日志文件将被收集并可供在线分析。因此，即使您的 EC2 实例被替换，您也可以进行取证以查看它们发生了什么

# ios - 如果视图控制器由于内存警告而被卸载，我该如何恢复状态？

> ID：11841831
> 
> 赞同：0
> 
> 时间：2012-08-07T08:17:55.380
> 
> 标签：ios, cocoa-touch, uiviewcontroller, segue

我有一个视图控制器，它获取由它推送的视图控制器设置的属性。

基本上，我有类似的东西

```
- (void)doStuff {
    [self performSegueWithIdentifier:@"segueToThing" sender:self];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if([[segue identifier] isEqualToString:@"segueToThing"])
        [(ThingViewController *)[segue destinationViewController] setImportantData:[self importantData]];
} 
```

问题是，如果我推`ThingViewController`然后再推另一个视图控制器，然后发出内存警告，我`ThingViewController`的被卸载以释放内存。然后我弹出第三个视图控制器并`ThingViewController`再次加载，但`importantData`我在 segue 中设置的属性`nil`现在是因为 segue 没有再次被触发。

我该怎么办？我是否应该将我所有的状态存储在某个地方......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:26:21.040

如果您不想释放该内存，则不要在内存警告或 viewDidUnload 中释放它。

如果您需要释放内存，请将数据持久化，然后在 VC 回来时重新加载。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-07T08:35:53.557

也许将重要数据存储在`AppDelegate`? 在您的 AppDelegate.h 文件中声明一个`NSData`对象或需要保存的任何对象。然后在`prepareForSegue`你得到这样的参考`AppDelegate`：

```
AppDelegate *appDel = [[UIApplication sharedApplication] delegate]; 
```

然后使用您在 AppDelegate 中保存的变量保存您的对象。然后，当再次加载第二个视图时，只需再次调用 AppDelegate 并使用来自 App Delegate 的数据。希望这能有所帮助。如果您需要更多帮助或者我不清楚，请告诉我。

# android - 如何处理选项卡上的软键盘（操作栏）

> ID：11841833
> 
> 赞同：0
> 
> 时间：2012-08-07T08:18:02.103
> 
> 标签：android

我正在使用`ActionBar`三个选项卡。

我的一个选项卡包含一个`EditText`.

要求：-

1-点击后`EditText` `VirtualKeyboard`应显示。

2-点击其他两个`Tabs`.Keyboard 后应该隐藏。

它工作正常。

问题：-

旋转屏幕后，键盘隐藏在那个 EditText 上。（着陆到 prort）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:24:14.243

在 AndroidManifest.xml 中尝试此代码：

```
 <activity
    android:name=".MainActivity"    
    android:windowSoftInputMode="stateHidden"
    ...
    </activity> 
```

# .htaccess - url 重写不重定向到正确的页面

> ID：11841835
> 
> 赞同：0
> 
> 时间：2012-08-07T08:18:10.810
> 
> 标签：.htaccess

我在 .htaccess 文件中有以下规则：

```
RewriteRule ^cat-([0-9]+)\.html$ ad_list_cat.php?category_no=$1 
```

ad_list_cat.php 文件位于子文件夹 /contents/ 中。我也试过

```
RewriteRule ^cat-([0-9]+)\.html$ /contents/ad_list_cat.php?category_no=$1 
```

当我输入 url 'http://localhost/cat-1.html' 时，它会给出错误 404。我认为是子文件夹的问题。我的规则有什么问题？

问候：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:21:54.277

因为它正在您的根目录中寻找您的 ad_list_cat.php。在你开始提问之前，请阅读一些关于重写规则的内容。

# php - PHP：在文本中查找所有带扩展名的文件名

> ID：11841838
> 
> 赞同：1
> 
> 时间：2012-08-07T08:18:32.820
> 
> 标签：php, regex

我正在尝试在文本中查找所有带有扩展名的文件名。举个例子：

```
<roottag>
 <step>first element using file_text.txt</step>
 <step>server.sql</step>
 <step>using another.txt file</step>
 <txt> elements other.this </txt>
</roottag> 
```

我想提取所有带有扩展名的文件名：

```
file_text.txt
server.sql
another.txt
other.this 
```

您对 preg_match_all 有任何想法吗？

提前致谢

克里斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T08:21:23.560

```
$preg = '/(\w+\.\w{2,4})/';
preg_match_all($preg, $text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:33:21.437

```
preg_match_all('/[a-z_]+\.[a-z]{2,4}/', $string , $arr, PREG_PATTERN_ORDER); 
```

将匹配字符串 $string 中的文件并将匹配数组放入 $arr。

正则表达式字符串是 /[a-z_]+.[az]{2,4}/ 并且它假定您正在搜索由可以包含下划线的第一个字母字符串组成的文件，后跟一个点和一个扩展名这可以是最小 2 个字符长和最大 4 个字符长。

您可以测试您的正则表达式字符串[RegExp Tester](http://www.spaweditor.com/scripts/regex/index.php)

因此您可以在比赛中添加更多规则。

# maven - 如何从 intellij maven 安装中运行 phantomjs 作为 js-testrunner 的目标？

> ID：11841839
> 
> 赞同：1
> 
> 时间：2012-08-07T08:18:37.997
> 
> 标签：maven, intellij-idea, maven-3, phantomjs

我有一个奇怪的情况，我无法从 intellij 运行幻像测试。

```
java.io.IOException: The phantomjs executable cannot be launched from the path or from the value of the org.codehaus.jstestrunner.commandPattern property.See http://js-testrunner.codehaus.org/usage.html for instructions. Original exception: java.io.IOException: Cannot run program "phantomjs": error=2, No such file or directory 
```

现在，我不知道为什么会这样，因为：

*   我可以从命令行访问幻像，因为“mvn test”可以工作、运行并通过测试
*   我已将其添加为[路径变量](http://www.jetbrains.com/idea/webhelp/path-variables.html)
*   我已将其添加为[可由 GUI 程序访问的路径变量](https://stackoverflow.com/questions/135688/setting-environment-variables-in-os-x)
*   我已经检查了 phantomjs 文件的权限，它们是我可以做到的那样允许 - 它们比实际的 IntelliJ 应用程序允许，并且由同一所有者/组“拥有”
*   我已经多次重新启动我的 Mac / IntelliJ。
*   我尝试将其添加为“mvn install”任务的“VM”选项：

    mvn test -Dorg.codehaus.jstestrunner.commandPattern="/usr/local/bin/phantomjs '%1$s' %2$s"

谁能想到为什么作为 mvn 测试目标的一部分发生的 jstestrunner 操作似乎无法访问/查看我的幻像安装

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:16:50.943

首先要检查：您是否尝试在 pom.xml 中硬编码 PhantomJS 可执行文件的完整路径？

我知道这不是“最终”解决方案，但如果你通过完全合格的路径来确保它可以工作。

# ajax - 服务器日志到 Dojo 前端，合适的数据存储方法？

> ID：11841842
> 
> 赞同：0
> 
> 时间：2012-08-07T08:18:48.273
> 
> 标签：ajax, logging, dojo

大家早上好，我目前正在构建一个工具，该工具使用 AUX 和 Shell 脚本每分钟从多个不同服务器上的各种日志中抓取大量数据。目前，我的脚本也每分钟生成 HTML 文件，以便我可以回顾并查看任何给定分钟的系统运行状况。所以本质上这些HTML文件被用作归档介质，这显然很奇怪。

推进这个工具，我希望在 DOJO 平台上构建一个前端，该平台将支持从日志中收集的每个不同数据集的小部件和图表。过去我使用 DOJO 的次数不多，希望在该技术方面更有经验的人能够告诉我应该使用哪种存储介质来存储脚本每分钟生成的这些简单指标。我听说过 JSON 方法，但不确定。

谢谢你的时间！

强尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-29T10:01:58.793

只是为了跟进这一点，以防止其他用户偶然发现它。我认为 JSON 绝对是前进的方向。每分钟我都有一个生成如下 JSON 文件的系统。

```
{
"DataDTS"   : "2014.05.02-09:00",
"System"    : "Performance Test",
"SourceServer"  : "gb02qws122debx7",
"OldestData"    : "2014.05.02-09:00",

"MetricData" : {

    "FredHopper Direct" : {
        "Small" : "FH",
        "Type" : "ByMinute",
        "HeaderLevels" : 1,
        "Data": { "Failures":0, "Avg":"0.318", "Min":"0.306", "Max":"0.340" }
    },

    "Performance By Instance" : {
        "Small" : "RATE",
        "Type" : "ByMinute",
        "HeaderLevels" : 2,
        "Sections" : {
            "102.01" : { "Attributes" : ["(20)"], "Data": { "Req":"999", "Avg Resp":"0.254" } },
            "102.02" : { "Attributes" : ["(20)"], "Data": { "Req":"144", "Avg Resp":"0.376" } },
            "103.01" : { "Attributes" : ["(20)"], "Data": { "Req":"168", "Avg Resp":"0.199" } },
            "103.02" : { "Attributes" : ["(20)"], "Data": { "Req":"152", "Avg Resp":"0.283" } },
            "Unallocated" : { "Attributes": [], "Data": {"Req":"87", "Avg Resp":"0.154"} },
            "qws122" : { "Attributes": [], "Data": {"Tot Req":"460", "Rate PPS":"7.7"} }
        }
    },

    "HTML Status" : {
        "Small" : "HTML",
        "Type" : "Status",
        "HeaderLevels" : 1,
        "Data" : [
            { "Code":"200", "Req":447 },
            { "Code":"206", "Req":1 },
            { "Code":"301", "Req":7 },
            { "Code":"302", "Req":5 },
            { "Code":"TOT", "Req":460 }
        ]
    },

    "Page Breakdown" : {
        "Small" : "PB",
        "Type" : "Status",
        "HeaderLevels" : 2,
        "Sections" : {
            "Top 15 Average Response Times" : { 
                "Attributes": [],
                "Data" : [
                    { "URL":"men", "Req":1, "Avg Resp":"3.597", "Cached":"0.0%" },
                    { "URL":"jacques-vert", "Req":1, "Avg Resp":"3.335", "Cached":"0.0%" },
                    { "URL":"OrderOKView", "Req":1, "Avg Resp":"1.615", "Cached":"0.0%" },
                    { "URL":"warehouse", "Req":1, "Avg Resp":"1.050", "Cached":"0.0%" }
                ]
            },                  
            "Top 15 Requests" : {
                "Attributes": [],
                "Data" : [
                    { "URL":"Navigate", "Req":220, "Avg Resp":"0.372", "Cached":"26.4%" },
                    { "URL":"prod", "Req":42, "Avg Resp":"0.186", "Cached":"13.5%" },
                    { "URL":"sureroute-test-object.html", "Req":24, "Avg Resp":"0.001", "Cached":"0.0%" },
                    { "URL":"TopCategories1", "Req":8, "Avg Resp":"0.032", "Cached":"0.0%" }
                ]
            }
        }
    },

    "App server CPU" : {
        "Small" : "CPU",
        "Type" : "ByMinute",
        "HeaderLevels" : 2,
        "Sections" : {
            "qap302" : { "Attributes" : ["Ent:7.0", "Max:8.0", "Mem:32768MB", "Wgt:200"], "Data": { "usr%":"16.8", "iow%":"1.4", "phy":"1.8", "ent%":"25.1" } },
            "qap312" : { "Attributes" : ["Ent:7.0", "Max:8.0", "Mem:32768MB", "Wgt:200"], "Data": { "usr%":"8.1", "iow%":"0.1", "phy":"0.8", "ent%":"11.0" } }
        }
    }

} 
```

# javascript - 在 Windows 8 Metro Javascript 应用程序上实现验证

> ID：11841845
> 
> 赞同：0
> 
> 时间：2012-08-07T08:18:53.637
> 
> 标签：javascript, windows-8, windows-runtime

我正在尝试向我的 Javascript Metro 应用程序添加验证。在 C# 中，可以使用 WinRT XAML 工具包很好地实现它，如 [Windows 8 Metro：实现验证](https://stackoverflow.com/questions/10620145/windows-8-metro-implementing-validation)中所示。如何在不使用 jQuery 验证的情况下在 Javascript 中完成同样的事情？我正在避免使用 jQuery 验证，因为不建议将 jQuery 用于 Metro 风格的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:34:43.607

好吧，默认输入控件支持正则表达式验证。

在 MSDN 上有一个很好的验证示例：http: [//code.msdn.microsoft.com/ie/Form-controls-part-2-327288d9](http://code.msdn.microsoft.com/ie/Form-controls-part-2-327288d9)

虽然它没有完全包裹起来，但它很容易构建。

具体来说，您将不得不处理 oninvalid 事件，这似乎没有在 MSDN 上描述，但受支持。当您提供的正则表达式不匹配时，会引发此问题。

如果您有更深入的验证要求，您要么需要使用 JQuery（应该没问题——没有理由不使用它），要么从该代码中寻求灵感来创建自己的验证方法。

您正在使用的输入控件上有一些有用的方法可以帮助您在需要时以编程方式验证字段。可以在[MSDN](http://msdn.microsoft.com/en-us/library/ie/hh869710%28v=vs.85%29.aspx)上找到有关它们的详细信息。

# mysql - MySQL where-in 子查询只返回一行

> ID：11841850
> 
> 赞同：1
> 
> 时间：2012-08-07T08:19:19.657
> 
> 标签：mysql, subquery, where-in

我有两张桌子课程和学生

说，学生有领域：`id`，`first_name` 有数据

```
id : first_name

1 : Andrew
2 : Brian
3 : Charles
4 : David
5 : Eric
6 : Fred
7 : George 
```

比如说，Course 有两个字段：id 和 students

有数据：

ID 。. . . . . . . 1\. . . . . . 2

学生们 。. . 1,2,5。. . .3,4,6,7

假设我想查找课程 1 中学生的姓名

`SELECT students FROM courses c WHERE c.id = 1;`

按预期产生 1,2,5

还

`SELECT @students := students FROM courses c WHERE c.id =1;`

按预期产生 1,2,5

和

`SELECT s.first_name FROM students s WHERE s.id IN (1,2,5);`

如预期的那样产生安德鲁，布赖恩埃里克

`SET @students := students FROM courses c WHERE c.id =1;` 选择@学生；`

产生 1、2、5

我希望

`SET @students := students FROM courses c WHERE c.id =1;` `SELECT s.first_name FROM students s WHERE s.id IN (@students);`

让安德鲁，布赖恩·埃里克

但它只返回名字：Andrew

我完全知道我可以/应该有一个单独的 course_student 查找表，但我很想知道为什么我没有得到我期望的结果

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:23:14.220

您需要加入两个表：`Students`和`Course`，最好使用`INNER JOIN`

试试这个：

```
SELECT  b.First_name
FROM    Courses a 
            INNER JOIN Students b
                on a.studentID = b.ID
WHERE   a.ID = 1 
```

它应该返回

```
First_Name
==============
Andrew
Brian
Eric 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:32:04.593

您的问题在于您如何使用@students；在“IN”子句中使用时默认为 string*。

所以你的查询实际上看起来像：

```
SELECT s.first_name FROM students s WHERE s.id IN ("1, 2, 5"); 
```

不幸的是，这最终成为：

```
SELECT s.first_name FROM students s WHERE s.id IN (1); 
```

任何一个：

```
SELECT s.first_name 
FROM students s 
WHERE s.id IN (
               SELECT students FROM courses c WHERE c.id =1
               ) 
```

（一个经典的相关子查询）

或者：

```
SELECT s.first_name FROM students s WHERE FIND_IN_SET(`id`, @students) 
```

或者，**更**优选地，使用 @JohnTotetWoo 描述的 INNER JOIN。

*它似乎默认为一个字符串，然后转换为 int 的结果会在第一个逗号后去掉每个数字。但是，它也可能只是 IN 子句的一个怪癖，它忽略了变量中第一个数字之后的所有其他内容。

# mysql - 将重复值添加到原始值

> ID：11841856
> 
> 赞同：-4
> 
> 时间：2012-08-07T08:19:33.107
> 
> 标签：mysql

我有一个包含 6 列字段的表。如果有重复的电子邮件，则根据第二列中的日期选择较新的记录，并从该行中获取除 F 列（第 F 列）之外的所有数据（第 F 列），合并所有记录中的值，例如，如果有

这两行数据应该结合起来：

```
s@s.com 15/12/2012 122 dd34 23ds3 This data
s@s.com 12/12/2012 123 dd35 232d2 Should be combined 
```

结果应该是：

```
s@s.com 15/12/2012 122 dd34 23ds3 This data Should be combined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:26:27.203

```
SELECT
  email, date, column_c, column_d, column_e,
  GROUP_CONCAT(column_f SEPARATOR ' ') AS column_f
FROM (
  SELECT *
  FROM tablename
  ORDER BY date
) i
GROUP BY email
  HAVING date = MAX(date) 
```

[看到它工作](http://sqlfiddle.com/#!2/ee47c/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:19:08.930

如果您仍然缺少数据，我会尝试以下操作......我的预查询正在获取每封电子邮件的最新日期。然后，加入测试表以获取每封电子邮件的日期仅“第一条记录”的详细信息......然后通过电子邮件加入所有其他记录并获取组 concat。

```
select
      FirstRec.Email,
      FirstRec.Date,
      FirstRec.Column_C,
      FirstRec.Column_D,
      FirstRec.Column_E,
      GROUP_CONCAT( BySameEmail.Column_F SEPARATOR ' ' ) as Column_F
   from
      ( select
              email, max( date ) Newest
           from
              test_Table
           group by 
              email ) PQ
         JOIN Test_Table FirstRec
            on PQ.EMail = FirstRec.EMail
           AND PQ.Newest = FirstRec.Date
         JOIN Test_Table BySameEMail
            on PQ.EMail = BySameEMail.EMail
   group by
      FirstRec.EMail 
```

我从 Dave 的答案发布提供的 SQL Fiddle 示例数据中收到了所有 3 封电子邮件。

# iphone - 上传视频文件时 iPhone ASIHTTP 错误

> ID：11841858
> 
> 赞同：0
> 
> 时间：2012-08-07T08:19:38.623
> 
> 标签：iphone, asihttprequest

我正在创建上传的简单文件。文件上传发生了一些意外行为。

当我从 iMac 到 iPhone 运行构建时，它运行良好，没有任何问题。但是当我创建一个构建（ipa）文件时。并从 iTune 安装它。请求失败。

ASIHTTP 可能有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:11:25.930

您可以从以下代码中获取想法。

```
-(IBAction)btnPostData_Clicked: (id)sender
{
    NSString *file2 = [[NSBundle mainBundle] pathForResource:@"Ovation-Mike_Koenig-1061486511" ofType:@"mp3"];

    NSData *file1Data = [[NSData alloc] initWithContentsOfFile:file2];

    NSURL *audiourl = [NSURL URLWithString:@"http://alligator.netsmartz.us/iphone/iphone.php"];

    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:audiourl];

    NSData *postData = [[NSData alloc] initWithContentsOfFile:file2];

    //SoundPath is your audio url path of NSDocumentDirectory.
    [request addData:postData withFileName:@"Ovation-Mike_Koenig-1061486511.mp3" andContentType:@"audio/mp3" forKey:@"company_audio"];

    [request setDelegate:self];

    [request startSynchronous];
} 
```

# c++ - QT：刷新UI的实现机制

> ID：11841865
> 
> 赞同：1
> 
> 时间：2012-08-07T08:20:16.110
> 
> 标签：c++, qt, user-interface

我有一个带有一些小部件的 GUI 应用程序。我想实现一种机制，使小部件能够“注册”到事件（从我定义的列表中），并且当事件发生时，将调用注册到该事件的所有小部件的“刷新”方法。

我想过用“Refresh”方法声明一个“Refreshable”接口。

我的主要问题是我能想到的任何实现（我主要考虑用信号和插槽实现它）都需要从 Refreshable 接口继承`QObject`（因此将存储一些元数据，我将能够使用信号和插槽），这意味着小部件将无法从 Refreshable 派生，因为它们已经`QObject`通过`QWidget`.

任何帮助/想法将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T09:03:17.240

您正在尝试设计一个已经在 Qt 中提供的足够好的解决方案。每个 QWidget 都有槽`repaint()`（强制立即）和`update()`（排队延迟）。这就是你应该为你的可刷新性所需要的一切。换句话说，QWidget 已经实现了理论上的 Refreshable 接口。是的，你的观察是正确的，你不能从 QWidget 继承，而另一个“接口”也必须从 QObject 继承才能声明一个插槽。我认为如果你停止调用它接口会变得更清楚，因为从技术上讲它不是 - 至少在纯虚拟类的意义上。

# java - 清理音乐应用程序缓存 - android

> ID：11841870
> 
> 赞同：0
> 
> 时间：2012-08-07T08:20:40.577
> 
> 标签：java, android, caching

我需要以编程方式清理音乐缓存。我知道，一种方法是获取该应用程序的上下文，例如 com.htc.music，然后 getCacheDir 并删除它，但我不知道如何。第二个选项是使用路径 data/data/com.htc.music/cache 映射文件变量，然后删除子目录，但它不起作用。你有什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:47:53.813

您是否将数据存储在应用程序数据中？如果是这样，您可以在活动中将其删除：YourActivity.this.deleteFile(filename);

# objective-c - 在 UITableView Objective-C 中的每一行附近添加标签颜色

> ID：11841872
> 
> 赞同：2
> 
> 时间：2012-08-07T08:20:41.283
> 
> 标签：objective-c, ios, uitableview

我有一个`UITableView`不同的部分和行。我想在每个单元格附近有不同的标签或图像，例如图标，但我不知道为什么它看起来像这张图片：

滚动也改变了标签的大小！

这是代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

NSString *key = [[self sectionKeys] objectAtIndex:[indexPath section]];
NSArray *contents = [[self sectionContents] objectForKey:key];
NSString *contentForThisRow = [contents objectAtIndex:[indexPath row]];

static NSString *CellIdentifier = @"CellIdentifier";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault  
reuseIdentifier:CellIdentifier];
}
if(indexPath.row == 0)
{
    UILabel* label = [[UILabel alloc] initWithFrame:CGRectMake(3,0,40,40)];
    label.backgroundColor = [UIColor darkGrayColor];
    [cell.contentView addSubview:label];

}
else if(indexPath.row == 1)
{
    UILabel* label = [[UILabel alloc] initWithFrame:CGRectMake(3,0,40,40)];
    label.backgroundColor = [UIColor redColor];
    [cell.contentView addSubview:label];    }
else if(indexPath.row == 2)
{
    UILabel* label = [[UILabel alloc] initWithFrame:CGRectMake(3,0,40,40)];
    label.backgroundColor = [UIColor redColor];
    [cell.contentView addSubview:label];    }
else{

}
[[cell textLabel] setText:contentForThisRow];
return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:25:06.163

在您的代码中，当用户滚动表格时，标签创建了很多次！您必须检查单元格中是否已存在颜色标签，然后设置颜色

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
int colorLabelTag = 9999;
if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault  
                                  reuseIdentifier:CellIdentifier];     
}

// Because table cells are reusing we must check is label already in cell
UILabel* label = (UILabel *) [cell viewWithTag:colorLabelTag];
// If no - we create label
if (!label) {
    UILabel* label = [[UILabel alloc] initWithFrame:CGRectMake(3,0,40,40)];
    label.tag = colorLabelTag;
    [cell addSubview:label];
}

if(indexPath.row == 0)
{
    label.backgroundColor = [UIColor darkGrayColor];        
}
else if(indexPath.row == 1)
{
    label.backgroundColor = [UIColor redColor];
}
else if(indexPath.row == 2)
{
    label.backgroundColor = [UIColor redColor];
}
[[cell textLabel] setText:contentForThisRow];
return cell; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:07:05.513

除非您想要比这更多的自定义，否则不需要对单元格进行子类化。让我试一试：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    NSString *key = [[self sectionKeys] objectAtIndex:[indexPath section]];
    NSArray *contents = [[self sectionContents] objectForKey:key];
    NSString *contentForThisRow = [contents objectAtIndex:[indexPath row]];

    static NSString *CellIdentifier = @"CellIdentifier";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault  
    reuseIdentifier:CellIdentifier];
        // If you need to add more custom views then create them here. E.g.: 
        UILabel *myLable = [[UILabel alloc] initWithFrame:CGRectMake(10,200,20,20)];
        myLable.text = @"Some Value";
        label.tag = 101; // use anything but 1\. Better use a constant expression.
        [cell.contentView addSubview:myLable];
    }
    switch (indexPath.row) {
      case 1: 
        cell.imageView.image = [UIImage imageNamed:@"red.png"];
        break;

      case 2: 
        cell.imageView.image = [UIImage imageNamed:@"blue.png"];
        break;

      case 3: 
        cell.imageView.image = [UIImage imageNamed:@"green.png"];
        break;
    }  

   UILabel* theLabel = (UILabel *) [cell viewWithTag:101]; // again, a constant is of better style here. 
   if (theLabel  { // it must exist. However, it is good practice to check upon that. 
    label.text = @"someOtherValue";
   }

    [[cell textLabel] setText:contentForThisRow];

    // you may need to layout your subviews here. 

    return cell;
} 
```

# java - 使用 Java 创建可打印的日程安排/文档

> ID：11841873
> 
> 赞同：1
> 
> 时间：2012-08-07T08:20:41.760
> 
> 标签：java, user-interface

我必须创建一个 java 程序，为运动场建立一个“整洁”的每日时间表。该程序接收一个带有“不整洁”每日预订列表的 excel 文件，其中包含以下信息：

*   开始时间
*   时间结束
*   法庭
*   客户

我可以阅读此信息并将其存储在“BookingObjects”中。

我的问题是这样的：

什么是创建可打印时间表输出的优雅方式，例如，类似于 Microsoft Outlook 显示的时间表，以时间为行，在列中预订所在的球场。时间表不需要是交互式的，只需要可以通过程序的 GUI 打印，如果它可以在 GUI 中显示，这也是一种奖励吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:03:37.997

我们最近迁移到[Jasper Reports](http://jasperforge.org/projects/jasperreports/)，主要原因是我们以 PDF、Excel 和打印机生成报告，所有这些都必须通过不同的代码和不同的库执行。Jasper Reports 允许我们使用单个引擎。

虽然并不完美，但它在不同的导出选项中表现出色。

它确实有一个小的学习曲线，但基础知识允许您提供一个`List`对象，然后您可以从报告中访问这些对象并填充您的视图。

同样，您可以简单地将 SQL 数据源直接连接到它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:42:41.330

打印是 Java 的痛处之一。您可以尝试创建一个带有表格的 UI（参见[Swing trail](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)的示例），然后[打印该表格](http://docs.oracle.com/javase/tutorial/uiswing/misc/printtable.html)。

当表格不适合单页纸时，问题就会开始。如果它更长，那么会在页边空白处打印一些行（其中一半会出现在前一页，下半部分会出现在下一页）。如果它更宽，......我们不要去那里。

或者，您可以尝试使用[JasperReports](http://jasperforge.org/projects/jasperreports/)或[BIRT](http://www.eclipse.org/birt/)等工具创建 PDF 。这些效果更好，但需要一些时间来了解它们的工作原理。

# linux - 如何修改 isolinux.cfg？

> ID：11841880
> 
> 赞同：1
> 
> 时间：2012-08-07T08:21:31.683
> 
> 标签：linux, boot, bootloader

我使用[SARDU](http://www.sarducd.it/)制作多引导的 live DVD。首先我制作了live usb，它完美地制作了我可以修改的地方。然后我尝试制作我无法修改`isolinx.cfg`但在 USB 中我可以修改的dvd `syslinux.cfg`。我该如何修改`isolinux.cfg`然后如何启动 cd？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:48:24.227

DVD 是一次写入媒体。当文件`isolinux.cfg`被“刻录”到 DVD 磁盘时，就无法更改它（好吧，你可以用一个小针刮掉它......）

您可以使用覆盖文件系统，但这无济于事，因为引导加载程序不支持它（文件系统需要内核，因此引导加载程序需要首先启动内核以读取其自己的配置文件）。

**[编辑]**一种解决方案是在某处创建 DVD 文件的副本，进行更改并从中创建新的 DVD 映像（iso 文件）。

接下来，确保更改已进入映像（`mount -o loop file.iso /mnt`然后查看下的文件`/mnt`。不要忘记替换`file.iso`为硬盘上 ISO/DVD 映像文件的正确名称！！）

如果没问题，请使用 DVD 映像创建一个可引导的 U 盘。这样，您可以测试映像是否实际启动，而不会浪费 DVD。

一切正常后，刻录 DVD。

# php - 如何使用 Symfony 将参数传递给控制器 ？

> ID：11841886
> 
> 赞同：2
> 
> 时间：2012-08-07T08:21:54.787
> 
> 标签：php, symfony, controller

我像这样将 var argurmrnt 传递给控制器

```
return $this->redirect($this->generateUrl('user_profile', array('var' => $profile->getId()))); 
```

这是我的控制器

```
/**

         * @Route("/profile", name="user_profile")
         * @Template()
         */
        public function ProfileAction($var)
        {
            $em = $this->getDoctrine()->getEntityManager(); 
```

但我不断收到错误

> 控制器 "xxxx\Controller\UserController::ProfileAction()" 要求您为 "$var" 参数提供一个值（因为没有默认值或因为在此参数之后有一个非可选参数）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T08:24:09.120

[根据文档](http://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/annotations/routing.html)，您忘记在路线中添加占位符

```
 /**
     * @Route("/profile/{var}", name="user_profile")
     * @Template()
     */
    public function ProfileAction($var)
    {
        $em = $this->getDoctrine()->getEntityManager(); 
```

# sms - 电晕SDK。如何从收件箱中读取短信？

> ID：11841887
> 
> 赞同：0
> 
> 时间：2012-08-07T08:21:58.360
> 
> 标签：sms, coronasdk

电晕SDK。如何从收件箱中读取短信？

是否可以？

还是只能在android SDK中读取短信？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T00:19:46.753

目前不可能！

在 iphone 中，您可以使用打开短信应用程序

```
system.openURL("Sms://") 
```

# android - 如何在保持标签和标记（覆盖）不旋转的同时旋转 MapView？

> ID：11841890
> 
> 赞同：-1
> 
> 时间：2012-08-07T08:22:15.230
> 
> 标签：android, google-maps

我正在开发一个`MapActivity`显示从当前位置到`GeoPoint`.

`MapView`必须启用指南针；它应该根据用户面对的方向旋转。我可以`MapView`使用示例`RotateView`中提到的旋转`MapsDemo`。

```
android-sdk-macosx/add-ons/addon-google_apis-google-8/samples/MapsDemo 
```

这里的问题是整体`MapView`旋转，导致标签和标记旋转。

有什么方法可以`MapView`通过适当的可读标签和标记来实现旋转？

我必须支持 Android 2.2 版，所以`MapView.rotate()`即使有帮助也无法使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:15:53.743

不可能，在 Oreintation Change 时，整个 mapview 被重绘并弹出一个异常，我遇到了同样的问题，不得不修复方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:34:10.440

一旦设备方向改变，整个地图视图和标记和标签都会重新绘制..不要认为它可能..

# delphi - 如何在 Delphi 7 中将 WIdeChar 数组设为空？

> ID：11841896
> 
> 赞同：1
> 
> 时间：2012-08-07T08:22:28.950
> 
> 标签：delphi, delphi-7

我有一个 WideChar 数组。我想把它清空（目前装满垃圾）。我想知道如何使用 WideChar 数组来做到这一点，就像我们使用 = #0; 的 char 数组一样。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T07:00:21.730

delphi 函数`FillChar`就是这样做的方法。如果您有一个名为 的数组`Arr1`，只需使用它`FillChar(Arr1,SizeOf(Arr1),#0)`即可完成目标。

# c - 使用嵌入式 C 中的指定初始化程序初始化结构。“需要一个表达式”

> ID：11841900
> 
> 赞同：3
> 
> 时间：2012-08-07T08:22:57.917
> 
> 标签：c, struct, initialization, keil

我正在尝试初始化一个结构，并将值分配给结构变量。

我的结构：

> ```
>  typedef struct 
>   {
>     q31_t A0;
>     q31_t A1;
>     q31_t A2;
>     q31_t State[3];
>     q31_t Kp;
>     q31_t Ki;
>     q31_t Kd;
>    } arm_pid_instance_q31; 
> ```

当我尝试声明和初始化变量时，我使用指定的初始化程序：

> ```
> arm_pid_instance_q31 pitch_pid_instance
> ={
>   .A0 = 0,
>   .A1 = 0,
>   .A2 = 0,
>   .State ={0,0,0},
>   .Kd = 0, 
>   .Ki = 0, 
>   .Kp = 0 
>  }; 
> ```

我将 Keil µVision4 和 ARM C 编译器用于嵌入式项目。编译此代码时，编译器返回**错误 #29: Expected an expression**。该错误发生在初始化代码的每一行。

我读到这是用 ANSI C99 编写时要走的路，但这在我的情况下不起作用。[如何在 ANSI C99 中初始化结构](https://stackoverflow.com/questions/330793/how-to-initialize-a-struct-in-ansi-c99)

我知道我可以编写“坏”代码：

> ```
>  arm_pid_instance_q31 pitch_pid_instance;
>    pitch_pid_instance.A0 = 0; 
>    etc... 
> ```

但...

有小费吗？

* * *

更新：以下代码有效：

> ```
>  arm_pid_instance_q31 pitch_pid_instance = {0,0,0,0,0,0,0,0,0}; 
> ```

但同样，这不是一个特别漂亮的代码或方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:50:07.247

如果您正在初始化所有内容以`0`仅使用**通用零初始化程序**（并忽略编译器给您的任何虚假警告）。**通用零初始化器**是有效的C89、C99、C11（我相信它在 C89 之前也是有效的）。

```
arm_pid_instance_q31 pitch_pid_instance = {0};
struct somecomplexstruct array[1000] = {0}; 
```

...我相信你明白了

* * *

如果你想初始化为 0 以外的值，并且你没有 C99 编译器，那么你需要单独进行，就像在你的“坏”代码中一样。

或者您可以将需要初始化的部分分开并**复制**（而不是初始化）它们

```
struct substruct {
    q31_t Kp;
    q31_t Ki;
    q31_t Kd;
};
struct arm_pid_instance_q31 {
    q31_t A0;
    q31_t A1;
    q31_t A2;
    q31_t State[3];
    struct substruct K;
};

struct substruct tmp = {42, -1, -1000};
struct arm_pid_instance_q31 pitch_pid_instance; /* uninitialized */
memcpy(&pitch_pid_instance.K, &tmp, sizeof tmp); /* copy values */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T13:32:08.743

默认情况下 keil RCVT 使用 C90 标准。如果你想为你的结构初始化使用这样的语法，你可以在编译器选项中添加“--c99”：目标选项 -> C/C++ -> 其他控制。

[源码keil在线支持](http://www.keil.com/support/man/docs/armccref/armccref_babdgfjd.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T08:27:04.233

该`State`数组应初始化为：

```
.State = {0, 0, 0}, 
```

# c# - Oracledependency 事件未触发

> ID：11841901
> 
> 赞同：4
> 
> 时间：2012-08-07T08:22:59.763
> 
> 标签：c#, oracle11g

我在使用 OracleDependency 时遇到了一些问题。

我已经阅读了 msdn 和 oracle 上的文档并复制了一些代码来尝试一下。

但是，这不起作用，插入完成后事件 on_my_event 不会触发。

有谁知道为什么？

我的用户对数据库具有更改通知权限。Oracle 服务器是 11.2.0.3.0。

这是代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using Oracle.DataAccess.Client;

namespace WindowsFormsApplication1
{
public partial class Form1 : Form
{
    string connection_string = "Data Source=My_srv;User Id=My_usr;Password=My_pwd;";
    OracleConnection connection = null;
    OracleDependency dependency = null;
    OracleCommand my_select = null;
    OracleCommand my_insert = null;

    public Form1()
    {
        InitializeComponent();
    }

    private void TB_insert_event(object sender, EventArgs e)
    {
        if (TB_insert.Text == "Name of your insert")
            TB_insert.Clear();
    }

    private void insert(object sender, EventArgs e)
    {
        connection = new OracleConnection(connection_string);
        my_insert = connection.CreateCommand();
        my_insert.CommandText = "INSERT INTO USR_DEV_TRUNK.WPARAM (wpa_codeparam) VALUES ('" + TB_insert.Text + "')";
        connection.Open();
        my_insert.ExecuteNonQuery();
        connection.Close();
    }

    private void Set_dep(object sender, EventArgs e)
    {
        OracleDependency.Port = 3048;
        connection = new OracleConnection(connection_string);
        connection.Open();
        my_select = connection.CreateCommand();
        my_select.CommandText = "SELECT wpa_codeparam FROM USR_DEV_TRUNK.WPARAM";
        dependency = new OracleDependency();
        dependency.AddCommandDependency(my_select);
        my_select.Notification.IsNotifiedOnce = false;
        my_select.ExecuteNonQuery();
        dependency.OnChange += new OnChangeEventHandler(on_my_event);
        TB_dependency.Text = "The dependency is set, do your insert to see if it works";
        connection.Close();
    }

    public void on_my_event(object obj, OracleNotificationEventArgs arg)
    {
        TB_dependency.Text = "Yay ! It worked !";
    }
  }
} 
```

我有两个按钮：

一个设置我的依赖项（功能（点击时）：Set_dep）

一个做我的插入（功能（点击）：插入）

我有两个文本框：

一个得到我的插入（名称：TB_insert）

一种显示依赖状态（名称：TB_dependency）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T09:17:06.170

您是否确保端口 3048 上的数据包没有被防火墙阻止？

此外，一旦设置了依赖项，您可以通过查询 USER_CHANGE_NOTIFICATION_REGS / DBA_CHANGE_NOTIFICATION_REGS 视图来查看它吗？

# javascript - 为什么 Google 不在其首页 Javascript 中优化日期/时间结构

> ID：11841907
> 
> 赞同：5
> 
> 时间：2012-08-07T08:23:29.890
> 
> 标签：javascript, datetime, optimization

在 JavaScript 中，我们可以得到一个代表当前日期/时间的数字，如下所示：

```
var dt = new Date();
var e = dt.getTime(); 
```

这样做的稍微短一点的方法可能是：

```
var f = (new Date()).getTime(); 
```

最紧凑的方式体现在以下代码中：

```
var g = +new Date;  //11 bytes shorter 
```

（看到他们在这里工作：http: [//jsfiddle.net/es4XW/2/](http://jsfiddle.net/es4XW/2/)）

现在，当你搜索谷歌首页的源代码时，你会发现第二个约定被使用了 11 次。因此，Google 似乎每次都可以节省 11 个字节——总共 121 个字节。

压缩和缓存将在缓解这一问题中发挥作用，但谷歌肯定值得做这个简单的转换。

将此与亚马逊的首页代码进行比较和对比，后者确实使用了第三种约定（尽管并非在所有情况下）。

那么为什么谷歌对这种优化不感兴趣呢？尽管 121 字节对我们大多数人来说是微不足道的，但我原以为他们会对从首页挤出最后一点性能感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T09:05:10.673

我会说可读性和可维护性超过了边际字节节省。此外，前两个选项是面向未来的，而第三个选项是一个实现细节，它可能会在不同的引擎（例如 Rhino、Node）中改变或工作方式不同。

您的示例的第 4 种可能性是将调用包装到一个函数中：

```
var now = function() {
    return (new Date().getTime());
} 
```

当然，一旦你调用它至少几次，这只会节省几个字节。

# iphone - 当值为空时如何显示警报

> ID：11841911
> 
> 赞同：0
> 
> 时间：2012-08-07T08:23:43.287
> 
> 标签：iphone, objective-c, ipad, uialertview

我想在值为 null 时显示警报我有 titleCategory 如果它的值为 null 那么它应该显示警报

```
NSString*test=titleCategory;
if ([titleCategory isEqualToString:nil]) 
{
    UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"Alert" message:@"Select Category " delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
    [alert release];
}
else
{
    FirstViewController*targetController=[[FirstViewController alloc]init];
    [self.navigationController pushViewController:targetController animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:32:33.607

```
if(test == nil)
{
    UIAlertView* alert = [[[UIAlertView alloc] initWithTitle:@"" message:@"Test is null" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil] autorelease];
    [alert show];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:46:54.420

做这个：

```
if (!(titleCategory.length > 0) || titleCategory == nil ) 
{
  UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"Alert" message:@"Select Category " delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
  [alert show];
  [alert release];
}
else 
{
   FirstViewController*targetController=[[FirstViewController alloc]init];
   [self.navigationController pushViewController:targetController animated:YES];
   [targetController release]; // if not ARC 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T09:49:08.613

请使用此代码：

```
if([titleCategory.text isKindOfClass:[NSNull class]]){
    UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"Alert" message:@"Select 
    Category " delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
    [alert release];
  }
  else{
     FirstViewController*targetController=[[FirstViewController alloc]init];
     [self.navigationController pushViewController:targetController animated:YES];
     [targetController release]; // if not ARC 
  } 
```

# apache2 - 混淆 apache 的服务器状态

> ID：11841914
> 
> 赞同：0
> 
> 时间：2012-08-07T08:23:46.920
> 
> 标签：apache2

我有一个带有 Apache 2.2.3 的 CentOS 5.5 Final ... 我正在检查可能的错误配置或类似情况，所以我解决了服务器状态，它向我报告了这个结果，只打开了服务器状态页面：

```
Apache Server Status for 192.168.3.23

Server Version: Apache/2.2.3 (CentOS)
Server Built: Aug 30 2010 12:32:08

Current Time: Tuesday, 07-Aug-2012 10:10:23 CEST
Restart Time: Tuesday, 07-Aug-2012 10:04:40 CEST
Parent Server Generation: 0
Server uptime: 5 minutes 42 seconds
Total accesses: 5 - Total Traffic: 19 kB
CPU Usage: u0 s0 cu0 cs0
.0146 requests/sec - 56 B/second - 3891 B/request
1 requests currently being processed, 7 idle workers

_____W__........................................................
................................................................
................................................................
................................................................

Scoreboard Key:
"_" Waiting for Connection, "S" Starting up, "R" Reading Request,
"W" Sending Reply, "K" Keepalive (read), "D" DNS Lookup,
"C" Closing connection, "L" Logging, "G" Gracefully finishing,
"I" Idle cleanup of worker, "." Open slot with no current process

Srv PID     Acc     M   CPU     SS  Req Conn    Child   Slot    Client     VHost        Request
0-0 28511   0/1/1   _   0.00    248 0   0.0     0.00    0.00    X.X.X.X    127.0.0.1    GET /server-status HTTP/1.1
1-0 28512   0/1/1   _   0.00    238 0   0.0     0.00    0.00    X.X.X.X    127.0.0.1    GET /server-status HTTP/1.1
2-0 28513   0/1/1   _   0.00    225 0   0.0     0.00    0.00    X.X.X.X    127.0.0.1    GET /server-status HTTP/1.1
3-0 28515   0/1/1   _   0.00    218 0   0.0     0.00    0.00    X.X.X.X    127.0.0.1    GET /server-status HTTP/1.1
4-0 28516   0/1/1   _   0.00    7   0   0.0     0.00    0.00    X.X.X.X    127.0.0.1    GET /server-status HTTP/1.1
5-0 28517   0/0/0   W   0.00    0   0   0.0     0.00    0.00    X.X.X.X    127.0.0.1    GET /server-status HTTP/1.1 
```

由于我是唯一一个正在查看该页面的人，即使我在浏览器上使用 CTRL+F5 刷新页面，结果不应该只显示一行吗？如果是，您认为可能存在一些错误配置吗？

# android - Android列表项在点击时动画文本

> ID：11841916
> 
> 赞同：1
> 
> 时间：2012-08-07T08:23:53.353
> 
> 标签：android, listview, animation

我有一个列表视图，在单击列表中的一个项目时，我想滑出项目的文本并打开另一个活动。我已经成功实现了动画部分。

但是有一个问题：

当我使用 setFillAfter(true) 将文本滑出屏幕并开始新活动时，一旦用户返回列表视图，如何取回项目的文本？我只想在返回时看到文本（没有任何动画）。目前它是不可见的。

```
list.setOnItemClickListener(new OnItemClickListener() {
   public void onItemClick(AdapterView<?> myAdapter, View myView, int myItemInt, long mylng)
{
    //show animation
    Animation a = AnimationUtils.loadAnimation(this, R.anim.slide_out_left);
    text= (TextView) myView.findViewById(R.id.text);

    text.startAnimation(a);
    a.setFillAfter(true);

    // Start Activity
    startActivity(new Intent(MyClass.this, DetailClass.class);
}
}); 
```

以上是简化的代码。回到列表活动后，文本仍然不可见。

谢谢，

# openssl - 为 ARM 交叉编译 OpenSSH

> ID：11841919
> 
> 赞同：15
> 
> 时间：2012-08-07T08:24:15.807
> 
> 标签：openssl, arm, cross-compiling, zlib, openssh

有人知道我如何为 ARM 交叉编译 OpenSSH 吗？这就是我所做的：

首先，我下载了 Zlib 源代码，解压缩，构建并使用以下命令行安装它：

```
 # ./configure --prefix=/usr/local/cross/arm

   # make 

   # make install 
```

但是当我尝试为 ARM 目标板编译 OpenSSH 时，在此`./configure`过程中会出现错误“zlib missing”：

```
 # sudo LDFLAGS=-L/usr/local/cross/arm/lib CC=arm-none-linux-gnueabi-gcc PATH=$PATH:/home/arishop/arm-tool-chain/arm-fsl-linux-gnueabi/bin/ ./configure --host=arm-linux --with-zlib=/usr/local/cross/arm/ --prefix=/usr/local/cross/arm/openssh 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-26T20:12:08.630

为了交叉编译 ARM 的 openSHH（在我的例子中是 mini2440），我做了以下操作：

安装 arm 交叉编译器 - （例如[arm-linux-gcc 是什么以及如何在 ubuntu 中安装它](https://stackoverflow.com/questions/11118051/what-is-arm-linux-gcc-and-how-to-install-this-in-ubuntu)）

下载：

*   兹库
*   OpenSSL
*   开放SSH

构建 Zlib：

```
cd zlib-1.2.7
CC=arm-linux-gnueabi-gcc
./configure --prefix=$HOME/zlibArm
make 
make install 
```

构建 OpenSSL：

```
export cross=arm-linux-gnueabi-
cd openssl-1.0.1c
./Configure dist --prefix=$HOME/opensslArm
make CC="${cross}gcc" AR="${cross}ar r" RANLIB="${cross}ranlib"
make install 
```

构建 OpenSSH：

```
./configure --host=arm-linux --with-libs --with-zlib=$HOME/zlibArm --with-ssl-dir=$HOME/opensslArm --disable-etc-default-login CC=gcc-arm-linux-gnueabi-gcc AR=gcc-arm-linux-gnueabi-ar
make 
```

更多信息请访问[http://code.google.com/p/openssh4mini2440/wiki/HowTo](http://code.google.com/p/openssh4mini2440/wiki/HowTo)，下载源代码并阅读“build.sh”

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-01-12T07:56:35.517

使用的板子是Mini6410。OpenSSH 的要求包括 zlib 和 OpenSSL。我准备

*   zlib 1.2.8
*   OpenSSL 1.0.1e
*   OpenSSH 6.4p1

我的工具链是由 crosstool-NG 1.15.2 构建的。下面的工具链配置是从 arm-unknown-linux-gnueabi 修改而来的。

```
Arch:         armv6
CPU:          arm1176jzf-s
FPU:          vfp
Linux kernel: 2.6.38.8
binutils:     2.19.1a
gcc:          4.6.3
glibc:        2.11
gmp:          4.3.2
mpfr:         3.0.1
ppl:          0.11.2
cloog:        0.15.11
mpc:          0.9 
```

接下来我定义了三个环境变量`HOST`,`ROOTFS`和`SYSROOT`。`HOST`是 arm-unknown-linux-gnueabi。`ROOTFS`显然是根文件系统。`SYSROOT`是作为工具链中头文件和库的根目录的目录。

您可以添加`CFLAGS`并`LD_LIBRARY_PATH`指向您的根文件系统，以便交叉编译器可以找到您已安装的内容。但是，我不喜欢设置这些变量。`SYSROOT`另一种方法是在和中安装这些库`ROOTFS`。

## 一、编译zlib

```
AR=$HOST-ar CC=$HOST-gcc RANLIB=$HOST-ranlib ./configure --prefix=$ROOTFS/usr
make
make install 
```

## 二、编译OpenSSL

```
./Configure linux-armv4 shared zlib-dynamic --prefix=/usr
make CC=$HOST-gcc AR="$HOST-ar r" RANLIB=$HOST-ranlib
make CC=$HOST-gcc AR="$HOST-ar r" RANLIB=$HOST-ranlib INSTALL_PREFIX=$ROOTFS install 
```

请注意，`--prefix`设置为`/usr`而不是`$ROOTFS/usr`. 原因是如果你设置`--prefix`为`$ROOTFS/usr`，它会尝试`$ROOTFS/usr`在 Mini6410 上运行时访问配置文件，而 Mini6410 并不存在。Makefile 中指定的安装路径是`$INSTALL_PREFIX/$PREFIX`，所以我们使用`$ROOTFS`for `$INSTALL_PREFIX`。

## 最后，编译 OpenSSH

1.  `./confgure --host=$HOST --prefix=/usr`
2.  删除变量`STRIP_OPT`并在 Makefile`check-config`中的规则。`install`
3.  `make && make DESTDIR=$ROOTFS install`
4.  启动 Mini6410 并使用命令`ssh-keygen`生成主机密钥。

使用`/usr`for的原因`--prefix`与 OpenSSL 相同。如果您指定`--prefix=$ROOTFS/usr`，您将无法执行命令`scp`。

`STRIP_OPT`必须删除，因为不可能`/usr/bin/install`在 x86-64 上使用来剥离 ARM 上的二进制文件。该规则`check-config`将在主机上运行生成`sshd`的，因此我们必须避免这种情况。

在最后一步，检查 Makefile 并找到 rule `host-key`。下一行是，这意味着如果 的长度不为零`@if [ -z "$(DESTDIR)" ] ; then`，它什么也不做。`$(DESTDIR)`因此，我们必须在 Mini6410 上手动生成这些密钥：

```
ssh-keygen -t rsa1 -f /usr/etc/ssh_host_key -N ""
ssh-keygen -t dsa -f /usr/etc/ssh_host_dsa_key -N ""
ssh-keygen -t rsa -f /usr/etc/ssh_host_rsa_key -N ""
ssh-keygen -t ecdsa -f /usr/etc/ssh_host_ecdsa_key -N "" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T15:27:37.480

I do like this

```
CC=arm-none-linux-gnueabi-gcc RANLIB=arm-none-linux-gnueabi-ranlib ./Configure linux-armv4 --prefix=$OPENSSLARM --openssldir=$OPENSSLARM

make CC=arm-none-linux-gnueabi-gcc AR="arm-none-linux-gnueabi-ar r" RANLIB="arm-none-linux-gnueabi-ranlib"

make install

```

# java - 如何为 JSF 类编写 Arquillian 测试

> ID：11841921
> 
> 赞同：0
> 
> 时间：2012-08-07T08:24:27.070
> 
> 标签：java, jsf, jakarta-ee, jboss, jboss-arquillian

我正在尝试对植根于 JSF API 的数据模型执行 arquillian 测试。我收到此错误：

```
Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.046 sec <<< FAILURE!
initializationError(mypackage.GenericLazyModelTest)  Time elapsed: 0.003 sec  <<< ERROR!
java.lang.ClassFormatError: Absent Code attribute in method that is not native 
or abstract in class file javax/faces/model/DataModel 
```

简单的 arquillian 测试，不涉及 JSF，但 JPA 和 EJB API 运行良好。
对网络的研究表明，造成这种情况的一个常见原因是使用了[此处](https://community.jboss.org/wiki/WhatsTheCauseOfThisExceptionJavalangClassFormatErrorAbsentCode)和[此处](http://www.adam-bien.com/roller/abien/entry/trouble_with_crippled_java_ee)所述的 sun 的存根 EE API 。

我绝对不会使用它们。这是我的依赖部分`pom`：

```
 <dependencyManagement>
      <dependencies>
        <dependency>
          <groupId>org.jboss.bom</groupId>
          <artifactId>jboss-javaee-6.0-with-tools</artifactId>
          <version>${javaee6.with.tools.version}</version>
          <type>pom</type>
          <scope>import</scope>
        </dependency>
      </dependencies>
   </dependencyManagement> 
```

```
<dependency>
  <groupId>javax.enterprise</groupId>
  <artifactId>cdi-api</artifactId>
  <scope>provided</scope>
</dependency>

<dependency>
  <groupId>javax.faces</groupId>
  <artifactId>jsf-api</artifactId>
  <version>2.1</version>
  <scope>provided</scope>
</dependency>

<dependency>
  <groupId>org.jboss.spec.javax.annotation</groupId>
  <artifactId>jboss-annotations-api_1.1_spec</artifactId>
  <scope>provided</scope>
</dependency>

<dependency>
  <groupId>org.jboss.spec.javax.ws.rs</groupId>
  <artifactId>jboss-jaxrs-api_1.1_spec</artifactId>
  <scope>provided</scope>
</dependency>

<dependency>
  <groupId>org.hibernate.javax.persistence</groupId>
  <artifactId>hibernate-jpa-2.0-api</artifactId>
  <scope>provided</scope>
</dependency>

<dependency>
  <groupId>org.jboss.spec.javax.ejb</groupId>
  <artifactId>jboss-ejb-api_3.1_spec</artifactId>
  <scope>provided</scope>
</dependency>

<dependency>
  <groupId>org.hibernate</groupId>
  <artifactId>hibernate-validator</artifactId>
  <version>4.2.0.Final</version>
  <scope>provided</scope>
  <exclusions>
    <exclusion>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-api</artifactId>
    </exclusion>
  </exclusions>
</dependency>

<dependency>
  <groupId>org.hibernate</groupId>
  <artifactId>hibernate-jpamodelgen</artifactId>
  <version>1.1.1.Final</version>
  <scope>provided</scope>
</dependency>

<dependency>
  <groupId>org.primefaces</groupId>
  <artifactId>primefaces</artifactId>
  <version>3.3.1</version>
</dependency>

<dependency>
  <groupId>junit</groupId>
  <artifactId>junit</artifactId>
</dependency>

<dependency>
  <groupId>org.jboss.arquillian.junit</groupId>
  <artifactId>arquillian-junit-container</artifactId>
  <scope>test</scope>
</dependency>

<dependency>
  <groupId>org.jboss.arquillian.protocol</groupId>
  <artifactId>arquillian-protocol-servlet</artifactId>
  <scope>test</scope>
</dependency>

<dependency>
  <groupId>org.jboss.shrinkwrap.resolver</groupId>
  <artifactId>shrinkwrap-resolver-impl-maven</artifactId>
  <scope>test</scope>
</dependency> 
```

我还尝试使用内部 JBoss JSF API 进行测试，但对错误没有影响：

```
 <dependency> 
   <groupId>org.jboss.spec.javax.faces</groupId> 
   <artifactId>jboss-jsf-api_2.1_spec</artifactId> 
   <version>2.0.0.Beta1</version> 
   <scope>test</scope> 
 </dependency> 
```

我的模型来源于primefaces`LazyDataModel`

```
public class GenericLazyModel<T> extends LazyDataModel<T> 
```

`LazyDataModel`反过来又来源于`javax.faces.model.DataModel`

```
public abstract class LazyDataModel<T> extends DataModel<T> implements SelectableDataModel<T>, Serializable 
```

测试大部分是空的，我要求注入我的模型并检查`null`：

**编辑**ShrinkWrap 初始化现在包括`faces-config.xml`stefanglase 提出的。虽然没有改变错误输出。

```
 @RunWith(Arquillian.class)
    public class GenericLazyModelTest {

        @Deployment
        public static Archive<?> createTestArchive() {

          return ShrinkWrap
            .create(WebArchive.class, "genericLazyModelTest.war")
                .addClasses(GenericLazyModel.class, Submitter.class, SubmitterPK.class,
                            Ordering.class)
                .addClasses(GenericDao.class, Resources.class)
                .addAsResource("META-INF/persistence.xml", "META-INF/persistence.xml")
                .addAsWebInfResource(new StringAsset("<faces-config version=\"2.0\"/>"), "faces-config.xml")                            
                .addAsWebInfResource(EmptyAsset.INSTANCE, "beans.xml");
        }

        @Inject
        GenericLazyModel<Submitter> model;

        @Before
        public void before() {
            Assert.assertNotNull(model);
            model.setKlazz(Submitter.class);
        } 
```

我在 Jboss 7.1.0.Final 上运行它。
关于可能是什么问题以及如何解决它的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:39:16.983

您在部署中缺少`faces-config.xml`。Java EE 6 规范要求`faces-config.xml`在您的 - 目录中存在一个描述符以`WEB-INF`触发 JSF。

与`beans.xml`您已经包含的`faces-config.xml`描述符不同，它不能是空文件。它必须至少包含根节点和版本属性以指定使用的 JSF 版本。

因此，您需要将以下代码添加到 ShrinkWrap 构建器：

```
.addAsWebInfResource(new StringAsset("<faces-config version=\"2.0\"/>"), "faces-config.xml"); 
```

# java - 使用 Java 构建 HTML5 离线 Web 应用程序

> ID：11841923
> 
> 赞同：2
> 
> 时间：2012-08-07T08:24:38.467
> 
> 标签：java, html, offline-mode

我想构建 HTML5 离线 Web 应用程序，但想用纯 Java 编写代码。我见过[Sencha GXT 3](http://www.sencha.com/products/gxt/download)但我不确定它是否支持离线缓存 HTML5。

如果您对 HTML5 离线 Web 应用程序有任何经验，请告诉我哪个更好。

更多详情：

我想将此 HTML5 应用程序托管到网络服务器。用户浏览此应用程序并将其自身下载到用户的手机中。使用此应用程序，用户可以填写报告、报告 GPS 坐标、拍摄快照并将它们保存在移动设备的每个单独文件夹中，当移动设备连接到 Internet 时，它会上传所有数据。

由于这是一个 HTML5 并部署在某些网络服务器上，因此任何具有浏览器的手机的用户都应该使用它。**这可能吗 ？？？**

[GWT 手机Gap 展示Android Market](https://play.google.com/store/apps/details?id=com.gwtmobile.phonegap&hl=en)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:07:30.127

看看[mgwt](http://www.m-gwt.com)它有一个适用于任何 GWT 项目的离线链接器，请参阅：[http ://code.google.com/p/mgwt/wiki/HTML5Manifest](http://code.google.com/p/mgwt/wiki/HTML5Manifest)

# sql-server - 如何使用保留订单的运行计数形成查询

> ID：11841924
> 
> 赞同：3
> 
> 时间：2012-08-07T08:24:45.917
> 
> 标签：sql-server, sql-server-2008, query-optimization

我有一个看起来像这样的跟踪表

![跟踪表](../Images/64c7d7c9bea9be7d8b7037952db4361b.png)

我想得到一个看起来像以下输出的运行总计-保留订单非常重要-因为这是存储的程序的执行顺序-它将帮助我分析系统中的瓶颈

![输出](../Images/6f17556db61f3fd97be1a9159352e475.png)

我试过了

```
select max(RowNumber),objectname, count(1) from rob
where eventclass = 42
group by objectname 
```

但这弄乱了顺序

这在 SQL 中甚至可能吗？

更新：我试过这个

```
select RowNumber,objectname, count(1) from rob
where eventclass = 42
group by objectname,RowNumber
order by RowNumber 
```

但是这个（因为查询非常正确地说按行号分组（必须有它才能按顺序排列））

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T09:08:37.227

```
select objectname, 
       count(*)
from (
     select RowNumber,
            objectname,
            row_number() over(order by RowNumber) - row_number() over(order by objectname, RowNumber) as grp
     from rob
     where eventclass = 42
     ) as T
group by grp, objectname
order by min(RowNumber) 
```

使用表变量的工作示例。

```
declare @T table
(
  RowNumber int,
  objectname varchar(50)
)

insert into @T values
(8, 'f_system_log_init'),
(10, 'f_purge_system_log'),
(25, 'f_system_log_msg'),
(65, 'f_system_log_msg'),
(104, 'f_system_log_msg'),
(143, 'f_system_log_msg'),
(182, 'f_system_log_msg'),
(221, 'f_system_log_msg'),
(5015, 'f_get_system_logs_parent_log_id_for_dataloader'),
(5055, 'f_system_log_msg'),
(5096, 'f_system_log_msg')

select objectname, 
       count(*)
from (
     select RowNumber,
            objectname,
            row_number() over(order by RowNumber) - row_number() over(order by objectname, RowNumber) as grp
     from @T
     ) as T
group by grp, objectname
order by min(RowNumber) 
```

结果：

```
objectname                                         
-------------------------------------------------- -----------
f_system_log_init                                  1
f_purge_system_log                                 1
f_system_log_msg                                   6
f_get_system_logs_parent_log_id_for_dataloader     1
f_system_log_msg                                   2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T09:23:23.970

试试这个：

```
;WITH CTE as (select *,ROW_NUMBER() over(order by rownumber,objectname) rn from test101)

,CTE1 as(
select *,1 as incr from CTE where rn=1 
union all
select t.*,
CASE WHEN t.objectname=c.objectname then incr else incr+1 end  as incr
from CTE t inner join CTE1 c
on t.rn=c.rn+1
)

select max(objectname),count(incr) from CTE1
group by incr 
```

# javascript - 仅带有 tds 的 tr 索引 --- 相对于点击

> ID：11841926
> 
> 赞同：0
> 
> 时间：2012-08-07T08:25:01.507
> 
> 标签：javascript, jquery

如何获取`<tr>`表中的索引，但前提是它有`<td>s`且没有`<th>s`

如果我在下面使用点击事件，它将提醒 with 的索引，`td`但`th` 我只想要`<tr>`with`<td>s`

谢谢

```
$('td').click(function(){

   var s = $(this).parents('table tr:has(td)').index();//////  returns 

   alert(s);

});

<table>
<tr>
<th><th><th><th><th><th><th><th><th><th>
</tr>
<tr>
<td><td><td><td><td><td><td><td><td><td>
</tr>
<tr>
<td><td><td><td><td><td><td><td><td><td>
</tr>
<tr>
<td><td><td><td><td><td><td><td><td><td>
</tr>
<tr>
<td><td><td><td><td><td><td><td><td><td>
</tr>

</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:40:27.397

尝试这个...

```
$('td').click(function(){
   if ( ! $(this).closest('table').find('th').length ) {
       var s = $(this).closest('tr').index();
       alert(parseInt(s) + 1);
   }
});​ 
```

**[JS 小提琴链接](http://jsfiddle.net/XkTvt/2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:55:31.053

您给定的代码工作正常。看到这个[jsfiddle](http://jsfiddle.net/F5uNt/)。

# jquery - 如何使用 jquery 验证表单？

> ID：11841929
> 
> 赞同：-2
> 
> 时间：2012-08-07T08:25:15.313
> 
> 标签：jquery

我有以下代码..目前它正在验证，但它没有一一显示错误消息我想一次显示所有错误消息......请帮助我提前感谢

```
if ( $('#employeeid').length > 0 ) {
            if ( $('#employeeid').val() || $('#employeeid').val() == '' ) {
                if( ! $('#employeeid').val().match(/^[I]{1}[BH]{1}[0-9]{1,4}$/i) ) {
                    $('#employeeid-element').append('<ul class="errors"><li><ul class="errors"><li>Please enter a valid employee id</li></ul>');
                      return false;
                  }
              }
          }

   if ( $("#firstname").val() || $("#firstname").val() == '') {
                if( ! $('#firstname').val().match(/^[a-z]{0,10}[\s]{0,2}[a-z]{0,10}$/i) ) {
                        $('#firstname-element').append('<ul class="errors"><li>Please enter a employee first name: firstname</li></ul>');
                        return false;
                    }

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:29:15.820

[**http://bassistance.de/jquery-plugins/jquery-plugin-validation/**](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

也许这个插件会帮助你以一种简单的方式做到这一点。

# php - 在php的函数中声明一个函数

> ID：11841930
> 
> 赞同：8
> 
> 时间：2012-08-07T08:25:16.147
> 
> 标签：php

**编码：**

```
public function couts_complets($chantier,$ponderation=100){

    function ponderation($n)
    {
        return($n*$ponderation/100); //this is line 86
    }

            ...

    } 
```

**我正在尝试做的事情：**在函数 A 中声明函数 B，以便将其用作
array_map() 中的参数。

**我的问题：** 我收到一个错误：

> 未定义变量：考虑 [APP\Model\Application.php，第 86 行]

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-07T08:28:51.727

尝试这个：

```
public function couts_complets($chantier,$ponderation=100){

    $ponderationfunc = function($n) use ($ponderation)
    {
        return($n*$ponderation/100);
    }

        ...
    $ponderationfunc(123);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T08:28:26.600

从 php 5.3 开始，您可以使用匿名函数。您的代码将如下所示（未经测试的代码警告）：

```
public function couts_complets($chantier,$ponderation=100) {
    array_map($chantier, function ($n) use ($ponderation) {
        return($n*$ponderation/100); //this is line 86
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T08:28:40.513

在您当前的代码中，`$ponderation`不在函数范围内，因此出现“未定义”错误。

要将变量传递给“内部”函数，请使用该`use`语句。

```
function ponderation($n) use($ponderation) { 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T08:32:34.793

## 使用回调函数：

为了在 PHP 中使用函数*作为参数*，将函数的名称作为字符串传递就足够了：

```
array_map('my_function_name', $my_array); 
```

* * *

如果函数实际上是类中的静态方法，则可以将其作为参数传递，如下所示：

```
array_map(array('my_class_name', 'my_method_name'), $my_array); 
```

* * *

如果函数实际上是类中的非静态方法，则可以将其作为参数传递：

```
array_map(array($my_object, 'my_method_name'), $my_array); 
```

* * *

## 声明回调函数：

如果你在全球范围内宣布，世界上的一切都是好的和清晰的——对每个人来说。

如果你在另一个函数中声明它，它将是**全局**的，但在父函数第一次运行之前它不会被定义，`Cannot redefine function my_callback_function`如果你再次运行父函数，它将触发错误。

如果将其声明为 lambda 函数/匿名函数，则需要指定允许查看/使用哪些上层范围变量。

## 调用回调：

```
function my_api_function($callback_function) {
    // PHP 5.4:
    $callback_function($parameter1, $parameter2);

    // PHP < 5.3:
    if(is_string($callback_function)) {
        $callback_function($parameter1, $parameter2);
    }
    if(is_array($callback_function)) {
        call_user_func_array($callback_function, array($parameter1, $parameter2));
    }
} 
```

# networking - Mono.ZeroConf 窗口

> ID：11841939
> 
> 赞同：1
> 
> 时间：2012-08-07T08:25:50.023
> 
> 标签：networking, mono, bonjour, zeroconf

您好，我从[Mono ZeroConf的教程开始](http://abock.org/2007/12/23/announcing-monozeroconf)

当我的代码到达这条线时

```
ServiceBrowser browser = new ServiceBrowser (); 
```

我得到一个系统异常

```
System.Exception: No Zeroconf providers could be found or initialized. Necessary daemon may not be running. 
```

那么我如何运行必要的守护程序或提供程序（在 Windows 上）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-23T19:34:04.617

您需要下载并安装[Bonjour for Windows](http://support.apple.com/kb/DL999)。完成设置后，守护程序应自动启动。许多可用的 Mono.Zeroconf 二进制文件已经过时并且包含错​​误。[但是，您可以从github](https://github.com/mono/Mono.Zeroconf)下载并编译最新版本。

# c# - 多个 DateTime 列的排序表达式

> ID：11841940
> 
> 赞同：0
> 
> 时间：2012-08-07T08:25:51.573
> 
> 标签：c#, linq, razor, umbraco

我在我的网站上创建了一个新闻部分。没有什么新东西而且工作正常。除了现在我想按日期对新闻进行排序。一个问题是排序日期分布在多个列上。我创建了一个非强制性的新闻日期字段。当 newsdate 列为空时，使用创建日期。

如何使用这两个列对我的 newsItems 进行排序

例子

newsitem1：新闻日期 = 2012 年 8 月 3 日，创建日期 = 2012 年 8 月 7 日

newsitem2：newsdate = emtpy，创建日期 = 2012 年 8 月 7 日

newsitem3：newsdate = 2012 年 7 月 25 日，createDate 8 月 7 日

结果（排序顺序）：

新站点m2、新站点m1、新站点m3

因为一切都是在 Umbraco 中使用 razorview-marco 创建的，所以我看不到操作对象的选项，因此必须在 linq-query 中进行排序。

```
var nodes = @Model.AncestorOrSelf("Home").Children.Where("Visible").OrderBy(???) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:26:34.563

在 Razor 中对任何稍微复杂的东西进行排序时，我已将结果转换为 List，然后使用 delagate。这是一个不理想的特殊情况，但可以让您了解语法。

```
possibleListings.Sort(delegate(DynamicNode x, DynamicNode y)
{
  dynamic xNode = @Model.NodeById(x.Id);
  dynamic yNode = @Model.NodeById(y.Id);

  dynamic xListingLevel = @Model.NodeById(xNode.ListingType);
  dynamic yListingLevel = @Model.NodeById(yNode.ListingType);

  int xSort = xListingLevel.SortOrder;
  int ySort = yListingLevel.SortOrder;
  return xSort.CompareTo(ySort);
}); 
```

希望这能让你走上正轨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:09:19.907

您可以按以下顺序使用条件表达式：`.OrderByDescending(t => t.NewsDate.HasValue ? t.NewsDate : t.CreationDate).ToList();`

```
 public class News
    {
        public DateTime? NewsDate;
        public DateTime? CreationDate;
        public string Name;
        public News(string name, DateTime? newsDate, DateTime? creationDate) { this.Name = name; this.NewsDate = newsDate; this.CreationDate = creationDate; }
    }

    [TestMethod()]
    public void NewsTestOrderBy()
    {
        var news1 = new News("newsitem1", new DateTime(2012, 8, 3), new DateTime(2012, 8, 7));
        var news2 = new News("newsitem2", null, new DateTime(2012, 8, 7));
        var news3 = new News("newsitem3", new DateTime(2012, 7, 25), new DateTime(2012, 8, 7));

        var news = new List<News>() { news1, news2, news3 };
        var orderedNews = news.OrderByDescending(t => t.NewsDate.HasValue ? t.NewsDate : t.CreationDate).ToList();

        Assert.AreEqual(news2, orderedNews[0]);
        Assert.AreEqual(news1, orderedNews[1]);
        Assert.AreEqual(news3, orderedNews[2]);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-18T22:44:27.500

如果您的日期字段是可为空的`DateTime`值，那么这将起作用：

```
.OrderBy(x => x.newsdate ?? x.createDate) 
```

如果它们是以这样的方式格式化的字符串，它们将正确排序，那么这将起到作用：

```
.OrderBy(x => !string.IsNullOrWhiteSpace(x.newsdate) ? x.newsdate : x.createDate) 
```

如果它们是具有您在示例中共享的值的字符串，那么您需要将它们转换为`DateTime`实例以按如下方式排序：

```
.OrderBy(x => !string.IsNullOrWhiteSpace(x.newsdate) ? DateTime.Parse(x.newsdate) : DateTime.Parse(x.createDate)) 
```

# blackberry-webworks - 在 Vista 上安装 Blackberry Webworks

> ID：11841941
> 
> 赞同：0
> 
> 时间：2012-08-07T08:25:53.693
> 
> 标签：blackberry-webworks

如何在 Vista 上安装 Blackberry Webworks？我还需要安装网络服务器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:05:00.123

您应该能够在 Vista 上下载和安装 webworks。它没有得到官方支持，但我听说人们说它有效。

[https://developer.blackberry.com/html5/download/sdk](https://developer.blackberry.com/html5/download/sdk)

您不需要网络服务器。

* * *

如果您在尝试安装时遇到任何特定问题，请发布详细信息。

# regex - 在 lighttpd 中正确删除 URL 中的文件扩展名

> ID：11841942
> 
> 赞同：0
> 
> 时间：2012-08-07T08:26:04.923
> 
> 标签：regex, mod-rewrite, lighttpd, clean-urls

你能告诉我如何在 lighttpd 中正确删除文件扩展名吗？

以便：

1.  根目录（“/”）不会被重写为“/.php”
2.  如果缺少尾部斜杠，则打开目录
3.  无需扩展名即可访问所有文件

此处的另一个 StackOverflow 线程有无法修复的答案 (1)： [Rewriting with lighttpd - how to remove file extensions](https://stackoverflow.com/questions/1774109/rewriting-with-lighttpd-how-to-remove-file-extensions)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:13:37.847

2) 和 3) 是互斥的 - 您如何期望系统知道 blahBlah 是目录 blahBlah 还是文件 blahBlah.php？
1) 可能由 DirectoryIndex 处理，而不是由您的重写规则处理

# objective-c - 如何禁用 UIButton 和禁用 touchEvent 响应程序？

> ID：11841945
> 
> 赞同：3
> 
> 时间：2012-08-07T08:26:18.763
> 
> 标签：objective-c, ios, uikit, uibutton

我有`IBOutlet UIButton`。它不响应`touchesBegan:withEvent:`何时启用。但是当我设置`[button setEnabled:NO]`并单击以调整它的位置时，它会转到`touchesBegan:withEvent:`.

如何禁用`UIButton`和禁用`touchEvent responder`？我曾尝试过`[button setEnabled:NO]`，`[button setUserInteractionEnabled:YES]`但没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:36:44.557

你有没有尝试过 ？

```
[button setEnabled:NO]; 
```

和

```
[button setUserInteractionEnabled:NO] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:37:24.807

对于禁用 touchesBegan:withEvent 你可以使用

```
 self.view.userInteractionEnabled = NO; 
```

因为这个方法用于uiview（以及其他uiimage的子类）。当您单击按钮时，调用按钮处理程序（不是 touchesBegan、touchMove），按钮是 UIControl 的子类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T08:38:15.730

如果按钮被禁用。以下代码对您有好处。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{   
    UITouch *touch = [touches anyObject];

    if(CGRectContainsPoint(button.frame, [touch locationInView:self.view]))
        return;

   //do stuff
} 
```

# javascript - 'onClick' 事件未触发 JavaScript 中的第一次按钮单击

> ID：11841946
> 
> 赞同：0
> 
> 时间：2012-08-07T08:26:21.070
> 
> 标签：javascript, c#, asp.net, client-side, dom-events

Gridview 的每一行都有按钮，例如删除/编辑按钮。这些按钮与客户端方法（onClick）绑定，不再绑定服务器端方法。

问题是，当我第一次点击时，按钮没有触发客户端方法，但是当我第二次点击它时它的工作..

这不是更严重的问题。因为，我已经检查了所有浏览器。不工作。

代码：我在 gridview xx_RowDataBound 方法下绑定了这个属性。

```
ibCancel.Attributes["OnClick"] = "javascript: return CancelAdminExtension('" + hidRemarks.ClientID + "','" + bPastExtension + "','" + hidDelRecNr.ClientID + "','" + hidRecNr.Value + "','" + hidDelPurpose.ClientID + "','" + hidPurpose.Value + "');"; 
```

Javascript方法：

```
function CancelAdminExtension(strPurposeID, strPastExtension, strDelRecNr, strRecNr, strDelPurpose, strPurpose) {
  try
  {
      //some logic here

      hidDelRecNr.value = strRecNr;
      hidDelPurpose.value = strPurpose;

      return true;
  }
  catch(err)
  {
      return false;
  }
} 
```

请提出任何解决此问题的想法。

抱歉，这个问题可能与其他问题重复，我找不到解决问题的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:50:45.813

尝试使用一次**Attributes.Add("onclick", "script")**
而不是 Attributes["OnClick"]

```
ibCancel.Attributes.Add("onclick", "return(CancelAdminExtension('" + hidRemarks.ClientID + "','" + bPastExtension + "','" + hidDelRecNr.ClientID + "','" + hidRecNr.Value + "','" + hidDelPurpose.ClientID + "','" + hidPurpose.Value + "'));"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:05:36.000

```
protected void uxCustomGridView_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {                           

           LinkButton uxEditLinkButton = (LinkButton)e.Row.FindControl("uxEditLinkButton");
           uxEditLinkButton.Attributes["onclick"] = string.Format("return doEdit({0})", item.ID);      
        }
    } 
```

第一次点击会有一些反应吗？通常，我使用下面的代码在后端绑定客户端事件。

或者您可以使用简单的警报功能测试 onclick 事件。

# javascript - Backbone.Controller 文档

> ID：11841950
> 
> 赞同：1
> 
> 时间：2012-08-07T08:26:43.177
> 
> 标签：javascript, backbone.js

我看到一些文章提到**Backbone.Controller.extend但在**[http://backbonejs.org](http://backbonejs.org)上找不到任何文档

是否没有记录或有比 0.9.2 更新的主干版本？或者有一个插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:33:09.103

控制器在 Backbone 版本 0.5.0中更名为[路由器](http://backbonejs.org/#Router)

引用 0.5.0[更新日志](http://webscripts.softpedia.com/scriptViewChangelog/Backbone-js-Changelog-66339.html)

> 为了清楚起见，控制器被重命名为路由器。

# javascript - 如何在没有 ID 的现有按钮旁边添加一个新按钮

> ID：11841951
> 
> 赞同：1
> 
> 时间：2012-08-07T08:26:47.873
> 
> 标签：javascript, prototypejs

我正在尝试在已经存在的按钮对象旁边添加一个新按钮对象，但它没有 ID，因此我无法简单地选择该对象。唯一具有 ID 的对象是 iframe。页面如下所示：

```
<iframe id="gsft_main" />
  <html>
    <head>...</head>
    <body>
      <table>
      ...
      </table>
      <table>
        <table>
        ...
        </table>
      </table>
      <button onclick="someCodeHere('')"> Submit </button>
      <script>...</script>
      <script>...</script>
      <script>...</script>
    <body>
  </html>
</iframe> 
```

我需要更改它，使其看起来像：

```
...
...
<button onclick="injectedCodeHere('')"> Do Something Else </button>
<button onclick="someCodeHere('')"> Submit </button>
...
... 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T08:34:32.113

由于这是页面上的最后一个按钮，因此选择所有类型的元素，`button`然后从数组中取出最后一个：

```
var frame = ... get frame by id ...
var buttons = frame.contentDocument.getElementsByTagName ('button');
var lastButton = buttons[buttons.length-1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T08:38:43.230

这将向页面添加一个按钮：

```
var element = document.createElement("input");
element.setAttribute("type", "button");
element.setAttribute("value", "Do Something Else");
element.setAttribute("onclick", "injectedCodeHere('')");

var gsft = document.getElementByID("gsft_main");
gsft.contentDocument.getElementsByTagName('button')[0].appendChild(element); 
```

# php - 服务器崩溃后日历显示错误

> ID：11841952
> 
> 赞同：0
> 
> 时间：2012-08-07T08:27:00.223
> 
> 标签：php, mysql

几天前服务器崩溃并关闭了几个小时，服务器可用后，我的日历开始显示错误的数据。它必须显示当前月份和下一个 5 个月（总共半年）。服务器数据正确。任何想法日历有什么问题？mysql服务器时间会不会让我的日历显示错误数据？

```
 if (!isset($_MONTH))
    $_MONTH = 6;

     if (isset($_POST['subscribe_month']))
    $_MONTH = $class->_dig($_POST['subscribe_month']);

    $sql = mysql_query("SELECT d.header, d.id FROM " . $class->_cfg['pfx'] . "workshops as w
    LEFT JOIN " . $class->_cfg['pfx'] . "workshops_date as wd ON wd.cid=w.id
    LEFT JOIN " . $class->_cfg['pfx'] . "dictionary as d ON d.id=wd.city
    WHERE w.public='1' and wd.public='1' and wd.date_end>='" . date("Y-m-d") . "' a

nd wd.predprosomtr='0' " . $where . " ORDER BY d.rang");
$CityList = array();
while ($_sql = mysql_fetch_assoc($sql)) {
    $CityList[$_sql['id']] = $_sql['header'];
}

if ($Fcity && $Fcity != 0)
    $where.=" and d.id=" . $Fcity . "";
elseif ($_POST['city'] && $class->_dig($_POST['city']) > 0)
    $where.=" and d.id=" . $class->_dig($_POST['city']) . "";

if ($CitySearch != 0)
    $where.=" and wd.city=" . $CitySearch . " ";
$sql = mysql_query("SELECT w.header, w.direction, w.subheader, wd.colsmonth, wd.is_new, wd.public_date_finish, wd.p_date_finish, w.aliaslink, wd.aliaslink as wd_aliaslink, w.direction, wd.city, wd.date_start, d.header as city_name, wd.date_end, wd.cid, wd.id as wd_id, w.id as w_id FROM " . $class->_cfg['pfx'] . "workshops as w
LEFT JOIN " . $class->_cfg['pfx'] . "workshops_date as wd ON wd.cid=w.id
LEFT JOIN " . $class->_cfg['pfx'] . "dictionary as d ON d.id=wd.city
WHERE w.public='1' and wd.public='1' and wd.date_end>='" . date("Y-m-d") . "' and w.direction<>'' and wd.predprosomtr='0' " . $where . " ORDER BY wd.date_start, wd.city");
//$output.=$where;
$month = 12;
$year = date("Y");

while ($_sql = mysql_fetch_assoc($sql)) {
    $view = true;

    if ($_sql['public_date_finish'] == '1' && $_sql['p_date_finish'] < date("Y-m-d"))
        $view = false;

    if ($view) {
        $arWorkshops[$_sql['w_id']] = $_sql;
        if (!isset($arWorkshopsCity[$_sql['cid']][$_sql['city']]) && $_sql['city'] > 0)
            $arWorkshopsCity[$_sql['cid']][$_sql['city']] = $_sql['city'];

        if (isset($arWorkshopsDate[$_sql['cid']]['count']))
            $arWorkshopsDate[$_sql['cid']]['count'] = $arWorkshopsDate[$_sql['cid']]['count'] + 1;
        else
            $arWorkshopsDate[$_sql['cid']]['count'] = 1;

        $direct = explode('#', $_sql['direction']);
        for ($i = 0; $i < count($direct); $i++) {
            if (trim($direct[$i]) != '') {
                $arDirectionList[$direct[$i]] = $direct[$i];
            }
        }
        //$arDirectionList[$_sql['direction']]=$_sql['direction'];
        if (!isset($arWorkshopsDate[$_sql['cid']][ceil($class->convert_date($_sql['date_start'], '.', "month"))]))
            $arWorkshopsDate[$_sql['cid']][ceil($class->convert_date($_sql['date_start'], '.', "month"))] = $_sql;

        if ($class->convert_date($_sql['date_start'], '.', "month") < $month && $class->convert_date($_sql['date_start'], '.', "year") == $year) {
            $month = $class->convert_date($_sql['date_start'], '.', "month");
            $year = $class->convert_date($_sql['date_start'], '.', "year");
        }
        //if($class->convert_date($_sql['date_start'], '.', "year")==(date("Y")+1))$year=$class->convert_date($_sql['date_start'], '.', "year");
        //$output.=$_sql['header']."-".$_sql['date_start']."-".$_sql['wd_id']."<br>";
    }
}

//var_dump($arWorkshopsDate[185]);
$output.='<table class="table"><tr><th width="60">&nbsp;</th><th class="first" style="width:auto">Название</th>';
if ($_MONTH == 12)
    $w = "5%"; else
    $w = "9%";

for ($i = $month; $i < ($month + $_MONTH); $i++) {
    if ($year == date("Y"))
        $m = $i;else
        $m++;

    if ($m <= 12 && $year == date("Y")) {
        $output.='<th class="month" style="width:' . $w . '">' . $class->convert_date($m, '.', "myear") . ' <span>' . $year . '</span></th>';
    } else {
        if ($m > 12) {
            $m = 1;
            $year = $year + 1;
        }
        $output.='<th class="month" style="width:' . $w . '">' . $class->convert_date($m, '.', "myear") . ' <span>' . $year . '</span></th>';
    }
}
$output.='  <th style="width:10%">';
if ($typeblock == 'webinars')
    $output.='Формат';
else
    $output.='Город';
$output.='</th></tr>';
if (isset($arWorkshops)) {
    //foreach($arWorkshops as $LO=>$listOrd){
    foreach ($arWorkshops as $k => $value) {
        if (!$direction || $direction == 0)
            $direction2 = $class->_direction($value['direction']);
        else
            $direction2 = $direction;

        foreach ($arWorkshopsCity[$k] as $LO => $listOrd) {
            $output2 = "";
            $link_date = "";
            $pt = 0;
            $m_nth = ceil($month);
            $is_new_class = '';
            for ($i = ceil($month); $i < ($month + $_MONTH); $i++) {
                if ($m_nth > 12)
                    $m_nth = 1;

                if (isset($arWorkshopsDate[$k][$m_nth]) && $arWorkshopsDate[$k][$m_nth]['city'] == $LO) {
                    $pt++;
                    if ($pt == 1)
                        $city_name = $arWorkshopsDate[$k][$m_nth]['city_name'];
                    //if(isset($_TYPE) && $_TYPE!=0)$output.='<td class="date"><a href="/'.$typeblock.'/'.$value['aliaslink'].'/'.$arWorkshopsDate[$k][$i]['wd_aliaslink'].'/">';
                    //else

                    if (($arWorkshopsDate[$k][$m_nth]['is_new'] == '1') || ($arWorkshopsDate[$k][$m_nth + 1]['is_new'] == '1')) {
                        $is_new_class = " it_is_new";
                    } else {
                        $is_new_class = '';
                    }

                    $output2.='<td class="date"><a href="/' . $typeblock . '/' . $arDictionaryID[$direction2]['aliaslink'] . '/' . $value['aliaslink'] . '/' . $arWorkshopsDate[$k][$m_nth]['wd_aliaslink'] . '/">';
                    $link_date = '/' . $typeblock . '/' . $arDictionaryID[$direction2]['aliaslink'] . '/' . $value['aliaslink'] . '/' . $arWorkshopsDate[$k][$m_nth]['wd_aliaslink'] . '/';
                    if ($arWorkshopsDate[$k][$m_nth]['colsmonth'] > 0)
                        $output2.=$class->convert_date($arWorkshopsDate[$k][$m_nth]['date_start'], '.', "day_month") . "</a><br />" . $arWorkshopsDate[$k][$m_nth]['colsmonth'] . " мес.";
                    elseif ($arWorkshopsDate[$k][$m_nth]['date_start'] == $arWorkshopsDate[$k][$m_nth]['date_end'])
                        $output2.=$class->convert_date($arWorkshopsDate[$k][$m_nth]['date_start'], '.', "day_month") . "</a>";
                    else
                        $output2.=$class->convert_date($arWorkshopsDate[$k][$m_nth]['date_start'], '.', "day_month") . "<br />-" . $class->convert_date($arWorkshopsDate[$k][$m_nth]['date_end'], '.', "day_month") . "</a>";
                    $output2.='</td>';
                }else {
                    $output2.='<td></td>';
                }
                $m_nth++;
            }

            if (($arWorkshopsDate[$k][$m_nth]['is_new'] == '1')) {
                $is_new_class = " it_is_new";
            }

            $output.='<tr><td class="' . $is_new_class . '">&nbsp;</td><td>';
            //if(isset($_TYPE) && $_TYPE!=0)$output.='<a href="/'.$typeblock.'/'.$value['aliaslink'].'/'.$value['wd_aliaslink'].'/"><strong>'.$value['header'].'</strong></a>';
            //else
            if ($pt == 1 && $arWorkshopsDate[$k]['count'] == 1)
                $link = $link_date;
            else
                $link = '/' . $typeblock . '/' . $arDictionaryID[$direction2]['aliaslink'] . '/' . $value['aliaslink'] . '/';

            $output.='<a href="' . $link . '"><strong>' . $value['header'] . '</strong>';
            if (trim($value['subheader']) != '')
                $output.=': ' . $value['subheader'] . '';
            $output.='</a>';
            $output.='</td>';
            $output.=$output2;
            $output.=' <td class="city">' . $city_name . '</td></tr>';
        }
    }
//}
}
$output.='</table>';
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:18:29.077

问题解决了。默认情况下，一些“好”的编码器使它仅从第 12 个月开始显示，`$month = 12;` 我刚刚将其更改为`$month = date("m");`这解决了我的问题

# android - Android Surfaceview线程没有响应

> ID：11841953
> 
> 赞同：1
> 
> 时间：2012-08-07T08:27:00.760
> 
> 标签：android, multithreading, surfaceview

我在surfaceview 中有一个线程问题。当我锁定手机时，我无法理解如何开启暂停/开启恢复。无论我做什么，锁定/解锁手机后线程都不会响应。

在活动中：

```
@Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        surfaceView.SurfaceView_OnResume();
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        surfaceView.SurfaceView_OnPause();

    } 
```

在表面视图中

```
 public void SurfaceView_OnResume() {
            if (null != surfaceViewThread) {

                surfaceViewThread.setRunning(true);
                surfaceViewThread.notify();
            }

        }

        public void MySurfaceView_OnPause() {           
            surfaceViewThread.setRunning(false);

        }

@Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        // TODO Auto-generated method stub
        boolean retry = true;
        myGameThread.setRunning(false);
        while (retry) {
            try {
                myGameThread.join();
                retry = false;
            } catch (InterruptedException e) {
            }
        }
    } 
```

在线程中：

```
public void setRunning(boolean run) {
        runFlag = run;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-20T17:36:37.260

Thread.setRunning(boolean b) 不在 Android API 中。你可以在这里查看。[http://developer.android.com/reference/java/lang/Thread.html](http://developer.android.com/reference/java/lang/Thread.html)

如果我需要一个线程，我更喜欢使用 Runnable(Interface)，而不是 Thread(Object)。

为了控制我的线程周期，我将设计我的方法：run() 像这样......

```
run(){
    while(threadRun){
            ...//What you want to do in the thread.
            while(threadPause){
            }
    }
} 
```

Boolean:threadRun 将在 Activity.onDestroy() 中或您真正想要关闭线程的任何其他时间变为 false。

Boolean:threadPause ... 在 Activity.onPause() 中变为 false，在 Activity.onResume() 中变为 true。

# php - 在数组中搜索数组并返回键

> ID：11841958
> 
> 赞同：1
> 
> 时间：2012-08-07T08:27:11.320
> 
> 标签：php, arrays, search

我有两个数组

1.$ids;

```
Array
(
    [0] => 2427975642
    [1] => 2397521678
) 
```

2.$c

```
Array
(
    [48] => 2397521678
    [46] => 461
    [45] => 451
) 
```

问题：在 $c 中从 $ids 中搜索值并返回带有 id 的新数组。示例返回 48

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:34:12.467

查看函数array_intersect：[http://php.net/manual/en/function.array-intersect.php](http://php.net/manual/en/function.array-intersect.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T08:37:29.863

```
$ids = array(   
    2427975642,
    2397521678
);

$c = array(
    48 => 2397521678,
    46 => 461,
    45 => 451
);

$common = array_keys(array_intersect($c, $ids));

print_r($common); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T08:41:03.513

```
 $ids= array
    (
        [0] => 2427975642
        [1] => 2397521678
    );

    $c =array
    (
        [48] => 2397521678
        [46] => 461
        [45] => 451
    );

$res = array_intersect($ids,$c);
$keys = array_keys($res);
print_r($keys); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T08:39:04.917

```
$ids = array(   
    2427975642,
    2397521678
);

$c = array(
    48 => 2397521678,
    46 => 461,
    45 => 451
);

$finalArray = array();

foreach ( $c as $key=>$val)
{

if ( array_search($val,$ids))
{

$finalArray[]=$key;

}

} 
```

# android - Android 自定义对话框 url 图像不显示？

> ID：11841959
> 
> 赞同：2
> 
> 时间：2012-08-07T08:27:13.363
> 
> 标签：android, dialog, imageview, image-loading

这是我的代码，我试图在 ImageView 中显示 URL 图像它不起作用，

我的代码：

```
 CustomDialog alert = new CustomDialog(this,  R.style.myCoolDialog);
        alert.setContentView(R.layout.item_details);                        
        ImageLoader imageLoader=new ImageLoader(this);

        ImageView image1=(ImageView)alert.findViewById(R.id.details_image1);
        ImageView image2=(ImageView)alert.findViewById(R.id.details_image2);
        ImageView image3=(ImageView)alert.findViewById(R.id.details_image3);

        image1.setTag(listFilltered.get(position).getAttr4());
        image2.setTag(listFilltered.get(position).getAttr12());
        image3.setTag(listFilltered.get(position).getAttr3());

        imageLoader.DisplayImage(listFilltered.get(position).getAttr4(), image1);
        imageLoader.DisplayImage(listFilltered.get(position).getAttr12(), image2);
        imageLoader.DisplayImage(listFilltered.get(position).getAttr3(), image3);

alert.show(); 
```

在自定义对话框中：

```
public class CustomDialog extends Dialog {

    public CustomDialog(Context context, int theme) {
        super(context, theme);
     }
   } 
```

我做的一切都很好。它被称为图像加载器，我正在获取 URL。

下载顺利。但图像不显示。

# qt - 如何使用 QString replace() 将 '/' 替换为 '\\'？

> ID：11841961
> 
> 赞同：13
> 
> 时间：2012-08-07T08:27:18.147
> 
> 标签：qt, path, qt4, cross-platform

任何人都可以帮助关注吗？假设我有一个 QString ，其中存储了某个文件的文件路径，我想用我试过的（双反斜杠）替换它的`/`（斜杠） ：`\\`

```
mystring.replace("/","\\"); 
```

但它只放一个`\`而不是`\\`

替换前的字符串：`D:/myfiles/abc.zip`

替换后的字符串：`D:\myfiles\abc.zip`

预期字符串：`D:\\myfiles\\abc.zip`

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-07T08:29:43.230

你需要使用：

```
mystring.replace("/","\\\\"); 
```

编译器`\`在字符串中用作转义字符（例如`\t`,`\n`或`\r`），因此`\\`实际上变成了`\`. 如果需要两个反斜杠，则需要从四个开始。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-04-09T14:18:51.767

如果要将路径转换为 ​​Windows 格式，可以简单地使用[QDir::toNativeSeparators()](http://qt-project.org/doc/qt-5.0/qtcore/qdir.html#toNativeSeparators)：

```
qDebug() << QDir::toNativeSeparators("c:/windows/path"); // Prints "c:\windows\path" 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-07T08:31:24.793

1）为什么要替换它们，AFAIR 正斜杠也适用于文件操作（与操作系统无关）。
2）您是否尝试阅读文档 - 例如为什么`\\`会导致单个反斜杠？

# python - 无法配置 pyQt

> ID：11841962
> 
> 赞同：9
> 
> 时间：2012-08-07T08:27:23.223
> 
> 标签：python, pyqt4, configure

当我在 Windows 7 上编译 pyQt 时，它返回一条错误消息：

```
Traceback (most recent call last):
   File "configure.py", line 32, in <module>
       import sipconfig
ImportError: No module named sipconfig 
```

我已经配置了 sip，但仍然出现错误。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-12-01T09:40:50.450

我在 OSX 上也遇到了同样的情况。

正如@Janne Karila 建议的那样，您需要先[下载](http://www.riverbankcomputing.com/software/sip/download)并构建 SIP。在提取的 sip 源文件夹中，在终端中发出以下命令：

```
python configure.py
make
sudo make install 
```

之后（如果成功），您应该能够使用相同的 3 个命令在他的文件夹中构建 PyQt。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-25T01:43:33.300

构建 sip 时，请尝试使用`sudo`，以便将文件写入`/System`目录：

```
sudo python configure.py
sudo make
sudo make install 
```

我遇到了同样的问题，然后查看了安装目录并注意到不存在的文件，所以我使用`sudo`并成功构建了它。也构建了 PyQt。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-04T17:08:46.490

从这里下载 sip 后[下载](http://www.riverbankcomputing.com/software/sip/download)。解压 PyQt4 文件夹中的 sip 文件夹

```
cd sip-version
python configure.py
make
make install 
```

从同一位置，它将编译并保存到`C:\Python`文件夹

# c++ - 关于非抛出函数的混淆

> ID：11841963
> 
> 赞同：5
> 
> 时间：2012-08-07T08:27:23.953
> 
> 标签：c++, exception-specification

我有 2 个关于非抛出函数的问题：

1.  为什么要使函数不抛出？

2.  如何使函数不抛出？如果函数内的代码实际上可能`throw`，那么我是否仍然应该让它不抛出？

这是一个例子：

```
void swap(Type t1, Type t2) throw()
{
    //swap
} 
```

如果里面的代码`swap`根本不会抛出，我还应该追加`throw()`吗？为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T08:49:43.133

`throw()`（或`noexcept`在 C++11 中）之所以有用，有两个原因：

1.  它允许编译器在优化方面更加积极。
2.  它告诉函数用户他们可以在他们自己的非抛出函数中使用这个函数。

非抛出函数对于编写异常安全代码非常重要。例如，编写异常安全的常用方法`operator=`是通过非抛出`swap()`函数。

另一方面，其他异常规范是无用的，并且在当前标准中已被合理地弃用。它们根本不能与模板很好地混合，而且执行起来成本太高。

现在，如果您`noexcept`在可能实际抛出的函数中使用规范，那么所有的赌注都没有了。即使您的编译器在异常离开函数时没有终止程序（例如，出于运行时效率的原因，VS 不会这样做），您的代码也可能由于优化而无法执行您的想法。例如：

```
void f() noexcept
{
  a();
  b();
} 
```

如果`a()`真的抛出并`b()`有副作用，函数的行为将是不可预测的，因为你的编译器可能决定在`b()`之前执行`a()`，因为你已经告诉它不会抛出异常。

编辑：现在是你问题的第二部分：如何使函数不抛出？

首先，您需要问自己您的函数是否真的应该是非抛出的。例如：

```
class C
{
  C* CreateInstance()
  {
    return new C();
  }
} 
```

由于操作员`new`可以抛出一个`std::bad_alloc`，`CreateInstance()`所以可以抛出。您可以尝试使用 try-catch 块来避免它，处理或吞下任何可能在`try`块内抛出的异常，但这真的明智吗？例如：

```
C* CreateInstance()
{
  try
  {
     return new C();
  }
  catch (...)
  {
     return null;
  }
} 
```

问题似乎解决了，但是您的来电者会准备好`CreateInstance()`返回`null`吗？如果没有，当他们尝试使用该指针时会发生崩溃。此外，a`std::bad_alloc`通常意味着您的内存已用完，您只是将问题推迟。

所以要小心：有些函数可以不抛出，但应该允许其他函数抛出。异常安全不是一件小事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T08:33:06.137

> 为什么要使函数不抛出？

因此，函数的调用者可以调用它，而无需采取任何措施来处理函数引发的异常。

> 如何使函数不抛出？如果函数内部的代码实际上可能会抛出，那么我还应该让它不抛出吗？

您可以通过将所有可能抛出内部的代码放在一个 try 块中来使代码不抛出，并在不重新抛出的情况下处理任何异常。

```
void swap(T t1, T t2) noexcept {
  try {
    // ....
  } catch (const std::exception& ex) {
    // ....
  } catch (...) {
    // ....
  }

} 
```

如果您声称您的函数不抛出，那么您必须使其不抛出。但这并不意味着添加异常规范，无论如何您都不应该这样做，因为它已被弃用。这意味着您必须确保该函数无论如何都不会抛出。C++11 关键字`noexcept`在这方面为您提供了一些编译时安全性。

# jquery - 使用 jQuery Deferred.done().fail() 还是 Deferred.then()？

> ID：11841979
> 
> 赞同：1
> 
> 时间：2012-08-07T08:28:50.210
> 
> 标签：jquery, jquery-deferred

我知道 Deferred.done(a).fail(b) 与 Deferred.then(a,b) 相同，除了它们的语法，但我想知道是否有首选的语法方式。

为什么我要使用其中一个？有最佳实践吗？我现在唯一能想到的论点是，如果我在 .done(a).fail(b) 情况下遇到失败函数 'b'，*当*我看到 fail( b)，而当我在 then(a,b) 情况下只看到 b 时，我看不到这一点*。*还有什么论据吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-17T16:45:24.267

当您有多个任务要完成或失败时，请使用 Deferred.then(a,b)。

例如

```
$.when(task1)
.then(task2, task1Failure)
.then(task3, task2Failure)
.fail(task3Failure); 
```

或者

```
$.when(task1)
.then(task2, task1Failure)
.then(task3, task2Failure)
.then(task3SuccessMeaningAllSuccess, task3Failure); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-09T11:43:30.360

`.done(a).fail(b)`是一种更语义化的方法，所以我就这么做了。

# mysql - 如何在mysql中检索指定值的计数（即使没有记录）？

> ID：11841983
> 
> 赞同：0
> 
> 时间：2012-08-07T08:29:02.530
> 
> 标签：mysql

假设我有一个表，其中有一个名为“rating”的字段，它可能采用不同的值，但我想接收特定值的计数。

例子：

```
Create table mytable(
    rating int(1),
); 
```

首先，我能想到的明显方式如下：

```
select rating,count(rating) from mytable group by rating order by rating 
```

这个问题虽然不清楚它会返回多少个值，但处理它们也可能不容易。

我真正想做的是在一行中选择两个字段，显示具有某些特定值的记录数。

例子...

```
//something like this (some pseudocode):

select count(rating=-1) as rating1, count (rating=1) as rating2 from mytable 
```

您能否就我可以以上述 ^ 格式选择的一些巧妙方法提出建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:31:39.080

```
select SUM(IF(rating=-1,1,0)) AS rating1, 
   SUM(IF(rating=1,1,0)) AS rating2 from mytable 
```

# objective-c - UIImageView，点击和识别

> ID：11841990
> 
> 赞同：1
> 
> 时间：2012-08-07T08:29:30.477
> 
> 标签：objective-c, ios, uiimageview, uitapgesturerecognizer

我有一个 UIImageViews `userInteractionEnabled`，我想知道我当前点击的图像。我应该怎么做才能知道？我有一个海报墙和班级，`ThumbPosterModel`我有我想通过的所有海报信息。

所以我的代码是：

```
for (ThumbPosterModel *tPoster in _thumbsPosterStack) {

    UIImageView *imageView = [[UIImageView alloc] initWithImage:tPoster.thumb];
    imageView.userInteractionEnabled = YES;
    imageView.frame = CGRectMake(i, imageView.frame.origin.y, imageView.frame.size.width, imageView.frame.size.height);

    [_posterWallScrollView addSubview:imageView];

    UITapGestureRecognizer *tap =
    [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(imageTapped:)];
    [imageView addGestureRecognizer:tap];
} 
```

然后我有：

```
-(IBAction)imageTapped:(id)sender {
    //something do here, but know i don't know what.
} 
```

我`UIImageView`应该包含所有 ThumbPosterModel 参数的子类吗？我不认为这是个好主意，但我想不出任何其他解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:34:59.410

好的，这很简单，只需添加`tag`具有适当且不同值的每个图像的属性，然后`0`使用该属性来识别图像:)

快乐编码:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T08:34:19.283

当手势识别器被触发时，动作中的发送者就是识别器，所以你可以通过调用来获取它所附加的 UIView`[sender view];`

`UIImageView`因此，您可以编写一个方法来搜索拇指海报堆栈并找到具有匹配拇指的海报，但创建一个包含对海报的引用的子类可能会更容易。所以当你得到视图时

```
PosterImageView *selectedPosterView = (PosterImageView *) [sender view];
ThumbPosterModel *selectedModel = selectedPosterView.model; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T09:13:37.783

为您的每个 imageView 设置一个标签。

每次 for 循环迭代都将您的图像视图添加到`NSMutableArray`(arrayRef)。

点击图像视图（tagImage）时访问图像视图的标签。

然后

```
UIIMageView *imageViewR=[arrayRef objectAtIndex:tagImage-1]; 
```

这`imageViewR`是点击 imageView

# c# - 通过选择性 SharePoint 列表列循环

> ID：11841993
> 
> 赞同：0
> 
> 时间：2012-08-07T08:29:35.047
> 
> 标签：c#, sharepoint-2010, for-loop, foreach, splistitem

我有一个名为“员工”的共享点列表。我有以下列：

*   标题
*   名
*   姓
*   乐队1
*   带2
*   乐队3
*   带4

我有 20 个波段列，但为了更好地解释问题，我只包含了 4 个波段列。我知道如何从特定列中获取数据，但我该如何进行以下操作：

1.  仅从上面的列表中获取“Band”列的总数
2.  循环遍历每个“波段”列并获取/显示每个波段中的项目/值

我的第一个虽然它有一个循环遍历所有波段列，然后在其中有一个循环来获取/显示每个波段内的每个项目/值，但我不完全确定如何去做

任何想法或建议将不胜感激，

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:57:41.817

要获得所有乐队字段，我会做类似的事情

```
var fieldLookup = mySpList.Fields.Cast<SPField>()
    .Where(f => f.Title.StartsWith("Band"))
    .Select(f => { 
            int bandNo;
            bool successful = int.TryParse(f.Title.Substring(4), out bandNo);
            return new { Id = f.Id, BandNo = bandNo, Success = successful };
        })
    .Where(a => a.Success)
    .ToDictionary(a => a.BandNo, a => a.Id); 
```

这应该让您`Dictionary<int, Guid>`将带号从列标题映射到字段的 ID。

然后，您可以使用这些 ID 来获取值。例如，您可以构建`<FieldRef>`要传递给 的元素列表`SPQuery`，或者您可以这样做

```
foreach (SPListItem item in myList.Items)
{
    Console.WriteLine("Item {0}", item.Title);
    foreach(int bandNo in fieldLookup.Keys)
    {
        Console.WriteLine("Band {0}: {1}", bandNo, item[fieldLookup[bandNo]]);
    }
} 
```

# c# - Metro 应用程序的富文本编辑器

> ID：11841997
> 
> 赞同：4
> 
> 时间：2012-08-07T08:29:49.990
> 
> 标签：c#, xaml, microsoft-metro, rich-text-editor

我需要一个地铁应用程序的富文本编辑器，我希望编辑器将数据存储为 html，因为在数据库中已经有大量基于 html 的数据。有推荐的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:30:37.377

查看丰富的编辑框...

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.richeditbox](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.richeditbox)

我不太确定您是否可以获取 HTML...

**更新**

它处理 RTF 而不是 HTML。您必须编写自己的*翻译器*。检查以下链接。

[http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/50bdd84b-03c1-45bd-a3a6-b960954b54fc/](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/50bdd84b-03c1-45bd-a3a6-b960954b54fc/)