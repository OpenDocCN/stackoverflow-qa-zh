# StackOverflow 问答 11475000-11475999

# php - Facebook 图形 API - 喜欢 Facebook 页面；可以通过正确的授权来实现吗？

> ID：11475001
> 
> 赞同：0
> 
> 时间：2012-07-13T17:00:15.833
> 
> 标签：php, facebook, facebook-graph-api

所以我到处都读过这个，普遍的共识是你无法使用任何类型的 API 来喜欢 Facebook 页面（但你现在可以通过图形 api 来喜欢外部页面，以及链接到的页面Facebook 页面看起来，例如我*可以*在这里创建一个赞：http: [//facebook.com/40796308305](http://facebook.com/40796308305)）。

然而，在进行这项研究时，我听到了关于应用程序被授权通过 oAuth 或图形 API 点赞 Facebook 页面的“谣言”。有人知道这是真的吗？

本质上，我有一个页面，用户必须单击 Facebook 页面的“喜欢”按钮，然后单击一个按钮以确认他们喜欢它。然后后端使用然后对应用程序的用户进行身份验证，并检查页面上是否存在类似内容。如果是这样，则会加载一个新页面。如果没有，他们会被重定向并被要求确保他们点击了“赞”按钮。

实际上，我宁愿通过告诉用户单击按钮将导致他们“喜欢”Facebook 页面并在一个过程中完成此过程来完成此过程。

查看图形 API，我可以创建一个新的“动作”来实现相同的效果，但据我了解，除非他们“喜欢”Facebook 页面，否则他们不会在时间轴上看到来自该页面的帖子。

有谁知道任何经过身份验证的应用程序的“谣言”是否属实？如果不是，那么我所说的可能无法实现；但我想我会先在这里问。只是想就此事获得最终决定权。

附带说明；如果无法为页面点赞，有没有办法生成一个也订阅页面提要的操作？

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:06:06.527

> 本质上，我有一个页面，用户必须单击 Facebook 页面的“喜欢”按钮，然后单击一个按钮以确认他们喜欢它。[...] 实际上，我宁愿通过告诉用户单击按钮将导致他们“喜欢”Facebook 页面并在一个过程中完成此过程来完成此过程。

那为什么不直接嵌入 JS SDK，订阅用户点赞按钮的事件……？当您收到事件时，您可以通过脚本自动重新加载您的页面。

对于您的其余问题：TL; DR，也不是在这里讨论“谣言”，抱歉。

# php - 寻求一般建议：有没有比heredoc更好的方法来回显动态HTML？(聪明的/php/html)

> ID：11475005
> 
> 赞同：2
> 
> 时间：2012-07-13T17:00:34.903
> 
> 标签：php, html, smarty, heredoc

**项目：**创建动态多页表单，根据不同情况以不同方式填充字段。

**上下文：**使用 CMSMS 和 Smarty 标签将 PHP 插入到所需的页面中。表单的每一页都是使用一个 smarty 构建的

**当前方法：**使用 smarty 标记，我正在编写以heredoc 表示法回显的大量HTML。当我到达需要动态生成的表单的一部分（例如下拉菜单）时，我会转义 heredoc，编写 PHP（使用标准 echo 函数生成该表单元素所需的 HTML），然后返回到 heredoc更多的 HTML 块。

**怀疑：**这是不雅的，凌乱的，乏味的，只是感觉不对。

**要求：**有更好的方法吗？

编辑：我当前设置的一个示例，在这里您可以看到一个初始的静态 HTML 块被回显 - （表单的开头和第一个问题）然后是一个下拉菜单，需要根据数据动态生成存在于 SESSION 变量中。在此之后，heredoc 恢复并回显更多静态 HTML：

```
echo <<<EOD
<form id="myform" method="post" action="?page=2">
<div class="myform">

<div class="formfield">
    <div class="question"><label for="sv_01">Question?</label> <input type="text" name="sv_01" value="$sv_01" size="10" maxlength="10" /></div>
        <div class="subquestion"><label for="sv_02">What Year?</label>
EOD;
                echo '<select  name="sv_02">';   
                $vars = array(
                '-Year' => 'Year',
                '-2012' => '2012', 
                '-2011' => '2011', 
                '-2010' => '2010', 
                '-2009' => '2009', 
                '-2008' => '2008', 
                '-2007' => '2007', 
                '-2006' => '2006', 
                '-2005' => '2005', 
                'Pre 2005' => 'Pre 2005', 
                );

                foreach($vars as $val => $name){
                    if($_SESSION['sv_02'] == $val){
                        echo '<option value="' . substr($val, 0, 1) . '" selected>' . $name . '</option>';
                    } else {
                        echo '<option value="' . substr($val, 0, 1) . '">' . $name . '</option>';
                    }
                }

                echo '</select></div>';
echo <<<EOD

    <div class="question"><br /> <label for="sv_04">Another question</label> <input type="text" name="sv_04" value="$sv_04" size="10" maxlength="10" />%</div>
        <div class="subquestion"><label for="sv_07">When was the data collected?</label> 
EOD;
                echo '<select  name="sv_07">';   
                $vars = array(
                '-Month' => 'Month',
                '-January' => 'January', 
                '-February' => 'February', 
                '-March' => 'March', 
                '-April' => 'April', 
                '-May' => 'May', 
                '-June' => 'June', 
                '-July' => 'July', 
                '-August' => 'August', 
                '-September' => 'September', 
                '-October' => 'October', 
                '-November' => 'November', 
                '-December' => 'December', 
                );

                foreach($vars as $val => $name){
                    if($_SESSION['sv_07'] == $val){
                        echo '<option value="' . substr($val, 0, 1) . '" selected>' . $name . '</option>';
                    } else {
                        echo '<option value="' . substr($val, 0, 1) . '">' . $name . '</option>';
                    }
                }

                echo '</select><select  name="sv_08">';

                $vars = array(
                '-Year' => 'Year',
                '-2012' => '2012', 
                '-2011' => '2011', 
                '-2010' => '2010', 
                '-2009' => '2009', 
                '-2008' => '2008', 
                '-2007' => '2007', 
                '-2006' => '2006', 
                '-2005' => '2005', 
                'Pre 2005' => 'Pre 2005', 
                );

                foreach($vars as $val => $name){
                    if($_SESSION['sv_08'] == $val){
                        echo '<option value="' . substr($val, 0, 1) . '" selected>' . $name . '</option>';
                    } else {
                        echo '<option value="' . substr($val, 0, 1) . '">' . $name . '</option>';
                    }
                }

                echo '</select></div>'; 

echo<<<EOD          

<div class="continue"><input type="submit" value="Continue" /></div>
</div>

</div>
</form>
EOD; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:09:10.733

相对于标准的 HTML+PHP？这也适用于模板工具。

```
public function render() {
?>
<html>
    <head>
        <title><?= $this->title ?></title>
    </head>
    <body>
        <h1>This is my awesome page</h1>

        <p>Choose from a menu.</p>
        <?php $this->renderMenu() ?>

        <p>Or enter your details:</p>
        <?php $this->renderForm() ?>
    </body>
</html>
<?php
} 
```

如果这不是您想要的，请显示一些代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T17:42:10.383

根据您对代码的描述（为什么不显示任何内容？）我怀疑代码有点类似于

```
<?php

$someVariable = "Hello < World";
echo <<<FOO
 <!-- chunk of HTML -->
 {$someVariable}
 <!-- chunk of HTML -->
FOO;

// simulating some function calls
echo str_repeat('A', 10); 
```

如果是这样，那我告诉你，这*不是*Smarty。这只是heredoc（和引用的变量）。

* * *

如果您已将上述代码与数据库访问等内容分开，我看不出它有任何*混乱*。混乱会将输出生成与业务逻辑混合在一起。

但对我（作为一名[Smarty](http://www.smarty.net)开发人员）来说，这确实看起来不优雅并且感觉不对。但这可能是一件主观的事情——习惯于模板解决方案的“优雅”，如[Smarty](http://www.smarty.net)、[Twig](http://twig.sensiolabs.org/)或[phpTAL](http://phptal.org/)、[Mustache](https://github.com/bobthecow/mustache.php#mustachephp)（以及 50 亿个其他引擎）。

这些库不仅仅只是生成 HTML。他们负责转义值（`is 4 < 5?`无效的 HTML）。它们可以帮助您构建和组织模板。他们为你做缓存。他们已经看到了国际化。和。一个。所有的。很多。更多的。

# haskell - 如何在 Haskell 中实现`cat`？

> ID：11475006
> 
> 赞同：12
> 
> 时间：2012-07-13T17:00:39.047
> 
> 标签：haskell, conduit

我正在尝试`cat`在 Haskell 中编写一个简单的程序。我想将多个文件名作为参数，并将每个文件顺序写入**STDOUT**，但我的程序只打印一个文件并退出。

我需要做什么才能让我的代码打印每个文件，而不仅仅是传入的第一个文件？

```
import Control.Monad as Monad
import System.Exit
import System.IO as IO
import System.Environment as Env

main :: IO ()
main = do
    -- Get the command line arguments
    args <- Env.getArgs

    -- If we have arguments, read them as files and output them
    if (length args > 0) then catFileArray args

    -- Otherwise, output stdin to stdout
    else catHandle stdin

catFileArray :: [FilePath] -> IO ()
catFileArray files = do
    putStrLn $ "==> Number of files: " ++ (show $ length files)
    -- run `catFile` for each file passed in
    Monad.forM_ files catFile

catFile :: FilePath -> IO ()
catFile f = do
    putStrLn ("==> " ++ f)
    handle <- openFile f ReadMode
    catHandle handle

catHandle :: Handle -> IO ()
catHandle h = Monad.forever $ do
    eof <- IO.hIsEOF h
    if eof then do
        hClose h
        exitWith ExitSuccess
    else
        hGetLine h >>= putStrLn 
```

我正在运行这样的代码：

```
runghc cat.hs file1 file2 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-13T17:21:46.697

您的问题是`exitWith`终止整个程序。所以，你不能真正使用`forever`循环文件，因为显然你不想“永远”运行函数，直到文件结束。`catHandle`你可以这样重写

```
catHandle :: Handle -> IO ()
catHandle h = do
    eof <- IO.hIsEOF h
    if eof then do
        hClose h
     else
        hGetLine h >>= putStrLn
        catHandle h 
```

即，如果我们还没有达到 EOF，我们递归并读取另一行。

然而，这整个方法过于复杂。你可以把 c​​at 简单地写成

```
main = do
    files <- getArgs
    forM_ files $ \filename -> do
        contents <- readFile filename
        putStr contents 
```

由于惰性 i/o，整个文件内容实际上并未加载到内存中，而是流式传输到 stdout。

如果您对操作员感到满意`Control.Monad`，整个程序可以缩短到

```
main = getArgs >>= mapM_ (readFile >=> putStr) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-13T19:23:57.760

If you install the very helpful [`conduit` package](http://hackage.haskell.org/package/conduit-0.5.2), you can do it this way:

```
module Main where

import Control.Monad
import Data.Conduit
import Data.Conduit.Binary
import System.Environment
import System.IO

main :: IO ()
main = do files <- getArgs
          forM_ files $ \filename -> do
            runResourceT $ sourceFile filename $$ sinkHandle stdout 
```

This looks similar to shang's suggested simple solution, but using conduits and [`ByteString`](http://hackage.haskell.org/package/bytestring-0.9.2.1) instead of lazy I/O and `String`. Both of those are good things to learn to avoid: lazy I/O frees resources at unpredictable times; `String` has a lot of memory overhead.

Note that `ByteString` is intended to represent binary data, not text. In this case we're just treating the files as uninterpreted sequences of bytes, so `ByteString` is fine to use. If OTOH we were processing the file as *text*—counting characters, parsing, etc—we'd want to use [`Data.Text`](http://hackage.haskell.org/package/text-0.11.2.2).

**EDIT:** You can also write it like this:

```
main :: IO ()
main = getArgs >>= catFiles

type Filename = String

catFiles :: [Filename] -> IO ()
catFiles files = runResourceT $ mapM_ sourceFile files $$ sinkHandle stdout 
```

In the original, `sourceFile filename` creates a `Source` that reads from the named file; and we use `forM_` on the outside to loop over each argument and run the `ResourceT` computation over each filename.

However in Conduit you can use monadic `>>` to concatenate sources; `source1 >> source2` is a source that produces the elements of `source1` until it's done, then produces those of `source2`. So in this second example, `mapM_ sourceFile files` is equivalent to `sourceFile file0 >> ... >> sourceFile filen`—a `Source` that concatenates all of the sources.

**EDIT 2:** And following Dan Burton's suggestion in the comment to this answer:

```
module Main where

import Control.Monad
import Control.Monad.IO.Class
import Data.ByteString
import Data.Conduit
import Data.Conduit.Binary
import System.Environment
import System.IO

main :: IO ()
main = runResourceT $ sourceArgs $= readFileConduit $$ sinkHandle stdout

-- | A Source that generates the result of getArgs.
sourceArgs :: MonadIO m => Source m String
sourceArgs = do args <- liftIO getArgs
                forM_ args yield

type Filename = String          

-- | A Conduit that takes filenames as input and produces the concatenated 
-- file contents as output.
readFileConduit :: MonadResource m => Conduit Filename m ByteString
readFileConduit = awaitForever sourceFile 
```

In English, `sourceArgs $= readFileConduit` is a source that produces the contents of the files named by the command line arguments.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-13T17:29:50.927

我的第一个想法是这样的：

```
import System.Environment
import System.IO
import Control.Monad
main = getArgs >>= mapM_ (\name -> readFile name >>= putStr) 
```

它并没有真正以 unix-y 方式失败，并且不做标准输入或多字节的东西，但它是“更多的 haskell”所以我只是想分享它。希望能帮助到你。

另一方面，我想它应该可以轻松处理大文件而不会填满内存，这要归功于 putStr 在文件读取期间已经可以清空字符串这一事实。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-13T17:16:55.460

`catHandle`，它是从 间接调用的`catFileArray`，[`exitWith`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-Exit.html#v:exitWith)当它到达第一个文件的末尾时调用。这将终止程序，并且不再读取更多文件。

相反，您应该`catHandle`在到达文件末尾时从函数中正常返回。这可能意味着您不应该阅读`forever`。

# mysql - Web 应用程序 - MySQL 事务

> ID：11475007
> 
> 赞同：0
> 
> 时间：2012-07-13T17:00:40.747
> 
> 标签：mysql, transactions

我正在计划一个 Web 应用程序，它允许使用 Rails 并发访问某些表。有人对实施交易有什么建议吗？甚至有必要吗？

该应用程序将在 CentOS LAM 配置下运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:07:43.327

我不知道事务和并发之间有很大关系。

在我看来，使用事务的主要原因是确保如果您对数据库执行多个操作，它们要么全部工作要么全部失败。有关详细信息，请参阅[我的这篇博客文章。](http://jasonswett.net/blog/why-you-should-use-database-transactions/)

所以换句话说，我会说不，您不必担心将事务作为解决并发情况的一种方式。（不过，我可能是错的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:47:32.967

交易和并发不相关。如果您在数据库上应用多个操作（通常但不一定对多个表），如果其中任何一个操作的失败会引发某种不一致的状态 - 无论是与已经存在的数据还是如果失败的动作应该为它后面的动作建立一个必要条件（例如：如果插入新记录失败，该记录将是下一个动作插入的其他记录的父记录）。因此，在这些情况下，您需要保证仅在全部成功或未成功时应用相关操作，然后回滚所有先前执行的相关操作以返回到第一个此类操作之前存在的初始状态被处决

# grails - createCriteria 的域对象的集合属性上是否有“包含”功能？

> ID：11475009
> 
> 赞同：10
> 
> 时间：2012-07-13T17:00:48.447
> 
> 标签：grails, createcriteria

我有一个拍卖域对象和一个用户域对象。拍卖`hasMany`用户。

我想做`createCriteria`的事情是这样的：

```
def c = Auction.createCriteria()
def l = c.list (max: maxVar, offset: offsetVar) {
    contains("users", thisUser)
} 
```

虽然，`contains`不在可接受节点列表中：[createCriteria description page](http://grails.org/doc/latest/ref/Domain%20Classes/createCriteria.html%20%22)。

有没有办法实现这个功能？

需要明确的是，有没有办法让标准是指定的用户对象包含在拍卖的集合属性中？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-13T17:04:11.840

尝试这个：

```
def l = c.list (max: maxVar, offset: offsetVar) {
    users {
        idEq(thisUser.id)
    }
} 
```

# javascript - 为什么我不能/不应该使用 while 循环来监控异步 jQuery 操作？

> ID：11475014
> 
> 赞同：1
> 
> 时间：2012-07-13T17:01:06.557
> 
> 标签：javascript, jquery, ajax, asynchronous, coordinate

我正试图集中精力协调异步操作。我需要一点帮助理解：

1.  为什么使用 while 循环等待操作完成是一个坏主意并且不起作用，并且
2.  如果有在 jQuery 函数上使用回调的可行替代方案

大多数情况下，将回调添加到像 $.get() 这样的异步函数效果很好。然而，在某种程度上，这确实决定了我不喜欢的代码的编写方式和位置。

```
$(function() {

    var r = AjaxResults( page );

    // loop prevents further processing until GetResults() is done
    while( isComplete == false )
    isComplete = $('body').data('isComplete');

    // reset isComplete boolean
    $('body').data('isComplete', false);

    // this will only continue after GetResults() has exited
    paintTheTownRed();
    var whateverElse = true;
});

function AjaxResults( page ) {

   // do something before async operation
   switch( page ){
       case '1': {...} break;
       ...
       default: break;
   } 

   $.getJSON("/controller/page", null, function(data) {

       // do something after async operation
       {...}

       $('body').data('isComplete', true);
       return data;
   });
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T17:06:02.043

因为它会刺激我的 CPU 并极大地刺激我。

*编写*代码的位置几乎从不由异步/同步决定；函数是函数，无论它们是匿名的并内联编写的，还是命名并作为引用传递的。

此外，promise 和[延迟对象](http://api.jquery.com/category/deferred-object/)有助于决定在哪里/如何实现功能。

有关其他详细信息和想法，请参阅[`.when`（文档）](http://api.jquery.com/jQuery.when/)之类的内容，但还有其他使用它们的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T17:08:33.157

简而言之，您不应该这样做，因为这将是非常糟糕的用户体验，并且会严重激怒大多数/所有观众。充其量它会刺激 CPU 并不必要地耗尽观众的电池。在最坏的情况下，观众会认为他们的浏览器冻结/挂起。

因为 javascript 是单线程的，并且单线程与浏览器中的用户事件处理相关联，所以如果您使用 while 循环循环等待异步事件完成，您将在 while 循环期间锁定浏览器。您可能还会发现某些浏览器会给用户一个警告，提示您运行的 javascript 过长。

目前没有替代某种类型的回调用于 javascript 中的异步编程。如果您想使用异步操作，那么您必须使您的编程风格适应它们的工作方式，以保持良好的用户体验。是的，这意味着调整你的编程风格，但这是为了保持良好的用户体验而付出的代价。 [如果您想对此进行调查，延迟对象](http://api.jquery.com/category/deferred-object/)可以为您提供一种更令人愉悦的代码编写方式（它仍然是回调，但似乎少了一点）。

做你提议的事情是将你的编程便利性放在用户体验之前，这只是一个糟糕/懒惰的程序员的标志，他们的目标/优先级似乎倒退了。

仅供参考，即使在允许并且可以工作的环境中（如本机 Windows 开发），这也是一种糟糕的编程实践。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T17:11:36.993

> 大多数情况下，向异步函数添加回调`$.get()`效果很好。然而，在某种程度上，这确实决定了我不喜欢的代码的编写方式和位置。

不再需要直接向 AJAX 函数添加回调。

使用 jQuery [deferred objects](http://api.jquery.com/category/deferred-object/)让您在不需要过多嵌套的情况下编写代码：

```
function AjaxResults( page ) {
    ...  // prep
    return $.getJSON("/controller/page", null)
        .done(function(data) {
            // always do this
        });
}

AjaxResults(page).done(paintTheTownRed); 
```

无论如何，请按照此处所示放置您自己的`complete`处理程序，但是通过*返回*对象，您有机会做*额外的*事情，而无需传递大量回调或嵌套您的代码。`$.getJSON`*`jqXHR`*

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T17:12:42.913

如果您的问题是您不喜欢定义在 $.get() 中调用的函数，那么请务必将其写为单独的函数：

```
$(function() {

    AjaxResults( page );

});

function AjaxResults( page ) {

   // do something before async operation
   switch( page ){
       case '1': {...} break;
       ...
       default: break;
   } 

   $.getJSON("/controller/page", null, doWhatever);
}

function doWhatever(data) {
    paintTheTownRed();
    var whateverElse = true;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T17:13:00.627

嗯，这是一个坏主意，因为它不起作用。永远不会调用回调函数，因为您处于 while 循环中，因此布尔值不会更改为`true`，因此它是一个无限循环

现在，为什么实际的同步请求是一个坏主意，因为它们冻结了 UI 并使我认为选项卡崩溃了。但是，是的，同步请求是回调的替代方案。**

# mysql - 这可能吗？使用表列值中的数据库名称的 Mysql 查询

> ID：11475015
> 
> 赞同：0
> 
> 时间：2012-07-13T17:01:11.783
> 
> 标签：mysql, database, where

我有两个表 TabA 和 TabB。TabA 在 DB_A 中，TabB 在 'DBX'_B 中。

现在我需要从 DBA 的 TabA 的字段中获取 DBX_B 名称，并将它们加入查询以从这两个表中提取数据。

```
 DBA.TabA:
 ID        DB_Name      UserName    Password
 -------------------------------------------
 101       DBX          xyz         abc

 DBX_B.TabB:

 ID        Type      FirstName      LastName
 -------------------------------------------
 101       Admin     xyz            abc 
```

我需要从中拉出并`ID, Username, Password`从中`DBA.TabA`拉出。但是可以从 DB_NAME 中识别要使用的第二个数据库名称，并将其与DBA.TabA.DB_Name' +之类的字符串连接起来。从两者的 ID 上加入这两个表。`Type, Firstname, LastName``DBX_B.TabB``_B'. So the 2nd database to pull from is``_B`

查询可能类似于：

```
 SELECT DBA.TabA.ID, DBA.TabA.Username, DBA.TabA.Password, 
         DB2.TabB.Type, DB2.TabB.FirstName, DB2.TabB.Lastname 
    FROM DBA, CONCAT(DBA.TabA.DB_Name, '_B') as DB2
   WHERE DBA.TabA.ID = DB2.TabB.ID 
```

当然，我们也可以使用 Join 而不是 where。

这样的事情可能吗？想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:13:17.740

You could possibly do this with some subSelects, but performance will take a huge hit, to the point that it just won't be worth it. You might be better off pulling your tables into whatever your middle tier is (php?) and joining the data together in there. How you do that will depend on what your middle tier is.

There is something flawed in your database design, if you are still in the design phase, STOP, and redesign, hire someone if you have to, getting your Data model designed correctly now will save you so much future pain. If you are maintaining something and stuck with what you have, using the middle tier will be your best bet.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T17:10:35.880

正如 Oli 所说，您不能在 mysql 和大多数关系数据库程序中执行此操作，您必须运行一个 use 命令来指示 RDBMS 使用您的数据库，因为它可能存储了许多不同的数据库。

例如，当您登录 mysql 时，您必须运行：

```
use DB_NAME; 
```

指示它使用该特定数据库，那么只有您可以访问其表。

# apache2 - 如何在 Rackspace 云站点上获取 apache 以提供具有额外路径信息的脚本？

> ID：11475021
> 
> 赞同：1
> 
> 时间：2012-07-13T17:01:16.697
> 
> 标签：apache2, rackspace, pathinfo

我在 Rackspace 云站点上运行一个站点（我无权访问 apache 配置，但我可能会要求他们更改某些内容或使我能够进行更改）。

我有一个名为 feeds.php 的脚本，我想将它放在文档根目录中，以便在请求 /feeds/news 或 /feeds/photos 等 uri 时调用它。

我在我直接控制的机器上运行的所有 apache 服务器似乎都默认执行此操作。当我将 feeds.php 放在我的其他 apache 站点上时，它会按我的意愿工作。但它不适用于 Rackspace 云站点。我已经向他们开放了一张票，但我试图了解它导致此功能的原因，以便我将来可以自己修复它（或者至少更好地向 Rackspace 描述我需要的支持）。

我已经浏览了正在运行的服务器上的所有 Apache 配置，并且我没有任何 RewriteRules 或任何可以做到这一点的东西。

您知道哪些配置选项使 Apache 服务器 url 成为这种 fasion 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T21:12:52.363

听起来您需要创建一些重写规则并确保启用 URL 重写。

您可以使用此站点来帮助生成您需要的规则：

[http://www.generateit.net/mod-rewrite/](http://www.generateit.net/mod-rewrite/)

# ruby-on-rails-3 - 将所有 404 错误重定向到我的索引？

> ID：11475026
> 
> 赞同：1
> 
> 时间：2012-07-13T17:01:40.333
> 
> 标签：ruby-on-rails-3

我最近刚刚将我的网站从 Wordpress 重建到 Rails 3.2.6。我对文章等的命名约定已经改变，因此网络上指向我网站的许多链接都给出了 404 错误。

如何将所有 404 错误重定向回我的索引？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T18:00:45.647

在 rails 3 中，您可以通过在 config/routes.rb 文件的末尾放置一条 catch-all 路由来重定向与以前的路由规则不匹配的所有内容，如下所示：

```
match "/*other" => redirect("/") 
```

# xml - 需要帮助通过 XLST 删除文本和替换 xlm

> ID：11475029
> 
> 赞同：1
> 
> 时间：2012-07-13T17:01:47.237
> 
> 标签：xml, xslt, xslt-1.0

我完全被困住了。我正在尝试使用 XLST 查找/替换部分 xml 输出文件。我真的连起点都没有。我尝试使用 Altova DiffDog 来自动生成我的 xlst，因为我对如何自己编写并没有牢牢把握。

这是我当前的 xml 输出文件：

```
<?xml version='1.0' encoding='UTF-8'?>
<BB:Report_Data xmlns:BB="urn:com.playdate.report/Report-Outbound">
   <BB:Report_Entry>
      <BB:leaveBalanceTotal.employeeId>1234567</BB:leaveBalanceTotal.employeeId>
      <BB:leaveBalanceTotal.bmbId>9280136270</BB:leaveBalanceTotal.bmbId>
      <BB:All_Eligible_Time_Off_Plans_for_Worker>
         <BB:leaveBalanceTotal.leaveCodeId>1010</BB:leaveBalanceTotal.leaveCodeId>
         <BB:leaveBalanceTotal.balanceAmount>0</BB:leaveBalanceTotal.balanceAmount>
         <BB:leaveBalanceTotal.effectiveDate>2012-07-05</BB:leaveBalanceTotal.effectiveDate>
         <BB:leaveBalanceTotal.lastPayEndDate>2012-07-05</BB:leaveBalanceTotal.lastPayEndDate>
      </BB:All_Eligible_Time_Off_Plans_for_Worker>
      <BB:All_Eligible_Time_Off_Plans_for_Worker>
         <BB:leaveBalanceTotal.leaveCodeId>1014</BB:leaveBalanceTotal.leaveCodeId>
         <BB:leaveBalanceTotal.balanceAmount>96</BB:leaveBalanceTotal.balanceAmount>
         <BB:leaveBalanceTotal.effectiveDate>2012-07-05</BB:leaveBalanceTotal.effectiveDate>
         <BB:leaveBalanceTotal.lastPayEndDate>2012-07-05</BB:leaveBalanceTotal.lastPayEndDate>
      </BB:All_Eligible_Time_Off_Plans_for_Worker>
      <BB:leaveBalanceTotal.totalDaysService>1459</BB:leaveBalanceTotal.totalDaysService>
   </BB:Report_Entry>
</BB:Report_Data> 
```

这就是我需要它的样子：

```
<?xml version='1.0' encoding='UTF-8'?>
<BB:Report_Data xmlns:BB="urn:com.playdate.report/Report-Outbound">
   <leaveBalanceTotal>
      <leaveBalanceTotal.employeeId>1234567</leaveBalanceTotal.employeeId>
      <leaveBalanceTotal.bmbId>9280136270</leaveBalanceTotal.bmbId>
      <leaveBalanceTotal.leaveCodeId>1010</leaveBalanceTotal.leaveCodeId>
      <leaveBalanceTotal.balanceAmount>0</leaveBalanceTotal.balanceAmount>
      <leaveBalanceTotal.effectiveDate>2012-07-05</leaveBalanceTotal.effectiveDate>
      <leaveBalanceTotal.lastPayEndDate>2012-07-05</leaveBalanceTotal.lastPayEndDate>
      <leaveBalanceTotal.leaveCodeId>1014</leaveBalanceTotal.leaveCodeId>
      <leaveBalanceTotal.balanceAmount>96</leaveBalanceTotal.balanceAmount>
      <leaveBalanceTotal.effectiveDate>2012-07-05</leaveBalanceTotal.effectiveDate>
      <leaveBalanceTotal.lastPayEndDate>2012-07-05</leaveBalanceTotal.lastPayEndDate>
      <leaveBalanceTotal.totalDaysService>1459</leaveBalanceTotal.totalDaysService>
   </leaveBalanceTotal>
</BB:Report_Data> 
```

本质上，我正在尝试删除以下所有出现的情况：

1.  BB:All_Eligible_Time_Off_Plans_for_Worker
2.  /BB:All_Eligible_Time_Off_Plans_for_Worker
3.  BB：

我需要用 leaveBalanceTotal 替换 Report_Entry。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:32:44.003

**当这个 XSLT：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet 
  xmlns:BB="urn:com.playdate.report/Report-Outbound"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">
  <xsl:output omit-xml-declaration="no" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <!-- Identity Template: copies everything as-is -->
  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <!-- Remove BB:All_Eligible_Time_Off_Plans_for_Worker elements -->
  <!-- right away, but process their children -->
  <xsl:template match="BB:All_Eligible_Time_Off_Plans_for_Worker" priority="2">
    <xsl:apply-templates /> 
  </xsl:template>

  <!-- Replace BB:Report_Entry elements with leaveBalanceTotal ones -->
  <xsl:template match="BB:Report_Entry">
    <leaveBalanceTotal>
      <xsl:apply-templates />   
    </leaveBalanceTotal>    
  </xsl:template>

  <!-- Remove BB namespace from descendent elements -->
  <xsl:template match="BB:Report_Entry/* | 
      BB:All_Eligible_Time_Off_Plans_for_Worker/*">
    <xsl:element name="{local-name(.)}">
      <xsl:apply-templates />   
    </xsl:element>  
  </xsl:template>

</xsl:stylesheet> 
```

**...应用于提供的 XML：**

```
<?xml version="1.0" encoding="UTF-8"?>
<BB:Report_Data xmlns:BB="urn:com.playdate.report/Report-Outbound">
  <BB:Report_Entry>
    <BB:leaveBalanceTotal.employeeId>1234567</BB:leaveBalanceTotal.employeeId>
    <BB:leaveBalanceTotal.bmbId>9280136270</BB:leaveBalanceTotal.bmbId>
    <BB:All_Eligible_Time_Off_Plans_for_Worker>
      <BB:leaveBalanceTotal.leaveCodeId>1010</BB:leaveBalanceTotal.leaveCodeId>
      <BB:leaveBalanceTotal.balanceAmount>0</BB:leaveBalanceTotal.balanceAmount>
      <BB:leaveBalanceTotal.effectiveDate>2012-07-05</BB:leaveBalanceTotal.effectiveDate>
      <BB:leaveBalanceTotal.lastPayEndDate>2012-07-05</BB:leaveBalanceTotal.lastPayEndDate>
    </BB:All_Eligible_Time_Off_Plans_for_Worker>
    <BB:All_Eligible_Time_Off_Plans_for_Worker>
      <BB:leaveBalanceTotal.leaveCodeId>1014</BB:leaveBalanceTotal.leaveCodeId>
      <BB:leaveBalanceTotal.balanceAmount>96</BB:leaveBalanceTotal.balanceAmount>
      <BB:leaveBalanceTotal.effectiveDate>2012-07-05</BB:leaveBalanceTotal.effectiveDate>
      <BB:leaveBalanceTotal.lastPayEndDate>2012-07-05</BB:leaveBalanceTotal.lastPayEndDate>
    </BB:All_Eligible_Time_Off_Plans_for_Worker>
    <BB:leaveBalanceTotal.totalDaysService>1459</BB:leaveBalanceTotal.totalDaysService>
  </BB:Report_Entry>
</BB:Report_Data> 
```

**...产生了预期的结果：**

```
<?xml version="1.0" encoding="UTF-8"?>
<BB:Report_Data xmlns:BB="urn:com.playdate.report/Report-Outbound">
  <leaveBalanceTotal>
    <leaveBalanceTotal.employeeId>1234567</leaveBalanceTotal.employeeId>
    <leaveBalanceTotal.bmbId>9280136270</leaveBalanceTotal.bmbId>
    <leaveBalanceTotal.leaveCodeId>1010</leaveBalanceTotal.leaveCodeId>
    <leaveBalanceTotal.balanceAmount>0</leaveBalanceTotal.balanceAmount>
    <leaveBalanceTotal.effectiveDate>2012-07-05</leaveBalanceTotal.effectiveDate>
    <leaveBalanceTotal.lastPayEndDate>2012-07-05</leaveBalanceTotal.lastPayEndDate>
    <leaveBalanceTotal.leaveCodeId>1014</leaveBalanceTotal.leaveCodeId>
    <leaveBalanceTotal.balanceAmount>96</leaveBalanceTotal.balanceAmount>
    <leaveBalanceTotal.effectiveDate>2012-07-05</leaveBalanceTotal.effectiveDate>
    <leaveBalanceTotal.lastPayEndDate>2012-07-05</leaveBalanceTotal.lastPayEndDate>
    <leaveBalanceTotal.totalDaysService>1459</leaveBalanceTotal.totalDaysService>
  </leaveBalanceTotal>
</BB:Report_Data> 
```

希望有帮助！如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T17:39:39.823

这是另一个 XSLT 1.0 选项。这也将保留数据可能具有的任何属性。

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:BB="urn:com.playdate.report/Report-Outbound" 
    exclude-result-prefixes="BB">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="comment()|processing-instruction()|@*">
        <xsl:copy/>
    </xsl:template>

    <xsl:template match="*">
        <xsl:element name="{local-name()}">
            <xsl:apply-templates select="node()|@*"/>
        </xsl:element>
    </xsl:template>

    <xsl:template match="BB:All_Eligible_Time_Off_Plans_for_Worker">
        <xsl:apply-templates/>
    </xsl:template>

    <xsl:template match="BB:Report_Data">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="BB:Report_Entry">
        <leaveBalanceTotal>
            <xsl:apply-templates select="node()|@*"/>
        </leaveBalanceTotal>
    </xsl:template>

</xsl:stylesheet> 
```

**输出**

```
<BB:Report_Data xmlns:BB="urn:com.playdate.report/Report-Outbound">
   <leaveBalanceTotal>
      <leaveBalanceTotal.employeeId>1234567</leaveBalanceTotal.employeeId>
      <leaveBalanceTotal.bmbId>9280136270</leaveBalanceTotal.bmbId>
      <leaveBalanceTotal.leaveCodeId>1010</leaveBalanceTotal.leaveCodeId>
      <leaveBalanceTotal.balanceAmount>0</leaveBalanceTotal.balanceAmount>
      <leaveBalanceTotal.effectiveDate>2012-07-05</leaveBalanceTotal.effectiveDate>
      <leaveBalanceTotal.lastPayEndDate>2012-07-05</leaveBalanceTotal.lastPayEndDate>
      <leaveBalanceTotal.leaveCodeId>1014</leaveBalanceTotal.leaveCodeId>
      <leaveBalanceTotal.balanceAmount>96</leaveBalanceTotal.balanceAmount>
      <leaveBalanceTotal.effectiveDate>2012-07-05</leaveBalanceTotal.effectiveDate>
      <leaveBalanceTotal.lastPayEndDate>2012-07-05</leaveBalanceTotal.lastPayEndDate>
      <leaveBalanceTotal.totalDaysService>1459</leaveBalanceTotal.totalDaysService>
   </leaveBalanceTotal>
</BB:Report_Data> 
```

# pydev - itertools 函数未显示在 pydev 快速修复中

> ID：11475030
> 
> 赞同：0
> 
> 时间：2012-07-13T17:01:48.273
> 
> 标签：pydev

使用 python 2.7.2 和 pydev 2.5.0，我似乎无法让 eclipse 建议任何来自 itertools 的函数作为建议。

例如快速修复给定的以下内容：chain([1, 2, 3], [4, 5, 6])

仅提供 logilab.common.compat 作为快速修复的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T16:42:24.557

这是一个已知问题：PyDev 目前只会发现它具有源代码的函数（并且由于 itertools 是 PyDev 无法分析的内置模块，它不会为您提供自动导入完成......注意：它如果您尝试找到模块“itertools”并从中完成，则确实有效）。

# symfony-2.1 - symfony2：登录用户的语言环境如何以及在哪里存储？

> ID：11475031
> 
> 赞同：0
> 
> 时间：2012-07-13T17:01:49.110
> 
> 标签：symfony-2.1, fosuserbundle

通常，在用户登录后，站点的内容会显示在用户从假设帐户设置中选择的区域设置中。

该语言环境通常存储在哪里？symfony2 以什么方式处理它？

`locale`我使用 FOSUserBundle，我希望表中存在一个名为的列`fos_user`..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T19:37:45.137

在 symfony 2.0 中，语言环境存储在会话中： [http ://symfony.com/doc/current/book/translation.html#handling-the-user-s-locale](http://symfony.com/doc/current/book/translation.html#handling-the-user-s-locale)

在 symfony 2.1 中，语言环境存储在请求中（取自请求）： [http ://symfony.com/doc/master/book/translation.html#handling-the-user-s-locale](http://symfony.com/doc/master/book/translation.html#handling-the-user-s-locale)

但是你可以通过 impelementing kernel.event_listener 来改变默认行为

我发现有人甚至为 FOSUserBundle 做过：[https](https://gist.github.com/1670163) ://gist.github.com/1670163也许它有帮助

# sql - DataMapper 查询 - 去年、上个月等

> ID：11475036
> 
> 赞同：1
> 
> 时间：2012-07-13T17:01:55.150
> 
> 标签：sql, ruby, sinatra, datamapper

我使用 sinatra web 框架和 DataMapper。

我有代码：

```
@wdata = Data.all(:date => ((DateTime.now - @interval.to_i)..DateTime.now)) 
```

当我想要过去 24 小时的数据时，我使用 @interval = 1，过去 7 天 @interval = 7。

我应该如何从例如上个月或去年获取数据？月份可以有 31、30、28 或 29 天我想区分一下。例如，我会从去年 6 月、过去两个月等获取数据。

我在网上搜索了一些教程，但我只找到了 ActiveRecord。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T23:52:25.173

也许有更优雅的解决方案，但您可以手动执行此类范围

```
d = DateTime.today
p = d.prev_month
py = d.prev_year
last_month = Data.all(:date => (DateTime.new(p.year, p.month)..DateTime.new(d.year, d.month))
last_year = Data.all(:date => (DateTime.new(py.year)..DateTime.new(d.year)) 
```

# php - 从网络上将图像和数据存储在 iPhone 应用程序上的最有效方法是什么？

> ID：11475041
> 
> 赞同：2
> 
> 时间：2012-07-13T17:02:24.370
> 
> 标签：php, iphone, ios, image, storing-data

我会尽量保持简短。我正在为 iPhone 制作一个应用程序，它需要能够存储来自网络的一些图像。图像的 URL（以及其他数据）存储在 MySQL 服务器的一个表中。从那里，我用 JSON 解析了表格，并成功地将其序列化以显示在应用程序的 UITableView 中。每个单元格现在显示来自表中 imageurl 字段的图像，以及来自表中标题字段的图像标题作为文本，两者都来自 MySQL->json.php->NSArray(json)(objectAtIndex)等等

此时，应用程序每次启动时，它都会从带有 JSON.php 的 url 中获取所有信息，并且我认为它每次都会下载图像。我觉得这比必要的工作量要大得多，但是，由于数据库将根据其获取数据的位置不定期地更新自身，因此仅下载一次信息是不够的。

问题 1：我需要一个解决方案，应用程序“询问” .php 是否具有与 JSON 显示的完全相同的数据。我能想到的最合乎逻辑的方法是在 .php 中为“日期”添加一个字段，显示数据上次更新的日期，如果应用程序具有同一日期的数据，则不会发生任何事情，但如果 php-端日期比应用端日期新，那么它必须能够删除所有存储的数据，并替换为新的 JSON 数据。

问题 2：JSON 数据是 iPhone 中的 NSArray，“Image”字段只是图像的 url (www.example.com/image.png)，而不是实际图像。在通过 JSON 获得数据的新“版本”之前，如何下载这些图像并将它们保存在 iPhone 上？

奖励问题：我现在使用的方法是在滚动时使 UITableView 滞后。我不是专业人士，但我已经阅读了几个地方，这可能是由内存泄漏引起的，我还没有完全理解这意味着什么。我还读到这可能是因为我可能会为每个单元格实例化对象，而不是一次并重新使用它。

底线：我的目标是让应用程序在第一次应用程序启动时从 json.php 下载所有数据，然后在以后启动时检查版本是否正确。如果正确，则无需下载，只需使用存储的包含数据的 JSON 对象，并且来自 url 的图像文件下载第一次启动。如果不正确，请删除所有以前存储的图像并清除 json-object，然后导入新更新的 json-object，并从 iPhone 上某个 jsonobject 的 image-urls 中保存图像。

注意：更新数据（即添加一个额外的图像，这就是所做的所有更改）不是解决方案，在我看来也不可能。当这个数据库有更新时，我需要清除手机中存储的所有信息，然后重新下载。这是因为我放入数据库的信息是从另一个网站解析的，如果新图像或数据更新包含其他字段的更改，那么我宁愿调整数据库以适应（通过 json.php）而不是一直发布应用程序的更新。

这是错误的方法吗？这可能吗？非常感谢您的帮助！

从这里和那里编辑 JSON 的东西..

```
#define kURL [NSURL URLWithString:@"www.example.com"] 

NSData* data = [NSData dataWithContentsOfURL: kURL]; 
NSArray *json = [NSJSONSerialization JSONObjectWithData: data options: NSJSONReadingMutableContainers error: &e]; 
NSDictionary *info = [json objectAtIndex:indexPath.row]; 
cell.textLabel.text = [info objectForKey:@"Name"]; // ±Same for url 
```

这是从课堂上不同的地方提取的，所以它们可能不会完全像这样工作。

编辑

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

// Configure the cell...

info = [json objectAtIndex:indexPath.row];

cell.textLabel.text = [info objectForKey:@"Name"];

NSString* imageURL = [info objectForKey:@"Image"];
NSURL *URLimage = [NSURL URLWithString:imageURL];
NSData* imageData = [NSData dataWithContentsOfURL:URLimage];
UIImage* images = [[UIImage alloc] initWithData:imageData];
cell.imageView.image = images;

return cell; 
```

}

斯蒂安。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:20:33.500

我假设您正在通过 NSURLRequest 与您的服务器通信。如果是这样，只需将缓存策略设置为 NSURLRequestReloadRevalidatingCacheData ，如果它已经在缓存中并且是最新的，它将不会重新下载您的数据。这样，它几乎可以为您处理。

您还需要在应用程序委托中的某个地方设置一个 NSURLCache。

如果您不发布代码，我无法告诉您是什么导致了您的大块滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T17:21:50.447

以防有人读到这个。例如，当制作一个 NSURL 来获取（和解析）一个大的 JSON 文件时。您将希望在后台执行此操作 (dispatch_get_global_queue)。然后在需要数据时调用它（dispatch_async）。否则，您将使用与 UI 相同的线程，并且它会在执行任务时冻结..

```
#define kBgQueue dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0)
#define JSONURL [NSURL URLWithString:@"http://www.web.com/json.php"]    
...

dispatch_async(kBgQueue, ^{
    NSData* data = [NSData dataWithContentsOfURL:JSONURL];
    [self performSelectorOnMainThread:@selector(fetchedData:) withObject:data waitUntilDone:YES];
}); 
```

# java - 如何从另一个类 Java Swing 调用方法？

> ID：11475042
> 
> 赞同：5
> 
> 时间：2012-07-13T17:02:24.370
> 
> 标签：java, swing, jmenubar

我有以下 SwingMenu 类。包装基地；

```
import javax.swing.*;

public class SwingMenu {
    public static void main(String[] args) {
        SwingMenu s = new SwingMenu();
    }

    public SwingMenu() {
        JFrame frame = new JFrame(
                "Creating a JMenuBar, JMenu, JMenuItem and seprator Component");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JMenuBar menubar = new JMenuBar();
        JMenu filemenu = new JMenu("File");
        filemenu.add(new JSeparator());
        JMenu editmenu = new JMenu("Edit");
        editmenu.add(new JSeparator());
        JMenuItem fileItem1 = new JMenuItem("New");
        JMenuItem fileItem2 = new JMenuItem("Open");
        JMenuItem fileItem3 = new JMenuItem("Close");
        fileItem3.add(new JSeparator());
        JMenuItem fileItem4 = new JMenuItem("Save");
        JMenuItem editItem1 = new JMenuItem("Cut");
        JMenuItem editItem2 = new JMenuItem("Copy");
        editItem2.add(new JSeparator());
        JMenuItem editItem3 = new JMenuItem("Paste");
        JMenuItem editItem4 = new JMenuItem("Insert");
        filemenu.add(fileItem1);
        filemenu.add(fileItem2);
        filemenu.add(fileItem3);
        filemenu.add(fileItem4);
        editmenu.add(editItem1);
        editmenu.add(editItem2);
        editmenu.add(editItem3);
        editmenu.add(editItem4);
        menubar.add(filemenu);
        menubar.add(editmenu);
        frame.setJMenuBar(menubar);
        frame.setSize(400, 400);
        frame.setVisible(true);
    }
} 
```

我想通过从这个主类调用它来显示菜单。

```
package base;

import javax.swing.*;

import java.awt.*;
import base.SwingMenu;

public class StickyNotes {

    private static void createAndShowGUI() {

        // Create and set up the window.
        JFrame frame = new JFrame("Java Sticky Notes");

        frame.setPreferredSize(new Dimension(5000, 5000));
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new FlowLayout(FlowLayout.LEFT));

        // Add Label
        JLabel label = new JLabel("Type Below");
        frame.getContentPane().add(label);

        // Add Main Menu
        SwingMenu mainBar = new SwingMenu();
        //frame.setJMenuBar(mainBar);
        //frame.getContentPane().add(mainBar);

        // Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public Container createContentPane() {
        // Create the content-pane-to-be.
        JPanel jplContentPane = new JPanel(new BorderLayout());
        jplContentPane.setLayout(new BorderLayout());
        jplContentPane.setOpaque(true);
        return jplContentPane;
    }

    public static void main(String[] args) {
        // creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

我整个早上都想不通 :) 如何让菜单栏显示在 Java Swing 中？

```
 // Add Main Menu
    SwingMenu mainBar = new SwingMenu(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T17:08:22.963

您正在创建 2 个不同`JFrame`的 s。创建后`JFrame`：

```
JFrame frame = new JFrame("Java Sticky Notes"); 
```

创建菜单栏并将其分配给`JFrame`：

```
JMenuBar menubar = new JMenuBar();

// ...

frame.setJMenuBar(menubar); 
```

不需要：

```
SwingMenu mainBar = new SwingMenu(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T17:08:49.690

试试这个：

这基本上制作`SwingMenu`了一个菜单栏，有助于封装菜单栏的构建。

```
public class SwingMenu extends JMenuBar{
    public SwingMenu() {
        JMenu filemenu = new JMenu("File");
        JMenu editmenu = new JMenu("Edit");

        // Build your file menu and edit menu here...

        add(filemenu);
        add(editmenu);
    }
} 
```

现在，您`createAndShowGUI()`只需创建一个表单并将新创建的菜单栏添加到其中。

```
private static void createAndShowGUI() {
     // Create and set up the window.
     JFrame frame = new JFrame("Java Sticky Notes");
     // other stuff...
     // Add Main Menu
     SwingMenu mainBar = new SwingMenu();
     frame.setJMenuBar(mainBar);
     // Display the window.
     frame.pack();
     frame.setVisible(true);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-13T17:12:04.920

检查这个修改后的代码示例：

```
import javax.swing.*;

import java.awt.*;

public class StickyNotes {

    private JMenuBar getMenuBar()
    {
        JMenuBar menubar = new JMenuBar();
        JMenu filemenu = new JMenu("File");
        filemenu.add(new JSeparator());
        JMenu editmenu = new JMenu("Edit");
        editmenu.add(new JSeparator());
        JMenuItem fileItem1 = new JMenuItem("New");
        JMenuItem fileItem2 = new JMenuItem("Open");
        JMenuItem fileItem3 = new JMenuItem("Close");
        fileItem3.add(new JSeparator());
        JMenuItem fileItem4 = new JMenuItem("Save");
        JMenuItem editItem1 = new JMenuItem("Cut");
        JMenuItem editItem2 = new JMenuItem("Copy");
        editItem2.add(new JSeparator());
        JMenuItem editItem3 = new JMenuItem("Paste");
        JMenuItem editItem4 = new JMenuItem("Insert");
        filemenu.add(fileItem1);
        filemenu.add(fileItem2);
        filemenu.add(fileItem3);
        filemenu.add(fileItem4);
        editmenu.add(editItem1);
        editmenu.add(editItem2);
        editmenu.add(editItem3);
        editmenu.add(editItem4);
        menubar.add(filemenu);
        menubar.add(editmenu);

        return menubar;
    }

    private void createAndShowGUI() {

        // Create and set up the window.
        JFrame frame = new JFrame("Java Sticky Notes");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new FlowLayout(FlowLayout.LEFT));

        // Add Label
        JLabel label = new JLabel("Type Below");
        frame.getContentPane().add(label);

        // Add Main Menu
        frame.setJMenuBar(getMenuBar());

        // Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public Container createContentPane() {
        // Create the content-pane-to-be.
        JPanel jplContentPane = new JPanel(new BorderLayout());
        jplContentPane.setLayout(new BorderLayout());
        jplContentPane.setOpaque(true);
        return jplContentPane;
    }

    public static void main(String[] args) {
        // creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                new StickyNotes().createAndShowGUI();
            }
        });
    }
} 
```

或者你可以像这样修改你的代码，如果你真的想把设置保留`JMenuBar`在一个不同的类中，你可以简单地创建一个 Object`SwingMenu Class`并通过创建这个 Class 的一个 Object 来调用该方法`getMenuBar()`：

```
import javax.swing.*;

import java.awt.*;

public class StickyNotes {

    private void createAndShowGUI() {

        // Create and set up the window.
        JFrame frame = new JFrame("Java Sticky Notes");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new FlowLayout(FlowLayout.LEFT));

        // Add Label
        JLabel label = new JLabel("Type Below");
        frame.getContentPane().add(label);

        // Add Main Menu
        SwingMenu swingMenu = new SwingMenu();
        frame.setJMenuBar(swingMenu.getMenuBar());

        // Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public Container createContentPane() {
        // Create the content-pane-to-be.
        JPanel jplContentPane = new JPanel(new BorderLayout());
        jplContentPane.setLayout(new BorderLayout());
        jplContentPane.setOpaque(true);
        return jplContentPane;
    }

    public static void main(String[] args) {
        // creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                new StickyNotes().createAndShowGUI();
            }
        });
    }
}

class SwingMenu {

    public JMenuBar getMenuBar() 
    {   
        JMenuBar menubar = new JMenuBar();
        JMenu filemenu = new JMenu("File");
        filemenu.add(new JSeparator());
        JMenu editmenu = new JMenu("Edit");
        editmenu.add(new JSeparator());
        JMenuItem fileItem1 = new JMenuItem("New");
        JMenuItem fileItem2 = new JMenuItem("Open");
        JMenuItem fileItem3 = new JMenuItem("Close");
        fileItem3.add(new JSeparator());
        JMenuItem fileItem4 = new JMenuItem("Save");
        JMenuItem editItem1 = new JMenuItem("Cut");
        JMenuItem editItem2 = new JMenuItem("Copy");
        editItem2.add(new JSeparator());
        JMenuItem editItem3 = new JMenuItem("Paste");
        JMenuItem editItem4 = new JMenuItem("Insert");
        filemenu.add(fileItem1);
        filemenu.add(fileItem2);
        filemenu.add(fileItem3);
        filemenu.add(fileItem4);
        editmenu.add(editItem1);
        editmenu.add(editItem2);
        editmenu.add(editItem3);
        editmenu.add(editItem4);
        menubar.add(filemenu);
        menubar.add(editmenu);

        return menubar;
    }
} 
```

# c# - 等待循环中的异步方法完成

> ID：11475043
> 
> 赞同：1
> 
> 时间：2012-07-13T17:02:26.647
> 
> 标签：c#, asynchronous

我有一个 C# 程序，它当前从多个站点同步下载数据，之后代码对我下载的数据进行了一些处理。我正在尝试移动它以异步进行下载，然后处理我下载的数据。我在这个排序上遇到了一些问题。下面是我正在使用的代码快照：

```
class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine("Started URL downloader");
        UrlDownloader d = new UrlDownloader();
        d.Process();
        Console.WriteLine("Finished URL downloader");

        Console.ReadLine();
    }
}

class UrlDownloader
{
    public void Process()
    {
        List<string> urls = new List<string>() { 
            "http://www.stackoverflow.com", 
            "http://www.microsoft.com", 
            "http://www.apple.com", 
            "http://www.google.com" 
        };

        foreach (var url in urls)
        {
            WebClient Wc = new WebClient();
            Wc.OpenReadCompleted += new OpenReadCompletedEventHandler(DownloadDataAsync);
            Uri varUri = new Uri(url);
            Wc.OpenReadAsync(varUri, url);
        }
    }

    void DownloadDataAsync(object sender, OpenReadCompletedEventArgs e)
    {
        StreamReader k = new StreamReader(e.Result);
        string temp = k.ReadToEnd();
        PrintWebsiteTitle(temp, e.UserState as string);
    }

    void PrintWebsiteTitle(string temp, string source)
    {
        Regex reg = new Regex(@"<title[^>]*>(.*)</title[^>]*>");
        string title = reg.Match(temp).Groups[1].Value;

        Console.WriteLine(new string('*', 10));
        Console.WriteLine("Source: {0}, Title: {1}", source, title);
        Console.WriteLine(new string('*', 10));
    }
} 
```

本质上，我的问题是这个。我上面的输出是：

```
Started URL downloader
Finished URL downloader
"Results of d.Process()" 
```

我想要做的是完成 d.Process() 方法，然后返回到我的 Program 类中的“Main”方法。所以，我正在寻找的输出是：

```
Started URL downloader
"Results of d.Process()"
Finished URL downloader 
```

我的 d.Process() 方法异步运行，但我不知道如何等待我的所有处理完成，然后再返回我的 Main 方法。关于如何在 C#4.0 中执行此操作的任何想法？我不确定如何“告诉”我的 Process() 方法等到所有异步活动完成后再返回 Main 方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T17:15:08.730

If you are on .NET>=4.0 you can use TPL

```
Parallel.ForEach(urls, url =>
{
    WebClient Wc = new WebClient();
    string page = Wc.DownloadString(url);
    PrintWebsiteTitle(page);
 }); 
```

I would also use [HtmlAgilityPack](http://htmlagilitypack.codeplex.com/) to parse the page instead of regex.

```
void PrintWebsiteTitle(string page)
{
    HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
    doc.LoadHtml(page);
    Console.WriteLine(doc.DocumentNode.Descendants("title").First().InnerText);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T17:31:14.640

我建议使用[WebClient.DownloadDataAsync](http://msdn.microsoft.com/en-us/library/ms144190)而不是自己编写。然后，您可以使用 Task Parallel Library 将对 DownloadDataAsync 的调用包装在 TaskCompletionSource 中，以获取可以等待或继续的多个 Task 对象：

```
 webClient.DownloadDataAsync(myUri);
        webClient.DownloadDataCompleted += (s, e) =>
                                           {
                                            tcs.TrySetResult(e.Result);
                                           };

        if (wait)
        {
            tcs.Task.Wait();
            Console.WriteLine("got {0} bytes", tcs.Task.Result.Length);
        }
        else
        {
            tcs.Task.ContinueWith(t => Console.WriteLine("got {0} bytes", t.Result.Length));
        } 
```

要处理错误情况，可以扩展 TaskCompletionSource 的使用：

```
webClient.DownloadDataCompleted += (s, e) =>
                                {
                           if(e.Error != null) tcs.SetException(e.Error);
                           else if(e.Cancelled) tcs.SetCanceled();
                           else tcs.TrySetResult(e.Result);
                                 }; 
```

对多个任务执行类似操作：

```
Task.WaitAll(tcs.Task, tcs2.Task); 
```

或者

```
Task.Factory.ContinueWhenAll(new Task[] {tcs.Task, tcs2.Task}, ts =>
                                                    {
                                                        /* do something with all the results */
                                                    }); 
```

# android - 如何保存返回光标Android的数据

> ID：11475044
> 
> 赞同：0
> 
> 时间：2012-07-13T17:02:32.487
> 
> 标签：android

```
private static final String DATABASE_CREATE =
    "create table tasks (_id integer primary key autoincrement, "

    + "title text not null,"
    +"location text not null, " 
    + "body text not null , "
    +" goaldate text not null , "
    +" absolutedate text not null , "
    +"currentdate text not null , "
    +"prio text not null, "
    +"done text not null, "
    +"category text not null, "
    +"timespent text not null, "
    +"pososto text not null,"
    +"father text not null);";

// fetch all tasks(tasks and subtasks)
public Cursor fetchTasks() { 

    return mDb.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_TITLE,
            KEY_BODY,KEY_location  , KEY_GOAL_DATE,KEY_ABSOLUTE_DATE, KEY_DATE_CURRENT ,KEY_PRIO,KEY_DONE, KEY_CATEGORY,KEY_TIME_SPEND,KEY_POSOSTO, KEY_FATHER},null, null, null, null, null);

}

//fetch subtasks of a task, given the father's key
public Cursor fetchSubTasks(String id) { 

    return mDb.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_TITLE,
            KEY_BODY,KEY_location  , KEY_GOAL_DATE,KEY_ABSOLUTE_DATE, KEY_DATE_CURRENT ,KEY_PRIO,KEY_DONE, KEY_CATEGORY,KEY_TIME_SPEND,KEY_POSOSTO, KEY_FATHER}, KEY_FATHER + " LIKE" + "'"+ id+"'", null, null, null, null);

}

//fetch a subtask
public Cursor fetchSubTask(String fid,String uid) { // tropopoihsh ths methodou wste sthn arxiki othoni na fainontai mono oi tasks

    return mDb.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_TITLE,
            KEY_BODY,KEY_location  , KEY_GOAL_DATE,KEY_ABSOLUTE_DATE, KEY_DATE_CURRENT ,KEY_PRIO,KEY_DONE, KEY_CATEGORY,KEY_TIME_SPEND,KEY_POSOSTO, KEY_FATHER}, KEY_FATHER + " LIKE" + " '"+ fid +" '"+ " AND " + KEY_ROWID + " LIKE " + " '"+ uid +"' ", null, null, null, null);

}

          mCursor= mDbHelper.fetchTasks();//fetching all the tasks
          int numberoftasks= mCursor.getCount();
          this.mCursor.moveToFirst();
          int n,m;
          String id, idf;

          int columnIndex= 0;
          for(n=0;n<=numberoftasks;n++){

              id=this.mCursor.getString(0);//unique id of the current task

              mCursor=mDbHelper.fetchSubTasks(id);// fetching the subtasks with father_id=id

              String[] my = new String[mCursor.getCount()];

                if (mCursor.moveToFirst())
                {                       
                    for (int i = 0; i < mCursor.getCount(); i++)
                    {
                        my[i] = mCursor.getString(columnIndex);
                        mCursor.moveToNext();
                    }           
                }

            m=0;

            int subtasks=mCursor.getCount();

            int j;
            for(j=0;j<=subtasks;j++){

                  mCursor=mDbHelper.fetchSubTask(id, my[j]);// fetching each time the task with the unique id( from the array)
                                                             //and father_id=id

                  LinearLayout list = (LinearLayout)v.findViewById(R.id.linear); // fill a textview of the list with one more textview
                  list.removeAllViews();
                  LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

               //   for (Music music : albums.get(position).musics) {
                      View line = inflater.inflate(R.layout.tasks_row, null);

                      /* nested list's stuff */

                      list.addView(line);
                  }

                m++;
          }

             this.mCursor.moveToNext(); 
         // } 
```

我有一个数据库，其中包含一个充满任务的表。每个任务都有一个唯一的id和一个父亲的id，以实现嵌套。我的问题是我无法正确保存光标返回的数据并且我得到一个arrayOutOfboundsException。这是我的代码。先感谢您

* * *

```
 private static final String DATABASE_CREATE =
    "create table tasks (_id integer primary key autoincrement, "

    + "title text not null,"
    +"location text not null, " 
    + "body text not null , "
    +" goaldate text not null , "
    +" absolutedate text not null , "
    +"currentdate text not null , "
    +"prio text not null, "
    +"done text not null, "
    +"category text not null, "
    +"timespent text not null, "
    +"pososto text not null,"
    +"father text not null);";

  // fetch all tasks(tasks and subtasks)
public Cursor fetchTasks() { 

    return mDb.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_TITLE,
            KEY_BODY,KEY_location  , KEY_GOAL_DATE,KEY_ABSOLUTE_DATE, KEY_DATE_CURRENT ,KEY_PRIO,KEY_DONE, KEY_CATEGORY,KEY_TIME_SPEND,KEY_POSOSTO, KEY_FATHER},null, null, null, null, null);

}

//fetch subtasks of a task, given the father's key
public Cursor fetchSubTasks(String id) { 

    return mDb.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_TITLE,
            KEY_BODY,KEY_location  , KEY_GOAL_DATE,KEY_ABSOLUTE_DATE, KEY_DATE_CURRENT ,KEY_PRIO,KEY_DONE, KEY_CATEGORY,KEY_TIME_SPEND,KEY_POSOSTO, KEY_FATHER}, KEY_FATHER + " LIKE" + "'"+ id+"'", null, null, null, null);

}

//fetch a subtask
public Cursor fetchSubTask(String fid,String uid) { // tropopoihsh ths methodou wste sthn arxiki othoni na fainontai mono oi tasks

    return mDb.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_TITLE,
            KEY_BODY,KEY_location  , KEY_GOAL_DATE,KEY_ABSOLUTE_DATE, KEY_DATE_CURRENT ,KEY_PRIO,KEY_DONE, KEY_CATEGORY,KEY_TIME_SPEND,KEY_POSOSTO, KEY_FATHER}, KEY_FATHER + " LIKE" + " '"+ fid +" '"+ " AND " + KEY_ROWID + " LIKE " + " '"+ uid +"' ", null, null, null, null);

} 
```

这是我的代码@Sam。主要任务出现在列表中，我想做的事情是获取每个任务的子任务（多个级别，每个子任务可以有子任务）并将它们显示在一种列表中。（创建一个特定的文本视图，其中包含每个任务的详细信息每次任务有子任务时的任务）。提前感谢您的任何帮助或想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:14:03.187

One major problem is that you are trying to use one Cursor for the work of two or three...

```
mCursor=mDbHelper.fetchSubTasks(id);// fetching the subtasks with father_id=id 
```

This needs to be a new Cursor (and change the appropriate references):

```
Cursor cursorId = mDbHelper.fetchSubTasks(id);// fetching the subtasks with father_id=id 
```

Otherwise your outer for-loop or cursor access will run out of bounds here:

```
for(n=0;n<=numberoftasks;n++){
    id=this.mCursor.getString(0);//unique id of the current task 
```

**Addition**

I took a guess at what you are trying to do and modified your code. But I don't see where you are using the third Cursor that you fetched, so this won't be perfect but maybe you will see where you are going wrong:

```
// You only need to find this layout once and create one LayoutInflater
LinearLayout list = (LinearLayout)v.findViewById(R.id.linear); // fill a textview of the list with one more textview
list.removeAllViews();
LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

Cursor mCursor = mDbHelper.fetchTasks();//fetching all the tasks
long id;

int columnIndex = 0;
while(mCursor.moveToNext()) {
    // If this is a SQLite id then use:
    id = mCursor.getLong(0);
    //id = this.mCursor.getString(0);//unique id of the current task

    Cursor subCursor = mDbHelper.fetchSubTasks(id);// fetching the subtasks with father_id=id

    // Loop through the subCursor, I didn't see any need to save the temporary value in an array
    while(subCursor.moveToNext()) {
        Cursor timeCursor = mDbHelper.fetchSubTask(id, subCursor.getString(columnIndex));// fetching each time the task with the unique id( from the array)
        //and father_id=id

        //   for (Music music : albums.get(position).musics) {
        View line = inflater.inflate(R.layout.tasks_row, null);

        /* nested list's stuff */
        list.addView(line);
    }
} 
```

Hope that helps!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T17:11:36.423

尝试使用while循环，错误肯定在for循环中：

```
while(cursor.moveToNext()){
      //do your thing
} 
```

使用此循环，您不必关心存在多少元素。如果这仍然给您一个 outOfBound 异常，那么您没有正确获取行。

# css - 罗盘多个 css 转换

> ID：11475047
> 
> 赞同：20
> 
> 时间：2012-07-13T17:02:40.077
> 
> 标签：css, sass, compass-sass, css-transitions

如何使用 [Compass进行像](http://compass-style.org/)[Jsfiddle](http://jsfiddle.net/SvYvq/3/)这样的多个 css 转换？

我想做的是用 Compass 在下面基本写下这段代码。

```
-webkit-transition: top 0.3s ease-out, background .9s .5s ease-out; 
   -moz-transition: top 0.3s ease-out, background .9s .5s ease-out; 
     -o-transition: top 0.3s ease-out, background .9s .5s ease-out; 
        transition: top 0.3s ease-out, background .9s .5s ease-out; 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-13T18:04:49.783

这是你想要的？[http://compass-style.org/reference/compass/css3/transition/#mixin-transition](http://compass-style.org/reference/compass/css3/transition/#mixin-transition)

`@include transition( top 0.3s ease-out, background .9s .5s ease-out );`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-05-12T17:28:09.590

从文档：
[http ://compass-style.org/reference/compass/css3/transition/#mixin-transition](http://compass-style.org/reference/compass/css3/transition/#mixin-transition)

它可能多年来发生了变化，但现在是这样的：

```
single-transition($property, $duration, $function, $delay) 
```

请注意 $delay 是最后一个，而不是在最后一个之前的正确答案中。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2015-01-09T15:16:51.223

如果你使用 mixin 来定义你的转换并且你得到这个错误：

> 错误：mixin 转换只需要 1 个参数；给定 2

尝试将您的值括在括号之间，例如：

```
@include transition( (bottom .5s, background 2s) ); 
```

# javascript - 在全屏模式下保持 html 内容在相同的位置和大小比例

> ID：11475048
> 
> 赞同：0
> 
> 时间：2012-07-13T17:02:41.003
> 
> 标签：javascript, jquery, html, css

我一直在研究这个问题很长时间，但我并不幸运。这是情况。假设您在页面中心有一个蓝色矩形。当你全屏时，我们可以使用百分比的高度和宽度来保持矩形的比例。但是，矩形的位置发生了变化，它向上移动，最终在页面底部有额外的空间。

那么当启用全屏模式时，我应该怎么做才能使矩形保持在页面的中心（垂直和水平距离相等）？换句话说，如果你的屏幕是 1280x800，矩形的中心在 (640,400)

如果您查看 Chrome 浏览器的主页，当您全屏时，应用程序的位置保持不变，并且您最终不会在底部留出多余的空间。感谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T17:09:41.573

定义`width`矩形并使用`margin: 0 auto;`它在页面中水平居中。

如果你想`div`水平和垂直居中，使用这样的东西

**HTML**

```
<div id="rectangle"></div> 
```

**CSS**

```
#rectangle {
   width: 30%; //can set any value here
   height: 20%; //can set any value here
   position: absolute;
   left: 50%;
   top: 50%; 
   margin-left: -15%; //negative half of width
   margin-top: -10%; //negative half of height
   background-color: red;
}​ 
```

[看这里](http://jsfiddle.net/PbeSK/)的小提琴。

***或者***

**HTML**

```
<div id="wrapper">
  <div id="container">
    <div id="rectangle"></div>
  </div>
</div>​ 
```

**CSS**

```
body, html {
    height: 100%;
    overflow:hidden;
}
#wrapper {
    width: 100%; 
    height: 100%; 
    overflow: visible; 
    position: relative;
}
#wrapper[id] {
    display: table; 
    position: static;
}
#container[id] {
    display: table-cell; 
    vertical-align: middle; 
    width: 100%;
}
#rectangle {
    width: 200px; 
    height: 100px; 
    margin-left: auto; 
    margin-right: auto; 
    background-color: blue;
} 
```

[​看这里](http://jsfiddle.net/PbeSK/2/)的小提琴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T05:33:50.163

哎呀，

我忘记了我正在使用 iMac。脚本中的 if 添加解决了我的问题。

```
function vertical_center()
{
    var ww = $(window).width();
    if (ww < 1600)
    {
    $("#character").css({'width': ww + 'px','height': (ww/4) + 'px', 'margin-top': -(ww/8) + 'px'});
    }
    else
    $("#character").css({'width': ww + 'px'})
} 
```

但是，如果有人查看我的代码并告诉我一些愚蠢的事情还存在哪里，我会很高兴。希望这篇文章能增加一些东西，谢谢大家

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T17:08:06.247

您是否也尝试过使用百分比作为边距，例如，如果您的中心正方形是 60% 高和宽，您可以添加 20% 作为边距，这样也可以扩大。没有尝试，我不知道它是否会给你想要的效果，但它应该解决正方形向上移动的问题。

# wpf - 使用 ViewModel 中的 ItemsSource 在 ItemsControl 中分组

> ID：11475049
> 
> 赞同：1
> 
> 时间：2012-07-13T17:02:42.090
> 
> 标签：wpf, grouping, itemscontrol, itemssource

我是这样定义`ItemsControl`的：

```
<ItemsControl Grid.Row="2" Style="{StaticResource SellingDashboardToDosList}"
              BorderThickness="1" Background="#C7E8F8" HorizontalAlignment="Stretch" 
              ItemsSource="{Binding Path=ToDoList}">
    <ItemsControl.GroupStyle>
        <GroupStyle>
            <GroupStyle.ContainerStyle>
                <Style TargetType="GroupItem">
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="GroupItem">
                                <GroupBox Header="{Binding Path=Model.TodoType}" >
                                    <ItemsPresenter />
                                </GroupBox>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </GroupStyle.ContainerStyle>
        </GroupStyle>
    </ItemsControl.GroupStyle>
</ItemsControl> 
```

`ItemsSource`是`SynchronisedObservableCollection<T>`中的一个`ViewModel`。但是这个 XAML 不会产生任何分组。我假设我应该以某种方式指定`ItemsSource`可分组的。但是我应该在哪里指定呢？

如果我将 an`XmlDataProvider`与一些静态数据一起使用，那么我可以`CollectionViewSource`在以下示例中的元素中执行此操作：http: [//cromwellhaus.com/2010/03/grouping-is-crazy-easy-in-wpf/](http://cromwellhaus.com/2010/03/grouping-is-crazy-easy-in-wpf/)（已[存档](https://web.archive.org/web/20160602204708/http://cromwellhaus.com/2010/03/grouping-is-crazy-easy-in-wpf/)） .

我试过这样做：

```
<CollectionViewSource x:Key="CollectionViewSource1" Source="{Binding Path=ToDoList}">
    <CollectionViewSource.GroupDescriptions>
        <PropertyGroupDescription PropertyName="TodoType"/>
    </CollectionViewSource.GroupDescriptions>
</CollectionViewSource> 
```

但后来我得到一个运行时绑定错误：

> BindingExpression 产生的值对目标属性无效。Value='System.Windows.Data.ListCollectionView' BindingExpression:Path=ToDoList; DataItem='ToDosViewModel' (HashCode=40956219); 目标元素是“CollectionViewSource”（HashCode=51380674）；目标属性是“源”（类型“对象”）；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:32:01.780

> 但随后我收到一个运行时绑定错误，即 ItemsSource 的类型无效。

你引用正确了吗？您需要将其指定为`Binding.Source`：

```
ItemsSource="{Binding Source={StaticResource CollectionViewSource1}}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:28:21.340

我在 C# 中使用 ListCollectionView 而不是 XAML 中的 CollectionViewSource。

# java - 格式化文本

> ID：11475053
> 
> 赞同：0
> 
> 时间：2012-07-13T17:02:57.437
> 
> 标签：java

我需要在 JOptionPane.showMessageDialog 中格式化一些文本。我需要文本采用表格格式示例：

```
Operation           Result
  2 + 2               4 
```

我试过用`string.format()`，但结果很丑。任何的意见都将会有帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:08:18.940

`String.format`如果您使用的是固定宽度字体（如控制台输出），但消息对话框默认为可变宽度字体，则效果会很好。

幸运的是，Swing 中的所有标签都支持 HTML 格式。你所要做的就是用 HTML 标签包裹你的字符串，比如`<html> some text</html>`. 然后你可以使用一个实际的 HTML 表格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T17:20:10.997

似乎您有一些要显示的数据。使用 JDialog 而不是 JOptionpane 更好地放置数据数量。您的问题的答案可以在以下链接中找到

[http://forums.techguy.org/software-development/1051819-solved-help-java-tabular-format.html](http://forums.techguy.org/software-development/1051819-solved-help-java-tabular-format.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T17:05:46.973

您可以在 html 代码中传递包含数据的字符串，您可以尝试使用 HTML 表格执行此格式。

# python - java程序员学习python：字符串拆分和连接

> ID：11475054
> 
> 赞同：4
> 
> 时间：2012-07-13T17:02:58.783
> 
> 标签：python, api

有人可以向我解释为什么在 python 中当我们想加入我们编写的字符串时：

```
'delim'.join(list) 
```

当我们想分割一个字符串时，我们写：

```
str.split('delim') 
```

来自java，其中之一似乎是倒退的，因为在java中我们写：

```
//split:
str.split('delim');
//join
list.join('delim'); 
```

**编辑：**
你是对的。join 需要一个列表。（虽然它不会改变问题）

有人可以向我解释这个 API 背后的基本原理吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T17:05:54.000

只有在加入某种可迭代对象时加入才有意义。但是，由于可迭代对象不一定包含所有字符串，因此将`join`作为方法放在可迭代对象上是没有意义的。（你期望结果`[1,"baz",my_custom_object,my_list].join("foo")`是什么？）唯一的另一个地方是作为一个字符串方法，并理解迭代中的所有内容都将是一个字符串。此外，将`join`其作为字符串方法允许它与任何可迭代的对象一起使用——元组、列表、生成器、支持迭代甚至字符串的自定义对象。

另请注意，您可以完全自由地以与加入字符串相同的方式拆分字符串：

```
list_of_strings='this, is , a, string, separated, by , commas.'.split(',') 
```

当然，这里的实用程序并不那么容易看到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T17:09:39.113

[http://docs.python.org/faq/design.html#why-is-join-a-string-method-instead-of-a-list-or-tuple-method](http://docs.python.org/faq/design.html#why-is-join-a-string-method-instead-of-a-list-or-tuple-method)

从来源：

> join() 是一个字符串方法，因为在使用它时，您告诉分隔符字符串遍历字符串序列并将其自身插入到相邻元素之间。此方法可以与任何遵守序列对象规则的参数一起使用，包括您可能定义的任何新类。
> 
> 因为这是一个字符串方法，它可以用于 Unicode 字符串以及纯 ASCII 字符串。如果 join() 是序列类型的方法，那么序列类型必须根据分隔符的类型决定返回哪种类型的字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T17:07:17.123

这样您就不必为您创建的每个序列类型重新实现连接操作。Python 使用**协议**而不是类型作为它的主要行为模式，因此即使不是从现有的序列类派生，每个序列也可以预期行为相同。

# microcontroller - 生成 1 秒失败 (BASCOM AVR)

> ID：11475055
> 
> 赞同：0
> 
> 时间：2012-07-13T17:03:00.417
> 
> 标签：microcontroller, bascom

我有一个微控制器培训套件，其中包括 ATMEGA8535 和 8MHZ xtal。我想制作一个简单的程序，每 1 秒关闭/打开一次 LED。但它不起作用，当我运行训练器时，延迟似乎是 7 秒。

这里是带有 BASCOM AVR 的程序。

```
$regfile = "8535def.dat"
$crystal = 8000000

Config Porta = Output                                       

Config Timer1 = Timer , Prescale = 256    
Enable Timer1                             
On Timer1 Isr_von_timer1          
Enable Interrupts
Timer1 = 34285                          

Do
Loop
End

Isr_von_timer1:                          
Timer1 = 34285                                            
Toggle Porta.0                                              

Return 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-29T15:44:38.397

timer1 的正确值是 31249（除数 - 1），使用 8 MHz 振荡器（预分频比 = 256）打开输出一秒并使用切换命令关闭一秒

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T17:38:33.150

我已经解决了这个问题：我忘记激活外部 xtal :)。

# symfony - Symfony：如何注释作为对象的实体属性，以使 Doctrine 存储外键？

> ID：11475058
> 
> 赞同：1
> 
> 时间：2012-07-13T17:03:05.607
> 
> 标签：symfony, annotations, doctrine-orm

我仍在掌握 Symfony 和 Doctine，我很欣赏这听起来可能过于简单。

我目前有两个基本实体：（`WebSite`具有`id`和`canonicalUrl`属性）并且`Job`作为一个属性具有`WebSite`.

A`Job`有一个`WebSite`；a`WebSite`可以被许多`Job`s 引用。两者都在同一个命名空间下。

这里相关的是`Job`实体：

```
/**
 * 
 * @ORM\Entity
 */
class Job
{
    /**
     * 
     * @var integer
     * 
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     *
     * @var WebSite
     */
    protected $website;
} 
```

用数据库术语来说，持久化`Job`应该存储`id`相关的`WebSite`.

如果不对上述内容进行任何更改，调用会为使用单个字段`php app/console doctrine:migrations:diff`命名的表生成新的迁移。`Job``id`

我如何注释`Job::website`这样 Doctrine 知道创建一个整数字段并将值作为对象`id`的值`Website`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T17:36:57.883

您必须明确定义关系。最短的是

```
/**
 * @ORM\Entity
 */
class Job
{
    /**
     * @var WebSite
     *
     * @ORM\ManyToOne(targetEntity="Website")
     */
    protected $website;
} 
```

但是，如果您发现自己想要调整关系以更好地满足您的需求，请查看[注释参考](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/annotations-reference.html)（[`ManyToOne`](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/annotations-reference.html#annref-manytoone)以及[`JoinColumn`](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/annotations-reference.html#annref-joincolumn)针对这种特殊情况）。还有一篇非常全面的关于[关联映射](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/association-mapping.html)的文章，您可能会觉得很有趣。

# php - 如何将递归 php 面包屑更改为链接？

> ID：11475061
> 
> 赞同：-1
> 
> 时间：2012-07-13T17:03:17.390
> 
> 标签：php, hyperlink, explode, breadcrumbs

我正在使用一个带有名为 display.php 的页面的购物车。当您浏览导航时，此页面会重复调用，始终调用自身，但会查询新的、更具体的内容。我正在尝试制作将提供指向前几页的链接的面包屑，但事实证明这很棘手。

display.php 的这一部分检索查询用来查找内容的“id”和前一个面包屑字符串的面包屑。“id”总是添加到面包屑字符串中。

```
$id = $_GET['id'];
$breadcrumbs=$_GET['breadcrumbs'];
$breadcrumbs = $breadcrumbs." > ".$id;
echo $breadcrumbs 
```

由于 id 变量用于查询事物，因此会生成链接以重新访问 display.php，但要查询新事物并带上面包屑字符串。 `<a href="http://www.myurl.com/display.php?id='.$name.'&depth='.$sub_level.'&breadcrumbs='.$breadcrumbs.'"><img src="imagen/logo1.jpg" alt="" width="100" height="100" /><br>'. $name . '</a>`

每次我进入一个新页面时，面包屑都会清晰地显示出来，但是我怎样才能安全地将这些字符串语句更改为链接呢？不能安全地在其中携带另一根绳子。我认为如果我用 > 字符作为分隔符来分解面包屑字符串是可能的。我该如何解决这个问题，以便它在面包屑字符串中显示漂亮的链接？

```
 $breadlist = explode(" > ", $breadcrumbs);

    $linkarray = array();
    foreach $breadlist as $breadlink
    {
        $linkarray($j) = "<a href=display.php?id=".$breadlink($j)."?breadcrumbs=".$breadcrumbs.">".$breadlist($j)."";
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:09:41.293

两个明显的问题（在其他一些小修复中）：

1.  你需要[`urlencode()`](http://php.net/urlencode)你的网址。
2.  您需要使用 而`[]`不是访问数组`()`。

这是一个帮助您入门的示例：

```
$breadlist = explode(" > ", $breadcrumbs);

$linkarray = array();
foreach( $breadlist as $breadlink)
{
    $url = 'display.php?id=' . $breadlink . '&breadcrumbs='.$breadcrumbs;
    $linkarray[] = '<a href="' . urlencode( $url) . '">' . $breadlink . '</a>';
} 
```

# c - 如何在 Windbg 中打印 C 结构的数据

> ID：11475063
> 
> 赞同：3
> 
> 时间：2012-07-13T17:03:28.227
> 
> 标签：c, windows, debugging, windbg

在 Windows 调试器中，我试图打印出传递给 ac 函数的数据。我对传递给 System_Data_SQLite!sqlite3_step+0x63 的数据感兴趣。

```
0:071> kv 20
Child-SP          RetAddr           : Args to Child                                                           : Call Site
00000000`11b82e28 00000642`ff864776 : 00000000`12f6f450 00000000`0092dcd8 00000000`11b83488 00000000`11b83480 : ntdll!NtGetContextThread+0xa
00000000`11b82e30 00000000`12f6f450 : 00000000`0092dcd8 00000000`11b83488 00000000`11b83480 00000000`11b83470 : <Unloaded_mscordacwks.dll>+0x154776
00000000`11b82e38 00000000`0092dcd8 : 00000000`11b83488 00000000`11b83480 00000000`11b83470 00000000`77ee2ae9 : 0x12f6f450
00000000`11b82e40 00000000`11b83488 : 00000000`11b83480 00000000`11b83470 00000000`77ee2ae9 00000000`12c1a970 : 0x92dcd8
00000000`11b82e48 00000000`11b83480 : 00000000`11b83470 00000000`77ee2ae9 00000000`12c1a970 00000000`ffffffff : 0x11b83488
00000000`11b82e50 00000000`11b83470 : 00000000`77ee2ae9 00000000`12c1a970 00000000`ffffffff 00000000`00920be8 : 0x11b83480
00000000`11b82e58 00000000`77ee2ae9 : 00000000`12c1a970 00000000`ffffffff 00000000`00920be8 00000000`00000000 : 0x11b83470
00000000`11b82e60 00000000`77ecff89 : 00000000`00920000 00000000`00920090 00000000`00920090 00000642`ff710000 : ntdll!RtlDeleteCriticalSection+0x11c
00000000`11b82e90 00000000`77d53f8a : 00000000`1279ba00 00000000`13129d30 00000000`00000000 00000000`00000000 : ntdll!RtlDestroyHeap+0x2b1
00000000`11b82f00 00000000`77ef7708 : 00000642`ff89b080 00000000`000000b0 00000000`1279ba0d 00000000`00000000 : kernel32!HeapDestroy+0xa
00000000`11b82f30 00000000`1279ba58 : 00000000`1279ba0f 00000642`ff710000 00000642`001bd000 00000000`00000001 : ntdll!LdrLockLoaderLock+0x15f
00000000`11b82f90 00000000`1279ba0f : 00000642`ff710000 00000642`001bd000 00000000`00000001 00000000`11b83488 : 0x1279ba58
00000000`11b82f98 00000642`ff710000 : 00000642`001bd000 00000000`00000001 00000000`11b83488 00000000`11b83480 : 0x1279ba0f
00000000`11b82fa0 00000642`001bd000 : 00000000`00000001 00000000`11b83488 00000000`11b83480 00000000`11b83470 : <Unloaded_mscordacwks.dll>
00000000`11b82fa8 00000000`00000001 : 00000000`11b83488 00000000`11b83480 00000000`11b83470 00000000`77eee1e5 : 0x642`001bd000
00000000`11b82fb0 00000000`11b83488 : 00000000`11b83480 00000000`11b83470 00000000`77eee1e5 00000000`1279ba10 : 0x1
00000000`11b82fb8 00000000`11b83480 : 00000000`11b83470 00000000`77eee1e5 00000000`1279ba10 00000000`11b83028 : 0x11b83488
00000000`11b82fc0 00000000`11b83470 : 00000000`77eee1e5 00000000`1279ba10 00000000`11b83028 00000000`00000000 : 0x11b83480
00000000`11b82fc8 00000000`77eee1e5 : 00000000`1279ba10 00000000`11b83028 00000000`00000000 00000000`11b83478 : 0x11b83470
00000000`11b82fd0 00000000`77d6d721 : 00000642`ff710000 00000000`03651690 00000000`11b834a0 00000642`ff710000 : ntdll!LdrUnloadDll+0x8ad
00000000`11b83150 000007ff`7252f5f3 : 00000000`03651690 00000000`03651690 00000000`03651690 00000642`ff710000 : kernel32!FreeLibrary+0x6b
00000000`11b83180 000007ff`7252cf60 : 00000000`11b83da0 00000642`82e30018 00000000`00002900 00000000`00000000 : dbghelp!NtWin32LiveSystemProvider::EnumFunctionTables+0x223
00000000`11b83430 000007ff`7252a6c9 : 00000000`123d8660 ffffffff`ffffffff 00000000`00000002 ffffffff`ffffffff : dbghelp!GenGetProcessInfo+0x860
00000000`11b83d30 000007ff`7252a89c : 00000000`00000002 00000001`5fff1fe0 00000000`00000000 00000000`0364f3b0 : dbghelp!MiniDumpProvideDump+0x639
00000000`11b83f30 00000000`0bd73939 : 00000000`11b84050 00000000`00000200 00000000`00000000 00000000`0c040be0 : dbghelp!MiniDumpWriteDump+0x13c
00000000`11b84000 00000000`0bd81e59 : 00000000`00000002 00000000`11b854f0 00000000`11b8b52c 00000000`0bdd0110 : System_Data_SQLite!CreateMinidumpHook+0x119 [c:\dev\sqlite\sqlite.interop\src\win\interop.c @ 117]
00000000`11b84490 00000000`0bd75483 : 00000000`00000002 00000000`0be029f0 00000000`000048b1 00000000`00000000 : System_Data_SQLite!_VCrtDbgReportW+0x7a9 [f:\dd\vctools\crt_bld\self_64_amd64\crt\src\dbgrptt.c @ 589]
00000000`11b8c590 00000000`0bd7541d : 00000642`00000002 00000000`0be029f0 00000000`000048b1 00000000`00000000 : System_Data_SQLite!_CrtDbgReportWV+0x43 [f:\dd\vctools\crt_bld\self_64_amd64\crt\src\dbgrpt.c @ 242]
00000000`11b8c5d0 00000000`0bc85b12 : 00000000`00000002 00000000`0be029f0 00000000`000048b1 00000000`00000000 : System_Data_SQLite!_CrtDbgReportW+0x4d [f:\dd\vctools\crt_bld\self_64_amd64\crt\src\dbgrpt.c @ 258]
00000000`11b8c620 00000000`0bc8515c : 00000000`2cc67ca0 00000642`7f4ce081 00000000`00000000 00000000`00000000 : System_Data_SQLite!winMutexEnter+0xa2 [c:\dev\sqlite\sqlite.interop\src\core\sqlite3.c @ 18609]
00000000`11b8c670 00000000`0bcb3203 : 00000000`2cc67ca0 00000642`7f4ce0e4 00000000`00000000 00000000`00000000 : System_Data_SQLite!sqlite3_mutex_enter+0x1c [c:\dev\sqlite\sqlite.interop\src\core\sqlite3.c @ 17474]
00000000`11b8c6a0 00000642`7f6005f7 : 00000001`c14e4100 00000000`a4cc7610 00000001`c61d3750 00000642`782ea561 : System_Data_SQLite!sqlite3_step+0x63 [c:\dev\sqlite\sqlite.interop\src\core\sqlite3.c @ 64122] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T17:10:23.187

您可以输入：

```
kP 
```

这将为每个格式化的调用转储参数

或者

```
dt System_Data_SQLite!<type> // replace <type> with whatever you are interested in 
```

有关更多信息，请参见：http: [//blogs.msdn.com/b/doronh/archive/2006/03/22/558329.aspx](http://blogs.msdn.com/b/doronh/archive/2006/03/22/558329.aspx)和此处：[http://windbg.info/doc/1-common-cmds。 html#17_variables](http://windbg.info/doc/1-common-cmds.html#17_variables)

# javascript - 使用 Twitter Bootstrap 切换单选按钮，获取表单输入的简洁方式是什么？

> ID：11475069
> 
> 赞同：1
> 
> 时间：2012-07-13T17:03:50.770
> 
> 标签：javascript, forms, twitter-bootstrap, radio-button

我正在使用 Twitter Bootstrap 的[Javascript 单选切换按钮](http://twitter.github.com/bootstrap/javascript.html#buttons)，并希望根据切换的状态获取表单输入。

我能找到的最简单的方法是在按钮中添加一个不可见的标签——这是有人抛出[的有用的 jsFiddle示例。](http://jsfiddle.net/veloper/XYEjs/)

它工作得很好，但它仍然是一个kludge。我的问题是：从这些按钮获取表单输入的干净方式是什么，即没有额外的隐藏单选输入？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T17:09:50.810

怎么样

```
$(this).children('input[name="is_private"]').val() 
```

[**演示**](http://jsfiddle.net/XYEjs/31/)

我想我第一次误读了您的问题...您可以创建一个隐藏的表单元素（除非您执行 AJAX，否则您需要在提交表单时访问该值）并使用 JS 设置其值。

**HTML**

```
<input type="hidden" name="status" id="status" value="" /> 
```

**JS**

```
$('div.btn-group button').click(function(){

    $("#status").attr('value', $(this).attr('id'));

})​ 
```

[**演示**](http://jsfiddle.net/XYEjs/32/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T17:35:19.150

实际上，您可以使用如下函数避免 html 输入元素和 css `index()`：

```
$('div.btn-group .btn').click(function(){
    if ($(this).index() != $('div.btn-group .btn.active').index()){
        alert($(this).index());
    }
})​; 
```

我还添加了一个条件，如果已选择活动按钮，则不会收到警报。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T17:30:38.837

# python - Python C 接口 PyArg_ParseTuple 失败

> ID：11475070
> 
> 赞同：0
> 
> 时间：2012-07-13T17:04:09.850
> 
> 标签：python, c

我有一个用 C 语言编写的 Python 模块，其中暴露了许多函数。其中之一具有以下 Python 定义：

```
def SetPowerSupply(voltage, current, supply): 
```

其中电压 = 浮动，电流 = 浮动，电源 = int。在 C 方面，我有这个：

```
float voltage, current;
int supply;

if (!PyArg_ParseTuple(args, "ffi", &voltage, &current, &supply))
{
    // Failed to parse
    // ...
} 
```

我的一位脚本编写者有一个脚本，其中该函数无法解析参数，抱怨需要一个整数。据我所知，实际上是传入了一个整数，因为如果在错误分支中我这样做：

```
PyObject *num = PyNumber_Float(PyTuple_GetItem(args, 0));
voltage = PyFloat_AsDouble(num);
Py_XDECREF(num);

num = PyNumber_Float(PyTuple_GetItem(args, 1));
current = PyFloat_AsDouble(num);
Py_XDECREF(num);

num = PyNumber_Int(PyTuple_GetItem(args, 2));
supply = PyLong_AsLong(num);
Py_XDECREF(num); 
```

...然后一切都按预期工作。通过这个模块运行的其他脚本没有表现出这种行为，我看不出有什么区别。他们都调用相同的函数：

```
SetPowerSupply(37.5, 0.5, 1)
SetPowerSupply(0, 0, 1) 
```

在有问题的脚本中，我可以执行以下操作：

有任何想法吗？？？

谢谢你。

* * *

编辑：

该问题是由另一个函数引起的，该函数在此函数之前被多次调用。它是：

```
if(!PyArg_ParseTuple(args, "s|siss", &board, &component, &pin, &colorStr, &msg))
{
    // Parsing the pin as an int failed, try as a string
    if(!PyArg_ParseTuple(args, "s|ssss", &board, &component, &sPin, &colorStr, &msg))
    {
        // ... 
```

这样做的目的基本上是重载第三个参数以接受字符串或数值。当有人给它输入一个字符串时，解析失败导致的 Python 错误永远不会被清除。解决问题的更新代码如下。

```
if(!PyArg_ParseTuple(args, "s|siss", &board, &component, &pin, &colorStr, &msg))
{
    PyErr_Clear();

    // Parsing the pin as an int failed, try as a string
    if(!PyArg_ParseTuple(args, "s|ssss", &board, &component, &sPin, &colorStr, &msg))
    {
        // ... 
```

非常感谢 Ignacio 提供的线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:12:37.540

One of your other functions is failing to return `None` when appropriate, and you're catching this error message by accident.

# asp.net - 来自用户单击的 Telerik RadGrid 行索引

> ID：11475073
> 
> 赞同：1
> 
> 时间：2012-07-13T17:04:25.367
> 
> 标签：asp.net, telerik

这是我正在使用的代码，但项目索引现在是它跳转的正确行索引，所以我认为我的代码错误。欢迎任何帮助！谢谢

```
protected void FailureRadGrid_ItemCommand(object sender, GridCommandEventArgs e)
{
    if (e.CommandName == "RowClick" && e.Item is GridDataItem)
    {
        FailureSourcePanel.Visible = true;
        EmployeeInputPanel.Visible = true;
        GridDataItem item = (GridDataItem)FailureRadGrid.MasterTableView.Items[e.Item.];
        FailureDescriptTextBox.Text = item["FullDescrip"].Text;
        FailureCouponID.Text = item["CouponID"].Text;
        FailureProductTextBox.Text = item["Product"].Text;
        FailureUnitLabel.Text = item["Unit"].Text;
        FailureValueTextBox.Text = item["Value"].Text;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:09:14.730

你可以做类似的事情

```
var editedItem = (GridEditableItem)e.Item;
FailureDescriptTextBox.Text =  editedItem["FullDescrip"].Text; 
```

# graph - D3.js 强制布局：如何隔离节点组？

> ID：11475075
> 
> 赞同：4
> 
> 时间：2012-07-13T17:04:38.257
> 
> 标签：graph, d3.js, simulation, data-visualization, force-layout

**我想要达到什么目的？**

我想在树状结构中拥有一组节点，其中每个根要么是主根，要么是另一棵树的叶子的后代。

生成您在下面看到的内容很容易，但我真正想看到的是围绕每个根的完整圆圈。但是，由于节点相互排斥，因此每个集群之间存在以下间隙。*我认为解决方案包括忽略来自不同根的叶子之间的电荷引起的排斥*。

![在此处输入图像描述](../Images/508bfaf2867ddc78d5122aec3c066859.png)

**我的想法**

*   在每个根周围设置某种半径，以排斥超出该半径的所有方向上的其他节点，允许叶子在其中是圆形的
*   使用 linkDistances 和 linkStrengths 以某种方式排列集群，使其不会显着交互

**这可能吗？**

除了我模糊的想法，我真的不知道该怎么做！

通过阅读 D3 文档，我发现与动态链接距离和链接强度方法不同，节点电荷操作似乎是通用的：

```
"All nodes are assumed to be infinitesimal points with equal charge and mass." 
```

如果这句话是真的，你们中的一个人可以指导我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T15:16:38.787

我不确定您将如何处理它，但我发现了一个示例，其中集群仅在自身内部充电，节点不与不同的节点交互：http: [//bl.ocks.org/mbostock/1804889](http://bl.ocks.org/mbostock/1804889)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-29T06:36:03.337

我认为答案的开始可能是在这个 stackoverflow 问题中，[Space out nodes evenly around root node in D3 force layout](https://stackoverflow.com/questions/29639270/space-out-nodes-evenly-around-root-node-in-d3-force-layout)

知道*有*可能使每个节点的费用取决于相同的某些属性。尝试使用类似的东西

```
 .charge(function(d) { console.log(d); //you'll see this brings up the nodes
   if (d.something == onething) { 
      return    -1300;} 
   else { 
      return -100; } 
    }) 
```

正如链接到的答案所提到的，您几乎肯定必须尝试“摩擦”和“链接距离”。不要害怕反复试验——我至少已经断断续续地处理这种问题几个月了，还没有找到“通用”的解决方案。

# iphone - 在 iPhone 上 - 当应用程序在后台时，如何将 GPS 坐标发布到服务器？

> ID：11475077
> 
> 赞同：1
> 
> 时间：2012-07-13T17:04:49.350
> 
> 标签：iphone, objective-c, background, multitasking

我有兴趣通过 http 调用将 GPS 坐标发送到服务器......”到目前为止，答案是您可以在后台接收 gps 坐标，但我似乎从未得到实际问题的答案：

问题：如果执行此 HTTP POST 的应用程序在后台运行，iPhone 是否允许使用 HTTP POST 将 GPS 坐标发送到外部服务器？如果是这样，有人可以解释一下，我们必须做什么。我们知道我们可以获取坐标，但现在我们想将该数据发布到服务器，而不必一直请求用户许可。

# robotframework - 如何将字典元素的值设置为 Robot Framework 中关键字的结果？

> ID：11475080
> 
> 赞同：9
> 
> 时间：2012-07-13T17:05:06.867
> 
> 标签：robotframework

我知道我可以从具有这种格式 ${dict['KEY']} 的字典对象中访问单个元素。像这样：

```
|   | Log | ${dict['KEY']} | 
```

我可以像这样设置一个常规的旧标量：

```
|   | ${scalar}= | RFKeyword | "Yowp" 
```

但是如果我尝试设置这样的字典元素

```
|   | ${dict['KEY']}= | RFKeyword | "Yowp" 
```

我在变量中得到“RFKeyword”，“Yowp”，而不是像我这样处理“Yowp”时RFKeyword产生的结果

```
|   | ${scalar}= | RFKeyword | "Yowp" 
```

请协助

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-07T12:36:39.513

正如您可能已经知道的那样，您不能将关键字分配给字典。您需要非常具体地遵循字典语法。您只能将变量返回到列表或标量。

机器人框架不是一种完全成熟的编程语言，也不应该是。通过使用中间标量，非技术测试人员应该能够更好地理解它在做什么。

我添加了这个，因为谷歌搜索“机器人框架字典”在列表中排名很高。只需创建字典：

```
Create dictionary | ${my_dict} | a | b 
```

添加到字典：

```
set to dictionary | ${my_dict} | c | d 
```

并从字典中检索：

```
${my_dict["a"]} 
```

或者，如果您不需要失败：

```
${my_dict.get('non-key','default value')} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T13:54:23.220

你只需要重新排列你调用它的方式。因此，对于您希望返回的数据进入字典的关键字，您需要执行以下操作：

```
${scalar}= | RFKeyword | "Yowp"
Set To Dictionary  | ${dict}  |  KEY    | ${scalar} 
```

# javascript - 是否有专门的应用程序可以运行以 JS (+HTML/CSS) 编写的程序，并且可以自由地重新分发？

> ID：11475081
> 
> 赞同：0
> 
> 时间：2012-07-13T17:05:10.353
> 
> 标签：javascript, html, frameworks, open-source

我想知道是否有专门的应用程序用于运行用 JS (+HTML/CSS) 编写的程序，可以使用任何此类程序自由重新分发。

我的项目可能会变得更大，它不能简单地依赖于互联网浏览器（另外，我不确定在支持互联网的浏览器中运行不连接到互联网的 JS 应用程序的安全性） .

我读过必须使用 AJAX 在 Web 浏览器中通过 JS 管理文件，但是是否有任何框架允许运行具有所有文件管理权限的 JS 代码？

基本上，我正在寻找网络浏览器用来显示网页的框架——浏览器的本质。有哪些更好的替代方案可以满足我的要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:54:50.803

你在寻找类似 node.js 的东西吗？[节点](http://nodejs.org/)

# php - 显示外部数据库文章类别的模块

> ID：11475085
> 
> 赞同：0
> 
> 时间：2012-07-13T17:05:27.073
> 
> 标签：php, joomla, path, phpmyadmin, joomla2.5

我正在尝试创建一个新模块（joomla），它将显示来自同一服务器上外部数据库的同一类别的文章。我正在尝试修改使用内部表来解决问题的本机 joomla 模块。（内部表：_asso，外部表：_rsc）

我更改了该代码（本机模块）

```
 $com_path = JPATH_SITE.'/components/com_content/'; 
```

接着就，随即

```
$com_path = '/homez.420/kmxsiksf/rsc/components/com_content/helpers/route.php'; 
```

但我收到了这个错误：

**致命错误：** require_once() [function.require]：无法打开所需的 '/homez.420/AAAAAA/rsc/components/com_cont ent/helpers/route.phprouter.php' (include_path='.:/usr/local/lib /php') 在第 14 行的 /homez.420/AAAAAA/asso/modules/mod_articles_category/helper.php

我是不是弄错了，或者.Htaccess 或Joomla 中的某个地方是否存在安全性，它会禁用模块来显示来自外部表的类别或模块？

谢谢！

Ps：原生模块代码是这样开始的：

```
defined('_JEXEC') or die;

$com_path = JPATH_SITE.'/components/com_content/';
require_once $com_path.'router.php';
require_once $com_path.'helpers/route.php';

JModelLegacy::addIncludePath($com_path . '/models', 'ContentModel'); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:13:12.053

To answer the asked question, there is no Joomla security to prevent display of anything that you mention. I can't speak to your .htaccess settings, but that's highly doubtful.

# iphone - 没有目标 C 的 iPhone 应用程序开发

> ID：11475086
> 
> 赞同：1
> 
> 时间：2012-07-13T17:05:33.587
> 
> 标签：iphone, cordova

我已经学习目标 C 大约 3 周了，并且我获得了基本概念，但现在我正在尝试获得经验，因为我没有 Mac，我在虚拟化方面非常努力并且遇到了很大的问题（我只用雪豹 10.5 成功了xcode 3.2 的旧版本）没关系，我开始怀疑 iPhone 开发的其他解决方案，如 phonegap、mobieOne 是否真的那么糟糕？我知道原生开发是最好的，但是如果你构建使用一些菜单并显示数据库数据的应用程序，会有明显的区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T17:07:56.040

考虑尝试 RubyMotion。如果你当然知道 Ruby。[http://www.rubymotion.com/](http://www.rubymotion.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T17:57:23.610

这是 eBay 上 300 美元的 macbook。我确定它不是世界上最伟大的计算机，但您绝对应该将 Objective c 用于 iphone 应用程序。

[http://www.ebay.ca/itm/Apple-Macbook-C2D-2-16-1-0-80-SnowLeopard-13-/160841255326?pt=Apple_Laptops&hash=item2572e2c99e#ht_1763wt_1163](http://www.ebay.ca/itm/Apple-Macbook-C2D-2-16-1-0-80-SnowLeopard-13-/160841255326?pt=Apple_Laptops&hash=item2572e2c99e#ht_1763wt_1163)

任何时候你在学习语言上失败了（我同意这是一个漫长而令人沮丧的过程），你将通过使用苹果的所有文档和丰富的在线教程来获得回报。那里的所有资源都假设您使用的是 Objective C。

我知道这是一个缓慢的过程，但要投资于你的未来并以正确的方式去做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T17:53:16.023

检查这两个：

[煎茶触摸](http://www.sencha.com/products/touch/)

[单声道触控](http://xamarin.com/monotouch/)

如果你真的想做严肃的 iOS（也可能是 Mac OS X）开发，你肯定想要一台 mac。您可以在您的 PC 上使用 hackintosh，或者下载修改后的 Mac os x 的 iso 映像并在虚拟机（例如：VMWare）上运行它。但是，您所能找到的一切可能仍然有限。上次上网时，我只找到了雪豹的图像文件，但很快苹果就要发布山狮了（这意味着被黑的 Mac OS 可能落后两代）。

您可以使用 xcode 以外的第三方工具来开发 iOS 应用程序。通过使用 C#、java、JavaScript、HTML5 等不同的语言，它们有很多，但是当它们被编译并翻译成原生 iOS 应用程序时，你仍然需要在 Mac 上运行 xcode。

再说两件事。首先，我认为你最好有一个 mac，如果你没有，你需要找到一种方法来绕过它，你可能无法捕捉到最新的技术（而且在 iOS 中经常发生变化！） . 其次，如果您更喜欢通过第三方工具进行开发，这取决于您最熟悉哪种语言。对于 C#，我推荐 MonoTouch，对于 JavaScript，我推荐 SenchaTouch。你可以找到很多其他人。

# jsf - JSF inputtext + 转换器

> ID：11475092
> 
> 赞同：0
> 
> 时间：2012-07-13T17:05:59.210
> 
> 标签：jsf, converter

首先，我展示我的代码：

**XHTML 页面：**

```
<h:body>
    <h:form id="ffffffffff">
        <p:inputText value="#{prueba.dato}" >
            <p:ajax event="keyup" process="@this" />
        </p:inputText>
    </h:form>
</h:body> 
```

**豆：**

```
@ManagedBean
@ViewScoped
public class Prueba implements Serializable {

    private String dato = "ASSSS";

    public String getDato() {
       return dato;
    }

    public void setDato(String dato) {
        this.dato = dato;

        System.out.println("DAAAAAA: " + dato);
    }

    public void listener() {
        System.out.println("LISTENEEEEEEEEEEEEEEEEEEEEEEEEEE");
    }
} 
```

**转换器**

```
@FacesConverter
public class SnaCarreraConverter extends SelectItemsConverter {
    //CODE
} 
```

我的问题，**setDato**总是得到一个**空**值。但是当我将转换器修改为：

@FacesConverter(forClass=SnaCarrera.class)

添加 forClass 解决了我的问题，我不知道为什么会这样。inputText 是否试图在不添加转换器属性的情况下找到转换器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:47:31.910

首先，`SelectItemsConverter`是为了`<f:selectItems>`。`<p:inputText>`不是`<f:selectItems>`. _ 所以 对`SelectItemsConverter`是没用的`<p:inputText>`。另请参阅其文档和展示。

其次，给`Converter`实现一个 ID 或“for-class”以便使用它是正常的。否则你不能在`<x:inputSomething converter>`属性或`<f:converter>`标签中引用它，或者你不能将它与某个类自动关联。此要求与`SelectItemsConverter`. 它只是标准 JSF 规范所要求的。

# search - 在 Vim 中搜索时进行视觉选择

> ID：11475096
> 
> 赞同：2
> 
> 时间：2012-07-13T17:06:13.047
> 
> 标签：search, vim, highlight

什么是对我在 Vim 中搜索的项目进行视觉选择的简单方法？

我想将我的`n`键映射到不仅可以转到下一个搜索项，还可以选择它。同样对于`p`,`*`和`#`。

查找这个给了我*搜索所选项目的*答案，但我想*选择搜索的项目*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T17:43:06.117

你可以尝试类似的东西

```
nnoremap ,n //b<CR>v//e<CR>
vnoremap ,n <Esc>//b<CR>//e<CR>n 
```

. 这不适用于单字符匹配。因为`*`它看起来像这样：

```
nnoremap ,* *v//e<CR> 
```

. 没有一个解决方案适用于一个字符匹配，您可以尝试添加`h`before `//e`，但这在行首不起作用。由于上述问题，我不建议重新映射默认键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:54:24.990

[http://vim.wikia.com/wiki/Copy_or_change_search_hit](http://vim.wikia.com/wiki/Copy_or_change_search_hit)

# c# - Visio 2010 C# 实体自动化

> ID：11475099
> 
> 赞同：1
> 
> 时间：2012-07-13T17:06:25.057
> 
> 标签：c#, database, interop, entity, visio

如果之前有人问过这个问题，我深表歉意，但是在搜索了一段时间后，我找不到任何具体的答案。

我在 Visio 2010 中有一个 ERD 图。它有大约 15 个表左右。为了让我们的 DBA 创建数据库，我必须使用数据类型、主键、描述将每一列输出到 Excel 表。

我的第一次尝试是简单地从形状属性中复制和粘贴列定义表，但这不起作用（感谢 Microsoft！）。在尝试了其他一些事情之后，结果发现我必须为每个表格手动复制每个单元格 - 耗时。

我转向 C# 和 Visio Interop 寻求帮助。我现在可以导出列定义（它们位于形状的 Text 属性中），但我找不到包含表名称的属性。

有谁知道哪个对象拥有这个属性，或者它是否可以访问？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:21:10.843

最后我解决了。我无法解析出标准的 Visio 绘图 (.vsd)，因此我选择了 Visio XML 绘图 (.vdx)。最后，这对我有用：

其中 path 是 vxd 图形的文件路径。我发现 XML 绘图页面中的每个形状定义都有自己的 2 个形状。第一个形状包含实体名称，第二个形状包含实体列。

```
XDocument xdoc = XDocument.Load(path);
var elements = xdoc.Elements().Elements();
XName pageXName = XName.Get("Page","http://schemas.microsoft.com/visio/2003/core");
var pages = elements.Elements(pageXName);

foreach (XElement page in pages)
{                
    XName shapeXName = XName.Get("Shape","http://schemas.microsoft.com/visio/2003/core");
    var shapes = from shape in page.Elements().Elements(shapeXName)
                 where shape.Attribute("Type").Value == "Group"
                 select shape;

    foreach (XElement shape in shapes)
    {
        var shapeShapes = shape.Elements();
        List<XElement> textShapes = shapeShapes.Elements(shapeXName).ToList();

        XName textXName = XName.Get("Text","http://schemas.microsoft.com/visio/2003/core");
        XName cpXName = XName.Get("Text", "http://schemas.microsoft.com/visio/2003/core");

        string tableName = textShapes[0].Elements(textXName).SingleOrDefault().Value;
        string columns = textShapes[1].Elements(textXName).SingleOrDefault().Value;

        Debug.WriteLine("-------------" + tableName.TrimEnd('\n') + "---------------");
        Debug.Write(columns);
        Debug.WriteLine("----------------------------");

    }
} 
```

# authentication - 什么时候 access_type = Online 合适？:OAuth2 - 谷歌 API

> ID：11475101
> 
> 赞同：11
> 
> 时间：2012-07-13T17:06:40.367
> 
> 标签：authentication, oauth, google-api, oauth-2.0

在请求 OAuth 凭据时，我可以将 access_type 指定为 Offline 或 Online。

选择在线访问类型会强制用户在每次登录时批准对我的应用程序的访问。这是为什么？用户不是已经批准了我的应用程序吗？

**更新#1：**

我将approval_prompt 设置为“自动”。
如果我在不删除任何 cookie 的情况下退出 Google，它不会再次提示我。但是删除 cookie 会返回授权屏幕。

**更新#2：**

它通过 OAuth Playground 运行良好。 [http://code.google.com/oauthplayground/](http://code.google.com/oauthplayground/)

将 OAuth 2.0 用于 Web 服务器应用程序 [https://developers.google.com/accounts/docs/OAuth2WebServer](https://developers.google.com/accounts/docs/OAuth2WebServer)

**更新#3：** 相关代码片段

生成 OAuth URL 的辅助方法

```
def build_auth_uri
    return @client.authorization.authorization_uri(
     :access_type => :online,
     :approval_prompt => :auto
    ).to_s 
end 
```

在 View 中调用 Helper 方法

```
<a href="<%= build_auth_uri %>">  Connect Me! </a> 
```

在网页上生成的 OAuth URL

```
https://accounts.google.com/o/oauth2/auth?access_type=online&approval_prompt=auto&redirect_uri=http://localhost:3000/gclient/gcallback&response_type=code 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-13T19:14:40.210

在这些流程中还有另一个参数起作用，我怀疑您遇到了它。是`approval_prompt`参数。

当`access_type=online`您还可以为`approval_prompt`. 如果设置为`approval_prompt=force`，将始终提示您的用户，即使他们已经授予。

另一方面，when `access_type=offline`,`approval_prompt`只能设置为`approval_prompt=force`，但为了弥补这一限制，您还`refresh_token`可以使用它来刷新访问令牌。

检查您`access_type=online`正在打开的 URL。尝试设置`approval_prompt=auto`。授权屏幕应该只在第一次出现。

# .net - How to find out what assemblies an assembly references?

> ID：11475112
> 
> 赞同：2
> 
> 时间：2012-07-13T17:07:03.807
> 
> 标签：.net

I have an assembly (class library DLL) that references Microsoft.ReportViewer.WebForms. I need to find out what version of Microsoft.ReportViewer.WebForms it is referencing. Is there a tool that can do that? Kind of like Dependency Walker for win32 dlls, but I need to get the FULL assembly reference (including the version and public key token).

The thing is my DLL is in production and all the ReportViewer DLLs are 8.0.0.0, but I am getting an error saying it can't load the 10.0.0.0 version. So I just need a tool that will show me the full list of references that my DLL is referencing.

Thanks

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T17:09:49.680

Try with [ILSpy](http://wiki.sharpdevelop.net/ILSpy.ashx), it will show the info you need. Just open the assemblies with it.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T17:09:22.010

Use ILDASM, and you will be able to see details of the assembly manifest file, which will tell you versions of referenced assemblies.

# java - PYTHON - 不会打印到 .java 文档？

> ID：11475114
> 
> 赞同：-2
> 
> 时间：2012-07-13T17:07:14.527
> 
> 标签：java, python, file, printing

我对 python 有疑问。这是我的代码。

[http://pastebin.com/yRu5WGKd](http://pastebin.com/yRu5WGKd)

每当我选择项目或镐时，它打印得很好。下面的任何内容都不会打印..请帮忙！？！

注意：我也使用了 pastebin，因为我发现它最容易阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:13:58.720

Your actual mistake is the 62nd line, `if ItemType == 3 & ItemStr == 1:` - it should start with `elif`, or it breaks your (really *nasty*) if-cascade.

Another potential problem: in all your comparisons, ie `if ItemType == 1 & ItemStr == 1:`, you are using bitwise and (`&`) when you should be using logical and (`and`).

Here is a rewritten version. It is less than half the length, data-driven, and makes it much easier to spot inconsistencies (did you mean 'Diamond' or 'Emerald' in your material types?):

```
class Item(object):
    types = [
        ('Item',    'Item'),
        ('Pickaxe', 'ItemPickaxe'),
        ('Shovel',  'ItemSpade'),
        ('Axe',     'ItemAxe'),
        ('Hoe',     'ItemHoe'),
        ('Sword',   'ItemSword')
    ]
    strengths = [
        ('Diamond', 'EnumToolMaterial.EMERALD'),    # ?? You might want to doublecheck this...
        ('Gold',    'EnumToolMaterial.GOLD'),
        ('Iron',    'EnumToolMaterial.IRON'),
        ('Stone',   'EnumToolMaterial.STONE'),
        ('Wood',    'EnumToolMaterial.WOOD'),
    ]

    javastring = 'public static final {type} {name} = new {type}({id}, {strength}).setItemName("{name}");'

    @classmethod
    def prompt_for_item(cls):
        s = "Please enter your item's name:\n"
        name = raw_input(s).strip()

        types = ["[{}] {}".format(i,n[0]) for i,n in enumerate(cls.types, 1)]
        s = "Please enter item type:\n{}\n".format('\n'.join(types))
        type_ = int(raw_input(s)) - 1

        s = "Please enter item id (unique int):\n"
        id = int(raw_input(s))

        strengths = ["[{}] {}".format(i,n[0]) for i,n in enumerate(cls.strengths, 1)]
        s = "Please enter item strength:\n{}\n".format('\n'.join(strengths))
        strength = int(raw_input(s)) - 1

        return cls(name, type_, id, strength)

    def __init__(self, name, type_, id, strength):
        self.name = name
        self.type = type_
        self.id = id
        self.strength = strength

    def write_to_file(self, fname=None):
        if fname is None:
            fname = '{}.java'.format(self.name)
        with open(fname, 'w') as outf:
            cls = type(self)
            outf.write(
                cls.javastring.format(
                    type = cls.types[self.type][1],
                    name = self.name,
                    id = self.id,
                    strength = cls.strengths[self.strength][1]
                )
            )

def main():
    it = Item.prompt_for_item()
    it.write_to_file()
    print 'File has been written'

if __name__=="__main__":
    main() 
```

# android - ADTr20 没有安装在我的 Eclipse 中

> ID：11475118
> 
> 赞同：0
> 
> 时间：2012-07-13T17:07:31.347
> 
> 标签：android

在我使用 r16 之前，我已将我的 android sdk 更新为 sdkr20，而我的 eclipse 版本是

版本：Indigo Service Release 1 内部版本 ID：20110916-0149

但是当我尝试安装 ADTr20 时它没有安装并说

```
Cannot complete the install because one or more required items could not be found.
  Software being installed: Android Native Development Tools 20.0.0.v201206242043-391819 (com.android.ide.eclipse.ndk.feature.group 20.0.0.v201206242043-391819) 
```

我现在该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:29:46.967

我建议尝试全新安装 Eclipse。但不要获取 Juno（最新版本），因为存在一个错误，导致 XML 编辑器无法与 ADT 一起使用（请参阅[http://code.google.com/p/android/issues/detail?id=34630](http://code.google.com/p/android/issues/detail?id=34630)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:21:56.113

您可以先尝试更新eclipse吗？

![在此处输入图像描述](../Images/74f07935daa59bbc7d18e370c1ba0e36.png)

然后让它像这样做它的事情：

![在此处输入图像描述](../Images/fd60aac0bc4e9e815c5c86cf01136952.png)

然后选择仅用于工具的选项（不要选择其他任何内容）

![在此处输入图像描述](../Images/593a8a4a78fabb6c1e346e0314edc453.png)

安装成功后，尝试一个一个地安装其他更新，比如先选择 DDMS，依此类推

**注意：**有时，删除开发工具然后重新安装也有助于解决此类问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T19:24:48.233

他们说你应该使用 Eclipse Indigo

# java - 如何保留从文件中读取的字符串的正确偏移量

> ID：11475121
> 
> 赞同：1
> 
> 时间：2012-07-13T17:07:46.323
> 
> 标签：java, file-io, intellij-idea

我有一个 text.txt 文件，其中包含以下 txt。

```
 Kontagent Announces Partnership with Global Latino Social Network Quepasa

 Released By Kontagent 
```

我将此文本文件读入字符串 documentText。

`documentText.subString(0,9)`给`Kontagent`，这很好。

但是，在 windows (IntelliJ Idea) 中给出并`documentText.subString(87,96)`在 Unix 环境中给出。我猜这是因为文件中的空白行（之后偏移量被搞砸了）。但是，我不明白，为什么我会得到两个不同的结果。我需要在两种环境中都得到一个结果。`y Kontage``Kontagent`

要将文件作为字符串读取，我使用了此处讨论的所有函数 [如何从文件内容创建 Java 字符串？](https://stackoverflow.com/questions/326390/how-to-create-a-java-string-from-the-contents-of-a-file). 但是，使用任何功能后，我仍然得到相同的结果。

目前我正在使用此函数将文件读入 documentText 字符串：

```
public static String readFileAsString(String fileName)
{

    File file = new File(fileName);
    StringBuilder fileContents = new StringBuilder((int)file.length());
    Scanner scanner = null;
    try {
        scanner = new Scanner(file);
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }
    String lineSeparator = System.getProperty("line.separator");

    try {
        while(scanner.hasNextLine()) {
            fileContents.append(scanner.nextLine() + lineSeparator);
        }
        return fileContents.toString();
    } finally {
        scanner.close();
    }
} 
```

编辑：有没有办法编写一个适用于 Windows 和 UNIX 环境的通用函数。即使文件以*文本模式*复制。因为，不幸的是，我不能保证从事这个项目的每个人都将始终以二进制模式复制文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T17:10:43.007

在 Windows 上，换行符`\n`前面`\r`有回车符或回车符。这在 Linux 中是不存在的。将文件从一个操作系统传输到另一个操作系统不会删除/附加此类字符，但偶尔，文本编辑器会为您自动格式化它们。

因为您的文件不包含`\r`字符（可能是直接从 Linux 传输的），所以`System.getProperty("line.separator")`会返回`\r\n`并说明不存在的`\r`字符。这就是为什么您的输出落后 2 个字符的原因。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T17:11:33.303

Unix 文件可能使用本机 Unix EOL char: `\n`，而 Windows 文件使用本机 Windows EOL 序列：`\r\n`。由于您的文件中有两个 EOL，因此相差 2 个字符。确保使用二进制文件传输，所有字节都将被保留，并且所有内容都将在两个操作系统上以相同的方式运行。

编辑：事实上，*您*`System.getProperty("line.separator")`是在每行末尾附加特定于操作系统的 EOL ( ) 的人。只需使用 Reader 将文件作为 char 数组读取，一切都会好起来的。或者使用 Guava 的方法为你做这件事：

```
String s = CharStreams.toString(new FileReader(fileName)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T18:51:21.810

根据你们提供的输入，我写了这样的东西

```
documentText  = CharStreams.toString(new FileReader("text.txt"));
documentText = this.documentText.replaceAll("\\r",""); 
```

如果文件有 \r，则去除额外的 \r。

现在，我在 windows 环境和 unix 环境中得到了预期的结果。问题解决了！！！

无论复制了什么模式文件，它都可以正常工作。

:) 我希望我可以选择你的两个答案，但 stackoverflow 不允许。

# objective-c - 在 clang 编译期间无法找到 objc.h

> ID：11475124
> 
> 赞同：4
> 
> 时间：2012-07-13T17:07:55.823
> 
> 标签：objective-c, linux, clang, gnustep

我在 Ubuntu 12 上。

我正在尝试使用 clang 编译一个 Objective-C hello_world 应用程序。这是来源：

```
#import <Foundation/Foundation.h>
int main (int argc, const char * argv[])
{
 NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
 NSLog (@"hello world");
 [pool drain];
 return 0;
} 
```

我使用这个命令行：

```
. /usr/share/GNUstep/Makefiles/GNUstep.sh
clang h.m `gnustep-config --objc-flags` -lgnustep-base -o hello 
```

我收到以下错误：

```
clang: warning: argument unused during compilation: '--param ssp-buffer-size=4'
In file included from h.m:1:
In file included from /usr/include/GNUstep/Foundation/Foundation.h:30:
In file included from /usr/include/GNUstep/GNUstepBase/GSVersionMacros.h:193:
In file included from /usr/include/GNUstep/GNUstepBase/GSConfig.h:229:
/usr/include/GNUstep/GNUstepBase/preface.h:112:11: fatal error: 'objc/objc.h'
      file not found
 #include <objc/objc.h>
          ^
1 error generated. 
```

使用 gcc 的相同命令行可以正常工作。

任何想法如何解决这个丢失的 objc.h 错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T17:21:02.437

obj-ch 是 Objective-C 运行时的一部分，你安装了吗？根据我自己的经验，GNUstep 似乎在大多数平台上都是一个受伤害的世界，所以它可能只是 GNUstep 的配置脚本即使已安装也拒绝接收它，如果您无法在此处获得更好的答案，请尝试他们的邮件列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-06T18:57:02.773

该标头是 ObjC-Runtime 的一部分。虽然 GCC 提供了一个 runitme（尽管它只没有像 ARC 这样的现代特性），但 Clang/LLVM 并不支持这样的运行时。如果你想使用 Clang，你需要安装 GNUstep 的 ObjC 运行时，你可以在这里找到：

[https://github.com/gnustep/libobjc2](https://github.com/gnustep/libobjc2)

对于 Ubuntu，GNUstep-wiki 上有可用的 bash 脚本，它可以帮助您完成有点复杂的 GNUstep 安装过程：

[http://wiki.gnustep.org/index.php/GNUstep_under_Ubuntu_Linux](http://wiki.gnustep.org/index.php/GNUstep_under_Ubuntu_Linux)

还有一个提示：您不应该像您那样尝试手动使用编译器来重新发明 GNUstep-make。更好地使用 GNUstep-make：

[http://www.gnustep.org/resources/documentation/Developer/Make/Manual/gnustep-make_1.html](http://www.gnustep.org/resources/documentation/Developer/Make/Manual/gnustep-make_1.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-23T21:08:51.720

我是MacOs的新手。今天我不得不在 nix 中构建 pyobjc Cocoa python 包装器并且必须处理clang。我有类似的错误。作为任何 C 开发人员，我首先用 CFLAGS 扩展了 CFLAGS `I/Library/Developer/CommandLineTools/SDKs/MacOSX11.3.sdk/usr/include`，但它并没有改变任何东西。在挠了一阵头之后，我尝试手动调用 clang`-I`并且它正在工作！所以`-isysroot`禁用`-I`并且不自己做任何事情。我找到`-iwithprefix`并把它和我使用的路径放在一起`-I`，它适用于`-isysroot`我无法轻易删除的路径——它被注入到 CLFAGS 中的 nix 派生中的某个地方。

# java - 在jave中读取excel文件并生成xml作为输出

> ID：11475130
> 
> 赞同：0
> 
> 时间：2012-07-13T17:08:16.193
> 
> 标签：java

我开发了可运行的 jar，它将示例 excel 文件转换为 xml 文件。它工作正常，但我有问题需要根据特定列循环，即查看我的 excel 以获取信息

```
col  1     2               3              4 5           6             7
     10001 LD31PC15R013WD  DHULE_DEALER_2 1 C1C2003209  CHAKAN_PLANT  13-Apr-12
     10001 LD31PB15R0761WD DHULE_DEALER_2 1 C1C2003209  CHAKAN_PLANT  13-Apr-12 
```

这里每一行都转换为 xml 文件，但现在如果第 5 列有重复数据，那么它应该通过循环遍历它本身而不是创建新的 xml 来进入一个 xml 元素。

我已将 apache poi 用于此实用程序。如果您需要，请帮助我，我将粘贴代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:37:05.357

您可能希望首先为所有列创建 java bean，一旦解析了 excel，您将需要从中填充 javaBeans。您可以从 javaBeans 创建 XML，它会有重复的元素。

您可以在 JavaBean 模型中为 column5 包含 list(arrayList,linkedList) 元素。

# iphone - 是否可以在以下情况下进行 IAP 订阅？

> ID：11475131
> 
> 赞同：-1
> 
> 时间：2012-07-13T17:08:17.040
> 
> 标签：iphone, in-app-purchase

我的应用服务，用于用户一些关于公共领域的电影、音频等内容......

一个月从任何特定的网站 URL 下载内容（没问题。）。

特定的 URL（有内容。）每天由 XML 更新。

```
 <?xml version="1.0" encoding="utf-8"?>
    <audioCatalog xmlns='http://www.w3.org/2005/Atom' xmlns:storage='https://blahblah.com/contents/'>
        <audio date="2012-07-16" category="...">
            <title>"..."</title>
            <description>"..."</description>
            <fileBase>"..."</fileBase>
        </audio>
        <audio date="2012-07-15" category="...">
            <title>"..."</title>
            <description>"..."</description>
            <fileBase>"..."</fileBase>
        </audio>
        <audio date="2012-07-14" category="...">
            <title>"..."</title>
            <description>"..."</description>
            <fileBase>"..."</fileBase>
        </audio>
                         .
                         .
                         .
     </audioCatalog> 
```

用户点击 UIButton 可以每天下载新内容。

（[https://blahblah.com/](https://blahblah.com/) “...”<-- 参考一个文件库）

```
imageURL: https://blahblah.com/"...png"
audioURL: https://blahblah.com/"...mp3" <-- user download contents if click on button 
```

示例 UI 如下。

![在此处输入图像描述](../Images/2b3e2cd4315cd937d564f6095a85d9a7.png)

总之，按一个下载按钮，就是给一个月的权限。使用自动更新订阅服务 (IAP)。这是可用的吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:50:01.997

编辑：哇，你已经大大改变了你的问题，这个答案不再适用。

是的，但是有两种选择；您可以提供订阅服务，也可以使用简单的 IAP 购买一个月的访问权限。

# php - （PHP）从下拉列表中的值中获取重复数据（MySQL）并将其显示在表格中

> ID：11475137
> 
> 赞同：1
> 
> 时间：2012-07-13T17:08:49.470
> 
> 标签：php, mysql, drop-down-menu, show

我有一个文件，该文件有一个下拉列表，其中包含来自数据库（movimentos）的一组值（矩阵）我想要的是当我在下拉列表中选择该值时，它会在数据库中搜索重复的行并将其显示在表中包含该值的所有数据（目前为 3 列，“matricula”、“marca”和“despesa”）

下面是我用来从下拉列表中获取值的代码，这就是我遇到的问题，我无法从下拉列表中获取值以显示表中的相应行。

```
 <a href='verificar.dwt.php'>Voltar atrás</a>

<div align="center"><? 

include 'configmov.dwt.php'; 

$tableName='movimentos';
$matricula = mysql_real_escape_string($_POST['matricula']);

$sql="SELECT matricula, marca, despesa FROM $tableName WHERE $matricula in (SELECT matricula FROM $tableName GROUP BY $matricula HAVING count($matricula) > 1)"; 
$result=mysql_query($sql); 
$n=1; 

echo "Os seus resultados: <p>";

echo "<table border=0>";
echo "<tr bgcolor='#CCFFCC'>";
echo "<td style='width: 100px;'>Matricula</td>";
echo "<td style='width: 100px;'>Marca</td>";
echo "<td style='width: 100px;'>Despesa</td>";
echo "</tr>";

while($row = mysql_fetch_array($result)){ 
    echo "<table border=0>";
    echo "<tr bgcolor='#CCCCCC'>";
    echo "<td style='width: 100px;'>".$row['matricula']."</td>";
    echo "<td style='width: 100px;'>".$row['marca']."</td>";
    echo "<td style='width: 100px;'>".$row['despesa']."</td>";
    echo "</tr>";

}

?>

</div>

<?php
// close connection; 
mysql_close();
?> 
```

我在这个问题上已经有一段时间了，在来这里提出这个问题之前我做了很多研究。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:24:32.810

首先..我认为你的语法是错误的。

试试这个：

```
$sql = "SELECT matricula, marca, despesa FROM '$tableName' WHERE '$matricula' in (SELECT matricula FROM '$tableName' GROUP BY '$matricula' HAVING count('$matricula') > 1)"; 
```

在查询中，您必须将 php 变量放在引号之间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T17:28:42.110

matricula 是表中的一个字段，在您的帖子中...不是 php 变量..所以您必须拥有： GROUP BY matricula HAVIG count(matricula)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T17:30:26.323

请确保您的 SQL 语法是正确的，并尝试使用此代码从返回的数据库值创建一个表以使其成为一个表

```
echo "<table border=0>";
echo "<tr bgcolor='#CCFFCC'>";
echo "<td style='width: 100px;'>Matricula</td>";
echo "<td style='width: 100px;'>Marca</td>";
echo "<td style='width: 100px;'>Despesa</td>";
echo "</tr>";

while($row = mysql_fetch_array($result)){ 
    echo "<tr bgcolor='#CCCCCC'>";
    echo "<td style='width: 100px;'>".$row['matricula']."</td>";
    echo "<td style='width: 100px;'>".$row['marca']."</td>";
    echo "<td style='width: 100px;'>".$row['despesa']."</td>";
    echo "</tr>";

}

echo "</table>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T17:38:16.160

如果您正在检查表中发布的值是否完全匹配，为什么不能使用它呢？

```
 $sql="SELECT matricula, marca, despesa FROM ".$tableName." WHERE matricula = '".$matricula."'"; 
```

# php - jQuery mobile 和 PHP 定义变量

> ID：11475141
> 
> 赞同：1
> 
> 时间：2012-07-13T17:09:03.680
> 
> 标签：php, jquery, jquery-mobile, mobile

我对 jQuery mobile 很陌生，但我很喜欢使用它！我遇到了一些关于我正在努力解决的缓存问题。

我有一个 php 文件，其中包含以下`define`内容：

```
define('HEADING_TITLE', 'Page 1'); 
```

该文件加载在网站的第 1 页上。当我回显 HEADING_TITLE 时，我看到“第 1 页”。

第 2 页需要一个不同的 php 文件来覆盖 HEADING_TITLE，如下所示：

```
define('HEADING_TITLE', 'Page 2'); 
```

当我回显 HEADING_TITLE 时，我仍然看到“第 1 页”。我知道正在处理第 2 页定义，因为如果我`die(HEADING_TITLE);`在定义之后立即添加该行，脚本确实会死，但仍然显示“第 1 页”！

如何让 jQuery mobile 允许我覆盖 HEADING_TITLE 变量？还是我需要以另一种方式解决这个问题？创建不同的定义变量，如 PAGE1_HEADING_TITLE 和 PAGE2_HEADING_TITLE 没问题，但如果有更好的方法，我很想知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:11:52.913

简短的回答是**您不能覆盖 define**，它们被称为常量是有原因的。长答案是，[你可以在运行时](http://php.net/manual/en/function.runkit-constant-redefine.php)，但它是 hacky 和一个坏主意。

如果您选择在运行时覆盖常量，请这样做：

```
runkit_constant_redefine("HEADING_TITLE", 'Page 2'); 
```

# image - Graphviz dot 仅为一个文档生成一个非常大的黑色图像

> ID：11475142
> 
> 赞同：0
> 
> 时间：2012-07-13T17:09:05.240
> 
> 标签：image, graphviz, dot

因此，当我使用 graphviz dot 创建一个简单的图形时，完全可以按预期工作，这段代码：

```
digraph simple {
    "1313213"-> "123123"
    "123123" -> "adsagj"
} 
```

创建此图像：

![在此处输入图像描述](../Images/28bf42eff883070927261967ab44a810.png)

正如预期的那样，但由于某种原因，当我使用以下代码时：

```
digraph json_data {
    graph [bgcolor=white]
    "4d990f29-cd09-44ab-8ff2-87f9a0bebe86" [label="10811"]
    "c4bffbf7-d258-4b5c-b87b-6a8bc861295d" [label="10810"]
    "8f86a5cc-8a0a-4380-91f5-2ab754ab9711" [label="10809"]
    "d77e4d0f-673c-4ac4-8411-ab7cc8ee840a" [label="10808"]
    "8e4d4f32-2689-4e3e-991b-95319d84ef8a" [label="10807"]
    "19998f18-4e0d-4060-8a3f-c66a6bb9ac22" [label="10806"]
    "e3ccf1ec-5aa6-4cd5-a66f-1c0b629093e5" [label="10805"]
    "8f7ac128-a046-43e7-ab51-c1214734a0c0" [label="10804"]
    "f7579872-4a5c-4594-937f-b264542d6637" [label="10803"]
    "38d04ed2-ea78-4c35-8265-76a58d71e3b5" [label="10802"]
    "e6ffca19-6b61-426e-8f8e-f8df40ccf4cd" [label="10801"]
    "bd120709-a05b-4e9c-a23e-67b656579327" [label="10800"]
    "820c6728-30c5-4d9f-bbe0-f772fa2d4b2e" [label="10799"]
    "3a54534d-b229-4db5-89be-f6402aaf5a9b" [label="10798"]
    "5c08b7d4-faa0-45d1-8dad-e9bd2c7ef051" [label="10797"]
    "b864bd1b-60ca-46a6-a1da-1ea189fef441" [label="10750"]
    "45c73173-a40e-4cbe-b673-a6ae80f2df9f" [label="10746"]
    "432c7e91-997a-46d8-a8f8-3298a7f7df58" [label="10740"]
    "4b450007-ad7a-4d7b-9df3-c082b80b00ca" [label="10739"]
    "13d9629e-f56f-4b47-bc99-376ecb14b076" [label="10729"]
    "c837a0a7-78d1-40ac-bf43-7868f0ff3957" [label="10728"]
    "a8cbc679-d6e8-4c6c-b715-cf8d7d23c555" [label="10663"]
    "40659aaf-fe64-42fc-ae94-9987ffb3b686" [label="10619"]
    "0de017a7-4ef4-495d-bee0-efaba0b4da02" [label="10618"]
    "4356074e-b446-474a-89e7-e93cc158d24e" [label="10617"]
    "6d517284-8254-4f10-ab98-2dea61c8d04f" [label="10568"]
    "c4727989-fc6e-4212-aa63-2efdd7f1d51e" [label="10567"]
    "fa4565ee-59d5-4af2-b9bd-c1632d2a6c6c" [label="10564"]
    "f2b95876-df48-49e4-8f88-9e32674c33a0" [label="10400"]
    "2ce72a20-14b8-41f1-b21f-47a7681c6276" [label="10368"]
    "93a23f0d-c8b4-4a95-9f62-4502e42d87fc" [label="10335"]
    "a44919e5-8860-4e67-8c53-42e5d439c58e" [label="10300"]
    "2f4a908a-8269-4247-b374-729eac540269" [label="10299"]
    "db25cc7b-ab41-4389-a8dd-cb294b504fdd" [label="10221"]
    "7dd1a130-6c0f-475a-b432-562a0e338839" [label="10079"]
    "85d507d8-0c2f-413d-a0db-ceeaf5569adb" [label="9660"]
    "bbbc9a61-e2b2-4f6e-91cd-d46ae14b71fc" [label="9642"]
    "83071b03-286a-4dd5-8f95-ccac1694d809" [label="9641"]
    "1ac8fea0-791e-4d5b-9db5-095d1c1fee82" [label="9639"]
    "3846ee3e-36d1-495c-9adc-088c715c257d" [label="9635"]
    "c7b64c7b-c451-4d5b-905c-e465201905ef" [label="9601"]
    "c0b71383-6ab0-4786-90d7-4d50588df620" [label="9245"]
    "9bc5c5f2-e45f-4ae8-817e-2e2a84d63d6e" [label="9229"]
    "ec25527a-f1cb-4827-896f-229fb135af50" [label="9206"]
    "30e0cc04-69bf-4a98-b5b7-ad102851a539" [label="9035"]
    "fb573682-cf5f-4867-a40c-d151cb2dd5fd" [label="8942"]
    "20fc5d12-f614-49e8-9836-9890bb3f7a37" [label="8941"]
    "5f0c0a21-cc3c-47d3-a143-a540b8f2681a" [label="8940"]
    "a95a4daf-8b24-4e30-9a44-85b800e75bff" [label="8911"]
    "a20078e8-1df2-42a3-8f8c-bc5b821dd2a5" [label="8898"]
    "2c0c4fc1-3b3e-4a4e-aa7e-9f39c0302031" [label="8897"]
    "5224aa2b-5969-4433-97cb-0cfa0c5a5110" [label="8894"]
    "72233b5c-bf90-479f-9ede-8b8a6e921130" [label="8682"]
    "c9a96a2f-b6b7-4235-a131-b76489d6e230" [label="8600"]
    "2abf0a74-85ab-49eb-85bd-8429ec4d3bca" [label="8597"]
    "b5e4c5e3-bcc1-4620-9739-9a0a10915ac2" [label="8596"]
    "02b3d381-cf40-42ff-8a4e-67afaa049e2d" [label="8595"]
    "d58124c5-534d-4789-b6c3-8148f970b03f" [label="8594"]
    "25dfee0c-8686-4150-8f8e-ddb766f8fa11" [label="8593"]
    "5586a6e8-568c-466c-a3d0-88994b493b37" [label="8592"]
    "3e7781f4-5a64-4c49-be15-659669f51052" [label="8591"]
    "a1d06b37-6248-4756-80be-5cce023254a8" [label="8590"]
    "85b6d1ed-0458-46bc-8130-7f30a2fe6038" [label="8589"]
    "26f13b51-483f-4053-b2a0-a89e6c7dc181" [label="8588"]
    "22b6e967-70a7-4995-bee8-fa56babac7ac" [label="8587"]
    "76aa7f44-cdb8-4641-bcf0-627fdea8b8f8" [label="8586"]
    "32889ff2-3761-4885-a088-fd9c9d82f235" [label="8585"]
    "47e0d907-34d2-4257-ad81-9faf89fe3e59" [label="8542"]
    "5ba6cd5e-0138-49f3-a874-52b09263d57c" [label="8527"]
    "3dd16fdb-79c1-47e4-94e1-db4bf3e69e72" [label="8377"]
    "6cc95bb2-47d9-437d-b4d6-91e37eb765f4" [label="6373"]
    "3322a081-0b4f-4241-992a-044614ab260c" [label="6372"]
    "0f79d52a-3785-4f17-8732-3d958af0b98e" [label="6371"]
    "916d3373-19c5-4159-9115-7982c218dfb6" [label="6370"]
    "ee98f049-2a1f-468c-8f16-be9ca7d21d87" [label="6369"]
    "d85211ca-bd8e-4203-a046-644835033e54" [label="6367"]
    "e132a55c-f561-43a5-8584-47f3611bbf53" [label="6366"]
    "b3ea090c-c534-4efa-802b-758f61c48fdb" [label="6365"]
    "b9694ce4-04b0-4964-a65d-ead392830ad4" [label="6364"]
    "d4b29e8e-a781-41f5-9e71-11029e12b157" [label="6362"]
    "0e80a296-e282-415c-a136-adb4ab285259" [label="6360"]
    "50ff3b85-f711-4eba-af67-7e4dfb8467bd" [label="6353"]
    "77db6307-f2ef-4854-86af-c23a2459febc" [label="6352"]
    "0a0ca52d-d2ba-4da2-8a0c-47f43af8bdd1" [label="6351"]
    "e60af8ef-0416-46b1-8a28-16fdf8b10a35" [label="6350"]
    "b4c59220-b3c4-471d-8fca-38daaffbd8b7" [label="6349"]
    "7f64a959-37ba-4fe0-9990-968fd34e076b" [label="6348"]
    "9291e7df-b044-4615-b816-1f964ce4f574" [label="6347"]
    "474ef404-ed96-4226-a080-6496a600fbdc" [label="6209"]
    "fe11be3f-fef2-4760-ad99-8e323f01748d" [label="6208"]
    "4cccf502-fe34-4c68-94fb-dfa25fc34b90" [label="6207"]
    "611d41f6-6540-4dec-95b6-fb21dc4e14a1" [label="6206"]
    "d21e0d43-7595-41dd-bdc9-3984b1e2e0ef" [label="6205"]
    "0da13c61-7759-4b48-951a-bcea048fad77" [label="6204"]
    "0e8b0fcd-5fec-4aac-b65c-6e391bf7bfd1" [label="6203"]
    "dd0340d5-c0d5-40a6-a988-d7204ec6e783" [label="6202"]
    "940955cf-7bb8-497d-aea2-6e5d841b7fb1" [label="6200"]
    "f8bd4edb-8a09-4912-8edb-f14f368ef7c2" [label="6197"]
    "2322f347-7153-437a-843a-8f10a4e57e1b" [label="6193"]
    "10876c73-aef9-40ff-b5dd-259a4ce47292" [label="6191"]
    "ebb6349e-5432-4d0d-9101-e3d19d584a2c" [label="6190"]
    "216eaafa-5d84-4744-989e-7d9558314dca" [label="6189"]
    "9eeca7f7-ab14-4e38-8d64-8b9d54dff3f6" [label="6188"]
    "aecd60a1-436a-42c3-bdc8-227547e48ba5" [label="6187"]
    "77cad941-30ac-4b81-ad4a-4409f1da21ed" [label="6151"]
    "6e4639ef-8e6f-427f-a417-c344d736c27b" [label="6111"]
    "390ae27c-34de-49dd-b162-7bf898f3a44d" [label="6110"]
    "f93323bd-dc69-4f83-b920-0aad440339d5" [label="6108"]
    "864aa807-e56c-4aa2-93d6-1612710f2028" [label="6107"]
    "c8287fa1-e950-402e-aa8f-83995f3d44b6" [label="5587"]
    "825d4f6c-15dc-4be1-9318-a802d3f6bf12" [label="5475"]
    "eff5b030-606c-4dfa-8bb0-8fe92cd525df" [label="5474"]
    "f9d9e5b1-07da-44d4-934d-e88f53fc40f7" [label="5473"]
    "70e957b9-8f41-4b52-9480-ce3af6a3009b" [label="5472"]
    "09f4d03b-a1b3-4ed4-95c4-c62d9690982f" [label="5470"]
    "de83aa71-3a24-4d7a-8ca2-661a5d942c43" [label="5469"]
    "723ec621-ff8c-40ca-8efc-021dee4c4ef9" [label="5468"]
    "4a0ef549-0236-4a38-b32c-4769d25e5646" [label="5467"]
    "daf8022f-ae83-4336-98aa-0ace0a033243" [label="5464"]
    "31c30892-de23-41ae-a580-ea4dba7ee057" [label="5463"]
    "0a8b61ad-a068-4f75-8993-227149af0a57" [label="5439"]
    "c771b13f-cb34-42af-b8cd-44bcd600c777" [label="5292"]
    "adc7c5fc-e529-4141-a3f6-7a660f80a69f" [label="5080"]
    "cd9807ad-38bf-4738-9807-0854d5bdc3d9" [label="5069"]
    "fee9052b-7c71-4323-9fba-adeb2f32fdcf" [label="4991"]
    "bda49732-7b5e-45ee-a38b-d6a0cb39fdde" [label="4095"]
    "b2a5fab8-c92d-4b88-9283-b8432841aa87" [label="4049"]
    "9983c8a8-6ef4-47e6-ae00-9f43dcdf5eeb" [label="4041"]
    "24fac911-fae6-48c0-8498-78a7c97a83ad" [label="4034"]
    "81190b5c-ab3a-41e8-935c-ac035710f90e" [label="4033"]
    "2e28a740-7991-4cfe-8ed0-9d95c8181e29" [label="4027"]
    "c3f7aceb-9004-4d9f-a719-077d3e614590" [label="4026"]
    "8912e27a-6c17-46ca-b01b-219711dd1505" [label="4025"]
    "b7bd2585-368e-4aa6-a512-c6a358f86af1" [label="4019"]
    "9a7e1e7e-85d0-435e-8794-882679db10ce" [label="4014"]
    "e853d0ac-9b8a-4e74-a6c8-1ccad3044c33" [label="4013"]
    "2519b2bb-457b-4999-8789-7329cfa0f5a7" [label="4012"]
    "442913d6-7af5-42d2-8dd1-63dad14efb09" [label="4011"]
    "a35844d3-a419-4184-afe7-d12ab058b8db" [label="4010"]
    "8e842d52-141d-481f-a5ab-3baff04a1cf9" [label="4009"]
    "55b8b591-40e6-4aed-aae9-3a9489cd806f" [label="4008"]
    "dfc9cfc1-f190-4fd1-bd17-780413863a17" [label="4007"]
    "98c3d5b1-faf0-462c-b9f5-0ae3d530e694" [label="4006"]
    "2eb027f5-ec2e-4cf2-9faa-ecb1d36875a6" [label="4005"]
    "0eafc340-6753-410f-99c4-9058ee1c2451" [label="4004"]
    "c01fac09-cd8f-4903-afd1-671f7581f589" [label="4003"]
    "f7d6e56a-b6b8-4381-81d6-b06d1a30aa2b" [label="4002"]
    "fe7ae8b7-79b8-4605-a08b-a7e2af8a7e14" [label="4001"]
    "a4658afb-e92f-4f26-9b85-1ffa087a90f8" [label="4000"]
    "1f3dd47c-751d-4154-bb16-cd2d75215ff8" [label="3997"]
    "0114080b-d713-4023-b239-7c7dd4187f6b" [label="3996"]
    "909c894b-fc1c-4af5-905c-9fc3c9eba137" [label="3995"]
    "a3ca5be2-570d-4289-a683-0e10b06b1663" [label="3994"]
    "ee1e04bc-6c9e-4a0b-93eb-f612260a84f5" [label="3993"]
    "fe620d00-5806-48cf-b401-e43d93450c15" [label="3908"]
    "33f9237c-9252-497d-bf4c-817f3c857391" [label="3907"]
    "974cc56a-7189-48b0-92b4-d22b950e074e" [label="3906"]
    "b9d93d71-7688-4fba-b3cb-342f5d1e0b1b" [label="3905"]
    "0e301fec-33cc-4904-aa3f-f67b8bc86f5a" [label="3904"]
    "067aec3d-e85b-4358-98da-9e489a74e5c9" [label="3903"]
    "bb4e6be1-b9e8-4201-871d-d1b5ad5802f6" [label="3902"]
    "db88c2ca-620e-4ffd-9dd5-d511325cea30" [label="3897"]
    "c6bf6f2d-676e-42ab-a278-767a15e5e920" [label="3896"]
    "eaaa2ba7-7e2f-4b1f-9202-20d35584fa9b" [label="3895"]
    "08579851-d03e-4b2b-a181-a20b440c9489" [label="3894"]
    "1605342b-bacf-41fb-b58e-fd599bc6153c" [label="3891"]
    "f861bf3a-4068-4d1d-b265-a2313cd8ca17" [label="3890"]
    "112c245b-b5c8-4fae-98ae-1766c0cb5928" [label="3265"]
    "90eee544-ec97-4875-95a1-23949bd8c478" [label="2750"]
    "c4bffbf7-d258-4b5c-b87b-6a8bc861295d" -> "3a54534d-b229-4db5-89be-f6402aaf5a9b"
    "8f86a5cc-8a0a-4380-91f5-2ab754ab9711" -> "3a54534d-b229-4db5-89be-f6402aaf5a9b"
    "d77e4d0f-673c-4ac4-8411-ab7cc8ee840a" -> "3a54534d-b229-4db5-89be-f6402aaf5a9b"
    "8e4d4f32-2689-4e3e-991b-95319d84ef8a" -> "3a54534d-b229-4db5-89be-f6402aaf5a9b"
    "19998f18-4e0d-4060-8a3f-c66a6bb9ac22" -> "3a54534d-b229-4db5-89be-f6402aaf5a9b"
    "e3ccf1ec-5aa6-4cd5-a66f-1c0b629093e5" -> "3a54534d-b229-4db5-89be-f6402aaf5a9b"
    "8f7ac128-a046-43e7-ab51-c1214734a0c0" -> "3a54534d-b229-4db5-89be-f6402aaf5a9b"
    "f7579872-4a5c-4594-937f-b264542d6637" -> "3a54534d-b229-4db5-89be-f6402aaf5a9b"
    "38d04ed2-ea78-4c35-8265-76a58d71e3b5" -> "3a54534d-b229-4db5-89be-f6402aaf5a9b"
    "e6ffca19-6b61-426e-8f8e-f8df40ccf4cd" -> "3a54534d-b229-4db5-89be-f6402aaf5a9b"
    "bd120709-a05b-4e9c-a23e-67b656579327" -> "3a54534d-b229-4db5-89be-f6402aaf5a9b"
    "820c6728-30c5-4d9f-bbe0-f772fa2d4b2e" -> "3a54534d-b229-4db5-89be-f6402aaf5a9b"
    "3a54534d-b229-4db5-89be-f6402aaf5a9b" -> "4d990f29-cd09-44ab-8ff2-87f9a0bebe86"
    "5c08b7d4-faa0-45d1-8dad-e9bd2c7ef051" -> "3a54534d-b229-4db5-89be-f6402aaf5a9b"
    "b864bd1b-60ca-46a6-a1da-1ea189fef441" -> "83071b03-286a-4dd5-8f95-ccac1694d809"
    "45c73173-a40e-4cbe-b673-a6ae80f2df9f" -> "83071b03-286a-4dd5-8f95-ccac1694d809"
    "432c7e91-997a-46d8-a8f8-3298a7f7df58" -> "83071b03-286a-4dd5-8f95-ccac1694d809"
    "4b450007-ad7a-4d7b-9df3-c082b80b00ca" -> "c4727989-fc6e-4212-aa63-2efdd7f1d51e"
    "13d9629e-f56f-4b47-bc99-376ecb14b076" -> "c4727989-fc6e-4212-aa63-2efdd7f1d51e"
    "c837a0a7-78d1-40ac-bf43-7868f0ff3957" -> "c4727989-fc6e-4212-aa63-2efdd7f1d51e"
    "a8cbc679-d6e8-4c6c-b715-cf8d7d23c555" -> "c4727989-fc6e-4212-aa63-2efdd7f1d51e"
    "40659aaf-fe64-42fc-ae94-9987ffb3b686" -> "c4727989-fc6e-4212-aa63-2efdd7f1d51e"
    "0de017a7-4ef4-495d-bee0-efaba0b4da02" -> "c4727989-fc6e-4212-aa63-2efdd7f1d51e"
    "6d517284-8254-4f10-ab98-2dea61c8d04f" -> "83071b03-286a-4dd5-8f95-ccac1694d809"
    "c4727989-fc6e-4212-aa63-2efdd7f1d51e" -> "4356074e-b446-474a-89e7-e93cc158d24e"
    "fa4565ee-59d5-4af2-b9bd-c1632d2a6c6c" -> "c4727989-fc6e-4212-aa63-2efdd7f1d51e"
    "2ce72a20-14b8-41f1-b21f-47a7681c6276" -> "c4727989-fc6e-4212-aa63-2efdd7f1d51e"
    "93a23f0d-c8b4-4a95-9f62-4502e42d87fc" -> "83071b03-286a-4dd5-8f95-ccac1694d809"
    "a44919e5-8860-4e67-8c53-42e5d439c58e" -> "83071b03-286a-4dd5-8f95-ccac1694d809"
    "2f4a908a-8269-4247-b374-729eac540269" -> "83071b03-286a-4dd5-8f95-ccac1694d809"
    "db25cc7b-ab41-4389-a8dd-cb294b504fdd" -> "83071b03-286a-4dd5-8f95-ccac1694d809"
    "7dd1a130-6c0f-475a-b432-562a0e338839" -> "83071b03-286a-4dd5-8f95-ccac1694d809"
    "85d507d8-0c2f-413d-a0db-ceeaf5569adb" -> "c4727989-fc6e-4212-aa63-2efdd7f1d51e"
    "bbbc9a61-e2b2-4f6e-91cd-d46ae14b71fc" -> "c4727989-fc6e-4212-aa63-2efdd7f1d51e"
    "83071b03-286a-4dd5-8f95-ccac1694d809" -> "f2b95876-df48-49e4-8f88-9e32674c33a0"
    "1ac8fea0-791e-4d5b-9db5-095d1c1fee82" -> "c4727989-fc6e-4212-aa63-2efdd7f1d51e"
    "3846ee3e-36d1-495c-9adc-088c715c257d" -> "c4727989-fc6e-4212-aa63-2efdd7f1d51e"
    "c7b64c7b-c451-4d5b-905c-e465201905ef" -> "c4727989-fc6e-4212-aa63-2efdd7f1d51e"
    "c0b71383-6ab0-4786-90d7-4d50588df620" -> "7dd1a130-6c0f-475a-b432-562a0e338839"
    "9bc5c5f2-e45f-4ae8-817e-2e2a84d63d6e" -> "83071b03-286a-4dd5-8f95-ccac1694d809"
    "ec25527a-f1cb-4827-896f-229fb135af50" -> "83071b03-286a-4dd5-8f95-ccac1694d809"
    "30e0cc04-69bf-4a98-b5b7-ad102851a539" -> "c0b71383-6ab0-4786-90d7-4d50588df620"
    "fb573682-cf5f-4867-a40c-d151cb2dd5fd" -> "5c08b7d4-faa0-45d1-8dad-e9bd2c7ef051"
    "20fc5d12-f614-49e8-9836-9890bb3f7a37" -> "fb573682-cf5f-4867-a40c-d151cb2dd5fd"
    "5f0c0a21-cc3c-47d3-a143-a540b8f2681a" -> "83071b03-286a-4dd5-8f95-ccac1694d809"
    "a95a4daf-8b24-4e30-9a44-85b800e75bff" -> "c4727989-fc6e-4212-aa63-2efdd7f1d51e"
    "a20078e8-1df2-42a3-8f8c-bc5b821dd2a5" -> "c4727989-fc6e-4212-aa63-2efdd7f1d51e"
    "2c0c4fc1-3b3e-4a4e-aa7e-9f39c0302031" -> "c4727989-fc6e-4212-aa63-2efdd7f1d51e"
    "5224aa2b-5969-4433-97cb-0cfa0c5a5110" -> "c4727989-fc6e-4212-aa63-2efdd7f1d51e"
    "72233b5c-bf90-479f-9ede-8b8a6e921130" -> "c7b64c7b-c451-4d5b-905c-e465201905ef"
    "c9a96a2f-b6b7-4235-a131-b76489d6e230" -> "72233b5c-bf90-479f-9ede-8b8a6e921130"
    "2abf0a74-85ab-49eb-85bd-8429ec4d3bca" -> "32889ff2-3761-4885-a088-fd9c9d82f235"
    "b5e4c5e3-bcc1-4620-9739-9a0a10915ac2" -> "32889ff2-3761-4885-a088-fd9c9d82f235"
    "02b3d381-cf40-42ff-8a4e-67afaa049e2d" -> "32889ff2-3761-4885-a088-fd9c9d82f235"
    "d58124c5-534d-4789-b6c3-8148f970b03f" -> "32889ff2-3761-4885-a088-fd9c9d82f235"
    "5586a6e8-568c-466c-a3d0-88994b493b37" -> "32889ff2-3761-4885-a088-fd9c9d82f235"
    "3e7781f4-5a64-4c49-be15-659669f51052" -> "32889ff2-3761-4885-a088-fd9c9d82f235"
    "a1d06b37-6248-4756-80be-5cce023254a8" -> "32889ff2-3761-4885-a088-fd9c9d82f235"
    "85b6d1ed-0458-46bc-8130-7f30a2fe6038" -> "32889ff2-3761-4885-a088-fd9c9d82f235"
    "26f13b51-483f-4053-b2a0-a89e6c7dc181" -> "32889ff2-3761-4885-a088-fd9c9d82f235"
    "22b6e967-70a7-4995-bee8-fa56babac7ac" -> "32889ff2-3761-4885-a088-fd9c9d82f235"
    "76aa7f44-cdb8-4641-bcf0-627fdea8b8f8" -> "32889ff2-3761-4885-a088-fd9c9d82f235"
    "32889ff2-3761-4885-a088-fd9c9d82f235" -> "25dfee0c-8686-4150-8f8e-ddb766f8fa11"
    "47e0d907-34d2-4257-ad81-9faf89fe3e59" -> "32889ff2-3761-4885-a088-fd9c9d82f235"
    "5ba6cd5e-0138-49f3-a874-52b09263d57c" -> "47e0d907-34d2-4257-ad81-9faf89fe3e59"
    "3dd16fdb-79c1-47e4-94e1-db4bf3e69e72" -> "5ba6cd5e-0138-49f3-a874-52b09263d57c"
    "3322a081-0b4f-4241-992a-044614ab260c" -> "7f64a959-37ba-4fe0-9990-968fd34e076b"
    "916d3373-19c5-4159-9115-7982c218dfb6" -> "7f64a959-37ba-4fe0-9990-968fd34e076b"
    "ee98f049-2a1f-468c-8f16-be9ca7d21d87" -> "7f64a959-37ba-4fe0-9990-968fd34e076b"
    "d85211ca-bd8e-4203-a046-644835033e54" -> "7f64a959-37ba-4fe0-9990-968fd34e076b"
    "b3ea090c-c534-4efa-802b-758f61c48fdb" -> "7f64a959-37ba-4fe0-9990-968fd34e076b"
    "b9694ce4-04b0-4964-a65d-ead392830ad4" -> "7f64a959-37ba-4fe0-9990-968fd34e076b"
    "d4b29e8e-a781-41f5-9e71-11029e12b157" -> "7f64a959-37ba-4fe0-9990-968fd34e076b"
    "0e80a296-e282-415c-a136-adb4ab285259" -> "7f64a959-37ba-4fe0-9990-968fd34e076b"
    "50ff3b85-f711-4eba-af67-7e4dfb8467bd" -> "7f64a959-37ba-4fe0-9990-968fd34e076b"
    "e60af8ef-0416-46b1-8a28-16fdf8b10a35" -> "7f64a959-37ba-4fe0-9990-968fd34e076b"
    "b4c59220-b3c4-471d-8fca-38daaffbd8b7" -> "7f64a959-37ba-4fe0-9990-968fd34e076b"
    "9291e7df-b044-4615-b816-1f964ce4f574" -> "7f64a959-37ba-4fe0-9990-968fd34e076b"
    "474ef404-ed96-4226-a080-6496a600fbdc" -> "0da13c61-7759-4b48-951a-bcea048fad77"
    "fe11be3f-fef2-4760-ad99-8e323f01748d" -> "0da13c61-7759-4b48-951a-bcea048fad77"
    "4cccf502-fe34-4c68-94fb-dfa25fc34b90" -> "0da13c61-7759-4b48-951a-bcea048fad77"
    "611d41f6-6540-4dec-95b6-fb21dc4e14a1" -> "0da13c61-7759-4b48-951a-bcea048fad77"
    "0da13c61-7759-4b48-951a-bcea048fad77" -> "d21e0d43-7595-41dd-bdc9-3984b1e2e0ef"
    "0e8b0fcd-5fec-4aac-b65c-6e391bf7bfd1" -> "0da13c61-7759-4b48-951a-bcea048fad77"
    "dd0340d5-c0d5-40a6-a988-d7204ec6e783" -> "9291e7df-b044-4615-b816-1f964ce4f574"
    "940955cf-7bb8-497d-aea2-6e5d841b7fb1" -> "0da13c61-7759-4b48-951a-bcea048fad77"
    "f8bd4edb-8a09-4912-8edb-f14f368ef7c2" -> "0da13c61-7759-4b48-951a-bcea048fad77"
    "2322f347-7153-437a-843a-8f10a4e57e1b" -> "0da13c61-7759-4b48-951a-bcea048fad77"
    "10876c73-aef9-40ff-b5dd-259a4ce47292" -> "0da13c61-7759-4b48-951a-bcea048fad77"
    "ebb6349e-5432-4d0d-9101-e3d19d584a2c" -> "0da13c61-7759-4b48-951a-bcea048fad77"
    "216eaafa-5d84-4744-989e-7d9558314dca" -> "0da13c61-7759-4b48-951a-bcea048fad77"
    "9eeca7f7-ab14-4e38-8d64-8b9d54dff3f6" -> "0da13c61-7759-4b48-951a-bcea048fad77"
    "aecd60a1-436a-42c3-bdc8-227547e48ba5" -> "0da13c61-7759-4b48-951a-bcea048fad77"
    "77cad941-30ac-4b81-ad4a-4409f1da21ed" -> "dd0340d5-c0d5-40a6-a988-d7204ec6e783"
    "6e4639ef-8e6f-427f-a417-c344d736c27b" -> "0da13c61-7759-4b48-951a-bcea048fad77"
    "390ae27c-34de-49dd-b162-7bf898f3a44d" -> "0da13c61-7759-4b48-951a-bcea048fad77"
    "f93323bd-dc69-4f83-b920-0aad440339d5" -> "f861bf3a-4068-4d1d-b265-a2313cd8ca17"
    "864aa807-e56c-4aa2-93d6-1612710f2028" -> "0da13c61-7759-4b48-951a-bcea048fad77"
    "c8287fa1-e950-402e-aa8f-83995f3d44b6" -> "0da13c61-7759-4b48-951a-bcea048fad77"
    "825d4f6c-15dc-4be1-9318-a802d3f6bf12" -> "31c30892-de23-41ae-a580-ea4dba7ee057"
    "eff5b030-606c-4dfa-8bb0-8fe92cd525df" -> "31c30892-de23-41ae-a580-ea4dba7ee057"
    "f9d9e5b1-07da-44d4-934d-e88f53fc40f7" -> "31c30892-de23-41ae-a580-ea4dba7ee057"
    "70e957b9-8f41-4b52-9480-ce3af6a3009b" -> "31c30892-de23-41ae-a580-ea4dba7ee057"
    "09f4d03b-a1b3-4ed4-95c4-c62d9690982f" -> "31c30892-de23-41ae-a580-ea4dba7ee057"
    "de83aa71-3a24-4d7a-8ca2-661a5d942c43" -> "31c30892-de23-41ae-a580-ea4dba7ee057"
    "723ec621-ff8c-40ca-8efc-021dee4c4ef9" -> "31c30892-de23-41ae-a580-ea4dba7ee057"
    "4a0ef549-0236-4a38-b32c-4769d25e5646" -> "31c30892-de23-41ae-a580-ea4dba7ee057"
    "31c30892-de23-41ae-a580-ea4dba7ee057" -> "daf8022f-ae83-4336-98aa-0ace0a033243"
    "0a8b61ad-a068-4f75-8993-227149af0a57" -> "31c30892-de23-41ae-a580-ea4dba7ee057"
    "c771b13f-cb34-42af-b8cd-44bcd600c777" -> "fee9052b-7c71-4323-9fba-adeb2f32fdcf"
    "adc7c5fc-e529-4141-a3f6-7a660f80a69f" -> "31c30892-de23-41ae-a580-ea4dba7ee057"
    "cd9807ad-38bf-4738-9807-0854d5bdc3d9" -> "31c30892-de23-41ae-a580-ea4dba7ee057"
    "fee9052b-7c71-4323-9fba-adeb2f32fdcf" -> "0a8b61ad-a068-4f75-8993-227149af0a57"
    "bda49732-7b5e-45ee-a38b-d6a0cb39fdde" -> "33f9237c-9252-497d-bf4c-817f3c857391"
    "b2a5fab8-c92d-4b88-9283-b8432841aa87" -> "2e28a740-7991-4cfe-8ed0-9d95c8181e29"
    "9983c8a8-6ef4-47e6-ae00-9f43dcdf5eeb" -> "33f9237c-9252-497d-bf4c-817f3c857391"
    "81190b5c-ab3a-41e8-935c-ac035710f90e" -> "33f9237c-9252-497d-bf4c-817f3c857391"
    "2e28a740-7991-4cfe-8ed0-9d95c8181e29" -> "bb4e6be1-b9e8-4201-871d-d1b5ad5802f6"
    "8912e27a-6c17-46ca-b01b-219711dd1505" -> "33f9237c-9252-497d-bf4c-817f3c857391"
    "b7bd2585-368e-4aa6-a512-c6a358f86af1" -> "33f9237c-9252-497d-bf4c-817f3c857391"
    "9a7e1e7e-85d0-435e-8794-882679db10ce" -> "33f9237c-9252-497d-bf4c-817f3c857391"
    "2519b2bb-457b-4999-8789-7329cfa0f5a7" -> "067aec3d-e85b-4358-98da-9e489a74e5c9"
    "442913d6-7af5-42d2-8dd1-63dad14efb09" -> "067aec3d-e85b-4358-98da-9e489a74e5c9"
    "a35844d3-a419-4184-afe7-d12ab058b8db" -> "067aec3d-e85b-4358-98da-9e489a74e5c9"
    "8e842d52-141d-481f-a5ab-3baff04a1cf9" -> "067aec3d-e85b-4358-98da-9e489a74e5c9"
    "55b8b591-40e6-4aed-aae9-3a9489cd806f" -> "067aec3d-e85b-4358-98da-9e489a74e5c9"
    "dfc9cfc1-f190-4fd1-bd17-780413863a17" -> "067aec3d-e85b-4358-98da-9e489a74e5c9"
    "98c3d5b1-faf0-462c-b9f5-0ae3d530e694" -> "067aec3d-e85b-4358-98da-9e489a74e5c9"
    "2eb027f5-ec2e-4cf2-9faa-ecb1d36875a6" -> "067aec3d-e85b-4358-98da-9e489a74e5c9"
    "0eafc340-6753-410f-99c4-9058ee1c2451" -> "067aec3d-e85b-4358-98da-9e489a74e5c9"
    "c01fac09-cd8f-4903-afd1-671f7581f589" -> "067aec3d-e85b-4358-98da-9e489a74e5c9"
    "f7d6e56a-b6b8-4381-81d6-b06d1a30aa2b" -> "067aec3d-e85b-4358-98da-9e489a74e5c9"
    "fe7ae8b7-79b8-4605-a08b-a7e2af8a7e14" -> "067aec3d-e85b-4358-98da-9e489a74e5c9"
    "a4658afb-e92f-4f26-9b85-1ffa087a90f8" -> "067aec3d-e85b-4358-98da-9e489a74e5c9"
    "1f3dd47c-751d-4154-bb16-cd2d75215ff8" -> "33f9237c-9252-497d-bf4c-817f3c857391"
    "909c894b-fc1c-4af5-905c-9fc3c9eba137" -> "1605342b-bacf-41fb-b58e-fd599bc6153c"
    "a3ca5be2-570d-4289-a683-0e10b06b1663" -> "909c894b-fc1c-4af5-905c-9fc3c9eba137"
    "ee1e04bc-6c9e-4a0b-93eb-f612260a84f5" -> "a3ca5be2-570d-4289-a683-0e10b06b1663"
    "974cc56a-7189-48b0-92b4-d22b950e074e" -> "ee1e04bc-6c9e-4a0b-93eb-f612260a84f5"
    "b9d93d71-7688-4fba-b3cb-342f5d1e0b1b" -> "33f9237c-9252-497d-bf4c-817f3c857391"
    "0e301fec-33cc-4904-aa3f-f67b8bc86f5a" -> "33f9237c-9252-497d-bf4c-817f3c857391"
    "067aec3d-e85b-4358-98da-9e489a74e5c9" -> "e853d0ac-9b8a-4e74-a6c8-1ccad3044c33"
    "bb4e6be1-b9e8-4201-871d-d1b5ad5802f6" -> "33f9237c-9252-497d-bf4c-817f3c857391"
    "db88c2ca-620e-4ffd-9dd5-d511325cea30" -> "067aec3d-e85b-4358-98da-9e489a74e5c9"
    "eaaa2ba7-7e2f-4b1f-9202-20d35584fa9b" -> "31c30892-de23-41ae-a580-ea4dba7ee057"
    "1605342b-bacf-41fb-b58e-fd599bc6153c" -> "067aec3d-e85b-4358-98da-9e489a74e5c9"
    "f861bf3a-4068-4d1d-b265-a2313cd8ca17" -> "c8287fa1-e950-402e-aa8f-83995f3d44b6"
    "112c245b-b5c8-4fae-98ae-1766c0cb5928" -> "31c30892-de23-41ae-a580-ea4dba7ee057"
    "90eee544-ec97-4875-95a1-23949bd8c478" -> "33f9237c-9252-497d-bf4c-817f3c857391"
} 
```

我刚刚收到一张全黑的~3200x300px 图像，大小约为 90kb。我不明白为什么会这样。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:13:58.297

您的版本/安装一定有问题。

Windows 系统上的 Graphviz 2.28 产生此输出（11605x635px！）：

![图形输出](../Images/2fe9c5805672df234145a1f0de792e32.png)

尝试`dot -version`查看版本号和有关已安装插件和配置文件的信息。

# jquery - javascript(jQuery) 未知事件管理

> ID：11475143
> 
> 赞同：1
> 
> 时间：2012-07-13T17:09:05.650
> 
> 标签：jquery, javascript-events

我希望我会足够清楚，但我的情况和我想做的事情有点复杂。

我将开始用[这个 jsfiddle解释我的问题](http://jsfiddle.net/5MB5x/)

如您所见，有 3 个嵌套块。javascript 代码分为两部分：第一部分是我无法更改的（好吧，事实上我不想碰它：x）。该脚本在所有块上创建事件，并使用“return false”来停止传播（我对“e.stopPropagation”有同样的问题）。javascript 的另一部分是我正在编写的脚本。按下回车键后，我想改变点击的行为：当我点击#b（或#b 中的#c）时，我想显示“gruik”并且只显示“gruik”。为此，我杀死了其他“点击”事件（来自我无法更改的代码）并创建自己的“点击”事件。

现在，我的真实情况：“我无法更改的代码”是 highstock 库（我不想深入研究的 18,000 行代码），它创建了一些图形（在我的示例中由块表示）。我真的不知道他们是使用“live”、“bind”还是“delegate”，而且我不知道哪个块上附加了事件（图表在几个嵌套块中）。

现在我的问题：我在我的示例中杀死了一些事件，但它不适合，原因有几个：我可能会杀死（并取消绑定+取消委托）我的图形容器的所有子项中的所有“单击”事件，但怎么可能在那之后我“复活他们”？那么，第一个问题：是否有可能在杀死一个事件时将其保存在某个地方以“恢复”它？

另一种解决方案是在不杀死任何人的情况下为我自己的事件创建“最高优先级”，但我认为这在 Javascript 中是不可能的。

我希望我已经足够清楚了：/

PS：[highstock库的demo](http://www.highcharts.com/stock/demo/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:18:59.493

首先，这样做的首选方法（即禁用事件处理程序）是让事件处理程序自己知道它们是否应该继续逻辑。可能通过一些标志。至少，比`bind`/`unbind`和他们的同类更喜欢。如果您的顶级代码绝对不可修改，那么这是不可能的。

```
// i.e.
$(element).click(function (e) {
    // bail?
    if (some_flag) { return; }

    // continue...
}); 
```

但是，应该可以使用 jQuery[获取为任何元素注册的所有事件处理程序的句柄。](https://stackoverflow.com/a/2519061/304588)有了它，您可以缓存它们，`unbind`然后`bind`在需要时重新缓存。

# javascript - 用于验证 GPS 坐标的 Javascript 正则表达式

> ID：11475146
> 
> 赞同：6
> 
> 时间：2012-07-13T17:09:16.933
> 
> 标签：javascript, regex

我有一个表单，用户将某个位置的 GPS 坐标插入到相应的照片中。过滤掉无效数字很容易，因为我只需要测试 (-90, 90), (-180, 180) 范围内的纬度/经度坐标。

但是，这也意味着常规文本是有效的输入。

我尝试将测试模式更改为

```
var pattern= "^[a-zA-Z]" 
```

并在函数中用于检测字母字符

```
$(".lat").keyup(function(){
  var thisID= this.id;
  var num = thisID.substring(3, thisID.length);
  var thisVal = $(this).val();

  //if invalid input, show error message and hide save button
  if (pattern.test(thisVal)){
    $("#latError"+num).fadeIn(250);
    $("#save"+num).fadeOut(100)
  } 
  else { //otherwise, hide error message and show save
    $("#save"+num).fadeIn(250);
    $("#latError"+num).fadeOut(100);
  }
}); 
```

但是，这不起作用，因为 Firebug 抱怨这`pattern.test`不是一个函数 什么会解决这个问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-13T17:25:59.937

你需要使用正则表达式吗？考虑以下：

```
var val = parseFloat(lat);
if (!isNaN(val) && val <= 90 && val >= -90)
    return true;
else
    return false; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-15T19:44:50.740

这是我在我的项目中使用的：

```
app.user.ck_lat = /^(-?[1-8]?\d(?:\.\d{1,18})?|90(?:\.0{1,18})?)$/;
app.user.ck_lon = /^(-?(?:1[0-7]|[1-9])?\d(?:\.\d{1,18})?|180(?:\.0{1,18})?)$/;

function check_lat_lon(lat, lon){
  var validLat = app.user.ck_lat.test(lat);
  var validLon = app.user.ck_lon.test(lon);
  if(validLat && validLon) {
      return true;
  } else {
      return false;
  }
} 
```

check_lat_lon(-34.11242, -58.11547) 如果有效则返回 TRUE，否则返回 FALSE

我希望这对你有用！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-13T17:26:53.057

模式怎么样，`-?[0-9]{1,3}[.][0-9]+`然后你[parseInt](http://www.w3schools.com/jsref/jsref_parseint.asp)并检查你之前所说的范围。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-13T17:26:39.117

`test()`是`RegExp`对象的一个​​方法——你在一个字符串上运行它，所以会失败。

将您的模式括在 RegExp 文字 ( `/pattern/`) 中，因此

```
var pattern= /^[a-zA-Z]/ 
```

这将消除您遇到的错误，但是您有一个单独的问题：a）您的模式是否适合您想要它做的事情；b）您是否需要正则表达式。

REGEX 作用于字符串 - 它不能用于确定一个数字是否在给定范围内（除非该范围是 0-10 包括在内）。

@flem 的回答显示了处理您正在做的事情的最佳方法 - 不需要 REGEX。调用`parseInt()`将捕获非数字字符，因为`NaN`如果值包含任何字符，它将返回。

# python - python上的bash扩展模块

> ID：11475147
> 
> 赞同：2
> 
> 时间：2012-07-13T17:09:18.863
> 
> 标签：python, bash

我知道可以在 C 或 lua（参见 luabash）上编写 bash 扩展模块（可加载的内建函数），但是在 Python/Cython 上可以吗？是否有任何项目朝着这个方向迈进？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:19:32.190

你可能会这样做的方法是从一个包含适当导出函数的 C 库开始，然后在导出的函数中加载并运行 python 解释器，运行你的 python 代码，然后拆除 python 解释器。

您可以在此处查看如何将 python 解释器加载到 C 程序/库中：

*   [http://docs.python.org/extending/embedding.html](http://docs.python.org/extending/embedding.html)
*   [http://docs.python.org/extending/extending.html#calling-python-functions-from-c](http://docs.python.org/extending/extending.html#calling-python-functions-from-c)
*   [http://www.linuxjournal.com/article/8497](http://www.linuxjournal.com/article/8497)

如果您经常这样做，那么当您可以与多个不同的 python 脚本一起使用时，编写单个通用处理程序可能会更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-03T17:54:47.170

我使用 Bash 示例和 @tylerl 提到的链接资源来制作[bashpy](https://github.com/nflx/bashpy)。这是一个概念证明，目前缺乏对传递变量和调用函数的支持。所以还不是很有用，但也许它可以帮助到这里的人。

# session - 在 Coldfusion 中存储和访问活动查询结果集与重新查询数据库是一个好主意吗？

> ID：11475148
> 
> 赞同：0
> 
> 时间：2012-07-13T17:09:19.347
> 
> 标签：session, coldfusion, resultset

我有一个使用 Coldfusion8 和 MySQL 5.0.88 的产品搜索引擎

产品搜索有两种显示模式：**多视图**和**单视图**。

**多个**显示基本记录信息，**单个**需要从数据库中轮询附加数据。

现在用户进行搜索，我正在轮询数据库

**(a)**总记录和
**(b)**从 FROM 到 TO 的记录。

用户总是从他当前的结果集中进入**单一视图**，所以我的想法是为每个用户存储当前的结果集，而不必再次查询数据库来获取（浪费 a）记录总数和（浪费 b）单个记录我之前已经查询过，然后获取我仍然需要单视图的详细信息。

但是，我对此无能为力。

我无法缓存当前的结果集查询，因为它对每个用户（会话）都是唯一的。

查询在我通过 AJAX 调用的 CFC 内的 CFINVOKED 方法中运行，因此整个查询运行，然后 CFC 和 CFINVOKE 方法被丢弃，因此我不能使用查询或 variables.cfc_storage 的查询。

所以我的想法是将当前结果集存储在 Session 范围中，它将随着用户运行的每个新搜索（分页或全新搜索）而更新。存储的最大结果将是显示的结果数。

我可以使用以下方法存储查询：

```
 <cfset Session.resultset = query_name> 
```

这会将整个查询与结果一起存储，如下所示：

```
query
CACHED: false 
EXECUTIONTIME: 2031 
SQL: SELECT a.*, p.ek, p.vk, p.x, p.y
    FROM arts a
        LEFT JOIN p ON 
        ...
        LEFT JOIN f ON 
        ... 
        WHERE a.aktiv = "ja"
        AND 
        ... 20 conditions ...

SQLPARAMETERS: [array]
1) ... 20+ parameters

RESULTSET: 
 [Record # 1] 
    a: true
    style: 402
    price: 2.3
    currency: CHF
    ...
 [Record # 2] 
    a: true
    style: 402abc
    ... 
```

每次用户进行新搜索时，这将被覆盖。但是，如果用户想查看其中一项的详细信息，我不需要查询（记录总数和获取一条记录）是否可以从我的临时存储中访问我需要的记录。这样，我将节省两次数据库行程，每次执行时间为**2031**次，以获取我之前已经提取的数据。

权衡是每个用户在 Session.scope 中拥有最多 48 个结果（每页的最大项目数）的结果集。

**我的问题**：
1\. 这是可行的还是我应该重新查询数据库？
2.如果我有一个像上面这样的结构/数组/对象，我如何通过样式编号从中挑选出我需要的记录=我如何访问结果集？我不能只循环存储的查询（现在尝试了一段时间......）。

感谢帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T17:41:08.483

亲吻规则。除非您发现性能确实是一个问题，否则只需重新查询数据库。使用正确的索引，它应该可以很好地扩展。当这是一个问题时，您可以简单地在那里添加查询缓存。

QoQ 会引入开销（在 CF 端，内存和计算），并可能返回陈旧数据（会话中的查询比 DB 上的查询更旧）。我仅在同一视图上使用相同查询时才使用 QoQ，而不是在整个会话时间跨度内使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T17:27:13.237

可行的？是的，这取决于有多少用户以及它在内存中存储了多少数据，这可能比再次访问数据库要好得多。

似乎获得所需单条记录的最佳方法是查询查询。在 CF 中，您可以创建另一个使用现有查询作为数据源的查询。它看起来像这样：

```
<cfquery name="subQuery" dbtype="query">
  SELECT *
  FROM  Session.resultset
  WHERE style = #SelectedStyleVariable#
</cfquery> 
```

请注意，如果您使用的是 CFBuilder，它可能会因为没有数据源而向您发出错误，这是 CFBuilder 中的一个错误，如果您的 DBType 是“查询”，则不需要数据源

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T18:33:43.550

根据记录的数量，我要做的是将详细数据存储在应用程序范围内，作为以 ID 为键的结构。就像是：

```
APPLICATION.products[product_id].product_name
                                .product_price
                                .product_attribute 
```

那么您实际上只需要按需查询项目的 ID。

为了改进“按需”查询，您至少有两个“in code”选项： 1\. 查询查询，您查询整个项目集合一次，然后从中查询您需要的数据。2\. Verity 或 SOLR 索引所有内容，然后您只需在刷新搜索集合时查询所有内容。这比为每个查询执行所有连接要快很多*。*

# script# - 脚本#失败，“类型”未定义

> ID：11475154
> 
> 赞同：1
> 
> 时间：2012-07-13T17:09:49.893
> 
> 标签：script#

我第一次尝试使用 Script# 并不顺利。我的解决方案中有一个从 Internet 模板创建的 mvc 4 项目和一个 script# 库。

在 script# 库中，我有一个在页面上查找元素的类和一个调用此类的页面文件

我已将脚本部署到 mvc 项目中的脚本文件夹

为了测试它，我已经清除了 mvc 项目中的 About 视图并添加了

```
<div>  
      <canvas id="myCanvas" height=500 width=500></canvas>  
     <script type="text/javascript" src="../../Scripts/Moonbeam.js"></script>
</div> 
```

当我在调试中运行程序并单击指向关于页面的链接时，我收到消息

> Microsoft JScript 运行时错误：“类型”未定义

由“已编译”js 文件的第一行抛出

```
(function(){
Type.registerNamespace('Moonbeam'); 
```

显然我错过了一些东西，有人愿意指出吗？

斯图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:02:52.827

请记住在您的页面中添加 mscorlib.js 脚本（在 Moonbeam.js 之前）。它是#script 核心javascript。

# json - 使用 Jquery（使用 zend 框架）的 AJAX 响应包含不需要的 HTML 代码

> ID：11475156
> 
> 赞同：0
> 
> 时间：2012-07-13T17:10:03.373
> 
> 标签：json, zend-framework, jquery

目前，以下代码按预期工作，但如果我在代码中的任何位置添加诸如“LANG：en”之类的回声（假设在引导程序中），以下代码将不再工作，我得到这个 ajax 请求响应：

```
<br/>LANG : en{"response":true,"id":13} 
```

（ajax 响应包含 echo + json 数组），因此我无法打印 id（它将打印：当我尝试访问 data.id 时未定义）。

**我的问题是：如何打印我的调试信息并仍然设法执行 ajax 请求？**

这是我在控制器中的代码：

```
public function init()
{
$this->_helper->ajaxContext->addActionContext('retrievecategories', 'json')->initContext();
}

public function retrievecategoriesAction()
    {
        $this->_helper->layout()->disableLayout(); 
        $this->_helper->viewRenderer->setNoRender(true);
        if ($this->getRequest()->isXmlHttpRequest()) {
        if (isset($_POST['id']))
         $id = $_POST['id'];
        $id+=1;
        echo json_encode(array('response' => true, 'id' => $id));
        }
    } 
```

我的js代码：

```
jQuery(function(){

var obj = {"id":12};

jQuery.ajax({
url: '/search/retrievecategories?json',
type: 'post',
data: obj,
dataType: 'json',
success: function(data){
var id = data.id;
alert(id);
},
error: function(data){
var id = data.id;
alert(id);
}
}); 
```

});

我希望我足够清楚。感谢您的时间 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:57:00.257

如果您回显 JSON 对象以外的任何内容，则 JQuery 解析器将失败，因为响应不再是有效的 JSON。您可以制作一个自定义解析器来解释响应文本并带走离开 JSON 对象的调试信息，或者您可以将调试信息包含在您编码的数组中。

```
json_encode(array('data'=>'data','debug'=>'debug info')) 
```

然后检测是否存在调试字段，并在 console.log() 或 alert() 之后将其从对象中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T11:35:02.600

我强烈建议您阅读有关[firePHP](http://www.firephp.org)的内容。它使用与 Firebug 显示 php 代码中的调试信息相同的控制台。Zend_Log 使用起来非常简单。

# c++ - 如何将 OpenCV 包含到 XCode 4 c++ 项目中？

> ID：11475157
> 
> 赞同：3
> 
> 时间：2012-07-13T17:10:19.670
> 
> 标签：c++, xcode, macos, opencv, xcode4.2

我以前看过这方面的帖子，但似乎没有一个答案对我有用。我刚刚在我的 Mac 上安装了 OpenCV，并让它在命令行中与 g++ 一起正常工作。我使用 Mac 端口安装它：

```
$ sudo port install opencv configure.compiler=llvm-gcc-4.2 
```

要使用 g++ 编译，我使用以下命令：

```
g++ myfile.cpp -o myprogram -I/opt/local/include -L/opt/local/lib -lopencv_core.2.4.2 -lopencv_calib3d.2.4.2 
```

我的 OpenCV 在 main.cpp 文件中包含头文件是：

```
#include "opencv2/opencv.hpp" 
```

一切正常。

现在，当我尝试在 Xcode 中包含该库时，它只是说找不到“opencv2/opencv.hpp”文件。为了在 Xcode 中包含这个库，我遵循了一些详细的说明。首先，对于项目目标，我将 /opt/local/lib 添加到库搜索路径，并将 /opt/local/include、/opt/local/include/opencv 和 /opt/local/include/opencv2 添加到标题搜索构建设置选项卡下的路径。然后我点击 Build Phases，并在 Link Binary With Libraries 中添加了所有 OpenCV .dylib 文件到 /opt/local/lib（全部 11 个）。这没有用。我尝试了许多其他的事情，包括添加到用户搜索路径和为目标设置“其他链接器标志”。没有任何效果。它找不到文件。如果我使用确切的路径（#include "/opt/local/include/opencv2/opencv.hpp"）它可以

OpenCV 的版本是 2.4.2。我在 OS X Lion 10.7.4 上使用 Xcode 4.3.3。这是一个 C++ 项目。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T14:14:08.847

这个问题可以通过进入项目属性并点击目标来解决。在构建设置中搜索“标题搜索路径”。然后在那里添加“/opt/local/include”。通过这样做，您是在告诉 Xcode 也在该目录中查找头文件。现在您可以使用：

> `#include <opencv2/opencv.hpp>`

如果您不想在每次启动新项目时都这样做，您可以将 .h 和 .hpp 文件添加到 Xcode 使用的默认包含目录中。您可以在 Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include 中找到此目录。

您还必须将二进制文件添加到您的项目中。为此，您转到“构建阶段”，然后在“将二进制文件与库链接”部分中添加二进制文件。

我希望这能够帮到你。

# python - 我正在使用 write() 将结果写入文件，但它不包含最后循环的结果

> ID：11475163
> 
> 赞同：0
> 
> 时间：2012-07-13T17:10:43.237
> 
> 标签：python, file, for-loop

简而言之，我有一个类似的代码：

```
for a in range(3):
 result = 'abcd' + a
 opener = open('file.txt', "a")
 print results
 opener.write(results) 
```

我的问题是，如果我在 shell 中运行此代码，我可以看到打印结果，

```
abcd0
abcd1
abcd2 
```

但该文件仅包含，

```
abcd0abcd1 
```

我想要的输出是，

```
abcd0abcd1abcd2 
```

有什么建议么？我找不到这段代码有什么问题...

任何帮助都会非常棒。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T17:27:39.663

Ashwini Chaudhary 的解决方案要好得多，将我的回答视为出错原因和出错原因的背景资料，以及在循环内部或外部打开/关闭文件的区别。

文件的打开和关闭应该是成对的，就像这里，文件在循环内反复打开、写入和关闭：

```
for a in range(3):
    result = 'abcd' + a
    opener = open('file.txt', "a")
    print results
    opener.write(results)
    opener.close() 
```

但是，在许多情况下，由于打开和关闭文件的成本，在循环中打开和关闭文件并不是一个好主意，因此最好在循环之前打开文件，在循环中写入文件，然后循环后关闭它：

```
opener = open('file.txt', "a")
for a in range(3):
    result = 'abcd' + a
    print results
    opener.write(results)
opener.close() 
```

当然，当文件保持打开状态并且循环很长时，如果程序崩溃、中断或重新启动计算机，您就有丢失数据的风险。在这些情况下，强制刷新到操作系统在许多情况下比重复打开/关闭文件更好：

```
opener = open('file.txt', "a")
for a in range(3):
    result = 'abcd' + a
    print results
    opener.write(results)
    opener.flush()
opener.close() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T17:19:29.710

您可能想在完成写入后尝试关闭文件。如果python在文件关闭之前退出，最后一次写入可能不会被刷新，因此不会写入文件。只需尝试添加：

```
opener.close() 
```

到最后。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T17:25:15.887

使用`with()`，因此您不必担心文件的打开和关闭，`with()`一旦程序移出`with`块，就会自动关闭文件。

```
with open('data.txt','a') as opener:
    for a in range(3):
        results = 'abcd' + str(a)
        print results
        opener.write(results) 
```

# asp.net - 为什么验证失败会阻止回发在其他验证组中的控制？

> ID：11475164
> 
> 赞同：1
> 
> 时间：2012-07-13T17:10:47.523
> 
> 标签：asp.net, validation, webforms, postback

我有一个带有多个文本框、按钮和其他控件的 asp.net Web 表单。其中一个按钮应该触发某些文本框中的内容验证。这工作正常，除了如果验证失败，则阻止页面的所有后续回发。修复无效值会消除错误消息，但仍不会发生回发。

验证发生在 AJAX UpdatePanel 中。我不确定这是否重要。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-06-28T00:18:08.010

我很高兴[该解决方法](https://stackoverflow.com/a/11477963/1637462)对您来说很好，但为了其他登陆此页面的人的利益，禁用客户端验证远非可接受的解决方案。所以这里是：

但是，为什么它仅在出现时才发生`UpdatePanel`，我仍然不清楚：

正如其他人所提到的，您遇到的问题很可能是因为不成功的验证尝试阻止了进一步的回发。

另请参阅：[为什么我的表单在验证后不会发回？](https://stackoverflow.com/questions/7769597/why-wont-my-form-post-back-after-validation)

当客户端验证失败时，有一个名为的变量`Page_BlockSubmit`设置为 true：

```
function Page_ClientValidate(validationGroup) {
    ....
    Page_BlockSubmit = !Page_IsValid;
    return Page_IsValid;
} 
```

因此，当 a`__doPostBack`作为 a 的一部分出现时，会进行`OnSelectedIndexChanged`以下`DropDownList`检查：

```
function ValidatorCommonOnSubmit() {
    ....
    var result = !Page_BlockSubmit; /* read the value */
    ....
    Page_BlockSubmit = false; /* reset it */
    return result; 
} 
```

这将第一次阻止，但随后清除标志，因此下一次回发尝试应该有效。

就我而言，对于 a`DropDownList`的`OnSelectedIndexChanged`事件，解决方法是在其客户端`onchange`事件中添加一个片段：

```
<asp:DropDownList runat="server" ID="SomeDropDownList" OnSelectedIndexChanged="AlwaysDoSomething"
   onchange="resetValidationState(this);">
    ....
</asp:DropDownList>
<script type="text/javascript">
    function resetValidationState() {
        // clear any postback blocks, which occur after validation fails:
        window.Page_BlockSubmit = false;
    }
</script> 
```

您可能会逃脱将该片段放入`onchange`自身中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T17:23:46.127

> 除了单击此按钮后，除非已更正验证错误，否则没有其他按钮可以导致回发。因此，不需要验证文本框的 btnDelete 在更正文本框值之前无法回发

使用以下代码看不到这种行为..

```
<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
<asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ErrorMessage="RequiredFieldValidator" ControlToValidate="TextBox1" ValidationGroup="pc">
</asp:RequiredFieldValidator>
<asp:Button runat="server" ID="btnSubmit" Text="Submit"  Width="150" CausesValidation="true" ValidationGroup="pc" />
<asp:Button runat="server" ID="btnDelete" Text="Delete" CausesValidation="false"  /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T18:00:32.127

我可能完全不在这儿——但我想我看到了问题所在。（我主要使用 devexpress 控件，因此规则可能会有所不同）。当验证失败时，整个页面被设置为无效，因此不会发生回发。难道是因为删除按钮没有引起任何验证，在这些编辑器被更改为有效之后它没有重新验证？

# lotus-domino - 设置部分样式以模仿 Lotus Notes 回复历史中使用的样式？

> ID：11475167
> 
> 赞同：2
> 
> 时间：2012-07-13T17:11:03.267
> 
> 标签：lotus-domino, lotus, lotusscript

有没有办法在 Lotusscript 中设置部分的样式？我想模仿莲花笔记中用于回复历史的部分类型。

使用莲花脚本

1.  设置边距，使该部分出现在最左边。

2.  设置部分样式，使其显示为用于回复历史记录的“表样”部分标题。

我可以看到如何设置颜色、字体等。但我看不到如何设置该部分的实际样式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T07:47:18.667

查看您的个人资料，您已经熟悉 Xpages。

如果应用程序不复杂，我会选择 Xpages。由于造型比传统更容易。笔记应用。对我来说就是这样。

这是一个 lotusscript 示例，它在备忘录中创建部分，因为我不确定您正在制作哪种应用程序以及适用于什么平台、笔记、网络或两者兼而有之。

[打破标准](http://www.breakingpar.com/bkp/home.nsf/0/87256B280015193F87256DBA00771DD9)是一个例子，它使用邮件文件和备忘录表单并将部分和文本放在邮件正文中

这是代码

```
 Sub Initialize
   Dim session As New NotesSession
   Dim mailDb As New NotesDatabase("", "")
   Dim ws As New NotesUIWorkspace
   Dim doc As NotesDocument
   Dim body As NotesRichTextItem
   Dim style As NotesRichTextStyle
   Dim color As NotesColorObject

   Call mailDb.OpenMail
   Set doc = mailDb.CreateDocument
   Call doc.ReplaceItemValue("Form", "Memo")
   Set body = doc.CreateRichTextItem("Body")
   Set style = session.CreateRichTextStyle
   Set color = session.CreateColorObject
   Call body.AppendText("This is some text before the section")
   Call body.AddNewline(2)
   Call body.BeginSection("Expanded Section", style, color, True)
   Call body.AppendText("Here is some text within the section")
   Call body.AddNewline(2)
   Call body.AppendText("Here is some more text within the section")
   Call body.EndSection
   Call body.AddNewline(2)
   Call body.AppendText("This is some text between the two sections")
   Call body.AddNewline(2)
   Call body.BeginSection("Collapsed Section")
   Call body.AppendText("Here is some text within the section")
   Call body.AddNewline(2)
   Call body.AppendText("Here is some more text within the section")
   Call body.EndSection
   Call body.AddNewline(2)
   Call body.AppendText("This is some text after the section")
   Call doc.Save(True, False, False)
   Call ws.EditDocument(True, doc)
   Call doc.Remove(True)
End Sub 
```

为了完整起见，这里有一个教程如何从 xpage [Tutorial-Introduction-to-XPages-Exercise-20](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/Tutorial-Introduction-to-XPages-Exercise-20)调用 lotusscript 代理 希望它有所帮助。

编辑：只记得他们在笔记客户端中进行了关于 css 和 html的[调查。](http://www-10.lotus.com/ldd/bpmpblog.nsf/dx/css-html-requests?opendocument&comments)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T15:41:43.150

我认为你能做到这一点的唯一方法是使用 DXL。即，对包含所需样式的部分的文档进行 DXL 导出。编写代码以生成相同的 DXL，使用您需要自定义的任何内容（例如标题）进行修改，然后将其导入新文档。然后编写代码来打开这个新文档，读取包含该部分的富文本项目，并使用 AppendRTItem 将其放入您正在处理的文档中。

# java - ImageIO.read(URL) 需要很长时间

> ID：11475170
> 
> 赞同：3
> 
> 时间：2012-07-13T17:11:03.950
> 
> 标签：java, image, swing, javax.imageio, imageicon

好的，所以我正在尝试从 URL 读取图像，但它并没有真正做任何事情。这是我用来从 URL 检索图像的方法：

```
 public Image getImage(String url){
    try{
        System.out.println("gettingImage");
        return ImageIO.read(new URL(url));
    }catch(Exception e){
        e.printStackTrace();
        return null;
    }
} 
```

我添加了一个 System.out.println() 只是为了确保该方法在我调用它时实际正在执行。

我传递给它的网址是：http: [//i3.kym-cdn.com/photos/images/masonry/000/349/917/065.png](http://i3.kym-cdn.com/photos/images/masonry/000/349/917/065.png)（这是一个有效的网址）

我的输出是这样的：

```
gettingImage 
```

它只是说“gettingImage”（来自我添加的 System.out.println()）并且由于某种原因实际上并没有得到图像。没有堆栈跟踪，只有那个输出。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T17:21:31.537

你永远不应该调用一个需要很长时间才能从主线程内部返回的密集方法，这会冻结你的 GUI。创建一个新[`SwingWorker`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)方法并在其中调用该方法。请参阅此[示例](https://stackoverflow.com/a/11026881/597657)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T18:06:59.550

试试这个....

这个程序只是为了证明**图片是获取**到的，我只是`System.out`在url返回的图片上使用，来证明图片是获取到的。

我还使用了一个**线程**，以便处理密集型工作不在`EDT (Event Dispatcher Thread)`负责 UI 的工作中。

您必须使用**Thread 或 SwingWorker**，否则在 EDT 上执行密集型工作最终会使您的**GUI 无响应......**

```
public class UrlTest
{
    public static void main(String[] args)
    {
        new Thread (new Runnable()
        {
            @Override public void run()
            {
                try
                {
                    URL url = new URL("http://i3.kym-cdn.com/photos/images/masonry/000/349/917/065.png");
                    Image img = ImageIO.read(url);
                    System.out.println(img);
                }
                catch (Exception e)
                {
                    e.printStackTrace();
                }
            }
        }).start();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-14T13:26:38.847

找到了为什么这不起作用的问题：这与我的代码无关，这是因为我的互联网一直闪烁一瞬间，并且无法从那个小闪烁中恢复。我不知道我的互联网一直在闪烁，但我想这是因为当我将它发送给我的一位朋友时，它在他的电脑上运行良好，所以一定是由于互联网连接。感谢您的所有想法。

# php - 不同层次和环境的独白

> ID：11475176
> 
> 赞同：1
> 
> 时间：2012-07-13T17:11:35.870
> 
> 标签：php, symfony

在 app/config/config_dev.yml 我有：

```
monolog:                                                                                                              
    handlers:                                                                                                         
        main:                                                                                                         
            type: stream                                                                                              
            path: /var/log/dev.log                                                                                     
            level: debug 
```

在 app/config/config_prod.yml 我有：

```
monolog:
    handlers:
        syslog:
            type: stream
            path: /var/log/prod.log
            level: error 
```

在我的控制器中，我有

```
$logger = $this->get('logger');

$logger->debug("foo"); 
```

我希望在 dev 中看到调试条目，而在 prod 中只看到错误和以上条目。

但到目前为止，它正在输出所有内容。我该如何调整它，以便针对不同的环境存在不同的级别？

# core-data - 跨不同控制器使用选定的 NSManagedObject

> ID：11475179
> 
> 赞同：1
> 
> 时间：2012-07-13T17:11:38.053
> 
> 标签：core-data, persistence, xcode4.3, nsmanagedobject

我有一个名为 Practice 的实体，我使用一个名为 SelectorViewController 的视图控制器来选择其中一种做法 selectedPractice。然后我将 selectedPractice 返回到一个名为 RegularViewController 的视图控制器，在其中显示一些 selectedPractice 属性。所有这一切都很好。然而，该应用程序还有许多其他视图控制器，可以通过从 RegularViewController 实例的模态 segues 访问这些视图控制器。结果，如果我离开然后返回到 RegularViewController，selectedPractice 将重置为 null。如果之前已在 SelectorViewController 中设置，我还想保存 selectedPractice 以便在应用程序初始化时使用它。如何通过使 selectedPractice 在应用程序中持久化并在运行时可用来实现这一点？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:30:51.443

感谢上面的帖子，这很棒，我设法对其进行了排序。这是我的代码，可能很笨拙，但它确实有效。

首先，当我将 fetchedObjects 加载到 SelectorView 控制器中的 PickerView 中时，我使用以下代码将属性“isSelectedPractice”设置为“NO”：

```
for (Practice *fetchedPractice in [self.fetchedResultsController fetchedObjects]) {
        [fetchedPractice setValue:@"NO" forKey:@"isSelectedPractice"];
        [self.managedObjectContext save:nil]; 
```

然后，我确定了选定的实践：

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {

    Practice *practice = [[self.fetchedResultsController fetchedObjects] objectAtIndex:row];
    self.selectedPractice = practice;
    NSLog(@"The '%@' practice was selected using the picker", self.selectedPractice.name); 
} 
```

当视图 Segue 回到 RegularViewController 时，我将 selectedPractice 的 isSelectedPractice 属性设置为 YES。我保留它这么晚，因为我不希望 PickerView 中的多个选择导致多个对象的 isSelectedPractice YES。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"SavedPractice Segue"])
    {
        [self.selectedPractice setValue:@"YES" forKey:@"isSelectedPractice"];
        [self.managedObjectContext save:nil];
        NSLog(@"Setting SelectedPractice as '%@' in RegularViewController with isSelectedPractice as '%@'",self.selectedPractice.name,self.selectedPractice.isSelectedPractice );
        RegularViewController *rvc= segue.destinationViewController;
        rvc.delegate = self;
        rvc.selectedPractice = self.selectedPractice;

    }
    else {
        NSLog(@"Unidentified Segue Attempted!");
    }
} 
```

然后我在 RegularViewController 的 setupFetchedResultsController 方法中设置以下 Predicate：

```
request.predicate = [NSPredicate predicateWithFormat:@"isSelectedPractice = %@", @"YES"]; 
```

非常感谢您的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:16:31.477

在没有看到您的实际项目的情况下，我知道一种可行但可能有点过于圆滑的方法是向您的实体添加一个属性“isSelectedPractice”。您可以将其设为 BOOL，但我在 Core Data 中与 BOOL 的结果不同，我更喜欢将其保留为 NSString 并将其设置为“是”或“否”。然后，当您将其拉下时，对其进行修改或将其作为实体添加到核心数据中，并将 isSelectedPractice 设置为“是”。然后在你的其他控制器中，做一个

```
if (self.managedObjectContext == nil) {
    self.managedObjectContext = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];
} 
```

然后执行获取请求以获取具有谓词的实体，该谓词正在寻找 isSelectedPractice 等于“是”。如果您需要有关如何执行此操作的实际代码示例，请告诉我，我将对其进行编辑。

# c# - 通过 C# 返回二维数组

> ID：11475180
> 
> 赞同：0
> 
> 时间：2012-07-13T17:11:47.080
> 
> 标签：c#, javascript, matrix, odbc, multidimensional-array

我正在从数据库中获取内容并通过 Javascript 将其返回以进行 Ajax 处理。很简单的东西。这里的问题是我似乎找不到循环数据的好方法，而且 MSDN 文档的 odbcreader 方法非常糟糕。

```
using (OdbcCommand com = new OdbcCommand("SELECT * FROM pie_data WHERE Pie_ID = ?",
 con)) {
  if (Request.Form["reference_id"] == "") {
    returnError();
  } else {
    com.Parameters.AddWithValue("", Request.Form["reference_id"]);
    com.ExecuteNonQuery();
    using (OdbcDataReader reader = com.ExecuteReader()) {
      string finalstring = "";
      while (reader.Read()) {
        if(reader.HasRows) {
          finalstring = reader.GetString(9) + ",";
          for (int i = 0; i <= 8; i = i + 1) {
            finalstring = finalstring + reader.GetValue(i).ToString() + ",";
          }
          finalstring = finalstring + "|";
          reader.NextResult();
        }
      }
      if (finalstring != "") {
        finalstring = finalstring.Remove(finalstring.Length -1, 1);
        Response.Write(finalstring);
      }
    }
    noredirect = 1;
  }
} 
```

但是，这里是示例输出：

```
00001,0,Pie Johnson,piesaregreat@yum.com,,,10/7/2010 12:00:00 AM,Bakery,N/A,N/A, 
```

如您所见，第二个分隔符根本没有出现，而它确实应该出现。此外，当在 heidisql 中运行时，此查询返回大量行，而不仅仅是这一结果。一旦我将它传递给 Javascript，我就可以弄清楚，因为我在这方面有更多的经验，而且我之前实际上已经通过 PHP 做到了这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:29:44.220

我会使用 a`DataTable`和 a `DataAdapter`：

```
String finalString;
var tblPieData = new DataTable();
using(var con = new OdbcConnection(connectionString))
using (OdbcDataAdapter da = new OdbcDataAdapter("SELECT * FROM pie_data WHERE Pie_ID = ?", con))
{
    da.SelectCommand.Parameters.AddWithValue("Pie_ID", reference_id);
    da.Fill(tblPieData);
    var rowFields = tblPieData.AsEnumerable()
                              .Select(r => string.Join(",", r.ItemArray));
    finalString = string.Join("|", rowFields);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T17:18:18.227

这一行：

`finalstring = finalstring.Remove(finalstring.Length -1, 1);`

将删除您的管道分隔符的最后一个实例，因此如果只有一条记录（似乎有），您不应该看到一条。

除非我错过了什么……

**编辑**

实际上，如果您要查找两条记录，您可能会丢失第二条记录，因为您的循环`while(reader.Read())`以`reader.NextResult();`. 这些都会使读者进步，导致您错过所有其他记录。

**编辑 2**

您也在`finalstring`每次迭代中覆盖；你可能想附加到这个（`StringBuilder`如果你不知道有多少记录期望的话，为了提高效率，让它成为最有意义的。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T17:21:07.587

您正在循环的每次迭代中替换 finalstring 的值。这将只返回单行的值：

```
finalstring = reader.GetString(9) + ","; 
```

以及在每次迭代结束时通过行中的列删除最后一个字符（管道，而不是我期望的尾随逗号）：

```
finalstring = finalstring.Remove(finalstring.Length -1, 1); 
```

编辑：

看起来您通过在 reader.Read() 上循环以及调用 reader.NextResult() 都跳过了所有其他记录

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T17:29:45.527

您与阅读器的循环结构似乎存在一些问题，其中最重要的是在循环中重置 finalAnswer 并结合使用 .Read() 和 .NextResult 仅给您一个*结果*：

建议的修复...未经测试，因此所有标准警告都适用:)：

根据 Mark Averius 的评论和原始意图的 OP 确认进行编辑：

```
using (OdbcDataReader reader = com.ExecuteReader()) {
  if (reader.HasRows())
  {
    string finalstring = "";
    while (reader.Read()) {
      finalstring = finalstring + reader.GetString(9) + ",";
      for (int i = 0; i <= 8; i++) {
        finalstring = finalstring + reader.GetValue(i).ToString() + ",";
      }
      finalstring = finalstring + "|";
    }
    if (finalstring != "") {
      finalstring = finalstring.Remove(finalstring.Length -1, 1);
      Response.Write(finalstring);
    }
  } 
```

}

# java - JAX-WS Web 服务线程安全和性能问题

> ID：11475181
> 
> 赞同：3
> 
> 时间：2012-07-13T17:11:50.933
> 
> 标签：java, multithreading, web-services, thread-safety, jax-ws

我从其他一些帖子和我对 JAX-WS Web 服务的理解中了解到它们不是线程安全的。我的 Web 服务将被 100 个客户端调用，我们需要能够处理大约 200 个事务/秒。

我的 Web 服务将与数据库交互以执行其工作，如果我在访问数据库的代码周围引入 synchronized 关键字，我基本上将确保一次只有一个线程访问数据库，我想知道我是否仍然能够在这种情况下达到所需的吞吐量。在此先感谢您的帮助。

我被告知实际上将数据库访问工作移到另一个类中并在方法级别实例化该类，这样我就不需要使用同步关键字并且仍然实现线程安全。那是对的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T17:14:06.227

如果您需要事务和线程安全，为什么不直接使用 EJB 作为您的 JAX-WS 端点？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T17:52:10.553

我们需要有关该应用程序的更多信息。

一般来说 - 对于你描述的情况下的性能+我推荐的数据库访问。

1.  仔细规划您的数据库 - 尽可能/有意义的索引，使用视图等......
2.  尝试使用具有良好锁定机制（每行锁定）的数据库。这样，当两个请求访问不同的行时，您将不会受到整个表锁定的影响。
3.  让您的交易尽可能短。如果使用 EJB - 确保“读取数据”方法的事务范围不是Required 或RequiredNew（这可能会导致打开事务）。
4.  如果您确实使用同步 - 小心使用正确的锁。不要试图自动使用“同步”作为最容易编码的方法。尽可能考虑使用 ReaderWriterLock。
5.  考虑在可能的情况下使用缓存，但要仔细计划这一点，以便您的流程处理“相关”数据。

从这些方向开始——我想你会看到你可以像这样实现你的绩效目标。

# c# - 如何在 Orchard 中运行计划任务？

> ID：11475187
> 
> 赞同：4
> 
> 时间：2012-07-13T17:12:16.743
> 
> 标签：c#, asp.net, .net, timer, orchardcms

我必须每 5 小时运行一次自动化作业。

我发现这篇关于如何使用 IScheduledTaskHandler 和 IScheduledTaskManager 创建计划任务的帖子。 [使用 Orchard CMS 的计划任务](https://stackoverflow.com/questions/8916146/scheduled-tasks-using-orchard-cms)

我复制了相同的代码，在 Process 函数中添加了我的服务调用。它编译得很好。但我不确定我是否必须“启动”这个计划任务，比如启动 Windows 服务。构建解决方案后会自动获取它吗？如果我想在 5 小时内完成这项工作，时间什么时候开始？如果我想停止/暂停，我该怎么做？

谢谢。

编辑：

如果我尝试使用任务处理程序启用自定义模块，我会遇到异常。

异常详细信息：System.ArgumentNullException：值不能为空。参数名称：来源

```
Line 241: var shellContext = _shellContexts.FirstOrDefault(c => c.Settings.Name == settings.Name); 
```

源文件：\orchard-1.4\src\Orchard\Environment\DefaultOrchardHost.cs 行：241

_shellContexts 出现为空。如果我从项目/模块中删除任务处理程序类，一切正常。

这是任务处理程序代码。

```
public class ScheduledTaskHandler : IScheduledTaskHandler
{
    private const string TaskType = "MyTaskUniqueID";
    private readonly IScheduledTaskManager _taskManager;
    private readonly IMyService _myService;

    public ILogger Logger { get; set; }

    public ScheduledTaskHandler(IScheduledTaskManager taskManager, IMyService myService)
    {
        _myService = myService;
        _taskManager = taskManager;
        Logger = NullLogger.Instance;
        try
        {
            DateTime firstDate = new DateTime().AddMinutes(5);
            ScheduleNextTask(firstDate);
        }
        catch (Exception e)
        {
            this.Logger.Error(e, e.Message);
        }
    }

    public void Process(ScheduledTaskContext context)
    {
        if (context.Task.TaskType == TaskType)
        {
            try
            {
                _myService.RunJob();
            }
            catch (Exception e)
            {
                this.Logger.Error(e, e.Message);
            }
            finally
            {
                DateTime nextTaskDate = new DateTime().AddHours(5);
                ScheduleNextTask(nextTaskDate);
            }
        }
    }

    private void ScheduleNextTask(DateTime date)
    {
        if (date > DateTime.UtcNow)
        {
            var tasks = this._taskManager.GetTasks(TaskType);
            if (tasks == null || tasks.Count() == 0)
                this._taskManager.CreateTask(TaskType, date, null);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T18:18:46.347

当您启动应用程序时，时钟会自动开始计时 - 您无法停止/暂停它。

调度程序以 1 分钟的间隔运行 - 它检查是否有现在应该运行的任务并运行它们。任务被存储在数据库中 - 相应的记录总是在任务执行即将开始之前被删除（以确保给定任务将只运行一次）。

如果您需要运行周期性作业，则需要在前一个任务完成后创建一个新任务（如您链接到的示例中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T11:04:10.910

如果有人感兴趣，我只是从 ScheduledTaskHandler 中删除了启动代码。下面我把一些控制器构造函数

```
private void ScheduleStartTask() {
    var tasks = _scheduledTaskManager.GetTasks(TaskType);
    if (tasks == null || tasks.Count() == 0) {

        var date = _clock.UtcNow.AddSeconds(5);

        _scheduledTaskManager.CreateTask(TaskType, date, null);
    }
} 
```

在处理程序上

```
public void Process(ScheduledTaskContext context) {
        if (context.Task.TaskType == TaskType) {
            try {

                var x = "kuku";

            } catch (Exception e) {
                this.Logger.Error(e, e.Message);
            } finally {

                this.ScheduleNextTask();
            }
        }
    }

    private void ScheduleNextTask() {
        var date = _clock.UtcNow.AddSeconds(5);
        _taskManager.DeleteTasks(null, a => a.TaskType == TaskType);
        _taskManager.CreateTask(TaskType, date, null);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:25:52.070

使用 ILoggerFactory 而不是 ILogger，然后从中获取 Logger 实例。

```
public ScheduledTaskHandler(IScheduledTaskManager taskManager,ILoggerFactory LoggerFactory, IMyService myService)
    {
        _myService = myService;
        _taskManager = taskManager;
        Logger = NLoggerFactory.CreateLogger(typeof(ScheduledTaskHandler));;
        try
        {
            DateTime firstDate = new DateTime().AddMinutes(5);
            ScheduleNextTask(firstDate);
        }
        catch (Exception e)
        {
            this.Logger.Error(e, e.Message);
        }
    } 
```

# c++ - 在 C++ 中使用对象和模板

> ID：11475188
> 
> 赞同：0
> 
> 时间：2012-07-13T17:12:23.240
> 
> 标签：c++, templates

我有一个带模板的课程：

```
template<class T> class MyClass {
public:
      MyClass() { _genericObj = new T; }
      ~MyClass() { delete _genericObj; }
      void doSomething() { _genericObj.do(); }
private:
      T* _genericObj;
}; 
```

另一个类：

```
class AnotherClass {
public:
     AnotherClass(MyClass &obj) { this->_obj = obj; }
     ~AnotherClass() {  }
     doMagic() { _obj->doSomething(); }
private
     MyClass* _obj;
} 
```

在 AnotherClass 中使用没有角括号的 MyClass 实例是否正确（为了一般性）？如果这个例子是错误的，我该如何更正我的代码？非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:15:38.647

您必须通过为 指定模板参数来决定是否需要具体类型，`MyClass`或者您是否也想`AnotherClass`成为类模板。您还有一个问题，您`MyClass`在构造函数中传递了对某种类型的引用，但您正在尝试初始化指向它的指针。解决这个问题的方法实际上取决于您想要实现的目标，这些示例假设您`AnotherClass`将拥有一个动态分配的类型对象`MyClass<SomeType>`：

```
class AnotherClass {
public:
     AnotherClass(MyClass<int> &obj) { this->obj_ = new MyClass<int>(obj); }
     ~AnotherClass() { delete obj_; }
     doMagic() { obj_->doSomething(); }
private
     MyClass<int>* obj_;
} 
```

或者

```
template <typename T>
class AnotherClass {
public:
     AnotherClass(MyClass<T> &obj) { this->obj_ = new MyClass<T>(obj); }
     ~AnotherClass() {  delete obj_;} 
     doMagic() { obj_->doSomething(); }
private
     MyClass<T>* obj_;
} 
```

请注意，在 C++ 中，以下划线开头的名称是为实现保留的，因此我`_obj`将`obj_`.

# ember.js - Ember.js - 如何在嵌套集合中绑定控制器？

> ID：11475191
> 
> 赞同：3
> 
> 时间：2012-07-13T17:12:28.753
> 
> 标签：ember.js

我正在学习 ember.js，我还没有用它构建任何东西。

我将数据存储在模型对象中，并使用控制器充当视图和模型之间的粘合剂。控制器将内容设置为模型的实例，并且视图绑定到控制器中的内容（因此通过代理绑定到模型）。像这样：

```
// js
App.MyModel = Ember.Object.extend({foo:''});
App.myController = Ember.Object.create({
    content: App.MyModel.create()
});

// html
{{view Ember.TextInput valueBinding="App.myController"}} 
```

到现在为止还挺好。但我不知道如何将此范例应用于嵌套集合：

```
//js
App.ChildController = Ember.ArrayController.extend();
App.NestedModel = Ember.Object.extend({
    init: function() {
        this._super();
        this.set('children', []);
        // Here: I can't give a global name for the content binding, and I don't know how to give a relative one
        this.set('childController', App.ChildController.create({contentBinding: 'children');
    }
});
App.myController = Ember.ArrayController.create({
    content:[],
    newChild: function() {
        this.pushObject(App.NestedModel.create());
    }
});

// html
{{#collection contentBinding="App.myController"}}
    {{#collection contentBinding="content.childController"}} <!-- nope -->
        {{content.childField}}
    {{/collection}}
{{/collection}} 
```

这是您可以摆弄的东西：http: [//jsfiddle.net/DwheG/](http://jsfiddle.net/DwheG/)

我要问的是：

1.  我什至正确地建模东西吗？
2.  如何绑定子控制器的内容？我必须使用字符串吗？传入对象 ( `this`) 对我不起作用。Ember 的路径解析算法是否记录在任何地方？
3.  如何将嵌套集合助手绑定到嵌套控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T05:31:53.853

我阅读了源代码并确认只能使用路径指定绑定。

Ember 用于`getPath(root, path)`解析路径。`root`是开始查找的对象，路径是一个字符串。如果路径是全局的，则可以省略根元素（在这种情况下，根元素将设置为`window`）。因此，例如，`getPath(myController, 'foo.bar')`将`myController.foo.bar`在评估时返回。

所以：鉴于我需要以某种方式引用我的数组的包含对象以创建绑定，并且没有内置工具来执行此操作，我只是在我的模型中添加了对包含对象的引用。见这里：http: [//jsfiddle.net/CP448/1/](http://jsfiddle.net/CP448/1/)

# javascript - 无法保存来自 Google 地图的坐标变量 [object HTMLInputElement]

> ID：11475192
> 
> 赞同：1
> 
> 时间：2012-07-13T17:12:28.973
> 
> 标签：javascript, google-maps

```
<script>
var lat ;
if(true) {
        navigator.geolocation.getCurrentPosition(GetLocation);
        function GetLocation(location) {
            var lat = location.coords.latitude;
        }           
};  

alert(lat);
 </script> 
```

现在我得到 [object HTMLInputElement] ，我在这里做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T08:25:23.523

问题是，您在函数中声明了一个具有相同名称的变量，这意味着您有两个变量，一个全局变量和一个局部变量。因此，当您警告全局变量时，它没有被设置为任何东西。

您需要做的就是从函数中删除 var 关键字：

```
// global or other scope

var lat, firstUpdate = false;

if(true) {
    navigator.geolocation.getCurrentPosition(GetLocation);
    function GetLocation(location) {

        // don't use var here, that will make a local variable
        lat = location.coords.latitude;

        // this will run only on the first time we get a location.
        if(firstUpdate == false){
           doSomething();
           firstUpdate = true;
        }

    }           
};  

function doSomething(){
    alert(lat);
} 
```

**编辑：**

我已经编辑了答案，以展示如何确保在找到第一个修复程序后调用函数。

# php - cURL Failing Due To SSL Cert Rejection?

> ID：11475195
> 
> 赞同：0
> 
> 时间：2012-07-13T17:12:34.510
> 
> 标签：php, ssl, curl, ssl-certificate

I am managing a beta website in which just a handful of trial users (3 out of 20) are unable to see the content on certain pages. Every users is using a different computer, on different networks. I've made sure that the 3 users have JavaScript enabled, but that does not solve the issue.

Delving deeper, it looks like the lack of content is due to a cURL call failing; for these users, it appears that curl_exec() is either failing, or returning no data, which in turn returns a null result, which is why they are not seeing any info. For these 3 users, this problem exists across 3 separate browsers (Chrome, IE, Firefox). I have verified that it is not due to any user settings, like user ID, since I can log into their accounts from multiple computers on different networks and get a response.

I think the culprit may be the way their machines/networks handle SSL certs. I am not well versed in SSL certs, so please excuse my ignorance or glaring mistakes in some areas. However, process of elimination leads me to believe that the website cert is being rejected by the networks/machines of these 3 users, and because of this the cURL call is failing. My questions are how can I verify that this is the case, what would be the cause if so, and how can I resolve the problem?

The website is built with PHP using the Zend frameowrk. Here is the relevant bit of code:

```
$ssl_cert = ZendGA_Global::getOption('curl_ssl_certificate');
$ssl_verify_peer = ZendGA_Global::getOption('curl_ssl_verify_peer');
$ssl_verify_host = ZendGA_Global::getOption('curl_ssl_verify_host');

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch, CURLOPT_URL, $url);   
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

// related to SSL cerificate verification
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, $ssl_verify_host);
curl_setopt($ch, CURLOPT_CAINFO, $ssl_cert);

//execute post
$result = curl_exec($ch);

//close connection
curl_close($ch); 
```

Any help would be greatly appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T21:31:36.443

我已经解决了这个问题：cURL 调用失败了，但仅仅是因为 URL 不正确，这是一个源自其他地方的问题。URL 是从基本 URL 加上一些参数创建的，但获取基本 URL 的函数是获取主机名而不是域名。一些用户通过 VPN 登录，这导致主机名的读取略有不同，这就是 URL 错误的原因。好的，这相当令人费解，但问题已经解决。:-)

# javascript - Selection range deleteContents leaves empty nodes?

> ID：11475196
> 
> 赞同：1
> 
> 时间：2012-07-13T17:12:36.687
> 
> 标签：javascript, html, selection, range

I have a script to wrap html tags around the selection.

```
function wrap(tagName)
{
var selection;
var elements = [];
var ranges = [];
var rangeCount = 0;

if (window.getSelection)
{
    selection = window.getSelection();
    if (selection.rangeCount)
    {
        rangeCount = selection.rangeCount;
        for (var i=0; i<rangeCount; i++)
        {
            ranges[i] = selection.getRangeAt(i).cloneRange();
            elements[i] = document.createElement(tagName);
            elements[i].appendChild(ranges[i].cloneContents());
            ranges[i].deleteContents();
            ranges[i].insertNode(elements[i]);
            ranges[i].selectNode(elements[i]);
        }
        selection.removeAllRanges();
        for (var i=0; i<ranges.length; i++)
        {
            selection.addRange(ranges[i]);
        }
    }
}
} 
```

It works fine, but when I try to select the following text and wrap tags around the following code

```
<strong>W</strong>elcom<strong>e</strong> 
```

The code changes to

```
<strong></strong><u><strong>W</strong>elcom<strong>e</strong></u><strong></strong> 
```

instead of

```
<u><strong>W</strong>elcom<strong>e</strong></u> 
```

I have inspected the code with firebug and it goes wrong at the function `deleteContents()`. The function deleteContents() leaves two empty nodes `<strong></strong>` so it doesn't delete the whole content. How does this happen?

# ms-access - Display the result of a stored procedure in a Recordset on a form

> ID：11475198
> 
> 赞同：0
> 
> 时间：2012-07-13T17:12:40.637
> 
> 标签：ms-access, vba, recordset

The following code run a stored procedure based on a combobox that is selected in a form. I need to display the results in a form in Access. Here is the code:

```
Dim Cmd1 As ADODB.Command
Dim lngRecordsAffected As Long
Dim rs1 As ADODB.Recordset
Dim intRecordCount As Integer
'-----
Dim cnnTemp As ADODB.Connection
Set cnnTemp = New ADODB.Connection
cnnTemp.ConnectionString = "DRIVER=SQL Server;SERVER=****;" & _
"Trusted_Connection=No;UID=****;PWD=****;" & _
"Initial Catalog=IKB_QA;"
'Open Connection
cnnTemp.Open
Set Cmd1 = New ADODB.Command
Cmd1.ActiveConnection = cnnTemp
'---
With Cmd1
Dim localv As Integer
localv = [Forms]![start]![Selection]![cat_code]
.CommandText = "dbo.ix_spc_planogram_match"
.CommandType = adCmdStoredProc
.Parameters.Refresh
.Parameters("@catcode").Value = localv

Set rs1.Open = Cmd1.Execute(localv)
End With
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T21:22:09.847

我不清楚你在这个问题的哪一部分遇到了麻烦，但也许它是绑定部分。

您可以使用以下代码将表单绑定到 ADO 记录集：

```
Set Me.Recordset = rs1 
```

只需确保您的表单具有绑定到将在您的记录集中的字段的控件。

# c++ - function called from .cpp file which is defined in in .c file

> ID：11475200
> 
> 赞同：2
> 
> 时间：2012-07-13T17:12:43.497
> 
> 标签：c++, c, linux

In projectA.vcproj

## fileA.h

```
#ifdef __cplusplus
extern "C" {
#endif
void functionA();
#ifdef __cplusplus
}
#endif 
```

## fileA.c

```
void functionA()
{
//function defined
} 
```

In projectB.vcproj:

## fileB.h

```
void functionB() ; 
```

## fileB.cpp

```
#include "fileA.h"
#include "fileB.h"
void functionB() {
    functionA(); // error: undefined reference to 'functionA'
} 
```

I am getting the error when I compile my code on Linux, please help me fix this.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T17:23:30.417

您必须将文件链接在一起。

```
源代码---编译--->目标文件---链接--->应用

文件A.c ------------+
                    |---> 文件A.o ---------+
                +---+ |
                | |
fileA.h --------+ +--> a.out
                | |
                +---+ |
                    |---> 文件B.o ---------+
文件B.cpp ----------+

```

成功编译后，链接器会给出“未定义对 XXX 的引用”错误消息。

您需要确保所有文件都链接在一起。

```
$ ls
文件A.c 文件A.h 文件B.cpp 文件B.h
$ gcc -c fileA.c 
$ g++ -c fileB.cpp
文件A.c 文件A.h 文件A.o 文件B.cpp 文件B.h 文件B.o
$ g++ 文件A.o 文件B.o 
$ ls
a.out 文件A.c 文件A.h 文件A.o 文件B.cpp 文件B.h 文件B.o

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T17:15:59.330

错误消息可能来自链接器，因此您需要确保编译两个源文件并正确链接它们：

```
gcc -c fileA.c
g++ -c fileB.cpp
g++ -o program fileB.o fileA.o 
```

当然，您应该确保`fileA.c`包含`fileA.h`. 如果您省略了标头，`fileA.c`并且如果您使用以下方法编译代码：

```
g++ -c fileA.c                       # g++ instead of gcc
g++ -c fileB.cpp
g++ -o program fileB.o fileA.o 
```

然后您将获得缺少的引用，因为`g++`将创建一个 C++ 链接`functionA()`，但期望调用一个 C 链接`functionA()`。

但是，您不应该使用`g++`;编译 C 代码。那是自找麻烦。

* * *

当最初被问到时，`fileB.cpp`不包括任何标题。

### 文件B.cpp

```
#include "fileB.h"
#include "fileA.h"  // Provide extern "C" declaration of functionA()
void functionB() {
    functionA();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T17:16:29.940

你需要在functionB的头文件中包含functionA的头文件。所以在 fileB.h 添加行 #include "fileA.h"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T17:16:59.720

你如何编译？

```
gcc filea.c fileb.cpp 
```

应该做的伎俩。

# iphone - How to prevent images saved to photo library from being resized/scaled to full screen?

> ID：11475203
> 
> 赞同：0
> 
> 时间：2012-07-13T17:13:02.040
> 
> 标签：iphone, camera, uiimage, photos, alassetslibrary

Here is the deal, I have tried using both of the methods shown below to save an image to the photo library. Upon saving the image successfully and launching the Photos App to take a look at the image, the app automatically scales/resizes the image to full screen.

Is there any way to prevent this? It is annoying because to see the whole image the user needs to pinch the image out to show the whole thing. I have noticed a few of the more popular camera apps do not have this issue when saving to the photo library. I am curious what method they are using.

```
//Save to Photo Library;
ALAssetsLibrary* library = [[ALAssetsLibrary alloc] init];
//CIImage *ciImage = image.CIImage;
[library writeImageToSavedPhotosAlbum:finalImage.CGImage
                          orientation:ALAssetOrientationUp
                      completionBlock:^(NSURL *assetURL, NSError *error) {
                          NSlog(@"Done");
                      }];

Save to Photo Library;
UIImageWriteToSavedPhotosAlbum(savedPhoto,nil,nil,nil); 
```

Thank you for your help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T03:08:36.970

在做了一些研究之后，这个问题没有解决方案。照片应用程序会自动放大图像以填满屏幕。

感谢所有的回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T19:42:56.750

如果您查看 Apple 的 FrogScroller 示例应用程序，您会看到它们最初会首先加载低分辨率的图像，然后在缩放时使用由函数设置大小的 CATiledLayer `setMaxMinZoomScalesForCurrentBounds`。

您可能想查看 WWDC 2010 的 scrollViews 视频以及 2011 以了解更多信息。乔希和伊丽莎很好地解释了发生了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T03:29:26.370

为什么不在保存之前将图像分层到具有清晰背景的全屏图像上？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T02:57:51.353

保存图像应该没问题。

我认为您可以在使用图像时设置 UIView 属性 UIViewContentMode。

```
typedef enum {
UIViewContentModeScaleToFill,
UIViewContentModeScaleAspectFit,      // contents scaled to fit with fixed aspect. remainder is transparent
UIViewContentModeScaleAspectFill,     // contents scaled to fill with fixed aspect. some portion of content may be clipped.
UIViewContentModeRedraw,              // redraw on bounds change (calls -setNeedsDisplay)
UIViewContentModeCenter,              // contents remain same size. positioned adjusted.
UIViewContentModeTop,
UIViewContentModeBottom,
UIViewContentModeLeft,
UIViewContentModeRight,
UIViewContentModeTopLeft,
UIViewContentModeTopRight,
UIViewContentModeBottomLeft,
UIViewContentModeBottomRight, 
```

} UIViewContentMode;

希望能帮助到你。

# iphone - When are each of these iOS backgrounding delegate methods called?

> ID：11475206
> 
> 赞同：0
> 
> 时间：2012-07-13T17:13:10.300
> 
> 标签：iphone, background, terminate

I am confused which of these iOS delegate methods are called in which situations:

```
- (void)applicationWillResignActive:(UIApplication *)application {
}

- (void)applicationDidEnterBackground:(UIApplication *)application {
}

- (void)applicationWillEnterForeground:(UIApplication *)application {
}

- (void)applicationDidBecomeActive:(UIApplication *)application {
}

- (void)applicationWillTerminate:(UIApplication *)application {
    } 
```

I've tried messing around with them because I want my app to do some actions right before it exits if the home button was pressed and also once when the app re-opens. Could anyone give me a quick summary of when to use each one of these/when they are called in my app?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:24:19.037

Apple 自己的描述是最好的，你会在 Xcode 的每个模板应用程序中找到它。

```
- (void)applicationWillResignActive:(UIApplication *)application
{
    // Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
    // Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
    // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    // Called as part of the transition from the background to the active state; here you can undo many of the changes made on entering the background.
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
}

- (void)applicationWillTerminate:(UIApplication *)application
{
    // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T17:25:15.403

```
- (void)applicationWillResignActive:(UIApplication *)application {
// Home button was pressed! Do some actions here!
}

- (void)applicationDidEnterBackground:(UIApplication *)application {
// Your app is now running in the background. It is no longer visible.
}

- (void)applicationWillEnterForeground:(UIApplication *)application {
// Your application was running in the background, but is now being re-opened
}

- (void)applicationDidBecomeActive:(UIApplication *)application {
// You application is now once again active
}

- (void)applicationWillTerminate:(UIApplication *)application {
// Your application is about to QUIT.
    } 
```

# javascript - 查看是否默认选中复选框

> ID：11475211
> 
> 赞同：0
> 
> 时间：2012-07-13T17:13:29.760
> 
> 标签：javascript, jquery

我有一个javascript函数，每次单击复选框时都会设置一个变量：

```
 function handleClick(cb) {
         alert('entered function');
          setTimeout(function () {

        if (cb.checked ) {
               $("#IsChecked").val('true');
           }
            else
               $("#IsChecked").val('false');

        alert('now my value is: '+ $("#IsChecked").val());
       }, 0);
   } 
```

这是我的复选框：

```
 <input id="MyCheckBox" type="checkbox" value="true" onclick="handleClick(this);" 
  name="MyCheckBox" checked="checked"> 
```

每次选中复选框时，这都很有用。但是现在我需要知道当用户单击一个按钮并且之前从未触摸过该复选框时是否选中了该复选框。所以我这样做：

```
 $(document).ready(function () {
    $("#IsChecked").val('default');

    $('#btnCheck').click(function (e) {
        var isComplete = $("#IsChecked").val();
        if (isComplete == 'default') {
            var cb = $('#MyCheckBox');
            handleClick(cb);
         alert('after handleClick ischecked is: ' + $("#IsChecked").val());
         }
     }); 
```

});

当我单击我的按钮并默认选中复选框时，我会按以下顺序收到这些警报：

```
 entered function
 after handleClick ischecked is: default
 now my value is: false 
```

如果我选中复选框来切换它，我会按预期收到这些警报：

```
 entered function
 now my value is: false 
```

在我的 handleClick 事件中，setTimeout 是因为 IE 而存在的，所以我无法摆脱它。我如何检查是否选中了复选框而无需单击复选框本身？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T17:21:05.917

> 我如何检查是否选中了复选框而无需单击复选框本身？

`$('#MyCheckBox').prop('checked')`将随时告诉您该复选框是否已选中。

但是，如果您不仅想测试其状态，还想执行您的`handleClick`函数，请注意该函数需要一个**DOM 元素**，而不是 jQuery 对象作为参数。
如果您将 jQuery 对象传递给您的函数，那么`cb.checked`将始终评估为`false`，因为 jQuery 对象没有`checked`属性（只有 DOM 元素有）。

您必须将函数调用更改为：

```
handleClick(cb.get(0)); 
```

从 jQuery 对象中提取 DOM 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T17:17:51.503

如果您想从按钮单击事件中检查该复选框。

```
$("#IsChecked").is(':checked'); //returns boolean 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T17:18:30.837

```
 How can i check to see if a checkbox is checked without having to click 
```

您可以使用 val() 方法查看是否在带有 click 事件的 javascript 中选中了复选框

```
$("#MyCheckBox").is(':checked')​​​​​​ 
```

# tridion - Tridion DTAP Clarified - How many Content Delivery setups do I need?

> ID：11475217
> 
> 赞同：4
> 
> 时间：2012-07-13T17:14:05.353
> 
> 标签：tridion

I asked about developer setup for Tridion DTAP (development, test, acceptance, and production) [in this other question](https://stackoverflow.com/questions/11166754/proper-dtap-setup-for-content-delivery), but understand the example didn't match a typical DTAP scenario.

Chris Summers explains the CM-side well in his [Fifth Tridion Environment post](http://www.urbancherry.net/blogengine/post/2010/02/06/The-Fifth-Environment.aspx). But for clarity, could I get help understanding the ideal setup?

## CMS environments

*   D = Development
*   T = Test
*   A = Acceptance
*   P = Production

I understand typical authors only use Production and publish from CMS Production to "Live" and "Staging." The other environments are for development.

## CD?

**Does "Live and Staging" apply to each of the other environments--does that mean 8 content delivery setups (per website)?**

And if so, where is it okay to consolidate--fewer CMS environments? Fewer target types?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T17:20:11.657

I believe you should have Live and Staging in every environment - The main reason I see for this (assuming you use SiteEdit in your staging environment only), is to validate that SiteEdit syntax is output only to the correct targets.

It is not uncommon to have code which checks which target you are publishing to, and alters the output accordingly. If this is the case, it is essential to test with the same collection of targets and target types that the production environment has.

Additional reasons for having matching target setups in the lower environments may include the need to validate security models where you give rights to deploy to certain targets to distinct users or groups, and if you are using the "Minimal Level of Approval" feature on targets when combined with workflow.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T17:24:22.767

Yes. This is the model what the enterprises want and we often build this as a practice so consistent environment model is maintained across all environments.

SiteEdit/Workflow plays a big role on Staging environment and must have in all the environment if they are being used.

Can you consolidate CMS environments? obviously yes with more target types/CDs but there are implications on your DTAP model. (e.g.; combining CMS for QA & UAT ).

# bash - 为什么我在传递引用的参数时得到“/bin/sh：参数列表太长”？

> ID：11475221
> 
> 赞同：29
> 
> 时间：2012-07-13T17:14:29.737
> 
> 标签：bash, shell, command-line, arguments, quoting

一个命令行可以传递多长时间`sh -c ''`？（在 bash 和 bourne shell 中）

该限制远低于操作系统的限制（在现代 Linux 的情况下）。

例如：

```
$ /bin/true $(seq 1 100000)
$ /bin/sh -c "/bin/true $(seq 1 100000)"
bash: /bin/sh: Argument list too long 
```

我该如何规避这个问题？

**更新**

我想指出，这`getconf`无济于事（因为这不是系统限制）：

```
$ seq 1 100000 | wc -c
588895
$ getconf ARG_MAX
2097152 
```

**更新#2**

现在我明白了这里有什么意义。这不是 shell 限制，而是系统限制，而是针对每个参数的长度，而不是针对整个 arglist。

```
$ /bin/true $(seq 1 100000)
$ /bin/true "$(seq 1 100000)"
bash: /bin/true: Argument list too long 
```

谢谢 CodeGnome 的解释。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-13T17:52:26.607

### TL;博士

单个参数必须短于 MAX_ARG_STRLEN。

### 分析

根据[此链接](http://www.in-ulm.de/~mascheck/various/argmax/)：

> 作为自 2.6.23 起的附加限制，一个参数不得长于 MAX_ARG_STRLEN (131072)。如果您生成像“sh -c 'generated with long arguments'”这样的长调用，这可能会变得相关。

这正是 OP 确定的“问题”。虽然允许的参数数量可能非常大（请参阅 参考资料`getconf ARG_MAX`），但当您将带引号的命令传递给*/bin/sh*时，shell 会将带引号的命令解释为单个字符串。在 OP 的示例中，正是这个单个字符串超出了 MAX_ARG_STRLEN 限制，而不是扩展参数列表的长度。

### 具体实施

参数限制是特定于实现的。但是，[这篇 Linux Journal 文章](http://www.linuxjournal.com/article/6060)提出了几种解决方法，包括增加系统限制。这可能并不直接适用于 OP，但它在一般情况下仍然有用。

### 做点别的

OP的问题实际上并不是真正的问题。问题是强加一个不能解决现实问题的任意约束。

您可以通过使用循环轻松解决此问题。例如，对于 Bash 4：

```
for i in {1..100000}; do /bin/sh -c "/bin/true $i"; done 
```

工作得很好。它肯定会很慢，因为您在每次通过循环时都会产生一个进程，但它肯定会绕过您遇到的命令行限制。

### 描述你真正的问题

如果循环不能解决您的问题，请更新问题以描述您实际尝试使用非常长的参数列表解决的问题。探索任意行长限制是一项学术活动，而不是 Stack Overflow 的主题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T18:48:55.577

我没有收到该错误消息。我的秘密？单引号：

```
/bin/sh -c '/bin/true $(seq 1 100000)' 
```

如果我使用双引号，每个 shell 都会出现该错误：

```
$ /bin/sh -c "/bin/true $(seq 1 100000)"
-bash: /bin/sh: Argument list too long
$ /bin/bash -c "/bin/true $(seq 1 100000)"
-bash: /bin/bash: Argument list too long
$ /bin/ksh -c "/bin/true $(seq 1 100000)"
-bash: /bin/ksh: Argument list too long
$ /bin/zsh -c "/bin/true $(seq 1 100000)"
-bash: /bin/zsh: Argument list too long 
```

当使用双引号时，参数列表在当前 shell 中被扩展，这一事实证明了 Bash 是发出错误“-bash: ...”的人，而不管 shell 用于运行命令。顺便说一句，在我的系统`sh`上是 Dash。

即使对于其他“主机”外壳也是如此：

```
$ dash
$ /bin/bash -c '/bin/true $(seq 1 100000)'
$ /bin/bash -c "/bin/true $(seq 1 100000)"
dash: /bin/bash: Argument list too long 
```

病人：医生，我这样做会很痛。”
医生：不要那样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T17:46:18.817

创建一个文件`#!/bin/sh`作为第一行，然后将其余的命令放在后续行中？:)

更严重的是，您还可以使用该`-s`选项从 STDIN 读取命令，因此您可以生成长命令行并将其输入到`/bin/sh -s`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T18:27:44.540

在我的操作系统上，它是二分法获得的最大长度

```
/bin/sh -c "/bin/true $(perl -e 'print"a"x131061')" 
```

所以它给出了 131071

但是没有理由排那么长；如果是因为参数太多，可以用“$@”代替；例如

```
/bin/sh -c 'command "$@"' -- arg1 arg2 .. argn 
```

# django - 如何在 db 字段中搜索“#”之后的字符串并将其添加到 django 中的另一个 db 字段

> ID：11475222
> 
> 赞同：0
> 
> 时间：2012-07-13T17:14:31.233
> 
> 标签：django, django-models, django-views

我想要一个内容输入块。当用户在字段中键入#word 或#blah 时，我希望有效地搜索该字段并将“#”之后的字符串添加到不同的字段作为不同表中的条目。就像 Twitter 所做的那样。这将允许用户稍后按该字符串排序。

我相信我会将此作为模型保存方法的一部分，但我不确定。并且，如果#blah 已经存在，那么内容将属于那个“blah”

谁能建议如何做到这一点的样本？这有点超出我自己的能力范围。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:34:04.687

您可以在期间或任何时候使用`regex`( [re](http://docs.python.org/library/re.html) )`save()`来检查您的字段文本是否包含`#(?P<blah>\w+)`、提取您的 blah 并将其用于您想要的任何内容。

# c++ - 按 id 排序结构数组

> ID：11475226
> 
> 赞同：-1
> 
> 时间：2012-07-13T17:14:51.827
> 
> 标签：c++

在我的毕业项目中，我将一系列记录作为案例研究。在我编写的代码中，我创建了一个结构数组，并在一个 int 数组中输入了结构的 id，以使排序更容易，但是当它运行时它会卡住。

```
#include<iostream.h>
struct book{
    char Bname[8], Bsubject[8];
    int copyies, Bid, Bfound;
} a[100];

void Ider(book a[],int r[],int index){
    for(int i=0;i<index;i++)
        r[i]=a[i].Bid;
}

void swap(int &a,int &b){
    int c=a;
    a=b;
    b=c;
}

void Bublesort(int a[],int n){
   for(int j=0;j<n;j++)
    for(int i=1;i<n-1;i++)
        if(a[i]>a[i+1])
            swap(a[i+1],a[i]);                
}

int bsearch(int b[],int key,int first,int last){
    int  midel=(first+last)/2;
    for(int i=0;i<last;i++){
        if(b[midel]==key)
            return midel;
        else 
            if(b[midel]>key)
                return bsearch(b,key,first,midel-1);
            else 
                if(b[midel]<key)
                    return bsearch(b,key,midel+1,last);
    }
}

int main(){

    int r,i, index=0,m[100];
    char ch;

    do{
        cout<<"Enter your"<<index+1<<" Book id"<<"    ";
        cout<<endl;
        cin>>a[index].Bid;
        cout<<"Enter your"<<index+1<<" Book name"<<"    ";
        cout<<endl;

         cin>>a[index].Bname;

         cout<<"Enter your"<<index+1<<" Book subject"<<"    ";
         cout<<endl;

         cin>>a[index].Bsubject;
         index++;
         a[index].Bfound++;
         a[index].copyies++;
         if(index==99)
             break;

    quite : cout<<"Do you want to continue";
         cin>>ch;

    } while(ch=='y');

    Ider(a,m,index);
    Bublesort(m,index);

    char p;

    do{
        cout<<"Do you want to search?"<<endl;
        cin>>p;
        cout<<"enter your id";
        cin>>i; 
        r=bsearch(m,i,0,index);
        cout<<a[r].Bfound<<"          ";

    } while(ch=='y');

    system("pause");
    return 0;
} 
```

当它到达`bublesort()`时它挂起并且没有给出任何输出，但是为什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:33:25.103

除其他问题外：冒泡排序一次又一次地遍历数组，直到完全排序。你的只遍历数组一次。

[C 示例](http://www.cprogramming.com/tutorial/computersciencetheory/sorting1.html)

[冒泡排序（维基百科）](http://en.wikipedia.org/wiki/Bubble_sort)

# javascript - 使用纯javascript查找特定元素之前和之后的元素

> ID：11475232
> 
> 赞同：34
> 
> 时间：2012-07-13T17:15:14.403
> 
> 标签：javascript

有一个这样的链接列表：

```
<ul>
    <li><a href="#">First tab</a></li>
    <li><a href="#">Second tab</a></li>
    <li class="active"><a href="#">Active tab</a></li>
    <li><a href="#">Fourth tab</a></li>
    <li><a href="#">Fifth tab</a></li>
</ul> 
```

如何在活动选项卡之前和之后找到元素？（在这种情况下，第二个和第四个选项卡）。

* * *

我正在寻找**纯 JavaScript的解决方案，因为**[这里](https://stackoverflow.com/questions/929670/find-the-element-before-and-after-a-specific-element)有 jQuery 解决方案。

**注意：** `nextElementSibling` IE8和`previousElementSibling`FF3 不支持，因此请发布这些浏览器也支持的解决方案。谢谢你。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-07-13T17:19:02.650

假设您的`<ul>`元素被称为`element`：

```
var active, prev, next;
active = prev = next = element.querySelector('.active');

do prev = prev.previousSibling; while(prev && prev.nodeType !== 1);
do next = next.nextSibling;     while(next && next.nodeType !== 1); 
```

这适用于 Internet Explorer 8。如果您只担心现代浏览器：

```
var active = element.querySelector('.active');
var prev = active.previousElementSibling;
var next = active.nextElementSibling; 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-13T17:17:09.063

很容易，给定一个最新的浏览器：

```
var activeTab = document.getElementsByClassName('active')[0],
    activePrevSibling = activeTab.previousElementSibling,
    activeNextSibling = activeTab.nextElementSibling; 
```

[JS Fiddle 演示](http://jsfiddle.net/davidThomas/FTJHj/)（带有可怕、*可怕*的颜色......）。

* * *

以上编辑，基于 Esailija 留下的评论：

> `document.querySelector(".active")`更受支持和简洁

```
var activeTab = document.querySelector('.active'),
    activePrevSibling = activeTab.previousElementSibling,
    activeNextSibling = activeTab.nextElementSibling; 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/FTJHj/)。

参考：

*   [`nextElementSibling`](https://developer.mozilla.org/en/DOM/Element.nextElementSibling).
*   [`previousElementSibling`](https://developer.mozilla.org/en/DOM/Element.previousElementSibling).

# pinvoke - P/Inoke 捕获本机异常

> ID：11475239
> 
> 赞同：1
> 
> 时间：2012-07-13T17:15:40.697
> 
> 标签：pinvoke

我正在测试一个 C# .NET 4.0 应用程序，它通过 PInvoke 与 C++ 非托管 DLL 交互，我想捕获 dll 引发的任何异常。我在 try/catch 子句中包装了 dll 函数来处理本机异常，但是当它被触发时，它被忽略了。试过：

```
try { } catch {}
try {} catch (Exception)
try {} catch (SEHException)
try {} catch (Win32Exception) 
```

无济于事

唯一可行的选项是将*DllImport SetLastError*属性设置为 true 并在调用函数检查后使用：

```
if (Marshal.GetLastWin32Error() !=0) 
```

这是一个令人满意的解决方案，但我只是想知道为什么其他选项没有任何效果，以及想知道本机异常是由非托管 dll 还是由 Windows API 本身触发的，因为例如异常是：

```
System.ComponentModel.Win32Exception (0x80004005): There is not enough space on the disk 
```

这是来自 Windows API 本身的通知吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T17:38:40.380

简单的解释是本机代码不会抛出异常。是的，使用 GetLastWin32Error() 是任何 Windows api 函数的样板。其他代码也可能使用它，虽然它不是很常见，但任何人都可以调用 SetLastError() 来设置线程的错误代码。否则 C 代码永远不会故意抛出异常，该语言不支持它。

0x80004005 错误代码是 COM 错误代码 E_FAIL。您不使用 pinvoke 调用 COM 函数，CLR 对 COM 互操作的支持通过导入库来处理它。您*确实*会收到 COM 错误的异常，当 CLR 看到 COM 方法返回失败代码时会抛出异常。它还使用 IErrorInfo 来获得错误代码的更好描述，在 Exception.Message 属性中返回。

# mysql - 从 MySQL 中的现有表生成更改日志时，liquibase 如何处理自动递增的 PK？

> ID：11475243
> 
> 赞同：2
> 
> 时间：2012-07-13T17:16:05.243
> 
> 标签：mysql, liquibase

我目前正在从 mySql 中的现有表生成 liquibase 更改日志。我将行的 id 设置为 PK 并将其设置为自动增量。由于测试/不同的尝试将数据插入表中，id 不是从 1 开始的。

所以我的问题是，当从现有表生成更改日志时，liquibase 是否根据父表的 PK（生成 liquibase 的表）定义子表的主键？或者在另一个数据库上运行更改日志时，新表的主键是否会从 1 开始并自动递增，而不管父表中的 PK 是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:28:24.427

在 MySQL 中，auto_increment 由数据库处理，而不是 Liquibase。所以新数据库的行将从 1 开始。

# windows-server-2003 - 即使设置了 GPO，任何用户都可以将工作站添加到 Windows Server 2003 域

> ID：11475250
> 
> 赞同：-1
> 
> 时间：2012-07-13T17:16:27.207
> 
> 标签：windows-server-2003, group-policy, gpo, domaincontroller

正如标题所说 - 我们有一个域，其 DC 运行 Windows Server 2003，它允许任何经过身份验证的用户将工作站添加到域中。目前在默认域策略中，我们已将其配置为仅允许管理员拥有此功能（此外，此策略适用于经过身份验证的用户）：

Windows 设置 -> 安全设置 -> 本地策略/用户权限分配 -> 将工作站添加到域：BUILTIN\Administrators、DOMAIN\Domain Admins

我们错过了什么，或者如何配置错误以继续允许任何经过身份验证的用户将工作站添加到域？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:52:59.913

首先检查：Domain Admins 组中有哪些用户？

# javascript - 如何更改此 javascript 以便将其内容提交到我的 rails 表单？

> ID：11475254
> 
> 赞同：0
> 
> 时间：2012-07-13T17:16:54.543
> 
> 标签：javascript, ruby-on-rails

在 Rails 中，我有一个 id 为“new_user”的表单，它在提交时会创建一个新用户。我正在尝试确保以下 javascript 有效：

```
 var form$ = $("#new_user");
                var token = response['id'];
                form$.append("<input type='hidden' name='Token' value='" + token + "' />");
                form$.get(0).submit(); 
```

我想要它做的是在我提交表单时将“令牌”添加到我的 Rails 表单中。如何更改 javascript 以便将“令牌”提交到 ID 为“new_user”的表单？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:33:30.500

如果您想`token`将`params`哈希作为 的一部分`user`，请尝试为输入提供适当的 id 和名称：

```
<input type="hidden" name="user[token]" id="user_token" .../> 
```

然后你应该能够在你的控制器中访问它`params[:user][:token]`

# entity-framework - 如何将实体框架模型动态映射到列？

> ID：11475256
> 
> 赞同：2
> 
> 时间：2012-07-13T17:16:56.353
> 
> 标签：entity-framework, entity-framework-4

我们正在与第三方应用程序合作，该应用程序允许用户创建自己的具有不同列的表。每个表都遵循“T{ID}”格式（T12、T23 等）。

我使用以下代码访问适当的表：

```
public class RecordDataContext : System.Data.Entity.DbContext
{
  public RecordDataContext(string nameOrConnectionString, string tableName)
    : base(nameOrConnectionString)
  {
    if (string.IsNullOrEmpty(tableName))
      throw new ArgumentNullException("tableName");
    TableName = tableName;
  }

  public string TableName { get; private set; }

  public DbSet<Record> Records { get; set; }

  protected override void OnModelCreating(DbModelBuilder modelBuilder)
  {
    modelBuilder.Entity<Record>()
      .ToTable(TableName);
  }
} 
```

每个表都有某些相同的列（ID、CreateDateTime、ModifyDateTime 等）。它们还允许用户添加自己的列，用户友好的列标题存储在其他表中，数据表中的列遵循这种格式“索引{ID}”（Index20、Index35 等）。

使用实体框架，我希望能够将数据提取到这样的 POCO 模型中，其中索引列中的数据存储在 Data 属性中：

```
public class Record
{
  [Key]
  public int ID { get; set; }
  public DateTime CreateDateTime { get; set; }
  public DateTime ModifyDateTime { get; set; }
  public IDictionary<int, string> Data { get; set; }
} 
```

如果这不可能，是否有其他方法可以在不发出单独的 SQL 请求的情况下检索索引列？

# java - 使用 JGIT 进行浅克隆

> ID：11475263
> 
> 赞同：22
> 
> 时间：2012-07-13T17:17:16.223
> 
> 标签：java, git, shallow-copy, jgit

我该怎么做

```
git clone --depth 1 ... 
```

与 JGIT 库？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-23T18:27:28.290

你不能，JGit 还不支持[客户端](https://bugs.eclipse.org/bugs/show_bug.cgi?id=475615)的浅克隆（尽管它支持[服务器端](https://bugs.eclipse.org/bugs/show_bug.cgi?id=301627)）。

# r - Quantmod 在循环中获取/查看财务

> ID：11475272
> 
> 赞同：0
> 
> 时间：2012-07-13T17:18:06.510
> 
> 标签：r, financial, quantmod

我想循环浏览一个代码列表，获取他们的财务数据并将它们导出到我桌面上文件夹中的 CSV 文件。但是，我遇到了与 Quantmod 包中的 viewFinancials() 相关的 R 错误。代码和错误如下所示。

所以，我的问题是如何将变量分配为金融类的对象，以便我的循环正常运行？或者，如果有人有其他选择，我会很高兴听到它！

这是错误消息：

> viewFinancials 中的错误（co.f、“BS”、“Q”）：“x”必须是“财务”类型</p>

这是我正在处理的代码：

```
 tickers <- c('AAPL','ORCL','MSFT')

 for(i in 1:length(tickers)){

     co <- tickers[1]
     #co.f <- paste(co,".f",sep='') #First attempt, was worth a try

     co.f <- getFin(co, auto.assign=T)  # automatically assigns data to "co.f" object
     BS.q<-viewFinancials(co.f,'BS',"Q")  # quarterly balance sheet
     IS.q<-viewFinancials(co.f,"IS","Q")  # quarterly income statement
     CF.q<-viewFinancials(co.f,"CF","Q")  # quarterly cash flow statement
     BS<-viewFinancials(co.f,"BS","A")  # annual balance sheet
     IS<-viewFinancials(co.f,"IS","A")  # annual income statement
     CF<-viewFinancials(co.f,"CF","A")  # annual cash flow statement

     d<-Sys.Date()

     combinedA <- rbind(BS,IS,CF)
     combinedQ <- rbind(BS.q,IS.q,CF.q)

     BSAfile <- paste('/Users/dedwards/Desktop/RFinancials/',d,' ',co,'_BS_A.csv',sep='')
     BSQfile <- paste('/Users/dedwards/Desktop/RFinancials/',d,' ',co,'_BS_Q.csv',sep='')
     write.csv(combinedA, file = BSAfile, row.names=TRUE)
     write.csv(combinedQ, file = BSQfile, row.names=TRUE)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:25:12.253

`co.f`包含工作区中实际包含财务对象的对象的名称。要实际使用该对象，您需要调用`get(co.f)`

```
obj <- get(co.f)
# now you can use obj where you were previously trying to use co.f 
```

或者它看起来像

```
co.f <- getFin(co, auto.assign = FALSE) 
```

也有效，可能更直接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-05T03:44:00.670

`tidyquant`您可以考虑将多个股票传递给`tq_get()`函数的包，而不是编写循环。设置`tq_get(get = "financials")`将允许您下载多只股票的财务数据。这是和示例：

```
library(tidyquant)
c("FB", "AMZN", "NFLX", "GOOG") %>%
    tq_get(get = "financials") 
```

这将返回年度和季度期间所有财务报表数据（损益表、资产负债表、现金流量）的嵌套数据框。您可以使用该`unnest()`功能剥离图层。

`write_csv()`如果您需要保存数据，您可以取消嵌套然后使用该函数写入 csv 。

# c++ - 使用 X,Y,Z 索引到 std::vector

> ID：11475284
> 
> 赞同：0
> 
> 时间：2012-07-13T17:18:45.793
> 
> 标签：c++, stdvector

我有一个`std::vector<Chunk*> m_vpChunks`对象，它包含一个块向量。我也有一个世界和 X、Y、Z 坐标。

我用以下方法创建块：

```
// Go through all chunks
    for(int x = 0; x < m_iSize; x+=CHUNK_SIZE_X)
    {
        for(int y = 0; y < m_iSize; y+=CHUNK_SIZE_Y)
        {
            for(int z = 0; z < m_iSize; z+=CHUNK_SIZE_Z)
            {

                // Create new chunk
                CChunk  *pChunk =   NULL;
                pChunk          =   new CChunk(CVector3(x,y,z));
                assert(pChunk);       

                // Add it to our list
                m_vpChunks.push_back(pChunk);

            }
        }
    } 
```

并且想用 X,Y,Z 索引到一个块向量中，例如：

```
CChunk *GetChunk(int X, int Y, int Z)
{

 return m_vpChunks[ *** ];

} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T17:31:36.827

我*认为*是：

```
return m_vpChunks[
  x/CHUNK_SIZE_X * (m_iSize/CHUNK_SIZE_Y * m_iSize/CHUNK_SIZE_Z) +
  y/CHUNK_SIZE_Y * (m_iSize/CHUNK_SIZE_Z) +
  z/CHUNK_SIZE_Z ]; 
```

* * *

但说真的，使用不同的数据结构。想到嵌套向量，在这种情况下你会返回：

```
return m_vpChunks[x][y][z]; 
```

或许

```
return m_vpChunks[x/CHUNK_SIZE_X][y/CHUNK_SIZE_Y][z/CHUNK_SIZE_Z]; 
```

# sas - 在 SAS 中平均面板数据

> ID：11475287
> 
> 赞同：1
> 
> 时间：2012-07-13T17:18:55.250
> 
> 标签：sas

我有看起来像这样的面板数据集

```
ID    Usage     month    
1234    2        -2  
1234    4        -1
1234    3         1
1234    2         2
2345    5        -2
2345    6        -1
2345    3         1
2345    6         2 
```

显然还有更多的 ID 变量和使用数据，但这是一般形式。我想在月份列为负数以及每个 ID 为正数时平均使用数据。换句话说，对于每个唯一 ID，平均负月份和正月份的使用情况。我的目标是得到这样的东西。

```
ID   avg_usage_neg   avg_usage_pos
1234     3                  2.5
2345     5.5                4.5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:26:28.393

这里有几个选项供您选择。

首先创建测试数据：

```
data sample;
  input ID    
        Usage     
        month;
datalines;
1234    2        -2  
1234    4        -1
1234    3         1
1234    2         2
2345    5        -2
2345    6        -1
2345    3         1
2345    6         2
;
run; 
```

这是一个 SQL 解决方案：

```
proc sql noprint;
  create table result as
  select id,
         avg(ifn(month < 0, usage, .)) as avg_usage_neg,
         avg(ifn(month > 0, usage, .)) as avg_usage_pos
  from sample
  group by 1
  ;
quit; 
```

这是一个datastep / proc意味着解决方案：

```
data sample2;
  set sample;
  usage_neg = ifn(month < 0, usage, .);
  usage_pos = ifn(month > 0, usage, .);
run;

proc means data=sample2 noprint missing nway;
  class id;
  var usage_neg usage_pos;
  output out=result2 mean=;
run; 
```

# jquery - asp：jquery 函数适用于母版页项目，但不适用于 aspx 页面项目

> ID：11475292
> 
> 赞同：0
> 
> 时间：2012-07-13T17:19:15.450
> 
> 标签：jquery, asp.net, master-pages

在 aspx 页面上，我有这样的东西：

```
<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">   
<script type="text/javascript">
    $("li").mouseover(function () {
        $("li").css("background-color", "blue");
    });
</script>

<ul id="second"> 
<li> <a href.../a> </li>
<li> <a href.../a> </li>
<ul> 
```

在母版页上也有一个以列表格式创建的菜单栏。因此，当我将鼠标悬停在菜单栏上时，li 背景项变为蓝色，没问题。但是当我将鼠标悬停在第二个 li 上时，什么也没有发生。我对asp不是很熟悉。我尝试了解决方案[JQuery don't work in aspx-page with Masterpage](https://stackoverflow.com/questions/9185264/jquery-dont-work-in-aspx-page-with-masterpage)我什至不确定它是否适用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:24:36.927

将您的代码包装在这样的文档就绪事件中......

```
$(document).ready(function () {
    $("ul.second").delegate("li", "mouseover", function () {
        $("li").css("background-color", "blue");
    });
}); 
```

您还可以使用委托函数，该函数将捕获列表项上的鼠标悬停，即使它们是在您注册事件处理程序后添加的。

PS。将此 JavaScript 放在页面底部。这使您的页面呈现速度更快。

# oracle - 在 2 个 oracle 实例之间建立连接以进行复制

> ID：11475294
> 
> 赞同：0
> 
> 时间：2012-07-13T17:19:16.550
> 
> 标签：oracle, database-replication

大家好，我在两个 oracle 实例之间建立连接以进行复制时遇到问题。我可以通过`sqlplus`使用像`

```
SQL> connect root/12345@orcl1 
```

但我无法创建查询：

```
CREATE DATABASE LINK remotedb
CONNECT TO root IDENTIFIED BY 12345
USING 'orcl1'; 
```

我也不能用 Oracle 数据库控制来设置它。我得到的错误是远程主机的用户名或密码不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T19:36:06.280

我通过将密码用双引号括起来解决了这个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T21:16:15.657

我不认为用户“root”是远程数据库上的 SYSDBA 帐户？如果是这样，你不能这样做。不允许数据库链接连接到 SYSDBA 帐户。该链接将被创建，但您将收到 ORA-01017：用户名/密码无效。

# sql-server - 一个用户在一张临时表中有很多电话

> ID：11475295
> 
> 赞同：0
> 
> 时间：2012-07-13T17:19:23.203
> 
> 标签：sql-server, sql-server-2008, select, one-to-many

我需要在一个临时表中显示一个用户该用户的多个电话，但我被困在选择中，我需要这样的东西：

```
user1        phone1   phone2    phone3   phone4  phone5
11816116-5   8555588  77877888  33254477 224474  45777885 
```

这是我正在尝试的代码：

```
select
    phone As phonenum 
Into #Tmp_phonenumber 
From 
    clients_has_phones 
where 
    user_number='11816116-5' 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:55:41.440

除了通过自行加入您的用户可能拥有多少个电话号码之外，我想不出一种做选择语句的好方法。话虽如此，您可以为您的选择语句尝试这个：

```
;With CTE_Main as (
Select
  id
  ,Fono
  ,row_number()
    Over(Partition by ID order by Fono) as RN
From sucursales
), CTE_Users as (
Select
  id as id_num
  from sucursales
  group by id
)
Select
  id_num
  ,a.Fono as Phone_1
  ,b.Fono as Phone_2
  ,c.Fono as Phone_3
  ,d.Fono as Phone_4
  ,e.Fono as Phone_5
From CTE_Users as realz
  Left Join [CTE_Main] as a on a.id = realz.id_num and a.RN = 1
  Left Join [CTE_Main] as b on b.id = realz.id_num and b.RN = 2
  Left Join [CTE_Main] as c on c.id = realz.id_num and c.RN = 3
  Left Join [CTE_Main] as d on d.id = realz.id_num and d.RN = 4
  Left Join [CTE_Main] as e on e.id = realz.id_num and e.RN = 5 
```

我知道它有点冗长，但它会以你想要的方式显示结果。我的例子只使用了 5 行，但它应该很容易解释。

Sql 小提琴：[http ://sqlfiddle.com/#!3/496f6/1](http://sqlfiddle.com/#!3/496f6/1)

# java - Log4J 滚动日志授予对 Windows“所有人”的访问权限

> ID：11475299
> 
> 赞同：1
> 
> 时间：2012-07-13T17:19:30.217
> 
> 标签：java, windows-7, permissions, log4j

我正在使用 log4j 进行每日滚动日志。

我正在尝试找到一种方法来设置新日志文件的权限，当它们被创建时，这会给“每个人”提供读写访问权限。

该程序只能在 Win7 和 WinXP 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:23:41.113

默认情况下，新创建的文件从它们所在的目录继承权限。只需为这些文件创建一个具有适当权限的新目录，文件就会继承。

# actionscript-3 - 带有 Flex/AS3 的 Adob e TLF：如何以编程方式将文本字符串中的 \n 更改为段落标签并插入到 TextFlow 中？

> ID：11475306
> 
> 赞同：0
> 
> 时间：2012-07-13T17:20:02.703
> 
> 标签：actionscript-3, apache-flex, tlf

我的 Flex/AS3 Web 应用程序访问数据库并检索包含 \n 作为换行符的文本。否则文本看起来像普通文本。

有没有办法将 \n 转换为可以插入到 spark TextFlow 中的段落标签？

例如，我对 TLF 的唯一经验是编写 mxml 代码，如下所示：

```
<s:RichEditableText width="100%" height="100%"
                    textAlign="left" paddingTop="0"
                    paragraphSpaceAfter="0.3"
                    editable="false">
<s:textFlow>
  <s:TextFlow>
    <s:p fontWeight="bold" fontSize="15">My Title Text</s:p>
    <s:p fontSize="2"/>
    <s:p>{paragraph1_text}</s:p>
    <s:p>{paragraph2_text}</s:p>
    <s:p>{paragraph3_text}</s:p>
    <s:p fontSize="2"/>
  </s:TextFlow>
</s:textFlow>
</s:RichEditableText> 
```

假设我从数据库中检索一个字符串，例如：

`paragraph1_text = "This is some text.\nThis is some more text.\nThis is even more text."`

即使将其插入到上面的代码中会识别换行符，但它不会识别`paragraphSpaceAfter="0.3"`. 我的目标是产生以下效果：

```
<s:RichEditableText width="100%" height="100%"
                    textAlign="left" paddingTop="0"
                    paragraphSpaceAfter="0.3"
                    editable="false">
<s:textFlow>
  <s:TextFlow>
    <s:p fontWeight="bold" fontSize="15">My Title Text</s:p>
    <s:p fontSize="2"/>
    <s:p>This is some text.</s:p>
    <s:p>This is some more text.</s:p>
    <s:p>This is even more text.</s:p>
    <s:p>{paragraph2_text}</s:p>
    <s:p>{paragraph3_text}</s:p>
  <s:p fontSize="2"/>
</s:TextFlow> 
```

有没有办法以编程方式实现这样的事情（数据库文本可以是任何东西）？

我尝试将paragraph1_text 更改为：

`paragraph1_text="<s:p>This is some text.</s:p><s:p>This is some more text.</s:p><s:p>This is even more text.</s:p>"`

然后在上面的第一个代码块中使用它，但它只是打印出所有的`<s:p>`和`</s:p>`标签。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T17:56:03.680

您可以使用 ActionScript 实现此目的。假设您将 TextFlow 命名为

```
<s:TextFlow id="myFlow"> 
```

您的 ActionScript 代码块可能如下所示：

```
import flashx.textLayout.elements.*;

public function insertParagraph( textFlow:TextFlow, text:String, locationIndex:uint ):void
{
    var paragraphs:Vector.<ParagraphElement> = getParagraphElements( text );
    for ( var i:uint = 0; i < paragraphs.length; i++ )
    {
        textFlow.addChildAt( paragraphs[i], locationIndex + i );
    }
}

public function getParagraphElements( text:String ):Vector.<ParagraphElement>
{
    var textParagraphs:Array = text.split("\n");
    var result:Vector.<ParagraphElement> = new Vector.<ParagraphElement>();
    for ( var i:uint = 0; i < textParagraphs.length; i++ )
    {
        var p:ParagraphElement = new ParagraphElement();
        var span:SpanElement = new SpanElement();
        span.text = textParagraphs[i];
        p.addChild(span);
        result.push(p);
    }

    return result;
} 
```

在您的情况下，由于您要添加从第 3 个元素开始的段落，一旦检索到文本，您可以调用 insertParagaph(myFlow, text, 2);

# asp.net-mvc-3 - 在 MVC3 中循环渲染局部视图

> ID：11475308
> 
> 赞同：5
> 
> 时间：2012-07-13T17:20:05.200
> 
> 标签：asp.net-mvc-3, asp.net-mvc-partialview

我有一个非常简单的场景，我的视图模型是一个列表。

像这样循环遍历列表

```
@foreach(CustomObject obj in Model)
{
Html.Partial("_TrackingCustomObject",obj)
} 
```

所以我期望根据我的列表有一些部分视图。

部分视图已相应开发。

页面上没有错误。它只是不显示任何应该由局部视图显示的数据。

不显示任何数据的原因是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-13T17:28:26.557

你错过了一个@：

```
@foreach(CustomObject obj in Model)
{
    @Html.Partial("_TrackingCustomObject", obj)
} 
```

但是，当您可以使用编辑器/显示模板时，为什么还要编写 foreach 循环呢？像这样：

```
@model IEnumerable<CustomObject>
@Html.EditorForModel() 
```

然后简单地定义`~/Views/Shared/EditorTemplates/CustomObject.cshtml`将自动为模型的每个元素呈现的相应编辑器模板 ()：

```
@model CustomObject
<div>
    @Html.EditorFor(x => x.Foo)
</div> 
```

简单而传统:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T17:29:45.323

您缺少 Razor 符号`@`：

```
@foreach(CustomObject obj in Model)
{
    @Html.Partial("_TrackingCustomObject",obj)
} 
```

还要**确保**您的局部视图使用对象类型`CustomObject`作为模型。

```
@model MyProject.Models.CustomObject

<h1>Yeah we're in a partial! @Model.SomeProperty </h1> 
```

* * *

要尝试深入了解错误所在，请尝试在 PartialView 中放置一些静态文本。

```
<p>Some text</p> 
```

如果您的收藏有 10 个项目，那么您应该看到其中的 10 个段落。接下来，一旦这个工作，专注于在每个项目中显示一些属性。

```
@model MyProject.Models.CustomObject

<p>Some text</p>
<p>@Model.SomeProperty</p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T17:55:52.243

当您使用创建 html 表单时，`@Html.BeginForm()`您必须将剩余的 stuf 包装在 a`<div>`或其他容器中，否则 html 元素将不会被呈现。

前任。

**这行不通**

```
@using(Html.BeginForm())
{
  Html.EditorFor(m => m.Name)
} 
```

**这会起作用**

```
@using(Html.BeginForm())
{
   <div>    
      @Html.EditorFor(m => m.Name)
   </div>
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T17:23:11.677

**试试这个**：

```
@Html.RenderPartial("_TrackingCustomObject",obj) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T21:59:19.553

有点晚了，但这在 MVC 4 中对我有用：

```
 @foreach (var p in @Model.RelatedCards)
    {
        Html.RenderPartial("_ThumbPartial", p);
    } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-02-18T23:18:30.153

这太旧了，但有人可以使用它。

```
@foreach(CustomObject obj in Model)
{
    <text>
        Html.Partial("_TrackingCustomObject",obj)
    </text>
} 
```

# javascript - 有没有办法强制主干重新路由到当前 URL？

> ID：11475317
> 
> 赞同：2
> 
> 时间：2012-07-13T17:20:50.023
> 
> 标签：javascript, backbone.js, anchor

我正在使用骨干路由器来处理客户端单击单个页面上的各种选项。除其他外，此路由器的行为也类似于简单的同页锚标记链接。

我遇到的问题是，如果用户单击其中一个选项（例如“详细信息”）然后滚动离开，他们可能想再次单击“详细信息”。如果他们这样做，则不会发生任何事情 - 应用程序已经路由到详细信息并且不会重新路由。我只会使用简单的链接，例如`<a href="#details">Details</a>`，但不仅仅是在页面上跳转。有没有办法强制重新路由发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-11T01:05:16.833

根据Alexey[的回答](https://stackoverflow.com/a/22940545/137067)，可以强制 Backbone 的历史/路由器“重新路由”当前 URL，就好像它触发了重新加载一样。

您实际上可以[检测](https://github.com/jashkenas/backbone/blob/1dbe3ddf2f757b0f1a23e22ca5986b6e4a3fda90/backbone.js#L1598)到典型的调用是否`navigate`由于已经在同一个 url 上而失败/不返回任何内容，并`loadUrl`在这些情况下调用强制它。

例如，我的站点范围的内部链接处理程序如下所示：

```
// `Backbone.history.navigate` is sufficient for all Routers and will
// trigger the correct events. The Router's internal `navigate` method
// calls this anyways.
var ret = Backbone.history.navigate(href, true);

// Typically Backbone's history/router will do nothing when trying to load the same URL.
// In some cases (links with .allow-reload), we want it to re-fire the same route.
// We can detect when Backbone.history.navigate did nothing, and force the route.
if (ret === undefined && $link.hasClass('allow-reload')) {
    Backbone.history.loadUrl(href);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-08T14:47:22.950

它[总是会返回](https://github.com/jashkenas/backbone/blob/1dbe3ddf2f757b0f1a23e22ca5986b6e4a3fda90/backbone.js#L1598)，没有参数可以强制它。我现在正在寻找解决方案，我看到的一个解决方案是用新的默默替换当前路线，然后尝试导航到旧路线。

UPD：实际上，[您可以使用](https://stackoverflow.com/a/17379621/1921750)Backbone.history.loadUrl

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-13T18:01:51.577

如果在视图中绑定点击事件，则可以手动触发路由。

查看.js

```
SearchView = Backbone.View.extend({
  initialize: function(options){
    alert("Alerts suck.");
    this.router = options.router;
  },
  events : {
    "click a.detail_link" : "showDetails"
  },
  showDetails : function(){
    this.router.navigate("/#details", true);
  }
}); 
```

# javascript - 最小的工具提示脚本（没有 jQuery）

> ID：11475319
> 
> 赞同：8
> 
> 时间：2012-07-13T17:20:55.427
> 
> 标签：javascript, tooltip

有人知道吗？

我在网上找到的所有工具都使用 jQuery 或 Prototype，我不想加载它们只是为了显示一些工具提示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T17:23:59.617

qTip 是我所知道的最小的工具提示库（只有 2K 文件大小）并且不需要 jQuery 或外部插件。此外，它是少数与 IE 5.5 及更高版本兼容的附加组件之一。

**qTip**：http: [//qrayg.com/learn/code/qtip](http://qrayg.com/learn/code/qtip)

如需更多工具提示插件（其中一些*确实*需要 jQuery）：

**参考**：[http ://coding.smashingmagazine.com/2007/06/12/tooltips-scripts-ajax-javascript-css-dhtml/](http://coding.smashingmagazine.com/2007/06/12/tooltips-scripts-ajax-javascript-css-dhtml/)

# c - 无符号 96 位整数的任何预定义类型？

> ID：11475320
> 
> 赞同：2
> 
> 时间：2012-07-13T17:21:00.340
> 
> 标签：c, linux

我正在研究一个需要跟踪长度为 96 的位图的功能。我使用此图在下面编程 asic。是否有一个标准的整数类型来保存 96 位。对于 64 位，我们有 unsigned long long。96位有什么类似的吗？也欢迎任何替代建议。

PS：这是基于 linux 的 Cisco OS。语言是C。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T17:30:14.047

GCC[`__int128`](http://gcc.gnu.org/onlinedocs/gcc/_005f_005fint128.html)在支持它的目标上具有 128 位整数，但没有专门针对 96 位的整数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T17:40:07.583

我可能会选择一组 3 个 uint 的数组。这应该足够快，而且不会更复杂。

EG，设置一点：

```
wordNo = i / 32
bitNo = i - (32*wordNo)
mask = 2 ** bitNo

array[wordNo] |= mask 
```

……或者差不多。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-15T10:10:10.483

有一种方法可以创建**一个**大小为 96 位的变量：联合或结构中的位域。

```
typedef union { // you can use union or struct here
    __uint128_t i : 96;
} __attribute__((packed)) uint96_t;

uint96_t var;  // new uint96_t variable
var.i = 123;   // set the value to 123 (for example) 
```

这对我有用`gcc`。如果您测试 的大小，`uint96_t` 您`sizeof`应该得到 12 个字节（12 * 8 = 96）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-04T00:25:16.473

您应该使用 clang 的新功能`_ExtInt`。它在 clang 11 中，所以你可能没有它。[在这里](https://stackoverflow.com/a/61411866/11059315)查看详细信息和用法。

# ruby-on-rails - 在集成测试中从 date_select 中选择 Date.today

> ID：11475322
> 
> 赞同：0
> 
> 时间：2012-07-13T17:21:03.263
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个带有 date_select 的表单，它显示了日、月和年的 3 个选择框。我有一个 rspec 集成测试，我想用 capybara 选择今天的日期。所以我必须将 Date.today 拆分为日、月和年。有什么好方法可以做到这一点？我可以做一些字符串拆分，但也许有更复杂的方法来做？

在这里，您可以看到用于选择硬编码日期的水豚代码：

```
select("13", :from => "visit_visit_date_3i")
select("July", :from => "visit_visit_date_2i")
select("2012", :from => "visit_visit_date_1i") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:55:32.120

有一些方法可以从 Date 对象中提取日期部分。date 类还有一些常量数组，可以很容易地将诸如月份和星期几之类的东西转换成英文版本。

因此：

```
Date.today.day 
=> 13
Date::MONTHNAMES[Date.today.month] 
=> "July"
Date.today.year 
=> 2012 
```

所有这些都在 Date 的文档中，位于[此处](http://ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/Date.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:35:43.557

您可以考虑使用[timecop](http://github.com/jtrupiano/timecop.git)来冻结当前日期。稍后在测试处理“今天”或“从今天起一周”的其他方法时，这会派上用场

```
before { Timecop.freeze(Date.parse("Jul 13 2012") }
after { Timecop.return } 
```

现在您可以`select("13", :from => "visit_visit_date_3i")`并且它适用于运行测试的任何日期。

# iphone - 在 iPhone 中播放歌曲时如何逐行显示歌词？

> ID：11475325
> 
> 赞同：0
> 
> 时间：2012-07-13T17:21:06.993
> 
> 标签：iphone, ios, audio, core-audio, avplayer

> **可能重复：**
> [如何在 iPhone 上以卡拉 OK 风格显示歌词？](https://stackoverflow.com/questions/4829648/how-do-you-display-song-lyrics-in-karaoke-style-on-the-iphone)

我正在制作一个 iPhone 应用程序，并且有一个功能可以在播放歌曲时显示歌词。它提出了2个问题。

1.  可以用于此的歌词的行业标准格式是什么？听说有一个带有歌词内容和时间线信息的xml格式，有人知道吗？

2.  假设我有这个 xml 文件或其他格式的歌词，我如何在播放歌曲时使用它？

# c# - C# IEnumerable，IEnumerator 重置函数未被调用

> ID：11475328
> 
> 赞同：8
> 
> 时间：2012-07-13T17:21:17.720
> 
> 标签：c#, foreach, enumerable, enumerator

我基本上是想让我的班级能够使用`foreach`. 我读了这个教程。[微软](http://support.microsoft.com/kb/322022)_ 这似乎很简单。但是，当我想第二次迭代时遇到问题。我调试了它；事实证明它没有调用该`Reset()`函数。

## A级

```
class A : IEnumerable, IEnumerator
{
    int[] data = { 0, 1, 2, 3, 4 };

    int position = -1;

    public object Current
    {
        get
        {
            return data[position];
        }
    }

    public bool MoveNext()
    {
        position++;
        return (position < data.Length);
    }

    public void Reset()
    {
        position = -1;
    }

    public IEnumerator GetEnumerator()
    {
        return (IEnumerator)this;
    }
} 
```

当我运行以下主要功能时；它从不调用`Reset()`函数。所以，在一个循环之后，我再也无法迭代我的课程了。

## 主要的

```
static void Main(string[] args)
{
    A a = new A();

    foreach (var item in a)
    {
        Console.WriteLine(item);
    }

    Console.WriteLine("--- First foreach finished. ---");

    foreach (var item in a)
    {
        Console.WriteLine(item);
    }
} 
```

## 输出：

```
0
1
2
3
4
--- First foreach finished. ---
Press any key to continue . . . 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-13T17:24:16.230

每次`foreach`调用时，它都会要求一个*新* `IEnumerator`的. 返回您的类实例是一个坏主意 - 您应该创建一个单独的类来实现`IEnumerator`，并返回它。

这通常通过使用嵌套（私有）类并返回它的实例来完成。您可以将 A 类实例传递给私有类（授予它对 的访问权限`data`），并将该`position`字段放在该类中。它将允许同时创建多个枚举器，并且可以在后续的 foreach 调用中正常工作。

例如，要修改您的代码，您可以执行以下操作：

```
using System;
using System.Collections;

class A : IEnumerable
{
    int[] data = { 0, 1, 2, 3, 4 };

    public IEnumerator GetEnumerator()
    {
        return new AEnumerator(this);
    }

    private class AEnumerator : IEnumerator
    {
        public AEnumerator(A inst)
        {
            this.instance = inst;
        }

        private A instance;
        private int position = -1;

        public object Current
        {
            get
            {
                return instance.data[position];
            }
        }

        public bool MoveNext()
        {
            position++;
            return (position < instance.data.Length);
        }

        public void Reset()
        {
            position = -1;
        }

    }
} 
```

请注意，您也可以直接返回数组的枚举数（尽管我假设您正在尝试学习如何制作干净的枚举数）：

```
class A : IEnumerable
{
    int[] data = { 0, 1, 2, 3, 4 };

    public IEnumerator GetEnumerator()
    {
        return data.GetEnumerator();
    }
} 
```

最后，您可以使用[迭代器](http://msdn.microsoft.com/en-us/library/dscyy5s0.aspx)以更简单的方式实现这一点：

```
class A : IEnumerable
{
    int[] data = { 0, 1, 2, 3, 4 };

    public IEnumerator GetEnumerator()
    {
        for (int i=0;i<data.Length;++i)
           yield return data[i];
    }
} 
```

话虽如此，我强烈建议`IEnumerable<int>`在 IEnumerable 之外实施。泛型在使用方面做得更好。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-13T17:26:58.500

Reset() 基本上是一个错误。如果可能的话，已经有一个已知的方法来获得一个干净的枚举器：GetEnumerator()。

规范中**要求**迭代器块实现（对于迭代器）为此方法抛出异常，因此在一般情况下，**正式知道**它不能工作，简单地说：没有人调用它。坦率地说，他们也应该在 API 上将其标记为 [已过时]！

此外，许多序列是不可重复的。考虑一下位于 NetworkStream 或随机数生成器上的迭代器。因为迭代器（在一般情况下）不需要是可重复的，所以您应该尽可能地针对它们最多迭代一次。如果不可能的话，也许可以通过 ToList() 缓冲。

“foreach”在任何时候都不涉及 Reset()。只是 GetEnumerator()、MoveNext()、Current 和 Dispose()。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-13T17:23:58.467

枚举不调用`Reset`. 您需要创建一个枚举器的新实例，这可能意味着为枚举器创建一个单独的类（即，IEnumerable 和 IEnumerator 不使用相同的类型），如下面的代码所示：

```
public class StackOverflow_11475328
{
    class A : IEnumerable
    {
        int[] data = { 0, 1, 2, 3, 4 };

        public IEnumerator GetEnumerator()
        {
            return new AEnumerator(this);
        }

        class AEnumerator : IEnumerator
        {
            private A parent;
            private int position = -1;

            public AEnumerator(A parent)
            {
                this.parent = parent;
            }

            public object Current
            {
                get { return parent.data[position]; }
            }

            public bool MoveNext()
            {
                position++;
                return (position < parent.data.Length);
            }

            public void Reset()
            {
                position = -1;
            }
        }
    }
    public static void Test()
    {
        A a = new A();

        foreach (var item in a)
        {
            Console.WriteLine(item);
        }

        Console.WriteLine("--- First foreach finished. ---");

        foreach (var item in a)
        {
            Console.WriteLine(item);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T17:29:32.607

里德和卡洛斯都是正确的。这是您可以做到这一点的一种方法，因为`int[]`实现`IEnumerable`和`IEnumerable<int>`

```
class A : IEnumerable
{ 
    int[] data = { 0, 1, 2, 3, 4 }; 

    public IEnumerator GetEnumerator() 
    { 
        return data.GetEnumerator(); 
    } 
} 
```

或者，要进行更强的类型化，您可以使用以下通用形式`IEnumerable`：

```
class A : IEnumerable<int>
{
    int[] data = { 0, 1, 2, 3, 4 };

    public IEnumerator<int> GetEnumerator()
    {
        return ((IEnumerable<int>)data).GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return data.GetEnumerator();
    }
} 
```

# c# - 使用 iTextSharp 裁剪 PDF

> ID：11475331
> 
> 赞同：2
> 
> 时间：2012-07-13T17:21:33.093
> 
> 标签：c#, .net, pdf, itextsharp, crop

如何在 C# 中使用 iTextsharp 裁剪 PDF？如何修改 CropBoxSize 参数以创建新的裁剪 pdf 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:05:45.493

你可以看看我的项目[http://pdfebookcutter.codeplex.com/](http://pdfebookcutter.codeplex.com/)

# sql - SQLite 数据库文件支持的最大表数

> ID：11475338
> 
> 赞同：12
> 
> 时间：2012-07-13T17:22:22.867
> 
> 标签：sql, database, sqlite

即使在阅读[SQLite 限制](http://www.sqlite.org/limits.html)之后，我也找不到SQLite 数据库文件可以容纳的**最大表数。**所以，我想知道是否

1.  SQLite 数据库可以容纳的最大表数是多少？
2.  SQLite 数据库文件中有数千个小表是个问题吗？
3.  SQLite 数据库文件中的许多表会影响查询的性能？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-13T17:54:02.183

SQLite 中的限制列表记录[在此页面](http://www.sqlite.org/limits.html)。没有给定每个数据库的最大表数，因此 SQLite 可能没有实现限制。每个 JOIN 限制为 64 个表。

> ### 4\. Join 中的最大表数
> 
> **SQLite 不支持包含超过 64 个表的连接**。这个限制是因为 SQLite 代码生成器在查询优化器中使用位图，每个连接表有一位。
> 
> SQLite 使用高效的查询计划器算法，因此即使是大型连接也可以快速准备。因此，没有任何机制可以提高或降低连接中表数的限制。
> 
> ### 15\. 模式中的最大表数
> 
> 每个表和索引至少需要数据库文件中的一页。上句中的“索引”表示使用 CREATE INDEX 语句显式创建的索引或由 UNIQUE 和 PRIMARY KEY 约束创建的隐式索引。由于数据库文件中的最大页数为**2147483646（略多于 20 亿），因此这也是模式中表和索引数量的上限**。
> 
> 每当打开数据库时，都会扫描和解析整个模式，并将模式的解析树保存在内存中。这意味着数据库连接启动时间和初始内存使用量与模式的大小成正比。

表的结构是否相同？如果是这样，通常认为将它们存储在具有标识列的单个表中是一种更好的做法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T17:48:31.293

我相信表的数量仅受数据库大小的限制。单个 SQLite 数据库中最多可以有 2,147,483,646 个页面。所以我猜这也将是单个 SQLite 数据库中的最大表数。

这是基于数据库页面仅用于表的假设，这可能不是一个非常有用的假设。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-27T14:52:27.423

要回答您的问题 2 和 3，虽然拥有多个具有相似结构的表违反了数据库规范化的原则，但有很多实际原因表明它比单个表或虚拟表更受欢迎 - 当然，最大的原因是它比 SQLite删除表比删除列容易得多。如果您采用简单的方法并且不使用“正确”的规范化关系表，那么它占用的空间也比在单个表的每一行中具有“tableX”要少。

在性能方面，与“表”列中具有数十万个条目的单个表相比，使用数十万个表不会有任何问题，并且该列已编入索引。事实上，单个规范化表上的索引可能比 SQLite 使用的表索引机制大得多，而且效率较低。

说了这么多，我不能以健康的良心结束这篇文章，而不是说就像 exec() 被用来分配变量名称的变量是编程中常见的初学者错误，制作多个表应该在一个单一的规范化表中（虚拟或其他）是数据库架构中常见的初学者错误。在这两个领域中，在某些情况下，使用 exec 或许多表是正确的选择。例如，如果您的数据都非常相似，但您确定不会对数据进行任何连接，那么很多表都可以。只需确保您确实将数据视为完全不相关，尽管它们具有相似的结构。

# javascript - FireFox 插件，菜单按钮事件

> ID：11475340
> 
> 赞同：1
> 
> 时间：2012-07-13T17:22:37.993
> 
> 标签：javascript, firefox-addon, xul

我正在开发我的第一个 Firefox 扩展，所以我创建了一个菜单按钮元素和菜单项。就像 FireBug 按钮一样，我希望在单击主按钮时触发一个事件，而且在单击菜单项时也可以。问题是当我单击主按钮旁边的箭头以显示菜单项时，会触发主事件。所以我的问题是：

**如何区分主按钮（菜单按钮）和显示菜单的箭头？**

这是我生成按钮的代码：

```
function addToolbarButton() {
var document = mediator.getMostRecentWindow('navigator:browser').document;      
var navBar = document.getElementById('nav-bar');
if (!navBar) {
    return;
};

//main button
var btn = document.createElement('toolbarbutton');  
btn.setAttribute('id', 'reportButton'); 
btn.setAttribute('type', 'menu-button');  
btn.setAttribute('class', 'toolbarbutton-1'); 
btn.setAttribute('image', data.url('img/BookmarkKitchen.png'));
btn.setAttribute('orient', 'horizontal');
btn.setAttribute('label', 'Report');
btn.addEventListener('click', function() {
    console.log("this=" + this.id); 
    event.stopPropagation();
    }
, false);

//menu popup
var menupopup = document.createElement('menupopup');
menupopup.setAttribute('id', 'menupopup');
menupopup.addEventListener('click', function(event) {
    console.log("this=" + this.id);   
    event.stopPropagation();
}
, false);

//menu items
var menuitem1 = document.createElement('menuitem');
menuitem1.setAttribute('id', 'menuitem1');
menuitem1.setAttribute('label', 'Test1');
menuitem1.setAttribute('class', 'menuitem-iconic');
menuitem1.addEventListener('click', function(event) {
    console.log("this=" + this.id);  
    event.stopPropagation();
}
, false);

menupopup.appendChild(menuitem1);
btn.appendChild(menupopup);
navBar.appendChild(btn);

} 
```

当我单击主按钮时，控制台将写入“this=reportButton”。这是正常的，但是当我单击主按钮旁边的箭头时，控制台也会写“this=reportButton”。这意味着如果我想访问菜单，将触发主事件。我发现防止这种情况的唯一方法是按下箭头上的按钮，等待菜单显示并在菜单项上释放它。这不是非常用户友好，Firebug 没有这个问题......

我希望我足够清楚。感谢您回答这个问题:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:11:57.940

不要使用该`click`事件——在 XUL 中它实际上意味着鼠标点击。因此，如果用户通过其他方式（例如键盘）触发按钮，`click`则不会触发该事件。您应该改用该`command`事件 - 它还有一个额外的优势，即如果单击下拉箭头，它不会触发。

# ios - 不了解潜在的泄漏

> ID：11475342
> 
> 赞同：0
> 
> 时间：2012-07-13T17:22:56.407
> 
> 标签：ios, xcode, memory-management, memory-leaks

我在xcode中使用了Analyze函数，我已经修复了除了这个之外的所有东西。

我想知道“分配的对象的潜在泄漏”究竟意味着什么，它指的是这些行。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

self.type_prod = [[ProductType alloc] initWithNibName:@"ProductType" bundle:[NSBundle mainBundle]];

NSString *prodtitle = [product objectAtIndex:indexPath.row];
    type_prod.prodtitle = prodtitle;

 etc etc. 
```

在这个空白结束时，我说：

```
 [[self navigationController] pushViewController:type_prod animated:YES];
[type_prod release]; 
```

那么，如果我在最后释放它，为什么它会说有潜在的泄漏呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:04:00.387

我假设 type_prod 是保留属性。您需要在 dealloc 方法中使用`self.type_prod = nil`.

还要确保在所有情况下都执行最后的发布。立即自动释放它更安全：

```
self.type_prod = [[[ProductType alloc] initWithNibName:@"ProductType" bundle:[NSBundle mainBundle]] autorelease]; 
```

# sql - SQL中按子句执行的顺序

> ID：11475343
> 
> 赞同：6
> 
> 时间：2012-07-13T17:22:58.263
> 
> 标签：sql, sql-server, sql-order-by

这个问题与执行顺序无关。这只是关于 ORDER BY。

在标准执行中是：

*   从
*   在哪里
*   通过...分组
*   拥有
*   选择
*   订购方式
*   最佳

**编辑：这个问题或多或少是“ *SQL Server 在执行 ORDER BY 表达式时应用短路评估吗？* ” 答案是有时！我只是没有找到一个合理的理由。见编辑#4。**

现在假设我有这样的声明：

```
DECLARE @dt18YearsAgo AS DATETIME = DATEADD(YEAR,-18,GETDATE());
SELECT
  Customers.Name
FROM
  Customers
WHERE
  Customers.DateOfBirth > @dt18YearsAgo
ORDER BY
  Contacts.LastName ASC, --STATEMENT1
  Contacts.FirstName ASC, --STATEMENT2
  (
   SELECT
     MAX(PurchaseDateTime)
   FROM
     Purchases
   WHERE
     Purchases.CustomerID = Customers.CustomerID
  ) DESC --STATEMENT3 
```

这不是我要执行的真实语句，而只是一个示例。共有三个 ORDER BY 语句。第三个语句仅用于姓氏和名字匹配的极少数情况。

如果没有重复的姓氏，SQL Server 是否不执行 ORDER BY 语句 #2 和 #3？而且，从逻辑上讲，如果没有重复的姓和名，SQL Server 是否会注意执行语句 #3。

这真的是为了优化。从采购表中读取应该只是最后的手段。在我的应用程序中，从按“CustomerID”分组的“Purchases”中读取每个“PurchaseDateTime”并不是很有效。

请保留与我的问题相关的答案，而不是像在 Purchases 中为 CustomerID、PurchaseDateTime 建立索引这样的建议。真正的问题是，SQL Server 会跳过不必要的 ORDER BY 语句吗？

编辑：显然，只要有一行，SQL Server 就会始终执行每条语句。即使只有一行，这也会给你一个除以零的错误：

```
DECLARE @dt18YearsAgo AS DATETIME = DATEADD(YEAR,-18,GETDATE());
SELECT
  Customers.Name
FROM
  Customers
WHERE
  Customers.DateOfBirth > @dt18YearsAgo
ORDER BY
  Contacts.LastName ASC, --STATEMENT1
  Contacts.FirstName ASC, --STATEMENT2
  1/(Contacts.ContactID - Contacts.ContactID) --STATEMENT3 
```

Edit2：显然，这并没有除以零：

```
DECLARE @dt18YearsAgo AS DATETIME = DATEADD(YEAR,-18,GETDATE());
SELECT
  Customers.Name
FROM
  Customers
WHERE
  Customers.DateOfBirth > @dt18YearsAgo
ORDER BY
  Contacts.LastName ASC, --STATEMENT1
  Contacts.FirstName ASC, --STATEMENT2
  CASE WHEN 1=0
    THEN Contacts.ContactID
    ELSE 1/(Contacts.ContactID - Contacts.ContactID)
  END --STATEMENT3 
```

好吧，我的问题的原始答案是肯定的，它确实执行了，但好的是我可以在适当的情况下停止执行

编辑 3：我们可以使用适当的 CASE WHEN 停止执行 ORDER BY 语句。我想，诀窍是弄清楚如何正确使用它。CASE WHEN 会给我我想要的东西，即 ORDER BY 语句中的短路执行。我比较了 SSMS 中的执行计划，根据 CASE WHEN 语句，即使它是一个清晰可见的 SELECT/FROM 语句，也根本不扫描 Purchases 表：

```
DECLARE @dt18YearsAgo AS DATETIME = DATEADD(YEAR,-18,GETDATE());
SELECT
  Customers.Name
FROM
  Customers
WHERE
  Customers.DateOfBirth > @dt18YearsAgo
ORDER BY
  Contacts.LastName ASC, --STATEMENT1
  Contacts.FirstName ASC, --STATEMENT2
  CASE WHEN 1=0
    THEN
    (
     SELECT
       MAX(PurchaseDateTime)
     FROM
       Purchases
     WHERE
       Purchases.CustomerID = Customers.CustomerID
    )
    ELSE Customers.DateOfBirth
  END DESC 
```

编辑4：现在我完全糊涂了。这是@Lieven 的一个例子

```
WITH Test (name, ID) AS
(SELECT 'Lieven1', 1 UNION ALL SELECT 'Lieven2', 2)

SELECT * FROM Test ORDER BY name, 1/ (ID - ID) 
```

这不会产生除以零，这意味着 SQL Server 实际上确实对某些表进行短路评估，特别是那些使用 WITH 命令创建的表。

尝试使用 TABLE 变量：

```
DECLARE @Test TABLE
(
    NAME nvarchar(30),
    ID int
);
INSERT INTO @Test (Name,ID) VALUES('Lieven1',1);
INSERT INTO @Test (Name,ID) VALUES('Lieven2',2);
SELECT * FROM @Test ORDER BY name, 1/ (ID - ID) 
```

将产生除以零错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T17:52:50.873

首先，您所说的“声明”不是这样的。它们是 ORDER BY（主要）子句的子句。区别很重要，因为“语句”暗示着一些可分离的、有序的和程序性的东西，而 SQL 子句不是这些东西。

具体来说，SQL 子句（即 SQL 主要子句的各个项目（SELECT、FROM、WHERE、ORDER BY 等））没有自己的隐式（或显式）执行顺序。SQL 将以任何它认为方便的方式重新排序它们，并且如果它执行其中任何一个，它几乎总是会执行***所有***它们。简而言之，SQL Server 不会进行那种“短路”优化，因为它们非常有效并且严重妨碍了它所做的非常不同类型的优化（即，统计数据访问/运算符优化）。

所以你原来的问题（你不应该改变）的正确答案是不，不可靠。您不能依赖 SQL Server 不使用 ORDER BY 的某些子句，仅仅因为它看起来不需要。

唯一常见的例外是 CASE 函数可以（在大多数情况下）用于短路执行路径（尽管*在*CASE 函数内，而不是在它之外），但这仅仅是因为它是专门为此设计的。我想不出 SQL 中还有什么其他东西可以让你这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T17:52:55.990

```
DECLARE @MyTable TABLE
(
  Data varchar(30)
)

INSERT INTO @MyTable (Data) SELECT 'One'
INSERT INTO @MyTable (Data) SELECT 'Two'
INSERT INTO @MyTable (Data) SELECT 'Three'

--SELECT *
--FROM @MyTable
--ORDER BY LEN(Data), LEN(Data)/0
  -- Divide by zero error encountered.

SELECT *
FROM @MyTable
ORDER BY LEN(Data), CASE WHEN Data is null THEN LEN(Data)/0 ELSE 1 END
  -- no problem 
```

我也`SET STATISTICS IO ON` 看到了这些结果：

```
SELECT *
FROM @MyTable
ORDER BY LEN(Data)
--(3 row(s) affected)
--Table '#4F2895A9'. Scan count 1, logical reads 1    

SELECT *
FROM @MyTable
ORDER BY LEN(Data), CASE WHEN Data = 'One' THEN (SELECT MAX(t2.Data) FROM @MyTable t2) ELSE Data END
--(3 row(s) affected)
--Table '#4F2895A9'. Scan count 2, logical reads 2

SELECT *
FROM @MyTable
ORDER BY LEN(Data), CASE WHEN Data = 'Zero' THEN (SELECT MAX(t2.Data) FROM @MyTable t2) ELSE Data END
--(3 row(s) affected)
--Table 'Worktable'. Scan count 0, logical reads 0
--Table '#4F2895A9'. Scan count 1, logical reads 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T18:39:44.490

我想你已经回答了你的问题。但是，为什么你只对*firstname*，*lastname*上的数据进行排序，如果这两个相同，那么采购订单，否则你会在 DOB 上做？

从逻辑上讲，它应该是*firstname*、*lastname*、*DOB*。如果这三个相同，那么您应该评估*purchaseorderdate*。同名的人很多，但同名和出生日期相同的人却很少。这将减少您查询购买表的时间。

# eclipse-rcp - Eclipse RCP 在“关于”窗口中隐藏安装详细信息

> ID：11475346
> 
> 赞同：0
> 
> 时间：2012-07-13T17:23:13.063
> 
> 标签：eclipse-rcp

我有一个自定义 RCP 应用程序，您知道如何从“关于”对话框中隐藏“**安装详细信息”按钮吗？**

![关于窗口](../Images/72daa1178807d51a1bc29a485dc1bfc5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:52:32.917

I haven't found the way to hide that button, I think the only possibility is to extend AboutDialog and make a new command for your plugin.

```
public class DAboutHandler extends AbstractHandler {

private class DAboutDialog extends AboutDialog
{
    public final static int DETAILS_ID = IDialogConstants.CLIENT_ID + 1;
    public DAboutDialog(Shell parentShell) {
        super(parentShell);
    }

    @Override
    protected Button createButton(Composite parent, int id, String label, boolean defaultButton) {
        if(id==DETAILS_ID) return null;
        return super.createButton(parent, id, label, defaultButton);
    }
}
/*
 * (non-Javadoc)
 * 
 * @see org.eclipse.core.commands.IHandler#execute(org.eclipse.core.commands.ExecutionEvent)
 */
public DAboutDialog execute(ExecutionEvent event) throws ExecutionException {
    new DAboutDialog(HandlerUtil.getActiveShellChecked(event)).open();
    return null;
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:36:08.290

我不认为你可以......安装详细信息按钮是在 AboutDialog createButtonsForButtonBar 方法中创建的......看起来它是无条件的。

# c# - 将 Memory Stream 表示为物理文件

> ID：11475347
> 
> 赞同：5
> 
> 时间：2012-07-13T17:23:15.133
> 
> 标签：c#, api, filesystems, memorystream

我今天遇到了一个愚蠢的问题：

在我的项目中我必须使用一个库（我无法替换），他的问题是我正在使用`MemoryStream`而不是经常保存到 HDD（因为有很多文件，而且它们的大小很小，所以它是完美的为`MemoryStream`）。问题是库 API 是围绕文件系统访问构建的——其中一个函数只接受文件的直接路径。

我怎样才能仍然向该方法发送一个字符串（路径），从而在`FileStream`不实际接触硬盘驱动器的情况下创建一个新的？

例如“\MEMORY\myfile.bin”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:30:52.780

嗯——就是这么想的。
基本上，您有三种可能的解决方案：

1.  您可以使用反射器来修改给定的库。
2.  您可以*检查*适当的方法，然后，通过使用一些反射魔法，您*可以*在运行时修改对象（非常不推荐）
3.  您可以使用系统调用和 API - 并通过进入低级 ring0 程序集修改`kernal.dll`为从您的路径到内存的引用 I/O 查询。（也许没有 ring0 访问权限是可能的——我不确定）。

显然，最推荐的是使用反射器来修改给定的库。否则，我无法为您找到解决方案。

在回应第一条评论时，您可以：
*使用 RAMDrive（一个分配小块系统内存并将其显示为分区的程序）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T17:51:47.730

如果文件必须存在于磁盘上（并且只接受磁盘路径），那么主要选项是虚拟文件系统，它允许您将自定义数据公开为文件系统。有几个选项，例如现在已死的 Dokan、我们的 Solid File System OS Edition 和回调文件系统（请参阅我们的[虚拟存储](http://www.eldos.com/virtual-storage/)产品线的描述），也许 Pismo File Mount 可以工作（从未仔细研究过）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T17:55:30.590

这一切都取决于图书馆的构建方式。

如果它是一个使用 100% 托管的库`FileStream`，那么您可能会被卡住。

如果它采用提供的文件名并调用本机 WIN32`CreateFile`函数，则可以给它提供其他文件而不是文件，例如命名管道。

要快速测试是否可行，请传递`@"\\.\pipe\random_name"`给方法：如果它通过明确表示无法打开以 开头的管道和文件名进行响应`\\.\`，好吧，对不起。另一方面，如果它说找不到文件，你就有机会让它工作。

`NamedPipeServerStream`然后，您可以为您的库方法调用创建一个并使用相同的名称，并以`\\.\pipe\`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T17:25:43.937

您不能将其“表示”为文件，但可以使用`StreamWriter`类将其“转换”为文件。

# mysql - mysql查询中字符串中的连字符导致奇怪的行为

> ID：11475349
> 
> 赞同：3
> 
> 时间：2012-07-13T17:23:27.947
> 
> 标签：mysql, sql, ruby-on-rails, database

在我的 Rails 测试环境中，我有一个`user_id`看起来像`1234-567abc89`. 通过在不同的表中查询此用户，我得到了不一致的行为。大多数查询都有效，但运行一个特定查询失败：

```
ActiveRecord::StatementInvalid (Mysql::Error: Unknown column '1234' in 
'where clause': SELECT * FROM `point_allocations` WHERE (user_id = 1234-567abc89) ): 
```

因此，出于某种原因，连字符以外的所有内容都被切断了。我意识到对于有效的查询，它正在查找 user`1234`而不是`1234-567abc89`，但是如果所有其他查询都有效，那么知道为什么只有这个会返回错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T17:25:44.200

你需要包括报价。

```
SELECT * FROM `point_allocations` WHERE (user_id = '1234-567abc89') 
```

因为该`user_id`列需要字符类型的数据，所以它将获取您的值 (1234-567abc89) 并将其解析为整数，截断连字符后的内容。如果您将其包含在引号中，它将接受它作为字符串并正确传输。

享受和好运！

# sql-server - 在子查询中使用 OuterQuery 列

> ID：11475358
> 
> 赞同：0
> 
> 时间：2012-07-13T17:24:12.237
> 
> 标签：sql-server, sql-server-2008, stored-procedures, sqlexception

嗨，我正在做一个子查询来获取 cTL 列的值但是我需要子查询中的外列值才能正确响应，但是我收到错误，它无法识别 SC 和 RC 变量。有什么出路吗？

```
SELECT DISTINCT(cStoreCode) as SC
    ,cRetailerCode as RC
    , cStoreCode + ' - ' + cStoreName AS Store,
    x.TeamLead 
FROM
(
    SELECT cTL as TeamLead 
    FROM tblEmpSchedule 
    WHERE   cRepCode LIKE @repCode AND
        cClientCode LIKE @gCode AND
        cProjectCode LIKE @pCode AND
        cYear LIKE @year AND
        cCycleNo LIKE @cycleNo AND
        cRetailerCode LIKE @retailerCode AND
        cStoreCode = SC AND
        cRetailerCode = RC
 )x
,tblEmpSchedule 
WHERE cRepCode LIKE @repCode AND
    cClientCode LIKE @gCode AND
    cProjectCode LIKE @pCode AND
    cYear LIKE @year AND
    cCycleNo LIKE @cycleNo AND
    cRetailerCode LIKE @retailerCode AND
    cStoreCode <> '' AND cStoreCode is Not Null
ORDER BY cStoreCode 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:34:38.097

看起来您需要在 SC/RC 周围加上单引号：

```
cStoreCode = 'SC' AND
cRetailerCode = 'RC' 
```

编辑：

请检查以下内容是否可行：

```
SELECT cTL as TeamLead 
FROM tblEmpSchedule t1
INNER JOIN 
(
  SELECT DISTINCT(cStoreCode) SC
    , cRetailerCode RC
    , cStoreCode + ' - ' + cStoreName AS Store
  FROM tblEmpSchedule
)t2

  on t1.cTL = t2.cTL
WHERE t1.cRepCode LIKE @repCode 
  AND t1.cClientCode LIKE @gCode 
  AND t1.cProjectCode LIKE @pCode 
  AND t1.cYear LIKE @year 
  AND t1.cCycleNo LIKE @cycleNo 
  AND t1.cRetailerCode LIKE @retailerCode 
  AND (t1.cStoreCode <> '' AND t1.cStoreCode is Not Null)
  AND t1.cStoreCode = t2.SC
  AND t1.cRetailerCode = t2.RC
ORDER BY  t1.cStoreCode 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T20:57:07.323

不，您不能在 WHERE 子句中为这样的表达式引用别名。仅当来自内联视图或 CTE（在 FROM 子句中引用）时，才能在 WHERE 子句中引用表达式的别名。

DISTINCT 关键字的使用看起来很奇怪。不需要将 SELECT 列表中的第一个表达式用括号括起来。您的构造使它几乎看起来像是一个函数调用。（不是，DISTINCT 关键字适用于 SELECT 列表中的所有表达式）。

完全不清楚为什么在这里需要 JOIN 操作。

我讨厌用问题来回答问题，但是...您想通过使用内联视图从别名为 TeamLead 的 cTL 列中获取值来获得什么？这应该解决什么问题？为什么表需要被引用两次？

换个方式问同样的问题...

tblEmpSchedule 表上的查询返回的结果集有什么“错误”，比如这个？

```
SELECT DISTINCT s.cStoreCode             AS sc
     , s.cRetailerCode                   AS rc
     , s.cStoreCode + ' - ' + cStoreName AS Store
     , s.cTL                             AS TeamLead
  FROM tblEmpSchedule s
 WHERE s.cRepCode LIKE @repCode AND
       s.cClientCode LIKE @gCode AND
       s.cProjectCode LIKE @pCode AND
       s.cYear LIKE @year AND
       s.cCycleNo LIKE @cycleNo AND
       s.cRetailerCode LIKE @retailerCode AND
       s.cStoreCode <> ''
 ORDER BY s.cStoreCode 
```

如果您可以解释为什么此查询返回的结果集与您需要的不同，那么我（或其他人）可能会提供帮助。正如您的问题所表明的那样，尚不清楚您要达到的目标。

注意：`cStoreCode IS NOT NULL`查询中的“”谓词是多余的。`cStoreCode <> ''`如果“ ”谓词返回 TRUE ，我们已经知道它不能为 NULL 。

# c# - c# - 从 wordpress 帖子内容中删除 [youtube] 的正则表达式

> ID：11475360
> 
> 赞同：0
> 
> 时间：2012-07-13T17:24:18.317
> 
> 标签：c#, regex, wordpress

我有这个删除 html 的正则表达式：

sr.Text = Regex.Replace(sr.Text, @"<[^>]*>", "");

应该是什么正则表达式来删除 html 和

[youtube width="610" height="343"]http://www.youtube.com/watch?v=w_BPwoPbghw&hd=1[/youtube]

从帖子内容？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T22:18:49.940

通过尝试 [youtube.*[/youtube] 解决它 [youtube 之后有宽度和高度

最终代码： sr.Text = Regex.Replace(sr.Text, @"[youtube.*[/youtube]", "");

# android - 形状drawable和canvas.draw之间的区别，解决方法？

> ID：11475362
> 
> 赞同：1
> 
> 时间：2012-07-13T17:24:21.170
> 
> 标签：android, android-canvas, shapedrawable

我使用两种方法在我的应用程序中显示按钮和编辑文本：一种是使用可绘制的 xml 形状，并将其应用于按钮/edittext 的背景，另一种是在自定义视图中使用画布。

我希望结果完全相同，但事实并非如此。您可以在下面看到各个笔画之间的微小差异：

![在此处输入图像描述](../Images/3dae3e64c2bef23ea74f39206ca5a94c.png)

两者都是具有 2dp 笔划宽度和 8dp 角半径的圆形矩形。这是每个人的代码：

左，用作背景的可绘制形状：

```
<?xml version="1.0" encoding="UTF-8"?>
<shape
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <solid android:color="@color/transparent"/>
    <corners android:radius="@dimen/button_cornersRadius"/>
    <stroke
        android:width="@dimen/button_strokeWidth"
        android:color="@color/blue_light"/>
</shape> 
```

对了，自定义视图的 onDraw 方法：

```
protected void onDraw(Canvas canvas) {
canvas.drawPath(drawingPath,strokePaint);
canvas.drawText(text,demiWidth,textHeight,textPaint);
} 
```

哪里：

```
 strokePaint     = new Paint(Paint.ANTI_ALIAS_FLAG);
    strokePaint     .setStyle(Paint.Style.STROKE);
    strokePaint     .setStrokeWidth((int)(2*densityObtainedWithDisplayMetrics)));
    strokePaint     .setColor(the exact same as above); 
```

而且我在使用相同的所谓等效方式显示渐变时观察到微小的差异：可绘制的形状具有更好的显示效果，颜色看起来更好，线条不模糊。

有人可以解释一下为什么/如何解决它吗？如果我只使用一种方式，那将是第二种方式，但我不想这样做，因为它看起来不干净。谢谢你的帮助！

编辑 ：

令人惊讶的是，这种差异仅在自定义布局的笔画宽度为奇数时才会出现。对于偶数值，显示完全相同！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:04:48.027

我建议您查看`GradientDrawable`（实际从`<shape>`XML 标记创建的对象）的源代码，以查看框架为创建的给定形状放置的绘制调用。

[GradientDrawable.java](https://github.com/android/platform_frameworks_base/blob/master/graphics/java/android/graphics/drawable/GradientDrawable.java)

您可以在该`inflate()`方法中看到如何将 XML 解析为对象，然后该方法`draw()`是包含所有相关`Canvas`代码的地方。

编辑：一目了然，我看到的唯一主要区别是框架使用`canvas.drawRoundedRect()`而不是`canvas.drawPath()`在提供单个半径值时使用。它也适用于填充和描边，即使在您的情况下填充是透明的。可能还有其他差异，我没有仔细跟踪所有代码。

# objective-c - 如何跟踪按下 UIButton 的次数？

> ID：11475364
> 
> 赞同：0
> 
> 时间：2012-07-13T17:24:28.613
> 
> 标签：objective-c, ios, xcode, uibutton

我需要知道我的程序中的按钮被按下了多少次。我尝试创建一个类别`UIButton`并向其添加属性，以便每次按下按钮时我都会说`sender.someproperty++;`，但是当我将属性添加到类别时编译器会抱怨。

有什么办法可以跟踪这个吗？我希望 Xcode 中的每个对象都有一个随机`unassigned integer property`的，你可以随机分配不同的值来跟踪每个对象

我第一次按下按钮时，我想要发生一些事情，第二次，我想要发生其他事情，第三次，我想要发生其他事情，然后第四次我希望它默认，所以就像我我是第一次按下它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T17:28:14.200

您要做的是在按钮所在视图的视图控制器中创建一个 buttonPressedCounter 属性，并以这种方式对其进行跟踪。

至于更改功能，请将其定义为 buttonPressedCounter = 0、1 和 2，然后在您的行为中为 buttonPressedCounter = 2 重置计数器，或者您的检查应基于 buttonPressedCounter % 3。

**编辑评论：** 我认为您还可以做的是创建一个扩展 UIButton 的新类，并在其中声明一个计数器属性。这应该对您有用，并且可能比一系列计数器变量更适合您的口味。

可能看起来像这样

```
@interface UIButtonCountable : UIButton
{
    int _clickCounter;
}

@property (nonatomic) int clickCounter;

@end 
```

另一个选择是不使用 UIButton，而是使用具有 3 个可能值的滑块或分段控件，尽管我对这两种方法几乎没有经验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:34:07.873

子类化 UIButton 绝对是危险的，因为 UIButton 不是一个单一的类，而是一个[类簇](https://developer.apple.com/library/ios/#documentation/General/Conceptual/DevPedia-CocoaCore/ClassCluster.html)。我强烈建议不要这样做。据苹果称：

> 类集群架构涉及简单性和可扩展性之间的权衡：让一些公共类代替大量私有类，这使得在框架中学习和使用类更容易，但在任何集群中创建子类有点困难.
> 
> 您在类集群中创建的新类必须：
> 
> - 成为集群抽象超类的子类
> 
> - 声明自己的存储
> 
> - 覆盖超类的原始方法

您可以使用[关联引用](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocAssociativeReferences.html)并向类别添加 getter 和 setter 方法来模拟按钮上的属性，而不是向类别添加属性。

# php - 连接MYSQL出错

> ID：11475365
> 
> 赞同：7
> 
> 时间：2012-07-13T17:24:29.287
> 
> 标签：php, mysql, connection

这是 config.php 文件

```
<?php

error_reporting(E_ALL ^ E_NOTICE);

/*=========== Database Configuraiton ==========*/

$db_host = "localhost";
$db_user = "test";
$db_pass = "test";
$db_name = "dbtest";

/*=========== Website Configuration ==========*/

$defaultTitle = 'testing';
$defaultFooter = date('Y').' &copy; testing';

?> 
```

这是对 config.php 的引用

```
<?php

require_once "includes/config.php";
require_once "includes/connect.php";
require_once "includes/helpers.php";

header('Cache-Control: max-age=3600, public');
header('Pragma: cache');
header("Last-Modified: ".gmdate("D, d M Y H:i:s",time())." GMT");
header("Expires: ".gmdate("D, d M Y H:i:s",time()+3600)." GMT");

?> 
```

Connect.php 在下面

```
<?php

/*
        The login details are taken from config.php.
*/

try {
    $db = new PDO(
        "mysql:host=$db_host;dbname=$db_name;charset=UTF-8",
        $db_user,
        $db_pass
    );

    $db->query("SET NAMES 'utf8'");
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
}
catch(PDOException $e) {
    error_log($e->getMessage());
    die("A database error was encountered");
}

?> 
```

有人看到这段代码的问题吗？我从 connect.php 收到错误消息“遇到数据库错误”我需要另一双眼睛，因为我的所有信息看起来都是正确的，而且我在代码中看不到错误。谢谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-23T07:15:14.267

您只需将 UTF-8 更改为 utf8 ..

```
try {
      $db = new PDO(
              "mysql:host=$db_host;dbname=$db_name;charset=utf8",
              $db_user,
              $db_pass
            ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T17:43:08.863

一旦尝试直接使用您的凭据，而不是将它们用作变量。

也尝试使用以下调试：

```
catch(PDOException $e) {
    error_log($e->getMessage());
    die("A database error was encountered -> " . $e->getMessage() );
} 
```

让我知道它是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T17:26:39.583

它以前工作过吗？我猜你的问题是“localhost”需要是“127.0.0.1”或类似的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T17:47:53.710

$db->query(...) 用于 SELECT 并且您正在设置一个参数。

尝试

$db->e​​xec(...) 而是可以解决。

# java - 分发我的 JavaGameEngine（使用 Jython）

> ID：11475372
> 
> 赞同：0
> 
> 时间：2012-07-13T17:25:01.547
> 
> 标签：java, jar, jython, distribution

好吧，在从你们那里得到了我所希望的所有帮助之后（谢谢你们），我遇到了一个小问题。当试图在另一台机器上运行我的引擎（在我的计算机上完美运行）时，它给了我“java.lang.NoClassDefFoundError：org/python/util/PythonInterpreter”。我的引擎使用 jython 编写脚本，但是没有人安装 jython，也没有设置类路径，**那么有没有办法让我在任何机器上分发我的 Java/Jython 驱动的引擎，而不会给用户带来任何麻烦？**

仅当我分发时，我不需要我的应用程序是一个 jar，但这可以实现吗？

感谢您的任何回复：D

* * *

在我希望分发的文件夹中，我有 jython jar、游戏引擎类文件、脚本、声音以及我需要的任何图像。我什至尝试在第二台计算机上安装 jython，毕竟……它仍然无法正常工作:(是这台计算机吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:42:52.040

您需要在游戏包装中包含包含 jython 的相关 jar（例如 - RPM、tar.gz、msi - 取决于您使用的操作系统）。
然后，您应该有一些脚本运行您的游戏（使用 java 命令行）并在类路径中包含 jython jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T18:22:53.383

请参阅：[使用 Jython 将我的 Python 脚本作为 JAR 文件分发？](https://stackoverflow.com/questions/1252965/distributing-my-python-scripts-as-jars-with-jython/1255113#1255113)

尽管问题是关于在单个 jar 中使用 Jython 分发 Python 脚本，但同样的技术也适用于在一个 jar 中分发额外的 Java 类。

# xamarin.ios - UIPopover 和传递数据 - 越来越近

> ID：11475373
> 
> 赞同：0
> 
> 时间：2012-07-13T17:25:12.257
> 
> 标签：xamarin.ios, uipopovercontroller

我给自己设定了一个简单的挑战，我在许多应用程序中都看到了它，但我遇到了很多困难。

我的任务是拥有一个带有导航栏、按钮和标签的 ViewController。当您按下按钮时，会弹出一个带有新 ViewController 的 UIPopover，并且用户按下该弹出框内的按钮。当他们按下那个按钮时，我的 ViewController 可以使用该信息来做一些事情。就是这样。简单的？

因此，我的父 ViewController 设置为：

```
UIViewController popOverViewController = new PopOverViewController ();
PopoverDelegate _popoverDelegate;  

public override void ViewDidLoad () {
    base.ViewDidLoad ();
    BarButtonItemPopover = new UIPopoverController (popOverViewController);
    BarButtonItemPopover.PopoverContentSize = new SizeF (320, 320);
    _popoverDelegate = new PopoverDelegate();
    BarButtonItemPopover.Delegate = _popoverDelegate;
}

public class PopoverDelegate : UIPopoverControllerDelegate {
     public PopoverDelegate() { }

     public override void DidDismiss (UIPopoverController controller) {
           string mike = "Dismissed";
     }

     public void updateSomething(string someData) {
           // When the user clicks in my popOverViewController I want to come
           // here and do something.  I will then dismiss the popover here.
           string mike = someData;
     }
} 
```

我的 popOverViewController 设置为 UIViewController，上面有一个名为 btnClickMe 的按钮，关键是：

```
 public override void ViewDidLoad () {
      base.ViewDidLoad ();
      this.btnClickMe.TouchUpInside += (s, e) => {
            Console.WriteLine("");
             // When I'm clicked I want to send some 
             // data to the updateSomething("hello world") method
             // in the ViewController that crated me! Help!
        };
 } 
```

我已经调试过了，当我在模拟器中关闭 Popover 时，Delegate 会触发并且我调用 ViewController 中的字符串 mike 确实等于“Dismissed”。

我根本无法理解或发现的是如何从 popoverViewController 调用/引用/触发 updateSomething() 方法。我看过许多使用 UIPopover 的人的例子，但似乎没有人在 Monotouch 中有这样做的例子，所有这些都在 Objective C 中。这是否意味着不可能？还是只针对非常有经验的人？

老实说，我认为 Monotouch 比 Objective C 更容易，因为我是一名经验丰富的 C# 开发人员，但目前我认为学习 Objective C 会更容易！

我希望有人可以帮助我，因为我感到非常困惑/沮丧。

谢谢

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:04:18.090

有很多方法可以解决这个问题。

这是最简单的：

*   `PopoverViewController`将包含您的属性添加到您的`PopoverDelegate`
*   从您的按钮单击处理程序中，调用`YourNewProperty.updateSomething("peppers")`

一般来说，为了解决这些问题，我使用了一个全局“信使”类。这允许其他控制器、委托、类等以全局方式订阅事件，并且必须知道它们来自哪里。这对 Apple 提出的这个疯狂版本的 MVC 确实很有帮助。

我使用来自 TinyIoC 的那个，但它有一些学习曲线需要设置：[https ://github.com/grumpydev/TinyIoC/blob/master/src/TinyIoC/TinyMessenger.cs](https://github.com/grumpydev/TinyIoC/blob/master/src/TinyIoC/TinyMessenger.cs)

# android - 谷歌云消息服务器的 IP 地址

> ID：11475375
> 
> 赞同：5
> 
> 时间：2012-07-13T17:25:14.763
> 
> 标签：android, google-cloud-messaging

我即将在服务器上推出 GCM 的实现，需要通过 IP 打开适当的防火墙。

有谁知道我在哪里可以找到 android.googleapis.com 的 IP 地址范围？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T15:44:29.253

我发现 android.googleapis.com 的 IP 范围没有公布。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-02T15:40:31.680

根据[https://developers.google.com/cloud-messaging/http](https://developers.google.com/cloud-messaging/http)：

> GCM 不提供特定 IP，因此您应该允许防火墙接受与 Google 的 ASN 15169 中列出的 IP 块中包含的所有 IP 地址的传出连接。

[ServerFault 问题](https://serverfault.com/questions/535936/configuring-firewall-for-google-cloud-messaging-asn-15169)链接到 ASN 15169 中包含的以下 IP 范围列表：

*   IPv4：[http ://bgp.he.net/AS15169#_prefixes](http://bgp.he.net/AS15169#_prefixes)
*   IPv6：[http ://bgp.he.net/AS15169#_prefixes6](http://bgp.he.net/AS15169#_prefixes6)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T05:34:13.563

这可能是也可能不是您想要的，但您可以从 cmd (Windows) 或 bash (*nix) 运行“nslookup android.googleapis.com”。我的结果是：

```
nslookup android.googleapis.com
Server:  UnKnown
Address:  192.168.1.130

Non-authoritative answer:
Name:    googleapis.l.google.com
Addresses:  2001:4860:b007::5f
          74.125.142.95
Aliases:  android.googleapis.com 
```

# eclipse-plugin - eclipse API：我如何检查在点击取消时首选项存储中是否有任何更改？

> ID：11475386
> 
> 赞同：0
> 
> 时间：2012-07-13T17:25:51.420
> 
> 标签：eclipse-plugin

我有一个带有列表和几个文本框的首选项页面。我想在用户进行一些更改并且*没有*点击“应用”或“确定”的情况下向用户弹出一个警告对话框，他按下取消。类似“您有未保存的更改。您确定要取消吗？”。

我试过`putValue(String,String)`但偏好立即存储它。我如何保持“中间”状态？检查每个文本框的值或列表的值不是一个好主意。

有一种方法`needsSaving()`，但我不知道它是如何工作的。我如何让它返回真实？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T04:32:02.247

您可以覆盖[`performCancel`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/preference/PreferencePage.html#performCancel%28%29)PreferencePage。

尽管如此，我还是建议不要这样做（RCP 应用程序除外）。管理首选项的一般工作流程由周围的框架提供，如果用户在取消*您的*首选项时收到警告，但在同一 Eclipse 安装中取消其他警告时却没有，这可能会让用户感到困惑。

# c++ - 如何计算字符串映射到整数之间的所有排列

> ID：11475392
> 
> 赞同：0
> 
> 时间：2012-07-13T17:26:08.617
> 
> 标签：c++, permutation

基本上，我想创建字符串向量到整数向量的所有可能映射。我有以下内容：

```
std::vector<std::string> my_strings;
std::vector<unsigned int> my_ints;
my_strings.size() = 20; // not code, just for demonstration.
my_ints.size() = 4; // not code, just for demonstration.

std::vector<std::map<std::string, unsigned int> > all_possible_joint_mappings; 
```

所以，我想填充 to 的所有`all_possible_joint_mappings`可能排列。有什么好的方法可以做到这一点？`my_strings``my_ints`

一个示例联合映射将是：

```
string_1 -> int_1
string_2 -> int_1
string_3 -> int_1
string_4 -> int_4
string_5 -> int_2
...
string_20 -> int_3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:59:39.580

您只需遍历一个集合并在内部循环中遍历另一个集合：

```
std::vector<std::pair<std::string, unsigned int> > all_possible_joint_mappings;

for ( std::vector<std::string>::const_iterator s = my_strings.begin(); s != my_strings.end(); ++s )
{
    for ( std::vector<unsigned int>::const_iterator i = my_ints.begin(); i != my_ints.end(); ++i )
        all_possible_joint_mappings.push_back( std::make_pair( *s, *i ) );
    }
} 
```

请注意，向量只需包含对来完成这项工作。

亲切的问候托尔斯滕

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:35:26.133

如果您想要从每个`string`值到多个`int`值的映射，并且您想要在单个容器中进行所有排列，那么请使用专门为此目的设计的容器类型 ( `std::multimap`)。这是一个例子：

```
#include <vector>
#include <map>
#include <string>
#include <algorithm>
#include <iostream>

int main()
{
   std::vector<std::string> strings;
   std::vector<int> ints;

   strings.push_back("One");
   strings.push_back("Two");
   strings.push_back("Three");
   strings.push_back("Four");
   strings.push_back("Five");

   ints.push_back(1);
   ints.push_back(2);
   ints.push_back(3);

   typedef std::multimap<std::string, int> SIMAP;
   SIMAP string_to_ints;

   std::for_each(
      strings.cbegin(),
      strings.cend(),
      [&ints, &string_to_ints] (const std::string& s)
   {
      std::for_each(
         ints.cbegin(),
         ints.cend(),
         [&] (const int i)
      {
         string_to_ints.insert(std::make_pair(s,i));
      });
   });

   std::for_each(
      string_to_ints.cbegin(),
      string_to_ints.cend(),
      [] (const SIMAP::value_type& mapping)
   {
      std::cout
         << mapping.first << " -> " << mapping.second << "\n";
   });

   return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T19:18:32.233

下面的代码将递归生成`std::vector< std::vector<int> >`所有 3 个字母的单词（按字典顺序），其中每个字母来自一个 4 个字母的字母表。有`64 = 4^3`这样的话。

请注意，一个简单的双循环是不够的，您需要对单词中的每个字母进行递归，并且对于每个字母，您都需要一个循环。总复杂度是`O(K^N)`针对字母字母表中的`N`字母单词`K`，而不是`O(K*N)`双循环。

它以一种直接的方式从 4 个字母的字母表中概括为 20 个字母的单词（尽管那是 2^40 = 1e12 个不同的单词）。当然，将它们与您的原始字符串匹配是一种简单的方式。

```
#include <array>
#include <cstddef>
#include <vector>
#include <iostream>

template<typename T, int K, int N>
void generate_all_multisets(
    std::array<T, K> const& alphabet, 
    std::vector< std::vector<T> >& all_words, 
    std::vector<T>& current_word, 
    int current_letter
)
{
    if (current_letter == N) {
        all_words.push_back(current_word);
        for (auto k = 0; k != N; ++k) 
            std::cout << current_word[k];
        std::cout << "\n";
        return;
    }   

    auto const tmp = current_word[current_letter];
    for (auto letter = alphabet.begin(); letter != alphabet.end(); ++letter) {
        current_word[current_letter] = *letter;
        generate_all_multisets<T, K, N>(alphabet, all_words, current_word, current_letter + 1);
    }
    current_word[current_letter] = tmp; 
}

template<typename T, int K, int N>
void generate_all_words(
    std::array<T, K> const& alphabet, 
    std::vector< std::vector<T> >& all_words
)
{
    // first word
    std::vector<T> word(N, alphabet.front());
    generate_all_multisets<T, K, N>(alphabet, all_words, word, 0);
}

int main()
{
    std::array<int, 4> alphabet = { 1, 2, 3, 4};
    auto const word_length = 3; 

    std::vector< std::vector<int> > all_words;
    generate_all_words<int, 4, 3>(alphabet, all_words);
    return 0;
} 
```

**编辑**：[Ideone上的输出](http://ideone.com/G3dLR)

# c# - 每组 LINQ 的最大值

> ID：11475397
> 
> 赞同：2
> 
> 时间：2012-07-13T17:26:40.470
> 
> 标签：c#, linq-to-entities

我已经尝试了所有可能的方法并到处寻找。我很沮丧，因为这真的很愚蠢。我想要每个组的最大值。我有以下记录。

```
ID  Custno  paydt                    rcvDt                  Mon    Tue
17  106505  2009-12-31 00:00:00.000 2012-07-11 07:15:04.523 100     3
18  106505  2009-12-31 00:00:00.000 2012-07-11 07:15:04.543 NULL    NULL
19  106505  2010-12-31 00:00:00.000 2012-07-11 07:15:04.747 3       3
20  106505  2011-12-31 00:00:00.000 2012-07-11 07:15:04.827 3       3 
```

结果应按 Custno 和 paydt 分组，并以最大 id 返回

```
ID  Custno  paydt                    rcvDt                  Mon    Tue
18  106505  2009-12-31 00:00:00.000 2012-07-11 07:15:04.543 NULL    NULL
19  106505  2010-12-31 00:00:00.000 2012-07-11 07:15:04.747 3   3
20  106505  2011-12-31 00:00:00.000 2012-07-11 07:15:04.827 3   3 
```

尝试了不同的方式，其中一种如下

```
var q = from x in MyTable.ToList()
                        group x by new { x.custno, x.paydt } into g
                        select new MyTable
                        {
                            custno= g.Key.custno,
                            paydt= g.Key.paydt,
                            ID = g.Max(b => b.ID),
                            rcvDt = g.OrderByDescending(a => a.ID).First().rcvDt ,
                            mon = g.OrderByDescending(a => a.ID).First().mon,
                            tue = g.OrderByDescending(a => a.ID).First().tue
                        }; 
```

将感谢帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T17:37:16.163

您可以使用：

```
var q = MyTable.GroupBy(x => new {x.custno, x.paydt})
               .Select(g => g.OrderByDescending(i => i.ID).First()); 
```

这组使用相同的逻辑。它执行您使用的相同分组，但随后从每个组中选择按 ID 降序对组进行排序后的第一条记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T18:43:13.163

尝试

```
var q = MyTable.GroupBy(x => new { x.custno, x.paydt }).Max(y=> y.Max(z => z.ID)); 
```

它应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T19:12:31.193

不确定是否可以在单个查询中完成，但您始终可以分两步完成：

```
 var maxIds = MyTable.GroupBy(x => new {x.custno, x.paydt}).Select(g => g.Max(i => i.ID));
    var result = MyTable.Where(x => maxIds.Contains(x.ID)); 
```

# text - 我可以对具有 contenteditable 的元素使用自动对焦吗？

> ID：11475398
> 
> 赞同：17
> 
> 时间：2012-07-13T17:26:48.447
> 
> 标签：text, input, contenteditable, autofocus

我`contenteditable`在 a 上使用该属性`<div>`以使其按需充当文本字段（供用户重命名）。但我也想启用`autofocus`它，这样用户就可以立即开始输入（最初`<div>`总是`contenteditable`启用）。

这是有效的和/或可能的吗？还是我必须切换到标准文本输入？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-13T22:53:14.940

我认为，您必须在大多数浏览器中使用 JavaScript。它不适用于 iOS，它只允许`focus()`在真正的用户交互的事件处理程序中以编程方式使用（例如与`click`触摸相关的事件）。

另外，请注意，如果页面上有其他输入，则用户可能会在文档完全加载之前专注于其中之一，在这种情况下，用户发现焦点已从当`load`事件触发时在它们下方，因此您应该使用输入的`focus`事件来跟踪它。

```
<div contenteditable="true" id="editable"></div>

<script type="text/javascript">
    window.onload = function() {
        document.getElementById("editable").focus();
    };
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-21T03:55:11.223

对于未来的观众：

我想我可能有一个更优雅的解决方案。

```
$(window).on("load", function() {
  $("[autofocus]").focus();
}); 
```

所以，一旦页面加载... BAM jQuery 专注于具有“自动对焦”属性的元素！

您可以使用选择器来获得您想要的东西。

# powershell - 如何添加自动完成功能和通配符功能？

> ID：11475405
> 
> 赞同：2
> 
> 时间：2012-07-13T17:27:08.393
> 
> 标签：powershell

我有一个命令`UpdateModule`，它将模块从网络共享复制到本地模块文件夹，然后重新加载模块。

我想将制表符补全添加到模块中，以便它根据`'~\Documents\WindowsPowerShell\Modules'`. 另外我想`UpdateModule *`用来更新所有的模块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T06:40:04.483

（还）没有办法为制表符补全提供“动态值”。您可以对参数验证属性中的值进行硬编码，然后制表符完成将获取它们：

```
function Test-TabCompletion
{
    param(
        [ValidateSet('module1','module2','module3')]
        [string]$Name       
    )
}

Test-TabCompletion -Name <tab> 
```

# eclipse - 在 STS Spring Grails 中：将 jar 放在哪里以便它位于 tomcat 的 shared/lib 中？

> ID：11475406
> 
> 赞同：0
> 
> 时间：2012-07-13T17:27:09.787
> 
> 标签：eclipse, grails, jar, sts-springsourcetoolsuite

我在 STS Spring 中使用 Grails，根据[Xuggler 文档](http://www.xuggle.com/xuggler/downloads)，我需要将 xuggler.jar 文件放入 tomcat 的 shared/lib 目录中。

Grails/STS Spring 中运行应用程序 tomcat 服务器的目录在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T02:14:34.553

你没有。配置服务器或配置 Tomcat 是与构建和部署应用程序不同的活动。Tomcat 是一个容器（Web 服务器），其中可以包含许多应用程序。

您只需要在 Tomcat 的 lib 目录中安装 JAR 一次，但您将多次构建和重新部署您的应用程序到服务器。如果你想在你的应用程序中包含一个 JAR（而不是在 Tomcat 中），那么你可以在 grails-app/conf 中的 BuildConfig.groovy 中执行此操作。但是这些 jar 包会包含在应用程序的 WAR 文件中，它们不会进入 Tomcat 的 lib 目录。

# caching - 创建缓存后，我可以移动 symfony2 目录或主机吗？

> ID：11475409
> 
> 赞同：0
> 
> 时间：2012-07-13T17:27:17.213
> 
> 标签：caching, deployment, symfony

**问题：**

sf2 缓存是否与目录无关？即：我可以`cache:clear`在某个目录中进行操作，然后将项目目录移动到另一台机器/目录而不破坏缓存吗？

**场景：**

*   我们有一个基于 Symfony2 的应用程序。
*   生产机器有500MB。
*   我们目前通过上传软件然后清除缓存来部署。
*   在生产机器中，`app/console cache:clear`大约需要 5 分钟才能生成。
*   在 2GB 的开发机器中，它只持续几秒钟。

我们要求最大限度地缩短生产时间。5分钟等待缓存太多了。

我们考虑`cache:clear`在本地机器上运行，然后使用已经生成的缓存将产品上传到生产环境。项目的本地路径（/home/ubuntu/devel/...）与生产路径（/var/www）不同，不能调整为相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T22:07:43.753

Symfony2 缓存在各个地方都使用绝对路径，因此如果路径不同，您无法将缓存从一台机器复制到另一台机器。

您真正需要的是通过 capifony 进行部署。部署后，它会在您的实时计算机上创建一个新文件夹，在该文件夹中准备项目的新版本（包括发布资产、清除缓存等），然后简单地将旧文件夹切换到新文件夹。

由于实时服务器上保留了一定数量的旧版本，因此您甚至可以在必要时进行回滚。

您可以使用 capifony 和 Jenkins CI 构建一个漂亮的一键式部署；）

# hash - 128 位散列的任何 64 位部分是否与 64 位散列一样防冲突？

> ID：11475423
> 
> 赞同：20
> 
> 时间：2012-07-13T17:28:39.910
> 
> 标签：hash, cryptography, sha1, murmurhash

我们正在尝试解决我们开发团队的内部争论：

我们正在寻找一个 64 位 PHP 哈希函数。我们找到了MurmurHash3 的[PHP 实现](https://github.com/Vaizard/MurmurHash3PHP)，但 MurmurHash3 是 32 位或 128 位，而不是 64 位。

同事 #1 认为，要从 MurmurHash3 生成 64 位散列，我们可以简单地对 128 位散列的第一个（或最后一个，或任何一个）64 位进行切片，并且它将与本机一样防冲突64 位哈希函数。

同事 #2 认为我们必须找到一个原生 64 位散列函数来减少冲突，并且 128 位散列的 64 位切片不会像原生 64 位散列那样防冲突。

谁是正确的？

如果我们采用第一个（或最后一个，或任何一个）64 位加密散列（如 SHA1 而不是 Murmur3），答案是否会改变？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-15T00:10:56.220

如果您有真正的随机、均匀分布的值，那么“切片”将产生完全相同的结果，就好像您从一开始就使用较小的值一样。要了解原因，请考虑这个非常简单的示例：假设您的随机生成器输出 3 个随机位，但您只需要一个随机位即可使用。假设输出是

```
b1 b2 b3 
```

可能的值为

```
000, 001, 010, 011, 100, 101, 110, 111 
```

并且所有都以 1/8 的相同概率发生。现在，无论出于您的目的从这三个中切出什么位 - 第一个，第二个或第三个 - 无论位置如何，拥有“1”的概率始终是 1/2 - 对于“0”也是如此'。

您可以轻松地将这个实验扩展到 128 位中的 64 位情况：无论您切片哪些位，在某个位置以 1 或 0 结束的概率都是一半。这意味着*如果*您从均匀分布的随机变量中获取样本，那么切片不会或多或少地增加发生碰撞的可能性。

现在一个很好的问题是随机函数是否真的是我们能做的最好的防止碰撞的方法。但事实证明，只要函数偏离随机值，发现碰撞的概率就会增加。

### 加密哈希函数：同事 #1 获胜

现实生活中的问题是哈希函数根本不是随机的，相反，它们是无聊的确定性。但是密码散列函数的设计目标如下：如果我们不知道它们的初始状态，那么它们的输出将在计算上与真正的随机函数无法区分，即没有计算上有效的方法来区分散列输出之间的差异和真正的随机值。这就是为什么如果你能找到一个“鉴别器”，你会认为散列已经被破坏了，这是一种将散列与概率高于一半的真实随机值区分开来的方法。不幸的是，我们无法真正证明现有加密哈希的这些属性，但除非有人破解它们，否则我们可以假设这些属性具有一定的信心。关于说明该过程的 SHA-3 提交文件之一的区分符。

总而言之，除非为给定的加密哈希找到区分符，否则切片非常好，并且不会增加冲突的可能性。

### 非加密哈希函数：同事 #2 可能会获胜

非加密散列不必满足与加密散列相同的一组要求。它们通常被定义为非常快并且“在理智/仁慈的条件下”满足某些属性，但如果有人试图恶意操纵它们，它们可能很容易达不到要求。这在实践中意味着什么的一个很好的例子是今年早些时候提出的对哈希表实现 ( [hashDoS ) 的计算复杂性攻击。](http://cryptanalysis.eu/blog/2011/12/28/effective-dos-attacks-against-web-application-plattforms-hashdos/)在正常情况下，非加密哈希工作得非常好，但它们的抗碰撞性可能会被一些聪明的输入严重破坏。加密散列函数不会发生这种情况，因为它们的定义要求它们不受各种巧妙输入的影响。

因为有可能，有时甚至很容易，为非密码散列的输出找到像上面这样的区分符，我们可以立即说它们不符合密码散列函数的条件。能够分辨出差异意味着输出中的某个地方存在模式或偏差。

仅这一事实就意味着它们或多或少地偏离了随机函数，因此（根据我们上面所说的）碰撞可能比随机函数更有可能发生。最后，由于对于完整的 128 位已经发生冲突的概率较高，因此输出越短，这种情况就不会变得更好，在这种情况下，冲突的可能性可能更大。

**tl; dr**截断加密散列函数时，您是安全的。但是，与将具有较大输出的非加密哈希截断为 64 位相比，使用“本机”64 位加密哈希函数会更好。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-13T17:39:21.127

由于雪崩效应，强散列是指源中的单个位变化导致散列的一半位平均翻转。那么，对于一个好的散列，“散列”是均匀分布的，因此每个部分或切片都受到相等且均匀分布的源比特数量的影响，因此与具有相同比特长度的任何其他切片一样强是。

只要哈希具有良好的属性和均匀分布，我就会同意同事 1。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-25T22:20:52.147

如果没有提到这一点，这个问题似乎不完整：

对于特定类别的输入（例如，对于某些合理值的长度输入），一些散列可以证明是[完美](http://en.wikipedia.org/wiki/Perfect_hash_function)的散列。如果您截断该哈希，那么您可能会破坏该属性，在这种情况下，根据定义，您将冲突率从零增加到非零，并且您已经削弱了该用例中的哈希。`n``n`

这不是一般情况，但它是截断哈希时合理关注的一个示例。

# jakarta-ee - 是否可以在 Tomcat 中为单个 webapp 运行 Logback？

> ID：11475432
> 
> 赞同：1
> 
> 时间：2012-07-13T17:29:13.967
> 
> 标签：jakarta-ee, tomcat, slf4j, logback

我想将我的一个 webapp 配置为完全使用 SLF4J 而不是 Logback 进行日志记录。我想不理会 Tomcat 的其余部分，我只想确保在我的 webapp 中完成的所有日志记录（通过 Spring、Hibernate、EhCache 等）都是通过 SLF4J 通过我的 webapp 的 Logback 上下文完成的，而不是通过 Tomcat 的默认 (JUL?) 日志系统。

我注意到多个库在记录时“缺少” SLF4J，通常在任何其他情况下都会使用 SLF4J。EhCache*正在*使用 SLF4J，但 Spring 和其他一些库正在使用 JUL 并忽略 SLF4J：

```
Jul 13, 2012 11:25:45 AM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring FrameworkServlet 'spring'
Jul 13, 2012 11:25:45 AM org.springframework.web.servlet.FrameworkServlet initServletBean
INFO: FrameworkServlet 'spring': initialization started
Jul 13, 2012 11:25:45 AM org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing WebApplicationContext for namespace 'spring-servlet': startup date [Fri Jul 13 11:25:45 PDT 2012]; root of context hierarchy
Jul 13, 2012 11:25:45 AM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/applicationContext.xml]
...
Jul 13, 2012 11:25:45 AM org.springframework.cache.ehcache.EhCacheManagerFactoryBean afterPropertiesSet
INFO: Initializing EHCache CacheManager
11:25:45.795 [pool-2-thread-1] DEBUG net.sf.ehcache.config.ConfigurationFactory - Configuring ehcache from InputStream
11:25:45.808 [pool-2-thread-1] DEBUG net.sf.ehcache.config.BeanHandler - Ignoring ehcache attribute xmlns:xsi
11:25:45.808 [pool-2-thread-1] DEBUG net.sf.ehcache.config.BeanHandler - Ignoring ehcache attribute xsi:noNamespaceSchemaLocation
11:25:45.809 [pool-2-thread-1] DEBUG net.sf.ehcache.config.DiskStoreConfiguration - Disk Store Path: /tmp/ehcache
11:25:45.828 [pool-2-thread-1] DEBUG net.sf.ehcache.config.ConfigurationHelper - No CacheManagerEventListenerFactory class specified. Skipping...
11:25:45.847 [pool-2-thread-1] DEBUG net.sf.ehcache.Cache - No BootstrapCacheLoaderFactory class specified. Skipping...
11:25:45.847 [pool-2-thread-1] DEBUG net.sf.ehcache.Cache - CacheWriter factory not configured. Skipping...
11:25:45.847 [pool-2-thread-1] DEBUG net.sf.ehcache.config.ConfigurationHelper - No CacheExceptionHandlerFactory class specified. Skipping...
11:25:45.849 [pool-2-thread-1] DEBUG net.sf.ehcache.Cache - No BootstrapCacheLoaderFactory class specified. Skipping...
11:25:45.849 [pool-2-thread-1] DEBUG net.sf.ehcache.Cache - CacheWriter factory not configured. Skipping...
11:25:45.849 [pool-2-thread-1] DEBUG net.sf.ehcache.config.ConfigurationHelper - No CacheExceptionHandlerFactory class specified. Skipping...
11:25:45.866 [pool-2-thread-1] DEBUG net.sf.ehcache.store.MemoryStore - Initialized net.sf.ehcache.store.NotifyingMemoryStore for encodingJobDetails.cache
11:25:45.869 [pool-2-thread-1] DEBUG net.sf.ehcache.Cache - Initialised cache: encodingJobDetails.cache
Jul 13, 2012 11:25:45 AM org.springframework.web.servlet.handler.AbstractHandlerMethodMapping registerHandlerMethod
INFO: Mapped "{[/check/{id}],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public com.tkassembled.model.JobDetails com.tkassembled.controller.JobController.check(java.lang.String)
Jul 13, 2012 11:25:45 AM org.springframework.web.servlet.handler.AbstractHandlerMethodMapping registerHandlerMethod
INFO: Mapped "{[/submit],methods=[POST],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public com.tkassembled.model.JobTicket com.tkassembled.controller.JobController.submit(com.tkassembled.model.Job)
Jul 13, 2012 11:25:46 AM org.springframework.oxm.jaxb.Jaxb2Marshaller createJaxbContextFromContextPath
INFO: Creating JAXBContext with context path [com.tkassembled.model]
Jul 13, 2012 11:25:46 AM org.springframework.web.servlet.FrameworkServlet initServletBean
INFO: FrameworkServlet 'spring': initialization completed in 939 ms
Jul 13, 2012 11:25:46 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-9080"] 
```

如何让所有支持 SLF4J 的库都使用 Logback？为什么 EhCache 正确使用它而其他一切都没有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:41:46.013

SLF4J 提供了用于将日志从 log4j、jul 和 commons-logging 路由到 SLF4J 的工件。[有关详细信息，请参阅标题为Bridging legacy APIs](http://www.slf4j.org/legacy.html)的文档。

Spring 使用公共日志记录。幸运的是，SLF4J 为 commons-logging 提供了一个完美的二进制替代品，称为[jcl-over-slf4j](http://www.slf4j.org/legacy.html#jclOverSLF4J)。你只需要用 jcl-over-slf4j 替换 commons-logging 依赖项。这在[SLF4J FAQ](http://www.slf4j.org/faq.html#excludingJCL)中有解释。

# c - 与来自 C 程序的 cmd 会话的对话

> ID：11475434
> 
> 赞同：0
> 
> 时间：2012-07-13T17:29:25.200
> 
> 标签：c, windows, cmd

我想通过我的 C 应用程序运行一个 cmd 程序，并能够获取输入并将输出发送到 cmd。我能做这样的事吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:12:59.123

您正在寻找的功能是`system(cmd)`. 您可以正常运行命令（输出将直接打印到屏幕上）：

```
system("command.exe"); 
```

或者在文件中捕获输出 ( `stdout`)：

```
system("command.exe > file.txt"); 
```

# regex - 在 perl 中使用数组元素进行模式匹配

> ID：11475438
> 
> 赞同：3
> 
> 时间：2012-07-13T17:29:41.500
> 
> 标签：regex, perl

Perl 和正则表达式的新手不用说，我正在尝试在 perl 正则表达式中使用数组中的元素。这是片段

```
my $temp  = $line =~ s/somestring[^\n]*$_// for @myarray; 
```

如果我硬编码字符串而不是 $_ 它工作正常。$_ 也可以单独打印字符串。那么我做错了什么？即使使用 for 循环的扩展版本也不会产生匹配。

PS 只是为了澄清数组只有一个元素，我知道它与该行匹配。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T17:40:54.947

它应该可以添加括号，尽管我希望数组的内容没有特殊字符，因为您需要使用`quotemeta`函数来转义它们。

```
my $temp;
($temp  = $line) =~ s/somestring[^\n]*$_// for @myarray; 
```

# jquery - 使用 jquery 和局部视图的 MVC3 布局

> ID：11475439
> 
> 赞同：0
> 
> 时间：2012-07-13T17:29:43.420
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-partialview

我想要实现的是一种布局视图类型的功能，我在弹出窗口顶部有选项卡，这也是一个部分视图，我可以单击它们在 jquery 和部分视图的帮助下在不同页面之间导航. 几乎是一种布局功能。![在此处输入图像描述](../Images/84afb8ef5404884c6a87cfe06bc6dd9f.png)

如果有视频教程或有关如何实现此目的的任何指导，请告诉我。我还需要将 id 传递给局部视图以获取信息。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:55:49.677

有几种方法可以做到：

1）像上面评论中提到的一些人一样，您可以实现 JQuery [.tab()](http://jqueryui.com/demos/tabs/)。这是您可以遵循的教程： [http ://www.jacklmoore.com/notes/jquery-tabs](http://www.jacklmoore.com/notes/jquery-tabs)

2) 您可以创建一个将显示为 JQuery .dialog() 的局部视图。在该局部视图中，您可以在顶部拥有与三个选项卡标题相对应的三个链接。

每个链接都将在 div 上调用 JQuery .show() ，该 div 将包含您要显示的“选项卡”内容和 .hide() 供其他人使用。我通常只是将要显示的 div (tab) 的 id 传递给如下所示：

```
function displaySelectedTab(selectedTab) {
    $("#tab1").hide();
    $("#tab2").hide();
    $("#tab3").hide();

    $(selectedTab).show();
} 
```

3) 第三个选项是为每个选项卡设置单独的局部视图。您可以使用 JQuery [.load()](http://api.jquery.com/load/)方法将不同的选项卡加载到 Div 部分：

```
var url = "/ControllerName/ActionViewThatReturnsPartialView/
$("#popup-div-placeholder").html("").load(url); 
```

要实现弹出窗口机制，您可以利用 JQuery [.dialog()](http://jqueryui.com/demos/dialog/)

希望能帮助到你。

# java - 测试后执行Java示例并用Maven打包

> ID：11475440
> 
> 赞同：1
> 
> 时间：2012-07-13T17:29:43.670
> 
> 标签：java, maven, compilation, execute

我正在尝试运行我的第一个 Java 程序，这是一个与在线 API 交互的示例脚本（Github 上的[源代码）。](https://github.com/nesstar/nesstar-api-demo)

由于它有依赖关系，我按照推荐的步骤使用`mvn test`and `mvn package`，这似乎工作（见[输出](http://pastie.org/4251039)）。

然而，我不明白如何运行我刚刚编译（或打包？）的程序。该`.java`文件包含`public final class NesstarStudyLister`，因此基于`pom.xml`我尝试（在基本目录中）以下命令的文件：

`mhermans@fyr:~/tmp/nesstar-api-demo$ java -cp target/nesstar_study_lister-1.0-SNAPSHOT.jar com.nesstar.demo.NesstarStudyLister`

这[导致](http://pastie.org/4251058)`NoClassDefFoundError`. _

如何成功运行小型 Java 程序？

**编辑**：

根据 Dave Newton 的推荐，我使用了[Exec Maven 插件](http://mojo.codehaus.org/exec-maven-plugin/)，它显然只包含运行

```
mvn exec:java -Dexec.mainClass=com.nesstar.demo.NesstarStudyLister 
```

在基本目录中，它完美地执行了 java 程序。

Andriy Plokhotnyuk 的解决方案也可以使用，使用以下命令：

```
(edit pom.xml to include the <build>...</build> information)
mvn package
java -jar target/nesstar_study_lister-1.0-SNAPSHOT-jar-with-dependencies.jar 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T17:35:42.723

最*简单*的方法通常是[Exec Maven Plugin](http://mojo.codehaus.org/exec-maven-plugin/)。

简而言之：

*   添加 exec 插件作为依赖项。
*   定义主类属性（程序的入口点）。
*   运行 exec 目标。

您也可以使用 Maven 创建一个包含项目依赖项（jar）的目录并手动设置类路径，但是当您可以使用该插件时，IMO 有点痛苦。

您还可以创建一个 jar，将*所有*项目的依赖项包含在一个文件中，但这可能需要更多的工作来显式包含/排除任何冲突的依赖项。（需要注意的是，这也可能是其他任何一种方法的问题。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T17:45:12.077

添加以下插件配置以准备可执行jar：

```
 <project>
 ....   
   <build>
       <plugins>    
          <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <executions>
                <execution>
                    <goals>
                        <goal>single</goal>
                    </goals>
                    <phase>package</phase>
                    <configuration>
                        <descriptorRefs>
                            <descriptorRef>jar-with-dependencies</descriptorRef>
                        </descriptorRefs>
                        <archive>
                            <manifest>
                                <mainClass>com.nesstar.demo.NesstarStudyLister</mainClass>
                            </manifest>
                        </archive>
                    </configuration>
                </execution>
            </executions>
        </plugin>

       </plugins>
   </build>
  ...
</project> 
```

然后转到目标目录并运行：

```
java -jar nesstar_study_lister-1.0-SNAPSHOT-jar-with-dependencies.jar 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T17:33:12.783

您需要创建一个可执行的 jar 文件，然后使用 java -jar filedirectory/fileName.jar

# jquery - jQuery .val() 仅在 Chrome 中“最终”返回 null

> ID：11475444
> 
> 赞同：4
> 
> 时间：2012-07-13T17:29:48.773
> 
> 标签：jquery, google-chrome

2012 年 7 月 17 日更新：不仅仅是“current_width”和“current_height”字段被清除 - 它是整个表单。从视觉上看，浏览器中的表单仍然包含值，但是 jQuery “阻塞”或其他东西 - 并且突然开始将表单中的所有字段读取为 null。

仅使用 .val() 不是问题，因为我已经通过在 preview() 函数中使用 .children() 和 .each() 对其进行了验证：

```
var debugstring = '';
var debugform = $('#hidden_thumb_fields').children("input").each(function (){
    var child = $(this);
    debugstring += child.attr('id')+':'+child.val()+',';
});

console.log(debugstring); 
```

和以前一样，它可以在您拖动选择区域时正常工作，但很快它就会开始返回 null。

请注意，这只发生在 Chrome 中。

* * *

原始帖子：（编辑：删除了 mlx 日志输出）

设想：

1.  上传的图像宽度和高度写入 2 个表单字段：current_width 和 current_height
2.  在上传的图像上启用 imgAreaSelect
3.  imgAreaSelect 的 onInit 和 onSelectChange 调用函数“预览”
4.  “预览”使用 .val() 读取宽度和高度表单字段的值
5.  当您移动选择区域时，会重复调用“预览”
6.  最终，.val() 开始返回 NULL，即使字段仍然明显包含正确的值并且没有被修改。这只发生在 Chrome 中。Firefox 和 Safari 都运行良好。IE 没有经过测试。
7.  如果我使用纯 Javascript (document.getElementById().value)，则没有任何问题。

正如经常引用的那样，我在 $(document).ready 之后调用 imgAreaSelect。之前唯一要做的就是设置 3 个变量，我已经将其包含在下面的预览示例中。

附带说明一下，如果有更好或更可接受的方法来获取图像宽度和高度数据，我会全力以赴。图片上传脚本 (PHP) 是首先设置这些字段的原因，以我的经验水平，我不确定是否有更好的方法来做到这一点。我想要图像的真实尺寸，而不是 .css 宽度和高度，因为它们可能（在我的场景中，通常是）不同。

问题似乎起源的特定代码位就在预览功能的开头：

```
function preview(img, selection) { 
    var current_width = $('#thumbnail_form').find('#current_width').val();
    var current_height = $('#thumbnail_form').find('#current_height').val(); 
```

这是预览（）。如果我删除 .find() 并直接使用 $('#current_width').val()，问题仍然存在：

```
var thumb_width=128;
var thumb_height=128;
var counter=1;

function preview(img, selection) { 
    var current_width = $('#thumbnail_form').find('#current_width').val();
    var current_height = $('#thumbnail_form').find('#current_height').val();

    //var current_width = document.getElementById("current_width").value;
    //var current_height = document.getElementById("current_height").value;

    var scaleX = thumb_width / selection.width; 
    var scaleY = thumb_height / selection.height; 

    var img_css_width = Math.round(scaleX * current_width) + 'px';
    var img_css_height = Math.round(scaleY * current_height) + 'px';
    var img_css_margin_left = '-' + Math.round(scaleX * selection.x1) + 'px';
    var img_css_margin_top = '-' + Math.round(scaleY * selection.y1) + 'px';

    // mlx and the css fields are just to help diagnose the problem
    var mlx = document.getElementById('mlx').value;
    if (!current_width) {
        current_width = 'NULL';
    }
    if (!current_height) {
        current_height = 'NULL';
    }
    $('#mlx').val(mlx+counter+")w:"+current_width+",h:"+current_height+"\n");
    $('#img_css_width').val(img_css_width);
    $('#img_css_height').val(img_css_height);
    $('#img_css_margin_left').val(img_css_margin_left);
    $('#img_css_margin_top').val(img_css_margin_top);

    $('#displayed_icon_container').find('#displayed_icon').css({
    //$('#displayed_icon').css({
        width:  img_css_width,
        height: img_css_height,
        marginLeft: img_css_margin_left,
        marginTop: img_css_margin_top 
    });
    $('#x1').val(selection.x1);
    $('#y1').val(selection.y1);
    $('#x2').val(selection.x2);
    $('#y2').val(selection.y2);
    $('#w').val(selection.width);
    $('#h').val(selection.height);

    // if I re-write these values back to the form, I can circumvent the issue, but why is this necessary?      
    //$('#current_width').val(current_width);
    //$('#current_height').val(current_height);
    $('#sx').val(scaleX);
    $('#sy').val(scaleY);
    counter++;
} 
```

这是 HTML 的相关字段。我不相信文件的其余部分是相关的，但如果有要求，我很乐意发布更多内容。

```
<div id='thumbnail_form'>
<form name='form' action='' method='post'>
<div id='hidden_thumb_fields'>
x1: <input type='text' name='x1' value='' id='x1' /><br />
y1: <input type='text' name='y1' value='' id='y1' /><br />
x2: <input type='text' name='x2' value='' id='x2' /><br />
y2: <input type='text' name='y2' value='' id='y2' /><br />
Selection Width (w): <input type='text' name='w' value='' id='w' /><br />
Selection Height (h): <input type='text' name='h' value='' id='h' /><br />

Old Icon Display URL: <input type='text' name='old_icon_display_URL' value='/whatever/thing.png' id='old_icon_display_URL' /><br />

Large File Width (current_width): <input type='text' name='current_width' value='' id='current_width' /><br />
Large File Height (current_height): <input type='text' name='current_height' value='' id='current_height' /><br />
Img Display Width: <input type='text' name='img_width' value='' id='img_width' /><br />
Img Display Height: <input type='text' name='img_height' value='' id='img_height' /><br />

Img CSS Width: <input type='text' name='img_css_width' value='' id='img_css_width' /><br />
Img CSS Height: <input type='text' name='img_css_height' value='' id='img_css_height' /><br />
Img CSS Margin Left: <input type='text' name='img_css_margin_left' value='' id='img_css_margin_left' /><br />
Img CSS Margin Top: <input type='text' name='img_css_margin_top' value='' id='img_css_margin_top' /><br />

scalex: <input type='text' name='sx' value='' id='sx' /><br />
scaley: <input type='text' name='sy' value='' id='sy' /><br />
Math Log X: <textarea name='mlx' value='' id='mlx' cols='40' rows='10'></textarea><br />

Icon Basedir: <input type='text' name='icon_basedir' value='' id='icon_basedir' /><br />
Icon BaseURL: <input type='text' name='icon_baseURL' value='' id='icon_baseURL' /><br />
Icon Relpath: <input type='text' name='icon_relpath' value='' id='icon_relpath' /><br />
Large Filename: <input type='text' name='large_image_filename' value='' id='large_image_filename' /><br />
Thumb Filename: <input type='text' name='thumb_image_filename' value='' id='thumb_image_filename' /><br />
</div>

<input type='button' name='cancel_thumb' value='Cancel' id='cancel_thumb' />
<input type='submit' name='save_thumb' value='Crop Image' id='save_thumb' />
</form>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T21:20:38.043

这个问题是由[Chrome 的 Firebug Lite 扩展](https://chrome.google.com/webstore/detail/bmagokdooijbeehmkpknfglimnifench)引起的。无论 Firebug Lite 面板是否打开，以及我是否将输出记录到控制台，都会出现问题。现在我知道在隐身模式下测试东西了。感谢大家的时间，并为误报道歉......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T17:46:40.027

抛出 console.log(current_height,current_width); 就在它们设置好之后。我的猜测是它们返回 null，因为您正在通过 Id 检查在 dom 中的多个位置找到的元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T17:50:30.233

好的，也许我不明白你的问题，如果我错了，请纠正我：

现在，您发布的代码在其他代码允许“预览”选择器在屏幕上移动之后开始调用。

当调用此代码时，它似乎开始在两个字段中看到 null，这些字段在调用此代码之前由其他 javascript 填充。

这个对吗？

如果是这样，那么问题可能出在填充这些字段的其他代码中。除了下面的注释之外，我看不到此代码有任何明显的问题，更仔细地阅读您的代码显示的只是您为尝试调试问题而输入的代码。

* * *

也许这会导致溢出：

```
$('#mlx').val(mlx+counter+")w:"+current_width+",h:"+current_height+"\n"); 
```

更改此行时会发生什么：

```
<textarea name='mlx' value='' id='mlx' cols='40' rows='10'></textarea><br /> 
```

对此：

```
<textarea name='mlx' value='' id='mlx' cols='40' rows='200'></textarea><br /> 
```

因为 26 * 14 大约等于 40 * 10。

# tridion - 缓存通道服务 - Tridion 2011 SP1

> ID：11475446
> 
> 赞同：5
> 
> 时间：2012-07-13T17:29:51.363
> 
> 标签：tridion

在我们的单服务器开发环境中，我使用默认设置启用了对象缓存和远程同步。

当我发布分类时，我可以在日志中看到如下内容：

```
DEBUG RMICacheChannelConnector - Attempting to look up cache channel service on //localhost:1099/CacheChannelService
DEBUG RMICacheChannelConnector - Successfully set cache channel service
DEBUG LRUPolicy - LRUModel: listSize = 1  memSize = 128
DEBUG LRUPolicy - LRUModel: listSize = 2  memSize = 5339
DEBUG CacheController - Adding a dependency from Object [35:5034] in Region [/com.tridion.broker.Taxonomies.Taxonomy] to Object [35-5034-5034-512-TF1.left>=TF.left AND TF1.right<=TF.right] in Region [/com.tridion.broker.Taxonomies.Taxonomy] 
```

但是当我取消发布时，缓存永远不会更新，因为我仍然得到缓存的结果，即。当我期望取消发布后，我仍然可以通过我的 API 调用检索分类。

我必须重新启动服务才能刷新更改。

读过[Julian 的 arctile](http://www.sdltridionworld.com/articles/whatisthesdltridionobjectcache.aspx)几乎就像我的经纪人没有收到任何缓存失效 - 这可能吗？日志中是否显示无效消息？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T17:36:58.247

除了您的应用程序之外，您是否还使用远程同步配置了您的部署程序。？每当您发布任何新项目时，部署程序（httpupload）都需要通知缓存通道服务以使其失效，以便应用程序 API 知道（CCS）从代理数据库获取最新内容。

# syntax - 如何在visual basic中客观化多个“目标”？

> ID：11475452
> 
> 赞同：0
> 
> 时间：2012-07-13T17:30:39.590
> 
> 标签：syntax, vb6

我有一个类对象“A”，我想使用`target`. 我可以通过以下代码（visual basic）来实现这一点：

```
dim target : target = A 
```

现在，如果对象 A 有一个属性，例如 ，`a0`我可以通过

```
target.a0 
```

但是，如果现在我有另一个类对象 B，并且它的属性`b0`不是`a0`，我必须先通过更改目标手动访问此属性，然后按如下方式访问其属性：

```
dim target : target = B
target.b0 
```

我想要完成的是客观化`a0`并`b0`使用另一`target`种类似的表示。如果可能的话，这类似于我所追求的：

```
dim target1 : target1 = A
dim target2 : target2 = a0
target1.target2 
```

我知道这行不通，因为 VB 并没有真正认为`target1`is 关键字之类的`target`. 谁能提供一个好的解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T17:41:54.900

根据我对你想要完成的事情的理解（这可能是我的一个大胆假设），你不能做你想做的事情。假设这都是 VB.NET，“Dim target2”的声明与您在“target1.target2”中提供的对属性或方法引用的*引用完全不同。*在后一种情况下，“.target2”必须是声明 target1 的类型的属性或方法。我认为你试图完成的直接声明并不是语言的构造方式。

您可能可以使用一些语法技巧来*处理*它的作用，但就使“target1.target2”以声明性方式解析为对“A.a0”的字面引用而言，这样是行不通的。

如果我误解了，我会提前道歉。

祝你好运！

# ruby-on-rails-3 - Heroku + Rails + PostgreSQL 问题

> ID：11475459
> 
> 赞同：1
> 
> 时间：2012-07-13T17:31:22.063
> 
> 标签：ruby-on-rails-3, postgresql, heroku

我在 Heroku 上建立了一个在本地运行良好的应用程序（使用 sqlite3 作为测试中数据库的 gem），当我推送到 Heroku 并尝试运行它时，我不断收到此错误：

```
 ActiveRecord::StatementInvalid (PG::Error: ERROR:  syntax error at or near "order"
LINE 1: ...lery_url_id = 'k19fv2mytjEb_3gCezLeRA') ORDER BY `order` ASC                                                              ^
: SELECT "pictures".* FROM "pictures"  WHERE (gallery_url_id = 'k19fv2mytjEb_3gCezLeRA') ORDER BY `order` ASC):
app/controllers/galleries_controller.rb:38:in `show' 
```

特别是在这一行：

```
@pictures = Picture.find(:all, :conditions => [ 'gallery_url_id = ?', @gallery.url_id ], :order => "`order` ASC") 
```

注意： order 是一个数据库字段，而不是 SQL 调用或引用。所以不要告诉我我正在做两个订单。那将是愚蠢的。除非它以某种方式被解析。这也很愚蠢。

我知道在本地测试中使用 SQLite 和在生产环境中使用 PostgreSQL (pg) 是一些问题。我的问题是我需要做什么来解决这个问题？是因为我在 find 中调用的标志仅受 SQLite 支持而不是 PostgreSQL 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T17:43:42.637

引用标识符的反引号是 SQLite 也支持的 MySQL 主义。引用标识符的标准语法（PostgreSQL 使用的）是使用双引号：

```
:order => '"order" ASC' 
```

我建议你尽快做两件事：

1.  将列的名称更改`"order"`为未保留的名称。
2.  安装 PostgreSQL 并使用 PostgreSQL 开发是您计划部署到 Heroku。您的开发堆栈应始终与您的部署堆栈完全匹配。

第二点相当重要。数据库可移植性是一个神话，数据库之间存在许多微小差异，以至于编写在多个数据库中工作相同的代码很困难，并且意味着编写自己的可移植层（不，ActiveRecord 不是那个可移植层）。这个小引用问题可能是许多小问题中的第一个。

# sql - Ruby on Rails - 在具有多个条件的对象上查询 JOINS

> ID：11475463
> 
> 赞同：0
> 
> 时间：2012-07-13T17:31:44.027
> 
> 标签：sql, ruby-on-rails, inner-join

RoR 初学者在这里使用 rails 3.2.3 和 ruby​​ 1.9.3

目前，我正在尝试显示与用户在两个 date_time 上选择的日期相匹配的酒店的可用性。

```
 scope :by_availabilities, lambda { |first_day, last_day|
      joins(:rooms).
      joins('INNER JOIN availabilities ON rooms.id=availabilities.room_id').
      where(get_my_where(first_day, last_day)).
      group('hotels.id'<other fields>
    }

def self.get_my_where(first_day, last_day)
        difference = (last_day-first_day).to_i

        condition = ""

        if (difference==1)
          condition = "availabilities.day = '#{first_day}'"
          condition+=""
        else

            for i in 1..difference do
              if(i==difference)
                  condition +="(availabilities.day = '#{first_day}' AND availabilities.availability > 0)"
              else
                condition+="(availabilities.day = '#{first_day+i}' AND availabilities.availability > 0) AND "
              end

            end
        end
--other innerjoins-- 
```

first_day 是 in 日期， last_day 是 out 日期，两者都已正确声明且日期格式正确。

我正确地传递了参数，问题是如果我选择今天的日期和明天的过期日期，我只会得到正确的搜索结果。如果我在两者之间放置更多天，搜索根本不会给我任何结果，即使那些日子在数据库中有可用的数据。

这不是执行此操作的方法吗？我不能把这个搜索放在控制器上，因为有很多 INNER JOINS 并且它变得“丑陋”，并且其他过滤器的所有搜索都正常工作，直到我实现了这个。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:48:56.457

Can you instead just use the between operator directly in the scope that you've defined? Something like this:

```
scope :by_availabilities, lambda { |first_day, last_day|
  scope = joins(:rooms).
          joins('INNER JOIN availabilities ON rooms.id=availabilities.room_id')
  (first_day..last_day).each { |day|
    scope = scope.where("availabilities.day = ?", day)
  }
  scope = scope.group('hotels.id'<other fields>)
} 
```

# c# - 如何验证多个对象属性，然后在我的一个表单元素上应用带有工具提示的样式？

> ID：11475466
> 
> 赞同：3
> 
> 时间：2012-07-13T17:31:48.353
> 
> 标签：c#, wpf, mvvm, enterprise-library-5

这是一个 WPF/MVVM 项目。我正在使用 MS 企业库验证应用程序块 v5.0。

要求是，如果组合框的值为“Facilities”或“Other”，则 Comment 字段必须具有值。

也就是说，我创建了一个自定义验证器，并以这种方式执行验证：

```
ValidationResults results = Validation.Validate<Annotation>(this.Annotation); 
```

还有其他错误可能性，这些都包含在标准 VAB 属性中。

这似乎工作正常。所以，现在，如果我有一个错误条件，它可能是任何一个规则，并且我可以查询 ValidationResults 集合以确定哪个属性有错误。但是，发生这种情况时，我无法为特定元素应用样式。有一次，我对给定控件使用属性级别验证，但是当我需要比较一个验证规则的多个属性时，这不起作用。

```
vab:Validate.BindingForProperty="Text" 
```

上面的属性和这种样式适用于简单的单个属性验证，如 StringLenghtValidator。这在我的场景中不起作用。

```
<Style x:Key="textBoxInError" TargetType="{x:Type TextBox}">            
        <Setter Property="Background" Value="White"/>
        <Style.Triggers>
            <Trigger Property="Validation.HasError" Value="true">
                <Setter Property="ToolTip"
                        Value="{Binding RelativeSource={x:Static RelativeSource.Self},
                        Path=(Validation.Errors)[0].ErrorContent}"/>
            </Trigger>
        </Style.Triggers>
    </Style> 
```

多属性自定义验证器报告错误后，如何让 Comments 文本框具有某种样式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:09:39.123

我正在使用这种方法使用企业库，试试看

```
<ControlTemplate x:Key="ErrorMarkTemplate" TargetType="{x:Type Label}" >
    <TextBlock Text="*" Margin="2,0,2,0" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold" FontSize="16"  Foreground="{DynamicResource ErrorBrush}" /> 
</ControlTemplate>

 <ControlTemplate x:Key="GeneralErrorTemplate" >
        <Grid ClipToBounds="False" >
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="10" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Label Grid.Column="0" Template="{DynamicResource ErrorMarkTemplate}"  />
            <AdornedElementPlaceholder Grid.Column="1"  />
        </Grid  >
</ControlTemplate>

<Style x:Key="{x:Type TextBox}" TargetType="{x:Type TextBox}">     
        <Setter Property="Validation.ErrorTemplate" Value="{DynamicResource GeneralErrorTemplate}"/>
        <Style.Triggers>
            <Trigger Property="Validation.HasError" Value="true">
                <Setter Property="ToolTip" Value="{Binding (Validation.Errors).CurrentItem.ErrorContent, RelativeSource={x:Static RelativeSource.Self}}"/>
    </Trigger>
    </Style.Triggers>
</Style> 
```

# java - 在屏幕上移动球的情况下，如何正确处理 JComponent 的按键和重绘？

> ID：11475468
> 
> 赞同：3
> 
> 时间：2012-07-13T17:31:53.300
> 
> 标签：java, swing, jpanel, paintcomponent

我想我会尝试编写一个程序来绘制一个球，当按下箭头键时，将在屏幕上沿按下的方向移动球。首先，我开始尝试制作一个只执行“向上”箭头键动作的程序。

我四处寻找解决方案，但无法弄清楚这段代码有什么问题。我不知道这是否是我的输入和动作映射的问题（即程序识别按键的问题），或者是否是 JComponent 和 JFrame 类如何在摇摆中工作的问题。我想也许问题也可能是焦点；我真的不知道如何判断组件何时具有焦点。我认为现在该键已设置为 CNTRL+Y 而不是向上，只是因为在某些时候我认为我的字符串在输入地图制作器中指定向上箭头可能有问题。

在这一点上，我很沮丧，我只是想让这该死的东西*做点什么*，所以我使用的输入映射超出了必要的数量。

代码如下，它很短，格式很糟糕（对不起）：

```
import java.util.*;
import java.awt.*;
import java.awt.geom.*;
import java.awt.event.*;
import javax.swing.*;

class BallMover
{
    public static void main(String[] args)
    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                BallFrame frame = new BallFrame();
            }
        });

    }
}

class BallFrame extends JFrame
{
    private static final int DEFAULT_WIDTH = 500;
    private static final int DEFAULT_HEIGHT = 500;
    private BallComponent comp;

    public BallFrame()
    {
        super.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        super.setSize(this.DEFAULT_WIDTH, this.DEFAULT_HEIGHT);
        super.setResizable(false);
        super.add(new BallComponent());
        super.setVisible(true);
        super.setFocusable(true);
    }
}

class BallComponent extends JComponent
{
    private Ellipse2D.Double ellipse;
    private double x = 225;
    private double y = 225;
    private ActionPress actionPress;

    public BallComponent()
    {
        super();
        super.setFocusable(true);

        InputMap imap1 = this.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);
        imap1.put(KeyStroke.getKeyStroke("ctrl Y"), "keyUp1");
        InputMap imap2 = this.getInputMap(JComponent.WHEN_FOCUSED);
        imap1.put(KeyStroke.getKeyStroke("ctrl Y"), "keyUp2");
        InputMap imap3 = this.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);   
        imap1.put(KeyStroke.getKeyStroke("ctrl Y"), "keyUp3");

        ActionMap amap = this.getActionMap();
        amap.put("keyUp1", actionPress);
        amap.put("keyUp2", actionPress);    
        amap.put("keyUp3", actionPress);
    }

    public void paintComponent(Graphics g)
    {
        super.repaint(); // clear component //
        Graphics2D g2d = (Graphics2D)g;
        this.ellipse = new Ellipse2D.Double(x, y, 50, 50);
        g2d.fill(this.ellipse);
    }

    private class ActionPress extends AbstractAction
    {
        public void actionPerformed(ActionEvent event)
        {
            y = y + 10;
            ellipse = new Ellipse2D.Double(x, y, 50, 50);
            repaint();
        }
    } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:32:06.043

您似乎从未初始化`actionPress`- 尝试将其添加到您的 BallComponent 构造函数中：

```
actionPress = new ActionPress(); 
```

即，您的构造函数看起来像这样

```
public BallComponent()
{
    super();
    super.setFocusable(true);

    InputMap imap1 = this.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);
    imap1.put(KeyStroke.getKeyStroke("ctrl Y"), "keyUp1");
    InputMap imap2 = this.getInputMap(JComponent.WHEN_FOCUSED);
    imap1.put(KeyStroke.getKeyStroke("ctrl Y"), "keyUp2");
    InputMap imap3 = this.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);   
    imap1.put(KeyStroke.getKeyStroke("ctrl Y"), "keyUp3");

    actionPress = new ActionPress();
    ActionMap amap = this.getActionMap();
    amap.put("keyUp1", actionPress);
    amap.put("keyUp2", actionPress);    
    amap.put("keyUp3", actionPress);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T21:02:17.597

您可以使用`KeyboardFocusManager`来监听箭头键的击键并更新球的位置。这是重新编写的代码：

```
class BallFrame extends JFrame {
    private static final int DEFAULT_WIDTH = 500;
    private static final int DEFAULT_HEIGHT = 500;
    final BallComponent ball = new BallComponent();

    public BallFrame() {
        super.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        super.setSize(DEFAULT_WIDTH, DEFAULT_HEIGHT);
        super.setResizable(false);
        super.add(ball);
        super.setVisible(true);

        KeyboardFocusManager.getCurrentKeyboardFocusManager()
                .addKeyEventDispatcher(new KeyEventDispatcher() {
                    @Override
                    public boolean dispatchKeyEvent(KeyEvent e) {
                        if (e.getKeyCode() == KeyEvent.VK_UP)
                            ball.move(0, -10);
                        if (e.getKeyCode() == KeyEvent.VK_RIGHT)
                            ball.move(10, 0);
                        if (e.getKeyCode() == KeyEvent.VK_LEFT)
                            ball.move(-10, 0);
                        if (e.getKeyCode() == KeyEvent.VK_DOWN)
                            ball.move(0, 10);
                        return false;
                    }
                });

    }
} 
```

对于 BallComponent 类：

```
static class BallComponent extends JComponent {
    private double x = 225;
    private double y = 225;
    private Ellipse2D.Double ellipse = new Ellipse2D.Double(x, y, 50, 50);

    public void move(int dX, int dY) {
        x += dX;
        y += dY;
        ellipse = new Ellipse2D.Double(x, y, 50, 50);
        repaint();
    }

    public void paintComponent(Graphics g) {
        Graphics2D g2d = (Graphics2D) g;
        g2d.fill(ellipse);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T05:37:20.540

请看一下这个代码示例：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class PaintingPanel
{
    private CustomPanel drawingArea;
    private ActionMap actionMap;
    private int x;
    private int y;

    private enum Direction 
    {
        UP(KeyEvent.VK_UP),
        DOWN(KeyEvent.VK_DOWN),
        LEFT(KeyEvent.VK_LEFT),
        RIGHT(KeyEvent.VK_RIGHT);

        public int key;

        private Direction(int key)
        {
            this.key = key;
        }

        public int getKey()
        {
            return key;
        }
    }

    private class PanelAction extends AbstractAction
    {
        private Direction arrow;

        public PanelAction(Direction a)
        {
            arrow = a;
        }

        @Override
        public void actionPerformed(ActionEvent ae)
        {
            switch(arrow)
            {
                case UP:
                    y -= 1;
                    break;
                case DOWN:
                    y += 1;
                    break;
                case LEFT:
                    x -= 1;
                    break;
                case RIGHT:
                    x += 1;
                    break;
            }
            drawingArea.setValues(x, y);
        }
    }

    public PaintingPanel()
    {
        x = y = 5;
    }

    private void displayGUI()
    {
        JFrame frame = new JFrame("Painting Panel");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        drawingArea = new CustomPanel();
        int condition = JComponent.WHEN_IN_FOCUSED_WINDOW;
        InputMap inputMap = drawingArea.getInputMap(condition);
        actionMap = drawingArea.getActionMap();

        for (Direction arrow : Direction.values())
        {
            int key = arrow.getKey();
            String name = arrow.name();
            inputMap.put(KeyStroke.getKeyStroke(
                            key, 0), name);
            actionMap.put(name, new PanelAction(arrow));                    
        }

        frame.setContentPane(drawingArea);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new PaintingPanel().displayGUI();
            }
        });
    }
}

class CustomPanel extends JPanel
{
    private final int SIZE = 500;
    private int x;
    private int y;
    private String text = "Hello World!";

    public CustomPanel()
    {
        x = y = 5;
        setOpaque(true);
        setBackground(Color.WHITE);
    }

    public void setValues(int x, int y)
    {
        this.x = x;
        this.y = y;
        repaint();
    }

    @Override
    public Dimension getPreferredSize()
    {
        return (new Dimension(SIZE, SIZE));
    }

    @Override
    protected void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        g.setColor(Color.GREEN.darker());
        g.fillOval(x, y, 50, 50);
    }
} 
```

# python - Python - 如何确定 AppEngine GQL 查询是否返回任何内容？

> ID：11475473
> 
> 赞同：0
> 
> 时间：2012-07-13T17:32:17.757
> 
> 标签：python, google-app-engine

这可能是一个通用的 Python 问题，而不是 AppEngine 特定的问题。我无法确定我的 Google AppEngine GQL 查询是否返回对象。我是 AppEngine 和 python 的新手，所以这可能是一个简单的问题

我正在使用python代码：

```
user = db.GqlQuery("SELECT * FROM UserStore WHERE user_id = 1234567890") 
```

要检查是否有用户返回，我一直在尝试：

```
if(user in locals()):
  self.response.out.write('User Exists: ' + user.user_id)
  return
else:
  CreateTheUser() 
```

但我现在想这不是最好的方法。`db.GqlQuery`有没有更好的方法来判断语句是否返回了用户（或用户列表） ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:33:43.620

试试这个，我认为如果查询没有返回任何内容，`user`则值为：`None`

```
if user is not None:      #or simply `if user`
    #do something
else:
    #do something else 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T23:32:50.127

从你的例子

`user = db.GqlQuery("SELECT * FROM UserStore WHERE user_id = 1234567890")`

将始终返回一个查询对象，例如`<google.appengine.ext.db.Query object at 0xab71f6c>` .

要评估您需要使用的返回结果`.get(), .fetch(),`- run() 将为您提供 QueryIterator。

所以目前你的比较

```
user = db.GqlQuery("SELECT * FROM UserStore WHERE user_id = 1234567890")
if user:
  # do something 
```

或者

```
user = db.GqlQuery("SELECT * FROM UserStore WHERE user_id = 1234567890")
if user not None:
  # do something 
```

将永远通过，因为用户永远不会是 None 。

在这个特定示例中，您可能会使用`user = db.GqlQuery("SELECT * FROM UserStore WHERE user_id = 1234567890").get()`您只期望一个结果。然后进行`if user:`比较。

如果你使用 fetch() 你会得到一个列表。如果您想确认不超过一个用户存在，这可能很有用。（不确定您如何管理对 user_id 的唯一约束，但这是一个单独的问题 ;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T17:46:06.607

尝试使用`try`：

```
try:
    self.response.out.write('User Exists: ' + user.user_id) 
except AttributeError:
    CreateTheUser() 
```

这种方法将尝试输出用户详细信息，如果用户对象的属性未定义，那么您将获得[AttributeError](http://docs.python.org/library/exceptions.html#exceptions.AttributeError)。您还可以使用[Exception](http://docs.python.org/library/exceptions.html#exceptions.Exception)来捕获所有内置的、非系统退出的异常。

[EAFP](http://docs.python.org/glossary.html#term-eafp)：

> 请求宽恕比请求许可更容易。这种常见的 Python 编码风格假设存在有效的键或属性，如果假设被证明是错误的，则捕获异常。这种干净快速的风格的特点是存在许多 try 和 except 语句。该技术与许多其他语言（如 C）常见的 LBYL 风格形成鲜明对比。

[LBYL](http://docs.python.org/glossary.html#term-lbyl)：

> 三思而后行。这种编码风格在进行调用或查找之前明确测试前置条件。这种风格与 EAFP 方法形成对比，其特点是存在许多 if 语句。
> 
> 在多线程环境中，LBYL 方法可能会在“寻找”和“跳跃”之间引入竞争条件。例如，如果另一个线程在测试之后但在查找之前从映射中删除键，则代码 if key in mapping: return mapping[key] 可能会失败。这个问题可以通过锁定或使用 EAFP 方法来解决。

# ruby-on-rails-3 - 元素的多态关联，还需要添加什么吗？

> ID：11475476
> 
> 赞同：1
> 
> 时间：2012-07-13T17:32:45.137
> 
> 标签：ruby-on-rails-3, activerecord

我已经采用了，但我不确定为什么有些东西不起作用。

我有一个昂贵的多态关联，我只将它用于一个名为 Item 的模型。它看起来像这样：

```
class Item < ActiveRecord::Base
  #price
  has_one :price, :as => :pricable
  accepts_nested_attributes_for :price

  attr_accessible :price_attributes, :price, .... 
```

我想添加到事件模型并添加了以下内容：

```
class Event < ActiveRecord::Base
  #price
  has_one :price, :as => :pricable
  accepts_nested_attributes_for :price
  attr_accessible :price, :price_attributes 
```

但是，我无法设置它：

```
ruby-1.9.2-p290 :001 > e=Event.find(19) #ok
ruby-1.9.2-p290 :002 > e.price
Creating scope :page. Overwriting existing method Price.page.
  Price Load (0.8ms)  SELECT `prices`.* FROM `prices` WHERE `prices`.`pricable_id` = 19 AND `prices`.`pricable_type` = 'Event' LIMIT 1
 => nil 
ruby-1.9.2-p290 :003 > e.price.price=23
NoMethodError: undefined method `price=' for nil:NilClass
    from /Users/jt/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.1.0/lib/active_support/whiny_nil.rb:48:in `method_missing'
    from (irb):3 
```

嗯....看起来关系设置正确，并且 Event 可以通过 attr_accessible 访问价格。知道还会发生什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T22:34:14.773

关系似乎定义正确，但是如果 e.price 返回 nil 则显然 e.price.price= 将不起作用并返回未定义的方法错误。您需要先构建/创建关联的价格对象：

```
> e = Event.find(19)
=> #<Event id: 19, ...>
> e.price
=> nil
> e.create_price(price: 23)
=> #<Price id: 1, priceable_id: 19, price: 23, ...> 
```

或者如果您想使用嵌套属性：

```
> e = Event.find(19)
=> #<Event id: 19, ...>
> e.price
=> nil
> e.update_attributes(price_attributes: { price: 23 })
=> true
> e.price
=> #<Price id: 1, priceable_id: 19, price: 23, ...> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T05:45:48.937

这就是你的模型应该是什么样子

```
class Price < ActiveRecord::Base
  attr_accessible :value
  belongs_to :priceable, :polymorphic => true
end

class Item < ActiveRecord::Base
   attr_accessible :name, :price_attributes
   has_one :price, :as => :priceable
   accepts_nested_attributes_for :price
end

class Event < ActiveRecord::Base
  attr_accessible :name, :price_attributes
  has_one :price, :as => :priceable
  accepts_nested_attributes_for :price
end 
```

这就是您的价格迁移的样子

```
class CreatePictures < ActiveRecord::Migration
  def change
    create_table :pictures do |t|
      t.string  :name
      t.integer :imageable_id
      t.string  :imageable_type
      t.timestamps
    end
  end
end 
```

然后你可以轻松地做这样的事情

```
Item.new( { name: 'John', price_attributes: { value: 80 } } ) 
```

# jshint - 如何使用 JSHint 显示所有错误

> ID：11475478
> 
> 赞同：26
> 
> 时间：2012-07-13T17:32:56.413
> 
> 标签：jshint

假设我在文件上运行 JSHint。它报告了 83% 的错误。我想要 100% 的错误，但默认情况下它显示“错误太多”。运行`jshint filename.js`，我将如何解除此限制并显示所有错误？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-28T06:39:43.027

看到这个问题：[https ://github.com/jshint/jshint/issues/180](https://github.com/jshint/jshint/issues/180)

从那里 ：

> /*jshint 最大值：10000 */

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-03-17T15:38:34.493

默认情况下，JSHint 会在放弃前产生 50 个警告。不幸的是，没有完全关闭它的选项。原因是在大型脚本上 JSHint 会太慢。

如果您想增加 JSHint 将产生的警告数量，只需编辑文件**.jshintrc**并添加选项：

```
{
    "maxerr" : 999
} 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-10-17T15:52:05.750

*   转到`~/.node_modules/jshint/packages/jshint` （在 Windows 上转到`C:\Documents and Settings\%USERNAME%\Application Data\npm\node_modules\jshint\packages\jshint`）

*   打开`jshint.js`文件。

*   转到第 1065 行并删除此 if 语句：

 **```
if (warnings >= option.maxerr) {
    quit("Too many errors.", l, ch);`
} 
```**

# java - 如何在高性能 Java Web 服务应用程序中共享通用数据结构

> ID：11475492
> 
> 赞同：1
> 
> 时间：2012-07-13T17:33:32.957
> 
> 标签：java, database, web-services, shared-memory

我正在开发几个 Web 服务 - 一个用于购买产品，另一个用于验证产品。多个客户将调用 BUY（大约 250/秒）和 VALIDATE 相同。他们需要在调用后端之前查询和更新表格数据结构。

我有一种感觉，使用像 Oracle 这样的关系数据库表来维护这种常见的数据结构会因为网络延迟而减慢速度（假设数据库和查询被优化）。有人建议我使用 EhCache 和 Hazelcast，但我更喜欢使用数据库表，因为我更了解它。

**谁能确认通过网络访问数据库是否会成为应该每秒处理 250-300 个事务的应用程序的瓶颈？**

当然，如果服务器实例出现故障并且我们丢失了数据结构的内存表示，我们就可以了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:54:34.910

这实际上取决于您的应用程序在做什么。
当然，您可以使用具有昂贵硬件和昂贵网络硬件的数据库机器。
问题是——这真的需要吗？
正如一些评论中所述 - 如果您主要执行 READ（读取请求多于写入请求），缓存将主要帮助您。为了优化你应该考虑索引（例如 - 如果你存储地址，你可以考虑按“ip”字段索引，假设大多数不是按 ID 的查询都是按这个字段），
这只是正确的一部分数据库模式规划（这方面的其他方面可能是通过尽可能正确地建模数据来避免表之间的复杂连接），甚至可能是 NoSQL 数据库。
扩展怎么样 如果您要进行缓存和扩展，您应该使用分布式缓存/分布式数据结构。
例如，[infinispan](http://www.jboss.org/infinispan/)可以在这里提供帮助。
您还可以通过使用 in memory/in process（即 - 它的代码在 jar 中并共同托管在应用程序的 JVM 上）来提高性能，例如[h2](http://www.h2database.com/html/main.html) - 这可以进一步减少查询时间。但再一次，这真的取决于你的具体用例，不幸的是你描述的太笼统了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T17:44:27.127

IMO，只要更新请求低于查询请求，缓存就会有所帮助......想象一下你缓存为一个大地图，如果你每次更新服务器上的行时你也需要更新，那么你将存储已经查询的值，并且你更新通过使其条目无效以再次执行对数据库的请求来缓存缓存。

# php - 如何通过另一个查询订购 MYSQL 查询？

> ID：11475496
> 
> 赞同：0
> 
> 时间：2012-07-13T17:33:42.643
> 
> 标签：php, mysql

我正在编写一个 PHP/MYSQL 搜索函数，它接受用户搜索查询（作为字符串）并通过预定义的字段和数量将其与表中的记录匹配（例如：卧室 = 2，max_price < 100）

这工作正常，但现在我想按条件对结果进行排序。例如：

*   用户查询是“ *2 Bedroom Penthouse* ”

*   该函数匹配行 **卧室**的值为**2的记录**

 **我现在想保留匹配的结果，但按与值为“ **penthouse** ”的描述行匹配的结果排序结果（描述字符串中的任何位置（这是一个包含大量单词的长字符串））

我可以匹配描述中包含“阁楼”一词的结果，但是首先将结果与匹配结果排序的最佳方法是什么？

那么，基本上，您如何通过另一个查询对结果进行排序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T17:36:29.547

你没有。你写了一个更复杂的`ORDER BY`子句。

```
SELECT ...
  ORDER BY ..., description NOT LIKE "%penthouse%" 
```

（我们反转表达式，因为在真之前是假的订单）**

# knockout.js - 无法获取淘汰对象属性值

> ID：11475497
> 
> 赞同：1
> 
> 时间：2012-07-13T17:33:43.643
> 
> 标签：knockout.js

当我尝试在单击事件（removeAFoo -> removeFoo）中获取 foo.Id 的值时，我得到函数文本'function b(){if(0...'。需要更改什么来获取属性值foo.Id? 另一个奇怪的事情是，当我在 viewModel.foos 数组上调用 indexOf() 时，它会返回索引，即使该数组说它的长度为零。

```
function getFoos() {
    viewModel.foos([]);
    var data = [{
        Id: 1,
        Name: 'Joe' },
    {
        Id: 2,
        Name: 'Jon' },
    {
        Id: 3,
        Name: 'Jim' }        
    ]

    for (var i = 0; i < data.length; i++) {
        var f = new foo();
        f.Id(data[i].Id);
        f.Name(data[i].Name);

        viewModel.foos.push(f);
    }
};

var viewModel = {
    foos: ko.observableArray([]),

    reloadFoos: function() {
        getFoos();
    },

    removeAFoo: function(foo) {
        removeFoo(foo);
    }
};

var foo = function() {
    this.Id = ko.observable();
    this.Name = ko.observable();
};

function removeFoo(foo) {
    alert(viewModel.foos.indexOf(foo));
    alert(foo.Id);
    viewModel.foos.splice(viewModel.foos.indexOf(foo), 1);
}

ko.applyBindings(viewModel);

getFoos();
​

<div data-bind="foreach: foos">
    <div style="float: left">
        <button data-bind="click : $parent.removeAFoo, attr: { id: Id }">
        </button>
        <label data-bind="text: Name">
        </label>
    </div>
</div>​ 
```

[http://jsfiddle.net/suedeuno/gAUgV/12/](http://jsfiddle.net/suedeuno/gAUgV/12/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T17:56:29.537

要获取 foo.id 的值，您需要记住使用括号：

像这样：

document.write(foo.Id());

# validation - XAML 用户控件验证

> ID：11475499
> 
> 赞同：1
> 
> 时间：2012-07-13T17:33:48.073
> 
> 标签：validation, xaml, user-controls

我有一个用户控件，它是一个文本框和两个按钮的组合。我已经设置了 Dependency 属性，以便它正确绑定到我的模型。问题是当我遇到验证错误时，“红色”边框会同时包裹文本框和按钮。

**我想改变行为，以便在出现错误时，只有内部文本框有红色边框，但不知道如何做到这一点。**

[试图发布图像，但我不够高:-(]

我的文本框有 this 作为它的绑定（在用户控件内，它被包裹在一个带有按钮堆栈面板的网格中，因为它们是动态的）

代码隐藏

```
private static DependencyProperty TextProperty = DependencyProperty.Register("Text", typeof(string), typeof(UserControl)); 
```

XAML 文件

```
<Textbox Grid.Column="0"
         Text="{Binding Text, Mode=TwoWay, StringFormat={StaticResource CommaFormat}
            , RelativeSource={RelativeSource FindAncestor
            , AncestorType={x:Type UserControl}}, ValidatesOnDataErrors=True}"
         x:Name="txt" 
         MaxLength="6" Height="22" Width="65" VerticalAlignment="Top" /> 
```

在我的主要形式中..我有这个 xaml 绑定

```
<WeightTextbox Grid.Column="1" Grid.Row="2" Margin="5,0"
               Text="{Binding SelectedDocument.Weight1,
                      Mode=TwoWay,
                      ValidatesOnDataErrors=True,
                      TargetNullValue={x:Static sys:String.Empty}}" /> 
```

注意：这在单个窗口窗体上出现 5 次，以便我可以为我的文档收集不同的权重。

我尝试过搜索，但找不到任何东西。

编辑（最终足够高的代表添加图像） ![](../Images/a2222ac5b7ead1ebd0827b01ee5ad1dd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T18:30:42.737

昨天终于有一个啊哈时刻，所以我发布这个以防有人来搜索。向我的 WeightTextbox 添加了一个名为“Required”的依赖属性

```
 private static DependencyProperty RequiredProperty = DependencyProperty.Register("Required", typeof(bool), typeof(xagDateTimeCustom));

    public Boolean Required
    {
        get
        {
            return (bool)GetValue(RequiredProperty);
        }
        set
        {
            bool oldValue = Required;
            SetValue(RequiredProperty, value);
            DependencyPropertyChangedEventArgs e = new DependencyPropertyChangedEventArgs(RequiredProperty, oldValue, value);
            OnPropertyChanged(e);
        }
    } 
```

在我的主表单中，我现在执行以下操作..（设置了新的必需属性并且 ValidatesOnDataErrors 设置为 False

```
<WeightTextbox Grid.Column="1" Grid.Row="2" Margin="5,0"
               Required=True
               Text="{Binding SelectedDocument.Weight1,
                      Mode=TwoWay,
                      ValidatesOnDataErrors=False,
                      TargetNullValue={x:Static sys:String.Empty}}" /> 
```

然后在我的自定义控件中，我实现了 IDataErrorInfo ，它现在似乎可以工作了。

![在此处输入图像描述](../Images/ee41bbeceb49e0bd2770fc32a038ee95.png)

# facebook - Facebook App Center 不接受“详细说明”翻译

> ID：11475506
> 
> 赞同：1
> 
> 时间：2012-07-13T17:34:16.373
> 
> 标签：facebook, translation

我在我的应用程序中不断收到将详细描述翻译成两种语言的错误。错误是：

> 应用详细说明：请删除多余的字符、单词或 URL。请更正任何拼写错误的单词、语法错误、过多的标点/符号或非标准大写。

还有一个注释：

“葡萄牙语和德语应用程序详细说明翻译不正确。请查看整个部分并更正。”

我已经检查了两种语言的错误中列出的所有内容，但没有发现任何内容。我也检查了它的正确性，没关系。不过，App Center 不会接受我提供的翻译。

有任何想法吗？

# c# - 使用 IoC 的 WPF 设计器加载失败

> ID：11475508
> 
> 赞同：0
> 
> 时间：2012-07-13T17:34:25.590
> 
> 标签：c#, wpf, mvvm, ioc-container, tinyioc

我有一个相当简单和标准的 MVVM WPF 应用程序。我使用 TinyIoC 作为容器来为 ViewModel 提供底层数据和缓存提供程序。我正在使用 TinyIoC，因为我还想与 MonoTouch 和 Monodroid 项目共享此代码。

当添加到 MainWindow 的 XAML 时，每个 ViewModel 不依赖于解析来自 TinyIoC 的数据提供程序的用户控件都可以正常工作。

ViewModel 的用户控件正在使用 TinyIoC 来解析用于获取其数据的数据提供者，当添加到 MainWindow 时，无法在设计器视图中实例化。

重要提示：当我运行应用程序时一切正常，只是设计师坏了 - 一个很大的障碍。

这是基本代码：

```
 // From App.xaml.cs
    private void HandleAppStartupEvent(object sender, StartupEventArgs e) {
        IDataStoreProvider store = new XmlDataStoreProvider();
        ICacheProvider cache = new DictionaryCacheProvider();

        TinyIoCContainer.Current.Register(store);
        TinyIoCContainer.Current.Register(cache);
    } 
```

View / ViewModel / XAML 绑定标准实现 - 这里没有问题。

在数据层的深处，IoC 容器用于解析使用哪个提供者——上面代码中设置的那个。

```
public static class Gateway
{
    private static IDataStoreProvider store;
    private static ICacheProvider cache;

    static Gateway() {
        store = TinyIoCContainer.Current.Resolve<IDataStoreProvider>();
        cache = TinyIoCContainer.Current.Resolve<ICacheProvider>();
    }

    // use the store and cache here...

} 
```

这是我从设计师那里得到的确切错误。

> 无法解析类型：TinyIoC.TinyIoCContainer.ResolveInternal 中的 Sample.Core.Data.IDataStoreProvider（TypeRegistration 注册，NamedParameterOverloads 参数，ResolveOptions 选项）在 C:_dev\Sample\SampleSolution\Sample.Core\Utility\TinyIoC.cs:line 3281 at TinyIoC.TinyIoCContainer.Resolve(Type resolveType) in C:_dev\Sample\SampleSolution\Sample.Core\Utility\TinyIoC.cs: 第 1314 行 TinyIoC.TinyIoCContainer.ResolveResolveType in C:_dev\Sample\SampleSolution\Sample.Core\Utility \TinyIoC.cs：C:_dev\Sample\SampleSolution\Sample.Core\Data\Gateway.cs 中 Sample.Core.Data.Gateway..cctor() 的第 1433 行：第 14 行

我想我明白为什么会出现此错误 - 在设计器加载并执行 MainWindow 内的用户控件之前，不会触发 App 启动事件以加载 IoC。

再次需要注意的是，该应用程序运行良好 - IoC 和一切。我想通过以下任一方式（按优先顺序）停止设计器加载错误：

*   了解如何修复代码以与设计人员一起正常工作
*   为设计人员使用模拟数据存根现有的控制数据
*   禁用此设计器功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T22:03:04.637

这里是第二个项目符号的解决方案（用设计人员的模拟数据存根现有的控制数据）

在 ViewModel 构造函数中添加了以下代码：

```
 public AdminViewModel(UserControl view) {
        this.view = view;

        var designMode = DesignerProperties.GetIsInDesignMode(view);

        if (designMode) {
            Items = new ObservableCollection<ItemModel>
                      {new ItemModel {Name = "Item1"}, 
                       new ItemModel {Name = "Item2"}};
        }
        else {
            Items= new ObservableCollection<ItemModel>(Gateway.GetItems());
        }   
    } 
```

虽然有效，但我有几个担忧：

*   使用非应用逻辑污染代码
*   强制我将 View 的引用传递给 ViewModel

我更愿意以更简洁的方式使这个更“可混合”和设计师友好——还有其他想法吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:53:54.290

您是否尝试在 Windows/容器加载事件的事件处理程序中加载数据？这样做在过去给我造成了这种类型的问题。

# asp.net-mvc-3 - 在 ASP.Net MVC 中重新映射特定文件/路径

> ID：11475510
> 
> 赞同：0
> 
> 时间：2012-07-13T17:34:43.790
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing

MVC 路由的新手，请原谅问题的基本性质。

是否可以在 ASP.Net MVC 中配置路由，以便将浏览到[http://www.mysite.com/sitemap.xml](http://www.mysite.com/sitemap.xml)的人重定向到呈现 XML 内容的视图？我认为是这样，但不确定一个好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:38:57.567

您可以在默认路由之前注册一个路由：

```
routes.MapRoute(
    "Sitemap",
    "sitemap.xml",
    new { controller = "Sitemap", action = "Index" }
); 
```

然后你可以有一个`SitemapController`：

```
public class SitemapController: Controller
{
    public ActionResult Index()
    {
        var model = ...

        // Don't look for XmlResult, it's up to you to write it
        return new XmlResult(model);
    }
} 
```

现在，当您导航到 时`/sitemap.xml`，将执行控制器的`Index`操作。`Sitemap`

# html - HTML5 Web 应用程序绕过所有主要浏览器（Safari/Firefox/Opera/Chrome/IE）中本地缓存的浏览器权限？

> ID：11475516
> 
> 赞同：0
> 
> 时间：2012-07-13T17:35:22.143
> 
> 标签：html, caching, google-chrome

我一直在玩 HTML5 离线应用程序缓存，运行边界测试以研究边缘情况下的浏览器行为，特别是找出缓存配额。

所以我所做的是生成并提供离线应用清单，并将 300 个 5MB JPEG 文件添加到缓存中。

```
public ActionResult Manifest()
{     
    var cacheResources = new List<string>();
    var n = 300; 

    for (var i = 0; i < n; i++)
        cacheResources.Add("Content/" + Url.Content("collage.jpeg?" + i));

    var manifestResult = new ManifestResult("1")
    {
        NetworkResources = new string[] { "*" },
        CacheResources = cacheResources
    };

    return manifestResult;
} 
```

一开始，我将 1000 个 JPEG 文件添加到缓存中，Chrome 抛出错误：由于超出配额，无法将新缓存提交到存储中。

我设法通过慢慢减少上传的图像数量来获得正确的数字，我可以将 300 个 JPEG 文件添加到缓存中而不会崩溃

调查 chrome://appcache-internals/，我震惊地发现对于一个 Web 应用程序，有 2.3GB 的巨大缓存！

发现我访问的网站在后台下载了如此多的数据，这真的很奇怪，作为一个用户，它会变得非常令人不安。Chrome，（17.0.963.83），当时选择的桌面浏览器没有警告我或征求我的许可，该网站想要下载和缓存这么多数据到我的本地存储！这太离谱了。

由于上述关于超出浏览器范围配额的行为，站点停止将数据提交到应用程序缓存。

浏览器有没有办法以更有条理的方式跟踪所有这些？目前，“先浏览，先保留”是相当烦人的。我解决这种情况的经验是使用 applicationCache API 来监听配额错误，并通知用户浏览到 chrome://appcache-internals/ 并删除新缓存上的其他缓存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:28:01.547

有关 Chrome 如何处理本地存储的更多信息，请查看此白皮书：[https ://developers.google.com/chrome/whitepapers/storage](https://developers.google.com/chrome/whitepapers/storage)

临时存储限制为每个应用程序总池的 20%，总池限制为可用磁盘空间的 50%，因此 Chrome 永远无法填满磁盘。当您向本地磁盘添加更多文件时，Chrome 会相应地缩小分配给临时存储池的总数。

# javascript - javascript新手不懂数组

> ID：11475521
> 
> 赞同：0
> 
> 时间：2012-07-13T17:36:05.447
> 
> 标签：javascript, arrays, dynamic

好的，我有一个简单的 HTML 文档：

```
<head>
</head>

<body>
<div id="notInvolved">  This div is static</div>
<div id="thing01"></div>
<div id="thing02"></div>
<div id="thing03"></div>
</body> 
```

我想使用外部 JavaScript 来操作 div。我的计划如下

1.  创建一个名为 divCounter 的数组
2.  按 ID 添加 div##
3.  获取数组的长度
4.  在一个由数组大小控制的 for 循环中，一次加载一个 div，添加一些数据，移动到下一个 div 并添加一些令人恶心的数据，直到我用完 div。

我显然不明白如何构建一个动态数组......（我不能静态地做到这一点我不知道最终我会有多少东西## divs）

我想我可以这样做`var divCounter = [document.getElementById("thing"+ * + *)];` ，这会添加字符串（例如`thing01`，`Thing02`）。但这不起作用。你如何设置通配符`getElementById`？如果你不能，你怎么能做到？

有没有办法做到这一点，还是我在叫错树？我讨厌做新手......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T17:41:18.660

笼统地说（因为您提供的代码很少），ID 应该是您应该在事物唯一时使用的东西，而当需要分组访问事物时应该使用类。这样做更有意义：

```
<body>
  <div id="notInvolved">  This div is static</div>
  <div id="thing01" class="affected"></div>
  <div id="thing02" class="affected"></div>
  <div id="thing03" class="affected"></div>
</body> 
```

一旦你有了将它们结合在一起的东西，你就可以用它`document.getElementsByClassName('affected')`来检索它们。`for`这可能比尝试使用循环或其他构造检索单个元素更有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:03:27.383

我不完全理解您要完成的工作。无论如何，为了让您了解如何将一个元素添加到数组中，前提是它的 ID 以字符串“thing”开头，这里有一个简单的示例，说明如何使用 for 循环、getElementByTagName 函数以及如何使用访问 DOM 元素的属性。您真正想要做的（向数组添加元素）是使用 divCounter 数组的 push 方法完成的。

```
var everyDiv = document.getElementsByTagName('div');
var divCounter = [];
for( var i = 0; i < everyDiv.length; i++ ){
    var currentDiv = everyDiv[i];
    var currentID = currentDiv.id; 
    if (currentID != null && currentID.indexOf('thing') == 0){
        divCounter.push(currentDiv);
    };
}
var res = divCounter.length; 
```

当然，这是为了清楚起见，我会从不同的角度来处理这个问题，并且我会以更简洁的方式对其进行编码。我同意其他答案：在这些 div 之间共享的类将是选择这些元素的最佳方式。相同（采用相同的程序方法）的一个例子是：

```
var everyDiv = document.getElementsByTagName('div'), 
    divCounter = [], 
    i, currentID;
for( i = 0; i < everyDiv.length; i++ ){
    currentID = everyDiv[i].id;
    if ( currentID && currentID.indexOf('thing') == 0){
        divCounter.push(everyDiv[i]);
    };
} 
```

这完全一样，但在开始时声明了变量。由于在 JavaScript 中，变量的作用域是函数，而不是代码块，因此在开始时使用单个“var”声明来启动函数是理想的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T18:07:03.823

```
function load() {
  var divTags = document.getElementsByTagName("div");
  var divArray = new Array();
  var j = 0;
  for(i = 0; i < divTags.length; i++) {
    if(divTags[i].id.substr(0,5) == "thing") {
      divArray[j++] = divTags[i].id;
    }
  }
  for(i = 0;i < divArray.length; i++)
    alert(divArray[i]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T17:43:33.637

您可以使用通配符选择页面上的所有元素，然后使用正则表达式过滤元素。

```
 var all =document.getElementsByTagName('*');
 var r = /^thing\d+$/;
 var test = function(el){
      return r.test( el.getAttribute('id'));
 }
 var elements = [];
 for(var i=0,l=all.length;i<l;i++)
     If(test(all[i]))
         elements.push(all[i]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T17:50:01.983

您应该在要修改的动态 div 上使用类，然后遍历[getElementsByClassName](https://developer.mozilla.org/en/DOM/document.getElementsByClassName)的结果：

```
var dynamicDivs = document.getElementsByClassName('dynamic');

for (var i = 0; i < dynamicDivs.length; i++) {
    // do whatever you want with dynamicDivs[i]
} 
```

# ruby-on-rails - nil:NilClass 的未定义方法“rfc822”

> ID：11475523
> 
> 赞同：0
> 
> 时间：2012-07-13T17:36:14.643
> 
> 标签：ruby-on-rails, fullcalendar

我在 ruby​​ 1.9.3-p320 上的 rails 3.2 中使用 fullcalendar，为我的 eventsController 制作了一些自定义路由，然后将这些路由变成 fullcalendar eventSources

```
 #config/routes.rb
 match '/my_events', :to => 'events#my_events', :as => "my_events"

 #calendar.js
    {
        url: '/my_events',
        color: '#33FDC0',
        textColor: 'black',
        ignoreTimezone: true
    },

 #EventsController
 def my_events

   @events = current_user.events

   respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @events }
   end
 end 
```

但是这些事件并没有显示出来（尽管它们正在创建，但我可以通过 /events/:id 和控制台访问它们）。

在 Chrome 的 JS 控制台中，我收到此错误：

```
 GET http://localhost:3000/my_events?start=1341118800&end=1341723600&_=1342200460434 500 (Internal Server Error) 
```

页面本身看起来像这样：

# EventsController#my_events 中的 NoMethodError

### nil:NilClass 的未定义方法“rfc822”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:13:55.793

我没有弄清楚这一点，但我确实修复了它。我重置了数据库并开始工作。我认为有些元素没有开始日期和时间，从而使整个套接字崩溃。

# jquery - 在 Jquery 中为 html 元素设置动画

> ID：11475527
> 
> 赞同：-1
> 
> 时间：2012-07-13T17:36:35.810
> 
> 标签：jquery, jquery-plugins

“监视器”是一个框，每次鼠标悬停在页面（网页）的一部分上时都会显示放大的文本

“+”和“-”是分别帮助我增加和减少盒子大小的两个按钮。

当框中的文本溢出框并使我的代码看起来效率低下时，就会出现问题。这是一个使加号按钮增加框大小（文本大小）的示例简而言之，我只想对这个框设置一些限制，以便它的大小获得阈值和最大值

```
$('div.monitor').animate({ 'fontSize': '+=10pt' }, 'fast'); return false; break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:55:03.360

我不喜欢@Raminson 给出的其他答案的逻辑。它说“如果字体的大小小于 40 像素，则将大小增加 10”。那么大小限制（盒子容器）可以最大为 49px（如果初始条件为 =39px）。我会做这样的事情：

```
while ($('div.monitor').css('font-size') != "40px") {
    $('div.monitor').animate({ 'fontSize': '+=1px' }, 'fast');
} 
```

这样，它一次增加 1 并达到所需的值 = 40px。

你甚至可以这样做：

```
while ($('div.monitor').css('font-size') != "40px") {
    $('div.monitor').css( 'fontSize', '+=1px');
} 
```

它看起来像一个动画

# php - 使用jsp清除二维会话数组

> ID：11475534
> 
> 赞同：0
> 
> 时间：2012-07-13T17:37:10.293
> 
> 标签：php, javascript, session

我有一个二维会话数组，我试图在打印账单后清除它。为此，我正在使用此代码

```
<script type="text/javascript">
    function textsizer(e) {
    var evtobj=window.event? event : e;
    var element = evtobj.target ? evtobj.target : evtobj.srcElement;
    if (element.tagName.toLowerCase() == "body") {
        var unicode=evtobj.charCode? evtobj.charCode : evtobj.keyCode;
        var actualkey=String.fromCharCode(unicode)
        if(actualkey=="x"){
            show_confirm()
            function show_confirm(){
            var con = confirm("Are You Sure you wan to cancel this bill?");
            if (con ==true){
                session.invalidate();
            }
            else{
            alert("You pressed Cancel!");
            }
            }
        }
    }
}
document.onkeypress=textsizer
</script> 
```

但这段代码没有清除会话。我使用谷歌浏览器和 Internet Explorer 尝试过，但没有用。谁能帮我解决这个问题？我也尝试用 php 来做，但它也对我不起作用。我的情况我想通过在键盘上按 x 来删除会话，无论是什么语言，我只想按 x 键清除会话

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:54:17.970

您可以使用 JavaScript 来捕获按下“x”键的时间，并重定向到 PHP 页面以清除会话。所以你想要一些类似的东西：

```
//Your main page
<script type='text/javascript'>
window.onkeypress = function() {
    if (event.keyCode == 88) {
        window.location = 'clear_session.php';
    }
}

//clear_session.php
session_start();
session_unset();
session_destroy();
header ("Location:main_page.php"); //redirect back to main page 
```

# php - 连接客户端PC，使用php或JS访问文件

> ID：11475537
> 
> 赞同：1
> 
> 时间：2012-07-13T17:37:33.883
> 
> 标签：php, javascript

这是我想要实现的目标。

在我的服务器上编写一个 php 或 JS 程序，该程序连接到客户端的 PC（我们网络之外）并读取文件或将它们复制到我们的服务器。

要读取的客户端文件夹将是相同的，例如：C:\MyCSV，尽管子文件夹名称会更改。

我的服务器运行 Linux，假设客户端有 PC，而不是 MAC 或 Linux，就足够了。

我不是在寻找代码，我想知道这是否可以使用 PHP 或 JS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:50:12.337

不，这是不可能的。当 PHP 托管在该机器上（通过本地服务器）时，PHP 可以访问本地目录，但不能从远程服务器访问。

用户必须首先上传目录的内容。

JS 更不可能，因为它是一种客户端语言，因此具有更严格的安全限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:01:49.380

可以为用户创建一个 HTML 界面来选择和上传文件，并让 PHP 接收这些文件并对其进行操作。但是你不能只是免费访问远程用户的文件系统。

如果您的客户端具有静态 IP 地址，他们可能会设置 SSH 服务器或其他一些安全的远程登录协议，从而允许您的脚本登录到他们的机器并获取文件。您需要与他们合作以确保安全地完成此操作并且不会造成任何不必要的漏洞。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T18:01:59.953

如果没有用户干预，我们和浏览器开发人员可能会认为您正试图从用户计算机窃取文件。因此，我们将对您进行批评，浏览器开发人员不会包含这样做的传统方式。

正常且必要的“用户干预”是浏览到要上传到服务器的文件。

# java - 事务似乎已回滚，但它们并未在数据库中回滚

> ID：11475541
> 
> 赞同：1
> 
> 时间：2012-07-13T17:37:45.870
> 
> 标签：java, spring, hibernate, hsqldb

PersistenceHelper-context.xml

```
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">    <!---->
        <property name="driverClassName" value="org.hsqldb.jdbc.JDBCDriver"/>
        <property name="url" value="jdbc:hsqldb:mem:mydb"/>
        <property name="username" value="sa"/>
        <property name="password" value=""/>
    </bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean"
          depends-on="dataSource" name="_sessFac" >  
        <property name="dataSource" ref="dataSource"/>
        <property name="configLocation" value="hibernate.cfg.xml.incDTD"/>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.HSQLDialect</prop>
                <prop key="hibernate.hbm2ddl.auto">create</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.connection.shutdown">true</prop>
            </props>
        </property>
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean> 
```

类头

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"classpath:PersistenceHelper-context.xml"})
@TransactionConfiguration(defaultRollback = true, transactionManager = "transactionManager") 
@Transactional
public class BaseClass extends BaseTestClass{//.....} 
```

然后我想使用事务的所有类都派生自BaseClass，即 `public class FooTest extends BaseClass`

此外，当我运行我的代码时，我看到以下内容：

```
HibernateTransactionManager | Initiating transaction rollback
[13 Jul 2012 11:29:13,738] DEBUG  HibernateTransactionManager | Rolling back Hibernate transaction on Session [org.hibernate.impl.SessionImpl@107536b]
[13 Jul 2012 11:29:13,738] DEBUG  HibernateTransactionManager | Triggering afterCompletion synchronization
[13 Jul 2012 11:29:13,738] DEBUG  TransactionSynchronizationManager | Clearing transaction synchronization
[13 Jul 2012 11:29:13,738] DEBUG  TransactionSynchronizationManager | Removed value [org.springframework.orm.hibernate3.SessionHolder@17b3cdb] for key [org.hibernate.impl.SessionFactoryImpl@14642ac] from thread [main]
[13 Jul 2012 11:29:13,738] DEBUG  TransactionSynchronizationManager | Removed value [org.springframework.jdbc.datasource.ConnectionHolder@129a6a3] for key [org.springframework.jdbc.datasource.DriverManagerDataSource@c506b] from thread [main]
[13 Jul 2012 11:29:13,738] DEBUG  HibernateTransactionManager | Closing Hibernate Session [org.hibernate.impl.SessionImpl@107536b] after transaction
[13 Jul 2012 11:29:13,738] DEBUG  SessionFactoryUtils       | Closing Hibernate Session
[13 Jul 2012 11:29:13,738] INFO   TransactionalTestExecutionListener | Rolled back transaction after test execution for test context 
```

然而，当我从数据库中删除时，更改会保留下来，并且我未来的测试会失败，因为表中缺少一个对象。我错过了什么吗？任何方向将不胜感激。提前致谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:45:28.490

您应该使用`sessionFactory.getCurrentSession()`来获取`Session`与当前事务关联的。

`openSession()`创建一个新会话，该会话与 Spring 管理的事务无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:38:27.750

我从未使用过 DriverManagerDataSource，但我认为它可以将某种“autoCommit”属性默认设置为 true。您可以尝试使用像[c3p0](http://www.mchange.com/projects/c3p0/)这样的真实连接池（因为 DriverManagerDataSource 类不是实际的连接池）。有了它，我对交易没有任何问题。

# facebook - 使用 PHP 打开图形发布操作（缺少终端和 cURL）

> ID：11475551
> 
> 赞同：0
> 
> 时间：2012-07-13T17:38:59.437
> 
> 标签：facebook, post, action

我的情况类似：[this guy on stack overflow](https://stackoverflow.com/questions/8509114/open-graph-publish-an-action-using-php-for-curl-instead-of-terminal)。我在 facebook（[这里](https://developers.facebook.com/docs/opengraph/tutorial/)）和第 4 步上关注本教程。我需要在 facebook 上发布一个操作。该教程说要在终端中运行以下代码：

POST [https://graph.facebook.com/me/[YOUR_APP_NAMESPACE]:cook](https://graph.facebook.com/me/[YOUR_APP_NAMESPACE]:cook) ?recipe=OBJECT_URL&access_token=ACCESS_TOKEN

我的服务器由 Winhost 托管，它们不支持 cUrl 或终端使用，因为服务器是共享的。我可以在 PHP 中做什么来发布操作？谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:04:47.180

如果您需要使用 PHP 来发布帖子，请更改您的主机，因为您将永远无法尽您所能使用 Graph API。例如，您将无法使用 PHP SDK，因为它也依赖于 cURL。

正如教程最后指出的那样，您可以通过 JS SDK 实现对 Facebook 的调用。如教程所示创建一个加载了 JS SDK 的测试页面，然后单击按钮发布操作

```
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US"
      xmlns:fb="https://www.facebook.com/2008/fbml"> 
<head prefix="og: http://ogp.me/ns# [YOUR_APP_NAMESPACE]: 
                  http://ogp.me/ns/apps/[YOUR_APP_NAMESPACE]#">
  <title>OG Tutorial App</title>
  <meta property="fb:app_id" content="[YOUR_APP_ID]" /> 
  <meta property="og:type" content="[YOUR_APP_NAMESPACE]:recipe" /> 
  <meta property="og:title" content="Stuffed Cookies" /> 
  <meta property="og:image" content="http://fbwerks.com:8000/zhen/cookie.jpg" /> 
  <meta property="og:description" content="The Turducken of Cookies" /> 
  <meta property="og:url" content="http://fbwerks.com:8000/zhen/cookie.html">

  <script type="text/javascript">
  function postCook()
  {
      FB.api(
        '/me/[YOUR_APP_NAMESPACE]:cook',
        'post',
        { recipe: 'http://fbwerks.com:8000/zhen/cookie.html' },
        function(response) {
           if (!response || response.error) {
              alert('Error occured');
           } else {
              alert('Cook was successful! Action ID: ' + response.id);
           }
        });
  }
  </script>
</head>
<body>
  <div id="fb-root"></div>
  <script>
    window.fbAsyncInit = function() {
      FB.init({
        appId      : '[YOUR_APP_ID]', // App ID
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
      });
    };

    // Load the SDK Asynchronously
    (function(d){
      var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
      js = d.createElement('script'); js.id = id; js.async = true;
      js.src = "//connect.facebook.net/en_US/all.js";
      d.getElementsByTagName('head')[0].appendChild(js);
    }(document));
  </script>

  <h3>Stuffed Cookies</h3>
  <p>
    <img title="Stuffed Cookies" 
         src="http://fbwerks.com:8000/zhen/cookie.jpg" 
         width="550"/>
  </p>

  <br>
  <form>
    <input type="button" value="Cook" onclick="postCook()" />
  </form>
</body>
</html> 
```

# php - 结合这些基本的php函数

> ID：11475552
> 
> 赞同：-1
> 
> 时间：2012-07-13T17:39:01.500
> 
> 标签：php, wordpress

我需要将这两个 php 函数添加`<?php the_field('city'); ?>`到`<?php the_field('country'); ?>`下面的函数中来代替`$city`and`$country`变量。

```
<?php echo do_shortcode('[forecast location="' . $city . ' , ' . $country. '" caption="" numdays="3" iconset="Cartoon" class="css_table_class" cache="true"]'); ?> 
```

将不胜感激任何帮助我的 PHP 不是很好，我不断得到错误。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:42:15.727

`the_field`输出字段值而不是返回它。你需要`get_the_field`：

```
echo do_shortcode(
    '[forecast location="' . get_the_field('city') . ' , ' . get_the_field('country') . 
    '" caption="" numdays="3" iconset="Cartoon" class="css_table_class" cache="true"]'
); 
```

# css - 类中类后代的 CSS 选择器

> ID：11475553
> 
> 赞同：2
> 
> 时间：2012-07-13T17:39:11.673
> 
> 标签：css

是否可以为“b 类元素，它是 a 类元素的后代”创建 CSS 选择器？

谢谢，拉斯托

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T17:41:35.643

对的，这是可能的：

直系后代：

```
.a > .b { /* ... */ } 
```

所有后代：

```
.a .b { /* ... */ } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T17:41:44.270

鉴于加价：

```
<div class="elementClassA">
    <div class="elementClassB">first B element</div>
</div>
<div class="elementClassA">
    <div class="elementClassC">first C element
        <div class="elementClassB">Second B element</div>
    </div>
</div>​ 
```

是的，对于*所有*后代：

```
.elementClassA .elementClassB {
} 
```

以上将针对`first B element`和`Second B element`: [JS Fiddle 演示](http://jsfiddle.net/davidThomas/hVjEG/)。

对于直系后代：

```
.elementClassA > .elementClassB {
} 
```

这将*只*针对`first B element`：[JS Fiddle 演示](http://jsfiddle.net/davidThomas/hVjEG/1/)。

参考：

*   [`CSS 选择器](http://www.w3.org/TR/CSS2/selector.html#pattern-matching)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T17:41:59.807

当然，这是一个简单的 CSS 选择器：

```
.classA .classB {} 
```

# php - 我的代码中出现意外的 T_ELSE 错误，有人可以看到吗？

> ID：11475558
> 
> 赞同：-1
> 
> 时间：2012-07-13T17:39:36.523
> 
> 标签：php, mysql, sql, database

我找不到我的错误，我可以帮忙吗？我正在尝试使用 cookie 的登录代码。先感谢您！我似乎看不到我的错误。我希望有人能看到我错过的东西。错误出现在第 47 行，但我知道这并不完全意味着它就在那里。

```
<?php
    if(isset($_POST['sent']) && $_POST['sent'] == "yes")
    {
        foreach($_POST as $field => $value)
        {
            if($value == "")
            {
                $blank_array[$field]= $value;
            }
            else
            {
                $good_data[$field]=strip_tags(trim($value));
            }
        }
    }

    if(@sizeof($blank_array) > 0)
    {
        $message = "<p style='color: red; margin-bottom: 0; font-weight: bold'> Error.</p>";
        extract($blank_array);
        extract($good_data);
        include("form_log.php");
        exit();
    }

    include("dbstuff.php");
    $cxn = mysqli_connect($host,$user,$password,$database) or die ("coulnt connect");
    $query = "SELECT first_name FROM customer WHERE user_name='$_POST[user_name]' AND       password=md5('$_POST[password]')";
    $result = mysqli_query($cxn,$query) or die ("couldnt query");
    $n_row = mysqli_num_rows($result);

    if($n_row < 1)
    {
        $message = "<p style='color: red; margin-bottom: 0; font-weight: bold'> Not found.     </p>";
        extract($_POST);
        include("form_log.php");
        exit();
    }
    else
    {
        $row=mysqli_fetch_assoc($result);
        setcookie("first_name",$row['first_name']);
        setcookie("auth","yes");
        header("Location: secret_page_cookie.php");
    }

    else
    {
        $user_name = "";
        $password = "";
        include("form_log.php");
    }
?> 
```

抱歉没有缩进，但这很难缩进。第二个是 if(@sizeof)..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T17:40:48.780

```
if ($n_row < 1) {
    $message = "<p style='color: red; margin-bottom: 0; font-weight: bold'> Not found.     </p>";
    extract($_POST);
    include("form_log.php");
    exit();
} else {
    $row=mysqli_fetch_assoc($result);
    setcookie("first_name",$row['first_name']);
    setcookie("auth","yes");
    header("Location: secret_page_cookie.php");
} else {
    $user_name = "";
    $password = "";
    include("form_log.php");
} 
```

你在这里有两个`else`陈述。您需要弄清楚`if`它属于哪个语句或将其转换为`elseif`条件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T17:41:13.790

第 47 行：

```
else
{
$user_name = "";
$password = "";
include("form_log.php");
} 
```

`else`每一个只能有一个`if`这是第二个`else`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T17:41:52.993

到最后你有两个其他块，应该只有一个。而且您的代码很容易受到 SQL 注入攻击。不要通过连接构造 SQL 字符串，而是使用参数化查询。

# javascript - TinyMCE第一次初始化不加载外部字体

> ID：11475563
> 
> 赞同：1
> 
> 时间：2012-07-13T17:40:10.977
> 
> 标签：javascript, content-management-system, tinymce

我正在开发内容管理系统页面编辑功能。我在内容区域中有可以单击并转换为 TinyMCE 编辑器的位置，然后保存回来以更新页面。我遇到的问题是加载外部字体（来自 fonts.com/web-fonts）。我目前正在使用 custom_content.css 文件和 @import 来加载外部字体。正在使用类似的东西即时添加编辑器

```
tinyMCE.execCommand('mceAddControl', false, 'editor_' + field_id); 
```

*因此，正在*加载字体，但它们只会在第一个*之后的实例中显示。*因此，如果我有 4 个可单击/可编辑的区域，则第一个实例不会*呈现*外部字体，但之后的每个实例都会呈现。我假设在渲染第一个编辑器时字体没有完全加载。

仅供参考，字体已经在加载编辑器的页面上使用，因此它们*应该*已经被缓存。关于如何解决这个问题的任何想法？我的下一步将尝试删除/重新初始化编辑器的第一个实例，但我知道这会对页面造成不必要的闪烁影响。

任何帮助将非常感激。

# powershell - echo [uint32]::maxvalue 说 'uint32::maxvalue' 而不是 4294967295

> ID：11475566
> 
> 赞同：4
> 
> 时间：2012-07-13T17:40:28.927
> 
> 标签：powershell

```
[DBG]: PS C:\Windows\system32>>> echo [uint32]::maxvalue
[uint32]::maxvalue 
```

和

```
[DBG]: PS C:\Windows\system32>>> $mv = [uint32]::maxvalue
[DBG]: PS C:\Windows\system32>>> echo $mv
4294967295 
```

我确信 powershell 有一些非常好的理由这样做:-)。有什么办法我可以告诉它不要这样做。我实际上将和 int 传递给一个函数，有时我想传递 maxvalue

我知道我能做到

```
$mv = [uint32]::maxvalue
MyFunc $mv 
```

我想知道是否有类似的东西

```
MyFunc ([uint32]::maxvalue)
MyFunc `[uint32::maxvalue` 
```

ETC

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T17:48:14.577

原因是该`echo`命令将参数解释为 a`string`而不是任意值。因此，在第一个示例中，它按字面意思打印出参数，而不是将其解释为一个值。在第二种情况下，尽管它被解释为表达式并被分配给一个值。

您可以通过自己创建一个将输出回显到控制台的函数来重现此行为。

```
function example { 
  param ([string]$arg)
  Write-Output $arg
}

example [uint]
> [uint]
example 42
> 42 
```

您还可以强制`echo`函数将其解释为值，方法是使用`()`s 指定它是一个表达式

```
echo [uint32]::maxvalue
> [uint32]::maxvalue
echo ([uint32]::maxvalue)
> 4294967295 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T11:41:39.777

PowerShell 在解释命令时使用两种模式，参数模式和表达式模式（请参阅 about_Parsing 主题）。

以下是在表达式模式下解析的，这就是您获取值的原因。

```
$mv = [uint32]::maxvalue
echo $mv 
```

在 Argument 模式下，所有内容都被视为字符串，除非它以下列字符之一开头：$,@,',",(

```
echo [uint32]::maxvalue 
```

参数 (-InputObject) 被解析为字符串并逐字回显。要评估它，您需要强制将其识别为表达式，将其括在括号中即可：

```
echo ([uint32]::maxvalue)
4294967295 
```

# python - os.stat() 在 CPython 中定义在哪里？

> ID：11475576
> 
> 赞同：2
> 
> 时间：2012-07-13T17:41:19.340
> 
> 标签：python, cpython

我查看了 CPython 源代码（[此处为 Hg 在线](http://hg.python.org/cpython/file/c09f454af2c6/)），但我似乎无法找到`os.stat()`定义的位置。它看起来像是模块`stat`中的一个全局`os`变量（Lib/os.py，ca. line 139）。

有人可以指点我到适当的文件吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T17:46:54.760

看起来像第 51 行（对于 UNIX；对于其他平台也有类似的行）：

```
from posix import * 
```

追溯它，我们发现我们通过第 29 行的返回值到达了那个点：

```
_names = sys.builtin_module_names 
```

并且`posix_stat`在[Modules/posixmodule.c](http://hg.python.org/cpython/file/c09f454af2c6/Modules/posixmodule.c%3a) :2301 中定义，最终被调用`os`：

```
static PyObject * posix_lstat(PyObject *self, PyObject *args, PyObject *kwargs) // ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T17:46:41.893

此功能与平台相关，并在模块、`posix`或之一中定义。例如，这里是[POSIX 操作系统的](http://hg.python.org/cpython/file/c09f454af2c6/Modules/posixmodule.c#l2301)[实现](http://hg.python.org/cpython/file/c09f454af2c6/Modules/posixmodule.c#l2301)。`nt``os2``ce`[`os.stat()`](http://hg.python.org/cpython/file/c09f454af2c6/Modules/posixmodule.c#l2301)

# extjs4 - 增加选项卡面板标题字段的字体大小和高度

> ID：11475577
> 
> 赞同：0
> 
> 时间：2012-07-13T17:41:22.537
> 
> 标签：extjs4, extjs4.1

```
Ext.define('ProjectExample.view.example' ,{
    extend:'Ext.tab.Panel',
    title:'TITLE BAR',
    layout:'fit',
    .... 
```

这是我的`Tab Panel`应用程序，我需要增加`title`属性的文本大小，并增加它的高度。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:47:54.193

你可以从 CSS 中做到这一点。检查选项卡面板的 Div id 并重新调整标题字体大小。

# objective-c - 将 NSPredicateEditor 添加到 NSScrollView 时出现 UI 故障

> ID：11475579
> 
> 赞同：1
> 
> 时间：2012-07-13T17:41:33.350
> 
> 标签：objective-c, cocoa, addsubview, nsscrollview, nspredicateeditor

我正在尝试在 NSScrollView 中显示 NSPredicateEditor ，以便用户可以使用编辑器进行无限大的查询。一切都或多或少地工作，但是只有当编辑器嵌套在滚动视图中时才会发生一些奇怪的 UI 故障，而不会发生。这是我在滚动视图中设置编辑器的方式：

```
predicateEditor = [[NSPredicateEditor alloc] init];
scrollView = [[NSScrollView alloc] initWithFrame:[[self view] frame]];
[scrollView setDocumentView:predicateEditor];
[scrollView setHasVerticalScroller:YES];
[scrollView setAutohidesScrollers:YES]; 
```

如果我尝试“破坏”它，通过非常快速地向编辑器添加行，UI 会像这样乱码：

![在此处输入图像描述](../Images/902f93dafe02b9323621ff76297a3057.png)

但问题是，如果我不将编辑器嵌套在滚动视图中，就不可能发生此错误。

重申一下，我唯一不同的是嵌套在 NSScrollView 中。我需要注意这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:11:31.237

在测试了 Roger 的评论后，我可以验证在 IB 中执行此操作可以达到预期的结果。我不知道为什么它不能以编程方式很好地工作，但是很好。

# ember.js - 为什么这个嵌套的 ember 路由的出口不显示？

> ID：11475590
> 
> 赞同：2
> 
> 时间：2012-07-13T17:42:14.907
> 
> 标签：ember.js

这里有两条路线，A 部分和 B 部分。B 部分有一个嵌套路线，称为 subsectionB。

当您单击“转到 B 小节”时，它应该显示 SECTION B ==>SUB SECTION B

但什么也没发生。A节内容仍然存在。RouteManager 中的日志记录表明它正在转换，但出口没有得到更新。怎么了？

这是小提琴：

[http://jsfiddle.net/inconduit/hSpHK/2/](http://jsfiddle.net/inconduit/hSpHK/2/)

在下面我粘贴了应用程序代码。

```
<script type="text/javascript">
  App = Ember.Application.create({
    ready: function() {
      App.initialize();
    }
  });

  App.ApplicationController = Ember.ObjectController.extend();
  App.ApplicationView = Ember.View.extend({
      templateName: "application_view"
  });

  App.SectionAController = Ember.ArrayController.extend();
  App.SectionAView = Ember.View.extend({
    templateName: "section_a_view"
  });

  App.SectionBController = Ember.ObjectController.extend();
  App.SectionBView = Ember.View.extend({
    templateName: "section_b_view"
  });

  App.SubSectionB = Ember.ArrayController.extend();
  App.SubSectionBView = Ember.View.extend({
    templateName: "sub_section_b_view"
  })

  App.Router = Ember.Router.extend({

    enableLogging: true,

    root: Ember.Route.extend({        

      doSectionA    : function(router, event) { console.log('blah'); router.transitionTo('sectionA.index'); },
      doSubSectionB  : function(router, event) { router.transitionTo('sectionB.subSectionB.index'); },

      index: Ember.Route.extend({
          route: '/',
          redirectsTo: "sectionA.index"
      }),

      sectionA: Ember.Route.extend({
        route: '/sectionA',
        index: Ember.Route.extend({
          route: '/',
          connectOutlets: function(router, context) {
            router.get('applicationController').connectOutlet('sectionA');
          }
        })
      }),

      sectionB: Ember.Route.extend({
        route: '/sectionB',
        index: Ember.Route.extend({
          route: '/',
          connectOutlets: function(router, context) {
            router.get('applicationController').connectOutlet('sectionB');
          }
        }),
        subSectionB: Ember.Route.extend({
          route: '/subSectionB',
          index: Ember.Route.extend({
              route: '/',
              connectOutlets: function(router, context) {
                router.get('sectionBController').connectOutlet('subSectionB');
              }
          })
        })

      })

    })
  })
</script>
</head>
<body>

  <script type="text/x-handlebars" data-template-name="application_view">
  <a href="#" {{action "doSectionA"}}>go to section A</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#" {{action "doSubSectionB"}}>go to subsection B</a>
    <div class="container">
        {{outlet}}
    </div>
  </script>
  <script type="text/x-handlebars" data-template-name="section_a_view">
    SECTION A
  </script>
  <script type="text/x-handlebars" data-template-name="section_b_view">
    SECTION B
    {{outlet}}
  </script>
  <script type="text/x-handlebars" data-template-name="sub_section_b_view">
    this is sub section B
  </script>

</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T18:07:01.240

点击“go to subsection B”查看路由器的日志：

```
STATEMANAGER: Sending event 'doSubSectionB' to state root. 
STATEMANAGER: Entering root.sectionB
STATEMANAGER: Entering root.sectionB.subSectionB
STATEMANAGER: Entering root.sectionB.subSectionB.index 
```

路由器永远不会通过`root.sectionB.index`它加载sectionB的模板（它反过来包括subSectionB的出口）。因此，您需要确保通过将 sectionB 的模板放入`root.sectionB`路由中来加载它：

**小提琴**：http: [//jsfiddle.net/ppanagi/hSpHK/4/](http://jsfiddle.net/ppanagi/hSpHK/4/)

```
sectionB: Ember.Route.extend({
   route: '/sectionB',
   connectOutlets: function(router, context) {
      router.get('applicationController').connectOutlet('sectionB');
   },      

   index: Ember.Route.extend({
       route: '/',           
   }),

   // ...
}) 
```

# mysql - Mysql 查询 - 想不出办法做到这一点

> ID：11475600
> 
> 赞同：2
> 
> 时间：2012-07-13T17:43:23.850
> 
> 标签：mysql

```
INSERT INTO `table` (`game_id`, `first`, `second`, `third`)
VALUES
    (1, 'jack', 'joe', 'pat'),
    (2, 'jack', 'joe', 'jess'),
    (3, 'pat', 'jess', 'jack'),
    (4, 'pat', 'jess', 'jack'); 
```

这是一个统计表，其中包含每场比赛的前三名球员。我希望拉动所有玩家并相应地对他们进行排序。

```
First place - 3 points
Second place - 2 points
Third place - 1 point 
```

所以，它应该返回：

```
id  player  points
1   jack    8
2   pat     7
3   jess    5
4   joe     4 
```

我想不出用一个查询来做到这一点的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T17:59:46.087

```
Select player, sum(points) as points from (
Select `first` as player, count(`first`)*3 as points From gameStats group by `first` 
union all
Select `second` as player, count(`second`)*2 as points From gameStats group by `second` 
union all
Select `third` as player, count(`third`)*1 as points From gameStats group by `third` ) as tmp group by player 
```

这应该这样做。

如果您需要更多帮助，请告诉我。

# android - 如何将ICON图像设置为android中的每个expnadle列表组

> ID：11475604
> 
> 赞同：0
> 
> 时间：2012-07-13T17:43:42.917
> 
> 标签：android

我正在使用可扩展列表适配器来放置具有 3 个组的视图，每个组有 4 个子子项，当前每个组具有相同的图标图像。我需要将 3 个不同的图像放到三个组中。如何将其放入 android 中。请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:00:53.997

我认为你已经在你的一类中扩展了 BaseExpandableListAdapter 。因为你将有一种方法

```
public View getGroupView(int groupPosition, boolean isExpanded, View convertView,
                ViewGroup parent) {
            View row = convertView;
            MyHolder hldr = null;
            try{
                if(row==null){
                    LayoutInflater inflater = (LayoutInflater)getBaseContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    row = inflater.inflate(R.layout.disp_lib_group_row, null);
                    hldr = new MyHolder();
                    hldr.txtv1 = (TextView) row.findViewById(R.id.txtGrp);
                    hldr.imgv1 = (ImageView) row.findViewById(R.id.imgGrp);
                    row.setTag(hldr);
                }
                else{
                    hldr=(MyHolder)row.getTag();
                }
                hldr.txtv1.setText(getGroup(groupPosition).toString());

          EDIT    EDIT    EDIT    EDIT    EDIT
                   System.out.println("Group Position: "+groupPosition);
                   //    here you will get groupPosition, like 0/1/2/3
                   //    just check it by if condition and
                   //    set needed image in followin line code
                   if(groupPosition == 0)
                    hldr.imgv1.setImageResource(R.drawable.img0);
                   if(groupPosition == 1)
                    hldr.imgv1.setImageResource(R.drawable.img1);
                   ......  Check 2, 3 ......
          EDIT    OVER    OVER

                }
            }catch(Exception e){System.out.println("Error: \n");e.printStackTrace();}
            return row;
        } 
```

# jira - 在 Jira 中为开发人员添加问题类型

> ID：11475606
> 
> 赞同：4
> 
> 时间：2012-07-13T17:43:53.570
> 
> 标签：jira

是否可以在 JIRA（作为项目管理员）中创建新的问题类型，以便只有管理员/开发人员可以创建该类型的问题？

我们希望我们的管理员/开发人员能够创建这些新问题，而不是我们的用户。（不过，用户应该能够看到这种新类型的问题）。

任何信息，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T18:51:13.370

我认为您正在寻找的是“问题类型方案”

从文档中获取

> 什么是“问题类型方案”？“问题类型方案”定义了问题类型的子集，其中：
> 
> 限制项目的可用问题类型集，并控制可用问题类型的顺序以及向用户显示项目的默认问题类型。“默认问题类型”是用户创建问题时显示在选择框中的问题类型。单个问题类型方案可以在多个项目中“重复使用”，以便一组类似的项目（即可能用于类似目的的项目）可以共享相同的问题类型设置。

更多信息可以在[这里找到](https://confluence.atlassian.com/display/JIRA/Associating+Issue+Types+with+Projects)

更新：设置权限以及用户可以看到或看不到的内容我很确定您必须设置“问题安全级别”我不确定您可以在此处更改多少，但是根据文档，您可以

> “允许您控制谁可以查看项目中的个别问题（取决于项目的权限）。”

你可以看到[这个](https://confluence.atlassian.com/display/JIRA/Configuring+Issue-level+Security)。

但我不知道您是否必须是 Jira 系统管理员才能设置它，我真的不这么认为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T05:52:27.730

您可以使用[权限方案](https://confluence.atlassian.com/display/JIRA/Managing+Project+Permissions)轻松做到这一点。创建一个新方案或复制现有方案，将“创建问题”权限授予您喜欢的用户组，并将该方案应用于所需的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T18:28:22.737

创建新问题类型 创建使用包含新问题类型的问题类型方案的项目 使用在默认权限方案的副本中创建问题限制谁可以在项目中创建问题

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-10-07T10:00:30.250

在 JIRA 中创建问题类型可以通过导航到**设置 > 问题 > 添加问题类型来完成**

![添加问题 JIRA](../Images/c787858fc5c6a807c2aedd0894ca807b.png)

从那里您可以编辑问题类型和名称。

![添加 JIRA 问题](../Images/426f0574468ec2ed73b6589be48fb23e.png)

有关更多信息，请查看[以下链接](https://confluence.atlassian.com/display/JIRA/Defining+Issue+Type+Field+Values)。如果您需要配置问题级别的安全性，请查看 Atlassian 文档中的[以下](https://confluence.atlassian.com/display/JIRA/Configuring+Issue-level+Security)文档。

# java - 两个 Java 函数声明之间的区别

> ID：11475607
> 
> 赞同：2
> 
> 时间：2012-07-13T17:43:54.710
> 
> 标签：java, abstract, function-declaration

当我遇到两个返回对抽象类的引用的函数声明时，我正在阅读 Hadoop 文档：

```
public FSDataInputStream open(Path f) throws IOException
public abstract FSDataInputStream open(Path f, int bufferSize) throws IOException 
```

除了参数不同之外，为什么这两个函数有不同的返回类型，一个显式声明`abstract`而另一个没有？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T17:45:32.347

抽象方法已声明但没有实现。子类被迫实现它们并且不能继承它们，因为它们没有在超类中实现。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-13T17:48:04.403

也回答原始问题，`abstract`它不是返回类型的一部分，它是方法本身的修饰符，就像`public`. 这两种方法的返回类型是相同的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-13T17:47:11.883

定义的类`public abstract FSDataInputStream open(Path f, int bufferSize) throws IOException`本身就是抽象的。这意味着该类只提供了方法的声明，而不是实现。

另一个可以是以下之一：

*   如果在接口中声明，则表明该方法再次是抽象声明。

*   否则，它可能是具体类的一部分，表明它在那里有一个实现。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-13T17:47:35.050

必须实现抽象方法。在不知道子类是什么的情况下，尚不清楚为什么在这种情况下，但是如果您要对其所在的任何类/接口进行子类化，则必须实现第二种方法，而您可以立即使用第一种方法。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-13T17:48:09.293

编码[文档](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)：

> 抽象方法是在没有实现的情况下声明的方法（没有大括号，后跟分号），如下所示：
> 
> ```
> abstract void moveTo(double deltaX, double deltaY);
>  If a class includes abstract methods, the class itself must be declared abstract, as in:
> 
> public abstract class GraphicObject {
>    // declare fields
>    // declare non-abstract methods
>    abstract void draw();
> } 
> ```
> 
> 当抽象类被子类化时，子类通常为其父类中的所有抽象方法提供实现。但是，如果不是，则子类也必须声明为抽象的。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-13T17:50:54.540

```
public abstract FSDataInputStream open(Path f, int bufferSize) throws IOException 
```

这并不意味着我们正在返回一个抽象类，而是我们正在声明一个方法，但我们还没有给出它的实现，这个他们的关键字`abstract`。
这是在`abstract`课堂上完成的。所以另一个类将`extend`抽象类并给出它的实现。

```
public FSDataInputStream open(Path f, int bufferSize) throws IOException 
```

告诉我们现在给出抽象方法的实现。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-13T17:52:20.263

**1.** `public abstract FSDataInputStream open(Path f, int bufferSize) throws IOException` , 表示这个**方法是一个抽象方法**，所以它只是一个声明而不是一个实现。所以这个方法既可以是接口中的方法，也可以是抽象类中的方法。所以**这个方法必须由第一个**实现接口的具体子类来实现，或者扩展包含这个方法的类。

**2.** `public FSDataInputStream open(Path f) throws IOException`如果在接口内声明此方法，则它是**抽象方法**，**否则是**抽象或非抽象类中的非抽象方法。

# windows-phone-7 - Bing通过代理在window phone Emulator上映射溃败

> ID：11475608
> 
> 赞同：0
> 
> 时间：2012-07-13T17:43:55.807
> 
> 标签：windows-phone-7

我使用下面给出的代码在 Bing Maps 上绘制路线。当系统直接连接到互联网时，它在模拟器上运行良好。但是当我在我公司的代理下的代码的倒数第二行时，它会抛出异常说：**需要代理授权：407**

```
BingMaps.RouteService.RouteServiceClient routeService = new BingMaps.RouteService.RouteServiceClient("BasicHttpBinding_IRouteService");
            BingMaps.RouteService.RouteRequest RouteReq = new BingMaps.RouteService.RouteRequest();
            RouteReq.Credentials = new BingMaps.RouteService.Credentials();
            RouteReq.Credentials.ApplicationId = ((ApplicationIdCredentialsProvider)Map.CredentialsProvider).ApplicationId;

            RouteOptions rOptions = new RouteOptions();
            rOptions.Mode = TravelMode.Driving;
            rOptions.Optimization = RouteOptimization.MinimizeDistance;
            RouteReq.Options = rOptions;
            RouteReq.Options.RoutePathType = BingMaps.RouteService.RoutePathType.Points;

            // Set the waypoints of the route to be calculated using the Geocode Service results stored in the geocodeResults variable.
            RouteReq.Waypoints = new System.Collections.ObjectModel.ObservableCollection<Waypoint>();
            foreach (Waypoint wp in WPList)
            {
                RouteReq.Waypoints.Add(wp);
            }
            //routeService.ClientCredentials = new System.ServiceModel.Description.ClientCredentials( new NetworkCredential("461167", "July@2012", "india");
            routeService.CalculateRouteAsync(RouteReq);
            routeService.CalculateRouteCompleted += new EventHandler<CalculateRouteCompletedEventArgs>(RouteService_CalculateRouteCompleted); 
```

我知道我需要设置代理，但是我不知道如何设置。因为 RouteService 未配置接受代理凭据。

互联网在模拟器上也可以正常工作，我还在模拟器上设置了代理凭据。

请建议如何做到这一点，否则不可能，因为它没有使用模拟器的代理凭据，甚至没有使用系统上存储的凭据。

# objective-c - 从 NSString 到 NSMutableArray 的值

> ID：11475611
> 
> 赞同：0
> 
> 时间：2012-07-13T17:44:19.997
> 
> 标签：objective-c, xcode, nsstring, nsmutablearray

我有一个带有数字的 NSString，例如“1,3,6,7”和一个在其他地方初始化的全局 NSMutableArray。

现在要从字符串中获取数字到数组，我认为这样的事情会起作用：

```
[myMArray arrayByAddingObjectsFromArray:([myString componentsSeparatedByString:@","])]; 
```

但它不起作用。有人可以解释我为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T17:48:34.340

方法[arrayByAddingObjectsFromArray](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)返回一个新的、自动释放的`NSArray`对象。看起来您假设它将对象添加到现有的`NSMutableArray`. 您应该改用该`addObjectsFromArray:(NSArray*)`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-12T07:35:22.030

在此方法中用于轻松将 NSString 复制到 NSMutableArray：

```
NSMutableArray *array = array =[[NSMutableArray alloc]init];   
NSString *datetime = @"(
        {
        content = "<p>Hallo lieber Falko,</p>\n<p>Ich bin auf der suche nach einem g\U00fcnstigen Urlaubsangebot, f\U00fcr eine Familie mit 3 ( 4;2;1) Kindern. Es soll auch nur f\U00fcr eine Woche sein. </p>\n<p>Vielen Dank f\U00fcr die mithilfe. </p>\n<p>Am besten Kreta, oder Kos. </p>\n<p>Mit freundlichen Gr\U00fc\U00dfen</p>\n";
        date = "2014-05-23 22:25:44";
        id = 2607;
        name = Elberskirch;
        parent = 0;
        url = "";
    }
)";

  array = [[datetime propertyList]mutableCopy];
NSLog(@"%@",array); 
```

# javascript - 如何为“Agile Uploader”版本 3 添加 JavaScript 回调？

> ID：11475615
> 
> 赞同：1
> 
> 时间：2012-07-13T17:44:48.950
> 
> 标签：javascript, jquery, jquery-plugins

在 Agile Uploader 插件的网页上，他写到版本 3 的发布，其开发人员写道：

*“不再有 JavaScript 回调。取而代之的是一个“事件”系统。如果您想构建自己的 JavaScript 以与 Agile Uploader 一起使用，您可以定义一个事件处理函数。”*

不用说，拥有回调函数非常重要。但是，我真的不明白他所说的“定义一个事件处理函数......”是什么意思。简而言之，我需要一个回调函数，但我不明白如何在这个插件的版本 3 中添加一个。我该怎么做？

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T22:26:14.390

Agile Uploader 3.0 包含一个名为**Agile-uploader-3.0.js的 javascript 文件**

*（如果使用此方法，还需要 jQuery。）*

该文件实现了核心功能，顶部是事件处理函数的现成可用示例。定义开始为：

```
$.fn.agileUploaderEvent = function(event) {.... 
```

要初始化 Agile Uploader，您将在要使用的 div 元素上调用 .agileUploader() 方法。在该方法中，您可以设置选项。

您可以将`js_event_handler:`选项（它是 的子选项`flashVars:`）设置为您自己的函数的名称，而不是使用默认值，例如：

```
$(document).ready(function () {
    $('#image-uploader').agileUploader({
        flashVars: {
            js_event_handler: '$.fn.myUploadEventHandler',    // <-- HERE!
            file_limit: 10,
            maxFileMessage: 'The maximum number of files you can upload has been reached.',
            ... etc
        },
        flashSrc: '.../your-path-to-the-swf-file/agile-uploader.swf',
        ... etc
     }); 
```

现在定义函数。如果您愿意，您可以调用现有的agileUploaderEvent() 函数使事情变得更容易，然后根据需要做一些额外的事情，例如：

```
 $.fn.myUploadEventHandler = function (event) {

         // First call the default event handler (optional, you could completely rewrite)
         $.fn.agileUploaderEvent(event); 

         // Now handle the events we want to 
         switch (event.type) {
             case 'progress':
                 $.fn.myExtraProgressHandler(event.file);  // Call my custom function (handler)
                 break;
             case 'file_already_attached':
                 console.log('The same file was already attached.'); // Do something useful?
                 break;
         };
     };

     $.fn.myExtraProgressHandler = function (file) {
         if (file.percentEncoded >= 100) {
             console.log('File progress reached 100%');  // Just an example...
             $("#file-attached").show();   // Do whatever we need to when progress >= 100%
         }
     }; 
```

此示例使用 jQuery，但如果您计划“单干”，同样的原则也适用。

# git - 在我的 git 存储库中包含 3rd 方库

> ID：11475619
> 
> 赞同：2
> 
> 时间：2012-07-13T17:45:22.577
> 
> 标签：git

> **可能重复：**
> [在源代码控制下管理代码使用的第 3 方源代码和二进制文件](https://stackoverflow.com/questions/11318738/managing-3rd-party-sources-and-binaries-used-by-code-under-source-control)

在我的 git 存储库中包含 3rd 方库会有什么问题。3rd 方库，如 Doctrine。这是个好主意吗？为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T18:20:37.583

也许将它作为一个子模块（http://git-scm.com/book/en/Git-Tools-Submodules）是一个更好的主意。

# c++ - 从“void*”转换为指向非“void”的指针需要显式转换（第 17 行）

> ID：11475624
> 
> 赞同：1
> 
> 时间：2012-07-13T17:45:45.550
> 
> 标签：c++, c, visual-studio-2010, visual-c++

我正在关注Learn C the Hard Way这本书，当我尝试运行这个程序时，我收到了这个错误消息：

> 从“void*”转换为指向非“void”的指针需要显式转换。

我不确定如何解决这个问题，我是否必须更改结构中的返回变量？

无论如何，看看这里的代码：（在 Visual C++ 2010 上编译，还没有尝试过 GCC）。

```
 //learn c the hardway

  #include <assert.h>
  #include <stdlib.h>
  #include <string.h> 
  #include <stdio.h>

  struct Person {
      char *name;
      int age;
      int height;
      int weight; 
  };

  struct Person *Person_create(char *name, int age, int height, int weight) 
  {
      struct Person *who = malloc(sizeof(struct Person)); 
      assert(who != NULL);

      who->name = strdup(name);
      who->age = age; 
      who->height = height;
      who->weight = weight;

      return who;
  } 

  void Person_destroy(struct Person *who)
  {
      assert(who != NULL);

      free(who->name);
      free(who);
  }

  void Person_print(struct Person *who) 
  {
      printf("Name: %s\n", who->name);
      printf("\tAge: %d\n", who->age); 
      printf("\tHeight: %d\n", who->height);
      printf("\tWeight: %d\n", who->weight); 
  }

  int main(int argc, char *argv[])
  {
      // make two people structures 
      struct Person *joe = Person_create(
              "Joe Alex", 32, 64, 140);

      struct Person *frank = Person_create(
              "Frank Blank", 20, 72, 180); 

      // print them out and where they are in memory 
      printf("Joe is at memory location %p:\n", joe);
      Person_print(joe);

      printf("Frank is at memory location %p:\n", frank);
      Person_print(frank); 

      // make everyone age 20 years and print them again 
      joe->age += 20;
      joe->height -= 2;
      joe->weight += 40; 
      Person_print(joe);

      frank->age += 20;
      frank->weight += 20; 
      Person_print(frank);

      // destroy them both so we clean up 
      Person_destroy(joe);
      Person_destroy(frank);

      return 0;
  } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T17:47:25.377

此行需要演员表：

```
 struct Person *who = malloc(sizeof(struct Person)); 
```

应该：

```
 struct Person *who = (struct Person *)malloc(sizeof(struct Person)); 
```

这只是因为您将此代码编译为 C++，而不是 C。在 C 中，不需要强制转换，并且为您隐式完成。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T17:48:48.413

Visual C++ 编译器将尝试根据正在编译的源文件的文件扩展名来确定正在编译的语言。例如，扩展名为 .cpp 的文件编译为 C++，扩展名为 .c 的文件编译为 C。

您的程序似乎是有效的 C，但不是有效的 C++：在 C 中，`void*`to`T*`转换是隐式的；在 C++ 中，需要强制转换。

如果您希望编译器将其编译为 C，您要么需要更改其文件扩展名，要么将[开关`/TC`传递](http://msdn.microsoft.com/en-us/library/032xwy55.aspx)给编译器以告诉它将文件编译为 C。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-13T17:47:37.353

```
struct Person *who = malloc(sizeof(struct Person)); 
```

这需要在 C++ 中进行转换：

```
struct Person *who = (struct Person *) malloc(sizeof(struct Person)); 
```

在 C 中，强制转换不是必需的，因为存在从`void *`任何对象指针类型的隐式转换。这种隐式转换在 C++ 中不存在，因此在 C++ 中需要强制转换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T17:50:36.243

错误消息是由于 C 不需要显式转换，而 C++ 需要。尝试确保编译器将源代码视为 C 而不是 C++。

# ubuntu - 无法在 Ubuntu 中锁定下载目录

> ID：11475625
> 
> 赞同：0
> 
> 时间：2012-07-13T17:45:50.860
> 
> 标签：ubuntu, terminal, virtual-machine

在使用此命令在 Ubuntu 上安装 lynx 时

```
sudo apt-get install lynx 
```

我得到这个错误

```
E: Could not get lock /var/lib/dpkg/lock - open (11 Resource temporarily unavailable)
E: Unable to lock the download directory (/var/lib/cache/dpkg/) 
```

如何解决这个问题？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:50:15.880

您是否有任何进程、更新等，试图获得锁定？要删除任何现有的锁，请在您的终端中使用以下命令：

```
sudo fuser -cuk /var/lib/dpkg/lock; sudo rm -f /var/lib/dpkg/lock 
```

# objective-c - APP在iOS中收到外部通知时检测BACKGROUND模式

> ID：11475627
> 
> 赞同：0
> 
> 时间：2012-07-13T17:45:58.920
> 
> 标签：objective-c, ios

这是我在这里使用了一年多的知识后的第一个问题。

这是我的问题。我正在开发一个应用程序，它允许您记录您的位置以保存路线。该APP的主要目标是学习在开始新路线后开车时不要触摸手机。除了特定场景外，我可以检测用户何时休眠手机以及何时解锁手机并返回APP。让我通过以下步骤来解释我自己：

1.  用户打开APP。
2.  用户开始记录新路线
3.  用户休眠电话
4.  然后外部通知到达（如 Viber 或 Whatsapp 消息）。
5.  用户解锁手机，然后 iOS 切换到收到通知的 APP <--- 奇怪的原因我无法检测到这个开关。我不需要应用程序名称或用户在此之后做什么，我只需要知道我的应用程序是否进入后台模式。

¿ 有答案吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:30:08.107

AppDelegate 中的这个调用怎么样：

```
- (void)applicationDidEnterBackground:(UIApplication *)application 
```

# c# - 通过提供管理凭据，使用 C# 代码访问 windows7 中的文件

> ID：11475633
> 
> 赞同：0
> 
> 时间：2012-07-13T17:46:22.007
> 
> 标签：c#, windows-7

我如何使用 C# 代码访问 Windows 7 中的 Windows 文件夹文件。我想使用管理员用户名密码访问该文件，而不是要求用户访问文件“AS ADMINISTRATOR”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:03:01.423

您是否正在寻找类似的东西：[A small C# Class for impersonating a User](http://www.codeproject.com/Articles/10090/A-small-C-Class-for-impersonating-a-User)

PS 想想在代码中硬编码管理员密码的后果。

# algorithm - 动态规划斐波那契算法

> ID：11475638
> 
> 赞同：3
> 
> 时间：2012-07-13T17:46:38.483
> 
> 标签：algorithm, time-complexity

我正在研究一种算法来计算斐波那契数并获得它的伪代码，但我无法弄清楚运行需要多少时间。我认为它以 O(n) 运行，但不太确定。这是代码：

```
Algorithm Fast-Fibonacci(n)
Let fib[0] and fib[1] be 1.
for each i from 2 to n, do:
    Let fib[i] be fib[i - 2] + fib[i - 1].
end of loop
return fib[n]. 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T17:50:06.923

你是正确的，这需要 O(n) ，因为你只是从 2 到 n 顺序计数来填充你的数组。如果您正在对 i-1 和 i-2 数字中的每一个进行某种查找，这可能会增加复杂性，但是按照您编写它的方式，您正在为这些值中的每一个调用一个直接地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T17:50:20.667

是的。最大的收获是每个循环都有恒定数量的操作，并且循环的大小与 n 的大小成线性关系。

但是，存在一种更节省空间的解决方案，因为除了最后两个之外，您并不特别关心任何数字。下次试试！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-13T03:12:31.363

找到第 n 个斐波那契的迭代解决方案在 n 的值方面采用 O(n)，在 n 的大小方面采用 O(2^length(n))（长度（n）== 表示 n 的位数） . 这种运行时间称为伪多项式。但是，如果使用递归方法来找到 n 的 fib，那么就值而言，它将花费指数时间 (O(2^n))。但这可以通过使用动态规划方法来解决 n 的 fib 来减少。

# sql - 如何将参数分配给要作为输出通过电子邮件发送的查询？

> ID：11475640
> 
> 赞同：0
> 
> 时间：2012-07-13T17:46:41.290
> 
> 标签：sql, sql-server, stored-procedures, sql-server-2000

我正在尝试将查询结果作为电子邮件正文通过电子邮件发送。我正在使用 2 个存储过程来完成此操作。第一个存储过程是一个示例电子邮件代码，因为 SQL Server 2000 没有像 SQL Server 2005 和 SQL Server 2008 那样的内置发送邮件功能。

以下是我目前所拥有的存储过程：我声明`@Body`，然后分配给运行以下查询`@Body`的存储过程`getpaidout1929`( )。`Exec @Body = sp_getpaidout1929`

```
SELECT        Store_Id, Paid_Out_Amount, Paid_Out_Comment, Paid_Out_Datetime, Update_UserName
FROM            Paid_Out_Tb
WHERE        (Store_Id = 1929) AND (Paid_Out_Amount > 50) AND (Paid_Out_Datetime BETWEEN CONVERT(DATETIME, '2012-06-01 00:00:00', 102) AND CONVERT(DATETIME, 
                         '2012-06-30 00:00:00', 102)) 
```

然后我执行存储过程。

```
Exec sp_SQLNotify ‘to@who.com', ‘who@who.com, ‘test’ 
```

它发送电子邮件，但`0`作为正文消息。

```
Create PROCEDURE [dbo].[sp_SQLNotify] 
   @From varchar(100) ,
   @To varchar(100) ,
   @Subject varchar(100)=" "

/*********************************************************************

This stored procedure takes the above parameters and sends an e-mail. 
All of the mail configurations are hard-coded in the stored procedure. 
Comments are added to the stored procedure where necessary.
Reference to the CDOSYS objects are at the following MSDN Web site:
http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cdosys/html/_cdosys_messaging.asp

***********************************************************************/ 
   AS
   Declare @iMsg int
   Declare @hr int
   Declare @source varchar(255)
   Declare @description varchar(500)
   Declare @output varchar(1000)
   Declare @Body Varchar (8000)

--************* Create the CDO.Message Object ************************
   EXEC @hr = sp_OACreate 'CDO.Message', @iMsg OUT

--***************Configuring the Message Object ******************
-- This is to configure a remote SMTP server.
-- http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cdosys/html/_cdosys_schema_configuration_sendusing.asp
   EXEC @hr = sp_OASetProperty @iMsg, 'Configuration.fields("http://schemas.microsoft.com/cdo/configuration/sendusing").Value','2'
-- This is to configure the Server Name or IP address. 
-- Replace MailServerName by the name or IP of your SMTP Server.
   EXEC @hr = sp_OASetProperty @iMsg, 'Configuration.fields("http://schemas.microsoft.com/cdo/configuration/smtpserver").Value', '10.0.1.3' 

-- Save the configurations to the message object.
   EXEC @hr = sp_OAMethod @iMsg, 'Configuration.Fields.Update', null
   Exec @Body = sp_getpaidout1929

-- Set the e-mail parameters.
   EXEC @hr = sp_OASetProperty @iMsg, 'To', @To
   EXEC @hr = sp_OASetProperty @iMsg, 'From', @From
   EXEC @hr = sp_OASetProperty @iMsg, 'Subject', @Subject

-- If you are using HTML e-mail, use 'HTMLBody' instead of 'TextBody'.
   EXEC @hr = sp_OASetProperty @iMsg, 'TextBody', @Body
   EXEC @hr = sp_OAMethod @iMsg, 'Send', NULL

-- Sample error handling.
   IF @hr <>0 
     select @hr
     BEGIN
       EXEC @hr = sp_OAGetErrorInfo NULL, @source OUT, @description OUT
       IF @hr = 0
         BEGIN
           SELECT @output = '  Source: ' + @source
           PRINT  @output
           SELECT @output = '  Description: ' + @description
           PRINT  @output
         END
       ELSE
         BEGIN
           PRINT '  sp_OAGetErrorInfo failed.'
           RETURN
         END
     END

-- Do some error handling after each step if you need to.
-- Clean up the objects created.
   EXEC @hr = sp_OADestroy @iMsg

   PRINT 'Mail Sent!'

GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:18:57.527

你检查过执行存储过程的[语法吗？](http://msdn.microsoft.com/en-us/library/aa258848%28v=sql.80%29.aspx)如果你这样做：

`exec @foo = dbo.SomeProc`

然后`@foo`包含过程的返回状态，在这种情况下为零表示成功。

而且 SQL 2000 确实[内置了 email](http://msdn.microsoft.com/en-us/library/aa260697%28v=sql.80%29.aspx)，因此您可以将存储过程执行字符串作为`@query`参数传递，以避免必须自己将结果集转换为标量值。

您还应该考虑使用 Perl、PowerShell 等语言编写的外部脚本，因为使用纯 TSQL 方法格式化和通过电子邮件发送数据既不简单也不灵活。

# grails - Gradle grails 总是以 > groovy/lang/GroovyObject 失败

> ID：11475644
> 
> 赞同：1
> 
> 时间：2012-07-13T17:46:45.960
> 
> 标签：grails, gradle

# 固定的

大家好，我现在可以正常工作了。原来我错过了 Groovy 插件（感谢 Peter）。请参阅下面的答案。原帖留作参考。

* * *

我们是 grails 的新手，所有的东西都是 gradle 的。我已经尝试过使用 gradle 构建我们的 grails 应用程序的最简单案例，但无论我尝试什么命令（具有讽刺意味的是“createWrapper”除外，它有效但没有帮助）我得到：

```
$ 分级测试
不推荐使用动态属性：http://gradle.org/docs/current/dsl/org.gradle.api.plugins.ExtraPropertiesExtension.html
不推荐使用的动态属性：“根项目'IMPACT'”上的“grailsVersion”，值：“2.0.4”。
：测试

FAILURE：构建失败并出现异常。

* 什么地方出了错：
任务 ':test' 执行失败。
> groovy/lang/GroovyObject

* 尝试：
使用 --stacktrace 选项运行以获取堆栈跟踪。使用 --info 或 --debug 选项运行以获得更多日志输出。

构建失败

总时间：4.867 秒

```

我使用哪个命令没有区别，输出总是相同的。

Gradle build.gradle 文件如下：

```
ext.grailsVersion = '2.0.4'

task createWrapper(type: Wrapper) {
    gradleVersion = '1.0'
}

buildscript {
    repositories {
        maven {
             url 'http://repo.grails.org/grails/core/'
        }
    }

    dependencies {
        classpath 'org.grails:grails-gradle-plugin:1.1.1-SNAPSHOT',
                  "org.grails:grails-bootstrap:2.0.4"
    }
}

apply plugin: 'groovy'
apply plugin: 'grails'

repositories {
    mavenCentral()
    maven { url 'http://repo.grails.org/grails/core/' }
    maven { url 'http://repo.grails.org/grails/plugins/' }
}    

dependencies {
    compile "org.grails:grails:2.0.4",
            "org.grails:grails-core:2.0.4",
            "org.grails:grails-hibernate:2.0.4",
            "org.grails:grails-logging:2.0.4",
            "org.grails:grails-plugin-controllers:2.0.4",
            "org.grails:grails-plugin-services:2.0.4",
            "org.grails:grails-plugin-domain-class:2.0.4",
            "org.grails:grails-plugin-datasource:2.0.4",
            "org.grails:grails-plugin-i18n:2.0.4",
            "org.grails:grails-spring:2.0.4",
            "org.grails.plugins:spring-security-core:1.2.7.3",
            "org.grails.plugins:spring-security-ldap:1.0.6"
} 
```

环境为：JDK 1.7.0_05、groovy 1.8.6、grails 2.0.4、gradle 1.0、Mac Os X 10.7.4。

堆栈跟踪：

```
> $ gradle --stacktrace 测试：测试
>
> FAILURE：构建失败并出现异常。
>
> * 出了什么问题：任务 ':test' 执行失败。
>> groovy/lang/GroovyObject
>
> * 尝试：使用 --info 或 --debug 选项运行以获得更多日志输出。
>
> * 例外情况是：
>
> org.gradle.api.tasks.TaskExecutionException：任务执行失败
>'：测试'。在
> org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:68)
> 在
> org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:46)
> 在
> org.gradle.api.internal.tasks.execution.PostExecutionAnalysisTaskExecuter.execute(PostExecutionAnalysisTaskExecuter.java:34)
> 在
> org.gradle.api.internal.changedetection.CacheLockHandlingTaskExecuter$1.run(CacheLockHandlingTaskExecuter.java:34)
> 在
> org.gradle.cache.internal.DefaultCacheAccess$2.create(DefaultCacheAccess.java:200)
> 在
> org.gradle.cache.internal.DefaultCacheAccess.longRunningOperation(DefaultCacheAccess.java:172)
> 在
> org.gradle.cache.internal.DefaultCacheAccess.longRunningOperation(DefaultCacheAccess.java:198)
> 在
> org.gradle.cache.internal.DefaultPersistentDirectoryStore.longRunningOperation(DefaultPersistentDirectoryStore.java:111)
> 在
> org.gradle.api.internal.changedetection.DefaultTaskArtifactStateCacheAccess.longRunningOperation(DefaultTaskArtifactStateCacheAccess.java:83)
> 在
> org.gradle.api.internal.changedetection.CacheLockHandlingTaskExecuter.execute(CacheLockHandlingTaskExecuter.java:32)
> 在
> org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:55)
> 在
> org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:57)
> 在
> org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute（SkipEmptySourceFilesTaskExecuter.java:41）
> 在
> org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute（SkipTaskWithNoActionsExecuter.java:51）
> 在
> org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:52)
> 在
> org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:42)
> 在
> org.gradle.api.internal.AbstractTask.executeWithoutThrowingTaskFailure(AbstractTask.java:247)
> 在
> org.gradle.execution.DefaultTaskGraphExecuter.executeTask(DefaultTaskGraphExecuter.java:192)
> 在
> org.gradle.execution.DefaultTaskGraphExecuter.doExecute(DefaultTaskGraphExecuter.java:177)
> 在
> org.gradle.execution.DefaultTaskGraphExecuter.execute(DefaultTaskGraphExecuter.java:83)
> 在
> org.gradle.execution.SelectedTaskExecutionAction.execute(SelectedTaskExecutionAction.java:36)
> 在
> org.gradle.execution.DefaultBuildExecuter.execute（DefaultBuildExecuter.java:61）
> 在
> org.gradle.execution.DefaultBuildExecuter.access$200(DefaultBuildExecuter.java:23)
> 在
> org.gradle.execution.DefaultBuildExecuter$2.proceed(DefaultBuildExecuter.java:67)
> 在
> org.gradle.api.internal.changedetection.TaskCacheLockHandlingBuildExecuter$1.run(TaskCacheLockHandlingBuildExecuter.java:31)
> 在
> org.gradle.cache.internal.DefaultCacheAccess$1.create(DefaultCacheAccess.java:111)
> 在
> org.gradle.cache.internal.DefaultCacheAccess.useCache(DefaultCacheAccess.java:126)
> 在
> org.gradle.cache.internal.DefaultCacheAccess.useCache(DefaultCacheAccess.java:109)
> 在
> org.gradle.cache.internal.DefaultPersistentDirectoryStore.useCache(DefaultPersistentDirectoryStore.java:103)
> 在
> org.gradle.api.internal.changedetection.DefaultTaskArtifactStateCacheAccess.useCache(DefaultTaskArtifactStateCacheAccess.java:79)
> 在
> org.gradle.api.internal.changedetection.TaskCacheLockHandlingBuildExecuter.execute(TaskCacheLockHandlingBuildExecuter.java:29)
> 在
> org.gradle.execution.DefaultBuildExecuter.execute（DefaultBuildExecuter.java:61）
> 在
> org.gradle.execution.DefaultBuildExecuter.access$200(DefaultBuildExecuter.java:23)
> 在
> org.gradle.execution.DefaultBuildExecuter$2.proceed(DefaultBuildExecuter.java:67)
> 在
> org.gradle.execution.DryRunBuildExecutionAction.execute(DryRunBuildExecutionAction.java:32)
> 在
> org.gradle.execution.DefaultBuildExecuter.execute（DefaultBuildExecuter.java:61）
> 在
> org.gradle.execution.DefaultBuildExecuter.execute（DefaultBuildExecuter.java:54）
> 在
> org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:155)
> 在
> org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:110)
> 在
> org.gradle.initialization.DefaultGradleLauncher.run(DefaultGradleLauncher.java:78)
> 在
> org.gradle.launcher.cli.RunBuildAction.execute(RunBuildAction.java:42)
> 在
> org.gradle.launcher.cli.RunBuildAction.execute(RunBuildAction.java:28)
> 在
> org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:201)
> 在
> org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:174)
> 在
> org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:170)
> 在
> org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:139)
> 在
> org.gradle.launcher.exec.ExceptionReportingAction.execute(ExceptionReportingAction.java:31)
> 在
> org.gradle.launcher.exec.ExceptionReportingAction.execute(ExceptionReportingAction.java:20)
> 在 org.gradle.launcher.Main.doAction(Main.java:48) 在
> org.gradle.launcher.exec.EntryPoint.run(EntryPoint.java:45) 在
> org.gradle.launcher.Main.main(Main.java:39) 在
> org.gradle.launcher.ProcessBootstrap.runNoExit（ProcessBootstrap.java:50）
> 在 org.gradle.launcher.ProcessBootstrap.run（ProcessBootstrap.java:32）
> 在 org.gradle.launcher.GradleMain.main(GradleMain.java:24) 引起：
> java.lang.NoClassDefFoundError: groovy/lang/GroovyObject at
> org.grails.launcher.RootLoader.oldFindClass(RootLoader.java:143) 在
> org.grails.launcher.RootLoader.loadClass(RootLoader.java:115) 在
> org.grails.launcher.GrailsLauncher.(GrailsLauncher.java:70) 在
> org.grails.gradle.plugin.GrailsTask.createLauncher(GrailsTask.groovy:107)
> 在
> org.grails.gradle.plugin.GrailsTask.executeCommand(GrailsTask.groovy:56)
> 在
> org.gradle.api.internal.BeanDynamicObject$MetaClassAdapter.invokeMethod(BeanDynamicObject.java:196)
> 在
> org.gradle.api.internal.BeanDynamicObject.invokeMethod(BeanDynamicObject.java:102)
> 在
> org.gradle.api.internal.CompositeDynamicObject.invokeMethod(CompositeDynamicObject.java:99)
> 在 org.grails.gradle.plugin.GrailsTask_Decorated.invokeMethod（未知
> 来源）在
> org.gradle.util.ReflectionUtil.invoke(ReflectionUtil.groovy:23) 在
> org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$4.execute(AnnotationProcessingTaskFactory.java:150)
> 在
> org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$4.execute(AnnotationProcessingTaskFactory.java:145)
> 在
> org.gradle.api.internal.AbstractTask$TaskActionWrapper.execute(AbstractTask.java:477)
> 在
> org.gradle.api.internal.AbstractTask$TaskActionWrapper.execute(AbstractTask.java:466)
> 在
> org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:60)
> ... 53 更多原因：java.lang.ClassNotFoundException：
> groovy.lang.GroovyObject 在
> org.grails.launcher.RootLoader.findClass(RootLoader.java:147) 在
> org.grails.launcher.RootLoader.loadClass(RootLoader.java:119) ... 68
> 更多
>
>
> 构建失败
>
> 总时间：5.534 秒

```

非常感谢任何指针或评论。

--debug 输出的片段：

```
09:17:15.191 [ERROR] [org.gradle.BuildExceptionReporter] Caused by: java.lang.NoClassDefFoundError: groovy/lang/GroovyObject
09:17:15.191 [ERROR] [org.gradle.BuildExceptionReporter]    at org.grails.launcher.RootLoader.oldFindClass(RootLoader.java:143)
09:17:15.192 [ERROR] [org.gradle.BuildExceptionReporter]    at org.grails.launcher.RootLoader.loadClass(RootLoader.java:115)
09:17:15.192 [ERROR] [org.gradle.BuildExceptionReporter]    at org.grails.launcher.GrailsLauncher.<init>(GrailsLauncher.java:70)
09:17:15.192 [ERROR] [org.gradle.BuildExceptionReporter]    at org.grails.gradle.plugin.GrailsTask.createLauncher(GrailsTask.groovy:107)
09:17:15.192 [ERROR] [org.gradle.BuildExceptionReporter]    at org.grails.gradle.plugin.GrailsTask.executeCommand(GrailsTask.groovy:56)
09:17:15.192 [ERROR] [org.gradle.BuildExceptionReporter]    at org.gradle.api.internal.BeanDynamicObject$MetaClassAdapter.invokeMethod(BeanDynamicObject.java:196)
09:17:15.193 [ERROR] [org.gradle.BuildExceptionReporter]    at org.gradle.api.internal.BeanDynamicObject.invokeMethod(BeanDynamicObject.java:102)
09:17:15.193 [ERROR] [org.gradle.BuildExceptionReporter]    at org.gradle.api.internal.CompositeDynamicObject.invokeMethod(CompositeDynamicObject.java:99)
09:17:15.193 [ERROR] [org.gradle.BuildExceptionReporter]    at org.grails.gradle.plugin.GrailsTask_Decorated.invokeMethod(Unknown Source)
09:17:15.193 [ERROR] [org.gradle.BuildExceptionReporter]    at org.gradle.util.ReflectionUtil.invoke(ReflectionUtil.groovy:23)
09:17:15.193 [ERROR] [org.gradle.BuildExceptionReporter]    at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$4.execute(AnnotationProcessingTaskFactory.java:150)
09:17:15.193 [ERROR] [org.gradle.BuildExceptionReporter]    at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$4.execute(AnnotationProcessingTaskFactory.java:145)
09:17:15.193 [ERROR] [org.gradle.BuildExceptionReporter]    at org.gradle.api.internal.AbstractTask$TaskActionWrapper.execute(AbstractTask.java:477)
09:17:15.194 [ERROR] [org.gradle.BuildExceptionReporter]    at org.gradle.api.internal.AbstractTask$TaskActionWrapper.execute(AbstractTask.java:466)
09:17:15.194 [ERROR] [org.gradle.BuildExceptionReporter]    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:60)
09:17:15.194 [ERROR] [org.gradle.BuildExceptionReporter]    ... 53 more
09:17:15.194 [ERROR] [org.gradle.BuildExceptionReporter] Caused by: java.lang.ClassNotFoundException: groovy.lang.GroovyObject
09:17:15.194 [ERROR] [org.gradle.BuildExceptionReporter]    at org.grails.launcher.RootLoader.findClass(RootLoader.java:147)
09:17:15.194 [ERROR] [org.gradle.BuildExceptionReporter]    at org.grails.launcher.RootLoader.loadClass(RootLoader.java:119)
09:17:15.194 [ERROR] [org.gradle.BuildExceptionReporter]    ... 68 more
09:17:15.194 [ERROR] [org.gradle.BuildExceptionReporter] 
09:17:15.195 [LIFECYCLE] [org.gradle.BuildResultLogger] 
09:17:15.195 [LIFECYCLE] [org.gradle.BuildResultLogger] BUILD FAILED 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T16:49:59.537

坏消息 - 下面的文件通过让测试运行部分解决了问题，但在将构建打包到 WAR 时失败。我只能假设 grails 或 groovy 部分中缺少依赖项。我在底部有一个更简单的工作版本，它可以在本地用于测试和打包。不幸的是，它仍然不适用于最新的 Jenkins 插件。

感谢 Peter Ledbrook 和 Peter Niederwieser 帮助解决我的问题。

~~更正的 gradle 文件是：~~以下文件允许测试运行（gradle test）但在打包过程中失败并出现相同的错误（gradle war）：

```
ext.grailsVersion = '2.0.4'

task createWrapper(type: Wrapper) {
    gradleVersion = '1.0'
}

apply plugin: 'groovy'

repositories {
    mavenCentral()
}

dependencies {
    groovy group: 'org.codehaus.groovy', name: 'groovy-all', version: '1.8.6'
}

buildscript {
    repositories {
        maven { url {'http://repo.grails.org/grails/core/'} }
    }

    dependencies {
        classpath 'org.grails:grails-gradle-plugin:1.1.1-SNAPSHOT',
                  "org.grails:grails-bootstrap:2.0.4"
    }
}

apply plugin: 'grails'

repositories {
    mavenCentral()
    maven { url 'http://repo.grails.org/grails/core/' }
    maven { url 'http://repo.grails.org/grails/plugins/' }
}

dependencies {
    compile "org.grails:grails:2.0.4",
            "org.grails:grails-core:2.0.4",
            "org.grails:grails-hibernate:2.0.4",
            "org.grails:grails-logging:2.0.4",
            "org.grails:grails-plugin-controllers:2.0.4",
            "org.grails:grails-plugin-services:2.0.4",
            "org.grails:grails-plugin-domain-class:2.0.4",
            "org.grails:grails-plugin-datasource:2.0.4",
            "org.grails:grails-plugin-i18n:2.0.4",
            "org.grails:grails-spring:2.0.4",
            "org.grails.plugins:spring-security-core:1.2.7.3",
            "org.grails.plugins:spring-security-ldap:1.0.6"
} 
```

一个在本地工作的简单文件是：

```
task createWrapper(type: Wrapper) {
    gradleVersion = '1.0'
}

buildscript {
    repositories {
      mavenCentral()
    }
    dependencies {
      classpath 'com.connorgarvey.gradle:gradle-grails-wrapper:1.0'
    }
  }

apply plugin: 'grails'

grails {
    version '2.0.4'
} 
```

可能有更好的方法 - 但我无法解决！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:41:56.907

看起来像 grails-gradle-plugin 的类加载问题。可能插件与您使用的 Grails 或 Gradle 版本不兼容。插件作者可能知道更多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:42:31.237

你实际上需要在你的构建脚本中引导 groovy 的版本......

查看[Gradle / Grails 应用程序](https://stackoverflow.com/questions/12027313/gradle-grails-application/12170741#12170741)以获得更完整的示例。

# java - 单击了 htmlunit 按钮，但服务器响应好像单击了不同的按钮

> ID：11475646
> 
> 赞同：0
> 
> 时间：2012-07-13T17:46:57.937
> 
> 标签：java, htmlunit

（哇，我没有意识到在这里获得帮助有多难。如果有人看到如何更好地提出这个问题，我愿意接受建议）

简单地说，我使用 HtmlUnit 来加载页面、更改字段并 .click() '提交'按钮。但是，如果单击了不同表单上的不同按钮，服务器始终会返回将返回的页面。

显而易见的答案是我一定选择了错误的表单或错误的按钮。然而，在过去的几周里，我使用了许多不同的语义来选择按钮，并进行了许多测试来验证它确实是正确表单上的正确按钮。

我已经使用这个网站几个月来学习各种各样的东西，大家想。但是这个让我难倒了好几个星期。

这是我正在尝试使用的精简网页：

```
<HTML>
...

<FORM ACTION="http://www.awebsite.com/search.asp" METHOD="POST">
...
<INPUT TYPE="SUBMIT" VALUE="Go!">
...
</form>

...

<FORM METHOD="POST" ACTION="inventory.asp?a=sd&blindID=252">
...
<INPUT TYPE="Submit" VALUE="Go!">
...
</form>

...

<FORM ACTION="inventory.asp?pg=1&blindID=252&a=c&viewPrices=" METHOD="post">
...
<INPUT TYPE="Submit" VALUE="Submit Changes" onClick="this.disabled=true;this.form.submit()">
...
</form>

...
</HTML> 
```

以及用于处理它的我的 java 程序片段：

```
// call my own external routine for getting web pages
HtmlPage page = webFetch.fetchWithCookies("http://www.awebsite.com/inventory.asp?blindID="+blindId, validator, filename); // get page with forms on it

// modify an input field
inpPrice = page.getElementByName("newPrice"+item.lotId);
inpPrice.setValueAttribute(item.price.toString());

// submit modified page to server
List<HtmlForm> forms = page.getForms();
HtmlForm form = forms.get(2);
HtmlSubmitInput button = form.getInputByValue("Submit Changes");
HtmlPage page2 = button.click(); // get the server response page

// save the returned page locally so we can look at it
File saveFile = new File("page2.htm");
if (saveFile.exists()) {
    saveFile.delete();
}
page2.save(saveFile); 
```

我想要第三种形式，但我所做的一切都会让我得到第二种形式的回应。我尝试过的事情：

*   我使用 setJavaScriptEnabled(false); 因为当我打开它时，我会遇到大量我无法理解的错误。
*   BrowserVersion.FIREFOX_3_6 '浏览器'常量没有任何区别。
*   我尝试使用 .type('\n'); 在表单中的字段输入之一上。没有不同。
*   尝试 forms.get(3) 只是为了确保我得到了列表中的最后一个表单，以防有我没有看到的隐藏表单。这适当地给了我一个 IndexOutOfBoundsException 错误，表明只选择了 3 个表单。
*   在我的现代 Firefox 浏览器中关闭了 javascript，并尝试执行我尝试使用 HtmlUnit 完成的完全相同的步骤。服务器返回正确的和预期的页面，就像按下了正确的按钮一样。这似乎意味着不需要javascript，因此不是我麻烦的根源？

# c# - Visual Studio C# 发出蜂鸣声但不调试

> ID：11475649
> 
> 赞同：0
> 
> 时间：2012-07-13T17:47:04.073
> 
> 标签：c#, visual-studio-2010

由于某种未知的原因，每当我尝试调试任何 C# 程序时，C# 已经启动了这个东西，只是发出错误哔声并且不会调试。我必须单击停止按钮，它需要大约 15 秒才能停止。此外，我可以通过 Ctrl+F5 跳过调试器来测试程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:51:10.727

确保您在`Debug`模式下尝试它。

![在此处输入图像描述](../Images/40d639b2c5bdc16d8047e5ce1368bb3d.png)

如果仍然无法正常工作，请关闭 Visual Studio，重新打开，重建项目并尝试

# javascript - 如何在 JavaScript 中使用 Telerik RadConfirm

> ID：11475652
> 
> 赞同：4
> 
> 时间：2012-07-13T17:47:32.523
> 
> 标签：javascript, jquery, telerik

如何在 JavaScript 中使用 radconfirm？未定义函数 radalert 或 radconfirm。有人可以给我看看样品吗？

例如，当我调用此函数时，我得到 radalert 未定义：

```
function testWnd() {
                  radalert("Confirm returned the following result: " + arg);
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T08:03:36.097

请按照以下步骤从客户端实现 radalert 功能：

* * *

第 1 步：标记。

* * *

请在您的网页上包含一个 RadWindowManager 实例。如果没有这个 radalert，radconfirm 或 radprompt 将无法工作。这是此功能的支柱。这是代码片段：

```
<telerik:RadWindowManager ID="RadWindowManager1" 
                          runat="server" EnableShadow="true">
</telerik:RadWindowManager> 
```

接下来放置一个普通按钮并处理其 onclick 事件。这是代码片段：

```
<button style="width: 150px;" 
        onclick="radalert('Radalert is called from the client!', 
                          330, 100,
                          'Client RadAlert', 
                          alertCallBackFn, imgUrl); return false;">
        radalert from client</button> 
```

注意名为“alertCallBackFn”的 radlalert 的回调。我们将在下一节中对该函数进行编码。还要注意变量 imgUrl 变量的使用。这定义了要在 radalert 中使用的图像。我们将在下一节中看到它的作用。

* * *

第 2 步：JavaScript

* * *

radalert 需要将图像显示为警报窗口的一部分。按名称“imgUrl”声明一个全局变量，如下所示：

```
//use custom image in the alert box
var imgUrl = "http://www.telerik.com/favicon.ico"; 
//do not show any image in the alert box
imgUrl = ""; 
//uses the default image in the alert box
imgUrl = null; 
```

然后创建 radalert 回调函数，如下所示：

```
 function alertCallBackFn(arg) {
            radalert("<strong>radalert</strong> returned the following result: <h3 style='color: #ff0000;'>" + arg + "</h3>", null, null, "Result");
        } 
```

现在，当您单击 radalert 按钮时，您将看到带有文本的警告框。

希望这是您正在寻找的解决方案。

Lohith (Tech Evangelist, Telerik India)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T20:32:48.777

你看到这个例子了吗[http://demos.telerik.com/aspnet-ajax/window/examples/browserdialogboxes/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/window/examples/browserdialogboxes/defaultcs.aspx)我确信你没有在你的页面中包含一些 TELERIK 组件

# ocean - 我在哪里可以下载海洋sdk

> ID：11475655
> 
> 赞同：0
> 
> 时间：2012-07-13T17:47:38.093
> 
> 标签：ocean

我想看看这片海洋到底是什么，但没有任何尝试/购买的机会，因为我只是个学生。我在哪里可以下载ocean sdk，但不能从ocean off.site 下载？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:51:34.880

他们的网站似乎有一个可供学生使用的 SDK。当我点击链接时，它把我带到了[这个表格](https://www.slb.com/forms/contact/contact_inquiry.aspx?recipientCode=email.product.ocean.getoceannow&service=SO&referringURL=http://www.ocean.slb.com/Pages/contactus.aspx&context=Ocean%20Licensing&serviceSelectable=N&inquiryMode=contactus&SSL=&region=)。看起来您需要填写您的信息并等待他们与您联系。

# php - 忽略 file_get_contents HTTP 包装器中的错误？

> ID：11475657
> 
> 赞同：14
> 
> 时间：2012-07-13T17:47:44.727
> 
> 标签：php, file-get-contents

以下代码用于查询我作为大学项目正在构建的搜索引擎的在线词库，但我遇到了`file_get_contents` *“无法打开流”*错误的问题。当我发送词库无法识别的单词时，它会引发错误。我正在尝试编写一段代码，该代码将*忽略错误*并在没有信息的情况下继续进行。

```
$thesaurus_search="http://words.bighugelabs.com/api/2/0089388bb57f/".$this->formatted_query."/php";
$result_thesaurus=file_get_contents($thesaurus_search); 
```

我试过：

```
if (file_get_contents($thesaurus_search) != NULL)
{ // do stuff } 
```

...但它不起作用，因为它仍然返回某种字符串。

我能做些什么来处理这种情况？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-07-14T00:32:13.543

如果您不想将*HTTP 错误*`file_get_contents`报告为 PHP 警告，那么这是一种**干净**的方法，使用流上下文（有*专门的*东西）：

 ****```
$context = stream_context_create(array(
    'http' => array('ignore_errors' => true),
));

$result = file_get_contents('http://your/url', false, $context); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:12:03.867

如果您可以接受救助，最简单的解决方案是：

```
if (empty($thesaurus_search)) { 
   return;
} else {
   //process with value
} 
```

为了更全面地处理它，查看[API](http://words.bighugelabs.com/api.php)，看起来您应该检查[响应标头](http://www.php.net/manual/en/reserved.variables.httpresponseheader.php)，例如：

```
$thesaurus_search="http://words.bighugelabs.com/api/2/0089388bb57f/".$this->formatted_query."/php";
$result_thesaurus=file_get_contents($thesaurus_search);
if ($http_response_header[0] = 'HTTP/1.1 200 OK') {
    //code to handle words
} else {
    // do something else?
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T18:05:23.840

如果我正确理解您，您正在尝试对`http://words.bighugelabs.com`. 您需要 cURL 来实现这一点，因此如果您安装了 cURL，那么此代码将为您工作。

```
$ch = curl_init();
$thesaurus_search="http://words.bighugelabs.com/api/2/0089388bb57f/".$this->formatted_query."/php";
$options = array();
$options[CURLOPT_URL] = $thesaurus_search;
$options[CURLOPT_RETURNTRANSFER] = true;
curl_setopt_array($ch, $options);

// Print result.
print_r(curl_close($ch)); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-13T18:57:57.253

你可以试试卷曲：

```
function curl_get_contents($url) {
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0)");
    curl_setopt($ch, CURLOPT_MAXREDIRS, 2); 
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $content = curl_exec($ch);
    curl_close($ch);
    return $content;
} 
```****

# regex - 正则表达式删除未标记

> ID：11475660
> 
> 赞同：0
> 
> 时间：2012-07-13T17:47:55.737
> 
> 标签：regex, notepad++

我遇到了一些正则表达式的问题；我需要找到引号之间的所有内容以及要删除的所有内容。现在标记引号很容易，只需简单

```
".*?" 
```

with dot 匹配换行符（匹配换行符）。所以现在我已经标记了我需要的所有内容，我可以简单地删除此搜索未找到的所有内容吗？为什么这么难做到——删除未标记的文本；这个概念本身非常简单。

我在记事本++上使用正则表达式。

接下来，我需要删除前 2 个引号，在此之后取消引用*x*引号并按如下所示的方式格式化。但是到目前为止，我什至在基本概念上都在苦苦挣扎；我需要有人让我重回正轨。

```
"foo" "bar" "..." "..." "..." "baz"    -->    ..., ..., ..., baz 
```

和

```
"foo" "bar" "" "...                    -->    ......, baz
..." "baz" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:02:09.583

Delete everything up to the first quote:

```
Search: \A[^"]+
Replace: (nothing) 
```

Match anything in quotes and any following non-quote characters, replacing with the quoted text:

```
Search: ("[^"]*")[^"]+
Replace: $1 
```

I'm assuming that `\A` matches the start of the text and that `$1` refers to a capture group in Notepad++'s flavour of regex.

# ios - 从另一个类更新 UILabel

> ID：11475664
> 
> 赞同：0
> 
> 时间：2012-07-13T17:48:12.133
> 
> 标签：ios, class, delegates, uilabel, nsnotificationcenter

我一直在寻找可以解决我的问题的东西，但我没有找到任何有用的东西。一些代码： `ClassA.h`

```
#import "ClassB.h"

@interface ClassA : UIViewController
{
   ClassB *clsB;
}

@property (retain, nonatomic) IBOutlet UILabel  *label;
@property (retain, nonatomic) ClassB *clsB; 
```

`ClassA.m`

```
@implamentation ClassA
@synthesize label, clsB;

- (void)viewDidLoad
{
   ...
   clsB = [[ClassB alloc] init];
   label.text = [[NSString stringWithFormat:@"%f", clsB.var];
   ...
} 
```

问题是它`var`正在发生变化（我在使用 NSLog 的 ClassB 实现中检查了这一点），但这些变化不会影响`label.text`.

我也已经尝试过导入`ClassA`，`ClassB`但这也不起作用（导入错误）。我听说过有关通知中心的一些信息，但我以前从未使用过它。

那么，还有其他方法可以做到这一点吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:28:48.557

只需使用代表。在 B 类中，声明一个协议，以便它可以向 A 类发送回调！

```
@protocol ClassBProtocol
-(void)classB:(ClassB*)b valueChanged:(float)value;
@end 
```

还要为 B 类声明一个具有委托的属性：

```
@property (nonatomic, assign) id<ClassBProtocol>delegate; 
```

请记住在您的 .m 中合成该委托

然后在 B 类中，每当值更改时调用该方法：

```
-(void)methodThatChangesValue {
    //here the value will be set
    if( self.delegate != nil ) [self.delegate classB:self valueChanged:value];
} 
```

现在在 A 类中，当您分配/初始化 B 类时，将其委托设置为 A 类。确保 A 类符合 B 类协议：

```
@implementation ClassA () <ClassBProtocol>
@end
...
-(void)viewDidLoad: {
    self.classB = [[ClassB alloc] init];
    self.classB.delegate = self;
} 
```

现在只需实现 B 的委托方法！

```
-(void)classB:(ClassB*)b valueChanged:(float)value {
    self.label.text = [NSString stringWithFormat:@"%f", value];
} 
```

基本上发生的情况是类 A 拥有类 B。现在我们不希望类 B 对类 A 具有强引用，因为我们得到了一个保留周期和内存泄漏。因此，我们声明了一个类 B 的委托，这将允许它对拥有它的类具有弱引用。所以A类在这里成为B类的代表。

正因为如此，每当B内部的值发生变化时，我们就可以调用A类中实现的协议方法，因为它是B类的委托，必须实现委托方法。通过这种机制，您可以来回传递值:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:33:21.553

您可以通过转发声明绕过导入错误`ClassB`：

```
@class ClassB; 
```

在您的`ClassA`界面上方，而不是导入`ClassB.h`，`ClassA.h`而是导入`ClassA.m`

前向声明就足够的原因很简单，编译器在这一点上需要知道的`ClassB`是，事实上，你已经在某个地方定义了一个东西。由链接器找到该定义并将其连接起来。您之所以加入`#import "ClassB.h"`，`ClassA.m`是因为您需要了解`ClassB`的不仅仅是实现中存在的更多信息。在这种情况下，您需要知道`ClassB`有一个名为`var`

# javascript - 在eclipse中销毁javascript验证器

> ID：11475666
> 
> 赞同：2
> 
> 时间：2012-07-13T17:48:19.077
> 
> 标签：javascript, eclipse, validation

是的，正是——摧毁。删除，删除任何日食会永远忘记语法的东西。

我通过立即重新启动 ide 进行了所有可能的设置 - 它拒绝跳过警告和错误消息。最糟糕的是，在垃圾邮件中，我不断丢失重要的邮件。

Builders、Validation、JavaScript 设置文件夹——我到处都关闭了项目设置和一般首选项的所有内容。甚至尝试关闭完整的验证支持。将数百个错误减少到 6 个，再次引用 .js 文件和 1000 个警告。

不能真正冷静下来，想真正认同相关词 eclipse 开发人员。只是不应该这样。我去了相关的线程，解决方案不起作用。

版本 STS 2.9.2

**有没有办法从 JS 支持中删除 IDE？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:28:37.517

打开**关于**对话框，然后单击*安装详细信息*按钮。在那里，您将看到已安装功能的列表。我不知道 STS 是如何打包的，但是如果您看到 JavaScript 功能，您将能够选择它并单击*Uninstall...*按钮。STS 可能会打包一些东西，这样 JavaScript 支持就不会作为一个单独的功能安装，在这种情况下你就不走运了。

# android - Android 日历事件添加/创建组件

> ID：11475668
> 
> 赞同：0
> 
> 时间：2012-07-13T17:48:33.757
> 
> 标签：android, calendar, google-calendar-api, android-contentprovider, android-calendar

全部，

我正在寻找一个组件，即日历中的 Android 事件创建/添加屏幕。该组件如下图所示。它可能是哪个操作系统版本都没有问题。我想实现可以在应用程序中调用此标准 android 事件屏幕的方式。iOS提供这种功能，android也有吗？

提前致谢！

![在此处输入图像描述](../Images/95d979a464c50ca83fdcc8aeeace8ac5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T06:06:46.977

在您的活动 Onclicklistner 中编写以下代码

```
Calendar cal = Calendar.getInstance();              
        Intent intent = new Intent(Intent.ACTION_EDIT);
        intent.setType("vnd.android.cursor.item/event");
        intent.putExtra("beginTime", cal.getTimeInMillis());
        intent.putExtra("allDay", true);
        intent.putExtra("rrule", "FREQ=YEARLY");
        intent.putExtra("endTime", cal.getTimeInMillis()+60*60*1000);
        intent.putExtra("title", "A Test Event from android app");
        startActivity(intent); 
```

# jquery - 如何使用 3 个下拉菜单（日、月、年）使用 jquery 不显眼的验证来验证日期？

> ID：11475670
> 
> 赞同：5
> 
> 时间：2012-07-13T17:48:34.773
> 
> 标签：jquery, asp.net-mvc-3, unobtrusive-validation

我有一个模型要验证，问题是出生日期字段。它必须由 3 个下拉菜单（日、月、年）组成。

```
<div id="dob-editor-field" class="model-field-editor">
      @Html.LabelFor(m => m.DateOfBirth, new { @class = "label-div" })
      @Html.Telerik().DropDownList().Name("DobDay").BindTo((SelectList)ViewData["Days"]).HtmlAttributes(new {id = "DobDaySel"})
      @Html.Telerik().DropDownList().Name("DobMonth").BindTo((SelectList)ViewData["Months"]).HtmlAttributes(new { id = "DobMonthSel"})
      @Html.Telerik().DropDownList().Name("DobYear").BindTo((SelectList)ViewData["Years"]).HtmlAttributes(new { id = "DobYearSel" })
      @Html.ValidationMessageFor(m => m.DateOfBirth)
</div> 
```

在服务器端我这样做

```
 [HttpPost]
        public ActionResult Register(RegistrationModel regInfo, int DobDay, int DobMonth, int DobYear)
        {
            SetRegisterViewData(DobDay, DobMonth, DobYear);
            if (DobDay == 0 || DobMonth == 0 && DobYear == 0)
            {
                ModelState.AddModelError("DateOfBirth", "Date of birth is required");
            }
            else
            {
                DateTime dt = new DateTime(DobYear, DobMonth, DobDay);
                long ticks = DateTime.Now.Ticks - dt.Ticks;
                int years = new DateTime(ticks).Year;
                if (years < 18)
                {
                    ModelState.AddModelError("DateOfBirth", "You must be at least 18");
                }
            }            
            if (ModelState.IsValid)
            {
                //register user
                return RedirectToAction("Index", "Home");
            }
            return View(regInfo);
        } 
```

问题：

1.  服务器端：如何让它变得更好？（我正在考虑添加出生日期、月份和年份属性 RegistrationModel 并在 DateOfBirth 上添加属性以检查这些属性）
2.  客户端：我正在查看[为自定义属性执行客户端验证，](https://stackoverflow.com/questions/4747184/perform-client-side-validation-for-custom-attribute)但它让我感到困惑。制作方法是什么？

LE：我为这样的日期创建了一个自定义模型活页夹：

```
 public class DobModelBinder : DefaultModelBinder
    {
        protected override void BindProperty(ControllerContext controllerContext, ModelBindingContext bindingContext, System.ComponentModel.PropertyDescriptor propertyDescriptor)
        {
            if (propertyDescriptor.Name == "DateOfBirth")
            {
                DateTime dob = DateTime.MinValue;
                var form = controllerContext.HttpContext.Request.Form;
                int day = Convert.ToInt32(form["DobDay"]);
                int month = Convert.ToInt32(form["DobMonth"]);
                int year = Convert.ToInt32(form["DobYear"]);
                if (day == 0 || month == 0 || year == 0)
                {
                    SetProperty(controllerContext, bindingContext, propertyDescriptor, DateTime.MinValue);
                }
                else
                {
                    SetProperty(controllerContext, bindingContext, propertyDescriptor, new DateTime(year, month, day));
                }
            }
            else
            {
                base.BindProperty(controllerContext, bindingContext, propertyDescriptor);
            }
        }
    } 
```

我是这样注册的：

```
ModelBinders.Binders.Add(typeof(DateTime), new DobModelBinder()); 
```

我这样使用它：

```
public ActionResult Register([ModelBinder(typeof(DobModelBinder))]RegistrationModel regInfo) 
```

DateOfBirth 绑定得很好。

乐2：

我为出生日期创建了验证属性，如下所示：

```
 public override bool IsValid(object value)
    {
        DateTime date = Convert.ToDateTime(value);
        return date != DateTime.MinValue;
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        yield return new ModelClientValidationRule
        {
            ErrorMessage = this.ErrorMessage,
            ValidationType = "dateRequired"
        };
    }
}

public class DateGraterThanEighteen : ValidationAttribute, IClientValidatable
{
    public override bool IsValid(object value)
    {
        DateTime date = Convert.ToDateTime(value);
        long ticks = DateTime.Now.Ticks - date.Ticks;
        int years = new DateTime(ticks).Year;
        return years >= 18;
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        yield return new ModelClientValidationRule
        {
            ErrorMessage = this.ErrorMessage,
            ValidationType = "dateGraterThanEighteen"
        };
    }
} 
```

我应用了这样的属性

```
 [DateGraterThanEighteen(ErrorMessage="You must be at least 18")]
        [DateRequired(ErrorMessage = "Date of birth is required")]
        public DateTime DateOfBirth { get; set; } 
```

乐3：

在客户端我这样做：

```
 $(function () {
            jQuery.validator.addMethod('dobRequired', function (value, element, params) {
                if (!/Invalid|NaN/.test(new Date(value))) {
                    return true;
                }
                else {
                    return false;
                }
            }, '');
            jQuery.validator.unobtrusive.adapters.add('dateRequired', {}, function (options) {
                options.rules['dobRequired'] = true;
                options.messages['dobRequired'] = options.message;
            });
        }); 
```

客户端验证似乎不起作用。我该如何解决？我对这些适配器的工作方式有点困惑。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-15T09:56:06.313

您可以使用自定义编辑器模板。

在进入实现细节之前，让我们先看看最终解决方案的外观。

所以我们可以有一个视图模型（一如既往）装饰有一些数据注释属性，指示我们想要附加到它的元数据：

```
public class MyViewModel
{
    [DisplayName("Date of birth:")]
    [TrippleDDLDateTime(ErrorMessage = "Please select a valid DOB")]
    [Required(ErrorMessage = "Please select your DOB")]
    [MinAge(18, ErrorMessage = "You must be at least 18 years old")]
    public DateTime? Dob { get; set; }
} 
```

那么我们可以有一个控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var model = new MyViewModel();
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        if (!ModelState.IsValid)
        {
            return View(model);
        }

        return Content(
            string.Format(
                "Thank you for selecting your DOB: {0:yyyy-MM-dd}", 
                model.Dob
            )
        );
    }
} 
```

一个视图（`~/Views/Home/Index.cshtml`）：

```
@model MyViewModel
@using (Html.BeginForm())
{
    @Html.EditorFor(x => x.Dob)
    <button type="submit">OK</button>
} 
```

以及相应的编辑器模板，它允许我们显示 3 个下拉列表来编辑 DateTime 字段，而不是简单的文本框 ( `~/Views/Shared/EditorTemplates/TrippleDDLDateTime.cshtml`)：

```
@{
    var now = DateTime.Now;
    var years = Enumerable.Range(0, 150).Select(x => new SelectListItem { Value = (now.Year - x).ToString(), Text = (now.Year - x).ToString() });
    var months = Enumerable.Range(1, 12).Select(x => new SelectListItem { Value = x.ToString("00"), Text = x.ToString() });
    var days = Enumerable.Range(1, 31).Select(x => new SelectListItem { Value = x.ToString("00"), Text = x.ToString() });

    var result = ViewData.ModelState[ViewData.TemplateInfo.HtmlFieldPrefix];
    if (result != null)
    { 
        var values = result.Value.RawValue as string[];
        years = new SelectList(years, "Value", "Text", values[0]);
        months = new SelectList(months, "Value", "Text", values[1]);
        days = new SelectList(days, "Value", "Text", values[2]);
        result.Value = null;
    }
}

<div class="trippleddldatetime">
    @Html.Label("")

    @Html.DropDownList("", years, "-- year --")
    @Html.DropDownList("", months, "-- month --")
    @Html.DropDownList("", days, "-- day --")

    @Html.ValidationMessage("")
</div> 
```

现在让我们看看如何`[TrippleDDLDateTime]`实现该属性：

```
public class TrippleDDLDateTimeAttribute : ValidationAttribute, IMetadataAware
{
    public void OnMetadataCreated(ModelMetadata metadata)
    {
        metadata.TemplateHint = "TrippleDDLDateTime";
    }

    public override bool IsValid(object value)
    {
        // It's the custom model binder that is responsible for validating 
        return true;
    }
} 
```

注意属性是如何实现[`IMetadataAware`](http://msdn.microsoft.com/en-us/library/system.web.mvc.imetadataaware.aspx)接口的，它允许我们将视图模型属性与我们编写的自定义编辑器模板相关联（`TrippleDDLDateTime.cshtml`）。

接下来是`[MinAge]`属性：

```
public class MinAgeAttribute : ValidationAttribute
{
    private readonly int _minAge;
    public MinAgeAttribute(int minAge)
    {
        _minAge = minAge;
    }

    public override bool IsValid(object value)
    {
        if (value == null)
        {
            return true;
        }

        DateTime date = Convert.ToDateTime(value);
        long ticks = DateTime.Now.Ticks - date.Ticks;
        int years = new DateTime(ticks).Year;
        return years >= _minAge;
    }
} 
```

难题的最后一块是编写一个自定义模型绑定器，该绑定器将与用属性装饰的`[TrippleDDLDateTime]`属性相关联，以执行解析：

```
public class TrippleDDLDateTimeModelBinder : DefaultModelBinder
{
    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var metadata = bindingContext.ModelMetadata;
        var trippleDdl = metadata.ContainerType.GetProperty(metadata.PropertyName).GetCustomAttributes(typeof(TrippleDDLDateTimeAttribute), true).FirstOrDefault() as TrippleDDLDateTimeAttribute;
        if (trippleDdl == null)
        {
            return base.BindModel(controllerContext, bindingContext);
        }

        var prefix = bindingContext.ModelName;
        var value = bindingContext.ValueProvider.GetValue(prefix);
        var parts = value.RawValue as string[];
        if (parts.All(string.IsNullOrEmpty))
        {
            return null;
        }

        bindingContext.ModelState.SetModelValue(prefix, value);

        var dateStr = string.Format("{0}-{1}-{2}", parts[0], parts[1], parts[2]);
        DateTime date;
        if (DateTime.TryParseExact(dateStr, "yyyy-MM-dd", CultureInfo.InvariantCulture, DateTimeStyles.None, out date))
        {
            return date;
        }

        bindingContext.ModelState.AddModelError(prefix, trippleDdl.ErrorMessage);

        return null;
    }
} 
```

请注意，如果字段未使用自定义属性修饰，则活页夹如何简单地使用默认活页夹。这样它就不会干扰我们不希望三重 ddl 行为的其他 DateTime 字段。模型绑定器将简单地与以下`DateTime?`类型相关联`Application_Start`：

```
ModelBinders.Binders.Add(typeof(DateTime?), new TrippleDDLDateTimeModelBinder()); 
```

好的，到目前为止，我们有一个执行服务器端验证的解决方案。这总是你应该开始的。因为那是您也可以停下来并仍然拥有安全和工作场所的地方。

当然，如果您有时间，您现在可以通过实施客户端验证来改善用户体验。客户端验证不是强制性的，但它可以节省带宽并避免服务器往返。

所以我们首先让我们的 2 个自定义属性实现[`IClientValidatable`](http://msdn.microsoft.com/en-us/library/system.web.mvc.iclientvalidatable.aspx)接口，这是启用不显眼的客户端验证的第一步。

`[TrippleDDLDateTime]`：

```
public class TrippleDDLDateTimeAttribute : ValidationAttribute, IMetadataAware, IClientValidatable
{
    public void OnMetadataCreated(ModelMetadata metadata)
    {
        metadata.TemplateHint = "TrippleDDLDateTime";
    }

    public override bool IsValid(object value)
    {
        // It's the custom model binder that is responsible for validating 
        return true;
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        var rule = new ModelClientValidationRule();
        rule.ErrorMessage = ErrorMessage;
        rule.ValidationType = "trippleddldate";
        yield return rule;
    }
} 
```

`[MinAge]`：

```
public class MinAgeAttribute : ValidationAttribute, IClientValidatable
{
    private readonly int _minAge;
    public MinAgeAttribute(int minAge)
    {
        _minAge = minAge;
    }

    public override bool IsValid(object value)
    {
        if (value == null)
        {
            return true;
        }

        DateTime date = Convert.ToDateTime(value);
        long ticks = DateTime.Now.Ticks - date.Ticks;
        int years = new DateTime(ticks).Year;
        return years >= _minAge;
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        var rule = new ModelClientValidationRule();
        rule.ErrorMessage = ErrorMessage;
        rule.ValidationType = "minage";
        rule.ValidationParameters["min"] = _minAge;
        yield return rule;
    }
} 
```

好的，所以我们已经`GetClientValidationRules`在这两个属性上实现了。剩下的就是编写相应的不显眼的适配器。

当然，这应该在单独的 javascript 文件中完成。例如它可能是`trippleddlAdapters.js`：

```
(function ($) {
    $.fn.getDateFromTrippleDdls = function () {
        var year = this.find('select:nth(0)').val();
        var month = this.find('select:nth(1)').val();
        var day = this.find('select:nth(2)').val();
        if (year == '' || month == '' || day == '') {
            return NaN;
        }

        var y = parseInt(year, 10);
        var m = parseInt(month, 10);
        var d = parseInt(day, 10);

        var date = new Date(y, m - 1, d);
        var isValidDate = date.getFullYear() == y && date.getMonth() + 1 == m && date.getDate() == d;
        if (isValidDate) {
            return date;
        }

        return NaN;
    };

    $.validator.unobtrusive.adapters.add('trippleddldate', [], function (options) {
        options.rules['trippleddldate'] = options.params;
        if (options.message) {
            options.messages['trippleddldate'] = options.message;
        }
    });

    $.validator.addMethod('trippleddldate', function (value, element, params) {
        var parent = $(element).closest('.trippleddldatetime');
        var date = parent.getDateFromTrippleDdls();
        console.log(date);
        return !isNaN(date);
    }, '');

    $.validator.unobtrusive.adapters.add('minage', ['min'], function (options) {
        options.rules['minage'] = options.params;
        if (options.message) {
            options.messages['minage'] = options.message;
        }
    });

    $.validator.addMethod('minage', function (value, element, params) {
        var parent = $(element).closest('.trippleddldatetime');
        var birthDate = parent.getDateFromTrippleDdls();
        if (isNaN(birthDate)) {
            return false;
        }

        var today = new Date();
        var age = today.getFullYear() - birthDate.getFullYear();
        var m = today.getMonth() - birthDate.getMonth();
        if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
            age--;
        }
        return age >= parseInt(params.min, 10);
    }, '');
})(jQuery); 
```

最后，我们在页面中包含 3 个必要的脚本以启用不显眼的客户端验证：

```
<script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/trippleddlAdapters.js")" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T10:11:34.133

我尝试了 Darin Dimitrov 的解决方案，但它有一些小问题。

其中一个问题是与默认的 MVC 4 Javascript 日期验证器发生冲突 - 有时它甚至会针对有效日期启动并让网站用户感到困惑。我发明了一个可以在这里找到的解决方案： [如何删除默认的客户端验证器？](https://stackoverflow.com/questions/12509151/how-to-remove-default-client-side-validators)

第二个问题是该解决方案为所有三个下拉菜单生成相同的 id 属性，这并不好 - 每个 HTML 页面的 id 应该是唯一的。这是我修复它的方法：

```
<div class="trippleddldatetime">
    @Html.DropDownList("", years, "Year:", new { id = @ViewData.TemplateInfo.HtmlFieldPrefix + "_y" })
    @Html.DropDownList("", months, "Month:", new { id = @ViewData.TemplateInfo.HtmlFieldPrefix + "_m" })
    @Html.DropDownList("", days, "Day:", new { id = @ViewData.TemplateInfo.HtmlFieldPrefix + "_d" })
</div> 
```

最后一个问题是，当我尝试从 Controller 中为它们预设一些值时，这些下拉列表引发了异常。这是我修复它的方法：

```
var result = ViewData.ModelState[ViewData.TemplateInfo.HtmlFieldPrefix];
if (result != null && result.Value != null)
{ 
    var values = result.Value.RawValue as string[];
    years = new SelectList(years, "Value", "Text", values[0]);
    months = new SelectList(months, "Value", "Text", values[1]);
    days = new SelectList(days, "Value", "Text", values[2]);
    result.Value = null;
}
else
{
    var currentValue = ViewData.Model;
    if (currentValue != null)
    {
        years = new SelectList(years, "Value", "Text", currentValue.Year);
        months = new SelectList(months, "Value", "Text", currentValue.Month.ToString("00"));
        days = new SelectList(days, "Value", "Text", currentValue.Day.ToString("00"));
    }
} 
```

最后的改进 - 月份名称作为文本：

```
var months = Enumerable.Range(1, 12).Select(x => new SelectListItem { Value = x.ToString("00"), Text = System.Threading.Thread.CurrentThread.CurrentUICulture.DateTimeFormat.GetMonthName(x) }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T15:00:49.607

从一开始我想说的是，我在这里写的东西是在 MVC 4 中测试的。

为了实现基于 3 个下拉列表的自定义日期选择器，我尝试了不同的解决方案。一切都很完美，但正如本文前面有人在回复中提到的那样，有时标准日期验证器也会使用标准消息启动（这件事真的让我发疯）。

为了解决这个问题并且不要永久禁用标准日期验证器，我找到了以下解决方案：

a) 在自定义日期模型属性中使用以下 GetClientValidationRules 版本：

```
public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        ModelClientValidationRule rule = new ModelClientValidationRule();
        rule.ErrorMessage = this.ErrorMessageString;
        rule.ValidationType = "extendeddate";
        rule.ValidationParameters.Add("isrequired", metadata.IsRequired.ToString().ToLower());
        rule.ValidationParameters.Add("disablestandardvalidation", true.ToString().ToLower());

        yield return rule;
    } 
```

注意：最重要的一行是添加的最后一个验证参数 - 稍后将解释原因。现在，请记住，这将转换为名为“data-val-extendeddate-disablestandardvalidation”的 HTML 属性。

b) 在一个外部 js 文件中（不管在哪里 - 只是一个例子，但最好在加载所有外部库之后），编写以下块：

```
$(document).ready(function () {
var currentCulture = $("meta[name='accept-language']").prop("content");

// Set Globalize to the current culture driven by the meta tag (if any)
if (currentCulture) {
    Globalize.culture(currentCulture);
}

$.validator.methods.date = function (value, element) {
    var isDateValidationDisabled = $(element).data("val-extendeddate-disablestandardvalidation");

    if (typeof isDateValidationDisabled != "undefined") {
        return true;
    }

    var val = Globalize.parseDate(value);
    return this.optional(element) || (val);
};

$.validator.methods.number = function (value, element) {
    var val = Globalize.parseFloat(value);
    return this.optional(element) || ($.isNumeric(val));
}; }); 
```

注意：在此代码块中，我还将为我的应用程序的其他可能文化加载 globalize jquery 插件。

最后一个代码块最有趣的部分是，如果我在经过验证的控件上找到该数据属性，我将通过标准验证并返回 true。

底线以及我这样做的原因 - 当您有一个应该作为一个整体进行验证的复杂控件时，标准验证器将无法工作，因为它会尝试从每个修改后的下拉列表中提取日期。我花了 8 小时才意识到为什么标准验证器仍然起作用。

祝你好运！

PS：我希望你能理解我的评论——我仍然对我真的修复它感到兴奋！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-10T03:40:59.467

我想补充一下[Darin Dmitrov 的回答](https://stackoverflow.com/a/11491001/)，当您选择年、月和日时，用于验证年和月的红色边框仍然保持活动状态。我们希望其他两个组件在输入有效日期时也能同步，所以我调整了 JavaScript，如下所示。（两个函数 removeChildValidationErrors 和 addChildValidationErrors 是根据日期验证结果添加和调用的。）

```
(function ($) {
    $.fn.getDateFromTrippleDdls = function () {
        var year = this.find('select:nth(0)').val();
        var month = this.find('select:nth(1)').val();
        var day = this.find('select:nth(2)').val();
        if (year == '' || month == '' || day == '') {
            return NaN;
        }

        var y = parseInt(year, 10);
        var m = parseInt(month, 10);
        var d = parseInt(day, 10);

        var date = new Date(y, m - 1, d);
        var isValidDate = date.getFullYear() == y && date.getMonth() + 1 == m && date.getDate() == d;
        if (isValidDate) {
            return date;
        }

        return NaN;
    };

    $.fn.removeChildValidationErrors = function () {

        var year = this.find('select:nth(0)');
        var month = this.find('select:nth(1)');
        var day = this.find('select:nth(2)');

        $(year).removeClass("input-validation-error");
        $(month).removeClass("input-validation-error");
        $(day).removeClass("input-validation-error");

    };

    $.fn.addChildValidationErrors = function () {

        var year = this.find('select:nth(0)');
        var month = this.find('select:nth(1)');
        var day = this.find('select:nth(2)');

        $(year).addClass("input-validation-error");
        $(month).addClass("input-validation-error");
        $(day).addClass("input-validation-error");

    };

    $.validator.unobtrusive.adapters.add('trippleddldate', [], function (options) {
        options.rules['trippleddldate'] = options.params;
        if (options.message) {
            options.messages['trippleddldate'] = options.message;
        }
    });

    $.validator.addMethod('trippleddldate', function (value, element, params) {
        var parent = $(element).closest('.trippleddldatetime');
        var date = parent.getDateFromTrippleDdls();

        if (!isNaN(date))
        {
          parent.removeChildValidationErrors();
        }
        else
        {
           parent.addChildValidationErrors();
        }

        return !isNaN(date);
    }, '');

})(jQuery);

function removeDefaultDateValidators(selector, validatorToRemove) {
    $('form').each(function () {
        var settings = $(this).validate().settings;
        $(selector, this).each(function () {
            // rules and messages seem to be keyed by element name, not id
            var elmName = $(this).attr('name');
            delete settings.rules[elmName][validatorToRemove];
            delete settings.messages[elmName][validatorToRemove];
        });
    });
}

$(function () {
    removeDefaultDateValidators('select[data-val-trippleddldate]', 'date');
}); 
```

# linux - 仅从另一个 shell 脚本调用一个函数

> ID：11475671
> 
> 赞同：1
> 
> 时间：2012-07-13T17:48:39.447
> 
> 标签：linux, bash, function, shell, inheritance

猫 global_features_script.sh

```
.child1_script.sh
.child2_script.sh

    function svn_credentials
    {
        echo -n "Enter the svn username and press [ENTER]: " > /dev/tty
        read svn_username
        echo -n "Enter the svn commit message and press [ENTER]: "  > /dev/tty
        read svn_message
        echo -n "Enter your svn password and press [ENTER]: "  > /dev/tty
        read -s svn_password
    }
    if [ a == b]
    then
    echo "a is equal to be b"
    else
    echo "a is not equal to b"
    fi

    function exit_error
    {
    echo " There is an error in the command, please check it"
    exit 1
    } 
```

猫 child_script.sh

```
. global_features_script.sh
svn_wc=temp_dir
svn_credentials # calling function from global_features_script.sh
svn commit $svn_wc -m "$svn_message" --username $svn_username --password $svn_password 
```

当我执行：。child_script.sh

预期输出：我只需要从 global_features_script.sh 运行一个函数（svn_credentails）

我得到的输出是：它调用所有其他函数以及 global_features_script.sh 中列出的其他 shell 脚本

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T18:17:39.867

据我了解，`. master_script.sh`只会将主脚本插入到 的执行中`child_script.sh`，因此您实际上将同时运行这两个脚本。在我看来，最简单的事情就是创建一个`common_functions.sh`包含所有常用功能的头文件，然后在主文件或子文件中获取该头文件。

一个快速的语法说明，我建议使用`source master_script.sh`而不是`.`. 它在功能上应该是相同的，但它更简洁，更易读。

# java - Spring 术语中的命令、表单、业务和实体对象之间的区别？

> ID：11475673
> 
> 赞同：7
> 
> 时间：2012-07-13T17:48:46.860
> 
> 标签：java, spring, spring-mvc

我试图围绕松散耦合系统方面的这些对象之间的差异。业务对象是否与实体对象相同？我可以使用 MVC 中的业务或实体对象作为我的命令对象吗？命令对象与表单对象相同吗？只是在 Spring 术语和用法中寻找对对象类型的澄清。

我在 stackoverflow 上发现了一些问题，但没有什么可以解释我喜欢的。

Spring Web MVC 文档似乎说您可以使用您的业务（实体？）对象作为您的命令/表单对象，但这不违背关注点分离吗？

来自 Spring 文档：

> 可复用的业务代码，无需重复。使用现有的业务对象作为命令或表单对象，而不是镜像它们来扩展特定的框架基类。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-15T23:40:42.783

1）从技术上讲，业务对象和业务实体（或您称之为“实体对象”）并不相同。

业务实体包含数据。而业务对象包含有关您的业务实体的逻辑（您如何创建实体，如何更新它等）。业务对象在技术上是一种旧的 J2EE 模式，我还没有在当前代码中真正看到它，所以我无法详细说明。有人会说业务对象对应于 DAO，也有人会说是服务。而有些开发者只是说业务对象和实体是一样的，因为他们认为“对象”和“实体”的粒度相同，或者因为他们的业务实体也包含逻辑，或者只是因为他们不知道。我只是更喜欢谈论包含数据的对象的“（业务）实体”，而我从不使用术语“业务对象”，因为它可以有不同的解释。

2) 根据 Spring MVC 文档，命令对象是一个 JavaBean，它将填充表单中的数据。另一方面，什么是表单对象，而不是支持表单的对象？

所以是的，命令对象在语义上与表单对象相同。我更喜欢术语形式对象，我发现它可以立即理解。

3）正如您所说，根据 Spring MVC 文档，该框架的一个特性是

> 可复用的业务代码，无需重复。**使用现有的业务对象作为命令或表单对象，而不是镜像它们**来扩展特定的框架基类。

所以是的，你可以——而且你应该，根据 Spring——使用业务实体作为你的命令/表单对象。如果您不相信，这里有一些原因：

*   为了简单起见。上帝知道我们的 Java 软件架构需要更简单。一些公司使用太多层来做非常简单的事情。在 Spring、Java（见下文）等的领导下，已经采取了很多措施来应对这种情况。
*   为了你自己，因为它使编程更简单、更容易、更有趣
*   因为 Spring 和 Java（通过 JSR）都这么说。确实：我们对表单对象有什么期望？表单支持和可能的一些验证。我们将如何进行此验证？Spring MVC 3 支持使用 JSR-303 @Valid 注解验证 @Controller 输入。我们将把约束放在哪里来验证？根据 JSR-303，存储这些约束（@NotNull、@Length 等）的最佳位置是业务实体本身。底线：最好使用业务实体作为您的命令/表单对象。
*   关注点分离仍然受到尊重。只是一个问题（表单支持）不再是一个问题！Spring MVC 为您处理它。:-) 您只需要担心您的业务实体。

# google-maps - 在扩展弹出窗口中显示谷歌地图

> ID：11475674
> 
> 赞同：3
> 
> 时间：2012-07-13T17:48:47.240
> 
> 标签：google-maps, google-chrome-extension

我想在扩展弹出窗口中显示（并使用）Google Maps API 地图。我将[https://maps.googleapis.com](https://maps.googleapis.com)和[https://maps.gstatic.com/](https://maps.gstatic.com/)添加到 content_security_policy，但显然 Maps 使用内联 evals (!) 所以这只会引发错误。

我还尝试在我的扩展程序中创建一个地图页面并将其作为 iframe 拉入，但似乎 Maps API 检测到这一点并仅显示图像。

任何提示如何让 Google Maps API 地图显示在弹出窗口中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:23:04.870

我们面临着同样的问题。这是我们发现的。

如果您使用清单版本 2，则无法修复此问题。请参阅在 google maps api 问题上提出的错误：[错误 4201](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4201&can=5&colspec=ID%20Type%20Status%20Introduced%20Fixed%20Summary%20Stars%20ApiType%20Internal)

为了在我们的应用程序中解决这个问题，我们仍然使用清单版本 1，并在内容安全策略字符串的 script-src 中添加“unsafe-eval”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T16:50:50.657

谷歌已经发布了一个沙盒机制来处理“不安全”的 JS。在这里查看：[http ://code.google.com/chrome/extensions/trunk/sandboxingEval.html](http://code.google.com/chrome/extensions/trunk/sandboxingEval.html)

它在 Chrome Beta 中工作，至少在早期的编码中似乎涵盖了我需要的东西。

有点可悲，您需要对 Google 自己的代码进行沙箱处理，但它确实存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T18:20:47.333

即使我面临同样的问题。我的 chrome 扩展主要基于谷歌地图。我有使用自定义标记显示不同类型位置的功能，它将在接下来的几周内发布。现在这是一个主要的障碍......

# ruby-on-rails - 为什么我仍然收到错误“无法批量分配受保护的属性：联系人”

> ID：11475677
> 
> 赞同：0
> 
> 时间：2012-07-13T17:48:59.370
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations, nested-forms

当我尝试通过将邮件字段留空来制作新的女孩记录时，我收到了这个错误。
邮件字段是嵌套的。

当它不输入时，我只想让它只制作女孩记录而不创建联系人记录。
当它充满一些东西时，我希望它同时记录 Girl 和 Contact 。
当它更新时，我希望它做同样的事情。
我怎样才能做到这一点？？？我的代码有什么问题？

我的观点

```
<%= form_for(@girl) do |f| %>
  <% if @girl.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@girl.errors.count, "error") %> prohibited this girl from being saved:</h2>

      <ul>
      <% @girl.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :name_en %><br />
    <%= f.text_field :name_en %>
  </div>
  <div class="field">
    <%= f.label :name_ja %><br />
    <%= f.text_field :name_ja %>
  </div>
  <div class="field">
    <%= f.label :gender_id %><br />
    <%= f.number_field :gender_id %>
  </div>
  <div class="field">
    <%= f.label :job_type_id %><br />
    <%= f.number_field :job_type_id %>
  </div>
  <div class="field">
    <%= f.label :age %><br />
    <%= f.number_field :age %>
  </div>
  <div class="field">
    <%= f.fields_for :contacts do |contact| %>
    <%= f.label :mail %><br />
    <%= contact.text_field :mail %>
    <% end %>
  </div>

  <div class="field">
    <%= f.label :photo %><br />
    <%= f.file_field :photo %>
  </div>

    <div class="field">
      <%= f.label :tag_list, 'tag' %><br />
      <%= f.text_field :tag_list %>
    </div> 

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

我的控制器

```
 def new

    @girl = Girl.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @girl }
    end
  end

  def create

    @girl = Girl.new(params[:girl])

    respond_to do |format|
      if @girl.save
        format.html { redirect_to @girl, notice: 'Girl was successfully created.' }
        format.json { render json: @girl, status: :created, location: @girl }
      else
        format.html { render action: "new" }
        format.json { render json: @girl.errors, status: :unprocessable_entity }
      end
    end
  end

  def update

    @girl = Girl.find(params[:id])

    respond_to do |format|
      if @girl.update_attributes(params[:girl])
        format.html { redirect_to @girl, notice: 'Girl was successfully updated.' }
        format.json { head :ok }
      else
        format.html { render action: "edit" }
        format.json { render json: @girl.errors, status: :unprocessable_entity }
      end
    end
  end 
```

女孩模型

```
class Girl < ActiveRecord::Base
  has_many :users
  has_one :contact
  accepts_nested_attributes_for :contact
  attr_accessible :id, :name_en, :name_ja, :gender_id, :job_type_id, :age, :contact_attributes, :photo, :tag_list

  searchable do 
    text :name_en, :name_ja
    text :contact do 
      contact.mail 
    end 
  end

    has_attached_file :photo,
     :styles => {
       :thumb=> "100x100>",
       :small  => "400x400>" } 

  acts_as_taggable_on :tags
  acts_as_commentable

end 
```

联系方式

```
class Contact < ActiveRecord::Base
  belongs_to :girl, :class_name => "Girl"
  accepts_nested_attributes_for :girl
  attr_accessible :mail

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:52:36.333

这是最新版本的 rails 可能会出现的问题，因为他们已对其进行了修补。您可以在配置中更改它。有关详细信息，请参阅[http://weblog.rubyonrails.org/2012/3/30/ann-rails-3-2-3-has-been-released/](http://weblog.rubyonrails.org/2012/3/30/ann-rails-3-2-3-has-been-released/)。

当您的表单中应该使用单数时，您似乎正在使用复数。

```
 <div class="field">
    <%= f.fields_for :contacts do |contact| %>
    <%= f.label :mail %><br />
    <%= contact.text_field :mail %>
    <% end %>
 </div> 
```

应该：

```
 <div class="field">
    <%= f.fields_for :contact do |contact| %>
    <%= f.label :mail %><br />
    <%= contact.text_field :mail %>
    <% end %>
 </div> 
```

您需要将以下内容添加到控制器以执行新操作：

```
@girl.build_contact 
```

# ruby-on-rails - 如果空白，Rails Select Box 拒绝

> ID：11475681
> 
> 赞同：0
> 
> 时间：2012-07-13T17:49:14.337
> 
> 标签：ruby-on-rails, ruby

我目前有一个嵌套表单，其中有选择框来分配歌曲。

我的模型是通过分配模型具有许多设置列表的歌曲，反之亦然。设置列表接受分配的嵌套属性。

我的表格如下：

```
<div>
  <%=nested_form_for @allocation do|builder|%>
    <%=builder.label :song_id, "Pick a song" %>

     <%= builder.hidden_field :setlist_id, value: @setlist.id %>

     <%= builder.select(:song_id, options_for_select(@selections), 
     {include_blank: true}, html:{multiple: true, size: 7}) %>

    <%=builder.submit "Add Song", class: "btn btn-large btn-primary" %>
  <% end %>
</div> 
```

我想要它，以便在选择空白提示时拒绝创建分配。我试过了：

```
:reject_if => lambda { |a| a[:song_id].blank? } 
```

但这不允许表单提交，因为嵌套属性无效。我认为reject_if 的重点是它会默默地忽略这一点？

# node.js - 没有使用 node.js / Express 设置重定向的标头

> ID：11475682
> 
> 赞同：9
> 
> 时间：2012-07-13T17:49:23.020
> 
> 标签：node.js, header, http-headers, express

我对 node.js、Express 和移动开发相对较新，并且遇到了一个我认为与使用 Express 发送标头有关的问题。

用户从主页'/'开始，未登录，然后单击按钮进入登录页面。当他们向“/validate_signin”提交用户名和密码时，他们应该被重定向回主页，这一次主页显示不同，因为他们已登录。

重定向是这样工作的：

```
res.redirect('/'); 
```

这在我的笔记本电脑上运行良好，但在我的手机上，它在旧状态下重定向到“/”，大概是因为缓存。如果我在手机上刷新页面，“/”将按原样显示。

我找到了这篇文章： [如何控制所有浏览器的网页缓存？](https://stackoverflow.com/questions/49547/making-sure-a-web-page-is-not-cached-across-all-browsers)

已尝试以以下两种方式（分别）设置标头，但它们似乎没有发送：

```
res.header("Cache-Control", "no-cache, no-store, must-revalidate");
res.header("Pragma", "no-cache");
res.header("Expires", 0);

res.writeHead(302, {
    "location": "/",
    "Cache-Control" : "no-cache, no-store, must-revalidate",
    "Pragma": "no-cache",
    "Expires": 0
}); 
```

以下是我目前收到的标头：

```
HTTP/1.1 304 Not Modified
X-Powered-By: Express
Date: Fri, 13 Jul 2012 17:35:18 GMT
Cache-Control: public, max-age=0
Last-Modified: Fri, 13 Jul 2012 12:32:12 GMT
Etag: "3223-1342182732000"
Accept-Ranges: bytes
Connection: keep-alive 
```

有任何想法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T03:05:36.653

我会发表评论，但我今天才加入，没有任何声望点。

如果我理解正确，您正在使用 express.static 提供页面（因此它只是一个纯 HTML 页面），但如果用户已登录，您使用 express 的路由器，对吗？

我也猜你把提到的代码设置在主页的路由中。

如果是这种情况，您的问题不是浏览器缓存，而是由于`connect`中间件的性质而发生的。

中间件在链中执行，完成后调用下一个，这意味着，如果我假设正确，express.static 在您的路由器之前被调用，它只是为静态 HTML 页面提供服务。

所以你的路由永远不会被执行，因为 express.static 不会调用`next()`（由于一个明显的原因，文件存在）。

希望我猜对了。

* * *

**编辑：**

看来我猜错了。您确实说过它在您的笔记本电脑上运行良好，因此它看起来肯定是客户端缓存问题。

我仍然不确定您如何使用 express.static() 显示不同的主页，或者您将上面提到的代码放在哪里，我将在没有看到您的代码的情况下试一试，但我可能需要它并且别人是为了帮助你。

这些响应头应该在第一个响应中设置（当您访问主页时），它与重定向无关。现在让我们把重定向部分放在一边。

我写了一个快速（快速）的例子：

```
var express = require('express'),
    http = require('http')
    app = express();

app.configure(function() {
  app.set('port', process.env.PORT || 3000);
  app.use(express.logger('dev'));

  /*
  * Here's where I set the headers, make sure it's above `express.static()`.
  * 
  * Note: You can safely ignore the rest of the code, (it's pretty much "stock").
  */
  app.use(function noCachePlease(req, res, next) {
    if (req.url === '/') {
      res.header("Cache-Control", "no-cache, no-store, must-revalidate");
      res.header("Pragma", "no-cache");
      res.header("Expires", 0);
    }

    next();
  });

  app.use(express.static(__dirname + '/public'));
});

app.configure('development', function() {
  app.use(express.errorHandler());
});

http.createServer(app).listen(app.get('port'), function() {
  console.log("Express server listening on port " + app.get('port'));
}); 
```

此代码指示我的浏览器不要缓存该页面。

**我在没有**`noCachePlease`中间件的情况下得到的响应标头：

```
Accept-Ranges   bytes
Cache-Control   public, max-age=0
Connection  keep-alive
Content-Length  5
Content-Type    text/html; charset=UTF-8
Date    Fri, 20 Jul 2012 19:25:38 GMT
Etag    "5-1342811956000"
Last-Modified   Fri, 20 Jul 2012 19:19:16 GMT
X-Powered-By    Express 
```

**我通过**`noCachePlease`中间件获得的响应标头：

```
Accept-Ranges   bytes
Cache-Control   no-cache, no-store, must-revalidate
Connection  keep-alive
Content-Length  5
Content-Type    text/html; charset=UTF-8
Date    Fri, 20 Jul 2012 19:26:08 GMT
Etag    "5-1342811956000"
Expires 0
Last-Modified   Fri, 20 Jul 2012 19:19:16 GMT
Pragma  no-cache
X-Powered-By    Express 
```

如您所见，它可以工作，但您可以自己运行此代码。

如果要运行它，则需要在全局`express`下安装或安装（带有标志）。`node_modules``-g`

# c# - 如何使 ModelBinder 为参数返回 null？

> ID：11475684
> 
> 赞同：4
> 
> 时间：2012-07-13T17:49:30.690
> 
> 标签：c#, asp.net-mvc, model-binding, modelbinders

我有一个 POCO，我将其用作 MVC3 中某个操作的参数。像这样的东西：

## 我的风格

```
public class SearchData
{
    public string Property1 { get; set; }
    public string Property2 { get; set; }
    public string Property3 { get; set; }
} 
```

## 我的行动

```
public ActionResult Index(SearchData query)
{
    // I'd like to be able to do this
    if (query == null)
    {
        // do something
    }
} 
```

目前，`query`作为 的实例传递，`SearchData`所有属性都为`null`。我希望我得到一个`null`for，`query`这样我就可以进行上面代码中的空值检查。

我总是可以查看`ModelBinder.Any()`或只查看各种键`ModelBinder`以查看它是否具有 的任何属性`query`，但我不想使用反射来循环`query`. 另外，我只能使用`ModelBinder.Any()`检查查询是否是我唯一的参数。一旦我添加其他参数，该功能就会中断。

使用 MVC3 中当前的模型绑定功能，是否可以获得将 POCO 参数返回 null 的行为？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T17:54:47.223

您需要实现一个自定义模型绑定器来执行此操作。你可以只扩展`DefaultModelBinder`.

```
public override object BindModel(
    ControllerContext controllerContext, 
    ModelBindingContext bindingContext)
{
    object model = base.BindModel(controllerContext, bindingCOntext);
    if (/* test for empty properties, or some other state */)
    {
        return null;
    }

    return model;
} 
```

## 具体实施

这是绑定器的实际实现，如果所有属性都为空，将为模型返回空。

```
/// <summary>
/// Model binder that will return null if all of the properties on a bound model come back as null
/// It inherits from DefaultModelBinder because it uses the default model binding functionality.
/// This implementation also needs to specifically have IModelBinder on it too, otherwise it wont get picked up as a Binder
/// </summary>
public class SearchDataModelBinder : DefaultModelBinder, IModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        // use the default model binding functionality to build a model, we'll look at each property below
        object model = base.BindModel(controllerContext, bindingContext);

        // loop through every property for the model in the metadata
        foreach (ModelMetadata property in bindingContext.PropertyMetadata.Values)
        {
            // get the value of this property on the model
            var value = bindingContext.ModelType.GetProperty(property.PropertyName).GetValue(model, null);

            // if any property is not null, then we will want the model that the default model binder created
            if (value != null)
                return model;
        }

        // if we're here then there were either no properties or the properties were all null
        return null;
    }
} 
```

## 将此作为活页夹添加到 global.asax

```
protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();
    ModelBinders.Binders.Add(typeof(SearchData), new SearchDataModelBinder());
    RegisterGlobalFilters(GlobalFilters.Filters);
    RegisterRoutes(RouteTable.Routes);

    MvcHandler.DisableMvcResponseHeader = true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T17:55:31.183

在路线尝试

```
new { controller = "Articles", action = "Index", query = UrlParameter.Optional } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-19T05:46:37.187

将自定义模型绑定器实现为参数的属性。

*注意：模型上的所有属性都必须可以为空*

1.  这是上面的 ModelBinderClass

    ```
    public class NullModelBinder : DefaultModelBinder
    {
        public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
        {
             // use the default model binding functionality to build a model, we'll look at each property below
             object model = base.BindModel(controllerContext, bindingContext);

             // loop through every property for the model in the metadata
             foreach (ModelMetadata property in bindingContext.PropertyMetadata.Values)
             {
                 // get the value of this property on the model
                 var value = bindingContext.ModelType.GetProperty(property.PropertyName).GetValue(model, null);

                 // if any property is not null, then we will want the model that the default model binder created
                 if (value != null) return model;
             }

             // if we're here then there were either no properties or the properties were all null
             return null;
         }
    } 
    ```

2.  创建属性

    ```
    public class NullModelAttribute : CustomModelBinderAttribute
    {
        public override IModelBinder GetBinder()
        {
            return new NullModelBinder();
        }
    } 
    ```

3.  在控制器方法上使用属性

    ```
    public ActionResult Index([NullModel] SearchData query)
    {
        // I'd like to be able to do this
        if (query == null)
        {
            // do something
        }
    } 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T17:54:55.397

我不知道您的具体问题的答案，但我可以想到一个解决方法。为什么不给`SearchData`类添加一个方法呢？

```
public bool IsEmpty(){
  return Property1 == null 
      && Property2 == null 
      && Property3 == null;
} 
```

当然，如果您尝试在不止一种类型上执行此操作，则可能会变得乏味。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-20T11:57:41.290

实现自定义模型绑定器，但使用接口来确定对象是否为空。我更喜欢这种模式有两个原因：

1.  在每个绑定上使用反射可能会非常昂贵
2.  它封装了如何确定一个对象对该对象是否为空的逻辑。

    ```
    public class NullValueModelBinder : DefaultModelBinder, IModelBinder {

      public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext) {

         object model = base.BindModel(controllerContext, bindingContext);

         if (model is INullValueModelBindable && (model as INullValueModelBindable).IsNull()){
             return null;
         }

         return model;
      }
    }

    public interface INullValueModelBindable {
        bool IsNull();
    } 
    ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-22T18:12:58.237

我发现当它找到属性并尝试设置它时，唯一的被调用`SetProperty`。`DefaultModelBinder`

考虑到这一点，这是我的 NullModelBinder。

```
public class NullModelBinder : DefaultModelBinder
{
    public bool PropertyWasSet { get; set; }

    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        object model = base.BindModel(controllerContext, bindingContext);
        if (!PropertyWasSet)
        {
            return null;
        }

        return model;
    }

    protected override void SetProperty(ControllerContext controllerContext, ModelBindingContext bindingContext, System.ComponentModel.PropertyDescriptor propertyDescriptor, object value)
    {
        base.SetProperty(controllerContext, bindingContext, propertyDescriptor, value);
        PropertyWasSet = true;
    }
} 
```

因此，只有当框架在请求中找到该属性并尝试将其设置为模型时，我才会返回由`BindModel`.

**笔记：**

我的方法与先前答案的 NullBinders 不同，因为它只遍历每个属性一次，而在最坏的情况下，其他 NullBinders 会遍历两次。

在这段代码片段中：

```
public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
{
    object model = base.BindModel(controllerContext, bindingContext);

    // loop through every property for the model in the metadata
    //CODE HERE
} 
```

当`base.BindModel`被调用的 .Net 遍历模型上的每个属性时，试图找到它们并将它们设置在正在创建的模型上。

然后 CustomModelBinder 再次遍历每个属性，直到找到请求中存在的属性，在这种情况下返回由 .Net 创建的模型，否则返回 null。

因此，如果没有设置属性，我们将有效地检查模型的每个属性两次。

# string - 列表或向量上相同的头尾操作

> ID：11475685
> 
> 赞同：2
> 
> 时间：2012-07-13T17:49:34.463
> 
> 标签：string, vector, lisp, common-lisp

我在 LISP 和列表处理方面没有经验，但我有一组 C++ STL 向量（或字符串），我需要在这些向量上执行以下操作：

**IdenticalHead (v1, v2)：**返回 v1 和 v2 都以它开头的最大序列。

**IdenticalTail (v1, v2)：**返回 v1 和 v2 都以它结尾的最大序列。

**IdenticalTailHead(v1, v2)：**返回v1以它结尾和v2以它开头的最大序列。

例如：

如果 v1 = (a,b,c,e,f)，v2 = (a,b,d,e,f)，则：

```
IdenticalHead (v1, v2) = (a,b)
IdenticalTail (v1, v2) = (e,f) 
```

如果 v1 = (a,b,c), v2 = (b,c,g)，则：

```
IdenticalTailHead (v1, v2) = (b,c) 
```

我的问题是这些标准操作是 LISP 还是任何其他语言？他们有像 CDR 和 CAR 这样的标准名称吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T18:44:41.293

IdenticalHead 和 IdenticalTail 基本上由 Common Lisp 函数[MISMATCH](http://www.lispworks.com/documentation/HyperSpec/Body/f_mismat.htm#mismatch)提供。

```
CL-USER 81 > (mismatch '(a b c e f) '(a b d e f))
2

CL-USER 82 > (mismatch '(a b c e f) '(a b d e f) :from-end t)
3

CL-USER 83 > (defun identical-head (s1 s2)
               (let ((m (mismatch s1 s2)))
                 (if (numberp m)
                     (subseq s1 0 m)
                   s1)))
IDENTICAL-HEAD

CL-USER 84 > (identical-head '(a b c e f) '(a b d e f))
(A B)

CL-USER 85 > (defun identical-tail (s1 s2)
               (let ((m (mismatch s1 s2)))
                 (if (numberp m)
                   (subseq s1 (1+ m))
                   s1)))
IDENTICAL-TAIL

CL-USER 86 > (identical-tail '(a b c e f) '(a b d e f))
(E F) 
```

第三个功能更复杂：

```
CL-USER 87 > (defun identical-tail-head (s1 s2 &aux (l1 (length s1)))
               (loop for i from 0 below l1
                     for m = (mismatch s2 s1 :start2 i)
                     when (and m (= (+ i m) l1))
                     do (return (subseq s1 i))))

CL-USER 88 > (identical-tail-head '(a e d b c d) '(b c d a f))
(B C D) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:32:57.827

不，这些没有标准运算符。但是`identical-head`不难写：

```
(defun identical-head (l1 l2)
  (and l1 l2 (equal (car l1) (car l2))
       (cons (car l1) (identical-head (cdr l1) (cdr l2))))) 
```

`identical-tail`除了反转输入列表，调用`identical-head`，然后反转结果之外，我不知道更简单的编写方法，因为列表只允许向前遍历，而不是向后遍历。

```
(defun identical-tail (l1 l2)
  (reverse (identical-head (reverse l1) (reverse l2)))) 
```

这是我的写作方式`identical-tail-head`：

```
(defun identical-tail-head (l1 l2)
  (labels ((starts-with-p (list prefix)
             (cond ((null prefix) t)
                   ((null list) nil)
                   ((equal (car list) (car prefix))
                    (starts-with-p (cdr list) (cdr prefix))))))
    (cond ((null l1) nil)
          ((starts-with-p l2 l1) l1)
          (t (identical-tail-head (cdr l1) l2))))) 
```

这不是一种非常有效的方法，因为它是 O(n²)，但是（再次）考虑到列表是仅向前遍历的，我还没有想出更好的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T08:12:24.810

既然你提到“其他语言”，Haskell 是一种 Lispy 语言，它确实有你所问的惯用方法。

```
longestPrefix xs ys = map fst (takeWhile (\(x,y) -> x == y) (zip xs ys)) 
```

`zip`将其两个参数列表的元素配对，并且`takeWhile`是自描述的。

对于第二个变体，您只需`reverse`在参数和结果上使用。第三个涉及更多：

```
longestPrefixEnding xs ys =   -- '(a e d b c d) '(b c d a f)
  head [t  |  t <- tails xs, let p=longestPrefix t ys, p==t] 
```

`tails xs`相当于`iterate tail xs`即列表`[xs, tail xs, tail (tail xs), ...]`；`tail`是 的同义词`cdr`和`head`- 的同义词`car`：

```
Prelude Data.List> longestPrefix "abcef" "abdef"
"ab"
Prelude Data.List> longestPrefixEnding "aedbc" "bcdaf"
"bc"
Prelude Data.List> longestPrefixEnding "aebcabcd" "bcdaf"
"bcd"
Prelude Data.List> longestPrefixEnding "aebcabcdx" "bcdaf"
"" 
```

# entity-framework - 与 WillCascadeOnDelete 的单向关联

> ID：11475690
> 
> 赞同：2
> 
> 时间：2012-07-13T17:50:06.657
> 
> 标签：entity-framework, ef-code-first, cascade

我有一个非常简单的单向类映射。

```
public class MyDbContext : DbContext
{
    public MyDbContext() : base("CodeFirstDatabase")
    {

    }

    public DbSet<Contact> Contacts { get; set; }
    public DbSet<PhoneNumber> Number { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
        modelBuilder.Conventions.Remove<IncludeMetadataConvention>();
        modelBuilder.Entity<Contact>()
            .HasMany(c => c.Numbers)
            .WithOptional()
            //.Map(p => p.MapKey("ContactId"))
            .WillCascadeOnDelete(true);
    }
} 
```

如您所见，Contact 有一个 Numbers 列表，但 Number 对联系人一无所知（它的父级没有属性）。我在这里要做的是实现以下目标：当从联系人中删除号码并使用 SaveChanges 保存时，我希望从数据库中删除该号码行，但是，EF 将外键设置为 null 并且该行仍然存在在数据库中。知道有什么问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T23:13:47.673

这很烦人，但 EF 不提供任何自动删除孤儿的方法。

您必须手动删除`PhoneNumber`实例（即`context.Number.Remove(theNumber)`.

# asp.net - 常量联系人 API - (403) 禁止添加新联系人

> ID：11475697
> 
> 赞同：0
> 
> 时间：2012-07-13T17:50:17.863
> 
> 标签：asp.net, api

我正在尝试使用 Constant Contact API 将新联系人添加到邮件列表。我有一个简单的 asp.net 表单并正在执行以下函数，但我得到“远程服务器返回错误：（403）禁止。” 我的功能直接来自Constant Contact，但请看图！

[持续联系 API](http://community.constantcontact.com/t5/Getting-Started-with-API-s/Last-name/td-p/44749)

```
Public Function AddContact(ByVal UserEmailAddress As String, ByVal ContactListNumber As Integer) As String
    Try
        Dim xml As String
        xml = "<?xml version='1.0' encoding='utf-8' ?>" & _
        "<entry xmlns='http://www.w3.org/2005/Atom'>" & _
            "<title type='text'></title>" & _
            "<updated>2008-07-23T14:21:06.407Z</updated>" & _
            "<author></author>" & _
            "<id>data:,none</id>" & _
            "<summary type='text'>Contact</summary>" & _
            "<content type='application/vnd.ctct+xml'>" & _
                "<Contact xmlns='http://ws.constantcontact.com/ns/1.0/'>" & _
                    "<EmailAddress>" & UserEmailAddress.ToString() & "</EmailAddress>" & _
                    "<OptInSource>ACTION_BY_CONTACT</OptInSource>" & _
                    "<ContactLists>" & _
                        "<ContactList id='http://api.constantcontact.com/ws/customers/[username]/lists/" & ContactListNumber.ToString() & "'/>" & _
                    "</ContactLists>" & _
                "</Contact>" & _
            "</content>" & _
        "</entry>"

        ' Set up the request
        Dim request As HttpWebRequest
        request = WebRequest.Create("https://api.constantcontact.com/ws/customers/[username]/contacts/")
        Dim byteData As Byte() = UTF8Encoding.UTF8.GetBytes(xml.ToString())
        request.Method = "POST"
        request.ContentType = "application/atom+xml"
        request.ContentLength = byteData.Length
        request.Credentials = New NetworkCredential("[api key]%[username]", "[password]")

        ' Send the request
        Dim postStream As Stream
        postStream = request.GetRequestStream()
        postStream.Write(byteData, 0, byteData.Length)

        Dim response As HttpWebResponse
        response = request.GetResponse()

    Catch ex As WebException
        Return ex.ToString
    End Try
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T02:21:38.557

403 error for constant contact表示密码错误，或者密码字符串配置错误。他们指定`[your_api_key]%[your_constantcontact_username]:[password]`他们的身份验证。尽管他们说这已被弃用，但现在每个人都应该迁移到 oauth 2.0（或至少在 2013 年之前）。这样您就不必再传递密码了。

# javascript - 如何打开一个窗口并在该窗口中选择对象？

> ID：11475699
> 
> 赞同：2
> 
> 时间：2012-07-13T17:50:23.363
> 
> 标签：javascript, jquery

我有

```
newWindow=window.open(document.URL);
$('div#header',newWindow.document).hide();
$('div#footer',newWindow.document).hide(); 
```

但这似乎不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:15:57.943

试试这个：

```
newWindow = window.open(document.URL);
$(newWindow).load(function() {
    $('#header', newWindow.document).hide();
    $('#footer', newWindow.document).hide();
}); 
```

# php - 将数组与 array_multiply() 相乘返回一个空数组

> ID：11475701
> 
> 赞同：-2
> 
> 时间：2012-07-13T17:50:27.210
> 
> 标签：php, arrays, multiplication

我正在尝试将两个数组相乘（价格和用户输入的数量。

```
if(isset($_POST['submit']))
{

unset($_POST['submit']);
$r=array(); 
$userqty=array();
$userqty=$_POST;    

    function array_multiply($userqty, $fullbox) {

    if (!is_array($userqty) || !is_array($fullbox)) {
        exit('Needs to be an array.');
    }

    $c1 = count($userqty);
    $c2 = count($fullbox);

    if ($c1 != $c2) {
        exit('$setOne and $setTwo must be the same length.');
    }

    for ($i = 0; $i < $c1; $i++) {
        $r[$i] = $userqty[$i] * $fullbox[$i];
    }

    return $r;

}
var_dump($fullbox);
echo '<br>';
echo '<br>';
var_dump($userqty);
echo '<br>';
echo '<br>';
var_dump($r);
} 
```

当我在最后进行数组转储时，我看到我的值在我的数组中是正确的，除了我的结果数组的值是**array(0) { }** 当它应该具有与我原来的两个相同的数字或条目时。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T17:53:01.153

这里有很多问题！

*   `$r`是一个局部变量。要么使其成为全局（不要），要么只使用返回值。
*   您实际上并没有调用该函数。
*   你不声明`$r`，即使它是为你隐式完成的。

快速修复：

```
var_dump(array_multiply($userqty, $fullbox)); 
```

彻底重写：

```
function array_multiply($a, $b) {
    $len = count($a);

    if($len !== count($b)) {
        throw new LengthException('The two arguments to array_multiply should have the same length.');
    }

    $result = array();

    for($i = 0; $i < $len; $i++) {
        $result[] = $a[$i] * $b[$i];
    }

    return $result;
} 
```

也不要只是传入`$_POST`。那会很麻烦。

# c - 将数据关联到文本文件

> ID：11475713
> 
> 赞同：1
> 
> 时间：2012-07-13T17:51:13.963
> 
> 标签：c, text, text-files, metadata

我需要一个好的方法来完成以下工作：

我有几个文本文件，我需要能够与其他数据相关联

例如

文本文件：

```
Line1
Line2
...
...
Line98 
```

附加数据：

```
Line1    |This is additional data
Line2    |associated with line1 till line2
...
...
Line98 
```

我不想修改文本文件，所以我需要将此信息存储在另一个文件中。请注意，文本文件可能会更改，因此跟踪行数并不是一种安全的方式来做我需要的事情。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:14:54.763

如果您无法更改文本文件，一种解决方案是复制文本文件，并使用附加信息修改副本。当有人修改原始文件时，您可以通过注意到并非原始文件中的所有行在您的副本中都具有与其相关联的信息以及附加信息来检测更改。

但是，真正更好的解决方案是以某种简单的方式更改原始文件，以便轻松找到相关的附加信息。像：

```
Line1 [INFO-1]
Line2 [INFO-2]
...
...
Line98 [INFO-98] 
```

在你的另一个文件中，你会有

```
[INFO-1] Additional info associated with INFO-1 tag that
can continue on the next line if you want
[INFO-2] Additional info for INFO-2
...
[INFO-98] Additional info 
```

现在，当有人更改原始文件时，新行将没有`[INFO-#]`标记，并且使用现有`[INFO-#]`标记更改行不会更改与其关联的附加信息。

# ruby-on-rails - Rails 导入 CSV - 所有值“无”

> ID：11475715
> 
> 赞同：0
> 
> 时间：2012-07-13T17:51:29.827
> 
> 标签：ruby-on-rails, csv, import

我正在学习如何将 csv 导入到 rails 应用程序。但是，当我运行应用程序时，所有值都变成了“nil”。我可以知道下面的代码有什么问题吗？

### 控制器

```
def import_csv
    @list = List.find(params[:list_id])
    @lists = List.all

respond_to do |format|
@csv=params[:file]
@n=0
CSV.parse(@csv).each do | row |
  @user_new = User.new
  @user_new.first_name = row[0]
  @user_new.last_name = row[1]
  @user_new.email = row[2]
  @user_new.address = row[3]
  @user_new.city = row[4]
  @user_new.state = row[5]
  @user_new.zipcode = row[6]
  @user_new.country = row[7]
  @user_new.notes = row[8]
  @user_new.birthday = row[9]
  @user_new.home_number = row[10]
  @user_new.mobile_number = row[11]
  @user_new.list_id = @list.id
  @user_new.save

  @n=@n+1
  GC.start if @n%50==0
  flash[:notice] = "CSV Imported Successfully, with  #{@n} records"                                
end

  format.html { redirect_to lists_url }
  format.json { head :no_content }
end

  end 
```

### 看法

```
<%= form_for(:list, :url => list_import_csv_path(@list), :method => :get, :html => {:multipart => true}) do |f| %>
 <table>
    <tr>
        <td><label for="dump_file">Select a CSV File :</label></td>
        <td ><%= file_field_tag :file %></td>
    </tr>
    <tr>
        <td colspan='2'><%= submit_tag 'Submit' %></td>
    </tr>
</table>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T23:40:00.050

我认为您在将其发送到 url 时遇到问题，请尝试这样的操作。（我的控制器上有一个名为 import 的自定义操作）

```
<%= form_tag @list, :action => 'import', :multipart => true do |f| %>

<label class="control-label" for="fileInput" style="width: 160px">Select file: </label>
<%= file_field_tag 'file', :accept => 'text/html', :size => 60%>

<div class="form-actions">
<%= submit_tag 'SUbmit', :class=>"btn" %>
</div>
<% end %> 
```

尝试遵循本教程，它有一个很好的导入和导出示例。[看看这个](http://www.funonrails.com/2012/01/csv-file-importexport-in-rails-3.html)

# google-app-engine - Unicode解码错误。渲染 blob 图像时

> ID：11475717
> 
> 赞同：0
> 
> 时间：2012-07-13T17:51:36.430
> 
> 标签：google-app-engine, jinja2, blobstore

我正在尝试添加上传图片功能。此类保存新实体：

```
class NewPost(Handler):
    def render_newpost(self, title='' , content='', error = ''):
        self.render("newpost.html", title = title, content = content, error = error)

    def get(self):
        user_cookie = self.request.cookies.get('user')
        if user_cookie:
            user_id = user_cookie.split('|')[0]
            if hash_str(user_id) == user_cookie.split('|')[1]:
                user = Users.get_by_id(int(user_id))
                self.render_newpost()
        else:
            self.redirect('/')

    def post(self):
        title = self.request.get("title")
        content = self.request.get("content")
        image = self.request.get("file")

        if title and content:
            p = Posts(title = title, content = content)
            p.image=db.Blob(image)
            p.put()
            self.redirect("/")
        else:
            error = "Enter both title and text"
            self.render_newpost(title, content, error) 
```

这是我的首页渲染类：

```
class Main(Handler):
    def get(self):
        posts = db.GqlQuery("SELECT * FROM Posts Order by created DESC LIMIT 10")
        user_cookie = self.request.cookies.get('user')
        if user_cookie:
            user_id = user_cookie.split('|')[0]
            if hash_str(user_id) == user_cookie.split('|')[1]:
                user = Users.get_by_id(int(user_id))
                self.render("front.html", posts = posts, user=user)
        else:
            self.response.headers['Content-Type'] = "image/jpeg"
            self.render("front.html", posts = posts) 
```

表格输入数据：

```
 <form method="post" enctype="multipart/form-data">
        <div class="newpost">
            <label>Image:</label>
            <input type="file" name="file"/>
            <div class="label">Title: 
                <input type="text" name="title" value="{{title}}"/>
            </div>
           <hr> 
            <div class="label">Content:
                <textarea name="content">{{content}}</textarea>
            </div>
        </div>
        <input type="submit"/>
        <div class="error">{{error}}</div>
    </form> 
```

这是我的主页模板：（**问题出现在这里！）**

```
 {% for post in posts %}
                {% if post.image %}
                <li><img src="/static/images/{{post.image}}"/>
                {% endif %}
                    <h4><a href="#">{{post.title}}</a></h4>
                    <p class="zoom">{{post.content}}</p>
            {% endfor %} 
```

应用程序成功存储图像，但是当它返回首页尝试渲染图像时，会出现以下错误：

**顶级模板代码中的文件“/home/wanhrust/google_appengine/newsite/templates/front.html”，第 54 行**

*   **{{post.image}} UnicodeDecodeError：“ascii”编解码器无法解码位置 0 的字节 0xff：序数不在范围内（128）**

    我已经用谷歌搜索了几个小时但没有结果。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T18:30:20.530

问题是您试图将图像嵌入到 html 文档中，这是不可能的。Post.image 存储代表图像的字节。

如果要在 html 中包含图像，则需要添加类似这样的内容

```
{% if post.image_id %}
    <li><img src="/image/{{post.image_id}}" />
{% endif %} 
```

其中 /image/ 是返回图像内容的处理程序（设置适当的内容类型）。

我还建议您使用[Blobstore API](https://developers.google.com/appengine/docs/python/blobstore/overview)。

# oracle10g - 报告从 SQL Server 到 Oracle 的迁移

> ID：11475718
> 
> 赞同：0
> 
> 时间：2012-07-13T17:51:38.377
> 
> 标签：oracle10g

我在 SQL Server 中有一份报告，我正在将其迁移到 Oracle。

1.  我在 SQL Server 中使用的方法是将给定月份的人加载到临时表（哈希表）中，并使用该表与其他事务表连接以显示详细信息，但是当涉及到 oracle 时，我不确定是否我可以在这里使用相同的方法，因为哈希表（SQL 服务器中的临时表）是特定于会话的，并且可能不会对输出产生任何问题，请告知 oracle 中是否有类似的东西。

2.  我开始知道 oracle 中有全局临时表，它们是否以我上面提到的方式工作，也

3.  如果用户没有创建/删除表权限，他们还能使用全局临时表吗？

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T21:53:15.187

您必须展示一些代码或至少一些关于您的流程如何运行的伪代码，以便任何人帮助您。话说回来...

1.  与其他数据库中的临时表相比，oracle 中的一个不同之处是您不会在每次需要它们时都创建它们。您创建它们一次，表中的数据会一直存在，直到您提交/回滚（基于事务）或直到您结束会话（基于会话的全局临时表）。此外，临时表中的数据仅对将数据插入表中的会话可见。

2.  如果您只生成一次输出文件并且以后不需要该数据，那么全局临时表可能会完全适合，只需进行一些小的更改。

3.  由于您不会在每次使用临时表时创建它们，因此您不需要创建/删除权限。您所需要的只是插入/读取权限。只是阅读将无济于事，因为无论如何您都无法读取另一个会话的数据，因此没有用。

# android - Android上旋转位图的碰撞检测

> ID：11475719
> 
> 赞同：1
> 
> 时间：2012-07-13T17:51:40.640
> 
> 标签：android, detection, pixel-perfect

我的 Android 游戏需要像素完美的碰撞检测。我编写了一些代码来检测与“正常”位图（未旋转）的碰撞；工作正常。但是，我不明白旋转位图。不幸的是，Java 没有旋转矩形的类，所以我自己实现了一个。它保存四个角相对于屏幕的位置，并描述其位图的确切位置/图层；称为“项目表面”。我解决检测的计划是：

1.  检测不同 itemSurfaces 的交集
2.  计算重叠面积
3.  相对于其上级 itemSurface/bitmap 设置这些区域
4.  将每个单个像素与另一个位图的相应像素进行比较

嗯，第一个和第二个都有问题。有人有想法或有一些代码吗？也许 Java/Android 库中已经有代码，但我只是没有找到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:17:27.520

我了解您希望在矩形之间进行碰撞检测（以不同方式旋转）。您不需要计算重叠区域。此外，比较每个像素是无效的。

实现一个`static boolean isCollision`函数，它会告诉你一个矩形和另一个矩形之间是否存在碰撞。在你应该拿一张纸做一些几何来找出确切的公式之前。出于性能原因，不要在某些 Rectangle 类中包装矩形，只需使用基本类型，如双精度等。

然后（伪代码）：

```
for (every rectangle a)
  for (every rectangle b)
    if (a != b && isCollision(a, b))
      bounce(a, b) 
```

这是 O(n^2)，其中 n 是矩形的数量。如果您需要更高的性能，有更好的算法。`bounce`函数改变移动矩形的向量，从而模拟碰撞。如果物体的重量相同（你可以用矩形的大小来近似重量），你只需要交换两个速度向量。

要正确反弹元素，您可能需要存储辅助表`boolean alreadyBounced[][]`以确定哪些矩形在反弹（碰撞）后不需要更改其向量，因为它们已经被反弹了。

还有一个提示：

如果你在 Android 下制作游戏，你必须注意在游戏过程中不要分配内存，因为它会更快地调用 GC，这会花费很长时间并减慢你的游戏速度。我建议您观看[此](http://www.youtube.com/watch?v=U4Bk5rmIpic)视频和相关视频。祝你好运。

# mysql - 查找存储在特定列中的文本大小

> ID：11475721
> 
> 赞同：6
> 
> 时间：2012-07-13T17:51:47.480
> 
> 标签：mysql, sql, database, size

我想知道我们如何找到存储在特定列中的文本大小。例如：如果相同的文本将存储在 .txt 文件中，那么我们可以看到它的大小为 5kb 或 10kb 或其他大小。我的列数据类型是`longtext`.

他们有任何 sql 查询吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T17:58:19.803

如果它不是多字节字符集，为什么不直接使用 LENGTH() 函数呢？

```
create table t
( a longtext );
insert into t (a) values ('abcdef');

select length(a) from t; 
```

如果有多字节字符，那应该会为您提供字符数或字节数。

如注释中所述，使用 CHAR_LENGTH() 表示多字节字符集中字符串的字符长度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T18:24:41.020

有一个函数可以返回*字符*数，而不考虑字节数：

[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_char-length](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_char-length)

所以，`SELECT MAX(CHAR_LENGTH(MyField)) FROM MyTable`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T20:37:22.283

```
select length('this is a long text') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-07T09:16:31.883

我想这是多字节字符集的最佳选择，

```
select CHAR_LENGTH ('abc æøå'); 
```

会给你7。

或者

```
select CHAR_LENGTH ('漢語'); 
```

会给你2。

# android - 如何管理两个按钮之间的列表视图

> ID：11475724
> 
> 赞同：-1
> 
> 时间：2012-07-13T17:52:04.790
> 
> 标签：android

我有一个按钮，列表视图和另一个按钮。最初列表视图的属性消失了，所以按钮 2 显示在按钮 1 的下方，当我单击按钮 1 时，按钮 2 应该设置在该屏幕的底部，并且列表应该在两个按钮之间可见.. ...

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <RelativeLayout android:layout_width="fill_parent"
        android:id="@+id/relativeLayout1" android:layout_height="wrap_content">
        <Button android:layout_width="fill_parent" android:id="@+id/Button01"
            android:background="#ffffff" android:text="Button"
            android:layout_height="40dp"></Button>
        <ListView android:layout_height="fill_parent"
            android:layout_width="fill_parent" android:id="@+id/llList"></ListView>
        <Button android:layout_height="40dp" android:text="Button"
            android:id="@+id/button" android:background="#ffffff"
            android:layout_width="fill_parent"></Button>
    </RelativeLayout>
</LinearLayout> 
```

**活动**

```
 package com.app.app.hello;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.view.View.OnClickListener;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.ListView;

public class HelloActivity extends Activity {

    ListView llList;
    Button btn2,btn1;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        llList=(ListView) findViewById(R.id.llList);

        llList.setVisibility(View.GONE);

        myAdapter adapter=new myAdapter();

        llList.setAdapter(adapter);

         btn2=(Button) findViewById(R.id.button);

        Button btn1=(Button) findViewById(R.id.Button01);

        btn1.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                llList.setVisibility(View.VISIBLE);
            }
        });
    }

    class myAdapter extends BaseAdapter
    {

        public int getCount() {
            // TODO Auto-generated method stub
            return 5;
        }

        public Object getItem(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {

            View row=View.inflate(HelloActivity.this,R.layout.list_row, null);
            // TODO Auto-generated method stub
            return row;
        }

    }
} 
```

![在此处输入图像描述](../Images/3f9ec7ba871603084e2187f813da75e6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:48:40.733

Use this Activity code:

```
public class AbcActivity extends Activity {
    Button btn1, btn2;
    ListView lv1;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.two);

        btn1 = (Button) findViewById(R.id.Button01);
        btn2 = (Button) findViewById(R.id.button);
        lv1  = (ListView) findViewById(R.id.llList);

        btn1.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                lv1.setVisibility(View.VISIBLE);

                RelativeLayout.LayoutParams head1Params = new RelativeLayout.LayoutParams(
                        LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
                head1Params.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
                btn2.setLayoutParams(head1Params);
            }
        });

    }
} 
```

and Use Following XML:

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <Button
        android:layout_alignParentTop="true"
        android:id="@+id/Button01"
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:background="#ffffff"
        android:text="Button1" >
    </Button>

    <ListView
        android:id="@+id/llList"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_below="@+id/Button01" >
    </ListView>

    <Button
        android:layout_below="@+id/llList"
        android:id="@+id/button"
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:background="#123456"
        android:text="Button2" >
    </Button>

</RelativeLayout> 
```

# mongodb - 自动将 Mongodb ObjectId 映射到字符串和从字符串映射

> ID：11475728
> 
> 赞同：7
> 
> 时间：2012-07-13T17:52:18.873
> 
> 标签：mongodb, clojure, monger

我正在使用 Monger 库从 Clojure 访问 Mongo 数据库。让我烦恼的一件事是在 ObjectId 实例和字符串之间来回切换。

例如，此代码`(mc/find-maps "posts" {})`将评估为将`_id`条目值设置为`ObjectId`类实例的映射，而在我的应用程序中，我发现将它简单地作为我知道它是唯一的字符串更有用。

另一方面，对于像这样的表达式：`(mc/find-map-by-id "posts" (new ObjectId id))`我确实使用 String 对象作为`id`参数，我必须使用它来构造`ObjectId`.

有没有办法`_id`自动和透明地在应用程序中的 Strings 和 mongo 端的 ObjectId 之间进行转换的值？某种选项，当启用时，创建带有 id 的字符串表示的映射，反之亦然，当用作查询中的参数时，转换 id 的字符串表示 t 对象 id？

如果没有，还有哪些其他策略可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:57:49.830

我在这一点上与您分享痛苦。取回 ObjectID 很烦人，因为您总是需要来回转换，如果您忘记了，就很难发现错误。

您最好的选择可能是包装驱动程序代码以自动进行转换。因此，将 find、findOne、insert 替换为一个薄包装器，该包装器会查看类型并自动进行转换，无论您是进来还是出去。

不幸的是，我认为没有更简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-29T00:02:10.700

我参加聚会有点晚了，但必须为后代提及。

我不想解决自动 str->ObjectID 部分，因为让代码了解哪些字符串必须被视为 ObjectID 而哪些不能。但是对于 ObjectID->str 的一半，有一个解决方案。

我最终扩展了`monger.conversion/ConvertFromDBObject`这样的协议：

```
(extend-protocol ConvertFromDBObject
    ObjectId
    (from-db-object [input keywordize]
      (str input))) 
```

`from-db-object`在所有读取时都被调用*为映射*操作，因此这解决了读取部分。至于将 ObjectID 转换为插入和更新结果的字符串，我还没有找到任何优雅的解决方案，并为地图扩展了相同的协议，并`from-db-object`在我的包装函数中的插入和更新操作的结果上调用。扩展地图的协议看起来像这样（完全从原始实现中窃取`DBObject`：

```
(extend-protocol ConvertFromDBObject
    ; copied over from the implementation for DBObject
    clojure.lang.IPersistentMap
    (from-db-object [input keywordize]
      (reduce (if keywordize
                (fn [m ^String k]
                  (assoc m (keyword k) (from-db-object (.get input k) true)))
                (fn [m ^String k]
                  (assoc m k (from-db-object (.get input k) false))))
              {} (.keySet input)))) 
```

# javascript - 视频停止或完成播放时的 Google SWFObject javascript 检测

> ID：11475730
> 
> 赞同：2
> 
> 时间：2012-07-13T17:52:19.540
> 
> 标签：javascript, swfobject

大家好，

这是我在 stackoverflow 上的第一篇文章，我以前一直是一个坐下来看看这里发生了什么的人，从来没有贡献过，但现在我终于有机会了..

我的问题是我有一个 swf 文件，我正在使用 SWFObject 在我的 html 页面上播放它，现在我想实现一个 javascript 方法，该方法在视频完全播放或停止时触发..

## 这是我的代码

```
<html><head>
  <title>PENSIONS BOOST</title>

<script type="text/javascript" src="https://aimhighermarketing.s3.amazonaws.com/videocontrollers/swfobject.js"></script>
</head><body>
 <div id="player" align="center">
  <script type="text/javascript">
var so = new SWFObject('https://aimhighermarketing.s3.amazonaws.com/videocontrollers/player.swf','mp1','640','480','10');
so.addParam('allowscriptaccess','always');
so.addParam('allowfullscreen','true');
so.addVariable('frontcolor','FFFFFF');
so.addVariable('lightcolor','FFFFFF');
so.addVariable('screencolor','FFFFFF');
so.addParam('flashvars','&file=HTTP://soci7361@socialnetworkbizbuilder.com/videos/pbsalesvideov2.mp4&&controlbar=none&autostart=true');

so.write('player');</script>
</div>
</body>
</html> 
```

* * *

，任何形式的帮助都非常感谢..请帮助..

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T19:49:53.420

很想帮助你，但不幸的是你错过了非常重要的信息。SWFObject 只是一个将对象标签安全地放置在用户浏览器上的工具。还记得那些必须点击 OBJECT 标签才能激活它的日子吗？好吧，SWFObject 解决了这个问题……等等。

我们需要知道的是您使用的是哪个视频播放器？Flash 实际上是将事件触发到 javascript，这是您要监听的。

其中最受欢迎的通常是 JWPlayer 或 Flowplayer。

如果您可以让我们知道它是哪一个，或者您使用的是哪种 Flash 播放器，我很乐意为您做一些快速研究。

* * *

没关系，我刚刚访问了您的 SWF 文件，发现它是 JW Player 4。

下面是监听事件变化的 JS 代码：

```
var player;
function playerReady(object) {
  player = document.getElementById(object.id);
    player.addModelListener("state","playerStateChanged");
}
function playerStateChanged(obj) {
    if (obj.newstate == 'COMPLETED') {
        // Your video has finished playing
    } else if (obj.oldstate == 'IDLE' AND obj.newstate == 'PLAYING') {
        // Your video started to play. Now, this is not fully accurate. IDLE can also mean they pressed STOP and sat there.
    }
} 
```

实际上，您应该有一个“startedVideo = false;” 并在第一次播放时将其更改为 true。然后你就可以知道它是什么时候开始播放的..

即使 JWPlayer 到了第 5 版，他们仍然有一个完整的在线 JS API 文档： [JWPlayer 4 JavaScript API](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v4/12209/javascript-api-reference)

# c# - 与 OrdinalIgnoreCase 相关的字符串类的 GetHashCode()

> ID：11475737
> 
> 赞同：18
> 
> 时间：2012-07-13T17:52:51.130
> 
> 标签：c#, .net, equality

```
public class Address{
    public string ContactName {get; private set;}
    public string Company {get; private set;}
    //...
    public string Zip {get; private set;}
} 
```

我想实现一个不同地址的概念，所以我覆盖了 Equals() 以测试所有字段中不区分大小写的相等性（因为这些是美国地址，我使用 Ordinal 而不是 InvariantCulture 以获得最佳性能）：

```
public override bool Equals(Object obj){
    if (obj == null || this.GetType() != obj.GetType())
        return false;

    Address o = (Address)obj;

    return  
    (string.Compare(this.ContactName, o.ContactName, StringComparison.OrdinalIgnoreCase) == 0) &&
    (string.Compare(this.Company, o.Company, StringComparison.OrdinalIgnoreCase) == 0)
    // ...
    (string.Compare(this.Zip, o.Zip, StringComparison.OrdinalIgnoreCase) == 0)
} 
```

我想像这样写一个 GetHashCode() （暂时忽略[连接效率低下）：](https://stackoverflow.com/a/957684/1180926)

```
public override int GetHashCode(){
    return (this.contactName + this.address1 + this.zip).ToLowerOrdinal().GetHashCode();
} 
```

但这不存在。我应该改用什么？或者我应该只在我的 Equals() 方法中使用 InvariantCulture 吗？

（我在想`.ToLowerInvariant().GetHashCode()`，但我不能 100% 确定 InvariantCulture 不能确定相同的字符（例如重音）在另一个上下文中具有不同的含义。）

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-03-12T11:32:48.690

无论您在 中使用什么字符串比较方法，在`Equals()`中使用相同的方法都是有意义的`GetHashCode()`。

无需创建临时字符串来计算哈希码。对于`StringComparison.OrdinalIgnoreCase`, 使用`StringComparer.OrdinalIgnoreCase.GetHashCode()`

然后你需要将多个哈希码合并为一个。XOR 应该没问题（因为一个人的邮政编码不太可能是另一个人的联系人姓名）。然而，[纯粹主义者](https://stackoverflow.com/questions/1646807/quick-and-simple-hash-code-combinations)可能不同意。

```
public override int GetHashCode()
{
    return StringComparer.OrdinalIgnoreCase.GetHashCode(ContactName) ^
        StringComparer.OrdinalIgnoreCase.GetHashCode(Company) ^
        // ...
        StringComparer.OrdinalIgnoreCase.GetHashCode(Zip);
} 
```

说了这么多，我会质疑使用像 Address 这样的复合结构作为字典的键是否明智。但该原则适用于身份类型字符串。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-13T18:13:34.200

两个不相等的对象可以具有相同的哈希码。尽管两个相等的对象永远不应该有不同的哈希码。如果您将 InvariantCulture 用于您的哈希码，那么就 Equals 的合同而言，如果它是根据 OrdinalIgnoreCase 实现的，那么它仍然是正确的。

从 StringComparer.OrdinalIgnoreCase 上的文档（强调我的）：

[http://msdn.microsoft.com/en-us/library/system.stringcomparer.ordinalignorecase.aspx](http://msdn.microsoft.com/en-us/library/system.stringcomparer.ordinalignorecase.aspx)

> OrdinalIgnoreCase 属性返回的 StringComparer 将要比较的字符串中的字符视为使用***不变区域性***的约定转换为大写，然后执行与语言无关的简单字节比较。这在比较以编程方式生成的字符串或比较不区分大小写的资源（如路径和文件名）时最合适。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-08-20T15:15:44.513

现在您可以使用[System.HashCode](https://docs.microsoft.com/en-us/dotnet/api/system.hashcode)

```
public class Address
{
    public string ContactName { get; private set; }
    public string Company { get; private set; }
    // ...
    public string Zip { get; private set; }

    public override bool Equals(object obj)
    {
        return
            obj is Address address &&
            string.Equals(ContactName, address.ContactName, StringComparison.OrdinalIgnoreCase) &&
            string.Equals(Company, address.Company, StringComparison.OrdinalIgnoreCase) &&
            // ...
            string.Equals(Zip, address.Zip, StringComparison.OrdinalIgnoreCase);
    }

    public override int GetHashCode()
    {
        var hash = new HashCode();
        hash.Add(ContactName, StringComparer.OrdinalIgnoreCase);
        hash.Add(Company, StringComparer.OrdinalIgnoreCase);
        // ...
        hash.Add(Zip, StringComparer.OrdinalIgnoreCase);
        return hash.ToHashCode();
    }
} 
```

# php - WordPress 将自定义字段保存到数据库

> ID：11475741
> 
> 赞同：0
> 
> 时间：2012-07-13T17:53:03.353
> 
> 标签：php, wordpress

我编写了一个非常简单的插件来向媒体库添加自定义字段，但在数据库 wp_postmeta 表中显示我的 pdf 没有元数据。我应该在 meta_value 列中获取序列化的元数据。我的插件下面不正确吗？该插件实现了添加自定义字段但不保存到数据库。

![在此处输入图像描述](../Images/413d89ffa76e9d9b6b4a520bb5dbdfdf.png)

```
meta_id post_id     meta_value
552   356          a:0:{}
551   356 
```

# 插件代码

```
 <?php
    /*
    Plugin Name: Media Library Fields
    Plugin URI: http://mhmintranet
    Description: The plugin adds additional fields to the media library
    Version: 1.0
    Author: me
    Author URI: Metropolitan State Hospital http://mhmintranet
    License: GPL2
    */
    function GetCustomFormFields($form_fields, $post)
    {
        $form_fields['RevisionDate'] = array(

                'label' => 'Revision Date',
                'input' => 'text',
                'value' => get_post_meta($posdt->ID, '_RevisionDate',true),
                'helps' => 'This is the date the document was revised last'
                );

        $form_fields['ADTitle'] = array(

                'label' => 'AD Title',
                'input' => 'text',
                'value' => get_post_meta($posdt->ID, '_ADTitle',true),
                'helps' => 'Administrative Directive Title'
                );
        $form_fields['AdNumber'] = array(

                'label' => 'AD Number',
                'input' => 'text',
                'value' => get_post_meta($posdt->ID, '_AdNumber',true),
                'helps' => 'Administrative Directive Title'
                );

        return $form_fields;
    }
    add_filter("attachment_fields_to_edit", "GetCustomFormFields", null, 2);  

    function SaveCustomFormFields($post,$attachment)
    {
        if(isset($attachment['RevisionDate']))
        {
            update_post_meta($post['ID'], '_RevisionDate', $attachment['RevisionDate']);  
        }
    if(isset($attachment['ADTitle']))
        {
            update_post_meta($post['ID'], '_ADTitle', $attachment['ADTitle']);  
        }
    if(isset($attachment['AdNumber']))
        {
            update_post_meta($post['ID'], '_AdNumber', $attachment['AdNumber']);  
        }
        return $post;
    }
    add_filter('attachment_fields_to_save','SaveCustomFormFields');

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:15:51.097

我错过了 add_filter('attachment_fields_to_save','SaveCustomFormFields',null,2);

```
 <?php
    /*
    Plugin Name: Media Library Fields
    Plugin URI: http://mhmintranet
    Description: The plugin adds additional fields to the media library
    Version: 1.0
    Author: Jose Velez
    Author URI: Metropolitan State Hospital http://mhmintranet
    License: GPL2
    */

    //Function used 
    /*get_post_meta :http://codex.wordpress.org/Function_Reference/get_post_meta

    attachment_fields_to_edit  and attachment_fields_to_save is a hook located wp-admin/includes/media.php
    To learn more: 
    http://net.tutsplus.com/tutorials/wordpress/creating-custom-fields-for-attachments-in-wordpress/
    http://codex.wordpress.org/Plugin_API/Filter_Reference/attachment_fields_to_save

    Weird Wordpress convention : Fields prefixed with an underscore 
    (_RevisionDate) will not be listed in the drop down of available custom fields on the post/page screen; 
    I only need the custom fields in the media library page
    */
    function GetCustomFormFields($form_fields, $post)
    {
        $form_fields['RevisionDate'] = array(

                'label' => 'Revision Date',
                'input' => 'text',
                'value' => get_post_meta($posdt->ID, '_RevisionDate',true),
                'helps' => 'This is the date the document was revised last'
                );

        $form_fields['ADTitle'] = array(

                'label' => 'AD Title',
                'input' => 'text',
                'value' => get_post_meta($posdt->ID, '_ADTitle',true),
                'helps' => 'Administrative Directive Title'
                );
        $form_fields['AdNumber'] = array(

                'label' => 'AD Number',
                'input' => 'text',
                'value' => get_post_meta($posdt->ID, '_AdNumber',true),
                'helps' => 'Administrative Directive Title'
                );

        return $form_fields;
    }
    add_filter("attachment_fields_to_edit", "GetCustomFormFields", null, 2);  

    function SaveCustomFormFields($post,$attachment)
    {
        if(isset($attachment['RevisionDate']))
        {
            update_post_meta($post['ID'], '_RevisionDate', $attachment['RevisionDate']);  
        }
    if(isset($attachment['ADTitle']))
        {
            update_post_meta($post['ID'], '_ADTitle', $attachment['ADTitle']);  
        }
    if(isset($attachment['AdNumber']))
        {
            update_post_meta($post['ID'], '_AdNumber', $attachment['AdNumber']);  
        }
        return $post;
    }
    add_filter('attachment_fields_to_save','SaveCustomFormFields',null,2);

    ?> 
```

# php - 外部数据库连接 - （安全） - MySQL/PHP

> ID：11475743
> 
> 赞同：1
> 
> 时间：2012-07-13T17:53:13.040
> 
> 标签：php, mysql

我正在开发一个将有许多外部用户的在线应用程序。至于现在，我的连接方法是为所有用户托管一个集中式数据库，同时他们从自己的服务器文件进行连接。

**方法：**
*PHP 连接文件（托管在他们的服务器上；文件由我提供）* **>>** *连接到我的 MySQL 数据库*

现在显然我需要提供我的数据库用户和密码信息，但我知道这会影响安全性。

所以就我而言，我将如何在不放弃安全性的情况下为外部用户（不同的服务器）提供数据库访问。

或者，如果有人有更好的方法，我很想听听。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T17:57:17.243

在 php 中创建一个 API，一种具有您定义的接口的 web 服务，并将此 API 托管在您的服务器上。

每个用户（在用户服务器上运行并使用您的 API 的脚本）都需要一个他们需要注册到 Web 服务的个人 API 密钥或访问代码。

看看众所周知的 API，比如谷歌地图或类似的东西。哦，甚至stackoverflow都有[一个](https://api.stackexchange.com/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-13T18:00:38.190

为用户创建一个注册表单，并将他们自己的用户 ID 和密码存储在您网站上的表格中。然后为他们创建一个 PHP 接口来上传他们的文件。这样，您只需通过 HTML/PHP 表单验证他们自己的用户 ID 和密码，以允许他们登录，并且您的 MySQL 凭据会安全隐藏。

# python - 循环遍历包含内容和索引的列表

> ID：11475748
> 
> 赞同：109
> 
> 时间：2012-07-13T17:53:51.067
> 
> 标签：python, list, loops

循环遍历 python 列表以获取内容及其索引是很常见*的*。我通常做的事情如下：

```
S = [1,30,20,30,2] # My list
for s, i in zip(S, range(len(S))):
    # Do stuff with the content s and the index i 
```

我觉得这种语法有点难看，尤其是`zip`函数内部的部分。有没有更优雅/Pythonic 的方式来做到这一点？

* * *

## 回答 #1

> 赞同：191
> 
> 时间：2012-07-13T17:56:04.453

使用[`enumerate()`](http://docs.python.org/library/functions.html#enumerate)：

```
>>> S = [1,30,20,30,2]
>>> for index, elem in enumerate(S):
        print(index, elem)

(0, 1)
(1, 30)
(2, 20)
(3, 30)
(4, 2) 
```

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2012-07-13T17:55:34.867

使用`enumerate`内置函数：[http ://docs.python.org/library/functions.html#enumerate](http://docs.python.org/library/functions.html#enumerate)

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-07-13T18:00:12.543

像其他人一样：

```
for i, val in enumerate(data):
    print i, val 
```

但***也***

```
for i, val in enumerate(data, 1):
    print i, val 
```

换句话说，您可以将[enumerate()](http://docs.python.org/library/functions.html#enumerate)生成的索引/计数指定为***起始值***，如果您不希望索引以*默认值 zero*开始，它会派上用场。

 *前几天我正在打印文件中的行并将起始值指定为 1 `enumerate()`，这在向用户显示有关特定行的信息时比 0 更有意义。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-13T17:56:22.593

`enumerate`是你想要的：

```
for i, s in enumerate(S):
    print s, i 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-13T17:56:26.223

```
>>> for i, s in enumerate(S): 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-07-13T17:56:42.410

`enumerate()`使这个更漂亮：

```
for index, value in enumerate(S):
    print index, value 
```

请参阅[此处](http://python.org/dev/peps/pep-0279/)了解更多信息。*

# common-lisp - 在 sbcl 中使用外国图书馆 - uffi 还是 cffi？

> ID：11475750
> 
> 赞同：4
> 
> 时间：2012-07-13T17:53:53.830
> 
> 标签：common-lisp, sbcl

我正在努力使用我刚刚在 sbcl 的 ubuntu 上成功编译的 C++ 库。

我曾尝试使用 .h 文件解析器“ah2cl”，但从文档中不清楚我是否需​​要 UFFI 或 CFFI（有区别吗？）。我尝试使用 'ah2cl' 提供的虚拟测试库和虚拟头文件失败了。我从 sbcl 收到一条关于丢失 CALLBACK 包的消息。但是 sbcl 本身不支持回调吗？

是否有另一个我应该用于此类任务的 .h 文件解析器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T13:23:56.500

您可能想尝试[CFFI 的 groveller](http://common-lisp.net/project/cffi/manual/html_node/The-Groveller.html "CFFI-Grovel")，它解析头文件以生成相应的 CFFI 绑定。顺便说一句，UFFI 现在基本上已经被 CFFI 弃用了一段时间。

# android - Android BroadcastReceiver在指定时未运行

> ID：11475754
> 
> 赞同：0
> 
> 时间：2012-07-13T17:54:09.857
> 
> 标签：android, broadcastreceiver

我是 android 开发的新手，我有一个应用程序，当从菜单/主屏幕中的应用程序图标运行时运行得很好。但是，当我尝试让它在启动完成时运行时，它会崩溃（请记住，如果我回到图标，它仍然可以工作）我想知道这里出了什么问题。请记住，我正在我的个人手机上进行测试，它是 android 2.3，它是 ROOTED。有些我认为这不应该那么难，因为 9/10 大多数 android 应用程序都以这种方式或类似的方式工作。简单地说：我做错了什么？

同时，这是我的广播接收器代码：

```
package path.to.file;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class autoBot extends BroadcastReceiver {
private static final String LOG_TAG = "StartAtBootServiceReceiver";

@Override
public void onReceive(Context context, Intent intent) {
    Log.e(LOG_TAG, "onReceive:");
    if (intent.getAction().equals(Intent.ACTION_BOOT_COMPLETED)) {
        Intent i = new Intent();
        i.setAction("path.to.file.MainActivity");
        context.startActivity(i);
    }
}
} 
```

以及清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
installlocation="internalOnly"
package="path.to.file"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="9"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.CALL_PHONE" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <receiver android:name="autoBot" >
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" >
            </action>

            <category android:name="android.intent.category.HOME" >
            </category>
        </intent-filter>
    </receiver>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:28:47.903

您是否有特定原因向您的意图添加操作？如果您的唯一目标是在启动时启动您的活动，请在您的 BroadcastReceiver 中执行此操作：

```
Intent i = new Intent(context, MainActivity.class);
i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(i); 
```

此外，从接收者标签下的清单中删除这些行，您将不需要它们：

```
<category android:name="android.intent.category.HOME" ></category> 
```

# wpf - 基于数据触发器未激活

> ID：11475762
> 
> 赞同：1
> 
> 时间：2012-07-13T17:54:53.253
> 
> 标签：wpf, xaml, triggers, styles

我为导航菜单创建了基本样式。我想根据特定样式更改某些元素，例如标签内容和图标，同时保持所有导航项的悬停/单击效果标准。

这是我的基本 XAML：

```
<Style x:Key="BaseNavigationStyle">
     <Setter Property="Control.Cursor" Value="Hand"/>
     <Setter Property="Control.Padding" Value="0,6,0,6"/>
     <Setter Property="Control.Background" Value="{StaticResource NavigationItemBackgroundColorBrush}"/>
     <Style.Triggers>
          <DataTrigger Binding="{Binding Path=IsMouseOver, RelativeSource={RelativeSource Self}}" Value="True">
               <DataTrigger.ExitActions>
                    <BeginStoryboard Storyboard="{StaticResource NavigationItemBackgroundNormal}"/>
               </DataTrigger.ExitActions>
               <DataTrigger.EnterActions>
                    <BeginStoryboard Storyboard="{StaticResource NavigationItemBackgroundHover}"/>
               </DataTrigger.EnterActions>
          </DataTrigger>
     </Style.Triggers>       
</Style> 
```

这是我的导航项的 XAML：

```
<Style x:Key="ValidationNavigationStyle" BasedOn="{StaticResource BaseNavigationStyle}">
     <Setter Property="Navigation:NavigationUserControl.Image">
          <Setter.Value>
               <BitmapImage UriSource="Assets/Navigation/validation.png"/>
          </Setter.Value>
     </Setter>
     <Setter Property="Navigation:NavigationUserControl.Label" Value="Validation"/>
</Style> 
```

关于为什么我的所有设置器（光标、填充、背景）都已设置但 MouseOver 触发器不起作用的任何想法？

***旁注：***如果我将触发器剪切/粘贴到 中`ValidationNavigationStyle`，它将按预期工作。我有一种预感，它与 RelativeSource 绑定有关，但我不太清楚它是什么。

# php - 使用会话变量的 PHP 登录脚本

> ID：11475763
> 
> 赞同：-1
> 
> 时间：2012-07-13T17:54:54.907
> 
> 标签：php, login, session-variables

我在 PHP 中创建了一个登录表单，在从数据库中检查了正确的用户名和密码之后，我创建了一个会话变量来存储用户名。

```
 session_start();
  $_SESSION['user']=$user;
  header( "Location: successPage.php" ); 
```

此后，我将用户重定向到新页面。`successPage.php`通过通过`echo`语句显示用户名，这可以完美地工作。但是，当我在其他页面中使用以下代码时，它只显示 PHP 代码而不显示结果

```
<?php

    if(isset($_SESSION['user'])){
    echo "<p>You are logged in as ".$_SESSION['user']."</p>";
    echo "<a href='logout.php'>Click here</a>to logout";}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:57:59.073

您需要`<?php`在文档的开头和文档`?>` 的末尾放置。

但是，`?>`在文件末尾是可选的。

因此，这是有效的：

```
<?php

// my page
// blabla

// variables
$Title = 'boom';

?>

<h1><?php echo $Title; ?></h1>

<?php

// I got that boom boom pow
echo $Title; 
```

此外，您页面的扩展名必须是`.php`. 如果您在 Windows 下，请小心。如果禁用该选项，Windows 将隐藏文件的扩展名。如果您看到一个文件名`page.php`但没有看到其他文件扩展名，恐怕您的文件实际上是`page.php.dotsomething`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T17:58:09.203

$_SESSION['用户']; ?> ` 是输出

摆脱`

# php - “正在加载 [Total] 的记录编号 [##]”进度条

> ID：11475765
> 
> 赞同：4
> 
> 时间：2012-07-13T17:54:56.747
> 
> 标签：php, javascript, ajax, progress

我有一个可能没有解决方案的问题，但希望有人能解决这个问题。

我用 PHP/MySQL 开发了一个网站，它使用 HTML/CSS 来处理工资单。当用户提交过去（2 周）期间的工资单时，它会处理每个员工的工时。对于员工少于 50 人的公司，它可以很快处理它，但对于员工超过 100 人的公司，它可能需要相当长的时间来处理。理想情况下，我想要的不是通用的“加载”栏或估计的“35% 加载”栏，因为每个公司的工资单在员工人数上会有很大差异。

最好的解决方案是，一旦他们提交了支付周期，我就可以从 PHP/MySQL 处理器/DB 传递总记录数，然后在 PHP 处理器处理每个员工时更新该数字，这样用户就会看到“Processing Employee 35 of 134”，例如“35”会随着每条记录的处理而增加和更新。或者，如果不可能，我什至可以使用动态列表，例如：

处理 134 名员工 1
处理 134 名员工 2
处理 134 名员工 3
处理 134 名员工 4
等等......

Ajax 或 Javascript 似乎是实现这一目标的最佳选择，但我还不知道如何使用它们来实现这一目标。任何帮助或见解将不胜感激。如果我也找到任何东西，我会继续寻找并更新这篇文章。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:43:35.220

我的方法是将记录总数和当前记录数存储在会话变量中。然后设置一个php页面，返回“Processing employee $currentRec of $totalRec”的文本/html。

当您从主页提交请求时，在页面上显示一个 div 以显示状态消息。触发 ajax 请求以处理数据并在完成时隐藏 div。处理记录的代码可以在进行过程中更新会话变量。同时触发定期 ajax 请求，获取状态消息并使用响应更新 div 的内容。让这个继续，直到 div 不再可见。在处理数据时，您应该在页面上弹出一条状态消息以显示当前记录编号，并且它会根据您设置更新计时器的方式随时更新。

确切的实现将取决于您是否使用 jQuery、原型、纯 Javascript 等...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:06:04.503

我已经通过在遍历批处理时调用 PHP 中的 flush() 命令来做到这一点，但是您可能会变得棘手并更新隐藏字段并在 setTimeOut 上使用 javascript 函数检查该值并更新进度条。

*   [http://php.net/manual/en/function.flush.php](http://php.net/manual/en/function.flush.php)

和进度条：

*   [http://docs.jquery.com/UI/Progressbar](http://docs.jquery.com/UI/Progressbar)

我会对动态列表做的是：

```
 $count = 0;

 // some db query

 // start output
 echo "<ul>";

 // iterate through records and perform dynamic insert

   $count ++;
   echo "<li>Processed " . $count . " records.</li>";
   flush();

 // end iteration

 // end output
 echo "</ul>"; 
```

如果您只想更新每 % 的记录，那么就像您所说的那样得到一个总数，然后也许在 if 子句中使用一个模运算符。例如，如果您有 50 条记录并且您想每 5 条更新一次， if($count mod 5 == 0) { echo ... flush() }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T19:08:30.193

您必须将 Mike S. 建议的内容和快速 ajax 调用（比如每 500 毫秒）结合起来。您可以对从 PHP 文件写入的文本文件进行 ajax 调用......

例如：

```
<?php
    $count = 0;

mysql_connect('blahblah');
 // start output

$query = mysql_query("SELECT ...");
while($rs = mysql_fetch_assoc($query)) {
    $fh = fopen('filename.txt','w');
    fwrite($fh, $count);
    fclose($fh);
    ++$count
}
?> 
```

然后，您需要每 500 毫秒（或更早）对该 filename.txt 文件进行一次 ajax 调用，并读取该文件的内容以查看您在处理请求方面的进度。您甚至可以执行类似的操作，例如写入 php 文件 [current_count]-[total_count] 的内容（总共 155 条记录中的第 15 条记录为 15-155）并`results.split('-')`在您的 javascript 编码中执行。

# c# - 如何模拟从另一个模拟作为属性返回的接口？

> ID：11475774
> 
> 赞同：2
> 
> 时间：2012-07-13T17:55:48.017
> 
> 标签：c#, mocking, fakeiteasy

我有以下接口：

```
interface IManufacturing
{
    IJobApi JobApi {get;}
}

interface IJobApi
{
    IList<JobSpec> GetSpecs (string wo, string name);
} 
```

我有一个使用 IManufacturing 并调用 GetSpecs() 的类，如下所示：

```
var specs = _manufacturing.JobApi.GetSpecs (wo, name); 
```

我将我的模拟设置为：

```
var jobApi = A.Fake<IJobApi> ();
A.CallTo (() => jobApi.GetSpecs (It.IsAny<string> (), It.IsAny<string> ()))
            .Invokes (() => System.Diagnostics.Trace.WriteLine("GetSpecs called!"))
            .Returns (new List<JobSpec>
                      {
                          new JobSpec("blablabla", "0.125", "something")
                      });

var manufacturing = A.Fake<IManufacturing> ();
A.CallTo (() => manufacturing.JobAPI)
            .Invokes (() => System.Diagnostics.Trace.WriteLine ("JobAPI called!"))
            .Returns (jobApi); 
```

运行测试时，我只在输出中看到“JobAPI called”字符串。因此，GetSpecs() 不会被嘲笑，实际上调用者会抛出，因为它期望一个规范列表，而它收到一个空字符串......

这里的罪魁祸首可能是什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T18:44:18.657

该死！

你会笑的，我有！

原来是以下行

```
A.CallTo (() => jobApi.GetSpecs (It.IsAny<string> (), It.IsAny<string> ())) 
```

FakeItEasy 不正确。它应该写成

```
A.CallTo (() => jobApi.GetSpecs (A<string>.Ignored, A<string>.Ignored)) 
```

所以，你可能想知道为什么它会编译并运行……是的，我也是。;)

It.IsAny 适用于最小起订量 (!)

我有一个使用起订量在班级顶部挥之不去的东西。（我正在从 moq 切换到 fakeiteasy）。

[脸掌]

动图

# string - ? 来自 LUA 的符号

> ID：11475780
> 
> 赞同：2
> 
> 时间：2012-07-13T17:56:08.190
> 
> 标签：string, api, qt, lua

我已经使用以下方法注册了 LUA api 函数：

```
lua_register( luaState, "someFunc", aaa::someFunc); 
```

这个函数必须从 someFunc 的参数中加载一个字符串。

我正在这样做：

```
int aaa::someFunc( lua_State* state ) {
    const char* _arg = ( const char* )lua_tostring( state, -1 );

    // ...

    return 0;
} 
```

它工作正常，直到我将一些我的语言的符号放入 someFunc() 中，例如：ą、ł、ź 等（它是 'a'、'l'、'z' 写的按住 ALT 键）。对于这些符号 qDebug("%s", _arg )* 只给我 "?" 为他们所有人。如何在我的程序中识别这些值？

例如，当我在脚本中使用 sendFunc("Aaś") 时，打印的 _arg 是“Aa?”。

*qDebug 来自 Qt 库，它的工作原理与 printf() 相同，但输出到调试窗口。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:54:48.507

QT 使用 Unicode 字符串。我希望从 Lua 返回的字符串在其他代码页中。您需要将其转换为 Unicode 以与 qDebug 一起使用。

要查看字符串中的真正内容（以十六进制值表示），请在调用 qDebug 之前对代码进行断点。

# android - Android：拖动位图而不使用新的X，Y作为新中心

> ID：11475781
> 
> 赞同：0
> 
> 时间：2012-07-13T17:56:08.687
> 
> 标签：android

在 android 上拖动矩形位图时，我根据大量示例使用此位图绘制位图

```
//short cut code, after getting the new position from event
int x = event.x;
int y = event.y;
canvas.drawRect(bitmap, x - bitmapwidth/2,y-bitmapheight/2,null) 
```

但这有一些问题，如果您有一个宽位图并且您碰巧触摸了位图的左侧部分，则位图会以事件的新触摸坐标为中心。

有没有办法拖动位图并保持相对于拖动点的位置？就像鼠标拖动的行为一样？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:01:59.583

据我了解，您希望在手指触摸时相对于起点拖动位图？

这段代码应该可以解决问题（如果是这样的话）：

```
boolean startCoordinatesDefined;
Integer xStart;
Integer yStart;

if(touchdown) {
if(startCoordinatesDefined == false) {
startCoordinatesDefined = true;
xStart = event.x;
yStart = event.y;
}
canvas.drawRect(bitmap, event.x - xStart - bitmapwidth/2, event.y - yStart - bitmapheight/2, null);
}
else {
startCoordinatesDefined = false;
xStart = null;
yStart = null;
} 
```

# file - WMIC - bat 文件菜单程序

> ID：11475782
> 
> 赞同：0
> 
> 时间：2012-07-13T17:56:10.200
> 
> 标签：file, menu, batch-file, uninstallation, wmic

我正在尝试编写一个批处理文件，该文件将通过选择一个数字来卸载程序。我不知道如何计算操作系统中有多少程序，然后以 MENU 格式为所有程序分配编号。我不想在程序中输入所有字母。

将以下程序复制并粘贴到记事本中并另存为 GUninstall.bat

```
@Echo off
Echo This is a batch file uninstallation program. 
Echo Run as administrator WMIC will not work. 
echo.
Echo The command [wmic product get name] will run.
Echo Looking up all installed programs...
echo. 
wmic product get name

echo 1\. First program
echo 2\. Second program
echo 3\. Third program
echo 4\. Fourth program
echo 5\. Fifth program
echo.
@echo Pick a number: 
echo. 
choice /c:12345 

if "%errorlevel%"=="1" wmic product where name="First program" call uninstall
if "%errorlevel%"=="2" wmic product where name="Second program" call uninstall
if "%errorlevel%"=="3" wmic product where name="Third program" call uninstall
if "%errorlevel%"=="4" wmic product where name="Fourth program" call uninstall
if "%errorlevel%"=="5" wmic product where name="Fifth program" call uninstall

Echo.
Echo.

@echo First method is done. I'll go into the alternate method. 

pause
Echo Get user input - program name?
Echo.
Echo This is an alternate method 
:input
set INPUT=
set /P INPUT=Uninstall which program?: %=%
if "%INPUT%"=="" goto input
echo Your input was: %INPUT%

echo.
echo.
Echo Uninstalling... 

echo The command [wmic product where name="%INPUT%" call uninstall] will run. 

wmic product where name="%INPUT%" call uninstall

@echo If there is "no instance" errors, then the program %INPUT% was uninstalled.

pause 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T22:57:45.537

`FOR`- 循环是大多数问题的答案。

-loop可以`FOR/F`收集所有程序并对其进行计数。

```
set count=0
for /F "delims=" %%A in ('wmic product get name' ) do (
  set /a count+=1
  setlocal EnableDelayedExpansion
  for %%n in (!count!) do (
    endlocal
    set product[%%n]=%%A
    echo %%n. %%A
  )
) 
```

稍后您可以通过数组从*数组中访问它们*

```
SET /p uninstallNr=Uninstall number:
setlocal EnableDelayedExpansion
ECHO !product[%uninstallNr%]! 
```

# c++ - IntelliSense Visual Studio 2010 SP1 unique_ptr : unique_ptr >> T

> ID：11475785
> 
> 赞同：0
> 
> 时间：2012-07-13T17:56:24.273
> 
> 标签：c++, visual-studio-2010, visual-c++, c++11, intellisense

我搜索以查看是否找到解决此问题的方法，但找不到答案。我遇到的问题是在我的代码编译时，我没有得到智能感知

如果我收到一个参数（或声明一个变量），例如模板 T ：

```
unique_ptr<vector<unique_ptr<T>>> & dataSets; 
```

智能感知找到 dataSets.get() 但没有找到 dataSets.get()->clear(); 但是，如果我这样做，它编译得很好。但是，如果它不是模板，它似乎可以正常工作。

代码：

```
 template <typename T> 
void mtsql::MTMySQL<T>::executePrepareStatement(const string & sqlText,const unique_ptr<vector<SQLDataType>> & argList,unique_ptr<vector<unique_ptr<T>>> & dataSets)
{
    dataSets.get()->clear();
    unique_ptr<sql::ResultSet> rs;
    for (auto iter = argList->cbegin(); iter != argList->cend() ; ++iter)
    {
        auto ps = this->createPreparedStatment(sqlText,args);
        rs.reset(ps->execute());
        dataSets.get()->insert(std::move(rs)); 
        ps.release();
    }

} 
```

我是 c++11 的新手，所以我可能会做额外的步骤或可能错误的步骤（例如，我认为 ps.release() 不需要......我的意思是删除它，但因为是智能点）

谢谢您的帮助！

编辑 1：多亏了帮助，我的代码看起来好多了，而且没有可能的泄漏。谢谢！

```
 dataSets->clear();

for (auto iter = argList->cbegin(); iter != argList->cend() ; ++iter)
{
    auto ps = this->createPreparedStatment(sqlText,args);
    dataSets->push_back(std::move(rs));         
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:06:20.797

C++ 不是一种简单的解析和语义语言。因此，您不能期望 IntelliSense 能够完美地处理复杂类型。

至于您的代码，您可以简化代码：

```
dataSets->clear();  // no need to use `get` here.

for (auto& ignored : *argList) {  // use range-based for.
    auto ps = this->createPreparedStatment(sqlText,args);
    dataSets->insert(ps->execute());  // no need to define 'rs'.
    // no need to release explicitly, if they are indeed smart pointers.
} 
```

（如果`dataSets`真的是`unique_ptr<vector<unique_ptr<T>>>`我认为你应该使用`dataSets->push_back`而不是`insert`。）

* * *

编辑：[MSVC 2010 不支持基于范围的](https://stackoverflow.com/questions/6898859/does-msvc10-visual-studio-2010-support-c-range-based-loops). 它确实支持 lambdas：

```
std::for_each(argList->cbegin(), argList->cend(), [&](const vector<SQLDataType>&) {
   auto ps = this->createPreparedStatment(sqlText,args);
   dataSets->insert(ps->execute());  // no need to define 'rs'.
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T18:19:11.133

C++ 中模板参数和依赖名称的 IntelliSense 充其量是有限的。

`T`可以是*任何类型*。IntelliSense 无法准确计算一组通用操作，这些操作对您的模板将被实例化的所有实际类型都有效。

请注意，此问题也会影响依赖类型，而不仅仅是其`T`本身，因为`T`您实例化的模板`T`（如`std::vector<std::unique_ptr<T>>`您的示例中）可能是显式特化的，并且这些显式特化可能具有与主模板不同的成员。

从用法来看，在某些情况下，它似乎尽最大努力为从属名称构建完成列表，但如果此列表不完整、为空或不正确，不应该太惊讶。

概念是为 C++11 提出的一项功能，但最终从规范中删除，它可能会为模板参数和许多依赖名称提供更好的 IntelliSense。

# sql - 通过替换使用内部选择更新列

> ID：11475793
> 
> 赞同：0
> 
> 时间：2012-07-13T17:56:44.397
> 
> 标签：sql, sql-server

我需要遍历一张表并从值中删除一行。我想做的是这样的：

```
UPDATE infotabs
SET [content] = 
    replace(
     replace(
        (
            SELECT [content] 
            FROM   infotabs AS ib
            WHERE  ib.infotab_id = i.infotab_id  
        ), '<p>', '')
    , '</p>', '')
WHERE infotab_id= 
    (
        SELECT i.infotab_id 
        FROM         infotabs AS i
        WHERE     ([content] LIKE '%<p>%') 
    ) 
```

但这失败了：

> 消息 4104，级别 16，状态 1，第 8 行
> 无法绑定多部分标识符“i.infotab_id”。

所以基本上我需要遍历表并从列中删除所有 <p> 和 </p> 。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:59:31.857

我认为，如果您不再将其视为一个循环，而是将其视为一个集合，您会发现此查询比您尝试的要合乎逻辑：

```
UPDATE infotabs SET content = REPLACE(REPLACE(content, '<p>', ''), '</p>', '')
 WHERE content LIKE '%<p>%' OR content LIKE '%</p>%'; 
```

正如我在对 Gordon 的回答的评论中提到的那样，我在此处添加了一个额外的 where 子句，以便更新所有行，无论它们是否包含 only `<p>`、 only`</p>`或两者都包含。抱歉，我最初没有透露原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:00:28.847

这行得通吗？

```
UPDATE infotabs
    SET [content] =  replace(replace([content], '<p>', ''), '</p>', '')
    WHERE [content] LIKE '%<p>%' 
```

看起来简单多了。

# symfony - Symfony2 上的权限问题

> ID：11475794
> 
> 赞同：27
> 
> 时间：2012-07-13T17:56:51.777
> 
> 标签：symfony, permissions

这个问题已经被问过好几次了，但没有一个解决方案能解决我的问题。

我在 Mac OSX Lion 上运行 Apache。此`http://localhost/Symfony/web/config.php`URL 引发 2 个主要问题：

```
Change the permissions of the "app/cache/" directory so that the web server can write into it.
Change the permissions of the "app/logs/" directory so that the web server can write into it. 
```

按照“设置权限”下的[指南：](http://symfony.com/doc/current/book/installation.html)

```
rm -rf app/cache/*
rm -rf app/logs/*
sudo chmod +a "_www allow delete,write,append,file_inherit,directory_inherit" app/cache app/logs
sudo chmod +a "`whoami` allow delete,write,append,file_inherit,directory_inherit" app/cache app/logs 
```

这并不能解决问题，所以我尝试了：

```
sudo chmod -R 777 app/cache 
```

那也行不通。任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-07-13T23:31:29.507

一些初步解释：

*   为了提高您网站的性能，Symfony2 需要缓存大量数据，它通过将*编译后的文件*写入您的`app/cache`目录来做到这一点。
*   为了提供强大的调试和监控工具，Symfony2 需要跟踪你的网站行为，它通过将*跟踪文件*写入你的`app/logs`目录来做到这一点。

关于 Apache 的一些话：

*   Apache 在特定`user`和特定下运行`group`（通常`www-data`两者都有，但您必须检查您的安装以找到使用的。例如，如果您`/etc/apache2/envvars`在 Linux 中搜索，您将有两个变量`APACHE_RUN_USER=www-data`和`APACHE_RUN_GROUP=www-data`）。
*   这意味着当您在 Symfony2 的肩膀上构建您的网站并在 Apache 下运行它时，**每次写入和读取都是代表 Apache`user`和`group`**.

分析你的问题：

*   首先，您有以下错误：

    ```
    Change the permissions of the "app/cache/" directory so that the web server can write into it.
    Change the permissions of the "app/logs/" directory so that the web server can write into it. 
    ```

    因为您的`app/cache`和`app/logs`文件夹对于您的 Apache`user`和`group`.

*   其次，通过执行：

    ```
    sudo chmod +a "_www allow delete,write,append,file_inherit,directory_inherit" app/cache app/logs
    sudo chmod +a "`whoami` allow delete,write,append,file_inherit,directory_inherit" app/cache app/logs 
    ```

    您正在修改和文件夹的*访问控制列表 (ACL)*，以便授予（基本上是您）和. 这种方法不起作用，可能有两个来源：`app/cache``app/logs``whoami``_www`

    1.  您正在修改 ACL，但您的内核和文件系统是否配置为考虑 ACL？

    2.  您正在授予`whoami`和 to一些权限`_www`，但您是否检查过您的 Apache 实例是否在这些用户之一下运行？

*   第三，您的同事通过执行以下命令来解决问题：

    ```
    sudo chmod -R 777 app/cache 
    ```

    这种方法之所以有效，有两个原因：

    1.  您将所有权限（读取和写入）授予系统上的每个用户 ( `777`)，因此您确信至少您的 Apache 用户和组也具有写入所需的权限`app/cache`。
    2.  您以递归方式 ( `-R`) 执行此操作，因此在目录中创建的所有嵌套文件夹`app/cache`也与新权限有关。

简单的解决方案：

1.  删除您的`app/cache`和`app/logs`文件夹的内容：

    ```
    rm -rf app/cache/*
    rm -rf app/logs/* 
    ```

2.  授予您`app/cache`和`app/logs`文件夹的所有权限（读取和写入）：

    ```
    chmod 777 app/cache
    chmod 777 app/logs 
    ```

评论：

*   还有其他解决方案（难度更大），例如授予特定 Apache 用户和组的权限以及使用 ACL 进行微调。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-06-18T13:28:15.340

“设置权限”下的[指南](http://symfony.com/doc/current/book/installation.html#configuration-and-setup)说，如果您的系统不支持 chmod +a 您必须这样做：

```
HTTPDUSER=`ps aux | grep -E '[a]pache|[h]ttpd|[_]www|[w]ww-data|[n]ginx' | grep -v root | head -1 | cut -d\  -f1`

sudo setfacl -R -m u:"$HTTPDUSER":rwX -m u:`whoami`:rwX app/cache app/logs
sudo setfacl -dR -m u:"$HTTPDUSER":rwX -m u:`whoami`:rwX app/cache app/logs 
```

如果这不起作用试试这个：

```
umask(0002); // This will let the permissions be 0775

// or

umask(0000); // This will let the permissions be 0777 
```

第一个解决方案对我有用。我希望它可以帮助遇到相同类型问题的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-12T18:08:02.830

```
rm -rf app/cache/*
rm -rf app/logs/*

APACHEUSER=`ps aux | grep -E '[a]pache|[h]ttpd' | grep -v root | head -1 | cut -d\  -f1`
sudo setfacl -R -m u:$APACHEUSER:rwX -m u:`whoami`:rwX app/cache app/logs
sudo setfacl -dR -m u:$APACHEUSER:rwX -m u:`whoami`:rwX app/cache app/logs 
```

**`Source:`** [http://symfony.com/doc/current/book/installation.html#configuration-and-setup](http://symfony.com/doc/current/book/installation.html#configuration-and-setup)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-03T00:20:08.910

接受的答案很棒，但是在我的情况下（Centos 7 和 Symfony 4.3），即使在设置权限后我仍然遇到错误。事实证明**SELinux**阻止了 Apache。以下对我有用（将我的项目更改为您的 Symfony 安装文件夹）。

```
sudo chcon -R -t httpd_sys_script_rw_t /var/www/my-project/var/cache/
sudo chcon -R -t httpd_sys_script_rw_t /var/www/my-project/var/log/ 
```

您也可以禁用 SELinux，但只能暂时禁用当前会话以隔离问题（我不建议将其用于产品）

```
sudo setenforce 0 
```

[学分](https://stackoverflow.com/questions/11520370/permission-issue-in-cache-and-logs-folder-in-symfony-2-0)

# python - 从python中的大文件中搜索单词列表

> ID：11475796
> 
> 赞同：3
> 
> 时间：2012-07-13T17:56:56.127
> 
> 标签：python

我是新蟒蛇。我有一个单词列表和一个非常大的文件。我想从单词列表中删除文件中包含单词的行。

单词列表按排序给出，可以在初始化期间输入。我正在尝试找到解决此问题的最佳方法。我现在正在做一个线性搜索，它花费了太多时间。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T18:03:51.360

您可以使用`intersection` from set theory 来检查单词列表和一行中的单词是否有任何共同点。

```
list_of_words=[]
sett=set(list_of_words)
with open(inputfile) as f1,open(outputfile,'w') as f2:
    for line in f1:
        if len(set(line.split()).intersection(sett))>=1:
            pass
        else:
            f2.write(line) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:24:02.003

If the source file contains only words separated by whitespace, you can use sets:

```
words = set(your_words_list)
for line in infile:
    if words.isdisjoint(line.split()):
        outfile.write(line) 
```

Note that this doesn't handle punctuation, e.g. given `words = ['foo', 'bar']` a line like `foo, bar,stuff` won't be removed. To handle this, you need regular expressions:

```
rr = r'\b(%s)\b' % '|'.join(your_words_list)
for line in infile:
    if not re.search(rr, line):
        outfile.write(line) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T19:01:31.150

You can not delete the lines in-place, you need to rewrite a second file. You may overwrite the old one afterwards (see `shutil.copy`for this).

The rest reads like pseudo-code:

```
forbidden_words = set("these words shall not occur".split())

with open(inputfile) as infile, open(outputfile, 'w+') as outfile:
  outfile.writelines(line for line in infile
      if not any(word in forbidden_words for word in line.split())) 
```

See [this question](https://stackoverflow.com/q/265960/1025391) for approaches how to get rid of punctuation-induced false-negatives.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T18:01:20.570

大文件中的行和单词需要以某种方式进行排序，在这种情况下，您可以实现二进制搜索。看起来它们并不好，所以您可以做的最好的事情是通过检查列表中的每个单词是否在给定行中进行线性搜索。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T18:03:53.823

```
contents = file.read()
words = the_list.sort(key=len, reverse=True)
stripped_contents = re.replace(r'^.*(%s).*\n'%'|'.join(words),'',contents) 
```

类似的东西应该可以工作......不确定它是否会比逐行进行更快

[编辑] 这是未经测试的代码，可能需要一些细微的调整

# python - Pyside中的复选框列表？

> ID：11475800
> 
> 赞同：0
> 
> 时间：2012-07-13T17:57:22.470
> 
> 标签：python, qt, checkbox, pyside, qt-designer

我在 qtdesigner 中创建了一个有许多复选框的 gui： [截图 http://imgq.tk/img/-2012-07-13%2013:55:07.png](http://imgq.tk/img/-2012-07-13%2013:55:07.png)

我想知道是否有办法使用 pyside 列出所有选中的框。如果我能从每个框中获取文本会更好。这些盒子采用网格布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:33:38.743

由于您在 python 中，您应该能够自省对象并找到它的所有成员。但是由于父子关系，Qt 通常使这很容易。您可以在表单（父级）中查询其作为文本框的子级：

```
# my python's a bit rusty, but hopefully this is close
checkboxes = [x for x in form.children() where isinstance(x, QCheckBox)] 
```

请参阅[findChildren()](http://qt-project.org/doc/qt-4.8/qobject.html#findChild)和[children()](http://qt-project.org/doc/qt-4.8/qobject.html#children)方法。

# jquery - 超级鱼 + Cufon 悬停

> ID：11475807
> 
> 赞同：1
> 
> 时间：2012-07-13T17:58:00.907
> 
> 标签：jquery, cufon, superfish

对于这个 wordpress 网站：[http](http://bit.ly/NlBv9I) : //bit.ly/NlBv9I 我使用滑动门作为圆角，使用cufon 作为字体。当我想添加一个下拉菜单时，我遇到了悬停“diensten”选项卡的问题。当我通过子菜单底部离开子菜单时，我的主要项目不会恢复正常样式。使用 superfish onHide 功能我设法解决了这个问题，但是现在当我将主项目悬停到子菜单时，主项目的颜色变为背景颜色（因此它变得不可见）。我尝试使用 onBeforeShow 函数来解决这个问题并且它有效，但这打破了我的第一个解决方案。

您可以在此处找到 HTML：http: [//bit.ly/NlBv9I](http://bit.ly/NlBv9I)

CSS：

```
ul {
    list-style:none;
    margin-bottom: 6px;
}

#main-nav li {
    float: left;
    margin-right: 2px;
    display: block;
}

#main-nav li a {
    color:#6f6f6f;
    font-size: 15px;
    padding: 4px;
    display: block;
    text-decoration: none;
}
#main-nav li.sfHover a {
    color:#fff;
}
#main-nav li:hover a, #main-nav li.current_page_item a, #main-nav li.current-menu-item a {
    color:#fff;
}
#main-nav li a:hover, #main-nav li.current_page_item a, #main-nav li.current-menu-item a {
    background: url(img/leftDoor.png) top left no-repeat;
}
#main-nav li:hover, #main-nav li.current_page_item, #main-nav li.current-menu-item {
    background: url(img/rightDoor.png) top right no-repeat;
}
#main-nav ul li.sfHover, #main-nav ul li.sfHover li  {
    background: url(img/rightDoor.png) top right no-repeat;
}
#main-nav ul li.sfHover a {
    background: url(img/leftDoor.png) top left no-repeat;
}
#main-nav ul.sub-menu a {
    color:#fff;
}
#main-nav .grey {
    color:#6f6f6f !important;
}
#main-nav .white {
    color:#fff !important;
} 
```

查询：

```
$('#top .menu').superfish({
                    hoverClass:    'sfHover',
                autoArrows: false,
                delay:0,
                /*onBeforeShow: function() { $(this).prev().addClass('white'); },*/
                onHide: function() { $(this).prev().addClass('grey') }
            }); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:36:33.860

我认为你应该使用

```
Cufon.refresh(); 
```

当你使用的时候，`Cufon font`你需要`Cufon.refresh()`在改变任何样式后使用，比如说，你已经使用`addClass('gray')`并且该类适用`gray color`于字体，但是如果你在更改类后不使用`Cufon.refresh()`，那么你就看不到更改。换句话说，在动态更改任何正在使用的元素的字体样式后，`Cufon font`您必须使用`Cufon.refresh();`才能生效。

# caching - 是否有缓存线宽不是 2 次方的 CPU？

> ID：11475809
> 
> 赞同：1
> 
> 时间：2012-07-13T17:58:13.677
> 
> 标签：caching, cpu

有谁知道缓存线宽不是 2 的幂的 CPU？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:14:28.787

这可以追溯到计算机通常如何通过二进制（以 2 为基数）数字来存储信息和处理指令。从逻辑上讲，这是最简单的，您可以将任何事物分解为某物是或不是；1 或 0。

# java - Android webview 在弹出窗口中打开 target="_blank" url

> ID：11475811
> 
> 赞同：1
> 
> 时间：2012-07-13T17:58:20.157
> 
> 标签：java, android, webview

我在我的 android 应用程序中使用 webview。我想知道是否可以将我网页上的 target="_blank" url 打开到 android 弹出窗口中？或任何其他方式来弹出链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:17:29.680

```
//LAYOUT FILE webview_content.xml 
```

```
 <WebView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"

        android:id="@+id/webView"
        android:scrollbarAlwaysDrawVerticalTrack="false"
        android:scrollbars="none" >
    </WebView>

</RelativeLayout>

///CODE IN ACTIVITY 
```

最终对话框对话框 = 新对话框（上下文）；

```
 dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    dialog.getWindow().requestFeature(Window.FEATURE_PROGRESS);
    dialog.setContentView(R.layout.webview_content);

    WebView webView = (WebView) dialog
            .findViewById(R.id.webView);
    webView.getSettings().setJavaScriptEnabled(true);
             webView.loadUrl("YOUR URL");

       dialog.show(); 
```

# c# - c# 字节数组中的左移半字节

> ID：11475816
> 
> 赞同：3
> 
> 时间：2012-07-13T17:58:47.593
> 
> 标签：c#, bytearray, bit-manipulation

这是我的功能的要求：

取以下字符串：

```
6900460420006149231=13050010300100000 
```

并将其转换为以下字节数组：

```
{ 0x37, 0x06, 0x90, 0x04, 0x60, 0x42, 0x00, 0x06, 0x14, 0x92, 0x31, 0xD1, 0x30, 0x50, 0x01, 0x03, 0x00, 0x10, 0x00, 0x00 } 
```

第一个字节 0x37 是二进制字符串的原始长度。接下来的 10 个字节是以 bcd 格式编码的字符串“6900460420006149231”。这就是棘手的地方。现在我需要十六进制“D”来表示两个字段之间的分隔符（=）。您可以在字节数组中的 12 索引的高半字节中看到十六进制。字节数组的其余部分是以 bcd 格式编码的第二个字段“13050010300100000”。如果原始长度是奇数，我会用前导零填充未使用数据的前半字节。

我不指望任何人都能全面实施，所以让我们分解一下并解决我遇到问题的地方。可以说我有：

```
byte[] field1Bytes = { 0x06, 0x90, 0x04, 0x60, 0x42, 0x00, 0x06, 0x14, 0x92, 0x31 }
byte[] field2Bytes = { 0x01, 0x30, 0x50, 0x01, 0x03, 0x00, 0x10, 0x00, 0x00 }
byte separator = 13; // D  0x0D 
```

如果我只是使用 Array.Copy，我最终会得到：

```
{ 0x06, 0x90, 0x04, 0x60, 0x42, 0x00, 0x06, 0x14, 0x92, 0x31, 0x0D, 0x01, 0x30, 0x50, 0x01, 0x03, 0x00, 0x10, 0x00, 0x00 } 
```

上面的字节数组并不是我所需要的。关于如何实现以下函数以使我更接近我想要实现的任何想法：

```
byte[] ShiftLeftAndCombine(byte[] b1, byte[] b2) 
```

在哪里

```
ShiftLeftAndCombine({0x0d}, {0x01, 0x30}) 
```

会回来

```
{0xd1, 0x30} 
```

*   在旁注中，我意识到我需要处理偶数/奇数字段长度来处理我正在编写的实际函数，但让我担心 =]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:01:05.720

在我看来，您真正需要做的是将整个第二块内存左移四位。这意味着您要做的不仅仅是复制，您还将把字节 n+1 的“前导”（最高有效）位移动到“尾随”（最低有效）第 n 个字节。这是一个字节数组的通用“位移器”。

```
 byte[] shiftBlock(byte[] bytes, short bitShift)
    {
        byte[] newBytes = new byte[bytes.Length+1];
        for (int index=0;index < bytes.Length; index++)
        {
            // Each new byte is the current byte shifted left by "bitShift" bits,
            // followed by the first 8-bitShift bits of the next byte OR zero,
            // if we're at the end of the array. Shift the next-bytes bits to
            // the right, and OR the result together. 

            byte newByteMSB = (byte)(bytes[index] << bitShift); // shift left bitShift bits
            byte newByteLSB = (byte)((index==bytes.Length-1)?((byte)0):(bytes[index+1]));
            newByteLSB = (byte) (newByteLSB >> (8-bitShift));

            newBytes[index] = (byte) ( newByteMSB | newByteLSB);

        }

        return newBytes;
    } 
```

您应该能够将其调整为具有必要警告的更广泛的解决方案。我对它进行了粗略的测试，它似乎可以在我扔给它的简单字节数组上工作。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:15:11.307

不确定这是否是家庭作业，但左移和组合部分看起来像这样：

```
var pos = 0;
var newByte = b1[pos] << 4;
newByte |= b2[pos] 
```

显然你会想在一个循环中做到这一点，并考虑到 2 个数组的长度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T18:20:46.097

**编辑：**修改为不包括结果中的原始长度。

希望这可以帮助。不过，不确定您是如何计算出原始长度为 0x37 的。:)

根据规定的期望结果，您只需将分隔符 nybble 移动到第二个数组的第一个字节。

```
byte[] field1Bytes = { 0x06, 0x90, 0x04, 0x60, 0x42, 0x00, 0x06, 0x14, 0x92, 0x31 } ;
byte[] field2Bytes = { 0x01, 0x30, 0x50, 0x01, 0x03, 0x00, 0x10, 0x00, 0x00 } ;
byte separator = 13; // D  0x0D 

byte[] result = new byte[field1Bytes.Length + field2Bytes.Length];

Array.Copy(field1Bytes, 0, result, 0, field1Bytes.Length);
Array.Copy(field2Bytes, 0, result, field1Bytes.Length, field2Bytes.Length);

// shift the separator into the first byte of the second array in the result
result[field1Bytes.Length] |= (byte)(separator << 4); 
```

这会产生：

```
0x06 0x90 0x04 0x60 0x42 0x00 0x06 0x14 0x92 0x31 0xd1 0x30 0x50 0x01 0x03 0x00 0x10 0x00 0x00 
```

...符合规定的期望结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T18:32:23.223

我会做一个 BCD 类。然后 BCD.ToByteArray() 会以 Byte[] 格式为您提供 BCD 的当前表示，而 BCD.ToString() 将提供字符串格式。在内部将 BCD 存储为每个 BCD 位一个数组元素。如果你设计自己的数据结构而不是试图让 Byte[] 做它不打算做的事情，你会做得更好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T19:00:32.843

好的，我明白了：

```
 static void Main(string[] args)
    {
        const string rawTrack = "6900460420006149231=13050010300100000";

        var byteList = new LinkedList<byte>();

        foreach (var c in rawTrack)
        {
            if(c.Equals('='))
            {
                byteList.AddLast(13);
                continue;
            }

            var bytes = Formatters.Bcd.GetBytes(new string(c, 1));  // for 9 gives 0x09
            byteList.AddLast(bytes[0]);
        }

        // Adjust Buffer if odd length
        if(rawTrack.Length % 2 != 0)
        {
            byteList.AddFirst(0);
        }

        var result = new byte[byteList.Count / 2];
        var buffer = new byte[byteList.Count];
        byteList.CopyTo(buffer, 0);

        var j = 0;
        for(var i = 0; i < buffer.Length - 1; i += 2, j++ )
        {
            result[j] = CombineLowNibble(buffer[i], buffer[i + 1]);
        }

        Console.WriteLine(BitConverter.ToString(result));
    }

    private static byte CombineLowNibble(byte b, byte b1)
    {
        return (byte) ((b << 4) | b1);
    } 
```

结果如下：

```
06-90-04-60-42-00-06-14-92-31-D1-30-50-01-03-00-10-00-00 
```

# opengl - OpenGL hello.c 无法使用 CMake 构建

> ID：11475817
> 
> 赞同：0
> 
> 时间：2012-07-13T17:58:48.740
> 
> 标签：opengl, build, makefile, cmake, glut

我正在尝试从[http://www.glprogramming.com/red/chapter01.html](http://www.glprogramming.com/red/chapter01.html)构建 hello.c 示例（查找“示例 1-2”）。

我的 CMakeLists.txt 如下：

```
cmake_minimum_required (VERSION 2.8)
project (GLUTEX)

find_package(OpenGL REQUIRED)
find_package(GLUT REQUIRED)
include_directories(${GLUT_INCLUDE_DIRS})
include_directories(${OpenGL_INCLUDE_DIRS})

add_executable (glutex glutex.c)
target_link_libraries (glutex ${OpenGL_LIBRARIES})
target_link_libraries (glutex ${GLUT_LIBRARIES}) 
```

CMake 调用成功生成所需的 Makefile。但是当我打电话时`make`，我遇到以下情况：

```
Scanning dependencies of target glutex
[100%] Building C object CMakeFiles/glutex.dir/glutex.c.o
Linking C executable glutex
/usr/bin/ld: CMakeFiles/glutex.dir/glutex.c.o: undefined reference to symbol 'glOrtho'
/usr/bin/ld: note: 'glOrtho' is defined in DSO /usr/lib64/libGL.so.1 so try adding it to the linker command line
/usr/lib64/libGL.so.1: could not read symbols: Invalid operation
collect2: ld returned 1 exit status
make[2]: *** [glutex] Error 1
make[1]: *** [CMakeFiles/glutex.dir/all] Error 2
make: *** [all] Error 2 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:25:16.707

尝试改变

```
target_link_libraries (glutex ${OpenGL_LIBRARIES}) 
```

到

```
target_link_libraries (glutex ${OPENGL_LIBRARIES}) 
```

# php - 仅从 cURL 请求的标头获取位置

> ID：11475819
> 
> 赞同：1
> 
> 时间：2012-07-13T17:58:54.893
> 
> 标签：php, facebook-graph-api, curl

我试图在重定向后检索图像的位置 URL，但我似乎无法让它工作。我以前从未使用过 cURL，但从我所做的研究看来，我需要它来从 Facebook 获取图像。到目前为止，这是我的代码：

```
function getImage($url) {
$ch = curl_init();
// Only calling the head
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER, true); // header will be at output
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'HEAD'); // HTTP request is 'HEAD'

$content = curl_exec($ch);
curl_close($ch);

return $content;
}

$image = explode("Location: ", getImage("http://graph.facebook.com/553451657/picture?type=large"));

print_r($image); 
```

但我的回应是：

```
HTTP/1.1 302 Found Access-Control-Allow-Origin: * Cache-Control: private, no-cache, no-store, must-revalidate Content-Type: image/jpeg Expires: Sat, 01 Jan 2000 00:00:00 GMT Location: http://profile.ak.fbcdn.net/hprofile-ak-snc4/161877_553451657_798840908_n.jpg Pragma: no-cache X-FB-Rev: 590433 X-FB-Debug: WH1uJvIjUqiLT8ezVPdude8VKYnXjAHRlFaP8gqF9fI= Date: Fri, 13 Jul 2012 17:56:09 GMT Connection: keep-alive Content-Length: 0 Array ( [0] => 1 ) 
```

我如何才能获得位置部分（“http://profile.ak.fbcdn.net/hprofile-ak-snc4/161877_553451657_798840908_n.jpg”）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-04-16T12:51:31.677

您可以在标题上执行功能：

```
 $headers = [];

            curl_setopt($curl, CURLOPT_HEADERFUNCTION, function ($ch, $header) use (&$headers) {
                $matches = array();

                if ( preg_match('/^([^:]+)\s*:\s*([^\x0D\x0A]*)\x0D?\x0A?$/', $header, $matches) )
                {
                    $headers[$matches[1]][] = $matches[2];
                }

                return strlen($header);
            }); 
```

（在[这里](https://stackoverflow.com/questions/37837808/php-curl-get-header-parameters)看到）

然后你把它存储在`$headers["Location"][0]`.

我也和你一样，试图以这种方式获取 fb 页面图像，似乎不需要 PHP SDK、App 权限或 access_token，但可能存在一些限制（有人知道吗？）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-13T18:09:06.573

> 我如何获得位置部分

获取 Location 标题不是您的*主要*目标，对吗？您想从被重定向到的地址中获取图像，对吗？

因此，只需设置选项`CURLOPT_FOLLOWLOCATION`，cURL 将*自动*跟随该重定向并为您获取*真实*图像。

# python - py2exe 可执行文件以看似随机的方式崩溃

> ID：11475820
> 
> 赞同：3
> 
> 时间：2012-07-13T17:59:02.887
> 
> 标签：python, windows, crash, py2exe

我正在编写一个 python 脚本来监视文件夹中的新文件，然后将文件复制到目录中。该代码在作为 .py 文件运行时运行良好，但是，由 py2exe 创建的可执行文件会循环一段时间，然后才能完全停止。崩溃不能被 try 括号捕获。

我的一位同事正在使用 Qt 用 C++ 编写相同类型的应用程序，他遇到了非常相似的问题。

我没有包含源代码，因为我认为它不会特别有用，但是如果您不同意，我会发布它。

我使用 shutil 进行复制，使用 os 列出目录并使用文件路径。
我正在运行 Windows 7 64 位。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T04:49:20.157

[您是否在py2exe 教程第 5 步](http://www.py2exe.org/index.cgi/Tutorial#Step5)中列出的 py2exe 创建的可执行文件中包含了适当的 DLL 和可能的清单？没有这些，standalone 将无法在任何其他计算机上运行，​​并且根据使用的 Python 版本，py2exe 无法自动为您捆绑这些。

是的，我意识到这是一个老问题。

# eclipse - Eclipse 64 位的先决条件是什么？

> ID：11475829
> 
> 赞同：0
> 
> 时间：2012-07-13T17:59:41.657
> 
> 标签：eclipse

Eclipse 64 位的先决条件是什么？我是否必须为 jdk 1.6 64 位或 32 位 jdk 下载 eclipse 64 位才能与 64 位 DLL 一起使用？我已将 32 位 Eclipse 配置为具有 64 位 JDK。但是当我运行我的测试套件时，我得到了`java.lang.OutOfMemory error`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:37:45.937

当我安装 Eclipse 64 位时，我必须安装 64 位 JDK。我不是 100% 确定这是否是绝对要求，但这似乎是最好的方法。

此外，32 位和 64 位版本的 Java 可以在机器上共存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:41:56.657

我不会将 64 位 eclipse 与 32 位 JDK 混合使用，反之亦然。两者都坚持使用 64 位或 32 位。当然，正如 Almo 所说，您可以同时安装并使用 eclipse.ini 文件告诉 eclipse 使用正确的 jvm。

# c# - c# - 你需要一个 DataTable 来从 DataAdapter 中检索数据吗？

> ID：11475831
> 
> 赞同：0
> 
> 时间：2012-07-13T17:59:47.117
> 
> 标签：c#, sql, datatable

我的大多数查询都很短，总共 1-3 条记录。这是我现在拥有的代码。我想知道是否有一种方法可以直接从 DataAdapter 捕获用户 ID 而无需通过表。谢谢！

```
 SqlDataAdapter dataAdapter = new SqlDataAdapter(strSQL, strCon);
    SqlCommandBuilder commandBuilder = new SqlCommandBuilder(dataAdapter);
    DataTable t = new DataTable();
    dataAdapter.Fill(t);
    int userid = 0;
    if (t.Rows.Count > 0)
    {
        DataRow dr = t.Rows[0];
        userid = dr.Field<int>(0); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T18:02:09.597

如果你只有一个返回值，你可以使用[ExecuteScalar](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)并且你有[ExecuteReader](http://msdn.microsoft.com/en-us/library/9kcbe65k)来获取多个返回值。

这是 msdn 示例：

```
private static void CreateCommand(string queryString,
    string connectionString)
{
    using (SqlConnection connection = new SqlConnection(
               connectionString))
    {
        connection.Open();

        SqlCommand command = new SqlCommand(queryString, connection);
        SqlDataReader reader = command.ExecuteReader();
        while (reader.Read())
        {
            Console.WriteLine(String.Format("{0}", reader[0]));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T18:02:50.927

使用阅读器：

[http://msdn.microsoft.com/en-US/library/system.data.sqlclient.sqldatareader(v=vs.80).aspx](http://msdn.microsoft.com/en-US/library/system.data.sqlclient.sqldatareader(v=vs.80).aspx)

更快和更少的资源 1 条记录或数百条记录。

# jquery - jQuery改变TD颜色

> ID：11475832
> 
> 赞同：0
> 
> 时间：2012-07-13T17:59:47.203
> 
> 标签：jquery, colors

当我单击它时，我正在尝试更改 TD 单元格的颜色。首先，我需要检查 page.php 上的数据：

```
$(".change").click(function(event) {
    var section = $(this).data('id');
    $.post("page.php", { td: change }, function(data){
        $(this).css('background', '#000'); <------- THIS
        });
    }); 
```

我怎样才能使`this`线路工作？我知道我需要设置`this`一些东西，但是怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:00:55.227

this 的范围（上下文）在函数回调中更改。

像这样的东西应该工作：

```
$(".change").click(function(event) {
    var self = this;
    var section = $(this).data('id');
    $.post("page.php", { td: change }, function(data){
        $(self).css('background', '#000'); <------- THIS
    });
}); 
```

# ssrs-2008 - SSRS 2008 R2 DynamicHeight 巨大的空白

> ID：11475835
> 
> 赞同：0
> 
> 时间：2012-07-13T18:00:02.360
> 
> 标签：ssrs-2008

尝试在 2008 R2 中制作水平堆积条形图，行数在运行之前是未知的，所以我使用图表的 dynamicheight 属性根据需要增加 - 图表空间增加，但图表内部的图表区域有上下大量空白...

![选择 TOP(5) 行](../Images/de969733a8259c62cd4e287b68b3dd29.png)

![选择 TOP(50) 行](../Images/eaf9aee751ae4d0accf286fdc82fae26.png)

如果我选择 5 行，我会得到第一个图像 如果我选择 50 行，我会得到第二个图像，请注意边框和“图表标题”之间以及“图表标题”和实际图表区域之间的增加空间我的 DynamicHeight 属性设置为 = (1 + COUNTROWS("DataSet1")/2) & "in"

请注意，我在切换到打印格式时检查了另一个关于底部额外空格的 StackOverflow 问题，但它似乎不适用于我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:49:55.997

Microsoft Connect 提交：[http ://connect.microsoft.com/SQLServer/feedback/details/769305/ssrs-chart-dynamicheight-dynamicwidth-and-whitespace-management](http://connect.microsoft.com/SQLServer/feedback/details/769305/ssrs-chart-dynamicheight-dynamicwidth-and-whitespace-management)

# ios - 使用 RestKit 将对象映射到资源

> ID：11475836
> 
> 赞同：0
> 
> 时间：2012-07-13T18:00:09.620
> 
> 标签：ios, restkit

我正在学习 RestKit 并想使用对象映射器发布有效负载。我正在使用 registerMapping: 但这会在根键上创建映射。有没有办法将对象映射到资源？我的映射代码如下所示：

```
[self.objectManager.router routeClass:[Session class] toResourcePath:@"/sessions" forMethod:RKRequestMethodPOST];
[self.objectManager.mappingProvider registerMapping:[Session mappingForObjectStore:self.objectManager.objectStore] 
                                    withRootKeyPath:@""];

[self.objectManager postObject:session usingBlock:^(RKObjectLoader *loader) {
    loader.resourcePath = @"/sessions";
    loader.delegate = self;

}]; 
```

它创建了一个像这样的有效负载：

> {“”：{数据：“东西”}}

但我追求这样的有效载荷：

> {数据：“东西”}

这里的 RestKit 方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:46:55.140

Blake 指出我使用了一个我忽略的不同 API。所以我将 registerMapping 替换为：

```
[self.objectManager.mappingProvider setObjectMapping:[Session mappingForObjectStore:self.objectManager.objectStore]
                              forResourcePathPattern:@"/sessions"];
[self.objectManager.mappingProvider setSerializationMapping:[[Session mappingForObjectStore:self.objectManager.objectStore] inverseMapping]
                                                   forClass:[Session class]]; 
```

三声欢呼！

# google-app-engine - 运行基本的 Google 应用

> ID：11475842
> 
> 赞同：0
> 
> 时间：2012-07-13T18:00:34.783
> 
> 标签：google-app-engine

我正在尝试在我的本地主机中运行基本的谷歌应用程序。但我似乎有一些我无法解决的错误：

我输入时出错：dev_appserver.py /Users/GoogleApp/helloworld

回溯（最近一次通话最后）：

```
 File "/usr/local/bin/dev_appserver.py", line 133, in <module>
    run_file(__file__, globals())
  File "/usr/local/bin/dev_appserver.py", line 129, in run_file
    execfile(script_path, globals_)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_main.py", line 694, in <module>
    sys.exit(main(sys.argv))
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_main.py", line 582, in main
    root_path, {}, default_partition=default_partition)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver.py", line 3217, in LoadAppConfig
    raise AppConfigNotFoundError
google.appengine.tools.dev_appserver.AppConfigNotFoundError 
```

解决不了。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:11:26.490

你需要在你的应用程序目录中有一个 app.yaml 文件（在你的情况下是 /Users/GoogleApp/helloworld）。有关详细信息，请参阅[文档](https://developers.google.com/appengine/docs/python/config/appconfig)。有关更多示例，请参阅[入门指南](https://developers.google.com/appengine/docs/python/gettingstartedpython27/helloworld)（创建配置文件部分）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T22:45:45.537

将子目录保留在`helloworld`sdk 目录之外，例如：

```
/home/helloworld 
```

# windows - 自定义波特率，redux

> ID：11475845
> 
> 赞同：2
> 
> 时间：2012-07-13T18:00:43.837
> 
> 标签：windows, serial-port, usbserial, baud-rate

我遇到了[自定义波特率](https://stackoverflow.com/questions/7714060/custom-baud-rate)详细说明的问题——`SetCommState()`失败并出现波特=921600，但成功出现波特=115200——尽管在 Windows 7 64 位和其他一些奇怪的情况下，如下所示：

1）我正在与之交谈的端口是 Silicon Labs 的 USB 到 UART 适配器，带有他们的驱动程序，但（据我了解；不要引用我的话）重新签名以表明自己来自我的公司（我们与我们需要它的硬件产品一起重新分发它）。当我将硬件设备连接到计算机时，COM 端口出现在设备管理器中，当我断开它时消失。我对此了解不多，但我认为这是正常行为。

2) 921600 波特曾经可以工作，在我出售的应用程序和我编写的示例程序中，我上次使用它时运行良好，但昨天开始失败，理由是现在请求 921600 波特会导致`SetCommState()`失败，并显示“参数为不正确。” 将请求的波特率更改为 115200 可以`SetCommState()`成功，但会不可接受地减慢通信速度。

3) 921600 波特在 REALTERM 中仍然有效。我可以将端口设置为 921600 波特并打开它；它“正常工作”，没有错误或其他投诉。我可以像往常一样与我的仪器交谈并获取数据等。

4) 我确实在一两周前重新安装了驱动程序，作为解决 Windows 错误地将大量 COM 端口标记为“正在使用”的问题的一部分。驱动安装声称成功，但无法打开端口；设备管理器显示一个黄色三角形/感叹号/问题。经过多次反复试验，最终发现安装过程未能将 .inf 文件复制到 system32 中。我“手动”将该文件复制到适当的位置，然后正常操作——直到今天。

5) 今天的设备管理器显示 115200 波特是设备可用的最高速率，但我完全不确定它是否显示任何更高的速率；我从不担心它，因为它“有效”。

所以，简而言之，直到昨天一切正常，现在突然我自己的应用程序不会做 921600 波特，但 RealTerm 仍然会。

建议？解决方案？

# facebook - 同一页面上的多个 Facebook 分享按钮/链接引用不同的 TITLE 和 LINK

> ID：11475851
> 
> 赞同：0
> 
> 时间：2012-07-13T18:01:04.217
> 
> 标签：facebook

我需要创建一个“竞赛”页面，要求用户提交图片。

之后，他们应该能够在 FB、Twitter、G+、Pinterest 等上分享他们的照片，让其他人来投票。

我希望页面显示为 jQuery 画廊，每当人们选择缩略图时，都会打开带有相关投票和“分享”按钮的大图。

当用户共享图像时，我想要一个与该特定图像相关联的特定 TITLE 和 URL……例如“http://www.mysite.com/contest.html#picture1”……或“http:// www.mysite.com/contest.html#picture2"

如果我只有一页，这怎么可能？

如果我可以使用带有参数的旧“facebook.com/sharer.php”，我不会有问题......但似乎开放图形协议正在“覆盖”sharer.php参数......

在 Twitter 和 Pinterest 上运行良好……我可能对 Google+ 也有同样的问题。

原谅我的英语不好，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:15:27.133

好吧，为每张图片设置一个（“虚拟”）页面，并用适当的 OG 标签填充它……让你的用户喜欢*这样*。然后将 JS 重定向到该页面，这样当链接在 Facebook 上共享时，跟随链接的用户将到达您希望他们最终到达的“真实”地址。

*（顺便说一句，恕我直言，当人们认为只*在客户端和客户端做所有事情**是如此“花哨”并且“好”和“现代”的网站需要所有 AJAX/单页时，这就是现在经常发生的事情- 只是胡说八道，而不是真正*好的和有效的*URL 结构，然后无法正确处理所有这意味着......）**

# c++ - 为 Visual Studio 2010 定义环境变量以在构建期间使用？

> ID：11475852
> 
> 赞同：0
> 
> 时间：2012-07-13T18:01:09.707
> 
> 标签：c++, visual-studio-2010, environment-variables, 32bit-64bit

我正在处理一个相当大的项目，该项目必须在 Debug 和 Release 中编译 32 位和 64 位版本。它还必须是便携的。问题是，链接依赖项 (.lib) 发生了变化，因为我必须链接 32 位或 64 位库。为了简化问题，我对链接器的“附加库依赖项”进行了以下设置：$(LIB_HOME)/core/bin;...

LIB_HOME 指向正确版本库的主目录。

现在我目前在一个批处理文件中设置 LIB_HOME，然后启动 Visual Studio 2010。不幸的是，使用这种方法，每次我想从 32 位或 64 位切换时都必须重新启动 Visual Studio。我在调试选项下看到了“环境”设置，但这些环境变量似乎只在运行时启动。

有什么方法或任何工具可用于设置 Visual Studio 2010 的构建时环境变量，以便我可以轻松地在 32 位和 64 位模式下在调试和发布之间切换，并且环境变量将正确设置？这个问题一般是怎么处理的？

谢谢

编辑：我找到了一个名为解决方案构建环境 (http://workspacewhiz.com/SolutionBuildEnvironmentReadme.html) 的工具，这似乎是我正在寻找的，但不幸的是它看起来不适用于 VS2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:39:36.340

编译器宏和库的战略布局。例如，我将使用“$(PlatformName)_$(ConfigurationName)/libraries”作为我的附加链接目录。然后我将把我的 32 位库放在 Win32_Debug/libraries 和 Win32_Release/libraries 中，将我的 64 位库放在 x64_Debug/libraries 和 x64_Release/libraries 中。如果您不关心调试与发布，您显然可以省略 _$(ConfigurationName)。

或者，使用 2 个环境变量，一个用于 32 位，一个用于 64。将 32 位构建配置配置为使用 32 位变量，将 64 位构建配置配置为使用 64 位变量。您为每个构建使用不同的构建配置，对吗？

# rspec - 我将如何测试 RSpec 匹配器 have_content 在页面上找到的匹配数？

> ID：11475853
> 
> 赞同：1
> 
> 时间：2012-07-13T18:01:11.413
> 
> 标签：rspec

我基本上是在尝试获取“has_content？”的功能？或选项 :count 为 has_css 提供的“should have_content”匹配器？匹配器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:52:30.800

你能试试这样的东西吗**all('a').length**

这里有几个例子：

```
describe 'my awesome page' do
  before :each do
    visit root_path
  end

  # css just for querying DOM
  it 'number of titles should be huge' do
    page.all(:css,'h2.awesome_header').length.should have_at_least(3).items
  end
  it 'has exactly 4 div elements' do
    page.all(:css,'div.awesome_class').length.should == 4
  end

  # For querying content you can try :xpath instead :css. 
  it 'has paragraps with text' do
    page.all(:xpath, '//div[contains(., "t")]').length.should == 9
  end
end 
```

**更新：**

我找到了更优雅的方法来做到这一点。在此处查看文档：[http](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Finders:all) ://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Finders： 这里都是工作示例

```
page.all(:css, 'p', :text => /.*wellcome.*/).length.should == 2 
```

# html - 平移 Html5 画布而不重新渲染

> ID：11475856
> 
> 赞同：2
> 
> 时间：2012-07-13T18:01:39.300
> 
> 标签：html, canvas, panning

我想在我的 Html5 画布上平移而不必重新渲染，平滑过渡（不跳跃）。这可能吗？有代码示例吗？

如果可能的话，这也可以应用于缩放吗？

在低端系统（Windows 平板电脑）上运行时，我遇到了性能问题，其中平移只会占用过多的 CPU 并最终无法使用。范围是~2000 个图形对象。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T21:16:36.340

不幸的是，你不能在不重绘画布的情况下变换它。但是，如果真的只是绘制调用过多的问题，您可以渲染一次画布，缓存结果，然后在后续绘制时重绘缓存的图像。请注意，此方法无法很好地缩放超过 150%，具体取决于您绘制的实际内容。

我做了一个小提琴，展示了这可能是什么样的：

[http://jsfiddle.net/mobidevelop/sBvab/](http://jsfiddle.net/mobidevelop/sBvab/)

可能会有一点跳动，但通常比[不缓存图像](http://jsfiddle.net/mobidevelop/UeNYs/)要好。

你的旅费可能会改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:48:49.903

In short, no. You must redraw the scene if you want panning on the canvas, unless you're doing something bad, like using CSS to limit visible canvas size and your canvas is actually larger. (Don't do this, it isn't a performance gain).

But redrawing your canvas as you pan ought to be fast if you've written it well. If it is "jumpy", then odds are something else is wrong here.

The above is also true for zooming, especially if you want your vector paths/text/etc to scale.

# java - 处理 FTP 客户端中的“对等连接重置”错误

> ID：11475857
> 
> 赞同：4
> 
> 时间：2012-07-13T18:01:41.423
> 
> 标签：java, ftp, connection-reset

我有一个 Java 程序，它每天计算一些统计数据并通过 FTP 将文件上传到服务器上。但是，我经常收到“对等连接重置”错误。

由于我无法更改服务器配置，处理此类错误的推荐方法是什么？如何确保将整个文件传输到服务器？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T18:20:43.760

消息“Connection reset by peer”表示服务器关闭了连接。原因可能是 TCP 超时、磁盘空间不足、ETC。

1.  尝试使用 FTP 传输文件，而不使用 Java，使用命令行实用程序。
    如果出现同样的问题，肯定不是Java程序。

4.  确保网络对正在传输的文件的大小不敏感。

7.  确保服务器在已经建立“N”个先前连接或经过一定时间长度（例如 20 分钟）后没有阻止来自您的客户端的连接。

10.  查看您的客户端是否可以使用其他协议建立持久的 TCP 连接：SSH 等。
    如果其他协议也出现问题，则很可能是网络。

* * *

如果您发现问题是由仅在您的连接空闲时间过长时才会发生的超时引起的，请检查此 URL：

[FTP：“对等方重置连接”](http://www.cybertechhelp.com/forums/showthread.php?t=175395)

# python - 确定两个字典是否相等 Python 错误

> ID：11475858
> 
> 赞同：2
> 
> 时间：2012-07-13T18:01:48.487
> 
> 标签：python, runtime-error, equals, dictionary

我正在创建一个双链接结构，并且在比较两个节点是否相等时遇到了一些问题。该结构相当复杂，因为它具有多个属性，包括名称、行、列、右、左、上和下。如果两个节点相等，它们必须就所有这些属性达成一致。我知道在我的**eq**方法中，我可以简单地硬编码检查每个属性与另一个属性，但我认为会有一种更简单的方法来做到这一点，并找到了一种在大多数情况下都有效的方法。因此，我有以下内容：

```
def __init__ (self,row,col,name=None,up=None,down=None,left=None,right=None):
    self.name  = name
    self.row   = row
    self.col   = col
    self.up    = up
    self.down  = down
    self.left  = left
    self.right = right

def __eq__ (self, other):
    return vars(self) == vars(other) 
```

以及对此并不重要的各种其他方法。所以我确定是否两个节点的捷径基本上是查看它们变量的字典，然后让 python 比较两个字典的等价性。

这很好用！只要两个节点实际上相等。它返回 True，然后我继续愉快地使用我的代码。但是如果两个节点实际上不相等，它就会分崩离析。我明白了

```
File "*filename*", line 35 in __eq__ return vars(self) == vars(self) 
```

在屏幕上写了无数次，直到它最终说

```
RuntimeError: maximum recursion depth exceeded 
```

我知道有一些方法可以解决这个问题，即我可以显式检查每个属性，但这很糟糕，我想知道为什么这不起作用，以及是否可以轻松修复。我已经用其他更简单的字典测试了这种方法并且它有效，所以我的想法是这个问题与确定对象是否相等有关，但我不知道我可以在这里做什么。我意识到我也可以只做一个错误捕获然后让它返回 False 但除了这两个解决方案之外的其他解决方案将不胜感激，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:07:23.797

看起来您的 up、down 等都指向您班级的其他实例。

您的比较代码基本上是说，要测试 self == other，self.up == other.up 吗？self.up.up == other.up.up 吗？等等，然后递归直到空间用完。

您可能想要使用

```
def __eq__(self, other):
    return self.name == other.name \
        and self.row == other.row \
        and self.col == other.col \
        and self.up is other.up \
        and self.down is other.down \
        and self.left is other.left \
        and self.right is other.right 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:10:44.843

我手头没有python，但我想这就是发生的事情：

in the `__dict__`of`self`和 in the `__dict__`of`other`是对您的一个节点的引用，现在比较该节点是否相等（一旦一个来自 vars，一个来自另一个），这会导致调用您的比较方法。

如果您现在有一个循环（例如公共父级），您将获得无限递归：

`self.parent`在原始比较中：比较`other.parent`

`self.parent.child`在父比较中：比较`other.parent.child`

（`parent`并`child`参考您的`up`and `down`）

尝试（未经测试）：

```
def __eq__(self, other):
    for s, o in zip(vars(self),vars(other)):
        if not s is o and s != o:
            return False

    return True 
```

基本上是 Hugh Bothwell 的建议，只是循环。首先检查内存中是否有相同的对象，如果有，请不要比较它们，否则测试。

# asp.net - jQueryUI 对话框中的 TinyMCE 编辑器

> ID：11475869
> 
> 赞同：1
> 
> 时间：2012-07-13T18:02:29.923
> 
> 标签：asp.net, webforms, tinymce, jquery-ui-dialog, formview

我在 FormView 中有一个 ASP.NET 数据绑定文本框，我想在带有 TinyMCE 编辑器的 jQuery UI 对话框中显示它。我已经用附加的编辑器正确显示它

![在此处输入图像描述](../Images/70f8ca54e28da102ce0abf827b2eb8f0.png)

但是当表单被回发（保存到数据库中）时，编辑器中的文本会丢失并且不会被发布。

这是`<div>`我用于对话框的标记：

```
<span id="ExcessiveDutyOfCareWordingDialogLink" style="cursor: hand;">View/Edit Wording</span>
<div id="ExcessiveDutyOfCareWordingDialog" title="Excessive Duty Of Care Wording">
    <asp:TextBox runat="server" ID="ExcessiveDutyOfCareWordingTextBox" 
    Text='<%# Bind("ExcessiveDutyOfCareWording") %>' CssClass="richText" ClientIDMode="Static" />
</div> 
```

以及我用来初始化对话框和编辑器的Javascript，然后在`<span>`单击时实际显示它：

```
$('#ExcessiveDutyOfCareWordingDialog').dialog({ autoOpen: false, height: 300, width: 400, modal: true, resizable: false, buttons: {
        Save: function ()
        {
            // This is from an earlier attempt to fix this problem
            // it may be a red herring
            tinyMCE.triggerSave();
            $(this).dialog("close");
        },
        Cancel: function ()
        {
            $(this).dialog("close");
        }
    }
});

$('#ExcessiveDutyOfCareWordingDialogLink').click(function () 
{
    $('#ExcessiveDutyOfCareWordingDialog').dialog('open'); return false; 
});

$('.richText').tinymce({
    // Location of TinyMCE script 
    script_url: '/Scripts/tinymce.3.4.5/tiny_mce.js',
    theme: "advanced",
    theme_advanced_buttons1: "bold,italic,underline,strikethrough,|,cut,copy,paste,|,bullist,numlist,|,undo,redo",
    theme_advanced_buttons2: "",
    theme_advanced_buttons3: "",
    theme_advanced_buttons4: "",
    theme_advanced_toolbar_location: "top",
    theme_advanced_toolbar_align: "left",
    width: "100%",
    height: "20px"
}); 
```

谁能建议我可能做错了什么来解释为什么我会从编辑器中丢失文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T21:10:25.983

您提供的示例代码实际上存在两个问题：

1) jQuery 对话框实际上将 DOM 元素（`<div>`对话框的元素）从`<form>`渲染文档的标签中移出（您可以通过在渲染后查看页面源来确认）

除非您将`<div>`背面移到内部，否则您将在回发`<form>`时失去对话框内控件的值。

要解决这个问题，只需在 .dialog 函数定义之后添加以下代码行：

```
$('#ExcessiveDutyOfCareWordingDialog').parent().appendTo($("form:first")); 
```

2）“保存”按钮呈现为`<span>`单击时不会导致回发的按钮。如果你只是想触发回发，你可以简单地在页面的表单上调用 form.submit() 。

你的代码看起来像这样：

```
$('#ExcessiveDutyOfCareWordingDialog').dialog({
    autoOpen: false,
    height: 300,
    width: 400,
    modal: true,
    resizable: false,
    buttons: {
        Save: function () {
            $('form:first').submit();
            $(this).dialog("close");
        },
        Cancel: function () {
            $(this).dialog("close");
        }
    }
});

$('#ExcessiveDutyOfCareWordingDialog').parent().appendTo($("form:first")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:40:50.250

正如 solex 已经说过的那样，div 元素在 DOM 周围移动。Tinymce 不喜欢这样的动作，编辑器实例会被打乱，导致你的上下文丢失。

# java - JAX-WS Web 服务线程模型

> ID：11475876
> 
> 赞同：3
> 
> 时间：2012-07-13T18:03:11.107
> 
> 标签：java, multithreading, web-services, thread-safety, jax-ws

(1) 好吧，我对 JAX-WS Java Web 服务的线程模型感到很困惑。我读到它们不是线程安全的。那么他们应该如何服务多个并行请求呢？鉴于它总是已知的（大多数情况下），它们将同时被多个客户端调用。

(2) 应用服务器是否为每个请求创建一个新的 Web 服务实例（就像它维护一个无状态会话 bean 池，为请求分配一个，一旦请求完成，它就会返回到池中）。您能否在应用服务器控制台（GlassFish 或 JBoss 或 WebSphere）中配置该池大小。

（3）而且我还发现了@Threadsope 注释here，它为每个请求创建新线程。
[http://jax-ws-commons.java.net/thread-scope/](http://jax-ws-commons.java.net/thread-scope/)
这是一个不错的选择吗？我确信人们正在以其他标准方式解决线程安全和并行请求问题 - 请告知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:40:49.520

应用程序服务器包含一个 bean 池。
使用无状态会话 bean 时，不能保证您在使用会话时会获得相同的实例。
然而，正如我所提到的，bean 是由一个池管理的，在其中持有一个状态，这是一个坏主意。
不过，我认为 EJB bean 与您的需求没有任何关系。
请注意，在您提供的示例中，DataService 和连接都是根据请求创建的。这有点贵。
我会考虑仅将 ThreadLocal API 用于连接，并从连接池中获取它。
您可以通过阅读[ThreadLocal](http://veerasundar.com/blog/2010/11/java-thread-local-how-to-use-and-code-sample/)和[DB 连接池来自行实现这些。](http://commons.apache.org/dbcp/)

总而言之——我认为 EJB 在这里并不重要。
不要同时保留您的服务类和线程本地的字段，而只保留您将为每个请求分配的必要字段。（在您展示的示例中 - 这是连接）

# ios - “clang 意外退出”（xcode 崩溃）

> ID：11475877
> 
> 赞同：3
> 
> 时间：2012-07-13T18:03:18.937
> 
> 标签：ios, xcode, xcode4.3, clang, llvm-clang

当我尝试分析我的代码（产品 -> 分析）时，xcode 崩溃，标题为“clang quit unexpectedly”

> 进程：clang [10074] 路径：/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang 标识符：clang 版本：3.1 (318.0.61) 代码类型：X86-64 (Native)父进程：clang [10073]
> 
> 日期/时间：2012-07-13 18:46:29.862 +0100 操作系统版本：Mac OS X 10.7.4 (11E53) 报告版本：9
> 
> 自上次报告以来的间隔：140604 秒自上次报告以来崩溃：自上次报告以来每个应用程序崩溃 50 次：39 匿名 UUID：E974A614-4831-478E-8B68-8FE005A98F19
> 
> 崩溃的线程：0 调度队列：com.apple.main-thread
> 
> 异常类型：EXC_BAD_ACCESS (SIGSEGV) 异常代码：0x0000000000000000 处的 KERN_INVALID_ADDRESS
> 
> 靠近 0 的 VM 区域：--> __TEXT 000000010180f000-00000001029c8000 [17.7M] rx/rwx SM=COW /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang
> 
> 线程0失事::调度队列：com.apple.main线程0铛0x00000001018dc780铛::语句:: getSourceRange（）const的+ 16 1铛0x00000001021ce0c6 _ZL22getValidSourceLocationPKN5clang4StmtEN4llvm12PointerUnionIPKNS_15LocationContextEPNS_19AnalysisDeclContextEEE + 86 2铛0x00000001021ce5d3铛:: ento :: PathDiagnosticLocation :: genLocation（ clang::SourceLocation, llvm::PointerUnion) const + 35

我的客人是因为 LLVM 吗？我有**Apple LLVM 编译器 3.1**

谢谢！

编辑： *Xcode 版本 4.3.3 (4E3002)*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:48:40.347

我有一个文件在分析时总是崩溃。我提交了关于它的邻接报告，Apple 复制了这个错误 - 所以很明显他们已经知道一些错误。请注意，Xcode 4.4 将在一两周内与 llvm 4.0 一起发布，所以请稍等，如果您仍然遇到崩溃，请在 bug Reporter.apple.com 上输入错误报告

编辑：我的错误报告是针对 4.3.3

# java - Java：按照用户定义的函数生成随机数

> ID：11475882
> 
> 赞同：4
> 
> 时间：2012-07-13T18:03:25.967
> 
> 标签：java, math, random, statistics, user-defined

提前感谢您的帮助。

我需要创建遵循 Java 中用户定义函数的随机数。这样做的一般方法是通过对函数的积分应用均匀分布。问题是我需要创建无法积分的函数分布，或者积分非常复杂或混乱。

一个示例是生成遵循函数分布的随机数：

```
f(x) = (cos(x))^1.5 
```

Java中有没有可以定义函数并返回随机数的数学库？有什么建议吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:12:21.707

抱歉，如果我重复您已经知道的内容：

您需要用户定义（或近似）逆[CDF](https://en.wikipedia.org/wiki/Cumulative_distribution_function)。如果你不能计算它，我建议从你的分布中抽样，然后使用一个众所周知的分布来近似它。我不知道有任何库可以从 PDF 中为您执行此操作。一旦有了这个，您就可以创建一个从您的语言中的随机数生成器的统一随机性到函数的映射。当您生成一个随机数作为百分位数（例如 0.5 = 50% -> 正态分布的平均值）时，通过用户函数映射回该值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T21:34:27.953

另一种对分布进行采样的方法是在 PDF 的域和范围内（均匀地）选择一个随机点。如果该点低于 PDF 曲线，则返回它。否则丢弃它，然后重试。

这将比评估逆 CDF 慢，因为您必须多次采样。预期样本数为 2/( *D* · *R* )，其中*D*是域，*R*是 PDF 的范围。

```
abstract class Distribution {
    public abstract double PDF(double value);
    public abstract double getDomainMin();
    public abstract double getDomainMax();
    public abstract double getRangeMax();

    protected Random rnd;

    public Distribution() {
        rnd = new Random();
    }

    public double sample()
    {
        double left = getDomainMin();
        double right = getDomainMin();
        double top = getRangeMax();

        double x, y1, y2;
        while (true) {
            x = left + (right - left) * rnd.nextDouble();
            y1 = top * rnd.nextDouble();
            y2 = PDF(x);
            if (y1 <= y2) return x;
        }
        return Double.NaN;
    }
} 
```

# intellij-idea - 禁用文件名的 IntelliJ / RubyMine 拼写检查？

> ID：11475884
> 
> 赞同：0
> 
> 时间：2012-07-13T18:03:27.917
> 
> 标签：intellij-idea

我可能离这里很远，但 RubyMine 似乎正在检查我的文件名：

![RubyMine / IntelliJ 文件列表](../Images/6926a68e35a313241f3b04052423d24a.png)

问题是，我关闭了拼写检查。

某些目录名称也会出现这种情况，包括像“视图”这样的简单名称。

如何禁用此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T23:32:34.807

> 这不是拼写检查，这样的下划线表示这个文件里面有错误。

# python - python .replace() 正则表达式

> ID：11475885
> 
> 赞同：378
> 
> 时间：2012-07-13T18:03:50.237
> 
> 标签：python, regex

我正在尝试抓取`'</html>'`标签后的所有内容并将其删除，但我的代码似乎没有做任何事情。不`.replace()`支持正则表达式？

```
z.write(article.replace('</html>.+', '</html>')) 
```

* * *

## 回答 #1

> 赞同：623
> 
> 时间：2012-07-13T18:05:04.640

不会。Python 中的正则表达式由[`re`](http://docs.python.org/library/re.html)模块处理。

```
article = re.sub(r'(?is)</html>.+', '</html>', article) 
```

一般来说：

```
text_after = re.sub(regex_search_term, regex_replacement, text_before) 
```

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2017-01-03T16:02:54.007

为了使用正则表达式替换文本，请使用[re.sub](https://docs.python.org/3.1/library/re.html#re.sub)函数：

> 子（模式，repl，字符串[，计数，标志]）

它将用`pattern`作为传递的文本替换非重复实例`string`。例如，如果您需要分析匹配以提取有关特定组捕获的信息，则可以将函数传递给`string`参数。[更多信息在这里](https://docs.python.org/3.1/library/re.html#re.sub)。

**例子**

```
>>> import re
>>> re.sub(r'a', 'b', 'banana')
'bbnbnb'

>>> re.sub(r'/\d+', '/{id}', '/andre/23/abobora/43435')
'/andre/{id}/abobora/{id}' 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-13T19:01:50.527

您可以将该`re`模块用于正则表达式，但对于您想要的，正则表达式可能是矫枉过正的。我可能会尝试类似

```
z.write(article[:article.index("</html>") + 7] 
```

这要干净得多，并且应该比基于正则表达式的解决方案快得多。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-06-24T20:08:09.920

对于这种特殊情况，如果使用`re`模块是多余的，那么使用`split`（或`rsplit`）方法怎么样

```
se='</html>'
z.write(article.split(se)[0]+se) 
```

例如，

```
#!/usr/bin/python

article='''<html>Larala
Ponta Monta 
</html>Kurimon
Waff Moff
'''
z=open('out.txt','w')

se='</html>'
z.write(article.split(se)[0]+se) 
```

输出`out.txt`为

```
<html>Larala
Ponta Monta 
</html> 
```

# c# - 在 C#、.Net 4.0 中读取像素值时出现问题

> ID：11475889
> 
> 赞同：1
> 
> 时间：2012-07-13T18:03:57.487
> 
> 标签：c#, image-processing, aforge

我正在学习 C#，我正在尝试在图像处理示例上做我的作业。我正在尝试沿灰度 jpeg 图像中的水平线读取像素值。我制作的一些打印件告诉我，我正在阅读 Format8bppIndexed 图像（这让我有点惊讶，因为我认为 jpeg 图像根本不使用调色板）。在 windows 窗体中以适当的控件加载图像的代码是这样的：

```
 try
  {
       myImage = ( Bitmap ) Image.FromFile(imageName);
  }
  catch
  {
    MessageBox .Show("Unable to load the image" , Text, MessageBoxButtons .OK, MessageBoxIcon .Hand);
  }
  pictureBox1.Image = myImage ; 
```

然后我尝试在按下按钮时沿着图像中的任意直线路径读取像素，将它们列在 csv 文件中。我假设，作为灰度级图像，读取红色就足够了（是吗？其他颜色分量是相等的；在我看来，使用 getBrightness 有点过分了）：

```
 cursorStartx = 0;
  cursorStarty = 256;
  cursorEndx   = myImage.Width;
  cursorEndy   = 256;
  Color pixel;

StreamWriter fs = new StreamWriter( "pixels.csv" , true );
for (var i = 0; i < cursorEndx; i++)
{
  pixel = myImage.GetPixel(i, cursorStarty);
  fs.WriteLine( String .Format("{0}; {1}; {2}" , i, cursorStarty, pixel.R));
}
fs.Close(); 
```

在读取文件中的横截面时，我看到根本没有意义的值：它们都是 17 的倍数（？？？）：

```
0; 256; 17
1; 256; 0
2; 256; 17
3; 256; 0
4; 256; 17
5; 256; 0
6; 256; 17
7; 256; 0
8; 256; 17
9; 256; 0
10; 256; 17
............
66; 256; 17
67; 256; 34
68; 256; 51
69; 256; 68
70; 256; 85
71; 256; 85
72; 256; 102
73; 256; 85 
```

在同一程序中制作的直方图在 17 的倍数处显示明显不同的计数峰值 (????)

只是为了进行现实检查，我使用模块 GD 在 Perl 中做了类似的事情（我在 perl 方面有更多经验，我只是在学习 C#），并且在同一图像中读取相同路径上的像素，我得到非常不同的价值观。

imageJ 的直方图 drwan 的第一行如下：

```
0   0
1   0
2   1
3   1
4   15
5   81
6   304
7   984
8   2362
9   206144
10  2582
11  1408
12  653
13  451
14  345
15  321
16  277
17  288 
```

一个完全不同的故事。

有人可能会向我解释我在做什么非常愚蠢的错误？

非常感谢

------------------------------------ 稍后编辑 ------------- -------------------------

事情变得有趣起来。**使用用 C# 编写的Aforge**图像实验室读取相同的图像，我得到了同样的错误：直方图显示像素值的离散计数是 17 的倍数。用 Java 编写的**ImageJ**读取图像，我得到一个正确的直方图. 现在我想弄清楚是否有办法使用 C# 以某种方式管理图像读取，以便能够获得正确的值，或者这是一个主要问题，替代方案是：放弃或放弃执行某种低级图像读取（jpeg 格式的硬东西......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:15:47.377

在将 4bpp 通道转换为 8bpp 通道时，17 的倍数实际上很常见。0x00, 0x11, 0x22 ... 0xFF 都是 17 的倍数。

在我看来，您有一个带有抖动的量化 16 色灰度图像。

# ajax - jQuery AJAX 加载方法 - 延迟

> ID：11475891
> 
> 赞同：1
> 
> 时间：2012-07-13T18:04:04.167
> 
> 标签：ajax, jquery

我承认我是一个非常新的 Web 开发人员（只编码了大约一年），尤其是在 JS / jQuery 方面是绿色的。

我构建的特定网页根据悬停在某些类别上加载不同的数据：乡村俱乐部、度假村、酒店等。当我在本地计算机上构建网站时，javascript 功能非常快。但是，在实时站点上，数据交换发生之前有很长的延迟。

网址是： http: [//preferredparkingsolutions.com/client_list.html](http://preferredparkingsolutions.com/client_list.html)

哪个链接到 javascript 函数： http: [//preferredparkingsolutions.com/scripts/clientHover.js](http://preferredparkingsolutions.com/scripts/clientHover.js)

它通过从文本文件中提取数据来替换显示 div (#client_list)。

有没有更好/更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T18:09:30.080

是的，这可以通过预先加载内容并缓存它来优化。目前，您正在为每次悬停都执行 HTTP 请求 - 即使用户之前已经将鼠标悬停在该元素上，因为 AJAX 响应没有被缓存。这样做将是你最快的胜利。

但是，我根本看不到任何将内容放在外部的情况。您是否有任何理由反对将内容物理地放在页面中并仅使用显示/隐藏方法？这有很多好处 - 搜索引擎优化，一方面，因为谷歌会找到内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T18:13:54.240

这是您正在加载的外部页面[http://preferredparkingsolutions.com/client_list.inc.html](http://preferredparkingsolutions.com/client_list.inc.html)内容看起来很小，看起来像是一个静态页面，那么为什么不预先加载所有内容，然后隐藏和显示 div 呢？正如 Utkanos 建议的那样，您还将获得 SEO 好处以及每次悬停时的 HTTP 请求。如果您仍然想从外部加载它，请加载一次并缓存它并使用缓存的版本来隐藏和显示 div。

# iphone - 如何实现高级表格视图标题

> ID：11475897
> 
> 赞同：2
> 
> 时间：2012-07-13T18:04:25.513
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uitableview

我有一个分组的`UITableView`. 现在与默认的表格视图标题不同，我的标题应该在单个单元格*旁边：*

标准：

```
[Header Cell]
[Item 1]
[Item 2] 
```

我需要的

```
+-------+----------------+
|       |  Item 1a       |
|  h1   +----------------+
|       |  Item 1b       |
+ - - - +----------------+
|          Item 1c       |
+------------------------+
|       |  Item 2a       |
|  h2   +----------------+
|       |  Item 2b       |
+------------------------+
|       |  Item 3a       |
|  h3   +----------------+
|       |  -placeholder- |
+-------+----------------+ 
```

一些备注：

*   H1组有3个项目
*   H2组有两个项目
*   H3 组只有一个项目（我必须插入一个占位符单元格，以便标题单元格可以具有两个项目单元格的完整高度
*   当用户滚动列表时，标题应该向上推，两个标题单元格不重叠。

这里的挑战是标题单元格的高度：

*   如果我将高度设置为 0 并取消选中`clip subviews`，则显示标题单元格，但不会在正确的位置被推开。
*   如果我将标题单元格的高度设置为视觉高度，那么在我不想要的表格的整个宽度上*都有一个该高度的空白空间......*

**更新 1：**我刚刚意识到苹果使用这样的列表进行搜索（按消息、邮件、联系人、日历等分组）。所以我的问题基本上是如何调整`UITableView`才能表现得像分组搜索结果...... :-)

[![](../Images/ac8ef37a32a5fbcf91c1effd873fb1d2.png)](https://i.stack.imgur.com/fFz1E.jpg)
[（来源：[mshcdn.com](http://6.mshcdn.com/wp-content/uploads/2010/08/2photo.jpg)）]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T22:03:18.787

**更新：**我在 github 上创建了一个项目，正是这样做的。我已将行为的所有相关代码提取到两个类（[`BBFloatingHeaderViewController`](https://github.com/besi/FloatingTableViewHeader/blob/master/BBFloatingHeaderTableViewController.h)& [`BBFloatingHeaderCell`](https://github.com/besi/FloatingTableViewHeader/blob/master/BBFloatingHeaderCell.h)）中。还有一个示例项目。我希望这对其他人有用:-)

这是项目：[besi/FloatingTableViewHeader](https://github.com/besi/FloatingTableViewHeader)

这是自述文件的摘录：

> # 浮动 UITableView 标头
> 
> 这些类旨在复制 iOS 内置 Spotlight 搜索中的行为，其中搜索结果按类别分组，相应类别的图标浮动在搜索结果的左侧。
> 
> ## 设置
> 
> 查看示例项目，了解如何设置类。
> 
> 1.  将和的`.m`+`.h`文件添加到您的项目中。`BBFloatingHeaderViewController``BBFloatingHeaderCell`
> 2.  创建一个 TableView 并将 ViewController 的 Class 设置为您的子类`BBFloatingHeaderViewController`
> 3.  在 IB 中创建标题单元并将其类设置为您的子类`BBFloatingHeaderCell`
> 4.  确保您的浮动标题视图是`BBFloatingHeaderCell`视图层次结构中的最顶层视图。
> 
> ## 结果
> 
> [浮动标题 http://i.minus.com/jyea3I5qbUdoQ.png](http://i.minus.com/jyea3I5qbUdoQ.png)

# java - 在java中使用终端来打包.apk文件

> ID：11475903
> 
> 赞同：0
> 
> 时间：2012-07-13T18:04:52.437
> 
> 标签：java, automation, terminal, apk

我正在创建一个程序，该程序将自动打包、签名和安装 apk 文件。

下面列出了 3 个终端命令，我不确定如何将它们放入我的 Java 程序中。这部分程序必须能够打开终端，调用这些命令，并且在某一时刻允许用户从 Java IDE 输入密码。

```
 aapt package -u -f -F "/home/jay/testing_FILES.apk" "/home/jay/testing_FILES"

  jarsigner -verbose -digestalg SHA1 -sigalg MD5withRSA -keystore my-release-key.keystore "/home/jay/testing_FILES.apk"

 zipalign -f -v 4 "/home/jay/testing_FILES.apk" "/home/jay/filesystem.apk" 
```

有谁知道如何让这些通过 JAVA IDE 运行？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:26:53.360

假设您可以通过命令行获取密码并以某种方式将其作为命令执行过程的一部分进行修补，然后您可以调用 use`Runtime.exec()`从您的 java 程序中调用这些函数。您可以查阅[javadoc 以获取有关此选项的更多信息](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#exec(java.lang.String[]))

另一种选择是使用[Plexus Utils](http://plexus.codehaus.org/plexus-utils/apidocs/org/codehaus/plexus/util/cli/package-summary.html)。看看这个[stackoverflow链接](https://stackoverflow.com/a/882837/1168372)

# jquery - 用jQuery中的变量改变动画方向

> ID：11475904
> 
> 赞同：0
> 
> 时间：2012-07-13T18:05:02.643
> 
> 标签：jquery

我搜索了这个主题并找到了一些回复，但它们似乎不适用于我的代码。我的部分代码是这样的：

```
var direction = "left";
var speedvar = 3000;
var container_w = parseInt($("#lr-s").width());

$("#lr-s ul#"+number).animate({"left": "-="+container_w}, speedvar, "linear", function() {}); 
```

如果我手动设置方向，它可以正常工作，但是当我这样做时：

```
$("#lr-s ul#"+number).animate({direction: "-="+container_w}, speedvar, "linear", function() {}); 
```

放置“方向”变量 dosnt 似乎有效。我需要改变方向（“左”、“右”、“下”、“上”），所以改变符号 -= for += dosnt 适合我。我也试过：

```
var settings = {};
settings[direction] = container_w;
$("#lr-s ul#"+number).animate(settings, speedvar, "linear", function() {}); 
```

和

```
var settings = {"left": "-="+container_w};
$("#lr-s ul#"+number).animate(settings, speedvar, "linear", function() {}); 
```

没有任何东西适用于方向的变量。手动更改方向可以，但我想设置一个变量来简化插件用户的方向更改。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:55:08.253

以下是一些使它起作用的注意事项：

1）使用动态分配的属性名称构建对象的正确方法：

```
var settings = {};
settings[direction] = scrollAmount;
$("#lr-s ul#"+number).animate(settings, speedvar, "linear", function() {}); 
```

2）不要忘记在开始动画“相反”属性后重置当前动画属性。如果将两个相反的属性分配给一个元素，浏览器会使用“优先”属性来定位该元素。这意味着“左”属性胜过“右”，“上”胜过“下”。

```
$('#bullet').css('left', ''); 
```

这是一个示例：html：

```
<div style="position:relative; margin-top:100px; height:100px; background-color:Yellow;">
    <p id="ship" style="position:absolute;">ship</p>
</div>

<button type="button" onclick="Anim.changeDir();">change direction</button> 
```

脚本：

```
 $(function () {
        Anim.start('left', '+=500');
    });

    var Anim = {

        lastDir: 'left',
        lastShift: '+=500',

        $el: function () {
            return $('#ship');
        },

        start: function (dir, shift) {

            dir = dir || (this.lastDir == 'left' ? 'right' : 'left');
            shift = shift || this.lastShift;

            var prop = {};
            prop[dir] = shift;
            this.$el().animate(prop, 5000);

            if (this.lastDir) {
                this.$el().css(this.lastDir, '');
            }

            this.lastDir = dir;
            this.lastShift = shift;
        },

        stop: function () {
            this.$el().stop();
            return this;
        },

        changeDir: function () { 
            this.stop();
            this.start();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T08:37:51.207

```
switch (direction){
        case 'right':
            jQuery(element).animate({ 'right': offset }, 500, 'easeOutCubic');
            break;
        default:
            break;
    } 
```

# ruby-on-rails-3 - 当前在 Rails 中下载大文件的方法

> ID：11475907
> 
> 赞同：1
> 
> 时间：2012-07-13T18:05:06.397
> 
> 标签：ruby-on-rails-3

我曾经使用 Obie Fernandez 概述的方法下载文件：

[http://www.therailsway.com/2009/2/22/file-downloads-done-right/](http://www.therailsway.com/2009/2/22/file-downloads-done-right/)

但是这种方式有点过时了所以好奇什么更好？我担心如果您有多个客户端下载大文件，则会占用太多内存。

我需要伪装 S3 url 并控制谁可以下载什么。也许这种方法仍然很好，或者流式传输是要走的路。

提前致谢。

# python - multiprocessing.Array求和问题

> ID：11475909
> 
> 赞同：2
> 
> 时间：2012-07-13T18:05:15.087
> 
> 标签：python, python-2.7

所以我有这个基本上对数组求和的程序。我使用了多处理，因为程序必须分析 700,000 左右的行。下面我制作了一个小脚本来说明我遇到的问题

```
import multiprocessing as mp
import numpy as np
import ctypes

t = range(100000)

list_1 = np.zeros((10))

for i in t:
    list_1 += np.array([1]*10)

list_t = mp.Array(ctypes.c_double, 10)
list_2 = np.ctypeslib.as_array(list_t.get_obj())
list_2 = list_2.reshape(10)

# No copy was made
assert list_2.base.base is list_t.get_obj()

def proc(x):
    global list_2
    list_2 += np.array([1]*10)

if __name__ == '__main__':
    pool = mp.Pool(processes = 6)
    pool.map(proc,t) 
```

其中的输出：

```
In [2]: list_1
Out[2]: 
array([ 100000.,  100000.,  100000.,  100000.,  100000.,  100000.,
        100000.,  100000.,  100000.,  100000.])

In [3]: list_2
Out[3]: 
array([ 55828.,  65441.,  99300.,  68068.,  78774.,  78514.,  82393.,
        83446.,  82854.,  86987.]) 
```

显然我希望两个数组都像 list_1。这里发生了什么？

# html - li 边框不围绕元素

> ID：11475913
> 
> 赞同：1
> 
> 时间：2012-07-13T18:05:33.570
> 
> 标签：html, css

我试图建立一个没有成功的菜单。我正在尝试为我的所有 li 元素设置边框，但边框一直保持在底部。如何在我的 li 元素周围转动边框？

看看我的代码：http: [//jsfiddle.net/KByqr/](http://jsfiddle.net/KByqr/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T18:08:41.803

设置一个`border-width`。A `border-width`, `border-color`, 和`border-style`是必要的。IE：`border:1px solid black;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:08:13.577

### `-bottom`从这两行中删除：

```
border-bottom-style: solid;
border-bottom-width: medium; 
```

### 使他们：

```
border-style: solid;
border-width: medium; 
```

### 小提琴：http: [//jsfiddle.net/KByqr/2/](http://jsfiddle.net/KByqr/2/)

# r - R中是否有“移动”命令（相当于<-后跟rm）？

> ID：11475915
> 
> 赞同：4
> 
> 时间：2012-07-13T18:05:44.193
> 
> 标签：r

这是那些“必须有这个功能”的问题之一。这没什么大不了的，但它只是很烦人，每次我重命名一个对象时，我都想知道是否有更好的方法。

假设我将一个我创建的对象大写并意识到我宁愿让它不大写：

```
# Create test data
X <- runif(100)
# Rename the object
x <- X
rm(X) 
```

有没有一种单一的方式来做到这一点（这也避免了由于内存/速度原因而重新复制）？在各种包中命名了一些命令`rename`，但它们都适用于列表中的元素，而不是列表（或其他对象）本身。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T18:32:23.270

我不知道执行此操作的内置方法，但您可以轻松编写自己的函数来执行这些操作。例如，这只是在没有任何检查以确保对象存在或是否已经存在名为您要重命名的对象的情况下进行。

```
mv <- function(x, y){
    x_name <- deparse(substitute(x))
    y_name <- deparse(substitute(y))

    assign(y_name, x, pos = 1)
    rm(list = x_name, pos = 1)
    invisible()
} 
```

一些示例使用

```
> x <- 3
> x
[1] 3
> y
Error: object 'y' not found
> mv(x, y)
> x
Error: object 'x' not found
> y
[1] 3 
```

* * *

编辑：对于那些没有遵循评论中的链接的人，这里是 Rolf Turner 编写的版本，它进行了一些检查以确保我们要移动的对象确实存在，并询问我们是否要覆盖现有对象，如果新名称中已经有一个对象。

```
mv <- function (a, b) {
    anm <- deparse(substitute(a))
    bnm <- deparse(substitute(b))
    if (!exists(anm,where=1,inherits=FALSE))
        stop(paste(anm, "does not exist.\n"))
    if (exists(bnm,where=1,inherits=FALSE)) {
        ans <- readline(paste("Overwrite ", bnm, "? (y/n) ", sep = ""))
        if (ans != "y")
            return(invisible())
    }
    assign(bnm, a, pos = 1)
    rm(list = anm, pos = 1)
    invisible()
} 
```

# go - Golang 中奇怪的类型定义语法（名称，然后是类型，然后是字符串文字）

> ID：11475917
> 
> 赞同：39
> 
> 时间：2012-07-13T18:05:50.690
> 
> 标签：go

我一直在尝试找出如何使用 mgo（Go 的 MongoDB 驱动程序），我遇到了这个结构声明：

```
type Something struct {
    Id bson.ObjectId "_id,omitempty"
    Name string
} 
```

我不太了解第一个元素（Id）的语法。我知道它被声明为 type `bson.ObjectId`，但是字符串文字在那里做什么？

我的问题不是关于 mgo 驱动程序的功能，
而是关于这种奇怪的`<name> <type> <string_literal>`语法。

我在 Go 规范上找不到任何东西，我也不知道如何用谷歌搜索。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-07-13T18:12:23.373

[语言规范的](http://golang.org/ref/spec)[结构类型](https://golang.org/ref/spec#Struct_types)部分对此进行了解释：

> 字段声明后面可以跟一个可选的字符串文字 *标签*，它成为相应字段声明中所有字段的属性。标签通过 [反射界面](https://golang.org/pkg/reflect/#StructTag)可见，但在其他方面被忽略。

```
// A struct corresponding to the TimeStamp protocol buffer.
// The tag strings define the protocol buffer field numbers.
struct {
    microsec  uint64 "field 1"
    serverIP6 uint64 "field 2"
    process   string "field 3"
} 
```

# javascript - 在 jQuery 中是否可以在字符串之间添加条件逻辑

> ID：11475918
> 
> 赞同：0
> 
> 时间：2012-07-13T18:05:58.323
> 
> 标签：javascript, jquery, if-statement, for-loop, conditional-statements

我正在添加一些条件逻辑来检查数组中的元素，如果它们存在，则使用 JS 生成的标记添加类来执行此操作。有没有办法在两个字符串（作为标记从 JS 输出）之间添加条件逻辑来减少一些冗余的条件逻辑？

```
for (var i=0; i<data.length; i++) {
        var gallery = data[i];

        if (typeof gallery.showcase !== "undefined") {
            if (typeof gallery.video !== "undefined") {
                $(
                "<li class='video "  + (typeof gallery.video !== "undefined" ? "test ") + gallery.showcase + "'>" +
                    "<a href='" + gallery.link + "'></a>" +
                "</li>").appendTo("#gallery ul");   
            }
            else {
                $(
                "<li class='image " + gallery.showcase + "'>" +
                    "<a href='" + gallery.link + "'>" + 
                        "<img src=" + gallery.image + " alt='" + gallery.title + "'>" +
                    "</a>"
                + "</li>").appendTo("#gallery ul"); 
            }       
        }
        else {
            if (typeof gallery.video !== "undefined") {
                $(
                "<li class='video'>" +
                    "<a href='" + gallery.link + "'></a>" + 
                "</li>").appendTo("#gallery ul");   
            }
            else {
                $(
                "<li class='image'>" +
                    "<a href='" + gallery.link + "'>" + 
                        "<img src=" + gallery.image + " alt='" + gallery.title + "'>" +
                    "</a>"
                + "</li>").appendTo("#gallery ul"); 
            }       
        }
    } 
```

我希望以更简洁的方式将类添加到 JS 生成的标记中进行条件检查。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:40:52.803

你有*很多*重复——你可以通过识别常见的字符串或元素并稍微重构代码来实现你所需要的。

```
for (var i = 0; i < data.length; i++) {
    var gallery = data[i];

    var isImage = (typeof gallery.video === 'undefined');

    var $li = $('<li>', {'class': isImage ? 'image' : 'video'});
    if (typeof gallery.showcase !== 'undefined') {
        $li.addClass(gallery.showcase);
    }

    var $a = $('<a>', {href: gallery.link});
    if (isImage) {
        $('<img>', {src: gallery.image, alt: gallery.title}).appendTo($a);
    }       

    $li.appendTo('#gallery ul').append($a);
} 
```

我不是 100% 确定这是正确的（老实说，原始代码有点难以解析），但它应该大致展示你将如何解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:00:50.377

Here's another way to build the tags:

```
for (var i = 0; i < data.length; i++) {

    var gallery = data[i];
    var isShowCase = typeof gallery.showcase !== "undefined";
    var isVideo = typeof gallery.video !== "undefined";

    var $li = $('<li><a><img /></a></li>');

    if (isShowCase) {
        if (isVideo) {
            $li.addClass('video ' + gallery.showcase + (isVideo ? ' test' : '')).find('a').attr('href', gallery.link);
        }
        else {
            $li.addClass('image ' + gallery.showcase).find('a').attr('href', gallery.link).find('img').attr({ src: gallery.image, alt: gallery.title });
        }
    }
    else { 
        ....
    }

    $li.appendTo('#gallery ul');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T18:14:44.443

您应该使用 .attr 和 .prop 等 jquery 方法来定义 jquery 对象的属性和属性，而不是字符串连接。

这不仅是最佳实践，而且会消除您的冗余代码：（这只是一个示例，我意识到它不符合您的要求，这是您自己弄清楚的：P）

```
var li = $('<li>');

if (typeof gallery.video !== "undefined") {
    li.addClass('video');
} else {
    li.addClass('image');
}
// etc etc etc
li.appendTo("#gallery ul"); 
```

另请注意，javascript 没有块范围，因此您`var gallery`在同一范围内踩踏先前的声明。

# visual-studio-2010 - 使用 Visual Studio 进行版本控制，单个项目是否应该有自己的版本控制？

> ID：11475924
> 
> 赞同：0
> 
> 时间：2012-07-13T18:06:14.010
> 
> 标签：visual-studio-2010, version-control

我目前有一个解决方案范围的版本控制。是最佳实践，还是对解决方案中的每个项目进行版本控制更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:16:48.327

为每个项目使用不同的版本会更加努力，只有在需要时才应该这样做。例如，这些项目由不同的解决方案使用，并且可能以您必须独立支持的不同版本发布。

如果所有这些都不适用，请坚持为所有项目使用一个版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:14:51.780

每个人可能都有自己的处理方式。就个人而言，我会保持版本控制解决方案的广泛性，除非单个项目能够在没有其他解决方案的情况下独立存在。

# python - IronPython 启动非常缓慢

> ID：11475925
> 
> 赞同：2
> 
> 时间：2012-07-13T18:06:14.570
> 
> 标签：python, ironpython

我在 Windows 7 上启动 IronPython 2.7.3，它需要超过 15 秒。为什么这么慢？以及如何解决？电脑是三星NP300E5A(Celeron B800,2gb)笔记本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T18:42:25.917

IronPython 启动缓慢有几个原因。

首先，如果您不使用安装程序（它将生成程序集），JIT 编译器必须将 IronPython 程序集从 MSIL 字节码转换为本机代码，这需要时间，因为它有很多代码。因此，使用安装程序手动生成程序集。

其次，实际的 Python 代码也是 JIT 编译的，虽然不会马上减少惩罚；当所有 Python 代码都是 JITted 时，启动时间会更糟。.NET JIT 不够快，我不喜欢。

最后，它不是笔记本电脑的强国。也就是说，即使在我配备 SSD 的四核上，也需要几秒钟才能开始。

IronPython 的启动时间得到了很大改善，以至于现在真的很难进一步优化 - 分析很难（样本量小）并且没有明显的胜利。不幸的是，现在它是“统一的慢代码”。

IronPython 目前的优势在于 JIT 可以获得一些重大胜利的长期运行的流程，而不是在它更多是障碍的短期流程中。

# c++ - 将 OpenMP 与 C++ 结合使用的算法库

> ID：11475931
> 
> 赞同：5
> 
> 时间：2012-07-13T18:06:25.057
> 
> 标签：c++, multithreading, parallel-processing, openmp, thrust

我在 GNU/Linux 桌面上使用带有 GCC 的 C++ 编程语言。我正在尝试在 C++ 中实现一些 PRAM 并行算法。据我了解，在多核 CPU 上使用 OpenMP 或多或少有助于模拟 CREW PRAM 算法。

许多复杂的 PRAM 算法涉及并行前缀求和、排序、对全局地址空间中的向量执行元素明智操作等操作。

不知何故，在谷歌搜索大约 15 分钟后，似乎没有提供此功能的库，即一些开箱即用的基本并行算法或数据结构，如标准模板库。

任何人都可以列出任何这样的库吗？

编辑：本质上，我需要的是与 CUDA 世界中使用的 Thrust 库类似的 OpenMP。[http://thrust.github.com/](http://thrust.github.com/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T19:16:31.853

Thrust 支持通过 OpenMP 或 TBB 在多核上并行执行，以及通过 CUDA 在 GPU 上并行执行。从[网站](http://thrust.github.com/)：

> Thrust 是一个类似于 C++ 标准模板库 (STL) 的并行算法库。Thrust 的高级接口极大地提高了程序员的工作效率，同时实现了 GPU 和多核 CPU 之间的性能可移植性。与现有技术（如 CUDA、TBB 和 OpenMP）的互操作性有助于与现有软件的集成。使用 Thrust 快速开发高性能应用程序！

以下是有关如何访问 Thrust 的多核功能的一些附加[信息。](https://github.com/thrust/thrust/wiki/Device-Backends)

# google-apps-script - 谷歌电子表格到谷歌日历格式日期

> ID：11475932
> 
> 赞同：1
> 
> 时间：2012-07-13T18:06:34.150
> 
> 标签：google-apps-script, google-sheets, google-calendar-api

我在谷歌脚本中使用 createEvent。

我无法添加事件，因为脚本没有正确读取电子表格中日期列的格式。

我需要一种格式为“2012 年 8 月 10 日 08:00:00”。但是当我检查我的日期时间的变量是由我的电子表格设置的时，格式包括星期几并且是完全错误的。我在电子表格中使用了格式选项，但这似乎只是一个视图控件，不会影响它的实际存储方式。

如何格式化我的电子表格以匹配 createEvent 函数所期望的格式？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T05:08:36.247

`CalendarApp.createEvent()``startTime`和`endTime`参数都需要一个 Date 对象。因此，电子表格中日期的文本格式并不重要——只要引用的单元格包含**date**。

```
var s = SpreadsheetApp.getActiveSheet();
var eventDate = s.getRange("B17").getValue(); // August 10, 2012 08:00:00, a date

var eventTitle = "Example";
var eventDetails = "Details";

//Get the calendar
var cal = CalendarApp.getCalendarsByName('Calendar-Name')[0];//Change the calendar name
var eventStartTime = eventDate;
//End time is calculated by adding an hour in the event start time 
var eventEndTime = new Date(eventDate.valueOf()+60*60*1000);
//Create the events
cal.createEvent(eventTitle, eventStartTime,eventEndTime ,{description:eventDetails}); 
```

如果引用的单元格包含纯文本，则格式必须是 javascript Date 对象构造函数可以理解的格式。事实证明，您显示的格式是可以接受的，尽管由于没有明确说明时区，它将默认为电子表格的区域设置。这是您可以对上面的示例进行的一项更改：

```
// You could optionally generate a date object from the string representation
// HOWEVER createEvent() is smart enough to handle the string itself
var eventStartTime = new Date(eventDate); 
```

如果您想进行实验，请查看 Waqar Ahmad关于该主题的[教程。](https://sites.google.com/site/appsscripttutorial/calendar-services/create-calendar-events-by-submitting-form)我能够通过粘贴您的示例日期字符串（2012 年 8 月 10 日 08:00:00）来创建一个事件。教程中的应用程序脚本代码盲目地根据从日历弹出窗口中选择的日期或键入的文本字符串创建日期对象。*[注意教程代码中有错字，`evenDate`应阅读`eventDate`。]*

# .net - IL 泛型 - 使用 !T 与 !0 时存在哪些规则？

> ID：11475935
> 
> 赞同：8
> 
> 时间：2012-07-13T18:06:50.343
> 
> 标签：.net, generics, cil

我正在编写一个 IL 静态分析工具，但我很难理解管理如何引用泛型类型参数的规则：

取这个 IL（来自[`IList<T>`界面](http://msdn.microsoft.com/en-us/library/5y536ey6.aspx)）：

```
.property instance !T Item(
    int32 index
)
{
    .get instance !0 System.Collections.Generic.IList`1::get_Item(int32)
    .set instance void System.Collections.Generic.IList`1::set_Item(int32, !0)
} 
```

为什么是`!0`there 而不是`!T`？我认为就虚拟机而言它们是等效的，当您保证拥有名称时，使用位置引用似乎很奇怪。

**更新：**另一个案例，来自 KeyedCollection.ctor：

```
IL_0037:  newobj instance void class System.Collections.Generic.Dictionary`2<!TKey,!TItem>::'.ctor'(class System.Collections.Generic.IEqualityComparer`1<!0>)
IL_003c:  stfld class System.Collections.Generic.Dictionary`2<!0,!1> class System.Collections.ObjectModel.KeyedCollection`2<!0,!1>::dictionary 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T18:49:00.143

In the [Common Language Infrastructure standard](http://msdn.microsoft.com/en-us/netframework/aa569283.aspx), [Partition II - Metadata and File Format](http://download.microsoft.com/download/1/5/4/1546A0C9-A650-4CE4-B056-36EC09C4CFC0/Partition_II_Metadata.zip), clause 7.1 "Types" it states:

```
Type ::=        Description
--------        -----------
'!'             Generic parameter in a type definition, accessed by index from 0 
```

So short answer: because it's in the spec.

Long answer: This is speculation on my part, but basically, most IL commands are stack-based and use positional references as parameters all the time. That said, it makes sense that positional references are used for generics, in order to maintain common patterns/usage mechanisms in IL.

# php - 基于日期和url的PHP图像交换

> ID：11475939
> 
> 赞同：0
> 
> 时间：2012-07-13T18:07:09.267
> 
> 标签：php, background-image

我的目标是根据星期几和用户来自的链接换出背景图像。

例子：

星期一，index.php = bg1.jpg

星期一，about.php = bg2.jpg

星期二，index.php = bg3.jpg

星期二，about.php = bg4.jpg

这是我处理本周情况的开关，但不知道如何从这里开始：

```
<?php

// Variables
$url = "images/days/";
$monImage = "$url"."bg_mon_a.jpg";
$tueImage = "$url"."bg_tue_a.jpg";
$wedImage = "$url"."bg_wed_a.jpg";
$thurImage = "$url"."bg_thu_a.jpg";
$friImage = "$url"."bg_fri_a.jpg";
$weekendImage = "$url"."bg_default.jpg";
$d = date("D");
//Function that switches between date images based on the actual day of the week in $d
switch ($d)
{
case Mon:
echo "<img id='bg_image' src=$monImage>\n";
break;
case Tue:
echo "<img id='bg_image' src=$tueImage>\n";
break;
case Wed:
echo "<img id='bg_image' src=$wedImage>\n";
break;
case Thu:
echo "<img id='bg_image' src=$thurImage>\n";
break;
case Fri:
echo "<img id='bg_image' src=$friImage>\n";
break;
default:
echo "<img id='bg_image' src=$weekendImage>\n";
}
//End
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:17:25.997

要让点击链接进入您的站点，您正在寻找`HTTP_REFERRER`存储在`$_SERVER`变量中的 。

尝试回显：`echo $_SERVER['HTTP_REFERRER'];`您将看到将该人发送到您的网站的网站 URL。

我认为这就是你要问的，但如果不是，你需要再澄清一点。

现在就图像而言：

```
$img='bg_'.strtolower(date("D")).'_a.jpg'; 
```

只需确保将周末图像名称更改为`sat`和`sun`。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:13:29.193

我认为你把它复杂化了。

```
$bgimage = 'bg_' . date ("D") . '.jpg';
echo '<img src="images/' . $bgimage . '">'; 
```

然后只需确保您有 7 个文件，每天一个：

```
bg_Mon.jpg
bg_Tue.jpg
etc... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T18:14:28.110

试试这个：

```
echo "<img id='bg_image' src='images/days/bg_". strtolower(date("D")) ."'>\n"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T18:19:59.983

如果它是你想要的背景图片，也许你需要类似的东西

```
echo "<div id='div_with_background' style='background: url($weekendImage)'>\n";
echo 'some content';
echo '</div>'; 
```

此外，如果您想测试用户来自的链接，请打开开关，`$_SERVER['HTTP_REFERER']`但请记住，`$_SERVER['HTTP_REFERER']`不能保证用户来自的真实网址。

# excel - 使用 c# 4.0 与 excel 交互的最佳方式是什么？

> ID：11475940
> 
> 赞同：0
> 
> 时间：2012-07-13T18:07:13.510
> 
> 标签：excel, c#-4.0

现在我正在研究，所以我不确定要求是什么。就目前而言，我需要将序列化和反序列化数据导入/从 excel 中导入。我不想使用 3º 方库，即使它们是开源的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:12:58.430

```
OleDbConnection con = new OleDbConnection(
            "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=MyFile.xls;Extended Properties=\"Excel 8.0;HDR=Yes;IMEX=1\";");

OleDbDataAdapter myCommand = new OleDbDataAdapter(" SELECT * FROM [sheet1$]", con); 
```

我使用 Type OleDbConnection 创建到 Excel 文件的连接。然后我们可以像普通数据库一样查询工作表。

试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:13:11.563

查看 Microsoft.Office.Interop.Excel 命名空间。

# c# - 通过 Process.Start() 打开时收到错误“应用程序已停止工作”

> ID：11475941
> 
> 赞同：-1
> 
> 时间：2012-07-13T18:07:19.783
> 
> 标签：c#, .net

我有一个第 3 方软件包。它的文件夹包含`.exe`要运行的文件和运行应用程序所需的一些其他文件。当我手动打开应用程序时，它工作正常，但是当我尝试通过打开同一个应用程序时`Process.Start()`，我收到错误“应用程序已停止工作”。

该应用程序需要 .NET 4.0 框架才能执行，所以我必须安装它。我尝试运行它的 C# 代码位于 .NET 3.5 上，并且是使用 Visual Studio 2008 创建的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:19:49.570

您可以尝试以下方法：

```
 var path = @"C:\Temp\test.exe";
    FileInfo fi = new FileInfo(path);

    ProcessStartInfo info = new ProcessStartInfo(path);
    info.WorkingDirectory = fi.DirectoryName;

    Process process = new Process();
    process.StartInfo = info;

    process.Start(); 
```

如果这不起作用，请尝试

```
Directory.SetCurrentDirectory(fi.DirectoryName); 
```

直接在`process.Start();`

之后不要忘记重置当前目录！之前保存 CurrentDirectory

```
var currentDirectory = Directory.GetCurrentDirectory(); 
```

# grails - Grails 的 Quartz 作业只触发一次

> ID：11475944
> 
> 赞同：5
> 
> 时间：2012-07-13T18:07:24.123
> 
> 标签：grails, quartz-scheduler

我正在尝试使用[Quartz 插件](http://grails.org/plugin/quartz)在我的 Grails Web 应用程序中设置一个 cron 作业。我目前只是尝试使用以下代码每秒执行一次测试作业：

```
class TestJob {
    private int counter = 0
    static triggers = {
        simple repeatInterval: 1000
    }

    def execute() {
        // execute job
        counter += 1
        System.out.println("Testing the cron " + counter)
    }
} 
```

但是，当我运行该应用程序时，我只看到`execute()`两次第一次调用的初始输出：一次是在我收到服务器正在运行的警报之前，一次是之后。

```
| Loading Grails 2.1.0
| Configuring classpath.
| Environment set to development.....
| Packaging Grails application.....
| Compiling 1 source files.....
| Running Grails application
Testing the cron 1
| Server running. Browse to http://localhost:8080/QuartzTest
Testing the cron 1 
```

有谁知道为什么我的 Quartz 工作可能无法正确触发？我尝试过使用 cron 而不是 simple 以及使用不同的参数、时间间隔等。没有什么不同。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-13T19:42:47.693

我想我有类似的问题。您不得`System.out.println`在石英作业中使用。尝试使用`log.error`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:54:42.077

简单触发器有一个 repeatCount 字段。将其设置为 -1 以无限期执行：

```
simple name: "testName", repeatInterval: 1000, repeatCount: -1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T18:16:19.937

在文档中，所有示例`name`在 triggers 块中都有一个参数：

```
static triggers = {
      simple name: "testName", repeatInterval: 1000      
} 
```

我会先试一试，尽管文档还说如果没有给出默认值，将使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-07T15:58:38.520

我有同样的问题并得出了这个结论：

您可以在 Quartz Job 中使用 System.out.println。您必须将带有打印行的方法与执行方法分开。我只调用一种方法没有运气，但是当调用另外两种方法时，它会正确地重复打印行：

```
class TestJob {
    static triggers = {
    simple name: 'testTrigger', startDelay: 1000, repeatInterval: 1000, repeatCount: -1
    }

    def execute() {
        exampleMethod()
        anotherMethod()
    }

    def exampleMethod(){
        System.out.println("test")
    }

    def anotherMethod(){
        System.out.println("another method")
   }
} 
```

这是输出：

```
| Loading Grails 2.1.1
| Configuring classpath.
| Environment set to development.....
| Packaging Grails application.....
| Compiling 2 source files.....
| Running Grails application

Configuring Spring Security UI ...
... finished configuring Spring Security UI

Configuring Spring Security Core ...
... finished configuring Spring Security Core

test
another method
| Server running. Browse to http://localhost:8080/
test
another method
test
another method
test
another method
test
another method
test
another method 
```

希望这对某人有帮助！

# php - 如何在 JQuery 中创建图像调色板

> ID：11475945
> 
> 赞同：0
> 
> 时间：2012-07-13T18:07:26.747
> 
> 标签：php, javascript, jquery

我正在尝试创建一个 jquery 图像调色板，它可以拖放到存储这些图像对象的 div 中。图像调色板充当工具构建器或工具选择器。在我的项目中，我没有任何构建区域。我只需要选择一个图像对象并将其拖到存储这些图像对象的 div 中。我想问是否有任何 JQuery 插件或任何具有类似功能的教程，或者是否有人可以帮助如何继续前进。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:25:19.577

这不应该太难建立自己：

1.  将调色板中的所有图像放入 jQuery UI Draggables
2.  使您的存储 div 成为 jQuery UI Droppable。
3.  为您的应用连接事件和逻辑
4.  喝杯冰镇啤酒，收工：-)

# jquery - Breifly 在使用 jQuery 设置新的 src 后看到旧图像

> ID：11475949
> 
> 赞同：0
> 
> 时间：2012-07-13T18:07:46.410
> 
> 标签：jquery, image, fade

我想要

1.  淡出图像
2.  预加载替换图像
3.  更改图像源以显示新图像
4.  淡入（新）图像

出于某种原因，虽然当图像淡入时，有一个非常短暂的时刻，旧图像被看到然后被新图像取代。我不认为这是图像操作之间的时间冲突......还有什么会导致这种闪烁？

```
// old image: about.jpg
// new image: contact.jpg

$('#content').fadeTo(1500, 0.01, function(){
    var container = $(this);

    // gather image information
    var src = img.parent().attr('href');
    imgData = { 'alt': img.attr('alt'), 'src': src, 'cap': '' };

    // change background image & caption (after image has been cached)
    var imgSrc = sanitizeBackgroundImage( imgData );
    $.get( imgSrc, function(data) {

        // set background image src to preloaded image
        $("#content>img").attr({"src": imgData.src});
        $("#content>img").attr({"alt": imgData.alt});

        // update caption text
        $('#bottom-caption').html('<span>' + imgData.cap + '</span>');

        // fade image container back in
        console.log( 'before fadeIn: ' + $("#content>img").attr("src") );
        container.fadeTo(750, 1);                   
    });
}); 
```

控制台正确读取

```
before fadeIn: /images/large/contact.jpg 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:20:43.400

您可以尝试在图像加载时开始淡入吗？我认为淡入是在图像完全加载和显示之前开始的。

```
$("#content>img").load(function() { $('#content').fadeTo(750, 1); });

$('#content').fadeTo(1500, 0.01, function(){ 
  var container = $(this); 

  // gather image information 
  var src = img.parent().attr('href'); 
  imgData = { 'alt': img.attr('alt'), 'src': src, 'cap': '' }; 

  // change background image & caption (after image has been cached) 
  var imgSrc = sanitizeBackgroundImage( imgData ); 
  $.get( imgSrc, function(data) { 

    // set background image src to preloaded image 
    $("#content>img").attr({"src": imgData.src}); 
    $("#content>img").attr({"alt": imgData.alt}); 

    // update caption text 
    $('#bottom-caption').html('<span>' + imgData.cap + '</span>');  
  }); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:23:18.580

您的图像不会*立即*被替换，因为浏览器需要一些时间来加载图像数据，然后才会替换旧的*。*等到图像将被加载，然后执行您的`fadein`.

# sql - 迁移问题：从 Windows Server 2003/SQL Server 2000 到 Windows Server 2008 R2/SQL Server 2012 的 ASP 经典应用程序中出现错误“80040e14”

> ID：11475950
> 
> 赞同：0
> 
> 时间：2012-07-13T18:07:50.473
> 
> 标签：sql, asp-classic, migration

首先我想让你知道我不是工程师，我只是一个网页设计师，在我的工作范围内工作。我们有一堆在 Windows server 2003 / SQL 2000 环境中运行的 ASP 经典应用程序。该公司购买了一台带有 Windows server 2008R2 和 SQL 2012 的新服务器，他们给了我将应用程序迁移到新服务器的任务。几周以来，我阅读并阅读了很多关于此的手册和文档，除了其中一个应用程序之外，我完成了我的任务。该应用程序生成并创建和接口以回答调查。这很奇怪，因为登录页面有效：输入用户名并通过，然后进入管理区域，存储在数据库中的选项显示没有问题，但是当我尝试进入调查回答时，浏览器给了我这个：

> 用于 ODBC 驱动程序的 Microsoft OLE DB 提供程序错误“80040e14”
> 
> [Microsoft][ODBC SQL Server Driver][SQL Server]'@errno' 附近的语法不正确。
> 
> /SEL/Encuesta/preguntatodo_nuevo.asp，线 108

这是我在 /SEL/Encuesta/preguntatodo_nuevo.asp, línea 108 中找到的内容：

```
sSQL = "Update UsuariosClima set NumCuestContestados = NumCuestContestados+1 Where IDUsuario = " & IDUsuario
conn.Execute(sSQL) 
```

我知道仅凭这些信息很难帮助我，所以如果您需要更多数据，请告诉我。我不想让你做我的工作，如果有人能引导我走向正确的方向，我会自己继续。非常非常感谢你。

请记住：我不是工程师，像小时候一样给我解释。

**更新 - UsuariosClima 中的触发器：**

**tD_Usuarios：**

```
ALTER trigger tD_Usuarios on dbo.UsuariosClima for DELETE as

begin
declare  @errno   int,
       @errmsg  varchar(255)

if exists (
  select * from deleted,AccesoCuestionarioClima
  where

    AccesoCuestionarioClima.IDUsuario = deleted.IDUsuario
)
begin
  select @errno  = 30001,
         @errmsg = 'Cannot DELETE "Usuarios" because "AccesoCuestionario" exists.'
  goto error
end

if exists (
  select * from deleted,AccesoClienteClima
  where

    AccesoClienteClima.IDUsuario = deleted.IDUsuario
)
begin
  select @errno  = 30001,
         @errmsg = 'Cannot DELETE "Usuarios" because "AccesoCliente" exists.'
  goto error
end

if exists (
  select * from deleted,PertenenciaClima
  where

    PertenenciaClima.IDUsuario = deleted.IDUsuario
)
begin
  select @errno  = 30001,
         @errmsg = 'Cannot DELETE "Usuarios" because "Pertenencia" exists.'
  goto error
end

update RespuestaCuestionariosClima
  set

    RespuestaCuestionariosClima.IDUsuario = NULL
  from RespuestaCuestionariosClima,deleted
  where

    RespuestaCuestionariosClima.IDUsuario = deleted.IDUsuario

return
error:
raiserror @errno @errmsg
rollback transaction
end 
```

**tU_Usuarios：**

```
ALTER trigger tU_Usuarios on dbo.UsuariosClima for UPDATE as
begin
  declare  @numrows int,
       @nullcnt int,
       @validcnt int,
       @insIDUsuario int,
       @errno   int,
       @errmsg  varchar(255)
  select @numrows = @@rowcount

  if

    update(IDUsuario)
  begin
    if exists (
      select * from deleted,AccesoCuestionarioClima
      where

    AccesoCuestionarioClima.IDUsuario = deleted.IDUsuario
)
begin
  select @errno  = 30005,
         @errmsg = 'Cannot UPDATE "UsuariosClima" because "AccesoCuestionarioClima" exists.'
  goto error
end
  end

  if

update(IDUsuario)
  begin
if exists (
  select * from deleted,AccesoClienteClima
  where

    AccesoClienteClima.IDUsuario = deleted.IDUsuario
)
begin
  select @errno  = 30005,
         @errmsg = 'Cannot UPDATE "UsuariosClima" because "AccesoClienteClima" exists.'
  goto error
end
  end

  if

update(IDUsuario)
  begin
if exists (
  select * from deleted,PertenenciaClima
  where

    PertenenciaClima.IDUsuario = deleted.IDUsuario
)
begin
  select @errno  = 30005,
         @errmsg = 'Cannot UPDATE "UsuariosClima" because "PertenenciaClima" exists.'
  goto error
end
  end

  if

update(IDUsuario)
  begin
update RespuestaCuestionariosClima
  set

    RespuestaCuestionariosClima.IDUsuario = NULL
  from RespuestaCuestionariosClima,deleted
  where

    RespuestaCuestionariosClima.IDUsuario = deleted.IDUsuario
end

return
error:
raiserror @errno @errmsg
rollback transaction
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T23:54:31.983

我把答案放在这里是为了让它更明显。谢谢。

由于他们正在迁移到 SQL Server 2012，因此两个触发器（更新和删除）都应该从 RAISERROR 更改为 THROW 要做到这一点，他应该将行（在两者中）更改为 THROW @errno, @errmsg,2; - 鬼

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:04:14.280

乍一看，我相信您描述的第一个错误可能只不过是 tU_Usarios 触发器中调用 raiserror 的语法错误。我相信这在上面的“第 108 行”中反映为错误，因为更新是导致错误的原因，但是调用 RAISERROR 的代码将问题冒泡回原始语句。当更新发生时，触发器触发，在被捕获的触发器代码中发生错误，但是当控制传递给调用 RAISERROR 的代码时，在“@errno”处出现语法错误。

我相信 RAISERROR 的参数需要以逗号分隔的列表提供，包含在括号内等。我相信参数的最小数量是三个 - 一个消息 ID 或字符串，后跟一个严重性代码，然后是一个状态代码. 大多数情况下，最后两个值最终分别为 16 和 1。

# vb.net - 如何使用 Oledb 适配器/命令在 VB.net 中向 MS Access 2003 表中插入行？

> ID：11475951
> 
> 赞同：0
> 
> 时间：2012-07-13T18:07:55.470
> 
> 标签：vb.net, ms-access, oledb, dataadapter

我创建了一个用于管理联系人的表单，例如电话簿，因此我在 MS Access 2003 中创建了近 12 个字段，其中包括作为主键的 ID（自动编号），当将数据（从用户那里获得）插入表中时，概率是。

```
Imports System.Data.OleDb
Public Class FrmMain

    Private Sub FrmMain_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        connection_open()
    End Sub
    Dim adp As OleDbDataAdapter
    Dim dt As DataTable

    Private Sub BtnSave_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles BtnSave.Click
        Dim sql As String

        sql = "insert into TblContacts (FName, Company, Contact_1, Contact_2, Address, Email_1, Email_2, Web, SNS, Date_Saved, Cont_Image) values ('" & TxtFName.Text & "' ,'" & TxtCompany.Text & "','" & TxtCont_1.Text & "','" & TxtCont_2.Text & "','" & TxtAddress.Text & "','" & TxtEmail_1.Text & "','" & TxtEmail_2.Text & "','" & TxtWeb.Text & "','" & TxtSNS.Text & "',#" & TxtDate.Text & "#,'" & TextBox10.Text & "')"

        Try
            adp = New OleDbDataAdapter
            adp.InsertCommand = New OleDbCommand(sql, con)
            adp.InsertCommand.ExecuteNonQuery()

            MsgBox("Saved Successfully!")

        Catch ex As Exception

            MsgBox(ex.ToString)

        End Try
    End Sub

    Private Sub ToolStripButton3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ToolStripButton3.Click
        Try
            dt = New DataTable
            adp = New OleDbDataAdapter("Select * from TblContacts", con)
            adp.Fill(dt)

            DataGridView1.DataSource = dt

        Catch ex As Exception

            MsgBox(ex.Message)

        End Try
    End Sub

    'Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
    '    ToolStripTextBox2.Text = Now
    'End Sub

End Class

**Connection Module:**

Imports System.Data.OleDb

Module connection_module

    Public con As New OleDbConnection
    Public Sub connection_open()
        Try
            If con.State = ConnectionState.Open Then
                con.Close()
            End If
            con.ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & Application.StartupPath & "\Contacts.mdb"
            con.Open()

        Catch ex As Exception

            MsgBox(ex.Message)

        End Try
    End Sub
End Module 
```

[https://picasaweb.google.com/105381696083885067883/VBNet?authuser=0&authkey=Gv1sRgCPvqiqCrjqCAfQ&feat=directlink](https://picasaweb.google.com/105381696083885067883/VBNet?authuser=0&authkey=Gv1sRgCPvqiqCrjqCAfQ&feat=directlink)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T18:26:07.840

名称和图像是MS Access 中的[保留字](http://support.microsoft.com/kb/321266)，需要用括号括起来`[name]`

Date_Saved 真的是文本吗？如果不是，分隔符是#，而不是'

而且，或者当然，@Lars 点。

最后，您[可能需要考虑使用参数](http://www.daniweb.com/software-development/vbnet/threads/357613/vb.net-code-to-insert-data-into-ms-access-database-with-parameters)或[传递参数来查询 Access 数据库](https://stackoverflow.com/questions/7472563/passing-parameter-to-query-for-access-database)

# javascript - 加载后jQuery不运行“if”

> ID：11475953
> 
> 赞同：0
> 
> 时间：2012-07-13T18:08:04.683
> 
> 标签：javascript, if-statement, coffeescript

我所有的 js 脚本都在工作，但这不起作用

```
 $("img").each(function() {
      if ($(this).height() > 100) {
        return $(this).after("<p class='tasr'>FOTO © TASR</p>");
      }
    }); 
```

当我加载页面时，它不起作用，但是当我复制这个脚本做 chrome-console 时，它​​工作得很好。

我的咖啡脚本：

```
jQuery $(document).ready -> 
    $("img").each ->
        if $(this).height() > 100
            $(this).after("<p class='tasr'>FOTO © TASR</p>") 
```

编辑：

这是我的脏代码：[我来自咖啡脚本的 javascript 代码](http://pastebin.com/f70wM6Ls)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T18:13:44.030

这可能是由于图像尚未完成加载，因此返回的高度和宽度为 0。

您可能希望`.load()`在图像上使用函数，该函数将在图像加载后触发，因此宽度和高度将大于 0。

这也可以解释为什么它在 chrome 控制台中工作，因为那时图像已经加载。

**编辑：@zzzzBov 在下面的评论中提到的值得注意的一点是，浏览器中的缓存通常会在标准刷新时停止调用加载函数的图像。为了解决这个问题，您只需要一个包含所有代码的函数，您可以从 .load 函数和文档就绪函数内部调用该函数**

如果这是您的 html：

```
<img id="img1" src="example.jpg" /> 
```

然后你可以在你的脚本中写一些类似的东西。请注意，这不在我的脑海中，所以它可能有点错误。

```
function doStuff() {
    //I normally do a check here to see if the image width/height is 0 if it is then I dont bother
    //executing the rest

    //I do however sometimes need to do stuff when the image has not yet loaded which can be done here.

    //do stuff with the image, you could also pass parameters if needed.
}

$(document).ready(function() {
    doStuff();
});

$('#img1').load(function() {
    doStuff();
}); 
```

# mono - 编译错误构建 Mono 。安装了 2.10，抱怨我需要 2.4？

> ID：11475954
> 
> 赞同：2
> 
> 时间：2012-07-13T18:08:11.907
> 
> 标签：mono, centos

我正在尝试在 CentOS 上构建单声道。我在没有正确的 yum 存储库时遇到了问题，但是因为我已经从 Suse rpms 手动安装了 rpm。工作正常。有关版本，请参见下面的输出：

```
 root@localhost mcs]# mono --version
   Mono JIT compiler version 2.11.2 (tarball Thu Jul 12 03:04:31 EDT 2012)
   Copyright (C) 2002-2012 Novell, Inc, Xamarin Inc and Contributors. www.mono-project.com
    TLS:           __thread
    SIGSEGV:       altstack
    Notifications: epoll
    Architecture:  x86
    Disabled:      none
    Misc:          softdebug 
    LLVM:          supported, not enabled.
    GC:            Included Boehm (with typed GC and Parallel Mark)
   [root@localhost mcs]# gmcs --version
   Mono C# compiler version 2.10.6.0
   [root@localhost mcs]# mcs --version
   Mono C# compiler version 2.10.6.0 
```

当我尝试编译最新的单声道时，我得到以下输出......嗯？它看到我有它和版本，然后抱怨它不是 2.4+ .. 任何人都可以帮我解决这个问题吗？

```
Bootstrap compiler: Mono C# compiler version 2.10.6.0
make[5]: *** [build/deps/basic-profile-check.out] Error 1
make[5]: Leaving directory `/root/mono2/mono/mcs'
*** The compiler 'gmcs' doesn't appear to be usable.
*** You need Mono version 2.4 or better installed to build MCS
*** Read INSTALL.txt for information on how to bootstrap a Mono installation.
make[4]: *** [do-profile-check] Error 1
make[4]: Leaving directory `/root/mono2/mono/mcs' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-06T21:28:37.007

跑步：

```
make get-monolite-latest 
```

为我解决了这个问题。

# javascript - 关于时间堆积条形图的图表插件有什么建议吗？

> ID：11475957
> 
> 赞同：0
> 
> 时间：2012-07-13T18:08:15.303
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, highcharts

我一直在寻找一个用于时间跟踪的图表插件，即。发动机时间跟踪图表如下图： ![在此处输入图像描述](../Images/cf17a714f2f2ca00dda530d3217b9c7b.png)

一点解释：

*绿色/红色/灰色*表示*引擎开启/引擎关闭/不可用* *横轴*是每天的*时间线* *纵轴*是*每一天*

我只是展示一个例子，并期待这里有人对这种图表插件有任何想法。我不确定[HighCharts 堆叠条形图](http://www.highcharts.com/demo/bar-stacked)是否可以做到这一点，因为我想要一个状态切换条形图，而不是累积的。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T11:46:43.263

您可以尝试使用柱形范围图或与日期时间类型的轴堆叠。

[http://www.highcharts.com/demo/columnrange](http://www.highcharts.com/demo/columnrange)

[http://api.highcharts.com/highcharts#xAxis.type](http://api.highcharts.com/highcharts#xAxis.type)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:20:20.977

您应该能够在 Flotr（它具有比 highcharts 更好的许可证）中执行此操作，只需将它们在[此博客文章](http://www.2general.com/blog/2012/05/30/flot_stacked_bar_chart.html)中显示的内容放在一边。

# ruby-on-rails - 当 col 在 Firefox SQLite 管理器中创建为 BOOL 时，布尔值未正确保存在 rails 3.1.4 的 sqlite3 中

> ID：11475958
> 
> 赞同：0
> 
> 时间：2012-07-13T18:08:16.357
> 
> 标签：ruby-on-rails, sqlite

在我们的 rails 3.1.4 应用程序中，表记录中有一个`canceled`列。最初`canceled`在 Firefox SQLite 管理器中创建为 BOOL，这是软件提供的默认类型。在`canceled = false`rails 中，`false`被保存到 col 的记录表中`canceled`​​。问题是使用 查询时，未选择带有as`Record.where("canceled = ?", false)`的记录，因为在 sqlite3 中未将其解释为 FALSE。为了选择 all = false，我们必须这样做。`canceled``false``false``canceled``Record.where("canceled =? OR canceled =?", false, 'false')`

在我们在 SQLite 管理器中手动将数据类型`canceled`从 BOOL 更改为 'boolean' 后，可以使用as`Record.where("canceled =? ", false)`获取新创建的记录。在 SQLite 管理器中，这些值表示为被 rails 解释为 FALSE。`canceled``f``canceled``f`

如何修复表记录（使用 'false' 表示`canceled`）以便`Record.where("canceled =? ", false)`有效？非常感谢。

更新：在 rails 控制台中查询表记录时，`canceled`不表现为布尔值（真或假）。所有带有`false`in 列的记录都不能被或`canceled`拾取。但是返回的 .class仍然在 rails 控制台中。奇怪，不是吗？`Record.where("canceled =?", true)``Record.where("canceled =?", false)``canceled``FalseClass`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:15:33.293

```
UPDATE my_table
   SET canceled = true -- or 1 check the table
 WHERE canceled = 'true'

UPDATE my_table
   SET canceled = false
 WHERE canceled = 'false' 
```

**编辑：**

试试这个

```
my_model.update_all( {:canceled => true}, {:canceled => 'true'} )
my_model.update_all( {:canceled => false}, {:canceled => 'false'} ) 
```

# jquery - 使用 Jquery 从 XML 文件中获取第二个元素的列表

> ID：11475961
> 
> 赞同：0
> 
> 时间：2012-07-13T18:08:55.620
> 
> 标签：jquery, xml

我有一个 xml 文件，我只想从列表中读取二级元素。例如，我想要一个仅包含以下车辆的列表

车辆编号：“180”，类型：“BUS” 车辆编号：“190”，类型：“BUS”............

这是我的xml格式

```
<departures> 
 <station> 
  <vehicle> 
   <number>180</number> 
   <type>BUS</type> 
 </vehicle> 
 <vehicle> 
   <number>190</number> 
   <type>BUS</type> 
 </vehicle> 
 </station> 
 <station>  
 <vehicle> 
  <number>290</number> 
  <type>BUS</type> 
 </vehicle> 
 <vehicle> 
   <number>380</number> 
   <type>BUS</type> 
  </vehicle> 
 </station> 
<departures> 
```

这是javascript部分

```
$(document).ready(function(){
            $.ajax({
                type: "GET",
                url: XML_PATH,
                dataType: "xml",
                success: function(xml) {
                $("#update-target").empty();
                $(xml).find("station").each(function () {
                      $("#update-target").append('<ul>');                        
                        $(this).find("vehicle").each(function () {
                         var number = $(this).find('number').text();
                         var type = $(this).find('type').text();
                            $("#update-target ul").append('<li>' + type + number + '</li>');
                        });
                    });
                    },  
        });
    }); 
```

在运行上面的代码时，我没有得到任何输出。请问什么是正确的方法来做到这一点。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:24:52.030

The code in your question always appends the current list item to all the `<ul>` elements under `#update-target`, because that's what `#update-target ul` matches.

That does not explain why you're not getting any output at all, but your comment indicates you might want to have a solution for this problem too.

A simple answer is to use the [:last](http://api.jquery.com/last-selector/) selector to only append list items to the last `<ul>` element:

```
$("#update-target ul:last").append("<li>" + type + number + "</li>"); 
```

To elaborate a little more, you can also try using another paradigm. You want to build DOM elements from the XML markup you receive, which means you want to project some data (XML markup) into other data (DOM elements). In this situation, [map()](http://api.jquery.com/map/) can be used instead of [each()](http://api.jquery.com/each/) to project data instead of iterating over it, which is closer to functional programming:

```
$(document).ready(function() {
    $.ajax({
        type: "GET",
        url: XML_PATH,
        dataType: "xml",
        success: function(xml) {
            $("#update-target").empty()
                               .append($(xml).find("station").map(function() {
                return $("<ul>").append($(this).find("vehicle").map(function() {
                    var $this = $(this);
                    return $("<li>").text($this.find("type").text()
                        + $this.find("number").text());
                }));
            }));
        }
    });
}); 
```

This way, you don't have to bother matching the current `<ul>` element in the first place, as it becomes part of your current context.

# shell - 为什么 zsh 将 ~/.zshrc 中的新行 (^M) 作为命令读取？

> ID：11475962
> 
> 赞同：2
> 
> 时间：2012-07-13T18:09:03.530
> 
> 标签：shell, terminal, newline, zsh, zshrc

我不确定我做了什么弄乱了我的 zsh 配置，但是每次我尝试运行 zsh 时，我都会收到以下消息，然后是默认主题：

```
/Users/danny/.zshrc:3: command not found: ^M
/Users/danny/.zshrc:9: command not found: ^M
/Users/danny/.zshrc:13: command not found: ^M
/Users/danny/.zshrc:16: command not found: ^M
/Users/danny/.zshrc:19: command not found: ^M
/Users/danny/.zshrc:22: command not found: ^M
/Users/danny/.zshrc:25: command not found: ^M
/Users/danny/.zshrc:28: command not found: ^M
/Users/danny/.zshrc:32: command not found: ^M
/Users/danny/.zshrc:33: command not found: ^M
/Users/danny/.zshrc:source:34: no such file or directory: /Users/danny/.oh-my-zsh^M/oh-my-zsh.sh^M
/Users/danny/.zshrc:35: command not found: ^M
danny% 
```

我尝试删除 .zshrc 和 .oh-my-zsh 并通过 brew 重新安装 oh-my-zsh 但我仍然遇到同样的问题。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T18:10:40.500

因为 CR 不被视为换行符，只有 LF。在您的文件上使用`dos2unix`，并且只能使用可以区分的文本编辑器对其进行编辑。

# sql - 恢复sa密码

> ID：11475970
> 
> 赞同：37
> 
> 时间：2012-07-13T18:09:30.330
> 
> 标签：sql, sql-server-2008-r2

我有一台被另一名员工使用的电脑。

已安装 SQL Server 2008 R2，但我不知道“sa”密码。

当我尝试更改登录名时，出现以下错误。

> 无法更改登录“sa”，因为它不存在或您没有权限。

当我尝试恢复数据库时，它会给出不同的权限错误。

（当我进入 Security --> Logins --> sa --> Properties windows authentication is disabled.）

我可以改变它吗？

PS：密码不是“密码” :)

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-07-13T18:15:38.710

最好的方法是通过连接域/本地管理员来简单地重置密码（因此您可能需要系统管理员的帮助），但这仅在 SQL Server 设置为允许本地管理员时才有效（这些现在不在设置期间的默认管理员组）。

如果您无法使用此方法或其他现有方法来恢复/重置 SA 密码，此处解释了其中一些方法：

*   [容灾：SQL Server 2005 SA账号密码丢失怎么办](https://web.archive.org/web/20191007012923/https://blogs.msdn.microsoft.com/raulga/2007/07/13/disaster-recovery-what-to-do-when-the-sa-account-password-is-lost-in-sql-server-2005/)
*   [有没有办法可以在 sql server 2005 中检索 sa 密码](https://stackoverflow.com/questions/196150/is-there-a-way-i-can-retrieve-sa-password-in-sql-server-2005)
*   [如何在 Microsoft SQL Server 2008 R2 上恢复 SA 密码](http://v-consult.be/2011/05/26/recover-sa-password-microsoft-sql-server-2008-r2/)

然后，您可以随时备份重要数据库、卸载 SQL Server 并安装新实例。

您还可以搜索不那么严格的方法来做到这一点（例如，我不热衷于分享密码破解程序）。

顺便说一句，登录属性`sa`永远不会说 Windows 身份验证。这是设计使然，因为这是一个 SQL 身份验证帐户。这并不意味着在实例级别禁用 Windows 身份验证（实际上不可能这样做），它只是不适用于 SQL 身份验证帐户。

我写了一篇关于使用[PSExec](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)连接到使用该`NT AUTHORITY\SYSTEM`帐户的实例的提示（它适用于 < SQL Server 2012），以及一个后续说明如何破解 SqlWriter 服务（它可以在更现代的版本上运行）：

*   [恢复对 SQL Server 实例的访问](http://www.mssqltips.com/sqlservertip/2682/recover-access-to-a-sql-server-instance/?utm_source=AaronBertrand)
*   [有关恢复对 SQL Server 实例的访问的更多信息](https://www.mssqltips.com/sqlservertip/4672/more-on-recovering-access-to-a-sql-server-instance/?utm_source=AaronBertrand)

以及其他一些资源：

*   [在系统管理员被锁定时连接到 SQL Server](https://docs.microsoft.com/en-us/sql/database-engine/configure-windows/connect-to-sql-server-when-system-administrators-are-locked-out)

*   [利用服务 SID 登录到具有系统管理员权限的 SQL Server 实例](https://www.0xsql.com/2012/01/12/leveraging-service-sids-to-logon-to-sql-server-2012-2014-and-new-2016-instances-with-sysadmin-privileges/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T18:27:48.807

[Dmitri Korotkevitch](http://social.msdn.microsoft.com/Forums/en-US/sqlgetstarted/thread/16706dec-209f-42c4-8dc7-4ee4dd5df482/)撰写的最佳答案：

> 说到安装，SQL Server 2008 允许您在安装过程中设置身份验证模式（Windows 或 SQL Server）。如果您在安装过程中选择 sql server 身份验证模式，您将被迫为 sa 用户选择强密码。
> 
> 如果您使用 Windows 身份验证模式安装 SQL Server 并想要更改它，您需要做 2 件不同的事情：
> 
> 1.  转到 SQL Server 属性/安全选项卡并将模式更改为 SQL Server 身份验证模式
>     
>     
> 2.  转到安全/登录，打开 SA 登录属性
>     
>     
> 
> 一种。如果您决定使用弱密码，请取消选中“强制密码策略”和“强制密码过期”复选框
> 
> 湾。为 SA 用户分配密码
> 
> C。打开“状态”选项卡并启用登录。
> 
> 我不需要提到上面的每个操作都会违反安全最佳实践，建议使用 Windows 身份验证模式、禁用 sa 登录并使用强密码，尤其是用于 sa 登录。

# rest - 如何使用 Google Apps Script ContentService 作为 REST 服务器

> ID：11475972
> 
> 赞同：0
> 
> 时间：2012-07-13T18:09:35.897
> 
> 标签：rest, google-apps-script

我有一项在 Google Apps 脚本中创建 json 响应的服务

```
function doGet(e) {
   return ContentService
            .createTextOutput(mcpher.getRestLibrary().serialize())
            .setMimeType(ContentService.MimeType.JSON);
} 
```

这可以在[mcpher.com上找到](https://script.google.com/a/macros/mcpher.com/s/AKfycbzLqpnQ2ey8CKAMmzchb2n2FU-aiae0iTKPzAOfAgEpxGwaJgk/exec)

当我在浏览器或 firefox RESTclient 上运行它时，它会给出正确的响应。但是，当我在 VBA 中使用 httpGET 时，或者在 Google Apps 脚本中的示例中

```
function restTest() {
  var x = UrlFetchApp.fetch("http://script.google.com/a/macros/mcpher.com/s/AKfycbzLqpnQ2ey8CKAMmzchb2n2FU-aiae0iTKPzAOfAgEpxGwaJgk/exec");
  mcpher.DebugPrint(x);
} 
```

我得到了这个回复..就像一个登录请求

```
{"0":"\n<html dir=\"ltr\" >\n<head>\n  <meta name=\"robots\" content=\"noindex,nofollow\" />\n  <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\n  <title>mcpher.com</title>\n  <script type=\"text/javascript\">\n  <!--\n    // Keep login page from being trapped in iframes.\n  ... etc... 
```

该脚本设置为任何人都可以访问。我是否必须以某种方式进行身份验证 - 即使我从同一个浏览器会话中运行它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:13:34.153

它需要设置为任何人都可以访问，包括匿名。你确定是这个设置？

# android - SAX Parser 相同的标记覆盖值

> ID：11475975
> 
> 赞同：0
> 
> 时间：2012-07-13T18:09:55.277
> 
> 标签：android, xml-parsing, sax, saxparser

我正在为我正在开发的 android 应用程序使用 SAX 解析器，我很难尝试保存 Project 的名称标签以免被覆盖。这里的问题是我在项目中的名称标签被许可证中的名称标签覆盖，因为标签是相同的。其余的被很好地解析了。此外，这个 xml 是通过将 GET 请求传递给 API 来生成的，所以我无法编辑它。有没有办法可以省略许可证字段中的名称标签，或者尝试了解我在文档中的位置，这是一个问题，因为 SAX 甚至是驱动的。另外，我意识到使用 DOM 可以很容易地完成此任务，但我现在已经走得太远了，无法切换到 DOM。我附上了我的 XML 处理代码片段和我试图解析的 xml 文件。

谢谢

```
@Override
public void startElement (String namespaceURI, String localName, String qName, Attributes attributes) throws SAXException 
{
    buffer.setLength(0);

    if (localName.equalsIgnoreCase("result"))
    {
        results = new ArrayList <Result> ();
    }

    if (localName.equalsIgnoreCase("project"))
    {
        result = new Result ();
    }

    if (localName.equalsIgnoreCase("name"))
    {
        result.name = buffer.toString ();
        Log.v("PROJECT NAME: ", result.name);
    }
} // end of startElement ()

@Override
public void endDocument () throws SAXException
{}

@Override
public void endElement (String namespaceURI, String localName, String qName) throws SAXException
{       
    if (localName.equalsIgnoreCase("project") || localName.equalsIgnoreCase("account"))
    {
            this.entries++;
            results.add(result);
    }

    else if (localName.equalsIgnoreCase("id"))
    {
        result.id = buffer.toString ();
        Log.v("Id: ", result.id);
    }

    else if (localName.equalsIgnoreCase("created_at"))
    {
        try 
        {
            result.date_created = ResultHandlerProject.DATE_FORMAT.parse(buffer.toString());
        } 
        catch (ParseException e) 
        {
            e.printStackTrace();
        }
    }

    else if (localName.equalsIgnoreCase("updated_at"))
    {
        try 
        {
            result.date_updated = ResultHandlerProject.DATE_FORMAT.parse(buffer.toString());
        } 
        catch (ParseException e) 
        {
            e.printStackTrace();
        }
    }

    else if (localName.equalsIgnoreCase("description"))
    {
        result.description = buffer.toString ();
    }

    else if (localName.equalsIgnoreCase("homepage_url"))
    {
        result.url_homepage = buffer.toString ();
    }

    else if (localName.equalsIgnoreCase("download_url"))
    {
        result.url_download = buffer.toString ();
    }

    else if (localName.equalsIgnoreCase("medium_logo_url"))
    {
        result.image_link = buffer.toString ();
    }

    else if (localName.equalsIgnoreCase("user_count"))
    {
        result.user_count = buffer.toString ();
    }

    else if (localName.equalsIgnoreCase("average_rating"))
    {
        result.rating = buffer.toString ();
    }

    else if (localName.equalsIgnoreCase("rating_count"))
    {
        result.rating_count = buffer.toString ();
    }

    else if (localName.equalsIgnoreCase("analysis_id"))
    {
        result.analysis_id = buffer.toString ();
    }

    else if (localName.equalsIgnoreCase("nice_name"))
    {
        result.license_full_name = buffer.toString ();
        Log.v("License Full Name: ", result.license_full_name);
    }

} // end of endElement () 
```

示例 XML 文件：

```
<result>
<project>
<id>6050</id>
<name>FirePHP</name>
<created_at>2007-06-16T04:03:13Z</created_at>
<updated_at>2012-07-01T15:05:23Z</updated_at>
<description>
FirePHP 
<homepage_url>http://www.firephp.org/</homepage_url>
<download_url>http://www.firephp.org/</download_url>
<url_name>FirePHP</url_name>
<medium_logo_url>
https://s3.amazonaws.com/cloud.ohloh.net/attachments/6638/FirePHP_Large_White_med.png
</medium_logo_url>
<small_logo_url>
https://s3.amazonaws.com/cloud.ohloh.net/attachments/6638/FirePHP_Large_White_small.png
</small_logo_url>
<user_count>145</user_count>
<average_rating>4.11765</average_rating>
<rating_count>34</rating_count>
<analysis_id>8910317</analysis_id>
<licenses>
<license>
<name>bsd</name>
<nice_name>BSD Copyright</nice_name>
</license>
</licenses>
</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T23:55:20.050

您可以通过简单的方式解决您的问题。

1.  在您的类处理程序中创建一些标志。

    ```
    private boolean inProject = false;
    private boolean inLicense = false; 
    ```

2.  像我在下面展示的那样控制这些标志。

    ```
     @Override
       public void startElement (String namespaceURI, String localName, String qName, Attributes attributes) throws SAXException 
       {
          if (localName.equalsIgnoreCase("project")) {
               this.inProject = true;
          }
          else if (localName.equalsIgnoreCase("license")) {
               this.inLicense = true;
          }
       }

       @Override
       public void endElement (String namespaceURI, String localName, String qName) throws SAXException
       {       
           if (localName.equalsIgnoreCase("name") {
               if(inProject) { 
                  //Set your project name here.
                  this.inProject = false;
               }
               else if (inLicense) {
                  //Set your lencense name here.
                  this.inLicense = false;
               }
           }
        } 
    ```

让我知道它是否有效。

# python - 在 python 中使用 sympy 包将值替换为 10x10 矩阵

> ID：11475976
> 
> 赞同：2
> 
> 时间：2012-07-13T18:09:56.927
> 
> 标签：python, sympy

我正在使用符号包 sympy 以 10 个变量来存储 10X10 反对称矩阵。然后在每个迭代步骤中，我将数值代入矩阵的条目中。但是，由于符号表达式非常复杂，替换值需要很长时间。每次替换大约需要 100 秒，我需要至少 10,000 次迭代才能获得有意义的结果。

所以，我想知道是否有任何快速的方法来替换这些值。现在，我只是将值代入矩阵的上对角线一半，这使代入次数减半，但仍然花费了太长时间。

谢谢！

# .net - Chrome 不显示来自 asp.net 页面的 PDF

> ID：11475981
> 
> 赞同：3
> 
> 时间：2012-07-13T18:10:44.323
> 
> 标签：.net, google-chrome, pdf

.aspx 页面中有一个 .pdf 文件，如下所示：`<embed src="http://.../ShowPdf.aspx?id=1" type="application/pdf">`. Chrome 仅显示“正在加载”图像并挂起而不显示 pdf（chrome pdf 查看器和 adobe 插件都不起作用）。其他浏览器打开pdf。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T13:58:57.220

我也遇到了这个问题，经过多次研究，我终于解决了。

我发现`HTTP`响应标头应具有以下实体标头：

`content-length: file size`

如果不指定此标头，Web 服务器将放置默认值：

`content-length: chunked`

我不知道为什么谷歌浏览器会出现这个问题，因为正如你所说，在 IE 或 Firefox 等其他浏览器中，它们会正确呈现/打开 PDF 文件。

以下是我用来解决此问题的代码。它适用于我的情况，现在谷歌浏览器正在显示我的网络应用程序的 PDF 文件！

```
 System.IO.FileInfo fileInfo;
    fileInfo = My.Computer.FileSystem.GetFileInfo(fullPathToFile);
    Response.AddHeader("Content-Length", fileInfo.Length.ToString()); 
```

我希望我对你有所帮助。

以下是我发现有用的一些参考资料：
[Chrome 和 Firefox 的 PDF 处理程序问题](https://stackoverflow.com/questions/6793264/pdf-handler-problem-with-chrome-firefox)
[HTTP 标头中的“Content-Length”字段是什么？](https://stackoverflow.com/questions/2773396/whats-the-content-length-field-in-http-header)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-17T22:29:05.010

如果您在 Firefox 中显示 PDF 时也遇到问题，我发现：

> > “您需要指定内容类型，以便浏览器知道它正在下载/显示内联的文件......就像这样：”

```
 Response.ContentType = "application/pdf"
     Response.AddHeader("Content-Disposition", "inline;filename=YourFileName.pdf") 
```

它对我有用，我也希望对你有帮助并帮助你。

来源：[http ://forums.asp.net/t/1784151.aspx](http://forums.asp.net/t/1784151.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-07T22:23:27.200

非常感谢，我也遇到了同样的问题，已经解决了。我使用的是报表查看器，但我需要自动以 pdf 格式显示它，并且它工作正常，但是当我使用 Chrome 时，它​​有同样的问题，当我想保存文件时，它以扩展名 .ASPX 保存而不是.pdf。

我与解决方案分享我的代码：

```
 string deviceInfo = "";
                string[] streams = null;
                string mimeType = null;
                string encoding = null;
                string fileNameExtension = null;
                Warning[] war = null;
                Byte[] bytes = this.ReportViewer.LocalReport.Render("PDF", deviceInfo, out mimeType, out encoding, out fileNameExtension, out streams, out war);
                System.IO.MemoryStream ms = new System.IO.MemoryStream(bytes);
                Response.Clear();
                Response.ContentType = "Application/pdf";
                Response.AddHeader("Content-Length", bytes.Length.ToString());
                Response.AddHeader("Content-disposition", "inline; filename= NombreReporte");
                Response.BinaryWrite(ms.ToArray());
                Response.Flush();
                Response.End(); 
```

# objective-c - 如何禁用点击到另一个 NSView 后面的 NSView

> ID：11475986
> 
> 赞同：18
> 
> 时间：2012-07-13T18:11:08.347
> 
> 标签：objective-c, macos, cocoa, nsview

我有两个 NSViews 在彼此之上。一个 NSView 呈现一个带有行的表。单击一行时，另一个视图会显示在该视图的顶部。

现在的问题是，当我单击第二个视图上的一个区域时，在 NSView 下方有一行时，它会被单击。我怎么能阻止它？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-05-12T15:57:19.737

在您的顶级视图中，`mouseDown:`在该视图中实现并且不要调用 nextResponder 或在其中执行任何操作。

```
- (void)mouseDown:(NSEvent *)theEvent{
    //Do nothing to not propagate the click event to descendant views   
} 
```

我有与 OP 完全相同的场景，这对我来说是按预期工作的。归功于我在[这里](https://www.mail-archive.com/cocoa-dev@lists.apple.com/msg45005.html)找到的答案导致我这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-06T15:15:44.677

子类化并`acceptsFirstMouse`在视图中实现，返回`YES`. 此外，在该视图中设置`acceptsTouchEvents`为。`YES`

* * *

## 回答 #3

> 赞同：-8
> 
> 时间：2012-07-13T18:33:36.453

您可以在显示时在顶视图中启用触摸和鼠标事件：

```
topView.acceptsTouchEvents = YES;
topView.acceptsFirstMouse = YES; 
```

**编辑：**评论是正确的，`acceptsFirstMouse`不是属性，必须在子类中更新。

# spring - Spring HibernateTransactionManager 的全局事务超时

> ID：11475990
> 
> 赞同：1
> 
> 时间：2012-07-13T18:11:16.147
> 
> 标签：spring, hibernate, transactions

我正在使用 Spring 的 HibernateTransactionManager 使用注释来管理我的事务。看起来可以在注释上设置超时值，但我看不到如何为整个应用程序全局设置它们，然后根据需要覆盖注释。

这是我的配置

```
<bean id="txManager"     class="org.springframework.orm.hibernate3.HibernateTransactionManager">
<property name="sessionFactory" ref="sessionFactory" />
</bean>

<tx:annotation-driven transaction-manager="txManager"/> 
```

有任何想法吗？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T18:55:08.747

`HibernateTransactionManager.setDefaultTimeout()`：

```
<bean id="txManager"     class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name = "defaultTimeout" value = "value in milliseconds" />
    <property name="sessionFactory" ref="sessionFactory" />
</bean> 
```

# c# - Web服务文件和类文件的区别

> ID：11475999
> 
> 赞同：0
> 
> 时间：2012-07-13T18:11:38.250
> 
> 标签：c#

**Web 服务文件（即.asmx**文件）和类文件（即**.cs**文件）之间有什么区别。

所有主要逻辑都在 Web 服务**.asmx.cs**文件中。基本上我需要将它转移到一个**.cs**类文件中，以便可以从另一个 Web 服务调用它。

请告诉我如何处理它。我关注了这个链接，但它并没有说明如何做到这一点

[Web 服务与类文件 - 性能](https://stackoverflow.com/questions/6652313/web-service-vs-class-file-performance)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:24:31.760

不同之处在于 asmx 文件被注册为作为 web 服务处理（正如你所提到的，所有后端功能都将在 cs 文件中）例程，就像 aspx 文件作为页面处理一样。这可以在 IIS 控制台中配置，您可以轻松添加自己的请求处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:25:42.300

asmx 文件是应用程序的入口点。

您应该将代码保持在最低限度，只需调用其他类。您可以将这些类放在一个类库中，以便在您的两个 Web 服务项目之间共享。